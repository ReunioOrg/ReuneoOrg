(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))u(m);new MutationObserver(m=>{for(const x of m)if(x.type==="childList")for(const y of x.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&u(y)}).observe(document,{childList:!0,subtree:!0});function a(m){const x={};return m.integrity&&(x.integrity=m.integrity),m.referrerPolicy&&(x.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?x.credentials="include":m.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function u(m){if(m.ep)return;m.ep=!0;const x=a(m);fetch(m.href,x)}})();var lc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xd={exports:{}},ka={},yd={exports:{}},Dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l1;function E2(){if(l1)return Dt;l1=1;var t=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),y=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),C=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),T=Symbol.iterator;function _(K){return K===null||typeof K!="object"?null:(K=T&&K[T]||K["@@iterator"],typeof K=="function"?K:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,F={};function j(K,X,we){this.props=K,this.context=X,this.refs=F,this.updater=we||M}j.prototype.isReactComponent={},j.prototype.setState=function(K,X){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,X,"setState")},j.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function z(){}z.prototype=j.prototype;function V(K,X,we){this.props=K,this.context=X,this.refs=F,this.updater=we||M}var B=V.prototype=new z;B.constructor=V,L(B,j.prototype),B.isPureReactComponent=!0;var Y=Array.isArray,$=Object.prototype.hasOwnProperty,re={current:null},G={key:!0,ref:!0,__self:!0,__source:!0};function te(K,X,we){var be,de={},q=null,Re=null;if(X!=null)for(be in X.ref!==void 0&&(Re=X.ref),X.key!==void 0&&(q=""+X.key),X)$.call(X,be)&&!G.hasOwnProperty(be)&&(de[be]=X[be]);var xe=arguments.length-2;if(xe===1)de.children=we;else if(1<xe){for(var Ae=Array(xe),nt=0;nt<xe;nt++)Ae[nt]=arguments[nt+2];de.children=Ae}if(K&&K.defaultProps)for(be in xe=K.defaultProps,xe)de[be]===void 0&&(de[be]=xe[be]);return{$$typeof:t,type:K,key:q,ref:Re,props:de,_owner:re.current}}function J(K,X){return{$$typeof:t,type:K.type,key:X,ref:K.ref,props:K.props,_owner:K._owner}}function ye(K){return typeof K=="object"&&K!==null&&K.$$typeof===t}function _e(K){var X={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(we){return X[we]})}var Ne=/\/+/g;function Se(K,X){return typeof K=="object"&&K!==null&&K.key!=null?_e(""+K.key):X.toString(36)}function Ee(K,X,we,be,de){var q=typeof K;(q==="undefined"||q==="boolean")&&(K=null);var Re=!1;if(K===null)Re=!0;else switch(q){case"string":case"number":Re=!0;break;case"object":switch(K.$$typeof){case t:case i:Re=!0}}if(Re)return Re=K,de=de(Re),K=be===""?"."+Se(Re,0):be,Y(de)?(we="",K!=null&&(we=K.replace(Ne,"$&/")+"/"),Ee(de,X,we,"",function(nt){return nt})):de!=null&&(ye(de)&&(de=J(de,we+(!de.key||Re&&Re.key===de.key?"":(""+de.key).replace(Ne,"$&/")+"/")+K)),X.push(de)),1;if(Re=0,be=be===""?".":be+":",Y(K))for(var xe=0;xe<K.length;xe++){q=K[xe];var Ae=be+Se(q,xe);Re+=Ee(q,X,we,Ae,de)}else if(Ae=_(K),typeof Ae=="function")for(K=Ae.call(K),xe=0;!(q=K.next()).done;)q=q.value,Ae=be+Se(q,xe++),Re+=Ee(q,X,we,Ae,de);else if(q==="object")throw X=String(K),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return Re}function Z(K,X,we){if(K==null)return K;var be=[],de=0;return Ee(K,be,"","",function(q){return X.call(we,q,de++)}),be}function Le(K){if(K._status===-1){var X=K._result;X=X(),X.then(function(we){(K._status===0||K._status===-1)&&(K._status=1,K._result=we)},function(we){(K._status===0||K._status===-1)&&(K._status=2,K._result=we)}),K._status===-1&&(K._status=0,K._result=X)}if(K._status===1)return K._result.default;throw K._result}var ve={current:null},ge={transition:null},De={ReactCurrentDispatcher:ve,ReactCurrentBatchConfig:ge,ReactCurrentOwner:re};function Ce(){throw Error("act(...) is not supported in production builds of React.")}return Dt.Children={map:Z,forEach:function(K,X,we){Z(K,function(){X.apply(this,arguments)},we)},count:function(K){var X=0;return Z(K,function(){X++}),X},toArray:function(K){return Z(K,function(X){return X})||[]},only:function(K){if(!ye(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},Dt.Component=j,Dt.Fragment=a,Dt.Profiler=m,Dt.PureComponent=V,Dt.StrictMode=u,Dt.Suspense=v,Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=De,Dt.act=Ce,Dt.cloneElement=function(K,X,we){if(K==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+K+".");var be=L({},K.props),de=K.key,q=K.ref,Re=K._owner;if(X!=null){if(X.ref!==void 0&&(q=X.ref,Re=re.current),X.key!==void 0&&(de=""+X.key),K.type&&K.type.defaultProps)var xe=K.type.defaultProps;for(Ae in X)$.call(X,Ae)&&!G.hasOwnProperty(Ae)&&(be[Ae]=X[Ae]===void 0&&xe!==void 0?xe[Ae]:X[Ae])}var Ae=arguments.length-2;if(Ae===1)be.children=we;else if(1<Ae){xe=Array(Ae);for(var nt=0;nt<Ae;nt++)xe[nt]=arguments[nt+2];be.children=xe}return{$$typeof:t,type:K.type,key:de,ref:q,props:be,_owner:Re}},Dt.createContext=function(K){return K={$$typeof:y,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},K.Provider={$$typeof:x,_context:K},K.Consumer=K},Dt.createElement=te,Dt.createFactory=function(K){var X=te.bind(null,K);return X.type=K,X},Dt.createRef=function(){return{current:null}},Dt.forwardRef=function(K){return{$$typeof:b,render:K}},Dt.isValidElement=ye,Dt.lazy=function(K){return{$$typeof:S,_payload:{_status:-1,_result:K},_init:Le}},Dt.memo=function(K,X){return{$$typeof:C,type:K,compare:X===void 0?null:X}},Dt.startTransition=function(K){var X=ge.transition;ge.transition={};try{K()}finally{ge.transition=X}},Dt.unstable_act=Ce,Dt.useCallback=function(K,X){return ve.current.useCallback(K,X)},Dt.useContext=function(K){return ve.current.useContext(K)},Dt.useDebugValue=function(){},Dt.useDeferredValue=function(K){return ve.current.useDeferredValue(K)},Dt.useEffect=function(K,X){return ve.current.useEffect(K,X)},Dt.useId=function(){return ve.current.useId()},Dt.useImperativeHandle=function(K,X,we){return ve.current.useImperativeHandle(K,X,we)},Dt.useInsertionEffect=function(K,X){return ve.current.useInsertionEffect(K,X)},Dt.useLayoutEffect=function(K,X){return ve.current.useLayoutEffect(K,X)},Dt.useMemo=function(K,X){return ve.current.useMemo(K,X)},Dt.useReducer=function(K,X,we){return ve.current.useReducer(K,X,we)},Dt.useRef=function(K){return ve.current.useRef(K)},Dt.useState=function(K){return ve.current.useState(K)},Dt.useSyncExternalStore=function(K,X,we){return ve.current.useSyncExternalStore(K,X,we)},Dt.useTransition=function(){return ve.current.useTransition()},Dt.version="18.3.1",Dt}var c1;function Nf(){return c1||(c1=1,yd.exports=E2()),yd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u1;function S2(){if(u1)return ka;u1=1;var t=Nf(),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),u=Object.prototype.hasOwnProperty,m=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x={key:!0,ref:!0,__self:!0,__source:!0};function y(b,v,C){var S,T={},_=null,M=null;C!==void 0&&(_=""+C),v.key!==void 0&&(_=""+v.key),v.ref!==void 0&&(M=v.ref);for(S in v)u.call(v,S)&&!x.hasOwnProperty(S)&&(T[S]=v[S]);if(b&&b.defaultProps)for(S in v=b.defaultProps,v)T[S]===void 0&&(T[S]=v[S]);return{$$typeof:i,type:b,key:_,ref:M,props:T,_owner:m.current}}return ka.Fragment=a,ka.jsx=y,ka.jsxs=y,ka}var d1;function A2(){return d1||(d1=1,xd.exports=S2()),xd.exports}var h=A2(),N=Nf();const Ht=hp(N);var cc={},wd={exports:{}},Br={},vd={exports:{}},Cd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f1;function N2(){return f1||(f1=1,function(t){function i(ge,De){var Ce=ge.length;ge.push(De);e:for(;0<Ce;){var K=Ce-1>>>1,X=ge[K];if(0<m(X,De))ge[K]=De,ge[Ce]=X,Ce=K;else break e}}function a(ge){return ge.length===0?null:ge[0]}function u(ge){if(ge.length===0)return null;var De=ge[0],Ce=ge.pop();if(Ce!==De){ge[0]=Ce;e:for(var K=0,X=ge.length,we=X>>>1;K<we;){var be=2*(K+1)-1,de=ge[be],q=be+1,Re=ge[q];if(0>m(de,Ce))q<X&&0>m(Re,de)?(ge[K]=Re,ge[q]=Ce,K=q):(ge[K]=de,ge[be]=Ce,K=be);else if(q<X&&0>m(Re,Ce))ge[K]=Re,ge[q]=Ce,K=q;else break e}}return De}function m(ge,De){var Ce=ge.sortIndex-De.sortIndex;return Ce!==0?Ce:ge.id-De.id}if(typeof performance=="object"&&typeof performance.now=="function"){var x=performance;t.unstable_now=function(){return x.now()}}else{var y=Date,b=y.now();t.unstable_now=function(){return y.now()-b}}var v=[],C=[],S=1,T=null,_=3,M=!1,L=!1,F=!1,j=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(ge){for(var De=a(C);De!==null;){if(De.callback===null)u(C);else if(De.startTime<=ge)u(C),De.sortIndex=De.expirationTime,i(v,De);else break;De=a(C)}}function Y(ge){if(F=!1,B(ge),!L)if(a(v)!==null)L=!0,Le($);else{var De=a(C);De!==null&&ve(Y,De.startTime-ge)}}function $(ge,De){L=!1,F&&(F=!1,z(te),te=-1),M=!0;var Ce=_;try{for(B(De),T=a(v);T!==null&&(!(T.expirationTime>De)||ge&&!_e());){var K=T.callback;if(typeof K=="function"){T.callback=null,_=T.priorityLevel;var X=K(T.expirationTime<=De);De=t.unstable_now(),typeof X=="function"?T.callback=X:T===a(v)&&u(v),B(De)}else u(v);T=a(v)}if(T!==null)var we=!0;else{var be=a(C);be!==null&&ve(Y,be.startTime-De),we=!1}return we}finally{T=null,_=Ce,M=!1}}var re=!1,G=null,te=-1,J=5,ye=-1;function _e(){return!(t.unstable_now()-ye<J)}function Ne(){if(G!==null){var ge=t.unstable_now();ye=ge;var De=!0;try{De=G(!0,ge)}finally{De?Se():(re=!1,G=null)}}else re=!1}var Se;if(typeof V=="function")Se=function(){V(Ne)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,Z=Ee.port2;Ee.port1.onmessage=Ne,Se=function(){Z.postMessage(null)}}else Se=function(){j(Ne,0)};function Le(ge){G=ge,re||(re=!0,Se())}function ve(ge,De){te=j(function(){ge(t.unstable_now())},De)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ge){ge.callback=null},t.unstable_continueExecution=function(){L||M||(L=!0,Le($))},t.unstable_forceFrameRate=function(ge){0>ge||125<ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<ge?Math.floor(1e3/ge):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return a(v)},t.unstable_next=function(ge){switch(_){case 1:case 2:case 3:var De=3;break;default:De=_}var Ce=_;_=De;try{return ge()}finally{_=Ce}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ge,De){switch(ge){case 1:case 2:case 3:case 4:case 5:break;default:ge=3}var Ce=_;_=ge;try{return De()}finally{_=Ce}},t.unstable_scheduleCallback=function(ge,De,Ce){var K=t.unstable_now();switch(typeof Ce=="object"&&Ce!==null?(Ce=Ce.delay,Ce=typeof Ce=="number"&&0<Ce?K+Ce:K):Ce=K,ge){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=Ce+X,ge={id:S++,callback:De,priorityLevel:ge,startTime:Ce,expirationTime:X,sortIndex:-1},Ce>K?(ge.sortIndex=Ce,i(C,ge),a(v)===null&&ge===a(C)&&(F?(z(te),te=-1):F=!0,ve(Y,Ce-K))):(ge.sortIndex=X,i(v,ge),L||M||(L=!0,Le($))),ge},t.unstable_shouldYield=_e,t.unstable_wrapCallback=function(ge){var De=_;return function(){var Ce=_;_=De;try{return ge.apply(this,arguments)}finally{_=Ce}}}}(Cd)),Cd}var h1;function T2(){return h1||(h1=1,vd.exports=N2()),vd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m1;function I2(){if(m1)return Br;m1=1;var t=Nf(),i=T2();function a(n){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+n,f=1;f<arguments.length;f++)o+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+n+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=new Set,m={};function x(n,o){y(n,o),y(n+"Capture",o)}function y(n,o){for(m[n]=o,n=0;n<o.length;n++)u.add(o[n])}var b=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v=Object.prototype.hasOwnProperty,C=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S={},T={};function _(n){return v.call(T,n)?!0:v.call(S,n)?!1:C.test(n)?T[n]=!0:(S[n]=!0,!1)}function M(n,o,f,g){if(f!==null&&f.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return g?!1:f!==null?!f.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function L(n,o,f,g){if(o===null||typeof o>"u"||M(n,o,f,g))return!0;if(g)return!1;if(f!==null)switch(f.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function F(n,o,f,g,A,I,O){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=g,this.attributeNamespace=A,this.mustUseProperty=f,this.propertyName=n,this.type=o,this.sanitizeURL=I,this.removeEmptyString=O}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){j[n]=new F(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var o=n[0];j[o]=new F(o,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){j[n]=new F(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){j[n]=new F(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){j[n]=new F(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){j[n]=new F(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){j[n]=new F(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){j[n]=new F(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){j[n]=new F(n,5,!1,n.toLowerCase(),null,!1,!1)});var z=/[\-:]([a-z])/g;function V(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var o=n.replace(z,V);j[o]=new F(o,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var o=n.replace(z,V);j[o]=new F(o,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var o=n.replace(z,V);j[o]=new F(o,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){j[n]=new F(n,1,!1,n.toLowerCase(),null,!1,!1)}),j.xlinkHref=new F("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){j[n]=new F(n,1,!1,n.toLowerCase(),null,!0,!0)});function B(n,o,f,g){var A=j.hasOwnProperty(o)?j[o]:null;(A!==null?A.type!==0:g||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(L(o,f,A,g)&&(f=null),g||A===null?_(o)&&(f===null?n.removeAttribute(o):n.setAttribute(o,""+f)):A.mustUseProperty?n[A.propertyName]=f===null?A.type===3?!1:"":f:(o=A.attributeName,g=A.attributeNamespace,f===null?n.removeAttribute(o):(A=A.type,f=A===3||A===4&&f===!0?"":""+f,g?n.setAttributeNS(g,o,f):n.setAttribute(o,f))))}var Y=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$=Symbol.for("react.element"),re=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),ye=Symbol.for("react.provider"),_e=Symbol.for("react.context"),Ne=Symbol.for("react.forward_ref"),Se=Symbol.for("react.suspense"),Ee=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),Le=Symbol.for("react.lazy"),ve=Symbol.for("react.offscreen"),ge=Symbol.iterator;function De(n){return n===null||typeof n!="object"?null:(n=ge&&n[ge]||n["@@iterator"],typeof n=="function"?n:null)}var Ce=Object.assign,K;function X(n){if(K===void 0)try{throw Error()}catch(f){var o=f.stack.trim().match(/\n( *(at )?)/);K=o&&o[1]||""}return`
`+K+n}var we=!1;function be(n,o){if(!n||we)return"";we=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(pe){var g=pe}Reflect.construct(n,[],o)}else{try{o.call()}catch(pe){g=pe}n.call(o.prototype)}else{try{throw Error()}catch(pe){g=pe}n()}}catch(pe){if(pe&&g&&typeof pe.stack=="string"){for(var A=pe.stack.split(`
`),I=g.stack.split(`
`),O=A.length-1,H=I.length-1;1<=O&&0<=H&&A[O]!==I[H];)H--;for(;1<=O&&0<=H;O--,H--)if(A[O]!==I[H]){if(O!==1||H!==1)do if(O--,H--,0>H||A[O]!==I[H]){var ee=`
`+A[O].replace(" at new "," at ");return n.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",n.displayName)),ee}while(1<=O&&0<=H);break}}}finally{we=!1,Error.prepareStackTrace=f}return(n=n?n.displayName||n.name:"")?X(n):""}function de(n){switch(n.tag){case 5:return X(n.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return n=be(n.type,!1),n;case 11:return n=be(n.type.render,!1),n;case 1:return n=be(n.type,!0),n;default:return""}}function q(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case G:return"Fragment";case re:return"Portal";case J:return"Profiler";case te:return"StrictMode";case Se:return"Suspense";case Ee:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case _e:return(n.displayName||"Context")+".Consumer";case ye:return(n._context.displayName||"Context")+".Provider";case Ne:var o=n.render;return n=n.displayName,n||(n=o.displayName||o.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Z:return o=n.displayName||null,o!==null?o:q(n.type)||"Memo";case Le:o=n._payload,n=n._init;try{return q(n(o))}catch{}}return null}function Re(n){var o=n.type;switch(n.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=o.render,n=n.displayName||n.name||"",o.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(o);case 8:return o===te?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function xe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ae(n){var o=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function nt(n){var o=Ae(n)?"checked":"value",f=Object.getOwnPropertyDescriptor(n.constructor.prototype,o),g=""+n[o];if(!n.hasOwnProperty(o)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var A=f.get,I=f.set;return Object.defineProperty(n,o,{configurable:!0,get:function(){return A.call(this)},set:function(O){g=""+O,I.call(this,O)}}),Object.defineProperty(n,o,{enumerable:f.enumerable}),{getValue:function(){return g},setValue:function(O){g=""+O},stopTracking:function(){n._valueTracker=null,delete n[o]}}}}function Xe(n){n._valueTracker||(n._valueTracker=nt(n))}function ce(n){if(!n)return!1;var o=n._valueTracker;if(!o)return!0;var f=o.getValue(),g="";return n&&(g=Ae(n)?n.checked?"true":"false":n.value),n=g,n!==f?(o.setValue(n),!0):!1}function me(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Ye(n,o){var f=o.checked;return Ce({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??n._wrapperState.initialChecked})}function $e(n,o){var f=o.defaultValue==null?"":o.defaultValue,g=o.checked!=null?o.checked:o.defaultChecked;f=xe(o.value!=null?o.value:f),n._wrapperState={initialChecked:g,initialValue:f,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function yt(n,o){o=o.checked,o!=null&&B(n,"checked",o,!1)}function dt(n,o){yt(n,o);var f=xe(o.value),g=o.type;if(f!=null)g==="number"?(f===0&&n.value===""||n.value!=f)&&(n.value=""+f):n.value!==""+f&&(n.value=""+f);else if(g==="submit"||g==="reset"){n.removeAttribute("value");return}o.hasOwnProperty("value")?Qe(n,o.type,f):o.hasOwnProperty("defaultValue")&&Qe(n,o.type,xe(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(n.defaultChecked=!!o.defaultChecked)}function Ke(n,o,f){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var g=o.type;if(!(g!=="submit"&&g!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+n._wrapperState.initialValue,f||o===n.value||(n.value=o),n.defaultValue=o}f=n.name,f!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,f!==""&&(n.name=f)}function Qe(n,o,f){(o!=="number"||me(n.ownerDocument)!==n)&&(f==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+f&&(n.defaultValue=""+f))}var Bt=Array.isArray;function ze(n,o,f,g){if(n=n.options,o){o={};for(var A=0;A<f.length;A++)o["$"+f[A]]=!0;for(f=0;f<n.length;f++)A=o.hasOwnProperty("$"+n[f].value),n[f].selected!==A&&(n[f].selected=A),A&&g&&(n[f].defaultSelected=!0)}else{for(f=""+xe(f),o=null,A=0;A<n.length;A++){if(n[A].value===f){n[A].selected=!0,g&&(n[A].defaultSelected=!0);return}o!==null||n[A].disabled||(o=n[A])}o!==null&&(o.selected=!0)}}function mn(n,o){if(o.dangerouslySetInnerHTML!=null)throw Error(a(91));return Ce({},o,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Hn(n,o){var f=o.value;if(f==null){if(f=o.children,o=o.defaultValue,f!=null){if(o!=null)throw Error(a(92));if(Bt(f)){if(1<f.length)throw Error(a(93));f=f[0]}o=f}o==null&&(o=""),f=o}n._wrapperState={initialValue:xe(f)}}function Ve(n,o){var f=xe(o.value),g=xe(o.defaultValue);f!=null&&(f=""+f,f!==n.value&&(n.value=f),o.defaultValue==null&&n.defaultValue!==f&&(n.defaultValue=f)),g!=null&&(n.defaultValue=""+g)}function kt(n){var o=n.textContent;o===n._wrapperState.initialValue&&o!==""&&o!==null&&(n.value=o)}function We(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ht(n,o){return n==null||n==="http://www.w3.org/1999/xhtml"?We(o):n==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var et,_t=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,f,g,A){MSApp.execUnsafeLocalFunction(function(){return n(o,f,g,A)})}:n}(function(n,o){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=o;else{for(et=et||document.createElement("div"),et.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=et.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;o.firstChild;)n.appendChild(o.firstChild)}});function en(n,o){if(o){var f=n.firstChild;if(f&&f===n.lastChild&&f.nodeType===3){f.nodeValue=o;return}}n.textContent=o}var Yt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ct=["Webkit","ms","Moz","O"];Object.keys(Yt).forEach(function(n){ct.forEach(function(o){o=o+n.charAt(0).toUpperCase()+n.substring(1),Yt[o]=Yt[n]})});function Ie(n,o,f){return o==null||typeof o=="boolean"||o===""?"":f||typeof o!="number"||o===0||Yt.hasOwnProperty(n)&&Yt[n]?(""+o).trim():o+"px"}function ae(n,o){n=n.style;for(var f in o)if(o.hasOwnProperty(f)){var g=f.indexOf("--")===0,A=Ie(f,o[f],g);f==="float"&&(f="cssFloat"),g?n.setProperty(f,A):n[f]=A}}var ft=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ot(n,o){if(o){if(ft[n]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(a(137,n));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(a(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(a(61))}if(o.style!=null&&typeof o.style!="object")throw Error(a(62))}}function ut(n,o){if(n.indexOf("-")===-1)return typeof o.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zt=null;function cn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var un=null,Fe=null,dn=null;function Gn(n){if(n=ga(n)){if(typeof un!="function")throw Error(a(280));var o=n.stateNode;o&&(o=El(o),un(n.stateNode,n.type,o))}}function Yr(n){Fe?dn?dn.push(n):dn=[n]:Fe=n}function Fn(){if(Fe){var n=Fe,o=dn;if(dn=Fe=null,Gn(n),o)for(n=0;n<o.length;n++)Gn(o[n])}}function Qi(n,o){return n(o)}function xn(){}var $r=!1;function si(n,o,f){if($r)return n(o,f);$r=!0;try{return Qi(n,o,f)}finally{$r=!1,(Fe!==null||dn!==null)&&(xn(),Fn())}}function Vn(n,o){var f=n.stateNode;if(f===null)return null;var g=El(f);if(g===null)return null;f=g[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(n=n.type,g=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!g;break e;default:n=!1}if(n)return null;if(f&&typeof f!="function")throw Error(a(231,o,typeof f));return f}var ki=!1;if(b)try{var yn={};Object.defineProperty(yn,"passive",{get:function(){ki=!0}}),window.addEventListener("test",yn,yn),window.removeEventListener("test",yn,yn)}catch{ki=!1}function Ji(n,o,f,g,A,I,O,H,ee){var pe=Array.prototype.slice.call(arguments,3);try{o.apply(f,pe)}catch(Me){this.onError(Me)}}var Kt=!1,Sr=null,$t=!1,Ze=null,kn={onError:function(n){Kt=!0,Sr=n}};function es(n,o,f,g,A,I,O,H,ee){Kt=!1,Sr=null,Ji.apply(kn,arguments)}function Xn(n,o,f,g,A,I,O,H,ee){if(es.apply(this,arguments),Kt){if(Kt){var pe=Sr;Kt=!1,Sr=null}else throw Error(a(198));$t||($t=!0,Ze=pe)}}function gr(n){var o=n,f=n;if(n.alternate)for(;o.return;)o=o.return;else{n=o;do o=n,o.flags&4098&&(f=o.return),n=o.return;while(n)}return o.tag===3?f:null}function oi(n){if(n.tag===13){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function Ar(n){if(gr(n)!==n)throw Error(a(188))}function nr(n){var o=n.alternate;if(!o){if(o=gr(n),o===null)throw Error(a(188));return o!==n?null:n}for(var f=n,g=o;;){var A=f.return;if(A===null)break;var I=A.alternate;if(I===null){if(g=A.return,g!==null){f=g;continue}break}if(A.child===I.child){for(I=A.child;I;){if(I===f)return Ar(A),n;if(I===g)return Ar(A),o;I=I.sibling}throw Error(a(188))}if(f.return!==g.return)f=A,g=I;else{for(var O=!1,H=A.child;H;){if(H===f){O=!0,f=A,g=I;break}if(H===g){O=!0,g=A,f=I;break}H=H.sibling}if(!O){for(H=I.child;H;){if(H===f){O=!0,f=I,g=A;break}if(H===g){O=!0,g=I,f=A;break}H=H.sibling}if(!O)throw Error(a(189))}}if(f.alternate!==g)throw Error(a(190))}if(f.tag!==3)throw Error(a(188));return f.stateNode.current===f?n:o}function Jo(n){return n=nr(n),n!==null?_s(n):null}function _s(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var o=_s(n);if(o!==null)return o;n=n.sibling}return null}var Yn=i.unstable_scheduleCallback,$n=i.unstable_cancelCallback,tn=i.unstable_shouldYield,Rs=i.unstable_requestPaint,zt=i.unstable_now,ks=i.unstable_getCurrentPriorityLevel,Te=i.unstable_ImmediatePriority,fo=i.unstable_UserBlockingPriority,Gt=i.unstable_NormalPriority,yi=i.unstable_LowPriority,ho=i.unstable_IdlePriority,Pt=null,It=null;function Rt(n){if(It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(Pt,n,void 0,(n.current.flags&128)===128)}catch{}}var Zn=Math.clz32?Math.clz32:pn,Pi=Math.log,ts=Math.LN2;function pn(n){return n>>>=0,n===0?32:31-(Pi(n)/ts|0)|0}var Nr=64,ai=4194304;function qt(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function xr(n,o){var f=n.pendingLanes;if(f===0)return 0;var g=0,A=n.suspendedLanes,I=n.pingedLanes,O=f&268435455;if(O!==0){var H=O&~A;H!==0?g=qt(H):(I&=O,I!==0&&(g=qt(I)))}else O=f&~A,O!==0?g=qt(O):I!==0&&(g=qt(I));if(g===0)return 0;if(o!==0&&o!==g&&!(o&A)&&(A=g&-g,I=o&-o,A>=I||A===16&&(I&4194240)!==0))return o;if(g&4&&(g|=f&16),o=n.entangledLanes,o!==0)for(n=n.entanglements,o&=g;0<o;)f=31-Zn(o),A=1<<f,g|=n[f],o&=~A;return g}function ea(n,o){switch(n){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wi(n,o){for(var f=n.suspendedLanes,g=n.pingedLanes,A=n.expirationTimes,I=n.pendingLanes;0<I;){var O=31-Zn(I),H=1<<O,ee=A[O];ee===-1?(!(H&f)||H&g)&&(A[O]=ea(H,o)):ee<=o&&(n.expiredLanes|=H),I&=~H}}function Ft(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Pn(){var n=Nr;return Nr<<=1,!(Nr&4194240)&&(Nr=64),n}function oe(n){for(var o=[],f=0;31>f;f++)o.push(n);return o}function U(n,o,f){n.pendingLanes|=o,o!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,o=31-Zn(o),n[o]=f}function it(n,o){var f=n.pendingLanes&~o;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=o,n.mutableReadLanes&=o,n.entangledLanes&=o,o=n.entanglements;var g=n.eventTimes;for(n=n.expirationTimes;0<f;){var A=31-Zn(f),I=1<<A;o[A]=0,g[A]=-1,n[A]=-1,f&=~I}}function rn(n,o){var f=n.entangledLanes|=o;for(n=n.entanglements;f;){var g=31-Zn(f),A=1<<g;A&o|n[g]&o&&(n[g]|=o),f&=~A}}var St=0;function mo(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Mi,rr,at,Qt,ns,Ps=!1,li=[],Oe=null,qe=null,At=null,Ge=new Map,Mt=new Map,sn=[],mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ms(n,o){switch(n){case"focusin":case"focusout":Oe=null;break;case"dragenter":case"dragleave":qe=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Ge.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(o.pointerId)}}function wt(n,o,f,g,A,I){return n===null||n.nativeEvent!==I?(n={blockedOn:o,domEventName:f,eventSystemFlags:g,nativeEvent:I,targetContainers:[A]},o!==null&&(o=ga(o),o!==null&&rr(o)),n):(n.eventSystemFlags|=g,o=n.targetContainers,A!==null&&o.indexOf(A)===-1&&o.push(A),n)}function wn(n,o,f,g,A){switch(o){case"focusin":return Oe=wt(Oe,n,o,f,g,A),!0;case"dragenter":return qe=wt(qe,n,o,f,g,A),!0;case"mouseover":return At=wt(At,n,o,f,g,A),!0;case"pointerover":var I=A.pointerId;return Ge.set(I,wt(Ge.get(I)||null,n,o,f,g,A)),!0;case"gotpointercapture":return I=A.pointerId,Mt.set(I,wt(Mt.get(I)||null,n,o,f,g,A)),!0}return!1}function ta(n){var o=zs(n.target);if(o!==null){var f=gr(o);if(f!==null){if(o=f.tag,o===13){if(o=oi(f),o!==null){n.blockedOn=o,ns(n.priority,function(){at(f)});return}}else if(o===3&&f.stateNode.current.memoizedState.isDehydrated){n.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}n.blockedOn=null}function vn(n){if(n.blockedOn!==null)return!1;for(var o=n.targetContainers;0<o.length;){var f=po(n.domEventName,n.eventSystemFlags,o[0],n.nativeEvent);if(f===null){f=n.nativeEvent;var g=new f.constructor(f.type,f);Zt=g,f.target.dispatchEvent(g),Zt=null}else return o=ga(f),o!==null&&rr(o),n.blockedOn=f,!1;o.shift()}return!0}function Tr(n,o,f){vn(n)&&f.delete(o)}function Ur(){Ps=!1,Oe!==null&&vn(Oe)&&(Oe=null),qe!==null&&vn(qe)&&(qe=null),At!==null&&vn(At)&&(At=null),Ge.forEach(Tr),Mt.forEach(Tr)}function cr(n,o){n.blockedOn===o&&(n.blockedOn=null,Ps||(Ps=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ur)))}function Mn(n){function o(A){return cr(A,n)}if(0<li.length){cr(li[0],n);for(var f=1;f<li.length;f++){var g=li[f];g.blockedOn===n&&(g.blockedOn=null)}}for(Oe!==null&&cr(Oe,n),qe!==null&&cr(qe,n),At!==null&&cr(At,n),Ge.forEach(o),Mt.forEach(o),f=0;f<sn.length;f++)g=sn[f],g.blockedOn===n&&(g.blockedOn=null);for(;0<sn.length&&(f=sn[0],f.blockedOn===null);)ta(f),f.blockedOn===null&&sn.shift()}var Pr=Y.ReactCurrentBatchConfig,vi=!0;function ul(n,o,f,g){var A=St,I=Pr.transition;Pr.transition=null;try{St=1,Oi(n,o,f,g)}finally{St=A,Pr.transition=I}}function Os(n,o,f,g){var A=St,I=Pr.transition;Pr.transition=null;try{St=4,Oi(n,o,f,g)}finally{St=A,Pr.transition=I}}function Oi(n,o,f,g){if(vi){var A=po(n,o,f,g);if(A===null)au(n,o,g,Kn,f),Ms(n,g);else if(wn(A,n,o,f,g))g.stopPropagation();else if(Ms(n,g),o&4&&-1<mt.indexOf(n)){for(;A!==null;){var I=ga(A);if(I!==null&&Mi(I),I=po(n,o,f,g),I===null&&au(n,o,g,Kn,f),I===A)break;A=I}A!==null&&g.stopPropagation()}else au(n,o,g,null,f)}}var Kn=null;function po(n,o,f,g){if(Kn=null,n=cn(g),n=zs(n),n!==null)if(o=gr(n),o===null)n=null;else if(f=o.tag,f===13){if(n=oi(o),n!==null)return n;n=null}else if(f===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null);return Kn=n,null}function na(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ks()){case Te:return 1;case fo:return 4;case Gt:case yi:return 16;case ho:return 536870912;default:return 16}default:return 16}}var ci=null,ra=null,go=null;function dl(){if(go)return go;var n,o=ra,f=o.length,g,A="value"in ci?ci.value:ci.textContent,I=A.length;for(n=0;n<f&&o[n]===A[n];n++);var O=f-n;for(g=1;g<=O&&o[f-g]===A[I-g];g++);return go=A.slice(n,1<g?1-g:void 0)}function Vt(n){var o=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&o===13&&(n=13)):n=o,n===10&&(n=13),32<=n||n===13?n:0}function Ds(){return!0}function Ls(){return!1}function Nn(n){function o(f,g,A,I,O){this._reactName=f,this._targetInst=A,this.type=g,this.nativeEvent=I,this.target=O,this.currentTarget=null;for(var H in n)n.hasOwnProperty(H)&&(f=n[H],this[H]=f?f(I):I[H]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?Ds:Ls,this.isPropagationStopped=Ls,this}return Ce(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Ds)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Ds)},persist:function(){},isPersistent:Ds}),o}var rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},he=Nn(rs),Tt=Ce({},rs,{view:0,detail:0}),qn=Nn(Tt),is,xo,js,yo=Ce({},Tt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==js&&(js&&n.type==="mousemove"?(is=n.screenX-js.screenX,xo=n.screenY-js.screenY):xo=is=0,js=n),is)},movementY:function(n){return"movementY"in n?n.movementY:xo}}),fl=Nn(yo),ia=Ce({},yo,{dataTransfer:0}),On=Nn(ia),sa=Ce({},Tt,{relatedTarget:0}),on=Nn(sa),wo=Ce({},rs,{animationName:0,elapsedTime:0,pseudoElement:0}),Di=Nn(wo),Jt=Ce({},rs,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),pt=Nn(Jt),Qc=Ce({},rs,{data:0}),nn=Nn(Qc),Li={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ss={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zr(n){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(n):(n=Jc[n])?!!o[n]:!1}function Bs(){return Zr}var hl=Ce({},Tt,{key:function(n){if(n.key){var o=Li[n.key]||n.key;if(o!=="Unidentified")return o}return n.type==="keypress"?(n=Vt(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ss[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bs,charCode:function(n){return n.type==="keypress"?Vt(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Vt(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),oa=Nn(hl),ml=Ce({},yo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),aa=Nn(ml),eu=Ce({},Tt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bs}),os=Nn(eu),la=Ce({},rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),tu=Nn(la),Fs=Ce({},yo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),nu=Nn(Fs),Ci=[9,13,27,32],as=b&&"CompositionEvent"in window,ir=null;b&&"documentMode"in document&&(ir=document.documentMode);var pl=b&&"TextEvent"in window&&!ir,zr=b&&(!as||ir&&8<ir&&11>=ir),gl=" ",vo=!1;function xl(n,o){switch(n){case"keyup":return Ci.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ca(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ur=!1;function ru(n,o){switch(n){case"compositionend":return ca(o);case"keypress":return o.which!==32?null:(vo=!0,gl);case"textInput":return n=o.data,n===gl&&vo?null:n;default:return null}}function ua(n,o){if(ur)return n==="compositionend"||!as&&xl(n,o)?(n=dl(),go=ra=ci=null,ur=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return zr&&o.locale!=="ko"?null:o.data;default:return null}}var Vs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jt(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o==="input"?!!Vs[n.type]:o==="textarea"}function Us(n,o,f,g){Yr(g),o=vl(o,"onChange"),0<o.length&&(f=new he("onChange","change",null,f,g),n.push({event:f,listeners:o}))}var k=null,e=null;function r(n){Sh(n,0)}function s(n){var o=Eo(n);if(ce(o))return n}function l(n,o){if(n==="change")return o}var c=!1;if(b){var d;if(b){var p="oninput"in document;if(!p){var w=document.createElement("div");w.setAttribute("oninput","return;"),p=typeof w.oninput=="function"}d=p}else d=!1;c=d&&(!document.documentMode||9<document.documentMode)}function E(){k&&(k.detachEvent("onpropertychange",R),e=k=null)}function R(n){if(n.propertyName==="value"&&s(e)){var o=[];Us(o,e,n,cn(n)),si(r,o)}}function P(n,o,f){n==="focusin"?(E(),k=o,e=f,k.attachEvent("onpropertychange",R)):n==="focusout"&&E()}function D(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return s(e)}function W(n,o){if(n==="click")return s(o)}function Q(n,o){if(n==="input"||n==="change")return s(o)}function ne(n,o){return n===o&&(n!==0||1/n===1/o)||n!==n&&o!==o}var se=typeof Object.is=="function"?Object.is:ne;function fe(n,o){if(se(n,o))return!0;if(typeof n!="object"||n===null||typeof o!="object"||o===null)return!1;var f=Object.keys(n),g=Object.keys(o);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var A=f[g];if(!v.call(o,A)||!se(n[A],o[A]))return!1}return!0}function Be(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ue(n,o){var f=Be(n);n=0;for(var g;f;){if(f.nodeType===3){if(g=n+f.textContent.length,n<=o&&g>=o)return{node:f,offset:o-n};n=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Be(f)}}function Pe(n,o){return n&&o?n===o?!0:n&&n.nodeType===3?!1:o&&o.nodeType===3?Pe(n,o.parentNode):"contains"in n?n.contains(o):n.compareDocumentPosition?!!(n.compareDocumentPosition(o)&16):!1:!1}function Ot(){for(var n=window,o=me();o instanceof n.HTMLIFrameElement;){try{var f=typeof o.contentWindow.location.href=="string"}catch{f=!1}if(f)n=o.contentWindow;else break;o=me(n.document)}return o}function Nt(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o&&(o==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||o==="textarea"||n.contentEditable==="true")}function yr(n){var o=Ot(),f=n.focusedElem,g=n.selectionRange;if(o!==f&&f&&f.ownerDocument&&Pe(f.ownerDocument.documentElement,f)){if(g!==null&&Nt(f)){if(o=g.start,n=g.end,n===void 0&&(n=o),"selectionStart"in f)f.selectionStart=o,f.selectionEnd=Math.min(n,f.value.length);else if(n=(o=f.ownerDocument||document)&&o.defaultView||window,n.getSelection){n=n.getSelection();var A=f.textContent.length,I=Math.min(g.start,A);g=g.end===void 0?I:Math.min(g.end,A),!n.extend&&I>g&&(A=g,g=I,I=A),A=Ue(f,I);var O=Ue(f,g);A&&O&&(n.rangeCount!==1||n.anchorNode!==A.node||n.anchorOffset!==A.offset||n.focusNode!==O.node||n.focusOffset!==O.offset)&&(o=o.createRange(),o.setStart(A.node,A.offset),n.removeAllRanges(),I>g?(n.addRange(o),n.extend(O.node,O.offset)):(o.setEnd(O.node,O.offset),n.addRange(o)))}}for(o=[],n=f;n=n.parentNode;)n.nodeType===1&&o.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<o.length;f++)n=o[f],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Wr=b&&"documentMode"in document&&11>=document.documentMode,Dn=null,Xt=null,Cn=null,dr=!1;function ji(n,o,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;dr||Dn==null||Dn!==me(g)||(g=Dn,"selectionStart"in g&&Nt(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Cn&&fe(Cn,g)||(Cn=g,g=vl(Xt,"onSelect"),0<g.length&&(o=new he("onSelect","select",null,o,f),n.push({event:o,listeners:g}),o.target=Dn)))}function ui(n,o){var f={};return f[n.toLowerCase()]=o.toLowerCase(),f["Webkit"+n]="webkit"+o,f["Moz"+n]="moz"+o,f}var ls={animationend:ui("Animation","AnimationEnd"),animationiteration:ui("Animation","AnimationIteration"),animationstart:ui("Animation","AnimationStart"),transitionend:ui("Transition","TransitionEnd")},da={},gh={};b&&(gh=document.createElement("div").style,"AnimationEvent"in window||(delete ls.animationend.animation,delete ls.animationiteration.animation,delete ls.animationstart.animation),"TransitionEvent"in window||delete ls.transitionend.transition);function yl(n){if(da[n])return da[n];if(!ls[n])return n;var o=ls[n],f;for(f in o)if(o.hasOwnProperty(f)&&f in gh)return da[n]=o[f];return n}var xh=yl("animationend"),yh=yl("animationiteration"),wh=yl("animationstart"),vh=yl("transitionend"),Ch=new Map,bh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cs(n,o){Ch.set(n,o),x(o,[n])}for(var iu=0;iu<bh.length;iu++){var su=bh[iu],Px=su.toLowerCase(),Mx=su[0].toUpperCase()+su.slice(1);cs(Px,"on"+Mx)}cs(xh,"onAnimationEnd"),cs(yh,"onAnimationIteration"),cs(wh,"onAnimationStart"),cs("dblclick","onDoubleClick"),cs("focusin","onFocus"),cs("focusout","onBlur"),cs(vh,"onTransitionEnd"),y("onMouseEnter",["mouseout","mouseover"]),y("onMouseLeave",["mouseout","mouseover"]),y("onPointerEnter",["pointerout","pointerover"]),y("onPointerLeave",["pointerout","pointerover"]),x("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),x("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),x("onBeforeInput",["compositionend","keypress","textInput","paste"]),x("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ox=new Set("cancel close invalid load scroll toggle".split(" ").concat(fa));function Eh(n,o,f){var g=n.type||"unknown-event";n.currentTarget=f,Xn(g,o,void 0,n),n.currentTarget=null}function Sh(n,o){o=(o&4)!==0;for(var f=0;f<n.length;f++){var g=n[f],A=g.event;g=g.listeners;e:{var I=void 0;if(o)for(var O=g.length-1;0<=O;O--){var H=g[O],ee=H.instance,pe=H.currentTarget;if(H=H.listener,ee!==I&&A.isPropagationStopped())break e;Eh(A,H,pe),I=ee}else for(O=0;O<g.length;O++){if(H=g[O],ee=H.instance,pe=H.currentTarget,H=H.listener,ee!==I&&A.isPropagationStopped())break e;Eh(A,H,pe),I=ee}}}if($t)throw n=Ze,$t=!1,Ze=null,n}function fn(n,o){var f=o[hu];f===void 0&&(f=o[hu]=new Set);var g=n+"__bubble";f.has(g)||(Ah(o,n,2,!1),f.add(g))}function ou(n,o,f){var g=0;o&&(g|=4),Ah(f,n,g,o)}var wl="_reactListening"+Math.random().toString(36).slice(2);function ha(n){if(!n[wl]){n[wl]=!0,u.forEach(function(f){f!=="selectionchange"&&(Ox.has(f)||ou(f,!1,n),ou(f,!0,n))});var o=n.nodeType===9?n:n.ownerDocument;o===null||o[wl]||(o[wl]=!0,ou("selectionchange",!1,o))}}function Ah(n,o,f,g){switch(na(o)){case 1:var A=ul;break;case 4:A=Os;break;default:A=Oi}f=A.bind(null,o,f,n),A=void 0,!ki||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(A=!0),g?A!==void 0?n.addEventListener(o,f,{capture:!0,passive:A}):n.addEventListener(o,f,!0):A!==void 0?n.addEventListener(o,f,{passive:A}):n.addEventListener(o,f,!1)}function au(n,o,f,g,A){var I=g;if(!(o&1)&&!(o&2)&&g!==null)e:for(;;){if(g===null)return;var O=g.tag;if(O===3||O===4){var H=g.stateNode.containerInfo;if(H===A||H.nodeType===8&&H.parentNode===A)break;if(O===4)for(O=g.return;O!==null;){var ee=O.tag;if((ee===3||ee===4)&&(ee=O.stateNode.containerInfo,ee===A||ee.nodeType===8&&ee.parentNode===A))return;O=O.return}for(;H!==null;){if(O=zs(H),O===null)return;if(ee=O.tag,ee===5||ee===6){g=I=O;continue e}H=H.parentNode}}g=g.return}si(function(){var pe=I,Me=cn(f),je=[];e:{var ke=Ch.get(n);if(ke!==void 0){var Je=he,rt=n;switch(n){case"keypress":if(Vt(f)===0)break e;case"keydown":case"keyup":Je=oa;break;case"focusin":rt="focus",Je=on;break;case"focusout":rt="blur",Je=on;break;case"beforeblur":case"afterblur":Je=on;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Je=fl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Je=On;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Je=os;break;case xh:case yh:case wh:Je=Di;break;case vh:Je=tu;break;case"scroll":Je=qn;break;case"wheel":Je=nu;break;case"copy":case"cut":case"paste":Je=pt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Je=aa}var st=(o&4)!==0,Ln=!st&&n==="scroll",le=st?ke!==null?ke+"Capture":null:ke;st=[];for(var ie=pe,ue;ie!==null;){ue=ie;var He=ue.stateNode;if(ue.tag===5&&He!==null&&(ue=He,le!==null&&(He=Vn(ie,le),He!=null&&st.push(ma(ie,He,ue)))),Ln)break;ie=ie.return}0<st.length&&(ke=new Je(ke,rt,null,f,Me),je.push({event:ke,listeners:st}))}}if(!(o&7)){e:{if(ke=n==="mouseover"||n==="pointerover",Je=n==="mouseout"||n==="pointerout",ke&&f!==Zt&&(rt=f.relatedTarget||f.fromElement)&&(zs(rt)||rt[Bi]))break e;if((Je||ke)&&(ke=Me.window===Me?Me:(ke=Me.ownerDocument)?ke.defaultView||ke.parentWindow:window,Je?(rt=f.relatedTarget||f.toElement,Je=pe,rt=rt?zs(rt):null,rt!==null&&(Ln=gr(rt),rt!==Ln||rt.tag!==5&&rt.tag!==6)&&(rt=null)):(Je=null,rt=pe),Je!==rt)){if(st=fl,He="onMouseLeave",le="onMouseEnter",ie="mouse",(n==="pointerout"||n==="pointerover")&&(st=aa,He="onPointerLeave",le="onPointerEnter",ie="pointer"),Ln=Je==null?ke:Eo(Je),ue=rt==null?ke:Eo(rt),ke=new st(He,ie+"leave",Je,f,Me),ke.target=Ln,ke.relatedTarget=ue,He=null,zs(Me)===pe&&(st=new st(le,ie+"enter",rt,f,Me),st.target=ue,st.relatedTarget=Ln,He=st),Ln=He,Je&&rt)t:{for(st=Je,le=rt,ie=0,ue=st;ue;ue=Co(ue))ie++;for(ue=0,He=le;He;He=Co(He))ue++;for(;0<ie-ue;)st=Co(st),ie--;for(;0<ue-ie;)le=Co(le),ue--;for(;ie--;){if(st===le||le!==null&&st===le.alternate)break t;st=Co(st),le=Co(le)}st=null}else st=null;Je!==null&&Nh(je,ke,Je,st,!1),rt!==null&&Ln!==null&&Nh(je,Ln,rt,st,!0)}}e:{if(ke=pe?Eo(pe):window,Je=ke.nodeName&&ke.nodeName.toLowerCase(),Je==="select"||Je==="input"&&ke.type==="file")var lt=l;else if(jt(ke))if(c)lt=Q;else{lt=D;var gt=P}else(Je=ke.nodeName)&&Je.toLowerCase()==="input"&&(ke.type==="checkbox"||ke.type==="radio")&&(lt=W);if(lt&&(lt=lt(n,pe))){Us(je,lt,f,Me);break e}gt&&gt(n,ke,pe),n==="focusout"&&(gt=ke._wrapperState)&&gt.controlled&&ke.type==="number"&&Qe(ke,"number",ke.value)}switch(gt=pe?Eo(pe):window,n){case"focusin":(jt(gt)||gt.contentEditable==="true")&&(Dn=gt,Xt=pe,Cn=null);break;case"focusout":Cn=Xt=Dn=null;break;case"mousedown":dr=!0;break;case"contextmenu":case"mouseup":case"dragend":dr=!1,ji(je,f,Me);break;case"selectionchange":if(Wr)break;case"keydown":case"keyup":ji(je,f,Me)}var xt;if(as)e:{switch(n){case"compositionstart":var Et="onCompositionStart";break e;case"compositionend":Et="onCompositionEnd";break e;case"compositionupdate":Et="onCompositionUpdate";break e}Et=void 0}else ur?xl(n,f)&&(Et="onCompositionEnd"):n==="keydown"&&f.keyCode===229&&(Et="onCompositionStart");Et&&(zr&&f.locale!=="ko"&&(ur||Et!=="onCompositionStart"?Et==="onCompositionEnd"&&ur&&(xt=dl()):(ci=Me,ra="value"in ci?ci.value:ci.textContent,ur=!0)),gt=vl(pe,Et),0<gt.length&&(Et=new nn(Et,n,null,f,Me),je.push({event:Et,listeners:gt}),xt?Et.data=xt:(xt=ca(f),xt!==null&&(Et.data=xt)))),(xt=pl?ru(n,f):ua(n,f))&&(pe=vl(pe,"onBeforeInput"),0<pe.length&&(Me=new nn("onBeforeInput","beforeinput",null,f,Me),je.push({event:Me,listeners:pe}),Me.data=xt))}Sh(je,o)})}function ma(n,o,f){return{instance:n,listener:o,currentTarget:f}}function vl(n,o){for(var f=o+"Capture",g=[];n!==null;){var A=n,I=A.stateNode;A.tag===5&&I!==null&&(A=I,I=Vn(n,f),I!=null&&g.unshift(ma(n,I,A)),I=Vn(n,o),I!=null&&g.push(ma(n,I,A))),n=n.return}return g}function Co(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Nh(n,o,f,g,A){for(var I=o._reactName,O=[];f!==null&&f!==g;){var H=f,ee=H.alternate,pe=H.stateNode;if(ee!==null&&ee===g)break;H.tag===5&&pe!==null&&(H=pe,A?(ee=Vn(f,I),ee!=null&&O.unshift(ma(f,ee,H))):A||(ee=Vn(f,I),ee!=null&&O.push(ma(f,ee,H)))),f=f.return}O.length!==0&&n.push({event:o,listeners:O})}var Dx=/\r\n?/g,Lx=/\u0000|\uFFFD/g;function Th(n){return(typeof n=="string"?n:""+n).replace(Dx,`
`).replace(Lx,"")}function Cl(n,o,f){if(o=Th(o),Th(n)!==o&&f)throw Error(a(425))}function bl(){}var lu=null,cu=null;function uu(n,o){return n==="textarea"||n==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var du=typeof setTimeout=="function"?setTimeout:void 0,jx=typeof clearTimeout=="function"?clearTimeout:void 0,Ih=typeof Promise=="function"?Promise:void 0,Bx=typeof queueMicrotask=="function"?queueMicrotask:typeof Ih<"u"?function(n){return Ih.resolve(null).then(n).catch(Fx)}:du;function Fx(n){setTimeout(function(){throw n})}function fu(n,o){var f=o,g=0;do{var A=f.nextSibling;if(n.removeChild(f),A&&A.nodeType===8)if(f=A.data,f==="/$"){if(g===0){n.removeChild(A),Mn(o);return}g--}else f!=="$"&&f!=="$?"&&f!=="$!"||g++;f=A}while(f);Mn(o)}function us(n){for(;n!=null;n=n.nextSibling){var o=n.nodeType;if(o===1||o===3)break;if(o===8){if(o=n.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return n}function _h(n){n=n.previousSibling;for(var o=0;n;){if(n.nodeType===8){var f=n.data;if(f==="$"||f==="$!"||f==="$?"){if(o===0)return n;o--}else f==="/$"&&o++}n=n.previousSibling}return null}var bo=Math.random().toString(36).slice(2),bi="__reactFiber$"+bo,pa="__reactProps$"+bo,Bi="__reactContainer$"+bo,hu="__reactEvents$"+bo,Vx="__reactListeners$"+bo,Ux="__reactHandles$"+bo;function zs(n){var o=n[bi];if(o)return o;for(var f=n.parentNode;f;){if(o=f[Bi]||f[bi]){if(f=o.alternate,o.child!==null||f!==null&&f.child!==null)for(n=_h(n);n!==null;){if(f=n[bi])return f;n=_h(n)}return o}n=f,f=n.parentNode}return null}function ga(n){return n=n[bi]||n[Bi],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Eo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(a(33))}function El(n){return n[pa]||null}var mu=[],So=-1;function ds(n){return{current:n}}function hn(n){0>So||(n.current=mu[So],mu[So]=null,So--)}function an(n,o){So++,mu[So]=n.current,n.current=o}var fs={},wr=ds(fs),Mr=ds(!1),Ws=fs;function Ao(n,o){var f=n.type.contextTypes;if(!f)return fs;var g=n.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===o)return g.__reactInternalMemoizedMaskedChildContext;var A={},I;for(I in f)A[I]=o[I];return g&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=o,n.__reactInternalMemoizedMaskedChildContext=A),A}function Or(n){return n=n.childContextTypes,n!=null}function Sl(){hn(Mr),hn(wr)}function Rh(n,o,f){if(wr.current!==fs)throw Error(a(168));an(wr,o),an(Mr,f)}function kh(n,o,f){var g=n.stateNode;if(o=o.childContextTypes,typeof g.getChildContext!="function")return f;g=g.getChildContext();for(var A in g)if(!(A in o))throw Error(a(108,Re(n)||"Unknown",A));return Ce({},f,g)}function Al(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||fs,Ws=wr.current,an(wr,n),an(Mr,Mr.current),!0}function Ph(n,o,f){var g=n.stateNode;if(!g)throw Error(a(169));f?(n=kh(n,o,Ws),g.__reactInternalMemoizedMergedChildContext=n,hn(Mr),hn(wr),an(wr,n)):hn(Mr),an(Mr,f)}var Fi=null,Nl=!1,pu=!1;function Mh(n){Fi===null?Fi=[n]:Fi.push(n)}function zx(n){Nl=!0,Mh(n)}function hs(){if(!pu&&Fi!==null){pu=!0;var n=0,o=St;try{var f=Fi;for(St=1;n<f.length;n++){var g=f[n];do g=g(!0);while(g!==null)}Fi=null,Nl=!1}catch(A){throw Fi!==null&&(Fi=Fi.slice(n+1)),Yn(Te,hs),A}finally{St=o,pu=!1}}return null}var No=[],To=0,Tl=null,Il=0,Kr=[],qr=0,Hs=null,Vi=1,Ui="";function Gs(n,o){No[To++]=Il,No[To++]=Tl,Tl=n,Il=o}function Oh(n,o,f){Kr[qr++]=Vi,Kr[qr++]=Ui,Kr[qr++]=Hs,Hs=n;var g=Vi;n=Ui;var A=32-Zn(g)-1;g&=~(1<<A),f+=1;var I=32-Zn(o)+A;if(30<I){var O=A-A%5;I=(g&(1<<O)-1).toString(32),g>>=O,A-=O,Vi=1<<32-Zn(o)+A|f<<A|g,Ui=I+n}else Vi=1<<I|f<<A|g,Ui=n}function gu(n){n.return!==null&&(Gs(n,1),Oh(n,1,0))}function xu(n){for(;n===Tl;)Tl=No[--To],No[To]=null,Il=No[--To],No[To]=null;for(;n===Hs;)Hs=Kr[--qr],Kr[qr]=null,Ui=Kr[--qr],Kr[qr]=null,Vi=Kr[--qr],Kr[qr]=null}var Hr=null,Gr=null,gn=!1,di=null;function Dh(n,o){var f=ti(5,null,null,0);f.elementType="DELETED",f.stateNode=o,f.return=n,o=n.deletions,o===null?(n.deletions=[f],n.flags|=16):o.push(f)}function Lh(n,o){switch(n.tag){case 5:var f=n.type;return o=o.nodeType!==1||f.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(n.stateNode=o,Hr=n,Gr=us(o.firstChild),!0):!1;case 6:return o=n.pendingProps===""||o.nodeType!==3?null:o,o!==null?(n.stateNode=o,Hr=n,Gr=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(f=Hs!==null?{id:Vi,overflow:Ui}:null,n.memoizedState={dehydrated:o,treeContext:f,retryLane:1073741824},f=ti(18,null,null,0),f.stateNode=o,f.return=n,n.child=f,Hr=n,Gr=null,!0):!1;default:return!1}}function yu(n){return(n.mode&1)!==0&&(n.flags&128)===0}function wu(n){if(gn){var o=Gr;if(o){var f=o;if(!Lh(n,o)){if(yu(n))throw Error(a(418));o=us(f.nextSibling);var g=Hr;o&&Lh(n,o)?Dh(g,f):(n.flags=n.flags&-4097|2,gn=!1,Hr=n)}}else{if(yu(n))throw Error(a(418));n.flags=n.flags&-4097|2,gn=!1,Hr=n}}}function jh(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Hr=n}function _l(n){if(n!==Hr)return!1;if(!gn)return jh(n),gn=!0,!1;var o;if((o=n.tag!==3)&&!(o=n.tag!==5)&&(o=n.type,o=o!=="head"&&o!=="body"&&!uu(n.type,n.memoizedProps)),o&&(o=Gr)){if(yu(n))throw Bh(),Error(a(418));for(;o;)Dh(n,o),o=us(o.nextSibling)}if(jh(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));e:{for(n=n.nextSibling,o=0;n;){if(n.nodeType===8){var f=n.data;if(f==="/$"){if(o===0){Gr=us(n.nextSibling);break e}o--}else f!=="$"&&f!=="$!"&&f!=="$?"||o++}n=n.nextSibling}Gr=null}}else Gr=Hr?us(n.stateNode.nextSibling):null;return!0}function Bh(){for(var n=Gr;n;)n=us(n.nextSibling)}function Io(){Gr=Hr=null,gn=!1}function vu(n){di===null?di=[n]:di.push(n)}var Wx=Y.ReactCurrentBatchConfig;function xa(n,o,f){if(n=f.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(a(309));var g=f.stateNode}if(!g)throw Error(a(147,n));var A=g,I=""+n;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===I?o.ref:(o=function(O){var H=A.refs;O===null?delete H[I]:H[I]=O},o._stringRef=I,o)}if(typeof n!="string")throw Error(a(284));if(!f._owner)throw Error(a(290,n))}return n}function Rl(n,o){throw n=Object.prototype.toString.call(o),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":n))}function Fh(n){var o=n._init;return o(n._payload)}function Vh(n){function o(le,ie){if(n){var ue=le.deletions;ue===null?(le.deletions=[ie],le.flags|=16):ue.push(ie)}}function f(le,ie){if(!n)return null;for(;ie!==null;)o(le,ie),ie=ie.sibling;return null}function g(le,ie){for(le=new Map;ie!==null;)ie.key!==null?le.set(ie.key,ie):le.set(ie.index,ie),ie=ie.sibling;return le}function A(le,ie){return le=Cs(le,ie),le.index=0,le.sibling=null,le}function I(le,ie,ue){return le.index=ue,n?(ue=le.alternate,ue!==null?(ue=ue.index,ue<ie?(le.flags|=2,ie):ue):(le.flags|=2,ie)):(le.flags|=1048576,ie)}function O(le){return n&&le.alternate===null&&(le.flags|=2),le}function H(le,ie,ue,He){return ie===null||ie.tag!==6?(ie=dd(ue,le.mode,He),ie.return=le,ie):(ie=A(ie,ue),ie.return=le,ie)}function ee(le,ie,ue,He){var lt=ue.type;return lt===G?Me(le,ie,ue.props.children,He,ue.key):ie!==null&&(ie.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===Le&&Fh(lt)===ie.type)?(He=A(ie,ue.props),He.ref=xa(le,ie,ue),He.return=le,He):(He=ec(ue.type,ue.key,ue.props,null,le.mode,He),He.ref=xa(le,ie,ue),He.return=le,He)}function pe(le,ie,ue,He){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==ue.containerInfo||ie.stateNode.implementation!==ue.implementation?(ie=fd(ue,le.mode,He),ie.return=le,ie):(ie=A(ie,ue.children||[]),ie.return=le,ie)}function Me(le,ie,ue,He,lt){return ie===null||ie.tag!==7?(ie=Js(ue,le.mode,He,lt),ie.return=le,ie):(ie=A(ie,ue),ie.return=le,ie)}function je(le,ie,ue){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return ie=dd(""+ie,le.mode,ue),ie.return=le,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case $:return ue=ec(ie.type,ie.key,ie.props,null,le.mode,ue),ue.ref=xa(le,null,ie),ue.return=le,ue;case re:return ie=fd(ie,le.mode,ue),ie.return=le,ie;case Le:var He=ie._init;return je(le,He(ie._payload),ue)}if(Bt(ie)||De(ie))return ie=Js(ie,le.mode,ue,null),ie.return=le,ie;Rl(le,ie)}return null}function ke(le,ie,ue,He){var lt=ie!==null?ie.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number")return lt!==null?null:H(le,ie,""+ue,He);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case $:return ue.key===lt?ee(le,ie,ue,He):null;case re:return ue.key===lt?pe(le,ie,ue,He):null;case Le:return lt=ue._init,ke(le,ie,lt(ue._payload),He)}if(Bt(ue)||De(ue))return lt!==null?null:Me(le,ie,ue,He,null);Rl(le,ue)}return null}function Je(le,ie,ue,He,lt){if(typeof He=="string"&&He!==""||typeof He=="number")return le=le.get(ue)||null,H(ie,le,""+He,lt);if(typeof He=="object"&&He!==null){switch(He.$$typeof){case $:return le=le.get(He.key===null?ue:He.key)||null,ee(ie,le,He,lt);case re:return le=le.get(He.key===null?ue:He.key)||null,pe(ie,le,He,lt);case Le:var gt=He._init;return Je(le,ie,ue,gt(He._payload),lt)}if(Bt(He)||De(He))return le=le.get(ue)||null,Me(ie,le,He,lt,null);Rl(ie,He)}return null}function rt(le,ie,ue,He){for(var lt=null,gt=null,xt=ie,Et=ie=0,ar=null;xt!==null&&Et<ue.length;Et++){xt.index>Et?(ar=xt,xt=null):ar=xt.sibling;var Wt=ke(le,xt,ue[Et],He);if(Wt===null){xt===null&&(xt=ar);break}n&&xt&&Wt.alternate===null&&o(le,xt),ie=I(Wt,ie,Et),gt===null?lt=Wt:gt.sibling=Wt,gt=Wt,xt=ar}if(Et===ue.length)return f(le,xt),gn&&Gs(le,Et),lt;if(xt===null){for(;Et<ue.length;Et++)xt=je(le,ue[Et],He),xt!==null&&(ie=I(xt,ie,Et),gt===null?lt=xt:gt.sibling=xt,gt=xt);return gn&&Gs(le,Et),lt}for(xt=g(le,xt);Et<ue.length;Et++)ar=Je(xt,le,Et,ue[Et],He),ar!==null&&(n&&ar.alternate!==null&&xt.delete(ar.key===null?Et:ar.key),ie=I(ar,ie,Et),gt===null?lt=ar:gt.sibling=ar,gt=ar);return n&&xt.forEach(function(bs){return o(le,bs)}),gn&&Gs(le,Et),lt}function st(le,ie,ue,He){var lt=De(ue);if(typeof lt!="function")throw Error(a(150));if(ue=lt.call(ue),ue==null)throw Error(a(151));for(var gt=lt=null,xt=ie,Et=ie=0,ar=null,Wt=ue.next();xt!==null&&!Wt.done;Et++,Wt=ue.next()){xt.index>Et?(ar=xt,xt=null):ar=xt.sibling;var bs=ke(le,xt,Wt.value,He);if(bs===null){xt===null&&(xt=ar);break}n&&xt&&bs.alternate===null&&o(le,xt),ie=I(bs,ie,Et),gt===null?lt=bs:gt.sibling=bs,gt=bs,xt=ar}if(Wt.done)return f(le,xt),gn&&Gs(le,Et),lt;if(xt===null){for(;!Wt.done;Et++,Wt=ue.next())Wt=je(le,Wt.value,He),Wt!==null&&(ie=I(Wt,ie,Et),gt===null?lt=Wt:gt.sibling=Wt,gt=Wt);return gn&&Gs(le,Et),lt}for(xt=g(le,xt);!Wt.done;Et++,Wt=ue.next())Wt=Je(xt,le,Et,Wt.value,He),Wt!==null&&(n&&Wt.alternate!==null&&xt.delete(Wt.key===null?Et:Wt.key),ie=I(Wt,ie,Et),gt===null?lt=Wt:gt.sibling=Wt,gt=Wt);return n&&xt.forEach(function(b2){return o(le,b2)}),gn&&Gs(le,Et),lt}function Ln(le,ie,ue,He){if(typeof ue=="object"&&ue!==null&&ue.type===G&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case $:e:{for(var lt=ue.key,gt=ie;gt!==null;){if(gt.key===lt){if(lt=ue.type,lt===G){if(gt.tag===7){f(le,gt.sibling),ie=A(gt,ue.props.children),ie.return=le,le=ie;break e}}else if(gt.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===Le&&Fh(lt)===gt.type){f(le,gt.sibling),ie=A(gt,ue.props),ie.ref=xa(le,gt,ue),ie.return=le,le=ie;break e}f(le,gt);break}else o(le,gt);gt=gt.sibling}ue.type===G?(ie=Js(ue.props.children,le.mode,He,ue.key),ie.return=le,le=ie):(He=ec(ue.type,ue.key,ue.props,null,le.mode,He),He.ref=xa(le,ie,ue),He.return=le,le=He)}return O(le);case re:e:{for(gt=ue.key;ie!==null;){if(ie.key===gt)if(ie.tag===4&&ie.stateNode.containerInfo===ue.containerInfo&&ie.stateNode.implementation===ue.implementation){f(le,ie.sibling),ie=A(ie,ue.children||[]),ie.return=le,le=ie;break e}else{f(le,ie);break}else o(le,ie);ie=ie.sibling}ie=fd(ue,le.mode,He),ie.return=le,le=ie}return O(le);case Le:return gt=ue._init,Ln(le,ie,gt(ue._payload),He)}if(Bt(ue))return rt(le,ie,ue,He);if(De(ue))return st(le,ie,ue,He);Rl(le,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"?(ue=""+ue,ie!==null&&ie.tag===6?(f(le,ie.sibling),ie=A(ie,ue),ie.return=le,le=ie):(f(le,ie),ie=dd(ue,le.mode,He),ie.return=le,le=ie),O(le)):f(le,ie)}return Ln}var _o=Vh(!0),Uh=Vh(!1),kl=ds(null),Pl=null,Ro=null,Cu=null;function bu(){Cu=Ro=Pl=null}function Eu(n){var o=kl.current;hn(kl),n._currentValue=o}function Su(n,o,f){for(;n!==null;){var g=n.alternate;if((n.childLanes&o)!==o?(n.childLanes|=o,g!==null&&(g.childLanes|=o)):g!==null&&(g.childLanes&o)!==o&&(g.childLanes|=o),n===f)break;n=n.return}}function ko(n,o){Pl=n,Cu=Ro=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&o&&(Dr=!0),n.firstContext=null)}function Qr(n){var o=n._currentValue;if(Cu!==n)if(n={context:n,memoizedValue:o,next:null},Ro===null){if(Pl===null)throw Error(a(308));Ro=n,Pl.dependencies={lanes:0,firstContext:n}}else Ro=Ro.next=n;return o}var Xs=null;function Au(n){Xs===null?Xs=[n]:Xs.push(n)}function zh(n,o,f,g){var A=o.interleaved;return A===null?(f.next=f,Au(o)):(f.next=A.next,A.next=f),o.interleaved=f,zi(n,g)}function zi(n,o){n.lanes|=o;var f=n.alternate;for(f!==null&&(f.lanes|=o),f=n,n=n.return;n!==null;)n.childLanes|=o,f=n.alternate,f!==null&&(f.childLanes|=o),f=n,n=n.return;return f.tag===3?f.stateNode:null}var ms=!1;function Nu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wh(n,o){n=n.updateQueue,o.updateQueue===n&&(o.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Wi(n,o){return{eventTime:n,lane:o,tag:0,payload:null,callback:null,next:null}}function ps(n,o,f){var g=n.updateQueue;if(g===null)return null;if(g=g.shared,Ut&2){var A=g.pending;return A===null?o.next=o:(o.next=A.next,A.next=o),g.pending=o,zi(n,f)}return A=g.interleaved,A===null?(o.next=o,Au(g)):(o.next=A.next,A.next=o),g.interleaved=o,zi(n,f)}function Ml(n,o,f){if(o=o.updateQueue,o!==null&&(o=o.shared,(f&4194240)!==0)){var g=o.lanes;g&=n.pendingLanes,f|=g,o.lanes=f,rn(n,f)}}function Hh(n,o){var f=n.updateQueue,g=n.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var A=null,I=null;if(f=f.firstBaseUpdate,f!==null){do{var O={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};I===null?A=I=O:I=I.next=O,f=f.next}while(f!==null);I===null?A=I=o:I=I.next=o}else A=I=o;f={baseState:g.baseState,firstBaseUpdate:A,lastBaseUpdate:I,shared:g.shared,effects:g.effects},n.updateQueue=f;return}n=f.lastBaseUpdate,n===null?f.firstBaseUpdate=o:n.next=o,f.lastBaseUpdate=o}function Ol(n,o,f,g){var A=n.updateQueue;ms=!1;var I=A.firstBaseUpdate,O=A.lastBaseUpdate,H=A.shared.pending;if(H!==null){A.shared.pending=null;var ee=H,pe=ee.next;ee.next=null,O===null?I=pe:O.next=pe,O=ee;var Me=n.alternate;Me!==null&&(Me=Me.updateQueue,H=Me.lastBaseUpdate,H!==O&&(H===null?Me.firstBaseUpdate=pe:H.next=pe,Me.lastBaseUpdate=ee))}if(I!==null){var je=A.baseState;O=0,Me=pe=ee=null,H=I;do{var ke=H.lane,Je=H.eventTime;if((g&ke)===ke){Me!==null&&(Me=Me.next={eventTime:Je,lane:0,tag:H.tag,payload:H.payload,callback:H.callback,next:null});e:{var rt=n,st=H;switch(ke=o,Je=f,st.tag){case 1:if(rt=st.payload,typeof rt=="function"){je=rt.call(Je,je,ke);break e}je=rt;break e;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=st.payload,ke=typeof rt=="function"?rt.call(Je,je,ke):rt,ke==null)break e;je=Ce({},je,ke);break e;case 2:ms=!0}}H.callback!==null&&H.lane!==0&&(n.flags|=64,ke=A.effects,ke===null?A.effects=[H]:ke.push(H))}else Je={eventTime:Je,lane:ke,tag:H.tag,payload:H.payload,callback:H.callback,next:null},Me===null?(pe=Me=Je,ee=je):Me=Me.next=Je,O|=ke;if(H=H.next,H===null){if(H=A.shared.pending,H===null)break;ke=H,H=ke.next,ke.next=null,A.lastBaseUpdate=ke,A.shared.pending=null}}while(!0);if(Me===null&&(ee=je),A.baseState=ee,A.firstBaseUpdate=pe,A.lastBaseUpdate=Me,o=A.shared.interleaved,o!==null){A=o;do O|=A.lane,A=A.next;while(A!==o)}else I===null&&(A.shared.lanes=0);Zs|=O,n.lanes=O,n.memoizedState=je}}function Gh(n,o,f){if(n=o.effects,o.effects=null,n!==null)for(o=0;o<n.length;o++){var g=n[o],A=g.callback;if(A!==null){if(g.callback=null,g=f,typeof A!="function")throw Error(a(191,A));A.call(g)}}}var ya={},Ei=ds(ya),wa=ds(ya),va=ds(ya);function Ys(n){if(n===ya)throw Error(a(174));return n}function Tu(n,o){switch(an(va,o),an(wa,n),an(Ei,ya),n=o.nodeType,n){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:ht(null,"");break;default:n=n===8?o.parentNode:o,o=n.namespaceURI||null,n=n.tagName,o=ht(o,n)}hn(Ei),an(Ei,o)}function Po(){hn(Ei),hn(wa),hn(va)}function Xh(n){Ys(va.current);var o=Ys(Ei.current),f=ht(o,n.type);o!==f&&(an(wa,n),an(Ei,f))}function Iu(n){wa.current===n&&(hn(Ei),hn(wa))}var bn=ds(0);function Dl(n){for(var o=n;o!==null;){if(o.tag===13){var f=o.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var _u=[];function Ru(){for(var n=0;n<_u.length;n++)_u[n]._workInProgressVersionPrimary=null;_u.length=0}var Ll=Y.ReactCurrentDispatcher,ku=Y.ReactCurrentBatchConfig,$s=0,En=null,Qn=null,sr=null,jl=!1,Ca=!1,ba=0,Hx=0;function vr(){throw Error(a(321))}function Pu(n,o){if(o===null)return!1;for(var f=0;f<o.length&&f<n.length;f++)if(!se(n[f],o[f]))return!1;return!0}function Mu(n,o,f,g,A,I){if($s=I,En=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Ll.current=n===null||n.memoizedState===null?$x:Zx,n=f(g,A),Ca){I=0;do{if(Ca=!1,ba=0,25<=I)throw Error(a(301));I+=1,sr=Qn=null,o.updateQueue=null,Ll.current=Kx,n=f(g,A)}while(Ca)}if(Ll.current=Vl,o=Qn!==null&&Qn.next!==null,$s=0,sr=Qn=En=null,jl=!1,o)throw Error(a(300));return n}function Ou(){var n=ba!==0;return ba=0,n}function Si(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sr===null?En.memoizedState=sr=n:sr=sr.next=n,sr}function Jr(){if(Qn===null){var n=En.alternate;n=n!==null?n.memoizedState:null}else n=Qn.next;var o=sr===null?En.memoizedState:sr.next;if(o!==null)sr=o,Qn=n;else{if(n===null)throw Error(a(310));Qn=n,n={memoizedState:Qn.memoizedState,baseState:Qn.baseState,baseQueue:Qn.baseQueue,queue:Qn.queue,next:null},sr===null?En.memoizedState=sr=n:sr=sr.next=n}return sr}function Ea(n,o){return typeof o=="function"?o(n):o}function Du(n){var o=Jr(),f=o.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=n;var g=Qn,A=g.baseQueue,I=f.pending;if(I!==null){if(A!==null){var O=A.next;A.next=I.next,I.next=O}g.baseQueue=A=I,f.pending=null}if(A!==null){I=A.next,g=g.baseState;var H=O=null,ee=null,pe=I;do{var Me=pe.lane;if(($s&Me)===Me)ee!==null&&(ee=ee.next={lane:0,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),g=pe.hasEagerState?pe.eagerState:n(g,pe.action);else{var je={lane:Me,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null};ee===null?(H=ee=je,O=g):ee=ee.next=je,En.lanes|=Me,Zs|=Me}pe=pe.next}while(pe!==null&&pe!==I);ee===null?O=g:ee.next=H,se(g,o.memoizedState)||(Dr=!0),o.memoizedState=g,o.baseState=O,o.baseQueue=ee,f.lastRenderedState=g}if(n=f.interleaved,n!==null){A=n;do I=A.lane,En.lanes|=I,Zs|=I,A=A.next;while(A!==n)}else A===null&&(f.lanes=0);return[o.memoizedState,f.dispatch]}function Lu(n){var o=Jr(),f=o.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=n;var g=f.dispatch,A=f.pending,I=o.memoizedState;if(A!==null){f.pending=null;var O=A=A.next;do I=n(I,O.action),O=O.next;while(O!==A);se(I,o.memoizedState)||(Dr=!0),o.memoizedState=I,o.baseQueue===null&&(o.baseState=I),f.lastRenderedState=I}return[I,g]}function Yh(){}function $h(n,o){var f=En,g=Jr(),A=o(),I=!se(g.memoizedState,A);if(I&&(g.memoizedState=A,Dr=!0),g=g.queue,ju(qh.bind(null,f,g,n),[n]),g.getSnapshot!==o||I||sr!==null&&sr.memoizedState.tag&1){if(f.flags|=2048,Sa(9,Kh.bind(null,f,g,A,o),void 0,null),or===null)throw Error(a(349));$s&30||Zh(f,o,A)}return A}function Zh(n,o,f){n.flags|=16384,n={getSnapshot:o,value:f},o=En.updateQueue,o===null?(o={lastEffect:null,stores:null},En.updateQueue=o,o.stores=[n]):(f=o.stores,f===null?o.stores=[n]:f.push(n))}function Kh(n,o,f,g){o.value=f,o.getSnapshot=g,Qh(o)&&Jh(n)}function qh(n,o,f){return f(function(){Qh(o)&&Jh(n)})}function Qh(n){var o=n.getSnapshot;n=n.value;try{var f=o();return!se(n,f)}catch{return!0}}function Jh(n){var o=zi(n,1);o!==null&&pi(o,n,1,-1)}function e0(n){var o=Si();return typeof n=="function"&&(n=n()),o.memoizedState=o.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:n},o.queue=n,n=n.dispatch=Yx.bind(null,En,n),[o.memoizedState,n]}function Sa(n,o,f,g){return n={tag:n,create:o,destroy:f,deps:g,next:null},o=En.updateQueue,o===null?(o={lastEffect:null,stores:null},En.updateQueue=o,o.lastEffect=n.next=n):(f=o.lastEffect,f===null?o.lastEffect=n.next=n:(g=f.next,f.next=n,n.next=g,o.lastEffect=n)),n}function t0(){return Jr().memoizedState}function Bl(n,o,f,g){var A=Si();En.flags|=n,A.memoizedState=Sa(1|o,f,void 0,g===void 0?null:g)}function Fl(n,o,f,g){var A=Jr();g=g===void 0?null:g;var I=void 0;if(Qn!==null){var O=Qn.memoizedState;if(I=O.destroy,g!==null&&Pu(g,O.deps)){A.memoizedState=Sa(o,f,I,g);return}}En.flags|=n,A.memoizedState=Sa(1|o,f,I,g)}function n0(n,o){return Bl(8390656,8,n,o)}function ju(n,o){return Fl(2048,8,n,o)}function r0(n,o){return Fl(4,2,n,o)}function i0(n,o){return Fl(4,4,n,o)}function s0(n,o){if(typeof o=="function")return n=n(),o(n),function(){o(null)};if(o!=null)return n=n(),o.current=n,function(){o.current=null}}function o0(n,o,f){return f=f!=null?f.concat([n]):null,Fl(4,4,s0.bind(null,o,n),f)}function Bu(){}function a0(n,o){var f=Jr();o=o===void 0?null:o;var g=f.memoizedState;return g!==null&&o!==null&&Pu(o,g[1])?g[0]:(f.memoizedState=[n,o],n)}function l0(n,o){var f=Jr();o=o===void 0?null:o;var g=f.memoizedState;return g!==null&&o!==null&&Pu(o,g[1])?g[0]:(n=n(),f.memoizedState=[n,o],n)}function c0(n,o,f){return $s&21?(se(f,o)||(f=Pn(),En.lanes|=f,Zs|=f,n.baseState=!0),o):(n.baseState&&(n.baseState=!1,Dr=!0),n.memoizedState=f)}function Gx(n,o){var f=St;St=f!==0&&4>f?f:4,n(!0);var g=ku.transition;ku.transition={};try{n(!1),o()}finally{St=f,ku.transition=g}}function u0(){return Jr().memoizedState}function Xx(n,o,f){var g=ws(n);if(f={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null},d0(n))f0(o,f);else if(f=zh(n,o,f,g),f!==null){var A=_r();pi(f,n,g,A),h0(f,o,g)}}function Yx(n,o,f){var g=ws(n),A={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null};if(d0(n))f0(o,A);else{var I=n.alternate;if(n.lanes===0&&(I===null||I.lanes===0)&&(I=o.lastRenderedReducer,I!==null))try{var O=o.lastRenderedState,H=I(O,f);if(A.hasEagerState=!0,A.eagerState=H,se(H,O)){var ee=o.interleaved;ee===null?(A.next=A,Au(o)):(A.next=ee.next,ee.next=A),o.interleaved=A;return}}catch{}finally{}f=zh(n,o,A,g),f!==null&&(A=_r(),pi(f,n,g,A),h0(f,o,g))}}function d0(n){var o=n.alternate;return n===En||o!==null&&o===En}function f0(n,o){Ca=jl=!0;var f=n.pending;f===null?o.next=o:(o.next=f.next,f.next=o),n.pending=o}function h0(n,o,f){if(f&4194240){var g=o.lanes;g&=n.pendingLanes,f|=g,o.lanes=f,rn(n,f)}}var Vl={readContext:Qr,useCallback:vr,useContext:vr,useEffect:vr,useImperativeHandle:vr,useInsertionEffect:vr,useLayoutEffect:vr,useMemo:vr,useReducer:vr,useRef:vr,useState:vr,useDebugValue:vr,useDeferredValue:vr,useTransition:vr,useMutableSource:vr,useSyncExternalStore:vr,useId:vr,unstable_isNewReconciler:!1},$x={readContext:Qr,useCallback:function(n,o){return Si().memoizedState=[n,o===void 0?null:o],n},useContext:Qr,useEffect:n0,useImperativeHandle:function(n,o,f){return f=f!=null?f.concat([n]):null,Bl(4194308,4,s0.bind(null,o,n),f)},useLayoutEffect:function(n,o){return Bl(4194308,4,n,o)},useInsertionEffect:function(n,o){return Bl(4,2,n,o)},useMemo:function(n,o){var f=Si();return o=o===void 0?null:o,n=n(),f.memoizedState=[n,o],n},useReducer:function(n,o,f){var g=Si();return o=f!==void 0?f(o):o,g.memoizedState=g.baseState=o,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:o},g.queue=n,n=n.dispatch=Xx.bind(null,En,n),[g.memoizedState,n]},useRef:function(n){var o=Si();return n={current:n},o.memoizedState=n},useState:e0,useDebugValue:Bu,useDeferredValue:function(n){return Si().memoizedState=n},useTransition:function(){var n=e0(!1),o=n[0];return n=Gx.bind(null,n[1]),Si().memoizedState=n,[o,n]},useMutableSource:function(){},useSyncExternalStore:function(n,o,f){var g=En,A=Si();if(gn){if(f===void 0)throw Error(a(407));f=f()}else{if(f=o(),or===null)throw Error(a(349));$s&30||Zh(g,o,f)}A.memoizedState=f;var I={value:f,getSnapshot:o};return A.queue=I,n0(qh.bind(null,g,I,n),[n]),g.flags|=2048,Sa(9,Kh.bind(null,g,I,f,o),void 0,null),f},useId:function(){var n=Si(),o=or.identifierPrefix;if(gn){var f=Ui,g=Vi;f=(g&~(1<<32-Zn(g)-1)).toString(32)+f,o=":"+o+"R"+f,f=ba++,0<f&&(o+="H"+f.toString(32)),o+=":"}else f=Hx++,o=":"+o+"r"+f.toString(32)+":";return n.memoizedState=o},unstable_isNewReconciler:!1},Zx={readContext:Qr,useCallback:a0,useContext:Qr,useEffect:ju,useImperativeHandle:o0,useInsertionEffect:r0,useLayoutEffect:i0,useMemo:l0,useReducer:Du,useRef:t0,useState:function(){return Du(Ea)},useDebugValue:Bu,useDeferredValue:function(n){var o=Jr();return c0(o,Qn.memoizedState,n)},useTransition:function(){var n=Du(Ea)[0],o=Jr().memoizedState;return[n,o]},useMutableSource:Yh,useSyncExternalStore:$h,useId:u0,unstable_isNewReconciler:!1},Kx={readContext:Qr,useCallback:a0,useContext:Qr,useEffect:ju,useImperativeHandle:o0,useInsertionEffect:r0,useLayoutEffect:i0,useMemo:l0,useReducer:Lu,useRef:t0,useState:function(){return Lu(Ea)},useDebugValue:Bu,useDeferredValue:function(n){var o=Jr();return Qn===null?o.memoizedState=n:c0(o,Qn.memoizedState,n)},useTransition:function(){var n=Lu(Ea)[0],o=Jr().memoizedState;return[n,o]},useMutableSource:Yh,useSyncExternalStore:$h,useId:u0,unstable_isNewReconciler:!1};function fi(n,o){if(n&&n.defaultProps){o=Ce({},o),n=n.defaultProps;for(var f in n)o[f]===void 0&&(o[f]=n[f]);return o}return o}function Fu(n,o,f,g){o=n.memoizedState,f=f(g,o),f=f==null?o:Ce({},o,f),n.memoizedState=f,n.lanes===0&&(n.updateQueue.baseState=f)}var Ul={isMounted:function(n){return(n=n._reactInternals)?gr(n)===n:!1},enqueueSetState:function(n,o,f){n=n._reactInternals;var g=_r(),A=ws(n),I=Wi(g,A);I.payload=o,f!=null&&(I.callback=f),o=ps(n,I,A),o!==null&&(pi(o,n,A,g),Ml(o,n,A))},enqueueReplaceState:function(n,o,f){n=n._reactInternals;var g=_r(),A=ws(n),I=Wi(g,A);I.tag=1,I.payload=o,f!=null&&(I.callback=f),o=ps(n,I,A),o!==null&&(pi(o,n,A,g),Ml(o,n,A))},enqueueForceUpdate:function(n,o){n=n._reactInternals;var f=_r(),g=ws(n),A=Wi(f,g);A.tag=2,o!=null&&(A.callback=o),o=ps(n,A,g),o!==null&&(pi(o,n,g,f),Ml(o,n,g))}};function m0(n,o,f,g,A,I,O){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(g,I,O):o.prototype&&o.prototype.isPureReactComponent?!fe(f,g)||!fe(A,I):!0}function p0(n,o,f){var g=!1,A=fs,I=o.contextType;return typeof I=="object"&&I!==null?I=Qr(I):(A=Or(o)?Ws:wr.current,g=o.contextTypes,I=(g=g!=null)?Ao(n,A):fs),o=new o(f,I),n.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Ul,n.stateNode=o,o._reactInternals=n,g&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=A,n.__reactInternalMemoizedMaskedChildContext=I),o}function g0(n,o,f,g){n=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(f,g),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(f,g),o.state!==n&&Ul.enqueueReplaceState(o,o.state,null)}function Vu(n,o,f,g){var A=n.stateNode;A.props=f,A.state=n.memoizedState,A.refs={},Nu(n);var I=o.contextType;typeof I=="object"&&I!==null?A.context=Qr(I):(I=Or(o)?Ws:wr.current,A.context=Ao(n,I)),A.state=n.memoizedState,I=o.getDerivedStateFromProps,typeof I=="function"&&(Fu(n,o,I,f),A.state=n.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(o=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),o!==A.state&&Ul.enqueueReplaceState(A,A.state,null),Ol(n,f,A,g),A.state=n.memoizedState),typeof A.componentDidMount=="function"&&(n.flags|=4194308)}function Mo(n,o){try{var f="",g=o;do f+=de(g),g=g.return;while(g);var A=f}catch(I){A=`
Error generating stack: `+I.message+`
`+I.stack}return{value:n,source:o,stack:A,digest:null}}function Uu(n,o,f){return{value:n,source:null,stack:f??null,digest:o??null}}function zu(n,o){try{console.error(o.value)}catch(f){setTimeout(function(){throw f})}}var qx=typeof WeakMap=="function"?WeakMap:Map;function x0(n,o,f){f=Wi(-1,f),f.tag=3,f.payload={element:null};var g=o.value;return f.callback=function(){$l||($l=!0,rd=g),zu(n,o)},f}function y0(n,o,f){f=Wi(-1,f),f.tag=3;var g=n.type.getDerivedStateFromError;if(typeof g=="function"){var A=o.value;f.payload=function(){return g(A)},f.callback=function(){zu(n,o)}}var I=n.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(f.callback=function(){zu(n,o),typeof g!="function"&&(xs===null?xs=new Set([this]):xs.add(this));var O=o.stack;this.componentDidCatch(o.value,{componentStack:O!==null?O:""})}),f}function w0(n,o,f){var g=n.pingCache;if(g===null){g=n.pingCache=new qx;var A=new Set;g.set(o,A)}else A=g.get(o),A===void 0&&(A=new Set,g.set(o,A));A.has(f)||(A.add(f),n=d2.bind(null,n,o,f),o.then(n,n))}function v0(n){do{var o;if((o=n.tag===13)&&(o=n.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return n;n=n.return}while(n!==null);return null}function C0(n,o,f,g,A){return n.mode&1?(n.flags|=65536,n.lanes=A,n):(n===o?n.flags|=65536:(n.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(o=Wi(-1,1),o.tag=2,ps(f,o,1))),f.lanes|=1),n)}var Qx=Y.ReactCurrentOwner,Dr=!1;function Ir(n,o,f,g){o.child=n===null?Uh(o,null,f,g):_o(o,n.child,f,g)}function b0(n,o,f,g,A){f=f.render;var I=o.ref;return ko(o,A),g=Mu(n,o,f,g,I,A),f=Ou(),n!==null&&!Dr?(o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~A,Hi(n,o,A)):(gn&&f&&gu(o),o.flags|=1,Ir(n,o,g,A),o.child)}function E0(n,o,f,g,A){if(n===null){var I=f.type;return typeof I=="function"&&!ud(I)&&I.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(o.tag=15,o.type=I,S0(n,o,I,g,A)):(n=ec(f.type,null,g,o,o.mode,A),n.ref=o.ref,n.return=o,o.child=n)}if(I=n.child,!(n.lanes&A)){var O=I.memoizedProps;if(f=f.compare,f=f!==null?f:fe,f(O,g)&&n.ref===o.ref)return Hi(n,o,A)}return o.flags|=1,n=Cs(I,g),n.ref=o.ref,n.return=o,o.child=n}function S0(n,o,f,g,A){if(n!==null){var I=n.memoizedProps;if(fe(I,g)&&n.ref===o.ref)if(Dr=!1,o.pendingProps=g=I,(n.lanes&A)!==0)n.flags&131072&&(Dr=!0);else return o.lanes=n.lanes,Hi(n,o,A)}return Wu(n,o,f,g,A)}function A0(n,o,f){var g=o.pendingProps,A=g.children,I=n!==null?n.memoizedState:null;if(g.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},an(Do,Xr),Xr|=f;else{if(!(f&1073741824))return n=I!==null?I.baseLanes|f:f,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:n,cachePool:null,transitions:null},o.updateQueue=null,an(Do,Xr),Xr|=n,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=I!==null?I.baseLanes:f,an(Do,Xr),Xr|=g}else I!==null?(g=I.baseLanes|f,o.memoizedState=null):g=f,an(Do,Xr),Xr|=g;return Ir(n,o,A,f),o.child}function N0(n,o){var f=o.ref;(n===null&&f!==null||n!==null&&n.ref!==f)&&(o.flags|=512,o.flags|=2097152)}function Wu(n,o,f,g,A){var I=Or(f)?Ws:wr.current;return I=Ao(o,I),ko(o,A),f=Mu(n,o,f,g,I,A),g=Ou(),n!==null&&!Dr?(o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~A,Hi(n,o,A)):(gn&&g&&gu(o),o.flags|=1,Ir(n,o,f,A),o.child)}function T0(n,o,f,g,A){if(Or(f)){var I=!0;Al(o)}else I=!1;if(ko(o,A),o.stateNode===null)Wl(n,o),p0(o,f,g),Vu(o,f,g,A),g=!0;else if(n===null){var O=o.stateNode,H=o.memoizedProps;O.props=H;var ee=O.context,pe=f.contextType;typeof pe=="object"&&pe!==null?pe=Qr(pe):(pe=Or(f)?Ws:wr.current,pe=Ao(o,pe));var Me=f.getDerivedStateFromProps,je=typeof Me=="function"||typeof O.getSnapshotBeforeUpdate=="function";je||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(H!==g||ee!==pe)&&g0(o,O,g,pe),ms=!1;var ke=o.memoizedState;O.state=ke,Ol(o,g,O,A),ee=o.memoizedState,H!==g||ke!==ee||Mr.current||ms?(typeof Me=="function"&&(Fu(o,f,Me,g),ee=o.memoizedState),(H=ms||m0(o,f,H,g,ke,ee,pe))?(je||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(o.flags|=4194308)):(typeof O.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=g,o.memoizedState=ee),O.props=g,O.state=ee,O.context=pe,g=H):(typeof O.componentDidMount=="function"&&(o.flags|=4194308),g=!1)}else{O=o.stateNode,Wh(n,o),H=o.memoizedProps,pe=o.type===o.elementType?H:fi(o.type,H),O.props=pe,je=o.pendingProps,ke=O.context,ee=f.contextType,typeof ee=="object"&&ee!==null?ee=Qr(ee):(ee=Or(f)?Ws:wr.current,ee=Ao(o,ee));var Je=f.getDerivedStateFromProps;(Me=typeof Je=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(H!==je||ke!==ee)&&g0(o,O,g,ee),ms=!1,ke=o.memoizedState,O.state=ke,Ol(o,g,O,A);var rt=o.memoizedState;H!==je||ke!==rt||Mr.current||ms?(typeof Je=="function"&&(Fu(o,f,Je,g),rt=o.memoizedState),(pe=ms||m0(o,f,pe,g,ke,rt,ee)||!1)?(Me||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(g,rt,ee),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(g,rt,ee)),typeof O.componentDidUpdate=="function"&&(o.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof O.componentDidUpdate!="function"||H===n.memoizedProps&&ke===n.memoizedState||(o.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||H===n.memoizedProps&&ke===n.memoizedState||(o.flags|=1024),o.memoizedProps=g,o.memoizedState=rt),O.props=g,O.state=rt,O.context=ee,g=pe):(typeof O.componentDidUpdate!="function"||H===n.memoizedProps&&ke===n.memoizedState||(o.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||H===n.memoizedProps&&ke===n.memoizedState||(o.flags|=1024),g=!1)}return Hu(n,o,f,g,I,A)}function Hu(n,o,f,g,A,I){N0(n,o);var O=(o.flags&128)!==0;if(!g&&!O)return A&&Ph(o,f,!1),Hi(n,o,I);g=o.stateNode,Qx.current=o;var H=O&&typeof f.getDerivedStateFromError!="function"?null:g.render();return o.flags|=1,n!==null&&O?(o.child=_o(o,n.child,null,I),o.child=_o(o,null,H,I)):Ir(n,o,H,I),o.memoizedState=g.state,A&&Ph(o,f,!0),o.child}function I0(n){var o=n.stateNode;o.pendingContext?Rh(n,o.pendingContext,o.pendingContext!==o.context):o.context&&Rh(n,o.context,!1),Tu(n,o.containerInfo)}function _0(n,o,f,g,A){return Io(),vu(A),o.flags|=256,Ir(n,o,f,g),o.child}var Gu={dehydrated:null,treeContext:null,retryLane:0};function Xu(n){return{baseLanes:n,cachePool:null,transitions:null}}function R0(n,o,f){var g=o.pendingProps,A=bn.current,I=!1,O=(o.flags&128)!==0,H;if((H=O)||(H=n!==null&&n.memoizedState===null?!1:(A&2)!==0),H?(I=!0,o.flags&=-129):(n===null||n.memoizedState!==null)&&(A|=1),an(bn,A&1),n===null)return wu(o),n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(o.mode&1?n.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(O=g.children,n=g.fallback,I?(g=o.mode,I=o.child,O={mode:"hidden",children:O},!(g&1)&&I!==null?(I.childLanes=0,I.pendingProps=O):I=tc(O,g,0,null),n=Js(n,g,f,null),I.return=o,n.return=o,I.sibling=n,o.child=I,o.child.memoizedState=Xu(f),o.memoizedState=Gu,n):Yu(o,O));if(A=n.memoizedState,A!==null&&(H=A.dehydrated,H!==null))return Jx(n,o,O,g,H,A,f);if(I){I=g.fallback,O=o.mode,A=n.child,H=A.sibling;var ee={mode:"hidden",children:g.children};return!(O&1)&&o.child!==A?(g=o.child,g.childLanes=0,g.pendingProps=ee,o.deletions=null):(g=Cs(A,ee),g.subtreeFlags=A.subtreeFlags&14680064),H!==null?I=Cs(H,I):(I=Js(I,O,f,null),I.flags|=2),I.return=o,g.return=o,g.sibling=I,o.child=g,g=I,I=o.child,O=n.child.memoizedState,O=O===null?Xu(f):{baseLanes:O.baseLanes|f,cachePool:null,transitions:O.transitions},I.memoizedState=O,I.childLanes=n.childLanes&~f,o.memoizedState=Gu,g}return I=n.child,n=I.sibling,g=Cs(I,{mode:"visible",children:g.children}),!(o.mode&1)&&(g.lanes=f),g.return=o,g.sibling=null,n!==null&&(f=o.deletions,f===null?(o.deletions=[n],o.flags|=16):f.push(n)),o.child=g,o.memoizedState=null,g}function Yu(n,o){return o=tc({mode:"visible",children:o},n.mode,0,null),o.return=n,n.child=o}function zl(n,o,f,g){return g!==null&&vu(g),_o(o,n.child,null,f),n=Yu(o,o.pendingProps.children),n.flags|=2,o.memoizedState=null,n}function Jx(n,o,f,g,A,I,O){if(f)return o.flags&256?(o.flags&=-257,g=Uu(Error(a(422))),zl(n,o,O,g)):o.memoizedState!==null?(o.child=n.child,o.flags|=128,null):(I=g.fallback,A=o.mode,g=tc({mode:"visible",children:g.children},A,0,null),I=Js(I,A,O,null),I.flags|=2,g.return=o,I.return=o,g.sibling=I,o.child=g,o.mode&1&&_o(o,n.child,null,O),o.child.memoizedState=Xu(O),o.memoizedState=Gu,I);if(!(o.mode&1))return zl(n,o,O,null);if(A.data==="$!"){if(g=A.nextSibling&&A.nextSibling.dataset,g)var H=g.dgst;return g=H,I=Error(a(419)),g=Uu(I,g,void 0),zl(n,o,O,g)}if(H=(O&n.childLanes)!==0,Dr||H){if(g=or,g!==null){switch(O&-O){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}A=A&(g.suspendedLanes|O)?0:A,A!==0&&A!==I.retryLane&&(I.retryLane=A,zi(n,A),pi(g,n,A,-1))}return cd(),g=Uu(Error(a(421))),zl(n,o,O,g)}return A.data==="$?"?(o.flags|=128,o.child=n.child,o=f2.bind(null,n),A._reactRetry=o,null):(n=I.treeContext,Gr=us(A.nextSibling),Hr=o,gn=!0,di=null,n!==null&&(Kr[qr++]=Vi,Kr[qr++]=Ui,Kr[qr++]=Hs,Vi=n.id,Ui=n.overflow,Hs=o),o=Yu(o,g.children),o.flags|=4096,o)}function k0(n,o,f){n.lanes|=o;var g=n.alternate;g!==null&&(g.lanes|=o),Su(n.return,o,f)}function $u(n,o,f,g,A){var I=n.memoizedState;I===null?n.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:A}:(I.isBackwards=o,I.rendering=null,I.renderingStartTime=0,I.last=g,I.tail=f,I.tailMode=A)}function P0(n,o,f){var g=o.pendingProps,A=g.revealOrder,I=g.tail;if(Ir(n,o,g.children,f),g=bn.current,g&2)g=g&1|2,o.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=o.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&k0(n,f,o);else if(n.tag===19)k0(n,f,o);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===o)break e;for(;n.sibling===null;){if(n.return===null||n.return===o)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}g&=1}if(an(bn,g),!(o.mode&1))o.memoizedState=null;else switch(A){case"forwards":for(f=o.child,A=null;f!==null;)n=f.alternate,n!==null&&Dl(n)===null&&(A=f),f=f.sibling;f=A,f===null?(A=o.child,o.child=null):(A=f.sibling,f.sibling=null),$u(o,!1,A,f,I);break;case"backwards":for(f=null,A=o.child,o.child=null;A!==null;){if(n=A.alternate,n!==null&&Dl(n)===null){o.child=A;break}n=A.sibling,A.sibling=f,f=A,A=n}$u(o,!0,f,null,I);break;case"together":$u(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Wl(n,o){!(o.mode&1)&&n!==null&&(n.alternate=null,o.alternate=null,o.flags|=2)}function Hi(n,o,f){if(n!==null&&(o.dependencies=n.dependencies),Zs|=o.lanes,!(f&o.childLanes))return null;if(n!==null&&o.child!==n.child)throw Error(a(153));if(o.child!==null){for(n=o.child,f=Cs(n,n.pendingProps),o.child=f,f.return=o;n.sibling!==null;)n=n.sibling,f=f.sibling=Cs(n,n.pendingProps),f.return=o;f.sibling=null}return o.child}function e2(n,o,f){switch(o.tag){case 3:I0(o),Io();break;case 5:Xh(o);break;case 1:Or(o.type)&&Al(o);break;case 4:Tu(o,o.stateNode.containerInfo);break;case 10:var g=o.type._context,A=o.memoizedProps.value;an(kl,g._currentValue),g._currentValue=A;break;case 13:if(g=o.memoizedState,g!==null)return g.dehydrated!==null?(an(bn,bn.current&1),o.flags|=128,null):f&o.child.childLanes?R0(n,o,f):(an(bn,bn.current&1),n=Hi(n,o,f),n!==null?n.sibling:null);an(bn,bn.current&1);break;case 19:if(g=(f&o.childLanes)!==0,n.flags&128){if(g)return P0(n,o,f);o.flags|=128}if(A=o.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),an(bn,bn.current),g)break;return null;case 22:case 23:return o.lanes=0,A0(n,o,f)}return Hi(n,o,f)}var M0,Zu,O0,D0;M0=function(n,o){for(var f=o.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===o)break;for(;f.sibling===null;){if(f.return===null||f.return===o)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},Zu=function(){},O0=function(n,o,f,g){var A=n.memoizedProps;if(A!==g){n=o.stateNode,Ys(Ei.current);var I=null;switch(f){case"input":A=Ye(n,A),g=Ye(n,g),I=[];break;case"select":A=Ce({},A,{value:void 0}),g=Ce({},g,{value:void 0}),I=[];break;case"textarea":A=mn(n,A),g=mn(n,g),I=[];break;default:typeof A.onClick!="function"&&typeof g.onClick=="function"&&(n.onclick=bl)}ot(f,g);var O;f=null;for(pe in A)if(!g.hasOwnProperty(pe)&&A.hasOwnProperty(pe)&&A[pe]!=null)if(pe==="style"){var H=A[pe];for(O in H)H.hasOwnProperty(O)&&(f||(f={}),f[O]="")}else pe!=="dangerouslySetInnerHTML"&&pe!=="children"&&pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&pe!=="autoFocus"&&(m.hasOwnProperty(pe)?I||(I=[]):(I=I||[]).push(pe,null));for(pe in g){var ee=g[pe];if(H=A!=null?A[pe]:void 0,g.hasOwnProperty(pe)&&ee!==H&&(ee!=null||H!=null))if(pe==="style")if(H){for(O in H)!H.hasOwnProperty(O)||ee&&ee.hasOwnProperty(O)||(f||(f={}),f[O]="");for(O in ee)ee.hasOwnProperty(O)&&H[O]!==ee[O]&&(f||(f={}),f[O]=ee[O])}else f||(I||(I=[]),I.push(pe,f)),f=ee;else pe==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,H=H?H.__html:void 0,ee!=null&&H!==ee&&(I=I||[]).push(pe,ee)):pe==="children"?typeof ee!="string"&&typeof ee!="number"||(I=I||[]).push(pe,""+ee):pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&(m.hasOwnProperty(pe)?(ee!=null&&pe==="onScroll"&&fn("scroll",n),I||H===ee||(I=[])):(I=I||[]).push(pe,ee))}f&&(I=I||[]).push("style",f);var pe=I;(o.updateQueue=pe)&&(o.flags|=4)}},D0=function(n,o,f,g){f!==g&&(o.flags|=4)};function Aa(n,o){if(!gn)switch(n.tailMode){case"hidden":o=n.tail;for(var f=null;o!==null;)o.alternate!==null&&(f=o),o=o.sibling;f===null?n.tail=null:f.sibling=null;break;case"collapsed":f=n.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?o||n.tail===null?n.tail=null:n.tail.sibling=null:g.sibling=null}}function Cr(n){var o=n.alternate!==null&&n.alternate.child===n.child,f=0,g=0;if(o)for(var A=n.child;A!==null;)f|=A.lanes|A.childLanes,g|=A.subtreeFlags&14680064,g|=A.flags&14680064,A.return=n,A=A.sibling;else for(A=n.child;A!==null;)f|=A.lanes|A.childLanes,g|=A.subtreeFlags,g|=A.flags,A.return=n,A=A.sibling;return n.subtreeFlags|=g,n.childLanes=f,o}function t2(n,o,f){var g=o.pendingProps;switch(xu(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cr(o),null;case 1:return Or(o.type)&&Sl(),Cr(o),null;case 3:return g=o.stateNode,Po(),hn(Mr),hn(wr),Ru(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(n===null||n.child===null)&&(_l(o)?o.flags|=4:n===null||n.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,di!==null&&(od(di),di=null))),Zu(n,o),Cr(o),null;case 5:Iu(o);var A=Ys(va.current);if(f=o.type,n!==null&&o.stateNode!=null)O0(n,o,f,g,A),n.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!g){if(o.stateNode===null)throw Error(a(166));return Cr(o),null}if(n=Ys(Ei.current),_l(o)){g=o.stateNode,f=o.type;var I=o.memoizedProps;switch(g[bi]=o,g[pa]=I,n=(o.mode&1)!==0,f){case"dialog":fn("cancel",g),fn("close",g);break;case"iframe":case"object":case"embed":fn("load",g);break;case"video":case"audio":for(A=0;A<fa.length;A++)fn(fa[A],g);break;case"source":fn("error",g);break;case"img":case"image":case"link":fn("error",g),fn("load",g);break;case"details":fn("toggle",g);break;case"input":$e(g,I),fn("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!I.multiple},fn("invalid",g);break;case"textarea":Hn(g,I),fn("invalid",g)}ot(f,I),A=null;for(var O in I)if(I.hasOwnProperty(O)){var H=I[O];O==="children"?typeof H=="string"?g.textContent!==H&&(I.suppressHydrationWarning!==!0&&Cl(g.textContent,H,n),A=["children",H]):typeof H=="number"&&g.textContent!==""+H&&(I.suppressHydrationWarning!==!0&&Cl(g.textContent,H,n),A=["children",""+H]):m.hasOwnProperty(O)&&H!=null&&O==="onScroll"&&fn("scroll",g)}switch(f){case"input":Xe(g),Ke(g,I,!0);break;case"textarea":Xe(g),kt(g);break;case"select":case"option":break;default:typeof I.onClick=="function"&&(g.onclick=bl)}g=A,o.updateQueue=g,g!==null&&(o.flags|=4)}else{O=A.nodeType===9?A:A.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=We(f)),n==="http://www.w3.org/1999/xhtml"?f==="script"?(n=O.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof g.is=="string"?n=O.createElement(f,{is:g.is}):(n=O.createElement(f),f==="select"&&(O=n,g.multiple?O.multiple=!0:g.size&&(O.size=g.size))):n=O.createElementNS(n,f),n[bi]=o,n[pa]=g,M0(n,o,!1,!1),o.stateNode=n;e:{switch(O=ut(f,g),f){case"dialog":fn("cancel",n),fn("close",n),A=g;break;case"iframe":case"object":case"embed":fn("load",n),A=g;break;case"video":case"audio":for(A=0;A<fa.length;A++)fn(fa[A],n);A=g;break;case"source":fn("error",n),A=g;break;case"img":case"image":case"link":fn("error",n),fn("load",n),A=g;break;case"details":fn("toggle",n),A=g;break;case"input":$e(n,g),A=Ye(n,g),fn("invalid",n);break;case"option":A=g;break;case"select":n._wrapperState={wasMultiple:!!g.multiple},A=Ce({},g,{value:void 0}),fn("invalid",n);break;case"textarea":Hn(n,g),A=mn(n,g),fn("invalid",n);break;default:A=g}ot(f,A),H=A;for(I in H)if(H.hasOwnProperty(I)){var ee=H[I];I==="style"?ae(n,ee):I==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,ee!=null&&_t(n,ee)):I==="children"?typeof ee=="string"?(f!=="textarea"||ee!=="")&&en(n,ee):typeof ee=="number"&&en(n,""+ee):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(m.hasOwnProperty(I)?ee!=null&&I==="onScroll"&&fn("scroll",n):ee!=null&&B(n,I,ee,O))}switch(f){case"input":Xe(n),Ke(n,g,!1);break;case"textarea":Xe(n),kt(n);break;case"option":g.value!=null&&n.setAttribute("value",""+xe(g.value));break;case"select":n.multiple=!!g.multiple,I=g.value,I!=null?ze(n,!!g.multiple,I,!1):g.defaultValue!=null&&ze(n,!!g.multiple,g.defaultValue,!0);break;default:typeof A.onClick=="function"&&(n.onclick=bl)}switch(f){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Cr(o),null;case 6:if(n&&o.stateNode!=null)D0(n,o,n.memoizedProps,g);else{if(typeof g!="string"&&o.stateNode===null)throw Error(a(166));if(f=Ys(va.current),Ys(Ei.current),_l(o)){if(g=o.stateNode,f=o.memoizedProps,g[bi]=o,(I=g.nodeValue!==f)&&(n=Hr,n!==null))switch(n.tag){case 3:Cl(g.nodeValue,f,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Cl(g.nodeValue,f,(n.mode&1)!==0)}I&&(o.flags|=4)}else g=(f.nodeType===9?f:f.ownerDocument).createTextNode(g),g[bi]=o,o.stateNode=g}return Cr(o),null;case 13:if(hn(bn),g=o.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(gn&&Gr!==null&&o.mode&1&&!(o.flags&128))Bh(),Io(),o.flags|=98560,I=!1;else if(I=_l(o),g!==null&&g.dehydrated!==null){if(n===null){if(!I)throw Error(a(318));if(I=o.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(a(317));I[bi]=o}else Io(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;Cr(o),I=!1}else di!==null&&(od(di),di=null),I=!0;if(!I)return o.flags&65536?o:null}return o.flags&128?(o.lanes=f,o):(g=g!==null,g!==(n!==null&&n.memoizedState!==null)&&g&&(o.child.flags|=8192,o.mode&1&&(n===null||bn.current&1?Jn===0&&(Jn=3):cd())),o.updateQueue!==null&&(o.flags|=4),Cr(o),null);case 4:return Po(),Zu(n,o),n===null&&ha(o.stateNode.containerInfo),Cr(o),null;case 10:return Eu(o.type._context),Cr(o),null;case 17:return Or(o.type)&&Sl(),Cr(o),null;case 19:if(hn(bn),I=o.memoizedState,I===null)return Cr(o),null;if(g=(o.flags&128)!==0,O=I.rendering,O===null)if(g)Aa(I,!1);else{if(Jn!==0||n!==null&&n.flags&128)for(n=o.child;n!==null;){if(O=Dl(n),O!==null){for(o.flags|=128,Aa(I,!1),g=O.updateQueue,g!==null&&(o.updateQueue=g,o.flags|=4),o.subtreeFlags=0,g=f,f=o.child;f!==null;)I=f,n=g,I.flags&=14680066,O=I.alternate,O===null?(I.childLanes=0,I.lanes=n,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=O.childLanes,I.lanes=O.lanes,I.child=O.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=O.memoizedProps,I.memoizedState=O.memoizedState,I.updateQueue=O.updateQueue,I.type=O.type,n=O.dependencies,I.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),f=f.sibling;return an(bn,bn.current&1|2),o.child}n=n.sibling}I.tail!==null&&zt()>Lo&&(o.flags|=128,g=!0,Aa(I,!1),o.lanes=4194304)}else{if(!g)if(n=Dl(O),n!==null){if(o.flags|=128,g=!0,f=n.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),Aa(I,!0),I.tail===null&&I.tailMode==="hidden"&&!O.alternate&&!gn)return Cr(o),null}else 2*zt()-I.renderingStartTime>Lo&&f!==1073741824&&(o.flags|=128,g=!0,Aa(I,!1),o.lanes=4194304);I.isBackwards?(O.sibling=o.child,o.child=O):(f=I.last,f!==null?f.sibling=O:o.child=O,I.last=O)}return I.tail!==null?(o=I.tail,I.rendering=o,I.tail=o.sibling,I.renderingStartTime=zt(),o.sibling=null,f=bn.current,an(bn,g?f&1|2:f&1),o):(Cr(o),null);case 22:case 23:return ld(),g=o.memoizedState!==null,n!==null&&n.memoizedState!==null!==g&&(o.flags|=8192),g&&o.mode&1?Xr&1073741824&&(Cr(o),o.subtreeFlags&6&&(o.flags|=8192)):Cr(o),null;case 24:return null;case 25:return null}throw Error(a(156,o.tag))}function n2(n,o){switch(xu(o),o.tag){case 1:return Or(o.type)&&Sl(),n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 3:return Po(),hn(Mr),hn(wr),Ru(),n=o.flags,n&65536&&!(n&128)?(o.flags=n&-65537|128,o):null;case 5:return Iu(o),null;case 13:if(hn(bn),n=o.memoizedState,n!==null&&n.dehydrated!==null){if(o.alternate===null)throw Error(a(340));Io()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 19:return hn(bn),null;case 4:return Po(),null;case 10:return Eu(o.type._context),null;case 22:case 23:return ld(),null;case 24:return null;default:return null}}var Hl=!1,br=!1,r2=typeof WeakSet=="function"?WeakSet:Set,tt=null;function Oo(n,o){var f=n.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(g){Tn(n,o,g)}else f.current=null}function Ku(n,o,f){try{f()}catch(g){Tn(n,o,g)}}var L0=!1;function i2(n,o){if(lu=vi,n=Ot(),Nt(n)){if("selectionStart"in n)var f={start:n.selectionStart,end:n.selectionEnd};else e:{f=(f=n.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var A=g.anchorOffset,I=g.focusNode;g=g.focusOffset;try{f.nodeType,I.nodeType}catch{f=null;break e}var O=0,H=-1,ee=-1,pe=0,Me=0,je=n,ke=null;t:for(;;){for(var Je;je!==f||A!==0&&je.nodeType!==3||(H=O+A),je!==I||g!==0&&je.nodeType!==3||(ee=O+g),je.nodeType===3&&(O+=je.nodeValue.length),(Je=je.firstChild)!==null;)ke=je,je=Je;for(;;){if(je===n)break t;if(ke===f&&++pe===A&&(H=O),ke===I&&++Me===g&&(ee=O),(Je=je.nextSibling)!==null)break;je=ke,ke=je.parentNode}je=Je}f=H===-1||ee===-1?null:{start:H,end:ee}}else f=null}f=f||{start:0,end:0}}else f=null;for(cu={focusedElem:n,selectionRange:f},vi=!1,tt=o;tt!==null;)if(o=tt,n=o.child,(o.subtreeFlags&1028)!==0&&n!==null)n.return=o,tt=n;else for(;tt!==null;){o=tt;try{var rt=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(rt!==null){var st=rt.memoizedProps,Ln=rt.memoizedState,le=o.stateNode,ie=le.getSnapshotBeforeUpdate(o.elementType===o.type?st:fi(o.type,st),Ln);le.__reactInternalSnapshotBeforeUpdate=ie}break;case 3:var ue=o.stateNode.containerInfo;ue.nodeType===1?ue.textContent="":ue.nodeType===9&&ue.documentElement&&ue.removeChild(ue.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(He){Tn(o,o.return,He)}if(n=o.sibling,n!==null){n.return=o.return,tt=n;break}tt=o.return}return rt=L0,L0=!1,rt}function Na(n,o,f){var g=o.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var A=g=g.next;do{if((A.tag&n)===n){var I=A.destroy;A.destroy=void 0,I!==void 0&&Ku(o,f,I)}A=A.next}while(A!==g)}}function Gl(n,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var f=o=o.next;do{if((f.tag&n)===n){var g=f.create;f.destroy=g()}f=f.next}while(f!==o)}}function qu(n){var o=n.ref;if(o!==null){var f=n.stateNode;switch(n.tag){case 5:n=f;break;default:n=f}typeof o=="function"?o(n):o.current=n}}function j0(n){var o=n.alternate;o!==null&&(n.alternate=null,j0(o)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(o=n.stateNode,o!==null&&(delete o[bi],delete o[pa],delete o[hu],delete o[Vx],delete o[Ux])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function B0(n){return n.tag===5||n.tag===3||n.tag===4}function F0(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||B0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Qu(n,o,f){var g=n.tag;if(g===5||g===6)n=n.stateNode,o?f.nodeType===8?f.parentNode.insertBefore(n,o):f.insertBefore(n,o):(f.nodeType===8?(o=f.parentNode,o.insertBefore(n,f)):(o=f,o.appendChild(n)),f=f._reactRootContainer,f!=null||o.onclick!==null||(o.onclick=bl));else if(g!==4&&(n=n.child,n!==null))for(Qu(n,o,f),n=n.sibling;n!==null;)Qu(n,o,f),n=n.sibling}function Ju(n,o,f){var g=n.tag;if(g===5||g===6)n=n.stateNode,o?f.insertBefore(n,o):f.appendChild(n);else if(g!==4&&(n=n.child,n!==null))for(Ju(n,o,f),n=n.sibling;n!==null;)Ju(n,o,f),n=n.sibling}var fr=null,hi=!1;function gs(n,o,f){for(f=f.child;f!==null;)V0(n,o,f),f=f.sibling}function V0(n,o,f){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(Pt,f)}catch{}switch(f.tag){case 5:br||Oo(f,o);case 6:var g=fr,A=hi;fr=null,gs(n,o,f),fr=g,hi=A,fr!==null&&(hi?(n=fr,f=f.stateNode,n.nodeType===8?n.parentNode.removeChild(f):n.removeChild(f)):fr.removeChild(f.stateNode));break;case 18:fr!==null&&(hi?(n=fr,f=f.stateNode,n.nodeType===8?fu(n.parentNode,f):n.nodeType===1&&fu(n,f),Mn(n)):fu(fr,f.stateNode));break;case 4:g=fr,A=hi,fr=f.stateNode.containerInfo,hi=!0,gs(n,o,f),fr=g,hi=A;break;case 0:case 11:case 14:case 15:if(!br&&(g=f.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){A=g=g.next;do{var I=A,O=I.destroy;I=I.tag,O!==void 0&&(I&2||I&4)&&Ku(f,o,O),A=A.next}while(A!==g)}gs(n,o,f);break;case 1:if(!br&&(Oo(f,o),g=f.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=f.memoizedProps,g.state=f.memoizedState,g.componentWillUnmount()}catch(H){Tn(f,o,H)}gs(n,o,f);break;case 21:gs(n,o,f);break;case 22:f.mode&1?(br=(g=br)||f.memoizedState!==null,gs(n,o,f),br=g):gs(n,o,f);break;default:gs(n,o,f)}}function U0(n){var o=n.updateQueue;if(o!==null){n.updateQueue=null;var f=n.stateNode;f===null&&(f=n.stateNode=new r2),o.forEach(function(g){var A=h2.bind(null,n,g);f.has(g)||(f.add(g),g.then(A,A))})}}function mi(n,o){var f=o.deletions;if(f!==null)for(var g=0;g<f.length;g++){var A=f[g];try{var I=n,O=o,H=O;e:for(;H!==null;){switch(H.tag){case 5:fr=H.stateNode,hi=!1;break e;case 3:fr=H.stateNode.containerInfo,hi=!0;break e;case 4:fr=H.stateNode.containerInfo,hi=!0;break e}H=H.return}if(fr===null)throw Error(a(160));V0(I,O,A),fr=null,hi=!1;var ee=A.alternate;ee!==null&&(ee.return=null),A.return=null}catch(pe){Tn(A,o,pe)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)z0(o,n),o=o.sibling}function z0(n,o){var f=n.alternate,g=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(mi(o,n),Ai(n),g&4){try{Na(3,n,n.return),Gl(3,n)}catch(st){Tn(n,n.return,st)}try{Na(5,n,n.return)}catch(st){Tn(n,n.return,st)}}break;case 1:mi(o,n),Ai(n),g&512&&f!==null&&Oo(f,f.return);break;case 5:if(mi(o,n),Ai(n),g&512&&f!==null&&Oo(f,f.return),n.flags&32){var A=n.stateNode;try{en(A,"")}catch(st){Tn(n,n.return,st)}}if(g&4&&(A=n.stateNode,A!=null)){var I=n.memoizedProps,O=f!==null?f.memoizedProps:I,H=n.type,ee=n.updateQueue;if(n.updateQueue=null,ee!==null)try{H==="input"&&I.type==="radio"&&I.name!=null&&yt(A,I),ut(H,O);var pe=ut(H,I);for(O=0;O<ee.length;O+=2){var Me=ee[O],je=ee[O+1];Me==="style"?ae(A,je):Me==="dangerouslySetInnerHTML"?_t(A,je):Me==="children"?en(A,je):B(A,Me,je,pe)}switch(H){case"input":dt(A,I);break;case"textarea":Ve(A,I);break;case"select":var ke=A._wrapperState.wasMultiple;A._wrapperState.wasMultiple=!!I.multiple;var Je=I.value;Je!=null?ze(A,!!I.multiple,Je,!1):ke!==!!I.multiple&&(I.defaultValue!=null?ze(A,!!I.multiple,I.defaultValue,!0):ze(A,!!I.multiple,I.multiple?[]:"",!1))}A[pa]=I}catch(st){Tn(n,n.return,st)}}break;case 6:if(mi(o,n),Ai(n),g&4){if(n.stateNode===null)throw Error(a(162));A=n.stateNode,I=n.memoizedProps;try{A.nodeValue=I}catch(st){Tn(n,n.return,st)}}break;case 3:if(mi(o,n),Ai(n),g&4&&f!==null&&f.memoizedState.isDehydrated)try{Mn(o.containerInfo)}catch(st){Tn(n,n.return,st)}break;case 4:mi(o,n),Ai(n);break;case 13:mi(o,n),Ai(n),A=n.child,A.flags&8192&&(I=A.memoizedState!==null,A.stateNode.isHidden=I,!I||A.alternate!==null&&A.alternate.memoizedState!==null||(nd=zt())),g&4&&U0(n);break;case 22:if(Me=f!==null&&f.memoizedState!==null,n.mode&1?(br=(pe=br)||Me,mi(o,n),br=pe):mi(o,n),Ai(n),g&8192){if(pe=n.memoizedState!==null,(n.stateNode.isHidden=pe)&&!Me&&n.mode&1)for(tt=n,Me=n.child;Me!==null;){for(je=tt=Me;tt!==null;){switch(ke=tt,Je=ke.child,ke.tag){case 0:case 11:case 14:case 15:Na(4,ke,ke.return);break;case 1:Oo(ke,ke.return);var rt=ke.stateNode;if(typeof rt.componentWillUnmount=="function"){g=ke,f=ke.return;try{o=g,rt.props=o.memoizedProps,rt.state=o.memoizedState,rt.componentWillUnmount()}catch(st){Tn(g,f,st)}}break;case 5:Oo(ke,ke.return);break;case 22:if(ke.memoizedState!==null){G0(je);continue}}Je!==null?(Je.return=ke,tt=Je):G0(je)}Me=Me.sibling}e:for(Me=null,je=n;;){if(je.tag===5){if(Me===null){Me=je;try{A=je.stateNode,pe?(I=A.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none"):(H=je.stateNode,ee=je.memoizedProps.style,O=ee!=null&&ee.hasOwnProperty("display")?ee.display:null,H.style.display=Ie("display",O))}catch(st){Tn(n,n.return,st)}}}else if(je.tag===6){if(Me===null)try{je.stateNode.nodeValue=pe?"":je.memoizedProps}catch(st){Tn(n,n.return,st)}}else if((je.tag!==22&&je.tag!==23||je.memoizedState===null||je===n)&&je.child!==null){je.child.return=je,je=je.child;continue}if(je===n)break e;for(;je.sibling===null;){if(je.return===null||je.return===n)break e;Me===je&&(Me=null),je=je.return}Me===je&&(Me=null),je.sibling.return=je.return,je=je.sibling}}break;case 19:mi(o,n),Ai(n),g&4&&U0(n);break;case 21:break;default:mi(o,n),Ai(n)}}function Ai(n){var o=n.flags;if(o&2){try{e:{for(var f=n.return;f!==null;){if(B0(f)){var g=f;break e}f=f.return}throw Error(a(160))}switch(g.tag){case 5:var A=g.stateNode;g.flags&32&&(en(A,""),g.flags&=-33);var I=F0(n);Ju(n,I,A);break;case 3:case 4:var O=g.stateNode.containerInfo,H=F0(n);Qu(n,H,O);break;default:throw Error(a(161))}}catch(ee){Tn(n,n.return,ee)}n.flags&=-3}o&4096&&(n.flags&=-4097)}function s2(n,o,f){tt=n,W0(n)}function W0(n,o,f){for(var g=(n.mode&1)!==0;tt!==null;){var A=tt,I=A.child;if(A.tag===22&&g){var O=A.memoizedState!==null||Hl;if(!O){var H=A.alternate,ee=H!==null&&H.memoizedState!==null||br;H=Hl;var pe=br;if(Hl=O,(br=ee)&&!pe)for(tt=A;tt!==null;)O=tt,ee=O.child,O.tag===22&&O.memoizedState!==null?X0(A):ee!==null?(ee.return=O,tt=ee):X0(A);for(;I!==null;)tt=I,W0(I),I=I.sibling;tt=A,Hl=H,br=pe}H0(n)}else A.subtreeFlags&8772&&I!==null?(I.return=A,tt=I):H0(n)}}function H0(n){for(;tt!==null;){var o=tt;if(o.flags&8772){var f=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:br||Gl(5,o);break;case 1:var g=o.stateNode;if(o.flags&4&&!br)if(f===null)g.componentDidMount();else{var A=o.elementType===o.type?f.memoizedProps:fi(o.type,f.memoizedProps);g.componentDidUpdate(A,f.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var I=o.updateQueue;I!==null&&Gh(o,I,g);break;case 3:var O=o.updateQueue;if(O!==null){if(f=null,o.child!==null)switch(o.child.tag){case 5:f=o.child.stateNode;break;case 1:f=o.child.stateNode}Gh(o,O,f)}break;case 5:var H=o.stateNode;if(f===null&&o.flags&4){f=H;var ee=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":ee.autoFocus&&f.focus();break;case"img":ee.src&&(f.src=ee.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var pe=o.alternate;if(pe!==null){var Me=pe.memoizedState;if(Me!==null){var je=Me.dehydrated;je!==null&&Mn(je)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}br||o.flags&512&&qu(o)}catch(ke){Tn(o,o.return,ke)}}if(o===n){tt=null;break}if(f=o.sibling,f!==null){f.return=o.return,tt=f;break}tt=o.return}}function G0(n){for(;tt!==null;){var o=tt;if(o===n){tt=null;break}var f=o.sibling;if(f!==null){f.return=o.return,tt=f;break}tt=o.return}}function X0(n){for(;tt!==null;){var o=tt;try{switch(o.tag){case 0:case 11:case 15:var f=o.return;try{Gl(4,o)}catch(ee){Tn(o,f,ee)}break;case 1:var g=o.stateNode;if(typeof g.componentDidMount=="function"){var A=o.return;try{g.componentDidMount()}catch(ee){Tn(o,A,ee)}}var I=o.return;try{qu(o)}catch(ee){Tn(o,I,ee)}break;case 5:var O=o.return;try{qu(o)}catch(ee){Tn(o,O,ee)}}}catch(ee){Tn(o,o.return,ee)}if(o===n){tt=null;break}var H=o.sibling;if(H!==null){H.return=o.return,tt=H;break}tt=o.return}}var o2=Math.ceil,Xl=Y.ReactCurrentDispatcher,ed=Y.ReactCurrentOwner,ei=Y.ReactCurrentBatchConfig,Ut=0,or=null,Un=null,hr=0,Xr=0,Do=ds(0),Jn=0,Ta=null,Zs=0,Yl=0,td=0,Ia=null,Lr=null,nd=0,Lo=1/0,Gi=null,$l=!1,rd=null,xs=null,Zl=!1,ys=null,Kl=0,_a=0,id=null,ql=-1,Ql=0;function _r(){return Ut&6?zt():ql!==-1?ql:ql=zt()}function ws(n){return n.mode&1?Ut&2&&hr!==0?hr&-hr:Wx.transition!==null?(Ql===0&&(Ql=Pn()),Ql):(n=St,n!==0||(n=window.event,n=n===void 0?16:na(n.type)),n):1}function pi(n,o,f,g){if(50<_a)throw _a=0,id=null,Error(a(185));U(n,f,g),(!(Ut&2)||n!==or)&&(n===or&&(!(Ut&2)&&(Yl|=f),Jn===4&&vs(n,hr)),jr(n,g),f===1&&Ut===0&&!(o.mode&1)&&(Lo=zt()+500,Nl&&hs()))}function jr(n,o){var f=n.callbackNode;wi(n,o);var g=xr(n,n===or?hr:0);if(g===0)f!==null&&$n(f),n.callbackNode=null,n.callbackPriority=0;else if(o=g&-g,n.callbackPriority!==o){if(f!=null&&$n(f),o===1)n.tag===0?zx($0.bind(null,n)):Mh($0.bind(null,n)),Bx(function(){!(Ut&6)&&hs()}),f=null;else{switch(mo(g)){case 1:f=Te;break;case 4:f=fo;break;case 16:f=Gt;break;case 536870912:f=ho;break;default:f=Gt}f=n1(f,Y0.bind(null,n))}n.callbackPriority=o,n.callbackNode=f}}function Y0(n,o){if(ql=-1,Ql=0,Ut&6)throw Error(a(327));var f=n.callbackNode;if(jo()&&n.callbackNode!==f)return null;var g=xr(n,n===or?hr:0);if(g===0)return null;if(g&30||g&n.expiredLanes||o)o=Jl(n,g);else{o=g;var A=Ut;Ut|=2;var I=K0();(or!==n||hr!==o)&&(Gi=null,Lo=zt()+500,qs(n,o));do try{c2();break}catch(H){Z0(n,H)}while(!0);bu(),Xl.current=I,Ut=A,Un!==null?o=0:(or=null,hr=0,o=Jn)}if(o!==0){if(o===2&&(A=Ft(n),A!==0&&(g=A,o=sd(n,A))),o===1)throw f=Ta,qs(n,0),vs(n,g),jr(n,zt()),f;if(o===6)vs(n,g);else{if(A=n.current.alternate,!(g&30)&&!a2(A)&&(o=Jl(n,g),o===2&&(I=Ft(n),I!==0&&(g=I,o=sd(n,I))),o===1))throw f=Ta,qs(n,0),vs(n,g),jr(n,zt()),f;switch(n.finishedWork=A,n.finishedLanes=g,o){case 0:case 1:throw Error(a(345));case 2:Qs(n,Lr,Gi);break;case 3:if(vs(n,g),(g&130023424)===g&&(o=nd+500-zt(),10<o)){if(xr(n,0)!==0)break;if(A=n.suspendedLanes,(A&g)!==g){_r(),n.pingedLanes|=n.suspendedLanes&A;break}n.timeoutHandle=du(Qs.bind(null,n,Lr,Gi),o);break}Qs(n,Lr,Gi);break;case 4:if(vs(n,g),(g&4194240)===g)break;for(o=n.eventTimes,A=-1;0<g;){var O=31-Zn(g);I=1<<O,O=o[O],O>A&&(A=O),g&=~I}if(g=A,g=zt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*o2(g/1960))-g,10<g){n.timeoutHandle=du(Qs.bind(null,n,Lr,Gi),g);break}Qs(n,Lr,Gi);break;case 5:Qs(n,Lr,Gi);break;default:throw Error(a(329))}}}return jr(n,zt()),n.callbackNode===f?Y0.bind(null,n):null}function sd(n,o){var f=Ia;return n.current.memoizedState.isDehydrated&&(qs(n,o).flags|=256),n=Jl(n,o),n!==2&&(o=Lr,Lr=f,o!==null&&od(o)),n}function od(n){Lr===null?Lr=n:Lr.push.apply(Lr,n)}function a2(n){for(var o=n;;){if(o.flags&16384){var f=o.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var g=0;g<f.length;g++){var A=f[g],I=A.getSnapshot;A=A.value;try{if(!se(I(),A))return!1}catch{return!1}}}if(f=o.child,o.subtreeFlags&16384&&f!==null)f.return=o,o=f;else{if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function vs(n,o){for(o&=~td,o&=~Yl,n.suspendedLanes|=o,n.pingedLanes&=~o,n=n.expirationTimes;0<o;){var f=31-Zn(o),g=1<<f;n[f]=-1,o&=~g}}function $0(n){if(Ut&6)throw Error(a(327));jo();var o=xr(n,0);if(!(o&1))return jr(n,zt()),null;var f=Jl(n,o);if(n.tag!==0&&f===2){var g=Ft(n);g!==0&&(o=g,f=sd(n,g))}if(f===1)throw f=Ta,qs(n,0),vs(n,o),jr(n,zt()),f;if(f===6)throw Error(a(345));return n.finishedWork=n.current.alternate,n.finishedLanes=o,Qs(n,Lr,Gi),jr(n,zt()),null}function ad(n,o){var f=Ut;Ut|=1;try{return n(o)}finally{Ut=f,Ut===0&&(Lo=zt()+500,Nl&&hs())}}function Ks(n){ys!==null&&ys.tag===0&&!(Ut&6)&&jo();var o=Ut;Ut|=1;var f=ei.transition,g=St;try{if(ei.transition=null,St=1,n)return n()}finally{St=g,ei.transition=f,Ut=o,!(Ut&6)&&hs()}}function ld(){Xr=Do.current,hn(Do)}function qs(n,o){n.finishedWork=null,n.finishedLanes=0;var f=n.timeoutHandle;if(f!==-1&&(n.timeoutHandle=-1,jx(f)),Un!==null)for(f=Un.return;f!==null;){var g=f;switch(xu(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Sl();break;case 3:Po(),hn(Mr),hn(wr),Ru();break;case 5:Iu(g);break;case 4:Po();break;case 13:hn(bn);break;case 19:hn(bn);break;case 10:Eu(g.type._context);break;case 22:case 23:ld()}f=f.return}if(or=n,Un=n=Cs(n.current,null),hr=Xr=o,Jn=0,Ta=null,td=Yl=Zs=0,Lr=Ia=null,Xs!==null){for(o=0;o<Xs.length;o++)if(f=Xs[o],g=f.interleaved,g!==null){f.interleaved=null;var A=g.next,I=f.pending;if(I!==null){var O=I.next;I.next=A,g.next=O}f.pending=g}Xs=null}return n}function Z0(n,o){do{var f=Un;try{if(bu(),Ll.current=Vl,jl){for(var g=En.memoizedState;g!==null;){var A=g.queue;A!==null&&(A.pending=null),g=g.next}jl=!1}if($s=0,sr=Qn=En=null,Ca=!1,ba=0,ed.current=null,f===null||f.return===null){Jn=1,Ta=o,Un=null;break}e:{var I=n,O=f.return,H=f,ee=o;if(o=hr,H.flags|=32768,ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var pe=ee,Me=H,je=Me.tag;if(!(Me.mode&1)&&(je===0||je===11||je===15)){var ke=Me.alternate;ke?(Me.updateQueue=ke.updateQueue,Me.memoizedState=ke.memoizedState,Me.lanes=ke.lanes):(Me.updateQueue=null,Me.memoizedState=null)}var Je=v0(O);if(Je!==null){Je.flags&=-257,C0(Je,O,H,I,o),Je.mode&1&&w0(I,pe,o),o=Je,ee=pe;var rt=o.updateQueue;if(rt===null){var st=new Set;st.add(ee),o.updateQueue=st}else rt.add(ee);break e}else{if(!(o&1)){w0(I,pe,o),cd();break e}ee=Error(a(426))}}else if(gn&&H.mode&1){var Ln=v0(O);if(Ln!==null){!(Ln.flags&65536)&&(Ln.flags|=256),C0(Ln,O,H,I,o),vu(Mo(ee,H));break e}}I=ee=Mo(ee,H),Jn!==4&&(Jn=2),Ia===null?Ia=[I]:Ia.push(I),I=O;do{switch(I.tag){case 3:I.flags|=65536,o&=-o,I.lanes|=o;var le=x0(I,ee,o);Hh(I,le);break e;case 1:H=ee;var ie=I.type,ue=I.stateNode;if(!(I.flags&128)&&(typeof ie.getDerivedStateFromError=="function"||ue!==null&&typeof ue.componentDidCatch=="function"&&(xs===null||!xs.has(ue)))){I.flags|=65536,o&=-o,I.lanes|=o;var He=y0(I,H,o);Hh(I,He);break e}}I=I.return}while(I!==null)}Q0(f)}catch(lt){o=lt,Un===f&&f!==null&&(Un=f=f.return);continue}break}while(!0)}function K0(){var n=Xl.current;return Xl.current=Vl,n===null?Vl:n}function cd(){(Jn===0||Jn===3||Jn===2)&&(Jn=4),or===null||!(Zs&268435455)&&!(Yl&268435455)||vs(or,hr)}function Jl(n,o){var f=Ut;Ut|=2;var g=K0();(or!==n||hr!==o)&&(Gi=null,qs(n,o));do try{l2();break}catch(A){Z0(n,A)}while(!0);if(bu(),Ut=f,Xl.current=g,Un!==null)throw Error(a(261));return or=null,hr=0,Jn}function l2(){for(;Un!==null;)q0(Un)}function c2(){for(;Un!==null&&!tn();)q0(Un)}function q0(n){var o=t1(n.alternate,n,Xr);n.memoizedProps=n.pendingProps,o===null?Q0(n):Un=o,ed.current=null}function Q0(n){var o=n;do{var f=o.alternate;if(n=o.return,o.flags&32768){if(f=n2(f,o),f!==null){f.flags&=32767,Un=f;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Jn=6,Un=null;return}}else if(f=t2(f,o,Xr),f!==null){Un=f;return}if(o=o.sibling,o!==null){Un=o;return}Un=o=n}while(o!==null);Jn===0&&(Jn=5)}function Qs(n,o,f){var g=St,A=ei.transition;try{ei.transition=null,St=1,u2(n,o,f,g)}finally{ei.transition=A,St=g}return null}function u2(n,o,f,g){do jo();while(ys!==null);if(Ut&6)throw Error(a(327));f=n.finishedWork;var A=n.finishedLanes;if(f===null)return null;if(n.finishedWork=null,n.finishedLanes=0,f===n.current)throw Error(a(177));n.callbackNode=null,n.callbackPriority=0;var I=f.lanes|f.childLanes;if(it(n,I),n===or&&(Un=or=null,hr=0),!(f.subtreeFlags&2064)&&!(f.flags&2064)||Zl||(Zl=!0,n1(Gt,function(){return jo(),null})),I=(f.flags&15990)!==0,f.subtreeFlags&15990||I){I=ei.transition,ei.transition=null;var O=St;St=1;var H=Ut;Ut|=4,ed.current=null,i2(n,f),z0(f,n),yr(cu),vi=!!lu,cu=lu=null,n.current=f,s2(f),Rs(),Ut=H,St=O,ei.transition=I}else n.current=f;if(Zl&&(Zl=!1,ys=n,Kl=A),I=n.pendingLanes,I===0&&(xs=null),Rt(f.stateNode),jr(n,zt()),o!==null)for(g=n.onRecoverableError,f=0;f<o.length;f++)A=o[f],g(A.value,{componentStack:A.stack,digest:A.digest});if($l)throw $l=!1,n=rd,rd=null,n;return Kl&1&&n.tag!==0&&jo(),I=n.pendingLanes,I&1?n===id?_a++:(_a=0,id=n):_a=0,hs(),null}function jo(){if(ys!==null){var n=mo(Kl),o=ei.transition,f=St;try{if(ei.transition=null,St=16>n?16:n,ys===null)var g=!1;else{if(n=ys,ys=null,Kl=0,Ut&6)throw Error(a(331));var A=Ut;for(Ut|=4,tt=n.current;tt!==null;){var I=tt,O=I.child;if(tt.flags&16){var H=I.deletions;if(H!==null){for(var ee=0;ee<H.length;ee++){var pe=H[ee];for(tt=pe;tt!==null;){var Me=tt;switch(Me.tag){case 0:case 11:case 15:Na(8,Me,I)}var je=Me.child;if(je!==null)je.return=Me,tt=je;else for(;tt!==null;){Me=tt;var ke=Me.sibling,Je=Me.return;if(j0(Me),Me===pe){tt=null;break}if(ke!==null){ke.return=Je,tt=ke;break}tt=Je}}}var rt=I.alternate;if(rt!==null){var st=rt.child;if(st!==null){rt.child=null;do{var Ln=st.sibling;st.sibling=null,st=Ln}while(st!==null)}}tt=I}}if(I.subtreeFlags&2064&&O!==null)O.return=I,tt=O;else e:for(;tt!==null;){if(I=tt,I.flags&2048)switch(I.tag){case 0:case 11:case 15:Na(9,I,I.return)}var le=I.sibling;if(le!==null){le.return=I.return,tt=le;break e}tt=I.return}}var ie=n.current;for(tt=ie;tt!==null;){O=tt;var ue=O.child;if(O.subtreeFlags&2064&&ue!==null)ue.return=O,tt=ue;else e:for(O=ie;tt!==null;){if(H=tt,H.flags&2048)try{switch(H.tag){case 0:case 11:case 15:Gl(9,H)}}catch(lt){Tn(H,H.return,lt)}if(H===O){tt=null;break e}var He=H.sibling;if(He!==null){He.return=H.return,tt=He;break e}tt=H.return}}if(Ut=A,hs(),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(Pt,n)}catch{}g=!0}return g}finally{St=f,ei.transition=o}}return!1}function J0(n,o,f){o=Mo(f,o),o=x0(n,o,1),n=ps(n,o,1),o=_r(),n!==null&&(U(n,1,o),jr(n,o))}function Tn(n,o,f){if(n.tag===3)J0(n,n,f);else for(;o!==null;){if(o.tag===3){J0(o,n,f);break}else if(o.tag===1){var g=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(xs===null||!xs.has(g))){n=Mo(f,n),n=y0(o,n,1),o=ps(o,n,1),n=_r(),o!==null&&(U(o,1,n),jr(o,n));break}}o=o.return}}function d2(n,o,f){var g=n.pingCache;g!==null&&g.delete(o),o=_r(),n.pingedLanes|=n.suspendedLanes&f,or===n&&(hr&f)===f&&(Jn===4||Jn===3&&(hr&130023424)===hr&&500>zt()-nd?qs(n,0):td|=f),jr(n,o)}function e1(n,o){o===0&&(n.mode&1?(o=ai,ai<<=1,!(ai&130023424)&&(ai=4194304)):o=1);var f=_r();n=zi(n,o),n!==null&&(U(n,o,f),jr(n,f))}function f2(n){var o=n.memoizedState,f=0;o!==null&&(f=o.retryLane),e1(n,f)}function h2(n,o){var f=0;switch(n.tag){case 13:var g=n.stateNode,A=n.memoizedState;A!==null&&(f=A.retryLane);break;case 19:g=n.stateNode;break;default:throw Error(a(314))}g!==null&&g.delete(o),e1(n,f)}var t1;t1=function(n,o,f){if(n!==null)if(n.memoizedProps!==o.pendingProps||Mr.current)Dr=!0;else{if(!(n.lanes&f)&&!(o.flags&128))return Dr=!1,e2(n,o,f);Dr=!!(n.flags&131072)}else Dr=!1,gn&&o.flags&1048576&&Oh(o,Il,o.index);switch(o.lanes=0,o.tag){case 2:var g=o.type;Wl(n,o),n=o.pendingProps;var A=Ao(o,wr.current);ko(o,f),A=Mu(null,o,g,n,A,f);var I=Ou();return o.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Or(g)?(I=!0,Al(o)):I=!1,o.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,Nu(o),A.updater=Ul,o.stateNode=A,A._reactInternals=o,Vu(o,g,n,f),o=Hu(null,o,g,!0,I,f)):(o.tag=0,gn&&I&&gu(o),Ir(null,o,A,f),o=o.child),o;case 16:g=o.elementType;e:{switch(Wl(n,o),n=o.pendingProps,A=g._init,g=A(g._payload),o.type=g,A=o.tag=p2(g),n=fi(g,n),A){case 0:o=Wu(null,o,g,n,f);break e;case 1:o=T0(null,o,g,n,f);break e;case 11:o=b0(null,o,g,n,f);break e;case 14:o=E0(null,o,g,fi(g.type,n),f);break e}throw Error(a(306,g,""))}return o;case 0:return g=o.type,A=o.pendingProps,A=o.elementType===g?A:fi(g,A),Wu(n,o,g,A,f);case 1:return g=o.type,A=o.pendingProps,A=o.elementType===g?A:fi(g,A),T0(n,o,g,A,f);case 3:e:{if(I0(o),n===null)throw Error(a(387));g=o.pendingProps,I=o.memoizedState,A=I.element,Wh(n,o),Ol(o,g,null,f);var O=o.memoizedState;if(g=O.element,I.isDehydrated)if(I={element:g,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},o.updateQueue.baseState=I,o.memoizedState=I,o.flags&256){A=Mo(Error(a(423)),o),o=_0(n,o,g,f,A);break e}else if(g!==A){A=Mo(Error(a(424)),o),o=_0(n,o,g,f,A);break e}else for(Gr=us(o.stateNode.containerInfo.firstChild),Hr=o,gn=!0,di=null,f=Uh(o,null,g,f),o.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Io(),g===A){o=Hi(n,o,f);break e}Ir(n,o,g,f)}o=o.child}return o;case 5:return Xh(o),n===null&&wu(o),g=o.type,A=o.pendingProps,I=n!==null?n.memoizedProps:null,O=A.children,uu(g,A)?O=null:I!==null&&uu(g,I)&&(o.flags|=32),N0(n,o),Ir(n,o,O,f),o.child;case 6:return n===null&&wu(o),null;case 13:return R0(n,o,f);case 4:return Tu(o,o.stateNode.containerInfo),g=o.pendingProps,n===null?o.child=_o(o,null,g,f):Ir(n,o,g,f),o.child;case 11:return g=o.type,A=o.pendingProps,A=o.elementType===g?A:fi(g,A),b0(n,o,g,A,f);case 7:return Ir(n,o,o.pendingProps,f),o.child;case 8:return Ir(n,o,o.pendingProps.children,f),o.child;case 12:return Ir(n,o,o.pendingProps.children,f),o.child;case 10:e:{if(g=o.type._context,A=o.pendingProps,I=o.memoizedProps,O=A.value,an(kl,g._currentValue),g._currentValue=O,I!==null)if(se(I.value,O)){if(I.children===A.children&&!Mr.current){o=Hi(n,o,f);break e}}else for(I=o.child,I!==null&&(I.return=o);I!==null;){var H=I.dependencies;if(H!==null){O=I.child;for(var ee=H.firstContext;ee!==null;){if(ee.context===g){if(I.tag===1){ee=Wi(-1,f&-f),ee.tag=2;var pe=I.updateQueue;if(pe!==null){pe=pe.shared;var Me=pe.pending;Me===null?ee.next=ee:(ee.next=Me.next,Me.next=ee),pe.pending=ee}}I.lanes|=f,ee=I.alternate,ee!==null&&(ee.lanes|=f),Su(I.return,f,o),H.lanes|=f;break}ee=ee.next}}else if(I.tag===10)O=I.type===o.type?null:I.child;else if(I.tag===18){if(O=I.return,O===null)throw Error(a(341));O.lanes|=f,H=O.alternate,H!==null&&(H.lanes|=f),Su(O,f,o),O=I.sibling}else O=I.child;if(O!==null)O.return=I;else for(O=I;O!==null;){if(O===o){O=null;break}if(I=O.sibling,I!==null){I.return=O.return,O=I;break}O=O.return}I=O}Ir(n,o,A.children,f),o=o.child}return o;case 9:return A=o.type,g=o.pendingProps.children,ko(o,f),A=Qr(A),g=g(A),o.flags|=1,Ir(n,o,g,f),o.child;case 14:return g=o.type,A=fi(g,o.pendingProps),A=fi(g.type,A),E0(n,o,g,A,f);case 15:return S0(n,o,o.type,o.pendingProps,f);case 17:return g=o.type,A=o.pendingProps,A=o.elementType===g?A:fi(g,A),Wl(n,o),o.tag=1,Or(g)?(n=!0,Al(o)):n=!1,ko(o,f),p0(o,g,A),Vu(o,g,A,f),Hu(null,o,g,!0,n,f);case 19:return P0(n,o,f);case 22:return A0(n,o,f)}throw Error(a(156,o.tag))};function n1(n,o){return Yn(n,o)}function m2(n,o,f,g){this.tag=n,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ti(n,o,f,g){return new m2(n,o,f,g)}function ud(n){return n=n.prototype,!(!n||!n.isReactComponent)}function p2(n){if(typeof n=="function")return ud(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Ne)return 11;if(n===Z)return 14}return 2}function Cs(n,o){var f=n.alternate;return f===null?(f=ti(n.tag,o,n.key,n.mode),f.elementType=n.elementType,f.type=n.type,f.stateNode=n.stateNode,f.alternate=n,n.alternate=f):(f.pendingProps=o,f.type=n.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=n.flags&14680064,f.childLanes=n.childLanes,f.lanes=n.lanes,f.child=n.child,f.memoizedProps=n.memoizedProps,f.memoizedState=n.memoizedState,f.updateQueue=n.updateQueue,o=n.dependencies,f.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},f.sibling=n.sibling,f.index=n.index,f.ref=n.ref,f}function ec(n,o,f,g,A,I){var O=2;if(g=n,typeof n=="function")ud(n)&&(O=1);else if(typeof n=="string")O=5;else e:switch(n){case G:return Js(f.children,A,I,o);case te:O=8,A|=8;break;case J:return n=ti(12,f,o,A|2),n.elementType=J,n.lanes=I,n;case Se:return n=ti(13,f,o,A),n.elementType=Se,n.lanes=I,n;case Ee:return n=ti(19,f,o,A),n.elementType=Ee,n.lanes=I,n;case ve:return tc(f,A,I,o);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ye:O=10;break e;case _e:O=9;break e;case Ne:O=11;break e;case Z:O=14;break e;case Le:O=16,g=null;break e}throw Error(a(130,n==null?n:typeof n,""))}return o=ti(O,f,o,A),o.elementType=n,o.type=g,o.lanes=I,o}function Js(n,o,f,g){return n=ti(7,n,g,o),n.lanes=f,n}function tc(n,o,f,g){return n=ti(22,n,g,o),n.elementType=ve,n.lanes=f,n.stateNode={isHidden:!1},n}function dd(n,o,f){return n=ti(6,n,null,o),n.lanes=f,n}function fd(n,o,f){return o=ti(4,n.children!==null?n.children:[],n.key,o),o.lanes=f,o.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},o}function g2(n,o,f,g,A){this.tag=o,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=oe(0),this.expirationTimes=oe(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oe(0),this.identifierPrefix=g,this.onRecoverableError=A,this.mutableSourceEagerHydrationData=null}function hd(n,o,f,g,A,I,O,H,ee){return n=new g2(n,o,f,H,ee),o===1?(o=1,I===!0&&(o|=8)):o=0,I=ti(3,null,null,o),n.current=I,I.stateNode=n,I.memoizedState={element:g,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nu(I),n}function x2(n,o,f){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:re,key:g==null?null:""+g,children:n,containerInfo:o,implementation:f}}function r1(n){if(!n)return fs;n=n._reactInternals;e:{if(gr(n)!==n||n.tag!==1)throw Error(a(170));var o=n;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Or(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(a(171))}if(n.tag===1){var f=n.type;if(Or(f))return kh(n,f,o)}return o}function i1(n,o,f,g,A,I,O,H,ee){return n=hd(f,g,!0,n,A,I,O,H,ee),n.context=r1(null),f=n.current,g=_r(),A=ws(f),I=Wi(g,A),I.callback=o??null,ps(f,I,A),n.current.lanes=A,U(n,A,g),jr(n,g),n}function nc(n,o,f,g){var A=o.current,I=_r(),O=ws(A);return f=r1(f),o.context===null?o.context=f:o.pendingContext=f,o=Wi(I,O),o.payload={element:n},g=g===void 0?null:g,g!==null&&(o.callback=g),n=ps(A,o,O),n!==null&&(pi(n,A,O,I),Ml(n,A,O)),O}function rc(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function s1(n,o){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var f=n.retryLane;n.retryLane=f!==0&&f<o?f:o}}function md(n,o){s1(n,o),(n=n.alternate)&&s1(n,o)}function y2(){return null}var o1=typeof reportError=="function"?reportError:function(n){console.error(n)};function pd(n){this._internalRoot=n}ic.prototype.render=pd.prototype.render=function(n){var o=this._internalRoot;if(o===null)throw Error(a(409));nc(n,o,null,null)},ic.prototype.unmount=pd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var o=n.containerInfo;Ks(function(){nc(null,n,null,null)}),o[Bi]=null}};function ic(n){this._internalRoot=n}ic.prototype.unstable_scheduleHydration=function(n){if(n){var o=Qt();n={blockedOn:null,target:n,priority:o};for(var f=0;f<sn.length&&o!==0&&o<sn[f].priority;f++);sn.splice(f,0,n),f===0&&ta(n)}};function gd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function sc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function a1(){}function w2(n,o,f,g,A){if(A){if(typeof g=="function"){var I=g;g=function(){var pe=rc(O);I.call(pe)}}var O=i1(o,g,n,0,null,!1,!1,"",a1);return n._reactRootContainer=O,n[Bi]=O.current,ha(n.nodeType===8?n.parentNode:n),Ks(),O}for(;A=n.lastChild;)n.removeChild(A);if(typeof g=="function"){var H=g;g=function(){var pe=rc(ee);H.call(pe)}}var ee=hd(n,0,!1,null,null,!1,!1,"",a1);return n._reactRootContainer=ee,n[Bi]=ee.current,ha(n.nodeType===8?n.parentNode:n),Ks(function(){nc(o,ee,f,g)}),ee}function oc(n,o,f,g,A){var I=f._reactRootContainer;if(I){var O=I;if(typeof A=="function"){var H=A;A=function(){var ee=rc(O);H.call(ee)}}nc(o,O,n,A)}else O=w2(f,o,n,A,g);return rc(O)}Mi=function(n){switch(n.tag){case 3:var o=n.stateNode;if(o.current.memoizedState.isDehydrated){var f=qt(o.pendingLanes);f!==0&&(rn(o,f|1),jr(o,zt()),!(Ut&6)&&(Lo=zt()+500,hs()))}break;case 13:Ks(function(){var g=zi(n,1);if(g!==null){var A=_r();pi(g,n,1,A)}}),md(n,1)}},rr=function(n){if(n.tag===13){var o=zi(n,134217728);if(o!==null){var f=_r();pi(o,n,134217728,f)}md(n,134217728)}},at=function(n){if(n.tag===13){var o=ws(n),f=zi(n,o);if(f!==null){var g=_r();pi(f,n,o,g)}md(n,o)}},Qt=function(){return St},ns=function(n,o){var f=St;try{return St=n,o()}finally{St=f}},un=function(n,o,f){switch(o){case"input":if(dt(n,f),o=f.name,f.type==="radio"&&o!=null){for(f=n;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<f.length;o++){var g=f[o];if(g!==n&&g.form===n.form){var A=El(g);if(!A)throw Error(a(90));ce(g),dt(g,A)}}}break;case"textarea":Ve(n,f);break;case"select":o=f.value,o!=null&&ze(n,!!f.multiple,o,!1)}},Qi=ad,xn=Ks;var v2={usingClientEntryPoint:!1,Events:[ga,Eo,El,Yr,Fn,ad]},Ra={findFiberByHostInstance:zs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},C2={bundleType:Ra.bundleType,version:Ra.version,rendererPackageName:Ra.rendererPackageName,rendererConfig:Ra.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Y.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Jo(n),n===null?null:n.stateNode},findFiberByHostInstance:Ra.findFiberByHostInstance||y2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{Pt=ac.inject(C2),It=ac}catch{}}return Br.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v2,Br.createPortal=function(n,o){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gd(o))throw Error(a(200));return x2(n,o,null,f)},Br.createRoot=function(n,o){if(!gd(n))throw Error(a(299));var f=!1,g="",A=o1;return o!=null&&(o.unstable_strictMode===!0&&(f=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onRecoverableError!==void 0&&(A=o.onRecoverableError)),o=hd(n,1,!1,null,null,f,!1,g,A),n[Bi]=o.current,ha(n.nodeType===8?n.parentNode:n),new pd(o)},Br.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var o=n._reactInternals;if(o===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=Jo(o),n=n===null?null:n.stateNode,n},Br.flushSync=function(n){return Ks(n)},Br.hydrate=function(n,o,f){if(!sc(o))throw Error(a(200));return oc(null,n,o,!0,f)},Br.hydrateRoot=function(n,o,f){if(!gd(n))throw Error(a(405));var g=f!=null&&f.hydratedSources||null,A=!1,I="",O=o1;if(f!=null&&(f.unstable_strictMode===!0&&(A=!0),f.identifierPrefix!==void 0&&(I=f.identifierPrefix),f.onRecoverableError!==void 0&&(O=f.onRecoverableError)),o=i1(o,null,n,1,f??null,A,!1,I,O),n[Bi]=o.current,ha(n),g)for(n=0;n<g.length;n++)f=g[n],A=f._getVersion,A=A(f._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[f,A]:o.mutableSourceEagerHydrationData.push(f,A);return new ic(o)},Br.render=function(n,o,f){if(!sc(o))throw Error(a(200));return oc(null,n,o,!1,f)},Br.unmountComponentAtNode=function(n){if(!sc(n))throw Error(a(40));return n._reactRootContainer?(Ks(function(){oc(null,null,n,!1,function(){n._reactRootContainer=null,n[Bi]=null})}),!0):!1},Br.unstable_batchedUpdates=ad,Br.unstable_renderSubtreeIntoContainer=function(n,o,f,g){if(!sc(f))throw Error(a(200));if(n==null||n._reactInternals===void 0)throw Error(a(38));return oc(n,o,f,!1,g)},Br.version="18.3.1-next-f1338f8080-20240426",Br}var p1;function _2(){if(p1)return wd.exports;p1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(i){console.error(i)}}return t(),wd.exports=I2(),wd.exports}var g1;function R2(){if(g1)return cc;g1=1;var t=_2();return cc.createRoot=t.createRoot,cc.hydrateRoot=t.hydrateRoot,cc}var k2=R2();const Wn=N.createContext(null),P2=({children:t})=>{const[i,a]=N.useState(null),[u,m]=N.useState(null),[x,y]=N.useState(null),[b,v]=N.useState(null),[C,S]=N.useState(!1),[T,_]=N.useState(null),[M,L]=N.useState(!1),[F,j]=N.useState(!0),[z,V]=N.useState("Connecting..."),B=N.useRef(null),Y=async()=>{j(!0),V("Connecting..."),B.current&&clearTimeout(B.current),B.current=setTimeout(()=>{V("Taking longer than expected. Check your connection.")},1e4);try{try{const J=await fetch(window.server_url+"/auth/session",{method:"GET",credentials:"include"});if(J.ok){const ye=await J.json();if(ye.authenticated){console.log("SESSION AUTH SUCCESS:",ye);const _e=localStorage.getItem("user");_e&&_e!==ye.user.username&&(console.log("Session user differs from cached user, clearing stale credentials"),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user")),ye.access_token&&(console.log("Session includes JWT, storing in localStorage"),localStorage.setItem("access_token",ye.access_token),localStorage.setItem("user",ye.user.username),ye.refresh_token&&localStorage.setItem("refresh_token",ye.refresh_token)),S(!0),a(ye.user.username),m(ye.user.profile||null),_(ye.user.permissions||null),L(ye.user.email_verified===!0);return}}}catch(J){console.log("Session auth check failed (this is ok if using JWT):",J)}const te=localStorage.getItem("access_token");if(te)try{const J=await fetch(window.server_url+"/load_user",{headers:{Authorization:`Bearer ${te}`},credentials:"include"});if(J.ok){S(!0);const ye=await J.json();console.log("JWT AUTH SUCCESS:",ye),a(ye.username),m(ye.profile),_(ye.permissions),L(ye.email_verified===!0),console.log("PERMISSIONS:",ye.permissions)}else console.log("TOKEN INVALID"),localStorage.removeItem("access_token"),a(null),m(null),y(null),v(null),S(!1)}catch(J){console.log("JWT auth error (network issue):",J);const ye=localStorage.getItem("user");te&&ye&&(console.log("Using optimistic auth with cached user:",ye),a(ye),S(!0))}}finally{B.current&&(clearTimeout(B.current),B.current=null),j(!1)}};N.useEffect(()=>{Y()},[]);const $=te=>{a(te.username),y(te.access_token),v(te.refresh_token),_(te.permissions),console.log("PRE SAVE USERNAME:",te.username),localStorage.setItem("user",te.username),localStorage.setItem("access_token",te.access_token),localStorage.setItem("refresh_token",te.refresh_token)},re=async(te,J)=>{const ye=await fetch(window.server_url+"/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:te,password:J})});if(ye.ok){const _e=await ye.json();console.log("SIGNED UP, userData:",_e)}},G=async()=>{try{await fetch(window.server_url+"/auth/logout",{method:"POST",credentials:"include"})}catch(te){console.log("Logout request failed (session may already be cleared):",te)}localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),a(null),m(null),y(null),v(null),S(!1),_(null),L(!1)};return h.jsx(Wn.Provider,{value:{user:i,login:$,signup:re,logout:G,userProfile:u,checkAuth:Y,permissions:T,emailVerified:M,isAuthLoading:F,authLoadingMessage:z},children:t})};var Yd=function(t,i){return Yd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var m in u)Object.prototype.hasOwnProperty.call(u,m)&&(a[m]=u[m])},Yd(t,i)};function M2(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");Yd(t,i);function a(){this.constructor=t}t.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}var mr=function(){return mr=Object.assign||function(i){for(var a,u=1,m=arguments.length;u<m;u++){a=arguments[u];for(var x in a)Object.prototype.hasOwnProperty.call(a,x)&&(i[x]=a[x])}return i},mr.apply(this,arguments)};var bd,x1;function O2(){if(x1)return bd;x1=1;var t=!1,i,a,u,m,x,y,b,v,C,S,T,_,M,L,F;function j(){if(!t){t=!0;var V=navigator.userAgent,B=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(V),Y=/(Mac OS X)|(Windows)|(Linux)/.exec(V);if(_=/\b(iPhone|iP[ao]d)/.exec(V),M=/\b(iP[ao]d)/.exec(V),S=/Android/i.exec(V),L=/FBAN\/\w+;/i.exec(V),F=/Mobile/i.exec(V),T=!!/Win64/.exec(V),B){i=B[1]?parseFloat(B[1]):B[5]?parseFloat(B[5]):NaN,i&&document&&document.documentMode&&(i=document.documentMode);var $=/(?:Trident\/(\d+.\d+))/.exec(V);y=$?parseFloat($[1])+4:i,a=B[2]?parseFloat(B[2]):NaN,u=B[3]?parseFloat(B[3]):NaN,m=B[4]?parseFloat(B[4]):NaN,m?(B=/(?:Chrome\/(\d+\.\d+))/.exec(V),x=B&&B[1]?parseFloat(B[1]):NaN):x=NaN}else i=a=u=x=m=NaN;if(Y){if(Y[1]){var re=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(V);b=re?parseFloat(re[1].replace("_",".")):!0}else b=!1;v=!!Y[2],C=!!Y[3]}else b=v=C=!1}}var z={ie:function(){return j()||i},ieCompatibilityMode:function(){return j()||y>i},ie64:function(){return z.ie()&&T},firefox:function(){return j()||a},opera:function(){return j()||u},webkit:function(){return j()||m},safari:function(){return z.webkit()},chrome:function(){return j()||x},windows:function(){return j()||v},osx:function(){return j()||b},linux:function(){return j()||C},iphone:function(){return j()||_},mobile:function(){return j()||_||M||S||F},nativeApp:function(){return j()||L},android:function(){return j()||S},ipad:function(){return j()||M}};return bd=z,bd}var Ed,y1;function D2(){if(y1)return Ed;y1=1;var t=!!(typeof window<"u"&&window.document&&window.document.createElement),i={canUseDOM:t,canUseWorkers:typeof Worker<"u",canUseEventListeners:t&&!!(window.addEventListener||window.attachEvent),canUseViewport:t&&!!window.screen,isInWorker:!t};return Ed=i,Ed}var Sd,w1;function L2(){if(w1)return Sd;w1=1;var t=D2(),i;t.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function a(u,m){if(!t.canUseDOM||m&&!("addEventListener"in document))return!1;var x="on"+u,y=x in document;if(!y){var b=document.createElement("div");b.setAttribute(x,"return;"),y=typeof b[x]=="function"}return!y&&i&&u==="wheel"&&(y=document.implementation.hasFeature("Events.wheel","3.0")),y}return Sd=a,Sd}var Ad,v1;function j2(){if(v1)return Ad;v1=1;var t=O2(),i=L2(),a=10,u=40,m=800;function x(y){var b=0,v=0,C=0,S=0;return"detail"in y&&(v=y.detail),"wheelDelta"in y&&(v=-y.wheelDelta/120),"wheelDeltaY"in y&&(v=-y.wheelDeltaY/120),"wheelDeltaX"in y&&(b=-y.wheelDeltaX/120),"axis"in y&&y.axis===y.HORIZONTAL_AXIS&&(b=v,v=0),C=b*a,S=v*a,"deltaY"in y&&(S=y.deltaY),"deltaX"in y&&(C=y.deltaX),(C||S)&&y.deltaMode&&(y.deltaMode==1?(C*=u,S*=u):(C*=m,S*=m)),C&&!b&&(b=C<1?-1:1),S&&!v&&(v=S<1?-1:1),{spinX:b,spinY:v,pixelX:C,pixelY:S}}return x.getEventType=function(){return t.firefox()?"DOMMouseScroll":i("wheel")?"wheel":"mousewheel"},Ad=x,Ad}var Nd,C1;function B2(){return C1||(C1=1,Nd=j2()),Nd}var F2=B2();const V2=hp(F2);function U2(t,i,a,u,m,x){x===void 0&&(x=0);var y=Go(t,i,x),b=y.width,v=y.height,C=Math.min(b,a),S=Math.min(v,u);return C>S*m?{width:S*m,height:S}:{width:C,height:C/m}}function z2(t){return t.width>t.height?t.width/t.naturalWidth:t.height/t.naturalHeight}function Pa(t,i,a,u,m){m===void 0&&(m=0);var x=Go(i.width,i.height,m),y=x.width,b=x.height;return{x:b1(t.x,y,a.width,u),y:b1(t.y,b,a.height,u)}}function b1(t,i,a,u){var m=i*u/2-a/2;return Fc(t,-m,m)}function E1(t,i){return Math.sqrt(Math.pow(t.y-i.y,2)+Math.pow(t.x-i.x,2))}function S1(t,i){return Math.atan2(i.y-t.y,i.x-t.x)*180/Math.PI}function W2(t,i,a,u,m,x,y){x===void 0&&(x=0),y===void 0&&(y=!0);var b=y?H2:G2,v=Go(i.width,i.height,x),C=Go(i.naturalWidth,i.naturalHeight,x),S={x:b(100,((v.width-a.width/m)/2-t.x/m)/v.width*100),y:b(100,((v.height-a.height/m)/2-t.y/m)/v.height*100),width:b(100,a.width/v.width*100/m),height:b(100,a.height/v.height*100/m)},T=Math.round(b(C.width,S.width*C.width/100)),_=Math.round(b(C.height,S.height*C.height/100)),M=C.width>=C.height*u,L=M?{width:Math.round(_*u),height:_}:{width:T,height:Math.round(T/u)},F=mr(mr({},L),{x:Math.round(b(C.width-L.width,S.x*C.width/100)),y:Math.round(b(C.height-L.height,S.y*C.height/100))});return{croppedAreaPercentages:S,croppedAreaPixels:F}}function H2(t,i){return Math.min(t,Math.max(0,i))}function G2(t,i){return i}function X2(t,i,a,u,m,x){var y=Go(i.width,i.height,a),b=Fc(u.width/y.width*(100/t.width),m,x),v={x:b*y.width/2-u.width/2-y.width*b*(t.x/100),y:b*y.height/2-u.height/2-y.height*b*(t.y/100)};return{crop:v,zoom:b}}function Y2(t,i,a){var u=z2(i);return a.height>a.width?a.height/(t.height*u):a.width/(t.width*u)}function $2(t,i,a,u,m,x){a===void 0&&(a=0);var y=Go(i.naturalWidth,i.naturalHeight,a),b=Fc(Y2(t,i,u),m,x),v=u.height>u.width?u.height/t.height:u.width/t.width,C={x:((y.width-t.width)/2-t.x)*v,y:((y.height-t.height)/2-t.y)*v};return{crop:C,zoom:b}}function A1(t,i){return{x:(i.x+t.x)/2,y:(i.y+t.y)/2}}function Z2(t){return t*Math.PI/180}function Go(t,i,a){var u=Z2(a);return{width:Math.abs(Math.cos(u)*t)+Math.abs(Math.sin(u)*i),height:Math.abs(Math.sin(u)*t)+Math.abs(Math.cos(u)*i)}}function Fc(t,i,a){return Math.min(Math.max(t,i),a)}function uc(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return t.filter(function(a){return typeof a=="string"&&a.length>0}).join(" ").trim()}var K2=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,q2=1,Q2=3,J2=1,Vc=function(t){M2(i,t);function i(){var a=t!==null&&t.apply(this,arguments)||this;return a.imageRef=N.createRef(),a.videoRef=N.createRef(),a.containerPosition={x:0,y:0},a.containerRef=null,a.styleRef=null,a.containerRect=null,a.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},a.dragStartPosition={x:0,y:0},a.dragStartCrop={x:0,y:0},a.gestureZoomStart=0,a.gestureRotationStart=0,a.isTouching=!1,a.lastPinchDistance=0,a.lastPinchRotation=0,a.rafDragTimeout=null,a.rafPinchTimeout=null,a.wheelTimer=null,a.currentDoc=typeof document<"u"?document:null,a.currentWindow=typeof window<"u"?window:null,a.resizeObserver=null,a.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},a.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!a.containerRef)){var u=!0;a.resizeObserver=new window.ResizeObserver(function(m){if(u){u=!1;return}a.computeSizes()}),a.resizeObserver.observe(a.containerRef)}},a.preventZoomSafari=function(u){return u.preventDefault()},a.cleanEvents=function(){a.currentDoc&&(a.currentDoc.removeEventListener("mousemove",a.onMouseMove),a.currentDoc.removeEventListener("mouseup",a.onDragStopped),a.currentDoc.removeEventListener("touchmove",a.onTouchMove),a.currentDoc.removeEventListener("touchend",a.onDragStopped),a.currentDoc.removeEventListener("gesturemove",a.onGestureMove),a.currentDoc.removeEventListener("gestureend",a.onGestureEnd),a.currentDoc.removeEventListener("scroll",a.onScroll))},a.clearScrollEvent=function(){a.containerRef&&a.containerRef.removeEventListener("wheel",a.onWheel),a.wheelTimer&&clearTimeout(a.wheelTimer)},a.onMediaLoad=function(){var u=a.computeSizes();u&&(a.emitCropData(),a.setInitialCrop(u)),a.props.onMediaLoaded&&a.props.onMediaLoaded(a.mediaSize)},a.setInitialCrop=function(u){if(a.props.initialCroppedAreaPercentages){var m=X2(a.props.initialCroppedAreaPercentages,a.mediaSize,a.props.rotation,u,a.props.minZoom,a.props.maxZoom),x=m.crop,y=m.zoom;a.props.onCropChange(x),a.props.onZoomChange&&a.props.onZoomChange(y)}else if(a.props.initialCroppedAreaPixels){var b=$2(a.props.initialCroppedAreaPixels,a.mediaSize,a.props.rotation,u,a.props.minZoom,a.props.maxZoom),x=b.crop,y=b.zoom;a.props.onCropChange(x),a.props.onZoomChange&&a.props.onZoomChange(y)}},a.computeSizes=function(){var u,m,x,y,b,v,C=a.imageRef.current||a.videoRef.current;if(C&&a.containerRef){a.containerRect=a.containerRef.getBoundingClientRect(),a.saveContainerPosition();var S=a.containerRect.width/a.containerRect.height,T=((u=a.imageRef.current)===null||u===void 0?void 0:u.naturalWidth)||((m=a.videoRef.current)===null||m===void 0?void 0:m.videoWidth)||0,_=((x=a.imageRef.current)===null||x===void 0?void 0:x.naturalHeight)||((y=a.videoRef.current)===null||y===void 0?void 0:y.videoHeight)||0,M=C.offsetWidth<T||C.offsetHeight<_,L=T/_,F=void 0;if(M)switch(a.state.mediaObjectFit){default:case"contain":F=S>L?{width:a.containerRect.height*L,height:a.containerRect.height}:{width:a.containerRect.width,height:a.containerRect.width/L};break;case"horizontal-cover":F={width:a.containerRect.width,height:a.containerRect.width/L};break;case"vertical-cover":F={width:a.containerRect.height*L,height:a.containerRect.height};break}else F={width:C.offsetWidth,height:C.offsetHeight};a.mediaSize=mr(mr({},F),{naturalWidth:T,naturalHeight:_}),a.props.setMediaSize&&a.props.setMediaSize(a.mediaSize);var j=a.props.cropSize?a.props.cropSize:U2(a.mediaSize.width,a.mediaSize.height,a.containerRect.width,a.containerRect.height,a.props.aspect,a.props.rotation);return(((b=a.state.cropSize)===null||b===void 0?void 0:b.height)!==j.height||((v=a.state.cropSize)===null||v===void 0?void 0:v.width)!==j.width)&&a.props.onCropSizeChange&&a.props.onCropSizeChange(j),a.setState({cropSize:j},a.recomputeCropPosition),a.props.setCropSize&&a.props.setCropSize(j),j}},a.saveContainerPosition=function(){if(a.containerRef){var u=a.containerRef.getBoundingClientRect();a.containerPosition={x:u.left,y:u.top}}},a.onMouseDown=function(u){a.currentDoc&&(u.preventDefault(),a.currentDoc.addEventListener("mousemove",a.onMouseMove),a.currentDoc.addEventListener("mouseup",a.onDragStopped),a.saveContainerPosition(),a.onDragStart(i.getMousePoint(u)))},a.onMouseMove=function(u){return a.onDrag(i.getMousePoint(u))},a.onScroll=function(u){a.currentDoc&&(u.preventDefault(),a.saveContainerPosition())},a.onTouchStart=function(u){a.currentDoc&&(a.isTouching=!0,!(a.props.onTouchRequest&&!a.props.onTouchRequest(u))&&(a.currentDoc.addEventListener("touchmove",a.onTouchMove,{passive:!1}),a.currentDoc.addEventListener("touchend",a.onDragStopped),a.saveContainerPosition(),u.touches.length===2?a.onPinchStart(u):u.touches.length===1&&a.onDragStart(i.getTouchPoint(u.touches[0]))))},a.onTouchMove=function(u){u.preventDefault(),u.touches.length===2?a.onPinchMove(u):u.touches.length===1&&a.onDrag(i.getTouchPoint(u.touches[0]))},a.onGestureStart=function(u){a.currentDoc&&(u.preventDefault(),a.currentDoc.addEventListener("gesturechange",a.onGestureMove),a.currentDoc.addEventListener("gestureend",a.onGestureEnd),a.gestureZoomStart=a.props.zoom,a.gestureRotationStart=a.props.rotation)},a.onGestureMove=function(u){if(u.preventDefault(),!a.isTouching){var m=i.getMousePoint(u),x=a.gestureZoomStart-1+u.scale;if(a.setNewZoom(x,m,{shouldUpdatePosition:!0}),a.props.onRotationChange){var y=a.gestureRotationStart+u.rotation;a.props.onRotationChange(y)}}},a.onGestureEnd=function(u){a.cleanEvents()},a.onDragStart=function(u){var m,x,y=u.x,b=u.y;a.dragStartPosition={x:y,y:b},a.dragStartCrop=mr({},a.props.crop),(x=(m=a.props).onInteractionStart)===null||x===void 0||x.call(m)},a.onDrag=function(u){var m=u.x,x=u.y;a.currentWindow&&(a.rafDragTimeout&&a.currentWindow.cancelAnimationFrame(a.rafDragTimeout),a.rafDragTimeout=a.currentWindow.requestAnimationFrame(function(){if(a.state.cropSize&&!(m===void 0||x===void 0)){var y=m-a.dragStartPosition.x,b=x-a.dragStartPosition.y,v={x:a.dragStartCrop.x+y,y:a.dragStartCrop.y+b},C=a.props.restrictPosition?Pa(v,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):v;a.props.onCropChange(C)}}))},a.onDragStopped=function(){var u,m;a.isTouching=!1,a.cleanEvents(),a.emitCropData(),(m=(u=a.props).onInteractionEnd)===null||m===void 0||m.call(u)},a.onWheel=function(u){if(a.currentWindow&&!(a.props.onWheelRequest&&!a.props.onWheelRequest(u))){u.preventDefault();var m=i.getMousePoint(u),x=V2(u).pixelY,y=a.props.zoom-x*a.props.zoomSpeed/200;a.setNewZoom(y,m,{shouldUpdatePosition:!0}),a.state.hasWheelJustStarted||a.setState({hasWheelJustStarted:!0},function(){var b,v;return(v=(b=a.props).onInteractionStart)===null||v===void 0?void 0:v.call(b)}),a.wheelTimer&&clearTimeout(a.wheelTimer),a.wheelTimer=a.currentWindow.setTimeout(function(){return a.setState({hasWheelJustStarted:!1},function(){var b,v;return(v=(b=a.props).onInteractionEnd)===null||v===void 0?void 0:v.call(b)})},250)}},a.getPointOnContainer=function(u,m){var x=u.x,y=u.y;if(!a.containerRect)throw new Error("The Cropper is not mounted");return{x:a.containerRect.width/2-(x-m.x),y:a.containerRect.height/2-(y-m.y)}},a.getPointOnMedia=function(u){var m=u.x,x=u.y,y=a.props,b=y.crop,v=y.zoom;return{x:(m+b.x)/v,y:(x+b.y)/v}},a.setNewZoom=function(u,m,x){var y=x===void 0?{}:x,b=y.shouldUpdatePosition,v=b===void 0?!0:b;if(!(!a.state.cropSize||!a.props.onZoomChange)){var C=Fc(u,a.props.minZoom,a.props.maxZoom);if(v){var S=a.getPointOnContainer(m,a.containerPosition),T=a.getPointOnMedia(S),_={x:T.x*C-S.x,y:T.y*C-S.y},M=a.props.restrictPosition?Pa(_,a.mediaSize,a.state.cropSize,C,a.props.rotation):_;a.props.onCropChange(M)}a.props.onZoomChange(C)}},a.getCropData=function(){if(!a.state.cropSize)return null;var u=a.props.restrictPosition?Pa(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;return W2(u,a.mediaSize,a.state.cropSize,a.getAspect(),a.props.zoom,a.props.rotation,a.props.restrictPosition)},a.emitCropData=function(){var u=a.getCropData();if(u){var m=u.croppedAreaPercentages,x=u.croppedAreaPixels;a.props.onCropComplete&&a.props.onCropComplete(m,x),a.props.onCropAreaChange&&a.props.onCropAreaChange(m,x)}},a.emitCropAreaChange=function(){var u=a.getCropData();if(u){var m=u.croppedAreaPercentages,x=u.croppedAreaPixels;a.props.onCropAreaChange&&a.props.onCropAreaChange(m,x)}},a.recomputeCropPosition=function(){if(a.state.cropSize){var u=a.props.restrictPosition?Pa(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;a.props.onCropChange(u),a.emitCropData()}},a.onKeyDown=function(u){var m=a.props,x=m.crop,y=m.onCropChange,b=m.keyboardStep,v=m.zoom,C=m.rotation,S=b;if(a.state.cropSize){u.shiftKey&&(S*=.2);var T=mr({},x);switch(u.key){case"ArrowUp":T.y-=S,u.preventDefault();break;case"ArrowDown":T.y+=S,u.preventDefault();break;case"ArrowLeft":T.x-=S,u.preventDefault();break;case"ArrowRight":T.x+=S,u.preventDefault();break;default:return}a.props.restrictPosition&&(T=Pa(T,a.mediaSize,a.state.cropSize,v,C)),y(T)}},a}return i.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=K2,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef))},i.prototype.componentWillUnmount=function(){var a,u;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(a=this.resizeObserver)===null||a===void 0||a.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((u=this.styleRef.parentNode)===null||u===void 0||u.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},i.prototype.componentDidUpdate=function(a){var u,m,x,y,b,v,C,S,T;a.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):a.aspect!==this.props.aspect?this.computeSizes():a.objectFit!==this.props.objectFit?this.computeSizes():a.zoom!==this.props.zoom?this.recomputeCropPosition():((u=a.cropSize)===null||u===void 0?void 0:u.height)!==((m=this.props.cropSize)===null||m===void 0?void 0:m.height)||((x=a.cropSize)===null||x===void 0?void 0:x.width)!==((y=this.props.cropSize)===null||y===void 0?void 0:y.width)?this.computeSizes():(((b=a.crop)===null||b===void 0?void 0:b.x)!==((v=this.props.crop)===null||v===void 0?void 0:v.x)||((C=a.crop)===null||C===void 0?void 0:C.y)!==((S=this.props.crop)===null||S===void 0?void 0:S.y))&&this.emitCropAreaChange(),a.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),a.video!==this.props.video&&((T=this.videoRef.current)===null||T===void 0||T.load());var _=this.getObjectFit();_!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:_},this.computeSizes)},i.prototype.getAspect=function(){var a=this.props,u=a.cropSize,m=a.aspect;return u?u.width/u.height:m},i.prototype.getObjectFit=function(){var a,u,m,x;if(this.props.objectFit==="cover"){var y=this.imageRef.current||this.videoRef.current;if(y&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var b=this.containerRect.width/this.containerRect.height,v=((a=this.imageRef.current)===null||a===void 0?void 0:a.naturalWidth)||((u=this.videoRef.current)===null||u===void 0?void 0:u.videoWidth)||0,C=((m=this.imageRef.current)===null||m===void 0?void 0:m.naturalHeight)||((x=this.videoRef.current)===null||x===void 0?void 0:x.videoHeight)||0,S=v/C;return S<b?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},i.prototype.onPinchStart=function(a){var u=i.getTouchPoint(a.touches[0]),m=i.getTouchPoint(a.touches[1]);this.lastPinchDistance=E1(u,m),this.lastPinchRotation=S1(u,m),this.onDragStart(A1(u,m))},i.prototype.onPinchMove=function(a){var u=this;if(!(!this.currentDoc||!this.currentWindow)){var m=i.getTouchPoint(a.touches[0]),x=i.getTouchPoint(a.touches[1]),y=A1(m,x);this.onDrag(y),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var b=E1(m,x),v=u.props.zoom*(b/u.lastPinchDistance);u.setNewZoom(v,y,{shouldUpdatePosition:!1}),u.lastPinchDistance=b;var C=S1(m,x),S=u.props.rotation+(C-u.lastPinchRotation);u.props.onRotationChange&&u.props.onRotationChange(S),u.lastPinchRotation=C})}},i.prototype.render=function(){var a=this,u,m=this.props,x=m.image,y=m.video,b=m.mediaProps,v=m.transform,C=m.crop,S=C.x,T=C.y,_=m.rotation,M=m.zoom,L=m.cropShape,F=m.showGrid,j=m.style,z=j.containerStyle,V=j.cropAreaStyle,B=j.mediaStyle,Y=m.classes,$=Y.containerClassName,re=Y.cropAreaClassName,G=Y.mediaClassName,te=(u=this.state.mediaObjectFit)!==null&&u!==void 0?u:this.getObjectFit();return N.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(ye){return a.containerRef=ye},"data-testid":"container",style:z,className:uc("reactEasyCrop_Container",$)},x?N.createElement("img",mr({alt:"",className:uc("reactEasyCrop_Image",te==="contain"&&"reactEasyCrop_Contain",te==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",te==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",G)},b,{src:x,ref:this.imageRef,style:mr(mr({},B),{transform:v||"translate(".concat(S,"px, ").concat(T,"px) rotate(").concat(_,"deg) scale(").concat(M,")")}),onLoad:this.onMediaLoad})):y&&N.createElement("video",mr({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:uc("reactEasyCrop_Video",te==="contain"&&"reactEasyCrop_Contain",te==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",te==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",G)},b,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:mr(mr({},B),{transform:v||"translate(".concat(S,"px, ").concat(T,"px) rotate(").concat(_,"deg) scale(").concat(M,")")}),controls:!1}),(Array.isArray(y)?y:[{src:y}]).map(function(J){return N.createElement("source",mr({key:J.src},J))})),this.state.cropSize&&N.createElement("div",{style:mr(mr({},V),{width:this.state.cropSize.width,height:this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,"data-testid":"cropper",className:uc("reactEasyCrop_CropArea",L==="round"&&"reactEasyCrop_CropAreaRound",F&&"reactEasyCrop_CropAreaGrid",re)}))},i.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:Q2,minZoom:q2,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:J2},i.getMousePoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},i.getTouchPoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},i}(N.Component),Ma={},N1;function ey(){return N1||(N1=1,Ma.createCanvas=function(t,i){return Object.assign(document.createElement("canvas"),{width:t,height:i})},Ma.createImageData=function(t,i,a){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(t);case 2:return new ImageData(t,i);default:return new ImageData(t,i,a)}},Ma.loadImage=function(t,i){return new Promise(function(a,u){const m=Object.assign(document.createElement("img"),i);function x(){m.onload=null,m.onerror=null}m.onload=function(){x(),a(m)},m.onerror=function(){x(),u(new Error('Failed to load the image "'+t+'"'))},m.src=t})}),Ma}ey();async function Uc(t,i){return console.log("Image source being cropped:",t),new Promise((a,u)=>{const m=new Image;m.onload=()=>{const x=document.createElement("canvas"),y=x.getContext("2d");x.width=i.width,x.height=i.height,y.drawImage(m,i.x,i.y,i.width,i.height,0,0,i.width,i.height);try{const b=x.toDataURL("image/jpeg");a(b)}catch{u(new Error("Error converting canvas to base64"))}},m.onerror=x=>u(new Error(`Image load error: ${x.message}`)),m.src=t})}async function Ct(t,i={}){const a=localStorage.getItem("access_token"),u={...i,credentials:"include",headers:{...a&&{Authorization:`Bearer ${a}`},...i.headers}};return fetch(`${window.server_url}${t}`,u)}const ty=({onSubmit:t,onClose:i,existingProfile:a})=>{const{user:u,userProfile:m,checkAuth:x}=N.useContext(Wn),[y,b]=N.useState({name:(m==null?void 0:m.name)||"",image:null,imagePreview:m!=null&&m.image_data?`data:image/jpeg;base64,${m.image_data}`:"/assets/fakeprofile.png",croppedImage:null}),[v,C]=N.useState({x:0,y:0}),[S,T]=N.useState(1),[_,M]=N.useState(null),[L,F]=N.useState(!1),[j,z]=N.useState(!1),V=$=>{const re=$.target.files[0];if(re){const G=new FileReader;G.onload=te=>{b(J=>({...J,image:re,imagePreview:te.target.result})),F(!0)},G.readAsDataURL(re)}},B=($,re)=>{console.log("Cropped Area Pixels:",re),M(re)};async function Y($){$.preventDefault();let re;if(y.croppedImage)re=y.croppedImage.split(",")[1];else if(y.image instanceof File){const te=await y.image.arrayBuffer();re=btoa(new Uint8Array(te).reduce((J,ye)=>J+String.fromCharCode(ye),""))}else if(m!=null&&m.image_data)re=m.image_data;else{console.error("No valid image provided");return}const G={name:y.name,image_data:re};console.log("Image data (first 100 chars):",re.substring(0,100));try{const te=await Ct("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)});if(!te.ok)throw new Error("Failed to update profile");const J=await te.json();await x(),console.log("Profile updated successfully:",J),i()}catch(te){console.error("Error updating profile:",te)}}return h.jsx("div",{className:"profile-creation-overlay",style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:h.jsxs("div",{className:"profile-creation-modal",style:{width:"70%",maxWidth:"500px",backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",padding:"2rem",boxShadow:"0 10px 30px rgba(20,77,255,0.15)",position:"relative",border:"1px solid rgba(20,77,255,0.1)"},children:[h.jsx("button",{onClick:i,style:{position:"absolute",top:"1.2rem",right:"1.2rem",background:"none",border:"none",fontSize:"1.8rem",cursor:"pointer",color:"#144dff",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.1)"}},children:""}),h.jsx("h2",{style:{fontSize:"clamp(1.8rem, 6vw, 2.5rem)",color:"#144dff",textAlign:"center",marginBottom:"2rem",fontWeight:"600"},children:"Your Profile"}),h.jsxs("form",{onSubmit:Y,style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[h.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem"},children:[h.jsx("label",{style:{color:"#144dff",fontWeight:"500",fontSize:"1rem"},children:"Your Name"}),h.jsx("input",{type:"text",value:y.name,onChange:$=>b({...y,name:$.target.value}),style:{width:"100%",padding:"12px",borderRadius:"12px",border:"2px solid #e0e0e0",fontSize:"0.9rem",transition:"all 0.3s ease",backgroundColor:"rgba(255,255,255,0.9)","&:focus":{borderColor:"#144dff",outline:"none",boxShadow:"0 0 0 3px rgba(20,77,255,0.1)"}}})]}),!L&&h.jsx("div",{style:{width:"250px",height:"250px",margin:"0 auto",borderRadius:"20%",overflow:"hidden",border:"7px solid #144dff",boxShadow:"0 8px 25px rgba(20,77,255,0.2)",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.02)"}},children:h.jsx("img",{src:y.croppedImage?y.croppedImage:y.imagePreview?y.imagePreview:m!=null&&m.image_data?`data:image/jpeg;base64,${m.image_data}`:"/assets/fakeprofile.png",alt:"Profile preview",style:{width:"100%",height:"100%",objectFit:"cover"}})}),h.jsxs("div",{style:{textAlign:"center"},children:[h.jsx("input",{type:"file",id:"image-upload",accept:"image/*",onChange:V,style:{display:"none"}}),h.jsx("label",{htmlFor:"image-upload",style:{padding:"0.8rem 1.2rem",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",borderRadius:"25px",cursor:"pointer",display:"inline-block",fontSize:"0.9rem",fontWeight:"600",boxShadow:"0 4px 15px rgba(20,77,255,0.2)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Upload New Image"})]}),L&&h.jsxs("div",{style:{width:"100%",maxWidth:"300px",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",gap:"1.2rem"},children:[h.jsx("div",{style:{position:"relative",width:"250px",height:"250px",borderRadius:"20%",overflow:"hidden",border:"7px solid #144dff",boxShadow:"0 8px 25px rgba(20,77,255,0.2)"},children:h.jsx(Vc,{image:y.imagePreview,crop:v,zoom:S,aspect:1,onCropComplete:B,onCropChange:C,onZoomChange:T})}),h.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[h.jsx("button",{type:"button",onClick:()=>{F(!1),y.croppedImage||b($=>({...$,imagePreview:null}))},style:{padding:"0.8rem 1.2rem",borderRadius:"25px",border:"2px solid #144dff",background:"white",color:"#144dff",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease","&:hover":{background:"rgba(20,77,255,0.1)"}},children:"Cancel"}),h.jsx("button",{type:"button",onClick:async()=>{try{const $=await Uc(y.imagePreview,_);b(re=>({...re,croppedImage:$,imagePreview:$})),F(!1),z(!0),setTimeout(()=>z(!1),1e4)}catch($){console.error("Error cropping image:",$)}},className:`save-profile-button ${j?"glow-bounce":""}`,style:{padding:"0.8rem 1.2rem",borderRadius:"25px",border:"none",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(20,77,255,0.2)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Save Cropped Image"})]})]}),h.jsx("button",{type:"submit",className:`save-profile-button ${j?"glow-bounce":""}`,style:{padding:"1rem",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",border:"none",borderRadius:"25px",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",marginTop:"1rem",boxShadow:"0 4px 15px rgba(20,77,255,0.2)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Save Profile"})]})]})})};var Oa={},T1;function ny(){if(T1)return Oa;T1=1,Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.parse=y,Oa.serialize=C;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,i=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,u=/^[\u0020-\u003A\u003D-\u007E]*$/,m=Object.prototype.toString,x=(()=>{const _=function(){};return _.prototype=Object.create(null),_})();function y(_,M){const L=new x,F=_.length;if(F<2)return L;const j=(M==null?void 0:M.decode)||S;let z=0;do{const V=_.indexOf("=",z);if(V===-1)break;const B=_.indexOf(";",z),Y=B===-1?F:B;if(V>Y){z=_.lastIndexOf(";",V-1)+1;continue}const $=b(_,z,V),re=v(_,V,$),G=_.slice($,re);if(L[G]===void 0){let te=b(_,V+1,Y),J=v(_,Y,te);const ye=j(_.slice(te,J));L[G]=ye}z=Y+1}while(z<F);return L}function b(_,M,L){do{const F=_.charCodeAt(M);if(F!==32&&F!==9)return M}while(++M<L);return L}function v(_,M,L){for(;M>L;){const F=_.charCodeAt(--M);if(F!==32&&F!==9)return M+1}return L}function C(_,M,L){const F=(L==null?void 0:L.encode)||encodeURIComponent;if(!t.test(_))throw new TypeError(`argument name is invalid: ${_}`);const j=F(M);if(!i.test(j))throw new TypeError(`argument val is invalid: ${M}`);let z=_+"="+j;if(!L)return z;if(L.maxAge!==void 0){if(!Number.isInteger(L.maxAge))throw new TypeError(`option maxAge is invalid: ${L.maxAge}`);z+="; Max-Age="+L.maxAge}if(L.domain){if(!a.test(L.domain))throw new TypeError(`option domain is invalid: ${L.domain}`);z+="; Domain="+L.domain}if(L.path){if(!u.test(L.path))throw new TypeError(`option path is invalid: ${L.path}`);z+="; Path="+L.path}if(L.expires){if(!T(L.expires)||!Number.isFinite(L.expires.valueOf()))throw new TypeError(`option expires is invalid: ${L.expires}`);z+="; Expires="+L.expires.toUTCString()}if(L.httpOnly&&(z+="; HttpOnly"),L.secure&&(z+="; Secure"),L.partitioned&&(z+="; Partitioned"),L.priority)switch(typeof L.priority=="string"?L.priority.toLowerCase():void 0){case"low":z+="; Priority=Low";break;case"medium":z+="; Priority=Medium";break;case"high":z+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${L.priority}`)}if(L.sameSite)switch(typeof L.sameSite=="string"?L.sameSite.toLowerCase():L.sameSite){case!0:case"strict":z+="; SameSite=Strict";break;case"lax":z+="; SameSite=Lax";break;case"none":z+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${L.sameSite}`)}return z}function S(_){if(_.indexOf("%")===-1)return _;try{return decodeURIComponent(_)}catch{return _}}function T(_){return m.call(_)==="[object Date]"}return Oa}ny();/**
 * react-router v7.0.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var I1="popstate";function ry(t={}){function i(u,m){let{pathname:x,search:y,hash:b}=u.location;return $d("",{pathname:x,search:y,hash:b},m.state&&m.state.usr||null,m.state&&m.state.key||"default")}function a(u,m){return typeof m=="string"?m:Ya(m)}return sy(i,a,null,t)}function An(t,i){if(t===!1||t===null||typeof t>"u")throw new Error(i)}function xi(t,i){if(!t){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function iy(){return Math.random().toString(36).substring(2,10)}function _1(t,i){return{usr:t.state,key:t.key,idx:i}}function $d(t,i,a=null,u){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof i=="string"?$o(i):i,state:a,key:i&&i.key||u||iy()}}function Ya({pathname:t="/",search:i="",hash:a=""}){return i&&i!=="?"&&(t+=i.charAt(0)==="?"?i:"?"+i),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function $o(t){let i={};if(t){let a=t.indexOf("#");a>=0&&(i.hash=t.substring(a),t=t.substring(0,a));let u=t.indexOf("?");u>=0&&(i.search=t.substring(u),t=t.substring(0,u)),t&&(i.pathname=t)}return i}function sy(t,i,a,u={}){let{window:m=document.defaultView,v5Compat:x=!1}=u,y=m.history,b="POP",v=null,C=S();C==null&&(C=0,y.replaceState({...y.state,idx:C},""));function S(){return(y.state||{idx:null}).idx}function T(){b="POP";let j=S(),z=j==null?null:j-C;C=j,v&&v({action:b,location:F.location,delta:z})}function _(j,z){b="PUSH";let V=$d(F.location,j,z);C=S()+1;let B=_1(V,C),Y=F.createHref(V);try{y.pushState(B,"",Y)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;m.location.assign(Y)}x&&v&&v({action:b,location:F.location,delta:1})}function M(j,z){b="REPLACE";let V=$d(F.location,j,z);C=S();let B=_1(V,C),Y=F.createHref(V);y.replaceState(B,"",Y),x&&v&&v({action:b,location:F.location,delta:0})}function L(j){let z=m.location.origin!=="null"?m.location.origin:m.location.href,V=typeof j=="string"?j:Ya(j);return V=V.replace(/ $/,"%20"),An(z,`No window.location.(origin|href) available to create URL for href: ${V}`),new URL(V,z)}let F={get action(){return b},get location(){return t(m,y)},listen(j){if(v)throw new Error("A history only accepts one active listener");return m.addEventListener(I1,T),v=j,()=>{m.removeEventListener(I1,T),v=null}},createHref(j){return i(m,j)},createURL:L,encodeLocation(j){let z=L(j);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:_,replace:M,go(j){return y.go(j)}};return F}function mp(t,i,a="/"){return oy(t,i,a,!1)}function oy(t,i,a,u){let m=typeof i=="string"?$o(i):i,x=As(m.pathname||"/",a);if(x==null)return null;let y=pp(t);ay(y);let b=null;for(let v=0;b==null&&v<y.length;++v){let C=yy(x);b=gy(y[v],C,u)}return b}function pp(t,i=[],a=[],u=""){let m=(x,y,b)=>{let v={relativePath:b===void 0?x.path||"":b,caseSensitive:x.caseSensitive===!0,childrenIndex:y,route:x};v.relativePath.startsWith("/")&&(An(v.relativePath.startsWith(u),`Absolute route path "${v.relativePath}" nested under path "${u}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(u.length));let C=Yi([u,v.relativePath]),S=a.concat(v);x.children&&x.children.length>0&&(An(x.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${C}".`),pp(x.children,i,S,C)),!(x.path==null&&!x.index)&&i.push({path:C,score:my(C,x.index),routesMeta:S})};return t.forEach((x,y)=>{var b;if(x.path===""||!((b=x.path)!=null&&b.includes("?")))m(x,y);else for(let v of gp(x.path))m(x,y,v)}),i}function gp(t){let i=t.split("/");if(i.length===0)return[];let[a,...u]=i,m=a.endsWith("?"),x=a.replace(/\?$/,"");if(u.length===0)return m?[x,""]:[x];let y=gp(u.join("/")),b=[];return b.push(...y.map(v=>v===""?x:[x,v].join("/"))),m&&b.push(...y),b.map(v=>t.startsWith("/")&&v===""?"/":v)}function ay(t){t.sort((i,a)=>i.score!==a.score?a.score-i.score:py(i.routesMeta.map(u=>u.childrenIndex),a.routesMeta.map(u=>u.childrenIndex)))}var ly=/^:[\w-]+$/,cy=3,uy=2,dy=1,fy=10,hy=-2,R1=t=>t==="*";function my(t,i){let a=t.split("/"),u=a.length;return a.some(R1)&&(u+=hy),i&&(u+=uy),a.filter(m=>!R1(m)).reduce((m,x)=>m+(ly.test(x)?cy:x===""?dy:fy),u)}function py(t,i){return t.length===i.length&&t.slice(0,-1).every((u,m)=>u===i[m])?t[t.length-1]-i[i.length-1]:0}function gy(t,i,a=!1){let{routesMeta:u}=t,m={},x="/",y=[];for(let b=0;b<u.length;++b){let v=u[b],C=b===u.length-1,S=x==="/"?i:i.slice(x.length)||"/",T=Tc({path:v.relativePath,caseSensitive:v.caseSensitive,end:C},S),_=v.route;if(!T&&C&&a&&!u[u.length-1].route.index&&(T=Tc({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},S)),!T)return null;Object.assign(m,T.params),y.push({params:m,pathname:Yi([x,T.pathname]),pathnameBase:by(Yi([x,T.pathnameBase])),route:_}),T.pathnameBase!=="/"&&(x=Yi([x,T.pathnameBase]))}return y}function Tc(t,i){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,u]=xy(t.path,t.caseSensitive,t.end),m=i.match(a);if(!m)return null;let x=m[0],y=x.replace(/(.)\/+$/,"$1"),b=m.slice(1);return{params:u.reduce((C,{paramName:S,isOptional:T},_)=>{if(S==="*"){let L=b[_]||"";y=x.slice(0,x.length-L.length).replace(/(.)\/+$/,"$1")}const M=b[_];return T&&!M?C[S]=void 0:C[S]=(M||"").replace(/%2F/g,"/"),C},{}),pathname:x,pathnameBase:y,pattern:t}}function xy(t,i=!1,a=!0){xi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let u=[],m="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,b,v)=>(u.push({paramName:b,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(u.push({paramName:"*"}),m+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?m+="\\/*$":t!==""&&t!=="/"&&(m+="(?:(?=\\/|$))"),[new RegExp(m,i?void 0:"i"),u]}function yy(t){try{return t.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return xi(!1,`The URL path "${t}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${i}).`),t}}function As(t,i){if(i==="/")return t;if(!t.toLowerCase().startsWith(i.toLowerCase()))return null;let a=i.endsWith("/")?i.length-1:i.length,u=t.charAt(a);return u&&u!=="/"?null:t.slice(a)||"/"}function wy(t,i="/"){let{pathname:a,search:u="",hash:m=""}=typeof t=="string"?$o(t):t;return{pathname:a?a.startsWith("/")?a:vy(a,i):i,search:Ey(u),hash:Sy(m)}}function vy(t,i){let a=i.replace(/\/+$/,"").split("/");return t.split("/").forEach(m=>{m===".."?a.length>1&&a.pop():m!=="."&&a.push(m)}),a.length>1?a.join("/"):"/"}function Td(t,i,a,u){return`Cannot include a '${t}' character in a manually specified \`to.${i}\` field [${JSON.stringify(u)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Cy(t){return t.filter((i,a)=>a===0||i.route.path&&i.route.path.length>0)}function xp(t){let i=Cy(t);return i.map((a,u)=>u===i.length-1?a.pathname:a.pathnameBase)}function yp(t,i,a,u=!1){let m;typeof t=="string"?m=$o(t):(m={...t},An(!m.pathname||!m.pathname.includes("?"),Td("?","pathname","search",m)),An(!m.pathname||!m.pathname.includes("#"),Td("#","pathname","hash",m)),An(!m.search||!m.search.includes("#"),Td("#","search","hash",m)));let x=t===""||m.pathname==="",y=x?"/":m.pathname,b;if(y==null)b=a;else{let T=i.length-1;if(!u&&y.startsWith("..")){let _=y.split("/");for(;_[0]==="..";)_.shift(),T-=1;m.pathname=_.join("/")}b=T>=0?i[T]:"/"}let v=wy(m,b),C=y&&y!=="/"&&y.endsWith("/"),S=(x||y===".")&&a.endsWith("/");return!v.pathname.endsWith("/")&&(C||S)&&(v.pathname+="/"),v}var Yi=t=>t.join("/").replace(/\/\/+/g,"/"),by=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Ey=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Sy=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Ay(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var wp=["POST","PUT","PATCH","DELETE"];new Set(wp);var Ny=["GET",...wp];new Set(Ny);var Zo=N.createContext(null);Zo.displayName="DataRouter";var zc=N.createContext(null);zc.displayName="DataRouterState";var vp=N.createContext({isTransitioning:!1});vp.displayName="ViewTransition";var Ty=N.createContext(new Map);Ty.displayName="Fetchers";var Iy=N.createContext(null);Iy.displayName="Await";var _i=N.createContext(null);_i.displayName="Navigation";var el=N.createContext(null);el.displayName="Location";var Ri=N.createContext({outlet:null,matches:[],isDataRoute:!1});Ri.displayName="Route";var Tf=N.createContext(null);Tf.displayName="RouteError";function _y(t,{relative:i}={}){An(tl(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:u}=N.useContext(_i),{hash:m,pathname:x,search:y}=nl(t,{relative:i}),b=x;return a!=="/"&&(b=x==="/"?a:Yi([a,x])),u.createHref({pathname:b,search:y,hash:m})}function tl(){return N.useContext(el)!=null}function Vr(){return An(tl(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(el).location}var Cp="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bp(t){N.useContext(_i).static||N.useLayoutEffect(t)}function Bn(){let{isDataRoute:t}=N.useContext(Ri);return t?Wy():Ry()}function Ry(){An(tl(),"useNavigate() may be used only in the context of a <Router> component.");let t=N.useContext(Zo),{basename:i,navigator:a}=N.useContext(_i),{matches:u}=N.useContext(Ri),{pathname:m}=Vr(),x=JSON.stringify(xp(u)),y=N.useRef(!1);return bp(()=>{y.current=!0}),N.useCallback((v,C={})=>{if(xi(y.current,Cp),!y.current)return;if(typeof v=="number"){a.go(v);return}let S=yp(v,JSON.parse(x),m,C.relative==="path");t==null&&i!=="/"&&(S.pathname=S.pathname==="/"?i:Yi([i,S.pathname])),(C.replace?a.replace:a.push)(S,C.state,C)},[i,a,x,m,t])}N.createContext(null);function ky(){let{matches:t}=N.useContext(Ri),i=t[t.length-1];return i?i.params:{}}function nl(t,{relative:i}={}){let{matches:a}=N.useContext(Ri),{pathname:u}=Vr(),m=JSON.stringify(xp(a));return N.useMemo(()=>yp(t,JSON.parse(m),u,i==="path"),[t,m,u,i])}function Py(t,i){return Ep(t,i)}function Ep(t,i,a,u){var z;An(tl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:m}=N.useContext(_i),{matches:x}=N.useContext(Ri),y=x[x.length-1],b=y?y.params:{},v=y?y.pathname:"/",C=y?y.pathnameBase:"/",S=y&&y.route;{let V=S&&S.path||"";Sp(v,!S||V.endsWith("*")||V.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${v}" (under <Route path="${V}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${V}"> to <Route path="${V==="/"?"*":`${V}/*`}">.`)}let T=Vr(),_;if(i){let V=typeof i=="string"?$o(i):i;An(C==="/"||((z=V.pathname)==null?void 0:z.startsWith(C)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${C}" but pathname "${V.pathname}" was given in the \`location\` prop.`),_=V}else _=T;let M=_.pathname||"/",L=M;if(C!=="/"){let V=C.replace(/^\//,"").split("/");L="/"+M.replace(/^\//,"").split("/").slice(V.length).join("/")}let F=mp(t,{pathname:L});xi(S||F!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),xi(F==null||F[F.length-1].route.element!==void 0||F[F.length-1].route.Component!==void 0||F[F.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=jy(F&&F.map(V=>Object.assign({},V,{params:Object.assign({},b,V.params),pathname:Yi([C,m.encodeLocation?m.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?C:Yi([C,m.encodeLocation?m.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),x,a,u);return i&&j?N.createElement(el.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},j):j}function My(){let t=zy(),i=Ay(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,u="rgba(200,200,200, 0.5)",m={padding:"0.5rem",backgroundColor:u},x={padding:"2px 4px",backgroundColor:u},y=null;return console.error("Error handled by React Router default ErrorBoundary:",t),y=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:x},"ErrorBoundary")," or"," ",N.createElement("code",{style:x},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},i),a?N.createElement("pre",{style:m},a):null,y)}var Oy=N.createElement(My,null),Dy=class extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,i){return i.location!==t.location||i.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:i.error,location:i.location,revalidation:t.revalidation||i.revalidation}}componentDidCatch(t,i){console.error("React Router caught the following error during render",t,i)}render(){return this.state.error!==void 0?N.createElement(Ri.Provider,{value:this.props.routeContext},N.createElement(Tf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ly({routeContext:t,match:i,children:a}){let u=N.useContext(Zo);return u&&u.static&&u.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=i.route.id),N.createElement(Ri.Provider,{value:t},a)}function jy(t,i=[],a=null,u=null){if(t==null){if(!a)return null;if(a.errors)t=a.matches;else if(i.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let m=t,x=a==null?void 0:a.errors;if(x!=null){let v=m.findIndex(C=>C.route.id&&(x==null?void 0:x[C.route.id])!==void 0);An(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(x).join(",")}`),m=m.slice(0,Math.min(m.length,v+1))}let y=!1,b=-1;if(a)for(let v=0;v<m.length;v++){let C=m[v];if((C.route.HydrateFallback||C.route.hydrateFallbackElement)&&(b=v),C.route.id){let{loaderData:S,errors:T}=a,_=C.route.loader&&!S.hasOwnProperty(C.route.id)&&(!T||T[C.route.id]===void 0);if(C.route.lazy||_){y=!0,b>=0?m=m.slice(0,b+1):m=[m[0]];break}}}return m.reduceRight((v,C,S)=>{let T,_=!1,M=null,L=null;a&&(T=x&&C.route.id?x[C.route.id]:void 0,M=C.route.errorElement||Oy,y&&(b<0&&S===0?(Sp("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,L=null):b===S&&(_=!0,L=C.route.hydrateFallbackElement||null)));let F=i.concat(m.slice(0,S+1)),j=()=>{let z;return T?z=M:_?z=L:C.route.Component?z=N.createElement(C.route.Component,null):C.route.element?z=C.route.element:z=v,N.createElement(Ly,{match:C,routeContext:{outlet:v,matches:F,isDataRoute:a!=null},children:z})};return a&&(C.route.ErrorBoundary||C.route.errorElement||S===0)?N.createElement(Dy,{location:a.location,revalidation:a.revalidation,component:M,error:T,children:j(),routeContext:{outlet:null,matches:F,isDataRoute:!0}}):j()},null)}function If(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function By(t){let i=N.useContext(Zo);return An(i,If(t)),i}function Fy(t){let i=N.useContext(zc);return An(i,If(t)),i}function Vy(t){let i=N.useContext(Ri);return An(i,If(t)),i}function _f(t){let i=Vy(t),a=i.matches[i.matches.length-1];return An(a.route.id,`${t} can only be used on routes that contain a unique "id"`),a.route.id}function Uy(){return _f("useRouteId")}function zy(){var u;let t=N.useContext(Tf),i=Fy("useRouteError"),a=_f("useRouteError");return t!==void 0?t:(u=i.errors)==null?void 0:u[a]}function Wy(){let{router:t}=By("useNavigate"),i=_f("useNavigate"),a=N.useRef(!1);return bp(()=>{a.current=!0}),N.useCallback(async(m,x={})=>{xi(a.current,Cp),a.current&&(typeof m=="number"?t.navigate(m):await t.navigate(m,{fromRouteId:i,...x}))},[t,i])}var k1={};function Sp(t,i,a){!i&&!k1[t]&&(k1[t]=!0,xi(!1,a))}N.memo(Hy);function Hy({routes:t,future:i,state:a}){return Ep(t,void 0,a,i)}function er(t){An(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Gy({basename:t="/",children:i=null,location:a,navigationType:u="POP",navigator:m,static:x=!1}){An(!tl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let y=t.replace(/^\/*/,"/"),b=N.useMemo(()=>({basename:y,navigator:m,static:x,future:{}}),[y,m,x]);typeof a=="string"&&(a=$o(a));let{pathname:v="/",search:C="",hash:S="",state:T=null,key:_="default"}=a,M=N.useMemo(()=>{let L=As(v,y);return L==null?null:{location:{pathname:L,search:C,hash:S,state:T,key:_},navigationType:u}},[y,v,C,S,T,_,u]);return xi(M!=null,`<Router basename="${y}"> is not able to match the URL "${v}${C}${S}" because it does not start with the basename, so the <Router> won't render anything.`),M==null?null:N.createElement(_i.Provider,{value:b},N.createElement(el.Provider,{children:i,value:M}))}function Xy({children:t,location:i}){return Py(Zd(t),i)}function Zd(t,i=[]){let a=[];return N.Children.forEach(t,(u,m)=>{if(!N.isValidElement(u))return;let x=[...i,m];if(u.type===N.Fragment){a.push.apply(a,Zd(u.props.children,x));return}An(u.type===er,`[${typeof u.type=="string"?u.type:u.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),An(!u.props.index||!u.props.children,"An index route cannot have child routes.");let y={id:u.props.id||x.join("-"),caseSensitive:u.props.caseSensitive,element:u.props.element,Component:u.props.Component,index:u.props.index,path:u.props.path,loader:u.props.loader,action:u.props.action,hydrateFallbackElement:u.props.hydrateFallbackElement,HydrateFallback:u.props.HydrateFallback,errorElement:u.props.errorElement,ErrorBoundary:u.props.ErrorBoundary,hasErrorBoundary:u.props.hasErrorBoundary===!0||u.props.ErrorBoundary!=null||u.props.errorElement!=null,shouldRevalidate:u.props.shouldRevalidate,handle:u.props.handle,lazy:u.props.lazy};u.props.children&&(y.children=Zd(u.props.children,x)),a.push(y)}),a}var wc="get",vc="application/x-www-form-urlencoded";function Wc(t){return t!=null&&typeof t.tagName=="string"}function Yy(t){return Wc(t)&&t.tagName.toLowerCase()==="button"}function $y(t){return Wc(t)&&t.tagName.toLowerCase()==="form"}function Zy(t){return Wc(t)&&t.tagName.toLowerCase()==="input"}function Ky(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function qy(t,i){return t.button===0&&(!i||i==="_self")&&!Ky(t)}function Kd(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((i,a)=>{let u=t[a];return i.concat(Array.isArray(u)?u.map(m=>[a,m]):[[a,u]])},[]))}function Qy(t,i){let a=Kd(t);return i&&i.forEach((u,m)=>{a.has(m)||i.getAll(m).forEach(x=>{a.append(m,x)})}),a}var dc=null;function Jy(){if(dc===null)try{new FormData(document.createElement("form"),0),dc=!1}catch{dc=!0}return dc}var ew=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Id(t){return t!=null&&!ew.has(t)?(xi(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vc}"`),null):t}function tw(t,i){let a,u,m,x,y;if($y(t)){let b=t.getAttribute("action");u=b?As(b,i):null,a=t.getAttribute("method")||wc,m=Id(t.getAttribute("enctype"))||vc,x=new FormData(t)}else if(Yy(t)||Zy(t)&&(t.type==="submit"||t.type==="image")){let b=t.form;if(b==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=t.getAttribute("formaction")||b.getAttribute("action");if(u=v?As(v,i):null,a=t.getAttribute("formmethod")||b.getAttribute("method")||wc,m=Id(t.getAttribute("formenctype"))||Id(b.getAttribute("enctype"))||vc,x=new FormData(b,t),!Jy()){let{name:C,type:S,value:T}=t;if(S==="image"){let _=C?`${C}.`:"";x.append(`${_}x`,"0"),x.append(`${_}y`,"0")}else C&&x.append(C,T)}}else{if(Wc(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=wc,u=null,m=vc,y=t}return x&&m==="text/plain"&&(y=x,x=void 0),{action:u,method:a.toLowerCase(),encType:m,formData:x,body:y}}function Rf(t,i){if(t===!1||t===null||typeof t>"u")throw new Error(i)}async function nw(t,i){if(t.id in i)return i[t.id];try{let a=await import(t.module);return i[t.id]=a,a}catch(a){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function rw(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function iw(t,i,a){let u=await Promise.all(t.map(async m=>{let x=i.routes[m.route.id];if(x){let y=await nw(x,a);return y.links?y.links():[]}return[]}));return lw(u.flat(1).filter(rw).filter(m=>m.rel==="stylesheet"||m.rel==="preload").map(m=>m.rel==="stylesheet"?{...m,rel:"prefetch",as:"style"}:{...m,rel:"prefetch"}))}function P1(t,i,a,u,m,x){let y=(v,C)=>a[C]?v.route.id!==a[C].route.id:!0,b=(v,C)=>{var S;return a[C].pathname!==v.pathname||((S=a[C].route.path)==null?void 0:S.endsWith("*"))&&a[C].params["*"]!==v.params["*"]};return x==="assets"?i.filter((v,C)=>y(v,C)||b(v,C)):x==="data"?i.filter((v,C)=>{var T;let S=u.routes[v.route.id];if(!S||!S.hasLoader)return!1;if(y(v,C)||b(v,C))return!0;if(v.route.shouldRevalidate){let _=v.route.shouldRevalidate({currentUrl:new URL(m.pathname+m.search+m.hash,window.origin),currentParams:((T=a[0])==null?void 0:T.params)||{},nextUrl:new URL(t,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function sw(t,i){return ow(t.map(a=>{let u=i.routes[a.route.id];if(!u)return[];let m=[u.module];return u.imports&&(m=m.concat(u.imports)),m}).flat(1))}function ow(t){return[...new Set(t)]}function aw(t){let i={},a=Object.keys(t).sort();for(let u of a)i[u]=t[u];return i}function lw(t,i){let a=new Set;return new Set(i),t.reduce((u,m)=>{let x=JSON.stringify(aw(m));return a.has(x)||(a.add(x),u.push({key:x,link:m})),u},[])}function cw(t){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname="_root.data":i.pathname=`${i.pathname.replace(/\/$/,"")}.data`,i}function uw(){let t=N.useContext(Zo);return Rf(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function dw(){let t=N.useContext(zc);return Rf(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var kf=N.createContext(void 0);kf.displayName="FrameworkContext";function Ap(){let t=N.useContext(kf);return Rf(t,"You must render this element inside a <HydratedRouter> element"),t}function fw(t,i){let a=N.useContext(kf),[u,m]=N.useState(!1),[x,y]=N.useState(!1),{onFocus:b,onBlur:v,onMouseEnter:C,onMouseLeave:S,onTouchStart:T}=i,_=N.useRef(null);N.useEffect(()=>{if(t==="render"&&y(!0),t==="viewport"){let F=z=>{z.forEach(V=>{y(V.isIntersecting)})},j=new IntersectionObserver(F,{threshold:.5});return _.current&&j.observe(_.current),()=>{j.disconnect()}}},[t]),N.useEffect(()=>{if(u){let F=setTimeout(()=>{y(!0)},100);return()=>{clearTimeout(F)}}},[u]);let M=()=>{m(!0)},L=()=>{m(!1),y(!1)};return a?t!=="intent"?[x,_,{}]:[x,_,{onFocus:Da(b,M),onBlur:Da(v,L),onMouseEnter:Da(C,M),onMouseLeave:Da(S,L),onTouchStart:Da(T,M)}]:[!1,_,{}]}function Da(t,i){return a=>{t&&t(a),a.defaultPrevented||i(a)}}function hw({page:t,...i}){let{router:a}=uw(),u=N.useMemo(()=>mp(a.routes,t,a.basename),[a.routes,t,a.basename]);return u?N.createElement(pw,{page:t,matches:u,...i}):(console.warn(`Tried to prefetch ${t} but no routes matched.`),null)}function mw(t){let{manifest:i,routeModules:a}=Ap(),[u,m]=N.useState([]);return N.useEffect(()=>{let x=!1;return iw(t,i,a).then(y=>{x||m(y)}),()=>{x=!0}},[t,i,a]),u}function pw({page:t,matches:i,...a}){let u=Vr(),{manifest:m,routeModules:x}=Ap(),{loaderData:y,matches:b}=dw(),v=N.useMemo(()=>P1(t,i,b,m,u,"data"),[t,i,b,m,u]),C=N.useMemo(()=>P1(t,i,b,m,u,"assets"),[t,i,b,m,u]),S=N.useMemo(()=>{if(t===u.pathname+u.search+u.hash)return[];let M=new Set,L=!1;if(i.forEach(j=>{var V;let z=m.routes[j.route.id];!z||!z.hasLoader||(!v.some(B=>B.route.id===j.route.id)&&j.route.id in y&&((V=x[j.route.id])!=null&&V.shouldRevalidate)||z.hasClientLoader?L=!0:M.add(j.route.id))}),M.size===0)return[];let F=cw(t);return L&&M.size>0&&F.searchParams.set("_routes",i.filter(j=>M.has(j.route.id)).map(j=>j.route.id).join(",")),[F.pathname+F.search]},[y,u,m,v,i,t,x]),T=N.useMemo(()=>sw(C,m),[C,m]),_=mw(C);return N.createElement(N.Fragment,null,S.map(M=>N.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...a})),T.map(M=>N.createElement("link",{key:M,rel:"modulepreload",href:M,...a})),_.map(({key:M,link:L})=>N.createElement("link",{key:M,...L})))}function gw(...t){return i=>{t.forEach(a=>{typeof a=="function"?a(i):a!=null&&(a.current=i)})}}var Np=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Np&&(window.__reactRouterVersion="7.0.2")}catch{}function xw({basename:t,children:i,window:a}){let u=N.useRef();u.current==null&&(u.current=ry({window:a,v5Compat:!0}));let m=u.current,[x,y]=N.useState({action:m.action,location:m.location}),b=N.useCallback(v=>{N.startTransition(()=>y(v))},[y]);return N.useLayoutEffect(()=>m.listen(b),[m,b]),N.createElement(Gy,{basename:t,children:i,location:x.location,navigationType:x.action,navigator:m})}var Tp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ip=N.forwardRef(function({onClick:i,discover:a="render",prefetch:u="none",relative:m,reloadDocument:x,replace:y,state:b,target:v,to:C,preventScrollReset:S,viewTransition:T,..._},M){let{basename:L}=N.useContext(_i),F=typeof C=="string"&&Tp.test(C),j,z=!1;if(typeof C=="string"&&F&&(j=C,Np))try{let J=new URL(window.location.href),ye=C.startsWith("//")?new URL(J.protocol+C):new URL(C),_e=As(ye.pathname,L);ye.origin===J.origin&&_e!=null?C=_e+ye.search+ye.hash:z=!0}catch{xi(!1,`<Link to="${C}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let V=_y(C,{relative:m}),[B,Y,$]=fw(u,_),re=Cw(C,{replace:y,state:b,target:v,preventScrollReset:S,relative:m,viewTransition:T});function G(J){i&&i(J),J.defaultPrevented||re(J)}let te=N.createElement("a",{..._,...$,href:j||V,onClick:z||x?i:G,ref:gw(M,Y),target:v,"data-discover":!F&&a==="render"?"true":void 0});return B&&!F?N.createElement(N.Fragment,null,te,N.createElement(hw,{page:V})):te});Ip.displayName="Link";var yw=N.forwardRef(function({"aria-current":i="page",caseSensitive:a=!1,className:u="",end:m=!1,style:x,to:y,viewTransition:b,children:v,...C},S){let T=nl(y,{relative:C.relative}),_=Vr(),M=N.useContext(zc),{navigator:L,basename:F}=N.useContext(_i),j=M!=null&&Nw(T)&&b===!0,z=L.encodeLocation?L.encodeLocation(T).pathname:T.pathname,V=_.pathname,B=M&&M.navigation&&M.navigation.location?M.navigation.location.pathname:null;a||(V=V.toLowerCase(),B=B?B.toLowerCase():null,z=z.toLowerCase()),B&&F&&(B=As(B,F)||B);const Y=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let $=V===z||!m&&V.startsWith(z)&&V.charAt(Y)==="/",re=B!=null&&(B===z||!m&&B.startsWith(z)&&B.charAt(z.length)==="/"),G={isActive:$,isPending:re,isTransitioning:j},te=$?i:void 0,J;typeof u=="function"?J=u(G):J=[u,$?"active":null,re?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let ye=typeof x=="function"?x(G):x;return N.createElement(Ip,{...C,"aria-current":te,className:J,ref:S,style:ye,to:y,viewTransition:b},typeof v=="function"?v(G):v)});yw.displayName="NavLink";var ww=N.forwardRef(({discover:t="render",fetcherKey:i,navigate:a,reloadDocument:u,replace:m,state:x,method:y=wc,action:b,onSubmit:v,relative:C,preventScrollReset:S,viewTransition:T,..._},M)=>{let L=Sw(),F=Aw(b,{relative:C}),j=y.toLowerCase()==="get"?"get":"post",z=typeof b=="string"&&Tp.test(b),V=B=>{if(v&&v(B),B.defaultPrevented)return;B.preventDefault();let Y=B.nativeEvent.submitter,$=(Y==null?void 0:Y.getAttribute("formmethod"))||y;L(Y||B.currentTarget,{fetcherKey:i,method:$,navigate:a,replace:m,state:x,relative:C,preventScrollReset:S,viewTransition:T})};return N.createElement("form",{ref:M,method:j,action:F,onSubmit:u?v:V,..._,"data-discover":!z&&t==="render"?"true":void 0})});ww.displayName="Form";function vw(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _p(t){let i=N.useContext(Zo);return An(i,vw(t)),i}function Cw(t,{target:i,replace:a,state:u,preventScrollReset:m,relative:x,viewTransition:y}={}){let b=Bn(),v=Vr(),C=nl(t,{relative:x});return N.useCallback(S=>{if(qy(S,i)){S.preventDefault();let T=a!==void 0?a:Ya(v)===Ya(C);b(t,{replace:T,state:u,preventScrollReset:m,relative:x,viewTransition:y})}},[v,b,C,a,u,i,t,m,x,y])}function Rp(t){xi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let i=N.useRef(Kd(t)),a=N.useRef(!1),u=Vr(),m=N.useMemo(()=>Qy(u.search,a.current?null:i.current),[u.search]),x=Bn(),y=N.useCallback((b,v)=>{const C=Kd(typeof b=="function"?b(m):b);a.current=!0,x("?"+C,v)},[x,m]);return[m,y]}var bw=0,Ew=()=>`__${String(++bw)}__`;function Sw(){let{router:t}=_p("useSubmit"),{basename:i}=N.useContext(_i),a=Uy();return N.useCallback(async(u,m={})=>{let{action:x,method:y,encType:b,formData:v,body:C}=tw(u,i);if(m.navigate===!1){let S=m.fetcherKey||Ew();await t.fetch(S,a,m.action||x,{preventScrollReset:m.preventScrollReset,formData:v,body:C,formMethod:m.method||y,formEncType:m.encType||b,flushSync:m.flushSync})}else await t.navigate(m.action||x,{preventScrollReset:m.preventScrollReset,formData:v,body:C,formMethod:m.method||y,formEncType:m.encType||b,replace:m.replace,state:m.state,fromRouteId:a,flushSync:m.flushSync,viewTransition:m.viewTransition})},[t,i,a])}function Aw(t,{relative:i}={}){let{basename:a}=N.useContext(_i),u=N.useContext(Ri);An(u,"useFormAction must be used inside a RouteContext");let[m]=u.matches.slice(-1),x={...nl(t||".",{relative:i})},y=Vr();if(t==null){x.search=y.search;let b=new URLSearchParams(x.search),v=b.getAll("index");if(v.some(S=>S==="")){b.delete("index"),v.filter(T=>T).forEach(T=>b.append("index",T));let S=b.toString();x.search=S?`?${S}`:""}}return(!t||t===".")&&m.route.index&&(x.search=x.search?x.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(x.pathname=x.pathname==="/"?a:Yi([a,x.pathname])),Ya(x)}function Nw(t,i={}){let a=N.useContext(vp);An(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:u}=_p("useViewTransitionState"),m=nl(t,{relative:i.relative});if(!a.isTransitioning)return!1;let x=As(a.currentLocation.pathname,u)||a.currentLocation.pathname,y=As(a.nextLocation.pathname,u)||a.nextLocation.pathname;return Tc(m.pathname,y)!=null||Tc(m.pathname,x)!=null}new TextEncoder;function Pf(){const t="./assets",i="/sounds/new_elevator_combined.mp3",a="/sounds/ambient_loop.mp3";Bn();const u=N.useRef(new Audio(t+i)),m=N.useRef(new Audio(t+a)),x=N.useRef("idle"),[y,b]=N.useState(!1),[v,C]=N.useState(!1),[S,T]=N.useState(null),[_,M]=N.useState(!1),[L,F]=N.useState(!1);N.useEffect(()=>{const G=u.current,te=()=>{G.pause(),G.currentTime=0,C(!1),$()};return G.addEventListener("ended",te),()=>G.removeEventListener("ended",te)},[L]);function j(){T(null),x.current="main",m.current&&!m.current.paused&&(m.current.pause(),m.current.currentTime=0),u.current.load(),u.current.play().then(()=>{u.current.pause(),u.current.currentTime=0,b(!0),C(!0),M(!0),Y()}).catch(G=>{console.error("Error loading audio:",G),T("Failed to load audio. Please check the file path and format."),M(!1)})}function z(){T(null),x.current="ambient",u.current.load(),u.current.play().then(()=>{u.current.pause(),u.current.currentTime=0,console.log("Main track pre-unlocked for later switchover")}).catch(G=>{console.error("Error pre-loading main audio:",G)}),m.current.loop=!0,m.current.load(),m.current.play().then(()=>{b(!0),C(!0),M(!0)}).catch(G=>{console.error("Error loading ambient audio:",G),T("Failed to load audio. Please check the file path and format."),M(!1)})}function V(G){return m.current&&!m.current.paused&&(m.current.pause(),m.current.currentTime=0),x.current="main",u.current?(u.current.currentTime=G,u.current.paused?u.current.play().then(()=>{C(!0),M(!0)}).catch(te=>{throw console.error("Switchover to main track failed:",te),C(!1),M(!1),te}):Promise.resolve()):(C(!1),M(!1),Promise.reject(new Error("No audio ref available")))}function B(){return x.current==="ambient"&&m.current?!m.current.paused:!!(u.current&&!u.current.paused)}function Y(){u.current&&u.current.paused?u.current.play().catch(G=>{console.error("Error playing audio:",G),T("Failed to play audio. Please try again.")}):u.current&&(u.current.currentTime=0)}function $(){m.current&&(m.current.pause(),m.current.currentTime=0,m.current.src="",m.current=null),u.current&&(u.current.pause(),u.current.currentTime=0,u.current.src="",u.current=null),x.current="idle"}function re(G){u.current&&(u.current.currentTime=G,console.log(u.current.duration))}return{audioRef:u,error:S,playSound:Y,loadSound:j,loadAmbientSound:z,switchToMainTrack:V,seekTo:re,cancelSound:$,checkSound:B,soundEnabled:_,setSoundEnabled:M,isPlaying:v}}var tr;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(tr||(tr={}));tr.QR_CODE,tr.AZTEC,tr.CODABAR,tr.CODE_39,tr.CODE_93,tr.CODE_128,tr.DATA_MATRIX,tr.MAXICODE,tr.ITF,tr.EAN_13,tr.EAN_8,tr.PDF_417,tr.RSS_14,tr.RSS_EXPANDED,tr.UPC_A,tr.UPC_E,tr.UPC_EAN_EXTENSION;var M1;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(M1||(M1={}));var Ic;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Ic||(Ic={}));var Tw=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Ic.SCAN_TYPE_CAMERA,Ic.SCAN_TYPE_FILE],t}(),O1;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(O1||(O1={}));var ja={exports:{}},Iw=ja.exports,D1;function _w(){return D1||(D1=1,function(t,i){(function(a,u){u(i)})(Iw,function(a){function u(k){return k==null}var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,e){k.__proto__=e}||function(k,e){for(var r in e)e.hasOwnProperty(r)&&(k[r]=e[r])};function x(k,e){m(k,e);function r(){this.constructor=k}k.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function y(k,e){var r=Object.setPrototypeOf;r?r(k,e):k.__proto__=e}function b(k,e){e===void 0&&(e=k.constructor);var r=Error.captureStackTrace;r&&r(k,e)}var v=function(k){x(e,k);function e(r){var s=this.constructor,l=k.call(this,r)||this;return Object.defineProperty(l,"name",{value:s.name,enumerable:!1}),y(l,s.prototype),b(l),l}return e}(Error);class C extends v{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}C.kind="Exception";class S extends C{}S.kind="ArgumentException";class T extends C{}T.kind="IllegalArgumentException";class _{constructor(e){if(this.binarizer=e,e===null)throw new T("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,r){return this.binarizer.getBlackRow(e,r)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,r,s,l){const c=this.binarizer.getLuminanceSource().crop(e,r,s,l);return new _(this.binarizer.createBinarizer(c))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new _(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new _(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class M extends C{static getChecksumInstance(){return new M}}M.kind="ChecksumException";class L{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class F{static arraycopy(e,r,s,l,c){for(;c--;)s[l++]=e[r++]}static currentTimeMillis(){return Date.now()}}class j extends C{}j.kind="IndexOutOfBoundsException";class z extends j{constructor(e=void 0,r=void 0){super(r),this.index=e,this.message=r}}z.kind="ArrayIndexOutOfBoundsException";class V{static fill(e,r){for(let s=0,l=e.length;s<l;s++)e[s]=r}static fillWithin(e,r,s,l){V.rangeCheck(e.length,r,s);for(let c=r;c<s;c++)e[c]=l}static rangeCheck(e,r,s){if(r>s)throw new T("fromIndex("+r+") > toIndex("+s+")");if(r<0)throw new z(r);if(s>e)throw new z(s)}static asList(...e){return e}static create(e,r,s){return Array.from({length:e}).map(c=>Array.from({length:r}).fill(s))}static createInt32Array(e,r,s){return Array.from({length:e}).map(c=>Int32Array.from({length:r}).fill(s))}static equals(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(let s=0,l=e.length;s<l;s++)if(e[s]!==r[s])return!1;return!0}static hashCode(e){if(e===null)return 0;let r=1;for(const s of e)r=31*r+s;return r}static fillUint8Array(e,r){for(let s=0;s!==e.length;s++)e[s]=r}static copyOf(e,r){return e.slice(0,r)}static copyOfUint8Array(e,r){if(e.length<=r){const s=new Uint8Array(r);return s.set(e),s}return e.slice(0,r)}static copyOfRange(e,r,s){const l=s-r,c=new Int32Array(l);return F.arraycopy(e,r,c,0,l),c}static binarySearch(e,r,s){s===void 0&&(s=V.numberComparator);let l=0,c=e.length-1;for(;l<=c;){const d=c+l>>1,p=s(r,e[d]);if(p>0)l=d+1;else if(p<0)c=d-1;else return d}return-l-1}static numberComparator(e,r){return e-r}}class B{static numberOfTrailingZeros(e){let r;if(e===0)return 32;let s=31;return r=e<<16,r!==0&&(s-=16,e=r),r=e<<8,r!==0&&(s-=8,e=r),r=e<<4,r!==0&&(s-=4,e=r),r=e<<2,r!==0&&(s-=2,e=r),s-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,r){return Math.trunc(e/r)}static parseInt(e,r=void 0){return parseInt(e,r)}}B.MIN_VALUE_32_BITS=-2147483648,B.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Y{constructor(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=Y.makeArray(e):this.bits=r)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const r=Y.makeArray(e);F.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const r=this.size;if(e>=r)return r;const s=this.bits;let l=Math.floor(e/32),c=s[l];c&=~((1<<(e&31))-1);const d=s.length;for(;c===0;){if(++l===d)return r;c=s[l]}const p=l*32+B.numberOfTrailingZeros(c);return p>r?r:p}getNextUnset(e){const r=this.size;if(e>=r)return r;const s=this.bits;let l=Math.floor(e/32),c=~s[l];c&=~((1<<(e&31))-1);const d=s.length;for(;c===0;){if(++l===d)return r;c=~s[l]}const p=l*32+B.numberOfTrailingZeros(c);return p>r?r:p}setBulk(e,r){this.bits[Math.floor(e/32)]=r}setRange(e,r){if(r<e||e<0||r>this.size)throw new T;if(r===e)return;r--;const s=Math.floor(e/32),l=Math.floor(r/32),c=this.bits;for(let d=s;d<=l;d++){const p=d>s?0:e&31,E=(2<<(d<l?31:r&31))-(1<<p);c[d]|=E}}clear(){const e=this.bits.length,r=this.bits;for(let s=0;s<e;s++)r[s]=0}isRange(e,r,s){if(r<e||e<0||r>this.size)throw new T;if(r===e)return!0;r--;const l=Math.floor(e/32),c=Math.floor(r/32),d=this.bits;for(let p=l;p<=c;p++){const w=p>l?0:e&31,R=(2<<(p<c?31:r&31))-(1<<w)&4294967295;if((d[p]&R)!==(s?R:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,r){if(r<0||r>32)throw new T("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(let s=r;s>0;s--)this.appendBit((e>>s-1&1)===1)}appendBitArray(e){const r=e.size;this.ensureCapacity(this.size+r);for(let s=0;s<r;s++)this.appendBit(e.get(s))}xor(e){if(this.size!==e.size)throw new T("Sizes don't match");const r=this.bits;for(let s=0,l=r.length;s<l;s++)r[s]^=e.bits[s]}toBytes(e,r,s,l){for(let c=0;c<l;c++){let d=0;for(let p=0;p<8;p++)this.get(e)&&(d|=1<<7-p),e++;r[s+c]=d}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),s=r+1,l=this.bits;for(let c=0;c<s;c++){let d=l[c];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,e[r-c]=d}if(this.size!==s*32){const c=s*32-this.size;let d=e[0]>>>c;for(let p=1;p<s;p++){const w=e[p];d|=w<<32-c,e[p-1]=d,d=w>>>c}e[s-1]=d}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof Y))return!1;const r=e;return this.size===r.size&&V.equals(this.bits,r.bits)}hashCode(){return 31*this.size+V.hashCode(this.bits)}toString(){let e="";for(let r=0,s=this.size;r<s;r++)r&7||(e+=" "),e+=this.get(r)?"X":".";return e}clone(){return new Y(this.size,this.bits.slice())}}var $;(function(k){k[k.OTHER=0]="OTHER",k[k.PURE_BARCODE=1]="PURE_BARCODE",k[k.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",k[k.TRY_HARDER=3]="TRY_HARDER",k[k.CHARACTER_SET=4]="CHARACTER_SET",k[k.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",k[k.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",k[k.ASSUME_GS1=7]="ASSUME_GS1",k[k.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",k[k.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",k[k.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})($||($={}));var re=$;class G extends C{static getFormatInstance(){return new G}}G.kind="FormatException";var te;(function(k){k[k.Cp437=0]="Cp437",k[k.ISO8859_1=1]="ISO8859_1",k[k.ISO8859_2=2]="ISO8859_2",k[k.ISO8859_3=3]="ISO8859_3",k[k.ISO8859_4=4]="ISO8859_4",k[k.ISO8859_5=5]="ISO8859_5",k[k.ISO8859_6=6]="ISO8859_6",k[k.ISO8859_7=7]="ISO8859_7",k[k.ISO8859_8=8]="ISO8859_8",k[k.ISO8859_9=9]="ISO8859_9",k[k.ISO8859_10=10]="ISO8859_10",k[k.ISO8859_11=11]="ISO8859_11",k[k.ISO8859_13=12]="ISO8859_13",k[k.ISO8859_14=13]="ISO8859_14",k[k.ISO8859_15=14]="ISO8859_15",k[k.ISO8859_16=15]="ISO8859_16",k[k.SJIS=16]="SJIS",k[k.Cp1250=17]="Cp1250",k[k.Cp1251=18]="Cp1251",k[k.Cp1252=19]="Cp1252",k[k.Cp1256=20]="Cp1256",k[k.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",k[k.UTF8=22]="UTF8",k[k.ASCII=23]="ASCII",k[k.Big5=24]="Big5",k[k.GB18030=25]="GB18030",k[k.EUC_KR=26]="EUC_KR"})(te||(te={}));class J{constructor(e,r,s,...l){this.valueIdentifier=e,this.name=s,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=l,J.VALUE_IDENTIFIER_TO_ECI.set(e,this),J.NAME_TO_ECI.set(s,this);const c=this.values;for(let d=0,p=c.length;d!==p;d++){const w=c[d];J.VALUES_TO_ECI.set(w,this)}for(const d of l)J.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new G("incorect value");const r=J.VALUES_TO_ECI.get(e);if(r===void 0)throw new G("incorect value");return r}static getCharacterSetECIByName(e){const r=J.NAME_TO_ECI.get(e);if(r===void 0)throw new G("incorect value");return r}equals(e){if(!(e instanceof J))return!1;const r=e;return this.getName()===r.getName()}}J.VALUE_IDENTIFIER_TO_ECI=new Map,J.VALUES_TO_ECI=new Map,J.NAME_TO_ECI=new Map,J.Cp437=new J(te.Cp437,Int32Array.from([0,2]),"Cp437"),J.ISO8859_1=new J(te.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),J.ISO8859_2=new J(te.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),J.ISO8859_3=new J(te.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),J.ISO8859_4=new J(te.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),J.ISO8859_5=new J(te.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),J.ISO8859_6=new J(te.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),J.ISO8859_7=new J(te.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),J.ISO8859_8=new J(te.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),J.ISO8859_9=new J(te.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),J.ISO8859_10=new J(te.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),J.ISO8859_11=new J(te.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),J.ISO8859_13=new J(te.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),J.ISO8859_14=new J(te.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),J.ISO8859_15=new J(te.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),J.ISO8859_16=new J(te.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),J.SJIS=new J(te.SJIS,20,"SJIS","Shift_JIS"),J.Cp1250=new J(te.Cp1250,21,"Cp1250","windows-1250"),J.Cp1251=new J(te.Cp1251,22,"Cp1251","windows-1251"),J.Cp1252=new J(te.Cp1252,23,"Cp1252","windows-1252"),J.Cp1256=new J(te.Cp1256,24,"Cp1256","windows-1256"),J.UnicodeBigUnmarked=new J(te.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),J.UTF8=new J(te.UTF8,26,"UTF8","UTF-8"),J.ASCII=new J(te.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),J.Big5=new J(te.Big5,28,"Big5"),J.GB18030=new J(te.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),J.EUC_KR=new J(te.EUC_KR,30,"EUC_KR","EUC-KR");class ye extends C{}ye.kind="UnsupportedOperationException";class _e{static decode(e,r){const s=this.encodingName(r);return this.customDecoder?this.customDecoder(e,s):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(s)?this.decodeFallback(e,s):new TextDecoder(s).decode(e)}static shouldDecodeOnFallback(e){return!_e.isBrowser()&&e==="ISO-8859-1"}static encode(e,r){const s=this.encodingName(r);return this.customEncoder?this.customEncoder(e,s):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof J?e:J.getCharacterSetECIByName(e)}static decodeFallback(e,r){const s=this.encodingCharacterSet(r);if(_e.isDecodeFallbackSupported(s)){let l="";for(let c=0,d=e.length;c<d;c++){let p=e[c].toString(16);p.length<2&&(p="0"+p),l+="%"+p}return decodeURIComponent(l)}if(s.equals(J.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new ye(`Encoding ${this.encodingName(r)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(J.UTF8)||e.equals(J.ISO8859_1)||e.equals(J.ASCII)}static encodeFallback(e){const s=btoa(unescape(encodeURIComponent(e))).split(""),l=[];for(let c=0;c<s.length;c++)l.push(s[c].charCodeAt(0));return new Uint8Array(l)}}class Ne{static castAsNonUtf8Char(e,r=null){const s=r?r.getName():this.ISO88591;return _e.decode(new Uint8Array([e]),s)}static guessEncoding(e,r){if(r!=null&&r.get(re.CHARACTER_SET)!==void 0)return r.get(re.CHARACTER_SET).toString();const s=e.length;let l=!0,c=!0,d=!0,p=0,w=0,E=0,R=0,P=0,D=0,W=0,Q=0,ne=0,se=0,fe=0;const Be=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let Ue=0;Ue<s&&(l||c||d);Ue++){const Pe=e[Ue]&255;d&&(p>0?Pe&128?p--:d=!1:Pe&128&&(Pe&64?(p++,Pe&32?(p++,Pe&16?(p++,Pe&8?d=!1:R++):E++):w++):d=!1)),l&&(Pe>127&&Pe<160?l=!1:Pe>159&&(Pe<192||Pe===215||Pe===247)&&fe++),c&&(P>0?Pe<64||Pe===127||Pe>252?c=!1:P--:Pe===128||Pe===160||Pe>239?c=!1:Pe>160&&Pe<224?(D++,Q=0,W++,W>ne&&(ne=W)):Pe>127?(P++,W=0,Q++,Q>se&&(se=Q)):(W=0,Q=0))}return d&&p>0&&(d=!1),c&&P>0&&(c=!1),d&&(Be||w+E+R>0)?Ne.UTF8:c&&(Ne.ASSUME_SHIFT_JIS||ne>=3||se>=3)?Ne.SHIFT_JIS:l&&c?ne===2&&D===2||fe*10>=s?Ne.SHIFT_JIS:Ne.ISO88591:l?Ne.ISO88591:c?Ne.SHIFT_JIS:d?Ne.UTF8:Ne.PLATFORM_DEFAULT_ENCODING}static format(e,...r){let s=-1;function l(d,p,w,E,R,P){if(d==="%%")return"%";if(r[++s]===void 0)return;d=E?parseInt(E.substr(1)):void 0;let D=R?parseInt(R.substr(1)):void 0,W;switch(P){case"s":W=r[s];break;case"c":W=r[s][0];break;case"f":W=parseFloat(r[s]).toFixed(d);break;case"p":W=parseFloat(r[s]).toPrecision(d);break;case"e":W=parseFloat(r[s]).toExponential(d);break;case"x":W=parseInt(r[s]).toString(D||16);break;case"d":W=parseFloat(parseInt(r[s],D||10).toPrecision(d)).toFixed(0);break}W=typeof W=="object"?JSON.stringify(W):(+W).toString(D);let Q=parseInt(w),ne=w&&w[0]+""=="0"?"0":" ";for(;W.length<Q;)W=p!==void 0?W+ne:ne+W;return W}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(c,l)}static getBytes(e,r){return _e.encode(e,r)}static getCharCode(e,r=0){return e.charCodeAt(r)}static getCharAt(e){return String.fromCharCode(e)}}Ne.SHIFT_JIS=J.SJIS.getName(),Ne.GB2312="GB2312",Ne.ISO88591=J.ISO8859_1.getName(),Ne.EUC_JP="EUC_JP",Ne.UTF8=J.UTF8.getName(),Ne.PLATFORM_DEFAULT_ENCODING=Ne.UTF8,Ne.ASSUME_SHIFT_JIS=!1;class Se{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Ne.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,r,s){for(let l=r;r<r+s;l++)this.append(e[l]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)}substring(e,r){return this.value.substring(e,r)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+r.length)}}class Ee{constructor(e,r,s,l){if(this.width=e,this.height=r,this.rowSize=s,this.bits=l,r==null&&(r=e),this.height=r,e<1||r<1)throw new T("Both dimensions must be greater than 0");s==null&&(s=Math.floor((e+31)/32)),this.rowSize=s,l==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const r=e.length,s=e[0].length,l=new Ee(s,r);for(let c=0;c<r;c++){const d=e[c];for(let p=0;p<s;p++)d[p]&&l.set(p,c)}return l}static parseFromString(e,r,s){if(e===null)throw new T("stringRepresentation cannot be null");const l=new Array(e.length);let c=0,d=0,p=-1,w=0,E=0;for(;E<e.length;)if(e.charAt(E)===`
`||e.charAt(E)==="\r"){if(c>d){if(p===-1)p=c-d;else if(c-d!==p)throw new T("row lengths do not match");d=c,w++}E++}else if(e.substring(E,E+r.length)===r)E+=r.length,l[c]=!0,c++;else if(e.substring(E,E+s.length)===s)E+=s.length,l[c]=!1,c++;else throw new T("illegal character encountered: "+e.substring(E));if(c>d){if(p===-1)p=c-d;else if(c-d!==p)throw new T("row lengths do not match");w++}const R=new Ee(p,w);for(let P=0;P<c;P++)l[P]&&R.set(Math.floor(P%p),Math.floor(P/p));return R}get(e,r){const s=r*this.rowSize+Math.floor(e/32);return(this.bits[s]>>>(e&31)&1)!==0}set(e,r){const s=r*this.rowSize+Math.floor(e/32);this.bits[s]|=1<<(e&31)&4294967295}unset(e,r){const s=r*this.rowSize+Math.floor(e/32);this.bits[s]&=~(1<<(e&31)&4294967295)}flip(e,r){const s=r*this.rowSize+Math.floor(e/32);this.bits[s]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new T("input matrix dimensions do not match");const r=new Y(Math.floor(this.width/32)+1),s=this.rowSize,l=this.bits;for(let c=0,d=this.height;c<d;c++){const p=c*s,w=e.getRow(c,r).getBitArray();for(let E=0;E<s;E++)l[p+E]^=w[E]}}clear(){const e=this.bits,r=e.length;for(let s=0;s<r;s++)e[s]=0}setRegion(e,r,s,l){if(r<0||e<0)throw new T("Left and top must be nonnegative");if(l<1||s<1)throw new T("Height and width must be at least 1");const c=e+s,d=r+l;if(d>this.height||c>this.width)throw new T("The region must fit inside the matrix");const p=this.rowSize,w=this.bits;for(let E=r;E<d;E++){const R=E*p;for(let P=e;P<c;P++)w[R+Math.floor(P/32)]|=1<<(P&31)&4294967295}}getRow(e,r){r==null||r.getSize()<this.width?r=new Y(this.width):r.clear();const s=this.rowSize,l=this.bits,c=e*s;for(let d=0;d<s;d++)r.setBulk(d*32,l[c+d]);return r}setRow(e,r){F.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),r=this.getHeight();let s=new Y(e),l=new Y(e);for(let c=0,d=Math.floor((r+1)/2);c<d;c++)s=this.getRow(c,s),l=this.getRow(r-1-c,l),s.reverse(),l.reverse(),this.setRow(c,l),this.setRow(r-1-c,s)}getEnclosingRectangle(){const e=this.width,r=this.height,s=this.rowSize,l=this.bits;let c=e,d=r,p=-1,w=-1;for(let E=0;E<r;E++)for(let R=0;R<s;R++){const P=l[E*s+R];if(P!==0){if(E<d&&(d=E),E>w&&(w=E),R*32<c){let D=0;for(;!(P<<31-D&4294967295);)D++;R*32+D<c&&(c=R*32+D)}if(R*32+31>p){let D=31;for(;!(P>>>D);)D--;R*32+D>p&&(p=R*32+D)}}}return p<c||w<d?null:Int32Array.from([c,d,p-c+1,w-d+1])}getTopLeftOnBit(){const e=this.rowSize,r=this.bits;let s=0;for(;s<r.length&&r[s]===0;)s++;if(s===r.length)return null;const l=s/e;let c=s%e*32;const d=r[s];let p=0;for(;!(d<<31-p&4294967295);)p++;return c+=p,Int32Array.from([c,l])}getBottomRightOnBit(){const e=this.rowSize,r=this.bits;let s=r.length-1;for(;s>=0&&r[s]===0;)s--;if(s<0)return null;const l=Math.floor(s/e);let c=Math.floor(s%e)*32;const d=r[s];let p=31;for(;!(d>>>p);)p--;return c+=p,Int32Array.from([c,l])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof Ee))return!1;const r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&V.equals(this.bits,r.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+V.hashCode(this.bits),e}toString(e="X ",r="  ",s=`
`){return this.buildToString(e,r,s)}buildToString(e,r,s){let l=new Se;for(let c=0,d=this.height;c<d;c++){for(let p=0,w=this.width;p<w;p++)l.append(this.get(p,c)?e:r);l.append(s)}return l.toString()}clone(){return new Ee(this.width,this.height,this.rowSize,this.bits.slice())}}class Z extends C{static getNotFoundInstance(){return new Z}}Z.kind="NotFoundException";class Le extends L{constructor(e){super(e),this.luminances=Le.EMPTY,this.buckets=new Int32Array(Le.LUMINANCE_BUCKETS)}getBlackRow(e,r){const s=this.getLuminanceSource(),l=s.getWidth();r==null||r.getSize()<l?r=new Y(l):r.clear(),this.initArrays(l);const c=s.getRow(e,this.luminances),d=this.buckets;for(let w=0;w<l;w++)d[(c[w]&255)>>Le.LUMINANCE_SHIFT]++;const p=Le.estimateBlackPoint(d);if(l<3)for(let w=0;w<l;w++)(c[w]&255)<p&&r.set(w);else{let w=c[0]&255,E=c[1]&255;for(let R=1;R<l-1;R++){const P=c[R+1]&255;(E*4-w-P)/2<p&&r.set(R),w=E,E=P}}return r}getBlackMatrix(){const e=this.getLuminanceSource(),r=e.getWidth(),s=e.getHeight(),l=new Ee(r,s);this.initArrays(r);const c=this.buckets;for(let w=1;w<5;w++){const E=Math.floor(s*w/5),R=e.getRow(E,this.luminances),P=Math.floor(r*4/5);for(let D=Math.floor(r/5);D<P;D++){const W=R[D]&255;c[W>>Le.LUMINANCE_SHIFT]++}}const d=Le.estimateBlackPoint(c),p=e.getMatrix();for(let w=0;w<s;w++){const E=w*r;for(let R=0;R<r;R++)(p[E+R]&255)<d&&l.set(R,w)}return l}createBinarizer(e){return new Le(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const r=this.buckets;for(let s=0;s<Le.LUMINANCE_BUCKETS;s++)r[s]=0}static estimateBlackPoint(e){const r=e.length;let s=0,l=0,c=0;for(let R=0;R<r;R++)e[R]>c&&(l=R,c=e[R]),e[R]>s&&(s=e[R]);let d=0,p=0;for(let R=0;R<r;R++){const P=R-l,D=e[R]*P*P;D>p&&(d=R,p=D)}if(l>d){const R=l;l=d,d=R}if(d-l<=r/16)throw new Z;let w=d-1,E=-1;for(let R=d-1;R>l;R--){const P=R-l,D=P*P*(d-R)*(s-e[R]);D>E&&(w=R,E=D)}return w<<Le.LUMINANCE_SHIFT}}Le.LUMINANCE_BITS=5,Le.LUMINANCE_SHIFT=8-Le.LUMINANCE_BITS,Le.LUMINANCE_BUCKETS=1<<Le.LUMINANCE_BITS,Le.EMPTY=Uint8ClampedArray.from([0]);class ve extends Le{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),r=e.getWidth(),s=e.getHeight();if(r>=ve.MINIMUM_DIMENSION&&s>=ve.MINIMUM_DIMENSION){const l=e.getMatrix();let c=r>>ve.BLOCK_SIZE_POWER;r&ve.BLOCK_SIZE_MASK&&c++;let d=s>>ve.BLOCK_SIZE_POWER;s&ve.BLOCK_SIZE_MASK&&d++;const p=ve.calculateBlackPoints(l,c,d,r,s),w=new Ee(r,s);ve.calculateThresholdForBlock(l,c,d,r,s,p,w),this.matrix=w}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new ve(e)}static calculateThresholdForBlock(e,r,s,l,c,d,p){const w=c-ve.BLOCK_SIZE,E=l-ve.BLOCK_SIZE;for(let R=0;R<s;R++){let P=R<<ve.BLOCK_SIZE_POWER;P>w&&(P=w);const D=ve.cap(R,2,s-3);for(let W=0;W<r;W++){let Q=W<<ve.BLOCK_SIZE_POWER;Q>E&&(Q=E);const ne=ve.cap(W,2,r-3);let se=0;for(let Be=-2;Be<=2;Be++){const Ue=d[D+Be];se+=Ue[ne-2]+Ue[ne-1]+Ue[ne]+Ue[ne+1]+Ue[ne+2]}const fe=se/25;ve.thresholdBlock(e,Q,P,fe,l,p)}}}static cap(e,r,s){return e<r?r:e>s?s:e}static thresholdBlock(e,r,s,l,c,d){for(let p=0,w=s*c+r;p<ve.BLOCK_SIZE;p++,w+=c)for(let E=0;E<ve.BLOCK_SIZE;E++)(e[w+E]&255)<=l&&d.set(r+E,s+p)}static calculateBlackPoints(e,r,s,l,c){const d=c-ve.BLOCK_SIZE,p=l-ve.BLOCK_SIZE,w=new Array(s);for(let E=0;E<s;E++){w[E]=new Int32Array(r);let R=E<<ve.BLOCK_SIZE_POWER;R>d&&(R=d);for(let P=0;P<r;P++){let D=P<<ve.BLOCK_SIZE_POWER;D>p&&(D=p);let W=0,Q=255,ne=0;for(let fe=0,Be=R*l+D;fe<ve.BLOCK_SIZE;fe++,Be+=l){for(let Ue=0;Ue<ve.BLOCK_SIZE;Ue++){const Pe=e[Be+Ue]&255;W+=Pe,Pe<Q&&(Q=Pe),Pe>ne&&(ne=Pe)}if(ne-Q>ve.MIN_DYNAMIC_RANGE)for(fe++,Be+=l;fe<ve.BLOCK_SIZE;fe++,Be+=l)for(let Ue=0;Ue<ve.BLOCK_SIZE;Ue++)W+=e[Be+Ue]&255}let se=W>>ve.BLOCK_SIZE_POWER*2;if(ne-Q<=ve.MIN_DYNAMIC_RANGE&&(se=Q/2,E>0&&P>0)){const fe=(w[E-1][P]+2*w[E][P-1]+w[E-1][P-1])/4;Q<fe&&(se=fe)}w[E][P]=se}}return w}}ve.BLOCK_SIZE_POWER=3,ve.BLOCK_SIZE=1<<ve.BLOCK_SIZE_POWER,ve.BLOCK_SIZE_MASK=ve.BLOCK_SIZE-1,ve.MINIMUM_DIMENSION=ve.BLOCK_SIZE*5,ve.MIN_DYNAMIC_RANGE=24;class ge{constructor(e,r){this.width=e,this.height=r}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,r,s,l){throw new ye("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ye("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ye("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let r=new Se;for(let s=0;s<this.height;s++){const l=this.getRow(s,e);for(let c=0;c<this.width;c++){const d=l[c]&255;let p;d<64?p="#":d<128?p="+":d<192?p=".":p=" ",r.append(p)}r.append(`
`)}return r.toString()}}class De extends ge{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,r){const s=this.delegate.getRow(e,r),l=this.getWidth();for(let c=0;c<l;c++)s[c]=255-(s[c]&255);return s}getMatrix(){const e=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),s=new Uint8ClampedArray(r);for(let l=0;l<r;l++)s[l]=255-(e[l]&255);return s}isCropSupported(){return this.delegate.isCropSupported()}crop(e,r,s,l){return new De(this.delegate.crop(e,r,s,l))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new De(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new De(this.delegate.rotateCounterClockwise45())}}class Ce extends ge{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=Ce.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const r=e.getContext("2d").getImageData(0,0,e.width,e.height);return Ce.toGrayscaleBuffer(r.data,e.width,e.height)}static toGrayscaleBuffer(e,r,s){const l=new Uint8ClampedArray(r*s);for(let c=0,d=0,p=e.length;c<p;c+=4,d++){let w;if(e[c+3]===0)w=255;else{const R=e[c],P=e[c+1],D=e[c+2];w=306*R+601*P+117*D+512>>10}l[d]=w}return l}getRow(e,r){if(e<0||e>=this.getHeight())throw new T("Requested row is outside the image: "+e);const s=this.getWidth(),l=e*s;return r===null?r=this.buffer.slice(l,l+s):(r.length<s&&(r=new Uint8ClampedArray(s)),r.set(this.buffer.slice(l,l+s))),r}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,r,s,l){return super.crop(e,r,s,l),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const r=this.getTempCanvasElement(),s=r.getContext("2d"),l=e*Ce.DEGREE_TO_RADIANS,c=this.canvas.width,d=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(l))*c+Math.abs(Math.sin(l))*d),w=Math.ceil(Math.abs(Math.sin(l))*c+Math.abs(Math.cos(l))*d);return r.width=p,r.height=w,s.translate(p/2,w/2),s.rotate(l),s.drawImage(this.canvas,c/-2,d/-2),this.buffer=Ce.makeBufferFromCanvasImageData(r),this}invert(){return new De(this)}}Ce.DEGREE_TO_RADIANS=Math.PI/180;class K{constructor(e,r,s){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=s||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var X=(globalThis||lc||self||window||void 0)&&(globalThis||lc||self||window||void 0).__awaiter||function(k,e,r,s){function l(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function p(R){try{E(s.next(R))}catch(P){d(P)}}function w(R){try{E(s.throw(R))}catch(P){d(P)}}function E(R){R.done?c(R.value):l(R.value).then(p,w)}E((s=s.apply(k,e||[])).next())})};class we{constructor(e,r=500,s){this.reader=e,this.timeBetweenScansMillis=r,this._hints=s,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return X(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),r=[];for(const s of e){const l=s.kind==="video"?"videoinput":s.kind;if(l!=="videoinput")continue;const c=s.deviceId||s.id,d=s.label||`Video device ${r.length+1}`,p=s.groupId,w={deviceId:c,label:d,kind:l,groupId:p};r.push(w)}return r})}getVideoInputDevices(){return X(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(r=>new K(r.deviceId,r.label))})}findDeviceById(e){return X(this,void 0,void 0,function*(){const r=yield this.listVideoInputDevices();return r?r.find(s=>s.deviceId===e):null})}decodeFromInputVideoDevice(e,r){return X(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,r)})}decodeOnceFromVideoDevice(e,r){return X(this,void 0,void 0,function*(){this.reset();let s;e?s={deviceId:{exact:e}}:s={facingMode:"environment"};const l={video:s};return yield this.decodeOnceFromConstraints(l,r)})}decodeOnceFromConstraints(e,r){return X(this,void 0,void 0,function*(){const s=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(s,r)})}decodeOnceFromStream(e,r){return X(this,void 0,void 0,function*(){this.reset();const s=yield this.attachStreamToVideo(e,r);return yield this.decodeOnce(s)})}decodeFromInputVideoDeviceContinuously(e,r,s){return X(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,r,s)})}decodeFromVideoDevice(e,r,s){return X(this,void 0,void 0,function*(){let l;e?l={deviceId:{exact:e}}:l={facingMode:"environment"};const c={video:l};return yield this.decodeFromConstraints(c,r,s)})}decodeFromConstraints(e,r,s){return X(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(l,r,s)})}decodeFromStream(e,r,s){return X(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(e,r);return yield this.decodeContinuously(l,s)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,r){return X(this,void 0,void 0,function*(){const s=this.prepareVideoElement(r);return this.addVideoSource(s,e),this.videoElement=s,this.stream=e,yield this.playVideoOnLoadAsync(s),s})}playVideoOnLoadAsync(e){return new Promise((r,s)=>this.playVideoOnLoad(e,()=>r()))}playVideoOnLoad(e,r){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return X(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,r){const s=document.getElementById(e);if(!s)throw new S(`element with id '${e}' not found`);if(s.nodeName.toLowerCase()!==r.toLowerCase())throw new S(`element with id '${e}' must be an ${r} element`);return s}decodeFromImage(e,r){if(!e&&!r)throw new S("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)}decodeFromVideo(e,r){if(!e&&!r)throw new S("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,r,s){if(e===void 0&&r===void 0)throw new S("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,s):this.decodeFromVideoElementContinuously(e,s)}decodeFromImageElement(e){if(!e)throw new S("An image element must be provided.");this.reset();const r=this.prepareImageElement(e);this.imageElement=r;let s;return this.isImageLoaded(r)?s=this.decodeOnce(r,!1,!0):s=this._decodeOnLoadImage(r),s}decodeFromVideoElement(e){const r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)}decodeFromVideoElementContinuously(e,r){const s=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(s,r)}_decodeFromVideoElementSetup(e){if(!e)throw new S("A video element must be provided.");this.reset();const r=this.prepareVideoElement(e);return this.videoElement=r,r}decodeFromImageUrl(e){if(!e)throw new S("An URL must be provided.");this.reset();const r=this.prepareImageElement();this.imageElement=r;const s=this._decodeOnLoadImage(r);return r.src=e,s}decodeFromVideoUrl(e){if(!e)throw new S("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),s=this.decodeFromVideoElement(r);return r.src=e,s}decodeFromVideoUrlContinuously(e,r){if(!e)throw new S("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),l=this.decodeFromVideoElementContinuously(s,r);return s.src=e,l}_decodeOnLoadImage(e){return new Promise((r,s)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(r,s),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return X(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,r){return X(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,r)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r}prepareVideoElement(e){let r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r}decodeOnce(e,r=!0,s=!0){this._stopAsyncDecode=!1;const l=(c,d)=>{if(this._stopAsyncDecode){d(new Z("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const p=this.decode(e);c(p)}catch(p){const w=r&&p instanceof Z,R=(p instanceof M||p instanceof G)&&s;if(w||R)return setTimeout(l,this._timeBetweenDecodingAttempts,c,d);d(p)}};return new Promise((c,d)=>l(c,d))}decodeContinuously(e,r){this._stopContinuousDecode=!1;const s=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const l=this.decode(e);r(l,null),setTimeout(s,this.timeBetweenScansMillis)}catch(l){r(null,l);const c=l instanceof M||l instanceof G,d=l instanceof Z;(c||d)&&setTimeout(s,this._timeBetweenDecodingAttempts)}};s()}decode(e){const r=this.createBinaryBitmap(e);return this.decodeBitmap(r)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,r,s){r||(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),s||(s=this.captureCanvasContext),s.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}drawImageOnCanvas(e,r,s=this.captureCanvasContext){r||(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),s||(s=this.captureCanvasContext),s.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const r=this.getCaptureCanvas(e),s=new Ce(r),l=new ve(s);return new _(l)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const s=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=s}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const r=document.createElement("canvas");let s,l;return typeof e<"u"&&(e instanceof HTMLVideoElement?(s=e.videoWidth,l=e.videoHeight):e instanceof HTMLImageElement&&(s=e.naturalWidth||e.width,l=e.naturalHeight||e.height)),r.style.width=s+"px",r.style.height=l+"px",r.width=s,r.height=l,r}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class be{constructor(e,r,s=r==null?0:8*r.length,l,c,d=F.currentTimeMillis()){this.text=e,this.rawBytes=r,this.numBits=s,this.resultPoints=l,this.format=c,this.timestamp=d,this.text=e,this.rawBytes=r,s==null?this.numBits=r==null?0:8*r.length:this.numBits=s,this.resultPoints=l,this.format=c,this.resultMetadata=null,d==null?this.timestamp=F.currentTimeMillis():this.timestamp=d}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){const s=new Array(r.length+e.length);F.arraycopy(r,0,s,0,r.length),F.arraycopy(e,0,s,r.length,e.length),this.resultPoints=s}}getTimestamp(){return this.timestamp}toString(){return this.text}}var de;(function(k){k[k.AZTEC=0]="AZTEC",k[k.CODABAR=1]="CODABAR",k[k.CODE_39=2]="CODE_39",k[k.CODE_93=3]="CODE_93",k[k.CODE_128=4]="CODE_128",k[k.DATA_MATRIX=5]="DATA_MATRIX",k[k.EAN_8=6]="EAN_8",k[k.EAN_13=7]="EAN_13",k[k.ITF=8]="ITF",k[k.MAXICODE=9]="MAXICODE",k[k.PDF_417=10]="PDF_417",k[k.QR_CODE=11]="QR_CODE",k[k.RSS_14=12]="RSS_14",k[k.RSS_EXPANDED=13]="RSS_EXPANDED",k[k.UPC_A=14]="UPC_A",k[k.UPC_E=15]="UPC_E",k[k.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(de||(de={}));var q=de,Re;(function(k){k[k.OTHER=0]="OTHER",k[k.ORIENTATION=1]="ORIENTATION",k[k.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",k[k.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",k[k.ISSUE_NUMBER=4]="ISSUE_NUMBER",k[k.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",k[k.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",k[k.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",k[k.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",k[k.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",k[k.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Re||(Re={}));var xe=Re;class Ae{constructor(e,r,s,l,c=-1,d=-1){this.rawBytes=e,this.text=r,this.byteSegments=s,this.ecLevel=l,this.structuredAppendSequenceNumber=c,this.structuredAppendParity=d,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class nt{exp(e){return this.expTable[e]}log(e){if(e===0)throw new T;return this.logTable[e]}static addOrSubtract(e,r){return e^r}}class Xe{constructor(e,r){if(r.length===0)throw new T;this.field=e;const s=r.length;if(s>1&&r[0]===0){let l=1;for(;l<s&&r[l]===0;)l++;l===s?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(s-l),F.arraycopy(r,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const r=this.coefficients;let s;if(e===1){s=0;for(let d=0,p=r.length;d!==p;d++){const w=r[d];s=nt.addOrSubtract(s,w)}return s}s=r[0];const l=r.length,c=this.field;for(let d=1;d<l;d++)s=nt.addOrSubtract(c.multiply(e,s),r[d]);return s}addOrSubtract(e){if(!this.field.equals(e.field))throw new T("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let r=this.coefficients,s=e.coefficients;if(r.length>s.length){const d=r;r=s,s=d}let l=new Int32Array(s.length);const c=s.length-r.length;F.arraycopy(s,0,l,0,c);for(let d=c;d<s.length;d++)l[d]=nt.addOrSubtract(r[d-c],s[d]);return new Xe(this.field,l)}multiply(e){if(!this.field.equals(e.field))throw new T("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const r=this.coefficients,s=r.length,l=e.coefficients,c=l.length,d=new Int32Array(s+c-1),p=this.field;for(let w=0;w<s;w++){const E=r[w];for(let R=0;R<c;R++)d[w+R]=nt.addOrSubtract(d[w+R],p.multiply(E,l[R]))}return new Xe(p,d)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const r=this.coefficients.length,s=this.field,l=new Int32Array(r),c=this.coefficients;for(let d=0;d<r;d++)l[d]=s.multiply(c[d],e);return new Xe(s,l)}multiplyByMonomial(e,r){if(e<0)throw new T;if(r===0)return this.field.getZero();const s=this.coefficients,l=s.length,c=new Int32Array(l+e),d=this.field;for(let p=0;p<l;p++)c[p]=d.multiply(s[p],r);return new Xe(d,c)}divide(e){if(!this.field.equals(e.field))throw new T("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new T("Divide by 0");const r=this.field;let s=r.getZero(),l=this;const c=e.getCoefficient(e.getDegree()),d=r.inverse(c);for(;l.getDegree()>=e.getDegree()&&!l.isZero();){const p=l.getDegree()-e.getDegree(),w=r.multiply(l.getCoefficient(l.getDegree()),d),E=e.multiplyByMonomial(p,w),R=r.buildMonomial(p,w);s=s.addOrSubtract(R),l=l.addOrSubtract(E)}return[s,l]}toString(){let e="";for(let r=this.getDegree();r>=0;r--){let s=this.getCoefficient(r);if(s!==0){if(s<0?(e+=" - ",s=-s):e.length>0&&(e+=" + "),r===0||s!==1){const l=this.field.log(s);l===0?e+="1":l===1?e+="a":(e+="a^",e+=l)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e}}class ce extends C{}ce.kind="ArithmeticException";class me extends nt{constructor(e,r,s){super(),this.primitive=e,this.size=r,this.generatorBase=s;const l=new Int32Array(r);let c=1;for(let p=0;p<r;p++)l[p]=c,c*=2,c>=r&&(c^=e,c&=r-1);this.expTable=l;const d=new Int32Array(r);for(let p=0;p<r-1;p++)d[l[p]]=p;this.logTable=d,this.zero=new Xe(this,Int32Array.from([0])),this.one=new Xe(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,r){if(e<0)throw new T;if(r===0)return this.zero;const s=new Int32Array(e+1);return s[0]=r,new Xe(this,s)}inverse(e){if(e===0)throw new ce;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+B.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}me.AZTEC_DATA_12=new me(4201,4096,1),me.AZTEC_DATA_10=new me(1033,1024,1),me.AZTEC_DATA_6=new me(67,64,1),me.AZTEC_PARAM=new me(19,16,1),me.QR_CODE_FIELD_256=new me(285,256,0),me.DATA_MATRIX_FIELD_256=new me(301,256,1),me.AZTEC_DATA_8=me.DATA_MATRIX_FIELD_256,me.MAXICODE_FIELD_64=me.AZTEC_DATA_6;class Ye extends C{}Ye.kind="ReedSolomonException";class $e extends C{}$e.kind="IllegalStateException";class yt{constructor(e){this.field=e}decode(e,r){const s=this.field,l=new Xe(s,e),c=new Int32Array(r);let d=!0;for(let W=0;W<r;W++){const Q=l.evaluateAt(s.exp(W+s.getGeneratorBase()));c[c.length-1-W]=Q,Q!==0&&(d=!1)}if(d)return;const p=new Xe(s,c),w=this.runEuclideanAlgorithm(s.buildMonomial(r,1),p,r),E=w[0],R=w[1],P=this.findErrorLocations(E),D=this.findErrorMagnitudes(R,P);for(let W=0;W<P.length;W++){const Q=e.length-1-s.log(P[W]);if(Q<0)throw new Ye("Bad error location");e[Q]=me.addOrSubtract(e[Q],D[W])}}runEuclideanAlgorithm(e,r,s){if(e.getDegree()<r.getDegree()){const W=e;e=r,r=W}const l=this.field;let c=e,d=r,p=l.getZero(),w=l.getOne();for(;d.getDegree()>=(s/2|0);){let W=c,Q=p;if(c=d,p=w,c.isZero())throw new Ye("r_{i-1} was zero");d=W;let ne=l.getZero();const se=c.getCoefficient(c.getDegree()),fe=l.inverse(se);for(;d.getDegree()>=c.getDegree()&&!d.isZero();){const Be=d.getDegree()-c.getDegree(),Ue=l.multiply(d.getCoefficient(d.getDegree()),fe);ne=ne.addOrSubtract(l.buildMonomial(Be,Ue)),d=d.addOrSubtract(c.multiplyByMonomial(Be,Ue))}if(w=ne.multiply(p).addOrSubtract(Q),d.getDegree()>=c.getDegree())throw new $e("Division algorithm failed to reduce polynomial?")}const E=w.getCoefficient(0);if(E===0)throw new Ye("sigmaTilde(0) was zero");const R=l.inverse(E),P=w.multiplyScalar(R),D=d.multiplyScalar(R);return[P,D]}findErrorLocations(e){const r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);const s=new Int32Array(r);let l=0;const c=this.field;for(let d=1;d<c.getSize()&&l<r;d++)e.evaluateAt(d)===0&&(s[l]=c.inverse(d),l++);if(l!==r)throw new Ye("Error locator degree does not match number of roots");return s}findErrorMagnitudes(e,r){const s=r.length,l=new Int32Array(s),c=this.field;for(let d=0;d<s;d++){const p=c.inverse(r[d]);let w=1;for(let E=0;E<s;E++)if(d!==E){const R=c.multiply(r[E],p),P=R&1?R&-2:R|1;w=c.multiply(w,P)}l[d]=c.multiply(e.evaluateAt(p),c.inverse(w)),c.getGeneratorBase()!==0&&(l[d]=c.multiply(l[d],p))}return l}}var dt;(function(k){k[k.UPPER=0]="UPPER",k[k.LOWER=1]="LOWER",k[k.MIXED=2]="MIXED",k[k.DIGIT=3]="DIGIT",k[k.PUNCT=4]="PUNCT",k[k.BINARY=5]="BINARY"})(dt||(dt={}));class Ke{decode(e){this.ddata=e;let r=e.getBits(),s=this.extractBits(r),l=this.correctBits(s),c=Ke.convertBoolArrayToByteArray(l),d=Ke.getEncodedData(l),p=new Ae(c,d,null,null);return p.setNumBits(l.length),p}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let r=e.length,s=dt.UPPER,l=dt.UPPER,c="",d=0;for(;d<r;)if(l===dt.BINARY){if(r-d<5)break;let p=Ke.readCode(e,d,5);if(d+=5,p===0){if(r-d<11)break;p=Ke.readCode(e,d,11)+31,d+=11}for(let w=0;w<p;w++){if(r-d<8){d=r;break}const E=Ke.readCode(e,d,8);c+=Ne.castAsNonUtf8Char(E),d+=8}l=s}else{let p=l===dt.DIGIT?4:5;if(r-d<p)break;let w=Ke.readCode(e,d,p);d+=p;let E=Ke.getCharacter(l,w);E.startsWith("CTRL_")?(s=l,l=Ke.getTable(E.charAt(5)),E.charAt(6)==="L"&&(s=l)):(c+=E,l=s)}return c}static getTable(e){switch(e){case"L":return dt.LOWER;case"P":return dt.PUNCT;case"M":return dt.MIXED;case"D":return dt.DIGIT;case"B":return dt.BINARY;case"U":default:return dt.UPPER}}static getCharacter(e,r){switch(e){case dt.UPPER:return Ke.UPPER_TABLE[r];case dt.LOWER:return Ke.LOWER_TABLE[r];case dt.MIXED:return Ke.MIXED_TABLE[r];case dt.PUNCT:return Ke.PUNCT_TABLE[r];case dt.DIGIT:return Ke.DIGIT_TABLE[r];default:throw new $e("Bad table")}}correctBits(e){let r,s;this.ddata.getNbLayers()<=2?(s=6,r=me.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(s=8,r=me.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(s=10,r=me.AZTEC_DATA_10):(s=12,r=me.AZTEC_DATA_12);let l=this.ddata.getNbDatablocks(),c=e.length/s;if(c<l)throw new G;let d=e.length%s,p=new Int32Array(c);for(let D=0;D<c;D++,d+=s)p[D]=Ke.readCode(e,d,s);try{new yt(r).decode(p,c-l)}catch(D){throw new G(D)}let w=(1<<s)-1,E=0;for(let D=0;D<l;D++){let W=p[D];if(W===0||W===w)throw new G;(W===1||W===w-1)&&E++}let R=new Array(l*s-E),P=0;for(let D=0;D<l;D++){let W=p[D];if(W===1||W===w-1)R.fill(W>1,P,P+s-1),P+=s-1;else for(let Q=s-1;Q>=0;--Q)R[P++]=(W&1<<Q)!==0}return R}extractBits(e){let r=this.ddata.isCompact(),s=this.ddata.getNbLayers(),l=(r?11:14)+s*4,c=new Int32Array(l),d=new Array(this.totalBitsInLayer(s,r));if(r)for(let p=0;p<c.length;p++)c[p]=p;else{let p=l+1+2*B.truncDivision(B.truncDivision(l,2)-1,15),w=l/2,E=B.truncDivision(p,2);for(let R=0;R<w;R++){let P=R+B.truncDivision(R,15);c[w-R-1]=E-P-1,c[w+R]=E+P+1}}for(let p=0,w=0;p<s;p++){let E=(s-p)*4+(r?9:12),R=p*2,P=l-1-R;for(let D=0;D<E;D++){let W=D*2;for(let Q=0;Q<2;Q++)d[w+W+Q]=e.get(c[R+Q],c[R+D]),d[w+2*E+W+Q]=e.get(c[R+D],c[P-Q]),d[w+4*E+W+Q]=e.get(c[P-Q],c[P-D]),d[w+6*E+W+Q]=e.get(c[P-D],c[R+Q])}w+=E*8}return d}static readCode(e,r,s){let l=0;for(let c=r;c<r+s;c++)l<<=1,e[c]&&(l|=1);return l}static readByte(e,r){let s=e.length-r;return s>=8?Ke.readCode(e,r,8):Ke.readCode(e,r,s)<<8-s}static convertBoolArrayToByteArray(e){let r=new Uint8Array((e.length+7)/8);for(let s=0;s<r.length;s++)r[s]=Ke.readByte(e,8*s);return r}totalBitsInLayer(e,r){return((r?88:112)+16*e)*e}}Ke.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ke.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ke.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ke.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ke.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Qe{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,r,s,l){const c=e-s,d=r-l;return Math.sqrt(c*c+d*d)}static sum(e){let r=0;for(let s=0,l=e.length;s!==l;s++){const c=e[s];r+=c}return r}}class Bt{static floatToIntBits(e){return e}}Bt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ze{constructor(e,r){this.x=e,this.y=r}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof ze){const r=e;return this.x===r.x&&this.y===r.y}return!1}hashCode(){return 31*Bt.floatToIntBits(this.x)+Bt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const r=this.distance(e[0],e[1]),s=this.distance(e[1],e[2]),l=this.distance(e[0],e[2]);let c,d,p;if(s>=r&&s>=l?(d=e[0],c=e[1],p=e[2]):l>=s&&l>=r?(d=e[1],c=e[0],p=e[2]):(d=e[2],c=e[0],p=e[1]),this.crossProductZ(c,d,p)<0){const w=c;c=p,p=w}e[0]=c,e[1]=d,e[2]=p}static distance(e,r){return Qe.distance(e.x,e.y,r.x,r.y)}static crossProductZ(e,r,s){const l=r.x,c=r.y;return(s.x-l)*(e.y-c)-(s.y-c)*(e.x-l)}}class mn{constructor(e,r){this.bits=e,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class Hn extends mn{constructor(e,r,s,l,c){super(e,r),this.compact=s,this.nbDatablocks=l,this.nbLayers=c}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Ve{constructor(e,r,s,l){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=Ve.INIT_SIZE),s==null&&(s=e.getWidth()/2|0),l==null&&(l=e.getHeight()/2|0);const c=r/2|0;if(this.leftInit=s-c,this.rightInit=s+c,this.upInit=l-c,this.downInit=l+c,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Z}detect(){let e=this.leftInit,r=this.rightInit,s=this.upInit,l=this.downInit,c=!1,d=!0,p=!1,w=!1,E=!1,R=!1,P=!1;const D=this.width,W=this.height;for(;d;){d=!1;let Q=!0;for(;(Q||!w)&&r<D;)Q=this.containsBlackPoint(s,l,r,!1),Q?(r++,d=!0,w=!0):w||r++;if(r>=D){c=!0;break}let ne=!0;for(;(ne||!E)&&l<W;)ne=this.containsBlackPoint(e,r,l,!0),ne?(l++,d=!0,E=!0):E||l++;if(l>=W){c=!0;break}let se=!0;for(;(se||!R)&&e>=0;)se=this.containsBlackPoint(s,l,e,!1),se?(e--,d=!0,R=!0):R||e--;if(e<0){c=!0;break}let fe=!0;for(;(fe||!P)&&s>=0;)fe=this.containsBlackPoint(e,r,s,!0),fe?(s--,d=!0,P=!0):P||s--;if(s<0){c=!0;break}d&&(p=!0)}if(!c&&p){const Q=r-e;let ne=null;for(let Ue=1;ne===null&&Ue<Q;Ue++)ne=this.getBlackPointOnSegment(e,l-Ue,e+Ue,l);if(ne==null)throw new Z;let se=null;for(let Ue=1;se===null&&Ue<Q;Ue++)se=this.getBlackPointOnSegment(e,s+Ue,e+Ue,s);if(se==null)throw new Z;let fe=null;for(let Ue=1;fe===null&&Ue<Q;Ue++)fe=this.getBlackPointOnSegment(r,s+Ue,r-Ue,s);if(fe==null)throw new Z;let Be=null;for(let Ue=1;Be===null&&Ue<Q;Ue++)Be=this.getBlackPointOnSegment(r,l-Ue,r-Ue,l);if(Be==null)throw new Z;return this.centerEdges(Be,ne,fe,se)}else throw new Z}getBlackPointOnSegment(e,r,s,l){const c=Qe.round(Qe.distance(e,r,s,l)),d=(s-e)/c,p=(l-r)/c,w=this.image;for(let E=0;E<c;E++){const R=Qe.round(e+E*d),P=Qe.round(r+E*p);if(w.get(R,P))return new ze(R,P)}return null}centerEdges(e,r,s,l){const c=e.getX(),d=e.getY(),p=r.getX(),w=r.getY(),E=s.getX(),R=s.getY(),P=l.getX(),D=l.getY(),W=Ve.CORR;return c<this.width/2?[new ze(P-W,D+W),new ze(p+W,w+W),new ze(E-W,R-W),new ze(c+W,d-W)]:[new ze(P+W,D+W),new ze(p+W,w-W),new ze(E-W,R+W),new ze(c-W,d-W)]}containsBlackPoint(e,r,s,l){const c=this.image;if(l){for(let d=e;d<=r;d++)if(c.get(d,s))return!0}else for(let d=e;d<=r;d++)if(c.get(s,d))return!0;return!1}}Ve.INIT_SIZE=10,Ve.CORR=1;class kt{static checkAndNudgePoints(e,r){const s=e.getWidth(),l=e.getHeight();let c=!0;for(let d=0;d<r.length&&c;d+=2){const p=Math.floor(r[d]),w=Math.floor(r[d+1]);if(p<-1||p>s||w<-1||w>l)throw new Z;c=!1,p===-1?(r[d]=0,c=!0):p===s&&(r[d]=s-1,c=!0),w===-1?(r[d+1]=0,c=!0):w===l&&(r[d+1]=l-1,c=!0)}c=!0;for(let d=r.length-2;d>=0&&c;d-=2){const p=Math.floor(r[d]),w=Math.floor(r[d+1]);if(p<-1||p>s||w<-1||w>l)throw new Z;c=!1,p===-1?(r[d]=0,c=!0):p===s&&(r[d]=s-1,c=!0),w===-1?(r[d+1]=0,c=!0):w===l&&(r[d+1]=l-1,c=!0)}}}class We{constructor(e,r,s,l,c,d,p,w,E){this.a11=e,this.a21=r,this.a31=s,this.a12=l,this.a22=c,this.a32=d,this.a13=p,this.a23=w,this.a33=E}static quadrilateralToQuadrilateral(e,r,s,l,c,d,p,w,E,R,P,D,W,Q,ne,se){const fe=We.quadrilateralToSquare(e,r,s,l,c,d,p,w);return We.squareToQuadrilateral(E,R,P,D,W,Q,ne,se).times(fe)}transformPoints(e){const r=e.length,s=this.a11,l=this.a12,c=this.a13,d=this.a21,p=this.a22,w=this.a23,E=this.a31,R=this.a32,P=this.a33;for(let D=0;D<r;D+=2){const W=e[D],Q=e[D+1],ne=c*W+w*Q+P;e[D]=(s*W+d*Q+E)/ne,e[D+1]=(l*W+p*Q+R)/ne}}transformPointsWithValues(e,r){const s=this.a11,l=this.a12,c=this.a13,d=this.a21,p=this.a22,w=this.a23,E=this.a31,R=this.a32,P=this.a33,D=e.length;for(let W=0;W<D;W++){const Q=e[W],ne=r[W],se=c*Q+w*ne+P;e[W]=(s*Q+d*ne+E)/se,r[W]=(l*Q+p*ne+R)/se}}static squareToQuadrilateral(e,r,s,l,c,d,p,w){const E=e-s+c-p,R=r-l+d-w;if(E===0&&R===0)return new We(s-e,c-s,e,l-r,d-l,r,0,0,1);{const P=s-c,D=p-c,W=l-d,Q=w-d,ne=P*Q-D*W,se=(E*Q-D*R)/ne,fe=(P*R-E*W)/ne;return new We(s-e+se*s,p-e+fe*p,e,l-r+se*l,w-r+fe*w,r,se,fe,1)}}static quadrilateralToSquare(e,r,s,l,c,d,p,w){return We.squareToQuadrilateral(e,r,s,l,c,d,p,w).buildAdjoint()}buildAdjoint(){return new We(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new We(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class ht extends kt{sampleGrid(e,r,s,l,c,d,p,w,E,R,P,D,W,Q,ne,se,fe,Be,Ue){const Pe=We.quadrilateralToQuadrilateral(l,c,d,p,w,E,R,P,D,W,Q,ne,se,fe,Be,Ue);return this.sampleGridWithTransform(e,r,s,Pe)}sampleGridWithTransform(e,r,s,l){if(r<=0||s<=0)throw new Z;const c=new Ee(r,s),d=new Float32Array(2*r);for(let p=0;p<s;p++){const w=d.length,E=p+.5;for(let R=0;R<w;R+=2)d[R]=R/2+.5,d[R+1]=E;l.transformPoints(d),kt.checkAndNudgePoints(e,d);try{for(let R=0;R<w;R+=2)e.get(Math.floor(d[R]),Math.floor(d[R+1]))&&c.set(R/2,p)}catch{throw new Z}}return c}}class et{static setGridSampler(e){et.gridSampler=e}static getInstance(){return et.gridSampler}}et.gridSampler=new ht;class _t{constructor(e,r){this.x=e,this.y=r}toResultPoint(){return new ze(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class en{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let r=this.getMatrixCenter(),s=this.getBullsEyeCorners(r);if(e){let d=s[0];s[0]=s[2],s[2]=d}this.extractParameters(s);let l=this.sampleGrid(this.image,s[this.shift%4],s[(this.shift+1)%4],s[(this.shift+2)%4],s[(this.shift+3)%4]),c=this.getMatrixCornerPoints(s);return new Hn(l,c,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new Z;let r=2*this.nbCenterLayers,s=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(s,r);let l=0;for(let d=0;d<4;d++){let p=s[(this.shift+d)%4];this.compact?(l<<=7,l+=p>>1&127):(l<<=10,l+=(p>>2&992)+(p>>1&31))}let c=this.getCorrectedParameterData(l,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)}getRotation(e,r){let s=0;e.forEach((l,c,d)=>{let p=(l>>r-2<<1)+(l&1);s=(s<<3)+p}),s=((s&1)<<11)+(s>>1);for(let l=0;l<4;l++)if(B.bitCount(s^this.EXPECTED_CORNER_BITS[l])<=2)return l;throw new Z}getCorrectedParameterData(e,r){let s,l;r?(s=7,l=2):(s=10,l=4);let c=s-l,d=new Int32Array(s);for(let w=s-1;w>=0;--w)d[w]=e&15,e>>=4;try{new yt(me.AZTEC_PARAM).decode(d,c)}catch{throw new Z}let p=0;for(let w=0;w<l;w++)p=(p<<4)+d[w];return p}getBullsEyeCorners(e){let r=e,s=e,l=e,c=e,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let P=this.getFirstDifferent(r,d,1,-1),D=this.getFirstDifferent(s,d,1,1),W=this.getFirstDifferent(l,d,-1,1),Q=this.getFirstDifferent(c,d,-1,-1);if(this.nbCenterLayers>2){let ne=this.distancePoint(Q,P)*this.nbCenterLayers/(this.distancePoint(c,r)*(this.nbCenterLayers+2));if(ne<.75||ne>1.25||!this.isWhiteOrBlackRectangle(P,D,W,Q))break}r=P,s=D,l=W,c=Q,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Z;this.compact=this.nbCenterLayers===5;let p=new ze(r.getX()+.5,r.getY()-.5),w=new ze(s.getX()+.5,s.getY()+.5),E=new ze(l.getX()-.5,l.getY()+.5),R=new ze(c.getX()-.5,c.getY()-.5);return this.expandSquare([p,w,E,R],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,r,s,l;try{let p=new Ve(this.image).detect();e=p[0],r=p[1],s=p[2],l=p[3]}catch{let w=this.image.getWidth()/2,E=this.image.getHeight()/2;e=this.getFirstDifferent(new _t(w+7,E-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new _t(w+7,E+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new _t(w-7,E+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new _t(w-7,E-7),!1,-1,-1).toResultPoint()}let c=Qe.round((e.getX()+l.getX()+r.getX()+s.getX())/4),d=Qe.round((e.getY()+l.getY()+r.getY()+s.getY())/4);try{let p=new Ve(this.image,15,c,d).detect();e=p[0],r=p[1],s=p[2],l=p[3]}catch{e=this.getFirstDifferent(new _t(c+7,d-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new _t(c+7,d+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new _t(c-7,d+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new _t(c-7,d-7),!1,-1,-1).toResultPoint()}return c=Qe.round((e.getX()+l.getX()+r.getX()+s.getX())/4),d=Qe.round((e.getY()+l.getY()+r.getY()+s.getY())/4),new _t(c,d)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,r,s,l,c){let d=et.getInstance(),p=this.getDimension(),w=p/2-this.nbCenterLayers,E=p/2+this.nbCenterLayers;return d.sampleGrid(e,p,p,w,w,E,w,E,E,w,E,r.getX(),r.getY(),s.getX(),s.getY(),l.getX(),l.getY(),c.getX(),c.getY())}sampleLine(e,r,s){let l=0,c=this.distanceResultPoint(e,r),d=c/s,p=e.getX(),w=e.getY(),E=d*(r.getX()-e.getX())/c,R=d*(r.getY()-e.getY())/c;for(let P=0;P<s;P++)this.image.get(Qe.round(p+P*E),Qe.round(w+P*R))&&(l|=1<<s-P-1);return l}isWhiteOrBlackRectangle(e,r,s,l){let c=3;e=new _t(e.getX()-c,e.getY()+c),r=new _t(r.getX()-c,r.getY()-c),s=new _t(s.getX()+c,s.getY()-c),l=new _t(l.getX()+c,l.getY()+c);let d=this.getColor(l,e);if(d===0)return!1;let p=this.getColor(e,r);return p!==d||(p=this.getColor(r,s),p!==d)?!1:(p=this.getColor(s,l),p===d)}getColor(e,r){let s=this.distancePoint(e,r),l=(r.getX()-e.getX())/s,c=(r.getY()-e.getY())/s,d=0,p=e.getX(),w=e.getY(),E=this.image.get(e.getX(),e.getY()),R=Math.ceil(s);for(let D=0;D<R;D++)p+=l,w+=c,this.image.get(Qe.round(p),Qe.round(w))!==E&&d++;let P=d/s;return P>.1&&P<.9?0:P<=.1===E?1:-1}getFirstDifferent(e,r,s,l){let c=e.getX()+s,d=e.getY()+l;for(;this.isValid(c,d)&&this.image.get(c,d)===r;)c+=s,d+=l;for(c-=s,d-=l;this.isValid(c,d)&&this.image.get(c,d)===r;)c+=s;for(c-=s;this.isValid(c,d)&&this.image.get(c,d)===r;)d+=l;return d-=l,new _t(c,d)}expandSquare(e,r,s){let l=s/(2*r),c=e[0].getX()-e[2].getX(),d=e[0].getY()-e[2].getY(),p=(e[0].getX()+e[2].getX())/2,w=(e[0].getY()+e[2].getY())/2,E=new ze(p+l*c,w+l*d),R=new ze(p-l*c,w-l*d);c=e[1].getX()-e[3].getX(),d=e[1].getY()-e[3].getY(),p=(e[1].getX()+e[3].getX())/2,w=(e[1].getY()+e[3].getY())/2;let P=new ze(p+l*c,w+l*d),D=new ze(p-l*c,w-l*d);return[E,P,R,D]}isValid(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()}isValidPoint(e){let r=Qe.round(e.getX()),s=Qe.round(e.getY());return this.isValid(r,s)}distancePoint(e,r){return Qe.distance(e.getX(),e.getY(),r.getX(),r.getY())}distanceResultPoint(e,r){return Qe.distance(e.getX(),e.getY(),r.getX(),r.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(B.truncDivision(this.nbLayers-4,8)+1)+15}}class Yt{decode(e,r=null){let s=null,l=new en(e.getBlackMatrix()),c=null,d=null;try{let R=l.detectMirror(!1);c=R.getPoints(),this.reportFoundResultPoints(r,c),d=new Ke().decode(R)}catch(R){s=R}if(d==null)try{let R=l.detectMirror(!0);c=R.getPoints(),this.reportFoundResultPoints(r,c),d=new Ke().decode(R)}catch(R){throw s??R}let p=new be(d.getText(),d.getRawBytes(),d.getNumBits(),c,q.AZTEC,F.currentTimeMillis()),w=d.getByteSegments();w!=null&&p.putMetadata(xe.BYTE_SEGMENTS,w);let E=d.getECLevel();return E!=null&&p.putMetadata(xe.ERROR_CORRECTION_LEVEL,E),p}reportFoundResultPoints(e,r){if(e!=null){let s=e.get(re.NEED_RESULT_POINT_CALLBACK);s!=null&&r.forEach((l,c,d)=>{s.foundPossibleResultPoint(l)})}}reset(){}}class ct extends we{constructor(e=500){super(new Yt,e)}}class Ie{decode(e,r){try{return this.doDecode(e,r)}catch{if(r&&r.get(re.TRY_HARDER)===!0&&e.isRotateSupported()){const c=e.rotateCounterClockwise(),d=this.doDecode(c,r),p=d.getResultMetadata();let w=270;p!==null&&p.get(xe.ORIENTATION)===!0&&(w=w+p.get(xe.ORIENTATION)%360),d.putMetadata(xe.ORIENTATION,w);const E=d.getResultPoints();if(E!==null){const R=c.getHeight();for(let P=0;P<E.length;P++)E[P]=new ze(R-E[P].getY()-1,E[P].getX())}return d}else throw new Z}}reset(){}doDecode(e,r){const s=e.getWidth(),l=e.getHeight();let c=new Y(s);const d=r&&r.get(re.TRY_HARDER)===!0,p=Math.max(1,l>>(d?8:5));let w;d?w=l:w=15;const E=Math.trunc(l/2);for(let R=0;R<w;R++){const P=Math.trunc((R+1)/2),D=(R&1)===0,W=E+p*(D?P:-P);if(W<0||W>=l)break;try{c=e.getBlackRow(W,c)}catch{continue}for(let Q=0;Q<2;Q++){if(Q===1&&(c.reverse(),r&&r.get(re.NEED_RESULT_POINT_CALLBACK)===!0)){const ne=new Map;r.forEach((se,fe)=>ne.set(fe,se)),ne.delete(re.NEED_RESULT_POINT_CALLBACK),r=ne}try{const ne=this.decodeRow(W,c,r);if(Q===1){ne.putMetadata(xe.ORIENTATION,180);const se=ne.getResultPoints();se!==null&&(se[0]=new ze(s-se[0].getX()-1,se[0].getY()),se[1]=new ze(s-se[1].getX()-1,se[1].getY()))}return ne}catch{}}}throw new Z}static recordPattern(e,r,s){const l=s.length;for(let E=0;E<l;E++)s[E]=0;const c=e.getSize();if(r>=c)throw new Z;let d=!e.get(r),p=0,w=r;for(;w<c;){if(e.get(w)!==d)s[p]++;else{if(++p===l)break;s[p]=1,d=!d}w++}if(!(p===l||p===l-1&&w===c))throw new Z}static recordPatternInReverse(e,r,s){let l=s.length,c=e.get(r);for(;r>0&&l>=0;)e.get(--r)!==c&&(l--,c=!c);if(l>=0)throw new Z;Ie.recordPattern(e,r+1,s)}static patternMatchVariance(e,r,s){const l=e.length;let c=0,d=0;for(let E=0;E<l;E++)c+=e[E],d+=r[E];if(c<d)return Number.POSITIVE_INFINITY;const p=c/d;s*=p;let w=0;for(let E=0;E<l;E++){const R=e[E],P=r[E]*p,D=R>P?R-P:P-R;if(D>s)return Number.POSITIVE_INFINITY;w+=D}return w/c}}class ae extends Ie{static findStartPattern(e){const r=e.getSize(),s=e.getNextSet(0);let l=0,c=Int32Array.from([0,0,0,0,0,0]),d=s,p=!1;const w=6;for(let E=s;E<r;E++)if(e.get(E)!==p)c[l]++;else{if(l===w-1){let R=ae.MAX_AVG_VARIANCE,P=-1;for(let D=ae.CODE_START_A;D<=ae.CODE_START_C;D++){const W=Ie.patternMatchVariance(c,ae.CODE_PATTERNS[D],ae.MAX_INDIVIDUAL_VARIANCE);W<R&&(R=W,P=D)}if(P>=0&&e.isRange(Math.max(0,d-(E-d)/2),d,!1))return Int32Array.from([d,E,P]);d+=c[0]+c[1],c=c.slice(2,c.length-1),c[l-1]=0,c[l]=0,l--}else l++;c[l]=1,p=!p}throw new Z}static decodeCode(e,r,s){Ie.recordPattern(e,s,r);let l=ae.MAX_AVG_VARIANCE,c=-1;for(let d=0;d<ae.CODE_PATTERNS.length;d++){const p=ae.CODE_PATTERNS[d],w=this.patternMatchVariance(r,p,ae.MAX_INDIVIDUAL_VARIANCE);w<l&&(l=w,c=d)}if(c>=0)return c;throw new Z}decodeRow(e,r,s){const l=s&&s.get(re.ASSUME_GS1)===!0,c=ae.findStartPattern(r),d=c[2];let p=0;const w=new Uint8Array(20);w[p++]=d;let E;switch(d){case ae.CODE_START_A:E=ae.CODE_CODE_A;break;case ae.CODE_START_B:E=ae.CODE_CODE_B;break;case ae.CODE_START_C:E=ae.CODE_CODE_C;break;default:throw new G}let R=!1,P=!1,D="",W=c[0],Q=c[1];const ne=Int32Array.from([0,0,0,0,0,0]);let se=0,fe=0,Be=d,Ue=0,Pe=!0,Ot=!1,Nt=!1;for(;!R;){const ui=P;switch(P=!1,se=fe,fe=ae.decodeCode(r,ne,Q),w[p++]=fe,fe!==ae.CODE_STOP&&(Pe=!0),fe!==ae.CODE_STOP&&(Ue++,Be+=Ue*fe),W=Q,Q+=ne.reduce((ls,da)=>ls+da,0),fe){case ae.CODE_START_A:case ae.CODE_START_B:case ae.CODE_START_C:throw new G}switch(E){case ae.CODE_CODE_A:if(fe<64)Nt===Ot?D+=String.fromCharCode(32+fe):D+=String.fromCharCode(32+fe+128),Nt=!1;else if(fe<96)Nt===Ot?D+=String.fromCharCode(fe-64):D+=String.fromCharCode(fe+64),Nt=!1;else switch(fe!==ae.CODE_STOP&&(Pe=!1),fe){case ae.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case ae.CODE_FNC_2:case ae.CODE_FNC_3:break;case ae.CODE_FNC_4_A:!Ot&&Nt?(Ot=!0,Nt=!1):Ot&&Nt?(Ot=!1,Nt=!1):Nt=!0;break;case ae.CODE_SHIFT:P=!0,E=ae.CODE_CODE_B;break;case ae.CODE_CODE_B:E=ae.CODE_CODE_B;break;case ae.CODE_CODE_C:E=ae.CODE_CODE_C;break;case ae.CODE_STOP:R=!0;break}break;case ae.CODE_CODE_B:if(fe<96)Nt===Ot?D+=String.fromCharCode(32+fe):D+=String.fromCharCode(32+fe+128),Nt=!1;else switch(fe!==ae.CODE_STOP&&(Pe=!1),fe){case ae.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case ae.CODE_FNC_2:case ae.CODE_FNC_3:break;case ae.CODE_FNC_4_B:!Ot&&Nt?(Ot=!0,Nt=!1):Ot&&Nt?(Ot=!1,Nt=!1):Nt=!0;break;case ae.CODE_SHIFT:P=!0,E=ae.CODE_CODE_A;break;case ae.CODE_CODE_A:E=ae.CODE_CODE_A;break;case ae.CODE_CODE_C:E=ae.CODE_CODE_C;break;case ae.CODE_STOP:R=!0;break}break;case ae.CODE_CODE_C:if(fe<100)fe<10&&(D+="0"),D+=fe;else switch(fe!==ae.CODE_STOP&&(Pe=!1),fe){case ae.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case ae.CODE_CODE_A:E=ae.CODE_CODE_A;break;case ae.CODE_CODE_B:E=ae.CODE_CODE_B;break;case ae.CODE_STOP:R=!0;break}break}ui&&(E=E===ae.CODE_CODE_A?ae.CODE_CODE_B:ae.CODE_CODE_A)}const yr=Q-W;if(Q=r.getNextUnset(Q),!r.isRange(Q,Math.min(r.getSize(),Q+(Q-W)/2),!1))throw new Z;if(Be-=Ue*se,Be%103!==se)throw new M;const Wr=D.length;if(Wr===0)throw new Z;Wr>0&&Pe&&(E===ae.CODE_CODE_C?D=D.substring(0,Wr-2):D=D.substring(0,Wr-1));const Dn=(c[1]+c[0])/2,Xt=W+yr/2,Cn=w.length,dr=new Uint8Array(Cn);for(let ui=0;ui<Cn;ui++)dr[ui]=w[ui];const ji=[new ze(Dn,e),new ze(Xt,e)];return new be(D,dr,0,ji,q.CODE_128,new Date().getTime())}}ae.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ae.MAX_AVG_VARIANCE=.25,ae.MAX_INDIVIDUAL_VARIANCE=.7,ae.CODE_SHIFT=98,ae.CODE_CODE_C=99,ae.CODE_CODE_B=100,ae.CODE_CODE_A=101,ae.CODE_FNC_1=102,ae.CODE_FNC_2=97,ae.CODE_FNC_3=96,ae.CODE_FNC_4_A=101,ae.CODE_FNC_4_B=100,ae.CODE_START_A=103,ae.CODE_START_B=104,ae.CODE_START_C=105,ae.CODE_STOP=106;class ft extends Ie{constructor(e=!1,r=!1){super(),this.usingCheckDigit=e,this.extendedMode=r,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,r,s){let l=this.counters;l.fill(0),this.decodeRowResult="";let c=ft.findAsteriskPattern(r,l),d=r.getNextSet(c[1]),p=r.getSize(),w,E;do{ft.recordPattern(r,d,l);let ne=ft.toNarrowWidePattern(l);if(ne<0)throw new Z;w=ft.patternToChar(ne),this.decodeRowResult+=w,E=d;for(let se of l)d+=se;d=r.getNextSet(d)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let R=0;for(let ne of l)R+=ne;let P=d-E-R;if(d!==p&&P*2<R)throw new Z;if(this.usingCheckDigit){let ne=this.decodeRowResult.length-1,se=0;for(let fe=0;fe<ne;fe++)se+=ft.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(fe));if(this.decodeRowResult.charAt(ne)!==ft.ALPHABET_STRING.charAt(se%43))throw new M;this.decodeRowResult=this.decodeRowResult.substring(0,ne)}if(this.decodeRowResult.length===0)throw new Z;let D;this.extendedMode?D=ft.decodeExtended(this.decodeRowResult):D=this.decodeRowResult;let W=(c[1]+c[0])/2,Q=E+R/2;return new be(D,null,0,[new ze(W,e),new ze(Q,e)],q.CODE_39,new Date().getTime())}static findAsteriskPattern(e,r){let s=e.getSize(),l=e.getNextSet(0),c=0,d=l,p=!1,w=r.length;for(let E=l;E<s;E++)if(e.get(E)!==p)r[c]++;else{if(c===w-1){if(this.toNarrowWidePattern(r)===ft.ASTERISK_ENCODING&&e.isRange(Math.max(0,d-Math.floor((E-d)/2)),d,!1))return[d,E];d+=r[0]+r[1],r.copyWithin(0,2,2+c-1),r[c-1]=0,r[c]=0,c--}else c++;r[c]=1,p=!p}throw new Z}static toNarrowWidePattern(e){let r=e.length,s=0,l;do{let c=2147483647;for(let w of e)w<c&&w>s&&(c=w);s=c,l=0;let d=0,p=0;for(let w=0;w<r;w++){let E=e[w];E>s&&(p|=1<<r-1-w,l++,d+=E)}if(l===3){for(let w=0;w<r&&l>0;w++){let E=e[w];if(E>s&&(l--,E*2>=d))return-1}return p}}while(l>3);return-1}static patternToChar(e){for(let r=0;r<ft.CHARACTER_ENCODINGS.length;r++)if(ft.CHARACTER_ENCODINGS[r]===e)return ft.ALPHABET_STRING.charAt(r);if(e===ft.ASTERISK_ENCODING)return"*";throw new Z}static decodeExtended(e){let r=e.length,s="";for(let l=0;l<r;l++){let c=e.charAt(l);if(c==="+"||c==="$"||c==="%"||c==="/"){let d=e.charAt(l+1),p="\0";switch(c){case"+":if(d>="A"&&d<="Z")p=String.fromCharCode(d.charCodeAt(0)+32);else throw new G;break;case"$":if(d>="A"&&d<="Z")p=String.fromCharCode(d.charCodeAt(0)-64);else throw new G;break;case"%":if(d>="A"&&d<="E")p=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")p=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")p=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")p=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")p="\0";else if(d==="V")p="@";else if(d==="W")p="`";else if(d==="X"||d==="Y"||d==="Z")p="";else throw new G;break;case"/":if(d>="A"&&d<="O")p=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")p=":";else throw new G;break}s+=p,l++}else s+=c}return s}}ft.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",ft.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],ft.ASTERISK_ENCODING=148;class ot extends Ie{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,r,s){let l=this.decodeStart(r),c=this.decodeEnd(r),d=new Se;ot.decodeMiddle(r,l[1],c[0],d);let p=d.toString(),w=null;s!=null&&(w=s.get(re.ALLOWED_LENGTHS)),w==null&&(w=ot.DEFAULT_ALLOWED_LENGTHS);let E=p.length,R=!1,P=0;for(let Q of w){if(E===Q){R=!0;break}Q>P&&(P=Q)}if(!R&&E>P&&(R=!0),!R)throw new G;const D=[new ze(l[1],e),new ze(c[0],e)];return new be(p,null,0,D,q.ITF,new Date().getTime())}static decodeMiddle(e,r,s,l){let c=new Int32Array(10),d=new Int32Array(5),p=new Int32Array(5);for(c.fill(0),d.fill(0),p.fill(0);r<s;){Ie.recordPattern(e,r,c);for(let E=0;E<5;E++){let R=2*E;d[E]=c[R],p[E]=c[R+1]}let w=ot.decodeDigit(d);l.append(w.toString()),w=this.decodeDigit(p),l.append(w.toString()),c.forEach(function(E){r+=E})}}decodeStart(e){let r=ot.skipWhiteSpace(e),s=ot.findGuardPattern(e,r,ot.START_PATTERN);return this.narrowLineWidth=(s[1]-s[0])/4,this.validateQuietZone(e,s[0]),s}validateQuietZone(e,r){let s=this.narrowLineWidth*10;s=s<r?s:r;for(let l=r-1;s>0&&l>=0&&!e.get(l);l--)s--;if(s!==0)throw new Z}static skipWhiteSpace(e){const r=e.getSize(),s=e.getNextSet(0);if(s===r)throw new Z;return s}decodeEnd(e){e.reverse();try{let r=ot.skipWhiteSpace(e),s;try{s=ot.findGuardPattern(e,r,ot.END_PATTERN_REVERSED[0])}catch(c){c instanceof Z&&(s=ot.findGuardPattern(e,r,ot.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,s[0]);let l=s[0];return s[0]=e.getSize()-s[1],s[1]=e.getSize()-l,s}finally{e.reverse()}}static findGuardPattern(e,r,s){let l=s.length,c=new Int32Array(l),d=e.getSize(),p=!1,w=0,E=r;c.fill(0);for(let R=r;R<d;R++)if(e.get(R)!==p)c[w]++;else{if(w===l-1){if(Ie.patternMatchVariance(c,s,ot.MAX_INDIVIDUAL_VARIANCE)<ot.MAX_AVG_VARIANCE)return[E,R];E+=c[0]+c[1],F.arraycopy(c,2,c,0,w-1),c[w-1]=0,c[w]=0,w--}else w++;c[w]=1,p=!p}throw new Z}static decodeDigit(e){let r=ot.MAX_AVG_VARIANCE,s=-1,l=ot.PATTERNS.length;for(let c=0;c<l;c++){let d=ot.PATTERNS[c],p=Ie.patternMatchVariance(e,d,ot.MAX_INDIVIDUAL_VARIANCE);p<r?(r=p,s=c):p===r&&(s=-1)}if(s>=0)return s%10;throw new Z}}ot.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ot.MAX_AVG_VARIANCE=.38,ot.MAX_INDIVIDUAL_VARIANCE=.5,ot.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ot.START_PATTERN=Int32Array.from([1,1,1,1]),ot.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class ut extends Ie{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let r=!1,s,l=0,c=Int32Array.from([0,0,0]);for(;!r;){c=Int32Array.from([0,0,0]),s=ut.findGuardPattern(e,l,!1,this.START_END_PATTERN,c);let d=s[0];l=s[1];let p=d-(l-d);p>=0&&(r=e.isRange(p,d,!1))}return s}static checkChecksum(e){return ut.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let r=e.length;if(r===0)return!1;let s=parseInt(e.charAt(r-1),10);return ut.getStandardUPCEANChecksum(e.substring(0,r-1))===s}static getStandardUPCEANChecksum(e){let r=e.length,s=0;for(let l=r-1;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new G;s+=c}s*=3;for(let l=r-2;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new G;s+=c}return(1e3-s)%10}static decodeEnd(e,r){return ut.findGuardPattern(e,r,!1,ut.START_END_PATTERN,new Int32Array(ut.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,r,s,l){return this.findGuardPattern(e,r,s,l,new Int32Array(l.length))}static findGuardPattern(e,r,s,l,c){let d=e.getSize();r=s?e.getNextUnset(r):e.getNextSet(r);let p=0,w=r,E=l.length,R=s;for(let P=r;P<d;P++)if(e.get(P)!==R)c[p]++;else{if(p===E-1){if(Ie.patternMatchVariance(c,l,ut.MAX_INDIVIDUAL_VARIANCE)<ut.MAX_AVG_VARIANCE)return Int32Array.from([w,P]);w+=c[0]+c[1];let D=c.slice(2,c.length-1);for(let W=0;W<p-1;W++)c[W]=D[W];c[p-1]=0,c[p]=0,p--}else p++;c[p]=1,R=!R}throw new Z}static decodeDigit(e,r,s,l){this.recordPattern(e,s,r);let c=this.MAX_AVG_VARIANCE,d=-1,p=l.length;for(let w=0;w<p;w++){let E=l[w],R=Ie.patternMatchVariance(r,E,ut.MAX_INDIVIDUAL_VARIANCE);R<c&&(c=R,d=w)}if(d>=0)return d;throw new Z}}ut.MAX_AVG_VARIANCE=.48,ut.MAX_INDIVIDUAL_VARIANCE=.7,ut.START_END_PATTERN=Int32Array.from([1,1,1]),ut.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),ut.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ut.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Zt{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,r,s){let l=this.decodeRowStringBuffer,c=this.decodeMiddle(r,s,l),d=l.toString(),p=Zt.parseExtensionString(d),w=[new ze((s[0]+s[1])/2,e),new ze(c,e)],E=new be(d,null,0,w,q.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&E.putAllMetadata(p),E}decodeMiddle(e,r,s){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),d=r[1],p=0;for(let E=0;E<5&&d<c;E++){let R=ut.decodeDigit(e,l,d,ut.L_AND_G_PATTERNS);s+=String.fromCharCode(48+R%10);for(let P of l)d+=P;R>=10&&(p|=1<<4-E),E!==4&&(d=e.getNextSet(d),d=e.getNextUnset(d))}if(s.length!==5)throw new Z;let w=this.determineCheckDigit(p);if(Zt.extensionChecksum(s.toString())!==w)throw new Z;return d}static extensionChecksum(e){let r=e.length,s=0;for(let l=r-2;l>=0;l-=2)s+=e.charAt(l).charCodeAt(0)-48;s*=3;for(let l=r-1;l>=0;l-=2)s+=e.charAt(l).charCodeAt(0)-48;return s*=3,s%10}determineCheckDigit(e){for(let r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new Z}static parseExtensionString(e){if(e.length!==5)return null;let r=Zt.parseExtension5String(e);return r==null?null:new Map([[xe.SUGGESTED_PRICE,r]])}static parseExtension5String(e){let r;switch(e.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}let s=parseInt(e.substring(1)),l=(s/100).toString(),c=s%100,d=c<10?"0"+c:c.toString();return r+l+"."+d}}class cn{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,r,s){let l=this.decodeRowStringBuffer,c=this.decodeMiddle(r,s,l),d=l.toString(),p=cn.parseExtensionString(d),w=[new ze((s[0]+s[1])/2,e),new ze(c,e)],E=new be(d,null,0,w,q.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&E.putAllMetadata(p),E}decodeMiddle(e,r,s){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),d=r[1],p=0;for(let w=0;w<2&&d<c;w++){let E=ut.decodeDigit(e,l,d,ut.L_AND_G_PATTERNS);s+=String.fromCharCode(48+E%10);for(let R of l)d+=R;E>=10&&(p|=1<<1-w),w!==1&&(d=e.getNextSet(d),d=e.getNextUnset(d))}if(s.length!==2)throw new Z;if(parseInt(s.toString())%4!==p)throw new Z;return d}static parseExtensionString(e){return e.length!==2?null:new Map([[xe.ISSUE_NUMBER,parseInt(e)]])}}class un{static decodeRow(e,r,s){let l=ut.findGuardPattern(r,s,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Zt().decodeRow(e,r,l)}catch{return new cn().decodeRow(e,r,l)}}}un.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Fe extends ut{constructor(){super(),this.decodeRowStringBuffer="",Fe.L_AND_G_PATTERNS=Fe.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let r=Fe.L_PATTERNS[e-10],s=new Int32Array(r.length);for(let l=0;l<r.length;l++)s[l]=r[r.length-l-1];Fe.L_AND_G_PATTERNS[e]=s}}decodeRow(e,r,s){let l=Fe.findStartGuardPattern(r),c=s==null?null:s.get(re.NEED_RESULT_POINT_CALLBACK);if(c!=null){const Pe=new ze((l[0]+l[1])/2,e);c.foundPossibleResultPoint(Pe)}let d=this.decodeMiddle(r,l,this.decodeRowStringBuffer),p=d.rowOffset,w=d.resultString;if(c!=null){const Pe=new ze(p,e);c.foundPossibleResultPoint(Pe)}let E=this.decodeEnd(r,p);if(c!=null){const Pe=new ze((E[0]+E[1])/2,e);c.foundPossibleResultPoint(Pe)}let R=E[1],P=R+(R-E[0]);if(P>=r.getSize()||!r.isRange(R,P,!1))throw new Z;let D=w.toString();if(D.length<8)throw new G;if(!Fe.checkChecksum(D))throw new M;let W=(l[1]+l[0])/2,Q=(E[1]+E[0])/2,ne=this.getBarcodeFormat(),se=[new ze(W,e),new ze(Q,e)],fe=new be(D,null,0,se,ne,new Date().getTime()),Be=0;try{let Pe=un.decodeRow(e,r,E[1]);fe.putMetadata(xe.UPC_EAN_EXTENSION,Pe.getText()),fe.putAllMetadata(Pe.getResultMetadata()),fe.addResultPoints(Pe.getResultPoints()),Be=Pe.getText().length}catch{}let Ue=s==null?null:s.get(re.ALLOWED_EAN_EXTENSIONS);if(Ue!=null){let Pe=!1;for(let Ot in Ue)if(Be.toString()===Ot){Pe=!0;break}if(!Pe)throw new Z}return fe}decodeEnd(e,r){return Fe.findGuardPattern(e,r,!1,Fe.START_END_PATTERN,new Int32Array(Fe.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return Fe.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let r=e.length;if(r===0)return!1;let s=parseInt(e.charAt(r-1),10);return Fe.getStandardUPCEANChecksum(e.substring(0,r-1))===s}static getStandardUPCEANChecksum(e){let r=e.length,s=0;for(let l=r-1;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new G;s+=c}s*=3;for(let l=r-2;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new G;s+=c}return(1e3-s)%10}}class dn extends Fe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,r,s){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),d=r[1],p=0;for(let E=0;E<6&&d<c;E++){let R=Fe.decodeDigit(e,l,d,Fe.L_AND_G_PATTERNS);s+=String.fromCharCode(48+R%10);for(let P of l)d+=P;R>=10&&(p|=1<<5-E)}s=dn.determineFirstDigit(s,p),d=Fe.findGuardPattern(e,d,!0,Fe.MIDDLE_PATTERN,new Int32Array(Fe.MIDDLE_PATTERN.length).fill(0))[1];for(let E=0;E<6&&d<c;E++){let R=Fe.decodeDigit(e,l,d,Fe.L_PATTERNS);s+=String.fromCharCode(48+R);for(let P of l)d+=P}return{rowOffset:d,resultString:s}}getBarcodeFormat(){return q.EAN_13}static determineFirstDigit(e,r){for(let s=0;s<10;s++)if(r===this.FIRST_DIGIT_ENCODINGS[s])return e=String.fromCharCode(48+s)+e,e;throw new Z}}dn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Gn extends Fe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,r,s){const l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),d=r[1];for(let w=0;w<4&&d<c;w++){let E=Fe.decodeDigit(e,l,d,Fe.L_PATTERNS);s+=String.fromCharCode(48+E);for(let R of l)d+=R}d=Fe.findGuardPattern(e,d,!0,Fe.MIDDLE_PATTERN,new Int32Array(Fe.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<4&&d<c;w++){let E=Fe.decodeDigit(e,l,d,Fe.L_PATTERNS);s+=String.fromCharCode(48+E);for(let R of l)d+=R}return{rowOffset:d,resultString:s}}getBarcodeFormat(){return q.EAN_8}}class Yr extends Fe{constructor(){super(...arguments),this.ean13Reader=new dn}getBarcodeFormat(){return q.UPC_A}decode(e,r){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,r,s){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,r,s))}decodeMiddle(e,r,s){return this.ean13Reader.decodeMiddle(e,r,s)}maybeReturnResult(e){let r=e.getText();if(r.charAt(0)==="0"){let s=new be(r.substring(1),null,null,e.getResultPoints(),q.UPC_A);return e.getResultMetadata()!=null&&s.putAllMetadata(e.getResultMetadata()),s}else throw new Z}reset(){this.ean13Reader.reset()}}class Fn extends Fe{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,r,s){const l=this.decodeMiddleCounters.map(E=>E);l[0]=0,l[1]=0,l[2]=0,l[3]=0;const c=e.getSize();let d=r[1],p=0;for(let E=0;E<6&&d<c;E++){const R=Fn.decodeDigit(e,l,d,Fn.L_AND_G_PATTERNS);s+=String.fromCharCode(48+R%10);for(let P of l)d+=P;R>=10&&(p|=1<<5-E)}let w=Fn.determineNumSysAndCheckDigit(s,p);return{rowOffset:d,resultString:w}}decodeEnd(e,r){return Fn.findGuardPatternWithoutCounters(e,r,!0,Fn.MIDDLE_END_PATTERN)}checkChecksum(e){return Fe.checkChecksum(Fn.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,r){for(let s=0;s<=1;s++)for(let l=0;l<10;l++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[s][l]){let c=String.fromCharCode(48+s),d=String.fromCharCode(48+l);return c+e+d}throw Z.getNotFoundInstance()}getBarcodeFormat(){return q.UPC_E}static convertUPCEtoUPCA(e){const r=e.slice(1,7).split("").map(c=>c.charCodeAt(0)),s=new Se;s.append(e.charAt(0));let l=r[5];switch(l){case 0:case 1:case 2:s.appendChars(r,0,2),s.append(l),s.append("0000"),s.appendChars(r,2,3);break;case 3:s.appendChars(r,0,3),s.append("00000"),s.appendChars(r,3,2);break;case 4:s.appendChars(r,0,4),s.append("00000"),s.append(r[4]);break;default:s.appendChars(r,0,5),s.append("0000"),s.append(l);break}return e.length>=8&&s.append(e.charAt(7)),s.toString()}}Fn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Fn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Qi extends Ie{constructor(e){super();let r=e==null?null:e.get(re.POSSIBLE_FORMATS),s=[];u(r)?(s.push(new dn),s.push(new Yr),s.push(new Gn),s.push(new Fn)):(r.indexOf(q.EAN_13)>-1&&s.push(new dn),r.indexOf(q.UPC_A)>-1&&s.push(new Yr),r.indexOf(q.EAN_8)>-1&&s.push(new Gn),r.indexOf(q.UPC_E)>-1&&s.push(new Fn)),this.readers=s}decodeRow(e,r,s){for(let l of this.readers)try{const c=l.decodeRow(e,r,s),d=c.getBarcodeFormat()===q.EAN_13&&c.getText().charAt(0)==="0",p=s==null?null:s.get(re.POSSIBLE_FORMATS),w=p==null||p.includes(q.UPC_A);if(d&&w){const E=c.getRawBytes(),R=new be(c.getText().substring(1),E,E?E.length:null,c.getResultPoints(),q.UPC_A);return R.putAllMetadata(c.getResultMetadata()),R}return c}catch{}throw new Z}reset(){for(let e of this.readers)e.reset()}}class xn extends Ie{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,r){for(let s=0;s<r.length;s++)if(Ie.patternMatchVariance(e,r[s],xn.MAX_INDIVIDUAL_VARIANCE)<xn.MAX_AVG_VARIANCE)return s;throw new Z}static count(e){return Qe.sum(new Int32Array(e))}static increment(e,r){let s=0,l=r[0];for(let c=1;c<e.length;c++)r[c]>l&&(l=r[c],s=c);e[s]++}static decrement(e,r){let s=0,l=r[0];for(let c=1;c<e.length;c++)r[c]<l&&(l=r[c],s=c);e[s]--}static isFinderPattern(e){let r=e[0]+e[1],s=r+e[2]+e[3],l=r/s;if(l>=xn.MIN_FINDER_PATTERN_RATIO&&l<=xn.MAX_FINDER_PATTERN_RATIO){let c=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;for(let p of e)p>d&&(d=p),p<c&&(c=p);return d<10*c}return!1}}xn.MAX_AVG_VARIANCE=.2,xn.MAX_INDIVIDUAL_VARIANCE=.45,xn.MIN_FINDER_PATTERN_RATIO=9.5/12,xn.MAX_FINDER_PATTERN_RATIO=12.5/14;class $r{constructor(e,r){this.value=e,this.checksumPortion=r}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof $r))return!1;const r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class si{constructor(e,r,s,l,c){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new ze(s,c)),this.resultPoints.push(new ze(l,c))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof si))return!1;const r=e;return this.value===r.value}hashCode(){return this.value}}class Vn{constructor(){}static getRSSvalue(e,r,s){let l=0;for(let w of e)l+=w;let c=0,d=0,p=e.length;for(let w=0;w<p-1;w++){let E;for(E=1,d|=1<<w;E<e[w];E++,d&=~(1<<w)){let R=Vn.combins(l-E-1,p-w-2);if(s&&d===0&&l-E-(p-w-1)>=p-w-1&&(R-=Vn.combins(l-E-(p-w),p-w-2)),p-w-1>1){let P=0;for(let D=l-E-(p-w-2);D>r;D--)P+=Vn.combins(l-E-D-1,p-w-3);R-=P*(p-1-w)}else l-E>r&&R--;c+=R}l-=E}return c}static combins(e,r){let s,l;e-r>r?(l=r,s=e-r):(l=e-r,s=r);let c=1,d=1;for(let p=e;p>s;p--)c*=p,d<=l&&(c/=d,d++);for(;d<=l;)c/=d,d++;return c}}class ki{static buildBitArray(e){let r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);let s=12*r,l=new Y(s),c=0,p=e[0].getRightChar().getValue();for(let w=11;w>=0;--w)p&1<<w&&l.set(c),c++;for(let w=1;w<e.length;++w){let E=e[w],R=E.getLeftChar().getValue();for(let P=11;P>=0;--P)R&1<<P&&l.set(c),c++;if(E.getRightChar()!=null){let P=E.getRightChar().getValue();for(let D=11;D>=0;--D)P&1<<D&&l.set(c),c++}}return l}}class yn{constructor(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Ji{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class Kt extends Ji{constructor(e,r){super(e),this.value=r}getValue(){return this.value}isFNC1(){return this.value===Kt.FNC1}}Kt.FNC1="$";class Sr extends Ji{constructor(e,r,s){super(e),s?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=r}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class $t extends Ji{constructor(e,r,s){if(super(e),r<0||r>10||s<0||s>10)throw new G;this.firstDigit=r,this.secondDigit=s}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===$t.FNC1}isSecondDigitFNC1(){return this.secondDigit===$t.FNC1}isAnyFNC1(){return this.firstDigit===$t.FNC1||this.secondDigit===$t.FNC1}}$t.FNC1=10;class Ze{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new Z;let r=e.substring(0,2);for(let c of Ze.TWO_DIGIT_DATA_LENGTH)if(c[0]===r)return c[1]===Ze.VARIABLE_LENGTH?Ze.processVariableAI(2,c[2],e):Ze.processFixedAI(2,c[1],e);if(e.length<3)throw new Z;let s=e.substring(0,3);for(let c of Ze.THREE_DIGIT_DATA_LENGTH)if(c[0]===s)return c[1]===Ze.VARIABLE_LENGTH?Ze.processVariableAI(3,c[2],e):Ze.processFixedAI(3,c[1],e);for(let c of Ze.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(c[0]===s)return c[1]===Ze.VARIABLE_LENGTH?Ze.processVariableAI(4,c[2],e):Ze.processFixedAI(4,c[1],e);if(e.length<4)throw new Z;let l=e.substring(0,4);for(let c of Ze.FOUR_DIGIT_DATA_LENGTH)if(c[0]===l)return c[1]===Ze.VARIABLE_LENGTH?Ze.processVariableAI(4,c[2],e):Ze.processFixedAI(4,c[1],e);throw new Z}static processFixedAI(e,r,s){if(s.length<e)throw new Z;let l=s.substring(0,e);if(s.length<e+r)throw new Z;let c=s.substring(e,e+r),d=s.substring(e+r),p="("+l+")"+c,w=Ze.parseFieldsInGeneralPurpose(d);return w==null?p:p+w}static processVariableAI(e,r,s){let l=s.substring(0,e),c;s.length<e+r?c=s.length:c=e+r;let d=s.substring(e,c),p=s.substring(c),w="("+l+")"+d,E=Ze.parseFieldsInGeneralPurpose(p);return E==null?w:w+E}}Ze.VARIABLE_LENGTH=[],Ze.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ze.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ze.VARIABLE_LENGTH,20],["22",Ze.VARIABLE_LENGTH,29],["30",Ze.VARIABLE_LENGTH,8],["37",Ze.VARIABLE_LENGTH,8],["90",Ze.VARIABLE_LENGTH,30],["91",Ze.VARIABLE_LENGTH,30],["92",Ze.VARIABLE_LENGTH,30],["93",Ze.VARIABLE_LENGTH,30],["94",Ze.VARIABLE_LENGTH,30],["95",Ze.VARIABLE_LENGTH,30],["96",Ze.VARIABLE_LENGTH,30],["97",Ze.VARIABLE_LENGTH,3],["98",Ze.VARIABLE_LENGTH,30],["99",Ze.VARIABLE_LENGTH,30]],Ze.THREE_DIGIT_DATA_LENGTH=[["240",Ze.VARIABLE_LENGTH,30],["241",Ze.VARIABLE_LENGTH,30],["242",Ze.VARIABLE_LENGTH,6],["250",Ze.VARIABLE_LENGTH,30],["251",Ze.VARIABLE_LENGTH,30],["253",Ze.VARIABLE_LENGTH,17],["254",Ze.VARIABLE_LENGTH,20],["400",Ze.VARIABLE_LENGTH,30],["401",Ze.VARIABLE_LENGTH,30],["402",17],["403",Ze.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ze.VARIABLE_LENGTH,20],["421",Ze.VARIABLE_LENGTH,15],["422",3],["423",Ze.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ze.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ze.VARIABLE_LENGTH,15],["391",Ze.VARIABLE_LENGTH,18],["392",Ze.VARIABLE_LENGTH,15],["393",Ze.VARIABLE_LENGTH,18],["703",Ze.VARIABLE_LENGTH,30]],Ze.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ze.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ze.VARIABLE_LENGTH,20],["8003",Ze.VARIABLE_LENGTH,30],["8004",Ze.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ze.VARIABLE_LENGTH,30],["8008",Ze.VARIABLE_LENGTH,12],["8018",18],["8020",Ze.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ze.VARIABLE_LENGTH,70],["8200",Ze.VARIABLE_LENGTH,70]];class kn{constructor(e){this.buffer=new Se,this.information=e}decodeAllCodes(e,r){let s=r,l=null;do{let c=this.decodeGeneralPurposeField(s,l),d=Ze.parseFieldsInGeneralPurpose(c.getNewString());if(d!=null&&e.append(d),c.isRemaining()?l=""+c.getRemainingValue():l=null,s===c.getNewPosition())break;s=c.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let c=this.extractNumericValueFromBitArray(e,4);return c===0?new $t(this.information.getSize(),$t.FNC1,$t.FNC1):new $t(this.information.getSize(),c-1,$t.FNC1)}let r=this.extractNumericValueFromBitArray(e,7),s=(r-8)/11,l=(r-8)%11;return new $t(e+7,s,l)}extractNumericValueFromBitArray(e,r){return kn.extractNumericValueFromBitArray(this.information,e,r)}static extractNumericValueFromBitArray(e,r,s){let l=0;for(let c=0;c<s;++c)e.get(r+c)&&(l|=1<<s-c-1);return l}decodeGeneralPurposeField(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);let s=this.parseBlocks();return s!=null&&s.isRemaining()?new Sr(this.current.getPosition(),this.buffer.toString(),s.getRemainingValue()):new Sr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,r;do{let s=this.current.getPosition();if(this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished()),!(s!==this.current.getPosition())&&!e)break}while(!e);return r.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let r;return e.isSecondDigitFNC1()?r=new Sr(this.current.getPosition(),this.buffer.toString()):r=new Sr(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new yn(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let r=new Sr(this.current.getPosition(),this.buffer.toString());return new yn(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new yn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let r=new Sr(this.current.getPosition(),this.buffer.toString());return new yn(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new yn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let r=new Sr(this.current.getPosition(),this.buffer.toString());return new yn(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new yn(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(e,7);if(s>=64&&s<116)return!0;if(e+8>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(e,8);return l>=232&&l<253}decodeIsoIec646(e){let r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new Kt(e+5,Kt.FNC1);if(r>=5&&r<15)return new Kt(e+5,"0"+(r-5));let s=this.extractNumericValueFromBitArray(e,7);if(s>=64&&s<90)return new Kt(e+7,""+(s+1));if(s>=90&&s<116)return new Kt(e+7,""+(s+7));let l=this.extractNumericValueFromBitArray(e,8),c;switch(l){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new G}return new Kt(e+8,c)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(e,6);return s>=16&&s<63}decodeAlphanumeric(e){let r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new Kt(e+5,Kt.FNC1);if(r>=5&&r<15)return new Kt(e+5,"0"+(r-5));let s=this.extractNumericValueFromBitArray(e,6);if(s>=32&&s<58)return new Kt(e+6,""+(s+33));let l;switch(s){case 58:l="*";break;case 59:l=",";break;case 60:l="-";break;case 61:l=".";break;case 62:l="/";break;default:throw new $e("Decoding invalid alphanumeric value: "+s)}return new Kt(e+6,l)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0}}class es{constructor(e){this.information=e,this.generalDecoder=new kn(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Xn extends es{constructor(e){super(e)}encodeCompressedGtin(e,r){e.append("(01)");let s=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,r,s)}encodeCompressedGtinWithoutAI(e,r,s){for(let l=0;l<4;++l){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*l,10);c/100===0&&e.append("0"),c/10===0&&e.append("0"),e.append(c)}Xn.appendCheckDigit(e,s)}static appendCheckDigit(e,r){let s=0;for(let l=0;l<13;l++){let c=e.charAt(l+r).charCodeAt(0)-48;s+=l&1?c:3*c}s=10-s%10,s===10&&(s=0),e.append(s)}}Xn.GTIN_SIZE=40;class gr extends Xn{constructor(e){super(e)}parseInformation(){let e=new Se;e.append("(01)");let r=e.length(),s=this.getGeneralDecoder().extractNumericValueFromBitArray(gr.HEADER_SIZE,4);return e.append(s),this.encodeCompressedGtinWithoutAI(e,gr.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(e,gr.HEADER_SIZE+44)}}gr.HEADER_SIZE=4;class oi extends es{constructor(e){super(e)}parseInformation(){let e=new Se;return this.getGeneralDecoder().decodeAllCodes(e,oi.HEADER_SIZE)}}oi.HEADER_SIZE=5;class Ar extends Xn{constructor(e){super(e)}encodeCompressedWeight(e,r,s){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(r,s);this.addWeightCode(e,l);let c=this.checkWeight(l),d=1e5;for(let p=0;p<5;++p)c/d===0&&e.append("0"),d/=10;e.append(c)}}class nr extends Ar{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=nr.HEADER_SIZE+Ar.GTIN_SIZE+nr.WEIGHT_SIZE)throw new Z;let e=new Se;return this.encodeCompressedGtin(e,nr.HEADER_SIZE),this.encodeCompressedWeight(e,nr.HEADER_SIZE+Ar.GTIN_SIZE,nr.WEIGHT_SIZE),e.toString()}}nr.HEADER_SIZE=5,nr.WEIGHT_SIZE=15;class Jo extends nr{constructor(e){super(e)}addWeightCode(e,r){e.append("(3103)")}checkWeight(e){return e}}class _s extends nr{constructor(e){super(e)}addWeightCode(e,r){r<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class Yn extends Xn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Yn.HEADER_SIZE+Xn.GTIN_SIZE)throw new Z;let e=new Se;this.encodeCompressedGtin(e,Yn.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(Yn.HEADER_SIZE+Xn.GTIN_SIZE,Yn.LAST_DIGIT_SIZE);e.append("(392"),e.append(r),e.append(")");let s=this.getGeneralDecoder().decodeGeneralPurposeField(Yn.HEADER_SIZE+Xn.GTIN_SIZE+Yn.LAST_DIGIT_SIZE,null);return e.append(s.getNewString()),e.toString()}}Yn.HEADER_SIZE=8,Yn.LAST_DIGIT_SIZE=2;class $n extends Xn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<$n.HEADER_SIZE+Xn.GTIN_SIZE)throw new Z;let e=new Se;this.encodeCompressedGtin(e,$n.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray($n.HEADER_SIZE+Xn.GTIN_SIZE,$n.LAST_DIGIT_SIZE);e.append("(393"),e.append(r),e.append(")");let s=this.getGeneralDecoder().extractNumericValueFromBitArray($n.HEADER_SIZE+Xn.GTIN_SIZE+$n.LAST_DIGIT_SIZE,$n.FIRST_THREE_DIGITS_SIZE);s/100==0&&e.append("0"),s/10==0&&e.append("0"),e.append(s);let l=this.getGeneralDecoder().decodeGeneralPurposeField($n.HEADER_SIZE+Xn.GTIN_SIZE+$n.LAST_DIGIT_SIZE+$n.FIRST_THREE_DIGITS_SIZE,null);return e.append(l.getNewString()),e.toString()}}$n.HEADER_SIZE=8,$n.LAST_DIGIT_SIZE=2,$n.FIRST_THREE_DIGITS_SIZE=10;class tn extends Ar{constructor(e,r,s){super(e),this.dateCode=s,this.firstAIdigits=r}parseInformation(){if(this.getInformation().getSize()!=tn.HEADER_SIZE+tn.GTIN_SIZE+tn.WEIGHT_SIZE+tn.DATE_SIZE)throw new Z;let e=new Se;return this.encodeCompressedGtin(e,tn.HEADER_SIZE),this.encodeCompressedWeight(e,tn.HEADER_SIZE+tn.GTIN_SIZE,tn.WEIGHT_SIZE),this.encodeCompressedDate(e,tn.HEADER_SIZE+tn.GTIN_SIZE+tn.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,r){let s=this.getGeneralDecoder().extractNumericValueFromBitArray(r,tn.DATE_SIZE);if(s==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let l=s%32;s/=32;let c=s%12+1;s/=12;let d=s;d/10==0&&e.append("0"),e.append(d),c/10==0&&e.append("0"),e.append(c),l/10==0&&e.append("0"),e.append(l)}addWeightCode(e,r){e.append("("),e.append(this.firstAIdigits),e.append(r/1e5),e.append(")")}checkWeight(e){return e%1e5}}tn.HEADER_SIZE=8,tn.WEIGHT_SIZE=20,tn.DATE_SIZE=16;function Rs(k){try{if(k.get(1))return new gr(k);if(!k.get(2))return new oi(k);switch(kn.extractNumericValueFromBitArray(k,1,4)){case 4:return new Jo(k);case 5:return new _s(k)}switch(kn.extractNumericValueFromBitArray(k,1,5)){case 12:return new Yn(k);case 13:return new $n(k)}switch(kn.extractNumericValueFromBitArray(k,1,7)){case 56:return new tn(k,"310","11");case 57:return new tn(k,"320","11");case 58:return new tn(k,"310","13");case 59:return new tn(k,"320","13");case 60:return new tn(k,"310","15");case 61:return new tn(k,"320","15");case 62:return new tn(k,"310","17");case 63:return new tn(k,"320","17")}}catch(e){throw console.log(e),new $e("unknown decoder: "+k)}}class zt{constructor(e,r,s,l){this.leftchar=e,this.rightchar=r,this.finderpattern=s,this.maybeLast=l}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,r){return e instanceof zt?zt.equalsOrNull(e.leftchar,r.leftchar)&&zt.equalsOrNull(e.rightchar,r.rightchar)&&zt.equalsOrNull(e.finderpattern,r.finderpattern):!1}static equalsOrNull(e,r){return e===null?r===null:zt.equals(e,r)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class ks{constructor(e,r,s){this.pairs=e,this.rowNumber=r,this.wasReversed=s}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,r){return e instanceof ks?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1}checkEqualitity(e,r){if(!e||!r)return;let s;return e.forEach((l,c)=>{r.forEach(d=>{l.getLeftChar().getValue()===d.getLeftChar().getValue()&&l.getRightChar().getValue()===d.getRightChar().getValue()&&l.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(s=!0)})}),s}}class Te extends xn{constructor(e){super(...arguments),this.pairs=new Array(Te.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,r,s){this.pairs.length=0,this.startFromEven=!1;try{return Te.constructResult(this.decodeRow2pairs(e,r))}catch(l){this.verbose&&console.log(l)}return this.pairs.length=0,this.startFromEven=!0,Te.constructResult(this.decodeRow2pairs(e,r))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,r){let s=!1;for(;!s;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,e))}catch(c){if(c instanceof Z){if(!this.pairs.length)throw new Z;s=!0}}if(this.checkChecksum())return this.pairs;let l;if(this.rows.length?l=!0:l=!1,this.storeRow(e,!1),l){let c=this.checkRowsBoolean(!1);if(c!=null||(c=this.checkRowsBoolean(!0),c!=null))return c}throw new Z}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let r=null;try{r=this.checkRows(new Array,0)}catch(s){this.verbose&&console.log(s)}return e&&(this.rows=this.rows.reverse()),r}checkRows(e,r){for(let s=r;s<this.rows.length;s++){let l=this.rows[s];this.pairs.length=0;for(let d of e)this.pairs.push(d.getPairs());if(this.pairs.push(l.getPairs()),!Te.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let c=new Array(e);c.push(l);try{return this.checkRows(c,s+1)}catch(d){this.verbose&&console.log(d)}}throw new Z}static isValidSequence(e){for(let r of Te.FINDER_PATTERN_SEQUENCES){if(e.length>r.length)continue;let s=!0;for(let l=0;l<e.length;l++)if(e[l].getFinderPattern().getValue()!=r[l]){s=!1;break}if(s)return!0}return!1}storeRow(e,r){let s=0,l=!1,c=!1;for(;s<this.rows.length;){let d=this.rows[s];if(d.getRowNumber()>e){c=d.isEquivalent(this.pairs);break}l=d.isEquivalent(this.pairs),s++}c||l||Te.isPartialRow(this.pairs,this.rows)||(this.rows.push(s,new ks(this.pairs,e,r)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,r){for(let s of r)if(s.getPairs().length!==e.length){for(let l of s.getPairs())for(let c of e)if(zt.equals(l,c))break}}static isPartialRow(e,r){for(let s of r){let l=!0;for(let c of e){let d=!1;for(let p of s.getPairs())if(c.equals(p)){d=!0;break}if(!d){l=!1;break}}if(l)return!0}return!1}getRows(){return this.rows}static constructResult(e){let r=ki.buildBitArray(e),l=Rs(r).parseInformation(),c=e[0].getFinderPattern().getResultPoints(),d=e[e.length-1].getFinderPattern().getResultPoints(),p=[c[0],c[1],d[0],d[1]];return new be(l,null,null,p,q.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),r=e.getLeftChar(),s=e.getRightChar();if(s==null)return!1;let l=s.getChecksumPortion(),c=2;for(let p=1;p<this.pairs.size();++p){let w=this.pairs.get(p);l+=w.getLeftChar().getChecksumPortion(),c++;let E=w.getRightChar();E!=null&&(l+=E.getChecksumPortion(),c++)}return l%=211,211*(c-4)+l==r.getValue()}static getNextSecondBar(e,r){let s;return e.get(r)?(s=e.getNextUnset(r),s=e.getNextSet(s)):(s=e.getNextSet(r),s=e.getNextUnset(s)),s}retrieveNextPair(e,r,s){let l=r.length%2==0;this.startFromEven&&(l=!l);let c,d=!0,p=-1;do this.findNextPair(e,r,p),c=this.parseFoundFinderPattern(e,s,l),c==null?p=Te.getNextSecondBar(e,this.startEnd[0]):d=!1;while(d);let w=this.decodeDataCharacter(e,c,l,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new Z;let E;try{E=this.decodeDataCharacter(e,c,l,!1)}catch(R){E=null,this.verbose&&console.log(R)}return new zt(w,E,c,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,r,s){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),d;s>=0?d=s:this.isEmptyPair(r)?d=0:d=r[r.length-1].getFinderPattern().getStartEnd()[1];let p=r.length%2!=0;this.startFromEven&&(p=!p);let w=!1;for(;d<c&&(w=!e.get(d),!!w);)d++;let E=0,R=d;for(let P=d;P<c;P++)if(e.get(P)!=w)l[E]++;else{if(E==3){if(p&&Te.reverseCounters(l),Te.isFinderPattern(l)){this.startEnd[0]=R,this.startEnd[1]=P;return}p&&Te.reverseCounters(l),R+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,E--}else E++;l[E]=1,w=!w}throw new Z}static reverseCounters(e){let r=e.length;for(let s=0;s<r/2;++s){let l=e[s];e[s]=e[r-s-1],e[r-s-1]=l}}parseFoundFinderPattern(e,r,s){let l,c,d;if(s){let E=this.startEnd[0]-1;for(;E>=0&&!e.get(E);)E--;E++,l=this.startEnd[0]-E,c=E,d=this.startEnd[1]}else c=this.startEnd[0],d=e.getNextUnset(this.startEnd[1]+1),l=d-this.startEnd[1];let p=this.getDecodeFinderCounters();F.arraycopy(p,0,p,1,p.length-1),p[0]=l;let w;try{w=this.parseFinderValue(p,Te.FINDER_PATTERNS)}catch{return null}return new si(w,[c,d],c,d,r)}decodeDataCharacter(e,r,s,l){let c=this.getDataCharacterCounters();for(let Xt=0;Xt<c.length;Xt++)c[Xt]=0;if(l)Te.recordPatternInReverse(e,r.getStartEnd()[0],c);else{Te.recordPattern(e,r.getStartEnd()[1],c);for(let Xt=0,Cn=c.length-1;Xt<Cn;Xt++,Cn--){let dr=c[Xt];c[Xt]=c[Cn],c[Cn]=dr}}let d=17,p=Qe.sum(new Int32Array(c))/d,w=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(p-w)/w>.3)throw new Z;let E=this.getOddCounts(),R=this.getEvenCounts(),P=this.getOddRoundingErrors(),D=this.getEvenRoundingErrors();for(let Xt=0;Xt<c.length;Xt++){let Cn=1*c[Xt]/p,dr=Cn+.5;if(dr<1){if(Cn<.3)throw new Z;dr=1}else if(dr>8){if(Cn>8.7)throw new Z;dr=8}let ji=Xt/2;Xt&1?(R[ji]=dr,D[ji]=Cn-dr):(E[ji]=dr,P[ji]=Cn-dr)}this.adjustOddEvenCounts(d);let W=4*r.getValue()+(s?0:2)+(l?0:1)-1,Q=0,ne=0;for(let Xt=E.length-1;Xt>=0;Xt--){if(Te.isNotA1left(r,s,l)){let Cn=Te.WEIGHTS[W][2*Xt];ne+=E[Xt]*Cn}Q+=E[Xt]}let se=0;for(let Xt=R.length-1;Xt>=0;Xt--)if(Te.isNotA1left(r,s,l)){let Cn=Te.WEIGHTS[W][2*Xt+1];se+=R[Xt]*Cn}let fe=ne+se;if(Q&1||Q>13||Q<4)throw new Z;let Be=(13-Q)/2,Ue=Te.SYMBOL_WIDEST[Be],Pe=9-Ue,Ot=Vn.getRSSvalue(E,Ue,!0),Nt=Vn.getRSSvalue(R,Pe,!1),yr=Te.EVEN_TOTAL_SUBSET[Be],Wr=Te.GSUM[Be],Dn=Ot*yr+Nt+Wr;return new $r(Dn,fe)}static isNotA1left(e,r,s){return!(e.getValue()==0&&r&&s)}adjustOddEvenCounts(e){let r=Qe.sum(new Int32Array(this.getOddCounts())),s=Qe.sum(new Int32Array(this.getEvenCounts())),l=!1,c=!1;r>13?c=!0:r<4&&(l=!0);let d=!1,p=!1;s>13?p=!0:s<4&&(d=!0);let w=r+s-e,E=(r&1)==1,R=(s&1)==0;if(w==1)if(E){if(R)throw new Z;c=!0}else{if(!R)throw new Z;p=!0}else if(w==-1)if(E){if(R)throw new Z;l=!0}else{if(!R)throw new Z;d=!0}else if(w==0){if(E){if(!R)throw new Z;r<s?(l=!0,p=!0):(c=!0,d=!0)}else if(R)throw new Z}else throw new Z;if(l){if(c)throw new Z;Te.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&Te.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(p)throw new Z;Te.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&Te.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Te.SYMBOL_WIDEST=[7,5,4,3,1],Te.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Te.GSUM=[0,348,1388,2948,3988],Te.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Te.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Te.FINDER_PAT_A=0,Te.FINDER_PAT_B=1,Te.FINDER_PAT_C=2,Te.FINDER_PAT_D=3,Te.FINDER_PAT_E=4,Te.FINDER_PAT_F=5,Te.FINDER_PATTERN_SEQUENCES=[[Te.FINDER_PAT_A,Te.FINDER_PAT_A],[Te.FINDER_PAT_A,Te.FINDER_PAT_B,Te.FINDER_PAT_B],[Te.FINDER_PAT_A,Te.FINDER_PAT_C,Te.FINDER_PAT_B,Te.FINDER_PAT_D],[Te.FINDER_PAT_A,Te.FINDER_PAT_E,Te.FINDER_PAT_B,Te.FINDER_PAT_D,Te.FINDER_PAT_C],[Te.FINDER_PAT_A,Te.FINDER_PAT_E,Te.FINDER_PAT_B,Te.FINDER_PAT_D,Te.FINDER_PAT_D,Te.FINDER_PAT_F],[Te.FINDER_PAT_A,Te.FINDER_PAT_E,Te.FINDER_PAT_B,Te.FINDER_PAT_D,Te.FINDER_PAT_E,Te.FINDER_PAT_F,Te.FINDER_PAT_F],[Te.FINDER_PAT_A,Te.FINDER_PAT_A,Te.FINDER_PAT_B,Te.FINDER_PAT_B,Te.FINDER_PAT_C,Te.FINDER_PAT_C,Te.FINDER_PAT_D,Te.FINDER_PAT_D],[Te.FINDER_PAT_A,Te.FINDER_PAT_A,Te.FINDER_PAT_B,Te.FINDER_PAT_B,Te.FINDER_PAT_C,Te.FINDER_PAT_C,Te.FINDER_PAT_D,Te.FINDER_PAT_E,Te.FINDER_PAT_E],[Te.FINDER_PAT_A,Te.FINDER_PAT_A,Te.FINDER_PAT_B,Te.FINDER_PAT_B,Te.FINDER_PAT_C,Te.FINDER_PAT_C,Te.FINDER_PAT_D,Te.FINDER_PAT_E,Te.FINDER_PAT_F,Te.FINDER_PAT_F],[Te.FINDER_PAT_A,Te.FINDER_PAT_A,Te.FINDER_PAT_B,Te.FINDER_PAT_B,Te.FINDER_PAT_C,Te.FINDER_PAT_D,Te.FINDER_PAT_D,Te.FINDER_PAT_E,Te.FINDER_PAT_E,Te.FINDER_PAT_F,Te.FINDER_PAT_F]],Te.MAX_PAIRS=11;class fo extends $r{constructor(e,r,s){super(e,r),this.count=0,this.finderPattern=s}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Gt extends xn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,r,s){const l=this.decodePair(r,!1,e,s);Gt.addOrTally(this.possibleLeftPairs,l),r.reverse();let c=this.decodePair(r,!0,e,s);Gt.addOrTally(this.possibleRightPairs,c),r.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&Gt.checkChecksum(d,p))return Gt.constructResult(d,p)}throw new Z}static addOrTally(e,r){if(r==null)return;let s=!1;for(let l of e)if(l.getValue()===r.getValue()){l.incrementCount(),s=!0;break}s||e.push(r)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,r){let s=4537077*e.getValue()+r.getValue(),l=new String(s).toString(),c=new Se;for(let E=13-l.length;E>0;E--)c.append("0");c.append(l);let d=0;for(let E=0;E<13;E++){let R=c.charAt(E).charCodeAt(0)-48;d+=E&1?R:3*R}d=10-d%10,d===10&&(d=0),c.append(d.toString());let p=e.getFinderPattern().getResultPoints(),w=r.getFinderPattern().getResultPoints();return new be(c.toString(),null,0,[p[0],p[1],w[0],w[1]],q.RSS_14,new Date().getTime())}static checkChecksum(e,r){let s=(e.getChecksumPortion()+16*r.getChecksumPortion())%79,l=9*e.getFinderPattern().getValue()+r.getFinderPattern().getValue();return l>72&&l--,l>8&&l--,s===l}decodePair(e,r,s,l){try{let c=this.findFinderPattern(e,r),d=this.parseFoundFinderPattern(e,s,r,c),p=l==null?null:l.get(re.NEED_RESULT_POINT_CALLBACK);if(p!=null){let R=(c[0]+c[1])/2;r&&(R=e.getSize()-1-R),p.foundPossibleResultPoint(new ze(R,s))}let w=this.decodeDataCharacter(e,d,!0),E=this.decodeDataCharacter(e,d,!1);return new fo(1597*w.getValue()+E.getValue(),w.getChecksumPortion()+4*E.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(e,r,s){let l=this.getDataCharacterCounters();for(let se=0;se<l.length;se++)l[se]=0;if(s)Ie.recordPatternInReverse(e,r.getStartEnd()[0],l);else{Ie.recordPattern(e,r.getStartEnd()[1]+1,l);for(let se=0,fe=l.length-1;se<fe;se++,fe--){let Be=l[se];l[se]=l[fe],l[fe]=Be}}let c=s?16:15,d=Qe.sum(new Int32Array(l))/c,p=this.getOddCounts(),w=this.getEvenCounts(),E=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let se=0;se<l.length;se++){let fe=l[se]/d,Be=Math.floor(fe+.5);Be<1?Be=1:Be>8&&(Be=8);let Ue=Math.floor(se/2);se&1?(w[Ue]=Be,R[Ue]=fe-Be):(p[Ue]=Be,E[Ue]=fe-Be)}this.adjustOddEvenCounts(s,c);let P=0,D=0;for(let se=p.length-1;se>=0;se--)D*=9,D+=p[se],P+=p[se];let W=0,Q=0;for(let se=w.length-1;se>=0;se--)W*=9,W+=w[se],Q+=w[se];let ne=D+3*W;if(s){if(P&1||P>12||P<4)throw new Z;let se=(12-P)/2,fe=Gt.OUTSIDE_ODD_WIDEST[se],Be=9-fe,Ue=Vn.getRSSvalue(p,fe,!1),Pe=Vn.getRSSvalue(w,Be,!0),Ot=Gt.OUTSIDE_EVEN_TOTAL_SUBSET[se],Nt=Gt.OUTSIDE_GSUM[se];return new $r(Ue*Ot+Pe+Nt,ne)}else{if(Q&1||Q>10||Q<4)throw new Z;let se=(10-Q)/2,fe=Gt.INSIDE_ODD_WIDEST[se],Be=9-fe,Ue=Vn.getRSSvalue(p,fe,!0),Pe=Vn.getRSSvalue(w,Be,!1),Ot=Gt.INSIDE_ODD_TOTAL_SUBSET[se],Nt=Gt.INSIDE_GSUM[se];return new $r(Pe*Ot+Ue+Nt,ne)}}findFinderPattern(e,r){let s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;let l=e.getSize(),c=!1,d=0;for(;d<l&&(c=!e.get(d),r!==c);)d++;let p=0,w=d;for(let E=d;E<l;E++)if(e.get(E)!==c)s[p]++;else{if(p===3){if(xn.isFinderPattern(s))return[w,E];w+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,p--}else p++;s[p]=1,c=!c}throw new Z}parseFoundFinderPattern(e,r,s,l){let c=e.get(l[0]),d=l[0]-1;for(;d>=0&&c!==e.get(d);)d--;d++;const p=l[0]-d,w=this.getDecodeFinderCounters(),E=new Int32Array(w.length);F.arraycopy(w,0,E,1,w.length-1),E[0]=p;const R=this.parseFinderValue(E,Gt.FINDER_PATTERNS);let P=d,D=l[1];return s&&(P=e.getSize()-1-P,D=e.getSize()-1-D),new si(R,[d,l[1]],P,D,r)}adjustOddEvenCounts(e,r){let s=Qe.sum(new Int32Array(this.getOddCounts())),l=Qe.sum(new Int32Array(this.getEvenCounts())),c=!1,d=!1,p=!1,w=!1;e?(s>12?d=!0:s<4&&(c=!0),l>12?w=!0:l<4&&(p=!0)):(s>11?d=!0:s<5&&(c=!0),l>10?w=!0:l<4&&(p=!0));let E=s+l-r,R=(s&1)===(e?1:0),P=(l&1)===1;if(E===1)if(R){if(P)throw new Z;d=!0}else{if(!P)throw new Z;w=!0}else if(E===-1)if(R){if(P)throw new Z;c=!0}else{if(!P)throw new Z;p=!0}else if(E===0){if(R){if(!P)throw new Z;s<l?(c=!0,w=!0):(d=!0,p=!0)}else if(P)throw new Z}else throw new Z;if(c){if(d)throw new Z;xn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&xn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(w)throw new Z;xn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&xn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Gt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Gt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Gt.OUTSIDE_GSUM=[0,161,961,2015,2715],Gt.INSIDE_GSUM=[0,336,1036,1516],Gt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Gt.INSIDE_ODD_WIDEST=[2,4,6,8],Gt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class yi extends Ie{constructor(e,r){super(),this.readers=[],this.verbose=r===!0;const s=e?e.get(re.POSSIBLE_FORMATS):null,l=e&&e.get(re.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;s?((s.includes(q.EAN_13)||s.includes(q.UPC_A)||s.includes(q.EAN_8)||s.includes(q.UPC_E))&&this.readers.push(new Qi(e)),s.includes(q.CODE_39)&&this.readers.push(new ft(l)),s.includes(q.CODE_128)&&this.readers.push(new ae),s.includes(q.ITF)&&this.readers.push(new ot),s.includes(q.RSS_14)&&this.readers.push(new Gt),s.includes(q.RSS_EXPANDED)&&this.readers.push(new Te(this.verbose))):(this.readers.push(new Qi(e)),this.readers.push(new ft),this.readers.push(new Qi(e)),this.readers.push(new ae),this.readers.push(new ot),this.readers.push(new Gt),this.readers.push(new Te(this.verbose)))}decodeRow(e,r,s){for(let l=0;l<this.readers.length;l++)try{return this.readers[l].decodeRow(e,r,s)}catch{}throw new Z}reset(){this.readers.forEach(e=>e.reset())}}class ho extends we{constructor(e=500,r){super(new yi(r),e,r)}}class Pt{constructor(e,r,s){this.ecCodewords=e,this.ecBlocks=[r],s&&this.ecBlocks.push(s)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class It{constructor(e,r){this.count=e,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Rt{constructor(e,r,s,l,c,d){this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=s,this.dataRegionSizeRows=l,this.dataRegionSizeColumns=c,this.ecBlocks=d;let p=0;const w=d.getECCodewords(),E=d.getECBlocks();for(let R of E)p+=R.getCount()*(R.getDataCodewords()+w);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,r){if(e&1||r&1)throw new G;for(let s of Rt.VERSIONS)if(s.symbolSizeRows===e&&s.symbolSizeColumns===r)return s;throw new G}toString(){return""+this.versionNumber}static buildVersions(){return[new Rt(1,10,10,8,8,new Pt(5,new It(1,3))),new Rt(2,12,12,10,10,new Pt(7,new It(1,5))),new Rt(3,14,14,12,12,new Pt(10,new It(1,8))),new Rt(4,16,16,14,14,new Pt(12,new It(1,12))),new Rt(5,18,18,16,16,new Pt(14,new It(1,18))),new Rt(6,20,20,18,18,new Pt(18,new It(1,22))),new Rt(7,22,22,20,20,new Pt(20,new It(1,30))),new Rt(8,24,24,22,22,new Pt(24,new It(1,36))),new Rt(9,26,26,24,24,new Pt(28,new It(1,44))),new Rt(10,32,32,14,14,new Pt(36,new It(1,62))),new Rt(11,36,36,16,16,new Pt(42,new It(1,86))),new Rt(12,40,40,18,18,new Pt(48,new It(1,114))),new Rt(13,44,44,20,20,new Pt(56,new It(1,144))),new Rt(14,48,48,22,22,new Pt(68,new It(1,174))),new Rt(15,52,52,24,24,new Pt(42,new It(2,102))),new Rt(16,64,64,14,14,new Pt(56,new It(2,140))),new Rt(17,72,72,16,16,new Pt(36,new It(4,92))),new Rt(18,80,80,18,18,new Pt(48,new It(4,114))),new Rt(19,88,88,20,20,new Pt(56,new It(4,144))),new Rt(20,96,96,22,22,new Pt(68,new It(4,174))),new Rt(21,104,104,24,24,new Pt(56,new It(6,136))),new Rt(22,120,120,18,18,new Pt(68,new It(6,175))),new Rt(23,132,132,20,20,new Pt(62,new It(8,163))),new Rt(24,144,144,22,22,new Pt(62,new It(8,156),new It(2,155))),new Rt(25,8,18,6,16,new Pt(7,new It(1,5))),new Rt(26,8,32,6,14,new Pt(11,new It(1,10))),new Rt(27,12,26,10,24,new Pt(14,new It(1,16))),new Rt(28,12,36,10,16,new Pt(18,new It(1,22))),new Rt(29,16,36,14,16,new Pt(24,new It(1,32))),new Rt(30,16,48,14,22,new Pt(28,new It(1,49)))]}}Rt.VERSIONS=Rt.buildVersions();class Zn{constructor(e){const r=e.getHeight();if(r<8||r>144||r&1)throw new G;this.version=Zn.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Ee(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const r=e.getHeight(),s=e.getWidth();return Rt.getVersionForDimensions(r,s)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let r=0,s=4,l=0;const c=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth();let p=!1,w=!1,E=!1,R=!1;do if(s===c&&l===0&&!p)e[r++]=this.readCorner1(c,d)&255,s-=2,l+=2,p=!0;else if(s===c-2&&l===0&&d&3&&!w)e[r++]=this.readCorner2(c,d)&255,s-=2,l+=2,w=!0;else if(s===c+4&&l===2&&!(d&7)&&!E)e[r++]=this.readCorner3(c,d)&255,s-=2,l+=2,E=!0;else if(s===c-2&&l===0&&(d&7)===4&&!R)e[r++]=this.readCorner4(c,d)&255,s-=2,l+=2,R=!0;else{do s<c&&l>=0&&!this.readMappingMatrix.get(l,s)&&(e[r++]=this.readUtah(s,l,c,d)&255),s-=2,l+=2;while(s>=0&&l<d);s+=1,l+=3;do s>=0&&l<d&&!this.readMappingMatrix.get(l,s)&&(e[r++]=this.readUtah(s,l,c,d)&255),s+=2,l-=2;while(s<c&&l>=0);s+=3,l+=1}while(s<c||l<d);if(r!==this.version.getTotalCodewords())throw new G;return e}readModule(e,r,s,l){return e<0&&(e+=s,r+=4-(s+4&7)),r<0&&(r+=l,e+=4-(l+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)}readUtah(e,r,s,l){let c=0;return this.readModule(e-2,r-2,s,l)&&(c|=1),c<<=1,this.readModule(e-2,r-1,s,l)&&(c|=1),c<<=1,this.readModule(e-1,r-2,s,l)&&(c|=1),c<<=1,this.readModule(e-1,r-1,s,l)&&(c|=1),c<<=1,this.readModule(e-1,r,s,l)&&(c|=1),c<<=1,this.readModule(e,r-2,s,l)&&(c|=1),c<<=1,this.readModule(e,r-1,s,l)&&(c|=1),c<<=1,this.readModule(e,r,s,l)&&(c|=1),c}readCorner1(e,r){let s=0;return this.readModule(e-1,0,e,r)&&(s|=1),s<<=1,this.readModule(e-1,1,e,r)&&(s|=1),s<<=1,this.readModule(e-1,2,e,r)&&(s|=1),s<<=1,this.readModule(0,r-2,e,r)&&(s|=1),s<<=1,this.readModule(0,r-1,e,r)&&(s|=1),s<<=1,this.readModule(1,r-1,e,r)&&(s|=1),s<<=1,this.readModule(2,r-1,e,r)&&(s|=1),s<<=1,this.readModule(3,r-1,e,r)&&(s|=1),s}readCorner2(e,r){let s=0;return this.readModule(e-3,0,e,r)&&(s|=1),s<<=1,this.readModule(e-2,0,e,r)&&(s|=1),s<<=1,this.readModule(e-1,0,e,r)&&(s|=1),s<<=1,this.readModule(0,r-4,e,r)&&(s|=1),s<<=1,this.readModule(0,r-3,e,r)&&(s|=1),s<<=1,this.readModule(0,r-2,e,r)&&(s|=1),s<<=1,this.readModule(0,r-1,e,r)&&(s|=1),s<<=1,this.readModule(1,r-1,e,r)&&(s|=1),s}readCorner3(e,r){let s=0;return this.readModule(e-1,0,e,r)&&(s|=1),s<<=1,this.readModule(e-1,r-1,e,r)&&(s|=1),s<<=1,this.readModule(0,r-3,e,r)&&(s|=1),s<<=1,this.readModule(0,r-2,e,r)&&(s|=1),s<<=1,this.readModule(0,r-1,e,r)&&(s|=1),s<<=1,this.readModule(1,r-3,e,r)&&(s|=1),s<<=1,this.readModule(1,r-2,e,r)&&(s|=1),s<<=1,this.readModule(1,r-1,e,r)&&(s|=1),s}readCorner4(e,r){let s=0;return this.readModule(e-3,0,e,r)&&(s|=1),s<<=1,this.readModule(e-2,0,e,r)&&(s|=1),s<<=1,this.readModule(e-1,0,e,r)&&(s|=1),s<<=1,this.readModule(0,r-2,e,r)&&(s|=1),s<<=1,this.readModule(0,r-1,e,r)&&(s|=1),s<<=1,this.readModule(1,r-1,e,r)&&(s|=1),s<<=1,this.readModule(2,r-1,e,r)&&(s|=1),s<<=1,this.readModule(3,r-1,e,r)&&(s|=1),s}extractDataRegion(e){const r=this.version.getSymbolSizeRows(),s=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new T("Dimension of bitMatrix must match the version size");const l=this.version.getDataRegionSizeRows(),c=this.version.getDataRegionSizeColumns(),d=r/l|0,p=s/c|0,w=d*l,E=p*c,R=new Ee(E,w);for(let P=0;P<d;++P){const D=P*l;for(let W=0;W<p;++W){const Q=W*c;for(let ne=0;ne<l;++ne){const se=P*(l+2)+1+ne,fe=D+ne;for(let Be=0;Be<c;++Be){const Ue=W*(c+2)+1+Be;if(e.get(Ue,se)){const Pe=Q+Be;R.set(Pe,fe)}}}}}return R}}class Pi{constructor(e,r){this.numDataCodewords=e,this.codewords=r}static getDataBlocks(e,r){const s=r.getECBlocks();let l=0;const c=s.getECBlocks();for(let ne of c)l+=ne.getCount();const d=new Array(l);let p=0;for(let ne of c)for(let se=0;se<ne.getCount();se++){const fe=ne.getDataCodewords(),Be=s.getECCodewords()+fe;d[p++]=new Pi(fe,new Uint8Array(Be))}const E=d[0].codewords.length-s.getECCodewords(),R=E-1;let P=0;for(let ne=0;ne<R;ne++)for(let se=0;se<p;se++)d[se].codewords[ne]=e[P++];const D=r.getVersionNumber()===24,W=D?8:p;for(let ne=0;ne<W;ne++)d[ne].codewords[E-1]=e[P++];const Q=d[0].codewords.length;for(let ne=E;ne<Q;ne++)for(let se=0;se<p;se++){const fe=D?(se+8)%p:se,Be=D&&fe>7?ne-1:ne;d[fe].codewords[Be]=e[P++]}if(P!==e.length)throw new T;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ts{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new T(""+e);let r=0,s=this.bitOffset,l=this.byteOffset;const c=this.bytes;if(s>0){const d=8-s,p=e<d?e:d,w=d-p,E=255>>8-p<<w;r=(c[l]&E)>>w,e-=p,s+=p,s===8&&(s=0,l++)}if(e>0){for(;e>=8;)r=r<<8|c[l]&255,l++,e-=8;if(e>0){const d=8-e,p=255>>d<<d;r=r<<e|(c[l]&p)>>d,s+=e}}return this.bitOffset=s,this.byteOffset=l,r}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var pn;(function(k){k[k.PAD_ENCODE=0]="PAD_ENCODE",k[k.ASCII_ENCODE=1]="ASCII_ENCODE",k[k.C40_ENCODE=2]="C40_ENCODE",k[k.TEXT_ENCODE=3]="TEXT_ENCODE",k[k.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",k[k.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",k[k.BASE256_ENCODE=6]="BASE256_ENCODE"})(pn||(pn={}));class Nr{static decode(e){const r=new ts(e),s=new Se,l=new Se,c=new Array;let d=pn.ASCII_ENCODE;do if(d===pn.ASCII_ENCODE)d=this.decodeAsciiSegment(r,s,l);else{switch(d){case pn.C40_ENCODE:this.decodeC40Segment(r,s);break;case pn.TEXT_ENCODE:this.decodeTextSegment(r,s);break;case pn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,s);break;case pn.EDIFACT_ENCODE:this.decodeEdifactSegment(r,s);break;case pn.BASE256_ENCODE:this.decodeBase256Segment(r,s,c);break;default:throw new G}d=pn.ASCII_ENCODE}while(d!==pn.PAD_ENCODE&&r.available()>0);return l.length()>0&&s.append(l.toString()),new Ae(e,s.toString(),c.length===0?null:c,null)}static decodeAsciiSegment(e,r,s){let l=!1;do{let c=e.readBits(8);if(c===0)throw new G;if(c<=128)return l&&(c+=128),r.append(String.fromCharCode(c-1)),pn.ASCII_ENCODE;if(c===129)return pn.PAD_ENCODE;if(c<=229){const d=c-130;d<10&&r.append("0"),r.append(""+d)}else switch(c){case 230:return pn.C40_ENCODE;case 231:return pn.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:l=!0;break;case 236:r.append("[)>05"),s.insert(0,"");break;case 237:r.append("[)>06"),s.insert(0,"");break;case 238:return pn.ANSIX12_ENCODE;case 239:return pn.TEXT_ENCODE;case 240:return pn.EDIFACT_ENCODE;case 241:break;default:if(c!==254||e.available()!==0)throw new G;break}}while(e.available()>0);return pn.ASCII_ENCODE}static decodeC40Segment(e,r){let s=!1;const l=[];let c=0;do{if(e.available()===8)return;const d=e.readBits(8);if(d===254)return;this.parseTwoBytes(d,e.readBits(8),l);for(let p=0;p<3;p++){const w=l[p];switch(c){case 0:if(w<3)c=w+1;else if(w<this.C40_BASIC_SET_CHARS.length){const E=this.C40_BASIC_SET_CHARS[w];s?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),s=!1):r.append(E)}else throw new G;break;case 1:s?(r.append(String.fromCharCode(w+128)),s=!1):r.append(String.fromCharCode(w)),c=0;break;case 2:if(w<this.C40_SHIFT2_SET_CHARS.length){const E=this.C40_SHIFT2_SET_CHARS[w];s?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),s=!1):r.append(E)}else switch(w){case 27:r.append("");break;case 30:s=!0;break;default:throw new G}c=0;break;case 3:s?(r.append(String.fromCharCode(w+224)),s=!1):r.append(String.fromCharCode(w+96)),c=0;break;default:throw new G}}}while(e.available()>0)}static decodeTextSegment(e,r){let s=!1,l=[],c=0;do{if(e.available()===8)return;const d=e.readBits(8);if(d===254)return;this.parseTwoBytes(d,e.readBits(8),l);for(let p=0;p<3;p++){const w=l[p];switch(c){case 0:if(w<3)c=w+1;else if(w<this.TEXT_BASIC_SET_CHARS.length){const E=this.TEXT_BASIC_SET_CHARS[w];s?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),s=!1):r.append(E)}else throw new G;break;case 1:s?(r.append(String.fromCharCode(w+128)),s=!1):r.append(String.fromCharCode(w)),c=0;break;case 2:if(w<this.TEXT_SHIFT2_SET_CHARS.length){const E=this.TEXT_SHIFT2_SET_CHARS[w];s?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),s=!1):r.append(E)}else switch(w){case 27:r.append("");break;case 30:s=!0;break;default:throw new G}c=0;break;case 3:if(w<this.TEXT_SHIFT3_SET_CHARS.length){const E=this.TEXT_SHIFT3_SET_CHARS[w];s?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),s=!1):r.append(E),c=0}else throw new G;break;default:throw new G}}}while(e.available()>0)}static decodeAnsiX12Segment(e,r){const s=[];do{if(e.available()===8)return;const l=e.readBits(8);if(l===254)return;this.parseTwoBytes(l,e.readBits(8),s);for(let c=0;c<3;c++){const d=s[c];switch(d){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(d<14)r.append(String.fromCharCode(d+44));else if(d<40)r.append(String.fromCharCode(d+51));else throw new G;break}}}while(e.available()>0)}static parseTwoBytes(e,r,s){let l=(e<<8)+r-1,c=Math.floor(l/1600);s[0]=c,l-=c*1600,c=Math.floor(l/40),s[1]=c,s[2]=l-c*40}static decodeEdifactSegment(e,r){do{if(e.available()<=16)return;for(let s=0;s<4;s++){let l=e.readBits(6);if(l===31){const c=8-e.getBitOffset();c!==8&&e.readBits(c);return}l&32||(l|=64),r.append(String.fromCharCode(l))}}while(e.available()>0)}static decodeBase256Segment(e,r,s){let l=1+e.getByteOffset();const c=this.unrandomize255State(e.readBits(8),l++);let d;if(c===0?d=e.available()/8|0:c<250?d=c:d=250*(c-249)+this.unrandomize255State(e.readBits(8),l++),d<0)throw new G;const p=new Uint8Array(d);for(let w=0;w<d;w++){if(e.available()<8)throw new G;p[w]=this.unrandomize255State(e.readBits(8),l++)}s.push(p);try{r.append(_e.decode(p,Ne.ISO88591))}catch(w){throw new $e("Platform does not support required encoding: "+w.message)}}static unrandomize255State(e,r){const s=149*r%255+1,l=e-s;return l>=0?l:l+256}}Nr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Nr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Nr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Nr.TEXT_SHIFT2_SET_CHARS=Nr.C40_SHIFT2_SET_CHARS,Nr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class ai{constructor(){this.rsDecoder=new yt(me.DATA_MATRIX_FIELD_256)}decode(e){const r=new Zn(e),s=r.getVersion(),l=r.readCodewords(),c=Pi.getDataBlocks(l,s);let d=0;for(let E of c)d+=E.getNumDataCodewords();const p=new Uint8Array(d),w=c.length;for(let E=0;E<w;E++){const R=c[E],P=R.getCodewords(),D=R.getNumDataCodewords();this.correctErrors(P,D);for(let W=0;W<D;W++)p[W*w+E]=P[W]}return Nr.decode(p)}correctErrors(e,r){const s=new Int32Array(e);try{this.rsDecoder.decode(s,e.length-r)}catch{throw new M}for(let l=0;l<r;l++)e[l]=s[l]}}class qt{constructor(e){this.image=e,this.rectangleDetector=new Ve(this.image)}detect(){const e=this.rectangleDetector.detect();let r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new Z;r=this.shiftToModuleCenter(r);const s=r[0],l=r[1],c=r[2],d=r[3];let p=this.transitionsBetween(s,d)+1,w=this.transitionsBetween(c,d)+1;(p&1)===1&&(p+=1),(w&1)===1&&(w+=1),4*p<7*w&&4*w<7*p&&(p=w=Math.max(p,w));let E=qt.sampleGrid(this.image,s,l,c,d,p,w);return new mn(E,[s,l,c,d])}static shiftPoint(e,r,s){let l=(r.getX()-e.getX())/(s+1),c=(r.getY()-e.getY())/(s+1);return new ze(e.getX()+l,e.getY()+c)}static moveAway(e,r,s){let l=e.getX(),c=e.getY();return l<r?l-=1:l+=1,c<s?c-=1:c+=1,new ze(l,c)}detectSolid1(e){let r=e[0],s=e[1],l=e[3],c=e[2],d=this.transitionsBetween(r,s),p=this.transitionsBetween(s,l),w=this.transitionsBetween(l,c),E=this.transitionsBetween(c,r),R=d,P=[c,r,s,l];return R>p&&(R=p,P[0]=r,P[1]=s,P[2]=l,P[3]=c),R>w&&(R=w,P[0]=s,P[1]=l,P[2]=c,P[3]=r),R>E&&(P[0]=l,P[1]=c,P[2]=r,P[3]=s),P}detectSolid2(e){let r=e[0],s=e[1],l=e[2],c=e[3],d=this.transitionsBetween(r,c),p=qt.shiftPoint(s,l,(d+1)*4),w=qt.shiftPoint(l,s,(d+1)*4),E=this.transitionsBetween(p,r),R=this.transitionsBetween(w,c);return E<R?(e[0]=r,e[1]=s,e[2]=l,e[3]=c):(e[0]=s,e[1]=l,e[2]=c,e[3]=r),e}correctTopRight(e){let r=e[0],s=e[1],l=e[2],c=e[3],d=this.transitionsBetween(r,c),p=this.transitionsBetween(s,c),w=qt.shiftPoint(r,s,(p+1)*4),E=qt.shiftPoint(l,s,(d+1)*4);d=this.transitionsBetween(w,c),p=this.transitionsBetween(E,c);let R=new ze(c.getX()+(l.getX()-s.getX())/(d+1),c.getY()+(l.getY()-s.getY())/(d+1)),P=new ze(c.getX()+(r.getX()-s.getX())/(p+1),c.getY()+(r.getY()-s.getY())/(p+1));if(!this.isValid(R))return this.isValid(P)?P:null;if(!this.isValid(P))return R;let D=this.transitionsBetween(w,R)+this.transitionsBetween(E,R),W=this.transitionsBetween(w,P)+this.transitionsBetween(E,P);return D>W?R:P}shiftToModuleCenter(e){let r=e[0],s=e[1],l=e[2],c=e[3],d=this.transitionsBetween(r,c)+1,p=this.transitionsBetween(l,c)+1,w=qt.shiftPoint(r,s,p*4),E=qt.shiftPoint(l,s,d*4);d=this.transitionsBetween(w,c)+1,p=this.transitionsBetween(E,c)+1,(d&1)===1&&(d+=1),(p&1)===1&&(p+=1);let R=(r.getX()+s.getX()+l.getX()+c.getX())/4,P=(r.getY()+s.getY()+l.getY()+c.getY())/4;r=qt.moveAway(r,R,P),s=qt.moveAway(s,R,P),l=qt.moveAway(l,R,P),c=qt.moveAway(c,R,P);let D,W;return w=qt.shiftPoint(r,s,p*4),w=qt.shiftPoint(w,c,d*4),D=qt.shiftPoint(s,r,p*4),D=qt.shiftPoint(D,l,d*4),E=qt.shiftPoint(l,c,p*4),E=qt.shiftPoint(E,s,d*4),W=qt.shiftPoint(c,l,p*4),W=qt.shiftPoint(W,r,d*4),[w,D,E,W]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,r,s,l,c,d,p){return et.getInstance().sampleGrid(e,d,p,.5,.5,d-.5,.5,d-.5,p-.5,.5,p-.5,r.getX(),r.getY(),c.getX(),c.getY(),l.getX(),l.getY(),s.getX(),s.getY())}transitionsBetween(e,r){let s=Math.trunc(e.getX()),l=Math.trunc(e.getY()),c=Math.trunc(r.getX()),d=Math.trunc(r.getY()),p=Math.abs(d-l)>Math.abs(c-s);if(p){let ne=s;s=l,l=ne,ne=c,c=d,d=ne}let w=Math.abs(c-s),E=Math.abs(d-l),R=-w/2,P=l<d?1:-1,D=s<c?1:-1,W=0,Q=this.image.get(p?l:s,p?s:l);for(let ne=s,se=l;ne!==c;ne+=D){let fe=this.image.get(p?se:ne,p?ne:se);if(fe!==Q&&(W++,Q=fe),R+=E,R>0){if(se===d)break;se+=P,R-=w}}return W}}class xr{constructor(){this.decoder=new ai}decode(e,r=null){let s,l;if(r!=null&&r.has(re.PURE_BARCODE)){const E=xr.extractPureBits(e.getBlackMatrix());s=this.decoder.decode(E),l=xr.NO_POINTS}else{const E=new qt(e.getBlackMatrix()).detect();s=this.decoder.decode(E.getBits()),l=E.getPoints()}const c=s.getRawBytes(),d=new be(s.getText(),c,8*c.length,l,q.DATA_MATRIX,F.currentTimeMillis()),p=s.getByteSegments();p!=null&&d.putMetadata(xe.BYTE_SEGMENTS,p);const w=s.getECLevel();return w!=null&&d.putMetadata(xe.ERROR_CORRECTION_LEVEL,w),d}reset(){}static extractPureBits(e){const r=e.getTopLeftOnBit(),s=e.getBottomRightOnBit();if(r==null||s==null)throw new Z;const l=this.moduleSize(r,e);let c=r[1];const d=s[1];let p=r[0];const E=(s[0]-p+1)/l,R=(d-c+1)/l;if(E<=0||R<=0)throw new Z;const P=l/2;c+=P,p+=P;const D=new Ee(E,R);for(let W=0;W<R;W++){const Q=c+W*l;for(let ne=0;ne<E;ne++)e.get(p+ne*l,Q)&&D.set(ne,W)}return D}static moduleSize(e,r){const s=r.getWidth();let l=e[0];const c=e[1];for(;l<s&&r.get(l,c);)l++;if(l===s)throw new Z;const d=l-e[0];if(d===0)throw new Z;return d}}xr.NO_POINTS=[];class ea extends we{constructor(e=500){super(new xr,e)}}var wi;(function(k){k[k.L=0]="L",k[k.M=1]="M",k[k.Q=2]="Q",k[k.H=3]="H"})(wi||(wi={}));class Ft{constructor(e,r,s){this.value=e,this.stringValue=r,this.bits=s,Ft.FOR_BITS.set(s,this),Ft.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return Ft.L;case"M":return Ft.M;case"Q":return Ft.Q;case"H":return Ft.H;default:throw new S(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof Ft))return!1;const r=e;return this.value===r.value}static forBits(e){if(e<0||e>=Ft.FOR_BITS.size)throw new T;return Ft.FOR_BITS.get(e)}}Ft.FOR_BITS=new Map,Ft.FOR_VALUE=new Map,Ft.L=new Ft(wi.L,"L",1),Ft.M=new Ft(wi.M,"M",0),Ft.Q=new Ft(wi.Q,"Q",3),Ft.H=new Ft(wi.H,"H",2);class Pn{constructor(e){this.errorCorrectionLevel=Ft.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,r){return B.bitCount(e^r)}static decodeFormatInformation(e,r){const s=Pn.doDecodeFormatInformation(e,r);return s!==null?s:Pn.doDecodeFormatInformation(e^Pn.FORMAT_INFO_MASK_QR,r^Pn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,r){let s=Number.MAX_SAFE_INTEGER,l=0;for(const c of Pn.FORMAT_INFO_DECODE_LOOKUP){const d=c[0];if(d===e||d===r)return new Pn(c[1]);let p=Pn.numBitsDiffering(e,d);p<s&&(l=c[1],s=p),e!==r&&(p=Pn.numBitsDiffering(r,d),p<s&&(l=c[1],s=p))}return s<=3?new Pn(l):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof Pn))return!1;const r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask}}Pn.FORMAT_INFO_MASK_QR=21522,Pn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class oe{constructor(e,...r){this.ecCodewordsPerBlock=e,this.ecBlocks=r}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const r=this.ecBlocks;for(const s of r)e+=s.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class U{constructor(e,r){this.count=e,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class it{constructor(e,r,...s){this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=s;let l=0;const c=s[0].getECCodewordsPerBlock(),d=s[0].getECBlocks();for(const p of d)l+=p.getCount()*(p.getDataCodewords()+c);this.totalCodewords=l}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new G;try{return this.getVersionForNumber((e-17)/4)}catch{throw new G}}static getVersionForNumber(e){if(e<1||e>40)throw new T;return it.VERSIONS[e-1]}static decodeVersionInformation(e){let r=Number.MAX_SAFE_INTEGER,s=0;for(let l=0;l<it.VERSION_DECODE_INFO.length;l++){const c=it.VERSION_DECODE_INFO[l];if(c===e)return it.getVersionForNumber(l+7);const d=Pn.numBitsDiffering(e,c);d<r&&(s=l+7,r=d)}return r<=3?it.getVersionForNumber(s):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),r=new Ee(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);const s=this.alignmentPatternCenters.length;for(let l=0;l<s;l++){const c=this.alignmentPatternCenters[l]-2;for(let d=0;d<s;d++)l===0&&(d===0||d===s-1)||l===s-1&&d===0||r.setRegion(this.alignmentPatternCenters[d]-2,c,5,5)}return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r}toString(){return""+this.versionNumber}}it.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),it.VERSIONS=[new it(1,new Int32Array(0),new oe(7,new U(1,19)),new oe(10,new U(1,16)),new oe(13,new U(1,13)),new oe(17,new U(1,9))),new it(2,Int32Array.from([6,18]),new oe(10,new U(1,34)),new oe(16,new U(1,28)),new oe(22,new U(1,22)),new oe(28,new U(1,16))),new it(3,Int32Array.from([6,22]),new oe(15,new U(1,55)),new oe(26,new U(1,44)),new oe(18,new U(2,17)),new oe(22,new U(2,13))),new it(4,Int32Array.from([6,26]),new oe(20,new U(1,80)),new oe(18,new U(2,32)),new oe(26,new U(2,24)),new oe(16,new U(4,9))),new it(5,Int32Array.from([6,30]),new oe(26,new U(1,108)),new oe(24,new U(2,43)),new oe(18,new U(2,15),new U(2,16)),new oe(22,new U(2,11),new U(2,12))),new it(6,Int32Array.from([6,34]),new oe(18,new U(2,68)),new oe(16,new U(4,27)),new oe(24,new U(4,19)),new oe(28,new U(4,15))),new it(7,Int32Array.from([6,22,38]),new oe(20,new U(2,78)),new oe(18,new U(4,31)),new oe(18,new U(2,14),new U(4,15)),new oe(26,new U(4,13),new U(1,14))),new it(8,Int32Array.from([6,24,42]),new oe(24,new U(2,97)),new oe(22,new U(2,38),new U(2,39)),new oe(22,new U(4,18),new U(2,19)),new oe(26,new U(4,14),new U(2,15))),new it(9,Int32Array.from([6,26,46]),new oe(30,new U(2,116)),new oe(22,new U(3,36),new U(2,37)),new oe(20,new U(4,16),new U(4,17)),new oe(24,new U(4,12),new U(4,13))),new it(10,Int32Array.from([6,28,50]),new oe(18,new U(2,68),new U(2,69)),new oe(26,new U(4,43),new U(1,44)),new oe(24,new U(6,19),new U(2,20)),new oe(28,new U(6,15),new U(2,16))),new it(11,Int32Array.from([6,30,54]),new oe(20,new U(4,81)),new oe(30,new U(1,50),new U(4,51)),new oe(28,new U(4,22),new U(4,23)),new oe(24,new U(3,12),new U(8,13))),new it(12,Int32Array.from([6,32,58]),new oe(24,new U(2,92),new U(2,93)),new oe(22,new U(6,36),new U(2,37)),new oe(26,new U(4,20),new U(6,21)),new oe(28,new U(7,14),new U(4,15))),new it(13,Int32Array.from([6,34,62]),new oe(26,new U(4,107)),new oe(22,new U(8,37),new U(1,38)),new oe(24,new U(8,20),new U(4,21)),new oe(22,new U(12,11),new U(4,12))),new it(14,Int32Array.from([6,26,46,66]),new oe(30,new U(3,115),new U(1,116)),new oe(24,new U(4,40),new U(5,41)),new oe(20,new U(11,16),new U(5,17)),new oe(24,new U(11,12),new U(5,13))),new it(15,Int32Array.from([6,26,48,70]),new oe(22,new U(5,87),new U(1,88)),new oe(24,new U(5,41),new U(5,42)),new oe(30,new U(5,24),new U(7,25)),new oe(24,new U(11,12),new U(7,13))),new it(16,Int32Array.from([6,26,50,74]),new oe(24,new U(5,98),new U(1,99)),new oe(28,new U(7,45),new U(3,46)),new oe(24,new U(15,19),new U(2,20)),new oe(30,new U(3,15),new U(13,16))),new it(17,Int32Array.from([6,30,54,78]),new oe(28,new U(1,107),new U(5,108)),new oe(28,new U(10,46),new U(1,47)),new oe(28,new U(1,22),new U(15,23)),new oe(28,new U(2,14),new U(17,15))),new it(18,Int32Array.from([6,30,56,82]),new oe(30,new U(5,120),new U(1,121)),new oe(26,new U(9,43),new U(4,44)),new oe(28,new U(17,22),new U(1,23)),new oe(28,new U(2,14),new U(19,15))),new it(19,Int32Array.from([6,30,58,86]),new oe(28,new U(3,113),new U(4,114)),new oe(26,new U(3,44),new U(11,45)),new oe(26,new U(17,21),new U(4,22)),new oe(26,new U(9,13),new U(16,14))),new it(20,Int32Array.from([6,34,62,90]),new oe(28,new U(3,107),new U(5,108)),new oe(26,new U(3,41),new U(13,42)),new oe(30,new U(15,24),new U(5,25)),new oe(28,new U(15,15),new U(10,16))),new it(21,Int32Array.from([6,28,50,72,94]),new oe(28,new U(4,116),new U(4,117)),new oe(26,new U(17,42)),new oe(28,new U(17,22),new U(6,23)),new oe(30,new U(19,16),new U(6,17))),new it(22,Int32Array.from([6,26,50,74,98]),new oe(28,new U(2,111),new U(7,112)),new oe(28,new U(17,46)),new oe(30,new U(7,24),new U(16,25)),new oe(24,new U(34,13))),new it(23,Int32Array.from([6,30,54,78,102]),new oe(30,new U(4,121),new U(5,122)),new oe(28,new U(4,47),new U(14,48)),new oe(30,new U(11,24),new U(14,25)),new oe(30,new U(16,15),new U(14,16))),new it(24,Int32Array.from([6,28,54,80,106]),new oe(30,new U(6,117),new U(4,118)),new oe(28,new U(6,45),new U(14,46)),new oe(30,new U(11,24),new U(16,25)),new oe(30,new U(30,16),new U(2,17))),new it(25,Int32Array.from([6,32,58,84,110]),new oe(26,new U(8,106),new U(4,107)),new oe(28,new U(8,47),new U(13,48)),new oe(30,new U(7,24),new U(22,25)),new oe(30,new U(22,15),new U(13,16))),new it(26,Int32Array.from([6,30,58,86,114]),new oe(28,new U(10,114),new U(2,115)),new oe(28,new U(19,46),new U(4,47)),new oe(28,new U(28,22),new U(6,23)),new oe(30,new U(33,16),new U(4,17))),new it(27,Int32Array.from([6,34,62,90,118]),new oe(30,new U(8,122),new U(4,123)),new oe(28,new U(22,45),new U(3,46)),new oe(30,new U(8,23),new U(26,24)),new oe(30,new U(12,15),new U(28,16))),new it(28,Int32Array.from([6,26,50,74,98,122]),new oe(30,new U(3,117),new U(10,118)),new oe(28,new U(3,45),new U(23,46)),new oe(30,new U(4,24),new U(31,25)),new oe(30,new U(11,15),new U(31,16))),new it(29,Int32Array.from([6,30,54,78,102,126]),new oe(30,new U(7,116),new U(7,117)),new oe(28,new U(21,45),new U(7,46)),new oe(30,new U(1,23),new U(37,24)),new oe(30,new U(19,15),new U(26,16))),new it(30,Int32Array.from([6,26,52,78,104,130]),new oe(30,new U(5,115),new U(10,116)),new oe(28,new U(19,47),new U(10,48)),new oe(30,new U(15,24),new U(25,25)),new oe(30,new U(23,15),new U(25,16))),new it(31,Int32Array.from([6,30,56,82,108,134]),new oe(30,new U(13,115),new U(3,116)),new oe(28,new U(2,46),new U(29,47)),new oe(30,new U(42,24),new U(1,25)),new oe(30,new U(23,15),new U(28,16))),new it(32,Int32Array.from([6,34,60,86,112,138]),new oe(30,new U(17,115)),new oe(28,new U(10,46),new U(23,47)),new oe(30,new U(10,24),new U(35,25)),new oe(30,new U(19,15),new U(35,16))),new it(33,Int32Array.from([6,30,58,86,114,142]),new oe(30,new U(17,115),new U(1,116)),new oe(28,new U(14,46),new U(21,47)),new oe(30,new U(29,24),new U(19,25)),new oe(30,new U(11,15),new U(46,16))),new it(34,Int32Array.from([6,34,62,90,118,146]),new oe(30,new U(13,115),new U(6,116)),new oe(28,new U(14,46),new U(23,47)),new oe(30,new U(44,24),new U(7,25)),new oe(30,new U(59,16),new U(1,17))),new it(35,Int32Array.from([6,30,54,78,102,126,150]),new oe(30,new U(12,121),new U(7,122)),new oe(28,new U(12,47),new U(26,48)),new oe(30,new U(39,24),new U(14,25)),new oe(30,new U(22,15),new U(41,16))),new it(36,Int32Array.from([6,24,50,76,102,128,154]),new oe(30,new U(6,121),new U(14,122)),new oe(28,new U(6,47),new U(34,48)),new oe(30,new U(46,24),new U(10,25)),new oe(30,new U(2,15),new U(64,16))),new it(37,Int32Array.from([6,28,54,80,106,132,158]),new oe(30,new U(17,122),new U(4,123)),new oe(28,new U(29,46),new U(14,47)),new oe(30,new U(49,24),new U(10,25)),new oe(30,new U(24,15),new U(46,16))),new it(38,Int32Array.from([6,32,58,84,110,136,162]),new oe(30,new U(4,122),new U(18,123)),new oe(28,new U(13,46),new U(32,47)),new oe(30,new U(48,24),new U(14,25)),new oe(30,new U(42,15),new U(32,16))),new it(39,Int32Array.from([6,26,54,82,110,138,166]),new oe(30,new U(20,117),new U(4,118)),new oe(28,new U(40,47),new U(7,48)),new oe(30,new U(43,24),new U(22,25)),new oe(30,new U(10,15),new U(67,16))),new it(40,Int32Array.from([6,30,58,86,114,142,170]),new oe(30,new U(19,118),new U(6,119)),new oe(28,new U(18,47),new U(31,48)),new oe(30,new U(34,24),new U(34,25)),new oe(30,new U(20,15),new U(61,16)))];var rn;(function(k){k[k.DATA_MASK_000=0]="DATA_MASK_000",k[k.DATA_MASK_001=1]="DATA_MASK_001",k[k.DATA_MASK_010=2]="DATA_MASK_010",k[k.DATA_MASK_011=3]="DATA_MASK_011",k[k.DATA_MASK_100=4]="DATA_MASK_100",k[k.DATA_MASK_101=5]="DATA_MASK_101",k[k.DATA_MASK_110=6]="DATA_MASK_110",k[k.DATA_MASK_111=7]="DATA_MASK_111"})(rn||(rn={}));class St{constructor(e,r){this.value=e,this.isMasked=r}unmaskBitMatrix(e,r){for(let s=0;s<r;s++)for(let l=0;l<r;l++)this.isMasked(s,l)&&e.flip(l,s)}}St.values=new Map([[rn.DATA_MASK_000,new St(rn.DATA_MASK_000,(k,e)=>(k+e&1)===0)],[rn.DATA_MASK_001,new St(rn.DATA_MASK_001,(k,e)=>(k&1)===0)],[rn.DATA_MASK_010,new St(rn.DATA_MASK_010,(k,e)=>e%3===0)],[rn.DATA_MASK_011,new St(rn.DATA_MASK_011,(k,e)=>(k+e)%3===0)],[rn.DATA_MASK_100,new St(rn.DATA_MASK_100,(k,e)=>(Math.floor(k/2)+Math.floor(e/3)&1)===0)],[rn.DATA_MASK_101,new St(rn.DATA_MASK_101,(k,e)=>k*e%6===0)],[rn.DATA_MASK_110,new St(rn.DATA_MASK_110,(k,e)=>k*e%6<3)],[rn.DATA_MASK_111,new St(rn.DATA_MASK_111,(k,e)=>(k+e+k*e%3&1)===0)]]);class mo{constructor(e){const r=e.getHeight();if(r<21||(r&3)!==1)throw new G;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let c=0;c<6;c++)e=this.copyBit(c,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let c=5;c>=0;c--)e=this.copyBit(8,c,e);const r=this.bitMatrix.getHeight();let s=0;const l=r-7;for(let c=r-1;c>=l;c--)s=this.copyBit(8,c,s);for(let c=r-8;c<r;c++)s=this.copyBit(c,8,s);if(this.parsedFormatInfo=Pn.decodeFormatInformation(e,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new G}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return it.getVersionForNumber(r);let s=0;const l=e-11;for(let d=5;d>=0;d--)for(let p=e-9;p>=l;p--)s=this.copyBit(p,d,s);let c=it.decodeVersionInformation(s);if(c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;s=0;for(let d=5;d>=0;d--)for(let p=e-9;p>=l;p--)s=this.copyBit(d,p,s);if(c=it.decodeVersionInformation(s),c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;throw new G}copyBit(e,r,s){return(this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r))?s<<1|1:s<<1}readCodewords(){const e=this.readFormatInformation(),r=this.readVersion(),s=St.values.get(e.getDataMask()),l=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,l);const c=r.buildFunctionPattern();let d=!0;const p=new Uint8Array(r.getTotalCodewords());let w=0,E=0,R=0;for(let P=l-1;P>0;P-=2){P===6&&P--;for(let D=0;D<l;D++){const W=d?l-1-D:D;for(let Q=0;Q<2;Q++)c.get(P-Q,W)||(R++,E<<=1,this.bitMatrix.get(P-Q,W)&&(E|=1),R===8&&(p[w++]=E,R=0,E=0))}d=!d}if(w!==r.getTotalCodewords())throw new G;return p}remask(){if(this.parsedFormatInfo===null)return;const e=St.values[this.parsedFormatInfo.getDataMask()],r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let r=0,s=e.getWidth();r<s;r++)for(let l=r+1,c=e.getHeight();l<c;l++)e.get(r,l)!==e.get(l,r)&&(e.flip(l,r),e.flip(r,l))}}class Mi{constructor(e,r){this.numDataCodewords=e,this.codewords=r}static getDataBlocks(e,r,s){if(e.length!==r.getTotalCodewords())throw new T;const l=r.getECBlocksForLevel(s);let c=0;const d=l.getECBlocks();for(const Q of d)c+=Q.getCount();const p=new Array(c);let w=0;for(const Q of d)for(let ne=0;ne<Q.getCount();ne++){const se=Q.getDataCodewords(),fe=l.getECCodewordsPerBlock()+se;p[w++]=new Mi(se,new Uint8Array(fe))}const E=p[0].codewords.length;let R=p.length-1;for(;R>=0&&p[R].codewords.length!==E;)R--;R++;const P=E-l.getECCodewordsPerBlock();let D=0;for(let Q=0;Q<P;Q++)for(let ne=0;ne<w;ne++)p[ne].codewords[Q]=e[D++];for(let Q=R;Q<w;Q++)p[Q].codewords[P]=e[D++];const W=p[0].codewords.length;for(let Q=P;Q<W;Q++)for(let ne=0;ne<w;ne++){const se=ne<R?Q:Q+1;p[ne].codewords[se]=e[D++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var rr;(function(k){k[k.TERMINATOR=0]="TERMINATOR",k[k.NUMERIC=1]="NUMERIC",k[k.ALPHANUMERIC=2]="ALPHANUMERIC",k[k.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",k[k.BYTE=4]="BYTE",k[k.ECI=5]="ECI",k[k.KANJI=6]="KANJI",k[k.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",k[k.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",k[k.HANZI=9]="HANZI"})(rr||(rr={}));class at{constructor(e,r,s,l){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=s,this.bits=l,at.FOR_BITS.set(l,this),at.FOR_VALUE.set(e,this)}static forBits(e){const r=at.FOR_BITS.get(e);if(r===void 0)throw new T;return r}getCharacterCountBits(e){const r=e.getVersionNumber();let s;return r<=9?s=0:r<=26?s=1:s=2,this.characterCountBitsForVersions[s]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof at))return!1;const r=e;return this.value===r.value}toString(){return this.stringValue}}at.FOR_BITS=new Map,at.FOR_VALUE=new Map,at.TERMINATOR=new at(rr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),at.NUMERIC=new at(rr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),at.ALPHANUMERIC=new at(rr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),at.STRUCTURED_APPEND=new at(rr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),at.BYTE=new at(rr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),at.ECI=new at(rr.ECI,"ECI",Int32Array.from([0,0,0]),7),at.KANJI=new at(rr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),at.FNC1_FIRST_POSITION=new at(rr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),at.FNC1_SECOND_POSITION=new at(rr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),at.HANZI=new at(rr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Qt{static decode(e,r,s,l){const c=new ts(e);let d=new Se;const p=new Array;let w=-1,E=-1;try{let R=null,P=!1,D;do{if(c.available()<4)D=at.TERMINATOR;else{const W=c.readBits(4);D=at.forBits(W)}switch(D){case at.TERMINATOR:break;case at.FNC1_FIRST_POSITION:case at.FNC1_SECOND_POSITION:P=!0;break;case at.STRUCTURED_APPEND:if(c.available()<16)throw new G;w=c.readBits(8),E=c.readBits(8);break;case at.ECI:const W=Qt.parseECIValue(c);if(R=J.getCharacterSetECIByValue(W),R===null)throw new G;break;case at.HANZI:const Q=c.readBits(4),ne=c.readBits(D.getCharacterCountBits(r));Q===Qt.GB2312_SUBSET&&Qt.decodeHanziSegment(c,d,ne);break;default:const se=c.readBits(D.getCharacterCountBits(r));switch(D){case at.NUMERIC:Qt.decodeNumericSegment(c,d,se);break;case at.ALPHANUMERIC:Qt.decodeAlphanumericSegment(c,d,se,P);break;case at.BYTE:Qt.decodeByteSegment(c,d,se,R,p,l);break;case at.KANJI:Qt.decodeKanjiSegment(c,d,se);break;default:throw new G}break}}while(D!==at.TERMINATOR)}catch{throw new G}return new Ae(e,d.toString(),p.length===0?null:p,s===null?null:s.toString(),w,E)}static decodeHanziSegment(e,r,s){if(s*13>e.available())throw new G;const l=new Uint8Array(2*s);let c=0;for(;s>0;){const d=e.readBits(13);let p=d/96<<8&4294967295|d%96;p<959?p+=41377:p+=42657,l[c]=p>>8&255,l[c+1]=p&255,c+=2,s--}try{r.append(_e.decode(l,Ne.GB2312))}catch(d){throw new G(d)}}static decodeKanjiSegment(e,r,s){if(s*13>e.available())throw new G;const l=new Uint8Array(2*s);let c=0;for(;s>0;){const d=e.readBits(13);let p=d/192<<8&4294967295|d%192;p<7936?p+=33088:p+=49472,l[c]=p>>8,l[c+1]=p,c+=2,s--}try{r.append(_e.decode(l,Ne.SHIFT_JIS))}catch(d){throw new G(d)}}static decodeByteSegment(e,r,s,l,c,d){if(8*s>e.available())throw new G;const p=new Uint8Array(s);for(let E=0;E<s;E++)p[E]=e.readBits(8);let w;l===null?w=Ne.guessEncoding(p,d):w=l.getName();try{r.append(_e.decode(p,w))}catch(E){throw new G(E)}c.push(p)}static toAlphaNumericChar(e){if(e>=Qt.ALPHANUMERIC_CHARS.length)throw new G;return Qt.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,r,s,l){const c=r.length();for(;s>1;){if(e.available()<11)throw new G;const d=e.readBits(11);r.append(Qt.toAlphaNumericChar(Math.floor(d/45))),r.append(Qt.toAlphaNumericChar(d%45)),s-=2}if(s===1){if(e.available()<6)throw new G;r.append(Qt.toAlphaNumericChar(e.readBits(6)))}if(l)for(let d=c;d<r.length();d++)r.charAt(d)==="%"&&(d<r.length()-1&&r.charAt(d+1)==="%"?r.deleteCharAt(d+1):r.setCharAt(d,""))}static decodeNumericSegment(e,r,s){for(;s>=3;){if(e.available()<10)throw new G;const l=e.readBits(10);if(l>=1e3)throw new G;r.append(Qt.toAlphaNumericChar(Math.floor(l/100))),r.append(Qt.toAlphaNumericChar(Math.floor(l/10)%10)),r.append(Qt.toAlphaNumericChar(l%10)),s-=3}if(s===2){if(e.available()<7)throw new G;const l=e.readBits(7);if(l>=100)throw new G;r.append(Qt.toAlphaNumericChar(Math.floor(l/10))),r.append(Qt.toAlphaNumericChar(l%10))}else if(s===1){if(e.available()<4)throw new G;const l=e.readBits(4);if(l>=10)throw new G;r.append(Qt.toAlphaNumericChar(l))}}static parseECIValue(e){const r=e.readBits(8);if(!(r&128))return r&127;if((r&192)===128){const s=e.readBits(8);return(r&63)<<8&4294967295|s}if((r&224)===192){const s=e.readBits(16);return(r&31)<<16&4294967295|s}throw new G}}Qt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Qt.GB2312_SUBSET=1;class ns{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const r=e[0];e[0]=e[2],e[2]=r}}class Ps{constructor(){this.rsDecoder=new yt(me.QR_CODE_FIELD_256)}decodeBooleanArray(e,r){return this.decodeBitMatrix(Ee.parseFromBooleanArray(e),r)}decodeBitMatrix(e,r){const s=new mo(e);let l=null;try{return this.decodeBitMatrixParser(s,r)}catch(c){l=c}try{s.remask(),s.setMirror(!0),s.readVersion(),s.readFormatInformation(),s.mirror();const c=this.decodeBitMatrixParser(s,r);return c.setOther(new ns(!0)),c}catch(c){throw l!==null?l:c}}decodeBitMatrixParser(e,r){const s=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),c=e.readCodewords(),d=Mi.getDataBlocks(c,s,l);let p=0;for(const R of d)p+=R.getNumDataCodewords();const w=new Uint8Array(p);let E=0;for(const R of d){const P=R.getCodewords(),D=R.getNumDataCodewords();this.correctErrors(P,D);for(let W=0;W<D;W++)w[E++]=P[W]}return Qt.decode(w,s,l,r)}correctErrors(e,r){const s=new Int32Array(e);try{this.rsDecoder.decode(s,e.length-r)}catch{throw new M}for(let l=0;l<r;l++)e[l]=s[l]}}class li extends ze{constructor(e,r,s){super(e,r),this.estimatedModuleSize=s}aboutEquals(e,r,s){if(Math.abs(r-this.getY())<=e&&Math.abs(s-this.getX())<=e){const l=Math.abs(e-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(e,r,s){const l=(this.getX()+r)/2,c=(this.getY()+e)/2,d=(this.estimatedModuleSize+s)/2;return new li(l,c,d)}}class Oe{constructor(e,r,s,l,c,d,p){this.image=e,this.startX=r,this.startY=s,this.width=l,this.height=c,this.moduleSize=d,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,r=this.height,s=this.width,l=e+s,c=this.startY+r/2,d=new Int32Array(3),p=this.image;for(let w=0;w<r;w++){const E=c+(w&1?-Math.floor((w+1)/2):Math.floor((w+1)/2));d[0]=0,d[1]=0,d[2]=0;let R=e;for(;R<l&&!p.get(R,E);)R++;let P=0;for(;R<l;){if(p.get(R,E))if(P===1)d[1]++;else if(P===2){if(this.foundPatternCross(d)){const D=this.handlePossibleCenter(d,E,R);if(D!==null)return D}d[0]=d[2],d[1]=1,d[2]=0,P=1}else d[++P]++;else P===1&&P++,d[P]++;R++}if(this.foundPatternCross(d)){const D=this.handlePossibleCenter(d,E,l);if(D!==null)return D}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Z}static centerFromEnd(e,r){return r-e[2]-e[1]/2}foundPatternCross(e){const r=this.moduleSize,s=r/2;for(let l=0;l<3;l++)if(Math.abs(r-e[l])>=s)return!1;return!0}crossCheckVertical(e,r,s,l){const c=this.image,d=c.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let w=e;for(;w>=0&&c.get(r,w)&&p[1]<=s;)p[1]++,w--;if(w<0||p[1]>s)return NaN;for(;w>=0&&!c.get(r,w)&&p[0]<=s;)p[0]++,w--;if(p[0]>s)return NaN;for(w=e+1;w<d&&c.get(r,w)&&p[1]<=s;)p[1]++,w++;if(w===d||p[1]>s)return NaN;for(;w<d&&!c.get(r,w)&&p[2]<=s;)p[2]++,w++;if(p[2]>s)return NaN;const E=p[0]+p[1]+p[2];return 5*Math.abs(E-l)>=2*l?NaN:this.foundPatternCross(p)?Oe.centerFromEnd(p,w):NaN}handlePossibleCenter(e,r,s){const l=e[0]+e[1]+e[2],c=Oe.centerFromEnd(e,s),d=this.crossCheckVertical(r,c,2*e[1],l);if(!isNaN(d)){const p=(e[0]+e[1]+e[2])/3;for(const E of this.possibleCenters)if(E.aboutEquals(p,d,c))return E.combineEstimate(d,c,p);const w=new li(c,d,p);this.possibleCenters.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return null}}class qe extends ze{constructor(e,r,s,l){super(e,r),this.estimatedModuleSize=s,this.count=l,l===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,r,s){if(Math.abs(r-this.getY())<=e&&Math.abs(s-this.getX())<=e){const l=Math.abs(e-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(e,r,s){const l=this.count+1,c=(this.count*this.getX()+r)/l,d=(this.count*this.getY()+e)/l,p=(this.count*this.estimatedModuleSize+s)/l;return new qe(c,d,p,l)}}class At{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Ge{constructor(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const r=e!=null&&e.get(re.TRY_HARDER)!==void 0,s=e!=null&&e.get(re.PURE_BARCODE)!==void 0,l=this.image,c=l.getHeight(),d=l.getWidth();let p=Math.floor(3*c/(4*Ge.MAX_MODULES));(p<Ge.MIN_SKIP||r)&&(p=Ge.MIN_SKIP);let w=!1;const E=new Int32Array(5);for(let P=p-1;P<c&&!w;P+=p){E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0;let D=0;for(let W=0;W<d;W++)if(l.get(W,P))(D&1)===1&&D++,E[D]++;else if(D&1)E[D]++;else if(D===4)if(Ge.foundPatternCross(E)){if(this.handlePossibleCenter(E,P,W,s)===!0)if(p=2,this.hasSkipped===!0)w=this.haveMultiplyConfirmedCenters();else{const ne=this.findRowSkip();ne>E[2]&&(P+=ne-E[2]-p,W=d-1)}else{E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,D=3;continue}D=0,E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0}else E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,D=3;else E[++D]++;Ge.foundPatternCross(E)&&this.handlePossibleCenter(E,P,d,s)===!0&&(p=E[0],this.hasSkipped&&(w=this.haveMultiplyConfirmedCenters()))}const R=this.selectBestPatterns();return ze.orderBestPatterns(R),new At(R)}static centerFromEnd(e,r){return r-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let r=0;for(let c=0;c<5;c++){const d=e[c];if(d===0)return!1;r+=d}if(r<7)return!1;const s=r/7,l=s/2;return Math.abs(s-e[0])<l&&Math.abs(s-e[1])<l&&Math.abs(3*s-e[2])<3*l&&Math.abs(s-e[3])<l&&Math.abs(s-e[4])<l}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,r,s,l){const c=this.getCrossCheckStateCount();let d=0;const p=this.image;for(;e>=d&&r>=d&&p.get(r-d,e-d);)c[2]++,d++;if(e<d||r<d)return!1;for(;e>=d&&r>=d&&!p.get(r-d,e-d)&&c[1]<=s;)c[1]++,d++;if(e<d||r<d||c[1]>s)return!1;for(;e>=d&&r>=d&&p.get(r-d,e-d)&&c[0]<=s;)c[0]++,d++;if(c[0]>s)return!1;const w=p.getHeight(),E=p.getWidth();for(d=1;e+d<w&&r+d<E&&p.get(r+d,e+d);)c[2]++,d++;if(e+d>=w||r+d>=E)return!1;for(;e+d<w&&r+d<E&&!p.get(r+d,e+d)&&c[3]<s;)c[3]++,d++;if(e+d>=w||r+d>=E||c[3]>=s)return!1;for(;e+d<w&&r+d<E&&p.get(r+d,e+d)&&c[4]<s;)c[4]++,d++;if(c[4]>=s)return!1;const R=c[0]+c[1]+c[2]+c[3]+c[4];return Math.abs(R-l)<2*l&&Ge.foundPatternCross(c)}crossCheckVertical(e,r,s,l){const c=this.image,d=c.getHeight(),p=this.getCrossCheckStateCount();let w=e;for(;w>=0&&c.get(r,w);)p[2]++,w--;if(w<0)return NaN;for(;w>=0&&!c.get(r,w)&&p[1]<=s;)p[1]++,w--;if(w<0||p[1]>s)return NaN;for(;w>=0&&c.get(r,w)&&p[0]<=s;)p[0]++,w--;if(p[0]>s)return NaN;for(w=e+1;w<d&&c.get(r,w);)p[2]++,w++;if(w===d)return NaN;for(;w<d&&!c.get(r,w)&&p[3]<s;)p[3]++,w++;if(w===d||p[3]>=s)return NaN;for(;w<d&&c.get(r,w)&&p[4]<s;)p[4]++,w++;if(p[4]>=s)return NaN;const E=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(E-l)>=2*l?NaN:Ge.foundPatternCross(p)?Ge.centerFromEnd(p,w):NaN}crossCheckHorizontal(e,r,s,l){const c=this.image,d=c.getWidth(),p=this.getCrossCheckStateCount();let w=e;for(;w>=0&&c.get(w,r);)p[2]++,w--;if(w<0)return NaN;for(;w>=0&&!c.get(w,r)&&p[1]<=s;)p[1]++,w--;if(w<0||p[1]>s)return NaN;for(;w>=0&&c.get(w,r)&&p[0]<=s;)p[0]++,w--;if(p[0]>s)return NaN;for(w=e+1;w<d&&c.get(w,r);)p[2]++,w++;if(w===d)return NaN;for(;w<d&&!c.get(w,r)&&p[3]<s;)p[3]++,w++;if(w===d||p[3]>=s)return NaN;for(;w<d&&c.get(w,r)&&p[4]<s;)p[4]++,w++;if(p[4]>=s)return NaN;const E=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(E-l)>=l?NaN:Ge.foundPatternCross(p)?Ge.centerFromEnd(p,w):NaN}handlePossibleCenter(e,r,s,l){const c=e[0]+e[1]+e[2]+e[3]+e[4];let d=Ge.centerFromEnd(e,s),p=this.crossCheckVertical(r,Math.floor(d),e[2],c);if(!isNaN(p)&&(d=this.crossCheckHorizontal(Math.floor(d),Math.floor(p),e[2],c),!isNaN(d)&&(!l||this.crossCheckDiagonal(Math.floor(p),Math.floor(d),e[2],c)))){const w=c/7;let E=!1;const R=this.possibleCenters;for(let P=0,D=R.length;P<D;P++){const W=R[P];if(W.aboutEquals(w,p,d)){R[P]=W.combineEstimate(p,d,w),E=!0;break}}if(!E){const P=new qe(d,p,w);R.push(P),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(P)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let r=null;for(const s of this.possibleCenters)if(s.getCount()>=Ge.CENTER_QUORUM)if(r==null)r=s;else return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-s.getX())-Math.abs(r.getY()-s.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,r=0;const s=this.possibleCenters.length;for(const d of this.possibleCenters)d.getCount()>=Ge.CENTER_QUORUM&&(e++,r+=d.getEstimatedModuleSize());if(e<3)return!1;const l=r/s;let c=0;for(const d of this.possibleCenters)c+=Math.abs(d.getEstimatedModuleSize()-l);return c<=.05*r}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new Z;const r=this.possibleCenters;let s;if(e>3){let l=0,c=0;for(const w of this.possibleCenters){const E=w.getEstimatedModuleSize();l+=E,c+=E*E}s=l/e;let d=Math.sqrt(c/e-s*s);r.sort((w,E)=>{const R=Math.abs(E.getEstimatedModuleSize()-s),P=Math.abs(w.getEstimatedModuleSize()-s);return R<P?-1:R>P?1:0});const p=Math.max(.2*s,d);for(let w=0;w<r.length&&r.length>3;w++){const E=r[w];Math.abs(E.getEstimatedModuleSize()-s)>p&&(r.splice(w,1),w--)}}if(r.length>3){let l=0;for(const c of r)l+=c.getEstimatedModuleSize();s=l/r.length,r.sort((c,d)=>{if(d.getCount()===c.getCount()){const p=Math.abs(d.getEstimatedModuleSize()-s),w=Math.abs(c.getEstimatedModuleSize()-s);return p<w?1:p>w?-1:0}else return d.getCount()-c.getCount()}),r.splice(3)}return[r[0],r[1],r[2]]}}Ge.CENTER_QUORUM=2,Ge.MIN_SKIP=3,Ge.MAX_MODULES=57;class Mt{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(re.NEED_RESULT_POINT_CALLBACK);const s=new Ge(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(s)}processFinderPatternInfo(e){const r=e.getTopLeft(),s=e.getTopRight(),l=e.getBottomLeft(),c=this.calculateModuleSize(r,s,l);if(c<1)throw new Z("No pattern found in proccess finder.");const d=Mt.computeDimension(r,s,l,c),p=it.getProvisionalVersionForDimension(d),w=p.getDimensionForVersion()-7;let E=null;if(p.getAlignmentPatternCenters().length>0){const W=s.getX()-r.getX()+l.getX(),Q=s.getY()-r.getY()+l.getY(),ne=1-3/w,se=Math.floor(r.getX()+ne*(W-r.getX())),fe=Math.floor(r.getY()+ne*(Q-r.getY()));for(let Be=4;Be<=16;Be<<=1)try{E=this.findAlignmentInRegion(c,se,fe,Be);break}catch(Ue){if(!(Ue instanceof Z))throw Ue}}const R=Mt.createTransform(r,s,l,E,d),P=Mt.sampleGrid(this.image,R,d);let D;return E===null?D=[l,r,s]:D=[l,r,s,E],new mn(P,D)}static createTransform(e,r,s,l,c){const d=c-3.5;let p,w,E,R;return l!==null?(p=l.getX(),w=l.getY(),E=d-3,R=E):(p=r.getX()-e.getX()+s.getX(),w=r.getY()-e.getY()+s.getY(),E=d,R=d),We.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,E,R,3.5,d,e.getX(),e.getY(),r.getX(),r.getY(),p,w,s.getX(),s.getY())}static sampleGrid(e,r,s){return et.getInstance().sampleGridWithTransform(e,s,s,r)}static computeDimension(e,r,s,l){const c=Qe.round(ze.distance(e,r)/l),d=Qe.round(ze.distance(e,s)/l);let p=Math.floor((c+d)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new Z("Dimensions could be not found.")}return p}calculateModuleSize(e,r,s){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,s))/2}calculateModuleSizeOneWay(e,r){const s=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(s)?l/7:isNaN(l)?s/7:(s+l)/14}sizeOfBlackWhiteBlackRunBothWays(e,r,s,l){let c=this.sizeOfBlackWhiteBlackRun(e,r,s,l),d=1,p=e-(s-e);p<0?(d=e/(e-p),p=0):p>=this.image.getWidth()&&(d=(this.image.getWidth()-1-e)/(p-e),p=this.image.getWidth()-1);let w=Math.floor(r-(l-r)*d);return d=1,w<0?(d=r/(r-w),w=0):w>=this.image.getHeight()&&(d=(this.image.getHeight()-1-r)/(w-r),w=this.image.getHeight()-1),p=Math.floor(e+(p-e)*d),c+=this.sizeOfBlackWhiteBlackRun(e,r,p,w),c-1}sizeOfBlackWhiteBlackRun(e,r,s,l){const c=Math.abs(l-r)>Math.abs(s-e);if(c){let W=e;e=r,r=W,W=s,s=l,l=W}const d=Math.abs(s-e),p=Math.abs(l-r);let w=-d/2;const E=e<s?1:-1,R=r<l?1:-1;let P=0;const D=s+E;for(let W=e,Q=r;W!==D;W+=E){const ne=c?Q:W,se=c?W:Q;if(P===1===this.image.get(ne,se)){if(P===2)return Qe.distance(W,Q,e,r);P++}if(w+=p,w>0){if(Q===l)break;Q+=R,w-=d}}return P===2?Qe.distance(s+E,l,e,r):NaN}findAlignmentInRegion(e,r,s,l){const c=Math.floor(l*e),d=Math.max(0,r-c),p=Math.min(this.image.getWidth()-1,r+c);if(p-d<e*3)throw new Z("Alignment top exceeds estimated module size.");const w=Math.max(0,s-c),E=Math.min(this.image.getHeight()-1,s+c);if(E-w<e*3)throw new Z("Alignment bottom exceeds estimated module size.");return new Oe(this.image,d,w,p-d,E-w,e,this.resultPointCallback).find()}}class sn{constructor(){this.decoder=new Ps}getDecoder(){return this.decoder}decode(e,r){let s,l;if(r!=null&&r.get(re.PURE_BARCODE)!==void 0){const w=sn.extractPureBits(e.getBlackMatrix());s=this.decoder.decodeBitMatrix(w,r),l=sn.NO_POINTS}else{const w=new Mt(e.getBlackMatrix()).detect(r);s=this.decoder.decodeBitMatrix(w.getBits(),r),l=w.getPoints()}s.getOther()instanceof ns&&s.getOther().applyMirroredCorrection(l);const c=new be(s.getText(),s.getRawBytes(),void 0,l,q.QR_CODE,void 0),d=s.getByteSegments();d!==null&&c.putMetadata(xe.BYTE_SEGMENTS,d);const p=s.getECLevel();return p!==null&&c.putMetadata(xe.ERROR_CORRECTION_LEVEL,p),s.hasStructuredAppend()&&(c.putMetadata(xe.STRUCTURED_APPEND_SEQUENCE,s.getStructuredAppendSequenceNumber()),c.putMetadata(xe.STRUCTURED_APPEND_PARITY,s.getStructuredAppendParity())),c}reset(){}static extractPureBits(e){const r=e.getTopLeftOnBit(),s=e.getBottomRightOnBit();if(r===null||s===null)throw new Z;const l=this.moduleSize(r,e);let c=r[1],d=s[1],p=r[0],w=s[0];if(p>=w||c>=d)throw new Z;if(d-c!==w-p&&(w=p+(d-c),w>=e.getWidth()))throw new Z;const E=Math.round((w-p+1)/l),R=Math.round((d-c+1)/l);if(E<=0||R<=0)throw new Z;if(R!==E)throw new Z;const P=Math.floor(l/2);c+=P,p+=P;const D=p+Math.floor((E-1)*l)-w;if(D>0){if(D>P)throw new Z;p-=D}const W=c+Math.floor((R-1)*l)-d;if(W>0){if(W>P)throw new Z;c-=W}const Q=new Ee(E,R);for(let ne=0;ne<R;ne++){const se=c+Math.floor(ne*l);for(let fe=0;fe<E;fe++)e.get(p+Math.floor(fe*l),se)&&Q.set(fe,ne)}return Q}static moduleSize(e,r){const s=r.getHeight(),l=r.getWidth();let c=e[0],d=e[1],p=!0,w=0;for(;c<l&&d<s;){if(p!==r.get(c,d)){if(++w===5)break;p=!p}c++,d++}if(c===l||d===s)throw new Z;return(c-e[0])/7}}sn.NO_POINTS=new Array;class mt{PDF417Common(){}static getBitCountSum(e){return Qe.sum(e)}static toIntArray(e){if(e==null||!e.length)return mt.EMPTY_INT_ARRAY;const r=new Int32Array(e.length);let s=0;for(const l of e)r[s++]=l;return r}static getCodeword(e){const r=V.binarySearch(mt.SYMBOL_TABLE,e&262143);return r<0?-1:(mt.CODEWORD_TABLE[r]-1)%mt.NUMBER_OF_CODEWORDS}}mt.NUMBER_OF_CODEWORDS=929,mt.MAX_CODEWORDS_IN_BARCODE=mt.NUMBER_OF_CODEWORDS-1,mt.MIN_ROWS_IN_BARCODE=3,mt.MAX_ROWS_IN_BARCODE=90,mt.MODULES_IN_CODEWORD=17,mt.MODULES_IN_STOP_PATTERN=18,mt.BARS_IN_MODULE=8,mt.EMPTY_INT_ARRAY=new Int32Array([]),mt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),mt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ms{constructor(e,r){this.bits=e,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class wt{static detectMultiple(e,r,s){let l=e.getBlackMatrix(),c=wt.detect(s,l);return c.length||(l=l.clone(),l.rotate180(),c=wt.detect(s,l)),new Ms(l,c)}static detect(e,r){const s=new Array;let l=0,c=0,d=!1;for(;l<r.getHeight();){const p=wt.findVertices(r,l,c);if(p[0]==null&&p[3]==null){if(!d)break;d=!1,c=0;for(const w of s)w[1]!=null&&(l=Math.trunc(Math.max(l,w[1].getY()))),w[3]!=null&&(l=Math.max(l,Math.trunc(w[3].getY())));l+=wt.ROW_STEP;continue}if(d=!0,s.push(p),!e)break;p[2]!=null?(c=Math.trunc(p[2].getX()),l=Math.trunc(p[2].getY())):(c=Math.trunc(p[4].getX()),l=Math.trunc(p[4].getY()))}return s}static findVertices(e,r,s){const l=e.getHeight(),c=e.getWidth(),d=new Array(8);return wt.copyToResult(d,wt.findRowsWithPattern(e,l,c,r,s,wt.START_PATTERN),wt.INDEXES_START_PATTERN),d[4]!=null&&(s=Math.trunc(d[4].getX()),r=Math.trunc(d[4].getY())),wt.copyToResult(d,wt.findRowsWithPattern(e,l,c,r,s,wt.STOP_PATTERN),wt.INDEXES_STOP_PATTERN),d}static copyToResult(e,r,s){for(let l=0;l<s.length;l++)e[s[l]]=r[l]}static findRowsWithPattern(e,r,s,l,c,d){const p=new Array(4);let w=!1;const E=new Int32Array(d.length);for(;l<r;l+=wt.ROW_STEP){let P=wt.findGuardPattern(e,c,l,s,!1,d,E);if(P!=null){for(;l>0;){const D=wt.findGuardPattern(e,c,--l,s,!1,d,E);if(D!=null)P=D;else{l++;break}}p[0]=new ze(P[0],l),p[1]=new ze(P[1],l),w=!0;break}}let R=l+1;if(w){let P=0,D=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;R<r;R++){const W=wt.findGuardPattern(e,D[0],R,s,!1,d,E);if(W!=null&&Math.abs(D[0]-W[0])<wt.MAX_PATTERN_DRIFT&&Math.abs(D[1]-W[1])<wt.MAX_PATTERN_DRIFT)D=W,P=0;else{if(P>wt.SKIPPED_ROW_COUNT_MAX)break;P++}}R-=P+1,p[2]=new ze(D[0],R),p[3]=new ze(D[1],R)}return R-l<wt.BARCODE_MIN_HEIGHT&&V.fill(p,null),p}static findGuardPattern(e,r,s,l,c,d,p){V.fillWithin(p,0,p.length,0);let w=r,E=0;for(;e.get(w,s)&&w>0&&E++<wt.MAX_PIXEL_DRIFT;)w--;let R=w,P=0,D=d.length;for(let W=c;R<l;R++)if(e.get(R,s)!==W)p[P]++;else{if(P===D-1){if(wt.patternMatchVariance(p,d,wt.MAX_INDIVIDUAL_VARIANCE)<wt.MAX_AVG_VARIANCE)return new Int32Array([w,R]);w+=p[0]+p[1],F.arraycopy(p,2,p,0,P-1),p[P-1]=0,p[P]=0,P--}else P++;p[P]=1,W=!W}return P===D-1&&wt.patternMatchVariance(p,d,wt.MAX_INDIVIDUAL_VARIANCE)<wt.MAX_AVG_VARIANCE?new Int32Array([w,R-1]):null}static patternMatchVariance(e,r,s){let l=e.length,c=0,d=0;for(let E=0;E<l;E++)c+=e[E],d+=r[E];if(c<d)return 1/0;let p=c/d;s*=p;let w=0;for(let E=0;E<l;E++){let R=e[E],P=r[E]*p,D=R>P?R-P:P-R;if(D>s)return 1/0;w+=D}return w/c}}wt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),wt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),wt.MAX_AVG_VARIANCE=.42,wt.MAX_INDIVIDUAL_VARIANCE=.8,wt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),wt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),wt.MAX_PIXEL_DRIFT=3,wt.MAX_PATTERN_DRIFT=5,wt.SKIPPED_ROW_COUNT_MAX=25,wt.ROW_STEP=5,wt.BARCODE_MIN_HEIGHT=10;class wn{constructor(e,r){if(r.length===0)throw new T;this.field=e;let s=r.length;if(s>1&&r[0]===0){let l=1;for(;l<s&&r[l]===0;)l++;l===s?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(s-l),F.arraycopy(r,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let l=0;for(let c of this.coefficients)l=this.field.add(l,c);return l}let r=this.coefficients[0],s=this.coefficients.length;for(let l=1;l<s;l++)r=this.field.add(this.field.multiply(e,r),this.coefficients[l]);return r}add(e){if(!this.field.equals(e.field))throw new T("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let r=this.coefficients,s=e.coefficients;if(r.length>s.length){let d=r;r=s,s=d}let l=new Int32Array(s.length),c=s.length-r.length;F.arraycopy(s,0,l,0,c);for(let d=c;d<s.length;d++)l[d]=this.field.add(r[d-c],s[d]);return new wn(this.field,l)}subtract(e){if(!this.field.equals(e.field))throw new T("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof wn?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new T("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new wn(this.field,new Int32Array([0]));let r=this.coefficients,s=r.length,l=e.coefficients,c=l.length,d=new Int32Array(s+c-1);for(let p=0;p<s;p++){let w=r[p];for(let E=0;E<c;E++)d[p+E]=this.field.add(d[p+E],this.field.multiply(w,l[E]))}return new wn(this.field,d)}negative(){let e=this.coefficients.length,r=new Int32Array(e);for(let s=0;s<e;s++)r[s]=this.field.subtract(0,this.coefficients[s]);return new wn(this.field,r)}multiplyScalar(e){if(e===0)return new wn(this.field,new Int32Array([0]));if(e===1)return this;let r=this.coefficients.length,s=new Int32Array(r);for(let l=0;l<r;l++)s[l]=this.field.multiply(this.coefficients[l],e);return new wn(this.field,s)}multiplyByMonomial(e,r){if(e<0)throw new T;if(r===0)return new wn(this.field,new Int32Array([0]));let s=this.coefficients.length,l=new Int32Array(s+e);for(let c=0;c<s;c++)l[c]=this.field.multiply(this.coefficients[c],r);return new wn(this.field,l)}toString(){let e=new Se;for(let r=this.getDegree();r>=0;r--){let s=this.getCoefficient(r);s!==0&&(s<0?(e.append(" - "),s=-s):e.length()>0&&e.append(" + "),(r===0||s!==1)&&e.append(s),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()}}class ta{add(e,r){return(e+r)%this.modulus}subtract(e,r){return(this.modulus+e-r)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new T;return this.logTable[e]}inverse(e){if(e===0)throw new ce;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class vn extends ta{constructor(e,r){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let s=1;for(let l=0;l<e;l++)this.expTable[l]=s,s=s*r%e;for(let l=0;l<e-1;l++)this.logTable[this.expTable[l]]=l;this.zero=new wn(this,new Int32Array([0])),this.one=new wn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,r){if(e<0)throw new T;if(r===0)return this.zero;let s=new Int32Array(e+1);return s[0]=r,new wn(this,s)}}vn.PDF417_GF=new vn(mt.NUMBER_OF_CODEWORDS,3);class Tr{constructor(){this.field=vn.PDF417_GF}decode(e,r,s){let l=new wn(this.field,e),c=new Int32Array(r),d=!1;for(let Q=r;Q>0;Q--){let ne=l.evaluateAt(this.field.exp(Q));c[r-Q]=ne,ne!==0&&(d=!0)}if(!d)return 0;let p=this.field.getOne();if(s!=null)for(const Q of s){let ne=this.field.exp(e.length-1-Q),se=new wn(this.field,new Int32Array([this.field.subtract(0,ne),1]));p=p.multiply(se)}let w=new wn(this.field,c),E=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),w,r),R=E[0],P=E[1],D=this.findErrorLocations(R),W=this.findErrorMagnitudes(P,R,D);for(let Q=0;Q<D.length;Q++){let ne=e.length-1-this.field.log(D[Q]);if(ne<0)throw M.getChecksumInstance();e[ne]=this.field.subtract(e[ne],W[Q])}return D.length}runEuclideanAlgorithm(e,r,s){if(e.getDegree()<r.getDegree()){let D=e;e=r,r=D}let l=e,c=r,d=this.field.getZero(),p=this.field.getOne();for(;c.getDegree()>=Math.round(s/2);){let D=l,W=d;if(l=c,d=p,l.isZero())throw M.getChecksumInstance();c=D;let Q=this.field.getZero(),ne=l.getCoefficient(l.getDegree()),se=this.field.inverse(ne);for(;c.getDegree()>=l.getDegree()&&!c.isZero();){let fe=c.getDegree()-l.getDegree(),Be=this.field.multiply(c.getCoefficient(c.getDegree()),se);Q=Q.add(this.field.buildMonomial(fe,Be)),c=c.subtract(l.multiplyByMonomial(fe,Be))}p=Q.multiply(d).subtract(W).negative()}let w=p.getCoefficient(0);if(w===0)throw M.getChecksumInstance();let E=this.field.inverse(w),R=p.multiply(E),P=c.multiply(E);return[R,P]}findErrorLocations(e){let r=e.getDegree(),s=new Int32Array(r),l=0;for(let c=1;c<this.field.getSize()&&l<r;c++)e.evaluateAt(c)===0&&(s[l]=this.field.inverse(c),l++);if(l!==r)throw M.getChecksumInstance();return s}findErrorMagnitudes(e,r,s){let l=r.getDegree(),c=new Int32Array(l);for(let E=1;E<=l;E++)c[l-E]=this.field.multiply(E,r.getCoefficient(E));let d=new wn(this.field,c),p=s.length,w=new Int32Array(p);for(let E=0;E<p;E++){let R=this.field.inverse(s[E]),P=this.field.subtract(0,e.evaluateAt(R)),D=this.field.inverse(d.evaluateAt(R));w[E]=this.field.multiply(P,D)}return w}}class Ur{constructor(e,r,s,l,c){e instanceof Ur?this.constructor_2(e):this.constructor_1(e,r,s,l,c)}constructor_1(e,r,s,l,c){const d=r==null||s==null,p=l==null||c==null;if(d&&p)throw new Z;d?(r=new ze(0,l.getY()),s=new ze(0,c.getY())):p&&(l=new ze(e.getWidth()-1,r.getY()),c=new ze(e.getWidth()-1,s.getY())),this.image=e,this.topLeft=r,this.bottomLeft=s,this.topRight=l,this.bottomRight=c,this.minX=Math.trunc(Math.min(r.getX(),s.getX())),this.maxX=Math.trunc(Math.max(l.getX(),c.getX())),this.minY=Math.trunc(Math.min(r.getY(),l.getY())),this.maxY=Math.trunc(Math.max(s.getY(),c.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,r){return e==null?r:r==null?e:new Ur(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)}addMissingRows(e,r,s){let l=this.topLeft,c=this.bottomLeft,d=this.topRight,p=this.bottomRight;if(e>0){let w=s?this.topLeft:this.topRight,E=Math.trunc(w.getY()-e);E<0&&(E=0);let R=new ze(w.getX(),E);s?l=R:d=R}if(r>0){let w=s?this.bottomLeft:this.bottomRight,E=Math.trunc(w.getY()+r);E>=this.image.getHeight()&&(E=this.image.getHeight()-1);let R=new ze(w.getX(),E);s?c=R:p=R}return new Ur(this.image,l,c,d,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class cr{constructor(e,r,s,l){this.columnCount=e,this.errorCorrectionLevel=l,this.rowCountUpperPart=r,this.rowCountLowerPart=s,this.rowCount=r+s}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Mn{constructor(){this.buffer=""}static form(e,r){let s=-1;function l(d,p,w,E,R,P){if(d==="%%")return"%";if(r[++s]===void 0)return;d=E?parseInt(E.substr(1)):void 0;let D=R?parseInt(R.substr(1)):void 0,W;switch(P){case"s":W=r[s];break;case"c":W=r[s][0];break;case"f":W=parseFloat(r[s]).toFixed(d);break;case"p":W=parseFloat(r[s]).toPrecision(d);break;case"e":W=parseFloat(r[s]).toExponential(d);break;case"x":W=parseInt(r[s]).toString(D||16);break;case"d":W=parseFloat(parseInt(r[s],D||10).toPrecision(d)).toFixed(0);break}W=typeof W=="object"?JSON.stringify(W):(+W).toString(D);let Q=parseInt(w),ne=w&&w[0]+""=="0"?"0":" ";for(;W.length<Q;)W=p!==void 0?W+ne:ne+W;return W}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(c,l)}format(e,...r){this.buffer+=Mn.form(e,r)}toString(){return this.buffer}}class Pr{constructor(e){this.boundingBox=new Ur(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let r=this.getCodeword(e);if(r!=null)return r;for(let s=1;s<Pr.MAX_NEARBY_DISTANCE;s++){let l=this.imageRowToCodewordIndex(e)-s;if(l>=0&&(r=this.codewords[l],r!=null)||(l=this.imageRowToCodewordIndex(e)+s,l<this.codewords.length&&(r=this.codewords[l],r!=null)))return r}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new Mn;let r=0;for(const s of this.codewords){if(s==null){e.format("%3d:    |   %n",r++);continue}e.format("%3d: %3d|%3d%n",r++,s.getRowNumber(),s.getValue())}return e.toString()}}Pr.MAX_NEARBY_DISTANCE=5;class vi{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)}getValue(){let e=-1,r=new Array;for(const[s,l]of this.values.entries()){const c={getKey:()=>s,getValue:()=>l};c.getValue()>e?(e=c.getValue(),r=[],r.push(c.getKey())):c.getValue()===e&&r.push(c.getKey())}return mt.toIntArray(r)}getConfidence(e){return this.values.get(e)}}class ul extends Pr{constructor(e,r){super(e),this._isLeft=r}setRowNumbers(){for(let e of this.getCodewords())e!=null&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,e);let s=this.getBoundingBox(),l=this._isLeft?s.getTopLeft():s.getTopRight(),c=this._isLeft?s.getBottomLeft():s.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),p=this.imageRowToCodewordIndex(Math.trunc(c.getY())),w=-1,E=1,R=0;for(let P=d;P<p;P++){if(r[P]==null)continue;let D=r[P],W=D.getRowNumber()-w;if(W===0)R++;else if(W===1)E=Math.max(E,R),R=1,w=D.getRowNumber();else if(W<0||D.getRowNumber()>=e.getRowCount()||W>P)r[P]=null;else{let Q;E>2?Q=(E-2)*W:Q=W;let ne=Q>=P;for(let se=1;se<=Q&&!ne;se++)ne=r[P-se]!=null;ne?r[P]=null:(w=D.getRowNumber(),R=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let r=new Int32Array(e.getRowCount());for(let s of this.getCodewords())if(s!=null){let l=s.getRowNumber();if(l>=r.length)continue;r[l]++}return r}adjustIncompleteIndicatorColumnRowNumbers(e){let r=this.getBoundingBox(),s=this._isLeft?r.getTopLeft():r.getTopRight(),l=this._isLeft?r.getBottomLeft():r.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),p=this.getCodewords(),w=-1;for(let E=c;E<d;E++){if(p[E]==null)continue;let R=p[E];R.setRowNumberAsRowIndicatorColumn();let P=R.getRowNumber()-w;P===0||(P===1?w=R.getRowNumber():R.getRowNumber()>=e.getRowCount()?p[E]=null:w=R.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),r=new vi,s=new vi,l=new vi,c=new vi;for(let p of e){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let w=p.getValue()%30,E=p.getRowNumber();switch(this._isLeft||(E+=2),E%3){case 0:s.setValue(w*3+1);break;case 1:c.setValue(w/3),l.setValue(w%3);break;case 2:r.setValue(w+1);break}}if(r.getValue().length===0||s.getValue().length===0||l.getValue().length===0||c.getValue().length===0||r.getValue()[0]<1||s.getValue()[0]+l.getValue()[0]<mt.MIN_ROWS_IN_BARCODE||s.getValue()[0]+l.getValue()[0]>mt.MAX_ROWS_IN_BARCODE)return null;let d=new cr(r.getValue()[0],s.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(e,d),d}removeIncorrectCodewords(e,r){for(let s=0;s<e.length;s++){let l=e[s];if(e[s]==null)continue;let c=l.getValue()%30,d=l.getRowNumber();if(d>r.getRowCount()){e[s]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:c*3+1!==r.getRowCountUpperPart()&&(e[s]=null);break;case 1:(Math.trunc(c/3)!==r.getErrorCorrectionLevel()||c%3!==r.getRowCountLowerPart())&&(e[s]=null);break;case 2:c+1!==r.getColumnCount()&&(e[s]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Os{constructor(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=mt.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let r=1;r<this.barcodeColumnCount+1;r++){let s=this.detectionResultColumns[r].getCodewords();for(let l=0;l<s.length;l++)s[l]!=null&&(s[l].hasValidRowNumber()||this.adjustRowNumbers(r,l,s))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let s=0;s<e.length;s++)if(e[s]!=null&&r[s]!=null&&e[s].getRowNumber()===r[s].getRowNumber())for(let l=1;l<=this.barcodeColumnCount;l++){let c=this.detectionResultColumns[l].getCodewords()[s];c!=null&&(c.setRowNumber(e[s].getRowNumber()),c.hasValidRowNumber()||(this.detectionResultColumns[l].getCodewords()[s]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let s=0;s<r.length;s++){if(r[s]==null)continue;let l=r[s].getRowNumber(),c=0;for(let d=this.barcodeColumnCount+1;d>0&&c<this.ADJUST_ROW_NUMBER_SKIP;d--){let p=this.detectionResultColumns[d].getCodewords()[s];p!=null&&(c=Os.adjustRowNumberIfValid(l,c,p),p.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,r=this.detectionResultColumns[0].getCodewords();for(let s=0;s<r.length;s++){if(r[s]==null)continue;let l=r[s].getRowNumber(),c=0;for(let d=1;d<this.barcodeColumnCount+1&&c<this.ADJUST_ROW_NUMBER_SKIP;d++){let p=this.detectionResultColumns[d].getCodewords()[s];p!=null&&(c=Os.adjustRowNumberIfValid(l,c,p),p.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,r,s){return s==null||s.hasValidRowNumber()||(s.isValidRowNumber(e)?(s.setRowNumber(e),r=0):++r),r}adjustRowNumbers(e,r,s){if(!this.detectionResultColumns[e-1])return;let l=s[r],c=this.detectionResultColumns[e-1].getCodewords(),d=c;this.detectionResultColumns[e+1]!=null&&(d=this.detectionResultColumns[e+1].getCodewords());let p=new Array(14);p[2]=c[r],p[3]=d[r],r>0&&(p[0]=s[r-1],p[4]=c[r-1],p[5]=d[r-1]),r>1&&(p[8]=s[r-2],p[10]=c[r-2],p[11]=d[r-2]),r<s.length-1&&(p[1]=s[r+1],p[6]=c[r+1],p[7]=d[r+1]),r<s.length-2&&(p[9]=s[r+2],p[12]=c[r+2],p[13]=d[r+2]);for(let w of p)if(Os.adjustRowNumber(l,w))return}static adjustRowNumber(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,r){this.detectionResultColumns[e]=r}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let r=new Mn;for(let s=0;s<e.getCodewords().length;s++){r.format("CW %3d:",s);for(let l=0;l<this.barcodeColumnCount+2;l++){if(this.detectionResultColumns[l]==null){r.format("    |   ");continue}let c=this.detectionResultColumns[l].getCodewords()[s];if(c==null){r.format("    |   ");continue}r.format(" %3d|%3d",c.getRowNumber(),c.getValue())}r.format("%n")}return r.toString()}}class Oi{constructor(e,r,s,l){this.rowNumber=Oi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(s),this.value=Math.trunc(l)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==Oi.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}Oi.BARCODE_ROW_UNKNOWN=-1;class Kn{static initialize(){for(let e=0;e<mt.SYMBOL_TABLE.length;e++){let r=mt.SYMBOL_TABLE[e],s=r&1;for(let l=0;l<mt.BARS_IN_MODULE;l++){let c=0;for(;(r&1)===s;)c+=1,r>>=1;s=r&1,Kn.RATIOS_TABLE[e]||(Kn.RATIOS_TABLE[e]=new Array(mt.BARS_IN_MODULE)),Kn.RATIOS_TABLE[e][mt.BARS_IN_MODULE-l-1]=Math.fround(c/mt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let r=Kn.getDecodedCodewordValue(Kn.sampleBitCounts(e));return r!==-1?r:Kn.getClosestDecodedValue(e)}static sampleBitCounts(e){let r=Qe.sum(e),s=new Int32Array(mt.BARS_IN_MODULE),l=0,c=0;for(let d=0;d<mt.MODULES_IN_CODEWORD;d++){let p=r/(2*mt.MODULES_IN_CODEWORD)+d*r/mt.MODULES_IN_CODEWORD;c+e[l]<=p&&(c+=e[l],l++),s[l]++}return s}static getDecodedCodewordValue(e){let r=Kn.getBitValue(e);return mt.getCodeword(r)===-1?-1:r}static getBitValue(e){let r=0;for(let s=0;s<e.length;s++)for(let l=0;l<e[s];l++)r=r<<1|(s%2===0?1:0);return Math.trunc(r)}static getClosestDecodedValue(e){let r=Qe.sum(e),s=new Array(mt.BARS_IN_MODULE);if(r>1)for(let d=0;d<s.length;d++)s[d]=Math.fround(e[d]/r);let l=Bt.MAX_VALUE,c=-1;this.bSymbolTableReady||Kn.initialize();for(let d=0;d<Kn.RATIOS_TABLE.length;d++){let p=0,w=Kn.RATIOS_TABLE[d];for(let E=0;E<mt.BARS_IN_MODULE;E++){let R=Math.fround(w[E]-s[E]);if(p+=Math.fround(R*R),p>=l)break}p<l&&(l=p,c=mt.SYMBOL_TABLE[d])}return c}}Kn.bSymbolTableReady=!1,Kn.RATIOS_TABLE=new Array(mt.SYMBOL_TABLE.length).map(k=>new Array(mt.BARS_IN_MODULE));class po{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class na{static parseLong(e,r=void 0){return parseInt(e,r)}}class ci extends C{}ci.kind="NullPointerException";class ra{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,r,s){if(e==null)throw new ci;if(r<0||r>e.length||s<0||r+s>e.length||r+s<0)throw new j;if(s===0)return;for(let l=0;l<s;l++)this.write(e[r+l])}flush(){}close(){}}class go extends C{}class dl extends ra{constructor(e=32){if(super(),this.count=0,e<0)throw new T("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let s=this.buf.length<<1;if(s-e<0&&(s=e),s<0){if(e<0)throw new go;s=B.MAX_VALUE}this.buf=V.copyOfUint8Array(this.buf,s)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,r,s){if(r<0||r>e.length||s<0||r+s-e.length>0)throw new j;this.ensureCapacity(this.count+s),F.arraycopy(e,r,this.buf,this.count,s),this.count+=s}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return V.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var Vt;(function(k){k[k.ALPHA=0]="ALPHA",k[k.LOWER=1]="LOWER",k[k.MIXED=2]="MIXED",k[k.PUNCT=3]="PUNCT",k[k.ALPHA_SHIFT=4]="ALPHA_SHIFT",k[k.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Vt||(Vt={}));function Ds(){if(typeof window<"u")return window.BigInt||null;if(typeof lc<"u")return lc.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ls;function Nn(k){if(typeof Ls>"u"&&(Ls=Ds()),Ls===null)throw new Error("BigInt is not supported!");return Ls(k)}function rs(){let k=[];k[0]=Nn(1);let e=Nn(900);k[1]=e;for(let r=2;r<16;r++)k[r]=k[r-1]*e;return k}class he{static decode(e,r){let s=new Se(""),l=J.ISO8859_1;s.enableDecoding(l);let c=1,d=e[c++],p=new po;for(;c<e[0];){switch(d){case he.TEXT_COMPACTION_MODE_LATCH:c=he.textCompaction(e,c,s);break;case he.BYTE_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH_6:c=he.byteCompaction(d,e,l,c,s);break;case he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(e[c++]);break;case he.NUMERIC_COMPACTION_MODE_LATCH:c=he.numericCompaction(e,c,s);break;case he.ECI_CHARSET:J.getCharacterSetECIByValue(e[c++]);break;case he.ECI_GENERAL_PURPOSE:c+=2;break;case he.ECI_USER_DEFINED:c++;break;case he.BEGIN_MACRO_PDF417_CONTROL_BLOCK:c=he.decodeMacroBlock(e,c,p);break;case he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case he.MACRO_PDF417_TERMINATOR:throw new G;default:c--,c=he.textCompaction(e,c,s);break}if(c<e.length)d=e[c++];else throw G.getFormatInstance()}if(s.length()===0)throw G.getFormatInstance();let w=new Ae(null,s.toString(),null,r);return w.setOther(p),w}static decodeMacroBlock(e,r,s){if(r+he.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw G.getFormatInstance();let l=new Int32Array(he.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<he.NUMBER_OF_SEQUENCE_CODEWORDS;p++,r++)l[p]=e[r];s.setSegmentIndex(B.parseInt(he.decodeBase900toBase10(l,he.NUMBER_OF_SEQUENCE_CODEWORDS)));let c=new Se;r=he.textCompaction(e,r,c),s.setFileId(c.toString());let d=-1;for(e[r]===he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=r+1);r<e[0];)switch(e[r]){case he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case he.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new Se;r=he.textCompaction(e,r+1,p),s.setFileName(p.toString());break;case he.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let w=new Se;r=he.textCompaction(e,r+1,w),s.setSender(w.toString());break;case he.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let E=new Se;r=he.textCompaction(e,r+1,E),s.setAddressee(E.toString());break;case he.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let R=new Se;r=he.numericCompaction(e,r+1,R),s.setSegmentCount(B.parseInt(R.toString()));break;case he.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let P=new Se;r=he.numericCompaction(e,r+1,P),s.setTimestamp(na.parseLong(P.toString()));break;case he.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let D=new Se;r=he.numericCompaction(e,r+1,D),s.setChecksum(B.parseInt(D.toString()));break;case he.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let W=new Se;r=he.numericCompaction(e,r+1,W),s.setFileSize(na.parseLong(W.toString()));break;default:throw G.getFormatInstance()}break;case he.MACRO_PDF417_TERMINATOR:r++,s.setLastSegment(!0);break;default:throw G.getFormatInstance()}if(d!==-1){let p=r-d;s.isLastSegment()&&p--,s.setOptionalData(V.copyOfRange(e,d,d+p))}return r}static textCompaction(e,r,s){let l=new Int32Array((e[0]-r)*2),c=new Int32Array((e[0]-r)*2),d=0,p=!1;for(;r<e[0]&&!p;){let w=e[r++];if(w<he.TEXT_COMPACTION_MODE_LATCH)l[d]=w/30,l[d+1]=w%30,d+=2;else switch(w){case he.TEXT_COMPACTION_MODE_LATCH:l[d++]=he.TEXT_COMPACTION_MODE_LATCH;break;case he.BYTE_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH_6:case he.NUMERIC_COMPACTION_MODE_LATCH:case he.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case he.MACRO_PDF417_TERMINATOR:r--,p=!0;break;case he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l[d]=he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,w=e[r++],c[d]=w,d++;break}}return he.decodeTextCompaction(l,c,d,s),r}static decodeTextCompaction(e,r,s,l){let c=Vt.ALPHA,d=Vt.ALPHA,p=0;for(;p<s;){let w=e[p],E="";switch(c){case Vt.ALPHA:if(w<26)E=String.fromCharCode(65+w);else switch(w){case 26:E=" ";break;case he.LL:c=Vt.LOWER;break;case he.ML:c=Vt.MIXED;break;case he.PS:d=c,c=Vt.PUNCT_SHIFT;break;case he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[p]);break;case he.TEXT_COMPACTION_MODE_LATCH:c=Vt.ALPHA;break}break;case Vt.LOWER:if(w<26)E=String.fromCharCode(97+w);else switch(w){case 26:E=" ";break;case he.AS:d=c,c=Vt.ALPHA_SHIFT;break;case he.ML:c=Vt.MIXED;break;case he.PS:d=c,c=Vt.PUNCT_SHIFT;break;case he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[p]);break;case he.TEXT_COMPACTION_MODE_LATCH:c=Vt.ALPHA;break}break;case Vt.MIXED:if(w<he.PL)E=he.MIXED_CHARS[w];else switch(w){case he.PL:c=Vt.PUNCT;break;case 26:E=" ";break;case he.LL:c=Vt.LOWER;break;case he.AL:c=Vt.ALPHA;break;case he.PS:d=c,c=Vt.PUNCT_SHIFT;break;case he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[p]);break;case he.TEXT_COMPACTION_MODE_LATCH:c=Vt.ALPHA;break}break;case Vt.PUNCT:if(w<he.PAL)E=he.PUNCT_CHARS[w];else switch(w){case he.PAL:c=Vt.ALPHA;break;case he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[p]);break;case he.TEXT_COMPACTION_MODE_LATCH:c=Vt.ALPHA;break}break;case Vt.ALPHA_SHIFT:if(c=d,w<26)E=String.fromCharCode(65+w);else switch(w){case 26:E=" ";break;case he.TEXT_COMPACTION_MODE_LATCH:c=Vt.ALPHA;break}break;case Vt.PUNCT_SHIFT:if(c=d,w<he.PAL)E=he.PUNCT_CHARS[w];else switch(w){case he.PAL:c=Vt.ALPHA;break;case he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[p]);break;case he.TEXT_COMPACTION_MODE_LATCH:c=Vt.ALPHA;break}break}E!==""&&l.append(E),p++}}static byteCompaction(e,r,s,l,c){let d=new dl,p=0,w=0,E=!1;switch(e){case he.BYTE_COMPACTION_MODE_LATCH:let R=new Int32Array(6),P=r[l++];for(;l<r[0]&&!E;)switch(R[p++]=P,w=900*w+P,P=r[l++],P){case he.TEXT_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH:case he.NUMERIC_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH_6:case he.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case he.MACRO_PDF417_TERMINATOR:l--,E=!0;break;default:if(p%5===0&&p>0){for(let D=0;D<6;++D)d.write(Number(Nn(w)>>Nn(8*(5-D))));w=0,p=0}break}l===r[0]&&P<he.TEXT_COMPACTION_MODE_LATCH&&(R[p++]=P);for(let D=0;D<p;D++)d.write(R[D]);break;case he.BYTE_COMPACTION_MODE_LATCH_6:for(;l<r[0]&&!E;){let D=r[l++];if(D<he.TEXT_COMPACTION_MODE_LATCH)p++,w=900*w+D;else switch(D){case he.TEXT_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH:case he.NUMERIC_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH_6:case he.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case he.MACRO_PDF417_TERMINATOR:l--,E=!0;break}if(p%5===0&&p>0){for(let W=0;W<6;++W)d.write(Number(Nn(w)>>Nn(8*(5-W))));w=0,p=0}}break}return c.append(_e.decode(d.toByteArray(),s)),l}static numericCompaction(e,r,s){let l=0,c=!1,d=new Int32Array(he.MAX_NUMERIC_CODEWORDS);for(;r<e[0]&&!c;){let p=e[r++];if(r===e[0]&&(c=!0),p<he.TEXT_COMPACTION_MODE_LATCH)d[l]=p,l++;else switch(p){case he.TEXT_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH_6:case he.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case he.MACRO_PDF417_TERMINATOR:r--,c=!0;break}(l%he.MAX_NUMERIC_CODEWORDS===0||p===he.NUMERIC_COMPACTION_MODE_LATCH||c)&&l>0&&(s.append(he.decodeBase900toBase10(d,l)),l=0)}return r}static decodeBase900toBase10(e,r){let s=Nn(0);for(let c=0;c<r;c++)s+=he.EXP900[r-c-1]*Nn(e[c]);let l=s.toString();if(l.charAt(0)!=="1")throw new G;return l.substring(1)}}he.TEXT_COMPACTION_MODE_LATCH=900,he.BYTE_COMPACTION_MODE_LATCH=901,he.NUMERIC_COMPACTION_MODE_LATCH=902,he.BYTE_COMPACTION_MODE_LATCH_6=924,he.ECI_USER_DEFINED=925,he.ECI_GENERAL_PURPOSE=926,he.ECI_CHARSET=927,he.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,he.MACRO_PDF417_TERMINATOR=922,he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,he.MAX_NUMERIC_CODEWORDS=15,he.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,he.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,he.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,he.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,he.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,he.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,he.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,he.PL=25,he.LL=27,he.AS=27,he.ML=28,he.AL=28,he.PS=29,he.PAL=29,he.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,he.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",he.EXP900=Ds()?rs():[],he.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Tt{constructor(){}static decode(e,r,s,l,c,d,p){let w=new Ur(e,r,s,l,c),E=null,R=null,P;for(let Q=!0;;Q=!1){if(r!=null&&(E=Tt.getRowIndicatorColumn(e,w,r,!0,d,p)),l!=null&&(R=Tt.getRowIndicatorColumn(e,w,l,!1,d,p)),P=Tt.merge(E,R),P==null)throw Z.getNotFoundInstance();let ne=P.getBoundingBox();if(Q&&ne!=null&&(ne.getMinY()<w.getMinY()||ne.getMaxY()>w.getMaxY()))w=ne;else break}P.setBoundingBox(w);let D=P.getBarcodeColumnCount()+1;P.setDetectionResultColumn(0,E),P.setDetectionResultColumn(D,R);let W=E!=null;for(let Q=1;Q<=D;Q++){let ne=W?Q:D-Q;if(P.getDetectionResultColumn(ne)!==void 0)continue;let se;ne===0||ne===D?se=new ul(w,ne===0):se=new Pr(w),P.setDetectionResultColumn(ne,se);let fe=-1,Be=fe;for(let Ue=w.getMinY();Ue<=w.getMaxY();Ue++){if(fe=Tt.getStartColumn(P,ne,Ue,W),fe<0||fe>w.getMaxX()){if(Be===-1)continue;fe=Be}let Pe=Tt.detectCodeword(e,w.getMinX(),w.getMaxX(),W,fe,Ue,d,p);Pe!=null&&(se.setCodeword(Ue,Pe),Be=fe,d=Math.min(d,Pe.getWidth()),p=Math.max(p,Pe.getWidth()))}}return Tt.createDecoderResult(P)}static merge(e,r){if(e==null&&r==null)return null;let s=Tt.getBarcodeMetadata(e,r);if(s==null)return null;let l=Ur.merge(Tt.adjustBoundingBox(e),Tt.adjustBoundingBox(r));return new Os(s,l)}static adjustBoundingBox(e){if(e==null)return null;let r=e.getRowHeights();if(r==null)return null;let s=Tt.getMax(r),l=0;for(let p of r)if(l+=s-p,p>0)break;let c=e.getCodewords();for(let p=0;l>0&&c[p]==null;p++)l--;let d=0;for(let p=r.length-1;p>=0&&(d+=s-r[p],!(r[p]>0));p--);for(let p=c.length-1;d>0&&c[p]==null;p--)d--;return e.getBoundingBox().addMissingRows(l,d,e.isLeft())}static getMax(e){let r=-1;for(let s of e)r=Math.max(r,s);return r}static getBarcodeMetadata(e,r){let s;if(e==null||(s=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();let l;return r==null||(l=r.getBarcodeMetadata())==null?s:s.getColumnCount()!==l.getColumnCount()&&s.getErrorCorrectionLevel()!==l.getErrorCorrectionLevel()&&s.getRowCount()!==l.getRowCount()?null:s}static getRowIndicatorColumn(e,r,s,l,c,d){let p=new ul(r,l);for(let w=0;w<2;w++){let E=w===0?1:-1,R=Math.trunc(Math.trunc(s.getX()));for(let P=Math.trunc(Math.trunc(s.getY()));P<=r.getMaxY()&&P>=r.getMinY();P+=E){let D=Tt.detectCodeword(e,0,e.getWidth(),l,R,P,c,d);D!=null&&(p.setCodeword(P,D),l?R=D.getStartX():R=D.getEndX())}}return p}static adjustCodewordCount(e,r){let s=r[0][1],l=s.getValue(),c=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-Tt.getNumberOfECCodeWords(e.getBarcodeECLevel());if(l.length===0){if(c<1||c>mt.MAX_CODEWORDS_IN_BARCODE)throw Z.getNotFoundInstance();s.setValue(c)}else l[0]!==c&&s.setValue(c)}static createDecoderResult(e){let r=Tt.createBarcodeMatrix(e);Tt.adjustCodewordCount(e,r);let s=new Array,l=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),c=[],d=new Array;for(let w=0;w<e.getBarcodeRowCount();w++)for(let E=0;E<e.getBarcodeColumnCount();E++){let R=r[w][E+1].getValue(),P=w*e.getBarcodeColumnCount()+E;R.length===0?s.push(P):R.length===1?l[P]=R[0]:(d.push(P),c.push(R))}let p=new Array(c.length);for(let w=0;w<p.length;w++)p[w]=c[w];return Tt.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),l,mt.toIntArray(s),mt.toIntArray(d),p)}static createDecoderResultFromAmbiguousValues(e,r,s,l,c){let d=new Int32Array(l.length),p=100;for(;p-- >0;){for(let w=0;w<d.length;w++)r[l[w]]=c[w][d[w]];try{return Tt.decodeCodewords(r,e,s)}catch(w){if(!(w instanceof M))throw w}if(d.length===0)throw M.getChecksumInstance();for(let w=0;w<d.length;w++)if(d[w]<c[w].length-1){d[w]++;break}else if(d[w]=0,w===d.length-1)throw M.getChecksumInstance()}throw M.getChecksumInstance()}static createBarcodeMatrix(e){let r=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let l=0;l<r.length;l++)for(let c=0;c<r[l].length;c++)r[l][c]=new vi;let s=0;for(let l of e.getDetectionResultColumns()){if(l!=null){for(let c of l.getCodewords())if(c!=null){let d=c.getRowNumber();if(d>=0){if(d>=r.length)continue;r[d][s].setValue(c.getValue())}}}s++}return r}static isValidBarcodeColumn(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1}static getStartColumn(e,r,s,l){let c=l?1:-1,d=null;if(Tt.isValidBarcodeColumn(e,r-c)&&(d=e.getDetectionResultColumn(r-c).getCodeword(s)),d!=null)return l?d.getEndX():d.getStartX();if(d=e.getDetectionResultColumn(r).getCodewordNearby(s),d!=null)return l?d.getStartX():d.getEndX();if(Tt.isValidBarcodeColumn(e,r-c)&&(d=e.getDetectionResultColumn(r-c).getCodewordNearby(s)),d!=null)return l?d.getEndX():d.getStartX();let p=0;for(;Tt.isValidBarcodeColumn(e,r-c);){r-=c;for(let w of e.getDetectionResultColumn(r).getCodewords())if(w!=null)return(l?w.getEndX():w.getStartX())+c*p*(w.getEndX()-w.getStartX());p++}return l?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,r,s,l,c,d,p,w){c=Tt.adjustCodewordStartColumn(e,r,s,l,c,d);let E=Tt.getModuleBitCount(e,r,s,l,c,d);if(E==null)return null;let R,P=Qe.sum(E);if(l)R=c+P;else{for(let Q=0;Q<E.length/2;Q++){let ne=E[Q];E[Q]=E[E.length-1-Q],E[E.length-1-Q]=ne}R=c,c=R-P}if(!Tt.checkCodewordSkew(P,p,w))return null;let D=Kn.getDecodedValue(E),W=mt.getCodeword(D);return W===-1?null:new Oi(c,R,Tt.getCodewordBucketNumber(D),W)}static getModuleBitCount(e,r,s,l,c,d){let p=c,w=new Int32Array(8),E=0,R=l?1:-1,P=l;for(;(l?p<s:p>=r)&&E<w.length;)e.get(p,d)===P?(w[E]++,p+=R):(E++,P=!P);return E===w.length||p===(l?s:r)&&E===w.length-1?w:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,r,s,l,c,d){let p=c,w=l?-1:1;for(let E=0;E<2;E++){for(;(l?p>=r:p<s)&&l===e.get(p,d);){if(Math.abs(c-p)>Tt.CODEWORD_SKEW_SIZE)return c;p+=w}w=-w,l=!l}return p}static checkCodewordSkew(e,r,s){return r-Tt.CODEWORD_SKEW_SIZE<=e&&e<=s+Tt.CODEWORD_SKEW_SIZE}static decodeCodewords(e,r,s){if(e.length===0)throw G.getFormatInstance();let l=1<<r+1,c=Tt.correctErrors(e,s,l);Tt.verifyCodewordCount(e,l);let d=he.decode(e,""+r);return d.setErrorsCorrected(c),d.setErasures(s.length),d}static correctErrors(e,r,s){if(r!=null&&r.length>s/2+Tt.MAX_ERRORS||s<0||s>Tt.MAX_EC_CODEWORDS)throw M.getChecksumInstance();return Tt.errorCorrection.decode(e,s,r)}static verifyCodewordCount(e,r){if(e.length<4)throw G.getFormatInstance();let s=e[0];if(s>e.length)throw G.getFormatInstance();if(s===0)if(r<e.length)e[0]=e.length-r;else throw G.getFormatInstance()}static getBitCountForCodeword(e){let r=new Int32Array(8),s=0,l=r.length-1;for(;!((e&1)!==s&&(s=e&1,l--,l<0));)r[l]++,e>>=1;return r}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return Tt.getCodewordBucketNumber(Tt.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let r=new Mn;for(let s=0;s<e.length;s++){r.format("Row %2d: ",s);for(let l=0;l<e[s].length;l++){let c=e[s][l];c.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",c.getValue()[0],c.getConfidence(c.getValue()[0]))}r.format("%n")}return r.toString()}}Tt.CODEWORD_SKEW_SIZE=2,Tt.MAX_ERRORS=3,Tt.MAX_EC_CODEWORDS=512,Tt.errorCorrection=new Tr;class qn{decode(e,r=null){let s=qn.decode(e,r,!1);if(s==null||s.length===0||s[0]==null)throw Z.getNotFoundInstance();return s[0]}decodeMultiple(e,r=null){try{return qn.decode(e,r,!0)}catch(s){throw s instanceof G||s instanceof M?Z.getNotFoundInstance():s}}static decode(e,r,s){const l=new Array,c=wt.detectMultiple(e,r,s);for(const d of c.getPoints()){const p=Tt.decode(c.getBits(),d[4],d[5],d[6],d[7],qn.getMinCodewordWidth(d),qn.getMaxCodewordWidth(d)),w=new be(p.getText(),p.getRawBytes(),void 0,d,q.PDF_417);w.putMetadata(xe.ERROR_CORRECTION_LEVEL,p.getECLevel());const E=p.getOther();E!=null&&w.putMetadata(xe.PDF417_EXTRA_METADATA,E),l.push(w)}return l.map(d=>d)}static getMaxWidth(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))}static getMinWidth(e,r){return e==null||r==null?B.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(qn.getMaxWidth(e[0],e[4]),qn.getMaxWidth(e[6],e[2])*mt.MODULES_IN_CODEWORD/mt.MODULES_IN_STOP_PATTERN),Math.max(qn.getMaxWidth(e[1],e[5]),qn.getMaxWidth(e[7],e[3])*mt.MODULES_IN_CODEWORD/mt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(qn.getMinWidth(e[0],e[4]),qn.getMinWidth(e[6],e[2])*mt.MODULES_IN_CODEWORD/mt.MODULES_IN_STOP_PATTERN),Math.min(qn.getMinWidth(e[1],e[5]),qn.getMinWidth(e[7],e[3])*mt.MODULES_IN_CODEWORD/mt.MODULES_IN_STOP_PATTERN)))}reset(){}}class is extends C{}is.kind="ReaderException";class xo{constructor(e,r){this.verbose=e===!0,r&&this.setHints(r)}decode(e,r){return r&&this.setHints(r),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const r=!u(e)&&e.get(re.TRY_HARDER)===!0,s=u(e)?null:e.get(re.POSSIBLE_FORMATS),l=new Array;if(!u(s)){const c=s.some(d=>d===q.UPC_A||d===q.UPC_E||d===q.EAN_13||d===q.EAN_8||d===q.CODABAR||d===q.CODE_39||d===q.CODE_93||d===q.CODE_128||d===q.ITF||d===q.RSS_14||d===q.RSS_EXPANDED);c&&!r&&l.push(new yi(e,this.verbose)),s.includes(q.QR_CODE)&&l.push(new sn),s.includes(q.DATA_MATRIX)&&l.push(new xr),s.includes(q.AZTEC)&&l.push(new Yt),s.includes(q.PDF_417)&&l.push(new qn),c&&r&&l.push(new yi(e,this.verbose))}l.length===0&&(r||l.push(new yi(e,this.verbose)),l.push(new sn),l.push(new xr),l.push(new Yt),l.push(new qn),r&&l.push(new yi(e,this.verbose))),this.readers=l}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new is("No readers where selected, nothing can be read.");for(const r of this.readers)try{return r.decode(e,this.hints)}catch(s){if(s instanceof is)continue}throw new Z("No MultiFormat Readers were able to detect the code.")}}class js extends we{constructor(e=null,r=500){const s=new xo;s.setHints(e),super(s,r)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class yo extends we{constructor(e=500){super(new qn,e)}}class fl extends we{constructor(e=500){super(new sn,e)}}var ia;(function(k){k[k.ERROR_CORRECTION=0]="ERROR_CORRECTION",k[k.CHARACTER_SET=1]="CHARACTER_SET",k[k.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",k[k.MIN_SIZE=3]="MIN_SIZE",k[k.MAX_SIZE=4]="MAX_SIZE",k[k.MARGIN=5]="MARGIN",k[k.PDF417_COMPACT=6]="PDF417_COMPACT",k[k.PDF417_COMPACTION=7]="PDF417_COMPACTION",k[k.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",k[k.AZTEC_LAYERS=9]="AZTEC_LAYERS",k[k.QR_VERSION=10]="QR_VERSION"})(ia||(ia={}));var On=ia;class sa{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Xe(e,Int32Array.from([1])))}buildGenerator(e){const r=this.cachedGenerators;if(e>=r.length){let s=r[r.length-1];const l=this.field;for(let c=r.length;c<=e;c++){const d=s.multiply(new Xe(l,Int32Array.from([1,l.exp(c-1+l.getGeneratorBase())])));r.push(d),s=d}}return r[e]}encode(e,r){if(r===0)throw new T("No error correction bytes");const s=e.length-r;if(s<=0)throw new T("No data bytes provided");const l=this.buildGenerator(r),c=new Int32Array(s);F.arraycopy(e,0,c,0,s);let d=new Xe(this.field,c);d=d.multiplyByMonomial(r,1);const w=d.divide(l)[1].getCoefficients(),E=r-w.length;for(let R=0;R<E;R++)e[s+R]=0;F.arraycopy(w,0,e,s+E,w.length)}}class on{constructor(){}static applyMaskPenaltyRule1(e){return on.applyMaskPenaltyRule1Internal(e,!0)+on.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let r=0;const s=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let d=0;d<c-1;d++){const p=s[d];for(let w=0;w<l-1;w++){const E=p[w];E===p[w+1]&&E===s[d+1][w]&&E===s[d+1][w+1]&&r++}}return on.N2*r}static applyMaskPenaltyRule3(e){let r=0;const s=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let d=0;d<c;d++)for(let p=0;p<l;p++){const w=s[d];p+6<l&&w[p]===1&&w[p+1]===0&&w[p+2]===1&&w[p+3]===1&&w[p+4]===1&&w[p+5]===0&&w[p+6]===1&&(on.isWhiteHorizontal(w,p-4,p)||on.isWhiteHorizontal(w,p+7,p+11))&&r++,d+6<c&&s[d][p]===1&&s[d+1][p]===0&&s[d+2][p]===1&&s[d+3][p]===1&&s[d+4][p]===1&&s[d+5][p]===0&&s[d+6][p]===1&&(on.isWhiteVertical(s,p,d-4,d)||on.isWhiteVertical(s,p,d+7,d+11))&&r++}return r*on.N3}static isWhiteHorizontal(e,r,s){r=Math.max(r,0),s=Math.min(s,e.length);for(let l=r;l<s;l++)if(e[l]===1)return!1;return!0}static isWhiteVertical(e,r,s,l){s=Math.max(s,0),l=Math.min(l,e.length);for(let c=s;c<l;c++)if(e[c][r]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let r=0;const s=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let w=0;w<c;w++){const E=s[w];for(let R=0;R<l;R++)E[R]===1&&r++}const d=e.getHeight()*e.getWidth();return Math.floor(Math.abs(r*2-d)*10/d)*on.N4}static getDataMaskBit(e,r,s){let l,c;switch(e){case 0:l=s+r&1;break;case 1:l=s&1;break;case 2:l=r%3;break;case 3:l=(s+r)%3;break;case 4:l=Math.floor(s/2)+Math.floor(r/3)&1;break;case 5:c=s*r,l=(c&1)+c%3;break;case 6:c=s*r,l=(c&1)+c%3&1;break;case 7:c=s*r,l=c%3+(s+r&1)&1;break;default:throw new T("Invalid mask pattern: "+e)}return l===0}static applyMaskPenaltyRule1Internal(e,r){let s=0;const l=r?e.getHeight():e.getWidth(),c=r?e.getWidth():e.getHeight(),d=e.getArray();for(let p=0;p<l;p++){let w=0,E=-1;for(let R=0;R<c;R++){const P=r?d[p][R]:d[R][p];P===E?w++:(w>=5&&(s+=on.N1+(w-5)),w=1,E=P)}w>=5&&(s+=on.N1+(w-5))}return s}}on.N1=3,on.N2=3,on.N3=40,on.N4=10;class wo{constructor(e,r){this.width=e,this.height=r;const s=new Array(r);for(let l=0;l!==r;l++)s[l]=new Uint8Array(e);this.bytes=s}getHeight(){return this.height}getWidth(){return this.width}get(e,r){return this.bytes[r][e]}getArray(){return this.bytes}setNumber(e,r,s){this.bytes[r][e]=s}setBoolean(e,r,s){this.bytes[r][e]=s?1:0}clear(e){for(const r of this.bytes)V.fill(r,e)}equals(e){if(!(e instanceof wo))return!1;const r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(let s=0,l=this.height;s<l;++s){const c=this.bytes[s],d=r.bytes[s];for(let p=0,w=this.width;p<w;++p)if(c[p]!==d[p])return!1}return!0}toString(){const e=new Se;for(let r=0,s=this.height;r<s;++r){const l=this.bytes[r];for(let c=0,d=this.width;c<d;++c)switch(l[c]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class Di{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new Se;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Di.NUM_MASK_PATTERNS}}Di.NUM_MASK_PATTERNS=8;class Jt extends C{}Jt.kind="WriterException";class pt{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,r,s,l,c){pt.clearMatrix(c),pt.embedBasicPatterns(s,c),pt.embedTypeInfo(r,l,c),pt.maybeEmbedVersionInfo(s,c),pt.embedDataBits(e,l,c)}static embedBasicPatterns(e,r){pt.embedPositionDetectionPatternsAndSeparators(r),pt.embedDarkDotAtLeftBottomCorner(r),pt.maybeEmbedPositionAdjustmentPatterns(e,r),pt.embedTimingPatterns(r)}static embedTypeInfo(e,r,s){const l=new Y;pt.makeTypeInfoBits(e,r,l);for(let c=0,d=l.getSize();c<d;++c){const p=l.get(l.getSize()-1-c),w=pt.TYPE_INFO_COORDINATES[c],E=w[0],R=w[1];if(s.setBoolean(E,R,p),c<8){const P=s.getWidth()-c-1;s.setBoolean(P,8,p)}else{const D=s.getHeight()-7+(c-8);s.setBoolean(8,D,p)}}}static maybeEmbedVersionInfo(e,r){if(e.getVersionNumber()<7)return;const s=new Y;pt.makeVersionInfoBits(e,s);let l=6*3-1;for(let c=0;c<6;++c)for(let d=0;d<3;++d){const p=s.get(l);l--,r.setBoolean(c,r.getHeight()-11+d,p),r.setBoolean(r.getHeight()-11+d,c,p)}}static embedDataBits(e,r,s){let l=0,c=-1,d=s.getWidth()-1,p=s.getHeight()-1;for(;d>0;){for(d===6&&(d-=1);p>=0&&p<s.getHeight();){for(let w=0;w<2;++w){const E=d-w;if(!pt.isEmpty(s.get(E,p)))continue;let R;l<e.getSize()?(R=e.get(l),++l):R=!1,r!==255&&on.getDataMaskBit(r,E,p)&&(R=!R),s.setBoolean(E,p,R)}p+=c}c=-c,p+=c,d-=2}if(l!==e.getSize())throw new Jt("Not all bits consumed: "+l+"/"+e.getSize())}static findMSBSet(e){return 32-B.numberOfLeadingZeros(e)}static calculateBCHCode(e,r){if(r===0)throw new T("0 polynomial");const s=pt.findMSBSet(r);for(e<<=s-1;pt.findMSBSet(e)>=s;)e^=r<<pt.findMSBSet(e)-s;return e}static makeTypeInfoBits(e,r,s){if(!Di.isValidMaskPattern(r))throw new Jt("Invalid mask pattern");const l=e.getBits()<<3|r;s.appendBits(l,5);const c=pt.calculateBCHCode(l,pt.TYPE_INFO_POLY);s.appendBits(c,10);const d=new Y;if(d.appendBits(pt.TYPE_INFO_MASK_PATTERN,15),s.xor(d),s.getSize()!==15)throw new Jt("should not happen but we got: "+s.getSize())}static makeVersionInfoBits(e,r){r.appendBits(e.getVersionNumber(),6);const s=pt.calculateBCHCode(e.getVersionNumber(),pt.VERSION_INFO_POLY);if(r.appendBits(s,12),r.getSize()!==18)throw new Jt("should not happen but we got: "+r.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let r=8;r<e.getWidth()-8;++r){const s=(r+1)%2;pt.isEmpty(e.get(r,6))&&e.setNumber(r,6,s),pt.isEmpty(e.get(6,r))&&e.setNumber(6,r,s)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new Jt;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,r,s){for(let l=0;l<8;++l){if(!pt.isEmpty(s.get(e+l,r)))throw new Jt;s.setNumber(e+l,r,0)}}static embedVerticalSeparationPattern(e,r,s){for(let l=0;l<7;++l){if(!pt.isEmpty(s.get(e,r+l)))throw new Jt;s.setNumber(e,r+l,0)}}static embedPositionAdjustmentPattern(e,r,s){for(let l=0;l<5;++l){const c=pt.POSITION_ADJUSTMENT_PATTERN[l];for(let d=0;d<5;++d)s.setNumber(e+d,r+l,c[d])}}static embedPositionDetectionPattern(e,r,s){for(let l=0;l<7;++l){const c=pt.POSITION_DETECTION_PATTERN[l];for(let d=0;d<7;++d)s.setNumber(e+d,r+l,c[d])}}static embedPositionDetectionPatternsAndSeparators(e){const r=pt.POSITION_DETECTION_PATTERN[0].length;pt.embedPositionDetectionPattern(0,0,e),pt.embedPositionDetectionPattern(e.getWidth()-r,0,e),pt.embedPositionDetectionPattern(0,e.getWidth()-r,e);const s=8;pt.embedHorizontalSeparationPattern(0,s-1,e),pt.embedHorizontalSeparationPattern(e.getWidth()-s,s-1,e),pt.embedHorizontalSeparationPattern(0,e.getWidth()-s,e);const l=7;pt.embedVerticalSeparationPattern(l,0,e),pt.embedVerticalSeparationPattern(e.getHeight()-l-1,0,e),pt.embedVerticalSeparationPattern(l,e.getHeight()-l,e)}static maybeEmbedPositionAdjustmentPatterns(e,r){if(e.getVersionNumber()<2)return;const s=e.getVersionNumber()-1,l=pt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[s];for(let c=0,d=l.length;c!==d;c++){const p=l[c];if(p>=0)for(let w=0;w!==d;w++){const E=l[w];E>=0&&pt.isEmpty(r.get(E,p))&&pt.embedPositionAdjustmentPattern(E-2,p-2,r)}}}}pt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),pt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),pt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),pt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),pt.VERSION_INFO_POLY=7973,pt.TYPE_INFO_POLY=1335,pt.TYPE_INFO_MASK_PATTERN=21522;class Qc{constructor(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class nn{constructor(){}static calculateMaskPenalty(e){return on.applyMaskPenaltyRule1(e)+on.applyMaskPenaltyRule2(e)+on.applyMaskPenaltyRule3(e)+on.applyMaskPenaltyRule4(e)}static encode(e,r,s=null){let l=nn.DEFAULT_BYTE_MODE_ENCODING;const c=s!==null&&s.get(On.CHARACTER_SET)!==void 0;c&&(l=s.get(On.CHARACTER_SET).toString());const d=this.chooseMode(e,l),p=new Y;if(d===at.BYTE&&(c||nn.DEFAULT_BYTE_MODE_ENCODING!==l)){const Ue=J.getCharacterSetECIByName(l);Ue!==void 0&&this.appendECI(Ue,p)}this.appendModeInfo(d,p);const w=new Y;this.appendBytes(e,d,w,l);let E;if(s!==null&&s.get(On.QR_VERSION)!==void 0){const Ue=Number.parseInt(s.get(On.QR_VERSION).toString(),10);E=it.getVersionForNumber(Ue);const Pe=this.calculateBitsNeeded(d,p,w,E);if(!this.willFit(Pe,E,r))throw new Jt("Data too big for requested version")}else E=this.recommendVersion(r,d,p,w);const R=new Y;R.appendBitArray(p);const P=d===at.BYTE?w.getSizeInBytes():e.length;this.appendLengthInfo(P,E,d,R),R.appendBitArray(w);const D=E.getECBlocksForLevel(r),W=E.getTotalCodewords()-D.getTotalECCodewords();this.terminateBits(W,R);const Q=this.interleaveWithECBytes(R,E.getTotalCodewords(),W,D.getNumBlocks()),ne=new Di;ne.setECLevel(r),ne.setMode(d),ne.setVersion(E);const se=E.getDimensionForVersion(),fe=new wo(se,se),Be=this.chooseMaskPattern(Q,r,E,fe);return ne.setMaskPattern(Be),pt.buildMatrix(Q,r,E,Be,fe),ne.setMatrix(fe),ne}static recommendVersion(e,r,s,l){const c=this.calculateBitsNeeded(r,s,l,it.getVersionForNumber(1)),d=this.chooseVersion(c,e),p=this.calculateBitsNeeded(r,s,l,d);return this.chooseVersion(p,e)}static calculateBitsNeeded(e,r,s,l){return r.getSize()+e.getCharacterCountBits(l)+s.getSize()}static getAlphanumericCode(e){return e<nn.ALPHANUMERIC_TABLE.length?nn.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,r=null){if(J.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return at.KANJI;let s=!1,l=!1;for(let c=0,d=e.length;c<d;++c){const p=e.charAt(c);if(nn.isDigit(p))s=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)l=!0;else return at.BYTE}return l?at.ALPHANUMERIC:s?at.NUMERIC:at.BYTE}static isOnlyDoubleByteKanji(e){let r;try{r=_e.encode(e,J.SJIS)}catch{return!1}const s=r.length;if(s%2!==0)return!1;for(let l=0;l<s;l+=2){const c=r[l]&255;if((c<129||c>159)&&(c<224||c>235))return!1}return!0}static chooseMaskPattern(e,r,s,l){let c=Number.MAX_SAFE_INTEGER,d=-1;for(let p=0;p<Di.NUM_MASK_PATTERNS;p++){pt.buildMatrix(e,r,s,p,l);let w=this.calculateMaskPenalty(l);w<c&&(c=w,d=p)}return d}static chooseVersion(e,r){for(let s=1;s<=40;s++){const l=it.getVersionForNumber(s);if(nn.willFit(e,l,r))return l}throw new Jt("Data too big")}static willFit(e,r,s){const l=r.getTotalCodewords(),d=r.getECBlocksForLevel(s).getTotalECCodewords(),p=l-d,w=(e+7)/8;return p>=w}static terminateBits(e,r){const s=e*8;if(r.getSize()>s)throw new Jt("data bits cannot fit in the QR Code"+r.getSize()+" > "+s);for(let d=0;d<4&&r.getSize()<s;++d)r.appendBit(!1);const l=r.getSize()&7;if(l>0)for(let d=l;d<8;d++)r.appendBit(!1);const c=e-r.getSizeInBytes();for(let d=0;d<c;++d)r.appendBits(d&1?17:236,8);if(r.getSize()!==s)throw new Jt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,r,s,l,c,d){if(l>=s)throw new Jt("Block ID too large");const p=e%s,w=s-p,E=Math.floor(e/s),R=E+1,P=Math.floor(r/s),D=P+1,W=E-P,Q=R-D;if(W!==Q)throw new Jt("EC bytes mismatch");if(s!==w+p)throw new Jt("RS blocks mismatch");if(e!==(P+W)*w+(D+Q)*p)throw new Jt("Total bytes mismatch");l<w?(c[0]=P,d[0]=W):(c[0]=D,d[0]=Q)}static interleaveWithECBytes(e,r,s,l){if(e.getSizeInBytes()!==s)throw new Jt("Number of bits and data bytes does not match");let c=0,d=0,p=0;const w=new Array;for(let R=0;R<l;++R){const P=new Int32Array(1),D=new Int32Array(1);nn.getNumDataBytesAndNumECBytesForBlockID(r,s,l,R,P,D);const W=P[0],Q=new Uint8Array(W);e.toBytes(8*c,Q,0,W);const ne=nn.generateECBytes(Q,D[0]);w.push(new Qc(Q,ne)),d=Math.max(d,W),p=Math.max(p,ne.length),c+=P[0]}if(s!==c)throw new Jt("Data bytes does not match offset");const E=new Y;for(let R=0;R<d;++R)for(const P of w){const D=P.getDataBytes();R<D.length&&E.appendBits(D[R],8)}for(let R=0;R<p;++R)for(const P of w){const D=P.getErrorCorrectionBytes();R<D.length&&E.appendBits(D[R],8)}if(r!==E.getSizeInBytes())throw new Jt("Interleaving error: "+r+" and "+E.getSizeInBytes()+" differ.");return E}static generateECBytes(e,r){const s=e.length,l=new Int32Array(s+r);for(let d=0;d<s;d++)l[d]=e[d]&255;new sa(me.QR_CODE_FIELD_256).encode(l,r);const c=new Uint8Array(r);for(let d=0;d<r;d++)c[d]=l[s+d];return c}static appendModeInfo(e,r){r.appendBits(e.getBits(),4)}static appendLengthInfo(e,r,s,l){const c=s.getCharacterCountBits(r);if(e>=1<<c)throw new Jt(e+" is bigger than "+((1<<c)-1));l.appendBits(e,c)}static appendBytes(e,r,s,l){switch(r){case at.NUMERIC:nn.appendNumericBytes(e,s);break;case at.ALPHANUMERIC:nn.appendAlphanumericBytes(e,s);break;case at.BYTE:nn.append8BitBytes(e,s,l);break;case at.KANJI:nn.appendKanjiBytes(e,s);break;default:throw new Jt("Invalid mode: "+r)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const r=nn.getDigit(e);return r>=0&&r<=9}static appendNumericBytes(e,r){const s=e.length;let l=0;for(;l<s;){const c=nn.getDigit(e.charAt(l));if(l+2<s){const d=nn.getDigit(e.charAt(l+1)),p=nn.getDigit(e.charAt(l+2));r.appendBits(c*100+d*10+p,10),l+=3}else if(l+1<s){const d=nn.getDigit(e.charAt(l+1));r.appendBits(c*10+d,7),l+=2}else r.appendBits(c,4),l++}}static appendAlphanumericBytes(e,r){const s=e.length;let l=0;for(;l<s;){const c=nn.getAlphanumericCode(e.charCodeAt(l));if(c===-1)throw new Jt;if(l+1<s){const d=nn.getAlphanumericCode(e.charCodeAt(l+1));if(d===-1)throw new Jt;r.appendBits(c*45+d,11),l+=2}else r.appendBits(c,6),l++}}static append8BitBytes(e,r,s){let l;try{l=_e.encode(e,s)}catch(c){throw new Jt(c)}for(let c=0,d=l.length;c!==d;c++){const p=l[c];r.appendBits(p,8)}}static appendKanjiBytes(e,r){let s;try{s=_e.encode(e,J.SJIS)}catch(c){throw new Jt(c)}const l=s.length;for(let c=0;c<l;c+=2){const d=s[c]&255,p=s[c+1]&255,w=d<<8&4294967295|p;let E=-1;if(w>=33088&&w<=40956?E=w-33088:w>=57408&&w<=60351&&(E=w-49472),E===-1)throw new Jt("Invalid byte sequence");const R=(E>>8)*192+(E&255);r.appendBits(R,13)}}static appendECI(e,r){r.appendBits(at.ECI.getBits(),4),r.appendBits(e.getValue(),8)}}nn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),nn.DEFAULT_BYTE_MODE_ENCODING=J.UTF8.getName();class Li{write(e,r,s,l=null){if(e.length===0)throw new T("Found empty contents");if(r<0||s<0)throw new T("Requested dimensions are too small: "+r+"x"+s);let c=Ft.L,d=Li.QUIET_ZONE_SIZE;l!==null&&(l.get(On.ERROR_CORRECTION)!==void 0&&(c=Ft.fromString(l.get(On.ERROR_CORRECTION).toString())),l.get(On.MARGIN)!==void 0&&(d=Number.parseInt(l.get(On.MARGIN).toString(),10)));const p=nn.encode(e,c,l);return this.renderResult(p,r,s,d)}writeToDom(e,r,s,l,c=null){typeof e=="string"&&(e=document.querySelector(e));const d=this.write(r,s,l,c);e&&e.appendChild(d)}renderResult(e,r,s,l){const c=e.getMatrix();if(c===null)throw new $e;const d=c.getWidth(),p=c.getHeight(),w=d+l*2,E=p+l*2,R=Math.max(r,w),P=Math.max(s,E),D=Math.min(Math.floor(R/w),Math.floor(P/E)),W=Math.floor((R-d*D)/2),Q=Math.floor((P-p*D)/2),ne=this.createSVGElement(R,P);for(let se=0,fe=Q;se<p;se++,fe+=D)for(let Be=0,Ue=W;Be<d;Be++,Ue+=D)if(c.get(Be,se)===1){const Pe=this.createSvgRectElement(Ue,fe,D,D);ne.appendChild(Pe)}return ne}createSVGElement(e,r){const s=document.createElementNS(Li.SVG_NS,"svg");return s.setAttributeNS(null,"height",e.toString()),s.setAttributeNS(null,"width",r.toString()),s}createSvgRectElement(e,r,s,l){const c=document.createElementNS(Li.SVG_NS,"rect");return c.setAttributeNS(null,"x",e.toString()),c.setAttributeNS(null,"y",r.toString()),c.setAttributeNS(null,"height",s.toString()),c.setAttributeNS(null,"width",l.toString()),c.setAttributeNS(null,"fill","#000000"),c}}Li.QUIET_ZONE_SIZE=4,Li.SVG_NS="http://www.w3.org/2000/svg";class ss{encode(e,r,s,l,c){if(e.length===0)throw new T("Found empty contents");if(r!==q.QR_CODE)throw new T("Can only encode QR_CODE, but got "+r);if(s<0||l<0)throw new T(`Requested dimensions are too small: ${s}x${l}`);let d=Ft.L,p=ss.QUIET_ZONE_SIZE;c!==null&&(c.get(On.ERROR_CORRECTION)!==void 0&&(d=Ft.fromString(c.get(On.ERROR_CORRECTION).toString())),c.get(On.MARGIN)!==void 0&&(p=Number.parseInt(c.get(On.MARGIN).toString(),10)));const w=nn.encode(e,d,c);return ss.renderResult(w,s,l,p)}static renderResult(e,r,s,l){const c=e.getMatrix();if(c===null)throw new $e;const d=c.getWidth(),p=c.getHeight(),w=d+l*2,E=p+l*2,R=Math.max(r,w),P=Math.max(s,E),D=Math.min(Math.floor(R/w),Math.floor(P/E)),W=Math.floor((R-d*D)/2),Q=Math.floor((P-p*D)/2),ne=new Ee(R,P);for(let se=0,fe=Q;se<p;se++,fe+=D)for(let Be=0,Ue=W;Be<d;Be++,Ue+=D)c.get(Be,se)===1&&ne.setRegion(Ue,fe,D,D);return ne}}ss.QUIET_ZONE_SIZE=4;class Jc{encode(e,r,s,l,c){let d;switch(r){case q.QR_CODE:d=new ss;break;default:throw new T("No encoder available for format "+r)}return d.encode(e,r,s,l,c)}}class Zr extends ge{constructor(e,r,s,l,c,d,p,w){if(super(d,p),this.yuvData=e,this.dataWidth=r,this.dataHeight=s,this.left=l,this.top=c,l+d>r||c+p>s)throw new T("Crop rectangle does not fit within image data.");w&&this.reverseHorizontal(d,p)}getRow(e,r){if(e<0||e>=this.getHeight())throw new T("Requested row is outside the image: "+e);const s=this.getWidth();(r==null||r.length<s)&&(r=new Uint8ClampedArray(s));const l=(e+this.top)*this.dataWidth+this.left;return F.arraycopy(this.yuvData,l,r,0,s),r}getMatrix(){const e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.yuvData;const s=e*r,l=new Uint8ClampedArray(s);let c=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return F.arraycopy(this.yuvData,c,l,0,s),l;for(let d=0;d<r;d++){const p=d*e;F.arraycopy(this.yuvData,c,l,p,e),c+=this.dataWidth}return l}isCropSupported(){return!0}crop(e,r,s,l){return new Zr(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+r,s,l,!1)}renderThumbnail(){const e=this.getWidth()/Zr.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/Zr.THUMBNAIL_SCALE_FACTOR,s=new Int32Array(e*r),l=this.yuvData;let c=this.top*this.dataWidth+this.left;for(let d=0;d<r;d++){const p=d*e;for(let w=0;w<e;w++){const E=l[c+w*Zr.THUMBNAIL_SCALE_FACTOR]&255;s[p+w]=4278190080|E*65793}c+=this.dataWidth*Zr.THUMBNAIL_SCALE_FACTOR}return s}getThumbnailWidth(){return this.getWidth()/Zr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Zr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,r){const s=this.yuvData;for(let l=0,c=this.top*this.dataWidth+this.left;l<r;l++,c+=this.dataWidth){const d=c+e/2;for(let p=c,w=c+e-1;p<d;p++,w--){const E=s[p];s[p]=s[w],s[w]=E}}}invert(){return new De(this)}}Zr.THUMBNAIL_SCALE_FACTOR=2;class Bs extends ge{constructor(e,r,s,l,c,d,p){if(super(r,s),this.dataWidth=l,this.dataHeight=c,this.left=d,this.top=p,e.BYTES_PER_ELEMENT===4){const w=r*s,E=new Uint8ClampedArray(w);for(let R=0;R<w;R++){const P=e[R],D=P>>16&255,W=P>>7&510,Q=P&255;E[R]=(D+W+Q)/4&255}this.luminances=E}else this.luminances=e;if(l===void 0&&(this.dataWidth=r),c===void 0&&(this.dataHeight=s),d===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+r>this.dataWidth||this.top+s>this.dataHeight)throw new T("Crop rectangle does not fit within image data.")}getRow(e,r){if(e<0||e>=this.getHeight())throw new T("Requested row is outside the image: "+e);const s=this.getWidth();(r==null||r.length<s)&&(r=new Uint8ClampedArray(s));const l=(e+this.top)*this.dataWidth+this.left;return F.arraycopy(this.luminances,l,r,0,s),r}getMatrix(){const e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.luminances;const s=e*r,l=new Uint8ClampedArray(s);let c=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return F.arraycopy(this.luminances,c,l,0,s),l;for(let d=0;d<r;d++){const p=d*e;F.arraycopy(this.luminances,c,l,p,e),c+=this.dataWidth}return l}isCropSupported(){return!0}crop(e,r,s,l){return new Bs(this.luminances,s,l,this.dataWidth,this.dataHeight,this.left+e,this.top+r)}invert(){return new De(this)}}class hl extends J{static forName(e){return this.getCharacterSetECIByName(e)}}class oa{}oa.ISO_8859_1=J.ISO8859_1;class ml{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class aa{static singletonList(e){return[e]}static min(e,r){return e.sort(r)[0]}}class eu{constructor(e){this.previous=e}getPrevious(){return this.previous}}class os extends eu{constructor(e,r,s){super(e),this.value=r,this.bitCount=s}appendTo(e,r){e.appendBits(this.value,this.bitCount)}add(e,r){return new os(this,e,r)}addBinaryShift(e,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new os(this,e,r)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+B.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class la extends os{constructor(e,r,s){super(e,0,0),this.binaryShiftStart=r,this.binaryShiftByteCount=s}appendTo(e,r){for(let s=0;s<this.binaryShiftByteCount;s++)(s===0||s===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):s===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(r[this.binaryShiftStart+s],8)}addBinaryShift(e,r){return new la(this,e,r)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function tu(k,e,r){return new la(k,e,r)}function Fs(k,e,r){return new os(k,e,r)}const nu=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ci=0,as=1,ir=2,pl=3,zr=4,gl=new os(null,0,0),vo=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function xl(k){for(let e of k)V.fill(e,-1);return k[Ci][zr]=0,k[as][zr]=0,k[as][Ci]=28,k[pl][zr]=0,k[ir][zr]=0,k[ir][Ci]=15,k}const ca=xl(V.createInt32Array(6,6));class ur{constructor(e,r,s,l){this.token=e,this.mode=r,this.binaryShiftByteCount=s,this.bitCount=l}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,r){let s=this.bitCount,l=this.token;if(e!==this.mode){let d=vo[this.mode][e];l=Fs(l,d&65535,d>>16),s+=d>>16}let c=e===ir?4:5;return l=Fs(l,r,c),new ur(l,e,0,s+c)}shiftAndAppend(e,r){let s=this.token,l=this.mode===ir?4:5;return s=Fs(s,ca[this.mode][e],l),s=Fs(s,r,5),new ur(s,this.mode,0,this.bitCount+l+5)}addBinaryShiftChar(e){let r=this.token,s=this.mode,l=this.bitCount;if(this.mode===zr||this.mode===ir){let p=vo[s][Ci];r=Fs(r,p&65535,p>>16),l+=p>>16,s=Ci}let c=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new ur(r,s,this.binaryShiftByteCount+1,l+c);return d.binaryShiftByteCount===2078&&(d=d.endBinaryShift(e+1)),d}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let r=this.token;return r=tu(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new ur(r,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let r=this.bitCount+(vo[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=ur.calculateBinaryShiftCost(e)-ur.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount}toBitArray(e){let r=[];for(let l=this.endBinaryShift(e.length).token;l!==null;l=l.getPrevious())r.unshift(l);let s=new Y;for(const l of r)l.appendTo(s,e);return s}toString(){return Ne.format("%s bits=%d bytes=%d",nu[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}ur.INITIAL_STATE=new ur(gl,Ci,0,0);function ru(k){const e=Ne.getCharCode(" "),r=Ne.getCharCode("."),s=Ne.getCharCode(",");k[Ci][e]=1;const l=Ne.getCharCode("Z"),c=Ne.getCharCode("A");for(let D=c;D<=l;D++)k[Ci][D]=D-c+2;k[as][e]=1;const d=Ne.getCharCode("z"),p=Ne.getCharCode("a");for(let D=p;D<=d;D++)k[as][D]=D-p+2;k[ir][e]=1;const w=Ne.getCharCode("9"),E=Ne.getCharCode("0");for(let D=E;D<=w;D++)k[ir][D]=D-E+2;k[ir][s]=12,k[ir][r]=13;const R=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let D=0;D<R.length;D++)k[pl][Ne.getCharCode(R[D])]=D;const P=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let D=0;D<P.length;D++)Ne.getCharCode(P[D])>0&&(k[zr][Ne.getCharCode(P[D])]=D);return k}const ua=ru(V.createInt32Array(5,256));class Vs{constructor(e){this.text=e}encode(){const e=Ne.getCharCode(" "),r=Ne.getCharCode(`
`);let s=aa.singletonList(ur.INITIAL_STATE);for(let c=0;c<this.text.length;c++){let d,p=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case Ne.getCharCode("\r"):d=p===r?2:0;break;case Ne.getCharCode("."):d=p===e?3:0;break;case Ne.getCharCode(","):d=p===e?4:0;break;case Ne.getCharCode(":"):d=p===e?5:0;break;default:d=0}d>0?(s=Vs.updateStateListForPair(s,c,d),c++):s=this.updateStateListForChar(s,c)}return aa.min(s,(c,d)=>c.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,r){const s=[];for(let l of e)this.updateStateForChar(l,r,s);return Vs.simplifyStates(s)}updateStateForChar(e,r,s){let l=this.text[r]&255,c=ua[e.getMode()][l]>0,d=null;for(let p=0;p<=zr;p++){let w=ua[p][l];if(w>0){if(d==null&&(d=e.endBinaryShift(r)),!c||p===e.getMode()||p===ir){const E=d.latchAndAppend(p,w);s.push(E)}if(!c&&ca[e.getMode()][p]>=0){const E=d.shiftAndAppend(p,w);s.push(E)}}}if(e.getBinaryShiftByteCount()>0||ua[e.getMode()][l]===0){let p=e.addBinaryShiftChar(r);s.push(p)}}static updateStateListForPair(e,r,s){const l=[];for(let c of e)this.updateStateForPair(c,r,s,l);return this.simplifyStates(l)}static updateStateForPair(e,r,s,l){let c=e.endBinaryShift(r);if(l.push(c.latchAndAppend(zr,s)),e.getMode()!==zr&&l.push(c.shiftAndAppend(zr,s)),s===3||s===4){let d=c.latchAndAppend(ir,16-s).latchAndAppend(ir,1);l.push(d)}if(e.getBinaryShiftByteCount()>0){let d=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);l.push(d)}}static simplifyStates(e){let r=[];for(const s of e){let l=!0;for(const c of r){if(c.isBetterThanOrEqualTo(s)){l=!1;break}s.isBetterThanOrEqualTo(c)&&(r=r.filter(d=>d!==c))}l&&r.push(s)}return r}}class jt{constructor(){}static encodeBytes(e){return jt.encode(e,jt.DEFAULT_EC_PERCENT,jt.DEFAULT_AZTEC_LAYERS)}static encode(e,r,s){let l=new Vs(e).encode(),c=B.truncDivision(l.getSize()*r,100)+11,d=l.getSize()+c,p,w,E,R,P;if(s!==jt.DEFAULT_AZTEC_LAYERS){if(p=s<0,w=Math.abs(s),w>(p?jt.MAX_NB_BITS_COMPACT:jt.MAX_NB_BITS))throw new T(Ne.format("Illegal value %s for layers",s));E=jt.totalBitsInLayer(w,p),R=jt.WORD_SIZE[w];let Pe=E-E%R;if(P=jt.stuffBits(l,R),P.getSize()+c>Pe)throw new T("Data to large for user specified layer");if(p&&P.getSize()>R*64)throw new T("Data to large for user specified layer")}else{R=0,P=null;for(let Pe=0;;Pe++){if(Pe>jt.MAX_NB_BITS)throw new T("Data too large for an Aztec code");if(p=Pe<=3,w=p?Pe+1:Pe,E=jt.totalBitsInLayer(w,p),d>E)continue;(P==null||R!==jt.WORD_SIZE[w])&&(R=jt.WORD_SIZE[w],P=jt.stuffBits(l,R));let Ot=E-E%R;if(!(p&&P.getSize()>R*64)&&P.getSize()+c<=Ot)break}}let D=jt.generateCheckWords(P,E,R),W=P.getSize()/R,Q=jt.generateModeMessage(p,w,W),ne=(p?11:14)+w*4,se=new Int32Array(ne),fe;if(p){fe=ne;for(let Pe=0;Pe<se.length;Pe++)se[Pe]=Pe}else{fe=ne+1+2*B.truncDivision(B.truncDivision(ne,2)-1,15);let Pe=B.truncDivision(ne,2),Ot=B.truncDivision(fe,2);for(let Nt=0;Nt<Pe;Nt++){let yr=Nt+B.truncDivision(Nt,15);se[Pe-Nt-1]=Ot-yr-1,se[Pe+Nt]=Ot+yr+1}}let Be=new Ee(fe);for(let Pe=0,Ot=0;Pe<w;Pe++){let Nt=(w-Pe)*4+(p?9:12);for(let yr=0;yr<Nt;yr++){let Wr=yr*2;for(let Dn=0;Dn<2;Dn++)D.get(Ot+Wr+Dn)&&Be.set(se[Pe*2+Dn],se[Pe*2+yr]),D.get(Ot+Nt*2+Wr+Dn)&&Be.set(se[Pe*2+yr],se[ne-1-Pe*2-Dn]),D.get(Ot+Nt*4+Wr+Dn)&&Be.set(se[ne-1-Pe*2-Dn],se[ne-1-Pe*2-yr]),D.get(Ot+Nt*6+Wr+Dn)&&Be.set(se[ne-1-Pe*2-yr],se[Pe*2+Dn])}Ot+=Nt*8}if(jt.drawModeMessage(Be,p,fe,Q),p)jt.drawBullsEye(Be,B.truncDivision(fe,2),5);else{jt.drawBullsEye(Be,B.truncDivision(fe,2),7);for(let Pe=0,Ot=0;Pe<B.truncDivision(ne,2)-1;Pe+=15,Ot+=16)for(let Nt=B.truncDivision(fe,2)&1;Nt<fe;Nt+=2)Be.set(B.truncDivision(fe,2)-Ot,Nt),Be.set(B.truncDivision(fe,2)+Ot,Nt),Be.set(Nt,B.truncDivision(fe,2)-Ot),Be.set(Nt,B.truncDivision(fe,2)+Ot)}let Ue=new ml;return Ue.setCompact(p),Ue.setSize(fe),Ue.setLayers(w),Ue.setCodeWords(W),Ue.setMatrix(Be),Ue}static drawBullsEye(e,r,s){for(let l=0;l<s;l+=2)for(let c=r-l;c<=r+l;c++)e.set(c,r-l),e.set(c,r+l),e.set(r-l,c),e.set(r+l,c);e.set(r-s,r-s),e.set(r-s+1,r-s),e.set(r-s,r-s+1),e.set(r+s,r-s),e.set(r+s,r-s+1),e.set(r+s,r+s-1)}static generateModeMessage(e,r,s){let l=new Y;return e?(l.appendBits(r-1,2),l.appendBits(s-1,6),l=jt.generateCheckWords(l,28,4)):(l.appendBits(r-1,5),l.appendBits(s-1,11),l=jt.generateCheckWords(l,40,4)),l}static drawModeMessage(e,r,s,l){let c=B.truncDivision(s,2);if(r)for(let d=0;d<7;d++){let p=c-3+d;l.get(d)&&e.set(p,c-5),l.get(d+7)&&e.set(c+5,p),l.get(20-d)&&e.set(p,c+5),l.get(27-d)&&e.set(c-5,p)}else for(let d=0;d<10;d++){let p=c-5+d+B.truncDivision(d,5);l.get(d)&&e.set(p,c-7),l.get(d+10)&&e.set(c+7,p),l.get(29-d)&&e.set(p,c+7),l.get(39-d)&&e.set(c-7,p)}}static generateCheckWords(e,r,s){let l=e.getSize()/s,c=new sa(jt.getGF(s)),d=B.truncDivision(r,s),p=jt.bitsToWords(e,s,d);c.encode(p,d-l);let w=r%s,E=new Y;E.appendBits(0,w);for(const R of Array.from(p))E.appendBits(R,s);return E}static bitsToWords(e,r,s){let l=new Int32Array(s),c,d;for(c=0,d=e.getSize()/r;c<d;c++){let p=0;for(let w=0;w<r;w++)p|=e.get(c*r+w)?1<<r-w-1:0;l[c]=p}return l}static getGF(e){switch(e){case 4:return me.AZTEC_PARAM;case 6:return me.AZTEC_DATA_6;case 8:return me.AZTEC_DATA_8;case 10:return me.AZTEC_DATA_10;case 12:return me.AZTEC_DATA_12;default:throw new T("Unsupported word size "+e)}}static stuffBits(e,r){let s=new Y,l=e.getSize(),c=(1<<r)-2;for(let d=0;d<l;d+=r){let p=0;for(let w=0;w<r;w++)(d+w>=l||e.get(d+w))&&(p|=1<<r-1-w);(p&c)===c?(s.appendBits(p&c,r),d--):p&c?s.appendBits(p,r):(s.appendBits(p|1,r),d--)}return s}static totalBitsInLayer(e,r){return((r?88:112)+16*e)*e}}jt.DEFAULT_EC_PERCENT=33,jt.DEFAULT_AZTEC_LAYERS=0,jt.MAX_NB_BITS=32,jt.MAX_NB_BITS_COMPACT=4,jt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Us{encode(e,r,s,l){return this.encodeWithHints(e,r,s,l,null)}encodeWithHints(e,r,s,l,c){let d=oa.ISO_8859_1,p=jt.DEFAULT_EC_PERCENT,w=jt.DEFAULT_AZTEC_LAYERS;return c!=null&&(c.has(On.CHARACTER_SET)&&(d=hl.forName(c.get(On.CHARACTER_SET).toString())),c.has(On.ERROR_CORRECTION)&&(p=B.parseInt(c.get(On.ERROR_CORRECTION).toString())),c.has(On.AZTEC_LAYERS)&&(w=B.parseInt(c.get(On.AZTEC_LAYERS).toString()))),Us.encodeLayers(e,r,s,l,d,p,w)}static encodeLayers(e,r,s,l,c,d,p){if(r!==q.AZTEC)throw new T("Can only encode AZTEC, but got "+r);let w=jt.encode(Ne.getBytes(e,c),d,p);return Us.renderResult(w,s,l)}static renderResult(e,r,s){let l=e.getMatrix();if(l==null)throw new $e;let c=l.getWidth(),d=l.getHeight(),p=Math.max(r,c),w=Math.max(s,d),E=Math.min(p/c,w/d),R=(p-c*E)/2,P=(w-d*E)/2,D=new Ee(p,w);for(let W=0,Q=P;W<d;W++,Q+=E)for(let ne=0,se=R;ne<c;ne++,se+=E)l.get(ne,W)&&D.setRegion(se,Q,E,E);return D}}a.AbstractExpandedDecoder=es,a.ArgumentException=S,a.ArithmeticException=ce,a.AztecCode=ml,a.AztecCodeReader=Yt,a.AztecCodeWriter=Us,a.AztecDecoder=Ke,a.AztecDetector=en,a.AztecDetectorResult=Hn,a.AztecEncoder=jt,a.AztecHighLevelEncoder=Vs,a.AztecPoint=_t,a.BarcodeFormat=q,a.Binarizer=L,a.BinaryBitmap=_,a.BitArray=Y,a.BitMatrix=Ee,a.BitSource=ts,a.BrowserAztecCodeReader=ct,a.BrowserBarcodeReader=ho,a.BrowserCodeReader=we,a.BrowserDatamatrixCodeReader=ea,a.BrowserMultiFormatReader=js,a.BrowserPDF417Reader=yo,a.BrowserQRCodeReader=fl,a.BrowserQRCodeSvgWriter=Li,a.CharacterSetECI=J,a.ChecksumException=M,a.Code128Reader=ae,a.Code39Reader=ft,a.DataMatrixDecodedBitStreamParser=Nr,a.DataMatrixReader=xr,a.DecodeHintType=re,a.DecoderResult=Ae,a.DefaultGridSampler=ht,a.DetectorResult=mn,a.EAN13Reader=dn,a.EncodeHintType=On,a.Exception=C,a.FormatException=G,a.GenericGF=me,a.GenericGFPoly=Xe,a.GlobalHistogramBinarizer=Le,a.GridSampler=kt,a.GridSamplerInstance=et,a.HTMLCanvasElementLuminanceSource=Ce,a.HybridBinarizer=ve,a.ITFReader=ot,a.IllegalArgumentException=T,a.IllegalStateException=$e,a.InvertedLuminanceSource=De,a.LuminanceSource=ge,a.MathUtils=Qe,a.MultiFormatOneDReader=yi,a.MultiFormatReader=xo,a.MultiFormatWriter=Jc,a.NotFoundException=Z,a.OneDReader=Ie,a.PDF417DecodedBitStreamParser=he,a.PDF417DecoderErrorCorrection=Tr,a.PDF417Reader=qn,a.PDF417ResultMetadata=po,a.PerspectiveTransform=We,a.PlanarYUVLuminanceSource=Zr,a.QRCodeByteMatrix=wo,a.QRCodeDataMask=St,a.QRCodeDecodedBitStreamParser=Qt,a.QRCodeDecoderErrorCorrectionLevel=Ft,a.QRCodeDecoderFormatInformation=Pn,a.QRCodeEncoder=nn,a.QRCodeEncoderQRCode=Di,a.QRCodeMaskUtil=on,a.QRCodeMatrixUtil=pt,a.QRCodeMode=at,a.QRCodeReader=sn,a.QRCodeVersion=it,a.QRCodeWriter=ss,a.RGBLuminanceSource=Bs,a.RSS14Reader=Gt,a.RSSExpandedReader=Te,a.ReaderException=is,a.ReedSolomonDecoder=yt,a.ReedSolomonEncoder=sa,a.ReedSolomonException=Ye,a.Result=be,a.ResultMetadataType=xe,a.ResultPoint=ze,a.StringUtils=Ne,a.UnsupportedOperationException=ye,a.VideoInputDevice=K,a.WhiteRectangleDetector=Ve,a.WriterException=Jt,a.ZXingArrays=V,a.ZXingCharset=hl,a.ZXingInteger=B,a.ZXingStandardCharsets=oa,a.ZXingStringBuilder=Se,a.ZXingStringEncoding=_e,a.ZXingSystem=F,a.createAbstractExpandedDecoder=Rs,Object.defineProperty(a,"__esModule",{value:!0})})}(ja,ja.exports)),ja.exports}_w();var Mf=function(){var t=function(i,a){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,m){u.__proto__=m}||function(u,m){for(var x in m)Object.prototype.hasOwnProperty.call(m,x)&&(u[x]=m[x])},t(i,a)};return function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");t(i,a);function u(){this.constructor=i}i.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}}(),kp=function(){function t(i,a){this.name=i,this.track=a}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(i){var a={};a[this.name]=i;var u={advanced:[a]};return this.track.applyConstraints(u)},t.prototype.value=function(){var i=this.track.getSettings();if(this.name in i){var a=i[this.name];return a}return null},t}(),Rw=function(t){Mf(i,t);function i(a,u){return t.call(this,a,u)||this}return i.prototype.min=function(){return this.getCapabilities().min},i.prototype.max=function(){return this.getCapabilities().max},i.prototype.step=function(){return this.getCapabilities().step},i.prototype.apply=function(a){var u={};u[this.name]=a;var m={advanced:[u]};return this.track.applyConstraints(m)},i.prototype.getCapabilities=function(){this.failIfNotSupported();var a=this.track.getCapabilities(),u=a[this.name];return{min:u.min,max:u.max,step:u.step}},i.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},i}(kp);(function(t){Mf(i,t);function i(a){return t.call(this,"zoom",a)||this}return i})(Rw);(function(t){Mf(i,t);function i(a){return t.call(this,"torch",a)||this}return i})(kp);var L1;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(L1||(L1={}));var kw=function(){var t=function(i,a){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,m){u.__proto__=m}||function(u,m){for(var x in m)Object.prototype.hasOwnProperty.call(m,x)&&(u[x]=m[x])},t(i,a)};return function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");t(i,a);function u(){this.constructor=i}i.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}}();(function(t){kw(i,t);function i(){return t!==null&&t.apply(this,arguments)||this}return i.DEFAULT_WIDTH=300,i.DEFAULT_WIDTH_OFFSET=2,i.FILE_SCAN_MIN_HEIGHT=300,i.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,i.MIN_QR_BOX_SIZE=50,i.SHADED_LEFT=1,i.SHADED_RIGHT=2,i.SHADED_TOP=3,i.SHADED_BOTTOM=4,i.SHADED_REGION_ELEMENT_ID="qr-shaded-region",i.VERBOSE=!1,i.BORDER_SHADER_DEFAULT_COLOR="#ffffff",i.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",i})(Tw);var j1;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(j1||(j1={}));const Pw=({user:t,onProfileClick:i})=>null,Of=N.createContext({});function rl(t){const i=N.useRef(null);return i.current===null&&(i.current=t()),i.current}const Df=typeof window<"u",Lf=Df?N.useLayoutEffect:N.useEffect,Hc=N.createContext(null);function jf(t,i){t.indexOf(i)===-1&&t.push(i)}function Bf(t,i){const a=t.indexOf(i);a>-1&&t.splice(a,1)}const $i=(t,i,a)=>a>i?i:a<t?t:a;let Ff=()=>{};const Zi={},Pp=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Mp(t){return typeof t=="object"&&t!==null}const Op=t=>/^0[^.\s]+$/u.test(t);function Vf(t){let i;return()=>(i===void 0&&(i=t()),i)}const ii=t=>t,Mw=(t,i)=>a=>i(t(a)),il=(...t)=>t.reduce(Mw),$a=(t,i,a)=>{const u=i-t;return u===0?1:(a-t)/u};class Uf{constructor(){this.subscriptions=[]}add(i){return jf(this.subscriptions,i),()=>Bf(this.subscriptions,i)}notify(i,a,u){const m=this.subscriptions.length;if(m)if(m===1)this.subscriptions[0](i,a,u);else for(let x=0;x<m;x++){const y=this.subscriptions[x];y&&y(i,a,u)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ni=t=>t*1e3,Ti=t=>t/1e3;function Dp(t,i){return i?t*(1e3/i):0}const Lp=(t,i,a)=>(((1-3*a+3*i)*t+(3*a-6*i))*t+3*i)*t,Ow=1e-7,Dw=12;function Lw(t,i,a,u,m){let x,y,b=0;do y=i+(a-i)/2,x=Lp(y,u,m)-t,x>0?a=y:i=y;while(Math.abs(x)>Ow&&++b<Dw);return y}function sl(t,i,a,u){if(t===i&&a===u)return ii;const m=x=>Lw(x,0,1,t,a);return x=>x===0||x===1?x:Lp(m(x),i,u)}const jp=t=>i=>i<=.5?t(2*i)/2:(2-t(2*(1-i)))/2,Bp=t=>i=>1-t(1-i),Fp=sl(.33,1.53,.69,.99),zf=Bp(Fp),Vp=jp(zf),Up=t=>(t*=2)<1?.5*zf(t):.5*(2-Math.pow(2,-10*(t-1))),Wf=t=>1-Math.sin(Math.acos(t)),zp=Bp(Wf),Wp=jp(Wf),jw=sl(.42,0,1,1),Bw=sl(0,0,.58,1),Hp=sl(.42,0,.58,1),Fw=t=>Array.isArray(t)&&typeof t[0]!="number",Gp=t=>Array.isArray(t)&&typeof t[0]=="number",Vw={linear:ii,easeIn:jw,easeInOut:Hp,easeOut:Bw,circIn:Wf,circInOut:Wp,circOut:zp,backIn:zf,backInOut:Vp,backOut:Fp,anticipate:Up},Uw=t=>typeof t=="string",B1=t=>{if(Gp(t)){Ff(t.length===4);const[i,a,u,m]=t;return sl(i,a,u,m)}else if(Uw(t))return Vw[t];return t},fc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function zw(t,i){let a=new Set,u=new Set,m=!1,x=!1;const y=new WeakSet;let b={delta:0,timestamp:0,isProcessing:!1};function v(S){y.has(S)&&(C.schedule(S),t()),S(b)}const C={schedule:(S,T=!1,_=!1)=>{const L=_&&m?a:u;return T&&y.add(S),L.has(S)||L.add(S),S},cancel:S=>{u.delete(S),y.delete(S)},process:S=>{if(b=S,m){x=!0;return}m=!0,[a,u]=[u,a],a.forEach(v),a.clear(),m=!1,x&&(x=!1,C.process(S))}};return C}const Ww=40;function Xp(t,i){let a=!1,u=!0;const m={delta:0,timestamp:0,isProcessing:!1},x=()=>a=!0,y=fc.reduce((B,Y)=>(B[Y]=zw(x),B),{}),{setup:b,read:v,resolveKeyframes:C,preUpdate:S,update:T,preRender:_,render:M,postRender:L}=y,F=()=>{const B=Zi.useManualTiming?m.timestamp:performance.now();a=!1,Zi.useManualTiming||(m.delta=u?1e3/60:Math.max(Math.min(B-m.timestamp,Ww),1)),m.timestamp=B,m.isProcessing=!0,b.process(m),v.process(m),C.process(m),S.process(m),T.process(m),_.process(m),M.process(m),L.process(m),m.isProcessing=!1,a&&i&&(u=!1,t(F))},j=()=>{a=!0,u=!0,m.isProcessing||t(F)};return{schedule:fc.reduce((B,Y)=>{const $=y[Y];return B[Y]=(re,G=!1,te=!1)=>(a||j(),$.schedule(re,G,te)),B},{}),cancel:B=>{for(let Y=0;Y<fc.length;Y++)y[fc[Y]].cancel(B)},state:m,steps:y}}const{schedule:ln,cancel:Ki,state:pr,steps:_d}=Xp(typeof requestAnimationFrame<"u"?requestAnimationFrame:ii,!0);let Cc;function Hw(){Cc=void 0}const Fr={now:()=>(Cc===void 0&&Fr.set(pr.isProcessing||Zi.useManualTiming?pr.timestamp:performance.now()),Cc),set:t=>{Cc=t,queueMicrotask(Hw)}},Yp=t=>i=>typeof i=="string"&&i.startsWith(t),Hf=Yp("--"),Gw=Yp("var(--"),Gf=t=>Gw(t)?Xw.test(t.split("/*")[0].trim()):!1,Xw=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ko={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Za={...Ko,transform:t=>$i(0,1,t)},hc={...Ko,default:1},Fa=t=>Math.round(t*1e5)/1e5,Xf=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Yw(t){return t==null}const $w=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Yf=(t,i)=>a=>!!(typeof a=="string"&&$w.test(a)&&a.startsWith(t)||i&&!Yw(a)&&Object.prototype.hasOwnProperty.call(a,i)),$p=(t,i,a)=>u=>{if(typeof u!="string")return u;const[m,x,y,b]=u.match(Xf);return{[t]:parseFloat(m),[i]:parseFloat(x),[a]:parseFloat(y),alpha:b!==void 0?parseFloat(b):1}},Zw=t=>$i(0,255,t),Rd={...Ko,transform:t=>Math.round(Zw(t))},no={test:Yf("rgb","red"),parse:$p("red","green","blue"),transform:({red:t,green:i,blue:a,alpha:u=1})=>"rgba("+Rd.transform(t)+", "+Rd.transform(i)+", "+Rd.transform(a)+", "+Fa(Za.transform(u))+")"};function Kw(t){let i="",a="",u="",m="";return t.length>5?(i=t.substring(1,3),a=t.substring(3,5),u=t.substring(5,7),m=t.substring(7,9)):(i=t.substring(1,2),a=t.substring(2,3),u=t.substring(3,4),m=t.substring(4,5),i+=i,a+=a,u+=u,m+=m),{red:parseInt(i,16),green:parseInt(a,16),blue:parseInt(u,16),alpha:m?parseInt(m,16)/255:1}}const qd={test:Yf("#"),parse:Kw,transform:no.transform},ol=t=>({test:i=>typeof i=="string"&&i.endsWith(t)&&i.split(" ").length===1,parse:parseFloat,transform:i=>`${i}${t}`}),Es=ol("deg"),Ii=ol("%"),bt=ol("px"),qw=ol("vh"),Qw=ol("vw"),F1={...Ii,parse:t=>Ii.parse(t)/100,transform:t=>Ii.transform(t*100)},Bo={test:Yf("hsl","hue"),parse:$p("hue","saturation","lightness"),transform:({hue:t,saturation:i,lightness:a,alpha:u=1})=>"hsla("+Math.round(t)+", "+Ii.transform(Fa(i))+", "+Ii.transform(Fa(a))+", "+Fa(Za.transform(u))+")"},zn={test:t=>no.test(t)||qd.test(t)||Bo.test(t),parse:t=>no.test(t)?no.parse(t):Bo.test(t)?Bo.parse(t):qd.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?no.transform(t):Bo.transform(t),getAnimatableNone:t=>{const i=zn.parse(t);return i.alpha=0,zn.transform(i)}},Jw=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function ev(t){var i,a;return isNaN(t)&&typeof t=="string"&&(((i=t.match(Xf))==null?void 0:i.length)||0)+(((a=t.match(Jw))==null?void 0:a.length)||0)>0}const Zp="number",Kp="color",tv="var",nv="var(",V1="${}",rv=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ka(t){const i=t.toString(),a=[],u={color:[],number:[],var:[]},m=[];let x=0;const b=i.replace(rv,v=>(zn.test(v)?(u.color.push(x),m.push(Kp),a.push(zn.parse(v))):v.startsWith(nv)?(u.var.push(x),m.push(tv),a.push(v)):(u.number.push(x),m.push(Zp),a.push(parseFloat(v))),++x,V1)).split(V1);return{values:a,split:b,indexes:u,types:m}}function qp(t){return Ka(t).values}function Qp(t){const{split:i,types:a}=Ka(t),u=i.length;return m=>{let x="";for(let y=0;y<u;y++)if(x+=i[y],m[y]!==void 0){const b=a[y];b===Zp?x+=Fa(m[y]):b===Kp?x+=zn.transform(m[y]):x+=m[y]}return x}}const iv=t=>typeof t=="number"?0:zn.test(t)?zn.getAnimatableNone(t):t;function sv(t){const i=qp(t);return Qp(t)(i.map(iv))}const Ns={test:ev,parse:qp,createTransformer:Qp,getAnimatableNone:sv};function kd(t,i,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?t+(i-t)*6*a:a<1/2?i:a<2/3?t+(i-t)*(2/3-a)*6:t}function ov({hue:t,saturation:i,lightness:a,alpha:u}){t/=360,i/=100,a/=100;let m=0,x=0,y=0;if(!i)m=x=y=a;else{const b=a<.5?a*(1+i):a+i-a*i,v=2*a-b;m=kd(v,b,t+1/3),x=kd(v,b,t),y=kd(v,b,t-1/3)}return{red:Math.round(m*255),green:Math.round(x*255),blue:Math.round(y*255),alpha:u}}function _c(t,i){return a=>a>0?i:t}const Sn=(t,i,a)=>t+(i-t)*a,Pd=(t,i,a)=>{const u=t*t,m=a*(i*i-u)+u;return m<0?0:Math.sqrt(m)},av=[qd,no,Bo],lv=t=>av.find(i=>i.test(t));function U1(t){const i=lv(t);if(!i)return!1;let a=i.parse(t);return i===Bo&&(a=ov(a)),a}const z1=(t,i)=>{const a=U1(t),u=U1(i);if(!a||!u)return _c(t,i);const m={...a};return x=>(m.red=Pd(a.red,u.red,x),m.green=Pd(a.green,u.green,x),m.blue=Pd(a.blue,u.blue,x),m.alpha=Sn(a.alpha,u.alpha,x),no.transform(m))},Qd=new Set(["none","hidden"]);function cv(t,i){return Qd.has(t)?a=>a<=0?t:i:a=>a>=1?i:t}function uv(t,i){return a=>Sn(t,i,a)}function $f(t){return typeof t=="number"?uv:typeof t=="string"?Gf(t)?_c:zn.test(t)?z1:hv:Array.isArray(t)?Jp:typeof t=="object"?zn.test(t)?z1:dv:_c}function Jp(t,i){const a=[...t],u=a.length,m=t.map((x,y)=>$f(x)(x,i[y]));return x=>{for(let y=0;y<u;y++)a[y]=m[y](x);return a}}function dv(t,i){const a={...t,...i},u={};for(const m in a)t[m]!==void 0&&i[m]!==void 0&&(u[m]=$f(t[m])(t[m],i[m]));return m=>{for(const x in u)a[x]=u[x](m);return a}}function fv(t,i){const a=[],u={color:0,var:0,number:0};for(let m=0;m<i.values.length;m++){const x=i.types[m],y=t.indexes[x][u[x]],b=t.values[y]??0;a[m]=b,u[x]++}return a}const hv=(t,i)=>{const a=Ns.createTransformer(i),u=Ka(t),m=Ka(i);return u.indexes.var.length===m.indexes.var.length&&u.indexes.color.length===m.indexes.color.length&&u.indexes.number.length>=m.indexes.number.length?Qd.has(t)&&!m.values.length||Qd.has(i)&&!u.values.length?cv(t,i):il(Jp(fv(u,m),m.values),a):_c(t,i)};function eg(t,i,a){return typeof t=="number"&&typeof i=="number"&&typeof a=="number"?Sn(t,i,a):$f(t)(t,i)}const mv=t=>{const i=({timestamp:a})=>t(a);return{start:(a=!0)=>ln.update(i,a),stop:()=>Ki(i),now:()=>pr.isProcessing?pr.timestamp:Fr.now()}},tg=(t,i,a=10)=>{let u="";const m=Math.max(Math.round(i/a),2);for(let x=0;x<m;x++)u+=Math.round(t(x/(m-1))*1e4)/1e4+", ";return`linear(${u.substring(0,u.length-2)})`},Rc=2e4;function Zf(t){let i=0;const a=50;let u=t.next(i);for(;!u.done&&i<Rc;)i+=a,u=t.next(i);return i>=Rc?1/0:i}function pv(t,i=100,a){const u=a({...t,keyframes:[0,i]}),m=Math.min(Zf(u),Rc);return{type:"keyframes",ease:x=>u.next(m*x).value/i,duration:Ti(m)}}const gv=5;function ng(t,i,a){const u=Math.max(i-gv,0);return Dp(a-t(u),i-u)}const Rn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},W1=.001;function xv({duration:t=Rn.duration,bounce:i=Rn.bounce,velocity:a=Rn.velocity,mass:u=Rn.mass}){let m,x,y=1-i;y=$i(Rn.minDamping,Rn.maxDamping,y),t=$i(Rn.minDuration,Rn.maxDuration,Ti(t)),y<1?(m=C=>{const S=C*y,T=S*t,_=S-a,M=Jd(C,y),L=Math.exp(-T);return W1-_/M*L},x=C=>{const T=C*y*t,_=T*a+a,M=Math.pow(y,2)*Math.pow(C,2)*t,L=Math.exp(-T),F=Jd(Math.pow(C,2),y);return(-m(C)+W1>0?-1:1)*((_-M)*L)/F}):(m=C=>{const S=Math.exp(-C*t),T=(C-a)*t+1;return-.001+S*T},x=C=>{const S=Math.exp(-C*t),T=(a-C)*(t*t);return S*T});const b=5/t,v=wv(m,x,b);if(t=Ni(t),isNaN(v))return{stiffness:Rn.stiffness,damping:Rn.damping,duration:t};{const C=Math.pow(v,2)*u;return{stiffness:C,damping:y*2*Math.sqrt(u*C),duration:t}}}const yv=12;function wv(t,i,a){let u=a;for(let m=1;m<yv;m++)u=u-t(u)/i(u);return u}function Jd(t,i){return t*Math.sqrt(1-i*i)}const vv=["duration","bounce"],Cv=["stiffness","damping","mass"];function H1(t,i){return i.some(a=>t[a]!==void 0)}function bv(t){let i={velocity:Rn.velocity,stiffness:Rn.stiffness,damping:Rn.damping,mass:Rn.mass,isResolvedFromDuration:!1,...t};if(!H1(t,Cv)&&H1(t,vv))if(t.visualDuration){const a=t.visualDuration,u=2*Math.PI/(a*1.2),m=u*u,x=2*$i(.05,1,1-(t.bounce||0))*Math.sqrt(m);i={...i,mass:Rn.mass,stiffness:m,damping:x}}else{const a=xv(t);i={...i,...a,mass:Rn.mass},i.isResolvedFromDuration=!0}return i}function kc(t=Rn.visualDuration,i=Rn.bounce){const a=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:i}:t;let{restSpeed:u,restDelta:m}=a;const x=a.keyframes[0],y=a.keyframes[a.keyframes.length-1],b={done:!1,value:x},{stiffness:v,damping:C,mass:S,duration:T,velocity:_,isResolvedFromDuration:M}=bv({...a,velocity:-Ti(a.velocity||0)}),L=_||0,F=C/(2*Math.sqrt(v*S)),j=y-x,z=Ti(Math.sqrt(v/S)),V=Math.abs(j)<5;u||(u=V?Rn.restSpeed.granular:Rn.restSpeed.default),m||(m=V?Rn.restDelta.granular:Rn.restDelta.default);let B;if(F<1){const $=Jd(z,F);B=re=>{const G=Math.exp(-F*z*re);return y-G*((L+F*z*j)/$*Math.sin($*re)+j*Math.cos($*re))}}else if(F===1)B=$=>y-Math.exp(-z*$)*(j+(L+z*j)*$);else{const $=z*Math.sqrt(F*F-1);B=re=>{const G=Math.exp(-F*z*re),te=Math.min($*re,300);return y-G*((L+F*z*j)*Math.sinh(te)+$*j*Math.cosh(te))/$}}const Y={calculatedDuration:M&&T||null,next:$=>{const re=B($);if(M)b.done=$>=T;else{let G=$===0?L:0;F<1&&(G=$===0?Ni(L):ng(B,$,re));const te=Math.abs(G)<=u,J=Math.abs(y-re)<=m;b.done=te&&J}return b.value=b.done?y:re,b},toString:()=>{const $=Math.min(Zf(Y),Rc),re=tg(G=>Y.next($*G).value,$,30);return $+"ms "+re},toTransition:()=>{}};return Y}kc.applyToOptions=t=>{const i=pv(t,100,kc);return t.ease=i.ease,t.duration=Ni(i.duration),t.type="keyframes",t};function ef({keyframes:t,velocity:i=0,power:a=.8,timeConstant:u=325,bounceDamping:m=10,bounceStiffness:x=500,modifyTarget:y,min:b,max:v,restDelta:C=.5,restSpeed:S}){const T=t[0],_={done:!1,value:T},M=te=>b!==void 0&&te<b||v!==void 0&&te>v,L=te=>b===void 0?v:v===void 0||Math.abs(b-te)<Math.abs(v-te)?b:v;let F=a*i;const j=T+F,z=y===void 0?j:y(j);z!==j&&(F=z-T);const V=te=>-F*Math.exp(-te/u),B=te=>z+V(te),Y=te=>{const J=V(te),ye=B(te);_.done=Math.abs(J)<=C,_.value=_.done?z:ye};let $,re;const G=te=>{M(_.value)&&($=te,re=kc({keyframes:[_.value,L(_.value)],velocity:ng(B,te,_.value),damping:m,stiffness:x,restDelta:C,restSpeed:S}))};return G(0),{calculatedDuration:null,next:te=>{let J=!1;return!re&&$===void 0&&(J=!0,Y(te),G(te)),$!==void 0&&te>=$?re.next(te-$):(!J&&Y(te),_)}}}function Ev(t,i,a){const u=[],m=a||Zi.mix||eg,x=t.length-1;for(let y=0;y<x;y++){let b=m(t[y],t[y+1]);if(i){const v=Array.isArray(i)?i[y]||ii:i;b=il(v,b)}u.push(b)}return u}function rg(t,i,{clamp:a=!0,ease:u,mixer:m}={}){const x=t.length;if(Ff(x===i.length),x===1)return()=>i[0];if(x===2&&i[0]===i[1])return()=>i[1];const y=t[0]===t[1];t[0]>t[x-1]&&(t=[...t].reverse(),i=[...i].reverse());const b=Ev(i,u,m),v=b.length,C=S=>{if(y&&S<t[0])return i[0];let T=0;if(v>1)for(;T<t.length-2&&!(S<t[T+1]);T++);const _=$a(t[T],t[T+1],S);return b[T](_)};return a?S=>C($i(t[0],t[x-1],S)):C}function Sv(t,i){const a=t[t.length-1];for(let u=1;u<=i;u++){const m=$a(0,i,u);t.push(Sn(a,1,m))}}function Av(t){const i=[0];return Sv(i,t.length-1),i}function Nv(t,i){return t.map(a=>a*i)}function Tv(t,i){return t.map(()=>i||Hp).splice(0,t.length-1)}function Va({duration:t=300,keyframes:i,times:a,ease:u="easeInOut"}){const m=Fw(u)?u.map(B1):B1(u),x={done:!1,value:i[0]},y=Nv(a&&a.length===i.length?a:Av(i),t),b=rg(y,i,{ease:Array.isArray(m)?m:Tv(i,m)});return{calculatedDuration:t,next:v=>(x.value=b(v),x.done=v>=t,x)}}const Iv=t=>t!==null;function Kf(t,{repeat:i,repeatType:a="loop"},u,m=1){const x=t.filter(Iv),b=m<0||i&&a!=="loop"&&i%2===1?0:x.length-1;return!b||u===void 0?x[b]:u}const _v={decay:ef,inertia:ef,tween:Va,keyframes:Va,spring:kc};function ig(t){typeof t.type=="string"&&(t.type=_v[t.type])}class qf{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(i=>{this.resolve=i})}notifyFinished(){this.resolve()}then(i,a){return this.finished.then(i,a)}}const Rv=t=>t/100;class Gc extends qf{constructor(i){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var u,m;const{motionValue:a}=this.options;a&&a.updatedAt!==Fr.now()&&this.tick(Fr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(m=(u=this.options).onStop)==null||m.call(u))},this.options=i,this.initAnimation(),this.play(),i.autoplay===!1&&this.pause()}initAnimation(){const{options:i}=this;ig(i);const{type:a=Va,repeat:u=0,repeatDelay:m=0,repeatType:x,velocity:y=0}=i;let{keyframes:b}=i;const v=a||Va;v!==Va&&typeof b[0]!="number"&&(this.mixKeyframes=il(Rv,eg(b[0],b[1])),b=[0,100]);const C=v({...i,keyframes:b});x==="mirror"&&(this.mirroredGenerator=v({...i,keyframes:[...b].reverse(),velocity:-y})),C.calculatedDuration===null&&(C.calculatedDuration=Zf(C));const{calculatedDuration:S}=C;this.calculatedDuration=S,this.resolvedDuration=S+m,this.totalDuration=this.resolvedDuration*(u+1)-m,this.generator=C}updateTime(i){const a=Math.round(i-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=a}tick(i,a=!1){const{generator:u,totalDuration:m,mixKeyframes:x,mirroredGenerator:y,resolvedDuration:b,calculatedDuration:v}=this;if(this.startTime===null)return u.next(0);const{delay:C=0,keyframes:S,repeat:T,repeatType:_,repeatDelay:M,type:L,onUpdate:F,finalKeyframe:j}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,i):this.speed<0&&(this.startTime=Math.min(i-m/this.speed,this.startTime)),a?this.currentTime=i:this.updateTime(i);const z=this.currentTime-C*(this.playbackSpeed>=0?1:-1),V=this.playbackSpeed>=0?z<0:z>m;this.currentTime=Math.max(z,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=m);let B=this.currentTime,Y=u;if(T){const te=Math.min(this.currentTime,m)/b;let J=Math.floor(te),ye=te%1;!ye&&te>=1&&(ye=1),ye===1&&J--,J=Math.min(J,T+1),!!(J%2)&&(_==="reverse"?(ye=1-ye,M&&(ye-=M/b)):_==="mirror"&&(Y=y)),B=$i(0,1,ye)*b}const $=V?{done:!1,value:S[0]}:Y.next(B);x&&($.value=x($.value));let{done:re}=$;!V&&v!==null&&(re=this.playbackSpeed>=0?this.currentTime>=m:this.currentTime<=0);const G=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&re);return G&&L!==ef&&($.value=Kf(S,this.options,j,this.speed)),F&&F($.value),G&&this.finish(),$}then(i,a){return this.finished.then(i,a)}get duration(){return Ti(this.calculatedDuration)}get time(){return Ti(this.currentTime)}set time(i){var a;i=Ni(i),this.currentTime=i,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=i:this.driver&&(this.startTime=this.driver.now()-i/this.playbackSpeed),(a=this.driver)==null||a.start(!1)}get speed(){return this.playbackSpeed}set speed(i){this.updateTime(Fr.now());const a=this.playbackSpeed!==i;this.playbackSpeed=i,a&&(this.time=Ti(this.currentTime))}play(){var m,x;if(this.isStopped)return;const{driver:i=mv,startTime:a}=this.options;this.driver||(this.driver=i(y=>this.tick(y))),(x=(m=this.options).onPlay)==null||x.call(m);const u=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=u):this.holdTime!==null?this.startTime=u-this.holdTime:this.startTime||(this.startTime=a??u),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Fr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var i,a;this.notifyFinished(),this.teardown(),this.state="finished",(a=(i=this.options).onComplete)==null||a.call(i)}cancel(){var i,a;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(a=(i=this.options).onCancel)==null||a.call(i)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(i){return this.startTime=0,this.tick(i,!0)}attachTimeline(i){var a;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(a=this.driver)==null||a.stop(),i.observe(this)}}function kv(t){for(let i=1;i<t.length;i++)t[i]??(t[i]=t[i-1])}const ro=t=>t*180/Math.PI,tf=t=>{const i=ro(Math.atan2(t[1],t[0]));return nf(i)},Pv={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:tf,rotateZ:tf,skewX:t=>ro(Math.atan(t[1])),skewY:t=>ro(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},nf=t=>(t=t%360,t<0&&(t+=360),t),G1=tf,X1=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Y1=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Mv={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:X1,scaleY:Y1,scale:t=>(X1(t)+Y1(t))/2,rotateX:t=>nf(ro(Math.atan2(t[6],t[5]))),rotateY:t=>nf(ro(Math.atan2(-t[2],t[0]))),rotateZ:G1,rotate:G1,skewX:t=>ro(Math.atan(t[4])),skewY:t=>ro(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function rf(t){return t.includes("scale")?1:0}function sf(t,i){if(!t||t==="none")return rf(i);const a=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let u,m;if(a)u=Mv,m=a;else{const b=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);u=Pv,m=b}if(!m)return rf(i);const x=u[i],y=m[1].split(",").map(Dv);return typeof x=="function"?x(y):y[x]}const Ov=(t,i)=>{const{transform:a="none"}=getComputedStyle(t);return sf(a,i)};function Dv(t){return parseFloat(t.trim())}const qo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Qo=new Set(qo),$1=t=>t===Ko||t===bt,Lv=new Set(["x","y","z"]),jv=qo.filter(t=>!Lv.has(t));function Bv(t){const i=[];return jv.forEach(a=>{const u=t.getValue(a);u!==void 0&&(i.push([a,u.get()]),u.set(a.startsWith("scale")?1:0))}),i}const so={width:({x:t},{paddingLeft:i="0",paddingRight:a="0"})=>t.max-t.min-parseFloat(i)-parseFloat(a),height:({y:t},{paddingTop:i="0",paddingBottom:a="0"})=>t.max-t.min-parseFloat(i)-parseFloat(a),top:(t,{top:i})=>parseFloat(i),left:(t,{left:i})=>parseFloat(i),bottom:({y:t},{top:i})=>parseFloat(i)+(t.max-t.min),right:({x:t},{left:i})=>parseFloat(i)+(t.max-t.min),x:(t,{transform:i})=>sf(i,"x"),y:(t,{transform:i})=>sf(i,"y")};so.translateX=so.x;so.translateY=so.y;const oo=new Set;let of=!1,af=!1,lf=!1;function sg(){if(af){const t=Array.from(oo).filter(u=>u.needsMeasurement),i=new Set(t.map(u=>u.element)),a=new Map;i.forEach(u=>{const m=Bv(u);m.length&&(a.set(u,m),u.render())}),t.forEach(u=>u.measureInitialState()),i.forEach(u=>{u.render();const m=a.get(u);m&&m.forEach(([x,y])=>{var b;(b=u.getValue(x))==null||b.set(y)})}),t.forEach(u=>u.measureEndState()),t.forEach(u=>{u.suspendedScrollY!==void 0&&window.scrollTo(0,u.suspendedScrollY)})}af=!1,of=!1,oo.forEach(t=>t.complete(lf)),oo.clear()}function og(){oo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(af=!0)})}function Fv(){lf=!0,og(),sg(),lf=!1}class Qf{constructor(i,a,u,m,x,y=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...i],this.onComplete=a,this.name=u,this.motionValue=m,this.element=x,this.isAsync=y}scheduleResolve(){this.state="scheduled",this.isAsync?(oo.add(this),of||(of=!0,ln.read(og),ln.resolveKeyframes(sg))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:i,name:a,element:u,motionValue:m}=this;if(i[0]===null){const x=m==null?void 0:m.get(),y=i[i.length-1];if(x!==void 0)i[0]=x;else if(u&&a){const b=u.readValue(a,y);b!=null&&(i[0]=b)}i[0]===void 0&&(i[0]=y),m&&x===void 0&&m.set(i[0])}kv(i)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(i=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,i),oo.delete(this)}cancel(){this.state==="scheduled"&&(oo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Vv=t=>t.startsWith("--");function Uv(t,i,a){Vv(i)?t.style.setProperty(i,a):t.style[i]=a}const zv=Vf(()=>window.ScrollTimeline!==void 0),Wv={};function Hv(t,i){const a=Vf(t);return()=>Wv[i]??a()}const ag=Hv(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ba=([t,i,a,u])=>`cubic-bezier(${t}, ${i}, ${a}, ${u})`,Z1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ba([0,.65,.55,1]),circOut:Ba([.55,0,1,.45]),backIn:Ba([.31,.01,.66,-.59]),backOut:Ba([.33,1.53,.69,.99])};function lg(t,i){if(t)return typeof t=="function"?ag()?tg(t,i):"ease-out":Gp(t)?Ba(t):Array.isArray(t)?t.map(a=>lg(a,i)||Z1.easeOut):Z1[t]}function Gv(t,i,a,{delay:u=0,duration:m=300,repeat:x=0,repeatType:y="loop",ease:b="easeOut",times:v}={},C=void 0){const S={[i]:a};v&&(S.offset=v);const T=lg(b,m);Array.isArray(T)&&(S.easing=T);const _={delay:u,duration:m,easing:Array.isArray(T)?"linear":T,fill:"both",iterations:x+1,direction:y==="reverse"?"alternate":"normal"};return C&&(_.pseudoElement=C),t.animate(S,_)}function cg(t){return typeof t=="function"&&"applyToOptions"in t}function Xv({type:t,...i}){return cg(t)&&ag()?t.applyToOptions(i):(i.duration??(i.duration=300),i.ease??(i.ease="easeOut"),i)}class Yv extends qf{constructor(i){if(super(),this.finishedTime=null,this.isStopped=!1,!i)return;const{element:a,name:u,keyframes:m,pseudoElement:x,allowFlatten:y=!1,finalKeyframe:b,onComplete:v}=i;this.isPseudoElement=!!x,this.allowFlatten=y,this.options=i,Ff(typeof i.type!="string");const C=Xv(i);this.animation=Gv(a,u,m,C,x),C.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!x){const S=Kf(m,this.options,b,this.speed);this.updateMotionValue?this.updateMotionValue(S):Uv(a,u,S),this.animation.cancel()}v==null||v(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var i,a;(a=(i=this.animation).finish)==null||a.call(i)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:i}=this;i==="idle"||i==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var i,a;this.isPseudoElement||(a=(i=this.animation).commitStyles)==null||a.call(i)}get duration(){var a,u;const i=((u=(a=this.animation.effect)==null?void 0:a.getComputedTiming)==null?void 0:u.call(a).duration)||0;return Ti(Number(i))}get time(){return Ti(Number(this.animation.currentTime)||0)}set time(i){this.finishedTime=null,this.animation.currentTime=Ni(i)}get speed(){return this.animation.playbackRate}set speed(i){i<0&&(this.finishedTime=null),this.animation.playbackRate=i}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(i){this.animation.startTime=i}attachTimeline({timeline:i,observe:a}){var u;return this.allowFlatten&&((u=this.animation.effect)==null||u.updateTiming({easing:"linear"})),this.animation.onfinish=null,i&&zv()?(this.animation.timeline=i,ii):a(this)}}const ug={anticipate:Up,backInOut:Vp,circInOut:Wp};function $v(t){return t in ug}function Zv(t){typeof t.ease=="string"&&$v(t.ease)&&(t.ease=ug[t.ease])}const K1=10;class Kv extends Yv{constructor(i){Zv(i),ig(i),super(i),i.startTime&&(this.startTime=i.startTime),this.options=i}updateMotionValue(i){const{motionValue:a,onUpdate:u,onComplete:m,element:x,...y}=this.options;if(!a)return;if(i!==void 0){a.set(i);return}const b=new Gc({...y,autoplay:!1}),v=Ni(this.finishedTime??this.time);a.setWithVelocity(b.sample(v-K1).value,b.sample(v).value,K1),b.stop()}}const q1=(t,i)=>i==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ns.test(t)||t==="0")&&!t.startsWith("url("));function qv(t){const i=t[0];if(t.length===1)return!0;for(let a=0;a<t.length;a++)if(t[a]!==i)return!0}function Qv(t,i,a,u){const m=t[0];if(m===null)return!1;if(i==="display"||i==="visibility")return!0;const x=t[t.length-1],y=q1(m,i),b=q1(x,i);return!y||!b?!1:qv(t)||(a==="spring"||cg(a))&&u}function cf(t){t.duration=0,t.type}const Jv=new Set(["opacity","clipPath","filter","transform"]),e3=Vf(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function t3(t){var S;const{motionValue:i,name:a,repeatDelay:u,repeatType:m,damping:x,type:y}=t;if(!(((S=i==null?void 0:i.owner)==null?void 0:S.current)instanceof HTMLElement))return!1;const{onUpdate:v,transformTemplate:C}=i.owner.getProps();return e3()&&a&&Jv.has(a)&&(a!=="transform"||!C)&&!v&&!u&&m!=="mirror"&&x!==0&&y!=="inertia"}const n3=40;class r3 extends qf{constructor({autoplay:i=!0,delay:a=0,type:u="keyframes",repeat:m=0,repeatDelay:x=0,repeatType:y="loop",keyframes:b,name:v,motionValue:C,element:S,...T}){var L;super(),this.stop=()=>{var F,j;this._animation&&(this._animation.stop(),(F=this.stopTimeline)==null||F.call(this)),(j=this.keyframeResolver)==null||j.cancel()},this.createdAt=Fr.now();const _={autoplay:i,delay:a,type:u,repeat:m,repeatDelay:x,repeatType:y,name:v,motionValue:C,element:S,...T},M=(S==null?void 0:S.KeyframeResolver)||Qf;this.keyframeResolver=new M(b,(F,j,z)=>this.onKeyframesResolved(F,j,_,!z),v,C,S),(L=this.keyframeResolver)==null||L.scheduleResolve()}onKeyframesResolved(i,a,u,m){this.keyframeResolver=void 0;const{name:x,type:y,velocity:b,delay:v,isHandoff:C,onUpdate:S}=u;this.resolvedAt=Fr.now(),Qv(i,x,y,b)||((Zi.instantAnimations||!v)&&(S==null||S(Kf(i,u,a))),i[0]=i[i.length-1],cf(u),u.repeat=0);const _={startTime:m?this.resolvedAt?this.resolvedAt-this.createdAt>n3?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:a,...u,keyframes:i},M=!C&&t3(_)?new Kv({..._,element:_.motionValue.owner.current}):new Gc(_);M.finished.then(()=>this.notifyFinished()).catch(ii),this.pendingTimeline&&(this.stopTimeline=M.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=M}get finished(){return this._animation?this.animation.finished:this._finished}then(i,a){return this.finished.finally(i).then(()=>{})}get animation(){var i;return this._animation||((i=this.keyframeResolver)==null||i.resume(),Fv()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(i){this.animation.time=i}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(i){this.animation.speed=i}get startTime(){return this.animation.startTime}attachTimeline(i){return this._animation?this.stopTimeline=this.animation.attachTimeline(i):this.pendingTimeline=i,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var i;this._animation&&this.animation.cancel(),(i=this.keyframeResolver)==null||i.cancel()}}const i3=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function s3(t){const i=i3.exec(t);if(!i)return[,];const[,a,u,m]=i;return[`--${a??u}`,m]}function dg(t,i,a=1){const[u,m]=s3(t);if(!u)return;const x=window.getComputedStyle(i).getPropertyValue(u);if(x){const y=x.trim();return Pp(y)?parseFloat(y):y}return Gf(m)?dg(m,i,a+1):m}function Jf(t,i){return(t==null?void 0:t[i])??(t==null?void 0:t.default)??t}const fg=new Set(["width","height","top","left","right","bottom",...qo]),o3={test:t=>t==="auto",parse:t=>t},hg=t=>i=>i.test(t),mg=[Ko,bt,Ii,Es,Qw,qw,o3],Q1=t=>mg.find(hg(t));function a3(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Op(t):!0}const l3=new Set(["brightness","contrast","saturate","opacity"]);function c3(t){const[i,a]=t.slice(0,-1).split("(");if(i==="drop-shadow")return t;const[u]=a.match(Xf)||[];if(!u)return t;const m=a.replace(u,"");let x=l3.has(i)?1:0;return u!==a&&(x*=100),i+"("+x+m+")"}const u3=/\b([a-z-]*)\(.*?\)/gu,uf={...Ns,getAnimatableNone:t=>{const i=t.match(u3);return i?i.map(c3).join(" "):t}},J1={...Ko,transform:Math.round},d3={rotate:Es,rotateX:Es,rotateY:Es,rotateZ:Es,scale:hc,scaleX:hc,scaleY:hc,scaleZ:hc,skew:Es,skewX:Es,skewY:Es,distance:bt,translateX:bt,translateY:bt,translateZ:bt,x:bt,y:bt,z:bt,perspective:bt,transformPerspective:bt,opacity:Za,originX:F1,originY:F1,originZ:bt},eh={borderWidth:bt,borderTopWidth:bt,borderRightWidth:bt,borderBottomWidth:bt,borderLeftWidth:bt,borderRadius:bt,radius:bt,borderTopLeftRadius:bt,borderTopRightRadius:bt,borderBottomRightRadius:bt,borderBottomLeftRadius:bt,width:bt,maxWidth:bt,height:bt,maxHeight:bt,top:bt,right:bt,bottom:bt,left:bt,padding:bt,paddingTop:bt,paddingRight:bt,paddingBottom:bt,paddingLeft:bt,margin:bt,marginTop:bt,marginRight:bt,marginBottom:bt,marginLeft:bt,backgroundPositionX:bt,backgroundPositionY:bt,...d3,zIndex:J1,fillOpacity:Za,strokeOpacity:Za,numOctaves:J1},f3={...eh,color:zn,backgroundColor:zn,outlineColor:zn,fill:zn,stroke:zn,borderColor:zn,borderTopColor:zn,borderRightColor:zn,borderBottomColor:zn,borderLeftColor:zn,filter:uf,WebkitFilter:uf},pg=t=>f3[t];function gg(t,i){let a=pg(t);return a!==uf&&(a=Ns),a.getAnimatableNone?a.getAnimatableNone(i):void 0}const h3=new Set(["auto","none","0"]);function m3(t,i,a){let u=0,m;for(;u<t.length&&!m;){const x=t[u];typeof x=="string"&&!h3.has(x)&&Ka(x).values.length&&(m=t[u]),u++}if(m&&a)for(const x of i)t[x]=gg(a,m)}class p3 extends Qf{constructor(i,a,u,m,x){super(i,a,u,m,x,!0)}readKeyframes(){const{unresolvedKeyframes:i,element:a,name:u}=this;if(!a||!a.current)return;super.readKeyframes();for(let v=0;v<i.length;v++){let C=i[v];if(typeof C=="string"&&(C=C.trim(),Gf(C))){const S=dg(C,a.current);S!==void 0&&(i[v]=S),v===i.length-1&&(this.finalKeyframe=C)}}if(this.resolveNoneKeyframes(),!fg.has(u)||i.length!==2)return;const[m,x]=i,y=Q1(m),b=Q1(x);if(y!==b)if($1(y)&&$1(b))for(let v=0;v<i.length;v++){const C=i[v];typeof C=="string"&&(i[v]=parseFloat(C))}else so[u]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:i,name:a}=this,u=[];for(let m=0;m<i.length;m++)(i[m]===null||a3(i[m]))&&u.push(m);u.length&&m3(i,u,a)}measureInitialState(){const{element:i,unresolvedKeyframes:a,name:u}=this;if(!i||!i.current)return;u==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=so[u](i.measureViewportBox(),window.getComputedStyle(i.current)),a[0]=this.measuredOrigin;const m=a[a.length-1];m!==void 0&&i.getValue(u,m).jump(m,!1)}measureEndState(){var b;const{element:i,name:a,unresolvedKeyframes:u}=this;if(!i||!i.current)return;const m=i.getValue(a);m&&m.jump(this.measuredOrigin,!1);const x=u.length-1,y=u[x];u[x]=so[a](i.measureViewportBox(),window.getComputedStyle(i.current)),y!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=y),(b=this.removedTransforms)!=null&&b.length&&this.removedTransforms.forEach(([v,C])=>{i.getValue(v).set(C)}),this.resolveNoneKeyframes()}}function xg(t,i,a){if(t instanceof EventTarget)return[t];if(typeof t=="string"){const m=document.querySelectorAll(t);return m?Array.from(m):[]}return Array.from(t)}const yg=(t,i)=>i&&typeof t=="number"?i.transform(t):t;function wg(t){return Mp(t)&&"offsetHeight"in t}const em=30,g3=t=>!isNaN(parseFloat(t)),Ua={current:void 0};class x3{constructor(i,a={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=u=>{var x;const m=Fr.now();if(this.updatedAt!==m&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(u),this.current!==this.prev&&((x=this.events.change)==null||x.notify(this.current),this.dependents))for(const y of this.dependents)y.dirty()},this.hasAnimated=!1,this.setCurrent(i),this.owner=a.owner}setCurrent(i){this.current=i,this.updatedAt=Fr.now(),this.canTrackVelocity===null&&i!==void 0&&(this.canTrackVelocity=g3(this.current))}setPrevFrameValue(i=this.current){this.prevFrameValue=i,this.prevUpdatedAt=this.updatedAt}onChange(i){return this.on("change",i)}on(i,a){this.events[i]||(this.events[i]=new Uf);const u=this.events[i].add(a);return i==="change"?()=>{u(),ln.read(()=>{this.events.change.getSize()||this.stop()})}:u}clearListeners(){for(const i in this.events)this.events[i].clear()}attach(i,a){this.passiveEffect=i,this.stopPassiveEffect=a}set(i){this.passiveEffect?this.passiveEffect(i,this.updateAndNotify):this.updateAndNotify(i)}setWithVelocity(i,a,u){this.set(a),this.prev=void 0,this.prevFrameValue=i,this.prevUpdatedAt=this.updatedAt-u}jump(i,a=!0){this.updateAndNotify(i),this.prev=i,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var i;(i=this.events.change)==null||i.notify(this.current)}addDependent(i){this.dependents||(this.dependents=new Set),this.dependents.add(i)}removeDependent(i){this.dependents&&this.dependents.delete(i)}get(){return Ua.current&&Ua.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const i=Fr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||i-this.updatedAt>em)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,em);return Dp(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(i){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=i(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var i,a;(i=this.dependents)==null||i.clear(),(a=this.events.destroy)==null||a.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ao(t,i){return new x3(t,i)}const{schedule:th}=Xp(queueMicrotask,!1),gi={x:!1,y:!1};function vg(){return gi.x||gi.y}function y3(t){return t==="x"||t==="y"?gi[t]?null:(gi[t]=!0,()=>{gi[t]=!1}):gi.x||gi.y?null:(gi.x=gi.y=!0,()=>{gi.x=gi.y=!1})}function Cg(t,i){const a=xg(t),u=new AbortController,m={passive:!0,...i,signal:u.signal};return[a,m,()=>u.abort()]}function tm(t){return!(t.pointerType==="touch"||vg())}function w3(t,i,a={}){const[u,m,x]=Cg(t,a),y=b=>{if(!tm(b))return;const{target:v}=b,C=i(v,b);if(typeof C!="function"||!v)return;const S=T=>{tm(T)&&(C(T),v.removeEventListener("pointerleave",S))};v.addEventListener("pointerleave",S,m)};return u.forEach(b=>{b.addEventListener("pointerenter",y,m)}),x}const bg=(t,i)=>i?t===i?!0:bg(t,i.parentElement):!1,nh=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,v3=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function C3(t){return v3.has(t.tagName)||t.tabIndex!==-1}const bc=new WeakSet;function nm(t){return i=>{i.key==="Enter"&&t(i)}}function Md(t,i){t.dispatchEvent(new PointerEvent("pointer"+i,{isPrimary:!0,bubbles:!0}))}const b3=(t,i)=>{const a=t.currentTarget;if(!a)return;const u=nm(()=>{if(bc.has(a))return;Md(a,"down");const m=nm(()=>{Md(a,"up")}),x=()=>Md(a,"cancel");a.addEventListener("keyup",m,i),a.addEventListener("blur",x,i)});a.addEventListener("keydown",u,i),a.addEventListener("blur",()=>a.removeEventListener("keydown",u),i)};function rm(t){return nh(t)&&!vg()}function E3(t,i,a={}){const[u,m,x]=Cg(t,a),y=b=>{const v=b.currentTarget;if(!rm(b))return;bc.add(v);const C=i(v,b),S=(M,L)=>{window.removeEventListener("pointerup",T),window.removeEventListener("pointercancel",_),bc.has(v)&&bc.delete(v),rm(M)&&typeof C=="function"&&C(M,{success:L})},T=M=>{S(M,v===window||v===document||a.useGlobalTarget||bg(v,M.target))},_=M=>{S(M,!1)};window.addEventListener("pointerup",T,m),window.addEventListener("pointercancel",_,m)};return u.forEach(b=>{(a.useGlobalTarget?window:b).addEventListener("pointerdown",y,m),wg(b)&&(b.addEventListener("focus",C=>b3(C,m)),!C3(b)&&!b.hasAttribute("tabindex")&&(b.tabIndex=0))}),x}function Eg(t){return Mp(t)&&"ownerSVGElement"in t}function S3(t){return Eg(t)&&t.tagName==="svg"}function A3(...t){const i=!Array.isArray(t[0]),a=i?0:-1,u=t[0+a],m=t[1+a],x=t[2+a],y=t[3+a],b=rg(m,x,y);return i?b(u):b}const lr=t=>!!(t&&t.getVelocity);function N3(t,i,a){const u=t.get();let m=null,x=u,y;const b=typeof u=="string"?u.replace(/[\d.-]/g,""):void 0,v=()=>{m&&(m.stop(),m=null)},C=()=>{v(),m=new Gc({keyframes:[sm(t.get()),sm(x)],velocity:t.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...a,onUpdate:y})};if(t.attach((S,T)=>(x=S,y=_=>T(im(_,b)),ln.postRender(C),t.get()),v),lr(i)){const S=i.on("change",_=>t.set(im(_,b))),T=t.on("destroy",S);return()=>{S(),T()}}return v}function im(t,i){return i?t+i:t}function sm(t){return typeof t=="number"?t:parseFloat(t)}const T3=[...mg,zn,Ns],I3=t=>T3.find(hg(t)),al=N.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class _3 extends N.Component{getSnapshotBeforeUpdate(i){const a=this.props.childRef.current;if(a&&i.isPresent&&!this.props.isPresent){const u=a.offsetParent,m=wg(u)&&u.offsetWidth||0,x=this.props.sizeRef.current;x.height=a.offsetHeight||0,x.width=a.offsetWidth||0,x.top=a.offsetTop,x.left=a.offsetLeft,x.right=m-x.width-x.left}return null}componentDidUpdate(){}render(){return this.props.children}}function R3({children:t,isPresent:i,anchorX:a,root:u}){const m=N.useId(),x=N.useRef(null),y=N.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:b}=N.useContext(al);return N.useInsertionEffect(()=>{const{width:v,height:C,top:S,left:T,right:_}=y.current;if(i||!x.current||!v||!C)return;const M=a==="left"?`left: ${T}`:`right: ${_}`;x.current.dataset.motionPopId=m;const L=document.createElement("style");b&&(L.nonce=b);const F=u??document.head;return F.appendChild(L),L.sheet&&L.sheet.insertRule(`
          [data-motion-pop-id="${m}"] {
            position: absolute !important;
            width: ${v}px !important;
            height: ${C}px !important;
            ${M}px !important;
            top: ${S}px !important;
          }
        `),()=>{F.contains(L)&&F.removeChild(L)}},[i]),h.jsx(_3,{isPresent:i,childRef:x,sizeRef:y,children:N.cloneElement(t,{ref:x})})}const k3=({children:t,initial:i,isPresent:a,onExitComplete:u,custom:m,presenceAffectsLayout:x,mode:y,anchorX:b,root:v})=>{const C=rl(P3),S=N.useId();let T=!0,_=N.useMemo(()=>(T=!1,{id:S,initial:i,isPresent:a,custom:m,onExitComplete:M=>{C.set(M,!0);for(const L of C.values())if(!L)return;u&&u()},register:M=>(C.set(M,!1),()=>C.delete(M))}),[a,C,u]);return x&&T&&(_={..._}),N.useMemo(()=>{C.forEach((M,L)=>C.set(L,!1))},[a]),N.useEffect(()=>{!a&&!C.size&&u&&u()},[a]),y==="popLayout"&&(t=h.jsx(R3,{isPresent:a,anchorX:b,root:v,children:t})),h.jsx(Hc.Provider,{value:_,children:t})};function P3(){return new Map}function Sg(t=!0){const i=N.useContext(Hc);if(i===null)return[!0,null];const{isPresent:a,onExitComplete:u,register:m}=i,x=N.useId();N.useEffect(()=>{if(t)return m(x)},[t]);const y=N.useCallback(()=>t&&u&&u(x),[x,u,t]);return!a&&u?[!1,y]:[!0]}const mc=t=>t.key||"";function om(t){const i=[];return N.Children.forEach(t,a=>{N.isValidElement(a)&&i.push(a)}),i}const Er=({children:t,custom:i,initial:a=!0,onExitComplete:u,presenceAffectsLayout:m=!0,mode:x="sync",propagate:y=!1,anchorX:b="left",root:v})=>{const[C,S]=Sg(y),T=N.useMemo(()=>om(t),[t]),_=y&&!C?[]:T.map(mc),M=N.useRef(!0),L=N.useRef(T),F=rl(()=>new Map),[j,z]=N.useState(T),[V,B]=N.useState(T);Lf(()=>{M.current=!1,L.current=T;for(let re=0;re<V.length;re++){const G=mc(V[re]);_.includes(G)?F.delete(G):F.get(G)!==!0&&F.set(G,!1)}},[V,_.length,_.join("-")]);const Y=[];if(T!==j){let re=[...T];for(let G=0;G<V.length;G++){const te=V[G],J=mc(te);_.includes(J)||(re.splice(G,0,te),Y.push(te))}return x==="wait"&&Y.length&&(re=Y),B(om(re)),z(T),null}const{forceRender:$}=N.useContext(Of);return h.jsx(h.Fragment,{children:V.map(re=>{const G=mc(re),te=y&&!C?!1:T===V||_.includes(G),J=()=>{if(F.has(G))F.set(G,!0);else return;let ye=!0;F.forEach(_e=>{_e||(ye=!1)}),ye&&($==null||$(),B(L.current),y&&(S==null||S()),u&&u())};return h.jsx(k3,{isPresent:te,initial:!M.current||a?void 0:!1,custom:i,presenceAffectsLayout:m,mode:x,root:v,onExitComplete:te?void 0:J,anchorX:b,children:re},G)})})},Ag=N.createContext({strict:!1}),am={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Xo={};for(const t in am)Xo[t]={isEnabled:i=>am[t].some(a=>!!i[a])};function M3(t){for(const i in t)Xo[i]={...Xo[i],...t[i]}}const O3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Pc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||O3.has(t)}let Ng=t=>!Pc(t);function D3(t){typeof t=="function"&&(Ng=i=>i.startsWith("on")?!Pc(i):t(i))}try{D3(require("@emotion/is-prop-valid").default)}catch{}function L3(t,i,a){const u={};for(const m in t)m==="values"&&typeof t.values=="object"||(Ng(m)||a===!0&&Pc(m)||!i&&!Pc(m)||t.draggable&&m.startsWith("onDrag"))&&(u[m]=t[m]);return u}const Xc=N.createContext({});function Yc(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function qa(t){return typeof t=="string"||Array.isArray(t)}const rh=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ih=["initial",...rh];function $c(t){return Yc(t.animate)||ih.some(i=>qa(t[i]))}function Tg(t){return!!($c(t)||t.variants)}function j3(t,i){if($c(t)){const{initial:a,animate:u}=t;return{initial:a===!1||qa(a)?a:void 0,animate:qa(u)?u:void 0}}return t.inherit!==!1?i:{}}function B3(t){const{initial:i,animate:a}=j3(t,N.useContext(Xc));return N.useMemo(()=>({initial:i,animate:a}),[lm(i),lm(a)])}function lm(t){return Array.isArray(t)?t.join(" "):t}const Qa={};function F3(t){for(const i in t)Qa[i]=t[i],Hf(i)&&(Qa[i].isCSSVariable=!0)}function Ig(t,{layout:i,layoutId:a}){return Qo.has(t)||t.startsWith("origin")||(i||a!==void 0)&&(!!Qa[t]||t==="opacity")}const V3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},U3=qo.length;function z3(t,i,a){let u="",m=!0;for(let x=0;x<U3;x++){const y=qo[x],b=t[y];if(b===void 0)continue;let v=!0;if(typeof b=="number"?v=b===(y.startsWith("scale")?1:0):v=parseFloat(b)===0,!v||a){const C=yg(b,eh[y]);if(!v){m=!1;const S=V3[y]||y;u+=`${S}(${C}) `}a&&(i[y]=C)}}return u=u.trim(),a?u=a(i,m?"":u):m&&(u="none"),u}function sh(t,i,a){const{style:u,vars:m,transformOrigin:x}=t;let y=!1,b=!1;for(const v in i){const C=i[v];if(Qo.has(v)){y=!0;continue}else if(Hf(v)){m[v]=C;continue}else{const S=yg(C,eh[v]);v.startsWith("origin")?(b=!0,x[v]=S):u[v]=S}}if(i.transform||(y||a?u.transform=z3(i,t.transform,a):u.transform&&(u.transform="none")),b){const{originX:v="50%",originY:C="50%",originZ:S=0}=x;u.transformOrigin=`${v} ${C} ${S}`}}const oh=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function _g(t,i,a){for(const u in i)!lr(i[u])&&!Ig(u,a)&&(t[u]=i[u])}function W3({transformTemplate:t},i){return N.useMemo(()=>{const a=oh();return sh(a,i,t),Object.assign({},a.vars,a.style)},[i])}function H3(t,i){const a=t.style||{},u={};return _g(u,a,t),Object.assign(u,W3(t,i)),u}function G3(t,i){const a={},u=H3(t,i);return t.drag&&t.dragListener!==!1&&(a.draggable=!1,u.userSelect=u.WebkitUserSelect=u.WebkitTouchCallout="none",u.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(a.tabIndex=0),a.style=u,a}const X3={offset:"stroke-dashoffset",array:"stroke-dasharray"},Y3={offset:"strokeDashoffset",array:"strokeDasharray"};function $3(t,i,a=1,u=0,m=!0){t.pathLength=1;const x=m?X3:Y3;t[x.offset]=bt.transform(-u);const y=bt.transform(i),b=bt.transform(a);t[x.array]=`${y} ${b}`}function Rg(t,{attrX:i,attrY:a,attrScale:u,pathLength:m,pathSpacing:x=1,pathOffset:y=0,...b},v,C,S){if(sh(t,b,C),v){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:T,style:_}=t;T.transform&&(_.transform=T.transform,delete T.transform),(_.transform||T.transformOrigin)&&(_.transformOrigin=T.transformOrigin??"50% 50%",delete T.transformOrigin),_.transform&&(_.transformBox=(S==null?void 0:S.transformBox)??"fill-box",delete T.transformBox),i!==void 0&&(T.x=i),a!==void 0&&(T.y=a),u!==void 0&&(T.scale=u),m!==void 0&&$3(T,m,x,y,!1)}const kg=()=>({...oh(),attrs:{}}),Pg=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Z3(t,i,a,u){const m=N.useMemo(()=>{const x=kg();return Rg(x,i,Pg(u),t.transformTemplate,t.style),{...x.attrs,style:{...x.style}}},[i]);if(t.style){const x={};_g(x,t.style,t),m.style={...x,...m.style}}return m}const K3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ah(t){return typeof t!="string"||t.includes("-")?!1:!!(K3.indexOf(t)>-1||/[A-Z]/u.test(t))}function q3(t,i,a,{latestValues:u},m,x=!1){const b=(ah(t)?Z3:G3)(i,u,m,t),v=L3(i,typeof t=="string",x),C=t!==N.Fragment?{...v,...b,ref:a}:{},{children:S}=i,T=N.useMemo(()=>lr(S)?S.get():S,[S]);return N.createElement(t,{...C,children:T})}function cm(t){const i=[{},{}];return t==null||t.values.forEach((a,u)=>{i[0][u]=a.get(),i[1][u]=a.getVelocity()}),i}function lh(t,i,a,u){if(typeof i=="function"){const[m,x]=cm(u);i=i(a!==void 0?a:t.custom,m,x)}if(typeof i=="string"&&(i=t.variants&&t.variants[i]),typeof i=="function"){const[m,x]=cm(u);i=i(a!==void 0?a:t.custom,m,x)}return i}function Ec(t){return lr(t)?t.get():t}function Q3({scrapeMotionValuesFromProps:t,createRenderState:i},a,u,m){return{latestValues:J3(a,u,m,t),renderState:i()}}function J3(t,i,a,u){const m={},x=u(t,{});for(const _ in x)m[_]=Ec(x[_]);let{initial:y,animate:b}=t;const v=$c(t),C=Tg(t);i&&C&&!v&&t.inherit!==!1&&(y===void 0&&(y=i.initial),b===void 0&&(b=i.animate));let S=a?a.initial===!1:!1;S=S||y===!1;const T=S?b:y;if(T&&typeof T!="boolean"&&!Yc(T)){const _=Array.isArray(T)?T:[T];for(let M=0;M<_.length;M++){const L=lh(t,_[M]);if(L){const{transitionEnd:F,transition:j,...z}=L;for(const V in z){let B=z[V];if(Array.isArray(B)){const Y=S?B.length-1:0;B=B[Y]}B!==null&&(m[V]=B)}for(const V in F)m[V]=F[V]}}}return m}const Mg=t=>(i,a)=>{const u=N.useContext(Xc),m=N.useContext(Hc),x=()=>Q3(t,i,u,m);return a?x():rl(x)};function ch(t,i,a){var x;const{style:u}=t,m={};for(const y in u)(lr(u[y])||i.style&&lr(i.style[y])||Ig(y,t)||((x=a==null?void 0:a.getValue(y))==null?void 0:x.liveStyle)!==void 0)&&(m[y]=u[y]);return m}const eC=Mg({scrapeMotionValuesFromProps:ch,createRenderState:oh});function Og(t,i,a){const u=ch(t,i,a);for(const m in t)if(lr(t[m])||lr(i[m])){const x=qo.indexOf(m)!==-1?"attr"+m.charAt(0).toUpperCase()+m.substring(1):m;u[x]=t[m]}return u}const tC=Mg({scrapeMotionValuesFromProps:Og,createRenderState:kg}),nC=Symbol.for("motionComponentSymbol");function Fo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function rC(t,i,a){return N.useCallback(u=>{u&&t.onMount&&t.onMount(u),i&&(u?i.mount(u):i.unmount()),a&&(typeof a=="function"?a(u):Fo(a)&&(a.current=u))},[i])}const uh=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),iC="framerAppearId",Dg="data-"+uh(iC),Lg=N.createContext({});function sC(t,i,a,u,m){var F,j;const{visualElement:x}=N.useContext(Xc),y=N.useContext(Ag),b=N.useContext(Hc),v=N.useContext(al).reducedMotion,C=N.useRef(null);u=u||y.renderer,!C.current&&u&&(C.current=u(t,{visualState:i,parent:x,props:a,presenceContext:b,blockInitialAnimation:b?b.initial===!1:!1,reducedMotionConfig:v}));const S=C.current,T=N.useContext(Lg);S&&!S.projection&&m&&(S.type==="html"||S.type==="svg")&&oC(C.current,a,m,T);const _=N.useRef(!1);N.useInsertionEffect(()=>{S&&_.current&&S.update(a,b)});const M=a[Dg],L=N.useRef(!!M&&!((F=window.MotionHandoffIsComplete)!=null&&F.call(window,M))&&((j=window.MotionHasOptimisedAnimation)==null?void 0:j.call(window,M)));return Lf(()=>{S&&(_.current=!0,window.MotionIsMounted=!0,S.updateFeatures(),S.scheduleRenderMicrotask(),L.current&&S.animationState&&S.animationState.animateChanges())}),N.useEffect(()=>{S&&(!L.current&&S.animationState&&S.animationState.animateChanges(),L.current&&(queueMicrotask(()=>{var z;(z=window.MotionHandoffMarkAsComplete)==null||z.call(window,M)}),L.current=!1),S.enteringChildren=void 0)}),S}function oC(t,i,a,u){const{layoutId:m,layout:x,drag:y,dragConstraints:b,layoutScroll:v,layoutRoot:C,layoutCrossfade:S}=i;t.projection=new a(t.latestValues,i["data-framer-portal-id"]?void 0:jg(t.parent)),t.projection.setOptions({layoutId:m,layout:x,alwaysMeasureLayout:!!y||b&&Fo(b),visualElement:t,animationType:typeof x=="string"?x:"both",initialPromotionConfig:u,crossfade:S,layoutScroll:v,layoutRoot:C})}function jg(t){if(t)return t.options.allowProjection!==!1?t.projection:jg(t.parent)}function Od(t,{forwardMotionProps:i=!1}={},a,u){a&&M3(a);const m=ah(t)?tC:eC;function x(b,v){let C;const S={...N.useContext(al),...b,layoutId:aC(b)},{isStatic:T}=S,_=B3(b),M=m(b,T);if(!T&&Df){lC();const L=cC(S);C=L.MeasureLayout,_.visualElement=sC(t,M,S,u,L.ProjectionNode)}return h.jsxs(Xc.Provider,{value:_,children:[C&&_.visualElement?h.jsx(C,{visualElement:_.visualElement,...S}):null,q3(t,b,rC(M,_.visualElement,v),M,T,i)]})}x.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const y=N.forwardRef(x);return y[nC]=t,y}function aC({layoutId:t}){const i=N.useContext(Of).id;return i&&t!==void 0?i+"-"+t:t}function lC(t,i){N.useContext(Ag).strict}function cC(t){const{drag:i,layout:a}=Xo;if(!i&&!a)return{};const u={...i,...a};return{MeasureLayout:i!=null&&i.isEnabled(t)||a!=null&&a.isEnabled(t)?u.MeasureLayout:void 0,ProjectionNode:u.ProjectionNode}}function uC(t,i){if(typeof Proxy>"u")return Od;const a=new Map,u=(x,y)=>Od(x,y,t,i),m=(x,y)=>u(x,y);return new Proxy(m,{get:(x,y)=>y==="create"?u:(a.has(y)||a.set(y,Od(y,void 0,t,i)),a.get(y))})}function Bg({top:t,left:i,right:a,bottom:u}){return{x:{min:i,max:a},y:{min:t,max:u}}}function dC({x:t,y:i}){return{top:i.min,right:t.max,bottom:i.max,left:t.min}}function fC(t,i){if(!i)return t;const a=i({x:t.left,y:t.top}),u=i({x:t.right,y:t.bottom});return{top:a.y,left:a.x,bottom:u.y,right:u.x}}function Dd(t){return t===void 0||t===1}function df({scale:t,scaleX:i,scaleY:a}){return!Dd(t)||!Dd(i)||!Dd(a)}function to(t){return df(t)||Fg(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Fg(t){return um(t.x)||um(t.y)}function um(t){return t&&t!=="0%"}function Mc(t,i,a){const u=t-a,m=i*u;return a+m}function dm(t,i,a,u,m){return m!==void 0&&(t=Mc(t,m,u)),Mc(t,a,u)+i}function ff(t,i=0,a=1,u,m){t.min=dm(t.min,i,a,u,m),t.max=dm(t.max,i,a,u,m)}function Vg(t,{x:i,y:a}){ff(t.x,i.translate,i.scale,i.originPoint),ff(t.y,a.translate,a.scale,a.originPoint)}const fm=.999999999999,hm=1.0000000000001;function hC(t,i,a,u=!1){const m=a.length;if(!m)return;i.x=i.y=1;let x,y;for(let b=0;b<m;b++){x=a[b],y=x.projectionDelta;const{visualElement:v}=x.options;v&&v.props.style&&v.props.style.display==="contents"||(u&&x.options.layoutScroll&&x.scroll&&x!==x.root&&Uo(t,{x:-x.scroll.offset.x,y:-x.scroll.offset.y}),y&&(i.x*=y.x.scale,i.y*=y.y.scale,Vg(t,y)),u&&to(x.latestValues)&&Uo(t,x.latestValues))}i.x<hm&&i.x>fm&&(i.x=1),i.y<hm&&i.y>fm&&(i.y=1)}function Vo(t,i){t.min=t.min+i,t.max=t.max+i}function mm(t,i,a,u,m=.5){const x=Sn(t.min,t.max,m);ff(t,i,a,x,u)}function Uo(t,i){mm(t.x,i.x,i.scaleX,i.scale,i.originX),mm(t.y,i.y,i.scaleY,i.scale,i.originY)}function Ug(t,i){return Bg(fC(t.getBoundingClientRect(),i))}function mC(t,i,a){const u=Ug(t,a),{scroll:m}=i;return m&&(Vo(u.x,m.offset.x),Vo(u.y,m.offset.y)),u}const pm=()=>({translate:0,scale:1,origin:0,originPoint:0}),zo=()=>({x:pm(),y:pm()}),gm=()=>({min:0,max:0}),jn=()=>({x:gm(),y:gm()}),hf={current:null},zg={current:!1};function pC(){if(zg.current=!0,!!Df)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),i=()=>hf.current=t.matches;t.addEventListener("change",i),i()}else hf.current=!1}const gC=new WeakMap;function xC(t,i,a){for(const u in i){const m=i[u],x=a[u];if(lr(m))t.addValue(u,m);else if(lr(x))t.addValue(u,ao(m,{owner:t}));else if(x!==m)if(t.hasValue(u)){const y=t.getValue(u);y.liveStyle===!0?y.jump(m):y.hasAnimated||y.set(m)}else{const y=t.getStaticValue(u);t.addValue(u,ao(y!==void 0?y:m,{owner:t}))}}for(const u in a)i[u]===void 0&&t.removeValue(u);return i}const xm=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class yC{scrapeMotionValuesFromProps(i,a,u){return{}}constructor({parent:i,props:a,presenceContext:u,reducedMotionConfig:m,blockInitialAnimation:x,visualState:y},b={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Qf,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=Fr.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,ln.render(this.render,!1,!0))};const{latestValues:v,renderState:C}=y;this.latestValues=v,this.baseTarget={...v},this.initialValues=a.initial?{...v}:{},this.renderState=C,this.parent=i,this.props=a,this.presenceContext=u,this.depth=i?i.depth+1:0,this.reducedMotionConfig=m,this.options=b,this.blockInitialAnimation=!!x,this.isControllingVariants=$c(a),this.isVariantNode=Tg(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(i&&i.current);const{willChange:S,...T}=this.scrapeMotionValuesFromProps(a,{},this);for(const _ in T){const M=T[_];v[_]!==void 0&&lr(M)&&M.set(v[_])}}mount(i){var a;this.current=i,gC.set(i,this),this.projection&&!this.projection.instance&&this.projection.mount(i),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((u,m)=>this.bindToMotionValue(m,u)),zg.current||pC(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:hf.current,(a=this.parent)==null||a.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var i;this.projection&&this.projection.unmount(),Ki(this.notifyUpdate),Ki(this.render),this.valueSubscriptions.forEach(a=>a()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(i=this.parent)==null||i.removeChild(this);for(const a in this.events)this.events[a].clear();for(const a in this.features){const u=this.features[a];u&&(u.unmount(),u.isMounted=!1)}this.current=null}addChild(i){this.children.add(i),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(i)}removeChild(i){this.children.delete(i),this.enteringChildren&&this.enteringChildren.delete(i)}bindToMotionValue(i,a){this.valueSubscriptions.has(i)&&this.valueSubscriptions.get(i)();const u=Qo.has(i);u&&this.onBindTransform&&this.onBindTransform();const m=a.on("change",y=>{this.latestValues[i]=y,this.props.onUpdate&&ln.preRender(this.notifyUpdate),u&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let x;window.MotionCheckAppearSync&&(x=window.MotionCheckAppearSync(this,i,a)),this.valueSubscriptions.set(i,()=>{m(),x&&x(),a.owner&&a.stop()})}sortNodePosition(i){return!this.current||!this.sortInstanceNodePosition||this.type!==i.type?0:this.sortInstanceNodePosition(this.current,i.current)}updateFeatures(){let i="animation";for(i in Xo){const a=Xo[i];if(!a)continue;const{isEnabled:u,Feature:m}=a;if(!this.features[i]&&m&&u(this.props)&&(this.features[i]=new m(this)),this.features[i]){const x=this.features[i];x.isMounted?x.update():(x.mount(),x.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):jn()}getStaticValue(i){return this.latestValues[i]}setStaticValue(i,a){this.latestValues[i]=a}update(i,a){(i.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=i,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let u=0;u<xm.length;u++){const m=xm[u];this.propEventSubscriptions[m]&&(this.propEventSubscriptions[m](),delete this.propEventSubscriptions[m]);const x="on"+m,y=i[x];y&&(this.propEventSubscriptions[m]=this.on(m,y))}this.prevMotionValues=xC(this,this.scrapeMotionValuesFromProps(i,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(i){return this.props.variants?this.props.variants[i]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(i){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(i),()=>a.variantChildren.delete(i)}addValue(i,a){const u=this.values.get(i);a!==u&&(u&&this.removeValue(i),this.bindToMotionValue(i,a),this.values.set(i,a),this.latestValues[i]=a.get())}removeValue(i){this.values.delete(i);const a=this.valueSubscriptions.get(i);a&&(a(),this.valueSubscriptions.delete(i)),delete this.latestValues[i],this.removeValueFromRenderState(i,this.renderState)}hasValue(i){return this.values.has(i)}getValue(i,a){if(this.props.values&&this.props.values[i])return this.props.values[i];let u=this.values.get(i);return u===void 0&&a!==void 0&&(u=ao(a===null?void 0:a,{owner:this}),this.addValue(i,u)),u}readValue(i,a){let u=this.latestValues[i]!==void 0||!this.current?this.latestValues[i]:this.getBaseTargetFromProps(this.props,i)??this.readValueFromInstance(this.current,i,this.options);return u!=null&&(typeof u=="string"&&(Pp(u)||Op(u))?u=parseFloat(u):!I3(u)&&Ns.test(a)&&(u=gg(i,a)),this.setBaseTarget(i,lr(u)?u.get():u)),lr(u)?u.get():u}setBaseTarget(i,a){this.baseTarget[i]=a}getBaseTarget(i){var x;const{initial:a}=this.props;let u;if(typeof a=="string"||typeof a=="object"){const y=lh(this.props,a,(x=this.presenceContext)==null?void 0:x.custom);y&&(u=y[i])}if(a&&u!==void 0)return u;const m=this.getBaseTargetFromProps(this.props,i);return m!==void 0&&!lr(m)?m:this.initialValues[i]!==void 0&&u===void 0?void 0:this.baseTarget[i]}on(i,a){return this.events[i]||(this.events[i]=new Uf),this.events[i].add(a)}notify(i,...a){this.events[i]&&this.events[i].notify(...a)}scheduleRenderMicrotask(){th.render(this.render)}}class Wg extends yC{constructor(){super(...arguments),this.KeyframeResolver=p3}sortInstanceNodePosition(i,a){return i.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(i,a){return i.style?i.style[a]:void 0}removeValueFromRenderState(i,{vars:a,style:u}){delete a[i],delete u[i]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:i}=this.props;lr(i)&&(this.childSubscription=i.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function Hg(t,{style:i,vars:a},u,m){const x=t.style;let y;for(y in i)x[y]=i[y];m==null||m.applyProjectionStyles(x,u);for(y in a)x.setProperty(y,a[y])}function wC(t){return window.getComputedStyle(t)}class vC extends Wg{constructor(){super(...arguments),this.type="html",this.renderInstance=Hg}readValueFromInstance(i,a){var u;if(Qo.has(a))return(u=this.projection)!=null&&u.isProjecting?rf(a):Ov(i,a);{const m=wC(i),x=(Hf(a)?m.getPropertyValue(a):m[a])||0;return typeof x=="string"?x.trim():x}}measureInstanceViewportBox(i,{transformPagePoint:a}){return Ug(i,a)}build(i,a,u){sh(i,a,u.transformTemplate)}scrapeMotionValuesFromProps(i,a,u){return ch(i,a,u)}}const Gg=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function CC(t,i,a,u){Hg(t,i,void 0,u);for(const m in i.attrs)t.setAttribute(Gg.has(m)?m:uh(m),i.attrs[m])}class bC extends Wg{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=jn}getBaseTargetFromProps(i,a){return i[a]}readValueFromInstance(i,a){if(Qo.has(a)){const u=pg(a);return u&&u.default||0}return a=Gg.has(a)?a:uh(a),i.getAttribute(a)}scrapeMotionValuesFromProps(i,a,u){return Og(i,a,u)}build(i,a,u){Rg(i,a,this.isSVGTag,u.transformTemplate,u.style)}renderInstance(i,a,u,m){CC(i,a,u,m)}mount(i){this.isSVGTag=Pg(i.tagName),super.mount(i)}}const EC=(t,i)=>ah(t)?new bC(i):new vC(i,{allowProjection:t!==N.Fragment});function Ho(t,i,a){const u=t.getProps();return lh(u,i,a!==void 0?a:u.custom,t)}const mf=t=>Array.isArray(t);function SC(t,i,a){t.hasValue(i)?t.getValue(i).set(a):t.addValue(i,ao(a))}function AC(t){return mf(t)?t[t.length-1]||0:t}function NC(t,i){const a=Ho(t,i);let{transitionEnd:u={},transition:m={},...x}=a||{};x={...x,...u};for(const y in x){const b=AC(x[y]);SC(t,y,b)}}function TC(t){return!!(lr(t)&&t.add)}function pf(t,i){const a=t.getValue("willChange");if(TC(a))return a.add(i);if(!a&&Zi.WillChange){const u=new Zi.WillChange("auto");t.addValue("willChange",u),u.add(i)}}function Xg(t){return t.props[Dg]}const IC=t=>t!==null;function _C(t,{repeat:i,repeatType:a="loop"},u){const m=t.filter(IC),x=i&&a!=="loop"&&i%2===1?0:m.length-1;return m[x]}const RC={type:"spring",stiffness:500,damping:25,restSpeed:10},kC=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),PC={type:"keyframes",duration:.8},MC={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},OC=(t,{keyframes:i})=>i.length>2?PC:Qo.has(t)?t.startsWith("scale")?kC(i[1]):RC:MC;function DC({when:t,delay:i,delayChildren:a,staggerChildren:u,staggerDirection:m,repeat:x,repeatType:y,repeatDelay:b,from:v,elapsed:C,...S}){return!!Object.keys(S).length}const dh=(t,i,a,u={},m,x)=>y=>{const b=Jf(u,t)||{},v=b.delay||u.delay||0;let{elapsed:C=0}=u;C=C-Ni(v);const S={keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:i.getVelocity(),...b,delay:-C,onUpdate:_=>{i.set(_),b.onUpdate&&b.onUpdate(_)},onComplete:()=>{y(),b.onComplete&&b.onComplete()},name:t,motionValue:i,element:x?void 0:m};DC(b)||Object.assign(S,OC(t,S)),S.duration&&(S.duration=Ni(S.duration)),S.repeatDelay&&(S.repeatDelay=Ni(S.repeatDelay)),S.from!==void 0&&(S.keyframes[0]=S.from);let T=!1;if((S.type===!1||S.duration===0&&!S.repeatDelay)&&(cf(S),S.delay===0&&(T=!0)),(Zi.instantAnimations||Zi.skipAnimations)&&(T=!0,cf(S),S.delay=0),S.allowFlatten=!b.type&&!b.ease,T&&!x&&i.get()!==void 0){const _=_C(S.keyframes,b);if(_!==void 0){ln.update(()=>{S.onUpdate(_),S.onComplete()});return}}return b.isSync?new Gc(S):new r3(S)};function LC({protectedKeys:t,needsAnimating:i},a){const u=t.hasOwnProperty(a)&&i[a]!==!0;return i[a]=!1,u}function Yg(t,i,{delay:a=0,transitionOverride:u,type:m}={}){let{transition:x=t.getDefaultTransition(),transitionEnd:y,...b}=i;u&&(x=u);const v=[],C=m&&t.animationState&&t.animationState.getState()[m];for(const S in b){const T=t.getValue(S,t.latestValues[S]??null),_=b[S];if(_===void 0||C&&LC(C,S))continue;const M={delay:a,...Jf(x||{},S)},L=T.get();if(L!==void 0&&!T.isAnimating&&!Array.isArray(_)&&_===L&&!M.velocity)continue;let F=!1;if(window.MotionHandoffAnimation){const z=Xg(t);if(z){const V=window.MotionHandoffAnimation(z,S,ln);V!==null&&(M.startTime=V,F=!0)}}pf(t,S),T.start(dh(S,T,_,t.shouldReduceMotion&&fg.has(S)?{type:!1}:M,t,F));const j=T.animation;j&&v.push(j)}return y&&Promise.all(v).then(()=>{ln.update(()=>{y&&NC(t,y)})}),v}function $g(t,i,a,u=0,m=1){const x=Array.from(t).sort((C,S)=>C.sortNodePosition(S)).indexOf(i),y=t.size,b=(y-1)*u;return typeof a=="function"?a(x,y):m===1?x*u:b-x*u}function gf(t,i,a={}){var v;const u=Ho(t,i,a.type==="exit"?(v=t.presenceContext)==null?void 0:v.custom:void 0);let{transition:m=t.getDefaultTransition()||{}}=u||{};a.transitionOverride&&(m=a.transitionOverride);const x=u?()=>Promise.all(Yg(t,u,a)):()=>Promise.resolve(),y=t.variantChildren&&t.variantChildren.size?(C=0)=>{const{delayChildren:S=0,staggerChildren:T,staggerDirection:_}=m;return jC(t,i,C,S,T,_,a)}:()=>Promise.resolve(),{when:b}=m;if(b){const[C,S]=b==="beforeChildren"?[x,y]:[y,x];return C().then(()=>S())}else return Promise.all([x(),y(a.delay)])}function jC(t,i,a=0,u=0,m=0,x=1,y){const b=[];for(const v of t.variantChildren)v.notify("AnimationStart",i),b.push(gf(v,i,{...y,delay:a+(typeof u=="function"?0:u)+$g(t.variantChildren,v,u,m,x)}).then(()=>v.notify("AnimationComplete",i)));return Promise.all(b)}function BC(t,i,a={}){t.notify("AnimationStart",i);let u;if(Array.isArray(i)){const m=i.map(x=>gf(t,x,a));u=Promise.all(m)}else if(typeof i=="string")u=gf(t,i,a);else{const m=typeof i=="function"?Ho(t,i,a.custom):i;u=Promise.all(Yg(t,m,a))}return u.then(()=>{t.notify("AnimationComplete",i)})}function Zg(t,i){if(!Array.isArray(i))return!1;const a=i.length;if(a!==t.length)return!1;for(let u=0;u<a;u++)if(i[u]!==t[u])return!1;return!0}const FC=ih.length;function Kg(t){if(!t)return;if(!t.isControllingVariants){const a=t.parent?Kg(t.parent)||{}:{};return t.props.initial!==void 0&&(a.initial=t.props.initial),a}const i={};for(let a=0;a<FC;a++){const u=ih[a],m=t.props[u];(qa(m)||m===!1)&&(i[u]=m)}return i}const VC=[...rh].reverse(),UC=rh.length;function zC(t){return i=>Promise.all(i.map(({animation:a,options:u})=>BC(t,a,u)))}function WC(t){let i=zC(t),a=ym(),u=!0;const m=v=>(C,S)=>{var _;const T=Ho(t,S,v==="exit"?(_=t.presenceContext)==null?void 0:_.custom:void 0);if(T){const{transition:M,transitionEnd:L,...F}=T;C={...C,...F,...L}}return C};function x(v){i=v(t)}function y(v){const{props:C}=t,S=Kg(t.parent)||{},T=[],_=new Set;let M={},L=1/0;for(let j=0;j<UC;j++){const z=VC[j],V=a[z],B=C[z]!==void 0?C[z]:S[z],Y=qa(B),$=z===v?V.isActive:null;$===!1&&(L=j);let re=B===S[z]&&B!==C[z]&&Y;if(re&&u&&t.manuallyAnimateOnMount&&(re=!1),V.protectedKeys={...M},!V.isActive&&$===null||!B&&!V.prevProp||Yc(B)||typeof B=="boolean")continue;const G=HC(V.prevProp,B);let te=G||z===v&&V.isActive&&!re&&Y||j>L&&Y,J=!1;const ye=Array.isArray(B)?B:[B];let _e=ye.reduce(m(z),{});$===!1&&(_e={});const{prevResolvedValues:Ne={}}=V,Se={...Ne,..._e},Ee=ve=>{te=!0,_.has(ve)&&(J=!0,_.delete(ve)),V.needsAnimating[ve]=!0;const ge=t.getValue(ve);ge&&(ge.liveStyle=!1)};for(const ve in Se){const ge=_e[ve],De=Ne[ve];if(M.hasOwnProperty(ve))continue;let Ce=!1;mf(ge)&&mf(De)?Ce=!Zg(ge,De):Ce=ge!==De,Ce?ge!=null?Ee(ve):_.add(ve):ge!==void 0&&_.has(ve)?Ee(ve):V.protectedKeys[ve]=!0}V.prevProp=B,V.prevResolvedValues=_e,V.isActive&&(M={...M,..._e}),u&&t.blockInitialAnimation&&(te=!1);const Z=re&&G;te&&(!Z||J)&&T.push(...ye.map(ve=>{const ge={type:z};if(typeof ve=="string"&&u&&!Z&&t.manuallyAnimateOnMount&&t.parent){const{parent:De}=t,Ce=Ho(De,ve);if(De.enteringChildren&&Ce){const{delayChildren:K}=Ce.transition||{};ge.delay=$g(De.enteringChildren,t,K)}}return{animation:ve,options:ge}}))}if(_.size){const j={};if(typeof C.initial!="boolean"){const z=Ho(t,Array.isArray(C.initial)?C.initial[0]:C.initial);z&&z.transition&&(j.transition=z.transition)}_.forEach(z=>{const V=t.getBaseTarget(z),B=t.getValue(z);B&&(B.liveStyle=!0),j[z]=V??null}),T.push({animation:j})}let F=!!T.length;return u&&(C.initial===!1||C.initial===C.animate)&&!t.manuallyAnimateOnMount&&(F=!1),u=!1,F?i(T):Promise.resolve()}function b(v,C){var T;if(a[v].isActive===C)return Promise.resolve();(T=t.variantChildren)==null||T.forEach(_=>{var M;return(M=_.animationState)==null?void 0:M.setActive(v,C)}),a[v].isActive=C;const S=y(v);for(const _ in a)a[_].protectedKeys={};return S}return{animateChanges:y,setActive:b,setAnimateFunction:x,getState:()=>a,reset:()=>{a=ym(),u=!0}}}function HC(t,i){return typeof i=="string"?i!==t:Array.isArray(i)?!Zg(i,t):!1}function eo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ym(){return{animate:eo(!0),whileInView:eo(),whileHover:eo(),whileTap:eo(),whileDrag:eo(),whileFocus:eo(),exit:eo()}}class Ts{constructor(i){this.isMounted=!1,this.node=i}update(){}}class GC extends Ts{constructor(i){super(i),i.animationState||(i.animationState=WC(i))}updateAnimationControlsSubscription(){const{animate:i}=this.node.getProps();Yc(i)&&(this.unmountControls=i.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:i}=this.node.getProps(),{animate:a}=this.node.prevProps||{};i!==a&&this.updateAnimationControlsSubscription()}unmount(){var i;this.node.animationState.reset(),(i=this.unmountControls)==null||i.call(this)}}let XC=0;class YC extends Ts{constructor(){super(...arguments),this.id=XC++}update(){if(!this.node.presenceContext)return;const{isPresent:i,onExitComplete:a}=this.node.presenceContext,{isPresent:u}=this.node.prevPresenceContext||{};if(!this.node.animationState||i===u)return;const m=this.node.animationState.setActive("exit",!i);a&&!i&&m.then(()=>{a(this.id)})}mount(){const{register:i,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),i&&(this.unmount=i(this.id))}unmount(){}}const $C={animation:{Feature:GC},exit:{Feature:YC}};function Ja(t,i,a,u={passive:!0}){return t.addEventListener(i,a,u),()=>t.removeEventListener(i,a)}function ll(t){return{point:{x:t.pageX,y:t.pageY}}}const ZC=t=>i=>nh(i)&&t(i,ll(i));function za(t,i,a,u){return Ja(t,i,ZC(a),u)}const qg=1e-4,KC=1-qg,qC=1+qg,Qg=.01,QC=0-Qg,JC=0+Qg;function kr(t){return t.max-t.min}function eb(t,i,a){return Math.abs(t-i)<=a}function wm(t,i,a,u=.5){t.origin=u,t.originPoint=Sn(i.min,i.max,t.origin),t.scale=kr(a)/kr(i),t.translate=Sn(a.min,a.max,t.origin)-t.originPoint,(t.scale>=KC&&t.scale<=qC||isNaN(t.scale))&&(t.scale=1),(t.translate>=QC&&t.translate<=JC||isNaN(t.translate))&&(t.translate=0)}function Wa(t,i,a,u){wm(t.x,i.x,a.x,u?u.originX:void 0),wm(t.y,i.y,a.y,u?u.originY:void 0)}function vm(t,i,a){t.min=a.min+i.min,t.max=t.min+kr(i)}function tb(t,i,a){vm(t.x,i.x,a.x),vm(t.y,i.y,a.y)}function Cm(t,i,a){t.min=i.min-a.min,t.max=t.min+kr(i)}function Ha(t,i,a){Cm(t.x,i.x,a.x),Cm(t.y,i.y,a.y)}function ri(t){return[t("x"),t("y")]}const Jg=({current:t})=>t?t.ownerDocument.defaultView:null,bm=(t,i)=>Math.abs(t-i);function nb(t,i){const a=bm(t.x,i.x),u=bm(t.y,i.y);return Math.sqrt(a**2+u**2)}class ex{constructor(i,a,{transformPagePoint:u,contextWindow:m=window,dragSnapToOrigin:x=!1,distanceThreshold:y=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=jd(this.lastMoveEventInfo,this.history),M=this.startEvent!==null,L=nb(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!M&&!L)return;const{point:F}=_,{timestamp:j}=pr;this.history.push({...F,timestamp:j});const{onStart:z,onMove:V}=this.handlers;M||(z&&z(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),V&&V(this.lastMoveEvent,_)},this.handlePointerMove=(_,M)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=Ld(M,this.transformPagePoint),ln.update(this.updatePoint,!0)},this.handlePointerUp=(_,M)=>{this.end();const{onEnd:L,onSessionEnd:F,resumeAnimation:j}=this.handlers;if(this.dragSnapToOrigin&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const z=jd(_.type==="pointercancel"?this.lastMoveEventInfo:Ld(M,this.transformPagePoint),this.history);this.startEvent&&L&&L(_,z),F&&F(_,z)},!nh(i))return;this.dragSnapToOrigin=x,this.handlers=a,this.transformPagePoint=u,this.distanceThreshold=y,this.contextWindow=m||window;const b=ll(i),v=Ld(b,this.transformPagePoint),{point:C}=v,{timestamp:S}=pr;this.history=[{...C,timestamp:S}];const{onSessionStart:T}=a;T&&T(i,jd(v,this.history)),this.removeListeners=il(za(this.contextWindow,"pointermove",this.handlePointerMove),za(this.contextWindow,"pointerup",this.handlePointerUp),za(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(i){this.handlers=i}end(){this.removeListeners&&this.removeListeners(),Ki(this.updatePoint)}}function Ld(t,i){return i?{point:i(t.point)}:t}function Em(t,i){return{x:t.x-i.x,y:t.y-i.y}}function jd({point:t},i){return{point:t,delta:Em(t,tx(i)),offset:Em(t,rb(i)),velocity:ib(i,.1)}}function rb(t){return t[0]}function tx(t){return t[t.length-1]}function ib(t,i){if(t.length<2)return{x:0,y:0};let a=t.length-1,u=null;const m=tx(t);for(;a>=0&&(u=t[a],!(m.timestamp-u.timestamp>Ni(i)));)a--;if(!u)return{x:0,y:0};const x=Ti(m.timestamp-u.timestamp);if(x===0)return{x:0,y:0};const y={x:(m.x-u.x)/x,y:(m.y-u.y)/x};return y.x===1/0&&(y.x=0),y.y===1/0&&(y.y=0),y}function sb(t,{min:i,max:a},u){return i!==void 0&&t<i?t=u?Sn(i,t,u.min):Math.max(t,i):a!==void 0&&t>a&&(t=u?Sn(a,t,u.max):Math.min(t,a)),t}function Sm(t,i,a){return{min:i!==void 0?t.min+i:void 0,max:a!==void 0?t.max+a-(t.max-t.min):void 0}}function ob(t,{top:i,left:a,bottom:u,right:m}){return{x:Sm(t.x,a,m),y:Sm(t.y,i,u)}}function Am(t,i){let a=i.min-t.min,u=i.max-t.max;return i.max-i.min<t.max-t.min&&([a,u]=[u,a]),{min:a,max:u}}function ab(t,i){return{x:Am(t.x,i.x),y:Am(t.y,i.y)}}function lb(t,i){let a=.5;const u=kr(t),m=kr(i);return m>u?a=$a(i.min,i.max-u,t.min):u>m&&(a=$a(t.min,t.max-m,i.min)),$i(0,1,a)}function cb(t,i){const a={};return i.min!==void 0&&(a.min=i.min-t.min),i.max!==void 0&&(a.max=i.max-t.min),a}const xf=.35;function ub(t=xf){return t===!1?t=0:t===!0&&(t=xf),{x:Nm(t,"left","right"),y:Nm(t,"top","bottom")}}function Nm(t,i,a){return{min:Tm(t,i),max:Tm(t,a)}}function Tm(t,i){return typeof t=="number"?t:t[i]||0}const db=new WeakMap;class fb{constructor(i){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=jn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=i}start(i,{snapToCursor:a=!1,distanceThreshold:u}={}){const{presenceContext:m}=this.visualElement;if(m&&m.isPresent===!1)return;const x=T=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(ll(T).point)},y=(T,_)=>{const{drag:M,dragPropagation:L,onDragStart:F}=this.getProps();if(M&&!L&&(this.openDragLock&&this.openDragLock(),this.openDragLock=y3(M),!this.openDragLock))return;this.latestPointerEvent=T,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ri(z=>{let V=this.getAxisMotionValue(z).get()||0;if(Ii.test(V)){const{projection:B}=this.visualElement;if(B&&B.layout){const Y=B.layout.layoutBox[z];Y&&(V=kr(Y)*(parseFloat(V)/100))}}this.originPoint[z]=V}),F&&ln.postRender(()=>F(T,_)),pf(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},b=(T,_)=>{this.latestPointerEvent=T,this.latestPanInfo=_;const{dragPropagation:M,dragDirectionLock:L,onDirectionLock:F,onDrag:j}=this.getProps();if(!M&&!this.openDragLock)return;const{offset:z}=_;if(L&&this.currentDirection===null){this.currentDirection=hb(z),this.currentDirection!==null&&F&&F(this.currentDirection);return}this.updateAxis("x",_.point,z),this.updateAxis("y",_.point,z),this.visualElement.render(),j&&j(T,_)},v=(T,_)=>{this.latestPointerEvent=T,this.latestPanInfo=_,this.stop(T,_),this.latestPointerEvent=null,this.latestPanInfo=null},C=()=>ri(T=>{var _;return this.getAnimationState(T)==="paused"&&((_=this.getAxisMotionValue(T).animation)==null?void 0:_.play())}),{dragSnapToOrigin:S}=this.getProps();this.panSession=new ex(i,{onSessionStart:x,onStart:y,onMove:b,onSessionEnd:v,resumeAnimation:C},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:S,distanceThreshold:u,contextWindow:Jg(this.visualElement)})}stop(i,a){const u=i||this.latestPointerEvent,m=a||this.latestPanInfo,x=this.isDragging;if(this.cancel(),!x||!m||!u)return;const{velocity:y}=m;this.startAnimation(y);const{onDragEnd:b}=this.getProps();b&&ln.postRender(()=>b(u,m))}cancel(){this.isDragging=!1;const{projection:i,animationState:a}=this.visualElement;i&&(i.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:u}=this.getProps();!u&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(i,a,u){const{drag:m}=this.getProps();if(!u||!pc(i,m,this.currentDirection))return;const x=this.getAxisMotionValue(i);let y=this.originPoint[i]+u[i];this.constraints&&this.constraints[i]&&(y=sb(y,this.constraints[i],this.elastic[i])),x.set(y)}resolveConstraints(){var x;const{dragConstraints:i,dragElastic:a}=this.getProps(),u=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(x=this.visualElement.projection)==null?void 0:x.layout,m=this.constraints;i&&Fo(i)?this.constraints||(this.constraints=this.resolveRefConstraints()):i&&u?this.constraints=ob(u.layoutBox,i):this.constraints=!1,this.elastic=ub(a),m!==this.constraints&&u&&this.constraints&&!this.hasMutatedConstraints&&ri(y=>{this.constraints!==!1&&this.getAxisMotionValue(y)&&(this.constraints[y]=cb(u.layoutBox[y],this.constraints[y]))})}resolveRefConstraints(){const{dragConstraints:i,onMeasureDragConstraints:a}=this.getProps();if(!i||!Fo(i))return!1;const u=i.current,{projection:m}=this.visualElement;if(!m||!m.layout)return!1;const x=mC(u,m.root,this.visualElement.getTransformPagePoint());let y=ab(m.layout.layoutBox,x);if(a){const b=a(dC(y));this.hasMutatedConstraints=!!b,b&&(y=Bg(b))}return y}startAnimation(i){const{drag:a,dragMomentum:u,dragElastic:m,dragTransition:x,dragSnapToOrigin:y,onDragTransitionEnd:b}=this.getProps(),v=this.constraints||{},C=ri(S=>{if(!pc(S,a,this.currentDirection))return;let T=v&&v[S]||{};y&&(T={min:0,max:0});const _=m?200:1e6,M=m?40:1e7,L={type:"inertia",velocity:u?i[S]:0,bounceStiffness:_,bounceDamping:M,timeConstant:750,restDelta:1,restSpeed:10,...x,...T};return this.startAxisValueAnimation(S,L)});return Promise.all(C).then(b)}startAxisValueAnimation(i,a){const u=this.getAxisMotionValue(i);return pf(this.visualElement,i),u.start(dh(i,u,0,a,this.visualElement,!1))}stopAnimation(){ri(i=>this.getAxisMotionValue(i).stop())}pauseAnimation(){ri(i=>{var a;return(a=this.getAxisMotionValue(i).animation)==null?void 0:a.pause()})}getAnimationState(i){var a;return(a=this.getAxisMotionValue(i).animation)==null?void 0:a.state}getAxisMotionValue(i){const a=`_drag${i.toUpperCase()}`,u=this.visualElement.getProps(),m=u[a];return m||this.visualElement.getValue(i,(u.initial?u.initial[i]:void 0)||0)}snapToCursor(i){ri(a=>{const{drag:u}=this.getProps();if(!pc(a,u,this.currentDirection))return;const{projection:m}=this.visualElement,x=this.getAxisMotionValue(a);if(m&&m.layout){const{min:y,max:b}=m.layout.layoutBox[a];x.set(i[a]-Sn(y,b,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:i,dragConstraints:a}=this.getProps(),{projection:u}=this.visualElement;if(!Fo(a)||!u||!this.constraints)return;this.stopAnimation();const m={x:0,y:0};ri(y=>{const b=this.getAxisMotionValue(y);if(b&&this.constraints!==!1){const v=b.get();m[y]=lb({min:v,max:v},this.constraints[y])}});const{transformTemplate:x}=this.visualElement.getProps();this.visualElement.current.style.transform=x?x({},""):"none",u.root&&u.root.updateScroll(),u.updateLayout(),this.resolveConstraints(),ri(y=>{if(!pc(y,i,null))return;const b=this.getAxisMotionValue(y),{min:v,max:C}=this.constraints[y];b.set(Sn(v,C,m[y]))})}addListeners(){if(!this.visualElement.current)return;db.set(this.visualElement,this);const i=this.visualElement.current,a=za(i,"pointerdown",v=>{const{drag:C,dragListener:S=!0}=this.getProps();C&&S&&this.start(v)}),u=()=>{const{dragConstraints:v}=this.getProps();Fo(v)&&v.current&&(this.constraints=this.resolveRefConstraints())},{projection:m}=this.visualElement,x=m.addEventListener("measure",u);m&&!m.layout&&(m.root&&m.root.updateScroll(),m.updateLayout()),ln.read(u);const y=Ja(window,"resize",()=>this.scalePositionWithinConstraints()),b=m.addEventListener("didUpdate",({delta:v,hasLayoutChanged:C})=>{this.isDragging&&C&&(ri(S=>{const T=this.getAxisMotionValue(S);T&&(this.originPoint[S]+=v[S].translate,T.set(T.get()+v[S].translate))}),this.visualElement.render())});return()=>{y(),a(),x(),b&&b()}}getProps(){const i=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:u=!1,dragPropagation:m=!1,dragConstraints:x=!1,dragElastic:y=xf,dragMomentum:b=!0}=i;return{...i,drag:a,dragDirectionLock:u,dragPropagation:m,dragConstraints:x,dragElastic:y,dragMomentum:b}}}function pc(t,i,a){return(i===!0||i===t)&&(a===null||a===t)}function hb(t,i=10){let a=null;return Math.abs(t.y)>i?a="y":Math.abs(t.x)>i&&(a="x"),a}class mb extends Ts{constructor(i){super(i),this.removeGroupControls=ii,this.removeListeners=ii,this.controls=new fb(i)}mount(){const{dragControls:i}=this.node.getProps();i&&(this.removeGroupControls=i.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ii}unmount(){this.removeGroupControls(),this.removeListeners()}}const Im=t=>(i,a)=>{t&&ln.postRender(()=>t(i,a))};class pb extends Ts{constructor(){super(...arguments),this.removePointerDownListener=ii}onPointerDown(i){this.session=new ex(i,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Jg(this.node)})}createPanHandlers(){const{onPanSessionStart:i,onPanStart:a,onPan:u,onPanEnd:m}=this.node.getProps();return{onSessionStart:Im(i),onStart:Im(a),onMove:u,onEnd:(x,y)=>{delete this.session,m&&ln.postRender(()=>m(x,y))}}}mount(){this.removePointerDownListener=za(this.node.current,"pointerdown",i=>this.onPointerDown(i))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Sc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function _m(t,i){return i.max===i.min?0:t/(i.max-i.min)*100}const La={correct:(t,i)=>{if(!i.target)return t;if(typeof t=="string")if(bt.test(t))t=parseFloat(t);else return t;const a=_m(t,i.target.x),u=_m(t,i.target.y);return`${a}% ${u}%`}},gb={correct:(t,{treeScale:i,projectionDelta:a})=>{const u=t,m=Ns.parse(t);if(m.length>5)return u;const x=Ns.createTransformer(t),y=typeof m[0]!="number"?1:0,b=a.x.scale*i.x,v=a.y.scale*i.y;m[0+y]/=b,m[1+y]/=v;const C=Sn(b,v,.5);return typeof m[2+y]=="number"&&(m[2+y]/=C),typeof m[3+y]=="number"&&(m[3+y]/=C),x(m)}};let Bd=!1;class xb extends N.Component{componentDidMount(){const{visualElement:i,layoutGroup:a,switchLayoutGroup:u,layoutId:m}=this.props,{projection:x}=i;F3(yb),x&&(a.group&&a.group.add(x),u&&u.register&&m&&u.register(x),Bd&&x.root.didUpdate(),x.addEventListener("animationComplete",()=>{this.safeToRemove()}),x.setOptions({...x.options,onExitComplete:()=>this.safeToRemove()})),Sc.hasEverUpdated=!0}getSnapshotBeforeUpdate(i){const{layoutDependency:a,visualElement:u,drag:m,isPresent:x}=this.props,{projection:y}=u;return y&&(y.isPresent=x,Bd=!0,m||i.layoutDependency!==a||a===void 0||i.isPresent!==x?y.willUpdate():this.safeToRemove(),i.isPresent!==x&&(x?y.promote():y.relegate()||ln.postRender(()=>{const b=y.getStack();(!b||!b.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:i}=this.props.visualElement;i&&(i.root.didUpdate(),th.postRender(()=>{!i.currentAnimation&&i.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:i,layoutGroup:a,switchLayoutGroup:u}=this.props,{projection:m}=i;Bd=!0,m&&(m.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(m),u&&u.deregister&&u.deregister(m))}safeToRemove(){const{safeToRemove:i}=this.props;i&&i()}render(){return null}}function nx(t){const[i,a]=Sg(),u=N.useContext(Of);return h.jsx(xb,{...t,layoutGroup:u,switchLayoutGroup:N.useContext(Lg),isPresent:i,safeToRemove:a})}const yb={borderRadius:{...La,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:La,borderTopRightRadius:La,borderBottomLeftRadius:La,borderBottomRightRadius:La,boxShadow:gb};function wb(t,i,a){const u=lr(t)?t:ao(t);return u.start(dh("",u,i,a)),u.animation}const vb=(t,i)=>t.depth-i.depth;class Cb{constructor(){this.children=[],this.isDirty=!1}add(i){jf(this.children,i),this.isDirty=!0}remove(i){Bf(this.children,i),this.isDirty=!0}forEach(i){this.isDirty&&this.children.sort(vb),this.isDirty=!1,this.children.forEach(i)}}function bb(t,i){const a=Fr.now(),u=({timestamp:m})=>{const x=m-a;x>=i&&(Ki(u),t(x-i))};return ln.setup(u,!0),()=>Ki(u)}const rx=["TopLeft","TopRight","BottomLeft","BottomRight"],Eb=rx.length,Rm=t=>typeof t=="string"?parseFloat(t):t,km=t=>typeof t=="number"||bt.test(t);function Sb(t,i,a,u,m,x){m?(t.opacity=Sn(0,a.opacity??1,Ab(u)),t.opacityExit=Sn(i.opacity??1,0,Nb(u))):x&&(t.opacity=Sn(i.opacity??1,a.opacity??1,u));for(let y=0;y<Eb;y++){const b=`border${rx[y]}Radius`;let v=Pm(i,b),C=Pm(a,b);if(v===void 0&&C===void 0)continue;v||(v=0),C||(C=0),v===0||C===0||km(v)===km(C)?(t[b]=Math.max(Sn(Rm(v),Rm(C),u),0),(Ii.test(C)||Ii.test(v))&&(t[b]+="%")):t[b]=C}(i.rotate||a.rotate)&&(t.rotate=Sn(i.rotate||0,a.rotate||0,u))}function Pm(t,i){return t[i]!==void 0?t[i]:t.borderRadius}const Ab=ix(0,.5,zp),Nb=ix(.5,.95,ii);function ix(t,i,a){return u=>u<t?0:u>i?1:a($a(t,i,u))}function Mm(t,i){t.min=i.min,t.max=i.max}function ni(t,i){Mm(t.x,i.x),Mm(t.y,i.y)}function Om(t,i){t.translate=i.translate,t.scale=i.scale,t.originPoint=i.originPoint,t.origin=i.origin}function Dm(t,i,a,u,m){return t-=i,t=Mc(t,1/a,u),m!==void 0&&(t=Mc(t,1/m,u)),t}function Tb(t,i=0,a=1,u=.5,m,x=t,y=t){if(Ii.test(i)&&(i=parseFloat(i),i=Sn(y.min,y.max,i/100)-y.min),typeof i!="number")return;let b=Sn(x.min,x.max,u);t===x&&(b-=i),t.min=Dm(t.min,i,a,b,m),t.max=Dm(t.max,i,a,b,m)}function Lm(t,i,[a,u,m],x,y){Tb(t,i[a],i[u],i[m],i.scale,x,y)}const Ib=["x","scaleX","originX"],_b=["y","scaleY","originY"];function jm(t,i,a,u){Lm(t.x,i,Ib,a?a.x:void 0,u?u.x:void 0),Lm(t.y,i,_b,a?a.y:void 0,u?u.y:void 0)}function Bm(t){return t.translate===0&&t.scale===1}function sx(t){return Bm(t.x)&&Bm(t.y)}function Fm(t,i){return t.min===i.min&&t.max===i.max}function Rb(t,i){return Fm(t.x,i.x)&&Fm(t.y,i.y)}function Vm(t,i){return Math.round(t.min)===Math.round(i.min)&&Math.round(t.max)===Math.round(i.max)}function ox(t,i){return Vm(t.x,i.x)&&Vm(t.y,i.y)}function Um(t){return kr(t.x)/kr(t.y)}function zm(t,i){return t.translate===i.translate&&t.scale===i.scale&&t.originPoint===i.originPoint}class kb{constructor(){this.members=[]}add(i){jf(this.members,i),i.scheduleRender()}remove(i){if(Bf(this.members,i),i===this.prevLead&&(this.prevLead=void 0),i===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(i){const a=this.members.findIndex(m=>i===m);if(a===0)return!1;let u;for(let m=a;m>=0;m--){const x=this.members[m];if(x.isPresent!==!1){u=x;break}}return u?(this.promote(u),!0):!1}promote(i,a){const u=this.lead;if(i!==u&&(this.prevLead=u,this.lead=i,i.show(),u)){u.instance&&u.scheduleRender(),i.scheduleRender(),i.resumeFrom=u,a&&(i.resumeFrom.preserveOpacity=!0),u.snapshot&&(i.snapshot=u.snapshot,i.snapshot.latestValues=u.animationValues||u.latestValues),i.root&&i.root.isUpdating&&(i.isLayoutDirty=!0);const{crossfade:m}=i.options;m===!1&&u.hide()}}exitAnimationComplete(){this.members.forEach(i=>{const{options:a,resumingFrom:u}=i;a.onExitComplete&&a.onExitComplete(),u&&u.options.onExitComplete&&u.options.onExitComplete()})}scheduleRender(){this.members.forEach(i=>{i.instance&&i.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Pb(t,i,a){let u="";const m=t.x.translate/i.x,x=t.y.translate/i.y,y=(a==null?void 0:a.z)||0;if((m||x||y)&&(u=`translate3d(${m}px, ${x}px, ${y}px) `),(i.x!==1||i.y!==1)&&(u+=`scale(${1/i.x}, ${1/i.y}) `),a){const{transformPerspective:C,rotate:S,rotateX:T,rotateY:_,skewX:M,skewY:L}=a;C&&(u=`perspective(${C}px) ${u}`),S&&(u+=`rotate(${S}deg) `),T&&(u+=`rotateX(${T}deg) `),_&&(u+=`rotateY(${_}deg) `),M&&(u+=`skewX(${M}deg) `),L&&(u+=`skewY(${L}deg) `)}const b=t.x.scale*i.x,v=t.y.scale*i.y;return(b!==1||v!==1)&&(u+=`scale(${b}, ${v})`),u||"none"}const Fd=["","X","Y","Z"],Mb=1e3;let Ob=0;function Vd(t,i,a,u){const{latestValues:m}=i;m[t]&&(a[t]=m[t],i.setStaticValue(t,0),u&&(u[t]=0))}function ax(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:i}=t.options;if(!i)return;const a=Xg(i);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:m,layoutId:x}=t.options;window.MotionCancelOptimisedAnimation(a,"transform",ln,!(m||x))}const{parent:u}=t;u&&!u.hasCheckedOptimisedAppear&&ax(u)}function lx({attachResizeListener:t,defaultParent:i,measureScroll:a,checkIsScrollRoot:u,resetTransform:m}){return class{constructor(y={},b=i==null?void 0:i()){this.id=Ob++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(jb),this.nodes.forEach(Ub),this.nodes.forEach(zb),this.nodes.forEach(Bb)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=y,this.root=b?b.root||b:this,this.path=b?[...b.path,b]:[],this.parent=b,this.depth=b?b.depth+1:0;for(let v=0;v<this.path.length;v++)this.path[v].shouldResetTransform=!0;this.root===this&&(this.nodes=new Cb)}addEventListener(y,b){return this.eventHandlers.has(y)||this.eventHandlers.set(y,new Uf),this.eventHandlers.get(y).add(b)}notifyListeners(y,...b){const v=this.eventHandlers.get(y);v&&v.notify(...b)}hasListeners(y){return this.eventHandlers.has(y)}mount(y){if(this.instance)return;this.isSVG=Eg(y)&&!S3(y),this.instance=y;const{layoutId:b,layout:v,visualElement:C}=this.options;if(C&&!C.current&&C.mount(y),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(v||b)&&(this.isLayoutDirty=!0),t){let S,T=0;const _=()=>this.root.updateBlockedByResize=!1;ln.read(()=>{T=window.innerWidth}),t(y,()=>{const M=window.innerWidth;M!==T&&(T=M,this.root.updateBlockedByResize=!0,S&&S(),S=bb(_,250),Sc.hasAnimatedSinceResize&&(Sc.hasAnimatedSinceResize=!1,this.nodes.forEach(Gm)))})}b&&this.root.registerSharedNode(b,this),this.options.animate!==!1&&C&&(b||v)&&this.addEventListener("didUpdate",({delta:S,hasLayoutChanged:T,hasRelativeLayoutChanged:_,layout:M})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const L=this.options.transition||C.getDefaultTransition()||Yb,{onLayoutAnimationStart:F,onLayoutAnimationComplete:j}=C.getProps(),z=!this.targetLayout||!ox(this.targetLayout,M),V=!T&&_;if(this.options.layoutRoot||this.resumeFrom||V||T&&(z||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const B={...Jf(L,"layout"),onPlay:F,onComplete:j};(C.shouldReduceMotion||this.options.layoutRoot)&&(B.delay=0,B.type=!1),this.startAnimation(B),this.setAnimationOrigin(S,V)}else T||Gm(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=M})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const y=this.getStack();y&&y.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ki(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Wb),this.animationId++)}getTransformTemplate(){const{visualElement:y}=this.options;return y&&y.getProps().transformTemplate}willUpdate(y=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ax(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let S=0;S<this.path.length;S++){const T=this.path[S];T.shouldResetTransform=!0,T.updateScroll("snapshot"),T.options.layoutRoot&&T.willUpdate(!1)}const{layoutId:b,layout:v}=this.options;if(b===void 0&&!v)return;const C=this.getTransformTemplate();this.prevTransformTemplateValue=C?C(this.latestValues,""):void 0,this.updateSnapshot(),y&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Wm);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Hm);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Vb),this.nodes.forEach(Db),this.nodes.forEach(Lb)):this.nodes.forEach(Hm),this.clearAllSnapshots();const b=Fr.now();pr.delta=$i(0,1e3/60,b-pr.timestamp),pr.timestamp=b,pr.isProcessing=!0,_d.update.process(pr),_d.preRender.process(pr),_d.render.process(pr),pr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,th.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Fb),this.sharedNodes.forEach(Hb)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ln.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ln.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!kr(this.snapshot.measuredBox.x)&&!kr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let v=0;v<this.path.length;v++)this.path[v].updateScroll();const y=this.layout;this.layout=this.measure(!1),this.layoutCorrected=jn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:b}=this.options;b&&b.notify("LayoutMeasure",this.layout.layoutBox,y?y.layoutBox:void 0)}updateScroll(y="measure"){let b=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===y&&(b=!1),b&&this.instance){const v=u(this.instance);this.scroll={animationId:this.root.animationId,phase:y,isRoot:v,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:v}}}resetTransform(){if(!m)return;const y=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,b=this.projectionDelta&&!sx(this.projectionDelta),v=this.getTransformTemplate(),C=v?v(this.latestValues,""):void 0,S=C!==this.prevTransformTemplateValue;y&&this.instance&&(b||to(this.latestValues)||S)&&(m(this.instance,C),this.shouldResetTransform=!1,this.scheduleRender())}measure(y=!0){const b=this.measurePageBox();let v=this.removeElementScroll(b);return y&&(v=this.removeTransform(v)),$b(v),{animationId:this.root.animationId,measuredBox:b,layoutBox:v,latestValues:{},source:this.id}}measurePageBox(){var C;const{visualElement:y}=this.options;if(!y)return jn();const b=y.measureViewportBox();if(!(((C=this.scroll)==null?void 0:C.wasRoot)||this.path.some(Zb))){const{scroll:S}=this.root;S&&(Vo(b.x,S.offset.x),Vo(b.y,S.offset.y))}return b}removeElementScroll(y){var v;const b=jn();if(ni(b,y),(v=this.scroll)!=null&&v.wasRoot)return b;for(let C=0;C<this.path.length;C++){const S=this.path[C],{scroll:T,options:_}=S;S!==this.root&&T&&_.layoutScroll&&(T.wasRoot&&ni(b,y),Vo(b.x,T.offset.x),Vo(b.y,T.offset.y))}return b}applyTransform(y,b=!1){const v=jn();ni(v,y);for(let C=0;C<this.path.length;C++){const S=this.path[C];!b&&S.options.layoutScroll&&S.scroll&&S!==S.root&&Uo(v,{x:-S.scroll.offset.x,y:-S.scroll.offset.y}),to(S.latestValues)&&Uo(v,S.latestValues)}return to(this.latestValues)&&Uo(v,this.latestValues),v}removeTransform(y){const b=jn();ni(b,y);for(let v=0;v<this.path.length;v++){const C=this.path[v];if(!C.instance||!to(C.latestValues))continue;df(C.latestValues)&&C.updateSnapshot();const S=jn(),T=C.measurePageBox();ni(S,T),jm(b,C.latestValues,C.snapshot?C.snapshot.layoutBox:void 0,S)}return to(this.latestValues)&&jm(b,this.latestValues),b}setTargetDelta(y){this.targetDelta=y,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(y){this.options={...this.options,...y,crossfade:y.crossfade!==void 0?y.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==pr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(y=!1){var _;const b=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=b.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=b.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=b.isSharedProjectionDirty);const v=!!this.resumingFrom||this!==b;if(!(y||v&&this.isSharedProjectionDirty||this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:S,layoutId:T}=this.options;if(!(!this.layout||!(S||T))){if(this.resolvedRelativeTargetAt=pr.timestamp,!this.targetDelta&&!this.relativeTarget){const M=this.getClosestProjectingParent();M&&M.layout&&this.animationProgress!==1?(this.relativeParent=M,this.forceRelativeParentToResolveTarget(),this.relativeTarget=jn(),this.relativeTargetOrigin=jn(),Ha(this.relativeTargetOrigin,this.layout.layoutBox,M.layout.layoutBox),ni(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=jn(),this.targetWithTransforms=jn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),tb(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ni(this.target,this.layout.layoutBox),Vg(this.target,this.targetDelta)):ni(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const M=this.getClosestProjectingParent();M&&!!M.resumingFrom==!!this.resumingFrom&&!M.options.layoutScroll&&M.target&&this.animationProgress!==1?(this.relativeParent=M,this.forceRelativeParentToResolveTarget(),this.relativeTarget=jn(),this.relativeTargetOrigin=jn(),Ha(this.relativeTargetOrigin,this.target,M.target),ni(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||df(this.parent.latestValues)||Fg(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var L;const y=this.getLead(),b=!!this.resumingFrom||this!==y;let v=!0;if((this.isProjectionDirty||(L=this.parent)!=null&&L.isProjectionDirty)&&(v=!1),b&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(v=!1),this.resolvedRelativeTargetAt===pr.timestamp&&(v=!1),v)return;const{layout:C,layoutId:S}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(C||S))return;ni(this.layoutCorrected,this.layout.layoutBox);const T=this.treeScale.x,_=this.treeScale.y;hC(this.layoutCorrected,this.treeScale,this.path,b),y.layout&&!y.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(y.target=y.layout.layoutBox,y.targetWithTransforms=jn());const{target:M}=y;if(!M){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Om(this.prevProjectionDelta.x,this.projectionDelta.x),Om(this.prevProjectionDelta.y,this.projectionDelta.y)),Wa(this.projectionDelta,this.layoutCorrected,M,this.latestValues),(this.treeScale.x!==T||this.treeScale.y!==_||!zm(this.projectionDelta.x,this.prevProjectionDelta.x)||!zm(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",M))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(y=!0){var b;if((b=this.options.visualElement)==null||b.scheduleRender(),y){const v=this.getStack();v&&v.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=zo(),this.projectionDelta=zo(),this.projectionDeltaWithTransform=zo()}setAnimationOrigin(y,b=!1){const v=this.snapshot,C=v?v.latestValues:{},S={...this.latestValues},T=zo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!b;const _=jn(),M=v?v.source:void 0,L=this.layout?this.layout.source:void 0,F=M!==L,j=this.getStack(),z=!j||j.members.length<=1,V=!!(F&&!z&&this.options.crossfade===!0&&!this.path.some(Xb));this.animationProgress=0;let B;this.mixTargetDelta=Y=>{const $=Y/1e3;Xm(T.x,y.x,$),Xm(T.y,y.y,$),this.setTargetDelta(T),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ha(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Gb(this.relativeTarget,this.relativeTargetOrigin,_,$),B&&Rb(this.relativeTarget,B)&&(this.isProjectionDirty=!1),B||(B=jn()),ni(B,this.relativeTarget)),F&&(this.animationValues=S,Sb(S,C,this.latestValues,$,V,z)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=$},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(y){var b,v,C;this.notifyListeners("animationStart"),(b=this.currentAnimation)==null||b.stop(),(C=(v=this.resumingFrom)==null?void 0:v.currentAnimation)==null||C.stop(),this.pendingAnimation&&(Ki(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ln.update(()=>{Sc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ao(0)),this.currentAnimation=wb(this.motionValue,[0,1e3],{...y,velocity:0,isSync:!0,onUpdate:S=>{this.mixTargetDelta(S),y.onUpdate&&y.onUpdate(S)},onStop:()=>{},onComplete:()=>{y.onComplete&&y.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const y=this.getStack();y&&y.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Mb),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const y=this.getLead();let{targetWithTransforms:b,target:v,layout:C,latestValues:S}=y;if(!(!b||!v||!C)){if(this!==y&&this.layout&&C&&cx(this.options.animationType,this.layout.layoutBox,C.layoutBox)){v=this.target||jn();const T=kr(this.layout.layoutBox.x);v.x.min=y.target.x.min,v.x.max=v.x.min+T;const _=kr(this.layout.layoutBox.y);v.y.min=y.target.y.min,v.y.max=v.y.min+_}ni(b,v),Uo(b,S),Wa(this.projectionDeltaWithTransform,this.layoutCorrected,b,S)}}registerSharedNode(y,b){this.sharedNodes.has(y)||this.sharedNodes.set(y,new kb),this.sharedNodes.get(y).add(b);const C=b.options.initialPromotionConfig;b.promote({transition:C?C.transition:void 0,preserveFollowOpacity:C&&C.shouldPreserveFollowOpacity?C.shouldPreserveFollowOpacity(b):void 0})}isLead(){const y=this.getStack();return y?y.lead===this:!0}getLead(){var b;const{layoutId:y}=this.options;return y?((b=this.getStack())==null?void 0:b.lead)||this:this}getPrevLead(){var b;const{layoutId:y}=this.options;return y?(b=this.getStack())==null?void 0:b.prevLead:void 0}getStack(){const{layoutId:y}=this.options;if(y)return this.root.sharedNodes.get(y)}promote({needsReset:y,transition:b,preserveFollowOpacity:v}={}){const C=this.getStack();C&&C.promote(this,v),y&&(this.projectionDelta=void 0,this.needsReset=!0),b&&this.setOptions({transition:b})}relegate(){const y=this.getStack();return y?y.relegate(this):!1}resetSkewAndRotation(){const{visualElement:y}=this.options;if(!y)return;let b=!1;const{latestValues:v}=y;if((v.z||v.rotate||v.rotateX||v.rotateY||v.rotateZ||v.skewX||v.skewY)&&(b=!0),!b)return;const C={};v.z&&Vd("z",y,C,this.animationValues);for(let S=0;S<Fd.length;S++)Vd(`rotate${Fd[S]}`,y,C,this.animationValues),Vd(`skew${Fd[S]}`,y,C,this.animationValues);y.render();for(const S in C)y.setStaticValue(S,C[S]),this.animationValues&&(this.animationValues[S]=C[S]);y.scheduleRender()}applyProjectionStyles(y,b){if(!this.instance||this.isSVG)return;if(!this.isVisible){y.visibility="hidden";return}const v=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,y.visibility="",y.opacity="",y.pointerEvents=Ec(b==null?void 0:b.pointerEvents)||"",y.transform=v?v(this.latestValues,""):"none";return}const C=this.getLead();if(!this.projectionDelta||!this.layout||!C.target){this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=Ec(b==null?void 0:b.pointerEvents)||""),this.hasProjected&&!to(this.latestValues)&&(y.transform=v?v({},""):"none",this.hasProjected=!1);return}y.visibility="";const S=C.animationValues||C.latestValues;this.applyTransformsToTarget();let T=Pb(this.projectionDeltaWithTransform,this.treeScale,S);v&&(T=v(S,T)),y.transform=T;const{x:_,y:M}=this.projectionDelta;y.transformOrigin=`${_.origin*100}% ${M.origin*100}% 0`,C.animationValues?y.opacity=C===this?S.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:S.opacityExit:y.opacity=C===this?S.opacity!==void 0?S.opacity:"":S.opacityExit!==void 0?S.opacityExit:0;for(const L in Qa){if(S[L]===void 0)continue;const{correct:F,applyTo:j,isCSSVariable:z}=Qa[L],V=T==="none"?S[L]:F(S[L],C);if(j){const B=j.length;for(let Y=0;Y<B;Y++)y[j[Y]]=V}else z?this.options.visualElement.renderState.vars[L]=V:y[L]=V}this.options.layoutId&&(y.pointerEvents=C===this?Ec(b==null?void 0:b.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(y=>{var b;return(b=y.currentAnimation)==null?void 0:b.stop()}),this.root.nodes.forEach(Wm),this.root.sharedNodes.clear()}}}function Db(t){t.updateLayout()}function Lb(t){var a;const i=((a=t.resumeFrom)==null?void 0:a.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&i&&t.hasListeners("didUpdate")){const{layoutBox:u,measuredBox:m}=t.layout,{animationType:x}=t.options,y=i.source!==t.layout.source;x==="size"?ri(T=>{const _=y?i.measuredBox[T]:i.layoutBox[T],M=kr(_);_.min=u[T].min,_.max=_.min+M}):cx(x,i.layoutBox,u)&&ri(T=>{const _=y?i.measuredBox[T]:i.layoutBox[T],M=kr(u[T]);_.max=_.min+M,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[T].max=t.relativeTarget[T].min+M)});const b=zo();Wa(b,u,i.layoutBox);const v=zo();y?Wa(v,t.applyTransform(m,!0),i.measuredBox):Wa(v,u,i.layoutBox);const C=!sx(b);let S=!1;if(!t.resumeFrom){const T=t.getClosestProjectingParent();if(T&&!T.resumeFrom){const{snapshot:_,layout:M}=T;if(_&&M){const L=jn();Ha(L,i.layoutBox,_.layoutBox);const F=jn();Ha(F,u,M.layoutBox),ox(L,F)||(S=!0),T.options.layoutRoot&&(t.relativeTarget=F,t.relativeTargetOrigin=L,t.relativeParent=T)}}}t.notifyListeners("didUpdate",{layout:u,snapshot:i,delta:v,layoutDelta:b,hasLayoutChanged:C,hasRelativeLayoutChanged:S})}else if(t.isLead()){const{onExitComplete:u}=t.options;u&&u()}t.options.transition=void 0}function jb(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Bb(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Fb(t){t.clearSnapshot()}function Wm(t){t.clearMeasurements()}function Hm(t){t.isLayoutDirty=!1}function Vb(t){const{visualElement:i}=t.options;i&&i.getProps().onBeforeLayoutMeasure&&i.notify("BeforeLayoutMeasure"),t.resetTransform()}function Gm(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Ub(t){t.resolveTargetDelta()}function zb(t){t.calcProjection()}function Wb(t){t.resetSkewAndRotation()}function Hb(t){t.removeLeadSnapshot()}function Xm(t,i,a){t.translate=Sn(i.translate,0,a),t.scale=Sn(i.scale,1,a),t.origin=i.origin,t.originPoint=i.originPoint}function Ym(t,i,a,u){t.min=Sn(i.min,a.min,u),t.max=Sn(i.max,a.max,u)}function Gb(t,i,a,u){Ym(t.x,i.x,a.x,u),Ym(t.y,i.y,a.y,u)}function Xb(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Yb={duration:.45,ease:[.4,0,.1,1]},$m=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Zm=$m("applewebkit/")&&!$m("chrome/")?Math.round:ii;function Km(t){t.min=Zm(t.min),t.max=Zm(t.max)}function $b(t){Km(t.x),Km(t.y)}function cx(t,i,a){return t==="position"||t==="preserve-aspect"&&!eb(Um(i),Um(a),.2)}function Zb(t){var i;return t!==t.root&&((i=t.scroll)==null?void 0:i.wasRoot)}const Kb=lx({attachResizeListener:(t,i)=>Ja(t,"resize",i),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ud={current:void 0},ux=lx({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Ud.current){const t=new Kb({});t.mount(window),t.setOptions({layoutScroll:!0}),Ud.current=t}return Ud.current},resetTransform:(t,i)=>{t.style.transform=i!==void 0?i:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),qb={pan:{Feature:pb},drag:{Feature:mb,ProjectionNode:ux,MeasureLayout:nx}};function qm(t,i,a){const{props:u}=t;t.animationState&&u.whileHover&&t.animationState.setActive("whileHover",a==="Start");const m="onHover"+a,x=u[m];x&&ln.postRender(()=>x(i,ll(i)))}class Qb extends Ts{mount(){const{current:i}=this.node;i&&(this.unmount=w3(i,(a,u)=>(qm(this.node,u,"Start"),m=>qm(this.node,m,"End"))))}unmount(){}}class Jb extends Ts{constructor(){super(...arguments),this.isActive=!1}onFocus(){let i=!1;try{i=this.node.current.matches(":focus-visible")}catch{i=!0}!i||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=il(Ja(this.node.current,"focus",()=>this.onFocus()),Ja(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Qm(t,i,a){const{props:u}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&u.whileTap&&t.animationState.setActive("whileTap",a==="Start");const m="onTap"+(a==="End"?"":a),x=u[m];x&&ln.postRender(()=>x(i,ll(i)))}class eE extends Ts{mount(){const{current:i}=this.node;i&&(this.unmount=E3(i,(a,u)=>(Qm(this.node,u,"Start"),(m,{success:x})=>Qm(this.node,m,x?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const yf=new WeakMap,zd=new WeakMap,tE=t=>{const i=yf.get(t.target);i&&i(t)},nE=t=>{t.forEach(tE)};function rE({root:t,...i}){const a=t||document;zd.has(a)||zd.set(a,{});const u=zd.get(a),m=JSON.stringify(i);return u[m]||(u[m]=new IntersectionObserver(nE,{root:t,...i})),u[m]}function iE(t,i,a){const u=rE(i);return yf.set(t,a),u.observe(t),()=>{yf.delete(t),u.unobserve(t)}}const sE={some:0,all:1};class oE extends Ts{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:i={}}=this.node.getProps(),{root:a,margin:u,amount:m="some",once:x}=i,y={root:a?a.current:void 0,rootMargin:u,threshold:typeof m=="number"?m:sE[m]},b=v=>{const{isIntersecting:C}=v;if(this.isInView===C||(this.isInView=C,x&&!C&&this.hasEnteredView))return;C&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",C);const{onViewportEnter:S,onViewportLeave:T}=this.node.getProps(),_=C?S:T;_&&_(v)};return iE(this.node.current,y,b)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:i,prevProps:a}=this.node;["amount","margin","root"].some(aE(i,a))&&this.startObserver()}unmount(){}}function aE({viewport:t={}},{viewport:i={}}={}){return a=>t[a]!==i[a]}const lE={inView:{Feature:oE},tap:{Feature:eE},focus:{Feature:Jb},hover:{Feature:Qb}},cE={layout:{ProjectionNode:ux,MeasureLayout:nx}},uE={...$C,...lE,...qb,...cE},vt=uC(uE,EC);function fh(t){const i=rl(()=>ao(t)),{isStatic:a}=N.useContext(al);if(a){const[,u]=N.useState(t);N.useEffect(()=>i.on("change",u),[])}return i}function dx(t,i){const a=fh(i()),u=()=>a.set(i());return u(),Lf(()=>{const m=()=>ln.preRender(u,!1,!0),x=t.map(y=>y.on("change",m));return()=>{x.forEach(y=>y()),Ki(u)}}),a}function dE(t){Ua.current=[],t();const i=dx(Ua.current,t);return Ua.current=void 0,i}function wf(t,i,a,u){if(typeof t=="function")return dE(t);const m=typeof i=="function"?i:A3(i,a,u);return Array.isArray(t)?Jm(t,m):Jm([t],([x])=>m(x))}function Jm(t,i){const a=rl(()=>[]);return dx(t,()=>{a.length=0;const u=t.length;for(let m=0;m<u;m++)a[m]=t[m].get();return i(a)})}function fE(t,i={}){const{isStatic:a}=N.useContext(al),u=()=>lr(t)?t.get():t;if(a)return wf(u);const m=fh(u());return N.useInsertionEffect(()=>N3(m,t,i),[m,JSON.stringify(i)]),m}const hE={some:0,all:1};function mE(t,i,{root:a,margin:u,amount:m="some"}={}){const x=xg(t),y=new WeakMap,b=C=>{C.forEach(S=>{const T=y.get(S.target);if(S.isIntersecting!==!!T)if(S.isIntersecting){const _=i(S.target,S);typeof _=="function"?y.set(S.target,_):v.unobserve(S.target)}else typeof T=="function"&&(T(S),y.delete(S.target))})},v=new IntersectionObserver(b,{root:a,rootMargin:u,threshold:typeof m=="number"?m:hE[m]});return x.forEach(C=>v.observe(C)),()=>v.disconnect()}function pE(t,{root:i,margin:a,amount:u,once:m=!1,initial:x=!1}={}){const[y,b]=N.useState(x);return N.useEffect(()=>{if(!t.current||m&&y)return;const v=()=>(b(!0),m?void 0:()=>b(!1)),C={root:i&&i.current||void 0,margin:a,amount:u};return mE(t.current,v,C)},[i,t,a,m,u]),y}const Yo=({size:t=60,fullScreen:i=!1,message:a=null})=>i?h.jsx("div",{className:"loading-spinner-fullscreen",children:h.jsxs("div",{className:"loading-spinner-content",children:[h.jsx("div",{className:"loading-spinner",style:{width:t,height:t},children:h.jsx("div",{className:"loading-spinner-inner"})}),a&&h.jsx("p",{className:"loading-spinner-message",children:a})]})}):h.jsxs("div",{className:"loading-spinner-wrapper",children:[h.jsx("div",{className:"loading-spinner",style:{width:t,height:t},children:h.jsx("div",{className:"loading-spinner-inner"})}),a&&h.jsx("p",{className:"loading-spinner-message",children:a})]}),gE=()=>{const{login:t,signup:i,user:a,logout:u,checkAuth:m,isAuthLoading:x,authLoadingMessage:y}=N.useContext(Wn),[b,v]=N.useState(""),[C,S]=N.useState(""),[T,_]=N.useState(""),[M,L]=N.useState(null),[F,j]=N.useState(null),[z,V]=N.useState(""),[B,Y]=N.useState(0),[$,re]=N.useState({x:0,y:0}),[G,te]=N.useState(1),[J,ye]=N.useState(null),[_e,Ne]=N.useState(!1),[Se,Ee]=N.useState(!1),[Z,Le]=N.useState({}),[ve,ge]=N.useState({}),[De,Ce]=N.useState(!1),[K,X]=N.useState(!1),[we,be]=N.useState(!1),de=N.useRef(null),[q,Re]=N.useState(!1),xe=Bn(),Ae=Vr(),nt=new URLSearchParams(Ae.search),Xe=nt.get("redirect"),ce=nt.get("code"),me=Xe==="lobby",Ye=()=>{const ct="abcdefghijklmnopqrstuvwxyz0123456789";let Ie="";for(let ae=0;ae<10;ae++)Ie+=ct.charAt(Math.floor(Math.random()*ct.length));return Ie};N.useEffect(()=>{if(me&&!b&&!C){const ct=Ye();v(ct),S(ct),ge(Ie=>({...Ie,username:!0,password:!0})),Le(Ie=>({...Ie,username:"",password:""}))}},[me]),N.useEffect(()=>{x||a&&xe(Xe==="lobby"?ce?`/lobby?code=${ce}`:"/?showLobbyModal=true":Xe==="product-selection"?"/product-selection":"/")},[x,a,Xe,ce,xe]),N.useEffect(()=>{B===1&&ce!=="demolobby"&&(b&&C&&T)&&!we&&(X(!0),be(!0))},[B,ce,b,C,T,we]);const $e=()=>{X(!1),setTimeout(()=>{de.current&&de.current.click()},150)},yt=()=>{X(!1)},dt=ct=>{const Ie=/^[a-z0-9]+$/;return ct.length>=2&&Ie.test(ct)},Ke=ct=>ct.length>=2,Qe=ct=>ct.length>=2,Bt=(ct,Ie,ae)=>{const ft=Qe(ct)&&dt(Ie)&&Ke(ae);Ce(ft)},ze=()=>{B<Yt.length-1&&(Ce(!1),Y(ct=>ct+1))},mn=()=>{B>0&&(Y(ct=>ct-1),B===1&&Bt(T,b,C))},Hn=ct=>{const Ie=ct.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");v(Ie),dt(Ie)?(ge(ae=>({...ae,username:!0})),Le(ae=>({...ae,username:""}))):(ge(ae=>({...ae,username:!1})),Le(ae=>({...ae,username:"Must be at least 2 characters (letters and numbers only)"}))),Bt(T,Ie,C)},Ve=ct=>{const Ie=ct.target.value;S(Ie),Ke(Ie)?(ge(ae=>({...ae,password:!0})),Le(ae=>({...ae,password:""}))):(ge(ae=>({...ae,password:!1})),Le(ae=>({...ae,password:"Must be at least 2 characters"}))),Bt(T,b,Ie)},kt=ct=>{const Ie=ct.target.value;_(Ie),Qe(Ie)?(ge(ae=>({...ae,displayName:!0})),Le(ae=>({...ae,displayName:""}))):(ge(ae=>({...ae,displayName:!1})),Le(ae=>({...ae,displayName:"Must be at least 2 characters"}))),Bt(Ie,b,C)},We=ct=>{const Ie=ct.target.files[0];if(Ie){const ae=new FileReader;ae.onload=ft=>{const ot=new Image;ot.onload=()=>{let ut=ot.width,Zt=ot.height;const cn=1500;ut>Zt&&ut>cn?(Zt=Zt*cn/ut,ut=cn):Zt>ut&&Zt>cn&&(ut=ut*cn/Zt,Zt=cn);const un=document.createElement("canvas");un.width=ut,un.height=Zt,un.getContext("2d").drawImage(ot,0,0,ut,Zt);const dn=un.toDataURL("image/jpeg",.75);L(Ie),j(dn),Ne(!0),ge(Gn=>({...Gn,image:!0})),Le(Gn=>({...Gn,image:""})),Ce(!0)},ot.src=ft.target.result},ae.readAsDataURL(Ie)}},ht=(ct,Ie)=>{ye(Ie)},et=async()=>{try{const ct=await Uc(F,J);j(ct),Ne(!1)}catch(ct){console.error("Error cropping the image:",ct),V("Failed to crop image. Please try again.")}},_t=async(ct,Ie,ae)=>{if("credentials"in navigator&&window.PasswordCredential)try{const ft=new PasswordCredential({id:ct,password:Ie,name:ae});await navigator.credentials.store(ft),console.log("Credentials saved to password manager")}catch(ft){console.warn("Could not save credentials:",ft)}},en=async ct=>{if(ct.preventDefault(),Ee(!0),V(""),console.log("Signup attempt - Username:",b,"Password:",C),!b||!C||!T){V("All fields are required"),Ee(!1);return}if(!M||!F){V("Your profile picture is required"),Ee(!1);return}try{const Ie="/signup",ae=await Ct(Ie,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:b,password:C,is_lobby_signup:me})}),ft=await ae.json();let ot=b,ut=C;if(ft.error==="Username already taken")if(me){const Fe=Ye(),dn=Fe,Gn=Fe;v(dn),S(Gn);const Yr=await Ct(Ie,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:dn,password:Gn,is_lobby_signup:!0})}),Fn=await Yr.json();if(!Yr.ok||Fn.error==="Username already taken"){V("Unable to create account. Please try again."),Ee(!1);return}t(Fn),ot=dn,ut=Gn}else{V("Username is taken"),Ee(!1);return}else{if(!ae.ok){V(ft.message||"Signup failed"),Ee(!1);return}t(ft)}if(await m(),!localStorage.getItem("access_token"))throw new Error("Authentication failed");let cn=null;if(M)cn=F,cn=cn.split(",")[1];else{const Gn=await(await(await fetch("/assets/fakeprofile.png")).blob()).arrayBuffer();cn=btoa(new Uint8Array(Gn).reduce((Yr,Fn)=>Yr+String.fromCharCode(Fn),""))}if(!(await Ct("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:T,image_data:cn})})).ok)throw new Error("Failed to update profile");await m(),await _t(ot,ut,T),xe(Xe==="lobby"?ce?`/lobby?code=${ce}`:"/?showLobbyModal=true":Xe==="product-selection"?"/product-selection":"/")}catch(Ie){console.error("Error:",Ie),V("An error occurred. Please try again.")}Ee(!1)},Yt=[{id:"credentials",type:"combined"},{id:"image",label:ce==="demolobby"?"Profile Image (Upload Any Image)":"Take a Selfie (so people can find you)",type:"file",onChange:We,accept:"image/*"}];return x?h.jsx(Yo,{fullScreen:!0,message:y}):h.jsxs("div",{className:"signup-container",children:[h.jsx("button",{onClick:()=>xe("/"),className:"homescreen-button",children:"Home"}),h.jsx("img",{src:"/assets/reuneo_test_11.png",alt:"Reunio Logo",className:"logo-image",style:{marginTop:"-1.5rem"}}),h.jsx("h3",{className:"signup-header",children:ce==="demolobby"?"Join the demo":"Sign Up to Join"}),ce&&ce!=="demolobby"&&h.jsxs("h2",{className:"signup-header",children:[ce," lobby"]}),ce==="demolobby"&&h.jsx("h2",{className:"signup-header",style:{fontSize:"0.9rem"},children:"Try Reuneo for Free!"}),h.jsx("p",{className:"login-link-text",children:"Already have an account?"}),h.jsx("button",{type:"button",onClick:()=>xe("/login"),className:"login-cta-button",children:"Yes, I saved my email before"}),h.jsxs("div",{className:"step-form-container",children:[h.jsx("div",{className:"step-progress",children:Yt.map((ct,Ie)=>h.jsx("div",{className:`progress-dot ${Ie===B?"active":""} ${Ie<B?"completed":""}`},Ie))}),h.jsxs("form",{onSubmit:en,autoComplete:"on",children:[h.jsx(Er,{mode:"wait",initial:!1,children:h.jsxs(vt.div,{initial:{opacity:0,x:8},animate:{opacity:1,x:0},exit:{opacity:0,x:-8},transition:{type:"spring",stiffness:500,damping:25,mass:.3},className:"step active",style:{willChange:"transform, opacity"},children:[h.jsxs("div",{className:"step-content",children:[B===0&&h.jsxs(vt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"credentials-step",children:[h.jsxs("div",{className:"name-field-container",children:[h.jsx("label",{className:"step-label",children:ce==="demolobby"?"Your Name (Type Any Name)":"Your Name"}),h.jsx("input",{type:"text",name:"displayName",autoComplete:"name",value:T,onChange:kt,placeholder:"Enter your name",className:"step-input",autoFocus:!0}),h.jsxs(Er,{mode:"wait",children:[Z.displayName&&h.jsx(vt.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},className:"step-error",children:Z.displayName}),ve.displayName&&!Z.displayName&&h.jsx(vt.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"step-success",children:" Valid"})]})]}),De&&h.jsx("div",{className:"inline-next-button-container",children:h.jsx(vt.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},type:"button",onClick:ze,className:"inline-next-button",children:"Continue "})}),me?h.jsxs("div",{className:"credentials-collapsible",children:[h.jsx("p",{className:"credentials-hint",children:"Auto-generated login (edit if you want)"}),h.jsx("button",{type:"button",className:"see-more-toggle",onClick:()=>Re(!q),children:q?"Hide ":"See More "}),q&&h.jsxs(vt.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"credentials-fields-expanded",children:[h.jsxs("div",{className:"field-row",children:[h.jsx("label",{className:"step-label small-label",children:"Username"}),h.jsx("input",{type:"text",name:"username",autoComplete:"username",value:b,onChange:Hn,placeholder:"Choose a username",className:"step-input"}),Z.username&&h.jsx("div",{className:"step-error small-feedback",children:Z.username}),ve.username&&!Z.username&&h.jsx("div",{className:"step-success small-feedback",children:" Valid"})]}),h.jsxs("div",{className:"field-row",children:[h.jsx("label",{className:"step-label small-label",children:"Password"}),h.jsx("input",{type:"password",name:"password",autoComplete:"new-password",value:C,onChange:Ve,placeholder:"Create a password",className:"step-input"}),Z.password&&h.jsx("div",{className:"step-error small-feedback",children:Z.password}),ve.password&&!Z.password&&h.jsx("div",{className:"step-success small-feedback",children:" Valid"})]})]})]}):h.jsxs("div",{className:"credentials-fields",children:[h.jsxs("div",{className:"field-row",children:[h.jsx("label",{className:"step-label small-label",children:"Username"}),h.jsx("input",{type:"text",name:"username",autoComplete:"username",value:b,onChange:Hn,placeholder:"Choose a username",className:"step-input"}),Z.username&&h.jsx("div",{className:"step-error small-feedback",children:Z.username}),ve.username&&!Z.username&&h.jsx("div",{className:"step-success small-feedback",children:" Valid"})]}),h.jsxs("div",{className:"field-row",children:[h.jsx("label",{className:"step-label small-label",children:"Password"}),h.jsx("input",{type:"password",name:"password",autoComplete:"new-password",value:C,onChange:Ve,placeholder:"Create a password",className:"step-input"}),Z.password&&h.jsx("div",{className:"step-error small-feedback",children:Z.password}),ve.password&&!Z.password&&h.jsx("div",{className:"step-success small-feedback",children:" Valid"})]})]})]}),B===1&&h.jsxs(vt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:[h.jsx("div",{className:"inline-back-button-container",children:h.jsx(vt.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},type:"button",onClick:mn,className:"inline-back-button",children:" Back"})}),h.jsx("label",{className:"step-label",children:Yt[1].label}),h.jsx("div",{className:"image-upload-container",children:_e?h.jsxs("div",{className:"cropper-container",children:[h.jsx("div",{className:"cropper-wrapper",children:h.jsx(Vc,{image:F,crop:$,zoom:G,aspect:1,onCropComplete:ht,onCropChange:re,onZoomChange:te})}),h.jsxs("div",{className:"cropper-controls",children:[h.jsx("button",{type:"button",onClick:()=>{Ne(!1),j(null),L(null)},className:"cancel-crop-button",children:"Cancel"}),h.jsx("button",{type:"button",onClick:et,className:"save-crop-button",children:"Good"})]})]}):h.jsxs(h.Fragment,{children:[h.jsx("input",{ref:de,type:"file",onChange:We,accept:"image/*",className:"step-input"}),F&&h.jsx("div",{children:h.jsx("img",{src:F,alt:"Profile preview",className:"profile-preview-image"})})]})})]})]}),!_e&&h.jsx("div",{className:`button-container ${B===0?"combined-step-buttons":""}`,children:De&&B>0&&B<Yt.length-1&&h.jsx(vt.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},type:"button",onClick:ze,className:"nextz-button",children:"Next "})})]},B)}),z&&h.jsx(vt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"error-message",children:z}),B===Yt.length-1&&h.jsx(vt.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},type:"submit",className:"primary-button",disabled:Se,children:Se?"Loading...":"Complete Signup"})]})]}),h.jsx(Er,{children:K&&h.jsx(vt.div,{className:"selfie-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:yt,children:h.jsxs(vt.div,{className:"selfie-modal-content",initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},transition:{type:"spring",stiffness:400,damping:25},onClick:ct=>ct.stopPropagation(),children:[h.jsx("h2",{className:"selfie-modal-header",children:"You Must Take a Selfie"}),h.jsx("p",{className:"selfie-modal-subtext",children:"Don't use old photos, people need to know how you look in order to find you in the room - trust us."}),h.jsx("button",{type:"button",className:"selfie-modal-button",onClick:$e,children:"Understood"})]})})})]})},xE=5e3,fx=(t,i=null,a=null)=>{N.useEffect(()=>{const u=async()=>{try{const x=a?`/display_lobby_metadata?lobby_code=${a}`:"/display_lobby_metadata",y=await Ct(x,{headers:{lobby_code:a}});if(!y.ok){console.error("Failed to fetch lobby metadata");return}const b=await y.json();t(b.player_count),i&&i(b.lobby_state)}catch(x){console.error("Error fetching lobby metadata:",x)}};u();const m=setInterval(u,xE);return()=>clearInterval(m)},[t,i,a])},Zc="currentLobbyCode",Kc="currentLobbyTimestamp",hh="currentLobbyLastValidated",yE=30*60*1e3,wE=3*60*1e3,vE=t=>{localStorage.setItem(Zc,t),localStorage.setItem(Kc,Date.now().toString()),console.log(`Stored lobby code: ${t}`)},CE=()=>{const t=localStorage.getItem(Zc),i=localStorage.getItem(Kc);return!t||!i?null:Date.now()-parseInt(i)>yE?(Oc(),console.log("Lobby code expired, cleared from storage"),null):t},bE=()=>{const t=localStorage.getItem(hh);return t?Date.now()-parseInt(t)>wE:!0},EE=()=>{localStorage.setItem(hh,Date.now().toString())},Oc=()=>{localStorage.removeItem(Zc),localStorage.removeItem(Kc),localStorage.removeItem(hh),console.log("Cleared lobby storage")},SE=()=>{localStorage.getItem(Zc)&&localStorage.setItem(Kc,Date.now().toString())},AE=()=>h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:[h.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),h.jsx("circle",{cx:"9",cy:"7",r:"4"}),h.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),h.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}),h.jsx("path",{d:"M12 11v6"}),h.jsx("path",{d:"M9 14h6"})]}),NE=()=>h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:[h.jsx("path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}),h.jsx("polyline",{points:"10 17 15 12 10 7"}),h.jsx("line",{x1:"15",y1:"12",x2:"3",y2:"12"})]}),Wd=({cx:t,cy:i,r:a,className:u})=>h.jsx("path",{className:u,d:`M${t} ${i-a} C${t+a*.1} ${i-a*.1} ${t+a*.1} ${i-a*.1} ${t+a} ${i} C${t+a*.1} ${i+a*.1} ${t+a*.1} ${i+a*.1} ${t} ${i+a} C${t-a*.1} ${i+a*.1} ${t-a*.1} ${i+a*.1} ${t-a} ${i} C${t-a*.1} ${i-a*.1} ${t-a*.1} ${i-a*.1} ${t} ${i-a}Z`}),TE=()=>h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:[h.jsx("circle",{cx:"12",cy:"12",r:"3"}),h.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),IE=()=>h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,style:{transform:"scaleX(-1)"},children:[h.jsx("path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}),h.jsx("polyline",{points:"10 17 15 12 10 7"}),h.jsx("line",{x1:"15",y1:"12",x2:"3",y2:"12"})]}),_E=()=>h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:[h.jsx("path",{d:"M12 22c-4.97 0-9-3.58-9-8 0-3.07 2.25-6.34 4.36-8.74C9.03 3.42 11 2 12 2c1 0 2.97 1.42 4.64 3.26C18.75 7.66 21 10.93 21 14c0 4.42-4.03 8-9 8z"}),h.jsx("path",{d:"M12 22c-1.66 0-3-1.79-3-4 0-1.48.84-3.2 1.7-4.3.5-.64 1.1-1.2 1.3-1.2s.8.56 1.3 1.2c.86 1.1 1.7 2.82 1.7 4.3 0 2.21-1.34 4-3 4z"})]}),ep=()=>h.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":!0,children:[h.jsx(Wd,{cx:12,cy:12,r:12.5}),h.jsx(Wd,{cx:26,cy:25,r:7}),h.jsx(Wd,{cx:27,cy:6,r:4})]});function RE({children:t,onClick:i,disabled:a,mouseX:u,spring:m,distance:x,magnification:y,baseItemSize:b,ariaLabel:v,title:C}){const S=N.useRef(null),T=wf(u,L=>{var j;const F=(j=S.current)==null?void 0:j.getBoundingClientRect();return F?L-F.x-F.width/2:x+1}),_=wf(T,[-x,0,x],[b,y,b]),M=fE(_,m);return h.jsx(vt.div,{ref:S,style:{width:M,height:M,minWidth:b,minHeight:b},onClick:a?void 0:i,onKeyDown:L=>{(L.key==="Enter"||L.key===" ")&&!a&&(L.preventDefault(),i==null||i())},className:"app-dock-item",tabIndex:a?-1:0,role:"button","aria-disabled":!!a,"aria-label":v,title:C,children:t})}const kE={mass:.1,stiffness:1400,damping:30};function PE({items:t,panelHeight:i=68,baseItemSize:a=50,magnification:u=58,distance:m=200}){const x=fh(1/0);return h.jsx("div",{className:"app-dock-outer",children:h.jsx(vt.div,{className:"app-dock-panel",style:{minHeight:i},role:"toolbar","aria-label":"Application dock",onMouseMove:({pageX:y})=>x.set(y),onMouseLeave:()=>x.set(1/0),children:t.map((y,b)=>h.jsxs(RE,{onClick:y.onClick,disabled:y.disabled,mouseX:x,spring:kE,distance:m,magnification:u,baseItemSize:a,ariaLabel:y.label,title:y.title,children:[h.jsx("div",{className:"app-dock-icon",children:y.icon}),h.jsx("span",{className:"app-dock-label",children:y.label})]},b))})})}const ME=()=>{const[t,i]=N.useState(!1),[a,u]=N.useState(!1),[m,x]=N.useState(""),[y,b]=N.useState(""),[v,C]=N.useState(""),[S,T]=N.useState(null);Pf();const{user:_,userProfile:M,checkAuth:L,permissions:F,emailVerified:j}=N.useContext(Wn),[z,V]=N.useState(null),[B,Y]=N.useState(null),[$,re]=N.useState([]),[G,te]=N.useState(!1),[J,ye]=N.useState(null),[_e,Ne]=N.useState(!1),[Se,Ee]=N.useState(!1),Z=Bn();fx(V,Y);const[Le,ve]=N.useState(!1);N.useRef(null);const ge=N.useRef(null),De=async(q=!1)=>{const Re=CE();if(!Re||!_){ye(null);return}if(ye(Re),q||bE())try{const xe=await Ct(`/display_lobby_metadata?lobby_code=${Re}`,{headers:{lobby_code:Re}});if(xe.ok){const Ae=await xe.json();Ae.status==="error"||Ae.lobby_state==="terminated"?(Oc(),ye(null)):EE()}else xe.status===404&&(Oc(),ye(null))}catch(xe){console.error("Error validating current lobby:",xe)}},Ce=async()=>{if(_){te(!0);try{const q=await Ct("/view_my_active_lobbies");if(q.ok){const Re=await q.json();console.log("User's active lobbies:",Re),Re&&Re.lobbies&&Array.isArray(Re.lobbies)?re(Re.lobbies):re([])}else console.error("Failed to fetch user's active lobbies"),re([])}catch(q){console.error("Error fetching user's active lobbies:",q),re([])}finally{te(!1)}}};N.useEffect(()=>{_?(Ce(),De(!0)):ye(null)},[_]),N.useEffect(()=>{L()},[]),N.useEffect(()=>{if(new URLSearchParams(window.location.search).get("showLobbyModal")==="true"&&_){u(!0);const xe=window.location.pathname;window.history.replaceState({},"",xe)}},[_]);const K=q=>{(F==="admin"||F==="organizer")&&Z(`/admin_lobby_view?code=${q}`)},X=q=>{q.preventDefault();const xe=new FormData(q.target).get("name");if(!xe||xe.trim()===""){b("Please enter a lobby code");return}const Ae=xe.toLowerCase().replace(/[^a-z0-9]/g,"");if(Ae===""){b("Lobby code must contain only letters and numbers");return}C(Ae),u(!1),console.log(Ae),x(Ae),Z(`/lobby?code=${Ae}`),x(""),b("")},we=()=>{ve(!1),ge.current&&(ge.current.clear(),ge.current=null)},be=()=>{if(!a)return null;const q=()=>{u(!1),x(""),b(""),we()};return h.jsx("div",{className:"qr-instruction-overlay",onClick:q,children:h.jsxs("div",{className:"qr-instruction-container",onClick:Re=>Re.stopPropagation(),children:[h.jsx("button",{onClick:q,className:"qr-modal-close","aria-label":"Close",children:""}),h.jsx("h2",{className:"qr-instruction-title",children:"Enter Lobby Code"}),h.jsx("p",{className:"qr-instruction-text",children:"Ask your host for the lobby code if you don't have it."}),h.jsxs("form",{onSubmit:X,className:"qr-code-form",children:[h.jsxs("div",{className:"qr-input-container",children:[h.jsx("input",{type:"text",name:"name",placeholder:"Lobby code",className:"qr-code-input",pattern:"[a-zA-Z0-9]+",title:"Only letters and numbers are allowed",autoComplete:"off",autoCapitalize:"none",required:!0}),y&&h.jsx("div",{className:"qr-error-message",children:y})]}),h.jsx("button",{type:"submit",className:"qr-instruction-primary qr-submit-button",children:"Join"})]})]})})},de=()=>{if(!_e)return null;const q=()=>{Ne(!1),u(!0)};return h.jsx("div",{className:"qr-instruction-overlay",onClick:()=>Ne(!1),children:h.jsxs("div",{className:"qr-instruction-container",onClick:Re=>Re.stopPropagation(),children:[h.jsx("button",{onClick:()=>Ne(!1),className:"qr-modal-close","aria-label":"Close",children:""}),h.jsx("div",{className:"qr-instruction-icon",children:h.jsxs("svg",{width:"56",height:"56",viewBox:"0 0 24 24",fill:"none",children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"qrIconGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[h.jsx("stop",{offset:"0%",stopColor:"#144dff"}),h.jsx("stop",{offset:"100%",stopColor:"#8b5cf6"})]})}),h.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1",fill:"url(#qrIconGradient)"}),h.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"1",fill:"url(#qrIconGradient)"}),h.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",fill:"url(#qrIconGradient)"}),h.jsx("rect",{x:"14",y:"14",width:"3",height:"3",rx:"0.5",fill:"url(#qrIconGradient)"}),h.jsx("rect",{x:"18",y:"14",width:"3",height:"3",rx:"0.5",fill:"url(#qrIconGradient)"}),h.jsx("rect",{x:"14",y:"18",width:"3",height:"3",rx:"0.5",fill:"url(#qrIconGradient)"}),h.jsx("rect",{x:"18",y:"18",width:"3",height:"3",rx:"0.5",fill:"url(#qrIconGradient)"})]})}),h.jsx("h2",{className:"qr-instruction-title",children:"Open your camera app and scan the QR code provided by your host"}),h.jsx("p",{className:"qr-instruction-text",children:"Don't worry, the app will remember your matches if you are still logged in."}),h.jsxs("div",{className:"qr-instruction-buttons",children:[h.jsx("button",{className:"qr-instruction-secondary",onClick:q,children:"Can't find QR"}),h.jsx("button",{className:"qr-instruction-primary",onClick:()=>Ne(!1),children:"Got it"})]})]})})};return N.useEffect(()=>{if(!Se)return;const q=Re=>{!Re.target.closest(".app-dock-outer")&&!Re.target.closest(".app-dock-expand-logout")&&Ee(!1)};return document.addEventListener("mousedown",q),()=>document.removeEventListener("mousedown",q)},[Se]),h.jsxs("div",{style:{position:"relative",height:"var(--viewport-height)",overflow:"hidden"},children:[h.jsxs("video",{className:"background-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,poster:"/assets/demo_app_home_video_cover.jpg",children:[h.jsx("source",{src:"/assets/demo_app_home_video_X2_small.mp4",type:"video/mp4"}),h.jsx("source",{src:"/assets/app_home_video_2.webm",type:"video/webm"}),h.jsx("img",{src:"/assets/demo_app_home_video_cover.jpg",alt:"Background fallback",style:{width:"100%",height:"100%",objectFit:"cover"}}),"Your browser does not support the video tag."]}),h.jsxs("div",{style:{position:"relative",zIndex:1,color:"white",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[h.jsx("div",{style:{position:"absolute",top:"0",left:"50%",transform:"translateX(-50%)"},children:h.jsx("img",{src:"/assets/reuneo_test_11.png",alt:"Logo",style:{width:"100px",height:"100px",objectFit:"contain"}})}),h.jsx("div",{style:{marginTop:"10%",display:"flex",flexDirection:"column"},children:h.jsx(Pw,{user:_,onProfileClick:()=>i(!0)})}),h.jsx("div",{style:{position:"absolute",top:"85px",display:"none",justifyContent:"flex-end",width:"94%",left:"3%",alignItems:"center"},children:(F==="admin"||F==="organizer")&&h.jsx("button",{className:"login-button",onClick:()=>Z("/organizer-account-details"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:q=>{q.currentTarget.style.transform="translateY(-2px)",q.currentTarget.style.boxShadow="0 2px 8px rgba(74, 58, 58, 0.7)"},onMouseLeave:q=>{q.currentTarget.style.transform="translateY(0)",q.currentTarget.style.boxShadow="0 0 4px rgba(74, 58, 58, 0.5)"},children:h.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Settings"})})}),(F==="admin"||F==="organizer")&&_==="topaz"&&h.jsx("div",{style:{position:"absolute",top:"120px",right:"20px",zIndex:10},children:h.jsx("button",{className:"master-lobbies-button",onClick:()=>Z("/master_lobby_view"),children:"Lobbies"})}),t&&h.jsx(ty,{onSubmit:q=>{i(!1)},onClose:()=>i(!1),existingProfile:M}),F!=="admin"&&F!=="organizer"&&!J?h.jsx("div",{style:{position:"fixed",top:"46%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10,display:"flex",justifyContent:"center",alignItems:"center"},children:h.jsxs("div",{className:"app-dock-item-standalone",onClick:()=>window.location.href="https://reuneo.com/organizer-signup",onKeyDown:q=>{(q.key==="Enter"||q.key===" ")&&(q.preventDefault(),window.location.href="https://reuneo.com/organizer-signup")},tabIndex:0,role:"button","aria-label":"Organizer",children:[h.jsx("div",{className:"app-dock-icon",children:h.jsx(ep,{})}),h.jsx("span",{className:"app-dock-label",children:"Create"})]})}):$.length===0&&(F==="admin"||F==="organizer")?h.jsx("div",{style:{position:"fixed",top:"46%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10,display:"flex",justifyContent:"center",alignItems:"center"},children:h.jsxs("div",{className:"app-dock-item-standalone",onClick:()=>Z("/create_lobby"),onKeyDown:q=>{(q.key==="Enter"||q.key===" ")&&(q.preventDefault(),Z("/create_lobby"))},tabIndex:0,role:"button","aria-label":"Create Lobby",children:[h.jsx("div",{className:"app-dock-icon",children:h.jsx(ep,{})}),h.jsx("span",{className:"app-dock-label",children:"Create"})]})}):null,h.jsx("div",{style:{position:"absolute",left:"50%",width:"90%",maxWidth:"1200px",textAlign:"center",marginLeft:"auto",marginRight:"auto",zIndex:1,top:"130px",transform:"translateX(-50%)"},children:_?h.jsx("h2",{className:"welcome-header",style:{color:"#ffffff",fontSize:"1rem",textTransform:"uppercase",letterSpacing:"0.1em",textShadow:"4px 4px 8px rgba(0,0,0,0.9)",margin:0},children:_&&M&&(F==="admin"||F==="organizer")?(()=>{const q="Create a Lobby",Re=M?M.name.slice(0,15):"";return h.jsxs(h.Fragment,{children:[q.split("").map((xe,Ae)=>h.jsx("span",{style:{"--i":Ae+1,marginRight:xe===" "?"0.5em":"1px"},children:xe},`main-${Ae}`)),h.jsx("br",{}),Re&&Re.split("").map((xe,Ae)=>h.jsx("span",{style:{"--i":Ae+1,marginRight:xe===" "?"0.5em":"1px"},children:xe},`name-${Ae}`))]})})():(()=>{const q="Join the Experience",Re=M?M.name.slice(0,15):"";return h.jsxs(h.Fragment,{children:[q.split("").map((xe,Ae)=>h.jsx("span",{style:{"--i":Ae+1,marginRight:xe===" "?"0.5em":"1px"},children:xe},`main-${Ae}`)),h.jsx("br",{}),Re&&Re.split("").map((xe,Ae)=>h.jsx("span",{style:{"--i":Ae+1,marginRight:xe===" "?"0.5em":"1px"},children:xe},`name-${Ae}`))]})})()}):null}),h.jsx("div",{style:{position:"absolute",bottom:"40px",left:"50%",transform:"translateX(-50%)",width:"94%",display:"flex",flexDirection:"row",justifyContent:"center",gap:"1.5rem"},children:h.jsx("div",{className:"event-item",style:{width:"auto",maxWidth:"none",margin:"0",padding:"10px 20px",borderRadius:"16px",marginBottom:"20px",cursor:"pointer",opacity:1,display:"flex",flexDirection:"row",alignItems:"center",gap:"1.5rem",":hover":{transform:"translateY(-5px)"}},children:h.jsx("div",{style:{display:"flex",gap:"1.5rem",flexDirection:"row",alignItems:"center"},children:h.jsxs("div",{style:{position:"relative"},children:[h.jsx(PE,{panelHeight:88,baseItemSize:65,magnification:75,distance:200,items:[{icon:h.jsx(AE,{}),label:"Join Lobby",onClick:()=>Ne(!0),disabled:z===null||B==="terminate",title:z===null||B==="terminate"?B==="terminate"?"Lobby closed":"Lobby loading":void 0},..._?[{icon:h.jsx(_E,{}),label:"Matches",onClick:()=>Z(j?"/paired-player-history":"/post-event-auth"),disabled:!1},{icon:h.jsx(TE,{}),label:"Profile",onClick:()=>{Se?(Ee(!1),i(!0)):Ee(!0)},disabled:!1}]:[{icon:h.jsx(NE,{}),label:"Login",onClick:()=>Z("/login"),disabled:!1}]]}),h.jsx(Er,{children:Se&&_&&h.jsxs(vt.div,{className:"app-dock-expand-logout",initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.8},transition:{duration:.1,ease:"easeOut"},onClick:()=>{Z("/logout"),Ee(!1)},onKeyDown:q=>{(q.key==="Enter"||q.key===" ")&&(q.preventDefault(),Z("/logout"),Ee(!1))},tabIndex:0,role:"button","aria-label":"Logout",children:[h.jsx("div",{className:"app-dock-icon",children:h.jsx(IE,{})}),h.jsx("span",{className:"app-dock-label",children:"Logout"})]})})]})})})}),J&&!((F==="admin"||F==="organizer")&&$.length>0)&&h.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"85%",maxWidth:"280px",display:"flex",justifyContent:"center",alignItems:"center",zIndex:10,transition:"all 0.3s ease"},children:h.jsxs("div",{onClick:()=>Z(`/lobby?code=${J}`),style:{width:"100%",background:"linear-gradient(145deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05))",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRadius:"24px",border:"1px solid rgba(255, 255, 255, 0.25)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2)",padding:"16px 20px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",flexDirection:"row",alignItems:"center",gap:"14px",overflow:"hidden"},onMouseEnter:q=>{q.currentTarget.style.transform="scale(1.02)",q.currentTarget.style.boxShadow="0 12px 40px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.3)",q.currentTarget.style.border="1px solid rgba(255, 255, 255, 0.4)"},onMouseLeave:q=>{q.currentTarget.style.transform="scale(1)",q.currentTarget.style.boxShadow="0 8px 32px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2)",q.currentTarget.style.border="1px solid rgba(255, 255, 255, 0.25)"},children:[h.jsxs("div",{style:{position:"relative",flexShrink:0},children:[h.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"50%",background:"linear-gradient(135deg, #144dff 0%, #8b5cf6 50%, #ec4899 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 15px rgba(20, 77, 255, 0.4)",animation:"pulse-glow 2s ease-in-out infinite"},children:h.jsx("span",{style:{color:"white",fontWeight:"800",fontSize:"1.1rem",textTransform:"uppercase"},children:J.charAt(0).toUpperCase()})}),h.jsx("div",{style:{position:"absolute",top:"-2px",right:"-2px",width:"14px",height:"14px",borderRadius:"50%",background:"#22c55e",border:"2px solid rgba(255, 255, 255, 0.9)",boxShadow:"0 0 8px rgba(34, 197, 94, 0.6)",animation:"pulse-dot 1.5s ease-in-out infinite"}})]}),h.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",gap:"2px"},children:[h.jsx("span",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.65rem",fontWeight:"600",letterSpacing:"0.02em"},children:"Return to your active lobby"}),h.jsx("span",{style:{color:"white",fontWeight:"700",fontSize:"1rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",textShadow:"0 2px 4px rgba(0, 0, 0, 0.3)"},children:J.length>15?J.slice(0,15)+"...":J})]}),h.jsx("div",{style:{flexShrink:0,width:"32px",height:"32px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},children:h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})})]})}),(F==="admin"||F==="organizer")&&$.length>0&&h.jsx("div",{style:{position:"absolute",top:"calc(32% + 80px)",left:"50%",transform:"translateX(-50%)",width:"85%",maxWidth:"280px",display:"flex",justifyContent:"center",alignItems:"center",zIndex:10,transition:"all 0.3s ease"},children:G?h.jsx("div",{style:{textAlign:"center",color:"white"},children:h.jsx("p",{children:"Loading your lobbies..."})}):$.length>0?h.jsxs("div",{className:"admin-lobby-tile",onClick:()=>K($[0]),children:[h.jsxs("div",{className:"admin-lobby-tile-icon",children:[h.jsx("div",{className:"admin-lobby-tile-icon-circle",children:h.jsx("span",{children:$[0]&&$[0].length>0?$[0].charAt(0).toUpperCase():"?"})}),h.jsx("div",{className:"admin-lobby-tile-live-dot"})]}),h.jsxs("div",{className:"admin-lobby-tile-content",children:[h.jsx("span",{className:"admin-lobby-tile-subtitle",children:"Manage your active lobby"}),h.jsx("span",{className:"admin-lobby-tile-title",children:$[0]&&$[0].length>15?$[0].slice(0,15)+"...":$[0]})]}),h.jsx("div",{className:"admin-lobby-tile-arrow",children:h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})})]}):null})]}),h.jsx(be,{}),h.jsx(de,{})]})};function OE(){const{pathname:t}=Vr();return N.useEffect(()=>{window.scrollTo(0,0)},[t]),null}function DE(){const{pathname:t}=Vr(),i=t.startsWith("/organizer-dashboard");return N.useEffect(()=>{const a=document.getElementById("root"),u=document.body;return i?(a==null||a.classList.add("dashboard-view"),u==null||u.classList.add("dashboard-view")):(a==null||a.classList.remove("dashboard-view"),u==null||u.classList.remove("dashboard-view")),()=>{a==null||a.classList.remove("dashboard-view"),u==null||u.classList.remove("dashboard-view")}},[t,i]),null}const LE=()=>{const{login:t,signup:i,user:a,logout:u,checkAuth:m}=N.useContext(Wn),[x,y]=N.useState(""),[b,v]=N.useState(""),[C,S]=N.useState(""),[T,_]=N.useState(""),[M,L]=N.useState(!0),[F,j]=N.useState({}),[z,V]=N.useState(!1),[B,Y]=N.useState(""),$=Bn(),[re]=Rp();N.useEffect(()=>{re.get("error")==="invalid_or_expired_link"&&(Y("Your login link has expired or is invalid. Please request a new one."),window.history.replaceState({},"","/login"))},[re]);const G=_e=>{const Ne=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,Se=/^[a-z0-9]+$/;return _e.length>=2&&(Ne.test(_e)||Se.test(_e))},te=_e=>{const Ne=_e.target.value.toLowerCase().replace(/[^a-z0-9@._\-]/g,"");y(Ne);const Se=Ne.includes("@");Ne.length>0&&!Se?V(!0):V(!1),G(Ne)?j(Ee=>({...Ee,username:""})):j(Ee=>({...Ee,username:" "}))},J=_e=>{v(_e.target.value)},ye=async _e=>{if(_e.preventDefault(),_(""),!G(x)){_("Please enter a valid email or username");return}try{const Se=await Ct(M?"/login":"/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:x,password:b})});if(Se.ok){const Ee=await Se.json();t(Ee),m(),$("/")}else{const Ee=await Se.json();_(Ee.message||`${M?"Login":"Signup"} failed`)}}catch(Ne){_("Network error occurred. Please try again."),console.error("Error:",Ne)}};return h.jsxs("div",{className:"login-container",children:[h.jsx("button",{onClick:()=>$("/"),className:"homescreen-button",children:"Home"}),h.jsx("img",{src:"/assets/reuneo_test_11.png",alt:"Reunio Logo",className:"logo-image"}),h.jsx("h1",{className:"login-header",children:"Login"}),h.jsxs("div",{className:"login-signup-form",children:[B&&h.jsx("div",{className:"error-message",style:{backgroundColor:"rgba(255, 107, 107, 0.1)",border:"1px solid rgba(255, 107, 107, 0.3)",padding:"12px 16px",borderRadius:"8px",marginBottom:"16px"},children:B}),T&&h.jsx("div",{className:"error-message",children:T}),h.jsxs("form",{onSubmit:ye,children:[h.jsxs("div",{className:"form-group",children:[h.jsx("input",{type:"text",placeholder:"email or username",className:"login-input",value:x,onChange:te,required:!0,autoComplete:"email"}),z&&h.jsx("div",{className:"step-success",children:"or username (lowercase letters and numbers)"})]}),h.jsx("div",{className:"form-group",children:h.jsx("input",{type:"password",placeholder:"password",className:"login-input",value:b,onChange:J,required:!0,autoComplete:"current-password"})}),h.jsx("button",{type:"submit",className:"login-primary-button",children:"Login"})]}),h.jsx("button",{type:"button",onClick:()=>$("/forgot-password"),className:"forgot-password-link",children:"Forgot password?"})]})]})},jE=()=>{const t=Bn(),{logout:i}=N.useContext(Wn);return localStorage.removeItem("access_token"),N.useEffect(()=>{console.log("LogoutPage useEffect"),setTimeout(()=>{i(),t("/")},100)},[]),h.jsx("div",{children:"Logged out redirecting to homescreen"})};var BE=Object.defineProperty,Dc=Object.getOwnPropertySymbols,hx=Object.prototype.hasOwnProperty,mx=Object.prototype.propertyIsEnumerable,tp=(t,i,a)=>i in t?BE(t,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[i]=a,vf=(t,i)=>{for(var a in i||(i={}))hx.call(i,a)&&tp(t,a,i[a]);if(Dc)for(var a of Dc(i))mx.call(i,a)&&tp(t,a,i[a]);return t},Cf=(t,i)=>{var a={};for(var u in t)hx.call(t,u)&&i.indexOf(u)<0&&(a[u]=t[u]);if(t!=null&&Dc)for(var u of Dc(t))i.indexOf(u)<0&&mx.call(t,u)&&(a[u]=t[u]);return a};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var lo;(t=>{const i=class Lt{constructor(v,C,S,T){if(this.version=v,this.errorCorrectionLevel=C,this.modules=[],this.isFunction=[],v<Lt.MIN_VERSION||v>Lt.MAX_VERSION)throw new RangeError("Version value out of range");if(T<-1||T>7)throw new RangeError("Mask value out of range");this.size=v*4+17;let _=[];for(let L=0;L<this.size;L++)_.push(!1);for(let L=0;L<this.size;L++)this.modules.push(_.slice()),this.isFunction.push(_.slice());this.drawFunctionPatterns();const M=this.addEccAndInterleave(S);if(this.drawCodewords(M),T==-1){let L=1e9;for(let F=0;F<8;F++){this.applyMask(F),this.drawFormatBits(F);const j=this.getPenaltyScore();j<L&&(T=F,L=j),this.applyMask(F)}}m(0<=T&&T<=7),this.mask=T,this.applyMask(T),this.drawFormatBits(T),this.isFunction=[]}static encodeText(v,C){const S=t.QrSegment.makeSegments(v);return Lt.encodeSegments(S,C)}static encodeBinary(v,C){const S=t.QrSegment.makeBytes(v);return Lt.encodeSegments([S],C)}static encodeSegments(v,C,S=1,T=40,_=-1,M=!0){if(!(Lt.MIN_VERSION<=S&&S<=T&&T<=Lt.MAX_VERSION)||_<-1||_>7)throw new RangeError("Invalid value");let L,F;for(L=S;;L++){const B=Lt.getNumDataCodewords(L,C)*8,Y=y.getTotalBits(v,L);if(Y<=B){F=Y;break}if(L>=T)throw new RangeError("Data too long")}for(const B of[Lt.Ecc.MEDIUM,Lt.Ecc.QUARTILE,Lt.Ecc.HIGH])M&&F<=Lt.getNumDataCodewords(L,B)*8&&(C=B);let j=[];for(const B of v){a(B.mode.modeBits,4,j),a(B.numChars,B.mode.numCharCountBits(L),j);for(const Y of B.getData())j.push(Y)}m(j.length==F);const z=Lt.getNumDataCodewords(L,C)*8;m(j.length<=z),a(0,Math.min(4,z-j.length),j),a(0,(8-j.length%8)%8,j),m(j.length%8==0);for(let B=236;j.length<z;B^=253)a(B,8,j);let V=[];for(;V.length*8<j.length;)V.push(0);return j.forEach((B,Y)=>V[Y>>>3]|=B<<7-(Y&7)),new Lt(L,C,V,_)}getModule(v,C){return 0<=v&&v<this.size&&0<=C&&C<this.size&&this.modules[C][v]}getModules(){return this.modules}drawFunctionPatterns(){for(let S=0;S<this.size;S++)this.setFunctionModule(6,S,S%2==0),this.setFunctionModule(S,6,S%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const v=this.getAlignmentPatternPositions(),C=v.length;for(let S=0;S<C;S++)for(let T=0;T<C;T++)S==0&&T==0||S==0&&T==C-1||S==C-1&&T==0||this.drawAlignmentPattern(v[S],v[T]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(v){const C=this.errorCorrectionLevel.formatBits<<3|v;let S=C;for(let _=0;_<10;_++)S=S<<1^(S>>>9)*1335;const T=(C<<10|S)^21522;m(T>>>15==0);for(let _=0;_<=5;_++)this.setFunctionModule(8,_,u(T,_));this.setFunctionModule(8,7,u(T,6)),this.setFunctionModule(8,8,u(T,7)),this.setFunctionModule(7,8,u(T,8));for(let _=9;_<15;_++)this.setFunctionModule(14-_,8,u(T,_));for(let _=0;_<8;_++)this.setFunctionModule(this.size-1-_,8,u(T,_));for(let _=8;_<15;_++)this.setFunctionModule(8,this.size-15+_,u(T,_));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let v=this.version;for(let S=0;S<12;S++)v=v<<1^(v>>>11)*7973;const C=this.version<<12|v;m(C>>>18==0);for(let S=0;S<18;S++){const T=u(C,S),_=this.size-11+S%3,M=Math.floor(S/3);this.setFunctionModule(_,M,T),this.setFunctionModule(M,_,T)}}drawFinderPattern(v,C){for(let S=-4;S<=4;S++)for(let T=-4;T<=4;T++){const _=Math.max(Math.abs(T),Math.abs(S)),M=v+T,L=C+S;0<=M&&M<this.size&&0<=L&&L<this.size&&this.setFunctionModule(M,L,_!=2&&_!=4)}}drawAlignmentPattern(v,C){for(let S=-2;S<=2;S++)for(let T=-2;T<=2;T++)this.setFunctionModule(v+T,C+S,Math.max(Math.abs(T),Math.abs(S))!=1)}setFunctionModule(v,C,S){this.modules[C][v]=S,this.isFunction[C][v]=!0}addEccAndInterleave(v){const C=this.version,S=this.errorCorrectionLevel;if(v.length!=Lt.getNumDataCodewords(C,S))throw new RangeError("Invalid argument");const T=Lt.NUM_ERROR_CORRECTION_BLOCKS[S.ordinal][C],_=Lt.ECC_CODEWORDS_PER_BLOCK[S.ordinal][C],M=Math.floor(Lt.getNumRawDataModules(C)/8),L=T-M%T,F=Math.floor(M/T);let j=[];const z=Lt.reedSolomonComputeDivisor(_);for(let B=0,Y=0;B<T;B++){let $=v.slice(Y,Y+F-_+(B<L?0:1));Y+=$.length;const re=Lt.reedSolomonComputeRemainder($,z);B<L&&$.push(0),j.push($.concat(re))}let V=[];for(let B=0;B<j[0].length;B++)j.forEach((Y,$)=>{(B!=F-_||$>=L)&&V.push(Y[B])});return m(V.length==M),V}drawCodewords(v){if(v.length!=Math.floor(Lt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let C=0;for(let S=this.size-1;S>=1;S-=2){S==6&&(S=5);for(let T=0;T<this.size;T++)for(let _=0;_<2;_++){const M=S-_,F=(S+1&2)==0?this.size-1-T:T;!this.isFunction[F][M]&&C<v.length*8&&(this.modules[F][M]=u(v[C>>>3],7-(C&7)),C++)}}m(C==v.length*8)}applyMask(v){if(v<0||v>7)throw new RangeError("Mask value out of range");for(let C=0;C<this.size;C++)for(let S=0;S<this.size;S++){let T;switch(v){case 0:T=(S+C)%2==0;break;case 1:T=C%2==0;break;case 2:T=S%3==0;break;case 3:T=(S+C)%3==0;break;case 4:T=(Math.floor(S/3)+Math.floor(C/2))%2==0;break;case 5:T=S*C%2+S*C%3==0;break;case 6:T=(S*C%2+S*C%3)%2==0;break;case 7:T=((S+C)%2+S*C%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[C][S]&&T&&(this.modules[C][S]=!this.modules[C][S])}}getPenaltyScore(){let v=0;for(let _=0;_<this.size;_++){let M=!1,L=0,F=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[_][j]==M?(L++,L==5?v+=Lt.PENALTY_N1:L>5&&v++):(this.finderPenaltyAddHistory(L,F),M||(v+=this.finderPenaltyCountPatterns(F)*Lt.PENALTY_N3),M=this.modules[_][j],L=1);v+=this.finderPenaltyTerminateAndCount(M,L,F)*Lt.PENALTY_N3}for(let _=0;_<this.size;_++){let M=!1,L=0,F=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[j][_]==M?(L++,L==5?v+=Lt.PENALTY_N1:L>5&&v++):(this.finderPenaltyAddHistory(L,F),M||(v+=this.finderPenaltyCountPatterns(F)*Lt.PENALTY_N3),M=this.modules[j][_],L=1);v+=this.finderPenaltyTerminateAndCount(M,L,F)*Lt.PENALTY_N3}for(let _=0;_<this.size-1;_++)for(let M=0;M<this.size-1;M++){const L=this.modules[_][M];L==this.modules[_][M+1]&&L==this.modules[_+1][M]&&L==this.modules[_+1][M+1]&&(v+=Lt.PENALTY_N2)}let C=0;for(const _ of this.modules)C=_.reduce((M,L)=>M+(L?1:0),C);const S=this.size*this.size,T=Math.ceil(Math.abs(C*20-S*10)/S)-1;return m(0<=T&&T<=9),v+=T*Lt.PENALTY_N4,m(0<=v&&v<=2568888),v}getAlignmentPatternPositions(){if(this.version==1)return[];{const v=Math.floor(this.version/7)+2,C=this.version==32?26:Math.ceil((this.version*4+4)/(v*2-2))*2;let S=[6];for(let T=this.size-7;S.length<v;T-=C)S.splice(1,0,T);return S}}static getNumRawDataModules(v){if(v<Lt.MIN_VERSION||v>Lt.MAX_VERSION)throw new RangeError("Version number out of range");let C=(16*v+128)*v+64;if(v>=2){const S=Math.floor(v/7)+2;C-=(25*S-10)*S-55,v>=7&&(C-=36)}return m(208<=C&&C<=29648),C}static getNumDataCodewords(v,C){return Math.floor(Lt.getNumRawDataModules(v)/8)-Lt.ECC_CODEWORDS_PER_BLOCK[C.ordinal][v]*Lt.NUM_ERROR_CORRECTION_BLOCKS[C.ordinal][v]}static reedSolomonComputeDivisor(v){if(v<1||v>255)throw new RangeError("Degree out of range");let C=[];for(let T=0;T<v-1;T++)C.push(0);C.push(1);let S=1;for(let T=0;T<v;T++){for(let _=0;_<C.length;_++)C[_]=Lt.reedSolomonMultiply(C[_],S),_+1<C.length&&(C[_]^=C[_+1]);S=Lt.reedSolomonMultiply(S,2)}return C}static reedSolomonComputeRemainder(v,C){let S=C.map(T=>0);for(const T of v){const _=T^S.shift();S.push(0),C.forEach((M,L)=>S[L]^=Lt.reedSolomonMultiply(M,_))}return S}static reedSolomonMultiply(v,C){if(v>>>8||C>>>8)throw new RangeError("Byte out of range");let S=0;for(let T=7;T>=0;T--)S=S<<1^(S>>>7)*285,S^=(C>>>T&1)*v;return m(S>>>8==0),S}finderPenaltyCountPatterns(v){const C=v[1];m(C<=this.size*3);const S=C>0&&v[2]==C&&v[3]==C*3&&v[4]==C&&v[5]==C;return(S&&v[0]>=C*4&&v[6]>=C?1:0)+(S&&v[6]>=C*4&&v[0]>=C?1:0)}finderPenaltyTerminateAndCount(v,C,S){return v&&(this.finderPenaltyAddHistory(C,S),C=0),C+=this.size,this.finderPenaltyAddHistory(C,S),this.finderPenaltyCountPatterns(S)}finderPenaltyAddHistory(v,C){C[0]==0&&(v+=this.size),C.pop(),C.unshift(v)}};i.MIN_VERSION=1,i.MAX_VERSION=40,i.PENALTY_N1=3,i.PENALTY_N2=3,i.PENALTY_N3=40,i.PENALTY_N4=10,i.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],i.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=i;function a(b,v,C){if(v<0||v>31||b>>>v)throw new RangeError("Value out of range");for(let S=v-1;S>=0;S--)C.push(b>>>S&1)}function u(b,v){return(b>>>v&1)!=0}function m(b){if(!b)throw new Error("Assertion error")}const x=class In{constructor(v,C,S){if(this.mode=v,this.numChars=C,this.bitData=S,C<0)throw new RangeError("Invalid argument");this.bitData=S.slice()}static makeBytes(v){let C=[];for(const S of v)a(S,8,C);return new In(In.Mode.BYTE,v.length,C)}static makeNumeric(v){if(!In.isNumeric(v))throw new RangeError("String contains non-numeric characters");let C=[];for(let S=0;S<v.length;){const T=Math.min(v.length-S,3);a(parseInt(v.substring(S,S+T),10),T*3+1,C),S+=T}return new In(In.Mode.NUMERIC,v.length,C)}static makeAlphanumeric(v){if(!In.isAlphanumeric(v))throw new RangeError("String contains unencodable characters in alphanumeric mode");let C=[],S;for(S=0;S+2<=v.length;S+=2){let T=In.ALPHANUMERIC_CHARSET.indexOf(v.charAt(S))*45;T+=In.ALPHANUMERIC_CHARSET.indexOf(v.charAt(S+1)),a(T,11,C)}return S<v.length&&a(In.ALPHANUMERIC_CHARSET.indexOf(v.charAt(S)),6,C),new In(In.Mode.ALPHANUMERIC,v.length,C)}static makeSegments(v){return v==""?[]:In.isNumeric(v)?[In.makeNumeric(v)]:In.isAlphanumeric(v)?[In.makeAlphanumeric(v)]:[In.makeBytes(In.toUtf8ByteArray(v))]}static makeEci(v){let C=[];if(v<0)throw new RangeError("ECI assignment value out of range");if(v<128)a(v,8,C);else if(v<16384)a(2,2,C),a(v,14,C);else if(v<1e6)a(6,3,C),a(v,21,C);else throw new RangeError("ECI assignment value out of range");return new In(In.Mode.ECI,0,C)}static isNumeric(v){return In.NUMERIC_REGEX.test(v)}static isAlphanumeric(v){return In.ALPHANUMERIC_REGEX.test(v)}getData(){return this.bitData.slice()}static getTotalBits(v,C){let S=0;for(const T of v){const _=T.mode.numCharCountBits(C);if(T.numChars>=1<<_)return 1/0;S+=4+_+T.bitData.length}return S}static toUtf8ByteArray(v){v=encodeURI(v);let C=[];for(let S=0;S<v.length;S++)v.charAt(S)!="%"?C.push(v.charCodeAt(S)):(C.push(parseInt(v.substring(S+1,S+3),16)),S+=2);return C}};x.NUMERIC_REGEX=/^[0-9]*$/,x.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,x.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let y=x;t.QrSegment=x})(lo||(lo={}));(t=>{(i=>{const a=class{constructor(m,x){this.ordinal=m,this.formatBits=x}};a.LOW=new a(0,1),a.MEDIUM=new a(1,0),a.QUARTILE=new a(2,3),a.HIGH=new a(3,2),i.Ecc=a})(t.QrCode||(t.QrCode={}))})(lo||(lo={}));(t=>{(i=>{const a=class{constructor(m,x){this.modeBits=m,this.numBitsCharCount=x}numCharCountBits(m){return this.numBitsCharCount[Math.floor((m+7)/17)]}};a.NUMERIC=new a(1,[10,12,14]),a.ALPHANUMERIC=new a(2,[9,11,13]),a.BYTE=new a(4,[8,16,16]),a.KANJI=new a(8,[8,10,12]),a.ECI=new a(7,[0,0,0]),i.Mode=a})(t.QrSegment||(t.QrSegment={}))})(lo||(lo={}));var Wo=lo;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var FE={L:Wo.QrCode.Ecc.LOW,M:Wo.QrCode.Ecc.MEDIUM,Q:Wo.QrCode.Ecc.QUARTILE,H:Wo.QrCode.Ecc.HIGH},px=128,gx="L",xx="#FFFFFF",yx="#000000",wx=!1,vx=1,VE=4,UE=0,zE=.1;function Cx(t,i=0){const a=[];return t.forEach(function(u,m){let x=null;u.forEach(function(y,b){if(!y&&x!==null){a.push(`M${x+i} ${m+i}h${b-x}v1H${x+i}z`),x=null;return}if(b===u.length-1){if(!y)return;x===null?a.push(`M${b+i},${m+i} h1v1H${b+i}z`):a.push(`M${x+i},${m+i} h${b+1-x}v1H${x+i}z`);return}y&&x===null&&(x=b)})}),a.join("")}function bx(t,i){return t.slice().map((a,u)=>u<i.y||u>=i.y+i.h?a:a.map((m,x)=>x<i.x||x>=i.x+i.w?m:!1))}function WE(t,i,a,u){if(u==null)return null;const m=t.length+a*2,x=Math.floor(i*zE),y=m/i,b=(u.width||x)*y,v=(u.height||x)*y,C=u.x==null?t.length/2-b/2:u.x*y,S=u.y==null?t.length/2-v/2:u.y*y,T=u.opacity==null?1:u.opacity;let _=null;if(u.excavate){let L=Math.floor(C),F=Math.floor(S),j=Math.ceil(b+C-L),z=Math.ceil(v+S-F);_={x:L,y:F,w:j,h:z}}const M=u.crossOrigin;return{x:C,y:S,h:v,w:b,excavation:_,opacity:T,crossOrigin:M}}function HE(t,i){return i!=null?Math.max(Math.floor(i),0):t?VE:UE}function Ex({value:t,level:i,minVersion:a,includeMargin:u,marginSize:m,imageSettings:x,size:y,boostLevel:b}){let v=Ht.useMemo(()=>{const L=(Array.isArray(t)?t:[t]).reduce((F,j)=>(F.push(...Wo.QrSegment.makeSegments(j)),F),[]);return Wo.QrCode.encodeSegments(L,FE[i],a,void 0,void 0,b)},[t,i,a,b]);const{cells:C,margin:S,numCells:T,calculatedImageSettings:_}=Ht.useMemo(()=>{let M=v.getModules();const L=HE(u,m),F=M.length+L*2,j=WE(M,y,L,x);return{cells:M,margin:L,numCells:F,calculatedImageSettings:j}},[v,y,x,u,m]);return{qrcode:v,margin:S,cells:C,numCells:T,calculatedImageSettings:_}}var GE=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),XE=Ht.forwardRef(function(i,a){const u=i,{value:m,size:x=px,level:y=gx,bgColor:b=xx,fgColor:v=yx,includeMargin:C=wx,minVersion:S=vx,boostLevel:T,marginSize:_,imageSettings:M}=u,F=Cf(u,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:j}=F,z=Cf(F,["style"]),V=M==null?void 0:M.src,B=Ht.useRef(null),Y=Ht.useRef(null),$=Ht.useCallback(Ee=>{B.current=Ee,typeof a=="function"?a(Ee):a&&(a.current=Ee)},[a]),[re,G]=Ht.useState(!1),{margin:te,cells:J,numCells:ye,calculatedImageSettings:_e}=Ex({value:m,level:y,minVersion:S,boostLevel:T,includeMargin:C,marginSize:_,imageSettings:M,size:x});Ht.useEffect(()=>{if(B.current!=null){const Ee=B.current,Z=Ee.getContext("2d");if(!Z)return;let Le=J;const ve=Y.current,ge=_e!=null&&ve!==null&&ve.complete&&ve.naturalHeight!==0&&ve.naturalWidth!==0;ge&&_e.excavation!=null&&(Le=bx(J,_e.excavation));const De=window.devicePixelRatio||1;Ee.height=Ee.width=x*De;const Ce=x/ye*De;Z.scale(Ce,Ce),Z.fillStyle=b,Z.fillRect(0,0,ye,ye),Z.fillStyle=v,GE?Z.fill(new Path2D(Cx(Le,te))):J.forEach(function(K,X){K.forEach(function(we,be){we&&Z.fillRect(be+te,X+te,1,1)})}),_e&&(Z.globalAlpha=_e.opacity),ge&&Z.drawImage(ve,_e.x+te,_e.y+te,_e.w,_e.h)}}),Ht.useEffect(()=>{G(!1)},[V]);const Ne=vf({height:x,width:x},j);let Se=null;return V!=null&&(Se=Ht.createElement("img",{src:V,key:V,style:{display:"none"},onLoad:()=>{G(!0)},ref:Y,crossOrigin:_e==null?void 0:_e.crossOrigin})),Ht.createElement(Ht.Fragment,null,Ht.createElement("canvas",vf({style:Ne,height:x,width:x,ref:$,role:"img"},z)),Se)});XE.displayName="QRCodeCanvas";var mh=Ht.forwardRef(function(i,a){const u=i,{value:m,size:x=px,level:y=gx,bgColor:b=xx,fgColor:v=yx,includeMargin:C=wx,minVersion:S=vx,boostLevel:T,title:_,marginSize:M,imageSettings:L}=u,F=Cf(u,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:j,cells:z,numCells:V,calculatedImageSettings:B}=Ex({value:m,level:y,minVersion:S,boostLevel:T,includeMargin:C,marginSize:M,imageSettings:L,size:x});let Y=z,$=null;L!=null&&B!=null&&(B.excavation!=null&&(Y=bx(z,B.excavation)),$=Ht.createElement("image",{href:L.src,height:B.h,width:B.w,x:B.x+j,y:B.y+j,preserveAspectRatio:"none",opacity:B.opacity,crossOrigin:B.crossOrigin}));const re=Cx(Y,j);return Ht.createElement("svg",vf({height:x,width:x,viewBox:`0 0 ${V} ${V}`,ref:a,role:"img"},F),!!_&&Ht.createElement("title",null,_),Ht.createElement("path",{fill:b,d:`M0,0 h${V}v${V}H0z`,shapeRendering:"crispEdges"}),Ht.createElement("path",{fill:v,d:re,shapeRendering:"crispEdges"}),$)});mh.displayName="QRCodeSVG";const YE=({player:t})=>h.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"350px",height:"500px",margin:"0 auto",position:"relative"},children:t!=null&&t.image_data?h.jsxs("div",{style:{position:"relative",width:"350px",height:"450px"},children:[h.jsx("img",{src:`data:image/jpeg;base64,${t.image_data}`,alt:t.name,style:{width:"350px",height:"450px",objectFit:"cover",borderRadius:"28px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.15)",margin:"auto",display:"block"},onError:i=>{console.error("Image failed to load:",i),i.target.style.display="none"}}),h.jsx("div",{style:{position:"absolute",bottom:"-6px",left:"1px",right:"1px",background:"linear-gradient(135deg, #42A5F5 0%, #2196F3 30%, #1976D2 70%, #1565C0 100%)",color:"white",padding:"14px 28px",borderRadius:"50px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',boxShadow:"0 4px 12px rgba(33, 150, 243, 0.25)",letterSpacing:"0.02em"},children:t.name})]}):h.jsxs("div",{style:{width:"350px",height:"450px",backgroundColor:"#f0f1f4",borderRadius:"28px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"relative",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[h.jsx("p",{style:{marginBottom:"60px",color:"#6b7280"},children:"No image available"}),h.jsx("div",{style:{position:"absolute",bottom:"-6px",left:"1px",right:"1px",background:"linear-gradient(135deg, #42A5F5 0%, #2196F3 30%, #1976D2 70%, #1565C0 100%)",color:"white",padding:"14px 28px",borderRadius:"50px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',boxShadow:"0 4px 12px rgba(33, 150, 243, 0.25)",letterSpacing:"0.02em"},children:t.name})]})});var np=typeof window>"u"?N.useEffect:N.useLayoutEffect,$E=({isPlaying:t,duration:i,startAt:a=0,updateInterval:u=0,onComplete:m,onUpdate:x})=>{let[y,b]=N.useState(a),v=N.useRef(0),C=N.useRef(a),S=N.useRef(a*-1e3),T=N.useRef(null),_=N.useRef(null),M=N.useRef(null),L=z=>{let V=z/1e3;if(_.current===null){_.current=V,T.current=requestAnimationFrame(L);return}let B=V-_.current,Y=v.current+B;_.current=V,v.current=Y;let $=C.current+(u===0?Y:(Y/u|0)*u),re=C.current+Y,G=typeof i=="number"&&re>=i;b(G?i:$),G||(T.current=requestAnimationFrame(L))},F=()=>{T.current&&cancelAnimationFrame(T.current),M.current&&clearTimeout(M.current),_.current=null},j=N.useCallback(z=>{F(),v.current=0;let V=typeof z=="number"?z:a;C.current=V,b(V),t&&(T.current=requestAnimationFrame(L))},[t,a]);return np(()=>{if(x==null||x(y),i&&y>=i){S.current+=i*1e3;let{shouldRepeat:z=!1,delay:V=0,newStartAt:B}=(m==null?void 0:m(S.current/1e3))||{};z&&(M.current=setTimeout(()=>j(B),V*1e3))}},[y,i]),np(()=>(t&&(T.current=requestAnimationFrame(L)),F),[t,i,u]),{elapsedTime:y,reset:j}},ZE=(t,i,a)=>{let u=t/2,m=i/2,x=u-m,y=2*x,b=a==="clockwise"?"1,0":"0,1",v=2*Math.PI*x;return{path:`m ${u},${m} a ${x},${x} 0 ${b} 0,${y} a ${x},${x} 0 ${b} 0,-${y}`,pathLength:v}},rp=(t,i)=>t===0||t===i?0:typeof i=="number"?t-i:0,KE=t=>({position:"relative",width:t,height:t}),qE={display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,top:0,width:"100%",height:"100%"},Sx=(t,i,a,u,m)=>{if(u===0)return i;let x=(m?u-t:t)/u;return i+a*x},ip=t=>{var i,a;return(a=(i=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(u,m,x,y)=>`#${m}${m}${x}${x}${y}${y}`).substring(1).match(/.{2}/g))==null?void 0:i.map(u=>parseInt(u,16)))!=null?a:[]},QE=(t,i)=>{var a;let{colors:u,colorsTime:m,isSmoothColorTransition:x=!0}=t;if(typeof u=="string")return u;let y=(a=m==null?void 0:m.findIndex((_,M)=>_>=i&&i>=m[M+1]))!=null?a:-1;if(!m||y===-1)return u[0];if(!x)return u[y];let b=m[y]-i,v=m[y]-m[y+1],C=ip(u[y]),S=ip(u[y+1]),T=!!t.isGrowing;return`rgb(${C.map((_,M)=>Sx(b,_,S[M]-_,v,T)|0).join(",")})`},JE=t=>{let{duration:i,initialRemainingTime:a,updateInterval:u,size:m=180,strokeWidth:x=12,trailStrokeWidth:y,isPlaying:b=!1,isGrowing:v=!1,rotation:C="clockwise",onComplete:S,onUpdate:T}=t,_=N.useRef(),M=Math.max(x,y??0),{path:L,pathLength:F}=ZE(m,M,C),{elapsedTime:j}=$E({isPlaying:b,duration:i,startAt:rp(i,a),updateInterval:u,onUpdate:typeof T=="function"?V=>{let B=Math.ceil(i-V);B!==_.current&&(_.current=B,T(B))}:void 0,onComplete:typeof S=="function"?V=>{var B;let{shouldRepeat:Y,delay:$,newInitialRemainingTime:re}=(B=S(V))!=null?B:{};if(Y)return{shouldRepeat:Y,delay:$,newStartAt:rp(i,re)}}:void 0}),z=i-j;return{elapsedTime:j,path:L,pathLength:F,remainingTime:Math.ceil(z),rotation:C,size:m,stroke:QE(t,z),strokeDashoffset:Sx(j,0,F,i,v),strokeWidth:x}},ph=t=>{let{children:i,strokeLinecap:a,trailColor:u,trailStrokeWidth:m}=t,{path:x,pathLength:y,stroke:b,strokeDashoffset:v,remainingTime:C,elapsedTime:S,size:T,strokeWidth:_}=JE(t);return Ht.createElement("div",{style:KE(T)},Ht.createElement("svg",{viewBox:`0 0 ${T} ${T}`,width:T,height:T,xmlns:"http://www.w3.org/2000/svg"},Ht.createElement("path",{d:x,fill:"none",stroke:u??"#d9d9d9",strokeWidth:m??_}),Ht.createElement("path",{d:x,fill:"none",stroke:b,strokeLinecap:a??"round",strokeWidth:_,strokeDasharray:y,strokeDashoffset:v})),typeof i=="function"&&Ht.createElement("div",{style:qE},i({remainingTime:C,elapsedTime:S,color:b})))};ph.displayName="CountdownCircleTimer";const eS=({onComplete:t})=>{const[i,a]=N.useState(7),u=N.useRef(null);N.useEffect(()=>(u.current&&clearInterval(u.current),u.current=setInterval(()=>{a(b=>b<=1?(clearInterval(u.current),t&&setTimeout(t,400),0):b-1)},1e3),()=>{u.current&&clearInterval(u.current)}),[t]);const m=i/7,x=2*Math.PI*120,y=x*(1-m);return h.jsxs("div",{className:"lobby-countdown-overlay",children:[h.jsx("div",{className:"countdown-bg-gradient"}),h.jsxs("div",{className:"countdown-floating-orbs",children:[h.jsx("div",{className:"orb orb-1"}),h.jsx("div",{className:"orb orb-2"}),h.jsx("div",{className:"orb orb-3"}),h.jsx("div",{className:"orb orb-4"})]}),h.jsxs("div",{className:"lobby-countdown-content",children:[h.jsxs("svg",{className:"countdown-ring",viewBox:"0 0 260 260",children:[h.jsx("circle",{className:"countdown-ring-bg",cx:"130",cy:"130",r:"120",fill:"none",strokeWidth:"6"}),h.jsx(vt.circle,{className:"countdown-ring-progress",cx:"130",cy:"130",r:"120",fill:"none",strokeWidth:"6",strokeLinecap:"round",strokeDasharray:x,initial:{strokeDashoffset:0},animate:{strokeDashoffset:y},transition:{duration:.8,ease:"easeInOut"}})]}),h.jsx("div",{className:"countdown-number-container",children:h.jsx(Er,{mode:"popLayout",children:h.jsx(vt.div,{className:"lobby-countdown-number",initial:{scale:.5,opacity:0,filter:"blur(10px)",y:40},animate:{scale:1,opacity:1,filter:"blur(0px)",y:0},exit:{scale:1.5,opacity:0,filter:"blur(8px)",y:-30},transition:{duration:.5,ease:[.16,1,.3,1]},children:i},i)})}),h.jsx(vt.div,{className:"lobby-countdown-text",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.5},children:i>0?"Get ready!":"Starting..."})]}),h.jsx(Er,{children:h.jsx(vt.div,{className:"countdown-pulse",initial:{scale:.8,opacity:.5},animate:{scale:2.5,opacity:0},transition:{duration:1,ease:"easeOut"}},i)})]})},tS=({isActive:t})=>{const[i,a]=N.useState(0),u=N.useRef(null);N.useEffect(()=>{if(!t)return;let y=null;const b=4e3,v=C=>{y===null&&(y=C);const S=C-y,T=Math.min(S/b,1);a(T),T<1&&(u.current=requestAnimationFrame(v))};return u.current=requestAnimationFrame(v),()=>{u.current&&cancelAnimationFrame(u.current)}},[t]);const m=Math.round(i*100),x=i*100;return h.jsxs("div",{className:"slide2-layout",children:[h.jsxs("h2",{className:"slide2-header",children:["Raise your volume to 100%",h.jsx("span",{className:"slide2-header-sub",children:"You need this to know when you've matched."})]}),h.jsxs("div",{className:"slide2-content",children:[h.jsx("div",{className:"slide2-arrow-section",children:h.jsxs("div",{className:"slide2-chevron-group",children:[h.jsx("svg",{className:"slide2-chevron slide2-chevron-1",width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",children:h.jsx("path",{d:"M15 18L9 12L15 6",stroke:"#4b73ef",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),h.jsx("svg",{className:"slide2-chevron slide2-chevron-2",width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",children:h.jsx("path",{d:"M15 18L9 12L15 6",stroke:"#4b73ef",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),h.jsx("svg",{className:"slide2-chevron slide2-chevron-3",width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",children:h.jsx("path",{d:"M15 18L9 12L15 6",stroke:"#4b73ef",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})]})}),h.jsxs("div",{className:"slide2-slider-section",children:[h.jsxs("svg",{className:"slide2-volume-icon",width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",children:[h.jsx("path",{d:"M11 5L6 9H2v6h4l5 4V5z",fill:"#4b73ef",stroke:"#4b73ef",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),h.jsx("path",{d:"M19.07 4.93a10 10 0 010 14.14M15.54 8.46a5 5 0 010 7.07",stroke:"#4b73ef",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),h.jsx("div",{className:`slide2-number ${i>=1?"slide2-number-complete":""}`,children:m}),h.jsx("div",{className:"slide2-track",children:h.jsx("div",{className:"slide2-track-bg",children:h.jsx("div",{className:`slide2-track-fill ${i>=1?"slide2-fill-complete":""}`,style:{height:`${x}%`}})})}),h.jsxs("svg",{className:"slide2-volume-icon",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",children:[h.jsx("path",{d:"M11 5L6 9H2v6h4l5 4V5z",fill:"#4b73ef",stroke:"#4b73ef",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),h.jsx("line",{x1:"23",y1:"9",x2:"17",y2:"15",stroke:"#4b73ef",strokeWidth:"2",strokeLinecap:"round"}),h.jsx("line",{x1:"17",y1:"9",x2:"23",y2:"15",stroke:"#4b73ef",strokeWidth:"2",strokeLinecap:"round"})]})]})]})]})},nS=({isActive:t,onPauseClicked:i})=>{const a=N.useRef(null),u=N.useRef(null),m=N.useRef(null),x=N.useRef(null),y=N.useRef(null),b=N.useRef({x:0,y:0}),v=N.useRef({x:0,y:0});return N.useEffect(()=>{if(!t)return;const C=()=>{if(!a.current||!u.current||!m.current)return;const j=a.current.getBoundingClientRect(),z=u.current.getBoundingClientRect(),V=m.current.getBoundingClientRect();b.current={x:(z.left+z.right)/2-j.left,y:z.bottom-j.top+12},v.current={x:(V.left+V.right)/2-j.left,y:(V.top+V.bottom)/2-j.top}},S=(j,z,V)=>j+(z-j)*V,T=j=>j<.5?2*j*j:-1+(4-2*j)*j;let _=null;const M=3500,L=j=>{if(!x.current){y.current=requestAnimationFrame(L);return}_===null&&(_=j);const V=(j-_)%M/M,B=b.current.x,Y=b.current.y,$=v.current.x,re=v.current.y;let G,te,J,ye;if(V<=.35){const _e=T(V/.35);G=S(B,$,_e),te=S(Y,re,_e),J=1,ye=S(0,10,_e)}else if(V<=.45)G=$,te=re,J=S(1,.8,(V-.35)/.1),ye=10;else if(V<=.55)G=$,te=re,J=S(.8,1,(V-.45)/.1),ye=10;else if(V<=.9){const _e=T((V-.55)/.35);G=S($,B,_e),te=S(re,Y,_e),J=1,ye=S(10,0,_e)}else G=B,te=Y,J=1,ye=0;x.current.style.left=`${G}px`,x.current.style.top=`${te}px`,x.current.style.transform=`translate(-50%, -50%) rotate(${ye}deg) scale(${J})`,y.current=requestAnimationFrame(L)},F=setTimeout(()=>{C(),y.current=requestAnimationFrame(L)},50);return window.addEventListener("resize",C),()=>{clearTimeout(F),y.current&&cancelAnimationFrame(y.current),window.removeEventListener("resize",C)}},[t]),h.jsxs("div",{className:"slide3-layout",ref:a,children:[h.jsxs("div",{className:"slide3-top-content",children:[h.jsx("h2",{className:"slide3-header",children:"Click 'Pause' to take a break or leave."}),h.jsx("span",{className:"slide3-subheader",ref:u,children:"You can rejoin at any time."})]}),h.jsxs("div",{className:"slide3-phone-frame",children:[h.jsx("button",{className:"slide3-mock-pause",ref:m,onClick:i,children:"Pause"}),h.jsx("span",{className:"slide3-tap-hint",children:"Tap here to continue"}),h.jsx("img",{src:"/assets/stock-woman-cropped.png",alt:"Profile example",className:"slide3-phone-image"})]}),t&&h.jsx("div",{className:"slide3-finger-cursor",ref:x,children:h.jsx("svg",{width:"30",height:"30",viewBox:"0 0 24 24",fill:"none",children:h.jsx("path",{d:"M11.5 2A1.5 1.5 0 0 0 10 3.5V12l-2.3-2.3a1.5 1.5 0 0 0-2.12 2.12l5.16 5.16A4.5 4.5 0 0 0 13.92 18.5h1.58A3.5 3.5 0 0 0 19 15V8a1.5 1.5 0 0 0-3 0v-.5a1.5 1.5 0 0 0-3 0V7a1.5 1.5 0 0 0-3 0V3.5A1.5 1.5 0 0 0 11.5 2z",fill:"#4b73ef",opacity:"0.9"})})})]})},rS=({onComplete:t,lobbyCode:i="this"})=>{const{userProfile:a}=N.useContext(Wn),[u,m]=N.useState(0),[x,y]=N.useState(!1),[b,v]=N.useState(!1),[C,S]=N.useState([0]),[T,_]=N.useState(!1),[M,L]=N.useState(!1),[F,j]=N.useState(!1),z=N.useRef(null),V=N.useRef(null),B=N.useRef(!1),Y=N.useRef(t);Y.current=t;const $=()=>{B.current||(B.current=!0,Y.current&&Y.current())},re=()=>{B.current||(z.current&&clearInterval(z.current),V.current&&clearTimeout(V.current),L(!0),setTimeout(()=>{j(!0),setTimeout(()=>{$()},1500)},500))},G=[{duration:2e3},{customSlide:!0,duration:4e3},{customSlide:!0,duration:1e4}];return N.useEffect(()=>{const te=()=>{if(u>=G.length-1){clearInterval(z.current),B.current||(L(!0),setTimeout(()=>{j(!0),setTimeout(()=>{$()},1500)},500));return}y(!0);const J=u+1;S([u,J]),V.current=setTimeout(()=>{_(!1),m(J),y(!1),setTimeout(()=>{S([J]),v(!0),G[J].animatedText&&_(!0)},500)},500)};return z.current=setInterval(te,G[u].duration),v(!0),u===0&&G[0].animatedText&&_(!0),()=>{z.current&&clearInterval(z.current),V.current&&clearTimeout(V.current)}},[u,G.length]),h.jsx("div",{className:"tutorial-overlay",children:h.jsxs("div",{className:"tutorial-container",children:[F&&h.jsx("div",{className:"slide3-congrats",children:h.jsx("h2",{className:"slide3-congrats-text",children:"Congratulations! You are ready."})}),C.map(te=>h.jsxs("div",{className:`tutorial-slide ${te===u?"current":te<u?"previous":"next"} ${M?"tutorial-fading":""}`,children:[te===u&&G[te].animatedText&&T&&h.jsx("div",{className:"animated-text pop-burst",children:G[te].animatedText}),te===1?h.jsx(tS,{isActive:te===u}):te===2?h.jsx(nS,{isActive:te===u,onPauseClicked:re}):null,h.jsx("div",{className:`tutorial-text ${b&&te===u?"text-animate":""}`,children:G[te].text})]},te)),h.jsx("div",{className:`tutorial-progress-bar-container ${M?"tutorial-fading":""}`,children:h.jsx("div",{className:"tutorial-progress-bar",children:h.jsx("div",{className:"tutorial-progress-bar-fill"})})})]})})},iS=t=>Array.from({length:t},(i,a)=>{const u=a/t*Math.PI*2,m=300+Math.random()*200;return{id:a,startX:Math.cos(u)*m,startY:Math.sin(u)*m,delay:Math.random()*.5,duration:.8+Math.random()*.4,size:4+Math.random()*6}}),sS=t=>Array.from({length:t},(i,a)=>({id:a,left:Math.random()*100,delay:Math.random()*2,duration:1+Math.random()*1,size:2+Math.random()*3})),oS=({isVisible:t,onAnimationEnd:i})=>{const[a,u]=N.useState(!1),[m,x]=N.useState(!1),y=N.useRef(null),b=N.useMemo(()=>iS(30),[]),v=N.useMemo(()=>sS(20),[]);return N.useEffect(()=>(y.current&&clearTimeout(y.current),t?(u(!0),x(!1),setTimeout(()=>x(!0),600),y.current=setTimeout(()=>{u(!1),x(!1),i&&i()},3500)):(u(!1),x(!1)),()=>{y.current&&(clearTimeout(y.current),y.current=null)}),[t,i]),h.jsx(Er,{children:a&&h.jsxs(vt.div,{className:"match-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[h.jsx("div",{className:"match-spotlight-bg"}),h.jsx("div",{className:"spotlight-rays",children:[...Array(8)].map((C,S)=>h.jsx(vt.div,{className:"ray",style:{transform:`rotate(${S*45}deg)`},initial:{opacity:0,scaleY:0},animate:{opacity:.15,scaleY:1},transition:{delay:.3+S*.05,duration:.6,ease:"easeOut"}},S))}),h.jsx("div",{className:"particles-container",children:b.map(C=>h.jsx(vt.div,{className:"converge-particle",style:{width:C.size,height:C.size},initial:{x:C.startX,y:C.startY,opacity:0,scale:0},animate:{x:0,y:0,opacity:[0,1,1,0],scale:[0,1.5,1,0]},transition:{duration:C.duration,delay:C.delay,ease:[.25,.1,.25,1]}},C.id))}),h.jsx(vt.div,{className:"central-burst",initial:{scale:0,opacity:0},animate:{scale:[0,1.5,1],opacity:[0,1,.8]},transition:{delay:.5,duration:.6,ease:"easeOut"}}),h.jsx("div",{className:"falling-stars",children:v.map(C=>h.jsx(vt.div,{className:"falling-star",style:{left:`${C.left}%`,width:C.size,height:C.size},initial:{y:-20,opacity:0},animate:{y:[null,window.innerHeight+20],opacity:[0,1,1,0]},transition:{duration:C.duration,delay:C.delay,repeat:1,ease:"linear"}},C.id))}),h.jsx(Er,{children:m&&h.jsxs(vt.div,{className:"match-text-container",initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:1.2,opacity:0},transition:{type:"spring",stiffness:300,damping:20},children:[h.jsx(vt.div,{className:"match-text-glow",animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:"It's a Match!"}),h.jsx("div",{className:"match-text",children:"It's a Match!"}),h.jsx(vt.div,{className:"match-subtext",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:.3,duration:.4},children:"Get ready to connect"})]})}),m&&h.jsx(vt.div,{className:"ring-pulse",initial:{scale:.2,opacity:1},animate:{scale:3,opacity:0},transition:{duration:1,ease:"easeOut"}})]})})},aS=({isVisible:t,onAnimationEnd:i})=>{const[a,u]=N.useState(!1),m=N.useRef(null),x=N.useRef(i);return x.current=i,N.useEffect(()=>(m.current&&clearTimeout(m.current),t?(u(!0),m.current=setTimeout(()=>{var y;u(!1),(y=x.current)==null||y.call(x)},2200)):u(!1),()=>{m.current&&(clearTimeout(m.current),m.current=null)}),[t]),h.jsx(Er,{children:a&&h.jsxs(vt.div,{className:"ready-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[h.jsx("div",{className:"ready-backdrop"}),h.jsxs(vt.div,{className:"ready-card",initial:{scale:.8,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},transition:{type:"spring",stiffness:300,damping:25,delay:.1},children:[h.jsxs("div",{className:"checkmark-container",children:[h.jsxs("svg",{className:"checkmark-svg",viewBox:"0 0 100 100",children:[h.jsx(vt.circle,{className:"checkmark-circle",cx:"50",cy:"50",r:"45",fill:"none",strokeWidth:"4",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.5,delay:.2,ease:"easeOut"}}),h.jsx(vt.path,{className:"checkmark-check",d:"M30 50 L45 65 L70 35",fill:"none",strokeWidth:"5",strokeLinecap:"round",strokeLinejoin:"round",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.4,delay:.6,ease:"easeOut"}})]}),h.jsx(vt.div,{className:"success-pulse",initial:{scale:.8,opacity:.6},animate:{scale:1.8,opacity:0},transition:{duration:.8,delay:.9,ease:"easeOut"}})]}),h.jsx(vt.div,{className:"ready-text",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.8,duration:.3},children:"You're ready!"}),h.jsx(vt.div,{className:"ready-subtext",initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:.3},children:"You will be paired up soon."})]})]})})},lS=({children:t,delay:i=0,index:a,onMouseEnter:u})=>{const m=N.useRef(null),x=pE(m,{amount:.5,once:!1});return h.jsx(vt.div,{ref:m,"data-index":a,onMouseEnter:u,initial:{scale:.7,opacity:0},animate:x?{scale:1,opacity:1}:{scale:.7,opacity:0},transition:{duration:.2,delay:i},className:"animated-tag-item-wrapper",children:t})},sp=({tags:t=[],selectedTags:i=[],onTagChange:a,showGradients:u=!0,enableArrowNavigation:m=!0,displayScrollbar:x=!0,className:y="",maxHeight:b=400})=>{const v=N.useRef(null),[C,S]=N.useState(-1),[T,_]=N.useState(!1),[M,L]=N.useState(0),[F,j]=N.useState(1),z=N.useCallback(Y=>{S(Y)},[]),V=N.useCallback((Y,$)=>{S($),a&&a(Y)},[a]),B=N.useCallback(Y=>{const{scrollTop:$,scrollHeight:re,clientHeight:G}=Y.target;L(Math.min($/50,1));const te=re-($+G);j(re<=G?0:Math.min(te/50,1))},[]);return N.useEffect(()=>{if(v.current){const{scrollHeight:Y,clientHeight:$}=v.current;Y<=$?j(0):j(1)}},[t]),N.useEffect(()=>{if(!m)return;const Y=$=>{$.key==="ArrowDown"||$.key==="Tab"&&!$.shiftKey?($.preventDefault(),_(!0),S(re=>Math.min(re+1,t.length-1))):$.key==="ArrowUp"||$.key==="Tab"&&$.shiftKey?($.preventDefault(),_(!0),S(re=>Math.max(re-1,0))):($.key==="Enter"||$.key===" ")&&C>=0&&C<t.length&&($.preventDefault(),a&&a(t[C]))};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[t,C,a,m]),N.useEffect(()=>{if(!T||C<0||!v.current)return;const Y=v.current,$=Y.querySelector(`[data-index="${C}"]`);if($){const G=Y.scrollTop,te=Y.clientHeight,J=$.offsetTop,ye=J+$.offsetHeight;J<G+50?Y.scrollTo({top:J-50,behavior:"smooth"}):ye>G+te-50&&Y.scrollTo({top:ye-te+50,behavior:"smooth"})}_(!1)},[C,T]),h.jsxs("div",{className:`animated-tag-list-container ${y}`,children:[h.jsx("div",{ref:v,className:`animated-tag-list ${x?"":"no-scrollbar"}`,onScroll:B,style:{maxHeight:`${b}px`},children:t.map((Y,$)=>h.jsx(lS,{delay:.05,index:$,onMouseEnter:()=>z($),children:h.jsxs("label",{className:`animated-tag-label ${C===$?"focused":""} ${i.includes(Y)?"selected":""}`,onClick:re=>{re.preventDefault(),V(Y,$)},children:[h.jsx("input",{type:"checkbox",checked:i.includes(Y),onChange:()=>{},tabIndex:-1}),h.jsx("span",{className:"tag-text",children:Y})]})},`tag-${Y}`))}),u&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"animated-tag-top-gradient",style:{opacity:M}}),h.jsx("div",{className:"animated-tag-bottom-gradient",style:{opacity:F}})]})]})},cS=({onProfileClick:t,onTutorialClick:i,userImage:a})=>{const[u,m]=N.useState(!1),x=N.useRef(null);N.useEffect(()=>{const v=C=>{x.current&&!x.current.contains(C.target)&&m(!1)};return document.addEventListener("mousedown",v),document.addEventListener("touchstart",v),()=>{document.removeEventListener("mousedown",v),document.removeEventListener("touchstart",v)}},[]);const y=()=>{m(!1),t()},b=()=>{m(!1),i()};return h.jsxs("div",{className:"profile-dropdown-container",ref:x,children:[h.jsxs("button",{className:`profile-dropdown-button ${u?"active":""}`,onClick:()=>m(!u),children:[h.jsx("div",{className:"profile-dropdown-avatar",children:h.jsx("img",{src:a||"/assets/avatar_3.png",alt:"Profile"})}),h.jsx("span",{className:"profile-dropdown-text",children:"            "}),h.jsx("svg",{className:`profile-dropdown-chevron ${u?"rotated":""}`,width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:h.jsx("path",{d:"M2.5 4.5L6 8L9.5 4.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]}),h.jsx(Er,{children:u&&h.jsxs(vt.div,{className:"profile-dropdown-menu",initial:{opacity:0,y:-8,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-8,scale:.95},transition:{duration:.15,ease:[.4,0,.2,1]},children:[h.jsxs("button",{className:"profile-dropdown-item profile-dropdown-item--primary",onClick:y,children:[h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[h.jsx("circle",{cx:"12",cy:"8",r:"4",stroke:"currentColor",strokeWidth:"2"}),h.jsx("path",{d:"M4 20C4 16.6863 7.58172 14 12 14C16.4183 14 20 16.6863 20 20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),h.jsx("span",{children:"Edit Profile"})]}),h.jsx("div",{className:"profile-dropdown-divider"}),h.jsxs("button",{className:"profile-dropdown-item",onClick:b,children:[h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[h.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:"currentColor",strokeWidth:"2"}),h.jsx("path",{d:"M12 8V12L15 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),h.jsx("span",{children:"Tutorial"})]})]})})]})},uS=({isOpen:t,onClose:i})=>{const{userProfile:a}=N.useContext(Wn),[u,m]=N.useState(""),[x,y]=N.useState(""),[b,v]=N.useState(""),[C,S]=N.useState(null),[T,_]=N.useState(null),[M,L]=N.useState(!1),[F,j]=N.useState({x:0,y:0}),[z,V]=N.useState(1),[B,Y]=N.useState(null),[$,re]=N.useState(!1),[G,te]=N.useState(!1),[J,ye]=N.useState(""),[_e,Ne]=N.useState(!0),Se=N.useRef(null);N.useEffect(()=>{t&&(ye(""),_(null),re(!1),j({x:0,y:0}),V(1),Ee())},[t]);const Ee=async()=>{var K,X,we;Ne(!0),ye("");try{const be=await Ct("/load_user");if(be.ok){const de=await be.json();m(((K=de.profile)==null?void 0:K.name)||""),y(de.email||""),v(((X=de.profile)==null?void 0:X.contact_url)||""),L(de.email_verified===!0),(we=de.profile)!=null&&we.image_data?S(`data:image/jpeg;base64,${de.profile.image_data}`):a!=null&&a.image_data&&S(`data:image/jpeg;base64,${a.image_data}`)}}catch(be){console.error("Error loading user data:",be),m((a==null?void 0:a.name)||""),y((user==null?void 0:user.email)||""),a!=null&&a.image_data&&S(`data:image/jpeg;base64,${a.image_data}`)}finally{Ne(!1)}},Z=K=>{const X=K.target.files[0];if(X){const we=new FileReader;we.onload=be=>{S(be.target.result),re(!0)},we.readAsDataURL(X)}},Le=(K,X)=>{Y(X)},ve=async()=>{try{const K=await Uc(C,B);_(K),S(K),re(!1)}catch(K){console.error("Error cropping image:",K),ye("Failed to crop image. Please try again.")}},ge=()=>{re(!1),a!=null&&a.image_data&&S(`data:image/jpeg;base64,${a.image_data}`)},De=async K=>{var X;K.preventDefault(),te(!0),ye("");try{const we={name:u.trim()||void 0,contact_url:b.trim()||void 0};if(!M&&x.trim()){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(x.trim())){ye("Please enter a valid email address."),te(!1);return}we.email=x.trim()}T&&(we.image_data=T.split(",")[1]);const be=await Ct("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(we)});if(!be.ok){const de=await be.json();throw new Error(de.detail||"Failed to update profile")}te(!1),i()}catch(we){console.error("Error updating profile:",we),(X=we.message)!=null&&X.toLowerCase().includes("already associated")?ye("This email is already in use by another account."):ye(we.message||"Failed to update profile. Please try again.")}finally{te(!1)}},Ce=T||C||"/assets/avatar_3.png";return h.jsx(Er,{children:t&&h.jsx(vt.div,{className:"lobby-profile-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:i,children:h.jsxs(vt.div,{className:"lobby-profile-modal",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",stiffness:400,damping:30},onClick:K=>K.stopPropagation(),children:[h.jsx("button",{className:"lobby-profile-modal-close",onClick:i,"aria-label":"Close",children:h.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:h.jsx("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}),h.jsx("h2",{className:"lobby-profile-modal-title",children:"Edit Profile"}),_e?h.jsxs("div",{className:"lobby-profile-modal-loading",children:[h.jsx("div",{className:"lobby-profile-spinner"}),h.jsx("span",{children:"Loading..."})]}):h.jsxs("form",{onSubmit:De,className:"lobby-profile-form",children:[J&&h.jsx("div",{className:"lobby-profile-error",children:J}),$?h.jsxs("div",{className:"lobby-profile-crop-section",children:[h.jsx("div",{className:"lobby-profile-crop-container",children:h.jsx(Vc,{image:C,crop:F,zoom:z,aspect:1,onCropComplete:Le,onCropChange:j,onZoomChange:V,cropShape:"round"})}),h.jsxs("div",{className:"lobby-profile-crop-actions",children:[h.jsx("button",{type:"button",className:"lobby-profile-btn-secondary",onClick:ge,children:"Cancel"}),h.jsx("button",{type:"button",className:"lobby-profile-btn-primary",onClick:ve,children:"Save Crop"})]})]}):h.jsxs("div",{className:"lobby-profile-image-section",children:[h.jsxs("div",{className:"lobby-profile-image-container",children:[h.jsx("img",{src:Ce,alt:"Profile",className:"lobby-profile-image"}),h.jsx("button",{type:"button",className:"lobby-profile-image-edit",onClick:()=>{var K;return(K=Se.current)==null?void 0:K.click()},children:h.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#144dff"}),h.jsx("path",{d:"M14.5 7.5L16.5 9.5M8 16L8.5 13.5L14.5 7.5L16.5 9.5L10.5 15.5L8 16Z",fill:"white",stroke:"white",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]}),h.jsx("input",{ref:Se,type:"file",accept:"image/*",onChange:Z,style:{display:"none"}}),h.jsx("span",{className:"lobby-profile-image-hint",children:"Tap to change photo"})]}),h.jsxs("div",{className:"lobby-profile-field",children:[h.jsx("label",{className:"lobby-profile-label",children:"Name"}),h.jsx("input",{type:"text",value:u,onChange:K=>m(K.target.value),placeholder:"Your name",className:"lobby-profile-input"})]}),h.jsxs("div",{className:"lobby-profile-field",children:[h.jsxs("label",{className:"lobby-profile-label",children:["Email",M&&h.jsxs("span",{className:"lobby-profile-verified-badge",children:[h.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",children:h.jsx("path",{d:"M5 13L9 17L19 7",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),"Verified"]})]}),h.jsx("input",{type:"email",value:x,onChange:K=>y(K.target.value),placeholder:"you@example.com",className:`lobby-profile-input ${M?"lobby-profile-input--readonly":""}`,disabled:M}),M&&h.jsx("span",{className:"lobby-profile-field-hint",children:"Verified emails cannot be changed"})]}),h.jsxs("div",{className:"lobby-profile-field",children:[h.jsx("label",{className:"lobby-profile-label",children:"Contact URL"}),h.jsx("input",{type:"text",value:b,onChange:K=>v(K.target.value),placeholder:"linkedin.com/in/yourprofile",className:"lobby-profile-input"}),h.jsx("span",{className:"lobby-profile-field-hint",children:"LinkedIn, Twitter, or any way to connect"})]}),h.jsx("button",{type:"submit",className:"lobby-profile-submit",disabled:G||$,children:G?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"lobby-profile-spinner-small"}),"Saving..."]}):"Save Changes"})]})]})})})},op={self:"Who are you?",desiring:"Who do you want to meet?"},dS=({isVisible:t,phase:i})=>h.jsx(Er,{children:t&&h.jsx(vt.div,{className:"tags-phase-intro-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:h.jsx(vt.h2,{className:"tags-phase-intro-text",initial:{clipPath:"inset(0 100% 0 0)"},animate:{clipPath:"inset(0 0% 0 0)"},exit:{opacity:0},transition:{duration:2.2,ease:"easeOut"},children:op[i]||op.self})},"tags-phase-intro")}),gc=9,fS=5,hS=5e3,mS=!1,pS=()=>{var li;const t=Math.floor(540),[i,a]=N.useState([]),[u,m]=N.useState("self"),[x,y]=N.useState(!1),[b,v]=N.useState(""),C=N.useRef(null),S=N.useRef(null),[T,_]=N.useState(!1),M=N.useRef(!1),[L,F]=N.useState(!1),[j,z]=N.useState(!1),[V,B]=N.useState(!1),Y=N.useRef(null),[$,re]=N.useState(!1),{loadSound:G,loadAmbientSound:te,switchToMainTrack:J,seekTo:ye,cancelSound:_e,checkSound:Ne,soundEnabled:Se,setSoundEnabled:Ee,isPlaying:Z}=Pf(),[Le,ve]=N.useState("yonder"),ge=Bn(),{code:De}=ky(),[Ce,K]=N.useState(null);fx(K,null,Le);const{user:X,userProfile:we,checkAuth:be,permissions:de,isAuthLoading:q,authLoadingMessage:Re,emailVerified:xe}=N.useContext(Wn),[Ae,nt]=N.useState(!1),[Xe,ce]=N.useState([]),[me,Ye]=N.useState(""),[$e,yt]=N.useState(""),[dt,Ke]=N.useState(!1),Qe=N.useRef(null),Bt=N.useRef(localStorage.getItem("hasShownEmailBackupModal")==="true"),[ze,mn]=N.useState(!1),Hn=N.useRef(localStorage.getItem("hasShownPauseInfoModal")==="true");N.useEffect(()=>{if(!q&&!X){const qe=new URLSearchParams(window.location.search).get("code")||De;ge(qe?`/signup?redirect=lobby&code=${qe}`:"/signup?redirect=lobby")}},[q,X,ge,De]),N.useEffect(()=>{(()=>{const At=new URLSearchParams(window.location.search).get("code")||De;if(At){ve(At),vE(At),ks(At);const Ge=`hasSeenTutorial_${At}`,Mt=localStorage.getItem(Ge),sn=!!localStorage.getItem("access_token");console.log("Tutorial check:",{codeParam:At,lobbyTutorialKey:Ge,hasSeenLobbyTutorial:Mt,isAuthenticated:sn}),!Mt&&sn&&(rn(!0),localStorage.setItem(Ge,"true"))}})()},[De]);const[Ve,kt]=N.useState(null),[We,ht]=N.useState(null),[et,_t]=N.useState(null),[en,Yt]=N.useState(null),[ct,Ie]=N.useState(null),ae=N.useRef(!1),ft=N.useRef(null),ot=N.useRef(null),ut=N.useRef(null),Zt=N.useRef(null),cn=N.useRef(!1),un=N.useRef(!1),[Fe,dn]=N.useState(null),[Gn,Yr]=N.useState(null),[Fn,Qi]=N.useState(null),[xn,$r]=N.useState(null),[si,Vn]=N.useState(!0),ki=N.useRef(0),[yn,Ji]=N.useState(null),[Kt,Sr]=N.useState(null),[$t,Ze]=N.useState([]),[kn,es]=N.useState([]),[Xn,gr]=N.useState(!document.hidden),oi=N.useRef("yonder"),Ar=N.useRef({}),nr=N.useRef([]),[Jo,_s]=N.useState(!1),Yn=N.useRef(null),[$n,tn]=N.useState(!1);N.useEffect(()=>{oi.current=Le},[Le]);async function Rs(Oe,qe){const Ge=await(await Ct("/set_profile_info",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tags_work:Oe,tags_desiring_work:qe})})).json();console.log("SET PROFILE INFO:",Ge)}const zt=async Oe=>{if(Oe.length!==0){_s(!0);try{const qe=await Ct("/load_batch_pfp_small_icons",{method:"POST",headers:{"Content-Type":"application/json",lobby_code:oi.current},body:JSON.stringify({usernames:Oe})});if(qe.ok){const At=await qe.json();Ar.current={...Ar.current,...At},console.log("Profile images fetched:",Object.keys(At))}else console.error("Failed to fetch profile images:",qe.status)}catch(qe){console.error("Error fetching profile images:",qe)}finally{_s(!1)}}},ks=async Oe=>{try{const qe=await Ct("/lobby_setup_data",{headers:{lobby_code:Oe}});if(qe.ok){const At=await qe.json();At.logo_icon?(Yn.current=At.logo_icon,tn(!0),console.log("Sponsor logo loaded successfully")):console.log("No sponsor logo available for this lobby")}else console.error("Failed to fetch lobby setup data:",qe.status)}catch(qe){console.error("Error fetching lobby setup data:",qe)}};async function Te(){try{_e(),Ar.current={},nr.current=[],(await Ct("/disconnect_lobby",{headers:{lobby_code:Le}})).ok&&ge("/")}catch(Oe){console.error("Error disconnecting from lobby:",Oe),ge("/")}finally{_e(),ge("/"),console.log("finally")}}const[fo,Gt]=N.useState(!1),[yi,ho]=N.useState(null),Pt=N.useRef(!1),[It,Rt]=N.useState(!1),[Zn,Pi]=N.useState(null),[ts,pn]=N.useState(!1),Nr=(Oe,qe)=>{if(!Oe||!qe)return null;for(const At of Oe.tags_work)if(qe.desiring_tags_work.includes(At)){for(const Ge of qe.tags_work)if(Oe.desiring_tags_work.includes(Ge))return{playerTag:At,opponentTag:Ge}}return null};async function ai(){try{ki.current+=1,ki.current>5&&(ki.current=0,ae.current=!1);const Oe=!document.hidden,qe=oi.current;if(console.log("lobby code fr:",qe),qe=="yonder"){console.log("lobby code is not set");return}const At=await Ct(`/lobby?is_visible=${Oe}`,{headers:{is_visible_t_f:Oe?"t":"f",lobby_code:qe}});if(At.ok){const Ge=await At.json();if(console.log("LOBBY PAIR DATA:",qe,Ge),Ge.status=="inactive"){cn.current||(cn.current=!0,re(!0),J(t).then(()=>{setTimeout(()=>{_e(),ge("/post-event-auth")},7e3)}).catch(()=>{_e(),ge("/post-event-auth")}));return}Ge.lobby_state!=="terminated"&&SE(),_t(Ge.opponent_name),Ge.opponent_name==null&&kt(null),a(Ge.custom_tags),dn(Ge.lobby_state),$r(Ge.lobby_duration);const Mt=typeof Ge.round_time_left=="number"&&!isNaN(Ge.round_time_left)?Ge.round_time_left:0;console.log("Timer Debug:",{roundDuration:Ge.lobby_duration,timeLeft:Mt,lobbyState:Ge.lobby_state,usingDefaultDuration:!Ge.lobby_duration}),ut.current=Mt,Zt.current=Ge.beat_go_off,Yr(Math.floor(Mt));const sn=Math.floor(Mt/60),mt=Math.floor(Mt%60);if(Qi(`${sn}:${mt.toString().padStart(2,"0")}`),Ie(Ge.table_number),Ge.player_tags!=null&&Ge.player_tags.tags_work!=null&&Ze(Ge.player_tags.tags_work),Ge.player_tags!=null&&Ge.player_tags.desiring_tags_work!=null&&es(Ge.player_tags.desiring_tags_work),!un.current&&Ge.lobby_state!=="checkin"){un.current=!0;const vn=Ge.lobby_state==="active"&&ut.current?t-ut.current:t;J(vn).catch(()=>{Vn(!0)})}un.current&&ut.current!=null&&Ge.lobby_state=="active"&&ut.current!=0&&(ye(t-ut.current),console.log("seeking to",t-ut.current));const Ms=await Ct(`/display_lobby_metadata?lobby_code=${qe}`,{headers:{lobby_code:qe}});if(Ms.ok){const vn=await Ms.json();K(vn.player_count);const Tr=vn.usernames||[];if(JSON.stringify(nr.current)!==JSON.stringify(Tr)){nr.current=Tr;const cr=Tr.filter(Mn=>!Ar.current[Mn]&&Mn!==(X==null?void 0:X.username));cr.length>0&&(mS||(console.log("Fetching images for new users:",cr),zt(cr)))}}if((et!=Ge.opponent_name||Ve==null)&&!ae.current&&Ge.opponent_name!=null){ae.current=!0,console.log("fetching profile");const vn=await Ct("/paired_player_profile");if(vn.ok){const Tr=await vn.json();kt(Tr),console.log("profile fetched:",Tr.name)}else console.log("profile fetch failed");ae.current=!1}const wt=yi==="interrim"&&Ge.lobby_state==="active"&&Ge.opponent_name,wn=Ge.lobby_state==="active"&&Ge.opponent_name&&Ge.is_purgatory_pair&&ft.current!==Ge.opponent_name;if((wt||wn)&&!Pt.current){console.log("New pairing detected:",{isNormalPairingStart:wt,isPurgatoryPairing:wn}),ft.current=Ge.opponent_name;const vn=Nr(Ge.player_tags,Ge.opponent_tags);if(wn){St.current?console.log("Purgatory pairing - skipping animation (tutorial active)"):(console.log("Purgatory pairing - triggering animation"),Pt.current=!0,Gt(!0));const cr=()=>{ot.current&&(ot.current.currentTime=0,ot.current.play().catch(Mn=>console.log("Purgatory notification sound blocked:",Mn)))};St.current?setTimeout(cr,8e3):cr(),vn&&(console.log("Purgatory pairing also has interest match:",vn),Pi(vn),Rt(!0))}else vn&&(console.log("Normal pairing with interest match:",vn),Pi(vn),Rt(!0),Pt.current=!0,Gt(!0));const Tr=!xe&&!Bt.current,Ur=!Hn.current;if(Tr||Ur)try{const Mn=await(await Ct("/lobby/previous_match_profiles",{headers:{lobby_code:qe}})).json(),Pr=Mn.total_match_count||0;Tr&&Mn.profiles&&Mn.profiles.length>=2?(ce(Mn.profiles),nt(!0),Bt.current=!0,localStorage.setItem("hasShownEmailBackupModal","true")):Ur&&Pr>=4&&!Ae&&(mn(!0),Hn.current=!0,localStorage.setItem("hasShownPauseInfoModal","true"))}catch(cr){console.error("Error fetching previous match profiles:",cr)}}ho(Ge.lobby_state)}}catch(Oe){console.error("Error fetching lobby data:",Oe)}}N.useEffect(()=>{Ne()?Ee(!0):Ee(!1);const Oe=setInterval(async()=>{ai()},hS);return()=>clearInterval(Oe)},[]),N.useEffect(()=>{const Oe=()=>{ot.current||(ot.current=new Audio("./assets/sounds/new_banger_chorus.mp3"),ot.current.load(),console.log("Purgatory notification sound unlocked")),document.removeEventListener("click",Oe),document.removeEventListener("touchstart",Oe)};return document.addEventListener("click",Oe),document.addEventListener("touchstart",Oe),()=>{document.removeEventListener("click",Oe),document.removeEventListener("touchstart",Oe)}},[]),N.useEffect(()=>{const Oe=setTimeout(ai,1e3);return()=>clearTimeout(Oe)},[Fe,Le]),N.useEffect(()=>{const Oe=()=>{const qe=!document.hidden;qe&&!Xn&&(console.log("Page became visible - fetching latest data"),ai()),gr(qe)};return document.addEventListener("visibilitychange",Oe),()=>{document.removeEventListener("visibilitychange",Oe)}},[Xn]);const qt=()=>h.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(4px)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},children:h.jsxs("div",{style:{backgroundColor:"#ffffff",padding:"32px 28px",borderRadius:"24px",position:"relative",minWidth:"300px",maxWidth:"340px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.2)",textAlign:"center"},children:[h.jsx("button",{onClick:()=>Vn(!1),style:{color:"#ffffff",position:"absolute",right:"12px",top:"12px",border:"none",background:"transparent",fontSize:"10px",cursor:"pointer",width:"10px",height:"10px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:""}),h.jsx("h2",{style:{marginTop:"8px",marginBottom:"8px",color:"#1a1a2e",fontWeight:700,fontSize:"1.25rem",fontFamily:"-apple-system, BlinkMacSystemFont, sans-serif"},children:"Sound is Important"}),h.jsx("p",{style:{color:"#6b7280",fontSize:"0.9rem",marginBottom:"4px"},children:"Raise your volume for the best experience"}),h.jsx("button",{onClick:()=>{Fe==="checkin"?te():G(),Vn(!1)},style:{padding:"14px 32px",marginTop:"20px",backgroundColor:"#1a1a2e",color:"#ffffff",border:"none",borderRadius:"16px",fontWeight:600,cursor:"pointer",fontSize:"1rem",fontFamily:"-apple-system, BlinkMacSystemFont, sans-serif",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",transition:"all 0.2s ease"},children:"Enable Sound"})]})}),xr=(Oe,qe)=>{yn==null&&Ji($t),Kt==null&&Sr(kn);const At=Oe==="self"?yn:Kt;if(!(At!=null&&At.includes(qe))&&(At==null?void 0:At.length)>=fS){v("Reached tag limit for this section"),setTimeout(()=>{var Mt;(Mt=S.current)==null||Mt.scrollIntoView({behavior:"smooth",block:"center"})},100),setTimeout(()=>{v("")},3e3);return}Oe==="self"?Ji(Mt=>Mt.includes(qe)?Mt.filter(sn=>sn!==qe):[...Mt,qe]):Sr(Mt=>Mt.includes(qe)?Mt.filter(sn=>sn!==qe):[...Mt,qe])},ea=()=>{yn!=null&&(Rs(yn,Kt||[]),setTimeout(()=>{Ze(yn||[])},800)),m("desiring"),Ft(),setTimeout(()=>{var Oe;(Oe=C.current)==null||Oe.scrollIntoView({behavior:"smooth",block:"start"})},100)},wi=()=>{Kt!=null?(Rs(yn||[],Kt),M.current||(M.current=!0,_(!0),F(!0))):window.scrollTo({top:0,behavior:"smooth"}),z(!1)},Ft=()=>{Y.current&&clearTimeout(Y.current),B(!0),Y.current=setTimeout(()=>{B(!1)},2300)};N.useEffect(()=>()=>{Y.current&&clearTimeout(Y.current)},[]);const[Pn,oe]=N.useState(!1);N.useEffect(()=>{if(Fe==="interrim")oe(!0);else if(Fe==="active"){const Oe=setTimeout(()=>{oe(!1)},1e3);return()=>clearTimeout(Oe)}},[Fe]);const U=()=>{console.log("Lobby countdown animation completed")},[it,rn]=N.useState(!1),St=N.useRef(!1);N.useEffect(()=>{St.current=it},[it]);const[mo,Mi]=N.useState(!1),rr=()=>{rn(!1)};N.useEffect(()=>{(Fe!=="active"||!Ve)&&(Rt(!1),Pi(null),ft.current=null)},[Fe,Ve]),N.useEffect(()=>{Fe==="terminated"&&(Ar.current={},nr.current=[],Oc(),localStorage.removeItem("hasShownEmailBackupModal"),localStorage.removeItem("hasShownPauseInfoModal"))},[Fe]);const at=N.useRef(null);N.useEffect(()=>{var qe;!x&&!(!Se&&si&&Fe!=="checkin"&&Fe!==null&&!Z)&&!($t!=null&&$t.length)&&!(kn!=null&&kn.length)&&(i==null?void 0:i.length)>0&&((qe=at.current)==null||qe.scrollIntoView({behavior:"smooth"}),y(!0),z(!0),Ft())},[$t,kn,i,x,Se,si,Fe,Z]);const Qt=()=>{dt||(nt(!1),Ye(""),yt(""),ce([]))},ns=()=>{mn(!1)},Ps=async Oe=>{var At;if(Oe.preventDefault(),yt(""),!me||!me.trim()){yt("Email is required.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(me.trim())){yt("Please enter a valid email.");return}Ke(!0);try{const Ge=await Ct("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:me.trim()})});if(!Ge.ok){const Mt=await Ge.json();(At=Mt.detail)!=null&&At.toLowerCase().includes("already associated")?yt("This email is already in use. Try a different one or skip."):yt(Mt.detail||"Failed to save email."),Ke(!1);return}try{await Ct("/auth/send-magic-link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:me.trim()})})}catch(Mt){console.error("Magic link send failed:",Mt)}nt(!1),Ye(""),yt("")}catch(Ge){console.error("Email backup error:",Ge),yt("Something went wrong. Try again.")}finally{Ke(!1)}};return N.useEffect(()=>{Ae&&Qe.current&&setTimeout(()=>{var Oe;return(Oe=Qe.current)==null?void 0:Oe.focus()},100)},[Ae]),q?h.jsx(Yo,{fullScreen:!0,message:Re}):$?h.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",background:"rgba(255, 255, 255, 0.95)",zIndex:1e3,gap:"1.5rem"},children:[h.jsx(Yo,{size:60}),h.jsx("h2",{className:"lobby-header",children:"Session ended. Generating your matches..."})]}):h.jsxs("div",{className:"lobby-container",children:[h.jsxs("div",{className:"lobby-content",children:[h.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0",marginTop:"-1.85rem"},children:h.jsx("img",{src:"/assets/reuneo_test_11.png",alt:"Reuneo Logo",style:{maxWidth:"90px",height:"auto",objectFit:"contain"}})}),(Fe==="checkin"||Fe==="active"&&!Ve||Fe==="interrim")&&h.jsx("div",{className:"user-profile-container",children:h.jsxs("div",{className:"user-profile",children:[h.jsx("img",{src:we!=null&&we.image_data?`data:image/jpeg;base64,${we.image_data}`:"/assets/avatar_3.png",alt:"Your Profile",className:"user-profile-picture"}),h.jsx("div",{className:"user-profile-glow"})]})}),h.jsx("div",{className:"lobby-header",style:{marginTop:"-30px"},children:h.jsx("h2",{children:i.length>0&&($t.length==0||kn.length==0)?h.jsxs(h.Fragment,{children:["You're not ready, complete your interests.",h.jsx("button",{className:"missing-tags-button",onClick:()=>{var Oe;return(Oe=at.current)==null?void 0:Oe.scrollIntoView({behavior:"smooth"})},children:"Complete Interests"})]}):Fe==="active"&&Ve?h.jsxs("span",{className:"lobby-pop-burst",children:["Go find ",Ve.name,"!"]}):Fe==="checkin"?h.jsxs(h.Fragment,{children:["Wait here ",((li=we==null?void 0:we.name)==null?void 0:li.slice(0,15))||X||"Guest",".",h.jsx("br",{}),"Your host will start the experience."]}):Fe==="active"&&!Ve?"You'll be paired up when the timer ends.":Fe==="interrim"?"Get ready for the next round!":Fe==="terminated"?"This session has ended. Thank you for participating!":Fe===null?"Connecting to lobby...":""})},Fe),Fe==="active"&&Ve&&ct&&h.jsx("div",{className:"table-number",children:h.jsxs("h3",{style:{color:"#4b73ef"},children:["at table: ",ct]})}),(Yn.current||Fe!=="checkin")&&h.jsxs("div",{className:`timer-sponsor-container ${Yn.current&&Fe!=="checkin"?"has-timer":""}`,children:[Yn.current&&h.jsx("div",{className:"sponsor-logo",children:h.jsx("img",{src:`data:image/jpeg;base64,${Yn.current}`,alt:"Sponsor Logo",style:{width:"100px",height:"100px",objectFit:"contain"}})}),Fe!=="checkin"&&h.jsx("div",{className:"time-left",style:{display:"flex",flexDirection:"column",alignItems:"center",background:"transparent",padding:"8px"},children:(Fe==="active"||Fe==="interrim")&&Gn?h.jsx(h.Fragment,{children:h.jsx(ph,{isPlaying:Fe==="active",duration:xn||300,initialRemainingTime:Gn||0,colors:["#64B5F6","#2196F3","#1976D2"],colorsTime:[xn||300,(xn||300)/2,0],size:100,strokeWidth:8,trailColor:"#f0f1f4",strokeLinecap:"round",onComplete:()=>(ai(),{shouldRepeat:!1}),children:({remainingTime:Oe})=>{const qe=typeof Oe=="number"&&!isNaN(Oe)?Oe:0,At=Math.floor(qe/60),Ge=Math.floor(qe%60);return h.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[h.jsxs("span",{style:{fontSize:"1.5rem",color:"#1a1a2e",fontWeight:700,fontFamily:"-apple-system, BlinkMacSystemFont, sans-serif"},children:[At,":",String(Ge).padStart(2,"0")]}),h.jsx("span",{style:{fontSize:"0.65rem",color:"#6b7280",fontWeight:500,marginTop:"2px"},children:"time left"})]})}},`${Fe}-${Gn}`)}):h.jsx("span",{className:"time-left-text"})})]}),It&&Zn&&Fe==="active"&&Ve&&h.jsxs("div",{className:`match-banner ${ts?"sparkling":""}`,children:[ts&&h.jsx("div",{className:"banner-sparkles",children:[...Array(8)].map((Oe,qe)=>h.jsx("span",{className:"banner-sparkle",style:{left:`${10+qe*12}%`,animationDelay:`${qe*.15}s`}},qe))}),h.jsx("span",{className:"match-tag",children:h.jsx("span",{className:"match-tag-text",children:Zn.playerTag.split(" ").map(Oe=>Oe.charAt(0).toUpperCase()+Oe.slice(1).toLowerCase()).join(" ")})}),h.jsx("div",{className:"match-arrow"}),h.jsx("span",{className:"match-tag",children:h.jsx("span",{className:"match-tag-text",children:Zn.opponentTag.split(" ").map(Oe=>Oe.charAt(0).toUpperCase()+Oe.slice(1).toLowerCase()).join(" ")})})]}),h.jsx("div",{style:{display:"flex",justifyContent:"center",width:"100%",margin:"0 auto",marginTop:"-2rem"},children:Fe==="active"||Fe==="interrim"?Ve?h.jsx("div",{style:{marginTop:"-1rem",width:"100%",display:"flex",justifyContent:"center"},children:h.jsx(YE,{player:Ve})}):h.jsx(h.Fragment,{}):Fe==="terminated"?h.jsx("div",{className:"status-message",children:h.jsxs("h2",{children:["This session has ended.",h.jsx("br",{}),"Thank you for participating!"]})}):null}),(Fe==="checkin"||Fe==="active"&&!Ve)&&Ce!==null&&h.jsx("div",{className:"player-count-container",children:h.jsxs("div",{className:"player-count-widget",children:[h.jsxs("div",{className:"player-count-icon",children:[h.jsx("div",{className:"icon-pulse"}),h.jsx("img",{src:"/assets/players_display_icon2.png",alt:"Players in lobby",className:"player-count-img"})]}),h.jsxs("div",{className:"player-count-info",children:[h.jsx("span",{className:"player-count-number",children:Ce}),h.jsx("span",{className:"player-count-label",children:"joined"})]}),h.jsx("div",{className:"player-count-lobby",children:Le})]})}),(Fe==="checkin"||Fe==="active"&&!Ve)&&h.jsx("div",{className:"lobby-profiles-container",children:h.jsx("div",{className:"lobby-profiles-grid",children:Ce>0?h.jsxs(h.Fragment,{children:[Array.from({length:Math.min(Ce,gc)}).map((Oe,qe)=>{let At;{const Mt=nr.current[qe];Mt&&Ar.current[Mt]?At=`data:image/jpeg;base64,${Ar.current[Mt]}`:At="/assets/avatar_8.png"}return h.jsxs("div",{className:`profile-icon-wrapper ${qe===Math.min(Ce,gc)-1?"pop-in":""}`,children:[h.jsx("img",{src:At,alt:`Profile ${qe+1}`,className:"profile-icon",loading:"lazy"}),h.jsx("div",{className:"profile-icon-glow"})]},`profile-${qe}`)}),Ce>gc&&h.jsx("div",{className:"profile-icon-wrapper more-profiles",children:h.jsxs("div",{className:"more-profiles-bubble",children:["+",Ce-gc]})})]}):h.jsx("div",{children:"No profiles to display"})})}),(Fe==="checkin"||Fe==="active")&&h.jsxs("div",{className:"selected-tags-container",children:[$t&&$t.length>0&&h.jsxs("div",{className:"tag-category",children:[h.jsx("h4",{children:"I am:"}),h.jsx("div",{className:"tag-list",children:$t.map(Oe=>h.jsx("span",{className:"tag-item",style:{color:"#1a1a2e"},children:Oe},`self-${Oe}`))})]}),kn&&kn.length>0&&h.jsxs("div",{className:"tag-category",children:[h.jsx("h4",{children:"Looking for:"}),h.jsx("div",{className:"tag-list",children:kn.map(Oe=>h.jsx("span",{className:"tag-item",style:{color:"#1a1a2e"},children:Oe},`desiring-${Oe}`))})]})]}),h.jsx("button",{className:`leave-lobby-button ${ze?"pause-button-elevated":""}`,onClick:Te,children:"Pause"}),h.jsx(cS,{onProfileClick:()=>Mi(!0),onTutorialClick:()=>rn(!0),userImage:we!=null&&we.image_data?`data:image/jpeg;base64,${we.image_data}`:null}),(de==="admin"||de==="organizer")&&h.jsx("button",{className:"admin-view-button",onClick:()=>ge(`/admin_lobby_view?code=${Le}`),children:"Manage"}),j&&h.jsx("div",{className:"tags-focus-overlay"}),Array.isArray(i)&&i.length>0&&h.jsx("form",{onSubmit:Oe=>{Oe.preventDefault(),u==="self"?ea():wi()},children:h.jsxs("div",{className:`tags-section ${j?"focused":""}`,ref:at,children:[h.jsx(dS,{isVisible:V,phase:u}),h.jsxs("div",{className:"progress-bar-container",children:[h.jsx("div",{className:`self-progress-bar-tab ${u==="self"?"active":""} ${$t.length>0?"complete":""}`,onClick:()=>{u!=="self"&&(m("self"),Ft())},children:"Who are you?"}),h.jsx("div",{className:`desiring-progress-bar-tab ${u==="desiring"?"active":""} ${kn.length>0?"complete":""}`,onClick:()=>{$t.length>0&&u!=="desiring"&&(m("desiring"),Ft())},children:"Who do you want to meet?"})]}),h.jsxs("div",{className:`tag-group ${u==="self"?"active":"hidden"}`,children:[h.jsx("h2",{style:{fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif",color:"#1a1a2e"},children:"Who are you?"}),h.jsx(sp,{tags:i,selectedTags:yn??$t,onTagChange:Oe=>xr("self",Oe),showGradients:!0,enableArrowNavigation:u==="self",displayScrollbar:!0,maxHeight:350})]}),h.jsxs("div",{className:`tag-group ${u==="desiring"?"active":"hidden"}`,ref:C,children:[h.jsx("h2",{style:{fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif",color:"#1a1a2e"},children:"Who do you want to meet?"}),h.jsx(sp,{tags:i,selectedTags:Kt??kn,onTagChange:Oe=>xr("desiring",Oe),showGradients:!0,enableArrowNavigation:u==="desiring",displayScrollbar:!0,maxHeight:350})]}),h.jsx("button",{type:"submit",className:"tag-selection-button",ref:S,children:u==="self"?"Continue":"Save"}),b&&h.jsx("div",{style:{color:"#144dff",textAlign:"center",marginTop:"1rem",fontSize:"0.9rem",fontWeight:"600"},children:b})]})})]}),Se||!si||Fe==null||Z?null:h.jsx(qt,{}),Pn&&!(i.length>0&&kn.length===0)&&h.jsx(eS,{onComplete:U}),it&&h.jsx(rS,{onComplete:rr,lobbyCode:Le}),h.jsx(uS,{isOpen:mo,onClose:()=>Mi(!1)}),h.jsx(oS,{isVisible:fo,onAnimationEnd:()=>{Gt(!1),Pt.current=!1,pn(!0),setTimeout(()=>pn(!1),3e3)}}),h.jsx(aS,{isVisible:T,onAnimationEnd:()=>{_(!1),M.current=!1,window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{Ze(yn||[]),es(Kt)},600)}}),h.jsx(Er,{children:Ae&&h.jsx(vt.div,{className:"email-backup-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:Qt,children:h.jsxs(vt.div,{className:"email-backup-modal-content",initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},transition:{type:"spring",stiffness:400,damping:25},onClick:Oe=>Oe.stopPropagation(),children:[Xe.length>0&&h.jsx("div",{className:"previous-matches-row",children:Xe.slice(0,2).map((Oe,qe)=>h.jsx("img",{src:Oe.small_image_data?`data:image/jpeg;base64,${Oe.small_image_data}`:"/assets/avatar_3.png",alt:Oe.name,className:"match-avatar"},qe))}),h.jsx("h2",{className:"email-backup-modal-header",children:"Save Your Match History"}),h.jsx("p",{className:"email-backup-modal-subtext",children:"We'll send you a sign-in link in case you get logged out."}),h.jsxs("form",{onSubmit:Ps,className:"email-backup-form",children:[h.jsx("input",{ref:Qe,type:"email",value:me,onChange:Oe=>Ye(Oe.target.value),placeholder:"you@example.com",className:"email-backup-input",disabled:dt}),$e&&h.jsx("div",{className:"email-backup-error",children:$e}),h.jsx("button",{type:"submit",className:"email-backup-submit-button",disabled:dt,children:dt?"Sending...":"Save Matches"})]}),h.jsx("button",{type:"button",className:"email-backup-skip-button",onClick:Qt,disabled:dt,children:"Don't back up matches"})]})})}),h.jsx(Er,{children:ze&&h.jsx(vt.div,{className:"pause-info-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:ns,children:h.jsxs(vt.div,{className:"pause-info-modal-content",initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},transition:{type:"spring",stiffness:400,damping:25},onClick:Oe=>Oe.stopPropagation(),children:[h.jsx("h2",{className:"pause-info-modal-header",children:"Need a Break?"}),h.jsxs("p",{className:"pause-info-modal-body",children:["Tap ",h.jsx("strong",{children:'"Pause"'})," anytime to stop being paired. This way no one's left looking for you"]}),h.jsx("p",{className:"pause-info-modal-subtext",children:"Your matches are saved and you can rejoin whenever you're ready"}),h.jsx("button",{type:"button",className:"pause-info-modal-button",onClick:ns,children:"Got it"})]})})})]})};let gS={data:""},xS=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||gS,yS=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,wS=/\/\*[^]*?\*\/|  +/g,ap=/\n+/g,Ss=(t,i)=>{let a="",u="",m="";for(let x in t){let y=t[x];x[0]=="@"?x[1]=="i"?a=x+" "+y+";":u+=x[1]=="f"?Ss(y,x):x+"{"+Ss(y,x[1]=="k"?"":i)+"}":typeof y=="object"?u+=Ss(y,i?i.replace(/([^,])+/g,b=>x.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,v=>/&/.test(v)?v.replace(/&/g,b):b?b+" "+v:v)):x):y!=null&&(x=/^--/.test(x)?x:x.replace(/[A-Z]/g,"-$&").toLowerCase(),m+=Ss.p?Ss.p(x,y):x+":"+y+";")}return a+(i&&m?i+"{"+m+"}":m)+u},Xi={},Ax=t=>{if(typeof t=="object"){let i="";for(let a in t)i+=a+Ax(t[a]);return i}return t},vS=(t,i,a,u,m)=>{let x=Ax(t),y=Xi[x]||(Xi[x]=(v=>{let C=0,S=11;for(;C<v.length;)S=101*S+v.charCodeAt(C++)>>>0;return"go"+S})(x));if(!Xi[y]){let v=x!==t?t:(C=>{let S,T,_=[{}];for(;S=yS.exec(C.replace(wS,""));)S[4]?_.shift():S[3]?(T=S[3].replace(ap," ").trim(),_.unshift(_[0][T]=_[0][T]||{})):_[0][S[1]]=S[2].replace(ap," ").trim();return _[0]})(t);Xi[y]=Ss(m?{["@keyframes "+y]:v}:v,a?"":"."+y)}let b=a&&Xi.g?Xi.g:null;return a&&(Xi.g=Xi[y]),((v,C,S,T)=>{T?C.data=C.data.replace(T,v):C.data.indexOf(v)===-1&&(C.data=S?v+C.data:C.data+v)})(Xi[y],i,u,b),y},CS=(t,i,a)=>t.reduce((u,m,x)=>{let y=i[x];if(y&&y.call){let b=y(a),v=b&&b.props&&b.props.className||/^go/.test(b)&&b;y=v?"."+v:b&&typeof b=="object"?b.props?"":Ss(b,""):b===!1?"":b}return u+m+(y??"")},"");function qc(t){let i=this||{},a=t.call?t(i.p):t;return vS(a.unshift?a.raw?CS(a,[].slice.call(arguments,1),i.p):a.reduce((u,m)=>Object.assign(u,m&&m.call?m(i.p):m),{}):a,xS(i.target),i.g,i.o,i.k)}let Nx,bf,Ef;qc.bind({g:1});let qi=qc.bind({k:1});function bS(t,i,a,u){Ss.p=i,Nx=t,bf=a,Ef=u}function Is(t,i){let a=this||{};return function(){let u=arguments;function m(x,y){let b=Object.assign({},x),v=b.className||m.className;a.p=Object.assign({theme:bf&&bf()},b),a.o=/ *go\d+/.test(v),b.className=qc.apply(a,u)+(v?" "+v:"");let C=t;return t[0]&&(C=b.as||t,delete b.as),Ef&&C[0]&&Ef(b),Nx(C,b)}return m}}var ES=t=>typeof t=="function",Lc=(t,i)=>ES(t)?t(i):t,SS=(()=>{let t=0;return()=>(++t).toString()})(),Tx=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let i=matchMedia("(prefers-reduced-motion: reduce)");t=!i||i.matches}return t}})(),AS=20,Ix=(t,i)=>{switch(i.type){case 0:return{...t,toasts:[i.toast,...t.toasts].slice(0,AS)};case 1:return{...t,toasts:t.toasts.map(x=>x.id===i.toast.id?{...x,...i.toast}:x)};case 2:let{toast:a}=i;return Ix(t,{type:t.toasts.find(x=>x.id===a.id)?1:0,toast:a});case 3:let{toastId:u}=i;return{...t,toasts:t.toasts.map(x=>x.id===u||u===void 0?{...x,dismissed:!0,visible:!1}:x)};case 4:return i.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(x=>x.id!==i.toastId)};case 5:return{...t,pausedAt:i.time};case 6:let m=i.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(x=>({...x,pauseDuration:x.pauseDuration+m}))}}},Ac=[],io={toasts:[],pausedAt:void 0},co=t=>{io=Ix(io,t),Ac.forEach(i=>{i(io)})},NS={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},TS=(t={})=>{let[i,a]=N.useState(io),u=N.useRef(io);N.useEffect(()=>(u.current!==io&&a(io),Ac.push(a),()=>{let x=Ac.indexOf(a);x>-1&&Ac.splice(x,1)}),[]);let m=i.toasts.map(x=>{var y,b,v;return{...t,...t[x.type],...x,removeDelay:x.removeDelay||((y=t[x.type])==null?void 0:y.removeDelay)||(t==null?void 0:t.removeDelay),duration:x.duration||((b=t[x.type])==null?void 0:b.duration)||(t==null?void 0:t.duration)||NS[x.type],style:{...t.style,...(v=t[x.type])==null?void 0:v.style,...x.style}}});return{...i,toasts:m}},IS=(t,i="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:i,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...a,id:(a==null?void 0:a.id)||SS()}),cl=t=>(i,a)=>{let u=IS(i,t,a);return co({type:2,toast:u}),u.id},Rr=(t,i)=>cl("blank")(t,i);Rr.error=cl("error");Rr.success=cl("success");Rr.loading=cl("loading");Rr.custom=cl("custom");Rr.dismiss=t=>{co({type:3,toastId:t})};Rr.remove=t=>co({type:4,toastId:t});Rr.promise=(t,i,a)=>{let u=Rr.loading(i.loading,{...a,...a==null?void 0:a.loading});return typeof t=="function"&&(t=t()),t.then(m=>{let x=i.success?Lc(i.success,m):void 0;return x?Rr.success(x,{id:u,...a,...a==null?void 0:a.success}):Rr.dismiss(u),m}).catch(m=>{let x=i.error?Lc(i.error,m):void 0;x?Rr.error(x,{id:u,...a,...a==null?void 0:a.error}):Rr.dismiss(u)}),t};var _S=(t,i)=>{co({type:1,toast:{id:t,height:i}})},RS=()=>{co({type:5,time:Date.now()})},Ga=new Map,kS=1e3,PS=(t,i=kS)=>{if(Ga.has(t))return;let a=setTimeout(()=>{Ga.delete(t),co({type:4,toastId:t})},i);Ga.set(t,a)},MS=t=>{let{toasts:i,pausedAt:a}=TS(t);N.useEffect(()=>{if(a)return;let x=Date.now(),y=i.map(b=>{if(b.duration===1/0)return;let v=(b.duration||0)+b.pauseDuration-(x-b.createdAt);if(v<0){b.visible&&Rr.dismiss(b.id);return}return setTimeout(()=>Rr.dismiss(b.id),v)});return()=>{y.forEach(b=>b&&clearTimeout(b))}},[i,a]);let u=N.useCallback(()=>{a&&co({type:6,time:Date.now()})},[a]),m=N.useCallback((x,y)=>{let{reverseOrder:b=!1,gutter:v=8,defaultPosition:C}=y||{},S=i.filter(M=>(M.position||C)===(x.position||C)&&M.height),T=S.findIndex(M=>M.id===x.id),_=S.filter((M,L)=>L<T&&M.visible).length;return S.filter(M=>M.visible).slice(...b?[_+1]:[0,_]).reduce((M,L)=>M+(L.height||0)+v,0)},[i]);return N.useEffect(()=>{i.forEach(x=>{if(x.dismissed)PS(x.id,x.removeDelay);else{let y=Ga.get(x.id);y&&(clearTimeout(y),Ga.delete(x.id))}})},[i]),{toasts:i,handlers:{updateHeight:_S,startPause:RS,endPause:u,calculateOffset:m}}},OS=qi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,DS=qi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,LS=qi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,jS=Is("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${OS} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${DS} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${LS} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,BS=qi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,FS=Is("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${BS} 1s linear infinite;
`,VS=qi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,US=qi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,zS=Is("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${VS} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${US} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,WS=Is("div")`
  position: absolute;
`,HS=Is("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,GS=qi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,XS=Is("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${GS} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,YS=({toast:t})=>{let{icon:i,type:a,iconTheme:u}=t;return i!==void 0?typeof i=="string"?N.createElement(XS,null,i):i:a==="blank"?null:N.createElement(HS,null,N.createElement(FS,{...u}),a!=="loading"&&N.createElement(WS,null,a==="error"?N.createElement(jS,{...u}):N.createElement(zS,{...u})))},$S=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,ZS=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,KS="0%{opacity:0;} 100%{opacity:1;}",qS="0%{opacity:1;} 100%{opacity:0;}",QS=Is("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,JS=Is("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,e4=(t,i)=>{let a=t.includes("top")?1:-1,[u,m]=Tx()?[KS,qS]:[$S(a),ZS(a)];return{animation:i?`${qi(u)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${qi(m)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},t4=N.memo(({toast:t,position:i,style:a,children:u})=>{let m=t.height?e4(t.position||i||"top-center",t.visible):{opacity:0},x=N.createElement(YS,{toast:t}),y=N.createElement(JS,{...t.ariaProps},Lc(t.message,t));return N.createElement(QS,{className:t.className,style:{...m,...a,...t.style}},typeof u=="function"?u({icon:x,message:y}):N.createElement(N.Fragment,null,x,y))});bS(N.createElement);var n4=({id:t,className:i,style:a,onHeightUpdate:u,children:m})=>{let x=N.useCallback(y=>{if(y){let b=()=>{let v=y.getBoundingClientRect().height;u(t,v)};b(),new MutationObserver(b).observe(y,{subtree:!0,childList:!0,characterData:!0})}},[t,u]);return N.createElement("div",{ref:x,className:i,style:a},m)},r4=(t,i)=>{let a=t.includes("top"),u=a?{top:0}:{bottom:0},m=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Tx()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${i*(a?1:-1)}px)`,...u,...m}},i4=qc`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,xc=16,Xa=({reverseOrder:t,position:i="top-center",toastOptions:a,gutter:u,children:m,containerStyle:x,containerClassName:y})=>{let{toasts:b,handlers:v}=MS(a);return N.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:xc,left:xc,right:xc,bottom:xc,pointerEvents:"none",...x},className:y,onMouseEnter:v.startPause,onMouseLeave:v.endPause},b.map(C=>{let S=C.position||i,T=v.calculateOffset(C,{reverseOrder:t,gutter:u,defaultPosition:i}),_=r4(S,T);return N.createElement(n4,{id:C.id,key:C.id,onHeightUpdate:v.updateHeight,className:C.visible?i4:"",style:_},C.type==="custom"?Lc(C.message,C):m?m(C):N.createElement(t4,{toast:C,position:S}))}))},_n=Rr;const Hd=({direction:t="down",show:i=!0,className:a="",style:u={}})=>{if(!i)return null;const m=t==="down"?"rotate(180 16 16)":"";return h.jsxs("div",{className:`arrow-hint-container ${t} ${a}`,style:u,children:[h.jsx("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"arrow-hint-svg",children:h.jsxs("g",{transform:m,children:[h.jsx("path",{d:"M16 6v16M16 22l-7-7M16 22l7-7",stroke:"url(#arrow-gradient)",strokeWidth:"3.2",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#arrow-glow)"}),h.jsxs("defs",{children:[h.jsxs("linearGradient",{id:"arrow-gradient",x1:"16",y1:"6",x2:"16",y2:"22",gradientUnits:"userSpaceOnUse",children:[h.jsx("stop",{stopColor:"#7f5fff"}),h.jsx("stop",{offset:"0.5",stopColor:"#2e8bff"}),h.jsx("stop",{offset:"1",stopColor:"#00e0ff"})]}),h.jsx("filter",{id:"arrow-glow",x:"-10",y:"-10",width:"52",height:"52",filterUnits:"userSpaceOnUse",children:h.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"2.5",floodColor:"#7f5fff",floodOpacity:"0.5"})})]})]})}),h.jsx("div",{className:"arrow-hint-text",children:"Tap Here"})]})},s4=({isOpen:t,onClose:i,onConfirm:a,userName:u})=>t?h.jsx("div",{className:"kick-modal",children:h.jsxs("div",{className:"kick-modal-content",children:[h.jsx("h2",{className:"kick-modal-title",children:"Kick User"}),h.jsxs("p",{className:"kick-modal-message",children:["Are you sure you want to kick ",u," from the lobby?"]}),h.jsxs("div",{className:"kick-modal-actions",children:[h.jsx("button",{onClick:a,className:"admin-button admin-button-danger",children:"Yes, Kick User"}),h.jsx("button",{onClick:i,className:"admin-button admin-button-primary",children:"Cancel"})]})]})}):null,o4=({isOpen:t,onClose:i,onConfirm:a})=>t?h.jsx("div",{className:"join-modal",children:h.jsxs("div",{className:"join-modal-content",children:[h.jsx("h2",{className:"join-modal-title",children:"Join Lobby"}),h.jsx("p",{className:"join-modal-message",children:"Are you sure you want to join? You will be paired up with your attendees."}),h.jsxs("div",{className:"join-modal-actions",children:[h.jsx("button",{onClick:a,className:"admin-button admin-button-join",children:"Yes, Join Lobby"}),h.jsx("button",{onClick:i,className:"admin-button admin-button-primary",children:"Cancel"})]})]})}):null,_x=(t,i)=>new Promise((a,u)=>{const x=new XMLSerializer().serializeToString(t),y=800,b=1e3,v=document.createElement("canvas");v.width=y,v.height=b;const C=v.getContext("2d");C.fillStyle="#ffffff",C.fillRect(0,0,y,b);const S=new window.Image;S.crossOrigin="anonymous",S.onload=()=>{const T=new window.Image;T.onload=()=>{const F=S.width/S.height*180,j=36,z=28,V=550,B=22,Y=182+B,$=j+B*1.2,re=z+32,G=Y+$,te=re,J=b-G-te,ye=G+(J-V)/2-35,_e=(y-V)/2;let Ne=2;const Se=(y-F)/2;C.drawImage(S,Se,Ne,F,180),Ne+=180+B,C.fillStyle="#000000",C.font=`600 ${j}px Helvetica, Arial, sans-serif`,C.textAlign="center",C.textBaseline="top",C.fillText("Scan to join the ice-breaking session!",y/2,Ne),Ne+=j+B*1.2,C.drawImage(T,_e,ye,V,V);const Z=b-32-z;C.font=`${z}px Helvetica, Arial, sans-serif`,C.fillStyle="#000000",C.textBaseline="top";const Le=`code (optional): ${i}`;C.fillText(Le,y/2,Z),v.toBlob(ve=>{ve?a(ve):u(new Error("Failed to create blob"))},"image/png")},T.onerror=()=>u(new Error("Failed to load QR code image")),T.src="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(x)))},S.onerror=()=>u(new Error("Failed to load logo image")),S.src="/assets/reuneo_test_9.png"}),a4=({lobbyState:t,playerCount:i,onStart:a,onEnd:u,lobbyCode:m,currentRound:x})=>{const y=t==="checkin",b=i>=2&&t==="checkin",v=t==="active",C=t==="active",S=t==="terminated",[T,_]=N.useState(null),[M,L]=N.useState({qr:!1}),[F,j]=N.useState(!1),z=N.useRef(!1),V=()=>{_("start")},B=()=>{_("end")},Y=()=>{j(!0),_("checkin")},$=()=>{T==="start"?(a(),_n.success("Rounds started!",{position:"top-center"})):T==="end"&&u(),_(null)},re=()=>_(null);N.useEffect(()=>{z.current||t==="checkin"&&i===0&&(z.current=!0,j(!0),_("checkin"))},[t,i]);const G=(Se,Ee)=>Se?"progress-arrow active-shimmer":Ee?"progress-arrow available-shimmer":"progress-arrow inactive",te=y&&!F&&i<6,J=t==="checkin"&&i>=6,ye=t==="active"&&x+1>=12;function _e(Se,Ee={}){const{silent:Z=!1}=Ee,Le=URL.createObjectURL(Se),ve=document.createElement("a");ve.href=Le,ve.download=`reuneo-lobby-${m}.png`,document.body.appendChild(ve),ve.click(),document.body.removeChild(ve),URL.revokeObjectURL(Le),Z||(L(ge=>({...ge,qr:!0})),setTimeout(()=>L(ge=>({...ge,qr:!1})),800))}const Ne=()=>{const Se=document.getElementById("modal-qr-svg");Se&&_x(Se,m).then(Ee=>{_e(Ee,{silent:!0}),navigator.clipboard&&navigator.clipboard.write?navigator.clipboard.write([new window.ClipboardItem({"image/png":Ee})]).then(()=>{L(Z=>({...Z,qr:!0})),setTimeout(()=>L(Z=>({...Z,qr:!1})),800)}).catch(()=>{L(Z=>({...Z,qr:!0})),setTimeout(()=>L(Z=>({...Z,qr:!1})),800)}):(L(Z=>({...Z,qr:!0})),setTimeout(()=>L(Z=>({...Z,qr:!1})),800))}).catch(Ee=>{console.error("Error generating QR code image:",Ee),alert("Failed to generate QR code image.")})};return h.jsxs("div",{className:"lobby-progress-bar",style:{marginTop:"-1rem",height:"40px"},children:[h.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[h.jsx("div",{className:G(y,!1),tabIndex:0,title:"Check-in phase",onClick:Y,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"Start Checkin"}),h.jsx(Hd,{direction:"down",show:te})]}),h.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[h.jsx("div",{className:G(v,b&&!v),tabIndex:0,title:b?"Start rounds":"At least 2 players required",onClick:V,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"Start Rounds"}),h.jsx(Hd,{direction:"down",show:J})]}),h.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[h.jsx("div",{className:G(S,C&&!S),tabIndex:0,title:C?"End rounds":"Cannot end yet",onClick:B,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"End Rounds"}),h.jsx(Hd,{direction:"down",show:ye})]}),T&&h.jsx("div",{className:"progress-modal-overlay",children:h.jsx("div",{className:"progress-modal",children:T==="checkin"?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"progress-modal-title",children:"Check-in: Print or Display this QR code to your attendees"}),h.jsx("div",{className:"progress-modal-message",children:"They scan to join. Once you have 6-10 people ready, click 'Start Rounds' - New arrivals will get paired up in the next rounds."}),h.jsxs("div",{className:"progress-modal-qr",onClick:Ne,style:{cursor:"pointer",position:"relative"},children:[h.jsx(mh,{value:`${window.location.origin}/lobby?code=${m}`,size:200,level:"H",includeMargin:!1,bgColor:"#ffffff",fgColor:"#000000",id:"modal-qr-svg"}),h.jsx("span",{className:"copy-icon modal-copy-icon","aria-label":"Copy",style:{position:"absolute",right:8,bottom:8,background:"#fff",borderRadius:"50%",padding:"2px"},children:h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[h.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),h.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})}),M.qr&&h.jsx("span",{className:"modal-copied-feedback",style:{position:"absolute",left:"50%",bottom:"-1.5rem",transform:"translateX(-50%)",color:"#28a745",fontWeight:600,fontSize:"0.95rem"},children:"Copied!"})]}),h.jsxs("div",{style:{textAlign:"center",marginTop:"1rem",marginBottom:"0.5rem",fontSize:"1rem",color:"#3b3b3b",fontFamily:"Helvetica, Arial, sans-serif"},children:["code (optional): ",m]}),h.jsx("div",{className:"progress-modal-actions",children:h.jsx("button",{className:"progress-modal-btn confirm",onClick:re,children:"Got it"})})]}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"progress-modal-title",children:T==="start"?"Are you sure you want to start rounds? - Dont worry new people can join in the next rounds.":"Are you sure you want to end the rounds?"}),h.jsx("div",{className:"progress-modal-actions",children:T==="start"?h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"progress-modal-btn cancel",onClick:re,children:"Not Yet"}),h.jsx("button",{className:"progress-modal-btn confirm",onClick:$,children:"Start"})]}):h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"progress-modal-btn cancel",onClick:re,children:"Keep Going"}),h.jsx("button",{className:"progress-modal-btn confirm danger",onClick:$,children:"End"})]})})]})})})]})},l4=({players:t})=>{const i=[...t.pairedPlayers?t.pairedPlayers.flat():[],...t.lobbyData?t.lobbyData:[]],a=10,u=i.slice(0,a),m=i.length-a,x=i.length;return h.jsxs("div",{className:"overlapping-profile-list-wrapper",style:{marginTop:"3rem"},children:[h.jsxs("div",{className:"overlapping-profile-list",children:[u.map((y,b)=>h.jsx("img",{src:y.pfp_data||"/assets/player_icon_trans.png",alt:y.name||"Player",className:"overlapping-profile-img",style:{zIndex:b+1}},y.username||y.name||b)),m>0&&h.jsxs("span",{className:"overlapping-profile-overflow",children:["+ ",m]})]}),h.jsxs("div",{className:"overlapping-profile-list-label",style:{marginTop:"0.5rem",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.1)"},children:["People joined: ",x]})]})},c4=()=>{const{user:t,userProfile:i,checkAuth:a,permissions:u}=N.useContext(Wn),m=Bn(),x=Vr(),y=!1,b=Math.floor(9*60),{loadSound:v,seekTo:C,cancelSound:S,checkSound:T,soundEnabled:_,setSoundEnabled:M,isPlaying:L}=Pf(),[F,j]=N.useState(!0),[z,V]=N.useState(!document.hidden),B=N.useRef(null),$=new URLSearchParams(x.search).get("code"),[re,G]=N.useState($||"test");N.useEffect(()=>{$||(console.log("No lobby code found in URL, using default 'test' value"),(async()=>{try{const kt=await Ct("/view_my_active_lobbies");if(kt.ok){const We=await kt.json();if(console.log("Active lobbies response:",We),We&&We.lobbies&&We.lobbies.length>0){const ht=We.lobbies[0];G(ht),window.history.replaceState({},"",`/admin_lobby_view?code=${ht}`)}}}catch(kt){console.error("Error fetching active lobby:",kt)}})())},[$]);const[te,J]=N.useState(!1),[ye,_e]=N.useState(null),[Ne,Se]=N.useState(!1),[Ee,Z]=N.useState(null),[Le,ve]=N.useState(null),[ge,De]=N.useState(null),[Ce,K]=N.useState(null),[X,we]=N.useState(null),[be,de]=N.useState({}),[q,Re]=N.useState([]),[xe,Ae]=N.useState(0),nt=((Le==null?void 0:Le.length)||0)+((Ee==null?void 0:Ee.length)*2||0),[Xe,ce]=N.useState(!1);N.useEffect(()=>{T()?M(!0):M(!1)},[]),N.useEffect(()=>{const Ve=()=>{const kt=!document.hidden;kt&&!z&&console.log("Page became visible - next poll will fetch latest data"),V(kt)};return document.addEventListener("visibilitychange",Ve),()=>{document.removeEventListener("visibilitychange",Ve)}},[z]),N.useEffect(()=>{(Ce==="terminated"||Ce==="inactive")&&S()},[Ce]),N.useEffect(()=>{if(a(),u!=="admin"&&u!=="organizer"){m("/");return}const Ve=async We=>{if(be[We])return be[We];try{const ht=await Ct(`/pfp_small_icon?username=${encodeURIComponent(We)}`);if(ht.ok){let et=await ht.text();et.startsWith('"')&&et.endsWith('"')&&(et=et.slice(1,-1));const _t=et.startsWith("data:image")?et:`data:image/jpeg;base64,${et}`;return de(en=>({...en,[We]:_t})),_t}return null}catch(ht){return console.error(`Error fetching profile picture for ${We}:`,ht),null}},kt=setInterval(async()=>{try{const We=!document.hidden,ht=await Ct(`/admin_lobby_data?is_visible=${We}`,{headers:{is_visible_t_f:We?"t":"f",lobby_code:re}});if(ht.ok){const et=await ht.json();console.log("Admin lobby data:",re,et),(et.lobby_state==="inactive"||et.status==="inactive")&&S();const _t=typeof et.round_time_left=="number"&&!isNaN(et.round_time_left)?et.round_time_left:0;if(B.current=_t,B.current!=null&&et.lobby_state==="active"&&B.current!=0&&(C(b-B.current),console.log("seeking to",b-B.current)),et.lobby_state==="active"&&Ae(en=>et.current_round>en?et.current_round:en),et.lobby_state==="terminated"&&(Ae(0),S()),et&&et.unpaired_players){const en=await Promise.all(et.unpaired_players.map(async ct=>{const Ie=await Ve(ct.username);return{...ct,pfp_data:Ie}})),Yt=await Promise.all((et.pairs_data||[]).map(async ct=>{const Ie=await Ve(ct[0].username),ae=await Ve(ct[1].username);return[{...ct[0],pfp_data:Ie},{...ct[1],pfp_data:ae}]}));ve(en),Z(Yt),De(et.round_time_left),K(et.lobby_state),we(et.lobby_duration||300),Re(et.custom_tags||[])}else console.error("Invalid lobby data structure:",et),ve([]),Z([])}else console.error("Failed to fetch admin lobby data:",ht.status)}catch(We){console.error("Error fetching admin lobby data:",We)}},1e3);return()=>clearInterval(kt)},[be]);const me=Ve=>{_e(Ve),J(!0)},Ye=()=>{J(!1),_e(null)},$e=()=>{ye&&fetch(window.server_url+"/kick_user",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"},body:JSON.stringify({username:ye.username,lobby_code:re})}).then(Ve=>{Ve.ok?console.log(`User ${ye.name} kicked successfully`):console.error(`Failed to kick user ${ye.name}`)}).catch(Ve=>{console.error("Error kicking user:",Ve)}).finally(()=>{Ye()})},yt=()=>{Se(!0)},dt=()=>{Se(!1)},Ke=()=>{m(`/lobby?code=${re}`),dt()};function Qe(Ve,kt={}){const{silent:We=!1}=kt,ht=URL.createObjectURL(Ve),et=document.createElement("a");et.href=ht,et.download=`reuneo-lobby-${re}.png`,document.body.appendChild(et),et.click(),document.body.removeChild(et),URL.revokeObjectURL(ht),We||_n.success("QR code downloaded!")}async function Bt(){const Ve=document.getElementById("admin-qr-svg");Ve&&_x(Ve,re).then(kt=>{Qe(kt,{silent:!0}),navigator.clipboard&&navigator.clipboard.write?navigator.clipboard.write([new window.ClipboardItem({"image/png":kt})]).then(()=>{_n.success("Downloaded and copied to clipboard!")}).catch(()=>{_n.success("QR code downloaded!")}):_n.success("QR code downloaded!")}).catch(kt=>{console.error("Error generating QR code image:",kt),_n.error("Failed to generate QR code image.")})}const ze=()=>h.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.125)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},children:h.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",position:"relative",minWidth:"300px"},children:[h.jsx("button",{onClick:()=>j(!1),style:{color:"#144fff",position:"absolute",right:"10px",top:"10px",border:"none",background:"none",fontSize:"16px",cursor:"pointer",fontWeight:"bold",padding:"4px 8px"},children:"X"}),h.jsx("h2",{style:{marginTop:"5px"},children:"The Sound is Important"}),h.jsx("h3",{style:{marginTop:"5px"},children:"Raise your volume also"}),h.jsx("p",{style:{color:"#144dff"},children:"You'll need this for the best experience."}),h.jsx("button",{onClick:()=>{v(),j(!1)},style:{padding:"10px 20px",marginTop:"20px",backgroundColor:"#144dff",color:"#ffffff",border:"none",borderRadius:"14px",fontWeight:"bold",cursor:"pointer"},children:"Enable Sound"})]})}),mn=async()=>{await Ct("/start_rounds",{method:"GET",headers:{lobby_code:re}})},Hn=async()=>{S(),(await Ct("/terminate_lobby",{method:"GET",headers:{lobby_code:re}})).ok&&m("/")};return h.jsxs(h.Fragment,{children:[h.jsx(Xa,{position:"top-center"}),h.jsxs("div",{className:"admin-lobby-container",children:[y,h.jsx("div",{className:"admin-view-logo",style:{cursor:"pointer"},children:h.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Reuneo Logo",style:{maxWidth:"85px",height:"auto",objectFit:"contain",transition:"transform 0.3s ease"},onClick:()=>m("/")})}),h.jsx(a4,{lobbyState:Ce,playerCount:nt,onStart:mn,onEnd:Hn,lobbyCode:re,currentRound:xe}),h.jsx(l4,{players:{pairedPlayers:Ee,lobbyData:Le}}),h.jsxs("div",{className:"admin-lobby-dropdown-toggle",onClick:()=>ce(Ve=>!Ve),style:{cursor:"pointer",background:"var(--primary-color)",color:"#f5f7ff",fontWeight:700,textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",fontSize:".75rem",borderRadius:Xe?"14px 14px 0 0":"14px",padding:"0.5rem 1rem",margin:"0 auto",maxWidth:420,boxShadow:"0 2px 8px rgba(20,77,255,0.08)",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s",letterSpacing:"0.5px"},children:[Xe?"Hide Controls":"More Controls",h.jsx("span",{style:{marginLeft:12,fontSize:"1.2em",transition:"transform 0.3s",display:"inline-block",transform:Xe?"rotate(180deg)":"rotate(0deg)"},children:""})]}),h.jsxs("div",{className:"admin-lobby-body",style:{maxHeight:Xe?1e3:0,overflow:"hidden",transition:"max-height 0.5s cubic-bezier(0.4,0,0.2,1)",opacity:Xe?1:0,pointerEvents:Xe?"auto":"none",marginBottom:Xe?"2rem":0},children:[h.jsxs("div",{className:"admin-lobby-qr",onClick:Bt,style:{cursor:"pointer"},children:[h.jsxs("span",{className:"qr-label",style:{display:"flex",alignItems:"center",gap:"0.4rem",marginBottom:"0.5rem"},children:["People scan to join",h.jsx("span",{className:"copy-icon","aria-label":"Copy",children:h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[h.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),h.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})})]}),h.jsx("div",{style:{position:"relative",display:"inline-block"},children:h.jsx(mh,{value:`${window.location.origin}/lobby?code=${re}`,size:140,level:"H",includeMargin:!1,bgColor:"#ffffff",fgColor:"#000000",id:"admin-qr-svg"})}),h.jsxs("div",{className:"lobby-code-display",onClick:()=>{navigator.clipboard.writeText(re);const Ve=document.querySelector(".lobby-code-display");Ve.classList.add("copied"),setTimeout(()=>Ve.classList.remove("copied"),250)},children:[h.jsx("span",{className:"lobby-code-label",children:"lobby code:"}),h.jsx("span",{className:"lobby-code-value",children:re}),h.jsx("span",{className:"copy-icon","aria-label":"Copy",children:h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[h.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),h.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})})]})]}),h.jsxs("div",{className:"admin-lobby-event-settings",children:[h.jsxs("div",{className:"admin-profile",children:[h.jsx("img",{src:i!=null&&i.image_data?`data:image/jpeg;base64,${i.image_data}`:"/assets/player_icon_trans.png",alt:"Your Profile",className:"admin-profile-picture"}),h.jsx("span",{className:"admin-profile-name",children:i!=null&&i.name?i.name.slice(0,20):t==null?void 0:t.slice(0,20)})]}),h.jsx("button",{onClick:yt,className:"page-control-button page-control-join",style:{marginTop:".5rem"},children:"Join Rounds"}),h.jsxs("div",{className:"setting-item",style:{padding:"1rem"},children:[h.jsxs("span",{className:"setting-label",children:["Round Duration: ",h.jsxs("span",{className:"setting-value",children:[Math.floor(X/60)," min"]})]}),h.jsx("span",{className:"setting-label",style:{},children:"Tags:"}),q&&q.length>0&&h.jsx("div",{className:"setting-item",children:h.jsxs("div",{className:"tags-container",children:[q.slice(0,3).map((Ve,kt)=>h.jsx("span",{className:"tag-pill",children:Ve},kt)),q.length>3&&h.jsxs("span",{className:"tag-pill more-tags",children:["+",q.length-3," more"]})]})})]})]}),h.jsx("div",{className:"admin-lobby-actions"})]}),(Ce==="active"||Ce==="interrim")&&ge&&h.jsx("div",{className:"admin-lobby-timer-container",children:h.jsxs("div",{className:"admin-lobby-timer-glass",children:[h.jsx(ph,{isPlaying:Ce==="active",duration:X,initialRemainingTime:ge,colors:["#144dff"],size:90,strokeWidth:12,trailColor:"url(#trailGradient)",onComplete:()=>({shouldRepeat:!1}),strokeLinecap:"round",children:({remainingTime:Ve})=>{const kt=Math.floor(Ve/60),We=Math.floor(Ve%60);return h.jsxs("span",{className:`timer-text ${Ve<=10?"timer-text-fadescale":""}`,children:[kt,":",String(We).padStart(2,"0")]})}},`${Ce}-${Math.floor(ge)}`),h.jsx("span",{className:"timer-subtext",children:"round time left"}),h.jsx("svg",{width:"0",height:"0",children:h.jsx("defs",{children:h.jsxs("linearGradient",{id:"trailGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[h.jsx("stop",{offset:"0%",stopColor:"#e0e7ff"}),h.jsx("stop",{offset:"100%",stopColor:"#f5f7ff"})]})})})]})}),Ce!=="checkin"&&h.jsxs("div",{className:"admin-lobby-stats",children:[h.jsxs("div",{className:"stat-card",children:[h.jsx("div",{className:"stat-title",children:"Total Players"}),h.jsx("div",{className:"stat-value",children:((Le==null?void 0:Le.length)||0)+((Ee==null?void 0:Ee.length)*2||0)})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("div",{className:"stat-title",children:"Paired Players"}),h.jsx("div",{className:"stat-value",children:(Ee==null?void 0:Ee.length)*2||0})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("div",{className:"stat-title",children:"Unpaired Players"}),h.jsx("div",{className:"stat-value",children:(Le==null?void 0:Le.length)||0})]})]}),Ee&&Ce!=="checkin"&&h.jsx("div",{className:"admin-lobby-players",children:h.jsxs("div",{className:"player-section",children:[h.jsxs("div",{className:"section-header",children:["Paired Players: ",h.jsx("span",{className:"stat-value",style:{fontSize:"1.3rem"},children:(Ee==null?void 0:Ee.length)*2||0})]}),h.jsx("div",{className:"player-grid",children:Ee.map((Ve,kt)=>{const We=Ve[0].match_details&&Ve[0].match_details.opponent_matched_tags&&Ve[0].match_details.opponent_matched_tags.length>0||Ve[1].match_details&&Ve[1].match_details.opponent_matched_tags&&Ve[1].match_details.opponent_matched_tags.length>0;return h.jsxs("div",{className:"paired-player-card",children:[We&&h.jsx("div",{className:"matched-pair-badge",children:"Matched"}),h.jsxs("div",{className:"paired-player",onClick:()=>me(Ve[0]),children:[h.jsx("img",{src:Ve[0].pfp_data,alt:Ve[0].name,className:"paired-player-avatar"}),h.jsx("h3",{className:"paired-player-name",children:Ve[0].name}),Ve[0].match_details&&Ve[0].match_details.opponent_matched_tags&&Ve[0].match_details.opponent_matched_tags.length>0&&h.jsx("div",{className:"matching-tag-container",children:h.jsx("div",{className:"matched-player-tag",children:Ve[0].match_details.opponent_matched_tags.map((ht,et)=>h.jsx("span",{className:"matching-tag-pill",children:ht},et))})})]}),h.jsxs("div",{className:"paired-player",onClick:()=>me(Ve[1]),children:[h.jsx("img",{src:Ve[1].pfp_data,alt:Ve[1].name,className:"paired-player-avatar"}),h.jsx("h3",{className:"paired-player-name",children:Ve[1].name}),Ve[1].match_details&&Ve[1].match_details.opponent_matched_tags&&Ve[1].match_details.opponent_matched_tags.length>0&&h.jsx("div",{className:"matching-tag-container",children:h.jsx("div",{className:"matched-player-tag",children:Ve[1].match_details.opponent_matched_tags.map((ht,et)=>h.jsx("span",{className:"matching-tag-pill",children:ht},et))})})]})]},kt)})})]})}),Le&&h.jsx("div",{className:"admin-lobby-players",children:h.jsxs("div",{className:"player-section",children:[h.jsxs("div",{className:"section-header",children:[Ce==="checkin"?"People Joined":"Unpaired Players",": ",h.jsx("span",{className:"stat-value",style:{fontSize:"1.3rem"},children:(Le==null?void 0:Le.length)||0})]}),h.jsx("div",{className:"player-grid",children:Le.map((Ve,kt)=>h.jsxs("div",{className:"player-card",onClick:()=>me(Ve),children:[h.jsx("img",{src:Ve.pfp_data,alt:Ve.name,className:"player-avatar"}),h.jsx("h3",{className:"player-name",children:Ve.name})]},kt))})]})}),h.jsx(o4,{isOpen:Ne,onClose:dt,onConfirm:Ke}),h.jsx(s4,{isOpen:te,onClose:Ye,onConfirm:$e,userName:(ye==null?void 0:ye.name)||"this user"})]}),_||!F||Ce=="checkin"||Ce==null||L?null:h.jsx(ze,{})]})},u4=()=>{const t=Bn(),{user:i}=N.useContext(Wn),a=()=>{window.location.href="https://reunio.app/become-an-organizer"};return h.jsxs("div",{className:"product-selection-container",children:[h.jsxs("video",{className:"background-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,children:[h.jsx("source",{src:"/assets/purchase_plan_video.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]}),h.jsxs("div",{className:"product-selection-content",children:[h.jsx("div",{className:"product-selection-header",children:h.jsx("h1",{children:"Product Selection"})}),h.jsxs("div",{className:"plans-section",children:[h.jsx("h2",{children:"Available Plans"}),h.jsxs("div",{className:"plan-card",children:[h.jsx("h3",{children:"Organizer Plan"}),h.jsxs("div",{className:"plan-description",children:[h.jsx("p",{children:"Create experiences for your community with our beta plan."}),h.jsxs("ul",{children:[h.jsx("li",{children:"Create unlimited experiences"}),h.jsx("li",{children:"Access to organizer dashboard"}),h.jsx("li",{children:"Priority customer support"})]})]}),h.jsx("button",{className:"purchase-button",onClick:a,children:"Contact Us"})]})]}),h.jsx("button",{className:"back-button",onClick:()=>t("/"),children:"Home"})]})]})},d4=()=>{const{user:t,userProfile:i,checkAuth:a,permissions:u}=N.useContext(Wn),[m,x]=N.useState(""),[y,b]=N.useState(""),[v,C]=N.useState(!1),[S,T]=N.useState(""),[_,M]=N.useState(!1),[L,F]=N.useState([]),[j,z]=N.useState(""),[V,B]=N.useState("5"),[Y,$]=N.useState("0"),[re,G]=N.useState(!1),[te,J]=N.useState(null),[ye,_e]=N.useState(!1),[Ne,Se]=N.useState(null),[Ee,Z]=N.useState(null),[Le,ve]=N.useState(""),[ge,De]=N.useState(""),[Ce,K]=N.useState(null),[X,we]=N.useState(null),[be,de]=N.useState(""),[q,Re]=N.useState(!1),[xe,Ae]=N.useState(!1),[nt,Xe]=N.useState({x:0,y:0}),[ce,me]=N.useState(1),[Ye,$e]=N.useState(null),yt=8,dt=Bn(),Ke=N.useRef(null);N.useEffect(()=>{window.scrollTo(0,0),t&&(x(t),b(t)),Ke.current&&Ke.current.focus()},[t]);const Qe=Ie=>{const ae=/^[a-z0-9]+$/;return Ie.length>=2&&ae.test(Ie)},Bt=Ie=>{const ae=Ie.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");b(ae),M(!0),setTimeout(()=>{M(!1)},500)},ze=()=>{if(j.includes(",")){const Ie=j.split(",").map(ft=>ft.startsWith(" ")?ft.substring(1):ft),ae=[];Ie.forEach(ft=>{const ot=ft.trim();ot&&!L.includes(ot)&&!ae.includes(ot)&&ae.push(ot)}),ae.length>0&&F([...L,...ae]),z("")}else j.trim()&&!L.includes(j.trim())&&(F([...L,j.trim()]),z(""))},mn=Ie=>{F(L.filter(ae=>ae!==Ie))},Hn=Ie=>{Ie.key==="Enter"&&j.trim()&&(Ie.preventDefault(),ze())},Ve=Ie=>{Ie==="icebreaker"?L.length>0||j.trim()?(Se("icebreaker"),_e(!0)):(J("icebreaker"),F([]),z("")):Ie==="custom"&&J("custom")},kt=()=>{J(Ne),F([]),z(""),_e(!1),Se(null)},We=()=>{_e(!1),Se(null)},ht=(Ie,ae,ft)=>new Promise(ot=>{const ut=new Image;ut.onload=()=>{const Zt=document.createElement("canvas"),cn=Zt.getContext("2d");let{width:un,height:Fe}=ut;un>Fe?un>ae&&(Fe=Fe*ae/un,un=ae):Fe>ft&&(un=un*ft/Fe,Fe=ft),Zt.width=un,Zt.height=Fe,cn.drawImage(ut,0,0,un,Fe);const dn=Zt.toDataURL("image/jpeg",.7);ot(dn)},ut.src=URL.createObjectURL(Ie)}),et=async Ie=>{const ae=Ie.target.files[0];if(ae){if(de(""),Ae(!0),!["image/jpeg","image/jpg","image/png"].includes(ae.type)){de("Invalid format. Please upload a JPG or PNG image."),Ae(!1);return}if(ae.size>2*1024*1024){de("File too large. Please choose an image under 2MB."),Ae(!1);return}try{const ft=await ht(ae,400,400);Z(ae),K(ft),Re(!0),Ae(!1)}catch(ft){console.error("Error processing image:",ft),de("Error processing image. Please try again."),Ae(!1)}}},_t=(Ie,ae)=>{$e(ae)},en=async()=>{try{Ae(!0);const Ie=await Uc(Ce,Ye);we(Ie),Re(!1),Ae(!1)}catch(Ie){console.error("Error cropping logo:",Ie),de("Error processing image. Please try again."),Re(!1),Ae(!1)}},Yt=()=>{Z(null),K(null),we(null),Re(!1),Ae(!1),Xe({x:0,y:0}),me(1),$e(null),de("");const Ie=document.getElementById("logoUpload");Ie&&(Ie.value="")},ct=async Ie=>{if(Ie.preventDefault(),!Qe(y)){T("Lobby code must be at least 2 characters long and contain only lowercase letters and numbers");return}C(!0),T("");const ae=parseInt(V)*60+parseInt(Y);let ft=null;X&&(ft=X.split(",")[1]);try{const ot={lobby_code:y,custom_tags:te==="custom"?L:[],lobby_duration:ae,show_table_numbers:re};ft&&(ot.logo_icon=ft),Le.trim()&&(ot.logo_name=Le.trim()),ge.trim()&&(ot.logo_hyperlink=ge.trim());const ut=await Ct("/create_lobby",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ot)});if(ut.ok)console.log("Lobby created successfully"),console.log(await ut.json()),dt(`/admin_lobby_view?code=${y}`);else{const Zt=await ut.json();T(Zt.message||"Failed to create lobby"),console.error("Failed to create lobby")}}catch(ot){T("An error occurred while creating the lobby"),console.error("Error creating lobby:",ot)}finally{C(!1)}};return h.jsxs("div",{className:"create-lobby-background",children:[h.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Reunio Logo",className:"logo-image",onClick:()=>dt(-1)}),h.jsxs("div",{className:"create-lobby-container",children:[h.jsx("h1",{className:"create-lobby-title",children:"Create a New Lobby"}),h.jsxs("form",{onSubmit:ct,className:"create-lobby-form",children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"lobbyCode",children:"Lobby Code"}),h.jsx("input",{ref:Ke,type:"text",id:"lobbyCode",value:y,onChange:Bt,placeholder:"Enter lobby code (lowercase letters and numbers only)",required:!0,className:`form-input ${_?"typing":""}`,autoComplete:"off"}),h.jsx("div",{className:"input-hint",children:"lowercase letters and numbers only"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{children:"Round Duration"}),h.jsxs("div",{className:"duration-input-container",children:[h.jsxs("div",{className:"duration-input-group",children:[h.jsx("input",{type:"number",id:"minutes",value:V,onChange:Ie=>{const ae=Ie.target.value;(ae===""||parseInt(ae)>0&&parseInt(ae)<=yt)&&(B(ae),parseInt(ae)===yt&&$("0"))},min:"1",max:yt,placeholder:`1-${yt}`,className:"form-input duration-input",autoComplete:"off"}),h.jsx("label",{htmlFor:"minutes",className:"duration-label",children:"Minutes"})]}),h.jsxs("div",{className:"duration-input-group",children:[h.jsx("input",{type:"number",id:"seconds",value:Y,onChange:Ie=>{const ae=Ie.target.value;(ae===""||parseInt(ae)>=0&&parseInt(ae)<=59)&&$(ae)},min:"0",max:"59",placeholder:"0-59",className:"form-input duration-input",autoComplete:"off",disabled:parseInt(V)===yt}),h.jsx("label",{htmlFor:"seconds",className:"duration-label",children:"Seconds"})]})]}),h.jsxs("div",{className:"input-hint",children:["Maximum total duration is ",yt," minutes"]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"showTableNumbers",children:"Table Numbers"}),h.jsx("input",{type:"checkbox",id:"showTableNumbers",checked:re,onChange:Ie=>G(Ie.target.checked),className:"form-input checkbox-input"}),h.jsx("div",{className:"input-hint",children:"Recommended for events with 50+ people"}),h.jsx("div",{className:"input-hint",children:"Make sure to provide table numbers"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{children:"Matchmaking Categories"}),h.jsxs("div",{className:"matchmaking-tabs",children:[h.jsx("button",{type:"button",className:`tab-button ${te==="icebreaker"?"tab-selected":""}`,onClick:()=>Ve("icebreaker"),children:"Community Ice Breaker"}),h.jsx("button",{type:"button",className:`tab-button ${te==="custom"?"tab-selected":""}`,onClick:()=>Ve("custom"),children:"Custom Matching"})]}),te==="custom"&&h.jsxs("div",{className:"custom-matching-section",children:[h.jsxs("div",{className:"tag-input-container",children:[h.jsx("input",{type:"text",id:"tagInput",value:j,onChange:Ie=>z(Ie.target.value),onKeyDown:Hn,placeholder:"Add categories (press + to add)",className:"form-input",autoComplete:"off"}),h.jsx("button",{type:"button",onClick:ze,className:"tag-add-button",children:"+"})]}),L.length>0&&h.jsx("div",{className:"tag-list",children:L.map((Ie,ae)=>h.jsxs("div",{className:"tag-item",children:[Ie,h.jsx("button",{type:"button",onClick:()=>mn(Ie),className:"tag-remove-button",children:""})]},ae))}),h.jsx("div",{className:"input-hint",children:"If you want to match people based on categories"})]})]}),h.jsxs("div",{className:"form-group logo-upload-section",children:[h.jsx("label",{children:"Sponsor Logo"}),!X&&!q&&h.jsxs(h.Fragment,{children:[xe?h.jsx("div",{className:"logo-processing",children:"Processing..."}):h.jsxs(h.Fragment,{children:[h.jsx("input",{type:"file",id:"logoUpload",accept:"image/jpeg,image/jpg,image/png",onChange:et,style:{display:"none"}}),h.jsx("button",{type:"button",onClick:()=>document.getElementById("logoUpload").click(),className:"logo-upload-button",children:"Upload Logo"})]}),be&&h.jsx("div",{className:"logo-error-message",children:be})]}),q&&Ce&&h.jsxs("div",{className:"logo-crop-container",children:[h.jsx("div",{className:"logo-crop-area",children:h.jsx(Vc,{image:Ce,crop:nt,zoom:ce,aspect:1,onCropChange:Xe,onZoomChange:me,onCropComplete:_t})}),h.jsxs("div",{className:"logo-crop-controls",children:[h.jsx("button",{type:"button",onClick:en,className:"logo-save-button",disabled:xe,children:xe?"Processing...":"Save Crop"}),h.jsx("button",{type:"button",onClick:Yt,className:"logo-cancel-button",children:"Cancel"})]})]}),X&&!q&&h.jsx("div",{className:"logo-preview-container",children:h.jsxs("div",{className:"logo-preview",children:[h.jsx("img",{src:X,alt:"Logo preview",className:"logo-preview-image"}),h.jsx("button",{type:"button",onClick:Yt,className:"logo-remove-button",children:""})]})}),!1]}),S&&h.jsx("div",{className:"error-message",children:S}),h.jsx("button",{type:"submit",className:"submit-button",disabled:v,children:v?"Creating...":"Create Lobby"})]})]}),ye&&h.jsx("div",{className:"modal-overlay",children:h.jsxs("div",{className:"modal-content",children:[h.jsx("h3",{children:"Switch to Community Ice Breaker?"}),h.jsx("p",{children:"This will clear your current matching categories."}),h.jsxs("div",{className:"modal-buttons",children:[h.jsx("button",{type:"button",onClick:We,className:"modal-button modal-cancel",children:"Cancel"}),h.jsx("button",{type:"button",onClick:kt,className:"modal-button modal-confirm",children:"Confirm"})]})]})})]})},f4=t=>{try{const i=new URLSearchParams(t||window.location.search),a=i.get("via")||"",u=i.get("rewardful")||i.get("rewardful_referral")||"",m=typeof window<"u"&&window.Rewardful&&window.Rewardful.referral||"",x=typeof window<"u"&&window.localStorage&&window.localStorage.getItem("rewardful_referral")||"",y=m||u||a||x||"";return y&&typeof window<"u"&&window.localStorage&&window.localStorage.setItem("rewardful_referral",y),y}catch{return""}},h4=()=>{const{login:t,user:i,checkAuth:a,permissions:u}=N.useContext(Wn),[m,x]=N.useState(""),[y,b]=N.useState(""),[v,C]=N.useState(""),[S,T]=N.useState(""),[_,M]=N.useState(""),[L,F]=N.useState(""),[j,z]=N.useState({}),[V,B]=N.useState(""),[Y,$]=N.useState(!1),re=Bn(),G=Vr();N.useEffect(()=>{localStorage.getItem("access_token")&&!i&&a()},[]),N.useEffect(()=>{u!==null&&(u==="admin"||u==="organizer")&&re("/")},[u,re]),N.useEffect(()=>{(async()=>{if(i!==null&&u!==null&&u!=="admin"&&u!=="organizer")try{if(!localStorage.getItem("access_token"))return;const Re=await Ct("/check-subscription-status");Re.ok&&(await Re.json()).has_access===!0&&re("/organizer-account-details")}catch(q){console.error("Error checking subscription status:",q)}})()},[i,u,re]);const te=de=>{const q=/^[a-z0-9]+$/;return de.length>=2&&q.test(de)},J=de=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(de)&&de.trim()!=="",ye=de=>de.replace(/\D/g,"").length===10,_e=de=>de.trim().length>=2,Ne=de=>{const q=de.replace(/\D/g,"");return q.length===0?"":q.length<=3?`(${q}`:q.length<=6?`(${q.slice(0,3)}) ${q.slice(3)}`:`(${q.slice(0,3)}) ${q.slice(3,6)}-${q.slice(6,10)}`},Se=de=>de.replace(/\D/g,""),Ee=de=>{const q=de.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");x(q),V&&B("")},Z=de=>{b(de.target.value),V&&B(""),j.email&&z(q=>({...q,email:""}))},Le=de=>{const q=de.target.value;C(q),V&&B(""),j.phone&&z(Re=>({...Re,phone:""}))},ve=()=>{const de=Ne(v);C(de),de&&!ye(de)?z(q=>({...q,phone:"Invalid phone number"})):z(q=>({...q,phone:""}))},ge=de=>{const q=de.target.value;T(q),V&&B(""),j.cityState&&z(Re=>({...Re,cityState:""}))},De=()=>{S&&!_e(S)?z(de=>({...de,cityState:"City/State must be at least 2 characters"})):z(de=>({...de,cityState:""}))},Ce=de=>{M(de.target.value),j.eventType&&z(q=>({...q,eventType:""}))},K=de=>{F(de.target.value),j.avgAttendees&&z(q=>({...q,avgAttendees:""}))},X=async de=>{de.preventDefault(),B(""),$(!0);const q=i!==null;if(!q&&(!m||!te(m))){B("Username must be at least 2 characters and contain only lowercase letters and numbers"),$(!1);return}if(!y||!J(y)){z(Xe=>({...Xe,email:"Please enter a valid email address"})),B("Please enter a valid email address"),$(!1);return}const Re=Se(v);if(!v||!ye(v)){z(Xe=>({...Xe,phone:"Please enter a valid phone number"})),B("Please enter a valid phone number"),$(!1);return}if(!S||!_e(S)){z(Xe=>({...Xe,cityState:"City/State is required (minimum 2 characters)"})),B("City/State is required (minimum 2 characters)"),$(!1);return}const xe=new URLSearchParams(G.search),Ae=f4(G.search),nt=xe.get("ref")||xe.get("affiliate_code")||"";if(q){if(!localStorage.getItem("access_token")){B("Authentication required. Please log in again."),$(!1);return}try{if(!(await Ct("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone_number:Re,city_state:S,event_type:_||"",avg_attendees:L||""})})).ok)throw new Error("Failed to update profile");const me=await Ct("/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:y,rewardful_referral:Ae,affiliate_code:nt})}),Ye=await me.json();if(!me.ok||Ye.error){if(Ye.error&&Ye.error.includes("already have an active subscription")){re("/organizer-account-details");return}B(Ye.error||"Failed to create checkout session. Please try again."),$(!1);return}window.location.href=Ye.checkout_url;return}catch(ce){console.error("Error creating checkout session:",ce),B("An error occurred. Please try again."),$(!1);return}}try{const ce=await Ct("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:m,password:m})}),me=await ce.json();if(me.error==="Username already taken"){B("Username is taken"),$(!1);return}if(!ce.ok){B(me.message||"Signup failed"),$(!1);return}if(t(me),await a(),!localStorage.getItem("access_token"))throw new Error("Authentication failed");const $e=await fetch("/assets/fakeprofile.png");if(!$e.ok)throw new Error("Failed to fetch profile image");const dt=await(await $e.blob()).arrayBuffer(),Ke=btoa(new Uint8Array(dt).reduce((mn,Hn)=>mn+String.fromCharCode(Hn),""));if(!(await Ct("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:m,image_data:Ke,phone_number:Re,city_state:S,event_type:_||"",avg_attendees:L||""})})).ok)throw new Error("Failed to update profile");await a();const Bt=await Ct("/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:y,rewardful_referral:Ae,affiliate_code:nt})}),ze=await Bt.json();if(!Bt.ok||ze.error){if(ze.error&&ze.error.includes("already have an active subscription")){re("/organizer-account-details");return}throw new Error(ze.error||"Failed to create checkout session")}window.location.href=ze.checkout_url}catch(Xe){console.error("Error:",Xe),B("An error occurred. Please try again."),$(!1)}},we=i===null,be=Y||u==="admin"||u==="organizer";return h.jsxs("div",{className:"signup-container",children:[h.jsx("button",{onClick:()=>re("/"),className:"homescreen-button",children:"Home"}),h.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),h.jsx("h3",{className:"signup-header",children:"Become an Organizer"}),h.jsx("div",{className:"step-form-container",children:h.jsxs("form",{onSubmit:X,children:[h.jsxs("div",{style:{display:we?"block":"none"},children:[h.jsx("label",{className:"step-label",children:"Username"}),h.jsx("input",{type:"text",value:m,onChange:Ee,placeholder:"Enter a username",className:"step-input",autoFocus:we}),m.length>0&&h.jsxs("div",{className:"username-info-message",children:[h.jsxs("svg",{className:"info-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[h.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),h.jsx("path",{d:"M8 5V7M8 11V9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),h.jsx("circle",{cx:"8",cy:"5",r:"0.5",fill:"currentColor"})]}),h.jsx("span",{children:"This will be your temporary password"})]})]}),h.jsxs("div",{style:{marginTop:we?"20px":"0"},children:[h.jsxs("label",{className:"step-label",children:["Email",j.email&&h.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[h.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),h.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),h.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),h.jsx("input",{type:"email",value:y,onChange:Z,placeholder:"Enter your email",className:`step-input ${j.email?"input-error":""}`,autoFocus:!we})]}),h.jsxs("div",{style:{marginTop:"20px"},children:[h.jsxs("label",{className:"step-label",children:["Phone Number",j.phone&&h.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[h.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),h.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),h.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),h.jsx("input",{type:"tel",value:v,onChange:Le,onBlur:ve,placeholder:"(123) 456-7890",className:`step-input ${j.phone?"input-error":""}`})]}),h.jsxs("div",{style:{marginTop:"20px"},children:[h.jsxs("label",{className:"step-label",children:["City / State",j.cityState&&h.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[h.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),h.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),h.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),h.jsx("input",{type:"text",value:S,onChange:ge,onBlur:De,placeholder:"City / State",className:`step-input ${j.cityState?"input-error":""}`})]}),h.jsxs("div",{style:{marginTop:"20px"},children:[h.jsx("label",{className:"step-label",children:"What events do you host?"}),h.jsxs("select",{value:_,onChange:Ce,className:"step-select",children:[h.jsx("option",{value:"",children:"Select an option..."}),h.jsx("option",{value:"Hospitality-Restaurants",children:"Hospitality-Restaurants"}),h.jsx("option",{value:"Social",children:"Social"}),h.jsx("option",{value:"Residential",children:"Residential"}),h.jsx("option",{value:"Business Networking",children:"Business Networking"}),h.jsx("option",{value:"Event Specialist",children:"Event Specialist"}),h.jsx("option",{value:"Education",children:"Education"}),h.jsx("option",{value:"HR-Team Building",children:"HR-Team Building"}),h.jsx("option",{value:"Corporate",children:"Corporate"}),h.jsx("option",{value:"Co-working",children:"Co-working"}),h.jsx("option",{value:"Dating",children:"Dating"}),h.jsx("option",{value:"Other",children:"Other"})]})]}),h.jsxs("div",{style:{marginTop:"20px"},children:[h.jsx("label",{className:"step-label",children:"Avg # of attendees"}),h.jsxs("select",{value:L,onChange:K,className:"step-select",children:[h.jsx("option",{value:"",children:"Select an option..."}),h.jsx("option",{value:"5-15",children:"5-15"}),h.jsx("option",{value:"15-30",children:"15-30"}),h.jsx("option",{value:"30-50",children:"30-50"}),h.jsx("option",{value:"50-75",children:"50-75"}),h.jsx("option",{value:"75-100",children:"75-100"}),h.jsx("option",{value:"100-150",children:"100-150"}),h.jsx("option",{value:"150-200",children:"150-200"}),h.jsx("option",{value:"200+",children:"200+"})]})]}),V&&h.jsx("div",{className:"error-message",style:{marginTop:"15px",marginBottom:"10px"},children:V}),h.jsx("button",{type:"submit",className:"primary-button",disabled:be,style:{marginTop:"20px"},children:Y?"Loading...":"Submit"})]})})]})},m4=()=>{const[t,i]=N.useState(!1),[a,u]=N.useState(""),m=N.useRef(null),x=Bn(),y=Vr();return N.useEffect(()=>{const v=new URLSearchParams(y.search).get("session_id");return(async()=>{let S="/";if(!v){u("Missing session ID"),i(!0),m.current=setTimeout(()=>{i(!1),x(S)},2e3);return}try{if(!localStorage.getItem("access_token")){u("Authentication required"),i(!0),m.current=setTimeout(()=>{i(!1),x(S)},2e3);return}const _=await Ct(`/organizer-signup-success?session_id=${v}`),M=await _.json();if(!_.ok||M.error)console.error("Payment verification failed:",M.error),u(M.error||"Payment verification failed");else try{const L=await Ct("/view_my_active_lobbies");if(L.ok){const F=await L.json();S=!!(F&&Array.isArray(F.lobbies)&&F.lobbies.length>0)?"/":"/create_lobby"}else S="/"}catch(L){console.error("Error checking active lobbies:",L),S="/"}}catch(T){console.error("Error verifying payment:",T),u("Failed to verify payment")}i(!0),m.current=setTimeout(()=>{i(!1),x(S)},2e3)})(),()=>{m.current&&(clearTimeout(m.current),m.current=null)}},[y.search,x]),t?h.jsxs("div",{className:"success-overlay",children:[h.jsx("div",{className:"success-text",children:"Success! You're now an organizer!"}),a&&h.jsx("div",{className:"success-error",style:{marginTop:"20px"},children:a})]}):h.jsx("div",{className:"signup-container",children:h.jsx("div",{className:"loading-message",children:"Processing..."})})},p4=()=>{const{user:t,checkAuth:i,permissions:a}=N.useContext(Wn),u=Bn(),[m,x]=N.useState(null),[y,b]=N.useState(!0),[v,C]=N.useState(!1),[S,T]=N.useState(""),[_,M]=N.useState(!1),[L,F]=N.useState(!1);N.useEffect(()=>{a!==null&&a!=="admin"&&a!=="organizer"&&u("/organizer-signup")},[a,u]),N.useEffect(()=>{t&&(async()=>{try{const B=await Ct("/organizer-account-details"),Y=await B.json();if(!B.ok||Y.error){if((a==="admin"||a==="organizer")&&Y.has_subscription!==!1){T(Y.error||"Some subscription details may be incomplete"),x(Y),b(!1);return}if(Y.has_subscription===!1){u("/organizer-signup");return}T(Y.error||"Failed to load account details"),Y.has_subscription!==!1&&x(Y),b(!1);return}if(Y.has_subscription===!1){u("/organizer-signup");return}x(Y)}catch(B){console.error("Error fetching account details:",B),T("Failed to load account details. Please try again.")}finally{b(!1)}})()},[t,a,u]),N.useEffect(()=>(_?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[_]);const j=V=>V?new Date(V*1e3).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):null,z=async()=>{C(!0),T("");try{const V=await Ct("/cancel-subscription",{method:"POST",headers:{"Content-Type":"application/json"}}),B=await V.json();if(!V.ok||B.error){T(B.error||"Failed to cancel subscription"),C(!1),M(!1);return}F(!0),M(!1),setTimeout(()=>{u("/")},1500)}catch(V){console.error("Error canceling subscription:",V),T("An error occurred. Please try again."),C(!1),M(!1)}};return y?h.jsx("div",{className:"signup-container",children:h.jsx("div",{className:"loading-message",children:"Loading account details..."})}):!m&&!y?h.jsxs("div",{className:"signup-container",children:[h.jsx("button",{onClick:()=>u("/"),className:"homescreen-button",children:"Home"}),h.jsx("div",{className:"error-message",children:S||"No account details found"})]}):m?h.jsxs("div",{className:"signup-container",children:[h.jsx("button",{onClick:()=>u("/"),className:"homescreen-button",children:"Home"}),h.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),h.jsx("h3",{className:"signup-header",children:"Organizer Account Details"}),h.jsx("div",{className:"step-form-container",children:h.jsxs("div",{className:"account-details-content",children:[S&&h.jsx("div",{className:"error-message",style:{marginBottom:"20px"},children:S}),m.subscription_status&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Subscription Status:"}),h.jsx("span",{className:`detail-value status-${m.subscription_status}`,children:m.subscription_status})]}),m.email&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Email:"}),h.jsx("span",{className:"detail-value",children:m.email})]}),m.billing_period&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Billing Period:"}),h.jsx("span",{className:"detail-value",children:m.billing_period})]}),m.amount!==null&&m.amount!==void 0&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Amount:"}),h.jsxs("span",{className:"detail-value",children:["$",m.amount," ",m.currency||""]})]}),m.current_period_start&&j(m.current_period_start)&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Current Period Start:"}),h.jsx("span",{className:"detail-value",children:j(m.current_period_start)})]}),m.current_period_end&&j(m.current_period_end)&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Current Period End:"}),h.jsx("span",{className:"detail-value",children:j(m.current_period_end)})]}),m.cancel_at_period_end&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Cancellation:"}),h.jsx("span",{className:"detail-value",children:"Will cancel at period end"})]}),h.jsx("button",{onClick:()=>M(!0),className:"primary-button cancel-button",style:{marginTop:"30px"},children:"Cancel Subscription"})]})}),_&&h.jsx("div",{className:"modal-overlay",onClick:V=>V.stopPropagation(),children:h.jsxs("div",{className:"modal-content",onClick:V=>V.stopPropagation(),children:[h.jsx("h3",{children:"Cancel Subscription"}),h.jsx("p",{children:"Are you sure you want to cancel your subscription?"}),h.jsxs("div",{className:"modal-buttons",children:[h.jsx("button",{className:"modal-button modal-cancel",onClick:()=>M(!1),disabled:v,children:"Cancel"}),h.jsx("button",{className:"modal-button modal-confirm",onClick:z,disabled:v,children:v?"Processing...":"Confirm"})]})]})}),L&&h.jsx("div",{className:"toast-container",children:h.jsx("div",{className:"toast-message",children:"Subscription canceled successfully"})})]}):null},Sf=({size:t=60,className:i=""})=>h.jsx("div",{className:`attendees-spinner ${i}`,style:{width:t,height:t},children:h.jsx("div",{className:"attendees-spinner-inner"})}),Gd=["#6366f1","#8b5cf6","#ec4899","#f59e0b","#10b981","#3b82f6","#ef4444","#14b8a6","#f97316","#a855f7","#06b6d4","#84cc16"],g4=t=>{if(!t)return Gd[0];let i=0;for(let u=0;u<t.length;u++)i=t.charCodeAt(u)+((i<<5)-i);const a=Math.abs(i)%Gd.length;return Gd[a]},Af=Ht.memo(({tag:t})=>{const i=g4(t);return h.jsx("span",{className:"attendee-modal-tag-pill",style:{background:i},children:t})});Af.displayName="TagPill";const x4=t=>{if(!t)return"Date not available";let i;if(typeof t=="number")i=t<1e10?new Date(t*1e3):new Date(t);else if(typeof t=="string")i=new Date(t);else return"Date not available";return isNaN(i.getTime())?"Date not available":i.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},y4=({attendees:t=[]})=>{const i=N.useRef(null),a=N.useRef(null),u=N.useRef(null),[m,x]=N.useState(null),[y,b]=N.useState(!1),[v,C]=N.useState({}),[S,T]=N.useState(!1),[_,M]=N.useState({}),L=N.useRef(-1),F=N.useRef(null),[j,z]=N.useState(!1),[V,B]=N.useState(null),[Y,$]=N.useState({}),[re,G]=N.useState(!1),[te,J]=N.useState(null),[ye,_e]=N.useState(null),[Ne,Se]=N.useState(!1),Ee=N.useRef(null),Z=N.useRef(null),Le=N.useRef({}),ve=N.useRef(null);N.useEffect(()=>{const ce=window.matchMedia("(pointer: coarse)"),me=()=>b(!!ce.matches);return me(),ce.addEventListener?ce.addEventListener("change",me):ce.addListener(me),()=>{ce.removeEventListener?ce.removeEventListener("change",me):ce.removeListener(me)}},[]),N.useEffect(()=>{const ce=me=>{a.current&&(a.current.contains(me.target)||x(null))};return document.addEventListener("pointerdown",ce,{capture:!0}),()=>{document.removeEventListener("pointerdown",ce,{capture:!0})}},[]);const ge=N.useCallback((ce=1)=>{const me=i.current;if(!me)return;const Ye=Math.round(me.clientWidth*.75)*ce;me.scrollBy({left:Ye,behavior:"smooth"})},[]),De=N.useCallback(()=>{const ce=i.current;return ce?ce.scrollLeft>0:!1},[]),Ce=N.useCallback(()=>{const ce=i.current;return ce?ce.scrollLeft<ce.scrollWidth-ce.clientWidth-1:!1},[]),[K,X]=N.useState({left:!1,right:!0});N.useEffect(()=>{const ce=()=>{X({left:De(),right:Ce()})},me=i.current;return me&&(ce(),me.addEventListener("scroll",ce),window.addEventListener("resize",ce)),()=>{me&&(me.removeEventListener("scroll",ce),window.removeEventListener("resize",ce))}},[t.length,De,Ce]);const we=N.useCallback(async ce=>{if(S||ce.length===0)return;const me=ce.filter($e=>!v[$e]&&!_[$e]);if(me.length===0)return;T(!0);const Ye={..._};me.forEach($e=>{Ye[$e]=!0}),M(Ye);try{const $e=await Ct("/organizer_attendees/images",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({usernames:me})});if(!$e.ok)throw $e.status===401?new Error("Unauthorized"):new Error("Failed to load images");const yt=await $e.json();if(yt.status==="success"&&yt.images){const dt={...v};me.forEach(Ke=>{yt.images[Ke]?dt[Ke]=`data:image/jpeg;base64,${yt.images[Ke]}`:dt[Ke]=null}),C(dt)}}catch($e){console.error("Error loading images:",$e)}finally{T(!1);const $e={..._};me.forEach(yt=>{delete $e[yt]}),M($e)}},[S,v,_]);N.useEffect(()=>{if(t.length===0||L.current>=0)return;const ce=t.slice(0,30).map(me=>me.username);ce.length>0&&(we(ce),L.current=Math.min(29,t.length-1))},[t.length,we]),N.useEffect(()=>{if(t.length===0||!i.current)return;const ce=new IntersectionObserver(Ye=>{F.current&&clearTimeout(F.current),F.current=setTimeout(()=>{Ye.forEach($e=>{if($e.isIntersecting){const yt=parseInt($e.target.dataset.index),dt=L.current;if(yt>=dt-5&&yt<t.length&&dt<t.length-1){const Ke=dt+1,Qe=Math.min(Ke+30,t.length);if(Ke<t.length){const Bt=t.slice(Ke,Qe).map(ze=>ze.username);we(Bt),L.current=Qe-1}}}})},150)},{root:i.current,rootMargin:"200px",threshold:.5});return i.current.querySelectorAll("[data-index]").forEach(Ye=>ce.observe(Ye)),u.current=ce,()=>{F.current&&clearTimeout(F.current),u.current&&u.current.disconnect()}},[t.length,we]);const be=N.useCallback(()=>!V||t.length===0?-1:t.findIndex(ce=>ce.username===V),[V,t]),de=N.useCallback(ce=>{var $e;const me=be();if(me===-1||t.length===0)return null;let Ye;return ce==="next"?Ye=(me+1)%t.length:Ye=me===0?t.length-1:me-1,(($e=t[Ye])==null?void 0:$e.username)||null},[be,t]),q=N.useCallback(async ce=>{const me=de(ce);me&&(_e(ce==="next"?"left":"right"),ve.current&&clearTimeout(ve.current),ve.current=setTimeout(()=>{_e(null),ve.current=null},400),await Ae(me,!1))},[de]),Re=N.useMemo(()=>!(t.length<=1),[t.length]),xe=N.useMemo(()=>!(t.length<=1),[t.length]),Ae=N.useCallback(async(ce,me=!0)=>{var Ye,$e,yt,dt;if(Le.current[ce]){B(ce),z(!0),J(null),Se(me);return}Ee.current&&Ee.current,Ee.current=ce,G(!0),J(null),z(!0),B(ce),Se(me);try{const Ke=await Ct(`/organizer_attendees/${ce}/details`);if(Ee.current!==ce)return;if(Ke.status===401)throw localStorage.removeItem("access_token"),new Error("Session expired. Please log in again.");if(Ke.status===403)throw new Error("Access denied. Organizer permissions required.");if(Ke.status===404)throw new Error("Attendee details not found.");if(!Ke.ok)throw new Error("Failed to load attendee details");const Qe=await Ke.json();if(Qe.status==="success"&&Qe.attendee){const Bt={username:Qe.attendee.username,name:Qe.attendee.name||Qe.attendee.username,image_data:Qe.attendee.image_data?`data:image/jpeg;base64,${Qe.attendee.image_data}`:null,last_joined_date:Qe.attendee.last_joined_date,self_tags:((Ye=Qe.attendee.tags)==null?void 0:Ye.tags_work)||[],desiring_tags:(($e=Qe.attendee.tags)==null?void 0:$e.desiring_tags_work)||[],lobbies_attended:((yt=Qe.attendee.stats)==null?void 0:yt.lobbies_attended)||0,rounds_paired:((dt=Qe.attendee.stats)==null?void 0:dt.rounds_paired)||0};$(ze=>{const mn={...ze,[ce]:Bt};return Le.current=mn,mn}),Ee.current===ce&&B(ce)}else throw new Error(Qe.error||"Failed to load attendee details")}catch(Ke){Ee.current===ce&&(console.error("Error fetching attendee details:",Ke),J(Ke.message||"An error occurred while loading details."))}finally{Ee.current===ce&&(G(!1),Ee.current=null)}},[]),nt=N.useCallback(()=>{Z.current&&clearTimeout(Z.current),ve.current&&clearTimeout(ve.current),z(!1),J(null),_e(null),Se(!1),Z.current=setTimeout(()=>{B(null),Z.current=null},300)},[]);N.useEffect(()=>()=>{Z.current&&clearTimeout(Z.current)},[]),N.useEffect(()=>{const ce=me=>{me.key==="Escape"&&j&&(me.stopPropagation(),nt())};return document.addEventListener("keydown",ce,!0),()=>document.removeEventListener("keydown",ce,!0)},[j,nt]),N.useEffect(()=>{if(j){const ce=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=ce}}},[j]),N.useEffect(()=>()=>{ve.current&&clearTimeout(ve.current)},[]);const Xe=N.useMemo(()=>t.map((ce,me)=>({username:ce.username||`temp-${me}`,name:ce.name||ce.username||`User ${me+1}`,small_image_data:ce.small_image_data||null})),[t]);return h.jsxs("section",{className:`attendees-root ${j&&Ne?"attendees-root-modal-open":""}`,ref:a,"aria-label":"Your Community",children:[h.jsxs("div",{className:"attendees-card",children:[h.jsx("header",{className:"attendees-header",children:h.jsx("h2",{className:"attendees-title",children:"Your Community"})}),h.jsxs("div",{className:"attendees-carouselWrap",children:[h.jsx("button",{type:"button",className:"attendees-arrow attendees-arrowLeft","aria-label":"Scroll left",onClick:()=>ge(-1),disabled:!K.left||y,children:""}),h.jsx("div",{ref:i,className:"attendees-scroller",role:"list","aria-label":"Community attendees list",onMouseLeave:()=>{y||x(null)},children:Xe.map((ce,me)=>{const Ye=m===ce.username,$e=m!==null,yt=v[ce.username],dt=_[ce.username];return h.jsxs("div",{"data-index":me,className:["attendees-item",Ye?"is-active":"",$e&&!Ye?"is-dimmed":"",y?"is-touch":"is-mouse"].join(" "),role:"listitem",tabIndex:0,onMouseEnter:()=>{y||x(ce.username)},onFocus:()=>x(ce.username),onClick:()=>{y&&x(ce.username),Ae(ce.username,!0)},onKeyDown:Ke=>{(Ke.key==="Enter"||Ke.key===" ")&&(Ke.preventDefault(),x(ce.username)),Ke.key==="Escape"&&x(null)},children:[h.jsx("div",{className:"attendees-avatarWrap","aria-hidden":"true",children:dt?h.jsx(Sf,{size:30,className:"attendees-tile-spinner"}):yt?h.jsx("img",{className:"attendees-avatarImg",src:yt,alt:"",onError:Ke=>{Ke.target.src="/assets/fakeprofile.png"}}):h.jsx("img",{className:"attendees-avatarImg",src:"/assets/fakeprofile.png",alt:""})}),h.jsx("div",{className:"attendees-name",title:ce.name,children:ce.name})]},ce.username)})}),h.jsx("button",{type:"button",className:"attendees-arrow attendees-arrowRight","aria-label":"Scroll right",onClick:()=>ge(1),disabled:!K.right||y,children:""})]}),h.jsxs("div",{className:"attendees-dots","aria-hidden":"true",children:[h.jsx("span",{className:"attendees-dot is-on"}),h.jsx("span",{className:"attendees-dot"}),h.jsx("span",{className:"attendees-dot"}),h.jsx("span",{className:"attendees-dot"})]})]}),j&&h.jsxs(h.Fragment,{children:[t.length>1&&h.jsxs(h.Fragment,{children:[h.jsx("button",{type:"button",className:"attendee-modal-nav-arrow attendee-modal-nav-left",onClick:ce=>{ce.stopPropagation(),q("prev")},disabled:!Re,children:""}),h.jsx("button",{type:"button",className:"attendee-modal-nav-arrow attendee-modal-nav-right",onClick:ce=>{ce.stopPropagation(),q("next")},disabled:!xe,children:""})]}),h.jsx("div",{className:"attendee-modal-overlay",onClick:nt,children:h.jsx("div",{className:`attendee-modal-content ${ye?`swipe-${ye}`:""}`,onClick:ce=>ce.stopPropagation(),children:re?h.jsxs("div",{className:"attendee-modal-loading",children:[h.jsx(Sf,{size:60}),h.jsx("p",{children:"Loading attendee details..."})]}):te?h.jsx("div",{className:"attendee-modal-error",children:h.jsx("p",{className:"attendee-modal-error-message",children:te})}):V&&Y[V]?h.jsx("div",{className:"attendee-modal-inner",children:(()=>{const ce=Y[V];return h.jsxs(h.Fragment,{children:[h.jsx("h2",{className:"attendee-modal-header",id:"attendee-modal-title",children:ce.name}),h.jsxs("div",{className:"attendee-modal-grid",children:[h.jsxs("div",{className:"attendee-modal-left",children:[h.jsx("div",{className:"attendee-modal-date",children:x4(ce.last_joined_date)}),h.jsxs("div",{className:"attendee-modal-profile-card",children:[h.jsx("div",{className:"attendee-modal-profile-img-wrapper",children:ce.image_data?h.jsx("img",{className:"attendee-modal-profile-img",src:ce.image_data,alt:ce.name,onError:me=>{me.target.src="/assets/fakeprofile.png"}}):h.jsx("img",{className:"attendee-modal-profile-img",src:"/assets/fakeprofile.png",alt:ce.name})}),h.jsx("div",{className:"attendee-modal-profile-footer",children:ce.name})]})]}),h.jsxs("div",{className:"attendee-modal-right",children:[h.jsxs("div",{className:"attendee-modal-stat",children:[h.jsx("span",{className:"attendee-modal-stat-label",children:"events attended"}),h.jsx("span",{className:"attendee-modal-stat-value",children:ce.lobbies_attended})]}),h.jsxs("div",{className:"attendee-modal-stat",children:[h.jsx("span",{className:"attendee-modal-stat-label",children:"real connections"}),h.jsxs("div",{className:"attendee-modal-stat-value-with-icons",children:[h.jsx("span",{className:"attendee-modal-stat-value",children:ce.rounds_paired}),h.jsx("div",{className:"attendee-modal-staggered-icons",children:[...Array(4)].map((me,Ye)=>h.jsx("img",{className:"attendee-modal-staggered-icon",src:"/assets/fakeprofile.png",alt:""},Ye))})]})]}),h.jsxs("div",{className:"attendee-modal-tags-section",children:[h.jsx("h3",{className:"attendee-modal-tags-label",children:"who I am:"}),h.jsx("div",{className:"attendee-modal-tags-container",children:ce.self_tags&&ce.self_tags.length>0?ce.self_tags.map((me,Ye)=>h.jsx(Af,{tag:me},`self-${Ye}-${me}`)):h.jsx("span",{className:"attendee-modal-empty-state",children:"No tags"})})]}),h.jsxs("div",{className:"attendee-modal-tags-section",children:[h.jsx("h3",{className:"attendee-modal-tags-label",children:"looking for:"}),h.jsx("div",{className:"attendee-modal-tags-container",children:ce.desiring_tags&&ce.desiring_tags.length>0?ce.desiring_tags.map((me,Ye)=>h.jsx(Af,{tag:me},`desiring-${Ye}-${me}`)):h.jsx("span",{className:"attendee-modal-empty-state",children:"No tags"})})]})]})]})]})})()}):null})})]})]})},w4=()=>{const{user:t,permissions:i,checkAuth:a}=N.useContext(Wn),u=Bn(),[m,x]=N.useState([]),[y,b]=N.useState(!0),[v,C]=N.useState(null);N.useEffect(()=>{i!==null&&i!=="admin"&&i!=="organizer"&&u("/organizer-signup")},[i,u]),N.useEffect(()=>{a()},[a]);const S=N.useCallback(async()=>{b(!0),C(null);try{const T=await Ct("/organizer_attendees");if(T.status===401){localStorage.removeItem("access_token"),u("/organizer-signup");return}if(T.status===403){C("Access denied. Organizer permissions required."),b(!1);return}if(!T.ok)throw new Error("Failed to load attendees");const _=await T.json();if(_.status==="success")x(_.attendees||[]);else throw new Error(_.error||"Failed to load attendees")}catch(T){console.error("Error fetching attendees:",T),T.message==="Failed to fetch"||T.message.includes("network")?C("Network error. Please check your connection and try again."):C(T.message||"An error occurred. Please try again.")}finally{b(!1)}},[u]);return N.useEffect(()=>{(i==="organizer"||i==="admin")&&S()},[i,S]),h.jsxs("div",{className:"organizer-dashboard",children:[h.jsxs("div",{className:"dashboard-header",children:[h.jsx("h1",{children:"Organizer Dashboard"}),h.jsx("button",{onClick:()=>u("/"),className:"dashboard-home-button",children:"Home"})]}),y?h.jsx("div",{className:"attendees-loading-container",children:h.jsx(Sf,{size:60})}):v?h.jsxs("div",{className:"attendees-error-container",children:[h.jsx("div",{className:"attendees-error-message",children:v}),h.jsx("button",{className:"attendees-retry-button",onClick:S,children:"Retry"})]}):m.length===0?h.jsx("div",{className:"attendees-empty-container",children:h.jsx("div",{className:"attendees-empty-message",children:"No attendees yet"})}):h.jsx(y4,{attendees:m})]})},v4=5e3,C4=()=>{const{checkAuth:t,permissions:i,user:a}=N.useContext(Wn),u=Bn(),[m,x]=N.useState([]),[y,b]=N.useState(!0),[v,C]=N.useState(null),[S,T]=N.useState(!1);return N.useEffect(()=>{t()},[t]),N.useEffect(()=>{a==="topaz"&&i==="admin"?T(!0):i!==null&&a!==null&&u("/")},[i,a,u]),N.useEffect(()=>{if(!S)return;let _=!0,M,L=!0;const F=async()=>{L&&b(!0),C(null);try{const j=await Ct("/admin_all_lobbies");if(!j.ok)throw new Error("Failed to fetch lobbies");const z=await j.json();if(z.status!=="success"||!Array.isArray(z.lobbies))throw new Error("Invalid response format");if(!_)return;x(z.lobbies),console.log("Received lobbies data:",z.lobbies)}catch(j){_&&C(j.message||"Error fetching lobbies")}finally{_&&L&&b(!1),L=!1,M=setTimeout(F,v4)}};return F(),()=>{_=!1,M&&clearTimeout(M)}},[S]),y?h.jsx("div",{className:"master-lobby-container",children:h.jsxs("div",{className:"loading-state",children:[h.jsx("div",{className:"loading-spinner"}),h.jsx("p",{children:"Loading lobbies..."})]})}):v&&m.length===0?h.jsx("div",{className:"master-lobby-container",children:h.jsx("div",{className:"error-state",children:h.jsx("p",{children:v})})}):m.length===0?h.jsx("div",{className:"master-lobby-container",children:h.jsx("div",{className:"empty-state",children:h.jsx("p",{children:"No active lobbies found"})})}):h.jsxs("div",{className:"master-lobby-container",children:[h.jsx("button",{className:"back-button",onClick:()=>u(-1),children:"Back"}),v&&h.jsxs("div",{className:"error-banner",style:{backgroundColor:"#f8d7da",color:"#721c24",padding:"0.75rem",marginBottom:"1rem",borderRadius:"0.25rem",border:"1px solid #f5c6cb"},children:[v," (showing last known data)"]}),h.jsx("div",{className:"master-lobby-grid",children:m.map(_=>h.jsx("div",{className:"lobby-tile",children:h.jsxs("div",{className:"lobby-tile-content",children:[h.jsx("h3",{className:"lobby-code",children:_.code}),h.jsxs("div",{className:"lobby-stats",children:[h.jsxs("span",{className:"player-count",children:[_.player_count," players"]}),h.jsx("span",{className:"lobby-state",children:_.lobby_state})]}),h.jsxs("div",{style:{fontSize:"0.7rem",color:"#666",marginTop:"0.5rem"},children:["Debug: player_count=",_.player_count,", lobby_state=",_.lobby_state]})]})},_.code))})]})};var Rx={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},lp=Ht.createContext&&Ht.createContext(Rx),b4=["attr","size","title"];function E4(t,i){if(t==null)return{};var a=S4(t,i),u,m;if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(t);for(m=0;m<x.length;m++)u=x[m],!(i.indexOf(u)>=0)&&Object.prototype.propertyIsEnumerable.call(t,u)&&(a[u]=t[u])}return a}function S4(t,i){if(t==null)return{};var a={};for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){if(i.indexOf(u)>=0)continue;a[u]=t[u]}return a}function jc(){return jc=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},jc.apply(this,arguments)}function cp(t,i){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),a.push.apply(a,u)}return a}function Bc(t){for(var i=1;i<arguments.length;i++){var a=arguments[i]!=null?arguments[i]:{};i%2?cp(Object(a),!0).forEach(function(u){A4(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):cp(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function A4(t,i,a){return i=N4(i),i in t?Object.defineProperty(t,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[i]=a,t}function N4(t){var i=T4(t,"string");return typeof i=="symbol"?i:i+""}function T4(t,i){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var u=a.call(t,i);if(typeof u!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function kx(t){return t&&t.map((i,a)=>Ht.createElement(i.tag,Bc({key:a},i.attr),kx(i.child)))}function uo(t){return i=>Ht.createElement(I4,jc({attr:Bc({},t.attr)},i),kx(t.child))}function I4(t){var i=a=>{var{attr:u,size:m,title:x}=t,y=E4(t,b4),b=m||a.size||"1em",v;return a.className&&(v=a.className),t.className&&(v=(v?v+" ":"")+t.className),Ht.createElement("svg",jc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,u,y,{className:v,style:Bc(Bc({color:t.color||a.color},a.style),t.style),height:b,width:b,xmlns:"http://www.w3.org/2000/svg"}),x&&Ht.createElement("title",null,x),t.children)};return lp!==void 0?Ht.createElement(lp.Consumer,null,a=>i(a)):i(Rx)}function _4(t){return uo({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"},child:[]}]})(t)}function R4(t){return uo({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(t)}function k4(t){return uo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M510.846 392.673c-5.211 12.157-27.239 21.089-67.36 27.318-2.064 2.786-3.775 14.686-6.507 23.956-1.625 5.566-5.623 8.869-12.128 8.869l-.297-.005c-9.395 0-19.203-4.323-38.852-4.323-26.521 0-35.662 6.043-56.254 20.588-21.832 15.438-42.771 28.764-74.027 27.399-31.646 2.334-58.025-16.908-72.871-27.404-20.714-14.643-29.828-20.582-56.241-20.582-18.864 0-30.736 4.72-38.852 4.72-8.073 0-11.213-4.922-12.422-9.04-2.703-9.189-4.404-21.263-6.523-24.13-20.679-3.209-67.31-11.344-68.498-32.15a10.627 10.627 0 0 1 8.877-11.069c69.583-11.455 100.924-82.901 102.227-85.934.074-.176.155-.344.237-.515 3.713-7.537 4.544-13.849 2.463-18.753-5.05-11.896-26.872-16.164-36.053-19.796-23.715-9.366-27.015-20.128-25.612-27.504 2.437-12.836 21.725-20.735 33.002-15.453 8.919 4.181 16.843 6.297 23.547 6.297 5.022 0 8.212-1.204 9.96-2.171-2.043-35.936-7.101-87.29 5.687-115.969C158.122 21.304 229.705 15.42 250.826 15.42c.944 0 9.141-.089 10.11-.089 52.148 0 102.254 26.78 126.723 81.643 12.777 28.65 7.749 79.792 5.695 116.009 1.582.872 4.357 1.942 8.599 2.139 6.397-.286 13.815-2.389 22.069-6.257 6.085-2.846 14.406-2.461 20.48.058l.029.01c9.476 3.385 15.439 10.215 15.589 17.87.184 9.747-8.522 18.165-25.878 25.018-2.118.835-4.694 1.655-7.434 2.525-9.797 3.106-24.6 7.805-28.616 17.271-2.079 4.904-1.256 11.211 2.46 18.748.087.168.166.342.239.515 1.301 3.03 32.615 74.46 102.23 85.934 6.427 1.058 11.163 7.877 7.725 15.859z"},child:[]}]})(t)}function P4(t){return uo({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448,209.91a210.06,210.06,0,0,1-122.77-39.25V349.38A162.55,162.55,0,1,1,185,188.31V278.2a74.62,74.62,0,1,0,52.23,71.18V0l88,0a121.18,121.18,0,0,0,1.86,22.17h0A122.18,122.18,0,0,0,381,102.39a121.43,121.43,0,0,0,67,20.14Z"},child:[]}]})(t)}function M4(t){return uo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(t)}function up(t){return uo({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"},child:[]}]})(t)}function O4(t){return uo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(t)}const dp=({size:t=60,className:i=""})=>h.jsx("div",{className:`attendees-spinner ${i}`,style:{width:t,height:t},children:h.jsx("div",{className:"attendees-spinner-inner"})}),D4=t=>t?`data:image/jpeg;base64,${t}`:"/assets/fakeprofile.png",L4=["instagram","facebook","email","phone","website","tiktok","snapchat"],j4=t=>({instagram:{label:"Instagram",Icon:R4,color:"#E4405F",displayPrefix:"@"},facebook:{label:"Facebook",Icon:_4,color:"#1877F2",displayPrefix:"@"},email:{label:"Email",Icon:M4,color:"#4b7ef0",displayPrefix:""},phone:{label:"Phone",Icon:O4,color:"#25D366",displayPrefix:""},website:{label:"Website",Icon:up,color:"#4b7ef0",displayPrefix:""},tiktok:{label:"TikTok",Icon:P4,color:"#000000",displayPrefix:"@"},snapchat:{label:"Snapchat",Icon:k4,color:"#FFFC00",displayPrefix:"@"}})[t]||{label:t,Icon:up,color:"#4b7ef0",displayPrefix:""},B4=(t,i)=>{if(!i)return null;switch(t){case"instagram":return`https://instagram.com/${i}`;case"facebook":return`https://facebook.com/${i}`;case"tiktok":return`https://tiktok.com/@${i}`;case"snapchat":return`https://snapchat.com/add/${i}`;case"email":return`mailto:${i}`;case"phone":return`tel:${i.replace(/[^\d+]/g,"")}`;case"website":return i;default:return i}},F4=t=>!t||typeof t!="object"?!1:Object.values(t).some(i=>i&&typeof i=="string"&&i.trim()),Xd=t=>[...t].sort((i,a)=>{var b,v,C,S;const u=i.lobby_date?new Date(i.lobby_date).getTime():0,m=a.lobby_date?new Date(a.lobby_date).getTime():0;if(u!==m)return m-u;const x=(((b=i.paired_with)==null?void 0:b.name)||((v=i.paired_with)==null?void 0:v.username)||"").toLowerCase(),y=(((C=a.paired_with)==null?void 0:C.name)||((S=a.paired_with)==null?void 0:S.username)||"").toLowerCase();return x<y?-1:x>y?1:0}),V4=(t,i)=>{var y;if(!t||t.length===0)return{hasNew:i.length>0,hasUpdated:!1};const a=new Set(t.map(b=>{var v;return(v=b.paired_with)==null?void 0:v.username})),u=i.some(b=>{var v;return((v=b.paired_with)==null?void 0:v.username)&&!a.has(b.paired_with.username)});let m=!1;const x=new Map(t.map(b=>{var v;return[(v=b.paired_with)==null?void 0:v.username,b]}));for(const b of i){const v=(y=b.paired_with)==null?void 0:y.username;if(!v)continue;const C=x.get(v);if(C&&JSON.stringify(C)!==JSON.stringify(b)){m=!0;break}}return{hasNew:u,hasUpdated:m}},U4=(t,i,a)=>{var x;if(!t||t.length===0)return i;const u=[...t],m=[];for(const y of i){const b=(x=y.paired_with)==null?void 0:x.username;if(!b)continue;const v=u.findIndex(C=>{var S;return((S=C.paired_with)==null?void 0:S.username)===b});v>=0?u[v]=y:m.push(y)}return[...m,...u]},Nc=(t,i)=>{var m;const a=(m=t.paired_with)==null?void 0:m.username;if(a)return a;const u=`${t.lobby_date||""}-${t.interaction_date||""}`;return u!=="-"?u:`interaction-${i}`},yc=(t,i)=>t.find((a,u)=>Nc(a,u)===i)||null,fp=async(t,i,a,u)=>{try{const m=await Ct("/update-paired-interaction",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({lobby_id:t,paired_with_username:i,...a}),signal:u});if(!m.ok){const y=await m.text();throw new Error(y||`HTTP ${m.status}`)}return{success:!0,data:await m.json()}}catch(m){if(m.name==="AbortError")throw m;return{success:!1,error:m.message}}},z4=({rating:t,onRatingChange:i,interactionKey:a})=>{const u=t||0,m=x=>{i(x)};return h.jsxs("div",{className:"star-rating-container",children:[h.jsx("div",{className:"star-rating-question",children:"How was the chat?"}),h.jsx("div",{className:"star-rating-stars",children:[1,2,3,4,5].map(x=>h.jsx("button",{type:"button",className:`star-button ${x<=u?"star-filled":"star-empty"}`,onClick:()=>m(x),"aria-label":`Rate ${x} star${x!==1?"s":""}`,children:""},x))}),h.jsx("div",{className:"star-rating-disclaimer",children:"(Don't worry, your response is hidden)"})]})},W4=({value:t,onChange:i,interactionKey:a})=>{const u=m=>{i(m)};return h.jsxs("div",{className:"share-contact-container",children:[h.jsx("div",{className:"share-contact-question",children:"Share Your Contact?"}),h.jsxs("div",{className:"share-contact-buttons",children:[h.jsx("button",{type:"button",className:`share-contact-button ${t===!1?"selected":""}`,onClick:()=>u(!1),children:"No"}),h.jsx("button",{type:"button",className:`share-contact-button ${t===!0?"selected":""}`,onClick:()=>u(!0),children:"Yes"})]})]})},H4=()=>{const t=Bn(),{checkAuth:i,user:a,isAuthLoading:u}=N.useContext(Wn),[m,x]=N.useState([]),[y,b]=N.useState(!0),[v,C]=N.useState(!1),[S,T]=N.useState(!0),[_,M]=N.useState(0),[L,F]=N.useState(null),[j,z]=N.useState(!1),[V,B]=N.useState(new Map),[Y,$]=N.useState(new Map),re=N.useRef(!1),G=N.useRef(!0),te=N.useRef(null),J=N.useRef(null),ye=N.useRef([]),_e=N.useRef(!1),Ne=N.useRef(new Map),Se=N.useRef(new Map),Ee=N.useRef(new Map),Z=N.useRef(new Map),Le=N.useRef(new Map),ve=N.useRef(new Map),ge=N.useCallback(X=>{const we=Ne.current.get(X);we&&(clearTimeout(we),Ne.current.delete(X));const be=Se.current.get(X);be&&(be.abort(),Se.current.delete(X))},[]),De=N.useCallback(async(X,we,be)=>{if(!re.current){re.current=!0;try{const de=await Ct(`/paired-player-history?offset=${X}&limit=30`);if(!de.ok){if(de.status===401){G.current&&t("/");return}const xe=await de.text();throw new Error(`HTTP ${de.status}: ${xe}`)}const q=await de.json();if(!G.current)return;if(q.status!=="success"||!Array.isArray(q.interactions))throw new Error("Invalid response format");const Re=Xd(q.interactions);if(be){const xe=ye.current,Ae=V4(xe,Re),nt=U4(xe,Re,!0);console.log("[PairedHistory] Poll update:",{count:Re.length,hasNew:Ae.hasNew,hasUpdated:Ae.hasUpdated});const Xe=Xd(nt);x(Xe),ye.current=Xe,T(q.has_more),M(q.next_offset||0),(Ae.hasNew||Ae.hasUpdated)&&z(!0)}else we?(console.log("[PairedHistory] Initial load:",{count:Re.length}),x(Re),ye.current=Re,T(q.has_more),M(q.next_offset||0),b(!1)):(x(xe=>{const Ae=[...xe,...Re],nt=Xd(Ae);return ye.current=nt,nt}),T(q.has_more),M(q.next_offset||0),C(!1));F(null)}catch(de){if(console.error("[PairedHistory] Error:",{message:de.message,type:be?"polling":we?"initial":"infinite-scroll"}),!G.current)return;F(de.message),_n.error(`Error: ${de.message}`),we?b(!1):be||C(!1)}finally{G.current&&(re.current=!1)}}},[t]);N.useEffect(()=>{if(G.current=!0,!u){if(!a){t("/");return}if(!_e.current)return _e.current=!0,De(0,!0,!1),()=>{G.current=!1}}},[u,a,t,De]),N.useEffect(()=>{const X=()=>{document.hidden||re.current||!G.current||De(0,!1,!0)};if(document.hidden)return;const we=setInterval(X,5e3),be=()=>{};return document.addEventListener("visibilitychange",be),()=>{clearInterval(we),document.removeEventListener("visibilitychange",be)}},[De]),N.useEffect(()=>(j&&(te.current&&clearTimeout(te.current),te.current=setTimeout(()=>{G.current&&z(!1)},4e3)),()=>{te.current&&clearTimeout(te.current)}),[j]),N.useEffect(()=>{if(!S||v||re.current)return;const X=new IntersectionObserver(we=>{we[0].isIntersecting&&S&&!v&&!re.current&&G.current&&(C(!0),De(_,!1,!1))},{root:null,rootMargin:"300px",threshold:.1});return J.current&&X.observe(J.current),()=>{X.disconnect()}},[S,v,_,De]),N.useEffect(()=>{ye.current=m},[m]),N.useEffect(()=>{Le.current=V},[V]),N.useEffect(()=>{ve.current=Y},[Y]),N.useEffect(()=>{m.length!==0&&(B(X=>{const we=new Map(X);let be=!1;return m.forEach((de,q)=>{const Re=Nc(de,q);if(!we.has(Re)){const xe=de.partner_star_rating;xe!==null&&xe>=1&&xe<=5&&(we.set(Re,xe),be=!0)}}),be?we:X}),$(X=>{const we=new Map(X);let be=!1;return m.forEach((de,q)=>{const Re=Nc(de,q);if(!we.has(Re)){const xe=de.user_show_contact;xe!==null&&typeof xe=="boolean"&&(we.set(Re,xe),be=!0)}}),be?we:X}))},[m]);const Ce=N.useCallback((X,we)=>{var Re;const be=yc(ye.current,X);if(!(be!=null&&be.lobby_id)||!((Re=be.paired_with)!=null&&Re.username)){_n.error("Unable to save: interaction not found");return}let de=Ee.current.get(X);if(de===void 0){const xe=Le.current.get(X),Ae=be.partner_star_rating;de=xe??(Ae!==null&&Ae>=1&&Ae<=5?Ae:null),Ee.current.set(X,de)}ge(X),B(xe=>{const Ae=new Map(xe);return Ae.set(X,we),Le.current=Ae,Ae});const q=setTimeout(async()=>{var ce;if(!G.current)return;const xe=yc(ye.current,X);if(!(xe!=null&&xe.lobby_id)||!((ce=xe.paired_with)!=null&&ce.username)){if(!G.current)return;B(me=>{const Ye=new Map(me);return de!=null?Ye.set(X,de):Ye.delete(X),Le.current=Ye,Ye}),Ee.current.delete(X),_n.error("Unable to save: interaction not found");return}const Ae=new AbortController;Se.current.set(X,Ae);const nt=xe.paired_with.username,Xe=xe.lobby_id;console.log("[PairedHistory] Updating rating:",{partner_username:nt,lobby_id:Xe,rating:we,previous_rating:de});try{const me=await fp(Xe,nt,{partner_star_rating:we},Ae.signal);if(!G.current)return;Se.current.delete(X),me.success?(Ee.current.delete(X),console.log("[PairedHistory] Rating update successful:",{partner_username:nt,lobby_id:Xe,rating:we,response:me.data}),_n.success("Saved",{duration:1e3,style:{background:"#144dff",color:"white",borderRadius:"8px",padding:"12px 20px",fontSize:"0.9rem",fontWeight:"500"}})):(console.error("[PairedHistory] Rating update failed:",{partner_username:nt,lobby_id:Xe,rating:we,error:me.error}),B(Ye=>{const $e=new Map(Ye);return de!=null?$e.set(X,de):$e.delete(X),Le.current=$e,$e}),Ee.current.delete(X),_n.error(me.error||"Failed to save. Please try again."))}catch(me){if(!G.current)return;if(Se.current.delete(X),me.name==="AbortError"){console.log("[PairedHistory] Rating update aborted:",{partner_username:nt,lobby_id:Xe});return}console.error("[PairedHistory] Rating update error:",{partner_username:nt,lobby_id:Xe,rating:we,error:me.message}),B(Ye=>{const $e=new Map(Ye);return de!=null?$e.set(X,de):$e.delete(X),Le.current=$e,$e}),Ee.current.delete(X),_n.error(me.message||"Failed to save. Please try again.")}},500);Ne.current.set(X,q)},[ge]),K=N.useCallback((X,we)=>{var Re;const be=yc(ye.current,X);if(!(be!=null&&be.lobby_id)||!((Re=be.paired_with)!=null&&Re.username)){_n.error("Unable to save: interaction not found");return}let de=Z.current.get(X);if(de===void 0){const xe=ve.current.get(X),Ae=be.user_show_contact;de=xe??(Ae!==null&&typeof Ae=="boolean"?Ae:null),Z.current.set(X,de)}ge(X),$(xe=>{const Ae=new Map(xe);return Ae.set(X,we),ve.current=Ae,Ae});const q=setTimeout(async()=>{var ce;if(!G.current)return;const xe=yc(ye.current,X);if(!(xe!=null&&xe.lobby_id)||!((ce=xe.paired_with)!=null&&ce.username)){if(!G.current)return;$(me=>{const Ye=new Map(me);return de!=null?Ye.set(X,de):Ye.delete(X),ve.current=Ye,Ye}),Z.current.delete(X),_n.error("Unable to save: interaction not found");return}const Ae=new AbortController;Se.current.set(X,Ae);const nt=xe.paired_with.username,Xe=xe.lobby_id;console.log("[PairedHistory] Updating share contact:",{partner_username:nt,lobby_id:Xe,user_show_contact:we,previous_value:de});try{const me=await fp(Xe,nt,{user_show_contact:we},Ae.signal);if(!G.current)return;Se.current.delete(X),me.success?(Z.current.delete(X),console.log("[PairedHistory] Share contact update successful:",{partner_username:nt,lobby_id:Xe,user_show_contact:we,response:me.data}),_n.success("Saved",{duration:1e3,style:{background:"#144dff",color:"white",borderRadius:"8px",padding:"12px 20px",fontSize:"0.9rem",fontWeight:"500"}})):(console.error("[PairedHistory] Share contact update failed:",{partner_username:nt,lobby_id:Xe,user_show_contact:we,error:me.error}),$(Ye=>{const $e=new Map(Ye);return de!=null?$e.set(X,de):$e.delete(X),ve.current=$e,$e}),Z.current.delete(X),_n.error(me.error||"Failed to save. Please try again."))}catch(me){if(!G.current)return;if(Se.current.delete(X),me.name==="AbortError"){console.log("[PairedHistory] Share contact update aborted:",{partner_username:nt,lobby_id:Xe});return}console.error("[PairedHistory] Share contact update error:",{partner_username:nt,lobby_id:Xe,user_show_contact:we,error:me.message}),$(Ye=>{const $e=new Map(Ye);return de!=null?$e.set(X,de):$e.delete(X),ve.current=$e,$e}),Z.current.delete(X),_n.error(me.message||"Failed to save. Please try again.")}},300);Ne.current.set(X,q)},[ge]);return N.useEffect(()=>()=>{G.current=!1,te.current&&clearTimeout(te.current),Se.current.forEach(X=>{X.abort()}),Ne.current.forEach(X=>{clearTimeout(X)}),Ne.current.clear(),Se.current.clear(),Ee.current.clear(),Z.current.clear()},[]),u?h.jsx(Yo,{fullScreen:!0}):h.jsxs("div",{className:"paired-player-history-container",children:[h.jsx(Xa,{position:"top-center"}),h.jsx("button",{onClick:()=>t("/"),className:"homescreen-button",children:"Home"}),h.jsx("button",{onClick:()=>t("/post-event-auth"),className:"update-profile-button",children:"Update Profile"}),j&&h.jsx("div",{className:"new-info-indicator",children:"New Notifications"}),h.jsxs("div",{className:"paired-player-history-content",children:[h.jsx("h1",{className:"paired-player-history-title",children:"View Your Matches"}),y&&h.jsx("div",{className:"loading-grid",children:Array.from({length:30}).map((X,we)=>h.jsx(dp,{size:60},we))}),!y&&m.length===0&&h.jsx("div",{className:"empty-state",children:h.jsx("p",{children:"No Past History Available"})}),!y&&m.length>0&&h.jsxs("div",{className:"interactions-list",children:[m.map((X,we)=>{const be=X.paired_with||{},de=D4(be.image_data),q=Nc(X,we),Re=V.get(q)??(X.partner_star_rating!==null&&X.partner_star_rating>=1&&X.partner_star_rating<=5?X.partner_star_rating:null),xe=Y.has(q)?Y.get(q):X.user_show_contact!==null&&typeof X.user_show_contact=="boolean"?X.user_show_contact:null,Ae=X.partner_show_contact===!0,nt=Ae&&F4(be.social_links),Xe=Ae&&be.contact_url&&!nt;return h.jsxs("div",{className:"interaction-card",children:[h.jsxs("div",{className:"interaction-card-main",children:[h.jsxs("div",{className:"interaction-card-left",children:[h.jsx("div",{className:"interaction-card-image",children:h.jsx("img",{src:de,alt:be.name||"Partner",onError:ce=>{ce.target.src="/assets/fakeprofile.png"}})}),h.jsx("div",{className:"interaction-card-name",children:be.name||be.username||"Unknown"})]}),h.jsxs("div",{className:"interaction-card-right",children:[h.jsx(z4,{rating:Re,onRatingChange:ce=>Ce(q,ce),interactionKey:q}),h.jsx(W4,{value:xe,onChange:ce=>K(q,ce),interactionKey:q})]})]}),(nt||Xe)&&h.jsxs("div",{className:"contact-info-section",children:[h.jsx("div",{className:"social-links-header",children:be.name?`${be.name}'s contact info`:"Contact info"}),nt&&h.jsx("div",{className:"social-links-display",children:L4.map(ce=>{var Bt;const me=(Bt=be.social_links)==null?void 0:Bt[ce];if(!me||!me.trim())return null;const{label:Ye,Icon:$e,color:yt,displayPrefix:dt}=j4(ce),Ke=B4(ce,me),Qe=dt+me;return h.jsxs("a",{href:Ke,target:"_blank",rel:"noopener noreferrer",className:"social-link-item",title:Ye,children:[h.jsx("span",{className:"social-link-icon",children:h.jsx($e,{size:16,color:yt})}),h.jsx("span",{className:"social-link-value",children:Qe})]},ce)})}),Xe&&h.jsxs("div",{className:"interaction-card-contact-row",children:[h.jsx("img",{src:"/assets/contact_url_asset.png",alt:"Contact",className:"contact-url-icon"}),h.jsx("a",{href:be.contact_url,target:"_blank",rel:"noopener noreferrer",className:"contact-url-link",title:be.contact_url,children:be.contact_url})]})]})]},q)}),S&&h.jsx("div",{ref:J,"data-sentinel":"true",className:"infinite-scroll-sentinel",children:v&&h.jsx(dp,{size:40})}),!S&&h.jsx("div",{className:"no-more-interactions",children:"No more interactions"})]})]})]})},G4=!0,X4=()=>{const t=Bn(),{checkAuth:i,user:a,isAuthLoading:u}=N.useContext(Wn),[m,x]=N.useState(""),[y,b]=N.useState(""),[v,C]=N.useState(""),[S,T]=N.useState(""),[_,M]=N.useState(""),[L,F]=N.useState(""),[j,z]=N.useState(""),[V,B]=N.useState(""),[Y,$]=N.useState(""),[re,G]=N.useState(!1),[te,J]=N.useState(!0),[ye,_e]=N.useState(!1),[Ne,Se]=N.useState(""),[Ee,Z]=N.useState(!1),[Le,ve]=N.useState(!1),[ge,De]=N.useState(!1),[Ce,K]=N.useState(!1),[X,we]=N.useState(!1),[be,de]=N.useState(!1),[q,Re]=N.useState(!1),[xe,Ae]=N.useState(!1),[nt,Xe]=N.useState(""),ce=N.useRef(null);N.useEffect(()=>{const ht=new URLSearchParams(window.location.search).get("error");if(ht){const _t={claim_expired:"Your verification link has expired. Please try again.",claim_invalid:"Invalid verification link. Please try again.",claim_failed:"Account linking failed. Please try again.",claim_blocked:"This account is an organizer account and cannot be linked this way. Please contact support."}[ht]||"An error occurred. Please try again.";Se(_t),window.history.replaceState({},"","/post-event-auth")}},[]),N.useEffect(()=>{if(u)return;if(!a){t("/login");return}(async()=>{var ht,et;try{const _t=await Ct("/load_user");if(_t.status===401){t("/login");return}if(!_t.ok)throw new Error("Failed to load user data");const en=await _t.json();x(((ht=en.profile)==null?void 0:ht.name)||""),b(en.email||"");const Yt=((et=en.profile)==null?void 0:et.social_links)||{};C(Yt.instagram||""),T(Yt.facebook||""),M(Yt.email||""),F(Yt.phone||""),z(Yt.website||""),B(Yt.tiktok||""),$(Yt.snapchat||""),G(en.email_verified===!0)}catch(_t){console.error("Error fetching user data:",_t),Se("Failed to load user data. Please try again.")}finally{J(!1)}})()},[u,a,t]),N.useEffect(()=>{if(X){const We=setTimeout(()=>{we(!1)},4e3);return()=>clearTimeout(We)}},[X]);const me=()=>{!re&&!Le&&(ve(!0),we(!0))},Ye=We=>{C(We.target.value.replace(/@/g,""))},$e=We=>{T(We.target.value.replace(/@/g,""))},yt=We=>{B(We.target.value.replace(/@/g,""))},dt=We=>{$(We.target.value.replace(/@/g,""))},Ke=()=>{const We={};if(v.trim()&&(We.instagram=v.trim()),S.trim()&&(We.facebook=S.trim()),_.trim()&&(We.email=_.trim()),L.trim()&&(We.phone=L.trim()),j.trim()){let ht=j.trim();ht&&!ht.match(/^https?:\/\//i)&&(ht="https://"+ht),We.website=ht}return V.trim()&&(We.tiktok=V.trim()),Y.trim()&&(We.snapchat=Y.trim()),Object.keys(We).length>0?We:null},Qe=()=>!!(v.trim()||S.trim()||_.trim()||L.trim()||j.trim()||V.trim()||Y.trim()),Bt=async()=>{var We;_e(!0),Se("");try{const ht={name:m||"",social_links:Ke()};re||(ht.email=y||"");const et=await Ct("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ht)});if(et.status===401){t("/login");return}if(!et.ok){const _t=await et.json();throw new Error(_t.detail||_t.message||"Failed to update profile")}if(G4&&!re)try{const en=await(await Ct("/auth/send-magic-link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:y.trim()})})).json();en.success?(Z(!0),_n.success("Check your email for the magic link!",{duration:4e3})):(console.error("Magic link failed:",en.error),_n.success("Profile saved! (Email verification unavailable)",{duration:3e3}),await i(),setTimeout(()=>t("/paired-player-history"),1500))}catch(_t){console.error("Magic link request error:",_t),_n.success("Profile saved!",{duration:2e3}),await i(),setTimeout(()=>t("/paired-player-history"),1500)}else _n.success("Profile saved! Redirecting to your matches...",{duration:2e3}),await i(),setTimeout(()=>t("/paired-player-history"),1500)}catch(ht){console.error("Error updating profile:",ht),(We=ht.message)!=null&&We.toLowerCase().includes("already associated with another account")?(de(!0),Se("")):Se(ht.message||"An error occurred. Please try again.")}finally{_e(!1)}},ze=async()=>{Ae(!0),Xe("");try{const ht=await(await Ct("/auth/claim-existing-account",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:y.trim()})})).json();ht.success?(de(!1),Re(!0),_n.success("Verification email sent!",{duration:4e3})):Xe(ht.error||"Failed to send verification email. Please try again.")}catch(We){console.error("Error sending claim email:",We),Xe("Network error. Please try again.")}finally{Ae(!1)}},mn=()=>{de(!1),Xe(""),setTimeout(()=>{var We;(We=ce.current)==null||We.focus()},100)},Hn=()=>{K(!1),Bt()},Ve=()=>{K(!1),setTimeout(()=>{var We;(We=ce.current)==null||We.focus()},100)},kt=async We=>{if(We.preventDefault(),Se(""),!y||!y.trim()){Se("Email is required to access your matches."),window.scrollTo({top:0,behavior:"smooth"});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(y.trim())){Se("Please enter a valid email address."),window.scrollTo({top:0,behavior:"smooth"});return}if(!Qe()){Se("Please provide at least one way to contact you."),window.scrollTo({top:0,behavior:"smooth"});return}if(!re&&!ge){De(!0),K(!0);return}Bt()};return u||te?h.jsx(Yo,{fullScreen:!0}):Ee?h.jsxs("div",{className:"post-event-auth-container",children:[h.jsx(Xa,{position:"top-center"}),h.jsxs("div",{className:"step-form-container",style:{textAlign:"center",padding:"40px 28px"},children:[h.jsx("div",{style:{fontSize:"56px",marginBottom:"24px"},children:""}),h.jsx("h2",{style:{color:"#1a1a2e",marginBottom:"12px",fontSize:"1.4rem",fontWeight:"700",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:"Check Your Email!"}),h.jsx("p",{style:{color:"#1a1a2e",marginBottom:"20px",lineHeight:"1.6",fontSize:"0.95rem",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:"We sent a magic link to"}),h.jsx("div",{style:{background:"#f9fafb",border:"1.5px solid #e5e7eb",borderRadius:"12px",padding:"14px 18px",marginBottom:"20px",fontWeight:"600",color:"#1a1a2e",wordBreak:"break-all",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:y}),h.jsx("p",{style:{color:"#1a1a2e",marginBottom:"24px",lineHeight:"1.6",fontSize:"0.95rem",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:"Click the link in your email to access your matches."}),h.jsxs("p",{style:{color:"#6b7280",fontSize:"0.85rem",marginBottom:"28px",lineHeight:"1.5",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:["The link expires in 15 minutes.",h.jsx("br",{}),"Don't see it? Check your spam folder."]}),h.jsx("button",{onClick:()=>Z(!1),className:"primary-button",children:" Back to Form"})]})]}):q?h.jsxs("div",{className:"post-event-auth-container",children:[h.jsx(Xa,{position:"top-center"}),h.jsxs("div",{className:"step-form-container",style:{textAlign:"center",padding:"40px 28px"},children:[h.jsx("div",{style:{fontSize:"56px",marginBottom:"24px"},children:""}),h.jsx("h2",{style:{color:"#1a1a2e",marginBottom:"12px",fontSize:"1.4rem",fontWeight:"700",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:"Check Your Email!"}),h.jsx("p",{style:{color:"#1a1a2e",marginBottom:"20px",lineHeight:"1.6",fontSize:"0.95rem",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:"We sent a verification link to"}),h.jsx("div",{style:{background:"#f9fafb",border:"1.5px solid #e5e7eb",borderRadius:"12px",padding:"14px 18px",marginBottom:"20px",fontWeight:"600",color:"#1a1a2e",wordBreak:"break-all",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:y}),h.jsx("p",{style:{color:"#1a1a2e",marginBottom:"24px",lineHeight:"1.6",fontSize:"0.95rem",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:"Click the link to link your matches to your existing account."}),h.jsxs("p",{style:{color:"#6b7280",fontSize:"0.85rem",marginBottom:"28px",lineHeight:"1.5",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:["The link expires in 24 hours.",h.jsx("br",{}),"Don't see it? Check your spam folder."]}),h.jsx("button",{onClick:()=>Re(!1),className:"primary-button",children:" Back to Form"})]})]}):h.jsxs("div",{className:"post-event-auth-container",children:[h.jsx(Xa,{position:"top-center",toastOptions:{style:{background:"#1a1a2e",color:"white",borderRadius:"12px",padding:"12px 20px",fontSize:"0.9rem",fontWeight:"500",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},success:{iconTheme:{primary:"#10b981",secondary:"white"}},error:{iconTheme:{primary:"#ef4444",secondary:"white"}}}}),h.jsx("button",{onClick:()=>t("/"),className:"homescreen-button",children:"Home"}),h.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:"8px",marginBottom:"0"},children:h.jsx("img",{src:"/assets/reuneo_test_11.png",alt:"Reuneo Logo",style:{maxWidth:"100px",height:"auto",objectFit:"contain"}})}),h.jsx("h3",{className:"post-event-auth-header",style:{marginTop:"12px"},children:"Access Your Matches"}),h.jsx("div",{className:"step-form-container",children:h.jsxs("form",{onSubmit:kt,children:[Ne&&h.jsx("div",{className:"error-message",style:{marginBottom:"20px"},children:Ne}),h.jsxs("div",{style:{marginTop:"0"},children:[h.jsx("label",{className:"step-label",children:"Name"}),h.jsx("input",{type:"text",value:m,onChange:We=>x(We.target.value),placeholder:"Enter your name",className:"step-input"})]}),h.jsxs("div",{style:{marginTop:"20px",position:"relative"},children:[h.jsxs("label",{className:"step-label",children:["Email ",h.jsx("span",{style:{color:"#ef4444"},children:"*"}),re&&h.jsx("span",{style:{color:"#10b981",fontSize:"0.75rem",marginLeft:"8px",fontWeight:"600",background:"rgba(16, 185, 129, 0.1)",padding:"2px 8px",borderRadius:"6px"},children:" Verified"})]}),X&&h.jsxs("div",{className:"email-warning-toast",children:[h.jsx("span",{className:"email-warning-icon",children:""}),h.jsx("span",{className:"email-warning-text",children:"Make sure the email is correct"})]}),h.jsx("input",{ref:ce,type:"email",value:y,onChange:We=>b(We.target.value),onFocus:me,placeholder:"Enter your email",className:"step-input",required:!0,disabled:re,style:re?{backgroundColor:"#f3f4f6",color:"#9ca3af",cursor:"not-allowed",borderColor:"#e5e7eb"}:{}})]}),h.jsxs("div",{className:"social-links-section",children:[h.jsxs("div",{className:"social-links-header",children:[h.jsx("span",{className:"social-links-title",children:"Share Your Contact Info"}),h.jsx("span",{className:"social-links-subtitle",children:"(At least one required)"})]}),h.jsxs("div",{className:"social-link-field",children:[h.jsx("label",{className:"step-label",children:"Instagram"}),h.jsx("input",{type:"text",value:v,onChange:Ye,placeholder:"@username",className:"step-input"})]}),h.jsxs("div",{className:"social-link-field",children:[h.jsx("label",{className:"step-label",children:"Facebook"}),h.jsx("input",{type:"text",value:S,onChange:$e,placeholder:"@username",className:"step-input"})]}),h.jsxs("div",{className:"social-link-field",children:[h.jsx("label",{className:"step-label",children:"Personal Email"}),h.jsx("input",{type:"email",value:_,onChange:We=>M(We.target.value),placeholder:"you@example.com",className:"step-input"}),h.jsx("span",{className:"social-link-helper",children:"Separate email for people to reach you"})]}),h.jsxs("div",{className:"social-link-field",children:[h.jsx("label",{className:"step-label",children:"Phone"}),h.jsx("input",{type:"tel",value:L,onChange:We=>F(We.target.value),placeholder:"+1 (555) 123-4567",className:"step-input"})]}),h.jsxs("div",{className:"social-link-field",children:[h.jsx("label",{className:"step-label",children:"Website"}),h.jsx("input",{type:"text",value:j,onChange:We=>z(We.target.value),placeholder:"https://yourwebsite.com",className:"step-input"})]}),h.jsxs("div",{className:"social-link-field",children:[h.jsx("label",{className:"step-label",children:"TikTok"}),h.jsx("input",{type:"text",value:V,onChange:yt,placeholder:"@username",className:"step-input"})]}),h.jsxs("div",{className:"social-link-field",children:[h.jsx("label",{className:"step-label",children:"Snapchat"}),h.jsx("input",{type:"text",value:Y,onChange:dt,placeholder:"@username",className:"step-input"})]})]}),h.jsx("button",{type:"submit",className:"primary-button",disabled:ye,style:{marginTop:"30px"},children:ye?re?"Updating...":"Submitting...":re?"Update":"Submit"})]})}),Ce&&h.jsx("div",{className:"email-confirm-modal-overlay",children:h.jsxs("div",{className:"email-confirm-modal",children:[h.jsx("div",{className:"email-confirm-modal-icon",children:""}),h.jsx("h3",{className:"email-confirm-modal-title",children:"Is this email correct?"}),h.jsx("p",{className:"email-confirm-modal-subtitle",children:"Make sure its right"}),h.jsx("div",{className:"email-confirm-modal-email",children:y}),h.jsxs("div",{className:"email-confirm-modal-buttons",children:[h.jsx("button",{className:"email-confirm-btn email-confirm-btn-yes",onClick:Hn,children:"Yes, it's correct"}),h.jsx("button",{className:"email-confirm-btn email-confirm-btn-no",onClick:Ve,children:"Let me edit"})]})]})}),be&&h.jsx("div",{className:"email-confirm-modal-overlay",children:h.jsxs("div",{className:"email-confirm-modal",children:[h.jsx("div",{className:"email-confirm-modal-icon",children:""}),h.jsx("h3",{className:"email-confirm-modal-title",children:"This email is already registered"}),h.jsx("p",{className:"email-confirm-modal-subtitle",children:"To link your matches to your existing account, we'll send a verification email to:"}),h.jsx("div",{className:"email-confirm-modal-email",children:y}),nt&&h.jsx("div",{style:{color:"#b91c1c",fontSize:"0.85rem",marginBottom:"16px",padding:"10px 14px",backgroundColor:"rgba(185, 28, 28, 0.08)",borderRadius:"10px",fontWeight:"500",textAlign:"left",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:nt}),h.jsxs("div",{className:"email-confirm-modal-buttons",children:[h.jsx("button",{className:"email-confirm-btn email-confirm-btn-yes",onClick:ze,disabled:xe,children:xe?"Sending...":"Send Verification Email"}),h.jsx("button",{className:"email-confirm-btn email-confirm-btn-no",onClick:mn,disabled:xe,children:"Use Different Email"})]})]})})]})},Y4=()=>{const t=Bn(),{checkAuth:i}=N.useContext(Wn),[a,u]=N.useState("verifying"),[m,x]=N.useState("");return N.useEffect(()=>{(async()=>{try{const b=await Ct("/auth/session",{method:"GET"});b.ok?(await b.json()).authenticated?(u("success"),await i(),setTimeout(()=>{t("/")},2e3)):(u("error"),x("Session not found. Please try logging in again.")):(u("error"),x("Could not verify your session. Please try again."))}catch(b){console.error("Session verification error:",b),u("error"),x("Network error. Please check your connection and try again.")}})()},[i,t]),h.jsx("div",{className:"auth-success-container",children:h.jsxs("div",{className:"auth-success-card",children:[a==="verifying"&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"auth-success-spinner"}),h.jsx("h2",{children:"Signing you in..."}),h.jsx("p",{children:"Please wait while we verify your session."})]}),a==="success"&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"auth-success-checkmark",children:""}),h.jsx("h2",{children:"Welcome to Reuneo!"}),h.jsx("p",{children:"You're now signed in. Redirecting you..."})]}),a==="error"&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"auth-success-error",children:""}),h.jsx("h2",{children:"Something went wrong"}),h.jsx("p",{children:m}),h.jsx("button",{className:"auth-success-button",onClick:()=>t("/login"),children:"Back to Login"})]})]})})},$4=()=>{const t=Bn(),[i]=Rp(),{checkAuth:a}=N.useContext(Wn),[u,m]=N.useState(""),[x,y]=N.useState(""),[b,v]=N.useState(""),[C,S]=N.useState(!0),[T,_]=N.useState(!1),[M,L]=N.useState(""),[F,j]=N.useState(""),z=i.get("token");N.useEffect(()=>{(async()=>{if(!z){j("No token provided. Please request a new magic link."),S(!1);return}try{const $=await(await fetch(`${window.server_url}/auth/verify-setup-token?token=${encodeURIComponent(z)}`,{credentials:"include"})).json();$.valid&&$.email?m($.email):j($.error||"Invalid or expired token. Please request a new magic link.")}catch(Y){console.error("Token validation error:",Y),j("Unable to validate token. Please try again.")}finally{S(!1)}})()},[z]);const V=async B=>{if(B.preventDefault(),L(""),!x){L("Password is required");return}if(x.length<2){L("Password must be at least 2 characters");return}if(x!==b){L("Passwords do not match");return}_(!0);try{const $=await(await Ct("/auth/set-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:z,password:x})})).json();$.success?(await a(),t("/paired-player-history")):L($.error||"Failed to set password. Please try again.")}catch(Y){console.error("Set password error:",Y),L("An error occurred. Please try again.")}finally{_(!1)}};return C?h.jsx(Yo,{fullScreen:!0,message:"Verifying..."}):F?h.jsxs("div",{className:"set-password-container",children:[h.jsx("button",{onClick:()=>t("/"),className:"homescreen-button",children:"Home"}),h.jsxs("div",{className:"set-password-error-container",children:[h.jsx("div",{className:"error-icon",children:""}),h.jsx("h2",{className:"error-title",children:"Link Expired or Invalid"}),h.jsx("p",{className:"error-description",children:F}),h.jsx("button",{onClick:()=>t("/login"),className:"primary-button",style:{marginTop:"20px"},children:"Go to Login"})]})]}):h.jsxs("div",{className:"set-password-container",children:[h.jsx("button",{onClick:()=>t("/"),className:"homescreen-button",children:"Home"}),h.jsx("h3",{className:"set-password-header",children:"Set Your Password"}),h.jsx("p",{className:"set-password-subtitle",children:"You'll use this to log in later"}),h.jsx("div",{className:"step-form-container",children:h.jsxs("form",{onSubmit:V,children:[M&&h.jsx("div",{className:"error-message",children:M}),h.jsxs("div",{style:{marginTop:"0"},children:[h.jsx("label",{className:"step-label",children:"Email"}),h.jsxs("div",{className:"email-display",children:[h.jsx("input",{type:"email",value:u,className:"step-input email-locked",disabled:!0,readOnly:!0}),h.jsx("span",{className:"lock-icon",children:""})]}),h.jsx("p",{className:"email-hint",children:"This is the email you verified"})]}),h.jsxs("div",{style:{marginTop:"24px"},children:[h.jsx("label",{className:"step-label",children:"Create Password"}),h.jsx("input",{type:"password",value:x,onChange:B=>y(B.target.value),placeholder:"Enter a password",className:"step-input",autoFocus:!0,autoComplete:"new-password"})]}),h.jsxs("div",{style:{marginTop:"16px"},children:[h.jsx("label",{className:"step-label",children:"Confirm Password"}),h.jsx("input",{type:"password",value:b,onChange:B=>v(B.target.value),placeholder:"Confirm your password",className:"step-input",autoComplete:"new-password"})]}),h.jsx("button",{type:"submit",className:"primary-button",disabled:T||!x,style:{marginTop:"30px"},children:T?"Setting Password...":"Set Password"})]})})]})},Z4=()=>{const t=Bn(),[i,a]=N.useState(""),[u,m]=N.useState(!1),[x,y]=N.useState(!1),[b,v]=N.useState(!1),[C,S]=N.useState(!1),[T,_]=N.useState(""),M=z=>{const V=z.target.value.toLowerCase();a(V),_(""),!b&&V.length>0&&(v(!0),setTimeout(()=>S(!0),300),setTimeout(()=>S(!1),4300))},L=z=>z&&z.includes("@")&&z.includes("."),F=async z=>{if(z.preventDefault(),_(""),!L(i)){_("Please enter a valid email address");return}m(!0);try{const B=await(await Ct("/auth/request-password-reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i.trim()})})).json();B.success?y(!0):_(B.error||"Something went wrong. Please try again.")}catch(V){console.error("Password reset request error:",V),_("Network error. Please check your connection and try again.")}finally{m(!1)}},j=()=>{y(!1),a(""),v(!1)};return h.jsxs("div",{className:"forgot-password-container",children:[h.jsx("button",{onClick:()=>t("/"),className:"homescreen-button",children:"Home"}),h.jsx("h3",{className:"forgot-password-header",children:"Reset Your Password"}),h.jsx("p",{className:"forgot-password-subtitle",children:"Enter your email and we'll send you a reset link"}),h.jsxs("div",{className:"step-form-container",children:[h.jsxs("form",{onSubmit:F,children:[T&&h.jsx("div",{className:"error-message",children:T}),h.jsxs("div",{style:{marginTop:"0"},children:[h.jsx("label",{className:"step-label",children:"Email Address"}),h.jsx("input",{type:"email",value:i,onChange:M,placeholder:"Enter your email",className:"step-input",autoFocus:!0,autoComplete:"email"})]}),h.jsx("button",{type:"submit",className:"primary-button",disabled:u||!i,style:{marginTop:"30px"},children:u?"Sending...":"Send Reset Link"})]}),h.jsx("button",{type:"button",onClick:()=>t("/login"),className:"back-to-login-link",children:"Back to Login"})]}),h.jsx(Er,{children:C&&h.jsx(vt.div,{className:"email-toast",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.3},children:"Double-check your email address is correct before submitting."})}),h.jsx(Er,{children:x&&h.jsx(vt.div,{className:"reset-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:j,children:h.jsxs(vt.div,{className:"reset-modal-content",initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},transition:{type:"spring",stiffness:400,damping:25},onClick:z=>z.stopPropagation(),children:[h.jsx("h2",{className:"reset-modal-header",children:" Check Your Inbox"}),h.jsx("p",{className:"reset-modal-subtext",children:"If an account exists with this email, we've sent a password reset link. Check your inbox and spam folder."}),h.jsx("button",{type:"button",className:"reset-modal-button",onClick:j,children:"Got it"})]})})})]})};k2.createRoot(document.getElementById("root")).render(h.jsx(N.StrictMode,{children:h.jsx(P2,{children:h.jsxs(xw,{basename:"/",children:[h.jsx(OE,{}),h.jsx(DE,{}),h.jsxs(Xy,{children:[h.jsx(er,{path:"/",element:h.jsx(ME,{})}),h.jsx(er,{path:"/login",element:h.jsx(LE,{})}),h.jsx(er,{path:"/signup",element:h.jsx(gE,{})}),h.jsx(er,{path:"/logout",element:h.jsx(jE,{})}),h.jsx(er,{path:"/lobby",element:h.jsx(pS,{})}),h.jsx(er,{path:"/admin_lobby_view",element:h.jsx(c4,{})}),h.jsx(er,{path:"/create_lobby",element:h.jsx(d4,{})}),h.jsx(er,{path:"/product-selection",element:h.jsx(u4,{})}),h.jsx(er,{path:"/organizer-signup",element:h.jsx(h4,{})}),h.jsx(er,{path:"/organizer-signup-success",element:h.jsx(m4,{})}),h.jsx(er,{path:"/organizer-account-details",element:h.jsx(p4,{})}),h.jsx(er,{path:"/organizer-dashboard",element:h.jsx(w4,{})}),h.jsx(er,{path:"/master_lobby_view",element:h.jsx(C4,{})}),h.jsx(er,{path:"/paired-player-history",element:h.jsx(H4,{})}),h.jsx(er,{path:"/post-event-auth",element:h.jsx(X4,{})}),h.jsx(er,{path:"/set-password",element:h.jsx($4,{})}),h.jsx(er,{path:"/forgot-password",element:h.jsx(Z4,{})}),h.jsx(er,{path:"/auth/success",element:h.jsx(Y4,{})})]})]})})}));
