(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))u(m);new MutationObserver(m=>{for(const x of m)if(x.type==="childList")for(const w of x.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&u(w)}).observe(document,{childList:!0,subtree:!0});function a(m){const x={};return m.integrity&&(x.integrity=m.integrity),m.referrerPolicy&&(x.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?x.credentials="include":m.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function u(m){if(m.ep)return;m.ep=!0;const x=a(m);fetch(m.href,x)}})();var lc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xd={exports:{}},Ra={},yd={exports:{}},Ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l1;function b2(){if(l1)return Ot;l1=1;var t=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),w=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),C=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),T=Symbol.iterator;function _(Y){return Y===null||typeof Y!="object"?null:(Y=T&&Y[T]||Y["@@iterator"],typeof Y=="function"?Y:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,B={};function j(Y,G,Ce){this.props=Y,this.context=G,this.refs=B,this.updater=Ce||O}j.prototype.isReactComponent={},j.prototype.setState=function(Y,G){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,G,"setState")},j.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function W(){}W.prototype=j.prototype;function U(Y,G,Ce){this.props=Y,this.context=G,this.refs=B,this.updater=Ce||O}var F=U.prototype=new W;F.constructor=U,L(F,j.prototype),F.isPureReactComponent=!0;var Z=Array.isArray,Q=Object.prototype.hasOwnProperty,ne={current:null},q={key:!0,ref:!0,__self:!0,__source:!0};function ie(Y,G,Ce){var ve,ue={},$=null,Re=null;if(G!=null)for(ve in G.ref!==void 0&&(Re=G.ref),G.key!==void 0&&($=""+G.key),G)Q.call(G,ve)&&!q.hasOwnProperty(ve)&&(ue[ve]=G[ve]);var ge=arguments.length-2;if(ge===1)ue.children=Ce;else if(1<ge){for(var Ae=Array(ge),rt=0;rt<ge;rt++)Ae[rt]=arguments[rt+2];ue.children=Ae}if(Y&&Y.defaultProps)for(ve in ge=Y.defaultProps,ge)ue[ve]===void 0&&(ue[ve]=ge[ve]);return{$$typeof:t,type:Y,key:$,ref:Re,props:ue,_owner:ne.current}}function te(Y,G){return{$$typeof:t,type:Y.type,key:G,ref:Y.ref,props:Y.props,_owner:Y._owner}}function ye(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===t}function Oe(Y){var G={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(Ce){return G[Ce]})}var Se=/\/+/g;function Te(Y,G){return typeof Y=="object"&&Y!==null&&Y.key!=null?Oe(""+Y.key):G.toString(36)}function be(Y,G,Ce,ve,ue){var $=typeof Y;($==="undefined"||$==="boolean")&&(Y=null);var Re=!1;if(Y===null)Re=!0;else switch($){case"string":case"number":Re=!0;break;case"object":switch(Y.$$typeof){case t:case i:Re=!0}}if(Re)return Re=Y,ue=ue(Re),Y=ve===""?"."+Te(Re,0):ve,Z(ue)?(Ce="",Y!=null&&(Ce=Y.replace(Se,"$&/")+"/"),be(ue,G,Ce,"",function(rt){return rt})):ue!=null&&(ye(ue)&&(ue=te(ue,Ce+(!ue.key||Re&&Re.key===ue.key?"":(""+ue.key).replace(Se,"$&/")+"/")+Y)),G.push(ue)),1;if(Re=0,ve=ve===""?".":ve+":",Z(Y))for(var ge=0;ge<Y.length;ge++){$=Y[ge];var Ae=ve+Te($,ge);Re+=be($,G,Ce,Ae,ue)}else if(Ae=_(Y),typeof Ae=="function")for(Y=Ae.call(Y),ge=0;!($=Y.next()).done;)$=$.value,Ae=ve+Te($,ge++),Re+=be($,G,Ce,Ae,ue);else if($==="object")throw G=String(Y),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Re}function X(Y,G,Ce){if(Y==null)return Y;var ve=[],ue=0;return be(Y,ve,"","",function($){return G.call(Ce,$,ue++)}),ve}function Le(Y){if(Y._status===-1){var G=Y._result;G=G(),G.then(function(Ce){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=Ce)},function(Ce){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=Ce)}),Y._status===-1&&(Y._status=0,Y._result=G)}if(Y._status===1)return Y._result.default;throw Y._result}var we={current:null},xe={transition:null},_e={ReactCurrentDispatcher:we,ReactCurrentBatchConfig:xe,ReactCurrentOwner:ne};function Ee(){throw Error("act(...) is not supported in production builds of React.")}return Ot.Children={map:X,forEach:function(Y,G,Ce){X(Y,function(){G.apply(this,arguments)},Ce)},count:function(Y){var G=0;return X(Y,function(){G++}),G},toArray:function(Y){return X(Y,function(G){return G})||[]},only:function(Y){if(!ye(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},Ot.Component=j,Ot.Fragment=a,Ot.Profiler=m,Ot.PureComponent=U,Ot.StrictMode=u,Ot.Suspense=v,Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_e,Ot.act=Ee,Ot.cloneElement=function(Y,G,Ce){if(Y==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Y+".");var ve=L({},Y.props),ue=Y.key,$=Y.ref,Re=Y._owner;if(G!=null){if(G.ref!==void 0&&($=G.ref,Re=ne.current),G.key!==void 0&&(ue=""+G.key),Y.type&&Y.type.defaultProps)var ge=Y.type.defaultProps;for(Ae in G)Q.call(G,Ae)&&!q.hasOwnProperty(Ae)&&(ve[Ae]=G[Ae]===void 0&&ge!==void 0?ge[Ae]:G[Ae])}var Ae=arguments.length-2;if(Ae===1)ve.children=Ce;else if(1<Ae){ge=Array(Ae);for(var rt=0;rt<Ae;rt++)ge[rt]=arguments[rt+2];ve.children=ge}return{$$typeof:t,type:Y.type,key:ue,ref:$,props:ve,_owner:Re}},Ot.createContext=function(Y){return Y={$$typeof:w,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Y.Provider={$$typeof:x,_context:Y},Y.Consumer=Y},Ot.createElement=ie,Ot.createFactory=function(Y){var G=ie.bind(null,Y);return G.type=Y,G},Ot.createRef=function(){return{current:null}},Ot.forwardRef=function(Y){return{$$typeof:b,render:Y}},Ot.isValidElement=ye,Ot.lazy=function(Y){return{$$typeof:A,_payload:{_status:-1,_result:Y},_init:Le}},Ot.memo=function(Y,G){return{$$typeof:C,type:Y,compare:G===void 0?null:G}},Ot.startTransition=function(Y){var G=xe.transition;xe.transition={};try{Y()}finally{xe.transition=G}},Ot.unstable_act=Ee,Ot.useCallback=function(Y,G){return we.current.useCallback(Y,G)},Ot.useContext=function(Y){return we.current.useContext(Y)},Ot.useDebugValue=function(){},Ot.useDeferredValue=function(Y){return we.current.useDeferredValue(Y)},Ot.useEffect=function(Y,G){return we.current.useEffect(Y,G)},Ot.useId=function(){return we.current.useId()},Ot.useImperativeHandle=function(Y,G,Ce){return we.current.useImperativeHandle(Y,G,Ce)},Ot.useInsertionEffect=function(Y,G){return we.current.useInsertionEffect(Y,G)},Ot.useLayoutEffect=function(Y,G){return we.current.useLayoutEffect(Y,G)},Ot.useMemo=function(Y,G){return we.current.useMemo(Y,G)},Ot.useReducer=function(Y,G,Ce){return we.current.useReducer(Y,G,Ce)},Ot.useRef=function(Y){return we.current.useRef(Y)},Ot.useState=function(Y){return we.current.useState(Y)},Ot.useSyncExternalStore=function(Y,G,Ce){return we.current.useSyncExternalStore(Y,G,Ce)},Ot.useTransition=function(){return we.current.useTransition()},Ot.version="18.3.1",Ot}var c1;function Nf(){return c1||(c1=1,yd.exports=b2()),yd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u1;function E2(){if(u1)return Ra;u1=1;var t=Nf(),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),u=Object.prototype.hasOwnProperty,m=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x={key:!0,ref:!0,__self:!0,__source:!0};function w(b,v,C){var A,T={},_=null,O=null;C!==void 0&&(_=""+C),v.key!==void 0&&(_=""+v.key),v.ref!==void 0&&(O=v.ref);for(A in v)u.call(v,A)&&!x.hasOwnProperty(A)&&(T[A]=v[A]);if(b&&b.defaultProps)for(A in v=b.defaultProps,v)T[A]===void 0&&(T[A]=v[A]);return{$$typeof:i,type:b,key:_,ref:O,props:T,_owner:m.current}}return Ra.Fragment=a,Ra.jsx=w,Ra.jsxs=w,Ra}var d1;function S2(){return d1||(d1=1,xd.exports=E2()),xd.exports}var h=S2(),N=Nf();const Gt=fp(N);var cc={},wd={exports:{}},Fr={},vd={exports:{}},Cd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f1;function A2(){return f1||(f1=1,function(t){function i(xe,_e){var Ee=xe.length;xe.push(_e);e:for(;0<Ee;){var Y=Ee-1>>>1,G=xe[Y];if(0<m(G,_e))xe[Y]=_e,xe[Ee]=G,Ee=Y;else break e}}function a(xe){return xe.length===0?null:xe[0]}function u(xe){if(xe.length===0)return null;var _e=xe[0],Ee=xe.pop();if(Ee!==_e){xe[0]=Ee;e:for(var Y=0,G=xe.length,Ce=G>>>1;Y<Ce;){var ve=2*(Y+1)-1,ue=xe[ve],$=ve+1,Re=xe[$];if(0>m(ue,Ee))$<G&&0>m(Re,ue)?(xe[Y]=Re,xe[$]=Ee,Y=$):(xe[Y]=ue,xe[ve]=Ee,Y=ve);else if($<G&&0>m(Re,Ee))xe[Y]=Re,xe[$]=Ee,Y=$;else break e}}return _e}function m(xe,_e){var Ee=xe.sortIndex-_e.sortIndex;return Ee!==0?Ee:xe.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var x=performance;t.unstable_now=function(){return x.now()}}else{var w=Date,b=w.now();t.unstable_now=function(){return w.now()-b}}var v=[],C=[],A=1,T=null,_=3,O=!1,L=!1,B=!1,j=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(xe){for(var _e=a(C);_e!==null;){if(_e.callback===null)u(C);else if(_e.startTime<=xe)u(C),_e.sortIndex=_e.expirationTime,i(v,_e);else break;_e=a(C)}}function Z(xe){if(B=!1,F(xe),!L)if(a(v)!==null)L=!0,Le(Q);else{var _e=a(C);_e!==null&&we(Z,_e.startTime-xe)}}function Q(xe,_e){L=!1,B&&(B=!1,W(ie),ie=-1),O=!0;var Ee=_;try{for(F(_e),T=a(v);T!==null&&(!(T.expirationTime>_e)||xe&&!Oe());){var Y=T.callback;if(typeof Y=="function"){T.callback=null,_=T.priorityLevel;var G=Y(T.expirationTime<=_e);_e=t.unstable_now(),typeof G=="function"?T.callback=G:T===a(v)&&u(v),F(_e)}else u(v);T=a(v)}if(T!==null)var Ce=!0;else{var ve=a(C);ve!==null&&we(Z,ve.startTime-_e),Ce=!1}return Ce}finally{T=null,_=Ee,O=!1}}var ne=!1,q=null,ie=-1,te=5,ye=-1;function Oe(){return!(t.unstable_now()-ye<te)}function Se(){if(q!==null){var xe=t.unstable_now();ye=xe;var _e=!0;try{_e=q(!0,xe)}finally{_e?Te():(ne=!1,q=null)}}else ne=!1}var Te;if(typeof U=="function")Te=function(){U(Se)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,X=be.port2;be.port1.onmessage=Se,Te=function(){X.postMessage(null)}}else Te=function(){j(Se,0)};function Le(xe){q=xe,ne||(ne=!0,Te())}function we(xe,_e){ie=j(function(){xe(t.unstable_now())},_e)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(xe){xe.callback=null},t.unstable_continueExecution=function(){L||O||(L=!0,Le(Q))},t.unstable_forceFrameRate=function(xe){0>xe||125<xe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<xe?Math.floor(1e3/xe):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return a(v)},t.unstable_next=function(xe){switch(_){case 1:case 2:case 3:var _e=3;break;default:_e=_}var Ee=_;_=_e;try{return xe()}finally{_=Ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(xe,_e){switch(xe){case 1:case 2:case 3:case 4:case 5:break;default:xe=3}var Ee=_;_=xe;try{return _e()}finally{_=Ee}},t.unstable_scheduleCallback=function(xe,_e,Ee){var Y=t.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?Y+Ee:Y):Ee=Y,xe){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=Ee+G,xe={id:A++,callback:_e,priorityLevel:xe,startTime:Ee,expirationTime:G,sortIndex:-1},Ee>Y?(xe.sortIndex=Ee,i(C,xe),a(v)===null&&xe===a(C)&&(B?(W(ie),ie=-1):B=!0,we(Z,Ee-Y))):(xe.sortIndex=G,i(v,xe),L||O||(L=!0,Le(Q))),xe},t.unstable_shouldYield=Oe,t.unstable_wrapCallback=function(xe){var _e=_;return function(){var Ee=_;_=_e;try{return xe.apply(this,arguments)}finally{_=Ee}}}}(Cd)),Cd}var h1;function N2(){return h1||(h1=1,vd.exports=A2()),vd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m1;function I2(){if(m1)return Fr;m1=1;var t=Nf(),i=N2();function a(n){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+n,f=1;f<arguments.length;f++)o+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+n+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=new Set,m={};function x(n,o){w(n,o),w(n+"Capture",o)}function w(n,o){for(m[n]=o,n=0;n<o.length;n++)u.add(o[n])}var b=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v=Object.prototype.hasOwnProperty,C=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A={},T={};function _(n){return v.call(T,n)?!0:v.call(A,n)?!1:C.test(n)?T[n]=!0:(A[n]=!0,!1)}function O(n,o,f,g){if(f!==null&&f.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return g?!1:f!==null?!f.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function L(n,o,f,g){if(o===null||typeof o>"u"||O(n,o,f,g))return!0;if(g)return!1;if(f!==null)switch(f.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function B(n,o,f,g,S,I,M){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=g,this.attributeNamespace=S,this.mustUseProperty=f,this.propertyName=n,this.type=o,this.sanitizeURL=I,this.removeEmptyString=M}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){j[n]=new B(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var o=n[0];j[o]=new B(o,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){j[n]=new B(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){j[n]=new B(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){j[n]=new B(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){j[n]=new B(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){j[n]=new B(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){j[n]=new B(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){j[n]=new B(n,5,!1,n.toLowerCase(),null,!1,!1)});var W=/[\-:]([a-z])/g;function U(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var o=n.replace(W,U);j[o]=new B(o,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var o=n.replace(W,U);j[o]=new B(o,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var o=n.replace(W,U);j[o]=new B(o,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){j[n]=new B(n,1,!1,n.toLowerCase(),null,!1,!1)}),j.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){j[n]=new B(n,1,!1,n.toLowerCase(),null,!0,!0)});function F(n,o,f,g){var S=j.hasOwnProperty(o)?j[o]:null;(S!==null?S.type!==0:g||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(L(o,f,S,g)&&(f=null),g||S===null?_(o)&&(f===null?n.removeAttribute(o):n.setAttribute(o,""+f)):S.mustUseProperty?n[S.propertyName]=f===null?S.type===3?!1:"":f:(o=S.attributeName,g=S.attributeNamespace,f===null?n.removeAttribute(o):(S=S.type,f=S===3||S===4&&f===!0?"":""+f,g?n.setAttributeNS(g,o,f):n.setAttribute(o,f))))}var Z=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Q=Symbol.for("react.element"),ne=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),ie=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),ye=Symbol.for("react.provider"),Oe=Symbol.for("react.context"),Se=Symbol.for("react.forward_ref"),Te=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),Le=Symbol.for("react.lazy"),we=Symbol.for("react.offscreen"),xe=Symbol.iterator;function _e(n){return n===null||typeof n!="object"?null:(n=xe&&n[xe]||n["@@iterator"],typeof n=="function"?n:null)}var Ee=Object.assign,Y;function G(n){if(Y===void 0)try{throw Error()}catch(f){var o=f.stack.trim().match(/\n( *(at )?)/);Y=o&&o[1]||""}return`
`+Y+n}var Ce=!1;function ve(n,o){if(!n||Ce)return"";Ce=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(me){var g=me}Reflect.construct(n,[],o)}else{try{o.call()}catch(me){g=me}n.call(o.prototype)}else{try{throw Error()}catch(me){g=me}n()}}catch(me){if(me&&g&&typeof me.stack=="string"){for(var S=me.stack.split(`
`),I=g.stack.split(`
`),M=S.length-1,H=I.length-1;1<=M&&0<=H&&S[M]!==I[H];)H--;for(;1<=M&&0<=H;M--,H--)if(S[M]!==I[H]){if(M!==1||H!==1)do if(M--,H--,0>H||S[M]!==I[H]){var J=`
`+S[M].replace(" at new "," at ");return n.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",n.displayName)),J}while(1<=M&&0<=H);break}}}finally{Ce=!1,Error.prepareStackTrace=f}return(n=n?n.displayName||n.name:"")?G(n):""}function ue(n){switch(n.tag){case 5:return G(n.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return n=ve(n.type,!1),n;case 11:return n=ve(n.type.render,!1),n;case 1:return n=ve(n.type,!0),n;default:return""}}function $(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case q:return"Fragment";case ne:return"Portal";case te:return"Profiler";case ie:return"StrictMode";case Te:return"Suspense";case be:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Oe:return(n.displayName||"Context")+".Consumer";case ye:return(n._context.displayName||"Context")+".Provider";case Se:var o=n.render;return n=n.displayName,n||(n=o.displayName||o.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case X:return o=n.displayName||null,o!==null?o:$(n.type)||"Memo";case Le:o=n._payload,n=n._init;try{return $(n(o))}catch{}}return null}function Re(n){var o=n.type;switch(n.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=o.render,n=n.displayName||n.name||"",o.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $(o);case 8:return o===ie?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function ge(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ae(n){var o=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function rt(n){var o=Ae(n)?"checked":"value",f=Object.getOwnPropertyDescriptor(n.constructor.prototype,o),g=""+n[o];if(!n.hasOwnProperty(o)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var S=f.get,I=f.set;return Object.defineProperty(n,o,{configurable:!0,get:function(){return S.call(this)},set:function(M){g=""+M,I.call(this,M)}}),Object.defineProperty(n,o,{enumerable:f.enumerable}),{getValue:function(){return g},setValue:function(M){g=""+M},stopTracking:function(){n._valueTracker=null,delete n[o]}}}}function Ye(n){n._valueTracker||(n._valueTracker=rt(n))}function ce(n){if(!n)return!1;var o=n._valueTracker;if(!o)return!0;var f=o.getValue(),g="";return n&&(g=Ae(n)?n.checked?"true":"false":n.value),n=g,n!==f?(o.setValue(n),!0):!1}function pe(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function $e(n,o){var f=o.checked;return Ee({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??n._wrapperState.initialChecked})}function Ze(n,o){var f=o.defaultValue==null?"":o.defaultValue,g=o.checked!=null?o.checked:o.defaultChecked;f=ge(o.value!=null?o.value:f),n._wrapperState={initialChecked:g,initialValue:f,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Tt(n,o){o=o.checked,o!=null&&F(n,"checked",o,!1)}function pt(n,o){Tt(n,o);var f=ge(o.value),g=o.type;if(f!=null)g==="number"?(f===0&&n.value===""||n.value!=f)&&(n.value=""+f):n.value!==""+f&&(n.value=""+f);else if(g==="submit"||g==="reset"){n.removeAttribute("value");return}o.hasOwnProperty("value")?et(n,o.type,f):o.hasOwnProperty("defaultValue")&&et(n,o.type,ge(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(n.defaultChecked=!!o.defaultChecked)}function Qe(n,o,f){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var g=o.type;if(!(g!=="submit"&&g!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+n._wrapperState.initialValue,f||o===n.value||(n.value=o),n.defaultValue=o}f=n.name,f!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,f!==""&&(n.name=f)}function et(n,o,f){(o!=="number"||pe(n.ownerDocument)!==n)&&(f==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+f&&(n.defaultValue=""+f))}var Et=Array.isArray;function ze(n,o,f,g){if(n=n.options,o){o={};for(var S=0;S<f.length;S++)o["$"+f[S]]=!0;for(f=0;f<n.length;f++)S=o.hasOwnProperty("$"+n[f].value),n[f].selected!==S&&(n[f].selected=S),S&&g&&(n[f].defaultSelected=!0)}else{for(f=""+ge(f),o=null,S=0;S<n.length;S++){if(n[S].value===f){n[S].selected=!0,g&&(n[S].defaultSelected=!0);return}o!==null||n[S].disabled||(o=n[S])}o!==null&&(o.selected=!0)}}function vn(n,o){if(o.dangerouslySetInnerHTML!=null)throw Error(a(91));return Ee({},o,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function tr(n,o){var f=o.value;if(f==null){if(f=o.children,o=o.defaultValue,f!=null){if(o!=null)throw Error(a(92));if(Et(f)){if(1<f.length)throw Error(a(93));f=f[0]}o=f}o==null&&(o=""),f=o}n._wrapperState={initialValue:ge(f)}}function Xe(n,o){var f=ge(o.value),g=ge(o.defaultValue);f!=null&&(f=""+f,f!==n.value&&(n.value=f),o.defaultValue==null&&n.defaultValue!==f&&(n.defaultValue=f)),g!=null&&(n.defaultValue=""+g)}function Rt(n){var o=n.textContent;o===n._wrapperState.initialValue&&o!==""&&o!==null&&(n.value=o)}function We(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ht(n,o){return n==null||n==="http://www.w3.org/1999/xhtml"?We(o):n==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var tt,_t=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,f,g,S){MSApp.execUnsafeLocalFunction(function(){return n(o,f,g,S)})}:n}(function(n,o){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=o;else{for(tt=tt||document.createElement("div"),tt.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=tt.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;o.firstChild;)n.appendChild(o.firstChild)}});function zt(n,o){if(o){var f=n.firstChild;if(f&&f===n.lastChild&&f.nodeType===3){f.nodeValue=o;return}}n.textContent=o}var Bt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},at=["Webkit","ms","Moz","O"];Object.keys(Bt).forEach(function(n){at.forEach(function(o){o=o+n.charAt(0).toUpperCase()+n.substring(1),Bt[o]=Bt[n]})});function Ie(n,o,f){return o==null||typeof o=="boolean"||o===""?"":f||typeof o!="number"||o===0||Bt.hasOwnProperty(n)&&Bt[n]?(""+o).trim():o+"px"}function le(n,o){n=n.style;for(var f in o)if(o.hasOwnProperty(f)){var g=f.indexOf("--")===0,S=Ie(f,o[f],g);f==="float"&&(f="cssFloat"),g?n.setProperty(f,S):n[f]=S}}var ct=Ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function je(n,o){if(o){if(ct[n]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(a(137,n));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(a(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(a(61))}if(o.style!=null&&typeof o.style!="object")throw Error(a(62))}}function yt(n,o){if(n.indexOf("-")===-1)return typeof o.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xt=null;function un(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Cn=null,dt=null,en=null;function nr(n){if(n=pa(n)){if(typeof Cn!="function")throw Error(a(280));var o=n.stateNode;o&&(o=El(o),Cn(n.stateNode,n.type,o))}}function Rr(n){dt?en?en.push(n):en=[n]:dt=n}function bn(){if(dt){var n=dt,o=en;if(en=dt=null,nr(n),o)for(n=0;n<o.length;n++)nr(o[n])}}function vi(n,o){return n(o)}function Kt(){}var zr=!1;function fr(n,o,f){if(zr)return n(o,f);zr=!0;try{return vi(n,o,f)}finally{zr=!1,(dt!==null||en!==null)&&(Kt(),bn())}}function Vn(n,o){var f=n.stateNode;if(f===null)return null;var g=El(f);if(g===null)return null;f=g[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(n=n.type,g=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!g;break e;default:n=!1}if(n)return null;if(f&&typeof f!="function")throw Error(a(231,o,typeof f));return f}var $n=!1;if(b)try{var rr={};Object.defineProperty(rr,"passive",{get:function(){$n=!0}}),window.addEventListener("test",rr,rr),window.removeEventListener("test",rr,rr)}catch{$n=!1}function Zn(n,o,f,g,S,I,M,H,J){var me=Array.prototype.slice.call(arguments,3);try{o.apply(f,me)}catch(Me){this.onError(Me)}}var hn=!1,vr=null,Un=!1,Ke=null,hr={onError:function(n){hn=!0,vr=n}};function ci(n,o,f,g,S,I,M,H,J){hn=!1,vr=null,Zn.apply(hr,arguments)}function ir(n,o,f,g,S,I,M,H,J){if(ci.apply(this,arguments),hn){if(hn){var me=vr;hn=!1,vr=null}else throw Error(a(198));Un||(Un=!0,Ke=me)}}function sr(n){var o=n,f=n;if(n.alternate)for(;o.return;)o=o.return;else{n=o;do o=n,o.flags&4098&&(f=o.return),n=o.return;while(n)}return o.tag===3?f:null}function Wr(n){if(n.tag===13){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function Qi(n){if(sr(n)!==n)throw Error(a(188))}function kr(n){var o=n.alternate;if(!o){if(o=sr(n),o===null)throw Error(a(188));return o!==n?null:n}for(var f=n,g=o;;){var S=f.return;if(S===null)break;var I=S.alternate;if(I===null){if(g=S.return,g!==null){f=g;continue}break}if(S.child===I.child){for(I=S.child;I;){if(I===f)return Qi(S),n;if(I===g)return Qi(S),o;I=I.sibling}throw Error(a(188))}if(f.return!==g.return)f=S,g=I;else{for(var M=!1,H=S.child;H;){if(H===f){M=!0,f=S,g=I;break}if(H===g){M=!0,g=S,f=I;break}H=H.sibling}if(!M){for(H=I.child;H;){if(H===f){M=!0,f=I,g=S;break}if(H===g){M=!0,g=I,f=S;break}H=H.sibling}if(!M)throw Error(a(189))}}if(f.alternate!==g)throw Error(a(190))}if(f.tag!==3)throw Error(a(188));return f.stateNode.current===f?n:o}function Rs(n){return n=kr(n),n!==null?ho(n):null}function ho(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var o=ho(n);if(o!==null)return o;n=n.sibling}return null}var Cr=i.unstable_scheduleCallback,Dn=i.unstable_cancelCallback,Qt=i.unstable_shouldYield,Ji=i.unstable_requestPaint,Ft=i.unstable_now,ks=i.unstable_getCurrentPriorityLevel,Ne=i.unstable_ImmediatePriority,mo=i.unstable_UserBlockingPriority,Yt=i.unstable_NormalPriority,Kr=i.unstable_LowPriority,es=i.unstable_IdlePriority,Mt=null,At=null;function kt(n){if(At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(Mt,n,void 0,(n.current.flags&128)===128)}catch{}}var Ln=Math.clz32?Math.clz32:mn,Ps=Math.log,ts=Math.LN2;function mn(n){return n>>>=0,n===0?32:31-(Ps(n)/ts|0)|0}var br=64,ns=4194304;function Zt(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Er(n,o){var f=n.pendingLanes;if(f===0)return 0;var g=0,S=n.suspendedLanes,I=n.pingedLanes,M=f&268435455;if(M!==0){var H=M&~S;H!==0?g=Zt(H):(I&=M,I!==0&&(g=Zt(I)))}else M=f&~S,M!==0?g=Zt(M):I!==0&&(g=Zt(I));if(g===0)return 0;if(o!==0&&o!==g&&!(o&S)&&(S=g&-g,I=o&-o,S>=I||S===16&&(I&4194240)!==0))return o;if(g&4&&(g|=f&16),o=n.entangledLanes,o!==0)for(n=n.entanglements,o&=g;0<o;)f=31-Ln(o),S=1<<f,g|=n[f],o&=~S;return g}function Jo(n,o){switch(n){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qr(n,o){for(var f=n.suspendedLanes,g=n.pingedLanes,S=n.expirationTimes,I=n.pendingLanes;0<I;){var M=31-Ln(I),H=1<<M,J=S[M];J===-1?(!(H&f)||H&g)&&(S[M]=Jo(H,o)):J<=o&&(n.expiredLanes|=H),I&=~H}}function Wt(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function En(){var n=br;return br<<=1,!(br&4194240)&&(br=64),n}function oe(n){for(var o=[],f=0;31>f;f++)o.push(n);return o}function V(n,o,f){n.pendingLanes|=o,o!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,o=31-Ln(o),n[o]=f}function ot(n,o){var f=n.pendingLanes&~o;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=o,n.mutableReadLanes&=o,n.entangledLanes&=o,o=n.entanglements;var g=n.eventTimes;for(n=n.expirationTimes;0<f;){var S=31-Ln(f),I=1<<S;o[S]=0,g[S]=-1,n[S]=-1,f&=~I}}function on(n,o){var f=n.entangledLanes|=o;for(n=n.entanglements;f;){var g=31-Ln(f),S=1<<g;S&o|n[g]&o&&(n[g]|=o),f&=~S}}var It=0;function Ms(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Ve,qe,Ue,Ge,jt,Pr=!1,Ci=[],mr=null,Sr=null,Mr=null,an=new Map,dn=new Map,tn=[],ut="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hr(n,o){switch(n){case"focusin":case"focusout":mr=null;break;case"dragenter":case"dragleave":Sr=null;break;case"mouseover":case"mouseout":Mr=null;break;case"pointerover":case"pointerout":an.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":dn.delete(o.pointerId)}}function ft(n,o,f,g,S,I){return n===null||n.nativeEvent!==I?(n={blockedOn:o,domEventName:f,eventSystemFlags:g,nativeEvent:I,targetContainers:[S]},o!==null&&(o=pa(o),o!==null&&qe(o)),n):(n.eventSystemFlags|=g,o=n.targetContainers,S!==null&&o.indexOf(S)===-1&&o.push(S),n)}function _n(n,o,f,g,S){switch(o){case"focusin":return mr=ft(mr,n,o,f,g,S),!0;case"dragenter":return Sr=ft(Sr,n,o,f,g,S),!0;case"mouseover":return Mr=ft(Mr,n,o,f,g,S),!0;case"pointerover":var I=S.pointerId;return an.set(I,ft(an.get(I)||null,n,o,f,g,S)),!0;case"gotpointercapture":return I=S.pointerId,dn.set(I,ft(dn.get(I)||null,n,o,f,g,S)),!0}return!1}function cl(n){var o=Ws(n.target);if(o!==null){var f=sr(o);if(f!==null){if(o=f.tag,o===13){if(o=Wr(f),o!==null){n.blockedOn=o,jt(n.priority,function(){Ue(f)});return}}else if(o===3&&f.stateNode.current.memoizedState.isDehydrated){n.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}n.blockedOn=null}function rs(n){if(n.blockedOn!==null)return!1;for(var o=n.targetContainers;0<o.length;){var f=po(n.domEventName,n.eventSystemFlags,o[0],n.nativeEvent);if(f===null){f=n.nativeEvent;var g=new f.constructor(f.type,f);Xt=g,f.target.dispatchEvent(g),Xt=null}else return o=pa(f),o!==null&&qe(o),n.blockedOn=f,!1;o.shift()}return!0}function ea(n,o,f){rs(n)&&f.delete(o)}function Mi(){Pr=!1,mr!==null&&rs(mr)&&(mr=null),Sr!==null&&rs(Sr)&&(Sr=null),Mr!==null&&rs(Mr)&&(Mr=null),an.forEach(ea),dn.forEach(ea)}function Os(n,o){n.blockedOn===o&&(n.blockedOn=null,Pr||(Pr=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Mi)))}function ui(n){function o(S){return Os(S,n)}if(0<Ci.length){Os(Ci[0],n);for(var f=1;f<Ci.length;f++){var g=Ci[f];g.blockedOn===n&&(g.blockedOn=null)}}for(mr!==null&&Os(mr,n),Sr!==null&&Os(Sr,n),Mr!==null&&Os(Mr,n),an.forEach(o),dn.forEach(o),f=0;f<tn.length;f++)g=tn[f],g.blockedOn===n&&(g.blockedOn=null);for(;0<tn.length&&(f=tn[0],f.blockedOn===null);)cl(f),f.blockedOn===null&&tn.shift()}var Qr=Z.ReactCurrentBatchConfig,bi=!0;function ul(n,o,f,g){var S=It,I=Qr.transition;Qr.transition=null;try{It=1,Oi(n,o,f,g)}finally{It=S,Qr.transition=I}}function Ds(n,o,f,g){var S=It,I=Qr.transition;Qr.transition=null;try{It=4,Oi(n,o,f,g)}finally{It=S,Qr.transition=I}}function Oi(n,o,f,g){if(bi){var S=po(n,o,f,g);if(S===null)au(n,o,g,zn,f),Hr(n,g);else if(_n(S,n,o,f,g))g.stopPropagation();else if(Hr(n,g),o&4&&-1<ut.indexOf(n)){for(;S!==null;){var I=pa(S);if(I!==null&&Ve(I),I=po(n,o,f,g),I===null&&au(n,o,g,zn,f),I===S)break;S=I}S!==null&&g.stopPropagation()}else au(n,o,g,null,f)}}var zn=null;function po(n,o,f,g){if(zn=null,n=un(g),n=Ws(n),n!==null)if(o=sr(n),o===null)n=null;else if(f=o.tag,f===13){if(n=Wr(o),n!==null)return n;n=null}else if(f===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null);return zn=n,null}function ta(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ks()){case Ne:return 1;case mo:return 4;case Yt:case Kr:return 16;case es:return 536870912;default:return 16}default:return 16}}var di=null,na=null,go=null;function dl(){if(go)return go;var n,o=na,f=o.length,g,S="value"in di?di.value:di.textContent,I=S.length;for(n=0;n<f&&o[n]===S[n];n++);var M=f-n;for(g=1;g<=M&&o[f-g]===S[I-g];g++);return go=S.slice(n,1<g?1-g:void 0)}function Vt(n){var o=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&o===13&&(n=13)):n=o,n===10&&(n=13),32<=n||n===13?n:0}function Ls(){return!0}function js(){return!1}function Sn(n){function o(f,g,S,I,M){this._reactName=f,this._targetInst=S,this.type=g,this.nativeEvent=I,this.target=M,this.currentTarget=null;for(var H in n)n.hasOwnProperty(H)&&(f=n[H],this[H]=f?f(I):I[H]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?Ls:js,this.isPropagationStopped=js,this}return Ee(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Ls)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Ls)},persist:function(){},isPersistent:Ls}),o}var is={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},he=Sn(is),Nt=Ee({},is,{view:0,detail:0}),Wn=Sn(Nt),ss,xo,Bs,yo=Ee({},Nt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Bs&&(Bs&&n.type==="mousemove"?(ss=n.screenX-Bs.screenX,xo=n.screenY-Bs.screenY):xo=ss=0,Bs=n),ss)},movementY:function(n){return"movementY"in n?n.movementY:xo}}),fl=Sn(yo),ra=Ee({},yo,{dataTransfer:0}),Rn=Sn(ra),ia=Ee({},Nt,{relatedTarget:0}),nn=Sn(ia),wo=Ee({},is,{animationName:0,elapsedTime:0,pseudoElement:0}),Di=Sn(wo),qt=Ee({},is,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),mt=Sn(qt),Qc=Ee({},is,{data:0}),Jt=Sn(Qc),Li={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},os={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jr(n){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(n):(n=Jc[n])?!!o[n]:!1}function Fs(){return Jr}var hl=Ee({},Nt,{key:function(n){if(n.key){var o=Li[n.key]||n.key;if(o!=="Unidentified")return o}return n.type==="keypress"?(n=Vt(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?os[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fs,charCode:function(n){return n.type==="keypress"?Vt(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Vt(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),sa=Sn(hl),ml=Ee({},yo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oa=Sn(ml),eu=Ee({},Nt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fs}),as=Sn(eu),aa=Ee({},is,{propertyName:0,elapsedTime:0,pseudoElement:0}),tu=Sn(aa),Vs=Ee({},yo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),nu=Sn(Vs),Ei=[9,13,27,32],ls=b&&"CompositionEvent"in window,Kn=null;b&&"documentMode"in document&&(Kn=document.documentMode);var pl=b&&"TextEvent"in window&&!Kn,Gr=b&&(!ls||Kn&&8<Kn&&11>=Kn),gl=" ",vo=!1;function xl(n,o){switch(n){case"keyup":return Ei.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function la(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var or=!1;function ru(n,o){switch(n){case"compositionend":return la(o);case"keypress":return o.which!==32?null:(vo=!0,gl);case"textInput":return n=o.data,n===gl&&vo?null:n;default:return null}}function ca(n,o){if(or)return n==="compositionend"||!ls&&xl(n,o)?(n=dl(),go=na=di=null,or=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Gr&&o.locale!=="ko"?null:o.data;default:return null}}var Us={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lt(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o==="input"?!!Us[n.type]:o==="textarea"}function zs(n,o,f,g){Rr(g),o=vl(o,"onChange"),0<o.length&&(f=new he("onChange","change",null,f,g),n.push({event:f,listeners:o}))}var k=null,e=null;function r(n){Sh(n,0)}function s(n){var o=Eo(n);if(ce(o))return n}function l(n,o){if(n==="change")return o}var c=!1;if(b){var d;if(b){var p="oninput"in document;if(!p){var y=document.createElement("div");y.setAttribute("oninput","return;"),p=typeof y.oninput=="function"}d=p}else d=!1;c=d&&(!document.documentMode||9<document.documentMode)}function E(){k&&(k.detachEvent("onpropertychange",R),e=k=null)}function R(n){if(n.propertyName==="value"&&s(e)){var o=[];zs(o,e,n,un(n)),fr(r,o)}}function P(n,o,f){n==="focusin"?(E(),k=o,e=f,k.attachEvent("onpropertychange",R)):n==="focusout"&&E()}function D(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return s(e)}function z(n,o){if(n==="click")return s(o)}function K(n,o){if(n==="input"||n==="change")return s(o)}function ee(n,o){return n===o&&(n!==0||1/n===1/o)||n!==n&&o!==o}var se=typeof Object.is=="function"?Object.is:ee;function fe(n,o){if(se(n,o))return!0;if(typeof n!="object"||n===null||typeof o!="object"||o===null)return!1;var f=Object.keys(n),g=Object.keys(o);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var S=f[g];if(!v.call(o,S)||!se(n[S],o[S]))return!1}return!0}function Be(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Fe(n,o){var f=Be(n);n=0;for(var g;f;){if(f.nodeType===3){if(g=n+f.textContent.length,n<=o&&g>=o)return{node:f,offset:o-n};n=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Be(f)}}function Pe(n,o){return n&&o?n===o?!0:n&&n.nodeType===3?!1:o&&o.nodeType===3?Pe(n,o.parentNode):"contains"in n?n.contains(o):n.compareDocumentPosition?!!(n.compareDocumentPosition(o)&16):!1:!1}function Pt(){for(var n=window,o=pe();o instanceof n.HTMLIFrameElement;){try{var f=typeof o.contentWindow.location.href=="string"}catch{f=!1}if(f)n=o.contentWindow;else break;o=pe(n.document)}return o}function St(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o&&(o==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||o==="textarea"||n.contentEditable==="true")}function pr(n){var o=Pt(),f=n.focusedElem,g=n.selectionRange;if(o!==f&&f&&f.ownerDocument&&Pe(f.ownerDocument.documentElement,f)){if(g!==null&&St(f)){if(o=g.start,n=g.end,n===void 0&&(n=o),"selectionStart"in f)f.selectionStart=o,f.selectionEnd=Math.min(n,f.value.length);else if(n=(o=f.ownerDocument||document)&&o.defaultView||window,n.getSelection){n=n.getSelection();var S=f.textContent.length,I=Math.min(g.start,S);g=g.end===void 0?I:Math.min(g.end,S),!n.extend&&I>g&&(S=g,g=I,I=S),S=Fe(f,I);var M=Fe(f,g);S&&M&&(n.rangeCount!==1||n.anchorNode!==S.node||n.anchorOffset!==S.offset||n.focusNode!==M.node||n.focusOffset!==M.offset)&&(o=o.createRange(),o.setStart(S.node,S.offset),n.removeAllRanges(),I>g?(n.addRange(o),n.extend(M.node,M.offset)):(o.setEnd(M.node,M.offset),n.addRange(o)))}}for(o=[],n=f;n=n.parentNode;)n.nodeType===1&&o.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<o.length;f++)n=o[f],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Xr=b&&"documentMode"in document&&11>=document.documentMode,kn=null,$t=null,pn=null,ar=!1;function ji(n,o,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;ar||kn==null||kn!==pe(g)||(g=kn,"selectionStart"in g&&St(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),pn&&fe(pn,g)||(pn=g,g=vl($t,"onSelect"),0<g.length&&(o=new he("onSelect","select",null,o,f),n.push({event:o,listeners:g}),o.target=kn)))}function fi(n,o){var f={};return f[n.toLowerCase()]=o.toLowerCase(),f["Webkit"+n]="webkit"+o,f["Moz"+n]="moz"+o,f}var cs={animationend:fi("Animation","AnimationEnd"),animationiteration:fi("Animation","AnimationIteration"),animationstart:fi("Animation","AnimationStart"),transitionend:fi("Transition","TransitionEnd")},ua={},gh={};b&&(gh=document.createElement("div").style,"AnimationEvent"in window||(delete cs.animationend.animation,delete cs.animationiteration.animation,delete cs.animationstart.animation),"TransitionEvent"in window||delete cs.transitionend.transition);function yl(n){if(ua[n])return ua[n];if(!cs[n])return n;var o=cs[n],f;for(f in o)if(o.hasOwnProperty(f)&&f in gh)return ua[n]=o[f];return n}var xh=yl("animationend"),yh=yl("animationiteration"),wh=yl("animationstart"),vh=yl("transitionend"),Ch=new Map,bh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function us(n,o){Ch.set(n,o),x(o,[n])}for(var iu=0;iu<bh.length;iu++){var su=bh[iu],kx=su.toLowerCase(),Px=su[0].toUpperCase()+su.slice(1);us(kx,"on"+Px)}us(xh,"onAnimationEnd"),us(yh,"onAnimationIteration"),us(wh,"onAnimationStart"),us("dblclick","onDoubleClick"),us("focusin","onFocus"),us("focusout","onBlur"),us(vh,"onTransitionEnd"),w("onMouseEnter",["mouseout","mouseover"]),w("onMouseLeave",["mouseout","mouseover"]),w("onPointerEnter",["pointerout","pointerover"]),w("onPointerLeave",["pointerout","pointerover"]),x("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),x("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),x("onBeforeInput",["compositionend","keypress","textInput","paste"]),x("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var da="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mx=new Set("cancel close invalid load scroll toggle".split(" ").concat(da));function Eh(n,o,f){var g=n.type||"unknown-event";n.currentTarget=f,ir(g,o,void 0,n),n.currentTarget=null}function Sh(n,o){o=(o&4)!==0;for(var f=0;f<n.length;f++){var g=n[f],S=g.event;g=g.listeners;e:{var I=void 0;if(o)for(var M=g.length-1;0<=M;M--){var H=g[M],J=H.instance,me=H.currentTarget;if(H=H.listener,J!==I&&S.isPropagationStopped())break e;Eh(S,H,me),I=J}else for(M=0;M<g.length;M++){if(H=g[M],J=H.instance,me=H.currentTarget,H=H.listener,J!==I&&S.isPropagationStopped())break e;Eh(S,H,me),I=J}}}if(Un)throw n=Ke,Un=!1,Ke=null,n}function ln(n,o){var f=o[hu];f===void 0&&(f=o[hu]=new Set);var g=n+"__bubble";f.has(g)||(Ah(o,n,2,!1),f.add(g))}function ou(n,o,f){var g=0;o&&(g|=4),Ah(f,n,g,o)}var wl="_reactListening"+Math.random().toString(36).slice(2);function fa(n){if(!n[wl]){n[wl]=!0,u.forEach(function(f){f!=="selectionchange"&&(Mx.has(f)||ou(f,!1,n),ou(f,!0,n))});var o=n.nodeType===9?n:n.ownerDocument;o===null||o[wl]||(o[wl]=!0,ou("selectionchange",!1,o))}}function Ah(n,o,f,g){switch(ta(o)){case 1:var S=ul;break;case 4:S=Ds;break;default:S=Oi}f=S.bind(null,o,f,n),S=void 0,!$n||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(S=!0),g?S!==void 0?n.addEventListener(o,f,{capture:!0,passive:S}):n.addEventListener(o,f,!0):S!==void 0?n.addEventListener(o,f,{passive:S}):n.addEventListener(o,f,!1)}function au(n,o,f,g,S){var I=g;if(!(o&1)&&!(o&2)&&g!==null)e:for(;;){if(g===null)return;var M=g.tag;if(M===3||M===4){var H=g.stateNode.containerInfo;if(H===S||H.nodeType===8&&H.parentNode===S)break;if(M===4)for(M=g.return;M!==null;){var J=M.tag;if((J===3||J===4)&&(J=M.stateNode.containerInfo,J===S||J.nodeType===8&&J.parentNode===S))return;M=M.return}for(;H!==null;){if(M=Ws(H),M===null)return;if(J=M.tag,J===5||J===6){g=I=M;continue e}H=H.parentNode}}g=g.return}fr(function(){var me=I,Me=un(f),De=[];e:{var ke=Ch.get(n);if(ke!==void 0){var Je=he,it=n;switch(n){case"keypress":if(Vt(f)===0)break e;case"keydown":case"keyup":Je=sa;break;case"focusin":it="focus",Je=nn;break;case"focusout":it="blur",Je=nn;break;case"beforeblur":case"afterblur":Je=nn;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Je=fl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Je=Rn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Je=as;break;case xh:case yh:case wh:Je=Di;break;case vh:Je=tu;break;case"scroll":Je=Wn;break;case"wheel":Je=nu;break;case"copy":case"cut":case"paste":Je=mt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Je=oa}var st=(o&4)!==0,Pn=!st&&n==="scroll",ae=st?ke!==null?ke+"Capture":null:ke;st=[];for(var re=me,de;re!==null;){de=re;var He=de.stateNode;if(de.tag===5&&He!==null&&(de=He,ae!==null&&(He=Vn(re,ae),He!=null&&st.push(ha(re,He,de)))),Pn)break;re=re.return}0<st.length&&(ke=new Je(ke,it,null,f,Me),De.push({event:ke,listeners:st}))}}if(!(o&7)){e:{if(ke=n==="mouseover"||n==="pointerover",Je=n==="mouseout"||n==="pointerout",ke&&f!==Xt&&(it=f.relatedTarget||f.fromElement)&&(Ws(it)||it[Bi]))break e;if((Je||ke)&&(ke=Me.window===Me?Me:(ke=Me.ownerDocument)?ke.defaultView||ke.parentWindow:window,Je?(it=f.relatedTarget||f.toElement,Je=me,it=it?Ws(it):null,it!==null&&(Pn=sr(it),it!==Pn||it.tag!==5&&it.tag!==6)&&(it=null)):(Je=null,it=me),Je!==it)){if(st=fl,He="onMouseLeave",ae="onMouseEnter",re="mouse",(n==="pointerout"||n==="pointerover")&&(st=oa,He="onPointerLeave",ae="onPointerEnter",re="pointer"),Pn=Je==null?ke:Eo(Je),de=it==null?ke:Eo(it),ke=new st(He,re+"leave",Je,f,Me),ke.target=Pn,ke.relatedTarget=de,He=null,Ws(Me)===me&&(st=new st(ae,re+"enter",it,f,Me),st.target=de,st.relatedTarget=Pn,He=st),Pn=He,Je&&it)t:{for(st=Je,ae=it,re=0,de=st;de;de=Co(de))re++;for(de=0,He=ae;He;He=Co(He))de++;for(;0<re-de;)st=Co(st),re--;for(;0<de-re;)ae=Co(ae),de--;for(;re--;){if(st===ae||ae!==null&&st===ae.alternate)break t;st=Co(st),ae=Co(ae)}st=null}else st=null;Je!==null&&Nh(De,ke,Je,st,!1),it!==null&&Pn!==null&&Nh(De,Pn,it,st,!0)}}e:{if(ke=me?Eo(me):window,Je=ke.nodeName&&ke.nodeName.toLowerCase(),Je==="select"||Je==="input"&&ke.type==="file")var lt=l;else if(Lt(ke))if(c)lt=K;else{lt=D;var gt=P}else(Je=ke.nodeName)&&Je.toLowerCase()==="input"&&(ke.type==="checkbox"||ke.type==="radio")&&(lt=z);if(lt&&(lt=lt(n,me))){zs(De,lt,f,Me);break e}gt&&gt(n,ke,me),n==="focusout"&&(gt=ke._wrapperState)&&gt.controlled&&ke.type==="number"&&et(ke,"number",ke.value)}switch(gt=me?Eo(me):window,n){case"focusin":(Lt(gt)||gt.contentEditable==="true")&&(kn=gt,$t=me,pn=null);break;case"focusout":pn=$t=kn=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,ji(De,f,Me);break;case"selectionchange":if(Xr)break;case"keydown":case"keyup":ji(De,f,Me)}var xt;if(ls)e:{switch(n){case"compositionstart":var Ct="onCompositionStart";break e;case"compositionend":Ct="onCompositionEnd";break e;case"compositionupdate":Ct="onCompositionUpdate";break e}Ct=void 0}else or?xl(n,f)&&(Ct="onCompositionEnd"):n==="keydown"&&f.keyCode===229&&(Ct="onCompositionStart");Ct&&(Gr&&f.locale!=="ko"&&(or||Ct!=="onCompositionStart"?Ct==="onCompositionEnd"&&or&&(xt=dl()):(di=Me,na="value"in di?di.value:di.textContent,or=!0)),gt=vl(me,Ct),0<gt.length&&(Ct=new Jt(Ct,n,null,f,Me),De.push({event:Ct,listeners:gt}),xt?Ct.data=xt:(xt=la(f),xt!==null&&(Ct.data=xt)))),(xt=pl?ru(n,f):ca(n,f))&&(me=vl(me,"onBeforeInput"),0<me.length&&(Me=new Jt("onBeforeInput","beforeinput",null,f,Me),De.push({event:Me,listeners:me}),Me.data=xt))}Sh(De,o)})}function ha(n,o,f){return{instance:n,listener:o,currentTarget:f}}function vl(n,o){for(var f=o+"Capture",g=[];n!==null;){var S=n,I=S.stateNode;S.tag===5&&I!==null&&(S=I,I=Vn(n,f),I!=null&&g.unshift(ha(n,I,S)),I=Vn(n,o),I!=null&&g.push(ha(n,I,S))),n=n.return}return g}function Co(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Nh(n,o,f,g,S){for(var I=o._reactName,M=[];f!==null&&f!==g;){var H=f,J=H.alternate,me=H.stateNode;if(J!==null&&J===g)break;H.tag===5&&me!==null&&(H=me,S?(J=Vn(f,I),J!=null&&M.unshift(ha(f,J,H))):S||(J=Vn(f,I),J!=null&&M.push(ha(f,J,H)))),f=f.return}M.length!==0&&n.push({event:o,listeners:M})}var Ox=/\r\n?/g,Dx=/\u0000|\uFFFD/g;function Ih(n){return(typeof n=="string"?n:""+n).replace(Ox,`
`).replace(Dx,"")}function Cl(n,o,f){if(o=Ih(o),Ih(n)!==o&&f)throw Error(a(425))}function bl(){}var lu=null,cu=null;function uu(n,o){return n==="textarea"||n==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var du=typeof setTimeout=="function"?setTimeout:void 0,Lx=typeof clearTimeout=="function"?clearTimeout:void 0,Th=typeof Promise=="function"?Promise:void 0,jx=typeof queueMicrotask=="function"?queueMicrotask:typeof Th<"u"?function(n){return Th.resolve(null).then(n).catch(Bx)}:du;function Bx(n){setTimeout(function(){throw n})}function fu(n,o){var f=o,g=0;do{var S=f.nextSibling;if(n.removeChild(f),S&&S.nodeType===8)if(f=S.data,f==="/$"){if(g===0){n.removeChild(S),ui(o);return}g--}else f!=="$"&&f!=="$?"&&f!=="$!"||g++;f=S}while(f);ui(o)}function ds(n){for(;n!=null;n=n.nextSibling){var o=n.nodeType;if(o===1||o===3)break;if(o===8){if(o=n.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return n}function _h(n){n=n.previousSibling;for(var o=0;n;){if(n.nodeType===8){var f=n.data;if(f==="$"||f==="$!"||f==="$?"){if(o===0)return n;o--}else f==="/$"&&o++}n=n.previousSibling}return null}var bo=Math.random().toString(36).slice(2),Si="__reactFiber$"+bo,ma="__reactProps$"+bo,Bi="__reactContainer$"+bo,hu="__reactEvents$"+bo,Fx="__reactListeners$"+bo,Vx="__reactHandles$"+bo;function Ws(n){var o=n[Si];if(o)return o;for(var f=n.parentNode;f;){if(o=f[Bi]||f[Si]){if(f=o.alternate,o.child!==null||f!==null&&f.child!==null)for(n=_h(n);n!==null;){if(f=n[Si])return f;n=_h(n)}return o}n=f,f=n.parentNode}return null}function pa(n){return n=n[Si]||n[Bi],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Eo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(a(33))}function El(n){return n[ma]||null}var mu=[],So=-1;function fs(n){return{current:n}}function cn(n){0>So||(n.current=mu[So],mu[So]=null,So--)}function rn(n,o){So++,mu[So]=n.current,n.current=o}var hs={},gr=fs(hs),Or=fs(!1),Hs=hs;function Ao(n,o){var f=n.type.contextTypes;if(!f)return hs;var g=n.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===o)return g.__reactInternalMemoizedMaskedChildContext;var S={},I;for(I in f)S[I]=o[I];return g&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=o,n.__reactInternalMemoizedMaskedChildContext=S),S}function Dr(n){return n=n.childContextTypes,n!=null}function Sl(){cn(Or),cn(gr)}function Rh(n,o,f){if(gr.current!==hs)throw Error(a(168));rn(gr,o),rn(Or,f)}function kh(n,o,f){var g=n.stateNode;if(o=o.childContextTypes,typeof g.getChildContext!="function")return f;g=g.getChildContext();for(var S in g)if(!(S in o))throw Error(a(108,Re(n)||"Unknown",S));return Ee({},f,g)}function Al(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||hs,Hs=gr.current,rn(gr,n),rn(Or,Or.current),!0}function Ph(n,o,f){var g=n.stateNode;if(!g)throw Error(a(169));f?(n=kh(n,o,Hs),g.__reactInternalMemoizedMergedChildContext=n,cn(Or),cn(gr),rn(gr,n)):cn(Or),rn(Or,f)}var Fi=null,Nl=!1,pu=!1;function Mh(n){Fi===null?Fi=[n]:Fi.push(n)}function Ux(n){Nl=!0,Mh(n)}function ms(){if(!pu&&Fi!==null){pu=!0;var n=0,o=It;try{var f=Fi;for(It=1;n<f.length;n++){var g=f[n];do g=g(!0);while(g!==null)}Fi=null,Nl=!1}catch(S){throw Fi!==null&&(Fi=Fi.slice(n+1)),Cr(Ne,ms),S}finally{It=o,pu=!1}}return null}var No=[],Io=0,Il=null,Tl=0,ei=[],ti=0,Gs=null,Vi=1,Ui="";function Xs(n,o){No[Io++]=Tl,No[Io++]=Il,Il=n,Tl=o}function Oh(n,o,f){ei[ti++]=Vi,ei[ti++]=Ui,ei[ti++]=Gs,Gs=n;var g=Vi;n=Ui;var S=32-Ln(g)-1;g&=~(1<<S),f+=1;var I=32-Ln(o)+S;if(30<I){var M=S-S%5;I=(g&(1<<M)-1).toString(32),g>>=M,S-=M,Vi=1<<32-Ln(o)+S|f<<S|g,Ui=I+n}else Vi=1<<I|f<<S|g,Ui=n}function gu(n){n.return!==null&&(Xs(n,1),Oh(n,1,0))}function xu(n){for(;n===Il;)Il=No[--Io],No[Io]=null,Tl=No[--Io],No[Io]=null;for(;n===Gs;)Gs=ei[--ti],ei[ti]=null,Ui=ei[--ti],ei[ti]=null,Vi=ei[--ti],ei[ti]=null}var Yr=null,$r=null,fn=!1,hi=null;function Dh(n,o){var f=si(5,null,null,0);f.elementType="DELETED",f.stateNode=o,f.return=n,o=n.deletions,o===null?(n.deletions=[f],n.flags|=16):o.push(f)}function Lh(n,o){switch(n.tag){case 5:var f=n.type;return o=o.nodeType!==1||f.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(n.stateNode=o,Yr=n,$r=ds(o.firstChild),!0):!1;case 6:return o=n.pendingProps===""||o.nodeType!==3?null:o,o!==null?(n.stateNode=o,Yr=n,$r=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(f=Gs!==null?{id:Vi,overflow:Ui}:null,n.memoizedState={dehydrated:o,treeContext:f,retryLane:1073741824},f=si(18,null,null,0),f.stateNode=o,f.return=n,n.child=f,Yr=n,$r=null,!0):!1;default:return!1}}function yu(n){return(n.mode&1)!==0&&(n.flags&128)===0}function wu(n){if(fn){var o=$r;if(o){var f=o;if(!Lh(n,o)){if(yu(n))throw Error(a(418));o=ds(f.nextSibling);var g=Yr;o&&Lh(n,o)?Dh(g,f):(n.flags=n.flags&-4097|2,fn=!1,Yr=n)}}else{if(yu(n))throw Error(a(418));n.flags=n.flags&-4097|2,fn=!1,Yr=n}}}function jh(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Yr=n}function _l(n){if(n!==Yr)return!1;if(!fn)return jh(n),fn=!0,!1;var o;if((o=n.tag!==3)&&!(o=n.tag!==5)&&(o=n.type,o=o!=="head"&&o!=="body"&&!uu(n.type,n.memoizedProps)),o&&(o=$r)){if(yu(n))throw Bh(),Error(a(418));for(;o;)Dh(n,o),o=ds(o.nextSibling)}if(jh(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));e:{for(n=n.nextSibling,o=0;n;){if(n.nodeType===8){var f=n.data;if(f==="/$"){if(o===0){$r=ds(n.nextSibling);break e}o--}else f!=="$"&&f!=="$!"&&f!=="$?"||o++}n=n.nextSibling}$r=null}}else $r=Yr?ds(n.stateNode.nextSibling):null;return!0}function Bh(){for(var n=$r;n;)n=ds(n.nextSibling)}function To(){$r=Yr=null,fn=!1}function vu(n){hi===null?hi=[n]:hi.push(n)}var zx=Z.ReactCurrentBatchConfig;function ga(n,o,f){if(n=f.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(a(309));var g=f.stateNode}if(!g)throw Error(a(147,n));var S=g,I=""+n;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===I?o.ref:(o=function(M){var H=S.refs;M===null?delete H[I]:H[I]=M},o._stringRef=I,o)}if(typeof n!="string")throw Error(a(284));if(!f._owner)throw Error(a(290,n))}return n}function Rl(n,o){throw n=Object.prototype.toString.call(o),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":n))}function Fh(n){var o=n._init;return o(n._payload)}function Vh(n){function o(ae,re){if(n){var de=ae.deletions;de===null?(ae.deletions=[re],ae.flags|=16):de.push(re)}}function f(ae,re){if(!n)return null;for(;re!==null;)o(ae,re),re=re.sibling;return null}function g(ae,re){for(ae=new Map;re!==null;)re.key!==null?ae.set(re.key,re):ae.set(re.index,re),re=re.sibling;return ae}function S(ae,re){return ae=bs(ae,re),ae.index=0,ae.sibling=null,ae}function I(ae,re,de){return ae.index=de,n?(de=ae.alternate,de!==null?(de=de.index,de<re?(ae.flags|=2,re):de):(ae.flags|=2,re)):(ae.flags|=1048576,re)}function M(ae){return n&&ae.alternate===null&&(ae.flags|=2),ae}function H(ae,re,de,He){return re===null||re.tag!==6?(re=dd(de,ae.mode,He),re.return=ae,re):(re=S(re,de),re.return=ae,re)}function J(ae,re,de,He){var lt=de.type;return lt===q?Me(ae,re,de.props.children,He,de.key):re!==null&&(re.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===Le&&Fh(lt)===re.type)?(He=S(re,de.props),He.ref=ga(ae,re,de),He.return=ae,He):(He=ec(de.type,de.key,de.props,null,ae.mode,He),He.ref=ga(ae,re,de),He.return=ae,He)}function me(ae,re,de,He){return re===null||re.tag!==4||re.stateNode.containerInfo!==de.containerInfo||re.stateNode.implementation!==de.implementation?(re=fd(de,ae.mode,He),re.return=ae,re):(re=S(re,de.children||[]),re.return=ae,re)}function Me(ae,re,de,He,lt){return re===null||re.tag!==7?(re=eo(de,ae.mode,He,lt),re.return=ae,re):(re=S(re,de),re.return=ae,re)}function De(ae,re,de){if(typeof re=="string"&&re!==""||typeof re=="number")return re=dd(""+re,ae.mode,de),re.return=ae,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case Q:return de=ec(re.type,re.key,re.props,null,ae.mode,de),de.ref=ga(ae,null,re),de.return=ae,de;case ne:return re=fd(re,ae.mode,de),re.return=ae,re;case Le:var He=re._init;return De(ae,He(re._payload),de)}if(Et(re)||_e(re))return re=eo(re,ae.mode,de,null),re.return=ae,re;Rl(ae,re)}return null}function ke(ae,re,de,He){var lt=re!==null?re.key:null;if(typeof de=="string"&&de!==""||typeof de=="number")return lt!==null?null:H(ae,re,""+de,He);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case Q:return de.key===lt?J(ae,re,de,He):null;case ne:return de.key===lt?me(ae,re,de,He):null;case Le:return lt=de._init,ke(ae,re,lt(de._payload),He)}if(Et(de)||_e(de))return lt!==null?null:Me(ae,re,de,He,null);Rl(ae,de)}return null}function Je(ae,re,de,He,lt){if(typeof He=="string"&&He!==""||typeof He=="number")return ae=ae.get(de)||null,H(re,ae,""+He,lt);if(typeof He=="object"&&He!==null){switch(He.$$typeof){case Q:return ae=ae.get(He.key===null?de:He.key)||null,J(re,ae,He,lt);case ne:return ae=ae.get(He.key===null?de:He.key)||null,me(re,ae,He,lt);case Le:var gt=He._init;return Je(ae,re,de,gt(He._payload),lt)}if(Et(He)||_e(He))return ae=ae.get(de)||null,Me(re,ae,He,lt,null);Rl(re,He)}return null}function it(ae,re,de,He){for(var lt=null,gt=null,xt=re,Ct=re=0,Jn=null;xt!==null&&Ct<de.length;Ct++){xt.index>Ct?(Jn=xt,xt=null):Jn=xt.sibling;var Ht=ke(ae,xt,de[Ct],He);if(Ht===null){xt===null&&(xt=Jn);break}n&&xt&&Ht.alternate===null&&o(ae,xt),re=I(Ht,re,Ct),gt===null?lt=Ht:gt.sibling=Ht,gt=Ht,xt=Jn}if(Ct===de.length)return f(ae,xt),fn&&Xs(ae,Ct),lt;if(xt===null){for(;Ct<de.length;Ct++)xt=De(ae,de[Ct],He),xt!==null&&(re=I(xt,re,Ct),gt===null?lt=xt:gt.sibling=xt,gt=xt);return fn&&Xs(ae,Ct),lt}for(xt=g(ae,xt);Ct<de.length;Ct++)Jn=Je(xt,ae,Ct,de[Ct],He),Jn!==null&&(n&&Jn.alternate!==null&&xt.delete(Jn.key===null?Ct:Jn.key),re=I(Jn,re,Ct),gt===null?lt=Jn:gt.sibling=Jn,gt=Jn);return n&&xt.forEach(function(Es){return o(ae,Es)}),fn&&Xs(ae,Ct),lt}function st(ae,re,de,He){var lt=_e(de);if(typeof lt!="function")throw Error(a(150));if(de=lt.call(de),de==null)throw Error(a(151));for(var gt=lt=null,xt=re,Ct=re=0,Jn=null,Ht=de.next();xt!==null&&!Ht.done;Ct++,Ht=de.next()){xt.index>Ct?(Jn=xt,xt=null):Jn=xt.sibling;var Es=ke(ae,xt,Ht.value,He);if(Es===null){xt===null&&(xt=Jn);break}n&&xt&&Es.alternate===null&&o(ae,xt),re=I(Es,re,Ct),gt===null?lt=Es:gt.sibling=Es,gt=Es,xt=Jn}if(Ht.done)return f(ae,xt),fn&&Xs(ae,Ct),lt;if(xt===null){for(;!Ht.done;Ct++,Ht=de.next())Ht=De(ae,Ht.value,He),Ht!==null&&(re=I(Ht,re,Ct),gt===null?lt=Ht:gt.sibling=Ht,gt=Ht);return fn&&Xs(ae,Ct),lt}for(xt=g(ae,xt);!Ht.done;Ct++,Ht=de.next())Ht=Je(xt,ae,Ct,Ht.value,He),Ht!==null&&(n&&Ht.alternate!==null&&xt.delete(Ht.key===null?Ct:Ht.key),re=I(Ht,re,Ct),gt===null?lt=Ht:gt.sibling=Ht,gt=Ht);return n&&xt.forEach(function(C2){return o(ae,C2)}),fn&&Xs(ae,Ct),lt}function Pn(ae,re,de,He){if(typeof de=="object"&&de!==null&&de.type===q&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case Q:e:{for(var lt=de.key,gt=re;gt!==null;){if(gt.key===lt){if(lt=de.type,lt===q){if(gt.tag===7){f(ae,gt.sibling),re=S(gt,de.props.children),re.return=ae,ae=re;break e}}else if(gt.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===Le&&Fh(lt)===gt.type){f(ae,gt.sibling),re=S(gt,de.props),re.ref=ga(ae,gt,de),re.return=ae,ae=re;break e}f(ae,gt);break}else o(ae,gt);gt=gt.sibling}de.type===q?(re=eo(de.props.children,ae.mode,He,de.key),re.return=ae,ae=re):(He=ec(de.type,de.key,de.props,null,ae.mode,He),He.ref=ga(ae,re,de),He.return=ae,ae=He)}return M(ae);case ne:e:{for(gt=de.key;re!==null;){if(re.key===gt)if(re.tag===4&&re.stateNode.containerInfo===de.containerInfo&&re.stateNode.implementation===de.implementation){f(ae,re.sibling),re=S(re,de.children||[]),re.return=ae,ae=re;break e}else{f(ae,re);break}else o(ae,re);re=re.sibling}re=fd(de,ae.mode,He),re.return=ae,ae=re}return M(ae);case Le:return gt=de._init,Pn(ae,re,gt(de._payload),He)}if(Et(de))return it(ae,re,de,He);if(_e(de))return st(ae,re,de,He);Rl(ae,de)}return typeof de=="string"&&de!==""||typeof de=="number"?(de=""+de,re!==null&&re.tag===6?(f(ae,re.sibling),re=S(re,de),re.return=ae,ae=re):(f(ae,re),re=dd(de,ae.mode,He),re.return=ae,ae=re),M(ae)):f(ae,re)}return Pn}var _o=Vh(!0),Uh=Vh(!1),kl=fs(null),Pl=null,Ro=null,Cu=null;function bu(){Cu=Ro=Pl=null}function Eu(n){var o=kl.current;cn(kl),n._currentValue=o}function Su(n,o,f){for(;n!==null;){var g=n.alternate;if((n.childLanes&o)!==o?(n.childLanes|=o,g!==null&&(g.childLanes|=o)):g!==null&&(g.childLanes&o)!==o&&(g.childLanes|=o),n===f)break;n=n.return}}function ko(n,o){Pl=n,Cu=Ro=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&o&&(Lr=!0),n.firstContext=null)}function ni(n){var o=n._currentValue;if(Cu!==n)if(n={context:n,memoizedValue:o,next:null},Ro===null){if(Pl===null)throw Error(a(308));Ro=n,Pl.dependencies={lanes:0,firstContext:n}}else Ro=Ro.next=n;return o}var Ys=null;function Au(n){Ys===null?Ys=[n]:Ys.push(n)}function zh(n,o,f,g){var S=o.interleaved;return S===null?(f.next=f,Au(o)):(f.next=S.next,S.next=f),o.interleaved=f,zi(n,g)}function zi(n,o){n.lanes|=o;var f=n.alternate;for(f!==null&&(f.lanes|=o),f=n,n=n.return;n!==null;)n.childLanes|=o,f=n.alternate,f!==null&&(f.childLanes|=o),f=n,n=n.return;return f.tag===3?f.stateNode:null}var ps=!1;function Nu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wh(n,o){n=n.updateQueue,o.updateQueue===n&&(o.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Wi(n,o){return{eventTime:n,lane:o,tag:0,payload:null,callback:null,next:null}}function gs(n,o,f){var g=n.updateQueue;if(g===null)return null;if(g=g.shared,Ut&2){var S=g.pending;return S===null?o.next=o:(o.next=S.next,S.next=o),g.pending=o,zi(n,f)}return S=g.interleaved,S===null?(o.next=o,Au(g)):(o.next=S.next,S.next=o),g.interleaved=o,zi(n,f)}function Ml(n,o,f){if(o=o.updateQueue,o!==null&&(o=o.shared,(f&4194240)!==0)){var g=o.lanes;g&=n.pendingLanes,f|=g,o.lanes=f,on(n,f)}}function Hh(n,o){var f=n.updateQueue,g=n.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var S=null,I=null;if(f=f.firstBaseUpdate,f!==null){do{var M={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};I===null?S=I=M:I=I.next=M,f=f.next}while(f!==null);I===null?S=I=o:I=I.next=o}else S=I=o;f={baseState:g.baseState,firstBaseUpdate:S,lastBaseUpdate:I,shared:g.shared,effects:g.effects},n.updateQueue=f;return}n=f.lastBaseUpdate,n===null?f.firstBaseUpdate=o:n.next=o,f.lastBaseUpdate=o}function Ol(n,o,f,g){var S=n.updateQueue;ps=!1;var I=S.firstBaseUpdate,M=S.lastBaseUpdate,H=S.shared.pending;if(H!==null){S.shared.pending=null;var J=H,me=J.next;J.next=null,M===null?I=me:M.next=me,M=J;var Me=n.alternate;Me!==null&&(Me=Me.updateQueue,H=Me.lastBaseUpdate,H!==M&&(H===null?Me.firstBaseUpdate=me:H.next=me,Me.lastBaseUpdate=J))}if(I!==null){var De=S.baseState;M=0,Me=me=J=null,H=I;do{var ke=H.lane,Je=H.eventTime;if((g&ke)===ke){Me!==null&&(Me=Me.next={eventTime:Je,lane:0,tag:H.tag,payload:H.payload,callback:H.callback,next:null});e:{var it=n,st=H;switch(ke=o,Je=f,st.tag){case 1:if(it=st.payload,typeof it=="function"){De=it.call(Je,De,ke);break e}De=it;break e;case 3:it.flags=it.flags&-65537|128;case 0:if(it=st.payload,ke=typeof it=="function"?it.call(Je,De,ke):it,ke==null)break e;De=Ee({},De,ke);break e;case 2:ps=!0}}H.callback!==null&&H.lane!==0&&(n.flags|=64,ke=S.effects,ke===null?S.effects=[H]:ke.push(H))}else Je={eventTime:Je,lane:ke,tag:H.tag,payload:H.payload,callback:H.callback,next:null},Me===null?(me=Me=Je,J=De):Me=Me.next=Je,M|=ke;if(H=H.next,H===null){if(H=S.shared.pending,H===null)break;ke=H,H=ke.next,ke.next=null,S.lastBaseUpdate=ke,S.shared.pending=null}}while(!0);if(Me===null&&(J=De),S.baseState=J,S.firstBaseUpdate=me,S.lastBaseUpdate=Me,o=S.shared.interleaved,o!==null){S=o;do M|=S.lane,S=S.next;while(S!==o)}else I===null&&(S.shared.lanes=0);Ks|=M,n.lanes=M,n.memoizedState=De}}function Gh(n,o,f){if(n=o.effects,o.effects=null,n!==null)for(o=0;o<n.length;o++){var g=n[o],S=g.callback;if(S!==null){if(g.callback=null,g=f,typeof S!="function")throw Error(a(191,S));S.call(g)}}}var xa={},Ai=fs(xa),ya=fs(xa),wa=fs(xa);function $s(n){if(n===xa)throw Error(a(174));return n}function Iu(n,o){switch(rn(wa,o),rn(ya,n),rn(Ai,xa),n=o.nodeType,n){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:ht(null,"");break;default:n=n===8?o.parentNode:o,o=n.namespaceURI||null,n=n.tagName,o=ht(o,n)}cn(Ai),rn(Ai,o)}function Po(){cn(Ai),cn(ya),cn(wa)}function Xh(n){$s(wa.current);var o=$s(Ai.current),f=ht(o,n.type);o!==f&&(rn(ya,n),rn(Ai,f))}function Tu(n){ya.current===n&&(cn(Ai),cn(ya))}var gn=fs(0);function Dl(n){for(var o=n;o!==null;){if(o.tag===13){var f=o.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var _u=[];function Ru(){for(var n=0;n<_u.length;n++)_u[n]._workInProgressVersionPrimary=null;_u.length=0}var Ll=Z.ReactCurrentDispatcher,ku=Z.ReactCurrentBatchConfig,Zs=0,xn=null,Hn=null,qn=null,jl=!1,va=!1,Ca=0,Wx=0;function xr(){throw Error(a(321))}function Pu(n,o){if(o===null)return!1;for(var f=0;f<o.length&&f<n.length;f++)if(!se(n[f],o[f]))return!1;return!0}function Mu(n,o,f,g,S,I){if(Zs=I,xn=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Ll.current=n===null||n.memoizedState===null?Yx:$x,n=f(g,S),va){I=0;do{if(va=!1,Ca=0,25<=I)throw Error(a(301));I+=1,qn=Hn=null,o.updateQueue=null,Ll.current=Zx,n=f(g,S)}while(va)}if(Ll.current=Vl,o=Hn!==null&&Hn.next!==null,Zs=0,qn=Hn=xn=null,jl=!1,o)throw Error(a(300));return n}function Ou(){var n=Ca!==0;return Ca=0,n}function Ni(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qn===null?xn.memoizedState=qn=n:qn=qn.next=n,qn}function ri(){if(Hn===null){var n=xn.alternate;n=n!==null?n.memoizedState:null}else n=Hn.next;var o=qn===null?xn.memoizedState:qn.next;if(o!==null)qn=o,Hn=n;else{if(n===null)throw Error(a(310));Hn=n,n={memoizedState:Hn.memoizedState,baseState:Hn.baseState,baseQueue:Hn.baseQueue,queue:Hn.queue,next:null},qn===null?xn.memoizedState=qn=n:qn=qn.next=n}return qn}function ba(n,o){return typeof o=="function"?o(n):o}function Du(n){var o=ri(),f=o.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=n;var g=Hn,S=g.baseQueue,I=f.pending;if(I!==null){if(S!==null){var M=S.next;S.next=I.next,I.next=M}g.baseQueue=S=I,f.pending=null}if(S!==null){I=S.next,g=g.baseState;var H=M=null,J=null,me=I;do{var Me=me.lane;if((Zs&Me)===Me)J!==null&&(J=J.next={lane:0,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),g=me.hasEagerState?me.eagerState:n(g,me.action);else{var De={lane:Me,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null};J===null?(H=J=De,M=g):J=J.next=De,xn.lanes|=Me,Ks|=Me}me=me.next}while(me!==null&&me!==I);J===null?M=g:J.next=H,se(g,o.memoizedState)||(Lr=!0),o.memoizedState=g,o.baseState=M,o.baseQueue=J,f.lastRenderedState=g}if(n=f.interleaved,n!==null){S=n;do I=S.lane,xn.lanes|=I,Ks|=I,S=S.next;while(S!==n)}else S===null&&(f.lanes=0);return[o.memoizedState,f.dispatch]}function Lu(n){var o=ri(),f=o.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=n;var g=f.dispatch,S=f.pending,I=o.memoizedState;if(S!==null){f.pending=null;var M=S=S.next;do I=n(I,M.action),M=M.next;while(M!==S);se(I,o.memoizedState)||(Lr=!0),o.memoizedState=I,o.baseQueue===null&&(o.baseState=I),f.lastRenderedState=I}return[I,g]}function Yh(){}function $h(n,o){var f=xn,g=ri(),S=o(),I=!se(g.memoizedState,S);if(I&&(g.memoizedState=S,Lr=!0),g=g.queue,ju(qh.bind(null,f,g,n),[n]),g.getSnapshot!==o||I||qn!==null&&qn.memoizedState.tag&1){if(f.flags|=2048,Ea(9,Kh.bind(null,f,g,S,o),void 0,null),Qn===null)throw Error(a(349));Zs&30||Zh(f,o,S)}return S}function Zh(n,o,f){n.flags|=16384,n={getSnapshot:o,value:f},o=xn.updateQueue,o===null?(o={lastEffect:null,stores:null},xn.updateQueue=o,o.stores=[n]):(f=o.stores,f===null?o.stores=[n]:f.push(n))}function Kh(n,o,f,g){o.value=f,o.getSnapshot=g,Qh(o)&&Jh(n)}function qh(n,o,f){return f(function(){Qh(o)&&Jh(n)})}function Qh(n){var o=n.getSnapshot;n=n.value;try{var f=o();return!se(n,f)}catch{return!0}}function Jh(n){var o=zi(n,1);o!==null&&xi(o,n,1,-1)}function e0(n){var o=Ni();return typeof n=="function"&&(n=n()),o.memoizedState=o.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:n},o.queue=n,n=n.dispatch=Xx.bind(null,xn,n),[o.memoizedState,n]}function Ea(n,o,f,g){return n={tag:n,create:o,destroy:f,deps:g,next:null},o=xn.updateQueue,o===null?(o={lastEffect:null,stores:null},xn.updateQueue=o,o.lastEffect=n.next=n):(f=o.lastEffect,f===null?o.lastEffect=n.next=n:(g=f.next,f.next=n,n.next=g,o.lastEffect=n)),n}function t0(){return ri().memoizedState}function Bl(n,o,f,g){var S=Ni();xn.flags|=n,S.memoizedState=Ea(1|o,f,void 0,g===void 0?null:g)}function Fl(n,o,f,g){var S=ri();g=g===void 0?null:g;var I=void 0;if(Hn!==null){var M=Hn.memoizedState;if(I=M.destroy,g!==null&&Pu(g,M.deps)){S.memoizedState=Ea(o,f,I,g);return}}xn.flags|=n,S.memoizedState=Ea(1|o,f,I,g)}function n0(n,o){return Bl(8390656,8,n,o)}function ju(n,o){return Fl(2048,8,n,o)}function r0(n,o){return Fl(4,2,n,o)}function i0(n,o){return Fl(4,4,n,o)}function s0(n,o){if(typeof o=="function")return n=n(),o(n),function(){o(null)};if(o!=null)return n=n(),o.current=n,function(){o.current=null}}function o0(n,o,f){return f=f!=null?f.concat([n]):null,Fl(4,4,s0.bind(null,o,n),f)}function Bu(){}function a0(n,o){var f=ri();o=o===void 0?null:o;var g=f.memoizedState;return g!==null&&o!==null&&Pu(o,g[1])?g[0]:(f.memoizedState=[n,o],n)}function l0(n,o){var f=ri();o=o===void 0?null:o;var g=f.memoizedState;return g!==null&&o!==null&&Pu(o,g[1])?g[0]:(n=n(),f.memoizedState=[n,o],n)}function c0(n,o,f){return Zs&21?(se(f,o)||(f=En(),xn.lanes|=f,Ks|=f,n.baseState=!0),o):(n.baseState&&(n.baseState=!1,Lr=!0),n.memoizedState=f)}function Hx(n,o){var f=It;It=f!==0&&4>f?f:4,n(!0);var g=ku.transition;ku.transition={};try{n(!1),o()}finally{It=f,ku.transition=g}}function u0(){return ri().memoizedState}function Gx(n,o,f){var g=vs(n);if(f={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null},d0(n))f0(o,f);else if(f=zh(n,o,f,g),f!==null){var S=Nr();xi(f,n,g,S),h0(f,o,g)}}function Xx(n,o,f){var g=vs(n),S={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null};if(d0(n))f0(o,S);else{var I=n.alternate;if(n.lanes===0&&(I===null||I.lanes===0)&&(I=o.lastRenderedReducer,I!==null))try{var M=o.lastRenderedState,H=I(M,f);if(S.hasEagerState=!0,S.eagerState=H,se(H,M)){var J=o.interleaved;J===null?(S.next=S,Au(o)):(S.next=J.next,J.next=S),o.interleaved=S;return}}catch{}finally{}f=zh(n,o,S,g),f!==null&&(S=Nr(),xi(f,n,g,S),h0(f,o,g))}}function d0(n){var o=n.alternate;return n===xn||o!==null&&o===xn}function f0(n,o){va=jl=!0;var f=n.pending;f===null?o.next=o:(o.next=f.next,f.next=o),n.pending=o}function h0(n,o,f){if(f&4194240){var g=o.lanes;g&=n.pendingLanes,f|=g,o.lanes=f,on(n,f)}}var Vl={readContext:ni,useCallback:xr,useContext:xr,useEffect:xr,useImperativeHandle:xr,useInsertionEffect:xr,useLayoutEffect:xr,useMemo:xr,useReducer:xr,useRef:xr,useState:xr,useDebugValue:xr,useDeferredValue:xr,useTransition:xr,useMutableSource:xr,useSyncExternalStore:xr,useId:xr,unstable_isNewReconciler:!1},Yx={readContext:ni,useCallback:function(n,o){return Ni().memoizedState=[n,o===void 0?null:o],n},useContext:ni,useEffect:n0,useImperativeHandle:function(n,o,f){return f=f!=null?f.concat([n]):null,Bl(4194308,4,s0.bind(null,o,n),f)},useLayoutEffect:function(n,o){return Bl(4194308,4,n,o)},useInsertionEffect:function(n,o){return Bl(4,2,n,o)},useMemo:function(n,o){var f=Ni();return o=o===void 0?null:o,n=n(),f.memoizedState=[n,o],n},useReducer:function(n,o,f){var g=Ni();return o=f!==void 0?f(o):o,g.memoizedState=g.baseState=o,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:o},g.queue=n,n=n.dispatch=Gx.bind(null,xn,n),[g.memoizedState,n]},useRef:function(n){var o=Ni();return n={current:n},o.memoizedState=n},useState:e0,useDebugValue:Bu,useDeferredValue:function(n){return Ni().memoizedState=n},useTransition:function(){var n=e0(!1),o=n[0];return n=Hx.bind(null,n[1]),Ni().memoizedState=n,[o,n]},useMutableSource:function(){},useSyncExternalStore:function(n,o,f){var g=xn,S=Ni();if(fn){if(f===void 0)throw Error(a(407));f=f()}else{if(f=o(),Qn===null)throw Error(a(349));Zs&30||Zh(g,o,f)}S.memoizedState=f;var I={value:f,getSnapshot:o};return S.queue=I,n0(qh.bind(null,g,I,n),[n]),g.flags|=2048,Ea(9,Kh.bind(null,g,I,f,o),void 0,null),f},useId:function(){var n=Ni(),o=Qn.identifierPrefix;if(fn){var f=Ui,g=Vi;f=(g&~(1<<32-Ln(g)-1)).toString(32)+f,o=":"+o+"R"+f,f=Ca++,0<f&&(o+="H"+f.toString(32)),o+=":"}else f=Wx++,o=":"+o+"r"+f.toString(32)+":";return n.memoizedState=o},unstable_isNewReconciler:!1},$x={readContext:ni,useCallback:a0,useContext:ni,useEffect:ju,useImperativeHandle:o0,useInsertionEffect:r0,useLayoutEffect:i0,useMemo:l0,useReducer:Du,useRef:t0,useState:function(){return Du(ba)},useDebugValue:Bu,useDeferredValue:function(n){var o=ri();return c0(o,Hn.memoizedState,n)},useTransition:function(){var n=Du(ba)[0],o=ri().memoizedState;return[n,o]},useMutableSource:Yh,useSyncExternalStore:$h,useId:u0,unstable_isNewReconciler:!1},Zx={readContext:ni,useCallback:a0,useContext:ni,useEffect:ju,useImperativeHandle:o0,useInsertionEffect:r0,useLayoutEffect:i0,useMemo:l0,useReducer:Lu,useRef:t0,useState:function(){return Lu(ba)},useDebugValue:Bu,useDeferredValue:function(n){var o=ri();return Hn===null?o.memoizedState=n:c0(o,Hn.memoizedState,n)},useTransition:function(){var n=Lu(ba)[0],o=ri().memoizedState;return[n,o]},useMutableSource:Yh,useSyncExternalStore:$h,useId:u0,unstable_isNewReconciler:!1};function mi(n,o){if(n&&n.defaultProps){o=Ee({},o),n=n.defaultProps;for(var f in n)o[f]===void 0&&(o[f]=n[f]);return o}return o}function Fu(n,o,f,g){o=n.memoizedState,f=f(g,o),f=f==null?o:Ee({},o,f),n.memoizedState=f,n.lanes===0&&(n.updateQueue.baseState=f)}var Ul={isMounted:function(n){return(n=n._reactInternals)?sr(n)===n:!1},enqueueSetState:function(n,o,f){n=n._reactInternals;var g=Nr(),S=vs(n),I=Wi(g,S);I.payload=o,f!=null&&(I.callback=f),o=gs(n,I,S),o!==null&&(xi(o,n,S,g),Ml(o,n,S))},enqueueReplaceState:function(n,o,f){n=n._reactInternals;var g=Nr(),S=vs(n),I=Wi(g,S);I.tag=1,I.payload=o,f!=null&&(I.callback=f),o=gs(n,I,S),o!==null&&(xi(o,n,S,g),Ml(o,n,S))},enqueueForceUpdate:function(n,o){n=n._reactInternals;var f=Nr(),g=vs(n),S=Wi(f,g);S.tag=2,o!=null&&(S.callback=o),o=gs(n,S,g),o!==null&&(xi(o,n,g,f),Ml(o,n,g))}};function m0(n,o,f,g,S,I,M){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(g,I,M):o.prototype&&o.prototype.isPureReactComponent?!fe(f,g)||!fe(S,I):!0}function p0(n,o,f){var g=!1,S=hs,I=o.contextType;return typeof I=="object"&&I!==null?I=ni(I):(S=Dr(o)?Hs:gr.current,g=o.contextTypes,I=(g=g!=null)?Ao(n,S):hs),o=new o(f,I),n.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Ul,n.stateNode=o,o._reactInternals=n,g&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=S,n.__reactInternalMemoizedMaskedChildContext=I),o}function g0(n,o,f,g){n=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(f,g),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(f,g),o.state!==n&&Ul.enqueueReplaceState(o,o.state,null)}function Vu(n,o,f,g){var S=n.stateNode;S.props=f,S.state=n.memoizedState,S.refs={},Nu(n);var I=o.contextType;typeof I=="object"&&I!==null?S.context=ni(I):(I=Dr(o)?Hs:gr.current,S.context=Ao(n,I)),S.state=n.memoizedState,I=o.getDerivedStateFromProps,typeof I=="function"&&(Fu(n,o,I,f),S.state=n.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(o=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),o!==S.state&&Ul.enqueueReplaceState(S,S.state,null),Ol(n,f,S,g),S.state=n.memoizedState),typeof S.componentDidMount=="function"&&(n.flags|=4194308)}function Mo(n,o){try{var f="",g=o;do f+=ue(g),g=g.return;while(g);var S=f}catch(I){S=`
Error generating stack: `+I.message+`
`+I.stack}return{value:n,source:o,stack:S,digest:null}}function Uu(n,o,f){return{value:n,source:null,stack:f??null,digest:o??null}}function zu(n,o){try{console.error(o.value)}catch(f){setTimeout(function(){throw f})}}var Kx=typeof WeakMap=="function"?WeakMap:Map;function x0(n,o,f){f=Wi(-1,f),f.tag=3,f.payload={element:null};var g=o.value;return f.callback=function(){$l||($l=!0,rd=g),zu(n,o)},f}function y0(n,o,f){f=Wi(-1,f),f.tag=3;var g=n.type.getDerivedStateFromError;if(typeof g=="function"){var S=o.value;f.payload=function(){return g(S)},f.callback=function(){zu(n,o)}}var I=n.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(f.callback=function(){zu(n,o),typeof g!="function"&&(ys===null?ys=new Set([this]):ys.add(this));var M=o.stack;this.componentDidCatch(o.value,{componentStack:M!==null?M:""})}),f}function w0(n,o,f){var g=n.pingCache;if(g===null){g=n.pingCache=new Kx;var S=new Set;g.set(o,S)}else S=g.get(o),S===void 0&&(S=new Set,g.set(o,S));S.has(f)||(S.add(f),n=u2.bind(null,n,o,f),o.then(n,n))}function v0(n){do{var o;if((o=n.tag===13)&&(o=n.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return n;n=n.return}while(n!==null);return null}function C0(n,o,f,g,S){return n.mode&1?(n.flags|=65536,n.lanes=S,n):(n===o?n.flags|=65536:(n.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(o=Wi(-1,1),o.tag=2,gs(f,o,1))),f.lanes|=1),n)}var qx=Z.ReactCurrentOwner,Lr=!1;function Ar(n,o,f,g){o.child=n===null?Uh(o,null,f,g):_o(o,n.child,f,g)}function b0(n,o,f,g,S){f=f.render;var I=o.ref;return ko(o,S),g=Mu(n,o,f,g,I,S),f=Ou(),n!==null&&!Lr?(o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~S,Hi(n,o,S)):(fn&&f&&gu(o),o.flags|=1,Ar(n,o,g,S),o.child)}function E0(n,o,f,g,S){if(n===null){var I=f.type;return typeof I=="function"&&!ud(I)&&I.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(o.tag=15,o.type=I,S0(n,o,I,g,S)):(n=ec(f.type,null,g,o,o.mode,S),n.ref=o.ref,n.return=o,o.child=n)}if(I=n.child,!(n.lanes&S)){var M=I.memoizedProps;if(f=f.compare,f=f!==null?f:fe,f(M,g)&&n.ref===o.ref)return Hi(n,o,S)}return o.flags|=1,n=bs(I,g),n.ref=o.ref,n.return=o,o.child=n}function S0(n,o,f,g,S){if(n!==null){var I=n.memoizedProps;if(fe(I,g)&&n.ref===o.ref)if(Lr=!1,o.pendingProps=g=I,(n.lanes&S)!==0)n.flags&131072&&(Lr=!0);else return o.lanes=n.lanes,Hi(n,o,S)}return Wu(n,o,f,g,S)}function A0(n,o,f){var g=o.pendingProps,S=g.children,I=n!==null?n.memoizedState:null;if(g.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},rn(Do,Zr),Zr|=f;else{if(!(f&1073741824))return n=I!==null?I.baseLanes|f:f,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:n,cachePool:null,transitions:null},o.updateQueue=null,rn(Do,Zr),Zr|=n,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=I!==null?I.baseLanes:f,rn(Do,Zr),Zr|=g}else I!==null?(g=I.baseLanes|f,o.memoizedState=null):g=f,rn(Do,Zr),Zr|=g;return Ar(n,o,S,f),o.child}function N0(n,o){var f=o.ref;(n===null&&f!==null||n!==null&&n.ref!==f)&&(o.flags|=512,o.flags|=2097152)}function Wu(n,o,f,g,S){var I=Dr(f)?Hs:gr.current;return I=Ao(o,I),ko(o,S),f=Mu(n,o,f,g,I,S),g=Ou(),n!==null&&!Lr?(o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~S,Hi(n,o,S)):(fn&&g&&gu(o),o.flags|=1,Ar(n,o,f,S),o.child)}function I0(n,o,f,g,S){if(Dr(f)){var I=!0;Al(o)}else I=!1;if(ko(o,S),o.stateNode===null)Wl(n,o),p0(o,f,g),Vu(o,f,g,S),g=!0;else if(n===null){var M=o.stateNode,H=o.memoizedProps;M.props=H;var J=M.context,me=f.contextType;typeof me=="object"&&me!==null?me=ni(me):(me=Dr(f)?Hs:gr.current,me=Ao(o,me));var Me=f.getDerivedStateFromProps,De=typeof Me=="function"||typeof M.getSnapshotBeforeUpdate=="function";De||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(H!==g||J!==me)&&g0(o,M,g,me),ps=!1;var ke=o.memoizedState;M.state=ke,Ol(o,g,M,S),J=o.memoizedState,H!==g||ke!==J||Or.current||ps?(typeof Me=="function"&&(Fu(o,f,Me,g),J=o.memoizedState),(H=ps||m0(o,f,H,g,ke,J,me))?(De||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(o.flags|=4194308)):(typeof M.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=g,o.memoizedState=J),M.props=g,M.state=J,M.context=me,g=H):(typeof M.componentDidMount=="function"&&(o.flags|=4194308),g=!1)}else{M=o.stateNode,Wh(n,o),H=o.memoizedProps,me=o.type===o.elementType?H:mi(o.type,H),M.props=me,De=o.pendingProps,ke=M.context,J=f.contextType,typeof J=="object"&&J!==null?J=ni(J):(J=Dr(f)?Hs:gr.current,J=Ao(o,J));var Je=f.getDerivedStateFromProps;(Me=typeof Je=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(H!==De||ke!==J)&&g0(o,M,g,J),ps=!1,ke=o.memoizedState,M.state=ke,Ol(o,g,M,S);var it=o.memoizedState;H!==De||ke!==it||Or.current||ps?(typeof Je=="function"&&(Fu(o,f,Je,g),it=o.memoizedState),(me=ps||m0(o,f,me,g,ke,it,J)||!1)?(Me||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(g,it,J),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(g,it,J)),typeof M.componentDidUpdate=="function"&&(o.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof M.componentDidUpdate!="function"||H===n.memoizedProps&&ke===n.memoizedState||(o.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||H===n.memoizedProps&&ke===n.memoizedState||(o.flags|=1024),o.memoizedProps=g,o.memoizedState=it),M.props=g,M.state=it,M.context=J,g=me):(typeof M.componentDidUpdate!="function"||H===n.memoizedProps&&ke===n.memoizedState||(o.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||H===n.memoizedProps&&ke===n.memoizedState||(o.flags|=1024),g=!1)}return Hu(n,o,f,g,I,S)}function Hu(n,o,f,g,S,I){N0(n,o);var M=(o.flags&128)!==0;if(!g&&!M)return S&&Ph(o,f,!1),Hi(n,o,I);g=o.stateNode,qx.current=o;var H=M&&typeof f.getDerivedStateFromError!="function"?null:g.render();return o.flags|=1,n!==null&&M?(o.child=_o(o,n.child,null,I),o.child=_o(o,null,H,I)):Ar(n,o,H,I),o.memoizedState=g.state,S&&Ph(o,f,!0),o.child}function T0(n){var o=n.stateNode;o.pendingContext?Rh(n,o.pendingContext,o.pendingContext!==o.context):o.context&&Rh(n,o.context,!1),Iu(n,o.containerInfo)}function _0(n,o,f,g,S){return To(),vu(S),o.flags|=256,Ar(n,o,f,g),o.child}var Gu={dehydrated:null,treeContext:null,retryLane:0};function Xu(n){return{baseLanes:n,cachePool:null,transitions:null}}function R0(n,o,f){var g=o.pendingProps,S=gn.current,I=!1,M=(o.flags&128)!==0,H;if((H=M)||(H=n!==null&&n.memoizedState===null?!1:(S&2)!==0),H?(I=!0,o.flags&=-129):(n===null||n.memoizedState!==null)&&(S|=1),rn(gn,S&1),n===null)return wu(o),n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(o.mode&1?n.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(M=g.children,n=g.fallback,I?(g=o.mode,I=o.child,M={mode:"hidden",children:M},!(g&1)&&I!==null?(I.childLanes=0,I.pendingProps=M):I=tc(M,g,0,null),n=eo(n,g,f,null),I.return=o,n.return=o,I.sibling=n,o.child=I,o.child.memoizedState=Xu(f),o.memoizedState=Gu,n):Yu(o,M));if(S=n.memoizedState,S!==null&&(H=S.dehydrated,H!==null))return Qx(n,o,M,g,H,S,f);if(I){I=g.fallback,M=o.mode,S=n.child,H=S.sibling;var J={mode:"hidden",children:g.children};return!(M&1)&&o.child!==S?(g=o.child,g.childLanes=0,g.pendingProps=J,o.deletions=null):(g=bs(S,J),g.subtreeFlags=S.subtreeFlags&14680064),H!==null?I=bs(H,I):(I=eo(I,M,f,null),I.flags|=2),I.return=o,g.return=o,g.sibling=I,o.child=g,g=I,I=o.child,M=n.child.memoizedState,M=M===null?Xu(f):{baseLanes:M.baseLanes|f,cachePool:null,transitions:M.transitions},I.memoizedState=M,I.childLanes=n.childLanes&~f,o.memoizedState=Gu,g}return I=n.child,n=I.sibling,g=bs(I,{mode:"visible",children:g.children}),!(o.mode&1)&&(g.lanes=f),g.return=o,g.sibling=null,n!==null&&(f=o.deletions,f===null?(o.deletions=[n],o.flags|=16):f.push(n)),o.child=g,o.memoizedState=null,g}function Yu(n,o){return o=tc({mode:"visible",children:o},n.mode,0,null),o.return=n,n.child=o}function zl(n,o,f,g){return g!==null&&vu(g),_o(o,n.child,null,f),n=Yu(o,o.pendingProps.children),n.flags|=2,o.memoizedState=null,n}function Qx(n,o,f,g,S,I,M){if(f)return o.flags&256?(o.flags&=-257,g=Uu(Error(a(422))),zl(n,o,M,g)):o.memoizedState!==null?(o.child=n.child,o.flags|=128,null):(I=g.fallback,S=o.mode,g=tc({mode:"visible",children:g.children},S,0,null),I=eo(I,S,M,null),I.flags|=2,g.return=o,I.return=o,g.sibling=I,o.child=g,o.mode&1&&_o(o,n.child,null,M),o.child.memoizedState=Xu(M),o.memoizedState=Gu,I);if(!(o.mode&1))return zl(n,o,M,null);if(S.data==="$!"){if(g=S.nextSibling&&S.nextSibling.dataset,g)var H=g.dgst;return g=H,I=Error(a(419)),g=Uu(I,g,void 0),zl(n,o,M,g)}if(H=(M&n.childLanes)!==0,Lr||H){if(g=Qn,g!==null){switch(M&-M){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=S&(g.suspendedLanes|M)?0:S,S!==0&&S!==I.retryLane&&(I.retryLane=S,zi(n,S),xi(g,n,S,-1))}return cd(),g=Uu(Error(a(421))),zl(n,o,M,g)}return S.data==="$?"?(o.flags|=128,o.child=n.child,o=d2.bind(null,n),S._reactRetry=o,null):(n=I.treeContext,$r=ds(S.nextSibling),Yr=o,fn=!0,hi=null,n!==null&&(ei[ti++]=Vi,ei[ti++]=Ui,ei[ti++]=Gs,Vi=n.id,Ui=n.overflow,Gs=o),o=Yu(o,g.children),o.flags|=4096,o)}function k0(n,o,f){n.lanes|=o;var g=n.alternate;g!==null&&(g.lanes|=o),Su(n.return,o,f)}function $u(n,o,f,g,S){var I=n.memoizedState;I===null?n.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:S}:(I.isBackwards=o,I.rendering=null,I.renderingStartTime=0,I.last=g,I.tail=f,I.tailMode=S)}function P0(n,o,f){var g=o.pendingProps,S=g.revealOrder,I=g.tail;if(Ar(n,o,g.children,f),g=gn.current,g&2)g=g&1|2,o.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=o.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&k0(n,f,o);else if(n.tag===19)k0(n,f,o);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===o)break e;for(;n.sibling===null;){if(n.return===null||n.return===o)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}g&=1}if(rn(gn,g),!(o.mode&1))o.memoizedState=null;else switch(S){case"forwards":for(f=o.child,S=null;f!==null;)n=f.alternate,n!==null&&Dl(n)===null&&(S=f),f=f.sibling;f=S,f===null?(S=o.child,o.child=null):(S=f.sibling,f.sibling=null),$u(o,!1,S,f,I);break;case"backwards":for(f=null,S=o.child,o.child=null;S!==null;){if(n=S.alternate,n!==null&&Dl(n)===null){o.child=S;break}n=S.sibling,S.sibling=f,f=S,S=n}$u(o,!0,f,null,I);break;case"together":$u(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Wl(n,o){!(o.mode&1)&&n!==null&&(n.alternate=null,o.alternate=null,o.flags|=2)}function Hi(n,o,f){if(n!==null&&(o.dependencies=n.dependencies),Ks|=o.lanes,!(f&o.childLanes))return null;if(n!==null&&o.child!==n.child)throw Error(a(153));if(o.child!==null){for(n=o.child,f=bs(n,n.pendingProps),o.child=f,f.return=o;n.sibling!==null;)n=n.sibling,f=f.sibling=bs(n,n.pendingProps),f.return=o;f.sibling=null}return o.child}function Jx(n,o,f){switch(o.tag){case 3:T0(o),To();break;case 5:Xh(o);break;case 1:Dr(o.type)&&Al(o);break;case 4:Iu(o,o.stateNode.containerInfo);break;case 10:var g=o.type._context,S=o.memoizedProps.value;rn(kl,g._currentValue),g._currentValue=S;break;case 13:if(g=o.memoizedState,g!==null)return g.dehydrated!==null?(rn(gn,gn.current&1),o.flags|=128,null):f&o.child.childLanes?R0(n,o,f):(rn(gn,gn.current&1),n=Hi(n,o,f),n!==null?n.sibling:null);rn(gn,gn.current&1);break;case 19:if(g=(f&o.childLanes)!==0,n.flags&128){if(g)return P0(n,o,f);o.flags|=128}if(S=o.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),rn(gn,gn.current),g)break;return null;case 22:case 23:return o.lanes=0,A0(n,o,f)}return Hi(n,o,f)}var M0,Zu,O0,D0;M0=function(n,o){for(var f=o.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===o)break;for(;f.sibling===null;){if(f.return===null||f.return===o)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},Zu=function(){},O0=function(n,o,f,g){var S=n.memoizedProps;if(S!==g){n=o.stateNode,$s(Ai.current);var I=null;switch(f){case"input":S=$e(n,S),g=$e(n,g),I=[];break;case"select":S=Ee({},S,{value:void 0}),g=Ee({},g,{value:void 0}),I=[];break;case"textarea":S=vn(n,S),g=vn(n,g),I=[];break;default:typeof S.onClick!="function"&&typeof g.onClick=="function"&&(n.onclick=bl)}je(f,g);var M;f=null;for(me in S)if(!g.hasOwnProperty(me)&&S.hasOwnProperty(me)&&S[me]!=null)if(me==="style"){var H=S[me];for(M in H)H.hasOwnProperty(M)&&(f||(f={}),f[M]="")}else me!=="dangerouslySetInnerHTML"&&me!=="children"&&me!=="suppressContentEditableWarning"&&me!=="suppressHydrationWarning"&&me!=="autoFocus"&&(m.hasOwnProperty(me)?I||(I=[]):(I=I||[]).push(me,null));for(me in g){var J=g[me];if(H=S!=null?S[me]:void 0,g.hasOwnProperty(me)&&J!==H&&(J!=null||H!=null))if(me==="style")if(H){for(M in H)!H.hasOwnProperty(M)||J&&J.hasOwnProperty(M)||(f||(f={}),f[M]="");for(M in J)J.hasOwnProperty(M)&&H[M]!==J[M]&&(f||(f={}),f[M]=J[M])}else f||(I||(I=[]),I.push(me,f)),f=J;else me==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,H=H?H.__html:void 0,J!=null&&H!==J&&(I=I||[]).push(me,J)):me==="children"?typeof J!="string"&&typeof J!="number"||(I=I||[]).push(me,""+J):me!=="suppressContentEditableWarning"&&me!=="suppressHydrationWarning"&&(m.hasOwnProperty(me)?(J!=null&&me==="onScroll"&&ln("scroll",n),I||H===J||(I=[])):(I=I||[]).push(me,J))}f&&(I=I||[]).push("style",f);var me=I;(o.updateQueue=me)&&(o.flags|=4)}},D0=function(n,o,f,g){f!==g&&(o.flags|=4)};function Sa(n,o){if(!fn)switch(n.tailMode){case"hidden":o=n.tail;for(var f=null;o!==null;)o.alternate!==null&&(f=o),o=o.sibling;f===null?n.tail=null:f.sibling=null;break;case"collapsed":f=n.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?o||n.tail===null?n.tail=null:n.tail.sibling=null:g.sibling=null}}function yr(n){var o=n.alternate!==null&&n.alternate.child===n.child,f=0,g=0;if(o)for(var S=n.child;S!==null;)f|=S.lanes|S.childLanes,g|=S.subtreeFlags&14680064,g|=S.flags&14680064,S.return=n,S=S.sibling;else for(S=n.child;S!==null;)f|=S.lanes|S.childLanes,g|=S.subtreeFlags,g|=S.flags,S.return=n,S=S.sibling;return n.subtreeFlags|=g,n.childLanes=f,o}function e2(n,o,f){var g=o.pendingProps;switch(xu(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yr(o),null;case 1:return Dr(o.type)&&Sl(),yr(o),null;case 3:return g=o.stateNode,Po(),cn(Or),cn(gr),Ru(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(n===null||n.child===null)&&(_l(o)?o.flags|=4:n===null||n.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,hi!==null&&(od(hi),hi=null))),Zu(n,o),yr(o),null;case 5:Tu(o);var S=$s(wa.current);if(f=o.type,n!==null&&o.stateNode!=null)O0(n,o,f,g,S),n.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!g){if(o.stateNode===null)throw Error(a(166));return yr(o),null}if(n=$s(Ai.current),_l(o)){g=o.stateNode,f=o.type;var I=o.memoizedProps;switch(g[Si]=o,g[ma]=I,n=(o.mode&1)!==0,f){case"dialog":ln("cancel",g),ln("close",g);break;case"iframe":case"object":case"embed":ln("load",g);break;case"video":case"audio":for(S=0;S<da.length;S++)ln(da[S],g);break;case"source":ln("error",g);break;case"img":case"image":case"link":ln("error",g),ln("load",g);break;case"details":ln("toggle",g);break;case"input":Ze(g,I),ln("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!I.multiple},ln("invalid",g);break;case"textarea":tr(g,I),ln("invalid",g)}je(f,I),S=null;for(var M in I)if(I.hasOwnProperty(M)){var H=I[M];M==="children"?typeof H=="string"?g.textContent!==H&&(I.suppressHydrationWarning!==!0&&Cl(g.textContent,H,n),S=["children",H]):typeof H=="number"&&g.textContent!==""+H&&(I.suppressHydrationWarning!==!0&&Cl(g.textContent,H,n),S=["children",""+H]):m.hasOwnProperty(M)&&H!=null&&M==="onScroll"&&ln("scroll",g)}switch(f){case"input":Ye(g),Qe(g,I,!0);break;case"textarea":Ye(g),Rt(g);break;case"select":case"option":break;default:typeof I.onClick=="function"&&(g.onclick=bl)}g=S,o.updateQueue=g,g!==null&&(o.flags|=4)}else{M=S.nodeType===9?S:S.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=We(f)),n==="http://www.w3.org/1999/xhtml"?f==="script"?(n=M.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof g.is=="string"?n=M.createElement(f,{is:g.is}):(n=M.createElement(f),f==="select"&&(M=n,g.multiple?M.multiple=!0:g.size&&(M.size=g.size))):n=M.createElementNS(n,f),n[Si]=o,n[ma]=g,M0(n,o,!1,!1),o.stateNode=n;e:{switch(M=yt(f,g),f){case"dialog":ln("cancel",n),ln("close",n),S=g;break;case"iframe":case"object":case"embed":ln("load",n),S=g;break;case"video":case"audio":for(S=0;S<da.length;S++)ln(da[S],n);S=g;break;case"source":ln("error",n),S=g;break;case"img":case"image":case"link":ln("error",n),ln("load",n),S=g;break;case"details":ln("toggle",n),S=g;break;case"input":Ze(n,g),S=$e(n,g),ln("invalid",n);break;case"option":S=g;break;case"select":n._wrapperState={wasMultiple:!!g.multiple},S=Ee({},g,{value:void 0}),ln("invalid",n);break;case"textarea":tr(n,g),S=vn(n,g),ln("invalid",n);break;default:S=g}je(f,S),H=S;for(I in H)if(H.hasOwnProperty(I)){var J=H[I];I==="style"?le(n,J):I==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,J!=null&&_t(n,J)):I==="children"?typeof J=="string"?(f!=="textarea"||J!=="")&&zt(n,J):typeof J=="number"&&zt(n,""+J):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(m.hasOwnProperty(I)?J!=null&&I==="onScroll"&&ln("scroll",n):J!=null&&F(n,I,J,M))}switch(f){case"input":Ye(n),Qe(n,g,!1);break;case"textarea":Ye(n),Rt(n);break;case"option":g.value!=null&&n.setAttribute("value",""+ge(g.value));break;case"select":n.multiple=!!g.multiple,I=g.value,I!=null?ze(n,!!g.multiple,I,!1):g.defaultValue!=null&&ze(n,!!g.multiple,g.defaultValue,!0);break;default:typeof S.onClick=="function"&&(n.onclick=bl)}switch(f){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return yr(o),null;case 6:if(n&&o.stateNode!=null)D0(n,o,n.memoizedProps,g);else{if(typeof g!="string"&&o.stateNode===null)throw Error(a(166));if(f=$s(wa.current),$s(Ai.current),_l(o)){if(g=o.stateNode,f=o.memoizedProps,g[Si]=o,(I=g.nodeValue!==f)&&(n=Yr,n!==null))switch(n.tag){case 3:Cl(g.nodeValue,f,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Cl(g.nodeValue,f,(n.mode&1)!==0)}I&&(o.flags|=4)}else g=(f.nodeType===9?f:f.ownerDocument).createTextNode(g),g[Si]=o,o.stateNode=g}return yr(o),null;case 13:if(cn(gn),g=o.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(fn&&$r!==null&&o.mode&1&&!(o.flags&128))Bh(),To(),o.flags|=98560,I=!1;else if(I=_l(o),g!==null&&g.dehydrated!==null){if(n===null){if(!I)throw Error(a(318));if(I=o.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(a(317));I[Si]=o}else To(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;yr(o),I=!1}else hi!==null&&(od(hi),hi=null),I=!0;if(!I)return o.flags&65536?o:null}return o.flags&128?(o.lanes=f,o):(g=g!==null,g!==(n!==null&&n.memoizedState!==null)&&g&&(o.child.flags|=8192,o.mode&1&&(n===null||gn.current&1?Gn===0&&(Gn=3):cd())),o.updateQueue!==null&&(o.flags|=4),yr(o),null);case 4:return Po(),Zu(n,o),n===null&&fa(o.stateNode.containerInfo),yr(o),null;case 10:return Eu(o.type._context),yr(o),null;case 17:return Dr(o.type)&&Sl(),yr(o),null;case 19:if(cn(gn),I=o.memoizedState,I===null)return yr(o),null;if(g=(o.flags&128)!==0,M=I.rendering,M===null)if(g)Sa(I,!1);else{if(Gn!==0||n!==null&&n.flags&128)for(n=o.child;n!==null;){if(M=Dl(n),M!==null){for(o.flags|=128,Sa(I,!1),g=M.updateQueue,g!==null&&(o.updateQueue=g,o.flags|=4),o.subtreeFlags=0,g=f,f=o.child;f!==null;)I=f,n=g,I.flags&=14680066,M=I.alternate,M===null?(I.childLanes=0,I.lanes=n,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=M.childLanes,I.lanes=M.lanes,I.child=M.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=M.memoizedProps,I.memoizedState=M.memoizedState,I.updateQueue=M.updateQueue,I.type=M.type,n=M.dependencies,I.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),f=f.sibling;return rn(gn,gn.current&1|2),o.child}n=n.sibling}I.tail!==null&&Ft()>Lo&&(o.flags|=128,g=!0,Sa(I,!1),o.lanes=4194304)}else{if(!g)if(n=Dl(M),n!==null){if(o.flags|=128,g=!0,f=n.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),Sa(I,!0),I.tail===null&&I.tailMode==="hidden"&&!M.alternate&&!fn)return yr(o),null}else 2*Ft()-I.renderingStartTime>Lo&&f!==1073741824&&(o.flags|=128,g=!0,Sa(I,!1),o.lanes=4194304);I.isBackwards?(M.sibling=o.child,o.child=M):(f=I.last,f!==null?f.sibling=M:o.child=M,I.last=M)}return I.tail!==null?(o=I.tail,I.rendering=o,I.tail=o.sibling,I.renderingStartTime=Ft(),o.sibling=null,f=gn.current,rn(gn,g?f&1|2:f&1),o):(yr(o),null);case 22:case 23:return ld(),g=o.memoizedState!==null,n!==null&&n.memoizedState!==null!==g&&(o.flags|=8192),g&&o.mode&1?Zr&1073741824&&(yr(o),o.subtreeFlags&6&&(o.flags|=8192)):yr(o),null;case 24:return null;case 25:return null}throw Error(a(156,o.tag))}function t2(n,o){switch(xu(o),o.tag){case 1:return Dr(o.type)&&Sl(),n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 3:return Po(),cn(Or),cn(gr),Ru(),n=o.flags,n&65536&&!(n&128)?(o.flags=n&-65537|128,o):null;case 5:return Tu(o),null;case 13:if(cn(gn),n=o.memoizedState,n!==null&&n.dehydrated!==null){if(o.alternate===null)throw Error(a(340));To()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 19:return cn(gn),null;case 4:return Po(),null;case 10:return Eu(o.type._context),null;case 22:case 23:return ld(),null;case 24:return null;default:return null}}var Hl=!1,wr=!1,n2=typeof WeakSet=="function"?WeakSet:Set,nt=null;function Oo(n,o){var f=n.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(g){An(n,o,g)}else f.current=null}function Ku(n,o,f){try{f()}catch(g){An(n,o,g)}}var L0=!1;function r2(n,o){if(lu=bi,n=Pt(),St(n)){if("selectionStart"in n)var f={start:n.selectionStart,end:n.selectionEnd};else e:{f=(f=n.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var S=g.anchorOffset,I=g.focusNode;g=g.focusOffset;try{f.nodeType,I.nodeType}catch{f=null;break e}var M=0,H=-1,J=-1,me=0,Me=0,De=n,ke=null;t:for(;;){for(var Je;De!==f||S!==0&&De.nodeType!==3||(H=M+S),De!==I||g!==0&&De.nodeType!==3||(J=M+g),De.nodeType===3&&(M+=De.nodeValue.length),(Je=De.firstChild)!==null;)ke=De,De=Je;for(;;){if(De===n)break t;if(ke===f&&++me===S&&(H=M),ke===I&&++Me===g&&(J=M),(Je=De.nextSibling)!==null)break;De=ke,ke=De.parentNode}De=Je}f=H===-1||J===-1?null:{start:H,end:J}}else f=null}f=f||{start:0,end:0}}else f=null;for(cu={focusedElem:n,selectionRange:f},bi=!1,nt=o;nt!==null;)if(o=nt,n=o.child,(o.subtreeFlags&1028)!==0&&n!==null)n.return=o,nt=n;else for(;nt!==null;){o=nt;try{var it=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(it!==null){var st=it.memoizedProps,Pn=it.memoizedState,ae=o.stateNode,re=ae.getSnapshotBeforeUpdate(o.elementType===o.type?st:mi(o.type,st),Pn);ae.__reactInternalSnapshotBeforeUpdate=re}break;case 3:var de=o.stateNode.containerInfo;de.nodeType===1?de.textContent="":de.nodeType===9&&de.documentElement&&de.removeChild(de.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(He){An(o,o.return,He)}if(n=o.sibling,n!==null){n.return=o.return,nt=n;break}nt=o.return}return it=L0,L0=!1,it}function Aa(n,o,f){var g=o.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var S=g=g.next;do{if((S.tag&n)===n){var I=S.destroy;S.destroy=void 0,I!==void 0&&Ku(o,f,I)}S=S.next}while(S!==g)}}function Gl(n,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var f=o=o.next;do{if((f.tag&n)===n){var g=f.create;f.destroy=g()}f=f.next}while(f!==o)}}function qu(n){var o=n.ref;if(o!==null){var f=n.stateNode;switch(n.tag){case 5:n=f;break;default:n=f}typeof o=="function"?o(n):o.current=n}}function j0(n){var o=n.alternate;o!==null&&(n.alternate=null,j0(o)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(o=n.stateNode,o!==null&&(delete o[Si],delete o[ma],delete o[hu],delete o[Fx],delete o[Vx])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function B0(n){return n.tag===5||n.tag===3||n.tag===4}function F0(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||B0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Qu(n,o,f){var g=n.tag;if(g===5||g===6)n=n.stateNode,o?f.nodeType===8?f.parentNode.insertBefore(n,o):f.insertBefore(n,o):(f.nodeType===8?(o=f.parentNode,o.insertBefore(n,f)):(o=f,o.appendChild(n)),f=f._reactRootContainer,f!=null||o.onclick!==null||(o.onclick=bl));else if(g!==4&&(n=n.child,n!==null))for(Qu(n,o,f),n=n.sibling;n!==null;)Qu(n,o,f),n=n.sibling}function Ju(n,o,f){var g=n.tag;if(g===5||g===6)n=n.stateNode,o?f.insertBefore(n,o):f.appendChild(n);else if(g!==4&&(n=n.child,n!==null))for(Ju(n,o,f),n=n.sibling;n!==null;)Ju(n,o,f),n=n.sibling}var lr=null,pi=!1;function xs(n,o,f){for(f=f.child;f!==null;)V0(n,o,f),f=f.sibling}function V0(n,o,f){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(Mt,f)}catch{}switch(f.tag){case 5:wr||Oo(f,o);case 6:var g=lr,S=pi;lr=null,xs(n,o,f),lr=g,pi=S,lr!==null&&(pi?(n=lr,f=f.stateNode,n.nodeType===8?n.parentNode.removeChild(f):n.removeChild(f)):lr.removeChild(f.stateNode));break;case 18:lr!==null&&(pi?(n=lr,f=f.stateNode,n.nodeType===8?fu(n.parentNode,f):n.nodeType===1&&fu(n,f),ui(n)):fu(lr,f.stateNode));break;case 4:g=lr,S=pi,lr=f.stateNode.containerInfo,pi=!0,xs(n,o,f),lr=g,pi=S;break;case 0:case 11:case 14:case 15:if(!wr&&(g=f.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){S=g=g.next;do{var I=S,M=I.destroy;I=I.tag,M!==void 0&&(I&2||I&4)&&Ku(f,o,M),S=S.next}while(S!==g)}xs(n,o,f);break;case 1:if(!wr&&(Oo(f,o),g=f.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=f.memoizedProps,g.state=f.memoizedState,g.componentWillUnmount()}catch(H){An(f,o,H)}xs(n,o,f);break;case 21:xs(n,o,f);break;case 22:f.mode&1?(wr=(g=wr)||f.memoizedState!==null,xs(n,o,f),wr=g):xs(n,o,f);break;default:xs(n,o,f)}}function U0(n){var o=n.updateQueue;if(o!==null){n.updateQueue=null;var f=n.stateNode;f===null&&(f=n.stateNode=new n2),o.forEach(function(g){var S=f2.bind(null,n,g);f.has(g)||(f.add(g),g.then(S,S))})}}function gi(n,o){var f=o.deletions;if(f!==null)for(var g=0;g<f.length;g++){var S=f[g];try{var I=n,M=o,H=M;e:for(;H!==null;){switch(H.tag){case 5:lr=H.stateNode,pi=!1;break e;case 3:lr=H.stateNode.containerInfo,pi=!0;break e;case 4:lr=H.stateNode.containerInfo,pi=!0;break e}H=H.return}if(lr===null)throw Error(a(160));V0(I,M,S),lr=null,pi=!1;var J=S.alternate;J!==null&&(J.return=null),S.return=null}catch(me){An(S,o,me)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)z0(o,n),o=o.sibling}function z0(n,o){var f=n.alternate,g=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(gi(o,n),Ii(n),g&4){try{Aa(3,n,n.return),Gl(3,n)}catch(st){An(n,n.return,st)}try{Aa(5,n,n.return)}catch(st){An(n,n.return,st)}}break;case 1:gi(o,n),Ii(n),g&512&&f!==null&&Oo(f,f.return);break;case 5:if(gi(o,n),Ii(n),g&512&&f!==null&&Oo(f,f.return),n.flags&32){var S=n.stateNode;try{zt(S,"")}catch(st){An(n,n.return,st)}}if(g&4&&(S=n.stateNode,S!=null)){var I=n.memoizedProps,M=f!==null?f.memoizedProps:I,H=n.type,J=n.updateQueue;if(n.updateQueue=null,J!==null)try{H==="input"&&I.type==="radio"&&I.name!=null&&Tt(S,I),yt(H,M);var me=yt(H,I);for(M=0;M<J.length;M+=2){var Me=J[M],De=J[M+1];Me==="style"?le(S,De):Me==="dangerouslySetInnerHTML"?_t(S,De):Me==="children"?zt(S,De):F(S,Me,De,me)}switch(H){case"input":pt(S,I);break;case"textarea":Xe(S,I);break;case"select":var ke=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!I.multiple;var Je=I.value;Je!=null?ze(S,!!I.multiple,Je,!1):ke!==!!I.multiple&&(I.defaultValue!=null?ze(S,!!I.multiple,I.defaultValue,!0):ze(S,!!I.multiple,I.multiple?[]:"",!1))}S[ma]=I}catch(st){An(n,n.return,st)}}break;case 6:if(gi(o,n),Ii(n),g&4){if(n.stateNode===null)throw Error(a(162));S=n.stateNode,I=n.memoizedProps;try{S.nodeValue=I}catch(st){An(n,n.return,st)}}break;case 3:if(gi(o,n),Ii(n),g&4&&f!==null&&f.memoizedState.isDehydrated)try{ui(o.containerInfo)}catch(st){An(n,n.return,st)}break;case 4:gi(o,n),Ii(n);break;case 13:gi(o,n),Ii(n),S=n.child,S.flags&8192&&(I=S.memoizedState!==null,S.stateNode.isHidden=I,!I||S.alternate!==null&&S.alternate.memoizedState!==null||(nd=Ft())),g&4&&U0(n);break;case 22:if(Me=f!==null&&f.memoizedState!==null,n.mode&1?(wr=(me=wr)||Me,gi(o,n),wr=me):gi(o,n),Ii(n),g&8192){if(me=n.memoizedState!==null,(n.stateNode.isHidden=me)&&!Me&&n.mode&1)for(nt=n,Me=n.child;Me!==null;){for(De=nt=Me;nt!==null;){switch(ke=nt,Je=ke.child,ke.tag){case 0:case 11:case 14:case 15:Aa(4,ke,ke.return);break;case 1:Oo(ke,ke.return);var it=ke.stateNode;if(typeof it.componentWillUnmount=="function"){g=ke,f=ke.return;try{o=g,it.props=o.memoizedProps,it.state=o.memoizedState,it.componentWillUnmount()}catch(st){An(g,f,st)}}break;case 5:Oo(ke,ke.return);break;case 22:if(ke.memoizedState!==null){G0(De);continue}}Je!==null?(Je.return=ke,nt=Je):G0(De)}Me=Me.sibling}e:for(Me=null,De=n;;){if(De.tag===5){if(Me===null){Me=De;try{S=De.stateNode,me?(I=S.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none"):(H=De.stateNode,J=De.memoizedProps.style,M=J!=null&&J.hasOwnProperty("display")?J.display:null,H.style.display=Ie("display",M))}catch(st){An(n,n.return,st)}}}else if(De.tag===6){if(Me===null)try{De.stateNode.nodeValue=me?"":De.memoizedProps}catch(st){An(n,n.return,st)}}else if((De.tag!==22&&De.tag!==23||De.memoizedState===null||De===n)&&De.child!==null){De.child.return=De,De=De.child;continue}if(De===n)break e;for(;De.sibling===null;){if(De.return===null||De.return===n)break e;Me===De&&(Me=null),De=De.return}Me===De&&(Me=null),De.sibling.return=De.return,De=De.sibling}}break;case 19:gi(o,n),Ii(n),g&4&&U0(n);break;case 21:break;default:gi(o,n),Ii(n)}}function Ii(n){var o=n.flags;if(o&2){try{e:{for(var f=n.return;f!==null;){if(B0(f)){var g=f;break e}f=f.return}throw Error(a(160))}switch(g.tag){case 5:var S=g.stateNode;g.flags&32&&(zt(S,""),g.flags&=-33);var I=F0(n);Ju(n,I,S);break;case 3:case 4:var M=g.stateNode.containerInfo,H=F0(n);Qu(n,H,M);break;default:throw Error(a(161))}}catch(J){An(n,n.return,J)}n.flags&=-3}o&4096&&(n.flags&=-4097)}function i2(n,o,f){nt=n,W0(n)}function W0(n,o,f){for(var g=(n.mode&1)!==0;nt!==null;){var S=nt,I=S.child;if(S.tag===22&&g){var M=S.memoizedState!==null||Hl;if(!M){var H=S.alternate,J=H!==null&&H.memoizedState!==null||wr;H=Hl;var me=wr;if(Hl=M,(wr=J)&&!me)for(nt=S;nt!==null;)M=nt,J=M.child,M.tag===22&&M.memoizedState!==null?X0(S):J!==null?(J.return=M,nt=J):X0(S);for(;I!==null;)nt=I,W0(I),I=I.sibling;nt=S,Hl=H,wr=me}H0(n)}else S.subtreeFlags&8772&&I!==null?(I.return=S,nt=I):H0(n)}}function H0(n){for(;nt!==null;){var o=nt;if(o.flags&8772){var f=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:wr||Gl(5,o);break;case 1:var g=o.stateNode;if(o.flags&4&&!wr)if(f===null)g.componentDidMount();else{var S=o.elementType===o.type?f.memoizedProps:mi(o.type,f.memoizedProps);g.componentDidUpdate(S,f.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var I=o.updateQueue;I!==null&&Gh(o,I,g);break;case 3:var M=o.updateQueue;if(M!==null){if(f=null,o.child!==null)switch(o.child.tag){case 5:f=o.child.stateNode;break;case 1:f=o.child.stateNode}Gh(o,M,f)}break;case 5:var H=o.stateNode;if(f===null&&o.flags&4){f=H;var J=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":J.autoFocus&&f.focus();break;case"img":J.src&&(f.src=J.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var me=o.alternate;if(me!==null){var Me=me.memoizedState;if(Me!==null){var De=Me.dehydrated;De!==null&&ui(De)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}wr||o.flags&512&&qu(o)}catch(ke){An(o,o.return,ke)}}if(o===n){nt=null;break}if(f=o.sibling,f!==null){f.return=o.return,nt=f;break}nt=o.return}}function G0(n){for(;nt!==null;){var o=nt;if(o===n){nt=null;break}var f=o.sibling;if(f!==null){f.return=o.return,nt=f;break}nt=o.return}}function X0(n){for(;nt!==null;){var o=nt;try{switch(o.tag){case 0:case 11:case 15:var f=o.return;try{Gl(4,o)}catch(J){An(o,f,J)}break;case 1:var g=o.stateNode;if(typeof g.componentDidMount=="function"){var S=o.return;try{g.componentDidMount()}catch(J){An(o,S,J)}}var I=o.return;try{qu(o)}catch(J){An(o,I,J)}break;case 5:var M=o.return;try{qu(o)}catch(J){An(o,M,J)}}}catch(J){An(o,o.return,J)}if(o===n){nt=null;break}var H=o.sibling;if(H!==null){H.return=o.return,nt=H;break}nt=o.return}}var s2=Math.ceil,Xl=Z.ReactCurrentDispatcher,ed=Z.ReactCurrentOwner,ii=Z.ReactCurrentBatchConfig,Ut=0,Qn=null,jn=null,cr=0,Zr=0,Do=fs(0),Gn=0,Na=null,Ks=0,Yl=0,td=0,Ia=null,jr=null,nd=0,Lo=1/0,Gi=null,$l=!1,rd=null,ys=null,Zl=!1,ws=null,Kl=0,Ta=0,id=null,ql=-1,Ql=0;function Nr(){return Ut&6?Ft():ql!==-1?ql:ql=Ft()}function vs(n){return n.mode&1?Ut&2&&cr!==0?cr&-cr:zx.transition!==null?(Ql===0&&(Ql=En()),Ql):(n=It,n!==0||(n=window.event,n=n===void 0?16:ta(n.type)),n):1}function xi(n,o,f,g){if(50<Ta)throw Ta=0,id=null,Error(a(185));V(n,f,g),(!(Ut&2)||n!==Qn)&&(n===Qn&&(!(Ut&2)&&(Yl|=f),Gn===4&&Cs(n,cr)),Br(n,g),f===1&&Ut===0&&!(o.mode&1)&&(Lo=Ft()+500,Nl&&ms()))}function Br(n,o){var f=n.callbackNode;qr(n,o);var g=Er(n,n===Qn?cr:0);if(g===0)f!==null&&Dn(f),n.callbackNode=null,n.callbackPriority=0;else if(o=g&-g,n.callbackPriority!==o){if(f!=null&&Dn(f),o===1)n.tag===0?Ux($0.bind(null,n)):Mh($0.bind(null,n)),jx(function(){!(Ut&6)&&ms()}),f=null;else{switch(Ms(g)){case 1:f=Ne;break;case 4:f=mo;break;case 16:f=Yt;break;case 536870912:f=es;break;default:f=Yt}f=n1(f,Y0.bind(null,n))}n.callbackPriority=o,n.callbackNode=f}}function Y0(n,o){if(ql=-1,Ql=0,Ut&6)throw Error(a(327));var f=n.callbackNode;if(jo()&&n.callbackNode!==f)return null;var g=Er(n,n===Qn?cr:0);if(g===0)return null;if(g&30||g&n.expiredLanes||o)o=Jl(n,g);else{o=g;var S=Ut;Ut|=2;var I=K0();(Qn!==n||cr!==o)&&(Gi=null,Lo=Ft()+500,Qs(n,o));do try{l2();break}catch(H){Z0(n,H)}while(!0);bu(),Xl.current=I,Ut=S,jn!==null?o=0:(Qn=null,cr=0,o=Gn)}if(o!==0){if(o===2&&(S=Wt(n),S!==0&&(g=S,o=sd(n,S))),o===1)throw f=Na,Qs(n,0),Cs(n,g),Br(n,Ft()),f;if(o===6)Cs(n,g);else{if(S=n.current.alternate,!(g&30)&&!o2(S)&&(o=Jl(n,g),o===2&&(I=Wt(n),I!==0&&(g=I,o=sd(n,I))),o===1))throw f=Na,Qs(n,0),Cs(n,g),Br(n,Ft()),f;switch(n.finishedWork=S,n.finishedLanes=g,o){case 0:case 1:throw Error(a(345));case 2:Js(n,jr,Gi);break;case 3:if(Cs(n,g),(g&130023424)===g&&(o=nd+500-Ft(),10<o)){if(Er(n,0)!==0)break;if(S=n.suspendedLanes,(S&g)!==g){Nr(),n.pingedLanes|=n.suspendedLanes&S;break}n.timeoutHandle=du(Js.bind(null,n,jr,Gi),o);break}Js(n,jr,Gi);break;case 4:if(Cs(n,g),(g&4194240)===g)break;for(o=n.eventTimes,S=-1;0<g;){var M=31-Ln(g);I=1<<M,M=o[M],M>S&&(S=M),g&=~I}if(g=S,g=Ft()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*s2(g/1960))-g,10<g){n.timeoutHandle=du(Js.bind(null,n,jr,Gi),g);break}Js(n,jr,Gi);break;case 5:Js(n,jr,Gi);break;default:throw Error(a(329))}}}return Br(n,Ft()),n.callbackNode===f?Y0.bind(null,n):null}function sd(n,o){var f=Ia;return n.current.memoizedState.isDehydrated&&(Qs(n,o).flags|=256),n=Jl(n,o),n!==2&&(o=jr,jr=f,o!==null&&od(o)),n}function od(n){jr===null?jr=n:jr.push.apply(jr,n)}function o2(n){for(var o=n;;){if(o.flags&16384){var f=o.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var g=0;g<f.length;g++){var S=f[g],I=S.getSnapshot;S=S.value;try{if(!se(I(),S))return!1}catch{return!1}}}if(f=o.child,o.subtreeFlags&16384&&f!==null)f.return=o,o=f;else{if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Cs(n,o){for(o&=~td,o&=~Yl,n.suspendedLanes|=o,n.pingedLanes&=~o,n=n.expirationTimes;0<o;){var f=31-Ln(o),g=1<<f;n[f]=-1,o&=~g}}function $0(n){if(Ut&6)throw Error(a(327));jo();var o=Er(n,0);if(!(o&1))return Br(n,Ft()),null;var f=Jl(n,o);if(n.tag!==0&&f===2){var g=Wt(n);g!==0&&(o=g,f=sd(n,g))}if(f===1)throw f=Na,Qs(n,0),Cs(n,o),Br(n,Ft()),f;if(f===6)throw Error(a(345));return n.finishedWork=n.current.alternate,n.finishedLanes=o,Js(n,jr,Gi),Br(n,Ft()),null}function ad(n,o){var f=Ut;Ut|=1;try{return n(o)}finally{Ut=f,Ut===0&&(Lo=Ft()+500,Nl&&ms())}}function qs(n){ws!==null&&ws.tag===0&&!(Ut&6)&&jo();var o=Ut;Ut|=1;var f=ii.transition,g=It;try{if(ii.transition=null,It=1,n)return n()}finally{It=g,ii.transition=f,Ut=o,!(Ut&6)&&ms()}}function ld(){Zr=Do.current,cn(Do)}function Qs(n,o){n.finishedWork=null,n.finishedLanes=0;var f=n.timeoutHandle;if(f!==-1&&(n.timeoutHandle=-1,Lx(f)),jn!==null)for(f=jn.return;f!==null;){var g=f;switch(xu(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Sl();break;case 3:Po(),cn(Or),cn(gr),Ru();break;case 5:Tu(g);break;case 4:Po();break;case 13:cn(gn);break;case 19:cn(gn);break;case 10:Eu(g.type._context);break;case 22:case 23:ld()}f=f.return}if(Qn=n,jn=n=bs(n.current,null),cr=Zr=o,Gn=0,Na=null,td=Yl=Ks=0,jr=Ia=null,Ys!==null){for(o=0;o<Ys.length;o++)if(f=Ys[o],g=f.interleaved,g!==null){f.interleaved=null;var S=g.next,I=f.pending;if(I!==null){var M=I.next;I.next=S,g.next=M}f.pending=g}Ys=null}return n}function Z0(n,o){do{var f=jn;try{if(bu(),Ll.current=Vl,jl){for(var g=xn.memoizedState;g!==null;){var S=g.queue;S!==null&&(S.pending=null),g=g.next}jl=!1}if(Zs=0,qn=Hn=xn=null,va=!1,Ca=0,ed.current=null,f===null||f.return===null){Gn=1,Na=o,jn=null;break}e:{var I=n,M=f.return,H=f,J=o;if(o=cr,H.flags|=32768,J!==null&&typeof J=="object"&&typeof J.then=="function"){var me=J,Me=H,De=Me.tag;if(!(Me.mode&1)&&(De===0||De===11||De===15)){var ke=Me.alternate;ke?(Me.updateQueue=ke.updateQueue,Me.memoizedState=ke.memoizedState,Me.lanes=ke.lanes):(Me.updateQueue=null,Me.memoizedState=null)}var Je=v0(M);if(Je!==null){Je.flags&=-257,C0(Je,M,H,I,o),Je.mode&1&&w0(I,me,o),o=Je,J=me;var it=o.updateQueue;if(it===null){var st=new Set;st.add(J),o.updateQueue=st}else it.add(J);break e}else{if(!(o&1)){w0(I,me,o),cd();break e}J=Error(a(426))}}else if(fn&&H.mode&1){var Pn=v0(M);if(Pn!==null){!(Pn.flags&65536)&&(Pn.flags|=256),C0(Pn,M,H,I,o),vu(Mo(J,H));break e}}I=J=Mo(J,H),Gn!==4&&(Gn=2),Ia===null?Ia=[I]:Ia.push(I),I=M;do{switch(I.tag){case 3:I.flags|=65536,o&=-o,I.lanes|=o;var ae=x0(I,J,o);Hh(I,ae);break e;case 1:H=J;var re=I.type,de=I.stateNode;if(!(I.flags&128)&&(typeof re.getDerivedStateFromError=="function"||de!==null&&typeof de.componentDidCatch=="function"&&(ys===null||!ys.has(de)))){I.flags|=65536,o&=-o,I.lanes|=o;var He=y0(I,H,o);Hh(I,He);break e}}I=I.return}while(I!==null)}Q0(f)}catch(lt){o=lt,jn===f&&f!==null&&(jn=f=f.return);continue}break}while(!0)}function K0(){var n=Xl.current;return Xl.current=Vl,n===null?Vl:n}function cd(){(Gn===0||Gn===3||Gn===2)&&(Gn=4),Qn===null||!(Ks&268435455)&&!(Yl&268435455)||Cs(Qn,cr)}function Jl(n,o){var f=Ut;Ut|=2;var g=K0();(Qn!==n||cr!==o)&&(Gi=null,Qs(n,o));do try{a2();break}catch(S){Z0(n,S)}while(!0);if(bu(),Ut=f,Xl.current=g,jn!==null)throw Error(a(261));return Qn=null,cr=0,Gn}function a2(){for(;jn!==null;)q0(jn)}function l2(){for(;jn!==null&&!Qt();)q0(jn)}function q0(n){var o=t1(n.alternate,n,Zr);n.memoizedProps=n.pendingProps,o===null?Q0(n):jn=o,ed.current=null}function Q0(n){var o=n;do{var f=o.alternate;if(n=o.return,o.flags&32768){if(f=t2(f,o),f!==null){f.flags&=32767,jn=f;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Gn=6,jn=null;return}}else if(f=e2(f,o,Zr),f!==null){jn=f;return}if(o=o.sibling,o!==null){jn=o;return}jn=o=n}while(o!==null);Gn===0&&(Gn=5)}function Js(n,o,f){var g=It,S=ii.transition;try{ii.transition=null,It=1,c2(n,o,f,g)}finally{ii.transition=S,It=g}return null}function c2(n,o,f,g){do jo();while(ws!==null);if(Ut&6)throw Error(a(327));f=n.finishedWork;var S=n.finishedLanes;if(f===null)return null;if(n.finishedWork=null,n.finishedLanes=0,f===n.current)throw Error(a(177));n.callbackNode=null,n.callbackPriority=0;var I=f.lanes|f.childLanes;if(ot(n,I),n===Qn&&(jn=Qn=null,cr=0),!(f.subtreeFlags&2064)&&!(f.flags&2064)||Zl||(Zl=!0,n1(Yt,function(){return jo(),null})),I=(f.flags&15990)!==0,f.subtreeFlags&15990||I){I=ii.transition,ii.transition=null;var M=It;It=1;var H=Ut;Ut|=4,ed.current=null,r2(n,f),z0(f,n),pr(cu),bi=!!lu,cu=lu=null,n.current=f,i2(f),Ji(),Ut=H,It=M,ii.transition=I}else n.current=f;if(Zl&&(Zl=!1,ws=n,Kl=S),I=n.pendingLanes,I===0&&(ys=null),kt(f.stateNode),Br(n,Ft()),o!==null)for(g=n.onRecoverableError,f=0;f<o.length;f++)S=o[f],g(S.value,{componentStack:S.stack,digest:S.digest});if($l)throw $l=!1,n=rd,rd=null,n;return Kl&1&&n.tag!==0&&jo(),I=n.pendingLanes,I&1?n===id?Ta++:(Ta=0,id=n):Ta=0,ms(),null}function jo(){if(ws!==null){var n=Ms(Kl),o=ii.transition,f=It;try{if(ii.transition=null,It=16>n?16:n,ws===null)var g=!1;else{if(n=ws,ws=null,Kl=0,Ut&6)throw Error(a(331));var S=Ut;for(Ut|=4,nt=n.current;nt!==null;){var I=nt,M=I.child;if(nt.flags&16){var H=I.deletions;if(H!==null){for(var J=0;J<H.length;J++){var me=H[J];for(nt=me;nt!==null;){var Me=nt;switch(Me.tag){case 0:case 11:case 15:Aa(8,Me,I)}var De=Me.child;if(De!==null)De.return=Me,nt=De;else for(;nt!==null;){Me=nt;var ke=Me.sibling,Je=Me.return;if(j0(Me),Me===me){nt=null;break}if(ke!==null){ke.return=Je,nt=ke;break}nt=Je}}}var it=I.alternate;if(it!==null){var st=it.child;if(st!==null){it.child=null;do{var Pn=st.sibling;st.sibling=null,st=Pn}while(st!==null)}}nt=I}}if(I.subtreeFlags&2064&&M!==null)M.return=I,nt=M;else e:for(;nt!==null;){if(I=nt,I.flags&2048)switch(I.tag){case 0:case 11:case 15:Aa(9,I,I.return)}var ae=I.sibling;if(ae!==null){ae.return=I.return,nt=ae;break e}nt=I.return}}var re=n.current;for(nt=re;nt!==null;){M=nt;var de=M.child;if(M.subtreeFlags&2064&&de!==null)de.return=M,nt=de;else e:for(M=re;nt!==null;){if(H=nt,H.flags&2048)try{switch(H.tag){case 0:case 11:case 15:Gl(9,H)}}catch(lt){An(H,H.return,lt)}if(H===M){nt=null;break e}var He=H.sibling;if(He!==null){He.return=H.return,nt=He;break e}nt=H.return}}if(Ut=S,ms(),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(Mt,n)}catch{}g=!0}return g}finally{It=f,ii.transition=o}}return!1}function J0(n,o,f){o=Mo(f,o),o=x0(n,o,1),n=gs(n,o,1),o=Nr(),n!==null&&(V(n,1,o),Br(n,o))}function An(n,o,f){if(n.tag===3)J0(n,n,f);else for(;o!==null;){if(o.tag===3){J0(o,n,f);break}else if(o.tag===1){var g=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(ys===null||!ys.has(g))){n=Mo(f,n),n=y0(o,n,1),o=gs(o,n,1),n=Nr(),o!==null&&(V(o,1,n),Br(o,n));break}}o=o.return}}function u2(n,o,f){var g=n.pingCache;g!==null&&g.delete(o),o=Nr(),n.pingedLanes|=n.suspendedLanes&f,Qn===n&&(cr&f)===f&&(Gn===4||Gn===3&&(cr&130023424)===cr&&500>Ft()-nd?Qs(n,0):td|=f),Br(n,o)}function e1(n,o){o===0&&(n.mode&1?(o=ns,ns<<=1,!(ns&130023424)&&(ns=4194304)):o=1);var f=Nr();n=zi(n,o),n!==null&&(V(n,o,f),Br(n,f))}function d2(n){var o=n.memoizedState,f=0;o!==null&&(f=o.retryLane),e1(n,f)}function f2(n,o){var f=0;switch(n.tag){case 13:var g=n.stateNode,S=n.memoizedState;S!==null&&(f=S.retryLane);break;case 19:g=n.stateNode;break;default:throw Error(a(314))}g!==null&&g.delete(o),e1(n,f)}var t1;t1=function(n,o,f){if(n!==null)if(n.memoizedProps!==o.pendingProps||Or.current)Lr=!0;else{if(!(n.lanes&f)&&!(o.flags&128))return Lr=!1,Jx(n,o,f);Lr=!!(n.flags&131072)}else Lr=!1,fn&&o.flags&1048576&&Oh(o,Tl,o.index);switch(o.lanes=0,o.tag){case 2:var g=o.type;Wl(n,o),n=o.pendingProps;var S=Ao(o,gr.current);ko(o,f),S=Mu(null,o,g,n,S,f);var I=Ou();return o.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Dr(g)?(I=!0,Al(o)):I=!1,o.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,Nu(o),S.updater=Ul,o.stateNode=S,S._reactInternals=o,Vu(o,g,n,f),o=Hu(null,o,g,!0,I,f)):(o.tag=0,fn&&I&&gu(o),Ar(null,o,S,f),o=o.child),o;case 16:g=o.elementType;e:{switch(Wl(n,o),n=o.pendingProps,S=g._init,g=S(g._payload),o.type=g,S=o.tag=m2(g),n=mi(g,n),S){case 0:o=Wu(null,o,g,n,f);break e;case 1:o=I0(null,o,g,n,f);break e;case 11:o=b0(null,o,g,n,f);break e;case 14:o=E0(null,o,g,mi(g.type,n),f);break e}throw Error(a(306,g,""))}return o;case 0:return g=o.type,S=o.pendingProps,S=o.elementType===g?S:mi(g,S),Wu(n,o,g,S,f);case 1:return g=o.type,S=o.pendingProps,S=o.elementType===g?S:mi(g,S),I0(n,o,g,S,f);case 3:e:{if(T0(o),n===null)throw Error(a(387));g=o.pendingProps,I=o.memoizedState,S=I.element,Wh(n,o),Ol(o,g,null,f);var M=o.memoizedState;if(g=M.element,I.isDehydrated)if(I={element:g,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},o.updateQueue.baseState=I,o.memoizedState=I,o.flags&256){S=Mo(Error(a(423)),o),o=_0(n,o,g,f,S);break e}else if(g!==S){S=Mo(Error(a(424)),o),o=_0(n,o,g,f,S);break e}else for($r=ds(o.stateNode.containerInfo.firstChild),Yr=o,fn=!0,hi=null,f=Uh(o,null,g,f),o.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(To(),g===S){o=Hi(n,o,f);break e}Ar(n,o,g,f)}o=o.child}return o;case 5:return Xh(o),n===null&&wu(o),g=o.type,S=o.pendingProps,I=n!==null?n.memoizedProps:null,M=S.children,uu(g,S)?M=null:I!==null&&uu(g,I)&&(o.flags|=32),N0(n,o),Ar(n,o,M,f),o.child;case 6:return n===null&&wu(o),null;case 13:return R0(n,o,f);case 4:return Iu(o,o.stateNode.containerInfo),g=o.pendingProps,n===null?o.child=_o(o,null,g,f):Ar(n,o,g,f),o.child;case 11:return g=o.type,S=o.pendingProps,S=o.elementType===g?S:mi(g,S),b0(n,o,g,S,f);case 7:return Ar(n,o,o.pendingProps,f),o.child;case 8:return Ar(n,o,o.pendingProps.children,f),o.child;case 12:return Ar(n,o,o.pendingProps.children,f),o.child;case 10:e:{if(g=o.type._context,S=o.pendingProps,I=o.memoizedProps,M=S.value,rn(kl,g._currentValue),g._currentValue=M,I!==null)if(se(I.value,M)){if(I.children===S.children&&!Or.current){o=Hi(n,o,f);break e}}else for(I=o.child,I!==null&&(I.return=o);I!==null;){var H=I.dependencies;if(H!==null){M=I.child;for(var J=H.firstContext;J!==null;){if(J.context===g){if(I.tag===1){J=Wi(-1,f&-f),J.tag=2;var me=I.updateQueue;if(me!==null){me=me.shared;var Me=me.pending;Me===null?J.next=J:(J.next=Me.next,Me.next=J),me.pending=J}}I.lanes|=f,J=I.alternate,J!==null&&(J.lanes|=f),Su(I.return,f,o),H.lanes|=f;break}J=J.next}}else if(I.tag===10)M=I.type===o.type?null:I.child;else if(I.tag===18){if(M=I.return,M===null)throw Error(a(341));M.lanes|=f,H=M.alternate,H!==null&&(H.lanes|=f),Su(M,f,o),M=I.sibling}else M=I.child;if(M!==null)M.return=I;else for(M=I;M!==null;){if(M===o){M=null;break}if(I=M.sibling,I!==null){I.return=M.return,M=I;break}M=M.return}I=M}Ar(n,o,S.children,f),o=o.child}return o;case 9:return S=o.type,g=o.pendingProps.children,ko(o,f),S=ni(S),g=g(S),o.flags|=1,Ar(n,o,g,f),o.child;case 14:return g=o.type,S=mi(g,o.pendingProps),S=mi(g.type,S),E0(n,o,g,S,f);case 15:return S0(n,o,o.type,o.pendingProps,f);case 17:return g=o.type,S=o.pendingProps,S=o.elementType===g?S:mi(g,S),Wl(n,o),o.tag=1,Dr(g)?(n=!0,Al(o)):n=!1,ko(o,f),p0(o,g,S),Vu(o,g,S,f),Hu(null,o,g,!0,n,f);case 19:return P0(n,o,f);case 22:return A0(n,o,f)}throw Error(a(156,o.tag))};function n1(n,o){return Cr(n,o)}function h2(n,o,f,g){this.tag=n,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(n,o,f,g){return new h2(n,o,f,g)}function ud(n){return n=n.prototype,!(!n||!n.isReactComponent)}function m2(n){if(typeof n=="function")return ud(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Se)return 11;if(n===X)return 14}return 2}function bs(n,o){var f=n.alternate;return f===null?(f=si(n.tag,o,n.key,n.mode),f.elementType=n.elementType,f.type=n.type,f.stateNode=n.stateNode,f.alternate=n,n.alternate=f):(f.pendingProps=o,f.type=n.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=n.flags&14680064,f.childLanes=n.childLanes,f.lanes=n.lanes,f.child=n.child,f.memoizedProps=n.memoizedProps,f.memoizedState=n.memoizedState,f.updateQueue=n.updateQueue,o=n.dependencies,f.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},f.sibling=n.sibling,f.index=n.index,f.ref=n.ref,f}function ec(n,o,f,g,S,I){var M=2;if(g=n,typeof n=="function")ud(n)&&(M=1);else if(typeof n=="string")M=5;else e:switch(n){case q:return eo(f.children,S,I,o);case ie:M=8,S|=8;break;case te:return n=si(12,f,o,S|2),n.elementType=te,n.lanes=I,n;case Te:return n=si(13,f,o,S),n.elementType=Te,n.lanes=I,n;case be:return n=si(19,f,o,S),n.elementType=be,n.lanes=I,n;case we:return tc(f,S,I,o);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ye:M=10;break e;case Oe:M=9;break e;case Se:M=11;break e;case X:M=14;break e;case Le:M=16,g=null;break e}throw Error(a(130,n==null?n:typeof n,""))}return o=si(M,f,o,S),o.elementType=n,o.type=g,o.lanes=I,o}function eo(n,o,f,g){return n=si(7,n,g,o),n.lanes=f,n}function tc(n,o,f,g){return n=si(22,n,g,o),n.elementType=we,n.lanes=f,n.stateNode={isHidden:!1},n}function dd(n,o,f){return n=si(6,n,null,o),n.lanes=f,n}function fd(n,o,f){return o=si(4,n.children!==null?n.children:[],n.key,o),o.lanes=f,o.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},o}function p2(n,o,f,g,S){this.tag=o,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=oe(0),this.expirationTimes=oe(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oe(0),this.identifierPrefix=g,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function hd(n,o,f,g,S,I,M,H,J){return n=new p2(n,o,f,H,J),o===1?(o=1,I===!0&&(o|=8)):o=0,I=si(3,null,null,o),n.current=I,I.stateNode=n,I.memoizedState={element:g,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nu(I),n}function g2(n,o,f){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ne,key:g==null?null:""+g,children:n,containerInfo:o,implementation:f}}function r1(n){if(!n)return hs;n=n._reactInternals;e:{if(sr(n)!==n||n.tag!==1)throw Error(a(170));var o=n;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Dr(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(a(171))}if(n.tag===1){var f=n.type;if(Dr(f))return kh(n,f,o)}return o}function i1(n,o,f,g,S,I,M,H,J){return n=hd(f,g,!0,n,S,I,M,H,J),n.context=r1(null),f=n.current,g=Nr(),S=vs(f),I=Wi(g,S),I.callback=o??null,gs(f,I,S),n.current.lanes=S,V(n,S,g),Br(n,g),n}function nc(n,o,f,g){var S=o.current,I=Nr(),M=vs(S);return f=r1(f),o.context===null?o.context=f:o.pendingContext=f,o=Wi(I,M),o.payload={element:n},g=g===void 0?null:g,g!==null&&(o.callback=g),n=gs(S,o,M),n!==null&&(xi(n,S,M,I),Ml(n,S,M)),M}function rc(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function s1(n,o){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var f=n.retryLane;n.retryLane=f!==0&&f<o?f:o}}function md(n,o){s1(n,o),(n=n.alternate)&&s1(n,o)}function x2(){return null}var o1=typeof reportError=="function"?reportError:function(n){console.error(n)};function pd(n){this._internalRoot=n}ic.prototype.render=pd.prototype.render=function(n){var o=this._internalRoot;if(o===null)throw Error(a(409));nc(n,o,null,null)},ic.prototype.unmount=pd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var o=n.containerInfo;qs(function(){nc(null,n,null,null)}),o[Bi]=null}};function ic(n){this._internalRoot=n}ic.prototype.unstable_scheduleHydration=function(n){if(n){var o=Ge();n={blockedOn:null,target:n,priority:o};for(var f=0;f<tn.length&&o!==0&&o<tn[f].priority;f++);tn.splice(f,0,n),f===0&&cl(n)}};function gd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function sc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function a1(){}function y2(n,o,f,g,S){if(S){if(typeof g=="function"){var I=g;g=function(){var me=rc(M);I.call(me)}}var M=i1(o,g,n,0,null,!1,!1,"",a1);return n._reactRootContainer=M,n[Bi]=M.current,fa(n.nodeType===8?n.parentNode:n),qs(),M}for(;S=n.lastChild;)n.removeChild(S);if(typeof g=="function"){var H=g;g=function(){var me=rc(J);H.call(me)}}var J=hd(n,0,!1,null,null,!1,!1,"",a1);return n._reactRootContainer=J,n[Bi]=J.current,fa(n.nodeType===8?n.parentNode:n),qs(function(){nc(o,J,f,g)}),J}function oc(n,o,f,g,S){var I=f._reactRootContainer;if(I){var M=I;if(typeof S=="function"){var H=S;S=function(){var J=rc(M);H.call(J)}}nc(o,M,n,S)}else M=y2(f,o,n,S,g);return rc(M)}Ve=function(n){switch(n.tag){case 3:var o=n.stateNode;if(o.current.memoizedState.isDehydrated){var f=Zt(o.pendingLanes);f!==0&&(on(o,f|1),Br(o,Ft()),!(Ut&6)&&(Lo=Ft()+500,ms()))}break;case 13:qs(function(){var g=zi(n,1);if(g!==null){var S=Nr();xi(g,n,1,S)}}),md(n,1)}},qe=function(n){if(n.tag===13){var o=zi(n,134217728);if(o!==null){var f=Nr();xi(o,n,134217728,f)}md(n,134217728)}},Ue=function(n){if(n.tag===13){var o=vs(n),f=zi(n,o);if(f!==null){var g=Nr();xi(f,n,o,g)}md(n,o)}},Ge=function(){return It},jt=function(n,o){var f=It;try{return It=n,o()}finally{It=f}},Cn=function(n,o,f){switch(o){case"input":if(pt(n,f),o=f.name,f.type==="radio"&&o!=null){for(f=n;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<f.length;o++){var g=f[o];if(g!==n&&g.form===n.form){var S=El(g);if(!S)throw Error(a(90));ce(g),pt(g,S)}}}break;case"textarea":Xe(n,f);break;case"select":o=f.value,o!=null&&ze(n,!!f.multiple,o,!1)}},vi=ad,Kt=qs;var w2={usingClientEntryPoint:!1,Events:[pa,Eo,El,Rr,bn,ad]},_a={findFiberByHostInstance:Ws,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},v2={bundleType:_a.bundleType,version:_a.version,rendererPackageName:_a.rendererPackageName,rendererConfig:_a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Z.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Rs(n),n===null?null:n.stateNode},findFiberByHostInstance:_a.findFiberByHostInstance||x2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{Mt=ac.inject(v2),At=ac}catch{}}return Fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w2,Fr.createPortal=function(n,o){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gd(o))throw Error(a(200));return g2(n,o,null,f)},Fr.createRoot=function(n,o){if(!gd(n))throw Error(a(299));var f=!1,g="",S=o1;return o!=null&&(o.unstable_strictMode===!0&&(f=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onRecoverableError!==void 0&&(S=o.onRecoverableError)),o=hd(n,1,!1,null,null,f,!1,g,S),n[Bi]=o.current,fa(n.nodeType===8?n.parentNode:n),new pd(o)},Fr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var o=n._reactInternals;if(o===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=Rs(o),n=n===null?null:n.stateNode,n},Fr.flushSync=function(n){return qs(n)},Fr.hydrate=function(n,o,f){if(!sc(o))throw Error(a(200));return oc(null,n,o,!0,f)},Fr.hydrateRoot=function(n,o,f){if(!gd(n))throw Error(a(405));var g=f!=null&&f.hydratedSources||null,S=!1,I="",M=o1;if(f!=null&&(f.unstable_strictMode===!0&&(S=!0),f.identifierPrefix!==void 0&&(I=f.identifierPrefix),f.onRecoverableError!==void 0&&(M=f.onRecoverableError)),o=i1(o,null,n,1,f??null,S,!1,I,M),n[Bi]=o.current,fa(n),g)for(n=0;n<g.length;n++)f=g[n],S=f._getVersion,S=S(f._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[f,S]:o.mutableSourceEagerHydrationData.push(f,S);return new ic(o)},Fr.render=function(n,o,f){if(!sc(o))throw Error(a(200));return oc(null,n,o,!1,f)},Fr.unmountComponentAtNode=function(n){if(!sc(n))throw Error(a(40));return n._reactRootContainer?(qs(function(){oc(null,null,n,!1,function(){n._reactRootContainer=null,n[Bi]=null})}),!0):!1},Fr.unstable_batchedUpdates=ad,Fr.unstable_renderSubtreeIntoContainer=function(n,o,f,g){if(!sc(f))throw Error(a(200));if(n==null||n._reactInternals===void 0)throw Error(a(38));return oc(n,o,f,!1,g)},Fr.version="18.3.1-next-f1338f8080-20240426",Fr}var p1;function T2(){if(p1)return wd.exports;p1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(i){console.error(i)}}return t(),wd.exports=I2(),wd.exports}var g1;function _2(){if(g1)return cc;g1=1;var t=T2();return cc.createRoot=t.createRoot,cc.hydrateRoot=t.hydrateRoot,cc}var R2=_2();const Fn=N.createContext(null),k2=({children:t})=>{const[i,a]=N.useState(null),[u,m]=N.useState(null),[x,w]=N.useState(null),[b,v]=N.useState(null),[C,A]=N.useState(!1),[T,_]=N.useState(null),[O,L]=N.useState(!1),[B,j]=N.useState(!0),[W,U]=N.useState("Connecting..."),F=N.useRef(null),Z=async()=>{j(!0),U("Connecting..."),F.current&&clearTimeout(F.current),F.current=setTimeout(()=>{U("Taking longer than expected. Check your connection.")},1e4);try{try{const te=await fetch(window.server_url+"/auth/session",{method:"GET",credentials:"include"});if(te.ok){const ye=await te.json();if(ye.authenticated){console.log("SESSION AUTH SUCCESS:",ye);const Oe=localStorage.getItem("user");Oe&&Oe!==ye.user.username&&(console.log("Session user differs from cached user, clearing stale credentials"),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user")),ye.access_token&&(console.log("Session includes JWT, storing in localStorage"),localStorage.setItem("access_token",ye.access_token),localStorage.setItem("user",ye.user.username),ye.refresh_token&&localStorage.setItem("refresh_token",ye.refresh_token)),A(!0),a(ye.user.username),m(ye.user.profile||null),_(ye.user.permissions||null),L(ye.user.email_verified===!0);return}}}catch(te){console.log("Session auth check failed (this is ok if using JWT):",te)}const ie=localStorage.getItem("access_token");if(ie)try{const te=await fetch(window.server_url+"/load_user",{headers:{Authorization:`Bearer ${ie}`},credentials:"include"});if(te.ok){A(!0);const ye=await te.json();console.log("JWT AUTH SUCCESS:",ye),a(ye.username),m(ye.profile),_(ye.permissions),L(ye.email_verified===!0),console.log("PERMISSIONS:",ye.permissions)}else console.log("TOKEN INVALID"),localStorage.removeItem("access_token"),a(null),m(null),w(null),v(null),A(!1)}catch(te){console.log("JWT auth error (network issue):",te);const ye=localStorage.getItem("user");ie&&ye&&(console.log("Using optimistic auth with cached user:",ye),a(ye),A(!0))}}finally{F.current&&(clearTimeout(F.current),F.current=null),j(!1)}};N.useEffect(()=>{Z()},[]);const Q=ie=>{a(ie.username),w(ie.access_token),v(ie.refresh_token),_(ie.permissions),console.log("PRE SAVE USERNAME:",ie.username),localStorage.setItem("user",ie.username),localStorage.setItem("access_token",ie.access_token),localStorage.setItem("refresh_token",ie.refresh_token)},ne=async(ie,te)=>{const ye=await fetch(window.server_url+"/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:ie,password:te})});if(ye.ok){const Oe=await ye.json();console.log("SIGNED UP, userData:",Oe)}},q=async()=>{try{await fetch(window.server_url+"/auth/logout",{method:"POST",credentials:"include"})}catch(ie){console.log("Logout request failed (session may already be cleared):",ie)}localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),a(null),m(null),w(null),v(null),A(!1),_(null),L(!1)};return h.jsx(Fn.Provider,{value:{user:i,login:Q,signup:ne,logout:q,userProfile:u,checkAuth:Z,permissions:T,emailVerified:O,isAuthLoading:B,authLoadingMessage:W},children:t})};var Yd=function(t,i){return Yd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var m in u)Object.prototype.hasOwnProperty.call(u,m)&&(a[m]=u[m])},Yd(t,i)};function P2(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");Yd(t,i);function a(){this.constructor=t}t.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}var ur=function(){return ur=Object.assign||function(i){for(var a,u=1,m=arguments.length;u<m;u++){a=arguments[u];for(var x in a)Object.prototype.hasOwnProperty.call(a,x)&&(i[x]=a[x])}return i},ur.apply(this,arguments)};var bd,x1;function M2(){if(x1)return bd;x1=1;var t=!1,i,a,u,m,x,w,b,v,C,A,T,_,O,L,B;function j(){if(!t){t=!0;var U=navigator.userAgent,F=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(U),Z=/(Mac OS X)|(Windows)|(Linux)/.exec(U);if(_=/\b(iPhone|iP[ao]d)/.exec(U),O=/\b(iP[ao]d)/.exec(U),A=/Android/i.exec(U),L=/FBAN\/\w+;/i.exec(U),B=/Mobile/i.exec(U),T=!!/Win64/.exec(U),F){i=F[1]?parseFloat(F[1]):F[5]?parseFloat(F[5]):NaN,i&&document&&document.documentMode&&(i=document.documentMode);var Q=/(?:Trident\/(\d+.\d+))/.exec(U);w=Q?parseFloat(Q[1])+4:i,a=F[2]?parseFloat(F[2]):NaN,u=F[3]?parseFloat(F[3]):NaN,m=F[4]?parseFloat(F[4]):NaN,m?(F=/(?:Chrome\/(\d+\.\d+))/.exec(U),x=F&&F[1]?parseFloat(F[1]):NaN):x=NaN}else i=a=u=x=m=NaN;if(Z){if(Z[1]){var ne=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(U);b=ne?parseFloat(ne[1].replace("_",".")):!0}else b=!1;v=!!Z[2],C=!!Z[3]}else b=v=C=!1}}var W={ie:function(){return j()||i},ieCompatibilityMode:function(){return j()||w>i},ie64:function(){return W.ie()&&T},firefox:function(){return j()||a},opera:function(){return j()||u},webkit:function(){return j()||m},safari:function(){return W.webkit()},chrome:function(){return j()||x},windows:function(){return j()||v},osx:function(){return j()||b},linux:function(){return j()||C},iphone:function(){return j()||_},mobile:function(){return j()||_||O||A||B},nativeApp:function(){return j()||L},android:function(){return j()||A},ipad:function(){return j()||O}};return bd=W,bd}var Ed,y1;function O2(){if(y1)return Ed;y1=1;var t=!!(typeof window<"u"&&window.document&&window.document.createElement),i={canUseDOM:t,canUseWorkers:typeof Worker<"u",canUseEventListeners:t&&!!(window.addEventListener||window.attachEvent),canUseViewport:t&&!!window.screen,isInWorker:!t};return Ed=i,Ed}var Sd,w1;function D2(){if(w1)return Sd;w1=1;var t=O2(),i;t.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function a(u,m){if(!t.canUseDOM||m&&!("addEventListener"in document))return!1;var x="on"+u,w=x in document;if(!w){var b=document.createElement("div");b.setAttribute(x,"return;"),w=typeof b[x]=="function"}return!w&&i&&u==="wheel"&&(w=document.implementation.hasFeature("Events.wheel","3.0")),w}return Sd=a,Sd}var Ad,v1;function L2(){if(v1)return Ad;v1=1;var t=M2(),i=D2(),a=10,u=40,m=800;function x(w){var b=0,v=0,C=0,A=0;return"detail"in w&&(v=w.detail),"wheelDelta"in w&&(v=-w.wheelDelta/120),"wheelDeltaY"in w&&(v=-w.wheelDeltaY/120),"wheelDeltaX"in w&&(b=-w.wheelDeltaX/120),"axis"in w&&w.axis===w.HORIZONTAL_AXIS&&(b=v,v=0),C=b*a,A=v*a,"deltaY"in w&&(A=w.deltaY),"deltaX"in w&&(C=w.deltaX),(C||A)&&w.deltaMode&&(w.deltaMode==1?(C*=u,A*=u):(C*=m,A*=m)),C&&!b&&(b=C<1?-1:1),A&&!v&&(v=A<1?-1:1),{spinX:b,spinY:v,pixelX:C,pixelY:A}}return x.getEventType=function(){return t.firefox()?"DOMMouseScroll":i("wheel")?"wheel":"mousewheel"},Ad=x,Ad}var Nd,C1;function j2(){return C1||(C1=1,Nd=L2()),Nd}var B2=j2();const F2=fp(B2);function V2(t,i,a,u,m,x){x===void 0&&(x=0);var w=Go(t,i,x),b=w.width,v=w.height,C=Math.min(b,a),A=Math.min(v,u);return C>A*m?{width:A*m,height:A}:{width:C,height:C/m}}function U2(t){return t.width>t.height?t.width/t.naturalWidth:t.height/t.naturalHeight}function ka(t,i,a,u,m){m===void 0&&(m=0);var x=Go(i.width,i.height,m),w=x.width,b=x.height;return{x:b1(t.x,w,a.width,u),y:b1(t.y,b,a.height,u)}}function b1(t,i,a,u){var m=i*u/2-a/2;return Fc(t,-m,m)}function E1(t,i){return Math.sqrt(Math.pow(t.y-i.y,2)+Math.pow(t.x-i.x,2))}function S1(t,i){return Math.atan2(i.y-t.y,i.x-t.x)*180/Math.PI}function z2(t,i,a,u,m,x,w){x===void 0&&(x=0),w===void 0&&(w=!0);var b=w?W2:H2,v=Go(i.width,i.height,x),C=Go(i.naturalWidth,i.naturalHeight,x),A={x:b(100,((v.width-a.width/m)/2-t.x/m)/v.width*100),y:b(100,((v.height-a.height/m)/2-t.y/m)/v.height*100),width:b(100,a.width/v.width*100/m),height:b(100,a.height/v.height*100/m)},T=Math.round(b(C.width,A.width*C.width/100)),_=Math.round(b(C.height,A.height*C.height/100)),O=C.width>=C.height*u,L=O?{width:Math.round(_*u),height:_}:{width:T,height:Math.round(T/u)},B=ur(ur({},L),{x:Math.round(b(C.width-L.width,A.x*C.width/100)),y:Math.round(b(C.height-L.height,A.y*C.height/100))});return{croppedAreaPercentages:A,croppedAreaPixels:B}}function W2(t,i){return Math.min(t,Math.max(0,i))}function H2(t,i){return i}function G2(t,i,a,u,m,x){var w=Go(i.width,i.height,a),b=Fc(u.width/w.width*(100/t.width),m,x),v={x:b*w.width/2-u.width/2-w.width*b*(t.x/100),y:b*w.height/2-u.height/2-w.height*b*(t.y/100)};return{crop:v,zoom:b}}function X2(t,i,a){var u=U2(i);return a.height>a.width?a.height/(t.height*u):a.width/(t.width*u)}function Y2(t,i,a,u,m,x){a===void 0&&(a=0);var w=Go(i.naturalWidth,i.naturalHeight,a),b=Fc(X2(t,i,u),m,x),v=u.height>u.width?u.height/t.height:u.width/t.width,C={x:((w.width-t.width)/2-t.x)*v,y:((w.height-t.height)/2-t.y)*v};return{crop:C,zoom:b}}function A1(t,i){return{x:(i.x+t.x)/2,y:(i.y+t.y)/2}}function $2(t){return t*Math.PI/180}function Go(t,i,a){var u=$2(a);return{width:Math.abs(Math.cos(u)*t)+Math.abs(Math.sin(u)*i),height:Math.abs(Math.sin(u)*t)+Math.abs(Math.cos(u)*i)}}function Fc(t,i,a){return Math.min(Math.max(t,i),a)}function uc(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return t.filter(function(a){return typeof a=="string"&&a.length>0}).join(" ").trim()}var Z2=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,K2=1,q2=3,Q2=1,Vc=function(t){P2(i,t);function i(){var a=t!==null&&t.apply(this,arguments)||this;return a.imageRef=N.createRef(),a.videoRef=N.createRef(),a.containerPosition={x:0,y:0},a.containerRef=null,a.styleRef=null,a.containerRect=null,a.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},a.dragStartPosition={x:0,y:0},a.dragStartCrop={x:0,y:0},a.gestureZoomStart=0,a.gestureRotationStart=0,a.isTouching=!1,a.lastPinchDistance=0,a.lastPinchRotation=0,a.rafDragTimeout=null,a.rafPinchTimeout=null,a.wheelTimer=null,a.currentDoc=typeof document<"u"?document:null,a.currentWindow=typeof window<"u"?window:null,a.resizeObserver=null,a.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},a.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!a.containerRef)){var u=!0;a.resizeObserver=new window.ResizeObserver(function(m){if(u){u=!1;return}a.computeSizes()}),a.resizeObserver.observe(a.containerRef)}},a.preventZoomSafari=function(u){return u.preventDefault()},a.cleanEvents=function(){a.currentDoc&&(a.currentDoc.removeEventListener("mousemove",a.onMouseMove),a.currentDoc.removeEventListener("mouseup",a.onDragStopped),a.currentDoc.removeEventListener("touchmove",a.onTouchMove),a.currentDoc.removeEventListener("touchend",a.onDragStopped),a.currentDoc.removeEventListener("gesturemove",a.onGestureMove),a.currentDoc.removeEventListener("gestureend",a.onGestureEnd),a.currentDoc.removeEventListener("scroll",a.onScroll))},a.clearScrollEvent=function(){a.containerRef&&a.containerRef.removeEventListener("wheel",a.onWheel),a.wheelTimer&&clearTimeout(a.wheelTimer)},a.onMediaLoad=function(){var u=a.computeSizes();u&&(a.emitCropData(),a.setInitialCrop(u)),a.props.onMediaLoaded&&a.props.onMediaLoaded(a.mediaSize)},a.setInitialCrop=function(u){if(a.props.initialCroppedAreaPercentages){var m=G2(a.props.initialCroppedAreaPercentages,a.mediaSize,a.props.rotation,u,a.props.minZoom,a.props.maxZoom),x=m.crop,w=m.zoom;a.props.onCropChange(x),a.props.onZoomChange&&a.props.onZoomChange(w)}else if(a.props.initialCroppedAreaPixels){var b=Y2(a.props.initialCroppedAreaPixels,a.mediaSize,a.props.rotation,u,a.props.minZoom,a.props.maxZoom),x=b.crop,w=b.zoom;a.props.onCropChange(x),a.props.onZoomChange&&a.props.onZoomChange(w)}},a.computeSizes=function(){var u,m,x,w,b,v,C=a.imageRef.current||a.videoRef.current;if(C&&a.containerRef){a.containerRect=a.containerRef.getBoundingClientRect(),a.saveContainerPosition();var A=a.containerRect.width/a.containerRect.height,T=((u=a.imageRef.current)===null||u===void 0?void 0:u.naturalWidth)||((m=a.videoRef.current)===null||m===void 0?void 0:m.videoWidth)||0,_=((x=a.imageRef.current)===null||x===void 0?void 0:x.naturalHeight)||((w=a.videoRef.current)===null||w===void 0?void 0:w.videoHeight)||0,O=C.offsetWidth<T||C.offsetHeight<_,L=T/_,B=void 0;if(O)switch(a.state.mediaObjectFit){default:case"contain":B=A>L?{width:a.containerRect.height*L,height:a.containerRect.height}:{width:a.containerRect.width,height:a.containerRect.width/L};break;case"horizontal-cover":B={width:a.containerRect.width,height:a.containerRect.width/L};break;case"vertical-cover":B={width:a.containerRect.height*L,height:a.containerRect.height};break}else B={width:C.offsetWidth,height:C.offsetHeight};a.mediaSize=ur(ur({},B),{naturalWidth:T,naturalHeight:_}),a.props.setMediaSize&&a.props.setMediaSize(a.mediaSize);var j=a.props.cropSize?a.props.cropSize:V2(a.mediaSize.width,a.mediaSize.height,a.containerRect.width,a.containerRect.height,a.props.aspect,a.props.rotation);return(((b=a.state.cropSize)===null||b===void 0?void 0:b.height)!==j.height||((v=a.state.cropSize)===null||v===void 0?void 0:v.width)!==j.width)&&a.props.onCropSizeChange&&a.props.onCropSizeChange(j),a.setState({cropSize:j},a.recomputeCropPosition),a.props.setCropSize&&a.props.setCropSize(j),j}},a.saveContainerPosition=function(){if(a.containerRef){var u=a.containerRef.getBoundingClientRect();a.containerPosition={x:u.left,y:u.top}}},a.onMouseDown=function(u){a.currentDoc&&(u.preventDefault(),a.currentDoc.addEventListener("mousemove",a.onMouseMove),a.currentDoc.addEventListener("mouseup",a.onDragStopped),a.saveContainerPosition(),a.onDragStart(i.getMousePoint(u)))},a.onMouseMove=function(u){return a.onDrag(i.getMousePoint(u))},a.onScroll=function(u){a.currentDoc&&(u.preventDefault(),a.saveContainerPosition())},a.onTouchStart=function(u){a.currentDoc&&(a.isTouching=!0,!(a.props.onTouchRequest&&!a.props.onTouchRequest(u))&&(a.currentDoc.addEventListener("touchmove",a.onTouchMove,{passive:!1}),a.currentDoc.addEventListener("touchend",a.onDragStopped),a.saveContainerPosition(),u.touches.length===2?a.onPinchStart(u):u.touches.length===1&&a.onDragStart(i.getTouchPoint(u.touches[0]))))},a.onTouchMove=function(u){u.preventDefault(),u.touches.length===2?a.onPinchMove(u):u.touches.length===1&&a.onDrag(i.getTouchPoint(u.touches[0]))},a.onGestureStart=function(u){a.currentDoc&&(u.preventDefault(),a.currentDoc.addEventListener("gesturechange",a.onGestureMove),a.currentDoc.addEventListener("gestureend",a.onGestureEnd),a.gestureZoomStart=a.props.zoom,a.gestureRotationStart=a.props.rotation)},a.onGestureMove=function(u){if(u.preventDefault(),!a.isTouching){var m=i.getMousePoint(u),x=a.gestureZoomStart-1+u.scale;if(a.setNewZoom(x,m,{shouldUpdatePosition:!0}),a.props.onRotationChange){var w=a.gestureRotationStart+u.rotation;a.props.onRotationChange(w)}}},a.onGestureEnd=function(u){a.cleanEvents()},a.onDragStart=function(u){var m,x,w=u.x,b=u.y;a.dragStartPosition={x:w,y:b},a.dragStartCrop=ur({},a.props.crop),(x=(m=a.props).onInteractionStart)===null||x===void 0||x.call(m)},a.onDrag=function(u){var m=u.x,x=u.y;a.currentWindow&&(a.rafDragTimeout&&a.currentWindow.cancelAnimationFrame(a.rafDragTimeout),a.rafDragTimeout=a.currentWindow.requestAnimationFrame(function(){if(a.state.cropSize&&!(m===void 0||x===void 0)){var w=m-a.dragStartPosition.x,b=x-a.dragStartPosition.y,v={x:a.dragStartCrop.x+w,y:a.dragStartCrop.y+b},C=a.props.restrictPosition?ka(v,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):v;a.props.onCropChange(C)}}))},a.onDragStopped=function(){var u,m;a.isTouching=!1,a.cleanEvents(),a.emitCropData(),(m=(u=a.props).onInteractionEnd)===null||m===void 0||m.call(u)},a.onWheel=function(u){if(a.currentWindow&&!(a.props.onWheelRequest&&!a.props.onWheelRequest(u))){u.preventDefault();var m=i.getMousePoint(u),x=F2(u).pixelY,w=a.props.zoom-x*a.props.zoomSpeed/200;a.setNewZoom(w,m,{shouldUpdatePosition:!0}),a.state.hasWheelJustStarted||a.setState({hasWheelJustStarted:!0},function(){var b,v;return(v=(b=a.props).onInteractionStart)===null||v===void 0?void 0:v.call(b)}),a.wheelTimer&&clearTimeout(a.wheelTimer),a.wheelTimer=a.currentWindow.setTimeout(function(){return a.setState({hasWheelJustStarted:!1},function(){var b,v;return(v=(b=a.props).onInteractionEnd)===null||v===void 0?void 0:v.call(b)})},250)}},a.getPointOnContainer=function(u,m){var x=u.x,w=u.y;if(!a.containerRect)throw new Error("The Cropper is not mounted");return{x:a.containerRect.width/2-(x-m.x),y:a.containerRect.height/2-(w-m.y)}},a.getPointOnMedia=function(u){var m=u.x,x=u.y,w=a.props,b=w.crop,v=w.zoom;return{x:(m+b.x)/v,y:(x+b.y)/v}},a.setNewZoom=function(u,m,x){var w=x===void 0?{}:x,b=w.shouldUpdatePosition,v=b===void 0?!0:b;if(!(!a.state.cropSize||!a.props.onZoomChange)){var C=Fc(u,a.props.minZoom,a.props.maxZoom);if(v){var A=a.getPointOnContainer(m,a.containerPosition),T=a.getPointOnMedia(A),_={x:T.x*C-A.x,y:T.y*C-A.y},O=a.props.restrictPosition?ka(_,a.mediaSize,a.state.cropSize,C,a.props.rotation):_;a.props.onCropChange(O)}a.props.onZoomChange(C)}},a.getCropData=function(){if(!a.state.cropSize)return null;var u=a.props.restrictPosition?ka(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;return z2(u,a.mediaSize,a.state.cropSize,a.getAspect(),a.props.zoom,a.props.rotation,a.props.restrictPosition)},a.emitCropData=function(){var u=a.getCropData();if(u){var m=u.croppedAreaPercentages,x=u.croppedAreaPixels;a.props.onCropComplete&&a.props.onCropComplete(m,x),a.props.onCropAreaChange&&a.props.onCropAreaChange(m,x)}},a.emitCropAreaChange=function(){var u=a.getCropData();if(u){var m=u.croppedAreaPercentages,x=u.croppedAreaPixels;a.props.onCropAreaChange&&a.props.onCropAreaChange(m,x)}},a.recomputeCropPosition=function(){if(a.state.cropSize){var u=a.props.restrictPosition?ka(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;a.props.onCropChange(u),a.emitCropData()}},a.onKeyDown=function(u){var m=a.props,x=m.crop,w=m.onCropChange,b=m.keyboardStep,v=m.zoom,C=m.rotation,A=b;if(a.state.cropSize){u.shiftKey&&(A*=.2);var T=ur({},x);switch(u.key){case"ArrowUp":T.y-=A,u.preventDefault();break;case"ArrowDown":T.y+=A,u.preventDefault();break;case"ArrowLeft":T.x-=A,u.preventDefault();break;case"ArrowRight":T.x+=A,u.preventDefault();break;default:return}a.props.restrictPosition&&(T=ka(T,a.mediaSize,a.state.cropSize,v,C)),w(T)}},a}return i.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=Z2,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef))},i.prototype.componentWillUnmount=function(){var a,u;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(a=this.resizeObserver)===null||a===void 0||a.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((u=this.styleRef.parentNode)===null||u===void 0||u.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},i.prototype.componentDidUpdate=function(a){var u,m,x,w,b,v,C,A,T;a.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):a.aspect!==this.props.aspect?this.computeSizes():a.objectFit!==this.props.objectFit?this.computeSizes():a.zoom!==this.props.zoom?this.recomputeCropPosition():((u=a.cropSize)===null||u===void 0?void 0:u.height)!==((m=this.props.cropSize)===null||m===void 0?void 0:m.height)||((x=a.cropSize)===null||x===void 0?void 0:x.width)!==((w=this.props.cropSize)===null||w===void 0?void 0:w.width)?this.computeSizes():(((b=a.crop)===null||b===void 0?void 0:b.x)!==((v=this.props.crop)===null||v===void 0?void 0:v.x)||((C=a.crop)===null||C===void 0?void 0:C.y)!==((A=this.props.crop)===null||A===void 0?void 0:A.y))&&this.emitCropAreaChange(),a.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),a.video!==this.props.video&&((T=this.videoRef.current)===null||T===void 0||T.load());var _=this.getObjectFit();_!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:_},this.computeSizes)},i.prototype.getAspect=function(){var a=this.props,u=a.cropSize,m=a.aspect;return u?u.width/u.height:m},i.prototype.getObjectFit=function(){var a,u,m,x;if(this.props.objectFit==="cover"){var w=this.imageRef.current||this.videoRef.current;if(w&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var b=this.containerRect.width/this.containerRect.height,v=((a=this.imageRef.current)===null||a===void 0?void 0:a.naturalWidth)||((u=this.videoRef.current)===null||u===void 0?void 0:u.videoWidth)||0,C=((m=this.imageRef.current)===null||m===void 0?void 0:m.naturalHeight)||((x=this.videoRef.current)===null||x===void 0?void 0:x.videoHeight)||0,A=v/C;return A<b?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},i.prototype.onPinchStart=function(a){var u=i.getTouchPoint(a.touches[0]),m=i.getTouchPoint(a.touches[1]);this.lastPinchDistance=E1(u,m),this.lastPinchRotation=S1(u,m),this.onDragStart(A1(u,m))},i.prototype.onPinchMove=function(a){var u=this;if(!(!this.currentDoc||!this.currentWindow)){var m=i.getTouchPoint(a.touches[0]),x=i.getTouchPoint(a.touches[1]),w=A1(m,x);this.onDrag(w),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var b=E1(m,x),v=u.props.zoom*(b/u.lastPinchDistance);u.setNewZoom(v,w,{shouldUpdatePosition:!1}),u.lastPinchDistance=b;var C=S1(m,x),A=u.props.rotation+(C-u.lastPinchRotation);u.props.onRotationChange&&u.props.onRotationChange(A),u.lastPinchRotation=C})}},i.prototype.render=function(){var a=this,u,m=this.props,x=m.image,w=m.video,b=m.mediaProps,v=m.transform,C=m.crop,A=C.x,T=C.y,_=m.rotation,O=m.zoom,L=m.cropShape,B=m.showGrid,j=m.style,W=j.containerStyle,U=j.cropAreaStyle,F=j.mediaStyle,Z=m.classes,Q=Z.containerClassName,ne=Z.cropAreaClassName,q=Z.mediaClassName,ie=(u=this.state.mediaObjectFit)!==null&&u!==void 0?u:this.getObjectFit();return N.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(ye){return a.containerRef=ye},"data-testid":"container",style:W,className:uc("reactEasyCrop_Container",Q)},x?N.createElement("img",ur({alt:"",className:uc("reactEasyCrop_Image",ie==="contain"&&"reactEasyCrop_Contain",ie==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",ie==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",q)},b,{src:x,ref:this.imageRef,style:ur(ur({},F),{transform:v||"translate(".concat(A,"px, ").concat(T,"px) rotate(").concat(_,"deg) scale(").concat(O,")")}),onLoad:this.onMediaLoad})):w&&N.createElement("video",ur({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:uc("reactEasyCrop_Video",ie==="contain"&&"reactEasyCrop_Contain",ie==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",ie==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",q)},b,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:ur(ur({},F),{transform:v||"translate(".concat(A,"px, ").concat(T,"px) rotate(").concat(_,"deg) scale(").concat(O,")")}),controls:!1}),(Array.isArray(w)?w:[{src:w}]).map(function(te){return N.createElement("source",ur({key:te.src},te))})),this.state.cropSize&&N.createElement("div",{style:ur(ur({},U),{width:this.state.cropSize.width,height:this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,"data-testid":"cropper",className:uc("reactEasyCrop_CropArea",L==="round"&&"reactEasyCrop_CropAreaRound",B&&"reactEasyCrop_CropAreaGrid",ne)}))},i.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:q2,minZoom:K2,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:Q2},i.getMousePoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},i.getTouchPoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},i}(N.Component),Pa={},N1;function J2(){return N1||(N1=1,Pa.createCanvas=function(t,i){return Object.assign(document.createElement("canvas"),{width:t,height:i})},Pa.createImageData=function(t,i,a){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(t);case 2:return new ImageData(t,i);default:return new ImageData(t,i,a)}},Pa.loadImage=function(t,i){return new Promise(function(a,u){const m=Object.assign(document.createElement("img"),i);function x(){m.onload=null,m.onerror=null}m.onload=function(){x(),a(m)},m.onerror=function(){x(),u(new Error('Failed to load the image "'+t+'"'))},m.src=t})}),Pa}J2();async function Uc(t,i){return console.log("Image source being cropped:",t),new Promise((a,u)=>{const m=new Image;m.onload=()=>{const x=document.createElement("canvas"),w=x.getContext("2d");x.width=i.width,x.height=i.height,w.drawImage(m,i.x,i.y,i.width,i.height,0,0,i.width,i.height);try{const b=x.toDataURL("image/jpeg");a(b)}catch{u(new Error("Error converting canvas to base64"))}},m.onerror=x=>u(new Error(`Image load error: ${x.message}`)),m.src=t})}async function wt(t,i={}){const a=localStorage.getItem("access_token"),u={...i,credentials:"include",headers:{...a&&{Authorization:`Bearer ${a}`},...i.headers}};return fetch(`${window.server_url}${t}`,u)}const ey=({onSubmit:t,onClose:i,existingProfile:a})=>{const{user:u,userProfile:m,checkAuth:x}=N.useContext(Fn),[w,b]=N.useState({name:(m==null?void 0:m.name)||"",image:null,imagePreview:m!=null&&m.image_data?`data:image/jpeg;base64,${m.image_data}`:"/assets/fakeprofile.png",croppedImage:null}),[v,C]=N.useState({x:0,y:0}),[A,T]=N.useState(1),[_,O]=N.useState(null),[L,B]=N.useState(!1),[j,W]=N.useState(!1),U=Q=>{const ne=Q.target.files[0];if(ne){const q=new FileReader;q.onload=ie=>{b(te=>({...te,image:ne,imagePreview:ie.target.result})),B(!0)},q.readAsDataURL(ne)}},F=(Q,ne)=>{console.log("Cropped Area Pixels:",ne),O(ne)};async function Z(Q){Q.preventDefault();let ne;if(w.croppedImage)ne=w.croppedImage.split(",")[1];else if(w.image instanceof File){const ie=await w.image.arrayBuffer();ne=btoa(new Uint8Array(ie).reduce((te,ye)=>te+String.fromCharCode(ye),""))}else if(m!=null&&m.image_data)ne=m.image_data;else{console.error("No valid image provided");return}const q={name:w.name,image_data:ne};console.log("Image data (first 100 chars):",ne.substring(0,100));try{const ie=await wt("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(q)});if(!ie.ok)throw new Error("Failed to update profile");const te=await ie.json();await x(),console.log("Profile updated successfully:",te),i()}catch(ie){console.error("Error updating profile:",ie)}}return h.jsx("div",{className:"profile-creation-overlay",style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:h.jsxs("div",{className:"profile-creation-modal",style:{width:"70%",maxWidth:"500px",backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",padding:"2rem",boxShadow:"0 10px 30px rgba(20,77,255,0.15)",position:"relative",border:"1px solid rgba(20,77,255,0.1)"},children:[h.jsx("button",{onClick:i,style:{position:"absolute",top:"1.2rem",right:"1.2rem",background:"none",border:"none",fontSize:"1.8rem",cursor:"pointer",color:"#144dff",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.1)"}},children:""}),h.jsx("h2",{style:{fontSize:"clamp(1.8rem, 6vw, 2.5rem)",color:"#144dff",textAlign:"center",marginBottom:"2rem",fontWeight:"600"},children:"Your Profile"}),h.jsxs("form",{onSubmit:Z,style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[h.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem"},children:[h.jsx("label",{style:{color:"#144dff",fontWeight:"500",fontSize:"1rem"},children:"Your Name"}),h.jsx("input",{type:"text",value:w.name,onChange:Q=>b({...w,name:Q.target.value}),style:{width:"100%",padding:"12px",borderRadius:"12px",border:"2px solid #e0e0e0",fontSize:"0.9rem",transition:"all 0.3s ease",backgroundColor:"rgba(255,255,255,0.9)","&:focus":{borderColor:"#144dff",outline:"none",boxShadow:"0 0 0 3px rgba(20,77,255,0.1)"}}})]}),!L&&h.jsx("div",{style:{width:"250px",height:"250px",margin:"0 auto",borderRadius:"20%",overflow:"hidden",border:"7px solid #144dff",boxShadow:"0 8px 25px rgba(20,77,255,0.2)",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.02)"}},children:h.jsx("img",{src:w.croppedImage?w.croppedImage:w.imagePreview?w.imagePreview:m!=null&&m.image_data?`data:image/jpeg;base64,${m.image_data}`:"/assets/fakeprofile.png",alt:"Profile preview",style:{width:"100%",height:"100%",objectFit:"cover"}})}),h.jsxs("div",{style:{textAlign:"center"},children:[h.jsx("input",{type:"file",id:"image-upload",accept:"image/*",onChange:U,style:{display:"none"}}),h.jsx("label",{htmlFor:"image-upload",style:{padding:"0.8rem 1.2rem",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",borderRadius:"25px",cursor:"pointer",display:"inline-block",fontSize:"0.9rem",fontWeight:"600",boxShadow:"0 4px 15px rgba(20,77,255,0.2)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Upload New Image"})]}),L&&h.jsxs("div",{style:{width:"100%",maxWidth:"300px",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",gap:"1.2rem"},children:[h.jsx("div",{style:{position:"relative",width:"250px",height:"250px",borderRadius:"20%",overflow:"hidden",border:"7px solid #144dff",boxShadow:"0 8px 25px rgba(20,77,255,0.2)"},children:h.jsx(Vc,{image:w.imagePreview,crop:v,zoom:A,aspect:1,onCropComplete:F,onCropChange:C,onZoomChange:T})}),h.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[h.jsx("button",{type:"button",onClick:()=>{B(!1),w.croppedImage||b(Q=>({...Q,imagePreview:null}))},style:{padding:"0.8rem 1.2rem",borderRadius:"25px",border:"2px solid #144dff",background:"white",color:"#144dff",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease","&:hover":{background:"rgba(20,77,255,0.1)"}},children:"Cancel"}),h.jsx("button",{type:"button",onClick:async()=>{try{const Q=await Uc(w.imagePreview,_);b(ne=>({...ne,croppedImage:Q,imagePreview:Q})),B(!1),W(!0),setTimeout(()=>W(!1),1e4)}catch(Q){console.error("Error cropping image:",Q)}},className:`save-profile-button ${j?"glow-bounce":""}`,style:{padding:"0.8rem 1.2rem",borderRadius:"25px",border:"none",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(20,77,255,0.2)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Save Cropped Image"})]})]}),h.jsx("button",{type:"submit",className:`save-profile-button ${j?"glow-bounce":""}`,style:{padding:"1rem",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",border:"none",borderRadius:"25px",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",marginTop:"1rem",boxShadow:"0 4px 15px rgba(20,77,255,0.2)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Save Profile"})]})]})})};var Ma={},I1;function ty(){if(I1)return Ma;I1=1,Object.defineProperty(Ma,"__esModule",{value:!0}),Ma.parse=w,Ma.serialize=C;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,i=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,u=/^[\u0020-\u003A\u003D-\u007E]*$/,m=Object.prototype.toString,x=(()=>{const _=function(){};return _.prototype=Object.create(null),_})();function w(_,O){const L=new x,B=_.length;if(B<2)return L;const j=(O==null?void 0:O.decode)||A;let W=0;do{const U=_.indexOf("=",W);if(U===-1)break;const F=_.indexOf(";",W),Z=F===-1?B:F;if(U>Z){W=_.lastIndexOf(";",U-1)+1;continue}const Q=b(_,W,U),ne=v(_,U,Q),q=_.slice(Q,ne);if(L[q]===void 0){let ie=b(_,U+1,Z),te=v(_,Z,ie);const ye=j(_.slice(ie,te));L[q]=ye}W=Z+1}while(W<B);return L}function b(_,O,L){do{const B=_.charCodeAt(O);if(B!==32&&B!==9)return O}while(++O<L);return L}function v(_,O,L){for(;O>L;){const B=_.charCodeAt(--O);if(B!==32&&B!==9)return O+1}return L}function C(_,O,L){const B=(L==null?void 0:L.encode)||encodeURIComponent;if(!t.test(_))throw new TypeError(`argument name is invalid: ${_}`);const j=B(O);if(!i.test(j))throw new TypeError(`argument val is invalid: ${O}`);let W=_+"="+j;if(!L)return W;if(L.maxAge!==void 0){if(!Number.isInteger(L.maxAge))throw new TypeError(`option maxAge is invalid: ${L.maxAge}`);W+="; Max-Age="+L.maxAge}if(L.domain){if(!a.test(L.domain))throw new TypeError(`option domain is invalid: ${L.domain}`);W+="; Domain="+L.domain}if(L.path){if(!u.test(L.path))throw new TypeError(`option path is invalid: ${L.path}`);W+="; Path="+L.path}if(L.expires){if(!T(L.expires)||!Number.isFinite(L.expires.valueOf()))throw new TypeError(`option expires is invalid: ${L.expires}`);W+="; Expires="+L.expires.toUTCString()}if(L.httpOnly&&(W+="; HttpOnly"),L.secure&&(W+="; Secure"),L.partitioned&&(W+="; Partitioned"),L.priority)switch(typeof L.priority=="string"?L.priority.toLowerCase():void 0){case"low":W+="; Priority=Low";break;case"medium":W+="; Priority=Medium";break;case"high":W+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${L.priority}`)}if(L.sameSite)switch(typeof L.sameSite=="string"?L.sameSite.toLowerCase():L.sameSite){case!0:case"strict":W+="; SameSite=Strict";break;case"lax":W+="; SameSite=Lax";break;case"none":W+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${L.sameSite}`)}return W}function A(_){if(_.indexOf("%")===-1)return _;try{return decodeURIComponent(_)}catch{return _}}function T(_){return m.call(_)==="[object Date]"}return Ma}ty();/**
 * react-router v7.0.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var T1="popstate";function ny(t={}){function i(u,m){let{pathname:x,search:w,hash:b}=u.location;return $d("",{pathname:x,search:w,hash:b},m.state&&m.state.usr||null,m.state&&m.state.key||"default")}function a(u,m){return typeof m=="string"?m:Xa(m)}return iy(i,a,null,t)}function wn(t,i){if(t===!1||t===null||typeof t>"u")throw new Error(i)}function wi(t,i){if(!t){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function ry(){return Math.random().toString(36).substring(2,10)}function _1(t,i){return{usr:t.state,key:t.key,idx:i}}function $d(t,i,a=null,u){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof i=="string"?$o(i):i,state:a,key:i&&i.key||u||ry()}}function Xa({pathname:t="/",search:i="",hash:a=""}){return i&&i!=="?"&&(t+=i.charAt(0)==="?"?i:"?"+i),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function $o(t){let i={};if(t){let a=t.indexOf("#");a>=0&&(i.hash=t.substring(a),t=t.substring(0,a));let u=t.indexOf("?");u>=0&&(i.search=t.substring(u),t=t.substring(0,u)),t&&(i.pathname=t)}return i}function iy(t,i,a,u={}){let{window:m=document.defaultView,v5Compat:x=!1}=u,w=m.history,b="POP",v=null,C=A();C==null&&(C=0,w.replaceState({...w.state,idx:C},""));function A(){return(w.state||{idx:null}).idx}function T(){b="POP";let j=A(),W=j==null?null:j-C;C=j,v&&v({action:b,location:B.location,delta:W})}function _(j,W){b="PUSH";let U=$d(B.location,j,W);C=A()+1;let F=_1(U,C),Z=B.createHref(U);try{w.pushState(F,"",Z)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;m.location.assign(Z)}x&&v&&v({action:b,location:B.location,delta:1})}function O(j,W){b="REPLACE";let U=$d(B.location,j,W);C=A();let F=_1(U,C),Z=B.createHref(U);w.replaceState(F,"",Z),x&&v&&v({action:b,location:B.location,delta:0})}function L(j){let W=m.location.origin!=="null"?m.location.origin:m.location.href,U=typeof j=="string"?j:Xa(j);return U=U.replace(/ $/,"%20"),wn(W,`No window.location.(origin|href) available to create URL for href: ${U}`),new URL(U,W)}let B={get action(){return b},get location(){return t(m,w)},listen(j){if(v)throw new Error("A history only accepts one active listener");return m.addEventListener(T1,T),v=j,()=>{m.removeEventListener(T1,T),v=null}},createHref(j){return i(m,j)},createURL:L,encodeLocation(j){let W=L(j);return{pathname:W.pathname,search:W.search,hash:W.hash}},push:_,replace:O,go(j){return w.go(j)}};return B}function hp(t,i,a="/"){return sy(t,i,a,!1)}function sy(t,i,a,u){let m=typeof i=="string"?$o(i):i,x=Ns(m.pathname||"/",a);if(x==null)return null;let w=mp(t);oy(w);let b=null;for(let v=0;b==null&&v<w.length;++v){let C=xy(x);b=py(w[v],C,u)}return b}function mp(t,i=[],a=[],u=""){let m=(x,w,b)=>{let v={relativePath:b===void 0?x.path||"":b,caseSensitive:x.caseSensitive===!0,childrenIndex:w,route:x};v.relativePath.startsWith("/")&&(wn(v.relativePath.startsWith(u),`Absolute route path "${v.relativePath}" nested under path "${u}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(u.length));let C=Yi([u,v.relativePath]),A=a.concat(v);x.children&&x.children.length>0&&(wn(x.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${C}".`),mp(x.children,i,A,C)),!(x.path==null&&!x.index)&&i.push({path:C,score:hy(C,x.index),routesMeta:A})};return t.forEach((x,w)=>{var b;if(x.path===""||!((b=x.path)!=null&&b.includes("?")))m(x,w);else for(let v of pp(x.path))m(x,w,v)}),i}function pp(t){let i=t.split("/");if(i.length===0)return[];let[a,...u]=i,m=a.endsWith("?"),x=a.replace(/\?$/,"");if(u.length===0)return m?[x,""]:[x];let w=pp(u.join("/")),b=[];return b.push(...w.map(v=>v===""?x:[x,v].join("/"))),m&&b.push(...w),b.map(v=>t.startsWith("/")&&v===""?"/":v)}function oy(t){t.sort((i,a)=>i.score!==a.score?a.score-i.score:my(i.routesMeta.map(u=>u.childrenIndex),a.routesMeta.map(u=>u.childrenIndex)))}var ay=/^:[\w-]+$/,ly=3,cy=2,uy=1,dy=10,fy=-2,R1=t=>t==="*";function hy(t,i){let a=t.split("/"),u=a.length;return a.some(R1)&&(u+=fy),i&&(u+=cy),a.filter(m=>!R1(m)).reduce((m,x)=>m+(ay.test(x)?ly:x===""?uy:dy),u)}function my(t,i){return t.length===i.length&&t.slice(0,-1).every((u,m)=>u===i[m])?t[t.length-1]-i[i.length-1]:0}function py(t,i,a=!1){let{routesMeta:u}=t,m={},x="/",w=[];for(let b=0;b<u.length;++b){let v=u[b],C=b===u.length-1,A=x==="/"?i:i.slice(x.length)||"/",T=Ic({path:v.relativePath,caseSensitive:v.caseSensitive,end:C},A),_=v.route;if(!T&&C&&a&&!u[u.length-1].route.index&&(T=Ic({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},A)),!T)return null;Object.assign(m,T.params),w.push({params:m,pathname:Yi([x,T.pathname]),pathnameBase:Cy(Yi([x,T.pathnameBase])),route:_}),T.pathnameBase!=="/"&&(x=Yi([x,T.pathnameBase]))}return w}function Ic(t,i){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,u]=gy(t.path,t.caseSensitive,t.end),m=i.match(a);if(!m)return null;let x=m[0],w=x.replace(/(.)\/+$/,"$1"),b=m.slice(1);return{params:u.reduce((C,{paramName:A,isOptional:T},_)=>{if(A==="*"){let L=b[_]||"";w=x.slice(0,x.length-L.length).replace(/(.)\/+$/,"$1")}const O=b[_];return T&&!O?C[A]=void 0:C[A]=(O||"").replace(/%2F/g,"/"),C},{}),pathname:x,pathnameBase:w,pattern:t}}function gy(t,i=!1,a=!0){wi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let u=[],m="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(w,b,v)=>(u.push({paramName:b,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(u.push({paramName:"*"}),m+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?m+="\\/*$":t!==""&&t!=="/"&&(m+="(?:(?=\\/|$))"),[new RegExp(m,i?void 0:"i"),u]}function xy(t){try{return t.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return wi(!1,`The URL path "${t}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${i}).`),t}}function Ns(t,i){if(i==="/")return t;if(!t.toLowerCase().startsWith(i.toLowerCase()))return null;let a=i.endsWith("/")?i.length-1:i.length,u=t.charAt(a);return u&&u!=="/"?null:t.slice(a)||"/"}function yy(t,i="/"){let{pathname:a,search:u="",hash:m=""}=typeof t=="string"?$o(t):t;return{pathname:a?a.startsWith("/")?a:wy(a,i):i,search:by(u),hash:Ey(m)}}function wy(t,i){let a=i.replace(/\/+$/,"").split("/");return t.split("/").forEach(m=>{m===".."?a.length>1&&a.pop():m!=="."&&a.push(m)}),a.length>1?a.join("/"):"/"}function Id(t,i,a,u){return`Cannot include a '${t}' character in a manually specified \`to.${i}\` field [${JSON.stringify(u)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vy(t){return t.filter((i,a)=>a===0||i.route.path&&i.route.path.length>0)}function gp(t){let i=vy(t);return i.map((a,u)=>u===i.length-1?a.pathname:a.pathnameBase)}function xp(t,i,a,u=!1){let m;typeof t=="string"?m=$o(t):(m={...t},wn(!m.pathname||!m.pathname.includes("?"),Id("?","pathname","search",m)),wn(!m.pathname||!m.pathname.includes("#"),Id("#","pathname","hash",m)),wn(!m.search||!m.search.includes("#"),Id("#","search","hash",m)));let x=t===""||m.pathname==="",w=x?"/":m.pathname,b;if(w==null)b=a;else{let T=i.length-1;if(!u&&w.startsWith("..")){let _=w.split("/");for(;_[0]==="..";)_.shift(),T-=1;m.pathname=_.join("/")}b=T>=0?i[T]:"/"}let v=yy(m,b),C=w&&w!=="/"&&w.endsWith("/"),A=(x||w===".")&&a.endsWith("/");return!v.pathname.endsWith("/")&&(C||A)&&(v.pathname+="/"),v}var Yi=t=>t.join("/").replace(/\/\/+/g,"/"),Cy=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),by=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Ey=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Sy(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var yp=["POST","PUT","PATCH","DELETE"];new Set(yp);var Ay=["GET",...yp];new Set(Ay);var Zo=N.createContext(null);Zo.displayName="DataRouter";var zc=N.createContext(null);zc.displayName="DataRouterState";var wp=N.createContext({isTransitioning:!1});wp.displayName="ViewTransition";var Ny=N.createContext(new Map);Ny.displayName="Fetchers";var Iy=N.createContext(null);Iy.displayName="Await";var ki=N.createContext(null);ki.displayName="Navigation";var Ja=N.createContext(null);Ja.displayName="Location";var Pi=N.createContext({outlet:null,matches:[],isDataRoute:!1});Pi.displayName="Route";var If=N.createContext(null);If.displayName="RouteError";function Ty(t,{relative:i}={}){wn(el(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:u}=N.useContext(ki),{hash:m,pathname:x,search:w}=tl(t,{relative:i}),b=x;return a!=="/"&&(b=x==="/"?a:Yi([a,x])),u.createHref({pathname:b,search:w,hash:m})}function el(){return N.useContext(Ja)!=null}function Ur(){return wn(el(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(Ja).location}var vp="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Cp(t){N.useContext(ki).static||N.useLayoutEffect(t)}function On(){let{isDataRoute:t}=N.useContext(Pi);return t?zy():_y()}function _y(){wn(el(),"useNavigate() may be used only in the context of a <Router> component.");let t=N.useContext(Zo),{basename:i,navigator:a}=N.useContext(ki),{matches:u}=N.useContext(Pi),{pathname:m}=Ur(),x=JSON.stringify(gp(u)),w=N.useRef(!1);return Cp(()=>{w.current=!0}),N.useCallback((v,C={})=>{if(wi(w.current,vp),!w.current)return;if(typeof v=="number"){a.go(v);return}let A=xp(v,JSON.parse(x),m,C.relative==="path");t==null&&i!=="/"&&(A.pathname=A.pathname==="/"?i:Yi([i,A.pathname])),(C.replace?a.replace:a.push)(A,C.state,C)},[i,a,x,m,t])}N.createContext(null);function Ry(){let{matches:t}=N.useContext(Pi),i=t[t.length-1];return i?i.params:{}}function tl(t,{relative:i}={}){let{matches:a}=N.useContext(Pi),{pathname:u}=Ur(),m=JSON.stringify(gp(a));return N.useMemo(()=>xp(t,JSON.parse(m),u,i==="path"),[t,m,u,i])}function ky(t,i){return bp(t,i)}function bp(t,i,a,u){var W;wn(el(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:m}=N.useContext(ki),{matches:x}=N.useContext(Pi),w=x[x.length-1],b=w?w.params:{},v=w?w.pathname:"/",C=w?w.pathnameBase:"/",A=w&&w.route;{let U=A&&A.path||"";Ep(v,!A||U.endsWith("*")||U.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${v}" (under <Route path="${U}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${U}"> to <Route path="${U==="/"?"*":`${U}/*`}">.`)}let T=Ur(),_;if(i){let U=typeof i=="string"?$o(i):i;wn(C==="/"||((W=U.pathname)==null?void 0:W.startsWith(C)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${C}" but pathname "${U.pathname}" was given in the \`location\` prop.`),_=U}else _=T;let O=_.pathname||"/",L=O;if(C!=="/"){let U=C.replace(/^\//,"").split("/");L="/"+O.replace(/^\//,"").split("/").slice(U.length).join("/")}let B=hp(t,{pathname:L});wi(A||B!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),wi(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=Ly(B&&B.map(U=>Object.assign({},U,{params:Object.assign({},b,U.params),pathname:Yi([C,m.encodeLocation?m.encodeLocation(U.pathname).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?C:Yi([C,m.encodeLocation?m.encodeLocation(U.pathnameBase).pathname:U.pathnameBase])})),x,a,u);return i&&j?N.createElement(Ja.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},j):j}function Py(){let t=Uy(),i=Sy(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,u="rgba(200,200,200, 0.5)",m={padding:"0.5rem",backgroundColor:u},x={padding:"2px 4px",backgroundColor:u},w=null;return console.error("Error handled by React Router default ErrorBoundary:",t),w=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:x},"ErrorBoundary")," or"," ",N.createElement("code",{style:x},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},i),a?N.createElement("pre",{style:m},a):null,w)}var My=N.createElement(Py,null),Oy=class extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,i){return i.location!==t.location||i.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:i.error,location:i.location,revalidation:t.revalidation||i.revalidation}}componentDidCatch(t,i){console.error("React Router caught the following error during render",t,i)}render(){return this.state.error!==void 0?N.createElement(Pi.Provider,{value:this.props.routeContext},N.createElement(If.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Dy({routeContext:t,match:i,children:a}){let u=N.useContext(Zo);return u&&u.static&&u.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=i.route.id),N.createElement(Pi.Provider,{value:t},a)}function Ly(t,i=[],a=null,u=null){if(t==null){if(!a)return null;if(a.errors)t=a.matches;else if(i.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let m=t,x=a==null?void 0:a.errors;if(x!=null){let v=m.findIndex(C=>C.route.id&&(x==null?void 0:x[C.route.id])!==void 0);wn(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(x).join(",")}`),m=m.slice(0,Math.min(m.length,v+1))}let w=!1,b=-1;if(a)for(let v=0;v<m.length;v++){let C=m[v];if((C.route.HydrateFallback||C.route.hydrateFallbackElement)&&(b=v),C.route.id){let{loaderData:A,errors:T}=a,_=C.route.loader&&!A.hasOwnProperty(C.route.id)&&(!T||T[C.route.id]===void 0);if(C.route.lazy||_){w=!0,b>=0?m=m.slice(0,b+1):m=[m[0]];break}}}return m.reduceRight((v,C,A)=>{let T,_=!1,O=null,L=null;a&&(T=x&&C.route.id?x[C.route.id]:void 0,O=C.route.errorElement||My,w&&(b<0&&A===0?(Ep("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,L=null):b===A&&(_=!0,L=C.route.hydrateFallbackElement||null)));let B=i.concat(m.slice(0,A+1)),j=()=>{let W;return T?W=O:_?W=L:C.route.Component?W=N.createElement(C.route.Component,null):C.route.element?W=C.route.element:W=v,N.createElement(Dy,{match:C,routeContext:{outlet:v,matches:B,isDataRoute:a!=null},children:W})};return a&&(C.route.ErrorBoundary||C.route.errorElement||A===0)?N.createElement(Oy,{location:a.location,revalidation:a.revalidation,component:O,error:T,children:j(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):j()},null)}function Tf(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jy(t){let i=N.useContext(Zo);return wn(i,Tf(t)),i}function By(t){let i=N.useContext(zc);return wn(i,Tf(t)),i}function Fy(t){let i=N.useContext(Pi);return wn(i,Tf(t)),i}function _f(t){let i=Fy(t),a=i.matches[i.matches.length-1];return wn(a.route.id,`${t} can only be used on routes that contain a unique "id"`),a.route.id}function Vy(){return _f("useRouteId")}function Uy(){var u;let t=N.useContext(If),i=By("useRouteError"),a=_f("useRouteError");return t!==void 0?t:(u=i.errors)==null?void 0:u[a]}function zy(){let{router:t}=jy("useNavigate"),i=_f("useNavigate"),a=N.useRef(!1);return Cp(()=>{a.current=!0}),N.useCallback(async(m,x={})=>{wi(a.current,vp),a.current&&(typeof m=="number"?t.navigate(m):await t.navigate(m,{fromRouteId:i,...x}))},[t,i])}var k1={};function Ep(t,i,a){!i&&!k1[t]&&(k1[t]=!0,wi(!1,a))}N.memo(Wy);function Wy({routes:t,future:i,state:a}){return bp(t,void 0,a,i)}function Xn(t){wn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Hy({basename:t="/",children:i=null,location:a,navigationType:u="POP",navigator:m,static:x=!1}){wn(!el(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let w=t.replace(/^\/*/,"/"),b=N.useMemo(()=>({basename:w,navigator:m,static:x,future:{}}),[w,m,x]);typeof a=="string"&&(a=$o(a));let{pathname:v="/",search:C="",hash:A="",state:T=null,key:_="default"}=a,O=N.useMemo(()=>{let L=Ns(v,w);return L==null?null:{location:{pathname:L,search:C,hash:A,state:T,key:_},navigationType:u}},[w,v,C,A,T,_,u]);return wi(O!=null,`<Router basename="${w}"> is not able to match the URL "${v}${C}${A}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:N.createElement(ki.Provider,{value:b},N.createElement(Ja.Provider,{children:i,value:O}))}function Gy({children:t,location:i}){return ky(Zd(t),i)}function Zd(t,i=[]){let a=[];return N.Children.forEach(t,(u,m)=>{if(!N.isValidElement(u))return;let x=[...i,m];if(u.type===N.Fragment){a.push.apply(a,Zd(u.props.children,x));return}wn(u.type===Xn,`[${typeof u.type=="string"?u.type:u.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),wn(!u.props.index||!u.props.children,"An index route cannot have child routes.");let w={id:u.props.id||x.join("-"),caseSensitive:u.props.caseSensitive,element:u.props.element,Component:u.props.Component,index:u.props.index,path:u.props.path,loader:u.props.loader,action:u.props.action,hydrateFallbackElement:u.props.hydrateFallbackElement,HydrateFallback:u.props.HydrateFallback,errorElement:u.props.errorElement,ErrorBoundary:u.props.ErrorBoundary,hasErrorBoundary:u.props.hasErrorBoundary===!0||u.props.ErrorBoundary!=null||u.props.errorElement!=null,shouldRevalidate:u.props.shouldRevalidate,handle:u.props.handle,lazy:u.props.lazy};u.props.children&&(w.children=Zd(u.props.children,x)),a.push(w)}),a}var wc="get",vc="application/x-www-form-urlencoded";function Wc(t){return t!=null&&typeof t.tagName=="string"}function Xy(t){return Wc(t)&&t.tagName.toLowerCase()==="button"}function Yy(t){return Wc(t)&&t.tagName.toLowerCase()==="form"}function $y(t){return Wc(t)&&t.tagName.toLowerCase()==="input"}function Zy(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Ky(t,i){return t.button===0&&(!i||i==="_self")&&!Zy(t)}function Kd(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((i,a)=>{let u=t[a];return i.concat(Array.isArray(u)?u.map(m=>[a,m]):[[a,u]])},[]))}function qy(t,i){let a=Kd(t);return i&&i.forEach((u,m)=>{a.has(m)||i.getAll(m).forEach(x=>{a.append(m,x)})}),a}var dc=null;function Qy(){if(dc===null)try{new FormData(document.createElement("form"),0),dc=!1}catch{dc=!0}return dc}var Jy=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Td(t){return t!=null&&!Jy.has(t)?(wi(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vc}"`),null):t}function ew(t,i){let a,u,m,x,w;if(Yy(t)){let b=t.getAttribute("action");u=b?Ns(b,i):null,a=t.getAttribute("method")||wc,m=Td(t.getAttribute("enctype"))||vc,x=new FormData(t)}else if(Xy(t)||$y(t)&&(t.type==="submit"||t.type==="image")){let b=t.form;if(b==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=t.getAttribute("formaction")||b.getAttribute("action");if(u=v?Ns(v,i):null,a=t.getAttribute("formmethod")||b.getAttribute("method")||wc,m=Td(t.getAttribute("formenctype"))||Td(b.getAttribute("enctype"))||vc,x=new FormData(b,t),!Qy()){let{name:C,type:A,value:T}=t;if(A==="image"){let _=C?`${C}.`:"";x.append(`${_}x`,"0"),x.append(`${_}y`,"0")}else C&&x.append(C,T)}}else{if(Wc(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=wc,u=null,m=vc,w=t}return x&&m==="text/plain"&&(w=x,x=void 0),{action:u,method:a.toLowerCase(),encType:m,formData:x,body:w}}function Rf(t,i){if(t===!1||t===null||typeof t>"u")throw new Error(i)}async function tw(t,i){if(t.id in i)return i[t.id];try{let a=await import(t.module);return i[t.id]=a,a}catch(a){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function nw(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function rw(t,i,a){let u=await Promise.all(t.map(async m=>{let x=i.routes[m.route.id];if(x){let w=await tw(x,a);return w.links?w.links():[]}return[]}));return aw(u.flat(1).filter(nw).filter(m=>m.rel==="stylesheet"||m.rel==="preload").map(m=>m.rel==="stylesheet"?{...m,rel:"prefetch",as:"style"}:{...m,rel:"prefetch"}))}function P1(t,i,a,u,m,x){let w=(v,C)=>a[C]?v.route.id!==a[C].route.id:!0,b=(v,C)=>{var A;return a[C].pathname!==v.pathname||((A=a[C].route.path)==null?void 0:A.endsWith("*"))&&a[C].params["*"]!==v.params["*"]};return x==="assets"?i.filter((v,C)=>w(v,C)||b(v,C)):x==="data"?i.filter((v,C)=>{var T;let A=u.routes[v.route.id];if(!A||!A.hasLoader)return!1;if(w(v,C)||b(v,C))return!0;if(v.route.shouldRevalidate){let _=v.route.shouldRevalidate({currentUrl:new URL(m.pathname+m.search+m.hash,window.origin),currentParams:((T=a[0])==null?void 0:T.params)||{},nextUrl:new URL(t,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function iw(t,i){return sw(t.map(a=>{let u=i.routes[a.route.id];if(!u)return[];let m=[u.module];return u.imports&&(m=m.concat(u.imports)),m}).flat(1))}function sw(t){return[...new Set(t)]}function ow(t){let i={},a=Object.keys(t).sort();for(let u of a)i[u]=t[u];return i}function aw(t,i){let a=new Set;return new Set(i),t.reduce((u,m)=>{let x=JSON.stringify(ow(m));return a.has(x)||(a.add(x),u.push({key:x,link:m})),u},[])}function lw(t){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname="_root.data":i.pathname=`${i.pathname.replace(/\/$/,"")}.data`,i}function cw(){let t=N.useContext(Zo);return Rf(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function uw(){let t=N.useContext(zc);return Rf(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var kf=N.createContext(void 0);kf.displayName="FrameworkContext";function Sp(){let t=N.useContext(kf);return Rf(t,"You must render this element inside a <HydratedRouter> element"),t}function dw(t,i){let a=N.useContext(kf),[u,m]=N.useState(!1),[x,w]=N.useState(!1),{onFocus:b,onBlur:v,onMouseEnter:C,onMouseLeave:A,onTouchStart:T}=i,_=N.useRef(null);N.useEffect(()=>{if(t==="render"&&w(!0),t==="viewport"){let B=W=>{W.forEach(U=>{w(U.isIntersecting)})},j=new IntersectionObserver(B,{threshold:.5});return _.current&&j.observe(_.current),()=>{j.disconnect()}}},[t]),N.useEffect(()=>{if(u){let B=setTimeout(()=>{w(!0)},100);return()=>{clearTimeout(B)}}},[u]);let O=()=>{m(!0)},L=()=>{m(!1),w(!1)};return a?t!=="intent"?[x,_,{}]:[x,_,{onFocus:Oa(b,O),onBlur:Oa(v,L),onMouseEnter:Oa(C,O),onMouseLeave:Oa(A,L),onTouchStart:Oa(T,O)}]:[!1,_,{}]}function Oa(t,i){return a=>{t&&t(a),a.defaultPrevented||i(a)}}function fw({page:t,...i}){let{router:a}=cw(),u=N.useMemo(()=>hp(a.routes,t,a.basename),[a.routes,t,a.basename]);return u?N.createElement(mw,{page:t,matches:u,...i}):(console.warn(`Tried to prefetch ${t} but no routes matched.`),null)}function hw(t){let{manifest:i,routeModules:a}=Sp(),[u,m]=N.useState([]);return N.useEffect(()=>{let x=!1;return rw(t,i,a).then(w=>{x||m(w)}),()=>{x=!0}},[t,i,a]),u}function mw({page:t,matches:i,...a}){let u=Ur(),{manifest:m,routeModules:x}=Sp(),{loaderData:w,matches:b}=uw(),v=N.useMemo(()=>P1(t,i,b,m,u,"data"),[t,i,b,m,u]),C=N.useMemo(()=>P1(t,i,b,m,u,"assets"),[t,i,b,m,u]),A=N.useMemo(()=>{if(t===u.pathname+u.search+u.hash)return[];let O=new Set,L=!1;if(i.forEach(j=>{var U;let W=m.routes[j.route.id];!W||!W.hasLoader||(!v.some(F=>F.route.id===j.route.id)&&j.route.id in w&&((U=x[j.route.id])!=null&&U.shouldRevalidate)||W.hasClientLoader?L=!0:O.add(j.route.id))}),O.size===0)return[];let B=lw(t);return L&&O.size>0&&B.searchParams.set("_routes",i.filter(j=>O.has(j.route.id)).map(j=>j.route.id).join(",")),[B.pathname+B.search]},[w,u,m,v,i,t,x]),T=N.useMemo(()=>iw(C,m),[C,m]),_=hw(C);return N.createElement(N.Fragment,null,A.map(O=>N.createElement("link",{key:O,rel:"prefetch",as:"fetch",href:O,...a})),T.map(O=>N.createElement("link",{key:O,rel:"modulepreload",href:O,...a})),_.map(({key:O,link:L})=>N.createElement("link",{key:O,...L})))}function pw(...t){return i=>{t.forEach(a=>{typeof a=="function"?a(i):a!=null&&(a.current=i)})}}var Ap=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ap&&(window.__reactRouterVersion="7.0.2")}catch{}function gw({basename:t,children:i,window:a}){let u=N.useRef();u.current==null&&(u.current=ny({window:a,v5Compat:!0}));let m=u.current,[x,w]=N.useState({action:m.action,location:m.location}),b=N.useCallback(v=>{N.startTransition(()=>w(v))},[w]);return N.useLayoutEffect(()=>m.listen(b),[m,b]),N.createElement(Hy,{basename:t,children:i,location:x.location,navigationType:x.action,navigator:m})}var Np=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ip=N.forwardRef(function({onClick:i,discover:a="render",prefetch:u="none",relative:m,reloadDocument:x,replace:w,state:b,target:v,to:C,preventScrollReset:A,viewTransition:T,..._},O){let{basename:L}=N.useContext(ki),B=typeof C=="string"&&Np.test(C),j,W=!1;if(typeof C=="string"&&B&&(j=C,Ap))try{let te=new URL(window.location.href),ye=C.startsWith("//")?new URL(te.protocol+C):new URL(C),Oe=Ns(ye.pathname,L);ye.origin===te.origin&&Oe!=null?C=Oe+ye.search+ye.hash:W=!0}catch{wi(!1,`<Link to="${C}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let U=Ty(C,{relative:m}),[F,Z,Q]=dw(u,_),ne=vw(C,{replace:w,state:b,target:v,preventScrollReset:A,relative:m,viewTransition:T});function q(te){i&&i(te),te.defaultPrevented||ne(te)}let ie=N.createElement("a",{..._,...Q,href:j||U,onClick:W||x?i:q,ref:pw(O,Z),target:v,"data-discover":!B&&a==="render"?"true":void 0});return F&&!B?N.createElement(N.Fragment,null,ie,N.createElement(fw,{page:U})):ie});Ip.displayName="Link";var xw=N.forwardRef(function({"aria-current":i="page",caseSensitive:a=!1,className:u="",end:m=!1,style:x,to:w,viewTransition:b,children:v,...C},A){let T=tl(w,{relative:C.relative}),_=Ur(),O=N.useContext(zc),{navigator:L,basename:B}=N.useContext(ki),j=O!=null&&Aw(T)&&b===!0,W=L.encodeLocation?L.encodeLocation(T).pathname:T.pathname,U=_.pathname,F=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;a||(U=U.toLowerCase(),F=F?F.toLowerCase():null,W=W.toLowerCase()),F&&B&&(F=Ns(F,B)||F);const Z=W!=="/"&&W.endsWith("/")?W.length-1:W.length;let Q=U===W||!m&&U.startsWith(W)&&U.charAt(Z)==="/",ne=F!=null&&(F===W||!m&&F.startsWith(W)&&F.charAt(W.length)==="/"),q={isActive:Q,isPending:ne,isTransitioning:j},ie=Q?i:void 0,te;typeof u=="function"?te=u(q):te=[u,Q?"active":null,ne?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let ye=typeof x=="function"?x(q):x;return N.createElement(Ip,{...C,"aria-current":ie,className:te,ref:A,style:ye,to:w,viewTransition:b},typeof v=="function"?v(q):v)});xw.displayName="NavLink";var yw=N.forwardRef(({discover:t="render",fetcherKey:i,navigate:a,reloadDocument:u,replace:m,state:x,method:w=wc,action:b,onSubmit:v,relative:C,preventScrollReset:A,viewTransition:T,..._},O)=>{let L=Ew(),B=Sw(b,{relative:C}),j=w.toLowerCase()==="get"?"get":"post",W=typeof b=="string"&&Np.test(b),U=F=>{if(v&&v(F),F.defaultPrevented)return;F.preventDefault();let Z=F.nativeEvent.submitter,Q=(Z==null?void 0:Z.getAttribute("formmethod"))||w;L(Z||F.currentTarget,{fetcherKey:i,method:Q,navigate:a,replace:m,state:x,relative:C,preventScrollReset:A,viewTransition:T})};return N.createElement("form",{ref:O,method:j,action:B,onSubmit:u?v:U,..._,"data-discover":!W&&t==="render"?"true":void 0})});yw.displayName="Form";function ww(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Tp(t){let i=N.useContext(Zo);return wn(i,ww(t)),i}function vw(t,{target:i,replace:a,state:u,preventScrollReset:m,relative:x,viewTransition:w}={}){let b=On(),v=Ur(),C=tl(t,{relative:x});return N.useCallback(A=>{if(Ky(A,i)){A.preventDefault();let T=a!==void 0?a:Xa(v)===Xa(C);b(t,{replace:T,state:u,preventScrollReset:m,relative:x,viewTransition:w})}},[v,b,C,a,u,i,t,m,x,w])}function _p(t){wi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let i=N.useRef(Kd(t)),a=N.useRef(!1),u=Ur(),m=N.useMemo(()=>qy(u.search,a.current?null:i.current),[u.search]),x=On(),w=N.useCallback((b,v)=>{const C=Kd(typeof b=="function"?b(m):b);a.current=!0,x("?"+C,v)},[x,m]);return[m,w]}var Cw=0,bw=()=>`__${String(++Cw)}__`;function Ew(){let{router:t}=Tp("useSubmit"),{basename:i}=N.useContext(ki),a=Vy();return N.useCallback(async(u,m={})=>{let{action:x,method:w,encType:b,formData:v,body:C}=ew(u,i);if(m.navigate===!1){let A=m.fetcherKey||bw();await t.fetch(A,a,m.action||x,{preventScrollReset:m.preventScrollReset,formData:v,body:C,formMethod:m.method||w,formEncType:m.encType||b,flushSync:m.flushSync})}else await t.navigate(m.action||x,{preventScrollReset:m.preventScrollReset,formData:v,body:C,formMethod:m.method||w,formEncType:m.encType||b,replace:m.replace,state:m.state,fromRouteId:a,flushSync:m.flushSync,viewTransition:m.viewTransition})},[t,i,a])}function Sw(t,{relative:i}={}){let{basename:a}=N.useContext(ki),u=N.useContext(Pi);wn(u,"useFormAction must be used inside a RouteContext");let[m]=u.matches.slice(-1),x={...tl(t||".",{relative:i})},w=Ur();if(t==null){x.search=w.search;let b=new URLSearchParams(x.search),v=b.getAll("index");if(v.some(A=>A==="")){b.delete("index"),v.filter(T=>T).forEach(T=>b.append("index",T));let A=b.toString();x.search=A?`?${A}`:""}}return(!t||t===".")&&m.route.index&&(x.search=x.search?x.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(x.pathname=x.pathname==="/"?a:Yi([a,x.pathname])),Xa(x)}function Aw(t,i={}){let a=N.useContext(wp);wn(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:u}=Tp("useViewTransitionState"),m=tl(t,{relative:i.relative});if(!a.isTransitioning)return!1;let x=Ns(a.currentLocation.pathname,u)||a.currentLocation.pathname,w=Ns(a.nextLocation.pathname,u)||a.nextLocation.pathname;return Ic(m.pathname,w)!=null||Ic(m.pathname,x)!=null}new TextEncoder;function Pf(){const t="./assets",i="/sounds/new_elevator_combined.mp3";On();const a=N.useRef(new Audio(t+i)),[u,m]=N.useState(!1),[x,w]=N.useState(!1),[b,v]=N.useState(null),[C,A]=N.useState(!1),[T,_]=N.useState(!1);N.useEffect(()=>{const U=a.current,F=()=>{U.pause(),U.currentTime=0,w(!1),j()};return U.addEventListener("ended",F),()=>U.removeEventListener("ended",F)},[T]);function O(){v(null),a.current.load(),a.current.play().then(()=>{a.current.pause(),a.current.currentTime=0,m(!0),w(!0),A(!0),B()}).catch(U=>{console.error("Error loading audio:",U),v("Failed to load audio. Please check the file path and format."),A(!1)})}function L(){return!!(a.current&&!a.current.paused)}function B(){a.current.paused?a.current.play().catch(U=>{console.error("Error playing audio:",U),v("Failed to play audio. Please try again.")}):a.current.currentTime=0}function j(){a.current&&(a.current.pause(),a.current.currentTime=0,a.current.src="",a.current=null)}function W(U){a.current.currentTime=U,console.log(a.current.duration)}return{audioRef:a,error:b,playSound:B,loadSound:O,seekTo:W,cancelSound:j,checkSound:L,soundEnabled:C,setSoundEnabled:A,isPlaying:x}}var Yn;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Yn||(Yn={}));Yn.QR_CODE,Yn.AZTEC,Yn.CODABAR,Yn.CODE_39,Yn.CODE_93,Yn.CODE_128,Yn.DATA_MATRIX,Yn.MAXICODE,Yn.ITF,Yn.EAN_13,Yn.EAN_8,Yn.PDF_417,Yn.RSS_14,Yn.RSS_EXPANDED,Yn.UPC_A,Yn.UPC_E,Yn.UPC_EAN_EXTENSION;var M1;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(M1||(M1={}));var Tc;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Tc||(Tc={}));var Nw=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Tc.SCAN_TYPE_CAMERA,Tc.SCAN_TYPE_FILE],t}(),O1;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(O1||(O1={}));var La={exports:{}},Iw=La.exports,D1;function Tw(){return D1||(D1=1,function(t,i){(function(a,u){u(i)})(Iw,function(a){function u(k){return k==null}var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,e){k.__proto__=e}||function(k,e){for(var r in e)e.hasOwnProperty(r)&&(k[r]=e[r])};function x(k,e){m(k,e);function r(){this.constructor=k}k.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function w(k,e){var r=Object.setPrototypeOf;r?r(k,e):k.__proto__=e}function b(k,e){e===void 0&&(e=k.constructor);var r=Error.captureStackTrace;r&&r(k,e)}var v=function(k){x(e,k);function e(r){var s=this.constructor,l=k.call(this,r)||this;return Object.defineProperty(l,"name",{value:s.name,enumerable:!1}),w(l,s.prototype),b(l),l}return e}(Error);class C extends v{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}C.kind="Exception";class A extends C{}A.kind="ArgumentException";class T extends C{}T.kind="IllegalArgumentException";class _{constructor(e){if(this.binarizer=e,e===null)throw new T("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,r){return this.binarizer.getBlackRow(e,r)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,r,s,l){const c=this.binarizer.getLuminanceSource().crop(e,r,s,l);return new _(this.binarizer.createBinarizer(c))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new _(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new _(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class O extends C{static getChecksumInstance(){return new O}}O.kind="ChecksumException";class L{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class B{static arraycopy(e,r,s,l,c){for(;c--;)s[l++]=e[r++]}static currentTimeMillis(){return Date.now()}}class j extends C{}j.kind="IndexOutOfBoundsException";class W extends j{constructor(e=void 0,r=void 0){super(r),this.index=e,this.message=r}}W.kind="ArrayIndexOutOfBoundsException";class U{static fill(e,r){for(let s=0,l=e.length;s<l;s++)e[s]=r}static fillWithin(e,r,s,l){U.rangeCheck(e.length,r,s);for(let c=r;c<s;c++)e[c]=l}static rangeCheck(e,r,s){if(r>s)throw new T("fromIndex("+r+") > toIndex("+s+")");if(r<0)throw new W(r);if(s>e)throw new W(s)}static asList(...e){return e}static create(e,r,s){return Array.from({length:e}).map(c=>Array.from({length:r}).fill(s))}static createInt32Array(e,r,s){return Array.from({length:e}).map(c=>Int32Array.from({length:r}).fill(s))}static equals(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(let s=0,l=e.length;s<l;s++)if(e[s]!==r[s])return!1;return!0}static hashCode(e){if(e===null)return 0;let r=1;for(const s of e)r=31*r+s;return r}static fillUint8Array(e,r){for(let s=0;s!==e.length;s++)e[s]=r}static copyOf(e,r){return e.slice(0,r)}static copyOfUint8Array(e,r){if(e.length<=r){const s=new Uint8Array(r);return s.set(e),s}return e.slice(0,r)}static copyOfRange(e,r,s){const l=s-r,c=new Int32Array(l);return B.arraycopy(e,r,c,0,l),c}static binarySearch(e,r,s){s===void 0&&(s=U.numberComparator);let l=0,c=e.length-1;for(;l<=c;){const d=c+l>>1,p=s(r,e[d]);if(p>0)l=d+1;else if(p<0)c=d-1;else return d}return-l-1}static numberComparator(e,r){return e-r}}class F{static numberOfTrailingZeros(e){let r;if(e===0)return 32;let s=31;return r=e<<16,r!==0&&(s-=16,e=r),r=e<<8,r!==0&&(s-=8,e=r),r=e<<4,r!==0&&(s-=4,e=r),r=e<<2,r!==0&&(s-=2,e=r),s-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,r){return Math.trunc(e/r)}static parseInt(e,r=void 0){return parseInt(e,r)}}F.MIN_VALUE_32_BITS=-2147483648,F.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Z{constructor(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=Z.makeArray(e):this.bits=r)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const r=Z.makeArray(e);B.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const r=this.size;if(e>=r)return r;const s=this.bits;let l=Math.floor(e/32),c=s[l];c&=~((1<<(e&31))-1);const d=s.length;for(;c===0;){if(++l===d)return r;c=s[l]}const p=l*32+F.numberOfTrailingZeros(c);return p>r?r:p}getNextUnset(e){const r=this.size;if(e>=r)return r;const s=this.bits;let l=Math.floor(e/32),c=~s[l];c&=~((1<<(e&31))-1);const d=s.length;for(;c===0;){if(++l===d)return r;c=~s[l]}const p=l*32+F.numberOfTrailingZeros(c);return p>r?r:p}setBulk(e,r){this.bits[Math.floor(e/32)]=r}setRange(e,r){if(r<e||e<0||r>this.size)throw new T;if(r===e)return;r--;const s=Math.floor(e/32),l=Math.floor(r/32),c=this.bits;for(let d=s;d<=l;d++){const p=d>s?0:e&31,E=(2<<(d<l?31:r&31))-(1<<p);c[d]|=E}}clear(){const e=this.bits.length,r=this.bits;for(let s=0;s<e;s++)r[s]=0}isRange(e,r,s){if(r<e||e<0||r>this.size)throw new T;if(r===e)return!0;r--;const l=Math.floor(e/32),c=Math.floor(r/32),d=this.bits;for(let p=l;p<=c;p++){const y=p>l?0:e&31,R=(2<<(p<c?31:r&31))-(1<<y)&4294967295;if((d[p]&R)!==(s?R:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,r){if(r<0||r>32)throw new T("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(let s=r;s>0;s--)this.appendBit((e>>s-1&1)===1)}appendBitArray(e){const r=e.size;this.ensureCapacity(this.size+r);for(let s=0;s<r;s++)this.appendBit(e.get(s))}xor(e){if(this.size!==e.size)throw new T("Sizes don't match");const r=this.bits;for(let s=0,l=r.length;s<l;s++)r[s]^=e.bits[s]}toBytes(e,r,s,l){for(let c=0;c<l;c++){let d=0;for(let p=0;p<8;p++)this.get(e)&&(d|=1<<7-p),e++;r[s+c]=d}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),s=r+1,l=this.bits;for(let c=0;c<s;c++){let d=l[c];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,e[r-c]=d}if(this.size!==s*32){const c=s*32-this.size;let d=e[0]>>>c;for(let p=1;p<s;p++){const y=e[p];d|=y<<32-c,e[p-1]=d,d=y>>>c}e[s-1]=d}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof Z))return!1;const r=e;return this.size===r.size&&U.equals(this.bits,r.bits)}hashCode(){return 31*this.size+U.hashCode(this.bits)}toString(){let e="";for(let r=0,s=this.size;r<s;r++)r&7||(e+=" "),e+=this.get(r)?"X":".";return e}clone(){return new Z(this.size,this.bits.slice())}}var Q;(function(k){k[k.OTHER=0]="OTHER",k[k.PURE_BARCODE=1]="PURE_BARCODE",k[k.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",k[k.TRY_HARDER=3]="TRY_HARDER",k[k.CHARACTER_SET=4]="CHARACTER_SET",k[k.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",k[k.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",k[k.ASSUME_GS1=7]="ASSUME_GS1",k[k.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",k[k.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",k[k.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Q||(Q={}));var ne=Q;class q extends C{static getFormatInstance(){return new q}}q.kind="FormatException";var ie;(function(k){k[k.Cp437=0]="Cp437",k[k.ISO8859_1=1]="ISO8859_1",k[k.ISO8859_2=2]="ISO8859_2",k[k.ISO8859_3=3]="ISO8859_3",k[k.ISO8859_4=4]="ISO8859_4",k[k.ISO8859_5=5]="ISO8859_5",k[k.ISO8859_6=6]="ISO8859_6",k[k.ISO8859_7=7]="ISO8859_7",k[k.ISO8859_8=8]="ISO8859_8",k[k.ISO8859_9=9]="ISO8859_9",k[k.ISO8859_10=10]="ISO8859_10",k[k.ISO8859_11=11]="ISO8859_11",k[k.ISO8859_13=12]="ISO8859_13",k[k.ISO8859_14=13]="ISO8859_14",k[k.ISO8859_15=14]="ISO8859_15",k[k.ISO8859_16=15]="ISO8859_16",k[k.SJIS=16]="SJIS",k[k.Cp1250=17]="Cp1250",k[k.Cp1251=18]="Cp1251",k[k.Cp1252=19]="Cp1252",k[k.Cp1256=20]="Cp1256",k[k.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",k[k.UTF8=22]="UTF8",k[k.ASCII=23]="ASCII",k[k.Big5=24]="Big5",k[k.GB18030=25]="GB18030",k[k.EUC_KR=26]="EUC_KR"})(ie||(ie={}));class te{constructor(e,r,s,...l){this.valueIdentifier=e,this.name=s,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=l,te.VALUE_IDENTIFIER_TO_ECI.set(e,this),te.NAME_TO_ECI.set(s,this);const c=this.values;for(let d=0,p=c.length;d!==p;d++){const y=c[d];te.VALUES_TO_ECI.set(y,this)}for(const d of l)te.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new q("incorect value");const r=te.VALUES_TO_ECI.get(e);if(r===void 0)throw new q("incorect value");return r}static getCharacterSetECIByName(e){const r=te.NAME_TO_ECI.get(e);if(r===void 0)throw new q("incorect value");return r}equals(e){if(!(e instanceof te))return!1;const r=e;return this.getName()===r.getName()}}te.VALUE_IDENTIFIER_TO_ECI=new Map,te.VALUES_TO_ECI=new Map,te.NAME_TO_ECI=new Map,te.Cp437=new te(ie.Cp437,Int32Array.from([0,2]),"Cp437"),te.ISO8859_1=new te(ie.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),te.ISO8859_2=new te(ie.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),te.ISO8859_3=new te(ie.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),te.ISO8859_4=new te(ie.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),te.ISO8859_5=new te(ie.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),te.ISO8859_6=new te(ie.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),te.ISO8859_7=new te(ie.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),te.ISO8859_8=new te(ie.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),te.ISO8859_9=new te(ie.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),te.ISO8859_10=new te(ie.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),te.ISO8859_11=new te(ie.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),te.ISO8859_13=new te(ie.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),te.ISO8859_14=new te(ie.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),te.ISO8859_15=new te(ie.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),te.ISO8859_16=new te(ie.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),te.SJIS=new te(ie.SJIS,20,"SJIS","Shift_JIS"),te.Cp1250=new te(ie.Cp1250,21,"Cp1250","windows-1250"),te.Cp1251=new te(ie.Cp1251,22,"Cp1251","windows-1251"),te.Cp1252=new te(ie.Cp1252,23,"Cp1252","windows-1252"),te.Cp1256=new te(ie.Cp1256,24,"Cp1256","windows-1256"),te.UnicodeBigUnmarked=new te(ie.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),te.UTF8=new te(ie.UTF8,26,"UTF8","UTF-8"),te.ASCII=new te(ie.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),te.Big5=new te(ie.Big5,28,"Big5"),te.GB18030=new te(ie.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),te.EUC_KR=new te(ie.EUC_KR,30,"EUC_KR","EUC-KR");class ye extends C{}ye.kind="UnsupportedOperationException";class Oe{static decode(e,r){const s=this.encodingName(r);return this.customDecoder?this.customDecoder(e,s):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(s)?this.decodeFallback(e,s):new TextDecoder(s).decode(e)}static shouldDecodeOnFallback(e){return!Oe.isBrowser()&&e==="ISO-8859-1"}static encode(e,r){const s=this.encodingName(r);return this.customEncoder?this.customEncoder(e,s):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof te?e:te.getCharacterSetECIByName(e)}static decodeFallback(e,r){const s=this.encodingCharacterSet(r);if(Oe.isDecodeFallbackSupported(s)){let l="";for(let c=0,d=e.length;c<d;c++){let p=e[c].toString(16);p.length<2&&(p="0"+p),l+="%"+p}return decodeURIComponent(l)}if(s.equals(te.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new ye(`Encoding ${this.encodingName(r)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(te.UTF8)||e.equals(te.ISO8859_1)||e.equals(te.ASCII)}static encodeFallback(e){const s=btoa(unescape(encodeURIComponent(e))).split(""),l=[];for(let c=0;c<s.length;c++)l.push(s[c].charCodeAt(0));return new Uint8Array(l)}}class Se{static castAsNonUtf8Char(e,r=null){const s=r?r.getName():this.ISO88591;return Oe.decode(new Uint8Array([e]),s)}static guessEncoding(e,r){if(r!=null&&r.get(ne.CHARACTER_SET)!==void 0)return r.get(ne.CHARACTER_SET).toString();const s=e.length;let l=!0,c=!0,d=!0,p=0,y=0,E=0,R=0,P=0,D=0,z=0,K=0,ee=0,se=0,fe=0;const Be=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let Fe=0;Fe<s&&(l||c||d);Fe++){const Pe=e[Fe]&255;d&&(p>0?Pe&128?p--:d=!1:Pe&128&&(Pe&64?(p++,Pe&32?(p++,Pe&16?(p++,Pe&8?d=!1:R++):E++):y++):d=!1)),l&&(Pe>127&&Pe<160?l=!1:Pe>159&&(Pe<192||Pe===215||Pe===247)&&fe++),c&&(P>0?Pe<64||Pe===127||Pe>252?c=!1:P--:Pe===128||Pe===160||Pe>239?c=!1:Pe>160&&Pe<224?(D++,K=0,z++,z>ee&&(ee=z)):Pe>127?(P++,z=0,K++,K>se&&(se=K)):(z=0,K=0))}return d&&p>0&&(d=!1),c&&P>0&&(c=!1),d&&(Be||y+E+R>0)?Se.UTF8:c&&(Se.ASSUME_SHIFT_JIS||ee>=3||se>=3)?Se.SHIFT_JIS:l&&c?ee===2&&D===2||fe*10>=s?Se.SHIFT_JIS:Se.ISO88591:l?Se.ISO88591:c?Se.SHIFT_JIS:d?Se.UTF8:Se.PLATFORM_DEFAULT_ENCODING}static format(e,...r){let s=-1;function l(d,p,y,E,R,P){if(d==="%%")return"%";if(r[++s]===void 0)return;d=E?parseInt(E.substr(1)):void 0;let D=R?parseInt(R.substr(1)):void 0,z;switch(P){case"s":z=r[s];break;case"c":z=r[s][0];break;case"f":z=parseFloat(r[s]).toFixed(d);break;case"p":z=parseFloat(r[s]).toPrecision(d);break;case"e":z=parseFloat(r[s]).toExponential(d);break;case"x":z=parseInt(r[s]).toString(D||16);break;case"d":z=parseFloat(parseInt(r[s],D||10).toPrecision(d)).toFixed(0);break}z=typeof z=="object"?JSON.stringify(z):(+z).toString(D);let K=parseInt(y),ee=y&&y[0]+""=="0"?"0":" ";for(;z.length<K;)z=p!==void 0?z+ee:ee+z;return z}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(c,l)}static getBytes(e,r){return Oe.encode(e,r)}static getCharCode(e,r=0){return e.charCodeAt(r)}static getCharAt(e){return String.fromCharCode(e)}}Se.SHIFT_JIS=te.SJIS.getName(),Se.GB2312="GB2312",Se.ISO88591=te.ISO8859_1.getName(),Se.EUC_JP="EUC_JP",Se.UTF8=te.UTF8.getName(),Se.PLATFORM_DEFAULT_ENCODING=Se.UTF8,Se.ASSUME_SHIFT_JIS=!1;class Te{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Se.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,r,s){for(let l=r;r<r+s;l++)this.append(e[l]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)}substring(e,r){return this.value.substring(e,r)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+r.length)}}class be{constructor(e,r,s,l){if(this.width=e,this.height=r,this.rowSize=s,this.bits=l,r==null&&(r=e),this.height=r,e<1||r<1)throw new T("Both dimensions must be greater than 0");s==null&&(s=Math.floor((e+31)/32)),this.rowSize=s,l==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const r=e.length,s=e[0].length,l=new be(s,r);for(let c=0;c<r;c++){const d=e[c];for(let p=0;p<s;p++)d[p]&&l.set(p,c)}return l}static parseFromString(e,r,s){if(e===null)throw new T("stringRepresentation cannot be null");const l=new Array(e.length);let c=0,d=0,p=-1,y=0,E=0;for(;E<e.length;)if(e.charAt(E)===`
`||e.charAt(E)==="\r"){if(c>d){if(p===-1)p=c-d;else if(c-d!==p)throw new T("row lengths do not match");d=c,y++}E++}else if(e.substring(E,E+r.length)===r)E+=r.length,l[c]=!0,c++;else if(e.substring(E,E+s.length)===s)E+=s.length,l[c]=!1,c++;else throw new T("illegal character encountered: "+e.substring(E));if(c>d){if(p===-1)p=c-d;else if(c-d!==p)throw new T("row lengths do not match");y++}const R=new be(p,y);for(let P=0;P<c;P++)l[P]&&R.set(Math.floor(P%p),Math.floor(P/p));return R}get(e,r){const s=r*this.rowSize+Math.floor(e/32);return(this.bits[s]>>>(e&31)&1)!==0}set(e,r){const s=r*this.rowSize+Math.floor(e/32);this.bits[s]|=1<<(e&31)&4294967295}unset(e,r){const s=r*this.rowSize+Math.floor(e/32);this.bits[s]&=~(1<<(e&31)&4294967295)}flip(e,r){const s=r*this.rowSize+Math.floor(e/32);this.bits[s]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new T("input matrix dimensions do not match");const r=new Z(Math.floor(this.width/32)+1),s=this.rowSize,l=this.bits;for(let c=0,d=this.height;c<d;c++){const p=c*s,y=e.getRow(c,r).getBitArray();for(let E=0;E<s;E++)l[p+E]^=y[E]}}clear(){const e=this.bits,r=e.length;for(let s=0;s<r;s++)e[s]=0}setRegion(e,r,s,l){if(r<0||e<0)throw new T("Left and top must be nonnegative");if(l<1||s<1)throw new T("Height and width must be at least 1");const c=e+s,d=r+l;if(d>this.height||c>this.width)throw new T("The region must fit inside the matrix");const p=this.rowSize,y=this.bits;for(let E=r;E<d;E++){const R=E*p;for(let P=e;P<c;P++)y[R+Math.floor(P/32)]|=1<<(P&31)&4294967295}}getRow(e,r){r==null||r.getSize()<this.width?r=new Z(this.width):r.clear();const s=this.rowSize,l=this.bits,c=e*s;for(let d=0;d<s;d++)r.setBulk(d*32,l[c+d]);return r}setRow(e,r){B.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),r=this.getHeight();let s=new Z(e),l=new Z(e);for(let c=0,d=Math.floor((r+1)/2);c<d;c++)s=this.getRow(c,s),l=this.getRow(r-1-c,l),s.reverse(),l.reverse(),this.setRow(c,l),this.setRow(r-1-c,s)}getEnclosingRectangle(){const e=this.width,r=this.height,s=this.rowSize,l=this.bits;let c=e,d=r,p=-1,y=-1;for(let E=0;E<r;E++)for(let R=0;R<s;R++){const P=l[E*s+R];if(P!==0){if(E<d&&(d=E),E>y&&(y=E),R*32<c){let D=0;for(;!(P<<31-D&4294967295);)D++;R*32+D<c&&(c=R*32+D)}if(R*32+31>p){let D=31;for(;!(P>>>D);)D--;R*32+D>p&&(p=R*32+D)}}}return p<c||y<d?null:Int32Array.from([c,d,p-c+1,y-d+1])}getTopLeftOnBit(){const e=this.rowSize,r=this.bits;let s=0;for(;s<r.length&&r[s]===0;)s++;if(s===r.length)return null;const l=s/e;let c=s%e*32;const d=r[s];let p=0;for(;!(d<<31-p&4294967295);)p++;return c+=p,Int32Array.from([c,l])}getBottomRightOnBit(){const e=this.rowSize,r=this.bits;let s=r.length-1;for(;s>=0&&r[s]===0;)s--;if(s<0)return null;const l=Math.floor(s/e);let c=Math.floor(s%e)*32;const d=r[s];let p=31;for(;!(d>>>p);)p--;return c+=p,Int32Array.from([c,l])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof be))return!1;const r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&U.equals(this.bits,r.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+U.hashCode(this.bits),e}toString(e="X ",r="  ",s=`
`){return this.buildToString(e,r,s)}buildToString(e,r,s){let l=new Te;for(let c=0,d=this.height;c<d;c++){for(let p=0,y=this.width;p<y;p++)l.append(this.get(p,c)?e:r);l.append(s)}return l.toString()}clone(){return new be(this.width,this.height,this.rowSize,this.bits.slice())}}class X extends C{static getNotFoundInstance(){return new X}}X.kind="NotFoundException";class Le extends L{constructor(e){super(e),this.luminances=Le.EMPTY,this.buckets=new Int32Array(Le.LUMINANCE_BUCKETS)}getBlackRow(e,r){const s=this.getLuminanceSource(),l=s.getWidth();r==null||r.getSize()<l?r=new Z(l):r.clear(),this.initArrays(l);const c=s.getRow(e,this.luminances),d=this.buckets;for(let y=0;y<l;y++)d[(c[y]&255)>>Le.LUMINANCE_SHIFT]++;const p=Le.estimateBlackPoint(d);if(l<3)for(let y=0;y<l;y++)(c[y]&255)<p&&r.set(y);else{let y=c[0]&255,E=c[1]&255;for(let R=1;R<l-1;R++){const P=c[R+1]&255;(E*4-y-P)/2<p&&r.set(R),y=E,E=P}}return r}getBlackMatrix(){const e=this.getLuminanceSource(),r=e.getWidth(),s=e.getHeight(),l=new be(r,s);this.initArrays(r);const c=this.buckets;for(let y=1;y<5;y++){const E=Math.floor(s*y/5),R=e.getRow(E,this.luminances),P=Math.floor(r*4/5);for(let D=Math.floor(r/5);D<P;D++){const z=R[D]&255;c[z>>Le.LUMINANCE_SHIFT]++}}const d=Le.estimateBlackPoint(c),p=e.getMatrix();for(let y=0;y<s;y++){const E=y*r;for(let R=0;R<r;R++)(p[E+R]&255)<d&&l.set(R,y)}return l}createBinarizer(e){return new Le(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const r=this.buckets;for(let s=0;s<Le.LUMINANCE_BUCKETS;s++)r[s]=0}static estimateBlackPoint(e){const r=e.length;let s=0,l=0,c=0;for(let R=0;R<r;R++)e[R]>c&&(l=R,c=e[R]),e[R]>s&&(s=e[R]);let d=0,p=0;for(let R=0;R<r;R++){const P=R-l,D=e[R]*P*P;D>p&&(d=R,p=D)}if(l>d){const R=l;l=d,d=R}if(d-l<=r/16)throw new X;let y=d-1,E=-1;for(let R=d-1;R>l;R--){const P=R-l,D=P*P*(d-R)*(s-e[R]);D>E&&(y=R,E=D)}return y<<Le.LUMINANCE_SHIFT}}Le.LUMINANCE_BITS=5,Le.LUMINANCE_SHIFT=8-Le.LUMINANCE_BITS,Le.LUMINANCE_BUCKETS=1<<Le.LUMINANCE_BITS,Le.EMPTY=Uint8ClampedArray.from([0]);class we extends Le{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),r=e.getWidth(),s=e.getHeight();if(r>=we.MINIMUM_DIMENSION&&s>=we.MINIMUM_DIMENSION){const l=e.getMatrix();let c=r>>we.BLOCK_SIZE_POWER;r&we.BLOCK_SIZE_MASK&&c++;let d=s>>we.BLOCK_SIZE_POWER;s&we.BLOCK_SIZE_MASK&&d++;const p=we.calculateBlackPoints(l,c,d,r,s),y=new be(r,s);we.calculateThresholdForBlock(l,c,d,r,s,p,y),this.matrix=y}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new we(e)}static calculateThresholdForBlock(e,r,s,l,c,d,p){const y=c-we.BLOCK_SIZE,E=l-we.BLOCK_SIZE;for(let R=0;R<s;R++){let P=R<<we.BLOCK_SIZE_POWER;P>y&&(P=y);const D=we.cap(R,2,s-3);for(let z=0;z<r;z++){let K=z<<we.BLOCK_SIZE_POWER;K>E&&(K=E);const ee=we.cap(z,2,r-3);let se=0;for(let Be=-2;Be<=2;Be++){const Fe=d[D+Be];se+=Fe[ee-2]+Fe[ee-1]+Fe[ee]+Fe[ee+1]+Fe[ee+2]}const fe=se/25;we.thresholdBlock(e,K,P,fe,l,p)}}}static cap(e,r,s){return e<r?r:e>s?s:e}static thresholdBlock(e,r,s,l,c,d){for(let p=0,y=s*c+r;p<we.BLOCK_SIZE;p++,y+=c)for(let E=0;E<we.BLOCK_SIZE;E++)(e[y+E]&255)<=l&&d.set(r+E,s+p)}static calculateBlackPoints(e,r,s,l,c){const d=c-we.BLOCK_SIZE,p=l-we.BLOCK_SIZE,y=new Array(s);for(let E=0;E<s;E++){y[E]=new Int32Array(r);let R=E<<we.BLOCK_SIZE_POWER;R>d&&(R=d);for(let P=0;P<r;P++){let D=P<<we.BLOCK_SIZE_POWER;D>p&&(D=p);let z=0,K=255,ee=0;for(let fe=0,Be=R*l+D;fe<we.BLOCK_SIZE;fe++,Be+=l){for(let Fe=0;Fe<we.BLOCK_SIZE;Fe++){const Pe=e[Be+Fe]&255;z+=Pe,Pe<K&&(K=Pe),Pe>ee&&(ee=Pe)}if(ee-K>we.MIN_DYNAMIC_RANGE)for(fe++,Be+=l;fe<we.BLOCK_SIZE;fe++,Be+=l)for(let Fe=0;Fe<we.BLOCK_SIZE;Fe++)z+=e[Be+Fe]&255}let se=z>>we.BLOCK_SIZE_POWER*2;if(ee-K<=we.MIN_DYNAMIC_RANGE&&(se=K/2,E>0&&P>0)){const fe=(y[E-1][P]+2*y[E][P-1]+y[E-1][P-1])/4;K<fe&&(se=fe)}y[E][P]=se}}return y}}we.BLOCK_SIZE_POWER=3,we.BLOCK_SIZE=1<<we.BLOCK_SIZE_POWER,we.BLOCK_SIZE_MASK=we.BLOCK_SIZE-1,we.MINIMUM_DIMENSION=we.BLOCK_SIZE*5,we.MIN_DYNAMIC_RANGE=24;class xe{constructor(e,r){this.width=e,this.height=r}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,r,s,l){throw new ye("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ye("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ye("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let r=new Te;for(let s=0;s<this.height;s++){const l=this.getRow(s,e);for(let c=0;c<this.width;c++){const d=l[c]&255;let p;d<64?p="#":d<128?p="+":d<192?p=".":p=" ",r.append(p)}r.append(`
`)}return r.toString()}}class _e extends xe{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,r){const s=this.delegate.getRow(e,r),l=this.getWidth();for(let c=0;c<l;c++)s[c]=255-(s[c]&255);return s}getMatrix(){const e=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),s=new Uint8ClampedArray(r);for(let l=0;l<r;l++)s[l]=255-(e[l]&255);return s}isCropSupported(){return this.delegate.isCropSupported()}crop(e,r,s,l){return new _e(this.delegate.crop(e,r,s,l))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new _e(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new _e(this.delegate.rotateCounterClockwise45())}}class Ee extends xe{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=Ee.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const r=e.getContext("2d").getImageData(0,0,e.width,e.height);return Ee.toGrayscaleBuffer(r.data,e.width,e.height)}static toGrayscaleBuffer(e,r,s){const l=new Uint8ClampedArray(r*s);for(let c=0,d=0,p=e.length;c<p;c+=4,d++){let y;if(e[c+3]===0)y=255;else{const R=e[c],P=e[c+1],D=e[c+2];y=306*R+601*P+117*D+512>>10}l[d]=y}return l}getRow(e,r){if(e<0||e>=this.getHeight())throw new T("Requested row is outside the image: "+e);const s=this.getWidth(),l=e*s;return r===null?r=this.buffer.slice(l,l+s):(r.length<s&&(r=new Uint8ClampedArray(s)),r.set(this.buffer.slice(l,l+s))),r}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,r,s,l){return super.crop(e,r,s,l),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const r=this.getTempCanvasElement(),s=r.getContext("2d"),l=e*Ee.DEGREE_TO_RADIANS,c=this.canvas.width,d=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(l))*c+Math.abs(Math.sin(l))*d),y=Math.ceil(Math.abs(Math.sin(l))*c+Math.abs(Math.cos(l))*d);return r.width=p,r.height=y,s.translate(p/2,y/2),s.rotate(l),s.drawImage(this.canvas,c/-2,d/-2),this.buffer=Ee.makeBufferFromCanvasImageData(r),this}invert(){return new _e(this)}}Ee.DEGREE_TO_RADIANS=Math.PI/180;class Y{constructor(e,r,s){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=s||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var G=(globalThis||lc||self||window||void 0)&&(globalThis||lc||self||window||void 0).__awaiter||function(k,e,r,s){function l(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function p(R){try{E(s.next(R))}catch(P){d(P)}}function y(R){try{E(s.throw(R))}catch(P){d(P)}}function E(R){R.done?c(R.value):l(R.value).then(p,y)}E((s=s.apply(k,e||[])).next())})};class Ce{constructor(e,r=500,s){this.reader=e,this.timeBetweenScansMillis=r,this._hints=s,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return G(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),r=[];for(const s of e){const l=s.kind==="video"?"videoinput":s.kind;if(l!=="videoinput")continue;const c=s.deviceId||s.id,d=s.label||`Video device ${r.length+1}`,p=s.groupId,y={deviceId:c,label:d,kind:l,groupId:p};r.push(y)}return r})}getVideoInputDevices(){return G(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(r=>new Y(r.deviceId,r.label))})}findDeviceById(e){return G(this,void 0,void 0,function*(){const r=yield this.listVideoInputDevices();return r?r.find(s=>s.deviceId===e):null})}decodeFromInputVideoDevice(e,r){return G(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,r)})}decodeOnceFromVideoDevice(e,r){return G(this,void 0,void 0,function*(){this.reset();let s;e?s={deviceId:{exact:e}}:s={facingMode:"environment"};const l={video:s};return yield this.decodeOnceFromConstraints(l,r)})}decodeOnceFromConstraints(e,r){return G(this,void 0,void 0,function*(){const s=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(s,r)})}decodeOnceFromStream(e,r){return G(this,void 0,void 0,function*(){this.reset();const s=yield this.attachStreamToVideo(e,r);return yield this.decodeOnce(s)})}decodeFromInputVideoDeviceContinuously(e,r,s){return G(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,r,s)})}decodeFromVideoDevice(e,r,s){return G(this,void 0,void 0,function*(){let l;e?l={deviceId:{exact:e}}:l={facingMode:"environment"};const c={video:l};return yield this.decodeFromConstraints(c,r,s)})}decodeFromConstraints(e,r,s){return G(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(l,r,s)})}decodeFromStream(e,r,s){return G(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(e,r);return yield this.decodeContinuously(l,s)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,r){return G(this,void 0,void 0,function*(){const s=this.prepareVideoElement(r);return this.addVideoSource(s,e),this.videoElement=s,this.stream=e,yield this.playVideoOnLoadAsync(s),s})}playVideoOnLoadAsync(e){return new Promise((r,s)=>this.playVideoOnLoad(e,()=>r()))}playVideoOnLoad(e,r){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return G(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,r){const s=document.getElementById(e);if(!s)throw new A(`element with id '${e}' not found`);if(s.nodeName.toLowerCase()!==r.toLowerCase())throw new A(`element with id '${e}' must be an ${r} element`);return s}decodeFromImage(e,r){if(!e&&!r)throw new A("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)}decodeFromVideo(e,r){if(!e&&!r)throw new A("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,r,s){if(e===void 0&&r===void 0)throw new A("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,s):this.decodeFromVideoElementContinuously(e,s)}decodeFromImageElement(e){if(!e)throw new A("An image element must be provided.");this.reset();const r=this.prepareImageElement(e);this.imageElement=r;let s;return this.isImageLoaded(r)?s=this.decodeOnce(r,!1,!0):s=this._decodeOnLoadImage(r),s}decodeFromVideoElement(e){const r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)}decodeFromVideoElementContinuously(e,r){const s=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(s,r)}_decodeFromVideoElementSetup(e){if(!e)throw new A("A video element must be provided.");this.reset();const r=this.prepareVideoElement(e);return this.videoElement=r,r}decodeFromImageUrl(e){if(!e)throw new A("An URL must be provided.");this.reset();const r=this.prepareImageElement();this.imageElement=r;const s=this._decodeOnLoadImage(r);return r.src=e,s}decodeFromVideoUrl(e){if(!e)throw new A("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),s=this.decodeFromVideoElement(r);return r.src=e,s}decodeFromVideoUrlContinuously(e,r){if(!e)throw new A("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),l=this.decodeFromVideoElementContinuously(s,r);return s.src=e,l}_decodeOnLoadImage(e){return new Promise((r,s)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(r,s),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return G(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,r){return G(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,r)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r}prepareVideoElement(e){let r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r}decodeOnce(e,r=!0,s=!0){this._stopAsyncDecode=!1;const l=(c,d)=>{if(this._stopAsyncDecode){d(new X("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const p=this.decode(e);c(p)}catch(p){const y=r&&p instanceof X,R=(p instanceof O||p instanceof q)&&s;if(y||R)return setTimeout(l,this._timeBetweenDecodingAttempts,c,d);d(p)}};return new Promise((c,d)=>l(c,d))}decodeContinuously(e,r){this._stopContinuousDecode=!1;const s=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const l=this.decode(e);r(l,null),setTimeout(s,this.timeBetweenScansMillis)}catch(l){r(null,l);const c=l instanceof O||l instanceof q,d=l instanceof X;(c||d)&&setTimeout(s,this._timeBetweenDecodingAttempts)}};s()}decode(e){const r=this.createBinaryBitmap(e);return this.decodeBitmap(r)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,r,s){r||(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),s||(s=this.captureCanvasContext),s.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}drawImageOnCanvas(e,r,s=this.captureCanvasContext){r||(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),s||(s=this.captureCanvasContext),s.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const r=this.getCaptureCanvas(e),s=new Ee(r),l=new we(s);return new _(l)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const s=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=s}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const r=document.createElement("canvas");let s,l;return typeof e<"u"&&(e instanceof HTMLVideoElement?(s=e.videoWidth,l=e.videoHeight):e instanceof HTMLImageElement&&(s=e.naturalWidth||e.width,l=e.naturalHeight||e.height)),r.style.width=s+"px",r.style.height=l+"px",r.width=s,r.height=l,r}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class ve{constructor(e,r,s=r==null?0:8*r.length,l,c,d=B.currentTimeMillis()){this.text=e,this.rawBytes=r,this.numBits=s,this.resultPoints=l,this.format=c,this.timestamp=d,this.text=e,this.rawBytes=r,s==null?this.numBits=r==null?0:8*r.length:this.numBits=s,this.resultPoints=l,this.format=c,this.resultMetadata=null,d==null?this.timestamp=B.currentTimeMillis():this.timestamp=d}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){const s=new Array(r.length+e.length);B.arraycopy(r,0,s,0,r.length),B.arraycopy(e,0,s,r.length,e.length),this.resultPoints=s}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ue;(function(k){k[k.AZTEC=0]="AZTEC",k[k.CODABAR=1]="CODABAR",k[k.CODE_39=2]="CODE_39",k[k.CODE_93=3]="CODE_93",k[k.CODE_128=4]="CODE_128",k[k.DATA_MATRIX=5]="DATA_MATRIX",k[k.EAN_8=6]="EAN_8",k[k.EAN_13=7]="EAN_13",k[k.ITF=8]="ITF",k[k.MAXICODE=9]="MAXICODE",k[k.PDF_417=10]="PDF_417",k[k.QR_CODE=11]="QR_CODE",k[k.RSS_14=12]="RSS_14",k[k.RSS_EXPANDED=13]="RSS_EXPANDED",k[k.UPC_A=14]="UPC_A",k[k.UPC_E=15]="UPC_E",k[k.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ue||(ue={}));var $=ue,Re;(function(k){k[k.OTHER=0]="OTHER",k[k.ORIENTATION=1]="ORIENTATION",k[k.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",k[k.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",k[k.ISSUE_NUMBER=4]="ISSUE_NUMBER",k[k.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",k[k.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",k[k.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",k[k.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",k[k.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",k[k.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Re||(Re={}));var ge=Re;class Ae{constructor(e,r,s,l,c=-1,d=-1){this.rawBytes=e,this.text=r,this.byteSegments=s,this.ecLevel=l,this.structuredAppendSequenceNumber=c,this.structuredAppendParity=d,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class rt{exp(e){return this.expTable[e]}log(e){if(e===0)throw new T;return this.logTable[e]}static addOrSubtract(e,r){return e^r}}class Ye{constructor(e,r){if(r.length===0)throw new T;this.field=e;const s=r.length;if(s>1&&r[0]===0){let l=1;for(;l<s&&r[l]===0;)l++;l===s?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(s-l),B.arraycopy(r,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const r=this.coefficients;let s;if(e===1){s=0;for(let d=0,p=r.length;d!==p;d++){const y=r[d];s=rt.addOrSubtract(s,y)}return s}s=r[0];const l=r.length,c=this.field;for(let d=1;d<l;d++)s=rt.addOrSubtract(c.multiply(e,s),r[d]);return s}addOrSubtract(e){if(!this.field.equals(e.field))throw new T("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let r=this.coefficients,s=e.coefficients;if(r.length>s.length){const d=r;r=s,s=d}let l=new Int32Array(s.length);const c=s.length-r.length;B.arraycopy(s,0,l,0,c);for(let d=c;d<s.length;d++)l[d]=rt.addOrSubtract(r[d-c],s[d]);return new Ye(this.field,l)}multiply(e){if(!this.field.equals(e.field))throw new T("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const r=this.coefficients,s=r.length,l=e.coefficients,c=l.length,d=new Int32Array(s+c-1),p=this.field;for(let y=0;y<s;y++){const E=r[y];for(let R=0;R<c;R++)d[y+R]=rt.addOrSubtract(d[y+R],p.multiply(E,l[R]))}return new Ye(p,d)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const r=this.coefficients.length,s=this.field,l=new Int32Array(r),c=this.coefficients;for(let d=0;d<r;d++)l[d]=s.multiply(c[d],e);return new Ye(s,l)}multiplyByMonomial(e,r){if(e<0)throw new T;if(r===0)return this.field.getZero();const s=this.coefficients,l=s.length,c=new Int32Array(l+e),d=this.field;for(let p=0;p<l;p++)c[p]=d.multiply(s[p],r);return new Ye(d,c)}divide(e){if(!this.field.equals(e.field))throw new T("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new T("Divide by 0");const r=this.field;let s=r.getZero(),l=this;const c=e.getCoefficient(e.getDegree()),d=r.inverse(c);for(;l.getDegree()>=e.getDegree()&&!l.isZero();){const p=l.getDegree()-e.getDegree(),y=r.multiply(l.getCoefficient(l.getDegree()),d),E=e.multiplyByMonomial(p,y),R=r.buildMonomial(p,y);s=s.addOrSubtract(R),l=l.addOrSubtract(E)}return[s,l]}toString(){let e="";for(let r=this.getDegree();r>=0;r--){let s=this.getCoefficient(r);if(s!==0){if(s<0?(e+=" - ",s=-s):e.length>0&&(e+=" + "),r===0||s!==1){const l=this.field.log(s);l===0?e+="1":l===1?e+="a":(e+="a^",e+=l)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e}}class ce extends C{}ce.kind="ArithmeticException";class pe extends rt{constructor(e,r,s){super(),this.primitive=e,this.size=r,this.generatorBase=s;const l=new Int32Array(r);let c=1;for(let p=0;p<r;p++)l[p]=c,c*=2,c>=r&&(c^=e,c&=r-1);this.expTable=l;const d=new Int32Array(r);for(let p=0;p<r-1;p++)d[l[p]]=p;this.logTable=d,this.zero=new Ye(this,Int32Array.from([0])),this.one=new Ye(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,r){if(e<0)throw new T;if(r===0)return this.zero;const s=new Int32Array(e+1);return s[0]=r,new Ye(this,s)}inverse(e){if(e===0)throw new ce;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+F.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}pe.AZTEC_DATA_12=new pe(4201,4096,1),pe.AZTEC_DATA_10=new pe(1033,1024,1),pe.AZTEC_DATA_6=new pe(67,64,1),pe.AZTEC_PARAM=new pe(19,16,1),pe.QR_CODE_FIELD_256=new pe(285,256,0),pe.DATA_MATRIX_FIELD_256=new pe(301,256,1),pe.AZTEC_DATA_8=pe.DATA_MATRIX_FIELD_256,pe.MAXICODE_FIELD_64=pe.AZTEC_DATA_6;class $e extends C{}$e.kind="ReedSolomonException";class Ze extends C{}Ze.kind="IllegalStateException";class Tt{constructor(e){this.field=e}decode(e,r){const s=this.field,l=new Ye(s,e),c=new Int32Array(r);let d=!0;for(let z=0;z<r;z++){const K=l.evaluateAt(s.exp(z+s.getGeneratorBase()));c[c.length-1-z]=K,K!==0&&(d=!1)}if(d)return;const p=new Ye(s,c),y=this.runEuclideanAlgorithm(s.buildMonomial(r,1),p,r),E=y[0],R=y[1],P=this.findErrorLocations(E),D=this.findErrorMagnitudes(R,P);for(let z=0;z<P.length;z++){const K=e.length-1-s.log(P[z]);if(K<0)throw new $e("Bad error location");e[K]=pe.addOrSubtract(e[K],D[z])}}runEuclideanAlgorithm(e,r,s){if(e.getDegree()<r.getDegree()){const z=e;e=r,r=z}const l=this.field;let c=e,d=r,p=l.getZero(),y=l.getOne();for(;d.getDegree()>=(s/2|0);){let z=c,K=p;if(c=d,p=y,c.isZero())throw new $e("r_{i-1} was zero");d=z;let ee=l.getZero();const se=c.getCoefficient(c.getDegree()),fe=l.inverse(se);for(;d.getDegree()>=c.getDegree()&&!d.isZero();){const Be=d.getDegree()-c.getDegree(),Fe=l.multiply(d.getCoefficient(d.getDegree()),fe);ee=ee.addOrSubtract(l.buildMonomial(Be,Fe)),d=d.addOrSubtract(c.multiplyByMonomial(Be,Fe))}if(y=ee.multiply(p).addOrSubtract(K),d.getDegree()>=c.getDegree())throw new Ze("Division algorithm failed to reduce polynomial?")}const E=y.getCoefficient(0);if(E===0)throw new $e("sigmaTilde(0) was zero");const R=l.inverse(E),P=y.multiplyScalar(R),D=d.multiplyScalar(R);return[P,D]}findErrorLocations(e){const r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);const s=new Int32Array(r);let l=0;const c=this.field;for(let d=1;d<c.getSize()&&l<r;d++)e.evaluateAt(d)===0&&(s[l]=c.inverse(d),l++);if(l!==r)throw new $e("Error locator degree does not match number of roots");return s}findErrorMagnitudes(e,r){const s=r.length,l=new Int32Array(s),c=this.field;for(let d=0;d<s;d++){const p=c.inverse(r[d]);let y=1;for(let E=0;E<s;E++)if(d!==E){const R=c.multiply(r[E],p),P=R&1?R&-2:R|1;y=c.multiply(y,P)}l[d]=c.multiply(e.evaluateAt(p),c.inverse(y)),c.getGeneratorBase()!==0&&(l[d]=c.multiply(l[d],p))}return l}}var pt;(function(k){k[k.UPPER=0]="UPPER",k[k.LOWER=1]="LOWER",k[k.MIXED=2]="MIXED",k[k.DIGIT=3]="DIGIT",k[k.PUNCT=4]="PUNCT",k[k.BINARY=5]="BINARY"})(pt||(pt={}));class Qe{decode(e){this.ddata=e;let r=e.getBits(),s=this.extractBits(r),l=this.correctBits(s),c=Qe.convertBoolArrayToByteArray(l),d=Qe.getEncodedData(l),p=new Ae(c,d,null,null);return p.setNumBits(l.length),p}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let r=e.length,s=pt.UPPER,l=pt.UPPER,c="",d=0;for(;d<r;)if(l===pt.BINARY){if(r-d<5)break;let p=Qe.readCode(e,d,5);if(d+=5,p===0){if(r-d<11)break;p=Qe.readCode(e,d,11)+31,d+=11}for(let y=0;y<p;y++){if(r-d<8){d=r;break}const E=Qe.readCode(e,d,8);c+=Se.castAsNonUtf8Char(E),d+=8}l=s}else{let p=l===pt.DIGIT?4:5;if(r-d<p)break;let y=Qe.readCode(e,d,p);d+=p;let E=Qe.getCharacter(l,y);E.startsWith("CTRL_")?(s=l,l=Qe.getTable(E.charAt(5)),E.charAt(6)==="L"&&(s=l)):(c+=E,l=s)}return c}static getTable(e){switch(e){case"L":return pt.LOWER;case"P":return pt.PUNCT;case"M":return pt.MIXED;case"D":return pt.DIGIT;case"B":return pt.BINARY;case"U":default:return pt.UPPER}}static getCharacter(e,r){switch(e){case pt.UPPER:return Qe.UPPER_TABLE[r];case pt.LOWER:return Qe.LOWER_TABLE[r];case pt.MIXED:return Qe.MIXED_TABLE[r];case pt.PUNCT:return Qe.PUNCT_TABLE[r];case pt.DIGIT:return Qe.DIGIT_TABLE[r];default:throw new Ze("Bad table")}}correctBits(e){let r,s;this.ddata.getNbLayers()<=2?(s=6,r=pe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(s=8,r=pe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(s=10,r=pe.AZTEC_DATA_10):(s=12,r=pe.AZTEC_DATA_12);let l=this.ddata.getNbDatablocks(),c=e.length/s;if(c<l)throw new q;let d=e.length%s,p=new Int32Array(c);for(let D=0;D<c;D++,d+=s)p[D]=Qe.readCode(e,d,s);try{new Tt(r).decode(p,c-l)}catch(D){throw new q(D)}let y=(1<<s)-1,E=0;for(let D=0;D<l;D++){let z=p[D];if(z===0||z===y)throw new q;(z===1||z===y-1)&&E++}let R=new Array(l*s-E),P=0;for(let D=0;D<l;D++){let z=p[D];if(z===1||z===y-1)R.fill(z>1,P,P+s-1),P+=s-1;else for(let K=s-1;K>=0;--K)R[P++]=(z&1<<K)!==0}return R}extractBits(e){let r=this.ddata.isCompact(),s=this.ddata.getNbLayers(),l=(r?11:14)+s*4,c=new Int32Array(l),d=new Array(this.totalBitsInLayer(s,r));if(r)for(let p=0;p<c.length;p++)c[p]=p;else{let p=l+1+2*F.truncDivision(F.truncDivision(l,2)-1,15),y=l/2,E=F.truncDivision(p,2);for(let R=0;R<y;R++){let P=R+F.truncDivision(R,15);c[y-R-1]=E-P-1,c[y+R]=E+P+1}}for(let p=0,y=0;p<s;p++){let E=(s-p)*4+(r?9:12),R=p*2,P=l-1-R;for(let D=0;D<E;D++){let z=D*2;for(let K=0;K<2;K++)d[y+z+K]=e.get(c[R+K],c[R+D]),d[y+2*E+z+K]=e.get(c[R+D],c[P-K]),d[y+4*E+z+K]=e.get(c[P-K],c[P-D]),d[y+6*E+z+K]=e.get(c[P-D],c[R+K])}y+=E*8}return d}static readCode(e,r,s){let l=0;for(let c=r;c<r+s;c++)l<<=1,e[c]&&(l|=1);return l}static readByte(e,r){let s=e.length-r;return s>=8?Qe.readCode(e,r,8):Qe.readCode(e,r,s)<<8-s}static convertBoolArrayToByteArray(e){let r=new Uint8Array((e.length+7)/8);for(let s=0;s<r.length;s++)r[s]=Qe.readByte(e,8*s);return r}totalBitsInLayer(e,r){return((r?88:112)+16*e)*e}}Qe.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Qe.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Qe.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Qe.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Qe.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class et{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,r,s,l){const c=e-s,d=r-l;return Math.sqrt(c*c+d*d)}static sum(e){let r=0;for(let s=0,l=e.length;s!==l;s++){const c=e[s];r+=c}return r}}class Et{static floatToIntBits(e){return e}}Et.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ze{constructor(e,r){this.x=e,this.y=r}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof ze){const r=e;return this.x===r.x&&this.y===r.y}return!1}hashCode(){return 31*Et.floatToIntBits(this.x)+Et.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const r=this.distance(e[0],e[1]),s=this.distance(e[1],e[2]),l=this.distance(e[0],e[2]);let c,d,p;if(s>=r&&s>=l?(d=e[0],c=e[1],p=e[2]):l>=s&&l>=r?(d=e[1],c=e[0],p=e[2]):(d=e[2],c=e[0],p=e[1]),this.crossProductZ(c,d,p)<0){const y=c;c=p,p=y}e[0]=c,e[1]=d,e[2]=p}static distance(e,r){return et.distance(e.x,e.y,r.x,r.y)}static crossProductZ(e,r,s){const l=r.x,c=r.y;return(s.x-l)*(e.y-c)-(s.y-c)*(e.x-l)}}class vn{constructor(e,r){this.bits=e,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class tr extends vn{constructor(e,r,s,l,c){super(e,r),this.compact=s,this.nbDatablocks=l,this.nbLayers=c}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Xe{constructor(e,r,s,l){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=Xe.INIT_SIZE),s==null&&(s=e.getWidth()/2|0),l==null&&(l=e.getHeight()/2|0);const c=r/2|0;if(this.leftInit=s-c,this.rightInit=s+c,this.upInit=l-c,this.downInit=l+c,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new X}detect(){let e=this.leftInit,r=this.rightInit,s=this.upInit,l=this.downInit,c=!1,d=!0,p=!1,y=!1,E=!1,R=!1,P=!1;const D=this.width,z=this.height;for(;d;){d=!1;let K=!0;for(;(K||!y)&&r<D;)K=this.containsBlackPoint(s,l,r,!1),K?(r++,d=!0,y=!0):y||r++;if(r>=D){c=!0;break}let ee=!0;for(;(ee||!E)&&l<z;)ee=this.containsBlackPoint(e,r,l,!0),ee?(l++,d=!0,E=!0):E||l++;if(l>=z){c=!0;break}let se=!0;for(;(se||!R)&&e>=0;)se=this.containsBlackPoint(s,l,e,!1),se?(e--,d=!0,R=!0):R||e--;if(e<0){c=!0;break}let fe=!0;for(;(fe||!P)&&s>=0;)fe=this.containsBlackPoint(e,r,s,!0),fe?(s--,d=!0,P=!0):P||s--;if(s<0){c=!0;break}d&&(p=!0)}if(!c&&p){const K=r-e;let ee=null;for(let Fe=1;ee===null&&Fe<K;Fe++)ee=this.getBlackPointOnSegment(e,l-Fe,e+Fe,l);if(ee==null)throw new X;let se=null;for(let Fe=1;se===null&&Fe<K;Fe++)se=this.getBlackPointOnSegment(e,s+Fe,e+Fe,s);if(se==null)throw new X;let fe=null;for(let Fe=1;fe===null&&Fe<K;Fe++)fe=this.getBlackPointOnSegment(r,s+Fe,r-Fe,s);if(fe==null)throw new X;let Be=null;for(let Fe=1;Be===null&&Fe<K;Fe++)Be=this.getBlackPointOnSegment(r,l-Fe,r-Fe,l);if(Be==null)throw new X;return this.centerEdges(Be,ee,fe,se)}else throw new X}getBlackPointOnSegment(e,r,s,l){const c=et.round(et.distance(e,r,s,l)),d=(s-e)/c,p=(l-r)/c,y=this.image;for(let E=0;E<c;E++){const R=et.round(e+E*d),P=et.round(r+E*p);if(y.get(R,P))return new ze(R,P)}return null}centerEdges(e,r,s,l){const c=e.getX(),d=e.getY(),p=r.getX(),y=r.getY(),E=s.getX(),R=s.getY(),P=l.getX(),D=l.getY(),z=Xe.CORR;return c<this.width/2?[new ze(P-z,D+z),new ze(p+z,y+z),new ze(E-z,R-z),new ze(c+z,d-z)]:[new ze(P+z,D+z),new ze(p+z,y-z),new ze(E-z,R+z),new ze(c-z,d-z)]}containsBlackPoint(e,r,s,l){const c=this.image;if(l){for(let d=e;d<=r;d++)if(c.get(d,s))return!0}else for(let d=e;d<=r;d++)if(c.get(s,d))return!0;return!1}}Xe.INIT_SIZE=10,Xe.CORR=1;class Rt{static checkAndNudgePoints(e,r){const s=e.getWidth(),l=e.getHeight();let c=!0;for(let d=0;d<r.length&&c;d+=2){const p=Math.floor(r[d]),y=Math.floor(r[d+1]);if(p<-1||p>s||y<-1||y>l)throw new X;c=!1,p===-1?(r[d]=0,c=!0):p===s&&(r[d]=s-1,c=!0),y===-1?(r[d+1]=0,c=!0):y===l&&(r[d+1]=l-1,c=!0)}c=!0;for(let d=r.length-2;d>=0&&c;d-=2){const p=Math.floor(r[d]),y=Math.floor(r[d+1]);if(p<-1||p>s||y<-1||y>l)throw new X;c=!1,p===-1?(r[d]=0,c=!0):p===s&&(r[d]=s-1,c=!0),y===-1?(r[d+1]=0,c=!0):y===l&&(r[d+1]=l-1,c=!0)}}}class We{constructor(e,r,s,l,c,d,p,y,E){this.a11=e,this.a21=r,this.a31=s,this.a12=l,this.a22=c,this.a32=d,this.a13=p,this.a23=y,this.a33=E}static quadrilateralToQuadrilateral(e,r,s,l,c,d,p,y,E,R,P,D,z,K,ee,se){const fe=We.quadrilateralToSquare(e,r,s,l,c,d,p,y);return We.squareToQuadrilateral(E,R,P,D,z,K,ee,se).times(fe)}transformPoints(e){const r=e.length,s=this.a11,l=this.a12,c=this.a13,d=this.a21,p=this.a22,y=this.a23,E=this.a31,R=this.a32,P=this.a33;for(let D=0;D<r;D+=2){const z=e[D],K=e[D+1],ee=c*z+y*K+P;e[D]=(s*z+d*K+E)/ee,e[D+1]=(l*z+p*K+R)/ee}}transformPointsWithValues(e,r){const s=this.a11,l=this.a12,c=this.a13,d=this.a21,p=this.a22,y=this.a23,E=this.a31,R=this.a32,P=this.a33,D=e.length;for(let z=0;z<D;z++){const K=e[z],ee=r[z],se=c*K+y*ee+P;e[z]=(s*K+d*ee+E)/se,r[z]=(l*K+p*ee+R)/se}}static squareToQuadrilateral(e,r,s,l,c,d,p,y){const E=e-s+c-p,R=r-l+d-y;if(E===0&&R===0)return new We(s-e,c-s,e,l-r,d-l,r,0,0,1);{const P=s-c,D=p-c,z=l-d,K=y-d,ee=P*K-D*z,se=(E*K-D*R)/ee,fe=(P*R-E*z)/ee;return new We(s-e+se*s,p-e+fe*p,e,l-r+se*l,y-r+fe*y,r,se,fe,1)}}static quadrilateralToSquare(e,r,s,l,c,d,p,y){return We.squareToQuadrilateral(e,r,s,l,c,d,p,y).buildAdjoint()}buildAdjoint(){return new We(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new We(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class ht extends Rt{sampleGrid(e,r,s,l,c,d,p,y,E,R,P,D,z,K,ee,se,fe,Be,Fe){const Pe=We.quadrilateralToQuadrilateral(l,c,d,p,y,E,R,P,D,z,K,ee,se,fe,Be,Fe);return this.sampleGridWithTransform(e,r,s,Pe)}sampleGridWithTransform(e,r,s,l){if(r<=0||s<=0)throw new X;const c=new be(r,s),d=new Float32Array(2*r);for(let p=0;p<s;p++){const y=d.length,E=p+.5;for(let R=0;R<y;R+=2)d[R]=R/2+.5,d[R+1]=E;l.transformPoints(d),Rt.checkAndNudgePoints(e,d);try{for(let R=0;R<y;R+=2)e.get(Math.floor(d[R]),Math.floor(d[R+1]))&&c.set(R/2,p)}catch{throw new X}}return c}}class tt{static setGridSampler(e){tt.gridSampler=e}static getInstance(){return tt.gridSampler}}tt.gridSampler=new ht;class _t{constructor(e,r){this.x=e,this.y=r}toResultPoint(){return new ze(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class zt{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let r=this.getMatrixCenter(),s=this.getBullsEyeCorners(r);if(e){let d=s[0];s[0]=s[2],s[2]=d}this.extractParameters(s);let l=this.sampleGrid(this.image,s[this.shift%4],s[(this.shift+1)%4],s[(this.shift+2)%4],s[(this.shift+3)%4]),c=this.getMatrixCornerPoints(s);return new tr(l,c,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new X;let r=2*this.nbCenterLayers,s=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(s,r);let l=0;for(let d=0;d<4;d++){let p=s[(this.shift+d)%4];this.compact?(l<<=7,l+=p>>1&127):(l<<=10,l+=(p>>2&992)+(p>>1&31))}let c=this.getCorrectedParameterData(l,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)}getRotation(e,r){let s=0;e.forEach((l,c,d)=>{let p=(l>>r-2<<1)+(l&1);s=(s<<3)+p}),s=((s&1)<<11)+(s>>1);for(let l=0;l<4;l++)if(F.bitCount(s^this.EXPECTED_CORNER_BITS[l])<=2)return l;throw new X}getCorrectedParameterData(e,r){let s,l;r?(s=7,l=2):(s=10,l=4);let c=s-l,d=new Int32Array(s);for(let y=s-1;y>=0;--y)d[y]=e&15,e>>=4;try{new Tt(pe.AZTEC_PARAM).decode(d,c)}catch{throw new X}let p=0;for(let y=0;y<l;y++)p=(p<<4)+d[y];return p}getBullsEyeCorners(e){let r=e,s=e,l=e,c=e,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let P=this.getFirstDifferent(r,d,1,-1),D=this.getFirstDifferent(s,d,1,1),z=this.getFirstDifferent(l,d,-1,1),K=this.getFirstDifferent(c,d,-1,-1);if(this.nbCenterLayers>2){let ee=this.distancePoint(K,P)*this.nbCenterLayers/(this.distancePoint(c,r)*(this.nbCenterLayers+2));if(ee<.75||ee>1.25||!this.isWhiteOrBlackRectangle(P,D,z,K))break}r=P,s=D,l=z,c=K,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new X;this.compact=this.nbCenterLayers===5;let p=new ze(r.getX()+.5,r.getY()-.5),y=new ze(s.getX()+.5,s.getY()+.5),E=new ze(l.getX()-.5,l.getY()+.5),R=new ze(c.getX()-.5,c.getY()-.5);return this.expandSquare([p,y,E,R],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,r,s,l;try{let p=new Xe(this.image).detect();e=p[0],r=p[1],s=p[2],l=p[3]}catch{let y=this.image.getWidth()/2,E=this.image.getHeight()/2;e=this.getFirstDifferent(new _t(y+7,E-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new _t(y+7,E+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new _t(y-7,E+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new _t(y-7,E-7),!1,-1,-1).toResultPoint()}let c=et.round((e.getX()+l.getX()+r.getX()+s.getX())/4),d=et.round((e.getY()+l.getY()+r.getY()+s.getY())/4);try{let p=new Xe(this.image,15,c,d).detect();e=p[0],r=p[1],s=p[2],l=p[3]}catch{e=this.getFirstDifferent(new _t(c+7,d-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new _t(c+7,d+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new _t(c-7,d+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new _t(c-7,d-7),!1,-1,-1).toResultPoint()}return c=et.round((e.getX()+l.getX()+r.getX()+s.getX())/4),d=et.round((e.getY()+l.getY()+r.getY()+s.getY())/4),new _t(c,d)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,r,s,l,c){let d=tt.getInstance(),p=this.getDimension(),y=p/2-this.nbCenterLayers,E=p/2+this.nbCenterLayers;return d.sampleGrid(e,p,p,y,y,E,y,E,E,y,E,r.getX(),r.getY(),s.getX(),s.getY(),l.getX(),l.getY(),c.getX(),c.getY())}sampleLine(e,r,s){let l=0,c=this.distanceResultPoint(e,r),d=c/s,p=e.getX(),y=e.getY(),E=d*(r.getX()-e.getX())/c,R=d*(r.getY()-e.getY())/c;for(let P=0;P<s;P++)this.image.get(et.round(p+P*E),et.round(y+P*R))&&(l|=1<<s-P-1);return l}isWhiteOrBlackRectangle(e,r,s,l){let c=3;e=new _t(e.getX()-c,e.getY()+c),r=new _t(r.getX()-c,r.getY()-c),s=new _t(s.getX()+c,s.getY()-c),l=new _t(l.getX()+c,l.getY()+c);let d=this.getColor(l,e);if(d===0)return!1;let p=this.getColor(e,r);return p!==d||(p=this.getColor(r,s),p!==d)?!1:(p=this.getColor(s,l),p===d)}getColor(e,r){let s=this.distancePoint(e,r),l=(r.getX()-e.getX())/s,c=(r.getY()-e.getY())/s,d=0,p=e.getX(),y=e.getY(),E=this.image.get(e.getX(),e.getY()),R=Math.ceil(s);for(let D=0;D<R;D++)p+=l,y+=c,this.image.get(et.round(p),et.round(y))!==E&&d++;let P=d/s;return P>.1&&P<.9?0:P<=.1===E?1:-1}getFirstDifferent(e,r,s,l){let c=e.getX()+s,d=e.getY()+l;for(;this.isValid(c,d)&&this.image.get(c,d)===r;)c+=s,d+=l;for(c-=s,d-=l;this.isValid(c,d)&&this.image.get(c,d)===r;)c+=s;for(c-=s;this.isValid(c,d)&&this.image.get(c,d)===r;)d+=l;return d-=l,new _t(c,d)}expandSquare(e,r,s){let l=s/(2*r),c=e[0].getX()-e[2].getX(),d=e[0].getY()-e[2].getY(),p=(e[0].getX()+e[2].getX())/2,y=(e[0].getY()+e[2].getY())/2,E=new ze(p+l*c,y+l*d),R=new ze(p-l*c,y-l*d);c=e[1].getX()-e[3].getX(),d=e[1].getY()-e[3].getY(),p=(e[1].getX()+e[3].getX())/2,y=(e[1].getY()+e[3].getY())/2;let P=new ze(p+l*c,y+l*d),D=new ze(p-l*c,y-l*d);return[E,P,R,D]}isValid(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()}isValidPoint(e){let r=et.round(e.getX()),s=et.round(e.getY());return this.isValid(r,s)}distancePoint(e,r){return et.distance(e.getX(),e.getY(),r.getX(),r.getY())}distanceResultPoint(e,r){return et.distance(e.getX(),e.getY(),r.getX(),r.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(F.truncDivision(this.nbLayers-4,8)+1)+15}}class Bt{decode(e,r=null){let s=null,l=new zt(e.getBlackMatrix()),c=null,d=null;try{let R=l.detectMirror(!1);c=R.getPoints(),this.reportFoundResultPoints(r,c),d=new Qe().decode(R)}catch(R){s=R}if(d==null)try{let R=l.detectMirror(!0);c=R.getPoints(),this.reportFoundResultPoints(r,c),d=new Qe().decode(R)}catch(R){throw s??R}let p=new ve(d.getText(),d.getRawBytes(),d.getNumBits(),c,$.AZTEC,B.currentTimeMillis()),y=d.getByteSegments();y!=null&&p.putMetadata(ge.BYTE_SEGMENTS,y);let E=d.getECLevel();return E!=null&&p.putMetadata(ge.ERROR_CORRECTION_LEVEL,E),p}reportFoundResultPoints(e,r){if(e!=null){let s=e.get(ne.NEED_RESULT_POINT_CALLBACK);s!=null&&r.forEach((l,c,d)=>{s.foundPossibleResultPoint(l)})}}reset(){}}class at extends Ce{constructor(e=500){super(new Bt,e)}}class Ie{decode(e,r){try{return this.doDecode(e,r)}catch{if(r&&r.get(ne.TRY_HARDER)===!0&&e.isRotateSupported()){const c=e.rotateCounterClockwise(),d=this.doDecode(c,r),p=d.getResultMetadata();let y=270;p!==null&&p.get(ge.ORIENTATION)===!0&&(y=y+p.get(ge.ORIENTATION)%360),d.putMetadata(ge.ORIENTATION,y);const E=d.getResultPoints();if(E!==null){const R=c.getHeight();for(let P=0;P<E.length;P++)E[P]=new ze(R-E[P].getY()-1,E[P].getX())}return d}else throw new X}}reset(){}doDecode(e,r){const s=e.getWidth(),l=e.getHeight();let c=new Z(s);const d=r&&r.get(ne.TRY_HARDER)===!0,p=Math.max(1,l>>(d?8:5));let y;d?y=l:y=15;const E=Math.trunc(l/2);for(let R=0;R<y;R++){const P=Math.trunc((R+1)/2),D=(R&1)===0,z=E+p*(D?P:-P);if(z<0||z>=l)break;try{c=e.getBlackRow(z,c)}catch{continue}for(let K=0;K<2;K++){if(K===1&&(c.reverse(),r&&r.get(ne.NEED_RESULT_POINT_CALLBACK)===!0)){const ee=new Map;r.forEach((se,fe)=>ee.set(fe,se)),ee.delete(ne.NEED_RESULT_POINT_CALLBACK),r=ee}try{const ee=this.decodeRow(z,c,r);if(K===1){ee.putMetadata(ge.ORIENTATION,180);const se=ee.getResultPoints();se!==null&&(se[0]=new ze(s-se[0].getX()-1,se[0].getY()),se[1]=new ze(s-se[1].getX()-1,se[1].getY()))}return ee}catch{}}}throw new X}static recordPattern(e,r,s){const l=s.length;for(let E=0;E<l;E++)s[E]=0;const c=e.getSize();if(r>=c)throw new X;let d=!e.get(r),p=0,y=r;for(;y<c;){if(e.get(y)!==d)s[p]++;else{if(++p===l)break;s[p]=1,d=!d}y++}if(!(p===l||p===l-1&&y===c))throw new X}static recordPatternInReverse(e,r,s){let l=s.length,c=e.get(r);for(;r>0&&l>=0;)e.get(--r)!==c&&(l--,c=!c);if(l>=0)throw new X;Ie.recordPattern(e,r+1,s)}static patternMatchVariance(e,r,s){const l=e.length;let c=0,d=0;for(let E=0;E<l;E++)c+=e[E],d+=r[E];if(c<d)return Number.POSITIVE_INFINITY;const p=c/d;s*=p;let y=0;for(let E=0;E<l;E++){const R=e[E],P=r[E]*p,D=R>P?R-P:P-R;if(D>s)return Number.POSITIVE_INFINITY;y+=D}return y/c}}class le extends Ie{static findStartPattern(e){const r=e.getSize(),s=e.getNextSet(0);let l=0,c=Int32Array.from([0,0,0,0,0,0]),d=s,p=!1;const y=6;for(let E=s;E<r;E++)if(e.get(E)!==p)c[l]++;else{if(l===y-1){let R=le.MAX_AVG_VARIANCE,P=-1;for(let D=le.CODE_START_A;D<=le.CODE_START_C;D++){const z=Ie.patternMatchVariance(c,le.CODE_PATTERNS[D],le.MAX_INDIVIDUAL_VARIANCE);z<R&&(R=z,P=D)}if(P>=0&&e.isRange(Math.max(0,d-(E-d)/2),d,!1))return Int32Array.from([d,E,P]);d+=c[0]+c[1],c=c.slice(2,c.length-1),c[l-1]=0,c[l]=0,l--}else l++;c[l]=1,p=!p}throw new X}static decodeCode(e,r,s){Ie.recordPattern(e,s,r);let l=le.MAX_AVG_VARIANCE,c=-1;for(let d=0;d<le.CODE_PATTERNS.length;d++){const p=le.CODE_PATTERNS[d],y=this.patternMatchVariance(r,p,le.MAX_INDIVIDUAL_VARIANCE);y<l&&(l=y,c=d)}if(c>=0)return c;throw new X}decodeRow(e,r,s){const l=s&&s.get(ne.ASSUME_GS1)===!0,c=le.findStartPattern(r),d=c[2];let p=0;const y=new Uint8Array(20);y[p++]=d;let E;switch(d){case le.CODE_START_A:E=le.CODE_CODE_A;break;case le.CODE_START_B:E=le.CODE_CODE_B;break;case le.CODE_START_C:E=le.CODE_CODE_C;break;default:throw new q}let R=!1,P=!1,D="",z=c[0],K=c[1];const ee=Int32Array.from([0,0,0,0,0,0]);let se=0,fe=0,Be=d,Fe=0,Pe=!0,Pt=!1,St=!1;for(;!R;){const fi=P;switch(P=!1,se=fe,fe=le.decodeCode(r,ee,K),y[p++]=fe,fe!==le.CODE_STOP&&(Pe=!0),fe!==le.CODE_STOP&&(Fe++,Be+=Fe*fe),z=K,K+=ee.reduce((cs,ua)=>cs+ua,0),fe){case le.CODE_START_A:case le.CODE_START_B:case le.CODE_START_C:throw new q}switch(E){case le.CODE_CODE_A:if(fe<64)St===Pt?D+=String.fromCharCode(32+fe):D+=String.fromCharCode(32+fe+128),St=!1;else if(fe<96)St===Pt?D+=String.fromCharCode(fe-64):D+=String.fromCharCode(fe+64),St=!1;else switch(fe!==le.CODE_STOP&&(Pe=!1),fe){case le.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case le.CODE_FNC_2:case le.CODE_FNC_3:break;case le.CODE_FNC_4_A:!Pt&&St?(Pt=!0,St=!1):Pt&&St?(Pt=!1,St=!1):St=!0;break;case le.CODE_SHIFT:P=!0,E=le.CODE_CODE_B;break;case le.CODE_CODE_B:E=le.CODE_CODE_B;break;case le.CODE_CODE_C:E=le.CODE_CODE_C;break;case le.CODE_STOP:R=!0;break}break;case le.CODE_CODE_B:if(fe<96)St===Pt?D+=String.fromCharCode(32+fe):D+=String.fromCharCode(32+fe+128),St=!1;else switch(fe!==le.CODE_STOP&&(Pe=!1),fe){case le.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case le.CODE_FNC_2:case le.CODE_FNC_3:break;case le.CODE_FNC_4_B:!Pt&&St?(Pt=!0,St=!1):Pt&&St?(Pt=!1,St=!1):St=!0;break;case le.CODE_SHIFT:P=!0,E=le.CODE_CODE_A;break;case le.CODE_CODE_A:E=le.CODE_CODE_A;break;case le.CODE_CODE_C:E=le.CODE_CODE_C;break;case le.CODE_STOP:R=!0;break}break;case le.CODE_CODE_C:if(fe<100)fe<10&&(D+="0"),D+=fe;else switch(fe!==le.CODE_STOP&&(Pe=!1),fe){case le.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case le.CODE_CODE_A:E=le.CODE_CODE_A;break;case le.CODE_CODE_B:E=le.CODE_CODE_B;break;case le.CODE_STOP:R=!0;break}break}fi&&(E=E===le.CODE_CODE_A?le.CODE_CODE_B:le.CODE_CODE_A)}const pr=K-z;if(K=r.getNextUnset(K),!r.isRange(K,Math.min(r.getSize(),K+(K-z)/2),!1))throw new X;if(Be-=Fe*se,Be%103!==se)throw new O;const Xr=D.length;if(Xr===0)throw new X;Xr>0&&Pe&&(E===le.CODE_CODE_C?D=D.substring(0,Xr-2):D=D.substring(0,Xr-1));const kn=(c[1]+c[0])/2,$t=z+pr/2,pn=y.length,ar=new Uint8Array(pn);for(let fi=0;fi<pn;fi++)ar[fi]=y[fi];const ji=[new ze(kn,e),new ze($t,e)];return new ve(D,ar,0,ji,$.CODE_128,new Date().getTime())}}le.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],le.MAX_AVG_VARIANCE=.25,le.MAX_INDIVIDUAL_VARIANCE=.7,le.CODE_SHIFT=98,le.CODE_CODE_C=99,le.CODE_CODE_B=100,le.CODE_CODE_A=101,le.CODE_FNC_1=102,le.CODE_FNC_2=97,le.CODE_FNC_3=96,le.CODE_FNC_4_A=101,le.CODE_FNC_4_B=100,le.CODE_START_A=103,le.CODE_START_B=104,le.CODE_START_C=105,le.CODE_STOP=106;class ct extends Ie{constructor(e=!1,r=!1){super(),this.usingCheckDigit=e,this.extendedMode=r,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,r,s){let l=this.counters;l.fill(0),this.decodeRowResult="";let c=ct.findAsteriskPattern(r,l),d=r.getNextSet(c[1]),p=r.getSize(),y,E;do{ct.recordPattern(r,d,l);let ee=ct.toNarrowWidePattern(l);if(ee<0)throw new X;y=ct.patternToChar(ee),this.decodeRowResult+=y,E=d;for(let se of l)d+=se;d=r.getNextSet(d)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let R=0;for(let ee of l)R+=ee;let P=d-E-R;if(d!==p&&P*2<R)throw new X;if(this.usingCheckDigit){let ee=this.decodeRowResult.length-1,se=0;for(let fe=0;fe<ee;fe++)se+=ct.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(fe));if(this.decodeRowResult.charAt(ee)!==ct.ALPHABET_STRING.charAt(se%43))throw new O;this.decodeRowResult=this.decodeRowResult.substring(0,ee)}if(this.decodeRowResult.length===0)throw new X;let D;this.extendedMode?D=ct.decodeExtended(this.decodeRowResult):D=this.decodeRowResult;let z=(c[1]+c[0])/2,K=E+R/2;return new ve(D,null,0,[new ze(z,e),new ze(K,e)],$.CODE_39,new Date().getTime())}static findAsteriskPattern(e,r){let s=e.getSize(),l=e.getNextSet(0),c=0,d=l,p=!1,y=r.length;for(let E=l;E<s;E++)if(e.get(E)!==p)r[c]++;else{if(c===y-1){if(this.toNarrowWidePattern(r)===ct.ASTERISK_ENCODING&&e.isRange(Math.max(0,d-Math.floor((E-d)/2)),d,!1))return[d,E];d+=r[0]+r[1],r.copyWithin(0,2,2+c-1),r[c-1]=0,r[c]=0,c--}else c++;r[c]=1,p=!p}throw new X}static toNarrowWidePattern(e){let r=e.length,s=0,l;do{let c=2147483647;for(let y of e)y<c&&y>s&&(c=y);s=c,l=0;let d=0,p=0;for(let y=0;y<r;y++){let E=e[y];E>s&&(p|=1<<r-1-y,l++,d+=E)}if(l===3){for(let y=0;y<r&&l>0;y++){let E=e[y];if(E>s&&(l--,E*2>=d))return-1}return p}}while(l>3);return-1}static patternToChar(e){for(let r=0;r<ct.CHARACTER_ENCODINGS.length;r++)if(ct.CHARACTER_ENCODINGS[r]===e)return ct.ALPHABET_STRING.charAt(r);if(e===ct.ASTERISK_ENCODING)return"*";throw new X}static decodeExtended(e){let r=e.length,s="";for(let l=0;l<r;l++){let c=e.charAt(l);if(c==="+"||c==="$"||c==="%"||c==="/"){let d=e.charAt(l+1),p="\0";switch(c){case"+":if(d>="A"&&d<="Z")p=String.fromCharCode(d.charCodeAt(0)+32);else throw new q;break;case"$":if(d>="A"&&d<="Z")p=String.fromCharCode(d.charCodeAt(0)-64);else throw new q;break;case"%":if(d>="A"&&d<="E")p=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")p=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")p=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")p=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")p="\0";else if(d==="V")p="@";else if(d==="W")p="`";else if(d==="X"||d==="Y"||d==="Z")p="";else throw new q;break;case"/":if(d>="A"&&d<="O")p=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")p=":";else throw new q;break}s+=p,l++}else s+=c}return s}}ct.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",ct.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],ct.ASTERISK_ENCODING=148;class je extends Ie{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,r,s){let l=this.decodeStart(r),c=this.decodeEnd(r),d=new Te;je.decodeMiddle(r,l[1],c[0],d);let p=d.toString(),y=null;s!=null&&(y=s.get(ne.ALLOWED_LENGTHS)),y==null&&(y=je.DEFAULT_ALLOWED_LENGTHS);let E=p.length,R=!1,P=0;for(let K of y){if(E===K){R=!0;break}K>P&&(P=K)}if(!R&&E>P&&(R=!0),!R)throw new q;const D=[new ze(l[1],e),new ze(c[0],e)];return new ve(p,null,0,D,$.ITF,new Date().getTime())}static decodeMiddle(e,r,s,l){let c=new Int32Array(10),d=new Int32Array(5),p=new Int32Array(5);for(c.fill(0),d.fill(0),p.fill(0);r<s;){Ie.recordPattern(e,r,c);for(let E=0;E<5;E++){let R=2*E;d[E]=c[R],p[E]=c[R+1]}let y=je.decodeDigit(d);l.append(y.toString()),y=this.decodeDigit(p),l.append(y.toString()),c.forEach(function(E){r+=E})}}decodeStart(e){let r=je.skipWhiteSpace(e),s=je.findGuardPattern(e,r,je.START_PATTERN);return this.narrowLineWidth=(s[1]-s[0])/4,this.validateQuietZone(e,s[0]),s}validateQuietZone(e,r){let s=this.narrowLineWidth*10;s=s<r?s:r;for(let l=r-1;s>0&&l>=0&&!e.get(l);l--)s--;if(s!==0)throw new X}static skipWhiteSpace(e){const r=e.getSize(),s=e.getNextSet(0);if(s===r)throw new X;return s}decodeEnd(e){e.reverse();try{let r=je.skipWhiteSpace(e),s;try{s=je.findGuardPattern(e,r,je.END_PATTERN_REVERSED[0])}catch(c){c instanceof X&&(s=je.findGuardPattern(e,r,je.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,s[0]);let l=s[0];return s[0]=e.getSize()-s[1],s[1]=e.getSize()-l,s}finally{e.reverse()}}static findGuardPattern(e,r,s){let l=s.length,c=new Int32Array(l),d=e.getSize(),p=!1,y=0,E=r;c.fill(0);for(let R=r;R<d;R++)if(e.get(R)!==p)c[y]++;else{if(y===l-1){if(Ie.patternMatchVariance(c,s,je.MAX_INDIVIDUAL_VARIANCE)<je.MAX_AVG_VARIANCE)return[E,R];E+=c[0]+c[1],B.arraycopy(c,2,c,0,y-1),c[y-1]=0,c[y]=0,y--}else y++;c[y]=1,p=!p}throw new X}static decodeDigit(e){let r=je.MAX_AVG_VARIANCE,s=-1,l=je.PATTERNS.length;for(let c=0;c<l;c++){let d=je.PATTERNS[c],p=Ie.patternMatchVariance(e,d,je.MAX_INDIVIDUAL_VARIANCE);p<r?(r=p,s=c):p===r&&(s=-1)}if(s>=0)return s%10;throw new X}}je.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],je.MAX_AVG_VARIANCE=.38,je.MAX_INDIVIDUAL_VARIANCE=.5,je.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],je.START_PATTERN=Int32Array.from([1,1,1,1]),je.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class yt extends Ie{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let r=!1,s,l=0,c=Int32Array.from([0,0,0]);for(;!r;){c=Int32Array.from([0,0,0]),s=yt.findGuardPattern(e,l,!1,this.START_END_PATTERN,c);let d=s[0];l=s[1];let p=d-(l-d);p>=0&&(r=e.isRange(p,d,!1))}return s}static checkChecksum(e){return yt.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let r=e.length;if(r===0)return!1;let s=parseInt(e.charAt(r-1),10);return yt.getStandardUPCEANChecksum(e.substring(0,r-1))===s}static getStandardUPCEANChecksum(e){let r=e.length,s=0;for(let l=r-1;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;s+=c}s*=3;for(let l=r-2;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;s+=c}return(1e3-s)%10}static decodeEnd(e,r){return yt.findGuardPattern(e,r,!1,yt.START_END_PATTERN,new Int32Array(yt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,r,s,l){return this.findGuardPattern(e,r,s,l,new Int32Array(l.length))}static findGuardPattern(e,r,s,l,c){let d=e.getSize();r=s?e.getNextUnset(r):e.getNextSet(r);let p=0,y=r,E=l.length,R=s;for(let P=r;P<d;P++)if(e.get(P)!==R)c[p]++;else{if(p===E-1){if(Ie.patternMatchVariance(c,l,yt.MAX_INDIVIDUAL_VARIANCE)<yt.MAX_AVG_VARIANCE)return Int32Array.from([y,P]);y+=c[0]+c[1];let D=c.slice(2,c.length-1);for(let z=0;z<p-1;z++)c[z]=D[z];c[p-1]=0,c[p]=0,p--}else p++;c[p]=1,R=!R}throw new X}static decodeDigit(e,r,s,l){this.recordPattern(e,s,r);let c=this.MAX_AVG_VARIANCE,d=-1,p=l.length;for(let y=0;y<p;y++){let E=l[y],R=Ie.patternMatchVariance(r,E,yt.MAX_INDIVIDUAL_VARIANCE);R<c&&(c=R,d=y)}if(d>=0)return d;throw new X}}yt.MAX_AVG_VARIANCE=.48,yt.MAX_INDIVIDUAL_VARIANCE=.7,yt.START_END_PATTERN=Int32Array.from([1,1,1]),yt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),yt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),yt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Xt{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,r,s){let l=this.decodeRowStringBuffer,c=this.decodeMiddle(r,s,l),d=l.toString(),p=Xt.parseExtensionString(d),y=[new ze((s[0]+s[1])/2,e),new ze(c,e)],E=new ve(d,null,0,y,$.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&E.putAllMetadata(p),E}decodeMiddle(e,r,s){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),d=r[1],p=0;for(let E=0;E<5&&d<c;E++){let R=yt.decodeDigit(e,l,d,yt.L_AND_G_PATTERNS);s+=String.fromCharCode(48+R%10);for(let P of l)d+=P;R>=10&&(p|=1<<4-E),E!==4&&(d=e.getNextSet(d),d=e.getNextUnset(d))}if(s.length!==5)throw new X;let y=this.determineCheckDigit(p);if(Xt.extensionChecksum(s.toString())!==y)throw new X;return d}static extensionChecksum(e){let r=e.length,s=0;for(let l=r-2;l>=0;l-=2)s+=e.charAt(l).charCodeAt(0)-48;s*=3;for(let l=r-1;l>=0;l-=2)s+=e.charAt(l).charCodeAt(0)-48;return s*=3,s%10}determineCheckDigit(e){for(let r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new X}static parseExtensionString(e){if(e.length!==5)return null;let r=Xt.parseExtension5String(e);return r==null?null:new Map([[ge.SUGGESTED_PRICE,r]])}static parseExtension5String(e){let r;switch(e.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}let s=parseInt(e.substring(1)),l=(s/100).toString(),c=s%100,d=c<10?"0"+c:c.toString();return r+l+"."+d}}class un{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,r,s){let l=this.decodeRowStringBuffer,c=this.decodeMiddle(r,s,l),d=l.toString(),p=un.parseExtensionString(d),y=[new ze((s[0]+s[1])/2,e),new ze(c,e)],E=new ve(d,null,0,y,$.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&E.putAllMetadata(p),E}decodeMiddle(e,r,s){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),d=r[1],p=0;for(let y=0;y<2&&d<c;y++){let E=yt.decodeDigit(e,l,d,yt.L_AND_G_PATTERNS);s+=String.fromCharCode(48+E%10);for(let R of l)d+=R;E>=10&&(p|=1<<1-y),y!==1&&(d=e.getNextSet(d),d=e.getNextUnset(d))}if(s.length!==2)throw new X;if(parseInt(s.toString())%4!==p)throw new X;return d}static parseExtensionString(e){return e.length!==2?null:new Map([[ge.ISSUE_NUMBER,parseInt(e)]])}}class Cn{static decodeRow(e,r,s){let l=yt.findGuardPattern(r,s,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Xt().decodeRow(e,r,l)}catch{return new un().decodeRow(e,r,l)}}}Cn.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class dt extends yt{constructor(){super(),this.decodeRowStringBuffer="",dt.L_AND_G_PATTERNS=dt.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let r=dt.L_PATTERNS[e-10],s=new Int32Array(r.length);for(let l=0;l<r.length;l++)s[l]=r[r.length-l-1];dt.L_AND_G_PATTERNS[e]=s}}decodeRow(e,r,s){let l=dt.findStartGuardPattern(r),c=s==null?null:s.get(ne.NEED_RESULT_POINT_CALLBACK);if(c!=null){const Pe=new ze((l[0]+l[1])/2,e);c.foundPossibleResultPoint(Pe)}let d=this.decodeMiddle(r,l,this.decodeRowStringBuffer),p=d.rowOffset,y=d.resultString;if(c!=null){const Pe=new ze(p,e);c.foundPossibleResultPoint(Pe)}let E=this.decodeEnd(r,p);if(c!=null){const Pe=new ze((E[0]+E[1])/2,e);c.foundPossibleResultPoint(Pe)}let R=E[1],P=R+(R-E[0]);if(P>=r.getSize()||!r.isRange(R,P,!1))throw new X;let D=y.toString();if(D.length<8)throw new q;if(!dt.checkChecksum(D))throw new O;let z=(l[1]+l[0])/2,K=(E[1]+E[0])/2,ee=this.getBarcodeFormat(),se=[new ze(z,e),new ze(K,e)],fe=new ve(D,null,0,se,ee,new Date().getTime()),Be=0;try{let Pe=Cn.decodeRow(e,r,E[1]);fe.putMetadata(ge.UPC_EAN_EXTENSION,Pe.getText()),fe.putAllMetadata(Pe.getResultMetadata()),fe.addResultPoints(Pe.getResultPoints()),Be=Pe.getText().length}catch{}let Fe=s==null?null:s.get(ne.ALLOWED_EAN_EXTENSIONS);if(Fe!=null){let Pe=!1;for(let Pt in Fe)if(Be.toString()===Pt){Pe=!0;break}if(!Pe)throw new X}return fe}decodeEnd(e,r){return dt.findGuardPattern(e,r,!1,dt.START_END_PATTERN,new Int32Array(dt.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return dt.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let r=e.length;if(r===0)return!1;let s=parseInt(e.charAt(r-1),10);return dt.getStandardUPCEANChecksum(e.substring(0,r-1))===s}static getStandardUPCEANChecksum(e){let r=e.length,s=0;for(let l=r-1;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;s+=c}s*=3;for(let l=r-2;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;s+=c}return(1e3-s)%10}}class en extends dt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,r,s){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),d=r[1],p=0;for(let E=0;E<6&&d<c;E++){let R=dt.decodeDigit(e,l,d,dt.L_AND_G_PATTERNS);s+=String.fromCharCode(48+R%10);for(let P of l)d+=P;R>=10&&(p|=1<<5-E)}s=en.determineFirstDigit(s,p),d=dt.findGuardPattern(e,d,!0,dt.MIDDLE_PATTERN,new Int32Array(dt.MIDDLE_PATTERN.length).fill(0))[1];for(let E=0;E<6&&d<c;E++){let R=dt.decodeDigit(e,l,d,dt.L_PATTERNS);s+=String.fromCharCode(48+R);for(let P of l)d+=P}return{rowOffset:d,resultString:s}}getBarcodeFormat(){return $.EAN_13}static determineFirstDigit(e,r){for(let s=0;s<10;s++)if(r===this.FIRST_DIGIT_ENCODINGS[s])return e=String.fromCharCode(48+s)+e,e;throw new X}}en.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class nr extends dt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,r,s){const l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),d=r[1];for(let y=0;y<4&&d<c;y++){let E=dt.decodeDigit(e,l,d,dt.L_PATTERNS);s+=String.fromCharCode(48+E);for(let R of l)d+=R}d=dt.findGuardPattern(e,d,!0,dt.MIDDLE_PATTERN,new Int32Array(dt.MIDDLE_PATTERN.length).fill(0))[1];for(let y=0;y<4&&d<c;y++){let E=dt.decodeDigit(e,l,d,dt.L_PATTERNS);s+=String.fromCharCode(48+E);for(let R of l)d+=R}return{rowOffset:d,resultString:s}}getBarcodeFormat(){return $.EAN_8}}class Rr extends dt{constructor(){super(...arguments),this.ean13Reader=new en}getBarcodeFormat(){return $.UPC_A}decode(e,r){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,r,s){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,r,s))}decodeMiddle(e,r,s){return this.ean13Reader.decodeMiddle(e,r,s)}maybeReturnResult(e){let r=e.getText();if(r.charAt(0)==="0"){let s=new ve(r.substring(1),null,null,e.getResultPoints(),$.UPC_A);return e.getResultMetadata()!=null&&s.putAllMetadata(e.getResultMetadata()),s}else throw new X}reset(){this.ean13Reader.reset()}}class bn extends dt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,r,s){const l=this.decodeMiddleCounters.map(E=>E);l[0]=0,l[1]=0,l[2]=0,l[3]=0;const c=e.getSize();let d=r[1],p=0;for(let E=0;E<6&&d<c;E++){const R=bn.decodeDigit(e,l,d,bn.L_AND_G_PATTERNS);s+=String.fromCharCode(48+R%10);for(let P of l)d+=P;R>=10&&(p|=1<<5-E)}let y=bn.determineNumSysAndCheckDigit(s,p);return{rowOffset:d,resultString:y}}decodeEnd(e,r){return bn.findGuardPatternWithoutCounters(e,r,!0,bn.MIDDLE_END_PATTERN)}checkChecksum(e){return dt.checkChecksum(bn.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,r){for(let s=0;s<=1;s++)for(let l=0;l<10;l++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[s][l]){let c=String.fromCharCode(48+s),d=String.fromCharCode(48+l);return c+e+d}throw X.getNotFoundInstance()}getBarcodeFormat(){return $.UPC_E}static convertUPCEtoUPCA(e){const r=e.slice(1,7).split("").map(c=>c.charCodeAt(0)),s=new Te;s.append(e.charAt(0));let l=r[5];switch(l){case 0:case 1:case 2:s.appendChars(r,0,2),s.append(l),s.append("0000"),s.appendChars(r,2,3);break;case 3:s.appendChars(r,0,3),s.append("00000"),s.appendChars(r,3,2);break;case 4:s.appendChars(r,0,4),s.append("00000"),s.append(r[4]);break;default:s.appendChars(r,0,5),s.append("0000"),s.append(l);break}return e.length>=8&&s.append(e.charAt(7)),s.toString()}}bn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),bn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class vi extends Ie{constructor(e){super();let r=e==null?null:e.get(ne.POSSIBLE_FORMATS),s=[];u(r)?(s.push(new en),s.push(new Rr),s.push(new nr),s.push(new bn)):(r.indexOf($.EAN_13)>-1&&s.push(new en),r.indexOf($.UPC_A)>-1&&s.push(new Rr),r.indexOf($.EAN_8)>-1&&s.push(new nr),r.indexOf($.UPC_E)>-1&&s.push(new bn)),this.readers=s}decodeRow(e,r,s){for(let l of this.readers)try{const c=l.decodeRow(e,r,s),d=c.getBarcodeFormat()===$.EAN_13&&c.getText().charAt(0)==="0",p=s==null?null:s.get(ne.POSSIBLE_FORMATS),y=p==null||p.includes($.UPC_A);if(d&&y){const E=c.getRawBytes(),R=new ve(c.getText().substring(1),E,E?E.length:null,c.getResultPoints(),$.UPC_A);return R.putAllMetadata(c.getResultMetadata()),R}return c}catch{}throw new X}reset(){for(let e of this.readers)e.reset()}}class Kt extends Ie{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,r){for(let s=0;s<r.length;s++)if(Ie.patternMatchVariance(e,r[s],Kt.MAX_INDIVIDUAL_VARIANCE)<Kt.MAX_AVG_VARIANCE)return s;throw new X}static count(e){return et.sum(new Int32Array(e))}static increment(e,r){let s=0,l=r[0];for(let c=1;c<e.length;c++)r[c]>l&&(l=r[c],s=c);e[s]++}static decrement(e,r){let s=0,l=r[0];for(let c=1;c<e.length;c++)r[c]<l&&(l=r[c],s=c);e[s]--}static isFinderPattern(e){let r=e[0]+e[1],s=r+e[2]+e[3],l=r/s;if(l>=Kt.MIN_FINDER_PATTERN_RATIO&&l<=Kt.MAX_FINDER_PATTERN_RATIO){let c=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;for(let p of e)p>d&&(d=p),p<c&&(c=p);return d<10*c}return!1}}Kt.MAX_AVG_VARIANCE=.2,Kt.MAX_INDIVIDUAL_VARIANCE=.45,Kt.MIN_FINDER_PATTERN_RATIO=9.5/12,Kt.MAX_FINDER_PATTERN_RATIO=12.5/14;class zr{constructor(e,r){this.value=e,this.checksumPortion=r}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof zr))return!1;const r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class fr{constructor(e,r,s,l,c){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new ze(s,c)),this.resultPoints.push(new ze(l,c))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof fr))return!1;const r=e;return this.value===r.value}hashCode(){return this.value}}class Vn{constructor(){}static getRSSvalue(e,r,s){let l=0;for(let y of e)l+=y;let c=0,d=0,p=e.length;for(let y=0;y<p-1;y++){let E;for(E=1,d|=1<<y;E<e[y];E++,d&=~(1<<y)){let R=Vn.combins(l-E-1,p-y-2);if(s&&d===0&&l-E-(p-y-1)>=p-y-1&&(R-=Vn.combins(l-E-(p-y),p-y-2)),p-y-1>1){let P=0;for(let D=l-E-(p-y-2);D>r;D--)P+=Vn.combins(l-E-D-1,p-y-3);R-=P*(p-1-y)}else l-E>r&&R--;c+=R}l-=E}return c}static combins(e,r){let s,l;e-r>r?(l=r,s=e-r):(l=e-r,s=r);let c=1,d=1;for(let p=e;p>s;p--)c*=p,d<=l&&(c/=d,d++);for(;d<=l;)c/=d,d++;return c}}class $n{static buildBitArray(e){let r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);let s=12*r,l=new Z(s),c=0,p=e[0].getRightChar().getValue();for(let y=11;y>=0;--y)p&1<<y&&l.set(c),c++;for(let y=1;y<e.length;++y){let E=e[y],R=E.getLeftChar().getValue();for(let P=11;P>=0;--P)R&1<<P&&l.set(c),c++;if(E.getRightChar()!=null){let P=E.getRightChar().getValue();for(let D=11;D>=0;--D)P&1<<D&&l.set(c),c++}}return l}}class rr{constructor(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Zn{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class hn extends Zn{constructor(e,r){super(e),this.value=r}getValue(){return this.value}isFNC1(){return this.value===hn.FNC1}}hn.FNC1="$";class vr extends Zn{constructor(e,r,s){super(e),s?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=r}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Un extends Zn{constructor(e,r,s){if(super(e),r<0||r>10||s<0||s>10)throw new q;this.firstDigit=r,this.secondDigit=s}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Un.FNC1}isSecondDigitFNC1(){return this.secondDigit===Un.FNC1}isAnyFNC1(){return this.firstDigit===Un.FNC1||this.secondDigit===Un.FNC1}}Un.FNC1=10;class Ke{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new X;let r=e.substring(0,2);for(let c of Ke.TWO_DIGIT_DATA_LENGTH)if(c[0]===r)return c[1]===Ke.VARIABLE_LENGTH?Ke.processVariableAI(2,c[2],e):Ke.processFixedAI(2,c[1],e);if(e.length<3)throw new X;let s=e.substring(0,3);for(let c of Ke.THREE_DIGIT_DATA_LENGTH)if(c[0]===s)return c[1]===Ke.VARIABLE_LENGTH?Ke.processVariableAI(3,c[2],e):Ke.processFixedAI(3,c[1],e);for(let c of Ke.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(c[0]===s)return c[1]===Ke.VARIABLE_LENGTH?Ke.processVariableAI(4,c[2],e):Ke.processFixedAI(4,c[1],e);if(e.length<4)throw new X;let l=e.substring(0,4);for(let c of Ke.FOUR_DIGIT_DATA_LENGTH)if(c[0]===l)return c[1]===Ke.VARIABLE_LENGTH?Ke.processVariableAI(4,c[2],e):Ke.processFixedAI(4,c[1],e);throw new X}static processFixedAI(e,r,s){if(s.length<e)throw new X;let l=s.substring(0,e);if(s.length<e+r)throw new X;let c=s.substring(e,e+r),d=s.substring(e+r),p="("+l+")"+c,y=Ke.parseFieldsInGeneralPurpose(d);return y==null?p:p+y}static processVariableAI(e,r,s){let l=s.substring(0,e),c;s.length<e+r?c=s.length:c=e+r;let d=s.substring(e,c),p=s.substring(c),y="("+l+")"+d,E=Ke.parseFieldsInGeneralPurpose(p);return E==null?y:y+E}}Ke.VARIABLE_LENGTH=[],Ke.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ke.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ke.VARIABLE_LENGTH,20],["22",Ke.VARIABLE_LENGTH,29],["30",Ke.VARIABLE_LENGTH,8],["37",Ke.VARIABLE_LENGTH,8],["90",Ke.VARIABLE_LENGTH,30],["91",Ke.VARIABLE_LENGTH,30],["92",Ke.VARIABLE_LENGTH,30],["93",Ke.VARIABLE_LENGTH,30],["94",Ke.VARIABLE_LENGTH,30],["95",Ke.VARIABLE_LENGTH,30],["96",Ke.VARIABLE_LENGTH,30],["97",Ke.VARIABLE_LENGTH,3],["98",Ke.VARIABLE_LENGTH,30],["99",Ke.VARIABLE_LENGTH,30]],Ke.THREE_DIGIT_DATA_LENGTH=[["240",Ke.VARIABLE_LENGTH,30],["241",Ke.VARIABLE_LENGTH,30],["242",Ke.VARIABLE_LENGTH,6],["250",Ke.VARIABLE_LENGTH,30],["251",Ke.VARIABLE_LENGTH,30],["253",Ke.VARIABLE_LENGTH,17],["254",Ke.VARIABLE_LENGTH,20],["400",Ke.VARIABLE_LENGTH,30],["401",Ke.VARIABLE_LENGTH,30],["402",17],["403",Ke.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ke.VARIABLE_LENGTH,20],["421",Ke.VARIABLE_LENGTH,15],["422",3],["423",Ke.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ke.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ke.VARIABLE_LENGTH,15],["391",Ke.VARIABLE_LENGTH,18],["392",Ke.VARIABLE_LENGTH,15],["393",Ke.VARIABLE_LENGTH,18],["703",Ke.VARIABLE_LENGTH,30]],Ke.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ke.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ke.VARIABLE_LENGTH,20],["8003",Ke.VARIABLE_LENGTH,30],["8004",Ke.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ke.VARIABLE_LENGTH,30],["8008",Ke.VARIABLE_LENGTH,12],["8018",18],["8020",Ke.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ke.VARIABLE_LENGTH,70],["8200",Ke.VARIABLE_LENGTH,70]];class hr{constructor(e){this.buffer=new Te,this.information=e}decodeAllCodes(e,r){let s=r,l=null;do{let c=this.decodeGeneralPurposeField(s,l),d=Ke.parseFieldsInGeneralPurpose(c.getNewString());if(d!=null&&e.append(d),c.isRemaining()?l=""+c.getRemainingValue():l=null,s===c.getNewPosition())break;s=c.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let c=this.extractNumericValueFromBitArray(e,4);return c===0?new Un(this.information.getSize(),Un.FNC1,Un.FNC1):new Un(this.information.getSize(),c-1,Un.FNC1)}let r=this.extractNumericValueFromBitArray(e,7),s=(r-8)/11,l=(r-8)%11;return new Un(e+7,s,l)}extractNumericValueFromBitArray(e,r){return hr.extractNumericValueFromBitArray(this.information,e,r)}static extractNumericValueFromBitArray(e,r,s){let l=0;for(let c=0;c<s;++c)e.get(r+c)&&(l|=1<<s-c-1);return l}decodeGeneralPurposeField(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);let s=this.parseBlocks();return s!=null&&s.isRemaining()?new vr(this.current.getPosition(),this.buffer.toString(),s.getRemainingValue()):new vr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,r;do{let s=this.current.getPosition();if(this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished()),!(s!==this.current.getPosition())&&!e)break}while(!e);return r.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let r;return e.isSecondDigitFNC1()?r=new vr(this.current.getPosition(),this.buffer.toString()):r=new vr(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new rr(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let r=new vr(this.current.getPosition(),this.buffer.toString());return new rr(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new rr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let r=new vr(this.current.getPosition(),this.buffer.toString());return new rr(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new rr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let r=new vr(this.current.getPosition(),this.buffer.toString());return new rr(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new rr(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(e,7);if(s>=64&&s<116)return!0;if(e+8>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(e,8);return l>=232&&l<253}decodeIsoIec646(e){let r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new hn(e+5,hn.FNC1);if(r>=5&&r<15)return new hn(e+5,"0"+(r-5));let s=this.extractNumericValueFromBitArray(e,7);if(s>=64&&s<90)return new hn(e+7,""+(s+1));if(s>=90&&s<116)return new hn(e+7,""+(s+7));let l=this.extractNumericValueFromBitArray(e,8),c;switch(l){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new q}return new hn(e+8,c)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(e,6);return s>=16&&s<63}decodeAlphanumeric(e){let r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new hn(e+5,hn.FNC1);if(r>=5&&r<15)return new hn(e+5,"0"+(r-5));let s=this.extractNumericValueFromBitArray(e,6);if(s>=32&&s<58)return new hn(e+6,""+(s+33));let l;switch(s){case 58:l="*";break;case 59:l=",";break;case 60:l="-";break;case 61:l=".";break;case 62:l="/";break;default:throw new Ze("Decoding invalid alphanumeric value: "+s)}return new hn(e+6,l)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0}}class ci{constructor(e){this.information=e,this.generalDecoder=new hr(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class ir extends ci{constructor(e){super(e)}encodeCompressedGtin(e,r){e.append("(01)");let s=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,r,s)}encodeCompressedGtinWithoutAI(e,r,s){for(let l=0;l<4;++l){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*l,10);c/100===0&&e.append("0"),c/10===0&&e.append("0"),e.append(c)}ir.appendCheckDigit(e,s)}static appendCheckDigit(e,r){let s=0;for(let l=0;l<13;l++){let c=e.charAt(l+r).charCodeAt(0)-48;s+=l&1?c:3*c}s=10-s%10,s===10&&(s=0),e.append(s)}}ir.GTIN_SIZE=40;class sr extends ir{constructor(e){super(e)}parseInformation(){let e=new Te;e.append("(01)");let r=e.length(),s=this.getGeneralDecoder().extractNumericValueFromBitArray(sr.HEADER_SIZE,4);return e.append(s),this.encodeCompressedGtinWithoutAI(e,sr.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(e,sr.HEADER_SIZE+44)}}sr.HEADER_SIZE=4;class Wr extends ci{constructor(e){super(e)}parseInformation(){let e=new Te;return this.getGeneralDecoder().decodeAllCodes(e,Wr.HEADER_SIZE)}}Wr.HEADER_SIZE=5;class Qi extends ir{constructor(e){super(e)}encodeCompressedWeight(e,r,s){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(r,s);this.addWeightCode(e,l);let c=this.checkWeight(l),d=1e5;for(let p=0;p<5;++p)c/d===0&&e.append("0"),d/=10;e.append(c)}}class kr extends Qi{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=kr.HEADER_SIZE+Qi.GTIN_SIZE+kr.WEIGHT_SIZE)throw new X;let e=new Te;return this.encodeCompressedGtin(e,kr.HEADER_SIZE),this.encodeCompressedWeight(e,kr.HEADER_SIZE+Qi.GTIN_SIZE,kr.WEIGHT_SIZE),e.toString()}}kr.HEADER_SIZE=5,kr.WEIGHT_SIZE=15;class Rs extends kr{constructor(e){super(e)}addWeightCode(e,r){e.append("(3103)")}checkWeight(e){return e}}class ho extends kr{constructor(e){super(e)}addWeightCode(e,r){r<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class Cr extends ir{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Cr.HEADER_SIZE+ir.GTIN_SIZE)throw new X;let e=new Te;this.encodeCompressedGtin(e,Cr.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(Cr.HEADER_SIZE+ir.GTIN_SIZE,Cr.LAST_DIGIT_SIZE);e.append("(392"),e.append(r),e.append(")");let s=this.getGeneralDecoder().decodeGeneralPurposeField(Cr.HEADER_SIZE+ir.GTIN_SIZE+Cr.LAST_DIGIT_SIZE,null);return e.append(s.getNewString()),e.toString()}}Cr.HEADER_SIZE=8,Cr.LAST_DIGIT_SIZE=2;class Dn extends ir{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Dn.HEADER_SIZE+ir.GTIN_SIZE)throw new X;let e=new Te;this.encodeCompressedGtin(e,Dn.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(Dn.HEADER_SIZE+ir.GTIN_SIZE,Dn.LAST_DIGIT_SIZE);e.append("(393"),e.append(r),e.append(")");let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Dn.HEADER_SIZE+ir.GTIN_SIZE+Dn.LAST_DIGIT_SIZE,Dn.FIRST_THREE_DIGITS_SIZE);s/100==0&&e.append("0"),s/10==0&&e.append("0"),e.append(s);let l=this.getGeneralDecoder().decodeGeneralPurposeField(Dn.HEADER_SIZE+ir.GTIN_SIZE+Dn.LAST_DIGIT_SIZE+Dn.FIRST_THREE_DIGITS_SIZE,null);return e.append(l.getNewString()),e.toString()}}Dn.HEADER_SIZE=8,Dn.LAST_DIGIT_SIZE=2,Dn.FIRST_THREE_DIGITS_SIZE=10;class Qt extends Qi{constructor(e,r,s){super(e),this.dateCode=s,this.firstAIdigits=r}parseInformation(){if(this.getInformation().getSize()!=Qt.HEADER_SIZE+Qt.GTIN_SIZE+Qt.WEIGHT_SIZE+Qt.DATE_SIZE)throw new X;let e=new Te;return this.encodeCompressedGtin(e,Qt.HEADER_SIZE),this.encodeCompressedWeight(e,Qt.HEADER_SIZE+Qt.GTIN_SIZE,Qt.WEIGHT_SIZE),this.encodeCompressedDate(e,Qt.HEADER_SIZE+Qt.GTIN_SIZE+Qt.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,r){let s=this.getGeneralDecoder().extractNumericValueFromBitArray(r,Qt.DATE_SIZE);if(s==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let l=s%32;s/=32;let c=s%12+1;s/=12;let d=s;d/10==0&&e.append("0"),e.append(d),c/10==0&&e.append("0"),e.append(c),l/10==0&&e.append("0"),e.append(l)}addWeightCode(e,r){e.append("("),e.append(this.firstAIdigits),e.append(r/1e5),e.append(")")}checkWeight(e){return e%1e5}}Qt.HEADER_SIZE=8,Qt.WEIGHT_SIZE=20,Qt.DATE_SIZE=16;function Ji(k){try{if(k.get(1))return new sr(k);if(!k.get(2))return new Wr(k);switch(hr.extractNumericValueFromBitArray(k,1,4)){case 4:return new Rs(k);case 5:return new ho(k)}switch(hr.extractNumericValueFromBitArray(k,1,5)){case 12:return new Cr(k);case 13:return new Dn(k)}switch(hr.extractNumericValueFromBitArray(k,1,7)){case 56:return new Qt(k,"310","11");case 57:return new Qt(k,"320","11");case 58:return new Qt(k,"310","13");case 59:return new Qt(k,"320","13");case 60:return new Qt(k,"310","15");case 61:return new Qt(k,"320","15");case 62:return new Qt(k,"310","17");case 63:return new Qt(k,"320","17")}}catch(e){throw console.log(e),new Ze("unknown decoder: "+k)}}class Ft{constructor(e,r,s,l){this.leftchar=e,this.rightchar=r,this.finderpattern=s,this.maybeLast=l}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,r){return e instanceof Ft?Ft.equalsOrNull(e.leftchar,r.leftchar)&&Ft.equalsOrNull(e.rightchar,r.rightchar)&&Ft.equalsOrNull(e.finderpattern,r.finderpattern):!1}static equalsOrNull(e,r){return e===null?r===null:Ft.equals(e,r)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class ks{constructor(e,r,s){this.pairs=e,this.rowNumber=r,this.wasReversed=s}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,r){return e instanceof ks?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1}checkEqualitity(e,r){if(!e||!r)return;let s;return e.forEach((l,c)=>{r.forEach(d=>{l.getLeftChar().getValue()===d.getLeftChar().getValue()&&l.getRightChar().getValue()===d.getRightChar().getValue()&&l.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(s=!0)})}),s}}class Ne extends Kt{constructor(e){super(...arguments),this.pairs=new Array(Ne.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,r,s){this.pairs.length=0,this.startFromEven=!1;try{return Ne.constructResult(this.decodeRow2pairs(e,r))}catch(l){this.verbose&&console.log(l)}return this.pairs.length=0,this.startFromEven=!0,Ne.constructResult(this.decodeRow2pairs(e,r))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,r){let s=!1;for(;!s;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,e))}catch(c){if(c instanceof X){if(!this.pairs.length)throw new X;s=!0}}if(this.checkChecksum())return this.pairs;let l;if(this.rows.length?l=!0:l=!1,this.storeRow(e,!1),l){let c=this.checkRowsBoolean(!1);if(c!=null||(c=this.checkRowsBoolean(!0),c!=null))return c}throw new X}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let r=null;try{r=this.checkRows(new Array,0)}catch(s){this.verbose&&console.log(s)}return e&&(this.rows=this.rows.reverse()),r}checkRows(e,r){for(let s=r;s<this.rows.length;s++){let l=this.rows[s];this.pairs.length=0;for(let d of e)this.pairs.push(d.getPairs());if(this.pairs.push(l.getPairs()),!Ne.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let c=new Array(e);c.push(l);try{return this.checkRows(c,s+1)}catch(d){this.verbose&&console.log(d)}}throw new X}static isValidSequence(e){for(let r of Ne.FINDER_PATTERN_SEQUENCES){if(e.length>r.length)continue;let s=!0;for(let l=0;l<e.length;l++)if(e[l].getFinderPattern().getValue()!=r[l]){s=!1;break}if(s)return!0}return!1}storeRow(e,r){let s=0,l=!1,c=!1;for(;s<this.rows.length;){let d=this.rows[s];if(d.getRowNumber()>e){c=d.isEquivalent(this.pairs);break}l=d.isEquivalent(this.pairs),s++}c||l||Ne.isPartialRow(this.pairs,this.rows)||(this.rows.push(s,new ks(this.pairs,e,r)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,r){for(let s of r)if(s.getPairs().length!==e.length){for(let l of s.getPairs())for(let c of e)if(Ft.equals(l,c))break}}static isPartialRow(e,r){for(let s of r){let l=!0;for(let c of e){let d=!1;for(let p of s.getPairs())if(c.equals(p)){d=!0;break}if(!d){l=!1;break}}if(l)return!0}return!1}getRows(){return this.rows}static constructResult(e){let r=$n.buildBitArray(e),l=Ji(r).parseInformation(),c=e[0].getFinderPattern().getResultPoints(),d=e[e.length-1].getFinderPattern().getResultPoints(),p=[c[0],c[1],d[0],d[1]];return new ve(l,null,null,p,$.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),r=e.getLeftChar(),s=e.getRightChar();if(s==null)return!1;let l=s.getChecksumPortion(),c=2;for(let p=1;p<this.pairs.size();++p){let y=this.pairs.get(p);l+=y.getLeftChar().getChecksumPortion(),c++;let E=y.getRightChar();E!=null&&(l+=E.getChecksumPortion(),c++)}return l%=211,211*(c-4)+l==r.getValue()}static getNextSecondBar(e,r){let s;return e.get(r)?(s=e.getNextUnset(r),s=e.getNextSet(s)):(s=e.getNextSet(r),s=e.getNextUnset(s)),s}retrieveNextPair(e,r,s){let l=r.length%2==0;this.startFromEven&&(l=!l);let c,d=!0,p=-1;do this.findNextPair(e,r,p),c=this.parseFoundFinderPattern(e,s,l),c==null?p=Ne.getNextSecondBar(e,this.startEnd[0]):d=!1;while(d);let y=this.decodeDataCharacter(e,c,l,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new X;let E;try{E=this.decodeDataCharacter(e,c,l,!1)}catch(R){E=null,this.verbose&&console.log(R)}return new Ft(y,E,c,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,r,s){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),d;s>=0?d=s:this.isEmptyPair(r)?d=0:d=r[r.length-1].getFinderPattern().getStartEnd()[1];let p=r.length%2!=0;this.startFromEven&&(p=!p);let y=!1;for(;d<c&&(y=!e.get(d),!!y);)d++;let E=0,R=d;for(let P=d;P<c;P++)if(e.get(P)!=y)l[E]++;else{if(E==3){if(p&&Ne.reverseCounters(l),Ne.isFinderPattern(l)){this.startEnd[0]=R,this.startEnd[1]=P;return}p&&Ne.reverseCounters(l),R+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,E--}else E++;l[E]=1,y=!y}throw new X}static reverseCounters(e){let r=e.length;for(let s=0;s<r/2;++s){let l=e[s];e[s]=e[r-s-1],e[r-s-1]=l}}parseFoundFinderPattern(e,r,s){let l,c,d;if(s){let E=this.startEnd[0]-1;for(;E>=0&&!e.get(E);)E--;E++,l=this.startEnd[0]-E,c=E,d=this.startEnd[1]}else c=this.startEnd[0],d=e.getNextUnset(this.startEnd[1]+1),l=d-this.startEnd[1];let p=this.getDecodeFinderCounters();B.arraycopy(p,0,p,1,p.length-1),p[0]=l;let y;try{y=this.parseFinderValue(p,Ne.FINDER_PATTERNS)}catch{return null}return new fr(y,[c,d],c,d,r)}decodeDataCharacter(e,r,s,l){let c=this.getDataCharacterCounters();for(let $t=0;$t<c.length;$t++)c[$t]=0;if(l)Ne.recordPatternInReverse(e,r.getStartEnd()[0],c);else{Ne.recordPattern(e,r.getStartEnd()[1],c);for(let $t=0,pn=c.length-1;$t<pn;$t++,pn--){let ar=c[$t];c[$t]=c[pn],c[pn]=ar}}let d=17,p=et.sum(new Int32Array(c))/d,y=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(p-y)/y>.3)throw new X;let E=this.getOddCounts(),R=this.getEvenCounts(),P=this.getOddRoundingErrors(),D=this.getEvenRoundingErrors();for(let $t=0;$t<c.length;$t++){let pn=1*c[$t]/p,ar=pn+.5;if(ar<1){if(pn<.3)throw new X;ar=1}else if(ar>8){if(pn>8.7)throw new X;ar=8}let ji=$t/2;$t&1?(R[ji]=ar,D[ji]=pn-ar):(E[ji]=ar,P[ji]=pn-ar)}this.adjustOddEvenCounts(d);let z=4*r.getValue()+(s?0:2)+(l?0:1)-1,K=0,ee=0;for(let $t=E.length-1;$t>=0;$t--){if(Ne.isNotA1left(r,s,l)){let pn=Ne.WEIGHTS[z][2*$t];ee+=E[$t]*pn}K+=E[$t]}let se=0;for(let $t=R.length-1;$t>=0;$t--)if(Ne.isNotA1left(r,s,l)){let pn=Ne.WEIGHTS[z][2*$t+1];se+=R[$t]*pn}let fe=ee+se;if(K&1||K>13||K<4)throw new X;let Be=(13-K)/2,Fe=Ne.SYMBOL_WIDEST[Be],Pe=9-Fe,Pt=Vn.getRSSvalue(E,Fe,!0),St=Vn.getRSSvalue(R,Pe,!1),pr=Ne.EVEN_TOTAL_SUBSET[Be],Xr=Ne.GSUM[Be],kn=Pt*pr+St+Xr;return new zr(kn,fe)}static isNotA1left(e,r,s){return!(e.getValue()==0&&r&&s)}adjustOddEvenCounts(e){let r=et.sum(new Int32Array(this.getOddCounts())),s=et.sum(new Int32Array(this.getEvenCounts())),l=!1,c=!1;r>13?c=!0:r<4&&(l=!0);let d=!1,p=!1;s>13?p=!0:s<4&&(d=!0);let y=r+s-e,E=(r&1)==1,R=(s&1)==0;if(y==1)if(E){if(R)throw new X;c=!0}else{if(!R)throw new X;p=!0}else if(y==-1)if(E){if(R)throw new X;l=!0}else{if(!R)throw new X;d=!0}else if(y==0){if(E){if(!R)throw new X;r<s?(l=!0,p=!0):(c=!0,d=!0)}else if(R)throw new X}else throw new X;if(l){if(c)throw new X;Ne.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&Ne.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(p)throw new X;Ne.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&Ne.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ne.SYMBOL_WIDEST=[7,5,4,3,1],Ne.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ne.GSUM=[0,348,1388,2948,3988],Ne.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ne.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ne.FINDER_PAT_A=0,Ne.FINDER_PAT_B=1,Ne.FINDER_PAT_C=2,Ne.FINDER_PAT_D=3,Ne.FINDER_PAT_E=4,Ne.FINDER_PAT_F=5,Ne.FINDER_PATTERN_SEQUENCES=[[Ne.FINDER_PAT_A,Ne.FINDER_PAT_A],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_B,Ne.FINDER_PAT_B],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_C,Ne.FINDER_PAT_B,Ne.FINDER_PAT_D],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_E,Ne.FINDER_PAT_B,Ne.FINDER_PAT_D,Ne.FINDER_PAT_C],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_E,Ne.FINDER_PAT_B,Ne.FINDER_PAT_D,Ne.FINDER_PAT_D,Ne.FINDER_PAT_F],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_E,Ne.FINDER_PAT_B,Ne.FINDER_PAT_D,Ne.FINDER_PAT_E,Ne.FINDER_PAT_F,Ne.FINDER_PAT_F],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_A,Ne.FINDER_PAT_B,Ne.FINDER_PAT_B,Ne.FINDER_PAT_C,Ne.FINDER_PAT_C,Ne.FINDER_PAT_D,Ne.FINDER_PAT_D],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_A,Ne.FINDER_PAT_B,Ne.FINDER_PAT_B,Ne.FINDER_PAT_C,Ne.FINDER_PAT_C,Ne.FINDER_PAT_D,Ne.FINDER_PAT_E,Ne.FINDER_PAT_E],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_A,Ne.FINDER_PAT_B,Ne.FINDER_PAT_B,Ne.FINDER_PAT_C,Ne.FINDER_PAT_C,Ne.FINDER_PAT_D,Ne.FINDER_PAT_E,Ne.FINDER_PAT_F,Ne.FINDER_PAT_F],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_A,Ne.FINDER_PAT_B,Ne.FINDER_PAT_B,Ne.FINDER_PAT_C,Ne.FINDER_PAT_D,Ne.FINDER_PAT_D,Ne.FINDER_PAT_E,Ne.FINDER_PAT_E,Ne.FINDER_PAT_F,Ne.FINDER_PAT_F]],Ne.MAX_PAIRS=11;class mo extends zr{constructor(e,r,s){super(e,r),this.count=0,this.finderPattern=s}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Yt extends Kt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,r,s){const l=this.decodePair(r,!1,e,s);Yt.addOrTally(this.possibleLeftPairs,l),r.reverse();let c=this.decodePair(r,!0,e,s);Yt.addOrTally(this.possibleRightPairs,c),r.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&Yt.checkChecksum(d,p))return Yt.constructResult(d,p)}throw new X}static addOrTally(e,r){if(r==null)return;let s=!1;for(let l of e)if(l.getValue()===r.getValue()){l.incrementCount(),s=!0;break}s||e.push(r)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,r){let s=4537077*e.getValue()+r.getValue(),l=new String(s).toString(),c=new Te;for(let E=13-l.length;E>0;E--)c.append("0");c.append(l);let d=0;for(let E=0;E<13;E++){let R=c.charAt(E).charCodeAt(0)-48;d+=E&1?R:3*R}d=10-d%10,d===10&&(d=0),c.append(d.toString());let p=e.getFinderPattern().getResultPoints(),y=r.getFinderPattern().getResultPoints();return new ve(c.toString(),null,0,[p[0],p[1],y[0],y[1]],$.RSS_14,new Date().getTime())}static checkChecksum(e,r){let s=(e.getChecksumPortion()+16*r.getChecksumPortion())%79,l=9*e.getFinderPattern().getValue()+r.getFinderPattern().getValue();return l>72&&l--,l>8&&l--,s===l}decodePair(e,r,s,l){try{let c=this.findFinderPattern(e,r),d=this.parseFoundFinderPattern(e,s,r,c),p=l==null?null:l.get(ne.NEED_RESULT_POINT_CALLBACK);if(p!=null){let R=(c[0]+c[1])/2;r&&(R=e.getSize()-1-R),p.foundPossibleResultPoint(new ze(R,s))}let y=this.decodeDataCharacter(e,d,!0),E=this.decodeDataCharacter(e,d,!1);return new mo(1597*y.getValue()+E.getValue(),y.getChecksumPortion()+4*E.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(e,r,s){let l=this.getDataCharacterCounters();for(let se=0;se<l.length;se++)l[se]=0;if(s)Ie.recordPatternInReverse(e,r.getStartEnd()[0],l);else{Ie.recordPattern(e,r.getStartEnd()[1]+1,l);for(let se=0,fe=l.length-1;se<fe;se++,fe--){let Be=l[se];l[se]=l[fe],l[fe]=Be}}let c=s?16:15,d=et.sum(new Int32Array(l))/c,p=this.getOddCounts(),y=this.getEvenCounts(),E=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let se=0;se<l.length;se++){let fe=l[se]/d,Be=Math.floor(fe+.5);Be<1?Be=1:Be>8&&(Be=8);let Fe=Math.floor(se/2);se&1?(y[Fe]=Be,R[Fe]=fe-Be):(p[Fe]=Be,E[Fe]=fe-Be)}this.adjustOddEvenCounts(s,c);let P=0,D=0;for(let se=p.length-1;se>=0;se--)D*=9,D+=p[se],P+=p[se];let z=0,K=0;for(let se=y.length-1;se>=0;se--)z*=9,z+=y[se],K+=y[se];let ee=D+3*z;if(s){if(P&1||P>12||P<4)throw new X;let se=(12-P)/2,fe=Yt.OUTSIDE_ODD_WIDEST[se],Be=9-fe,Fe=Vn.getRSSvalue(p,fe,!1),Pe=Vn.getRSSvalue(y,Be,!0),Pt=Yt.OUTSIDE_EVEN_TOTAL_SUBSET[se],St=Yt.OUTSIDE_GSUM[se];return new zr(Fe*Pt+Pe+St,ee)}else{if(K&1||K>10||K<4)throw new X;let se=(10-K)/2,fe=Yt.INSIDE_ODD_WIDEST[se],Be=9-fe,Fe=Vn.getRSSvalue(p,fe,!0),Pe=Vn.getRSSvalue(y,Be,!1),Pt=Yt.INSIDE_ODD_TOTAL_SUBSET[se],St=Yt.INSIDE_GSUM[se];return new zr(Pe*Pt+Fe+St,ee)}}findFinderPattern(e,r){let s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;let l=e.getSize(),c=!1,d=0;for(;d<l&&(c=!e.get(d),r!==c);)d++;let p=0,y=d;for(let E=d;E<l;E++)if(e.get(E)!==c)s[p]++;else{if(p===3){if(Kt.isFinderPattern(s))return[y,E];y+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,p--}else p++;s[p]=1,c=!c}throw new X}parseFoundFinderPattern(e,r,s,l){let c=e.get(l[0]),d=l[0]-1;for(;d>=0&&c!==e.get(d);)d--;d++;const p=l[0]-d,y=this.getDecodeFinderCounters(),E=new Int32Array(y.length);B.arraycopy(y,0,E,1,y.length-1),E[0]=p;const R=this.parseFinderValue(E,Yt.FINDER_PATTERNS);let P=d,D=l[1];return s&&(P=e.getSize()-1-P,D=e.getSize()-1-D),new fr(R,[d,l[1]],P,D,r)}adjustOddEvenCounts(e,r){let s=et.sum(new Int32Array(this.getOddCounts())),l=et.sum(new Int32Array(this.getEvenCounts())),c=!1,d=!1,p=!1,y=!1;e?(s>12?d=!0:s<4&&(c=!0),l>12?y=!0:l<4&&(p=!0)):(s>11?d=!0:s<5&&(c=!0),l>10?y=!0:l<4&&(p=!0));let E=s+l-r,R=(s&1)===(e?1:0),P=(l&1)===1;if(E===1)if(R){if(P)throw new X;d=!0}else{if(!P)throw new X;y=!0}else if(E===-1)if(R){if(P)throw new X;c=!0}else{if(!P)throw new X;p=!0}else if(E===0){if(R){if(!P)throw new X;s<l?(c=!0,y=!0):(d=!0,p=!0)}else if(P)throw new X}else throw new X;if(c){if(d)throw new X;Kt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&Kt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(y)throw new X;Kt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&Kt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Yt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Yt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Yt.OUTSIDE_GSUM=[0,161,961,2015,2715],Yt.INSIDE_GSUM=[0,336,1036,1516],Yt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Yt.INSIDE_ODD_WIDEST=[2,4,6,8],Yt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Kr extends Ie{constructor(e,r){super(),this.readers=[],this.verbose=r===!0;const s=e?e.get(ne.POSSIBLE_FORMATS):null,l=e&&e.get(ne.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;s?((s.includes($.EAN_13)||s.includes($.UPC_A)||s.includes($.EAN_8)||s.includes($.UPC_E))&&this.readers.push(new vi(e)),s.includes($.CODE_39)&&this.readers.push(new ct(l)),s.includes($.CODE_128)&&this.readers.push(new le),s.includes($.ITF)&&this.readers.push(new je),s.includes($.RSS_14)&&this.readers.push(new Yt),s.includes($.RSS_EXPANDED)&&this.readers.push(new Ne(this.verbose))):(this.readers.push(new vi(e)),this.readers.push(new ct),this.readers.push(new vi(e)),this.readers.push(new le),this.readers.push(new je),this.readers.push(new Yt),this.readers.push(new Ne(this.verbose)))}decodeRow(e,r,s){for(let l=0;l<this.readers.length;l++)try{return this.readers[l].decodeRow(e,r,s)}catch{}throw new X}reset(){this.readers.forEach(e=>e.reset())}}class es extends Ce{constructor(e=500,r){super(new Kr(r),e,r)}}class Mt{constructor(e,r,s){this.ecCodewords=e,this.ecBlocks=[r],s&&this.ecBlocks.push(s)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class At{constructor(e,r){this.count=e,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class kt{constructor(e,r,s,l,c,d){this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=s,this.dataRegionSizeRows=l,this.dataRegionSizeColumns=c,this.ecBlocks=d;let p=0;const y=d.getECCodewords(),E=d.getECBlocks();for(let R of E)p+=R.getCount()*(R.getDataCodewords()+y);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,r){if(e&1||r&1)throw new q;for(let s of kt.VERSIONS)if(s.symbolSizeRows===e&&s.symbolSizeColumns===r)return s;throw new q}toString(){return""+this.versionNumber}static buildVersions(){return[new kt(1,10,10,8,8,new Mt(5,new At(1,3))),new kt(2,12,12,10,10,new Mt(7,new At(1,5))),new kt(3,14,14,12,12,new Mt(10,new At(1,8))),new kt(4,16,16,14,14,new Mt(12,new At(1,12))),new kt(5,18,18,16,16,new Mt(14,new At(1,18))),new kt(6,20,20,18,18,new Mt(18,new At(1,22))),new kt(7,22,22,20,20,new Mt(20,new At(1,30))),new kt(8,24,24,22,22,new Mt(24,new At(1,36))),new kt(9,26,26,24,24,new Mt(28,new At(1,44))),new kt(10,32,32,14,14,new Mt(36,new At(1,62))),new kt(11,36,36,16,16,new Mt(42,new At(1,86))),new kt(12,40,40,18,18,new Mt(48,new At(1,114))),new kt(13,44,44,20,20,new Mt(56,new At(1,144))),new kt(14,48,48,22,22,new Mt(68,new At(1,174))),new kt(15,52,52,24,24,new Mt(42,new At(2,102))),new kt(16,64,64,14,14,new Mt(56,new At(2,140))),new kt(17,72,72,16,16,new Mt(36,new At(4,92))),new kt(18,80,80,18,18,new Mt(48,new At(4,114))),new kt(19,88,88,20,20,new Mt(56,new At(4,144))),new kt(20,96,96,22,22,new Mt(68,new At(4,174))),new kt(21,104,104,24,24,new Mt(56,new At(6,136))),new kt(22,120,120,18,18,new Mt(68,new At(6,175))),new kt(23,132,132,20,20,new Mt(62,new At(8,163))),new kt(24,144,144,22,22,new Mt(62,new At(8,156),new At(2,155))),new kt(25,8,18,6,16,new Mt(7,new At(1,5))),new kt(26,8,32,6,14,new Mt(11,new At(1,10))),new kt(27,12,26,10,24,new Mt(14,new At(1,16))),new kt(28,12,36,10,16,new Mt(18,new At(1,22))),new kt(29,16,36,14,16,new Mt(24,new At(1,32))),new kt(30,16,48,14,22,new Mt(28,new At(1,49)))]}}kt.VERSIONS=kt.buildVersions();class Ln{constructor(e){const r=e.getHeight();if(r<8||r>144||r&1)throw new q;this.version=Ln.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new be(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const r=e.getHeight(),s=e.getWidth();return kt.getVersionForDimensions(r,s)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let r=0,s=4,l=0;const c=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth();let p=!1,y=!1,E=!1,R=!1;do if(s===c&&l===0&&!p)e[r++]=this.readCorner1(c,d)&255,s-=2,l+=2,p=!0;else if(s===c-2&&l===0&&d&3&&!y)e[r++]=this.readCorner2(c,d)&255,s-=2,l+=2,y=!0;else if(s===c+4&&l===2&&!(d&7)&&!E)e[r++]=this.readCorner3(c,d)&255,s-=2,l+=2,E=!0;else if(s===c-2&&l===0&&(d&7)===4&&!R)e[r++]=this.readCorner4(c,d)&255,s-=2,l+=2,R=!0;else{do s<c&&l>=0&&!this.readMappingMatrix.get(l,s)&&(e[r++]=this.readUtah(s,l,c,d)&255),s-=2,l+=2;while(s>=0&&l<d);s+=1,l+=3;do s>=0&&l<d&&!this.readMappingMatrix.get(l,s)&&(e[r++]=this.readUtah(s,l,c,d)&255),s+=2,l-=2;while(s<c&&l>=0);s+=3,l+=1}while(s<c||l<d);if(r!==this.version.getTotalCodewords())throw new q;return e}readModule(e,r,s,l){return e<0&&(e+=s,r+=4-(s+4&7)),r<0&&(r+=l,e+=4-(l+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)}readUtah(e,r,s,l){let c=0;return this.readModule(e-2,r-2,s,l)&&(c|=1),c<<=1,this.readModule(e-2,r-1,s,l)&&(c|=1),c<<=1,this.readModule(e-1,r-2,s,l)&&(c|=1),c<<=1,this.readModule(e-1,r-1,s,l)&&(c|=1),c<<=1,this.readModule(e-1,r,s,l)&&(c|=1),c<<=1,this.readModule(e,r-2,s,l)&&(c|=1),c<<=1,this.readModule(e,r-1,s,l)&&(c|=1),c<<=1,this.readModule(e,r,s,l)&&(c|=1),c}readCorner1(e,r){let s=0;return this.readModule(e-1,0,e,r)&&(s|=1),s<<=1,this.readModule(e-1,1,e,r)&&(s|=1),s<<=1,this.readModule(e-1,2,e,r)&&(s|=1),s<<=1,this.readModule(0,r-2,e,r)&&(s|=1),s<<=1,this.readModule(0,r-1,e,r)&&(s|=1),s<<=1,this.readModule(1,r-1,e,r)&&(s|=1),s<<=1,this.readModule(2,r-1,e,r)&&(s|=1),s<<=1,this.readModule(3,r-1,e,r)&&(s|=1),s}readCorner2(e,r){let s=0;return this.readModule(e-3,0,e,r)&&(s|=1),s<<=1,this.readModule(e-2,0,e,r)&&(s|=1),s<<=1,this.readModule(e-1,0,e,r)&&(s|=1),s<<=1,this.readModule(0,r-4,e,r)&&(s|=1),s<<=1,this.readModule(0,r-3,e,r)&&(s|=1),s<<=1,this.readModule(0,r-2,e,r)&&(s|=1),s<<=1,this.readModule(0,r-1,e,r)&&(s|=1),s<<=1,this.readModule(1,r-1,e,r)&&(s|=1),s}readCorner3(e,r){let s=0;return this.readModule(e-1,0,e,r)&&(s|=1),s<<=1,this.readModule(e-1,r-1,e,r)&&(s|=1),s<<=1,this.readModule(0,r-3,e,r)&&(s|=1),s<<=1,this.readModule(0,r-2,e,r)&&(s|=1),s<<=1,this.readModule(0,r-1,e,r)&&(s|=1),s<<=1,this.readModule(1,r-3,e,r)&&(s|=1),s<<=1,this.readModule(1,r-2,e,r)&&(s|=1),s<<=1,this.readModule(1,r-1,e,r)&&(s|=1),s}readCorner4(e,r){let s=0;return this.readModule(e-3,0,e,r)&&(s|=1),s<<=1,this.readModule(e-2,0,e,r)&&(s|=1),s<<=1,this.readModule(e-1,0,e,r)&&(s|=1),s<<=1,this.readModule(0,r-2,e,r)&&(s|=1),s<<=1,this.readModule(0,r-1,e,r)&&(s|=1),s<<=1,this.readModule(1,r-1,e,r)&&(s|=1),s<<=1,this.readModule(2,r-1,e,r)&&(s|=1),s<<=1,this.readModule(3,r-1,e,r)&&(s|=1),s}extractDataRegion(e){const r=this.version.getSymbolSizeRows(),s=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new T("Dimension of bitMatrix must match the version size");const l=this.version.getDataRegionSizeRows(),c=this.version.getDataRegionSizeColumns(),d=r/l|0,p=s/c|0,y=d*l,E=p*c,R=new be(E,y);for(let P=0;P<d;++P){const D=P*l;for(let z=0;z<p;++z){const K=z*c;for(let ee=0;ee<l;++ee){const se=P*(l+2)+1+ee,fe=D+ee;for(let Be=0;Be<c;++Be){const Fe=z*(c+2)+1+Be;if(e.get(Fe,se)){const Pe=K+Be;R.set(Pe,fe)}}}}}return R}}class Ps{constructor(e,r){this.numDataCodewords=e,this.codewords=r}static getDataBlocks(e,r){const s=r.getECBlocks();let l=0;const c=s.getECBlocks();for(let ee of c)l+=ee.getCount();const d=new Array(l);let p=0;for(let ee of c)for(let se=0;se<ee.getCount();se++){const fe=ee.getDataCodewords(),Be=s.getECCodewords()+fe;d[p++]=new Ps(fe,new Uint8Array(Be))}const E=d[0].codewords.length-s.getECCodewords(),R=E-1;let P=0;for(let ee=0;ee<R;ee++)for(let se=0;se<p;se++)d[se].codewords[ee]=e[P++];const D=r.getVersionNumber()===24,z=D?8:p;for(let ee=0;ee<z;ee++)d[ee].codewords[E-1]=e[P++];const K=d[0].codewords.length;for(let ee=E;ee<K;ee++)for(let se=0;se<p;se++){const fe=D?(se+8)%p:se,Be=D&&fe>7?ee-1:ee;d[fe].codewords[Be]=e[P++]}if(P!==e.length)throw new T;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ts{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new T(""+e);let r=0,s=this.bitOffset,l=this.byteOffset;const c=this.bytes;if(s>0){const d=8-s,p=e<d?e:d,y=d-p,E=255>>8-p<<y;r=(c[l]&E)>>y,e-=p,s+=p,s===8&&(s=0,l++)}if(e>0){for(;e>=8;)r=r<<8|c[l]&255,l++,e-=8;if(e>0){const d=8-e,p=255>>d<<d;r=r<<e|(c[l]&p)>>d,s+=e}}return this.bitOffset=s,this.byteOffset=l,r}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var mn;(function(k){k[k.PAD_ENCODE=0]="PAD_ENCODE",k[k.ASCII_ENCODE=1]="ASCII_ENCODE",k[k.C40_ENCODE=2]="C40_ENCODE",k[k.TEXT_ENCODE=3]="TEXT_ENCODE",k[k.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",k[k.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",k[k.BASE256_ENCODE=6]="BASE256_ENCODE"})(mn||(mn={}));class br{static decode(e){const r=new ts(e),s=new Te,l=new Te,c=new Array;let d=mn.ASCII_ENCODE;do if(d===mn.ASCII_ENCODE)d=this.decodeAsciiSegment(r,s,l);else{switch(d){case mn.C40_ENCODE:this.decodeC40Segment(r,s);break;case mn.TEXT_ENCODE:this.decodeTextSegment(r,s);break;case mn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,s);break;case mn.EDIFACT_ENCODE:this.decodeEdifactSegment(r,s);break;case mn.BASE256_ENCODE:this.decodeBase256Segment(r,s,c);break;default:throw new q}d=mn.ASCII_ENCODE}while(d!==mn.PAD_ENCODE&&r.available()>0);return l.length()>0&&s.append(l.toString()),new Ae(e,s.toString(),c.length===0?null:c,null)}static decodeAsciiSegment(e,r,s){let l=!1;do{let c=e.readBits(8);if(c===0)throw new q;if(c<=128)return l&&(c+=128),r.append(String.fromCharCode(c-1)),mn.ASCII_ENCODE;if(c===129)return mn.PAD_ENCODE;if(c<=229){const d=c-130;d<10&&r.append("0"),r.append(""+d)}else switch(c){case 230:return mn.C40_ENCODE;case 231:return mn.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:l=!0;break;case 236:r.append("[)>05"),s.insert(0,"");break;case 237:r.append("[)>06"),s.insert(0,"");break;case 238:return mn.ANSIX12_ENCODE;case 239:return mn.TEXT_ENCODE;case 240:return mn.EDIFACT_ENCODE;case 241:break;default:if(c!==254||e.available()!==0)throw new q;break}}while(e.available()>0);return mn.ASCII_ENCODE}static decodeC40Segment(e,r){let s=!1;const l=[];let c=0;do{if(e.available()===8)return;const d=e.readBits(8);if(d===254)return;this.parseTwoBytes(d,e.readBits(8),l);for(let p=0;p<3;p++){const y=l[p];switch(c){case 0:if(y<3)c=y+1;else if(y<this.C40_BASIC_SET_CHARS.length){const E=this.C40_BASIC_SET_CHARS[y];s?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),s=!1):r.append(E)}else throw new q;break;case 1:s?(r.append(String.fromCharCode(y+128)),s=!1):r.append(String.fromCharCode(y)),c=0;break;case 2:if(y<this.C40_SHIFT2_SET_CHARS.length){const E=this.C40_SHIFT2_SET_CHARS[y];s?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),s=!1):r.append(E)}else switch(y){case 27:r.append("");break;case 30:s=!0;break;default:throw new q}c=0;break;case 3:s?(r.append(String.fromCharCode(y+224)),s=!1):r.append(String.fromCharCode(y+96)),c=0;break;default:throw new q}}}while(e.available()>0)}static decodeTextSegment(e,r){let s=!1,l=[],c=0;do{if(e.available()===8)return;const d=e.readBits(8);if(d===254)return;this.parseTwoBytes(d,e.readBits(8),l);for(let p=0;p<3;p++){const y=l[p];switch(c){case 0:if(y<3)c=y+1;else if(y<this.TEXT_BASIC_SET_CHARS.length){const E=this.TEXT_BASIC_SET_CHARS[y];s?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),s=!1):r.append(E)}else throw new q;break;case 1:s?(r.append(String.fromCharCode(y+128)),s=!1):r.append(String.fromCharCode(y)),c=0;break;case 2:if(y<this.TEXT_SHIFT2_SET_CHARS.length){const E=this.TEXT_SHIFT2_SET_CHARS[y];s?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),s=!1):r.append(E)}else switch(y){case 27:r.append("");break;case 30:s=!0;break;default:throw new q}c=0;break;case 3:if(y<this.TEXT_SHIFT3_SET_CHARS.length){const E=this.TEXT_SHIFT3_SET_CHARS[y];s?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),s=!1):r.append(E),c=0}else throw new q;break;default:throw new q}}}while(e.available()>0)}static decodeAnsiX12Segment(e,r){const s=[];do{if(e.available()===8)return;const l=e.readBits(8);if(l===254)return;this.parseTwoBytes(l,e.readBits(8),s);for(let c=0;c<3;c++){const d=s[c];switch(d){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(d<14)r.append(String.fromCharCode(d+44));else if(d<40)r.append(String.fromCharCode(d+51));else throw new q;break}}}while(e.available()>0)}static parseTwoBytes(e,r,s){let l=(e<<8)+r-1,c=Math.floor(l/1600);s[0]=c,l-=c*1600,c=Math.floor(l/40),s[1]=c,s[2]=l-c*40}static decodeEdifactSegment(e,r){do{if(e.available()<=16)return;for(let s=0;s<4;s++){let l=e.readBits(6);if(l===31){const c=8-e.getBitOffset();c!==8&&e.readBits(c);return}l&32||(l|=64),r.append(String.fromCharCode(l))}}while(e.available()>0)}static decodeBase256Segment(e,r,s){let l=1+e.getByteOffset();const c=this.unrandomize255State(e.readBits(8),l++);let d;if(c===0?d=e.available()/8|0:c<250?d=c:d=250*(c-249)+this.unrandomize255State(e.readBits(8),l++),d<0)throw new q;const p=new Uint8Array(d);for(let y=0;y<d;y++){if(e.available()<8)throw new q;p[y]=this.unrandomize255State(e.readBits(8),l++)}s.push(p);try{r.append(Oe.decode(p,Se.ISO88591))}catch(y){throw new Ze("Platform does not support required encoding: "+y.message)}}static unrandomize255State(e,r){const s=149*r%255+1,l=e-s;return l>=0?l:l+256}}br.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],br.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],br.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],br.TEXT_SHIFT2_SET_CHARS=br.C40_SHIFT2_SET_CHARS,br.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class ns{constructor(){this.rsDecoder=new Tt(pe.DATA_MATRIX_FIELD_256)}decode(e){const r=new Ln(e),s=r.getVersion(),l=r.readCodewords(),c=Ps.getDataBlocks(l,s);let d=0;for(let E of c)d+=E.getNumDataCodewords();const p=new Uint8Array(d),y=c.length;for(let E=0;E<y;E++){const R=c[E],P=R.getCodewords(),D=R.getNumDataCodewords();this.correctErrors(P,D);for(let z=0;z<D;z++)p[z*y+E]=P[z]}return br.decode(p)}correctErrors(e,r){const s=new Int32Array(e);try{this.rsDecoder.decode(s,e.length-r)}catch{throw new O}for(let l=0;l<r;l++)e[l]=s[l]}}class Zt{constructor(e){this.image=e,this.rectangleDetector=new Xe(this.image)}detect(){const e=this.rectangleDetector.detect();let r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new X;r=this.shiftToModuleCenter(r);const s=r[0],l=r[1],c=r[2],d=r[3];let p=this.transitionsBetween(s,d)+1,y=this.transitionsBetween(c,d)+1;(p&1)===1&&(p+=1),(y&1)===1&&(y+=1),4*p<7*y&&4*y<7*p&&(p=y=Math.max(p,y));let E=Zt.sampleGrid(this.image,s,l,c,d,p,y);return new vn(E,[s,l,c,d])}static shiftPoint(e,r,s){let l=(r.getX()-e.getX())/(s+1),c=(r.getY()-e.getY())/(s+1);return new ze(e.getX()+l,e.getY()+c)}static moveAway(e,r,s){let l=e.getX(),c=e.getY();return l<r?l-=1:l+=1,c<s?c-=1:c+=1,new ze(l,c)}detectSolid1(e){let r=e[0],s=e[1],l=e[3],c=e[2],d=this.transitionsBetween(r,s),p=this.transitionsBetween(s,l),y=this.transitionsBetween(l,c),E=this.transitionsBetween(c,r),R=d,P=[c,r,s,l];return R>p&&(R=p,P[0]=r,P[1]=s,P[2]=l,P[3]=c),R>y&&(R=y,P[0]=s,P[1]=l,P[2]=c,P[3]=r),R>E&&(P[0]=l,P[1]=c,P[2]=r,P[3]=s),P}detectSolid2(e){let r=e[0],s=e[1],l=e[2],c=e[3],d=this.transitionsBetween(r,c),p=Zt.shiftPoint(s,l,(d+1)*4),y=Zt.shiftPoint(l,s,(d+1)*4),E=this.transitionsBetween(p,r),R=this.transitionsBetween(y,c);return E<R?(e[0]=r,e[1]=s,e[2]=l,e[3]=c):(e[0]=s,e[1]=l,e[2]=c,e[3]=r),e}correctTopRight(e){let r=e[0],s=e[1],l=e[2],c=e[3],d=this.transitionsBetween(r,c),p=this.transitionsBetween(s,c),y=Zt.shiftPoint(r,s,(p+1)*4),E=Zt.shiftPoint(l,s,(d+1)*4);d=this.transitionsBetween(y,c),p=this.transitionsBetween(E,c);let R=new ze(c.getX()+(l.getX()-s.getX())/(d+1),c.getY()+(l.getY()-s.getY())/(d+1)),P=new ze(c.getX()+(r.getX()-s.getX())/(p+1),c.getY()+(r.getY()-s.getY())/(p+1));if(!this.isValid(R))return this.isValid(P)?P:null;if(!this.isValid(P))return R;let D=this.transitionsBetween(y,R)+this.transitionsBetween(E,R),z=this.transitionsBetween(y,P)+this.transitionsBetween(E,P);return D>z?R:P}shiftToModuleCenter(e){let r=e[0],s=e[1],l=e[2],c=e[3],d=this.transitionsBetween(r,c)+1,p=this.transitionsBetween(l,c)+1,y=Zt.shiftPoint(r,s,p*4),E=Zt.shiftPoint(l,s,d*4);d=this.transitionsBetween(y,c)+1,p=this.transitionsBetween(E,c)+1,(d&1)===1&&(d+=1),(p&1)===1&&(p+=1);let R=(r.getX()+s.getX()+l.getX()+c.getX())/4,P=(r.getY()+s.getY()+l.getY()+c.getY())/4;r=Zt.moveAway(r,R,P),s=Zt.moveAway(s,R,P),l=Zt.moveAway(l,R,P),c=Zt.moveAway(c,R,P);let D,z;return y=Zt.shiftPoint(r,s,p*4),y=Zt.shiftPoint(y,c,d*4),D=Zt.shiftPoint(s,r,p*4),D=Zt.shiftPoint(D,l,d*4),E=Zt.shiftPoint(l,c,p*4),E=Zt.shiftPoint(E,s,d*4),z=Zt.shiftPoint(c,l,p*4),z=Zt.shiftPoint(z,r,d*4),[y,D,E,z]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,r,s,l,c,d,p){return tt.getInstance().sampleGrid(e,d,p,.5,.5,d-.5,.5,d-.5,p-.5,.5,p-.5,r.getX(),r.getY(),c.getX(),c.getY(),l.getX(),l.getY(),s.getX(),s.getY())}transitionsBetween(e,r){let s=Math.trunc(e.getX()),l=Math.trunc(e.getY()),c=Math.trunc(r.getX()),d=Math.trunc(r.getY()),p=Math.abs(d-l)>Math.abs(c-s);if(p){let ee=s;s=l,l=ee,ee=c,c=d,d=ee}let y=Math.abs(c-s),E=Math.abs(d-l),R=-y/2,P=l<d?1:-1,D=s<c?1:-1,z=0,K=this.image.get(p?l:s,p?s:l);for(let ee=s,se=l;ee!==c;ee+=D){let fe=this.image.get(p?se:ee,p?ee:se);if(fe!==K&&(z++,K=fe),R+=E,R>0){if(se===d)break;se+=P,R-=y}}return z}}class Er{constructor(){this.decoder=new ns}decode(e,r=null){let s,l;if(r!=null&&r.has(ne.PURE_BARCODE)){const E=Er.extractPureBits(e.getBlackMatrix());s=this.decoder.decode(E),l=Er.NO_POINTS}else{const E=new Zt(e.getBlackMatrix()).detect();s=this.decoder.decode(E.getBits()),l=E.getPoints()}const c=s.getRawBytes(),d=new ve(s.getText(),c,8*c.length,l,$.DATA_MATRIX,B.currentTimeMillis()),p=s.getByteSegments();p!=null&&d.putMetadata(ge.BYTE_SEGMENTS,p);const y=s.getECLevel();return y!=null&&d.putMetadata(ge.ERROR_CORRECTION_LEVEL,y),d}reset(){}static extractPureBits(e){const r=e.getTopLeftOnBit(),s=e.getBottomRightOnBit();if(r==null||s==null)throw new X;const l=this.moduleSize(r,e);let c=r[1];const d=s[1];let p=r[0];const E=(s[0]-p+1)/l,R=(d-c+1)/l;if(E<=0||R<=0)throw new X;const P=l/2;c+=P,p+=P;const D=new be(E,R);for(let z=0;z<R;z++){const K=c+z*l;for(let ee=0;ee<E;ee++)e.get(p+ee*l,K)&&D.set(ee,z)}return D}static moduleSize(e,r){const s=r.getWidth();let l=e[0];const c=e[1];for(;l<s&&r.get(l,c);)l++;if(l===s)throw new X;const d=l-e[0];if(d===0)throw new X;return d}}Er.NO_POINTS=[];class Jo extends Ce{constructor(e=500){super(new Er,e)}}var qr;(function(k){k[k.L=0]="L",k[k.M=1]="M",k[k.Q=2]="Q",k[k.H=3]="H"})(qr||(qr={}));class Wt{constructor(e,r,s){this.value=e,this.stringValue=r,this.bits=s,Wt.FOR_BITS.set(s,this),Wt.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return Wt.L;case"M":return Wt.M;case"Q":return Wt.Q;case"H":return Wt.H;default:throw new A(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof Wt))return!1;const r=e;return this.value===r.value}static forBits(e){if(e<0||e>=Wt.FOR_BITS.size)throw new T;return Wt.FOR_BITS.get(e)}}Wt.FOR_BITS=new Map,Wt.FOR_VALUE=new Map,Wt.L=new Wt(qr.L,"L",1),Wt.M=new Wt(qr.M,"M",0),Wt.Q=new Wt(qr.Q,"Q",3),Wt.H=new Wt(qr.H,"H",2);class En{constructor(e){this.errorCorrectionLevel=Wt.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,r){return F.bitCount(e^r)}static decodeFormatInformation(e,r){const s=En.doDecodeFormatInformation(e,r);return s!==null?s:En.doDecodeFormatInformation(e^En.FORMAT_INFO_MASK_QR,r^En.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,r){let s=Number.MAX_SAFE_INTEGER,l=0;for(const c of En.FORMAT_INFO_DECODE_LOOKUP){const d=c[0];if(d===e||d===r)return new En(c[1]);let p=En.numBitsDiffering(e,d);p<s&&(l=c[1],s=p),e!==r&&(p=En.numBitsDiffering(r,d),p<s&&(l=c[1],s=p))}return s<=3?new En(l):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof En))return!1;const r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask}}En.FORMAT_INFO_MASK_QR=21522,En.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class oe{constructor(e,...r){this.ecCodewordsPerBlock=e,this.ecBlocks=r}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const r=this.ecBlocks;for(const s of r)e+=s.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class V{constructor(e,r){this.count=e,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ot{constructor(e,r,...s){this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=s;let l=0;const c=s[0].getECCodewordsPerBlock(),d=s[0].getECBlocks();for(const p of d)l+=p.getCount()*(p.getDataCodewords()+c);this.totalCodewords=l}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new q;try{return this.getVersionForNumber((e-17)/4)}catch{throw new q}}static getVersionForNumber(e){if(e<1||e>40)throw new T;return ot.VERSIONS[e-1]}static decodeVersionInformation(e){let r=Number.MAX_SAFE_INTEGER,s=0;for(let l=0;l<ot.VERSION_DECODE_INFO.length;l++){const c=ot.VERSION_DECODE_INFO[l];if(c===e)return ot.getVersionForNumber(l+7);const d=En.numBitsDiffering(e,c);d<r&&(s=l+7,r=d)}return r<=3?ot.getVersionForNumber(s):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),r=new be(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);const s=this.alignmentPatternCenters.length;for(let l=0;l<s;l++){const c=this.alignmentPatternCenters[l]-2;for(let d=0;d<s;d++)l===0&&(d===0||d===s-1)||l===s-1&&d===0||r.setRegion(this.alignmentPatternCenters[d]-2,c,5,5)}return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r}toString(){return""+this.versionNumber}}ot.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ot.VERSIONS=[new ot(1,new Int32Array(0),new oe(7,new V(1,19)),new oe(10,new V(1,16)),new oe(13,new V(1,13)),new oe(17,new V(1,9))),new ot(2,Int32Array.from([6,18]),new oe(10,new V(1,34)),new oe(16,new V(1,28)),new oe(22,new V(1,22)),new oe(28,new V(1,16))),new ot(3,Int32Array.from([6,22]),new oe(15,new V(1,55)),new oe(26,new V(1,44)),new oe(18,new V(2,17)),new oe(22,new V(2,13))),new ot(4,Int32Array.from([6,26]),new oe(20,new V(1,80)),new oe(18,new V(2,32)),new oe(26,new V(2,24)),new oe(16,new V(4,9))),new ot(5,Int32Array.from([6,30]),new oe(26,new V(1,108)),new oe(24,new V(2,43)),new oe(18,new V(2,15),new V(2,16)),new oe(22,new V(2,11),new V(2,12))),new ot(6,Int32Array.from([6,34]),new oe(18,new V(2,68)),new oe(16,new V(4,27)),new oe(24,new V(4,19)),new oe(28,new V(4,15))),new ot(7,Int32Array.from([6,22,38]),new oe(20,new V(2,78)),new oe(18,new V(4,31)),new oe(18,new V(2,14),new V(4,15)),new oe(26,new V(4,13),new V(1,14))),new ot(8,Int32Array.from([6,24,42]),new oe(24,new V(2,97)),new oe(22,new V(2,38),new V(2,39)),new oe(22,new V(4,18),new V(2,19)),new oe(26,new V(4,14),new V(2,15))),new ot(9,Int32Array.from([6,26,46]),new oe(30,new V(2,116)),new oe(22,new V(3,36),new V(2,37)),new oe(20,new V(4,16),new V(4,17)),new oe(24,new V(4,12),new V(4,13))),new ot(10,Int32Array.from([6,28,50]),new oe(18,new V(2,68),new V(2,69)),new oe(26,new V(4,43),new V(1,44)),new oe(24,new V(6,19),new V(2,20)),new oe(28,new V(6,15),new V(2,16))),new ot(11,Int32Array.from([6,30,54]),new oe(20,new V(4,81)),new oe(30,new V(1,50),new V(4,51)),new oe(28,new V(4,22),new V(4,23)),new oe(24,new V(3,12),new V(8,13))),new ot(12,Int32Array.from([6,32,58]),new oe(24,new V(2,92),new V(2,93)),new oe(22,new V(6,36),new V(2,37)),new oe(26,new V(4,20),new V(6,21)),new oe(28,new V(7,14),new V(4,15))),new ot(13,Int32Array.from([6,34,62]),new oe(26,new V(4,107)),new oe(22,new V(8,37),new V(1,38)),new oe(24,new V(8,20),new V(4,21)),new oe(22,new V(12,11),new V(4,12))),new ot(14,Int32Array.from([6,26,46,66]),new oe(30,new V(3,115),new V(1,116)),new oe(24,new V(4,40),new V(5,41)),new oe(20,new V(11,16),new V(5,17)),new oe(24,new V(11,12),new V(5,13))),new ot(15,Int32Array.from([6,26,48,70]),new oe(22,new V(5,87),new V(1,88)),new oe(24,new V(5,41),new V(5,42)),new oe(30,new V(5,24),new V(7,25)),new oe(24,new V(11,12),new V(7,13))),new ot(16,Int32Array.from([6,26,50,74]),new oe(24,new V(5,98),new V(1,99)),new oe(28,new V(7,45),new V(3,46)),new oe(24,new V(15,19),new V(2,20)),new oe(30,new V(3,15),new V(13,16))),new ot(17,Int32Array.from([6,30,54,78]),new oe(28,new V(1,107),new V(5,108)),new oe(28,new V(10,46),new V(1,47)),new oe(28,new V(1,22),new V(15,23)),new oe(28,new V(2,14),new V(17,15))),new ot(18,Int32Array.from([6,30,56,82]),new oe(30,new V(5,120),new V(1,121)),new oe(26,new V(9,43),new V(4,44)),new oe(28,new V(17,22),new V(1,23)),new oe(28,new V(2,14),new V(19,15))),new ot(19,Int32Array.from([6,30,58,86]),new oe(28,new V(3,113),new V(4,114)),new oe(26,new V(3,44),new V(11,45)),new oe(26,new V(17,21),new V(4,22)),new oe(26,new V(9,13),new V(16,14))),new ot(20,Int32Array.from([6,34,62,90]),new oe(28,new V(3,107),new V(5,108)),new oe(26,new V(3,41),new V(13,42)),new oe(30,new V(15,24),new V(5,25)),new oe(28,new V(15,15),new V(10,16))),new ot(21,Int32Array.from([6,28,50,72,94]),new oe(28,new V(4,116),new V(4,117)),new oe(26,new V(17,42)),new oe(28,new V(17,22),new V(6,23)),new oe(30,new V(19,16),new V(6,17))),new ot(22,Int32Array.from([6,26,50,74,98]),new oe(28,new V(2,111),new V(7,112)),new oe(28,new V(17,46)),new oe(30,new V(7,24),new V(16,25)),new oe(24,new V(34,13))),new ot(23,Int32Array.from([6,30,54,78,102]),new oe(30,new V(4,121),new V(5,122)),new oe(28,new V(4,47),new V(14,48)),new oe(30,new V(11,24),new V(14,25)),new oe(30,new V(16,15),new V(14,16))),new ot(24,Int32Array.from([6,28,54,80,106]),new oe(30,new V(6,117),new V(4,118)),new oe(28,new V(6,45),new V(14,46)),new oe(30,new V(11,24),new V(16,25)),new oe(30,new V(30,16),new V(2,17))),new ot(25,Int32Array.from([6,32,58,84,110]),new oe(26,new V(8,106),new V(4,107)),new oe(28,new V(8,47),new V(13,48)),new oe(30,new V(7,24),new V(22,25)),new oe(30,new V(22,15),new V(13,16))),new ot(26,Int32Array.from([6,30,58,86,114]),new oe(28,new V(10,114),new V(2,115)),new oe(28,new V(19,46),new V(4,47)),new oe(28,new V(28,22),new V(6,23)),new oe(30,new V(33,16),new V(4,17))),new ot(27,Int32Array.from([6,34,62,90,118]),new oe(30,new V(8,122),new V(4,123)),new oe(28,new V(22,45),new V(3,46)),new oe(30,new V(8,23),new V(26,24)),new oe(30,new V(12,15),new V(28,16))),new ot(28,Int32Array.from([6,26,50,74,98,122]),new oe(30,new V(3,117),new V(10,118)),new oe(28,new V(3,45),new V(23,46)),new oe(30,new V(4,24),new V(31,25)),new oe(30,new V(11,15),new V(31,16))),new ot(29,Int32Array.from([6,30,54,78,102,126]),new oe(30,new V(7,116),new V(7,117)),new oe(28,new V(21,45),new V(7,46)),new oe(30,new V(1,23),new V(37,24)),new oe(30,new V(19,15),new V(26,16))),new ot(30,Int32Array.from([6,26,52,78,104,130]),new oe(30,new V(5,115),new V(10,116)),new oe(28,new V(19,47),new V(10,48)),new oe(30,new V(15,24),new V(25,25)),new oe(30,new V(23,15),new V(25,16))),new ot(31,Int32Array.from([6,30,56,82,108,134]),new oe(30,new V(13,115),new V(3,116)),new oe(28,new V(2,46),new V(29,47)),new oe(30,new V(42,24),new V(1,25)),new oe(30,new V(23,15),new V(28,16))),new ot(32,Int32Array.from([6,34,60,86,112,138]),new oe(30,new V(17,115)),new oe(28,new V(10,46),new V(23,47)),new oe(30,new V(10,24),new V(35,25)),new oe(30,new V(19,15),new V(35,16))),new ot(33,Int32Array.from([6,30,58,86,114,142]),new oe(30,new V(17,115),new V(1,116)),new oe(28,new V(14,46),new V(21,47)),new oe(30,new V(29,24),new V(19,25)),new oe(30,new V(11,15),new V(46,16))),new ot(34,Int32Array.from([6,34,62,90,118,146]),new oe(30,new V(13,115),new V(6,116)),new oe(28,new V(14,46),new V(23,47)),new oe(30,new V(44,24),new V(7,25)),new oe(30,new V(59,16),new V(1,17))),new ot(35,Int32Array.from([6,30,54,78,102,126,150]),new oe(30,new V(12,121),new V(7,122)),new oe(28,new V(12,47),new V(26,48)),new oe(30,new V(39,24),new V(14,25)),new oe(30,new V(22,15),new V(41,16))),new ot(36,Int32Array.from([6,24,50,76,102,128,154]),new oe(30,new V(6,121),new V(14,122)),new oe(28,new V(6,47),new V(34,48)),new oe(30,new V(46,24),new V(10,25)),new oe(30,new V(2,15),new V(64,16))),new ot(37,Int32Array.from([6,28,54,80,106,132,158]),new oe(30,new V(17,122),new V(4,123)),new oe(28,new V(29,46),new V(14,47)),new oe(30,new V(49,24),new V(10,25)),new oe(30,new V(24,15),new V(46,16))),new ot(38,Int32Array.from([6,32,58,84,110,136,162]),new oe(30,new V(4,122),new V(18,123)),new oe(28,new V(13,46),new V(32,47)),new oe(30,new V(48,24),new V(14,25)),new oe(30,new V(42,15),new V(32,16))),new ot(39,Int32Array.from([6,26,54,82,110,138,166]),new oe(30,new V(20,117),new V(4,118)),new oe(28,new V(40,47),new V(7,48)),new oe(30,new V(43,24),new V(22,25)),new oe(30,new V(10,15),new V(67,16))),new ot(40,Int32Array.from([6,30,58,86,114,142,170]),new oe(30,new V(19,118),new V(6,119)),new oe(28,new V(18,47),new V(31,48)),new oe(30,new V(34,24),new V(34,25)),new oe(30,new V(20,15),new V(61,16)))];var on;(function(k){k[k.DATA_MASK_000=0]="DATA_MASK_000",k[k.DATA_MASK_001=1]="DATA_MASK_001",k[k.DATA_MASK_010=2]="DATA_MASK_010",k[k.DATA_MASK_011=3]="DATA_MASK_011",k[k.DATA_MASK_100=4]="DATA_MASK_100",k[k.DATA_MASK_101=5]="DATA_MASK_101",k[k.DATA_MASK_110=6]="DATA_MASK_110",k[k.DATA_MASK_111=7]="DATA_MASK_111"})(on||(on={}));class It{constructor(e,r){this.value=e,this.isMasked=r}unmaskBitMatrix(e,r){for(let s=0;s<r;s++)for(let l=0;l<r;l++)this.isMasked(s,l)&&e.flip(l,s)}}It.values=new Map([[on.DATA_MASK_000,new It(on.DATA_MASK_000,(k,e)=>(k+e&1)===0)],[on.DATA_MASK_001,new It(on.DATA_MASK_001,(k,e)=>(k&1)===0)],[on.DATA_MASK_010,new It(on.DATA_MASK_010,(k,e)=>e%3===0)],[on.DATA_MASK_011,new It(on.DATA_MASK_011,(k,e)=>(k+e)%3===0)],[on.DATA_MASK_100,new It(on.DATA_MASK_100,(k,e)=>(Math.floor(k/2)+Math.floor(e/3)&1)===0)],[on.DATA_MASK_101,new It(on.DATA_MASK_101,(k,e)=>k*e%6===0)],[on.DATA_MASK_110,new It(on.DATA_MASK_110,(k,e)=>k*e%6<3)],[on.DATA_MASK_111,new It(on.DATA_MASK_111,(k,e)=>(k+e+k*e%3&1)===0)]]);class Ms{constructor(e){const r=e.getHeight();if(r<21||(r&3)!==1)throw new q;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let c=0;c<6;c++)e=this.copyBit(c,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let c=5;c>=0;c--)e=this.copyBit(8,c,e);const r=this.bitMatrix.getHeight();let s=0;const l=r-7;for(let c=r-1;c>=l;c--)s=this.copyBit(8,c,s);for(let c=r-8;c<r;c++)s=this.copyBit(c,8,s);if(this.parsedFormatInfo=En.decodeFormatInformation(e,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new q}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return ot.getVersionForNumber(r);let s=0;const l=e-11;for(let d=5;d>=0;d--)for(let p=e-9;p>=l;p--)s=this.copyBit(p,d,s);let c=ot.decodeVersionInformation(s);if(c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;s=0;for(let d=5;d>=0;d--)for(let p=e-9;p>=l;p--)s=this.copyBit(d,p,s);if(c=ot.decodeVersionInformation(s),c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;throw new q}copyBit(e,r,s){return(this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r))?s<<1|1:s<<1}readCodewords(){const e=this.readFormatInformation(),r=this.readVersion(),s=It.values.get(e.getDataMask()),l=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,l);const c=r.buildFunctionPattern();let d=!0;const p=new Uint8Array(r.getTotalCodewords());let y=0,E=0,R=0;for(let P=l-1;P>0;P-=2){P===6&&P--;for(let D=0;D<l;D++){const z=d?l-1-D:D;for(let K=0;K<2;K++)c.get(P-K,z)||(R++,E<<=1,this.bitMatrix.get(P-K,z)&&(E|=1),R===8&&(p[y++]=E,R=0,E=0))}d=!d}if(y!==r.getTotalCodewords())throw new q;return p}remask(){if(this.parsedFormatInfo===null)return;const e=It.values[this.parsedFormatInfo.getDataMask()],r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let r=0,s=e.getWidth();r<s;r++)for(let l=r+1,c=e.getHeight();l<c;l++)e.get(r,l)!==e.get(l,r)&&(e.flip(l,r),e.flip(r,l))}}class Ve{constructor(e,r){this.numDataCodewords=e,this.codewords=r}static getDataBlocks(e,r,s){if(e.length!==r.getTotalCodewords())throw new T;const l=r.getECBlocksForLevel(s);let c=0;const d=l.getECBlocks();for(const K of d)c+=K.getCount();const p=new Array(c);let y=0;for(const K of d)for(let ee=0;ee<K.getCount();ee++){const se=K.getDataCodewords(),fe=l.getECCodewordsPerBlock()+se;p[y++]=new Ve(se,new Uint8Array(fe))}const E=p[0].codewords.length;let R=p.length-1;for(;R>=0&&p[R].codewords.length!==E;)R--;R++;const P=E-l.getECCodewordsPerBlock();let D=0;for(let K=0;K<P;K++)for(let ee=0;ee<y;ee++)p[ee].codewords[K]=e[D++];for(let K=R;K<y;K++)p[K].codewords[P]=e[D++];const z=p[0].codewords.length;for(let K=P;K<z;K++)for(let ee=0;ee<y;ee++){const se=ee<R?K:K+1;p[ee].codewords[se]=e[D++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var qe;(function(k){k[k.TERMINATOR=0]="TERMINATOR",k[k.NUMERIC=1]="NUMERIC",k[k.ALPHANUMERIC=2]="ALPHANUMERIC",k[k.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",k[k.BYTE=4]="BYTE",k[k.ECI=5]="ECI",k[k.KANJI=6]="KANJI",k[k.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",k[k.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",k[k.HANZI=9]="HANZI"})(qe||(qe={}));class Ue{constructor(e,r,s,l){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=s,this.bits=l,Ue.FOR_BITS.set(l,this),Ue.FOR_VALUE.set(e,this)}static forBits(e){const r=Ue.FOR_BITS.get(e);if(r===void 0)throw new T;return r}getCharacterCountBits(e){const r=e.getVersionNumber();let s;return r<=9?s=0:r<=26?s=1:s=2,this.characterCountBitsForVersions[s]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof Ue))return!1;const r=e;return this.value===r.value}toString(){return this.stringValue}}Ue.FOR_BITS=new Map,Ue.FOR_VALUE=new Map,Ue.TERMINATOR=new Ue(qe.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ue.NUMERIC=new Ue(qe.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ue.ALPHANUMERIC=new Ue(qe.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ue.STRUCTURED_APPEND=new Ue(qe.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ue.BYTE=new Ue(qe.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ue.ECI=new Ue(qe.ECI,"ECI",Int32Array.from([0,0,0]),7),Ue.KANJI=new Ue(qe.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ue.FNC1_FIRST_POSITION=new Ue(qe.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ue.FNC1_SECOND_POSITION=new Ue(qe.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ue.HANZI=new Ue(qe.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Ge{static decode(e,r,s,l){const c=new ts(e);let d=new Te;const p=new Array;let y=-1,E=-1;try{let R=null,P=!1,D;do{if(c.available()<4)D=Ue.TERMINATOR;else{const z=c.readBits(4);D=Ue.forBits(z)}switch(D){case Ue.TERMINATOR:break;case Ue.FNC1_FIRST_POSITION:case Ue.FNC1_SECOND_POSITION:P=!0;break;case Ue.STRUCTURED_APPEND:if(c.available()<16)throw new q;y=c.readBits(8),E=c.readBits(8);break;case Ue.ECI:const z=Ge.parseECIValue(c);if(R=te.getCharacterSetECIByValue(z),R===null)throw new q;break;case Ue.HANZI:const K=c.readBits(4),ee=c.readBits(D.getCharacterCountBits(r));K===Ge.GB2312_SUBSET&&Ge.decodeHanziSegment(c,d,ee);break;default:const se=c.readBits(D.getCharacterCountBits(r));switch(D){case Ue.NUMERIC:Ge.decodeNumericSegment(c,d,se);break;case Ue.ALPHANUMERIC:Ge.decodeAlphanumericSegment(c,d,se,P);break;case Ue.BYTE:Ge.decodeByteSegment(c,d,se,R,p,l);break;case Ue.KANJI:Ge.decodeKanjiSegment(c,d,se);break;default:throw new q}break}}while(D!==Ue.TERMINATOR)}catch{throw new q}return new Ae(e,d.toString(),p.length===0?null:p,s===null?null:s.toString(),y,E)}static decodeHanziSegment(e,r,s){if(s*13>e.available())throw new q;const l=new Uint8Array(2*s);let c=0;for(;s>0;){const d=e.readBits(13);let p=d/96<<8&4294967295|d%96;p<959?p+=41377:p+=42657,l[c]=p>>8&255,l[c+1]=p&255,c+=2,s--}try{r.append(Oe.decode(l,Se.GB2312))}catch(d){throw new q(d)}}static decodeKanjiSegment(e,r,s){if(s*13>e.available())throw new q;const l=new Uint8Array(2*s);let c=0;for(;s>0;){const d=e.readBits(13);let p=d/192<<8&4294967295|d%192;p<7936?p+=33088:p+=49472,l[c]=p>>8,l[c+1]=p,c+=2,s--}try{r.append(Oe.decode(l,Se.SHIFT_JIS))}catch(d){throw new q(d)}}static decodeByteSegment(e,r,s,l,c,d){if(8*s>e.available())throw new q;const p=new Uint8Array(s);for(let E=0;E<s;E++)p[E]=e.readBits(8);let y;l===null?y=Se.guessEncoding(p,d):y=l.getName();try{r.append(Oe.decode(p,y))}catch(E){throw new q(E)}c.push(p)}static toAlphaNumericChar(e){if(e>=Ge.ALPHANUMERIC_CHARS.length)throw new q;return Ge.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,r,s,l){const c=r.length();for(;s>1;){if(e.available()<11)throw new q;const d=e.readBits(11);r.append(Ge.toAlphaNumericChar(Math.floor(d/45))),r.append(Ge.toAlphaNumericChar(d%45)),s-=2}if(s===1){if(e.available()<6)throw new q;r.append(Ge.toAlphaNumericChar(e.readBits(6)))}if(l)for(let d=c;d<r.length();d++)r.charAt(d)==="%"&&(d<r.length()-1&&r.charAt(d+1)==="%"?r.deleteCharAt(d+1):r.setCharAt(d,""))}static decodeNumericSegment(e,r,s){for(;s>=3;){if(e.available()<10)throw new q;const l=e.readBits(10);if(l>=1e3)throw new q;r.append(Ge.toAlphaNumericChar(Math.floor(l/100))),r.append(Ge.toAlphaNumericChar(Math.floor(l/10)%10)),r.append(Ge.toAlphaNumericChar(l%10)),s-=3}if(s===2){if(e.available()<7)throw new q;const l=e.readBits(7);if(l>=100)throw new q;r.append(Ge.toAlphaNumericChar(Math.floor(l/10))),r.append(Ge.toAlphaNumericChar(l%10))}else if(s===1){if(e.available()<4)throw new q;const l=e.readBits(4);if(l>=10)throw new q;r.append(Ge.toAlphaNumericChar(l))}}static parseECIValue(e){const r=e.readBits(8);if(!(r&128))return r&127;if((r&192)===128){const s=e.readBits(8);return(r&63)<<8&4294967295|s}if((r&224)===192){const s=e.readBits(16);return(r&31)<<16&4294967295|s}throw new q}}Ge.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Ge.GB2312_SUBSET=1;class jt{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const r=e[0];e[0]=e[2],e[2]=r}}class Pr{constructor(){this.rsDecoder=new Tt(pe.QR_CODE_FIELD_256)}decodeBooleanArray(e,r){return this.decodeBitMatrix(be.parseFromBooleanArray(e),r)}decodeBitMatrix(e,r){const s=new Ms(e);let l=null;try{return this.decodeBitMatrixParser(s,r)}catch(c){l=c}try{s.remask(),s.setMirror(!0),s.readVersion(),s.readFormatInformation(),s.mirror();const c=this.decodeBitMatrixParser(s,r);return c.setOther(new jt(!0)),c}catch(c){throw l!==null?l:c}}decodeBitMatrixParser(e,r){const s=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),c=e.readCodewords(),d=Ve.getDataBlocks(c,s,l);let p=0;for(const R of d)p+=R.getNumDataCodewords();const y=new Uint8Array(p);let E=0;for(const R of d){const P=R.getCodewords(),D=R.getNumDataCodewords();this.correctErrors(P,D);for(let z=0;z<D;z++)y[E++]=P[z]}return Ge.decode(y,s,l,r)}correctErrors(e,r){const s=new Int32Array(e);try{this.rsDecoder.decode(s,e.length-r)}catch{throw new O}for(let l=0;l<r;l++)e[l]=s[l]}}class Ci extends ze{constructor(e,r,s){super(e,r),this.estimatedModuleSize=s}aboutEquals(e,r,s){if(Math.abs(r-this.getY())<=e&&Math.abs(s-this.getX())<=e){const l=Math.abs(e-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(e,r,s){const l=(this.getX()+r)/2,c=(this.getY()+e)/2,d=(this.estimatedModuleSize+s)/2;return new Ci(l,c,d)}}class mr{constructor(e,r,s,l,c,d,p){this.image=e,this.startX=r,this.startY=s,this.width=l,this.height=c,this.moduleSize=d,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,r=this.height,s=this.width,l=e+s,c=this.startY+r/2,d=new Int32Array(3),p=this.image;for(let y=0;y<r;y++){const E=c+(y&1?-Math.floor((y+1)/2):Math.floor((y+1)/2));d[0]=0,d[1]=0,d[2]=0;let R=e;for(;R<l&&!p.get(R,E);)R++;let P=0;for(;R<l;){if(p.get(R,E))if(P===1)d[1]++;else if(P===2){if(this.foundPatternCross(d)){const D=this.handlePossibleCenter(d,E,R);if(D!==null)return D}d[0]=d[2],d[1]=1,d[2]=0,P=1}else d[++P]++;else P===1&&P++,d[P]++;R++}if(this.foundPatternCross(d)){const D=this.handlePossibleCenter(d,E,l);if(D!==null)return D}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new X}static centerFromEnd(e,r){return r-e[2]-e[1]/2}foundPatternCross(e){const r=this.moduleSize,s=r/2;for(let l=0;l<3;l++)if(Math.abs(r-e[l])>=s)return!1;return!0}crossCheckVertical(e,r,s,l){const c=this.image,d=c.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let y=e;for(;y>=0&&c.get(r,y)&&p[1]<=s;)p[1]++,y--;if(y<0||p[1]>s)return NaN;for(;y>=0&&!c.get(r,y)&&p[0]<=s;)p[0]++,y--;if(p[0]>s)return NaN;for(y=e+1;y<d&&c.get(r,y)&&p[1]<=s;)p[1]++,y++;if(y===d||p[1]>s)return NaN;for(;y<d&&!c.get(r,y)&&p[2]<=s;)p[2]++,y++;if(p[2]>s)return NaN;const E=p[0]+p[1]+p[2];return 5*Math.abs(E-l)>=2*l?NaN:this.foundPatternCross(p)?mr.centerFromEnd(p,y):NaN}handlePossibleCenter(e,r,s){const l=e[0]+e[1]+e[2],c=mr.centerFromEnd(e,s),d=this.crossCheckVertical(r,c,2*e[1],l);if(!isNaN(d)){const p=(e[0]+e[1]+e[2])/3;for(const E of this.possibleCenters)if(E.aboutEquals(p,d,c))return E.combineEstimate(d,c,p);const y=new Ci(c,d,p);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null}}class Sr extends ze{constructor(e,r,s,l){super(e,r),this.estimatedModuleSize=s,this.count=l,l===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,r,s){if(Math.abs(r-this.getY())<=e&&Math.abs(s-this.getX())<=e){const l=Math.abs(e-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(e,r,s){const l=this.count+1,c=(this.count*this.getX()+r)/l,d=(this.count*this.getY()+e)/l,p=(this.count*this.estimatedModuleSize+s)/l;return new Sr(c,d,p,l)}}class Mr{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class an{constructor(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const r=e!=null&&e.get(ne.TRY_HARDER)!==void 0,s=e!=null&&e.get(ne.PURE_BARCODE)!==void 0,l=this.image,c=l.getHeight(),d=l.getWidth();let p=Math.floor(3*c/(4*an.MAX_MODULES));(p<an.MIN_SKIP||r)&&(p=an.MIN_SKIP);let y=!1;const E=new Int32Array(5);for(let P=p-1;P<c&&!y;P+=p){E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0;let D=0;for(let z=0;z<d;z++)if(l.get(z,P))(D&1)===1&&D++,E[D]++;else if(D&1)E[D]++;else if(D===4)if(an.foundPatternCross(E)){if(this.handlePossibleCenter(E,P,z,s)===!0)if(p=2,this.hasSkipped===!0)y=this.haveMultiplyConfirmedCenters();else{const ee=this.findRowSkip();ee>E[2]&&(P+=ee-E[2]-p,z=d-1)}else{E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,D=3;continue}D=0,E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0}else E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,D=3;else E[++D]++;an.foundPatternCross(E)&&this.handlePossibleCenter(E,P,d,s)===!0&&(p=E[0],this.hasSkipped&&(y=this.haveMultiplyConfirmedCenters()))}const R=this.selectBestPatterns();return ze.orderBestPatterns(R),new Mr(R)}static centerFromEnd(e,r){return r-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let r=0;for(let c=0;c<5;c++){const d=e[c];if(d===0)return!1;r+=d}if(r<7)return!1;const s=r/7,l=s/2;return Math.abs(s-e[0])<l&&Math.abs(s-e[1])<l&&Math.abs(3*s-e[2])<3*l&&Math.abs(s-e[3])<l&&Math.abs(s-e[4])<l}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,r,s,l){const c=this.getCrossCheckStateCount();let d=0;const p=this.image;for(;e>=d&&r>=d&&p.get(r-d,e-d);)c[2]++,d++;if(e<d||r<d)return!1;for(;e>=d&&r>=d&&!p.get(r-d,e-d)&&c[1]<=s;)c[1]++,d++;if(e<d||r<d||c[1]>s)return!1;for(;e>=d&&r>=d&&p.get(r-d,e-d)&&c[0]<=s;)c[0]++,d++;if(c[0]>s)return!1;const y=p.getHeight(),E=p.getWidth();for(d=1;e+d<y&&r+d<E&&p.get(r+d,e+d);)c[2]++,d++;if(e+d>=y||r+d>=E)return!1;for(;e+d<y&&r+d<E&&!p.get(r+d,e+d)&&c[3]<s;)c[3]++,d++;if(e+d>=y||r+d>=E||c[3]>=s)return!1;for(;e+d<y&&r+d<E&&p.get(r+d,e+d)&&c[4]<s;)c[4]++,d++;if(c[4]>=s)return!1;const R=c[0]+c[1]+c[2]+c[3]+c[4];return Math.abs(R-l)<2*l&&an.foundPatternCross(c)}crossCheckVertical(e,r,s,l){const c=this.image,d=c.getHeight(),p=this.getCrossCheckStateCount();let y=e;for(;y>=0&&c.get(r,y);)p[2]++,y--;if(y<0)return NaN;for(;y>=0&&!c.get(r,y)&&p[1]<=s;)p[1]++,y--;if(y<0||p[1]>s)return NaN;for(;y>=0&&c.get(r,y)&&p[0]<=s;)p[0]++,y--;if(p[0]>s)return NaN;for(y=e+1;y<d&&c.get(r,y);)p[2]++,y++;if(y===d)return NaN;for(;y<d&&!c.get(r,y)&&p[3]<s;)p[3]++,y++;if(y===d||p[3]>=s)return NaN;for(;y<d&&c.get(r,y)&&p[4]<s;)p[4]++,y++;if(p[4]>=s)return NaN;const E=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(E-l)>=2*l?NaN:an.foundPatternCross(p)?an.centerFromEnd(p,y):NaN}crossCheckHorizontal(e,r,s,l){const c=this.image,d=c.getWidth(),p=this.getCrossCheckStateCount();let y=e;for(;y>=0&&c.get(y,r);)p[2]++,y--;if(y<0)return NaN;for(;y>=0&&!c.get(y,r)&&p[1]<=s;)p[1]++,y--;if(y<0||p[1]>s)return NaN;for(;y>=0&&c.get(y,r)&&p[0]<=s;)p[0]++,y--;if(p[0]>s)return NaN;for(y=e+1;y<d&&c.get(y,r);)p[2]++,y++;if(y===d)return NaN;for(;y<d&&!c.get(y,r)&&p[3]<s;)p[3]++,y++;if(y===d||p[3]>=s)return NaN;for(;y<d&&c.get(y,r)&&p[4]<s;)p[4]++,y++;if(p[4]>=s)return NaN;const E=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(E-l)>=l?NaN:an.foundPatternCross(p)?an.centerFromEnd(p,y):NaN}handlePossibleCenter(e,r,s,l){const c=e[0]+e[1]+e[2]+e[3]+e[4];let d=an.centerFromEnd(e,s),p=this.crossCheckVertical(r,Math.floor(d),e[2],c);if(!isNaN(p)&&(d=this.crossCheckHorizontal(Math.floor(d),Math.floor(p),e[2],c),!isNaN(d)&&(!l||this.crossCheckDiagonal(Math.floor(p),Math.floor(d),e[2],c)))){const y=c/7;let E=!1;const R=this.possibleCenters;for(let P=0,D=R.length;P<D;P++){const z=R[P];if(z.aboutEquals(y,p,d)){R[P]=z.combineEstimate(p,d,y),E=!0;break}}if(!E){const P=new Sr(d,p,y);R.push(P),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(P)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let r=null;for(const s of this.possibleCenters)if(s.getCount()>=an.CENTER_QUORUM)if(r==null)r=s;else return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-s.getX())-Math.abs(r.getY()-s.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,r=0;const s=this.possibleCenters.length;for(const d of this.possibleCenters)d.getCount()>=an.CENTER_QUORUM&&(e++,r+=d.getEstimatedModuleSize());if(e<3)return!1;const l=r/s;let c=0;for(const d of this.possibleCenters)c+=Math.abs(d.getEstimatedModuleSize()-l);return c<=.05*r}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new X;const r=this.possibleCenters;let s;if(e>3){let l=0,c=0;for(const y of this.possibleCenters){const E=y.getEstimatedModuleSize();l+=E,c+=E*E}s=l/e;let d=Math.sqrt(c/e-s*s);r.sort((y,E)=>{const R=Math.abs(E.getEstimatedModuleSize()-s),P=Math.abs(y.getEstimatedModuleSize()-s);return R<P?-1:R>P?1:0});const p=Math.max(.2*s,d);for(let y=0;y<r.length&&r.length>3;y++){const E=r[y];Math.abs(E.getEstimatedModuleSize()-s)>p&&(r.splice(y,1),y--)}}if(r.length>3){let l=0;for(const c of r)l+=c.getEstimatedModuleSize();s=l/r.length,r.sort((c,d)=>{if(d.getCount()===c.getCount()){const p=Math.abs(d.getEstimatedModuleSize()-s),y=Math.abs(c.getEstimatedModuleSize()-s);return p<y?1:p>y?-1:0}else return d.getCount()-c.getCount()}),r.splice(3)}return[r[0],r[1],r[2]]}}an.CENTER_QUORUM=2,an.MIN_SKIP=3,an.MAX_MODULES=57;class dn{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(ne.NEED_RESULT_POINT_CALLBACK);const s=new an(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(s)}processFinderPatternInfo(e){const r=e.getTopLeft(),s=e.getTopRight(),l=e.getBottomLeft(),c=this.calculateModuleSize(r,s,l);if(c<1)throw new X("No pattern found in proccess finder.");const d=dn.computeDimension(r,s,l,c),p=ot.getProvisionalVersionForDimension(d),y=p.getDimensionForVersion()-7;let E=null;if(p.getAlignmentPatternCenters().length>0){const z=s.getX()-r.getX()+l.getX(),K=s.getY()-r.getY()+l.getY(),ee=1-3/y,se=Math.floor(r.getX()+ee*(z-r.getX())),fe=Math.floor(r.getY()+ee*(K-r.getY()));for(let Be=4;Be<=16;Be<<=1)try{E=this.findAlignmentInRegion(c,se,fe,Be);break}catch(Fe){if(!(Fe instanceof X))throw Fe}}const R=dn.createTransform(r,s,l,E,d),P=dn.sampleGrid(this.image,R,d);let D;return E===null?D=[l,r,s]:D=[l,r,s,E],new vn(P,D)}static createTransform(e,r,s,l,c){const d=c-3.5;let p,y,E,R;return l!==null?(p=l.getX(),y=l.getY(),E=d-3,R=E):(p=r.getX()-e.getX()+s.getX(),y=r.getY()-e.getY()+s.getY(),E=d,R=d),We.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,E,R,3.5,d,e.getX(),e.getY(),r.getX(),r.getY(),p,y,s.getX(),s.getY())}static sampleGrid(e,r,s){return tt.getInstance().sampleGridWithTransform(e,s,s,r)}static computeDimension(e,r,s,l){const c=et.round(ze.distance(e,r)/l),d=et.round(ze.distance(e,s)/l);let p=Math.floor((c+d)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new X("Dimensions could be not found.")}return p}calculateModuleSize(e,r,s){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,s))/2}calculateModuleSizeOneWay(e,r){const s=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(s)?l/7:isNaN(l)?s/7:(s+l)/14}sizeOfBlackWhiteBlackRunBothWays(e,r,s,l){let c=this.sizeOfBlackWhiteBlackRun(e,r,s,l),d=1,p=e-(s-e);p<0?(d=e/(e-p),p=0):p>=this.image.getWidth()&&(d=(this.image.getWidth()-1-e)/(p-e),p=this.image.getWidth()-1);let y=Math.floor(r-(l-r)*d);return d=1,y<0?(d=r/(r-y),y=0):y>=this.image.getHeight()&&(d=(this.image.getHeight()-1-r)/(y-r),y=this.image.getHeight()-1),p=Math.floor(e+(p-e)*d),c+=this.sizeOfBlackWhiteBlackRun(e,r,p,y),c-1}sizeOfBlackWhiteBlackRun(e,r,s,l){const c=Math.abs(l-r)>Math.abs(s-e);if(c){let z=e;e=r,r=z,z=s,s=l,l=z}const d=Math.abs(s-e),p=Math.abs(l-r);let y=-d/2;const E=e<s?1:-1,R=r<l?1:-1;let P=0;const D=s+E;for(let z=e,K=r;z!==D;z+=E){const ee=c?K:z,se=c?z:K;if(P===1===this.image.get(ee,se)){if(P===2)return et.distance(z,K,e,r);P++}if(y+=p,y>0){if(K===l)break;K+=R,y-=d}}return P===2?et.distance(s+E,l,e,r):NaN}findAlignmentInRegion(e,r,s,l){const c=Math.floor(l*e),d=Math.max(0,r-c),p=Math.min(this.image.getWidth()-1,r+c);if(p-d<e*3)throw new X("Alignment top exceeds estimated module size.");const y=Math.max(0,s-c),E=Math.min(this.image.getHeight()-1,s+c);if(E-y<e*3)throw new X("Alignment bottom exceeds estimated module size.");return new mr(this.image,d,y,p-d,E-y,e,this.resultPointCallback).find()}}class tn{constructor(){this.decoder=new Pr}getDecoder(){return this.decoder}decode(e,r){let s,l;if(r!=null&&r.get(ne.PURE_BARCODE)!==void 0){const y=tn.extractPureBits(e.getBlackMatrix());s=this.decoder.decodeBitMatrix(y,r),l=tn.NO_POINTS}else{const y=new dn(e.getBlackMatrix()).detect(r);s=this.decoder.decodeBitMatrix(y.getBits(),r),l=y.getPoints()}s.getOther()instanceof jt&&s.getOther().applyMirroredCorrection(l);const c=new ve(s.getText(),s.getRawBytes(),void 0,l,$.QR_CODE,void 0),d=s.getByteSegments();d!==null&&c.putMetadata(ge.BYTE_SEGMENTS,d);const p=s.getECLevel();return p!==null&&c.putMetadata(ge.ERROR_CORRECTION_LEVEL,p),s.hasStructuredAppend()&&(c.putMetadata(ge.STRUCTURED_APPEND_SEQUENCE,s.getStructuredAppendSequenceNumber()),c.putMetadata(ge.STRUCTURED_APPEND_PARITY,s.getStructuredAppendParity())),c}reset(){}static extractPureBits(e){const r=e.getTopLeftOnBit(),s=e.getBottomRightOnBit();if(r===null||s===null)throw new X;const l=this.moduleSize(r,e);let c=r[1],d=s[1],p=r[0],y=s[0];if(p>=y||c>=d)throw new X;if(d-c!==y-p&&(y=p+(d-c),y>=e.getWidth()))throw new X;const E=Math.round((y-p+1)/l),R=Math.round((d-c+1)/l);if(E<=0||R<=0)throw new X;if(R!==E)throw new X;const P=Math.floor(l/2);c+=P,p+=P;const D=p+Math.floor((E-1)*l)-y;if(D>0){if(D>P)throw new X;p-=D}const z=c+Math.floor((R-1)*l)-d;if(z>0){if(z>P)throw new X;c-=z}const K=new be(E,R);for(let ee=0;ee<R;ee++){const se=c+Math.floor(ee*l);for(let fe=0;fe<E;fe++)e.get(p+Math.floor(fe*l),se)&&K.set(fe,ee)}return K}static moduleSize(e,r){const s=r.getHeight(),l=r.getWidth();let c=e[0],d=e[1],p=!0,y=0;for(;c<l&&d<s;){if(p!==r.get(c,d)){if(++y===5)break;p=!p}c++,d++}if(c===l||d===s)throw new X;return(c-e[0])/7}}tn.NO_POINTS=new Array;class ut{PDF417Common(){}static getBitCountSum(e){return et.sum(e)}static toIntArray(e){if(e==null||!e.length)return ut.EMPTY_INT_ARRAY;const r=new Int32Array(e.length);let s=0;for(const l of e)r[s++]=l;return r}static getCodeword(e){const r=U.binarySearch(ut.SYMBOL_TABLE,e&262143);return r<0?-1:(ut.CODEWORD_TABLE[r]-1)%ut.NUMBER_OF_CODEWORDS}}ut.NUMBER_OF_CODEWORDS=929,ut.MAX_CODEWORDS_IN_BARCODE=ut.NUMBER_OF_CODEWORDS-1,ut.MIN_ROWS_IN_BARCODE=3,ut.MAX_ROWS_IN_BARCODE=90,ut.MODULES_IN_CODEWORD=17,ut.MODULES_IN_STOP_PATTERN=18,ut.BARS_IN_MODULE=8,ut.EMPTY_INT_ARRAY=new Int32Array([]),ut.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ut.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Hr{constructor(e,r){this.bits=e,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class ft{static detectMultiple(e,r,s){let l=e.getBlackMatrix(),c=ft.detect(s,l);return c.length||(l=l.clone(),l.rotate180(),c=ft.detect(s,l)),new Hr(l,c)}static detect(e,r){const s=new Array;let l=0,c=0,d=!1;for(;l<r.getHeight();){const p=ft.findVertices(r,l,c);if(p[0]==null&&p[3]==null){if(!d)break;d=!1,c=0;for(const y of s)y[1]!=null&&(l=Math.trunc(Math.max(l,y[1].getY()))),y[3]!=null&&(l=Math.max(l,Math.trunc(y[3].getY())));l+=ft.ROW_STEP;continue}if(d=!0,s.push(p),!e)break;p[2]!=null?(c=Math.trunc(p[2].getX()),l=Math.trunc(p[2].getY())):(c=Math.trunc(p[4].getX()),l=Math.trunc(p[4].getY()))}return s}static findVertices(e,r,s){const l=e.getHeight(),c=e.getWidth(),d=new Array(8);return ft.copyToResult(d,ft.findRowsWithPattern(e,l,c,r,s,ft.START_PATTERN),ft.INDEXES_START_PATTERN),d[4]!=null&&(s=Math.trunc(d[4].getX()),r=Math.trunc(d[4].getY())),ft.copyToResult(d,ft.findRowsWithPattern(e,l,c,r,s,ft.STOP_PATTERN),ft.INDEXES_STOP_PATTERN),d}static copyToResult(e,r,s){for(let l=0;l<s.length;l++)e[s[l]]=r[l]}static findRowsWithPattern(e,r,s,l,c,d){const p=new Array(4);let y=!1;const E=new Int32Array(d.length);for(;l<r;l+=ft.ROW_STEP){let P=ft.findGuardPattern(e,c,l,s,!1,d,E);if(P!=null){for(;l>0;){const D=ft.findGuardPattern(e,c,--l,s,!1,d,E);if(D!=null)P=D;else{l++;break}}p[0]=new ze(P[0],l),p[1]=new ze(P[1],l),y=!0;break}}let R=l+1;if(y){let P=0,D=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;R<r;R++){const z=ft.findGuardPattern(e,D[0],R,s,!1,d,E);if(z!=null&&Math.abs(D[0]-z[0])<ft.MAX_PATTERN_DRIFT&&Math.abs(D[1]-z[1])<ft.MAX_PATTERN_DRIFT)D=z,P=0;else{if(P>ft.SKIPPED_ROW_COUNT_MAX)break;P++}}R-=P+1,p[2]=new ze(D[0],R),p[3]=new ze(D[1],R)}return R-l<ft.BARCODE_MIN_HEIGHT&&U.fill(p,null),p}static findGuardPattern(e,r,s,l,c,d,p){U.fillWithin(p,0,p.length,0);let y=r,E=0;for(;e.get(y,s)&&y>0&&E++<ft.MAX_PIXEL_DRIFT;)y--;let R=y,P=0,D=d.length;for(let z=c;R<l;R++)if(e.get(R,s)!==z)p[P]++;else{if(P===D-1){if(ft.patternMatchVariance(p,d,ft.MAX_INDIVIDUAL_VARIANCE)<ft.MAX_AVG_VARIANCE)return new Int32Array([y,R]);y+=p[0]+p[1],B.arraycopy(p,2,p,0,P-1),p[P-1]=0,p[P]=0,P--}else P++;p[P]=1,z=!z}return P===D-1&&ft.patternMatchVariance(p,d,ft.MAX_INDIVIDUAL_VARIANCE)<ft.MAX_AVG_VARIANCE?new Int32Array([y,R-1]):null}static patternMatchVariance(e,r,s){let l=e.length,c=0,d=0;for(let E=0;E<l;E++)c+=e[E],d+=r[E];if(c<d)return 1/0;let p=c/d;s*=p;let y=0;for(let E=0;E<l;E++){let R=e[E],P=r[E]*p,D=R>P?R-P:P-R;if(D>s)return 1/0;y+=D}return y/c}}ft.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),ft.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),ft.MAX_AVG_VARIANCE=.42,ft.MAX_INDIVIDUAL_VARIANCE=.8,ft.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),ft.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),ft.MAX_PIXEL_DRIFT=3,ft.MAX_PATTERN_DRIFT=5,ft.SKIPPED_ROW_COUNT_MAX=25,ft.ROW_STEP=5,ft.BARCODE_MIN_HEIGHT=10;class _n{constructor(e,r){if(r.length===0)throw new T;this.field=e;let s=r.length;if(s>1&&r[0]===0){let l=1;for(;l<s&&r[l]===0;)l++;l===s?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(s-l),B.arraycopy(r,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let l=0;for(let c of this.coefficients)l=this.field.add(l,c);return l}let r=this.coefficients[0],s=this.coefficients.length;for(let l=1;l<s;l++)r=this.field.add(this.field.multiply(e,r),this.coefficients[l]);return r}add(e){if(!this.field.equals(e.field))throw new T("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let r=this.coefficients,s=e.coefficients;if(r.length>s.length){let d=r;r=s,s=d}let l=new Int32Array(s.length),c=s.length-r.length;B.arraycopy(s,0,l,0,c);for(let d=c;d<s.length;d++)l[d]=this.field.add(r[d-c],s[d]);return new _n(this.field,l)}subtract(e){if(!this.field.equals(e.field))throw new T("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof _n?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new T("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new _n(this.field,new Int32Array([0]));let r=this.coefficients,s=r.length,l=e.coefficients,c=l.length,d=new Int32Array(s+c-1);for(let p=0;p<s;p++){let y=r[p];for(let E=0;E<c;E++)d[p+E]=this.field.add(d[p+E],this.field.multiply(y,l[E]))}return new _n(this.field,d)}negative(){let e=this.coefficients.length,r=new Int32Array(e);for(let s=0;s<e;s++)r[s]=this.field.subtract(0,this.coefficients[s]);return new _n(this.field,r)}multiplyScalar(e){if(e===0)return new _n(this.field,new Int32Array([0]));if(e===1)return this;let r=this.coefficients.length,s=new Int32Array(r);for(let l=0;l<r;l++)s[l]=this.field.multiply(this.coefficients[l],e);return new _n(this.field,s)}multiplyByMonomial(e,r){if(e<0)throw new T;if(r===0)return new _n(this.field,new Int32Array([0]));let s=this.coefficients.length,l=new Int32Array(s+e);for(let c=0;c<s;c++)l[c]=this.field.multiply(this.coefficients[c],r);return new _n(this.field,l)}toString(){let e=new Te;for(let r=this.getDegree();r>=0;r--){let s=this.getCoefficient(r);s!==0&&(s<0?(e.append(" - "),s=-s):e.length()>0&&e.append(" + "),(r===0||s!==1)&&e.append(s),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()}}class cl{add(e,r){return(e+r)%this.modulus}subtract(e,r){return(this.modulus+e-r)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new T;return this.logTable[e]}inverse(e){if(e===0)throw new ce;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class rs extends cl{constructor(e,r){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let s=1;for(let l=0;l<e;l++)this.expTable[l]=s,s=s*r%e;for(let l=0;l<e-1;l++)this.logTable[this.expTable[l]]=l;this.zero=new _n(this,new Int32Array([0])),this.one=new _n(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,r){if(e<0)throw new T;if(r===0)return this.zero;let s=new Int32Array(e+1);return s[0]=r,new _n(this,s)}}rs.PDF417_GF=new rs(ut.NUMBER_OF_CODEWORDS,3);class ea{constructor(){this.field=rs.PDF417_GF}decode(e,r,s){let l=new _n(this.field,e),c=new Int32Array(r),d=!1;for(let K=r;K>0;K--){let ee=l.evaluateAt(this.field.exp(K));c[r-K]=ee,ee!==0&&(d=!0)}if(!d)return 0;let p=this.field.getOne();if(s!=null)for(const K of s){let ee=this.field.exp(e.length-1-K),se=new _n(this.field,new Int32Array([this.field.subtract(0,ee),1]));p=p.multiply(se)}let y=new _n(this.field,c),E=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),y,r),R=E[0],P=E[1],D=this.findErrorLocations(R),z=this.findErrorMagnitudes(P,R,D);for(let K=0;K<D.length;K++){let ee=e.length-1-this.field.log(D[K]);if(ee<0)throw O.getChecksumInstance();e[ee]=this.field.subtract(e[ee],z[K])}return D.length}runEuclideanAlgorithm(e,r,s){if(e.getDegree()<r.getDegree()){let D=e;e=r,r=D}let l=e,c=r,d=this.field.getZero(),p=this.field.getOne();for(;c.getDegree()>=Math.round(s/2);){let D=l,z=d;if(l=c,d=p,l.isZero())throw O.getChecksumInstance();c=D;let K=this.field.getZero(),ee=l.getCoefficient(l.getDegree()),se=this.field.inverse(ee);for(;c.getDegree()>=l.getDegree()&&!c.isZero();){let fe=c.getDegree()-l.getDegree(),Be=this.field.multiply(c.getCoefficient(c.getDegree()),se);K=K.add(this.field.buildMonomial(fe,Be)),c=c.subtract(l.multiplyByMonomial(fe,Be))}p=K.multiply(d).subtract(z).negative()}let y=p.getCoefficient(0);if(y===0)throw O.getChecksumInstance();let E=this.field.inverse(y),R=p.multiply(E),P=c.multiply(E);return[R,P]}findErrorLocations(e){let r=e.getDegree(),s=new Int32Array(r),l=0;for(let c=1;c<this.field.getSize()&&l<r;c++)e.evaluateAt(c)===0&&(s[l]=this.field.inverse(c),l++);if(l!==r)throw O.getChecksumInstance();return s}findErrorMagnitudes(e,r,s){let l=r.getDegree(),c=new Int32Array(l);for(let E=1;E<=l;E++)c[l-E]=this.field.multiply(E,r.getCoefficient(E));let d=new _n(this.field,c),p=s.length,y=new Int32Array(p);for(let E=0;E<p;E++){let R=this.field.inverse(s[E]),P=this.field.subtract(0,e.evaluateAt(R)),D=this.field.inverse(d.evaluateAt(R));y[E]=this.field.multiply(P,D)}return y}}class Mi{constructor(e,r,s,l,c){e instanceof Mi?this.constructor_2(e):this.constructor_1(e,r,s,l,c)}constructor_1(e,r,s,l,c){const d=r==null||s==null,p=l==null||c==null;if(d&&p)throw new X;d?(r=new ze(0,l.getY()),s=new ze(0,c.getY())):p&&(l=new ze(e.getWidth()-1,r.getY()),c=new ze(e.getWidth()-1,s.getY())),this.image=e,this.topLeft=r,this.bottomLeft=s,this.topRight=l,this.bottomRight=c,this.minX=Math.trunc(Math.min(r.getX(),s.getX())),this.maxX=Math.trunc(Math.max(l.getX(),c.getX())),this.minY=Math.trunc(Math.min(r.getY(),l.getY())),this.maxY=Math.trunc(Math.max(s.getY(),c.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,r){return e==null?r:r==null?e:new Mi(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)}addMissingRows(e,r,s){let l=this.topLeft,c=this.bottomLeft,d=this.topRight,p=this.bottomRight;if(e>0){let y=s?this.topLeft:this.topRight,E=Math.trunc(y.getY()-e);E<0&&(E=0);let R=new ze(y.getX(),E);s?l=R:d=R}if(r>0){let y=s?this.bottomLeft:this.bottomRight,E=Math.trunc(y.getY()+r);E>=this.image.getHeight()&&(E=this.image.getHeight()-1);let R=new ze(y.getX(),E);s?c=R:p=R}return new Mi(this.image,l,c,d,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Os{constructor(e,r,s,l){this.columnCount=e,this.errorCorrectionLevel=l,this.rowCountUpperPart=r,this.rowCountLowerPart=s,this.rowCount=r+s}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ui{constructor(){this.buffer=""}static form(e,r){let s=-1;function l(d,p,y,E,R,P){if(d==="%%")return"%";if(r[++s]===void 0)return;d=E?parseInt(E.substr(1)):void 0;let D=R?parseInt(R.substr(1)):void 0,z;switch(P){case"s":z=r[s];break;case"c":z=r[s][0];break;case"f":z=parseFloat(r[s]).toFixed(d);break;case"p":z=parseFloat(r[s]).toPrecision(d);break;case"e":z=parseFloat(r[s]).toExponential(d);break;case"x":z=parseInt(r[s]).toString(D||16);break;case"d":z=parseFloat(parseInt(r[s],D||10).toPrecision(d)).toFixed(0);break}z=typeof z=="object"?JSON.stringify(z):(+z).toString(D);let K=parseInt(y),ee=y&&y[0]+""=="0"?"0":" ";for(;z.length<K;)z=p!==void 0?z+ee:ee+z;return z}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(c,l)}format(e,...r){this.buffer+=ui.form(e,r)}toString(){return this.buffer}}class Qr{constructor(e){this.boundingBox=new Mi(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let r=this.getCodeword(e);if(r!=null)return r;for(let s=1;s<Qr.MAX_NEARBY_DISTANCE;s++){let l=this.imageRowToCodewordIndex(e)-s;if(l>=0&&(r=this.codewords[l],r!=null)||(l=this.imageRowToCodewordIndex(e)+s,l<this.codewords.length&&(r=this.codewords[l],r!=null)))return r}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new ui;let r=0;for(const s of this.codewords){if(s==null){e.format("%3d:    |   %n",r++);continue}e.format("%3d: %3d|%3d%n",r++,s.getRowNumber(),s.getValue())}return e.toString()}}Qr.MAX_NEARBY_DISTANCE=5;class bi{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)}getValue(){let e=-1,r=new Array;for(const[s,l]of this.values.entries()){const c={getKey:()=>s,getValue:()=>l};c.getValue()>e?(e=c.getValue(),r=[],r.push(c.getKey())):c.getValue()===e&&r.push(c.getKey())}return ut.toIntArray(r)}getConfidence(e){return this.values.get(e)}}class ul extends Qr{constructor(e,r){super(e),this._isLeft=r}setRowNumbers(){for(let e of this.getCodewords())e!=null&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,e);let s=this.getBoundingBox(),l=this._isLeft?s.getTopLeft():s.getTopRight(),c=this._isLeft?s.getBottomLeft():s.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),p=this.imageRowToCodewordIndex(Math.trunc(c.getY())),y=-1,E=1,R=0;for(let P=d;P<p;P++){if(r[P]==null)continue;let D=r[P],z=D.getRowNumber()-y;if(z===0)R++;else if(z===1)E=Math.max(E,R),R=1,y=D.getRowNumber();else if(z<0||D.getRowNumber()>=e.getRowCount()||z>P)r[P]=null;else{let K;E>2?K=(E-2)*z:K=z;let ee=K>=P;for(let se=1;se<=K&&!ee;se++)ee=r[P-se]!=null;ee?r[P]=null:(y=D.getRowNumber(),R=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let r=new Int32Array(e.getRowCount());for(let s of this.getCodewords())if(s!=null){let l=s.getRowNumber();if(l>=r.length)continue;r[l]++}return r}adjustIncompleteIndicatorColumnRowNumbers(e){let r=this.getBoundingBox(),s=this._isLeft?r.getTopLeft():r.getTopRight(),l=this._isLeft?r.getBottomLeft():r.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),p=this.getCodewords(),y=-1;for(let E=c;E<d;E++){if(p[E]==null)continue;let R=p[E];R.setRowNumberAsRowIndicatorColumn();let P=R.getRowNumber()-y;P===0||(P===1?y=R.getRowNumber():R.getRowNumber()>=e.getRowCount()?p[E]=null:y=R.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),r=new bi,s=new bi,l=new bi,c=new bi;for(let p of e){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let y=p.getValue()%30,E=p.getRowNumber();switch(this._isLeft||(E+=2),E%3){case 0:s.setValue(y*3+1);break;case 1:c.setValue(y/3),l.setValue(y%3);break;case 2:r.setValue(y+1);break}}if(r.getValue().length===0||s.getValue().length===0||l.getValue().length===0||c.getValue().length===0||r.getValue()[0]<1||s.getValue()[0]+l.getValue()[0]<ut.MIN_ROWS_IN_BARCODE||s.getValue()[0]+l.getValue()[0]>ut.MAX_ROWS_IN_BARCODE)return null;let d=new Os(r.getValue()[0],s.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(e,d),d}removeIncorrectCodewords(e,r){for(let s=0;s<e.length;s++){let l=e[s];if(e[s]==null)continue;let c=l.getValue()%30,d=l.getRowNumber();if(d>r.getRowCount()){e[s]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:c*3+1!==r.getRowCountUpperPart()&&(e[s]=null);break;case 1:(Math.trunc(c/3)!==r.getErrorCorrectionLevel()||c%3!==r.getRowCountLowerPart())&&(e[s]=null);break;case 2:c+1!==r.getColumnCount()&&(e[s]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ds{constructor(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=ut.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let r=1;r<this.barcodeColumnCount+1;r++){let s=this.detectionResultColumns[r].getCodewords();for(let l=0;l<s.length;l++)s[l]!=null&&(s[l].hasValidRowNumber()||this.adjustRowNumbers(r,l,s))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let s=0;s<e.length;s++)if(e[s]!=null&&r[s]!=null&&e[s].getRowNumber()===r[s].getRowNumber())for(let l=1;l<=this.barcodeColumnCount;l++){let c=this.detectionResultColumns[l].getCodewords()[s];c!=null&&(c.setRowNumber(e[s].getRowNumber()),c.hasValidRowNumber()||(this.detectionResultColumns[l].getCodewords()[s]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let s=0;s<r.length;s++){if(r[s]==null)continue;let l=r[s].getRowNumber(),c=0;for(let d=this.barcodeColumnCount+1;d>0&&c<this.ADJUST_ROW_NUMBER_SKIP;d--){let p=this.detectionResultColumns[d].getCodewords()[s];p!=null&&(c=Ds.adjustRowNumberIfValid(l,c,p),p.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,r=this.detectionResultColumns[0].getCodewords();for(let s=0;s<r.length;s++){if(r[s]==null)continue;let l=r[s].getRowNumber(),c=0;for(let d=1;d<this.barcodeColumnCount+1&&c<this.ADJUST_ROW_NUMBER_SKIP;d++){let p=this.detectionResultColumns[d].getCodewords()[s];p!=null&&(c=Ds.adjustRowNumberIfValid(l,c,p),p.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,r,s){return s==null||s.hasValidRowNumber()||(s.isValidRowNumber(e)?(s.setRowNumber(e),r=0):++r),r}adjustRowNumbers(e,r,s){if(!this.detectionResultColumns[e-1])return;let l=s[r],c=this.detectionResultColumns[e-1].getCodewords(),d=c;this.detectionResultColumns[e+1]!=null&&(d=this.detectionResultColumns[e+1].getCodewords());let p=new Array(14);p[2]=c[r],p[3]=d[r],r>0&&(p[0]=s[r-1],p[4]=c[r-1],p[5]=d[r-1]),r>1&&(p[8]=s[r-2],p[10]=c[r-2],p[11]=d[r-2]),r<s.length-1&&(p[1]=s[r+1],p[6]=c[r+1],p[7]=d[r+1]),r<s.length-2&&(p[9]=s[r+2],p[12]=c[r+2],p[13]=d[r+2]);for(let y of p)if(Ds.adjustRowNumber(l,y))return}static adjustRowNumber(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,r){this.detectionResultColumns[e]=r}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let r=new ui;for(let s=0;s<e.getCodewords().length;s++){r.format("CW %3d:",s);for(let l=0;l<this.barcodeColumnCount+2;l++){if(this.detectionResultColumns[l]==null){r.format("    |   ");continue}let c=this.detectionResultColumns[l].getCodewords()[s];if(c==null){r.format("    |   ");continue}r.format(" %3d|%3d",c.getRowNumber(),c.getValue())}r.format("%n")}return r.toString()}}class Oi{constructor(e,r,s,l){this.rowNumber=Oi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(s),this.value=Math.trunc(l)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==Oi.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}Oi.BARCODE_ROW_UNKNOWN=-1;class zn{static initialize(){for(let e=0;e<ut.SYMBOL_TABLE.length;e++){let r=ut.SYMBOL_TABLE[e],s=r&1;for(let l=0;l<ut.BARS_IN_MODULE;l++){let c=0;for(;(r&1)===s;)c+=1,r>>=1;s=r&1,zn.RATIOS_TABLE[e]||(zn.RATIOS_TABLE[e]=new Array(ut.BARS_IN_MODULE)),zn.RATIOS_TABLE[e][ut.BARS_IN_MODULE-l-1]=Math.fround(c/ut.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let r=zn.getDecodedCodewordValue(zn.sampleBitCounts(e));return r!==-1?r:zn.getClosestDecodedValue(e)}static sampleBitCounts(e){let r=et.sum(e),s=new Int32Array(ut.BARS_IN_MODULE),l=0,c=0;for(let d=0;d<ut.MODULES_IN_CODEWORD;d++){let p=r/(2*ut.MODULES_IN_CODEWORD)+d*r/ut.MODULES_IN_CODEWORD;c+e[l]<=p&&(c+=e[l],l++),s[l]++}return s}static getDecodedCodewordValue(e){let r=zn.getBitValue(e);return ut.getCodeword(r)===-1?-1:r}static getBitValue(e){let r=0;for(let s=0;s<e.length;s++)for(let l=0;l<e[s];l++)r=r<<1|(s%2===0?1:0);return Math.trunc(r)}static getClosestDecodedValue(e){let r=et.sum(e),s=new Array(ut.BARS_IN_MODULE);if(r>1)for(let d=0;d<s.length;d++)s[d]=Math.fround(e[d]/r);let l=Et.MAX_VALUE,c=-1;this.bSymbolTableReady||zn.initialize();for(let d=0;d<zn.RATIOS_TABLE.length;d++){let p=0,y=zn.RATIOS_TABLE[d];for(let E=0;E<ut.BARS_IN_MODULE;E++){let R=Math.fround(y[E]-s[E]);if(p+=Math.fround(R*R),p>=l)break}p<l&&(l=p,c=ut.SYMBOL_TABLE[d])}return c}}zn.bSymbolTableReady=!1,zn.RATIOS_TABLE=new Array(ut.SYMBOL_TABLE.length).map(k=>new Array(ut.BARS_IN_MODULE));class po{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class ta{static parseLong(e,r=void 0){return parseInt(e,r)}}class di extends C{}di.kind="NullPointerException";class na{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,r,s){if(e==null)throw new di;if(r<0||r>e.length||s<0||r+s>e.length||r+s<0)throw new j;if(s===0)return;for(let l=0;l<s;l++)this.write(e[r+l])}flush(){}close(){}}class go extends C{}class dl extends na{constructor(e=32){if(super(),this.count=0,e<0)throw new T("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let s=this.buf.length<<1;if(s-e<0&&(s=e),s<0){if(e<0)throw new go;s=F.MAX_VALUE}this.buf=U.copyOfUint8Array(this.buf,s)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,r,s){if(r<0||r>e.length||s<0||r+s-e.length>0)throw new j;this.ensureCapacity(this.count+s),B.arraycopy(e,r,this.buf,this.count,s),this.count+=s}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return U.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var Vt;(function(k){k[k.ALPHA=0]="ALPHA",k[k.LOWER=1]="LOWER",k[k.MIXED=2]="MIXED",k[k.PUNCT=3]="PUNCT",k[k.ALPHA_SHIFT=4]="ALPHA_SHIFT",k[k.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Vt||(Vt={}));function Ls(){if(typeof window<"u")return window.BigInt||null;if(typeof lc<"u")return lc.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let js;function Sn(k){if(typeof js>"u"&&(js=Ls()),js===null)throw new Error("BigInt is not supported!");return js(k)}function is(){let k=[];k[0]=Sn(1);let e=Sn(900);k[1]=e;for(let r=2;r<16;r++)k[r]=k[r-1]*e;return k}class he{static decode(e,r){let s=new Te(""),l=te.ISO8859_1;s.enableDecoding(l);let c=1,d=e[c++],p=new po;for(;c<e[0];){switch(d){case he.TEXT_COMPACTION_MODE_LATCH:c=he.textCompaction(e,c,s);break;case he.BYTE_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH_6:c=he.byteCompaction(d,e,l,c,s);break;case he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(e[c++]);break;case he.NUMERIC_COMPACTION_MODE_LATCH:c=he.numericCompaction(e,c,s);break;case he.ECI_CHARSET:te.getCharacterSetECIByValue(e[c++]);break;case he.ECI_GENERAL_PURPOSE:c+=2;break;case he.ECI_USER_DEFINED:c++;break;case he.BEGIN_MACRO_PDF417_CONTROL_BLOCK:c=he.decodeMacroBlock(e,c,p);break;case he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case he.MACRO_PDF417_TERMINATOR:throw new q;default:c--,c=he.textCompaction(e,c,s);break}if(c<e.length)d=e[c++];else throw q.getFormatInstance()}if(s.length()===0)throw q.getFormatInstance();let y=new Ae(null,s.toString(),null,r);return y.setOther(p),y}static decodeMacroBlock(e,r,s){if(r+he.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw q.getFormatInstance();let l=new Int32Array(he.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<he.NUMBER_OF_SEQUENCE_CODEWORDS;p++,r++)l[p]=e[r];s.setSegmentIndex(F.parseInt(he.decodeBase900toBase10(l,he.NUMBER_OF_SEQUENCE_CODEWORDS)));let c=new Te;r=he.textCompaction(e,r,c),s.setFileId(c.toString());let d=-1;for(e[r]===he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=r+1);r<e[0];)switch(e[r]){case he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case he.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new Te;r=he.textCompaction(e,r+1,p),s.setFileName(p.toString());break;case he.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let y=new Te;r=he.textCompaction(e,r+1,y),s.setSender(y.toString());break;case he.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let E=new Te;r=he.textCompaction(e,r+1,E),s.setAddressee(E.toString());break;case he.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let R=new Te;r=he.numericCompaction(e,r+1,R),s.setSegmentCount(F.parseInt(R.toString()));break;case he.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let P=new Te;r=he.numericCompaction(e,r+1,P),s.setTimestamp(ta.parseLong(P.toString()));break;case he.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let D=new Te;r=he.numericCompaction(e,r+1,D),s.setChecksum(F.parseInt(D.toString()));break;case he.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let z=new Te;r=he.numericCompaction(e,r+1,z),s.setFileSize(ta.parseLong(z.toString()));break;default:throw q.getFormatInstance()}break;case he.MACRO_PDF417_TERMINATOR:r++,s.setLastSegment(!0);break;default:throw q.getFormatInstance()}if(d!==-1){let p=r-d;s.isLastSegment()&&p--,s.setOptionalData(U.copyOfRange(e,d,d+p))}return r}static textCompaction(e,r,s){let l=new Int32Array((e[0]-r)*2),c=new Int32Array((e[0]-r)*2),d=0,p=!1;for(;r<e[0]&&!p;){let y=e[r++];if(y<he.TEXT_COMPACTION_MODE_LATCH)l[d]=y/30,l[d+1]=y%30,d+=2;else switch(y){case he.TEXT_COMPACTION_MODE_LATCH:l[d++]=he.TEXT_COMPACTION_MODE_LATCH;break;case he.BYTE_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH_6:case he.NUMERIC_COMPACTION_MODE_LATCH:case he.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case he.MACRO_PDF417_TERMINATOR:r--,p=!0;break;case he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l[d]=he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,y=e[r++],c[d]=y,d++;break}}return he.decodeTextCompaction(l,c,d,s),r}static decodeTextCompaction(e,r,s,l){let c=Vt.ALPHA,d=Vt.ALPHA,p=0;for(;p<s;){let y=e[p],E="";switch(c){case Vt.ALPHA:if(y<26)E=String.fromCharCode(65+y);else switch(y){case 26:E=" ";break;case he.LL:c=Vt.LOWER;break;case he.ML:c=Vt.MIXED;break;case he.PS:d=c,c=Vt.PUNCT_SHIFT;break;case he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[p]);break;case he.TEXT_COMPACTION_MODE_LATCH:c=Vt.ALPHA;break}break;case Vt.LOWER:if(y<26)E=String.fromCharCode(97+y);else switch(y){case 26:E=" ";break;case he.AS:d=c,c=Vt.ALPHA_SHIFT;break;case he.ML:c=Vt.MIXED;break;case he.PS:d=c,c=Vt.PUNCT_SHIFT;break;case he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[p]);break;case he.TEXT_COMPACTION_MODE_LATCH:c=Vt.ALPHA;break}break;case Vt.MIXED:if(y<he.PL)E=he.MIXED_CHARS[y];else switch(y){case he.PL:c=Vt.PUNCT;break;case 26:E=" ";break;case he.LL:c=Vt.LOWER;break;case he.AL:c=Vt.ALPHA;break;case he.PS:d=c,c=Vt.PUNCT_SHIFT;break;case he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[p]);break;case he.TEXT_COMPACTION_MODE_LATCH:c=Vt.ALPHA;break}break;case Vt.PUNCT:if(y<he.PAL)E=he.PUNCT_CHARS[y];else switch(y){case he.PAL:c=Vt.ALPHA;break;case he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[p]);break;case he.TEXT_COMPACTION_MODE_LATCH:c=Vt.ALPHA;break}break;case Vt.ALPHA_SHIFT:if(c=d,y<26)E=String.fromCharCode(65+y);else switch(y){case 26:E=" ";break;case he.TEXT_COMPACTION_MODE_LATCH:c=Vt.ALPHA;break}break;case Vt.PUNCT_SHIFT:if(c=d,y<he.PAL)E=he.PUNCT_CHARS[y];else switch(y){case he.PAL:c=Vt.ALPHA;break;case he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[p]);break;case he.TEXT_COMPACTION_MODE_LATCH:c=Vt.ALPHA;break}break}E!==""&&l.append(E),p++}}static byteCompaction(e,r,s,l,c){let d=new dl,p=0,y=0,E=!1;switch(e){case he.BYTE_COMPACTION_MODE_LATCH:let R=new Int32Array(6),P=r[l++];for(;l<r[0]&&!E;)switch(R[p++]=P,y=900*y+P,P=r[l++],P){case he.TEXT_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH:case he.NUMERIC_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH_6:case he.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case he.MACRO_PDF417_TERMINATOR:l--,E=!0;break;default:if(p%5===0&&p>0){for(let D=0;D<6;++D)d.write(Number(Sn(y)>>Sn(8*(5-D))));y=0,p=0}break}l===r[0]&&P<he.TEXT_COMPACTION_MODE_LATCH&&(R[p++]=P);for(let D=0;D<p;D++)d.write(R[D]);break;case he.BYTE_COMPACTION_MODE_LATCH_6:for(;l<r[0]&&!E;){let D=r[l++];if(D<he.TEXT_COMPACTION_MODE_LATCH)p++,y=900*y+D;else switch(D){case he.TEXT_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH:case he.NUMERIC_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH_6:case he.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case he.MACRO_PDF417_TERMINATOR:l--,E=!0;break}if(p%5===0&&p>0){for(let z=0;z<6;++z)d.write(Number(Sn(y)>>Sn(8*(5-z))));y=0,p=0}}break}return c.append(Oe.decode(d.toByteArray(),s)),l}static numericCompaction(e,r,s){let l=0,c=!1,d=new Int32Array(he.MAX_NUMERIC_CODEWORDS);for(;r<e[0]&&!c;){let p=e[r++];if(r===e[0]&&(c=!0),p<he.TEXT_COMPACTION_MODE_LATCH)d[l]=p,l++;else switch(p){case he.TEXT_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH_6:case he.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case he.MACRO_PDF417_TERMINATOR:r--,c=!0;break}(l%he.MAX_NUMERIC_CODEWORDS===0||p===he.NUMERIC_COMPACTION_MODE_LATCH||c)&&l>0&&(s.append(he.decodeBase900toBase10(d,l)),l=0)}return r}static decodeBase900toBase10(e,r){let s=Sn(0);for(let c=0;c<r;c++)s+=he.EXP900[r-c-1]*Sn(e[c]);let l=s.toString();if(l.charAt(0)!=="1")throw new q;return l.substring(1)}}he.TEXT_COMPACTION_MODE_LATCH=900,he.BYTE_COMPACTION_MODE_LATCH=901,he.NUMERIC_COMPACTION_MODE_LATCH=902,he.BYTE_COMPACTION_MODE_LATCH_6=924,he.ECI_USER_DEFINED=925,he.ECI_GENERAL_PURPOSE=926,he.ECI_CHARSET=927,he.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,he.MACRO_PDF417_TERMINATOR=922,he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,he.MAX_NUMERIC_CODEWORDS=15,he.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,he.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,he.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,he.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,he.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,he.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,he.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,he.PL=25,he.LL=27,he.AS=27,he.ML=28,he.AL=28,he.PS=29,he.PAL=29,he.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,he.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",he.EXP900=Ls()?is():[],he.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Nt{constructor(){}static decode(e,r,s,l,c,d,p){let y=new Mi(e,r,s,l,c),E=null,R=null,P;for(let K=!0;;K=!1){if(r!=null&&(E=Nt.getRowIndicatorColumn(e,y,r,!0,d,p)),l!=null&&(R=Nt.getRowIndicatorColumn(e,y,l,!1,d,p)),P=Nt.merge(E,R),P==null)throw X.getNotFoundInstance();let ee=P.getBoundingBox();if(K&&ee!=null&&(ee.getMinY()<y.getMinY()||ee.getMaxY()>y.getMaxY()))y=ee;else break}P.setBoundingBox(y);let D=P.getBarcodeColumnCount()+1;P.setDetectionResultColumn(0,E),P.setDetectionResultColumn(D,R);let z=E!=null;for(let K=1;K<=D;K++){let ee=z?K:D-K;if(P.getDetectionResultColumn(ee)!==void 0)continue;let se;ee===0||ee===D?se=new ul(y,ee===0):se=new Qr(y),P.setDetectionResultColumn(ee,se);let fe=-1,Be=fe;for(let Fe=y.getMinY();Fe<=y.getMaxY();Fe++){if(fe=Nt.getStartColumn(P,ee,Fe,z),fe<0||fe>y.getMaxX()){if(Be===-1)continue;fe=Be}let Pe=Nt.detectCodeword(e,y.getMinX(),y.getMaxX(),z,fe,Fe,d,p);Pe!=null&&(se.setCodeword(Fe,Pe),Be=fe,d=Math.min(d,Pe.getWidth()),p=Math.max(p,Pe.getWidth()))}}return Nt.createDecoderResult(P)}static merge(e,r){if(e==null&&r==null)return null;let s=Nt.getBarcodeMetadata(e,r);if(s==null)return null;let l=Mi.merge(Nt.adjustBoundingBox(e),Nt.adjustBoundingBox(r));return new Ds(s,l)}static adjustBoundingBox(e){if(e==null)return null;let r=e.getRowHeights();if(r==null)return null;let s=Nt.getMax(r),l=0;for(let p of r)if(l+=s-p,p>0)break;let c=e.getCodewords();for(let p=0;l>0&&c[p]==null;p++)l--;let d=0;for(let p=r.length-1;p>=0&&(d+=s-r[p],!(r[p]>0));p--);for(let p=c.length-1;d>0&&c[p]==null;p--)d--;return e.getBoundingBox().addMissingRows(l,d,e.isLeft())}static getMax(e){let r=-1;for(let s of e)r=Math.max(r,s);return r}static getBarcodeMetadata(e,r){let s;if(e==null||(s=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();let l;return r==null||(l=r.getBarcodeMetadata())==null?s:s.getColumnCount()!==l.getColumnCount()&&s.getErrorCorrectionLevel()!==l.getErrorCorrectionLevel()&&s.getRowCount()!==l.getRowCount()?null:s}static getRowIndicatorColumn(e,r,s,l,c,d){let p=new ul(r,l);for(let y=0;y<2;y++){let E=y===0?1:-1,R=Math.trunc(Math.trunc(s.getX()));for(let P=Math.trunc(Math.trunc(s.getY()));P<=r.getMaxY()&&P>=r.getMinY();P+=E){let D=Nt.detectCodeword(e,0,e.getWidth(),l,R,P,c,d);D!=null&&(p.setCodeword(P,D),l?R=D.getStartX():R=D.getEndX())}}return p}static adjustCodewordCount(e,r){let s=r[0][1],l=s.getValue(),c=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-Nt.getNumberOfECCodeWords(e.getBarcodeECLevel());if(l.length===0){if(c<1||c>ut.MAX_CODEWORDS_IN_BARCODE)throw X.getNotFoundInstance();s.setValue(c)}else l[0]!==c&&s.setValue(c)}static createDecoderResult(e){let r=Nt.createBarcodeMatrix(e);Nt.adjustCodewordCount(e,r);let s=new Array,l=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),c=[],d=new Array;for(let y=0;y<e.getBarcodeRowCount();y++)for(let E=0;E<e.getBarcodeColumnCount();E++){let R=r[y][E+1].getValue(),P=y*e.getBarcodeColumnCount()+E;R.length===0?s.push(P):R.length===1?l[P]=R[0]:(d.push(P),c.push(R))}let p=new Array(c.length);for(let y=0;y<p.length;y++)p[y]=c[y];return Nt.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),l,ut.toIntArray(s),ut.toIntArray(d),p)}static createDecoderResultFromAmbiguousValues(e,r,s,l,c){let d=new Int32Array(l.length),p=100;for(;p-- >0;){for(let y=0;y<d.length;y++)r[l[y]]=c[y][d[y]];try{return Nt.decodeCodewords(r,e,s)}catch(y){if(!(y instanceof O))throw y}if(d.length===0)throw O.getChecksumInstance();for(let y=0;y<d.length;y++)if(d[y]<c[y].length-1){d[y]++;break}else if(d[y]=0,y===d.length-1)throw O.getChecksumInstance()}throw O.getChecksumInstance()}static createBarcodeMatrix(e){let r=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let l=0;l<r.length;l++)for(let c=0;c<r[l].length;c++)r[l][c]=new bi;let s=0;for(let l of e.getDetectionResultColumns()){if(l!=null){for(let c of l.getCodewords())if(c!=null){let d=c.getRowNumber();if(d>=0){if(d>=r.length)continue;r[d][s].setValue(c.getValue())}}}s++}return r}static isValidBarcodeColumn(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1}static getStartColumn(e,r,s,l){let c=l?1:-1,d=null;if(Nt.isValidBarcodeColumn(e,r-c)&&(d=e.getDetectionResultColumn(r-c).getCodeword(s)),d!=null)return l?d.getEndX():d.getStartX();if(d=e.getDetectionResultColumn(r).getCodewordNearby(s),d!=null)return l?d.getStartX():d.getEndX();if(Nt.isValidBarcodeColumn(e,r-c)&&(d=e.getDetectionResultColumn(r-c).getCodewordNearby(s)),d!=null)return l?d.getEndX():d.getStartX();let p=0;for(;Nt.isValidBarcodeColumn(e,r-c);){r-=c;for(let y of e.getDetectionResultColumn(r).getCodewords())if(y!=null)return(l?y.getEndX():y.getStartX())+c*p*(y.getEndX()-y.getStartX());p++}return l?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,r,s,l,c,d,p,y){c=Nt.adjustCodewordStartColumn(e,r,s,l,c,d);let E=Nt.getModuleBitCount(e,r,s,l,c,d);if(E==null)return null;let R,P=et.sum(E);if(l)R=c+P;else{for(let K=0;K<E.length/2;K++){let ee=E[K];E[K]=E[E.length-1-K],E[E.length-1-K]=ee}R=c,c=R-P}if(!Nt.checkCodewordSkew(P,p,y))return null;let D=zn.getDecodedValue(E),z=ut.getCodeword(D);return z===-1?null:new Oi(c,R,Nt.getCodewordBucketNumber(D),z)}static getModuleBitCount(e,r,s,l,c,d){let p=c,y=new Int32Array(8),E=0,R=l?1:-1,P=l;for(;(l?p<s:p>=r)&&E<y.length;)e.get(p,d)===P?(y[E]++,p+=R):(E++,P=!P);return E===y.length||p===(l?s:r)&&E===y.length-1?y:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,r,s,l,c,d){let p=c,y=l?-1:1;for(let E=0;E<2;E++){for(;(l?p>=r:p<s)&&l===e.get(p,d);){if(Math.abs(c-p)>Nt.CODEWORD_SKEW_SIZE)return c;p+=y}y=-y,l=!l}return p}static checkCodewordSkew(e,r,s){return r-Nt.CODEWORD_SKEW_SIZE<=e&&e<=s+Nt.CODEWORD_SKEW_SIZE}static decodeCodewords(e,r,s){if(e.length===0)throw q.getFormatInstance();let l=1<<r+1,c=Nt.correctErrors(e,s,l);Nt.verifyCodewordCount(e,l);let d=he.decode(e,""+r);return d.setErrorsCorrected(c),d.setErasures(s.length),d}static correctErrors(e,r,s){if(r!=null&&r.length>s/2+Nt.MAX_ERRORS||s<0||s>Nt.MAX_EC_CODEWORDS)throw O.getChecksumInstance();return Nt.errorCorrection.decode(e,s,r)}static verifyCodewordCount(e,r){if(e.length<4)throw q.getFormatInstance();let s=e[0];if(s>e.length)throw q.getFormatInstance();if(s===0)if(r<e.length)e[0]=e.length-r;else throw q.getFormatInstance()}static getBitCountForCodeword(e){let r=new Int32Array(8),s=0,l=r.length-1;for(;!((e&1)!==s&&(s=e&1,l--,l<0));)r[l]++,e>>=1;return r}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return Nt.getCodewordBucketNumber(Nt.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let r=new ui;for(let s=0;s<e.length;s++){r.format("Row %2d: ",s);for(let l=0;l<e[s].length;l++){let c=e[s][l];c.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",c.getValue()[0],c.getConfidence(c.getValue()[0]))}r.format("%n")}return r.toString()}}Nt.CODEWORD_SKEW_SIZE=2,Nt.MAX_ERRORS=3,Nt.MAX_EC_CODEWORDS=512,Nt.errorCorrection=new ea;class Wn{decode(e,r=null){let s=Wn.decode(e,r,!1);if(s==null||s.length===0||s[0]==null)throw X.getNotFoundInstance();return s[0]}decodeMultiple(e,r=null){try{return Wn.decode(e,r,!0)}catch(s){throw s instanceof q||s instanceof O?X.getNotFoundInstance():s}}static decode(e,r,s){const l=new Array,c=ft.detectMultiple(e,r,s);for(const d of c.getPoints()){const p=Nt.decode(c.getBits(),d[4],d[5],d[6],d[7],Wn.getMinCodewordWidth(d),Wn.getMaxCodewordWidth(d)),y=new ve(p.getText(),p.getRawBytes(),void 0,d,$.PDF_417);y.putMetadata(ge.ERROR_CORRECTION_LEVEL,p.getECLevel());const E=p.getOther();E!=null&&y.putMetadata(ge.PDF417_EXTRA_METADATA,E),l.push(y)}return l.map(d=>d)}static getMaxWidth(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))}static getMinWidth(e,r){return e==null||r==null?F.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(Wn.getMaxWidth(e[0],e[4]),Wn.getMaxWidth(e[6],e[2])*ut.MODULES_IN_CODEWORD/ut.MODULES_IN_STOP_PATTERN),Math.max(Wn.getMaxWidth(e[1],e[5]),Wn.getMaxWidth(e[7],e[3])*ut.MODULES_IN_CODEWORD/ut.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(Wn.getMinWidth(e[0],e[4]),Wn.getMinWidth(e[6],e[2])*ut.MODULES_IN_CODEWORD/ut.MODULES_IN_STOP_PATTERN),Math.min(Wn.getMinWidth(e[1],e[5]),Wn.getMinWidth(e[7],e[3])*ut.MODULES_IN_CODEWORD/ut.MODULES_IN_STOP_PATTERN)))}reset(){}}class ss extends C{}ss.kind="ReaderException";class xo{constructor(e,r){this.verbose=e===!0,r&&this.setHints(r)}decode(e,r){return r&&this.setHints(r),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const r=!u(e)&&e.get(ne.TRY_HARDER)===!0,s=u(e)?null:e.get(ne.POSSIBLE_FORMATS),l=new Array;if(!u(s)){const c=s.some(d=>d===$.UPC_A||d===$.UPC_E||d===$.EAN_13||d===$.EAN_8||d===$.CODABAR||d===$.CODE_39||d===$.CODE_93||d===$.CODE_128||d===$.ITF||d===$.RSS_14||d===$.RSS_EXPANDED);c&&!r&&l.push(new Kr(e,this.verbose)),s.includes($.QR_CODE)&&l.push(new tn),s.includes($.DATA_MATRIX)&&l.push(new Er),s.includes($.AZTEC)&&l.push(new Bt),s.includes($.PDF_417)&&l.push(new Wn),c&&r&&l.push(new Kr(e,this.verbose))}l.length===0&&(r||l.push(new Kr(e,this.verbose)),l.push(new tn),l.push(new Er),l.push(new Bt),l.push(new Wn),r&&l.push(new Kr(e,this.verbose))),this.readers=l}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new ss("No readers where selected, nothing can be read.");for(const r of this.readers)try{return r.decode(e,this.hints)}catch(s){if(s instanceof ss)continue}throw new X("No MultiFormat Readers were able to detect the code.")}}class Bs extends Ce{constructor(e=null,r=500){const s=new xo;s.setHints(e),super(s,r)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class yo extends Ce{constructor(e=500){super(new Wn,e)}}class fl extends Ce{constructor(e=500){super(new tn,e)}}var ra;(function(k){k[k.ERROR_CORRECTION=0]="ERROR_CORRECTION",k[k.CHARACTER_SET=1]="CHARACTER_SET",k[k.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",k[k.MIN_SIZE=3]="MIN_SIZE",k[k.MAX_SIZE=4]="MAX_SIZE",k[k.MARGIN=5]="MARGIN",k[k.PDF417_COMPACT=6]="PDF417_COMPACT",k[k.PDF417_COMPACTION=7]="PDF417_COMPACTION",k[k.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",k[k.AZTEC_LAYERS=9]="AZTEC_LAYERS",k[k.QR_VERSION=10]="QR_VERSION"})(ra||(ra={}));var Rn=ra;class ia{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Ye(e,Int32Array.from([1])))}buildGenerator(e){const r=this.cachedGenerators;if(e>=r.length){let s=r[r.length-1];const l=this.field;for(let c=r.length;c<=e;c++){const d=s.multiply(new Ye(l,Int32Array.from([1,l.exp(c-1+l.getGeneratorBase())])));r.push(d),s=d}}return r[e]}encode(e,r){if(r===0)throw new T("No error correction bytes");const s=e.length-r;if(s<=0)throw new T("No data bytes provided");const l=this.buildGenerator(r),c=new Int32Array(s);B.arraycopy(e,0,c,0,s);let d=new Ye(this.field,c);d=d.multiplyByMonomial(r,1);const y=d.divide(l)[1].getCoefficients(),E=r-y.length;for(let R=0;R<E;R++)e[s+R]=0;B.arraycopy(y,0,e,s+E,y.length)}}class nn{constructor(){}static applyMaskPenaltyRule1(e){return nn.applyMaskPenaltyRule1Internal(e,!0)+nn.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let r=0;const s=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let d=0;d<c-1;d++){const p=s[d];for(let y=0;y<l-1;y++){const E=p[y];E===p[y+1]&&E===s[d+1][y]&&E===s[d+1][y+1]&&r++}}return nn.N2*r}static applyMaskPenaltyRule3(e){let r=0;const s=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let d=0;d<c;d++)for(let p=0;p<l;p++){const y=s[d];p+6<l&&y[p]===1&&y[p+1]===0&&y[p+2]===1&&y[p+3]===1&&y[p+4]===1&&y[p+5]===0&&y[p+6]===1&&(nn.isWhiteHorizontal(y,p-4,p)||nn.isWhiteHorizontal(y,p+7,p+11))&&r++,d+6<c&&s[d][p]===1&&s[d+1][p]===0&&s[d+2][p]===1&&s[d+3][p]===1&&s[d+4][p]===1&&s[d+5][p]===0&&s[d+6][p]===1&&(nn.isWhiteVertical(s,p,d-4,d)||nn.isWhiteVertical(s,p,d+7,d+11))&&r++}return r*nn.N3}static isWhiteHorizontal(e,r,s){r=Math.max(r,0),s=Math.min(s,e.length);for(let l=r;l<s;l++)if(e[l]===1)return!1;return!0}static isWhiteVertical(e,r,s,l){s=Math.max(s,0),l=Math.min(l,e.length);for(let c=s;c<l;c++)if(e[c][r]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let r=0;const s=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let y=0;y<c;y++){const E=s[y];for(let R=0;R<l;R++)E[R]===1&&r++}const d=e.getHeight()*e.getWidth();return Math.floor(Math.abs(r*2-d)*10/d)*nn.N4}static getDataMaskBit(e,r,s){let l,c;switch(e){case 0:l=s+r&1;break;case 1:l=s&1;break;case 2:l=r%3;break;case 3:l=(s+r)%3;break;case 4:l=Math.floor(s/2)+Math.floor(r/3)&1;break;case 5:c=s*r,l=(c&1)+c%3;break;case 6:c=s*r,l=(c&1)+c%3&1;break;case 7:c=s*r,l=c%3+(s+r&1)&1;break;default:throw new T("Invalid mask pattern: "+e)}return l===0}static applyMaskPenaltyRule1Internal(e,r){let s=0;const l=r?e.getHeight():e.getWidth(),c=r?e.getWidth():e.getHeight(),d=e.getArray();for(let p=0;p<l;p++){let y=0,E=-1;for(let R=0;R<c;R++){const P=r?d[p][R]:d[R][p];P===E?y++:(y>=5&&(s+=nn.N1+(y-5)),y=1,E=P)}y>=5&&(s+=nn.N1+(y-5))}return s}}nn.N1=3,nn.N2=3,nn.N3=40,nn.N4=10;class wo{constructor(e,r){this.width=e,this.height=r;const s=new Array(r);for(let l=0;l!==r;l++)s[l]=new Uint8Array(e);this.bytes=s}getHeight(){return this.height}getWidth(){return this.width}get(e,r){return this.bytes[r][e]}getArray(){return this.bytes}setNumber(e,r,s){this.bytes[r][e]=s}setBoolean(e,r,s){this.bytes[r][e]=s?1:0}clear(e){for(const r of this.bytes)U.fill(r,e)}equals(e){if(!(e instanceof wo))return!1;const r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(let s=0,l=this.height;s<l;++s){const c=this.bytes[s],d=r.bytes[s];for(let p=0,y=this.width;p<y;++p)if(c[p]!==d[p])return!1}return!0}toString(){const e=new Te;for(let r=0,s=this.height;r<s;++r){const l=this.bytes[r];for(let c=0,d=this.width;c<d;++c)switch(l[c]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class Di{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new Te;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Di.NUM_MASK_PATTERNS}}Di.NUM_MASK_PATTERNS=8;class qt extends C{}qt.kind="WriterException";class mt{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,r,s,l,c){mt.clearMatrix(c),mt.embedBasicPatterns(s,c),mt.embedTypeInfo(r,l,c),mt.maybeEmbedVersionInfo(s,c),mt.embedDataBits(e,l,c)}static embedBasicPatterns(e,r){mt.embedPositionDetectionPatternsAndSeparators(r),mt.embedDarkDotAtLeftBottomCorner(r),mt.maybeEmbedPositionAdjustmentPatterns(e,r),mt.embedTimingPatterns(r)}static embedTypeInfo(e,r,s){const l=new Z;mt.makeTypeInfoBits(e,r,l);for(let c=0,d=l.getSize();c<d;++c){const p=l.get(l.getSize()-1-c),y=mt.TYPE_INFO_COORDINATES[c],E=y[0],R=y[1];if(s.setBoolean(E,R,p),c<8){const P=s.getWidth()-c-1;s.setBoolean(P,8,p)}else{const D=s.getHeight()-7+(c-8);s.setBoolean(8,D,p)}}}static maybeEmbedVersionInfo(e,r){if(e.getVersionNumber()<7)return;const s=new Z;mt.makeVersionInfoBits(e,s);let l=6*3-1;for(let c=0;c<6;++c)for(let d=0;d<3;++d){const p=s.get(l);l--,r.setBoolean(c,r.getHeight()-11+d,p),r.setBoolean(r.getHeight()-11+d,c,p)}}static embedDataBits(e,r,s){let l=0,c=-1,d=s.getWidth()-1,p=s.getHeight()-1;for(;d>0;){for(d===6&&(d-=1);p>=0&&p<s.getHeight();){for(let y=0;y<2;++y){const E=d-y;if(!mt.isEmpty(s.get(E,p)))continue;let R;l<e.getSize()?(R=e.get(l),++l):R=!1,r!==255&&nn.getDataMaskBit(r,E,p)&&(R=!R),s.setBoolean(E,p,R)}p+=c}c=-c,p+=c,d-=2}if(l!==e.getSize())throw new qt("Not all bits consumed: "+l+"/"+e.getSize())}static findMSBSet(e){return 32-F.numberOfLeadingZeros(e)}static calculateBCHCode(e,r){if(r===0)throw new T("0 polynomial");const s=mt.findMSBSet(r);for(e<<=s-1;mt.findMSBSet(e)>=s;)e^=r<<mt.findMSBSet(e)-s;return e}static makeTypeInfoBits(e,r,s){if(!Di.isValidMaskPattern(r))throw new qt("Invalid mask pattern");const l=e.getBits()<<3|r;s.appendBits(l,5);const c=mt.calculateBCHCode(l,mt.TYPE_INFO_POLY);s.appendBits(c,10);const d=new Z;if(d.appendBits(mt.TYPE_INFO_MASK_PATTERN,15),s.xor(d),s.getSize()!==15)throw new qt("should not happen but we got: "+s.getSize())}static makeVersionInfoBits(e,r){r.appendBits(e.getVersionNumber(),6);const s=mt.calculateBCHCode(e.getVersionNumber(),mt.VERSION_INFO_POLY);if(r.appendBits(s,12),r.getSize()!==18)throw new qt("should not happen but we got: "+r.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let r=8;r<e.getWidth()-8;++r){const s=(r+1)%2;mt.isEmpty(e.get(r,6))&&e.setNumber(r,6,s),mt.isEmpty(e.get(6,r))&&e.setNumber(6,r,s)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new qt;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,r,s){for(let l=0;l<8;++l){if(!mt.isEmpty(s.get(e+l,r)))throw new qt;s.setNumber(e+l,r,0)}}static embedVerticalSeparationPattern(e,r,s){for(let l=0;l<7;++l){if(!mt.isEmpty(s.get(e,r+l)))throw new qt;s.setNumber(e,r+l,0)}}static embedPositionAdjustmentPattern(e,r,s){for(let l=0;l<5;++l){const c=mt.POSITION_ADJUSTMENT_PATTERN[l];for(let d=0;d<5;++d)s.setNumber(e+d,r+l,c[d])}}static embedPositionDetectionPattern(e,r,s){for(let l=0;l<7;++l){const c=mt.POSITION_DETECTION_PATTERN[l];for(let d=0;d<7;++d)s.setNumber(e+d,r+l,c[d])}}static embedPositionDetectionPatternsAndSeparators(e){const r=mt.POSITION_DETECTION_PATTERN[0].length;mt.embedPositionDetectionPattern(0,0,e),mt.embedPositionDetectionPattern(e.getWidth()-r,0,e),mt.embedPositionDetectionPattern(0,e.getWidth()-r,e);const s=8;mt.embedHorizontalSeparationPattern(0,s-1,e),mt.embedHorizontalSeparationPattern(e.getWidth()-s,s-1,e),mt.embedHorizontalSeparationPattern(0,e.getWidth()-s,e);const l=7;mt.embedVerticalSeparationPattern(l,0,e),mt.embedVerticalSeparationPattern(e.getHeight()-l-1,0,e),mt.embedVerticalSeparationPattern(l,e.getHeight()-l,e)}static maybeEmbedPositionAdjustmentPatterns(e,r){if(e.getVersionNumber()<2)return;const s=e.getVersionNumber()-1,l=mt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[s];for(let c=0,d=l.length;c!==d;c++){const p=l[c];if(p>=0)for(let y=0;y!==d;y++){const E=l[y];E>=0&&mt.isEmpty(r.get(E,p))&&mt.embedPositionAdjustmentPattern(E-2,p-2,r)}}}}mt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),mt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),mt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),mt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),mt.VERSION_INFO_POLY=7973,mt.TYPE_INFO_POLY=1335,mt.TYPE_INFO_MASK_PATTERN=21522;class Qc{constructor(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Jt{constructor(){}static calculateMaskPenalty(e){return nn.applyMaskPenaltyRule1(e)+nn.applyMaskPenaltyRule2(e)+nn.applyMaskPenaltyRule3(e)+nn.applyMaskPenaltyRule4(e)}static encode(e,r,s=null){let l=Jt.DEFAULT_BYTE_MODE_ENCODING;const c=s!==null&&s.get(Rn.CHARACTER_SET)!==void 0;c&&(l=s.get(Rn.CHARACTER_SET).toString());const d=this.chooseMode(e,l),p=new Z;if(d===Ue.BYTE&&(c||Jt.DEFAULT_BYTE_MODE_ENCODING!==l)){const Fe=te.getCharacterSetECIByName(l);Fe!==void 0&&this.appendECI(Fe,p)}this.appendModeInfo(d,p);const y=new Z;this.appendBytes(e,d,y,l);let E;if(s!==null&&s.get(Rn.QR_VERSION)!==void 0){const Fe=Number.parseInt(s.get(Rn.QR_VERSION).toString(),10);E=ot.getVersionForNumber(Fe);const Pe=this.calculateBitsNeeded(d,p,y,E);if(!this.willFit(Pe,E,r))throw new qt("Data too big for requested version")}else E=this.recommendVersion(r,d,p,y);const R=new Z;R.appendBitArray(p);const P=d===Ue.BYTE?y.getSizeInBytes():e.length;this.appendLengthInfo(P,E,d,R),R.appendBitArray(y);const D=E.getECBlocksForLevel(r),z=E.getTotalCodewords()-D.getTotalECCodewords();this.terminateBits(z,R);const K=this.interleaveWithECBytes(R,E.getTotalCodewords(),z,D.getNumBlocks()),ee=new Di;ee.setECLevel(r),ee.setMode(d),ee.setVersion(E);const se=E.getDimensionForVersion(),fe=new wo(se,se),Be=this.chooseMaskPattern(K,r,E,fe);return ee.setMaskPattern(Be),mt.buildMatrix(K,r,E,Be,fe),ee.setMatrix(fe),ee}static recommendVersion(e,r,s,l){const c=this.calculateBitsNeeded(r,s,l,ot.getVersionForNumber(1)),d=this.chooseVersion(c,e),p=this.calculateBitsNeeded(r,s,l,d);return this.chooseVersion(p,e)}static calculateBitsNeeded(e,r,s,l){return r.getSize()+e.getCharacterCountBits(l)+s.getSize()}static getAlphanumericCode(e){return e<Jt.ALPHANUMERIC_TABLE.length?Jt.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,r=null){if(te.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return Ue.KANJI;let s=!1,l=!1;for(let c=0,d=e.length;c<d;++c){const p=e.charAt(c);if(Jt.isDigit(p))s=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)l=!0;else return Ue.BYTE}return l?Ue.ALPHANUMERIC:s?Ue.NUMERIC:Ue.BYTE}static isOnlyDoubleByteKanji(e){let r;try{r=Oe.encode(e,te.SJIS)}catch{return!1}const s=r.length;if(s%2!==0)return!1;for(let l=0;l<s;l+=2){const c=r[l]&255;if((c<129||c>159)&&(c<224||c>235))return!1}return!0}static chooseMaskPattern(e,r,s,l){let c=Number.MAX_SAFE_INTEGER,d=-1;for(let p=0;p<Di.NUM_MASK_PATTERNS;p++){mt.buildMatrix(e,r,s,p,l);let y=this.calculateMaskPenalty(l);y<c&&(c=y,d=p)}return d}static chooseVersion(e,r){for(let s=1;s<=40;s++){const l=ot.getVersionForNumber(s);if(Jt.willFit(e,l,r))return l}throw new qt("Data too big")}static willFit(e,r,s){const l=r.getTotalCodewords(),d=r.getECBlocksForLevel(s).getTotalECCodewords(),p=l-d,y=(e+7)/8;return p>=y}static terminateBits(e,r){const s=e*8;if(r.getSize()>s)throw new qt("data bits cannot fit in the QR Code"+r.getSize()+" > "+s);for(let d=0;d<4&&r.getSize()<s;++d)r.appendBit(!1);const l=r.getSize()&7;if(l>0)for(let d=l;d<8;d++)r.appendBit(!1);const c=e-r.getSizeInBytes();for(let d=0;d<c;++d)r.appendBits(d&1?17:236,8);if(r.getSize()!==s)throw new qt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,r,s,l,c,d){if(l>=s)throw new qt("Block ID too large");const p=e%s,y=s-p,E=Math.floor(e/s),R=E+1,P=Math.floor(r/s),D=P+1,z=E-P,K=R-D;if(z!==K)throw new qt("EC bytes mismatch");if(s!==y+p)throw new qt("RS blocks mismatch");if(e!==(P+z)*y+(D+K)*p)throw new qt("Total bytes mismatch");l<y?(c[0]=P,d[0]=z):(c[0]=D,d[0]=K)}static interleaveWithECBytes(e,r,s,l){if(e.getSizeInBytes()!==s)throw new qt("Number of bits and data bytes does not match");let c=0,d=0,p=0;const y=new Array;for(let R=0;R<l;++R){const P=new Int32Array(1),D=new Int32Array(1);Jt.getNumDataBytesAndNumECBytesForBlockID(r,s,l,R,P,D);const z=P[0],K=new Uint8Array(z);e.toBytes(8*c,K,0,z);const ee=Jt.generateECBytes(K,D[0]);y.push(new Qc(K,ee)),d=Math.max(d,z),p=Math.max(p,ee.length),c+=P[0]}if(s!==c)throw new qt("Data bytes does not match offset");const E=new Z;for(let R=0;R<d;++R)for(const P of y){const D=P.getDataBytes();R<D.length&&E.appendBits(D[R],8)}for(let R=0;R<p;++R)for(const P of y){const D=P.getErrorCorrectionBytes();R<D.length&&E.appendBits(D[R],8)}if(r!==E.getSizeInBytes())throw new qt("Interleaving error: "+r+" and "+E.getSizeInBytes()+" differ.");return E}static generateECBytes(e,r){const s=e.length,l=new Int32Array(s+r);for(let d=0;d<s;d++)l[d]=e[d]&255;new ia(pe.QR_CODE_FIELD_256).encode(l,r);const c=new Uint8Array(r);for(let d=0;d<r;d++)c[d]=l[s+d];return c}static appendModeInfo(e,r){r.appendBits(e.getBits(),4)}static appendLengthInfo(e,r,s,l){const c=s.getCharacterCountBits(r);if(e>=1<<c)throw new qt(e+" is bigger than "+((1<<c)-1));l.appendBits(e,c)}static appendBytes(e,r,s,l){switch(r){case Ue.NUMERIC:Jt.appendNumericBytes(e,s);break;case Ue.ALPHANUMERIC:Jt.appendAlphanumericBytes(e,s);break;case Ue.BYTE:Jt.append8BitBytes(e,s,l);break;case Ue.KANJI:Jt.appendKanjiBytes(e,s);break;default:throw new qt("Invalid mode: "+r)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const r=Jt.getDigit(e);return r>=0&&r<=9}static appendNumericBytes(e,r){const s=e.length;let l=0;for(;l<s;){const c=Jt.getDigit(e.charAt(l));if(l+2<s){const d=Jt.getDigit(e.charAt(l+1)),p=Jt.getDigit(e.charAt(l+2));r.appendBits(c*100+d*10+p,10),l+=3}else if(l+1<s){const d=Jt.getDigit(e.charAt(l+1));r.appendBits(c*10+d,7),l+=2}else r.appendBits(c,4),l++}}static appendAlphanumericBytes(e,r){const s=e.length;let l=0;for(;l<s;){const c=Jt.getAlphanumericCode(e.charCodeAt(l));if(c===-1)throw new qt;if(l+1<s){const d=Jt.getAlphanumericCode(e.charCodeAt(l+1));if(d===-1)throw new qt;r.appendBits(c*45+d,11),l+=2}else r.appendBits(c,6),l++}}static append8BitBytes(e,r,s){let l;try{l=Oe.encode(e,s)}catch(c){throw new qt(c)}for(let c=0,d=l.length;c!==d;c++){const p=l[c];r.appendBits(p,8)}}static appendKanjiBytes(e,r){let s;try{s=Oe.encode(e,te.SJIS)}catch(c){throw new qt(c)}const l=s.length;for(let c=0;c<l;c+=2){const d=s[c]&255,p=s[c+1]&255,y=d<<8&4294967295|p;let E=-1;if(y>=33088&&y<=40956?E=y-33088:y>=57408&&y<=60351&&(E=y-49472),E===-1)throw new qt("Invalid byte sequence");const R=(E>>8)*192+(E&255);r.appendBits(R,13)}}static appendECI(e,r){r.appendBits(Ue.ECI.getBits(),4),r.appendBits(e.getValue(),8)}}Jt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Jt.DEFAULT_BYTE_MODE_ENCODING=te.UTF8.getName();class Li{write(e,r,s,l=null){if(e.length===0)throw new T("Found empty contents");if(r<0||s<0)throw new T("Requested dimensions are too small: "+r+"x"+s);let c=Wt.L,d=Li.QUIET_ZONE_SIZE;l!==null&&(l.get(Rn.ERROR_CORRECTION)!==void 0&&(c=Wt.fromString(l.get(Rn.ERROR_CORRECTION).toString())),l.get(Rn.MARGIN)!==void 0&&(d=Number.parseInt(l.get(Rn.MARGIN).toString(),10)));const p=Jt.encode(e,c,l);return this.renderResult(p,r,s,d)}writeToDom(e,r,s,l,c=null){typeof e=="string"&&(e=document.querySelector(e));const d=this.write(r,s,l,c);e&&e.appendChild(d)}renderResult(e,r,s,l){const c=e.getMatrix();if(c===null)throw new Ze;const d=c.getWidth(),p=c.getHeight(),y=d+l*2,E=p+l*2,R=Math.max(r,y),P=Math.max(s,E),D=Math.min(Math.floor(R/y),Math.floor(P/E)),z=Math.floor((R-d*D)/2),K=Math.floor((P-p*D)/2),ee=this.createSVGElement(R,P);for(let se=0,fe=K;se<p;se++,fe+=D)for(let Be=0,Fe=z;Be<d;Be++,Fe+=D)if(c.get(Be,se)===1){const Pe=this.createSvgRectElement(Fe,fe,D,D);ee.appendChild(Pe)}return ee}createSVGElement(e,r){const s=document.createElementNS(Li.SVG_NS,"svg");return s.setAttributeNS(null,"height",e.toString()),s.setAttributeNS(null,"width",r.toString()),s}createSvgRectElement(e,r,s,l){const c=document.createElementNS(Li.SVG_NS,"rect");return c.setAttributeNS(null,"x",e.toString()),c.setAttributeNS(null,"y",r.toString()),c.setAttributeNS(null,"height",s.toString()),c.setAttributeNS(null,"width",l.toString()),c.setAttributeNS(null,"fill","#000000"),c}}Li.QUIET_ZONE_SIZE=4,Li.SVG_NS="http://www.w3.org/2000/svg";class os{encode(e,r,s,l,c){if(e.length===0)throw new T("Found empty contents");if(r!==$.QR_CODE)throw new T("Can only encode QR_CODE, but got "+r);if(s<0||l<0)throw new T(`Requested dimensions are too small: ${s}x${l}`);let d=Wt.L,p=os.QUIET_ZONE_SIZE;c!==null&&(c.get(Rn.ERROR_CORRECTION)!==void 0&&(d=Wt.fromString(c.get(Rn.ERROR_CORRECTION).toString())),c.get(Rn.MARGIN)!==void 0&&(p=Number.parseInt(c.get(Rn.MARGIN).toString(),10)));const y=Jt.encode(e,d,c);return os.renderResult(y,s,l,p)}static renderResult(e,r,s,l){const c=e.getMatrix();if(c===null)throw new Ze;const d=c.getWidth(),p=c.getHeight(),y=d+l*2,E=p+l*2,R=Math.max(r,y),P=Math.max(s,E),D=Math.min(Math.floor(R/y),Math.floor(P/E)),z=Math.floor((R-d*D)/2),K=Math.floor((P-p*D)/2),ee=new be(R,P);for(let se=0,fe=K;se<p;se++,fe+=D)for(let Be=0,Fe=z;Be<d;Be++,Fe+=D)c.get(Be,se)===1&&ee.setRegion(Fe,fe,D,D);return ee}}os.QUIET_ZONE_SIZE=4;class Jc{encode(e,r,s,l,c){let d;switch(r){case $.QR_CODE:d=new os;break;default:throw new T("No encoder available for format "+r)}return d.encode(e,r,s,l,c)}}class Jr extends xe{constructor(e,r,s,l,c,d,p,y){if(super(d,p),this.yuvData=e,this.dataWidth=r,this.dataHeight=s,this.left=l,this.top=c,l+d>r||c+p>s)throw new T("Crop rectangle does not fit within image data.");y&&this.reverseHorizontal(d,p)}getRow(e,r){if(e<0||e>=this.getHeight())throw new T("Requested row is outside the image: "+e);const s=this.getWidth();(r==null||r.length<s)&&(r=new Uint8ClampedArray(s));const l=(e+this.top)*this.dataWidth+this.left;return B.arraycopy(this.yuvData,l,r,0,s),r}getMatrix(){const e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.yuvData;const s=e*r,l=new Uint8ClampedArray(s);let c=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return B.arraycopy(this.yuvData,c,l,0,s),l;for(let d=0;d<r;d++){const p=d*e;B.arraycopy(this.yuvData,c,l,p,e),c+=this.dataWidth}return l}isCropSupported(){return!0}crop(e,r,s,l){return new Jr(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+r,s,l,!1)}renderThumbnail(){const e=this.getWidth()/Jr.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/Jr.THUMBNAIL_SCALE_FACTOR,s=new Int32Array(e*r),l=this.yuvData;let c=this.top*this.dataWidth+this.left;for(let d=0;d<r;d++){const p=d*e;for(let y=0;y<e;y++){const E=l[c+y*Jr.THUMBNAIL_SCALE_FACTOR]&255;s[p+y]=4278190080|E*65793}c+=this.dataWidth*Jr.THUMBNAIL_SCALE_FACTOR}return s}getThumbnailWidth(){return this.getWidth()/Jr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Jr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,r){const s=this.yuvData;for(let l=0,c=this.top*this.dataWidth+this.left;l<r;l++,c+=this.dataWidth){const d=c+e/2;for(let p=c,y=c+e-1;p<d;p++,y--){const E=s[p];s[p]=s[y],s[y]=E}}}invert(){return new _e(this)}}Jr.THUMBNAIL_SCALE_FACTOR=2;class Fs extends xe{constructor(e,r,s,l,c,d,p){if(super(r,s),this.dataWidth=l,this.dataHeight=c,this.left=d,this.top=p,e.BYTES_PER_ELEMENT===4){const y=r*s,E=new Uint8ClampedArray(y);for(let R=0;R<y;R++){const P=e[R],D=P>>16&255,z=P>>7&510,K=P&255;E[R]=(D+z+K)/4&255}this.luminances=E}else this.luminances=e;if(l===void 0&&(this.dataWidth=r),c===void 0&&(this.dataHeight=s),d===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+r>this.dataWidth||this.top+s>this.dataHeight)throw new T("Crop rectangle does not fit within image data.")}getRow(e,r){if(e<0||e>=this.getHeight())throw new T("Requested row is outside the image: "+e);const s=this.getWidth();(r==null||r.length<s)&&(r=new Uint8ClampedArray(s));const l=(e+this.top)*this.dataWidth+this.left;return B.arraycopy(this.luminances,l,r,0,s),r}getMatrix(){const e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.luminances;const s=e*r,l=new Uint8ClampedArray(s);let c=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return B.arraycopy(this.luminances,c,l,0,s),l;for(let d=0;d<r;d++){const p=d*e;B.arraycopy(this.luminances,c,l,p,e),c+=this.dataWidth}return l}isCropSupported(){return!0}crop(e,r,s,l){return new Fs(this.luminances,s,l,this.dataWidth,this.dataHeight,this.left+e,this.top+r)}invert(){return new _e(this)}}class hl extends te{static forName(e){return this.getCharacterSetECIByName(e)}}class sa{}sa.ISO_8859_1=te.ISO8859_1;class ml{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class oa{static singletonList(e){return[e]}static min(e,r){return e.sort(r)[0]}}class eu{constructor(e){this.previous=e}getPrevious(){return this.previous}}class as extends eu{constructor(e,r,s){super(e),this.value=r,this.bitCount=s}appendTo(e,r){e.appendBits(this.value,this.bitCount)}add(e,r){return new as(this,e,r)}addBinaryShift(e,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new as(this,e,r)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+F.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class aa extends as{constructor(e,r,s){super(e,0,0),this.binaryShiftStart=r,this.binaryShiftByteCount=s}appendTo(e,r){for(let s=0;s<this.binaryShiftByteCount;s++)(s===0||s===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):s===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(r[this.binaryShiftStart+s],8)}addBinaryShift(e,r){return new aa(this,e,r)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function tu(k,e,r){return new aa(k,e,r)}function Vs(k,e,r){return new as(k,e,r)}const nu=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ei=0,ls=1,Kn=2,pl=3,Gr=4,gl=new as(null,0,0),vo=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function xl(k){for(let e of k)U.fill(e,-1);return k[Ei][Gr]=0,k[ls][Gr]=0,k[ls][Ei]=28,k[pl][Gr]=0,k[Kn][Gr]=0,k[Kn][Ei]=15,k}const la=xl(U.createInt32Array(6,6));class or{constructor(e,r,s,l){this.token=e,this.mode=r,this.binaryShiftByteCount=s,this.bitCount=l}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,r){let s=this.bitCount,l=this.token;if(e!==this.mode){let d=vo[this.mode][e];l=Vs(l,d&65535,d>>16),s+=d>>16}let c=e===Kn?4:5;return l=Vs(l,r,c),new or(l,e,0,s+c)}shiftAndAppend(e,r){let s=this.token,l=this.mode===Kn?4:5;return s=Vs(s,la[this.mode][e],l),s=Vs(s,r,5),new or(s,this.mode,0,this.bitCount+l+5)}addBinaryShiftChar(e){let r=this.token,s=this.mode,l=this.bitCount;if(this.mode===Gr||this.mode===Kn){let p=vo[s][Ei];r=Vs(r,p&65535,p>>16),l+=p>>16,s=Ei}let c=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new or(r,s,this.binaryShiftByteCount+1,l+c);return d.binaryShiftByteCount===2078&&(d=d.endBinaryShift(e+1)),d}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let r=this.token;return r=tu(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new or(r,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let r=this.bitCount+(vo[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=or.calculateBinaryShiftCost(e)-or.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount}toBitArray(e){let r=[];for(let l=this.endBinaryShift(e.length).token;l!==null;l=l.getPrevious())r.unshift(l);let s=new Z;for(const l of r)l.appendTo(s,e);return s}toString(){return Se.format("%s bits=%d bytes=%d",nu[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}or.INITIAL_STATE=new or(gl,Ei,0,0);function ru(k){const e=Se.getCharCode(" "),r=Se.getCharCode("."),s=Se.getCharCode(",");k[Ei][e]=1;const l=Se.getCharCode("Z"),c=Se.getCharCode("A");for(let D=c;D<=l;D++)k[Ei][D]=D-c+2;k[ls][e]=1;const d=Se.getCharCode("z"),p=Se.getCharCode("a");for(let D=p;D<=d;D++)k[ls][D]=D-p+2;k[Kn][e]=1;const y=Se.getCharCode("9"),E=Se.getCharCode("0");for(let D=E;D<=y;D++)k[Kn][D]=D-E+2;k[Kn][s]=12,k[Kn][r]=13;const R=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let D=0;D<R.length;D++)k[pl][Se.getCharCode(R[D])]=D;const P=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let D=0;D<P.length;D++)Se.getCharCode(P[D])>0&&(k[Gr][Se.getCharCode(P[D])]=D);return k}const ca=ru(U.createInt32Array(5,256));class Us{constructor(e){this.text=e}encode(){const e=Se.getCharCode(" "),r=Se.getCharCode(`
`);let s=oa.singletonList(or.INITIAL_STATE);for(let c=0;c<this.text.length;c++){let d,p=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case Se.getCharCode("\r"):d=p===r?2:0;break;case Se.getCharCode("."):d=p===e?3:0;break;case Se.getCharCode(","):d=p===e?4:0;break;case Se.getCharCode(":"):d=p===e?5:0;break;default:d=0}d>0?(s=Us.updateStateListForPair(s,c,d),c++):s=this.updateStateListForChar(s,c)}return oa.min(s,(c,d)=>c.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,r){const s=[];for(let l of e)this.updateStateForChar(l,r,s);return Us.simplifyStates(s)}updateStateForChar(e,r,s){let l=this.text[r]&255,c=ca[e.getMode()][l]>0,d=null;for(let p=0;p<=Gr;p++){let y=ca[p][l];if(y>0){if(d==null&&(d=e.endBinaryShift(r)),!c||p===e.getMode()||p===Kn){const E=d.latchAndAppend(p,y);s.push(E)}if(!c&&la[e.getMode()][p]>=0){const E=d.shiftAndAppend(p,y);s.push(E)}}}if(e.getBinaryShiftByteCount()>0||ca[e.getMode()][l]===0){let p=e.addBinaryShiftChar(r);s.push(p)}}static updateStateListForPair(e,r,s){const l=[];for(let c of e)this.updateStateForPair(c,r,s,l);return this.simplifyStates(l)}static updateStateForPair(e,r,s,l){let c=e.endBinaryShift(r);if(l.push(c.latchAndAppend(Gr,s)),e.getMode()!==Gr&&l.push(c.shiftAndAppend(Gr,s)),s===3||s===4){let d=c.latchAndAppend(Kn,16-s).latchAndAppend(Kn,1);l.push(d)}if(e.getBinaryShiftByteCount()>0){let d=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);l.push(d)}}static simplifyStates(e){let r=[];for(const s of e){let l=!0;for(const c of r){if(c.isBetterThanOrEqualTo(s)){l=!1;break}s.isBetterThanOrEqualTo(c)&&(r=r.filter(d=>d!==c))}l&&r.push(s)}return r}}class Lt{constructor(){}static encodeBytes(e){return Lt.encode(e,Lt.DEFAULT_EC_PERCENT,Lt.DEFAULT_AZTEC_LAYERS)}static encode(e,r,s){let l=new Us(e).encode(),c=F.truncDivision(l.getSize()*r,100)+11,d=l.getSize()+c,p,y,E,R,P;if(s!==Lt.DEFAULT_AZTEC_LAYERS){if(p=s<0,y=Math.abs(s),y>(p?Lt.MAX_NB_BITS_COMPACT:Lt.MAX_NB_BITS))throw new T(Se.format("Illegal value %s for layers",s));E=Lt.totalBitsInLayer(y,p),R=Lt.WORD_SIZE[y];let Pe=E-E%R;if(P=Lt.stuffBits(l,R),P.getSize()+c>Pe)throw new T("Data to large for user specified layer");if(p&&P.getSize()>R*64)throw new T("Data to large for user specified layer")}else{R=0,P=null;for(let Pe=0;;Pe++){if(Pe>Lt.MAX_NB_BITS)throw new T("Data too large for an Aztec code");if(p=Pe<=3,y=p?Pe+1:Pe,E=Lt.totalBitsInLayer(y,p),d>E)continue;(P==null||R!==Lt.WORD_SIZE[y])&&(R=Lt.WORD_SIZE[y],P=Lt.stuffBits(l,R));let Pt=E-E%R;if(!(p&&P.getSize()>R*64)&&P.getSize()+c<=Pt)break}}let D=Lt.generateCheckWords(P,E,R),z=P.getSize()/R,K=Lt.generateModeMessage(p,y,z),ee=(p?11:14)+y*4,se=new Int32Array(ee),fe;if(p){fe=ee;for(let Pe=0;Pe<se.length;Pe++)se[Pe]=Pe}else{fe=ee+1+2*F.truncDivision(F.truncDivision(ee,2)-1,15);let Pe=F.truncDivision(ee,2),Pt=F.truncDivision(fe,2);for(let St=0;St<Pe;St++){let pr=St+F.truncDivision(St,15);se[Pe-St-1]=Pt-pr-1,se[Pe+St]=Pt+pr+1}}let Be=new be(fe);for(let Pe=0,Pt=0;Pe<y;Pe++){let St=(y-Pe)*4+(p?9:12);for(let pr=0;pr<St;pr++){let Xr=pr*2;for(let kn=0;kn<2;kn++)D.get(Pt+Xr+kn)&&Be.set(se[Pe*2+kn],se[Pe*2+pr]),D.get(Pt+St*2+Xr+kn)&&Be.set(se[Pe*2+pr],se[ee-1-Pe*2-kn]),D.get(Pt+St*4+Xr+kn)&&Be.set(se[ee-1-Pe*2-kn],se[ee-1-Pe*2-pr]),D.get(Pt+St*6+Xr+kn)&&Be.set(se[ee-1-Pe*2-pr],se[Pe*2+kn])}Pt+=St*8}if(Lt.drawModeMessage(Be,p,fe,K),p)Lt.drawBullsEye(Be,F.truncDivision(fe,2),5);else{Lt.drawBullsEye(Be,F.truncDivision(fe,2),7);for(let Pe=0,Pt=0;Pe<F.truncDivision(ee,2)-1;Pe+=15,Pt+=16)for(let St=F.truncDivision(fe,2)&1;St<fe;St+=2)Be.set(F.truncDivision(fe,2)-Pt,St),Be.set(F.truncDivision(fe,2)+Pt,St),Be.set(St,F.truncDivision(fe,2)-Pt),Be.set(St,F.truncDivision(fe,2)+Pt)}let Fe=new ml;return Fe.setCompact(p),Fe.setSize(fe),Fe.setLayers(y),Fe.setCodeWords(z),Fe.setMatrix(Be),Fe}static drawBullsEye(e,r,s){for(let l=0;l<s;l+=2)for(let c=r-l;c<=r+l;c++)e.set(c,r-l),e.set(c,r+l),e.set(r-l,c),e.set(r+l,c);e.set(r-s,r-s),e.set(r-s+1,r-s),e.set(r-s,r-s+1),e.set(r+s,r-s),e.set(r+s,r-s+1),e.set(r+s,r+s-1)}static generateModeMessage(e,r,s){let l=new Z;return e?(l.appendBits(r-1,2),l.appendBits(s-1,6),l=Lt.generateCheckWords(l,28,4)):(l.appendBits(r-1,5),l.appendBits(s-1,11),l=Lt.generateCheckWords(l,40,4)),l}static drawModeMessage(e,r,s,l){let c=F.truncDivision(s,2);if(r)for(let d=0;d<7;d++){let p=c-3+d;l.get(d)&&e.set(p,c-5),l.get(d+7)&&e.set(c+5,p),l.get(20-d)&&e.set(p,c+5),l.get(27-d)&&e.set(c-5,p)}else for(let d=0;d<10;d++){let p=c-5+d+F.truncDivision(d,5);l.get(d)&&e.set(p,c-7),l.get(d+10)&&e.set(c+7,p),l.get(29-d)&&e.set(p,c+7),l.get(39-d)&&e.set(c-7,p)}}static generateCheckWords(e,r,s){let l=e.getSize()/s,c=new ia(Lt.getGF(s)),d=F.truncDivision(r,s),p=Lt.bitsToWords(e,s,d);c.encode(p,d-l);let y=r%s,E=new Z;E.appendBits(0,y);for(const R of Array.from(p))E.appendBits(R,s);return E}static bitsToWords(e,r,s){let l=new Int32Array(s),c,d;for(c=0,d=e.getSize()/r;c<d;c++){let p=0;for(let y=0;y<r;y++)p|=e.get(c*r+y)?1<<r-y-1:0;l[c]=p}return l}static getGF(e){switch(e){case 4:return pe.AZTEC_PARAM;case 6:return pe.AZTEC_DATA_6;case 8:return pe.AZTEC_DATA_8;case 10:return pe.AZTEC_DATA_10;case 12:return pe.AZTEC_DATA_12;default:throw new T("Unsupported word size "+e)}}static stuffBits(e,r){let s=new Z,l=e.getSize(),c=(1<<r)-2;for(let d=0;d<l;d+=r){let p=0;for(let y=0;y<r;y++)(d+y>=l||e.get(d+y))&&(p|=1<<r-1-y);(p&c)===c?(s.appendBits(p&c,r),d--):p&c?s.appendBits(p,r):(s.appendBits(p|1,r),d--)}return s}static totalBitsInLayer(e,r){return((r?88:112)+16*e)*e}}Lt.DEFAULT_EC_PERCENT=33,Lt.DEFAULT_AZTEC_LAYERS=0,Lt.MAX_NB_BITS=32,Lt.MAX_NB_BITS_COMPACT=4,Lt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class zs{encode(e,r,s,l){return this.encodeWithHints(e,r,s,l,null)}encodeWithHints(e,r,s,l,c){let d=sa.ISO_8859_1,p=Lt.DEFAULT_EC_PERCENT,y=Lt.DEFAULT_AZTEC_LAYERS;return c!=null&&(c.has(Rn.CHARACTER_SET)&&(d=hl.forName(c.get(Rn.CHARACTER_SET).toString())),c.has(Rn.ERROR_CORRECTION)&&(p=F.parseInt(c.get(Rn.ERROR_CORRECTION).toString())),c.has(Rn.AZTEC_LAYERS)&&(y=F.parseInt(c.get(Rn.AZTEC_LAYERS).toString()))),zs.encodeLayers(e,r,s,l,d,p,y)}static encodeLayers(e,r,s,l,c,d,p){if(r!==$.AZTEC)throw new T("Can only encode AZTEC, but got "+r);let y=Lt.encode(Se.getBytes(e,c),d,p);return zs.renderResult(y,s,l)}static renderResult(e,r,s){let l=e.getMatrix();if(l==null)throw new Ze;let c=l.getWidth(),d=l.getHeight(),p=Math.max(r,c),y=Math.max(s,d),E=Math.min(p/c,y/d),R=(p-c*E)/2,P=(y-d*E)/2,D=new be(p,y);for(let z=0,K=P;z<d;z++,K+=E)for(let ee=0,se=R;ee<c;ee++,se+=E)l.get(ee,z)&&D.setRegion(se,K,E,E);return D}}a.AbstractExpandedDecoder=ci,a.ArgumentException=A,a.ArithmeticException=ce,a.AztecCode=ml,a.AztecCodeReader=Bt,a.AztecCodeWriter=zs,a.AztecDecoder=Qe,a.AztecDetector=zt,a.AztecDetectorResult=tr,a.AztecEncoder=Lt,a.AztecHighLevelEncoder=Us,a.AztecPoint=_t,a.BarcodeFormat=$,a.Binarizer=L,a.BinaryBitmap=_,a.BitArray=Z,a.BitMatrix=be,a.BitSource=ts,a.BrowserAztecCodeReader=at,a.BrowserBarcodeReader=es,a.BrowserCodeReader=Ce,a.BrowserDatamatrixCodeReader=Jo,a.BrowserMultiFormatReader=Bs,a.BrowserPDF417Reader=yo,a.BrowserQRCodeReader=fl,a.BrowserQRCodeSvgWriter=Li,a.CharacterSetECI=te,a.ChecksumException=O,a.Code128Reader=le,a.Code39Reader=ct,a.DataMatrixDecodedBitStreamParser=br,a.DataMatrixReader=Er,a.DecodeHintType=ne,a.DecoderResult=Ae,a.DefaultGridSampler=ht,a.DetectorResult=vn,a.EAN13Reader=en,a.EncodeHintType=Rn,a.Exception=C,a.FormatException=q,a.GenericGF=pe,a.GenericGFPoly=Ye,a.GlobalHistogramBinarizer=Le,a.GridSampler=Rt,a.GridSamplerInstance=tt,a.HTMLCanvasElementLuminanceSource=Ee,a.HybridBinarizer=we,a.ITFReader=je,a.IllegalArgumentException=T,a.IllegalStateException=Ze,a.InvertedLuminanceSource=_e,a.LuminanceSource=xe,a.MathUtils=et,a.MultiFormatOneDReader=Kr,a.MultiFormatReader=xo,a.MultiFormatWriter=Jc,a.NotFoundException=X,a.OneDReader=Ie,a.PDF417DecodedBitStreamParser=he,a.PDF417DecoderErrorCorrection=ea,a.PDF417Reader=Wn,a.PDF417ResultMetadata=po,a.PerspectiveTransform=We,a.PlanarYUVLuminanceSource=Jr,a.QRCodeByteMatrix=wo,a.QRCodeDataMask=It,a.QRCodeDecodedBitStreamParser=Ge,a.QRCodeDecoderErrorCorrectionLevel=Wt,a.QRCodeDecoderFormatInformation=En,a.QRCodeEncoder=Jt,a.QRCodeEncoderQRCode=Di,a.QRCodeMaskUtil=nn,a.QRCodeMatrixUtil=mt,a.QRCodeMode=Ue,a.QRCodeReader=tn,a.QRCodeVersion=ot,a.QRCodeWriter=os,a.RGBLuminanceSource=Fs,a.RSS14Reader=Yt,a.RSSExpandedReader=Ne,a.ReaderException=ss,a.ReedSolomonDecoder=Tt,a.ReedSolomonEncoder=ia,a.ReedSolomonException=$e,a.Result=ve,a.ResultMetadataType=ge,a.ResultPoint=ze,a.StringUtils=Se,a.UnsupportedOperationException=ye,a.VideoInputDevice=Y,a.WhiteRectangleDetector=Xe,a.WriterException=qt,a.ZXingArrays=U,a.ZXingCharset=hl,a.ZXingInteger=F,a.ZXingStandardCharsets=sa,a.ZXingStringBuilder=Te,a.ZXingStringEncoding=Oe,a.ZXingSystem=B,a.createAbstractExpandedDecoder=Ji,Object.defineProperty(a,"__esModule",{value:!0})})}(La,La.exports)),La.exports}Tw();var Mf=function(){var t=function(i,a){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,m){u.__proto__=m}||function(u,m){for(var x in m)Object.prototype.hasOwnProperty.call(m,x)&&(u[x]=m[x])},t(i,a)};return function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");t(i,a);function u(){this.constructor=i}i.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}}(),Rp=function(){function t(i,a){this.name=i,this.track=a}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(i){var a={};a[this.name]=i;var u={advanced:[a]};return this.track.applyConstraints(u)},t.prototype.value=function(){var i=this.track.getSettings();if(this.name in i){var a=i[this.name];return a}return null},t}(),_w=function(t){Mf(i,t);function i(a,u){return t.call(this,a,u)||this}return i.prototype.min=function(){return this.getCapabilities().min},i.prototype.max=function(){return this.getCapabilities().max},i.prototype.step=function(){return this.getCapabilities().step},i.prototype.apply=function(a){var u={};u[this.name]=a;var m={advanced:[u]};return this.track.applyConstraints(m)},i.prototype.getCapabilities=function(){this.failIfNotSupported();var a=this.track.getCapabilities(),u=a[this.name];return{min:u.min,max:u.max,step:u.step}},i.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},i}(Rp);(function(t){Mf(i,t);function i(a){return t.call(this,"zoom",a)||this}return i})(_w);(function(t){Mf(i,t);function i(a){return t.call(this,"torch",a)||this}return i})(Rp);var L1;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(L1||(L1={}));var Rw=function(){var t=function(i,a){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,m){u.__proto__=m}||function(u,m){for(var x in m)Object.prototype.hasOwnProperty.call(m,x)&&(u[x]=m[x])},t(i,a)};return function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");t(i,a);function u(){this.constructor=i}i.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}}();(function(t){Rw(i,t);function i(){return t!==null&&t.apply(this,arguments)||this}return i.DEFAULT_WIDTH=300,i.DEFAULT_WIDTH_OFFSET=2,i.FILE_SCAN_MIN_HEIGHT=300,i.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,i.MIN_QR_BOX_SIZE=50,i.SHADED_LEFT=1,i.SHADED_RIGHT=2,i.SHADED_TOP=3,i.SHADED_BOTTOM=4,i.SHADED_REGION_ELEMENT_ID="qr-shaded-region",i.VERBOSE=!1,i.BORDER_SHADER_DEFAULT_COLOR="#ffffff",i.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",i})(Nw);var j1;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(j1||(j1={}));const kw=({user:t,onProfileClick:i})=>null,Of=N.createContext({});function nl(t){const i=N.useRef(null);return i.current===null&&(i.current=t()),i.current}const Df=typeof window<"u",Lf=Df?N.useLayoutEffect:N.useEffect,Hc=N.createContext(null);function jf(t,i){t.indexOf(i)===-1&&t.push(i)}function Bf(t,i){const a=t.indexOf(i);a>-1&&t.splice(a,1)}const $i=(t,i,a)=>a>i?i:a<t?t:a;let Ff=()=>{};const Zi={},kp=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Pp(t){return typeof t=="object"&&t!==null}const Mp=t=>/^0[^.\s]+$/u.test(t);function Vf(t){let i;return()=>(i===void 0&&(i=t()),i)}const li=t=>t,Pw=(t,i)=>a=>i(t(a)),rl=(...t)=>t.reduce(Pw),Ya=(t,i,a)=>{const u=i-t;return u===0?1:(a-t)/u};class Uf{constructor(){this.subscriptions=[]}add(i){return jf(this.subscriptions,i),()=>Bf(this.subscriptions,i)}notify(i,a,u){const m=this.subscriptions.length;if(m)if(m===1)this.subscriptions[0](i,a,u);else for(let x=0;x<m;x++){const w=this.subscriptions[x];w&&w(i,a,u)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ti=t=>t*1e3,_i=t=>t/1e3;function Op(t,i){return i?t*(1e3/i):0}const Dp=(t,i,a)=>(((1-3*a+3*i)*t+(3*a-6*i))*t+3*i)*t,Mw=1e-7,Ow=12;function Dw(t,i,a,u,m){let x,w,b=0;do w=i+(a-i)/2,x=Dp(w,u,m)-t,x>0?a=w:i=w;while(Math.abs(x)>Mw&&++b<Ow);return w}function il(t,i,a,u){if(t===i&&a===u)return li;const m=x=>Dw(x,0,1,t,a);return x=>x===0||x===1?x:Dp(m(x),i,u)}const Lp=t=>i=>i<=.5?t(2*i)/2:(2-t(2*(1-i)))/2,jp=t=>i=>1-t(1-i),Bp=il(.33,1.53,.69,.99),zf=jp(Bp),Fp=Lp(zf),Vp=t=>(t*=2)<1?.5*zf(t):.5*(2-Math.pow(2,-10*(t-1))),Wf=t=>1-Math.sin(Math.acos(t)),Up=jp(Wf),zp=Lp(Wf),Lw=il(.42,0,1,1),jw=il(0,0,.58,1),Wp=il(.42,0,.58,1),Bw=t=>Array.isArray(t)&&typeof t[0]!="number",Hp=t=>Array.isArray(t)&&typeof t[0]=="number",Fw={linear:li,easeIn:Lw,easeInOut:Wp,easeOut:jw,circIn:Wf,circInOut:zp,circOut:Up,backIn:zf,backInOut:Fp,backOut:Bp,anticipate:Vp},Vw=t=>typeof t=="string",B1=t=>{if(Hp(t)){Ff(t.length===4);const[i,a,u,m]=t;return il(i,a,u,m)}else if(Vw(t))return Fw[t];return t},fc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Uw(t,i){let a=new Set,u=new Set,m=!1,x=!1;const w=new WeakSet;let b={delta:0,timestamp:0,isProcessing:!1};function v(A){w.has(A)&&(C.schedule(A),t()),A(b)}const C={schedule:(A,T=!1,_=!1)=>{const L=_&&m?a:u;return T&&w.add(A),L.has(A)||L.add(A),A},cancel:A=>{u.delete(A),w.delete(A)},process:A=>{if(b=A,m){x=!0;return}m=!0,[a,u]=[u,a],a.forEach(v),a.clear(),m=!1,x&&(x=!1,C.process(A))}};return C}const zw=40;function Gp(t,i){let a=!1,u=!0;const m={delta:0,timestamp:0,isProcessing:!1},x=()=>a=!0,w=fc.reduce((F,Z)=>(F[Z]=Uw(x),F),{}),{setup:b,read:v,resolveKeyframes:C,preUpdate:A,update:T,preRender:_,render:O,postRender:L}=w,B=()=>{const F=Zi.useManualTiming?m.timestamp:performance.now();a=!1,Zi.useManualTiming||(m.delta=u?1e3/60:Math.max(Math.min(F-m.timestamp,zw),1)),m.timestamp=F,m.isProcessing=!0,b.process(m),v.process(m),C.process(m),A.process(m),T.process(m),_.process(m),O.process(m),L.process(m),m.isProcessing=!1,a&&i&&(u=!1,t(B))},j=()=>{a=!0,u=!0,m.isProcessing||t(B)};return{schedule:fc.reduce((F,Z)=>{const Q=w[Z];return F[Z]=(ne,q=!1,ie=!1)=>(a||j(),Q.schedule(ne,q,ie)),F},{}),cancel:F=>{for(let Z=0;Z<fc.length;Z++)w[fc[Z]].cancel(F)},state:m,steps:w}}const{schedule:sn,cancel:Ki,state:dr,steps:_d}=Gp(typeof requestAnimationFrame<"u"?requestAnimationFrame:li,!0);let Cc;function Ww(){Cc=void 0}const Vr={now:()=>(Cc===void 0&&Vr.set(dr.isProcessing||Zi.useManualTiming?dr.timestamp:performance.now()),Cc),set:t=>{Cc=t,queueMicrotask(Ww)}},Xp=t=>i=>typeof i=="string"&&i.startsWith(t),Hf=Xp("--"),Hw=Xp("var(--"),Gf=t=>Hw(t)?Gw.test(t.split("/*")[0].trim()):!1,Gw=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ko={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},$a={...Ko,transform:t=>$i(0,1,t)},hc={...Ko,default:1},Ba=t=>Math.round(t*1e5)/1e5,Xf=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Xw(t){return t==null}const Yw=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Yf=(t,i)=>a=>!!(typeof a=="string"&&Yw.test(a)&&a.startsWith(t)||i&&!Xw(a)&&Object.prototype.hasOwnProperty.call(a,i)),Yp=(t,i,a)=>u=>{if(typeof u!="string")return u;const[m,x,w,b]=u.match(Xf);return{[t]:parseFloat(m),[i]:parseFloat(x),[a]:parseFloat(w),alpha:b!==void 0?parseFloat(b):1}},$w=t=>$i(0,255,t),Rd={...Ko,transform:t=>Math.round($w(t))},ro={test:Yf("rgb","red"),parse:Yp("red","green","blue"),transform:({red:t,green:i,blue:a,alpha:u=1})=>"rgba("+Rd.transform(t)+", "+Rd.transform(i)+", "+Rd.transform(a)+", "+Ba($a.transform(u))+")"};function Zw(t){let i="",a="",u="",m="";return t.length>5?(i=t.substring(1,3),a=t.substring(3,5),u=t.substring(5,7),m=t.substring(7,9)):(i=t.substring(1,2),a=t.substring(2,3),u=t.substring(3,4),m=t.substring(4,5),i+=i,a+=a,u+=u,m+=m),{red:parseInt(i,16),green:parseInt(a,16),blue:parseInt(u,16),alpha:m?parseInt(m,16)/255:1}}const qd={test:Yf("#"),parse:Zw,transform:ro.transform},sl=t=>({test:i=>typeof i=="string"&&i.endsWith(t)&&i.split(" ").length===1,parse:parseFloat,transform:i=>`${i}${t}`}),Ss=sl("deg"),Ri=sl("%"),vt=sl("px"),Kw=sl("vh"),qw=sl("vw"),F1={...Ri,parse:t=>Ri.parse(t)/100,transform:t=>Ri.transform(t*100)},Bo={test:Yf("hsl","hue"),parse:Yp("hue","saturation","lightness"),transform:({hue:t,saturation:i,lightness:a,alpha:u=1})=>"hsla("+Math.round(t)+", "+Ri.transform(Ba(i))+", "+Ri.transform(Ba(a))+", "+Ba($a.transform(u))+")"},Bn={test:t=>ro.test(t)||qd.test(t)||Bo.test(t),parse:t=>ro.test(t)?ro.parse(t):Bo.test(t)?Bo.parse(t):qd.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ro.transform(t):Bo.transform(t),getAnimatableNone:t=>{const i=Bn.parse(t);return i.alpha=0,Bn.transform(i)}},Qw=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Jw(t){var i,a;return isNaN(t)&&typeof t=="string"&&(((i=t.match(Xf))==null?void 0:i.length)||0)+(((a=t.match(Qw))==null?void 0:a.length)||0)>0}const $p="number",Zp="color",ev="var",tv="var(",V1="${}",nv=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Za(t){const i=t.toString(),a=[],u={color:[],number:[],var:[]},m=[];let x=0;const b=i.replace(nv,v=>(Bn.test(v)?(u.color.push(x),m.push(Zp),a.push(Bn.parse(v))):v.startsWith(tv)?(u.var.push(x),m.push(ev),a.push(v)):(u.number.push(x),m.push($p),a.push(parseFloat(v))),++x,V1)).split(V1);return{values:a,split:b,indexes:u,types:m}}function Kp(t){return Za(t).values}function qp(t){const{split:i,types:a}=Za(t),u=i.length;return m=>{let x="";for(let w=0;w<u;w++)if(x+=i[w],m[w]!==void 0){const b=a[w];b===$p?x+=Ba(m[w]):b===Zp?x+=Bn.transform(m[w]):x+=m[w]}return x}}const rv=t=>typeof t=="number"?0:Bn.test(t)?Bn.getAnimatableNone(t):t;function iv(t){const i=Kp(t);return qp(t)(i.map(rv))}const Is={test:Jw,parse:Kp,createTransformer:qp,getAnimatableNone:iv};function kd(t,i,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?t+(i-t)*6*a:a<1/2?i:a<2/3?t+(i-t)*(2/3-a)*6:t}function sv({hue:t,saturation:i,lightness:a,alpha:u}){t/=360,i/=100,a/=100;let m=0,x=0,w=0;if(!i)m=x=w=a;else{const b=a<.5?a*(1+i):a+i-a*i,v=2*a-b;m=kd(v,b,t+1/3),x=kd(v,b,t),w=kd(v,b,t-1/3)}return{red:Math.round(m*255),green:Math.round(x*255),blue:Math.round(w*255),alpha:u}}function _c(t,i){return a=>a>0?i:t}const yn=(t,i,a)=>t+(i-t)*a,Pd=(t,i,a)=>{const u=t*t,m=a*(i*i-u)+u;return m<0?0:Math.sqrt(m)},ov=[qd,ro,Bo],av=t=>ov.find(i=>i.test(t));function U1(t){const i=av(t);if(!i)return!1;let a=i.parse(t);return i===Bo&&(a=sv(a)),a}const z1=(t,i)=>{const a=U1(t),u=U1(i);if(!a||!u)return _c(t,i);const m={...a};return x=>(m.red=Pd(a.red,u.red,x),m.green=Pd(a.green,u.green,x),m.blue=Pd(a.blue,u.blue,x),m.alpha=yn(a.alpha,u.alpha,x),ro.transform(m))},Qd=new Set(["none","hidden"]);function lv(t,i){return Qd.has(t)?a=>a<=0?t:i:a=>a>=1?i:t}function cv(t,i){return a=>yn(t,i,a)}function $f(t){return typeof t=="number"?cv:typeof t=="string"?Gf(t)?_c:Bn.test(t)?z1:fv:Array.isArray(t)?Qp:typeof t=="object"?Bn.test(t)?z1:uv:_c}function Qp(t,i){const a=[...t],u=a.length,m=t.map((x,w)=>$f(x)(x,i[w]));return x=>{for(let w=0;w<u;w++)a[w]=m[w](x);return a}}function uv(t,i){const a={...t,...i},u={};for(const m in a)t[m]!==void 0&&i[m]!==void 0&&(u[m]=$f(t[m])(t[m],i[m]));return m=>{for(const x in u)a[x]=u[x](m);return a}}function dv(t,i){const a=[],u={color:0,var:0,number:0};for(let m=0;m<i.values.length;m++){const x=i.types[m],w=t.indexes[x][u[x]],b=t.values[w]??0;a[m]=b,u[x]++}return a}const fv=(t,i)=>{const a=Is.createTransformer(i),u=Za(t),m=Za(i);return u.indexes.var.length===m.indexes.var.length&&u.indexes.color.length===m.indexes.color.length&&u.indexes.number.length>=m.indexes.number.length?Qd.has(t)&&!m.values.length||Qd.has(i)&&!u.values.length?lv(t,i):rl(Qp(dv(u,m),m.values),a):_c(t,i)};function Jp(t,i,a){return typeof t=="number"&&typeof i=="number"&&typeof a=="number"?yn(t,i,a):$f(t)(t,i)}const hv=t=>{const i=({timestamp:a})=>t(a);return{start:(a=!0)=>sn.update(i,a),stop:()=>Ki(i),now:()=>dr.isProcessing?dr.timestamp:Vr.now()}},eg=(t,i,a=10)=>{let u="";const m=Math.max(Math.round(i/a),2);for(let x=0;x<m;x++)u+=Math.round(t(x/(m-1))*1e4)/1e4+", ";return`linear(${u.substring(0,u.length-2)})`},Rc=2e4;function Zf(t){let i=0;const a=50;let u=t.next(i);for(;!u.done&&i<Rc;)i+=a,u=t.next(i);return i>=Rc?1/0:i}function mv(t,i=100,a){const u=a({...t,keyframes:[0,i]}),m=Math.min(Zf(u),Rc);return{type:"keyframes",ease:x=>u.next(m*x).value/i,duration:_i(m)}}const pv=5;function tg(t,i,a){const u=Math.max(i-pv,0);return Op(a-t(u),i-u)}const Tn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},W1=.001;function gv({duration:t=Tn.duration,bounce:i=Tn.bounce,velocity:a=Tn.velocity,mass:u=Tn.mass}){let m,x,w=1-i;w=$i(Tn.minDamping,Tn.maxDamping,w),t=$i(Tn.minDuration,Tn.maxDuration,_i(t)),w<1?(m=C=>{const A=C*w,T=A*t,_=A-a,O=Jd(C,w),L=Math.exp(-T);return W1-_/O*L},x=C=>{const T=C*w*t,_=T*a+a,O=Math.pow(w,2)*Math.pow(C,2)*t,L=Math.exp(-T),B=Jd(Math.pow(C,2),w);return(-m(C)+W1>0?-1:1)*((_-O)*L)/B}):(m=C=>{const A=Math.exp(-C*t),T=(C-a)*t+1;return-.001+A*T},x=C=>{const A=Math.exp(-C*t),T=(a-C)*(t*t);return A*T});const b=5/t,v=yv(m,x,b);if(t=Ti(t),isNaN(v))return{stiffness:Tn.stiffness,damping:Tn.damping,duration:t};{const C=Math.pow(v,2)*u;return{stiffness:C,damping:w*2*Math.sqrt(u*C),duration:t}}}const xv=12;function yv(t,i,a){let u=a;for(let m=1;m<xv;m++)u=u-t(u)/i(u);return u}function Jd(t,i){return t*Math.sqrt(1-i*i)}const wv=["duration","bounce"],vv=["stiffness","damping","mass"];function H1(t,i){return i.some(a=>t[a]!==void 0)}function Cv(t){let i={velocity:Tn.velocity,stiffness:Tn.stiffness,damping:Tn.damping,mass:Tn.mass,isResolvedFromDuration:!1,...t};if(!H1(t,vv)&&H1(t,wv))if(t.visualDuration){const a=t.visualDuration,u=2*Math.PI/(a*1.2),m=u*u,x=2*$i(.05,1,1-(t.bounce||0))*Math.sqrt(m);i={...i,mass:Tn.mass,stiffness:m,damping:x}}else{const a=gv(t);i={...i,...a,mass:Tn.mass},i.isResolvedFromDuration=!0}return i}function kc(t=Tn.visualDuration,i=Tn.bounce){const a=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:i}:t;let{restSpeed:u,restDelta:m}=a;const x=a.keyframes[0],w=a.keyframes[a.keyframes.length-1],b={done:!1,value:x},{stiffness:v,damping:C,mass:A,duration:T,velocity:_,isResolvedFromDuration:O}=Cv({...a,velocity:-_i(a.velocity||0)}),L=_||0,B=C/(2*Math.sqrt(v*A)),j=w-x,W=_i(Math.sqrt(v/A)),U=Math.abs(j)<5;u||(u=U?Tn.restSpeed.granular:Tn.restSpeed.default),m||(m=U?Tn.restDelta.granular:Tn.restDelta.default);let F;if(B<1){const Q=Jd(W,B);F=ne=>{const q=Math.exp(-B*W*ne);return w-q*((L+B*W*j)/Q*Math.sin(Q*ne)+j*Math.cos(Q*ne))}}else if(B===1)F=Q=>w-Math.exp(-W*Q)*(j+(L+W*j)*Q);else{const Q=W*Math.sqrt(B*B-1);F=ne=>{const q=Math.exp(-B*W*ne),ie=Math.min(Q*ne,300);return w-q*((L+B*W*j)*Math.sinh(ie)+Q*j*Math.cosh(ie))/Q}}const Z={calculatedDuration:O&&T||null,next:Q=>{const ne=F(Q);if(O)b.done=Q>=T;else{let q=Q===0?L:0;B<1&&(q=Q===0?Ti(L):tg(F,Q,ne));const ie=Math.abs(q)<=u,te=Math.abs(w-ne)<=m;b.done=ie&&te}return b.value=b.done?w:ne,b},toString:()=>{const Q=Math.min(Zf(Z),Rc),ne=eg(q=>Z.next(Q*q).value,Q,30);return Q+"ms "+ne},toTransition:()=>{}};return Z}kc.applyToOptions=t=>{const i=mv(t,100,kc);return t.ease=i.ease,t.duration=Ti(i.duration),t.type="keyframes",t};function ef({keyframes:t,velocity:i=0,power:a=.8,timeConstant:u=325,bounceDamping:m=10,bounceStiffness:x=500,modifyTarget:w,min:b,max:v,restDelta:C=.5,restSpeed:A}){const T=t[0],_={done:!1,value:T},O=ie=>b!==void 0&&ie<b||v!==void 0&&ie>v,L=ie=>b===void 0?v:v===void 0||Math.abs(b-ie)<Math.abs(v-ie)?b:v;let B=a*i;const j=T+B,W=w===void 0?j:w(j);W!==j&&(B=W-T);const U=ie=>-B*Math.exp(-ie/u),F=ie=>W+U(ie),Z=ie=>{const te=U(ie),ye=F(ie);_.done=Math.abs(te)<=C,_.value=_.done?W:ye};let Q,ne;const q=ie=>{O(_.value)&&(Q=ie,ne=kc({keyframes:[_.value,L(_.value)],velocity:tg(F,ie,_.value),damping:m,stiffness:x,restDelta:C,restSpeed:A}))};return q(0),{calculatedDuration:null,next:ie=>{let te=!1;return!ne&&Q===void 0&&(te=!0,Z(ie),q(ie)),Q!==void 0&&ie>=Q?ne.next(ie-Q):(!te&&Z(ie),_)}}}function bv(t,i,a){const u=[],m=a||Zi.mix||Jp,x=t.length-1;for(let w=0;w<x;w++){let b=m(t[w],t[w+1]);if(i){const v=Array.isArray(i)?i[w]||li:i;b=rl(v,b)}u.push(b)}return u}function ng(t,i,{clamp:a=!0,ease:u,mixer:m}={}){const x=t.length;if(Ff(x===i.length),x===1)return()=>i[0];if(x===2&&i[0]===i[1])return()=>i[1];const w=t[0]===t[1];t[0]>t[x-1]&&(t=[...t].reverse(),i=[...i].reverse());const b=bv(i,u,m),v=b.length,C=A=>{if(w&&A<t[0])return i[0];let T=0;if(v>1)for(;T<t.length-2&&!(A<t[T+1]);T++);const _=Ya(t[T],t[T+1],A);return b[T](_)};return a?A=>C($i(t[0],t[x-1],A)):C}function Ev(t,i){const a=t[t.length-1];for(let u=1;u<=i;u++){const m=Ya(0,i,u);t.push(yn(a,1,m))}}function Sv(t){const i=[0];return Ev(i,t.length-1),i}function Av(t,i){return t.map(a=>a*i)}function Nv(t,i){return t.map(()=>i||Wp).splice(0,t.length-1)}function Fa({duration:t=300,keyframes:i,times:a,ease:u="easeInOut"}){const m=Bw(u)?u.map(B1):B1(u),x={done:!1,value:i[0]},w=Av(a&&a.length===i.length?a:Sv(i),t),b=ng(w,i,{ease:Array.isArray(m)?m:Nv(i,m)});return{calculatedDuration:t,next:v=>(x.value=b(v),x.done=v>=t,x)}}const Iv=t=>t!==null;function Kf(t,{repeat:i,repeatType:a="loop"},u,m=1){const x=t.filter(Iv),b=m<0||i&&a!=="loop"&&i%2===1?0:x.length-1;return!b||u===void 0?x[b]:u}const Tv={decay:ef,inertia:ef,tween:Fa,keyframes:Fa,spring:kc};function rg(t){typeof t.type=="string"&&(t.type=Tv[t.type])}class qf{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(i=>{this.resolve=i})}notifyFinished(){this.resolve()}then(i,a){return this.finished.then(i,a)}}const _v=t=>t/100;class Gc extends qf{constructor(i){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var u,m;const{motionValue:a}=this.options;a&&a.updatedAt!==Vr.now()&&this.tick(Vr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(m=(u=this.options).onStop)==null||m.call(u))},this.options=i,this.initAnimation(),this.play(),i.autoplay===!1&&this.pause()}initAnimation(){const{options:i}=this;rg(i);const{type:a=Fa,repeat:u=0,repeatDelay:m=0,repeatType:x,velocity:w=0}=i;let{keyframes:b}=i;const v=a||Fa;v!==Fa&&typeof b[0]!="number"&&(this.mixKeyframes=rl(_v,Jp(b[0],b[1])),b=[0,100]);const C=v({...i,keyframes:b});x==="mirror"&&(this.mirroredGenerator=v({...i,keyframes:[...b].reverse(),velocity:-w})),C.calculatedDuration===null&&(C.calculatedDuration=Zf(C));const{calculatedDuration:A}=C;this.calculatedDuration=A,this.resolvedDuration=A+m,this.totalDuration=this.resolvedDuration*(u+1)-m,this.generator=C}updateTime(i){const a=Math.round(i-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=a}tick(i,a=!1){const{generator:u,totalDuration:m,mixKeyframes:x,mirroredGenerator:w,resolvedDuration:b,calculatedDuration:v}=this;if(this.startTime===null)return u.next(0);const{delay:C=0,keyframes:A,repeat:T,repeatType:_,repeatDelay:O,type:L,onUpdate:B,finalKeyframe:j}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,i):this.speed<0&&(this.startTime=Math.min(i-m/this.speed,this.startTime)),a?this.currentTime=i:this.updateTime(i);const W=this.currentTime-C*(this.playbackSpeed>=0?1:-1),U=this.playbackSpeed>=0?W<0:W>m;this.currentTime=Math.max(W,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=m);let F=this.currentTime,Z=u;if(T){const ie=Math.min(this.currentTime,m)/b;let te=Math.floor(ie),ye=ie%1;!ye&&ie>=1&&(ye=1),ye===1&&te--,te=Math.min(te,T+1),!!(te%2)&&(_==="reverse"?(ye=1-ye,O&&(ye-=O/b)):_==="mirror"&&(Z=w)),F=$i(0,1,ye)*b}const Q=U?{done:!1,value:A[0]}:Z.next(F);x&&(Q.value=x(Q.value));let{done:ne}=Q;!U&&v!==null&&(ne=this.playbackSpeed>=0?this.currentTime>=m:this.currentTime<=0);const q=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ne);return q&&L!==ef&&(Q.value=Kf(A,this.options,j,this.speed)),B&&B(Q.value),q&&this.finish(),Q}then(i,a){return this.finished.then(i,a)}get duration(){return _i(this.calculatedDuration)}get time(){return _i(this.currentTime)}set time(i){var a;i=Ti(i),this.currentTime=i,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=i:this.driver&&(this.startTime=this.driver.now()-i/this.playbackSpeed),(a=this.driver)==null||a.start(!1)}get speed(){return this.playbackSpeed}set speed(i){this.updateTime(Vr.now());const a=this.playbackSpeed!==i;this.playbackSpeed=i,a&&(this.time=_i(this.currentTime))}play(){var m,x;if(this.isStopped)return;const{driver:i=hv,startTime:a}=this.options;this.driver||(this.driver=i(w=>this.tick(w))),(x=(m=this.options).onPlay)==null||x.call(m);const u=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=u):this.holdTime!==null?this.startTime=u-this.holdTime:this.startTime||(this.startTime=a??u),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Vr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var i,a;this.notifyFinished(),this.teardown(),this.state="finished",(a=(i=this.options).onComplete)==null||a.call(i)}cancel(){var i,a;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(a=(i=this.options).onCancel)==null||a.call(i)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(i){return this.startTime=0,this.tick(i,!0)}attachTimeline(i){var a;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(a=this.driver)==null||a.stop(),i.observe(this)}}function Rv(t){for(let i=1;i<t.length;i++)t[i]??(t[i]=t[i-1])}const io=t=>t*180/Math.PI,tf=t=>{const i=io(Math.atan2(t[1],t[0]));return nf(i)},kv={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:tf,rotateZ:tf,skewX:t=>io(Math.atan(t[1])),skewY:t=>io(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},nf=t=>(t=t%360,t<0&&(t+=360),t),G1=tf,X1=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Y1=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Pv={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:X1,scaleY:Y1,scale:t=>(X1(t)+Y1(t))/2,rotateX:t=>nf(io(Math.atan2(t[6],t[5]))),rotateY:t=>nf(io(Math.atan2(-t[2],t[0]))),rotateZ:G1,rotate:G1,skewX:t=>io(Math.atan(t[4])),skewY:t=>io(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function rf(t){return t.includes("scale")?1:0}function sf(t,i){if(!t||t==="none")return rf(i);const a=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let u,m;if(a)u=Pv,m=a;else{const b=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);u=kv,m=b}if(!m)return rf(i);const x=u[i],w=m[1].split(",").map(Ov);return typeof x=="function"?x(w):w[x]}const Mv=(t,i)=>{const{transform:a="none"}=getComputedStyle(t);return sf(a,i)};function Ov(t){return parseFloat(t.trim())}const qo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Qo=new Set(qo),$1=t=>t===Ko||t===vt,Dv=new Set(["x","y","z"]),Lv=qo.filter(t=>!Dv.has(t));function jv(t){const i=[];return Lv.forEach(a=>{const u=t.getValue(a);u!==void 0&&(i.push([a,u.get()]),u.set(a.startsWith("scale")?1:0))}),i}const oo={width:({x:t},{paddingLeft:i="0",paddingRight:a="0"})=>t.max-t.min-parseFloat(i)-parseFloat(a),height:({y:t},{paddingTop:i="0",paddingBottom:a="0"})=>t.max-t.min-parseFloat(i)-parseFloat(a),top:(t,{top:i})=>parseFloat(i),left:(t,{left:i})=>parseFloat(i),bottom:({y:t},{top:i})=>parseFloat(i)+(t.max-t.min),right:({x:t},{left:i})=>parseFloat(i)+(t.max-t.min),x:(t,{transform:i})=>sf(i,"x"),y:(t,{transform:i})=>sf(i,"y")};oo.translateX=oo.x;oo.translateY=oo.y;const ao=new Set;let of=!1,af=!1,lf=!1;function ig(){if(af){const t=Array.from(ao).filter(u=>u.needsMeasurement),i=new Set(t.map(u=>u.element)),a=new Map;i.forEach(u=>{const m=jv(u);m.length&&(a.set(u,m),u.render())}),t.forEach(u=>u.measureInitialState()),i.forEach(u=>{u.render();const m=a.get(u);m&&m.forEach(([x,w])=>{var b;(b=u.getValue(x))==null||b.set(w)})}),t.forEach(u=>u.measureEndState()),t.forEach(u=>{u.suspendedScrollY!==void 0&&window.scrollTo(0,u.suspendedScrollY)})}af=!1,of=!1,ao.forEach(t=>t.complete(lf)),ao.clear()}function sg(){ao.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(af=!0)})}function Bv(){lf=!0,sg(),ig(),lf=!1}class Qf{constructor(i,a,u,m,x,w=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...i],this.onComplete=a,this.name=u,this.motionValue=m,this.element=x,this.isAsync=w}scheduleResolve(){this.state="scheduled",this.isAsync?(ao.add(this),of||(of=!0,sn.read(sg),sn.resolveKeyframes(ig))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:i,name:a,element:u,motionValue:m}=this;if(i[0]===null){const x=m==null?void 0:m.get(),w=i[i.length-1];if(x!==void 0)i[0]=x;else if(u&&a){const b=u.readValue(a,w);b!=null&&(i[0]=b)}i[0]===void 0&&(i[0]=w),m&&x===void 0&&m.set(i[0])}Rv(i)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(i=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,i),ao.delete(this)}cancel(){this.state==="scheduled"&&(ao.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Fv=t=>t.startsWith("--");function Vv(t,i,a){Fv(i)?t.style.setProperty(i,a):t.style[i]=a}const Uv=Vf(()=>window.ScrollTimeline!==void 0),zv={};function Wv(t,i){const a=Vf(t);return()=>zv[i]??a()}const og=Wv(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ja=([t,i,a,u])=>`cubic-bezier(${t}, ${i}, ${a}, ${u})`,Z1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ja([0,.65,.55,1]),circOut:ja([.55,0,1,.45]),backIn:ja([.31,.01,.66,-.59]),backOut:ja([.33,1.53,.69,.99])};function ag(t,i){if(t)return typeof t=="function"?og()?eg(t,i):"ease-out":Hp(t)?ja(t):Array.isArray(t)?t.map(a=>ag(a,i)||Z1.easeOut):Z1[t]}function Hv(t,i,a,{delay:u=0,duration:m=300,repeat:x=0,repeatType:w="loop",ease:b="easeOut",times:v}={},C=void 0){const A={[i]:a};v&&(A.offset=v);const T=ag(b,m);Array.isArray(T)&&(A.easing=T);const _={delay:u,duration:m,easing:Array.isArray(T)?"linear":T,fill:"both",iterations:x+1,direction:w==="reverse"?"alternate":"normal"};return C&&(_.pseudoElement=C),t.animate(A,_)}function lg(t){return typeof t=="function"&&"applyToOptions"in t}function Gv({type:t,...i}){return lg(t)&&og()?t.applyToOptions(i):(i.duration??(i.duration=300),i.ease??(i.ease="easeOut"),i)}class Xv extends qf{constructor(i){if(super(),this.finishedTime=null,this.isStopped=!1,!i)return;const{element:a,name:u,keyframes:m,pseudoElement:x,allowFlatten:w=!1,finalKeyframe:b,onComplete:v}=i;this.isPseudoElement=!!x,this.allowFlatten=w,this.options=i,Ff(typeof i.type!="string");const C=Gv(i);this.animation=Hv(a,u,m,C,x),C.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!x){const A=Kf(m,this.options,b,this.speed);this.updateMotionValue?this.updateMotionValue(A):Vv(a,u,A),this.animation.cancel()}v==null||v(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var i,a;(a=(i=this.animation).finish)==null||a.call(i)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:i}=this;i==="idle"||i==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var i,a;this.isPseudoElement||(a=(i=this.animation).commitStyles)==null||a.call(i)}get duration(){var a,u;const i=((u=(a=this.animation.effect)==null?void 0:a.getComputedTiming)==null?void 0:u.call(a).duration)||0;return _i(Number(i))}get time(){return _i(Number(this.animation.currentTime)||0)}set time(i){this.finishedTime=null,this.animation.currentTime=Ti(i)}get speed(){return this.animation.playbackRate}set speed(i){i<0&&(this.finishedTime=null),this.animation.playbackRate=i}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(i){this.animation.startTime=i}attachTimeline({timeline:i,observe:a}){var u;return this.allowFlatten&&((u=this.animation.effect)==null||u.updateTiming({easing:"linear"})),this.animation.onfinish=null,i&&Uv()?(this.animation.timeline=i,li):a(this)}}const cg={anticipate:Vp,backInOut:Fp,circInOut:zp};function Yv(t){return t in cg}function $v(t){typeof t.ease=="string"&&Yv(t.ease)&&(t.ease=cg[t.ease])}const K1=10;class Zv extends Xv{constructor(i){$v(i),rg(i),super(i),i.startTime&&(this.startTime=i.startTime),this.options=i}updateMotionValue(i){const{motionValue:a,onUpdate:u,onComplete:m,element:x,...w}=this.options;if(!a)return;if(i!==void 0){a.set(i);return}const b=new Gc({...w,autoplay:!1}),v=Ti(this.finishedTime??this.time);a.setWithVelocity(b.sample(v-K1).value,b.sample(v).value,K1),b.stop()}}const q1=(t,i)=>i==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Is.test(t)||t==="0")&&!t.startsWith("url("));function Kv(t){const i=t[0];if(t.length===1)return!0;for(let a=0;a<t.length;a++)if(t[a]!==i)return!0}function qv(t,i,a,u){const m=t[0];if(m===null)return!1;if(i==="display"||i==="visibility")return!0;const x=t[t.length-1],w=q1(m,i),b=q1(x,i);return!w||!b?!1:Kv(t)||(a==="spring"||lg(a))&&u}function cf(t){t.duration=0,t.type}const Qv=new Set(["opacity","clipPath","filter","transform"]),Jv=Vf(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function e3(t){var A;const{motionValue:i,name:a,repeatDelay:u,repeatType:m,damping:x,type:w}=t;if(!(((A=i==null?void 0:i.owner)==null?void 0:A.current)instanceof HTMLElement))return!1;const{onUpdate:v,transformTemplate:C}=i.owner.getProps();return Jv()&&a&&Qv.has(a)&&(a!=="transform"||!C)&&!v&&!u&&m!=="mirror"&&x!==0&&w!=="inertia"}const t3=40;class n3 extends qf{constructor({autoplay:i=!0,delay:a=0,type:u="keyframes",repeat:m=0,repeatDelay:x=0,repeatType:w="loop",keyframes:b,name:v,motionValue:C,element:A,...T}){var L;super(),this.stop=()=>{var B,j;this._animation&&(this._animation.stop(),(B=this.stopTimeline)==null||B.call(this)),(j=this.keyframeResolver)==null||j.cancel()},this.createdAt=Vr.now();const _={autoplay:i,delay:a,type:u,repeat:m,repeatDelay:x,repeatType:w,name:v,motionValue:C,element:A,...T},O=(A==null?void 0:A.KeyframeResolver)||Qf;this.keyframeResolver=new O(b,(B,j,W)=>this.onKeyframesResolved(B,j,_,!W),v,C,A),(L=this.keyframeResolver)==null||L.scheduleResolve()}onKeyframesResolved(i,a,u,m){this.keyframeResolver=void 0;const{name:x,type:w,velocity:b,delay:v,isHandoff:C,onUpdate:A}=u;this.resolvedAt=Vr.now(),qv(i,x,w,b)||((Zi.instantAnimations||!v)&&(A==null||A(Kf(i,u,a))),i[0]=i[i.length-1],cf(u),u.repeat=0);const _={startTime:m?this.resolvedAt?this.resolvedAt-this.createdAt>t3?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:a,...u,keyframes:i},O=!C&&e3(_)?new Zv({..._,element:_.motionValue.owner.current}):new Gc(_);O.finished.then(()=>this.notifyFinished()).catch(li),this.pendingTimeline&&(this.stopTimeline=O.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=O}get finished(){return this._animation?this.animation.finished:this._finished}then(i,a){return this.finished.finally(i).then(()=>{})}get animation(){var i;return this._animation||((i=this.keyframeResolver)==null||i.resume(),Bv()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(i){this.animation.time=i}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(i){this.animation.speed=i}get startTime(){return this.animation.startTime}attachTimeline(i){return this._animation?this.stopTimeline=this.animation.attachTimeline(i):this.pendingTimeline=i,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var i;this._animation&&this.animation.cancel(),(i=this.keyframeResolver)==null||i.cancel()}}const r3=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function i3(t){const i=r3.exec(t);if(!i)return[,];const[,a,u,m]=i;return[`--${a??u}`,m]}function ug(t,i,a=1){const[u,m]=i3(t);if(!u)return;const x=window.getComputedStyle(i).getPropertyValue(u);if(x){const w=x.trim();return kp(w)?parseFloat(w):w}return Gf(m)?ug(m,i,a+1):m}function Jf(t,i){return(t==null?void 0:t[i])??(t==null?void 0:t.default)??t}const dg=new Set(["width","height","top","left","right","bottom",...qo]),s3={test:t=>t==="auto",parse:t=>t},fg=t=>i=>i.test(t),hg=[Ko,vt,Ri,Ss,qw,Kw,s3],Q1=t=>hg.find(fg(t));function o3(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Mp(t):!0}const a3=new Set(["brightness","contrast","saturate","opacity"]);function l3(t){const[i,a]=t.slice(0,-1).split("(");if(i==="drop-shadow")return t;const[u]=a.match(Xf)||[];if(!u)return t;const m=a.replace(u,"");let x=a3.has(i)?1:0;return u!==a&&(x*=100),i+"("+x+m+")"}const c3=/\b([a-z-]*)\(.*?\)/gu,uf={...Is,getAnimatableNone:t=>{const i=t.match(c3);return i?i.map(l3).join(" "):t}},J1={...Ko,transform:Math.round},u3={rotate:Ss,rotateX:Ss,rotateY:Ss,rotateZ:Ss,scale:hc,scaleX:hc,scaleY:hc,scaleZ:hc,skew:Ss,skewX:Ss,skewY:Ss,distance:vt,translateX:vt,translateY:vt,translateZ:vt,x:vt,y:vt,z:vt,perspective:vt,transformPerspective:vt,opacity:$a,originX:F1,originY:F1,originZ:vt},eh={borderWidth:vt,borderTopWidth:vt,borderRightWidth:vt,borderBottomWidth:vt,borderLeftWidth:vt,borderRadius:vt,radius:vt,borderTopLeftRadius:vt,borderTopRightRadius:vt,borderBottomRightRadius:vt,borderBottomLeftRadius:vt,width:vt,maxWidth:vt,height:vt,maxHeight:vt,top:vt,right:vt,bottom:vt,left:vt,padding:vt,paddingTop:vt,paddingRight:vt,paddingBottom:vt,paddingLeft:vt,margin:vt,marginTop:vt,marginRight:vt,marginBottom:vt,marginLeft:vt,backgroundPositionX:vt,backgroundPositionY:vt,...u3,zIndex:J1,fillOpacity:$a,strokeOpacity:$a,numOctaves:J1},d3={...eh,color:Bn,backgroundColor:Bn,outlineColor:Bn,fill:Bn,stroke:Bn,borderColor:Bn,borderTopColor:Bn,borderRightColor:Bn,borderBottomColor:Bn,borderLeftColor:Bn,filter:uf,WebkitFilter:uf},mg=t=>d3[t];function pg(t,i){let a=mg(t);return a!==uf&&(a=Is),a.getAnimatableNone?a.getAnimatableNone(i):void 0}const f3=new Set(["auto","none","0"]);function h3(t,i,a){let u=0,m;for(;u<t.length&&!m;){const x=t[u];typeof x=="string"&&!f3.has(x)&&Za(x).values.length&&(m=t[u]),u++}if(m&&a)for(const x of i)t[x]=pg(a,m)}class m3 extends Qf{constructor(i,a,u,m,x){super(i,a,u,m,x,!0)}readKeyframes(){const{unresolvedKeyframes:i,element:a,name:u}=this;if(!a||!a.current)return;super.readKeyframes();for(let v=0;v<i.length;v++){let C=i[v];if(typeof C=="string"&&(C=C.trim(),Gf(C))){const A=ug(C,a.current);A!==void 0&&(i[v]=A),v===i.length-1&&(this.finalKeyframe=C)}}if(this.resolveNoneKeyframes(),!dg.has(u)||i.length!==2)return;const[m,x]=i,w=Q1(m),b=Q1(x);if(w!==b)if($1(w)&&$1(b))for(let v=0;v<i.length;v++){const C=i[v];typeof C=="string"&&(i[v]=parseFloat(C))}else oo[u]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:i,name:a}=this,u=[];for(let m=0;m<i.length;m++)(i[m]===null||o3(i[m]))&&u.push(m);u.length&&h3(i,u,a)}measureInitialState(){const{element:i,unresolvedKeyframes:a,name:u}=this;if(!i||!i.current)return;u==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=oo[u](i.measureViewportBox(),window.getComputedStyle(i.current)),a[0]=this.measuredOrigin;const m=a[a.length-1];m!==void 0&&i.getValue(u,m).jump(m,!1)}measureEndState(){var b;const{element:i,name:a,unresolvedKeyframes:u}=this;if(!i||!i.current)return;const m=i.getValue(a);m&&m.jump(this.measuredOrigin,!1);const x=u.length-1,w=u[x];u[x]=oo[a](i.measureViewportBox(),window.getComputedStyle(i.current)),w!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=w),(b=this.removedTransforms)!=null&&b.length&&this.removedTransforms.forEach(([v,C])=>{i.getValue(v).set(C)}),this.resolveNoneKeyframes()}}function gg(t,i,a){if(t instanceof EventTarget)return[t];if(typeof t=="string"){const m=document.querySelectorAll(t);return m?Array.from(m):[]}return Array.from(t)}const xg=(t,i)=>i&&typeof t=="number"?i.transform(t):t;function yg(t){return Pp(t)&&"offsetHeight"in t}const em=30,p3=t=>!isNaN(parseFloat(t)),Va={current:void 0};class g3{constructor(i,a={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=u=>{var x;const m=Vr.now();if(this.updatedAt!==m&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(u),this.current!==this.prev&&((x=this.events.change)==null||x.notify(this.current),this.dependents))for(const w of this.dependents)w.dirty()},this.hasAnimated=!1,this.setCurrent(i),this.owner=a.owner}setCurrent(i){this.current=i,this.updatedAt=Vr.now(),this.canTrackVelocity===null&&i!==void 0&&(this.canTrackVelocity=p3(this.current))}setPrevFrameValue(i=this.current){this.prevFrameValue=i,this.prevUpdatedAt=this.updatedAt}onChange(i){return this.on("change",i)}on(i,a){this.events[i]||(this.events[i]=new Uf);const u=this.events[i].add(a);return i==="change"?()=>{u(),sn.read(()=>{this.events.change.getSize()||this.stop()})}:u}clearListeners(){for(const i in this.events)this.events[i].clear()}attach(i,a){this.passiveEffect=i,this.stopPassiveEffect=a}set(i){this.passiveEffect?this.passiveEffect(i,this.updateAndNotify):this.updateAndNotify(i)}setWithVelocity(i,a,u){this.set(a),this.prev=void 0,this.prevFrameValue=i,this.prevUpdatedAt=this.updatedAt-u}jump(i,a=!0){this.updateAndNotify(i),this.prev=i,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var i;(i=this.events.change)==null||i.notify(this.current)}addDependent(i){this.dependents||(this.dependents=new Set),this.dependents.add(i)}removeDependent(i){this.dependents&&this.dependents.delete(i)}get(){return Va.current&&Va.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const i=Vr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||i-this.updatedAt>em)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,em);return Op(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(i){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=i(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var i,a;(i=this.dependents)==null||i.clear(),(a=this.events.destroy)==null||a.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function lo(t,i){return new g3(t,i)}const{schedule:th}=Gp(queueMicrotask,!1),yi={x:!1,y:!1};function wg(){return yi.x||yi.y}function x3(t){return t==="x"||t==="y"?yi[t]?null:(yi[t]=!0,()=>{yi[t]=!1}):yi.x||yi.y?null:(yi.x=yi.y=!0,()=>{yi.x=yi.y=!1})}function vg(t,i){const a=gg(t),u=new AbortController,m={passive:!0,...i,signal:u.signal};return[a,m,()=>u.abort()]}function tm(t){return!(t.pointerType==="touch"||wg())}function y3(t,i,a={}){const[u,m,x]=vg(t,a),w=b=>{if(!tm(b))return;const{target:v}=b,C=i(v,b);if(typeof C!="function"||!v)return;const A=T=>{tm(T)&&(C(T),v.removeEventListener("pointerleave",A))};v.addEventListener("pointerleave",A,m)};return u.forEach(b=>{b.addEventListener("pointerenter",w,m)}),x}const Cg=(t,i)=>i?t===i?!0:Cg(t,i.parentElement):!1,nh=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,w3=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function v3(t){return w3.has(t.tagName)||t.tabIndex!==-1}const bc=new WeakSet;function nm(t){return i=>{i.key==="Enter"&&t(i)}}function Md(t,i){t.dispatchEvent(new PointerEvent("pointer"+i,{isPrimary:!0,bubbles:!0}))}const C3=(t,i)=>{const a=t.currentTarget;if(!a)return;const u=nm(()=>{if(bc.has(a))return;Md(a,"down");const m=nm(()=>{Md(a,"up")}),x=()=>Md(a,"cancel");a.addEventListener("keyup",m,i),a.addEventListener("blur",x,i)});a.addEventListener("keydown",u,i),a.addEventListener("blur",()=>a.removeEventListener("keydown",u),i)};function rm(t){return nh(t)&&!wg()}function b3(t,i,a={}){const[u,m,x]=vg(t,a),w=b=>{const v=b.currentTarget;if(!rm(b))return;bc.add(v);const C=i(v,b),A=(O,L)=>{window.removeEventListener("pointerup",T),window.removeEventListener("pointercancel",_),bc.has(v)&&bc.delete(v),rm(O)&&typeof C=="function"&&C(O,{success:L})},T=O=>{A(O,v===window||v===document||a.useGlobalTarget||Cg(v,O.target))},_=O=>{A(O,!1)};window.addEventListener("pointerup",T,m),window.addEventListener("pointercancel",_,m)};return u.forEach(b=>{(a.useGlobalTarget?window:b).addEventListener("pointerdown",w,m),yg(b)&&(b.addEventListener("focus",C=>C3(C,m)),!v3(b)&&!b.hasAttribute("tabindex")&&(b.tabIndex=0))}),x}function bg(t){return Pp(t)&&"ownerSVGElement"in t}function E3(t){return bg(t)&&t.tagName==="svg"}function S3(...t){const i=!Array.isArray(t[0]),a=i?0:-1,u=t[0+a],m=t[1+a],x=t[2+a],w=t[3+a],b=ng(m,x,w);return i?b(u):b}const er=t=>!!(t&&t.getVelocity);function A3(t,i,a){const u=t.get();let m=null,x=u,w;const b=typeof u=="string"?u.replace(/[\d.-]/g,""):void 0,v=()=>{m&&(m.stop(),m=null)},C=()=>{v(),m=new Gc({keyframes:[sm(t.get()),sm(x)],velocity:t.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...a,onUpdate:w})};if(t.attach((A,T)=>(x=A,w=_=>T(im(_,b)),sn.postRender(C),t.get()),v),er(i)){const A=i.on("change",_=>t.set(im(_,b))),T=t.on("destroy",A);return()=>{A(),T()}}return v}function im(t,i){return i?t+i:t}function sm(t){return typeof t=="number"?t:parseFloat(t)}const N3=[...hg,Bn,Is],I3=t=>N3.find(fg(t)),ol=N.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class T3 extends N.Component{getSnapshotBeforeUpdate(i){const a=this.props.childRef.current;if(a&&i.isPresent&&!this.props.isPresent){const u=a.offsetParent,m=yg(u)&&u.offsetWidth||0,x=this.props.sizeRef.current;x.height=a.offsetHeight||0,x.width=a.offsetWidth||0,x.top=a.offsetTop,x.left=a.offsetLeft,x.right=m-x.width-x.left}return null}componentDidUpdate(){}render(){return this.props.children}}function _3({children:t,isPresent:i,anchorX:a,root:u}){const m=N.useId(),x=N.useRef(null),w=N.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:b}=N.useContext(ol);return N.useInsertionEffect(()=>{const{width:v,height:C,top:A,left:T,right:_}=w.current;if(i||!x.current||!v||!C)return;const O=a==="left"?`left: ${T}`:`right: ${_}`;x.current.dataset.motionPopId=m;const L=document.createElement("style");b&&(L.nonce=b);const B=u??document.head;return B.appendChild(L),L.sheet&&L.sheet.insertRule(`
          [data-motion-pop-id="${m}"] {
            position: absolute !important;
            width: ${v}px !important;
            height: ${C}px !important;
            ${O}px !important;
            top: ${A}px !important;
          }
        `),()=>{B.contains(L)&&B.removeChild(L)}},[i]),h.jsx(T3,{isPresent:i,childRef:x,sizeRef:w,children:N.cloneElement(t,{ref:x})})}const R3=({children:t,initial:i,isPresent:a,onExitComplete:u,custom:m,presenceAffectsLayout:x,mode:w,anchorX:b,root:v})=>{const C=nl(k3),A=N.useId();let T=!0,_=N.useMemo(()=>(T=!1,{id:A,initial:i,isPresent:a,custom:m,onExitComplete:O=>{C.set(O,!0);for(const L of C.values())if(!L)return;u&&u()},register:O=>(C.set(O,!1),()=>C.delete(O))}),[a,C,u]);return x&&T&&(_={..._}),N.useMemo(()=>{C.forEach((O,L)=>C.set(L,!1))},[a]),N.useEffect(()=>{!a&&!C.size&&u&&u()},[a]),w==="popLayout"&&(t=h.jsx(_3,{isPresent:a,anchorX:b,root:v,children:t})),h.jsx(Hc.Provider,{value:_,children:t})};function k3(){return new Map}function Eg(t=!0){const i=N.useContext(Hc);if(i===null)return[!0,null];const{isPresent:a,onExitComplete:u,register:m}=i,x=N.useId();N.useEffect(()=>{if(t)return m(x)},[t]);const w=N.useCallback(()=>t&&u&&u(x),[x,u,t]);return!a&&u?[!1,w]:[!0]}const mc=t=>t.key||"";function om(t){const i=[];return N.Children.forEach(t,a=>{N.isValidElement(a)&&i.push(a)}),i}const _r=({children:t,custom:i,initial:a=!0,onExitComplete:u,presenceAffectsLayout:m=!0,mode:x="sync",propagate:w=!1,anchorX:b="left",root:v})=>{const[C,A]=Eg(w),T=N.useMemo(()=>om(t),[t]),_=w&&!C?[]:T.map(mc),O=N.useRef(!0),L=N.useRef(T),B=nl(()=>new Map),[j,W]=N.useState(T),[U,F]=N.useState(T);Lf(()=>{O.current=!1,L.current=T;for(let ne=0;ne<U.length;ne++){const q=mc(U[ne]);_.includes(q)?B.delete(q):B.get(q)!==!0&&B.set(q,!1)}},[U,_.length,_.join("-")]);const Z=[];if(T!==j){let ne=[...T];for(let q=0;q<U.length;q++){const ie=U[q],te=mc(ie);_.includes(te)||(ne.splice(q,0,ie),Z.push(ie))}return x==="wait"&&Z.length&&(ne=Z),F(om(ne)),W(T),null}const{forceRender:Q}=N.useContext(Of);return h.jsx(h.Fragment,{children:U.map(ne=>{const q=mc(ne),ie=w&&!C?!1:T===U||_.includes(q),te=()=>{if(B.has(q))B.set(q,!0);else return;let ye=!0;B.forEach(Oe=>{Oe||(ye=!1)}),ye&&(Q==null||Q(),F(L.current),w&&(A==null||A()),u&&u())};return h.jsx(R3,{isPresent:ie,initial:!O.current||a?void 0:!1,custom:i,presenceAffectsLayout:m,mode:x,root:v,onExitComplete:ie?void 0:te,anchorX:b,children:ne},q)})})},Sg=N.createContext({strict:!1}),am={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Xo={};for(const t in am)Xo[t]={isEnabled:i=>am[t].some(a=>!!i[a])};function P3(t){for(const i in t)Xo[i]={...Xo[i],...t[i]}}const M3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Pc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||M3.has(t)}let Ag=t=>!Pc(t);function O3(t){typeof t=="function"&&(Ag=i=>i.startsWith("on")?!Pc(i):t(i))}try{O3(require("@emotion/is-prop-valid").default)}catch{}function D3(t,i,a){const u={};for(const m in t)m==="values"&&typeof t.values=="object"||(Ag(m)||a===!0&&Pc(m)||!i&&!Pc(m)||t.draggable&&m.startsWith("onDrag"))&&(u[m]=t[m]);return u}const Xc=N.createContext({});function Yc(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Ka(t){return typeof t=="string"||Array.isArray(t)}const rh=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ih=["initial",...rh];function $c(t){return Yc(t.animate)||ih.some(i=>Ka(t[i]))}function Ng(t){return!!($c(t)||t.variants)}function L3(t,i){if($c(t)){const{initial:a,animate:u}=t;return{initial:a===!1||Ka(a)?a:void 0,animate:Ka(u)?u:void 0}}return t.inherit!==!1?i:{}}function j3(t){const{initial:i,animate:a}=L3(t,N.useContext(Xc));return N.useMemo(()=>({initial:i,animate:a}),[lm(i),lm(a)])}function lm(t){return Array.isArray(t)?t.join(" "):t}const qa={};function B3(t){for(const i in t)qa[i]=t[i],Hf(i)&&(qa[i].isCSSVariable=!0)}function Ig(t,{layout:i,layoutId:a}){return Qo.has(t)||t.startsWith("origin")||(i||a!==void 0)&&(!!qa[t]||t==="opacity")}const F3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},V3=qo.length;function U3(t,i,a){let u="",m=!0;for(let x=0;x<V3;x++){const w=qo[x],b=t[w];if(b===void 0)continue;let v=!0;if(typeof b=="number"?v=b===(w.startsWith("scale")?1:0):v=parseFloat(b)===0,!v||a){const C=xg(b,eh[w]);if(!v){m=!1;const A=F3[w]||w;u+=`${A}(${C}) `}a&&(i[w]=C)}}return u=u.trim(),a?u=a(i,m?"":u):m&&(u="none"),u}function sh(t,i,a){const{style:u,vars:m,transformOrigin:x}=t;let w=!1,b=!1;for(const v in i){const C=i[v];if(Qo.has(v)){w=!0;continue}else if(Hf(v)){m[v]=C;continue}else{const A=xg(C,eh[v]);v.startsWith("origin")?(b=!0,x[v]=A):u[v]=A}}if(i.transform||(w||a?u.transform=U3(i,t.transform,a):u.transform&&(u.transform="none")),b){const{originX:v="50%",originY:C="50%",originZ:A=0}=x;u.transformOrigin=`${v} ${C} ${A}`}}const oh=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Tg(t,i,a){for(const u in i)!er(i[u])&&!Ig(u,a)&&(t[u]=i[u])}function z3({transformTemplate:t},i){return N.useMemo(()=>{const a=oh();return sh(a,i,t),Object.assign({},a.vars,a.style)},[i])}function W3(t,i){const a=t.style||{},u={};return Tg(u,a,t),Object.assign(u,z3(t,i)),u}function H3(t,i){const a={},u=W3(t,i);return t.drag&&t.dragListener!==!1&&(a.draggable=!1,u.userSelect=u.WebkitUserSelect=u.WebkitTouchCallout="none",u.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(a.tabIndex=0),a.style=u,a}const G3={offset:"stroke-dashoffset",array:"stroke-dasharray"},X3={offset:"strokeDashoffset",array:"strokeDasharray"};function Y3(t,i,a=1,u=0,m=!0){t.pathLength=1;const x=m?G3:X3;t[x.offset]=vt.transform(-u);const w=vt.transform(i),b=vt.transform(a);t[x.array]=`${w} ${b}`}function _g(t,{attrX:i,attrY:a,attrScale:u,pathLength:m,pathSpacing:x=1,pathOffset:w=0,...b},v,C,A){if(sh(t,b,C),v){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:T,style:_}=t;T.transform&&(_.transform=T.transform,delete T.transform),(_.transform||T.transformOrigin)&&(_.transformOrigin=T.transformOrigin??"50% 50%",delete T.transformOrigin),_.transform&&(_.transformBox=(A==null?void 0:A.transformBox)??"fill-box",delete T.transformBox),i!==void 0&&(T.x=i),a!==void 0&&(T.y=a),u!==void 0&&(T.scale=u),m!==void 0&&Y3(T,m,x,w,!1)}const Rg=()=>({...oh(),attrs:{}}),kg=t=>typeof t=="string"&&t.toLowerCase()==="svg";function $3(t,i,a,u){const m=N.useMemo(()=>{const x=Rg();return _g(x,i,kg(u),t.transformTemplate,t.style),{...x.attrs,style:{...x.style}}},[i]);if(t.style){const x={};Tg(x,t.style,t),m.style={...x,...m.style}}return m}const Z3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ah(t){return typeof t!="string"||t.includes("-")?!1:!!(Z3.indexOf(t)>-1||/[A-Z]/u.test(t))}function K3(t,i,a,{latestValues:u},m,x=!1){const b=(ah(t)?$3:H3)(i,u,m,t),v=D3(i,typeof t=="string",x),C=t!==N.Fragment?{...v,...b,ref:a}:{},{children:A}=i,T=N.useMemo(()=>er(A)?A.get():A,[A]);return N.createElement(t,{...C,children:T})}function cm(t){const i=[{},{}];return t==null||t.values.forEach((a,u)=>{i[0][u]=a.get(),i[1][u]=a.getVelocity()}),i}function lh(t,i,a,u){if(typeof i=="function"){const[m,x]=cm(u);i=i(a!==void 0?a:t.custom,m,x)}if(typeof i=="string"&&(i=t.variants&&t.variants[i]),typeof i=="function"){const[m,x]=cm(u);i=i(a!==void 0?a:t.custom,m,x)}return i}function Ec(t){return er(t)?t.get():t}function q3({scrapeMotionValuesFromProps:t,createRenderState:i},a,u,m){return{latestValues:Q3(a,u,m,t),renderState:i()}}function Q3(t,i,a,u){const m={},x=u(t,{});for(const _ in x)m[_]=Ec(x[_]);let{initial:w,animate:b}=t;const v=$c(t),C=Ng(t);i&&C&&!v&&t.inherit!==!1&&(w===void 0&&(w=i.initial),b===void 0&&(b=i.animate));let A=a?a.initial===!1:!1;A=A||w===!1;const T=A?b:w;if(T&&typeof T!="boolean"&&!Yc(T)){const _=Array.isArray(T)?T:[T];for(let O=0;O<_.length;O++){const L=lh(t,_[O]);if(L){const{transitionEnd:B,transition:j,...W}=L;for(const U in W){let F=W[U];if(Array.isArray(F)){const Z=A?F.length-1:0;F=F[Z]}F!==null&&(m[U]=F)}for(const U in B)m[U]=B[U]}}}return m}const Pg=t=>(i,a)=>{const u=N.useContext(Xc),m=N.useContext(Hc),x=()=>q3(t,i,u,m);return a?x():nl(x)};function ch(t,i,a){var x;const{style:u}=t,m={};for(const w in u)(er(u[w])||i.style&&er(i.style[w])||Ig(w,t)||((x=a==null?void 0:a.getValue(w))==null?void 0:x.liveStyle)!==void 0)&&(m[w]=u[w]);return m}const J3=Pg({scrapeMotionValuesFromProps:ch,createRenderState:oh});function Mg(t,i,a){const u=ch(t,i,a);for(const m in t)if(er(t[m])||er(i[m])){const x=qo.indexOf(m)!==-1?"attr"+m.charAt(0).toUpperCase()+m.substring(1):m;u[x]=t[m]}return u}const eC=Pg({scrapeMotionValuesFromProps:Mg,createRenderState:Rg}),tC=Symbol.for("motionComponentSymbol");function Fo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function nC(t,i,a){return N.useCallback(u=>{u&&t.onMount&&t.onMount(u),i&&(u?i.mount(u):i.unmount()),a&&(typeof a=="function"?a(u):Fo(a)&&(a.current=u))},[i])}const uh=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),rC="framerAppearId",Og="data-"+uh(rC),Dg=N.createContext({});function iC(t,i,a,u,m){var B,j;const{visualElement:x}=N.useContext(Xc),w=N.useContext(Sg),b=N.useContext(Hc),v=N.useContext(ol).reducedMotion,C=N.useRef(null);u=u||w.renderer,!C.current&&u&&(C.current=u(t,{visualState:i,parent:x,props:a,presenceContext:b,blockInitialAnimation:b?b.initial===!1:!1,reducedMotionConfig:v}));const A=C.current,T=N.useContext(Dg);A&&!A.projection&&m&&(A.type==="html"||A.type==="svg")&&sC(C.current,a,m,T);const _=N.useRef(!1);N.useInsertionEffect(()=>{A&&_.current&&A.update(a,b)});const O=a[Og],L=N.useRef(!!O&&!((B=window.MotionHandoffIsComplete)!=null&&B.call(window,O))&&((j=window.MotionHasOptimisedAnimation)==null?void 0:j.call(window,O)));return Lf(()=>{A&&(_.current=!0,window.MotionIsMounted=!0,A.updateFeatures(),A.scheduleRenderMicrotask(),L.current&&A.animationState&&A.animationState.animateChanges())}),N.useEffect(()=>{A&&(!L.current&&A.animationState&&A.animationState.animateChanges(),L.current&&(queueMicrotask(()=>{var W;(W=window.MotionHandoffMarkAsComplete)==null||W.call(window,O)}),L.current=!1),A.enteringChildren=void 0)}),A}function sC(t,i,a,u){const{layoutId:m,layout:x,drag:w,dragConstraints:b,layoutScroll:v,layoutRoot:C,layoutCrossfade:A}=i;t.projection=new a(t.latestValues,i["data-framer-portal-id"]?void 0:Lg(t.parent)),t.projection.setOptions({layoutId:m,layout:x,alwaysMeasureLayout:!!w||b&&Fo(b),visualElement:t,animationType:typeof x=="string"?x:"both",initialPromotionConfig:u,crossfade:A,layoutScroll:v,layoutRoot:C})}function Lg(t){if(t)return t.options.allowProjection!==!1?t.projection:Lg(t.parent)}function Od(t,{forwardMotionProps:i=!1}={},a,u){a&&P3(a);const m=ah(t)?eC:J3;function x(b,v){let C;const A={...N.useContext(ol),...b,layoutId:oC(b)},{isStatic:T}=A,_=j3(b),O=m(b,T);if(!T&&Df){aC();const L=lC(A);C=L.MeasureLayout,_.visualElement=iC(t,O,A,u,L.ProjectionNode)}return h.jsxs(Xc.Provider,{value:_,children:[C&&_.visualElement?h.jsx(C,{visualElement:_.visualElement,...A}):null,K3(t,b,nC(O,_.visualElement,v),O,T,i)]})}x.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const w=N.forwardRef(x);return w[tC]=t,w}function oC({layoutId:t}){const i=N.useContext(Of).id;return i&&t!==void 0?i+"-"+t:t}function aC(t,i){N.useContext(Sg).strict}function lC(t){const{drag:i,layout:a}=Xo;if(!i&&!a)return{};const u={...i,...a};return{MeasureLayout:i!=null&&i.isEnabled(t)||a!=null&&a.isEnabled(t)?u.MeasureLayout:void 0,ProjectionNode:u.ProjectionNode}}function cC(t,i){if(typeof Proxy>"u")return Od;const a=new Map,u=(x,w)=>Od(x,w,t,i),m=(x,w)=>u(x,w);return new Proxy(m,{get:(x,w)=>w==="create"?u:(a.has(w)||a.set(w,Od(w,void 0,t,i)),a.get(w))})}function jg({top:t,left:i,right:a,bottom:u}){return{x:{min:i,max:a},y:{min:t,max:u}}}function uC({x:t,y:i}){return{top:i.min,right:t.max,bottom:i.max,left:t.min}}function dC(t,i){if(!i)return t;const a=i({x:t.left,y:t.top}),u=i({x:t.right,y:t.bottom});return{top:a.y,left:a.x,bottom:u.y,right:u.x}}function Dd(t){return t===void 0||t===1}function df({scale:t,scaleX:i,scaleY:a}){return!Dd(t)||!Dd(i)||!Dd(a)}function no(t){return df(t)||Bg(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Bg(t){return um(t.x)||um(t.y)}function um(t){return t&&t!=="0%"}function Mc(t,i,a){const u=t-a,m=i*u;return a+m}function dm(t,i,a,u,m){return m!==void 0&&(t=Mc(t,m,u)),Mc(t,a,u)+i}function ff(t,i=0,a=1,u,m){t.min=dm(t.min,i,a,u,m),t.max=dm(t.max,i,a,u,m)}function Fg(t,{x:i,y:a}){ff(t.x,i.translate,i.scale,i.originPoint),ff(t.y,a.translate,a.scale,a.originPoint)}const fm=.999999999999,hm=1.0000000000001;function fC(t,i,a,u=!1){const m=a.length;if(!m)return;i.x=i.y=1;let x,w;for(let b=0;b<m;b++){x=a[b],w=x.projectionDelta;const{visualElement:v}=x.options;v&&v.props.style&&v.props.style.display==="contents"||(u&&x.options.layoutScroll&&x.scroll&&x!==x.root&&Uo(t,{x:-x.scroll.offset.x,y:-x.scroll.offset.y}),w&&(i.x*=w.x.scale,i.y*=w.y.scale,Fg(t,w)),u&&no(x.latestValues)&&Uo(t,x.latestValues))}i.x<hm&&i.x>fm&&(i.x=1),i.y<hm&&i.y>fm&&(i.y=1)}function Vo(t,i){t.min=t.min+i,t.max=t.max+i}function mm(t,i,a,u,m=.5){const x=yn(t.min,t.max,m);ff(t,i,a,x,u)}function Uo(t,i){mm(t.x,i.x,i.scaleX,i.scale,i.originX),mm(t.y,i.y,i.scaleY,i.scale,i.originY)}function Vg(t,i){return jg(dC(t.getBoundingClientRect(),i))}function hC(t,i,a){const u=Vg(t,a),{scroll:m}=i;return m&&(Vo(u.x,m.offset.x),Vo(u.y,m.offset.y)),u}const pm=()=>({translate:0,scale:1,origin:0,originPoint:0}),zo=()=>({x:pm(),y:pm()}),gm=()=>({min:0,max:0}),Mn=()=>({x:gm(),y:gm()}),hf={current:null},Ug={current:!1};function mC(){if(Ug.current=!0,!!Df)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),i=()=>hf.current=t.matches;t.addEventListener("change",i),i()}else hf.current=!1}const pC=new WeakMap;function gC(t,i,a){for(const u in i){const m=i[u],x=a[u];if(er(m))t.addValue(u,m);else if(er(x))t.addValue(u,lo(m,{owner:t}));else if(x!==m)if(t.hasValue(u)){const w=t.getValue(u);w.liveStyle===!0?w.jump(m):w.hasAnimated||w.set(m)}else{const w=t.getStaticValue(u);t.addValue(u,lo(w!==void 0?w:m,{owner:t}))}}for(const u in a)i[u]===void 0&&t.removeValue(u);return i}const xm=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class xC{scrapeMotionValuesFromProps(i,a,u){return{}}constructor({parent:i,props:a,presenceContext:u,reducedMotionConfig:m,blockInitialAnimation:x,visualState:w},b={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Qf,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=Vr.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,sn.render(this.render,!1,!0))};const{latestValues:v,renderState:C}=w;this.latestValues=v,this.baseTarget={...v},this.initialValues=a.initial?{...v}:{},this.renderState=C,this.parent=i,this.props=a,this.presenceContext=u,this.depth=i?i.depth+1:0,this.reducedMotionConfig=m,this.options=b,this.blockInitialAnimation=!!x,this.isControllingVariants=$c(a),this.isVariantNode=Ng(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(i&&i.current);const{willChange:A,...T}=this.scrapeMotionValuesFromProps(a,{},this);for(const _ in T){const O=T[_];v[_]!==void 0&&er(O)&&O.set(v[_])}}mount(i){var a;this.current=i,pC.set(i,this),this.projection&&!this.projection.instance&&this.projection.mount(i),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((u,m)=>this.bindToMotionValue(m,u)),Ug.current||mC(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:hf.current,(a=this.parent)==null||a.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var i;this.projection&&this.projection.unmount(),Ki(this.notifyUpdate),Ki(this.render),this.valueSubscriptions.forEach(a=>a()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(i=this.parent)==null||i.removeChild(this);for(const a in this.events)this.events[a].clear();for(const a in this.features){const u=this.features[a];u&&(u.unmount(),u.isMounted=!1)}this.current=null}addChild(i){this.children.add(i),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(i)}removeChild(i){this.children.delete(i),this.enteringChildren&&this.enteringChildren.delete(i)}bindToMotionValue(i,a){this.valueSubscriptions.has(i)&&this.valueSubscriptions.get(i)();const u=Qo.has(i);u&&this.onBindTransform&&this.onBindTransform();const m=a.on("change",w=>{this.latestValues[i]=w,this.props.onUpdate&&sn.preRender(this.notifyUpdate),u&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let x;window.MotionCheckAppearSync&&(x=window.MotionCheckAppearSync(this,i,a)),this.valueSubscriptions.set(i,()=>{m(),x&&x(),a.owner&&a.stop()})}sortNodePosition(i){return!this.current||!this.sortInstanceNodePosition||this.type!==i.type?0:this.sortInstanceNodePosition(this.current,i.current)}updateFeatures(){let i="animation";for(i in Xo){const a=Xo[i];if(!a)continue;const{isEnabled:u,Feature:m}=a;if(!this.features[i]&&m&&u(this.props)&&(this.features[i]=new m(this)),this.features[i]){const x=this.features[i];x.isMounted?x.update():(x.mount(),x.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Mn()}getStaticValue(i){return this.latestValues[i]}setStaticValue(i,a){this.latestValues[i]=a}update(i,a){(i.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=i,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let u=0;u<xm.length;u++){const m=xm[u];this.propEventSubscriptions[m]&&(this.propEventSubscriptions[m](),delete this.propEventSubscriptions[m]);const x="on"+m,w=i[x];w&&(this.propEventSubscriptions[m]=this.on(m,w))}this.prevMotionValues=gC(this,this.scrapeMotionValuesFromProps(i,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(i){return this.props.variants?this.props.variants[i]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(i){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(i),()=>a.variantChildren.delete(i)}addValue(i,a){const u=this.values.get(i);a!==u&&(u&&this.removeValue(i),this.bindToMotionValue(i,a),this.values.set(i,a),this.latestValues[i]=a.get())}removeValue(i){this.values.delete(i);const a=this.valueSubscriptions.get(i);a&&(a(),this.valueSubscriptions.delete(i)),delete this.latestValues[i],this.removeValueFromRenderState(i,this.renderState)}hasValue(i){return this.values.has(i)}getValue(i,a){if(this.props.values&&this.props.values[i])return this.props.values[i];let u=this.values.get(i);return u===void 0&&a!==void 0&&(u=lo(a===null?void 0:a,{owner:this}),this.addValue(i,u)),u}readValue(i,a){let u=this.latestValues[i]!==void 0||!this.current?this.latestValues[i]:this.getBaseTargetFromProps(this.props,i)??this.readValueFromInstance(this.current,i,this.options);return u!=null&&(typeof u=="string"&&(kp(u)||Mp(u))?u=parseFloat(u):!I3(u)&&Is.test(a)&&(u=pg(i,a)),this.setBaseTarget(i,er(u)?u.get():u)),er(u)?u.get():u}setBaseTarget(i,a){this.baseTarget[i]=a}getBaseTarget(i){var x;const{initial:a}=this.props;let u;if(typeof a=="string"||typeof a=="object"){const w=lh(this.props,a,(x=this.presenceContext)==null?void 0:x.custom);w&&(u=w[i])}if(a&&u!==void 0)return u;const m=this.getBaseTargetFromProps(this.props,i);return m!==void 0&&!er(m)?m:this.initialValues[i]!==void 0&&u===void 0?void 0:this.baseTarget[i]}on(i,a){return this.events[i]||(this.events[i]=new Uf),this.events[i].add(a)}notify(i,...a){this.events[i]&&this.events[i].notify(...a)}scheduleRenderMicrotask(){th.render(this.render)}}class zg extends xC{constructor(){super(...arguments),this.KeyframeResolver=m3}sortInstanceNodePosition(i,a){return i.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(i,a){return i.style?i.style[a]:void 0}removeValueFromRenderState(i,{vars:a,style:u}){delete a[i],delete u[i]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:i}=this.props;er(i)&&(this.childSubscription=i.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function Wg(t,{style:i,vars:a},u,m){const x=t.style;let w;for(w in i)x[w]=i[w];m==null||m.applyProjectionStyles(x,u);for(w in a)x.setProperty(w,a[w])}function yC(t){return window.getComputedStyle(t)}class wC extends zg{constructor(){super(...arguments),this.type="html",this.renderInstance=Wg}readValueFromInstance(i,a){var u;if(Qo.has(a))return(u=this.projection)!=null&&u.isProjecting?rf(a):Mv(i,a);{const m=yC(i),x=(Hf(a)?m.getPropertyValue(a):m[a])||0;return typeof x=="string"?x.trim():x}}measureInstanceViewportBox(i,{transformPagePoint:a}){return Vg(i,a)}build(i,a,u){sh(i,a,u.transformTemplate)}scrapeMotionValuesFromProps(i,a,u){return ch(i,a,u)}}const Hg=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function vC(t,i,a,u){Wg(t,i,void 0,u);for(const m in i.attrs)t.setAttribute(Hg.has(m)?m:uh(m),i.attrs[m])}class CC extends zg{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Mn}getBaseTargetFromProps(i,a){return i[a]}readValueFromInstance(i,a){if(Qo.has(a)){const u=mg(a);return u&&u.default||0}return a=Hg.has(a)?a:uh(a),i.getAttribute(a)}scrapeMotionValuesFromProps(i,a,u){return Mg(i,a,u)}build(i,a,u){_g(i,a,this.isSVGTag,u.transformTemplate,u.style)}renderInstance(i,a,u,m){vC(i,a,u,m)}mount(i){this.isSVGTag=kg(i.tagName),super.mount(i)}}const bC=(t,i)=>ah(t)?new CC(i):new wC(i,{allowProjection:t!==N.Fragment});function Ho(t,i,a){const u=t.getProps();return lh(u,i,a!==void 0?a:u.custom,t)}const mf=t=>Array.isArray(t);function EC(t,i,a){t.hasValue(i)?t.getValue(i).set(a):t.addValue(i,lo(a))}function SC(t){return mf(t)?t[t.length-1]||0:t}function AC(t,i){const a=Ho(t,i);let{transitionEnd:u={},transition:m={},...x}=a||{};x={...x,...u};for(const w in x){const b=SC(x[w]);EC(t,w,b)}}function NC(t){return!!(er(t)&&t.add)}function pf(t,i){const a=t.getValue("willChange");if(NC(a))return a.add(i);if(!a&&Zi.WillChange){const u=new Zi.WillChange("auto");t.addValue("willChange",u),u.add(i)}}function Gg(t){return t.props[Og]}const IC=t=>t!==null;function TC(t,{repeat:i,repeatType:a="loop"},u){const m=t.filter(IC),x=i&&a!=="loop"&&i%2===1?0:m.length-1;return m[x]}const _C={type:"spring",stiffness:500,damping:25,restSpeed:10},RC=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),kC={type:"keyframes",duration:.8},PC={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},MC=(t,{keyframes:i})=>i.length>2?kC:Qo.has(t)?t.startsWith("scale")?RC(i[1]):_C:PC;function OC({when:t,delay:i,delayChildren:a,staggerChildren:u,staggerDirection:m,repeat:x,repeatType:w,repeatDelay:b,from:v,elapsed:C,...A}){return!!Object.keys(A).length}const dh=(t,i,a,u={},m,x)=>w=>{const b=Jf(u,t)||{},v=b.delay||u.delay||0;let{elapsed:C=0}=u;C=C-Ti(v);const A={keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:i.getVelocity(),...b,delay:-C,onUpdate:_=>{i.set(_),b.onUpdate&&b.onUpdate(_)},onComplete:()=>{w(),b.onComplete&&b.onComplete()},name:t,motionValue:i,element:x?void 0:m};OC(b)||Object.assign(A,MC(t,A)),A.duration&&(A.duration=Ti(A.duration)),A.repeatDelay&&(A.repeatDelay=Ti(A.repeatDelay)),A.from!==void 0&&(A.keyframes[0]=A.from);let T=!1;if((A.type===!1||A.duration===0&&!A.repeatDelay)&&(cf(A),A.delay===0&&(T=!0)),(Zi.instantAnimations||Zi.skipAnimations)&&(T=!0,cf(A),A.delay=0),A.allowFlatten=!b.type&&!b.ease,T&&!x&&i.get()!==void 0){const _=TC(A.keyframes,b);if(_!==void 0){sn.update(()=>{A.onUpdate(_),A.onComplete()});return}}return b.isSync?new Gc(A):new n3(A)};function DC({protectedKeys:t,needsAnimating:i},a){const u=t.hasOwnProperty(a)&&i[a]!==!0;return i[a]=!1,u}function Xg(t,i,{delay:a=0,transitionOverride:u,type:m}={}){let{transition:x=t.getDefaultTransition(),transitionEnd:w,...b}=i;u&&(x=u);const v=[],C=m&&t.animationState&&t.animationState.getState()[m];for(const A in b){const T=t.getValue(A,t.latestValues[A]??null),_=b[A];if(_===void 0||C&&DC(C,A))continue;const O={delay:a,...Jf(x||{},A)},L=T.get();if(L!==void 0&&!T.isAnimating&&!Array.isArray(_)&&_===L&&!O.velocity)continue;let B=!1;if(window.MotionHandoffAnimation){const W=Gg(t);if(W){const U=window.MotionHandoffAnimation(W,A,sn);U!==null&&(O.startTime=U,B=!0)}}pf(t,A),T.start(dh(A,T,_,t.shouldReduceMotion&&dg.has(A)?{type:!1}:O,t,B));const j=T.animation;j&&v.push(j)}return w&&Promise.all(v).then(()=>{sn.update(()=>{w&&AC(t,w)})}),v}function Yg(t,i,a,u=0,m=1){const x=Array.from(t).sort((C,A)=>C.sortNodePosition(A)).indexOf(i),w=t.size,b=(w-1)*u;return typeof a=="function"?a(x,w):m===1?x*u:b-x*u}function gf(t,i,a={}){var v;const u=Ho(t,i,a.type==="exit"?(v=t.presenceContext)==null?void 0:v.custom:void 0);let{transition:m=t.getDefaultTransition()||{}}=u||{};a.transitionOverride&&(m=a.transitionOverride);const x=u?()=>Promise.all(Xg(t,u,a)):()=>Promise.resolve(),w=t.variantChildren&&t.variantChildren.size?(C=0)=>{const{delayChildren:A=0,staggerChildren:T,staggerDirection:_}=m;return LC(t,i,C,A,T,_,a)}:()=>Promise.resolve(),{when:b}=m;if(b){const[C,A]=b==="beforeChildren"?[x,w]:[w,x];return C().then(()=>A())}else return Promise.all([x(),w(a.delay)])}function LC(t,i,a=0,u=0,m=0,x=1,w){const b=[];for(const v of t.variantChildren)v.notify("AnimationStart",i),b.push(gf(v,i,{...w,delay:a+(typeof u=="function"?0:u)+Yg(t.variantChildren,v,u,m,x)}).then(()=>v.notify("AnimationComplete",i)));return Promise.all(b)}function jC(t,i,a={}){t.notify("AnimationStart",i);let u;if(Array.isArray(i)){const m=i.map(x=>gf(t,x,a));u=Promise.all(m)}else if(typeof i=="string")u=gf(t,i,a);else{const m=typeof i=="function"?Ho(t,i,a.custom):i;u=Promise.all(Xg(t,m,a))}return u.then(()=>{t.notify("AnimationComplete",i)})}function $g(t,i){if(!Array.isArray(i))return!1;const a=i.length;if(a!==t.length)return!1;for(let u=0;u<a;u++)if(i[u]!==t[u])return!1;return!0}const BC=ih.length;function Zg(t){if(!t)return;if(!t.isControllingVariants){const a=t.parent?Zg(t.parent)||{}:{};return t.props.initial!==void 0&&(a.initial=t.props.initial),a}const i={};for(let a=0;a<BC;a++){const u=ih[a],m=t.props[u];(Ka(m)||m===!1)&&(i[u]=m)}return i}const FC=[...rh].reverse(),VC=rh.length;function UC(t){return i=>Promise.all(i.map(({animation:a,options:u})=>jC(t,a,u)))}function zC(t){let i=UC(t),a=ym(),u=!0;const m=v=>(C,A)=>{var _;const T=Ho(t,A,v==="exit"?(_=t.presenceContext)==null?void 0:_.custom:void 0);if(T){const{transition:O,transitionEnd:L,...B}=T;C={...C,...B,...L}}return C};function x(v){i=v(t)}function w(v){const{props:C}=t,A=Zg(t.parent)||{},T=[],_=new Set;let O={},L=1/0;for(let j=0;j<VC;j++){const W=FC[j],U=a[W],F=C[W]!==void 0?C[W]:A[W],Z=Ka(F),Q=W===v?U.isActive:null;Q===!1&&(L=j);let ne=F===A[W]&&F!==C[W]&&Z;if(ne&&u&&t.manuallyAnimateOnMount&&(ne=!1),U.protectedKeys={...O},!U.isActive&&Q===null||!F&&!U.prevProp||Yc(F)||typeof F=="boolean")continue;const q=WC(U.prevProp,F);let ie=q||W===v&&U.isActive&&!ne&&Z||j>L&&Z,te=!1;const ye=Array.isArray(F)?F:[F];let Oe=ye.reduce(m(W),{});Q===!1&&(Oe={});const{prevResolvedValues:Se={}}=U,Te={...Se,...Oe},be=we=>{ie=!0,_.has(we)&&(te=!0,_.delete(we)),U.needsAnimating[we]=!0;const xe=t.getValue(we);xe&&(xe.liveStyle=!1)};for(const we in Te){const xe=Oe[we],_e=Se[we];if(O.hasOwnProperty(we))continue;let Ee=!1;mf(xe)&&mf(_e)?Ee=!$g(xe,_e):Ee=xe!==_e,Ee?xe!=null?be(we):_.add(we):xe!==void 0&&_.has(we)?be(we):U.protectedKeys[we]=!0}U.prevProp=F,U.prevResolvedValues=Oe,U.isActive&&(O={...O,...Oe}),u&&t.blockInitialAnimation&&(ie=!1);const X=ne&&q;ie&&(!X||te)&&T.push(...ye.map(we=>{const xe={type:W};if(typeof we=="string"&&u&&!X&&t.manuallyAnimateOnMount&&t.parent){const{parent:_e}=t,Ee=Ho(_e,we);if(_e.enteringChildren&&Ee){const{delayChildren:Y}=Ee.transition||{};xe.delay=Yg(_e.enteringChildren,t,Y)}}return{animation:we,options:xe}}))}if(_.size){const j={};if(typeof C.initial!="boolean"){const W=Ho(t,Array.isArray(C.initial)?C.initial[0]:C.initial);W&&W.transition&&(j.transition=W.transition)}_.forEach(W=>{const U=t.getBaseTarget(W),F=t.getValue(W);F&&(F.liveStyle=!0),j[W]=U??null}),T.push({animation:j})}let B=!!T.length;return u&&(C.initial===!1||C.initial===C.animate)&&!t.manuallyAnimateOnMount&&(B=!1),u=!1,B?i(T):Promise.resolve()}function b(v,C){var T;if(a[v].isActive===C)return Promise.resolve();(T=t.variantChildren)==null||T.forEach(_=>{var O;return(O=_.animationState)==null?void 0:O.setActive(v,C)}),a[v].isActive=C;const A=w(v);for(const _ in a)a[_].protectedKeys={};return A}return{animateChanges:w,setActive:b,setAnimateFunction:x,getState:()=>a,reset:()=>{a=ym(),u=!0}}}function WC(t,i){return typeof i=="string"?i!==t:Array.isArray(i)?!$g(i,t):!1}function to(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ym(){return{animate:to(!0),whileInView:to(),whileHover:to(),whileTap:to(),whileDrag:to(),whileFocus:to(),exit:to()}}class Ts{constructor(i){this.isMounted=!1,this.node=i}update(){}}class HC extends Ts{constructor(i){super(i),i.animationState||(i.animationState=zC(i))}updateAnimationControlsSubscription(){const{animate:i}=this.node.getProps();Yc(i)&&(this.unmountControls=i.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:i}=this.node.getProps(),{animate:a}=this.node.prevProps||{};i!==a&&this.updateAnimationControlsSubscription()}unmount(){var i;this.node.animationState.reset(),(i=this.unmountControls)==null||i.call(this)}}let GC=0;class XC extends Ts{constructor(){super(...arguments),this.id=GC++}update(){if(!this.node.presenceContext)return;const{isPresent:i,onExitComplete:a}=this.node.presenceContext,{isPresent:u}=this.node.prevPresenceContext||{};if(!this.node.animationState||i===u)return;const m=this.node.animationState.setActive("exit",!i);a&&!i&&m.then(()=>{a(this.id)})}mount(){const{register:i,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),i&&(this.unmount=i(this.id))}unmount(){}}const YC={animation:{Feature:HC},exit:{Feature:XC}};function Qa(t,i,a,u={passive:!0}){return t.addEventListener(i,a,u),()=>t.removeEventListener(i,a)}function al(t){return{point:{x:t.pageX,y:t.pageY}}}const $C=t=>i=>nh(i)&&t(i,al(i));function Ua(t,i,a,u){return Qa(t,i,$C(a),u)}const Kg=1e-4,ZC=1-Kg,KC=1+Kg,qg=.01,qC=0-qg,QC=0+qg;function Tr(t){return t.max-t.min}function JC(t,i,a){return Math.abs(t-i)<=a}function wm(t,i,a,u=.5){t.origin=u,t.originPoint=yn(i.min,i.max,t.origin),t.scale=Tr(a)/Tr(i),t.translate=yn(a.min,a.max,t.origin)-t.originPoint,(t.scale>=ZC&&t.scale<=KC||isNaN(t.scale))&&(t.scale=1),(t.translate>=qC&&t.translate<=QC||isNaN(t.translate))&&(t.translate=0)}function za(t,i,a,u){wm(t.x,i.x,a.x,u?u.originX:void 0),wm(t.y,i.y,a.y,u?u.originY:void 0)}function vm(t,i,a){t.min=a.min+i.min,t.max=t.min+Tr(i)}function eb(t,i,a){vm(t.x,i.x,a.x),vm(t.y,i.y,a.y)}function Cm(t,i,a){t.min=i.min-a.min,t.max=t.min+Tr(i)}function Wa(t,i,a){Cm(t.x,i.x,a.x),Cm(t.y,i.y,a.y)}function ai(t){return[t("x"),t("y")]}const Qg=({current:t})=>t?t.ownerDocument.defaultView:null,bm=(t,i)=>Math.abs(t-i);function tb(t,i){const a=bm(t.x,i.x),u=bm(t.y,i.y);return Math.sqrt(a**2+u**2)}class Jg{constructor(i,a,{transformPagePoint:u,contextWindow:m=window,dragSnapToOrigin:x=!1,distanceThreshold:w=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=jd(this.lastMoveEventInfo,this.history),O=this.startEvent!==null,L=tb(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!O&&!L)return;const{point:B}=_,{timestamp:j}=dr;this.history.push({...B,timestamp:j});const{onStart:W,onMove:U}=this.handlers;O||(W&&W(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),U&&U(this.lastMoveEvent,_)},this.handlePointerMove=(_,O)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=Ld(O,this.transformPagePoint),sn.update(this.updatePoint,!0)},this.handlePointerUp=(_,O)=>{this.end();const{onEnd:L,onSessionEnd:B,resumeAnimation:j}=this.handlers;if(this.dragSnapToOrigin&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const W=jd(_.type==="pointercancel"?this.lastMoveEventInfo:Ld(O,this.transformPagePoint),this.history);this.startEvent&&L&&L(_,W),B&&B(_,W)},!nh(i))return;this.dragSnapToOrigin=x,this.handlers=a,this.transformPagePoint=u,this.distanceThreshold=w,this.contextWindow=m||window;const b=al(i),v=Ld(b,this.transformPagePoint),{point:C}=v,{timestamp:A}=dr;this.history=[{...C,timestamp:A}];const{onSessionStart:T}=a;T&&T(i,jd(v,this.history)),this.removeListeners=rl(Ua(this.contextWindow,"pointermove",this.handlePointerMove),Ua(this.contextWindow,"pointerup",this.handlePointerUp),Ua(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(i){this.handlers=i}end(){this.removeListeners&&this.removeListeners(),Ki(this.updatePoint)}}function Ld(t,i){return i?{point:i(t.point)}:t}function Em(t,i){return{x:t.x-i.x,y:t.y-i.y}}function jd({point:t},i){return{point:t,delta:Em(t,ex(i)),offset:Em(t,nb(i)),velocity:rb(i,.1)}}function nb(t){return t[0]}function ex(t){return t[t.length-1]}function rb(t,i){if(t.length<2)return{x:0,y:0};let a=t.length-1,u=null;const m=ex(t);for(;a>=0&&(u=t[a],!(m.timestamp-u.timestamp>Ti(i)));)a--;if(!u)return{x:0,y:0};const x=_i(m.timestamp-u.timestamp);if(x===0)return{x:0,y:0};const w={x:(m.x-u.x)/x,y:(m.y-u.y)/x};return w.x===1/0&&(w.x=0),w.y===1/0&&(w.y=0),w}function ib(t,{min:i,max:a},u){return i!==void 0&&t<i?t=u?yn(i,t,u.min):Math.max(t,i):a!==void 0&&t>a&&(t=u?yn(a,t,u.max):Math.min(t,a)),t}function Sm(t,i,a){return{min:i!==void 0?t.min+i:void 0,max:a!==void 0?t.max+a-(t.max-t.min):void 0}}function sb(t,{top:i,left:a,bottom:u,right:m}){return{x:Sm(t.x,a,m),y:Sm(t.y,i,u)}}function Am(t,i){let a=i.min-t.min,u=i.max-t.max;return i.max-i.min<t.max-t.min&&([a,u]=[u,a]),{min:a,max:u}}function ob(t,i){return{x:Am(t.x,i.x),y:Am(t.y,i.y)}}function ab(t,i){let a=.5;const u=Tr(t),m=Tr(i);return m>u?a=Ya(i.min,i.max-u,t.min):u>m&&(a=Ya(t.min,t.max-m,i.min)),$i(0,1,a)}function lb(t,i){const a={};return i.min!==void 0&&(a.min=i.min-t.min),i.max!==void 0&&(a.max=i.max-t.min),a}const xf=.35;function cb(t=xf){return t===!1?t=0:t===!0&&(t=xf),{x:Nm(t,"left","right"),y:Nm(t,"top","bottom")}}function Nm(t,i,a){return{min:Im(t,i),max:Im(t,a)}}function Im(t,i){return typeof t=="number"?t:t[i]||0}const ub=new WeakMap;class db{constructor(i){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Mn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=i}start(i,{snapToCursor:a=!1,distanceThreshold:u}={}){const{presenceContext:m}=this.visualElement;if(m&&m.isPresent===!1)return;const x=T=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(al(T).point)},w=(T,_)=>{const{drag:O,dragPropagation:L,onDragStart:B}=this.getProps();if(O&&!L&&(this.openDragLock&&this.openDragLock(),this.openDragLock=x3(O),!this.openDragLock))return;this.latestPointerEvent=T,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ai(W=>{let U=this.getAxisMotionValue(W).get()||0;if(Ri.test(U)){const{projection:F}=this.visualElement;if(F&&F.layout){const Z=F.layout.layoutBox[W];Z&&(U=Tr(Z)*(parseFloat(U)/100))}}this.originPoint[W]=U}),B&&sn.postRender(()=>B(T,_)),pf(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},b=(T,_)=>{this.latestPointerEvent=T,this.latestPanInfo=_;const{dragPropagation:O,dragDirectionLock:L,onDirectionLock:B,onDrag:j}=this.getProps();if(!O&&!this.openDragLock)return;const{offset:W}=_;if(L&&this.currentDirection===null){this.currentDirection=fb(W),this.currentDirection!==null&&B&&B(this.currentDirection);return}this.updateAxis("x",_.point,W),this.updateAxis("y",_.point,W),this.visualElement.render(),j&&j(T,_)},v=(T,_)=>{this.latestPointerEvent=T,this.latestPanInfo=_,this.stop(T,_),this.latestPointerEvent=null,this.latestPanInfo=null},C=()=>ai(T=>{var _;return this.getAnimationState(T)==="paused"&&((_=this.getAxisMotionValue(T).animation)==null?void 0:_.play())}),{dragSnapToOrigin:A}=this.getProps();this.panSession=new Jg(i,{onSessionStart:x,onStart:w,onMove:b,onSessionEnd:v,resumeAnimation:C},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:A,distanceThreshold:u,contextWindow:Qg(this.visualElement)})}stop(i,a){const u=i||this.latestPointerEvent,m=a||this.latestPanInfo,x=this.isDragging;if(this.cancel(),!x||!m||!u)return;const{velocity:w}=m;this.startAnimation(w);const{onDragEnd:b}=this.getProps();b&&sn.postRender(()=>b(u,m))}cancel(){this.isDragging=!1;const{projection:i,animationState:a}=this.visualElement;i&&(i.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:u}=this.getProps();!u&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(i,a,u){const{drag:m}=this.getProps();if(!u||!pc(i,m,this.currentDirection))return;const x=this.getAxisMotionValue(i);let w=this.originPoint[i]+u[i];this.constraints&&this.constraints[i]&&(w=ib(w,this.constraints[i],this.elastic[i])),x.set(w)}resolveConstraints(){var x;const{dragConstraints:i,dragElastic:a}=this.getProps(),u=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(x=this.visualElement.projection)==null?void 0:x.layout,m=this.constraints;i&&Fo(i)?this.constraints||(this.constraints=this.resolveRefConstraints()):i&&u?this.constraints=sb(u.layoutBox,i):this.constraints=!1,this.elastic=cb(a),m!==this.constraints&&u&&this.constraints&&!this.hasMutatedConstraints&&ai(w=>{this.constraints!==!1&&this.getAxisMotionValue(w)&&(this.constraints[w]=lb(u.layoutBox[w],this.constraints[w]))})}resolveRefConstraints(){const{dragConstraints:i,onMeasureDragConstraints:a}=this.getProps();if(!i||!Fo(i))return!1;const u=i.current,{projection:m}=this.visualElement;if(!m||!m.layout)return!1;const x=hC(u,m.root,this.visualElement.getTransformPagePoint());let w=ob(m.layout.layoutBox,x);if(a){const b=a(uC(w));this.hasMutatedConstraints=!!b,b&&(w=jg(b))}return w}startAnimation(i){const{drag:a,dragMomentum:u,dragElastic:m,dragTransition:x,dragSnapToOrigin:w,onDragTransitionEnd:b}=this.getProps(),v=this.constraints||{},C=ai(A=>{if(!pc(A,a,this.currentDirection))return;let T=v&&v[A]||{};w&&(T={min:0,max:0});const _=m?200:1e6,O=m?40:1e7,L={type:"inertia",velocity:u?i[A]:0,bounceStiffness:_,bounceDamping:O,timeConstant:750,restDelta:1,restSpeed:10,...x,...T};return this.startAxisValueAnimation(A,L)});return Promise.all(C).then(b)}startAxisValueAnimation(i,a){const u=this.getAxisMotionValue(i);return pf(this.visualElement,i),u.start(dh(i,u,0,a,this.visualElement,!1))}stopAnimation(){ai(i=>this.getAxisMotionValue(i).stop())}pauseAnimation(){ai(i=>{var a;return(a=this.getAxisMotionValue(i).animation)==null?void 0:a.pause()})}getAnimationState(i){var a;return(a=this.getAxisMotionValue(i).animation)==null?void 0:a.state}getAxisMotionValue(i){const a=`_drag${i.toUpperCase()}`,u=this.visualElement.getProps(),m=u[a];return m||this.visualElement.getValue(i,(u.initial?u.initial[i]:void 0)||0)}snapToCursor(i){ai(a=>{const{drag:u}=this.getProps();if(!pc(a,u,this.currentDirection))return;const{projection:m}=this.visualElement,x=this.getAxisMotionValue(a);if(m&&m.layout){const{min:w,max:b}=m.layout.layoutBox[a];x.set(i[a]-yn(w,b,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:i,dragConstraints:a}=this.getProps(),{projection:u}=this.visualElement;if(!Fo(a)||!u||!this.constraints)return;this.stopAnimation();const m={x:0,y:0};ai(w=>{const b=this.getAxisMotionValue(w);if(b&&this.constraints!==!1){const v=b.get();m[w]=ab({min:v,max:v},this.constraints[w])}});const{transformTemplate:x}=this.visualElement.getProps();this.visualElement.current.style.transform=x?x({},""):"none",u.root&&u.root.updateScroll(),u.updateLayout(),this.resolveConstraints(),ai(w=>{if(!pc(w,i,null))return;const b=this.getAxisMotionValue(w),{min:v,max:C}=this.constraints[w];b.set(yn(v,C,m[w]))})}addListeners(){if(!this.visualElement.current)return;ub.set(this.visualElement,this);const i=this.visualElement.current,a=Ua(i,"pointerdown",v=>{const{drag:C,dragListener:A=!0}=this.getProps();C&&A&&this.start(v)}),u=()=>{const{dragConstraints:v}=this.getProps();Fo(v)&&v.current&&(this.constraints=this.resolveRefConstraints())},{projection:m}=this.visualElement,x=m.addEventListener("measure",u);m&&!m.layout&&(m.root&&m.root.updateScroll(),m.updateLayout()),sn.read(u);const w=Qa(window,"resize",()=>this.scalePositionWithinConstraints()),b=m.addEventListener("didUpdate",({delta:v,hasLayoutChanged:C})=>{this.isDragging&&C&&(ai(A=>{const T=this.getAxisMotionValue(A);T&&(this.originPoint[A]+=v[A].translate,T.set(T.get()+v[A].translate))}),this.visualElement.render())});return()=>{w(),a(),x(),b&&b()}}getProps(){const i=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:u=!1,dragPropagation:m=!1,dragConstraints:x=!1,dragElastic:w=xf,dragMomentum:b=!0}=i;return{...i,drag:a,dragDirectionLock:u,dragPropagation:m,dragConstraints:x,dragElastic:w,dragMomentum:b}}}function pc(t,i,a){return(i===!0||i===t)&&(a===null||a===t)}function fb(t,i=10){let a=null;return Math.abs(t.y)>i?a="y":Math.abs(t.x)>i&&(a="x"),a}class hb extends Ts{constructor(i){super(i),this.removeGroupControls=li,this.removeListeners=li,this.controls=new db(i)}mount(){const{dragControls:i}=this.node.getProps();i&&(this.removeGroupControls=i.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||li}unmount(){this.removeGroupControls(),this.removeListeners()}}const Tm=t=>(i,a)=>{t&&sn.postRender(()=>t(i,a))};class mb extends Ts{constructor(){super(...arguments),this.removePointerDownListener=li}onPointerDown(i){this.session=new Jg(i,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Qg(this.node)})}createPanHandlers(){const{onPanSessionStart:i,onPanStart:a,onPan:u,onPanEnd:m}=this.node.getProps();return{onSessionStart:Tm(i),onStart:Tm(a),onMove:u,onEnd:(x,w)=>{delete this.session,m&&sn.postRender(()=>m(x,w))}}}mount(){this.removePointerDownListener=Ua(this.node.current,"pointerdown",i=>this.onPointerDown(i))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Sc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function _m(t,i){return i.max===i.min?0:t/(i.max-i.min)*100}const Da={correct:(t,i)=>{if(!i.target)return t;if(typeof t=="string")if(vt.test(t))t=parseFloat(t);else return t;const a=_m(t,i.target.x),u=_m(t,i.target.y);return`${a}% ${u}%`}},pb={correct:(t,{treeScale:i,projectionDelta:a})=>{const u=t,m=Is.parse(t);if(m.length>5)return u;const x=Is.createTransformer(t),w=typeof m[0]!="number"?1:0,b=a.x.scale*i.x,v=a.y.scale*i.y;m[0+w]/=b,m[1+w]/=v;const C=yn(b,v,.5);return typeof m[2+w]=="number"&&(m[2+w]/=C),typeof m[3+w]=="number"&&(m[3+w]/=C),x(m)}};let Bd=!1;class gb extends N.Component{componentDidMount(){const{visualElement:i,layoutGroup:a,switchLayoutGroup:u,layoutId:m}=this.props,{projection:x}=i;B3(xb),x&&(a.group&&a.group.add(x),u&&u.register&&m&&u.register(x),Bd&&x.root.didUpdate(),x.addEventListener("animationComplete",()=>{this.safeToRemove()}),x.setOptions({...x.options,onExitComplete:()=>this.safeToRemove()})),Sc.hasEverUpdated=!0}getSnapshotBeforeUpdate(i){const{layoutDependency:a,visualElement:u,drag:m,isPresent:x}=this.props,{projection:w}=u;return w&&(w.isPresent=x,Bd=!0,m||i.layoutDependency!==a||a===void 0||i.isPresent!==x?w.willUpdate():this.safeToRemove(),i.isPresent!==x&&(x?w.promote():w.relegate()||sn.postRender(()=>{const b=w.getStack();(!b||!b.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:i}=this.props.visualElement;i&&(i.root.didUpdate(),th.postRender(()=>{!i.currentAnimation&&i.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:i,layoutGroup:a,switchLayoutGroup:u}=this.props,{projection:m}=i;Bd=!0,m&&(m.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(m),u&&u.deregister&&u.deregister(m))}safeToRemove(){const{safeToRemove:i}=this.props;i&&i()}render(){return null}}function tx(t){const[i,a]=Eg(),u=N.useContext(Of);return h.jsx(gb,{...t,layoutGroup:u,switchLayoutGroup:N.useContext(Dg),isPresent:i,safeToRemove:a})}const xb={borderRadius:{...Da,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Da,borderTopRightRadius:Da,borderBottomLeftRadius:Da,borderBottomRightRadius:Da,boxShadow:pb};function yb(t,i,a){const u=er(t)?t:lo(t);return u.start(dh("",u,i,a)),u.animation}const wb=(t,i)=>t.depth-i.depth;class vb{constructor(){this.children=[],this.isDirty=!1}add(i){jf(this.children,i),this.isDirty=!0}remove(i){Bf(this.children,i),this.isDirty=!0}forEach(i){this.isDirty&&this.children.sort(wb),this.isDirty=!1,this.children.forEach(i)}}function Cb(t,i){const a=Vr.now(),u=({timestamp:m})=>{const x=m-a;x>=i&&(Ki(u),t(x-i))};return sn.setup(u,!0),()=>Ki(u)}const nx=["TopLeft","TopRight","BottomLeft","BottomRight"],bb=nx.length,Rm=t=>typeof t=="string"?parseFloat(t):t,km=t=>typeof t=="number"||vt.test(t);function Eb(t,i,a,u,m,x){m?(t.opacity=yn(0,a.opacity??1,Sb(u)),t.opacityExit=yn(i.opacity??1,0,Ab(u))):x&&(t.opacity=yn(i.opacity??1,a.opacity??1,u));for(let w=0;w<bb;w++){const b=`border${nx[w]}Radius`;let v=Pm(i,b),C=Pm(a,b);if(v===void 0&&C===void 0)continue;v||(v=0),C||(C=0),v===0||C===0||km(v)===km(C)?(t[b]=Math.max(yn(Rm(v),Rm(C),u),0),(Ri.test(C)||Ri.test(v))&&(t[b]+="%")):t[b]=C}(i.rotate||a.rotate)&&(t.rotate=yn(i.rotate||0,a.rotate||0,u))}function Pm(t,i){return t[i]!==void 0?t[i]:t.borderRadius}const Sb=rx(0,.5,Up),Ab=rx(.5,.95,li);function rx(t,i,a){return u=>u<t?0:u>i?1:a(Ya(t,i,u))}function Mm(t,i){t.min=i.min,t.max=i.max}function oi(t,i){Mm(t.x,i.x),Mm(t.y,i.y)}function Om(t,i){t.translate=i.translate,t.scale=i.scale,t.originPoint=i.originPoint,t.origin=i.origin}function Dm(t,i,a,u,m){return t-=i,t=Mc(t,1/a,u),m!==void 0&&(t=Mc(t,1/m,u)),t}function Nb(t,i=0,a=1,u=.5,m,x=t,w=t){if(Ri.test(i)&&(i=parseFloat(i),i=yn(w.min,w.max,i/100)-w.min),typeof i!="number")return;let b=yn(x.min,x.max,u);t===x&&(b-=i),t.min=Dm(t.min,i,a,b,m),t.max=Dm(t.max,i,a,b,m)}function Lm(t,i,[a,u,m],x,w){Nb(t,i[a],i[u],i[m],i.scale,x,w)}const Ib=["x","scaleX","originX"],Tb=["y","scaleY","originY"];function jm(t,i,a,u){Lm(t.x,i,Ib,a?a.x:void 0,u?u.x:void 0),Lm(t.y,i,Tb,a?a.y:void 0,u?u.y:void 0)}function Bm(t){return t.translate===0&&t.scale===1}function ix(t){return Bm(t.x)&&Bm(t.y)}function Fm(t,i){return t.min===i.min&&t.max===i.max}function _b(t,i){return Fm(t.x,i.x)&&Fm(t.y,i.y)}function Vm(t,i){return Math.round(t.min)===Math.round(i.min)&&Math.round(t.max)===Math.round(i.max)}function sx(t,i){return Vm(t.x,i.x)&&Vm(t.y,i.y)}function Um(t){return Tr(t.x)/Tr(t.y)}function zm(t,i){return t.translate===i.translate&&t.scale===i.scale&&t.originPoint===i.originPoint}class Rb{constructor(){this.members=[]}add(i){jf(this.members,i),i.scheduleRender()}remove(i){if(Bf(this.members,i),i===this.prevLead&&(this.prevLead=void 0),i===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(i){const a=this.members.findIndex(m=>i===m);if(a===0)return!1;let u;for(let m=a;m>=0;m--){const x=this.members[m];if(x.isPresent!==!1){u=x;break}}return u?(this.promote(u),!0):!1}promote(i,a){const u=this.lead;if(i!==u&&(this.prevLead=u,this.lead=i,i.show(),u)){u.instance&&u.scheduleRender(),i.scheduleRender(),i.resumeFrom=u,a&&(i.resumeFrom.preserveOpacity=!0),u.snapshot&&(i.snapshot=u.snapshot,i.snapshot.latestValues=u.animationValues||u.latestValues),i.root&&i.root.isUpdating&&(i.isLayoutDirty=!0);const{crossfade:m}=i.options;m===!1&&u.hide()}}exitAnimationComplete(){this.members.forEach(i=>{const{options:a,resumingFrom:u}=i;a.onExitComplete&&a.onExitComplete(),u&&u.options.onExitComplete&&u.options.onExitComplete()})}scheduleRender(){this.members.forEach(i=>{i.instance&&i.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function kb(t,i,a){let u="";const m=t.x.translate/i.x,x=t.y.translate/i.y,w=(a==null?void 0:a.z)||0;if((m||x||w)&&(u=`translate3d(${m}px, ${x}px, ${w}px) `),(i.x!==1||i.y!==1)&&(u+=`scale(${1/i.x}, ${1/i.y}) `),a){const{transformPerspective:C,rotate:A,rotateX:T,rotateY:_,skewX:O,skewY:L}=a;C&&(u=`perspective(${C}px) ${u}`),A&&(u+=`rotate(${A}deg) `),T&&(u+=`rotateX(${T}deg) `),_&&(u+=`rotateY(${_}deg) `),O&&(u+=`skewX(${O}deg) `),L&&(u+=`skewY(${L}deg) `)}const b=t.x.scale*i.x,v=t.y.scale*i.y;return(b!==1||v!==1)&&(u+=`scale(${b}, ${v})`),u||"none"}const Fd=["","X","Y","Z"],Pb=1e3;let Mb=0;function Vd(t,i,a,u){const{latestValues:m}=i;m[t]&&(a[t]=m[t],i.setStaticValue(t,0),u&&(u[t]=0))}function ox(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:i}=t.options;if(!i)return;const a=Gg(i);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:m,layoutId:x}=t.options;window.MotionCancelOptimisedAnimation(a,"transform",sn,!(m||x))}const{parent:u}=t;u&&!u.hasCheckedOptimisedAppear&&ox(u)}function ax({attachResizeListener:t,defaultParent:i,measureScroll:a,checkIsScrollRoot:u,resetTransform:m}){return class{constructor(w={},b=i==null?void 0:i()){this.id=Mb++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Lb),this.nodes.forEach(Vb),this.nodes.forEach(Ub),this.nodes.forEach(jb)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=w,this.root=b?b.root||b:this,this.path=b?[...b.path,b]:[],this.parent=b,this.depth=b?b.depth+1:0;for(let v=0;v<this.path.length;v++)this.path[v].shouldResetTransform=!0;this.root===this&&(this.nodes=new vb)}addEventListener(w,b){return this.eventHandlers.has(w)||this.eventHandlers.set(w,new Uf),this.eventHandlers.get(w).add(b)}notifyListeners(w,...b){const v=this.eventHandlers.get(w);v&&v.notify(...b)}hasListeners(w){return this.eventHandlers.has(w)}mount(w){if(this.instance)return;this.isSVG=bg(w)&&!E3(w),this.instance=w;const{layoutId:b,layout:v,visualElement:C}=this.options;if(C&&!C.current&&C.mount(w),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(v||b)&&(this.isLayoutDirty=!0),t){let A,T=0;const _=()=>this.root.updateBlockedByResize=!1;sn.read(()=>{T=window.innerWidth}),t(w,()=>{const O=window.innerWidth;O!==T&&(T=O,this.root.updateBlockedByResize=!0,A&&A(),A=Cb(_,250),Sc.hasAnimatedSinceResize&&(Sc.hasAnimatedSinceResize=!1,this.nodes.forEach(Gm)))})}b&&this.root.registerSharedNode(b,this),this.options.animate!==!1&&C&&(b||v)&&this.addEventListener("didUpdate",({delta:A,hasLayoutChanged:T,hasRelativeLayoutChanged:_,layout:O})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const L=this.options.transition||C.getDefaultTransition()||Xb,{onLayoutAnimationStart:B,onLayoutAnimationComplete:j}=C.getProps(),W=!this.targetLayout||!sx(this.targetLayout,O),U=!T&&_;if(this.options.layoutRoot||this.resumeFrom||U||T&&(W||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const F={...Jf(L,"layout"),onPlay:B,onComplete:j};(C.shouldReduceMotion||this.options.layoutRoot)&&(F.delay=0,F.type=!1),this.startAnimation(F),this.setAnimationOrigin(A,U)}else T||Gm(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=O})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const w=this.getStack();w&&w.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ki(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(zb),this.animationId++)}getTransformTemplate(){const{visualElement:w}=this.options;return w&&w.getProps().transformTemplate}willUpdate(w=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ox(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let A=0;A<this.path.length;A++){const T=this.path[A];T.shouldResetTransform=!0,T.updateScroll("snapshot"),T.options.layoutRoot&&T.willUpdate(!1)}const{layoutId:b,layout:v}=this.options;if(b===void 0&&!v)return;const C=this.getTransformTemplate();this.prevTransformTemplateValue=C?C(this.latestValues,""):void 0,this.updateSnapshot(),w&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Wm);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Hm);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Fb),this.nodes.forEach(Ob),this.nodes.forEach(Db)):this.nodes.forEach(Hm),this.clearAllSnapshots();const b=Vr.now();dr.delta=$i(0,1e3/60,b-dr.timestamp),dr.timestamp=b,dr.isProcessing=!0,_d.update.process(dr),_d.preRender.process(dr),_d.render.process(dr),dr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,th.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Bb),this.sharedNodes.forEach(Wb)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,sn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){sn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Tr(this.snapshot.measuredBox.x)&&!Tr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let v=0;v<this.path.length;v++)this.path[v].updateScroll();const w=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Mn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:b}=this.options;b&&b.notify("LayoutMeasure",this.layout.layoutBox,w?w.layoutBox:void 0)}updateScroll(w="measure"){let b=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===w&&(b=!1),b&&this.instance){const v=u(this.instance);this.scroll={animationId:this.root.animationId,phase:w,isRoot:v,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:v}}}resetTransform(){if(!m)return;const w=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,b=this.projectionDelta&&!ix(this.projectionDelta),v=this.getTransformTemplate(),C=v?v(this.latestValues,""):void 0,A=C!==this.prevTransformTemplateValue;w&&this.instance&&(b||no(this.latestValues)||A)&&(m(this.instance,C),this.shouldResetTransform=!1,this.scheduleRender())}measure(w=!0){const b=this.measurePageBox();let v=this.removeElementScroll(b);return w&&(v=this.removeTransform(v)),Yb(v),{animationId:this.root.animationId,measuredBox:b,layoutBox:v,latestValues:{},source:this.id}}measurePageBox(){var C;const{visualElement:w}=this.options;if(!w)return Mn();const b=w.measureViewportBox();if(!(((C=this.scroll)==null?void 0:C.wasRoot)||this.path.some($b))){const{scroll:A}=this.root;A&&(Vo(b.x,A.offset.x),Vo(b.y,A.offset.y))}return b}removeElementScroll(w){var v;const b=Mn();if(oi(b,w),(v=this.scroll)!=null&&v.wasRoot)return b;for(let C=0;C<this.path.length;C++){const A=this.path[C],{scroll:T,options:_}=A;A!==this.root&&T&&_.layoutScroll&&(T.wasRoot&&oi(b,w),Vo(b.x,T.offset.x),Vo(b.y,T.offset.y))}return b}applyTransform(w,b=!1){const v=Mn();oi(v,w);for(let C=0;C<this.path.length;C++){const A=this.path[C];!b&&A.options.layoutScroll&&A.scroll&&A!==A.root&&Uo(v,{x:-A.scroll.offset.x,y:-A.scroll.offset.y}),no(A.latestValues)&&Uo(v,A.latestValues)}return no(this.latestValues)&&Uo(v,this.latestValues),v}removeTransform(w){const b=Mn();oi(b,w);for(let v=0;v<this.path.length;v++){const C=this.path[v];if(!C.instance||!no(C.latestValues))continue;df(C.latestValues)&&C.updateSnapshot();const A=Mn(),T=C.measurePageBox();oi(A,T),jm(b,C.latestValues,C.snapshot?C.snapshot.layoutBox:void 0,A)}return no(this.latestValues)&&jm(b,this.latestValues),b}setTargetDelta(w){this.targetDelta=w,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(w){this.options={...this.options,...w,crossfade:w.crossfade!==void 0?w.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==dr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(w=!1){var _;const b=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=b.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=b.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=b.isSharedProjectionDirty);const v=!!this.resumingFrom||this!==b;if(!(w||v&&this.isSharedProjectionDirty||this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:A,layoutId:T}=this.options;if(!(!this.layout||!(A||T))){if(this.resolvedRelativeTargetAt=dr.timestamp,!this.targetDelta&&!this.relativeTarget){const O=this.getClosestProjectingParent();O&&O.layout&&this.animationProgress!==1?(this.relativeParent=O,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mn(),this.relativeTargetOrigin=Mn(),Wa(this.relativeTargetOrigin,this.layout.layoutBox,O.layout.layoutBox),oi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Mn(),this.targetWithTransforms=Mn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),eb(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):oi(this.target,this.layout.layoutBox),Fg(this.target,this.targetDelta)):oi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const O=this.getClosestProjectingParent();O&&!!O.resumingFrom==!!this.resumingFrom&&!O.options.layoutScroll&&O.target&&this.animationProgress!==1?(this.relativeParent=O,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mn(),this.relativeTargetOrigin=Mn(),Wa(this.relativeTargetOrigin,this.target,O.target),oi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||df(this.parent.latestValues)||Bg(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var L;const w=this.getLead(),b=!!this.resumingFrom||this!==w;let v=!0;if((this.isProjectionDirty||(L=this.parent)!=null&&L.isProjectionDirty)&&(v=!1),b&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(v=!1),this.resolvedRelativeTargetAt===dr.timestamp&&(v=!1),v)return;const{layout:C,layoutId:A}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(C||A))return;oi(this.layoutCorrected,this.layout.layoutBox);const T=this.treeScale.x,_=this.treeScale.y;fC(this.layoutCorrected,this.treeScale,this.path,b),w.layout&&!w.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(w.target=w.layout.layoutBox,w.targetWithTransforms=Mn());const{target:O}=w;if(!O){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Om(this.prevProjectionDelta.x,this.projectionDelta.x),Om(this.prevProjectionDelta.y,this.projectionDelta.y)),za(this.projectionDelta,this.layoutCorrected,O,this.latestValues),(this.treeScale.x!==T||this.treeScale.y!==_||!zm(this.projectionDelta.x,this.prevProjectionDelta.x)||!zm(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",O))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(w=!0){var b;if((b=this.options.visualElement)==null||b.scheduleRender(),w){const v=this.getStack();v&&v.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=zo(),this.projectionDelta=zo(),this.projectionDeltaWithTransform=zo()}setAnimationOrigin(w,b=!1){const v=this.snapshot,C=v?v.latestValues:{},A={...this.latestValues},T=zo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!b;const _=Mn(),O=v?v.source:void 0,L=this.layout?this.layout.source:void 0,B=O!==L,j=this.getStack(),W=!j||j.members.length<=1,U=!!(B&&!W&&this.options.crossfade===!0&&!this.path.some(Gb));this.animationProgress=0;let F;this.mixTargetDelta=Z=>{const Q=Z/1e3;Xm(T.x,w.x,Q),Xm(T.y,w.y,Q),this.setTargetDelta(T),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Wa(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Hb(this.relativeTarget,this.relativeTargetOrigin,_,Q),F&&_b(this.relativeTarget,F)&&(this.isProjectionDirty=!1),F||(F=Mn()),oi(F,this.relativeTarget)),B&&(this.animationValues=A,Eb(A,C,this.latestValues,Q,U,W)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(w){var b,v,C;this.notifyListeners("animationStart"),(b=this.currentAnimation)==null||b.stop(),(C=(v=this.resumingFrom)==null?void 0:v.currentAnimation)==null||C.stop(),this.pendingAnimation&&(Ki(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=sn.update(()=>{Sc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=lo(0)),this.currentAnimation=yb(this.motionValue,[0,1e3],{...w,velocity:0,isSync:!0,onUpdate:A=>{this.mixTargetDelta(A),w.onUpdate&&w.onUpdate(A)},onStop:()=>{},onComplete:()=>{w.onComplete&&w.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const w=this.getStack();w&&w.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Pb),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const w=this.getLead();let{targetWithTransforms:b,target:v,layout:C,latestValues:A}=w;if(!(!b||!v||!C)){if(this!==w&&this.layout&&C&&lx(this.options.animationType,this.layout.layoutBox,C.layoutBox)){v=this.target||Mn();const T=Tr(this.layout.layoutBox.x);v.x.min=w.target.x.min,v.x.max=v.x.min+T;const _=Tr(this.layout.layoutBox.y);v.y.min=w.target.y.min,v.y.max=v.y.min+_}oi(b,v),Uo(b,A),za(this.projectionDeltaWithTransform,this.layoutCorrected,b,A)}}registerSharedNode(w,b){this.sharedNodes.has(w)||this.sharedNodes.set(w,new Rb),this.sharedNodes.get(w).add(b);const C=b.options.initialPromotionConfig;b.promote({transition:C?C.transition:void 0,preserveFollowOpacity:C&&C.shouldPreserveFollowOpacity?C.shouldPreserveFollowOpacity(b):void 0})}isLead(){const w=this.getStack();return w?w.lead===this:!0}getLead(){var b;const{layoutId:w}=this.options;return w?((b=this.getStack())==null?void 0:b.lead)||this:this}getPrevLead(){var b;const{layoutId:w}=this.options;return w?(b=this.getStack())==null?void 0:b.prevLead:void 0}getStack(){const{layoutId:w}=this.options;if(w)return this.root.sharedNodes.get(w)}promote({needsReset:w,transition:b,preserveFollowOpacity:v}={}){const C=this.getStack();C&&C.promote(this,v),w&&(this.projectionDelta=void 0,this.needsReset=!0),b&&this.setOptions({transition:b})}relegate(){const w=this.getStack();return w?w.relegate(this):!1}resetSkewAndRotation(){const{visualElement:w}=this.options;if(!w)return;let b=!1;const{latestValues:v}=w;if((v.z||v.rotate||v.rotateX||v.rotateY||v.rotateZ||v.skewX||v.skewY)&&(b=!0),!b)return;const C={};v.z&&Vd("z",w,C,this.animationValues);for(let A=0;A<Fd.length;A++)Vd(`rotate${Fd[A]}`,w,C,this.animationValues),Vd(`skew${Fd[A]}`,w,C,this.animationValues);w.render();for(const A in C)w.setStaticValue(A,C[A]),this.animationValues&&(this.animationValues[A]=C[A]);w.scheduleRender()}applyProjectionStyles(w,b){if(!this.instance||this.isSVG)return;if(!this.isVisible){w.visibility="hidden";return}const v=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,w.visibility="",w.opacity="",w.pointerEvents=Ec(b==null?void 0:b.pointerEvents)||"",w.transform=v?v(this.latestValues,""):"none";return}const C=this.getLead();if(!this.projectionDelta||!this.layout||!C.target){this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=Ec(b==null?void 0:b.pointerEvents)||""),this.hasProjected&&!no(this.latestValues)&&(w.transform=v?v({},""):"none",this.hasProjected=!1);return}w.visibility="";const A=C.animationValues||C.latestValues;this.applyTransformsToTarget();let T=kb(this.projectionDeltaWithTransform,this.treeScale,A);v&&(T=v(A,T)),w.transform=T;const{x:_,y:O}=this.projectionDelta;w.transformOrigin=`${_.origin*100}% ${O.origin*100}% 0`,C.animationValues?w.opacity=C===this?A.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:A.opacityExit:w.opacity=C===this?A.opacity!==void 0?A.opacity:"":A.opacityExit!==void 0?A.opacityExit:0;for(const L in qa){if(A[L]===void 0)continue;const{correct:B,applyTo:j,isCSSVariable:W}=qa[L],U=T==="none"?A[L]:B(A[L],C);if(j){const F=j.length;for(let Z=0;Z<F;Z++)w[j[Z]]=U}else W?this.options.visualElement.renderState.vars[L]=U:w[L]=U}this.options.layoutId&&(w.pointerEvents=C===this?Ec(b==null?void 0:b.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(w=>{var b;return(b=w.currentAnimation)==null?void 0:b.stop()}),this.root.nodes.forEach(Wm),this.root.sharedNodes.clear()}}}function Ob(t){t.updateLayout()}function Db(t){var a;const i=((a=t.resumeFrom)==null?void 0:a.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&i&&t.hasListeners("didUpdate")){const{layoutBox:u,measuredBox:m}=t.layout,{animationType:x}=t.options,w=i.source!==t.layout.source;x==="size"?ai(T=>{const _=w?i.measuredBox[T]:i.layoutBox[T],O=Tr(_);_.min=u[T].min,_.max=_.min+O}):lx(x,i.layoutBox,u)&&ai(T=>{const _=w?i.measuredBox[T]:i.layoutBox[T],O=Tr(u[T]);_.max=_.min+O,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[T].max=t.relativeTarget[T].min+O)});const b=zo();za(b,u,i.layoutBox);const v=zo();w?za(v,t.applyTransform(m,!0),i.measuredBox):za(v,u,i.layoutBox);const C=!ix(b);let A=!1;if(!t.resumeFrom){const T=t.getClosestProjectingParent();if(T&&!T.resumeFrom){const{snapshot:_,layout:O}=T;if(_&&O){const L=Mn();Wa(L,i.layoutBox,_.layoutBox);const B=Mn();Wa(B,u,O.layoutBox),sx(L,B)||(A=!0),T.options.layoutRoot&&(t.relativeTarget=B,t.relativeTargetOrigin=L,t.relativeParent=T)}}}t.notifyListeners("didUpdate",{layout:u,snapshot:i,delta:v,layoutDelta:b,hasLayoutChanged:C,hasRelativeLayoutChanged:A})}else if(t.isLead()){const{onExitComplete:u}=t.options;u&&u()}t.options.transition=void 0}function Lb(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function jb(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Bb(t){t.clearSnapshot()}function Wm(t){t.clearMeasurements()}function Hm(t){t.isLayoutDirty=!1}function Fb(t){const{visualElement:i}=t.options;i&&i.getProps().onBeforeLayoutMeasure&&i.notify("BeforeLayoutMeasure"),t.resetTransform()}function Gm(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Vb(t){t.resolveTargetDelta()}function Ub(t){t.calcProjection()}function zb(t){t.resetSkewAndRotation()}function Wb(t){t.removeLeadSnapshot()}function Xm(t,i,a){t.translate=yn(i.translate,0,a),t.scale=yn(i.scale,1,a),t.origin=i.origin,t.originPoint=i.originPoint}function Ym(t,i,a,u){t.min=yn(i.min,a.min,u),t.max=yn(i.max,a.max,u)}function Hb(t,i,a,u){Ym(t.x,i.x,a.x,u),Ym(t.y,i.y,a.y,u)}function Gb(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Xb={duration:.45,ease:[.4,0,.1,1]},$m=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Zm=$m("applewebkit/")&&!$m("chrome/")?Math.round:li;function Km(t){t.min=Zm(t.min),t.max=Zm(t.max)}function Yb(t){Km(t.x),Km(t.y)}function lx(t,i,a){return t==="position"||t==="preserve-aspect"&&!JC(Um(i),Um(a),.2)}function $b(t){var i;return t!==t.root&&((i=t.scroll)==null?void 0:i.wasRoot)}const Zb=ax({attachResizeListener:(t,i)=>Qa(t,"resize",i),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ud={current:void 0},cx=ax({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Ud.current){const t=new Zb({});t.mount(window),t.setOptions({layoutScroll:!0}),Ud.current=t}return Ud.current},resetTransform:(t,i)=>{t.style.transform=i!==void 0?i:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Kb={pan:{Feature:mb},drag:{Feature:hb,ProjectionNode:cx,MeasureLayout:tx}};function qm(t,i,a){const{props:u}=t;t.animationState&&u.whileHover&&t.animationState.setActive("whileHover",a==="Start");const m="onHover"+a,x=u[m];x&&sn.postRender(()=>x(i,al(i)))}class qb extends Ts{mount(){const{current:i}=this.node;i&&(this.unmount=y3(i,(a,u)=>(qm(this.node,u,"Start"),m=>qm(this.node,m,"End"))))}unmount(){}}class Qb extends Ts{constructor(){super(...arguments),this.isActive=!1}onFocus(){let i=!1;try{i=this.node.current.matches(":focus-visible")}catch{i=!0}!i||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=rl(Qa(this.node.current,"focus",()=>this.onFocus()),Qa(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Qm(t,i,a){const{props:u}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&u.whileTap&&t.animationState.setActive("whileTap",a==="Start");const m="onTap"+(a==="End"?"":a),x=u[m];x&&sn.postRender(()=>x(i,al(i)))}class Jb extends Ts{mount(){const{current:i}=this.node;i&&(this.unmount=b3(i,(a,u)=>(Qm(this.node,u,"Start"),(m,{success:x})=>Qm(this.node,m,x?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const yf=new WeakMap,zd=new WeakMap,eE=t=>{const i=yf.get(t.target);i&&i(t)},tE=t=>{t.forEach(eE)};function nE({root:t,...i}){const a=t||document;zd.has(a)||zd.set(a,{});const u=zd.get(a),m=JSON.stringify(i);return u[m]||(u[m]=new IntersectionObserver(tE,{root:t,...i})),u[m]}function rE(t,i,a){const u=nE(i);return yf.set(t,a),u.observe(t),()=>{yf.delete(t),u.unobserve(t)}}const iE={some:0,all:1};class sE extends Ts{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:i={}}=this.node.getProps(),{root:a,margin:u,amount:m="some",once:x}=i,w={root:a?a.current:void 0,rootMargin:u,threshold:typeof m=="number"?m:iE[m]},b=v=>{const{isIntersecting:C}=v;if(this.isInView===C||(this.isInView=C,x&&!C&&this.hasEnteredView))return;C&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",C);const{onViewportEnter:A,onViewportLeave:T}=this.node.getProps(),_=C?A:T;_&&_(v)};return rE(this.node.current,w,b)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:i,prevProps:a}=this.node;["amount","margin","root"].some(oE(i,a))&&this.startObserver()}unmount(){}}function oE({viewport:t={}},{viewport:i={}}={}){return a=>t[a]!==i[a]}const aE={inView:{Feature:sE},tap:{Feature:Jb},focus:{Feature:Qb},hover:{Feature:qb}},lE={layout:{ProjectionNode:cx,MeasureLayout:tx}},cE={...YC,...aE,...Kb,...lE},bt=cC(cE,bC);function fh(t){const i=nl(()=>lo(t)),{isStatic:a}=N.useContext(ol);if(a){const[,u]=N.useState(t);N.useEffect(()=>i.on("change",u),[])}return i}function ux(t,i){const a=fh(i()),u=()=>a.set(i());return u(),Lf(()=>{const m=()=>sn.preRender(u,!1,!0),x=t.map(w=>w.on("change",m));return()=>{x.forEach(w=>w()),Ki(u)}}),a}function uE(t){Va.current=[],t();const i=ux(Va.current,t);return Va.current=void 0,i}function wf(t,i,a,u){if(typeof t=="function")return uE(t);const m=typeof i=="function"?i:S3(i,a,u);return Array.isArray(t)?Jm(t,m):Jm([t],([x])=>m(x))}function Jm(t,i){const a=nl(()=>[]);return ux(t,()=>{a.length=0;const u=t.length;for(let m=0;m<u;m++)a[m]=t[m].get();return i(a)})}function dE(t,i={}){const{isStatic:a}=N.useContext(ol),u=()=>er(t)?t.get():t;if(a)return wf(u);const m=fh(u());return N.useInsertionEffect(()=>A3(m,t,i),[m,JSON.stringify(i)]),m}const fE={some:0,all:1};function hE(t,i,{root:a,margin:u,amount:m="some"}={}){const x=gg(t),w=new WeakMap,b=C=>{C.forEach(A=>{const T=w.get(A.target);if(A.isIntersecting!==!!T)if(A.isIntersecting){const _=i(A.target,A);typeof _=="function"?w.set(A.target,_):v.unobserve(A.target)}else typeof T=="function"&&(T(A),w.delete(A.target))})},v=new IntersectionObserver(b,{root:a,rootMargin:u,threshold:typeof m=="number"?m:fE[m]});return x.forEach(C=>v.observe(C)),()=>v.disconnect()}function mE(t,{root:i,margin:a,amount:u,once:m=!1,initial:x=!1}={}){const[w,b]=N.useState(x);return N.useEffect(()=>{if(!t.current||m&&w)return;const v=()=>(b(!0),m?void 0:()=>b(!1)),C={root:i&&i.current||void 0,margin:a,amount:u};return hE(t.current,v,C)},[i,t,a,m,u]),w}const Yo=({size:t=60,fullScreen:i=!1,message:a=null})=>i?h.jsx("div",{className:"loading-spinner-fullscreen",children:h.jsxs("div",{className:"loading-spinner-content",children:[h.jsx("div",{className:"loading-spinner",style:{width:t,height:t},children:h.jsx("div",{className:"loading-spinner-inner"})}),a&&h.jsx("p",{className:"loading-spinner-message",children:a})]})}):h.jsxs("div",{className:"loading-spinner-wrapper",children:[h.jsx("div",{className:"loading-spinner",style:{width:t,height:t},children:h.jsx("div",{className:"loading-spinner-inner"})}),a&&h.jsx("p",{className:"loading-spinner-message",children:a})]}),pE=()=>{const{login:t,signup:i,user:a,logout:u,checkAuth:m,isAuthLoading:x,authLoadingMessage:w}=N.useContext(Fn),[b,v]=N.useState(""),[C,A]=N.useState(""),[T,_]=N.useState(""),[O,L]=N.useState(null),[B,j]=N.useState(null),[W,U]=N.useState(""),[F,Z]=N.useState(0),[Q,ne]=N.useState({x:0,y:0}),[q,ie]=N.useState(1),[te,ye]=N.useState(null),[Oe,Se]=N.useState(!1),[Te,be]=N.useState(!1),[X,Le]=N.useState({}),[we,xe]=N.useState({}),[_e,Ee]=N.useState(!1),[Y,G]=N.useState(!1),[Ce,ve]=N.useState(!1),ue=N.useRef(null),[$,Re]=N.useState(!1),ge=On(),Ae=Ur(),rt=new URLSearchParams(Ae.search),Ye=rt.get("redirect"),ce=rt.get("code"),pe=Ye==="lobby",$e=()=>{const at="abcdefghijklmnopqrstuvwxyz0123456789";let Ie="";for(let le=0;le<10;le++)Ie+=at.charAt(Math.floor(Math.random()*at.length));return Ie};N.useEffect(()=>{if(pe&&!b&&!C){const at=$e();v(at),A(at),xe(Ie=>({...Ie,username:!0,password:!0})),Le(Ie=>({...Ie,username:"",password:""}))}},[pe]),N.useEffect(()=>{x||a&&ge(Ye==="lobby"?ce?`/lobby?code=${ce}`:"/?showLobbyModal=true":Ye==="product-selection"?"/product-selection":"/")},[x,a,Ye,ce,ge]),N.useEffect(()=>{F===1&&ce!=="demolobby"&&(b&&C&&T)&&!Ce&&(G(!0),ve(!0))},[F,ce,b,C,T,Ce]);const Ze=()=>{G(!1),setTimeout(()=>{ue.current&&ue.current.click()},150)},Tt=()=>{G(!1)},pt=at=>{const Ie=/^[a-z0-9]+$/;return at.length>=2&&Ie.test(at)},Qe=at=>at.length>=2,et=at=>at.length>=2,Et=(at,Ie,le)=>{const ct=et(at)&&pt(Ie)&&Qe(le);Ee(ct)},ze=()=>{F<Bt.length-1&&(Ee(!1),Z(at=>at+1))},vn=()=>{F>0&&(Z(at=>at-1),F===1&&Et(T,b,C))},tr=at=>{const Ie=at.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");v(Ie),pt(Ie)?(xe(le=>({...le,username:!0})),Le(le=>({...le,username:""}))):(xe(le=>({...le,username:!1})),Le(le=>({...le,username:"Must be at least 2 characters (letters and numbers only)"}))),Et(T,Ie,C)},Xe=at=>{const Ie=at.target.value;A(Ie),Qe(Ie)?(xe(le=>({...le,password:!0})),Le(le=>({...le,password:""}))):(xe(le=>({...le,password:!1})),Le(le=>({...le,password:"Must be at least 2 characters"}))),Et(T,b,Ie)},Rt=at=>{const Ie=at.target.value;_(Ie),et(Ie)?(xe(le=>({...le,displayName:!0})),Le(le=>({...le,displayName:""}))):(xe(le=>({...le,displayName:!1})),Le(le=>({...le,displayName:"Must be at least 2 characters"}))),Et(Ie,b,C)},We=at=>{const Ie=at.target.files[0];if(Ie){const le=new FileReader;le.onload=ct=>{const je=new Image;je.onload=()=>{let yt=je.width,Xt=je.height;const un=1500;yt>Xt&&yt>un?(Xt=Xt*un/yt,yt=un):Xt>yt&&Xt>un&&(yt=yt*un/Xt,Xt=un);const Cn=document.createElement("canvas");Cn.width=yt,Cn.height=Xt,Cn.getContext("2d").drawImage(je,0,0,yt,Xt);const en=Cn.toDataURL("image/jpeg",.75);L(Ie),j(en),Se(!0),xe(nr=>({...nr,image:!0})),Le(nr=>({...nr,image:""})),Ee(!0)},je.src=ct.target.result},le.readAsDataURL(Ie)}},ht=(at,Ie)=>{ye(Ie)},tt=async()=>{try{const at=await Uc(B,te);j(at),Se(!1)}catch(at){console.error("Error cropping the image:",at),U("Failed to crop image. Please try again.")}},_t=async(at,Ie,le)=>{if("credentials"in navigator&&window.PasswordCredential)try{const ct=new PasswordCredential({id:at,password:Ie,name:le});await navigator.credentials.store(ct),console.log("Credentials saved to password manager")}catch(ct){console.warn("Could not save credentials:",ct)}},zt=async at=>{if(at.preventDefault(),be(!0),U(""),console.log("Signup attempt - Username:",b,"Password:",C),!b||!C||!T){U("All fields are required"),be(!1);return}if(!O||!B){U("Your profile picture is required"),be(!1);return}try{const Ie="/signup",le=await wt(Ie,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:b,password:C,is_lobby_signup:pe})}),ct=await le.json();let je=b,yt=C;if(ct.error==="Username already taken")if(pe){const dt=$e(),en=dt,nr=dt;v(en),A(nr);const Rr=await wt(Ie,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:en,password:nr,is_lobby_signup:!0})}),bn=await Rr.json();if(!Rr.ok||bn.error==="Username already taken"){U("Unable to create account. Please try again."),be(!1);return}t(bn),je=en,yt=nr}else{U("Username is taken"),be(!1);return}else{if(!le.ok){U(ct.message||"Signup failed"),be(!1);return}t(ct)}if(await m(),!localStorage.getItem("access_token"))throw new Error("Authentication failed");let un=null;if(O)un=B,un=un.split(",")[1];else{const nr=await(await(await fetch("/assets/fakeprofile.png")).blob()).arrayBuffer();un=btoa(new Uint8Array(nr).reduce((Rr,bn)=>Rr+String.fromCharCode(bn),""))}if(!(await wt("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:T,image_data:un})})).ok)throw new Error("Failed to update profile");await m(),await _t(je,yt,T),ge(Ye==="lobby"?ce?`/lobby?code=${ce}`:"/?showLobbyModal=true":Ye==="product-selection"?"/product-selection":"/")}catch(Ie){console.error("Error:",Ie),U("An error occurred. Please try again.")}be(!1)},Bt=[{id:"credentials",type:"combined"},{id:"image",label:ce==="demolobby"?"Profile Image (Upload Any Image)":"Take a Selfie (so people can find you)",type:"file",onChange:We,accept:"image/*"}];return x?h.jsx(Yo,{fullScreen:!0,message:w}):h.jsxs("div",{className:"signup-container",children:[h.jsx("button",{onClick:()=>ge("/"),className:"homescreen-button",children:"Home"}),h.jsx("img",{src:"/assets/reuneo_test_11.png",alt:"Reunio Logo",className:"logo-image",style:{marginTop:"-1.5rem"}}),h.jsx("h3",{className:"signup-header",children:ce==="demolobby"?"Join the demo":"Sign Up to Join"}),ce&&ce!=="demolobby"&&h.jsxs("h2",{className:"signup-header",children:[ce," lobby"]}),ce==="demolobby"&&h.jsx("h2",{className:"signup-header",style:{fontSize:"0.9rem"},children:"Try Reuneo for Free!"}),h.jsx("p",{className:"login-link-text",children:"Already have an account?"}),h.jsx("button",{type:"button",onClick:()=>ge("/login"),className:"login-cta-button",children:"Yes, I saved my email before"}),h.jsxs("div",{className:"step-form-container",children:[h.jsx("div",{className:"step-progress",children:Bt.map((at,Ie)=>h.jsx("div",{className:`progress-dot ${Ie===F?"active":""} ${Ie<F?"completed":""}`},Ie))}),h.jsxs("form",{onSubmit:zt,autoComplete:"on",children:[h.jsx(_r,{mode:"wait",initial:!1,children:h.jsxs(bt.div,{initial:{opacity:0,x:8},animate:{opacity:1,x:0},exit:{opacity:0,x:-8},transition:{type:"spring",stiffness:500,damping:25,mass:.3},className:"step active",style:{willChange:"transform, opacity"},children:[h.jsxs("div",{className:"step-content",children:[F===0&&h.jsxs(bt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"credentials-step",children:[h.jsxs("div",{className:"name-field-container",children:[h.jsx("label",{className:"step-label",children:ce==="demolobby"?"Your Name (Type Any Name)":"Your Name"}),h.jsx("input",{type:"text",name:"displayName",autoComplete:"name",value:T,onChange:Rt,placeholder:"Enter your name",className:"step-input",autoFocus:!0}),h.jsxs(_r,{mode:"wait",children:[X.displayName&&h.jsx(bt.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},className:"step-error",children:X.displayName}),we.displayName&&!X.displayName&&h.jsx(bt.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"step-success",children:" Valid"})]})]}),_e&&h.jsx("div",{className:"inline-next-button-container",children:h.jsx(bt.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},type:"button",onClick:ze,className:"inline-next-button",children:"Continue "})}),pe?h.jsxs("div",{className:"credentials-collapsible",children:[h.jsx("p",{className:"credentials-hint",children:"Auto-generated login (edit if you want)"}),h.jsx("button",{type:"button",className:"see-more-toggle",onClick:()=>Re(!$),children:$?"Hide ":"See More "}),$&&h.jsxs(bt.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"credentials-fields-expanded",children:[h.jsxs("div",{className:"field-row",children:[h.jsx("label",{className:"step-label small-label",children:"Username"}),h.jsx("input",{type:"text",name:"username",autoComplete:"username",value:b,onChange:tr,placeholder:"Choose a username",className:"step-input"}),X.username&&h.jsx("div",{className:"step-error small-feedback",children:X.username}),we.username&&!X.username&&h.jsx("div",{className:"step-success small-feedback",children:" Valid"})]}),h.jsxs("div",{className:"field-row",children:[h.jsx("label",{className:"step-label small-label",children:"Password"}),h.jsx("input",{type:"password",name:"password",autoComplete:"new-password",value:C,onChange:Xe,placeholder:"Create a password",className:"step-input"}),X.password&&h.jsx("div",{className:"step-error small-feedback",children:X.password}),we.password&&!X.password&&h.jsx("div",{className:"step-success small-feedback",children:" Valid"})]})]})]}):h.jsxs("div",{className:"credentials-fields",children:[h.jsxs("div",{className:"field-row",children:[h.jsx("label",{className:"step-label small-label",children:"Username"}),h.jsx("input",{type:"text",name:"username",autoComplete:"username",value:b,onChange:tr,placeholder:"Choose a username",className:"step-input"}),X.username&&h.jsx("div",{className:"step-error small-feedback",children:X.username}),we.username&&!X.username&&h.jsx("div",{className:"step-success small-feedback",children:" Valid"})]}),h.jsxs("div",{className:"field-row",children:[h.jsx("label",{className:"step-label small-label",children:"Password"}),h.jsx("input",{type:"password",name:"password",autoComplete:"new-password",value:C,onChange:Xe,placeholder:"Create a password",className:"step-input"}),X.password&&h.jsx("div",{className:"step-error small-feedback",children:X.password}),we.password&&!X.password&&h.jsx("div",{className:"step-success small-feedback",children:" Valid"})]})]})]}),F===1&&h.jsxs(bt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:[h.jsx("div",{className:"inline-back-button-container",children:h.jsx(bt.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},type:"button",onClick:vn,className:"inline-back-button",children:" Back"})}),h.jsx("label",{className:"step-label",children:Bt[1].label}),h.jsx("div",{className:"image-upload-container",children:Oe?h.jsxs("div",{className:"cropper-container",children:[h.jsx("div",{className:"cropper-wrapper",children:h.jsx(Vc,{image:B,crop:Q,zoom:q,aspect:1,onCropComplete:ht,onCropChange:ne,onZoomChange:ie})}),h.jsxs("div",{className:"cropper-controls",children:[h.jsx("button",{type:"button",onClick:()=>{Se(!1),j(null),L(null)},className:"cancel-crop-button",children:"Cancel"}),h.jsx("button",{type:"button",onClick:tt,className:"save-crop-button",children:"Good"})]})]}):h.jsxs(h.Fragment,{children:[h.jsx("input",{ref:ue,type:"file",onChange:We,accept:"image/*",className:"step-input"}),B&&h.jsx("div",{children:h.jsx("img",{src:B,alt:"Profile preview",className:"profile-preview-image"})})]})})]})]}),!Oe&&h.jsx("div",{className:`button-container ${F===0?"combined-step-buttons":""}`,children:_e&&F>0&&F<Bt.length-1&&h.jsx(bt.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},type:"button",onClick:ze,className:"nextz-button",children:"Next "})})]},F)}),W&&h.jsx(bt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"error-message",children:W}),F===Bt.length-1&&h.jsx(bt.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},type:"submit",className:"primary-button",disabled:Te,children:Te?"Loading...":"Complete Signup"})]})]}),h.jsx(_r,{children:Y&&h.jsx(bt.div,{className:"selfie-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:Tt,children:h.jsxs(bt.div,{className:"selfie-modal-content",initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},transition:{type:"spring",stiffness:400,damping:25},onClick:at=>at.stopPropagation(),children:[h.jsx("h2",{className:"selfie-modal-header",children:"You Must Take a Selfie"}),h.jsx("p",{className:"selfie-modal-subtext",children:"Don't use old photos, people need to know how you look in order to find you in the room - trust us."}),h.jsx("button",{type:"button",className:"selfie-modal-button",onClick:Ze,children:"Understood"})]})})})]})},gE=5e3,dx=(t,i=null,a=null)=>{N.useEffect(()=>{const u=async()=>{try{const x=a?`/display_lobby_metadata?lobby_code=${a}`:"/display_lobby_metadata",w=await wt(x,{headers:{lobby_code:a}});if(!w.ok){console.error("Failed to fetch lobby metadata");return}const b=await w.json();t(b.player_count),i&&i(b.lobby_state)}catch(x){console.error("Error fetching lobby metadata:",x)}};u();const m=setInterval(u,gE);return()=>clearInterval(m)},[t,i,a])},Zc="currentLobbyCode",Kc="currentLobbyTimestamp",hh="currentLobbyLastValidated",xE=30*60*1e3,yE=3*60*1e3,wE=t=>{localStorage.setItem(Zc,t),localStorage.setItem(Kc,Date.now().toString()),console.log(`Stored lobby code: ${t}`)},vE=()=>{const t=localStorage.getItem(Zc),i=localStorage.getItem(Kc);return!t||!i?null:Date.now()-parseInt(i)>xE?(Oc(),console.log("Lobby code expired, cleared from storage"),null):t},CE=()=>{const t=localStorage.getItem(hh);return t?Date.now()-parseInt(t)>yE:!0},bE=()=>{localStorage.setItem(hh,Date.now().toString())},Oc=()=>{localStorage.removeItem(Zc),localStorage.removeItem(Kc),localStorage.removeItem(hh),console.log("Cleared lobby storage")},EE=()=>{localStorage.getItem(Zc)&&localStorage.setItem(Kc,Date.now().toString())},SE=()=>h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:[h.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),h.jsx("circle",{cx:"9",cy:"7",r:"4"}),h.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),h.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}),h.jsx("path",{d:"M12 11v6"}),h.jsx("path",{d:"M9 14h6"})]}),AE=()=>h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:[h.jsx("path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}),h.jsx("polyline",{points:"10 17 15 12 10 7"}),h.jsx("line",{x1:"15",y1:"12",x2:"3",y2:"12"})]}),Wd=({cx:t,cy:i,r:a,className:u})=>h.jsx("path",{className:u,d:`M${t} ${i-a} C${t+a*.1} ${i-a*.1} ${t+a*.1} ${i-a*.1} ${t+a} ${i} C${t+a*.1} ${i+a*.1} ${t+a*.1} ${i+a*.1} ${t} ${i+a} C${t-a*.1} ${i+a*.1} ${t-a*.1} ${i+a*.1} ${t-a} ${i} C${t-a*.1} ${i-a*.1} ${t-a*.1} ${i-a*.1} ${t} ${i-a}Z`}),NE=()=>h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:[h.jsx("circle",{cx:"12",cy:"12",r:"3"}),h.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),IE=()=>h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,style:{transform:"scaleX(-1)"},children:[h.jsx("path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}),h.jsx("polyline",{points:"10 17 15 12 10 7"}),h.jsx("line",{x1:"15",y1:"12",x2:"3",y2:"12"})]}),TE=()=>h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:[h.jsx("path",{d:"M12 22c-4.97 0-9-3.58-9-8 0-3.07 2.25-6.34 4.36-8.74C9.03 3.42 11 2 12 2c1 0 2.97 1.42 4.64 3.26C18.75 7.66 21 10.93 21 14c0 4.42-4.03 8-9 8z"}),h.jsx("path",{d:"M12 22c-1.66 0-3-1.79-3-4 0-1.48.84-3.2 1.7-4.3.5-.64 1.1-1.2 1.3-1.2s.8.56 1.3 1.2c.86 1.1 1.7 2.82 1.7 4.3 0 2.21-1.34 4-3 4z"})]}),ep=()=>h.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":!0,children:[h.jsx(Wd,{cx:12,cy:12,r:12.5}),h.jsx(Wd,{cx:26,cy:25,r:7}),h.jsx(Wd,{cx:27,cy:6,r:4})]});function _E({children:t,onClick:i,disabled:a,mouseX:u,spring:m,distance:x,magnification:w,baseItemSize:b,ariaLabel:v,title:C}){const A=N.useRef(null),T=wf(u,L=>{var j;const B=(j=A.current)==null?void 0:j.getBoundingClientRect();return B?L-B.x-B.width/2:x+1}),_=wf(T,[-x,0,x],[b,w,b]),O=dE(_,m);return h.jsx(bt.div,{ref:A,style:{width:O,height:O,minWidth:b,minHeight:b},onClick:a?void 0:i,onKeyDown:L=>{(L.key==="Enter"||L.key===" ")&&!a&&(L.preventDefault(),i==null||i())},className:"app-dock-item",tabIndex:a?-1:0,role:"button","aria-disabled":!!a,"aria-label":v,title:C,children:t})}const RE={mass:.1,stiffness:1400,damping:30};function kE({items:t,panelHeight:i=68,baseItemSize:a=50,magnification:u=58,distance:m=200}){const x=fh(1/0);return h.jsx("div",{className:"app-dock-outer",children:h.jsx(bt.div,{className:"app-dock-panel",style:{minHeight:i},role:"toolbar","aria-label":"Application dock",onMouseMove:({pageX:w})=>x.set(w),onMouseLeave:()=>x.set(1/0),children:t.map((w,b)=>h.jsxs(_E,{onClick:w.onClick,disabled:w.disabled,mouseX:x,spring:RE,distance:m,magnification:u,baseItemSize:a,ariaLabel:w.label,title:w.title,children:[h.jsx("div",{className:"app-dock-icon",children:w.icon}),h.jsx("span",{className:"app-dock-label",children:w.label})]},b))})})}const PE=()=>{const[t,i]=N.useState(!1),[a,u]=N.useState(!1),[m,x]=N.useState(""),[w,b]=N.useState(""),[v,C]=N.useState(""),[A,T]=N.useState(null);Pf();const{user:_,userProfile:O,checkAuth:L,permissions:B,emailVerified:j}=N.useContext(Fn),[W,U]=N.useState(null),[F,Z]=N.useState(null),[Q,ne]=N.useState([]),[q,ie]=N.useState(!1),[te,ye]=N.useState(null),[Oe,Se]=N.useState(!1),[Te,be]=N.useState(!1),X=On();dx(U,Z);const[Le,we]=N.useState(!1);N.useRef(null);const xe=N.useRef(null),_e=async($=!1)=>{const Re=vE();if(!Re||!_){ye(null);return}if(ye(Re),$||CE())try{const ge=await wt(`/display_lobby_metadata?lobby_code=${Re}`,{headers:{lobby_code:Re}});if(ge.ok){const Ae=await ge.json();Ae.status==="error"||Ae.lobby_state==="terminated"?(Oc(),ye(null)):bE()}else ge.status===404&&(Oc(),ye(null))}catch(ge){console.error("Error validating current lobby:",ge)}},Ee=async()=>{if(_){ie(!0);try{const $=await wt("/view_my_active_lobbies");if($.ok){const Re=await $.json();console.log("User's active lobbies:",Re),Re&&Re.lobbies&&Array.isArray(Re.lobbies)?ne(Re.lobbies):ne([])}else console.error("Failed to fetch user's active lobbies"),ne([])}catch($){console.error("Error fetching user's active lobbies:",$),ne([])}finally{ie(!1)}}};N.useEffect(()=>{_?(Ee(),_e(!0)):ye(null)},[_]),N.useEffect(()=>{L()},[]),N.useEffect(()=>{if(new URLSearchParams(window.location.search).get("showLobbyModal")==="true"&&_){u(!0);const ge=window.location.pathname;window.history.replaceState({},"",ge)}},[_]);const Y=$=>{(B==="admin"||B==="organizer")&&X(`/admin_lobby_view?code=${$}`)},G=$=>{$.preventDefault();const ge=new FormData($.target).get("name");if(!ge||ge.trim()===""){b("Please enter a lobby code");return}const Ae=ge.toLowerCase().replace(/[^a-z0-9]/g,"");if(Ae===""){b("Lobby code must contain only letters and numbers");return}C(Ae),u(!1),console.log(Ae),x(Ae),X(`/lobby?code=${Ae}`),x(""),b("")},Ce=()=>{we(!1),xe.current&&(xe.current.clear(),xe.current=null)},ve=()=>{if(!a)return null;const $=()=>{u(!1),x(""),b(""),Ce()};return h.jsx("div",{className:"qr-instruction-overlay",onClick:$,children:h.jsxs("div",{className:"qr-instruction-container",onClick:Re=>Re.stopPropagation(),children:[h.jsx("button",{onClick:$,className:"qr-modal-close","aria-label":"Close",children:""}),h.jsx("h2",{className:"qr-instruction-title",children:"Enter Lobby Code"}),h.jsx("p",{className:"qr-instruction-text",children:"Ask your host for the lobby code if you don't have it."}),h.jsxs("form",{onSubmit:G,className:"qr-code-form",children:[h.jsxs("div",{className:"qr-input-container",children:[h.jsx("input",{type:"text",name:"name",placeholder:"Lobby code",className:"qr-code-input",pattern:"[a-zA-Z0-9]+",title:"Only letters and numbers are allowed",autoComplete:"off",autoCapitalize:"none",required:!0}),w&&h.jsx("div",{className:"qr-error-message",children:w})]}),h.jsx("button",{type:"submit",className:"qr-instruction-primary qr-submit-button",children:"Join"})]})]})})},ue=()=>{if(!Oe)return null;const $=()=>{Se(!1),u(!0)};return h.jsx("div",{className:"qr-instruction-overlay",onClick:()=>Se(!1),children:h.jsxs("div",{className:"qr-instruction-container",onClick:Re=>Re.stopPropagation(),children:[h.jsx("button",{onClick:()=>Se(!1),className:"qr-modal-close","aria-label":"Close",children:""}),h.jsx("div",{className:"qr-instruction-icon",children:h.jsxs("svg",{width:"56",height:"56",viewBox:"0 0 24 24",fill:"none",children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"qrIconGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[h.jsx("stop",{offset:"0%",stopColor:"#144dff"}),h.jsx("stop",{offset:"100%",stopColor:"#8b5cf6"})]})}),h.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1",fill:"url(#qrIconGradient)"}),h.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"1",fill:"url(#qrIconGradient)"}),h.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",fill:"url(#qrIconGradient)"}),h.jsx("rect",{x:"14",y:"14",width:"3",height:"3",rx:"0.5",fill:"url(#qrIconGradient)"}),h.jsx("rect",{x:"18",y:"14",width:"3",height:"3",rx:"0.5",fill:"url(#qrIconGradient)"}),h.jsx("rect",{x:"14",y:"18",width:"3",height:"3",rx:"0.5",fill:"url(#qrIconGradient)"}),h.jsx("rect",{x:"18",y:"18",width:"3",height:"3",rx:"0.5",fill:"url(#qrIconGradient)"})]})}),h.jsx("h2",{className:"qr-instruction-title",children:"Open your camera app and scan the QR code provided by your host"}),h.jsx("p",{className:"qr-instruction-text",children:"Don't worry, the app will remember your matches if you are still logged in."}),h.jsxs("div",{className:"qr-instruction-buttons",children:[h.jsx("button",{className:"qr-instruction-secondary",onClick:$,children:"Can't find QR"}),h.jsx("button",{className:"qr-instruction-primary",onClick:()=>Se(!1),children:"Got it"})]})]})})};return N.useEffect(()=>{if(!Te)return;const $=Re=>{!Re.target.closest(".app-dock-outer")&&!Re.target.closest(".app-dock-expand-logout")&&be(!1)};return document.addEventListener("mousedown",$),()=>document.removeEventListener("mousedown",$)},[Te]),h.jsxs("div",{style:{position:"relative",height:"var(--viewport-height)",overflow:"hidden"},children:[h.jsxs("video",{className:"background-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,poster:"/assets/demo_app_home_video_cover.jpg",children:[h.jsx("source",{src:"/assets/demo_app_home_video_X2_small.mp4",type:"video/mp4"}),h.jsx("source",{src:"/assets/app_home_video_2.webm",type:"video/webm"}),h.jsx("img",{src:"/assets/demo_app_home_video_cover.jpg",alt:"Background fallback",style:{width:"100%",height:"100%",objectFit:"cover"}}),"Your browser does not support the video tag."]}),h.jsxs("div",{style:{position:"relative",zIndex:1,color:"white",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[h.jsx("div",{style:{position:"absolute",top:"0",left:"50%",transform:"translateX(-50%)"},children:h.jsx("img",{src:"/assets/reuneo_test_11.png",alt:"Logo",style:{width:"100px",height:"100px",objectFit:"contain"}})}),h.jsx("div",{style:{marginTop:"10%",display:"flex",flexDirection:"column"},children:h.jsx(kw,{user:_,onProfileClick:()=>i(!0)})}),h.jsx("div",{style:{position:"absolute",top:"85px",display:"none",justifyContent:"flex-end",width:"94%",left:"3%",alignItems:"center"},children:(B==="admin"||B==="organizer")&&h.jsx("button",{className:"login-button",onClick:()=>X("/organizer-account-details"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:$=>{$.currentTarget.style.transform="translateY(-2px)",$.currentTarget.style.boxShadow="0 2px 8px rgba(74, 58, 58, 0.7)"},onMouseLeave:$=>{$.currentTarget.style.transform="translateY(0)",$.currentTarget.style.boxShadow="0 0 4px rgba(74, 58, 58, 0.5)"},children:h.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Settings"})})}),(B==="admin"||B==="organizer")&&_==="topaz"&&h.jsx("div",{style:{position:"absolute",top:"120px",right:"20px",zIndex:10},children:h.jsx("button",{className:"master-lobbies-button",onClick:()=>X("/master_lobby_view"),children:"Lobbies"})}),t&&h.jsx(ey,{onSubmit:$=>{i(!1)},onClose:()=>i(!1),existingProfile:O}),B!=="admin"&&B!=="organizer"&&!te?h.jsx("div",{style:{position:"fixed",top:"46%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10,display:"flex",justifyContent:"center",alignItems:"center"},children:h.jsxs("div",{className:"app-dock-item-standalone",onClick:()=>window.location.href="https://reuneo.com/organizer-signup",onKeyDown:$=>{($.key==="Enter"||$.key===" ")&&($.preventDefault(),window.location.href="https://reuneo.com/organizer-signup")},tabIndex:0,role:"button","aria-label":"Organizer",children:[h.jsx("div",{className:"app-dock-icon",children:h.jsx(ep,{})}),h.jsx("span",{className:"app-dock-label",children:"Create"})]})}):Q.length===0&&(B==="admin"||B==="organizer")?h.jsx("div",{style:{position:"fixed",top:"46%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10,display:"flex",justifyContent:"center",alignItems:"center"},children:h.jsxs("div",{className:"app-dock-item-standalone",onClick:()=>X("/create_lobby"),onKeyDown:$=>{($.key==="Enter"||$.key===" ")&&($.preventDefault(),X("/create_lobby"))},tabIndex:0,role:"button","aria-label":"Create Lobby",children:[h.jsx("div",{className:"app-dock-icon",children:h.jsx(ep,{})}),h.jsx("span",{className:"app-dock-label",children:"Create"})]})}):null,h.jsx("div",{style:{position:"absolute",left:"50%",width:"90%",maxWidth:"1200px",textAlign:"center",marginLeft:"auto",marginRight:"auto",zIndex:1,top:"130px",transform:"translateX(-50%)"},children:_?h.jsx("h2",{className:"welcome-header",style:{color:"#ffffff",fontSize:"1rem",textTransform:"uppercase",letterSpacing:"0.1em",textShadow:"4px 4px 8px rgba(0,0,0,0.9)",margin:0},children:_&&O&&(B==="admin"||B==="organizer")?(()=>{const $="Create a Lobby",Re=O?O.name.slice(0,15):"";return h.jsxs(h.Fragment,{children:[$.split("").map((ge,Ae)=>h.jsx("span",{style:{"--i":Ae+1,marginRight:ge===" "?"0.5em":"1px"},children:ge},`main-${Ae}`)),h.jsx("br",{}),Re&&Re.split("").map((ge,Ae)=>h.jsx("span",{style:{"--i":Ae+1,marginRight:ge===" "?"0.5em":"1px"},children:ge},`name-${Ae}`))]})})():(()=>{const $="Join the Experience",Re=O?O.name.slice(0,15):"";return h.jsxs(h.Fragment,{children:[$.split("").map((ge,Ae)=>h.jsx("span",{style:{"--i":Ae+1,marginRight:ge===" "?"0.5em":"1px"},children:ge},`main-${Ae}`)),h.jsx("br",{}),Re&&Re.split("").map((ge,Ae)=>h.jsx("span",{style:{"--i":Ae+1,marginRight:ge===" "?"0.5em":"1px"},children:ge},`name-${Ae}`))]})})()}):null}),h.jsx("div",{style:{position:"absolute",bottom:"40px",left:"50%",transform:"translateX(-50%)",width:"94%",display:"flex",flexDirection:"row",justifyContent:"center",gap:"1.5rem"},children:h.jsx("div",{className:"event-item",style:{width:"auto",maxWidth:"none",margin:"0",padding:"10px 20px",borderRadius:"16px",marginBottom:"20px",cursor:"pointer",opacity:1,display:"flex",flexDirection:"row",alignItems:"center",gap:"1.5rem",":hover":{transform:"translateY(-5px)"}},children:h.jsx("div",{style:{display:"flex",gap:"1.5rem",flexDirection:"row",alignItems:"center"},children:h.jsxs("div",{style:{position:"relative"},children:[h.jsx(kE,{panelHeight:88,baseItemSize:65,magnification:75,distance:200,items:[{icon:h.jsx(SE,{}),label:"Join Lobby",onClick:()=>Se(!0),disabled:W===null||F==="terminate",title:W===null||F==="terminate"?F==="terminate"?"Lobby closed":"Lobby loading":void 0},..._?[{icon:h.jsx(TE,{}),label:"Matches",onClick:()=>X(j?"/paired-player-history":"/post-event-auth"),disabled:!1},{icon:h.jsx(NE,{}),label:"Profile",onClick:()=>{Te?(be(!1),i(!0)):be(!0)},disabled:!1}]:[{icon:h.jsx(AE,{}),label:"Login",onClick:()=>X("/login"),disabled:!1}]]}),h.jsx(_r,{children:Te&&_&&h.jsxs(bt.div,{className:"app-dock-expand-logout",initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.8},transition:{duration:.1,ease:"easeOut"},onClick:()=>{X("/logout"),be(!1)},onKeyDown:$=>{($.key==="Enter"||$.key===" ")&&($.preventDefault(),X("/logout"),be(!1))},tabIndex:0,role:"button","aria-label":"Logout",children:[h.jsx("div",{className:"app-dock-icon",children:h.jsx(IE,{})}),h.jsx("span",{className:"app-dock-label",children:"Logout"})]})})]})})})}),te&&!((B==="admin"||B==="organizer")&&Q.length>0)&&h.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"85%",maxWidth:"280px",display:"flex",justifyContent:"center",alignItems:"center",zIndex:10,transition:"all 0.3s ease"},children:h.jsxs("div",{onClick:()=>X(`/lobby?code=${te}`),style:{width:"100%",background:"linear-gradient(145deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05))",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRadius:"24px",border:"1px solid rgba(255, 255, 255, 0.25)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2)",padding:"16px 20px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",flexDirection:"row",alignItems:"center",gap:"14px",overflow:"hidden"},onMouseEnter:$=>{$.currentTarget.style.transform="scale(1.02)",$.currentTarget.style.boxShadow="0 12px 40px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.3)",$.currentTarget.style.border="1px solid rgba(255, 255, 255, 0.4)"},onMouseLeave:$=>{$.currentTarget.style.transform="scale(1)",$.currentTarget.style.boxShadow="0 8px 32px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2)",$.currentTarget.style.border="1px solid rgba(255, 255, 255, 0.25)"},children:[h.jsxs("div",{style:{position:"relative",flexShrink:0},children:[h.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"50%",background:"linear-gradient(135deg, #144dff 0%, #8b5cf6 50%, #ec4899 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 15px rgba(20, 77, 255, 0.4)",animation:"pulse-glow 2s ease-in-out infinite"},children:h.jsx("span",{style:{color:"white",fontWeight:"800",fontSize:"1.1rem",textTransform:"uppercase"},children:te.charAt(0).toUpperCase()})}),h.jsx("div",{style:{position:"absolute",top:"-2px",right:"-2px",width:"14px",height:"14px",borderRadius:"50%",background:"#22c55e",border:"2px solid rgba(255, 255, 255, 0.9)",boxShadow:"0 0 8px rgba(34, 197, 94, 0.6)",animation:"pulse-dot 1.5s ease-in-out infinite"}})]}),h.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",gap:"2px"},children:[h.jsx("span",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.65rem",fontWeight:"600",letterSpacing:"0.02em"},children:"Return to your active lobby"}),h.jsx("span",{style:{color:"white",fontWeight:"700",fontSize:"1rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",textShadow:"0 2px 4px rgba(0, 0, 0, 0.3)"},children:te.length>15?te.slice(0,15)+"...":te})]}),h.jsx("div",{style:{flexShrink:0,width:"32px",height:"32px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},children:h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})})]})}),(B==="admin"||B==="organizer")&&Q.length>0&&h.jsx("div",{style:{position:"absolute",top:"calc(32% + 80px)",left:"50%",transform:"translateX(-50%)",width:"85%",maxWidth:"280px",display:"flex",justifyContent:"center",alignItems:"center",zIndex:10,transition:"all 0.3s ease"},children:q?h.jsx("div",{style:{textAlign:"center",color:"white"},children:h.jsx("p",{children:"Loading your lobbies..."})}):Q.length>0?h.jsxs("div",{className:"admin-lobby-tile",onClick:()=>Y(Q[0]),children:[h.jsxs("div",{className:"admin-lobby-tile-icon",children:[h.jsx("div",{className:"admin-lobby-tile-icon-circle",children:h.jsx("span",{children:Q[0]&&Q[0].length>0?Q[0].charAt(0).toUpperCase():"?"})}),h.jsx("div",{className:"admin-lobby-tile-live-dot"})]}),h.jsxs("div",{className:"admin-lobby-tile-content",children:[h.jsx("span",{className:"admin-lobby-tile-subtitle",children:"Manage your active lobby"}),h.jsx("span",{className:"admin-lobby-tile-title",children:Q[0]&&Q[0].length>15?Q[0].slice(0,15)+"...":Q[0]})]}),h.jsx("div",{className:"admin-lobby-tile-arrow",children:h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})})]}):null})]}),h.jsx(ve,{}),h.jsx(ue,{})]})};function ME(){const{pathname:t}=Ur();return N.useEffect(()=>{window.scrollTo(0,0)},[t]),null}function OE(){const{pathname:t}=Ur(),i=t.startsWith("/organizer-dashboard");return N.useEffect(()=>{const a=document.getElementById("root"),u=document.body;return i?(a==null||a.classList.add("dashboard-view"),u==null||u.classList.add("dashboard-view")):(a==null||a.classList.remove("dashboard-view"),u==null||u.classList.remove("dashboard-view")),()=>{a==null||a.classList.remove("dashboard-view"),u==null||u.classList.remove("dashboard-view")}},[t,i]),null}const DE=()=>{const{login:t,signup:i,user:a,logout:u,checkAuth:m}=N.useContext(Fn),[x,w]=N.useState(""),[b,v]=N.useState(""),[C,A]=N.useState(""),[T,_]=N.useState(""),[O,L]=N.useState(!0),[B,j]=N.useState({}),[W,U]=N.useState(!1),[F,Z]=N.useState(""),Q=On(),[ne]=_p();N.useEffect(()=>{ne.get("error")==="invalid_or_expired_link"&&(Z("Your login link has expired or is invalid. Please request a new one."),window.history.replaceState({},"","/login"))},[ne]);const q=Oe=>{const Se=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,Te=/^[a-z0-9]+$/;return Oe.length>=2&&(Se.test(Oe)||Te.test(Oe))},ie=Oe=>{const Se=Oe.target.value.toLowerCase().replace(/[^a-z0-9@._\-]/g,"");w(Se);const Te=Se.includes("@");Se.length>0&&!Te?U(!0):U(!1),q(Se)?j(be=>({...be,username:""})):j(be=>({...be,username:" "}))},te=Oe=>{v(Oe.target.value)},ye=async Oe=>{if(Oe.preventDefault(),_(""),!q(x)){_("Please enter a valid email or username");return}try{const Te=await wt(O?"/login":"/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:x,password:b})});if(Te.ok){const be=await Te.json();t(be),m(),Q("/")}else{const be=await Te.json();_(be.message||`${O?"Login":"Signup"} failed`)}}catch(Se){_("Network error occurred. Please try again."),console.error("Error:",Se)}};return h.jsxs("div",{className:"login-container",children:[h.jsx("button",{onClick:()=>Q("/"),className:"homescreen-button",children:"Home"}),h.jsx("img",{src:"/assets/reuneo_test_11.png",alt:"Reunio Logo",className:"logo-image"}),h.jsx("h1",{className:"login-header",children:"Login"}),h.jsxs("div",{className:"login-signup-form",children:[F&&h.jsx("div",{className:"error-message",style:{backgroundColor:"rgba(255, 107, 107, 0.1)",border:"1px solid rgba(255, 107, 107, 0.3)",padding:"12px 16px",borderRadius:"8px",marginBottom:"16px"},children:F}),T&&h.jsx("div",{className:"error-message",children:T}),h.jsxs("form",{onSubmit:ye,children:[h.jsxs("div",{className:"form-group",children:[h.jsx("input",{type:"text",placeholder:"email or username",className:"login-input",value:x,onChange:ie,required:!0,autoComplete:"email"}),W&&h.jsx("div",{className:"step-success",children:"or username (lowercase letters and numbers)"})]}),h.jsx("div",{className:"form-group",children:h.jsx("input",{type:"password",placeholder:"password",className:"login-input",value:b,onChange:te,required:!0,autoComplete:"current-password"})}),h.jsx("button",{type:"submit",className:"login-primary-button",children:"Login"})]}),h.jsx("button",{type:"button",onClick:()=>Q("/forgot-password"),className:"forgot-password-link",children:"Forgot password?"})]})]})},LE=()=>{const t=On(),{logout:i}=N.useContext(Fn);return localStorage.removeItem("access_token"),N.useEffect(()=>{console.log("LogoutPage useEffect"),setTimeout(()=>{i(),t("/")},100)},[]),h.jsx("div",{children:"Logged out redirecting to homescreen"})};var jE=Object.defineProperty,Dc=Object.getOwnPropertySymbols,fx=Object.prototype.hasOwnProperty,hx=Object.prototype.propertyIsEnumerable,tp=(t,i,a)=>i in t?jE(t,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[i]=a,vf=(t,i)=>{for(var a in i||(i={}))fx.call(i,a)&&tp(t,a,i[a]);if(Dc)for(var a of Dc(i))hx.call(i,a)&&tp(t,a,i[a]);return t},Cf=(t,i)=>{var a={};for(var u in t)fx.call(t,u)&&i.indexOf(u)<0&&(a[u]=t[u]);if(t!=null&&Dc)for(var u of Dc(t))i.indexOf(u)<0&&hx.call(t,u)&&(a[u]=t[u]);return a};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var co;(t=>{const i=class Dt{constructor(v,C,A,T){if(this.version=v,this.errorCorrectionLevel=C,this.modules=[],this.isFunction=[],v<Dt.MIN_VERSION||v>Dt.MAX_VERSION)throw new RangeError("Version value out of range");if(T<-1||T>7)throw new RangeError("Mask value out of range");this.size=v*4+17;let _=[];for(let L=0;L<this.size;L++)_.push(!1);for(let L=0;L<this.size;L++)this.modules.push(_.slice()),this.isFunction.push(_.slice());this.drawFunctionPatterns();const O=this.addEccAndInterleave(A);if(this.drawCodewords(O),T==-1){let L=1e9;for(let B=0;B<8;B++){this.applyMask(B),this.drawFormatBits(B);const j=this.getPenaltyScore();j<L&&(T=B,L=j),this.applyMask(B)}}m(0<=T&&T<=7),this.mask=T,this.applyMask(T),this.drawFormatBits(T),this.isFunction=[]}static encodeText(v,C){const A=t.QrSegment.makeSegments(v);return Dt.encodeSegments(A,C)}static encodeBinary(v,C){const A=t.QrSegment.makeBytes(v);return Dt.encodeSegments([A],C)}static encodeSegments(v,C,A=1,T=40,_=-1,O=!0){if(!(Dt.MIN_VERSION<=A&&A<=T&&T<=Dt.MAX_VERSION)||_<-1||_>7)throw new RangeError("Invalid value");let L,B;for(L=A;;L++){const F=Dt.getNumDataCodewords(L,C)*8,Z=w.getTotalBits(v,L);if(Z<=F){B=Z;break}if(L>=T)throw new RangeError("Data too long")}for(const F of[Dt.Ecc.MEDIUM,Dt.Ecc.QUARTILE,Dt.Ecc.HIGH])O&&B<=Dt.getNumDataCodewords(L,F)*8&&(C=F);let j=[];for(const F of v){a(F.mode.modeBits,4,j),a(F.numChars,F.mode.numCharCountBits(L),j);for(const Z of F.getData())j.push(Z)}m(j.length==B);const W=Dt.getNumDataCodewords(L,C)*8;m(j.length<=W),a(0,Math.min(4,W-j.length),j),a(0,(8-j.length%8)%8,j),m(j.length%8==0);for(let F=236;j.length<W;F^=253)a(F,8,j);let U=[];for(;U.length*8<j.length;)U.push(0);return j.forEach((F,Z)=>U[Z>>>3]|=F<<7-(Z&7)),new Dt(L,C,U,_)}getModule(v,C){return 0<=v&&v<this.size&&0<=C&&C<this.size&&this.modules[C][v]}getModules(){return this.modules}drawFunctionPatterns(){for(let A=0;A<this.size;A++)this.setFunctionModule(6,A,A%2==0),this.setFunctionModule(A,6,A%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const v=this.getAlignmentPatternPositions(),C=v.length;for(let A=0;A<C;A++)for(let T=0;T<C;T++)A==0&&T==0||A==0&&T==C-1||A==C-1&&T==0||this.drawAlignmentPattern(v[A],v[T]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(v){const C=this.errorCorrectionLevel.formatBits<<3|v;let A=C;for(let _=0;_<10;_++)A=A<<1^(A>>>9)*1335;const T=(C<<10|A)^21522;m(T>>>15==0);for(let _=0;_<=5;_++)this.setFunctionModule(8,_,u(T,_));this.setFunctionModule(8,7,u(T,6)),this.setFunctionModule(8,8,u(T,7)),this.setFunctionModule(7,8,u(T,8));for(let _=9;_<15;_++)this.setFunctionModule(14-_,8,u(T,_));for(let _=0;_<8;_++)this.setFunctionModule(this.size-1-_,8,u(T,_));for(let _=8;_<15;_++)this.setFunctionModule(8,this.size-15+_,u(T,_));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let v=this.version;for(let A=0;A<12;A++)v=v<<1^(v>>>11)*7973;const C=this.version<<12|v;m(C>>>18==0);for(let A=0;A<18;A++){const T=u(C,A),_=this.size-11+A%3,O=Math.floor(A/3);this.setFunctionModule(_,O,T),this.setFunctionModule(O,_,T)}}drawFinderPattern(v,C){for(let A=-4;A<=4;A++)for(let T=-4;T<=4;T++){const _=Math.max(Math.abs(T),Math.abs(A)),O=v+T,L=C+A;0<=O&&O<this.size&&0<=L&&L<this.size&&this.setFunctionModule(O,L,_!=2&&_!=4)}}drawAlignmentPattern(v,C){for(let A=-2;A<=2;A++)for(let T=-2;T<=2;T++)this.setFunctionModule(v+T,C+A,Math.max(Math.abs(T),Math.abs(A))!=1)}setFunctionModule(v,C,A){this.modules[C][v]=A,this.isFunction[C][v]=!0}addEccAndInterleave(v){const C=this.version,A=this.errorCorrectionLevel;if(v.length!=Dt.getNumDataCodewords(C,A))throw new RangeError("Invalid argument");const T=Dt.NUM_ERROR_CORRECTION_BLOCKS[A.ordinal][C],_=Dt.ECC_CODEWORDS_PER_BLOCK[A.ordinal][C],O=Math.floor(Dt.getNumRawDataModules(C)/8),L=T-O%T,B=Math.floor(O/T);let j=[];const W=Dt.reedSolomonComputeDivisor(_);for(let F=0,Z=0;F<T;F++){let Q=v.slice(Z,Z+B-_+(F<L?0:1));Z+=Q.length;const ne=Dt.reedSolomonComputeRemainder(Q,W);F<L&&Q.push(0),j.push(Q.concat(ne))}let U=[];for(let F=0;F<j[0].length;F++)j.forEach((Z,Q)=>{(F!=B-_||Q>=L)&&U.push(Z[F])});return m(U.length==O),U}drawCodewords(v){if(v.length!=Math.floor(Dt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let C=0;for(let A=this.size-1;A>=1;A-=2){A==6&&(A=5);for(let T=0;T<this.size;T++)for(let _=0;_<2;_++){const O=A-_,B=(A+1&2)==0?this.size-1-T:T;!this.isFunction[B][O]&&C<v.length*8&&(this.modules[B][O]=u(v[C>>>3],7-(C&7)),C++)}}m(C==v.length*8)}applyMask(v){if(v<0||v>7)throw new RangeError("Mask value out of range");for(let C=0;C<this.size;C++)for(let A=0;A<this.size;A++){let T;switch(v){case 0:T=(A+C)%2==0;break;case 1:T=C%2==0;break;case 2:T=A%3==0;break;case 3:T=(A+C)%3==0;break;case 4:T=(Math.floor(A/3)+Math.floor(C/2))%2==0;break;case 5:T=A*C%2+A*C%3==0;break;case 6:T=(A*C%2+A*C%3)%2==0;break;case 7:T=((A+C)%2+A*C%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[C][A]&&T&&(this.modules[C][A]=!this.modules[C][A])}}getPenaltyScore(){let v=0;for(let _=0;_<this.size;_++){let O=!1,L=0,B=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[_][j]==O?(L++,L==5?v+=Dt.PENALTY_N1:L>5&&v++):(this.finderPenaltyAddHistory(L,B),O||(v+=this.finderPenaltyCountPatterns(B)*Dt.PENALTY_N3),O=this.modules[_][j],L=1);v+=this.finderPenaltyTerminateAndCount(O,L,B)*Dt.PENALTY_N3}for(let _=0;_<this.size;_++){let O=!1,L=0,B=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[j][_]==O?(L++,L==5?v+=Dt.PENALTY_N1:L>5&&v++):(this.finderPenaltyAddHistory(L,B),O||(v+=this.finderPenaltyCountPatterns(B)*Dt.PENALTY_N3),O=this.modules[j][_],L=1);v+=this.finderPenaltyTerminateAndCount(O,L,B)*Dt.PENALTY_N3}for(let _=0;_<this.size-1;_++)for(let O=0;O<this.size-1;O++){const L=this.modules[_][O];L==this.modules[_][O+1]&&L==this.modules[_+1][O]&&L==this.modules[_+1][O+1]&&(v+=Dt.PENALTY_N2)}let C=0;for(const _ of this.modules)C=_.reduce((O,L)=>O+(L?1:0),C);const A=this.size*this.size,T=Math.ceil(Math.abs(C*20-A*10)/A)-1;return m(0<=T&&T<=9),v+=T*Dt.PENALTY_N4,m(0<=v&&v<=2568888),v}getAlignmentPatternPositions(){if(this.version==1)return[];{const v=Math.floor(this.version/7)+2,C=this.version==32?26:Math.ceil((this.version*4+4)/(v*2-2))*2;let A=[6];for(let T=this.size-7;A.length<v;T-=C)A.splice(1,0,T);return A}}static getNumRawDataModules(v){if(v<Dt.MIN_VERSION||v>Dt.MAX_VERSION)throw new RangeError("Version number out of range");let C=(16*v+128)*v+64;if(v>=2){const A=Math.floor(v/7)+2;C-=(25*A-10)*A-55,v>=7&&(C-=36)}return m(208<=C&&C<=29648),C}static getNumDataCodewords(v,C){return Math.floor(Dt.getNumRawDataModules(v)/8)-Dt.ECC_CODEWORDS_PER_BLOCK[C.ordinal][v]*Dt.NUM_ERROR_CORRECTION_BLOCKS[C.ordinal][v]}static reedSolomonComputeDivisor(v){if(v<1||v>255)throw new RangeError("Degree out of range");let C=[];for(let T=0;T<v-1;T++)C.push(0);C.push(1);let A=1;for(let T=0;T<v;T++){for(let _=0;_<C.length;_++)C[_]=Dt.reedSolomonMultiply(C[_],A),_+1<C.length&&(C[_]^=C[_+1]);A=Dt.reedSolomonMultiply(A,2)}return C}static reedSolomonComputeRemainder(v,C){let A=C.map(T=>0);for(const T of v){const _=T^A.shift();A.push(0),C.forEach((O,L)=>A[L]^=Dt.reedSolomonMultiply(O,_))}return A}static reedSolomonMultiply(v,C){if(v>>>8||C>>>8)throw new RangeError("Byte out of range");let A=0;for(let T=7;T>=0;T--)A=A<<1^(A>>>7)*285,A^=(C>>>T&1)*v;return m(A>>>8==0),A}finderPenaltyCountPatterns(v){const C=v[1];m(C<=this.size*3);const A=C>0&&v[2]==C&&v[3]==C*3&&v[4]==C&&v[5]==C;return(A&&v[0]>=C*4&&v[6]>=C?1:0)+(A&&v[6]>=C*4&&v[0]>=C?1:0)}finderPenaltyTerminateAndCount(v,C,A){return v&&(this.finderPenaltyAddHistory(C,A),C=0),C+=this.size,this.finderPenaltyAddHistory(C,A),this.finderPenaltyCountPatterns(A)}finderPenaltyAddHistory(v,C){C[0]==0&&(v+=this.size),C.pop(),C.unshift(v)}};i.MIN_VERSION=1,i.MAX_VERSION=40,i.PENALTY_N1=3,i.PENALTY_N2=3,i.PENALTY_N3=40,i.PENALTY_N4=10,i.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],i.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=i;function a(b,v,C){if(v<0||v>31||b>>>v)throw new RangeError("Value out of range");for(let A=v-1;A>=0;A--)C.push(b>>>A&1)}function u(b,v){return(b>>>v&1)!=0}function m(b){if(!b)throw new Error("Assertion error")}const x=class Nn{constructor(v,C,A){if(this.mode=v,this.numChars=C,this.bitData=A,C<0)throw new RangeError("Invalid argument");this.bitData=A.slice()}static makeBytes(v){let C=[];for(const A of v)a(A,8,C);return new Nn(Nn.Mode.BYTE,v.length,C)}static makeNumeric(v){if(!Nn.isNumeric(v))throw new RangeError("String contains non-numeric characters");let C=[];for(let A=0;A<v.length;){const T=Math.min(v.length-A,3);a(parseInt(v.substring(A,A+T),10),T*3+1,C),A+=T}return new Nn(Nn.Mode.NUMERIC,v.length,C)}static makeAlphanumeric(v){if(!Nn.isAlphanumeric(v))throw new RangeError("String contains unencodable characters in alphanumeric mode");let C=[],A;for(A=0;A+2<=v.length;A+=2){let T=Nn.ALPHANUMERIC_CHARSET.indexOf(v.charAt(A))*45;T+=Nn.ALPHANUMERIC_CHARSET.indexOf(v.charAt(A+1)),a(T,11,C)}return A<v.length&&a(Nn.ALPHANUMERIC_CHARSET.indexOf(v.charAt(A)),6,C),new Nn(Nn.Mode.ALPHANUMERIC,v.length,C)}static makeSegments(v){return v==""?[]:Nn.isNumeric(v)?[Nn.makeNumeric(v)]:Nn.isAlphanumeric(v)?[Nn.makeAlphanumeric(v)]:[Nn.makeBytes(Nn.toUtf8ByteArray(v))]}static makeEci(v){let C=[];if(v<0)throw new RangeError("ECI assignment value out of range");if(v<128)a(v,8,C);else if(v<16384)a(2,2,C),a(v,14,C);else if(v<1e6)a(6,3,C),a(v,21,C);else throw new RangeError("ECI assignment value out of range");return new Nn(Nn.Mode.ECI,0,C)}static isNumeric(v){return Nn.NUMERIC_REGEX.test(v)}static isAlphanumeric(v){return Nn.ALPHANUMERIC_REGEX.test(v)}getData(){return this.bitData.slice()}static getTotalBits(v,C){let A=0;for(const T of v){const _=T.mode.numCharCountBits(C);if(T.numChars>=1<<_)return 1/0;A+=4+_+T.bitData.length}return A}static toUtf8ByteArray(v){v=encodeURI(v);let C=[];for(let A=0;A<v.length;A++)v.charAt(A)!="%"?C.push(v.charCodeAt(A)):(C.push(parseInt(v.substring(A+1,A+3),16)),A+=2);return C}};x.NUMERIC_REGEX=/^[0-9]*$/,x.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,x.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let w=x;t.QrSegment=x})(co||(co={}));(t=>{(i=>{const a=class{constructor(m,x){this.ordinal=m,this.formatBits=x}};a.LOW=new a(0,1),a.MEDIUM=new a(1,0),a.QUARTILE=new a(2,3),a.HIGH=new a(3,2),i.Ecc=a})(t.QrCode||(t.QrCode={}))})(co||(co={}));(t=>{(i=>{const a=class{constructor(m,x){this.modeBits=m,this.numBitsCharCount=x}numCharCountBits(m){return this.numBitsCharCount[Math.floor((m+7)/17)]}};a.NUMERIC=new a(1,[10,12,14]),a.ALPHANUMERIC=new a(2,[9,11,13]),a.BYTE=new a(4,[8,16,16]),a.KANJI=new a(8,[8,10,12]),a.ECI=new a(7,[0,0,0]),i.Mode=a})(t.QrSegment||(t.QrSegment={}))})(co||(co={}));var Wo=co;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var BE={L:Wo.QrCode.Ecc.LOW,M:Wo.QrCode.Ecc.MEDIUM,Q:Wo.QrCode.Ecc.QUARTILE,H:Wo.QrCode.Ecc.HIGH},mx=128,px="L",gx="#FFFFFF",xx="#000000",yx=!1,wx=1,FE=4,VE=0,UE=.1;function vx(t,i=0){const a=[];return t.forEach(function(u,m){let x=null;u.forEach(function(w,b){if(!w&&x!==null){a.push(`M${x+i} ${m+i}h${b-x}v1H${x+i}z`),x=null;return}if(b===u.length-1){if(!w)return;x===null?a.push(`M${b+i},${m+i} h1v1H${b+i}z`):a.push(`M${x+i},${m+i} h${b+1-x}v1H${x+i}z`);return}w&&x===null&&(x=b)})}),a.join("")}function Cx(t,i){return t.slice().map((a,u)=>u<i.y||u>=i.y+i.h?a:a.map((m,x)=>x<i.x||x>=i.x+i.w?m:!1))}function zE(t,i,a,u){if(u==null)return null;const m=t.length+a*2,x=Math.floor(i*UE),w=m/i,b=(u.width||x)*w,v=(u.height||x)*w,C=u.x==null?t.length/2-b/2:u.x*w,A=u.y==null?t.length/2-v/2:u.y*w,T=u.opacity==null?1:u.opacity;let _=null;if(u.excavate){let L=Math.floor(C),B=Math.floor(A),j=Math.ceil(b+C-L),W=Math.ceil(v+A-B);_={x:L,y:B,w:j,h:W}}const O=u.crossOrigin;return{x:C,y:A,h:v,w:b,excavation:_,opacity:T,crossOrigin:O}}function WE(t,i){return i!=null?Math.max(Math.floor(i),0):t?FE:VE}function bx({value:t,level:i,minVersion:a,includeMargin:u,marginSize:m,imageSettings:x,size:w,boostLevel:b}){let v=Gt.useMemo(()=>{const L=(Array.isArray(t)?t:[t]).reduce((B,j)=>(B.push(...Wo.QrSegment.makeSegments(j)),B),[]);return Wo.QrCode.encodeSegments(L,BE[i],a,void 0,void 0,b)},[t,i,a,b]);const{cells:C,margin:A,numCells:T,calculatedImageSettings:_}=Gt.useMemo(()=>{let O=v.getModules();const L=WE(u,m),B=O.length+L*2,j=zE(O,w,L,x);return{cells:O,margin:L,numCells:B,calculatedImageSettings:j}},[v,w,x,u,m]);return{qrcode:v,margin:A,cells:C,numCells:T,calculatedImageSettings:_}}var HE=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),GE=Gt.forwardRef(function(i,a){const u=i,{value:m,size:x=mx,level:w=px,bgColor:b=gx,fgColor:v=xx,includeMargin:C=yx,minVersion:A=wx,boostLevel:T,marginSize:_,imageSettings:O}=u,B=Cf(u,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:j}=B,W=Cf(B,["style"]),U=O==null?void 0:O.src,F=Gt.useRef(null),Z=Gt.useRef(null),Q=Gt.useCallback(be=>{F.current=be,typeof a=="function"?a(be):a&&(a.current=be)},[a]),[ne,q]=Gt.useState(!1),{margin:ie,cells:te,numCells:ye,calculatedImageSettings:Oe}=bx({value:m,level:w,minVersion:A,boostLevel:T,includeMargin:C,marginSize:_,imageSettings:O,size:x});Gt.useEffect(()=>{if(F.current!=null){const be=F.current,X=be.getContext("2d");if(!X)return;let Le=te;const we=Z.current,xe=Oe!=null&&we!==null&&we.complete&&we.naturalHeight!==0&&we.naturalWidth!==0;xe&&Oe.excavation!=null&&(Le=Cx(te,Oe.excavation));const _e=window.devicePixelRatio||1;be.height=be.width=x*_e;const Ee=x/ye*_e;X.scale(Ee,Ee),X.fillStyle=b,X.fillRect(0,0,ye,ye),X.fillStyle=v,HE?X.fill(new Path2D(vx(Le,ie))):te.forEach(function(Y,G){Y.forEach(function(Ce,ve){Ce&&X.fillRect(ve+ie,G+ie,1,1)})}),Oe&&(X.globalAlpha=Oe.opacity),xe&&X.drawImage(we,Oe.x+ie,Oe.y+ie,Oe.w,Oe.h)}}),Gt.useEffect(()=>{q(!1)},[U]);const Se=vf({height:x,width:x},j);let Te=null;return U!=null&&(Te=Gt.createElement("img",{src:U,key:U,style:{display:"none"},onLoad:()=>{q(!0)},ref:Z,crossOrigin:Oe==null?void 0:Oe.crossOrigin})),Gt.createElement(Gt.Fragment,null,Gt.createElement("canvas",vf({style:Se,height:x,width:x,ref:Q,role:"img"},W)),Te)});GE.displayName="QRCodeCanvas";var mh=Gt.forwardRef(function(i,a){const u=i,{value:m,size:x=mx,level:w=px,bgColor:b=gx,fgColor:v=xx,includeMargin:C=yx,minVersion:A=wx,boostLevel:T,title:_,marginSize:O,imageSettings:L}=u,B=Cf(u,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:j,cells:W,numCells:U,calculatedImageSettings:F}=bx({value:m,level:w,minVersion:A,boostLevel:T,includeMargin:C,marginSize:O,imageSettings:L,size:x});let Z=W,Q=null;L!=null&&F!=null&&(F.excavation!=null&&(Z=Cx(W,F.excavation)),Q=Gt.createElement("image",{href:L.src,height:F.h,width:F.w,x:F.x+j,y:F.y+j,preserveAspectRatio:"none",opacity:F.opacity,crossOrigin:F.crossOrigin}));const ne=vx(Z,j);return Gt.createElement("svg",vf({height:x,width:x,viewBox:`0 0 ${U} ${U}`,ref:a,role:"img"},B),!!_&&Gt.createElement("title",null,_),Gt.createElement("path",{fill:b,d:`M0,0 h${U}v${U}H0z`,shapeRendering:"crispEdges"}),Gt.createElement("path",{fill:v,d:ne,shapeRendering:"crispEdges"}),Q)});mh.displayName="QRCodeSVG";const XE=({player:t})=>h.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"350px",height:"500px",margin:"0 auto",position:"relative"},children:t!=null&&t.image_data?h.jsxs("div",{style:{position:"relative",width:"350px",height:"450px"},children:[h.jsx("img",{src:`data:image/jpeg;base64,${t.image_data}`,alt:t.name,style:{width:"350px",height:"450px",objectFit:"cover",borderRadius:"28px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.15)",margin:"auto",display:"block"},onError:i=>{console.error("Image failed to load:",i),i.target.style.display="none"}}),h.jsx("div",{style:{position:"absolute",bottom:"-6px",left:"1px",right:"1px",background:"linear-gradient(135deg, #42A5F5 0%, #2196F3 30%, #1976D2 70%, #1565C0 100%)",color:"white",padding:"14px 28px",borderRadius:"50px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',boxShadow:"0 4px 12px rgba(33, 150, 243, 0.25)",letterSpacing:"0.02em"},children:t.name})]}):h.jsxs("div",{style:{width:"350px",height:"450px",backgroundColor:"#f0f1f4",borderRadius:"28px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"relative",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[h.jsx("p",{style:{marginBottom:"60px",color:"#6b7280"},children:"No image available"}),h.jsx("div",{style:{position:"absolute",bottom:"-6px",left:"1px",right:"1px",background:"linear-gradient(135deg, #42A5F5 0%, #2196F3 30%, #1976D2 70%, #1565C0 100%)",color:"white",padding:"14px 28px",borderRadius:"50px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',boxShadow:"0 4px 12px rgba(33, 150, 243, 0.25)",letterSpacing:"0.02em"},children:t.name})]})});var np=typeof window>"u"?N.useEffect:N.useLayoutEffect,YE=({isPlaying:t,duration:i,startAt:a=0,updateInterval:u=0,onComplete:m,onUpdate:x})=>{let[w,b]=N.useState(a),v=N.useRef(0),C=N.useRef(a),A=N.useRef(a*-1e3),T=N.useRef(null),_=N.useRef(null),O=N.useRef(null),L=W=>{let U=W/1e3;if(_.current===null){_.current=U,T.current=requestAnimationFrame(L);return}let F=U-_.current,Z=v.current+F;_.current=U,v.current=Z;let Q=C.current+(u===0?Z:(Z/u|0)*u),ne=C.current+Z,q=typeof i=="number"&&ne>=i;b(q?i:Q),q||(T.current=requestAnimationFrame(L))},B=()=>{T.current&&cancelAnimationFrame(T.current),O.current&&clearTimeout(O.current),_.current=null},j=N.useCallback(W=>{B(),v.current=0;let U=typeof W=="number"?W:a;C.current=U,b(U),t&&(T.current=requestAnimationFrame(L))},[t,a]);return np(()=>{if(x==null||x(w),i&&w>=i){A.current+=i*1e3;let{shouldRepeat:W=!1,delay:U=0,newStartAt:F}=(m==null?void 0:m(A.current/1e3))||{};W&&(O.current=setTimeout(()=>j(F),U*1e3))}},[w,i]),np(()=>(t&&(T.current=requestAnimationFrame(L)),B),[t,i,u]),{elapsedTime:w,reset:j}},$E=(t,i,a)=>{let u=t/2,m=i/2,x=u-m,w=2*x,b=a==="clockwise"?"1,0":"0,1",v=2*Math.PI*x;return{path:`m ${u},${m} a ${x},${x} 0 ${b} 0,${w} a ${x},${x} 0 ${b} 0,-${w}`,pathLength:v}},rp=(t,i)=>t===0||t===i?0:typeof i=="number"?t-i:0,ZE=t=>({position:"relative",width:t,height:t}),KE={display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,top:0,width:"100%",height:"100%"},Ex=(t,i,a,u,m)=>{if(u===0)return i;let x=(m?u-t:t)/u;return i+a*x},ip=t=>{var i,a;return(a=(i=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(u,m,x,w)=>`#${m}${m}${x}${x}${w}${w}`).substring(1).match(/.{2}/g))==null?void 0:i.map(u=>parseInt(u,16)))!=null?a:[]},qE=(t,i)=>{var a;let{colors:u,colorsTime:m,isSmoothColorTransition:x=!0}=t;if(typeof u=="string")return u;let w=(a=m==null?void 0:m.findIndex((_,O)=>_>=i&&i>=m[O+1]))!=null?a:-1;if(!m||w===-1)return u[0];if(!x)return u[w];let b=m[w]-i,v=m[w]-m[w+1],C=ip(u[w]),A=ip(u[w+1]),T=!!t.isGrowing;return`rgb(${C.map((_,O)=>Ex(b,_,A[O]-_,v,T)|0).join(",")})`},QE=t=>{let{duration:i,initialRemainingTime:a,updateInterval:u,size:m=180,strokeWidth:x=12,trailStrokeWidth:w,isPlaying:b=!1,isGrowing:v=!1,rotation:C="clockwise",onComplete:A,onUpdate:T}=t,_=N.useRef(),O=Math.max(x,w??0),{path:L,pathLength:B}=$E(m,O,C),{elapsedTime:j}=YE({isPlaying:b,duration:i,startAt:rp(i,a),updateInterval:u,onUpdate:typeof T=="function"?U=>{let F=Math.ceil(i-U);F!==_.current&&(_.current=F,T(F))}:void 0,onComplete:typeof A=="function"?U=>{var F;let{shouldRepeat:Z,delay:Q,newInitialRemainingTime:ne}=(F=A(U))!=null?F:{};if(Z)return{shouldRepeat:Z,delay:Q,newStartAt:rp(i,ne)}}:void 0}),W=i-j;return{elapsedTime:j,path:L,pathLength:B,remainingTime:Math.ceil(W),rotation:C,size:m,stroke:qE(t,W),strokeDashoffset:Ex(j,0,B,i,v),strokeWidth:x}},ph=t=>{let{children:i,strokeLinecap:a,trailColor:u,trailStrokeWidth:m}=t,{path:x,pathLength:w,stroke:b,strokeDashoffset:v,remainingTime:C,elapsedTime:A,size:T,strokeWidth:_}=QE(t);return Gt.createElement("div",{style:ZE(T)},Gt.createElement("svg",{viewBox:`0 0 ${T} ${T}`,width:T,height:T,xmlns:"http://www.w3.org/2000/svg"},Gt.createElement("path",{d:x,fill:"none",stroke:u??"#d9d9d9",strokeWidth:m??_}),Gt.createElement("path",{d:x,fill:"none",stroke:b,strokeLinecap:a??"round",strokeWidth:_,strokeDasharray:w,strokeDashoffset:v})),typeof i=="function"&&Gt.createElement("div",{style:KE},i({remainingTime:C,elapsedTime:A,color:b})))};ph.displayName="CountdownCircleTimer";const JE=({onComplete:t})=>{const[i,a]=N.useState(7),u=N.useRef(null);N.useEffect(()=>(u.current&&clearInterval(u.current),u.current=setInterval(()=>{a(b=>b<=1?(clearInterval(u.current),t&&setTimeout(t,400),0):b-1)},1e3),()=>{u.current&&clearInterval(u.current)}),[t]);const m=i/7,x=2*Math.PI*120,w=x*(1-m);return h.jsxs("div",{className:"lobby-countdown-overlay",children:[h.jsx("div",{className:"countdown-bg-gradient"}),h.jsxs("div",{className:"countdown-floating-orbs",children:[h.jsx("div",{className:"orb orb-1"}),h.jsx("div",{className:"orb orb-2"}),h.jsx("div",{className:"orb orb-3"}),h.jsx("div",{className:"orb orb-4"})]}),h.jsxs("div",{className:"lobby-countdown-content",children:[h.jsxs("svg",{className:"countdown-ring",viewBox:"0 0 260 260",children:[h.jsx("circle",{className:"countdown-ring-bg",cx:"130",cy:"130",r:"120",fill:"none",strokeWidth:"6"}),h.jsx(bt.circle,{className:"countdown-ring-progress",cx:"130",cy:"130",r:"120",fill:"none",strokeWidth:"6",strokeLinecap:"round",strokeDasharray:x,initial:{strokeDashoffset:0},animate:{strokeDashoffset:w},transition:{duration:.8,ease:"easeInOut"}})]}),h.jsx("div",{className:"countdown-number-container",children:h.jsx(_r,{mode:"popLayout",children:h.jsx(bt.div,{className:"lobby-countdown-number",initial:{scale:.5,opacity:0,filter:"blur(10px)",y:40},animate:{scale:1,opacity:1,filter:"blur(0px)",y:0},exit:{scale:1.5,opacity:0,filter:"blur(8px)",y:-30},transition:{duration:.5,ease:[.16,1,.3,1]},children:i},i)})}),h.jsx(bt.div,{className:"lobby-countdown-text",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.5},children:i>0?"Get ready!":"Starting..."})]}),h.jsx(_r,{children:h.jsx(bt.div,{className:"countdown-pulse",initial:{scale:.8,opacity:.5},animate:{scale:2.5,opacity:0},transition:{duration:1,ease:"easeOut"}},i)})]})},eS=({onComplete:t,lobbyCode:i="this"})=>{const{userProfile:a}=N.useContext(Fn),[u,m]=N.useState(0),[x,w]=N.useState(!1),[b,v]=N.useState(!1),[C,A]=N.useState([0]),[T,_]=N.useState(!1),O=N.useRef(null),L=N.useRef(null),B=[{image:"/assets/how_to_tutorial_updated_slide1.svg",duration:2e3,animatedText:"Find your match using their profile picture!"},{image:"/assets/how_to_pt2_2.svg",duration:4e3,animatedText:"Raise volume to the max, to know when you have a match!"},{image:"/assets/how_to_tutorial_updated_slide3.svg",duration:4e3,animatedText:"Tap leave to stop being paired/take a break"}];return N.useEffect(()=>{const j=()=>{if(u>=B.length-1){clearInterval(O.current),t&&t();return}w(!0);const W=u+1;A([u,W]),L.current=setTimeout(()=>{_(!1),m(W),w(!1),setTimeout(()=>{A([W]),v(!0),B[W].animatedText&&_(!0)},500)},500)};return O.current=setInterval(j,B[u].duration),v(!0),u===0&&B[0].animatedText&&_(!0),()=>{O.current&&clearInterval(O.current),L.current&&clearTimeout(L.current)}},[u,B.length,t]),h.jsx("div",{className:"tutorial-overlay",children:h.jsxs("div",{className:"tutorial-container",children:[C.map(j=>h.jsxs("div",{className:`tutorial-slide ${j===u?"current":j<u?"previous":"next"}`,children:[j===u&&B[j].animatedText&&T&&h.jsx("div",{className:"animated-text pop-burst",children:B[j].animatedText}),j===1&&h.jsx("div",{className:"volume-arrow-container",children:h.jsx("svg",{className:"volume-arrow",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M19 12H5M5 12L12 5M5 12L12 19",stroke:"#144dff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),h.jsx("div",{className:`tutorial-image-container ${j===0?"first-slide":""}`,children:h.jsx("img",{src:B[j].image,alt:`Tutorial step ${j+1}`,className:"tutorial-image"})}),h.jsx("div",{className:`tutorial-text ${b&&j===u?"text-animate":""}`,children:B[j].text})]},j)),h.jsx("div",{className:"tutorial-progress-bar-container",children:h.jsx("div",{className:"tutorial-progress-bar",children:h.jsx("div",{className:"tutorial-progress-bar-fill"})})})]})})},tS=t=>Array.from({length:t},(i,a)=>{const u=a/t*Math.PI*2,m=300+Math.random()*200;return{id:a,startX:Math.cos(u)*m,startY:Math.sin(u)*m,delay:Math.random()*.5,duration:.8+Math.random()*.4,size:4+Math.random()*6}}),nS=t=>Array.from({length:t},(i,a)=>({id:a,left:Math.random()*100,delay:Math.random()*2,duration:1+Math.random()*1,size:2+Math.random()*3})),rS=({isVisible:t,onAnimationEnd:i})=>{const[a,u]=N.useState(!1),[m,x]=N.useState(!1),w=N.useRef(null),b=N.useMemo(()=>tS(30),[]),v=N.useMemo(()=>nS(20),[]);return N.useEffect(()=>(w.current&&clearTimeout(w.current),t?(u(!0),x(!1),setTimeout(()=>x(!0),600),w.current=setTimeout(()=>{u(!1),x(!1),i&&i()},3500)):(u(!1),x(!1)),()=>{w.current&&(clearTimeout(w.current),w.current=null)}),[t,i]),h.jsx(_r,{children:a&&h.jsxs(bt.div,{className:"match-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[h.jsx("div",{className:"match-spotlight-bg"}),h.jsx("div",{className:"spotlight-rays",children:[...Array(8)].map((C,A)=>h.jsx(bt.div,{className:"ray",style:{transform:`rotate(${A*45}deg)`},initial:{opacity:0,scaleY:0},animate:{opacity:.15,scaleY:1},transition:{delay:.3+A*.05,duration:.6,ease:"easeOut"}},A))}),h.jsx("div",{className:"particles-container",children:b.map(C=>h.jsx(bt.div,{className:"converge-particle",style:{width:C.size,height:C.size},initial:{x:C.startX,y:C.startY,opacity:0,scale:0},animate:{x:0,y:0,opacity:[0,1,1,0],scale:[0,1.5,1,0]},transition:{duration:C.duration,delay:C.delay,ease:[.25,.1,.25,1]}},C.id))}),h.jsx(bt.div,{className:"central-burst",initial:{scale:0,opacity:0},animate:{scale:[0,1.5,1],opacity:[0,1,.8]},transition:{delay:.5,duration:.6,ease:"easeOut"}}),h.jsx("div",{className:"falling-stars",children:v.map(C=>h.jsx(bt.div,{className:"falling-star",style:{left:`${C.left}%`,width:C.size,height:C.size},initial:{y:-20,opacity:0},animate:{y:[null,window.innerHeight+20],opacity:[0,1,1,0]},transition:{duration:C.duration,delay:C.delay,repeat:1,ease:"linear"}},C.id))}),h.jsx(_r,{children:m&&h.jsxs(bt.div,{className:"match-text-container",initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:1.2,opacity:0},transition:{type:"spring",stiffness:300,damping:20},children:[h.jsx(bt.div,{className:"match-text-glow",animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:"It's a Match!"}),h.jsx("div",{className:"match-text",children:"It's a Match!"}),h.jsx(bt.div,{className:"match-subtext",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:.3,duration:.4},children:"Get ready to connect"})]})}),m&&h.jsx(bt.div,{className:"ring-pulse",initial:{scale:.2,opacity:1},animate:{scale:3,opacity:0},transition:{duration:1,ease:"easeOut"}})]})})},iS=({isVisible:t,onAnimationEnd:i})=>{const[a,u]=N.useState(!1),m=N.useRef(null);return N.useEffect(()=>(m.current&&clearTimeout(m.current),t?(u(!0),m.current=setTimeout(()=>{u(!1),i&&i()},2200)):u(!1),()=>{m.current&&(clearTimeout(m.current),m.current=null)}),[t,i]),h.jsx(_r,{children:a&&h.jsxs(bt.div,{className:"ready-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[h.jsx("div",{className:"ready-backdrop"}),h.jsxs(bt.div,{className:"ready-card",initial:{scale:.8,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},transition:{type:"spring",stiffness:300,damping:25,delay:.1},children:[h.jsxs("div",{className:"checkmark-container",children:[h.jsxs("svg",{className:"checkmark-svg",viewBox:"0 0 100 100",children:[h.jsx(bt.circle,{className:"checkmark-circle",cx:"50",cy:"50",r:"45",fill:"none",strokeWidth:"4",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.5,delay:.2,ease:"easeOut"}}),h.jsx(bt.path,{className:"checkmark-check",d:"M30 50 L45 65 L70 35",fill:"none",strokeWidth:"5",strokeLinecap:"round",strokeLinejoin:"round",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.4,delay:.6,ease:"easeOut"}})]}),h.jsx(bt.div,{className:"success-pulse",initial:{scale:.8,opacity:.6},animate:{scale:1.8,opacity:0},transition:{duration:.8,delay:.9,ease:"easeOut"}})]}),h.jsx(bt.div,{className:"ready-text",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.8,duration:.3},children:"You're ready!"}),h.jsx(bt.div,{className:"ready-subtext",initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:.3},children:"Waiting for the next round"})]})]})})},sS=({children:t,delay:i=0,index:a,onMouseEnter:u})=>{const m=N.useRef(null),x=mE(m,{amount:.5,once:!1});return h.jsx(bt.div,{ref:m,"data-index":a,onMouseEnter:u,initial:{scale:.7,opacity:0},animate:x?{scale:1,opacity:1}:{scale:.7,opacity:0},transition:{duration:.2,delay:i},className:"animated-tag-item-wrapper",children:t})},sp=({tags:t=[],selectedTags:i=[],onTagChange:a,showGradients:u=!0,enableArrowNavigation:m=!0,displayScrollbar:x=!0,className:w="",maxHeight:b=400})=>{const v=N.useRef(null),[C,A]=N.useState(-1),[T,_]=N.useState(!1),[O,L]=N.useState(0),[B,j]=N.useState(1),W=N.useCallback(Z=>{A(Z)},[]),U=N.useCallback((Z,Q)=>{A(Q),a&&a(Z)},[a]),F=N.useCallback(Z=>{const{scrollTop:Q,scrollHeight:ne,clientHeight:q}=Z.target;L(Math.min(Q/50,1));const ie=ne-(Q+q);j(ne<=q?0:Math.min(ie/50,1))},[]);return N.useEffect(()=>{if(v.current){const{scrollHeight:Z,clientHeight:Q}=v.current;Z<=Q?j(0):j(1)}},[t]),N.useEffect(()=>{if(!m)return;const Z=Q=>{Q.key==="ArrowDown"||Q.key==="Tab"&&!Q.shiftKey?(Q.preventDefault(),_(!0),A(ne=>Math.min(ne+1,t.length-1))):Q.key==="ArrowUp"||Q.key==="Tab"&&Q.shiftKey?(Q.preventDefault(),_(!0),A(ne=>Math.max(ne-1,0))):(Q.key==="Enter"||Q.key===" ")&&C>=0&&C<t.length&&(Q.preventDefault(),a&&a(t[C]))};return window.addEventListener("keydown",Z),()=>window.removeEventListener("keydown",Z)},[t,C,a,m]),N.useEffect(()=>{if(!T||C<0||!v.current)return;const Z=v.current,Q=Z.querySelector(`[data-index="${C}"]`);if(Q){const q=Z.scrollTop,ie=Z.clientHeight,te=Q.offsetTop,ye=te+Q.offsetHeight;te<q+50?Z.scrollTo({top:te-50,behavior:"smooth"}):ye>q+ie-50&&Z.scrollTo({top:ye-ie+50,behavior:"smooth"})}_(!1)},[C,T]),h.jsxs("div",{className:`animated-tag-list-container ${w}`,children:[h.jsx("div",{ref:v,className:`animated-tag-list ${x?"":"no-scrollbar"}`,onScroll:F,style:{maxHeight:`${b}px`},children:t.map((Z,Q)=>h.jsx(sS,{delay:.05,index:Q,onMouseEnter:()=>W(Q),children:h.jsxs("label",{className:`animated-tag-label ${C===Q?"focused":""} ${i.includes(Z)?"selected":""}`,onClick:ne=>{ne.preventDefault(),U(Z,Q)},children:[h.jsx("input",{type:"checkbox",checked:i.includes(Z),onChange:()=>{},tabIndex:-1}),h.jsx("span",{className:"tag-text",children:Z})]})},`tag-${Z}`))}),u&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"animated-tag-top-gradient",style:{opacity:O}}),h.jsx("div",{className:"animated-tag-bottom-gradient",style:{opacity:B}})]})]})},oS=({onProfileClick:t,onTutorialClick:i,userImage:a})=>{const[u,m]=N.useState(!1),x=N.useRef(null);N.useEffect(()=>{const v=C=>{x.current&&!x.current.contains(C.target)&&m(!1)};return document.addEventListener("mousedown",v),document.addEventListener("touchstart",v),()=>{document.removeEventListener("mousedown",v),document.removeEventListener("touchstart",v)}},[]);const w=()=>{m(!1),t()},b=()=>{m(!1),i()};return h.jsxs("div",{className:"profile-dropdown-container",ref:x,children:[h.jsxs("button",{className:`profile-dropdown-button ${u?"active":""}`,onClick:()=>m(!u),children:[h.jsx("div",{className:"profile-dropdown-avatar",children:h.jsx("img",{src:a||"/assets/avatar_3.png",alt:"Profile"})}),h.jsx("span",{className:"profile-dropdown-text",children:"            "}),h.jsx("svg",{className:`profile-dropdown-chevron ${u?"rotated":""}`,width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:h.jsx("path",{d:"M2.5 4.5L6 8L9.5 4.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]}),h.jsx(_r,{children:u&&h.jsxs(bt.div,{className:"profile-dropdown-menu",initial:{opacity:0,y:-8,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-8,scale:.95},transition:{duration:.15,ease:[.4,0,.2,1]},children:[h.jsxs("button",{className:"profile-dropdown-item profile-dropdown-item--primary",onClick:w,children:[h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[h.jsx("circle",{cx:"12",cy:"8",r:"4",stroke:"currentColor",strokeWidth:"2"}),h.jsx("path",{d:"M4 20C4 16.6863 7.58172 14 12 14C16.4183 14 20 16.6863 20 20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),h.jsx("span",{children:"Edit Profile"})]}),h.jsx("div",{className:"profile-dropdown-divider"}),h.jsxs("button",{className:"profile-dropdown-item",onClick:b,children:[h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[h.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:"currentColor",strokeWidth:"2"}),h.jsx("path",{d:"M12 8V12L15 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),h.jsx("span",{children:"Tutorial"})]})]})})]})},aS=({isOpen:t,onClose:i})=>{const{userProfile:a}=N.useContext(Fn),[u,m]=N.useState(""),[x,w]=N.useState(""),[b,v]=N.useState(""),[C,A]=N.useState(null),[T,_]=N.useState(null),[O,L]=N.useState(!1),[B,j]=N.useState({x:0,y:0}),[W,U]=N.useState(1),[F,Z]=N.useState(null),[Q,ne]=N.useState(!1),[q,ie]=N.useState(!1),[te,ye]=N.useState(""),[Oe,Se]=N.useState(!0),Te=N.useRef(null);N.useEffect(()=>{t&&(ye(""),_(null),ne(!1),j({x:0,y:0}),U(1),be())},[t]);const be=async()=>{var Y,G,Ce;Se(!0),ye("");try{const ve=await wt("/load_user");if(ve.ok){const ue=await ve.json();m(((Y=ue.profile)==null?void 0:Y.name)||""),w(ue.email||""),v(((G=ue.profile)==null?void 0:G.contact_url)||""),L(ue.email_verified===!0),(Ce=ue.profile)!=null&&Ce.image_data?A(`data:image/jpeg;base64,${ue.profile.image_data}`):a!=null&&a.image_data&&A(`data:image/jpeg;base64,${a.image_data}`)}}catch(ve){console.error("Error loading user data:",ve),m((a==null?void 0:a.name)||""),w((user==null?void 0:user.email)||""),a!=null&&a.image_data&&A(`data:image/jpeg;base64,${a.image_data}`)}finally{Se(!1)}},X=Y=>{const G=Y.target.files[0];if(G){const Ce=new FileReader;Ce.onload=ve=>{A(ve.target.result),ne(!0)},Ce.readAsDataURL(G)}},Le=(Y,G)=>{Z(G)},we=async()=>{try{const Y=await Uc(C,F);_(Y),A(Y),ne(!1)}catch(Y){console.error("Error cropping image:",Y),ye("Failed to crop image. Please try again.")}},xe=()=>{ne(!1),a!=null&&a.image_data&&A(`data:image/jpeg;base64,${a.image_data}`)},_e=async Y=>{var G;Y.preventDefault(),ie(!0),ye("");try{const Ce={name:u.trim()||void 0,contact_url:b.trim()||void 0};if(!O&&x.trim()){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(x.trim())){ye("Please enter a valid email address."),ie(!1);return}Ce.email=x.trim()}T&&(Ce.image_data=T.split(",")[1]);const ve=await wt("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ce)});if(!ve.ok){const ue=await ve.json();throw new Error(ue.detail||"Failed to update profile")}ie(!1),i()}catch(Ce){console.error("Error updating profile:",Ce),(G=Ce.message)!=null&&G.toLowerCase().includes("already associated")?ye("This email is already in use by another account."):ye(Ce.message||"Failed to update profile. Please try again.")}finally{ie(!1)}},Ee=T||C||"/assets/avatar_3.png";return h.jsx(_r,{children:t&&h.jsx(bt.div,{className:"lobby-profile-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:i,children:h.jsxs(bt.div,{className:"lobby-profile-modal",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",stiffness:400,damping:30},onClick:Y=>Y.stopPropagation(),children:[h.jsx("button",{className:"lobby-profile-modal-close",onClick:i,"aria-label":"Close",children:h.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:h.jsx("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}),h.jsx("h2",{className:"lobby-profile-modal-title",children:"Edit Profile"}),Oe?h.jsxs("div",{className:"lobby-profile-modal-loading",children:[h.jsx("div",{className:"lobby-profile-spinner"}),h.jsx("span",{children:"Loading..."})]}):h.jsxs("form",{onSubmit:_e,className:"lobby-profile-form",children:[te&&h.jsx("div",{className:"lobby-profile-error",children:te}),Q?h.jsxs("div",{className:"lobby-profile-crop-section",children:[h.jsx("div",{className:"lobby-profile-crop-container",children:h.jsx(Vc,{image:C,crop:B,zoom:W,aspect:1,onCropComplete:Le,onCropChange:j,onZoomChange:U,cropShape:"round"})}),h.jsxs("div",{className:"lobby-profile-crop-actions",children:[h.jsx("button",{type:"button",className:"lobby-profile-btn-secondary",onClick:xe,children:"Cancel"}),h.jsx("button",{type:"button",className:"lobby-profile-btn-primary",onClick:we,children:"Save Crop"})]})]}):h.jsxs("div",{className:"lobby-profile-image-section",children:[h.jsxs("div",{className:"lobby-profile-image-container",children:[h.jsx("img",{src:Ee,alt:"Profile",className:"lobby-profile-image"}),h.jsx("button",{type:"button",className:"lobby-profile-image-edit",onClick:()=>{var Y;return(Y=Te.current)==null?void 0:Y.click()},children:h.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#144dff"}),h.jsx("path",{d:"M14.5 7.5L16.5 9.5M8 16L8.5 13.5L14.5 7.5L16.5 9.5L10.5 15.5L8 16Z",fill:"white",stroke:"white",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]}),h.jsx("input",{ref:Te,type:"file",accept:"image/*",onChange:X,style:{display:"none"}}),h.jsx("span",{className:"lobby-profile-image-hint",children:"Tap to change photo"})]}),h.jsxs("div",{className:"lobby-profile-field",children:[h.jsx("label",{className:"lobby-profile-label",children:"Name"}),h.jsx("input",{type:"text",value:u,onChange:Y=>m(Y.target.value),placeholder:"Your name",className:"lobby-profile-input"})]}),h.jsxs("div",{className:"lobby-profile-field",children:[h.jsxs("label",{className:"lobby-profile-label",children:["Email",O&&h.jsxs("span",{className:"lobby-profile-verified-badge",children:[h.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",children:h.jsx("path",{d:"M5 13L9 17L19 7",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),"Verified"]})]}),h.jsx("input",{type:"email",value:x,onChange:Y=>w(Y.target.value),placeholder:"you@example.com",className:`lobby-profile-input ${O?"lobby-profile-input--readonly":""}`,disabled:O}),O&&h.jsx("span",{className:"lobby-profile-field-hint",children:"Verified emails cannot be changed"})]}),h.jsxs("div",{className:"lobby-profile-field",children:[h.jsx("label",{className:"lobby-profile-label",children:"Contact URL"}),h.jsx("input",{type:"text",value:b,onChange:Y=>v(Y.target.value),placeholder:"linkedin.com/in/yourprofile",className:"lobby-profile-input"}),h.jsx("span",{className:"lobby-profile-field-hint",children:"LinkedIn, Twitter, or any way to connect"})]}),h.jsx("button",{type:"submit",className:"lobby-profile-submit",disabled:q||Q,children:q?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"lobby-profile-spinner-small"}),"Saving..."]}):"Save Changes"})]})]})})})},gc=9,lS=5,cS=5e3,uS=!1,dS=()=>{var Ms;const t=Math.floor(540),[i,a]=N.useState([]),[u,m]=N.useState("self"),[x,w]=N.useState(!1),[b,v]=N.useState(""),C=N.useRef(null),A=N.useRef(null),[T,_]=N.useState(!1),O=N.useRef(!1),[L,B]=N.useState(!1),[j,W]=N.useState(!1),[U,F]=N.useState(!1),{audioRef:Z,loadSound:Q,seekTo:ne,cancelSound:q,checkSound:ie,soundEnabled:te,setSoundEnabled:ye,isPlaying:Oe}=Pf(),[Se,Te]=N.useState("yonder"),be=On(),{code:X}=Ry(),[Le,we]=N.useState(null);dx(we,null,Se);const{user:xe,userProfile:_e,checkAuth:Ee,permissions:Y,isAuthLoading:G,authLoadingMessage:Ce,emailVerified:ve}=N.useContext(Fn),[ue,$]=N.useState(!1),[Re,ge]=N.useState([]),[Ae,rt]=N.useState(""),[Ye,ce]=N.useState(""),[pe,$e]=N.useState(!1),Ze=N.useRef(null),Tt=N.useRef(localStorage.getItem("hasShownEmailBackupModal")==="true"),[pt,Qe]=N.useState(!1),et=N.useRef(localStorage.getItem("hasShownPauseInfoModal")==="true");N.useEffect(()=>{if(!G&&!xe){const qe=new URLSearchParams(window.location.search).get("code")||X;be(qe?`/signup?redirect=lobby&code=${qe}`:"/signup?redirect=lobby")}},[G,xe,be,X]),N.useEffect(()=>{(()=>{const Ue=new URLSearchParams(window.location.search).get("code")||X;if(Ue){Te(Ue),wE(Ue),Cr(Ue);const Ge=`hasSeenTutorial_${Ue}`,jt=localStorage.getItem(Ge),Pr=!!localStorage.getItem("access_token");console.log("Tutorial check:",{codeParam:Ue,lobbyTutorialKey:Ge,hasSeenLobbyTutorial:jt,isAuthenticated:Pr}),!jt&&Pr&&(qr(!0),localStorage.setItem(Ge,"true"))}})()},[X]);const[Et,ze]=N.useState(null),[vn,tr]=N.useState(null),[Xe,Rt]=N.useState(null),[We,ht]=N.useState(null),[tt,_t]=N.useState(null),zt=N.useRef(!1),Bt=N.useRef(null),at=N.useRef(null),Ie=N.useRef(null),le=N.useRef(null),ct=N.useRef(!1),[je,yt]=N.useState(null),[Xt,un]=N.useState(null),[Cn,dt]=N.useState(null),[en,nr]=N.useState(null),[Rr,bn]=N.useState(!0),vi=N.useRef(0),[Kt,zr]=N.useState(null),[fr,Vn]=N.useState(null),[$n,rr]=N.useState([]),[Zn,hn]=N.useState([]),[vr,Un]=N.useState(!document.hidden),Ke=N.useRef("yonder"),hr=N.useRef({}),ci=N.useRef([]),[ir,sr]=N.useState(!1),Wr=N.useRef(null),[Qi,kr]=N.useState(!1);N.useEffect(()=>{Ke.current=Se},[Se]);async function Rs(Ve,qe){const Ge=await(await wt("/set_profile_info",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tags_work:Ve,tags_desiring_work:qe})})).json();console.log("SET PROFILE INFO:",Ge)}const ho=async Ve=>{if(Ve.length!==0){sr(!0);try{const qe=await wt("/load_batch_pfp_small_icons",{method:"POST",headers:{"Content-Type":"application/json",lobby_code:Ke.current},body:JSON.stringify({usernames:Ve})});if(qe.ok){const Ue=await qe.json();hr.current={...hr.current,...Ue},console.log("Profile images fetched:",Object.keys(Ue))}else console.error("Failed to fetch profile images:",qe.status)}catch(qe){console.error("Error fetching profile images:",qe)}finally{sr(!1)}}},Cr=async Ve=>{try{const qe=await wt("/lobby_setup_data",{headers:{lobby_code:Ve}});if(qe.ok){const Ue=await qe.json();Ue.logo_icon?(Wr.current=Ue.logo_icon,kr(!0),console.log("Sponsor logo loaded successfully")):console.log("No sponsor logo available for this lobby")}else console.error("Failed to fetch lobby setup data:",qe.status)}catch(qe){console.error("Error fetching lobby setup data:",qe)}};async function Dn(){try{q(),hr.current={},ci.current=[],(await wt("/disconnect_lobby",{headers:{lobby_code:Se}})).ok&&be("/")}catch(Ve){console.error("Error disconnecting from lobby:",Ve),be("/")}finally{q(),be("/"),console.log("finally")}}const[Qt,Ji]=N.useState(!1),[Ft,ks]=N.useState(null),Ne=N.useRef(!1),[mo,Yt]=N.useState(!1),[Kr,es]=N.useState(null),[Mt,At]=N.useState(!1),kt=(Ve,qe)=>{if(!Ve||!qe)return null;for(const Ue of Ve.tags_work)if(qe.desiring_tags_work.includes(Ue)){for(const Ge of qe.tags_work)if(Ve.desiring_tags_work.includes(Ge))return{playerTag:Ue,opponentTag:Ge}}return null};async function Ln(){try{vi.current+=1,vi.current>5&&(vi.current=0,zt.current=!1);const Ve=!document.hidden,qe=Ke.current;if(console.log("lobby code fr:",qe),qe=="yonder"){console.log("lobby code is not set");return}const Ue=await wt(`/lobby?is_visible=${Ve}`,{headers:{is_visible_t_f:Ve?"t":"f",lobby_code:qe}});if(Ue.ok){const Ge=await Ue.json();if(console.log("LOBBY PAIR DATA:",qe,Ge),Ge.status=="inactive"){ct.current||(ct.current=!0,F(!0),Z.current?(ne(t),setTimeout(()=>{q(),be("/post-event-auth")},7e3)):(q(),be("/post-event-auth")));return}Ge.lobby_state!=="terminated"&&EE(),Rt(Ge.opponent_name),Ge.opponent_name==null&&ze(null),a(Ge.custom_tags),yt(Ge.lobby_state),nr(Ge.lobby_duration);const jt=typeof Ge.round_time_left=="number"&&!isNaN(Ge.round_time_left)?Ge.round_time_left:0;console.log("Timer Debug:",{roundDuration:Ge.lobby_duration,timeLeft:jt,lobbyState:Ge.lobby_state,usingDefaultDuration:!Ge.lobby_duration}),Ie.current=jt,le.current=Ge.beat_go_off,un(Math.floor(jt));const Pr=Math.floor(jt/60),Ci=Math.floor(jt%60);dt(`${Pr}:${Ci.toString().padStart(2,"0")}`),_t(Ge.table_number),Ge.player_tags!=null&&Ge.player_tags.tags_work!=null&&rr(Ge.player_tags.tags_work),Ge.player_tags!=null&&Ge.player_tags.desiring_tags_work!=null&&hn(Ge.player_tags.desiring_tags_work),Ge.lobby_state==="checkin"&&Z.current&&Z.current.currentTime>500&&!ct.current&&(Z.current.currentTime=0),Ie.current!=null&&Ge.lobby_state=="active"&&Ie.current!=0&&(ne(t-Ie.current),console.log("seeking to",t-Ie.current));const mr=await wt(`/display_lobby_metadata?lobby_code=${qe}`,{headers:{lobby_code:qe}});if(mr.ok){const dn=await mr.json();we(dn.player_count);const tn=dn.usernames||[];if(JSON.stringify(ci.current)!==JSON.stringify(tn)){ci.current=tn;const Hr=tn.filter(ft=>!hr.current[ft]&&ft!==(xe==null?void 0:xe.username));Hr.length>0&&(uS||(console.log("Fetching images for new users:",Hr),ho(Hr)))}}if((Xe!=Ge.opponent_name||Et==null)&&!zt.current&&Ge.opponent_name!=null){zt.current=!0,console.log("fetching profile");const dn=await wt("/paired_player_profile");if(dn.ok){const tn=await dn.json();ze(tn),console.log("profile fetched:",tn.name)}else console.log("profile fetch failed");zt.current=!1}const Sr=Ft==="interrim"&&Ge.lobby_state==="active"&&Ge.opponent_name,Mr=Ge.lobby_state==="active"&&Ge.opponent_name&&Ge.is_purgatory_pair&&Bt.current!==Ge.opponent_name;if((Sr||Mr)&&!Ne.current){console.log("New pairing detected:",{isNormalPairingStart:Sr,isPurgatoryPairing:Mr}),Bt.current=Ge.opponent_name;const dn=kt(Ge.player_tags,Ge.opponent_tags);Mr?(console.log("Purgatory pairing - triggering animation"),Ne.current=!0,Ji(!0),at.current&&(at.current.currentTime=0,at.current.play().catch(Hr=>console.log("Purgatory notification sound blocked:",Hr))),dn&&(console.log("Purgatory pairing also has interest match:",dn),es(dn),Yt(!0))):dn&&(console.log("Normal pairing with interest match:",dn),es(dn),Yt(!0),Ne.current=!0,Ji(!0));const tn=!ve&&!Tt.current,ut=!et.current;if(tn||ut)try{const ft=await(await wt("/lobby/previous_match_profiles",{headers:{lobby_code:qe}})).json(),_n=ft.total_match_count||0;tn&&ft.profiles&&ft.profiles.length>=2?(ge(ft.profiles),$(!0),Tt.current=!0,localStorage.setItem("hasShownEmailBackupModal","true")):ut&&_n>=4&&!ue&&(Qe(!0),et.current=!0,localStorage.setItem("hasShownPauseInfoModal","true"))}catch(Hr){console.error("Error fetching previous match profiles:",Hr)}}Ft==="checkin"&&Ge.lobby_state==="interrim"&&Z.current&&ne(t),ks(Ge.lobby_state)}}catch(Ve){console.error("Error fetching lobby data:",Ve)}}N.useEffect(()=>{ie()?ye(!0):ye(!1);const Ve=setInterval(async()=>{Ln()},cS);return()=>clearInterval(Ve)},[]),N.useEffect(()=>{const Ve=()=>{at.current||(at.current=new Audio("./assets/sounds/new_banger_chorus.mp3"),at.current.load(),console.log("Purgatory notification sound unlocked")),document.removeEventListener("click",Ve),document.removeEventListener("touchstart",Ve)};return document.addEventListener("click",Ve),document.addEventListener("touchstart",Ve),()=>{document.removeEventListener("click",Ve),document.removeEventListener("touchstart",Ve)}},[]),N.useEffect(()=>{const Ve=setTimeout(Ln,1e3);return()=>clearTimeout(Ve)},[je,Se]),N.useEffect(()=>{const Ve=()=>{const qe=!document.hidden;qe&&!vr&&(console.log("Page became visible - fetching latest data"),Ln()),Un(qe)};return document.addEventListener("visibilitychange",Ve),()=>{document.removeEventListener("visibilitychange",Ve)}},[vr]);const Ps=()=>h.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(4px)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},children:h.jsxs("div",{style:{backgroundColor:"#ffffff",padding:"32px 28px",borderRadius:"24px",position:"relative",minWidth:"300px",maxWidth:"340px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.2)",textAlign:"center"},children:[h.jsx("button",{onClick:()=>bn(!1),style:{color:"#ffffff",position:"absolute",right:"12px",top:"12px",border:"none",background:"transparent",fontSize:"10px",cursor:"pointer",width:"10px",height:"10px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:""}),h.jsx("h2",{style:{marginTop:"8px",marginBottom:"8px",color:"#1a1a2e",fontWeight:700,fontSize:"1.25rem",fontFamily:"-apple-system, BlinkMacSystemFont, sans-serif"},children:"Sound is Important"}),h.jsx("p",{style:{color:"#6b7280",fontSize:"0.9rem",marginBottom:"4px"},children:"Raise your volume for the best experience"}),h.jsx("button",{onClick:()=>{Q(),bn(!1)},style:{padding:"14px 32px",marginTop:"20px",backgroundColor:"#1a1a2e",color:"#ffffff",border:"none",borderRadius:"16px",fontWeight:600,cursor:"pointer",fontSize:"1rem",fontFamily:"-apple-system, BlinkMacSystemFont, sans-serif",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",transition:"all 0.2s ease"},children:"Enable Sound"})]})}),ts=(Ve,qe)=>{Kt==null&&zr($n),fr==null&&Vn(Zn);const Ue=Ve==="self"?Kt:fr;if(!(Ue!=null&&Ue.includes(qe))&&(Ue==null?void 0:Ue.length)>=lS){v("Reached tag limit for this section"),setTimeout(()=>{var jt;(jt=A.current)==null||jt.scrollIntoView({behavior:"smooth",block:"center"})},100),setTimeout(()=>{v("")},3e3);return}Ve==="self"?zr(jt=>jt.includes(qe)?jt.filter(Pr=>Pr!==qe):[...jt,qe]):Vn(jt=>jt.includes(qe)?jt.filter(Pr=>Pr!==qe):[...jt,qe])},mn=()=>{Kt!=null&&(Rs(Kt,fr||[]),setTimeout(()=>{rr(Kt||[])},800)),m("desiring"),setTimeout(()=>{var Ve;(Ve=C.current)==null||Ve.scrollIntoView({behavior:"smooth",block:"start"})},100)},br=()=>{fr!=null&&(Rs(Kt||[],fr),setTimeout(()=>{rr(Kt||[]),hn(fr)},800),setTimeout(()=>{O.current||(O.current=!0,_(!0),B(!0))},500)),W(!1),window.scrollTo({top:0,behavior:"smooth"})},[ns,Zt]=N.useState(!1);N.useEffect(()=>{if(je==="interrim")Zt(!0);else if(je==="active"){const Ve=setTimeout(()=>{Zt(!1)},1e3);return()=>clearTimeout(Ve)}},[je]);const Er=()=>{console.log("Lobby countdown animation completed")},[Jo,qr]=N.useState(!1),[Wt,En]=N.useState(!1),oe=()=>{qr(!1)};N.useEffect(()=>{(je!=="active"||!Et)&&(Yt(!1),es(null),Bt.current=null)},[je,Et]),N.useEffect(()=>{je==="terminated"&&(hr.current={},ci.current=[],Oc(),localStorage.removeItem("hasShownEmailBackupModal"),localStorage.removeItem("hasShownPauseInfoModal"))},[je]);const V=N.useRef(null);N.useEffect(()=>{var qe;!x&&!(!te&&Rr&&je!=="checkin"&&je!==null&&!Oe)&&!($n!=null&&$n.length)&&!(Zn!=null&&Zn.length)&&(i==null?void 0:i.length)>0&&((qe=V.current)==null||qe.scrollIntoView({behavior:"smooth"}),w(!0),W(!0))},[$n,Zn,i,x,te,Rr,je,Oe]);const ot=()=>{pe||($(!1),rt(""),ce(""),ge([]))},on=()=>{Qe(!1)},It=async Ve=>{var Ue;if(Ve.preventDefault(),ce(""),!Ae||!Ae.trim()){ce("Email is required.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Ae.trim())){ce("Please enter a valid email.");return}$e(!0);try{const Ge=await wt("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:Ae.trim()})});if(!Ge.ok){const jt=await Ge.json();(Ue=jt.detail)!=null&&Ue.toLowerCase().includes("already associated")?ce("This email is already in use. Try a different one or skip."):ce(jt.detail||"Failed to save email."),$e(!1);return}try{await wt("/auth/send-magic-link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:Ae.trim()})})}catch(jt){console.error("Magic link send failed:",jt)}$(!1),rt(""),ce("")}catch(Ge){console.error("Email backup error:",Ge),ce("Something went wrong. Try again.")}finally{$e(!1)}};return N.useEffect(()=>{ue&&Ze.current&&setTimeout(()=>{var Ve;return(Ve=Ze.current)==null?void 0:Ve.focus()},100)},[ue]),G?h.jsx(Yo,{fullScreen:!0,message:Ce}):U?h.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",background:"rgba(255, 255, 255, 0.95)",zIndex:1e3,gap:"1.5rem"},children:[h.jsx(Yo,{size:60}),h.jsx("h2",{className:"lobby-header",children:"Session ended. Generating your matches..."})]}):h.jsxs("div",{className:"lobby-container",children:[h.jsxs("div",{className:"lobby-content",children:[h.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0",marginTop:"-1.85rem"},children:h.jsx("img",{src:"/assets/reuneo_test_11.png",alt:"Reuneo Logo",style:{maxWidth:"90px",height:"auto",objectFit:"contain"}})}),(je==="checkin"||je==="active"&&!Et||je==="interrim")&&h.jsx("div",{className:"user-profile-container",children:h.jsxs("div",{className:"user-profile",children:[h.jsx("img",{src:_e!=null&&_e.image_data?`data:image/jpeg;base64,${_e.image_data}`:"/assets/avatar_3.png",alt:"Your Profile",className:"user-profile-picture"}),h.jsx("div",{className:"user-profile-glow"})]})}),h.jsx("div",{className:"lobby-header",style:{marginTop:"-30px"},children:h.jsx("h2",{children:i.length>0&&($n.length==0||Zn.length==0)?h.jsxs(h.Fragment,{children:["You're not ready, complete your interests.",h.jsx("button",{className:"missing-tags-button",onClick:()=>{var Ve;return(Ve=V.current)==null?void 0:Ve.scrollIntoView({behavior:"smooth"})},children:"Complete Interests"})]}):je==="active"&&Et?h.jsxs("span",{className:"lobby-pop-burst",children:["Go find ",Et.name,"!"]}):je==="checkin"?h.jsxs(h.Fragment,{children:["Wait here ",((Ms=_e==null?void 0:_e.name)==null?void 0:Ms.slice(0,15))||xe||"Guest",".",h.jsx("br",{}),"Your host will start the experience."]}):je==="active"&&!Et?"You'll be paired up when the timer ends.":je==="interrim"?"Get ready for the next round!":je==="terminated"?"This session has ended. Thank you for participating!":je===null?"Connecting to lobby...":""})},je),je==="active"&&Et&&tt&&h.jsx("div",{className:"table-number",children:h.jsxs("h3",{style:{color:"#4b73ef"},children:["at table: ",tt]})}),(Wr.current||je!=="checkin")&&h.jsxs("div",{className:`timer-sponsor-container ${Wr.current&&je!=="checkin"?"has-timer":""}`,children:[Wr.current&&h.jsx("div",{className:"sponsor-logo",children:h.jsx("img",{src:`data:image/jpeg;base64,${Wr.current}`,alt:"Sponsor Logo",style:{width:"100px",height:"100px",objectFit:"contain"}})}),je!=="checkin"&&h.jsx("div",{className:"time-left",style:{display:"flex",flexDirection:"column",alignItems:"center",background:"transparent",padding:"8px"},children:(je==="active"||je==="interrim")&&Xt?h.jsx(h.Fragment,{children:h.jsx(ph,{isPlaying:je==="active",duration:en||300,initialRemainingTime:Xt||0,colors:["#64B5F6","#2196F3","#1976D2"],colorsTime:[en||300,(en||300)/2,0],size:100,strokeWidth:8,trailColor:"#f0f1f4",strokeLinecap:"round",onComplete:()=>(Ln(),{shouldRepeat:!1}),children:({remainingTime:Ve})=>{const qe=typeof Ve=="number"&&!isNaN(Ve)?Ve:0,Ue=Math.floor(qe/60),Ge=Math.floor(qe%60);return h.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[h.jsxs("span",{style:{fontSize:"1.5rem",color:"#1a1a2e",fontWeight:700,fontFamily:"-apple-system, BlinkMacSystemFont, sans-serif"},children:[Ue,":",String(Ge).padStart(2,"0")]}),h.jsx("span",{style:{fontSize:"0.65rem",color:"#6b7280",fontWeight:500,marginTop:"2px"},children:"time left"})]})}},`${je}-${Xt}`)}):h.jsx("span",{className:"time-left-text"})})]}),mo&&Kr&&je==="active"&&Et&&h.jsxs("div",{className:`match-banner ${Mt?"sparkling":""}`,children:[Mt&&h.jsx("div",{className:"banner-sparkles",children:[...Array(8)].map((Ve,qe)=>h.jsx("span",{className:"banner-sparkle",style:{left:`${10+qe*12}%`,animationDelay:`${qe*.15}s`}},qe))}),h.jsx("span",{className:"match-tag",children:h.jsx("span",{className:"match-tag-text",children:Kr.playerTag.split(" ").map(Ve=>Ve.charAt(0).toUpperCase()+Ve.slice(1).toLowerCase()).join(" ")})}),h.jsx("div",{className:"match-arrow"}),h.jsx("span",{className:"match-tag",children:h.jsx("span",{className:"match-tag-text",children:Kr.opponentTag.split(" ").map(Ve=>Ve.charAt(0).toUpperCase()+Ve.slice(1).toLowerCase()).join(" ")})})]}),h.jsx("div",{style:{display:"flex",justifyContent:"center",width:"100%",margin:"0 auto",marginTop:"-2rem"},children:je==="active"||je==="interrim"?Et?h.jsx("div",{style:{marginTop:"-1rem",width:"100%",display:"flex",justifyContent:"center"},children:h.jsx(XE,{player:Et})}):h.jsx(h.Fragment,{}):je==="terminated"?h.jsx("div",{className:"status-message",children:h.jsxs("h2",{children:["This session has ended.",h.jsx("br",{}),"Thank you for participating!"]})}):null}),(je==="checkin"||je==="active"&&!Et)&&Le!==null&&h.jsx("div",{className:"player-count-container",children:h.jsxs("div",{className:"player-count-widget",children:[h.jsxs("div",{className:"player-count-icon",children:[h.jsx("div",{className:"icon-pulse"}),h.jsx("img",{src:"/assets/players_display_icon2.png",alt:"Players in lobby",className:"player-count-img"})]}),h.jsxs("div",{className:"player-count-info",children:[h.jsx("span",{className:"player-count-number",children:Le}),h.jsx("span",{className:"player-count-label",children:"joined"})]}),h.jsx("div",{className:"player-count-lobby",children:Se})]})}),(je==="checkin"||je==="active"&&!Et)&&h.jsx("div",{className:"lobby-profiles-container",children:h.jsx("div",{className:"lobby-profiles-grid",children:Le>0?h.jsxs(h.Fragment,{children:[Array.from({length:Math.min(Le,gc)}).map((Ve,qe)=>{let Ue;{const jt=ci.current[qe];jt&&hr.current[jt]?Ue=`data:image/jpeg;base64,${hr.current[jt]}`:Ue="/assets/avatar_8.png"}return h.jsxs("div",{className:`profile-icon-wrapper ${qe===Math.min(Le,gc)-1?"pop-in":""}`,children:[h.jsx("img",{src:Ue,alt:`Profile ${qe+1}`,className:"profile-icon",loading:"lazy"}),h.jsx("div",{className:"profile-icon-glow"})]},`profile-${qe}`)}),Le>gc&&h.jsx("div",{className:"profile-icon-wrapper more-profiles",children:h.jsxs("div",{className:"more-profiles-bubble",children:["+",Le-gc]})})]}):h.jsx("div",{children:"No profiles to display"})})}),(je==="checkin"||je==="active")&&h.jsxs("div",{className:"selected-tags-container",children:[$n&&$n.length>0&&h.jsxs("div",{className:"tag-category",children:[h.jsx("h4",{children:"I am:"}),h.jsx("div",{className:"tag-list",children:$n.map(Ve=>h.jsx("span",{className:"tag-item",style:{color:"#1a1a2e"},children:Ve},`self-${Ve}`))})]}),Zn&&Zn.length>0&&h.jsxs("div",{className:"tag-category",children:[h.jsx("h4",{children:"Looking for:"}),h.jsx("div",{className:"tag-list",children:Zn.map(Ve=>h.jsx("span",{className:"tag-item",style:{color:"#1a1a2e"},children:Ve},`desiring-${Ve}`))})]})]}),h.jsx("button",{className:`leave-lobby-button ${pt?"pause-button-elevated":""}`,onClick:Dn,children:"Pause"}),h.jsx(oS,{onProfileClick:()=>En(!0),onTutorialClick:()=>qr(!0),userImage:_e!=null&&_e.image_data?`data:image/jpeg;base64,${_e.image_data}`:null}),(Y==="admin"||Y==="organizer")&&h.jsx("button",{className:"admin-view-button",onClick:()=>be(`/admin_lobby_view?code=${Se}`),children:"Manage"}),j&&h.jsx("div",{className:"tags-focus-overlay"}),Array.isArray(i)&&i.length>0&&h.jsx("form",{onSubmit:Ve=>{Ve.preventDefault(),u==="self"?mn():br()},children:h.jsxs("div",{className:`tags-section ${j?"focused":""}`,ref:V,children:[h.jsxs("div",{className:"progress-bar-container",children:[h.jsx("div",{className:`self-progress-bar-tab ${u==="self"?"active":""} ${$n.length>0?"complete":""}`,onClick:()=>m("self"),children:"Who are you?"}),h.jsx("div",{className:`desiring-progress-bar-tab ${u==="desiring"?"active":""} ${Zn.length>0?"complete":""}`,onClick:()=>$n.length>0?m("desiring"):null,children:"Who do you want to meet?"})]}),h.jsxs("div",{className:`tag-group ${u==="self"?"active":"hidden"}`,children:[h.jsx("h2",{style:{fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif",color:"#1a1a2e"},children:"Who are you?"}),h.jsx(sp,{tags:i,selectedTags:Kt??$n,onTagChange:Ve=>ts("self",Ve),showGradients:!0,enableArrowNavigation:u==="self",displayScrollbar:!0,maxHeight:350})]}),h.jsxs("div",{className:`tag-group ${u==="desiring"?"active":"hidden"}`,ref:C,children:[h.jsx("h2",{style:{fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif",color:"#1a1a2e"},children:"Who do you want to meet?"}),h.jsx(sp,{tags:i,selectedTags:fr??Zn,onTagChange:Ve=>ts("desiring",Ve),showGradients:!0,enableArrowNavigation:u==="desiring",displayScrollbar:!0,maxHeight:350})]}),h.jsx("button",{type:"submit",className:"tag-selection-button",ref:A,children:u==="self"?"Continue":"Save"}),b&&h.jsx("div",{style:{color:"#144dff",textAlign:"center",marginTop:"1rem",fontSize:"0.9rem",fontWeight:"600"},children:b})]})})]}),te||!Rr||je==null||Oe?null:h.jsx(Ps,{}),ns&&!(i.length>0&&Zn.length===0)&&h.jsx(JE,{onComplete:Er}),Jo&&h.jsx(eS,{onComplete:oe,lobbyCode:Se}),h.jsx(aS,{isOpen:Wt,onClose:()=>En(!1)}),h.jsx(rS,{isVisible:Qt,onAnimationEnd:()=>{Ji(!1),Ne.current=!1,At(!0),setTimeout(()=>At(!1),3e3)}}),h.jsx(iS,{isVisible:T,onAnimationEnd:()=>{_(!1),O.current=!1}}),h.jsx(_r,{children:ue&&h.jsx(bt.div,{className:"email-backup-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:ot,children:h.jsxs(bt.div,{className:"email-backup-modal-content",initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},transition:{type:"spring",stiffness:400,damping:25},onClick:Ve=>Ve.stopPropagation(),children:[Re.length>0&&h.jsx("div",{className:"previous-matches-row",children:Re.slice(0,2).map((Ve,qe)=>h.jsx("img",{src:Ve.small_image_data?`data:image/jpeg;base64,${Ve.small_image_data}`:"/assets/avatar_3.png",alt:Ve.name,className:"match-avatar"},qe))}),h.jsx("h2",{className:"email-backup-modal-header",children:"Save Your Match History"}),h.jsx("p",{className:"email-backup-modal-subtext",children:"We'll send you a sign-in link in case you get logged out."}),h.jsxs("form",{onSubmit:It,className:"email-backup-form",children:[h.jsx("input",{ref:Ze,type:"email",value:Ae,onChange:Ve=>rt(Ve.target.value),placeholder:"you@example.com",className:"email-backup-input",disabled:pe}),Ye&&h.jsx("div",{className:"email-backup-error",children:Ye}),h.jsx("button",{type:"submit",className:"email-backup-submit-button",disabled:pe,children:pe?"Sending...":"Save Matches"})]}),h.jsx("button",{type:"button",className:"email-backup-skip-button",onClick:ot,disabled:pe,children:"Don't back up matches"})]})})}),h.jsx(_r,{children:pt&&h.jsx(bt.div,{className:"pause-info-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:on,children:h.jsxs(bt.div,{className:"pause-info-modal-content",initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},transition:{type:"spring",stiffness:400,damping:25},onClick:Ve=>Ve.stopPropagation(),children:[h.jsx("h2",{className:"pause-info-modal-header",children:"Need a Break?"}),h.jsxs("p",{className:"pause-info-modal-body",children:["Tap ",h.jsx("strong",{children:'"Pause"'})," anytime to stop being paired. This way no one's left looking for you"]}),h.jsx("p",{className:"pause-info-modal-subtext",children:"Your matches are saved and you can rejoin whenever you're ready"}),h.jsx("button",{type:"button",className:"pause-info-modal-button",onClick:on,children:"Got it"})]})})})]})};let fS={data:""},hS=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||fS,mS=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,pS=/\/\*[^]*?\*\/|  +/g,op=/\n+/g,As=(t,i)=>{let a="",u="",m="";for(let x in t){let w=t[x];x[0]=="@"?x[1]=="i"?a=x+" "+w+";":u+=x[1]=="f"?As(w,x):x+"{"+As(w,x[1]=="k"?"":i)+"}":typeof w=="object"?u+=As(w,i?i.replace(/([^,])+/g,b=>x.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,v=>/&/.test(v)?v.replace(/&/g,b):b?b+" "+v:v)):x):w!=null&&(x=/^--/.test(x)?x:x.replace(/[A-Z]/g,"-$&").toLowerCase(),m+=As.p?As.p(x,w):x+":"+w+";")}return a+(i&&m?i+"{"+m+"}":m)+u},Xi={},Sx=t=>{if(typeof t=="object"){let i="";for(let a in t)i+=a+Sx(t[a]);return i}return t},gS=(t,i,a,u,m)=>{let x=Sx(t),w=Xi[x]||(Xi[x]=(v=>{let C=0,A=11;for(;C<v.length;)A=101*A+v.charCodeAt(C++)>>>0;return"go"+A})(x));if(!Xi[w]){let v=x!==t?t:(C=>{let A,T,_=[{}];for(;A=mS.exec(C.replace(pS,""));)A[4]?_.shift():A[3]?(T=A[3].replace(op," ").trim(),_.unshift(_[0][T]=_[0][T]||{})):_[0][A[1]]=A[2].replace(op," ").trim();return _[0]})(t);Xi[w]=As(m?{["@keyframes "+w]:v}:v,a?"":"."+w)}let b=a&&Xi.g?Xi.g:null;return a&&(Xi.g=Xi[w]),((v,C,A,T)=>{T?C.data=C.data.replace(T,v):C.data.indexOf(v)===-1&&(C.data=A?v+C.data:C.data+v)})(Xi[w],i,u,b),w},xS=(t,i,a)=>t.reduce((u,m,x)=>{let w=i[x];if(w&&w.call){let b=w(a),v=b&&b.props&&b.props.className||/^go/.test(b)&&b;w=v?"."+v:b&&typeof b=="object"?b.props?"":As(b,""):b===!1?"":b}return u+m+(w??"")},"");function qc(t){let i=this||{},a=t.call?t(i.p):t;return gS(a.unshift?a.raw?xS(a,[].slice.call(arguments,1),i.p):a.reduce((u,m)=>Object.assign(u,m&&m.call?m(i.p):m),{}):a,hS(i.target),i.g,i.o,i.k)}let Ax,bf,Ef;qc.bind({g:1});let qi=qc.bind({k:1});function yS(t,i,a,u){As.p=i,Ax=t,bf=a,Ef=u}function _s(t,i){let a=this||{};return function(){let u=arguments;function m(x,w){let b=Object.assign({},x),v=b.className||m.className;a.p=Object.assign({theme:bf&&bf()},b),a.o=/ *go\d+/.test(v),b.className=qc.apply(a,u)+(v?" "+v:"");let C=t;return t[0]&&(C=b.as||t,delete b.as),Ef&&C[0]&&Ef(b),Ax(C,b)}return m}}var wS=t=>typeof t=="function",Lc=(t,i)=>wS(t)?t(i):t,vS=(()=>{let t=0;return()=>(++t).toString()})(),Nx=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let i=matchMedia("(prefers-reduced-motion: reduce)");t=!i||i.matches}return t}})(),CS=20,Ix=(t,i)=>{switch(i.type){case 0:return{...t,toasts:[i.toast,...t.toasts].slice(0,CS)};case 1:return{...t,toasts:t.toasts.map(x=>x.id===i.toast.id?{...x,...i.toast}:x)};case 2:let{toast:a}=i;return Ix(t,{type:t.toasts.find(x=>x.id===a.id)?1:0,toast:a});case 3:let{toastId:u}=i;return{...t,toasts:t.toasts.map(x=>x.id===u||u===void 0?{...x,dismissed:!0,visible:!1}:x)};case 4:return i.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(x=>x.id!==i.toastId)};case 5:return{...t,pausedAt:i.time};case 6:let m=i.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(x=>({...x,pauseDuration:x.pauseDuration+m}))}}},Ac=[],so={toasts:[],pausedAt:void 0},uo=t=>{so=Ix(so,t),Ac.forEach(i=>{i(so)})},bS={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},ES=(t={})=>{let[i,a]=N.useState(so),u=N.useRef(so);N.useEffect(()=>(u.current!==so&&a(so),Ac.push(a),()=>{let x=Ac.indexOf(a);x>-1&&Ac.splice(x,1)}),[]);let m=i.toasts.map(x=>{var w,b,v;return{...t,...t[x.type],...x,removeDelay:x.removeDelay||((w=t[x.type])==null?void 0:w.removeDelay)||(t==null?void 0:t.removeDelay),duration:x.duration||((b=t[x.type])==null?void 0:b.duration)||(t==null?void 0:t.duration)||bS[x.type],style:{...t.style,...(v=t[x.type])==null?void 0:v.style,...x.style}}});return{...i,toasts:m}},SS=(t,i="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:i,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...a,id:(a==null?void 0:a.id)||vS()}),ll=t=>(i,a)=>{let u=SS(i,t,a);return uo({type:2,toast:u}),u.id},Ir=(t,i)=>ll("blank")(t,i);Ir.error=ll("error");Ir.success=ll("success");Ir.loading=ll("loading");Ir.custom=ll("custom");Ir.dismiss=t=>{uo({type:3,toastId:t})};Ir.remove=t=>uo({type:4,toastId:t});Ir.promise=(t,i,a)=>{let u=Ir.loading(i.loading,{...a,...a==null?void 0:a.loading});return typeof t=="function"&&(t=t()),t.then(m=>{let x=i.success?Lc(i.success,m):void 0;return x?Ir.success(x,{id:u,...a,...a==null?void 0:a.success}):Ir.dismiss(u),m}).catch(m=>{let x=i.error?Lc(i.error,m):void 0;x?Ir.error(x,{id:u,...a,...a==null?void 0:a.error}):Ir.dismiss(u)}),t};var AS=(t,i)=>{uo({type:1,toast:{id:t,height:i}})},NS=()=>{uo({type:5,time:Date.now()})},Ha=new Map,IS=1e3,TS=(t,i=IS)=>{if(Ha.has(t))return;let a=setTimeout(()=>{Ha.delete(t),uo({type:4,toastId:t})},i);Ha.set(t,a)},_S=t=>{let{toasts:i,pausedAt:a}=ES(t);N.useEffect(()=>{if(a)return;let x=Date.now(),w=i.map(b=>{if(b.duration===1/0)return;let v=(b.duration||0)+b.pauseDuration-(x-b.createdAt);if(v<0){b.visible&&Ir.dismiss(b.id);return}return setTimeout(()=>Ir.dismiss(b.id),v)});return()=>{w.forEach(b=>b&&clearTimeout(b))}},[i,a]);let u=N.useCallback(()=>{a&&uo({type:6,time:Date.now()})},[a]),m=N.useCallback((x,w)=>{let{reverseOrder:b=!1,gutter:v=8,defaultPosition:C}=w||{},A=i.filter(O=>(O.position||C)===(x.position||C)&&O.height),T=A.findIndex(O=>O.id===x.id),_=A.filter((O,L)=>L<T&&O.visible).length;return A.filter(O=>O.visible).slice(...b?[_+1]:[0,_]).reduce((O,L)=>O+(L.height||0)+v,0)},[i]);return N.useEffect(()=>{i.forEach(x=>{if(x.dismissed)TS(x.id,x.removeDelay);else{let w=Ha.get(x.id);w&&(clearTimeout(w),Ha.delete(x.id))}})},[i]),{toasts:i,handlers:{updateHeight:AS,startPause:NS,endPause:u,calculateOffset:m}}},RS=qi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,kS=qi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,PS=qi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,MS=_s("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${RS} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${kS} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${PS} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,OS=qi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,DS=_s("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${OS} 1s linear infinite;
`,LS=qi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,jS=qi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,BS=_s("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${LS} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${jS} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,FS=_s("div")`
  position: absolute;
`,VS=_s("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,US=qi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,zS=_s("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${US} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,WS=({toast:t})=>{let{icon:i,type:a,iconTheme:u}=t;return i!==void 0?typeof i=="string"?N.createElement(zS,null,i):i:a==="blank"?null:N.createElement(VS,null,N.createElement(DS,{...u}),a!=="loading"&&N.createElement(FS,null,a==="error"?N.createElement(MS,{...u}):N.createElement(BS,{...u})))},HS=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,GS=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,XS="0%{opacity:0;} 100%{opacity:1;}",YS="0%{opacity:1;} 100%{opacity:0;}",$S=_s("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,ZS=_s("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,KS=(t,i)=>{let a=t.includes("top")?1:-1,[u,m]=Nx()?[XS,YS]:[HS(a),GS(a)];return{animation:i?`${qi(u)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${qi(m)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},qS=N.memo(({toast:t,position:i,style:a,children:u})=>{let m=t.height?KS(t.position||i||"top-center",t.visible):{opacity:0},x=N.createElement(WS,{toast:t}),w=N.createElement(ZS,{...t.ariaProps},Lc(t.message,t));return N.createElement($S,{className:t.className,style:{...m,...a,...t.style}},typeof u=="function"?u({icon:x,message:w}):N.createElement(N.Fragment,null,x,w))});yS(N.createElement);var QS=({id:t,className:i,style:a,onHeightUpdate:u,children:m})=>{let x=N.useCallback(w=>{if(w){let b=()=>{let v=w.getBoundingClientRect().height;u(t,v)};b(),new MutationObserver(b).observe(w,{subtree:!0,childList:!0,characterData:!0})}},[t,u]);return N.createElement("div",{ref:x,className:i,style:a},m)},JS=(t,i)=>{let a=t.includes("top"),u=a?{top:0}:{bottom:0},m=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Nx()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${i*(a?1:-1)}px)`,...u,...m}},e4=qc`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,xc=16,Ga=({reverseOrder:t,position:i="top-center",toastOptions:a,gutter:u,children:m,containerStyle:x,containerClassName:w})=>{let{toasts:b,handlers:v}=_S(a);return N.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:xc,left:xc,right:xc,bottom:xc,pointerEvents:"none",...x},className:w,onMouseEnter:v.startPause,onMouseLeave:v.endPause},b.map(C=>{let A=C.position||i,T=v.calculateOffset(C,{reverseOrder:t,gutter:u,defaultPosition:i}),_=JS(A,T);return N.createElement(QS,{id:C.id,key:C.id,onHeightUpdate:v.updateHeight,className:C.visible?e4:"",style:_},C.type==="custom"?Lc(C.message,C):m?m(C):N.createElement(qS,{toast:C,position:A}))}))},In=Ir;const Hd=({direction:t="down",show:i=!0,className:a="",style:u={}})=>{if(!i)return null;const m=t==="down"?"rotate(180 16 16)":"";return h.jsxs("div",{className:`arrow-hint-container ${t} ${a}`,style:u,children:[h.jsx("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"arrow-hint-svg",children:h.jsxs("g",{transform:m,children:[h.jsx("path",{d:"M16 6v16M16 22l-7-7M16 22l7-7",stroke:"url(#arrow-gradient)",strokeWidth:"3.2",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#arrow-glow)"}),h.jsxs("defs",{children:[h.jsxs("linearGradient",{id:"arrow-gradient",x1:"16",y1:"6",x2:"16",y2:"22",gradientUnits:"userSpaceOnUse",children:[h.jsx("stop",{stopColor:"#7f5fff"}),h.jsx("stop",{offset:"0.5",stopColor:"#2e8bff"}),h.jsx("stop",{offset:"1",stopColor:"#00e0ff"})]}),h.jsx("filter",{id:"arrow-glow",x:"-10",y:"-10",width:"52",height:"52",filterUnits:"userSpaceOnUse",children:h.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"2.5",floodColor:"#7f5fff",floodOpacity:"0.5"})})]})]})}),h.jsx("div",{className:"arrow-hint-text",children:"Tap Here"})]})},t4=({isOpen:t,onClose:i,onConfirm:a,userName:u})=>t?h.jsx("div",{className:"kick-modal",children:h.jsxs("div",{className:"kick-modal-content",children:[h.jsx("h2",{className:"kick-modal-title",children:"Kick User"}),h.jsxs("p",{className:"kick-modal-message",children:["Are you sure you want to kick ",u," from the lobby?"]}),h.jsxs("div",{className:"kick-modal-actions",children:[h.jsx("button",{onClick:a,className:"admin-button admin-button-danger",children:"Yes, Kick User"}),h.jsx("button",{onClick:i,className:"admin-button admin-button-primary",children:"Cancel"})]})]})}):null,n4=({isOpen:t,onClose:i,onConfirm:a})=>t?h.jsx("div",{className:"join-modal",children:h.jsxs("div",{className:"join-modal-content",children:[h.jsx("h2",{className:"join-modal-title",children:"Join Lobby"}),h.jsx("p",{className:"join-modal-message",children:"Are you sure you want to join? You will be paired up with your attendees."}),h.jsxs("div",{className:"join-modal-actions",children:[h.jsx("button",{onClick:a,className:"admin-button admin-button-join",children:"Yes, Join Lobby"}),h.jsx("button",{onClick:i,className:"admin-button admin-button-primary",children:"Cancel"})]})]})}):null,Tx=(t,i)=>new Promise((a,u)=>{const x=new XMLSerializer().serializeToString(t),w=800,b=1e3,v=document.createElement("canvas");v.width=w,v.height=b;const C=v.getContext("2d");C.fillStyle="#ffffff",C.fillRect(0,0,w,b);const A=new window.Image;A.crossOrigin="anonymous",A.onload=()=>{const T=new window.Image;T.onload=()=>{const B=A.width/A.height*180,j=36,W=28,U=550,F=22,Z=182+F,Q=j+F*1.2,ne=W+32,q=Z+Q,ie=ne,te=b-q-ie,ye=q+(te-U)/2-35,Oe=(w-U)/2;let Se=2;const Te=(w-B)/2;C.drawImage(A,Te,Se,B,180),Se+=180+F,C.fillStyle="#000000",C.font=`600 ${j}px Helvetica, Arial, sans-serif`,C.textAlign="center",C.textBaseline="top",C.fillText("Scan to join the ice-breaking session!",w/2,Se),Se+=j+F*1.2,C.drawImage(T,Oe,ye,U,U);const X=b-32-W;C.font=`${W}px Helvetica, Arial, sans-serif`,C.fillStyle="#000000",C.textBaseline="top";const Le=`code (optional): ${i}`;C.fillText(Le,w/2,X),v.toBlob(we=>{we?a(we):u(new Error("Failed to create blob"))},"image/png")},T.onerror=()=>u(new Error("Failed to load QR code image")),T.src="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(x)))},A.onerror=()=>u(new Error("Failed to load logo image")),A.src="/assets/reuneo_test_9.png"}),r4=({lobbyState:t,playerCount:i,onStart:a,onEnd:u,lobbyCode:m,currentRound:x})=>{const w=t==="checkin",b=i>=2&&t==="checkin",v=t==="active",C=t==="active",A=t==="terminated",[T,_]=N.useState(null),[O,L]=N.useState({qr:!1}),[B,j]=N.useState(!1),W=N.useRef(!1),U=()=>{_("start")},F=()=>{_("end")},Z=()=>{j(!0),_("checkin")},Q=()=>{T==="start"?(a(),In.success("Rounds started!",{position:"top-center"})):T==="end"&&u(),_(null)},ne=()=>_(null);N.useEffect(()=>{W.current||t==="checkin"&&i===0&&(W.current=!0,j(!0),_("checkin"))},[t,i]);const q=(Te,be)=>Te?"progress-arrow active-shimmer":be?"progress-arrow available-shimmer":"progress-arrow inactive",ie=w&&!B&&i<6,te=t==="checkin"&&i>=6,ye=t==="active"&&x+1>=12;function Oe(Te,be={}){const{silent:X=!1}=be,Le=URL.createObjectURL(Te),we=document.createElement("a");we.href=Le,we.download=`reuneo-lobby-${m}.png`,document.body.appendChild(we),we.click(),document.body.removeChild(we),URL.revokeObjectURL(Le),X||(L(xe=>({...xe,qr:!0})),setTimeout(()=>L(xe=>({...xe,qr:!1})),800))}const Se=()=>{const Te=document.getElementById("modal-qr-svg");Te&&Tx(Te,m).then(be=>{Oe(be,{silent:!0}),navigator.clipboard&&navigator.clipboard.write?navigator.clipboard.write([new window.ClipboardItem({"image/png":be})]).then(()=>{L(X=>({...X,qr:!0})),setTimeout(()=>L(X=>({...X,qr:!1})),800)}).catch(()=>{L(X=>({...X,qr:!0})),setTimeout(()=>L(X=>({...X,qr:!1})),800)}):(L(X=>({...X,qr:!0})),setTimeout(()=>L(X=>({...X,qr:!1})),800))}).catch(be=>{console.error("Error generating QR code image:",be),alert("Failed to generate QR code image.")})};return h.jsxs("div",{className:"lobby-progress-bar",style:{marginTop:"-1rem",height:"40px"},children:[h.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[h.jsx("div",{className:q(w,!1),tabIndex:0,title:"Check-in phase",onClick:Z,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"Start Checkin"}),h.jsx(Hd,{direction:"down",show:ie})]}),h.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[h.jsx("div",{className:q(v,b&&!v),tabIndex:0,title:b?"Start rounds":"At least 2 players required",onClick:U,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"Start Rounds"}),h.jsx(Hd,{direction:"down",show:te})]}),h.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[h.jsx("div",{className:q(A,C&&!A),tabIndex:0,title:C?"End rounds":"Cannot end yet",onClick:F,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"End Rounds"}),h.jsx(Hd,{direction:"down",show:ye})]}),T&&h.jsx("div",{className:"progress-modal-overlay",children:h.jsx("div",{className:"progress-modal",children:T==="checkin"?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"progress-modal-title",children:"Check-in: Print or Display this QR code to your attendees"}),h.jsx("div",{className:"progress-modal-message",children:"They scan to join. Once you have 6-10 people ready, click 'Start Rounds' - New arrivals will get paired up in the next rounds."}),h.jsxs("div",{className:"progress-modal-qr",onClick:Se,style:{cursor:"pointer",position:"relative"},children:[h.jsx(mh,{value:`${window.location.origin}/lobby?code=${m}`,size:200,level:"H",includeMargin:!1,bgColor:"#ffffff",fgColor:"#000000",id:"modal-qr-svg"}),h.jsx("span",{className:"copy-icon modal-copy-icon","aria-label":"Copy",style:{position:"absolute",right:8,bottom:8,background:"#fff",borderRadius:"50%",padding:"2px"},children:h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[h.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),h.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})}),O.qr&&h.jsx("span",{className:"modal-copied-feedback",style:{position:"absolute",left:"50%",bottom:"-1.5rem",transform:"translateX(-50%)",color:"#28a745",fontWeight:600,fontSize:"0.95rem"},children:"Copied!"})]}),h.jsxs("div",{style:{textAlign:"center",marginTop:"1rem",marginBottom:"0.5rem",fontSize:"1rem",color:"#3b3b3b",fontFamily:"Helvetica, Arial, sans-serif"},children:["code (optional): ",m]}),h.jsx("div",{className:"progress-modal-actions",children:h.jsx("button",{className:"progress-modal-btn confirm",onClick:ne,children:"Got it"})})]}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"progress-modal-title",children:T==="start"?"Are you sure you want to start rounds? - Dont worry new people can join in the next rounds.":"Are you sure you want to end the rounds?"}),h.jsx("div",{className:"progress-modal-actions",children:T==="start"?h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"progress-modal-btn cancel",onClick:ne,children:"Not Yet"}),h.jsx("button",{className:"progress-modal-btn confirm",onClick:Q,children:"Start"})]}):h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"progress-modal-btn cancel",onClick:ne,children:"Keep Going"}),h.jsx("button",{className:"progress-modal-btn confirm danger",onClick:Q,children:"End"})]})})]})})})]})},i4=({players:t})=>{const i=[...t.pairedPlayers?t.pairedPlayers.flat():[],...t.lobbyData?t.lobbyData:[]],a=10,u=i.slice(0,a),m=i.length-a,x=i.length;return h.jsxs("div",{className:"overlapping-profile-list-wrapper",style:{marginTop:"3rem"},children:[h.jsxs("div",{className:"overlapping-profile-list",children:[u.map((w,b)=>h.jsx("img",{src:w.pfp_data||"/assets/player_icon_trans.png",alt:w.name||"Player",className:"overlapping-profile-img",style:{zIndex:b+1}},w.username||w.name||b)),m>0&&h.jsxs("span",{className:"overlapping-profile-overflow",children:["+ ",m]})]}),h.jsxs("div",{className:"overlapping-profile-list-label",style:{marginTop:"0.5rem",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.1)"},children:["People joined: ",x]})]})},s4=()=>{const{user:t,userProfile:i,checkAuth:a,permissions:u}=N.useContext(Fn),m=On(),x=Ur(),w=!1,b=Math.floor(9*60),{loadSound:v,seekTo:C,cancelSound:A,checkSound:T,soundEnabled:_,setSoundEnabled:O,isPlaying:L}=Pf(),[B,j]=N.useState(!0),[W,U]=N.useState(!document.hidden),F=N.useRef(null),Q=new URLSearchParams(x.search).get("code"),[ne,q]=N.useState(Q||"test");N.useEffect(()=>{Q||(console.log("No lobby code found in URL, using default 'test' value"),(async()=>{try{const Rt=await wt("/view_my_active_lobbies");if(Rt.ok){const We=await Rt.json();if(console.log("Active lobbies response:",We),We&&We.lobbies&&We.lobbies.length>0){const ht=We.lobbies[0];q(ht),window.history.replaceState({},"",`/admin_lobby_view?code=${ht}`)}}}catch(Rt){console.error("Error fetching active lobby:",Rt)}})())},[Q]);const[ie,te]=N.useState(!1),[ye,Oe]=N.useState(null),[Se,Te]=N.useState(!1),[be,X]=N.useState(null),[Le,we]=N.useState(null),[xe,_e]=N.useState(null),[Ee,Y]=N.useState(null),[G,Ce]=N.useState(null),[ve,ue]=N.useState({}),[$,Re]=N.useState([]),[ge,Ae]=N.useState(0),rt=((Le==null?void 0:Le.length)||0)+((be==null?void 0:be.length)*2||0),[Ye,ce]=N.useState(!1);N.useEffect(()=>{T()?O(!0):O(!1)},[]),N.useEffect(()=>{const Xe=()=>{const Rt=!document.hidden;Rt&&!W&&console.log("Page became visible - next poll will fetch latest data"),U(Rt)};return document.addEventListener("visibilitychange",Xe),()=>{document.removeEventListener("visibilitychange",Xe)}},[W]),N.useEffect(()=>{(Ee==="terminated"||Ee==="inactive")&&A()},[Ee]),N.useEffect(()=>{if(a(),u!=="admin"&&u!=="organizer"){m("/");return}const Xe=async We=>{if(ve[We])return ve[We];try{const ht=await wt(`/pfp_small_icon?username=${encodeURIComponent(We)}`);if(ht.ok){let tt=await ht.text();tt.startsWith('"')&&tt.endsWith('"')&&(tt=tt.slice(1,-1));const _t=tt.startsWith("data:image")?tt:`data:image/jpeg;base64,${tt}`;return ue(zt=>({...zt,[We]:_t})),_t}return null}catch(ht){return console.error(`Error fetching profile picture for ${We}:`,ht),null}},Rt=setInterval(async()=>{try{const We=!document.hidden,ht=await wt(`/admin_lobby_data?is_visible=${We}`,{headers:{is_visible_t_f:We?"t":"f",lobby_code:ne}});if(ht.ok){const tt=await ht.json();console.log("Admin lobby data:",ne,tt),(tt.lobby_state==="inactive"||tt.status==="inactive")&&A();const _t=typeof tt.round_time_left=="number"&&!isNaN(tt.round_time_left)?tt.round_time_left:0;if(F.current=_t,F.current!=null&&tt.lobby_state==="active"&&F.current!=0&&(C(b-F.current),console.log("seeking to",b-F.current)),tt.lobby_state==="active"&&Ae(zt=>tt.current_round>zt?tt.current_round:zt),tt.lobby_state==="terminated"&&(Ae(0),A()),tt&&tt.unpaired_players){const zt=await Promise.all(tt.unpaired_players.map(async at=>{const Ie=await Xe(at.username);return{...at,pfp_data:Ie}})),Bt=await Promise.all((tt.pairs_data||[]).map(async at=>{const Ie=await Xe(at[0].username),le=await Xe(at[1].username);return[{...at[0],pfp_data:Ie},{...at[1],pfp_data:le}]}));we(zt),X(Bt),_e(tt.round_time_left),Y(tt.lobby_state),Ce(tt.lobby_duration||300),Re(tt.custom_tags||[])}else console.error("Invalid lobby data structure:",tt),we([]),X([])}else console.error("Failed to fetch admin lobby data:",ht.status)}catch(We){console.error("Error fetching admin lobby data:",We)}},1e3);return()=>clearInterval(Rt)},[ve]);const pe=Xe=>{Oe(Xe),te(!0)},$e=()=>{te(!1),Oe(null)},Ze=()=>{ye&&fetch(window.server_url+"/kick_user",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"},body:JSON.stringify({username:ye.username,lobby_code:ne})}).then(Xe=>{Xe.ok?console.log(`User ${ye.name} kicked successfully`):console.error(`Failed to kick user ${ye.name}`)}).catch(Xe=>{console.error("Error kicking user:",Xe)}).finally(()=>{$e()})},Tt=()=>{Te(!0)},pt=()=>{Te(!1)},Qe=()=>{m(`/lobby?code=${ne}`),pt()};function et(Xe,Rt={}){const{silent:We=!1}=Rt,ht=URL.createObjectURL(Xe),tt=document.createElement("a");tt.href=ht,tt.download=`reuneo-lobby-${ne}.png`,document.body.appendChild(tt),tt.click(),document.body.removeChild(tt),URL.revokeObjectURL(ht),We||In.success("QR code downloaded!")}async function Et(){const Xe=document.getElementById("admin-qr-svg");Xe&&Tx(Xe,ne).then(Rt=>{et(Rt,{silent:!0}),navigator.clipboard&&navigator.clipboard.write?navigator.clipboard.write([new window.ClipboardItem({"image/png":Rt})]).then(()=>{In.success("Downloaded and copied to clipboard!")}).catch(()=>{In.success("QR code downloaded!")}):In.success("QR code downloaded!")}).catch(Rt=>{console.error("Error generating QR code image:",Rt),In.error("Failed to generate QR code image.")})}const ze=()=>h.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.125)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},children:h.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",position:"relative",minWidth:"300px"},children:[h.jsx("button",{onClick:()=>j(!1),style:{color:"#144fff",position:"absolute",right:"10px",top:"10px",border:"none",background:"none",fontSize:"16px",cursor:"pointer",fontWeight:"bold",padding:"4px 8px"},children:"X"}),h.jsx("h2",{style:{marginTop:"5px"},children:"The Sound is Important"}),h.jsx("h3",{style:{marginTop:"5px"},children:"Raise your volume also"}),h.jsx("p",{style:{color:"#144dff"},children:"You'll need this for the best experience."}),h.jsx("button",{onClick:()=>{v(),j(!1)},style:{padding:"10px 20px",marginTop:"20px",backgroundColor:"#144dff",color:"#ffffff",border:"none",borderRadius:"14px",fontWeight:"bold",cursor:"pointer"},children:"Enable Sound"})]})}),vn=async()=>{await wt("/start_rounds",{method:"GET",headers:{lobby_code:ne}})},tr=async()=>{A(),(await wt("/terminate_lobby",{method:"GET",headers:{lobby_code:ne}})).ok&&m("/")};return h.jsxs(h.Fragment,{children:[h.jsx(Ga,{position:"top-center"}),h.jsxs("div",{className:"admin-lobby-container",children:[w,h.jsx("div",{className:"admin-view-logo",style:{cursor:"pointer"},children:h.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Reuneo Logo",style:{maxWidth:"85px",height:"auto",objectFit:"contain",transition:"transform 0.3s ease"},onClick:()=>m("/")})}),h.jsx(r4,{lobbyState:Ee,playerCount:rt,onStart:vn,onEnd:tr,lobbyCode:ne,currentRound:ge}),h.jsx(i4,{players:{pairedPlayers:be,lobbyData:Le}}),h.jsxs("div",{className:"admin-lobby-dropdown-toggle",onClick:()=>ce(Xe=>!Xe),style:{cursor:"pointer",background:"var(--primary-color)",color:"#f5f7ff",fontWeight:700,textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",fontSize:".75rem",borderRadius:Ye?"14px 14px 0 0":"14px",padding:"0.5rem 1rem",margin:"0 auto",maxWidth:420,boxShadow:"0 2px 8px rgba(20,77,255,0.08)",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s",letterSpacing:"0.5px"},children:[Ye?"Hide Controls":"More Controls",h.jsx("span",{style:{marginLeft:12,fontSize:"1.2em",transition:"transform 0.3s",display:"inline-block",transform:Ye?"rotate(180deg)":"rotate(0deg)"},children:""})]}),h.jsxs("div",{className:"admin-lobby-body",style:{maxHeight:Ye?1e3:0,overflow:"hidden",transition:"max-height 0.5s cubic-bezier(0.4,0,0.2,1)",opacity:Ye?1:0,pointerEvents:Ye?"auto":"none",marginBottom:Ye?"2rem":0},children:[h.jsxs("div",{className:"admin-lobby-qr",onClick:Et,style:{cursor:"pointer"},children:[h.jsxs("span",{className:"qr-label",style:{display:"flex",alignItems:"center",gap:"0.4rem",marginBottom:"0.5rem"},children:["People scan to join",h.jsx("span",{className:"copy-icon","aria-label":"Copy",children:h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[h.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),h.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})})]}),h.jsx("div",{style:{position:"relative",display:"inline-block"},children:h.jsx(mh,{value:`${window.location.origin}/lobby?code=${ne}`,size:140,level:"H",includeMargin:!1,bgColor:"#ffffff",fgColor:"#000000",id:"admin-qr-svg"})}),h.jsxs("div",{className:"lobby-code-display",onClick:()=>{navigator.clipboard.writeText(ne);const Xe=document.querySelector(".lobby-code-display");Xe.classList.add("copied"),setTimeout(()=>Xe.classList.remove("copied"),250)},children:[h.jsx("span",{className:"lobby-code-label",children:"lobby code:"}),h.jsx("span",{className:"lobby-code-value",children:ne}),h.jsx("span",{className:"copy-icon","aria-label":"Copy",children:h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[h.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),h.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})})]})]}),h.jsxs("div",{className:"admin-lobby-event-settings",children:[h.jsxs("div",{className:"admin-profile",children:[h.jsx("img",{src:i!=null&&i.image_data?`data:image/jpeg;base64,${i.image_data}`:"/assets/player_icon_trans.png",alt:"Your Profile",className:"admin-profile-picture"}),h.jsx("span",{className:"admin-profile-name",children:i!=null&&i.name?i.name.slice(0,20):t==null?void 0:t.slice(0,20)})]}),h.jsx("button",{onClick:Tt,className:"page-control-button page-control-join",style:{marginTop:".5rem"},children:"Join Rounds"}),h.jsxs("div",{className:"setting-item",style:{padding:"1rem"},children:[h.jsxs("span",{className:"setting-label",children:["Round Duration: ",h.jsxs("span",{className:"setting-value",children:[Math.floor(G/60)," min"]})]}),h.jsx("span",{className:"setting-label",style:{},children:"Tags:"}),$&&$.length>0&&h.jsx("div",{className:"setting-item",children:h.jsxs("div",{className:"tags-container",children:[$.slice(0,3).map((Xe,Rt)=>h.jsx("span",{className:"tag-pill",children:Xe},Rt)),$.length>3&&h.jsxs("span",{className:"tag-pill more-tags",children:["+",$.length-3," more"]})]})})]})]}),h.jsx("div",{className:"admin-lobby-actions"})]}),(Ee==="active"||Ee==="interrim")&&xe&&h.jsx("div",{className:"admin-lobby-timer-container",children:h.jsxs("div",{className:"admin-lobby-timer-glass",children:[h.jsx(ph,{isPlaying:Ee==="active",duration:G,initialRemainingTime:xe,colors:["#144dff"],size:90,strokeWidth:12,trailColor:"url(#trailGradient)",onComplete:()=>({shouldRepeat:!1}),strokeLinecap:"round",children:({remainingTime:Xe})=>{const Rt=Math.floor(Xe/60),We=Math.floor(Xe%60);return h.jsxs("span",{className:`timer-text ${Xe<=10?"timer-text-fadescale":""}`,children:[Rt,":",String(We).padStart(2,"0")]})}},`${Ee}-${Math.floor(xe)}`),h.jsx("span",{className:"timer-subtext",children:"round time left"}),h.jsx("svg",{width:"0",height:"0",children:h.jsx("defs",{children:h.jsxs("linearGradient",{id:"trailGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[h.jsx("stop",{offset:"0%",stopColor:"#e0e7ff"}),h.jsx("stop",{offset:"100%",stopColor:"#f5f7ff"})]})})})]})}),Ee!=="checkin"&&h.jsxs("div",{className:"admin-lobby-stats",children:[h.jsxs("div",{className:"stat-card",children:[h.jsx("div",{className:"stat-title",children:"Total Players"}),h.jsx("div",{className:"stat-value",children:((Le==null?void 0:Le.length)||0)+((be==null?void 0:be.length)*2||0)})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("div",{className:"stat-title",children:"Paired Players"}),h.jsx("div",{className:"stat-value",children:(be==null?void 0:be.length)*2||0})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("div",{className:"stat-title",children:"Unpaired Players"}),h.jsx("div",{className:"stat-value",children:(Le==null?void 0:Le.length)||0})]})]}),be&&Ee!=="checkin"&&h.jsx("div",{className:"admin-lobby-players",children:h.jsxs("div",{className:"player-section",children:[h.jsxs("div",{className:"section-header",children:["Paired Players: ",h.jsx("span",{className:"stat-value",style:{fontSize:"1.3rem"},children:(be==null?void 0:be.length)*2||0})]}),h.jsx("div",{className:"player-grid",children:be.map((Xe,Rt)=>{const We=Xe[0].match_details&&Xe[0].match_details.opponent_matched_tags&&Xe[0].match_details.opponent_matched_tags.length>0||Xe[1].match_details&&Xe[1].match_details.opponent_matched_tags&&Xe[1].match_details.opponent_matched_tags.length>0;return h.jsxs("div",{className:"paired-player-card",children:[We&&h.jsx("div",{className:"matched-pair-badge",children:"Matched"}),h.jsxs("div",{className:"paired-player",onClick:()=>pe(Xe[0]),children:[h.jsx("img",{src:Xe[0].pfp_data,alt:Xe[0].name,className:"paired-player-avatar"}),h.jsx("h3",{className:"paired-player-name",children:Xe[0].name}),Xe[0].match_details&&Xe[0].match_details.opponent_matched_tags&&Xe[0].match_details.opponent_matched_tags.length>0&&h.jsx("div",{className:"matching-tag-container",children:h.jsx("div",{className:"matched-player-tag",children:Xe[0].match_details.opponent_matched_tags.map((ht,tt)=>h.jsx("span",{className:"matching-tag-pill",children:ht},tt))})})]}),h.jsxs("div",{className:"paired-player",onClick:()=>pe(Xe[1]),children:[h.jsx("img",{src:Xe[1].pfp_data,alt:Xe[1].name,className:"paired-player-avatar"}),h.jsx("h3",{className:"paired-player-name",children:Xe[1].name}),Xe[1].match_details&&Xe[1].match_details.opponent_matched_tags&&Xe[1].match_details.opponent_matched_tags.length>0&&h.jsx("div",{className:"matching-tag-container",children:h.jsx("div",{className:"matched-player-tag",children:Xe[1].match_details.opponent_matched_tags.map((ht,tt)=>h.jsx("span",{className:"matching-tag-pill",children:ht},tt))})})]})]},Rt)})})]})}),Le&&h.jsx("div",{className:"admin-lobby-players",children:h.jsxs("div",{className:"player-section",children:[h.jsxs("div",{className:"section-header",children:[Ee==="checkin"?"People Joined":"Unpaired Players",": ",h.jsx("span",{className:"stat-value",style:{fontSize:"1.3rem"},children:(Le==null?void 0:Le.length)||0})]}),h.jsx("div",{className:"player-grid",children:Le.map((Xe,Rt)=>h.jsxs("div",{className:"player-card",onClick:()=>pe(Xe),children:[h.jsx("img",{src:Xe.pfp_data,alt:Xe.name,className:"player-avatar"}),h.jsx("h3",{className:"player-name",children:Xe.name})]},Rt))})]})}),h.jsx(n4,{isOpen:Se,onClose:pt,onConfirm:Qe}),h.jsx(t4,{isOpen:ie,onClose:$e,onConfirm:Ze,userName:(ye==null?void 0:ye.name)||"this user"})]}),_||!B||Ee=="checkin"||Ee==null||L?null:h.jsx(ze,{})]})},o4=()=>{const t=On(),{user:i}=N.useContext(Fn),a=()=>{window.location.href="https://reunio.app/become-an-organizer"};return h.jsxs("div",{className:"product-selection-container",children:[h.jsxs("video",{className:"background-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,children:[h.jsx("source",{src:"/assets/purchase_plan_video.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]}),h.jsxs("div",{className:"product-selection-content",children:[h.jsx("div",{className:"product-selection-header",children:h.jsx("h1",{children:"Product Selection"})}),h.jsxs("div",{className:"plans-section",children:[h.jsx("h2",{children:"Available Plans"}),h.jsxs("div",{className:"plan-card",children:[h.jsx("h3",{children:"Organizer Plan"}),h.jsxs("div",{className:"plan-description",children:[h.jsx("p",{children:"Create experiences for your community with our beta plan."}),h.jsxs("ul",{children:[h.jsx("li",{children:"Create unlimited experiences"}),h.jsx("li",{children:"Access to organizer dashboard"}),h.jsx("li",{children:"Priority customer support"})]})]}),h.jsx("button",{className:"purchase-button",onClick:a,children:"Contact Us"})]})]}),h.jsx("button",{className:"back-button",onClick:()=>t("/"),children:"Home"})]})]})},a4=()=>{const{user:t,userProfile:i,checkAuth:a,permissions:u}=N.useContext(Fn),[m,x]=N.useState(""),[w,b]=N.useState(""),[v,C]=N.useState(!1),[A,T]=N.useState(""),[_,O]=N.useState(!1),[L,B]=N.useState([]),[j,W]=N.useState(""),[U,F]=N.useState("5"),[Z,Q]=N.useState("0"),[ne,q]=N.useState(!1),[ie,te]=N.useState(null),[ye,Oe]=N.useState(!1),[Se,Te]=N.useState(null),[be,X]=N.useState(null),[Le,we]=N.useState(""),[xe,_e]=N.useState(""),[Ee,Y]=N.useState(null),[G,Ce]=N.useState(null),[ve,ue]=N.useState(""),[$,Re]=N.useState(!1),[ge,Ae]=N.useState(!1),[rt,Ye]=N.useState({x:0,y:0}),[ce,pe]=N.useState(1),[$e,Ze]=N.useState(null),Tt=8,pt=On(),Qe=N.useRef(null);N.useEffect(()=>{window.scrollTo(0,0),t&&(x(t),b(t)),Qe.current&&Qe.current.focus()},[t]);const et=Ie=>{const le=/^[a-z0-9]+$/;return Ie.length>=2&&le.test(Ie)},Et=Ie=>{const le=Ie.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");b(le),O(!0),setTimeout(()=>{O(!1)},500)},ze=()=>{if(j.includes(",")){const Ie=j.split(",").map(ct=>ct.startsWith(" ")?ct.substring(1):ct),le=[];Ie.forEach(ct=>{const je=ct.trim();je&&!L.includes(je)&&!le.includes(je)&&le.push(je)}),le.length>0&&B([...L,...le]),W("")}else j.trim()&&!L.includes(j.trim())&&(B([...L,j.trim()]),W(""))},vn=Ie=>{B(L.filter(le=>le!==Ie))},tr=Ie=>{Ie.key==="Enter"&&j.trim()&&(Ie.preventDefault(),ze())},Xe=Ie=>{Ie==="icebreaker"?L.length>0||j.trim()?(Te("icebreaker"),Oe(!0)):(te("icebreaker"),B([]),W("")):Ie==="custom"&&te("custom")},Rt=()=>{te(Se),B([]),W(""),Oe(!1),Te(null)},We=()=>{Oe(!1),Te(null)},ht=(Ie,le,ct)=>new Promise(je=>{const yt=new Image;yt.onload=()=>{const Xt=document.createElement("canvas"),un=Xt.getContext("2d");let{width:Cn,height:dt}=yt;Cn>dt?Cn>le&&(dt=dt*le/Cn,Cn=le):dt>ct&&(Cn=Cn*ct/dt,dt=ct),Xt.width=Cn,Xt.height=dt,un.drawImage(yt,0,0,Cn,dt);const en=Xt.toDataURL("image/jpeg",.7);je(en)},yt.src=URL.createObjectURL(Ie)}),tt=async Ie=>{const le=Ie.target.files[0];if(le){if(ue(""),Ae(!0),!["image/jpeg","image/jpg","image/png"].includes(le.type)){ue("Invalid format. Please upload a JPG or PNG image."),Ae(!1);return}if(le.size>2*1024*1024){ue("File too large. Please choose an image under 2MB."),Ae(!1);return}try{const ct=await ht(le,400,400);X(le),Y(ct),Re(!0),Ae(!1)}catch(ct){console.error("Error processing image:",ct),ue("Error processing image. Please try again."),Ae(!1)}}},_t=(Ie,le)=>{Ze(le)},zt=async()=>{try{Ae(!0);const Ie=await Uc(Ee,$e);Ce(Ie),Re(!1),Ae(!1)}catch(Ie){console.error("Error cropping logo:",Ie),ue("Error processing image. Please try again."),Re(!1),Ae(!1)}},Bt=()=>{X(null),Y(null),Ce(null),Re(!1),Ae(!1),Ye({x:0,y:0}),pe(1),Ze(null),ue("");const Ie=document.getElementById("logoUpload");Ie&&(Ie.value="")},at=async Ie=>{if(Ie.preventDefault(),!et(w)){T("Lobby code must be at least 2 characters long and contain only lowercase letters and numbers");return}C(!0),T("");const le=parseInt(U)*60+parseInt(Z);let ct=null;G&&(ct=G.split(",")[1]);try{const je={lobby_code:w,custom_tags:ie==="custom"?L:[],lobby_duration:le,show_table_numbers:ne};ct&&(je.logo_icon=ct),Le.trim()&&(je.logo_name=Le.trim()),xe.trim()&&(je.logo_hyperlink=xe.trim());const yt=await wt("/create_lobby",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(je)});if(yt.ok)console.log("Lobby created successfully"),console.log(await yt.json()),pt(`/admin_lobby_view?code=${w}`);else{const Xt=await yt.json();T(Xt.message||"Failed to create lobby"),console.error("Failed to create lobby")}}catch(je){T("An error occurred while creating the lobby"),console.error("Error creating lobby:",je)}finally{C(!1)}};return h.jsxs("div",{className:"create-lobby-background",children:[h.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Reunio Logo",className:"logo-image",onClick:()=>pt(-1)}),h.jsxs("div",{className:"create-lobby-container",children:[h.jsx("h1",{className:"create-lobby-title",children:"Create a New Lobby"}),h.jsxs("form",{onSubmit:at,className:"create-lobby-form",children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"lobbyCode",children:"Lobby Code"}),h.jsx("input",{ref:Qe,type:"text",id:"lobbyCode",value:w,onChange:Et,placeholder:"Enter lobby code (lowercase letters and numbers only)",required:!0,className:`form-input ${_?"typing":""}`,autoComplete:"off"}),h.jsx("div",{className:"input-hint",children:"lowercase letters and numbers only"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{children:"Round Duration"}),h.jsxs("div",{className:"duration-input-container",children:[h.jsxs("div",{className:"duration-input-group",children:[h.jsx("input",{type:"number",id:"minutes",value:U,onChange:Ie=>{const le=Ie.target.value;(le===""||parseInt(le)>0&&parseInt(le)<=Tt)&&(F(le),parseInt(le)===Tt&&Q("0"))},min:"1",max:Tt,placeholder:`1-${Tt}`,className:"form-input duration-input",autoComplete:"off"}),h.jsx("label",{htmlFor:"minutes",className:"duration-label",children:"Minutes"})]}),h.jsxs("div",{className:"duration-input-group",children:[h.jsx("input",{type:"number",id:"seconds",value:Z,onChange:Ie=>{const le=Ie.target.value;(le===""||parseInt(le)>=0&&parseInt(le)<=59)&&Q(le)},min:"0",max:"59",placeholder:"0-59",className:"form-input duration-input",autoComplete:"off",disabled:parseInt(U)===Tt}),h.jsx("label",{htmlFor:"seconds",className:"duration-label",children:"Seconds"})]})]}),h.jsxs("div",{className:"input-hint",children:["Maximum total duration is ",Tt," minutes"]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"showTableNumbers",children:"Table Numbers"}),h.jsx("input",{type:"checkbox",id:"showTableNumbers",checked:ne,onChange:Ie=>q(Ie.target.checked),className:"form-input checkbox-input"}),h.jsx("div",{className:"input-hint",children:"Recommended for events with 50+ people"}),h.jsx("div",{className:"input-hint",children:"Make sure to provide table numbers"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{children:"Matchmaking Categories"}),h.jsxs("div",{className:"matchmaking-tabs",children:[h.jsx("button",{type:"button",className:`tab-button ${ie==="icebreaker"?"tab-selected":""}`,onClick:()=>Xe("icebreaker"),children:"Community Ice Breaker"}),h.jsx("button",{type:"button",className:`tab-button ${ie==="custom"?"tab-selected":""}`,onClick:()=>Xe("custom"),children:"Custom Matching"})]}),ie==="custom"&&h.jsxs("div",{className:"custom-matching-section",children:[h.jsxs("div",{className:"tag-input-container",children:[h.jsx("input",{type:"text",id:"tagInput",value:j,onChange:Ie=>W(Ie.target.value),onKeyDown:tr,placeholder:"Add categories (press + to add)",className:"form-input",autoComplete:"off"}),h.jsx("button",{type:"button",onClick:ze,className:"tag-add-button",children:"+"})]}),L.length>0&&h.jsx("div",{className:"tag-list",children:L.map((Ie,le)=>h.jsxs("div",{className:"tag-item",children:[Ie,h.jsx("button",{type:"button",onClick:()=>vn(Ie),className:"tag-remove-button",children:""})]},le))}),h.jsx("div",{className:"input-hint",children:"If you want to match people based on categories"})]})]}),h.jsxs("div",{className:"form-group logo-upload-section",children:[h.jsx("label",{children:"Sponsor Logo"}),!G&&!$&&h.jsxs(h.Fragment,{children:[ge?h.jsx("div",{className:"logo-processing",children:"Processing..."}):h.jsxs(h.Fragment,{children:[h.jsx("input",{type:"file",id:"logoUpload",accept:"image/jpeg,image/jpg,image/png",onChange:tt,style:{display:"none"}}),h.jsx("button",{type:"button",onClick:()=>document.getElementById("logoUpload").click(),className:"logo-upload-button",children:"Upload Logo"})]}),ve&&h.jsx("div",{className:"logo-error-message",children:ve})]}),$&&Ee&&h.jsxs("div",{className:"logo-crop-container",children:[h.jsx("div",{className:"logo-crop-area",children:h.jsx(Vc,{image:Ee,crop:rt,zoom:ce,aspect:1,onCropChange:Ye,onZoomChange:pe,onCropComplete:_t})}),h.jsxs("div",{className:"logo-crop-controls",children:[h.jsx("button",{type:"button",onClick:zt,className:"logo-save-button",disabled:ge,children:ge?"Processing...":"Save Crop"}),h.jsx("button",{type:"button",onClick:Bt,className:"logo-cancel-button",children:"Cancel"})]})]}),G&&!$&&h.jsx("div",{className:"logo-preview-container",children:h.jsxs("div",{className:"logo-preview",children:[h.jsx("img",{src:G,alt:"Logo preview",className:"logo-preview-image"}),h.jsx("button",{type:"button",onClick:Bt,className:"logo-remove-button",children:""})]})}),!1]}),A&&h.jsx("div",{className:"error-message",children:A}),h.jsx("button",{type:"submit",className:"submit-button",disabled:v,children:v?"Creating...":"Create Lobby"})]})]}),ye&&h.jsx("div",{className:"modal-overlay",children:h.jsxs("div",{className:"modal-content",children:[h.jsx("h3",{children:"Switch to Community Ice Breaker?"}),h.jsx("p",{children:"This will clear your current matching categories."}),h.jsxs("div",{className:"modal-buttons",children:[h.jsx("button",{type:"button",onClick:We,className:"modal-button modal-cancel",children:"Cancel"}),h.jsx("button",{type:"button",onClick:Rt,className:"modal-button modal-confirm",children:"Confirm"})]})]})})]})},l4=t=>{try{const i=new URLSearchParams(t||window.location.search),a=i.get("via")||"",u=i.get("rewardful")||i.get("rewardful_referral")||"",m=typeof window<"u"&&window.Rewardful&&window.Rewardful.referral||"",x=typeof window<"u"&&window.localStorage&&window.localStorage.getItem("rewardful_referral")||"",w=m||u||a||x||"";return w&&typeof window<"u"&&window.localStorage&&window.localStorage.setItem("rewardful_referral",w),w}catch{return""}},c4=()=>{const{login:t,user:i,checkAuth:a,permissions:u}=N.useContext(Fn),[m,x]=N.useState(""),[w,b]=N.useState(""),[v,C]=N.useState(""),[A,T]=N.useState(""),[_,O]=N.useState(""),[L,B]=N.useState(""),[j,W]=N.useState({}),[U,F]=N.useState(""),[Z,Q]=N.useState(!1),ne=On(),q=Ur();N.useEffect(()=>{localStorage.getItem("access_token")&&!i&&a()},[]),N.useEffect(()=>{u!==null&&(u==="admin"||u==="organizer")&&ne("/")},[u,ne]),N.useEffect(()=>{(async()=>{if(i!==null&&u!==null&&u!=="admin"&&u!=="organizer")try{if(!localStorage.getItem("access_token"))return;const Re=await wt("/check-subscription-status");Re.ok&&(await Re.json()).has_access===!0&&ne("/organizer-account-details")}catch($){console.error("Error checking subscription status:",$)}})()},[i,u,ne]);const ie=ue=>{const $=/^[a-z0-9]+$/;return ue.length>=2&&$.test(ue)},te=ue=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ue)&&ue.trim()!=="",ye=ue=>ue.replace(/\D/g,"").length===10,Oe=ue=>ue.trim().length>=2,Se=ue=>{const $=ue.replace(/\D/g,"");return $.length===0?"":$.length<=3?`(${$}`:$.length<=6?`(${$.slice(0,3)}) ${$.slice(3)}`:`(${$.slice(0,3)}) ${$.slice(3,6)}-${$.slice(6,10)}`},Te=ue=>ue.replace(/\D/g,""),be=ue=>{const $=ue.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");x($),U&&F("")},X=ue=>{b(ue.target.value),U&&F(""),j.email&&W($=>({...$,email:""}))},Le=ue=>{const $=ue.target.value;C($),U&&F(""),j.phone&&W(Re=>({...Re,phone:""}))},we=()=>{const ue=Se(v);C(ue),ue&&!ye(ue)?W($=>({...$,phone:"Invalid phone number"})):W($=>({...$,phone:""}))},xe=ue=>{const $=ue.target.value;T($),U&&F(""),j.cityState&&W(Re=>({...Re,cityState:""}))},_e=()=>{A&&!Oe(A)?W(ue=>({...ue,cityState:"City/State must be at least 2 characters"})):W(ue=>({...ue,cityState:""}))},Ee=ue=>{O(ue.target.value),j.eventType&&W($=>({...$,eventType:""}))},Y=ue=>{B(ue.target.value),j.avgAttendees&&W($=>({...$,avgAttendees:""}))},G=async ue=>{ue.preventDefault(),F(""),Q(!0);const $=i!==null;if(!$&&(!m||!ie(m))){F("Username must be at least 2 characters and contain only lowercase letters and numbers"),Q(!1);return}if(!w||!te(w)){W(Ye=>({...Ye,email:"Please enter a valid email address"})),F("Please enter a valid email address"),Q(!1);return}const Re=Te(v);if(!v||!ye(v)){W(Ye=>({...Ye,phone:"Please enter a valid phone number"})),F("Please enter a valid phone number"),Q(!1);return}if(!A||!Oe(A)){W(Ye=>({...Ye,cityState:"City/State is required (minimum 2 characters)"})),F("City/State is required (minimum 2 characters)"),Q(!1);return}const ge=new URLSearchParams(q.search),Ae=l4(q.search),rt=ge.get("ref")||ge.get("affiliate_code")||"";if($){if(!localStorage.getItem("access_token")){F("Authentication required. Please log in again."),Q(!1);return}try{if(!(await wt("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone_number:Re,city_state:A,event_type:_||"",avg_attendees:L||""})})).ok)throw new Error("Failed to update profile");const pe=await wt("/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w,rewardful_referral:Ae,affiliate_code:rt})}),$e=await pe.json();if(!pe.ok||$e.error){if($e.error&&$e.error.includes("already have an active subscription")){ne("/organizer-account-details");return}F($e.error||"Failed to create checkout session. Please try again."),Q(!1);return}window.location.href=$e.checkout_url;return}catch(ce){console.error("Error creating checkout session:",ce),F("An error occurred. Please try again."),Q(!1);return}}try{const ce=await wt("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:m,password:m})}),pe=await ce.json();if(pe.error==="Username already taken"){F("Username is taken"),Q(!1);return}if(!ce.ok){F(pe.message||"Signup failed"),Q(!1);return}if(t(pe),await a(),!localStorage.getItem("access_token"))throw new Error("Authentication failed");const Ze=await fetch("/assets/fakeprofile.png");if(!Ze.ok)throw new Error("Failed to fetch profile image");const pt=await(await Ze.blob()).arrayBuffer(),Qe=btoa(new Uint8Array(pt).reduce((vn,tr)=>vn+String.fromCharCode(tr),""));if(!(await wt("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:m,image_data:Qe,phone_number:Re,city_state:A,event_type:_||"",avg_attendees:L||""})})).ok)throw new Error("Failed to update profile");await a();const Et=await wt("/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w,rewardful_referral:Ae,affiliate_code:rt})}),ze=await Et.json();if(!Et.ok||ze.error){if(ze.error&&ze.error.includes("already have an active subscription")){ne("/organizer-account-details");return}throw new Error(ze.error||"Failed to create checkout session")}window.location.href=ze.checkout_url}catch(Ye){console.error("Error:",Ye),F("An error occurred. Please try again."),Q(!1)}},Ce=i===null,ve=Z||u==="admin"||u==="organizer";return h.jsxs("div",{className:"signup-container",children:[h.jsx("button",{onClick:()=>ne("/"),className:"homescreen-button",children:"Home"}),h.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),h.jsx("h3",{className:"signup-header",children:"Become an Organizer"}),h.jsx("div",{className:"step-form-container",children:h.jsxs("form",{onSubmit:G,children:[h.jsxs("div",{style:{display:Ce?"block":"none"},children:[h.jsx("label",{className:"step-label",children:"Username"}),h.jsx("input",{type:"text",value:m,onChange:be,placeholder:"Enter a username",className:"step-input",autoFocus:Ce}),m.length>0&&h.jsxs("div",{className:"username-info-message",children:[h.jsxs("svg",{className:"info-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[h.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),h.jsx("path",{d:"M8 5V7M8 11V9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),h.jsx("circle",{cx:"8",cy:"5",r:"0.5",fill:"currentColor"})]}),h.jsx("span",{children:"This will be your temporary password"})]})]}),h.jsxs("div",{style:{marginTop:Ce?"20px":"0"},children:[h.jsxs("label",{className:"step-label",children:["Email",j.email&&h.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[h.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),h.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),h.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),h.jsx("input",{type:"email",value:w,onChange:X,placeholder:"Enter your email",className:`step-input ${j.email?"input-error":""}`,autoFocus:!Ce})]}),h.jsxs("div",{style:{marginTop:"20px"},children:[h.jsxs("label",{className:"step-label",children:["Phone Number",j.phone&&h.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[h.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),h.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),h.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),h.jsx("input",{type:"tel",value:v,onChange:Le,onBlur:we,placeholder:"(123) 456-7890",className:`step-input ${j.phone?"input-error":""}`})]}),h.jsxs("div",{style:{marginTop:"20px"},children:[h.jsxs("label",{className:"step-label",children:["City / State",j.cityState&&h.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[h.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),h.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),h.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),h.jsx("input",{type:"text",value:A,onChange:xe,onBlur:_e,placeholder:"City / State",className:`step-input ${j.cityState?"input-error":""}`})]}),h.jsxs("div",{style:{marginTop:"20px"},children:[h.jsx("label",{className:"step-label",children:"What events do you host?"}),h.jsxs("select",{value:_,onChange:Ee,className:"step-select",children:[h.jsx("option",{value:"",children:"Select an option..."}),h.jsx("option",{value:"Hospitality-Restaurants",children:"Hospitality-Restaurants"}),h.jsx("option",{value:"Social",children:"Social"}),h.jsx("option",{value:"Residential",children:"Residential"}),h.jsx("option",{value:"Business Networking",children:"Business Networking"}),h.jsx("option",{value:"Event Specialist",children:"Event Specialist"}),h.jsx("option",{value:"Education",children:"Education"}),h.jsx("option",{value:"HR-Team Building",children:"HR-Team Building"}),h.jsx("option",{value:"Corporate",children:"Corporate"}),h.jsx("option",{value:"Co-working",children:"Co-working"}),h.jsx("option",{value:"Dating",children:"Dating"}),h.jsx("option",{value:"Other",children:"Other"})]})]}),h.jsxs("div",{style:{marginTop:"20px"},children:[h.jsx("label",{className:"step-label",children:"Avg # of attendees"}),h.jsxs("select",{value:L,onChange:Y,className:"step-select",children:[h.jsx("option",{value:"",children:"Select an option..."}),h.jsx("option",{value:"5-15",children:"5-15"}),h.jsx("option",{value:"15-30",children:"15-30"}),h.jsx("option",{value:"30-50",children:"30-50"}),h.jsx("option",{value:"50-75",children:"50-75"}),h.jsx("option",{value:"75-100",children:"75-100"}),h.jsx("option",{value:"100-150",children:"100-150"}),h.jsx("option",{value:"150-200",children:"150-200"}),h.jsx("option",{value:"200+",children:"200+"})]})]}),U&&h.jsx("div",{className:"error-message",style:{marginTop:"15px",marginBottom:"10px"},children:U}),h.jsx("button",{type:"submit",className:"primary-button",disabled:ve,style:{marginTop:"20px"},children:Z?"Loading...":"Submit"})]})})]})},u4=()=>{const[t,i]=N.useState(!1),[a,u]=N.useState(""),m=N.useRef(null),x=On(),w=Ur();return N.useEffect(()=>{const v=new URLSearchParams(w.search).get("session_id");return(async()=>{let A="/";if(!v){u("Missing session ID"),i(!0),m.current=setTimeout(()=>{i(!1),x(A)},2e3);return}try{if(!localStorage.getItem("access_token")){u("Authentication required"),i(!0),m.current=setTimeout(()=>{i(!1),x(A)},2e3);return}const _=await wt(`/organizer-signup-success?session_id=${v}`),O=await _.json();if(!_.ok||O.error)console.error("Payment verification failed:",O.error),u(O.error||"Payment verification failed");else try{const L=await wt("/view_my_active_lobbies");if(L.ok){const B=await L.json();A=!!(B&&Array.isArray(B.lobbies)&&B.lobbies.length>0)?"/":"/create_lobby"}else A="/"}catch(L){console.error("Error checking active lobbies:",L),A="/"}}catch(T){console.error("Error verifying payment:",T),u("Failed to verify payment")}i(!0),m.current=setTimeout(()=>{i(!1),x(A)},2e3)})(),()=>{m.current&&(clearTimeout(m.current),m.current=null)}},[w.search,x]),t?h.jsxs("div",{className:"success-overlay",children:[h.jsx("div",{className:"success-text",children:"Success! You're now an organizer!"}),a&&h.jsx("div",{className:"success-error",style:{marginTop:"20px"},children:a})]}):h.jsx("div",{className:"signup-container",children:h.jsx("div",{className:"loading-message",children:"Processing..."})})},d4=()=>{const{user:t,checkAuth:i,permissions:a}=N.useContext(Fn),u=On(),[m,x]=N.useState(null),[w,b]=N.useState(!0),[v,C]=N.useState(!1),[A,T]=N.useState(""),[_,O]=N.useState(!1),[L,B]=N.useState(!1);N.useEffect(()=>{a!==null&&a!=="admin"&&a!=="organizer"&&u("/organizer-signup")},[a,u]),N.useEffect(()=>{t&&(async()=>{try{const F=await wt("/organizer-account-details"),Z=await F.json();if(!F.ok||Z.error){if((a==="admin"||a==="organizer")&&Z.has_subscription!==!1){T(Z.error||"Some subscription details may be incomplete"),x(Z),b(!1);return}if(Z.has_subscription===!1){u("/organizer-signup");return}T(Z.error||"Failed to load account details"),Z.has_subscription!==!1&&x(Z),b(!1);return}if(Z.has_subscription===!1){u("/organizer-signup");return}x(Z)}catch(F){console.error("Error fetching account details:",F),T("Failed to load account details. Please try again.")}finally{b(!1)}})()},[t,a,u]),N.useEffect(()=>(_?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[_]);const j=U=>U?new Date(U*1e3).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):null,W=async()=>{C(!0),T("");try{const U=await wt("/cancel-subscription",{method:"POST",headers:{"Content-Type":"application/json"}}),F=await U.json();if(!U.ok||F.error){T(F.error||"Failed to cancel subscription"),C(!1),O(!1);return}B(!0),O(!1),setTimeout(()=>{u("/")},1500)}catch(U){console.error("Error canceling subscription:",U),T("An error occurred. Please try again."),C(!1),O(!1)}};return w?h.jsx("div",{className:"signup-container",children:h.jsx("div",{className:"loading-message",children:"Loading account details..."})}):!m&&!w?h.jsxs("div",{className:"signup-container",children:[h.jsx("button",{onClick:()=>u("/"),className:"homescreen-button",children:"Home"}),h.jsx("div",{className:"error-message",children:A||"No account details found"})]}):m?h.jsxs("div",{className:"signup-container",children:[h.jsx("button",{onClick:()=>u("/"),className:"homescreen-button",children:"Home"}),h.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),h.jsx("h3",{className:"signup-header",children:"Organizer Account Details"}),h.jsx("div",{className:"step-form-container",children:h.jsxs("div",{className:"account-details-content",children:[A&&h.jsx("div",{className:"error-message",style:{marginBottom:"20px"},children:A}),m.subscription_status&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Subscription Status:"}),h.jsx("span",{className:`detail-value status-${m.subscription_status}`,children:m.subscription_status})]}),m.email&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Email:"}),h.jsx("span",{className:"detail-value",children:m.email})]}),m.billing_period&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Billing Period:"}),h.jsx("span",{className:"detail-value",children:m.billing_period})]}),m.amount!==null&&m.amount!==void 0&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Amount:"}),h.jsxs("span",{className:"detail-value",children:["$",m.amount," ",m.currency||""]})]}),m.current_period_start&&j(m.current_period_start)&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Current Period Start:"}),h.jsx("span",{className:"detail-value",children:j(m.current_period_start)})]}),m.current_period_end&&j(m.current_period_end)&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Current Period End:"}),h.jsx("span",{className:"detail-value",children:j(m.current_period_end)})]}),m.cancel_at_period_end&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Cancellation:"}),h.jsx("span",{className:"detail-value",children:"Will cancel at period end"})]}),h.jsx("button",{onClick:()=>O(!0),className:"primary-button cancel-button",style:{marginTop:"30px"},children:"Cancel Subscription"})]})}),_&&h.jsx("div",{className:"modal-overlay",onClick:U=>U.stopPropagation(),children:h.jsxs("div",{className:"modal-content",onClick:U=>U.stopPropagation(),children:[h.jsx("h3",{children:"Cancel Subscription"}),h.jsx("p",{children:"Are you sure you want to cancel your subscription?"}),h.jsxs("div",{className:"modal-buttons",children:[h.jsx("button",{className:"modal-button modal-cancel",onClick:()=>O(!1),disabled:v,children:"Cancel"}),h.jsx("button",{className:"modal-button modal-confirm",onClick:W,disabled:v,children:v?"Processing...":"Confirm"})]})]})}),L&&h.jsx("div",{className:"toast-container",children:h.jsx("div",{className:"toast-message",children:"Subscription canceled successfully"})})]}):null},Sf=({size:t=60,className:i=""})=>h.jsx("div",{className:`attendees-spinner ${i}`,style:{width:t,height:t},children:h.jsx("div",{className:"attendees-spinner-inner"})}),Gd=["#6366f1","#8b5cf6","#ec4899","#f59e0b","#10b981","#3b82f6","#ef4444","#14b8a6","#f97316","#a855f7","#06b6d4","#84cc16"],f4=t=>{if(!t)return Gd[0];let i=0;for(let u=0;u<t.length;u++)i=t.charCodeAt(u)+((i<<5)-i);const a=Math.abs(i)%Gd.length;return Gd[a]},Af=Gt.memo(({tag:t})=>{const i=f4(t);return h.jsx("span",{className:"attendee-modal-tag-pill",style:{background:i},children:t})});Af.displayName="TagPill";const h4=t=>{if(!t)return"Date not available";let i;if(typeof t=="number")i=t<1e10?new Date(t*1e3):new Date(t);else if(typeof t=="string")i=new Date(t);else return"Date not available";return isNaN(i.getTime())?"Date not available":i.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},m4=({attendees:t=[]})=>{const i=N.useRef(null),a=N.useRef(null),u=N.useRef(null),[m,x]=N.useState(null),[w,b]=N.useState(!1),[v,C]=N.useState({}),[A,T]=N.useState(!1),[_,O]=N.useState({}),L=N.useRef(-1),B=N.useRef(null),[j,W]=N.useState(!1),[U,F]=N.useState(null),[Z,Q]=N.useState({}),[ne,q]=N.useState(!1),[ie,te]=N.useState(null),[ye,Oe]=N.useState(null),[Se,Te]=N.useState(!1),be=N.useRef(null),X=N.useRef(null),Le=N.useRef({}),we=N.useRef(null);N.useEffect(()=>{const ce=window.matchMedia("(pointer: coarse)"),pe=()=>b(!!ce.matches);return pe(),ce.addEventListener?ce.addEventListener("change",pe):ce.addListener(pe),()=>{ce.removeEventListener?ce.removeEventListener("change",pe):ce.removeListener(pe)}},[]),N.useEffect(()=>{const ce=pe=>{a.current&&(a.current.contains(pe.target)||x(null))};return document.addEventListener("pointerdown",ce,{capture:!0}),()=>{document.removeEventListener("pointerdown",ce,{capture:!0})}},[]);const xe=N.useCallback((ce=1)=>{const pe=i.current;if(!pe)return;const $e=Math.round(pe.clientWidth*.75)*ce;pe.scrollBy({left:$e,behavior:"smooth"})},[]),_e=N.useCallback(()=>{const ce=i.current;return ce?ce.scrollLeft>0:!1},[]),Ee=N.useCallback(()=>{const ce=i.current;return ce?ce.scrollLeft<ce.scrollWidth-ce.clientWidth-1:!1},[]),[Y,G]=N.useState({left:!1,right:!0});N.useEffect(()=>{const ce=()=>{G({left:_e(),right:Ee()})},pe=i.current;return pe&&(ce(),pe.addEventListener("scroll",ce),window.addEventListener("resize",ce)),()=>{pe&&(pe.removeEventListener("scroll",ce),window.removeEventListener("resize",ce))}},[t.length,_e,Ee]);const Ce=N.useCallback(async ce=>{if(A||ce.length===0)return;const pe=ce.filter(Ze=>!v[Ze]&&!_[Ze]);if(pe.length===0)return;T(!0);const $e={..._};pe.forEach(Ze=>{$e[Ze]=!0}),O($e);try{const Ze=await wt("/organizer_attendees/images",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({usernames:pe})});if(!Ze.ok)throw Ze.status===401?new Error("Unauthorized"):new Error("Failed to load images");const Tt=await Ze.json();if(Tt.status==="success"&&Tt.images){const pt={...v};pe.forEach(Qe=>{Tt.images[Qe]?pt[Qe]=`data:image/jpeg;base64,${Tt.images[Qe]}`:pt[Qe]=null}),C(pt)}}catch(Ze){console.error("Error loading images:",Ze)}finally{T(!1);const Ze={..._};pe.forEach(Tt=>{delete Ze[Tt]}),O(Ze)}},[A,v,_]);N.useEffect(()=>{if(t.length===0||L.current>=0)return;const ce=t.slice(0,30).map(pe=>pe.username);ce.length>0&&(Ce(ce),L.current=Math.min(29,t.length-1))},[t.length,Ce]),N.useEffect(()=>{if(t.length===0||!i.current)return;const ce=new IntersectionObserver($e=>{B.current&&clearTimeout(B.current),B.current=setTimeout(()=>{$e.forEach(Ze=>{if(Ze.isIntersecting){const Tt=parseInt(Ze.target.dataset.index),pt=L.current;if(Tt>=pt-5&&Tt<t.length&&pt<t.length-1){const Qe=pt+1,et=Math.min(Qe+30,t.length);if(Qe<t.length){const Et=t.slice(Qe,et).map(ze=>ze.username);Ce(Et),L.current=et-1}}}})},150)},{root:i.current,rootMargin:"200px",threshold:.5});return i.current.querySelectorAll("[data-index]").forEach($e=>ce.observe($e)),u.current=ce,()=>{B.current&&clearTimeout(B.current),u.current&&u.current.disconnect()}},[t.length,Ce]);const ve=N.useCallback(()=>!U||t.length===0?-1:t.findIndex(ce=>ce.username===U),[U,t]),ue=N.useCallback(ce=>{var Ze;const pe=ve();if(pe===-1||t.length===0)return null;let $e;return ce==="next"?$e=(pe+1)%t.length:$e=pe===0?t.length-1:pe-1,((Ze=t[$e])==null?void 0:Ze.username)||null},[ve,t]),$=N.useCallback(async ce=>{const pe=ue(ce);pe&&(Oe(ce==="next"?"left":"right"),we.current&&clearTimeout(we.current),we.current=setTimeout(()=>{Oe(null),we.current=null},400),await Ae(pe,!1))},[ue]),Re=N.useMemo(()=>!(t.length<=1),[t.length]),ge=N.useMemo(()=>!(t.length<=1),[t.length]),Ae=N.useCallback(async(ce,pe=!0)=>{var $e,Ze,Tt,pt;if(Le.current[ce]){F(ce),W(!0),te(null),Te(pe);return}be.current&&be.current,be.current=ce,q(!0),te(null),W(!0),F(ce),Te(pe);try{const Qe=await wt(`/organizer_attendees/${ce}/details`);if(be.current!==ce)return;if(Qe.status===401)throw localStorage.removeItem("access_token"),new Error("Session expired. Please log in again.");if(Qe.status===403)throw new Error("Access denied. Organizer permissions required.");if(Qe.status===404)throw new Error("Attendee details not found.");if(!Qe.ok)throw new Error("Failed to load attendee details");const et=await Qe.json();if(et.status==="success"&&et.attendee){const Et={username:et.attendee.username,name:et.attendee.name||et.attendee.username,image_data:et.attendee.image_data?`data:image/jpeg;base64,${et.attendee.image_data}`:null,last_joined_date:et.attendee.last_joined_date,self_tags:(($e=et.attendee.tags)==null?void 0:$e.tags_work)||[],desiring_tags:((Ze=et.attendee.tags)==null?void 0:Ze.desiring_tags_work)||[],lobbies_attended:((Tt=et.attendee.stats)==null?void 0:Tt.lobbies_attended)||0,rounds_paired:((pt=et.attendee.stats)==null?void 0:pt.rounds_paired)||0};Q(ze=>{const vn={...ze,[ce]:Et};return Le.current=vn,vn}),be.current===ce&&F(ce)}else throw new Error(et.error||"Failed to load attendee details")}catch(Qe){be.current===ce&&(console.error("Error fetching attendee details:",Qe),te(Qe.message||"An error occurred while loading details."))}finally{be.current===ce&&(q(!1),be.current=null)}},[]),rt=N.useCallback(()=>{X.current&&clearTimeout(X.current),we.current&&clearTimeout(we.current),W(!1),te(null),Oe(null),Te(!1),X.current=setTimeout(()=>{F(null),X.current=null},300)},[]);N.useEffect(()=>()=>{X.current&&clearTimeout(X.current)},[]),N.useEffect(()=>{const ce=pe=>{pe.key==="Escape"&&j&&(pe.stopPropagation(),rt())};return document.addEventListener("keydown",ce,!0),()=>document.removeEventListener("keydown",ce,!0)},[j,rt]),N.useEffect(()=>{if(j){const ce=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=ce}}},[j]),N.useEffect(()=>()=>{we.current&&clearTimeout(we.current)},[]);const Ye=N.useMemo(()=>t.map((ce,pe)=>({username:ce.username||`temp-${pe}`,name:ce.name||ce.username||`User ${pe+1}`,small_image_data:ce.small_image_data||null})),[t]);return h.jsxs("section",{className:`attendees-root ${j&&Se?"attendees-root-modal-open":""}`,ref:a,"aria-label":"Your Community",children:[h.jsxs("div",{className:"attendees-card",children:[h.jsx("header",{className:"attendees-header",children:h.jsx("h2",{className:"attendees-title",children:"Your Community"})}),h.jsxs("div",{className:"attendees-carouselWrap",children:[h.jsx("button",{type:"button",className:"attendees-arrow attendees-arrowLeft","aria-label":"Scroll left",onClick:()=>xe(-1),disabled:!Y.left||w,children:""}),h.jsx("div",{ref:i,className:"attendees-scroller",role:"list","aria-label":"Community attendees list",onMouseLeave:()=>{w||x(null)},children:Ye.map((ce,pe)=>{const $e=m===ce.username,Ze=m!==null,Tt=v[ce.username],pt=_[ce.username];return h.jsxs("div",{"data-index":pe,className:["attendees-item",$e?"is-active":"",Ze&&!$e?"is-dimmed":"",w?"is-touch":"is-mouse"].join(" "),role:"listitem",tabIndex:0,onMouseEnter:()=>{w||x(ce.username)},onFocus:()=>x(ce.username),onClick:()=>{w&&x(ce.username),Ae(ce.username,!0)},onKeyDown:Qe=>{(Qe.key==="Enter"||Qe.key===" ")&&(Qe.preventDefault(),x(ce.username)),Qe.key==="Escape"&&x(null)},children:[h.jsx("div",{className:"attendees-avatarWrap","aria-hidden":"true",children:pt?h.jsx(Sf,{size:30,className:"attendees-tile-spinner"}):Tt?h.jsx("img",{className:"attendees-avatarImg",src:Tt,alt:"",onError:Qe=>{Qe.target.src="/assets/fakeprofile.png"}}):h.jsx("img",{className:"attendees-avatarImg",src:"/assets/fakeprofile.png",alt:""})}),h.jsx("div",{className:"attendees-name",title:ce.name,children:ce.name})]},ce.username)})}),h.jsx("button",{type:"button",className:"attendees-arrow attendees-arrowRight","aria-label":"Scroll right",onClick:()=>xe(1),disabled:!Y.right||w,children:""})]}),h.jsxs("div",{className:"attendees-dots","aria-hidden":"true",children:[h.jsx("span",{className:"attendees-dot is-on"}),h.jsx("span",{className:"attendees-dot"}),h.jsx("span",{className:"attendees-dot"}),h.jsx("span",{className:"attendees-dot"})]})]}),j&&h.jsxs(h.Fragment,{children:[t.length>1&&h.jsxs(h.Fragment,{children:[h.jsx("button",{type:"button",className:"attendee-modal-nav-arrow attendee-modal-nav-left",onClick:ce=>{ce.stopPropagation(),$("prev")},disabled:!Re,children:""}),h.jsx("button",{type:"button",className:"attendee-modal-nav-arrow attendee-modal-nav-right",onClick:ce=>{ce.stopPropagation(),$("next")},disabled:!ge,children:""})]}),h.jsx("div",{className:"attendee-modal-overlay",onClick:rt,children:h.jsx("div",{className:`attendee-modal-content ${ye?`swipe-${ye}`:""}`,onClick:ce=>ce.stopPropagation(),children:ne?h.jsxs("div",{className:"attendee-modal-loading",children:[h.jsx(Sf,{size:60}),h.jsx("p",{children:"Loading attendee details..."})]}):ie?h.jsx("div",{className:"attendee-modal-error",children:h.jsx("p",{className:"attendee-modal-error-message",children:ie})}):U&&Z[U]?h.jsx("div",{className:"attendee-modal-inner",children:(()=>{const ce=Z[U];return h.jsxs(h.Fragment,{children:[h.jsx("h2",{className:"attendee-modal-header",id:"attendee-modal-title",children:ce.name}),h.jsxs("div",{className:"attendee-modal-grid",children:[h.jsxs("div",{className:"attendee-modal-left",children:[h.jsx("div",{className:"attendee-modal-date",children:h4(ce.last_joined_date)}),h.jsxs("div",{className:"attendee-modal-profile-card",children:[h.jsx("div",{className:"attendee-modal-profile-img-wrapper",children:ce.image_data?h.jsx("img",{className:"attendee-modal-profile-img",src:ce.image_data,alt:ce.name,onError:pe=>{pe.target.src="/assets/fakeprofile.png"}}):h.jsx("img",{className:"attendee-modal-profile-img",src:"/assets/fakeprofile.png",alt:ce.name})}),h.jsx("div",{className:"attendee-modal-profile-footer",children:ce.name})]})]}),h.jsxs("div",{className:"attendee-modal-right",children:[h.jsxs("div",{className:"attendee-modal-stat",children:[h.jsx("span",{className:"attendee-modal-stat-label",children:"events attended"}),h.jsx("span",{className:"attendee-modal-stat-value",children:ce.lobbies_attended})]}),h.jsxs("div",{className:"attendee-modal-stat",children:[h.jsx("span",{className:"attendee-modal-stat-label",children:"real connections"}),h.jsxs("div",{className:"attendee-modal-stat-value-with-icons",children:[h.jsx("span",{className:"attendee-modal-stat-value",children:ce.rounds_paired}),h.jsx("div",{className:"attendee-modal-staggered-icons",children:[...Array(4)].map((pe,$e)=>h.jsx("img",{className:"attendee-modal-staggered-icon",src:"/assets/fakeprofile.png",alt:""},$e))})]})]}),h.jsxs("div",{className:"attendee-modal-tags-section",children:[h.jsx("h3",{className:"attendee-modal-tags-label",children:"who I am:"}),h.jsx("div",{className:"attendee-modal-tags-container",children:ce.self_tags&&ce.self_tags.length>0?ce.self_tags.map((pe,$e)=>h.jsx(Af,{tag:pe},`self-${$e}-${pe}`)):h.jsx("span",{className:"attendee-modal-empty-state",children:"No tags"})})]}),h.jsxs("div",{className:"attendee-modal-tags-section",children:[h.jsx("h3",{className:"attendee-modal-tags-label",children:"looking for:"}),h.jsx("div",{className:"attendee-modal-tags-container",children:ce.desiring_tags&&ce.desiring_tags.length>0?ce.desiring_tags.map((pe,$e)=>h.jsx(Af,{tag:pe},`desiring-${$e}-${pe}`)):h.jsx("span",{className:"attendee-modal-empty-state",children:"No tags"})})]})]})]})]})})()}):null})})]})]})},p4=()=>{const{user:t,permissions:i,checkAuth:a}=N.useContext(Fn),u=On(),[m,x]=N.useState([]),[w,b]=N.useState(!0),[v,C]=N.useState(null);N.useEffect(()=>{i!==null&&i!=="admin"&&i!=="organizer"&&u("/organizer-signup")},[i,u]),N.useEffect(()=>{a()},[a]);const A=N.useCallback(async()=>{b(!0),C(null);try{const T=await wt("/organizer_attendees");if(T.status===401){localStorage.removeItem("access_token"),u("/organizer-signup");return}if(T.status===403){C("Access denied. Organizer permissions required."),b(!1);return}if(!T.ok)throw new Error("Failed to load attendees");const _=await T.json();if(_.status==="success")x(_.attendees||[]);else throw new Error(_.error||"Failed to load attendees")}catch(T){console.error("Error fetching attendees:",T),T.message==="Failed to fetch"||T.message.includes("network")?C("Network error. Please check your connection and try again."):C(T.message||"An error occurred. Please try again.")}finally{b(!1)}},[u]);return N.useEffect(()=>{(i==="organizer"||i==="admin")&&A()},[i,A]),h.jsxs("div",{className:"organizer-dashboard",children:[h.jsxs("div",{className:"dashboard-header",children:[h.jsx("h1",{children:"Organizer Dashboard"}),h.jsx("button",{onClick:()=>u("/"),className:"dashboard-home-button",children:"Home"})]}),w?h.jsx("div",{className:"attendees-loading-container",children:h.jsx(Sf,{size:60})}):v?h.jsxs("div",{className:"attendees-error-container",children:[h.jsx("div",{className:"attendees-error-message",children:v}),h.jsx("button",{className:"attendees-retry-button",onClick:A,children:"Retry"})]}):m.length===0?h.jsx("div",{className:"attendees-empty-container",children:h.jsx("div",{className:"attendees-empty-message",children:"No attendees yet"})}):h.jsx(m4,{attendees:m})]})},g4=5e3,x4=()=>{const{checkAuth:t,permissions:i,user:a}=N.useContext(Fn),u=On(),[m,x]=N.useState([]),[w,b]=N.useState(!0),[v,C]=N.useState(null),[A,T]=N.useState(!1);return N.useEffect(()=>{t()},[t]),N.useEffect(()=>{a==="topaz"&&i==="admin"?T(!0):i!==null&&a!==null&&u("/")},[i,a,u]),N.useEffect(()=>{if(!A)return;let _=!0,O,L=!0;const B=async()=>{L&&b(!0),C(null);try{const j=await wt("/admin_all_lobbies");if(!j.ok)throw new Error("Failed to fetch lobbies");const W=await j.json();if(W.status!=="success"||!Array.isArray(W.lobbies))throw new Error("Invalid response format");if(!_)return;x(W.lobbies),console.log("Received lobbies data:",W.lobbies)}catch(j){_&&C(j.message||"Error fetching lobbies")}finally{_&&L&&b(!1),L=!1,O=setTimeout(B,g4)}};return B(),()=>{_=!1,O&&clearTimeout(O)}},[A]),w?h.jsx("div",{className:"master-lobby-container",children:h.jsxs("div",{className:"loading-state",children:[h.jsx("div",{className:"loading-spinner"}),h.jsx("p",{children:"Loading lobbies..."})]})}):v&&m.length===0?h.jsx("div",{className:"master-lobby-container",children:h.jsx("div",{className:"error-state",children:h.jsx("p",{children:v})})}):m.length===0?h.jsx("div",{className:"master-lobby-container",children:h.jsx("div",{className:"empty-state",children:h.jsx("p",{children:"No active lobbies found"})})}):h.jsxs("div",{className:"master-lobby-container",children:[h.jsx("button",{className:"back-button",onClick:()=>u(-1),children:"Back"}),v&&h.jsxs("div",{className:"error-banner",style:{backgroundColor:"#f8d7da",color:"#721c24",padding:"0.75rem",marginBottom:"1rem",borderRadius:"0.25rem",border:"1px solid #f5c6cb"},children:[v," (showing last known data)"]}),h.jsx("div",{className:"master-lobby-grid",children:m.map(_=>h.jsx("div",{className:"lobby-tile",children:h.jsxs("div",{className:"lobby-tile-content",children:[h.jsx("h3",{className:"lobby-code",children:_.code}),h.jsxs("div",{className:"lobby-stats",children:[h.jsxs("span",{className:"player-count",children:[_.player_count," players"]}),h.jsx("span",{className:"lobby-state",children:_.lobby_state})]}),h.jsxs("div",{style:{fontSize:"0.7rem",color:"#666",marginTop:"0.5rem"},children:["Debug: player_count=",_.player_count,", lobby_state=",_.lobby_state]})]})},_.code))})]})};var _x={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ap=Gt.createContext&&Gt.createContext(_x),y4=["attr","size","title"];function w4(t,i){if(t==null)return{};var a=v4(t,i),u,m;if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(t);for(m=0;m<x.length;m++)u=x[m],!(i.indexOf(u)>=0)&&Object.prototype.propertyIsEnumerable.call(t,u)&&(a[u]=t[u])}return a}function v4(t,i){if(t==null)return{};var a={};for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){if(i.indexOf(u)>=0)continue;a[u]=t[u]}return a}function jc(){return jc=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},jc.apply(this,arguments)}function lp(t,i){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),a.push.apply(a,u)}return a}function Bc(t){for(var i=1;i<arguments.length;i++){var a=arguments[i]!=null?arguments[i]:{};i%2?lp(Object(a),!0).forEach(function(u){C4(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):lp(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function C4(t,i,a){return i=b4(i),i in t?Object.defineProperty(t,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[i]=a,t}function b4(t){var i=E4(t,"string");return typeof i=="symbol"?i:i+""}function E4(t,i){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var u=a.call(t,i);if(typeof u!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function Rx(t){return t&&t.map((i,a)=>Gt.createElement(i.tag,Bc({key:a},i.attr),Rx(i.child)))}function fo(t){return i=>Gt.createElement(S4,jc({attr:Bc({},t.attr)},i),Rx(t.child))}function S4(t){var i=a=>{var{attr:u,size:m,title:x}=t,w=w4(t,y4),b=m||a.size||"1em",v;return a.className&&(v=a.className),t.className&&(v=(v?v+" ":"")+t.className),Gt.createElement("svg",jc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,u,w,{className:v,style:Bc(Bc({color:t.color||a.color},a.style),t.style),height:b,width:b,xmlns:"http://www.w3.org/2000/svg"}),x&&Gt.createElement("title",null,x),t.children)};return ap!==void 0?Gt.createElement(ap.Consumer,null,a=>i(a)):i(_x)}function A4(t){return fo({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"},child:[]}]})(t)}function N4(t){return fo({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(t)}function I4(t){return fo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M510.846 392.673c-5.211 12.157-27.239 21.089-67.36 27.318-2.064 2.786-3.775 14.686-6.507 23.956-1.625 5.566-5.623 8.869-12.128 8.869l-.297-.005c-9.395 0-19.203-4.323-38.852-4.323-26.521 0-35.662 6.043-56.254 20.588-21.832 15.438-42.771 28.764-74.027 27.399-31.646 2.334-58.025-16.908-72.871-27.404-20.714-14.643-29.828-20.582-56.241-20.582-18.864 0-30.736 4.72-38.852 4.72-8.073 0-11.213-4.922-12.422-9.04-2.703-9.189-4.404-21.263-6.523-24.13-20.679-3.209-67.31-11.344-68.498-32.15a10.627 10.627 0 0 1 8.877-11.069c69.583-11.455 100.924-82.901 102.227-85.934.074-.176.155-.344.237-.515 3.713-7.537 4.544-13.849 2.463-18.753-5.05-11.896-26.872-16.164-36.053-19.796-23.715-9.366-27.015-20.128-25.612-27.504 2.437-12.836 21.725-20.735 33.002-15.453 8.919 4.181 16.843 6.297 23.547 6.297 5.022 0 8.212-1.204 9.96-2.171-2.043-35.936-7.101-87.29 5.687-115.969C158.122 21.304 229.705 15.42 250.826 15.42c.944 0 9.141-.089 10.11-.089 52.148 0 102.254 26.78 126.723 81.643 12.777 28.65 7.749 79.792 5.695 116.009 1.582.872 4.357 1.942 8.599 2.139 6.397-.286 13.815-2.389 22.069-6.257 6.085-2.846 14.406-2.461 20.48.058l.029.01c9.476 3.385 15.439 10.215 15.589 17.87.184 9.747-8.522 18.165-25.878 25.018-2.118.835-4.694 1.655-7.434 2.525-9.797 3.106-24.6 7.805-28.616 17.271-2.079 4.904-1.256 11.211 2.46 18.748.087.168.166.342.239.515 1.301 3.03 32.615 74.46 102.23 85.934 6.427 1.058 11.163 7.877 7.725 15.859z"},child:[]}]})(t)}function T4(t){return fo({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448,209.91a210.06,210.06,0,0,1-122.77-39.25V349.38A162.55,162.55,0,1,1,185,188.31V278.2a74.62,74.62,0,1,0,52.23,71.18V0l88,0a121.18,121.18,0,0,0,1.86,22.17h0A122.18,122.18,0,0,0,381,102.39a121.43,121.43,0,0,0,67,20.14Z"},child:[]}]})(t)}function _4(t){return fo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(t)}function cp(t){return fo({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"},child:[]}]})(t)}function R4(t){return fo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(t)}const up=({size:t=60,className:i=""})=>h.jsx("div",{className:`attendees-spinner ${i}`,style:{width:t,height:t},children:h.jsx("div",{className:"attendees-spinner-inner"})}),k4=t=>t?`data:image/jpeg;base64,${t}`:"/assets/fakeprofile.png",P4=["instagram","facebook","email","phone","website","tiktok","snapchat"],M4=t=>({instagram:{label:"Instagram",Icon:N4,color:"#E4405F",displayPrefix:"@"},facebook:{label:"Facebook",Icon:A4,color:"#1877F2",displayPrefix:"@"},email:{label:"Email",Icon:_4,color:"#4b7ef0",displayPrefix:""},phone:{label:"Phone",Icon:R4,color:"#25D366",displayPrefix:""},website:{label:"Website",Icon:cp,color:"#4b7ef0",displayPrefix:""},tiktok:{label:"TikTok",Icon:T4,color:"#000000",displayPrefix:"@"},snapchat:{label:"Snapchat",Icon:I4,color:"#FFFC00",displayPrefix:"@"}})[t]||{label:t,Icon:cp,color:"#4b7ef0",displayPrefix:""},O4=(t,i)=>{if(!i)return null;switch(t){case"instagram":return`https://instagram.com/${i}`;case"facebook":return`https://facebook.com/${i}`;case"tiktok":return`https://tiktok.com/@${i}`;case"snapchat":return`https://snapchat.com/add/${i}`;case"email":return`mailto:${i}`;case"phone":return`tel:${i.replace(/[^\d+]/g,"")}`;case"website":return i;default:return i}},D4=t=>!t||typeof t!="object"?!1:Object.values(t).some(i=>i&&typeof i=="string"&&i.trim()),Xd=t=>[...t].sort((i,a)=>{var b,v,C,A;const u=i.lobby_date?new Date(i.lobby_date).getTime():0,m=a.lobby_date?new Date(a.lobby_date).getTime():0;if(u!==m)return m-u;const x=(((b=i.paired_with)==null?void 0:b.name)||((v=i.paired_with)==null?void 0:v.username)||"").toLowerCase(),w=(((C=a.paired_with)==null?void 0:C.name)||((A=a.paired_with)==null?void 0:A.username)||"").toLowerCase();return x<w?-1:x>w?1:0}),L4=(t,i)=>{var w;if(!t||t.length===0)return{hasNew:i.length>0,hasUpdated:!1};const a=new Set(t.map(b=>{var v;return(v=b.paired_with)==null?void 0:v.username})),u=i.some(b=>{var v;return((v=b.paired_with)==null?void 0:v.username)&&!a.has(b.paired_with.username)});let m=!1;const x=new Map(t.map(b=>{var v;return[(v=b.paired_with)==null?void 0:v.username,b]}));for(const b of i){const v=(w=b.paired_with)==null?void 0:w.username;if(!v)continue;const C=x.get(v);if(C&&JSON.stringify(C)!==JSON.stringify(b)){m=!0;break}}return{hasNew:u,hasUpdated:m}},j4=(t,i,a)=>{var x;if(!t||t.length===0)return i;const u=[...t],m=[];for(const w of i){const b=(x=w.paired_with)==null?void 0:x.username;if(!b)continue;const v=u.findIndex(C=>{var A;return((A=C.paired_with)==null?void 0:A.username)===b});v>=0?u[v]=w:m.push(w)}return[...m,...u]},Nc=(t,i)=>{var m;const a=(m=t.paired_with)==null?void 0:m.username;if(a)return a;const u=`${t.lobby_date||""}-${t.interaction_date||""}`;return u!=="-"?u:`interaction-${i}`},yc=(t,i)=>t.find((a,u)=>Nc(a,u)===i)||null,dp=async(t,i,a,u)=>{try{const m=await wt("/update-paired-interaction",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({lobby_id:t,paired_with_username:i,...a}),signal:u});if(!m.ok){const w=await m.text();throw new Error(w||`HTTP ${m.status}`)}return{success:!0,data:await m.json()}}catch(m){if(m.name==="AbortError")throw m;return{success:!1,error:m.message}}},B4=({rating:t,onRatingChange:i,interactionKey:a})=>{const u=t||0,m=x=>{i(x)};return h.jsxs("div",{className:"star-rating-container",children:[h.jsx("div",{className:"star-rating-question",children:"How was the chat?"}),h.jsx("div",{className:"star-rating-stars",children:[1,2,3,4,5].map(x=>h.jsx("button",{type:"button",className:`star-button ${x<=u?"star-filled":"star-empty"}`,onClick:()=>m(x),"aria-label":`Rate ${x} star${x!==1?"s":""}`,children:""},x))}),h.jsx("div",{className:"star-rating-disclaimer",children:"(Don't worry, your response is hidden)"})]})},F4=({value:t,onChange:i,interactionKey:a})=>{const u=m=>{i(m)};return h.jsxs("div",{className:"share-contact-container",children:[h.jsx("div",{className:"share-contact-question",children:"Share Your Contact?"}),h.jsxs("div",{className:"share-contact-buttons",children:[h.jsx("button",{type:"button",className:`share-contact-button ${t===!1?"selected":""}`,onClick:()=>u(!1),children:"No"}),h.jsx("button",{type:"button",className:`share-contact-button ${t===!0?"selected":""}`,onClick:()=>u(!0),children:"Yes"})]})]})},V4=()=>{const t=On(),{checkAuth:i,user:a,isAuthLoading:u}=N.useContext(Fn),[m,x]=N.useState([]),[w,b]=N.useState(!0),[v,C]=N.useState(!1),[A,T]=N.useState(!0),[_,O]=N.useState(0),[L,B]=N.useState(null),[j,W]=N.useState(!1),[U,F]=N.useState(new Map),[Z,Q]=N.useState(new Map),ne=N.useRef(!1),q=N.useRef(!0),ie=N.useRef(null),te=N.useRef(null),ye=N.useRef([]),Oe=N.useRef(!1),Se=N.useRef(new Map),Te=N.useRef(new Map),be=N.useRef(new Map),X=N.useRef(new Map),Le=N.useRef(new Map),we=N.useRef(new Map),xe=N.useCallback(G=>{const Ce=Se.current.get(G);Ce&&(clearTimeout(Ce),Se.current.delete(G));const ve=Te.current.get(G);ve&&(ve.abort(),Te.current.delete(G))},[]),_e=N.useCallback(async(G,Ce,ve)=>{if(!ne.current){ne.current=!0;try{const ue=await wt(`/paired-player-history?offset=${G}&limit=30`);if(!ue.ok){if(ue.status===401){q.current&&t("/");return}const ge=await ue.text();throw new Error(`HTTP ${ue.status}: ${ge}`)}const $=await ue.json();if(!q.current)return;if($.status!=="success"||!Array.isArray($.interactions))throw new Error("Invalid response format");const Re=Xd($.interactions);if(ve){const ge=ye.current,Ae=L4(ge,Re),rt=j4(ge,Re,!0);console.log("[PairedHistory] Poll update:",{count:Re.length,hasNew:Ae.hasNew,hasUpdated:Ae.hasUpdated});const Ye=Xd(rt);x(Ye),ye.current=Ye,T($.has_more),O($.next_offset||0),(Ae.hasNew||Ae.hasUpdated)&&W(!0)}else Ce?(console.log("[PairedHistory] Initial load:",{count:Re.length}),x(Re),ye.current=Re,T($.has_more),O($.next_offset||0),b(!1)):(x(ge=>{const Ae=[...ge,...Re],rt=Xd(Ae);return ye.current=rt,rt}),T($.has_more),O($.next_offset||0),C(!1));B(null)}catch(ue){if(console.error("[PairedHistory] Error:",{message:ue.message,type:ve?"polling":Ce?"initial":"infinite-scroll"}),!q.current)return;B(ue.message),In.error(`Error: ${ue.message}`),Ce?b(!1):ve||C(!1)}finally{q.current&&(ne.current=!1)}}},[t]);N.useEffect(()=>{if(q.current=!0,!u){if(!a){t("/");return}if(!Oe.current)return Oe.current=!0,_e(0,!0,!1),()=>{q.current=!1}}},[u,a,t,_e]),N.useEffect(()=>{const G=()=>{document.hidden||ne.current||!q.current||_e(0,!1,!0)};if(document.hidden)return;const Ce=setInterval(G,5e3),ve=()=>{};return document.addEventListener("visibilitychange",ve),()=>{clearInterval(Ce),document.removeEventListener("visibilitychange",ve)}},[_e]),N.useEffect(()=>(j&&(ie.current&&clearTimeout(ie.current),ie.current=setTimeout(()=>{q.current&&W(!1)},4e3)),()=>{ie.current&&clearTimeout(ie.current)}),[j]),N.useEffect(()=>{if(!A||v||ne.current)return;const G=new IntersectionObserver(Ce=>{Ce[0].isIntersecting&&A&&!v&&!ne.current&&q.current&&(C(!0),_e(_,!1,!1))},{root:null,rootMargin:"300px",threshold:.1});return te.current&&G.observe(te.current),()=>{G.disconnect()}},[A,v,_,_e]),N.useEffect(()=>{ye.current=m},[m]),N.useEffect(()=>{Le.current=U},[U]),N.useEffect(()=>{we.current=Z},[Z]),N.useEffect(()=>{m.length!==0&&(F(G=>{const Ce=new Map(G);let ve=!1;return m.forEach((ue,$)=>{const Re=Nc(ue,$);if(!Ce.has(Re)){const ge=ue.partner_star_rating;ge!==null&&ge>=1&&ge<=5&&(Ce.set(Re,ge),ve=!0)}}),ve?Ce:G}),Q(G=>{const Ce=new Map(G);let ve=!1;return m.forEach((ue,$)=>{const Re=Nc(ue,$);if(!Ce.has(Re)){const ge=ue.user_show_contact;ge!==null&&typeof ge=="boolean"&&(Ce.set(Re,ge),ve=!0)}}),ve?Ce:G}))},[m]);const Ee=N.useCallback((G,Ce)=>{var Re;const ve=yc(ye.current,G);if(!(ve!=null&&ve.lobby_id)||!((Re=ve.paired_with)!=null&&Re.username)){In.error("Unable to save: interaction not found");return}let ue=be.current.get(G);if(ue===void 0){const ge=Le.current.get(G),Ae=ve.partner_star_rating;ue=ge??(Ae!==null&&Ae>=1&&Ae<=5?Ae:null),be.current.set(G,ue)}xe(G),F(ge=>{const Ae=new Map(ge);return Ae.set(G,Ce),Le.current=Ae,Ae});const $=setTimeout(async()=>{var ce;if(!q.current)return;const ge=yc(ye.current,G);if(!(ge!=null&&ge.lobby_id)||!((ce=ge.paired_with)!=null&&ce.username)){if(!q.current)return;F(pe=>{const $e=new Map(pe);return ue!=null?$e.set(G,ue):$e.delete(G),Le.current=$e,$e}),be.current.delete(G),In.error("Unable to save: interaction not found");return}const Ae=new AbortController;Te.current.set(G,Ae);const rt=ge.paired_with.username,Ye=ge.lobby_id;console.log("[PairedHistory] Updating rating:",{partner_username:rt,lobby_id:Ye,rating:Ce,previous_rating:ue});try{const pe=await dp(Ye,rt,{partner_star_rating:Ce},Ae.signal);if(!q.current)return;Te.current.delete(G),pe.success?(be.current.delete(G),console.log("[PairedHistory] Rating update successful:",{partner_username:rt,lobby_id:Ye,rating:Ce,response:pe.data}),In.success("Saved",{duration:1e3,style:{background:"#144dff",color:"white",borderRadius:"8px",padding:"12px 20px",fontSize:"0.9rem",fontWeight:"500"}})):(console.error("[PairedHistory] Rating update failed:",{partner_username:rt,lobby_id:Ye,rating:Ce,error:pe.error}),F($e=>{const Ze=new Map($e);return ue!=null?Ze.set(G,ue):Ze.delete(G),Le.current=Ze,Ze}),be.current.delete(G),In.error(pe.error||"Failed to save. Please try again."))}catch(pe){if(!q.current)return;if(Te.current.delete(G),pe.name==="AbortError"){console.log("[PairedHistory] Rating update aborted:",{partner_username:rt,lobby_id:Ye});return}console.error("[PairedHistory] Rating update error:",{partner_username:rt,lobby_id:Ye,rating:Ce,error:pe.message}),F($e=>{const Ze=new Map($e);return ue!=null?Ze.set(G,ue):Ze.delete(G),Le.current=Ze,Ze}),be.current.delete(G),In.error(pe.message||"Failed to save. Please try again.")}},500);Se.current.set(G,$)},[xe]),Y=N.useCallback((G,Ce)=>{var Re;const ve=yc(ye.current,G);if(!(ve!=null&&ve.lobby_id)||!((Re=ve.paired_with)!=null&&Re.username)){In.error("Unable to save: interaction not found");return}let ue=X.current.get(G);if(ue===void 0){const ge=we.current.get(G),Ae=ve.user_show_contact;ue=ge??(Ae!==null&&typeof Ae=="boolean"?Ae:null),X.current.set(G,ue)}xe(G),Q(ge=>{const Ae=new Map(ge);return Ae.set(G,Ce),we.current=Ae,Ae});const $=setTimeout(async()=>{var ce;if(!q.current)return;const ge=yc(ye.current,G);if(!(ge!=null&&ge.lobby_id)||!((ce=ge.paired_with)!=null&&ce.username)){if(!q.current)return;Q(pe=>{const $e=new Map(pe);return ue!=null?$e.set(G,ue):$e.delete(G),we.current=$e,$e}),X.current.delete(G),In.error("Unable to save: interaction not found");return}const Ae=new AbortController;Te.current.set(G,Ae);const rt=ge.paired_with.username,Ye=ge.lobby_id;console.log("[PairedHistory] Updating share contact:",{partner_username:rt,lobby_id:Ye,user_show_contact:Ce,previous_value:ue});try{const pe=await dp(Ye,rt,{user_show_contact:Ce},Ae.signal);if(!q.current)return;Te.current.delete(G),pe.success?(X.current.delete(G),console.log("[PairedHistory] Share contact update successful:",{partner_username:rt,lobby_id:Ye,user_show_contact:Ce,response:pe.data}),In.success("Saved",{duration:1e3,style:{background:"#144dff",color:"white",borderRadius:"8px",padding:"12px 20px",fontSize:"0.9rem",fontWeight:"500"}})):(console.error("[PairedHistory] Share contact update failed:",{partner_username:rt,lobby_id:Ye,user_show_contact:Ce,error:pe.error}),Q($e=>{const Ze=new Map($e);return ue!=null?Ze.set(G,ue):Ze.delete(G),we.current=Ze,Ze}),X.current.delete(G),In.error(pe.error||"Failed to save. Please try again."))}catch(pe){if(!q.current)return;if(Te.current.delete(G),pe.name==="AbortError"){console.log("[PairedHistory] Share contact update aborted:",{partner_username:rt,lobby_id:Ye});return}console.error("[PairedHistory] Share contact update error:",{partner_username:rt,lobby_id:Ye,user_show_contact:Ce,error:pe.message}),Q($e=>{const Ze=new Map($e);return ue!=null?Ze.set(G,ue):Ze.delete(G),we.current=Ze,Ze}),X.current.delete(G),In.error(pe.message||"Failed to save. Please try again.")}},300);Se.current.set(G,$)},[xe]);return N.useEffect(()=>()=>{q.current=!1,ie.current&&clearTimeout(ie.current),Te.current.forEach(G=>{G.abort()}),Se.current.forEach(G=>{clearTimeout(G)}),Se.current.clear(),Te.current.clear(),be.current.clear(),X.current.clear()},[]),u?h.jsx(Yo,{fullScreen:!0}):h.jsxs("div",{className:"paired-player-history-container",children:[h.jsx(Ga,{position:"top-center"}),h.jsx("button",{onClick:()=>t("/"),className:"homescreen-button",children:"Home"}),h.jsx("button",{onClick:()=>t("/post-event-auth"),className:"update-profile-button",children:"Update Profile"}),j&&h.jsx("div",{className:"new-info-indicator",children:"New Notifications"}),h.jsxs("div",{className:"paired-player-history-content",children:[h.jsx("h1",{className:"paired-player-history-title",children:"View Your Matches"}),w&&h.jsx("div",{className:"loading-grid",children:Array.from({length:30}).map((G,Ce)=>h.jsx(up,{size:60},Ce))}),!w&&m.length===0&&h.jsx("div",{className:"empty-state",children:h.jsx("p",{children:"No Past History Available"})}),!w&&m.length>0&&h.jsxs("div",{className:"interactions-list",children:[m.map((G,Ce)=>{const ve=G.paired_with||{},ue=k4(ve.image_data),$=Nc(G,Ce),Re=U.get($)??(G.partner_star_rating!==null&&G.partner_star_rating>=1&&G.partner_star_rating<=5?G.partner_star_rating:null),ge=Z.has($)?Z.get($):G.user_show_contact!==null&&typeof G.user_show_contact=="boolean"?G.user_show_contact:null,Ae=G.partner_show_contact===!0,rt=Ae&&D4(ve.social_links),Ye=Ae&&ve.contact_url&&!rt;return h.jsxs("div",{className:"interaction-card",children:[h.jsxs("div",{className:"interaction-card-main",children:[h.jsxs("div",{className:"interaction-card-left",children:[h.jsx("div",{className:"interaction-card-image",children:h.jsx("img",{src:ue,alt:ve.name||"Partner",onError:ce=>{ce.target.src="/assets/fakeprofile.png"}})}),h.jsx("div",{className:"interaction-card-name",children:ve.name||ve.username||"Unknown"})]}),h.jsxs("div",{className:"interaction-card-right",children:[h.jsx(B4,{rating:Re,onRatingChange:ce=>Ee($,ce),interactionKey:$}),h.jsx(F4,{value:ge,onChange:ce=>Y($,ce),interactionKey:$})]})]}),(rt||Ye)&&h.jsxs("div",{className:"contact-info-section",children:[h.jsx("div",{className:"social-links-header",children:ve.name?`${ve.name}'s contact info`:"Contact info"}),rt&&h.jsx("div",{className:"social-links-display",children:P4.map(ce=>{var Et;const pe=(Et=ve.social_links)==null?void 0:Et[ce];if(!pe||!pe.trim())return null;const{label:$e,Icon:Ze,color:Tt,displayPrefix:pt}=M4(ce),Qe=O4(ce,pe),et=pt+pe;return h.jsxs("a",{href:Qe,target:"_blank",rel:"noopener noreferrer",className:"social-link-item",title:$e,children:[h.jsx("span",{className:"social-link-icon",children:h.jsx(Ze,{size:16,color:Tt})}),h.jsx("span",{className:"social-link-value",children:et})]},ce)})}),Ye&&h.jsxs("div",{className:"interaction-card-contact-row",children:[h.jsx("img",{src:"/assets/contact_url_asset.png",alt:"Contact",className:"contact-url-icon"}),h.jsx("a",{href:ve.contact_url,target:"_blank",rel:"noopener noreferrer",className:"contact-url-link",title:ve.contact_url,children:ve.contact_url})]})]})]},$)}),A&&h.jsx("div",{ref:te,"data-sentinel":"true",className:"infinite-scroll-sentinel",children:v&&h.jsx(up,{size:40})}),!A&&h.jsx("div",{className:"no-more-interactions",children:"No more interactions"})]})]})]})},U4=!0,z4=()=>{const t=On(),{checkAuth:i,user:a,isAuthLoading:u}=N.useContext(Fn),[m,x]=N.useState(""),[w,b]=N.useState(""),[v,C]=N.useState(""),[A,T]=N.useState(""),[_,O]=N.useState(""),[L,B]=N.useState(""),[j,W]=N.useState(""),[U,F]=N.useState(""),[Z,Q]=N.useState(""),[ne,q]=N.useState(!1),[ie,te]=N.useState(!0),[ye,Oe]=N.useState(!1),[Se,Te]=N.useState(""),[be,X]=N.useState(!1),[Le,we]=N.useState(!1),[xe,_e]=N.useState(!1),[Ee,Y]=N.useState(!1),[G,Ce]=N.useState(!1),[ve,ue]=N.useState(!1),[$,Re]=N.useState(!1),[ge,Ae]=N.useState(!1),[rt,Ye]=N.useState(""),ce=N.useRef(null);N.useEffect(()=>{const ht=new URLSearchParams(window.location.search).get("error");if(ht){const _t={claim_expired:"Your verification link has expired. Please try again.",claim_invalid:"Invalid verification link. Please try again.",claim_failed:"Account linking failed. Please try again.",claim_blocked:"This account is an organizer account and cannot be linked this way. Please contact support."}[ht]||"An error occurred. Please try again.";Te(_t),window.history.replaceState({},"","/post-event-auth")}},[]),N.useEffect(()=>{if(u)return;if(!a){t("/login");return}(async()=>{var ht,tt;try{const _t=await wt("/load_user");if(_t.status===401){t("/login");return}if(!_t.ok)throw new Error("Failed to load user data");const zt=await _t.json();x(((ht=zt.profile)==null?void 0:ht.name)||""),b(zt.email||"");const Bt=((tt=zt.profile)==null?void 0:tt.social_links)||{};C(Bt.instagram||""),T(Bt.facebook||""),O(Bt.email||""),B(Bt.phone||""),W(Bt.website||""),F(Bt.tiktok||""),Q(Bt.snapchat||""),q(zt.email_verified===!0)}catch(_t){console.error("Error fetching user data:",_t),Te("Failed to load user data. Please try again.")}finally{te(!1)}})()},[u,a,t]),N.useEffect(()=>{if(G){const We=setTimeout(()=>{Ce(!1)},4e3);return()=>clearTimeout(We)}},[G]);const pe=()=>{!ne&&!Le&&(we(!0),Ce(!0))},$e=We=>{C(We.target.value.replace(/@/g,""))},Ze=We=>{T(We.target.value.replace(/@/g,""))},Tt=We=>{F(We.target.value.replace(/@/g,""))},pt=We=>{Q(We.target.value.replace(/@/g,""))},Qe=()=>{const We={};if(v.trim()&&(We.instagram=v.trim()),A.trim()&&(We.facebook=A.trim()),_.trim()&&(We.email=_.trim()),L.trim()&&(We.phone=L.trim()),j.trim()){let ht=j.trim();ht&&!ht.match(/^https?:\/\//i)&&(ht="https://"+ht),We.website=ht}return U.trim()&&(We.tiktok=U.trim()),Z.trim()&&(We.snapchat=Z.trim()),Object.keys(We).length>0?We:null},et=()=>!!(v.trim()||A.trim()||_.trim()||L.trim()||j.trim()||U.trim()||Z.trim()),Et=async()=>{var We;Oe(!0),Te("");try{const ht={name:m||"",social_links:Qe()};ne||(ht.email=w||"");const tt=await wt("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ht)});if(tt.status===401){t("/login");return}if(!tt.ok){const _t=await tt.json();throw new Error(_t.detail||_t.message||"Failed to update profile")}if(U4&&!ne)try{const zt=await(await wt("/auth/send-magic-link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w.trim()})})).json();zt.success?(X(!0),In.success("Check your email for the magic link!",{duration:4e3})):(console.error("Magic link failed:",zt.error),In.success("Profile saved! (Email verification unavailable)",{duration:3e3}),await i(),setTimeout(()=>t("/paired-player-history"),1500))}catch(_t){console.error("Magic link request error:",_t),In.success("Profile saved!",{duration:2e3}),await i(),setTimeout(()=>t("/paired-player-history"),1500)}else In.success("Profile saved! Redirecting to your matches...",{duration:2e3}),await i(),setTimeout(()=>t("/paired-player-history"),1500)}catch(ht){console.error("Error updating profile:",ht),(We=ht.message)!=null&&We.toLowerCase().includes("already associated with another account")?(ue(!0),Te("")):Te(ht.message||"An error occurred. Please try again.")}finally{Oe(!1)}},ze=async()=>{Ae(!0),Ye("");try{const ht=await(await wt("/auth/claim-existing-account",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w.trim()})})).json();ht.success?(ue(!1),Re(!0),In.success("Verification email sent!",{duration:4e3})):Ye(ht.error||"Failed to send verification email. Please try again.")}catch(We){console.error("Error sending claim email:",We),Ye("Network error. Please try again.")}finally{Ae(!1)}},vn=()=>{ue(!1),Ye(""),setTimeout(()=>{var We;(We=ce.current)==null||We.focus()},100)},tr=()=>{Y(!1),Et()},Xe=()=>{Y(!1),setTimeout(()=>{var We;(We=ce.current)==null||We.focus()},100)},Rt=async We=>{if(We.preventDefault(),Te(""),!w||!w.trim()){Te("Email is required to access your matches."),window.scrollTo({top:0,behavior:"smooth"});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w.trim())){Te("Please enter a valid email address."),window.scrollTo({top:0,behavior:"smooth"});return}if(!et()){Te("Please provide at least one way to contact you."),window.scrollTo({top:0,behavior:"smooth"});return}if(!ne&&!xe){_e(!0),Y(!0);return}Et()};return u||ie?h.jsx(Yo,{fullScreen:!0}):be?h.jsxs("div",{className:"post-event-auth-container",children:[h.jsx(Ga,{position:"top-center"}),h.jsxs("div",{className:"step-form-container",style:{textAlign:"center",padding:"40px 28px"},children:[h.jsx("div",{style:{fontSize:"56px",marginBottom:"24px"},children:""}),h.jsx("h2",{style:{color:"#1a1a2e",marginBottom:"12px",fontSize:"1.4rem",fontWeight:"700",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:"Check Your Email!"}),h.jsx("p",{style:{color:"#1a1a2e",marginBottom:"20px",lineHeight:"1.6",fontSize:"0.95rem",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:"We sent a magic link to"}),h.jsx("div",{style:{background:"#f9fafb",border:"1.5px solid #e5e7eb",borderRadius:"12px",padding:"14px 18px",marginBottom:"20px",fontWeight:"600",color:"#1a1a2e",wordBreak:"break-all",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:w}),h.jsx("p",{style:{color:"#1a1a2e",marginBottom:"24px",lineHeight:"1.6",fontSize:"0.95rem",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:"Click the link in your email to access your matches."}),h.jsxs("p",{style:{color:"#6b7280",fontSize:"0.85rem",marginBottom:"28px",lineHeight:"1.5",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:["The link expires in 15 minutes.",h.jsx("br",{}),"Don't see it? Check your spam folder."]}),h.jsx("button",{onClick:()=>X(!1),className:"primary-button",children:" Back to Form"})]})]}):$?h.jsxs("div",{className:"post-event-auth-container",children:[h.jsx(Ga,{position:"top-center"}),h.jsxs("div",{className:"step-form-container",style:{textAlign:"center",padding:"40px 28px"},children:[h.jsx("div",{style:{fontSize:"56px",marginBottom:"24px"},children:""}),h.jsx("h2",{style:{color:"#1a1a2e",marginBottom:"12px",fontSize:"1.4rem",fontWeight:"700",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:"Check Your Email!"}),h.jsx("p",{style:{color:"#1a1a2e",marginBottom:"20px",lineHeight:"1.6",fontSize:"0.95rem",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:"We sent a verification link to"}),h.jsx("div",{style:{background:"#f9fafb",border:"1.5px solid #e5e7eb",borderRadius:"12px",padding:"14px 18px",marginBottom:"20px",fontWeight:"600",color:"#1a1a2e",wordBreak:"break-all",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:w}),h.jsx("p",{style:{color:"#1a1a2e",marginBottom:"24px",lineHeight:"1.6",fontSize:"0.95rem",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:"Click the link to link your matches to your existing account."}),h.jsxs("p",{style:{color:"#6b7280",fontSize:"0.85rem",marginBottom:"28px",lineHeight:"1.5",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:["The link expires in 24 hours.",h.jsx("br",{}),"Don't see it? Check your spam folder."]}),h.jsx("button",{onClick:()=>Re(!1),className:"primary-button",children:" Back to Form"})]})]}):h.jsxs("div",{className:"post-event-auth-container",children:[h.jsx(Ga,{position:"top-center",toastOptions:{style:{background:"#1a1a2e",color:"white",borderRadius:"12px",padding:"12px 20px",fontSize:"0.9rem",fontWeight:"500",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},success:{iconTheme:{primary:"#10b981",secondary:"white"}},error:{iconTheme:{primary:"#ef4444",secondary:"white"}}}}),h.jsx("button",{onClick:()=>t("/"),className:"homescreen-button",children:"Home"}),h.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:"8px",marginBottom:"0"},children:h.jsx("img",{src:"/assets/reuneo_test_11.png",alt:"Reuneo Logo",style:{maxWidth:"100px",height:"auto",objectFit:"contain"}})}),h.jsx("h3",{className:"post-event-auth-header",style:{marginTop:"12px"},children:"Access Your Matches"}),h.jsx("div",{className:"step-form-container",children:h.jsxs("form",{onSubmit:Rt,children:[Se&&h.jsx("div",{className:"error-message",style:{marginBottom:"20px"},children:Se}),h.jsxs("div",{style:{marginTop:"0"},children:[h.jsx("label",{className:"step-label",children:"Name"}),h.jsx("input",{type:"text",value:m,onChange:We=>x(We.target.value),placeholder:"Enter your name",className:"step-input"})]}),h.jsxs("div",{style:{marginTop:"20px",position:"relative"},children:[h.jsxs("label",{className:"step-label",children:["Email ",h.jsx("span",{style:{color:"#ef4444"},children:"*"}),ne&&h.jsx("span",{style:{color:"#10b981",fontSize:"0.75rem",marginLeft:"8px",fontWeight:"600",background:"rgba(16, 185, 129, 0.1)",padding:"2px 8px",borderRadius:"6px"},children:" Verified"})]}),G&&h.jsxs("div",{className:"email-warning-toast",children:[h.jsx("span",{className:"email-warning-icon",children:""}),h.jsx("span",{className:"email-warning-text",children:"Make sure the email is correct"})]}),h.jsx("input",{ref:ce,type:"email",value:w,onChange:We=>b(We.target.value),onFocus:pe,placeholder:"Enter your email",className:"step-input",required:!0,disabled:ne,style:ne?{backgroundColor:"#f3f4f6",color:"#9ca3af",cursor:"not-allowed",borderColor:"#e5e7eb"}:{}})]}),h.jsxs("div",{className:"social-links-section",children:[h.jsxs("div",{className:"social-links-header",children:[h.jsx("span",{className:"social-links-title",children:"Share Your Contact Info"}),h.jsx("span",{className:"social-links-subtitle",children:"(At least one required)"})]}),h.jsxs("div",{className:"social-link-field",children:[h.jsx("label",{className:"step-label",children:"Instagram"}),h.jsx("input",{type:"text",value:v,onChange:$e,placeholder:"@username",className:"step-input"})]}),h.jsxs("div",{className:"social-link-field",children:[h.jsx("label",{className:"step-label",children:"Facebook"}),h.jsx("input",{type:"text",value:A,onChange:Ze,placeholder:"@username",className:"step-input"})]}),h.jsxs("div",{className:"social-link-field",children:[h.jsx("label",{className:"step-label",children:"Personal Email"}),h.jsx("input",{type:"email",value:_,onChange:We=>O(We.target.value),placeholder:"you@example.com",className:"step-input"}),h.jsx("span",{className:"social-link-helper",children:"Separate email for people to reach you"})]}),h.jsxs("div",{className:"social-link-field",children:[h.jsx("label",{className:"step-label",children:"Phone"}),h.jsx("input",{type:"tel",value:L,onChange:We=>B(We.target.value),placeholder:"+1 (555) 123-4567",className:"step-input"})]}),h.jsxs("div",{className:"social-link-field",children:[h.jsx("label",{className:"step-label",children:"Website"}),h.jsx("input",{type:"text",value:j,onChange:We=>W(We.target.value),placeholder:"https://yourwebsite.com",className:"step-input"})]}),h.jsxs("div",{className:"social-link-field",children:[h.jsx("label",{className:"step-label",children:"TikTok"}),h.jsx("input",{type:"text",value:U,onChange:Tt,placeholder:"@username",className:"step-input"})]}),h.jsxs("div",{className:"social-link-field",children:[h.jsx("label",{className:"step-label",children:"Snapchat"}),h.jsx("input",{type:"text",value:Z,onChange:pt,placeholder:"@username",className:"step-input"})]})]}),h.jsx("button",{type:"submit",className:"primary-button",disabled:ye,style:{marginTop:"30px"},children:ye?ne?"Updating...":"Submitting...":ne?"Update":"Submit"})]})}),Ee&&h.jsx("div",{className:"email-confirm-modal-overlay",children:h.jsxs("div",{className:"email-confirm-modal",children:[h.jsx("div",{className:"email-confirm-modal-icon",children:""}),h.jsx("h3",{className:"email-confirm-modal-title",children:"Is this email correct?"}),h.jsx("p",{className:"email-confirm-modal-subtitle",children:"Make sure its right"}),h.jsx("div",{className:"email-confirm-modal-email",children:w}),h.jsxs("div",{className:"email-confirm-modal-buttons",children:[h.jsx("button",{className:"email-confirm-btn email-confirm-btn-yes",onClick:tr,children:"Yes, it's correct"}),h.jsx("button",{className:"email-confirm-btn email-confirm-btn-no",onClick:Xe,children:"Let me edit"})]})]})}),ve&&h.jsx("div",{className:"email-confirm-modal-overlay",children:h.jsxs("div",{className:"email-confirm-modal",children:[h.jsx("div",{className:"email-confirm-modal-icon",children:""}),h.jsx("h3",{className:"email-confirm-modal-title",children:"This email is already registered"}),h.jsx("p",{className:"email-confirm-modal-subtitle",children:"To link your matches to your existing account, we'll send a verification email to:"}),h.jsx("div",{className:"email-confirm-modal-email",children:w}),rt&&h.jsx("div",{style:{color:"#b91c1c",fontSize:"0.85rem",marginBottom:"16px",padding:"10px 14px",backgroundColor:"rgba(185, 28, 28, 0.08)",borderRadius:"10px",fontWeight:"500",textAlign:"left",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:rt}),h.jsxs("div",{className:"email-confirm-modal-buttons",children:[h.jsx("button",{className:"email-confirm-btn email-confirm-btn-yes",onClick:ze,disabled:ge,children:ge?"Sending...":"Send Verification Email"}),h.jsx("button",{className:"email-confirm-btn email-confirm-btn-no",onClick:vn,disabled:ge,children:"Use Different Email"})]})]})})]})},W4=()=>{const t=On(),{checkAuth:i}=N.useContext(Fn),[a,u]=N.useState("verifying"),[m,x]=N.useState("");return N.useEffect(()=>{(async()=>{try{const b=await wt("/auth/session",{method:"GET"});b.ok?(await b.json()).authenticated?(u("success"),await i(),setTimeout(()=>{t("/")},2e3)):(u("error"),x("Session not found. Please try logging in again.")):(u("error"),x("Could not verify your session. Please try again."))}catch(b){console.error("Session verification error:",b),u("error"),x("Network error. Please check your connection and try again.")}})()},[i,t]),h.jsx("div",{className:"auth-success-container",children:h.jsxs("div",{className:"auth-success-card",children:[a==="verifying"&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"auth-success-spinner"}),h.jsx("h2",{children:"Signing you in..."}),h.jsx("p",{children:"Please wait while we verify your session."})]}),a==="success"&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"auth-success-checkmark",children:""}),h.jsx("h2",{children:"Welcome to Reuneo!"}),h.jsx("p",{children:"You're now signed in. Redirecting you..."})]}),a==="error"&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"auth-success-error",children:""}),h.jsx("h2",{children:"Something went wrong"}),h.jsx("p",{children:m}),h.jsx("button",{className:"auth-success-button",onClick:()=>t("/login"),children:"Back to Login"})]})]})})},H4=()=>{const t=On(),[i]=_p(),{checkAuth:a}=N.useContext(Fn),[u,m]=N.useState(""),[x,w]=N.useState(""),[b,v]=N.useState(""),[C,A]=N.useState(!0),[T,_]=N.useState(!1),[O,L]=N.useState(""),[B,j]=N.useState(""),W=i.get("token");N.useEffect(()=>{(async()=>{if(!W){j("No token provided. Please request a new magic link."),A(!1);return}try{const Q=await(await fetch(`${window.server_url}/auth/verify-setup-token?token=${encodeURIComponent(W)}`,{credentials:"include"})).json();Q.valid&&Q.email?m(Q.email):j(Q.error||"Invalid or expired token. Please request a new magic link.")}catch(Z){console.error("Token validation error:",Z),j("Unable to validate token. Please try again.")}finally{A(!1)}})()},[W]);const U=async F=>{if(F.preventDefault(),L(""),!x){L("Password is required");return}if(x.length<2){L("Password must be at least 2 characters");return}if(x!==b){L("Passwords do not match");return}_(!0);try{const Q=await(await wt("/auth/set-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:W,password:x})})).json();Q.success?(await a(),t("/paired-player-history")):L(Q.error||"Failed to set password. Please try again.")}catch(Z){console.error("Set password error:",Z),L("An error occurred. Please try again.")}finally{_(!1)}};return C?h.jsx(Yo,{fullScreen:!0,message:"Verifying..."}):B?h.jsxs("div",{className:"set-password-container",children:[h.jsx("button",{onClick:()=>t("/"),className:"homescreen-button",children:"Home"}),h.jsxs("div",{className:"set-password-error-container",children:[h.jsx("div",{className:"error-icon",children:""}),h.jsx("h2",{className:"error-title",children:"Link Expired or Invalid"}),h.jsx("p",{className:"error-description",children:B}),h.jsx("button",{onClick:()=>t("/login"),className:"primary-button",style:{marginTop:"20px"},children:"Go to Login"})]})]}):h.jsxs("div",{className:"set-password-container",children:[h.jsx("button",{onClick:()=>t("/"),className:"homescreen-button",children:"Home"}),h.jsx("h3",{className:"set-password-header",children:"Set Your Password"}),h.jsx("p",{className:"set-password-subtitle",children:"You'll use this to log in later"}),h.jsx("div",{className:"step-form-container",children:h.jsxs("form",{onSubmit:U,children:[O&&h.jsx("div",{className:"error-message",children:O}),h.jsxs("div",{style:{marginTop:"0"},children:[h.jsx("label",{className:"step-label",children:"Email"}),h.jsxs("div",{className:"email-display",children:[h.jsx("input",{type:"email",value:u,className:"step-input email-locked",disabled:!0,readOnly:!0}),h.jsx("span",{className:"lock-icon",children:""})]}),h.jsx("p",{className:"email-hint",children:"This is the email you verified"})]}),h.jsxs("div",{style:{marginTop:"24px"},children:[h.jsx("label",{className:"step-label",children:"Create Password"}),h.jsx("input",{type:"password",value:x,onChange:F=>w(F.target.value),placeholder:"Enter a password",className:"step-input",autoFocus:!0,autoComplete:"new-password"})]}),h.jsxs("div",{style:{marginTop:"16px"},children:[h.jsx("label",{className:"step-label",children:"Confirm Password"}),h.jsx("input",{type:"password",value:b,onChange:F=>v(F.target.value),placeholder:"Confirm your password",className:"step-input",autoComplete:"new-password"})]}),h.jsx("button",{type:"submit",className:"primary-button",disabled:T||!x,style:{marginTop:"30px"},children:T?"Setting Password...":"Set Password"})]})})]})},G4=()=>{const t=On(),[i,a]=N.useState(""),[u,m]=N.useState(!1),[x,w]=N.useState(!1),[b,v]=N.useState(!1),[C,A]=N.useState(!1),[T,_]=N.useState(""),O=W=>{const U=W.target.value.toLowerCase();a(U),_(""),!b&&U.length>0&&(v(!0),setTimeout(()=>A(!0),300),setTimeout(()=>A(!1),4300))},L=W=>W&&W.includes("@")&&W.includes("."),B=async W=>{if(W.preventDefault(),_(""),!L(i)){_("Please enter a valid email address");return}m(!0);try{const F=await(await wt("/auth/request-password-reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i.trim()})})).json();F.success?w(!0):_(F.error||"Something went wrong. Please try again.")}catch(U){console.error("Password reset request error:",U),_("Network error. Please check your connection and try again.")}finally{m(!1)}},j=()=>{w(!1),a(""),v(!1)};return h.jsxs("div",{className:"forgot-password-container",children:[h.jsx("button",{onClick:()=>t("/"),className:"homescreen-button",children:"Home"}),h.jsx("h3",{className:"forgot-password-header",children:"Reset Your Password"}),h.jsx("p",{className:"forgot-password-subtitle",children:"Enter your email and we'll send you a reset link"}),h.jsxs("div",{className:"step-form-container",children:[h.jsxs("form",{onSubmit:B,children:[T&&h.jsx("div",{className:"error-message",children:T}),h.jsxs("div",{style:{marginTop:"0"},children:[h.jsx("label",{className:"step-label",children:"Email Address"}),h.jsx("input",{type:"email",value:i,onChange:O,placeholder:"Enter your email",className:"step-input",autoFocus:!0,autoComplete:"email"})]}),h.jsx("button",{type:"submit",className:"primary-button",disabled:u||!i,style:{marginTop:"30px"},children:u?"Sending...":"Send Reset Link"})]}),h.jsx("button",{type:"button",onClick:()=>t("/login"),className:"back-to-login-link",children:"Back to Login"})]}),h.jsx(_r,{children:C&&h.jsx(bt.div,{className:"email-toast",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.3},children:"Double-check your email address is correct before submitting."})}),h.jsx(_r,{children:x&&h.jsx(bt.div,{className:"reset-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:j,children:h.jsxs(bt.div,{className:"reset-modal-content",initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},transition:{type:"spring",stiffness:400,damping:25},onClick:W=>W.stopPropagation(),children:[h.jsx("h2",{className:"reset-modal-header",children:" Check Your Inbox"}),h.jsx("p",{className:"reset-modal-subtext",children:"If an account exists with this email, we've sent a password reset link. Check your inbox and spam folder."}),h.jsx("button",{type:"button",className:"reset-modal-button",onClick:j,children:"Got it"})]})})})]})};R2.createRoot(document.getElementById("root")).render(h.jsx(N.StrictMode,{children:h.jsx(k2,{children:h.jsxs(gw,{basename:"/",children:[h.jsx(ME,{}),h.jsx(OE,{}),h.jsxs(Gy,{children:[h.jsx(Xn,{path:"/",element:h.jsx(PE,{})}),h.jsx(Xn,{path:"/login",element:h.jsx(DE,{})}),h.jsx(Xn,{path:"/signup",element:h.jsx(pE,{})}),h.jsx(Xn,{path:"/logout",element:h.jsx(LE,{})}),h.jsx(Xn,{path:"/lobby",element:h.jsx(dS,{})}),h.jsx(Xn,{path:"/admin_lobby_view",element:h.jsx(s4,{})}),h.jsx(Xn,{path:"/create_lobby",element:h.jsx(a4,{})}),h.jsx(Xn,{path:"/product-selection",element:h.jsx(o4,{})}),h.jsx(Xn,{path:"/organizer-signup",element:h.jsx(c4,{})}),h.jsx(Xn,{path:"/organizer-signup-success",element:h.jsx(u4,{})}),h.jsx(Xn,{path:"/organizer-account-details",element:h.jsx(d4,{})}),h.jsx(Xn,{path:"/organizer-dashboard",element:h.jsx(p4,{})}),h.jsx(Xn,{path:"/master_lobby_view",element:h.jsx(x4,{})}),h.jsx(Xn,{path:"/paired-player-history",element:h.jsx(V4,{})}),h.jsx(Xn,{path:"/post-event-auth",element:h.jsx(z4,{})}),h.jsx(Xn,{path:"/set-password",element:h.jsx(H4,{})}),h.jsx(Xn,{path:"/forgot-password",element:h.jsx(G4,{})}),h.jsx(Xn,{path:"/auth/success",element:h.jsx(W4,{})})]})]})})}));
