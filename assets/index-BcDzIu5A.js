(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))f(p);new MutationObserver(p=>{for(const x of p)if(x.type==="childList")for(const y of x.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&f(y)}).observe(document,{childList:!0,subtree:!0});function a(p){const x={};return p.integrity&&(x.integrity=p.integrity),p.referrerPolicy&&(x.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?x.credentials="include":p.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function f(p){if(p.ep)return;p.ep=!0;const x=a(p);fetch(p.href,x)}})();var Jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zp(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ed={exports:{}},ba={},td={exports:{}},kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X0;function Xx(){if(X0)return kt;X0=1;var r=Symbol.for("react.element"),o=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),y=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),I=Symbol.iterator;function R(Y){return Y===null||typeof Y!="object"?null:(Y=I&&Y[I]||Y["@@iterator"],typeof Y=="function"?Y:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,B={};function j(Y,te,be){this.props=Y,this.context=te,this.refs=B,this.updater=be||D}j.prototype.isReactComponent={},j.prototype.setState=function(Y,te){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,te,"setState")},j.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function V(){}V.prototype=j.prototype;function W(Y,te,be){this.props=Y,this.context=te,this.refs=B,this.updater=be||D}var z=W.prototype=new V;z.constructor=W,L(z,j.prototype),z.isPureReactComponent=!0;var J=Array.isArray,ne=Object.prototype.hasOwnProperty,oe={current:null},q={key:!0,ref:!0,__self:!0,__source:!0};function ue(Y,te,be){var ze,Re={},fe=null,Ye=null;if(te!=null)for(ze in te.ref!==void 0&&(Ye=te.ref),te.key!==void 0&&(fe=""+te.key),te)ne.call(te,ze)&&!q.hasOwnProperty(ze)&&(Re[ze]=te[ze]);var He=arguments.length-2;if(He===1)Re.children=be;else if(1<He){for(var nt=Array(He),Ge=0;Ge<He;Ge++)nt[Ge]=arguments[Ge+2];Re.children=nt}if(Y&&Y.defaultProps)for(ze in He=Y.defaultProps,He)Re[ze]===void 0&&(Re[ze]=He[ze]);return{$$typeof:r,type:Y,key:fe,ref:Ye,props:Re,_owner:oe.current}}function $(Y,te){return{$$typeof:r,type:Y.type,key:te,ref:Y.ref,props:Y.props,_owner:Y._owner}}function Ae(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===r}function Oe(Y){var te={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(be){return te[be]})}var ke=/\/+/g;function De(Y,te){return typeof Y=="object"&&Y!==null&&Y.key!=null?Oe(""+Y.key):te.toString(36)}function Se(Y,te,be,ze,Re){var fe=typeof Y;(fe==="undefined"||fe==="boolean")&&(Y=null);var Ye=!1;if(Y===null)Ye=!0;else switch(fe){case"string":case"number":Ye=!0;break;case"object":switch(Y.$$typeof){case r:case o:Ye=!0}}if(Ye)return Ye=Y,Re=Re(Ye),Y=ze===""?"."+De(Ye,0):ze,J(Re)?(be="",Y!=null&&(be=Y.replace(ke,"$&/")+"/"),Se(Re,te,be,"",function(Ge){return Ge})):Re!=null&&(Ae(Re)&&(Re=$(Re,be+(!Re.key||Ye&&Ye.key===Re.key?"":(""+Re.key).replace(ke,"$&/")+"/")+Y)),te.push(Re)),1;if(Ye=0,ze=ze===""?".":ze+":",J(Y))for(var He=0;He<Y.length;He++){fe=Y[He];var nt=ze+De(fe,He);Ye+=Se(fe,te,be,nt,Re)}else if(nt=R(Y),typeof nt=="function")for(Y=nt.call(Y),He=0;!(fe=Y.next()).done;)fe=fe.value,nt=ze+De(fe,He++),Ye+=Se(fe,te,be,nt,Re);else if(fe==="object")throw te=String(Y),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return Ye}function Q(Y,te,be){if(Y==null)return Y;var ze=[],Re=0;return Se(Y,ze,"","",function(fe){return te.call(be,fe,Re++)}),ze}function Le(Y){if(Y._status===-1){var te=Y._result;te=te(),te.then(function(be){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=be)},function(be){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=be)}),Y._status===-1&&(Y._status=0,Y._result=te)}if(Y._status===1)return Y._result.default;throw Y._result}var pe={current:null},ge={transition:null},Me={ReactCurrentDispatcher:pe,ReactCurrentBatchConfig:ge,ReactCurrentOwner:oe};function ae(){throw Error("act(...) is not supported in production builds of React.")}return kt.Children={map:Q,forEach:function(Y,te,be){Q(Y,function(){te.apply(this,arguments)},be)},count:function(Y){var te=0;return Q(Y,function(){te++}),te},toArray:function(Y){return Q(Y,function(te){return te})||[]},only:function(Y){if(!Ae(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},kt.Component=j,kt.Fragment=a,kt.Profiler=p,kt.PureComponent=W,kt.StrictMode=f,kt.Suspense=v,kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Me,kt.act=ae,kt.cloneElement=function(Y,te,be){if(Y==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Y+".");var ze=L({},Y.props),Re=Y.key,fe=Y.ref,Ye=Y._owner;if(te!=null){if(te.ref!==void 0&&(fe=te.ref,Ye=oe.current),te.key!==void 0&&(Re=""+te.key),Y.type&&Y.type.defaultProps)var He=Y.type.defaultProps;for(nt in te)ne.call(te,nt)&&!q.hasOwnProperty(nt)&&(ze[nt]=te[nt]===void 0&&He!==void 0?He[nt]:te[nt])}var nt=arguments.length-2;if(nt===1)ze.children=be;else if(1<nt){He=Array(nt);for(var Ge=0;Ge<nt;Ge++)He[Ge]=arguments[Ge+2];ze.children=He}return{$$typeof:r,type:Y.type,key:Re,ref:fe,props:ze,_owner:Ye}},kt.createContext=function(Y){return Y={$$typeof:y,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Y.Provider={$$typeof:x,_context:Y},Y.Consumer=Y},kt.createElement=ue,kt.createFactory=function(Y){var te=ue.bind(null,Y);return te.type=Y,te},kt.createRef=function(){return{current:null}},kt.forwardRef=function(Y){return{$$typeof:A,render:Y}},kt.isValidElement=Ae,kt.lazy=function(Y){return{$$typeof:S,_payload:{_status:-1,_result:Y},_init:Le}},kt.memo=function(Y,te){return{$$typeof:b,type:Y,compare:te===void 0?null:te}},kt.startTransition=function(Y){var te=ge.transition;ge.transition={};try{Y()}finally{ge.transition=te}},kt.unstable_act=ae,kt.useCallback=function(Y,te){return pe.current.useCallback(Y,te)},kt.useContext=function(Y){return pe.current.useContext(Y)},kt.useDebugValue=function(){},kt.useDeferredValue=function(Y){return pe.current.useDeferredValue(Y)},kt.useEffect=function(Y,te){return pe.current.useEffect(Y,te)},kt.useId=function(){return pe.current.useId()},kt.useImperativeHandle=function(Y,te,be){return pe.current.useImperativeHandle(Y,te,be)},kt.useInsertionEffect=function(Y,te){return pe.current.useInsertionEffect(Y,te)},kt.useLayoutEffect=function(Y,te){return pe.current.useLayoutEffect(Y,te)},kt.useMemo=function(Y,te){return pe.current.useMemo(Y,te)},kt.useReducer=function(Y,te,be){return pe.current.useReducer(Y,te,be)},kt.useRef=function(Y){return pe.current.useRef(Y)},kt.useState=function(Y){return pe.current.useState(Y)},kt.useSyncExternalStore=function(Y,te,be){return pe.current.useSyncExternalStore(Y,te,be)},kt.useTransition=function(){return pe.current.useTransition()},kt.version="18.3.1",kt}var Y0;function sf(){return Y0||(Y0=1,td.exports=Xx()),td.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K0;function Yx(){if(K0)return ba;K0=1;var r=sf(),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),f=Object.prototype.hasOwnProperty,p=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x={key:!0,ref:!0,__self:!0,__source:!0};function y(A,v,b){var S,I={},R=null,D=null;b!==void 0&&(R=""+b),v.key!==void 0&&(R=""+v.key),v.ref!==void 0&&(D=v.ref);for(S in v)f.call(v,S)&&!x.hasOwnProperty(S)&&(I[S]=v[S]);if(A&&A.defaultProps)for(S in v=A.defaultProps,v)I[S]===void 0&&(I[S]=v[S]);return{$$typeof:o,type:A,key:R,ref:D,props:I,_owner:p.current}}return ba.Fragment=a,ba.jsx=y,ba.jsxs=y,ba}var $0;function Kx(){return $0||($0=1,ed.exports=Yx()),ed.exports}var w=Kx(),_=sf();const tn=zp(_);var ec={},nd={exports:{}},Er={},rd={exports:{}},id={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z0;function $x(){return Z0||(Z0=1,function(r){function o(ge,Me){var ae=ge.length;ge.push(Me);e:for(;0<ae;){var Y=ae-1>>>1,te=ge[Y];if(0<p(te,Me))ge[Y]=Me,ge[ae]=te,ae=Y;else break e}}function a(ge){return ge.length===0?null:ge[0]}function f(ge){if(ge.length===0)return null;var Me=ge[0],ae=ge.pop();if(ae!==Me){ge[0]=ae;e:for(var Y=0,te=ge.length,be=te>>>1;Y<be;){var ze=2*(Y+1)-1,Re=ge[ze],fe=ze+1,Ye=ge[fe];if(0>p(Re,ae))fe<te&&0>p(Ye,Re)?(ge[Y]=Ye,ge[fe]=ae,Y=fe):(ge[Y]=Re,ge[ze]=ae,Y=ze);else if(fe<te&&0>p(Ye,ae))ge[Y]=Ye,ge[fe]=ae,Y=fe;else break e}}return Me}function p(ge,Me){var ae=ge.sortIndex-Me.sortIndex;return ae!==0?ae:ge.id-Me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var x=performance;r.unstable_now=function(){return x.now()}}else{var y=Date,A=y.now();r.unstable_now=function(){return y.now()-A}}var v=[],b=[],S=1,I=null,R=3,D=!1,L=!1,B=!1,j=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(ge){for(var Me=a(b);Me!==null;){if(Me.callback===null)f(b);else if(Me.startTime<=ge)f(b),Me.sortIndex=Me.expirationTime,o(v,Me);else break;Me=a(b)}}function J(ge){if(B=!1,z(ge),!L)if(a(v)!==null)L=!0,Le(ne);else{var Me=a(b);Me!==null&&pe(J,Me.startTime-ge)}}function ne(ge,Me){L=!1,B&&(B=!1,V(ue),ue=-1),D=!0;var ae=R;try{for(z(Me),I=a(v);I!==null&&(!(I.expirationTime>Me)||ge&&!Oe());){var Y=I.callback;if(typeof Y=="function"){I.callback=null,R=I.priorityLevel;var te=Y(I.expirationTime<=Me);Me=r.unstable_now(),typeof te=="function"?I.callback=te:I===a(v)&&f(v),z(Me)}else f(v);I=a(v)}if(I!==null)var be=!0;else{var ze=a(b);ze!==null&&pe(J,ze.startTime-Me),be=!1}return be}finally{I=null,R=ae,D=!1}}var oe=!1,q=null,ue=-1,$=5,Ae=-1;function Oe(){return!(r.unstable_now()-Ae<$)}function ke(){if(q!==null){var ge=r.unstable_now();Ae=ge;var Me=!0;try{Me=q(!0,ge)}finally{Me?De():(oe=!1,q=null)}}else oe=!1}var De;if(typeof W=="function")De=function(){W(ke)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,Q=Se.port2;Se.port1.onmessage=ke,De=function(){Q.postMessage(null)}}else De=function(){j(ke,0)};function Le(ge){q=ge,oe||(oe=!0,De())}function pe(ge,Me){ue=j(function(){ge(r.unstable_now())},Me)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ge){ge.callback=null},r.unstable_continueExecution=function(){L||D||(L=!0,Le(ne))},r.unstable_forceFrameRate=function(ge){0>ge||125<ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<ge?Math.floor(1e3/ge):5},r.unstable_getCurrentPriorityLevel=function(){return R},r.unstable_getFirstCallbackNode=function(){return a(v)},r.unstable_next=function(ge){switch(R){case 1:case 2:case 3:var Me=3;break;default:Me=R}var ae=R;R=Me;try{return ge()}finally{R=ae}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ge,Me){switch(ge){case 1:case 2:case 3:case 4:case 5:break;default:ge=3}var ae=R;R=ge;try{return Me()}finally{R=ae}},r.unstable_scheduleCallback=function(ge,Me,ae){var Y=r.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?Y+ae:Y):ae=Y,ge){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=ae+te,ge={id:S++,callback:Me,priorityLevel:ge,startTime:ae,expirationTime:te,sortIndex:-1},ae>Y?(ge.sortIndex=ae,o(b,ge),a(v)===null&&ge===a(b)&&(B?(V(ue),ue=-1):B=!0,pe(J,ae-Y))):(ge.sortIndex=te,o(v,ge),L||D||(L=!0,Le(ne))),ge},r.unstable_shouldYield=Oe,r.unstable_wrapCallback=function(ge){var Me=R;return function(){var ae=R;R=Me;try{return ge.apply(this,arguments)}finally{R=ae}}}}(id)),id}var q0;function Zx(){return q0||(q0=1,rd.exports=$x()),rd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q0;function qx(){if(Q0)return Er;Q0=1;var r=sf(),o=Zx();function a(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,d=1;d<arguments.length;d++)s+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f=new Set,p={};function x(t,s){y(t,s),y(t+"Capture",s)}function y(t,s){for(p[t]=s,t=0;t<s.length;t++)f.add(s[t])}var A=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v=Object.prototype.hasOwnProperty,b=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S={},I={};function R(t){return v.call(I,t)?!0:v.call(S,t)?!1:b.test(t)?I[t]=!0:(S[t]=!0,!1)}function D(t,s,d,g){if(d!==null&&d.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return g?!1:d!==null?!d.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function L(t,s,d,g){if(s===null||typeof s>"u"||D(t,s,d,g))return!0;if(g)return!1;if(d!==null)switch(d.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function B(t,s,d,g,E,T,O){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=g,this.attributeNamespace=E,this.mustUseProperty=d,this.propertyName=t,this.type=s,this.sanitizeURL=T,this.removeEmptyString=O}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){j[t]=new B(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];j[s]=new B(s,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){j[t]=new B(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){j[t]=new B(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){j[t]=new B(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){j[t]=new B(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){j[t]=new B(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){j[t]=new B(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){j[t]=new B(t,5,!1,t.toLowerCase(),null,!1,!1)});var V=/[\-:]([a-z])/g;function W(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(V,W);j[s]=new B(s,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(V,W);j[s]=new B(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(V,W);j[s]=new B(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){j[t]=new B(t,1,!1,t.toLowerCase(),null,!1,!1)}),j.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){j[t]=new B(t,1,!1,t.toLowerCase(),null,!0,!0)});function z(t,s,d,g){var E=j.hasOwnProperty(s)?j[s]:null;(E!==null?E.type!==0:g||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(L(s,d,E,g)&&(d=null),g||E===null?R(s)&&(d===null?t.removeAttribute(s):t.setAttribute(s,""+d)):E.mustUseProperty?t[E.propertyName]=d===null?E.type===3?!1:"":d:(s=E.attributeName,g=E.attributeNamespace,d===null?t.removeAttribute(s):(E=E.type,d=E===3||E===4&&d===!0?"":""+d,g?t.setAttributeNS(g,s,d):t.setAttribute(s,d))))}var J=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ne=Symbol.for("react.element"),oe=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),ue=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),Ae=Symbol.for("react.provider"),Oe=Symbol.for("react.context"),ke=Symbol.for("react.forward_ref"),De=Symbol.for("react.suspense"),Se=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),Le=Symbol.for("react.lazy"),pe=Symbol.for("react.offscreen"),ge=Symbol.iterator;function Me(t){return t===null||typeof t!="object"?null:(t=ge&&t[ge]||t["@@iterator"],typeof t=="function"?t:null)}var ae=Object.assign,Y;function te(t){if(Y===void 0)try{throw Error()}catch(d){var s=d.stack.trim().match(/\n( *(at )?)/);Y=s&&s[1]||""}return`
`+Y+t}var be=!1;function ze(t,s){if(!t||be)return"";be=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(de){var g=de}Reflect.construct(t,[],s)}else{try{s.call()}catch(de){g=de}t.call(s.prototype)}else{try{throw Error()}catch(de){g=de}t()}}catch(de){if(de&&g&&typeof de.stack=="string"){for(var E=de.stack.split(`
`),T=g.stack.split(`
`),O=E.length-1,H=T.length-1;1<=O&&0<=H&&E[O]!==T[H];)H--;for(;1<=O&&0<=H;O--,H--)if(E[O]!==T[H]){if(O!==1||H!==1)do if(O--,H--,0>H||E[O]!==T[H]){var X=`
`+E[O].replace(" at new "," at ");return t.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",t.displayName)),X}while(1<=O&&0<=H);break}}}finally{be=!1,Error.prepareStackTrace=d}return(t=t?t.displayName||t.name:"")?te(t):""}function Re(t){switch(t.tag){case 5:return te(t.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return t=ze(t.type,!1),t;case 11:return t=ze(t.type.render,!1),t;case 1:return t=ze(t.type,!0),t;default:return""}}function fe(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case q:return"Fragment";case oe:return"Portal";case $:return"Profiler";case ue:return"StrictMode";case De:return"Suspense";case Se:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Oe:return(t.displayName||"Context")+".Consumer";case Ae:return(t._context.displayName||"Context")+".Provider";case ke:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Q:return s=t.displayName||null,s!==null?s:fe(t.type)||"Memo";case Le:s=t._payload,t=t._init;try{return fe(t(s))}catch{}}return null}function Ye(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fe(s);case 8:return s===ue?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function He(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function nt(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ge(t){var s=nt(t)?"checked":"value",d=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),g=""+t[s];if(!t.hasOwnProperty(s)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var E=d.get,T=d.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return E.call(this)},set:function(O){g=""+O,T.call(this,O)}}),Object.defineProperty(t,s,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(O){g=""+O},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function ft(t){t._valueTracker||(t._valueTracker=Ge(t))}function me(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var d=s.getValue(),g="";return t&&(g=nt(t)?t.checked?"true":"false":t.value),t=g,t!==d?(s.setValue(t),!0):!1}function we(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function st(t,s){var d=s.checked;return ae({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??t._wrapperState.initialChecked})}function ht(t,s){var d=s.defaultValue==null?"":s.defaultValue,g=s.checked!=null?s.checked:s.defaultChecked;d=He(s.value!=null?s.value:d),t._wrapperState={initialChecked:g,initialValue:d,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Pt(t,s){s=s.checked,s!=null&&z(t,"checked",s,!1)}function xt(t,s){Pt(t,s);var d=He(s.value),g=s.type;if(d!=null)g==="number"?(d===0&&t.value===""||t.value!=d)&&(t.value=""+d):t.value!==""+d&&(t.value=""+d);else if(g==="submit"||g==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?Je(t,s.type,d):s.hasOwnProperty("defaultValue")&&Je(t,s.type,He(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function qe(t,s,d){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var g=s.type;if(!(g!=="submit"&&g!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,d||s===t.value||(t.value=s),t.defaultValue=s}d=t.name,d!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,d!==""&&(t.name=d)}function Je(t,s,d){(s!=="number"||we(t.ownerDocument)!==t)&&(d==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+d&&(t.defaultValue=""+d))}var Nt=Array.isArray;function Ie(t,s,d,g){if(t=t.options,s){s={};for(var E=0;E<d.length;E++)s["$"+d[E]]=!0;for(d=0;d<t.length;d++)E=s.hasOwnProperty("$"+t[d].value),t[d].selected!==E&&(t[d].selected=E),E&&g&&(t[d].defaultSelected=!0)}else{for(d=""+He(d),s=null,E=0;E<t.length;E++){if(t[E].value===d){t[E].selected=!0,g&&(t[E].defaultSelected=!0);return}s!==null||t[E].disabled||(s=t[E])}s!==null&&(s.selected=!0)}}function yn(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(a(91));return ae({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ct(t,s){var d=s.value;if(d==null){if(d=s.children,s=s.defaultValue,d!=null){if(s!=null)throw Error(a(92));if(Nt(d)){if(1<d.length)throw Error(a(93));d=d[0]}s=d}s==null&&(s=""),d=s}t._wrapperState={initialValue:He(d)}}function xe(t,s){var d=He(s.value),g=He(s.defaultValue);d!=null&&(d=""+d,d!==t.value&&(t.value=d),s.defaultValue==null&&t.defaultValue!==d&&(t.defaultValue=d)),g!=null&&(t.defaultValue=""+g)}function Fe(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function $e(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ct(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?$e(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ve,At=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,d,g,E){MSApp.execUnsafeLocalFunction(function(){return t(s,d,g,E)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(Ve=Ve||document.createElement("div"),Ve.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Ve.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function Wt(t,s){if(s){var d=t.firstChild;if(d&&d===t.lastChild&&d.nodeType===3){d.nodeValue=s;return}}t.textContent=s}var Ht={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gt=["Webkit","ms","Moz","O"];Object.keys(Ht).forEach(function(t){Gt.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Ht[s]=Ht[t]})});function Be(t,s,d){return s==null||typeof s=="boolean"||s===""?"":d||typeof s!="number"||s===0||Ht.hasOwnProperty(t)&&Ht[t]?(""+s).trim():s+"px"}function he(t,s){t=t.style;for(var d in s)if(s.hasOwnProperty(d)){var g=d.indexOf("--")===0,E=Be(d,s[d],g);d==="float"&&(d="cssFloat"),g?t.setProperty(d,E):t[d]=E}}var gt=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ut(t,s){if(s){if(gt[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(a(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(a(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(a(61))}if(s.style!=null&&typeof s.style!="object")throw Error(a(62))}}function Mt(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mn=null;function Dr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Un=null,pt=null,Ln=null;function bs(t){if(t=la(t)){if(typeof Un!="function")throw Error(a(280));var s=t.stateNode;s&&(s=pl(s),Un(t.stateNode,t.type,s))}}function Ui(t){pt?Ln?Ln.push(t):Ln=[t]:pt=t}function qn(){if(pt){var t=pt,s=Ln;if(Ln=pt=null,bs(t),s)for(t=0;t<s.length;t++)bs(s[t])}}function Wi(t,s){return t(s)}function on(){}var Mr=!1;function si(t,s,d){if(Mr)return t(s,d);Mr=!0;try{return Wi(t,s,d)}finally{Mr=!1,(pt!==null||Ln!==null)&&(on(),qn())}}function An(t,s){var d=t.stateNode;if(d===null)return null;var g=pl(d);if(g===null)return null;d=g[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(t=t.type,g=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!g;break e;default:t=!1}if(t)return null;if(d&&typeof d!="function")throw Error(a(231,s,typeof d));return d}var Hi=!1;if(A)try{var lr={};Object.defineProperty(lr,"passive",{get:function(){Hi=!0}}),window.addEventListener("test",lr,lr),window.removeEventListener("test",lr,lr)}catch{Hi=!1}function oi(t,s,d,g,E,T,O,H,X){var de=Array.prototype.slice.call(arguments,3);try{s.apply(d,de)}catch(Ee){this.onError(Ee)}}var fn=!1,cr=null,In=!1,Ue=null,ai={onError:function(t){fn=!0,cr=t}};function Gi(t,s,d,g,E,T,O,H,X){fn=!1,cr=null,oi.apply(ai,arguments)}function Bn(t,s,d,g,E,T,O,H,X){if(Gi.apply(this,arguments),fn){if(fn){var de=cr;fn=!1,cr=null}else throw Error(a(198));In||(In=!0,Ue=de)}}function Qn(t){var s=t,d=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(d=s.return),t=s.return;while(t)}return s.tag===3?d:null}function Kr(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function Ci(t){if(Qn(t)!==t)throw Error(a(188))}function Jn(t){var s=t.alternate;if(!s){if(s=Qn(t),s===null)throw Error(a(188));return s!==t?null:t}for(var d=t,g=s;;){var E=d.return;if(E===null)break;var T=E.alternate;if(T===null){if(g=E.return,g!==null){d=g;continue}break}if(E.child===T.child){for(T=E.child;T;){if(T===d)return Ci(E),t;if(T===g)return Ci(E),s;T=T.sibling}throw Error(a(188))}if(d.return!==g.return)d=E,g=T;else{for(var O=!1,H=E.child;H;){if(H===d){O=!0,d=E,g=T;break}if(H===g){O=!0,g=E,d=T;break}H=H.sibling}if(!O){for(H=T.child;H;){if(H===d){O=!0,d=T,g=E;break}if(H===g){O=!0,g=T,d=E;break}H=H.sibling}if(!O)throw Error(a(189))}}if(d.alternate!==g)throw Error(a(190))}if(d.tag!==3)throw Error(a(188));return d.stateNode.current===d?t:s}function We(t){return t=Jn(t),t!==null?Et(t):null}function Et(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=Et(t);if(s!==null)return s;t=t.sibling}return null}var it=o.unstable_scheduleCallback,It=o.unstable_cancelCallback,je=o.unstable_shouldYield,Wn=o.unstable_requestPaint,Vt=o.unstable_now,As=o.unstable_getCurrentPriorityLevel,ye=o.unstable_ImmediatePriority,mr=o.unstable_UserBlockingPriority,Bt=o.unstable_NormalPriority,Ei=o.unstable_LowPriority,Xi=o.unstable_IdlePriority,Rt=null,St=null;function Ot(t){if(St&&typeof St.onCommitFiberRoot=="function")try{St.onCommitFiberRoot(Rt,t,void 0,(t.current.flags&128)===128)}catch{}}var ur=Math.clz32?Math.clz32:wn,Wo=Math.log,Ho=Math.LN2;function wn(t){return t>>>=0,t===0?32:31-(Wo(t)/Ho|0)|0}var Sr=64,to=4194304;function $t(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Tr(t,s){var d=t.pendingLanes;if(d===0)return 0;var g=0,E=t.suspendedLanes,T=t.pingedLanes,O=d&268435455;if(O!==0){var H=O&~E;H!==0?g=$t(H):(T&=O,T!==0&&(g=$t(T)))}else O=d&~E,O!==0?g=$t(O):T!==0&&(g=$t(T));if(g===0)return 0;if(s!==0&&s!==g&&!(s&E)&&(E=g&-g,T=s&-s,E>=T||E===16&&(T&4194240)!==0))return s;if(g&4&&(g|=d&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=g;0<s;)d=31-ur(s),E=1<<d,g|=t[d],s&=~E;return g}function Dc(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yi(t,s){for(var d=t.suspendedLanes,g=t.pingedLanes,E=t.expirationTimes,T=t.pendingLanes;0<T;){var O=31-ur(T),H=1<<O,X=E[O];X===-1?(!(H&d)||H&g)&&(E[O]=Dc(H,s)):X<=s&&(t.expiredLanes|=H),T&=~H}}function Xt(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Nn(){var t=Sr;return Sr<<=1,!(Sr&4194240)&&(Sr=64),t}function re(t){for(var s=[],d=0;31>d;d++)s.push(t);return s}function F(t,s,d){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-ur(s),t[s]=d}function tt(t,s){var d=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var g=t.eventTimes;for(t=t.expirationTimes;0<d;){var E=31-ur(d),T=1<<E;s[E]=0,g[E]=-1,t[E]=-1,d&=~T}}function hn(t,s){var d=t.entangledLanes|=s;for(t=t.entanglements;d;){var g=31-ur(d),E=1<<g;E&s|t[g]&s&&(t[g]|=s),d&=~E}}var Tt=0;function Qa(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var no,er,rt,Zt,Go,Xo=!1,Ki=[],Ir=null,Lr=null,li=null,nn=new Map,$r=new Map,Hn=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ja(t,s){switch(t){case"focusin":case"focusout":Ir=null;break;case"dragenter":case"dragleave":Lr=null;break;case"mouseover":case"mouseout":li=null;break;case"pointerover":case"pointerout":nn.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":$r.delete(s.pointerId)}}function wt(t,s,d,g,E,T){return t===null||t.nativeEvent!==T?(t={blockedOn:s,domEventName:d,eventSystemFlags:g,nativeEvent:T,targetContainers:[E]},s!==null&&(s=la(s),s!==null&&er(s)),t):(t.eventSystemFlags|=g,s=t.targetContainers,E!==null&&s.indexOf(E)===-1&&s.push(E),t)}function _n(t,s,d,g,E){switch(s){case"focusin":return Ir=wt(Ir,t,s,d,g,E),!0;case"dragenter":return Lr=wt(Lr,t,s,d,g,E),!0;case"mouseover":return li=wt(li,t,s,d,g,E),!0;case"pointerover":var T=E.pointerId;return nn.set(T,wt(nn.get(T)||null,t,s,d,g,E)),!0;case"gotpointercapture":return T=E.pointerId,$r.set(T,wt($r.get(T)||null,t,s,d,g,E)),!0}return!1}function el(t){var s=Ds(t.target);if(s!==null){var d=Qn(s);if(d!==null){if(s=d.tag,s===13){if(s=Kr(d),s!==null){t.blockedOn=s,Go(t.priority,function(){rt(d)});return}}else if(s===3&&d.stateNode.current.memoizedState.isDehydrated){t.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $i(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var d=ro(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(d===null){d=t.nativeEvent;var g=new d.constructor(d.type,d);Mn=g,d.target.dispatchEvent(g),Mn=null}else return s=la(d),s!==null&&er(s),t.blockedOn=d,!1;s.shift()}return!0}function Yo(t,s,d){$i(t)&&d.delete(s)}function bi(){Xo=!1,Ir!==null&&$i(Ir)&&(Ir=null),Lr!==null&&$i(Lr)&&(Lr=null),li!==null&&$i(li)&&(li=null),nn.forEach(Yo),$r.forEach(Yo)}function Ss(t,s){t.blockedOn===s&&(t.blockedOn=null,Xo||(Xo=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,bi)))}function Zr(t){function s(E){return Ss(E,t)}if(0<Ki.length){Ss(Ki[0],t);for(var d=1;d<Ki.length;d++){var g=Ki[d];g.blockedOn===t&&(g.blockedOn=null)}}for(Ir!==null&&Ss(Ir,t),Lr!==null&&Ss(Lr,t),li!==null&&Ss(li,t),nn.forEach(s),$r.forEach(s),d=0;d<Hn.length;d++)g=Hn[d],g.blockedOn===t&&(g.blockedOn=null);for(;0<Hn.length&&(d=Hn[0],d.blockedOn===null);)el(d),d.blockedOn===null&&Hn.shift()}var Br=J.ReactCurrentBatchConfig,ci=!0;function tl(t,s,d,g){var E=Tt,T=Br.transition;Br.transition=null;try{Tt=1,Ai(t,s,d,g)}finally{Tt=E,Br.transition=T}}function Ts(t,s,d,g){var E=Tt,T=Br.transition;Br.transition=null;try{Tt=4,Ai(t,s,d,g)}finally{Tt=E,Br.transition=T}}function Ai(t,s,d,g){if(ci){var E=ro(t,s,d,g);if(E===null)Hc(t,s,g,Rn,d),Ja(t,g);else if(_n(E,t,s,d,g))g.stopPropagation();else if(Ja(t,g),s&4&&-1<dt.indexOf(t)){for(;E!==null;){var T=la(E);if(T!==null&&no(T),T=ro(t,s,d,g),T===null&&Hc(t,s,g,Rn,d),T===E)break;E=T}E!==null&&g.stopPropagation()}else Hc(t,s,g,null,d)}}var Rn=null;function ro(t,s,d,g){if(Rn=null,t=Dr(g),t=Ds(t),t!==null)if(s=Qn(t),s===null)t=null;else if(d=s.tag,d===13){if(t=Kr(s),t!==null)return t;t=null}else if(d===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return Rn=t,null}function Ko(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(As()){case ye:return 1;case mr:return 4;case Bt:case Ei:return 16;case Xi:return 536870912;default:return 16}default:return 16}}var qr=null,$o=null,io=null;function nl(){if(io)return io;var t,s=$o,d=s.length,g,E="value"in qr?qr.value:qr.textContent,T=E.length;for(t=0;t<d&&s[t]===E[t];t++);var O=d-t;for(g=1;g<=O&&s[d-g]===E[T-g];g++);return io=E.slice(t,1<g?1-g:void 0)}function jt(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Is(){return!0}function Ns(){return!1}function pn(t){function s(d,g,E,T,O){this._reactName=d,this._targetInst=E,this.type=g,this.nativeEvent=T,this.target=O,this.currentTarget=null;for(var H in t)t.hasOwnProperty(H)&&(d=t[H],this[H]=d?d(T):T[H]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Is:Ns,this.isPropagationStopped=Ns,this}return ae(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Is)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Is)},persist:function(){},isPersistent:Is}),s}var Zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ce=pn(Zi),bt=ae({},Zi,{view:0,detail:0}),kn=pn(bt),qi,so,_s,oo=ae({},bt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_s&&(_s&&t.type==="mousemove"?(qi=t.screenX-_s.screenX,so=t.screenY-_s.screenY):so=qi=0,_s=t),qi)},movementY:function(t){return"movementY"in t?t.movementY:so}}),rl=pn(oo),Zo=ae({},oo,{dataTransfer:0}),vn=pn(Zo),qo=ae({},bt,{relatedTarget:0}),qt=pn(qo),ao=ae({},Zi,{animationName:0,elapsedTime:0,pseudoElement:0}),Si=pn(ao),Yt=ae({},Zi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ot=pn(Yt),Mc=ae({},Zi,{data:0}),Kt=pn(Mc),Ti={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jr(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Lc[t])?!!s[t]:!1}function Rs(){return jr}var il=ae({},bt,{key:function(t){if(t.key){var s=Ti[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=jt(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Qi[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rs,charCode:function(t){return t.type==="keypress"?jt(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?jt(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Qo=pn(il),sl=ae({},oo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jo=pn(sl),Bc=ae({},bt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rs}),Ji=pn(Bc),ea=ae({},Zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),jc=pn(ea),ks=ae({},oo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Fc=pn(ks),ui=[9,13,27,32],es=A&&"CompositionEvent"in window,jn=null;A&&"documentMode"in document&&(jn=document.documentMode);var ol=A&&"TextEvent"in window&&!jn,Nr=A&&(!es||jn&&8<jn&&11>=jn),al=" ",lo=!1;function ll(t,s){switch(t){case"keyup":return ui.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ta(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gn=!1;function Vc(t,s){switch(t){case"compositionend":return ta(s);case"keypress":return s.which!==32?null:(lo=!0,al);case"textInput":return t=s.data,t===al&&lo?null:t;default:return null}}function na(t,s){if(Gn)return t==="compositionend"||!es&&ll(t,s)?(t=nl(),io=$o=qr=null,Gn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Nr&&s.locale!=="ko"?null:s.data;default:return null}}var Ps={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lt(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Ps[t.type]:s==="textarea"}function Os(t,s,d,g){Ui(g),s=dl(s,"onChange"),0<s.length&&(d=new ce("onChange","change",null,d,g),t.push({event:d,listeners:s}))}var k=null,e=null;function n(t){lh(t,0)}function i(t){var s=fo(t);if(me(s))return t}function l(t,s){if(t==="change")return s}var c=!1;if(A){var u;if(A){var h="oninput"in document;if(!h){var m=document.createElement("div");m.setAttribute("oninput","return;"),h=typeof m.oninput=="function"}u=h}else u=!1;c=u&&(!document.documentMode||9<document.documentMode)}function C(){k&&(k.detachEvent("onpropertychange",N),e=k=null)}function N(t){if(t.propertyName==="value"&&i(e)){var s=[];Os(s,e,t,Dr(t)),si(n,s)}}function P(t,s,d){t==="focusin"?(C(),k=s,e=d,k.attachEvent("onpropertychange",N)):t==="focusout"&&C()}function M(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return i(e)}function U(t,s){if(t==="click")return i(s)}function G(t,s){if(t==="input"||t==="change")return i(s)}function K(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var ee=typeof Object.is=="function"?Object.is:K;function le(t,s){if(ee(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var d=Object.keys(t),g=Object.keys(s);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var E=d[g];if(!v.call(s,E)||!ee(t[E],s[E]))return!1}return!0}function Ne(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _e(t,s){var d=Ne(t);t=0;for(var g;d;){if(d.nodeType===3){if(g=t+d.textContent.length,t<=s&&g>=s)return{node:d,offset:s-t};t=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Ne(d)}}function Ce(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Ce(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function _t(){for(var t=window,s=we();s instanceof t.HTMLIFrameElement;){try{var d=typeof s.contentWindow.location.href=="string"}catch{d=!1}if(d)t=s.contentWindow;else break;s=we(t.document)}return s}function vt(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function tr(t){var s=_t(),d=t.focusedElem,g=t.selectionRange;if(s!==d&&d&&d.ownerDocument&&Ce(d.ownerDocument.documentElement,d)){if(g!==null&&vt(d)){if(s=g.start,t=g.end,t===void 0&&(t=s),"selectionStart"in d)d.selectionStart=s,d.selectionEnd=Math.min(t,d.value.length);else if(t=(s=d.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var E=d.textContent.length,T=Math.min(g.start,E);g=g.end===void 0?T:Math.min(g.end,E),!t.extend&&T>g&&(E=g,g=T,T=E),E=_e(d,T);var O=_e(d,g);E&&O&&(t.rangeCount!==1||t.anchorNode!==E.node||t.anchorOffset!==E.offset||t.focusNode!==O.node||t.focusOffset!==O.offset)&&(s=s.createRange(),s.setStart(E.node,E.offset),t.removeAllRanges(),T>g?(t.addRange(s),t.extend(O.node,O.offset)):(s.setEnd(O.node,O.offset),t.addRange(s)))}}for(s=[],t=d;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<s.length;d++)t=s[d],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _r=A&&"documentMode"in document&&11>=document.documentMode,Cn=null,Ut=null,an=null,Xn=!1;function Ii(t,s,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Xn||Cn==null||Cn!==we(g)||(g=Cn,"selectionStart"in g&&vt(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),an&&le(an,g)||(an=g,g=dl(Ut,"onSelect"),0<g.length&&(s=new ce("onSelect","select",null,s,d),t.push({event:s,listeners:g}),s.target=Cn)))}function Qr(t,s){var d={};return d[t.toLowerCase()]=s.toLowerCase(),d["Webkit"+t]="webkit"+s,d["Moz"+t]="moz"+s,d}var ts={animationend:Qr("Animation","AnimationEnd"),animationiteration:Qr("Animation","AnimationIteration"),animationstart:Qr("Animation","AnimationStart"),transitionend:Qr("Transition","TransitionEnd")},ra={},eh={};A&&(eh=document.createElement("div").style,"AnimationEvent"in window||(delete ts.animationend.animation,delete ts.animationiteration.animation,delete ts.animationstart.animation),"TransitionEvent"in window||delete ts.transitionend.transition);function cl(t){if(ra[t])return ra[t];if(!ts[t])return t;var s=ts[t],d;for(d in s)if(s.hasOwnProperty(d)&&d in eh)return ra[t]=s[d];return t}var th=cl("animationend"),nh=cl("animationiteration"),rh=cl("animationstart"),ih=cl("transitionend"),sh=new Map,oh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ns(t,s){sh.set(t,s),x(s,[t])}for(var zc=0;zc<oh.length;zc++){var Uc=oh[zc],tx=Uc.toLowerCase(),nx=Uc[0].toUpperCase()+Uc.slice(1);ns(tx,"on"+nx)}ns(th,"onAnimationEnd"),ns(nh,"onAnimationIteration"),ns(rh,"onAnimationStart"),ns("dblclick","onDoubleClick"),ns("focusin","onFocus"),ns("focusout","onBlur"),ns(ih,"onTransitionEnd"),y("onMouseEnter",["mouseout","mouseover"]),y("onMouseLeave",["mouseout","mouseover"]),y("onPointerEnter",["pointerout","pointerover"]),y("onPointerLeave",["pointerout","pointerover"]),x("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),x("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),x("onBeforeInput",["compositionend","keypress","textInput","paste"]),x("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rx=new Set("cancel close invalid load scroll toggle".split(" ").concat(ia));function ah(t,s,d){var g=t.type||"unknown-event";t.currentTarget=d,Bn(g,s,void 0,t),t.currentTarget=null}function lh(t,s){s=(s&4)!==0;for(var d=0;d<t.length;d++){var g=t[d],E=g.event;g=g.listeners;e:{var T=void 0;if(s)for(var O=g.length-1;0<=O;O--){var H=g[O],X=H.instance,de=H.currentTarget;if(H=H.listener,X!==T&&E.isPropagationStopped())break e;ah(E,H,de),T=X}else for(O=0;O<g.length;O++){if(H=g[O],X=H.instance,de=H.currentTarget,H=H.listener,X!==T&&E.isPropagationStopped())break e;ah(E,H,de),T=X}}}if(In)throw t=Ue,In=!1,Ue=null,t}function Jt(t,s){var d=s[Zc];d===void 0&&(d=s[Zc]=new Set);var g=t+"__bubble";d.has(g)||(ch(s,t,2,!1),d.add(g))}function Wc(t,s,d){var g=0;s&&(g|=4),ch(d,t,g,s)}var ul="_reactListening"+Math.random().toString(36).slice(2);function sa(t){if(!t[ul]){t[ul]=!0,f.forEach(function(d){d!=="selectionchange"&&(rx.has(d)||Wc(d,!1,t),Wc(d,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[ul]||(s[ul]=!0,Wc("selectionchange",!1,s))}}function ch(t,s,d,g){switch(Ko(s)){case 1:var E=tl;break;case 4:E=Ts;break;default:E=Ai}d=E.bind(null,s,d,t),E=void 0,!Hi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(E=!0),g?E!==void 0?t.addEventListener(s,d,{capture:!0,passive:E}):t.addEventListener(s,d,!0):E!==void 0?t.addEventListener(s,d,{passive:E}):t.addEventListener(s,d,!1)}function Hc(t,s,d,g,E){var T=g;if(!(s&1)&&!(s&2)&&g!==null)e:for(;;){if(g===null)return;var O=g.tag;if(O===3||O===4){var H=g.stateNode.containerInfo;if(H===E||H.nodeType===8&&H.parentNode===E)break;if(O===4)for(O=g.return;O!==null;){var X=O.tag;if((X===3||X===4)&&(X=O.stateNode.containerInfo,X===E||X.nodeType===8&&X.parentNode===E))return;O=O.return}for(;H!==null;){if(O=Ds(H),O===null)return;if(X=O.tag,X===5||X===6){g=T=O;continue e}H=H.parentNode}}g=g.return}si(function(){var de=T,Ee=Dr(d),Te=[];e:{var ve=sh.get(t);if(ve!==void 0){var Xe=ce,Ze=t;switch(t){case"keypress":if(jt(d)===0)break e;case"keydown":case"keyup":Xe=Qo;break;case"focusin":Ze="focus",Xe=qt;break;case"focusout":Ze="blur",Xe=qt;break;case"beforeblur":case"afterblur":Xe=qt;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Xe=rl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Xe=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Xe=Ji;break;case th:case nh:case rh:Xe=Si;break;case ih:Xe=jc;break;case"scroll":Xe=kn;break;case"wheel":Xe=Fc;break;case"copy":case"cut":case"paste":Xe=ot;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Xe=Jo}var Qe=(s&4)!==0,En=!Qe&&t==="scroll",ie=Qe?ve!==null?ve+"Capture":null:ve;Qe=[];for(var Z=de,se;Z!==null;){se=Z;var Pe=se.stateNode;if(se.tag===5&&Pe!==null&&(se=Pe,ie!==null&&(Pe=An(Z,ie),Pe!=null&&Qe.push(oa(Z,Pe,se)))),En)break;Z=Z.return}0<Qe.length&&(ve=new Xe(ve,Ze,null,d,Ee),Te.push({event:ve,listeners:Qe}))}}if(!(s&7)){e:{if(ve=t==="mouseover"||t==="pointerover",Xe=t==="mouseout"||t==="pointerout",ve&&d!==Mn&&(Ze=d.relatedTarget||d.fromElement)&&(Ds(Ze)||Ze[Ni]))break e;if((Xe||ve)&&(ve=Ee.window===Ee?Ee:(ve=Ee.ownerDocument)?ve.defaultView||ve.parentWindow:window,Xe?(Ze=d.relatedTarget||d.toElement,Xe=de,Ze=Ze?Ds(Ze):null,Ze!==null&&(En=Qn(Ze),Ze!==En||Ze.tag!==5&&Ze.tag!==6)&&(Ze=null)):(Xe=null,Ze=de),Xe!==Ze)){if(Qe=rl,Pe="onMouseLeave",ie="onMouseEnter",Z="mouse",(t==="pointerout"||t==="pointerover")&&(Qe=Jo,Pe="onPointerLeave",ie="onPointerEnter",Z="pointer"),En=Xe==null?ve:fo(Xe),se=Ze==null?ve:fo(Ze),ve=new Qe(Pe,Z+"leave",Xe,d,Ee),ve.target=En,ve.relatedTarget=se,Pe=null,Ds(Ee)===de&&(Qe=new Qe(ie,Z+"enter",Ze,d,Ee),Qe.target=se,Qe.relatedTarget=En,Pe=Qe),En=Pe,Xe&&Ze)t:{for(Qe=Xe,ie=Ze,Z=0,se=Qe;se;se=co(se))Z++;for(se=0,Pe=ie;Pe;Pe=co(Pe))se++;for(;0<Z-se;)Qe=co(Qe),Z--;for(;0<se-Z;)ie=co(ie),se--;for(;Z--;){if(Qe===ie||ie!==null&&Qe===ie.alternate)break t;Qe=co(Qe),ie=co(ie)}Qe=null}else Qe=null;Xe!==null&&uh(Te,ve,Xe,Qe,!1),Ze!==null&&En!==null&&uh(Te,En,Ze,Qe,!0)}}e:{if(ve=de?fo(de):window,Xe=ve.nodeName&&ve.nodeName.toLowerCase(),Xe==="select"||Xe==="input"&&ve.type==="file")var et=l;else if(Lt(ve))if(c)et=G;else{et=M;var at=P}else(Xe=ve.nodeName)&&Xe.toLowerCase()==="input"&&(ve.type==="checkbox"||ve.type==="radio")&&(et=U);if(et&&(et=et(t,de))){Os(Te,et,d,Ee);break e}at&&at(t,ve,de),t==="focusout"&&(at=ve._wrapperState)&&at.controlled&&ve.type==="number"&&Je(ve,"number",ve.value)}switch(at=de?fo(de):window,t){case"focusin":(Lt(at)||at.contentEditable==="true")&&(Cn=at,Ut=de,an=null);break;case"focusout":an=Ut=Cn=null;break;case"mousedown":Xn=!0;break;case"contextmenu":case"mouseup":case"dragend":Xn=!1,Ii(Te,d,Ee);break;case"selectionchange":if(_r)break;case"keydown":case"keyup":Ii(Te,d,Ee)}var lt;if(es)e:{switch(t){case"compositionstart":var yt="onCompositionStart";break e;case"compositionend":yt="onCompositionEnd";break e;case"compositionupdate":yt="onCompositionUpdate";break e}yt=void 0}else Gn?ll(t,d)&&(yt="onCompositionEnd"):t==="keydown"&&d.keyCode===229&&(yt="onCompositionStart");yt&&(Nr&&d.locale!=="ko"&&(Gn||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&Gn&&(lt=nl()):(qr=Ee,$o="value"in qr?qr.value:qr.textContent,Gn=!0)),at=dl(de,yt),0<at.length&&(yt=new Kt(yt,t,null,d,Ee),Te.push({event:yt,listeners:at}),lt?yt.data=lt:(lt=ta(d),lt!==null&&(yt.data=lt)))),(lt=ol?Vc(t,d):na(t,d))&&(de=dl(de,"onBeforeInput"),0<de.length&&(Ee=new Kt("onBeforeInput","beforeinput",null,d,Ee),Te.push({event:Ee,listeners:de}),Ee.data=lt))}lh(Te,s)})}function oa(t,s,d){return{instance:t,listener:s,currentTarget:d}}function dl(t,s){for(var d=s+"Capture",g=[];t!==null;){var E=t,T=E.stateNode;E.tag===5&&T!==null&&(E=T,T=An(t,d),T!=null&&g.unshift(oa(t,T,E)),T=An(t,s),T!=null&&g.push(oa(t,T,E))),t=t.return}return g}function co(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function uh(t,s,d,g,E){for(var T=s._reactName,O=[];d!==null&&d!==g;){var H=d,X=H.alternate,de=H.stateNode;if(X!==null&&X===g)break;H.tag===5&&de!==null&&(H=de,E?(X=An(d,T),X!=null&&O.unshift(oa(d,X,H))):E||(X=An(d,T),X!=null&&O.push(oa(d,X,H)))),d=d.return}O.length!==0&&t.push({event:s,listeners:O})}var ix=/\r\n?/g,sx=/\u0000|\uFFFD/g;function dh(t){return(typeof t=="string"?t:""+t).replace(ix,`
`).replace(sx,"")}function fl(t,s,d){if(s=dh(s),dh(t)!==s&&d)throw Error(a(425))}function hl(){}var Gc=null,Xc=null;function Yc(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Kc=typeof setTimeout=="function"?setTimeout:void 0,ox=typeof clearTimeout=="function"?clearTimeout:void 0,fh=typeof Promise=="function"?Promise:void 0,ax=typeof queueMicrotask=="function"?queueMicrotask:typeof fh<"u"?function(t){return fh.resolve(null).then(t).catch(lx)}:Kc;function lx(t){setTimeout(function(){throw t})}function $c(t,s){var d=s,g=0;do{var E=d.nextSibling;if(t.removeChild(d),E&&E.nodeType===8)if(d=E.data,d==="/$"){if(g===0){t.removeChild(E),Zr(s);return}g--}else d!=="$"&&d!=="$?"&&d!=="$!"||g++;d=E}while(d);Zr(s)}function rs(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function hh(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var d=t.data;if(d==="$"||d==="$!"||d==="$?"){if(s===0)return t;s--}else d==="/$"&&s++}t=t.previousSibling}return null}var uo=Math.random().toString(36).slice(2),di="__reactFiber$"+uo,aa="__reactProps$"+uo,Ni="__reactContainer$"+uo,Zc="__reactEvents$"+uo,cx="__reactListeners$"+uo,ux="__reactHandles$"+uo;function Ds(t){var s=t[di];if(s)return s;for(var d=t.parentNode;d;){if(s=d[Ni]||d[di]){if(d=s.alternate,s.child!==null||d!==null&&d.child!==null)for(t=hh(t);t!==null;){if(d=t[di])return d;t=hh(t)}return s}t=d,d=t.parentNode}return null}function la(t){return t=t[di]||t[Ni],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(a(33))}function pl(t){return t[aa]||null}var qc=[],ho=-1;function is(t){return{current:t}}function en(t){0>ho||(t.current=qc[ho],qc[ho]=null,ho--)}function Qt(t,s){ho++,qc[ho]=t.current,t.current=s}var ss={},nr=is(ss),xr=is(!1),Ms=ss;function po(t,s){var d=t.type.contextTypes;if(!d)return ss;var g=t.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===s)return g.__reactInternalMemoizedMaskedChildContext;var E={},T;for(T in d)E[T]=s[T];return g&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=E),E}function yr(t){return t=t.childContextTypes,t!=null}function gl(){en(xr),en(nr)}function ph(t,s,d){if(nr.current!==ss)throw Error(a(168));Qt(nr,s),Qt(xr,d)}function gh(t,s,d){var g=t.stateNode;if(s=s.childContextTypes,typeof g.getChildContext!="function")return d;g=g.getChildContext();for(var E in g)if(!(E in s))throw Error(a(108,Ye(t)||"Unknown",E));return ae({},d,g)}function ml(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ss,Ms=nr.current,Qt(nr,t),Qt(xr,xr.current),!0}function mh(t,s,d){var g=t.stateNode;if(!g)throw Error(a(169));d?(t=gh(t,s,Ms),g.__reactInternalMemoizedMergedChildContext=t,en(xr),en(nr),Qt(nr,t)):en(xr),Qt(xr,d)}var _i=null,xl=!1,Qc=!1;function xh(t){_i===null?_i=[t]:_i.push(t)}function dx(t){xl=!0,xh(t)}function os(){if(!Qc&&_i!==null){Qc=!0;var t=0,s=Tt;try{var d=_i;for(Tt=1;t<d.length;t++){var g=d[t];do g=g(!0);while(g!==null)}_i=null,xl=!1}catch(E){throw _i!==null&&(_i=_i.slice(t+1)),it(ye,os),E}finally{Tt=s,Qc=!1}}return null}var go=[],mo=0,yl=null,wl=0,Fr=[],Vr=0,Ls=null,Ri=1,ki="";function Bs(t,s){go[mo++]=wl,go[mo++]=yl,yl=t,wl=s}function yh(t,s,d){Fr[Vr++]=Ri,Fr[Vr++]=ki,Fr[Vr++]=Ls,Ls=t;var g=Ri;t=ki;var E=32-ur(g)-1;g&=~(1<<E),d+=1;var T=32-ur(s)+E;if(30<T){var O=E-E%5;T=(g&(1<<O)-1).toString(32),g>>=O,E-=O,Ri=1<<32-ur(s)+E|d<<E|g,ki=T+t}else Ri=1<<T|d<<E|g,ki=t}function Jc(t){t.return!==null&&(Bs(t,1),yh(t,1,0))}function eu(t){for(;t===yl;)yl=go[--mo],go[mo]=null,wl=go[--mo],go[mo]=null;for(;t===Ls;)Ls=Fr[--Vr],Fr[Vr]=null,ki=Fr[--Vr],Fr[Vr]=null,Ri=Fr[--Vr],Fr[Vr]=null}var Rr=null,kr=null,rn=!1,Jr=null;function wh(t,s){var d=Hr(5,null,null,0);d.elementType="DELETED",d.stateNode=s,d.return=t,s=t.deletions,s===null?(t.deletions=[d],t.flags|=16):s.push(d)}function vh(t,s){switch(t.tag){case 5:var d=t.type;return s=s.nodeType!==1||d.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,Rr=t,kr=rs(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,Rr=t,kr=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(d=Ls!==null?{id:Ri,overflow:ki}:null,t.memoizedState={dehydrated:s,treeContext:d,retryLane:1073741824},d=Hr(18,null,null,0),d.stateNode=s,d.return=t,t.child=d,Rr=t,kr=null,!0):!1;default:return!1}}function tu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function nu(t){if(rn){var s=kr;if(s){var d=s;if(!vh(t,s)){if(tu(t))throw Error(a(418));s=rs(d.nextSibling);var g=Rr;s&&vh(t,s)?wh(g,d):(t.flags=t.flags&-4097|2,rn=!1,Rr=t)}}else{if(tu(t))throw Error(a(418));t.flags=t.flags&-4097|2,rn=!1,Rr=t}}}function Ch(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Rr=t}function vl(t){if(t!==Rr)return!1;if(!rn)return Ch(t),rn=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!Yc(t.type,t.memoizedProps)),s&&(s=kr)){if(tu(t))throw Eh(),Error(a(418));for(;s;)wh(t,s),s=rs(s.nextSibling)}if(Ch(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var d=t.data;if(d==="/$"){if(s===0){kr=rs(t.nextSibling);break e}s--}else d!=="$"&&d!=="$!"&&d!=="$?"||s++}t=t.nextSibling}kr=null}}else kr=Rr?rs(t.stateNode.nextSibling):null;return!0}function Eh(){for(var t=kr;t;)t=rs(t.nextSibling)}function xo(){kr=Rr=null,rn=!1}function ru(t){Jr===null?Jr=[t]:Jr.push(t)}var fx=J.ReactCurrentBatchConfig;function ca(t,s,d){if(t=d.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(a(309));var g=d.stateNode}if(!g)throw Error(a(147,t));var E=g,T=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===T?s.ref:(s=function(O){var H=E.refs;O===null?delete H[T]:H[T]=O},s._stringRef=T,s)}if(typeof t!="string")throw Error(a(284));if(!d._owner)throw Error(a(290,t))}return t}function Cl(t,s){throw t=Object.prototype.toString.call(s),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function bh(t){var s=t._init;return s(t._payload)}function Ah(t){function s(ie,Z){if(t){var se=ie.deletions;se===null?(ie.deletions=[Z],ie.flags|=16):se.push(Z)}}function d(ie,Z){if(!t)return null;for(;Z!==null;)s(ie,Z),Z=Z.sibling;return null}function g(ie,Z){for(ie=new Map;Z!==null;)Z.key!==null?ie.set(Z.key,Z):ie.set(Z.index,Z),Z=Z.sibling;return ie}function E(ie,Z){return ie=ps(ie,Z),ie.index=0,ie.sibling=null,ie}function T(ie,Z,se){return ie.index=se,t?(se=ie.alternate,se!==null?(se=se.index,se<Z?(ie.flags|=2,Z):se):(ie.flags|=2,Z)):(ie.flags|=1048576,Z)}function O(ie){return t&&ie.alternate===null&&(ie.flags|=2),ie}function H(ie,Z,se,Pe){return Z===null||Z.tag!==6?(Z=Ku(se,ie.mode,Pe),Z.return=ie,Z):(Z=E(Z,se),Z.return=ie,Z)}function X(ie,Z,se,Pe){var et=se.type;return et===q?Ee(ie,Z,se.props.children,Pe,se.key):Z!==null&&(Z.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===Le&&bh(et)===Z.type)?(Pe=E(Z,se.props),Pe.ref=ca(ie,Z,se),Pe.return=ie,Pe):(Pe=Gl(se.type,se.key,se.props,null,ie.mode,Pe),Pe.ref=ca(ie,Z,se),Pe.return=ie,Pe)}function de(ie,Z,se,Pe){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==se.containerInfo||Z.stateNode.implementation!==se.implementation?(Z=$u(se,ie.mode,Pe),Z.return=ie,Z):(Z=E(Z,se.children||[]),Z.return=ie,Z)}function Ee(ie,Z,se,Pe,et){return Z===null||Z.tag!==7?(Z=Gs(se,ie.mode,Pe,et),Z.return=ie,Z):(Z=E(Z,se),Z.return=ie,Z)}function Te(ie,Z,se){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Z=Ku(""+Z,ie.mode,se),Z.return=ie,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case ne:return se=Gl(Z.type,Z.key,Z.props,null,ie.mode,se),se.ref=ca(ie,null,Z),se.return=ie,se;case oe:return Z=$u(Z,ie.mode,se),Z.return=ie,Z;case Le:var Pe=Z._init;return Te(ie,Pe(Z._payload),se)}if(Nt(Z)||Me(Z))return Z=Gs(Z,ie.mode,se,null),Z.return=ie,Z;Cl(ie,Z)}return null}function ve(ie,Z,se,Pe){var et=Z!==null?Z.key:null;if(typeof se=="string"&&se!==""||typeof se=="number")return et!==null?null:H(ie,Z,""+se,Pe);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case ne:return se.key===et?X(ie,Z,se,Pe):null;case oe:return se.key===et?de(ie,Z,se,Pe):null;case Le:return et=se._init,ve(ie,Z,et(se._payload),Pe)}if(Nt(se)||Me(se))return et!==null?null:Ee(ie,Z,se,Pe,null);Cl(ie,se)}return null}function Xe(ie,Z,se,Pe,et){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number")return ie=ie.get(se)||null,H(Z,ie,""+Pe,et);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case ne:return ie=ie.get(Pe.key===null?se:Pe.key)||null,X(Z,ie,Pe,et);case oe:return ie=ie.get(Pe.key===null?se:Pe.key)||null,de(Z,ie,Pe,et);case Le:var at=Pe._init;return Xe(ie,Z,se,at(Pe._payload),et)}if(Nt(Pe)||Me(Pe))return ie=ie.get(se)||null,Ee(Z,ie,Pe,et,null);Cl(Z,Pe)}return null}function Ze(ie,Z,se,Pe){for(var et=null,at=null,lt=Z,yt=Z=0,zn=null;lt!==null&&yt<se.length;yt++){lt.index>yt?(zn=lt,lt=null):zn=lt.sibling;var zt=ve(ie,lt,se[yt],Pe);if(zt===null){lt===null&&(lt=zn);break}t&&lt&&zt.alternate===null&&s(ie,lt),Z=T(zt,Z,yt),at===null?et=zt:at.sibling=zt,at=zt,lt=zn}if(yt===se.length)return d(ie,lt),rn&&Bs(ie,yt),et;if(lt===null){for(;yt<se.length;yt++)lt=Te(ie,se[yt],Pe),lt!==null&&(Z=T(lt,Z,yt),at===null?et=lt:at.sibling=lt,at=lt);return rn&&Bs(ie,yt),et}for(lt=g(ie,lt);yt<se.length;yt++)zn=Xe(lt,ie,yt,se[yt],Pe),zn!==null&&(t&&zn.alternate!==null&&lt.delete(zn.key===null?yt:zn.key),Z=T(zn,Z,yt),at===null?et=zn:at.sibling=zn,at=zn);return t&&lt.forEach(function(gs){return s(ie,gs)}),rn&&Bs(ie,yt),et}function Qe(ie,Z,se,Pe){var et=Me(se);if(typeof et!="function")throw Error(a(150));if(se=et.call(se),se==null)throw Error(a(151));for(var at=et=null,lt=Z,yt=Z=0,zn=null,zt=se.next();lt!==null&&!zt.done;yt++,zt=se.next()){lt.index>yt?(zn=lt,lt=null):zn=lt.sibling;var gs=ve(ie,lt,zt.value,Pe);if(gs===null){lt===null&&(lt=zn);break}t&&lt&&gs.alternate===null&&s(ie,lt),Z=T(gs,Z,yt),at===null?et=gs:at.sibling=gs,at=gs,lt=zn}if(zt.done)return d(ie,lt),rn&&Bs(ie,yt),et;if(lt===null){for(;!zt.done;yt++,zt=se.next())zt=Te(ie,zt.value,Pe),zt!==null&&(Z=T(zt,Z,yt),at===null?et=zt:at.sibling=zt,at=zt);return rn&&Bs(ie,yt),et}for(lt=g(ie,lt);!zt.done;yt++,zt=se.next())zt=Xe(lt,ie,yt,zt.value,Pe),zt!==null&&(t&&zt.alternate!==null&&lt.delete(zt.key===null?yt:zt.key),Z=T(zt,Z,yt),at===null?et=zt:at.sibling=zt,at=zt);return t&&lt.forEach(function(Gx){return s(ie,Gx)}),rn&&Bs(ie,yt),et}function En(ie,Z,se,Pe){if(typeof se=="object"&&se!==null&&se.type===q&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case ne:e:{for(var et=se.key,at=Z;at!==null;){if(at.key===et){if(et=se.type,et===q){if(at.tag===7){d(ie,at.sibling),Z=E(at,se.props.children),Z.return=ie,ie=Z;break e}}else if(at.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===Le&&bh(et)===at.type){d(ie,at.sibling),Z=E(at,se.props),Z.ref=ca(ie,at,se),Z.return=ie,ie=Z;break e}d(ie,at);break}else s(ie,at);at=at.sibling}se.type===q?(Z=Gs(se.props.children,ie.mode,Pe,se.key),Z.return=ie,ie=Z):(Pe=Gl(se.type,se.key,se.props,null,ie.mode,Pe),Pe.ref=ca(ie,Z,se),Pe.return=ie,ie=Pe)}return O(ie);case oe:e:{for(at=se.key;Z!==null;){if(Z.key===at)if(Z.tag===4&&Z.stateNode.containerInfo===se.containerInfo&&Z.stateNode.implementation===se.implementation){d(ie,Z.sibling),Z=E(Z,se.children||[]),Z.return=ie,ie=Z;break e}else{d(ie,Z);break}else s(ie,Z);Z=Z.sibling}Z=$u(se,ie.mode,Pe),Z.return=ie,ie=Z}return O(ie);case Le:return at=se._init,En(ie,Z,at(se._payload),Pe)}if(Nt(se))return Ze(ie,Z,se,Pe);if(Me(se))return Qe(ie,Z,se,Pe);Cl(ie,se)}return typeof se=="string"&&se!==""||typeof se=="number"?(se=""+se,Z!==null&&Z.tag===6?(d(ie,Z.sibling),Z=E(Z,se),Z.return=ie,ie=Z):(d(ie,Z),Z=Ku(se,ie.mode,Pe),Z.return=ie,ie=Z),O(ie)):d(ie,Z)}return En}var yo=Ah(!0),Sh=Ah(!1),El=is(null),bl=null,wo=null,iu=null;function su(){iu=wo=bl=null}function ou(t){var s=El.current;en(El),t._currentValue=s}function au(t,s,d){for(;t!==null;){var g=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,g!==null&&(g.childLanes|=s)):g!==null&&(g.childLanes&s)!==s&&(g.childLanes|=s),t===d)break;t=t.return}}function vo(t,s){bl=t,iu=wo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(wr=!0),t.firstContext=null)}function zr(t){var s=t._currentValue;if(iu!==t)if(t={context:t,memoizedValue:s,next:null},wo===null){if(bl===null)throw Error(a(308));wo=t,bl.dependencies={lanes:0,firstContext:t}}else wo=wo.next=t;return s}var js=null;function lu(t){js===null?js=[t]:js.push(t)}function Th(t,s,d,g){var E=s.interleaved;return E===null?(d.next=d,lu(s)):(d.next=E.next,E.next=d),s.interleaved=d,Pi(t,g)}function Pi(t,s){t.lanes|=s;var d=t.alternate;for(d!==null&&(d.lanes|=s),d=t,t=t.return;t!==null;)t.childLanes|=s,d=t.alternate,d!==null&&(d.childLanes|=s),d=t,t=t.return;return d.tag===3?d.stateNode:null}var as=!1;function cu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ih(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Oi(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function ls(t,s,d){var g=t.updateQueue;if(g===null)return null;if(g=g.shared,Ft&2){var E=g.pending;return E===null?s.next=s:(s.next=E.next,E.next=s),g.pending=s,Pi(t,d)}return E=g.interleaved,E===null?(s.next=s,lu(g)):(s.next=E.next,E.next=s),g.interleaved=s,Pi(t,d)}function Al(t,s,d){if(s=s.updateQueue,s!==null&&(s=s.shared,(d&4194240)!==0)){var g=s.lanes;g&=t.pendingLanes,d|=g,s.lanes=d,hn(t,d)}}function Nh(t,s){var d=t.updateQueue,g=t.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var E=null,T=null;if(d=d.firstBaseUpdate,d!==null){do{var O={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};T===null?E=T=O:T=T.next=O,d=d.next}while(d!==null);T===null?E=T=s:T=T.next=s}else E=T=s;d={baseState:g.baseState,firstBaseUpdate:E,lastBaseUpdate:T,shared:g.shared,effects:g.effects},t.updateQueue=d;return}t=d.lastBaseUpdate,t===null?d.firstBaseUpdate=s:t.next=s,d.lastBaseUpdate=s}function Sl(t,s,d,g){var E=t.updateQueue;as=!1;var T=E.firstBaseUpdate,O=E.lastBaseUpdate,H=E.shared.pending;if(H!==null){E.shared.pending=null;var X=H,de=X.next;X.next=null,O===null?T=de:O.next=de,O=X;var Ee=t.alternate;Ee!==null&&(Ee=Ee.updateQueue,H=Ee.lastBaseUpdate,H!==O&&(H===null?Ee.firstBaseUpdate=de:H.next=de,Ee.lastBaseUpdate=X))}if(T!==null){var Te=E.baseState;O=0,Ee=de=X=null,H=T;do{var ve=H.lane,Xe=H.eventTime;if((g&ve)===ve){Ee!==null&&(Ee=Ee.next={eventTime:Xe,lane:0,tag:H.tag,payload:H.payload,callback:H.callback,next:null});e:{var Ze=t,Qe=H;switch(ve=s,Xe=d,Qe.tag){case 1:if(Ze=Qe.payload,typeof Ze=="function"){Te=Ze.call(Xe,Te,ve);break e}Te=Ze;break e;case 3:Ze.flags=Ze.flags&-65537|128;case 0:if(Ze=Qe.payload,ve=typeof Ze=="function"?Ze.call(Xe,Te,ve):Ze,ve==null)break e;Te=ae({},Te,ve);break e;case 2:as=!0}}H.callback!==null&&H.lane!==0&&(t.flags|=64,ve=E.effects,ve===null?E.effects=[H]:ve.push(H))}else Xe={eventTime:Xe,lane:ve,tag:H.tag,payload:H.payload,callback:H.callback,next:null},Ee===null?(de=Ee=Xe,X=Te):Ee=Ee.next=Xe,O|=ve;if(H=H.next,H===null){if(H=E.shared.pending,H===null)break;ve=H,H=ve.next,ve.next=null,E.lastBaseUpdate=ve,E.shared.pending=null}}while(!0);if(Ee===null&&(X=Te),E.baseState=X,E.firstBaseUpdate=de,E.lastBaseUpdate=Ee,s=E.shared.interleaved,s!==null){E=s;do O|=E.lane,E=E.next;while(E!==s)}else T===null&&(E.shared.lanes=0);zs|=O,t.lanes=O,t.memoizedState=Te}}function _h(t,s,d){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var g=t[s],E=g.callback;if(E!==null){if(g.callback=null,g=d,typeof E!="function")throw Error(a(191,E));E.call(g)}}}var ua={},fi=is(ua),da=is(ua),fa=is(ua);function Fs(t){if(t===ua)throw Error(a(174));return t}function uu(t,s){switch(Qt(fa,s),Qt(da,t),Qt(fi,ua),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:ct(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=ct(s,t)}en(fi),Qt(fi,s)}function Co(){en(fi),en(da),en(fa)}function Rh(t){Fs(fa.current);var s=Fs(fi.current),d=ct(s,t.type);s!==d&&(Qt(da,t),Qt(fi,d))}function du(t){da.current===t&&(en(fi),en(da))}var ln=is(0);function Tl(t){for(var s=t;s!==null;){if(s.tag===13){var d=s.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var fu=[];function hu(){for(var t=0;t<fu.length;t++)fu[t]._workInProgressVersionPrimary=null;fu.length=0}var Il=J.ReactCurrentDispatcher,pu=J.ReactCurrentBatchConfig,Vs=0,cn=null,Pn=null,Fn=null,Nl=!1,ha=!1,pa=0,hx=0;function rr(){throw Error(a(321))}function gu(t,s){if(s===null)return!1;for(var d=0;d<s.length&&d<t.length;d++)if(!ee(t[d],s[d]))return!1;return!0}function mu(t,s,d,g,E,T){if(Vs=T,cn=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Il.current=t===null||t.memoizedState===null?xx:yx,t=d(g,E),ha){T=0;do{if(ha=!1,pa=0,25<=T)throw Error(a(301));T+=1,Fn=Pn=null,s.updateQueue=null,Il.current=wx,t=d(g,E)}while(ha)}if(Il.current=kl,s=Pn!==null&&Pn.next!==null,Vs=0,Fn=Pn=cn=null,Nl=!1,s)throw Error(a(300));return t}function xu(){var t=pa!==0;return pa=0,t}function hi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fn===null?cn.memoizedState=Fn=t:Fn=Fn.next=t,Fn}function Ur(){if(Pn===null){var t=cn.alternate;t=t!==null?t.memoizedState:null}else t=Pn.next;var s=Fn===null?cn.memoizedState:Fn.next;if(s!==null)Fn=s,Pn=t;else{if(t===null)throw Error(a(310));Pn=t,t={memoizedState:Pn.memoizedState,baseState:Pn.baseState,baseQueue:Pn.baseQueue,queue:Pn.queue,next:null},Fn===null?cn.memoizedState=Fn=t:Fn=Fn.next=t}return Fn}function ga(t,s){return typeof s=="function"?s(t):s}function yu(t){var s=Ur(),d=s.queue;if(d===null)throw Error(a(311));d.lastRenderedReducer=t;var g=Pn,E=g.baseQueue,T=d.pending;if(T!==null){if(E!==null){var O=E.next;E.next=T.next,T.next=O}g.baseQueue=E=T,d.pending=null}if(E!==null){T=E.next,g=g.baseState;var H=O=null,X=null,de=T;do{var Ee=de.lane;if((Vs&Ee)===Ee)X!==null&&(X=X.next={lane:0,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null}),g=de.hasEagerState?de.eagerState:t(g,de.action);else{var Te={lane:Ee,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null};X===null?(H=X=Te,O=g):X=X.next=Te,cn.lanes|=Ee,zs|=Ee}de=de.next}while(de!==null&&de!==T);X===null?O=g:X.next=H,ee(g,s.memoizedState)||(wr=!0),s.memoizedState=g,s.baseState=O,s.baseQueue=X,d.lastRenderedState=g}if(t=d.interleaved,t!==null){E=t;do T=E.lane,cn.lanes|=T,zs|=T,E=E.next;while(E!==t)}else E===null&&(d.lanes=0);return[s.memoizedState,d.dispatch]}function wu(t){var s=Ur(),d=s.queue;if(d===null)throw Error(a(311));d.lastRenderedReducer=t;var g=d.dispatch,E=d.pending,T=s.memoizedState;if(E!==null){d.pending=null;var O=E=E.next;do T=t(T,O.action),O=O.next;while(O!==E);ee(T,s.memoizedState)||(wr=!0),s.memoizedState=T,s.baseQueue===null&&(s.baseState=T),d.lastRenderedState=T}return[T,g]}function kh(){}function Ph(t,s){var d=cn,g=Ur(),E=s(),T=!ee(g.memoizedState,E);if(T&&(g.memoizedState=E,wr=!0),g=g.queue,vu(Mh.bind(null,d,g,t),[t]),g.getSnapshot!==s||T||Fn!==null&&Fn.memoizedState.tag&1){if(d.flags|=2048,ma(9,Dh.bind(null,d,g,E,s),void 0,null),Vn===null)throw Error(a(349));Vs&30||Oh(d,s,E)}return E}function Oh(t,s,d){t.flags|=16384,t={getSnapshot:s,value:d},s=cn.updateQueue,s===null?(s={lastEffect:null,stores:null},cn.updateQueue=s,s.stores=[t]):(d=s.stores,d===null?s.stores=[t]:d.push(t))}function Dh(t,s,d,g){s.value=d,s.getSnapshot=g,Lh(s)&&Bh(t)}function Mh(t,s,d){return d(function(){Lh(s)&&Bh(t)})}function Lh(t){var s=t.getSnapshot;t=t.value;try{var d=s();return!ee(t,d)}catch{return!0}}function Bh(t){var s=Pi(t,1);s!==null&&ri(s,t,1,-1)}function jh(t){var s=hi();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:t},s.queue=t,t=t.dispatch=mx.bind(null,cn,t),[s.memoizedState,t]}function ma(t,s,d,g){return t={tag:t,create:s,destroy:d,deps:g,next:null},s=cn.updateQueue,s===null?(s={lastEffect:null,stores:null},cn.updateQueue=s,s.lastEffect=t.next=t):(d=s.lastEffect,d===null?s.lastEffect=t.next=t:(g=d.next,d.next=t,t.next=g,s.lastEffect=t)),t}function Fh(){return Ur().memoizedState}function _l(t,s,d,g){var E=hi();cn.flags|=t,E.memoizedState=ma(1|s,d,void 0,g===void 0?null:g)}function Rl(t,s,d,g){var E=Ur();g=g===void 0?null:g;var T=void 0;if(Pn!==null){var O=Pn.memoizedState;if(T=O.destroy,g!==null&&gu(g,O.deps)){E.memoizedState=ma(s,d,T,g);return}}cn.flags|=t,E.memoizedState=ma(1|s,d,T,g)}function Vh(t,s){return _l(8390656,8,t,s)}function vu(t,s){return Rl(2048,8,t,s)}function zh(t,s){return Rl(4,2,t,s)}function Uh(t,s){return Rl(4,4,t,s)}function Wh(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Hh(t,s,d){return d=d!=null?d.concat([t]):null,Rl(4,4,Wh.bind(null,s,t),d)}function Cu(){}function Gh(t,s){var d=Ur();s=s===void 0?null:s;var g=d.memoizedState;return g!==null&&s!==null&&gu(s,g[1])?g[0]:(d.memoizedState=[t,s],t)}function Xh(t,s){var d=Ur();s=s===void 0?null:s;var g=d.memoizedState;return g!==null&&s!==null&&gu(s,g[1])?g[0]:(t=t(),d.memoizedState=[t,s],t)}function Yh(t,s,d){return Vs&21?(ee(d,s)||(d=Nn(),cn.lanes|=d,zs|=d,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,wr=!0),t.memoizedState=d)}function px(t,s){var d=Tt;Tt=d!==0&&4>d?d:4,t(!0);var g=pu.transition;pu.transition={};try{t(!1),s()}finally{Tt=d,pu.transition=g}}function Kh(){return Ur().memoizedState}function gx(t,s,d){var g=fs(t);if(d={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null},$h(t))Zh(s,d);else if(d=Th(t,s,d,g),d!==null){var E=fr();ri(d,t,g,E),qh(d,s,g)}}function mx(t,s,d){var g=fs(t),E={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null};if($h(t))Zh(s,E);else{var T=t.alternate;if(t.lanes===0&&(T===null||T.lanes===0)&&(T=s.lastRenderedReducer,T!==null))try{var O=s.lastRenderedState,H=T(O,d);if(E.hasEagerState=!0,E.eagerState=H,ee(H,O)){var X=s.interleaved;X===null?(E.next=E,lu(s)):(E.next=X.next,X.next=E),s.interleaved=E;return}}catch{}finally{}d=Th(t,s,E,g),d!==null&&(E=fr(),ri(d,t,g,E),qh(d,s,g))}}function $h(t){var s=t.alternate;return t===cn||s!==null&&s===cn}function Zh(t,s){ha=Nl=!0;var d=t.pending;d===null?s.next=s:(s.next=d.next,d.next=s),t.pending=s}function qh(t,s,d){if(d&4194240){var g=s.lanes;g&=t.pendingLanes,d|=g,s.lanes=d,hn(t,d)}}var kl={readContext:zr,useCallback:rr,useContext:rr,useEffect:rr,useImperativeHandle:rr,useInsertionEffect:rr,useLayoutEffect:rr,useMemo:rr,useReducer:rr,useRef:rr,useState:rr,useDebugValue:rr,useDeferredValue:rr,useTransition:rr,useMutableSource:rr,useSyncExternalStore:rr,useId:rr,unstable_isNewReconciler:!1},xx={readContext:zr,useCallback:function(t,s){return hi().memoizedState=[t,s===void 0?null:s],t},useContext:zr,useEffect:Vh,useImperativeHandle:function(t,s,d){return d=d!=null?d.concat([t]):null,_l(4194308,4,Wh.bind(null,s,t),d)},useLayoutEffect:function(t,s){return _l(4194308,4,t,s)},useInsertionEffect:function(t,s){return _l(4,2,t,s)},useMemo:function(t,s){var d=hi();return s=s===void 0?null:s,t=t(),d.memoizedState=[t,s],t},useReducer:function(t,s,d){var g=hi();return s=d!==void 0?d(s):s,g.memoizedState=g.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},g.queue=t,t=t.dispatch=gx.bind(null,cn,t),[g.memoizedState,t]},useRef:function(t){var s=hi();return t={current:t},s.memoizedState=t},useState:jh,useDebugValue:Cu,useDeferredValue:function(t){return hi().memoizedState=t},useTransition:function(){var t=jh(!1),s=t[0];return t=px.bind(null,t[1]),hi().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,d){var g=cn,E=hi();if(rn){if(d===void 0)throw Error(a(407));d=d()}else{if(d=s(),Vn===null)throw Error(a(349));Vs&30||Oh(g,s,d)}E.memoizedState=d;var T={value:d,getSnapshot:s};return E.queue=T,Vh(Mh.bind(null,g,T,t),[t]),g.flags|=2048,ma(9,Dh.bind(null,g,T,d,s),void 0,null),d},useId:function(){var t=hi(),s=Vn.identifierPrefix;if(rn){var d=ki,g=Ri;d=(g&~(1<<32-ur(g)-1)).toString(32)+d,s=":"+s+"R"+d,d=pa++,0<d&&(s+="H"+d.toString(32)),s+=":"}else d=hx++,s=":"+s+"r"+d.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},yx={readContext:zr,useCallback:Gh,useContext:zr,useEffect:vu,useImperativeHandle:Hh,useInsertionEffect:zh,useLayoutEffect:Uh,useMemo:Xh,useReducer:yu,useRef:Fh,useState:function(){return yu(ga)},useDebugValue:Cu,useDeferredValue:function(t){var s=Ur();return Yh(s,Pn.memoizedState,t)},useTransition:function(){var t=yu(ga)[0],s=Ur().memoizedState;return[t,s]},useMutableSource:kh,useSyncExternalStore:Ph,useId:Kh,unstable_isNewReconciler:!1},wx={readContext:zr,useCallback:Gh,useContext:zr,useEffect:vu,useImperativeHandle:Hh,useInsertionEffect:zh,useLayoutEffect:Uh,useMemo:Xh,useReducer:wu,useRef:Fh,useState:function(){return wu(ga)},useDebugValue:Cu,useDeferredValue:function(t){var s=Ur();return Pn===null?s.memoizedState=t:Yh(s,Pn.memoizedState,t)},useTransition:function(){var t=wu(ga)[0],s=Ur().memoizedState;return[t,s]},useMutableSource:kh,useSyncExternalStore:Ph,useId:Kh,unstable_isNewReconciler:!1};function ei(t,s){if(t&&t.defaultProps){s=ae({},s),t=t.defaultProps;for(var d in t)s[d]===void 0&&(s[d]=t[d]);return s}return s}function Eu(t,s,d,g){s=t.memoizedState,d=d(g,s),d=d==null?s:ae({},s,d),t.memoizedState=d,t.lanes===0&&(t.updateQueue.baseState=d)}var Pl={isMounted:function(t){return(t=t._reactInternals)?Qn(t)===t:!1},enqueueSetState:function(t,s,d){t=t._reactInternals;var g=fr(),E=fs(t),T=Oi(g,E);T.payload=s,d!=null&&(T.callback=d),s=ls(t,T,E),s!==null&&(ri(s,t,E,g),Al(s,t,E))},enqueueReplaceState:function(t,s,d){t=t._reactInternals;var g=fr(),E=fs(t),T=Oi(g,E);T.tag=1,T.payload=s,d!=null&&(T.callback=d),s=ls(t,T,E),s!==null&&(ri(s,t,E,g),Al(s,t,E))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var d=fr(),g=fs(t),E=Oi(d,g);E.tag=2,s!=null&&(E.callback=s),s=ls(t,E,g),s!==null&&(ri(s,t,g,d),Al(s,t,g))}};function Qh(t,s,d,g,E,T,O){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(g,T,O):s.prototype&&s.prototype.isPureReactComponent?!le(d,g)||!le(E,T):!0}function Jh(t,s,d){var g=!1,E=ss,T=s.contextType;return typeof T=="object"&&T!==null?T=zr(T):(E=yr(s)?Ms:nr.current,g=s.contextTypes,T=(g=g!=null)?po(t,E):ss),s=new s(d,T),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Pl,t.stateNode=s,s._reactInternals=t,g&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=E,t.__reactInternalMemoizedMaskedChildContext=T),s}function e0(t,s,d,g){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(d,g),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(d,g),s.state!==t&&Pl.enqueueReplaceState(s,s.state,null)}function bu(t,s,d,g){var E=t.stateNode;E.props=d,E.state=t.memoizedState,E.refs={},cu(t);var T=s.contextType;typeof T=="object"&&T!==null?E.context=zr(T):(T=yr(s)?Ms:nr.current,E.context=po(t,T)),E.state=t.memoizedState,T=s.getDerivedStateFromProps,typeof T=="function"&&(Eu(t,s,T,d),E.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(s=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),s!==E.state&&Pl.enqueueReplaceState(E,E.state,null),Sl(t,d,E,g),E.state=t.memoizedState),typeof E.componentDidMount=="function"&&(t.flags|=4194308)}function Eo(t,s){try{var d="",g=s;do d+=Re(g),g=g.return;while(g);var E=d}catch(T){E=`
Error generating stack: `+T.message+`
`+T.stack}return{value:t,source:s,stack:E,digest:null}}function Au(t,s,d){return{value:t,source:null,stack:d??null,digest:s??null}}function Su(t,s){try{console.error(s.value)}catch(d){setTimeout(function(){throw d})}}var vx=typeof WeakMap=="function"?WeakMap:Map;function t0(t,s,d){d=Oi(-1,d),d.tag=3,d.payload={element:null};var g=s.value;return d.callback=function(){Fl||(Fl=!0,Vu=g),Su(t,s)},d}function n0(t,s,d){d=Oi(-1,d),d.tag=3;var g=t.type.getDerivedStateFromError;if(typeof g=="function"){var E=s.value;d.payload=function(){return g(E)},d.callback=function(){Su(t,s)}}var T=t.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(d.callback=function(){Su(t,s),typeof g!="function"&&(us===null?us=new Set([this]):us.add(this));var O=s.stack;this.componentDidCatch(s.value,{componentStack:O!==null?O:""})}),d}function r0(t,s,d){var g=t.pingCache;if(g===null){g=t.pingCache=new vx;var E=new Set;g.set(s,E)}else E=g.get(s),E===void 0&&(E=new Set,g.set(s,E));E.has(d)||(E.add(d),t=Dx.bind(null,t,s,d),s.then(t,t))}function i0(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function s0(t,s,d,g,E){return t.mode&1?(t.flags|=65536,t.lanes=E,t):(t===s?t.flags|=65536:(t.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(s=Oi(-1,1),s.tag=2,ls(d,s,1))),d.lanes|=1),t)}var Cx=J.ReactCurrentOwner,wr=!1;function dr(t,s,d,g){s.child=t===null?Sh(s,null,d,g):yo(s,t.child,d,g)}function o0(t,s,d,g,E){d=d.render;var T=s.ref;return vo(s,E),g=mu(t,s,d,g,T,E),d=xu(),t!==null&&!wr?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~E,Di(t,s,E)):(rn&&d&&Jc(s),s.flags|=1,dr(t,s,g,E),s.child)}function a0(t,s,d,g,E){if(t===null){var T=d.type;return typeof T=="function"&&!Yu(T)&&T.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(s.tag=15,s.type=T,l0(t,s,T,g,E)):(t=Gl(d.type,null,g,s,s.mode,E),t.ref=s.ref,t.return=s,s.child=t)}if(T=t.child,!(t.lanes&E)){var O=T.memoizedProps;if(d=d.compare,d=d!==null?d:le,d(O,g)&&t.ref===s.ref)return Di(t,s,E)}return s.flags|=1,t=ps(T,g),t.ref=s.ref,t.return=s,s.child=t}function l0(t,s,d,g,E){if(t!==null){var T=t.memoizedProps;if(le(T,g)&&t.ref===s.ref)if(wr=!1,s.pendingProps=g=T,(t.lanes&E)!==0)t.flags&131072&&(wr=!0);else return s.lanes=t.lanes,Di(t,s,E)}return Tu(t,s,d,g,E)}function c0(t,s,d){var g=s.pendingProps,E=g.children,T=t!==null?t.memoizedState:null;if(g.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qt(Ao,Pr),Pr|=d;else{if(!(d&1073741824))return t=T!==null?T.baseLanes|d:d,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Qt(Ao,Pr),Pr|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=T!==null?T.baseLanes:d,Qt(Ao,Pr),Pr|=g}else T!==null?(g=T.baseLanes|d,s.memoizedState=null):g=d,Qt(Ao,Pr),Pr|=g;return dr(t,s,E,d),s.child}function u0(t,s){var d=s.ref;(t===null&&d!==null||t!==null&&t.ref!==d)&&(s.flags|=512,s.flags|=2097152)}function Tu(t,s,d,g,E){var T=yr(d)?Ms:nr.current;return T=po(s,T),vo(s,E),d=mu(t,s,d,g,T,E),g=xu(),t!==null&&!wr?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~E,Di(t,s,E)):(rn&&g&&Jc(s),s.flags|=1,dr(t,s,d,E),s.child)}function d0(t,s,d,g,E){if(yr(d)){var T=!0;ml(s)}else T=!1;if(vo(s,E),s.stateNode===null)Dl(t,s),Jh(s,d,g),bu(s,d,g,E),g=!0;else if(t===null){var O=s.stateNode,H=s.memoizedProps;O.props=H;var X=O.context,de=d.contextType;typeof de=="object"&&de!==null?de=zr(de):(de=yr(d)?Ms:nr.current,de=po(s,de));var Ee=d.getDerivedStateFromProps,Te=typeof Ee=="function"||typeof O.getSnapshotBeforeUpdate=="function";Te||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(H!==g||X!==de)&&e0(s,O,g,de),as=!1;var ve=s.memoizedState;O.state=ve,Sl(s,g,O,E),X=s.memoizedState,H!==g||ve!==X||xr.current||as?(typeof Ee=="function"&&(Eu(s,d,Ee,g),X=s.memoizedState),(H=as||Qh(s,d,H,g,ve,X,de))?(Te||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(s.flags|=4194308)):(typeof O.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=g,s.memoizedState=X),O.props=g,O.state=X,O.context=de,g=H):(typeof O.componentDidMount=="function"&&(s.flags|=4194308),g=!1)}else{O=s.stateNode,Ih(t,s),H=s.memoizedProps,de=s.type===s.elementType?H:ei(s.type,H),O.props=de,Te=s.pendingProps,ve=O.context,X=d.contextType,typeof X=="object"&&X!==null?X=zr(X):(X=yr(d)?Ms:nr.current,X=po(s,X));var Xe=d.getDerivedStateFromProps;(Ee=typeof Xe=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(H!==Te||ve!==X)&&e0(s,O,g,X),as=!1,ve=s.memoizedState,O.state=ve,Sl(s,g,O,E);var Ze=s.memoizedState;H!==Te||ve!==Ze||xr.current||as?(typeof Xe=="function"&&(Eu(s,d,Xe,g),Ze=s.memoizedState),(de=as||Qh(s,d,de,g,ve,Ze,X)||!1)?(Ee||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(g,Ze,X),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(g,Ze,X)),typeof O.componentDidUpdate=="function"&&(s.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof O.componentDidUpdate!="function"||H===t.memoizedProps&&ve===t.memoizedState||(s.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||H===t.memoizedProps&&ve===t.memoizedState||(s.flags|=1024),s.memoizedProps=g,s.memoizedState=Ze),O.props=g,O.state=Ze,O.context=X,g=de):(typeof O.componentDidUpdate!="function"||H===t.memoizedProps&&ve===t.memoizedState||(s.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||H===t.memoizedProps&&ve===t.memoizedState||(s.flags|=1024),g=!1)}return Iu(t,s,d,g,T,E)}function Iu(t,s,d,g,E,T){u0(t,s);var O=(s.flags&128)!==0;if(!g&&!O)return E&&mh(s,d,!1),Di(t,s,T);g=s.stateNode,Cx.current=s;var H=O&&typeof d.getDerivedStateFromError!="function"?null:g.render();return s.flags|=1,t!==null&&O?(s.child=yo(s,t.child,null,T),s.child=yo(s,null,H,T)):dr(t,s,H,T),s.memoizedState=g.state,E&&mh(s,d,!0),s.child}function f0(t){var s=t.stateNode;s.pendingContext?ph(t,s.pendingContext,s.pendingContext!==s.context):s.context&&ph(t,s.context,!1),uu(t,s.containerInfo)}function h0(t,s,d,g,E){return xo(),ru(E),s.flags|=256,dr(t,s,d,g),s.child}var Nu={dehydrated:null,treeContext:null,retryLane:0};function _u(t){return{baseLanes:t,cachePool:null,transitions:null}}function p0(t,s,d){var g=s.pendingProps,E=ln.current,T=!1,O=(s.flags&128)!==0,H;if((H=O)||(H=t!==null&&t.memoizedState===null?!1:(E&2)!==0),H?(T=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(E|=1),Qt(ln,E&1),t===null)return nu(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(O=g.children,t=g.fallback,T?(g=s.mode,T=s.child,O={mode:"hidden",children:O},!(g&1)&&T!==null?(T.childLanes=0,T.pendingProps=O):T=Xl(O,g,0,null),t=Gs(t,g,d,null),T.return=s,t.return=s,T.sibling=t,s.child=T,s.child.memoizedState=_u(d),s.memoizedState=Nu,t):Ru(s,O));if(E=t.memoizedState,E!==null&&(H=E.dehydrated,H!==null))return Ex(t,s,O,g,H,E,d);if(T){T=g.fallback,O=s.mode,E=t.child,H=E.sibling;var X={mode:"hidden",children:g.children};return!(O&1)&&s.child!==E?(g=s.child,g.childLanes=0,g.pendingProps=X,s.deletions=null):(g=ps(E,X),g.subtreeFlags=E.subtreeFlags&14680064),H!==null?T=ps(H,T):(T=Gs(T,O,d,null),T.flags|=2),T.return=s,g.return=s,g.sibling=T,s.child=g,g=T,T=s.child,O=t.child.memoizedState,O=O===null?_u(d):{baseLanes:O.baseLanes|d,cachePool:null,transitions:O.transitions},T.memoizedState=O,T.childLanes=t.childLanes&~d,s.memoizedState=Nu,g}return T=t.child,t=T.sibling,g=ps(T,{mode:"visible",children:g.children}),!(s.mode&1)&&(g.lanes=d),g.return=s,g.sibling=null,t!==null&&(d=s.deletions,d===null?(s.deletions=[t],s.flags|=16):d.push(t)),s.child=g,s.memoizedState=null,g}function Ru(t,s){return s=Xl({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function Ol(t,s,d,g){return g!==null&&ru(g),yo(s,t.child,null,d),t=Ru(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Ex(t,s,d,g,E,T,O){if(d)return s.flags&256?(s.flags&=-257,g=Au(Error(a(422))),Ol(t,s,O,g)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(T=g.fallback,E=s.mode,g=Xl({mode:"visible",children:g.children},E,0,null),T=Gs(T,E,O,null),T.flags|=2,g.return=s,T.return=s,g.sibling=T,s.child=g,s.mode&1&&yo(s,t.child,null,O),s.child.memoizedState=_u(O),s.memoizedState=Nu,T);if(!(s.mode&1))return Ol(t,s,O,null);if(E.data==="$!"){if(g=E.nextSibling&&E.nextSibling.dataset,g)var H=g.dgst;return g=H,T=Error(a(419)),g=Au(T,g,void 0),Ol(t,s,O,g)}if(H=(O&t.childLanes)!==0,wr||H){if(g=Vn,g!==null){switch(O&-O){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=E&(g.suspendedLanes|O)?0:E,E!==0&&E!==T.retryLane&&(T.retryLane=E,Pi(t,E),ri(g,t,E,-1))}return Xu(),g=Au(Error(a(421))),Ol(t,s,O,g)}return E.data==="$?"?(s.flags|=128,s.child=t.child,s=Mx.bind(null,t),E._reactRetry=s,null):(t=T.treeContext,kr=rs(E.nextSibling),Rr=s,rn=!0,Jr=null,t!==null&&(Fr[Vr++]=Ri,Fr[Vr++]=ki,Fr[Vr++]=Ls,Ri=t.id,ki=t.overflow,Ls=s),s=Ru(s,g.children),s.flags|=4096,s)}function g0(t,s,d){t.lanes|=s;var g=t.alternate;g!==null&&(g.lanes|=s),au(t.return,s,d)}function ku(t,s,d,g,E){var T=t.memoizedState;T===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:E}:(T.isBackwards=s,T.rendering=null,T.renderingStartTime=0,T.last=g,T.tail=d,T.tailMode=E)}function m0(t,s,d){var g=s.pendingProps,E=g.revealOrder,T=g.tail;if(dr(t,s,g.children,d),g=ln.current,g&2)g=g&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&g0(t,d,s);else if(t.tag===19)g0(t,d,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}g&=1}if(Qt(ln,g),!(s.mode&1))s.memoizedState=null;else switch(E){case"forwards":for(d=s.child,E=null;d!==null;)t=d.alternate,t!==null&&Tl(t)===null&&(E=d),d=d.sibling;d=E,d===null?(E=s.child,s.child=null):(E=d.sibling,d.sibling=null),ku(s,!1,E,d,T);break;case"backwards":for(d=null,E=s.child,s.child=null;E!==null;){if(t=E.alternate,t!==null&&Tl(t)===null){s.child=E;break}t=E.sibling,E.sibling=d,d=E,E=t}ku(s,!0,d,null,T);break;case"together":ku(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Dl(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function Di(t,s,d){if(t!==null&&(s.dependencies=t.dependencies),zs|=s.lanes,!(d&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(a(153));if(s.child!==null){for(t=s.child,d=ps(t,t.pendingProps),s.child=d,d.return=s;t.sibling!==null;)t=t.sibling,d=d.sibling=ps(t,t.pendingProps),d.return=s;d.sibling=null}return s.child}function bx(t,s,d){switch(s.tag){case 3:f0(s),xo();break;case 5:Rh(s);break;case 1:yr(s.type)&&ml(s);break;case 4:uu(s,s.stateNode.containerInfo);break;case 10:var g=s.type._context,E=s.memoizedProps.value;Qt(El,g._currentValue),g._currentValue=E;break;case 13:if(g=s.memoizedState,g!==null)return g.dehydrated!==null?(Qt(ln,ln.current&1),s.flags|=128,null):d&s.child.childLanes?p0(t,s,d):(Qt(ln,ln.current&1),t=Di(t,s,d),t!==null?t.sibling:null);Qt(ln,ln.current&1);break;case 19:if(g=(d&s.childLanes)!==0,t.flags&128){if(g)return m0(t,s,d);s.flags|=128}if(E=s.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Qt(ln,ln.current),g)break;return null;case 22:case 23:return s.lanes=0,c0(t,s,d)}return Di(t,s,d)}var x0,Pu,y0,w0;x0=function(t,s){for(var d=s.child;d!==null;){if(d.tag===5||d.tag===6)t.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break;for(;d.sibling===null;){if(d.return===null||d.return===s)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Pu=function(){},y0=function(t,s,d,g){var E=t.memoizedProps;if(E!==g){t=s.stateNode,Fs(fi.current);var T=null;switch(d){case"input":E=st(t,E),g=st(t,g),T=[];break;case"select":E=ae({},E,{value:void 0}),g=ae({},g,{value:void 0}),T=[];break;case"textarea":E=yn(t,E),g=yn(t,g),T=[];break;default:typeof E.onClick!="function"&&typeof g.onClick=="function"&&(t.onclick=hl)}ut(d,g);var O;d=null;for(de in E)if(!g.hasOwnProperty(de)&&E.hasOwnProperty(de)&&E[de]!=null)if(de==="style"){var H=E[de];for(O in H)H.hasOwnProperty(O)&&(d||(d={}),d[O]="")}else de!=="dangerouslySetInnerHTML"&&de!=="children"&&de!=="suppressContentEditableWarning"&&de!=="suppressHydrationWarning"&&de!=="autoFocus"&&(p.hasOwnProperty(de)?T||(T=[]):(T=T||[]).push(de,null));for(de in g){var X=g[de];if(H=E!=null?E[de]:void 0,g.hasOwnProperty(de)&&X!==H&&(X!=null||H!=null))if(de==="style")if(H){for(O in H)!H.hasOwnProperty(O)||X&&X.hasOwnProperty(O)||(d||(d={}),d[O]="");for(O in X)X.hasOwnProperty(O)&&H[O]!==X[O]&&(d||(d={}),d[O]=X[O])}else d||(T||(T=[]),T.push(de,d)),d=X;else de==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,H=H?H.__html:void 0,X!=null&&H!==X&&(T=T||[]).push(de,X)):de==="children"?typeof X!="string"&&typeof X!="number"||(T=T||[]).push(de,""+X):de!=="suppressContentEditableWarning"&&de!=="suppressHydrationWarning"&&(p.hasOwnProperty(de)?(X!=null&&de==="onScroll"&&Jt("scroll",t),T||H===X||(T=[])):(T=T||[]).push(de,X))}d&&(T=T||[]).push("style",d);var de=T;(s.updateQueue=de)&&(s.flags|=4)}},w0=function(t,s,d,g){d!==g&&(s.flags|=4)};function xa(t,s){if(!rn)switch(t.tailMode){case"hidden":s=t.tail;for(var d=null;s!==null;)s.alternate!==null&&(d=s),s=s.sibling;d===null?t.tail=null:d.sibling=null;break;case"collapsed":d=t.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:g.sibling=null}}function ir(t){var s=t.alternate!==null&&t.alternate.child===t.child,d=0,g=0;if(s)for(var E=t.child;E!==null;)d|=E.lanes|E.childLanes,g|=E.subtreeFlags&14680064,g|=E.flags&14680064,E.return=t,E=E.sibling;else for(E=t.child;E!==null;)d|=E.lanes|E.childLanes,g|=E.subtreeFlags,g|=E.flags,E.return=t,E=E.sibling;return t.subtreeFlags|=g,t.childLanes=d,s}function Ax(t,s,d){var g=s.pendingProps;switch(eu(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ir(s),null;case 1:return yr(s.type)&&gl(),ir(s),null;case 3:return g=s.stateNode,Co(),en(xr),en(nr),hu(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(t===null||t.child===null)&&(vl(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Jr!==null&&(Wu(Jr),Jr=null))),Pu(t,s),ir(s),null;case 5:du(s);var E=Fs(fa.current);if(d=s.type,t!==null&&s.stateNode!=null)y0(t,s,d,g,E),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!g){if(s.stateNode===null)throw Error(a(166));return ir(s),null}if(t=Fs(fi.current),vl(s)){g=s.stateNode,d=s.type;var T=s.memoizedProps;switch(g[di]=s,g[aa]=T,t=(s.mode&1)!==0,d){case"dialog":Jt("cancel",g),Jt("close",g);break;case"iframe":case"object":case"embed":Jt("load",g);break;case"video":case"audio":for(E=0;E<ia.length;E++)Jt(ia[E],g);break;case"source":Jt("error",g);break;case"img":case"image":case"link":Jt("error",g),Jt("load",g);break;case"details":Jt("toggle",g);break;case"input":ht(g,T),Jt("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!T.multiple},Jt("invalid",g);break;case"textarea":Ct(g,T),Jt("invalid",g)}ut(d,T),E=null;for(var O in T)if(T.hasOwnProperty(O)){var H=T[O];O==="children"?typeof H=="string"?g.textContent!==H&&(T.suppressHydrationWarning!==!0&&fl(g.textContent,H,t),E=["children",H]):typeof H=="number"&&g.textContent!==""+H&&(T.suppressHydrationWarning!==!0&&fl(g.textContent,H,t),E=["children",""+H]):p.hasOwnProperty(O)&&H!=null&&O==="onScroll"&&Jt("scroll",g)}switch(d){case"input":ft(g),qe(g,T,!0);break;case"textarea":ft(g),Fe(g);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(g.onclick=hl)}g=E,s.updateQueue=g,g!==null&&(s.flags|=4)}else{O=E.nodeType===9?E:E.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$e(d)),t==="http://www.w3.org/1999/xhtml"?d==="script"?(t=O.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof g.is=="string"?t=O.createElement(d,{is:g.is}):(t=O.createElement(d),d==="select"&&(O=t,g.multiple?O.multiple=!0:g.size&&(O.size=g.size))):t=O.createElementNS(t,d),t[di]=s,t[aa]=g,x0(t,s,!1,!1),s.stateNode=t;e:{switch(O=Mt(d,g),d){case"dialog":Jt("cancel",t),Jt("close",t),E=g;break;case"iframe":case"object":case"embed":Jt("load",t),E=g;break;case"video":case"audio":for(E=0;E<ia.length;E++)Jt(ia[E],t);E=g;break;case"source":Jt("error",t),E=g;break;case"img":case"image":case"link":Jt("error",t),Jt("load",t),E=g;break;case"details":Jt("toggle",t),E=g;break;case"input":ht(t,g),E=st(t,g),Jt("invalid",t);break;case"option":E=g;break;case"select":t._wrapperState={wasMultiple:!!g.multiple},E=ae({},g,{value:void 0}),Jt("invalid",t);break;case"textarea":Ct(t,g),E=yn(t,g),Jt("invalid",t);break;default:E=g}ut(d,E),H=E;for(T in H)if(H.hasOwnProperty(T)){var X=H[T];T==="style"?he(t,X):T==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,X!=null&&At(t,X)):T==="children"?typeof X=="string"?(d!=="textarea"||X!=="")&&Wt(t,X):typeof X=="number"&&Wt(t,""+X):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(p.hasOwnProperty(T)?X!=null&&T==="onScroll"&&Jt("scroll",t):X!=null&&z(t,T,X,O))}switch(d){case"input":ft(t),qe(t,g,!1);break;case"textarea":ft(t),Fe(t);break;case"option":g.value!=null&&t.setAttribute("value",""+He(g.value));break;case"select":t.multiple=!!g.multiple,T=g.value,T!=null?Ie(t,!!g.multiple,T,!1):g.defaultValue!=null&&Ie(t,!!g.multiple,g.defaultValue,!0);break;default:typeof E.onClick=="function"&&(t.onclick=hl)}switch(d){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return ir(s),null;case 6:if(t&&s.stateNode!=null)w0(t,s,t.memoizedProps,g);else{if(typeof g!="string"&&s.stateNode===null)throw Error(a(166));if(d=Fs(fa.current),Fs(fi.current),vl(s)){if(g=s.stateNode,d=s.memoizedProps,g[di]=s,(T=g.nodeValue!==d)&&(t=Rr,t!==null))switch(t.tag){case 3:fl(g.nodeValue,d,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fl(g.nodeValue,d,(t.mode&1)!==0)}T&&(s.flags|=4)}else g=(d.nodeType===9?d:d.ownerDocument).createTextNode(g),g[di]=s,s.stateNode=g}return ir(s),null;case 13:if(en(ln),g=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(rn&&kr!==null&&s.mode&1&&!(s.flags&128))Eh(),xo(),s.flags|=98560,T=!1;else if(T=vl(s),g!==null&&g.dehydrated!==null){if(t===null){if(!T)throw Error(a(318));if(T=s.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(a(317));T[di]=s}else xo(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;ir(s),T=!1}else Jr!==null&&(Wu(Jr),Jr=null),T=!0;if(!T)return s.flags&65536?s:null}return s.flags&128?(s.lanes=d,s):(g=g!==null,g!==(t!==null&&t.memoizedState!==null)&&g&&(s.child.flags|=8192,s.mode&1&&(t===null||ln.current&1?On===0&&(On=3):Xu())),s.updateQueue!==null&&(s.flags|=4),ir(s),null);case 4:return Co(),Pu(t,s),t===null&&sa(s.stateNode.containerInfo),ir(s),null;case 10:return ou(s.type._context),ir(s),null;case 17:return yr(s.type)&&gl(),ir(s),null;case 19:if(en(ln),T=s.memoizedState,T===null)return ir(s),null;if(g=(s.flags&128)!==0,O=T.rendering,O===null)if(g)xa(T,!1);else{if(On!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(O=Tl(t),O!==null){for(s.flags|=128,xa(T,!1),g=O.updateQueue,g!==null&&(s.updateQueue=g,s.flags|=4),s.subtreeFlags=0,g=d,d=s.child;d!==null;)T=d,t=g,T.flags&=14680066,O=T.alternate,O===null?(T.childLanes=0,T.lanes=t,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=O.childLanes,T.lanes=O.lanes,T.child=O.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=O.memoizedProps,T.memoizedState=O.memoizedState,T.updateQueue=O.updateQueue,T.type=O.type,t=O.dependencies,T.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),d=d.sibling;return Qt(ln,ln.current&1|2),s.child}t=t.sibling}T.tail!==null&&Vt()>So&&(s.flags|=128,g=!0,xa(T,!1),s.lanes=4194304)}else{if(!g)if(t=Tl(O),t!==null){if(s.flags|=128,g=!0,d=t.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),xa(T,!0),T.tail===null&&T.tailMode==="hidden"&&!O.alternate&&!rn)return ir(s),null}else 2*Vt()-T.renderingStartTime>So&&d!==1073741824&&(s.flags|=128,g=!0,xa(T,!1),s.lanes=4194304);T.isBackwards?(O.sibling=s.child,s.child=O):(d=T.last,d!==null?d.sibling=O:s.child=O,T.last=O)}return T.tail!==null?(s=T.tail,T.rendering=s,T.tail=s.sibling,T.renderingStartTime=Vt(),s.sibling=null,d=ln.current,Qt(ln,g?d&1|2:d&1),s):(ir(s),null);case 22:case 23:return Gu(),g=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==g&&(s.flags|=8192),g&&s.mode&1?Pr&1073741824&&(ir(s),s.subtreeFlags&6&&(s.flags|=8192)):ir(s),null;case 24:return null;case 25:return null}throw Error(a(156,s.tag))}function Sx(t,s){switch(eu(s),s.tag){case 1:return yr(s.type)&&gl(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Co(),en(xr),en(nr),hu(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return du(s),null;case 13:if(en(ln),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(a(340));xo()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return en(ln),null;case 4:return Co(),null;case 10:return ou(s.type._context),null;case 22:case 23:return Gu(),null;case 24:return null;default:return null}}var Ml=!1,sr=!1,Tx=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function bo(t,s){var d=t.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(g){gn(t,s,g)}else d.current=null}function Ou(t,s,d){try{d()}catch(g){gn(t,s,g)}}var v0=!1;function Ix(t,s){if(Gc=ci,t=_t(),vt(t)){if("selectionStart"in t)var d={start:t.selectionStart,end:t.selectionEnd};else e:{d=(d=t.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var E=g.anchorOffset,T=g.focusNode;g=g.focusOffset;try{d.nodeType,T.nodeType}catch{d=null;break e}var O=0,H=-1,X=-1,de=0,Ee=0,Te=t,ve=null;t:for(;;){for(var Xe;Te!==d||E!==0&&Te.nodeType!==3||(H=O+E),Te!==T||g!==0&&Te.nodeType!==3||(X=O+g),Te.nodeType===3&&(O+=Te.nodeValue.length),(Xe=Te.firstChild)!==null;)ve=Te,Te=Xe;for(;;){if(Te===t)break t;if(ve===d&&++de===E&&(H=O),ve===T&&++Ee===g&&(X=O),(Xe=Te.nextSibling)!==null)break;Te=ve,ve=Te.parentNode}Te=Xe}d=H===-1||X===-1?null:{start:H,end:X}}else d=null}d=d||{start:0,end:0}}else d=null;for(Xc={focusedElem:t,selectionRange:d},ci=!1,Ke=s;Ke!==null;)if(s=Ke,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Ke=t;else for(;Ke!==null;){s=Ke;try{var Ze=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Ze!==null){var Qe=Ze.memoizedProps,En=Ze.memoizedState,ie=s.stateNode,Z=ie.getSnapshotBeforeUpdate(s.elementType===s.type?Qe:ei(s.type,Qe),En);ie.__reactInternalSnapshotBeforeUpdate=Z}break;case 3:var se=s.stateNode.containerInfo;se.nodeType===1?se.textContent="":se.nodeType===9&&se.documentElement&&se.removeChild(se.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(Pe){gn(s,s.return,Pe)}if(t=s.sibling,t!==null){t.return=s.return,Ke=t;break}Ke=s.return}return Ze=v0,v0=!1,Ze}function ya(t,s,d){var g=s.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var E=g=g.next;do{if((E.tag&t)===t){var T=E.destroy;E.destroy=void 0,T!==void 0&&Ou(s,d,T)}E=E.next}while(E!==g)}}function Ll(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var d=s=s.next;do{if((d.tag&t)===t){var g=d.create;d.destroy=g()}d=d.next}while(d!==s)}}function Du(t){var s=t.ref;if(s!==null){var d=t.stateNode;switch(t.tag){case 5:t=d;break;default:t=d}typeof s=="function"?s(t):s.current=t}}function C0(t){var s=t.alternate;s!==null&&(t.alternate=null,C0(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[di],delete s[aa],delete s[Zc],delete s[cx],delete s[ux])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function E0(t){return t.tag===5||t.tag===3||t.tag===4}function b0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||E0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Mu(t,s,d){var g=t.tag;if(g===5||g===6)t=t.stateNode,s?d.nodeType===8?d.parentNode.insertBefore(t,s):d.insertBefore(t,s):(d.nodeType===8?(s=d.parentNode,s.insertBefore(t,d)):(s=d,s.appendChild(t)),d=d._reactRootContainer,d!=null||s.onclick!==null||(s.onclick=hl));else if(g!==4&&(t=t.child,t!==null))for(Mu(t,s,d),t=t.sibling;t!==null;)Mu(t,s,d),t=t.sibling}function Lu(t,s,d){var g=t.tag;if(g===5||g===6)t=t.stateNode,s?d.insertBefore(t,s):d.appendChild(t);else if(g!==4&&(t=t.child,t!==null))for(Lu(t,s,d),t=t.sibling;t!==null;)Lu(t,s,d),t=t.sibling}var Yn=null,ti=!1;function cs(t,s,d){for(d=d.child;d!==null;)A0(t,s,d),d=d.sibling}function A0(t,s,d){if(St&&typeof St.onCommitFiberUnmount=="function")try{St.onCommitFiberUnmount(Rt,d)}catch{}switch(d.tag){case 5:sr||bo(d,s);case 6:var g=Yn,E=ti;Yn=null,cs(t,s,d),Yn=g,ti=E,Yn!==null&&(ti?(t=Yn,d=d.stateNode,t.nodeType===8?t.parentNode.removeChild(d):t.removeChild(d)):Yn.removeChild(d.stateNode));break;case 18:Yn!==null&&(ti?(t=Yn,d=d.stateNode,t.nodeType===8?$c(t.parentNode,d):t.nodeType===1&&$c(t,d),Zr(t)):$c(Yn,d.stateNode));break;case 4:g=Yn,E=ti,Yn=d.stateNode.containerInfo,ti=!0,cs(t,s,d),Yn=g,ti=E;break;case 0:case 11:case 14:case 15:if(!sr&&(g=d.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){E=g=g.next;do{var T=E,O=T.destroy;T=T.tag,O!==void 0&&(T&2||T&4)&&Ou(d,s,O),E=E.next}while(E!==g)}cs(t,s,d);break;case 1:if(!sr&&(bo(d,s),g=d.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=d.memoizedProps,g.state=d.memoizedState,g.componentWillUnmount()}catch(H){gn(d,s,H)}cs(t,s,d);break;case 21:cs(t,s,d);break;case 22:d.mode&1?(sr=(g=sr)||d.memoizedState!==null,cs(t,s,d),sr=g):cs(t,s,d);break;default:cs(t,s,d)}}function S0(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var d=t.stateNode;d===null&&(d=t.stateNode=new Tx),s.forEach(function(g){var E=Lx.bind(null,t,g);d.has(g)||(d.add(g),g.then(E,E))})}}function ni(t,s){var d=s.deletions;if(d!==null)for(var g=0;g<d.length;g++){var E=d[g];try{var T=t,O=s,H=O;e:for(;H!==null;){switch(H.tag){case 5:Yn=H.stateNode,ti=!1;break e;case 3:Yn=H.stateNode.containerInfo,ti=!0;break e;case 4:Yn=H.stateNode.containerInfo,ti=!0;break e}H=H.return}if(Yn===null)throw Error(a(160));A0(T,O,E),Yn=null,ti=!1;var X=E.alternate;X!==null&&(X.return=null),E.return=null}catch(de){gn(E,s,de)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)T0(s,t),s=s.sibling}function T0(t,s){var d=t.alternate,g=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ni(s,t),pi(t),g&4){try{ya(3,t,t.return),Ll(3,t)}catch(Qe){gn(t,t.return,Qe)}try{ya(5,t,t.return)}catch(Qe){gn(t,t.return,Qe)}}break;case 1:ni(s,t),pi(t),g&512&&d!==null&&bo(d,d.return);break;case 5:if(ni(s,t),pi(t),g&512&&d!==null&&bo(d,d.return),t.flags&32){var E=t.stateNode;try{Wt(E,"")}catch(Qe){gn(t,t.return,Qe)}}if(g&4&&(E=t.stateNode,E!=null)){var T=t.memoizedProps,O=d!==null?d.memoizedProps:T,H=t.type,X=t.updateQueue;if(t.updateQueue=null,X!==null)try{H==="input"&&T.type==="radio"&&T.name!=null&&Pt(E,T),Mt(H,O);var de=Mt(H,T);for(O=0;O<X.length;O+=2){var Ee=X[O],Te=X[O+1];Ee==="style"?he(E,Te):Ee==="dangerouslySetInnerHTML"?At(E,Te):Ee==="children"?Wt(E,Te):z(E,Ee,Te,de)}switch(H){case"input":xt(E,T);break;case"textarea":xe(E,T);break;case"select":var ve=E._wrapperState.wasMultiple;E._wrapperState.wasMultiple=!!T.multiple;var Xe=T.value;Xe!=null?Ie(E,!!T.multiple,Xe,!1):ve!==!!T.multiple&&(T.defaultValue!=null?Ie(E,!!T.multiple,T.defaultValue,!0):Ie(E,!!T.multiple,T.multiple?[]:"",!1))}E[aa]=T}catch(Qe){gn(t,t.return,Qe)}}break;case 6:if(ni(s,t),pi(t),g&4){if(t.stateNode===null)throw Error(a(162));E=t.stateNode,T=t.memoizedProps;try{E.nodeValue=T}catch(Qe){gn(t,t.return,Qe)}}break;case 3:if(ni(s,t),pi(t),g&4&&d!==null&&d.memoizedState.isDehydrated)try{Zr(s.containerInfo)}catch(Qe){gn(t,t.return,Qe)}break;case 4:ni(s,t),pi(t);break;case 13:ni(s,t),pi(t),E=t.child,E.flags&8192&&(T=E.memoizedState!==null,E.stateNode.isHidden=T,!T||E.alternate!==null&&E.alternate.memoizedState!==null||(Fu=Vt())),g&4&&S0(t);break;case 22:if(Ee=d!==null&&d.memoizedState!==null,t.mode&1?(sr=(de=sr)||Ee,ni(s,t),sr=de):ni(s,t),pi(t),g&8192){if(de=t.memoizedState!==null,(t.stateNode.isHidden=de)&&!Ee&&t.mode&1)for(Ke=t,Ee=t.child;Ee!==null;){for(Te=Ke=Ee;Ke!==null;){switch(ve=Ke,Xe=ve.child,ve.tag){case 0:case 11:case 14:case 15:ya(4,ve,ve.return);break;case 1:bo(ve,ve.return);var Ze=ve.stateNode;if(typeof Ze.componentWillUnmount=="function"){g=ve,d=ve.return;try{s=g,Ze.props=s.memoizedProps,Ze.state=s.memoizedState,Ze.componentWillUnmount()}catch(Qe){gn(g,d,Qe)}}break;case 5:bo(ve,ve.return);break;case 22:if(ve.memoizedState!==null){_0(Te);continue}}Xe!==null?(Xe.return=ve,Ke=Xe):_0(Te)}Ee=Ee.sibling}e:for(Ee=null,Te=t;;){if(Te.tag===5){if(Ee===null){Ee=Te;try{E=Te.stateNode,de?(T=E.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(H=Te.stateNode,X=Te.memoizedProps.style,O=X!=null&&X.hasOwnProperty("display")?X.display:null,H.style.display=Be("display",O))}catch(Qe){gn(t,t.return,Qe)}}}else if(Te.tag===6){if(Ee===null)try{Te.stateNode.nodeValue=de?"":Te.memoizedProps}catch(Qe){gn(t,t.return,Qe)}}else if((Te.tag!==22&&Te.tag!==23||Te.memoizedState===null||Te===t)&&Te.child!==null){Te.child.return=Te,Te=Te.child;continue}if(Te===t)break e;for(;Te.sibling===null;){if(Te.return===null||Te.return===t)break e;Ee===Te&&(Ee=null),Te=Te.return}Ee===Te&&(Ee=null),Te.sibling.return=Te.return,Te=Te.sibling}}break;case 19:ni(s,t),pi(t),g&4&&S0(t);break;case 21:break;default:ni(s,t),pi(t)}}function pi(t){var s=t.flags;if(s&2){try{e:{for(var d=t.return;d!==null;){if(E0(d)){var g=d;break e}d=d.return}throw Error(a(160))}switch(g.tag){case 5:var E=g.stateNode;g.flags&32&&(Wt(E,""),g.flags&=-33);var T=b0(t);Lu(t,T,E);break;case 3:case 4:var O=g.stateNode.containerInfo,H=b0(t);Mu(t,H,O);break;default:throw Error(a(161))}}catch(X){gn(t,t.return,X)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Nx(t,s,d){Ke=t,I0(t)}function I0(t,s,d){for(var g=(t.mode&1)!==0;Ke!==null;){var E=Ke,T=E.child;if(E.tag===22&&g){var O=E.memoizedState!==null||Ml;if(!O){var H=E.alternate,X=H!==null&&H.memoizedState!==null||sr;H=Ml;var de=sr;if(Ml=O,(sr=X)&&!de)for(Ke=E;Ke!==null;)O=Ke,X=O.child,O.tag===22&&O.memoizedState!==null?R0(E):X!==null?(X.return=O,Ke=X):R0(E);for(;T!==null;)Ke=T,I0(T),T=T.sibling;Ke=E,Ml=H,sr=de}N0(t)}else E.subtreeFlags&8772&&T!==null?(T.return=E,Ke=T):N0(t)}}function N0(t){for(;Ke!==null;){var s=Ke;if(s.flags&8772){var d=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:sr||Ll(5,s);break;case 1:var g=s.stateNode;if(s.flags&4&&!sr)if(d===null)g.componentDidMount();else{var E=s.elementType===s.type?d.memoizedProps:ei(s.type,d.memoizedProps);g.componentDidUpdate(E,d.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var T=s.updateQueue;T!==null&&_h(s,T,g);break;case 3:var O=s.updateQueue;if(O!==null){if(d=null,s.child!==null)switch(s.child.tag){case 5:d=s.child.stateNode;break;case 1:d=s.child.stateNode}_h(s,O,d)}break;case 5:var H=s.stateNode;if(d===null&&s.flags&4){d=H;var X=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":X.autoFocus&&d.focus();break;case"img":X.src&&(d.src=X.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var de=s.alternate;if(de!==null){var Ee=de.memoizedState;if(Ee!==null){var Te=Ee.dehydrated;Te!==null&&Zr(Te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}sr||s.flags&512&&Du(s)}catch(ve){gn(s,s.return,ve)}}if(s===t){Ke=null;break}if(d=s.sibling,d!==null){d.return=s.return,Ke=d;break}Ke=s.return}}function _0(t){for(;Ke!==null;){var s=Ke;if(s===t){Ke=null;break}var d=s.sibling;if(d!==null){d.return=s.return,Ke=d;break}Ke=s.return}}function R0(t){for(;Ke!==null;){var s=Ke;try{switch(s.tag){case 0:case 11:case 15:var d=s.return;try{Ll(4,s)}catch(X){gn(s,d,X)}break;case 1:var g=s.stateNode;if(typeof g.componentDidMount=="function"){var E=s.return;try{g.componentDidMount()}catch(X){gn(s,E,X)}}var T=s.return;try{Du(s)}catch(X){gn(s,T,X)}break;case 5:var O=s.return;try{Du(s)}catch(X){gn(s,O,X)}}}catch(X){gn(s,s.return,X)}if(s===t){Ke=null;break}var H=s.sibling;if(H!==null){H.return=s.return,Ke=H;break}Ke=s.return}}var _x=Math.ceil,Bl=J.ReactCurrentDispatcher,Bu=J.ReactCurrentOwner,Wr=J.ReactCurrentBatchConfig,Ft=0,Vn=null,Sn=null,Kn=0,Pr=0,Ao=is(0),On=0,wa=null,zs=0,jl=0,ju=0,va=null,vr=null,Fu=0,So=1/0,Mi=null,Fl=!1,Vu=null,us=null,Vl=!1,ds=null,zl=0,Ca=0,zu=null,Ul=-1,Wl=0;function fr(){return Ft&6?Vt():Ul!==-1?Ul:Ul=Vt()}function fs(t){return t.mode&1?Ft&2&&Kn!==0?Kn&-Kn:fx.transition!==null?(Wl===0&&(Wl=Nn()),Wl):(t=Tt,t!==0||(t=window.event,t=t===void 0?16:Ko(t.type)),t):1}function ri(t,s,d,g){if(50<Ca)throw Ca=0,zu=null,Error(a(185));F(t,d,g),(!(Ft&2)||t!==Vn)&&(t===Vn&&(!(Ft&2)&&(jl|=d),On===4&&hs(t,Kn)),Cr(t,g),d===1&&Ft===0&&!(s.mode&1)&&(So=Vt()+500,xl&&os()))}function Cr(t,s){var d=t.callbackNode;Yi(t,s);var g=Tr(t,t===Vn?Kn:0);if(g===0)d!==null&&It(d),t.callbackNode=null,t.callbackPriority=0;else if(s=g&-g,t.callbackPriority!==s){if(d!=null&&It(d),s===1)t.tag===0?dx(P0.bind(null,t)):xh(P0.bind(null,t)),ax(function(){!(Ft&6)&&os()}),d=null;else{switch(Qa(g)){case 1:d=ye;break;case 4:d=mr;break;case 16:d=Bt;break;case 536870912:d=Xi;break;default:d=Bt}d=V0(d,k0.bind(null,t))}t.callbackPriority=s,t.callbackNode=d}}function k0(t,s){if(Ul=-1,Wl=0,Ft&6)throw Error(a(327));var d=t.callbackNode;if(To()&&t.callbackNode!==d)return null;var g=Tr(t,t===Vn?Kn:0);if(g===0)return null;if(g&30||g&t.expiredLanes||s)s=Hl(t,g);else{s=g;var E=Ft;Ft|=2;var T=D0();(Vn!==t||Kn!==s)&&(Mi=null,So=Vt()+500,Ws(t,s));do try{Px();break}catch(H){O0(t,H)}while(!0);su(),Bl.current=T,Ft=E,Sn!==null?s=0:(Vn=null,Kn=0,s=On)}if(s!==0){if(s===2&&(E=Xt(t),E!==0&&(g=E,s=Uu(t,E))),s===1)throw d=wa,Ws(t,0),hs(t,g),Cr(t,Vt()),d;if(s===6)hs(t,g);else{if(E=t.current.alternate,!(g&30)&&!Rx(E)&&(s=Hl(t,g),s===2&&(T=Xt(t),T!==0&&(g=T,s=Uu(t,T))),s===1))throw d=wa,Ws(t,0),hs(t,g),Cr(t,Vt()),d;switch(t.finishedWork=E,t.finishedLanes=g,s){case 0:case 1:throw Error(a(345));case 2:Hs(t,vr,Mi);break;case 3:if(hs(t,g),(g&130023424)===g&&(s=Fu+500-Vt(),10<s)){if(Tr(t,0)!==0)break;if(E=t.suspendedLanes,(E&g)!==g){fr(),t.pingedLanes|=t.suspendedLanes&E;break}t.timeoutHandle=Kc(Hs.bind(null,t,vr,Mi),s);break}Hs(t,vr,Mi);break;case 4:if(hs(t,g),(g&4194240)===g)break;for(s=t.eventTimes,E=-1;0<g;){var O=31-ur(g);T=1<<O,O=s[O],O>E&&(E=O),g&=~T}if(g=E,g=Vt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*_x(g/1960))-g,10<g){t.timeoutHandle=Kc(Hs.bind(null,t,vr,Mi),g);break}Hs(t,vr,Mi);break;case 5:Hs(t,vr,Mi);break;default:throw Error(a(329))}}}return Cr(t,Vt()),t.callbackNode===d?k0.bind(null,t):null}function Uu(t,s){var d=va;return t.current.memoizedState.isDehydrated&&(Ws(t,s).flags|=256),t=Hl(t,s),t!==2&&(s=vr,vr=d,s!==null&&Wu(s)),t}function Wu(t){vr===null?vr=t:vr.push.apply(vr,t)}function Rx(t){for(var s=t;;){if(s.flags&16384){var d=s.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var g=0;g<d.length;g++){var E=d[g],T=E.getSnapshot;E=E.value;try{if(!ee(T(),E))return!1}catch{return!1}}}if(d=s.child,s.subtreeFlags&16384&&d!==null)d.return=s,s=d;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function hs(t,s){for(s&=~ju,s&=~jl,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var d=31-ur(s),g=1<<d;t[d]=-1,s&=~g}}function P0(t){if(Ft&6)throw Error(a(327));To();var s=Tr(t,0);if(!(s&1))return Cr(t,Vt()),null;var d=Hl(t,s);if(t.tag!==0&&d===2){var g=Xt(t);g!==0&&(s=g,d=Uu(t,g))}if(d===1)throw d=wa,Ws(t,0),hs(t,s),Cr(t,Vt()),d;if(d===6)throw Error(a(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,Hs(t,vr,Mi),Cr(t,Vt()),null}function Hu(t,s){var d=Ft;Ft|=1;try{return t(s)}finally{Ft=d,Ft===0&&(So=Vt()+500,xl&&os())}}function Us(t){ds!==null&&ds.tag===0&&!(Ft&6)&&To();var s=Ft;Ft|=1;var d=Wr.transition,g=Tt;try{if(Wr.transition=null,Tt=1,t)return t()}finally{Tt=g,Wr.transition=d,Ft=s,!(Ft&6)&&os()}}function Gu(){Pr=Ao.current,en(Ao)}function Ws(t,s){t.finishedWork=null,t.finishedLanes=0;var d=t.timeoutHandle;if(d!==-1&&(t.timeoutHandle=-1,ox(d)),Sn!==null)for(d=Sn.return;d!==null;){var g=d;switch(eu(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&gl();break;case 3:Co(),en(xr),en(nr),hu();break;case 5:du(g);break;case 4:Co();break;case 13:en(ln);break;case 19:en(ln);break;case 10:ou(g.type._context);break;case 22:case 23:Gu()}d=d.return}if(Vn=t,Sn=t=ps(t.current,null),Kn=Pr=s,On=0,wa=null,ju=jl=zs=0,vr=va=null,js!==null){for(s=0;s<js.length;s++)if(d=js[s],g=d.interleaved,g!==null){d.interleaved=null;var E=g.next,T=d.pending;if(T!==null){var O=T.next;T.next=E,g.next=O}d.pending=g}js=null}return t}function O0(t,s){do{var d=Sn;try{if(su(),Il.current=kl,Nl){for(var g=cn.memoizedState;g!==null;){var E=g.queue;E!==null&&(E.pending=null),g=g.next}Nl=!1}if(Vs=0,Fn=Pn=cn=null,ha=!1,pa=0,Bu.current=null,d===null||d.return===null){On=1,wa=s,Sn=null;break}e:{var T=t,O=d.return,H=d,X=s;if(s=Kn,H.flags|=32768,X!==null&&typeof X=="object"&&typeof X.then=="function"){var de=X,Ee=H,Te=Ee.tag;if(!(Ee.mode&1)&&(Te===0||Te===11||Te===15)){var ve=Ee.alternate;ve?(Ee.updateQueue=ve.updateQueue,Ee.memoizedState=ve.memoizedState,Ee.lanes=ve.lanes):(Ee.updateQueue=null,Ee.memoizedState=null)}var Xe=i0(O);if(Xe!==null){Xe.flags&=-257,s0(Xe,O,H,T,s),Xe.mode&1&&r0(T,de,s),s=Xe,X=de;var Ze=s.updateQueue;if(Ze===null){var Qe=new Set;Qe.add(X),s.updateQueue=Qe}else Ze.add(X);break e}else{if(!(s&1)){r0(T,de,s),Xu();break e}X=Error(a(426))}}else if(rn&&H.mode&1){var En=i0(O);if(En!==null){!(En.flags&65536)&&(En.flags|=256),s0(En,O,H,T,s),ru(Eo(X,H));break e}}T=X=Eo(X,H),On!==4&&(On=2),va===null?va=[T]:va.push(T),T=O;do{switch(T.tag){case 3:T.flags|=65536,s&=-s,T.lanes|=s;var ie=t0(T,X,s);Nh(T,ie);break e;case 1:H=X;var Z=T.type,se=T.stateNode;if(!(T.flags&128)&&(typeof Z.getDerivedStateFromError=="function"||se!==null&&typeof se.componentDidCatch=="function"&&(us===null||!us.has(se)))){T.flags|=65536,s&=-s,T.lanes|=s;var Pe=n0(T,H,s);Nh(T,Pe);break e}}T=T.return}while(T!==null)}L0(d)}catch(et){s=et,Sn===d&&d!==null&&(Sn=d=d.return);continue}break}while(!0)}function D0(){var t=Bl.current;return Bl.current=kl,t===null?kl:t}function Xu(){(On===0||On===3||On===2)&&(On=4),Vn===null||!(zs&268435455)&&!(jl&268435455)||hs(Vn,Kn)}function Hl(t,s){var d=Ft;Ft|=2;var g=D0();(Vn!==t||Kn!==s)&&(Mi=null,Ws(t,s));do try{kx();break}catch(E){O0(t,E)}while(!0);if(su(),Ft=d,Bl.current=g,Sn!==null)throw Error(a(261));return Vn=null,Kn=0,On}function kx(){for(;Sn!==null;)M0(Sn)}function Px(){for(;Sn!==null&&!je();)M0(Sn)}function M0(t){var s=F0(t.alternate,t,Pr);t.memoizedProps=t.pendingProps,s===null?L0(t):Sn=s,Bu.current=null}function L0(t){var s=t;do{var d=s.alternate;if(t=s.return,s.flags&32768){if(d=Sx(d,s),d!==null){d.flags&=32767,Sn=d;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{On=6,Sn=null;return}}else if(d=Ax(d,s,Pr),d!==null){Sn=d;return}if(s=s.sibling,s!==null){Sn=s;return}Sn=s=t}while(s!==null);On===0&&(On=5)}function Hs(t,s,d){var g=Tt,E=Wr.transition;try{Wr.transition=null,Tt=1,Ox(t,s,d,g)}finally{Wr.transition=E,Tt=g}return null}function Ox(t,s,d,g){do To();while(ds!==null);if(Ft&6)throw Error(a(327));d=t.finishedWork;var E=t.finishedLanes;if(d===null)return null;if(t.finishedWork=null,t.finishedLanes=0,d===t.current)throw Error(a(177));t.callbackNode=null,t.callbackPriority=0;var T=d.lanes|d.childLanes;if(tt(t,T),t===Vn&&(Sn=Vn=null,Kn=0),!(d.subtreeFlags&2064)&&!(d.flags&2064)||Vl||(Vl=!0,V0(Bt,function(){return To(),null})),T=(d.flags&15990)!==0,d.subtreeFlags&15990||T){T=Wr.transition,Wr.transition=null;var O=Tt;Tt=1;var H=Ft;Ft|=4,Bu.current=null,Ix(t,d),T0(d,t),tr(Xc),ci=!!Gc,Xc=Gc=null,t.current=d,Nx(d),Wn(),Ft=H,Tt=O,Wr.transition=T}else t.current=d;if(Vl&&(Vl=!1,ds=t,zl=E),T=t.pendingLanes,T===0&&(us=null),Ot(d.stateNode),Cr(t,Vt()),s!==null)for(g=t.onRecoverableError,d=0;d<s.length;d++)E=s[d],g(E.value,{componentStack:E.stack,digest:E.digest});if(Fl)throw Fl=!1,t=Vu,Vu=null,t;return zl&1&&t.tag!==0&&To(),T=t.pendingLanes,T&1?t===zu?Ca++:(Ca=0,zu=t):Ca=0,os(),null}function To(){if(ds!==null){var t=Qa(zl),s=Wr.transition,d=Tt;try{if(Wr.transition=null,Tt=16>t?16:t,ds===null)var g=!1;else{if(t=ds,ds=null,zl=0,Ft&6)throw Error(a(331));var E=Ft;for(Ft|=4,Ke=t.current;Ke!==null;){var T=Ke,O=T.child;if(Ke.flags&16){var H=T.deletions;if(H!==null){for(var X=0;X<H.length;X++){var de=H[X];for(Ke=de;Ke!==null;){var Ee=Ke;switch(Ee.tag){case 0:case 11:case 15:ya(8,Ee,T)}var Te=Ee.child;if(Te!==null)Te.return=Ee,Ke=Te;else for(;Ke!==null;){Ee=Ke;var ve=Ee.sibling,Xe=Ee.return;if(C0(Ee),Ee===de){Ke=null;break}if(ve!==null){ve.return=Xe,Ke=ve;break}Ke=Xe}}}var Ze=T.alternate;if(Ze!==null){var Qe=Ze.child;if(Qe!==null){Ze.child=null;do{var En=Qe.sibling;Qe.sibling=null,Qe=En}while(Qe!==null)}}Ke=T}}if(T.subtreeFlags&2064&&O!==null)O.return=T,Ke=O;else e:for(;Ke!==null;){if(T=Ke,T.flags&2048)switch(T.tag){case 0:case 11:case 15:ya(9,T,T.return)}var ie=T.sibling;if(ie!==null){ie.return=T.return,Ke=ie;break e}Ke=T.return}}var Z=t.current;for(Ke=Z;Ke!==null;){O=Ke;var se=O.child;if(O.subtreeFlags&2064&&se!==null)se.return=O,Ke=se;else e:for(O=Z;Ke!==null;){if(H=Ke,H.flags&2048)try{switch(H.tag){case 0:case 11:case 15:Ll(9,H)}}catch(et){gn(H,H.return,et)}if(H===O){Ke=null;break e}var Pe=H.sibling;if(Pe!==null){Pe.return=H.return,Ke=Pe;break e}Ke=H.return}}if(Ft=E,os(),St&&typeof St.onPostCommitFiberRoot=="function")try{St.onPostCommitFiberRoot(Rt,t)}catch{}g=!0}return g}finally{Tt=d,Wr.transition=s}}return!1}function B0(t,s,d){s=Eo(d,s),s=t0(t,s,1),t=ls(t,s,1),s=fr(),t!==null&&(F(t,1,s),Cr(t,s))}function gn(t,s,d){if(t.tag===3)B0(t,t,d);else for(;s!==null;){if(s.tag===3){B0(s,t,d);break}else if(s.tag===1){var g=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(us===null||!us.has(g))){t=Eo(d,t),t=n0(s,t,1),s=ls(s,t,1),t=fr(),s!==null&&(F(s,1,t),Cr(s,t));break}}s=s.return}}function Dx(t,s,d){var g=t.pingCache;g!==null&&g.delete(s),s=fr(),t.pingedLanes|=t.suspendedLanes&d,Vn===t&&(Kn&d)===d&&(On===4||On===3&&(Kn&130023424)===Kn&&500>Vt()-Fu?Ws(t,0):ju|=d),Cr(t,s)}function j0(t,s){s===0&&(t.mode&1?(s=to,to<<=1,!(to&130023424)&&(to=4194304)):s=1);var d=fr();t=Pi(t,s),t!==null&&(F(t,s,d),Cr(t,d))}function Mx(t){var s=t.memoizedState,d=0;s!==null&&(d=s.retryLane),j0(t,d)}function Lx(t,s){var d=0;switch(t.tag){case 13:var g=t.stateNode,E=t.memoizedState;E!==null&&(d=E.retryLane);break;case 19:g=t.stateNode;break;default:throw Error(a(314))}g!==null&&g.delete(s),j0(t,d)}var F0;F0=function(t,s,d){if(t!==null)if(t.memoizedProps!==s.pendingProps||xr.current)wr=!0;else{if(!(t.lanes&d)&&!(s.flags&128))return wr=!1,bx(t,s,d);wr=!!(t.flags&131072)}else wr=!1,rn&&s.flags&1048576&&yh(s,wl,s.index);switch(s.lanes=0,s.tag){case 2:var g=s.type;Dl(t,s),t=s.pendingProps;var E=po(s,nr.current);vo(s,d),E=mu(null,s,g,t,E,d);var T=xu();return s.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,yr(g)?(T=!0,ml(s)):T=!1,s.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,cu(s),E.updater=Pl,s.stateNode=E,E._reactInternals=s,bu(s,g,t,d),s=Iu(null,s,g,!0,T,d)):(s.tag=0,rn&&T&&Jc(s),dr(null,s,E,d),s=s.child),s;case 16:g=s.elementType;e:{switch(Dl(t,s),t=s.pendingProps,E=g._init,g=E(g._payload),s.type=g,E=s.tag=jx(g),t=ei(g,t),E){case 0:s=Tu(null,s,g,t,d);break e;case 1:s=d0(null,s,g,t,d);break e;case 11:s=o0(null,s,g,t,d);break e;case 14:s=a0(null,s,g,ei(g.type,t),d);break e}throw Error(a(306,g,""))}return s;case 0:return g=s.type,E=s.pendingProps,E=s.elementType===g?E:ei(g,E),Tu(t,s,g,E,d);case 1:return g=s.type,E=s.pendingProps,E=s.elementType===g?E:ei(g,E),d0(t,s,g,E,d);case 3:e:{if(f0(s),t===null)throw Error(a(387));g=s.pendingProps,T=s.memoizedState,E=T.element,Ih(t,s),Sl(s,g,null,d);var O=s.memoizedState;if(g=O.element,T.isDehydrated)if(T={element:g,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},s.updateQueue.baseState=T,s.memoizedState=T,s.flags&256){E=Eo(Error(a(423)),s),s=h0(t,s,g,d,E);break e}else if(g!==E){E=Eo(Error(a(424)),s),s=h0(t,s,g,d,E);break e}else for(kr=rs(s.stateNode.containerInfo.firstChild),Rr=s,rn=!0,Jr=null,d=Sh(s,null,g,d),s.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(xo(),g===E){s=Di(t,s,d);break e}dr(t,s,g,d)}s=s.child}return s;case 5:return Rh(s),t===null&&nu(s),g=s.type,E=s.pendingProps,T=t!==null?t.memoizedProps:null,O=E.children,Yc(g,E)?O=null:T!==null&&Yc(g,T)&&(s.flags|=32),u0(t,s),dr(t,s,O,d),s.child;case 6:return t===null&&nu(s),null;case 13:return p0(t,s,d);case 4:return uu(s,s.stateNode.containerInfo),g=s.pendingProps,t===null?s.child=yo(s,null,g,d):dr(t,s,g,d),s.child;case 11:return g=s.type,E=s.pendingProps,E=s.elementType===g?E:ei(g,E),o0(t,s,g,E,d);case 7:return dr(t,s,s.pendingProps,d),s.child;case 8:return dr(t,s,s.pendingProps.children,d),s.child;case 12:return dr(t,s,s.pendingProps.children,d),s.child;case 10:e:{if(g=s.type._context,E=s.pendingProps,T=s.memoizedProps,O=E.value,Qt(El,g._currentValue),g._currentValue=O,T!==null)if(ee(T.value,O)){if(T.children===E.children&&!xr.current){s=Di(t,s,d);break e}}else for(T=s.child,T!==null&&(T.return=s);T!==null;){var H=T.dependencies;if(H!==null){O=T.child;for(var X=H.firstContext;X!==null;){if(X.context===g){if(T.tag===1){X=Oi(-1,d&-d),X.tag=2;var de=T.updateQueue;if(de!==null){de=de.shared;var Ee=de.pending;Ee===null?X.next=X:(X.next=Ee.next,Ee.next=X),de.pending=X}}T.lanes|=d,X=T.alternate,X!==null&&(X.lanes|=d),au(T.return,d,s),H.lanes|=d;break}X=X.next}}else if(T.tag===10)O=T.type===s.type?null:T.child;else if(T.tag===18){if(O=T.return,O===null)throw Error(a(341));O.lanes|=d,H=O.alternate,H!==null&&(H.lanes|=d),au(O,d,s),O=T.sibling}else O=T.child;if(O!==null)O.return=T;else for(O=T;O!==null;){if(O===s){O=null;break}if(T=O.sibling,T!==null){T.return=O.return,O=T;break}O=O.return}T=O}dr(t,s,E.children,d),s=s.child}return s;case 9:return E=s.type,g=s.pendingProps.children,vo(s,d),E=zr(E),g=g(E),s.flags|=1,dr(t,s,g,d),s.child;case 14:return g=s.type,E=ei(g,s.pendingProps),E=ei(g.type,E),a0(t,s,g,E,d);case 15:return l0(t,s,s.type,s.pendingProps,d);case 17:return g=s.type,E=s.pendingProps,E=s.elementType===g?E:ei(g,E),Dl(t,s),s.tag=1,yr(g)?(t=!0,ml(s)):t=!1,vo(s,d),Jh(s,g,E),bu(s,g,E,d),Iu(null,s,g,!0,t,d);case 19:return m0(t,s,d);case 22:return c0(t,s,d)}throw Error(a(156,s.tag))};function V0(t,s){return it(t,s)}function Bx(t,s,d,g){this.tag=t,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hr(t,s,d,g){return new Bx(t,s,d,g)}function Yu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function jx(t){if(typeof t=="function")return Yu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ke)return 11;if(t===Q)return 14}return 2}function ps(t,s){var d=t.alternate;return d===null?(d=Hr(t.tag,s,t.key,t.mode),d.elementType=t.elementType,d.type=t.type,d.stateNode=t.stateNode,d.alternate=t,t.alternate=d):(d.pendingProps=s,d.type=t.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=t.flags&14680064,d.childLanes=t.childLanes,d.lanes=t.lanes,d.child=t.child,d.memoizedProps=t.memoizedProps,d.memoizedState=t.memoizedState,d.updateQueue=t.updateQueue,s=t.dependencies,d.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},d.sibling=t.sibling,d.index=t.index,d.ref=t.ref,d}function Gl(t,s,d,g,E,T){var O=2;if(g=t,typeof t=="function")Yu(t)&&(O=1);else if(typeof t=="string")O=5;else e:switch(t){case q:return Gs(d.children,E,T,s);case ue:O=8,E|=8;break;case $:return t=Hr(12,d,s,E|2),t.elementType=$,t.lanes=T,t;case De:return t=Hr(13,d,s,E),t.elementType=De,t.lanes=T,t;case Se:return t=Hr(19,d,s,E),t.elementType=Se,t.lanes=T,t;case pe:return Xl(d,E,T,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ae:O=10;break e;case Oe:O=9;break e;case ke:O=11;break e;case Q:O=14;break e;case Le:O=16,g=null;break e}throw Error(a(130,t==null?t:typeof t,""))}return s=Hr(O,d,s,E),s.elementType=t,s.type=g,s.lanes=T,s}function Gs(t,s,d,g){return t=Hr(7,t,g,s),t.lanes=d,t}function Xl(t,s,d,g){return t=Hr(22,t,g,s),t.elementType=pe,t.lanes=d,t.stateNode={isHidden:!1},t}function Ku(t,s,d){return t=Hr(6,t,null,s),t.lanes=d,t}function $u(t,s,d){return s=Hr(4,t.children!==null?t.children:[],t.key,s),s.lanes=d,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function Fx(t,s,d,g,E){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=re(0),this.expirationTimes=re(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=re(0),this.identifierPrefix=g,this.onRecoverableError=E,this.mutableSourceEagerHydrationData=null}function Zu(t,s,d,g,E,T,O,H,X){return t=new Fx(t,s,d,H,X),s===1?(s=1,T===!0&&(s|=8)):s=0,T=Hr(3,null,null,s),t.current=T,T.stateNode=t,T.memoizedState={element:g,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},cu(T),t}function Vx(t,s,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oe,key:g==null?null:""+g,children:t,containerInfo:s,implementation:d}}function z0(t){if(!t)return ss;t=t._reactInternals;e:{if(Qn(t)!==t||t.tag!==1)throw Error(a(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(yr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(a(171))}if(t.tag===1){var d=t.type;if(yr(d))return gh(t,d,s)}return s}function U0(t,s,d,g,E,T,O,H,X){return t=Zu(d,g,!0,t,E,T,O,H,X),t.context=z0(null),d=t.current,g=fr(),E=fs(d),T=Oi(g,E),T.callback=s??null,ls(d,T,E),t.current.lanes=E,F(t,E,g),Cr(t,g),t}function Yl(t,s,d,g){var E=s.current,T=fr(),O=fs(E);return d=z0(d),s.context===null?s.context=d:s.pendingContext=d,s=Oi(T,O),s.payload={element:t},g=g===void 0?null:g,g!==null&&(s.callback=g),t=ls(E,s,O),t!==null&&(ri(t,E,O,T),Al(t,E,O)),O}function Kl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function W0(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var d=t.retryLane;t.retryLane=d!==0&&d<s?d:s}}function qu(t,s){W0(t,s),(t=t.alternate)&&W0(t,s)}function zx(){return null}var H0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Qu(t){this._internalRoot=t}$l.prototype.render=Qu.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(a(409));Yl(t,s,null,null)},$l.prototype.unmount=Qu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Us(function(){Yl(null,t,null,null)}),s[Ni]=null}};function $l(t){this._internalRoot=t}$l.prototype.unstable_scheduleHydration=function(t){if(t){var s=Zt();t={blockedOn:null,target:t,priority:s};for(var d=0;d<Hn.length&&s!==0&&s<Hn[d].priority;d++);Hn.splice(d,0,t),d===0&&el(t)}};function Ju(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function G0(){}function Ux(t,s,d,g,E){if(E){if(typeof g=="function"){var T=g;g=function(){var de=Kl(O);T.call(de)}}var O=U0(s,g,t,0,null,!1,!1,"",G0);return t._reactRootContainer=O,t[Ni]=O.current,sa(t.nodeType===8?t.parentNode:t),Us(),O}for(;E=t.lastChild;)t.removeChild(E);if(typeof g=="function"){var H=g;g=function(){var de=Kl(X);H.call(de)}}var X=Zu(t,0,!1,null,null,!1,!1,"",G0);return t._reactRootContainer=X,t[Ni]=X.current,sa(t.nodeType===8?t.parentNode:t),Us(function(){Yl(s,X,d,g)}),X}function ql(t,s,d,g,E){var T=d._reactRootContainer;if(T){var O=T;if(typeof E=="function"){var H=E;E=function(){var X=Kl(O);H.call(X)}}Yl(s,O,t,E)}else O=Ux(d,s,t,E,g);return Kl(O)}no=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var d=$t(s.pendingLanes);d!==0&&(hn(s,d|1),Cr(s,Vt()),!(Ft&6)&&(So=Vt()+500,os()))}break;case 13:Us(function(){var g=Pi(t,1);if(g!==null){var E=fr();ri(g,t,1,E)}}),qu(t,1)}},er=function(t){if(t.tag===13){var s=Pi(t,134217728);if(s!==null){var d=fr();ri(s,t,134217728,d)}qu(t,134217728)}},rt=function(t){if(t.tag===13){var s=fs(t),d=Pi(t,s);if(d!==null){var g=fr();ri(d,t,s,g)}qu(t,s)}},Zt=function(){return Tt},Go=function(t,s){var d=Tt;try{return Tt=t,s()}finally{Tt=d}},Un=function(t,s,d){switch(s){case"input":if(xt(t,d),s=d.name,d.type==="radio"&&s!=null){for(d=t;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<d.length;s++){var g=d[s];if(g!==t&&g.form===t.form){var E=pl(g);if(!E)throw Error(a(90));me(g),xt(g,E)}}}break;case"textarea":xe(t,d);break;case"select":s=d.value,s!=null&&Ie(t,!!d.multiple,s,!1)}},Wi=Hu,on=Us;var Wx={usingClientEntryPoint:!1,Events:[la,fo,pl,Ui,qn,Hu]},Ea={findFiberByHostInstance:Ds,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Hx={bundleType:Ea.bundleType,version:Ea.version,rendererPackageName:Ea.rendererPackageName,rendererConfig:Ea.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:J.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=We(t),t===null?null:t.stateNode},findFiberByHostInstance:Ea.findFiberByHostInstance||zx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ql.isDisabled&&Ql.supportsFiber)try{Rt=Ql.inject(Hx),St=Ql}catch{}}return Er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wx,Er.createPortal=function(t,s){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ju(s))throw Error(a(200));return Vx(t,s,null,d)},Er.createRoot=function(t,s){if(!Ju(t))throw Error(a(299));var d=!1,g="",E=H0;return s!=null&&(s.unstable_strictMode===!0&&(d=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onRecoverableError!==void 0&&(E=s.onRecoverableError)),s=Zu(t,1,!1,null,null,d,!1,g,E),t[Ni]=s.current,sa(t.nodeType===8?t.parentNode:t),new Qu(s)},Er.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=We(s),t=t===null?null:t.stateNode,t},Er.flushSync=function(t){return Us(t)},Er.hydrate=function(t,s,d){if(!Zl(s))throw Error(a(200));return ql(null,t,s,!0,d)},Er.hydrateRoot=function(t,s,d){if(!Ju(t))throw Error(a(405));var g=d!=null&&d.hydratedSources||null,E=!1,T="",O=H0;if(d!=null&&(d.unstable_strictMode===!0&&(E=!0),d.identifierPrefix!==void 0&&(T=d.identifierPrefix),d.onRecoverableError!==void 0&&(O=d.onRecoverableError)),s=U0(s,null,t,1,d??null,E,!1,T,O),t[Ni]=s.current,sa(t),g)for(t=0;t<g.length;t++)d=g[t],E=d._getVersion,E=E(d._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[d,E]:s.mutableSourceEagerHydrationData.push(d,E);return new $l(s)},Er.render=function(t,s,d){if(!Zl(s))throw Error(a(200));return ql(null,t,s,!1,d)},Er.unmountComponentAtNode=function(t){if(!Zl(t))throw Error(a(40));return t._reactRootContainer?(Us(function(){ql(null,null,t,!1,function(){t._reactRootContainer=null,t[Ni]=null})}),!0):!1},Er.unstable_batchedUpdates=Hu,Er.unstable_renderSubtreeIntoContainer=function(t,s,d,g){if(!Zl(d))throw Error(a(200));if(t==null||t._reactInternals===void 0)throw Error(a(38));return ql(t,s,d,!1,g)},Er.version="18.3.1-next-f1338f8080-20240426",Er}var J0;function Qx(){if(J0)return nd.exports;J0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(o){console.error(o)}}return r(),nd.exports=qx(),nd.exports}var e1;function Jx(){if(e1)return ec;e1=1;var r=Qx();return ec.createRoot=r.createRoot,ec.hydrateRoot=r.hydrateRoot,ec}var e2=Jx();const gr=_.createContext(null),t2=({children:r})=>{const[o,a]=_.useState(null),[f,p]=_.useState(null),[x,y]=_.useState(null),[A,v]=_.useState(null),[b,S]=_.useState(!1),[I,R]=_.useState(null),D=async()=>{const V=localStorage.getItem("access_token");if(V)try{const W=await fetch(window.server_url+"/load_user",{headers:{Authorization:`Bearer ${V}`}});if(W.ok){S(!0);const z=await W.json();console.log("USER DATA:",z),a(z.username),p(z.profile),R(z.permissions),console.log("PERMISSIONS:",z.permissions)}else console.log("TOKEN INVALID"),localStorage.removeItem("access_token"),a(null),p(null),y(null),v(null),S(!1)}catch(W){console.log("ERROR:",W)}};_.useEffect(()=>{D()},[]);const L=V=>{a(V.username),y(V.access_token),v(V.refresh_token),R(V.permissions),console.log("PRE SAVE USERNAME:",V.username),localStorage.setItem("user",V.username),localStorage.setItem("access_token",V.access_token),localStorage.setItem("refresh_token",V.refresh_token)},B=async(V,W)=>{const z=await fetch(window.server_url+"/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:V,password:W})});if(z.ok){const J=await z.json();console.log("SIGNED UP, userData:",J)}},j=()=>{a(null),p(null),y(null),v(null),S(!1)};return w.jsx(gr.Provider,{value:{user:o,login:L,signup:B,logout:j,userProfile:f,checkAuth:D,permissions:I},children:r})};var Nd=function(r,o){return Nd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,f){a.__proto__=f}||function(a,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(a[p]=f[p])},Nd(r,o)};function n2(r,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");Nd(r,o);function a(){this.constructor=r}r.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}var $n=function(){return $n=Object.assign||function(o){for(var a,f=1,p=arguments.length;f<p;f++){a=arguments[f];for(var x in a)Object.prototype.hasOwnProperty.call(a,x)&&(o[x]=a[x])}return o},$n.apply(this,arguments)};var sd,t1;function r2(){if(t1)return sd;t1=1;var r=!1,o,a,f,p,x,y,A,v,b,S,I,R,D,L,B;function j(){if(!r){r=!0;var W=navigator.userAgent,z=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(W),J=/(Mac OS X)|(Windows)|(Linux)/.exec(W);if(R=/\b(iPhone|iP[ao]d)/.exec(W),D=/\b(iP[ao]d)/.exec(W),S=/Android/i.exec(W),L=/FBAN\/\w+;/i.exec(W),B=/Mobile/i.exec(W),I=!!/Win64/.exec(W),z){o=z[1]?parseFloat(z[1]):z[5]?parseFloat(z[5]):NaN,o&&document&&document.documentMode&&(o=document.documentMode);var ne=/(?:Trident\/(\d+.\d+))/.exec(W);y=ne?parseFloat(ne[1])+4:o,a=z[2]?parseFloat(z[2]):NaN,f=z[3]?parseFloat(z[3]):NaN,p=z[4]?parseFloat(z[4]):NaN,p?(z=/(?:Chrome\/(\d+\.\d+))/.exec(W),x=z&&z[1]?parseFloat(z[1]):NaN):x=NaN}else o=a=f=x=p=NaN;if(J){if(J[1]){var oe=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(W);A=oe?parseFloat(oe[1].replace("_",".")):!0}else A=!1;v=!!J[2],b=!!J[3]}else A=v=b=!1}}var V={ie:function(){return j()||o},ieCompatibilityMode:function(){return j()||y>o},ie64:function(){return V.ie()&&I},firefox:function(){return j()||a},opera:function(){return j()||f},webkit:function(){return j()||p},safari:function(){return V.webkit()},chrome:function(){return j()||x},windows:function(){return j()||v},osx:function(){return j()||A},linux:function(){return j()||b},iphone:function(){return j()||R},mobile:function(){return j()||R||D||S||B},nativeApp:function(){return j()||L},android:function(){return j()||S},ipad:function(){return j()||D}};return sd=V,sd}var od,n1;function i2(){if(n1)return od;n1=1;var r=!!(typeof window<"u"&&window.document&&window.document.createElement),o={canUseDOM:r,canUseWorkers:typeof Worker<"u",canUseEventListeners:r&&!!(window.addEventListener||window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};return od=o,od}var ad,r1;function s2(){if(r1)return ad;r1=1;var r=i2(),o;r.canUseDOM&&(o=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function a(f,p){if(!r.canUseDOM||p&&!("addEventListener"in document))return!1;var x="on"+f,y=x in document;if(!y){var A=document.createElement("div");A.setAttribute(x,"return;"),y=typeof A[x]=="function"}return!y&&o&&f==="wheel"&&(y=document.implementation.hasFeature("Events.wheel","3.0")),y}return ad=a,ad}var ld,i1;function o2(){if(i1)return ld;i1=1;var r=r2(),o=s2(),a=10,f=40,p=800;function x(y){var A=0,v=0,b=0,S=0;return"detail"in y&&(v=y.detail),"wheelDelta"in y&&(v=-y.wheelDelta/120),"wheelDeltaY"in y&&(v=-y.wheelDeltaY/120),"wheelDeltaX"in y&&(A=-y.wheelDeltaX/120),"axis"in y&&y.axis===y.HORIZONTAL_AXIS&&(A=v,v=0),b=A*a,S=v*a,"deltaY"in y&&(S=y.deltaY),"deltaX"in y&&(b=y.deltaX),(b||S)&&y.deltaMode&&(y.deltaMode==1?(b*=f,S*=f):(b*=p,S*=p)),b&&!A&&(A=b<1?-1:1),S&&!v&&(v=S<1?-1:1),{spinX:A,spinY:v,pixelX:b,pixelY:S}}return x.getEventType=function(){return r.firefox()?"DOMMouseScroll":o("wheel")?"wheel":"mousewheel"},ld=x,ld}var cd,s1;function a2(){return s1||(s1=1,cd=o2()),cd}var l2=a2();const c2=zp(l2);function u2(r,o,a,f,p,x){x===void 0&&(x=0);var y=Mo(r,o,x),A=y.width,v=y.height,b=Math.min(A,a),S=Math.min(v,f);return b>S*p?{width:S*p,height:S}:{width:b,height:b/p}}function d2(r){return r.width>r.height?r.width/r.naturalWidth:r.height/r.naturalHeight}function Aa(r,o,a,f,p){p===void 0&&(p=0);var x=Mo(o.width,o.height,p),y=x.width,A=x.height;return{x:o1(r.x,y,a.width,f),y:o1(r.y,A,a.height,f)}}function o1(r,o,a,f){var p=o*f/2-a/2;return Tc(r,-p,p)}function a1(r,o){return Math.sqrt(Math.pow(r.y-o.y,2)+Math.pow(r.x-o.x,2))}function l1(r,o){return Math.atan2(o.y-r.y,o.x-r.x)*180/Math.PI}function f2(r,o,a,f,p,x,y){x===void 0&&(x=0),y===void 0&&(y=!0);var A=y?h2:p2,v=Mo(o.width,o.height,x),b=Mo(o.naturalWidth,o.naturalHeight,x),S={x:A(100,((v.width-a.width/p)/2-r.x/p)/v.width*100),y:A(100,((v.height-a.height/p)/2-r.y/p)/v.height*100),width:A(100,a.width/v.width*100/p),height:A(100,a.height/v.height*100/p)},I=Math.round(A(b.width,S.width*b.width/100)),R=Math.round(A(b.height,S.height*b.height/100)),D=b.width>=b.height*f,L=D?{width:Math.round(R*f),height:R}:{width:I,height:Math.round(I/f)},B=$n($n({},L),{x:Math.round(A(b.width-L.width,S.x*b.width/100)),y:Math.round(A(b.height-L.height,S.y*b.height/100))});return{croppedAreaPercentages:S,croppedAreaPixels:B}}function h2(r,o){return Math.min(r,Math.max(0,o))}function p2(r,o){return o}function g2(r,o,a,f,p,x){var y=Mo(o.width,o.height,a),A=Tc(f.width/y.width*(100/r.width),p,x),v={x:A*y.width/2-f.width/2-y.width*A*(r.x/100),y:A*y.height/2-f.height/2-y.height*A*(r.y/100)};return{crop:v,zoom:A}}function m2(r,o,a){var f=d2(o);return a.height>a.width?a.height/(r.height*f):a.width/(r.width*f)}function x2(r,o,a,f,p,x){a===void 0&&(a=0);var y=Mo(o.naturalWidth,o.naturalHeight,a),A=Tc(m2(r,o,f),p,x),v=f.height>f.width?f.height/r.height:f.width/r.width,b={x:((y.width-r.width)/2-r.x)*v,y:((y.height-r.height)/2-r.y)*v};return{crop:b,zoom:A}}function c1(r,o){return{x:(o.x+r.x)/2,y:(o.y+r.y)/2}}function y2(r){return r*Math.PI/180}function Mo(r,o,a){var f=y2(a);return{width:Math.abs(Math.cos(f)*r)+Math.abs(Math.sin(f)*o),height:Math.abs(Math.sin(f)*r)+Math.abs(Math.cos(f)*o)}}function Tc(r,o,a){return Math.min(Math.max(r,o),a)}function tc(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return r.filter(function(a){return typeof a=="string"&&a.length>0}).join(" ").trim()}var w2=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,v2=1,C2=3,E2=1,of=function(r){n2(o,r);function o(){var a=r!==null&&r.apply(this,arguments)||this;return a.imageRef=_.createRef(),a.videoRef=_.createRef(),a.containerPosition={x:0,y:0},a.containerRef=null,a.styleRef=null,a.containerRect=null,a.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},a.dragStartPosition={x:0,y:0},a.dragStartCrop={x:0,y:0},a.gestureZoomStart=0,a.gestureRotationStart=0,a.isTouching=!1,a.lastPinchDistance=0,a.lastPinchRotation=0,a.rafDragTimeout=null,a.rafPinchTimeout=null,a.wheelTimer=null,a.currentDoc=typeof document<"u"?document:null,a.currentWindow=typeof window<"u"?window:null,a.resizeObserver=null,a.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},a.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!a.containerRef)){var f=!0;a.resizeObserver=new window.ResizeObserver(function(p){if(f){f=!1;return}a.computeSizes()}),a.resizeObserver.observe(a.containerRef)}},a.preventZoomSafari=function(f){return f.preventDefault()},a.cleanEvents=function(){a.currentDoc&&(a.currentDoc.removeEventListener("mousemove",a.onMouseMove),a.currentDoc.removeEventListener("mouseup",a.onDragStopped),a.currentDoc.removeEventListener("touchmove",a.onTouchMove),a.currentDoc.removeEventListener("touchend",a.onDragStopped),a.currentDoc.removeEventListener("gesturemove",a.onGestureMove),a.currentDoc.removeEventListener("gestureend",a.onGestureEnd),a.currentDoc.removeEventListener("scroll",a.onScroll))},a.clearScrollEvent=function(){a.containerRef&&a.containerRef.removeEventListener("wheel",a.onWheel),a.wheelTimer&&clearTimeout(a.wheelTimer)},a.onMediaLoad=function(){var f=a.computeSizes();f&&(a.emitCropData(),a.setInitialCrop(f)),a.props.onMediaLoaded&&a.props.onMediaLoaded(a.mediaSize)},a.setInitialCrop=function(f){if(a.props.initialCroppedAreaPercentages){var p=g2(a.props.initialCroppedAreaPercentages,a.mediaSize,a.props.rotation,f,a.props.minZoom,a.props.maxZoom),x=p.crop,y=p.zoom;a.props.onCropChange(x),a.props.onZoomChange&&a.props.onZoomChange(y)}else if(a.props.initialCroppedAreaPixels){var A=x2(a.props.initialCroppedAreaPixels,a.mediaSize,a.props.rotation,f,a.props.minZoom,a.props.maxZoom),x=A.crop,y=A.zoom;a.props.onCropChange(x),a.props.onZoomChange&&a.props.onZoomChange(y)}},a.computeSizes=function(){var f,p,x,y,A,v,b=a.imageRef.current||a.videoRef.current;if(b&&a.containerRef){a.containerRect=a.containerRef.getBoundingClientRect(),a.saveContainerPosition();var S=a.containerRect.width/a.containerRect.height,I=((f=a.imageRef.current)===null||f===void 0?void 0:f.naturalWidth)||((p=a.videoRef.current)===null||p===void 0?void 0:p.videoWidth)||0,R=((x=a.imageRef.current)===null||x===void 0?void 0:x.naturalHeight)||((y=a.videoRef.current)===null||y===void 0?void 0:y.videoHeight)||0,D=b.offsetWidth<I||b.offsetHeight<R,L=I/R,B=void 0;if(D)switch(a.state.mediaObjectFit){default:case"contain":B=S>L?{width:a.containerRect.height*L,height:a.containerRect.height}:{width:a.containerRect.width,height:a.containerRect.width/L};break;case"horizontal-cover":B={width:a.containerRect.width,height:a.containerRect.width/L};break;case"vertical-cover":B={width:a.containerRect.height*L,height:a.containerRect.height};break}else B={width:b.offsetWidth,height:b.offsetHeight};a.mediaSize=$n($n({},B),{naturalWidth:I,naturalHeight:R}),a.props.setMediaSize&&a.props.setMediaSize(a.mediaSize);var j=a.props.cropSize?a.props.cropSize:u2(a.mediaSize.width,a.mediaSize.height,a.containerRect.width,a.containerRect.height,a.props.aspect,a.props.rotation);return(((A=a.state.cropSize)===null||A===void 0?void 0:A.height)!==j.height||((v=a.state.cropSize)===null||v===void 0?void 0:v.width)!==j.width)&&a.props.onCropSizeChange&&a.props.onCropSizeChange(j),a.setState({cropSize:j},a.recomputeCropPosition),a.props.setCropSize&&a.props.setCropSize(j),j}},a.saveContainerPosition=function(){if(a.containerRef){var f=a.containerRef.getBoundingClientRect();a.containerPosition={x:f.left,y:f.top}}},a.onMouseDown=function(f){a.currentDoc&&(f.preventDefault(),a.currentDoc.addEventListener("mousemove",a.onMouseMove),a.currentDoc.addEventListener("mouseup",a.onDragStopped),a.saveContainerPosition(),a.onDragStart(o.getMousePoint(f)))},a.onMouseMove=function(f){return a.onDrag(o.getMousePoint(f))},a.onScroll=function(f){a.currentDoc&&(f.preventDefault(),a.saveContainerPosition())},a.onTouchStart=function(f){a.currentDoc&&(a.isTouching=!0,!(a.props.onTouchRequest&&!a.props.onTouchRequest(f))&&(a.currentDoc.addEventListener("touchmove",a.onTouchMove,{passive:!1}),a.currentDoc.addEventListener("touchend",a.onDragStopped),a.saveContainerPosition(),f.touches.length===2?a.onPinchStart(f):f.touches.length===1&&a.onDragStart(o.getTouchPoint(f.touches[0]))))},a.onTouchMove=function(f){f.preventDefault(),f.touches.length===2?a.onPinchMove(f):f.touches.length===1&&a.onDrag(o.getTouchPoint(f.touches[0]))},a.onGestureStart=function(f){a.currentDoc&&(f.preventDefault(),a.currentDoc.addEventListener("gesturechange",a.onGestureMove),a.currentDoc.addEventListener("gestureend",a.onGestureEnd),a.gestureZoomStart=a.props.zoom,a.gestureRotationStart=a.props.rotation)},a.onGestureMove=function(f){if(f.preventDefault(),!a.isTouching){var p=o.getMousePoint(f),x=a.gestureZoomStart-1+f.scale;if(a.setNewZoom(x,p,{shouldUpdatePosition:!0}),a.props.onRotationChange){var y=a.gestureRotationStart+f.rotation;a.props.onRotationChange(y)}}},a.onGestureEnd=function(f){a.cleanEvents()},a.onDragStart=function(f){var p,x,y=f.x,A=f.y;a.dragStartPosition={x:y,y:A},a.dragStartCrop=$n({},a.props.crop),(x=(p=a.props).onInteractionStart)===null||x===void 0||x.call(p)},a.onDrag=function(f){var p=f.x,x=f.y;a.currentWindow&&(a.rafDragTimeout&&a.currentWindow.cancelAnimationFrame(a.rafDragTimeout),a.rafDragTimeout=a.currentWindow.requestAnimationFrame(function(){if(a.state.cropSize&&!(p===void 0||x===void 0)){var y=p-a.dragStartPosition.x,A=x-a.dragStartPosition.y,v={x:a.dragStartCrop.x+y,y:a.dragStartCrop.y+A},b=a.props.restrictPosition?Aa(v,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):v;a.props.onCropChange(b)}}))},a.onDragStopped=function(){var f,p;a.isTouching=!1,a.cleanEvents(),a.emitCropData(),(p=(f=a.props).onInteractionEnd)===null||p===void 0||p.call(f)},a.onWheel=function(f){if(a.currentWindow&&!(a.props.onWheelRequest&&!a.props.onWheelRequest(f))){f.preventDefault();var p=o.getMousePoint(f),x=c2(f).pixelY,y=a.props.zoom-x*a.props.zoomSpeed/200;a.setNewZoom(y,p,{shouldUpdatePosition:!0}),a.state.hasWheelJustStarted||a.setState({hasWheelJustStarted:!0},function(){var A,v;return(v=(A=a.props).onInteractionStart)===null||v===void 0?void 0:v.call(A)}),a.wheelTimer&&clearTimeout(a.wheelTimer),a.wheelTimer=a.currentWindow.setTimeout(function(){return a.setState({hasWheelJustStarted:!1},function(){var A,v;return(v=(A=a.props).onInteractionEnd)===null||v===void 0?void 0:v.call(A)})},250)}},a.getPointOnContainer=function(f,p){var x=f.x,y=f.y;if(!a.containerRect)throw new Error("The Cropper is not mounted");return{x:a.containerRect.width/2-(x-p.x),y:a.containerRect.height/2-(y-p.y)}},a.getPointOnMedia=function(f){var p=f.x,x=f.y,y=a.props,A=y.crop,v=y.zoom;return{x:(p+A.x)/v,y:(x+A.y)/v}},a.setNewZoom=function(f,p,x){var y=x===void 0?{}:x,A=y.shouldUpdatePosition,v=A===void 0?!0:A;if(!(!a.state.cropSize||!a.props.onZoomChange)){var b=Tc(f,a.props.minZoom,a.props.maxZoom);if(v){var S=a.getPointOnContainer(p,a.containerPosition),I=a.getPointOnMedia(S),R={x:I.x*b-S.x,y:I.y*b-S.y},D=a.props.restrictPosition?Aa(R,a.mediaSize,a.state.cropSize,b,a.props.rotation):R;a.props.onCropChange(D)}a.props.onZoomChange(b)}},a.getCropData=function(){if(!a.state.cropSize)return null;var f=a.props.restrictPosition?Aa(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;return f2(f,a.mediaSize,a.state.cropSize,a.getAspect(),a.props.zoom,a.props.rotation,a.props.restrictPosition)},a.emitCropData=function(){var f=a.getCropData();if(f){var p=f.croppedAreaPercentages,x=f.croppedAreaPixels;a.props.onCropComplete&&a.props.onCropComplete(p,x),a.props.onCropAreaChange&&a.props.onCropAreaChange(p,x)}},a.emitCropAreaChange=function(){var f=a.getCropData();if(f){var p=f.croppedAreaPercentages,x=f.croppedAreaPixels;a.props.onCropAreaChange&&a.props.onCropAreaChange(p,x)}},a.recomputeCropPosition=function(){if(a.state.cropSize){var f=a.props.restrictPosition?Aa(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;a.props.onCropChange(f),a.emitCropData()}},a.onKeyDown=function(f){var p=a.props,x=p.crop,y=p.onCropChange,A=p.keyboardStep,v=p.zoom,b=p.rotation,S=A;if(a.state.cropSize){f.shiftKey&&(S*=.2);var I=$n({},x);switch(f.key){case"ArrowUp":I.y-=S,f.preventDefault();break;case"ArrowDown":I.y+=S,f.preventDefault();break;case"ArrowLeft":I.x-=S,f.preventDefault();break;case"ArrowRight":I.x+=S,f.preventDefault();break;default:return}a.props.restrictPosition&&(I=Aa(I,a.mediaSize,a.state.cropSize,v,b)),y(I)}},a}return o.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=w2,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef))},o.prototype.componentWillUnmount=function(){var a,f;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(a=this.resizeObserver)===null||a===void 0||a.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((f=this.styleRef.parentNode)===null||f===void 0||f.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},o.prototype.componentDidUpdate=function(a){var f,p,x,y,A,v,b,S,I;a.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):a.aspect!==this.props.aspect?this.computeSizes():a.objectFit!==this.props.objectFit?this.computeSizes():a.zoom!==this.props.zoom?this.recomputeCropPosition():((f=a.cropSize)===null||f===void 0?void 0:f.height)!==((p=this.props.cropSize)===null||p===void 0?void 0:p.height)||((x=a.cropSize)===null||x===void 0?void 0:x.width)!==((y=this.props.cropSize)===null||y===void 0?void 0:y.width)?this.computeSizes():(((A=a.crop)===null||A===void 0?void 0:A.x)!==((v=this.props.crop)===null||v===void 0?void 0:v.x)||((b=a.crop)===null||b===void 0?void 0:b.y)!==((S=this.props.crop)===null||S===void 0?void 0:S.y))&&this.emitCropAreaChange(),a.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),a.video!==this.props.video&&((I=this.videoRef.current)===null||I===void 0||I.load());var R=this.getObjectFit();R!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:R},this.computeSizes)},o.prototype.getAspect=function(){var a=this.props,f=a.cropSize,p=a.aspect;return f?f.width/f.height:p},o.prototype.getObjectFit=function(){var a,f,p,x;if(this.props.objectFit==="cover"){var y=this.imageRef.current||this.videoRef.current;if(y&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var A=this.containerRect.width/this.containerRect.height,v=((a=this.imageRef.current)===null||a===void 0?void 0:a.naturalWidth)||((f=this.videoRef.current)===null||f===void 0?void 0:f.videoWidth)||0,b=((p=this.imageRef.current)===null||p===void 0?void 0:p.naturalHeight)||((x=this.videoRef.current)===null||x===void 0?void 0:x.videoHeight)||0,S=v/b;return S<A?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},o.prototype.onPinchStart=function(a){var f=o.getTouchPoint(a.touches[0]),p=o.getTouchPoint(a.touches[1]);this.lastPinchDistance=a1(f,p),this.lastPinchRotation=l1(f,p),this.onDragStart(c1(f,p))},o.prototype.onPinchMove=function(a){var f=this;if(!(!this.currentDoc||!this.currentWindow)){var p=o.getTouchPoint(a.touches[0]),x=o.getTouchPoint(a.touches[1]),y=c1(p,x);this.onDrag(y),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var A=a1(p,x),v=f.props.zoom*(A/f.lastPinchDistance);f.setNewZoom(v,y,{shouldUpdatePosition:!1}),f.lastPinchDistance=A;var b=l1(p,x),S=f.props.rotation+(b-f.lastPinchRotation);f.props.onRotationChange&&f.props.onRotationChange(S),f.lastPinchRotation=b})}},o.prototype.render=function(){var a=this,f,p=this.props,x=p.image,y=p.video,A=p.mediaProps,v=p.transform,b=p.crop,S=b.x,I=b.y,R=p.rotation,D=p.zoom,L=p.cropShape,B=p.showGrid,j=p.style,V=j.containerStyle,W=j.cropAreaStyle,z=j.mediaStyle,J=p.classes,ne=J.containerClassName,oe=J.cropAreaClassName,q=J.mediaClassName,ue=(f=this.state.mediaObjectFit)!==null&&f!==void 0?f:this.getObjectFit();return _.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(Ae){return a.containerRef=Ae},"data-testid":"container",style:V,className:tc("reactEasyCrop_Container",ne)},x?_.createElement("img",$n({alt:"",className:tc("reactEasyCrop_Image",ue==="contain"&&"reactEasyCrop_Contain",ue==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",ue==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",q)},A,{src:x,ref:this.imageRef,style:$n($n({},z),{transform:v||"translate(".concat(S,"px, ").concat(I,"px) rotate(").concat(R,"deg) scale(").concat(D,")")}),onLoad:this.onMediaLoad})):y&&_.createElement("video",$n({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:tc("reactEasyCrop_Video",ue==="contain"&&"reactEasyCrop_Contain",ue==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",ue==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",q)},A,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:$n($n({},z),{transform:v||"translate(".concat(S,"px, ").concat(I,"px) rotate(").concat(R,"deg) scale(").concat(D,")")}),controls:!1}),(Array.isArray(y)?y:[{src:y}]).map(function($){return _.createElement("source",$n({key:$.src},$))})),this.state.cropSize&&_.createElement("div",{style:$n($n({},W),{width:this.state.cropSize.width,height:this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,"data-testid":"cropper",className:tc("reactEasyCrop_CropArea",L==="round"&&"reactEasyCrop_CropAreaRound",B&&"reactEasyCrop_CropAreaGrid",oe)}))},o.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:C2,minZoom:v2,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:E2},o.getMousePoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},o.getTouchPoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},o}(_.Component),Sa={},u1;function b2(){return u1||(u1=1,Sa.createCanvas=function(r,o){return Object.assign(document.createElement("canvas"),{width:r,height:o})},Sa.createImageData=function(r,o,a){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(r);case 2:return new ImageData(r,o);default:return new ImageData(r,o,a)}},Sa.loadImage=function(r,o){return new Promise(function(a,f){const p=Object.assign(document.createElement("img"),o);function x(){p.onload=null,p.onerror=null}p.onload=function(){x(),a(p)},p.onerror=function(){x(),f(new Error('Failed to load the image "'+r+'"'))},p.src=r})}),Sa}b2();async function af(r,o){return console.log("Image source being cropped:",r),new Promise((a,f)=>{const p=new Image;p.onload=()=>{const x=document.createElement("canvas"),y=x.getContext("2d");x.width=o.width,x.height=o.height,y.drawImage(p,o.x,o.y,o.width,o.height,0,0,o.width,o.height);try{const A=x.toDataURL("image/jpeg");a(A)}catch{f(new Error("Error converting canvas to base64"))}},p.onerror=x=>f(new Error(`Image load error: ${x.message}`)),p.src=r})}const A2=({onSubmit:r,onClose:o,existingProfile:a})=>{const{user:f,userProfile:p,checkAuth:x}=_.useContext(gr),[y,A]=_.useState({name:(p==null?void 0:p.name)||"",image:null,imagePreview:p!=null&&p.image_data?`data:image/jpeg;base64,${p.image_data}`:"/assets/fakeprofile.png",croppedImage:null}),[v,b]=_.useState({x:0,y:0}),[S,I]=_.useState(1),[R,D]=_.useState(null),[L,B]=_.useState(!1),[j,V]=_.useState(!1),W=ne=>{const oe=ne.target.files[0];if(oe){const q=new FileReader;q.onload=ue=>{A($=>({...$,image:oe,imagePreview:ue.target.result})),B(!0)},q.readAsDataURL(oe)}},z=(ne,oe)=>{console.log("Cropped Area Pixels:",oe),D(oe)};async function J(ne){ne.preventDefault();let oe;if(y.croppedImage)oe=y.croppedImage.split(",")[1];else if(y.image instanceof File){const $=await y.image.arrayBuffer();oe=btoa(new Uint8Array($).reduce((Ae,Oe)=>Ae+String.fromCharCode(Oe),""))}else if(p!=null&&p.image_data)oe=p.image_data;else{console.error("No valid image provided");return}const q={name:y.name,image_data:oe};console.log("Image data (first 100 chars):",oe.substring(0,100));const ue=localStorage.getItem("access_token");try{const $=await fetch(`${window.server_url}/update_profile`,{method:"POST",headers:{Authorization:`Bearer ${ue}`,"Content-Type":"application/json"},body:JSON.stringify(q)});if(!$.ok)throw new Error("Failed to update profile");const Ae=await $.json();await x(),console.log("Profile updated successfully:",Ae),o()}catch($){console.error("Error updating profile:",$)}}return w.jsx("div",{className:"profile-creation-overlay",style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:w.jsxs("div",{className:"profile-creation-modal",style:{width:"70%",maxWidth:"500px",backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",padding:"2rem",boxShadow:"0 10px 30px rgba(20,77,255,0.15)",position:"relative",border:"1px solid rgba(20,77,255,0.1)"},children:[w.jsx("button",{onClick:o,style:{position:"absolute",top:"1.2rem",right:"1.2rem",background:"none",border:"none",fontSize:"1.8rem",cursor:"pointer",color:"#144dff",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.1)"}},children:""}),w.jsx("h2",{style:{fontSize:"clamp(1.8rem, 6vw, 2.5rem)",color:"#144dff",textAlign:"center",marginBottom:"2rem",fontWeight:"600"},children:"Your Profile"}),w.jsxs("form",{onSubmit:J,style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[w.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem"},children:[w.jsx("label",{style:{color:"#144dff",fontWeight:"500",fontSize:"1rem"},children:"Your Name"}),w.jsx("input",{type:"text",value:y.name,onChange:ne=>A({...y,name:ne.target.value}),style:{width:"100%",padding:"12px",borderRadius:"12px",border:"2px solid #e0e0e0",fontSize:"0.9rem",transition:"all 0.3s ease",backgroundColor:"rgba(255,255,255,0.9)","&:focus":{borderColor:"#144dff",outline:"none",boxShadow:"0 0 0 3px rgba(20,77,255,0.1)"}}})]}),!L&&w.jsx("div",{style:{width:"250px",height:"250px",margin:"0 auto",borderRadius:"20%",overflow:"hidden",border:"7px solid #144dff",boxShadow:"0 8px 25px rgba(20,77,255,0.2)",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.02)"}},children:w.jsx("img",{src:y.croppedImage?y.croppedImage:y.imagePreview?y.imagePreview:p!=null&&p.image_data?`data:image/jpeg;base64,${p.image_data}`:"/assets/fakeprofile.png",alt:"Profile preview",style:{width:"100%",height:"100%",objectFit:"cover"}})}),w.jsxs("div",{style:{textAlign:"center"},children:[w.jsx("input",{type:"file",id:"image-upload",accept:"image/*",onChange:W,style:{display:"none"}}),w.jsx("label",{htmlFor:"image-upload",style:{padding:"0.8rem 1.2rem",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",borderRadius:"25px",cursor:"pointer",display:"inline-block",fontSize:"0.9rem",fontWeight:"600",boxShadow:"0 4px 15px rgba(20,77,255,0.2)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Upload New Image"})]}),L&&w.jsxs("div",{style:{width:"100%",maxWidth:"300px",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",gap:"1.2rem"},children:[w.jsx("div",{style:{position:"relative",width:"250px",height:"250px",borderRadius:"20%",overflow:"hidden",border:"7px solid #144dff",boxShadow:"0 8px 25px rgba(20,77,255,0.2)"},children:w.jsx(of,{image:y.imagePreview,crop:v,zoom:S,aspect:1,onCropComplete:z,onCropChange:b,onZoomChange:I})}),w.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[w.jsx("button",{type:"button",onClick:()=>{B(!1),y.croppedImage||A(ne=>({...ne,imagePreview:null}))},style:{padding:"0.8rem 1.2rem",borderRadius:"25px",border:"2px solid #144dff",background:"white",color:"#144dff",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease","&:hover":{background:"rgba(20,77,255,0.1)"}},children:"Cancel"}),w.jsx("button",{type:"button",onClick:async()=>{try{const ne=await af(y.imagePreview,R);A(oe=>({...oe,croppedImage:ne,imagePreview:ne})),B(!1),V(!0),setTimeout(()=>V(!1),1e4)}catch(ne){console.error("Error cropping image:",ne)}},className:`save-profile-button ${j?"glow-bounce":""}`,style:{padding:"0.8rem 1.2rem",borderRadius:"25px",border:"none",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(20,77,255,0.2)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Save Cropped Image"})]})]}),w.jsx("button",{type:"submit",className:`save-profile-button ${j?"glow-bounce":""}`,style:{padding:"1rem",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",border:"none",borderRadius:"25px",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",marginTop:"1rem",boxShadow:"0 4px 15px rgba(20,77,255,0.2)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Save Profile"})]})]})})};var Ta={},d1;function S2(){if(d1)return Ta;d1=1,Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.parse=y,Ta.serialize=b;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,o=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,f=/^[\u0020-\u003A\u003D-\u007E]*$/,p=Object.prototype.toString,x=(()=>{const R=function(){};return R.prototype=Object.create(null),R})();function y(R,D){const L=new x,B=R.length;if(B<2)return L;const j=(D==null?void 0:D.decode)||S;let V=0;do{const W=R.indexOf("=",V);if(W===-1)break;const z=R.indexOf(";",V),J=z===-1?B:z;if(W>J){V=R.lastIndexOf(";",W-1)+1;continue}const ne=A(R,V,W),oe=v(R,W,ne),q=R.slice(ne,oe);if(L[q]===void 0){let ue=A(R,W+1,J),$=v(R,J,ue);const Ae=j(R.slice(ue,$));L[q]=Ae}V=J+1}while(V<B);return L}function A(R,D,L){do{const B=R.charCodeAt(D);if(B!==32&&B!==9)return D}while(++D<L);return L}function v(R,D,L){for(;D>L;){const B=R.charCodeAt(--D);if(B!==32&&B!==9)return D+1}return L}function b(R,D,L){const B=(L==null?void 0:L.encode)||encodeURIComponent;if(!r.test(R))throw new TypeError(`argument name is invalid: ${R}`);const j=B(D);if(!o.test(j))throw new TypeError(`argument val is invalid: ${D}`);let V=R+"="+j;if(!L)return V;if(L.maxAge!==void 0){if(!Number.isInteger(L.maxAge))throw new TypeError(`option maxAge is invalid: ${L.maxAge}`);V+="; Max-Age="+L.maxAge}if(L.domain){if(!a.test(L.domain))throw new TypeError(`option domain is invalid: ${L.domain}`);V+="; Domain="+L.domain}if(L.path){if(!f.test(L.path))throw new TypeError(`option path is invalid: ${L.path}`);V+="; Path="+L.path}if(L.expires){if(!I(L.expires)||!Number.isFinite(L.expires.valueOf()))throw new TypeError(`option expires is invalid: ${L.expires}`);V+="; Expires="+L.expires.toUTCString()}if(L.httpOnly&&(V+="; HttpOnly"),L.secure&&(V+="; Secure"),L.partitioned&&(V+="; Partitioned"),L.priority)switch(typeof L.priority=="string"?L.priority.toLowerCase():void 0){case"low":V+="; Priority=Low";break;case"medium":V+="; Priority=Medium";break;case"high":V+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${L.priority}`)}if(L.sameSite)switch(typeof L.sameSite=="string"?L.sameSite.toLowerCase():L.sameSite){case!0:case"strict":V+="; SameSite=Strict";break;case"lax":V+="; SameSite=Lax";break;case"none":V+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${L.sameSite}`)}return V}function S(R){if(R.indexOf("%")===-1)return R;try{return decodeURIComponent(R)}catch{return R}}function I(R){return p.call(R)==="[object Date]"}return Ta}S2();/**
 * react-router v7.0.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var f1="popstate";function T2(r={}){function o(f,p){let{pathname:x,search:y,hash:A}=f.location;return _d("",{pathname:x,search:y,hash:A},p.state&&p.state.usr||null,p.state&&p.state.key||"default")}function a(f,p){return typeof p=="string"?p:Ba(p)}return N2(o,a,null,r)}function dn(r,o){if(r===!1||r===null||typeof r>"u")throw new Error(o)}function yi(r,o){if(!r){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}function I2(){return Math.random().toString(36).substring(2,10)}function h1(r,o){return{usr:r.state,key:r.key,idx:o}}function _d(r,o,a=null,f){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof o=="string"?jo(o):o,state:a,key:o&&o.key||f||I2()}}function Ba({pathname:r="/",search:o="",hash:a=""}){return o&&o!=="?"&&(r+=o.charAt(0)==="?"?o:"?"+o),a&&a!=="#"&&(r+=a.charAt(0)==="#"?a:"#"+a),r}function jo(r){let o={};if(r){let a=r.indexOf("#");a>=0&&(o.hash=r.substring(a),r=r.substring(0,a));let f=r.indexOf("?");f>=0&&(o.search=r.substring(f),r=r.substring(0,f)),r&&(o.pathname=r)}return o}function N2(r,o,a,f={}){let{window:p=document.defaultView,v5Compat:x=!1}=f,y=p.history,A="POP",v=null,b=S();b==null&&(b=0,y.replaceState({...y.state,idx:b},""));function S(){return(y.state||{idx:null}).idx}function I(){A="POP";let j=S(),V=j==null?null:j-b;b=j,v&&v({action:A,location:B.location,delta:V})}function R(j,V){A="PUSH";let W=_d(B.location,j,V);b=S()+1;let z=h1(W,b),J=B.createHref(W);try{y.pushState(z,"",J)}catch(ne){if(ne instanceof DOMException&&ne.name==="DataCloneError")throw ne;p.location.assign(J)}x&&v&&v({action:A,location:B.location,delta:1})}function D(j,V){A="REPLACE";let W=_d(B.location,j,V);b=S();let z=h1(W,b),J=B.createHref(W);y.replaceState(z,"",J),x&&v&&v({action:A,location:B.location,delta:0})}function L(j){let V=p.location.origin!=="null"?p.location.origin:p.location.href,W=typeof j=="string"?j:Ba(j);return W=W.replace(/ $/,"%20"),dn(V,`No window.location.(origin|href) available to create URL for href: ${W}`),new URL(W,V)}let B={get action(){return A},get location(){return r(p,y)},listen(j){if(v)throw new Error("A history only accepts one active listener");return p.addEventListener(f1,I),v=j,()=>{p.removeEventListener(f1,I),v=null}},createHref(j){return o(p,j)},createURL:L,encodeLocation(j){let V=L(j);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:R,replace:D,go(j){return y.go(j)}};return B}function Up(r,o,a="/"){return _2(r,o,a,!1)}function _2(r,o,a,f){let p=typeof o=="string"?jo(o):o,x=ys(p.pathname||"/",a);if(x==null)return null;let y=Wp(r);R2(y);let A=null;for(let v=0;A==null&&v<y.length;++v){let b=z2(x);A=F2(y[v],b,f)}return A}function Wp(r,o=[],a=[],f=""){let p=(x,y,A)=>{let v={relativePath:A===void 0?x.path||"":A,caseSensitive:x.caseSensitive===!0,childrenIndex:y,route:x};v.relativePath.startsWith("/")&&(dn(v.relativePath.startsWith(f),`Absolute route path "${v.relativePath}" nested under path "${f}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(f.length));let b=ji([f,v.relativePath]),S=a.concat(v);x.children&&x.children.length>0&&(dn(x.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),Wp(x.children,o,S,b)),!(x.path==null&&!x.index)&&o.push({path:b,score:B2(b,x.index),routesMeta:S})};return r.forEach((x,y)=>{var A;if(x.path===""||!((A=x.path)!=null&&A.includes("?")))p(x,y);else for(let v of Hp(x.path))p(x,y,v)}),o}function Hp(r){let o=r.split("/");if(o.length===0)return[];let[a,...f]=o,p=a.endsWith("?"),x=a.replace(/\?$/,"");if(f.length===0)return p?[x,""]:[x];let y=Hp(f.join("/")),A=[];return A.push(...y.map(v=>v===""?x:[x,v].join("/"))),p&&A.push(...y),A.map(v=>r.startsWith("/")&&v===""?"/":v)}function R2(r){r.sort((o,a)=>o.score!==a.score?a.score-o.score:j2(o.routesMeta.map(f=>f.childrenIndex),a.routesMeta.map(f=>f.childrenIndex)))}var k2=/^:[\w-]+$/,P2=3,O2=2,D2=1,M2=10,L2=-2,p1=r=>r==="*";function B2(r,o){let a=r.split("/"),f=a.length;return a.some(p1)&&(f+=L2),o&&(f+=O2),a.filter(p=>!p1(p)).reduce((p,x)=>p+(k2.test(x)?P2:x===""?D2:M2),f)}function j2(r,o){return r.length===o.length&&r.slice(0,-1).every((f,p)=>f===o[p])?r[r.length-1]-o[o.length-1]:0}function F2(r,o,a=!1){let{routesMeta:f}=r,p={},x="/",y=[];for(let A=0;A<f.length;++A){let v=f[A],b=A===f.length-1,S=x==="/"?o:o.slice(x.length)||"/",I=mc({path:v.relativePath,caseSensitive:v.caseSensitive,end:b},S),R=v.route;if(!I&&b&&a&&!f[f.length-1].route.index&&(I=mc({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},S)),!I)return null;Object.assign(p,I.params),y.push({params:p,pathname:ji([x,I.pathname]),pathnameBase:G2(ji([x,I.pathnameBase])),route:R}),I.pathnameBase!=="/"&&(x=ji([x,I.pathnameBase]))}return y}function mc(r,o){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[a,f]=V2(r.path,r.caseSensitive,r.end),p=o.match(a);if(!p)return null;let x=p[0],y=x.replace(/(.)\/+$/,"$1"),A=p.slice(1);return{params:f.reduce((b,{paramName:S,isOptional:I},R)=>{if(S==="*"){let L=A[R]||"";y=x.slice(0,x.length-L.length).replace(/(.)\/+$/,"$1")}const D=A[R];return I&&!D?b[S]=void 0:b[S]=(D||"").replace(/%2F/g,"/"),b},{}),pathname:x,pathnameBase:y,pattern:r}}function V2(r,o=!1,a=!0){yi(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let f=[],p="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,A,v)=>(f.push({paramName:A,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(f.push({paramName:"*"}),p+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?p+="\\/*$":r!==""&&r!=="/"&&(p+="(?:(?=\\/|$))"),[new RegExp(p,o?void 0:"i"),f]}function z2(r){try{return r.split("/").map(o=>decodeURIComponent(o).replace(/\//g,"%2F")).join("/")}catch(o){return yi(!1,`The URL path "${r}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${o}).`),r}}function ys(r,o){if(o==="/")return r;if(!r.toLowerCase().startsWith(o.toLowerCase()))return null;let a=o.endsWith("/")?o.length-1:o.length,f=r.charAt(a);return f&&f!=="/"?null:r.slice(a)||"/"}function U2(r,o="/"){let{pathname:a,search:f="",hash:p=""}=typeof r=="string"?jo(r):r;return{pathname:a?a.startsWith("/")?a:W2(a,o):o,search:X2(f),hash:Y2(p)}}function W2(r,o){let a=o.replace(/\/+$/,"").split("/");return r.split("/").forEach(p=>{p===".."?a.length>1&&a.pop():p!=="."&&a.push(p)}),a.length>1?a.join("/"):"/"}function ud(r,o,a,f){return`Cannot include a '${r}' character in a manually specified \`to.${o}\` field [${JSON.stringify(f)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function H2(r){return r.filter((o,a)=>a===0||o.route.path&&o.route.path.length>0)}function Gp(r){let o=H2(r);return o.map((a,f)=>f===o.length-1?a.pathname:a.pathnameBase)}function Xp(r,o,a,f=!1){let p;typeof r=="string"?p=jo(r):(p={...r},dn(!p.pathname||!p.pathname.includes("?"),ud("?","pathname","search",p)),dn(!p.pathname||!p.pathname.includes("#"),ud("#","pathname","hash",p)),dn(!p.search||!p.search.includes("#"),ud("#","search","hash",p)));let x=r===""||p.pathname==="",y=x?"/":p.pathname,A;if(y==null)A=a;else{let I=o.length-1;if(!f&&y.startsWith("..")){let R=y.split("/");for(;R[0]==="..";)R.shift(),I-=1;p.pathname=R.join("/")}A=I>=0?o[I]:"/"}let v=U2(p,A),b=y&&y!=="/"&&y.endsWith("/"),S=(x||y===".")&&a.endsWith("/");return!v.pathname.endsWith("/")&&(b||S)&&(v.pathname+="/"),v}var ji=r=>r.join("/").replace(/\/\/+/g,"/"),G2=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),X2=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Y2=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function K2(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var Yp=["POST","PUT","PATCH","DELETE"];new Set(Yp);var $2=["GET",...Yp];new Set($2);var Fo=_.createContext(null);Fo.displayName="DataRouter";var Ic=_.createContext(null);Ic.displayName="DataRouterState";var Kp=_.createContext({isTransitioning:!1});Kp.displayName="ViewTransition";var Z2=_.createContext(new Map);Z2.displayName="Fetchers";var q2=_.createContext(null);q2.displayName="Await";var wi=_.createContext(null);wi.displayName="Navigation";var Ha=_.createContext(null);Ha.displayName="Location";var vi=_.createContext({outlet:null,matches:[],isDataRoute:!1});vi.displayName="Route";var lf=_.createContext(null);lf.displayName="RouteError";function Q2(r,{relative:o}={}){dn(Ga(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:f}=_.useContext(wi),{hash:p,pathname:x,search:y}=Xa(r,{relative:o}),A=x;return a!=="/"&&(A=x==="/"?a:ji([a,x])),f.createHref({pathname:A,search:y,hash:p})}function Ga(){return _.useContext(Ha)!=null}function Or(){return dn(Ga(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(Ha).location}var $p="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Zp(r){_.useContext(wi).static||_.useLayoutEffect(r)}function ar(){let{isDataRoute:r}=_.useContext(vi);return r?fy():J2()}function J2(){dn(Ga(),"useNavigate() may be used only in the context of a <Router> component.");let r=_.useContext(Fo),{basename:o,navigator:a}=_.useContext(wi),{matches:f}=_.useContext(vi),{pathname:p}=Or(),x=JSON.stringify(Gp(f)),y=_.useRef(!1);return Zp(()=>{y.current=!0}),_.useCallback((v,b={})=>{if(yi(y.current,$p),!y.current)return;if(typeof v=="number"){a.go(v);return}let S=Xp(v,JSON.parse(x),p,b.relative==="path");r==null&&o!=="/"&&(S.pathname=S.pathname==="/"?o:ji([o,S.pathname])),(b.replace?a.replace:a.push)(S,b.state,b)},[o,a,x,p,r])}_.createContext(null);function ey(){let{matches:r}=_.useContext(vi),o=r[r.length-1];return o?o.params:{}}function Xa(r,{relative:o}={}){let{matches:a}=_.useContext(vi),{pathname:f}=Or(),p=JSON.stringify(Gp(a));return _.useMemo(()=>Xp(r,JSON.parse(p),f,o==="path"),[r,p,f,o])}function ty(r,o){return qp(r,o)}function qp(r,o,a,f){var V;dn(Ga(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:p}=_.useContext(wi),{matches:x}=_.useContext(vi),y=x[x.length-1],A=y?y.params:{},v=y?y.pathname:"/",b=y?y.pathnameBase:"/",S=y&&y.route;{let W=S&&S.path||"";Qp(v,!S||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${v}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let I=Or(),R;if(o){let W=typeof o=="string"?jo(o):o;dn(b==="/"||((V=W.pathname)==null?void 0:V.startsWith(b)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${W.pathname}" was given in the \`location\` prop.`),R=W}else R=I;let D=R.pathname||"/",L=D;if(b!=="/"){let W=b.replace(/^\//,"").split("/");L="/"+D.replace(/^\//,"").split("/").slice(W.length).join("/")}let B=Up(r,{pathname:L});yi(S||B!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),yi(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=oy(B&&B.map(W=>Object.assign({},W,{params:Object.assign({},A,W.params),pathname:ji([b,p.encodeLocation?p.encodeLocation(W.pathname).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?b:ji([b,p.encodeLocation?p.encodeLocation(W.pathnameBase).pathname:W.pathnameBase])})),x,a,f);return o&&j?_.createElement(Ha.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},j):j}function ny(){let r=dy(),o=K2(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),a=r instanceof Error?r.stack:null,f="rgba(200,200,200, 0.5)",p={padding:"0.5rem",backgroundColor:f},x={padding:"2px 4px",backgroundColor:f},y=null;return console.error("Error handled by React Router default ErrorBoundary:",r),y=_.createElement(_.Fragment,null,_.createElement("p",null," Hey developer "),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:x},"ErrorBoundary")," or"," ",_.createElement("code",{style:x},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},o),a?_.createElement("pre",{style:p},a):null,y)}var ry=_.createElement(ny,null),iy=class extends _.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,o){return o.location!==r.location||o.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:o.error,location:o.location,revalidation:r.revalidation||o.revalidation}}componentDidCatch(r,o){console.error("React Router caught the following error during render",r,o)}render(){return this.state.error!==void 0?_.createElement(vi.Provider,{value:this.props.routeContext},_.createElement(lf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function sy({routeContext:r,match:o,children:a}){let f=_.useContext(Fo);return f&&f.static&&f.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(f.staticContext._deepestRenderedBoundaryId=o.route.id),_.createElement(vi.Provider,{value:r},a)}function oy(r,o=[],a=null,f=null){if(r==null){if(!a)return null;if(a.errors)r=a.matches;else if(o.length===0&&!a.initialized&&a.matches.length>0)r=a.matches;else return null}let p=r,x=a==null?void 0:a.errors;if(x!=null){let v=p.findIndex(b=>b.route.id&&(x==null?void 0:x[b.route.id])!==void 0);dn(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(x).join(",")}`),p=p.slice(0,Math.min(p.length,v+1))}let y=!1,A=-1;if(a)for(let v=0;v<p.length;v++){let b=p[v];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(A=v),b.route.id){let{loaderData:S,errors:I}=a,R=b.route.loader&&!S.hasOwnProperty(b.route.id)&&(!I||I[b.route.id]===void 0);if(b.route.lazy||R){y=!0,A>=0?p=p.slice(0,A+1):p=[p[0]];break}}}return p.reduceRight((v,b,S)=>{let I,R=!1,D=null,L=null;a&&(I=x&&b.route.id?x[b.route.id]:void 0,D=b.route.errorElement||ry,y&&(A<0&&S===0?(Qp("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,L=null):A===S&&(R=!0,L=b.route.hydrateFallbackElement||null)));let B=o.concat(p.slice(0,S+1)),j=()=>{let V;return I?V=D:R?V=L:b.route.Component?V=_.createElement(b.route.Component,null):b.route.element?V=b.route.element:V=v,_.createElement(sy,{match:b,routeContext:{outlet:v,matches:B,isDataRoute:a!=null},children:V})};return a&&(b.route.ErrorBoundary||b.route.errorElement||S===0)?_.createElement(iy,{location:a.location,revalidation:a.revalidation,component:D,error:I,children:j(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):j()},null)}function cf(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ay(r){let o=_.useContext(Fo);return dn(o,cf(r)),o}function ly(r){let o=_.useContext(Ic);return dn(o,cf(r)),o}function cy(r){let o=_.useContext(vi);return dn(o,cf(r)),o}function uf(r){let o=cy(r),a=o.matches[o.matches.length-1];return dn(a.route.id,`${r} can only be used on routes that contain a unique "id"`),a.route.id}function uy(){return uf("useRouteId")}function dy(){var f;let r=_.useContext(lf),o=ly("useRouteError"),a=uf("useRouteError");return r!==void 0?r:(f=o.errors)==null?void 0:f[a]}function fy(){let{router:r}=ay("useNavigate"),o=uf("useNavigate"),a=_.useRef(!1);return Zp(()=>{a.current=!0}),_.useCallback(async(p,x={})=>{yi(a.current,$p),a.current&&(typeof p=="number"?r.navigate(p):await r.navigate(p,{fromRouteId:o,...x}))},[r,o])}var g1={};function Qp(r,o,a){!o&&!g1[r]&&(g1[r]=!0,yi(!1,a))}_.memo(hy);function hy({routes:r,future:o,state:a}){return qp(r,void 0,a,o)}function br(r){dn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function py({basename:r="/",children:o=null,location:a,navigationType:f="POP",navigator:p,static:x=!1}){dn(!Ga(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let y=r.replace(/^\/*/,"/"),A=_.useMemo(()=>({basename:y,navigator:p,static:x,future:{}}),[y,p,x]);typeof a=="string"&&(a=jo(a));let{pathname:v="/",search:b="",hash:S="",state:I=null,key:R="default"}=a,D=_.useMemo(()=>{let L=ys(v,y);return L==null?null:{location:{pathname:L,search:b,hash:S,state:I,key:R},navigationType:f}},[y,v,b,S,I,R,f]);return yi(D!=null,`<Router basename="${y}"> is not able to match the URL "${v}${b}${S}" because it does not start with the basename, so the <Router> won't render anything.`),D==null?null:_.createElement(wi.Provider,{value:A},_.createElement(Ha.Provider,{children:o,value:D}))}function gy({children:r,location:o}){return ty(Rd(r),o)}function Rd(r,o=[]){let a=[];return _.Children.forEach(r,(f,p)=>{if(!_.isValidElement(f))return;let x=[...o,p];if(f.type===_.Fragment){a.push.apply(a,Rd(f.props.children,x));return}dn(f.type===br,`[${typeof f.type=="string"?f.type:f.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),dn(!f.props.index||!f.props.children,"An index route cannot have child routes.");let y={id:f.props.id||x.join("-"),caseSensitive:f.props.caseSensitive,element:f.props.element,Component:f.props.Component,index:f.props.index,path:f.props.path,loader:f.props.loader,action:f.props.action,hydrateFallbackElement:f.props.hydrateFallbackElement,HydrateFallback:f.props.HydrateFallback,errorElement:f.props.errorElement,ErrorBoundary:f.props.ErrorBoundary,hasErrorBoundary:f.props.hasErrorBoundary===!0||f.props.ErrorBoundary!=null||f.props.errorElement!=null,shouldRevalidate:f.props.shouldRevalidate,handle:f.props.handle,lazy:f.props.lazy};f.props.children&&(y.children=Rd(f.props.children,x)),a.push(y)}),a}var cc="get",uc="application/x-www-form-urlencoded";function Nc(r){return r!=null&&typeof r.tagName=="string"}function my(r){return Nc(r)&&r.tagName.toLowerCase()==="button"}function xy(r){return Nc(r)&&r.tagName.toLowerCase()==="form"}function yy(r){return Nc(r)&&r.tagName.toLowerCase()==="input"}function wy(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function vy(r,o){return r.button===0&&(!o||o==="_self")&&!wy(r)}var nc=null;function Cy(){if(nc===null)try{new FormData(document.createElement("form"),0),nc=!1}catch{nc=!0}return nc}var Ey=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function dd(r){return r!=null&&!Ey.has(r)?(yi(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${uc}"`),null):r}function by(r,o){let a,f,p,x,y;if(xy(r)){let A=r.getAttribute("action");f=A?ys(A,o):null,a=r.getAttribute("method")||cc,p=dd(r.getAttribute("enctype"))||uc,x=new FormData(r)}else if(my(r)||yy(r)&&(r.type==="submit"||r.type==="image")){let A=r.form;if(A==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=r.getAttribute("formaction")||A.getAttribute("action");if(f=v?ys(v,o):null,a=r.getAttribute("formmethod")||A.getAttribute("method")||cc,p=dd(r.getAttribute("formenctype"))||dd(A.getAttribute("enctype"))||uc,x=new FormData(A,r),!Cy()){let{name:b,type:S,value:I}=r;if(S==="image"){let R=b?`${b}.`:"";x.append(`${R}x`,"0"),x.append(`${R}y`,"0")}else b&&x.append(b,I)}}else{if(Nc(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=cc,f=null,p=uc,y=r}return x&&p==="text/plain"&&(y=x,x=void 0),{action:f,method:a.toLowerCase(),encType:p,formData:x,body:y}}function df(r,o){if(r===!1||r===null||typeof r>"u")throw new Error(o)}async function Ay(r,o){if(r.id in o)return o[r.id];try{let a=await import(r.module);return o[r.id]=a,a}catch(a){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Sy(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function Ty(r,o,a){let f=await Promise.all(r.map(async p=>{let x=o.routes[p.route.id];if(x){let y=await Ay(x,a);return y.links?y.links():[]}return[]}));return Ry(f.flat(1).filter(Sy).filter(p=>p.rel==="stylesheet"||p.rel==="preload").map(p=>p.rel==="stylesheet"?{...p,rel:"prefetch",as:"style"}:{...p,rel:"prefetch"}))}function m1(r,o,a,f,p,x){let y=(v,b)=>a[b]?v.route.id!==a[b].route.id:!0,A=(v,b)=>{var S;return a[b].pathname!==v.pathname||((S=a[b].route.path)==null?void 0:S.endsWith("*"))&&a[b].params["*"]!==v.params["*"]};return x==="assets"?o.filter((v,b)=>y(v,b)||A(v,b)):x==="data"?o.filter((v,b)=>{var I;let S=f.routes[v.route.id];if(!S||!S.hasLoader)return!1;if(y(v,b)||A(v,b))return!0;if(v.route.shouldRevalidate){let R=v.route.shouldRevalidate({currentUrl:new URL(p.pathname+p.search+p.hash,window.origin),currentParams:((I=a[0])==null?void 0:I.params)||{},nextUrl:new URL(r,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof R=="boolean")return R}return!0}):[]}function Iy(r,o){return Ny(r.map(a=>{let f=o.routes[a.route.id];if(!f)return[];let p=[f.module];return f.imports&&(p=p.concat(f.imports)),p}).flat(1))}function Ny(r){return[...new Set(r)]}function _y(r){let o={},a=Object.keys(r).sort();for(let f of a)o[f]=r[f];return o}function Ry(r,o){let a=new Set;return new Set(o),r.reduce((f,p)=>{let x=JSON.stringify(_y(p));return a.has(x)||(a.add(x),f.push({key:x,link:p})),f},[])}function ky(r){let o=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return o.pathname==="/"?o.pathname="_root.data":o.pathname=`${o.pathname.replace(/\/$/,"")}.data`,o}function Py(){let r=_.useContext(Fo);return df(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Oy(){let r=_.useContext(Ic);return df(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var ff=_.createContext(void 0);ff.displayName="FrameworkContext";function Jp(){let r=_.useContext(ff);return df(r,"You must render this element inside a <HydratedRouter> element"),r}function Dy(r,o){let a=_.useContext(ff),[f,p]=_.useState(!1),[x,y]=_.useState(!1),{onFocus:A,onBlur:v,onMouseEnter:b,onMouseLeave:S,onTouchStart:I}=o,R=_.useRef(null);_.useEffect(()=>{if(r==="render"&&y(!0),r==="viewport"){let B=V=>{V.forEach(W=>{y(W.isIntersecting)})},j=new IntersectionObserver(B,{threshold:.5});return R.current&&j.observe(R.current),()=>{j.disconnect()}}},[r]),_.useEffect(()=>{if(f){let B=setTimeout(()=>{y(!0)},100);return()=>{clearTimeout(B)}}},[f]);let D=()=>{p(!0)},L=()=>{p(!1),y(!1)};return a?r!=="intent"?[x,R,{}]:[x,R,{onFocus:Ia(A,D),onBlur:Ia(v,L),onMouseEnter:Ia(b,D),onMouseLeave:Ia(S,L),onTouchStart:Ia(I,D)}]:[!1,R,{}]}function Ia(r,o){return a=>{r&&r(a),a.defaultPrevented||o(a)}}function My({page:r,...o}){let{router:a}=Py(),f=_.useMemo(()=>Up(a.routes,r,a.basename),[a.routes,r,a.basename]);return f?_.createElement(By,{page:r,matches:f,...o}):(console.warn(`Tried to prefetch ${r} but no routes matched.`),null)}function Ly(r){let{manifest:o,routeModules:a}=Jp(),[f,p]=_.useState([]);return _.useEffect(()=>{let x=!1;return Ty(r,o,a).then(y=>{x||p(y)}),()=>{x=!0}},[r,o,a]),f}function By({page:r,matches:o,...a}){let f=Or(),{manifest:p,routeModules:x}=Jp(),{loaderData:y,matches:A}=Oy(),v=_.useMemo(()=>m1(r,o,A,p,f,"data"),[r,o,A,p,f]),b=_.useMemo(()=>m1(r,o,A,p,f,"assets"),[r,o,A,p,f]),S=_.useMemo(()=>{if(r===f.pathname+f.search+f.hash)return[];let D=new Set,L=!1;if(o.forEach(j=>{var W;let V=p.routes[j.route.id];!V||!V.hasLoader||(!v.some(z=>z.route.id===j.route.id)&&j.route.id in y&&((W=x[j.route.id])!=null&&W.shouldRevalidate)||V.hasClientLoader?L=!0:D.add(j.route.id))}),D.size===0)return[];let B=ky(r);return L&&D.size>0&&B.searchParams.set("_routes",o.filter(j=>D.has(j.route.id)).map(j=>j.route.id).join(",")),[B.pathname+B.search]},[y,f,p,v,o,r,x]),I=_.useMemo(()=>Iy(b,p),[b,p]),R=Ly(b);return _.createElement(_.Fragment,null,S.map(D=>_.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...a})),I.map(D=>_.createElement("link",{key:D,rel:"modulepreload",href:D,...a})),R.map(({key:D,link:L})=>_.createElement("link",{key:D,...L})))}function jy(...r){return o=>{r.forEach(a=>{typeof a=="function"?a(o):a!=null&&(a.current=o)})}}var eg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{eg&&(window.__reactRouterVersion="7.0.2")}catch{}function Fy({basename:r,children:o,window:a}){let f=_.useRef();f.current==null&&(f.current=T2({window:a,v5Compat:!0}));let p=f.current,[x,y]=_.useState({action:p.action,location:p.location}),A=_.useCallback(v=>{_.startTransition(()=>y(v))},[y]);return _.useLayoutEffect(()=>p.listen(A),[p,A]),_.createElement(py,{basename:r,children:o,location:x.location,navigationType:x.action,navigator:p})}var tg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ng=_.forwardRef(function({onClick:o,discover:a="render",prefetch:f="none",relative:p,reloadDocument:x,replace:y,state:A,target:v,to:b,preventScrollReset:S,viewTransition:I,...R},D){let{basename:L}=_.useContext(wi),B=typeof b=="string"&&tg.test(b),j,V=!1;if(typeof b=="string"&&B&&(j=b,eg))try{let $=new URL(window.location.href),Ae=b.startsWith("//")?new URL($.protocol+b):new URL(b),Oe=ys(Ae.pathname,L);Ae.origin===$.origin&&Oe!=null?b=Oe+Ae.search+Ae.hash:V=!0}catch{yi(!1,`<Link to="${b}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let W=Q2(b,{relative:p}),[z,J,ne]=Dy(f,R),oe=Wy(b,{replace:y,state:A,target:v,preventScrollReset:S,relative:p,viewTransition:I});function q($){o&&o($),$.defaultPrevented||oe($)}let ue=_.createElement("a",{...R,...ne,href:j||W,onClick:V||x?o:q,ref:jy(D,J),target:v,"data-discover":!B&&a==="render"?"true":void 0});return z&&!B?_.createElement(_.Fragment,null,ue,_.createElement(My,{page:W})):ue});ng.displayName="Link";var Vy=_.forwardRef(function({"aria-current":o="page",caseSensitive:a=!1,className:f="",end:p=!1,style:x,to:y,viewTransition:A,children:v,...b},S){let I=Xa(y,{relative:b.relative}),R=Or(),D=_.useContext(Ic),{navigator:L,basename:B}=_.useContext(wi),j=D!=null&&Ky(I)&&A===!0,V=L.encodeLocation?L.encodeLocation(I).pathname:I.pathname,W=R.pathname,z=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;a||(W=W.toLowerCase(),z=z?z.toLowerCase():null,V=V.toLowerCase()),z&&B&&(z=ys(z,B)||z);const J=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let ne=W===V||!p&&W.startsWith(V)&&W.charAt(J)==="/",oe=z!=null&&(z===V||!p&&z.startsWith(V)&&z.charAt(V.length)==="/"),q={isActive:ne,isPending:oe,isTransitioning:j},ue=ne?o:void 0,$;typeof f=="function"?$=f(q):$=[f,ne?"active":null,oe?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let Ae=typeof x=="function"?x(q):x;return _.createElement(ng,{...b,"aria-current":ue,className:$,ref:S,style:Ae,to:y,viewTransition:A},typeof v=="function"?v(q):v)});Vy.displayName="NavLink";var zy=_.forwardRef(({discover:r="render",fetcherKey:o,navigate:a,reloadDocument:f,replace:p,state:x,method:y=cc,action:A,onSubmit:v,relative:b,preventScrollReset:S,viewTransition:I,...R},D)=>{let L=Xy(),B=Yy(A,{relative:b}),j=y.toLowerCase()==="get"?"get":"post",V=typeof A=="string"&&tg.test(A),W=z=>{if(v&&v(z),z.defaultPrevented)return;z.preventDefault();let J=z.nativeEvent.submitter,ne=(J==null?void 0:J.getAttribute("formmethod"))||y;L(J||z.currentTarget,{fetcherKey:o,method:ne,navigate:a,replace:p,state:x,relative:b,preventScrollReset:S,viewTransition:I})};return _.createElement("form",{ref:D,method:j,action:B,onSubmit:f?v:W,...R,"data-discover":!V&&r==="render"?"true":void 0})});zy.displayName="Form";function Uy(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rg(r){let o=_.useContext(Fo);return dn(o,Uy(r)),o}function Wy(r,{target:o,replace:a,state:f,preventScrollReset:p,relative:x,viewTransition:y}={}){let A=ar(),v=Or(),b=Xa(r,{relative:x});return _.useCallback(S=>{if(vy(S,o)){S.preventDefault();let I=a!==void 0?a:Ba(v)===Ba(b);A(r,{replace:I,state:f,preventScrollReset:p,relative:x,viewTransition:y})}},[v,A,b,a,f,o,r,p,x,y])}var Hy=0,Gy=()=>`__${String(++Hy)}__`;function Xy(){let{router:r}=rg("useSubmit"),{basename:o}=_.useContext(wi),a=uy();return _.useCallback(async(f,p={})=>{let{action:x,method:y,encType:A,formData:v,body:b}=by(f,o);if(p.navigate===!1){let S=p.fetcherKey||Gy();await r.fetch(S,a,p.action||x,{preventScrollReset:p.preventScrollReset,formData:v,body:b,formMethod:p.method||y,formEncType:p.encType||A,flushSync:p.flushSync})}else await r.navigate(p.action||x,{preventScrollReset:p.preventScrollReset,formData:v,body:b,formMethod:p.method||y,formEncType:p.encType||A,replace:p.replace,state:p.state,fromRouteId:a,flushSync:p.flushSync,viewTransition:p.viewTransition})},[r,o,a])}function Yy(r,{relative:o}={}){let{basename:a}=_.useContext(wi),f=_.useContext(vi);dn(f,"useFormAction must be used inside a RouteContext");let[p]=f.matches.slice(-1),x={...Xa(r||".",{relative:o})},y=Or();if(r==null){x.search=y.search;let A=new URLSearchParams(x.search),v=A.getAll("index");if(v.some(S=>S==="")){A.delete("index"),v.filter(I=>I).forEach(I=>A.append("index",I));let S=A.toString();x.search=S?`?${S}`:""}}return(!r||r===".")&&p.route.index&&(x.search=x.search?x.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(x.pathname=x.pathname==="/"?a:ji([a,x.pathname])),Ba(x)}function Ky(r,o={}){let a=_.useContext(Kp);dn(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:f}=rg("useViewTransitionState"),p=Xa(r,{relative:o.relative});if(!a.isTransitioning)return!1;let x=ys(a.currentLocation.pathname,f)||a.currentLocation.pathname,y=ys(a.nextLocation.pathname,f)||a.nextLocation.pathname;return mc(p.pathname,y)!=null||mc(p.pathname,x)!=null}new TextEncoder;function hf(){const r="./assets",o="/sounds/new_elevator_combined.mp3";ar();const a=_.useRef(new Audio(r+o)),[f,p]=_.useState(!1),[x,y]=_.useState(!1),[A,v]=_.useState(null),[b,S]=_.useState(!1),[I,R]=_.useState(!1);_.useEffect(()=>{const W=a.current,z=()=>{W.pause(),W.currentTime=0,y(!1),j()};return W.addEventListener("ended",z),()=>W.removeEventListener("ended",z)},[I]);function D(){v(null),a.current.load(),a.current.play().then(()=>{a.current.pause(),a.current.currentTime=0,p(!0),y(!0),S(!0),B()}).catch(W=>{console.error("Error loading audio:",W),v("Failed to load audio. Please check the file path and format."),S(!1)})}function L(){return!!(a.current&&!a.current.paused)}function B(){a.current.paused?a.current.play().catch(W=>{console.error("Error playing audio:",W),v("Failed to play audio. Please try again.")}):a.current.currentTime=0}function j(){a.current&&(a.current.pause(),a.current.currentTime=0,a.current.src="",a.current=null)}function V(W){a.current.currentTime=W,console.log(a.current.duration)}return{audioRef:a,error:A,playSound:B,loadSound:D,seekTo:V,cancelSound:j,checkSound:L,soundEnabled:b,setSoundEnabled:S,isPlaying:x}}var Dn;(function(r){r[r.QR_CODE=0]="QR_CODE",r[r.AZTEC=1]="AZTEC",r[r.CODABAR=2]="CODABAR",r[r.CODE_39=3]="CODE_39",r[r.CODE_93=4]="CODE_93",r[r.CODE_128=5]="CODE_128",r[r.DATA_MATRIX=6]="DATA_MATRIX",r[r.MAXICODE=7]="MAXICODE",r[r.ITF=8]="ITF",r[r.EAN_13=9]="EAN_13",r[r.EAN_8=10]="EAN_8",r[r.PDF_417=11]="PDF_417",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Dn||(Dn={}));Dn.QR_CODE,Dn.AZTEC,Dn.CODABAR,Dn.CODE_39,Dn.CODE_93,Dn.CODE_128,Dn.DATA_MATRIX,Dn.MAXICODE,Dn.ITF,Dn.EAN_13,Dn.EAN_8,Dn.PDF_417,Dn.RSS_14,Dn.RSS_EXPANDED,Dn.UPC_A,Dn.UPC_E,Dn.UPC_EAN_EXTENSION;var x1;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.URL=1]="URL"})(x1||(x1={}));var xc;(function(r){r[r.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",r[r.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(xc||(xc={}));var $y=function(){function r(){}return r.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",r.SCAN_DEFAULT_FPS=2,r.DEFAULT_DISABLE_FLIP=!1,r.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,r.DEFAULT_SUPPORTED_SCAN_TYPE=[xc.SCAN_TYPE_CAMERA,xc.SCAN_TYPE_FILE],r}(),y1;(function(r){r[r.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",r[r.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",r[r.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(y1||(y1={}));var _a={exports:{}},Zy=_a.exports,w1;function qy(){return w1||(w1=1,function(r,o){(function(a,f){f(o)})(Zy,function(a){function f(k){return k==null}var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,e){k.__proto__=e}||function(k,e){for(var n in e)e.hasOwnProperty(n)&&(k[n]=e[n])};function x(k,e){p(k,e);function n(){this.constructor=k}k.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function y(k,e){var n=Object.setPrototypeOf;n?n(k,e):k.__proto__=e}function A(k,e){e===void 0&&(e=k.constructor);var n=Error.captureStackTrace;n&&n(k,e)}var v=function(k){x(e,k);function e(n){var i=this.constructor,l=k.call(this,n)||this;return Object.defineProperty(l,"name",{value:i.name,enumerable:!1}),y(l,i.prototype),A(l),l}return e}(Error);class b extends v{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}b.kind="Exception";class S extends b{}S.kind="ArgumentException";class I extends b{}I.kind="IllegalArgumentException";class R{constructor(e){if(this.binarizer=e,e===null)throw new I("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,n){return this.binarizer.getBlackRow(e,n)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,n,i,l){const c=this.binarizer.getLuminanceSource().crop(e,n,i,l);return new R(this.binarizer.createBinarizer(c))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new R(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new R(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class D extends b{static getChecksumInstance(){return new D}}D.kind="ChecksumException";class L{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class B{static arraycopy(e,n,i,l,c){for(;c--;)i[l++]=e[n++]}static currentTimeMillis(){return Date.now()}}class j extends b{}j.kind="IndexOutOfBoundsException";class V extends j{constructor(e=void 0,n=void 0){super(n),this.index=e,this.message=n}}V.kind="ArrayIndexOutOfBoundsException";class W{static fill(e,n){for(let i=0,l=e.length;i<l;i++)e[i]=n}static fillWithin(e,n,i,l){W.rangeCheck(e.length,n,i);for(let c=n;c<i;c++)e[c]=l}static rangeCheck(e,n,i){if(n>i)throw new I("fromIndex("+n+") > toIndex("+i+")");if(n<0)throw new V(n);if(i>e)throw new V(i)}static asList(...e){return e}static create(e,n,i){return Array.from({length:e}).map(c=>Array.from({length:n}).fill(i))}static createInt32Array(e,n,i){return Array.from({length:e}).map(c=>Int32Array.from({length:n}).fill(i))}static equals(e,n){if(!e||!n||!e.length||!n.length||e.length!==n.length)return!1;for(let i=0,l=e.length;i<l;i++)if(e[i]!==n[i])return!1;return!0}static hashCode(e){if(e===null)return 0;let n=1;for(const i of e)n=31*n+i;return n}static fillUint8Array(e,n){for(let i=0;i!==e.length;i++)e[i]=n}static copyOf(e,n){return e.slice(0,n)}static copyOfUint8Array(e,n){if(e.length<=n){const i=new Uint8Array(n);return i.set(e),i}return e.slice(0,n)}static copyOfRange(e,n,i){const l=i-n,c=new Int32Array(l);return B.arraycopy(e,n,c,0,l),c}static binarySearch(e,n,i){i===void 0&&(i=W.numberComparator);let l=0,c=e.length-1;for(;l<=c;){const u=c+l>>1,h=i(n,e[u]);if(h>0)l=u+1;else if(h<0)c=u-1;else return u}return-l-1}static numberComparator(e,n){return e-n}}class z{static numberOfTrailingZeros(e){let n;if(e===0)return 32;let i=31;return n=e<<16,n!==0&&(i-=16,e=n),n=e<<8,n!==0&&(i-=8,e=n),n=e<<4,n!==0&&(i-=4,e=n),n=e<<2,n!==0&&(i-=2,e=n),i-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let n=1;return e>>>16||(n+=16,e<<=16),e>>>24||(n+=8,e<<=8),e>>>28||(n+=4,e<<=4),e>>>30||(n+=2,e<<=2),n-=e>>>31,n}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,n){return Math.trunc(e/n)}static parseInt(e,n=void 0){return parseInt(e,n)}}z.MIN_VALUE_32_BITS=-2147483648,z.MAX_VALUE=Number.MAX_SAFE_INTEGER;class J{constructor(e,n){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,n==null?this.bits=J.makeArray(e):this.bits=n)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const n=J.makeArray(e);B.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const n=this.size;if(e>=n)return n;const i=this.bits;let l=Math.floor(e/32),c=i[l];c&=~((1<<(e&31))-1);const u=i.length;for(;c===0;){if(++l===u)return n;c=i[l]}const h=l*32+z.numberOfTrailingZeros(c);return h>n?n:h}getNextUnset(e){const n=this.size;if(e>=n)return n;const i=this.bits;let l=Math.floor(e/32),c=~i[l];c&=~((1<<(e&31))-1);const u=i.length;for(;c===0;){if(++l===u)return n;c=~i[l]}const h=l*32+z.numberOfTrailingZeros(c);return h>n?n:h}setBulk(e,n){this.bits[Math.floor(e/32)]=n}setRange(e,n){if(n<e||e<0||n>this.size)throw new I;if(n===e)return;n--;const i=Math.floor(e/32),l=Math.floor(n/32),c=this.bits;for(let u=i;u<=l;u++){const h=u>i?0:e&31,C=(2<<(u<l?31:n&31))-(1<<h);c[u]|=C}}clear(){const e=this.bits.length,n=this.bits;for(let i=0;i<e;i++)n[i]=0}isRange(e,n,i){if(n<e||e<0||n>this.size)throw new I;if(n===e)return!0;n--;const l=Math.floor(e/32),c=Math.floor(n/32),u=this.bits;for(let h=l;h<=c;h++){const m=h>l?0:e&31,N=(2<<(h<c?31:n&31))-(1<<m)&4294967295;if((u[h]&N)!==(i?N:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,n){if(n<0||n>32)throw new I("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(let i=n;i>0;i--)this.appendBit((e>>i-1&1)===1)}appendBitArray(e){const n=e.size;this.ensureCapacity(this.size+n);for(let i=0;i<n;i++)this.appendBit(e.get(i))}xor(e){if(this.size!==e.size)throw new I("Sizes don't match");const n=this.bits;for(let i=0,l=n.length;i<l;i++)n[i]^=e.bits[i]}toBytes(e,n,i,l){for(let c=0;c<l;c++){let u=0;for(let h=0;h<8;h++)this.get(e)&&(u|=1<<7-h),e++;n[i+c]=u}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),i=n+1,l=this.bits;for(let c=0;c<i;c++){let u=l[c];u=u>>1&1431655765|(u&1431655765)<<1,u=u>>2&858993459|(u&858993459)<<2,u=u>>4&252645135|(u&252645135)<<4,u=u>>8&16711935|(u&16711935)<<8,u=u>>16&65535|(u&65535)<<16,e[n-c]=u}if(this.size!==i*32){const c=i*32-this.size;let u=e[0]>>>c;for(let h=1;h<i;h++){const m=e[h];u|=m<<32-c,e[h-1]=u,u=m>>>c}e[i-1]=u}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof J))return!1;const n=e;return this.size===n.size&&W.equals(this.bits,n.bits)}hashCode(){return 31*this.size+W.hashCode(this.bits)}toString(){let e="";for(let n=0,i=this.size;n<i;n++)n&7||(e+=" "),e+=this.get(n)?"X":".";return e}clone(){return new J(this.size,this.bits.slice())}}var ne;(function(k){k[k.OTHER=0]="OTHER",k[k.PURE_BARCODE=1]="PURE_BARCODE",k[k.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",k[k.TRY_HARDER=3]="TRY_HARDER",k[k.CHARACTER_SET=4]="CHARACTER_SET",k[k.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",k[k.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",k[k.ASSUME_GS1=7]="ASSUME_GS1",k[k.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",k[k.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",k[k.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(ne||(ne={}));var oe=ne;class q extends b{static getFormatInstance(){return new q}}q.kind="FormatException";var ue;(function(k){k[k.Cp437=0]="Cp437",k[k.ISO8859_1=1]="ISO8859_1",k[k.ISO8859_2=2]="ISO8859_2",k[k.ISO8859_3=3]="ISO8859_3",k[k.ISO8859_4=4]="ISO8859_4",k[k.ISO8859_5=5]="ISO8859_5",k[k.ISO8859_6=6]="ISO8859_6",k[k.ISO8859_7=7]="ISO8859_7",k[k.ISO8859_8=8]="ISO8859_8",k[k.ISO8859_9=9]="ISO8859_9",k[k.ISO8859_10=10]="ISO8859_10",k[k.ISO8859_11=11]="ISO8859_11",k[k.ISO8859_13=12]="ISO8859_13",k[k.ISO8859_14=13]="ISO8859_14",k[k.ISO8859_15=14]="ISO8859_15",k[k.ISO8859_16=15]="ISO8859_16",k[k.SJIS=16]="SJIS",k[k.Cp1250=17]="Cp1250",k[k.Cp1251=18]="Cp1251",k[k.Cp1252=19]="Cp1252",k[k.Cp1256=20]="Cp1256",k[k.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",k[k.UTF8=22]="UTF8",k[k.ASCII=23]="ASCII",k[k.Big5=24]="Big5",k[k.GB18030=25]="GB18030",k[k.EUC_KR=26]="EUC_KR"})(ue||(ue={}));class ${constructor(e,n,i,...l){this.valueIdentifier=e,this.name=i,typeof n=="number"?this.values=Int32Array.from([n]):this.values=n,this.otherEncodingNames=l,$.VALUE_IDENTIFIER_TO_ECI.set(e,this),$.NAME_TO_ECI.set(i,this);const c=this.values;for(let u=0,h=c.length;u!==h;u++){const m=c[u];$.VALUES_TO_ECI.set(m,this)}for(const u of l)$.NAME_TO_ECI.set(u,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new q("incorect value");const n=$.VALUES_TO_ECI.get(e);if(n===void 0)throw new q("incorect value");return n}static getCharacterSetECIByName(e){const n=$.NAME_TO_ECI.get(e);if(n===void 0)throw new q("incorect value");return n}equals(e){if(!(e instanceof $))return!1;const n=e;return this.getName()===n.getName()}}$.VALUE_IDENTIFIER_TO_ECI=new Map,$.VALUES_TO_ECI=new Map,$.NAME_TO_ECI=new Map,$.Cp437=new $(ue.Cp437,Int32Array.from([0,2]),"Cp437"),$.ISO8859_1=new $(ue.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),$.ISO8859_2=new $(ue.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),$.ISO8859_3=new $(ue.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),$.ISO8859_4=new $(ue.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),$.ISO8859_5=new $(ue.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),$.ISO8859_6=new $(ue.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),$.ISO8859_7=new $(ue.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),$.ISO8859_8=new $(ue.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),$.ISO8859_9=new $(ue.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),$.ISO8859_10=new $(ue.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),$.ISO8859_11=new $(ue.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),$.ISO8859_13=new $(ue.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),$.ISO8859_14=new $(ue.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),$.ISO8859_15=new $(ue.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),$.ISO8859_16=new $(ue.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),$.SJIS=new $(ue.SJIS,20,"SJIS","Shift_JIS"),$.Cp1250=new $(ue.Cp1250,21,"Cp1250","windows-1250"),$.Cp1251=new $(ue.Cp1251,22,"Cp1251","windows-1251"),$.Cp1252=new $(ue.Cp1252,23,"Cp1252","windows-1252"),$.Cp1256=new $(ue.Cp1256,24,"Cp1256","windows-1256"),$.UnicodeBigUnmarked=new $(ue.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),$.UTF8=new $(ue.UTF8,26,"UTF8","UTF-8"),$.ASCII=new $(ue.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),$.Big5=new $(ue.Big5,28,"Big5"),$.GB18030=new $(ue.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),$.EUC_KR=new $(ue.EUC_KR,30,"EUC_KR","EUC-KR");class Ae extends b{}Ae.kind="UnsupportedOperationException";class Oe{static decode(e,n){const i=this.encodingName(n);return this.customDecoder?this.customDecoder(e,i):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(i)?this.decodeFallback(e,i):new TextDecoder(i).decode(e)}static shouldDecodeOnFallback(e){return!Oe.isBrowser()&&e==="ISO-8859-1"}static encode(e,n){const i=this.encodingName(n);return this.customEncoder?this.customEncoder(e,i):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof $?e:$.getCharacterSetECIByName(e)}static decodeFallback(e,n){const i=this.encodingCharacterSet(n);if(Oe.isDecodeFallbackSupported(i)){let l="";for(let c=0,u=e.length;c<u;c++){let h=e[c].toString(16);h.length<2&&(h="0"+h),l+="%"+h}return decodeURIComponent(l)}if(i.equals($.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Ae(`Encoding ${this.encodingName(n)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals($.UTF8)||e.equals($.ISO8859_1)||e.equals($.ASCII)}static encodeFallback(e){const i=btoa(unescape(encodeURIComponent(e))).split(""),l=[];for(let c=0;c<i.length;c++)l.push(i[c].charCodeAt(0));return new Uint8Array(l)}}class ke{static castAsNonUtf8Char(e,n=null){const i=n?n.getName():this.ISO88591;return Oe.decode(new Uint8Array([e]),i)}static guessEncoding(e,n){if(n!=null&&n.get(oe.CHARACTER_SET)!==void 0)return n.get(oe.CHARACTER_SET).toString();const i=e.length;let l=!0,c=!0,u=!0,h=0,m=0,C=0,N=0,P=0,M=0,U=0,G=0,K=0,ee=0,le=0;const Ne=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let _e=0;_e<i&&(l||c||u);_e++){const Ce=e[_e]&255;u&&(h>0?Ce&128?h--:u=!1:Ce&128&&(Ce&64?(h++,Ce&32?(h++,Ce&16?(h++,Ce&8?u=!1:N++):C++):m++):u=!1)),l&&(Ce>127&&Ce<160?l=!1:Ce>159&&(Ce<192||Ce===215||Ce===247)&&le++),c&&(P>0?Ce<64||Ce===127||Ce>252?c=!1:P--:Ce===128||Ce===160||Ce>239?c=!1:Ce>160&&Ce<224?(M++,G=0,U++,U>K&&(K=U)):Ce>127?(P++,U=0,G++,G>ee&&(ee=G)):(U=0,G=0))}return u&&h>0&&(u=!1),c&&P>0&&(c=!1),u&&(Ne||m+C+N>0)?ke.UTF8:c&&(ke.ASSUME_SHIFT_JIS||K>=3||ee>=3)?ke.SHIFT_JIS:l&&c?K===2&&M===2||le*10>=i?ke.SHIFT_JIS:ke.ISO88591:l?ke.ISO88591:c?ke.SHIFT_JIS:u?ke.UTF8:ke.PLATFORM_DEFAULT_ENCODING}static format(e,...n){let i=-1;function l(u,h,m,C,N,P){if(u==="%%")return"%";if(n[++i]===void 0)return;u=C?parseInt(C.substr(1)):void 0;let M=N?parseInt(N.substr(1)):void 0,U;switch(P){case"s":U=n[i];break;case"c":U=n[i][0];break;case"f":U=parseFloat(n[i]).toFixed(u);break;case"p":U=parseFloat(n[i]).toPrecision(u);break;case"e":U=parseFloat(n[i]).toExponential(u);break;case"x":U=parseInt(n[i]).toString(M||16);break;case"d":U=parseFloat(parseInt(n[i],M||10).toPrecision(u)).toFixed(0);break}U=typeof U=="object"?JSON.stringify(U):(+U).toString(M);let G=parseInt(m),K=m&&m[0]+""=="0"?"0":" ";for(;U.length<G;)U=h!==void 0?U+K:K+U;return U}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(c,l)}static getBytes(e,n){return Oe.encode(e,n)}static getCharCode(e,n=0){return e.charCodeAt(n)}static getCharAt(e){return String.fromCharCode(e)}}ke.SHIFT_JIS=$.SJIS.getName(),ke.GB2312="GB2312",ke.ISO88591=$.ISO8859_1.getName(),ke.EUC_JP="EUC_JP",ke.UTF8=$.UTF8.getName(),ke.PLATFORM_DEFAULT_ENCODING=ke.UTF8,ke.ASSUME_SHIFT_JIS=!1;class De{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=ke.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,n,i){for(let l=n;n<n+i;l++)this.append(e[l]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+1)}substring(e,n){return this.value.substring(e,n)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+n.length)}}class Se{constructor(e,n,i,l){if(this.width=e,this.height=n,this.rowSize=i,this.bits=l,n==null&&(n=e),this.height=n,e<1||n<1)throw new I("Both dimensions must be greater than 0");i==null&&(i=Math.floor((e+31)/32)),this.rowSize=i,l==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const n=e.length,i=e[0].length,l=new Se(i,n);for(let c=0;c<n;c++){const u=e[c];for(let h=0;h<i;h++)u[h]&&l.set(h,c)}return l}static parseFromString(e,n,i){if(e===null)throw new I("stringRepresentation cannot be null");const l=new Array(e.length);let c=0,u=0,h=-1,m=0,C=0;for(;C<e.length;)if(e.charAt(C)===`
`||e.charAt(C)==="\r"){if(c>u){if(h===-1)h=c-u;else if(c-u!==h)throw new I("row lengths do not match");u=c,m++}C++}else if(e.substring(C,C+n.length)===n)C+=n.length,l[c]=!0,c++;else if(e.substring(C,C+i.length)===i)C+=i.length,l[c]=!1,c++;else throw new I("illegal character encountered: "+e.substring(C));if(c>u){if(h===-1)h=c-u;else if(c-u!==h)throw new I("row lengths do not match");m++}const N=new Se(h,m);for(let P=0;P<c;P++)l[P]&&N.set(Math.floor(P%h),Math.floor(P/h));return N}get(e,n){const i=n*this.rowSize+Math.floor(e/32);return(this.bits[i]>>>(e&31)&1)!==0}set(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]|=1<<(e&31)&4294967295}unset(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]&=~(1<<(e&31)&4294967295)}flip(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new I("input matrix dimensions do not match");const n=new J(Math.floor(this.width/32)+1),i=this.rowSize,l=this.bits;for(let c=0,u=this.height;c<u;c++){const h=c*i,m=e.getRow(c,n).getBitArray();for(let C=0;C<i;C++)l[h+C]^=m[C]}}clear(){const e=this.bits,n=e.length;for(let i=0;i<n;i++)e[i]=0}setRegion(e,n,i,l){if(n<0||e<0)throw new I("Left and top must be nonnegative");if(l<1||i<1)throw new I("Height and width must be at least 1");const c=e+i,u=n+l;if(u>this.height||c>this.width)throw new I("The region must fit inside the matrix");const h=this.rowSize,m=this.bits;for(let C=n;C<u;C++){const N=C*h;for(let P=e;P<c;P++)m[N+Math.floor(P/32)]|=1<<(P&31)&4294967295}}getRow(e,n){n==null||n.getSize()<this.width?n=new J(this.width):n.clear();const i=this.rowSize,l=this.bits,c=e*i;for(let u=0;u<i;u++)n.setBulk(u*32,l[c+u]);return n}setRow(e,n){B.arraycopy(n.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),n=this.getHeight();let i=new J(e),l=new J(e);for(let c=0,u=Math.floor((n+1)/2);c<u;c++)i=this.getRow(c,i),l=this.getRow(n-1-c,l),i.reverse(),l.reverse(),this.setRow(c,l),this.setRow(n-1-c,i)}getEnclosingRectangle(){const e=this.width,n=this.height,i=this.rowSize,l=this.bits;let c=e,u=n,h=-1,m=-1;for(let C=0;C<n;C++)for(let N=0;N<i;N++){const P=l[C*i+N];if(P!==0){if(C<u&&(u=C),C>m&&(m=C),N*32<c){let M=0;for(;!(P<<31-M&4294967295);)M++;N*32+M<c&&(c=N*32+M)}if(N*32+31>h){let M=31;for(;!(P>>>M);)M--;N*32+M>h&&(h=N*32+M)}}}return h<c||m<u?null:Int32Array.from([c,u,h-c+1,m-u+1])}getTopLeftOnBit(){const e=this.rowSize,n=this.bits;let i=0;for(;i<n.length&&n[i]===0;)i++;if(i===n.length)return null;const l=i/e;let c=i%e*32;const u=n[i];let h=0;for(;!(u<<31-h&4294967295);)h++;return c+=h,Int32Array.from([c,l])}getBottomRightOnBit(){const e=this.rowSize,n=this.bits;let i=n.length-1;for(;i>=0&&n[i]===0;)i--;if(i<0)return null;const l=Math.floor(i/e);let c=Math.floor(i%e)*32;const u=n[i];let h=31;for(;!(u>>>h);)h--;return c+=h,Int32Array.from([c,l])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof Se))return!1;const n=e;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&W.equals(this.bits,n.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+W.hashCode(this.bits),e}toString(e="X ",n="  ",i=`
`){return this.buildToString(e,n,i)}buildToString(e,n,i){let l=new De;for(let c=0,u=this.height;c<u;c++){for(let h=0,m=this.width;h<m;h++)l.append(this.get(h,c)?e:n);l.append(i)}return l.toString()}clone(){return new Se(this.width,this.height,this.rowSize,this.bits.slice())}}class Q extends b{static getNotFoundInstance(){return new Q}}Q.kind="NotFoundException";class Le extends L{constructor(e){super(e),this.luminances=Le.EMPTY,this.buckets=new Int32Array(Le.LUMINANCE_BUCKETS)}getBlackRow(e,n){const i=this.getLuminanceSource(),l=i.getWidth();n==null||n.getSize()<l?n=new J(l):n.clear(),this.initArrays(l);const c=i.getRow(e,this.luminances),u=this.buckets;for(let m=0;m<l;m++)u[(c[m]&255)>>Le.LUMINANCE_SHIFT]++;const h=Le.estimateBlackPoint(u);if(l<3)for(let m=0;m<l;m++)(c[m]&255)<h&&n.set(m);else{let m=c[0]&255,C=c[1]&255;for(let N=1;N<l-1;N++){const P=c[N+1]&255;(C*4-m-P)/2<h&&n.set(N),m=C,C=P}}return n}getBlackMatrix(){const e=this.getLuminanceSource(),n=e.getWidth(),i=e.getHeight(),l=new Se(n,i);this.initArrays(n);const c=this.buckets;for(let m=1;m<5;m++){const C=Math.floor(i*m/5),N=e.getRow(C,this.luminances),P=Math.floor(n*4/5);for(let M=Math.floor(n/5);M<P;M++){const U=N[M]&255;c[U>>Le.LUMINANCE_SHIFT]++}}const u=Le.estimateBlackPoint(c),h=e.getMatrix();for(let m=0;m<i;m++){const C=m*n;for(let N=0;N<n;N++)(h[C+N]&255)<u&&l.set(N,m)}return l}createBinarizer(e){return new Le(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const n=this.buckets;for(let i=0;i<Le.LUMINANCE_BUCKETS;i++)n[i]=0}static estimateBlackPoint(e){const n=e.length;let i=0,l=0,c=0;for(let N=0;N<n;N++)e[N]>c&&(l=N,c=e[N]),e[N]>i&&(i=e[N]);let u=0,h=0;for(let N=0;N<n;N++){const P=N-l,M=e[N]*P*P;M>h&&(u=N,h=M)}if(l>u){const N=l;l=u,u=N}if(u-l<=n/16)throw new Q;let m=u-1,C=-1;for(let N=u-1;N>l;N--){const P=N-l,M=P*P*(u-N)*(i-e[N]);M>C&&(m=N,C=M)}return m<<Le.LUMINANCE_SHIFT}}Le.LUMINANCE_BITS=5,Le.LUMINANCE_SHIFT=8-Le.LUMINANCE_BITS,Le.LUMINANCE_BUCKETS=1<<Le.LUMINANCE_BITS,Le.EMPTY=Uint8ClampedArray.from([0]);class pe extends Le{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),n=e.getWidth(),i=e.getHeight();if(n>=pe.MINIMUM_DIMENSION&&i>=pe.MINIMUM_DIMENSION){const l=e.getMatrix();let c=n>>pe.BLOCK_SIZE_POWER;n&pe.BLOCK_SIZE_MASK&&c++;let u=i>>pe.BLOCK_SIZE_POWER;i&pe.BLOCK_SIZE_MASK&&u++;const h=pe.calculateBlackPoints(l,c,u,n,i),m=new Se(n,i);pe.calculateThresholdForBlock(l,c,u,n,i,h,m),this.matrix=m}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new pe(e)}static calculateThresholdForBlock(e,n,i,l,c,u,h){const m=c-pe.BLOCK_SIZE,C=l-pe.BLOCK_SIZE;for(let N=0;N<i;N++){let P=N<<pe.BLOCK_SIZE_POWER;P>m&&(P=m);const M=pe.cap(N,2,i-3);for(let U=0;U<n;U++){let G=U<<pe.BLOCK_SIZE_POWER;G>C&&(G=C);const K=pe.cap(U,2,n-3);let ee=0;for(let Ne=-2;Ne<=2;Ne++){const _e=u[M+Ne];ee+=_e[K-2]+_e[K-1]+_e[K]+_e[K+1]+_e[K+2]}const le=ee/25;pe.thresholdBlock(e,G,P,le,l,h)}}}static cap(e,n,i){return e<n?n:e>i?i:e}static thresholdBlock(e,n,i,l,c,u){for(let h=0,m=i*c+n;h<pe.BLOCK_SIZE;h++,m+=c)for(let C=0;C<pe.BLOCK_SIZE;C++)(e[m+C]&255)<=l&&u.set(n+C,i+h)}static calculateBlackPoints(e,n,i,l,c){const u=c-pe.BLOCK_SIZE,h=l-pe.BLOCK_SIZE,m=new Array(i);for(let C=0;C<i;C++){m[C]=new Int32Array(n);let N=C<<pe.BLOCK_SIZE_POWER;N>u&&(N=u);for(let P=0;P<n;P++){let M=P<<pe.BLOCK_SIZE_POWER;M>h&&(M=h);let U=0,G=255,K=0;for(let le=0,Ne=N*l+M;le<pe.BLOCK_SIZE;le++,Ne+=l){for(let _e=0;_e<pe.BLOCK_SIZE;_e++){const Ce=e[Ne+_e]&255;U+=Ce,Ce<G&&(G=Ce),Ce>K&&(K=Ce)}if(K-G>pe.MIN_DYNAMIC_RANGE)for(le++,Ne+=l;le<pe.BLOCK_SIZE;le++,Ne+=l)for(let _e=0;_e<pe.BLOCK_SIZE;_e++)U+=e[Ne+_e]&255}let ee=U>>pe.BLOCK_SIZE_POWER*2;if(K-G<=pe.MIN_DYNAMIC_RANGE&&(ee=G/2,C>0&&P>0)){const le=(m[C-1][P]+2*m[C][P-1]+m[C-1][P-1])/4;G<le&&(ee=le)}m[C][P]=ee}}return m}}pe.BLOCK_SIZE_POWER=3,pe.BLOCK_SIZE=1<<pe.BLOCK_SIZE_POWER,pe.BLOCK_SIZE_MASK=pe.BLOCK_SIZE-1,pe.MINIMUM_DIMENSION=pe.BLOCK_SIZE*5,pe.MIN_DYNAMIC_RANGE=24;class ge{constructor(e,n){this.width=e,this.height=n}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,n,i,l){throw new Ae("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Ae("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Ae("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let n=new De;for(let i=0;i<this.height;i++){const l=this.getRow(i,e);for(let c=0;c<this.width;c++){const u=l[c]&255;let h;u<64?h="#":u<128?h="+":u<192?h=".":h=" ",n.append(h)}n.append(`
`)}return n.toString()}}class Me extends ge{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,n){const i=this.delegate.getRow(e,n),l=this.getWidth();for(let c=0;c<l;c++)i[c]=255-(i[c]&255);return i}getMatrix(){const e=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n);for(let l=0;l<n;l++)i[l]=255-(e[l]&255);return i}isCropSupported(){return this.delegate.isCropSupported()}crop(e,n,i,l){return new Me(this.delegate.crop(e,n,i,l))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Me(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Me(this.delegate.rotateCounterClockwise45())}}class ae extends ge{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=ae.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const n=e.getContext("2d").getImageData(0,0,e.width,e.height);return ae.toGrayscaleBuffer(n.data,e.width,e.height)}static toGrayscaleBuffer(e,n,i){const l=new Uint8ClampedArray(n*i);for(let c=0,u=0,h=e.length;c<h;c+=4,u++){let m;if(e[c+3]===0)m=255;else{const N=e[c],P=e[c+1],M=e[c+2];m=306*N+601*P+117*M+512>>10}l[u]=m}return l}getRow(e,n){if(e<0||e>=this.getHeight())throw new I("Requested row is outside the image: "+e);const i=this.getWidth(),l=e*i;return n===null?n=this.buffer.slice(l,l+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(l,l+i))),n}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,n,i,l){return super.crop(e,n,i,l),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const n=this.getTempCanvasElement(),i=n.getContext("2d"),l=e*ae.DEGREE_TO_RADIANS,c=this.canvas.width,u=this.canvas.height,h=Math.ceil(Math.abs(Math.cos(l))*c+Math.abs(Math.sin(l))*u),m=Math.ceil(Math.abs(Math.sin(l))*c+Math.abs(Math.cos(l))*u);return n.width=h,n.height=m,i.translate(h/2,m/2),i.rotate(l),i.drawImage(this.canvas,c/-2,u/-2),this.buffer=ae.makeBufferFromCanvasImageData(n),this}invert(){return new Me(this)}}ae.DEGREE_TO_RADIANS=Math.PI/180;class Y{constructor(e,n,i){this.deviceId=e,this.label=n,this.kind="videoinput",this.groupId=i||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var te=(globalThis||Jl||self||window||void 0)&&(globalThis||Jl||self||window||void 0).__awaiter||function(k,e,n,i){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(N){try{C(i.next(N))}catch(P){u(P)}}function m(N){try{C(i.throw(N))}catch(P){u(P)}}function C(N){N.done?c(N.value):l(N.value).then(h,m)}C((i=i.apply(k,e||[])).next())})};class be{constructor(e,n=500,i){this.reader=e,this.timeBetweenScansMillis=n,this._hints=i,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return te(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),n=[];for(const i of e){const l=i.kind==="video"?"videoinput":i.kind;if(l!=="videoinput")continue;const c=i.deviceId||i.id,u=i.label||`Video device ${n.length+1}`,h=i.groupId,m={deviceId:c,label:u,kind:l,groupId:h};n.push(m)}return n})}getVideoInputDevices(){return te(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(n=>new Y(n.deviceId,n.label))})}findDeviceById(e){return te(this,void 0,void 0,function*(){const n=yield this.listVideoInputDevices();return n?n.find(i=>i.deviceId===e):null})}decodeFromInputVideoDevice(e,n){return te(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,n)})}decodeOnceFromVideoDevice(e,n){return te(this,void 0,void 0,function*(){this.reset();let i;e?i={deviceId:{exact:e}}:i={facingMode:"environment"};const l={video:i};return yield this.decodeOnceFromConstraints(l,n)})}decodeOnceFromConstraints(e,n){return te(this,void 0,void 0,function*(){const i=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(i,n)})}decodeOnceFromStream(e,n){return te(this,void 0,void 0,function*(){this.reset();const i=yield this.attachStreamToVideo(e,n);return yield this.decodeOnce(i)})}decodeFromInputVideoDeviceContinuously(e,n,i){return te(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,n,i)})}decodeFromVideoDevice(e,n,i){return te(this,void 0,void 0,function*(){let l;e?l={deviceId:{exact:e}}:l={facingMode:"environment"};const c={video:l};return yield this.decodeFromConstraints(c,n,i)})}decodeFromConstraints(e,n,i){return te(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(l,n,i)})}decodeFromStream(e,n,i){return te(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(e,n);return yield this.decodeContinuously(l,i)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,n){return te(this,void 0,void 0,function*(){const i=this.prepareVideoElement(n);return this.addVideoSource(i,e),this.videoElement=i,this.stream=e,yield this.playVideoOnLoadAsync(i),i})}playVideoOnLoadAsync(e){return new Promise((n,i)=>this.playVideoOnLoad(e,()=>n()))}playVideoOnLoad(e,n){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",n),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return te(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,n){const i=document.getElementById(e);if(!i)throw new S(`element with id '${e}' not found`);if(i.nodeName.toLowerCase()!==n.toLowerCase())throw new S(`element with id '${e}' must be an ${n} element`);return i}decodeFromImage(e,n){if(!e&&!n)throw new S("either imageElement with a src set or an url must be provided");return n&&!e?this.decodeFromImageUrl(n):this.decodeFromImageElement(e)}decodeFromVideo(e,n){if(!e&&!n)throw new S("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,n,i){if(e===void 0&&n===void 0)throw new S("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrlContinuously(n,i):this.decodeFromVideoElementContinuously(e,i)}decodeFromImageElement(e){if(!e)throw new S("An image element must be provided.");this.reset();const n=this.prepareImageElement(e);this.imageElement=n;let i;return this.isImageLoaded(n)?i=this.decodeOnce(n,!1,!0):i=this._decodeOnLoadImage(n),i}decodeFromVideoElement(e){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(n)}decodeFromVideoElementContinuously(e,n){const i=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(i,n)}_decodeFromVideoElementSetup(e){if(!e)throw new S("A video element must be provided.");this.reset();const n=this.prepareVideoElement(e);return this.videoElement=n,n}decodeFromImageUrl(e){if(!e)throw new S("An URL must be provided.");this.reset();const n=this.prepareImageElement();this.imageElement=n;const i=this._decodeOnLoadImage(n);return n.src=e,i}decodeFromVideoUrl(e){if(!e)throw new S("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),i=this.decodeFromVideoElement(n);return n.src=e,i}decodeFromVideoUrlContinuously(e,n){if(!e)throw new S("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),l=this.decodeFromVideoElementContinuously(i,n);return i.src=e,l}_decodeOnLoadImage(e){return new Promise((n,i)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(n,i),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return te(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,n){return te(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,n)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let n;return typeof e>"u"&&(n=document.createElement("img"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(n=e),n}prepareVideoElement(e){let n;return!e&&typeof document<"u"&&(n=document.createElement("video"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(n=e),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n}decodeOnce(e,n=!0,i=!0){this._stopAsyncDecode=!1;const l=(c,u)=>{if(this._stopAsyncDecode){u(new Q("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const h=this.decode(e);c(h)}catch(h){const m=n&&h instanceof Q,N=(h instanceof D||h instanceof q)&&i;if(m||N)return setTimeout(l,this._timeBetweenDecodingAttempts,c,u);u(h)}};return new Promise((c,u)=>l(c,u))}decodeContinuously(e,n){this._stopContinuousDecode=!1;const i=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const l=this.decode(e);n(l,null),setTimeout(i,this.timeBetweenScansMillis)}catch(l){n(null,l);const c=l instanceof D||l instanceof q,u=l instanceof Q;(c||u)&&setTimeout(i,this._timeBetweenDecodingAttempts)}};i()}decode(e){const n=this.createBinaryBitmap(e);return this.decodeBitmap(n)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,n,i){n||(n={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),i||(i=this.captureCanvasContext),i.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}drawImageOnCanvas(e,n,i=this.captureCanvasContext){n||(n={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),i||(i=this.captureCanvasContext),i.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const n=this.getCaptureCanvas(e),i=new ae(n),l=new pe(i);return new R(l)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const i=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=i}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const n=this.createCaptureCanvas(e);this.captureCanvas=n}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const n=document.createElement("canvas");let i,l;return typeof e<"u"&&(e instanceof HTMLVideoElement?(i=e.videoWidth,l=e.videoHeight):e instanceof HTMLImageElement&&(i=e.naturalWidth||e.width,l=e.naturalHeight||e.height)),n.style.width=i+"px",n.style.height=l+"px",n.width=i,n.height=l,n}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,n){try{e.srcObject=n}catch{e.src=URL.createObjectURL(n)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class ze{constructor(e,n,i=n==null?0:8*n.length,l,c,u=B.currentTimeMillis()){this.text=e,this.rawBytes=n,this.numBits=i,this.resultPoints=l,this.format=c,this.timestamp=u,this.text=e,this.rawBytes=n,i==null?this.numBits=n==null?0:8*n.length:this.numBits=i,this.resultPoints=l,this.format=c,this.resultMetadata=null,u==null?this.timestamp=B.currentTimeMillis():this.timestamp=u}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,n){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,n)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const n=this.resultPoints;if(n===null)this.resultPoints=e;else if(e!==null&&e.length>0){const i=new Array(n.length+e.length);B.arraycopy(n,0,i,0,n.length),B.arraycopy(e,0,i,n.length,e.length),this.resultPoints=i}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Re;(function(k){k[k.AZTEC=0]="AZTEC",k[k.CODABAR=1]="CODABAR",k[k.CODE_39=2]="CODE_39",k[k.CODE_93=3]="CODE_93",k[k.CODE_128=4]="CODE_128",k[k.DATA_MATRIX=5]="DATA_MATRIX",k[k.EAN_8=6]="EAN_8",k[k.EAN_13=7]="EAN_13",k[k.ITF=8]="ITF",k[k.MAXICODE=9]="MAXICODE",k[k.PDF_417=10]="PDF_417",k[k.QR_CODE=11]="QR_CODE",k[k.RSS_14=12]="RSS_14",k[k.RSS_EXPANDED=13]="RSS_EXPANDED",k[k.UPC_A=14]="UPC_A",k[k.UPC_E=15]="UPC_E",k[k.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Re||(Re={}));var fe=Re,Ye;(function(k){k[k.OTHER=0]="OTHER",k[k.ORIENTATION=1]="ORIENTATION",k[k.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",k[k.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",k[k.ISSUE_NUMBER=4]="ISSUE_NUMBER",k[k.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",k[k.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",k[k.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",k[k.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",k[k.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",k[k.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ye||(Ye={}));var He=Ye;class nt{constructor(e,n,i,l,c=-1,u=-1){this.rawBytes=e,this.text=n,this.byteSegments=i,this.ecLevel=l,this.structuredAppendSequenceNumber=c,this.structuredAppendParity=u,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Ge{exp(e){return this.expTable[e]}log(e){if(e===0)throw new I;return this.logTable[e]}static addOrSubtract(e,n){return e^n}}class ft{constructor(e,n){if(n.length===0)throw new I;this.field=e;const i=n.length;if(i>1&&n[0]===0){let l=1;for(;l<i&&n[l]===0;)l++;l===i?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(i-l),B.arraycopy(n,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const n=this.coefficients;let i;if(e===1){i=0;for(let u=0,h=n.length;u!==h;u++){const m=n[u];i=Ge.addOrSubtract(i,m)}return i}i=n[0];const l=n.length,c=this.field;for(let u=1;u<l;u++)i=Ge.addOrSubtract(c.multiply(e,i),n[u]);return i}addOrSubtract(e){if(!this.field.equals(e.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,i=e.coefficients;if(n.length>i.length){const u=n;n=i,i=u}let l=new Int32Array(i.length);const c=i.length-n.length;B.arraycopy(i,0,l,0,c);for(let u=c;u<i.length;u++)l[u]=Ge.addOrSubtract(n[u-c],i[u]);return new ft(this.field,l)}multiply(e){if(!this.field.equals(e.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const n=this.coefficients,i=n.length,l=e.coefficients,c=l.length,u=new Int32Array(i+c-1),h=this.field;for(let m=0;m<i;m++){const C=n[m];for(let N=0;N<c;N++)u[m+N]=Ge.addOrSubtract(u[m+N],h.multiply(C,l[N]))}return new ft(h,u)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const n=this.coefficients.length,i=this.field,l=new Int32Array(n),c=this.coefficients;for(let u=0;u<n;u++)l[u]=i.multiply(c[u],e);return new ft(i,l)}multiplyByMonomial(e,n){if(e<0)throw new I;if(n===0)return this.field.getZero();const i=this.coefficients,l=i.length,c=new Int32Array(l+e),u=this.field;for(let h=0;h<l;h++)c[h]=u.multiply(i[h],n);return new ft(u,c)}divide(e){if(!this.field.equals(e.field))throw new I("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new I("Divide by 0");const n=this.field;let i=n.getZero(),l=this;const c=e.getCoefficient(e.getDegree()),u=n.inverse(c);for(;l.getDegree()>=e.getDegree()&&!l.isZero();){const h=l.getDegree()-e.getDegree(),m=n.multiply(l.getCoefficient(l.getDegree()),u),C=e.multiplyByMonomial(h,m),N=n.buildMonomial(h,m);i=i.addOrSubtract(N),l=l.addOrSubtract(C)}return[i,l]}toString(){let e="";for(let n=this.getDegree();n>=0;n--){let i=this.getCoefficient(n);if(i!==0){if(i<0?(e+=" - ",i=-i):e.length>0&&(e+=" + "),n===0||i!==1){const l=this.field.log(i);l===0?e+="1":l===1?e+="a":(e+="a^",e+=l)}n!==0&&(n===1?e+="x":(e+="x^",e+=n))}}return e}}class me extends b{}me.kind="ArithmeticException";class we extends Ge{constructor(e,n,i){super(),this.primitive=e,this.size=n,this.generatorBase=i;const l=new Int32Array(n);let c=1;for(let h=0;h<n;h++)l[h]=c,c*=2,c>=n&&(c^=e,c&=n-1);this.expTable=l;const u=new Int32Array(n);for(let h=0;h<n-1;h++)u[l[h]]=h;this.logTable=u,this.zero=new ft(this,Int32Array.from([0])),this.one=new ft(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new I;if(n===0)return this.zero;const i=new Int32Array(e+1);return i[0]=n,new ft(this,i)}inverse(e){if(e===0)throw new me;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+z.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}we.AZTEC_DATA_12=new we(4201,4096,1),we.AZTEC_DATA_10=new we(1033,1024,1),we.AZTEC_DATA_6=new we(67,64,1),we.AZTEC_PARAM=new we(19,16,1),we.QR_CODE_FIELD_256=new we(285,256,0),we.DATA_MATRIX_FIELD_256=new we(301,256,1),we.AZTEC_DATA_8=we.DATA_MATRIX_FIELD_256,we.MAXICODE_FIELD_64=we.AZTEC_DATA_6;class st extends b{}st.kind="ReedSolomonException";class ht extends b{}ht.kind="IllegalStateException";class Pt{constructor(e){this.field=e}decode(e,n){const i=this.field,l=new ft(i,e),c=new Int32Array(n);let u=!0;for(let U=0;U<n;U++){const G=l.evaluateAt(i.exp(U+i.getGeneratorBase()));c[c.length-1-U]=G,G!==0&&(u=!1)}if(u)return;const h=new ft(i,c),m=this.runEuclideanAlgorithm(i.buildMonomial(n,1),h,n),C=m[0],N=m[1],P=this.findErrorLocations(C),M=this.findErrorMagnitudes(N,P);for(let U=0;U<P.length;U++){const G=e.length-1-i.log(P[U]);if(G<0)throw new st("Bad error location");e[G]=we.addOrSubtract(e[G],M[U])}}runEuclideanAlgorithm(e,n,i){if(e.getDegree()<n.getDegree()){const U=e;e=n,n=U}const l=this.field;let c=e,u=n,h=l.getZero(),m=l.getOne();for(;u.getDegree()>=(i/2|0);){let U=c,G=h;if(c=u,h=m,c.isZero())throw new st("r_{i-1} was zero");u=U;let K=l.getZero();const ee=c.getCoefficient(c.getDegree()),le=l.inverse(ee);for(;u.getDegree()>=c.getDegree()&&!u.isZero();){const Ne=u.getDegree()-c.getDegree(),_e=l.multiply(u.getCoefficient(u.getDegree()),le);K=K.addOrSubtract(l.buildMonomial(Ne,_e)),u=u.addOrSubtract(c.multiplyByMonomial(Ne,_e))}if(m=K.multiply(h).addOrSubtract(G),u.getDegree()>=c.getDegree())throw new ht("Division algorithm failed to reduce polynomial?")}const C=m.getCoefficient(0);if(C===0)throw new st("sigmaTilde(0) was zero");const N=l.inverse(C),P=m.multiplyScalar(N),M=u.multiplyScalar(N);return[P,M]}findErrorLocations(e){const n=e.getDegree();if(n===1)return Int32Array.from([e.getCoefficient(1)]);const i=new Int32Array(n);let l=0;const c=this.field;for(let u=1;u<c.getSize()&&l<n;u++)e.evaluateAt(u)===0&&(i[l]=c.inverse(u),l++);if(l!==n)throw new st("Error locator degree does not match number of roots");return i}findErrorMagnitudes(e,n){const i=n.length,l=new Int32Array(i),c=this.field;for(let u=0;u<i;u++){const h=c.inverse(n[u]);let m=1;for(let C=0;C<i;C++)if(u!==C){const N=c.multiply(n[C],h),P=N&1?N&-2:N|1;m=c.multiply(m,P)}l[u]=c.multiply(e.evaluateAt(h),c.inverse(m)),c.getGeneratorBase()!==0&&(l[u]=c.multiply(l[u],h))}return l}}var xt;(function(k){k[k.UPPER=0]="UPPER",k[k.LOWER=1]="LOWER",k[k.MIXED=2]="MIXED",k[k.DIGIT=3]="DIGIT",k[k.PUNCT=4]="PUNCT",k[k.BINARY=5]="BINARY"})(xt||(xt={}));class qe{decode(e){this.ddata=e;let n=e.getBits(),i=this.extractBits(n),l=this.correctBits(i),c=qe.convertBoolArrayToByteArray(l),u=qe.getEncodedData(l),h=new nt(c,u,null,null);return h.setNumBits(l.length),h}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let n=e.length,i=xt.UPPER,l=xt.UPPER,c="",u=0;for(;u<n;)if(l===xt.BINARY){if(n-u<5)break;let h=qe.readCode(e,u,5);if(u+=5,h===0){if(n-u<11)break;h=qe.readCode(e,u,11)+31,u+=11}for(let m=0;m<h;m++){if(n-u<8){u=n;break}const C=qe.readCode(e,u,8);c+=ke.castAsNonUtf8Char(C),u+=8}l=i}else{let h=l===xt.DIGIT?4:5;if(n-u<h)break;let m=qe.readCode(e,u,h);u+=h;let C=qe.getCharacter(l,m);C.startsWith("CTRL_")?(i=l,l=qe.getTable(C.charAt(5)),C.charAt(6)==="L"&&(i=l)):(c+=C,l=i)}return c}static getTable(e){switch(e){case"L":return xt.LOWER;case"P":return xt.PUNCT;case"M":return xt.MIXED;case"D":return xt.DIGIT;case"B":return xt.BINARY;case"U":default:return xt.UPPER}}static getCharacter(e,n){switch(e){case xt.UPPER:return qe.UPPER_TABLE[n];case xt.LOWER:return qe.LOWER_TABLE[n];case xt.MIXED:return qe.MIXED_TABLE[n];case xt.PUNCT:return qe.PUNCT_TABLE[n];case xt.DIGIT:return qe.DIGIT_TABLE[n];default:throw new ht("Bad table")}}correctBits(e){let n,i;this.ddata.getNbLayers()<=2?(i=6,n=we.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(i=8,n=we.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(i=10,n=we.AZTEC_DATA_10):(i=12,n=we.AZTEC_DATA_12);let l=this.ddata.getNbDatablocks(),c=e.length/i;if(c<l)throw new q;let u=e.length%i,h=new Int32Array(c);for(let M=0;M<c;M++,u+=i)h[M]=qe.readCode(e,u,i);try{new Pt(n).decode(h,c-l)}catch(M){throw new q(M)}let m=(1<<i)-1,C=0;for(let M=0;M<l;M++){let U=h[M];if(U===0||U===m)throw new q;(U===1||U===m-1)&&C++}let N=new Array(l*i-C),P=0;for(let M=0;M<l;M++){let U=h[M];if(U===1||U===m-1)N.fill(U>1,P,P+i-1),P+=i-1;else for(let G=i-1;G>=0;--G)N[P++]=(U&1<<G)!==0}return N}extractBits(e){let n=this.ddata.isCompact(),i=this.ddata.getNbLayers(),l=(n?11:14)+i*4,c=new Int32Array(l),u=new Array(this.totalBitsInLayer(i,n));if(n)for(let h=0;h<c.length;h++)c[h]=h;else{let h=l+1+2*z.truncDivision(z.truncDivision(l,2)-1,15),m=l/2,C=z.truncDivision(h,2);for(let N=0;N<m;N++){let P=N+z.truncDivision(N,15);c[m-N-1]=C-P-1,c[m+N]=C+P+1}}for(let h=0,m=0;h<i;h++){let C=(i-h)*4+(n?9:12),N=h*2,P=l-1-N;for(let M=0;M<C;M++){let U=M*2;for(let G=0;G<2;G++)u[m+U+G]=e.get(c[N+G],c[N+M]),u[m+2*C+U+G]=e.get(c[N+M],c[P-G]),u[m+4*C+U+G]=e.get(c[P-G],c[P-M]),u[m+6*C+U+G]=e.get(c[P-M],c[N+G])}m+=C*8}return u}static readCode(e,n,i){let l=0;for(let c=n;c<n+i;c++)l<<=1,e[c]&&(l|=1);return l}static readByte(e,n){let i=e.length-n;return i>=8?qe.readCode(e,n,8):qe.readCode(e,n,i)<<8-i}static convertBoolArrayToByteArray(e){let n=new Uint8Array((e.length+7)/8);for(let i=0;i<n.length;i++)n[i]=qe.readByte(e,8*i);return n}totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}qe.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],qe.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],qe.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],qe.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],qe.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Je{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,n,i,l){const c=e-i,u=n-l;return Math.sqrt(c*c+u*u)}static sum(e){let n=0;for(let i=0,l=e.length;i!==l;i++){const c=e[i];n+=c}return n}}class Nt{static floatToIntBits(e){return e}}Nt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ie{constructor(e,n){this.x=e,this.y=n}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof Ie){const n=e;return this.x===n.x&&this.y===n.y}return!1}hashCode(){return 31*Nt.floatToIntBits(this.x)+Nt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const n=this.distance(e[0],e[1]),i=this.distance(e[1],e[2]),l=this.distance(e[0],e[2]);let c,u,h;if(i>=n&&i>=l?(u=e[0],c=e[1],h=e[2]):l>=i&&l>=n?(u=e[1],c=e[0],h=e[2]):(u=e[2],c=e[0],h=e[1]),this.crossProductZ(c,u,h)<0){const m=c;c=h,h=m}e[0]=c,e[1]=u,e[2]=h}static distance(e,n){return Je.distance(e.x,e.y,n.x,n.y)}static crossProductZ(e,n,i){const l=n.x,c=n.y;return(i.x-l)*(e.y-c)-(i.y-c)*(e.x-l)}}class yn{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class Ct extends yn{constructor(e,n,i,l,c){super(e,n),this.compact=i,this.nbDatablocks=l,this.nbLayers=c}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class xe{constructor(e,n,i,l){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),n==null&&(n=xe.INIT_SIZE),i==null&&(i=e.getWidth()/2|0),l==null&&(l=e.getHeight()/2|0);const c=n/2|0;if(this.leftInit=i-c,this.rightInit=i+c,this.upInit=l-c,this.downInit=l+c,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Q}detect(){let e=this.leftInit,n=this.rightInit,i=this.upInit,l=this.downInit,c=!1,u=!0,h=!1,m=!1,C=!1,N=!1,P=!1;const M=this.width,U=this.height;for(;u;){u=!1;let G=!0;for(;(G||!m)&&n<M;)G=this.containsBlackPoint(i,l,n,!1),G?(n++,u=!0,m=!0):m||n++;if(n>=M){c=!0;break}let K=!0;for(;(K||!C)&&l<U;)K=this.containsBlackPoint(e,n,l,!0),K?(l++,u=!0,C=!0):C||l++;if(l>=U){c=!0;break}let ee=!0;for(;(ee||!N)&&e>=0;)ee=this.containsBlackPoint(i,l,e,!1),ee?(e--,u=!0,N=!0):N||e--;if(e<0){c=!0;break}let le=!0;for(;(le||!P)&&i>=0;)le=this.containsBlackPoint(e,n,i,!0),le?(i--,u=!0,P=!0):P||i--;if(i<0){c=!0;break}u&&(h=!0)}if(!c&&h){const G=n-e;let K=null;for(let _e=1;K===null&&_e<G;_e++)K=this.getBlackPointOnSegment(e,l-_e,e+_e,l);if(K==null)throw new Q;let ee=null;for(let _e=1;ee===null&&_e<G;_e++)ee=this.getBlackPointOnSegment(e,i+_e,e+_e,i);if(ee==null)throw new Q;let le=null;for(let _e=1;le===null&&_e<G;_e++)le=this.getBlackPointOnSegment(n,i+_e,n-_e,i);if(le==null)throw new Q;let Ne=null;for(let _e=1;Ne===null&&_e<G;_e++)Ne=this.getBlackPointOnSegment(n,l-_e,n-_e,l);if(Ne==null)throw new Q;return this.centerEdges(Ne,K,le,ee)}else throw new Q}getBlackPointOnSegment(e,n,i,l){const c=Je.round(Je.distance(e,n,i,l)),u=(i-e)/c,h=(l-n)/c,m=this.image;for(let C=0;C<c;C++){const N=Je.round(e+C*u),P=Je.round(n+C*h);if(m.get(N,P))return new Ie(N,P)}return null}centerEdges(e,n,i,l){const c=e.getX(),u=e.getY(),h=n.getX(),m=n.getY(),C=i.getX(),N=i.getY(),P=l.getX(),M=l.getY(),U=xe.CORR;return c<this.width/2?[new Ie(P-U,M+U),new Ie(h+U,m+U),new Ie(C-U,N-U),new Ie(c+U,u-U)]:[new Ie(P+U,M+U),new Ie(h+U,m-U),new Ie(C-U,N+U),new Ie(c-U,u-U)]}containsBlackPoint(e,n,i,l){const c=this.image;if(l){for(let u=e;u<=n;u++)if(c.get(u,i))return!0}else for(let u=e;u<=n;u++)if(c.get(i,u))return!0;return!1}}xe.INIT_SIZE=10,xe.CORR=1;class Fe{static checkAndNudgePoints(e,n){const i=e.getWidth(),l=e.getHeight();let c=!0;for(let u=0;u<n.length&&c;u+=2){const h=Math.floor(n[u]),m=Math.floor(n[u+1]);if(h<-1||h>i||m<-1||m>l)throw new Q;c=!1,h===-1?(n[u]=0,c=!0):h===i&&(n[u]=i-1,c=!0),m===-1?(n[u+1]=0,c=!0):m===l&&(n[u+1]=l-1,c=!0)}c=!0;for(let u=n.length-2;u>=0&&c;u-=2){const h=Math.floor(n[u]),m=Math.floor(n[u+1]);if(h<-1||h>i||m<-1||m>l)throw new Q;c=!1,h===-1?(n[u]=0,c=!0):h===i&&(n[u]=i-1,c=!0),m===-1?(n[u+1]=0,c=!0):m===l&&(n[u+1]=l-1,c=!0)}}}class $e{constructor(e,n,i,l,c,u,h,m,C){this.a11=e,this.a21=n,this.a31=i,this.a12=l,this.a22=c,this.a32=u,this.a13=h,this.a23=m,this.a33=C}static quadrilateralToQuadrilateral(e,n,i,l,c,u,h,m,C,N,P,M,U,G,K,ee){const le=$e.quadrilateralToSquare(e,n,i,l,c,u,h,m);return $e.squareToQuadrilateral(C,N,P,M,U,G,K,ee).times(le)}transformPoints(e){const n=e.length,i=this.a11,l=this.a12,c=this.a13,u=this.a21,h=this.a22,m=this.a23,C=this.a31,N=this.a32,P=this.a33;for(let M=0;M<n;M+=2){const U=e[M],G=e[M+1],K=c*U+m*G+P;e[M]=(i*U+u*G+C)/K,e[M+1]=(l*U+h*G+N)/K}}transformPointsWithValues(e,n){const i=this.a11,l=this.a12,c=this.a13,u=this.a21,h=this.a22,m=this.a23,C=this.a31,N=this.a32,P=this.a33,M=e.length;for(let U=0;U<M;U++){const G=e[U],K=n[U],ee=c*G+m*K+P;e[U]=(i*G+u*K+C)/ee,n[U]=(l*G+h*K+N)/ee}}static squareToQuadrilateral(e,n,i,l,c,u,h,m){const C=e-i+c-h,N=n-l+u-m;if(C===0&&N===0)return new $e(i-e,c-i,e,l-n,u-l,n,0,0,1);{const P=i-c,M=h-c,U=l-u,G=m-u,K=P*G-M*U,ee=(C*G-M*N)/K,le=(P*N-C*U)/K;return new $e(i-e+ee*i,h-e+le*h,e,l-n+ee*l,m-n+le*m,n,ee,le,1)}}static quadrilateralToSquare(e,n,i,l,c,u,h,m){return $e.squareToQuadrilateral(e,n,i,l,c,u,h,m).buildAdjoint()}buildAdjoint(){return new $e(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new $e(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class ct extends Fe{sampleGrid(e,n,i,l,c,u,h,m,C,N,P,M,U,G,K,ee,le,Ne,_e){const Ce=$e.quadrilateralToQuadrilateral(l,c,u,h,m,C,N,P,M,U,G,K,ee,le,Ne,_e);return this.sampleGridWithTransform(e,n,i,Ce)}sampleGridWithTransform(e,n,i,l){if(n<=0||i<=0)throw new Q;const c=new Se(n,i),u=new Float32Array(2*n);for(let h=0;h<i;h++){const m=u.length,C=h+.5;for(let N=0;N<m;N+=2)u[N]=N/2+.5,u[N+1]=C;l.transformPoints(u),Fe.checkAndNudgePoints(e,u);try{for(let N=0;N<m;N+=2)e.get(Math.floor(u[N]),Math.floor(u[N+1]))&&c.set(N/2,h)}catch{throw new Q}}return c}}class Ve{static setGridSampler(e){Ve.gridSampler=e}static getInstance(){return Ve.gridSampler}}Ve.gridSampler=new ct;class At{constructor(e,n){this.x=e,this.y=n}toResultPoint(){return new Ie(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Wt{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let n=this.getMatrixCenter(),i=this.getBullsEyeCorners(n);if(e){let u=i[0];i[0]=i[2],i[2]=u}this.extractParameters(i);let l=this.sampleGrid(this.image,i[this.shift%4],i[(this.shift+1)%4],i[(this.shift+2)%4],i[(this.shift+3)%4]),c=this.getMatrixCornerPoints(i);return new Ct(l,c,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new Q;let n=2*this.nbCenterLayers,i=new Int32Array([this.sampleLine(e[0],e[1],n),this.sampleLine(e[1],e[2],n),this.sampleLine(e[2],e[3],n),this.sampleLine(e[3],e[0],n)]);this.shift=this.getRotation(i,n);let l=0;for(let u=0;u<4;u++){let h=i[(this.shift+u)%4];this.compact?(l<<=7,l+=h>>1&127):(l<<=10,l+=(h>>2&992)+(h>>1&31))}let c=this.getCorrectedParameterData(l,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)}getRotation(e,n){let i=0;e.forEach((l,c,u)=>{let h=(l>>n-2<<1)+(l&1);i=(i<<3)+h}),i=((i&1)<<11)+(i>>1);for(let l=0;l<4;l++)if(z.bitCount(i^this.EXPECTED_CORNER_BITS[l])<=2)return l;throw new Q}getCorrectedParameterData(e,n){let i,l;n?(i=7,l=2):(i=10,l=4);let c=i-l,u=new Int32Array(i);for(let m=i-1;m>=0;--m)u[m]=e&15,e>>=4;try{new Pt(we.AZTEC_PARAM).decode(u,c)}catch{throw new Q}let h=0;for(let m=0;m<l;m++)h=(h<<4)+u[m];return h}getBullsEyeCorners(e){let n=e,i=e,l=e,c=e,u=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let P=this.getFirstDifferent(n,u,1,-1),M=this.getFirstDifferent(i,u,1,1),U=this.getFirstDifferent(l,u,-1,1),G=this.getFirstDifferent(c,u,-1,-1);if(this.nbCenterLayers>2){let K=this.distancePoint(G,P)*this.nbCenterLayers/(this.distancePoint(c,n)*(this.nbCenterLayers+2));if(K<.75||K>1.25||!this.isWhiteOrBlackRectangle(P,M,U,G))break}n=P,i=M,l=U,c=G,u=!u}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Q;this.compact=this.nbCenterLayers===5;let h=new Ie(n.getX()+.5,n.getY()-.5),m=new Ie(i.getX()+.5,i.getY()+.5),C=new Ie(l.getX()-.5,l.getY()+.5),N=new Ie(c.getX()-.5,c.getY()-.5);return this.expandSquare([h,m,C,N],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,n,i,l;try{let h=new xe(this.image).detect();e=h[0],n=h[1],i=h[2],l=h[3]}catch{let m=this.image.getWidth()/2,C=this.image.getHeight()/2;e=this.getFirstDifferent(new At(m+7,C-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new At(m+7,C+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new At(m-7,C+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new At(m-7,C-7),!1,-1,-1).toResultPoint()}let c=Je.round((e.getX()+l.getX()+n.getX()+i.getX())/4),u=Je.round((e.getY()+l.getY()+n.getY()+i.getY())/4);try{let h=new xe(this.image,15,c,u).detect();e=h[0],n=h[1],i=h[2],l=h[3]}catch{e=this.getFirstDifferent(new At(c+7,u-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new At(c+7,u+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new At(c-7,u+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new At(c-7,u-7),!1,-1,-1).toResultPoint()}return c=Je.round((e.getX()+l.getX()+n.getX()+i.getX())/4),u=Je.round((e.getY()+l.getY()+n.getY()+i.getY())/4),new At(c,u)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,n,i,l,c){let u=Ve.getInstance(),h=this.getDimension(),m=h/2-this.nbCenterLayers,C=h/2+this.nbCenterLayers;return u.sampleGrid(e,h,h,m,m,C,m,C,C,m,C,n.getX(),n.getY(),i.getX(),i.getY(),l.getX(),l.getY(),c.getX(),c.getY())}sampleLine(e,n,i){let l=0,c=this.distanceResultPoint(e,n),u=c/i,h=e.getX(),m=e.getY(),C=u*(n.getX()-e.getX())/c,N=u*(n.getY()-e.getY())/c;for(let P=0;P<i;P++)this.image.get(Je.round(h+P*C),Je.round(m+P*N))&&(l|=1<<i-P-1);return l}isWhiteOrBlackRectangle(e,n,i,l){let c=3;e=new At(e.getX()-c,e.getY()+c),n=new At(n.getX()-c,n.getY()-c),i=new At(i.getX()+c,i.getY()-c),l=new At(l.getX()+c,l.getY()+c);let u=this.getColor(l,e);if(u===0)return!1;let h=this.getColor(e,n);return h!==u||(h=this.getColor(n,i),h!==u)?!1:(h=this.getColor(i,l),h===u)}getColor(e,n){let i=this.distancePoint(e,n),l=(n.getX()-e.getX())/i,c=(n.getY()-e.getY())/i,u=0,h=e.getX(),m=e.getY(),C=this.image.get(e.getX(),e.getY()),N=Math.ceil(i);for(let M=0;M<N;M++)h+=l,m+=c,this.image.get(Je.round(h),Je.round(m))!==C&&u++;let P=u/i;return P>.1&&P<.9?0:P<=.1===C?1:-1}getFirstDifferent(e,n,i,l){let c=e.getX()+i,u=e.getY()+l;for(;this.isValid(c,u)&&this.image.get(c,u)===n;)c+=i,u+=l;for(c-=i,u-=l;this.isValid(c,u)&&this.image.get(c,u)===n;)c+=i;for(c-=i;this.isValid(c,u)&&this.image.get(c,u)===n;)u+=l;return u-=l,new At(c,u)}expandSquare(e,n,i){let l=i/(2*n),c=e[0].getX()-e[2].getX(),u=e[0].getY()-e[2].getY(),h=(e[0].getX()+e[2].getX())/2,m=(e[0].getY()+e[2].getY())/2,C=new Ie(h+l*c,m+l*u),N=new Ie(h-l*c,m-l*u);c=e[1].getX()-e[3].getX(),u=e[1].getY()-e[3].getY(),h=(e[1].getX()+e[3].getX())/2,m=(e[1].getY()+e[3].getY())/2;let P=new Ie(h+l*c,m+l*u),M=new Ie(h-l*c,m-l*u);return[C,P,N,M]}isValid(e,n){return e>=0&&e<this.image.getWidth()&&n>0&&n<this.image.getHeight()}isValidPoint(e){let n=Je.round(e.getX()),i=Je.round(e.getY());return this.isValid(n,i)}distancePoint(e,n){return Je.distance(e.getX(),e.getY(),n.getX(),n.getY())}distanceResultPoint(e,n){return Je.distance(e.getX(),e.getY(),n.getX(),n.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(z.truncDivision(this.nbLayers-4,8)+1)+15}}class Ht{decode(e,n=null){let i=null,l=new Wt(e.getBlackMatrix()),c=null,u=null;try{let N=l.detectMirror(!1);c=N.getPoints(),this.reportFoundResultPoints(n,c),u=new qe().decode(N)}catch(N){i=N}if(u==null)try{let N=l.detectMirror(!0);c=N.getPoints(),this.reportFoundResultPoints(n,c),u=new qe().decode(N)}catch(N){throw i??N}let h=new ze(u.getText(),u.getRawBytes(),u.getNumBits(),c,fe.AZTEC,B.currentTimeMillis()),m=u.getByteSegments();m!=null&&h.putMetadata(He.BYTE_SEGMENTS,m);let C=u.getECLevel();return C!=null&&h.putMetadata(He.ERROR_CORRECTION_LEVEL,C),h}reportFoundResultPoints(e,n){if(e!=null){let i=e.get(oe.NEED_RESULT_POINT_CALLBACK);i!=null&&n.forEach((l,c,u)=>{i.foundPossibleResultPoint(l)})}}reset(){}}class Gt extends be{constructor(e=500){super(new Ht,e)}}class Be{decode(e,n){try{return this.doDecode(e,n)}catch{if(n&&n.get(oe.TRY_HARDER)===!0&&e.isRotateSupported()){const c=e.rotateCounterClockwise(),u=this.doDecode(c,n),h=u.getResultMetadata();let m=270;h!==null&&h.get(He.ORIENTATION)===!0&&(m=m+h.get(He.ORIENTATION)%360),u.putMetadata(He.ORIENTATION,m);const C=u.getResultPoints();if(C!==null){const N=c.getHeight();for(let P=0;P<C.length;P++)C[P]=new Ie(N-C[P].getY()-1,C[P].getX())}return u}else throw new Q}}reset(){}doDecode(e,n){const i=e.getWidth(),l=e.getHeight();let c=new J(i);const u=n&&n.get(oe.TRY_HARDER)===!0,h=Math.max(1,l>>(u?8:5));let m;u?m=l:m=15;const C=Math.trunc(l/2);for(let N=0;N<m;N++){const P=Math.trunc((N+1)/2),M=(N&1)===0,U=C+h*(M?P:-P);if(U<0||U>=l)break;try{c=e.getBlackRow(U,c)}catch{continue}for(let G=0;G<2;G++){if(G===1&&(c.reverse(),n&&n.get(oe.NEED_RESULT_POINT_CALLBACK)===!0)){const K=new Map;n.forEach((ee,le)=>K.set(le,ee)),K.delete(oe.NEED_RESULT_POINT_CALLBACK),n=K}try{const K=this.decodeRow(U,c,n);if(G===1){K.putMetadata(He.ORIENTATION,180);const ee=K.getResultPoints();ee!==null&&(ee[0]=new Ie(i-ee[0].getX()-1,ee[0].getY()),ee[1]=new Ie(i-ee[1].getX()-1,ee[1].getY()))}return K}catch{}}}throw new Q}static recordPattern(e,n,i){const l=i.length;for(let C=0;C<l;C++)i[C]=0;const c=e.getSize();if(n>=c)throw new Q;let u=!e.get(n),h=0,m=n;for(;m<c;){if(e.get(m)!==u)i[h]++;else{if(++h===l)break;i[h]=1,u=!u}m++}if(!(h===l||h===l-1&&m===c))throw new Q}static recordPatternInReverse(e,n,i){let l=i.length,c=e.get(n);for(;n>0&&l>=0;)e.get(--n)!==c&&(l--,c=!c);if(l>=0)throw new Q;Be.recordPattern(e,n+1,i)}static patternMatchVariance(e,n,i){const l=e.length;let c=0,u=0;for(let C=0;C<l;C++)c+=e[C],u+=n[C];if(c<u)return Number.POSITIVE_INFINITY;const h=c/u;i*=h;let m=0;for(let C=0;C<l;C++){const N=e[C],P=n[C]*h,M=N>P?N-P:P-N;if(M>i)return Number.POSITIVE_INFINITY;m+=M}return m/c}}class he extends Be{static findStartPattern(e){const n=e.getSize(),i=e.getNextSet(0);let l=0,c=Int32Array.from([0,0,0,0,0,0]),u=i,h=!1;const m=6;for(let C=i;C<n;C++)if(e.get(C)!==h)c[l]++;else{if(l===m-1){let N=he.MAX_AVG_VARIANCE,P=-1;for(let M=he.CODE_START_A;M<=he.CODE_START_C;M++){const U=Be.patternMatchVariance(c,he.CODE_PATTERNS[M],he.MAX_INDIVIDUAL_VARIANCE);U<N&&(N=U,P=M)}if(P>=0&&e.isRange(Math.max(0,u-(C-u)/2),u,!1))return Int32Array.from([u,C,P]);u+=c[0]+c[1],c=c.slice(2,c.length-1),c[l-1]=0,c[l]=0,l--}else l++;c[l]=1,h=!h}throw new Q}static decodeCode(e,n,i){Be.recordPattern(e,i,n);let l=he.MAX_AVG_VARIANCE,c=-1;for(let u=0;u<he.CODE_PATTERNS.length;u++){const h=he.CODE_PATTERNS[u],m=this.patternMatchVariance(n,h,he.MAX_INDIVIDUAL_VARIANCE);m<l&&(l=m,c=u)}if(c>=0)return c;throw new Q}decodeRow(e,n,i){const l=i&&i.get(oe.ASSUME_GS1)===!0,c=he.findStartPattern(n),u=c[2];let h=0;const m=new Uint8Array(20);m[h++]=u;let C;switch(u){case he.CODE_START_A:C=he.CODE_CODE_A;break;case he.CODE_START_B:C=he.CODE_CODE_B;break;case he.CODE_START_C:C=he.CODE_CODE_C;break;default:throw new q}let N=!1,P=!1,M="",U=c[0],G=c[1];const K=Int32Array.from([0,0,0,0,0,0]);let ee=0,le=0,Ne=u,_e=0,Ce=!0,_t=!1,vt=!1;for(;!N;){const Qr=P;switch(P=!1,ee=le,le=he.decodeCode(n,K,G),m[h++]=le,le!==he.CODE_STOP&&(Ce=!0),le!==he.CODE_STOP&&(_e++,Ne+=_e*le),U=G,G+=K.reduce((ts,ra)=>ts+ra,0),le){case he.CODE_START_A:case he.CODE_START_B:case he.CODE_START_C:throw new q}switch(C){case he.CODE_CODE_A:if(le<64)vt===_t?M+=String.fromCharCode(32+le):M+=String.fromCharCode(32+le+128),vt=!1;else if(le<96)vt===_t?M+=String.fromCharCode(le-64):M+=String.fromCharCode(le+64),vt=!1;else switch(le!==he.CODE_STOP&&(Ce=!1),le){case he.CODE_FNC_1:l&&(M.length===0?M+="]C1":M+="");break;case he.CODE_FNC_2:case he.CODE_FNC_3:break;case he.CODE_FNC_4_A:!_t&&vt?(_t=!0,vt=!1):_t&&vt?(_t=!1,vt=!1):vt=!0;break;case he.CODE_SHIFT:P=!0,C=he.CODE_CODE_B;break;case he.CODE_CODE_B:C=he.CODE_CODE_B;break;case he.CODE_CODE_C:C=he.CODE_CODE_C;break;case he.CODE_STOP:N=!0;break}break;case he.CODE_CODE_B:if(le<96)vt===_t?M+=String.fromCharCode(32+le):M+=String.fromCharCode(32+le+128),vt=!1;else switch(le!==he.CODE_STOP&&(Ce=!1),le){case he.CODE_FNC_1:l&&(M.length===0?M+="]C1":M+="");break;case he.CODE_FNC_2:case he.CODE_FNC_3:break;case he.CODE_FNC_4_B:!_t&&vt?(_t=!0,vt=!1):_t&&vt?(_t=!1,vt=!1):vt=!0;break;case he.CODE_SHIFT:P=!0,C=he.CODE_CODE_A;break;case he.CODE_CODE_A:C=he.CODE_CODE_A;break;case he.CODE_CODE_C:C=he.CODE_CODE_C;break;case he.CODE_STOP:N=!0;break}break;case he.CODE_CODE_C:if(le<100)le<10&&(M+="0"),M+=le;else switch(le!==he.CODE_STOP&&(Ce=!1),le){case he.CODE_FNC_1:l&&(M.length===0?M+="]C1":M+="");break;case he.CODE_CODE_A:C=he.CODE_CODE_A;break;case he.CODE_CODE_B:C=he.CODE_CODE_B;break;case he.CODE_STOP:N=!0;break}break}Qr&&(C=C===he.CODE_CODE_A?he.CODE_CODE_B:he.CODE_CODE_A)}const tr=G-U;if(G=n.getNextUnset(G),!n.isRange(G,Math.min(n.getSize(),G+(G-U)/2),!1))throw new Q;if(Ne-=_e*ee,Ne%103!==ee)throw new D;const _r=M.length;if(_r===0)throw new Q;_r>0&&Ce&&(C===he.CODE_CODE_C?M=M.substring(0,_r-2):M=M.substring(0,_r-1));const Cn=(c[1]+c[0])/2,Ut=U+tr/2,an=m.length,Xn=new Uint8Array(an);for(let Qr=0;Qr<an;Qr++)Xn[Qr]=m[Qr];const Ii=[new Ie(Cn,e),new Ie(Ut,e)];return new ze(M,Xn,0,Ii,fe.CODE_128,new Date().getTime())}}he.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],he.MAX_AVG_VARIANCE=.25,he.MAX_INDIVIDUAL_VARIANCE=.7,he.CODE_SHIFT=98,he.CODE_CODE_C=99,he.CODE_CODE_B=100,he.CODE_CODE_A=101,he.CODE_FNC_1=102,he.CODE_FNC_2=97,he.CODE_FNC_3=96,he.CODE_FNC_4_A=101,he.CODE_FNC_4_B=100,he.CODE_START_A=103,he.CODE_START_B=104,he.CODE_START_C=105,he.CODE_STOP=106;class gt extends Be{constructor(e=!1,n=!1){super(),this.usingCheckDigit=e,this.extendedMode=n,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,n,i){let l=this.counters;l.fill(0),this.decodeRowResult="";let c=gt.findAsteriskPattern(n,l),u=n.getNextSet(c[1]),h=n.getSize(),m,C;do{gt.recordPattern(n,u,l);let K=gt.toNarrowWidePattern(l);if(K<0)throw new Q;m=gt.patternToChar(K),this.decodeRowResult+=m,C=u;for(let ee of l)u+=ee;u=n.getNextSet(u)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let N=0;for(let K of l)N+=K;let P=u-C-N;if(u!==h&&P*2<N)throw new Q;if(this.usingCheckDigit){let K=this.decodeRowResult.length-1,ee=0;for(let le=0;le<K;le++)ee+=gt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(le));if(this.decodeRowResult.charAt(K)!==gt.ALPHABET_STRING.charAt(ee%43))throw new D;this.decodeRowResult=this.decodeRowResult.substring(0,K)}if(this.decodeRowResult.length===0)throw new Q;let M;this.extendedMode?M=gt.decodeExtended(this.decodeRowResult):M=this.decodeRowResult;let U=(c[1]+c[0])/2,G=C+N/2;return new ze(M,null,0,[new Ie(U,e),new Ie(G,e)],fe.CODE_39,new Date().getTime())}static findAsteriskPattern(e,n){let i=e.getSize(),l=e.getNextSet(0),c=0,u=l,h=!1,m=n.length;for(let C=l;C<i;C++)if(e.get(C)!==h)n[c]++;else{if(c===m-1){if(this.toNarrowWidePattern(n)===gt.ASTERISK_ENCODING&&e.isRange(Math.max(0,u-Math.floor((C-u)/2)),u,!1))return[u,C];u+=n[0]+n[1],n.copyWithin(0,2,2+c-1),n[c-1]=0,n[c]=0,c--}else c++;n[c]=1,h=!h}throw new Q}static toNarrowWidePattern(e){let n=e.length,i=0,l;do{let c=2147483647;for(let m of e)m<c&&m>i&&(c=m);i=c,l=0;let u=0,h=0;for(let m=0;m<n;m++){let C=e[m];C>i&&(h|=1<<n-1-m,l++,u+=C)}if(l===3){for(let m=0;m<n&&l>0;m++){let C=e[m];if(C>i&&(l--,C*2>=u))return-1}return h}}while(l>3);return-1}static patternToChar(e){for(let n=0;n<gt.CHARACTER_ENCODINGS.length;n++)if(gt.CHARACTER_ENCODINGS[n]===e)return gt.ALPHABET_STRING.charAt(n);if(e===gt.ASTERISK_ENCODING)return"*";throw new Q}static decodeExtended(e){let n=e.length,i="";for(let l=0;l<n;l++){let c=e.charAt(l);if(c==="+"||c==="$"||c==="%"||c==="/"){let u=e.charAt(l+1),h="\0";switch(c){case"+":if(u>="A"&&u<="Z")h=String.fromCharCode(u.charCodeAt(0)+32);else throw new q;break;case"$":if(u>="A"&&u<="Z")h=String.fromCharCode(u.charCodeAt(0)-64);else throw new q;break;case"%":if(u>="A"&&u<="E")h=String.fromCharCode(u.charCodeAt(0)-38);else if(u>="F"&&u<="J")h=String.fromCharCode(u.charCodeAt(0)-11);else if(u>="K"&&u<="O")h=String.fromCharCode(u.charCodeAt(0)+16);else if(u>="P"&&u<="T")h=String.fromCharCode(u.charCodeAt(0)+43);else if(u==="U")h="\0";else if(u==="V")h="@";else if(u==="W")h="`";else if(u==="X"||u==="Y"||u==="Z")h="";else throw new q;break;case"/":if(u>="A"&&u<="O")h=String.fromCharCode(u.charCodeAt(0)-32);else if(u==="Z")h=":";else throw new q;break}i+=h,l++}else i+=c}return i}}gt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",gt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],gt.ASTERISK_ENCODING=148;class ut extends Be{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,n,i){let l=this.decodeStart(n),c=this.decodeEnd(n),u=new De;ut.decodeMiddle(n,l[1],c[0],u);let h=u.toString(),m=null;i!=null&&(m=i.get(oe.ALLOWED_LENGTHS)),m==null&&(m=ut.DEFAULT_ALLOWED_LENGTHS);let C=h.length,N=!1,P=0;for(let G of m){if(C===G){N=!0;break}G>P&&(P=G)}if(!N&&C>P&&(N=!0),!N)throw new q;const M=[new Ie(l[1],e),new Ie(c[0],e)];return new ze(h,null,0,M,fe.ITF,new Date().getTime())}static decodeMiddle(e,n,i,l){let c=new Int32Array(10),u=new Int32Array(5),h=new Int32Array(5);for(c.fill(0),u.fill(0),h.fill(0);n<i;){Be.recordPattern(e,n,c);for(let C=0;C<5;C++){let N=2*C;u[C]=c[N],h[C]=c[N+1]}let m=ut.decodeDigit(u);l.append(m.toString()),m=this.decodeDigit(h),l.append(m.toString()),c.forEach(function(C){n+=C})}}decodeStart(e){let n=ut.skipWhiteSpace(e),i=ut.findGuardPattern(e,n,ut.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(e,i[0]),i}validateQuietZone(e,n){let i=this.narrowLineWidth*10;i=i<n?i:n;for(let l=n-1;i>0&&l>=0&&!e.get(l);l--)i--;if(i!==0)throw new Q}static skipWhiteSpace(e){const n=e.getSize(),i=e.getNextSet(0);if(i===n)throw new Q;return i}decodeEnd(e){e.reverse();try{let n=ut.skipWhiteSpace(e),i;try{i=ut.findGuardPattern(e,n,ut.END_PATTERN_REVERSED[0])}catch(c){c instanceof Q&&(i=ut.findGuardPattern(e,n,ut.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,i[0]);let l=i[0];return i[0]=e.getSize()-i[1],i[1]=e.getSize()-l,i}finally{e.reverse()}}static findGuardPattern(e,n,i){let l=i.length,c=new Int32Array(l),u=e.getSize(),h=!1,m=0,C=n;c.fill(0);for(let N=n;N<u;N++)if(e.get(N)!==h)c[m]++;else{if(m===l-1){if(Be.patternMatchVariance(c,i,ut.MAX_INDIVIDUAL_VARIANCE)<ut.MAX_AVG_VARIANCE)return[C,N];C+=c[0]+c[1],B.arraycopy(c,2,c,0,m-1),c[m-1]=0,c[m]=0,m--}else m++;c[m]=1,h=!h}throw new Q}static decodeDigit(e){let n=ut.MAX_AVG_VARIANCE,i=-1,l=ut.PATTERNS.length;for(let c=0;c<l;c++){let u=ut.PATTERNS[c],h=Be.patternMatchVariance(e,u,ut.MAX_INDIVIDUAL_VARIANCE);h<n?(n=h,i=c):h===n&&(i=-1)}if(i>=0)return i%10;throw new Q}}ut.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ut.MAX_AVG_VARIANCE=.38,ut.MAX_INDIVIDUAL_VARIANCE=.5,ut.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ut.START_PATTERN=Int32Array.from([1,1,1,1]),ut.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Mt extends Be{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let n=!1,i,l=0,c=Int32Array.from([0,0,0]);for(;!n;){c=Int32Array.from([0,0,0]),i=Mt.findGuardPattern(e,l,!1,this.START_END_PATTERN,c);let u=i[0];l=i[1];let h=u-(l-u);h>=0&&(n=e.isRange(h,u,!1))}return i}static checkChecksum(e){return Mt.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let i=parseInt(e.charAt(n-1),10);return Mt.getStandardUPCEANChecksum(e.substring(0,n-1))===i}static getStandardUPCEANChecksum(e){let n=e.length,i=0;for(let l=n-1;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;i+=c}i*=3;for(let l=n-2;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;i+=c}return(1e3-i)%10}static decodeEnd(e,n){return Mt.findGuardPattern(e,n,!1,Mt.START_END_PATTERN,new Int32Array(Mt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,n,i,l){return this.findGuardPattern(e,n,i,l,new Int32Array(l.length))}static findGuardPattern(e,n,i,l,c){let u=e.getSize();n=i?e.getNextUnset(n):e.getNextSet(n);let h=0,m=n,C=l.length,N=i;for(let P=n;P<u;P++)if(e.get(P)!==N)c[h]++;else{if(h===C-1){if(Be.patternMatchVariance(c,l,Mt.MAX_INDIVIDUAL_VARIANCE)<Mt.MAX_AVG_VARIANCE)return Int32Array.from([m,P]);m+=c[0]+c[1];let M=c.slice(2,c.length-1);for(let U=0;U<h-1;U++)c[U]=M[U];c[h-1]=0,c[h]=0,h--}else h++;c[h]=1,N=!N}throw new Q}static decodeDigit(e,n,i,l){this.recordPattern(e,i,n);let c=this.MAX_AVG_VARIANCE,u=-1,h=l.length;for(let m=0;m<h;m++){let C=l[m],N=Be.patternMatchVariance(n,C,Mt.MAX_INDIVIDUAL_VARIANCE);N<c&&(c=N,u=m)}if(u>=0)return u;throw new Q}}Mt.MAX_AVG_VARIANCE=.48,Mt.MAX_INDIVIDUAL_VARIANCE=.7,Mt.START_END_PATTERN=Int32Array.from([1,1,1]),Mt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Mt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Mt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Mn{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,i){let l=this.decodeRowStringBuffer,c=this.decodeMiddle(n,i,l),u=l.toString(),h=Mn.parseExtensionString(u),m=[new Ie((i[0]+i[1])/2,e),new Ie(c,e)],C=new ze(u,null,0,m,fe.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&C.putAllMetadata(h),C}decodeMiddle(e,n,i){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u=n[1],h=0;for(let C=0;C<5&&u<c;C++){let N=Mt.decodeDigit(e,l,u,Mt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+N%10);for(let P of l)u+=P;N>=10&&(h|=1<<4-C),C!==4&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(i.length!==5)throw new Q;let m=this.determineCheckDigit(h);if(Mn.extensionChecksum(i.toString())!==m)throw new Q;return u}static extensionChecksum(e){let n=e.length,i=0;for(let l=n-2;l>=0;l-=2)i+=e.charAt(l).charCodeAt(0)-48;i*=3;for(let l=n-1;l>=0;l-=2)i+=e.charAt(l).charCodeAt(0)-48;return i*=3,i%10}determineCheckDigit(e){for(let n=0;n<10;n++)if(e===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new Q}static parseExtensionString(e){if(e.length!==5)return null;let n=Mn.parseExtension5String(e);return n==null?null:new Map([[He.SUGGESTED_PRICE,n]])}static parseExtension5String(e){let n;switch(e.charAt(0)){case"0":n="";break;case"5":n="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n="";break}let i=parseInt(e.substring(1)),l=(i/100).toString(),c=i%100,u=c<10?"0"+c:c.toString();return n+l+"."+u}}class Dr{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,i){let l=this.decodeRowStringBuffer,c=this.decodeMiddle(n,i,l),u=l.toString(),h=Dr.parseExtensionString(u),m=[new Ie((i[0]+i[1])/2,e),new Ie(c,e)],C=new ze(u,null,0,m,fe.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&C.putAllMetadata(h),C}decodeMiddle(e,n,i){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u=n[1],h=0;for(let m=0;m<2&&u<c;m++){let C=Mt.decodeDigit(e,l,u,Mt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+C%10);for(let N of l)u+=N;C>=10&&(h|=1<<1-m),m!==1&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(i.length!==2)throw new Q;if(parseInt(i.toString())%4!==h)throw new Q;return u}static parseExtensionString(e){return e.length!==2?null:new Map([[He.ISSUE_NUMBER,parseInt(e)]])}}class Un{static decodeRow(e,n,i){let l=Mt.findGuardPattern(n,i,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Mn().decodeRow(e,n,l)}catch{return new Dr().decodeRow(e,n,l)}}}Un.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class pt extends Mt{constructor(){super(),this.decodeRowStringBuffer="",pt.L_AND_G_PATTERNS=pt.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let n=pt.L_PATTERNS[e-10],i=new Int32Array(n.length);for(let l=0;l<n.length;l++)i[l]=n[n.length-l-1];pt.L_AND_G_PATTERNS[e]=i}}decodeRow(e,n,i){let l=pt.findStartGuardPattern(n),c=i==null?null:i.get(oe.NEED_RESULT_POINT_CALLBACK);if(c!=null){const Ce=new Ie((l[0]+l[1])/2,e);c.foundPossibleResultPoint(Ce)}let u=this.decodeMiddle(n,l,this.decodeRowStringBuffer),h=u.rowOffset,m=u.resultString;if(c!=null){const Ce=new Ie(h,e);c.foundPossibleResultPoint(Ce)}let C=this.decodeEnd(n,h);if(c!=null){const Ce=new Ie((C[0]+C[1])/2,e);c.foundPossibleResultPoint(Ce)}let N=C[1],P=N+(N-C[0]);if(P>=n.getSize()||!n.isRange(N,P,!1))throw new Q;let M=m.toString();if(M.length<8)throw new q;if(!pt.checkChecksum(M))throw new D;let U=(l[1]+l[0])/2,G=(C[1]+C[0])/2,K=this.getBarcodeFormat(),ee=[new Ie(U,e),new Ie(G,e)],le=new ze(M,null,0,ee,K,new Date().getTime()),Ne=0;try{let Ce=Un.decodeRow(e,n,C[1]);le.putMetadata(He.UPC_EAN_EXTENSION,Ce.getText()),le.putAllMetadata(Ce.getResultMetadata()),le.addResultPoints(Ce.getResultPoints()),Ne=Ce.getText().length}catch{}let _e=i==null?null:i.get(oe.ALLOWED_EAN_EXTENSIONS);if(_e!=null){let Ce=!1;for(let _t in _e)if(Ne.toString()===_t){Ce=!0;break}if(!Ce)throw new Q}return le}decodeEnd(e,n){return pt.findGuardPattern(e,n,!1,pt.START_END_PATTERN,new Int32Array(pt.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return pt.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let i=parseInt(e.charAt(n-1),10);return pt.getStandardUPCEANChecksum(e.substring(0,n-1))===i}static getStandardUPCEANChecksum(e){let n=e.length,i=0;for(let l=n-1;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;i+=c}i*=3;for(let l=n-2;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;i+=c}return(1e3-i)%10}}class Ln extends pt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,i){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u=n[1],h=0;for(let C=0;C<6&&u<c;C++){let N=pt.decodeDigit(e,l,u,pt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+N%10);for(let P of l)u+=P;N>=10&&(h|=1<<5-C)}i=Ln.determineFirstDigit(i,h),u=pt.findGuardPattern(e,u,!0,pt.MIDDLE_PATTERN,new Int32Array(pt.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<6&&u<c;C++){let N=pt.decodeDigit(e,l,u,pt.L_PATTERNS);i+=String.fromCharCode(48+N);for(let P of l)u+=P}return{rowOffset:u,resultString:i}}getBarcodeFormat(){return fe.EAN_13}static determineFirstDigit(e,n){for(let i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return e=String.fromCharCode(48+i)+e,e;throw new Q}}Ln.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class bs extends pt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,i){const l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u=n[1];for(let m=0;m<4&&u<c;m++){let C=pt.decodeDigit(e,l,u,pt.L_PATTERNS);i+=String.fromCharCode(48+C);for(let N of l)u+=N}u=pt.findGuardPattern(e,u,!0,pt.MIDDLE_PATTERN,new Int32Array(pt.MIDDLE_PATTERN.length).fill(0))[1];for(let m=0;m<4&&u<c;m++){let C=pt.decodeDigit(e,l,u,pt.L_PATTERNS);i+=String.fromCharCode(48+C);for(let N of l)u+=N}return{rowOffset:u,resultString:i}}getBarcodeFormat(){return fe.EAN_8}}class Ui extends pt{constructor(){super(...arguments),this.ean13Reader=new Ln}getBarcodeFormat(){return fe.UPC_A}decode(e,n){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,n,i))}decodeMiddle(e,n,i){return this.ean13Reader.decodeMiddle(e,n,i)}maybeReturnResult(e){let n=e.getText();if(n.charAt(0)==="0"){let i=new ze(n.substring(1),null,null,e.getResultPoints(),fe.UPC_A);return e.getResultMetadata()!=null&&i.putAllMetadata(e.getResultMetadata()),i}else throw new Q}reset(){this.ean13Reader.reset()}}class qn extends pt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,n,i){const l=this.decodeMiddleCounters.map(C=>C);l[0]=0,l[1]=0,l[2]=0,l[3]=0;const c=e.getSize();let u=n[1],h=0;for(let C=0;C<6&&u<c;C++){const N=qn.decodeDigit(e,l,u,qn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+N%10);for(let P of l)u+=P;N>=10&&(h|=1<<5-C)}let m=qn.determineNumSysAndCheckDigit(i,h);return{rowOffset:u,resultString:m}}decodeEnd(e,n){return qn.findGuardPatternWithoutCounters(e,n,!0,qn.MIDDLE_END_PATTERN)}checkChecksum(e){return pt.checkChecksum(qn.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,n){for(let i=0;i<=1;i++)for(let l=0;l<10;l++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][l]){let c=String.fromCharCode(48+i),u=String.fromCharCode(48+l);return c+e+u}throw Q.getNotFoundInstance()}getBarcodeFormat(){return fe.UPC_E}static convertUPCEtoUPCA(e){const n=e.slice(1,7).split("").map(c=>c.charCodeAt(0)),i=new De;i.append(e.charAt(0));let l=n[5];switch(l){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(l),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(l);break}return e.length>=8&&i.append(e.charAt(7)),i.toString()}}qn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),qn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Wi extends Be{constructor(e){super();let n=e==null?null:e.get(oe.POSSIBLE_FORMATS),i=[];f(n)?(i.push(new Ln),i.push(new Ui),i.push(new bs),i.push(new qn)):(n.indexOf(fe.EAN_13)>-1&&i.push(new Ln),n.indexOf(fe.UPC_A)>-1&&i.push(new Ui),n.indexOf(fe.EAN_8)>-1&&i.push(new bs),n.indexOf(fe.UPC_E)>-1&&i.push(new qn)),this.readers=i}decodeRow(e,n,i){for(let l of this.readers)try{const c=l.decodeRow(e,n,i),u=c.getBarcodeFormat()===fe.EAN_13&&c.getText().charAt(0)==="0",h=i==null?null:i.get(oe.POSSIBLE_FORMATS),m=h==null||h.includes(fe.UPC_A);if(u&&m){const C=c.getRawBytes(),N=new ze(c.getText().substring(1),C,C?C.length:null,c.getResultPoints(),fe.UPC_A);return N.putAllMetadata(c.getResultMetadata()),N}return c}catch{}throw new Q}reset(){for(let e of this.readers)e.reset()}}class on extends Be{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,n){for(let i=0;i<n.length;i++)if(Be.patternMatchVariance(e,n[i],on.MAX_INDIVIDUAL_VARIANCE)<on.MAX_AVG_VARIANCE)return i;throw new Q}static count(e){return Je.sum(new Int32Array(e))}static increment(e,n){let i=0,l=n[0];for(let c=1;c<e.length;c++)n[c]>l&&(l=n[c],i=c);e[i]++}static decrement(e,n){let i=0,l=n[0];for(let c=1;c<e.length;c++)n[c]<l&&(l=n[c],i=c);e[i]--}static isFinderPattern(e){let n=e[0]+e[1],i=n+e[2]+e[3],l=n/i;if(l>=on.MIN_FINDER_PATTERN_RATIO&&l<=on.MAX_FINDER_PATTERN_RATIO){let c=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;for(let h of e)h>u&&(u=h),h<c&&(c=h);return u<10*c}return!1}}on.MAX_AVG_VARIANCE=.2,on.MAX_INDIVIDUAL_VARIANCE=.45,on.MIN_FINDER_PATTERN_RATIO=9.5/12,on.MAX_FINDER_PATTERN_RATIO=12.5/14;class Mr{constructor(e,n){this.value=e,this.checksumPortion=n}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Mr))return!1;const n=e;return this.value===n.value&&this.checksumPortion===n.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class si{constructor(e,n,i,l,c){this.value=e,this.startEnd=n,this.value=e,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new Ie(i,c)),this.resultPoints.push(new Ie(l,c))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof si))return!1;const n=e;return this.value===n.value}hashCode(){return this.value}}class An{constructor(){}static getRSSvalue(e,n,i){let l=0;for(let m of e)l+=m;let c=0,u=0,h=e.length;for(let m=0;m<h-1;m++){let C;for(C=1,u|=1<<m;C<e[m];C++,u&=~(1<<m)){let N=An.combins(l-C-1,h-m-2);if(i&&u===0&&l-C-(h-m-1)>=h-m-1&&(N-=An.combins(l-C-(h-m),h-m-2)),h-m-1>1){let P=0;for(let M=l-C-(h-m-2);M>n;M--)P+=An.combins(l-C-M-1,h-m-3);N-=P*(h-1-m)}else l-C>n&&N--;c+=N}l-=C}return c}static combins(e,n){let i,l;e-n>n?(l=n,i=e-n):(l=e-n,i=n);let c=1,u=1;for(let h=e;h>i;h--)c*=h,u<=l&&(c/=u,u++);for(;u<=l;)c/=u,u++;return c}}class Hi{static buildBitArray(e){let n=e.length*2-1;e[e.length-1].getRightChar()==null&&(n-=1);let i=12*n,l=new J(i),c=0,h=e[0].getRightChar().getValue();for(let m=11;m>=0;--m)h&1<<m&&l.set(c),c++;for(let m=1;m<e.length;++m){let C=e[m],N=C.getLeftChar().getValue();for(let P=11;P>=0;--P)N&1<<P&&l.set(c),c++;if(C.getRightChar()!=null){let P=C.getRightChar().getValue();for(let M=11;M>=0;--M)P&1<<M&&l.set(c),c++}}return l}}class lr{constructor(e,n){n?this.decodedInformation=null:(this.finished=e,this.decodedInformation=n)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class oi{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class fn extends oi{constructor(e,n){super(e),this.value=n}getValue(){return this.value}isFNC1(){return this.value===fn.FNC1}}fn.FNC1="$";class cr extends oi{constructor(e,n,i){super(e),i?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=n}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class In extends oi{constructor(e,n,i){if(super(e),n<0||n>10||i<0||i>10)throw new q;this.firstDigit=n,this.secondDigit=i}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===In.FNC1}isSecondDigitFNC1(){return this.secondDigit===In.FNC1}isAnyFNC1(){return this.firstDigit===In.FNC1||this.secondDigit===In.FNC1}}In.FNC1=10;class Ue{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new Q;let n=e.substring(0,2);for(let c of Ue.TWO_DIGIT_DATA_LENGTH)if(c[0]===n)return c[1]===Ue.VARIABLE_LENGTH?Ue.processVariableAI(2,c[2],e):Ue.processFixedAI(2,c[1],e);if(e.length<3)throw new Q;let i=e.substring(0,3);for(let c of Ue.THREE_DIGIT_DATA_LENGTH)if(c[0]===i)return c[1]===Ue.VARIABLE_LENGTH?Ue.processVariableAI(3,c[2],e):Ue.processFixedAI(3,c[1],e);for(let c of Ue.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(c[0]===i)return c[1]===Ue.VARIABLE_LENGTH?Ue.processVariableAI(4,c[2],e):Ue.processFixedAI(4,c[1],e);if(e.length<4)throw new Q;let l=e.substring(0,4);for(let c of Ue.FOUR_DIGIT_DATA_LENGTH)if(c[0]===l)return c[1]===Ue.VARIABLE_LENGTH?Ue.processVariableAI(4,c[2],e):Ue.processFixedAI(4,c[1],e);throw new Q}static processFixedAI(e,n,i){if(i.length<e)throw new Q;let l=i.substring(0,e);if(i.length<e+n)throw new Q;let c=i.substring(e,e+n),u=i.substring(e+n),h="("+l+")"+c,m=Ue.parseFieldsInGeneralPurpose(u);return m==null?h:h+m}static processVariableAI(e,n,i){let l=i.substring(0,e),c;i.length<e+n?c=i.length:c=e+n;let u=i.substring(e,c),h=i.substring(c),m="("+l+")"+u,C=Ue.parseFieldsInGeneralPurpose(h);return C==null?m:m+C}}Ue.VARIABLE_LENGTH=[],Ue.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ue.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ue.VARIABLE_LENGTH,20],["22",Ue.VARIABLE_LENGTH,29],["30",Ue.VARIABLE_LENGTH,8],["37",Ue.VARIABLE_LENGTH,8],["90",Ue.VARIABLE_LENGTH,30],["91",Ue.VARIABLE_LENGTH,30],["92",Ue.VARIABLE_LENGTH,30],["93",Ue.VARIABLE_LENGTH,30],["94",Ue.VARIABLE_LENGTH,30],["95",Ue.VARIABLE_LENGTH,30],["96",Ue.VARIABLE_LENGTH,30],["97",Ue.VARIABLE_LENGTH,3],["98",Ue.VARIABLE_LENGTH,30],["99",Ue.VARIABLE_LENGTH,30]],Ue.THREE_DIGIT_DATA_LENGTH=[["240",Ue.VARIABLE_LENGTH,30],["241",Ue.VARIABLE_LENGTH,30],["242",Ue.VARIABLE_LENGTH,6],["250",Ue.VARIABLE_LENGTH,30],["251",Ue.VARIABLE_LENGTH,30],["253",Ue.VARIABLE_LENGTH,17],["254",Ue.VARIABLE_LENGTH,20],["400",Ue.VARIABLE_LENGTH,30],["401",Ue.VARIABLE_LENGTH,30],["402",17],["403",Ue.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ue.VARIABLE_LENGTH,20],["421",Ue.VARIABLE_LENGTH,15],["422",3],["423",Ue.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ue.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ue.VARIABLE_LENGTH,15],["391",Ue.VARIABLE_LENGTH,18],["392",Ue.VARIABLE_LENGTH,15],["393",Ue.VARIABLE_LENGTH,18],["703",Ue.VARIABLE_LENGTH,30]],Ue.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ue.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ue.VARIABLE_LENGTH,20],["8003",Ue.VARIABLE_LENGTH,30],["8004",Ue.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ue.VARIABLE_LENGTH,30],["8008",Ue.VARIABLE_LENGTH,12],["8018",18],["8020",Ue.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ue.VARIABLE_LENGTH,70],["8200",Ue.VARIABLE_LENGTH,70]];class ai{constructor(e){this.buffer=new De,this.information=e}decodeAllCodes(e,n){let i=n,l=null;do{let c=this.decodeGeneralPurposeField(i,l),u=Ue.parseFieldsInGeneralPurpose(c.getNewString());if(u!=null&&e.append(u),c.isRemaining()?l=""+c.getRemainingValue():l=null,i===c.getNewPosition())break;i=c.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let n=e;n<e+3;++n)if(this.information.get(n))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let c=this.extractNumericValueFromBitArray(e,4);return c===0?new In(this.information.getSize(),In.FNC1,In.FNC1):new In(this.information.getSize(),c-1,In.FNC1)}let n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,l=(n-8)%11;return new In(e+7,i,l)}extractNumericValueFromBitArray(e,n){return ai.extractNumericValueFromBitArray(this.information,e,n)}static extractNumericValueFromBitArray(e,n,i){let l=0;for(let c=0;c<i;++c)e.get(n+c)&&(l|=1<<i-c-1);return l}decodeGeneralPurposeField(e,n){this.buffer.setLengthToZero(),n!=null&&this.buffer.append(n),this.current.setPosition(e);let i=this.parseBlocks();return i!=null&&i.isRemaining()?new cr(this.current.getPosition(),this.buffer.toString(),i.getRemainingValue()):new cr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,n;do{let i=this.current.getPosition();if(this.current.isAlpha()?(n=this.parseAlphaBlock(),e=n.isFinished()):this.current.isIsoIec646()?(n=this.parseIsoIec646Block(),e=n.isFinished()):(n=this.parseNumericBlock(),e=n.isFinished()),!(i!==this.current.getPosition())&&!e)break}while(!e);return n.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let n;return e.isSecondDigitFNC1()?n=new cr(this.current.getPosition(),this.buffer.toString()):n=new cr(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new lr(!0,n)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let n=new cr(this.current.getPosition(),this.buffer.toString());return new lr(!0,n)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new lr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new cr(this.current.getPosition(),this.buffer.toString());return new lr(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new lr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new cr(this.current.getPosition(),this.buffer.toString());return new lr(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new lr(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+7>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<116)return!0;if(e+8>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(e,8);return l>=232&&l<253}decodeIsoIec646(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new fn(e+5,fn.FNC1);if(n>=5&&n<15)return new fn(e+5,"0"+(n-5));let i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<90)return new fn(e+7,""+(i+1));if(i>=90&&i<116)return new fn(e+7,""+(i+7));let l=this.extractNumericValueFromBitArray(e,8),c;switch(l){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new q}return new fn(e+8,c)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+6>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,6);return i>=16&&i<63}decodeAlphanumeric(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new fn(e+5,fn.FNC1);if(n>=5&&n<15)return new fn(e+5,"0"+(n-5));let i=this.extractNumericValueFromBitArray(e,6);if(i>=32&&i<58)return new fn(e+6,""+(i+33));let l;switch(i){case 58:l="*";break;case 59:l=",";break;case 60:l="-";break;case 61:l=".";break;case 62:l="/";break;default:throw new ht("Decoding invalid alphanumeric value: "+i)}return new fn(e+6,l)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<5&&n+e<this.information.getSize();++n)if(n===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+n))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let n=e;n<e+3;++n)if(this.information.get(n))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<4&&n+e<this.information.getSize();++n)if(this.information.get(e+n))return!1;return!0}}class Gi{constructor(e){this.information=e,this.generalDecoder=new ai(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Bn extends Gi{constructor(e){super(e)}encodeCompressedGtin(e,n){e.append("(01)");let i=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,n,i)}encodeCompressedGtinWithoutAI(e,n,i){for(let l=0;l<4;++l){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*l,10);c/100===0&&e.append("0"),c/10===0&&e.append("0"),e.append(c)}Bn.appendCheckDigit(e,i)}static appendCheckDigit(e,n){let i=0;for(let l=0;l<13;l++){let c=e.charAt(l+n).charCodeAt(0)-48;i+=l&1?c:3*c}i=10-i%10,i===10&&(i=0),e.append(i)}}Bn.GTIN_SIZE=40;class Qn extends Bn{constructor(e){super(e)}parseInformation(){let e=new De;e.append("(01)");let n=e.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(Qn.HEADER_SIZE,4);return e.append(i),this.encodeCompressedGtinWithoutAI(e,Qn.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(e,Qn.HEADER_SIZE+44)}}Qn.HEADER_SIZE=4;class Kr extends Gi{constructor(e){super(e)}parseInformation(){let e=new De;return this.getGeneralDecoder().decodeAllCodes(e,Kr.HEADER_SIZE)}}Kr.HEADER_SIZE=5;class Ci extends Bn{constructor(e){super(e)}encodeCompressedWeight(e,n,i){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(e,l);let c=this.checkWeight(l),u=1e5;for(let h=0;h<5;++h)c/u===0&&e.append("0"),u/=10;e.append(c)}}class Jn extends Ci{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=Jn.HEADER_SIZE+Ci.GTIN_SIZE+Jn.WEIGHT_SIZE)throw new Q;let e=new De;return this.encodeCompressedGtin(e,Jn.HEADER_SIZE),this.encodeCompressedWeight(e,Jn.HEADER_SIZE+Ci.GTIN_SIZE,Jn.WEIGHT_SIZE),e.toString()}}Jn.HEADER_SIZE=5,Jn.WEIGHT_SIZE=15;class We extends Jn{constructor(e){super(e)}addWeightCode(e,n){e.append("(3103)")}checkWeight(e){return e}}class Et extends Jn{constructor(e){super(e)}addWeightCode(e,n){n<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class it extends Bn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<it.HEADER_SIZE+Bn.GTIN_SIZE)throw new Q;let e=new De;this.encodeCompressedGtin(e,it.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(it.HEADER_SIZE+Bn.GTIN_SIZE,it.LAST_DIGIT_SIZE);e.append("(392"),e.append(n),e.append(")");let i=this.getGeneralDecoder().decodeGeneralPurposeField(it.HEADER_SIZE+Bn.GTIN_SIZE+it.LAST_DIGIT_SIZE,null);return e.append(i.getNewString()),e.toString()}}it.HEADER_SIZE=8,it.LAST_DIGIT_SIZE=2;class It extends Bn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<It.HEADER_SIZE+Bn.GTIN_SIZE)throw new Q;let e=new De;this.encodeCompressedGtin(e,It.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(It.HEADER_SIZE+Bn.GTIN_SIZE,It.LAST_DIGIT_SIZE);e.append("(393"),e.append(n),e.append(")");let i=this.getGeneralDecoder().extractNumericValueFromBitArray(It.HEADER_SIZE+Bn.GTIN_SIZE+It.LAST_DIGIT_SIZE,It.FIRST_THREE_DIGITS_SIZE);i/100==0&&e.append("0"),i/10==0&&e.append("0"),e.append(i);let l=this.getGeneralDecoder().decodeGeneralPurposeField(It.HEADER_SIZE+Bn.GTIN_SIZE+It.LAST_DIGIT_SIZE+It.FIRST_THREE_DIGITS_SIZE,null);return e.append(l.getNewString()),e.toString()}}It.HEADER_SIZE=8,It.LAST_DIGIT_SIZE=2,It.FIRST_THREE_DIGITS_SIZE=10;class je extends Ci{constructor(e,n,i){super(e),this.dateCode=i,this.firstAIdigits=n}parseInformation(){if(this.getInformation().getSize()!=je.HEADER_SIZE+je.GTIN_SIZE+je.WEIGHT_SIZE+je.DATE_SIZE)throw new Q;let e=new De;return this.encodeCompressedGtin(e,je.HEADER_SIZE),this.encodeCompressedWeight(e,je.HEADER_SIZE+je.GTIN_SIZE,je.WEIGHT_SIZE),this.encodeCompressedDate(e,je.HEADER_SIZE+je.GTIN_SIZE+je.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,n){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,je.DATE_SIZE);if(i==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let l=i%32;i/=32;let c=i%12+1;i/=12;let u=i;u/10==0&&e.append("0"),e.append(u),c/10==0&&e.append("0"),e.append(c),l/10==0&&e.append("0"),e.append(l)}addWeightCode(e,n){e.append("("),e.append(this.firstAIdigits),e.append(n/1e5),e.append(")")}checkWeight(e){return e%1e5}}je.HEADER_SIZE=8,je.WEIGHT_SIZE=20,je.DATE_SIZE=16;function Wn(k){try{if(k.get(1))return new Qn(k);if(!k.get(2))return new Kr(k);switch(ai.extractNumericValueFromBitArray(k,1,4)){case 4:return new We(k);case 5:return new Et(k)}switch(ai.extractNumericValueFromBitArray(k,1,5)){case 12:return new it(k);case 13:return new It(k)}switch(ai.extractNumericValueFromBitArray(k,1,7)){case 56:return new je(k,"310","11");case 57:return new je(k,"320","11");case 58:return new je(k,"310","13");case 59:return new je(k,"320","13");case 60:return new je(k,"310","15");case 61:return new je(k,"320","15");case 62:return new je(k,"310","17");case 63:return new je(k,"320","17")}}catch(e){throw console.log(e),new ht("unknown decoder: "+k)}}class Vt{constructor(e,n,i,l){this.leftchar=e,this.rightchar=n,this.finderpattern=i,this.maybeLast=l}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,n){return e instanceof Vt?Vt.equalsOrNull(e.leftchar,n.leftchar)&&Vt.equalsOrNull(e.rightchar,n.rightchar)&&Vt.equalsOrNull(e.finderpattern,n.finderpattern):!1}static equalsOrNull(e,n){return e===null?n===null:Vt.equals(e,n)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class As{constructor(e,n,i){this.pairs=e,this.rowNumber=n,this.wasReversed=i}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,n){return e instanceof As?this.checkEqualitity(e,n)&&e.wasReversed===n.wasReversed:!1}checkEqualitity(e,n){if(!e||!n)return;let i;return e.forEach((l,c)=>{n.forEach(u=>{l.getLeftChar().getValue()===u.getLeftChar().getValue()&&l.getRightChar().getValue()===u.getRightChar().getValue()&&l.getFinderPatter().getValue()===u.getFinderPatter().getValue()&&(i=!0)})}),i}}class ye extends on{constructor(e){super(...arguments),this.pairs=new Array(ye.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,n,i){this.pairs.length=0,this.startFromEven=!1;try{return ye.constructResult(this.decodeRow2pairs(e,n))}catch(l){this.verbose&&console.log(l)}return this.pairs.length=0,this.startFromEven=!0,ye.constructResult(this.decodeRow2pairs(e,n))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,n){let i=!1;for(;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,e))}catch(c){if(c instanceof Q){if(!this.pairs.length)throw new Q;i=!0}}if(this.checkChecksum())return this.pairs;let l;if(this.rows.length?l=!0:l=!1,this.storeRow(e,!1),l){let c=this.checkRowsBoolean(!1);if(c!=null||(c=this.checkRowsBoolean(!0),c!=null))return c}throw new Q}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let n=null;try{n=this.checkRows(new Array,0)}catch(i){this.verbose&&console.log(i)}return e&&(this.rows=this.rows.reverse()),n}checkRows(e,n){for(let i=n;i<this.rows.length;i++){let l=this.rows[i];this.pairs.length=0;for(let u of e)this.pairs.push(u.getPairs());if(this.pairs.push(l.getPairs()),!ye.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let c=new Array(e);c.push(l);try{return this.checkRows(c,i+1)}catch(u){this.verbose&&console.log(u)}}throw new Q}static isValidSequence(e){for(let n of ye.FINDER_PATTERN_SEQUENCES){if(e.length>n.length)continue;let i=!0;for(let l=0;l<e.length;l++)if(e[l].getFinderPattern().getValue()!=n[l]){i=!1;break}if(i)return!0}return!1}storeRow(e,n){let i=0,l=!1,c=!1;for(;i<this.rows.length;){let u=this.rows[i];if(u.getRowNumber()>e){c=u.isEquivalent(this.pairs);break}l=u.isEquivalent(this.pairs),i++}c||l||ye.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new As(this.pairs,e,n)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,n){for(let i of n)if(i.getPairs().length!==e.length){for(let l of i.getPairs())for(let c of e)if(Vt.equals(l,c))break}}static isPartialRow(e,n){for(let i of n){let l=!0;for(let c of e){let u=!1;for(let h of i.getPairs())if(c.equals(h)){u=!0;break}if(!u){l=!1;break}}if(l)return!0}return!1}getRows(){return this.rows}static constructResult(e){let n=Hi.buildBitArray(e),l=Wn(n).parseInformation(),c=e[0].getFinderPattern().getResultPoints(),u=e[e.length-1].getFinderPattern().getResultPoints(),h=[c[0],c[1],u[0],u[1]];return new ze(l,null,null,h,fe.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),n=e.getLeftChar(),i=e.getRightChar();if(i==null)return!1;let l=i.getChecksumPortion(),c=2;for(let h=1;h<this.pairs.size();++h){let m=this.pairs.get(h);l+=m.getLeftChar().getChecksumPortion(),c++;let C=m.getRightChar();C!=null&&(l+=C.getChecksumPortion(),c++)}return l%=211,211*(c-4)+l==n.getValue()}static getNextSecondBar(e,n){let i;return e.get(n)?(i=e.getNextUnset(n),i=e.getNextSet(i)):(i=e.getNextSet(n),i=e.getNextUnset(i)),i}retrieveNextPair(e,n,i){let l=n.length%2==0;this.startFromEven&&(l=!l);let c,u=!0,h=-1;do this.findNextPair(e,n,h),c=this.parseFoundFinderPattern(e,i,l),c==null?h=ye.getNextSecondBar(e,this.startEnd[0]):u=!1;while(u);let m=this.decodeDataCharacter(e,c,l,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new Q;let C;try{C=this.decodeDataCharacter(e,c,l,!1)}catch(N){C=null,this.verbose&&console.log(N)}return new Vt(m,C,c,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,n,i){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u;i>=0?u=i:this.isEmptyPair(n)?u=0:u=n[n.length-1].getFinderPattern().getStartEnd()[1];let h=n.length%2!=0;this.startFromEven&&(h=!h);let m=!1;for(;u<c&&(m=!e.get(u),!!m);)u++;let C=0,N=u;for(let P=u;P<c;P++)if(e.get(P)!=m)l[C]++;else{if(C==3){if(h&&ye.reverseCounters(l),ye.isFinderPattern(l)){this.startEnd[0]=N,this.startEnd[1]=P;return}h&&ye.reverseCounters(l),N+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,C--}else C++;l[C]=1,m=!m}throw new Q}static reverseCounters(e){let n=e.length;for(let i=0;i<n/2;++i){let l=e[i];e[i]=e[n-i-1],e[n-i-1]=l}}parseFoundFinderPattern(e,n,i){let l,c,u;if(i){let C=this.startEnd[0]-1;for(;C>=0&&!e.get(C);)C--;C++,l=this.startEnd[0]-C,c=C,u=this.startEnd[1]}else c=this.startEnd[0],u=e.getNextUnset(this.startEnd[1]+1),l=u-this.startEnd[1];let h=this.getDecodeFinderCounters();B.arraycopy(h,0,h,1,h.length-1),h[0]=l;let m;try{m=this.parseFinderValue(h,ye.FINDER_PATTERNS)}catch{return null}return new si(m,[c,u],c,u,n)}decodeDataCharacter(e,n,i,l){let c=this.getDataCharacterCounters();for(let Ut=0;Ut<c.length;Ut++)c[Ut]=0;if(l)ye.recordPatternInReverse(e,n.getStartEnd()[0],c);else{ye.recordPattern(e,n.getStartEnd()[1],c);for(let Ut=0,an=c.length-1;Ut<an;Ut++,an--){let Xn=c[Ut];c[Ut]=c[an],c[an]=Xn}}let u=17,h=Je.sum(new Int32Array(c))/u,m=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(h-m)/m>.3)throw new Q;let C=this.getOddCounts(),N=this.getEvenCounts(),P=this.getOddRoundingErrors(),M=this.getEvenRoundingErrors();for(let Ut=0;Ut<c.length;Ut++){let an=1*c[Ut]/h,Xn=an+.5;if(Xn<1){if(an<.3)throw new Q;Xn=1}else if(Xn>8){if(an>8.7)throw new Q;Xn=8}let Ii=Ut/2;Ut&1?(N[Ii]=Xn,M[Ii]=an-Xn):(C[Ii]=Xn,P[Ii]=an-Xn)}this.adjustOddEvenCounts(u);let U=4*n.getValue()+(i?0:2)+(l?0:1)-1,G=0,K=0;for(let Ut=C.length-1;Ut>=0;Ut--){if(ye.isNotA1left(n,i,l)){let an=ye.WEIGHTS[U][2*Ut];K+=C[Ut]*an}G+=C[Ut]}let ee=0;for(let Ut=N.length-1;Ut>=0;Ut--)if(ye.isNotA1left(n,i,l)){let an=ye.WEIGHTS[U][2*Ut+1];ee+=N[Ut]*an}let le=K+ee;if(G&1||G>13||G<4)throw new Q;let Ne=(13-G)/2,_e=ye.SYMBOL_WIDEST[Ne],Ce=9-_e,_t=An.getRSSvalue(C,_e,!0),vt=An.getRSSvalue(N,Ce,!1),tr=ye.EVEN_TOTAL_SUBSET[Ne],_r=ye.GSUM[Ne],Cn=_t*tr+vt+_r;return new Mr(Cn,le)}static isNotA1left(e,n,i){return!(e.getValue()==0&&n&&i)}adjustOddEvenCounts(e){let n=Je.sum(new Int32Array(this.getOddCounts())),i=Je.sum(new Int32Array(this.getEvenCounts())),l=!1,c=!1;n>13?c=!0:n<4&&(l=!0);let u=!1,h=!1;i>13?h=!0:i<4&&(u=!0);let m=n+i-e,C=(n&1)==1,N=(i&1)==0;if(m==1)if(C){if(N)throw new Q;c=!0}else{if(!N)throw new Q;h=!0}else if(m==-1)if(C){if(N)throw new Q;l=!0}else{if(!N)throw new Q;u=!0}else if(m==0){if(C){if(!N)throw new Q;n<i?(l=!0,h=!0):(c=!0,u=!0)}else if(N)throw new Q}else throw new Q;if(l){if(c)throw new Q;ye.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&ye.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(h)throw new Q;ye.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&ye.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ye.SYMBOL_WIDEST=[7,5,4,3,1],ye.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ye.GSUM=[0,348,1388,2948,3988],ye.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ye.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ye.FINDER_PAT_A=0,ye.FINDER_PAT_B=1,ye.FINDER_PAT_C=2,ye.FINDER_PAT_D=3,ye.FINDER_PAT_E=4,ye.FINDER_PAT_F=5,ye.FINDER_PATTERN_SEQUENCES=[[ye.FINDER_PAT_A,ye.FINDER_PAT_A],[ye.FINDER_PAT_A,ye.FINDER_PAT_B,ye.FINDER_PAT_B],[ye.FINDER_PAT_A,ye.FINDER_PAT_C,ye.FINDER_PAT_B,ye.FINDER_PAT_D],[ye.FINDER_PAT_A,ye.FINDER_PAT_E,ye.FINDER_PAT_B,ye.FINDER_PAT_D,ye.FINDER_PAT_C],[ye.FINDER_PAT_A,ye.FINDER_PAT_E,ye.FINDER_PAT_B,ye.FINDER_PAT_D,ye.FINDER_PAT_D,ye.FINDER_PAT_F],[ye.FINDER_PAT_A,ye.FINDER_PAT_E,ye.FINDER_PAT_B,ye.FINDER_PAT_D,ye.FINDER_PAT_E,ye.FINDER_PAT_F,ye.FINDER_PAT_F],[ye.FINDER_PAT_A,ye.FINDER_PAT_A,ye.FINDER_PAT_B,ye.FINDER_PAT_B,ye.FINDER_PAT_C,ye.FINDER_PAT_C,ye.FINDER_PAT_D,ye.FINDER_PAT_D],[ye.FINDER_PAT_A,ye.FINDER_PAT_A,ye.FINDER_PAT_B,ye.FINDER_PAT_B,ye.FINDER_PAT_C,ye.FINDER_PAT_C,ye.FINDER_PAT_D,ye.FINDER_PAT_E,ye.FINDER_PAT_E],[ye.FINDER_PAT_A,ye.FINDER_PAT_A,ye.FINDER_PAT_B,ye.FINDER_PAT_B,ye.FINDER_PAT_C,ye.FINDER_PAT_C,ye.FINDER_PAT_D,ye.FINDER_PAT_E,ye.FINDER_PAT_F,ye.FINDER_PAT_F],[ye.FINDER_PAT_A,ye.FINDER_PAT_A,ye.FINDER_PAT_B,ye.FINDER_PAT_B,ye.FINDER_PAT_C,ye.FINDER_PAT_D,ye.FINDER_PAT_D,ye.FINDER_PAT_E,ye.FINDER_PAT_E,ye.FINDER_PAT_F,ye.FINDER_PAT_F]],ye.MAX_PAIRS=11;class mr extends Mr{constructor(e,n,i){super(e,n),this.count=0,this.finderPattern=i}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Bt extends on{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,n,i){const l=this.decodePair(n,!1,e,i);Bt.addOrTally(this.possibleLeftPairs,l),n.reverse();let c=this.decodePair(n,!0,e,i);Bt.addOrTally(this.possibleRightPairs,c),n.reverse();for(let u of this.possibleLeftPairs)if(u.getCount()>1){for(let h of this.possibleRightPairs)if(h.getCount()>1&&Bt.checkChecksum(u,h))return Bt.constructResult(u,h)}throw new Q}static addOrTally(e,n){if(n==null)return;let i=!1;for(let l of e)if(l.getValue()===n.getValue()){l.incrementCount(),i=!0;break}i||e.push(n)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,n){let i=4537077*e.getValue()+n.getValue(),l=new String(i).toString(),c=new De;for(let C=13-l.length;C>0;C--)c.append("0");c.append(l);let u=0;for(let C=0;C<13;C++){let N=c.charAt(C).charCodeAt(0)-48;u+=C&1?N:3*N}u=10-u%10,u===10&&(u=0),c.append(u.toString());let h=e.getFinderPattern().getResultPoints(),m=n.getFinderPattern().getResultPoints();return new ze(c.toString(),null,0,[h[0],h[1],m[0],m[1]],fe.RSS_14,new Date().getTime())}static checkChecksum(e,n){let i=(e.getChecksumPortion()+16*n.getChecksumPortion())%79,l=9*e.getFinderPattern().getValue()+n.getFinderPattern().getValue();return l>72&&l--,l>8&&l--,i===l}decodePair(e,n,i,l){try{let c=this.findFinderPattern(e,n),u=this.parseFoundFinderPattern(e,i,n,c),h=l==null?null:l.get(oe.NEED_RESULT_POINT_CALLBACK);if(h!=null){let N=(c[0]+c[1])/2;n&&(N=e.getSize()-1-N),h.foundPossibleResultPoint(new Ie(N,i))}let m=this.decodeDataCharacter(e,u,!0),C=this.decodeDataCharacter(e,u,!1);return new mr(1597*m.getValue()+C.getValue(),m.getChecksumPortion()+4*C.getChecksumPortion(),u)}catch{return null}}decodeDataCharacter(e,n,i){let l=this.getDataCharacterCounters();for(let ee=0;ee<l.length;ee++)l[ee]=0;if(i)Be.recordPatternInReverse(e,n.getStartEnd()[0],l);else{Be.recordPattern(e,n.getStartEnd()[1]+1,l);for(let ee=0,le=l.length-1;ee<le;ee++,le--){let Ne=l[ee];l[ee]=l[le],l[le]=Ne}}let c=i?16:15,u=Je.sum(new Int32Array(l))/c,h=this.getOddCounts(),m=this.getEvenCounts(),C=this.getOddRoundingErrors(),N=this.getEvenRoundingErrors();for(let ee=0;ee<l.length;ee++){let le=l[ee]/u,Ne=Math.floor(le+.5);Ne<1?Ne=1:Ne>8&&(Ne=8);let _e=Math.floor(ee/2);ee&1?(m[_e]=Ne,N[_e]=le-Ne):(h[_e]=Ne,C[_e]=le-Ne)}this.adjustOddEvenCounts(i,c);let P=0,M=0;for(let ee=h.length-1;ee>=0;ee--)M*=9,M+=h[ee],P+=h[ee];let U=0,G=0;for(let ee=m.length-1;ee>=0;ee--)U*=9,U+=m[ee],G+=m[ee];let K=M+3*U;if(i){if(P&1||P>12||P<4)throw new Q;let ee=(12-P)/2,le=Bt.OUTSIDE_ODD_WIDEST[ee],Ne=9-le,_e=An.getRSSvalue(h,le,!1),Ce=An.getRSSvalue(m,Ne,!0),_t=Bt.OUTSIDE_EVEN_TOTAL_SUBSET[ee],vt=Bt.OUTSIDE_GSUM[ee];return new Mr(_e*_t+Ce+vt,K)}else{if(G&1||G>10||G<4)throw new Q;let ee=(10-G)/2,le=Bt.INSIDE_ODD_WIDEST[ee],Ne=9-le,_e=An.getRSSvalue(h,le,!0),Ce=An.getRSSvalue(m,Ne,!1),_t=Bt.INSIDE_ODD_TOTAL_SUBSET[ee],vt=Bt.INSIDE_GSUM[ee];return new Mr(Ce*_t+_e+vt,K)}}findFinderPattern(e,n){let i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;let l=e.getSize(),c=!1,u=0;for(;u<l&&(c=!e.get(u),n!==c);)u++;let h=0,m=u;for(let C=u;C<l;C++)if(e.get(C)!==c)i[h]++;else{if(h===3){if(on.isFinderPattern(i))return[m,C];m+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,h--}else h++;i[h]=1,c=!c}throw new Q}parseFoundFinderPattern(e,n,i,l){let c=e.get(l[0]),u=l[0]-1;for(;u>=0&&c!==e.get(u);)u--;u++;const h=l[0]-u,m=this.getDecodeFinderCounters(),C=new Int32Array(m.length);B.arraycopy(m,0,C,1,m.length-1),C[0]=h;const N=this.parseFinderValue(C,Bt.FINDER_PATTERNS);let P=u,M=l[1];return i&&(P=e.getSize()-1-P,M=e.getSize()-1-M),new si(N,[u,l[1]],P,M,n)}adjustOddEvenCounts(e,n){let i=Je.sum(new Int32Array(this.getOddCounts())),l=Je.sum(new Int32Array(this.getEvenCounts())),c=!1,u=!1,h=!1,m=!1;e?(i>12?u=!0:i<4&&(c=!0),l>12?m=!0:l<4&&(h=!0)):(i>11?u=!0:i<5&&(c=!0),l>10?m=!0:l<4&&(h=!0));let C=i+l-n,N=(i&1)===(e?1:0),P=(l&1)===1;if(C===1)if(N){if(P)throw new Q;u=!0}else{if(!P)throw new Q;m=!0}else if(C===-1)if(N){if(P)throw new Q;c=!0}else{if(!P)throw new Q;h=!0}else if(C===0){if(N){if(!P)throw new Q;i<l?(c=!0,m=!0):(u=!0,h=!0)}else if(P)throw new Q}else throw new Q;if(c){if(u)throw new Q;on.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&on.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(m)throw new Q;on.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&on.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Bt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Bt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Bt.OUTSIDE_GSUM=[0,161,961,2015,2715],Bt.INSIDE_GSUM=[0,336,1036,1516],Bt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Bt.INSIDE_ODD_WIDEST=[2,4,6,8],Bt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ei extends Be{constructor(e,n){super(),this.readers=[],this.verbose=n===!0;const i=e?e.get(oe.POSSIBLE_FORMATS):null,l=e&&e.get(oe.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;i?((i.includes(fe.EAN_13)||i.includes(fe.UPC_A)||i.includes(fe.EAN_8)||i.includes(fe.UPC_E))&&this.readers.push(new Wi(e)),i.includes(fe.CODE_39)&&this.readers.push(new gt(l)),i.includes(fe.CODE_128)&&this.readers.push(new he),i.includes(fe.ITF)&&this.readers.push(new ut),i.includes(fe.RSS_14)&&this.readers.push(new Bt),i.includes(fe.RSS_EXPANDED)&&this.readers.push(new ye(this.verbose))):(this.readers.push(new Wi(e)),this.readers.push(new gt),this.readers.push(new Wi(e)),this.readers.push(new he),this.readers.push(new ut),this.readers.push(new Bt),this.readers.push(new ye(this.verbose)))}decodeRow(e,n,i){for(let l=0;l<this.readers.length;l++)try{return this.readers[l].decodeRow(e,n,i)}catch{}throw new Q}reset(){this.readers.forEach(e=>e.reset())}}class Xi extends be{constructor(e=500,n){super(new Ei(n),e,n)}}class Rt{constructor(e,n,i){this.ecCodewords=e,this.ecBlocks=[n],i&&this.ecBlocks.push(i)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class St{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ot{constructor(e,n,i,l,c,u){this.versionNumber=e,this.symbolSizeRows=n,this.symbolSizeColumns=i,this.dataRegionSizeRows=l,this.dataRegionSizeColumns=c,this.ecBlocks=u;let h=0;const m=u.getECCodewords(),C=u.getECBlocks();for(let N of C)h+=N.getCount()*(N.getDataCodewords()+m);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,n){if(e&1||n&1)throw new q;for(let i of Ot.VERSIONS)if(i.symbolSizeRows===e&&i.symbolSizeColumns===n)return i;throw new q}toString(){return""+this.versionNumber}static buildVersions(){return[new Ot(1,10,10,8,8,new Rt(5,new St(1,3))),new Ot(2,12,12,10,10,new Rt(7,new St(1,5))),new Ot(3,14,14,12,12,new Rt(10,new St(1,8))),new Ot(4,16,16,14,14,new Rt(12,new St(1,12))),new Ot(5,18,18,16,16,new Rt(14,new St(1,18))),new Ot(6,20,20,18,18,new Rt(18,new St(1,22))),new Ot(7,22,22,20,20,new Rt(20,new St(1,30))),new Ot(8,24,24,22,22,new Rt(24,new St(1,36))),new Ot(9,26,26,24,24,new Rt(28,new St(1,44))),new Ot(10,32,32,14,14,new Rt(36,new St(1,62))),new Ot(11,36,36,16,16,new Rt(42,new St(1,86))),new Ot(12,40,40,18,18,new Rt(48,new St(1,114))),new Ot(13,44,44,20,20,new Rt(56,new St(1,144))),new Ot(14,48,48,22,22,new Rt(68,new St(1,174))),new Ot(15,52,52,24,24,new Rt(42,new St(2,102))),new Ot(16,64,64,14,14,new Rt(56,new St(2,140))),new Ot(17,72,72,16,16,new Rt(36,new St(4,92))),new Ot(18,80,80,18,18,new Rt(48,new St(4,114))),new Ot(19,88,88,20,20,new Rt(56,new St(4,144))),new Ot(20,96,96,22,22,new Rt(68,new St(4,174))),new Ot(21,104,104,24,24,new Rt(56,new St(6,136))),new Ot(22,120,120,18,18,new Rt(68,new St(6,175))),new Ot(23,132,132,20,20,new Rt(62,new St(8,163))),new Ot(24,144,144,22,22,new Rt(62,new St(8,156),new St(2,155))),new Ot(25,8,18,6,16,new Rt(7,new St(1,5))),new Ot(26,8,32,6,14,new Rt(11,new St(1,10))),new Ot(27,12,26,10,24,new Rt(14,new St(1,16))),new Ot(28,12,36,10,16,new Rt(18,new St(1,22))),new Ot(29,16,36,14,16,new Rt(24,new St(1,32))),new Ot(30,16,48,14,22,new Rt(28,new St(1,49)))]}}Ot.VERSIONS=Ot.buildVersions();class ur{constructor(e){const n=e.getHeight();if(n<8||n>144||n&1)throw new q;this.version=ur.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Se(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const n=e.getHeight(),i=e.getWidth();return Ot.getVersionForDimensions(n,i)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let n=0,i=4,l=0;const c=this.mappingBitMatrix.getHeight(),u=this.mappingBitMatrix.getWidth();let h=!1,m=!1,C=!1,N=!1;do if(i===c&&l===0&&!h)e[n++]=this.readCorner1(c,u)&255,i-=2,l+=2,h=!0;else if(i===c-2&&l===0&&u&3&&!m)e[n++]=this.readCorner2(c,u)&255,i-=2,l+=2,m=!0;else if(i===c+4&&l===2&&!(u&7)&&!C)e[n++]=this.readCorner3(c,u)&255,i-=2,l+=2,C=!0;else if(i===c-2&&l===0&&(u&7)===4&&!N)e[n++]=this.readCorner4(c,u)&255,i-=2,l+=2,N=!0;else{do i<c&&l>=0&&!this.readMappingMatrix.get(l,i)&&(e[n++]=this.readUtah(i,l,c,u)&255),i-=2,l+=2;while(i>=0&&l<u);i+=1,l+=3;do i>=0&&l<u&&!this.readMappingMatrix.get(l,i)&&(e[n++]=this.readUtah(i,l,c,u)&255),i+=2,l-=2;while(i<c&&l>=0);i+=3,l+=1}while(i<c||l<u);if(n!==this.version.getTotalCodewords())throw new q;return e}readModule(e,n,i,l){return e<0&&(e+=i,n+=4-(i+4&7)),n<0&&(n+=l,e+=4-(l+4&7)),this.readMappingMatrix.set(n,e),this.mappingBitMatrix.get(n,e)}readUtah(e,n,i,l){let c=0;return this.readModule(e-2,n-2,i,l)&&(c|=1),c<<=1,this.readModule(e-2,n-1,i,l)&&(c|=1),c<<=1,this.readModule(e-1,n-2,i,l)&&(c|=1),c<<=1,this.readModule(e-1,n-1,i,l)&&(c|=1),c<<=1,this.readModule(e-1,n,i,l)&&(c|=1),c<<=1,this.readModule(e,n-2,i,l)&&(c|=1),c<<=1,this.readModule(e,n-1,i,l)&&(c|=1),c<<=1,this.readModule(e,n,i,l)&&(c|=1),c}readCorner1(e,n){let i=0;return this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,1,e,n)&&(i|=1),i<<=1,this.readModule(e-1,2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(2,n-1,e,n)&&(i|=1),i<<=1,this.readModule(3,n-1,e,n)&&(i|=1),i}readCorner2(e,n){let i=0;return this.readModule(e-3,0,e,n)&&(i|=1),i<<=1,this.readModule(e-2,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(0,n-4,e,n)&&(i|=1),i<<=1,this.readModule(0,n-3,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i}readCorner3(e,n){let i=0;return this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(0,n-3,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-3,e,n)&&(i|=1),i<<=1,this.readModule(1,n-2,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i}readCorner4(e,n){let i=0;return this.readModule(e-3,0,e,n)&&(i|=1),i<<=1,this.readModule(e-2,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(2,n-1,e,n)&&(i|=1),i<<=1,this.readModule(3,n-1,e,n)&&(i|=1),i}extractDataRegion(e){const n=this.version.getSymbolSizeRows(),i=this.version.getSymbolSizeColumns();if(e.getHeight()!==n)throw new I("Dimension of bitMatrix must match the version size");const l=this.version.getDataRegionSizeRows(),c=this.version.getDataRegionSizeColumns(),u=n/l|0,h=i/c|0,m=u*l,C=h*c,N=new Se(C,m);for(let P=0;P<u;++P){const M=P*l;for(let U=0;U<h;++U){const G=U*c;for(let K=0;K<l;++K){const ee=P*(l+2)+1+K,le=M+K;for(let Ne=0;Ne<c;++Ne){const _e=U*(c+2)+1+Ne;if(e.get(_e,ee)){const Ce=G+Ne;N.set(Ce,le)}}}}}return N}}class Wo{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n){const i=n.getECBlocks();let l=0;const c=i.getECBlocks();for(let K of c)l+=K.getCount();const u=new Array(l);let h=0;for(let K of c)for(let ee=0;ee<K.getCount();ee++){const le=K.getDataCodewords(),Ne=i.getECCodewords()+le;u[h++]=new Wo(le,new Uint8Array(Ne))}const C=u[0].codewords.length-i.getECCodewords(),N=C-1;let P=0;for(let K=0;K<N;K++)for(let ee=0;ee<h;ee++)u[ee].codewords[K]=e[P++];const M=n.getVersionNumber()===24,U=M?8:h;for(let K=0;K<U;K++)u[K].codewords[C-1]=e[P++];const G=u[0].codewords.length;for(let K=C;K<G;K++)for(let ee=0;ee<h;ee++){const le=M?(ee+8)%h:ee,Ne=M&&le>7?K-1:K;u[le].codewords[Ne]=e[P++]}if(P!==e.length)throw new I;return u}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ho{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new I(""+e);let n=0,i=this.bitOffset,l=this.byteOffset;const c=this.bytes;if(i>0){const u=8-i,h=e<u?e:u,m=u-h,C=255>>8-h<<m;n=(c[l]&C)>>m,e-=h,i+=h,i===8&&(i=0,l++)}if(e>0){for(;e>=8;)n=n<<8|c[l]&255,l++,e-=8;if(e>0){const u=8-e,h=255>>u<<u;n=n<<e|(c[l]&h)>>u,i+=e}}return this.bitOffset=i,this.byteOffset=l,n}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var wn;(function(k){k[k.PAD_ENCODE=0]="PAD_ENCODE",k[k.ASCII_ENCODE=1]="ASCII_ENCODE",k[k.C40_ENCODE=2]="C40_ENCODE",k[k.TEXT_ENCODE=3]="TEXT_ENCODE",k[k.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",k[k.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",k[k.BASE256_ENCODE=6]="BASE256_ENCODE"})(wn||(wn={}));class Sr{static decode(e){const n=new Ho(e),i=new De,l=new De,c=new Array;let u=wn.ASCII_ENCODE;do if(u===wn.ASCII_ENCODE)u=this.decodeAsciiSegment(n,i,l);else{switch(u){case wn.C40_ENCODE:this.decodeC40Segment(n,i);break;case wn.TEXT_ENCODE:this.decodeTextSegment(n,i);break;case wn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,i);break;case wn.EDIFACT_ENCODE:this.decodeEdifactSegment(n,i);break;case wn.BASE256_ENCODE:this.decodeBase256Segment(n,i,c);break;default:throw new q}u=wn.ASCII_ENCODE}while(u!==wn.PAD_ENCODE&&n.available()>0);return l.length()>0&&i.append(l.toString()),new nt(e,i.toString(),c.length===0?null:c,null)}static decodeAsciiSegment(e,n,i){let l=!1;do{let c=e.readBits(8);if(c===0)throw new q;if(c<=128)return l&&(c+=128),n.append(String.fromCharCode(c-1)),wn.ASCII_ENCODE;if(c===129)return wn.PAD_ENCODE;if(c<=229){const u=c-130;u<10&&n.append("0"),n.append(""+u)}else switch(c){case 230:return wn.C40_ENCODE;case 231:return wn.BASE256_ENCODE;case 232:n.append("");break;case 233:case 234:break;case 235:l=!0;break;case 236:n.append("[)>05"),i.insert(0,"");break;case 237:n.append("[)>06"),i.insert(0,"");break;case 238:return wn.ANSIX12_ENCODE;case 239:return wn.TEXT_ENCODE;case 240:return wn.EDIFACT_ENCODE;case 241:break;default:if(c!==254||e.available()!==0)throw new q;break}}while(e.available()>0);return wn.ASCII_ENCODE}static decodeC40Segment(e,n){let i=!1;const l=[];let c=0;do{if(e.available()===8)return;const u=e.readBits(8);if(u===254)return;this.parseTwoBytes(u,e.readBits(8),l);for(let h=0;h<3;h++){const m=l[h];switch(c){case 0:if(m<3)c=m+1;else if(m<this.C40_BASIC_SET_CHARS.length){const C=this.C40_BASIC_SET_CHARS[m];i?(n.append(String.fromCharCode(C.charCodeAt(0)+128)),i=!1):n.append(C)}else throw new q;break;case 1:i?(n.append(String.fromCharCode(m+128)),i=!1):n.append(String.fromCharCode(m)),c=0;break;case 2:if(m<this.C40_SHIFT2_SET_CHARS.length){const C=this.C40_SHIFT2_SET_CHARS[m];i?(n.append(String.fromCharCode(C.charCodeAt(0)+128)),i=!1):n.append(C)}else switch(m){case 27:n.append("");break;case 30:i=!0;break;default:throw new q}c=0;break;case 3:i?(n.append(String.fromCharCode(m+224)),i=!1):n.append(String.fromCharCode(m+96)),c=0;break;default:throw new q}}}while(e.available()>0)}static decodeTextSegment(e,n){let i=!1,l=[],c=0;do{if(e.available()===8)return;const u=e.readBits(8);if(u===254)return;this.parseTwoBytes(u,e.readBits(8),l);for(let h=0;h<3;h++){const m=l[h];switch(c){case 0:if(m<3)c=m+1;else if(m<this.TEXT_BASIC_SET_CHARS.length){const C=this.TEXT_BASIC_SET_CHARS[m];i?(n.append(String.fromCharCode(C.charCodeAt(0)+128)),i=!1):n.append(C)}else throw new q;break;case 1:i?(n.append(String.fromCharCode(m+128)),i=!1):n.append(String.fromCharCode(m)),c=0;break;case 2:if(m<this.TEXT_SHIFT2_SET_CHARS.length){const C=this.TEXT_SHIFT2_SET_CHARS[m];i?(n.append(String.fromCharCode(C.charCodeAt(0)+128)),i=!1):n.append(C)}else switch(m){case 27:n.append("");break;case 30:i=!0;break;default:throw new q}c=0;break;case 3:if(m<this.TEXT_SHIFT3_SET_CHARS.length){const C=this.TEXT_SHIFT3_SET_CHARS[m];i?(n.append(String.fromCharCode(C.charCodeAt(0)+128)),i=!1):n.append(C),c=0}else throw new q;break;default:throw new q}}}while(e.available()>0)}static decodeAnsiX12Segment(e,n){const i=[];do{if(e.available()===8)return;const l=e.readBits(8);if(l===254)return;this.parseTwoBytes(l,e.readBits(8),i);for(let c=0;c<3;c++){const u=i[c];switch(u){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(u<14)n.append(String.fromCharCode(u+44));else if(u<40)n.append(String.fromCharCode(u+51));else throw new q;break}}}while(e.available()>0)}static parseTwoBytes(e,n,i){let l=(e<<8)+n-1,c=Math.floor(l/1600);i[0]=c,l-=c*1600,c=Math.floor(l/40),i[1]=c,i[2]=l-c*40}static decodeEdifactSegment(e,n){do{if(e.available()<=16)return;for(let i=0;i<4;i++){let l=e.readBits(6);if(l===31){const c=8-e.getBitOffset();c!==8&&e.readBits(c);return}l&32||(l|=64),n.append(String.fromCharCode(l))}}while(e.available()>0)}static decodeBase256Segment(e,n,i){let l=1+e.getByteOffset();const c=this.unrandomize255State(e.readBits(8),l++);let u;if(c===0?u=e.available()/8|0:c<250?u=c:u=250*(c-249)+this.unrandomize255State(e.readBits(8),l++),u<0)throw new q;const h=new Uint8Array(u);for(let m=0;m<u;m++){if(e.available()<8)throw new q;h[m]=this.unrandomize255State(e.readBits(8),l++)}i.push(h);try{n.append(Oe.decode(h,ke.ISO88591))}catch(m){throw new ht("Platform does not support required encoding: "+m.message)}}static unrandomize255State(e,n){const i=149*n%255+1,l=e-i;return l>=0?l:l+256}}Sr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Sr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Sr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Sr.TEXT_SHIFT2_SET_CHARS=Sr.C40_SHIFT2_SET_CHARS,Sr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class to{constructor(){this.rsDecoder=new Pt(we.DATA_MATRIX_FIELD_256)}decode(e){const n=new ur(e),i=n.getVersion(),l=n.readCodewords(),c=Wo.getDataBlocks(l,i);let u=0;for(let C of c)u+=C.getNumDataCodewords();const h=new Uint8Array(u),m=c.length;for(let C=0;C<m;C++){const N=c[C],P=N.getCodewords(),M=N.getNumDataCodewords();this.correctErrors(P,M);for(let U=0;U<M;U++)h[U*m+C]=P[U]}return Sr.decode(h)}correctErrors(e,n){const i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-n)}catch{throw new D}for(let l=0;l<n;l++)e[l]=i[l]}}class $t{constructor(e){this.image=e,this.rectangleDetector=new xe(this.image)}detect(){const e=this.rectangleDetector.detect();let n=this.detectSolid1(e);if(n=this.detectSolid2(n),n[3]=this.correctTopRight(n),!n[3])throw new Q;n=this.shiftToModuleCenter(n);const i=n[0],l=n[1],c=n[2],u=n[3];let h=this.transitionsBetween(i,u)+1,m=this.transitionsBetween(c,u)+1;(h&1)===1&&(h+=1),(m&1)===1&&(m+=1),4*h<7*m&&4*m<7*h&&(h=m=Math.max(h,m));let C=$t.sampleGrid(this.image,i,l,c,u,h,m);return new yn(C,[i,l,c,u])}static shiftPoint(e,n,i){let l=(n.getX()-e.getX())/(i+1),c=(n.getY()-e.getY())/(i+1);return new Ie(e.getX()+l,e.getY()+c)}static moveAway(e,n,i){let l=e.getX(),c=e.getY();return l<n?l-=1:l+=1,c<i?c-=1:c+=1,new Ie(l,c)}detectSolid1(e){let n=e[0],i=e[1],l=e[3],c=e[2],u=this.transitionsBetween(n,i),h=this.transitionsBetween(i,l),m=this.transitionsBetween(l,c),C=this.transitionsBetween(c,n),N=u,P=[c,n,i,l];return N>h&&(N=h,P[0]=n,P[1]=i,P[2]=l,P[3]=c),N>m&&(N=m,P[0]=i,P[1]=l,P[2]=c,P[3]=n),N>C&&(P[0]=l,P[1]=c,P[2]=n,P[3]=i),P}detectSolid2(e){let n=e[0],i=e[1],l=e[2],c=e[3],u=this.transitionsBetween(n,c),h=$t.shiftPoint(i,l,(u+1)*4),m=$t.shiftPoint(l,i,(u+1)*4),C=this.transitionsBetween(h,n),N=this.transitionsBetween(m,c);return C<N?(e[0]=n,e[1]=i,e[2]=l,e[3]=c):(e[0]=i,e[1]=l,e[2]=c,e[3]=n),e}correctTopRight(e){let n=e[0],i=e[1],l=e[2],c=e[3],u=this.transitionsBetween(n,c),h=this.transitionsBetween(i,c),m=$t.shiftPoint(n,i,(h+1)*4),C=$t.shiftPoint(l,i,(u+1)*4);u=this.transitionsBetween(m,c),h=this.transitionsBetween(C,c);let N=new Ie(c.getX()+(l.getX()-i.getX())/(u+1),c.getY()+(l.getY()-i.getY())/(u+1)),P=new Ie(c.getX()+(n.getX()-i.getX())/(h+1),c.getY()+(n.getY()-i.getY())/(h+1));if(!this.isValid(N))return this.isValid(P)?P:null;if(!this.isValid(P))return N;let M=this.transitionsBetween(m,N)+this.transitionsBetween(C,N),U=this.transitionsBetween(m,P)+this.transitionsBetween(C,P);return M>U?N:P}shiftToModuleCenter(e){let n=e[0],i=e[1],l=e[2],c=e[3],u=this.transitionsBetween(n,c)+1,h=this.transitionsBetween(l,c)+1,m=$t.shiftPoint(n,i,h*4),C=$t.shiftPoint(l,i,u*4);u=this.transitionsBetween(m,c)+1,h=this.transitionsBetween(C,c)+1,(u&1)===1&&(u+=1),(h&1)===1&&(h+=1);let N=(n.getX()+i.getX()+l.getX()+c.getX())/4,P=(n.getY()+i.getY()+l.getY()+c.getY())/4;n=$t.moveAway(n,N,P),i=$t.moveAway(i,N,P),l=$t.moveAway(l,N,P),c=$t.moveAway(c,N,P);let M,U;return m=$t.shiftPoint(n,i,h*4),m=$t.shiftPoint(m,c,u*4),M=$t.shiftPoint(i,n,h*4),M=$t.shiftPoint(M,l,u*4),C=$t.shiftPoint(l,c,h*4),C=$t.shiftPoint(C,i,u*4),U=$t.shiftPoint(c,l,h*4),U=$t.shiftPoint(U,n,u*4),[m,M,C,U]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,n,i,l,c,u,h){return Ve.getInstance().sampleGrid(e,u,h,.5,.5,u-.5,.5,u-.5,h-.5,.5,h-.5,n.getX(),n.getY(),c.getX(),c.getY(),l.getX(),l.getY(),i.getX(),i.getY())}transitionsBetween(e,n){let i=Math.trunc(e.getX()),l=Math.trunc(e.getY()),c=Math.trunc(n.getX()),u=Math.trunc(n.getY()),h=Math.abs(u-l)>Math.abs(c-i);if(h){let K=i;i=l,l=K,K=c,c=u,u=K}let m=Math.abs(c-i),C=Math.abs(u-l),N=-m/2,P=l<u?1:-1,M=i<c?1:-1,U=0,G=this.image.get(h?l:i,h?i:l);for(let K=i,ee=l;K!==c;K+=M){let le=this.image.get(h?ee:K,h?K:ee);if(le!==G&&(U++,G=le),N+=C,N>0){if(ee===u)break;ee+=P,N-=m}}return U}}class Tr{constructor(){this.decoder=new to}decode(e,n=null){let i,l;if(n!=null&&n.has(oe.PURE_BARCODE)){const C=Tr.extractPureBits(e.getBlackMatrix());i=this.decoder.decode(C),l=Tr.NO_POINTS}else{const C=new $t(e.getBlackMatrix()).detect();i=this.decoder.decode(C.getBits()),l=C.getPoints()}const c=i.getRawBytes(),u=new ze(i.getText(),c,8*c.length,l,fe.DATA_MATRIX,B.currentTimeMillis()),h=i.getByteSegments();h!=null&&u.putMetadata(He.BYTE_SEGMENTS,h);const m=i.getECLevel();return m!=null&&u.putMetadata(He.ERROR_CORRECTION_LEVEL,m),u}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(n==null||i==null)throw new Q;const l=this.moduleSize(n,e);let c=n[1];const u=i[1];let h=n[0];const C=(i[0]-h+1)/l,N=(u-c+1)/l;if(C<=0||N<=0)throw new Q;const P=l/2;c+=P,h+=P;const M=new Se(C,N);for(let U=0;U<N;U++){const G=c+U*l;for(let K=0;K<C;K++)e.get(h+K*l,G)&&M.set(K,U)}return M}static moduleSize(e,n){const i=n.getWidth();let l=e[0];const c=e[1];for(;l<i&&n.get(l,c);)l++;if(l===i)throw new Q;const u=l-e[0];if(u===0)throw new Q;return u}}Tr.NO_POINTS=[];class Dc extends be{constructor(e=500){super(new Tr,e)}}var Yi;(function(k){k[k.L=0]="L",k[k.M=1]="M",k[k.Q=2]="Q",k[k.H=3]="H"})(Yi||(Yi={}));class Xt{constructor(e,n,i){this.value=e,this.stringValue=n,this.bits=i,Xt.FOR_BITS.set(i,this),Xt.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return Xt.L;case"M":return Xt.M;case"Q":return Xt.Q;case"H":return Xt.H;default:throw new S(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof Xt))return!1;const n=e;return this.value===n.value}static forBits(e){if(e<0||e>=Xt.FOR_BITS.size)throw new I;return Xt.FOR_BITS.get(e)}}Xt.FOR_BITS=new Map,Xt.FOR_VALUE=new Map,Xt.L=new Xt(Yi.L,"L",1),Xt.M=new Xt(Yi.M,"M",0),Xt.Q=new Xt(Yi.Q,"Q",3),Xt.H=new Xt(Yi.H,"H",2);class Nn{constructor(e){this.errorCorrectionLevel=Xt.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,n){return z.bitCount(e^n)}static decodeFormatInformation(e,n){const i=Nn.doDecodeFormatInformation(e,n);return i!==null?i:Nn.doDecodeFormatInformation(e^Nn.FORMAT_INFO_MASK_QR,n^Nn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,n){let i=Number.MAX_SAFE_INTEGER,l=0;for(const c of Nn.FORMAT_INFO_DECODE_LOOKUP){const u=c[0];if(u===e||u===n)return new Nn(c[1]);let h=Nn.numBitsDiffering(e,u);h<i&&(l=c[1],i=h),e!==n&&(h=Nn.numBitsDiffering(n,u),h<i&&(l=c[1],i=h))}return i<=3?new Nn(l):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof Nn))return!1;const n=e;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask}}Nn.FORMAT_INFO_MASK_QR=21522,Nn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class re{constructor(e,...n){this.ecCodewordsPerBlock=e,this.ecBlocks=n}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const n=this.ecBlocks;for(const i of n)e+=i.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class F{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class tt{constructor(e,n,...i){this.versionNumber=e,this.alignmentPatternCenters=n,this.ecBlocks=i;let l=0;const c=i[0].getECCodewordsPerBlock(),u=i[0].getECBlocks();for(const h of u)l+=h.getCount()*(h.getDataCodewords()+c);this.totalCodewords=l}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new q;try{return this.getVersionForNumber((e-17)/4)}catch{throw new q}}static getVersionForNumber(e){if(e<1||e>40)throw new I;return tt.VERSIONS[e-1]}static decodeVersionInformation(e){let n=Number.MAX_SAFE_INTEGER,i=0;for(let l=0;l<tt.VERSION_DECODE_INFO.length;l++){const c=tt.VERSION_DECODE_INFO[l];if(c===e)return tt.getVersionForNumber(l+7);const u=Nn.numBitsDiffering(e,c);u<n&&(i=l+7,n=u)}return n<=3?tt.getVersionForNumber(i):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),n=new Se(e);n.setRegion(0,0,9,9),n.setRegion(e-8,0,8,9),n.setRegion(0,e-8,9,8);const i=this.alignmentPatternCenters.length;for(let l=0;l<i;l++){const c=this.alignmentPatternCenters[l]-2;for(let u=0;u<i;u++)l===0&&(u===0||u===i-1)||l===i-1&&u===0||n.setRegion(this.alignmentPatternCenters[u]-2,c,5,5)}return n.setRegion(6,9,1,e-17),n.setRegion(9,6,e-17,1),this.versionNumber>6&&(n.setRegion(e-11,0,3,6),n.setRegion(0,e-11,6,3)),n}toString(){return""+this.versionNumber}}tt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),tt.VERSIONS=[new tt(1,new Int32Array(0),new re(7,new F(1,19)),new re(10,new F(1,16)),new re(13,new F(1,13)),new re(17,new F(1,9))),new tt(2,Int32Array.from([6,18]),new re(10,new F(1,34)),new re(16,new F(1,28)),new re(22,new F(1,22)),new re(28,new F(1,16))),new tt(3,Int32Array.from([6,22]),new re(15,new F(1,55)),new re(26,new F(1,44)),new re(18,new F(2,17)),new re(22,new F(2,13))),new tt(4,Int32Array.from([6,26]),new re(20,new F(1,80)),new re(18,new F(2,32)),new re(26,new F(2,24)),new re(16,new F(4,9))),new tt(5,Int32Array.from([6,30]),new re(26,new F(1,108)),new re(24,new F(2,43)),new re(18,new F(2,15),new F(2,16)),new re(22,new F(2,11),new F(2,12))),new tt(6,Int32Array.from([6,34]),new re(18,new F(2,68)),new re(16,new F(4,27)),new re(24,new F(4,19)),new re(28,new F(4,15))),new tt(7,Int32Array.from([6,22,38]),new re(20,new F(2,78)),new re(18,new F(4,31)),new re(18,new F(2,14),new F(4,15)),new re(26,new F(4,13),new F(1,14))),new tt(8,Int32Array.from([6,24,42]),new re(24,new F(2,97)),new re(22,new F(2,38),new F(2,39)),new re(22,new F(4,18),new F(2,19)),new re(26,new F(4,14),new F(2,15))),new tt(9,Int32Array.from([6,26,46]),new re(30,new F(2,116)),new re(22,new F(3,36),new F(2,37)),new re(20,new F(4,16),new F(4,17)),new re(24,new F(4,12),new F(4,13))),new tt(10,Int32Array.from([6,28,50]),new re(18,new F(2,68),new F(2,69)),new re(26,new F(4,43),new F(1,44)),new re(24,new F(6,19),new F(2,20)),new re(28,new F(6,15),new F(2,16))),new tt(11,Int32Array.from([6,30,54]),new re(20,new F(4,81)),new re(30,new F(1,50),new F(4,51)),new re(28,new F(4,22),new F(4,23)),new re(24,new F(3,12),new F(8,13))),new tt(12,Int32Array.from([6,32,58]),new re(24,new F(2,92),new F(2,93)),new re(22,new F(6,36),new F(2,37)),new re(26,new F(4,20),new F(6,21)),new re(28,new F(7,14),new F(4,15))),new tt(13,Int32Array.from([6,34,62]),new re(26,new F(4,107)),new re(22,new F(8,37),new F(1,38)),new re(24,new F(8,20),new F(4,21)),new re(22,new F(12,11),new F(4,12))),new tt(14,Int32Array.from([6,26,46,66]),new re(30,new F(3,115),new F(1,116)),new re(24,new F(4,40),new F(5,41)),new re(20,new F(11,16),new F(5,17)),new re(24,new F(11,12),new F(5,13))),new tt(15,Int32Array.from([6,26,48,70]),new re(22,new F(5,87),new F(1,88)),new re(24,new F(5,41),new F(5,42)),new re(30,new F(5,24),new F(7,25)),new re(24,new F(11,12),new F(7,13))),new tt(16,Int32Array.from([6,26,50,74]),new re(24,new F(5,98),new F(1,99)),new re(28,new F(7,45),new F(3,46)),new re(24,new F(15,19),new F(2,20)),new re(30,new F(3,15),new F(13,16))),new tt(17,Int32Array.from([6,30,54,78]),new re(28,new F(1,107),new F(5,108)),new re(28,new F(10,46),new F(1,47)),new re(28,new F(1,22),new F(15,23)),new re(28,new F(2,14),new F(17,15))),new tt(18,Int32Array.from([6,30,56,82]),new re(30,new F(5,120),new F(1,121)),new re(26,new F(9,43),new F(4,44)),new re(28,new F(17,22),new F(1,23)),new re(28,new F(2,14),new F(19,15))),new tt(19,Int32Array.from([6,30,58,86]),new re(28,new F(3,113),new F(4,114)),new re(26,new F(3,44),new F(11,45)),new re(26,new F(17,21),new F(4,22)),new re(26,new F(9,13),new F(16,14))),new tt(20,Int32Array.from([6,34,62,90]),new re(28,new F(3,107),new F(5,108)),new re(26,new F(3,41),new F(13,42)),new re(30,new F(15,24),new F(5,25)),new re(28,new F(15,15),new F(10,16))),new tt(21,Int32Array.from([6,28,50,72,94]),new re(28,new F(4,116),new F(4,117)),new re(26,new F(17,42)),new re(28,new F(17,22),new F(6,23)),new re(30,new F(19,16),new F(6,17))),new tt(22,Int32Array.from([6,26,50,74,98]),new re(28,new F(2,111),new F(7,112)),new re(28,new F(17,46)),new re(30,new F(7,24),new F(16,25)),new re(24,new F(34,13))),new tt(23,Int32Array.from([6,30,54,78,102]),new re(30,new F(4,121),new F(5,122)),new re(28,new F(4,47),new F(14,48)),new re(30,new F(11,24),new F(14,25)),new re(30,new F(16,15),new F(14,16))),new tt(24,Int32Array.from([6,28,54,80,106]),new re(30,new F(6,117),new F(4,118)),new re(28,new F(6,45),new F(14,46)),new re(30,new F(11,24),new F(16,25)),new re(30,new F(30,16),new F(2,17))),new tt(25,Int32Array.from([6,32,58,84,110]),new re(26,new F(8,106),new F(4,107)),new re(28,new F(8,47),new F(13,48)),new re(30,new F(7,24),new F(22,25)),new re(30,new F(22,15),new F(13,16))),new tt(26,Int32Array.from([6,30,58,86,114]),new re(28,new F(10,114),new F(2,115)),new re(28,new F(19,46),new F(4,47)),new re(28,new F(28,22),new F(6,23)),new re(30,new F(33,16),new F(4,17))),new tt(27,Int32Array.from([6,34,62,90,118]),new re(30,new F(8,122),new F(4,123)),new re(28,new F(22,45),new F(3,46)),new re(30,new F(8,23),new F(26,24)),new re(30,new F(12,15),new F(28,16))),new tt(28,Int32Array.from([6,26,50,74,98,122]),new re(30,new F(3,117),new F(10,118)),new re(28,new F(3,45),new F(23,46)),new re(30,new F(4,24),new F(31,25)),new re(30,new F(11,15),new F(31,16))),new tt(29,Int32Array.from([6,30,54,78,102,126]),new re(30,new F(7,116),new F(7,117)),new re(28,new F(21,45),new F(7,46)),new re(30,new F(1,23),new F(37,24)),new re(30,new F(19,15),new F(26,16))),new tt(30,Int32Array.from([6,26,52,78,104,130]),new re(30,new F(5,115),new F(10,116)),new re(28,new F(19,47),new F(10,48)),new re(30,new F(15,24),new F(25,25)),new re(30,new F(23,15),new F(25,16))),new tt(31,Int32Array.from([6,30,56,82,108,134]),new re(30,new F(13,115),new F(3,116)),new re(28,new F(2,46),new F(29,47)),new re(30,new F(42,24),new F(1,25)),new re(30,new F(23,15),new F(28,16))),new tt(32,Int32Array.from([6,34,60,86,112,138]),new re(30,new F(17,115)),new re(28,new F(10,46),new F(23,47)),new re(30,new F(10,24),new F(35,25)),new re(30,new F(19,15),new F(35,16))),new tt(33,Int32Array.from([6,30,58,86,114,142]),new re(30,new F(17,115),new F(1,116)),new re(28,new F(14,46),new F(21,47)),new re(30,new F(29,24),new F(19,25)),new re(30,new F(11,15),new F(46,16))),new tt(34,Int32Array.from([6,34,62,90,118,146]),new re(30,new F(13,115),new F(6,116)),new re(28,new F(14,46),new F(23,47)),new re(30,new F(44,24),new F(7,25)),new re(30,new F(59,16),new F(1,17))),new tt(35,Int32Array.from([6,30,54,78,102,126,150]),new re(30,new F(12,121),new F(7,122)),new re(28,new F(12,47),new F(26,48)),new re(30,new F(39,24),new F(14,25)),new re(30,new F(22,15),new F(41,16))),new tt(36,Int32Array.from([6,24,50,76,102,128,154]),new re(30,new F(6,121),new F(14,122)),new re(28,new F(6,47),new F(34,48)),new re(30,new F(46,24),new F(10,25)),new re(30,new F(2,15),new F(64,16))),new tt(37,Int32Array.from([6,28,54,80,106,132,158]),new re(30,new F(17,122),new F(4,123)),new re(28,new F(29,46),new F(14,47)),new re(30,new F(49,24),new F(10,25)),new re(30,new F(24,15),new F(46,16))),new tt(38,Int32Array.from([6,32,58,84,110,136,162]),new re(30,new F(4,122),new F(18,123)),new re(28,new F(13,46),new F(32,47)),new re(30,new F(48,24),new F(14,25)),new re(30,new F(42,15),new F(32,16))),new tt(39,Int32Array.from([6,26,54,82,110,138,166]),new re(30,new F(20,117),new F(4,118)),new re(28,new F(40,47),new F(7,48)),new re(30,new F(43,24),new F(22,25)),new re(30,new F(10,15),new F(67,16))),new tt(40,Int32Array.from([6,30,58,86,114,142,170]),new re(30,new F(19,118),new F(6,119)),new re(28,new F(18,47),new F(31,48)),new re(30,new F(34,24),new F(34,25)),new re(30,new F(20,15),new F(61,16)))];var hn;(function(k){k[k.DATA_MASK_000=0]="DATA_MASK_000",k[k.DATA_MASK_001=1]="DATA_MASK_001",k[k.DATA_MASK_010=2]="DATA_MASK_010",k[k.DATA_MASK_011=3]="DATA_MASK_011",k[k.DATA_MASK_100=4]="DATA_MASK_100",k[k.DATA_MASK_101=5]="DATA_MASK_101",k[k.DATA_MASK_110=6]="DATA_MASK_110",k[k.DATA_MASK_111=7]="DATA_MASK_111"})(hn||(hn={}));class Tt{constructor(e,n){this.value=e,this.isMasked=n}unmaskBitMatrix(e,n){for(let i=0;i<n;i++)for(let l=0;l<n;l++)this.isMasked(i,l)&&e.flip(l,i)}}Tt.values=new Map([[hn.DATA_MASK_000,new Tt(hn.DATA_MASK_000,(k,e)=>(k+e&1)===0)],[hn.DATA_MASK_001,new Tt(hn.DATA_MASK_001,(k,e)=>(k&1)===0)],[hn.DATA_MASK_010,new Tt(hn.DATA_MASK_010,(k,e)=>e%3===0)],[hn.DATA_MASK_011,new Tt(hn.DATA_MASK_011,(k,e)=>(k+e)%3===0)],[hn.DATA_MASK_100,new Tt(hn.DATA_MASK_100,(k,e)=>(Math.floor(k/2)+Math.floor(e/3)&1)===0)],[hn.DATA_MASK_101,new Tt(hn.DATA_MASK_101,(k,e)=>k*e%6===0)],[hn.DATA_MASK_110,new Tt(hn.DATA_MASK_110,(k,e)=>k*e%6<3)],[hn.DATA_MASK_111,new Tt(hn.DATA_MASK_111,(k,e)=>(k+e+k*e%3&1)===0)]]);class Qa{constructor(e){const n=e.getHeight();if(n<21||(n&3)!==1)throw new q;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let c=0;c<6;c++)e=this.copyBit(c,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let c=5;c>=0;c--)e=this.copyBit(8,c,e);const n=this.bitMatrix.getHeight();let i=0;const l=n-7;for(let c=n-1;c>=l;c--)i=this.copyBit(8,c,i);for(let c=n-8;c<n;c++)i=this.copyBit(c,8,i);if(this.parsedFormatInfo=Nn.decodeFormatInformation(e,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new q}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),n=Math.floor((e-17)/4);if(n<=6)return tt.getVersionForNumber(n);let i=0;const l=e-11;for(let u=5;u>=0;u--)for(let h=e-9;h>=l;h--)i=this.copyBit(h,u,i);let c=tt.decodeVersionInformation(i);if(c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;i=0;for(let u=5;u>=0;u--)for(let h=e-9;h>=l;h--)i=this.copyBit(u,h,i);if(c=tt.decodeVersionInformation(i),c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;throw new q}copyBit(e,n,i){return(this.isMirror?this.bitMatrix.get(n,e):this.bitMatrix.get(e,n))?i<<1|1:i<<1}readCodewords(){const e=this.readFormatInformation(),n=this.readVersion(),i=Tt.values.get(e.getDataMask()),l=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,l);const c=n.buildFunctionPattern();let u=!0;const h=new Uint8Array(n.getTotalCodewords());let m=0,C=0,N=0;for(let P=l-1;P>0;P-=2){P===6&&P--;for(let M=0;M<l;M++){const U=u?l-1-M:M;for(let G=0;G<2;G++)c.get(P-G,U)||(N++,C<<=1,this.bitMatrix.get(P-G,U)&&(C|=1),N===8&&(h[m++]=C,N=0,C=0))}u=!u}if(m!==n.getTotalCodewords())throw new q;return h}remask(){if(this.parsedFormatInfo===null)return;const e=Tt.values[this.parsedFormatInfo.getDataMask()],n=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,n)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let n=0,i=e.getWidth();n<i;n++)for(let l=n+1,c=e.getHeight();l<c;l++)e.get(n,l)!==e.get(l,n)&&(e.flip(l,n),e.flip(n,l))}}class no{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n,i){if(e.length!==n.getTotalCodewords())throw new I;const l=n.getECBlocksForLevel(i);let c=0;const u=l.getECBlocks();for(const G of u)c+=G.getCount();const h=new Array(c);let m=0;for(const G of u)for(let K=0;K<G.getCount();K++){const ee=G.getDataCodewords(),le=l.getECCodewordsPerBlock()+ee;h[m++]=new no(ee,new Uint8Array(le))}const C=h[0].codewords.length;let N=h.length-1;for(;N>=0&&h[N].codewords.length!==C;)N--;N++;const P=C-l.getECCodewordsPerBlock();let M=0;for(let G=0;G<P;G++)for(let K=0;K<m;K++)h[K].codewords[G]=e[M++];for(let G=N;G<m;G++)h[G].codewords[P]=e[M++];const U=h[0].codewords.length;for(let G=P;G<U;G++)for(let K=0;K<m;K++){const ee=K<N?G:G+1;h[K].codewords[ee]=e[M++]}return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var er;(function(k){k[k.TERMINATOR=0]="TERMINATOR",k[k.NUMERIC=1]="NUMERIC",k[k.ALPHANUMERIC=2]="ALPHANUMERIC",k[k.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",k[k.BYTE=4]="BYTE",k[k.ECI=5]="ECI",k[k.KANJI=6]="KANJI",k[k.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",k[k.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",k[k.HANZI=9]="HANZI"})(er||(er={}));class rt{constructor(e,n,i,l){this.value=e,this.stringValue=n,this.characterCountBitsForVersions=i,this.bits=l,rt.FOR_BITS.set(l,this),rt.FOR_VALUE.set(e,this)}static forBits(e){const n=rt.FOR_BITS.get(e);if(n===void 0)throw new I;return n}getCharacterCountBits(e){const n=e.getVersionNumber();let i;return n<=9?i=0:n<=26?i=1:i=2,this.characterCountBitsForVersions[i]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof rt))return!1;const n=e;return this.value===n.value}toString(){return this.stringValue}}rt.FOR_BITS=new Map,rt.FOR_VALUE=new Map,rt.TERMINATOR=new rt(er.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),rt.NUMERIC=new rt(er.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),rt.ALPHANUMERIC=new rt(er.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),rt.STRUCTURED_APPEND=new rt(er.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),rt.BYTE=new rt(er.BYTE,"BYTE",Int32Array.from([8,16,16]),4),rt.ECI=new rt(er.ECI,"ECI",Int32Array.from([0,0,0]),7),rt.KANJI=new rt(er.KANJI,"KANJI",Int32Array.from([8,10,12]),8),rt.FNC1_FIRST_POSITION=new rt(er.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),rt.FNC1_SECOND_POSITION=new rt(er.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),rt.HANZI=new rt(er.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Zt{static decode(e,n,i,l){const c=new Ho(e);let u=new De;const h=new Array;let m=-1,C=-1;try{let N=null,P=!1,M;do{if(c.available()<4)M=rt.TERMINATOR;else{const U=c.readBits(4);M=rt.forBits(U)}switch(M){case rt.TERMINATOR:break;case rt.FNC1_FIRST_POSITION:case rt.FNC1_SECOND_POSITION:P=!0;break;case rt.STRUCTURED_APPEND:if(c.available()<16)throw new q;m=c.readBits(8),C=c.readBits(8);break;case rt.ECI:const U=Zt.parseECIValue(c);if(N=$.getCharacterSetECIByValue(U),N===null)throw new q;break;case rt.HANZI:const G=c.readBits(4),K=c.readBits(M.getCharacterCountBits(n));G===Zt.GB2312_SUBSET&&Zt.decodeHanziSegment(c,u,K);break;default:const ee=c.readBits(M.getCharacterCountBits(n));switch(M){case rt.NUMERIC:Zt.decodeNumericSegment(c,u,ee);break;case rt.ALPHANUMERIC:Zt.decodeAlphanumericSegment(c,u,ee,P);break;case rt.BYTE:Zt.decodeByteSegment(c,u,ee,N,h,l);break;case rt.KANJI:Zt.decodeKanjiSegment(c,u,ee);break;default:throw new q}break}}while(M!==rt.TERMINATOR)}catch{throw new q}return new nt(e,u.toString(),h.length===0?null:h,i===null?null:i.toString(),m,C)}static decodeHanziSegment(e,n,i){if(i*13>e.available())throw new q;const l=new Uint8Array(2*i);let c=0;for(;i>0;){const u=e.readBits(13);let h=u/96<<8&4294967295|u%96;h<959?h+=41377:h+=42657,l[c]=h>>8&255,l[c+1]=h&255,c+=2,i--}try{n.append(Oe.decode(l,ke.GB2312))}catch(u){throw new q(u)}}static decodeKanjiSegment(e,n,i){if(i*13>e.available())throw new q;const l=new Uint8Array(2*i);let c=0;for(;i>0;){const u=e.readBits(13);let h=u/192<<8&4294967295|u%192;h<7936?h+=33088:h+=49472,l[c]=h>>8,l[c+1]=h,c+=2,i--}try{n.append(Oe.decode(l,ke.SHIFT_JIS))}catch(u){throw new q(u)}}static decodeByteSegment(e,n,i,l,c,u){if(8*i>e.available())throw new q;const h=new Uint8Array(i);for(let C=0;C<i;C++)h[C]=e.readBits(8);let m;l===null?m=ke.guessEncoding(h,u):m=l.getName();try{n.append(Oe.decode(h,m))}catch(C){throw new q(C)}c.push(h)}static toAlphaNumericChar(e){if(e>=Zt.ALPHANUMERIC_CHARS.length)throw new q;return Zt.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,n,i,l){const c=n.length();for(;i>1;){if(e.available()<11)throw new q;const u=e.readBits(11);n.append(Zt.toAlphaNumericChar(Math.floor(u/45))),n.append(Zt.toAlphaNumericChar(u%45)),i-=2}if(i===1){if(e.available()<6)throw new q;n.append(Zt.toAlphaNumericChar(e.readBits(6)))}if(l)for(let u=c;u<n.length();u++)n.charAt(u)==="%"&&(u<n.length()-1&&n.charAt(u+1)==="%"?n.deleteCharAt(u+1):n.setCharAt(u,""))}static decodeNumericSegment(e,n,i){for(;i>=3;){if(e.available()<10)throw new q;const l=e.readBits(10);if(l>=1e3)throw new q;n.append(Zt.toAlphaNumericChar(Math.floor(l/100))),n.append(Zt.toAlphaNumericChar(Math.floor(l/10)%10)),n.append(Zt.toAlphaNumericChar(l%10)),i-=3}if(i===2){if(e.available()<7)throw new q;const l=e.readBits(7);if(l>=100)throw new q;n.append(Zt.toAlphaNumericChar(Math.floor(l/10))),n.append(Zt.toAlphaNumericChar(l%10))}else if(i===1){if(e.available()<4)throw new q;const l=e.readBits(4);if(l>=10)throw new q;n.append(Zt.toAlphaNumericChar(l))}}static parseECIValue(e){const n=e.readBits(8);if(!(n&128))return n&127;if((n&192)===128){const i=e.readBits(8);return(n&63)<<8&4294967295|i}if((n&224)===192){const i=e.readBits(16);return(n&31)<<16&4294967295|i}throw new q}}Zt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Zt.GB2312_SUBSET=1;class Go{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const n=e[0];e[0]=e[2],e[2]=n}}class Xo{constructor(){this.rsDecoder=new Pt(we.QR_CODE_FIELD_256)}decodeBooleanArray(e,n){return this.decodeBitMatrix(Se.parseFromBooleanArray(e),n)}decodeBitMatrix(e,n){const i=new Qa(e);let l=null;try{return this.decodeBitMatrixParser(i,n)}catch(c){l=c}try{i.remask(),i.setMirror(!0),i.readVersion(),i.readFormatInformation(),i.mirror();const c=this.decodeBitMatrixParser(i,n);return c.setOther(new Go(!0)),c}catch(c){throw l!==null?l:c}}decodeBitMatrixParser(e,n){const i=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),c=e.readCodewords(),u=no.getDataBlocks(c,i,l);let h=0;for(const N of u)h+=N.getNumDataCodewords();const m=new Uint8Array(h);let C=0;for(const N of u){const P=N.getCodewords(),M=N.getNumDataCodewords();this.correctErrors(P,M);for(let U=0;U<M;U++)m[C++]=P[U]}return Zt.decode(m,i,l,n)}correctErrors(e,n){const i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-n)}catch{throw new D}for(let l=0;l<n;l++)e[l]=i[l]}}class Ki extends Ie{constructor(e,n,i){super(e,n),this.estimatedModuleSize=i}aboutEquals(e,n,i){if(Math.abs(n-this.getY())<=e&&Math.abs(i-this.getX())<=e){const l=Math.abs(e-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(e,n,i){const l=(this.getX()+n)/2,c=(this.getY()+e)/2,u=(this.estimatedModuleSize+i)/2;return new Ki(l,c,u)}}class Ir{constructor(e,n,i,l,c,u,h){this.image=e,this.startX=n,this.startY=i,this.width=l,this.height=c,this.moduleSize=u,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,n=this.height,i=this.width,l=e+i,c=this.startY+n/2,u=new Int32Array(3),h=this.image;for(let m=0;m<n;m++){const C=c+(m&1?-Math.floor((m+1)/2):Math.floor((m+1)/2));u[0]=0,u[1]=0,u[2]=0;let N=e;for(;N<l&&!h.get(N,C);)N++;let P=0;for(;N<l;){if(h.get(N,C))if(P===1)u[1]++;else if(P===2){if(this.foundPatternCross(u)){const M=this.handlePossibleCenter(u,C,N);if(M!==null)return M}u[0]=u[2],u[1]=1,u[2]=0,P=1}else u[++P]++;else P===1&&P++,u[P]++;N++}if(this.foundPatternCross(u)){const M=this.handlePossibleCenter(u,C,l);if(M!==null)return M}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Q}static centerFromEnd(e,n){return n-e[2]-e[1]/2}foundPatternCross(e){const n=this.moduleSize,i=n/2;for(let l=0;l<3;l++)if(Math.abs(n-e[l])>=i)return!1;return!0}crossCheckVertical(e,n,i,l){const c=this.image,u=c.getHeight(),h=this.crossCheckStateCount;h[0]=0,h[1]=0,h[2]=0;let m=e;for(;m>=0&&c.get(n,m)&&h[1]<=i;)h[1]++,m--;if(m<0||h[1]>i)return NaN;for(;m>=0&&!c.get(n,m)&&h[0]<=i;)h[0]++,m--;if(h[0]>i)return NaN;for(m=e+1;m<u&&c.get(n,m)&&h[1]<=i;)h[1]++,m++;if(m===u||h[1]>i)return NaN;for(;m<u&&!c.get(n,m)&&h[2]<=i;)h[2]++,m++;if(h[2]>i)return NaN;const C=h[0]+h[1]+h[2];return 5*Math.abs(C-l)>=2*l?NaN:this.foundPatternCross(h)?Ir.centerFromEnd(h,m):NaN}handlePossibleCenter(e,n,i){const l=e[0]+e[1]+e[2],c=Ir.centerFromEnd(e,i),u=this.crossCheckVertical(n,c,2*e[1],l);if(!isNaN(u)){const h=(e[0]+e[1]+e[2])/3;for(const C of this.possibleCenters)if(C.aboutEquals(h,u,c))return C.combineEstimate(u,c,h);const m=new Ki(c,u,h);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null}}class Lr extends Ie{constructor(e,n,i,l){super(e,n),this.estimatedModuleSize=i,this.count=l,l===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,n,i){if(Math.abs(n-this.getY())<=e&&Math.abs(i-this.getX())<=e){const l=Math.abs(e-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(e,n,i){const l=this.count+1,c=(this.count*this.getX()+n)/l,u=(this.count*this.getY()+e)/l,h=(this.count*this.estimatedModuleSize+i)/l;return new Lr(c,u,h,l)}}class li{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class nn{constructor(e,n){this.image=e,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const n=e!=null&&e.get(oe.TRY_HARDER)!==void 0,i=e!=null&&e.get(oe.PURE_BARCODE)!==void 0,l=this.image,c=l.getHeight(),u=l.getWidth();let h=Math.floor(3*c/(4*nn.MAX_MODULES));(h<nn.MIN_SKIP||n)&&(h=nn.MIN_SKIP);let m=!1;const C=new Int32Array(5);for(let P=h-1;P<c&&!m;P+=h){C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0;let M=0;for(let U=0;U<u;U++)if(l.get(U,P))(M&1)===1&&M++,C[M]++;else if(M&1)C[M]++;else if(M===4)if(nn.foundPatternCross(C)){if(this.handlePossibleCenter(C,P,U,i)===!0)if(h=2,this.hasSkipped===!0)m=this.haveMultiplyConfirmedCenters();else{const K=this.findRowSkip();K>C[2]&&(P+=K-C[2]-h,U=u-1)}else{C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,M=3;continue}M=0,C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0}else C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,M=3;else C[++M]++;nn.foundPatternCross(C)&&this.handlePossibleCenter(C,P,u,i)===!0&&(h=C[0],this.hasSkipped&&(m=this.haveMultiplyConfirmedCenters()))}const N=this.selectBestPatterns();return Ie.orderBestPatterns(N),new li(N)}static centerFromEnd(e,n){return n-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let n=0;for(let c=0;c<5;c++){const u=e[c];if(u===0)return!1;n+=u}if(n<7)return!1;const i=n/7,l=i/2;return Math.abs(i-e[0])<l&&Math.abs(i-e[1])<l&&Math.abs(3*i-e[2])<3*l&&Math.abs(i-e[3])<l&&Math.abs(i-e[4])<l}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,n,i,l){const c=this.getCrossCheckStateCount();let u=0;const h=this.image;for(;e>=u&&n>=u&&h.get(n-u,e-u);)c[2]++,u++;if(e<u||n<u)return!1;for(;e>=u&&n>=u&&!h.get(n-u,e-u)&&c[1]<=i;)c[1]++,u++;if(e<u||n<u||c[1]>i)return!1;for(;e>=u&&n>=u&&h.get(n-u,e-u)&&c[0]<=i;)c[0]++,u++;if(c[0]>i)return!1;const m=h.getHeight(),C=h.getWidth();for(u=1;e+u<m&&n+u<C&&h.get(n+u,e+u);)c[2]++,u++;if(e+u>=m||n+u>=C)return!1;for(;e+u<m&&n+u<C&&!h.get(n+u,e+u)&&c[3]<i;)c[3]++,u++;if(e+u>=m||n+u>=C||c[3]>=i)return!1;for(;e+u<m&&n+u<C&&h.get(n+u,e+u)&&c[4]<i;)c[4]++,u++;if(c[4]>=i)return!1;const N=c[0]+c[1]+c[2]+c[3]+c[4];return Math.abs(N-l)<2*l&&nn.foundPatternCross(c)}crossCheckVertical(e,n,i,l){const c=this.image,u=c.getHeight(),h=this.getCrossCheckStateCount();let m=e;for(;m>=0&&c.get(n,m);)h[2]++,m--;if(m<0)return NaN;for(;m>=0&&!c.get(n,m)&&h[1]<=i;)h[1]++,m--;if(m<0||h[1]>i)return NaN;for(;m>=0&&c.get(n,m)&&h[0]<=i;)h[0]++,m--;if(h[0]>i)return NaN;for(m=e+1;m<u&&c.get(n,m);)h[2]++,m++;if(m===u)return NaN;for(;m<u&&!c.get(n,m)&&h[3]<i;)h[3]++,m++;if(m===u||h[3]>=i)return NaN;for(;m<u&&c.get(n,m)&&h[4]<i;)h[4]++,m++;if(h[4]>=i)return NaN;const C=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(C-l)>=2*l?NaN:nn.foundPatternCross(h)?nn.centerFromEnd(h,m):NaN}crossCheckHorizontal(e,n,i,l){const c=this.image,u=c.getWidth(),h=this.getCrossCheckStateCount();let m=e;for(;m>=0&&c.get(m,n);)h[2]++,m--;if(m<0)return NaN;for(;m>=0&&!c.get(m,n)&&h[1]<=i;)h[1]++,m--;if(m<0||h[1]>i)return NaN;for(;m>=0&&c.get(m,n)&&h[0]<=i;)h[0]++,m--;if(h[0]>i)return NaN;for(m=e+1;m<u&&c.get(m,n);)h[2]++,m++;if(m===u)return NaN;for(;m<u&&!c.get(m,n)&&h[3]<i;)h[3]++,m++;if(m===u||h[3]>=i)return NaN;for(;m<u&&c.get(m,n)&&h[4]<i;)h[4]++,m++;if(h[4]>=i)return NaN;const C=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(C-l)>=l?NaN:nn.foundPatternCross(h)?nn.centerFromEnd(h,m):NaN}handlePossibleCenter(e,n,i,l){const c=e[0]+e[1]+e[2]+e[3]+e[4];let u=nn.centerFromEnd(e,i),h=this.crossCheckVertical(n,Math.floor(u),e[2],c);if(!isNaN(h)&&(u=this.crossCheckHorizontal(Math.floor(u),Math.floor(h),e[2],c),!isNaN(u)&&(!l||this.crossCheckDiagonal(Math.floor(h),Math.floor(u),e[2],c)))){const m=c/7;let C=!1;const N=this.possibleCenters;for(let P=0,M=N.length;P<M;P++){const U=N[P];if(U.aboutEquals(m,h,u)){N[P]=U.combineEstimate(h,u,m),C=!0;break}}if(!C){const P=new Lr(u,h,m);N.push(P),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(P)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let n=null;for(const i of this.possibleCenters)if(i.getCount()>=nn.CENTER_QUORUM)if(n==null)n=i;else return this.hasSkipped=!0,Math.floor((Math.abs(n.getX()-i.getX())-Math.abs(n.getY()-i.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,n=0;const i=this.possibleCenters.length;for(const u of this.possibleCenters)u.getCount()>=nn.CENTER_QUORUM&&(e++,n+=u.getEstimatedModuleSize());if(e<3)return!1;const l=n/i;let c=0;for(const u of this.possibleCenters)c+=Math.abs(u.getEstimatedModuleSize()-l);return c<=.05*n}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new Q;const n=this.possibleCenters;let i;if(e>3){let l=0,c=0;for(const m of this.possibleCenters){const C=m.getEstimatedModuleSize();l+=C,c+=C*C}i=l/e;let u=Math.sqrt(c/e-i*i);n.sort((m,C)=>{const N=Math.abs(C.getEstimatedModuleSize()-i),P=Math.abs(m.getEstimatedModuleSize()-i);return N<P?-1:N>P?1:0});const h=Math.max(.2*i,u);for(let m=0;m<n.length&&n.length>3;m++){const C=n[m];Math.abs(C.getEstimatedModuleSize()-i)>h&&(n.splice(m,1),m--)}}if(n.length>3){let l=0;for(const c of n)l+=c.getEstimatedModuleSize();i=l/n.length,n.sort((c,u)=>{if(u.getCount()===c.getCount()){const h=Math.abs(u.getEstimatedModuleSize()-i),m=Math.abs(c.getEstimatedModuleSize()-i);return h<m?1:h>m?-1:0}else return u.getCount()-c.getCount()}),n.splice(3)}return[n[0],n[1],n[2]]}}nn.CENTER_QUORUM=2,nn.MIN_SKIP=3,nn.MAX_MODULES=57;class $r{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(oe.NEED_RESULT_POINT_CALLBACK);const i=new nn(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(i)}processFinderPatternInfo(e){const n=e.getTopLeft(),i=e.getTopRight(),l=e.getBottomLeft(),c=this.calculateModuleSize(n,i,l);if(c<1)throw new Q("No pattern found in proccess finder.");const u=$r.computeDimension(n,i,l,c),h=tt.getProvisionalVersionForDimension(u),m=h.getDimensionForVersion()-7;let C=null;if(h.getAlignmentPatternCenters().length>0){const U=i.getX()-n.getX()+l.getX(),G=i.getY()-n.getY()+l.getY(),K=1-3/m,ee=Math.floor(n.getX()+K*(U-n.getX())),le=Math.floor(n.getY()+K*(G-n.getY()));for(let Ne=4;Ne<=16;Ne<<=1)try{C=this.findAlignmentInRegion(c,ee,le,Ne);break}catch(_e){if(!(_e instanceof Q))throw _e}}const N=$r.createTransform(n,i,l,C,u),P=$r.sampleGrid(this.image,N,u);let M;return C===null?M=[l,n,i]:M=[l,n,i,C],new yn(P,M)}static createTransform(e,n,i,l,c){const u=c-3.5;let h,m,C,N;return l!==null?(h=l.getX(),m=l.getY(),C=u-3,N=C):(h=n.getX()-e.getX()+i.getX(),m=n.getY()-e.getY()+i.getY(),C=u,N=u),$e.quadrilateralToQuadrilateral(3.5,3.5,u,3.5,C,N,3.5,u,e.getX(),e.getY(),n.getX(),n.getY(),h,m,i.getX(),i.getY())}static sampleGrid(e,n,i){return Ve.getInstance().sampleGridWithTransform(e,i,i,n)}static computeDimension(e,n,i,l){const c=Je.round(Ie.distance(e,n)/l),u=Je.round(Ie.distance(e,i)/l);let h=Math.floor((c+u)/2)+7;switch(h&3){case 0:h++;break;case 2:h--;break;case 3:throw new Q("Dimensions could be not found.")}return h}calculateModuleSize(e,n,i){return(this.calculateModuleSizeOneWay(e,n)+this.calculateModuleSizeOneWay(e,i))/2}calculateModuleSizeOneWay(e,n){const i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(n.getX()),Math.floor(n.getY())),l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(i)?l/7:isNaN(l)?i/7:(i+l)/14}sizeOfBlackWhiteBlackRunBothWays(e,n,i,l){let c=this.sizeOfBlackWhiteBlackRun(e,n,i,l),u=1,h=e-(i-e);h<0?(u=e/(e-h),h=0):h>=this.image.getWidth()&&(u=(this.image.getWidth()-1-e)/(h-e),h=this.image.getWidth()-1);let m=Math.floor(n-(l-n)*u);return u=1,m<0?(u=n/(n-m),m=0):m>=this.image.getHeight()&&(u=(this.image.getHeight()-1-n)/(m-n),m=this.image.getHeight()-1),h=Math.floor(e+(h-e)*u),c+=this.sizeOfBlackWhiteBlackRun(e,n,h,m),c-1}sizeOfBlackWhiteBlackRun(e,n,i,l){const c=Math.abs(l-n)>Math.abs(i-e);if(c){let U=e;e=n,n=U,U=i,i=l,l=U}const u=Math.abs(i-e),h=Math.abs(l-n);let m=-u/2;const C=e<i?1:-1,N=n<l?1:-1;let P=0;const M=i+C;for(let U=e,G=n;U!==M;U+=C){const K=c?G:U,ee=c?U:G;if(P===1===this.image.get(K,ee)){if(P===2)return Je.distance(U,G,e,n);P++}if(m+=h,m>0){if(G===l)break;G+=N,m-=u}}return P===2?Je.distance(i+C,l,e,n):NaN}findAlignmentInRegion(e,n,i,l){const c=Math.floor(l*e),u=Math.max(0,n-c),h=Math.min(this.image.getWidth()-1,n+c);if(h-u<e*3)throw new Q("Alignment top exceeds estimated module size.");const m=Math.max(0,i-c),C=Math.min(this.image.getHeight()-1,i+c);if(C-m<e*3)throw new Q("Alignment bottom exceeds estimated module size.");return new Ir(this.image,u,m,h-u,C-m,e,this.resultPointCallback).find()}}class Hn{constructor(){this.decoder=new Xo}getDecoder(){return this.decoder}decode(e,n){let i,l;if(n!=null&&n.get(oe.PURE_BARCODE)!==void 0){const m=Hn.extractPureBits(e.getBlackMatrix());i=this.decoder.decodeBitMatrix(m,n),l=Hn.NO_POINTS}else{const m=new $r(e.getBlackMatrix()).detect(n);i=this.decoder.decodeBitMatrix(m.getBits(),n),l=m.getPoints()}i.getOther()instanceof Go&&i.getOther().applyMirroredCorrection(l);const c=new ze(i.getText(),i.getRawBytes(),void 0,l,fe.QR_CODE,void 0),u=i.getByteSegments();u!==null&&c.putMetadata(He.BYTE_SEGMENTS,u);const h=i.getECLevel();return h!==null&&c.putMetadata(He.ERROR_CORRECTION_LEVEL,h),i.hasStructuredAppend()&&(c.putMetadata(He.STRUCTURED_APPEND_SEQUENCE,i.getStructuredAppendSequenceNumber()),c.putMetadata(He.STRUCTURED_APPEND_PARITY,i.getStructuredAppendParity())),c}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(n===null||i===null)throw new Q;const l=this.moduleSize(n,e);let c=n[1],u=i[1],h=n[0],m=i[0];if(h>=m||c>=u)throw new Q;if(u-c!==m-h&&(m=h+(u-c),m>=e.getWidth()))throw new Q;const C=Math.round((m-h+1)/l),N=Math.round((u-c+1)/l);if(C<=0||N<=0)throw new Q;if(N!==C)throw new Q;const P=Math.floor(l/2);c+=P,h+=P;const M=h+Math.floor((C-1)*l)-m;if(M>0){if(M>P)throw new Q;h-=M}const U=c+Math.floor((N-1)*l)-u;if(U>0){if(U>P)throw new Q;c-=U}const G=new Se(C,N);for(let K=0;K<N;K++){const ee=c+Math.floor(K*l);for(let le=0;le<C;le++)e.get(h+Math.floor(le*l),ee)&&G.set(le,K)}return G}static moduleSize(e,n){const i=n.getHeight(),l=n.getWidth();let c=e[0],u=e[1],h=!0,m=0;for(;c<l&&u<i;){if(h!==n.get(c,u)){if(++m===5)break;h=!h}c++,u++}if(c===l||u===i)throw new Q;return(c-e[0])/7}}Hn.NO_POINTS=new Array;class dt{PDF417Common(){}static getBitCountSum(e){return Je.sum(e)}static toIntArray(e){if(e==null||!e.length)return dt.EMPTY_INT_ARRAY;const n=new Int32Array(e.length);let i=0;for(const l of e)n[i++]=l;return n}static getCodeword(e){const n=W.binarySearch(dt.SYMBOL_TABLE,e&262143);return n<0?-1:(dt.CODEWORD_TABLE[n]-1)%dt.NUMBER_OF_CODEWORDS}}dt.NUMBER_OF_CODEWORDS=929,dt.MAX_CODEWORDS_IN_BARCODE=dt.NUMBER_OF_CODEWORDS-1,dt.MIN_ROWS_IN_BARCODE=3,dt.MAX_ROWS_IN_BARCODE=90,dt.MODULES_IN_CODEWORD=17,dt.MODULES_IN_STOP_PATTERN=18,dt.BARS_IN_MODULE=8,dt.EMPTY_INT_ARRAY=new Int32Array([]),dt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),dt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ja{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class wt{static detectMultiple(e,n,i){let l=e.getBlackMatrix(),c=wt.detect(i,l);return c.length||(l=l.clone(),l.rotate180(),c=wt.detect(i,l)),new Ja(l,c)}static detect(e,n){const i=new Array;let l=0,c=0,u=!1;for(;l<n.getHeight();){const h=wt.findVertices(n,l,c);if(h[0]==null&&h[3]==null){if(!u)break;u=!1,c=0;for(const m of i)m[1]!=null&&(l=Math.trunc(Math.max(l,m[1].getY()))),m[3]!=null&&(l=Math.max(l,Math.trunc(m[3].getY())));l+=wt.ROW_STEP;continue}if(u=!0,i.push(h),!e)break;h[2]!=null?(c=Math.trunc(h[2].getX()),l=Math.trunc(h[2].getY())):(c=Math.trunc(h[4].getX()),l=Math.trunc(h[4].getY()))}return i}static findVertices(e,n,i){const l=e.getHeight(),c=e.getWidth(),u=new Array(8);return wt.copyToResult(u,wt.findRowsWithPattern(e,l,c,n,i,wt.START_PATTERN),wt.INDEXES_START_PATTERN),u[4]!=null&&(i=Math.trunc(u[4].getX()),n=Math.trunc(u[4].getY())),wt.copyToResult(u,wt.findRowsWithPattern(e,l,c,n,i,wt.STOP_PATTERN),wt.INDEXES_STOP_PATTERN),u}static copyToResult(e,n,i){for(let l=0;l<i.length;l++)e[i[l]]=n[l]}static findRowsWithPattern(e,n,i,l,c,u){const h=new Array(4);let m=!1;const C=new Int32Array(u.length);for(;l<n;l+=wt.ROW_STEP){let P=wt.findGuardPattern(e,c,l,i,!1,u,C);if(P!=null){for(;l>0;){const M=wt.findGuardPattern(e,c,--l,i,!1,u,C);if(M!=null)P=M;else{l++;break}}h[0]=new Ie(P[0],l),h[1]=new Ie(P[1],l),m=!0;break}}let N=l+1;if(m){let P=0,M=Int32Array.from([Math.trunc(h[0].getX()),Math.trunc(h[1].getX())]);for(;N<n;N++){const U=wt.findGuardPattern(e,M[0],N,i,!1,u,C);if(U!=null&&Math.abs(M[0]-U[0])<wt.MAX_PATTERN_DRIFT&&Math.abs(M[1]-U[1])<wt.MAX_PATTERN_DRIFT)M=U,P=0;else{if(P>wt.SKIPPED_ROW_COUNT_MAX)break;P++}}N-=P+1,h[2]=new Ie(M[0],N),h[3]=new Ie(M[1],N)}return N-l<wt.BARCODE_MIN_HEIGHT&&W.fill(h,null),h}static findGuardPattern(e,n,i,l,c,u,h){W.fillWithin(h,0,h.length,0);let m=n,C=0;for(;e.get(m,i)&&m>0&&C++<wt.MAX_PIXEL_DRIFT;)m--;let N=m,P=0,M=u.length;for(let U=c;N<l;N++)if(e.get(N,i)!==U)h[P]++;else{if(P===M-1){if(wt.patternMatchVariance(h,u,wt.MAX_INDIVIDUAL_VARIANCE)<wt.MAX_AVG_VARIANCE)return new Int32Array([m,N]);m+=h[0]+h[1],B.arraycopy(h,2,h,0,P-1),h[P-1]=0,h[P]=0,P--}else P++;h[P]=1,U=!U}return P===M-1&&wt.patternMatchVariance(h,u,wt.MAX_INDIVIDUAL_VARIANCE)<wt.MAX_AVG_VARIANCE?new Int32Array([m,N-1]):null}static patternMatchVariance(e,n,i){let l=e.length,c=0,u=0;for(let C=0;C<l;C++)c+=e[C],u+=n[C];if(c<u)return 1/0;let h=c/u;i*=h;let m=0;for(let C=0;C<l;C++){let N=e[C],P=n[C]*h,M=N>P?N-P:P-N;if(M>i)return 1/0;m+=M}return m/c}}wt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),wt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),wt.MAX_AVG_VARIANCE=.42,wt.MAX_INDIVIDUAL_VARIANCE=.8,wt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),wt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),wt.MAX_PIXEL_DRIFT=3,wt.MAX_PATTERN_DRIFT=5,wt.SKIPPED_ROW_COUNT_MAX=25,wt.ROW_STEP=5,wt.BARCODE_MIN_HEIGHT=10;class _n{constructor(e,n){if(n.length===0)throw new I;this.field=e;let i=n.length;if(i>1&&n[0]===0){let l=1;for(;l<i&&n[l]===0;)l++;l===i?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(i-l),B.arraycopy(n,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let l=0;for(let c of this.coefficients)l=this.field.add(l,c);return l}let n=this.coefficients[0],i=this.coefficients.length;for(let l=1;l<i;l++)n=this.field.add(this.field.multiply(e,n),this.coefficients[l]);return n}add(e){if(!this.field.equals(e.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,i=e.coefficients;if(n.length>i.length){let u=n;n=i,i=u}let l=new Int32Array(i.length),c=i.length-n.length;B.arraycopy(i,0,l,0,c);for(let u=c;u<i.length;u++)l[u]=this.field.add(n[u-c],i[u]);return new _n(this.field,l)}subtract(e){if(!this.field.equals(e.field))throw new I("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof _n?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new _n(this.field,new Int32Array([0]));let n=this.coefficients,i=n.length,l=e.coefficients,c=l.length,u=new Int32Array(i+c-1);for(let h=0;h<i;h++){let m=n[h];for(let C=0;C<c;C++)u[h+C]=this.field.add(u[h+C],this.field.multiply(m,l[C]))}return new _n(this.field,u)}negative(){let e=this.coefficients.length,n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=this.field.subtract(0,this.coefficients[i]);return new _n(this.field,n)}multiplyScalar(e){if(e===0)return new _n(this.field,new Int32Array([0]));if(e===1)return this;let n=this.coefficients.length,i=new Int32Array(n);for(let l=0;l<n;l++)i[l]=this.field.multiply(this.coefficients[l],e);return new _n(this.field,i)}multiplyByMonomial(e,n){if(e<0)throw new I;if(n===0)return new _n(this.field,new Int32Array([0]));let i=this.coefficients.length,l=new Int32Array(i+e);for(let c=0;c<i;c++)l[c]=this.field.multiply(this.coefficients[c],n);return new _n(this.field,l)}toString(){let e=new De;for(let n=this.getDegree();n>=0;n--){let i=this.getCoefficient(n);i!==0&&(i<0?(e.append(" - "),i=-i):e.length()>0&&e.append(" + "),(n===0||i!==1)&&e.append(i),n!==0&&(n===1?e.append("x"):(e.append("x^"),e.append(n))))}return e.toString()}}class el{add(e,n){return(e+n)%this.modulus}subtract(e,n){return(this.modulus+e-n)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new I;return this.logTable[e]}inverse(e){if(e===0)throw new me;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class $i extends el{constructor(e,n){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let i=1;for(let l=0;l<e;l++)this.expTable[l]=i,i=i*n%e;for(let l=0;l<e-1;l++)this.logTable[this.expTable[l]]=l;this.zero=new _n(this,new Int32Array([0])),this.one=new _n(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new I;if(n===0)return this.zero;let i=new Int32Array(e+1);return i[0]=n,new _n(this,i)}}$i.PDF417_GF=new $i(dt.NUMBER_OF_CODEWORDS,3);class Yo{constructor(){this.field=$i.PDF417_GF}decode(e,n,i){let l=new _n(this.field,e),c=new Int32Array(n),u=!1;for(let G=n;G>0;G--){let K=l.evaluateAt(this.field.exp(G));c[n-G]=K,K!==0&&(u=!0)}if(!u)return 0;let h=this.field.getOne();if(i!=null)for(const G of i){let K=this.field.exp(e.length-1-G),ee=new _n(this.field,new Int32Array([this.field.subtract(0,K),1]));h=h.multiply(ee)}let m=new _n(this.field,c),C=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),m,n),N=C[0],P=C[1],M=this.findErrorLocations(N),U=this.findErrorMagnitudes(P,N,M);for(let G=0;G<M.length;G++){let K=e.length-1-this.field.log(M[G]);if(K<0)throw D.getChecksumInstance();e[K]=this.field.subtract(e[K],U[G])}return M.length}runEuclideanAlgorithm(e,n,i){if(e.getDegree()<n.getDegree()){let M=e;e=n,n=M}let l=e,c=n,u=this.field.getZero(),h=this.field.getOne();for(;c.getDegree()>=Math.round(i/2);){let M=l,U=u;if(l=c,u=h,l.isZero())throw D.getChecksumInstance();c=M;let G=this.field.getZero(),K=l.getCoefficient(l.getDegree()),ee=this.field.inverse(K);for(;c.getDegree()>=l.getDegree()&&!c.isZero();){let le=c.getDegree()-l.getDegree(),Ne=this.field.multiply(c.getCoefficient(c.getDegree()),ee);G=G.add(this.field.buildMonomial(le,Ne)),c=c.subtract(l.multiplyByMonomial(le,Ne))}h=G.multiply(u).subtract(U).negative()}let m=h.getCoefficient(0);if(m===0)throw D.getChecksumInstance();let C=this.field.inverse(m),N=h.multiply(C),P=c.multiply(C);return[N,P]}findErrorLocations(e){let n=e.getDegree(),i=new Int32Array(n),l=0;for(let c=1;c<this.field.getSize()&&l<n;c++)e.evaluateAt(c)===0&&(i[l]=this.field.inverse(c),l++);if(l!==n)throw D.getChecksumInstance();return i}findErrorMagnitudes(e,n,i){let l=n.getDegree(),c=new Int32Array(l);for(let C=1;C<=l;C++)c[l-C]=this.field.multiply(C,n.getCoefficient(C));let u=new _n(this.field,c),h=i.length,m=new Int32Array(h);for(let C=0;C<h;C++){let N=this.field.inverse(i[C]),P=this.field.subtract(0,e.evaluateAt(N)),M=this.field.inverse(u.evaluateAt(N));m[C]=this.field.multiply(P,M)}return m}}class bi{constructor(e,n,i,l,c){e instanceof bi?this.constructor_2(e):this.constructor_1(e,n,i,l,c)}constructor_1(e,n,i,l,c){const u=n==null||i==null,h=l==null||c==null;if(u&&h)throw new Q;u?(n=new Ie(0,l.getY()),i=new Ie(0,c.getY())):h&&(l=new Ie(e.getWidth()-1,n.getY()),c=new Ie(e.getWidth()-1,i.getY())),this.image=e,this.topLeft=n,this.bottomLeft=i,this.topRight=l,this.bottomRight=c,this.minX=Math.trunc(Math.min(n.getX(),i.getX())),this.maxX=Math.trunc(Math.max(l.getX(),c.getX())),this.minY=Math.trunc(Math.min(n.getY(),l.getY())),this.maxY=Math.trunc(Math.max(i.getY(),c.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,n){return e==null?n:n==null?e:new bi(e.image,e.topLeft,e.bottomLeft,n.topRight,n.bottomRight)}addMissingRows(e,n,i){let l=this.topLeft,c=this.bottomLeft,u=this.topRight,h=this.bottomRight;if(e>0){let m=i?this.topLeft:this.topRight,C=Math.trunc(m.getY()-e);C<0&&(C=0);let N=new Ie(m.getX(),C);i?l=N:u=N}if(n>0){let m=i?this.bottomLeft:this.bottomRight,C=Math.trunc(m.getY()+n);C>=this.image.getHeight()&&(C=this.image.getHeight()-1);let N=new Ie(m.getX(),C);i?c=N:h=N}return new bi(this.image,l,c,u,h)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ss{constructor(e,n,i,l){this.columnCount=e,this.errorCorrectionLevel=l,this.rowCountUpperPart=n,this.rowCountLowerPart=i,this.rowCount=n+i}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Zr{constructor(){this.buffer=""}static form(e,n){let i=-1;function l(u,h,m,C,N,P){if(u==="%%")return"%";if(n[++i]===void 0)return;u=C?parseInt(C.substr(1)):void 0;let M=N?parseInt(N.substr(1)):void 0,U;switch(P){case"s":U=n[i];break;case"c":U=n[i][0];break;case"f":U=parseFloat(n[i]).toFixed(u);break;case"p":U=parseFloat(n[i]).toPrecision(u);break;case"e":U=parseFloat(n[i]).toExponential(u);break;case"x":U=parseInt(n[i]).toString(M||16);break;case"d":U=parseFloat(parseInt(n[i],M||10).toPrecision(u)).toFixed(0);break}U=typeof U=="object"?JSON.stringify(U):(+U).toString(M);let G=parseInt(m),K=m&&m[0]+""=="0"?"0":" ";for(;U.length<G;)U=h!==void 0?U+K:K+U;return U}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(c,l)}format(e,...n){this.buffer+=Zr.form(e,n)}toString(){return this.buffer}}class Br{constructor(e){this.boundingBox=new bi(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let n=this.getCodeword(e);if(n!=null)return n;for(let i=1;i<Br.MAX_NEARBY_DISTANCE;i++){let l=this.imageRowToCodewordIndex(e)-i;if(l>=0&&(n=this.codewords[l],n!=null)||(l=this.imageRowToCodewordIndex(e)+i,l<this.codewords.length&&(n=this.codewords[l],n!=null)))return n}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,n){this.codewords[this.imageRowToCodewordIndex(e)]=n}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new Zr;let n=0;for(const i of this.codewords){if(i==null){e.format("%3d:    |   %n",n++);continue}e.format("%3d: %3d|%3d%n",n++,i.getRowNumber(),i.getValue())}return e.toString()}}Br.MAX_NEARBY_DISTANCE=5;class ci{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let n=this.values.get(e);n==null&&(n=0),n++,this.values.set(e,n)}getValue(){let e=-1,n=new Array;for(const[i,l]of this.values.entries()){const c={getKey:()=>i,getValue:()=>l};c.getValue()>e?(e=c.getValue(),n=[],n.push(c.getKey())):c.getValue()===e&&n.push(c.getKey())}return dt.toIntArray(n)}getConfidence(e){return this.values.get(e)}}class tl extends Br{constructor(e,n){super(e),this._isLeft=n}setRowNumbers(){for(let e of this.getCodewords())e!=null&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,e);let i=this.getBoundingBox(),l=this._isLeft?i.getTopLeft():i.getTopRight(),c=this._isLeft?i.getBottomLeft():i.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(l.getY())),h=this.imageRowToCodewordIndex(Math.trunc(c.getY())),m=-1,C=1,N=0;for(let P=u;P<h;P++){if(n[P]==null)continue;let M=n[P],U=M.getRowNumber()-m;if(U===0)N++;else if(U===1)C=Math.max(C,N),N=1,m=M.getRowNumber();else if(U<0||M.getRowNumber()>=e.getRowCount()||U>P)n[P]=null;else{let G;C>2?G=(C-2)*U:G=U;let K=G>=P;for(let ee=1;ee<=G&&!K;ee++)K=n[P-ee]!=null;K?n[P]=null:(m=M.getRowNumber(),N=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let n=new Int32Array(e.getRowCount());for(let i of this.getCodewords())if(i!=null){let l=i.getRowNumber();if(l>=n.length)continue;n[l]++}return n}adjustIncompleteIndicatorColumnRowNumbers(e){let n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),l=this._isLeft?n.getBottomLeft():n.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=this.imageRowToCodewordIndex(Math.trunc(l.getY())),h=this.getCodewords(),m=-1;for(let C=c;C<u;C++){if(h[C]==null)continue;let N=h[C];N.setRowNumberAsRowIndicatorColumn();let P=N.getRowNumber()-m;P===0||(P===1?m=N.getRowNumber():N.getRowNumber()>=e.getRowCount()?h[C]=null:m=N.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),n=new ci,i=new ci,l=new ci,c=new ci;for(let h of e){if(h==null)continue;h.setRowNumberAsRowIndicatorColumn();let m=h.getValue()%30,C=h.getRowNumber();switch(this._isLeft||(C+=2),C%3){case 0:i.setValue(m*3+1);break;case 1:c.setValue(m/3),l.setValue(m%3);break;case 2:n.setValue(m+1);break}}if(n.getValue().length===0||i.getValue().length===0||l.getValue().length===0||c.getValue().length===0||n.getValue()[0]<1||i.getValue()[0]+l.getValue()[0]<dt.MIN_ROWS_IN_BARCODE||i.getValue()[0]+l.getValue()[0]>dt.MAX_ROWS_IN_BARCODE)return null;let u=new Ss(n.getValue()[0],i.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(e,u),u}removeIncorrectCodewords(e,n){for(let i=0;i<e.length;i++){let l=e[i];if(e[i]==null)continue;let c=l.getValue()%30,u=l.getRowNumber();if(u>n.getRowCount()){e[i]=null;continue}switch(this._isLeft||(u+=2),u%3){case 0:c*3+1!==n.getRowCountUpperPart()&&(e[i]=null);break;case 1:(Math.trunc(c/3)!==n.getErrorCorrectionLevel()||c%3!==n.getRowCountLowerPart())&&(e[i]=null);break;case 2:c+1!==n.getColumnCount()&&(e[i]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ts{constructor(e,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=dt.MAX_CODEWORDS_IN_BARCODE,n;do n=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<n);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let n=1;n<this.barcodeColumnCount+1;n++){let i=this.detectionResultColumns[n].getCodewords();for(let l=0;l<i.length;l++)i[l]!=null&&(i[l].hasValidRowNumber()||this.adjustRowNumbers(n,l,i))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<e.length;i++)if(e[i]!=null&&n[i]!=null&&e[i].getRowNumber()===n[i].getRowNumber())for(let l=1;l<=this.barcodeColumnCount;l++){let c=this.detectionResultColumns[l].getCodewords()[i];c!=null&&(c.setRowNumber(e[i].getRowNumber()),c.hasValidRowNumber()||(this.detectionResultColumns[l].getCodewords()[i]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<n.length;i++){if(n[i]==null)continue;let l=n[i].getRowNumber(),c=0;for(let u=this.barcodeColumnCount+1;u>0&&c<this.ADJUST_ROW_NUMBER_SKIP;u--){let h=this.detectionResultColumns[u].getCodewords()[i];h!=null&&(c=Ts.adjustRowNumberIfValid(l,c,h),h.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,n=this.detectionResultColumns[0].getCodewords();for(let i=0;i<n.length;i++){if(n[i]==null)continue;let l=n[i].getRowNumber(),c=0;for(let u=1;u<this.barcodeColumnCount+1&&c<this.ADJUST_ROW_NUMBER_SKIP;u++){let h=this.detectionResultColumns[u].getCodewords()[i];h!=null&&(c=Ts.adjustRowNumberIfValid(l,c,h),h.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,n,i){return i==null||i.hasValidRowNumber()||(i.isValidRowNumber(e)?(i.setRowNumber(e),n=0):++n),n}adjustRowNumbers(e,n,i){if(!this.detectionResultColumns[e-1])return;let l=i[n],c=this.detectionResultColumns[e-1].getCodewords(),u=c;this.detectionResultColumns[e+1]!=null&&(u=this.detectionResultColumns[e+1].getCodewords());let h=new Array(14);h[2]=c[n],h[3]=u[n],n>0&&(h[0]=i[n-1],h[4]=c[n-1],h[5]=u[n-1]),n>1&&(h[8]=i[n-2],h[10]=c[n-2],h[11]=u[n-2]),n<i.length-1&&(h[1]=i[n+1],h[6]=c[n+1],h[7]=u[n+1]),n<i.length-2&&(h[9]=i[n+2],h[12]=c[n+2],h[13]=u[n+2]);for(let m of h)if(Ts.adjustRowNumber(l,m))return}static adjustRowNumber(e,n){return n==null?!1:n.hasValidRowNumber()&&n.getBucket()===e.getBucket()?(e.setRowNumber(n.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,n){this.detectionResultColumns[e]=n}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let n=new Zr;for(let i=0;i<e.getCodewords().length;i++){n.format("CW %3d:",i);for(let l=0;l<this.barcodeColumnCount+2;l++){if(this.detectionResultColumns[l]==null){n.format("    |   ");continue}let c=this.detectionResultColumns[l].getCodewords()[i];if(c==null){n.format("    |   ");continue}n.format(" %3d|%3d",c.getRowNumber(),c.getValue())}n.format("%n")}return n.toString()}}class Ai{constructor(e,n,i,l){this.rowNumber=Ai.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(n),this.bucket=Math.trunc(i),this.value=Math.trunc(l)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==Ai.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}Ai.BARCODE_ROW_UNKNOWN=-1;class Rn{static initialize(){for(let e=0;e<dt.SYMBOL_TABLE.length;e++){let n=dt.SYMBOL_TABLE[e],i=n&1;for(let l=0;l<dt.BARS_IN_MODULE;l++){let c=0;for(;(n&1)===i;)c+=1,n>>=1;i=n&1,Rn.RATIOS_TABLE[e]||(Rn.RATIOS_TABLE[e]=new Array(dt.BARS_IN_MODULE)),Rn.RATIOS_TABLE[e][dt.BARS_IN_MODULE-l-1]=Math.fround(c/dt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let n=Rn.getDecodedCodewordValue(Rn.sampleBitCounts(e));return n!==-1?n:Rn.getClosestDecodedValue(e)}static sampleBitCounts(e){let n=Je.sum(e),i=new Int32Array(dt.BARS_IN_MODULE),l=0,c=0;for(let u=0;u<dt.MODULES_IN_CODEWORD;u++){let h=n/(2*dt.MODULES_IN_CODEWORD)+u*n/dt.MODULES_IN_CODEWORD;c+e[l]<=h&&(c+=e[l],l++),i[l]++}return i}static getDecodedCodewordValue(e){let n=Rn.getBitValue(e);return dt.getCodeword(n)===-1?-1:n}static getBitValue(e){let n=0;for(let i=0;i<e.length;i++)for(let l=0;l<e[i];l++)n=n<<1|(i%2===0?1:0);return Math.trunc(n)}static getClosestDecodedValue(e){let n=Je.sum(e),i=new Array(dt.BARS_IN_MODULE);if(n>1)for(let u=0;u<i.length;u++)i[u]=Math.fround(e[u]/n);let l=Nt.MAX_VALUE,c=-1;this.bSymbolTableReady||Rn.initialize();for(let u=0;u<Rn.RATIOS_TABLE.length;u++){let h=0,m=Rn.RATIOS_TABLE[u];for(let C=0;C<dt.BARS_IN_MODULE;C++){let N=Math.fround(m[C]-i[C]);if(h+=Math.fround(N*N),h>=l)break}h<l&&(l=h,c=dt.SYMBOL_TABLE[u])}return c}}Rn.bSymbolTableReady=!1,Rn.RATIOS_TABLE=new Array(dt.SYMBOL_TABLE.length).map(k=>new Array(dt.BARS_IN_MODULE));class ro{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class Ko{static parseLong(e,n=void 0){return parseInt(e,n)}}class qr extends b{}qr.kind="NullPointerException";class $o{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,n,i){if(e==null)throw new qr;if(n<0||n>e.length||i<0||n+i>e.length||n+i<0)throw new j;if(i===0)return;for(let l=0;l<i;l++)this.write(e[n+l])}flush(){}close(){}}class io extends b{}class nl extends $o{constructor(e=32){if(super(),this.count=0,e<0)throw new I("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let i=this.buf.length<<1;if(i-e<0&&(i=e),i<0){if(e<0)throw new io;i=z.MAX_VALUE}this.buf=W.copyOfUint8Array(this.buf,i)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,n,i){if(n<0||n>e.length||i<0||n+i-e.length>0)throw new j;this.ensureCapacity(this.count+i),B.arraycopy(e,n,this.buf,this.count,i),this.count+=i}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return W.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var jt;(function(k){k[k.ALPHA=0]="ALPHA",k[k.LOWER=1]="LOWER",k[k.MIXED=2]="MIXED",k[k.PUNCT=3]="PUNCT",k[k.ALPHA_SHIFT=4]="ALPHA_SHIFT",k[k.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(jt||(jt={}));function Is(){if(typeof window<"u")return window.BigInt||null;if(typeof Jl<"u")return Jl.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ns;function pn(k){if(typeof Ns>"u"&&(Ns=Is()),Ns===null)throw new Error("BigInt is not supported!");return Ns(k)}function Zi(){let k=[];k[0]=pn(1);let e=pn(900);k[1]=e;for(let n=2;n<16;n++)k[n]=k[n-1]*e;return k}class ce{static decode(e,n){let i=new De(""),l=$.ISO8859_1;i.enableDecoding(l);let c=1,u=e[c++],h=new ro;for(;c<e[0];){switch(u){case ce.TEXT_COMPACTION_MODE_LATCH:c=ce.textCompaction(e,c,i);break;case ce.BYTE_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH_6:c=ce.byteCompaction(u,e,l,c,i);break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[c++]);break;case ce.NUMERIC_COMPACTION_MODE_LATCH:c=ce.numericCompaction(e,c,i);break;case ce.ECI_CHARSET:$.getCharacterSetECIByValue(e[c++]);break;case ce.ECI_GENERAL_PURPOSE:c+=2;break;case ce.ECI_USER_DEFINED:c++;break;case ce.BEGIN_MACRO_PDF417_CONTROL_BLOCK:c=ce.decodeMacroBlock(e,c,h);break;case ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ce.MACRO_PDF417_TERMINATOR:throw new q;default:c--,c=ce.textCompaction(e,c,i);break}if(c<e.length)u=e[c++];else throw q.getFormatInstance()}if(i.length()===0)throw q.getFormatInstance();let m=new nt(null,i.toString(),null,n);return m.setOther(h),m}static decodeMacroBlock(e,n,i){if(n+ce.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw q.getFormatInstance();let l=new Int32Array(ce.NUMBER_OF_SEQUENCE_CODEWORDS);for(let h=0;h<ce.NUMBER_OF_SEQUENCE_CODEWORDS;h++,n++)l[h]=e[n];i.setSegmentIndex(z.parseInt(ce.decodeBase900toBase10(l,ce.NUMBER_OF_SEQUENCE_CODEWORDS)));let c=new De;n=ce.textCompaction(e,n,c),i.setFileId(c.toString());let u=-1;for(e[n]===ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(u=n+1);n<e[0];)switch(e[n]){case ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(n++,e[n]){case ce.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let h=new De;n=ce.textCompaction(e,n+1,h),i.setFileName(h.toString());break;case ce.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let m=new De;n=ce.textCompaction(e,n+1,m),i.setSender(m.toString());break;case ce.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let C=new De;n=ce.textCompaction(e,n+1,C),i.setAddressee(C.toString());break;case ce.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let N=new De;n=ce.numericCompaction(e,n+1,N),i.setSegmentCount(z.parseInt(N.toString()));break;case ce.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let P=new De;n=ce.numericCompaction(e,n+1,P),i.setTimestamp(Ko.parseLong(P.toString()));break;case ce.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let M=new De;n=ce.numericCompaction(e,n+1,M),i.setChecksum(z.parseInt(M.toString()));break;case ce.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let U=new De;n=ce.numericCompaction(e,n+1,U),i.setFileSize(Ko.parseLong(U.toString()));break;default:throw q.getFormatInstance()}break;case ce.MACRO_PDF417_TERMINATOR:n++,i.setLastSegment(!0);break;default:throw q.getFormatInstance()}if(u!==-1){let h=n-u;i.isLastSegment()&&h--,i.setOptionalData(W.copyOfRange(e,u,u+h))}return n}static textCompaction(e,n,i){let l=new Int32Array((e[0]-n)*2),c=new Int32Array((e[0]-n)*2),u=0,h=!1;for(;n<e[0]&&!h;){let m=e[n++];if(m<ce.TEXT_COMPACTION_MODE_LATCH)l[u]=m/30,l[u+1]=m%30,u+=2;else switch(m){case ce.TEXT_COMPACTION_MODE_LATCH:l[u++]=ce.TEXT_COMPACTION_MODE_LATCH;break;case ce.BYTE_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH_6:case ce.NUMERIC_COMPACTION_MODE_LATCH:case ce.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ce.MACRO_PDF417_TERMINATOR:n--,h=!0;break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l[u]=ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,m=e[n++],c[u]=m,u++;break}}return ce.decodeTextCompaction(l,c,u,i),n}static decodeTextCompaction(e,n,i,l){let c=jt.ALPHA,u=jt.ALPHA,h=0;for(;h<i;){let m=e[h],C="";switch(c){case jt.ALPHA:if(m<26)C=String.fromCharCode(65+m);else switch(m){case 26:C=" ";break;case ce.LL:c=jt.LOWER;break;case ce.ML:c=jt.MIXED;break;case ce.PS:u=c,c=jt.PUNCT_SHIFT;break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case ce.TEXT_COMPACTION_MODE_LATCH:c=jt.ALPHA;break}break;case jt.LOWER:if(m<26)C=String.fromCharCode(97+m);else switch(m){case 26:C=" ";break;case ce.AS:u=c,c=jt.ALPHA_SHIFT;break;case ce.ML:c=jt.MIXED;break;case ce.PS:u=c,c=jt.PUNCT_SHIFT;break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case ce.TEXT_COMPACTION_MODE_LATCH:c=jt.ALPHA;break}break;case jt.MIXED:if(m<ce.PL)C=ce.MIXED_CHARS[m];else switch(m){case ce.PL:c=jt.PUNCT;break;case 26:C=" ";break;case ce.LL:c=jt.LOWER;break;case ce.AL:c=jt.ALPHA;break;case ce.PS:u=c,c=jt.PUNCT_SHIFT;break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case ce.TEXT_COMPACTION_MODE_LATCH:c=jt.ALPHA;break}break;case jt.PUNCT:if(m<ce.PAL)C=ce.PUNCT_CHARS[m];else switch(m){case ce.PAL:c=jt.ALPHA;break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case ce.TEXT_COMPACTION_MODE_LATCH:c=jt.ALPHA;break}break;case jt.ALPHA_SHIFT:if(c=u,m<26)C=String.fromCharCode(65+m);else switch(m){case 26:C=" ";break;case ce.TEXT_COMPACTION_MODE_LATCH:c=jt.ALPHA;break}break;case jt.PUNCT_SHIFT:if(c=u,m<ce.PAL)C=ce.PUNCT_CHARS[m];else switch(m){case ce.PAL:c=jt.ALPHA;break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case ce.TEXT_COMPACTION_MODE_LATCH:c=jt.ALPHA;break}break}C!==""&&l.append(C),h++}}static byteCompaction(e,n,i,l,c){let u=new nl,h=0,m=0,C=!1;switch(e){case ce.BYTE_COMPACTION_MODE_LATCH:let N=new Int32Array(6),P=n[l++];for(;l<n[0]&&!C;)switch(N[h++]=P,m=900*m+P,P=n[l++],P){case ce.TEXT_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH:case ce.NUMERIC_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH_6:case ce.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ce.MACRO_PDF417_TERMINATOR:l--,C=!0;break;default:if(h%5===0&&h>0){for(let M=0;M<6;++M)u.write(Number(pn(m)>>pn(8*(5-M))));m=0,h=0}break}l===n[0]&&P<ce.TEXT_COMPACTION_MODE_LATCH&&(N[h++]=P);for(let M=0;M<h;M++)u.write(N[M]);break;case ce.BYTE_COMPACTION_MODE_LATCH_6:for(;l<n[0]&&!C;){let M=n[l++];if(M<ce.TEXT_COMPACTION_MODE_LATCH)h++,m=900*m+M;else switch(M){case ce.TEXT_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH:case ce.NUMERIC_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH_6:case ce.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ce.MACRO_PDF417_TERMINATOR:l--,C=!0;break}if(h%5===0&&h>0){for(let U=0;U<6;++U)u.write(Number(pn(m)>>pn(8*(5-U))));m=0,h=0}}break}return c.append(Oe.decode(u.toByteArray(),i)),l}static numericCompaction(e,n,i){let l=0,c=!1,u=new Int32Array(ce.MAX_NUMERIC_CODEWORDS);for(;n<e[0]&&!c;){let h=e[n++];if(n===e[0]&&(c=!0),h<ce.TEXT_COMPACTION_MODE_LATCH)u[l]=h,l++;else switch(h){case ce.TEXT_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH_6:case ce.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ce.MACRO_PDF417_TERMINATOR:n--,c=!0;break}(l%ce.MAX_NUMERIC_CODEWORDS===0||h===ce.NUMERIC_COMPACTION_MODE_LATCH||c)&&l>0&&(i.append(ce.decodeBase900toBase10(u,l)),l=0)}return n}static decodeBase900toBase10(e,n){let i=pn(0);for(let c=0;c<n;c++)i+=ce.EXP900[n-c-1]*pn(e[c]);let l=i.toString();if(l.charAt(0)!=="1")throw new q;return l.substring(1)}}ce.TEXT_COMPACTION_MODE_LATCH=900,ce.BYTE_COMPACTION_MODE_LATCH=901,ce.NUMERIC_COMPACTION_MODE_LATCH=902,ce.BYTE_COMPACTION_MODE_LATCH_6=924,ce.ECI_USER_DEFINED=925,ce.ECI_GENERAL_PURPOSE=926,ce.ECI_CHARSET=927,ce.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ce.MACRO_PDF417_TERMINATOR=922,ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ce.MAX_NUMERIC_CODEWORDS=15,ce.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ce.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ce.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ce.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ce.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ce.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ce.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ce.PL=25,ce.LL=27,ce.AS=27,ce.ML=28,ce.AL=28,ce.PS=29,ce.PAL=29,ce.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ce.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ce.EXP900=Is()?Zi():[],ce.NUMBER_OF_SEQUENCE_CODEWORDS=2;class bt{constructor(){}static decode(e,n,i,l,c,u,h){let m=new bi(e,n,i,l,c),C=null,N=null,P;for(let G=!0;;G=!1){if(n!=null&&(C=bt.getRowIndicatorColumn(e,m,n,!0,u,h)),l!=null&&(N=bt.getRowIndicatorColumn(e,m,l,!1,u,h)),P=bt.merge(C,N),P==null)throw Q.getNotFoundInstance();let K=P.getBoundingBox();if(G&&K!=null&&(K.getMinY()<m.getMinY()||K.getMaxY()>m.getMaxY()))m=K;else break}P.setBoundingBox(m);let M=P.getBarcodeColumnCount()+1;P.setDetectionResultColumn(0,C),P.setDetectionResultColumn(M,N);let U=C!=null;for(let G=1;G<=M;G++){let K=U?G:M-G;if(P.getDetectionResultColumn(K)!==void 0)continue;let ee;K===0||K===M?ee=new tl(m,K===0):ee=new Br(m),P.setDetectionResultColumn(K,ee);let le=-1,Ne=le;for(let _e=m.getMinY();_e<=m.getMaxY();_e++){if(le=bt.getStartColumn(P,K,_e,U),le<0||le>m.getMaxX()){if(Ne===-1)continue;le=Ne}let Ce=bt.detectCodeword(e,m.getMinX(),m.getMaxX(),U,le,_e,u,h);Ce!=null&&(ee.setCodeword(_e,Ce),Ne=le,u=Math.min(u,Ce.getWidth()),h=Math.max(h,Ce.getWidth()))}}return bt.createDecoderResult(P)}static merge(e,n){if(e==null&&n==null)return null;let i=bt.getBarcodeMetadata(e,n);if(i==null)return null;let l=bi.merge(bt.adjustBoundingBox(e),bt.adjustBoundingBox(n));return new Ts(i,l)}static adjustBoundingBox(e){if(e==null)return null;let n=e.getRowHeights();if(n==null)return null;let i=bt.getMax(n),l=0;for(let h of n)if(l+=i-h,h>0)break;let c=e.getCodewords();for(let h=0;l>0&&c[h]==null;h++)l--;let u=0;for(let h=n.length-1;h>=0&&(u+=i-n[h],!(n[h]>0));h--);for(let h=c.length-1;u>0&&c[h]==null;h--)u--;return e.getBoundingBox().addMissingRows(l,u,e.isLeft())}static getMax(e){let n=-1;for(let i of e)n=Math.max(n,i);return n}static getBarcodeMetadata(e,n){let i;if(e==null||(i=e.getBarcodeMetadata())==null)return n==null?null:n.getBarcodeMetadata();let l;return n==null||(l=n.getBarcodeMetadata())==null?i:i.getColumnCount()!==l.getColumnCount()&&i.getErrorCorrectionLevel()!==l.getErrorCorrectionLevel()&&i.getRowCount()!==l.getRowCount()?null:i}static getRowIndicatorColumn(e,n,i,l,c,u){let h=new tl(n,l);for(let m=0;m<2;m++){let C=m===0?1:-1,N=Math.trunc(Math.trunc(i.getX()));for(let P=Math.trunc(Math.trunc(i.getY()));P<=n.getMaxY()&&P>=n.getMinY();P+=C){let M=bt.detectCodeword(e,0,e.getWidth(),l,N,P,c,u);M!=null&&(h.setCodeword(P,M),l?N=M.getStartX():N=M.getEndX())}}return h}static adjustCodewordCount(e,n){let i=n[0][1],l=i.getValue(),c=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-bt.getNumberOfECCodeWords(e.getBarcodeECLevel());if(l.length===0){if(c<1||c>dt.MAX_CODEWORDS_IN_BARCODE)throw Q.getNotFoundInstance();i.setValue(c)}else l[0]!==c&&i.setValue(c)}static createDecoderResult(e){let n=bt.createBarcodeMatrix(e);bt.adjustCodewordCount(e,n);let i=new Array,l=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),c=[],u=new Array;for(let m=0;m<e.getBarcodeRowCount();m++)for(let C=0;C<e.getBarcodeColumnCount();C++){let N=n[m][C+1].getValue(),P=m*e.getBarcodeColumnCount()+C;N.length===0?i.push(P):N.length===1?l[P]=N[0]:(u.push(P),c.push(N))}let h=new Array(c.length);for(let m=0;m<h.length;m++)h[m]=c[m];return bt.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),l,dt.toIntArray(i),dt.toIntArray(u),h)}static createDecoderResultFromAmbiguousValues(e,n,i,l,c){let u=new Int32Array(l.length),h=100;for(;h-- >0;){for(let m=0;m<u.length;m++)n[l[m]]=c[m][u[m]];try{return bt.decodeCodewords(n,e,i)}catch(m){if(!(m instanceof D))throw m}if(u.length===0)throw D.getChecksumInstance();for(let m=0;m<u.length;m++)if(u[m]<c[m].length-1){u[m]++;break}else if(u[m]=0,m===u.length-1)throw D.getChecksumInstance()}throw D.getChecksumInstance()}static createBarcodeMatrix(e){let n=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let l=0;l<n.length;l++)for(let c=0;c<n[l].length;c++)n[l][c]=new ci;let i=0;for(let l of e.getDetectionResultColumns()){if(l!=null){for(let c of l.getCodewords())if(c!=null){let u=c.getRowNumber();if(u>=0){if(u>=n.length)continue;n[u][i].setValue(c.getValue())}}}i++}return n}static isValidBarcodeColumn(e,n){return n>=0&&n<=e.getBarcodeColumnCount()+1}static getStartColumn(e,n,i,l){let c=l?1:-1,u=null;if(bt.isValidBarcodeColumn(e,n-c)&&(u=e.getDetectionResultColumn(n-c).getCodeword(i)),u!=null)return l?u.getEndX():u.getStartX();if(u=e.getDetectionResultColumn(n).getCodewordNearby(i),u!=null)return l?u.getStartX():u.getEndX();if(bt.isValidBarcodeColumn(e,n-c)&&(u=e.getDetectionResultColumn(n-c).getCodewordNearby(i)),u!=null)return l?u.getEndX():u.getStartX();let h=0;for(;bt.isValidBarcodeColumn(e,n-c);){n-=c;for(let m of e.getDetectionResultColumn(n).getCodewords())if(m!=null)return(l?m.getEndX():m.getStartX())+c*h*(m.getEndX()-m.getStartX());h++}return l?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,n,i,l,c,u,h,m){c=bt.adjustCodewordStartColumn(e,n,i,l,c,u);let C=bt.getModuleBitCount(e,n,i,l,c,u);if(C==null)return null;let N,P=Je.sum(C);if(l)N=c+P;else{for(let G=0;G<C.length/2;G++){let K=C[G];C[G]=C[C.length-1-G],C[C.length-1-G]=K}N=c,c=N-P}if(!bt.checkCodewordSkew(P,h,m))return null;let M=Rn.getDecodedValue(C),U=dt.getCodeword(M);return U===-1?null:new Ai(c,N,bt.getCodewordBucketNumber(M),U)}static getModuleBitCount(e,n,i,l,c,u){let h=c,m=new Int32Array(8),C=0,N=l?1:-1,P=l;for(;(l?h<i:h>=n)&&C<m.length;)e.get(h,u)===P?(m[C]++,h+=N):(C++,P=!P);return C===m.length||h===(l?i:n)&&C===m.length-1?m:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,n,i,l,c,u){let h=c,m=l?-1:1;for(let C=0;C<2;C++){for(;(l?h>=n:h<i)&&l===e.get(h,u);){if(Math.abs(c-h)>bt.CODEWORD_SKEW_SIZE)return c;h+=m}m=-m,l=!l}return h}static checkCodewordSkew(e,n,i){return n-bt.CODEWORD_SKEW_SIZE<=e&&e<=i+bt.CODEWORD_SKEW_SIZE}static decodeCodewords(e,n,i){if(e.length===0)throw q.getFormatInstance();let l=1<<n+1,c=bt.correctErrors(e,i,l);bt.verifyCodewordCount(e,l);let u=ce.decode(e,""+n);return u.setErrorsCorrected(c),u.setErasures(i.length),u}static correctErrors(e,n,i){if(n!=null&&n.length>i/2+bt.MAX_ERRORS||i<0||i>bt.MAX_EC_CODEWORDS)throw D.getChecksumInstance();return bt.errorCorrection.decode(e,i,n)}static verifyCodewordCount(e,n){if(e.length<4)throw q.getFormatInstance();let i=e[0];if(i>e.length)throw q.getFormatInstance();if(i===0)if(n<e.length)e[0]=e.length-n;else throw q.getFormatInstance()}static getBitCountForCodeword(e){let n=new Int32Array(8),i=0,l=n.length-1;for(;!((e&1)!==i&&(i=e&1,l--,l<0));)n[l]++,e>>=1;return n}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return bt.getCodewordBucketNumber(bt.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let n=new Zr;for(let i=0;i<e.length;i++){n.format("Row %2d: ",i);for(let l=0;l<e[i].length;l++){let c=e[i][l];c.getValue().length===0?n.format("        ",null):n.format("%4d(%2d)",c.getValue()[0],c.getConfidence(c.getValue()[0]))}n.format("%n")}return n.toString()}}bt.CODEWORD_SKEW_SIZE=2,bt.MAX_ERRORS=3,bt.MAX_EC_CODEWORDS=512,bt.errorCorrection=new Yo;class kn{decode(e,n=null){let i=kn.decode(e,n,!1);if(i==null||i.length===0||i[0]==null)throw Q.getNotFoundInstance();return i[0]}decodeMultiple(e,n=null){try{return kn.decode(e,n,!0)}catch(i){throw i instanceof q||i instanceof D?Q.getNotFoundInstance():i}}static decode(e,n,i){const l=new Array,c=wt.detectMultiple(e,n,i);for(const u of c.getPoints()){const h=bt.decode(c.getBits(),u[4],u[5],u[6],u[7],kn.getMinCodewordWidth(u),kn.getMaxCodewordWidth(u)),m=new ze(h.getText(),h.getRawBytes(),void 0,u,fe.PDF_417);m.putMetadata(He.ERROR_CORRECTION_LEVEL,h.getECLevel());const C=h.getOther();C!=null&&m.putMetadata(He.PDF417_EXTRA_METADATA,C),l.push(m)}return l.map(u=>u)}static getMaxWidth(e,n){return e==null||n==null?0:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMinWidth(e,n){return e==null||n==null?z.MAX_VALUE:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(kn.getMaxWidth(e[0],e[4]),kn.getMaxWidth(e[6],e[2])*dt.MODULES_IN_CODEWORD/dt.MODULES_IN_STOP_PATTERN),Math.max(kn.getMaxWidth(e[1],e[5]),kn.getMaxWidth(e[7],e[3])*dt.MODULES_IN_CODEWORD/dt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(kn.getMinWidth(e[0],e[4]),kn.getMinWidth(e[6],e[2])*dt.MODULES_IN_CODEWORD/dt.MODULES_IN_STOP_PATTERN),Math.min(kn.getMinWidth(e[1],e[5]),kn.getMinWidth(e[7],e[3])*dt.MODULES_IN_CODEWORD/dt.MODULES_IN_STOP_PATTERN)))}reset(){}}class qi extends b{}qi.kind="ReaderException";class so{constructor(e,n){this.verbose=e===!0,n&&this.setHints(n)}decode(e,n){return n&&this.setHints(n),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const n=!f(e)&&e.get(oe.TRY_HARDER)===!0,i=f(e)?null:e.get(oe.POSSIBLE_FORMATS),l=new Array;if(!f(i)){const c=i.some(u=>u===fe.UPC_A||u===fe.UPC_E||u===fe.EAN_13||u===fe.EAN_8||u===fe.CODABAR||u===fe.CODE_39||u===fe.CODE_93||u===fe.CODE_128||u===fe.ITF||u===fe.RSS_14||u===fe.RSS_EXPANDED);c&&!n&&l.push(new Ei(e,this.verbose)),i.includes(fe.QR_CODE)&&l.push(new Hn),i.includes(fe.DATA_MATRIX)&&l.push(new Tr),i.includes(fe.AZTEC)&&l.push(new Ht),i.includes(fe.PDF_417)&&l.push(new kn),c&&n&&l.push(new Ei(e,this.verbose))}l.length===0&&(n||l.push(new Ei(e,this.verbose)),l.push(new Hn),l.push(new Tr),l.push(new Ht),l.push(new kn),n&&l.push(new Ei(e,this.verbose))),this.readers=l}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new qi("No readers where selected, nothing can be read.");for(const n of this.readers)try{return n.decode(e,this.hints)}catch(i){if(i instanceof qi)continue}throw new Q("No MultiFormat Readers were able to detect the code.")}}class _s extends be{constructor(e=null,n=500){const i=new so;i.setHints(e),super(i,n)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class oo extends be{constructor(e=500){super(new kn,e)}}class rl extends be{constructor(e=500){super(new Hn,e)}}var Zo;(function(k){k[k.ERROR_CORRECTION=0]="ERROR_CORRECTION",k[k.CHARACTER_SET=1]="CHARACTER_SET",k[k.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",k[k.MIN_SIZE=3]="MIN_SIZE",k[k.MAX_SIZE=4]="MAX_SIZE",k[k.MARGIN=5]="MARGIN",k[k.PDF417_COMPACT=6]="PDF417_COMPACT",k[k.PDF417_COMPACTION=7]="PDF417_COMPACTION",k[k.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",k[k.AZTEC_LAYERS=9]="AZTEC_LAYERS",k[k.QR_VERSION=10]="QR_VERSION"})(Zo||(Zo={}));var vn=Zo;class qo{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new ft(e,Int32Array.from([1])))}buildGenerator(e){const n=this.cachedGenerators;if(e>=n.length){let i=n[n.length-1];const l=this.field;for(let c=n.length;c<=e;c++){const u=i.multiply(new ft(l,Int32Array.from([1,l.exp(c-1+l.getGeneratorBase())])));n.push(u),i=u}}return n[e]}encode(e,n){if(n===0)throw new I("No error correction bytes");const i=e.length-n;if(i<=0)throw new I("No data bytes provided");const l=this.buildGenerator(n),c=new Int32Array(i);B.arraycopy(e,0,c,0,i);let u=new ft(this.field,c);u=u.multiplyByMonomial(n,1);const m=u.divide(l)[1].getCoefficients(),C=n-m.length;for(let N=0;N<C;N++)e[i+N]=0;B.arraycopy(m,0,e,i+C,m.length)}}class qt{constructor(){}static applyMaskPenaltyRule1(e){return qt.applyMaskPenaltyRule1Internal(e,!0)+qt.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let n=0;const i=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let u=0;u<c-1;u++){const h=i[u];for(let m=0;m<l-1;m++){const C=h[m];C===h[m+1]&&C===i[u+1][m]&&C===i[u+1][m+1]&&n++}}return qt.N2*n}static applyMaskPenaltyRule3(e){let n=0;const i=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let u=0;u<c;u++)for(let h=0;h<l;h++){const m=i[u];h+6<l&&m[h]===1&&m[h+1]===0&&m[h+2]===1&&m[h+3]===1&&m[h+4]===1&&m[h+5]===0&&m[h+6]===1&&(qt.isWhiteHorizontal(m,h-4,h)||qt.isWhiteHorizontal(m,h+7,h+11))&&n++,u+6<c&&i[u][h]===1&&i[u+1][h]===0&&i[u+2][h]===1&&i[u+3][h]===1&&i[u+4][h]===1&&i[u+5][h]===0&&i[u+6][h]===1&&(qt.isWhiteVertical(i,h,u-4,u)||qt.isWhiteVertical(i,h,u+7,u+11))&&n++}return n*qt.N3}static isWhiteHorizontal(e,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(let l=n;l<i;l++)if(e[l]===1)return!1;return!0}static isWhiteVertical(e,n,i,l){i=Math.max(i,0),l=Math.min(l,e.length);for(let c=i;c<l;c++)if(e[c][n]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let n=0;const i=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let m=0;m<c;m++){const C=i[m];for(let N=0;N<l;N++)C[N]===1&&n++}const u=e.getHeight()*e.getWidth();return Math.floor(Math.abs(n*2-u)*10/u)*qt.N4}static getDataMaskBit(e,n,i){let l,c;switch(e){case 0:l=i+n&1;break;case 1:l=i&1;break;case 2:l=n%3;break;case 3:l=(i+n)%3;break;case 4:l=Math.floor(i/2)+Math.floor(n/3)&1;break;case 5:c=i*n,l=(c&1)+c%3;break;case 6:c=i*n,l=(c&1)+c%3&1;break;case 7:c=i*n,l=c%3+(i+n&1)&1;break;default:throw new I("Invalid mask pattern: "+e)}return l===0}static applyMaskPenaltyRule1Internal(e,n){let i=0;const l=n?e.getHeight():e.getWidth(),c=n?e.getWidth():e.getHeight(),u=e.getArray();for(let h=0;h<l;h++){let m=0,C=-1;for(let N=0;N<c;N++){const P=n?u[h][N]:u[N][h];P===C?m++:(m>=5&&(i+=qt.N1+(m-5)),m=1,C=P)}m>=5&&(i+=qt.N1+(m-5))}return i}}qt.N1=3,qt.N2=3,qt.N3=40,qt.N4=10;class ao{constructor(e,n){this.width=e,this.height=n;const i=new Array(n);for(let l=0;l!==n;l++)i[l]=new Uint8Array(e);this.bytes=i}getHeight(){return this.height}getWidth(){return this.width}get(e,n){return this.bytes[n][e]}getArray(){return this.bytes}setNumber(e,n,i){this.bytes[n][e]=i}setBoolean(e,n,i){this.bytes[n][e]=i?1:0}clear(e){for(const n of this.bytes)W.fill(n,e)}equals(e){if(!(e instanceof ao))return!1;const n=e;if(this.width!==n.width||this.height!==n.height)return!1;for(let i=0,l=this.height;i<l;++i){const c=this.bytes[i],u=n.bytes[i];for(let h=0,m=this.width;h<m;++h)if(c[h]!==u[h])return!1}return!0}toString(){const e=new De;for(let n=0,i=this.height;n<i;++n){const l=this.bytes[n];for(let c=0,u=this.width;c<u;++c)switch(l[c]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class Si{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new De;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Si.NUM_MASK_PATTERNS}}Si.NUM_MASK_PATTERNS=8;class Yt extends b{}Yt.kind="WriterException";class ot{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,n,i,l,c){ot.clearMatrix(c),ot.embedBasicPatterns(i,c),ot.embedTypeInfo(n,l,c),ot.maybeEmbedVersionInfo(i,c),ot.embedDataBits(e,l,c)}static embedBasicPatterns(e,n){ot.embedPositionDetectionPatternsAndSeparators(n),ot.embedDarkDotAtLeftBottomCorner(n),ot.maybeEmbedPositionAdjustmentPatterns(e,n),ot.embedTimingPatterns(n)}static embedTypeInfo(e,n,i){const l=new J;ot.makeTypeInfoBits(e,n,l);for(let c=0,u=l.getSize();c<u;++c){const h=l.get(l.getSize()-1-c),m=ot.TYPE_INFO_COORDINATES[c],C=m[0],N=m[1];if(i.setBoolean(C,N,h),c<8){const P=i.getWidth()-c-1;i.setBoolean(P,8,h)}else{const M=i.getHeight()-7+(c-8);i.setBoolean(8,M,h)}}}static maybeEmbedVersionInfo(e,n){if(e.getVersionNumber()<7)return;const i=new J;ot.makeVersionInfoBits(e,i);let l=6*3-1;for(let c=0;c<6;++c)for(let u=0;u<3;++u){const h=i.get(l);l--,n.setBoolean(c,n.getHeight()-11+u,h),n.setBoolean(n.getHeight()-11+u,c,h)}}static embedDataBits(e,n,i){let l=0,c=-1,u=i.getWidth()-1,h=i.getHeight()-1;for(;u>0;){for(u===6&&(u-=1);h>=0&&h<i.getHeight();){for(let m=0;m<2;++m){const C=u-m;if(!ot.isEmpty(i.get(C,h)))continue;let N;l<e.getSize()?(N=e.get(l),++l):N=!1,n!==255&&qt.getDataMaskBit(n,C,h)&&(N=!N),i.setBoolean(C,h,N)}h+=c}c=-c,h+=c,u-=2}if(l!==e.getSize())throw new Yt("Not all bits consumed: "+l+"/"+e.getSize())}static findMSBSet(e){return 32-z.numberOfLeadingZeros(e)}static calculateBCHCode(e,n){if(n===0)throw new I("0 polynomial");const i=ot.findMSBSet(n);for(e<<=i-1;ot.findMSBSet(e)>=i;)e^=n<<ot.findMSBSet(e)-i;return e}static makeTypeInfoBits(e,n,i){if(!Si.isValidMaskPattern(n))throw new Yt("Invalid mask pattern");const l=e.getBits()<<3|n;i.appendBits(l,5);const c=ot.calculateBCHCode(l,ot.TYPE_INFO_POLY);i.appendBits(c,10);const u=new J;if(u.appendBits(ot.TYPE_INFO_MASK_PATTERN,15),i.xor(u),i.getSize()!==15)throw new Yt("should not happen but we got: "+i.getSize())}static makeVersionInfoBits(e,n){n.appendBits(e.getVersionNumber(),6);const i=ot.calculateBCHCode(e.getVersionNumber(),ot.VERSION_INFO_POLY);if(n.appendBits(i,12),n.getSize()!==18)throw new Yt("should not happen but we got: "+n.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let n=8;n<e.getWidth()-8;++n){const i=(n+1)%2;ot.isEmpty(e.get(n,6))&&e.setNumber(n,6,i),ot.isEmpty(e.get(6,n))&&e.setNumber(6,n,i)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new Yt;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,n,i){for(let l=0;l<8;++l){if(!ot.isEmpty(i.get(e+l,n)))throw new Yt;i.setNumber(e+l,n,0)}}static embedVerticalSeparationPattern(e,n,i){for(let l=0;l<7;++l){if(!ot.isEmpty(i.get(e,n+l)))throw new Yt;i.setNumber(e,n+l,0)}}static embedPositionAdjustmentPattern(e,n,i){for(let l=0;l<5;++l){const c=ot.POSITION_ADJUSTMENT_PATTERN[l];for(let u=0;u<5;++u)i.setNumber(e+u,n+l,c[u])}}static embedPositionDetectionPattern(e,n,i){for(let l=0;l<7;++l){const c=ot.POSITION_DETECTION_PATTERN[l];for(let u=0;u<7;++u)i.setNumber(e+u,n+l,c[u])}}static embedPositionDetectionPatternsAndSeparators(e){const n=ot.POSITION_DETECTION_PATTERN[0].length;ot.embedPositionDetectionPattern(0,0,e),ot.embedPositionDetectionPattern(e.getWidth()-n,0,e),ot.embedPositionDetectionPattern(0,e.getWidth()-n,e);const i=8;ot.embedHorizontalSeparationPattern(0,i-1,e),ot.embedHorizontalSeparationPattern(e.getWidth()-i,i-1,e),ot.embedHorizontalSeparationPattern(0,e.getWidth()-i,e);const l=7;ot.embedVerticalSeparationPattern(l,0,e),ot.embedVerticalSeparationPattern(e.getHeight()-l-1,0,e),ot.embedVerticalSeparationPattern(l,e.getHeight()-l,e)}static maybeEmbedPositionAdjustmentPatterns(e,n){if(e.getVersionNumber()<2)return;const i=e.getVersionNumber()-1,l=ot.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[i];for(let c=0,u=l.length;c!==u;c++){const h=l[c];if(h>=0)for(let m=0;m!==u;m++){const C=l[m];C>=0&&ot.isEmpty(n.get(C,h))&&ot.embedPositionAdjustmentPattern(C-2,h-2,n)}}}}ot.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ot.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ot.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ot.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ot.VERSION_INFO_POLY=7973,ot.TYPE_INFO_POLY=1335,ot.TYPE_INFO_MASK_PATTERN=21522;class Mc{constructor(e,n){this.dataBytes=e,this.errorCorrectionBytes=n}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Kt{constructor(){}static calculateMaskPenalty(e){return qt.applyMaskPenaltyRule1(e)+qt.applyMaskPenaltyRule2(e)+qt.applyMaskPenaltyRule3(e)+qt.applyMaskPenaltyRule4(e)}static encode(e,n,i=null){let l=Kt.DEFAULT_BYTE_MODE_ENCODING;const c=i!==null&&i.get(vn.CHARACTER_SET)!==void 0;c&&(l=i.get(vn.CHARACTER_SET).toString());const u=this.chooseMode(e,l),h=new J;if(u===rt.BYTE&&(c||Kt.DEFAULT_BYTE_MODE_ENCODING!==l)){const _e=$.getCharacterSetECIByName(l);_e!==void 0&&this.appendECI(_e,h)}this.appendModeInfo(u,h);const m=new J;this.appendBytes(e,u,m,l);let C;if(i!==null&&i.get(vn.QR_VERSION)!==void 0){const _e=Number.parseInt(i.get(vn.QR_VERSION).toString(),10);C=tt.getVersionForNumber(_e);const Ce=this.calculateBitsNeeded(u,h,m,C);if(!this.willFit(Ce,C,n))throw new Yt("Data too big for requested version")}else C=this.recommendVersion(n,u,h,m);const N=new J;N.appendBitArray(h);const P=u===rt.BYTE?m.getSizeInBytes():e.length;this.appendLengthInfo(P,C,u,N),N.appendBitArray(m);const M=C.getECBlocksForLevel(n),U=C.getTotalCodewords()-M.getTotalECCodewords();this.terminateBits(U,N);const G=this.interleaveWithECBytes(N,C.getTotalCodewords(),U,M.getNumBlocks()),K=new Si;K.setECLevel(n),K.setMode(u),K.setVersion(C);const ee=C.getDimensionForVersion(),le=new ao(ee,ee),Ne=this.chooseMaskPattern(G,n,C,le);return K.setMaskPattern(Ne),ot.buildMatrix(G,n,C,Ne,le),K.setMatrix(le),K}static recommendVersion(e,n,i,l){const c=this.calculateBitsNeeded(n,i,l,tt.getVersionForNumber(1)),u=this.chooseVersion(c,e),h=this.calculateBitsNeeded(n,i,l,u);return this.chooseVersion(h,e)}static calculateBitsNeeded(e,n,i,l){return n.getSize()+e.getCharacterCountBits(l)+i.getSize()}static getAlphanumericCode(e){return e<Kt.ALPHANUMERIC_TABLE.length?Kt.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,n=null){if($.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(e))return rt.KANJI;let i=!1,l=!1;for(let c=0,u=e.length;c<u;++c){const h=e.charAt(c);if(Kt.isDigit(h))i=!0;else if(this.getAlphanumericCode(h.charCodeAt(0))!==-1)l=!0;else return rt.BYTE}return l?rt.ALPHANUMERIC:i?rt.NUMERIC:rt.BYTE}static isOnlyDoubleByteKanji(e){let n;try{n=Oe.encode(e,$.SJIS)}catch{return!1}const i=n.length;if(i%2!==0)return!1;for(let l=0;l<i;l+=2){const c=n[l]&255;if((c<129||c>159)&&(c<224||c>235))return!1}return!0}static chooseMaskPattern(e,n,i,l){let c=Number.MAX_SAFE_INTEGER,u=-1;for(let h=0;h<Si.NUM_MASK_PATTERNS;h++){ot.buildMatrix(e,n,i,h,l);let m=this.calculateMaskPenalty(l);m<c&&(c=m,u=h)}return u}static chooseVersion(e,n){for(let i=1;i<=40;i++){const l=tt.getVersionForNumber(i);if(Kt.willFit(e,l,n))return l}throw new Yt("Data too big")}static willFit(e,n,i){const l=n.getTotalCodewords(),u=n.getECBlocksForLevel(i).getTotalECCodewords(),h=l-u,m=(e+7)/8;return h>=m}static terminateBits(e,n){const i=e*8;if(n.getSize()>i)throw new Yt("data bits cannot fit in the QR Code"+n.getSize()+" > "+i);for(let u=0;u<4&&n.getSize()<i;++u)n.appendBit(!1);const l=n.getSize()&7;if(l>0)for(let u=l;u<8;u++)n.appendBit(!1);const c=e-n.getSizeInBytes();for(let u=0;u<c;++u)n.appendBits(u&1?17:236,8);if(n.getSize()!==i)throw new Yt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,n,i,l,c,u){if(l>=i)throw new Yt("Block ID too large");const h=e%i,m=i-h,C=Math.floor(e/i),N=C+1,P=Math.floor(n/i),M=P+1,U=C-P,G=N-M;if(U!==G)throw new Yt("EC bytes mismatch");if(i!==m+h)throw new Yt("RS blocks mismatch");if(e!==(P+U)*m+(M+G)*h)throw new Yt("Total bytes mismatch");l<m?(c[0]=P,u[0]=U):(c[0]=M,u[0]=G)}static interleaveWithECBytes(e,n,i,l){if(e.getSizeInBytes()!==i)throw new Yt("Number of bits and data bytes does not match");let c=0,u=0,h=0;const m=new Array;for(let N=0;N<l;++N){const P=new Int32Array(1),M=new Int32Array(1);Kt.getNumDataBytesAndNumECBytesForBlockID(n,i,l,N,P,M);const U=P[0],G=new Uint8Array(U);e.toBytes(8*c,G,0,U);const K=Kt.generateECBytes(G,M[0]);m.push(new Mc(G,K)),u=Math.max(u,U),h=Math.max(h,K.length),c+=P[0]}if(i!==c)throw new Yt("Data bytes does not match offset");const C=new J;for(let N=0;N<u;++N)for(const P of m){const M=P.getDataBytes();N<M.length&&C.appendBits(M[N],8)}for(let N=0;N<h;++N)for(const P of m){const M=P.getErrorCorrectionBytes();N<M.length&&C.appendBits(M[N],8)}if(n!==C.getSizeInBytes())throw new Yt("Interleaving error: "+n+" and "+C.getSizeInBytes()+" differ.");return C}static generateECBytes(e,n){const i=e.length,l=new Int32Array(i+n);for(let u=0;u<i;u++)l[u]=e[u]&255;new qo(we.QR_CODE_FIELD_256).encode(l,n);const c=new Uint8Array(n);for(let u=0;u<n;u++)c[u]=l[i+u];return c}static appendModeInfo(e,n){n.appendBits(e.getBits(),4)}static appendLengthInfo(e,n,i,l){const c=i.getCharacterCountBits(n);if(e>=1<<c)throw new Yt(e+" is bigger than "+((1<<c)-1));l.appendBits(e,c)}static appendBytes(e,n,i,l){switch(n){case rt.NUMERIC:Kt.appendNumericBytes(e,i);break;case rt.ALPHANUMERIC:Kt.appendAlphanumericBytes(e,i);break;case rt.BYTE:Kt.append8BitBytes(e,i,l);break;case rt.KANJI:Kt.appendKanjiBytes(e,i);break;default:throw new Yt("Invalid mode: "+n)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const n=Kt.getDigit(e);return n>=0&&n<=9}static appendNumericBytes(e,n){const i=e.length;let l=0;for(;l<i;){const c=Kt.getDigit(e.charAt(l));if(l+2<i){const u=Kt.getDigit(e.charAt(l+1)),h=Kt.getDigit(e.charAt(l+2));n.appendBits(c*100+u*10+h,10),l+=3}else if(l+1<i){const u=Kt.getDigit(e.charAt(l+1));n.appendBits(c*10+u,7),l+=2}else n.appendBits(c,4),l++}}static appendAlphanumericBytes(e,n){const i=e.length;let l=0;for(;l<i;){const c=Kt.getAlphanumericCode(e.charCodeAt(l));if(c===-1)throw new Yt;if(l+1<i){const u=Kt.getAlphanumericCode(e.charCodeAt(l+1));if(u===-1)throw new Yt;n.appendBits(c*45+u,11),l+=2}else n.appendBits(c,6),l++}}static append8BitBytes(e,n,i){let l;try{l=Oe.encode(e,i)}catch(c){throw new Yt(c)}for(let c=0,u=l.length;c!==u;c++){const h=l[c];n.appendBits(h,8)}}static appendKanjiBytes(e,n){let i;try{i=Oe.encode(e,$.SJIS)}catch(c){throw new Yt(c)}const l=i.length;for(let c=0;c<l;c+=2){const u=i[c]&255,h=i[c+1]&255,m=u<<8&4294967295|h;let C=-1;if(m>=33088&&m<=40956?C=m-33088:m>=57408&&m<=60351&&(C=m-49472),C===-1)throw new Yt("Invalid byte sequence");const N=(C>>8)*192+(C&255);n.appendBits(N,13)}}static appendECI(e,n){n.appendBits(rt.ECI.getBits(),4),n.appendBits(e.getValue(),8)}}Kt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Kt.DEFAULT_BYTE_MODE_ENCODING=$.UTF8.getName();class Ti{write(e,n,i,l=null){if(e.length===0)throw new I("Found empty contents");if(n<0||i<0)throw new I("Requested dimensions are too small: "+n+"x"+i);let c=Xt.L,u=Ti.QUIET_ZONE_SIZE;l!==null&&(l.get(vn.ERROR_CORRECTION)!==void 0&&(c=Xt.fromString(l.get(vn.ERROR_CORRECTION).toString())),l.get(vn.MARGIN)!==void 0&&(u=Number.parseInt(l.get(vn.MARGIN).toString(),10)));const h=Kt.encode(e,c,l);return this.renderResult(h,n,i,u)}writeToDom(e,n,i,l,c=null){typeof e=="string"&&(e=document.querySelector(e));const u=this.write(n,i,l,c);e&&e.appendChild(u)}renderResult(e,n,i,l){const c=e.getMatrix();if(c===null)throw new ht;const u=c.getWidth(),h=c.getHeight(),m=u+l*2,C=h+l*2,N=Math.max(n,m),P=Math.max(i,C),M=Math.min(Math.floor(N/m),Math.floor(P/C)),U=Math.floor((N-u*M)/2),G=Math.floor((P-h*M)/2),K=this.createSVGElement(N,P);for(let ee=0,le=G;ee<h;ee++,le+=M)for(let Ne=0,_e=U;Ne<u;Ne++,_e+=M)if(c.get(Ne,ee)===1){const Ce=this.createSvgRectElement(_e,le,M,M);K.appendChild(Ce)}return K}createSVGElement(e,n){const i=document.createElementNS(Ti.SVG_NS,"svg");return i.setAttributeNS(null,"height",e.toString()),i.setAttributeNS(null,"width",n.toString()),i}createSvgRectElement(e,n,i,l){const c=document.createElementNS(Ti.SVG_NS,"rect");return c.setAttributeNS(null,"x",e.toString()),c.setAttributeNS(null,"y",n.toString()),c.setAttributeNS(null,"height",i.toString()),c.setAttributeNS(null,"width",l.toString()),c.setAttributeNS(null,"fill","#000000"),c}}Ti.QUIET_ZONE_SIZE=4,Ti.SVG_NS="http://www.w3.org/2000/svg";class Qi{encode(e,n,i,l,c){if(e.length===0)throw new I("Found empty contents");if(n!==fe.QR_CODE)throw new I("Can only encode QR_CODE, but got "+n);if(i<0||l<0)throw new I(`Requested dimensions are too small: ${i}x${l}`);let u=Xt.L,h=Qi.QUIET_ZONE_SIZE;c!==null&&(c.get(vn.ERROR_CORRECTION)!==void 0&&(u=Xt.fromString(c.get(vn.ERROR_CORRECTION).toString())),c.get(vn.MARGIN)!==void 0&&(h=Number.parseInt(c.get(vn.MARGIN).toString(),10)));const m=Kt.encode(e,u,c);return Qi.renderResult(m,i,l,h)}static renderResult(e,n,i,l){const c=e.getMatrix();if(c===null)throw new ht;const u=c.getWidth(),h=c.getHeight(),m=u+l*2,C=h+l*2,N=Math.max(n,m),P=Math.max(i,C),M=Math.min(Math.floor(N/m),Math.floor(P/C)),U=Math.floor((N-u*M)/2),G=Math.floor((P-h*M)/2),K=new Se(N,P);for(let ee=0,le=G;ee<h;ee++,le+=M)for(let Ne=0,_e=U;Ne<u;Ne++,_e+=M)c.get(Ne,ee)===1&&K.setRegion(_e,le,M,M);return K}}Qi.QUIET_ZONE_SIZE=4;class Lc{encode(e,n,i,l,c){let u;switch(n){case fe.QR_CODE:u=new Qi;break;default:throw new I("No encoder available for format "+n)}return u.encode(e,n,i,l,c)}}class jr extends ge{constructor(e,n,i,l,c,u,h,m){if(super(u,h),this.yuvData=e,this.dataWidth=n,this.dataHeight=i,this.left=l,this.top=c,l+u>n||c+h>i)throw new I("Crop rectangle does not fit within image data.");m&&this.reverseHorizontal(u,h)}getRow(e,n){if(e<0||e>=this.getHeight())throw new I("Requested row is outside the image: "+e);const i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));const l=(e+this.top)*this.dataWidth+this.left;return B.arraycopy(this.yuvData,l,n,0,i),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.yuvData;const i=e*n,l=new Uint8ClampedArray(i);let c=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return B.arraycopy(this.yuvData,c,l,0,i),l;for(let u=0;u<n;u++){const h=u*e;B.arraycopy(this.yuvData,c,l,h,e),c+=this.dataWidth}return l}isCropSupported(){return!0}crop(e,n,i,l){return new jr(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+n,i,l,!1)}renderThumbnail(){const e=this.getWidth()/jr.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/jr.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(e*n),l=this.yuvData;let c=this.top*this.dataWidth+this.left;for(let u=0;u<n;u++){const h=u*e;for(let m=0;m<e;m++){const C=l[c+m*jr.THUMBNAIL_SCALE_FACTOR]&255;i[h+m]=4278190080|C*65793}c+=this.dataWidth*jr.THUMBNAIL_SCALE_FACTOR}return i}getThumbnailWidth(){return this.getWidth()/jr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/jr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,n){const i=this.yuvData;for(let l=0,c=this.top*this.dataWidth+this.left;l<n;l++,c+=this.dataWidth){const u=c+e/2;for(let h=c,m=c+e-1;h<u;h++,m--){const C=i[h];i[h]=i[m],i[m]=C}}}invert(){return new Me(this)}}jr.THUMBNAIL_SCALE_FACTOR=2;class Rs extends ge{constructor(e,n,i,l,c,u,h){if(super(n,i),this.dataWidth=l,this.dataHeight=c,this.left=u,this.top=h,e.BYTES_PER_ELEMENT===4){const m=n*i,C=new Uint8ClampedArray(m);for(let N=0;N<m;N++){const P=e[N],M=P>>16&255,U=P>>7&510,G=P&255;C[N]=(M+U+G)/4&255}this.luminances=C}else this.luminances=e;if(l===void 0&&(this.dataWidth=n),c===void 0&&(this.dataHeight=i),u===void 0&&(this.left=0),h===void 0&&(this.top=0),this.left+n>this.dataWidth||this.top+i>this.dataHeight)throw new I("Crop rectangle does not fit within image data.")}getRow(e,n){if(e<0||e>=this.getHeight())throw new I("Requested row is outside the image: "+e);const i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));const l=(e+this.top)*this.dataWidth+this.left;return B.arraycopy(this.luminances,l,n,0,i),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.luminances;const i=e*n,l=new Uint8ClampedArray(i);let c=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return B.arraycopy(this.luminances,c,l,0,i),l;for(let u=0;u<n;u++){const h=u*e;B.arraycopy(this.luminances,c,l,h,e),c+=this.dataWidth}return l}isCropSupported(){return!0}crop(e,n,i,l){return new Rs(this.luminances,i,l,this.dataWidth,this.dataHeight,this.left+e,this.top+n)}invert(){return new Me(this)}}class il extends ${static forName(e){return this.getCharacterSetECIByName(e)}}class Qo{}Qo.ISO_8859_1=$.ISO8859_1;class sl{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Jo{static singletonList(e){return[e]}static min(e,n){return e.sort(n)[0]}}class Bc{constructor(e){this.previous=e}getPrevious(){return this.previous}}class Ji extends Bc{constructor(e,n,i){super(e),this.value=n,this.bitCount=i}appendTo(e,n){e.appendBits(this.value,this.bitCount)}add(e,n){return new Ji(this,e,n)}addBinaryShift(e,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ji(this,e,n)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+z.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class ea extends Ji{constructor(e,n,i){super(e,0,0),this.binaryShiftStart=n,this.binaryShiftByteCount=i}appendTo(e,n){for(let i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):i===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(n[this.binaryShiftStart+i],8)}addBinaryShift(e,n){return new ea(this,e,n)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function jc(k,e,n){return new ea(k,e,n)}function ks(k,e,n){return new Ji(k,e,n)}const Fc=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ui=0,es=1,jn=2,ol=3,Nr=4,al=new Ji(null,0,0),lo=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function ll(k){for(let e of k)W.fill(e,-1);return k[ui][Nr]=0,k[es][Nr]=0,k[es][ui]=28,k[ol][Nr]=0,k[jn][Nr]=0,k[jn][ui]=15,k}const ta=ll(W.createInt32Array(6,6));class Gn{constructor(e,n,i,l){this.token=e,this.mode=n,this.binaryShiftByteCount=i,this.bitCount=l}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,n){let i=this.bitCount,l=this.token;if(e!==this.mode){let u=lo[this.mode][e];l=ks(l,u&65535,u>>16),i+=u>>16}let c=e===jn?4:5;return l=ks(l,n,c),new Gn(l,e,0,i+c)}shiftAndAppend(e,n){let i=this.token,l=this.mode===jn?4:5;return i=ks(i,ta[this.mode][e],l),i=ks(i,n,5),new Gn(i,this.mode,0,this.bitCount+l+5)}addBinaryShiftChar(e){let n=this.token,i=this.mode,l=this.bitCount;if(this.mode===Nr||this.mode===jn){let h=lo[i][ui];n=ks(n,h&65535,h>>16),l+=h>>16,i=ui}let c=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,u=new Gn(n,i,this.binaryShiftByteCount+1,l+c);return u.binaryShiftByteCount===2078&&(u=u.endBinaryShift(e+1)),u}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let n=this.token;return n=jc(n,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new Gn(n,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let n=this.bitCount+(lo[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?n+=Gn.calculateBinaryShiftCost(e)-Gn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(n+=10),n<=e.bitCount}toBitArray(e){let n=[];for(let l=this.endBinaryShift(e.length).token;l!==null;l=l.getPrevious())n.unshift(l);let i=new J;for(const l of n)l.appendTo(i,e);return i}toString(){return ke.format("%s bits=%d bytes=%d",Fc[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}Gn.INITIAL_STATE=new Gn(al,ui,0,0);function Vc(k){const e=ke.getCharCode(" "),n=ke.getCharCode("."),i=ke.getCharCode(",");k[ui][e]=1;const l=ke.getCharCode("Z"),c=ke.getCharCode("A");for(let M=c;M<=l;M++)k[ui][M]=M-c+2;k[es][e]=1;const u=ke.getCharCode("z"),h=ke.getCharCode("a");for(let M=h;M<=u;M++)k[es][M]=M-h+2;k[jn][e]=1;const m=ke.getCharCode("9"),C=ke.getCharCode("0");for(let M=C;M<=m;M++)k[jn][M]=M-C+2;k[jn][i]=12,k[jn][n]=13;const N=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let M=0;M<N.length;M++)k[ol][ke.getCharCode(N[M])]=M;const P=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let M=0;M<P.length;M++)ke.getCharCode(P[M])>0&&(k[Nr][ke.getCharCode(P[M])]=M);return k}const na=Vc(W.createInt32Array(5,256));class Ps{constructor(e){this.text=e}encode(){const e=ke.getCharCode(" "),n=ke.getCharCode(`
`);let i=Jo.singletonList(Gn.INITIAL_STATE);for(let c=0;c<this.text.length;c++){let u,h=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case ke.getCharCode("\r"):u=h===n?2:0;break;case ke.getCharCode("."):u=h===e?3:0;break;case ke.getCharCode(","):u=h===e?4:0;break;case ke.getCharCode(":"):u=h===e?5:0;break;default:u=0}u>0?(i=Ps.updateStateListForPair(i,c,u),c++):i=this.updateStateListForChar(i,c)}return Jo.min(i,(c,u)=>c.getBitCount()-u.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,n){const i=[];for(let l of e)this.updateStateForChar(l,n,i);return Ps.simplifyStates(i)}updateStateForChar(e,n,i){let l=this.text[n]&255,c=na[e.getMode()][l]>0,u=null;for(let h=0;h<=Nr;h++){let m=na[h][l];if(m>0){if(u==null&&(u=e.endBinaryShift(n)),!c||h===e.getMode()||h===jn){const C=u.latchAndAppend(h,m);i.push(C)}if(!c&&ta[e.getMode()][h]>=0){const C=u.shiftAndAppend(h,m);i.push(C)}}}if(e.getBinaryShiftByteCount()>0||na[e.getMode()][l]===0){let h=e.addBinaryShiftChar(n);i.push(h)}}static updateStateListForPair(e,n,i){const l=[];for(let c of e)this.updateStateForPair(c,n,i,l);return this.simplifyStates(l)}static updateStateForPair(e,n,i,l){let c=e.endBinaryShift(n);if(l.push(c.latchAndAppend(Nr,i)),e.getMode()!==Nr&&l.push(c.shiftAndAppend(Nr,i)),i===3||i===4){let u=c.latchAndAppend(jn,16-i).latchAndAppend(jn,1);l.push(u)}if(e.getBinaryShiftByteCount()>0){let u=e.addBinaryShiftChar(n).addBinaryShiftChar(n+1);l.push(u)}}static simplifyStates(e){let n=[];for(const i of e){let l=!0;for(const c of n){if(c.isBetterThanOrEqualTo(i)){l=!1;break}i.isBetterThanOrEqualTo(c)&&(n=n.filter(u=>u!==c))}l&&n.push(i)}return n}}class Lt{constructor(){}static encodeBytes(e){return Lt.encode(e,Lt.DEFAULT_EC_PERCENT,Lt.DEFAULT_AZTEC_LAYERS)}static encode(e,n,i){let l=new Ps(e).encode(),c=z.truncDivision(l.getSize()*n,100)+11,u=l.getSize()+c,h,m,C,N,P;if(i!==Lt.DEFAULT_AZTEC_LAYERS){if(h=i<0,m=Math.abs(i),m>(h?Lt.MAX_NB_BITS_COMPACT:Lt.MAX_NB_BITS))throw new I(ke.format("Illegal value %s for layers",i));C=Lt.totalBitsInLayer(m,h),N=Lt.WORD_SIZE[m];let Ce=C-C%N;if(P=Lt.stuffBits(l,N),P.getSize()+c>Ce)throw new I("Data to large for user specified layer");if(h&&P.getSize()>N*64)throw new I("Data to large for user specified layer")}else{N=0,P=null;for(let Ce=0;;Ce++){if(Ce>Lt.MAX_NB_BITS)throw new I("Data too large for an Aztec code");if(h=Ce<=3,m=h?Ce+1:Ce,C=Lt.totalBitsInLayer(m,h),u>C)continue;(P==null||N!==Lt.WORD_SIZE[m])&&(N=Lt.WORD_SIZE[m],P=Lt.stuffBits(l,N));let _t=C-C%N;if(!(h&&P.getSize()>N*64)&&P.getSize()+c<=_t)break}}let M=Lt.generateCheckWords(P,C,N),U=P.getSize()/N,G=Lt.generateModeMessage(h,m,U),K=(h?11:14)+m*4,ee=new Int32Array(K),le;if(h){le=K;for(let Ce=0;Ce<ee.length;Ce++)ee[Ce]=Ce}else{le=K+1+2*z.truncDivision(z.truncDivision(K,2)-1,15);let Ce=z.truncDivision(K,2),_t=z.truncDivision(le,2);for(let vt=0;vt<Ce;vt++){let tr=vt+z.truncDivision(vt,15);ee[Ce-vt-1]=_t-tr-1,ee[Ce+vt]=_t+tr+1}}let Ne=new Se(le);for(let Ce=0,_t=0;Ce<m;Ce++){let vt=(m-Ce)*4+(h?9:12);for(let tr=0;tr<vt;tr++){let _r=tr*2;for(let Cn=0;Cn<2;Cn++)M.get(_t+_r+Cn)&&Ne.set(ee[Ce*2+Cn],ee[Ce*2+tr]),M.get(_t+vt*2+_r+Cn)&&Ne.set(ee[Ce*2+tr],ee[K-1-Ce*2-Cn]),M.get(_t+vt*4+_r+Cn)&&Ne.set(ee[K-1-Ce*2-Cn],ee[K-1-Ce*2-tr]),M.get(_t+vt*6+_r+Cn)&&Ne.set(ee[K-1-Ce*2-tr],ee[Ce*2+Cn])}_t+=vt*8}if(Lt.drawModeMessage(Ne,h,le,G),h)Lt.drawBullsEye(Ne,z.truncDivision(le,2),5);else{Lt.drawBullsEye(Ne,z.truncDivision(le,2),7);for(let Ce=0,_t=0;Ce<z.truncDivision(K,2)-1;Ce+=15,_t+=16)for(let vt=z.truncDivision(le,2)&1;vt<le;vt+=2)Ne.set(z.truncDivision(le,2)-_t,vt),Ne.set(z.truncDivision(le,2)+_t,vt),Ne.set(vt,z.truncDivision(le,2)-_t),Ne.set(vt,z.truncDivision(le,2)+_t)}let _e=new sl;return _e.setCompact(h),_e.setSize(le),_e.setLayers(m),_e.setCodeWords(U),_e.setMatrix(Ne),_e}static drawBullsEye(e,n,i){for(let l=0;l<i;l+=2)for(let c=n-l;c<=n+l;c++)e.set(c,n-l),e.set(c,n+l),e.set(n-l,c),e.set(n+l,c);e.set(n-i,n-i),e.set(n-i+1,n-i),e.set(n-i,n-i+1),e.set(n+i,n-i),e.set(n+i,n-i+1),e.set(n+i,n+i-1)}static generateModeMessage(e,n,i){let l=new J;return e?(l.appendBits(n-1,2),l.appendBits(i-1,6),l=Lt.generateCheckWords(l,28,4)):(l.appendBits(n-1,5),l.appendBits(i-1,11),l=Lt.generateCheckWords(l,40,4)),l}static drawModeMessage(e,n,i,l){let c=z.truncDivision(i,2);if(n)for(let u=0;u<7;u++){let h=c-3+u;l.get(u)&&e.set(h,c-5),l.get(u+7)&&e.set(c+5,h),l.get(20-u)&&e.set(h,c+5),l.get(27-u)&&e.set(c-5,h)}else for(let u=0;u<10;u++){let h=c-5+u+z.truncDivision(u,5);l.get(u)&&e.set(h,c-7),l.get(u+10)&&e.set(c+7,h),l.get(29-u)&&e.set(h,c+7),l.get(39-u)&&e.set(c-7,h)}}static generateCheckWords(e,n,i){let l=e.getSize()/i,c=new qo(Lt.getGF(i)),u=z.truncDivision(n,i),h=Lt.bitsToWords(e,i,u);c.encode(h,u-l);let m=n%i,C=new J;C.appendBits(0,m);for(const N of Array.from(h))C.appendBits(N,i);return C}static bitsToWords(e,n,i){let l=new Int32Array(i),c,u;for(c=0,u=e.getSize()/n;c<u;c++){let h=0;for(let m=0;m<n;m++)h|=e.get(c*n+m)?1<<n-m-1:0;l[c]=h}return l}static getGF(e){switch(e){case 4:return we.AZTEC_PARAM;case 6:return we.AZTEC_DATA_6;case 8:return we.AZTEC_DATA_8;case 10:return we.AZTEC_DATA_10;case 12:return we.AZTEC_DATA_12;default:throw new I("Unsupported word size "+e)}}static stuffBits(e,n){let i=new J,l=e.getSize(),c=(1<<n)-2;for(let u=0;u<l;u+=n){let h=0;for(let m=0;m<n;m++)(u+m>=l||e.get(u+m))&&(h|=1<<n-1-m);(h&c)===c?(i.appendBits(h&c,n),u--):h&c?i.appendBits(h,n):(i.appendBits(h|1,n),u--)}return i}static totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}Lt.DEFAULT_EC_PERCENT=33,Lt.DEFAULT_AZTEC_LAYERS=0,Lt.MAX_NB_BITS=32,Lt.MAX_NB_BITS_COMPACT=4,Lt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Os{encode(e,n,i,l){return this.encodeWithHints(e,n,i,l,null)}encodeWithHints(e,n,i,l,c){let u=Qo.ISO_8859_1,h=Lt.DEFAULT_EC_PERCENT,m=Lt.DEFAULT_AZTEC_LAYERS;return c!=null&&(c.has(vn.CHARACTER_SET)&&(u=il.forName(c.get(vn.CHARACTER_SET).toString())),c.has(vn.ERROR_CORRECTION)&&(h=z.parseInt(c.get(vn.ERROR_CORRECTION).toString())),c.has(vn.AZTEC_LAYERS)&&(m=z.parseInt(c.get(vn.AZTEC_LAYERS).toString()))),Os.encodeLayers(e,n,i,l,u,h,m)}static encodeLayers(e,n,i,l,c,u,h){if(n!==fe.AZTEC)throw new I("Can only encode AZTEC, but got "+n);let m=Lt.encode(ke.getBytes(e,c),u,h);return Os.renderResult(m,i,l)}static renderResult(e,n,i){let l=e.getMatrix();if(l==null)throw new ht;let c=l.getWidth(),u=l.getHeight(),h=Math.max(n,c),m=Math.max(i,u),C=Math.min(h/c,m/u),N=(h-c*C)/2,P=(m-u*C)/2,M=new Se(h,m);for(let U=0,G=P;U<u;U++,G+=C)for(let K=0,ee=N;K<c;K++,ee+=C)l.get(K,U)&&M.setRegion(ee,G,C,C);return M}}a.AbstractExpandedDecoder=Gi,a.ArgumentException=S,a.ArithmeticException=me,a.AztecCode=sl,a.AztecCodeReader=Ht,a.AztecCodeWriter=Os,a.AztecDecoder=qe,a.AztecDetector=Wt,a.AztecDetectorResult=Ct,a.AztecEncoder=Lt,a.AztecHighLevelEncoder=Ps,a.AztecPoint=At,a.BarcodeFormat=fe,a.Binarizer=L,a.BinaryBitmap=R,a.BitArray=J,a.BitMatrix=Se,a.BitSource=Ho,a.BrowserAztecCodeReader=Gt,a.BrowserBarcodeReader=Xi,a.BrowserCodeReader=be,a.BrowserDatamatrixCodeReader=Dc,a.BrowserMultiFormatReader=_s,a.BrowserPDF417Reader=oo,a.BrowserQRCodeReader=rl,a.BrowserQRCodeSvgWriter=Ti,a.CharacterSetECI=$,a.ChecksumException=D,a.Code128Reader=he,a.Code39Reader=gt,a.DataMatrixDecodedBitStreamParser=Sr,a.DataMatrixReader=Tr,a.DecodeHintType=oe,a.DecoderResult=nt,a.DefaultGridSampler=ct,a.DetectorResult=yn,a.EAN13Reader=Ln,a.EncodeHintType=vn,a.Exception=b,a.FormatException=q,a.GenericGF=we,a.GenericGFPoly=ft,a.GlobalHistogramBinarizer=Le,a.GridSampler=Fe,a.GridSamplerInstance=Ve,a.HTMLCanvasElementLuminanceSource=ae,a.HybridBinarizer=pe,a.ITFReader=ut,a.IllegalArgumentException=I,a.IllegalStateException=ht,a.InvertedLuminanceSource=Me,a.LuminanceSource=ge,a.MathUtils=Je,a.MultiFormatOneDReader=Ei,a.MultiFormatReader=so,a.MultiFormatWriter=Lc,a.NotFoundException=Q,a.OneDReader=Be,a.PDF417DecodedBitStreamParser=ce,a.PDF417DecoderErrorCorrection=Yo,a.PDF417Reader=kn,a.PDF417ResultMetadata=ro,a.PerspectiveTransform=$e,a.PlanarYUVLuminanceSource=jr,a.QRCodeByteMatrix=ao,a.QRCodeDataMask=Tt,a.QRCodeDecodedBitStreamParser=Zt,a.QRCodeDecoderErrorCorrectionLevel=Xt,a.QRCodeDecoderFormatInformation=Nn,a.QRCodeEncoder=Kt,a.QRCodeEncoderQRCode=Si,a.QRCodeMaskUtil=qt,a.QRCodeMatrixUtil=ot,a.QRCodeMode=rt,a.QRCodeReader=Hn,a.QRCodeVersion=tt,a.QRCodeWriter=Qi,a.RGBLuminanceSource=Rs,a.RSS14Reader=Bt,a.RSSExpandedReader=ye,a.ReaderException=qi,a.ReedSolomonDecoder=Pt,a.ReedSolomonEncoder=qo,a.ReedSolomonException=st,a.Result=ze,a.ResultMetadataType=He,a.ResultPoint=Ie,a.StringUtils=ke,a.UnsupportedOperationException=Ae,a.VideoInputDevice=Y,a.WhiteRectangleDetector=xe,a.WriterException=Yt,a.ZXingArrays=W,a.ZXingCharset=il,a.ZXingInteger=z,a.ZXingStandardCharsets=Qo,a.ZXingStringBuilder=De,a.ZXingStringEncoding=Oe,a.ZXingSystem=B,a.createAbstractExpandedDecoder=Wn,Object.defineProperty(a,"__esModule",{value:!0})})}(_a,_a.exports)),_a.exports}qy();var pf=function(){var r=function(o,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var x in p)Object.prototype.hasOwnProperty.call(p,x)&&(f[x]=p[x])},r(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(o,a);function f(){this.constructor=o}o.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),ig=function(){function r(o,a){this.name=o,this.track=a}return r.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},r.prototype.apply=function(o){var a={};a[this.name]=o;var f={advanced:[a]};return this.track.applyConstraints(f)},r.prototype.value=function(){var o=this.track.getSettings();if(this.name in o){var a=o[this.name];return a}return null},r}(),Qy=function(r){pf(o,r);function o(a,f){return r.call(this,a,f)||this}return o.prototype.min=function(){return this.getCapabilities().min},o.prototype.max=function(){return this.getCapabilities().max},o.prototype.step=function(){return this.getCapabilities().step},o.prototype.apply=function(a){var f={};f[this.name]=a;var p={advanced:[f]};return this.track.applyConstraints(p)},o.prototype.getCapabilities=function(){this.failIfNotSupported();var a=this.track.getCapabilities(),f=a[this.name];return{min:f.min,max:f.max,step:f.step}},o.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},o}(ig);(function(r){pf(o,r);function o(a){return r.call(this,"zoom",a)||this}return o})(Qy);(function(r){pf(o,r);function o(a){return r.call(this,"torch",a)||this}return o})(ig);var v1;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.NOT_STARTED=1]="NOT_STARTED",r[r.SCANNING=2]="SCANNING",r[r.PAUSED=3]="PAUSED"})(v1||(v1={}));var Jy=function(){var r=function(o,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var x in p)Object.prototype.hasOwnProperty.call(p,x)&&(f[x]=p[x])},r(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(o,a);function f(){this.constructor=o}o.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}();(function(r){Jy(o,r);function o(){return r!==null&&r.apply(this,arguments)||this}return o.DEFAULT_WIDTH=300,o.DEFAULT_WIDTH_OFFSET=2,o.FILE_SCAN_MIN_HEIGHT=300,o.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,o.MIN_QR_BOX_SIZE=50,o.SHADED_LEFT=1,o.SHADED_RIGHT=2,o.SHADED_TOP=3,o.SHADED_BOTTOM=4,o.SHADED_REGION_ELEMENT_ID="qr-shaded-region",o.VERBOSE=!1,o.BORDER_SHADER_DEFAULT_COLOR="#ffffff",o.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",o})($y);var C1;(function(r){r[r.STATUS_DEFAULT=0]="STATUS_DEFAULT",r[r.STATUS_SUCCESS=1]="STATUS_SUCCESS",r[r.STATUS_WARNING=2]="STATUS_WARNING",r[r.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(C1||(C1={}));const ew=({user:r,onProfileClick:o})=>{const a=ar();return w.jsx("div",{children:w.jsx("div",{style:{position:"absolute",top:"45px",display:"flex",alignItems:"center",width:"94%",height:"10px",left:"3%"},children:r==null?w.jsxs("div",{style:{position:"absolute",width:"100%",display:"flex",justifyContent:"space-between"},children:[w.jsx("button",{className:"login-button",onClick:()=>a("/login"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:w.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Login"})}),w.jsx("button",{className:"login-button",onClick:()=>a("/signup"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:w.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Sign up"})})]}):w.jsxs("div",{style:{position:"absolute",width:"100%",display:"flex",justifyContent:"space-between"},children:[w.jsx("button",{className:"login-button",onClick:()=>a("/logout"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:w.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Logout"})}),w.jsx("button",{className:"login-button",onClick:o,style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:w.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Profile"})})]})})})},gf=_.createContext({});function mf(r){const o=_.useRef(null);return o.current===null&&(o.current=r()),o.current}const xf=typeof window<"u",sg=xf?_.useLayoutEffect:_.useEffect,_c=_.createContext(null);function yf(r,o){r.indexOf(o)===-1&&r.push(o)}function wf(r,o){const a=r.indexOf(o);a>-1&&r.splice(a,1)}const Fi=(r,o,a)=>a>o?o:a<r?r:a;let vf=()=>{};const Vi={},og=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r);function ag(r){return typeof r=="object"&&r!==null}const lg=r=>/^0[^.\s]+$/u.test(r);function Cf(r){let o;return()=>(o===void 0&&(o=r()),o)}const Yr=r=>r,tw=(r,o)=>a=>o(r(a)),Ya=(...r)=>r.reduce(tw),ja=(r,o,a)=>{const f=o-r;return f===0?1:(a-r)/f};class Ef{constructor(){this.subscriptions=[]}add(o){return yf(this.subscriptions,o),()=>wf(this.subscriptions,o)}notify(o,a,f){const p=this.subscriptions.length;if(p)if(p===1)this.subscriptions[0](o,a,f);else for(let x=0;x<p;x++){const y=this.subscriptions[x];y&&y(o,a,f)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const gi=r=>r*1e3,mi=r=>r/1e3;function cg(r,o){return o?r*(1e3/o):0}const ug=(r,o,a)=>(((1-3*a+3*o)*r+(3*a-6*o))*r+3*o)*r,nw=1e-7,rw=12;function iw(r,o,a,f,p){let x,y,A=0;do y=o+(a-o)/2,x=ug(y,f,p)-r,x>0?a=y:o=y;while(Math.abs(x)>nw&&++A<rw);return y}function Ka(r,o,a,f){if(r===o&&a===f)return Yr;const p=x=>iw(x,0,1,r,a);return x=>x===0||x===1?x:ug(p(x),o,f)}const dg=r=>o=>o<=.5?r(2*o)/2:(2-r(2*(1-o)))/2,fg=r=>o=>1-r(1-o),hg=Ka(.33,1.53,.69,.99),bf=fg(hg),pg=dg(bf),gg=r=>(r*=2)<1?.5*bf(r):.5*(2-Math.pow(2,-10*(r-1))),Af=r=>1-Math.sin(Math.acos(r)),mg=fg(Af),xg=dg(Af),sw=Ka(.42,0,1,1),ow=Ka(0,0,.58,1),yg=Ka(.42,0,.58,1),aw=r=>Array.isArray(r)&&typeof r[0]!="number",wg=r=>Array.isArray(r)&&typeof r[0]=="number",lw={linear:Yr,easeIn:sw,easeInOut:yg,easeOut:ow,circIn:Af,circInOut:xg,circOut:mg,backIn:bf,backInOut:pg,backOut:hg,anticipate:gg},cw=r=>typeof r=="string",E1=r=>{if(wg(r)){vf(r.length===4);const[o,a,f,p]=r;return Ka(o,a,f,p)}else if(cw(r))return lw[r];return r},rc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function uw(r,o){let a=new Set,f=new Set,p=!1,x=!1;const y=new WeakSet;let A={delta:0,timestamp:0,isProcessing:!1};function v(S){y.has(S)&&(b.schedule(S),r()),S(A)}const b={schedule:(S,I=!1,R=!1)=>{const L=R&&p?a:f;return I&&y.add(S),L.has(S)||L.add(S),S},cancel:S=>{f.delete(S),y.delete(S)},process:S=>{if(A=S,p){x=!0;return}p=!0,[a,f]=[f,a],a.forEach(v),a.clear(),p=!1,x&&(x=!1,b.process(S))}};return b}const dw=40;function vg(r,o){let a=!1,f=!0;const p={delta:0,timestamp:0,isProcessing:!1},x=()=>a=!0,y=rc.reduce((z,J)=>(z[J]=uw(x),z),{}),{setup:A,read:v,resolveKeyframes:b,preUpdate:S,update:I,preRender:R,render:D,postRender:L}=y,B=()=>{const z=Vi.useManualTiming?p.timestamp:performance.now();a=!1,Vi.useManualTiming||(p.delta=f?1e3/60:Math.max(Math.min(z-p.timestamp,dw),1)),p.timestamp=z,p.isProcessing=!0,A.process(p),v.process(p),b.process(p),S.process(p),I.process(p),R.process(p),D.process(p),L.process(p),p.isProcessing=!1,a&&o&&(f=!1,r(B))},j=()=>{a=!0,f=!0,p.isProcessing||r(B)};return{schedule:rc.reduce((z,J)=>{const ne=y[J];return z[J]=(oe,q=!1,ue=!1)=>(a||j(),ne.schedule(oe,q,ue)),z},{}),cancel:z=>{for(let J=0;J<rc.length;J++)y[rc[J]].cancel(z)},state:p,steps:y}}const{schedule:sn,cancel:ws,state:Zn,steps:fd}=vg(typeof requestAnimationFrame<"u"?requestAnimationFrame:Yr,!0);let dc;function fw(){dc=void 0}const Ar={now:()=>(dc===void 0&&Ar.set(Zn.isProcessing||Vi.useManualTiming?Zn.timestamp:performance.now()),dc),set:r=>{dc=r,queueMicrotask(fw)}},Cg=r=>o=>typeof o=="string"&&o.startsWith(r),Sf=Cg("--"),hw=Cg("var(--"),Tf=r=>hw(r)?pw.test(r.split("/*")[0].trim()):!1,pw=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Vo={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},Fa={...Vo,transform:r=>Fi(0,1,r)},ic={...Vo,default:1},ka=r=>Math.round(r*1e5)/1e5,If=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function gw(r){return r==null}const mw=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Nf=(r,o)=>a=>!!(typeof a=="string"&&mw.test(a)&&a.startsWith(r)||o&&!gw(a)&&Object.prototype.hasOwnProperty.call(a,o)),Eg=(r,o,a)=>f=>{if(typeof f!="string")return f;const[p,x,y,A]=f.match(If);return{[r]:parseFloat(p),[o]:parseFloat(x),[a]:parseFloat(y),alpha:A!==void 0?parseFloat(A):1}},xw=r=>Fi(0,255,r),hd={...Vo,transform:r=>Math.round(xw(r))},Ks={test:Nf("rgb","red"),parse:Eg("red","green","blue"),transform:({red:r,green:o,blue:a,alpha:f=1})=>"rgba("+hd.transform(r)+", "+hd.transform(o)+", "+hd.transform(a)+", "+ka(Fa.transform(f))+")"};function yw(r){let o="",a="",f="",p="";return r.length>5?(o=r.substring(1,3),a=r.substring(3,5),f=r.substring(5,7),p=r.substring(7,9)):(o=r.substring(1,2),a=r.substring(2,3),f=r.substring(3,4),p=r.substring(4,5),o+=o,a+=a,f+=f,p+=p),{red:parseInt(o,16),green:parseInt(a,16),blue:parseInt(f,16),alpha:p?parseInt(p,16)/255:1}}const kd={test:Nf("#"),parse:yw,transform:Ks.transform},$a=r=>({test:o=>typeof o=="string"&&o.endsWith(r)&&o.split(" ").length===1,parse:parseFloat,transform:o=>`${o}${r}`}),ms=$a("deg"),xi=$a("%"),mt=$a("px"),ww=$a("vh"),vw=$a("vw"),b1={...xi,parse:r=>xi.parse(r)/100,transform:r=>xi.transform(r*100)},No={test:Nf("hsl","hue"),parse:Eg("hue","saturation","lightness"),transform:({hue:r,saturation:o,lightness:a,alpha:f=1})=>"hsla("+Math.round(r)+", "+xi.transform(ka(o))+", "+xi.transform(ka(a))+", "+ka(Fa.transform(f))+")"},Tn={test:r=>Ks.test(r)||kd.test(r)||No.test(r),parse:r=>Ks.test(r)?Ks.parse(r):No.test(r)?No.parse(r):kd.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?Ks.transform(r):No.transform(r),getAnimatableNone:r=>{const o=Tn.parse(r);return o.alpha=0,Tn.transform(o)}},Cw=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Ew(r){var o,a;return isNaN(r)&&typeof r=="string"&&(((o=r.match(If))==null?void 0:o.length)||0)+(((a=r.match(Cw))==null?void 0:a.length)||0)>0}const bg="number",Ag="color",bw="var",Aw="var(",A1="${}",Sw=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Va(r){const o=r.toString(),a=[],f={color:[],number:[],var:[]},p=[];let x=0;const A=o.replace(Sw,v=>(Tn.test(v)?(f.color.push(x),p.push(Ag),a.push(Tn.parse(v))):v.startsWith(Aw)?(f.var.push(x),p.push(bw),a.push(v)):(f.number.push(x),p.push(bg),a.push(parseFloat(v))),++x,A1)).split(A1);return{values:a,split:A,indexes:f,types:p}}function Sg(r){return Va(r).values}function Tg(r){const{split:o,types:a}=Va(r),f=o.length;return p=>{let x="";for(let y=0;y<f;y++)if(x+=o[y],p[y]!==void 0){const A=a[y];A===bg?x+=ka(p[y]):A===Ag?x+=Tn.transform(p[y]):x+=p[y]}return x}}const Tw=r=>typeof r=="number"?0:Tn.test(r)?Tn.getAnimatableNone(r):r;function Iw(r){const o=Sg(r);return Tg(r)(o.map(Tw))}const vs={test:Ew,parse:Sg,createTransformer:Tg,getAnimatableNone:Iw};function pd(r,o,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?r+(o-r)*6*a:a<1/2?o:a<2/3?r+(o-r)*(2/3-a)*6:r}function Nw({hue:r,saturation:o,lightness:a,alpha:f}){r/=360,o/=100,a/=100;let p=0,x=0,y=0;if(!o)p=x=y=a;else{const A=a<.5?a*(1+o):a+o-a*o,v=2*a-A;p=pd(v,A,r+1/3),x=pd(v,A,r),y=pd(v,A,r-1/3)}return{red:Math.round(p*255),green:Math.round(x*255),blue:Math.round(y*255),alpha:f}}function yc(r,o){return a=>a>0?o:r}const un=(r,o,a)=>r+(o-r)*a,gd=(r,o,a)=>{const f=r*r,p=a*(o*o-f)+f;return p<0?0:Math.sqrt(p)},_w=[kd,Ks,No],Rw=r=>_w.find(o=>o.test(r));function S1(r){const o=Rw(r);if(!o)return!1;let a=o.parse(r);return o===No&&(a=Nw(a)),a}const T1=(r,o)=>{const a=S1(r),f=S1(o);if(!a||!f)return yc(r,o);const p={...a};return x=>(p.red=gd(a.red,f.red,x),p.green=gd(a.green,f.green,x),p.blue=gd(a.blue,f.blue,x),p.alpha=un(a.alpha,f.alpha,x),Ks.transform(p))},Pd=new Set(["none","hidden"]);function kw(r,o){return Pd.has(r)?a=>a<=0?r:o:a=>a>=1?o:r}function Pw(r,o){return a=>un(r,o,a)}function _f(r){return typeof r=="number"?Pw:typeof r=="string"?Tf(r)?yc:Tn.test(r)?T1:Mw:Array.isArray(r)?Ig:typeof r=="object"?Tn.test(r)?T1:Ow:yc}function Ig(r,o){const a=[...r],f=a.length,p=r.map((x,y)=>_f(x)(x,o[y]));return x=>{for(let y=0;y<f;y++)a[y]=p[y](x);return a}}function Ow(r,o){const a={...r,...o},f={};for(const p in a)r[p]!==void 0&&o[p]!==void 0&&(f[p]=_f(r[p])(r[p],o[p]));return p=>{for(const x in f)a[x]=f[x](p);return a}}function Dw(r,o){const a=[],f={color:0,var:0,number:0};for(let p=0;p<o.values.length;p++){const x=o.types[p],y=r.indexes[x][f[x]],A=r.values[y]??0;a[p]=A,f[x]++}return a}const Mw=(r,o)=>{const a=vs.createTransformer(o),f=Va(r),p=Va(o);return f.indexes.var.length===p.indexes.var.length&&f.indexes.color.length===p.indexes.color.length&&f.indexes.number.length>=p.indexes.number.length?Pd.has(r)&&!p.values.length||Pd.has(o)&&!f.values.length?kw(r,o):Ya(Ig(Dw(f,p),p.values),a):yc(r,o)};function Ng(r,o,a){return typeof r=="number"&&typeof o=="number"&&typeof a=="number"?un(r,o,a):_f(r)(r,o)}const Lw=r=>{const o=({timestamp:a})=>r(a);return{start:(a=!0)=>sn.update(o,a),stop:()=>ws(o),now:()=>Zn.isProcessing?Zn.timestamp:Ar.now()}},_g=(r,o,a=10)=>{let f="";const p=Math.max(Math.round(o/a),2);for(let x=0;x<p;x++)f+=Math.round(r(x/(p-1))*1e4)/1e4+", ";return`linear(${f.substring(0,f.length-2)})`},wc=2e4;function Rf(r){let o=0;const a=50;let f=r.next(o);for(;!f.done&&o<wc;)o+=a,f=r.next(o);return o>=wc?1/0:o}function Bw(r,o=100,a){const f=a({...r,keyframes:[0,o]}),p=Math.min(Rf(f),wc);return{type:"keyframes",ease:x=>f.next(p*x).value/o,duration:mi(p)}}const jw=5;function Rg(r,o,a){const f=Math.max(o-jw,0);return cg(a-r(f),o-f)}const xn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},I1=.001;function Fw({duration:r=xn.duration,bounce:o=xn.bounce,velocity:a=xn.velocity,mass:f=xn.mass}){let p,x,y=1-o;y=Fi(xn.minDamping,xn.maxDamping,y),r=Fi(xn.minDuration,xn.maxDuration,mi(r)),y<1?(p=b=>{const S=b*y,I=S*r,R=S-a,D=Od(b,y),L=Math.exp(-I);return I1-R/D*L},x=b=>{const I=b*y*r,R=I*a+a,D=Math.pow(y,2)*Math.pow(b,2)*r,L=Math.exp(-I),B=Od(Math.pow(b,2),y);return(-p(b)+I1>0?-1:1)*((R-D)*L)/B}):(p=b=>{const S=Math.exp(-b*r),I=(b-a)*r+1;return-.001+S*I},x=b=>{const S=Math.exp(-b*r),I=(a-b)*(r*r);return S*I});const A=5/r,v=zw(p,x,A);if(r=gi(r),isNaN(v))return{stiffness:xn.stiffness,damping:xn.damping,duration:r};{const b=Math.pow(v,2)*f;return{stiffness:b,damping:y*2*Math.sqrt(f*b),duration:r}}}const Vw=12;function zw(r,o,a){let f=a;for(let p=1;p<Vw;p++)f=f-r(f)/o(f);return f}function Od(r,o){return r*Math.sqrt(1-o*o)}const Uw=["duration","bounce"],Ww=["stiffness","damping","mass"];function N1(r,o){return o.some(a=>r[a]!==void 0)}function Hw(r){let o={velocity:xn.velocity,stiffness:xn.stiffness,damping:xn.damping,mass:xn.mass,isResolvedFromDuration:!1,...r};if(!N1(r,Ww)&&N1(r,Uw))if(r.visualDuration){const a=r.visualDuration,f=2*Math.PI/(a*1.2),p=f*f,x=2*Fi(.05,1,1-(r.bounce||0))*Math.sqrt(p);o={...o,mass:xn.mass,stiffness:p,damping:x}}else{const a=Fw(r);o={...o,...a,mass:xn.mass},o.isResolvedFromDuration=!0}return o}function vc(r=xn.visualDuration,o=xn.bounce){const a=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:o}:r;let{restSpeed:f,restDelta:p}=a;const x=a.keyframes[0],y=a.keyframes[a.keyframes.length-1],A={done:!1,value:x},{stiffness:v,damping:b,mass:S,duration:I,velocity:R,isResolvedFromDuration:D}=Hw({...a,velocity:-mi(a.velocity||0)}),L=R||0,B=b/(2*Math.sqrt(v*S)),j=y-x,V=mi(Math.sqrt(v/S)),W=Math.abs(j)<5;f||(f=W?xn.restSpeed.granular:xn.restSpeed.default),p||(p=W?xn.restDelta.granular:xn.restDelta.default);let z;if(B<1){const ne=Od(V,B);z=oe=>{const q=Math.exp(-B*V*oe);return y-q*((L+B*V*j)/ne*Math.sin(ne*oe)+j*Math.cos(ne*oe))}}else if(B===1)z=ne=>y-Math.exp(-V*ne)*(j+(L+V*j)*ne);else{const ne=V*Math.sqrt(B*B-1);z=oe=>{const q=Math.exp(-B*V*oe),ue=Math.min(ne*oe,300);return y-q*((L+B*V*j)*Math.sinh(ue)+ne*j*Math.cosh(ue))/ne}}const J={calculatedDuration:D&&I||null,next:ne=>{const oe=z(ne);if(D)A.done=ne>=I;else{let q=ne===0?L:0;B<1&&(q=ne===0?gi(L):Rg(z,ne,oe));const ue=Math.abs(q)<=f,$=Math.abs(y-oe)<=p;A.done=ue&&$}return A.value=A.done?y:oe,A},toString:()=>{const ne=Math.min(Rf(J),wc),oe=_g(q=>J.next(ne*q).value,ne,30);return ne+"ms "+oe},toTransition:()=>{}};return J}vc.applyToOptions=r=>{const o=Bw(r,100,vc);return r.ease=o.ease,r.duration=gi(o.duration),r.type="keyframes",r};function Dd({keyframes:r,velocity:o=0,power:a=.8,timeConstant:f=325,bounceDamping:p=10,bounceStiffness:x=500,modifyTarget:y,min:A,max:v,restDelta:b=.5,restSpeed:S}){const I=r[0],R={done:!1,value:I},D=ue=>A!==void 0&&ue<A||v!==void 0&&ue>v,L=ue=>A===void 0?v:v===void 0||Math.abs(A-ue)<Math.abs(v-ue)?A:v;let B=a*o;const j=I+B,V=y===void 0?j:y(j);V!==j&&(B=V-I);const W=ue=>-B*Math.exp(-ue/f),z=ue=>V+W(ue),J=ue=>{const $=W(ue),Ae=z(ue);R.done=Math.abs($)<=b,R.value=R.done?V:Ae};let ne,oe;const q=ue=>{D(R.value)&&(ne=ue,oe=vc({keyframes:[R.value,L(R.value)],velocity:Rg(z,ue,R.value),damping:p,stiffness:x,restDelta:b,restSpeed:S}))};return q(0),{calculatedDuration:null,next:ue=>{let $=!1;return!oe&&ne===void 0&&($=!0,J(ue),q(ue)),ne!==void 0&&ue>=ne?oe.next(ue-ne):(!$&&J(ue),R)}}}function Gw(r,o,a){const f=[],p=a||Vi.mix||Ng,x=r.length-1;for(let y=0;y<x;y++){let A=p(r[y],r[y+1]);if(o){const v=Array.isArray(o)?o[y]||Yr:o;A=Ya(v,A)}f.push(A)}return f}function Xw(r,o,{clamp:a=!0,ease:f,mixer:p}={}){const x=r.length;if(vf(x===o.length),x===1)return()=>o[0];if(x===2&&o[0]===o[1])return()=>o[1];const y=r[0]===r[1];r[0]>r[x-1]&&(r=[...r].reverse(),o=[...o].reverse());const A=Gw(o,f,p),v=A.length,b=S=>{if(y&&S<r[0])return o[0];let I=0;if(v>1)for(;I<r.length-2&&!(S<r[I+1]);I++);const R=ja(r[I],r[I+1],S);return A[I](R)};return a?S=>b(Fi(r[0],r[x-1],S)):b}function Yw(r,o){const a=r[r.length-1];for(let f=1;f<=o;f++){const p=ja(0,o,f);r.push(un(a,1,p))}}function Kw(r){const o=[0];return Yw(o,r.length-1),o}function $w(r,o){return r.map(a=>a*o)}function Zw(r,o){return r.map(()=>o||yg).splice(0,r.length-1)}function Pa({duration:r=300,keyframes:o,times:a,ease:f="easeInOut"}){const p=aw(f)?f.map(E1):E1(f),x={done:!1,value:o[0]},y=$w(a&&a.length===o.length?a:Kw(o),r),A=Xw(y,o,{ease:Array.isArray(p)?p:Zw(o,p)});return{calculatedDuration:r,next:v=>(x.value=A(v),x.done=v>=r,x)}}const qw=r=>r!==null;function kf(r,{repeat:o,repeatType:a="loop"},f,p=1){const x=r.filter(qw),A=p<0||o&&a!=="loop"&&o%2===1?0:x.length-1;return!A||f===void 0?x[A]:f}const Qw={decay:Dd,inertia:Dd,tween:Pa,keyframes:Pa,spring:vc};function kg(r){typeof r.type=="string"&&(r.type=Qw[r.type])}class Pf{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(o=>{this.resolve=o})}notifyFinished(){this.resolve()}then(o,a){return this.finished.then(o,a)}}const Jw=r=>r/100;class Of extends Pf{constructor(o){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var f,p;const{motionValue:a}=this.options;a&&a.updatedAt!==Ar.now()&&this.tick(Ar.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(p=(f=this.options).onStop)==null||p.call(f))},this.options=o,this.initAnimation(),this.play(),o.autoplay===!1&&this.pause()}initAnimation(){const{options:o}=this;kg(o);const{type:a=Pa,repeat:f=0,repeatDelay:p=0,repeatType:x,velocity:y=0}=o;let{keyframes:A}=o;const v=a||Pa;v!==Pa&&typeof A[0]!="number"&&(this.mixKeyframes=Ya(Jw,Ng(A[0],A[1])),A=[0,100]);const b=v({...o,keyframes:A});x==="mirror"&&(this.mirroredGenerator=v({...o,keyframes:[...A].reverse(),velocity:-y})),b.calculatedDuration===null&&(b.calculatedDuration=Rf(b));const{calculatedDuration:S}=b;this.calculatedDuration=S,this.resolvedDuration=S+p,this.totalDuration=this.resolvedDuration*(f+1)-p,this.generator=b}updateTime(o){const a=Math.round(o-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=a}tick(o,a=!1){const{generator:f,totalDuration:p,mixKeyframes:x,mirroredGenerator:y,resolvedDuration:A,calculatedDuration:v}=this;if(this.startTime===null)return f.next(0);const{delay:b=0,keyframes:S,repeat:I,repeatType:R,repeatDelay:D,type:L,onUpdate:B,finalKeyframe:j}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,o):this.speed<0&&(this.startTime=Math.min(o-p/this.speed,this.startTime)),a?this.currentTime=o:this.updateTime(o);const V=this.currentTime-b*(this.playbackSpeed>=0?1:-1),W=this.playbackSpeed>=0?V<0:V>p;this.currentTime=Math.max(V,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let z=this.currentTime,J=f;if(I){const ue=Math.min(this.currentTime,p)/A;let $=Math.floor(ue),Ae=ue%1;!Ae&&ue>=1&&(Ae=1),Ae===1&&$--,$=Math.min($,I+1),!!($%2)&&(R==="reverse"?(Ae=1-Ae,D&&(Ae-=D/A)):R==="mirror"&&(J=y)),z=Fi(0,1,Ae)*A}const ne=W?{done:!1,value:S[0]}:J.next(z);x&&(ne.value=x(ne.value));let{done:oe}=ne;!W&&v!==null&&(oe=this.playbackSpeed>=0?this.currentTime>=p:this.currentTime<=0);const q=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&oe);return q&&L!==Dd&&(ne.value=kf(S,this.options,j,this.speed)),B&&B(ne.value),q&&this.finish(),ne}then(o,a){return this.finished.then(o,a)}get duration(){return mi(this.calculatedDuration)}get time(){return mi(this.currentTime)}set time(o){var a;o=gi(o),this.currentTime=o,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=o:this.driver&&(this.startTime=this.driver.now()-o/this.playbackSpeed),(a=this.driver)==null||a.start(!1)}get speed(){return this.playbackSpeed}set speed(o){this.updateTime(Ar.now());const a=this.playbackSpeed!==o;this.playbackSpeed=o,a&&(this.time=mi(this.currentTime))}play(){var p,x;if(this.isStopped)return;const{driver:o=Lw,startTime:a}=this.options;this.driver||(this.driver=o(y=>this.tick(y))),(x=(p=this.options).onPlay)==null||x.call(p);const f=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=f):this.holdTime!==null?this.startTime=f-this.holdTime:this.startTime||(this.startTime=a??f),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ar.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var o,a;this.notifyFinished(),this.teardown(),this.state="finished",(a=(o=this.options).onComplete)==null||a.call(o)}cancel(){var o,a;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(a=(o=this.options).onCancel)==null||a.call(o)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(o){return this.startTime=0,this.tick(o,!0)}attachTimeline(o){var a;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(a=this.driver)==null||a.stop(),o.observe(this)}}function ev(r){for(let o=1;o<r.length;o++)r[o]??(r[o]=r[o-1])}const $s=r=>r*180/Math.PI,Md=r=>{const o=$s(Math.atan2(r[1],r[0]));return Ld(o)},tv={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:r=>(Math.abs(r[0])+Math.abs(r[3]))/2,rotate:Md,rotateZ:Md,skewX:r=>$s(Math.atan(r[1])),skewY:r=>$s(Math.atan(r[2])),skew:r=>(Math.abs(r[1])+Math.abs(r[2]))/2},Ld=r=>(r=r%360,r<0&&(r+=360),r),_1=Md,R1=r=>Math.sqrt(r[0]*r[0]+r[1]*r[1]),k1=r=>Math.sqrt(r[4]*r[4]+r[5]*r[5]),nv={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:R1,scaleY:k1,scale:r=>(R1(r)+k1(r))/2,rotateX:r=>Ld($s(Math.atan2(r[6],r[5]))),rotateY:r=>Ld($s(Math.atan2(-r[2],r[0]))),rotateZ:_1,rotate:_1,skewX:r=>$s(Math.atan(r[4])),skewY:r=>$s(Math.atan(r[1])),skew:r=>(Math.abs(r[1])+Math.abs(r[4]))/2};function Bd(r){return r.includes("scale")?1:0}function jd(r,o){if(!r||r==="none")return Bd(o);const a=r.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let f,p;if(a)f=nv,p=a;else{const A=r.match(/^matrix\(([-\d.e\s,]+)\)$/u);f=tv,p=A}if(!p)return Bd(o);const x=f[o],y=p[1].split(",").map(iv);return typeof x=="function"?x(y):y[x]}const rv=(r,o)=>{const{transform:a="none"}=getComputedStyle(r);return jd(a,o)};function iv(r){return parseFloat(r.trim())}const zo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Uo=new Set(zo),P1=r=>r===Vo||r===mt,sv=new Set(["x","y","z"]),ov=zo.filter(r=>!sv.has(r));function av(r){const o=[];return ov.forEach(a=>{const f=r.getValue(a);f!==void 0&&(o.push([a,f.get()]),f.set(a.startsWith("scale")?1:0))}),o}const qs={width:({x:r},{paddingLeft:o="0",paddingRight:a="0"})=>r.max-r.min-parseFloat(o)-parseFloat(a),height:({y:r},{paddingTop:o="0",paddingBottom:a="0"})=>r.max-r.min-parseFloat(o)-parseFloat(a),top:(r,{top:o})=>parseFloat(o),left:(r,{left:o})=>parseFloat(o),bottom:({y:r},{top:o})=>parseFloat(o)+(r.max-r.min),right:({x:r},{left:o})=>parseFloat(o)+(r.max-r.min),x:(r,{transform:o})=>jd(o,"x"),y:(r,{transform:o})=>jd(o,"y")};qs.translateX=qs.x;qs.translateY=qs.y;const Qs=new Set;let Fd=!1,Vd=!1,zd=!1;function Pg(){if(Vd){const r=Array.from(Qs).filter(f=>f.needsMeasurement),o=new Set(r.map(f=>f.element)),a=new Map;o.forEach(f=>{const p=av(f);p.length&&(a.set(f,p),f.render())}),r.forEach(f=>f.measureInitialState()),o.forEach(f=>{f.render();const p=a.get(f);p&&p.forEach(([x,y])=>{var A;(A=f.getValue(x))==null||A.set(y)})}),r.forEach(f=>f.measureEndState()),r.forEach(f=>{f.suspendedScrollY!==void 0&&window.scrollTo(0,f.suspendedScrollY)})}Vd=!1,Fd=!1,Qs.forEach(r=>r.complete(zd)),Qs.clear()}function Og(){Qs.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(Vd=!0)})}function lv(){zd=!0,Og(),Pg(),zd=!1}class Df{constructor(o,a,f,p,x,y=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...o],this.onComplete=a,this.name=f,this.motionValue=p,this.element=x,this.isAsync=y}scheduleResolve(){this.state="scheduled",this.isAsync?(Qs.add(this),Fd||(Fd=!0,sn.read(Og),sn.resolveKeyframes(Pg))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:o,name:a,element:f,motionValue:p}=this;if(o[0]===null){const x=p==null?void 0:p.get(),y=o[o.length-1];if(x!==void 0)o[0]=x;else if(f&&a){const A=f.readValue(a,y);A!=null&&(o[0]=A)}o[0]===void 0&&(o[0]=y),p&&x===void 0&&p.set(o[0])}ev(o)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(o=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,o),Qs.delete(this)}cancel(){this.state==="scheduled"&&(Qs.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const cv=r=>r.startsWith("--");function uv(r,o,a){cv(o)?r.style.setProperty(o,a):r.style[o]=a}const dv=Cf(()=>window.ScrollTimeline!==void 0),fv={};function hv(r,o){const a=Cf(r);return()=>fv[o]??a()}const Dg=hv(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ra=([r,o,a,f])=>`cubic-bezier(${r}, ${o}, ${a}, ${f})`,O1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ra([0,.65,.55,1]),circOut:Ra([.55,0,1,.45]),backIn:Ra([.31,.01,.66,-.59]),backOut:Ra([.33,1.53,.69,.99])};function Mg(r,o){if(r)return typeof r=="function"?Dg()?_g(r,o):"ease-out":wg(r)?Ra(r):Array.isArray(r)?r.map(a=>Mg(a,o)||O1.easeOut):O1[r]}function pv(r,o,a,{delay:f=0,duration:p=300,repeat:x=0,repeatType:y="loop",ease:A="easeOut",times:v}={},b=void 0){const S={[o]:a};v&&(S.offset=v);const I=Mg(A,p);Array.isArray(I)&&(S.easing=I);const R={delay:f,duration:p,easing:Array.isArray(I)?"linear":I,fill:"both",iterations:x+1,direction:y==="reverse"?"alternate":"normal"};return b&&(R.pseudoElement=b),r.animate(S,R)}function Lg(r){return typeof r=="function"&&"applyToOptions"in r}function gv({type:r,...o}){return Lg(r)&&Dg()?r.applyToOptions(o):(o.duration??(o.duration=300),o.ease??(o.ease="easeOut"),o)}class mv extends Pf{constructor(o){if(super(),this.finishedTime=null,this.isStopped=!1,!o)return;const{element:a,name:f,keyframes:p,pseudoElement:x,allowFlatten:y=!1,finalKeyframe:A,onComplete:v}=o;this.isPseudoElement=!!x,this.allowFlatten=y,this.options=o,vf(typeof o.type!="string");const b=gv(o);this.animation=pv(a,f,p,b,x),b.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!x){const S=kf(p,this.options,A,this.speed);this.updateMotionValue?this.updateMotionValue(S):uv(a,f,S),this.animation.cancel()}v==null||v(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var o,a;(a=(o=this.animation).finish)==null||a.call(o)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:o}=this;o==="idle"||o==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var o,a;this.isPseudoElement||(a=(o=this.animation).commitStyles)==null||a.call(o)}get duration(){var a,f;const o=((f=(a=this.animation.effect)==null?void 0:a.getComputedTiming)==null?void 0:f.call(a).duration)||0;return mi(Number(o))}get time(){return mi(Number(this.animation.currentTime)||0)}set time(o){this.finishedTime=null,this.animation.currentTime=gi(o)}get speed(){return this.animation.playbackRate}set speed(o){o<0&&(this.finishedTime=null),this.animation.playbackRate=o}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(o){this.animation.startTime=o}attachTimeline({timeline:o,observe:a}){var f;return this.allowFlatten&&((f=this.animation.effect)==null||f.updateTiming({easing:"linear"})),this.animation.onfinish=null,o&&dv()?(this.animation.timeline=o,Yr):a(this)}}const Bg={anticipate:gg,backInOut:pg,circInOut:xg};function xv(r){return r in Bg}function yv(r){typeof r.ease=="string"&&xv(r.ease)&&(r.ease=Bg[r.ease])}const D1=10;class wv extends mv{constructor(o){yv(o),kg(o),super(o),o.startTime&&(this.startTime=o.startTime),this.options=o}updateMotionValue(o){const{motionValue:a,onUpdate:f,onComplete:p,element:x,...y}=this.options;if(!a)return;if(o!==void 0){a.set(o);return}const A=new Of({...y,autoplay:!1}),v=gi(this.finishedTime??this.time);a.setWithVelocity(A.sample(v-D1).value,A.sample(v).value,D1),A.stop()}}const M1=(r,o)=>o==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(vs.test(r)||r==="0")&&!r.startsWith("url("));function vv(r){const o=r[0];if(r.length===1)return!0;for(let a=0;a<r.length;a++)if(r[a]!==o)return!0}function Cv(r,o,a,f){const p=r[0];if(p===null)return!1;if(o==="display"||o==="visibility")return!0;const x=r[r.length-1],y=M1(p,o),A=M1(x,o);return!y||!A?!1:vv(r)||(a==="spring"||Lg(a))&&f}function Ud(r){r.duration=0,r.type}const Ev=new Set(["opacity","clipPath","filter","transform"]),bv=Cf(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Av(r){var S;const{motionValue:o,name:a,repeatDelay:f,repeatType:p,damping:x,type:y}=r;if(!(((S=o==null?void 0:o.owner)==null?void 0:S.current)instanceof HTMLElement))return!1;const{onUpdate:v,transformTemplate:b}=o.owner.getProps();return bv()&&a&&Ev.has(a)&&(a!=="transform"||!b)&&!v&&!f&&p!=="mirror"&&x!==0&&y!=="inertia"}const Sv=40;class Tv extends Pf{constructor({autoplay:o=!0,delay:a=0,type:f="keyframes",repeat:p=0,repeatDelay:x=0,repeatType:y="loop",keyframes:A,name:v,motionValue:b,element:S,...I}){var L;super(),this.stop=()=>{var B,j;this._animation&&(this._animation.stop(),(B=this.stopTimeline)==null||B.call(this)),(j=this.keyframeResolver)==null||j.cancel()},this.createdAt=Ar.now();const R={autoplay:o,delay:a,type:f,repeat:p,repeatDelay:x,repeatType:y,name:v,motionValue:b,element:S,...I},D=(S==null?void 0:S.KeyframeResolver)||Df;this.keyframeResolver=new D(A,(B,j,V)=>this.onKeyframesResolved(B,j,R,!V),v,b,S),(L=this.keyframeResolver)==null||L.scheduleResolve()}onKeyframesResolved(o,a,f,p){this.keyframeResolver=void 0;const{name:x,type:y,velocity:A,delay:v,isHandoff:b,onUpdate:S}=f;this.resolvedAt=Ar.now(),Cv(o,x,y,A)||((Vi.instantAnimations||!v)&&(S==null||S(kf(o,f,a))),o[0]=o[o.length-1],Ud(f),f.repeat=0);const R={startTime:p?this.resolvedAt?this.resolvedAt-this.createdAt>Sv?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:a,...f,keyframes:o},D=!b&&Av(R)?new wv({...R,element:R.motionValue.owner.current}):new Of(R);D.finished.then(()=>this.notifyFinished()).catch(Yr),this.pendingTimeline&&(this.stopTimeline=D.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=D}get finished(){return this._animation?this.animation.finished:this._finished}then(o,a){return this.finished.finally(o).then(()=>{})}get animation(){var o;return this._animation||((o=this.keyframeResolver)==null||o.resume(),lv()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(o){this.animation.time=o}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(o){this.animation.speed=o}get startTime(){return this.animation.startTime}attachTimeline(o){return this._animation?this.stopTimeline=this.animation.attachTimeline(o):this.pendingTimeline=o,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var o;this._animation&&this.animation.cancel(),(o=this.keyframeResolver)==null||o.cancel()}}const Iv=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Nv(r){const o=Iv.exec(r);if(!o)return[,];const[,a,f,p]=o;return[`--${a??f}`,p]}function jg(r,o,a=1){const[f,p]=Nv(r);if(!f)return;const x=window.getComputedStyle(o).getPropertyValue(f);if(x){const y=x.trim();return og(y)?parseFloat(y):y}return Tf(p)?jg(p,o,a+1):p}function Mf(r,o){return(r==null?void 0:r[o])??(r==null?void 0:r.default)??r}const Fg=new Set(["width","height","top","left","right","bottom",...zo]),_v={test:r=>r==="auto",parse:r=>r},Vg=r=>o=>o.test(r),zg=[Vo,mt,xi,ms,vw,ww,_v],L1=r=>zg.find(Vg(r));function Rv(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||lg(r):!0}const kv=new Set(["brightness","contrast","saturate","opacity"]);function Pv(r){const[o,a]=r.slice(0,-1).split("(");if(o==="drop-shadow")return r;const[f]=a.match(If)||[];if(!f)return r;const p=a.replace(f,"");let x=kv.has(o)?1:0;return f!==a&&(x*=100),o+"("+x+p+")"}const Ov=/\b([a-z-]*)\(.*?\)/gu,Wd={...vs,getAnimatableNone:r=>{const o=r.match(Ov);return o?o.map(Pv).join(" "):r}},B1={...Vo,transform:Math.round},Dv={rotate:ms,rotateX:ms,rotateY:ms,rotateZ:ms,scale:ic,scaleX:ic,scaleY:ic,scaleZ:ic,skew:ms,skewX:ms,skewY:ms,distance:mt,translateX:mt,translateY:mt,translateZ:mt,x:mt,y:mt,z:mt,perspective:mt,transformPerspective:mt,opacity:Fa,originX:b1,originY:b1,originZ:mt},Lf={borderWidth:mt,borderTopWidth:mt,borderRightWidth:mt,borderBottomWidth:mt,borderLeftWidth:mt,borderRadius:mt,radius:mt,borderTopLeftRadius:mt,borderTopRightRadius:mt,borderBottomRightRadius:mt,borderBottomLeftRadius:mt,width:mt,maxWidth:mt,height:mt,maxHeight:mt,top:mt,right:mt,bottom:mt,left:mt,padding:mt,paddingTop:mt,paddingRight:mt,paddingBottom:mt,paddingLeft:mt,margin:mt,marginTop:mt,marginRight:mt,marginBottom:mt,marginLeft:mt,backgroundPositionX:mt,backgroundPositionY:mt,...Dv,zIndex:B1,fillOpacity:Fa,strokeOpacity:Fa,numOctaves:B1},Mv={...Lf,color:Tn,backgroundColor:Tn,outlineColor:Tn,fill:Tn,stroke:Tn,borderColor:Tn,borderTopColor:Tn,borderRightColor:Tn,borderBottomColor:Tn,borderLeftColor:Tn,filter:Wd,WebkitFilter:Wd},Ug=r=>Mv[r];function Wg(r,o){let a=Ug(r);return a!==Wd&&(a=vs),a.getAnimatableNone?a.getAnimatableNone(o):void 0}const Lv=new Set(["auto","none","0"]);function Bv(r,o,a){let f=0,p;for(;f<r.length&&!p;){const x=r[f];typeof x=="string"&&!Lv.has(x)&&Va(x).values.length&&(p=r[f]),f++}if(p&&a)for(const x of o)r[x]=Wg(a,p)}class jv extends Df{constructor(o,a,f,p,x){super(o,a,f,p,x,!0)}readKeyframes(){const{unresolvedKeyframes:o,element:a,name:f}=this;if(!a||!a.current)return;super.readKeyframes();for(let v=0;v<o.length;v++){let b=o[v];if(typeof b=="string"&&(b=b.trim(),Tf(b))){const S=jg(b,a.current);S!==void 0&&(o[v]=S),v===o.length-1&&(this.finalKeyframe=b)}}if(this.resolveNoneKeyframes(),!Fg.has(f)||o.length!==2)return;const[p,x]=o,y=L1(p),A=L1(x);if(y!==A)if(P1(y)&&P1(A))for(let v=0;v<o.length;v++){const b=o[v];typeof b=="string"&&(o[v]=parseFloat(b))}else qs[f]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:o,name:a}=this,f=[];for(let p=0;p<o.length;p++)(o[p]===null||Rv(o[p]))&&f.push(p);f.length&&Bv(o,f,a)}measureInitialState(){const{element:o,unresolvedKeyframes:a,name:f}=this;if(!o||!o.current)return;f==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=qs[f](o.measureViewportBox(),window.getComputedStyle(o.current)),a[0]=this.measuredOrigin;const p=a[a.length-1];p!==void 0&&o.getValue(f,p).jump(p,!1)}measureEndState(){var A;const{element:o,name:a,unresolvedKeyframes:f}=this;if(!o||!o.current)return;const p=o.getValue(a);p&&p.jump(this.measuredOrigin,!1);const x=f.length-1,y=f[x];f[x]=qs[a](o.measureViewportBox(),window.getComputedStyle(o.current)),y!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=y),(A=this.removedTransforms)!=null&&A.length&&this.removedTransforms.forEach(([v,b])=>{o.getValue(v).set(b)}),this.resolveNoneKeyframes()}}function Fv(r,o,a){if(r instanceof EventTarget)return[r];if(typeof r=="string"){let f=document;const p=(a==null?void 0:a[r])??f.querySelectorAll(r);return p?Array.from(p):[]}return Array.from(r)}const Hg=(r,o)=>o&&typeof r=="number"?o.transform(r):r;function Gg(r){return ag(r)&&"offsetHeight"in r}const j1=30,Vv=r=>!isNaN(parseFloat(r));class zv{constructor(o,a={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=f=>{var x;const p=Ar.now();if(this.updatedAt!==p&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(f),this.current!==this.prev&&((x=this.events.change)==null||x.notify(this.current),this.dependents))for(const y of this.dependents)y.dirty()},this.hasAnimated=!1,this.setCurrent(o),this.owner=a.owner}setCurrent(o){this.current=o,this.updatedAt=Ar.now(),this.canTrackVelocity===null&&o!==void 0&&(this.canTrackVelocity=Vv(this.current))}setPrevFrameValue(o=this.current){this.prevFrameValue=o,this.prevUpdatedAt=this.updatedAt}onChange(o){return this.on("change",o)}on(o,a){this.events[o]||(this.events[o]=new Ef);const f=this.events[o].add(a);return o==="change"?()=>{f(),sn.read(()=>{this.events.change.getSize()||this.stop()})}:f}clearListeners(){for(const o in this.events)this.events[o].clear()}attach(o,a){this.passiveEffect=o,this.stopPassiveEffect=a}set(o){this.passiveEffect?this.passiveEffect(o,this.updateAndNotify):this.updateAndNotify(o)}setWithVelocity(o,a,f){this.set(a),this.prev=void 0,this.prevFrameValue=o,this.prevUpdatedAt=this.updatedAt-f}jump(o,a=!0){this.updateAndNotify(o),this.prev=o,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var o;(o=this.events.change)==null||o.notify(this.current)}addDependent(o){this.dependents||(this.dependents=new Set),this.dependents.add(o)}removeDependent(o){this.dependents&&this.dependents.delete(o)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const o=Ar.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||o-this.updatedAt>j1)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,j1);return cg(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(o){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=o(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var o,a;(o=this.dependents)==null||o.clear(),(a=this.events.destroy)==null||a.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Lo(r,o){return new zv(r,o)}const{schedule:Bf}=vg(queueMicrotask,!1),ii={x:!1,y:!1};function Xg(){return ii.x||ii.y}function Uv(r){return r==="x"||r==="y"?ii[r]?null:(ii[r]=!0,()=>{ii[r]=!1}):ii.x||ii.y?null:(ii.x=ii.y=!0,()=>{ii.x=ii.y=!1})}function Yg(r,o){const a=Fv(r),f=new AbortController,p={passive:!0,...o,signal:f.signal};return[a,p,()=>f.abort()]}function F1(r){return!(r.pointerType==="touch"||Xg())}function Wv(r,o,a={}){const[f,p,x]=Yg(r,a),y=A=>{if(!F1(A))return;const{target:v}=A,b=o(v,A);if(typeof b!="function"||!v)return;const S=I=>{F1(I)&&(b(I),v.removeEventListener("pointerleave",S))};v.addEventListener("pointerleave",S,p)};return f.forEach(A=>{A.addEventListener("pointerenter",y,p)}),x}const Kg=(r,o)=>o?r===o?!0:Kg(r,o.parentElement):!1,jf=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,Hv=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Gv(r){return Hv.has(r.tagName)||r.tabIndex!==-1}const fc=new WeakSet;function V1(r){return o=>{o.key==="Enter"&&r(o)}}function md(r,o){r.dispatchEvent(new PointerEvent("pointer"+o,{isPrimary:!0,bubbles:!0}))}const Xv=(r,o)=>{const a=r.currentTarget;if(!a)return;const f=V1(()=>{if(fc.has(a))return;md(a,"down");const p=V1(()=>{md(a,"up")}),x=()=>md(a,"cancel");a.addEventListener("keyup",p,o),a.addEventListener("blur",x,o)});a.addEventListener("keydown",f,o),a.addEventListener("blur",()=>a.removeEventListener("keydown",f),o)};function z1(r){return jf(r)&&!Xg()}function Yv(r,o,a={}){const[f,p,x]=Yg(r,a),y=A=>{const v=A.currentTarget;if(!z1(A))return;fc.add(v);const b=o(v,A),S=(D,L)=>{window.removeEventListener("pointerup",I),window.removeEventListener("pointercancel",R),fc.has(v)&&fc.delete(v),z1(D)&&typeof b=="function"&&b(D,{success:L})},I=D=>{S(D,v===window||v===document||a.useGlobalTarget||Kg(v,D.target))},R=D=>{S(D,!1)};window.addEventListener("pointerup",I,p),window.addEventListener("pointercancel",R,p)};return f.forEach(A=>{(a.useGlobalTarget?window:A).addEventListener("pointerdown",y,p),Gg(A)&&(A.addEventListener("focus",b=>Xv(b,p)),!Gv(A)&&!A.hasAttribute("tabindex")&&(A.tabIndex=0))}),x}function $g(r){return ag(r)&&"ownerSVGElement"in r}function Kv(r){return $g(r)&&r.tagName==="svg"}const or=r=>!!(r&&r.getVelocity),$v=[...zg,Tn,vs],Zv=r=>$v.find(Vg(r)),Ff=_.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});class qv extends _.Component{getSnapshotBeforeUpdate(o){const a=this.props.childRef.current;if(a&&o.isPresent&&!this.props.isPresent){const f=a.offsetParent,p=Gg(f)&&f.offsetWidth||0,x=this.props.sizeRef.current;x.height=a.offsetHeight||0,x.width=a.offsetWidth||0,x.top=a.offsetTop,x.left=a.offsetLeft,x.right=p-x.width-x.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Qv({children:r,isPresent:o,anchorX:a,root:f}){const p=_.useId(),x=_.useRef(null),y=_.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:A}=_.useContext(Ff);return _.useInsertionEffect(()=>{const{width:v,height:b,top:S,left:I,right:R}=y.current;if(o||!x.current||!v||!b)return;const D=a==="left"?`left: ${I}`:`right: ${R}`;x.current.dataset.motionPopId=p;const L=document.createElement("style");A&&(L.nonce=A);const B=f??document.head;return B.appendChild(L),L.sheet&&L.sheet.insertRule(`
          [data-motion-pop-id="${p}"] {
            position: absolute !important;
            width: ${v}px !important;
            height: ${b}px !important;
            ${D}px !important;
            top: ${S}px !important;
          }
        `),()=>{B.contains(L)&&B.removeChild(L)}},[o]),w.jsx(qv,{isPresent:o,childRef:x,sizeRef:y,children:_.cloneElement(r,{ref:x})})}const Jv=({children:r,initial:o,isPresent:a,onExitComplete:f,custom:p,presenceAffectsLayout:x,mode:y,anchorX:A,root:v})=>{const b=mf(e3),S=_.useId();let I=!0,R=_.useMemo(()=>(I=!1,{id:S,initial:o,isPresent:a,custom:p,onExitComplete:D=>{b.set(D,!0);for(const L of b.values())if(!L)return;f&&f()},register:D=>(b.set(D,!1),()=>b.delete(D))}),[a,b,f]);return x&&I&&(R={...R}),_.useMemo(()=>{b.forEach((D,L)=>b.set(L,!1))},[a]),_.useEffect(()=>{!a&&!b.size&&f&&f()},[a]),y==="popLayout"&&(r=w.jsx(Qv,{isPresent:a,anchorX:A,root:v,children:r})),w.jsx(_c.Provider,{value:R,children:r})};function e3(){return new Map}function Zg(r=!0){const o=_.useContext(_c);if(o===null)return[!0,null];const{isPresent:a,onExitComplete:f,register:p}=o,x=_.useId();_.useEffect(()=>{if(r)return p(x)},[r]);const y=_.useCallback(()=>r&&f&&f(x),[x,f,r]);return!a&&f?[!1,y]:[!0]}const sc=r=>r.key||"";function U1(r){const o=[];return _.Children.forEach(r,a=>{_.isValidElement(a)&&o.push(a)}),o}const W1=({children:r,custom:o,initial:a=!0,onExitComplete:f,presenceAffectsLayout:p=!0,mode:x="sync",propagate:y=!1,anchorX:A="left",root:v})=>{const[b,S]=Zg(y),I=_.useMemo(()=>U1(r),[r]),R=y&&!b?[]:I.map(sc),D=_.useRef(!0),L=_.useRef(I),B=mf(()=>new Map),[j,V]=_.useState(I),[W,z]=_.useState(I);sg(()=>{D.current=!1,L.current=I;for(let oe=0;oe<W.length;oe++){const q=sc(W[oe]);R.includes(q)?B.delete(q):B.get(q)!==!0&&B.set(q,!1)}},[W,R.length,R.join("-")]);const J=[];if(I!==j){let oe=[...I];for(let q=0;q<W.length;q++){const ue=W[q],$=sc(ue);R.includes($)||(oe.splice(q,0,ue),J.push(ue))}return x==="wait"&&J.length&&(oe=J),z(U1(oe)),V(I),null}const{forceRender:ne}=_.useContext(gf);return w.jsx(w.Fragment,{children:W.map(oe=>{const q=sc(oe),ue=y&&!b?!1:I===W||R.includes(q),$=()=>{if(B.has(q))B.set(q,!0);else return;let Ae=!0;B.forEach(Oe=>{Oe||(Ae=!1)}),Ae&&(ne==null||ne(),z(L.current),y&&(S==null||S()),f&&f())};return w.jsx(Jv,{isPresent:ue,initial:!D.current||a?void 0:!1,custom:o,presenceAffectsLayout:p,mode:x,root:v,onExitComplete:ue?void 0:$,anchorX:A,children:oe},q)})})},qg=_.createContext({strict:!1}),H1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Bo={};for(const r in H1)Bo[r]={isEnabled:o=>H1[r].some(a=>!!o[a])};function t3(r){for(const o in r)Bo[o]={...Bo[o],...r[o]}}const n3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Cc(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||n3.has(r)}let Qg=r=>!Cc(r);function r3(r){typeof r=="function"&&(Qg=o=>o.startsWith("on")?!Cc(o):r(o))}try{r3(require("@emotion/is-prop-valid").default)}catch{}function i3(r,o,a){const f={};for(const p in r)p==="values"&&typeof r.values=="object"||(Qg(p)||a===!0&&Cc(p)||!o&&!Cc(p)||r.draggable&&p.startsWith("onDrag"))&&(f[p]=r[p]);return f}const Rc=_.createContext({});function kc(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}function za(r){return typeof r=="string"||Array.isArray(r)}const Vf=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],zf=["initial",...Vf];function Pc(r){return kc(r.animate)||zf.some(o=>za(r[o]))}function Jg(r){return!!(Pc(r)||r.variants)}function s3(r,o){if(Pc(r)){const{initial:a,animate:f}=r;return{initial:a===!1||za(a)?a:void 0,animate:za(f)?f:void 0}}return r.inherit!==!1?o:{}}function o3(r){const{initial:o,animate:a}=s3(r,_.useContext(Rc));return _.useMemo(()=>({initial:o,animate:a}),[G1(o),G1(a)])}function G1(r){return Array.isArray(r)?r.join(" "):r}const Ua={};function a3(r){for(const o in r)Ua[o]=r[o],Sf(o)&&(Ua[o].isCSSVariable=!0)}function em(r,{layout:o,layoutId:a}){return Uo.has(r)||r.startsWith("origin")||(o||a!==void 0)&&(!!Ua[r]||r==="opacity")}const l3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},c3=zo.length;function u3(r,o,a){let f="",p=!0;for(let x=0;x<c3;x++){const y=zo[x],A=r[y];if(A===void 0)continue;let v=!0;if(typeof A=="number"?v=A===(y.startsWith("scale")?1:0):v=parseFloat(A)===0,!v||a){const b=Hg(A,Lf[y]);if(!v){p=!1;const S=l3[y]||y;f+=`${S}(${b}) `}a&&(o[y]=b)}}return f=f.trim(),a?f=a(o,p?"":f):p&&(f="none"),f}function Uf(r,o,a){const{style:f,vars:p,transformOrigin:x}=r;let y=!1,A=!1;for(const v in o){const b=o[v];if(Uo.has(v)){y=!0;continue}else if(Sf(v)){p[v]=b;continue}else{const S=Hg(b,Lf[v]);v.startsWith("origin")?(A=!0,x[v]=S):f[v]=S}}if(o.transform||(y||a?f.transform=u3(o,r.transform,a):f.transform&&(f.transform="none")),A){const{originX:v="50%",originY:b="50%",originZ:S=0}=x;f.transformOrigin=`${v} ${b} ${S}`}}const Wf=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function tm(r,o,a){for(const f in o)!or(o[f])&&!em(f,a)&&(r[f]=o[f])}function d3({transformTemplate:r},o){return _.useMemo(()=>{const a=Wf();return Uf(a,o,r),Object.assign({},a.vars,a.style)},[o])}function f3(r,o){const a=r.style||{},f={};return tm(f,a,r),Object.assign(f,d3(r,o)),f}function h3(r,o){const a={},f=f3(r,o);return r.drag&&r.dragListener!==!1&&(a.draggable=!1,f.userSelect=f.WebkitUserSelect=f.WebkitTouchCallout="none",f.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(a.tabIndex=0),a.style=f,a}const p3={offset:"stroke-dashoffset",array:"stroke-dasharray"},g3={offset:"strokeDashoffset",array:"strokeDasharray"};function m3(r,o,a=1,f=0,p=!0){r.pathLength=1;const x=p?p3:g3;r[x.offset]=mt.transform(-f);const y=mt.transform(o),A=mt.transform(a);r[x.array]=`${y} ${A}`}function nm(r,{attrX:o,attrY:a,attrScale:f,pathLength:p,pathSpacing:x=1,pathOffset:y=0,...A},v,b,S){if(Uf(r,A,b),v){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:I,style:R}=r;I.transform&&(R.transform=I.transform,delete I.transform),(R.transform||I.transformOrigin)&&(R.transformOrigin=I.transformOrigin??"50% 50%",delete I.transformOrigin),R.transform&&(R.transformBox=(S==null?void 0:S.transformBox)??"fill-box",delete I.transformBox),o!==void 0&&(I.x=o),a!==void 0&&(I.y=a),f!==void 0&&(I.scale=f),p!==void 0&&m3(I,p,x,y,!1)}const rm=()=>({...Wf(),attrs:{}}),im=r=>typeof r=="string"&&r.toLowerCase()==="svg";function x3(r,o,a,f){const p=_.useMemo(()=>{const x=rm();return nm(x,o,im(f),r.transformTemplate,r.style),{...x.attrs,style:{...x.style}}},[o]);if(r.style){const x={};tm(x,r.style,r),p.style={...x,...p.style}}return p}const y3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Hf(r){return typeof r!="string"||r.includes("-")?!1:!!(y3.indexOf(r)>-1||/[A-Z]/u.test(r))}function w3(r,o,a,{latestValues:f},p,x=!1){const A=(Hf(r)?x3:h3)(o,f,p,r),v=i3(o,typeof r=="string",x),b=r!==_.Fragment?{...v,...A,ref:a}:{},{children:S}=o,I=_.useMemo(()=>or(S)?S.get():S,[S]);return _.createElement(r,{...b,children:I})}function X1(r){const o=[{},{}];return r==null||r.values.forEach((a,f)=>{o[0][f]=a.get(),o[1][f]=a.getVelocity()}),o}function Gf(r,o,a,f){if(typeof o=="function"){const[p,x]=X1(f);o=o(a!==void 0?a:r.custom,p,x)}if(typeof o=="string"&&(o=r.variants&&r.variants[o]),typeof o=="function"){const[p,x]=X1(f);o=o(a!==void 0?a:r.custom,p,x)}return o}function hc(r){return or(r)?r.get():r}function v3({scrapeMotionValuesFromProps:r,createRenderState:o},a,f,p){return{latestValues:C3(a,f,p,r),renderState:o()}}function C3(r,o,a,f){const p={},x=f(r,{});for(const R in x)p[R]=hc(x[R]);let{initial:y,animate:A}=r;const v=Pc(r),b=Jg(r);o&&b&&!v&&r.inherit!==!1&&(y===void 0&&(y=o.initial),A===void 0&&(A=o.animate));let S=a?a.initial===!1:!1;S=S||y===!1;const I=S?A:y;if(I&&typeof I!="boolean"&&!kc(I)){const R=Array.isArray(I)?I:[I];for(let D=0;D<R.length;D++){const L=Gf(r,R[D]);if(L){const{transitionEnd:B,transition:j,...V}=L;for(const W in V){let z=V[W];if(Array.isArray(z)){const J=S?z.length-1:0;z=z[J]}z!==null&&(p[W]=z)}for(const W in B)p[W]=B[W]}}}return p}const sm=r=>(o,a)=>{const f=_.useContext(Rc),p=_.useContext(_c),x=()=>v3(r,o,f,p);return a?x():mf(x)};function Xf(r,o,a){var x;const{style:f}=r,p={};for(const y in f)(or(f[y])||o.style&&or(o.style[y])||em(y,r)||((x=a==null?void 0:a.getValue(y))==null?void 0:x.liveStyle)!==void 0)&&(p[y]=f[y]);return p}const E3=sm({scrapeMotionValuesFromProps:Xf,createRenderState:Wf});function om(r,o,a){const f=Xf(r,o,a);for(const p in r)if(or(r[p])||or(o[p])){const x=zo.indexOf(p)!==-1?"attr"+p.charAt(0).toUpperCase()+p.substring(1):p;f[x]=r[p]}return f}const b3=sm({scrapeMotionValuesFromProps:om,createRenderState:rm}),A3=Symbol.for("motionComponentSymbol");function _o(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function S3(r,o,a){return _.useCallback(f=>{f&&r.onMount&&r.onMount(f),o&&(f?o.mount(f):o.unmount()),a&&(typeof a=="function"?a(f):_o(a)&&(a.current=f))},[o])}const Yf=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),T3="framerAppearId",am="data-"+Yf(T3),lm=_.createContext({});function I3(r,o,a,f,p){var B,j;const{visualElement:x}=_.useContext(Rc),y=_.useContext(qg),A=_.useContext(_c),v=_.useContext(Ff).reducedMotion,b=_.useRef(null);f=f||y.renderer,!b.current&&f&&(b.current=f(r,{visualState:o,parent:x,props:a,presenceContext:A,blockInitialAnimation:A?A.initial===!1:!1,reducedMotionConfig:v}));const S=b.current,I=_.useContext(lm);S&&!S.projection&&p&&(S.type==="html"||S.type==="svg")&&N3(b.current,a,p,I);const R=_.useRef(!1);_.useInsertionEffect(()=>{S&&R.current&&S.update(a,A)});const D=a[am],L=_.useRef(!!D&&!((B=window.MotionHandoffIsComplete)!=null&&B.call(window,D))&&((j=window.MotionHasOptimisedAnimation)==null?void 0:j.call(window,D)));return sg(()=>{S&&(R.current=!0,window.MotionIsMounted=!0,S.updateFeatures(),S.scheduleRenderMicrotask(),L.current&&S.animationState&&S.animationState.animateChanges())}),_.useEffect(()=>{S&&(!L.current&&S.animationState&&S.animationState.animateChanges(),L.current&&(queueMicrotask(()=>{var V;(V=window.MotionHandoffMarkAsComplete)==null||V.call(window,D)}),L.current=!1),S.enteringChildren=void 0)}),S}function N3(r,o,a,f){const{layoutId:p,layout:x,drag:y,dragConstraints:A,layoutScroll:v,layoutRoot:b,layoutCrossfade:S}=o;r.projection=new a(r.latestValues,o["data-framer-portal-id"]?void 0:cm(r.parent)),r.projection.setOptions({layoutId:p,layout:x,alwaysMeasureLayout:!!y||A&&_o(A),visualElement:r,animationType:typeof x=="string"?x:"both",initialPromotionConfig:f,crossfade:S,layoutScroll:v,layoutRoot:b})}function cm(r){if(r)return r.options.allowProjection!==!1?r.projection:cm(r.parent)}function xd(r,{forwardMotionProps:o=!1}={},a,f){a&&t3(a);const p=Hf(r)?b3:E3;function x(A,v){let b;const S={..._.useContext(Ff),...A,layoutId:_3(A)},{isStatic:I}=S,R=o3(A),D=p(A,I);if(!I&&xf){R3();const L=k3(S);b=L.MeasureLayout,R.visualElement=I3(r,D,S,f,L.ProjectionNode)}return w.jsxs(Rc.Provider,{value:R,children:[b&&R.visualElement?w.jsx(b,{visualElement:R.visualElement,...S}):null,w3(r,A,S3(D,R.visualElement,v),D,I,o)]})}x.displayName=`motion.${typeof r=="string"?r:`create(${r.displayName??r.name??""})`}`;const y=_.forwardRef(x);return y[A3]=r,y}function _3({layoutId:r}){const o=_.useContext(gf).id;return o&&r!==void 0?o+"-"+r:r}function R3(r,o){_.useContext(qg).strict}function k3(r){const{drag:o,layout:a}=Bo;if(!o&&!a)return{};const f={...o,...a};return{MeasureLayout:o!=null&&o.isEnabled(r)||a!=null&&a.isEnabled(r)?f.MeasureLayout:void 0,ProjectionNode:f.ProjectionNode}}function P3(r,o){if(typeof Proxy>"u")return xd;const a=new Map,f=(x,y)=>xd(x,y,r,o),p=(x,y)=>f(x,y);return new Proxy(p,{get:(x,y)=>y==="create"?f:(a.has(y)||a.set(y,xd(y,void 0,r,o)),a.get(y))})}function um({top:r,left:o,right:a,bottom:f}){return{x:{min:o,max:a},y:{min:r,max:f}}}function O3({x:r,y:o}){return{top:o.min,right:r.max,bottom:o.max,left:r.min}}function D3(r,o){if(!o)return r;const a=o({x:r.left,y:r.top}),f=o({x:r.right,y:r.bottom});return{top:a.y,left:a.x,bottom:f.y,right:f.x}}function yd(r){return r===void 0||r===1}function Hd({scale:r,scaleX:o,scaleY:a}){return!yd(r)||!yd(o)||!yd(a)}function Ys(r){return Hd(r)||dm(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function dm(r){return Y1(r.x)||Y1(r.y)}function Y1(r){return r&&r!=="0%"}function Ec(r,o,a){const f=r-a,p=o*f;return a+p}function K1(r,o,a,f,p){return p!==void 0&&(r=Ec(r,p,f)),Ec(r,a,f)+o}function Gd(r,o=0,a=1,f,p){r.min=K1(r.min,o,a,f,p),r.max=K1(r.max,o,a,f,p)}function fm(r,{x:o,y:a}){Gd(r.x,o.translate,o.scale,o.originPoint),Gd(r.y,a.translate,a.scale,a.originPoint)}const $1=.999999999999,Z1=1.0000000000001;function M3(r,o,a,f=!1){const p=a.length;if(!p)return;o.x=o.y=1;let x,y;for(let A=0;A<p;A++){x=a[A],y=x.projectionDelta;const{visualElement:v}=x.options;v&&v.props.style&&v.props.style.display==="contents"||(f&&x.options.layoutScroll&&x.scroll&&x!==x.root&&ko(r,{x:-x.scroll.offset.x,y:-x.scroll.offset.y}),y&&(o.x*=y.x.scale,o.y*=y.y.scale,fm(r,y)),f&&Ys(x.latestValues)&&ko(r,x.latestValues))}o.x<Z1&&o.x>$1&&(o.x=1),o.y<Z1&&o.y>$1&&(o.y=1)}function Ro(r,o){r.min=r.min+o,r.max=r.max+o}function q1(r,o,a,f,p=.5){const x=un(r.min,r.max,p);Gd(r,o,a,x,f)}function ko(r,o){q1(r.x,o.x,o.scaleX,o.scale,o.originX),q1(r.y,o.y,o.scaleY,o.scale,o.originY)}function hm(r,o){return um(D3(r.getBoundingClientRect(),o))}function L3(r,o,a){const f=hm(r,a),{scroll:p}=o;return p&&(Ro(f.x,p.offset.x),Ro(f.y,p.offset.y)),f}const Q1=()=>({translate:0,scale:1,origin:0,originPoint:0}),Po=()=>({x:Q1(),y:Q1()}),J1=()=>({min:0,max:0}),bn=()=>({x:J1(),y:J1()}),Xd={current:null},pm={current:!1};function B3(){if(pm.current=!0,!!xf)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),o=()=>Xd.current=r.matches;r.addEventListener("change",o),o()}else Xd.current=!1}const j3=new WeakMap;function F3(r,o,a){for(const f in o){const p=o[f],x=a[f];if(or(p))r.addValue(f,p);else if(or(x))r.addValue(f,Lo(p,{owner:r}));else if(x!==p)if(r.hasValue(f)){const y=r.getValue(f);y.liveStyle===!0?y.jump(p):y.hasAnimated||y.set(p)}else{const y=r.getStaticValue(f);r.addValue(f,Lo(y!==void 0?y:p,{owner:r}))}}for(const f in a)o[f]===void 0&&r.removeValue(f);return o}const ep=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class V3{scrapeMotionValuesFromProps(o,a,f){return{}}constructor({parent:o,props:a,presenceContext:f,reducedMotionConfig:p,blockInitialAnimation:x,visualState:y},A={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Df,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const R=Ar.now();this.renderScheduledAt<R&&(this.renderScheduledAt=R,sn.render(this.render,!1,!0))};const{latestValues:v,renderState:b}=y;this.latestValues=v,this.baseTarget={...v},this.initialValues=a.initial?{...v}:{},this.renderState=b,this.parent=o,this.props=a,this.presenceContext=f,this.depth=o?o.depth+1:0,this.reducedMotionConfig=p,this.options=A,this.blockInitialAnimation=!!x,this.isControllingVariants=Pc(a),this.isVariantNode=Jg(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(o&&o.current);const{willChange:S,...I}=this.scrapeMotionValuesFromProps(a,{},this);for(const R in I){const D=I[R];v[R]!==void 0&&or(D)&&D.set(v[R])}}mount(o){var a;this.current=o,j3.set(o,this),this.projection&&!this.projection.instance&&this.projection.mount(o),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((f,p)=>this.bindToMotionValue(p,f)),pm.current||B3(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Xd.current,(a=this.parent)==null||a.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var o;this.projection&&this.projection.unmount(),ws(this.notifyUpdate),ws(this.render),this.valueSubscriptions.forEach(a=>a()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(o=this.parent)==null||o.removeChild(this);for(const a in this.events)this.events[a].clear();for(const a in this.features){const f=this.features[a];f&&(f.unmount(),f.isMounted=!1)}this.current=null}addChild(o){this.children.add(o),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(o)}removeChild(o){this.children.delete(o),this.enteringChildren&&this.enteringChildren.delete(o)}bindToMotionValue(o,a){this.valueSubscriptions.has(o)&&this.valueSubscriptions.get(o)();const f=Uo.has(o);f&&this.onBindTransform&&this.onBindTransform();const p=a.on("change",y=>{this.latestValues[o]=y,this.props.onUpdate&&sn.preRender(this.notifyUpdate),f&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let x;window.MotionCheckAppearSync&&(x=window.MotionCheckAppearSync(this,o,a)),this.valueSubscriptions.set(o,()=>{p(),x&&x(),a.owner&&a.stop()})}sortNodePosition(o){return!this.current||!this.sortInstanceNodePosition||this.type!==o.type?0:this.sortInstanceNodePosition(this.current,o.current)}updateFeatures(){let o="animation";for(o in Bo){const a=Bo[o];if(!a)continue;const{isEnabled:f,Feature:p}=a;if(!this.features[o]&&p&&f(this.props)&&(this.features[o]=new p(this)),this.features[o]){const x=this.features[o];x.isMounted?x.update():(x.mount(),x.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):bn()}getStaticValue(o){return this.latestValues[o]}setStaticValue(o,a){this.latestValues[o]=a}update(o,a){(o.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=o,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let f=0;f<ep.length;f++){const p=ep[f];this.propEventSubscriptions[p]&&(this.propEventSubscriptions[p](),delete this.propEventSubscriptions[p]);const x="on"+p,y=o[x];y&&(this.propEventSubscriptions[p]=this.on(p,y))}this.prevMotionValues=F3(this,this.scrapeMotionValuesFromProps(o,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(o){return this.props.variants?this.props.variants[o]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(o){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(o),()=>a.variantChildren.delete(o)}addValue(o,a){const f=this.values.get(o);a!==f&&(f&&this.removeValue(o),this.bindToMotionValue(o,a),this.values.set(o,a),this.latestValues[o]=a.get())}removeValue(o){this.values.delete(o);const a=this.valueSubscriptions.get(o);a&&(a(),this.valueSubscriptions.delete(o)),delete this.latestValues[o],this.removeValueFromRenderState(o,this.renderState)}hasValue(o){return this.values.has(o)}getValue(o,a){if(this.props.values&&this.props.values[o])return this.props.values[o];let f=this.values.get(o);return f===void 0&&a!==void 0&&(f=Lo(a===null?void 0:a,{owner:this}),this.addValue(o,f)),f}readValue(o,a){let f=this.latestValues[o]!==void 0||!this.current?this.latestValues[o]:this.getBaseTargetFromProps(this.props,o)??this.readValueFromInstance(this.current,o,this.options);return f!=null&&(typeof f=="string"&&(og(f)||lg(f))?f=parseFloat(f):!Zv(f)&&vs.test(a)&&(f=Wg(o,a)),this.setBaseTarget(o,or(f)?f.get():f)),or(f)?f.get():f}setBaseTarget(o,a){this.baseTarget[o]=a}getBaseTarget(o){var x;const{initial:a}=this.props;let f;if(typeof a=="string"||typeof a=="object"){const y=Gf(this.props,a,(x=this.presenceContext)==null?void 0:x.custom);y&&(f=y[o])}if(a&&f!==void 0)return f;const p=this.getBaseTargetFromProps(this.props,o);return p!==void 0&&!or(p)?p:this.initialValues[o]!==void 0&&f===void 0?void 0:this.baseTarget[o]}on(o,a){return this.events[o]||(this.events[o]=new Ef),this.events[o].add(a)}notify(o,...a){this.events[o]&&this.events[o].notify(...a)}scheduleRenderMicrotask(){Bf.render(this.render)}}class gm extends V3{constructor(){super(...arguments),this.KeyframeResolver=jv}sortInstanceNodePosition(o,a){return o.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(o,a){return o.style?o.style[a]:void 0}removeValueFromRenderState(o,{vars:a,style:f}){delete a[o],delete f[o]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:o}=this.props;or(o)&&(this.childSubscription=o.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function mm(r,{style:o,vars:a},f,p){const x=r.style;let y;for(y in o)x[y]=o[y];p==null||p.applyProjectionStyles(x,f);for(y in a)x.setProperty(y,a[y])}function z3(r){return window.getComputedStyle(r)}class U3 extends gm{constructor(){super(...arguments),this.type="html",this.renderInstance=mm}readValueFromInstance(o,a){var f;if(Uo.has(a))return(f=this.projection)!=null&&f.isProjecting?Bd(a):rv(o,a);{const p=z3(o),x=(Sf(a)?p.getPropertyValue(a):p[a])||0;return typeof x=="string"?x.trim():x}}measureInstanceViewportBox(o,{transformPagePoint:a}){return hm(o,a)}build(o,a,f){Uf(o,a,f.transformTemplate)}scrapeMotionValuesFromProps(o,a,f){return Xf(o,a,f)}}const xm=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function W3(r,o,a,f){mm(r,o,void 0,f);for(const p in o.attrs)r.setAttribute(xm.has(p)?p:Yf(p),o.attrs[p])}class H3 extends gm{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=bn}getBaseTargetFromProps(o,a){return o[a]}readValueFromInstance(o,a){if(Uo.has(a)){const f=Ug(a);return f&&f.default||0}return a=xm.has(a)?a:Yf(a),o.getAttribute(a)}scrapeMotionValuesFromProps(o,a,f){return om(o,a,f)}build(o,a,f){nm(o,a,this.isSVGTag,f.transformTemplate,f.style)}renderInstance(o,a,f,p){W3(o,a,f,p)}mount(o){this.isSVGTag=im(o.tagName),super.mount(o)}}const G3=(r,o)=>Hf(r)?new H3(o):new U3(o,{allowProjection:r!==_.Fragment});function Do(r,o,a){const f=r.getProps();return Gf(f,o,a!==void 0?a:f.custom,r)}const Yd=r=>Array.isArray(r);function X3(r,o,a){r.hasValue(o)?r.getValue(o).set(a):r.addValue(o,Lo(a))}function Y3(r){return Yd(r)?r[r.length-1]||0:r}function K3(r,o){const a=Do(r,o);let{transitionEnd:f={},transition:p={},...x}=a||{};x={...x,...f};for(const y in x){const A=Y3(x[y]);X3(r,y,A)}}function $3(r){return!!(or(r)&&r.add)}function Kd(r,o){const a=r.getValue("willChange");if($3(a))return a.add(o);if(!a&&Vi.WillChange){const f=new Vi.WillChange("auto");r.addValue("willChange",f),f.add(o)}}function ym(r){return r.props[am]}const Z3=r=>r!==null;function q3(r,{repeat:o,repeatType:a="loop"},f){const p=r.filter(Z3),x=o&&a!=="loop"&&o%2===1?0:p.length-1;return p[x]}const Q3={type:"spring",stiffness:500,damping:25,restSpeed:10},J3=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),eC={type:"keyframes",duration:.8},tC={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},nC=(r,{keyframes:o})=>o.length>2?eC:Uo.has(r)?r.startsWith("scale")?J3(o[1]):Q3:tC;function rC({when:r,delay:o,delayChildren:a,staggerChildren:f,staggerDirection:p,repeat:x,repeatType:y,repeatDelay:A,from:v,elapsed:b,...S}){return!!Object.keys(S).length}const Kf=(r,o,a,f={},p,x)=>y=>{const A=Mf(f,r)||{},v=A.delay||f.delay||0;let{elapsed:b=0}=f;b=b-gi(v);const S={keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:o.getVelocity(),...A,delay:-b,onUpdate:R=>{o.set(R),A.onUpdate&&A.onUpdate(R)},onComplete:()=>{y(),A.onComplete&&A.onComplete()},name:r,motionValue:o,element:x?void 0:p};rC(A)||Object.assign(S,nC(r,S)),S.duration&&(S.duration=gi(S.duration)),S.repeatDelay&&(S.repeatDelay=gi(S.repeatDelay)),S.from!==void 0&&(S.keyframes[0]=S.from);let I=!1;if((S.type===!1||S.duration===0&&!S.repeatDelay)&&(Ud(S),S.delay===0&&(I=!0)),(Vi.instantAnimations||Vi.skipAnimations)&&(I=!0,Ud(S),S.delay=0),S.allowFlatten=!A.type&&!A.ease,I&&!x&&o.get()!==void 0){const R=q3(S.keyframes,A);if(R!==void 0){sn.update(()=>{S.onUpdate(R),S.onComplete()});return}}return A.isSync?new Of(S):new Tv(S)};function iC({protectedKeys:r,needsAnimating:o},a){const f=r.hasOwnProperty(a)&&o[a]!==!0;return o[a]=!1,f}function wm(r,o,{delay:a=0,transitionOverride:f,type:p}={}){let{transition:x=r.getDefaultTransition(),transitionEnd:y,...A}=o;f&&(x=f);const v=[],b=p&&r.animationState&&r.animationState.getState()[p];for(const S in A){const I=r.getValue(S,r.latestValues[S]??null),R=A[S];if(R===void 0||b&&iC(b,S))continue;const D={delay:a,...Mf(x||{},S)},L=I.get();if(L!==void 0&&!I.isAnimating&&!Array.isArray(R)&&R===L&&!D.velocity)continue;let B=!1;if(window.MotionHandoffAnimation){const V=ym(r);if(V){const W=window.MotionHandoffAnimation(V,S,sn);W!==null&&(D.startTime=W,B=!0)}}Kd(r,S),I.start(Kf(S,I,R,r.shouldReduceMotion&&Fg.has(S)?{type:!1}:D,r,B));const j=I.animation;j&&v.push(j)}return y&&Promise.all(v).then(()=>{sn.update(()=>{y&&K3(r,y)})}),v}function vm(r,o,a,f=0,p=1){const x=Array.from(r).sort((b,S)=>b.sortNodePosition(S)).indexOf(o),y=r.size,A=(y-1)*f;return typeof a=="function"?a(x,y):p===1?x*f:A-x*f}function $d(r,o,a={}){var v;const f=Do(r,o,a.type==="exit"?(v=r.presenceContext)==null?void 0:v.custom:void 0);let{transition:p=r.getDefaultTransition()||{}}=f||{};a.transitionOverride&&(p=a.transitionOverride);const x=f?()=>Promise.all(wm(r,f,a)):()=>Promise.resolve(),y=r.variantChildren&&r.variantChildren.size?(b=0)=>{const{delayChildren:S=0,staggerChildren:I,staggerDirection:R}=p;return sC(r,o,b,S,I,R,a)}:()=>Promise.resolve(),{when:A}=p;if(A){const[b,S]=A==="beforeChildren"?[x,y]:[y,x];return b().then(()=>S())}else return Promise.all([x(),y(a.delay)])}function sC(r,o,a=0,f=0,p=0,x=1,y){const A=[];for(const v of r.variantChildren)v.notify("AnimationStart",o),A.push($d(v,o,{...y,delay:a+(typeof f=="function"?0:f)+vm(r.variantChildren,v,f,p,x)}).then(()=>v.notify("AnimationComplete",o)));return Promise.all(A)}function oC(r,o,a={}){r.notify("AnimationStart",o);let f;if(Array.isArray(o)){const p=o.map(x=>$d(r,x,a));f=Promise.all(p)}else if(typeof o=="string")f=$d(r,o,a);else{const p=typeof o=="function"?Do(r,o,a.custom):o;f=Promise.all(wm(r,p,a))}return f.then(()=>{r.notify("AnimationComplete",o)})}function Cm(r,o){if(!Array.isArray(o))return!1;const a=o.length;if(a!==r.length)return!1;for(let f=0;f<a;f++)if(o[f]!==r[f])return!1;return!0}const aC=zf.length;function Em(r){if(!r)return;if(!r.isControllingVariants){const a=r.parent?Em(r.parent)||{}:{};return r.props.initial!==void 0&&(a.initial=r.props.initial),a}const o={};for(let a=0;a<aC;a++){const f=zf[a],p=r.props[f];(za(p)||p===!1)&&(o[f]=p)}return o}const lC=[...Vf].reverse(),cC=Vf.length;function uC(r){return o=>Promise.all(o.map(({animation:a,options:f})=>oC(r,a,f)))}function dC(r){let o=uC(r),a=tp(),f=!0;const p=v=>(b,S)=>{var R;const I=Do(r,S,v==="exit"?(R=r.presenceContext)==null?void 0:R.custom:void 0);if(I){const{transition:D,transitionEnd:L,...B}=I;b={...b,...B,...L}}return b};function x(v){o=v(r)}function y(v){const{props:b}=r,S=Em(r.parent)||{},I=[],R=new Set;let D={},L=1/0;for(let j=0;j<cC;j++){const V=lC[j],W=a[V],z=b[V]!==void 0?b[V]:S[V],J=za(z),ne=V===v?W.isActive:null;ne===!1&&(L=j);let oe=z===S[V]&&z!==b[V]&&J;if(oe&&f&&r.manuallyAnimateOnMount&&(oe=!1),W.protectedKeys={...D},!W.isActive&&ne===null||!z&&!W.prevProp||kc(z)||typeof z=="boolean")continue;const q=fC(W.prevProp,z);let ue=q||V===v&&W.isActive&&!oe&&J||j>L&&J,$=!1;const Ae=Array.isArray(z)?z:[z];let Oe=Ae.reduce(p(V),{});ne===!1&&(Oe={});const{prevResolvedValues:ke={}}=W,De={...ke,...Oe},Se=pe=>{ue=!0,R.has(pe)&&($=!0,R.delete(pe)),W.needsAnimating[pe]=!0;const ge=r.getValue(pe);ge&&(ge.liveStyle=!1)};for(const pe in De){const ge=Oe[pe],Me=ke[pe];if(D.hasOwnProperty(pe))continue;let ae=!1;Yd(ge)&&Yd(Me)?ae=!Cm(ge,Me):ae=ge!==Me,ae?ge!=null?Se(pe):R.add(pe):ge!==void 0&&R.has(pe)?Se(pe):W.protectedKeys[pe]=!0}W.prevProp=z,W.prevResolvedValues=Oe,W.isActive&&(D={...D,...Oe}),f&&r.blockInitialAnimation&&(ue=!1);const Q=oe&&q;ue&&(!Q||$)&&I.push(...Ae.map(pe=>{const ge={type:V};if(typeof pe=="string"&&f&&!Q&&r.manuallyAnimateOnMount&&r.parent){const{parent:Me}=r,ae=Do(Me,pe);if(Me.enteringChildren&&ae){const{delayChildren:Y}=ae.transition||{};ge.delay=vm(Me.enteringChildren,r,Y)}}return{animation:pe,options:ge}}))}if(R.size){const j={};if(typeof b.initial!="boolean"){const V=Do(r,Array.isArray(b.initial)?b.initial[0]:b.initial);V&&V.transition&&(j.transition=V.transition)}R.forEach(V=>{const W=r.getBaseTarget(V),z=r.getValue(V);z&&(z.liveStyle=!0),j[V]=W??null}),I.push({animation:j})}let B=!!I.length;return f&&(b.initial===!1||b.initial===b.animate)&&!r.manuallyAnimateOnMount&&(B=!1),f=!1,B?o(I):Promise.resolve()}function A(v,b){var I;if(a[v].isActive===b)return Promise.resolve();(I=r.variantChildren)==null||I.forEach(R=>{var D;return(D=R.animationState)==null?void 0:D.setActive(v,b)}),a[v].isActive=b;const S=y(v);for(const R in a)a[R].protectedKeys={};return S}return{animateChanges:y,setActive:A,setAnimateFunction:x,getState:()=>a,reset:()=>{a=tp(),f=!0}}}function fC(r,o){return typeof o=="string"?o!==r:Array.isArray(o)?!Cm(o,r):!1}function Xs(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function tp(){return{animate:Xs(!0),whileInView:Xs(),whileHover:Xs(),whileTap:Xs(),whileDrag:Xs(),whileFocus:Xs(),exit:Xs()}}class Cs{constructor(o){this.isMounted=!1,this.node=o}update(){}}class hC extends Cs{constructor(o){super(o),o.animationState||(o.animationState=dC(o))}updateAnimationControlsSubscription(){const{animate:o}=this.node.getProps();kc(o)&&(this.unmountControls=o.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:o}=this.node.getProps(),{animate:a}=this.node.prevProps||{};o!==a&&this.updateAnimationControlsSubscription()}unmount(){var o;this.node.animationState.reset(),(o=this.unmountControls)==null||o.call(this)}}let pC=0;class gC extends Cs{constructor(){super(...arguments),this.id=pC++}update(){if(!this.node.presenceContext)return;const{isPresent:o,onExitComplete:a}=this.node.presenceContext,{isPresent:f}=this.node.prevPresenceContext||{};if(!this.node.animationState||o===f)return;const p=this.node.animationState.setActive("exit",!o);a&&!o&&p.then(()=>{a(this.id)})}mount(){const{register:o,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),o&&(this.unmount=o(this.id))}unmount(){}}const mC={animation:{Feature:hC},exit:{Feature:gC}};function Wa(r,o,a,f={passive:!0}){return r.addEventListener(o,a,f),()=>r.removeEventListener(o,a)}function Za(r){return{point:{x:r.pageX,y:r.pageY}}}const xC=r=>o=>jf(o)&&r(o,Za(o));function Oa(r,o,a,f){return Wa(r,o,xC(a),f)}const bm=1e-4,yC=1-bm,wC=1+bm,Am=.01,vC=0-Am,CC=0+Am;function pr(r){return r.max-r.min}function EC(r,o,a){return Math.abs(r-o)<=a}function np(r,o,a,f=.5){r.origin=f,r.originPoint=un(o.min,o.max,r.origin),r.scale=pr(a)/pr(o),r.translate=un(a.min,a.max,r.origin)-r.originPoint,(r.scale>=yC&&r.scale<=wC||isNaN(r.scale))&&(r.scale=1),(r.translate>=vC&&r.translate<=CC||isNaN(r.translate))&&(r.translate=0)}function Da(r,o,a,f){np(r.x,o.x,a.x,f?f.originX:void 0),np(r.y,o.y,a.y,f?f.originY:void 0)}function rp(r,o,a){r.min=a.min+o.min,r.max=r.min+pr(o)}function bC(r,o,a){rp(r.x,o.x,a.x),rp(r.y,o.y,a.y)}function ip(r,o,a){r.min=o.min-a.min,r.max=r.min+pr(o)}function Ma(r,o,a){ip(r.x,o.x,a.x),ip(r.y,o.y,a.y)}function Xr(r){return[r("x"),r("y")]}const Sm=({current:r})=>r?r.ownerDocument.defaultView:null,sp=(r,o)=>Math.abs(r-o);function AC(r,o){const a=sp(r.x,o.x),f=sp(r.y,o.y);return Math.sqrt(a**2+f**2)}class Tm{constructor(o,a,{transformPagePoint:f,contextWindow:p=window,dragSnapToOrigin:x=!1,distanceThreshold:y=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const R=vd(this.lastMoveEventInfo,this.history),D=this.startEvent!==null,L=AC(R.offset,{x:0,y:0})>=this.distanceThreshold;if(!D&&!L)return;const{point:B}=R,{timestamp:j}=Zn;this.history.push({...B,timestamp:j});const{onStart:V,onMove:W}=this.handlers;D||(V&&V(this.lastMoveEvent,R),this.startEvent=this.lastMoveEvent),W&&W(this.lastMoveEvent,R)},this.handlePointerMove=(R,D)=>{this.lastMoveEvent=R,this.lastMoveEventInfo=wd(D,this.transformPagePoint),sn.update(this.updatePoint,!0)},this.handlePointerUp=(R,D)=>{this.end();const{onEnd:L,onSessionEnd:B,resumeAnimation:j}=this.handlers;if(this.dragSnapToOrigin&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const V=vd(R.type==="pointercancel"?this.lastMoveEventInfo:wd(D,this.transformPagePoint),this.history);this.startEvent&&L&&L(R,V),B&&B(R,V)},!jf(o))return;this.dragSnapToOrigin=x,this.handlers=a,this.transformPagePoint=f,this.distanceThreshold=y,this.contextWindow=p||window;const A=Za(o),v=wd(A,this.transformPagePoint),{point:b}=v,{timestamp:S}=Zn;this.history=[{...b,timestamp:S}];const{onSessionStart:I}=a;I&&I(o,vd(v,this.history)),this.removeListeners=Ya(Oa(this.contextWindow,"pointermove",this.handlePointerMove),Oa(this.contextWindow,"pointerup",this.handlePointerUp),Oa(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(o){this.handlers=o}end(){this.removeListeners&&this.removeListeners(),ws(this.updatePoint)}}function wd(r,o){return o?{point:o(r.point)}:r}function op(r,o){return{x:r.x-o.x,y:r.y-o.y}}function vd({point:r},o){return{point:r,delta:op(r,Im(o)),offset:op(r,SC(o)),velocity:TC(o,.1)}}function SC(r){return r[0]}function Im(r){return r[r.length-1]}function TC(r,o){if(r.length<2)return{x:0,y:0};let a=r.length-1,f=null;const p=Im(r);for(;a>=0&&(f=r[a],!(p.timestamp-f.timestamp>gi(o)));)a--;if(!f)return{x:0,y:0};const x=mi(p.timestamp-f.timestamp);if(x===0)return{x:0,y:0};const y={x:(p.x-f.x)/x,y:(p.y-f.y)/x};return y.x===1/0&&(y.x=0),y.y===1/0&&(y.y=0),y}function IC(r,{min:o,max:a},f){return o!==void 0&&r<o?r=f?un(o,r,f.min):Math.max(r,o):a!==void 0&&r>a&&(r=f?un(a,r,f.max):Math.min(r,a)),r}function ap(r,o,a){return{min:o!==void 0?r.min+o:void 0,max:a!==void 0?r.max+a-(r.max-r.min):void 0}}function NC(r,{top:o,left:a,bottom:f,right:p}){return{x:ap(r.x,a,p),y:ap(r.y,o,f)}}function lp(r,o){let a=o.min-r.min,f=o.max-r.max;return o.max-o.min<r.max-r.min&&([a,f]=[f,a]),{min:a,max:f}}function _C(r,o){return{x:lp(r.x,o.x),y:lp(r.y,o.y)}}function RC(r,o){let a=.5;const f=pr(r),p=pr(o);return p>f?a=ja(o.min,o.max-f,r.min):f>p&&(a=ja(r.min,r.max-p,o.min)),Fi(0,1,a)}function kC(r,o){const a={};return o.min!==void 0&&(a.min=o.min-r.min),o.max!==void 0&&(a.max=o.max-r.min),a}const Zd=.35;function PC(r=Zd){return r===!1?r=0:r===!0&&(r=Zd),{x:cp(r,"left","right"),y:cp(r,"top","bottom")}}function cp(r,o,a){return{min:up(r,o),max:up(r,a)}}function up(r,o){return typeof r=="number"?r:r[o]||0}const OC=new WeakMap;class DC{constructor(o){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=bn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=o}start(o,{snapToCursor:a=!1,distanceThreshold:f}={}){const{presenceContext:p}=this.visualElement;if(p&&p.isPresent===!1)return;const x=I=>{const{dragSnapToOrigin:R}=this.getProps();R?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(Za(I).point)},y=(I,R)=>{const{drag:D,dragPropagation:L,onDragStart:B}=this.getProps();if(D&&!L&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Uv(D),!this.openDragLock))return;this.latestPointerEvent=I,this.latestPanInfo=R,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Xr(V=>{let W=this.getAxisMotionValue(V).get()||0;if(xi.test(W)){const{projection:z}=this.visualElement;if(z&&z.layout){const J=z.layout.layoutBox[V];J&&(W=pr(J)*(parseFloat(W)/100))}}this.originPoint[V]=W}),B&&sn.postRender(()=>B(I,R)),Kd(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},A=(I,R)=>{this.latestPointerEvent=I,this.latestPanInfo=R;const{dragPropagation:D,dragDirectionLock:L,onDirectionLock:B,onDrag:j}=this.getProps();if(!D&&!this.openDragLock)return;const{offset:V}=R;if(L&&this.currentDirection===null){this.currentDirection=MC(V),this.currentDirection!==null&&B&&B(this.currentDirection);return}this.updateAxis("x",R.point,V),this.updateAxis("y",R.point,V),this.visualElement.render(),j&&j(I,R)},v=(I,R)=>{this.latestPointerEvent=I,this.latestPanInfo=R,this.stop(I,R),this.latestPointerEvent=null,this.latestPanInfo=null},b=()=>Xr(I=>{var R;return this.getAnimationState(I)==="paused"&&((R=this.getAxisMotionValue(I).animation)==null?void 0:R.play())}),{dragSnapToOrigin:S}=this.getProps();this.panSession=new Tm(o,{onSessionStart:x,onStart:y,onMove:A,onSessionEnd:v,resumeAnimation:b},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:S,distanceThreshold:f,contextWindow:Sm(this.visualElement)})}stop(o,a){const f=o||this.latestPointerEvent,p=a||this.latestPanInfo,x=this.isDragging;if(this.cancel(),!x||!p||!f)return;const{velocity:y}=p;this.startAnimation(y);const{onDragEnd:A}=this.getProps();A&&sn.postRender(()=>A(f,p))}cancel(){this.isDragging=!1;const{projection:o,animationState:a}=this.visualElement;o&&(o.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:f}=this.getProps();!f&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(o,a,f){const{drag:p}=this.getProps();if(!f||!oc(o,p,this.currentDirection))return;const x=this.getAxisMotionValue(o);let y=this.originPoint[o]+f[o];this.constraints&&this.constraints[o]&&(y=IC(y,this.constraints[o],this.elastic[o])),x.set(y)}resolveConstraints(){var x;const{dragConstraints:o,dragElastic:a}=this.getProps(),f=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(x=this.visualElement.projection)==null?void 0:x.layout,p=this.constraints;o&&_o(o)?this.constraints||(this.constraints=this.resolveRefConstraints()):o&&f?this.constraints=NC(f.layoutBox,o):this.constraints=!1,this.elastic=PC(a),p!==this.constraints&&f&&this.constraints&&!this.hasMutatedConstraints&&Xr(y=>{this.constraints!==!1&&this.getAxisMotionValue(y)&&(this.constraints[y]=kC(f.layoutBox[y],this.constraints[y]))})}resolveRefConstraints(){const{dragConstraints:o,onMeasureDragConstraints:a}=this.getProps();if(!o||!_o(o))return!1;const f=o.current,{projection:p}=this.visualElement;if(!p||!p.layout)return!1;const x=L3(f,p.root,this.visualElement.getTransformPagePoint());let y=_C(p.layout.layoutBox,x);if(a){const A=a(O3(y));this.hasMutatedConstraints=!!A,A&&(y=um(A))}return y}startAnimation(o){const{drag:a,dragMomentum:f,dragElastic:p,dragTransition:x,dragSnapToOrigin:y,onDragTransitionEnd:A}=this.getProps(),v=this.constraints||{},b=Xr(S=>{if(!oc(S,a,this.currentDirection))return;let I=v&&v[S]||{};y&&(I={min:0,max:0});const R=p?200:1e6,D=p?40:1e7,L={type:"inertia",velocity:f?o[S]:0,bounceStiffness:R,bounceDamping:D,timeConstant:750,restDelta:1,restSpeed:10,...x,...I};return this.startAxisValueAnimation(S,L)});return Promise.all(b).then(A)}startAxisValueAnimation(o,a){const f=this.getAxisMotionValue(o);return Kd(this.visualElement,o),f.start(Kf(o,f,0,a,this.visualElement,!1))}stopAnimation(){Xr(o=>this.getAxisMotionValue(o).stop())}pauseAnimation(){Xr(o=>{var a;return(a=this.getAxisMotionValue(o).animation)==null?void 0:a.pause()})}getAnimationState(o){var a;return(a=this.getAxisMotionValue(o).animation)==null?void 0:a.state}getAxisMotionValue(o){const a=`_drag${o.toUpperCase()}`,f=this.visualElement.getProps(),p=f[a];return p||this.visualElement.getValue(o,(f.initial?f.initial[o]:void 0)||0)}snapToCursor(o){Xr(a=>{const{drag:f}=this.getProps();if(!oc(a,f,this.currentDirection))return;const{projection:p}=this.visualElement,x=this.getAxisMotionValue(a);if(p&&p.layout){const{min:y,max:A}=p.layout.layoutBox[a];x.set(o[a]-un(y,A,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:o,dragConstraints:a}=this.getProps(),{projection:f}=this.visualElement;if(!_o(a)||!f||!this.constraints)return;this.stopAnimation();const p={x:0,y:0};Xr(y=>{const A=this.getAxisMotionValue(y);if(A&&this.constraints!==!1){const v=A.get();p[y]=RC({min:v,max:v},this.constraints[y])}});const{transformTemplate:x}=this.visualElement.getProps();this.visualElement.current.style.transform=x?x({},""):"none",f.root&&f.root.updateScroll(),f.updateLayout(),this.resolveConstraints(),Xr(y=>{if(!oc(y,o,null))return;const A=this.getAxisMotionValue(y),{min:v,max:b}=this.constraints[y];A.set(un(v,b,p[y]))})}addListeners(){if(!this.visualElement.current)return;OC.set(this.visualElement,this);const o=this.visualElement.current,a=Oa(o,"pointerdown",v=>{const{drag:b,dragListener:S=!0}=this.getProps();b&&S&&this.start(v)}),f=()=>{const{dragConstraints:v}=this.getProps();_o(v)&&v.current&&(this.constraints=this.resolveRefConstraints())},{projection:p}=this.visualElement,x=p.addEventListener("measure",f);p&&!p.layout&&(p.root&&p.root.updateScroll(),p.updateLayout()),sn.read(f);const y=Wa(window,"resize",()=>this.scalePositionWithinConstraints()),A=p.addEventListener("didUpdate",({delta:v,hasLayoutChanged:b})=>{this.isDragging&&b&&(Xr(S=>{const I=this.getAxisMotionValue(S);I&&(this.originPoint[S]+=v[S].translate,I.set(I.get()+v[S].translate))}),this.visualElement.render())});return()=>{y(),a(),x(),A&&A()}}getProps(){const o=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:f=!1,dragPropagation:p=!1,dragConstraints:x=!1,dragElastic:y=Zd,dragMomentum:A=!0}=o;return{...o,drag:a,dragDirectionLock:f,dragPropagation:p,dragConstraints:x,dragElastic:y,dragMomentum:A}}}function oc(r,o,a){return(o===!0||o===r)&&(a===null||a===r)}function MC(r,o=10){let a=null;return Math.abs(r.y)>o?a="y":Math.abs(r.x)>o&&(a="x"),a}class LC extends Cs{constructor(o){super(o),this.removeGroupControls=Yr,this.removeListeners=Yr,this.controls=new DC(o)}mount(){const{dragControls:o}=this.node.getProps();o&&(this.removeGroupControls=o.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Yr}unmount(){this.removeGroupControls(),this.removeListeners()}}const dp=r=>(o,a)=>{r&&sn.postRender(()=>r(o,a))};class BC extends Cs{constructor(){super(...arguments),this.removePointerDownListener=Yr}onPointerDown(o){this.session=new Tm(o,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Sm(this.node)})}createPanHandlers(){const{onPanSessionStart:o,onPanStart:a,onPan:f,onPanEnd:p}=this.node.getProps();return{onSessionStart:dp(o),onStart:dp(a),onMove:f,onEnd:(x,y)=>{delete this.session,p&&sn.postRender(()=>p(x,y))}}}mount(){this.removePointerDownListener=Oa(this.node.current,"pointerdown",o=>this.onPointerDown(o))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const pc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function fp(r,o){return o.max===o.min?0:r/(o.max-o.min)*100}const Na={correct:(r,o)=>{if(!o.target)return r;if(typeof r=="string")if(mt.test(r))r=parseFloat(r);else return r;const a=fp(r,o.target.x),f=fp(r,o.target.y);return`${a}% ${f}%`}},jC={correct:(r,{treeScale:o,projectionDelta:a})=>{const f=r,p=vs.parse(r);if(p.length>5)return f;const x=vs.createTransformer(r),y=typeof p[0]!="number"?1:0,A=a.x.scale*o.x,v=a.y.scale*o.y;p[0+y]/=A,p[1+y]/=v;const b=un(A,v,.5);return typeof p[2+y]=="number"&&(p[2+y]/=b),typeof p[3+y]=="number"&&(p[3+y]/=b),x(p)}};let Cd=!1;class FC extends _.Component{componentDidMount(){const{visualElement:o,layoutGroup:a,switchLayoutGroup:f,layoutId:p}=this.props,{projection:x}=o;a3(VC),x&&(a.group&&a.group.add(x),f&&f.register&&p&&f.register(x),Cd&&x.root.didUpdate(),x.addEventListener("animationComplete",()=>{this.safeToRemove()}),x.setOptions({...x.options,onExitComplete:()=>this.safeToRemove()})),pc.hasEverUpdated=!0}getSnapshotBeforeUpdate(o){const{layoutDependency:a,visualElement:f,drag:p,isPresent:x}=this.props,{projection:y}=f;return y&&(y.isPresent=x,Cd=!0,p||o.layoutDependency!==a||a===void 0||o.isPresent!==x?y.willUpdate():this.safeToRemove(),o.isPresent!==x&&(x?y.promote():y.relegate()||sn.postRender(()=>{const A=y.getStack();(!A||!A.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:o}=this.props.visualElement;o&&(o.root.didUpdate(),Bf.postRender(()=>{!o.currentAnimation&&o.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:o,layoutGroup:a,switchLayoutGroup:f}=this.props,{projection:p}=o;Cd=!0,p&&(p.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(p),f&&f.deregister&&f.deregister(p))}safeToRemove(){const{safeToRemove:o}=this.props;o&&o()}render(){return null}}function Nm(r){const[o,a]=Zg(),f=_.useContext(gf);return w.jsx(FC,{...r,layoutGroup:f,switchLayoutGroup:_.useContext(lm),isPresent:o,safeToRemove:a})}const VC={borderRadius:{...Na,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Na,borderTopRightRadius:Na,borderBottomLeftRadius:Na,borderBottomRightRadius:Na,boxShadow:jC};function zC(r,o,a){const f=or(r)?r:Lo(r);return f.start(Kf("",f,o,a)),f.animation}const UC=(r,o)=>r.depth-o.depth;class WC{constructor(){this.children=[],this.isDirty=!1}add(o){yf(this.children,o),this.isDirty=!0}remove(o){wf(this.children,o),this.isDirty=!0}forEach(o){this.isDirty&&this.children.sort(UC),this.isDirty=!1,this.children.forEach(o)}}function HC(r,o){const a=Ar.now(),f=({timestamp:p})=>{const x=p-a;x>=o&&(ws(f),r(x-o))};return sn.setup(f,!0),()=>ws(f)}const _m=["TopLeft","TopRight","BottomLeft","BottomRight"],GC=_m.length,hp=r=>typeof r=="string"?parseFloat(r):r,pp=r=>typeof r=="number"||mt.test(r);function XC(r,o,a,f,p,x){p?(r.opacity=un(0,a.opacity??1,YC(f)),r.opacityExit=un(o.opacity??1,0,KC(f))):x&&(r.opacity=un(o.opacity??1,a.opacity??1,f));for(let y=0;y<GC;y++){const A=`border${_m[y]}Radius`;let v=gp(o,A),b=gp(a,A);if(v===void 0&&b===void 0)continue;v||(v=0),b||(b=0),v===0||b===0||pp(v)===pp(b)?(r[A]=Math.max(un(hp(v),hp(b),f),0),(xi.test(b)||xi.test(v))&&(r[A]+="%")):r[A]=b}(o.rotate||a.rotate)&&(r.rotate=un(o.rotate||0,a.rotate||0,f))}function gp(r,o){return r[o]!==void 0?r[o]:r.borderRadius}const YC=Rm(0,.5,mg),KC=Rm(.5,.95,Yr);function Rm(r,o,a){return f=>f<r?0:f>o?1:a(ja(r,o,f))}function mp(r,o){r.min=o.min,r.max=o.max}function Gr(r,o){mp(r.x,o.x),mp(r.y,o.y)}function xp(r,o){r.translate=o.translate,r.scale=o.scale,r.originPoint=o.originPoint,r.origin=o.origin}function yp(r,o,a,f,p){return r-=o,r=Ec(r,1/a,f),p!==void 0&&(r=Ec(r,1/p,f)),r}function $C(r,o=0,a=1,f=.5,p,x=r,y=r){if(xi.test(o)&&(o=parseFloat(o),o=un(y.min,y.max,o/100)-y.min),typeof o!="number")return;let A=un(x.min,x.max,f);r===x&&(A-=o),r.min=yp(r.min,o,a,A,p),r.max=yp(r.max,o,a,A,p)}function wp(r,o,[a,f,p],x,y){$C(r,o[a],o[f],o[p],o.scale,x,y)}const ZC=["x","scaleX","originX"],qC=["y","scaleY","originY"];function vp(r,o,a,f){wp(r.x,o,ZC,a?a.x:void 0,f?f.x:void 0),wp(r.y,o,qC,a?a.y:void 0,f?f.y:void 0)}function Cp(r){return r.translate===0&&r.scale===1}function km(r){return Cp(r.x)&&Cp(r.y)}function Ep(r,o){return r.min===o.min&&r.max===o.max}function QC(r,o){return Ep(r.x,o.x)&&Ep(r.y,o.y)}function bp(r,o){return Math.round(r.min)===Math.round(o.min)&&Math.round(r.max)===Math.round(o.max)}function Pm(r,o){return bp(r.x,o.x)&&bp(r.y,o.y)}function Ap(r){return pr(r.x)/pr(r.y)}function Sp(r,o){return r.translate===o.translate&&r.scale===o.scale&&r.originPoint===o.originPoint}class JC{constructor(){this.members=[]}add(o){yf(this.members,o),o.scheduleRender()}remove(o){if(wf(this.members,o),o===this.prevLead&&(this.prevLead=void 0),o===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(o){const a=this.members.findIndex(p=>o===p);if(a===0)return!1;let f;for(let p=a;p>=0;p--){const x=this.members[p];if(x.isPresent!==!1){f=x;break}}return f?(this.promote(f),!0):!1}promote(o,a){const f=this.lead;if(o!==f&&(this.prevLead=f,this.lead=o,o.show(),f)){f.instance&&f.scheduleRender(),o.scheduleRender(),o.resumeFrom=f,a&&(o.resumeFrom.preserveOpacity=!0),f.snapshot&&(o.snapshot=f.snapshot,o.snapshot.latestValues=f.animationValues||f.latestValues),o.root&&o.root.isUpdating&&(o.isLayoutDirty=!0);const{crossfade:p}=o.options;p===!1&&f.hide()}}exitAnimationComplete(){this.members.forEach(o=>{const{options:a,resumingFrom:f}=o;a.onExitComplete&&a.onExitComplete(),f&&f.options.onExitComplete&&f.options.onExitComplete()})}scheduleRender(){this.members.forEach(o=>{o.instance&&o.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function eE(r,o,a){let f="";const p=r.x.translate/o.x,x=r.y.translate/o.y,y=(a==null?void 0:a.z)||0;if((p||x||y)&&(f=`translate3d(${p}px, ${x}px, ${y}px) `),(o.x!==1||o.y!==1)&&(f+=`scale(${1/o.x}, ${1/o.y}) `),a){const{transformPerspective:b,rotate:S,rotateX:I,rotateY:R,skewX:D,skewY:L}=a;b&&(f=`perspective(${b}px) ${f}`),S&&(f+=`rotate(${S}deg) `),I&&(f+=`rotateX(${I}deg) `),R&&(f+=`rotateY(${R}deg) `),D&&(f+=`skewX(${D}deg) `),L&&(f+=`skewY(${L}deg) `)}const A=r.x.scale*o.x,v=r.y.scale*o.y;return(A!==1||v!==1)&&(f+=`scale(${A}, ${v})`),f||"none"}const Ed=["","X","Y","Z"],tE=1e3;let nE=0;function bd(r,o,a,f){const{latestValues:p}=o;p[r]&&(a[r]=p[r],o.setStaticValue(r,0),f&&(f[r]=0))}function Om(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:o}=r.options;if(!o)return;const a=ym(o);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:p,layoutId:x}=r.options;window.MotionCancelOptimisedAnimation(a,"transform",sn,!(p||x))}const{parent:f}=r;f&&!f.hasCheckedOptimisedAppear&&Om(f)}function Dm({attachResizeListener:r,defaultParent:o,measureScroll:a,checkIsScrollRoot:f,resetTransform:p}){return class{constructor(y={},A=o==null?void 0:o()){this.id=nE++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(sE),this.nodes.forEach(cE),this.nodes.forEach(uE),this.nodes.forEach(oE)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=y,this.root=A?A.root||A:this,this.path=A?[...A.path,A]:[],this.parent=A,this.depth=A?A.depth+1:0;for(let v=0;v<this.path.length;v++)this.path[v].shouldResetTransform=!0;this.root===this&&(this.nodes=new WC)}addEventListener(y,A){return this.eventHandlers.has(y)||this.eventHandlers.set(y,new Ef),this.eventHandlers.get(y).add(A)}notifyListeners(y,...A){const v=this.eventHandlers.get(y);v&&v.notify(...A)}hasListeners(y){return this.eventHandlers.has(y)}mount(y){if(this.instance)return;this.isSVG=$g(y)&&!Kv(y),this.instance=y;const{layoutId:A,layout:v,visualElement:b}=this.options;if(b&&!b.current&&b.mount(y),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(v||A)&&(this.isLayoutDirty=!0),r){let S,I=0;const R=()=>this.root.updateBlockedByResize=!1;sn.read(()=>{I=window.innerWidth}),r(y,()=>{const D=window.innerWidth;D!==I&&(I=D,this.root.updateBlockedByResize=!0,S&&S(),S=HC(R,250),pc.hasAnimatedSinceResize&&(pc.hasAnimatedSinceResize=!1,this.nodes.forEach(Np)))})}A&&this.root.registerSharedNode(A,this),this.options.animate!==!1&&b&&(A||v)&&this.addEventListener("didUpdate",({delta:S,hasLayoutChanged:I,hasRelativeLayoutChanged:R,layout:D})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const L=this.options.transition||b.getDefaultTransition()||gE,{onLayoutAnimationStart:B,onLayoutAnimationComplete:j}=b.getProps(),V=!this.targetLayout||!Pm(this.targetLayout,D),W=!I&&R;if(this.options.layoutRoot||this.resumeFrom||W||I&&(V||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const z={...Mf(L,"layout"),onPlay:B,onComplete:j};(b.shouldReduceMotion||this.options.layoutRoot)&&(z.delay=0,z.type=!1),this.startAnimation(z),this.setAnimationOrigin(S,W)}else I||Np(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=D})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const y=this.getStack();y&&y.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ws(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(dE),this.animationId++)}getTransformTemplate(){const{visualElement:y}=this.options;return y&&y.getProps().transformTemplate}willUpdate(y=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Om(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let S=0;S<this.path.length;S++){const I=this.path[S];I.shouldResetTransform=!0,I.updateScroll("snapshot"),I.options.layoutRoot&&I.willUpdate(!1)}const{layoutId:A,layout:v}=this.options;if(A===void 0&&!v)return;const b=this.getTransformTemplate();this.prevTransformTemplateValue=b?b(this.latestValues,""):void 0,this.updateSnapshot(),y&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Tp);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Ip);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(lE),this.nodes.forEach(rE),this.nodes.forEach(iE)):this.nodes.forEach(Ip),this.clearAllSnapshots();const A=Ar.now();Zn.delta=Fi(0,1e3/60,A-Zn.timestamp),Zn.timestamp=A,Zn.isProcessing=!0,fd.update.process(Zn),fd.preRender.process(Zn),fd.render.process(Zn),Zn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Bf.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(aE),this.sharedNodes.forEach(fE)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,sn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){sn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!pr(this.snapshot.measuredBox.x)&&!pr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let v=0;v<this.path.length;v++)this.path[v].updateScroll();const y=this.layout;this.layout=this.measure(!1),this.layoutCorrected=bn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:A}=this.options;A&&A.notify("LayoutMeasure",this.layout.layoutBox,y?y.layoutBox:void 0)}updateScroll(y="measure"){let A=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===y&&(A=!1),A&&this.instance){const v=f(this.instance);this.scroll={animationId:this.root.animationId,phase:y,isRoot:v,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:v}}}resetTransform(){if(!p)return;const y=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,A=this.projectionDelta&&!km(this.projectionDelta),v=this.getTransformTemplate(),b=v?v(this.latestValues,""):void 0,S=b!==this.prevTransformTemplateValue;y&&this.instance&&(A||Ys(this.latestValues)||S)&&(p(this.instance,b),this.shouldResetTransform=!1,this.scheduleRender())}measure(y=!0){const A=this.measurePageBox();let v=this.removeElementScroll(A);return y&&(v=this.removeTransform(v)),mE(v),{animationId:this.root.animationId,measuredBox:A,layoutBox:v,latestValues:{},source:this.id}}measurePageBox(){var b;const{visualElement:y}=this.options;if(!y)return bn();const A=y.measureViewportBox();if(!(((b=this.scroll)==null?void 0:b.wasRoot)||this.path.some(xE))){const{scroll:S}=this.root;S&&(Ro(A.x,S.offset.x),Ro(A.y,S.offset.y))}return A}removeElementScroll(y){var v;const A=bn();if(Gr(A,y),(v=this.scroll)!=null&&v.wasRoot)return A;for(let b=0;b<this.path.length;b++){const S=this.path[b],{scroll:I,options:R}=S;S!==this.root&&I&&R.layoutScroll&&(I.wasRoot&&Gr(A,y),Ro(A.x,I.offset.x),Ro(A.y,I.offset.y))}return A}applyTransform(y,A=!1){const v=bn();Gr(v,y);for(let b=0;b<this.path.length;b++){const S=this.path[b];!A&&S.options.layoutScroll&&S.scroll&&S!==S.root&&ko(v,{x:-S.scroll.offset.x,y:-S.scroll.offset.y}),Ys(S.latestValues)&&ko(v,S.latestValues)}return Ys(this.latestValues)&&ko(v,this.latestValues),v}removeTransform(y){const A=bn();Gr(A,y);for(let v=0;v<this.path.length;v++){const b=this.path[v];if(!b.instance||!Ys(b.latestValues))continue;Hd(b.latestValues)&&b.updateSnapshot();const S=bn(),I=b.measurePageBox();Gr(S,I),vp(A,b.latestValues,b.snapshot?b.snapshot.layoutBox:void 0,S)}return Ys(this.latestValues)&&vp(A,this.latestValues),A}setTargetDelta(y){this.targetDelta=y,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(y){this.options={...this.options,...y,crossfade:y.crossfade!==void 0?y.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Zn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(y=!1){var R;const A=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=A.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=A.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=A.isSharedProjectionDirty);const v=!!this.resumingFrom||this!==A;if(!(y||v&&this.isSharedProjectionDirty||this.isProjectionDirty||(R=this.parent)!=null&&R.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:S,layoutId:I}=this.options;if(!(!this.layout||!(S||I))){if(this.resolvedRelativeTargetAt=Zn.timestamp,!this.targetDelta&&!this.relativeTarget){const D=this.getClosestProjectingParent();D&&D.layout&&this.animationProgress!==1?(this.relativeParent=D,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bn(),this.relativeTargetOrigin=bn(),Ma(this.relativeTargetOrigin,this.layout.layoutBox,D.layout.layoutBox),Gr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=bn(),this.targetWithTransforms=bn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),bC(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Gr(this.target,this.layout.layoutBox),fm(this.target,this.targetDelta)):Gr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const D=this.getClosestProjectingParent();D&&!!D.resumingFrom==!!this.resumingFrom&&!D.options.layoutScroll&&D.target&&this.animationProgress!==1?(this.relativeParent=D,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bn(),this.relativeTargetOrigin=bn(),Ma(this.relativeTargetOrigin,this.target,D.target),Gr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Hd(this.parent.latestValues)||dm(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var L;const y=this.getLead(),A=!!this.resumingFrom||this!==y;let v=!0;if((this.isProjectionDirty||(L=this.parent)!=null&&L.isProjectionDirty)&&(v=!1),A&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(v=!1),this.resolvedRelativeTargetAt===Zn.timestamp&&(v=!1),v)return;const{layout:b,layoutId:S}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(b||S))return;Gr(this.layoutCorrected,this.layout.layoutBox);const I=this.treeScale.x,R=this.treeScale.y;M3(this.layoutCorrected,this.treeScale,this.path,A),y.layout&&!y.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(y.target=y.layout.layoutBox,y.targetWithTransforms=bn());const{target:D}=y;if(!D){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(xp(this.prevProjectionDelta.x,this.projectionDelta.x),xp(this.prevProjectionDelta.y,this.projectionDelta.y)),Da(this.projectionDelta,this.layoutCorrected,D,this.latestValues),(this.treeScale.x!==I||this.treeScale.y!==R||!Sp(this.projectionDelta.x,this.prevProjectionDelta.x)||!Sp(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",D))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(y=!0){var A;if((A=this.options.visualElement)==null||A.scheduleRender(),y){const v=this.getStack();v&&v.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Po(),this.projectionDelta=Po(),this.projectionDeltaWithTransform=Po()}setAnimationOrigin(y,A=!1){const v=this.snapshot,b=v?v.latestValues:{},S={...this.latestValues},I=Po();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!A;const R=bn(),D=v?v.source:void 0,L=this.layout?this.layout.source:void 0,B=D!==L,j=this.getStack(),V=!j||j.members.length<=1,W=!!(B&&!V&&this.options.crossfade===!0&&!this.path.some(pE));this.animationProgress=0;let z;this.mixTargetDelta=J=>{const ne=J/1e3;_p(I.x,y.x,ne),_p(I.y,y.y,ne),this.setTargetDelta(I),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ma(R,this.layout.layoutBox,this.relativeParent.layout.layoutBox),hE(this.relativeTarget,this.relativeTargetOrigin,R,ne),z&&QC(this.relativeTarget,z)&&(this.isProjectionDirty=!1),z||(z=bn()),Gr(z,this.relativeTarget)),B&&(this.animationValues=S,XC(S,b,this.latestValues,ne,W,V)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ne},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(y){var A,v,b;this.notifyListeners("animationStart"),(A=this.currentAnimation)==null||A.stop(),(b=(v=this.resumingFrom)==null?void 0:v.currentAnimation)==null||b.stop(),this.pendingAnimation&&(ws(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=sn.update(()=>{pc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Lo(0)),this.currentAnimation=zC(this.motionValue,[0,1e3],{...y,velocity:0,isSync:!0,onUpdate:S=>{this.mixTargetDelta(S),y.onUpdate&&y.onUpdate(S)},onStop:()=>{},onComplete:()=>{y.onComplete&&y.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const y=this.getStack();y&&y.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(tE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const y=this.getLead();let{targetWithTransforms:A,target:v,layout:b,latestValues:S}=y;if(!(!A||!v||!b)){if(this!==y&&this.layout&&b&&Mm(this.options.animationType,this.layout.layoutBox,b.layoutBox)){v=this.target||bn();const I=pr(this.layout.layoutBox.x);v.x.min=y.target.x.min,v.x.max=v.x.min+I;const R=pr(this.layout.layoutBox.y);v.y.min=y.target.y.min,v.y.max=v.y.min+R}Gr(A,v),ko(A,S),Da(this.projectionDeltaWithTransform,this.layoutCorrected,A,S)}}registerSharedNode(y,A){this.sharedNodes.has(y)||this.sharedNodes.set(y,new JC),this.sharedNodes.get(y).add(A);const b=A.options.initialPromotionConfig;A.promote({transition:b?b.transition:void 0,preserveFollowOpacity:b&&b.shouldPreserveFollowOpacity?b.shouldPreserveFollowOpacity(A):void 0})}isLead(){const y=this.getStack();return y?y.lead===this:!0}getLead(){var A;const{layoutId:y}=this.options;return y?((A=this.getStack())==null?void 0:A.lead)||this:this}getPrevLead(){var A;const{layoutId:y}=this.options;return y?(A=this.getStack())==null?void 0:A.prevLead:void 0}getStack(){const{layoutId:y}=this.options;if(y)return this.root.sharedNodes.get(y)}promote({needsReset:y,transition:A,preserveFollowOpacity:v}={}){const b=this.getStack();b&&b.promote(this,v),y&&(this.projectionDelta=void 0,this.needsReset=!0),A&&this.setOptions({transition:A})}relegate(){const y=this.getStack();return y?y.relegate(this):!1}resetSkewAndRotation(){const{visualElement:y}=this.options;if(!y)return;let A=!1;const{latestValues:v}=y;if((v.z||v.rotate||v.rotateX||v.rotateY||v.rotateZ||v.skewX||v.skewY)&&(A=!0),!A)return;const b={};v.z&&bd("z",y,b,this.animationValues);for(let S=0;S<Ed.length;S++)bd(`rotate${Ed[S]}`,y,b,this.animationValues),bd(`skew${Ed[S]}`,y,b,this.animationValues);y.render();for(const S in b)y.setStaticValue(S,b[S]),this.animationValues&&(this.animationValues[S]=b[S]);y.scheduleRender()}applyProjectionStyles(y,A){if(!this.instance||this.isSVG)return;if(!this.isVisible){y.visibility="hidden";return}const v=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,y.visibility="",y.opacity="",y.pointerEvents=hc(A==null?void 0:A.pointerEvents)||"",y.transform=v?v(this.latestValues,""):"none";return}const b=this.getLead();if(!this.projectionDelta||!this.layout||!b.target){this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=hc(A==null?void 0:A.pointerEvents)||""),this.hasProjected&&!Ys(this.latestValues)&&(y.transform=v?v({},""):"none",this.hasProjected=!1);return}y.visibility="";const S=b.animationValues||b.latestValues;this.applyTransformsToTarget();let I=eE(this.projectionDeltaWithTransform,this.treeScale,S);v&&(I=v(S,I)),y.transform=I;const{x:R,y:D}=this.projectionDelta;y.transformOrigin=`${R.origin*100}% ${D.origin*100}% 0`,b.animationValues?y.opacity=b===this?S.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:S.opacityExit:y.opacity=b===this?S.opacity!==void 0?S.opacity:"":S.opacityExit!==void 0?S.opacityExit:0;for(const L in Ua){if(S[L]===void 0)continue;const{correct:B,applyTo:j,isCSSVariable:V}=Ua[L],W=I==="none"?S[L]:B(S[L],b);if(j){const z=j.length;for(let J=0;J<z;J++)y[j[J]]=W}else V?this.options.visualElement.renderState.vars[L]=W:y[L]=W}this.options.layoutId&&(y.pointerEvents=b===this?hc(A==null?void 0:A.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(y=>{var A;return(A=y.currentAnimation)==null?void 0:A.stop()}),this.root.nodes.forEach(Tp),this.root.sharedNodes.clear()}}}function rE(r){r.updateLayout()}function iE(r){var a;const o=((a=r.resumeFrom)==null?void 0:a.snapshot)||r.snapshot;if(r.isLead()&&r.layout&&o&&r.hasListeners("didUpdate")){const{layoutBox:f,measuredBox:p}=r.layout,{animationType:x}=r.options,y=o.source!==r.layout.source;x==="size"?Xr(I=>{const R=y?o.measuredBox[I]:o.layoutBox[I],D=pr(R);R.min=f[I].min,R.max=R.min+D}):Mm(x,o.layoutBox,f)&&Xr(I=>{const R=y?o.measuredBox[I]:o.layoutBox[I],D=pr(f[I]);R.max=R.min+D,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[I].max=r.relativeTarget[I].min+D)});const A=Po();Da(A,f,o.layoutBox);const v=Po();y?Da(v,r.applyTransform(p,!0),o.measuredBox):Da(v,f,o.layoutBox);const b=!km(A);let S=!1;if(!r.resumeFrom){const I=r.getClosestProjectingParent();if(I&&!I.resumeFrom){const{snapshot:R,layout:D}=I;if(R&&D){const L=bn();Ma(L,o.layoutBox,R.layoutBox);const B=bn();Ma(B,f,D.layoutBox),Pm(L,B)||(S=!0),I.options.layoutRoot&&(r.relativeTarget=B,r.relativeTargetOrigin=L,r.relativeParent=I)}}}r.notifyListeners("didUpdate",{layout:f,snapshot:o,delta:v,layoutDelta:A,hasLayoutChanged:b,hasRelativeLayoutChanged:S})}else if(r.isLead()){const{onExitComplete:f}=r.options;f&&f()}r.options.transition=void 0}function sE(r){r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function oE(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function aE(r){r.clearSnapshot()}function Tp(r){r.clearMeasurements()}function Ip(r){r.isLayoutDirty=!1}function lE(r){const{visualElement:o}=r.options;o&&o.getProps().onBeforeLayoutMeasure&&o.notify("BeforeLayoutMeasure"),r.resetTransform()}function Np(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function cE(r){r.resolveTargetDelta()}function uE(r){r.calcProjection()}function dE(r){r.resetSkewAndRotation()}function fE(r){r.removeLeadSnapshot()}function _p(r,o,a){r.translate=un(o.translate,0,a),r.scale=un(o.scale,1,a),r.origin=o.origin,r.originPoint=o.originPoint}function Rp(r,o,a,f){r.min=un(o.min,a.min,f),r.max=un(o.max,a.max,f)}function hE(r,o,a,f){Rp(r.x,o.x,a.x,f),Rp(r.y,o.y,a.y,f)}function pE(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const gE={duration:.45,ease:[.4,0,.1,1]},kp=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),Pp=kp("applewebkit/")&&!kp("chrome/")?Math.round:Yr;function Op(r){r.min=Pp(r.min),r.max=Pp(r.max)}function mE(r){Op(r.x),Op(r.y)}function Mm(r,o,a){return r==="position"||r==="preserve-aspect"&&!EC(Ap(o),Ap(a),.2)}function xE(r){var o;return r!==r.root&&((o=r.scroll)==null?void 0:o.wasRoot)}const yE=Dm({attachResizeListener:(r,o)=>Wa(r,"resize",o),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ad={current:void 0},Lm=Dm({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!Ad.current){const r=new yE({});r.mount(window),r.setOptions({layoutScroll:!0}),Ad.current=r}return Ad.current},resetTransform:(r,o)=>{r.style.transform=o!==void 0?o:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),wE={pan:{Feature:BC},drag:{Feature:LC,ProjectionNode:Lm,MeasureLayout:Nm}};function Dp(r,o,a){const{props:f}=r;r.animationState&&f.whileHover&&r.animationState.setActive("whileHover",a==="Start");const p="onHover"+a,x=f[p];x&&sn.postRender(()=>x(o,Za(o)))}class vE extends Cs{mount(){const{current:o}=this.node;o&&(this.unmount=Wv(o,(a,f)=>(Dp(this.node,f,"Start"),p=>Dp(this.node,p,"End"))))}unmount(){}}class CE extends Cs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let o=!1;try{o=this.node.current.matches(":focus-visible")}catch{o=!0}!o||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ya(Wa(this.node.current,"focus",()=>this.onFocus()),Wa(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Mp(r,o,a){const{props:f}=r;if(r.current instanceof HTMLButtonElement&&r.current.disabled)return;r.animationState&&f.whileTap&&r.animationState.setActive("whileTap",a==="Start");const p="onTap"+(a==="End"?"":a),x=f[p];x&&sn.postRender(()=>x(o,Za(o)))}class EE extends Cs{mount(){const{current:o}=this.node;o&&(this.unmount=Yv(o,(a,f)=>(Mp(this.node,f,"Start"),(p,{success:x})=>Mp(this.node,p,x?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const qd=new WeakMap,Sd=new WeakMap,bE=r=>{const o=qd.get(r.target);o&&o(r)},AE=r=>{r.forEach(bE)};function SE({root:r,...o}){const a=r||document;Sd.has(a)||Sd.set(a,{});const f=Sd.get(a),p=JSON.stringify(o);return f[p]||(f[p]=new IntersectionObserver(AE,{root:r,...o})),f[p]}function TE(r,o,a){const f=SE(o);return qd.set(r,a),f.observe(r),()=>{qd.delete(r),f.unobserve(r)}}const IE={some:0,all:1};class NE extends Cs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:o={}}=this.node.getProps(),{root:a,margin:f,amount:p="some",once:x}=o,y={root:a?a.current:void 0,rootMargin:f,threshold:typeof p=="number"?p:IE[p]},A=v=>{const{isIntersecting:b}=v;if(this.isInView===b||(this.isInView=b,x&&!b&&this.hasEnteredView))return;b&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",b);const{onViewportEnter:S,onViewportLeave:I}=this.node.getProps(),R=b?S:I;R&&R(v)};return TE(this.node.current,y,A)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:o,prevProps:a}=this.node;["amount","margin","root"].some(_E(o,a))&&this.startObserver()}unmount(){}}function _E({viewport:r={}},{viewport:o={}}={}){return a=>r[a]!==o[a]}const RE={inView:{Feature:NE},tap:{Feature:EE},focus:{Feature:CE},hover:{Feature:vE}},kE={layout:{ProjectionNode:Lm,MeasureLayout:Nm}},PE={...mC,...RE,...wE,...kE},Li=P3(PE,G3),OE=()=>{const{login:r,signup:o,user:a,logout:f,checkAuth:p}=_.useContext(gr),[x,y]=_.useState(""),[A,v]=_.useState(""),[b,S]=_.useState(""),[I,R]=_.useState(null),[D,L]=_.useState(null),[B,j]=_.useState(""),[V,W]=_.useState(0),[z,J]=_.useState({x:0,y:0}),[ne,oe]=_.useState(1),[q,ue]=_.useState(null),[$,Ae]=_.useState(!1),[Oe,ke]=_.useState(!1),[De,Se]=_.useState({}),[Q,Le]=_.useState({}),[pe,ge]=_.useState(!1),[Me,ae]=_.useState(!1),[Y,te]=_.useState(null),be=ar(),ze=Or(),Re=new URLSearchParams(ze.search),fe=Re.get("redirect"),Ye=Re.get("code"),He=fe==="lobby",nt=()=>{const xe="abcdefghijklmnopqrstuvwxyz0123456789";let Fe="";for(let $e=0;$e<10;$e++)Fe+=xe.charAt(Math.floor(Math.random()*xe.length));return Fe};_.useEffect(()=>{if(He&&!x&&!A){const xe=nt(),Fe=nt();y(xe),v(Fe),Le($e=>({...$e,username:!0,password:!0})),Se($e=>({...$e,username:"",password:""})),W(2)}},[He,x,A,b]),_.useEffect(()=>{localStorage.getItem("access_token")&&be(fe==="lobby"?Ye?`/lobby?code=${Ye}`:"/?showLobbyModal=true":fe==="product-selection"?"/product-selection":"/")},[fe,Ye,be]),_.useEffect(()=>{V===2&&b&&me(b)&&(ge(!0),Le(xe=>({...xe,displayName:!0})),Se(xe=>({...xe,displayName:""})))},[V,b]);const Ge=xe=>{const Fe=/^[a-z0-9]+$/;return xe.length>=2&&Fe.test(xe)},ft=xe=>xe.length>=2,me=xe=>xe.length>=2,we=()=>{V<Ct.length-1&&(V===0&&!b&&(S(x),Le(xe=>({...xe,displayName:!0})),Se(xe=>({...xe,displayName:""}))),V===1&&b&&b.length>=2?ge(!0):ge(!1),W(xe=>xe+1))},st=()=>{if(V>0){const xe=V-1;W(xe);const Fe=Ct[xe];if(Fe.validate){const $e=Fe.value;Fe.validate($e)&&ge(!0)}else ge(!0)}},ht=(xe,Fe,$e)=>{$e(xe.target.value);const ct=xe.target.value;Fe(ct)?(Le(Ve=>({...Ve,[Ct[V].id]:!0})),Se(Ve=>({...Ve,[Ct[V].id]:""})),ge(!0)):(Le(Ve=>({...Ve,[Ct[V].id]:!1})),Se(Ve=>({...Ve,[Ct[V].id]:"Must be at least 2 characters"})),ge(!1))},Pt=xe=>{const Fe=xe.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");y(Fe),Ge(Fe)?(Le($e=>({...$e,username:!0})),Se($e=>({...$e,username:""})),ge(!0)):(Le($e=>({...$e,username:!1})),Se($e=>({...$e,username:"Must be at least 2 characters"})),ge(!1))},xt=xe=>{ht(xe,ft,v)},qe=xe=>{ht(xe,me,S)},Je=xe=>{const Fe=xe.target.files[0];if(Fe){const $e=new FileReader;$e.onload=ct=>{const Ve=new Image;Ve.onload=()=>{let At=Ve.width,Wt=Ve.height;const Ht=1500;At>Wt&&At>Ht?(Wt=Wt*Ht/At,At=Ht):Wt>At&&Wt>Ht&&(At=At*Ht/Wt,Wt=Ht);const Gt=document.createElement("canvas");Gt.width=At,Gt.height=Wt,Gt.getContext("2d").drawImage(Ve,0,0,At,Wt);const he=Gt.toDataURL("image/jpeg",.75);R(Fe),L(he),Ae(!0),Le(gt=>({...gt,image:!0})),Se(gt=>({...gt,image:""})),ge(!0)},Ve.src=ct.target.result},$e.readAsDataURL(Fe)}},Nt=(xe,Fe)=>{ue(Fe)},Ie=async()=>{try{const xe=await af(D,q);L(xe),Ae(!1)}catch(xe){console.error("Error cropping the image:",xe),j("Failed to crop image. Please try again.")}},yn=async xe=>{if(xe.preventDefault(),ke(!0),j(""),console.log("Signup attempt - Username:",x,"Password:",A),!x||!A||!b){j("All fields are required"),ke(!1);return}if(!I||!D){j("Your profile picture is required"),ke(!1);return}try{const Fe="/signup",$e=await fetch(window.server_url+Fe,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:x,password:A})}),ct=await $e.json();if(ct.error==="Username already taken")if(He){const Ht=nt(),Gt=nt();y(Ht),v(Gt);const Be=await fetch(window.server_url+Fe,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:Ht,password:Gt})}),he=await Be.json();if(!Be.ok||he.error==="Username already taken"){j("Unable to create account. Please try again."),ke(!1);return}r(he)}else{j("Username is taken"),ke(!1);return}else{if(!$e.ok){j(ct.message||"Signup failed"),ke(!1);return}r(ct)}await p();const Ve=localStorage.getItem("access_token");if(!Ve)throw new Error("Authentication failed");let At=null;if(I)At=D,At=At.split(",")[1];else{const Be=await(await(await fetch("/assets/fakeprofile.png")).blob()).arrayBuffer();At=btoa(new Uint8Array(Be).reduce((he,gt)=>he+String.fromCharCode(gt),""))}if(!(await fetch(`${window.server_url}/update_profile`,{method:"POST",headers:{Authorization:`Bearer ${Ve}`,"Content-Type":"application/json"},body:JSON.stringify({name:b,image_data:At})})).ok)throw new Error("Failed to update profile");await p(),be(fe==="lobby"?Ye?`/lobby?code=${Ye}`:"/?showLobbyModal=true":fe==="product-selection"?"/product-selection":"/")}catch(Fe){console.error("Error:",Fe),j("An error occurred. Please try again.")}ke(!1)},Ct=[{id:"username",label:"Username",value:x,onChange:Pt,type:"text",placeholder:"Enter a username",validate:Ge},{id:"password",label:"Password",value:A,onChange:xt,type:"text",placeholder:"Create a password",validate:ft},{id:"displayName",label:Ye==="demolobby"?"Display Name (Type Any Name)":"Display Name (what people will see)",value:b,onChange:qe,type:"text",placeholder:"Enter your preferred name",validate:me},{id:"image",label:Ye==="demolobby"?"Profile Image (Upload Any Image)":"Upload a Selfie (so people can find you)",type:"file",onChange:Je,accept:"image/*"}];return w.jsxs("div",{className:"signup-container",children:[w.jsx("button",{onClick:()=>be("/"),className:"homescreen-button",children:"Home"}),w.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),w.jsx("h3",{className:"signup-header",children:Ye==="demolobby"?"Join the demo":"Sign Up to Join"}),Ye&&Ye!=="demolobby"&&w.jsxs("h2",{className:"signup-header",children:[Ye," lobby"]}),Ye==="demolobby"&&w.jsx("h2",{className:"signup-header",style:{fontSize:"0.9rem"},children:"Try Reuneo for Free!"}),w.jsxs("p",{className:"login-link-text",children:["Already have an account? ",w.jsx("a",{href:"#",onClick:xe=>{xe.preventDefault(),be("/login")},className:"login-link",children:"Login here"})]}),w.jsxs("div",{className:"step-form-container",children:[w.jsx("div",{className:"step-progress",children:(He?Ct.slice(2):Ct).map((xe,Fe)=>w.jsx("div",{className:`progress-dot ${He?(Fe===V-2?"active":"")+(Fe<V-2?" completed":""):(Fe===V?"active":"")+(Fe<V?" completed":"")}`},Fe))}),w.jsxs("form",{onSubmit:yn,children:[w.jsx(W1,{mode:"wait",initial:!1,children:w.jsxs(Li.div,{initial:{opacity:0,x:8},animate:{opacity:1,x:0},exit:{opacity:0,x:-8},transition:{type:"spring",stiffness:500,damping:25,mass:.3},className:"step active",style:{willChange:"transform, opacity"},children:[w.jsx("div",{className:"step-content",children:w.jsxs(Li.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:[w.jsx("label",{className:"step-label",children:Ct[V].label}),w.jsx(Li.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},transition:{duration:.15,ease:"easeOut"},children:Ct[V].type==="file"?w.jsx("div",{className:"image-upload-container",children:$?w.jsxs("div",{className:"cropper-container",children:[w.jsx("div",{className:"cropper-wrapper",children:w.jsx(of,{image:D,crop:z,zoom:ne,aspect:1,onCropComplete:Nt,onCropChange:J,onZoomChange:oe})}),w.jsxs("div",{className:"cropper-controls",children:[w.jsx("button",{type:"button",onClick:()=>{Ae(!1),L(null),R(null)},className:"cancel-crop-button",children:"Cancel"}),w.jsx("button",{type:"button",onClick:Ie,className:"save-crop-button",children:"Good"})]})]}):w.jsxs(w.Fragment,{children:[w.jsx("input",{type:"file",onChange:Ct[V].onChange,accept:Ct[V].accept,className:"step-input"}),D&&w.jsx("div",{children:w.jsx("img",{src:D,alt:"Profile preview",className:"profile-preview-image"})})]})}):w.jsx("input",{type:Ct[V].type,value:Ct[V].value,onChange:Ct[V].onChange,placeholder:Ct[V].placeholder,className:"step-input",autoFocus:!0})}),w.jsxs(W1,{mode:"wait",children:[De[Ct[V].id]&&w.jsx(Li.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"step-error",children:De[Ct[V].id]}),Q[Ct[V].id]&&w.jsx(Li.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},className:"step-success",children:" Valid"})]})]})}),!$&&w.jsxs("div",{className:"button-container",children:[V>0&&w.jsx(Li.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},type:"button",onClick:st,className:"backz-button",children:" Back"}),pe&&V<Ct.length-1&&w.jsx(Li.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},type:"button",onClick:we,className:"nextz-button",children:"Next "})]})]},V)}),B&&w.jsx(Li.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"error-message",children:B}),V===Ct.length-1&&w.jsx(Li.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},type:"submit",className:"primary-button",disabled:Oe,children:Oe?"Loading...":"Complete Signup"})]})]})]})},DE=5e3,Bm=(r,o=null,a=null)=>{_.useEffect(()=>{const f=async()=>{try{const x=a?`${window.server_url}/display_lobby_metadata?lobby_code=${a}`:`${window.server_url}/display_lobby_metadata`,y=localStorage.getItem("access_token"),A=await fetch(x,{headers:{Authorization:`Bearer ${y}`,lobby_code:a}});if(!A.ok){console.error("Failed to fetch lobby metadata");return}const v=await A.json();r(v.player_count),o&&o(v.lobby_state)}catch(x){console.error("Error fetching lobby metadata:",x)}};f();const p=setInterval(f,DE);return()=>clearInterval(p)},[r,o,a])},$f="currentLobbyCode",Zf="currentLobbyTimestamp",qf="currentLobbyLastValidated",ME=30*60*1e3,LE=3*60*1e3,BE=r=>{localStorage.setItem($f,r),localStorage.setItem(Zf,Date.now().toString()),console.log(`Stored lobby code: ${r}`)},jE=()=>{const r=localStorage.getItem($f),o=localStorage.getItem(Zf);return!r||!o?null:Date.now()-parseInt(o)>ME?(bc(),console.log("Lobby code expired, cleared from storage"),null):r},FE=()=>{const r=localStorage.getItem(qf);return r?Date.now()-parseInt(r)>LE:!0},VE=()=>{localStorage.setItem(qf,Date.now().toString())},bc=()=>{localStorage.removeItem($f),localStorage.removeItem(Zf),localStorage.removeItem(qf),console.log("Cleared lobby storage")},zE=()=>{const[r,o]=_.useState(!1),[a,f]=_.useState(!1),[p,x]=_.useState(""),[y,A]=_.useState(""),[v,b]=_.useState(""),[S,I]=_.useState(null);hf();const{user:R,userProfile:D,checkAuth:L,permissions:B}=_.useContext(gr),[j,V]=_.useState(null),[W,z]=_.useState(null),[J,ne]=_.useState([]),[oe,q]=_.useState(!1),[ue,$]=_.useState(null),Ae=ar();Bm(V,z);const[Oe,ke]=_.useState(!1);_.useRef(null);const De=_.useRef(null),Se=async(ae=!1)=>{const Y=jE();if(!Y||!R){$(null);return}if($(Y),ae||FE())try{const te=localStorage.getItem("access_token"),be=await fetch(`${window.server_url}/display_lobby_metadata?lobby_code=${Y}`,{headers:{Authorization:`Bearer ${te}`,lobby_code:Y}});if(be.ok){const ze=await be.json();ze.status==="error"||ze.lobby_state==="terminated"?(bc(),$(null)):VE()}else bc(),$(null)}catch(te){console.error("Error validating current lobby:",te),$(null)}},Q=async()=>{if(R){q(!0);try{const ae=localStorage.getItem("access_token"),Y=await fetch(window.server_url+"/view_my_active_lobbies",{headers:{Authorization:`Bearer ${ae}`}});if(Y.ok){const te=await Y.json();console.log("User's active lobbies:",te),te&&te.lobbies&&Array.isArray(te.lobbies)?ne(te.lobbies):ne([])}else console.error("Failed to fetch user's active lobbies"),ne([])}catch(ae){console.error("Error fetching user's active lobbies:",ae),ne([])}finally{q(!1)}}};_.useEffect(()=>{R?(Q(),Se(!0)):$(null)},[R]),_.useEffect(()=>{L()},[]),_.useEffect(()=>{if(new URLSearchParams(window.location.search).get("showLobbyModal")==="true"&&R){f(!0);const te=window.location.pathname;window.history.replaceState({},"",te)}},[R]);const Le=ae=>{(B==="admin"||B==="organizer")&&Ae(`/admin_lobby_view?code=${ae}`)},pe=ae=>{ae.preventDefault();const te=new FormData(ae.target).get("name");if(!te||te.trim()===""){A("Please enter a lobby code");return}const be=te.toLowerCase().replace(/[^a-z0-9]/g,"");if(be===""){A("Lobby code must contain only letters and numbers");return}b(be),f(!1),console.log(be),x(be),Ae(`/lobby?code=${be}`),x(""),A("")},ge=()=>{ke(!1),De.current&&(De.current.clear(),De.current=null)},Me=()=>a?w.jsx("div",{className:"lobby-modal-overlay",children:w.jsxs("div",{className:"lobby-modal-container",children:[w.jsx("button",{onClick:()=>{f(!1),x(""),A(""),ge()},className:"lobby-modal-close",children:""}),w.jsx("h2",{className:"lobby-modal-title",children:"Join Lobby"}),w.jsxs("form",{onSubmit:pe,className:"lobby-form",children:[w.jsxs("div",{className:"lobby-input-container",children:[w.jsx("input",{type:"text",name:"name",placeholder:"Enter Lobby Code",className:"lobby-input",pattern:"[a-zA-Z0-9]+",title:"Only letters and numbers are allowed",required:!0}),y&&w.jsx("div",{className:"lobby-error-message",children:y})]}),w.jsx("button",{type:"submit",className:"lobby-submit-button",children:"Join"})]})]})}):null;return w.jsxs("div",{style:{position:"relative",height:"var(--viewport-height)",overflow:"hidden"},children:[w.jsxs("video",{className:"background-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,poster:"/assets/demo_app_home_video_cover.jpg",children:[w.jsx("source",{src:"/assets/demo_app_home_video_X2_small.mp4",type:"video/mp4"}),w.jsx("source",{src:"/assets/app_home_video_2.webm",type:"video/webm"}),w.jsx("img",{src:"/assets/demo_app_home_video_cover.jpg",alt:"Background fallback",style:{width:"100%",height:"100%",objectFit:"cover"}}),"Your browser does not support the video tag."]}),w.jsxs("div",{style:{position:"relative",zIndex:1,color:"white",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[w.jsx("div",{style:{position:"absolute",top:"0",left:"50%",transform:"translateX(-50%)"},children:w.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Logo",style:{width:"110px",height:"110px",objectFit:"contain"}})}),w.jsx("div",{style:{marginTop:"10%",display:"flex",flexDirection:"column"},children:w.jsx(ew,{user:R,onProfileClick:()=>o(!0)})}),w.jsx("div",{style:{position:"absolute",top:"85px",display:B==="admin"||B==="organizer"?"flex":"none",justifyContent:"flex-end",width:"94%",left:"3%",alignItems:"center"},children:(B==="admin"||B==="organizer")&&w.jsx("button",{className:"login-button",onClick:()=>Ae("/organizer-account-details"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:ae=>{ae.currentTarget.style.transform="translateY(-2px)",ae.currentTarget.style.boxShadow="0 2px 8px rgba(74, 58, 58, 0.7)"},onMouseLeave:ae=>{ae.currentTarget.style.transform="translateY(0)",ae.currentTarget.style.boxShadow="0 0 4px rgba(74, 58, 58, 0.5)"},children:w.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Settings"})})}),(B==="admin"||B==="organizer")&&R==="topaz"&&w.jsx("div",{style:{position:"absolute",top:"120px",right:"20px",zIndex:10},children:w.jsx("button",{className:"master-lobbies-button",onClick:()=>Ae("/master_lobby_view"),children:"Lobbies"})}),r&&w.jsx(A2,{onSubmit:ae=>{o(!1)},onClose:()=>o(!1),existingProfile:D}),w.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",width:"90%",maxWidth:"1200px",textAlign:"center",marginLeft:"auto",marginRight:"auto",zIndex:1,top:"50%"},children:R?w.jsx("h2",{className:"welcome-header",style:{color:"#ffffff",fontSize:"1rem",textTransform:"uppercase",letterSpacing:"0.1em",textShadow:"4px 4px 8px rgba(0,0,0,0.9)",margin:0},children:R&&D&&(B==="admin"||B==="organizer")?(()=>{const ae="Create a Lobby",Y=D?D.name.slice(0,15):"";return w.jsxs(w.Fragment,{children:[ae.split("").map((te,be)=>w.jsx("span",{style:{"--i":be+1,marginRight:te===" "?"0.5em":"1px"},children:te},`main-${be}`)),w.jsx("br",{}),Y&&Y.split("").map((te,be)=>w.jsx("span",{style:{"--i":be+1,marginRight:te===" "?"0.5em":"1px"},children:te},`name-${be}`))]})})():(()=>{const ae="Join the Experience",Y=D?D.name.slice(0,15):"";return w.jsxs(w.Fragment,{children:[ae.split("").map((te,be)=>w.jsx("span",{style:{"--i":be+1,marginRight:te===" "?"0.5em":"1px"},children:te},`main-${be}`)),w.jsx("br",{}),Y&&Y.split("").map((te,be)=>w.jsx("span",{style:{"--i":be+1,marginRight:te===" "?"0.5em":"1px"},children:te},`name-${be}`))]})})()}):w.jsx("button",{className:"primary-button join-lobby-button",onClick:()=>window.location.href="https://reuneo.app/access",style:{padding:"16px 20px",backgroundColor:"transparent",color:"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0 auto",display:"block",position:"relative",zIndex:1,textAlign:"center",outline:"none",":hover":{transform:"scale(1.02)"}},children:w.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Become Organizer"})})}),R&&w.jsx("div",{style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",width:"94%",display:"flex",flexDirection:"row",justifyContent:"center",gap:"1.5rem"},children:w.jsx("div",{className:"event-item",style:{width:"auto",maxWidth:"none",margin:"0",padding:"10px 20px",borderRadius:"16px",marginBottom:"20px",cursor:"pointer",opacity:1,display:"flex",flexDirection:"row",alignItems:"center",gap:"1.5rem",":hover":{transform:"translateY(-5px)"}},children:w.jsxs("div",{style:{display:"flex",gap:"1.5rem",flexDirection:"row",alignItems:"center"},children:[w.jsx("button",{className:`primary-button ${B!=="admin"&&B!=="organizer"?"join-lobby-button":""}`,onClick:()=>R?f(!0):Ae("/signup?redirect=lobby"),disabled:j===null||W==="terminate",style:{opacity:1,cursor:j===null||W==="terminate"?"not-allowed":"pointer",padding:"16px 20px",backgroundColor:B!=="admin"&&B!=="organizer"?"transparent":"#144dff",color:"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0",display:"block",position:"relative",zIndex:1,textAlign:"center",outline:B!=="admin"&&B!=="organizer"?"none":"1px solid rgba(58, 53, 53, 0.7)",":hover":{backgroundColor:B!=="admin"&&B!=="organizer"?"transparent":"#535bf2",transform:"scale(1.02)"}},children:w.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Join Lobby"})}),R&&B!=="admin"&&B!=="organizer"&&w.jsx("button",{className:"primary-button join-lobby-button",onClick:()=>window.location.href="https://reuneo.com/organizer-signup",style:{padding:"16px 20px",backgroundColor:"transparent",color:"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0",display:"block",position:"relative",zIndex:1,textAlign:"center",outline:"none",":hover":{transform:"scale(1.02)"}},children:w.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Become Organizer"})}),(B==="admin"||B==="organizer")&&w.jsx("button",{className:`primary-button ${B==="admin"||B==="organizer"?"create-lobby-button":""}`,onClick:J.length>0?void 0:()=>Ae("/create_lobby"),disabled:J.length>0,title:J.length>0?"You already have an active lobby. Close it before creating a new one.":"Create a new lobby",style:{padding:"16px 20px",backgroundColor:J.length>0?"rgba(128, 128, 128, 0.3)":"transparent",color:J.length>0?"rgba(255, 255, 255, 0.5)":"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:J.length>0?"0 2px 3px rgba(0, 0, 0, 0.2)":"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0",position:"relative",zIndex:1,textAlign:"center",cursor:J.length>0?"not-allowed":"pointer",opacity:J.length>0?.6:1,":hover":{transform:J.length>0?"none":"scale(1.02)"}},children:w.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Create Lobby"})})]})})}),ue&&!((B==="admin"||B==="organizer")&&J.length>0)&&w.jsx("div",{className:"events-list",style:{position:"absolute",bottom:"calc(20px + 120px + 10px)",left:"50%",transform:"translateX(-50%)",width:"44%",height:"15%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.05), rgba(83, 91, 242, 0.05))",borderRadius:"30px",padding:"1rem",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",justifyContent:"center",alignItems:"center"},children:w.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",perspective:"1000px"},children:w.jsxs("div",{className:"card",style:{width:"calc(100% - 2rem)",maxWidth:"200px",minWidth:"150px",background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",boxShadow:"0 10px 30px rgba(20, 77, 255, 0.15)",border:"1px solid rgba(20, 77, 255, 0.2)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",padding:"1rem 1rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",transformStyle:"preserve-3d","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(20, 77, 255, 0.1), rgba(83, 91, 242, 0.1))",opacity:0,transition:"opacity 0.4s ease"}},onClick:()=>Ae(`/lobby?code=${ue}`),onMouseEnter:ae=>{ae.currentTarget.style.transform="translateY(-10px) rotateX(5deg)",ae.currentTarget.style.boxShadow="0 20px 40px rgba(20, 77, 255, 0.25)",ae.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.4)",ae.currentTarget.style.background="rgba(255, 255, 255, 0.98)"},onMouseLeave:ae=>{ae.currentTarget.style.transform="translateY(0) rotateX(0)",ae.currentTarget.style.boxShadow="0 10px 30px rgba(20, 77, 255, 0.15)",ae.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.2)",ae.currentTarget.style.background="rgba(255, 255, 255, 0.95)"},children:[w.jsx("div",{className:"glow-button",style:{width:"30px",height:"30px",borderRadius:"50%",background:"linear-gradient(135deg, #144dff, #535bf2)",marginBottom:".5rem",marginTop:"-1rem",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:".8rem",boxShadow:"0 8px 20px rgba(20, 77, 255, 0.3)",transition:"all 0.4s ease",position:"relative","&::after":{content:'""',position:"absolute",top:"-5px",left:"-5px",right:"-5px",bottom:"-5px",borderRadius:"50%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.2), rgba(83, 91, 242, 0.2))",zIndex:-1,animation:"pulse 2s infinite"}},children:ue.charAt(0).toUpperCase()}),w.jsxs("h3",{style:{marginTop:"0.5rem",color:"#144dff",fontWeight:"700",fontSize:".9em",fontFamily:"Helvetica",textAlign:"center",textShadow:"0 2px 4px rgba(20, 77, 255, 0.1)",letterSpacing:"0.5px"},children:["Return to ",ue]})]})})}),(B==="admin"||B==="organizer")&&J.length>0&&w.jsx("div",{className:"events-list",style:{position:"absolute",bottom:ue&&!((B==="admin"||B==="organizer")&&J.length>0)?"calc(20px + 120px + 10px + 15% + 10px)":"calc(20px + 120px + 10px)",left:"50%",transform:"translateX(-50%)",width:"44%",height:"15%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.05), rgba(83, 91, 242, 0.05))",borderRadius:"30px",padding:"1rem",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",justifyContent:"center",alignItems:"center"},children:oe?w.jsx("div",{style:{textAlign:"center",color:"white"},children:w.jsx("p",{children:"Loading your lobbies..."})}):J.length>0?w.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",perspective:"1000px"},children:J.map((ae,Y)=>w.jsxs("div",{className:"card",style:{width:"calc(100% - 2rem)",maxWidth:"200px",minWidth:"150px",background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",boxShadow:"0 10px 30px rgba(20, 77, 255, 0.15)",border:"1px solid rgba(20, 77, 255, 0.2)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",padding:"1rem 1rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",transformStyle:"preserve-3d","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(20, 77, 255, 0.1), rgba(83, 91, 242, 0.1))",opacity:0,transition:"opacity 0.4s ease"}},onClick:()=>Le(ae),onMouseEnter:te=>{te.currentTarget.style.transform="translateY(-10px) rotateX(5deg)",te.currentTarget.style.boxShadow="0 20px 40px rgba(20, 77, 255, 0.25)",te.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.4)",te.currentTarget.style.background="rgba(255, 255, 255, 0.98)"},onMouseLeave:te=>{te.currentTarget.style.transform="translateY(0) rotateX(0)",te.currentTarget.style.boxShadow="0 10px 30px rgba(20, 77, 255, 0.15)",te.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.2)",te.currentTarget.style.background="rgba(255, 255, 255, 0.95)"},children:[w.jsx("div",{className:"glow-button",style:{width:"30px",height:"30px",borderRadius:"50%",background:"linear-gradient(135deg, #144dff, #535bf2)",marginBottom:".5rem",marginTop:"-1rem",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:".8rem",boxShadow:"0 8px 20px rgba(20, 77, 255, 0.3)",transition:"all 0.4s ease",position:"relative","&::after":{content:'""',position:"absolute",top:"-5px",left:"-5px",right:"-5px",bottom:"-5px",borderRadius:"50%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.2), rgba(83, 91, 242, 0.2))",zIndex:-1,animation:"pulse 2s infinite"}},children:ae&&ae.length>0?ae.charAt(0).toUpperCase():"?"}),w.jsxs("h3",{style:{marginTop:"0.5rem",color:"#144dff",fontWeight:"700",fontSize:".9em",fontFamily:"Helvetica",textAlign:"center",textShadow:"0 2px 4px rgba(20, 77, 255, 0.1)",letterSpacing:"0.5px"},children:["Lobby ",ae||"Unknown"]})]},Y))}):w.jsx("div",{style:{}})})]}),w.jsx(Me,{})]})};function UE(){const{pathname:r}=Or();return _.useEffect(()=>{window.scrollTo(0,0)},[r]),null}function WE(){const{pathname:r}=Or(),o=r.startsWith("/organizer-dashboard");return _.useEffect(()=>{const a=document.getElementById("root"),f=document.body;return o?(a==null||a.classList.add("dashboard-view"),f==null||f.classList.add("dashboard-view")):(a==null||a.classList.remove("dashboard-view"),f==null||f.classList.remove("dashboard-view")),()=>{a==null||a.classList.remove("dashboard-view"),f==null||f.classList.remove("dashboard-view")}},[r,o]),null}const HE=()=>{const{login:r,signup:o,user:a,logout:f,checkAuth:p}=_.useContext(gr),[x,y]=_.useState(""),[A,v]=_.useState(""),[b,S]=_.useState(""),[I,R]=_.useState(""),[D,L]=_.useState(!0),[B,j]=_.useState({}),[V,W]=_.useState(!1),z=ar(),J=ue=>{const $=/^[a-z0-9]+$/;return ue.length>=2&&$.test(ue)},ne=ue=>{const $=ue.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");y($),$.length>0?W(!0):W(!1),J($)?j(Ae=>({...Ae,username:""})):j(Ae=>({...Ae,username:" "}))},oe=ue=>{const $=ue.target.value.toLowerCase();v($)},q=async ue=>{if(ue.preventDefault(),R(""),!J(x)){R("Please enter a valid username");return}try{const $=D?"/login":"/signup",Ae=await fetch(window.server_url+$,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:x,password:A}),mode:"cors"});if(Ae.ok){const Oe=await Ae.json();r(Oe),p(),z("/")}else{const Oe=await Ae.json();R(Oe.message||`${D?"Login":"Signup"} failed`)}}catch($){R("Network error occurred. Please try again."),console.error("Error:",$)}};return w.jsxs("div",{className:"login-container",children:[w.jsx("button",{onClick:()=>z("/"),className:"homescreen-button",children:"Home"}),w.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),w.jsx("h1",{className:"login-header",children:"Login"}),w.jsxs("div",{className:"login-signup-form",children:[I&&w.jsx("div",{className:"error-message",children:I}),w.jsxs("form",{onSubmit:q,children:[w.jsxs("div",{className:"form-group",children:[w.jsx("input",{type:"text",placeholder:"Username",className:"login-input",value:x,onChange:ne,required:!0}),V&&w.jsx("div",{className:"step-success",children:"lowercase letters and numbers only"})]}),w.jsx("div",{className:"form-group",children:w.jsx("input",{type:"text",placeholder:"Password",className:"login-input",value:A,onChange:oe,required:!0})}),w.jsx("button",{type:"submit",className:"login-primary-button",children:"Login"})]})]})]})},GE=()=>{const r=ar(),{logout:o}=_.useContext(gr);return localStorage.removeItem("access_token"),_.useEffect(()=>{console.log("LogoutPage useEffect"),setTimeout(()=>{o(),r("/")},100)},[]),w.jsx("div",{children:"Logged out redirecting to homescreen"})};var XE=Object.defineProperty,Ac=Object.getOwnPropertySymbols,jm=Object.prototype.hasOwnProperty,Fm=Object.prototype.propertyIsEnumerable,Lp=(r,o,a)=>o in r?XE(r,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[o]=a,Qd=(r,o)=>{for(var a in o||(o={}))jm.call(o,a)&&Lp(r,a,o[a]);if(Ac)for(var a of Ac(o))Fm.call(o,a)&&Lp(r,a,o[a]);return r},Jd=(r,o)=>{var a={};for(var f in r)jm.call(r,f)&&o.indexOf(f)<0&&(a[f]=r[f]);if(r!=null&&Ac)for(var f of Ac(r))o.indexOf(f)<0&&Fm.call(r,f)&&(a[f]=r[f]);return a};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Js;(r=>{const o=class Dt{constructor(v,b,S,I){if(this.version=v,this.errorCorrectionLevel=b,this.modules=[],this.isFunction=[],v<Dt.MIN_VERSION||v>Dt.MAX_VERSION)throw new RangeError("Version value out of range");if(I<-1||I>7)throw new RangeError("Mask value out of range");this.size=v*4+17;let R=[];for(let L=0;L<this.size;L++)R.push(!1);for(let L=0;L<this.size;L++)this.modules.push(R.slice()),this.isFunction.push(R.slice());this.drawFunctionPatterns();const D=this.addEccAndInterleave(S);if(this.drawCodewords(D),I==-1){let L=1e9;for(let B=0;B<8;B++){this.applyMask(B),this.drawFormatBits(B);const j=this.getPenaltyScore();j<L&&(I=B,L=j),this.applyMask(B)}}p(0<=I&&I<=7),this.mask=I,this.applyMask(I),this.drawFormatBits(I),this.isFunction=[]}static encodeText(v,b){const S=r.QrSegment.makeSegments(v);return Dt.encodeSegments(S,b)}static encodeBinary(v,b){const S=r.QrSegment.makeBytes(v);return Dt.encodeSegments([S],b)}static encodeSegments(v,b,S=1,I=40,R=-1,D=!0){if(!(Dt.MIN_VERSION<=S&&S<=I&&I<=Dt.MAX_VERSION)||R<-1||R>7)throw new RangeError("Invalid value");let L,B;for(L=S;;L++){const z=Dt.getNumDataCodewords(L,b)*8,J=y.getTotalBits(v,L);if(J<=z){B=J;break}if(L>=I)throw new RangeError("Data too long")}for(const z of[Dt.Ecc.MEDIUM,Dt.Ecc.QUARTILE,Dt.Ecc.HIGH])D&&B<=Dt.getNumDataCodewords(L,z)*8&&(b=z);let j=[];for(const z of v){a(z.mode.modeBits,4,j),a(z.numChars,z.mode.numCharCountBits(L),j);for(const J of z.getData())j.push(J)}p(j.length==B);const V=Dt.getNumDataCodewords(L,b)*8;p(j.length<=V),a(0,Math.min(4,V-j.length),j),a(0,(8-j.length%8)%8,j),p(j.length%8==0);for(let z=236;j.length<V;z^=253)a(z,8,j);let W=[];for(;W.length*8<j.length;)W.push(0);return j.forEach((z,J)=>W[J>>>3]|=z<<7-(J&7)),new Dt(L,b,W,R)}getModule(v,b){return 0<=v&&v<this.size&&0<=b&&b<this.size&&this.modules[b][v]}getModules(){return this.modules}drawFunctionPatterns(){for(let S=0;S<this.size;S++)this.setFunctionModule(6,S,S%2==0),this.setFunctionModule(S,6,S%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const v=this.getAlignmentPatternPositions(),b=v.length;for(let S=0;S<b;S++)for(let I=0;I<b;I++)S==0&&I==0||S==0&&I==b-1||S==b-1&&I==0||this.drawAlignmentPattern(v[S],v[I]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(v){const b=this.errorCorrectionLevel.formatBits<<3|v;let S=b;for(let R=0;R<10;R++)S=S<<1^(S>>>9)*1335;const I=(b<<10|S)^21522;p(I>>>15==0);for(let R=0;R<=5;R++)this.setFunctionModule(8,R,f(I,R));this.setFunctionModule(8,7,f(I,6)),this.setFunctionModule(8,8,f(I,7)),this.setFunctionModule(7,8,f(I,8));for(let R=9;R<15;R++)this.setFunctionModule(14-R,8,f(I,R));for(let R=0;R<8;R++)this.setFunctionModule(this.size-1-R,8,f(I,R));for(let R=8;R<15;R++)this.setFunctionModule(8,this.size-15+R,f(I,R));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let v=this.version;for(let S=0;S<12;S++)v=v<<1^(v>>>11)*7973;const b=this.version<<12|v;p(b>>>18==0);for(let S=0;S<18;S++){const I=f(b,S),R=this.size-11+S%3,D=Math.floor(S/3);this.setFunctionModule(R,D,I),this.setFunctionModule(D,R,I)}}drawFinderPattern(v,b){for(let S=-4;S<=4;S++)for(let I=-4;I<=4;I++){const R=Math.max(Math.abs(I),Math.abs(S)),D=v+I,L=b+S;0<=D&&D<this.size&&0<=L&&L<this.size&&this.setFunctionModule(D,L,R!=2&&R!=4)}}drawAlignmentPattern(v,b){for(let S=-2;S<=2;S++)for(let I=-2;I<=2;I++)this.setFunctionModule(v+I,b+S,Math.max(Math.abs(I),Math.abs(S))!=1)}setFunctionModule(v,b,S){this.modules[b][v]=S,this.isFunction[b][v]=!0}addEccAndInterleave(v){const b=this.version,S=this.errorCorrectionLevel;if(v.length!=Dt.getNumDataCodewords(b,S))throw new RangeError("Invalid argument");const I=Dt.NUM_ERROR_CORRECTION_BLOCKS[S.ordinal][b],R=Dt.ECC_CODEWORDS_PER_BLOCK[S.ordinal][b],D=Math.floor(Dt.getNumRawDataModules(b)/8),L=I-D%I,B=Math.floor(D/I);let j=[];const V=Dt.reedSolomonComputeDivisor(R);for(let z=0,J=0;z<I;z++){let ne=v.slice(J,J+B-R+(z<L?0:1));J+=ne.length;const oe=Dt.reedSolomonComputeRemainder(ne,V);z<L&&ne.push(0),j.push(ne.concat(oe))}let W=[];for(let z=0;z<j[0].length;z++)j.forEach((J,ne)=>{(z!=B-R||ne>=L)&&W.push(J[z])});return p(W.length==D),W}drawCodewords(v){if(v.length!=Math.floor(Dt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let b=0;for(let S=this.size-1;S>=1;S-=2){S==6&&(S=5);for(let I=0;I<this.size;I++)for(let R=0;R<2;R++){const D=S-R,B=(S+1&2)==0?this.size-1-I:I;!this.isFunction[B][D]&&b<v.length*8&&(this.modules[B][D]=f(v[b>>>3],7-(b&7)),b++)}}p(b==v.length*8)}applyMask(v){if(v<0||v>7)throw new RangeError("Mask value out of range");for(let b=0;b<this.size;b++)for(let S=0;S<this.size;S++){let I;switch(v){case 0:I=(S+b)%2==0;break;case 1:I=b%2==0;break;case 2:I=S%3==0;break;case 3:I=(S+b)%3==0;break;case 4:I=(Math.floor(S/3)+Math.floor(b/2))%2==0;break;case 5:I=S*b%2+S*b%3==0;break;case 6:I=(S*b%2+S*b%3)%2==0;break;case 7:I=((S+b)%2+S*b%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[b][S]&&I&&(this.modules[b][S]=!this.modules[b][S])}}getPenaltyScore(){let v=0;for(let R=0;R<this.size;R++){let D=!1,L=0,B=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[R][j]==D?(L++,L==5?v+=Dt.PENALTY_N1:L>5&&v++):(this.finderPenaltyAddHistory(L,B),D||(v+=this.finderPenaltyCountPatterns(B)*Dt.PENALTY_N3),D=this.modules[R][j],L=1);v+=this.finderPenaltyTerminateAndCount(D,L,B)*Dt.PENALTY_N3}for(let R=0;R<this.size;R++){let D=!1,L=0,B=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[j][R]==D?(L++,L==5?v+=Dt.PENALTY_N1:L>5&&v++):(this.finderPenaltyAddHistory(L,B),D||(v+=this.finderPenaltyCountPatterns(B)*Dt.PENALTY_N3),D=this.modules[j][R],L=1);v+=this.finderPenaltyTerminateAndCount(D,L,B)*Dt.PENALTY_N3}for(let R=0;R<this.size-1;R++)for(let D=0;D<this.size-1;D++){const L=this.modules[R][D];L==this.modules[R][D+1]&&L==this.modules[R+1][D]&&L==this.modules[R+1][D+1]&&(v+=Dt.PENALTY_N2)}let b=0;for(const R of this.modules)b=R.reduce((D,L)=>D+(L?1:0),b);const S=this.size*this.size,I=Math.ceil(Math.abs(b*20-S*10)/S)-1;return p(0<=I&&I<=9),v+=I*Dt.PENALTY_N4,p(0<=v&&v<=2568888),v}getAlignmentPatternPositions(){if(this.version==1)return[];{const v=Math.floor(this.version/7)+2,b=this.version==32?26:Math.ceil((this.version*4+4)/(v*2-2))*2;let S=[6];for(let I=this.size-7;S.length<v;I-=b)S.splice(1,0,I);return S}}static getNumRawDataModules(v){if(v<Dt.MIN_VERSION||v>Dt.MAX_VERSION)throw new RangeError("Version number out of range");let b=(16*v+128)*v+64;if(v>=2){const S=Math.floor(v/7)+2;b-=(25*S-10)*S-55,v>=7&&(b-=36)}return p(208<=b&&b<=29648),b}static getNumDataCodewords(v,b){return Math.floor(Dt.getNumRawDataModules(v)/8)-Dt.ECC_CODEWORDS_PER_BLOCK[b.ordinal][v]*Dt.NUM_ERROR_CORRECTION_BLOCKS[b.ordinal][v]}static reedSolomonComputeDivisor(v){if(v<1||v>255)throw new RangeError("Degree out of range");let b=[];for(let I=0;I<v-1;I++)b.push(0);b.push(1);let S=1;for(let I=0;I<v;I++){for(let R=0;R<b.length;R++)b[R]=Dt.reedSolomonMultiply(b[R],S),R+1<b.length&&(b[R]^=b[R+1]);S=Dt.reedSolomonMultiply(S,2)}return b}static reedSolomonComputeRemainder(v,b){let S=b.map(I=>0);for(const I of v){const R=I^S.shift();S.push(0),b.forEach((D,L)=>S[L]^=Dt.reedSolomonMultiply(D,R))}return S}static reedSolomonMultiply(v,b){if(v>>>8||b>>>8)throw new RangeError("Byte out of range");let S=0;for(let I=7;I>=0;I--)S=S<<1^(S>>>7)*285,S^=(b>>>I&1)*v;return p(S>>>8==0),S}finderPenaltyCountPatterns(v){const b=v[1];p(b<=this.size*3);const S=b>0&&v[2]==b&&v[3]==b*3&&v[4]==b&&v[5]==b;return(S&&v[0]>=b*4&&v[6]>=b?1:0)+(S&&v[6]>=b*4&&v[0]>=b?1:0)}finderPenaltyTerminateAndCount(v,b,S){return v&&(this.finderPenaltyAddHistory(b,S),b=0),b+=this.size,this.finderPenaltyAddHistory(b,S),this.finderPenaltyCountPatterns(S)}finderPenaltyAddHistory(v,b){b[0]==0&&(v+=this.size),b.pop(),b.unshift(v)}};o.MIN_VERSION=1,o.MAX_VERSION=40,o.PENALTY_N1=3,o.PENALTY_N2=3,o.PENALTY_N3=40,o.PENALTY_N4=10,o.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],o.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],r.QrCode=o;function a(A,v,b){if(v<0||v>31||A>>>v)throw new RangeError("Value out of range");for(let S=v-1;S>=0;S--)b.push(A>>>S&1)}function f(A,v){return(A>>>v&1)!=0}function p(A){if(!A)throw new Error("Assertion error")}const x=class mn{constructor(v,b,S){if(this.mode=v,this.numChars=b,this.bitData=S,b<0)throw new RangeError("Invalid argument");this.bitData=S.slice()}static makeBytes(v){let b=[];for(const S of v)a(S,8,b);return new mn(mn.Mode.BYTE,v.length,b)}static makeNumeric(v){if(!mn.isNumeric(v))throw new RangeError("String contains non-numeric characters");let b=[];for(let S=0;S<v.length;){const I=Math.min(v.length-S,3);a(parseInt(v.substring(S,S+I),10),I*3+1,b),S+=I}return new mn(mn.Mode.NUMERIC,v.length,b)}static makeAlphanumeric(v){if(!mn.isAlphanumeric(v))throw new RangeError("String contains unencodable characters in alphanumeric mode");let b=[],S;for(S=0;S+2<=v.length;S+=2){let I=mn.ALPHANUMERIC_CHARSET.indexOf(v.charAt(S))*45;I+=mn.ALPHANUMERIC_CHARSET.indexOf(v.charAt(S+1)),a(I,11,b)}return S<v.length&&a(mn.ALPHANUMERIC_CHARSET.indexOf(v.charAt(S)),6,b),new mn(mn.Mode.ALPHANUMERIC,v.length,b)}static makeSegments(v){return v==""?[]:mn.isNumeric(v)?[mn.makeNumeric(v)]:mn.isAlphanumeric(v)?[mn.makeAlphanumeric(v)]:[mn.makeBytes(mn.toUtf8ByteArray(v))]}static makeEci(v){let b=[];if(v<0)throw new RangeError("ECI assignment value out of range");if(v<128)a(v,8,b);else if(v<16384)a(2,2,b),a(v,14,b);else if(v<1e6)a(6,3,b),a(v,21,b);else throw new RangeError("ECI assignment value out of range");return new mn(mn.Mode.ECI,0,b)}static isNumeric(v){return mn.NUMERIC_REGEX.test(v)}static isAlphanumeric(v){return mn.ALPHANUMERIC_REGEX.test(v)}getData(){return this.bitData.slice()}static getTotalBits(v,b){let S=0;for(const I of v){const R=I.mode.numCharCountBits(b);if(I.numChars>=1<<R)return 1/0;S+=4+R+I.bitData.length}return S}static toUtf8ByteArray(v){v=encodeURI(v);let b=[];for(let S=0;S<v.length;S++)v.charAt(S)!="%"?b.push(v.charCodeAt(S)):(b.push(parseInt(v.substring(S+1,S+3),16)),S+=2);return b}};x.NUMERIC_REGEX=/^[0-9]*$/,x.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,x.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let y=x;r.QrSegment=x})(Js||(Js={}));(r=>{(o=>{const a=class{constructor(p,x){this.ordinal=p,this.formatBits=x}};a.LOW=new a(0,1),a.MEDIUM=new a(1,0),a.QUARTILE=new a(2,3),a.HIGH=new a(3,2),o.Ecc=a})(r.QrCode||(r.QrCode={}))})(Js||(Js={}));(r=>{(o=>{const a=class{constructor(p,x){this.modeBits=p,this.numBitsCharCount=x}numCharCountBits(p){return this.numBitsCharCount[Math.floor((p+7)/17)]}};a.NUMERIC=new a(1,[10,12,14]),a.ALPHANUMERIC=new a(2,[9,11,13]),a.BYTE=new a(4,[8,16,16]),a.KANJI=new a(8,[8,10,12]),a.ECI=new a(7,[0,0,0]),o.Mode=a})(r.QrSegment||(r.QrSegment={}))})(Js||(Js={}));var Oo=Js;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var YE={L:Oo.QrCode.Ecc.LOW,M:Oo.QrCode.Ecc.MEDIUM,Q:Oo.QrCode.Ecc.QUARTILE,H:Oo.QrCode.Ecc.HIGH},Vm=128,zm="L",Um="#FFFFFF",Wm="#000000",Hm=!1,Gm=1,KE=4,$E=0,ZE=.1;function Xm(r,o=0){const a=[];return r.forEach(function(f,p){let x=null;f.forEach(function(y,A){if(!y&&x!==null){a.push(`M${x+o} ${p+o}h${A-x}v1H${x+o}z`),x=null;return}if(A===f.length-1){if(!y)return;x===null?a.push(`M${A+o},${p+o} h1v1H${A+o}z`):a.push(`M${x+o},${p+o} h${A+1-x}v1H${x+o}z`);return}y&&x===null&&(x=A)})}),a.join("")}function Ym(r,o){return r.slice().map((a,f)=>f<o.y||f>=o.y+o.h?a:a.map((p,x)=>x<o.x||x>=o.x+o.w?p:!1))}function qE(r,o,a,f){if(f==null)return null;const p=r.length+a*2,x=Math.floor(o*ZE),y=p/o,A=(f.width||x)*y,v=(f.height||x)*y,b=f.x==null?r.length/2-A/2:f.x*y,S=f.y==null?r.length/2-v/2:f.y*y,I=f.opacity==null?1:f.opacity;let R=null;if(f.excavate){let L=Math.floor(b),B=Math.floor(S),j=Math.ceil(A+b-L),V=Math.ceil(v+S-B);R={x:L,y:B,w:j,h:V}}const D=f.crossOrigin;return{x:b,y:S,h:v,w:A,excavation:R,opacity:I,crossOrigin:D}}function QE(r,o){return o!=null?Math.max(Math.floor(o),0):r?KE:$E}function Km({value:r,level:o,minVersion:a,includeMargin:f,marginSize:p,imageSettings:x,size:y,boostLevel:A}){let v=tn.useMemo(()=>{const L=(Array.isArray(r)?r:[r]).reduce((B,j)=>(B.push(...Oo.QrSegment.makeSegments(j)),B),[]);return Oo.QrCode.encodeSegments(L,YE[o],a,void 0,void 0,A)},[r,o,a,A]);const{cells:b,margin:S,numCells:I,calculatedImageSettings:R}=tn.useMemo(()=>{let D=v.getModules();const L=QE(f,p),B=D.length+L*2,j=qE(D,y,L,x);return{cells:D,margin:L,numCells:B,calculatedImageSettings:j}},[v,y,x,f,p]);return{qrcode:v,margin:S,cells:b,numCells:I,calculatedImageSettings:R}}var JE=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),eb=tn.forwardRef(function(o,a){const f=o,{value:p,size:x=Vm,level:y=zm,bgColor:A=Um,fgColor:v=Wm,includeMargin:b=Hm,minVersion:S=Gm,boostLevel:I,marginSize:R,imageSettings:D}=f,B=Jd(f,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:j}=B,V=Jd(B,["style"]),W=D==null?void 0:D.src,z=tn.useRef(null),J=tn.useRef(null),ne=tn.useCallback(Se=>{z.current=Se,typeof a=="function"?a(Se):a&&(a.current=Se)},[a]),[oe,q]=tn.useState(!1),{margin:ue,cells:$,numCells:Ae,calculatedImageSettings:Oe}=Km({value:p,level:y,minVersion:S,boostLevel:I,includeMargin:b,marginSize:R,imageSettings:D,size:x});tn.useEffect(()=>{if(z.current!=null){const Se=z.current,Q=Se.getContext("2d");if(!Q)return;let Le=$;const pe=J.current,ge=Oe!=null&&pe!==null&&pe.complete&&pe.naturalHeight!==0&&pe.naturalWidth!==0;ge&&Oe.excavation!=null&&(Le=Ym($,Oe.excavation));const Me=window.devicePixelRatio||1;Se.height=Se.width=x*Me;const ae=x/Ae*Me;Q.scale(ae,ae),Q.fillStyle=A,Q.fillRect(0,0,Ae,Ae),Q.fillStyle=v,JE?Q.fill(new Path2D(Xm(Le,ue))):$.forEach(function(Y,te){Y.forEach(function(be,ze){be&&Q.fillRect(ze+ue,te+ue,1,1)})}),Oe&&(Q.globalAlpha=Oe.opacity),ge&&Q.drawImage(pe,Oe.x+ue,Oe.y+ue,Oe.w,Oe.h)}}),tn.useEffect(()=>{q(!1)},[W]);const ke=Qd({height:x,width:x},j);let De=null;return W!=null&&(De=tn.createElement("img",{src:W,key:W,style:{display:"none"},onLoad:()=>{q(!0)},ref:J,crossOrigin:Oe==null?void 0:Oe.crossOrigin})),tn.createElement(tn.Fragment,null,tn.createElement("canvas",Qd({style:ke,height:x,width:x,ref:ne,role:"img"},V)),De)});eb.displayName="QRCodeCanvas";var Qf=tn.forwardRef(function(o,a){const f=o,{value:p,size:x=Vm,level:y=zm,bgColor:A=Um,fgColor:v=Wm,includeMargin:b=Hm,minVersion:S=Gm,boostLevel:I,title:R,marginSize:D,imageSettings:L}=f,B=Jd(f,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:j,cells:V,numCells:W,calculatedImageSettings:z}=Km({value:p,level:y,minVersion:S,boostLevel:I,includeMargin:b,marginSize:D,imageSettings:L,size:x});let J=V,ne=null;L!=null&&z!=null&&(z.excavation!=null&&(J=Ym(V,z.excavation)),ne=tn.createElement("image",{href:L.src,height:z.h,width:z.w,x:z.x+j,y:z.y+j,preserveAspectRatio:"none",opacity:z.opacity,crossOrigin:z.crossOrigin}));const oe=Xm(J,j);return tn.createElement("svg",Qd({height:x,width:x,viewBox:`0 0 ${W} ${W}`,ref:a,role:"img"},B),!!R&&tn.createElement("title",null,R),tn.createElement("path",{fill:A,d:`M0,0 h${W}v${W}H0z`,shapeRendering:"crispEdges"}),tn.createElement("path",{fill:v,d:oe,shapeRendering:"crispEdges"}),ne)});Qf.displayName="QRCodeSVG";const tb=({player:r})=>w.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"350px",height:"500px",margin:"0 auto",position:"relative"},children:r!=null&&r.image_data?w.jsxs("div",{style:{position:"relative",width:"350px",height:"450px"},children:[w.jsx("img",{src:`data:image/jpeg;base64,${r.image_data}`,alt:r.name,style:{width:"350px",height:"450px",objectFit:"cover",borderRadius:"50px",boxShadow:"0 6px 12px rgba(0, 0, 0, 0.3)",margin:"auto",display:"block"},onError:o=>{console.error("Image failed to load:",o),o.target.style.display="none"}}),w.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",backgroundColor:"#144dff",color:"white",padding:"12px 0",borderBottomLeftRadius:"50px",borderBottomRightRadius:"50px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",fontFamily:"Helvetica, Arial, sans-serif",boxShadow:"0 -4px 10px rgba(0, 0, 0, 0.1)",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.2)"},children:r.name})]}):w.jsxs("div",{style:{width:"350px",height:"450px",backgroundColor:"#f0f0f0",borderRadius:"50px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"relative"},children:[w.jsx("p",{style:{marginBottom:"60px"},children:"No image available"}),w.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",backgroundColor:"#144dff",color:"white",padding:"12px 0",borderBottomLeftRadius:"50px",borderBottomRightRadius:"50px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",fontFamily:"Helvetica, Arial, sans-serif",boxShadow:"0 -4px 10px rgba(0, 0, 0, 0.1)",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.2)"},children:r.name})]})});var Bp=typeof window>"u"?_.useEffect:_.useLayoutEffect,nb=({isPlaying:r,duration:o,startAt:a=0,updateInterval:f=0,onComplete:p,onUpdate:x})=>{let[y,A]=_.useState(a),v=_.useRef(0),b=_.useRef(a),S=_.useRef(a*-1e3),I=_.useRef(null),R=_.useRef(null),D=_.useRef(null),L=V=>{let W=V/1e3;if(R.current===null){R.current=W,I.current=requestAnimationFrame(L);return}let z=W-R.current,J=v.current+z;R.current=W,v.current=J;let ne=b.current+(f===0?J:(J/f|0)*f),oe=b.current+J,q=typeof o=="number"&&oe>=o;A(q?o:ne),q||(I.current=requestAnimationFrame(L))},B=()=>{I.current&&cancelAnimationFrame(I.current),D.current&&clearTimeout(D.current),R.current=null},j=_.useCallback(V=>{B(),v.current=0;let W=typeof V=="number"?V:a;b.current=W,A(W),r&&(I.current=requestAnimationFrame(L))},[r,a]);return Bp(()=>{if(x==null||x(y),o&&y>=o){S.current+=o*1e3;let{shouldRepeat:V=!1,delay:W=0,newStartAt:z}=(p==null?void 0:p(S.current/1e3))||{};V&&(D.current=setTimeout(()=>j(z),W*1e3))}},[y,o]),Bp(()=>(r&&(I.current=requestAnimationFrame(L)),B),[r,o,f]),{elapsedTime:y,reset:j}},rb=(r,o,a)=>{let f=r/2,p=o/2,x=f-p,y=2*x,A=a==="clockwise"?"1,0":"0,1",v=2*Math.PI*x;return{path:`m ${f},${p} a ${x},${x} 0 ${A} 0,${y} a ${x},${x} 0 ${A} 0,-${y}`,pathLength:v}},jp=(r,o)=>r===0||r===o?0:typeof o=="number"?r-o:0,ib=r=>({position:"relative",width:r,height:r}),sb={display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,top:0,width:"100%",height:"100%"},$m=(r,o,a,f,p)=>{if(f===0)return o;let x=(p?f-r:r)/f;return o+a*x},Fp=r=>{var o,a;return(a=(o=r.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(f,p,x,y)=>`#${p}${p}${x}${x}${y}${y}`).substring(1).match(/.{2}/g))==null?void 0:o.map(f=>parseInt(f,16)))!=null?a:[]},ob=(r,o)=>{var a;let{colors:f,colorsTime:p,isSmoothColorTransition:x=!0}=r;if(typeof f=="string")return f;let y=(a=p==null?void 0:p.findIndex((R,D)=>R>=o&&o>=p[D+1]))!=null?a:-1;if(!p||y===-1)return f[0];if(!x)return f[y];let A=p[y]-o,v=p[y]-p[y+1],b=Fp(f[y]),S=Fp(f[y+1]),I=!!r.isGrowing;return`rgb(${b.map((R,D)=>$m(A,R,S[D]-R,v,I)|0).join(",")})`},ab=r=>{let{duration:o,initialRemainingTime:a,updateInterval:f,size:p=180,strokeWidth:x=12,trailStrokeWidth:y,isPlaying:A=!1,isGrowing:v=!1,rotation:b="clockwise",onComplete:S,onUpdate:I}=r,R=_.useRef(),D=Math.max(x,y??0),{path:L,pathLength:B}=rb(p,D,b),{elapsedTime:j}=nb({isPlaying:A,duration:o,startAt:jp(o,a),updateInterval:f,onUpdate:typeof I=="function"?W=>{let z=Math.ceil(o-W);z!==R.current&&(R.current=z,I(z))}:void 0,onComplete:typeof S=="function"?W=>{var z;let{shouldRepeat:J,delay:ne,newInitialRemainingTime:oe}=(z=S(W))!=null?z:{};if(J)return{shouldRepeat:J,delay:ne,newStartAt:jp(o,oe)}}:void 0}),V=o-j;return{elapsedTime:j,path:L,pathLength:B,remainingTime:Math.ceil(V),rotation:b,size:p,stroke:ob(r,V),strokeDashoffset:$m(j,0,B,o,v),strokeWidth:x}},Jf=r=>{let{children:o,strokeLinecap:a,trailColor:f,trailStrokeWidth:p}=r,{path:x,pathLength:y,stroke:A,strokeDashoffset:v,remainingTime:b,elapsedTime:S,size:I,strokeWidth:R}=ab(r);return tn.createElement("div",{style:ib(I)},tn.createElement("svg",{viewBox:`0 0 ${I} ${I}`,width:I,height:I,xmlns:"http://www.w3.org/2000/svg"},tn.createElement("path",{d:x,fill:"none",stroke:f??"#d9d9d9",strokeWidth:p??R}),tn.createElement("path",{d:x,fill:"none",stroke:A,strokeLinecap:a??"round",strokeWidth:R,strokeDasharray:y,strokeDashoffset:v})),typeof o=="function"&&tn.createElement("div",{style:sb},o({remainingTime:b,elapsedTime:S,color:A})))};Jf.displayName="CountdownCircleTimer";const lb=({onComplete:r})=>{const[o,a]=_.useState(7),[f,p]=_.useState(!1),x=_.useRef(null),y=_.useRef(null);_.useEffect(()=>(x.current&&clearTimeout(x.current),y.current&&clearInterval(y.current),y.current=setInterval(()=>{p(!0),x.current=setTimeout(()=>{a(v=>v<=1?(y.current&&clearInterval(y.current),x.current&&clearTimeout(x.current),r&&r(),0):v-1),p(!1)},500)},1e3),()=>{y.current&&clearInterval(y.current),x.current&&clearTimeout(x.current)}),[r]);const A=f?"pop-burst":"";return w.jsx("div",{className:"lobby-countdown-overlay",children:w.jsxs("div",{className:`lobby-countdown-container ${A}`,children:[w.jsx("div",{className:"lobby-countdown-number",children:o}),w.jsx("div",{className:"lobby-countdown-text",children:o>0?"Get ready!":"Starting..."})]})})},cb=({onComplete:r,lobbyCode:o="this"})=>{const{userProfile:a}=_.useContext(gr),[f,p]=_.useState(0),[x,y]=_.useState(!1),[A,v]=_.useState(!1),[b,S]=_.useState([0]),[I,R]=_.useState(!1),D=_.useRef(null),L=_.useRef(null),B=[{image:"/assets/how_to_tutorial_updated_slide1.svg",duration:2e3,animatedText:"Find your match using their profile picture!"},{image:"/assets/how_to_pt2_2.svg",duration:4e3,animatedText:"Raise volume to the max, to know when you have a match!"},{image:"/assets/how_to_tutorial_updated_slide3.svg",duration:4e3,animatedText:"Tap leave to stop being paired/take a break"}];return _.useEffect(()=>{const j=()=>{if(f>=B.length-1){clearInterval(D.current),r&&r();return}y(!0);const V=f+1;S([f,V]),L.current=setTimeout(()=>{R(!1),p(V),y(!1),setTimeout(()=>{S([V]),v(!0),B[V].animatedText&&R(!0)},500)},500)};return D.current=setInterval(j,B[f].duration),v(!0),f===0&&B[0].animatedText&&R(!0),()=>{D.current&&clearInterval(D.current),L.current&&clearTimeout(L.current)}},[f,B.length,r]),w.jsx("div",{className:"tutorial-overlay",children:w.jsxs("div",{className:"tutorial-container",children:[b.map(j=>w.jsxs("div",{className:`tutorial-slide ${j===f?"current":j<f?"previous":"next"}`,children:[j===f&&B[j].animatedText&&I&&w.jsx("div",{className:"animated-text pop-burst",children:B[j].animatedText}),j===1&&w.jsx("div",{className:"volume-arrow-container",children:w.jsx("svg",{className:"volume-arrow",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{d:"M19 12H5M5 12L12 5M5 12L12 19",stroke:"#144dff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),w.jsx("div",{className:`tutorial-image-container ${j===0?"first-slide":""}`,children:w.jsx("img",{src:B[j].image,alt:`Tutorial step ${j+1}`,className:"tutorial-image"})}),w.jsx("div",{className:`tutorial-text ${A&&j===f?"text-animate":""}`,children:B[j].text})]},j)),w.jsx("div",{className:"tutorial-progress-bar-container",children:w.jsx("div",{className:"tutorial-progress-bar",children:w.jsx("div",{className:"tutorial-progress-bar-fill"})})})]})})},ub=({isVisible:r,onAnimationEnd:o})=>{const[a,f]=_.useState(!1),p=_.useRef(null);return _.useEffect(()=>(p.current&&clearTimeout(p.current),r?(f(!0),p.current=setTimeout(()=>{f(!1),o&&o()},3e3)):f(!1),()=>{p.current&&(clearTimeout(p.current),p.current=null)}),[r,o]),a?w.jsxs("div",{className:"match-overlay",children:[w.jsxs("div",{className:"confetti-container",children:[[...Array(50)].map((x,y)=>w.jsx("div",{className:`confetti confetti-${y%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":Math.random()*.2}},`first-${y}`)),[...Array(50)].map((x,y)=>w.jsx("div",{className:`confetti confetti-${y%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":`${.6+Math.random()*.2}s`}},`second-${y}`))]}),w.jsx("div",{className:"match-text",children:"It's a Match!"})]}):null},db=({isVisible:r,onAnimationEnd:o})=>{const[a,f]=_.useState(!1),p=_.useRef(null);return _.useEffect(()=>(p.current&&clearTimeout(p.current),r?(f(!0),p.current=setTimeout(()=>{f(!1),o&&o()},1800)):f(!1),()=>{p.current&&(clearTimeout(p.current),p.current=null)}),[r,o]),a?w.jsxs("div",{className:"ready-overlay",children:[w.jsxs("div",{className:"confetti-container",children:[[...Array(50)].map((x,y)=>w.jsx("div",{className:`confetti confetti-${y%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":Math.random()*.2}},`first-${y}`)),[...Array(50)].map((x,y)=>w.jsx("div",{className:`confetti confetti-${y%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":`${.6+Math.random()*.2}s`}},`second-${y}`))]}),w.jsx("div",{className:"ready-text",children:"You're ready!"})]}):null},ac=9,fb=5,hb=5e3,pb=!1,gb=()=>{const r=Math.floor(540),[o,a]=_.useState([]),[f,p]=_.useState("self"),[x,y]=_.useState(!1),[A,v]=_.useState(""),b=_.useRef(null),S=_.useRef(null),[I,R]=_.useState(!1),D=_.useRef(!1),[L,B]=_.useState(!1),{loadSound:j,seekTo:V,cancelSound:W,checkSound:z,soundEnabled:J,setSoundEnabled:ne,isPlaying:oe}=hf(),[q,ue]=_.useState("yonder"),$=ar(),{code:Ae}=ey(),[Oe,ke]=_.useState(null);Bm(ke,null,q);const{user:De,userProfile:Se,checkAuth:Q,permissions:Le}=_.useContext(gr);_.useEffect(()=>{(async()=>{if(localStorage.getItem("access_token"))try{De||await Q()}catch(it){console.error("Authentication error:",it);const je=new URLSearchParams(window.location.search).get("code")||Ae;$(je?`/signup?redirect=lobby&code=${je}`:"/signup?redirect=lobby")}else{await fetch(window.server_url+"/debug?username="+De+"&message=no token on the lobby page",{method:"GET"});const It=new URLSearchParams(window.location.search).get("code")||Ae;$(It?`/signup?redirect=lobby&code=${It}`:"/signup?redirect=lobby")}})()},[$,Ae,Q,De]),_.useEffect(()=>{(()=>{const it=new URLSearchParams(window.location.search).get("code")||Ae;if(it){ue(it),BE(it),pt(it);const It=`hasSeenTutorial_${it}`,je=localStorage.getItem(It),Wn=!!localStorage.getItem("access_token");console.log("Tutorial check:",{codeParam:it,lobbyTutorialKey:It,hasSeenLobbyTutorial:je,isAuthenticated:Wn}),!je&&Wn&&(Kr(!0),localStorage.setItem(It,"true"))}})()},[Ae]);const[pe,ge]=_.useState(null),[Me,ae]=_.useState(null),[Y,te]=_.useState(null),[be,ze]=_.useState(null),[Re,fe]=_.useState(null),Ye=_.useRef(!1),He=_.useRef(null),nt=_.useRef(null),[Ge,ft]=_.useState(null),[me,we]=_.useState(null),[st,ht]=_.useState(null),[Pt,xt]=_.useState(null),[qe,Je]=_.useState(!0),Nt=_.useRef(0),[Ie,yn]=_.useState(null),[Ct,xe]=_.useState(null),[Fe,$e]=_.useState([]),[ct,Ve]=_.useState([]),[At,Wt]=_.useState(!document.hidden),Ht=_.useRef("yonder"),Gt=_.useRef({}),Be=_.useRef([]),[he,gt]=_.useState(!1),ut=_.useRef(null),[Mt,Mn]=_.useState(!1);_.useEffect(()=>{Ht.current=q},[q]);async function Dr(We,Et){const it=localStorage.getItem("access_token"),je=await(await fetch(window.server_url+"/set_profile_info",{method:"POST",headers:{Authorization:`Bearer ${it}`,"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},mode:"cors",body:JSON.stringify({tags_work:We,tags_desiring_work:Et})})).json();console.log("SET PROFILE INFO:",je)}const Un=async We=>{if(We.length!==0){gt(!0);try{const Et=localStorage.getItem("access_token"),it=await fetch(`${window.server_url}/load_batch_pfp_small_icons`,{method:"POST",headers:{Authorization:`Bearer ${Et}`,"Content-Type":"application/json",lobby_code:Ht.current},body:JSON.stringify({usernames:We})});if(it.ok){const It=await it.json();Gt.current={...Gt.current,...It},console.log("Profile images fetched:",Object.keys(It))}else console.error("Failed to fetch profile images:",it.status)}catch(Et){console.error("Error fetching profile images:",Et)}finally{gt(!1)}}},pt=async We=>{try{const Et=await fetch(`${window.server_url}/lobby_setup_data`,{headers:{lobby_code:We}});if(Et.ok){const it=await Et.json();it.logo_icon?(ut.current=it.logo_icon,Mn(!0),console.log("Sponsor logo loaded successfully")):console.log("No sponsor logo available for this lobby")}else console.error("Failed to fetch lobby setup data:",Et.status)}catch(Et){console.error("Error fetching lobby setup data:",Et)}};async function Ln(){try{const We=localStorage.getItem("access_token");W(),Gt.current={},Be.current=[],(await fetch(window.server_url+"/disconnect_lobby",{headers:{Authorization:`Bearer ${We}`,lobby_code:q}})).ok&&$("/")}catch(We){console.error("Error disconnecting from lobby:",We),$("/")}finally{W(),$("/"),console.log("finally")}}const[bs,Ui]=_.useState(!1),[qn,Wi]=_.useState(null),on=_.useRef(!1),[Mr,si]=_.useState(!1),[An,Hi]=_.useState(null),lr=(We,Et)=>{if(!We||!Et)return null;for(const it of We.tags_work)if(Et.desiring_tags_work.includes(it)){for(const It of Et.tags_work)if(We.desiring_tags_work.includes(It))return{playerTag:it,opponentTag:It}}return null};async function oi(){try{Nt.current+=1,Nt.current>5&&(Nt.current=0,Ye.current=!1);const We=localStorage.getItem("access_token"),Et=!document.hidden,it=Ht.current;if(console.log("lobby code fr:",it),it=="yonder"){console.log("lobby code is not set");return}const It=await fetch(`${window.server_url}/lobby?is_visible=${Et}`,{headers:{Authorization:`Bearer ${We}`,is_visible_t_f:Et?"t":"f",lobby_code:it}});if(It.ok){const je=await It.json();console.log("LOBBY PAIR DATA:",it,je),je.status=="inactive"&&(W(),$("/")),te(je.opponent_name),je.opponent_name==null&&ge(null),a(je.custom_tags),ft(je.lobby_state),xt(je.lobby_duration);const Wn=typeof je.round_time_left=="number"&&!isNaN(je.round_time_left)?je.round_time_left:0;console.log("Timer Debug:",{roundDuration:je.lobby_duration,timeLeft:Wn,lobbyState:je.lobby_state,usingDefaultDuration:!je.lobby_duration}),He.current=Wn,nt.current=je.beat_go_off,we(Math.floor(Wn));const Vt=Math.floor(Wn/60),As=Math.floor(Wn%60);ht(`${Vt}:${As.toString().padStart(2,"0")}`),fe(je.table_number),je.player_tags!=null&&je.player_tags.tags_work!=null&&$e(je.player_tags.tags_work),je.player_tags!=null&&je.player_tags.desiring_tags_work!=null&&Ve(je.player_tags.desiring_tags_work),He.current!=null&&je.lobby_state=="active"&&He.current!=0&&(V(r-He.current),console.log("seeking to",r-He.current));const ye=await fetch(`${window.server_url}/display_lobby_metadata?lobby_code=${it}`,{headers:{Authorization:`Bearer ${We}`,lobby_code:it}});if(ye.ok){const mr=await ye.json();ke(mr.player_count);const Bt=mr.usernames||[];if(JSON.stringify(Be.current)!==JSON.stringify(Bt)){Be.current=Bt;const Xi=Bt.filter(Rt=>!Gt.current[Rt]&&Rt!==(De==null?void 0:De.username));Xi.length>0&&(pb||(console.log("Fetching images for new users:",Xi),Un(Xi)))}}if((Y!=je.opponent_name||pe==null)&&!Ye.current&&je.opponent_name!=null){Ye.current=!0,console.log("fetching profile");const mr=await fetch(window.server_url+"/paired_player_profile",{headers:{Authorization:`Bearer ${We}`}});if(mr.ok){const Bt=await mr.json();ge(Bt),console.log("profile fetched:",Bt.name)}else console.log("profile fetch failed");Ye.current=!1}if(qn==="interrim"&&je.lobby_state==="active"&&je.opponent_name&&!on.current){console.log("Checking for matches...");const mr=lr(je.player_tags,je.opponent_tags);mr&&(console.log("Match found! Setting animation and banner...",mr),Hi(mr),si(!0),on.current=!0,Ui(!0))}Wi(je.lobby_state)}}catch(We){console.error("Error fetching lobby data:",We)}}_.useEffect(()=>{z()?ne(!0):ne(!1);const We=setInterval(async()=>{oi()},hb);return()=>clearInterval(We)},[]),_.useEffect(()=>{const We=setTimeout(oi,1e3);return()=>clearTimeout(We)},[Ge,q]),_.useEffect(()=>{const We=()=>{const Et=!document.hidden;Et&&!At&&(console.log("Page became visible - fetching latest data"),oi()),Wt(Et)};return document.addEventListener("visibilitychange",We),()=>{document.removeEventListener("visibilitychange",We)}},[At]);const fn=()=>w.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.125)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},children:w.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",position:"relative",minWidth:"300px"},children:[w.jsx("button",{onClick:()=>Je(!1),style:{color:"#144fff",position:"absolute",right:"10px",top:"10px",border:"none",background:"none",fontSize:"2px",cursor:"pointer"},children:"X"}),w.jsx("h2",{style:{marginTop:"5px"},children:"The Sound is Important"}),w.jsx("h3",{style:{marginTop:"5px"},children:"Raise your volume also"}),w.jsx("p",{style:{color:"#144dff"},children:"You'll need this for the best experience."}),w.jsx("button",{onClick:()=>{j(),Je(!1)},style:{padding:"10px 20px",marginTop:"20px",backgroundColor:"#144dff",color:"#ffffff",border:"none",borderRadius:"14px",fontWeight:"bold",cursor:"pointer"},children:"Enable Sound"})]})}),cr=(We,Et)=>{Ie==null&&yn(Fe),Ct==null&&xe(ct);const it=We==="self"?Ie:Ct;if(!(it!=null&&it.includes(Et))&&(it==null?void 0:it.length)>=fb){v("Reached tag limit for this section"),setTimeout(()=>{var je;(je=S.current)==null||je.scrollIntoView({behavior:"smooth",block:"center"})},100),setTimeout(()=>{v("")},3e3);return}We==="self"?yn(je=>je.includes(Et)?je.filter(Wn=>Wn!==Et):[...je,Et]):xe(je=>je.includes(Et)?je.filter(Wn=>Wn!==Et):[...je,Et])},In=()=>{Ie!=null&&(Dr(Ie,Ct||[]),setTimeout(()=>{$e(Ie||[])},800)),p("desiring"),setTimeout(()=>{var We;(We=b.current)==null||We.scrollIntoView({behavior:"smooth",block:"start"})},100)},Ue=()=>{Ct!=null&&(Dr(Ie||[],Ct),setTimeout(()=>{$e(Ie||[]),Ve(Ct)},800),setTimeout(()=>{D.current||(D.current=!0,R(!0),B(!0))},500)),window.scrollTo({top:0,behavior:"smooth"})},[ai,Gi]=_.useState(!1);_.useEffect(()=>{if(Ge==="interrim")Gi(!0);else if(Ge==="active"){const We=setTimeout(()=>{Gi(!1)},1e3);return()=>clearTimeout(We)}},[Ge]);const Bn=()=>{console.log("Lobby countdown animation completed")},[Qn,Kr]=_.useState(!1),Ci=()=>{Kr(!1)};_.useEffect(()=>{(Ge!=="active"||!pe)&&(si(!1),Hi(null))},[Ge,pe]),_.useEffect(()=>{Ge==="terminated"&&(Gt.current={},Be.current=[],bc())},[Ge]);const Jn=_.useRef(null);return _.useEffect(()=>{var We;!x&&!(Fe!=null&&Fe.length)&&!(ct!=null&&ct.length)&&(o==null?void 0:o.length)>0&&((We=Jn.current)==null||We.scrollIntoView({behavior:"smooth"}),y(!0))},[Fe,ct,o,x]),w.jsxs("div",{className:"lobby-container",children:[w.jsxs("div",{className:"lobby-content",children:[w.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0",marginTop:"-1.5rem"},children:w.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",style:{maxWidth:"85px",height:"auto",objectFit:"contain"}})}),(Ge==="checkin"||Ge==="active"&&!pe||Ge==="interrim")&&w.jsx("div",{className:"user-profile-container",children:w.jsxs("div",{className:"user-profile",children:[w.jsx("img",{src:Se!=null&&Se.image_data?`data:image/jpeg;base64,${Se.image_data}`:"/assets/avatar_3.png",alt:"Your Profile",className:"user-profile-picture"}),w.jsx("div",{className:"user-profile-glow"})]})}),w.jsx("div",{className:"lobby-header",style:{marginTop:"-50px"},children:w.jsx("h2",{children:o.length>0&&(Fe.length==0||ct.length==0)?w.jsxs(w.Fragment,{children:["You're not ready, complete your profile to get matched up.",w.jsx("button",{className:"missing-tags-button",onClick:()=>{var We;return(We=Jn.current)==null?void 0:We.scrollIntoView({behavior:"smooth"})},children:"Complete Profile"})]}):Ge==="active"&&pe?w.jsxs("span",{className:"lobby-pop-burst",children:["Go find ",pe.name,"!"]}):Ge==="checkin"?w.jsxs(w.Fragment,{children:["Wait here ",Se.name.slice(0,15),".",w.jsx("br",{}),"Your host will start the experience."]}):Ge==="active"&&!pe?"You will be paired with someone in the next round.":Ge==="interrim"?"Get ready for the next round!":Ge==="terminated"?"This session has ended. Thank you for participating!":""})},Ge),Ge==="active"&&pe&&Re&&w.jsx("div",{className:"table-number",children:w.jsxs("h3",{children:["at table: ",Re]})}),(ut.current||Ge!=="checkin")&&w.jsxs("div",{className:`timer-sponsor-container ${ut.current&&Ge!=="checkin"?"has-timer":""}`,children:[ut.current&&w.jsx("div",{className:"sponsor-logo",children:w.jsx("img",{src:`data:image/jpeg;base64,${ut.current}`,alt:"Sponsor Logo",style:{width:"100px",height:"100px",objectFit:"contain"}})}),Ge!=="checkin"&&w.jsx("div",{className:"time-left",style:{display:"flex",flexDirection:"column",alignItems:"center",background:"white"},children:(Ge==="active"||Ge==="interrim")&&me?w.jsxs(w.Fragment,{children:[w.jsx(Jf,{isPlaying:Ge==="active",duration:Pt||300,initialRemainingTime:me||0,colors:["#144dff"],size:90,strokeWidth:12,trailColor:"#f5f7ff",onComplete:()=>(oi(),{shouldRepeat:!1}),children:({remainingTime:We})=>{const Et=typeof We=="number"&&!isNaN(We)?We:0,it=Math.floor(Et/60),It=Math.floor(Et%60);return w.jsxs("span",{style:{fontSize:".95rem",color:"#144dff",fontWeight:600},children:[it,":",String(It).padStart(2,"0")]})}},`${Ge}-${me}`),w.jsx("span",{style:{fontWeight:700,fontSize:"0.7em",marginTop:"4px",opacity:"1",color:"#144dff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.1)"},children:"round time left"})]}):w.jsx("span",{className:"time-left-text"})})]}),Mr&&An&&Ge==="active"&&pe&&w.jsxs("div",{className:"match-banner",children:[w.jsx("span",{className:"match-tag",children:An.playerTag}),w.jsx("div",{className:"match-arrow"}),w.jsx("span",{className:"match-tag",children:An.opponentTag})]}),w.jsx("div",{style:{display:"flex",justifyContent:"center",width:"100%",margin:"0 auto"},children:Ge==="active"||Ge==="interrim"?pe?w.jsx("div",{style:{marginTop:"-3rem",width:"100%",display:"flex",justifyContent:"center"},children:w.jsx(tb,{player:pe})}):w.jsx(w.Fragment,{}):Ge==="terminated"?w.jsx("div",{className:"status-message",children:w.jsxs("h2",{children:["This session has ended.",w.jsx("br",{}),"Thank you for participating!"]})}):null}),(Ge==="checkin"||Ge==="active"&&!pe)&&Oe!==null&&w.jsx("div",{className:"player-count-container",children:w.jsxs("div",{className:"player-count-widget",children:[w.jsxs("div",{className:"player-count-icon",children:[w.jsx("div",{className:"icon-pulse"}),w.jsx("img",{src:"/assets/players_display_icon2.png",alt:"Players in lobby",className:"player-count-img"})]}),w.jsxs("div",{className:"player-count-info",children:[w.jsx("span",{className:"player-count-number",children:Oe}),w.jsx("span",{className:"player-count-label",children:"joined"})]}),w.jsx("div",{className:"player-count-lobby",children:q})]})}),(Ge==="checkin"||Ge==="active"&&!pe)&&w.jsx("div",{className:"lobby-profiles-container",children:w.jsx("div",{className:"lobby-profiles-grid",children:Oe>0?w.jsxs(w.Fragment,{children:[Array.from({length:Math.min(Oe,ac)}).map((We,Et)=>{let it;{const je=Be.current[Et];je&&Gt.current[je]?it=`data:image/jpeg;base64,${Gt.current[je]}`:it="/assets/avatar_8.png"}return w.jsxs("div",{className:`profile-icon-wrapper ${Et===Math.min(Oe,ac)-1?"pop-in":""}`,children:[w.jsx("img",{src:it,alt:`Profile ${Et+1}`,className:"profile-icon",loading:"lazy"}),w.jsx("div",{className:"profile-icon-glow"})]},`profile-${Et}`)}),Oe>ac&&w.jsx("div",{className:"profile-icon-wrapper more-profiles",children:w.jsxs("div",{className:"more-profiles-bubble",children:["+",Oe-ac]})})]}):w.jsx("div",{children:"No profiles to display"})})}),(Ge==="checkin"||Ge==="active")&&w.jsxs("div",{className:"selected-tags-container",children:[Fe&&Fe.length>0&&w.jsxs("div",{className:"tag-category",children:[w.jsx("h4",{children:"I am:"}),w.jsx("div",{className:"tag-list",children:Fe.map(We=>w.jsx("span",{className:"tag-item",children:We},`self-${We}`))})]}),ct&&ct.length>0&&w.jsxs("div",{className:"tag-category",children:[w.jsx("h4",{children:"Looking for:"}),w.jsx("div",{className:"tag-list",children:ct.map(We=>w.jsx("span",{className:"tag-item",children:We},`desiring-${We}`))})]})]}),w.jsx("button",{className:"leave-lobby-button",onClick:Ln,children:"Take a Break"}),w.jsx("button",{className:"how-to-tutorial-button",onClick:()=>Kr(!0),children:"Tutorial"}),(Le==="admin"||Le==="organizer")&&w.jsx("button",{className:"admin-view-button",onClick:()=>$(`/admin_lobby_view?code=${q}`),children:"Manage"}),Array.isArray(o)&&o.length>0&&w.jsx("form",{onSubmit:We=>{We.preventDefault(),f==="self"?In():Ue()},children:w.jsxs("div",{className:"tags-section",ref:Jn,children:[w.jsxs("div",{className:"progress-bar-container",children:[w.jsx("div",{className:`self-progress-bar-tab ${f==="self"?"active":""} ${Fe.length>0?"complete":""}`,onClick:()=>p("self"),children:" Who are you?"}),w.jsx("div",{className:`desiring-progress-bar-tab ${f==="desiring"?"active":""} ${ct.length>0?"complete":""}`,onClick:()=>Fe.length>0?p("desiring"):null,children:" Who do you want to meet?"})]}),w.jsxs("div",{className:`tag-group ${f==="self"?"active":"hidden"}`,children:[w.jsx("div",{className:"bounce-wrapper",children:w.jsx("h2",{children:"Who are you?"})}),w.jsx("div",{className:"tag-labels-container",children:o.map(We=>w.jsxs("label",{className:"tag-label",children:[w.jsx("input",{type:"checkbox",checked:Ie!=null?Ie.includes(We):Fe.includes(We),onChange:()=>cr("self",We)}),We]},`self-${We}`))})]}),w.jsxs("div",{className:`tag-group ${f==="desiring"?"active":"hidden"}`,ref:b,children:[w.jsx("div",{className:"bounce-wrapper",children:w.jsx("h2",{children:"Who do you want to meet?"})}),w.jsx("div",{className:"tag-labels-container",children:o.map(We=>w.jsxs("label",{className:"tag-label",children:[w.jsx("input",{type:"checkbox",checked:Ct!=null?Ct.includes(We):ct.includes(We),onChange:()=>cr("desiring",We)}),We]},`desiring-${We}`))})]}),w.jsx("button",{type:"submit",className:"tag-selection-button",ref:S,children:f==="self"?"Continue":"Save"}),A&&w.jsx("div",{style:{color:"#144dff",textAlign:"center",marginTop:"1rem",fontSize:"0.9rem",fontWeight:"600"},children:A})]})})]}),J||!qe||Ge=="checkin"||Ge==null||oe?null:w.jsx(fn,{}),ai&&!(o.length>0&&ct.length===0)&&w.jsx(lb,{onComplete:Bn}),Qn&&w.jsx(cb,{onComplete:Ci,lobbyCode:q}),w.jsx(ub,{isVisible:bs,onAnimationEnd:()=>{Ui(!1),on.current=!1}}),w.jsx(db,{isVisible:I,onAnimationEnd:()=>{R(!1),D.current=!1}})]})};let mb={data:""},xb=r=>typeof window=="object"?((r?r.querySelector("#_goober"):window._goober)||Object.assign((r||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:r||mb,yb=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,wb=/\/\*[^]*?\*\/|  +/g,Vp=/\n+/g,xs=(r,o)=>{let a="",f="",p="";for(let x in r){let y=r[x];x[0]=="@"?x[1]=="i"?a=x+" "+y+";":f+=x[1]=="f"?xs(y,x):x+"{"+xs(y,x[1]=="k"?"":o)+"}":typeof y=="object"?f+=xs(y,o?o.replace(/([^,])+/g,A=>x.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,v=>/&/.test(v)?v.replace(/&/g,A):A?A+" "+v:v)):x):y!=null&&(x=/^--/.test(x)?x:x.replace(/[A-Z]/g,"-$&").toLowerCase(),p+=xs.p?xs.p(x,y):x+":"+y+";")}return a+(o&&p?o+"{"+p+"}":p)+f},Bi={},Zm=r=>{if(typeof r=="object"){let o="";for(let a in r)o+=a+Zm(r[a]);return o}return r},vb=(r,o,a,f,p)=>{let x=Zm(r),y=Bi[x]||(Bi[x]=(v=>{let b=0,S=11;for(;b<v.length;)S=101*S+v.charCodeAt(b++)>>>0;return"go"+S})(x));if(!Bi[y]){let v=x!==r?r:(b=>{let S,I,R=[{}];for(;S=yb.exec(b.replace(wb,""));)S[4]?R.shift():S[3]?(I=S[3].replace(Vp," ").trim(),R.unshift(R[0][I]=R[0][I]||{})):R[0][S[1]]=S[2].replace(Vp," ").trim();return R[0]})(r);Bi[y]=xs(p?{["@keyframes "+y]:v}:v,a?"":"."+y)}let A=a&&Bi.g?Bi.g:null;return a&&(Bi.g=Bi[y]),((v,b,S,I)=>{I?b.data=b.data.replace(I,v):b.data.indexOf(v)===-1&&(b.data=S?v+b.data:b.data+v)})(Bi[y],o,f,A),y},Cb=(r,o,a)=>r.reduce((f,p,x)=>{let y=o[x];if(y&&y.call){let A=y(a),v=A&&A.props&&A.props.className||/^go/.test(A)&&A;y=v?"."+v:A&&typeof A=="object"?A.props?"":xs(A,""):A===!1?"":A}return f+p+(y??"")},"");function Oc(r){let o=this||{},a=r.call?r(o.p):r;return vb(a.unshift?a.raw?Cb(a,[].slice.call(arguments,1),o.p):a.reduce((f,p)=>Object.assign(f,p&&p.call?p(o.p):p),{}):a,xb(o.target),o.g,o.o,o.k)}let qm,ef,tf;Oc.bind({g:1});let zi=Oc.bind({k:1});function Eb(r,o,a,f){xs.p=o,qm=r,ef=a,tf=f}function Es(r,o){let a=this||{};return function(){let f=arguments;function p(x,y){let A=Object.assign({},x),v=A.className||p.className;a.p=Object.assign({theme:ef&&ef()},A),a.o=/ *go\d+/.test(v),A.className=Oc.apply(a,f)+(v?" "+v:"");let b=r;return r[0]&&(b=A.as||r,delete A.as),tf&&b[0]&&tf(A),qm(b,A)}return p}}var bb=r=>typeof r=="function",Sc=(r,o)=>bb(r)?r(o):r,Ab=(()=>{let r=0;return()=>(++r).toString()})(),Qm=(()=>{let r;return()=>{if(r===void 0&&typeof window<"u"){let o=matchMedia("(prefers-reduced-motion: reduce)");r=!o||o.matches}return r}})(),Sb=20,Jm=(r,o)=>{switch(o.type){case 0:return{...r,toasts:[o.toast,...r.toasts].slice(0,Sb)};case 1:return{...r,toasts:r.toasts.map(x=>x.id===o.toast.id?{...x,...o.toast}:x)};case 2:let{toast:a}=o;return Jm(r,{type:r.toasts.find(x=>x.id===a.id)?1:0,toast:a});case 3:let{toastId:f}=o;return{...r,toasts:r.toasts.map(x=>x.id===f||f===void 0?{...x,dismissed:!0,visible:!1}:x)};case 4:return o.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(x=>x.id!==o.toastId)};case 5:return{...r,pausedAt:o.time};case 6:let p=o.time-(r.pausedAt||0);return{...r,pausedAt:void 0,toasts:r.toasts.map(x=>({...x,pauseDuration:x.pauseDuration+p}))}}},gc=[],Zs={toasts:[],pausedAt:void 0},eo=r=>{Zs=Jm(Zs,r),gc.forEach(o=>{o(Zs)})},Tb={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Ib=(r={})=>{let[o,a]=_.useState(Zs),f=_.useRef(Zs);_.useEffect(()=>(f.current!==Zs&&a(Zs),gc.push(a),()=>{let x=gc.indexOf(a);x>-1&&gc.splice(x,1)}),[]);let p=o.toasts.map(x=>{var y,A,v;return{...r,...r[x.type],...x,removeDelay:x.removeDelay||((y=r[x.type])==null?void 0:y.removeDelay)||(r==null?void 0:r.removeDelay),duration:x.duration||((A=r[x.type])==null?void 0:A.duration)||(r==null?void 0:r.duration)||Tb[x.type],style:{...r.style,...(v=r[x.type])==null?void 0:v.style,...x.style}}});return{...o,toasts:p}},Nb=(r,o="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:o,ariaProps:{role:"status","aria-live":"polite"},message:r,pauseDuration:0,...a,id:(a==null?void 0:a.id)||Ab()}),qa=r=>(o,a)=>{let f=Nb(o,r,a);return eo({type:2,toast:f}),f.id},hr=(r,o)=>qa("blank")(r,o);hr.error=qa("error");hr.success=qa("success");hr.loading=qa("loading");hr.custom=qa("custom");hr.dismiss=r=>{eo({type:3,toastId:r})};hr.remove=r=>eo({type:4,toastId:r});hr.promise=(r,o,a)=>{let f=hr.loading(o.loading,{...a,...a==null?void 0:a.loading});return typeof r=="function"&&(r=r()),r.then(p=>{let x=o.success?Sc(o.success,p):void 0;return x?hr.success(x,{id:f,...a,...a==null?void 0:a.success}):hr.dismiss(f),p}).catch(p=>{let x=o.error?Sc(o.error,p):void 0;x?hr.error(x,{id:f,...a,...a==null?void 0:a.error}):hr.dismiss(f)}),r};var _b=(r,o)=>{eo({type:1,toast:{id:r,height:o}})},Rb=()=>{eo({type:5,time:Date.now()})},La=new Map,kb=1e3,Pb=(r,o=kb)=>{if(La.has(r))return;let a=setTimeout(()=>{La.delete(r),eo({type:4,toastId:r})},o);La.set(r,a)},Ob=r=>{let{toasts:o,pausedAt:a}=Ib(r);_.useEffect(()=>{if(a)return;let x=Date.now(),y=o.map(A=>{if(A.duration===1/0)return;let v=(A.duration||0)+A.pauseDuration-(x-A.createdAt);if(v<0){A.visible&&hr.dismiss(A.id);return}return setTimeout(()=>hr.dismiss(A.id),v)});return()=>{y.forEach(A=>A&&clearTimeout(A))}},[o,a]);let f=_.useCallback(()=>{a&&eo({type:6,time:Date.now()})},[a]),p=_.useCallback((x,y)=>{let{reverseOrder:A=!1,gutter:v=8,defaultPosition:b}=y||{},S=o.filter(D=>(D.position||b)===(x.position||b)&&D.height),I=S.findIndex(D=>D.id===x.id),R=S.filter((D,L)=>L<I&&D.visible).length;return S.filter(D=>D.visible).slice(...A?[R+1]:[0,R]).reduce((D,L)=>D+(L.height||0)+v,0)},[o]);return _.useEffect(()=>{o.forEach(x=>{if(x.dismissed)Pb(x.id,x.removeDelay);else{let y=La.get(x.id);y&&(clearTimeout(y),La.delete(x.id))}})},[o]),{toasts:o,handlers:{updateHeight:_b,startPause:Rb,endPause:f,calculateOffset:p}}},Db=zi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Mb=zi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Lb=zi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Bb=Es("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Db} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Mb} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${r=>r.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Lb} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,jb=zi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Fb=Es("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${r=>r.secondary||"#e0e0e0"};
  border-right-color: ${r=>r.primary||"#616161"};
  animation: ${jb} 1s linear infinite;
`,Vb=zi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,zb=zi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Ub=Es("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Vb} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${zb} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${r=>r.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Wb=Es("div")`
  position: absolute;
`,Hb=Es("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Gb=zi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Xb=Es("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Gb} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Yb=({toast:r})=>{let{icon:o,type:a,iconTheme:f}=r;return o!==void 0?typeof o=="string"?_.createElement(Xb,null,o):o:a==="blank"?null:_.createElement(Hb,null,_.createElement(Fb,{...f}),a!=="loading"&&_.createElement(Wb,null,a==="error"?_.createElement(Bb,{...f}):_.createElement(Ub,{...f})))},Kb=r=>`
0% {transform: translate3d(0,${r*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,$b=r=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${r*-150}%,-1px) scale(.6); opacity:0;}
`,Zb="0%{opacity:0;} 100%{opacity:1;}",qb="0%{opacity:1;} 100%{opacity:0;}",Qb=Es("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Jb=Es("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,eA=(r,o)=>{let a=r.includes("top")?1:-1,[f,p]=Qm()?[Zb,qb]:[Kb(a),$b(a)];return{animation:o?`${zi(f)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${zi(p)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},tA=_.memo(({toast:r,position:o,style:a,children:f})=>{let p=r.height?eA(r.position||o||"top-center",r.visible):{opacity:0},x=_.createElement(Yb,{toast:r}),y=_.createElement(Jb,{...r.ariaProps},Sc(r.message,r));return _.createElement(Qb,{className:r.className,style:{...p,...a,...r.style}},typeof f=="function"?f({icon:x,message:y}):_.createElement(_.Fragment,null,x,y))});Eb(_.createElement);var nA=({id:r,className:o,style:a,onHeightUpdate:f,children:p})=>{let x=_.useCallback(y=>{if(y){let A=()=>{let v=y.getBoundingClientRect().height;f(r,v)};A(),new MutationObserver(A).observe(y,{subtree:!0,childList:!0,characterData:!0})}},[r,f]);return _.createElement("div",{ref:x,className:o,style:a},p)},rA=(r,o)=>{let a=r.includes("top"),f=a?{top:0}:{bottom:0},p=r.includes("center")?{justifyContent:"center"}:r.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Qm()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${o*(a?1:-1)}px)`,...f,...p}},iA=Oc`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,lc=16,sA=({reverseOrder:r,position:o="top-center",toastOptions:a,gutter:f,children:p,containerStyle:x,containerClassName:y})=>{let{toasts:A,handlers:v}=Ob(a);return _.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:lc,left:lc,right:lc,bottom:lc,pointerEvents:"none",...x},className:y,onMouseEnter:v.startPause,onMouseLeave:v.endPause},A.map(b=>{let S=b.position||o,I=v.calculateOffset(b,{reverseOrder:r,gutter:f,defaultPosition:o}),R=rA(S,I);return _.createElement(nA,{id:b.id,key:b.id,onHeightUpdate:v.updateHeight,className:b.visible?iA:"",style:R},b.type==="custom"?Sc(b.message,b):p?p(b):_.createElement(tA,{toast:b,position:S}))}))},Io=hr;const Td=({direction:r="down",show:o=!0,className:a="",style:f={}})=>{if(!o)return null;const p=r==="down"?"rotate(180 16 16)":"";return w.jsxs("div",{className:`arrow-hint-container ${r} ${a}`,style:f,children:[w.jsx("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"arrow-hint-svg",children:w.jsxs("g",{transform:p,children:[w.jsx("path",{d:"M16 6v16M16 22l-7-7M16 22l7-7",stroke:"url(#arrow-gradient)",strokeWidth:"3.2",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#arrow-glow)"}),w.jsxs("defs",{children:[w.jsxs("linearGradient",{id:"arrow-gradient",x1:"16",y1:"6",x2:"16",y2:"22",gradientUnits:"userSpaceOnUse",children:[w.jsx("stop",{stopColor:"#7f5fff"}),w.jsx("stop",{offset:"0.5",stopColor:"#2e8bff"}),w.jsx("stop",{offset:"1",stopColor:"#00e0ff"})]}),w.jsx("filter",{id:"arrow-glow",x:"-10",y:"-10",width:"52",height:"52",filterUnits:"userSpaceOnUse",children:w.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"2.5",floodColor:"#7f5fff",floodOpacity:"0.5"})})]})]})}),w.jsx("div",{className:"arrow-hint-text",children:"Tap Here"})]})},oA=({isOpen:r,onClose:o,onConfirm:a,userName:f})=>r?w.jsx("div",{className:"kick-modal",children:w.jsxs("div",{className:"kick-modal-content",children:[w.jsx("h2",{className:"kick-modal-title",children:"Kick User"}),w.jsxs("p",{className:"kick-modal-message",children:["Are you sure you want to kick ",f," from the lobby?"]}),w.jsxs("div",{className:"kick-modal-actions",children:[w.jsx("button",{onClick:a,className:"admin-button admin-button-danger",children:"Yes, Kick User"}),w.jsx("button",{onClick:o,className:"admin-button admin-button-primary",children:"Cancel"})]})]})}):null,aA=({isOpen:r,onClose:o,onConfirm:a})=>r?w.jsx("div",{className:"join-modal",children:w.jsxs("div",{className:"join-modal-content",children:[w.jsx("h2",{className:"join-modal-title",children:"Join Lobby"}),w.jsx("p",{className:"join-modal-message",children:"Are you sure you want to join? You will be paired up with your attendees."}),w.jsxs("div",{className:"join-modal-actions",children:[w.jsx("button",{onClick:a,className:"admin-button admin-button-join",children:"Yes, Join Lobby"}),w.jsx("button",{onClick:o,className:"admin-button admin-button-primary",children:"Cancel"})]})]})}):null,ex=(r,o)=>new Promise((a,f)=>{const x=new XMLSerializer().serializeToString(r),y=800,A=1e3,v=document.createElement("canvas");v.width=y,v.height=A;const b=v.getContext("2d");b.fillStyle="#ffffff",b.fillRect(0,0,y,A);const S=new window.Image;S.crossOrigin="anonymous",S.onload=()=>{const I=new window.Image;I.onload=()=>{const B=S.width/S.height*180,j=36,V=28,W=550,z=22,J=182+z,ne=j+z*1.2,oe=V+32,q=J+ne,ue=oe,$=A-q-ue,Ae=q+($-W)/2-35,Oe=(y-W)/2;let ke=2;const De=(y-B)/2;b.drawImage(S,De,ke,B,180),ke+=180+z,b.fillStyle="#000000",b.font=`600 ${j}px Helvetica, Arial, sans-serif`,b.textAlign="center",b.textBaseline="top",b.fillText("Scan to join the ice-breaking session!",y/2,ke),ke+=j+z*1.2,b.drawImage(I,Oe,Ae,W,W);const Q=A-32-V;b.font=`${V}px Helvetica, Arial, sans-serif`,b.fillStyle="#000000",b.textBaseline="top";const Le=`code (optional): ${o}`;b.fillText(Le,y/2,Q),v.toBlob(pe=>{pe?a(pe):f(new Error("Failed to create blob"))},"image/png")},I.onerror=()=>f(new Error("Failed to load QR code image")),I.src="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(x)))},S.onerror=()=>f(new Error("Failed to load logo image")),S.src="/assets/reuneo_test_9.png"}),lA=({lobbyState:r,playerCount:o,onStart:a,onEnd:f,lobbyCode:p,currentRound:x})=>{const y=r==="checkin",A=o>=2&&r==="checkin",v=r==="active",b=r==="active",S=r==="terminated",[I,R]=_.useState(null),[D,L]=_.useState({qr:!1}),[B,j]=_.useState(!1),V=_.useRef(!1),W=()=>{R("start")},z=()=>{R("end")},J=()=>{j(!0),R("checkin")},ne=()=>{I==="start"?(a(),Io.success("Rounds started!",{position:"top-center"})):I==="end"&&f(),R(null)},oe=()=>R(null);_.useEffect(()=>{V.current||r==="checkin"&&o===0&&(V.current=!0,j(!0),R("checkin"))},[r,o]);const q=(De,Se)=>De?"progress-arrow active-shimmer":Se?"progress-arrow available-shimmer":"progress-arrow inactive",ue=y&&!B&&o<6,$=r==="checkin"&&o>=6,Ae=r==="active"&&x+1>=12;function Oe(De,Se={}){const{silent:Q=!1}=Se,Le=URL.createObjectURL(De),pe=document.createElement("a");pe.href=Le,pe.download=`reuneo-lobby-${p}.png`,document.body.appendChild(pe),pe.click(),document.body.removeChild(pe),URL.revokeObjectURL(Le),Q||(L(ge=>({...ge,qr:!0})),setTimeout(()=>L(ge=>({...ge,qr:!1})),800))}const ke=()=>{const De=document.getElementById("modal-qr-svg");De&&ex(De,p).then(Se=>{Oe(Se,{silent:!0}),navigator.clipboard&&navigator.clipboard.write?navigator.clipboard.write([new window.ClipboardItem({"image/png":Se})]).then(()=>{L(Q=>({...Q,qr:!0})),setTimeout(()=>L(Q=>({...Q,qr:!1})),800)}).catch(()=>{L(Q=>({...Q,qr:!0})),setTimeout(()=>L(Q=>({...Q,qr:!1})),800)}):(L(Q=>({...Q,qr:!0})),setTimeout(()=>L(Q=>({...Q,qr:!1})),800))}).catch(Se=>{console.error("Error generating QR code image:",Se),alert("Failed to generate QR code image.")})};return w.jsxs("div",{className:"lobby-progress-bar",style:{marginTop:"-1rem",height:"40px"},children:[w.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[w.jsx("div",{className:q(y,!1),tabIndex:0,title:"Check-in phase",onClick:J,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"Start Checkin"}),w.jsx(Td,{direction:"down",show:ue})]}),w.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[w.jsx("div",{className:q(v,A&&!v),tabIndex:0,title:A?"Start rounds":"At least 2 players required",onClick:W,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"Start Rounds"}),w.jsx(Td,{direction:"down",show:$})]}),w.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[w.jsx("div",{className:q(S,b&&!S),tabIndex:0,title:b?"End rounds":"Cannot end yet",onClick:z,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"End Rounds"}),w.jsx(Td,{direction:"down",show:Ae})]}),I&&w.jsx("div",{className:"progress-modal-overlay",children:w.jsx("div",{className:"progress-modal",children:I==="checkin"?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"progress-modal-title",children:"Check-in: Print or Display this QR code to your attendees"}),w.jsx("div",{className:"progress-modal-message",children:"They scan to join. Once you have 6-10 people ready, click 'Start Rounds' - New arrivals will get paired up in the next rounds."}),w.jsxs("div",{className:"progress-modal-qr",onClick:ke,style:{cursor:"pointer",position:"relative"},children:[w.jsx(Qf,{value:`${window.location.origin}/lobby?code=${p}`,size:200,level:"H",includeMargin:!1,bgColor:"#ffffff",fgColor:"#000000",id:"modal-qr-svg"}),w.jsx("span",{className:"copy-icon modal-copy-icon","aria-label":"Copy",style:{position:"absolute",right:8,bottom:8,background:"#fff",borderRadius:"50%",padding:"2px"},children:w.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[w.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),w.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})}),D.qr&&w.jsx("span",{className:"modal-copied-feedback",style:{position:"absolute",left:"50%",bottom:"-1.5rem",transform:"translateX(-50%)",color:"#28a745",fontWeight:600,fontSize:"0.95rem"},children:"Copied!"})]}),w.jsxs("div",{style:{textAlign:"center",marginTop:"1rem",marginBottom:"0.5rem",fontSize:"1rem",color:"#3b3b3b",fontFamily:"Helvetica, Arial, sans-serif"},children:["code (optional): ",p]}),w.jsx("div",{className:"progress-modal-actions",children:w.jsx("button",{className:"progress-modal-btn confirm",onClick:oe,children:"Got it"})})]}):w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"progress-modal-title",children:I==="start"?"Are you sure you want to start rounds? - Dont worry new people can join in the next rounds.":"Are you sure you want to end the rounds?"}),w.jsx("div",{className:"progress-modal-actions",children:I==="start"?w.jsxs(w.Fragment,{children:[w.jsx("button",{className:"progress-modal-btn cancel",onClick:oe,children:"Not Yet"}),w.jsx("button",{className:"progress-modal-btn confirm",onClick:ne,children:"Start"})]}):w.jsxs(w.Fragment,{children:[w.jsx("button",{className:"progress-modal-btn cancel",onClick:oe,children:"Keep Going"}),w.jsx("button",{className:"progress-modal-btn confirm danger",onClick:ne,children:"End"})]})})]})})})]})},cA=({players:r})=>{const o=[...r.pairedPlayers?r.pairedPlayers.flat():[],...r.lobbyData?r.lobbyData:[]],a=10,f=o.slice(0,a),p=o.length-a,x=o.length;return w.jsxs("div",{className:"overlapping-profile-list-wrapper",style:{marginTop:"3rem"},children:[w.jsxs("div",{className:"overlapping-profile-list",children:[f.map((y,A)=>w.jsx("img",{src:y.pfp_data||"/assets/player_icon_trans.png",alt:y.name||"Player",className:"overlapping-profile-img",style:{zIndex:A+1}},y.username||y.name||A)),p>0&&w.jsxs("span",{className:"overlapping-profile-overflow",children:["+ ",p]})]}),w.jsxs("div",{className:"overlapping-profile-list-label",style:{marginTop:"0.5rem",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.1)"},children:["People joined: ",x]})]})},uA=()=>{const{user:r,userProfile:o,checkAuth:a,permissions:f}=_.useContext(gr),p=ar(),x=Or(),y=!1,A=Math.floor(9*60),{loadSound:v,seekTo:b,cancelSound:S,checkSound:I,soundEnabled:R,setSoundEnabled:D,isPlaying:L}=hf(),[B,j]=_.useState(!0),[V,W]=_.useState(!document.hidden),z=_.useRef(null),ne=new URLSearchParams(x.search).get("code"),[oe,q]=_.useState(ne||"test");_.useEffect(()=>{ne||(console.log("No lobby code found in URL, using default 'test' value"),(async()=>{try{const Fe=localStorage.getItem("access_token"),$e=await fetch(window.server_url+"/view_my_active_lobbies",{headers:{Authorization:`Bearer ${Fe}`}});if($e.ok){const ct=await $e.json();if(console.log("Active lobbies response:",ct),ct&&ct.lobbies&&ct.lobbies.length>0){const Ve=ct.lobbies[0];q(Ve),window.history.replaceState({},"",`/admin_lobby_view?code=${Ve}`)}}}catch(Fe){console.error("Error fetching active lobby:",Fe)}})())},[ne]);const[ue,$]=_.useState(!1),[Ae,Oe]=_.useState(null),[ke,De]=_.useState(!1),[Se,Q]=_.useState(null),[Le,pe]=_.useState(null),[ge,Me]=_.useState(null),[ae,Y]=_.useState(null),[te,be]=_.useState(null),[ze,Re]=_.useState({}),[fe,Ye]=_.useState([]),[He,nt]=_.useState(0),Ge=((Le==null?void 0:Le.length)||0)+((Se==null?void 0:Se.length)*2||0),[ft,me]=_.useState(!1);_.useEffect(()=>{I()?D(!0):D(!1)},[]),_.useEffect(()=>{const xe=()=>{const Fe=!document.hidden;Fe&&!V&&console.log("Page became visible - next poll will fetch latest data"),W(Fe)};return document.addEventListener("visibilitychange",xe),()=>{document.removeEventListener("visibilitychange",xe)}},[V]),_.useEffect(()=>{(ae==="terminated"||ae==="inactive")&&S()},[ae]),_.useEffect(()=>{if(a(),f!=="admin"&&f!=="organizer"){p("/");return}const xe=async $e=>{if(ze[$e])return ze[$e];try{const ct=await fetch(`${window.server_url}/pfp_small_icon?username=${encodeURIComponent($e)}`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(ct.ok){let Ve=await ct.text();Ve.startsWith('"')&&Ve.endsWith('"')&&(Ve=Ve.slice(1,-1));const At=Ve.startsWith("data:image")?Ve:`data:image/jpeg;base64,${Ve}`;return Re(Wt=>({...Wt,[$e]:At})),At}return null}catch(ct){return console.error(`Error fetching profile picture for ${$e}:`,ct),null}},Fe=setInterval(async()=>{try{const $e=!document.hidden,ct=await fetch(`${window.server_url}/admin_lobby_data?is_visible=${$e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,is_visible_t_f:$e?"t":"f",lobby_code:oe}});if(ct.ok){const Ve=await ct.json();console.log("Admin lobby data:",oe,Ve),(Ve.lobby_state==="inactive"||Ve.status==="inactive")&&S();const At=typeof Ve.round_time_left=="number"&&!isNaN(Ve.round_time_left)?Ve.round_time_left:0;if(z.current=At,z.current!=null&&Ve.lobby_state==="active"&&z.current!=0&&(b(A-z.current),console.log("seeking to",A-z.current)),Ve.lobby_state==="active"&&nt(Wt=>Ve.current_round>Wt?Ve.current_round:Wt),Ve.lobby_state==="terminated"&&(nt(0),S()),Ve&&Ve.unpaired_players){const Wt=await Promise.all(Ve.unpaired_players.map(async Gt=>{const Be=await xe(Gt.username);return{...Gt,pfp_data:Be}})),Ht=await Promise.all((Ve.pairs_data||[]).map(async Gt=>{const Be=await xe(Gt[0].username),he=await xe(Gt[1].username);return[{...Gt[0],pfp_data:Be},{...Gt[1],pfp_data:he}]}));pe(Wt),Q(Ht),Me(Ve.round_time_left),Y(Ve.lobby_state),be(Ve.lobby_duration||300),Ye(Ve.custom_tags||[])}else console.error("Invalid lobby data structure:",Ve),pe([]),Q([])}else console.error("Failed to fetch admin lobby data:",ct.status)}catch($e){console.error("Error fetching admin lobby data:",$e)}},1e3);return()=>clearInterval(Fe)},[ze]);const we=xe=>{Oe(xe),$(!0)},st=()=>{$(!1),Oe(null)},ht=()=>{Ae&&fetch(window.server_url+"/kick_user",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"},body:JSON.stringify({username:Ae.username,lobby_code:oe})}).then(xe=>{xe.ok?console.log(`User ${Ae.name} kicked successfully`):console.error(`Failed to kick user ${Ae.name}`)}).catch(xe=>{console.error("Error kicking user:",xe)}).finally(()=>{st()})},Pt=()=>{De(!0)},xt=()=>{De(!1)},qe=()=>{p(`/lobby?code=${oe}`),xt()};function Je(xe,Fe={}){const{silent:$e=!1}=Fe,ct=URL.createObjectURL(xe),Ve=document.createElement("a");Ve.href=ct,Ve.download=`reuneo-lobby-${oe}.png`,document.body.appendChild(Ve),Ve.click(),document.body.removeChild(Ve),URL.revokeObjectURL(ct),$e||Io.success("QR code downloaded!")}async function Nt(){const xe=document.getElementById("admin-qr-svg");xe&&ex(xe,oe).then(Fe=>{Je(Fe,{silent:!0}),navigator.clipboard&&navigator.clipboard.write?navigator.clipboard.write([new window.ClipboardItem({"image/png":Fe})]).then(()=>{Io.success("Downloaded and copied to clipboard!")}).catch(()=>{Io.success("QR code downloaded!")}):Io.success("QR code downloaded!")}).catch(Fe=>{console.error("Error generating QR code image:",Fe),Io.error("Failed to generate QR code image.")})}const Ie=()=>w.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.125)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},children:w.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",position:"relative",minWidth:"300px"},children:[w.jsx("button",{onClick:()=>j(!1),style:{color:"#144fff",position:"absolute",right:"10px",top:"10px",border:"none",background:"none",fontSize:"16px",cursor:"pointer",fontWeight:"bold",padding:"4px 8px"},children:"X"}),w.jsx("h2",{style:{marginTop:"5px"},children:"The Sound is Important"}),w.jsx("h3",{style:{marginTop:"5px"},children:"Raise your volume also"}),w.jsx("p",{style:{color:"#144dff"},children:"You'll need this for the best experience."}),w.jsx("button",{onClick:()=>{v(),j(!1)},style:{padding:"10px 20px",marginTop:"20px",backgroundColor:"#144dff",color:"#ffffff",border:"none",borderRadius:"14px",fontWeight:"bold",cursor:"pointer"},children:"Enable Sound"})]})}),yn=async()=>{await fetch(window.server_url+"/start_rounds",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,lobby_code:oe}})},Ct=async()=>{S(),(await fetch(window.server_url+"/terminate_lobby",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,lobby_code:oe}})).ok&&p("/")};return w.jsxs(w.Fragment,{children:[w.jsx(sA,{position:"top-center"}),w.jsxs("div",{className:"admin-lobby-container",children:[y,w.jsx("div",{className:"admin-view-logo",style:{cursor:"pointer"},children:w.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Reuneo Logo",style:{maxWidth:"85px",height:"auto",objectFit:"contain",transition:"transform 0.3s ease"},onClick:()=>p("/")})}),w.jsx(lA,{lobbyState:ae,playerCount:Ge,onStart:yn,onEnd:Ct,lobbyCode:oe,currentRound:He}),w.jsx(cA,{players:{pairedPlayers:Se,lobbyData:Le}}),w.jsxs("div",{className:"admin-lobby-dropdown-toggle",onClick:()=>me(xe=>!xe),style:{cursor:"pointer",background:"var(--primary-color)",color:"#f5f7ff",fontWeight:700,textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",fontSize:".75rem",borderRadius:ft?"14px 14px 0 0":"14px",padding:"0.5rem 1rem",margin:"0 auto",maxWidth:420,boxShadow:"0 2px 8px rgba(20,77,255,0.08)",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s",letterSpacing:"0.5px"},children:[ft?"Hide Controls":"More Controls",w.jsx("span",{style:{marginLeft:12,fontSize:"1.2em",transition:"transform 0.3s",display:"inline-block",transform:ft?"rotate(180deg)":"rotate(0deg)"},children:""})]}),w.jsxs("div",{className:"admin-lobby-body",style:{maxHeight:ft?1e3:0,overflow:"hidden",transition:"max-height 0.5s cubic-bezier(0.4,0,0.2,1)",opacity:ft?1:0,pointerEvents:ft?"auto":"none",marginBottom:ft?"2rem":0},children:[w.jsxs("div",{className:"admin-lobby-qr",onClick:Nt,style:{cursor:"pointer"},children:[w.jsxs("span",{className:"qr-label",style:{display:"flex",alignItems:"center",gap:"0.4rem",marginBottom:"0.5rem"},children:["People scan to join",w.jsx("span",{className:"copy-icon","aria-label":"Copy",children:w.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[w.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),w.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})})]}),w.jsx("div",{style:{position:"relative",display:"inline-block"},children:w.jsx(Qf,{value:`${window.location.origin}/lobby?code=${oe}`,size:140,level:"H",includeMargin:!1,bgColor:"#ffffff",fgColor:"#000000",id:"admin-qr-svg"})}),w.jsxs("div",{className:"lobby-code-display",onClick:()=>{navigator.clipboard.writeText(oe);const xe=document.querySelector(".lobby-code-display");xe.classList.add("copied"),setTimeout(()=>xe.classList.remove("copied"),250)},children:[w.jsx("span",{className:"lobby-code-label",children:"lobby code:"}),w.jsx("span",{className:"lobby-code-value",children:oe}),w.jsx("span",{className:"copy-icon","aria-label":"Copy",children:w.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[w.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),w.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})})]})]}),w.jsxs("div",{className:"admin-lobby-event-settings",children:[w.jsxs("div",{className:"admin-profile",children:[w.jsx("img",{src:o!=null&&o.image_data?`data:image/jpeg;base64,${o.image_data}`:"/assets/player_icon_trans.png",alt:"Your Profile",className:"admin-profile-picture"}),w.jsx("span",{className:"admin-profile-name",children:o!=null&&o.name?o.name.slice(0,20):r==null?void 0:r.slice(0,20)})]}),w.jsx("button",{onClick:Pt,className:"page-control-button page-control-join",style:{marginTop:".5rem"},children:"Join Rounds"}),w.jsxs("div",{className:"setting-item",style:{padding:"1rem"},children:[w.jsxs("span",{className:"setting-label",children:["Round Duration: ",w.jsxs("span",{className:"setting-value",children:[Math.floor(te/60)," min"]})]}),w.jsx("span",{className:"setting-label",style:{},children:"Tags:"}),fe&&fe.length>0&&w.jsx("div",{className:"setting-item",children:w.jsxs("div",{className:"tags-container",children:[fe.slice(0,3).map((xe,Fe)=>w.jsx("span",{className:"tag-pill",children:xe},Fe)),fe.length>3&&w.jsxs("span",{className:"tag-pill more-tags",children:["+",fe.length-3," more"]})]})})]})]}),w.jsx("div",{className:"admin-lobby-actions"})]}),(ae==="active"||ae==="interrim")&&ge&&w.jsx("div",{className:"admin-lobby-timer-container",children:w.jsxs("div",{className:"admin-lobby-timer-glass",children:[w.jsx(Jf,{isPlaying:ae==="active",duration:te,initialRemainingTime:ge,colors:["#144dff"],size:90,strokeWidth:12,trailColor:"url(#trailGradient)",onComplete:()=>({shouldRepeat:!1}),strokeLinecap:"round",children:({remainingTime:xe})=>{const Fe=Math.floor(xe/60),$e=Math.floor(xe%60);return w.jsxs("span",{className:`timer-text ${xe<=10?"timer-text-fadescale":""}`,children:[Fe,":",String($e).padStart(2,"0")]})}},`${ae}-${Math.floor(ge)}`),w.jsx("span",{className:"timer-subtext",children:"round time left"}),w.jsx("svg",{width:"0",height:"0",children:w.jsx("defs",{children:w.jsxs("linearGradient",{id:"trailGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[w.jsx("stop",{offset:"0%",stopColor:"#e0e7ff"}),w.jsx("stop",{offset:"100%",stopColor:"#f5f7ff"})]})})})]})}),ae!=="checkin"&&w.jsxs("div",{className:"admin-lobby-stats",children:[w.jsxs("div",{className:"stat-card",children:[w.jsx("div",{className:"stat-title",children:"Total Players"}),w.jsx("div",{className:"stat-value",children:((Le==null?void 0:Le.length)||0)+((Se==null?void 0:Se.length)*2||0)})]}),w.jsxs("div",{className:"stat-card",children:[w.jsx("div",{className:"stat-title",children:"Paired Players"}),w.jsx("div",{className:"stat-value",children:(Se==null?void 0:Se.length)*2||0})]}),w.jsxs("div",{className:"stat-card",children:[w.jsx("div",{className:"stat-title",children:"Unpaired Players"}),w.jsx("div",{className:"stat-value",children:(Le==null?void 0:Le.length)||0})]})]}),Se&&ae!=="checkin"&&w.jsx("div",{className:"admin-lobby-players",children:w.jsxs("div",{className:"player-section",children:[w.jsxs("div",{className:"section-header",children:["Paired Players: ",w.jsx("span",{className:"stat-value",style:{fontSize:"1.3rem"},children:(Se==null?void 0:Se.length)*2||0})]}),w.jsx("div",{className:"player-grid",children:Se.map((xe,Fe)=>{const $e=xe[0].match_details&&xe[0].match_details.opponent_matched_tags&&xe[0].match_details.opponent_matched_tags.length>0||xe[1].match_details&&xe[1].match_details.opponent_matched_tags&&xe[1].match_details.opponent_matched_tags.length>0;return w.jsxs("div",{className:"paired-player-card",children:[$e&&w.jsx("div",{className:"matched-pair-badge",children:"Matched"}),w.jsxs("div",{className:"paired-player",onClick:()=>we(xe[0]),children:[w.jsx("img",{src:xe[0].pfp_data,alt:xe[0].name,className:"paired-player-avatar"}),w.jsx("h3",{className:"paired-player-name",children:xe[0].name}),xe[0].match_details&&xe[0].match_details.opponent_matched_tags&&xe[0].match_details.opponent_matched_tags.length>0&&w.jsx("div",{className:"matching-tag-container",children:w.jsx("div",{className:"matched-player-tag",children:xe[0].match_details.opponent_matched_tags.map((ct,Ve)=>w.jsx("span",{className:"matching-tag-pill",children:ct},Ve))})})]}),w.jsxs("div",{className:"paired-player",onClick:()=>we(xe[1]),children:[w.jsx("img",{src:xe[1].pfp_data,alt:xe[1].name,className:"paired-player-avatar"}),w.jsx("h3",{className:"paired-player-name",children:xe[1].name}),xe[1].match_details&&xe[1].match_details.opponent_matched_tags&&xe[1].match_details.opponent_matched_tags.length>0&&w.jsx("div",{className:"matching-tag-container",children:w.jsx("div",{className:"matched-player-tag",children:xe[1].match_details.opponent_matched_tags.map((ct,Ve)=>w.jsx("span",{className:"matching-tag-pill",children:ct},Ve))})})]})]},Fe)})})]})}),Le&&w.jsx("div",{className:"admin-lobby-players",children:w.jsxs("div",{className:"player-section",children:[w.jsxs("div",{className:"section-header",children:[ae==="checkin"?"People Joined":"Unpaired Players",": ",w.jsx("span",{className:"stat-value",style:{fontSize:"1.3rem"},children:(Le==null?void 0:Le.length)||0})]}),w.jsx("div",{className:"player-grid",children:Le.map((xe,Fe)=>w.jsxs("div",{className:"player-card",onClick:()=>we(xe),children:[w.jsx("img",{src:xe.pfp_data,alt:xe.name,className:"player-avatar"}),w.jsx("h3",{className:"player-name",children:xe.name})]},Fe))})]})}),w.jsx(aA,{isOpen:ke,onClose:xt,onConfirm:qe}),w.jsx(oA,{isOpen:ue,onClose:st,onConfirm:ht,userName:(Ae==null?void 0:Ae.name)||"this user"})]}),R||!B||ae=="checkin"||ae==null||L?null:w.jsx(Ie,{})]})},dA=()=>{const r=ar(),{user:o}=_.useContext(gr),a=()=>{window.location.href="https://reunio.app/become-an-organizer"};return w.jsxs("div",{className:"product-selection-container",children:[w.jsxs("video",{className:"background-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,children:[w.jsx("source",{src:"/assets/purchase_plan_video.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]}),w.jsxs("div",{className:"product-selection-content",children:[w.jsx("div",{className:"product-selection-header",children:w.jsx("h1",{children:"Product Selection"})}),w.jsxs("div",{className:"plans-section",children:[w.jsx("h2",{children:"Available Plans"}),w.jsxs("div",{className:"plan-card",children:[w.jsx("h3",{children:"Organizer Plan"}),w.jsxs("div",{className:"plan-description",children:[w.jsx("p",{children:"Create experiences for your community with our beta plan."}),w.jsxs("ul",{children:[w.jsx("li",{children:"Create unlimited experiences"}),w.jsx("li",{children:"Access to organizer dashboard"}),w.jsx("li",{children:"Priority customer support"})]})]}),w.jsx("button",{className:"purchase-button",onClick:a,children:"Contact Us"})]})]}),w.jsx("button",{className:"back-button",onClick:()=>r("/"),children:"Home"})]})]})},fA=()=>{const{user:r,userProfile:o,checkAuth:a,permissions:f}=_.useContext(gr),[p,x]=_.useState(""),[y,A]=_.useState(""),[v,b]=_.useState(!1),[S,I]=_.useState(""),[R,D]=_.useState(!1),[L,B]=_.useState([]),[j,V]=_.useState(""),[W,z]=_.useState("5"),[J,ne]=_.useState("0"),[oe,q]=_.useState(!1),[ue,$]=_.useState(null),[Ae,Oe]=_.useState(!1),[ke,De]=_.useState(null),[Se,Q]=_.useState(null),[Le,pe]=_.useState(""),[ge,Me]=_.useState(""),[ae,Y]=_.useState(null),[te,be]=_.useState(null),[ze,Re]=_.useState(""),[fe,Ye]=_.useState(!1),[He,nt]=_.useState(!1),[Ge,ft]=_.useState({x:0,y:0}),[me,we]=_.useState(1),[st,ht]=_.useState(null),Pt=8,xt=ar(),qe=_.useRef(null);_.useEffect(()=>{window.scrollTo(0,0),r&&(x(r),A(r)),qe.current&&qe.current.focus()},[r]);const Je=Be=>{const he=/^[a-z0-9]+$/;return Be.length>=2&&he.test(Be)},Nt=Be=>{const he=Be.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");A(he),D(!0),setTimeout(()=>{D(!1)},500)},Ie=()=>{if(j.includes(",")){const Be=j.split(",").map(gt=>gt.startsWith(" ")?gt.substring(1):gt),he=[];Be.forEach(gt=>{const ut=gt.trim();ut&&!L.includes(ut)&&!he.includes(ut)&&he.push(ut)}),he.length>0&&B([...L,...he]),V("")}else j.trim()&&!L.includes(j.trim())&&(B([...L,j.trim()]),V(""))},yn=Be=>{B(L.filter(he=>he!==Be))},Ct=Be=>{Be.key==="Enter"&&j.trim()&&(Be.preventDefault(),Ie())},xe=Be=>{Be==="icebreaker"?L.length>0||j.trim()?(De("icebreaker"),Oe(!0)):($("icebreaker"),B([]),V("")):Be==="custom"&&$("custom")},Fe=()=>{$(ke),B([]),V(""),Oe(!1),De(null)},$e=()=>{Oe(!1),De(null)},ct=(Be,he,gt)=>new Promise(ut=>{const Mt=new Image;Mt.onload=()=>{const Mn=document.createElement("canvas"),Dr=Mn.getContext("2d");let{width:Un,height:pt}=Mt;Un>pt?Un>he&&(pt=pt*he/Un,Un=he):pt>gt&&(Un=Un*gt/pt,pt=gt),Mn.width=Un,Mn.height=pt,Dr.drawImage(Mt,0,0,Un,pt);const Ln=Mn.toDataURL("image/jpeg",.7);ut(Ln)},Mt.src=URL.createObjectURL(Be)}),Ve=async Be=>{const he=Be.target.files[0];if(he){if(Re(""),nt(!0),!["image/jpeg","image/jpg","image/png"].includes(he.type)){Re("Invalid format. Please upload a JPG or PNG image."),nt(!1);return}if(he.size>2*1024*1024){Re("File too large. Please choose an image under 2MB."),nt(!1);return}try{const gt=await ct(he,400,400);Q(he),Y(gt),Ye(!0),nt(!1)}catch(gt){console.error("Error processing image:",gt),Re("Error processing image. Please try again."),nt(!1)}}},At=(Be,he)=>{ht(he)},Wt=async()=>{try{nt(!0);const Be=await af(ae,st);be(Be),Ye(!1),nt(!1)}catch(Be){console.error("Error cropping logo:",Be),Re("Error processing image. Please try again."),Ye(!1),nt(!1)}},Ht=()=>{Q(null),Y(null),be(null),Ye(!1),nt(!1),ft({x:0,y:0}),we(1),ht(null),Re("");const Be=document.getElementById("logoUpload");Be&&(Be.value="")},Gt=async Be=>{if(Be.preventDefault(),!Je(y)){I("Lobby code must be at least 2 characters long and contain only lowercase letters and numbers");return}b(!0),I("");const he=parseInt(W)*60+parseInt(J);let gt=null;te&&(gt=te.split(",")[1]);try{const ut={lobby_code:y,custom_tags:ue==="custom"?L:[],lobby_duration:he,show_table_numbers:oe};gt&&(ut.logo_icon=gt),Le.trim()&&(ut.logo_name=Le.trim()),ge.trim()&&(ut.logo_hyperlink=ge.trim());const Mt=await fetch(window.server_url+"/create_lobby",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"},body:JSON.stringify(ut)});if(Mt.ok)console.log("Lobby created successfully"),console.log(await Mt.json()),xt(`/admin_lobby_view?code=${y}`);else{const Mn=await Mt.json();I(Mn.message||"Failed to create lobby"),console.error("Failed to create lobby")}}catch(ut){I("An error occurred while creating the lobby"),console.error("Error creating lobby:",ut)}finally{b(!1)}};return w.jsxs("div",{className:"create-lobby-background",children:[w.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Reunio Logo",className:"logo-image",onClick:()=>xt(-1)}),w.jsxs("div",{className:"create-lobby-container",children:[w.jsx("h1",{className:"create-lobby-title",children:"Create a New Lobby"}),w.jsxs("form",{onSubmit:Gt,className:"create-lobby-form",children:[w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"lobbyCode",children:"Lobby Code"}),w.jsx("input",{ref:qe,type:"text",id:"lobbyCode",value:y,onChange:Nt,placeholder:"Enter lobby code (lowercase letters and numbers only)",required:!0,className:`form-input ${R?"typing":""}`,autoComplete:"off"}),w.jsx("div",{className:"input-hint",children:"lowercase letters and numbers only"})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Round Duration"}),w.jsxs("div",{className:"duration-input-container",children:[w.jsxs("div",{className:"duration-input-group",children:[w.jsx("input",{type:"number",id:"minutes",value:W,onChange:Be=>{const he=Be.target.value;(he===""||parseInt(he)>0&&parseInt(he)<=Pt)&&(z(he),parseInt(he)===Pt&&ne("0"))},min:"1",max:Pt,placeholder:`1-${Pt}`,className:"form-input duration-input",autoComplete:"off"}),w.jsx("label",{htmlFor:"minutes",className:"duration-label",children:"Minutes"})]}),w.jsxs("div",{className:"duration-input-group",children:[w.jsx("input",{type:"number",id:"seconds",value:J,onChange:Be=>{const he=Be.target.value;(he===""||parseInt(he)>=0&&parseInt(he)<=59)&&ne(he)},min:"0",max:"59",placeholder:"0-59",className:"form-input duration-input",autoComplete:"off",disabled:parseInt(W)===Pt}),w.jsx("label",{htmlFor:"seconds",className:"duration-label",children:"Seconds"})]})]}),w.jsxs("div",{className:"input-hint",children:["Maximum total duration is ",Pt," minutes"]})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"showTableNumbers",children:"Table Numbers"}),w.jsx("input",{type:"checkbox",id:"showTableNumbers",checked:oe,onChange:Be=>q(Be.target.checked),className:"form-input checkbox-input"}),w.jsx("div",{className:"input-hint",children:"Recommended for events with 50+ people"}),w.jsx("div",{className:"input-hint",children:"Make sure to provide table numbers"})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Matchmaking Categories"}),w.jsxs("div",{className:"matchmaking-tabs",children:[w.jsx("button",{type:"button",className:`tab-button ${ue==="icebreaker"?"tab-selected":""}`,onClick:()=>xe("icebreaker"),children:"Community Ice Breaker"}),w.jsx("button",{type:"button",className:`tab-button ${ue==="custom"?"tab-selected":""}`,onClick:()=>xe("custom"),children:"Custom Matching"})]}),ue==="custom"&&w.jsxs("div",{className:"custom-matching-section",children:[w.jsxs("div",{className:"tag-input-container",children:[w.jsx("input",{type:"text",id:"tagInput",value:j,onChange:Be=>V(Be.target.value),onKeyDown:Ct,placeholder:"Add categories (press + to add)",className:"form-input",autoComplete:"off"}),w.jsx("button",{type:"button",onClick:Ie,className:"tag-add-button",children:"+"})]}),L.length>0&&w.jsx("div",{className:"tag-list",children:L.map((Be,he)=>w.jsxs("div",{className:"tag-item",children:[Be,w.jsx("button",{type:"button",onClick:()=>yn(Be),className:"tag-remove-button",children:""})]},he))}),w.jsx("div",{className:"input-hint",children:"If you want to match people based on categories"})]})]}),w.jsxs("div",{className:"form-group logo-upload-section",children:[w.jsx("label",{children:"Sponsor Logo"}),!te&&!fe&&w.jsxs(w.Fragment,{children:[He?w.jsx("div",{className:"logo-processing",children:"Processing..."}):w.jsxs(w.Fragment,{children:[w.jsx("input",{type:"file",id:"logoUpload",accept:"image/jpeg,image/jpg,image/png",onChange:Ve,style:{display:"none"}}),w.jsx("button",{type:"button",onClick:()=>document.getElementById("logoUpload").click(),className:"logo-upload-button",children:"Upload Logo"})]}),ze&&w.jsx("div",{className:"logo-error-message",children:ze})]}),fe&&ae&&w.jsxs("div",{className:"logo-crop-container",children:[w.jsx("div",{className:"logo-crop-area",children:w.jsx(of,{image:ae,crop:Ge,zoom:me,aspect:1,onCropChange:ft,onZoomChange:we,onCropComplete:At})}),w.jsxs("div",{className:"logo-crop-controls",children:[w.jsx("button",{type:"button",onClick:Wt,className:"logo-save-button",disabled:He,children:He?"Processing...":"Save Crop"}),w.jsx("button",{type:"button",onClick:Ht,className:"logo-cancel-button",children:"Cancel"})]})]}),te&&!fe&&w.jsx("div",{className:"logo-preview-container",children:w.jsxs("div",{className:"logo-preview",children:[w.jsx("img",{src:te,alt:"Logo preview",className:"logo-preview-image"}),w.jsx("button",{type:"button",onClick:Ht,className:"logo-remove-button",children:""})]})}),!1]}),S&&w.jsx("div",{className:"error-message",children:S}),w.jsx("button",{type:"submit",className:"submit-button",disabled:v,children:v?"Creating...":"Create Lobby"})]})]}),Ae&&w.jsx("div",{className:"modal-overlay",children:w.jsxs("div",{className:"modal-content",children:[w.jsx("h3",{children:"Switch to Community Ice Breaker?"}),w.jsx("p",{children:"This will clear your current matching categories."}),w.jsxs("div",{className:"modal-buttons",children:[w.jsx("button",{type:"button",onClick:$e,className:"modal-button modal-cancel",children:"Cancel"}),w.jsx("button",{type:"button",onClick:Fe,className:"modal-button modal-confirm",children:"Confirm"})]})]})})]})},hA=r=>{try{const o=new URLSearchParams(r||window.location.search),a=o.get("via")||"",f=o.get("rewardful")||o.get("rewardful_referral")||"",p=typeof window<"u"&&window.Rewardful&&window.Rewardful.referral||"",x=typeof window<"u"&&window.localStorage&&window.localStorage.getItem("rewardful_referral")||"",y=p||f||a||x||"";return y&&typeof window<"u"&&window.localStorage&&window.localStorage.setItem("rewardful_referral",y),y}catch{return""}},pA=()=>{const{login:r,user:o,checkAuth:a,permissions:f}=_.useContext(gr),[p,x]=_.useState(""),[y,A]=_.useState(""),[v,b]=_.useState(""),[S,I]=_.useState(""),[R,D]=_.useState(""),[L,B]=_.useState(""),[j,V]=_.useState({}),[W,z]=_.useState(""),[J,ne]=_.useState(!1),oe=ar(),q=Or();_.useEffect(()=>{localStorage.getItem("access_token")&&!o&&a()},[]),_.useEffect(()=>{f!==null&&(f==="admin"||f==="organizer")&&oe("/")},[f,oe]),_.useEffect(()=>{(async()=>{if(o!==null&&f!==null&&f!=="admin"&&f!=="organizer")try{const fe=localStorage.getItem("access_token");if(!fe)return;const Ye=await fetch(`${window.server_url}/check-subscription-status`,{headers:{Authorization:`Bearer ${fe}`}});Ye.ok&&(await Ye.json()).has_access===!0&&oe("/organizer-account-details")}catch(fe){console.error("Error checking subscription status:",fe)}})()},[o,f,oe]);const ue=Re=>{const fe=/^[a-z0-9]+$/;return Re.length>=2&&fe.test(Re)},$=Re=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Re)&&Re.trim()!=="",Ae=Re=>Re.replace(/\D/g,"").length===10,Oe=Re=>Re.trim().length>=2,ke=Re=>{const fe=Re.replace(/\D/g,"");return fe.length===0?"":fe.length<=3?`(${fe}`:fe.length<=6?`(${fe.slice(0,3)}) ${fe.slice(3)}`:`(${fe.slice(0,3)}) ${fe.slice(3,6)}-${fe.slice(6,10)}`},De=Re=>Re.replace(/\D/g,""),Se=Re=>{const fe=Re.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");x(fe),W&&z("")},Q=Re=>{A(Re.target.value),W&&z(""),j.email&&V(fe=>({...fe,email:""}))},Le=Re=>{const fe=Re.target.value;b(fe),W&&z(""),j.phone&&V(Ye=>({...Ye,phone:""}))},pe=()=>{const Re=ke(v);b(Re),Re&&!Ae(Re)?V(fe=>({...fe,phone:"Invalid phone number"})):V(fe=>({...fe,phone:""}))},ge=Re=>{const fe=Re.target.value;I(fe),W&&z(""),j.cityState&&V(Ye=>({...Ye,cityState:""}))},Me=()=>{S&&!Oe(S)?V(Re=>({...Re,cityState:"City/State must be at least 2 characters"})):V(Re=>({...Re,cityState:""}))},ae=Re=>{D(Re.target.value),j.eventType&&V(fe=>({...fe,eventType:""}))},Y=Re=>{B(Re.target.value),j.avgAttendees&&V(fe=>({...fe,avgAttendees:""}))},te=async Re=>{Re.preventDefault(),z(""),ne(!0);const fe=o!==null;if(!fe&&(!p||!ue(p))){z("Username must be at least 2 characters and contain only lowercase letters and numbers"),ne(!1);return}if(!y||!$(y)){V(ft=>({...ft,email:"Please enter a valid email address"})),z("Please enter a valid email address"),ne(!1);return}const Ye=De(v);if(!v||!Ae(v)){V(ft=>({...ft,phone:"Please enter a valid phone number"})),z("Please enter a valid phone number"),ne(!1);return}if(!S||!Oe(S)){V(ft=>({...ft,cityState:"City/State is required (minimum 2 characters)"})),z("City/State is required (minimum 2 characters)"),ne(!1);return}const He=new URLSearchParams(q.search),nt=hA(q.search),Ge=He.get("ref")||He.get("affiliate_code")||"";if(fe){const ft=localStorage.getItem("access_token");if(!ft){z("Authentication required. Please log in again."),ne(!1);return}try{if(!(await fetch(`${window.server_url}/update_profile`,{method:"POST",headers:{Authorization:`Bearer ${ft}`,"Content-Type":"application/json"},body:JSON.stringify({phone_number:Ye,city_state:S,event_type:R||"",avg_attendees:L||""})})).ok)throw new Error("Failed to update profile");const we=await fetch(`${window.server_url}/create-checkout-session`,{method:"POST",headers:{Authorization:`Bearer ${ft}`,"Content-Type":"application/json"},body:JSON.stringify({email:y,rewardful_referral:nt,affiliate_code:Ge})}),st=await we.json();if(!we.ok||st.error){if(st.error&&st.error.includes("already have an active subscription")){oe("/organizer-account-details");return}z(st.error||"Failed to create checkout session. Please try again."),ne(!1);return}window.location.href=st.checkout_url;return}catch(me){console.error("Error creating checkout session:",me),z("An error occurred. Please try again."),ne(!1);return}}try{const me=await fetch(window.server_url+"/signup",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:p,password:p})}),we=await me.json();if(we.error==="Username already taken"){z("Username is taken"),ne(!1);return}if(!me.ok){z(we.message||"Signup failed"),ne(!1);return}r(we),await a();const st=localStorage.getItem("access_token");if(!st)throw new Error("Authentication failed");const ht=await fetch("/assets/fakeprofile.png");if(!ht.ok)throw new Error("Failed to fetch profile image");const xt=await(await ht.blob()).arrayBuffer(),qe=btoa(new Uint8Array(xt).reduce((yn,Ct)=>yn+String.fromCharCode(Ct),""));if(!(await fetch(`${window.server_url}/update_profile`,{method:"POST",headers:{Authorization:`Bearer ${st}`,"Content-Type":"application/json"},body:JSON.stringify({name:p,image_data:qe,phone_number:Ye,city_state:S,event_type:R||"",avg_attendees:L||""})})).ok)throw new Error("Failed to update profile");await a();const Nt=await fetch(`${window.server_url}/create-checkout-session`,{method:"POST",headers:{Authorization:`Bearer ${st}`,"Content-Type":"application/json"},body:JSON.stringify({email:y,rewardful_referral:nt,affiliate_code:Ge})}),Ie=await Nt.json();if(!Nt.ok||Ie.error){if(Ie.error&&Ie.error.includes("already have an active subscription")){oe("/organizer-account-details");return}throw new Error(Ie.error||"Failed to create checkout session")}window.location.href=Ie.checkout_url}catch(ft){console.error("Error:",ft),z("An error occurred. Please try again."),ne(!1)}},be=o===null,ze=J||f==="admin"||f==="organizer";return w.jsxs("div",{className:"signup-container",children:[w.jsx("button",{onClick:()=>oe("/"),className:"homescreen-button",children:"Home"}),w.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),w.jsx("h3",{className:"signup-header",children:"Become an Organizer"}),w.jsx("div",{className:"step-form-container",children:w.jsxs("form",{onSubmit:te,children:[w.jsxs("div",{style:{display:be?"block":"none"},children:[w.jsx("label",{className:"step-label",children:"Username"}),w.jsx("input",{type:"text",value:p,onChange:Se,placeholder:"Enter a username",className:"step-input",autoFocus:be}),p.length>0&&w.jsxs("div",{className:"username-info-message",children:[w.jsxs("svg",{className:"info-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[w.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),w.jsx("path",{d:"M8 5V7M8 11V9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),w.jsx("circle",{cx:"8",cy:"5",r:"0.5",fill:"currentColor"})]}),w.jsx("span",{children:"This will be your temporary password"})]})]}),w.jsxs("div",{style:{marginTop:be?"20px":"0"},children:[w.jsxs("label",{className:"step-label",children:["Email",j.email&&w.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[w.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),w.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),w.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),w.jsx("input",{type:"email",value:y,onChange:Q,placeholder:"Enter your email",className:`step-input ${j.email?"input-error":""}`,autoFocus:!be})]}),w.jsxs("div",{style:{marginTop:"20px"},children:[w.jsxs("label",{className:"step-label",children:["Phone Number",j.phone&&w.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[w.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),w.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),w.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),w.jsx("input",{type:"tel",value:v,onChange:Le,onBlur:pe,placeholder:"(123) 456-7890",className:`step-input ${j.phone?"input-error":""}`})]}),w.jsxs("div",{style:{marginTop:"20px"},children:[w.jsxs("label",{className:"step-label",children:["City / State",j.cityState&&w.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[w.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),w.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),w.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),w.jsx("input",{type:"text",value:S,onChange:ge,onBlur:Me,placeholder:"City / State",className:`step-input ${j.cityState?"input-error":""}`})]}),w.jsxs("div",{style:{marginTop:"20px"},children:[w.jsx("label",{className:"step-label",children:"What events do you host?"}),w.jsxs("select",{value:R,onChange:ae,className:"step-select",children:[w.jsx("option",{value:"",children:"Select an option..."}),w.jsx("option",{value:"Hospitality-Restaurants",children:"Hospitality-Restaurants"}),w.jsx("option",{value:"Social",children:"Social"}),w.jsx("option",{value:"Residential",children:"Residential"}),w.jsx("option",{value:"Business Networking",children:"Business Networking"}),w.jsx("option",{value:"Event Specialist",children:"Event Specialist"}),w.jsx("option",{value:"Education",children:"Education"}),w.jsx("option",{value:"HR-Team Building",children:"HR-Team Building"}),w.jsx("option",{value:"Corporate",children:"Corporate"}),w.jsx("option",{value:"Co-working",children:"Co-working"}),w.jsx("option",{value:"Dating",children:"Dating"}),w.jsx("option",{value:"Other",children:"Other"})]})]}),w.jsxs("div",{style:{marginTop:"20px"},children:[w.jsx("label",{className:"step-label",children:"Avg # of attendees"}),w.jsxs("select",{value:L,onChange:Y,className:"step-select",children:[w.jsx("option",{value:"",children:"Select an option..."}),w.jsx("option",{value:"5-15",children:"5-15"}),w.jsx("option",{value:"15-30",children:"15-30"}),w.jsx("option",{value:"30-50",children:"30-50"}),w.jsx("option",{value:"50-75",children:"50-75"}),w.jsx("option",{value:"75-100",children:"75-100"}),w.jsx("option",{value:"100-150",children:"100-150"}),w.jsx("option",{value:"150-200",children:"150-200"}),w.jsx("option",{value:"200+",children:"200+"})]})]}),W&&w.jsx("div",{className:"error-message",style:{marginTop:"15px",marginBottom:"10px"},children:W}),w.jsx("button",{type:"submit",className:"primary-button",disabled:ze,style:{marginTop:"20px"},children:J?"Loading...":"Submit"})]})})]})},gA=()=>{const[r,o]=_.useState(!1),[a,f]=_.useState(""),p=_.useRef(null),x=ar(),y=Or();return _.useEffect(()=>{const v=new URLSearchParams(y.search).get("session_id");return(async()=>{let S="/";if(!v){f("Missing session ID"),o(!0),p.current=setTimeout(()=>{o(!1),x(S)},2e3);return}try{const I=localStorage.getItem("access_token");if(!I){f("Authentication required"),o(!0),p.current=setTimeout(()=>{o(!1),x(S)},2e3);return}const R=await fetch(`${window.server_url}/organizer-signup-success?session_id=${v}`,{headers:{Authorization:`Bearer ${I}`}}),D=await R.json();if(!R.ok||D.error)console.error("Payment verification failed:",D.error),f(D.error||"Payment verification failed");else try{const L=await fetch(`${window.server_url}/view_my_active_lobbies`,{headers:{Authorization:`Bearer ${I}`}});if(L.ok){const B=await L.json();S=!!(B&&Array.isArray(B.lobbies)&&B.lobbies.length>0)?"/":"/create_lobby"}else S="/"}catch(L){console.error("Error checking active lobbies:",L),S="/"}}catch(I){console.error("Error verifying payment:",I),f("Failed to verify payment")}o(!0),p.current=setTimeout(()=>{o(!1),x(S)},2e3)})(),()=>{p.current&&(clearTimeout(p.current),p.current=null)}},[y.search,x]),r?w.jsxs("div",{className:"success-overlay",children:[w.jsx("div",{className:"success-text",children:"Success! You're now an organizer!"}),a&&w.jsx("div",{className:"success-error",style:{marginTop:"20px"},children:a})]}):w.jsx("div",{className:"signup-container",children:w.jsx("div",{className:"loading-message",children:"Processing..."})})},mA=()=>{const{user:r,checkAuth:o,permissions:a}=_.useContext(gr),f=ar(),[p,x]=_.useState(null),[y,A]=_.useState(!0),[v,b]=_.useState(!1),[S,I]=_.useState(""),[R,D]=_.useState(!1),[L,B]=_.useState(!1);_.useEffect(()=>{a!==null&&a!=="admin"&&a!=="organizer"&&f("/organizer-signup")},[a,f]),_.useEffect(()=>{r&&(async()=>{try{const z=localStorage.getItem("access_token");if(!z){f("/organizer-signup");return}const J=await fetch(`${window.server_url}/organizer-account-details`,{headers:{Authorization:`Bearer ${z}`}}),ne=await J.json();if(!J.ok||ne.error){if((a==="admin"||a==="organizer")&&ne.has_subscription!==!1){I(ne.error||"Some subscription details may be incomplete"),x(ne),A(!1);return}if(ne.has_subscription===!1){f("/organizer-signup");return}I(ne.error||"Failed to load account details"),ne.has_subscription!==!1&&x(ne),A(!1);return}if(ne.has_subscription===!1){f("/organizer-signup");return}x(ne)}catch(z){console.error("Error fetching account details:",z),I("Failed to load account details. Please try again.")}finally{A(!1)}})()},[r,a,f]),_.useEffect(()=>(R?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[R]);const j=W=>W?new Date(W*1e3).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):null,V=async()=>{b(!0),I("");try{const W=localStorage.getItem("access_token");if(!W){I("Authentication required"),b(!1);return}const z=await fetch(`${window.server_url}/cancel-subscription`,{method:"POST",headers:{Authorization:`Bearer ${W}`,"Content-Type":"application/json"}}),J=await z.json();if(!z.ok||J.error){I(J.error||"Failed to cancel subscription"),b(!1),D(!1);return}B(!0),D(!1),setTimeout(()=>{f("/")},1500)}catch(W){console.error("Error canceling subscription:",W),I("An error occurred. Please try again."),b(!1),D(!1)}};return y?w.jsx("div",{className:"signup-container",children:w.jsx("div",{className:"loading-message",children:"Loading account details..."})}):!p&&!y?w.jsxs("div",{className:"signup-container",children:[w.jsx("button",{onClick:()=>f("/"),className:"homescreen-button",children:"Home"}),w.jsx("div",{className:"error-message",children:S||"No account details found"})]}):p?w.jsxs("div",{className:"signup-container",children:[w.jsx("button",{onClick:()=>f("/"),className:"homescreen-button",children:"Home"}),w.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),w.jsx("h3",{className:"signup-header",children:"Organizer Account Details"}),w.jsx("div",{className:"step-form-container",children:w.jsxs("div",{className:"account-details-content",children:[S&&w.jsx("div",{className:"error-message",style:{marginBottom:"20px"},children:S}),p.subscription_status&&w.jsxs("div",{className:"detail-row",children:[w.jsx("span",{className:"detail-label",children:"Subscription Status:"}),w.jsx("span",{className:`detail-value status-${p.subscription_status}`,children:p.subscription_status})]}),p.email&&w.jsxs("div",{className:"detail-row",children:[w.jsx("span",{className:"detail-label",children:"Email:"}),w.jsx("span",{className:"detail-value",children:p.email})]}),p.billing_period&&w.jsxs("div",{className:"detail-row",children:[w.jsx("span",{className:"detail-label",children:"Billing Period:"}),w.jsx("span",{className:"detail-value",children:p.billing_period})]}),p.amount!==null&&p.amount!==void 0&&w.jsxs("div",{className:"detail-row",children:[w.jsx("span",{className:"detail-label",children:"Amount:"}),w.jsxs("span",{className:"detail-value",children:["$",p.amount," ",p.currency||""]})]}),p.current_period_start&&j(p.current_period_start)&&w.jsxs("div",{className:"detail-row",children:[w.jsx("span",{className:"detail-label",children:"Current Period Start:"}),w.jsx("span",{className:"detail-value",children:j(p.current_period_start)})]}),p.current_period_end&&j(p.current_period_end)&&w.jsxs("div",{className:"detail-row",children:[w.jsx("span",{className:"detail-label",children:"Current Period End:"}),w.jsx("span",{className:"detail-value",children:j(p.current_period_end)})]}),p.cancel_at_period_end&&w.jsxs("div",{className:"detail-row",children:[w.jsx("span",{className:"detail-label",children:"Cancellation:"}),w.jsx("span",{className:"detail-value",children:"Will cancel at period end"})]}),w.jsx("button",{onClick:()=>D(!0),className:"primary-button cancel-button",style:{marginTop:"30px"},children:"Cancel Subscription"})]})}),R&&w.jsx("div",{className:"modal-overlay",onClick:W=>W.stopPropagation(),children:w.jsxs("div",{className:"modal-content",onClick:W=>W.stopPropagation(),children:[w.jsx("h3",{children:"Cancel Subscription"}),w.jsx("p",{children:"Are you sure you want to cancel your subscription?"}),w.jsxs("div",{className:"modal-buttons",children:[w.jsx("button",{className:"modal-button modal-cancel",onClick:()=>D(!1),disabled:v,children:"Cancel"}),w.jsx("button",{className:"modal-button modal-confirm",onClick:V,disabled:v,children:v?"Processing...":"Confirm"})]})]})}),L&&w.jsx("div",{className:"toast-container",children:w.jsx("div",{className:"toast-message",children:"Subscription canceled successfully"})})]}):null},nf=({size:r=60,className:o=""})=>w.jsx("div",{className:`attendees-spinner ${o}`,style:{width:r,height:r},children:w.jsx("div",{className:"attendees-spinner-inner"})}),Id=["#6366f1","#8b5cf6","#ec4899","#f59e0b","#10b981","#3b82f6","#ef4444","#14b8a6","#f97316","#a855f7","#06b6d4","#84cc16"],xA=r=>{if(!r)return Id[0];let o=0;for(let f=0;f<r.length;f++)o=r.charCodeAt(f)+((o<<5)-o);const a=Math.abs(o)%Id.length;return Id[a]},rf=tn.memo(({tag:r})=>{const o=xA(r);return w.jsx("span",{className:"attendee-modal-tag-pill",style:{background:o},children:r})});rf.displayName="TagPill";const yA=r=>{if(!r)return"Date not available";let o;if(typeof r=="number")o=r<1e10?new Date(r*1e3):new Date(r);else if(typeof r=="string")o=new Date(r);else return"Date not available";return isNaN(o.getTime())?"Date not available":o.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},wA=({attendees:r=[]})=>{const o=_.useRef(null),a=_.useRef(null),f=_.useRef(null),[p,x]=_.useState(null),[y,A]=_.useState(!1),[v,b]=_.useState({}),[S,I]=_.useState(!1),[R,D]=_.useState({}),L=_.useRef(-1),B=_.useRef(null),[j,V]=_.useState(!1),[W,z]=_.useState(null),[J,ne]=_.useState({}),[oe,q]=_.useState(!1),[ue,$]=_.useState(null),[Ae,Oe]=_.useState(null),[ke,De]=_.useState(!1),Se=_.useRef(null),Q=_.useRef(null),Le=_.useRef({}),pe=_.useRef(null);_.useEffect(()=>{const me=window.matchMedia("(pointer: coarse)"),we=()=>A(!!me.matches);return we(),me.addEventListener?me.addEventListener("change",we):me.addListener(we),()=>{me.removeEventListener?me.removeEventListener("change",we):me.removeListener(we)}},[]),_.useEffect(()=>{const me=we=>{a.current&&(a.current.contains(we.target)||x(null))};return document.addEventListener("pointerdown",me,{capture:!0}),()=>{document.removeEventListener("pointerdown",me,{capture:!0})}},[]);const ge=_.useCallback((me=1)=>{const we=o.current;if(!we)return;const st=Math.round(we.clientWidth*.75)*me;we.scrollBy({left:st,behavior:"smooth"})},[]),Me=_.useCallback(()=>{const me=o.current;return me?me.scrollLeft>0:!1},[]),ae=_.useCallback(()=>{const me=o.current;return me?me.scrollLeft<me.scrollWidth-me.clientWidth-1:!1},[]),[Y,te]=_.useState({left:!1,right:!0});_.useEffect(()=>{const me=()=>{te({left:Me(),right:ae()})},we=o.current;return we&&(me(),we.addEventListener("scroll",me),window.addEventListener("resize",me)),()=>{we&&(we.removeEventListener("scroll",me),window.removeEventListener("resize",me))}},[r.length,Me,ae]);const be=_.useCallback(async me=>{if(S||me.length===0)return;const we=me.filter(ht=>!v[ht]&&!R[ht]);if(we.length===0)return;I(!0);const st={...R};we.forEach(ht=>{st[ht]=!0}),D(st);try{const ht=localStorage.getItem("access_token"),Pt=await fetch(`${window.server_url}/organizer_attendees/images`,{method:"POST",headers:{Authorization:`Bearer ${ht}`,"Content-Type":"application/json"},body:JSON.stringify({usernames:we})});if(!Pt.ok)throw Pt.status===401?new Error("Unauthorized"):new Error("Failed to load images");const xt=await Pt.json();if(xt.status==="success"&&xt.images){const qe={...v};we.forEach(Je=>{xt.images[Je]?qe[Je]=`data:image/jpeg;base64,${xt.images[Je]}`:qe[Je]=null}),b(qe)}}catch(ht){console.error("Error loading images:",ht)}finally{I(!1);const ht={...R};we.forEach(Pt=>{delete ht[Pt]}),D(ht)}},[S,v,R]);_.useEffect(()=>{if(r.length===0||L.current>=0)return;const me=r.slice(0,30).map(we=>we.username);me.length>0&&(be(me),L.current=Math.min(29,r.length-1))},[r.length,be]),_.useEffect(()=>{if(r.length===0||!o.current)return;const me=new IntersectionObserver(st=>{B.current&&clearTimeout(B.current),B.current=setTimeout(()=>{st.forEach(ht=>{if(ht.isIntersecting){const Pt=parseInt(ht.target.dataset.index),xt=L.current;if(Pt>=xt-5&&Pt<r.length&&xt<r.length-1){const qe=xt+1,Je=Math.min(qe+30,r.length);if(qe<r.length){const Nt=r.slice(qe,Je).map(Ie=>Ie.username);be(Nt),L.current=Je-1}}}})},150)},{root:o.current,rootMargin:"200px",threshold:.5});return o.current.querySelectorAll("[data-index]").forEach(st=>me.observe(st)),f.current=me,()=>{B.current&&clearTimeout(B.current),f.current&&f.current.disconnect()}},[r.length,be]);const ze=_.useCallback(()=>!W||r.length===0?-1:r.findIndex(me=>me.username===W),[W,r]),Re=_.useCallback(me=>{var ht;const we=ze();if(we===-1||r.length===0)return null;let st;return me==="next"?st=(we+1)%r.length:st=we===0?r.length-1:we-1,((ht=r[st])==null?void 0:ht.username)||null},[ze,r]),fe=_.useCallback(async me=>{const we=Re(me);we&&(Oe(me==="next"?"left":"right"),pe.current&&clearTimeout(pe.current),pe.current=setTimeout(()=>{Oe(null),pe.current=null},400),await nt(we,!1))},[Re]),Ye=_.useMemo(()=>!(r.length<=1),[r.length]),He=_.useMemo(()=>!(r.length<=1),[r.length]),nt=_.useCallback(async(me,we=!0)=>{var st,ht,Pt,xt;if(Le.current[me]){z(me),V(!0),$(null),De(we);return}Se.current&&Se.current,Se.current=me,q(!0),$(null),V(!0),z(me),De(we);try{const qe=localStorage.getItem("access_token");if(!qe)throw new Error("Authentication required");const Je=await fetch(`${window.server_url}/organizer_attendees/${me}/details`,{headers:{Authorization:`Bearer ${qe}`}});if(Se.current!==me)return;if(Je.status===401)throw localStorage.removeItem("access_token"),new Error("Session expired. Please log in again.");if(Je.status===403)throw new Error("Access denied. Organizer permissions required.");if(Je.status===404)throw new Error("Attendee details not found.");if(!Je.ok)throw new Error("Failed to load attendee details");const Nt=await Je.json();if(Nt.status==="success"&&Nt.attendee){const Ie={username:Nt.attendee.username,name:Nt.attendee.name||Nt.attendee.username,image_data:Nt.attendee.image_data?`data:image/jpeg;base64,${Nt.attendee.image_data}`:null,last_joined_date:Nt.attendee.last_joined_date,self_tags:((st=Nt.attendee.tags)==null?void 0:st.tags_work)||[],desiring_tags:((ht=Nt.attendee.tags)==null?void 0:ht.desiring_tags_work)||[],lobbies_attended:((Pt=Nt.attendee.stats)==null?void 0:Pt.lobbies_attended)||0,rounds_paired:((xt=Nt.attendee.stats)==null?void 0:xt.rounds_paired)||0};ne(yn=>{const Ct={...yn,[me]:Ie};return Le.current=Ct,Ct}),Se.current===me&&z(me)}else throw new Error(Nt.error||"Failed to load attendee details")}catch(qe){Se.current===me&&(console.error("Error fetching attendee details:",qe),$(qe.message||"An error occurred while loading details."))}finally{Se.current===me&&(q(!1),Se.current=null)}},[]),Ge=_.useCallback(()=>{Q.current&&clearTimeout(Q.current),pe.current&&clearTimeout(pe.current),V(!1),$(null),Oe(null),De(!1),Q.current=setTimeout(()=>{z(null),Q.current=null},300)},[]);_.useEffect(()=>()=>{Q.current&&clearTimeout(Q.current)},[]),_.useEffect(()=>{const me=we=>{we.key==="Escape"&&j&&(we.stopPropagation(),Ge())};return document.addEventListener("keydown",me,!0),()=>document.removeEventListener("keydown",me,!0)},[j,Ge]),_.useEffect(()=>{if(j){const me=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=me}}},[j]),_.useEffect(()=>()=>{pe.current&&clearTimeout(pe.current)},[]);const ft=_.useMemo(()=>r.map((me,we)=>({username:me.username||`temp-${we}`,name:me.name||me.username||`User ${we+1}`,small_image_data:me.small_image_data||null})),[r]);return w.jsxs("section",{className:`attendees-root ${j&&ke?"attendees-root-modal-open":""}`,ref:a,"aria-label":"Your Community",children:[w.jsxs("div",{className:"attendees-card",children:[w.jsx("header",{className:"attendees-header",children:w.jsx("h2",{className:"attendees-title",children:"Your Community"})}),w.jsxs("div",{className:"attendees-carouselWrap",children:[w.jsx("button",{type:"button",className:"attendees-arrow attendees-arrowLeft","aria-label":"Scroll left",onClick:()=>ge(-1),disabled:!Y.left||y,children:""}),w.jsx("div",{ref:o,className:"attendees-scroller",role:"list","aria-label":"Community attendees list",onMouseLeave:()=>{y||x(null)},children:ft.map((me,we)=>{const st=p===me.username,ht=p!==null,Pt=v[me.username],xt=R[me.username];return w.jsxs("div",{"data-index":we,className:["attendees-item",st?"is-active":"",ht&&!st?"is-dimmed":"",y?"is-touch":"is-mouse"].join(" "),role:"listitem",tabIndex:0,onMouseEnter:()=>{y||x(me.username)},onFocus:()=>x(me.username),onClick:()=>{y&&x(me.username),nt(me.username,!0)},onKeyDown:qe=>{(qe.key==="Enter"||qe.key===" ")&&(qe.preventDefault(),x(me.username)),qe.key==="Escape"&&x(null)},children:[w.jsx("div",{className:"attendees-avatarWrap","aria-hidden":"true",children:xt?w.jsx(nf,{size:30,className:"attendees-tile-spinner"}):Pt?w.jsx("img",{className:"attendees-avatarImg",src:Pt,alt:"",onError:qe=>{qe.target.src="/assets/fakeprofile.png"}}):w.jsx("img",{className:"attendees-avatarImg",src:"/assets/fakeprofile.png",alt:""})}),w.jsx("div",{className:"attendees-name",title:me.name,children:me.name})]},me.username)})}),w.jsx("button",{type:"button",className:"attendees-arrow attendees-arrowRight","aria-label":"Scroll right",onClick:()=>ge(1),disabled:!Y.right||y,children:""})]}),w.jsxs("div",{className:"attendees-dots","aria-hidden":"true",children:[w.jsx("span",{className:"attendees-dot is-on"}),w.jsx("span",{className:"attendees-dot"}),w.jsx("span",{className:"attendees-dot"}),w.jsx("span",{className:"attendees-dot"})]})]}),j&&w.jsxs(w.Fragment,{children:[r.length>1&&w.jsxs(w.Fragment,{children:[w.jsx("button",{type:"button",className:"attendee-modal-nav-arrow attendee-modal-nav-left",onClick:me=>{me.stopPropagation(),fe("prev")},disabled:!Ye,children:""}),w.jsx("button",{type:"button",className:"attendee-modal-nav-arrow attendee-modal-nav-right",onClick:me=>{me.stopPropagation(),fe("next")},disabled:!He,children:""})]}),w.jsx("div",{className:"attendee-modal-overlay",onClick:Ge,children:w.jsx("div",{className:`attendee-modal-content ${Ae?`swipe-${Ae}`:""}`,onClick:me=>me.stopPropagation(),children:oe?w.jsxs("div",{className:"attendee-modal-loading",children:[w.jsx(nf,{size:60}),w.jsx("p",{children:"Loading attendee details..."})]}):ue?w.jsx("div",{className:"attendee-modal-error",children:w.jsx("p",{className:"attendee-modal-error-message",children:ue})}):W&&J[W]?w.jsx("div",{className:"attendee-modal-inner",children:(()=>{const me=J[W];return w.jsxs(w.Fragment,{children:[w.jsx("h2",{className:"attendee-modal-header",id:"attendee-modal-title",children:me.name}),w.jsxs("div",{className:"attendee-modal-grid",children:[w.jsxs("div",{className:"attendee-modal-left",children:[w.jsx("div",{className:"attendee-modal-date",children:yA(me.last_joined_date)}),w.jsxs("div",{className:"attendee-modal-profile-card",children:[w.jsx("div",{className:"attendee-modal-profile-img-wrapper",children:me.image_data?w.jsx("img",{className:"attendee-modal-profile-img",src:me.image_data,alt:me.name,onError:we=>{we.target.src="/assets/fakeprofile.png"}}):w.jsx("img",{className:"attendee-modal-profile-img",src:"/assets/fakeprofile.png",alt:me.name})}),w.jsx("div",{className:"attendee-modal-profile-footer",children:me.name})]})]}),w.jsxs("div",{className:"attendee-modal-right",children:[w.jsxs("div",{className:"attendee-modal-stat",children:[w.jsx("span",{className:"attendee-modal-stat-label",children:"events attended"}),w.jsx("span",{className:"attendee-modal-stat-value",children:me.lobbies_attended})]}),w.jsxs("div",{className:"attendee-modal-stat",children:[w.jsx("span",{className:"attendee-modal-stat-label",children:"real connections"}),w.jsxs("div",{className:"attendee-modal-stat-value-with-icons",children:[w.jsx("span",{className:"attendee-modal-stat-value",children:me.rounds_paired}),w.jsx("div",{className:"attendee-modal-staggered-icons",children:[...Array(4)].map((we,st)=>w.jsx("img",{className:"attendee-modal-staggered-icon",src:"/assets/fakeprofile.png",alt:""},st))})]})]}),w.jsxs("div",{className:"attendee-modal-tags-section",children:[w.jsx("h3",{className:"attendee-modal-tags-label",children:"who I am:"}),w.jsx("div",{className:"attendee-modal-tags-container",children:me.self_tags&&me.self_tags.length>0?me.self_tags.map((we,st)=>w.jsx(rf,{tag:we},`self-${st}-${we}`)):w.jsx("span",{className:"attendee-modal-empty-state",children:"No tags"})})]}),w.jsxs("div",{className:"attendee-modal-tags-section",children:[w.jsx("h3",{className:"attendee-modal-tags-label",children:"looking for:"}),w.jsx("div",{className:"attendee-modal-tags-container",children:me.desiring_tags&&me.desiring_tags.length>0?me.desiring_tags.map((we,st)=>w.jsx(rf,{tag:we},`desiring-${st}-${we}`)):w.jsx("span",{className:"attendee-modal-empty-state",children:"No tags"})})]})]})]})]})})()}):null})})]})]})},vA=()=>{const{user:r,permissions:o,checkAuth:a}=_.useContext(gr),f=ar(),[p,x]=_.useState([]),[y,A]=_.useState(!0),[v,b]=_.useState(null);_.useEffect(()=>{o!==null&&o!=="admin"&&o!=="organizer"&&f("/organizer-signup")},[o,f]),_.useEffect(()=>{a()},[a]);const S=_.useCallback(async()=>{A(!0),b(null);try{const I=localStorage.getItem("access_token");if(!I){b("Authentication required"),A(!1);return}const R=await fetch(`${window.server_url}/organizer_attendees`,{headers:{Authorization:`Bearer ${I}`}});if(R.status===401){localStorage.removeItem("access_token"),f("/organizer-signup");return}if(R.status===403){b("Access denied. Organizer permissions required."),A(!1);return}if(!R.ok)throw new Error("Failed to load attendees");const D=await R.json();if(D.status==="success")x(D.attendees||[]);else throw new Error(D.error||"Failed to load attendees")}catch(I){console.error("Error fetching attendees:",I),I.message==="Failed to fetch"||I.message.includes("network")?b("Network error. Please check your connection and try again."):b(I.message||"An error occurred. Please try again.")}finally{A(!1)}},[f]);return _.useEffect(()=>{(o==="organizer"||o==="admin")&&S()},[o,S]),w.jsxs("div",{className:"organizer-dashboard",children:[w.jsxs("div",{className:"dashboard-header",children:[w.jsx("h1",{children:"Organizer Dashboard"}),w.jsx("button",{onClick:()=>f("/"),className:"dashboard-home-button",children:"Home"})]}),y?w.jsx("div",{className:"attendees-loading-container",children:w.jsx(nf,{size:60})}):v?w.jsxs("div",{className:"attendees-error-container",children:[w.jsx("div",{className:"attendees-error-message",children:v}),w.jsx("button",{className:"attendees-retry-button",onClick:S,children:"Retry"})]}):p.length===0?w.jsx("div",{className:"attendees-empty-container",children:w.jsx("div",{className:"attendees-empty-message",children:"No attendees yet"})}):w.jsx(wA,{attendees:p})]})},CA=5e3,EA=()=>{const{checkAuth:r,permissions:o,user:a}=_.useContext(gr),f=ar(),[p,x]=_.useState([]),[y,A]=_.useState(!0),[v,b]=_.useState(null),[S,I]=_.useState(!1);return _.useEffect(()=>{r()},[r]),_.useEffect(()=>{a==="topaz"&&o==="admin"?I(!0):o!==null&&a!==null&&f("/")},[o,a,f]),_.useEffect(()=>{if(!S)return;let R=!0,D,L=!0;const B=async()=>{L&&A(!0),b(null);try{const j=localStorage.getItem("access_token");if(!j)return;const V=await fetch(window.server_url+"/admin_all_lobbies",{headers:{Authorization:`Bearer ${j}`}});if(!V.ok)throw new Error("Failed to fetch lobbies");const W=await V.json();if(W.status!=="success"||!Array.isArray(W.lobbies))throw new Error("Invalid response format");if(!R)return;x(W.lobbies),console.log("Received lobbies data:",W.lobbies)}catch(j){R&&b(j.message||"Error fetching lobbies")}finally{R&&L&&A(!1),L=!1,D=setTimeout(B,CA)}};return B(),()=>{R=!1,D&&clearTimeout(D)}},[S]),y?w.jsx("div",{className:"master-lobby-container",children:w.jsxs("div",{className:"loading-state",children:[w.jsx("div",{className:"loading-spinner"}),w.jsx("p",{children:"Loading lobbies..."})]})}):v&&p.length===0?w.jsx("div",{className:"master-lobby-container",children:w.jsx("div",{className:"error-state",children:w.jsx("p",{children:v})})}):p.length===0?w.jsx("div",{className:"master-lobby-container",children:w.jsx("div",{className:"empty-state",children:w.jsx("p",{children:"No active lobbies found"})})}):w.jsxs("div",{className:"master-lobby-container",children:[w.jsx("button",{className:"back-button",onClick:()=>f(-1),children:"Back"}),v&&w.jsxs("div",{className:"error-banner",style:{backgroundColor:"#f8d7da",color:"#721c24",padding:"0.75rem",marginBottom:"1rem",borderRadius:"0.25rem",border:"1px solid #f5c6cb"},children:[v," (showing last known data)"]}),w.jsx("div",{className:"master-lobby-grid",children:p.map(R=>w.jsx("div",{className:"lobby-tile",children:w.jsxs("div",{className:"lobby-tile-content",children:[w.jsx("h3",{className:"lobby-code",children:R.code}),w.jsxs("div",{className:"lobby-stats",children:[w.jsxs("span",{className:"player-count",children:[R.player_count," players"]}),w.jsx("span",{className:"lobby-state",children:R.lobby_state})]}),w.jsxs("div",{style:{fontSize:"0.7rem",color:"#666",marginTop:"0.5rem"},children:["Debug: player_count=",R.player_count,", lobby_state=",R.lobby_state]})]})},R.code))})]})};e2.createRoot(document.getElementById("root")).render(w.jsx(_.StrictMode,{children:w.jsx(t2,{children:w.jsxs(Fy,{basename:"/",children:[w.jsx(UE,{}),w.jsx(WE,{}),w.jsxs(gy,{children:[w.jsx(br,{path:"/",element:w.jsx(zE,{})}),w.jsx(br,{path:"/login",element:w.jsx(HE,{})}),w.jsx(br,{path:"/signup",element:w.jsx(OE,{})}),w.jsx(br,{path:"/logout",element:w.jsx(GE,{})}),w.jsx(br,{path:"/lobby",element:w.jsx(gb,{})}),w.jsx(br,{path:"/admin_lobby_view",element:w.jsx(uA,{})}),w.jsx(br,{path:"/create_lobby",element:w.jsx(fA,{})}),w.jsx(br,{path:"/product-selection",element:w.jsx(dA,{})}),w.jsx(br,{path:"/organizer-signup",element:w.jsx(pA,{})}),w.jsx(br,{path:"/organizer-signup-success",element:w.jsx(gA,{})}),w.jsx(br,{path:"/organizer-account-details",element:w.jsx(mA,{})}),w.jsx(br,{path:"/organizer-dashboard",element:w.jsx(vA,{})}),w.jsx(br,{path:"/master_lobby_view",element:w.jsx(EA,{})})]})]})})}));
