(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))u(m);new MutationObserver(m=>{for(const x of m)if(x.type==="childList")for(const y of x.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&u(y)}).observe(document,{childList:!0,subtree:!0});function a(m){const x={};return m.integrity&&(x.integrity=m.integrity),m.referrerPolicy&&(x.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?x.credentials="include":m.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function u(m){if(m.ep)return;m.ep=!0;const x=a(m);fetch(m.href,x)}})();var lc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var yd={exports:{}},ka={},wd={exports:{}},Bt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u1;function k2(){if(u1)return Bt;u1=1;var t=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),y=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),C=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),I=Symbol.iterator;function _(Y){return Y===null||typeof Y!="object"?null:(Y=I&&Y[I]||Y["@@iterator"],typeof Y=="function"?Y:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,B={};function j(Y,le,Te){this.props=Y,this.context=le,this.refs=B,this.updater=Te||M}j.prototype.isReactComponent={},j.prototype.setState=function(Y,le){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,le,"setState")},j.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function z(){}z.prototype=j.prototype;function V(Y,le,Te){this.props=Y,this.context=le,this.refs=B,this.updater=Te||M}var F=V.prototype=new z;F.constructor=V,L(F,j.prototype),F.isPureReactComponent=!0;var $=Array.isArray,Z=Object.prototype.hasOwnProperty,re={current:null},X={key:!0,ref:!0,__self:!0,__source:!0};function Q(Y,le,Te){var Ge,be={},te=null,Xe=null;if(le!=null)for(Ge in le.ref!==void 0&&(Xe=le.ref),le.key!==void 0&&(te=""+le.key),le)Z.call(le,Ge)&&!X.hasOwnProperty(Ge)&&(be[Ge]=le[Ge]);var Pe=arguments.length-2;if(Pe===1)be.children=Te;else if(1<Pe){for(var $e=Array(Pe),kt=0;kt<Pe;kt++)$e[kt]=arguments[kt+2];be.children=$e}if(Y&&Y.defaultProps)for(Ge in Pe=Y.defaultProps,Pe)be[Ge]===void 0&&(be[Ge]=Pe[Ge]);return{$$typeof:t,type:Y,key:te,ref:Xe,props:be,_owner:re.current}}function q(Y,le){return{$$typeof:t,type:Y.type,key:le,ref:Y.ref,props:Y.props,_owner:Y._owner}}function ge(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===t}function Ne(Y){var le={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(Te){return le[Te]})}var Ae=/\/+/g;function De(Y,le){return typeof Y=="object"&&Y!==null&&Y.key!=null?Ne(""+Y.key):le.toString(36)}function Ce(Y,le,Te,Ge,be){var te=typeof Y;(te==="undefined"||te==="boolean")&&(Y=null);var Xe=!1;if(Y===null)Xe=!0;else switch(te){case"string":case"number":Xe=!0;break;case"object":switch(Y.$$typeof){case t:case i:Xe=!0}}if(Xe)return Xe=Y,be=be(Xe),Y=Ge===""?"."+De(Xe,0):Ge,$(be)?(Te="",Y!=null&&(Te=Y.replace(Ae,"$&/")+"/"),Ce(be,le,Te,"",function(kt){return kt})):be!=null&&(ge(be)&&(be=q(be,Te+(!be.key||Xe&&Xe.key===be.key?"":(""+be.key).replace(Ae,"$&/")+"/")+Y)),le.push(be)),1;if(Xe=0,Ge=Ge===""?".":Ge+":",$(Y))for(var Pe=0;Pe<Y.length;Pe++){te=Y[Pe];var $e=Ge+De(te,Pe);Xe+=Ce(te,le,Te,$e,be)}else if($e=_(Y),typeof $e=="function")for(Y=$e.call(Y),Pe=0;!(te=Y.next()).done;)te=te.value,$e=Ge+De(te,Pe++),Xe+=Ce(te,le,Te,$e,be);else if(te==="object")throw le=String(Y),Error("Objects are not valid as a React child (found: "+(le==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":le)+"). If you meant to render a collection of children, use an array instead.");return Xe}function G(Y,le,Te){if(Y==null)return Y;var Ge=[],be=0;return Ce(Y,Ge,"","",function(te){return le.call(Te,te,be++)}),Ge}function je(Y){if(Y._status===-1){var le=Y._result;le=le(),le.then(function(Te){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=Te)},function(Te){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=Te)}),Y._status===-1&&(Y._status=0,Y._result=le)}if(Y._status===1)return Y._result.default;throw Y._result}var ye={current:null},fe={transition:null},Ve={ReactCurrentDispatcher:ye,ReactCurrentBatchConfig:fe,ReactCurrentOwner:re};function we(){throw Error("act(...) is not supported in production builds of React.")}return Bt.Children={map:G,forEach:function(Y,le,Te){G(Y,function(){le.apply(this,arguments)},Te)},count:function(Y){var le=0;return G(Y,function(){le++}),le},toArray:function(Y){return G(Y,function(le){return le})||[]},only:function(Y){if(!ge(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},Bt.Component=j,Bt.Fragment=a,Bt.Profiler=m,Bt.PureComponent=V,Bt.StrictMode=u,Bt.Suspense=v,Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ve,Bt.act=we,Bt.cloneElement=function(Y,le,Te){if(Y==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Y+".");var Ge=L({},Y.props),be=Y.key,te=Y.ref,Xe=Y._owner;if(le!=null){if(le.ref!==void 0&&(te=le.ref,Xe=re.current),le.key!==void 0&&(be=""+le.key),Y.type&&Y.type.defaultProps)var Pe=Y.type.defaultProps;for($e in le)Z.call(le,$e)&&!X.hasOwnProperty($e)&&(Ge[$e]=le[$e]===void 0&&Pe!==void 0?Pe[$e]:le[$e])}var $e=arguments.length-2;if($e===1)Ge.children=Te;else if(1<$e){Pe=Array($e);for(var kt=0;kt<$e;kt++)Pe[kt]=arguments[kt+2];Ge.children=Pe}return{$$typeof:t,type:Y.type,key:be,ref:te,props:Ge,_owner:Xe}},Bt.createContext=function(Y){return Y={$$typeof:y,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Y.Provider={$$typeof:x,_context:Y},Y.Consumer=Y},Bt.createElement=Q,Bt.createFactory=function(Y){var le=Q.bind(null,Y);return le.type=Y,le},Bt.createRef=function(){return{current:null}},Bt.forwardRef=function(Y){return{$$typeof:b,render:Y}},Bt.isValidElement=ge,Bt.lazy=function(Y){return{$$typeof:S,_payload:{_status:-1,_result:Y},_init:je}},Bt.memo=function(Y,le){return{$$typeof:C,type:Y,compare:le===void 0?null:le}},Bt.startTransition=function(Y){var le=fe.transition;fe.transition={};try{Y()}finally{fe.transition=le}},Bt.unstable_act=we,Bt.useCallback=function(Y,le){return ye.current.useCallback(Y,le)},Bt.useContext=function(Y){return ye.current.useContext(Y)},Bt.useDebugValue=function(){},Bt.useDeferredValue=function(Y){return ye.current.useDeferredValue(Y)},Bt.useEffect=function(Y,le){return ye.current.useEffect(Y,le)},Bt.useId=function(){return ye.current.useId()},Bt.useImperativeHandle=function(Y,le,Te){return ye.current.useImperativeHandle(Y,le,Te)},Bt.useInsertionEffect=function(Y,le){return ye.current.useInsertionEffect(Y,le)},Bt.useLayoutEffect=function(Y,le){return ye.current.useLayoutEffect(Y,le)},Bt.useMemo=function(Y,le){return ye.current.useMemo(Y,le)},Bt.useReducer=function(Y,le,Te){return ye.current.useReducer(Y,le,Te)},Bt.useRef=function(Y){return ye.current.useRef(Y)},Bt.useState=function(Y){return ye.current.useState(Y)},Bt.useSyncExternalStore=function(Y,le,Te){return ye.current.useSyncExternalStore(Y,le,Te)},Bt.useTransition=function(){return ye.current.useTransition()},Bt.version="18.3.1",Bt}var d1;function Tf(){return d1||(d1=1,wd.exports=k2()),wd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f1;function P2(){if(f1)return ka;f1=1;var t=Tf(),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),u=Object.prototype.hasOwnProperty,m=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x={key:!0,ref:!0,__self:!0,__source:!0};function y(b,v,C){var S,I={},_=null,M=null;C!==void 0&&(_=""+C),v.key!==void 0&&(_=""+v.key),v.ref!==void 0&&(M=v.ref);for(S in v)u.call(v,S)&&!x.hasOwnProperty(S)&&(I[S]=v[S]);if(b&&b.defaultProps)for(S in v=b.defaultProps,v)I[S]===void 0&&(I[S]=v[S]);return{$$typeof:i,type:b,key:_,ref:M,props:I,_owner:m.current}}return ka.Fragment=a,ka.jsx=y,ka.jsxs=y,ka}var h1;function M2(){return h1||(h1=1,yd.exports=P2()),yd.exports}var h=M2(),N=Tf();const $t=mp(N);var cc={},vd={exports:{}},Fr={},Cd={exports:{}},bd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m1;function O2(){return m1||(m1=1,function(t){function i(fe,Ve){var we=fe.length;fe.push(Ve);e:for(;0<we;){var Y=we-1>>>1,le=fe[Y];if(0<m(le,Ve))fe[Y]=Ve,fe[we]=le,we=Y;else break e}}function a(fe){return fe.length===0?null:fe[0]}function u(fe){if(fe.length===0)return null;var Ve=fe[0],we=fe.pop();if(we!==Ve){fe[0]=we;e:for(var Y=0,le=fe.length,Te=le>>>1;Y<Te;){var Ge=2*(Y+1)-1,be=fe[Ge],te=Ge+1,Xe=fe[te];if(0>m(be,we))te<le&&0>m(Xe,be)?(fe[Y]=Xe,fe[te]=we,Y=te):(fe[Y]=be,fe[Ge]=we,Y=Ge);else if(te<le&&0>m(Xe,we))fe[Y]=Xe,fe[te]=we,Y=te;else break e}}return Ve}function m(fe,Ve){var we=fe.sortIndex-Ve.sortIndex;return we!==0?we:fe.id-Ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var x=performance;t.unstable_now=function(){return x.now()}}else{var y=Date,b=y.now();t.unstable_now=function(){return y.now()-b}}var v=[],C=[],S=1,I=null,_=3,M=!1,L=!1,B=!1,j=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(fe){for(var Ve=a(C);Ve!==null;){if(Ve.callback===null)u(C);else if(Ve.startTime<=fe)u(C),Ve.sortIndex=Ve.expirationTime,i(v,Ve);else break;Ve=a(C)}}function $(fe){if(B=!1,F(fe),!L)if(a(v)!==null)L=!0,je(Z);else{var Ve=a(C);Ve!==null&&ye($,Ve.startTime-fe)}}function Z(fe,Ve){L=!1,B&&(B=!1,z(Q),Q=-1),M=!0;var we=_;try{for(F(Ve),I=a(v);I!==null&&(!(I.expirationTime>Ve)||fe&&!Ne());){var Y=I.callback;if(typeof Y=="function"){I.callback=null,_=I.priorityLevel;var le=Y(I.expirationTime<=Ve);Ve=t.unstable_now(),typeof le=="function"?I.callback=le:I===a(v)&&u(v),F(Ve)}else u(v);I=a(v)}if(I!==null)var Te=!0;else{var Ge=a(C);Ge!==null&&ye($,Ge.startTime-Ve),Te=!1}return Te}finally{I=null,_=we,M=!1}}var re=!1,X=null,Q=-1,q=5,ge=-1;function Ne(){return!(t.unstable_now()-ge<q)}function Ae(){if(X!==null){var fe=t.unstable_now();ge=fe;var Ve=!0;try{Ve=X(!0,fe)}finally{Ve?De():(re=!1,X=null)}}else re=!1}var De;if(typeof V=="function")De=function(){V(Ae)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,G=Ce.port2;Ce.port1.onmessage=Ae,De=function(){G.postMessage(null)}}else De=function(){j(Ae,0)};function je(fe){X=fe,re||(re=!0,De())}function ye(fe,Ve){Q=j(function(){fe(t.unstable_now())},Ve)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(fe){fe.callback=null},t.unstable_continueExecution=function(){L||M||(L=!0,je(Z))},t.unstable_forceFrameRate=function(fe){0>fe||125<fe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<fe?Math.floor(1e3/fe):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return a(v)},t.unstable_next=function(fe){switch(_){case 1:case 2:case 3:var Ve=3;break;default:Ve=_}var we=_;_=Ve;try{return fe()}finally{_=we}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(fe,Ve){switch(fe){case 1:case 2:case 3:case 4:case 5:break;default:fe=3}var we=_;_=fe;try{return Ve()}finally{_=we}},t.unstable_scheduleCallback=function(fe,Ve,we){var Y=t.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?Y+we:Y):we=Y,fe){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=we+le,fe={id:S++,callback:Ve,priorityLevel:fe,startTime:we,expirationTime:le,sortIndex:-1},we>Y?(fe.sortIndex=we,i(C,fe),a(v)===null&&fe===a(C)&&(B?(z(Q),Q=-1):B=!0,ye($,we-Y))):(fe.sortIndex=le,i(v,fe),L||M||(L=!0,je(Z))),fe},t.unstable_shouldYield=Ne,t.unstable_wrapCallback=function(fe){var Ve=_;return function(){var we=_;_=Ve;try{return fe.apply(this,arguments)}finally{_=we}}}}(bd)),bd}var p1;function D2(){return p1||(p1=1,Cd.exports=O2()),Cd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g1;function L2(){if(g1)return Fr;g1=1;var t=Tf(),i=D2();function a(n){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+n,f=1;f<arguments.length;f++)o+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+n+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=new Set,m={};function x(n,o){y(n,o),y(n+"Capture",o)}function y(n,o){for(m[n]=o,n=0;n<o.length;n++)u.add(o[n])}var b=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v=Object.prototype.hasOwnProperty,C=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S={},I={};function _(n){return v.call(I,n)?!0:v.call(S,n)?!1:C.test(n)?I[n]=!0:(S[n]=!0,!1)}function M(n,o,f,g){if(f!==null&&f.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return g?!1:f!==null?!f.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function L(n,o,f,g){if(o===null||typeof o>"u"||M(n,o,f,g))return!0;if(g)return!1;if(f!==null)switch(f.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function B(n,o,f,g,A,T,O){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=g,this.attributeNamespace=A,this.mustUseProperty=f,this.propertyName=n,this.type=o,this.sanitizeURL=T,this.removeEmptyString=O}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){j[n]=new B(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var o=n[0];j[o]=new B(o,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){j[n]=new B(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){j[n]=new B(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){j[n]=new B(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){j[n]=new B(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){j[n]=new B(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){j[n]=new B(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){j[n]=new B(n,5,!1,n.toLowerCase(),null,!1,!1)});var z=/[\-:]([a-z])/g;function V(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var o=n.replace(z,V);j[o]=new B(o,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var o=n.replace(z,V);j[o]=new B(o,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var o=n.replace(z,V);j[o]=new B(o,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){j[n]=new B(n,1,!1,n.toLowerCase(),null,!1,!1)}),j.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){j[n]=new B(n,1,!1,n.toLowerCase(),null,!0,!0)});function F(n,o,f,g){var A=j.hasOwnProperty(o)?j[o]:null;(A!==null?A.type!==0:g||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(L(o,f,A,g)&&(f=null),g||A===null?_(o)&&(f===null?n.removeAttribute(o):n.setAttribute(o,""+f)):A.mustUseProperty?n[A.propertyName]=f===null?A.type===3?!1:"":f:(o=A.attributeName,g=A.attributeNamespace,f===null?n.removeAttribute(o):(A=A.type,f=A===3||A===4&&f===!0?"":""+f,g?n.setAttributeNS(g,o,f):n.setAttribute(o,f))))}var $=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z=Symbol.for("react.element"),re=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),ge=Symbol.for("react.provider"),Ne=Symbol.for("react.context"),Ae=Symbol.for("react.forward_ref"),De=Symbol.for("react.suspense"),Ce=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),je=Symbol.for("react.lazy"),ye=Symbol.for("react.offscreen"),fe=Symbol.iterator;function Ve(n){return n===null||typeof n!="object"?null:(n=fe&&n[fe]||n["@@iterator"],typeof n=="function"?n:null)}var we=Object.assign,Y;function le(n){if(Y===void 0)try{throw Error()}catch(f){var o=f.stack.trim().match(/\n( *(at )?)/);Y=o&&o[1]||""}return`
`+Y+n}var Te=!1;function Ge(n,o){if(!n||Te)return"";Te=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(pe){var g=pe}Reflect.construct(n,[],o)}else{try{o.call()}catch(pe){g=pe}n.call(o.prototype)}else{try{throw Error()}catch(pe){g=pe}n()}}catch(pe){if(pe&&g&&typeof pe.stack=="string"){for(var A=pe.stack.split(`
`),T=g.stack.split(`
`),O=A.length-1,H=T.length-1;1<=O&&0<=H&&A[O]!==T[H];)H--;for(;1<=O&&0<=H;O--,H--)if(A[O]!==T[H]){if(O!==1||H!==1)do if(O--,H--,0>H||A[O]!==T[H]){var J=`
`+A[O].replace(" at new "," at ");return n.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",n.displayName)),J}while(1<=O&&0<=H);break}}}finally{Te=!1,Error.prepareStackTrace=f}return(n=n?n.displayName||n.name:"")?le(n):""}function be(n){switch(n.tag){case 5:return le(n.type);case 16:return le("Lazy");case 13:return le("Suspense");case 19:return le("SuspenseList");case 0:case 2:case 15:return n=Ge(n.type,!1),n;case 11:return n=Ge(n.type.render,!1),n;case 1:return n=Ge(n.type,!0),n;default:return""}}function te(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case X:return"Fragment";case re:return"Portal";case q:return"Profiler";case Q:return"StrictMode";case De:return"Suspense";case Ce:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Ne:return(n.displayName||"Context")+".Consumer";case ge:return(n._context.displayName||"Context")+".Provider";case Ae:var o=n.render;return n=n.displayName,n||(n=o.displayName||o.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case G:return o=n.displayName||null,o!==null?o:te(n.type)||"Memo";case je:o=n._payload,n=n._init;try{return te(n(o))}catch{}}return null}function Xe(n){var o=n.type;switch(n.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=o.render,n=n.displayName||n.name||"",o.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return te(o);case 8:return o===Q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Pe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function $e(n){var o=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function kt(n){var o=$e(n)?"checked":"value",f=Object.getOwnPropertyDescriptor(n.constructor.prototype,o),g=""+n[o];if(!n.hasOwnProperty(o)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var A=f.get,T=f.set;return Object.defineProperty(n,o,{configurable:!0,get:function(){return A.call(this)},set:function(O){g=""+O,T.call(this,O)}}),Object.defineProperty(n,o,{enumerable:f.enumerable}),{getValue:function(){return g},setValue:function(O){g=""+O},stopTracking:function(){n._valueTracker=null,delete n[o]}}}}function xe(n){n._valueTracker||(n._valueTracker=kt(n))}function ie(n){if(!n)return!1;var o=n._valueTracker;if(!o)return!0;var f=o.getValue(),g="";return n&&(g=$e(n)?n.checked?"true":"false":n.value),n=g,n!==f?(o.setValue(n),!0):!1}function ue(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Re(n,o){var f=o.checked;return we({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??n._wrapperState.initialChecked})}function Ze(n,o){var f=o.defaultValue==null?"":o.defaultValue,g=o.checked!=null?o.checked:o.defaultChecked;f=Pe(o.value!=null?o.value:f),n._wrapperState={initialChecked:g,initialValue:f,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function tt(n,o){o=o.checked,o!=null&&F(n,"checked",o,!1)}function ze(n,o){tt(n,o);var f=Pe(o.value),g=o.type;if(f!=null)g==="number"?(f===0&&n.value===""||n.value!=f)&&(n.value=""+f):n.value!==""+f&&(n.value=""+f);else if(g==="submit"||g==="reset"){n.removeAttribute("value");return}o.hasOwnProperty("value")?We(n,o.type,f):o.hasOwnProperty("defaultValue")&&We(n,o.type,Pe(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(n.defaultChecked=!!o.defaultChecked)}function _e(n,o,f){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var g=o.type;if(!(g!=="submit"&&g!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+n._wrapperState.initialValue,f||o===n.value||(n.value=o),n.defaultValue=o}f=n.name,f!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,f!==""&&(n.name=f)}function We(n,o,f){(o!=="number"||ue(n.ownerDocument)!==n)&&(f==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+f&&(n.defaultValue=""+f))}var wt=Array.isArray;function Ie(n,o,f,g){if(n=n.options,o){o={};for(var A=0;A<f.length;A++)o["$"+f[A]]=!0;for(f=0;f<n.length;f++)A=o.hasOwnProperty("$"+n[f].value),n[f].selected!==A&&(n[f].selected=A),A&&g&&(n[f].defaultSelected=!0)}else{for(f=""+Pe(f),o=null,A=0;A<n.length;A++){if(n[A].value===f){n[A].selected=!0,g&&(n[A].defaultSelected=!0);return}o!==null||n[A].disabled||(o=n[A])}o!==null&&(o.selected=!0)}}function vt(n,o){if(o.dangerouslySetInnerHTML!=null)throw Error(a(91));return we({},o,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Lt(n,o){var f=o.value;if(f==null){if(f=o.children,o=o.defaultValue,f!=null){if(o!=null)throw Error(a(92));if(wt(f)){if(1<f.length)throw Error(a(93));f=f[0]}o=f}o==null&&(o=""),f=o}n._wrapperState={initialValue:Pe(f)}}function Ee(n,o){var f=Pe(o.value),g=Pe(o.defaultValue);f!=null&&(f=""+f,f!==n.value&&(n.value=f),o.defaultValue==null&&n.defaultValue!==f&&(n.defaultValue=f)),g!=null&&(n.defaultValue=""+g)}function Pt(n){var o=n.textContent;o===n._wrapperState.initialValue&&o!==""&&o!==null&&(n.value=o)}function St(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zt(n,o){return n==null||n==="http://www.w3.org/1999/xhtml"?St(o):n==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var lt,Wt=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,f,g,A){MSApp.execUnsafeLocalFunction(function(){return n(o,f,g,A)})}:n}(function(n,o){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=o;else{for(lt=lt||document.createElement("div"),lt.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=lt.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;o.firstChild;)n.appendChild(o.firstChild)}});function Qe(n,o){if(o){var f=n.firstChild;if(f&&f===n.lastChild&&f.nodeType===3){f.nodeValue=o;return}}n.textContent=o}var at={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qe=["Webkit","ms","Moz","O"];Object.keys(at).forEach(function(n){qe.forEach(function(o){o=o+n.charAt(0).toUpperCase()+n.substring(1),at[o]=at[n]})});function ve(n,o,f){return o==null||typeof o=="boolean"||o===""?"":f||typeof o!="number"||o===0||at.hasOwnProperty(n)&&at[n]?(""+o).trim():o+"px"}function se(n,o){n=n.style;for(var f in o)if(o.hasOwnProperty(f)){var g=f.indexOf("--")===0,A=ve(f,o[f],g);f==="float"&&(f="cssFloat"),g?n.setProperty(f,A):n[f]=A}}var et=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nt(n,o){if(o){if(et[n]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(a(137,n));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(a(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(a(61))}if(o.style!=null&&typeof o.style!="object")throw Error(a(62))}}function ht(n,o){if(n.indexOf("-")===-1)return typeof o.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qt=null;function dn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var fn=null,Ue=null,hn=null;function Gn(n){if(n=ga(n)){if(typeof fn!="function")throw Error(a(280));var o=n.stateNode;o&&(o=El(o),fn(n.stateNode,n.type,o))}}function Yr(n){Ue?hn?hn.push(n):hn=[n]:Ue=n}function Vn(){if(Ue){var n=Ue,o=hn;if(hn=Ue=null,Gn(n),o)for(n=0;n<o.length;n++)Gn(o[n])}}function Qi(n,o){return n(o)}function yn(){}var $r=!1;function si(n,o,f){if($r)return n(o,f);$r=!0;try{return Qi(n,o,f)}finally{$r=!1,(Ue!==null||hn!==null)&&(yn(),Vn())}}function Un(n,o){var f=n.stateNode;if(f===null)return null;var g=El(f);if(g===null)return null;f=g[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(n=n.type,g=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!g;break e;default:n=!1}if(n)return null;if(f&&typeof f!="function")throw Error(a(231,o,typeof f));return f}var ki=!1;if(b)try{var wn={};Object.defineProperty(wn,"passive",{get:function(){ki=!0}}),window.addEventListener("test",wn,wn),window.removeEventListener("test",wn,wn)}catch{ki=!1}function Ji(n,o,f,g,A,T,O,H,J){var pe=Array.prototype.slice.call(arguments,3);try{o.apply(f,pe)}catch(Oe){this.onError(Oe)}}var Jt=!1,Sr=null,qt=!1,Je=null,Pn={onError:function(n){Jt=!0,Sr=n}};function es(n,o,f,g,A,T,O,H,J){Jt=!1,Sr=null,Ji.apply(Pn,arguments)}function Xn(n,o,f,g,A,T,O,H,J){if(es.apply(this,arguments),Jt){if(Jt){var pe=Sr;Jt=!1,Sr=null}else throw Error(a(198));qt||(qt=!0,Je=pe)}}function xr(n){var o=n,f=n;if(n.alternate)for(;o.return;)o=o.return;else{n=o;do o=n,o.flags&4098&&(f=o.return),n=o.return;while(n)}return o.tag===3?f:null}function oi(n){if(n.tag===13){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function Ar(n){if(xr(n)!==n)throw Error(a(188))}function nr(n){var o=n.alternate;if(!o){if(o=xr(n),o===null)throw Error(a(188));return o!==n?null:n}for(var f=n,g=o;;){var A=f.return;if(A===null)break;var T=A.alternate;if(T===null){if(g=A.return,g!==null){f=g;continue}break}if(A.child===T.child){for(T=A.child;T;){if(T===f)return Ar(A),n;if(T===g)return Ar(A),o;T=T.sibling}throw Error(a(188))}if(f.return!==g.return)f=A,g=T;else{for(var O=!1,H=A.child;H;){if(H===f){O=!0,f=A,g=T;break}if(H===g){O=!0,g=A,f=T;break}H=H.sibling}if(!O){for(H=T.child;H;){if(H===f){O=!0,f=T,g=A;break}if(H===g){O=!0,g=T,f=A;break}H=H.sibling}if(!O)throw Error(a(189))}}if(f.alternate!==g)throw Error(a(190))}if(f.tag!==3)throw Error(a(188));return f.stateNode.current===f?n:o}function Jo(n){return n=nr(n),n!==null?Rs(n):null}function Rs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var o=Rs(n);if(o!==null)return o;n=n.sibling}return null}var Yn=i.unstable_scheduleCallback,$n=i.unstable_cancelCallback,rn=i.unstable_shouldYield,ks=i.unstable_requestPaint,Xt=i.unstable_now,Ps=i.unstable_getCurrentPriorityLevel,Se=i.unstable_ImmediatePriority,ho=i.unstable_UserBlockingPriority,Zt=i.unstable_NormalPriority,yi=i.unstable_LowPriority,mo=i.unstable_IdlePriority,Ot=null,Rt=null;function Mt(n){if(Rt&&typeof Rt.onCommitFiberRoot=="function")try{Rt.onCommitFiberRoot(Ot,n,void 0,(n.current.flags&128)===128)}catch{}}var Zn=Math.clz32?Math.clz32:gn,Pi=Math.log,ts=Math.LN2;function gn(n){return n>>>=0,n===0?32:31-(Pi(n)/ts|0)|0}var Nr=64,ai=4194304;function en(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function yr(n,o){var f=n.pendingLanes;if(f===0)return 0;var g=0,A=n.suspendedLanes,T=n.pingedLanes,O=f&268435455;if(O!==0){var H=O&~A;H!==0?g=en(H):(T&=O,T!==0&&(g=en(T)))}else O=f&~A,O!==0?g=en(O):T!==0&&(g=en(T));if(g===0)return 0;if(o!==0&&o!==g&&!(o&A)&&(A=g&-g,T=o&-o,A>=T||A===16&&(T&4194240)!==0))return o;if(g&4&&(g|=f&16),o=n.entangledLanes,o!==0)for(n=n.entanglements,o&=g;0<o;)f=31-Zn(o),A=1<<f,g|=n[f],o&=~A;return g}function ea(n,o){switch(n){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wi(n,o){for(var f=n.suspendedLanes,g=n.pingedLanes,A=n.expirationTimes,T=n.pendingLanes;0<T;){var O=31-Zn(T),H=1<<O,J=A[O];J===-1?(!(H&f)||H&g)&&(A[O]=ea(H,o)):J<=o&&(n.expiredLanes|=H),T&=~H}}function Ut(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Mn(){var n=Nr;return Nr<<=1,!(Nr&4194240)&&(Nr=64),n}function ae(n){for(var o=[],f=0;31>f;f++)o.push(n);return o}function U(n,o,f){n.pendingLanes|=o,o!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,o=31-Zn(o),n[o]=f}function ct(n,o){var f=n.pendingLanes&~o;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=o,n.mutableReadLanes&=o,n.entangledLanes&=o,o=n.entanglements;var g=n.eventTimes;for(n=n.expirationTimes;0<f;){var A=31-Zn(f),T=1<<A;o[A]=0,g[A]=-1,n[A]=-1,f&=~T}}function on(n,o){var f=n.entangledLanes|=o;for(n=n.entanglements;f;){var g=31-Zn(f),A=1<<g;A&o|n[g]&o&&(n[g]|=o),f&=~A}}var Nt=0;function po(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Mi,rr,dt,tn,ns,Ms=!1,li=[],Le=null,rt=null,It=null,Ke=new Map,Dt=new Map,an=[],mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Os(n,o){switch(n){case"focusin":case"focusout":Le=null;break;case"dragenter":case"dragleave":rt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Ke.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(o.pointerId)}}function Ct(n,o,f,g,A,T){return n===null||n.nativeEvent!==T?(n={blockedOn:o,domEventName:f,eventSystemFlags:g,nativeEvent:T,targetContainers:[A]},o!==null&&(o=ga(o),o!==null&&rr(o)),n):(n.eventSystemFlags|=g,o=n.targetContainers,A!==null&&o.indexOf(A)===-1&&o.push(A),n)}function vn(n,o,f,g,A){switch(o){case"focusin":return Le=Ct(Le,n,o,f,g,A),!0;case"dragenter":return rt=Ct(rt,n,o,f,g,A),!0;case"mouseover":return It=Ct(It,n,o,f,g,A),!0;case"pointerover":var T=A.pointerId;return Ke.set(T,Ct(Ke.get(T)||null,n,o,f,g,A)),!0;case"gotpointercapture":return T=A.pointerId,Dt.set(T,Ct(Dt.get(T)||null,n,o,f,g,A)),!0}return!1}function ta(n){var o=Ws(n.target);if(o!==null){var f=xr(o);if(f!==null){if(o=f.tag,o===13){if(o=oi(f),o!==null){n.blockedOn=o,ns(n.priority,function(){dt(f)});return}}else if(o===3&&f.stateNode.current.memoizedState.isDehydrated){n.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Cn(n){if(n.blockedOn!==null)return!1;for(var o=n.targetContainers;0<o.length;){var f=go(n.domEventName,n.eventSystemFlags,o[0],n.nativeEvent);if(f===null){f=n.nativeEvent;var g=new f.constructor(f.type,f);Qt=g,f.target.dispatchEvent(g),Qt=null}else return o=ga(f),o!==null&&rr(o),n.blockedOn=f,!1;o.shift()}return!0}function Ir(n,o,f){Cn(n)&&f.delete(o)}function Ur(){Ms=!1,Le!==null&&Cn(Le)&&(Le=null),rt!==null&&Cn(rt)&&(rt=null),It!==null&&Cn(It)&&(It=null),Ke.forEach(Ir),Dt.forEach(Ir)}function ur(n,o){n.blockedOn===o&&(n.blockedOn=null,Ms||(Ms=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ur)))}function On(n){function o(A){return ur(A,n)}if(0<li.length){ur(li[0],n);for(var f=1;f<li.length;f++){var g=li[f];g.blockedOn===n&&(g.blockedOn=null)}}for(Le!==null&&ur(Le,n),rt!==null&&ur(rt,n),It!==null&&ur(It,n),Ke.forEach(o),Dt.forEach(o),f=0;f<an.length;f++)g=an[f],g.blockedOn===n&&(g.blockedOn=null);for(;0<an.length&&(f=an[0],f.blockedOn===null);)ta(f),f.blockedOn===null&&an.shift()}var Mr=$.ReactCurrentBatchConfig,vi=!0;function ul(n,o,f,g){var A=Nt,T=Mr.transition;Mr.transition=null;try{Nt=1,Oi(n,o,f,g)}finally{Nt=A,Mr.transition=T}}function Ds(n,o,f,g){var A=Nt,T=Mr.transition;Mr.transition=null;try{Nt=4,Oi(n,o,f,g)}finally{Nt=A,Mr.transition=T}}function Oi(n,o,f,g){if(vi){var A=go(n,o,f,g);if(A===null)lu(n,o,g,Kn,f),Os(n,g);else if(vn(A,n,o,f,g))g.stopPropagation();else if(Os(n,g),o&4&&-1<mt.indexOf(n)){for(;A!==null;){var T=ga(A);if(T!==null&&Mi(T),T=go(n,o,f,g),T===null&&lu(n,o,g,Kn,f),T===A)break;A=T}A!==null&&g.stopPropagation()}else lu(n,o,g,null,f)}}var Kn=null;function go(n,o,f,g){if(Kn=null,n=dn(g),n=Ws(n),n!==null)if(o=xr(n),o===null)n=null;else if(f=o.tag,f===13){if(n=oi(o),n!==null)return n;n=null}else if(f===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null);return Kn=n,null}function na(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ps()){case Se:return 1;case ho:return 4;case Zt:case yi:return 16;case mo:return 536870912;default:return 16}default:return 16}}var ci=null,ra=null,xo=null;function dl(){if(xo)return xo;var n,o=ra,f=o.length,g,A="value"in ci?ci.value:ci.textContent,T=A.length;for(n=0;n<f&&o[n]===A[n];n++);var O=f-n;for(g=1;g<=O&&o[f-g]===A[T-g];g++);return xo=A.slice(n,1<g?1-g:void 0)}function Ht(n){var o=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&o===13&&(n=13)):n=o,n===10&&(n=13),32<=n||n===13?n:0}function Ls(){return!0}function js(){return!1}function In(n){function o(f,g,A,T,O){this._reactName=f,this._targetInst=A,this.type=g,this.nativeEvent=T,this.target=O,this.currentTarget=null;for(var H in n)n.hasOwnProperty(H)&&(f=n[H],this[H]=f?f(T):T[H]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Ls:js,this.isPropagationStopped=js,this}return we(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Ls)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Ls)},persist:function(){},isPersistent:Ls}),o}var rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},me=In(rs),_t=we({},rs,{view:0,detail:0}),qn=In(_t),is,yo,Bs,wo=we({},_t,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Bs&&(Bs&&n.type==="mousemove"?(is=n.screenX-Bs.screenX,yo=n.screenY-Bs.screenY):yo=is=0,Bs=n),is)},movementY:function(n){return"movementY"in n?n.movementY:yo}}),fl=In(wo),ia=we({},wo,{dataTransfer:0}),Dn=In(ia),sa=we({},_t,{relatedTarget:0}),ln=In(sa),vo=we({},rs,{animationName:0,elapsedTime:0,pseudoElement:0}),Di=In(vo),nn=we({},rs,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),pt=In(nn),Jc=we({},rs,{data:0}),sn=In(Jc),Li={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ss={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zr(n){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(n):(n=eu[n])?!!o[n]:!1}function Fs(){return Zr}var hl=we({},_t,{key:function(n){if(n.key){var o=Li[n.key]||n.key;if(o!=="Unidentified")return o}return n.type==="keypress"?(n=Ht(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ss[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fs,charCode:function(n){return n.type==="keypress"?Ht(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ht(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),oa=In(hl),ml=we({},wo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),aa=In(ml),tu=we({},_t,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fs}),os=In(tu),la=we({},rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),nu=In(la),Vs=we({},wo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ru=In(Vs),Ci=[9,13,27,32],as=b&&"CompositionEvent"in window,ir=null;b&&"documentMode"in document&&(ir=document.documentMode);var pl=b&&"TextEvent"in window&&!ir,zr=b&&(!as||ir&&8<ir&&11>=ir),gl=" ",Co=!1;function xl(n,o){switch(n){case"keyup":return Ci.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ca(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var dr=!1;function iu(n,o){switch(n){case"compositionend":return ca(o);case"keypress":return o.which!==32?null:(Co=!0,gl);case"textInput":return n=o.data,n===gl&&Co?null:n;default:return null}}function ua(n,o){if(dr)return n==="compositionend"||!as&&xl(n,o)?(n=dl(),xo=ra=ci=null,dr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return zr&&o.locale!=="ko"?null:o.data;default:return null}}var Us={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vt(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o==="input"?!!Us[n.type]:o==="textarea"}function zs(n,o,f,g){Yr(g),o=vl(o,"onChange"),0<o.length&&(f=new me("onChange","change",null,f,g),n.push({event:f,listeners:o}))}var k=null,e=null;function r(n){Nh(n,0)}function s(n){var o=So(n);if(ie(o))return n}function l(n,o){if(n==="change")return o}var c=!1;if(b){var d;if(b){var p="oninput"in document;if(!p){var w=document.createElement("div");w.setAttribute("oninput","return;"),p=typeof w.oninput=="function"}d=p}else d=!1;c=d&&(!document.documentMode||9<document.documentMode)}function E(){k&&(k.detachEvent("onpropertychange",R),e=k=null)}function R(n){if(n.propertyName==="value"&&s(e)){var o=[];zs(o,e,n,dn(n)),si(r,o)}}function P(n,o,f){n==="focusin"?(E(),k=o,e=f,k.attachEvent("onpropertychange",R)):n==="focusout"&&E()}function D(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return s(e)}function W(n,o){if(n==="click")return s(o)}function K(n,o){if(n==="input"||n==="change")return s(o)}function ee(n,o){return n===o&&(n!==0||1/n===1/o)||n!==n&&o!==o}var oe=typeof Object.is=="function"?Object.is:ee;function he(n,o){if(oe(n,o))return!0;if(typeof n!="object"||n===null||typeof o!="object"||o===null)return!1;var f=Object.keys(n),g=Object.keys(o);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var A=f[g];if(!v.call(o,A)||!oe(n[A],o[A]))return!1}return!0}function Fe(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function He(n,o){var f=Fe(n);n=0;for(var g;f;){if(f.nodeType===3){if(g=n+f.textContent.length,n<=o&&g>=o)return{node:f,offset:o-n};n=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Fe(f)}}function Me(n,o){return n&&o?n===o?!0:n&&n.nodeType===3?!1:o&&o.nodeType===3?Me(n,o.parentNode):"contains"in n?n.contains(o):n.compareDocumentPosition?!!(n.compareDocumentPosition(o)&16):!1:!1}function jt(){for(var n=window,o=ue();o instanceof n.HTMLIFrameElement;){try{var f=typeof o.contentWindow.location.href=="string"}catch{f=!1}if(f)n=o.contentWindow;else break;o=ue(n.document)}return o}function Tt(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o&&(o==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||o==="textarea"||n.contentEditable==="true")}function wr(n){var o=jt(),f=n.focusedElem,g=n.selectionRange;if(o!==f&&f&&f.ownerDocument&&Me(f.ownerDocument.documentElement,f)){if(g!==null&&Tt(f)){if(o=g.start,n=g.end,n===void 0&&(n=o),"selectionStart"in f)f.selectionStart=o,f.selectionEnd=Math.min(n,f.value.length);else if(n=(o=f.ownerDocument||document)&&o.defaultView||window,n.getSelection){n=n.getSelection();var A=f.textContent.length,T=Math.min(g.start,A);g=g.end===void 0?T:Math.min(g.end,A),!n.extend&&T>g&&(A=g,g=T,T=A),A=He(f,T);var O=He(f,g);A&&O&&(n.rangeCount!==1||n.anchorNode!==A.node||n.anchorOffset!==A.offset||n.focusNode!==O.node||n.focusOffset!==O.offset)&&(o=o.createRange(),o.setStart(A.node,A.offset),n.removeAllRanges(),T>g?(n.addRange(o),n.extend(O.node,O.offset)):(o.setEnd(O.node,O.offset),n.addRange(o)))}}for(o=[],n=f;n=n.parentNode;)n.nodeType===1&&o.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<o.length;f++)n=o[f],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Wr=b&&"documentMode"in document&&11>=document.documentMode,Ln=null,Kt=null,bn=null,fr=!1;function ji(n,o,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;fr||Ln==null||Ln!==ue(g)||(g=Ln,"selectionStart"in g&&Tt(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),bn&&he(bn,g)||(bn=g,g=vl(Kt,"onSelect"),0<g.length&&(o=new me("onSelect","select",null,o,f),n.push({event:o,listeners:g}),o.target=Ln)))}function ui(n,o){var f={};return f[n.toLowerCase()]=o.toLowerCase(),f["Webkit"+n]="webkit"+o,f["Moz"+n]="moz"+o,f}var ls={animationend:ui("Animation","AnimationEnd"),animationiteration:ui("Animation","AnimationIteration"),animationstart:ui("Animation","AnimationStart"),transitionend:ui("Transition","TransitionEnd")},da={},yh={};b&&(yh=document.createElement("div").style,"AnimationEvent"in window||(delete ls.animationend.animation,delete ls.animationiteration.animation,delete ls.animationstart.animation),"TransitionEvent"in window||delete ls.transitionend.transition);function yl(n){if(da[n])return da[n];if(!ls[n])return n;var o=ls[n],f;for(f in o)if(o.hasOwnProperty(f)&&f in yh)return da[n]=o[f];return n}var wh=yl("animationend"),vh=yl("animationiteration"),Ch=yl("animationstart"),bh=yl("transitionend"),Eh=new Map,Sh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cs(n,o){Eh.set(n,o),x(o,[n])}for(var su=0;su<Sh.length;su++){var ou=Sh[su],Vx=ou.toLowerCase(),Ux=ou[0].toUpperCase()+ou.slice(1);cs(Vx,"on"+Ux)}cs(wh,"onAnimationEnd"),cs(vh,"onAnimationIteration"),cs(Ch,"onAnimationStart"),cs("dblclick","onDoubleClick"),cs("focusin","onFocus"),cs("focusout","onBlur"),cs(bh,"onTransitionEnd"),y("onMouseEnter",["mouseout","mouseover"]),y("onMouseLeave",["mouseout","mouseover"]),y("onPointerEnter",["pointerout","pointerover"]),y("onPointerLeave",["pointerout","pointerover"]),x("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),x("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),x("onBeforeInput",["compositionend","keypress","textInput","paste"]),x("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zx=new Set("cancel close invalid load scroll toggle".split(" ").concat(fa));function Ah(n,o,f){var g=n.type||"unknown-event";n.currentTarget=f,Xn(g,o,void 0,n),n.currentTarget=null}function Nh(n,o){o=(o&4)!==0;for(var f=0;f<n.length;f++){var g=n[f],A=g.event;g=g.listeners;e:{var T=void 0;if(o)for(var O=g.length-1;0<=O;O--){var H=g[O],J=H.instance,pe=H.currentTarget;if(H=H.listener,J!==T&&A.isPropagationStopped())break e;Ah(A,H,pe),T=J}else for(O=0;O<g.length;O++){if(H=g[O],J=H.instance,pe=H.currentTarget,H=H.listener,J!==T&&A.isPropagationStopped())break e;Ah(A,H,pe),T=J}}}if(qt)throw n=Je,qt=!1,Je=null,n}function mn(n,o){var f=o[mu];f===void 0&&(f=o[mu]=new Set);var g=n+"__bubble";f.has(g)||(Ih(o,n,2,!1),f.add(g))}function au(n,o,f){var g=0;o&&(g|=4),Ih(f,n,g,o)}var wl="_reactListening"+Math.random().toString(36).slice(2);function ha(n){if(!n[wl]){n[wl]=!0,u.forEach(function(f){f!=="selectionchange"&&(zx.has(f)||au(f,!1,n),au(f,!0,n))});var o=n.nodeType===9?n:n.ownerDocument;o===null||o[wl]||(o[wl]=!0,au("selectionchange",!1,o))}}function Ih(n,o,f,g){switch(na(o)){case 1:var A=ul;break;case 4:A=Ds;break;default:A=Oi}f=A.bind(null,o,f,n),A=void 0,!ki||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(A=!0),g?A!==void 0?n.addEventListener(o,f,{capture:!0,passive:A}):n.addEventListener(o,f,!0):A!==void 0?n.addEventListener(o,f,{passive:A}):n.addEventListener(o,f,!1)}function lu(n,o,f,g,A){var T=g;if(!(o&1)&&!(o&2)&&g!==null)e:for(;;){if(g===null)return;var O=g.tag;if(O===3||O===4){var H=g.stateNode.containerInfo;if(H===A||H.nodeType===8&&H.parentNode===A)break;if(O===4)for(O=g.return;O!==null;){var J=O.tag;if((J===3||J===4)&&(J=O.stateNode.containerInfo,J===A||J.nodeType===8&&J.parentNode===A))return;O=O.return}for(;H!==null;){if(O=Ws(H),O===null)return;if(J=O.tag,J===5||J===6){g=T=O;continue e}H=H.parentNode}}g=g.return}si(function(){var pe=T,Oe=dn(f),Be=[];e:{var ke=Eh.get(n);if(ke!==void 0){var it=me,ot=n;switch(n){case"keypress":if(Ht(f)===0)break e;case"keydown":case"keyup":it=oa;break;case"focusin":ot="focus",it=ln;break;case"focusout":ot="blur",it=ln;break;case"beforeblur":case"afterblur":it=ln;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":it=fl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":it=Dn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":it=os;break;case wh:case vh:case Ch:it=Di;break;case bh:it=nu;break;case"scroll":it=qn;break;case"wheel":it=ru;break;case"copy":case"cut":case"paste":it=pt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":it=aa}var ut=(o&4)!==0,jn=!ut&&n==="scroll",ce=ut?ke!==null?ke+"Capture":null:ke;ut=[];for(var ne=pe,de;ne!==null;){de=ne;var Ye=de.stateNode;if(de.tag===5&&Ye!==null&&(de=Ye,ce!==null&&(Ye=Un(ne,ce),Ye!=null&&ut.push(ma(ne,Ye,de)))),jn)break;ne=ne.return}0<ut.length&&(ke=new it(ke,ot,null,f,Oe),Be.push({event:ke,listeners:ut}))}}if(!(o&7)){e:{if(ke=n==="mouseover"||n==="pointerover",it=n==="mouseout"||n==="pointerout",ke&&f!==Qt&&(ot=f.relatedTarget||f.fromElement)&&(Ws(ot)||ot[Bi]))break e;if((it||ke)&&(ke=Oe.window===Oe?Oe:(ke=Oe.ownerDocument)?ke.defaultView||ke.parentWindow:window,it?(ot=f.relatedTarget||f.toElement,it=pe,ot=ot?Ws(ot):null,ot!==null&&(jn=xr(ot),ot!==jn||ot.tag!==5&&ot.tag!==6)&&(ot=null)):(it=null,ot=pe),it!==ot)){if(ut=fl,Ye="onMouseLeave",ce="onMouseEnter",ne="mouse",(n==="pointerout"||n==="pointerover")&&(ut=aa,Ye="onPointerLeave",ce="onPointerEnter",ne="pointer"),jn=it==null?ke:So(it),de=ot==null?ke:So(ot),ke=new ut(Ye,ne+"leave",it,f,Oe),ke.target=jn,ke.relatedTarget=de,Ye=null,Ws(Oe)===pe&&(ut=new ut(ce,ne+"enter",ot,f,Oe),ut.target=de,ut.relatedTarget=jn,Ye=ut),jn=Ye,it&&ot)t:{for(ut=it,ce=ot,ne=0,de=ut;de;de=bo(de))ne++;for(de=0,Ye=ce;Ye;Ye=bo(Ye))de++;for(;0<ne-de;)ut=bo(ut),ne--;for(;0<de-ne;)ce=bo(ce),de--;for(;ne--;){if(ut===ce||ce!==null&&ut===ce.alternate)break t;ut=bo(ut),ce=bo(ce)}ut=null}else ut=null;it!==null&&Th(Be,ke,it,ut,!1),ot!==null&&jn!==null&&Th(Be,jn,ot,ut,!0)}}e:{if(ke=pe?So(pe):window,it=ke.nodeName&&ke.nodeName.toLowerCase(),it==="select"||it==="input"&&ke.type==="file")var ft=l;else if(Vt(ke))if(c)ft=K;else{ft=D;var gt=P}else(it=ke.nodeName)&&it.toLowerCase()==="input"&&(ke.type==="checkbox"||ke.type==="radio")&&(ft=W);if(ft&&(ft=ft(n,pe))){zs(Be,ft,f,Oe);break e}gt&&gt(n,ke,pe),n==="focusout"&&(gt=ke._wrapperState)&&gt.controlled&&ke.type==="number"&&We(ke,"number",ke.value)}switch(gt=pe?So(pe):window,n){case"focusin":(Vt(gt)||gt.contentEditable==="true")&&(Ln=gt,Kt=pe,bn=null);break;case"focusout":bn=Kt=Ln=null;break;case"mousedown":fr=!0;break;case"contextmenu":case"mouseup":case"dragend":fr=!1,ji(Be,f,Oe);break;case"selectionchange":if(Wr)break;case"keydown":case"keyup":ji(Be,f,Oe)}var xt;if(as)e:{switch(n){case"compositionstart":var At="onCompositionStart";break e;case"compositionend":At="onCompositionEnd";break e;case"compositionupdate":At="onCompositionUpdate";break e}At=void 0}else dr?xl(n,f)&&(At="onCompositionEnd"):n==="keydown"&&f.keyCode===229&&(At="onCompositionStart");At&&(zr&&f.locale!=="ko"&&(dr||At!=="onCompositionStart"?At==="onCompositionEnd"&&dr&&(xt=dl()):(ci=Oe,ra="value"in ci?ci.value:ci.textContent,dr=!0)),gt=vl(pe,At),0<gt.length&&(At=new sn(At,n,null,f,Oe),Be.push({event:At,listeners:gt}),xt?At.data=xt:(xt=ca(f),xt!==null&&(At.data=xt)))),(xt=pl?iu(n,f):ua(n,f))&&(pe=vl(pe,"onBeforeInput"),0<pe.length&&(Oe=new sn("onBeforeInput","beforeinput",null,f,Oe),Be.push({event:Oe,listeners:pe}),Oe.data=xt))}Nh(Be,o)})}function ma(n,o,f){return{instance:n,listener:o,currentTarget:f}}function vl(n,o){for(var f=o+"Capture",g=[];n!==null;){var A=n,T=A.stateNode;A.tag===5&&T!==null&&(A=T,T=Un(n,f),T!=null&&g.unshift(ma(n,T,A)),T=Un(n,o),T!=null&&g.push(ma(n,T,A))),n=n.return}return g}function bo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Th(n,o,f,g,A){for(var T=o._reactName,O=[];f!==null&&f!==g;){var H=f,J=H.alternate,pe=H.stateNode;if(J!==null&&J===g)break;H.tag===5&&pe!==null&&(H=pe,A?(J=Un(f,T),J!=null&&O.unshift(ma(f,J,H))):A||(J=Un(f,T),J!=null&&O.push(ma(f,J,H)))),f=f.return}O.length!==0&&n.push({event:o,listeners:O})}var Wx=/\r\n?/g,Hx=/\u0000|\uFFFD/g;function _h(n){return(typeof n=="string"?n:""+n).replace(Wx,`
`).replace(Hx,"")}function Cl(n,o,f){if(o=_h(o),_h(n)!==o&&f)throw Error(a(425))}function bl(){}var cu=null,uu=null;function du(n,o){return n==="textarea"||n==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var fu=typeof setTimeout=="function"?setTimeout:void 0,Gx=typeof clearTimeout=="function"?clearTimeout:void 0,Rh=typeof Promise=="function"?Promise:void 0,Xx=typeof queueMicrotask=="function"?queueMicrotask:typeof Rh<"u"?function(n){return Rh.resolve(null).then(n).catch(Yx)}:fu;function Yx(n){setTimeout(function(){throw n})}function hu(n,o){var f=o,g=0;do{var A=f.nextSibling;if(n.removeChild(f),A&&A.nodeType===8)if(f=A.data,f==="/$"){if(g===0){n.removeChild(A),On(o);return}g--}else f!=="$"&&f!=="$?"&&f!=="$!"||g++;f=A}while(f);On(o)}function us(n){for(;n!=null;n=n.nextSibling){var o=n.nodeType;if(o===1||o===3)break;if(o===8){if(o=n.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return n}function kh(n){n=n.previousSibling;for(var o=0;n;){if(n.nodeType===8){var f=n.data;if(f==="$"||f==="$!"||f==="$?"){if(o===0)return n;o--}else f==="/$"&&o++}n=n.previousSibling}return null}var Eo=Math.random().toString(36).slice(2),bi="__reactFiber$"+Eo,pa="__reactProps$"+Eo,Bi="__reactContainer$"+Eo,mu="__reactEvents$"+Eo,$x="__reactListeners$"+Eo,Zx="__reactHandles$"+Eo;function Ws(n){var o=n[bi];if(o)return o;for(var f=n.parentNode;f;){if(o=f[Bi]||f[bi]){if(f=o.alternate,o.child!==null||f!==null&&f.child!==null)for(n=kh(n);n!==null;){if(f=n[bi])return f;n=kh(n)}return o}n=f,f=n.parentNode}return null}function ga(n){return n=n[bi]||n[Bi],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function So(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(a(33))}function El(n){return n[pa]||null}var pu=[],Ao=-1;function ds(n){return{current:n}}function pn(n){0>Ao||(n.current=pu[Ao],pu[Ao]=null,Ao--)}function cn(n,o){Ao++,pu[Ao]=n.current,n.current=o}var fs={},vr=ds(fs),Or=ds(!1),Hs=fs;function No(n,o){var f=n.type.contextTypes;if(!f)return fs;var g=n.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===o)return g.__reactInternalMemoizedMaskedChildContext;var A={},T;for(T in f)A[T]=o[T];return g&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=o,n.__reactInternalMemoizedMaskedChildContext=A),A}function Dr(n){return n=n.childContextTypes,n!=null}function Sl(){pn(Or),pn(vr)}function Ph(n,o,f){if(vr.current!==fs)throw Error(a(168));cn(vr,o),cn(Or,f)}function Mh(n,o,f){var g=n.stateNode;if(o=o.childContextTypes,typeof g.getChildContext!="function")return f;g=g.getChildContext();for(var A in g)if(!(A in o))throw Error(a(108,Xe(n)||"Unknown",A));return we({},f,g)}function Al(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||fs,Hs=vr.current,cn(vr,n),cn(Or,Or.current),!0}function Oh(n,o,f){var g=n.stateNode;if(!g)throw Error(a(169));f?(n=Mh(n,o,Hs),g.__reactInternalMemoizedMergedChildContext=n,pn(Or),pn(vr),cn(vr,n)):pn(Or),cn(Or,f)}var Fi=null,Nl=!1,gu=!1;function Dh(n){Fi===null?Fi=[n]:Fi.push(n)}function Kx(n){Nl=!0,Dh(n)}function hs(){if(!gu&&Fi!==null){gu=!0;var n=0,o=Nt;try{var f=Fi;for(Nt=1;n<f.length;n++){var g=f[n];do g=g(!0);while(g!==null)}Fi=null,Nl=!1}catch(A){throw Fi!==null&&(Fi=Fi.slice(n+1)),Yn(Se,hs),A}finally{Nt=o,gu=!1}}return null}var Io=[],To=0,Il=null,Tl=0,Kr=[],qr=0,Gs=null,Vi=1,Ui="";function Xs(n,o){Io[To++]=Tl,Io[To++]=Il,Il=n,Tl=o}function Lh(n,o,f){Kr[qr++]=Vi,Kr[qr++]=Ui,Kr[qr++]=Gs,Gs=n;var g=Vi;n=Ui;var A=32-Zn(g)-1;g&=~(1<<A),f+=1;var T=32-Zn(o)+A;if(30<T){var O=A-A%5;T=(g&(1<<O)-1).toString(32),g>>=O,A-=O,Vi=1<<32-Zn(o)+A|f<<A|g,Ui=T+n}else Vi=1<<T|f<<A|g,Ui=n}function xu(n){n.return!==null&&(Xs(n,1),Lh(n,1,0))}function yu(n){for(;n===Il;)Il=Io[--To],Io[To]=null,Tl=Io[--To],Io[To]=null;for(;n===Gs;)Gs=Kr[--qr],Kr[qr]=null,Ui=Kr[--qr],Kr[qr]=null,Vi=Kr[--qr],Kr[qr]=null}var Hr=null,Gr=null,xn=!1,di=null;function jh(n,o){var f=ti(5,null,null,0);f.elementType="DELETED",f.stateNode=o,f.return=n,o=n.deletions,o===null?(n.deletions=[f],n.flags|=16):o.push(f)}function Bh(n,o){switch(n.tag){case 5:var f=n.type;return o=o.nodeType!==1||f.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(n.stateNode=o,Hr=n,Gr=us(o.firstChild),!0):!1;case 6:return o=n.pendingProps===""||o.nodeType!==3?null:o,o!==null?(n.stateNode=o,Hr=n,Gr=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(f=Gs!==null?{id:Vi,overflow:Ui}:null,n.memoizedState={dehydrated:o,treeContext:f,retryLane:1073741824},f=ti(18,null,null,0),f.stateNode=o,f.return=n,n.child=f,Hr=n,Gr=null,!0):!1;default:return!1}}function wu(n){return(n.mode&1)!==0&&(n.flags&128)===0}function vu(n){if(xn){var o=Gr;if(o){var f=o;if(!Bh(n,o)){if(wu(n))throw Error(a(418));o=us(f.nextSibling);var g=Hr;o&&Bh(n,o)?jh(g,f):(n.flags=n.flags&-4097|2,xn=!1,Hr=n)}}else{if(wu(n))throw Error(a(418));n.flags=n.flags&-4097|2,xn=!1,Hr=n}}}function Fh(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Hr=n}function _l(n){if(n!==Hr)return!1;if(!xn)return Fh(n),xn=!0,!1;var o;if((o=n.tag!==3)&&!(o=n.tag!==5)&&(o=n.type,o=o!=="head"&&o!=="body"&&!du(n.type,n.memoizedProps)),o&&(o=Gr)){if(wu(n))throw Vh(),Error(a(418));for(;o;)jh(n,o),o=us(o.nextSibling)}if(Fh(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));e:{for(n=n.nextSibling,o=0;n;){if(n.nodeType===8){var f=n.data;if(f==="/$"){if(o===0){Gr=us(n.nextSibling);break e}o--}else f!=="$"&&f!=="$!"&&f!=="$?"||o++}n=n.nextSibling}Gr=null}}else Gr=Hr?us(n.stateNode.nextSibling):null;return!0}function Vh(){for(var n=Gr;n;)n=us(n.nextSibling)}function _o(){Gr=Hr=null,xn=!1}function Cu(n){di===null?di=[n]:di.push(n)}var qx=$.ReactCurrentBatchConfig;function xa(n,o,f){if(n=f.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(a(309));var g=f.stateNode}if(!g)throw Error(a(147,n));var A=g,T=""+n;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===T?o.ref:(o=function(O){var H=A.refs;O===null?delete H[T]:H[T]=O},o._stringRef=T,o)}if(typeof n!="string")throw Error(a(284));if(!f._owner)throw Error(a(290,n))}return n}function Rl(n,o){throw n=Object.prototype.toString.call(o),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":n))}function Uh(n){var o=n._init;return o(n._payload)}function zh(n){function o(ce,ne){if(n){var de=ce.deletions;de===null?(ce.deletions=[ne],ce.flags|=16):de.push(ne)}}function f(ce,ne){if(!n)return null;for(;ne!==null;)o(ce,ne),ne=ne.sibling;return null}function g(ce,ne){for(ce=new Map;ne!==null;)ne.key!==null?ce.set(ne.key,ne):ce.set(ne.index,ne),ne=ne.sibling;return ce}function A(ce,ne){return ce=Cs(ce,ne),ce.index=0,ce.sibling=null,ce}function T(ce,ne,de){return ce.index=de,n?(de=ce.alternate,de!==null?(de=de.index,de<ne?(ce.flags|=2,ne):de):(ce.flags|=2,ne)):(ce.flags|=1048576,ne)}function O(ce){return n&&ce.alternate===null&&(ce.flags|=2),ce}function H(ce,ne,de,Ye){return ne===null||ne.tag!==6?(ne=fd(de,ce.mode,Ye),ne.return=ce,ne):(ne=A(ne,de),ne.return=ce,ne)}function J(ce,ne,de,Ye){var ft=de.type;return ft===X?Oe(ce,ne,de.props.children,Ye,de.key):ne!==null&&(ne.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===je&&Uh(ft)===ne.type)?(Ye=A(ne,de.props),Ye.ref=xa(ce,ne,de),Ye.return=ce,Ye):(Ye=ec(de.type,de.key,de.props,null,ce.mode,Ye),Ye.ref=xa(ce,ne,de),Ye.return=ce,Ye)}function pe(ce,ne,de,Ye){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==de.containerInfo||ne.stateNode.implementation!==de.implementation?(ne=hd(de,ce.mode,Ye),ne.return=ce,ne):(ne=A(ne,de.children||[]),ne.return=ce,ne)}function Oe(ce,ne,de,Ye,ft){return ne===null||ne.tag!==7?(ne=eo(de,ce.mode,Ye,ft),ne.return=ce,ne):(ne=A(ne,de),ne.return=ce,ne)}function Be(ce,ne,de){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ne=fd(""+ne,ce.mode,de),ne.return=ce,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case Z:return de=ec(ne.type,ne.key,ne.props,null,ce.mode,de),de.ref=xa(ce,null,ne),de.return=ce,de;case re:return ne=hd(ne,ce.mode,de),ne.return=ce,ne;case je:var Ye=ne._init;return Be(ce,Ye(ne._payload),de)}if(wt(ne)||Ve(ne))return ne=eo(ne,ce.mode,de,null),ne.return=ce,ne;Rl(ce,ne)}return null}function ke(ce,ne,de,Ye){var ft=ne!==null?ne.key:null;if(typeof de=="string"&&de!==""||typeof de=="number")return ft!==null?null:H(ce,ne,""+de,Ye);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case Z:return de.key===ft?J(ce,ne,de,Ye):null;case re:return de.key===ft?pe(ce,ne,de,Ye):null;case je:return ft=de._init,ke(ce,ne,ft(de._payload),Ye)}if(wt(de)||Ve(de))return ft!==null?null:Oe(ce,ne,de,Ye,null);Rl(ce,de)}return null}function it(ce,ne,de,Ye,ft){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number")return ce=ce.get(de)||null,H(ne,ce,""+Ye,ft);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case Z:return ce=ce.get(Ye.key===null?de:Ye.key)||null,J(ne,ce,Ye,ft);case re:return ce=ce.get(Ye.key===null?de:Ye.key)||null,pe(ne,ce,Ye,ft);case je:var gt=Ye._init;return it(ce,ne,de,gt(Ye._payload),ft)}if(wt(Ye)||Ve(Ye))return ce=ce.get(de)||null,Oe(ne,ce,Ye,ft,null);Rl(ne,Ye)}return null}function ot(ce,ne,de,Ye){for(var ft=null,gt=null,xt=ne,At=ne=0,ar=null;xt!==null&&At<de.length;At++){xt.index>At?(ar=xt,xt=null):ar=xt.sibling;var Yt=ke(ce,xt,de[At],Ye);if(Yt===null){xt===null&&(xt=ar);break}n&&xt&&Yt.alternate===null&&o(ce,xt),ne=T(Yt,ne,At),gt===null?ft=Yt:gt.sibling=Yt,gt=Yt,xt=ar}if(At===de.length)return f(ce,xt),xn&&Xs(ce,At),ft;if(xt===null){for(;At<de.length;At++)xt=Be(ce,de[At],Ye),xt!==null&&(ne=T(xt,ne,At),gt===null?ft=xt:gt.sibling=xt,gt=xt);return xn&&Xs(ce,At),ft}for(xt=g(ce,xt);At<de.length;At++)ar=it(xt,ce,At,de[At],Ye),ar!==null&&(n&&ar.alternate!==null&&xt.delete(ar.key===null?At:ar.key),ne=T(ar,ne,At),gt===null?ft=ar:gt.sibling=ar,gt=ar);return n&&xt.forEach(function(bs){return o(ce,bs)}),xn&&Xs(ce,At),ft}function ut(ce,ne,de,Ye){var ft=Ve(de);if(typeof ft!="function")throw Error(a(150));if(de=ft.call(de),de==null)throw Error(a(151));for(var gt=ft=null,xt=ne,At=ne=0,ar=null,Yt=de.next();xt!==null&&!Yt.done;At++,Yt=de.next()){xt.index>At?(ar=xt,xt=null):ar=xt.sibling;var bs=ke(ce,xt,Yt.value,Ye);if(bs===null){xt===null&&(xt=ar);break}n&&xt&&bs.alternate===null&&o(ce,xt),ne=T(bs,ne,At),gt===null?ft=bs:gt.sibling=bs,gt=bs,xt=ar}if(Yt.done)return f(ce,xt),xn&&Xs(ce,At),ft;if(xt===null){for(;!Yt.done;At++,Yt=de.next())Yt=Be(ce,Yt.value,Ye),Yt!==null&&(ne=T(Yt,ne,At),gt===null?ft=Yt:gt.sibling=Yt,gt=Yt);return xn&&Xs(ce,At),ft}for(xt=g(ce,xt);!Yt.done;At++,Yt=de.next())Yt=it(xt,ce,At,Yt.value,Ye),Yt!==null&&(n&&Yt.alternate!==null&&xt.delete(Yt.key===null?At:Yt.key),ne=T(Yt,ne,At),gt===null?ft=Yt:gt.sibling=Yt,gt=Yt);return n&&xt.forEach(function(R2){return o(ce,R2)}),xn&&Xs(ce,At),ft}function jn(ce,ne,de,Ye){if(typeof de=="object"&&de!==null&&de.type===X&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case Z:e:{for(var ft=de.key,gt=ne;gt!==null;){if(gt.key===ft){if(ft=de.type,ft===X){if(gt.tag===7){f(ce,gt.sibling),ne=A(gt,de.props.children),ne.return=ce,ce=ne;break e}}else if(gt.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===je&&Uh(ft)===gt.type){f(ce,gt.sibling),ne=A(gt,de.props),ne.ref=xa(ce,gt,de),ne.return=ce,ce=ne;break e}f(ce,gt);break}else o(ce,gt);gt=gt.sibling}de.type===X?(ne=eo(de.props.children,ce.mode,Ye,de.key),ne.return=ce,ce=ne):(Ye=ec(de.type,de.key,de.props,null,ce.mode,Ye),Ye.ref=xa(ce,ne,de),Ye.return=ce,ce=Ye)}return O(ce);case re:e:{for(gt=de.key;ne!==null;){if(ne.key===gt)if(ne.tag===4&&ne.stateNode.containerInfo===de.containerInfo&&ne.stateNode.implementation===de.implementation){f(ce,ne.sibling),ne=A(ne,de.children||[]),ne.return=ce,ce=ne;break e}else{f(ce,ne);break}else o(ce,ne);ne=ne.sibling}ne=hd(de,ce.mode,Ye),ne.return=ce,ce=ne}return O(ce);case je:return gt=de._init,jn(ce,ne,gt(de._payload),Ye)}if(wt(de))return ot(ce,ne,de,Ye);if(Ve(de))return ut(ce,ne,de,Ye);Rl(ce,de)}return typeof de=="string"&&de!==""||typeof de=="number"?(de=""+de,ne!==null&&ne.tag===6?(f(ce,ne.sibling),ne=A(ne,de),ne.return=ce,ce=ne):(f(ce,ne),ne=fd(de,ce.mode,Ye),ne.return=ce,ce=ne),O(ce)):f(ce,ne)}return jn}var Ro=zh(!0),Wh=zh(!1),kl=ds(null),Pl=null,ko=null,bu=null;function Eu(){bu=ko=Pl=null}function Su(n){var o=kl.current;pn(kl),n._currentValue=o}function Au(n,o,f){for(;n!==null;){var g=n.alternate;if((n.childLanes&o)!==o?(n.childLanes|=o,g!==null&&(g.childLanes|=o)):g!==null&&(g.childLanes&o)!==o&&(g.childLanes|=o),n===f)break;n=n.return}}function Po(n,o){Pl=n,bu=ko=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&o&&(Lr=!0),n.firstContext=null)}function Qr(n){var o=n._currentValue;if(bu!==n)if(n={context:n,memoizedValue:o,next:null},ko===null){if(Pl===null)throw Error(a(308));ko=n,Pl.dependencies={lanes:0,firstContext:n}}else ko=ko.next=n;return o}var Ys=null;function Nu(n){Ys===null?Ys=[n]:Ys.push(n)}function Hh(n,o,f,g){var A=o.interleaved;return A===null?(f.next=f,Nu(o)):(f.next=A.next,A.next=f),o.interleaved=f,zi(n,g)}function zi(n,o){n.lanes|=o;var f=n.alternate;for(f!==null&&(f.lanes|=o),f=n,n=n.return;n!==null;)n.childLanes|=o,f=n.alternate,f!==null&&(f.childLanes|=o),f=n,n=n.return;return f.tag===3?f.stateNode:null}var ms=!1;function Iu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gh(n,o){n=n.updateQueue,o.updateQueue===n&&(o.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Wi(n,o){return{eventTime:n,lane:o,tag:0,payload:null,callback:null,next:null}}function ps(n,o,f){var g=n.updateQueue;if(g===null)return null;if(g=g.shared,Gt&2){var A=g.pending;return A===null?o.next=o:(o.next=A.next,A.next=o),g.pending=o,zi(n,f)}return A=g.interleaved,A===null?(o.next=o,Nu(g)):(o.next=A.next,A.next=o),g.interleaved=o,zi(n,f)}function Ml(n,o,f){if(o=o.updateQueue,o!==null&&(o=o.shared,(f&4194240)!==0)){var g=o.lanes;g&=n.pendingLanes,f|=g,o.lanes=f,on(n,f)}}function Xh(n,o){var f=n.updateQueue,g=n.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var A=null,T=null;if(f=f.firstBaseUpdate,f!==null){do{var O={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};T===null?A=T=O:T=T.next=O,f=f.next}while(f!==null);T===null?A=T=o:T=T.next=o}else A=T=o;f={baseState:g.baseState,firstBaseUpdate:A,lastBaseUpdate:T,shared:g.shared,effects:g.effects},n.updateQueue=f;return}n=f.lastBaseUpdate,n===null?f.firstBaseUpdate=o:n.next=o,f.lastBaseUpdate=o}function Ol(n,o,f,g){var A=n.updateQueue;ms=!1;var T=A.firstBaseUpdate,O=A.lastBaseUpdate,H=A.shared.pending;if(H!==null){A.shared.pending=null;var J=H,pe=J.next;J.next=null,O===null?T=pe:O.next=pe,O=J;var Oe=n.alternate;Oe!==null&&(Oe=Oe.updateQueue,H=Oe.lastBaseUpdate,H!==O&&(H===null?Oe.firstBaseUpdate=pe:H.next=pe,Oe.lastBaseUpdate=J))}if(T!==null){var Be=A.baseState;O=0,Oe=pe=J=null,H=T;do{var ke=H.lane,it=H.eventTime;if((g&ke)===ke){Oe!==null&&(Oe=Oe.next={eventTime:it,lane:0,tag:H.tag,payload:H.payload,callback:H.callback,next:null});e:{var ot=n,ut=H;switch(ke=o,it=f,ut.tag){case 1:if(ot=ut.payload,typeof ot=="function"){Be=ot.call(it,Be,ke);break e}Be=ot;break e;case 3:ot.flags=ot.flags&-65537|128;case 0:if(ot=ut.payload,ke=typeof ot=="function"?ot.call(it,Be,ke):ot,ke==null)break e;Be=we({},Be,ke);break e;case 2:ms=!0}}H.callback!==null&&H.lane!==0&&(n.flags|=64,ke=A.effects,ke===null?A.effects=[H]:ke.push(H))}else it={eventTime:it,lane:ke,tag:H.tag,payload:H.payload,callback:H.callback,next:null},Oe===null?(pe=Oe=it,J=Be):Oe=Oe.next=it,O|=ke;if(H=H.next,H===null){if(H=A.shared.pending,H===null)break;ke=H,H=ke.next,ke.next=null,A.lastBaseUpdate=ke,A.shared.pending=null}}while(!0);if(Oe===null&&(J=Be),A.baseState=J,A.firstBaseUpdate=pe,A.lastBaseUpdate=Oe,o=A.shared.interleaved,o!==null){A=o;do O|=A.lane,A=A.next;while(A!==o)}else T===null&&(A.shared.lanes=0);Ks|=O,n.lanes=O,n.memoizedState=Be}}function Yh(n,o,f){if(n=o.effects,o.effects=null,n!==null)for(o=0;o<n.length;o++){var g=n[o],A=g.callback;if(A!==null){if(g.callback=null,g=f,typeof A!="function")throw Error(a(191,A));A.call(g)}}}var ya={},Ei=ds(ya),wa=ds(ya),va=ds(ya);function $s(n){if(n===ya)throw Error(a(174));return n}function Tu(n,o){switch(cn(va,o),cn(wa,n),cn(Ei,ya),n=o.nodeType,n){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:zt(null,"");break;default:n=n===8?o.parentNode:o,o=n.namespaceURI||null,n=n.tagName,o=zt(o,n)}pn(Ei),cn(Ei,o)}function Mo(){pn(Ei),pn(wa),pn(va)}function $h(n){$s(va.current);var o=$s(Ei.current),f=zt(o,n.type);o!==f&&(cn(wa,n),cn(Ei,f))}function _u(n){wa.current===n&&(pn(Ei),pn(wa))}var En=ds(0);function Dl(n){for(var o=n;o!==null;){if(o.tag===13){var f=o.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Ru=[];function ku(){for(var n=0;n<Ru.length;n++)Ru[n]._workInProgressVersionPrimary=null;Ru.length=0}var Ll=$.ReactCurrentDispatcher,Pu=$.ReactCurrentBatchConfig,Zs=0,Sn=null,Qn=null,sr=null,jl=!1,Ca=!1,ba=0,Qx=0;function Cr(){throw Error(a(321))}function Mu(n,o){if(o===null)return!1;for(var f=0;f<o.length&&f<n.length;f++)if(!oe(n[f],o[f]))return!1;return!0}function Ou(n,o,f,g,A,T){if(Zs=T,Sn=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Ll.current=n===null||n.memoizedState===null?n2:r2,n=f(g,A),Ca){T=0;do{if(Ca=!1,ba=0,25<=T)throw Error(a(301));T+=1,sr=Qn=null,o.updateQueue=null,Ll.current=i2,n=f(g,A)}while(Ca)}if(Ll.current=Vl,o=Qn!==null&&Qn.next!==null,Zs=0,sr=Qn=Sn=null,jl=!1,o)throw Error(a(300));return n}function Du(){var n=ba!==0;return ba=0,n}function Si(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sr===null?Sn.memoizedState=sr=n:sr=sr.next=n,sr}function Jr(){if(Qn===null){var n=Sn.alternate;n=n!==null?n.memoizedState:null}else n=Qn.next;var o=sr===null?Sn.memoizedState:sr.next;if(o!==null)sr=o,Qn=n;else{if(n===null)throw Error(a(310));Qn=n,n={memoizedState:Qn.memoizedState,baseState:Qn.baseState,baseQueue:Qn.baseQueue,queue:Qn.queue,next:null},sr===null?Sn.memoizedState=sr=n:sr=sr.next=n}return sr}function Ea(n,o){return typeof o=="function"?o(n):o}function Lu(n){var o=Jr(),f=o.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=n;var g=Qn,A=g.baseQueue,T=f.pending;if(T!==null){if(A!==null){var O=A.next;A.next=T.next,T.next=O}g.baseQueue=A=T,f.pending=null}if(A!==null){T=A.next,g=g.baseState;var H=O=null,J=null,pe=T;do{var Oe=pe.lane;if((Zs&Oe)===Oe)J!==null&&(J=J.next={lane:0,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),g=pe.hasEagerState?pe.eagerState:n(g,pe.action);else{var Be={lane:Oe,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null};J===null?(H=J=Be,O=g):J=J.next=Be,Sn.lanes|=Oe,Ks|=Oe}pe=pe.next}while(pe!==null&&pe!==T);J===null?O=g:J.next=H,oe(g,o.memoizedState)||(Lr=!0),o.memoizedState=g,o.baseState=O,o.baseQueue=J,f.lastRenderedState=g}if(n=f.interleaved,n!==null){A=n;do T=A.lane,Sn.lanes|=T,Ks|=T,A=A.next;while(A!==n)}else A===null&&(f.lanes=0);return[o.memoizedState,f.dispatch]}function ju(n){var o=Jr(),f=o.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=n;var g=f.dispatch,A=f.pending,T=o.memoizedState;if(A!==null){f.pending=null;var O=A=A.next;do T=n(T,O.action),O=O.next;while(O!==A);oe(T,o.memoizedState)||(Lr=!0),o.memoizedState=T,o.baseQueue===null&&(o.baseState=T),f.lastRenderedState=T}return[T,g]}function Zh(){}function Kh(n,o){var f=Sn,g=Jr(),A=o(),T=!oe(g.memoizedState,A);if(T&&(g.memoizedState=A,Lr=!0),g=g.queue,Bu(Jh.bind(null,f,g,n),[n]),g.getSnapshot!==o||T||sr!==null&&sr.memoizedState.tag&1){if(f.flags|=2048,Sa(9,Qh.bind(null,f,g,A,o),void 0,null),or===null)throw Error(a(349));Zs&30||qh(f,o,A)}return A}function qh(n,o,f){n.flags|=16384,n={getSnapshot:o,value:f},o=Sn.updateQueue,o===null?(o={lastEffect:null,stores:null},Sn.updateQueue=o,o.stores=[n]):(f=o.stores,f===null?o.stores=[n]:f.push(n))}function Qh(n,o,f,g){o.value=f,o.getSnapshot=g,e0(o)&&t0(n)}function Jh(n,o,f){return f(function(){e0(o)&&t0(n)})}function e0(n){var o=n.getSnapshot;n=n.value;try{var f=o();return!oe(n,f)}catch{return!0}}function t0(n){var o=zi(n,1);o!==null&&pi(o,n,1,-1)}function n0(n){var o=Si();return typeof n=="function"&&(n=n()),o.memoizedState=o.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:n},o.queue=n,n=n.dispatch=t2.bind(null,Sn,n),[o.memoizedState,n]}function Sa(n,o,f,g){return n={tag:n,create:o,destroy:f,deps:g,next:null},o=Sn.updateQueue,o===null?(o={lastEffect:null,stores:null},Sn.updateQueue=o,o.lastEffect=n.next=n):(f=o.lastEffect,f===null?o.lastEffect=n.next=n:(g=f.next,f.next=n,n.next=g,o.lastEffect=n)),n}function r0(){return Jr().memoizedState}function Bl(n,o,f,g){var A=Si();Sn.flags|=n,A.memoizedState=Sa(1|o,f,void 0,g===void 0?null:g)}function Fl(n,o,f,g){var A=Jr();g=g===void 0?null:g;var T=void 0;if(Qn!==null){var O=Qn.memoizedState;if(T=O.destroy,g!==null&&Mu(g,O.deps)){A.memoizedState=Sa(o,f,T,g);return}}Sn.flags|=n,A.memoizedState=Sa(1|o,f,T,g)}function i0(n,o){return Bl(8390656,8,n,o)}function Bu(n,o){return Fl(2048,8,n,o)}function s0(n,o){return Fl(4,2,n,o)}function o0(n,o){return Fl(4,4,n,o)}function a0(n,o){if(typeof o=="function")return n=n(),o(n),function(){o(null)};if(o!=null)return n=n(),o.current=n,function(){o.current=null}}function l0(n,o,f){return f=f!=null?f.concat([n]):null,Fl(4,4,a0.bind(null,o,n),f)}function Fu(){}function c0(n,o){var f=Jr();o=o===void 0?null:o;var g=f.memoizedState;return g!==null&&o!==null&&Mu(o,g[1])?g[0]:(f.memoizedState=[n,o],n)}function u0(n,o){var f=Jr();o=o===void 0?null:o;var g=f.memoizedState;return g!==null&&o!==null&&Mu(o,g[1])?g[0]:(n=n(),f.memoizedState=[n,o],n)}function d0(n,o,f){return Zs&21?(oe(f,o)||(f=Mn(),Sn.lanes|=f,Ks|=f,n.baseState=!0),o):(n.baseState&&(n.baseState=!1,Lr=!0),n.memoizedState=f)}function Jx(n,o){var f=Nt;Nt=f!==0&&4>f?f:4,n(!0);var g=Pu.transition;Pu.transition={};try{n(!1),o()}finally{Nt=f,Pu.transition=g}}function f0(){return Jr().memoizedState}function e2(n,o,f){var g=ws(n);if(f={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null},h0(n))m0(o,f);else if(f=Hh(n,o,f,g),f!==null){var A=_r();pi(f,n,g,A),p0(f,o,g)}}function t2(n,o,f){var g=ws(n),A={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null};if(h0(n))m0(o,A);else{var T=n.alternate;if(n.lanes===0&&(T===null||T.lanes===0)&&(T=o.lastRenderedReducer,T!==null))try{var O=o.lastRenderedState,H=T(O,f);if(A.hasEagerState=!0,A.eagerState=H,oe(H,O)){var J=o.interleaved;J===null?(A.next=A,Nu(o)):(A.next=J.next,J.next=A),o.interleaved=A;return}}catch{}finally{}f=Hh(n,o,A,g),f!==null&&(A=_r(),pi(f,n,g,A),p0(f,o,g))}}function h0(n){var o=n.alternate;return n===Sn||o!==null&&o===Sn}function m0(n,o){Ca=jl=!0;var f=n.pending;f===null?o.next=o:(o.next=f.next,f.next=o),n.pending=o}function p0(n,o,f){if(f&4194240){var g=o.lanes;g&=n.pendingLanes,f|=g,o.lanes=f,on(n,f)}}var Vl={readContext:Qr,useCallback:Cr,useContext:Cr,useEffect:Cr,useImperativeHandle:Cr,useInsertionEffect:Cr,useLayoutEffect:Cr,useMemo:Cr,useReducer:Cr,useRef:Cr,useState:Cr,useDebugValue:Cr,useDeferredValue:Cr,useTransition:Cr,useMutableSource:Cr,useSyncExternalStore:Cr,useId:Cr,unstable_isNewReconciler:!1},n2={readContext:Qr,useCallback:function(n,o){return Si().memoizedState=[n,o===void 0?null:o],n},useContext:Qr,useEffect:i0,useImperativeHandle:function(n,o,f){return f=f!=null?f.concat([n]):null,Bl(4194308,4,a0.bind(null,o,n),f)},useLayoutEffect:function(n,o){return Bl(4194308,4,n,o)},useInsertionEffect:function(n,o){return Bl(4,2,n,o)},useMemo:function(n,o){var f=Si();return o=o===void 0?null:o,n=n(),f.memoizedState=[n,o],n},useReducer:function(n,o,f){var g=Si();return o=f!==void 0?f(o):o,g.memoizedState=g.baseState=o,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:o},g.queue=n,n=n.dispatch=e2.bind(null,Sn,n),[g.memoizedState,n]},useRef:function(n){var o=Si();return n={current:n},o.memoizedState=n},useState:n0,useDebugValue:Fu,useDeferredValue:function(n){return Si().memoizedState=n},useTransition:function(){var n=n0(!1),o=n[0];return n=Jx.bind(null,n[1]),Si().memoizedState=n,[o,n]},useMutableSource:function(){},useSyncExternalStore:function(n,o,f){var g=Sn,A=Si();if(xn){if(f===void 0)throw Error(a(407));f=f()}else{if(f=o(),or===null)throw Error(a(349));Zs&30||qh(g,o,f)}A.memoizedState=f;var T={value:f,getSnapshot:o};return A.queue=T,i0(Jh.bind(null,g,T,n),[n]),g.flags|=2048,Sa(9,Qh.bind(null,g,T,f,o),void 0,null),f},useId:function(){var n=Si(),o=or.identifierPrefix;if(xn){var f=Ui,g=Vi;f=(g&~(1<<32-Zn(g)-1)).toString(32)+f,o=":"+o+"R"+f,f=ba++,0<f&&(o+="H"+f.toString(32)),o+=":"}else f=Qx++,o=":"+o+"r"+f.toString(32)+":";return n.memoizedState=o},unstable_isNewReconciler:!1},r2={readContext:Qr,useCallback:c0,useContext:Qr,useEffect:Bu,useImperativeHandle:l0,useInsertionEffect:s0,useLayoutEffect:o0,useMemo:u0,useReducer:Lu,useRef:r0,useState:function(){return Lu(Ea)},useDebugValue:Fu,useDeferredValue:function(n){var o=Jr();return d0(o,Qn.memoizedState,n)},useTransition:function(){var n=Lu(Ea)[0],o=Jr().memoizedState;return[n,o]},useMutableSource:Zh,useSyncExternalStore:Kh,useId:f0,unstable_isNewReconciler:!1},i2={readContext:Qr,useCallback:c0,useContext:Qr,useEffect:Bu,useImperativeHandle:l0,useInsertionEffect:s0,useLayoutEffect:o0,useMemo:u0,useReducer:ju,useRef:r0,useState:function(){return ju(Ea)},useDebugValue:Fu,useDeferredValue:function(n){var o=Jr();return Qn===null?o.memoizedState=n:d0(o,Qn.memoizedState,n)},useTransition:function(){var n=ju(Ea)[0],o=Jr().memoizedState;return[n,o]},useMutableSource:Zh,useSyncExternalStore:Kh,useId:f0,unstable_isNewReconciler:!1};function fi(n,o){if(n&&n.defaultProps){o=we({},o),n=n.defaultProps;for(var f in n)o[f]===void 0&&(o[f]=n[f]);return o}return o}function Vu(n,o,f,g){o=n.memoizedState,f=f(g,o),f=f==null?o:we({},o,f),n.memoizedState=f,n.lanes===0&&(n.updateQueue.baseState=f)}var Ul={isMounted:function(n){return(n=n._reactInternals)?xr(n)===n:!1},enqueueSetState:function(n,o,f){n=n._reactInternals;var g=_r(),A=ws(n),T=Wi(g,A);T.payload=o,f!=null&&(T.callback=f),o=ps(n,T,A),o!==null&&(pi(o,n,A,g),Ml(o,n,A))},enqueueReplaceState:function(n,o,f){n=n._reactInternals;var g=_r(),A=ws(n),T=Wi(g,A);T.tag=1,T.payload=o,f!=null&&(T.callback=f),o=ps(n,T,A),o!==null&&(pi(o,n,A,g),Ml(o,n,A))},enqueueForceUpdate:function(n,o){n=n._reactInternals;var f=_r(),g=ws(n),A=Wi(f,g);A.tag=2,o!=null&&(A.callback=o),o=ps(n,A,g),o!==null&&(pi(o,n,g,f),Ml(o,n,g))}};function g0(n,o,f,g,A,T,O){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(g,T,O):o.prototype&&o.prototype.isPureReactComponent?!he(f,g)||!he(A,T):!0}function x0(n,o,f){var g=!1,A=fs,T=o.contextType;return typeof T=="object"&&T!==null?T=Qr(T):(A=Dr(o)?Hs:vr.current,g=o.contextTypes,T=(g=g!=null)?No(n,A):fs),o=new o(f,T),n.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Ul,n.stateNode=o,o._reactInternals=n,g&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=A,n.__reactInternalMemoizedMaskedChildContext=T),o}function y0(n,o,f,g){n=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(f,g),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(f,g),o.state!==n&&Ul.enqueueReplaceState(o,o.state,null)}function Uu(n,o,f,g){var A=n.stateNode;A.props=f,A.state=n.memoizedState,A.refs={},Iu(n);var T=o.contextType;typeof T=="object"&&T!==null?A.context=Qr(T):(T=Dr(o)?Hs:vr.current,A.context=No(n,T)),A.state=n.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(Vu(n,o,T,f),A.state=n.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(o=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),o!==A.state&&Ul.enqueueReplaceState(A,A.state,null),Ol(n,f,A,g),A.state=n.memoizedState),typeof A.componentDidMount=="function"&&(n.flags|=4194308)}function Oo(n,o){try{var f="",g=o;do f+=be(g),g=g.return;while(g);var A=f}catch(T){A=`
Error generating stack: `+T.message+`
`+T.stack}return{value:n,source:o,stack:A,digest:null}}function zu(n,o,f){return{value:n,source:null,stack:f??null,digest:o??null}}function Wu(n,o){try{console.error(o.value)}catch(f){setTimeout(function(){throw f})}}var s2=typeof WeakMap=="function"?WeakMap:Map;function w0(n,o,f){f=Wi(-1,f),f.tag=3,f.payload={element:null};var g=o.value;return f.callback=function(){$l||($l=!0,id=g),Wu(n,o)},f}function v0(n,o,f){f=Wi(-1,f),f.tag=3;var g=n.type.getDerivedStateFromError;if(typeof g=="function"){var A=o.value;f.payload=function(){return g(A)},f.callback=function(){Wu(n,o)}}var T=n.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(f.callback=function(){Wu(n,o),typeof g!="function"&&(xs===null?xs=new Set([this]):xs.add(this));var O=o.stack;this.componentDidCatch(o.value,{componentStack:O!==null?O:""})}),f}function C0(n,o,f){var g=n.pingCache;if(g===null){g=n.pingCache=new s2;var A=new Set;g.set(o,A)}else A=g.get(o),A===void 0&&(A=new Set,g.set(o,A));A.has(f)||(A.add(f),n=w2.bind(null,n,o,f),o.then(n,n))}function b0(n){do{var o;if((o=n.tag===13)&&(o=n.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return n;n=n.return}while(n!==null);return null}function E0(n,o,f,g,A){return n.mode&1?(n.flags|=65536,n.lanes=A,n):(n===o?n.flags|=65536:(n.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(o=Wi(-1,1),o.tag=2,ps(f,o,1))),f.lanes|=1),n)}var o2=$.ReactCurrentOwner,Lr=!1;function Tr(n,o,f,g){o.child=n===null?Wh(o,null,f,g):Ro(o,n.child,f,g)}function S0(n,o,f,g,A){f=f.render;var T=o.ref;return Po(o,A),g=Ou(n,o,f,g,T,A),f=Du(),n!==null&&!Lr?(o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~A,Hi(n,o,A)):(xn&&f&&xu(o),o.flags|=1,Tr(n,o,g,A),o.child)}function A0(n,o,f,g,A){if(n===null){var T=f.type;return typeof T=="function"&&!dd(T)&&T.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(o.tag=15,o.type=T,N0(n,o,T,g,A)):(n=ec(f.type,null,g,o,o.mode,A),n.ref=o.ref,n.return=o,o.child=n)}if(T=n.child,!(n.lanes&A)){var O=T.memoizedProps;if(f=f.compare,f=f!==null?f:he,f(O,g)&&n.ref===o.ref)return Hi(n,o,A)}return o.flags|=1,n=Cs(T,g),n.ref=o.ref,n.return=o,o.child=n}function N0(n,o,f,g,A){if(n!==null){var T=n.memoizedProps;if(he(T,g)&&n.ref===o.ref)if(Lr=!1,o.pendingProps=g=T,(n.lanes&A)!==0)n.flags&131072&&(Lr=!0);else return o.lanes=n.lanes,Hi(n,o,A)}return Hu(n,o,f,g,A)}function I0(n,o,f){var g=o.pendingProps,A=g.children,T=n!==null?n.memoizedState:null;if(g.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},cn(Lo,Xr),Xr|=f;else{if(!(f&1073741824))return n=T!==null?T.baseLanes|f:f,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:n,cachePool:null,transitions:null},o.updateQueue=null,cn(Lo,Xr),Xr|=n,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=T!==null?T.baseLanes:f,cn(Lo,Xr),Xr|=g}else T!==null?(g=T.baseLanes|f,o.memoizedState=null):g=f,cn(Lo,Xr),Xr|=g;return Tr(n,o,A,f),o.child}function T0(n,o){var f=o.ref;(n===null&&f!==null||n!==null&&n.ref!==f)&&(o.flags|=512,o.flags|=2097152)}function Hu(n,o,f,g,A){var T=Dr(f)?Hs:vr.current;return T=No(o,T),Po(o,A),f=Ou(n,o,f,g,T,A),g=Du(),n!==null&&!Lr?(o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~A,Hi(n,o,A)):(xn&&g&&xu(o),o.flags|=1,Tr(n,o,f,A),o.child)}function _0(n,o,f,g,A){if(Dr(f)){var T=!0;Al(o)}else T=!1;if(Po(o,A),o.stateNode===null)Wl(n,o),x0(o,f,g),Uu(o,f,g,A),g=!0;else if(n===null){var O=o.stateNode,H=o.memoizedProps;O.props=H;var J=O.context,pe=f.contextType;typeof pe=="object"&&pe!==null?pe=Qr(pe):(pe=Dr(f)?Hs:vr.current,pe=No(o,pe));var Oe=f.getDerivedStateFromProps,Be=typeof Oe=="function"||typeof O.getSnapshotBeforeUpdate=="function";Be||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(H!==g||J!==pe)&&y0(o,O,g,pe),ms=!1;var ke=o.memoizedState;O.state=ke,Ol(o,g,O,A),J=o.memoizedState,H!==g||ke!==J||Or.current||ms?(typeof Oe=="function"&&(Vu(o,f,Oe,g),J=o.memoizedState),(H=ms||g0(o,f,H,g,ke,J,pe))?(Be||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(o.flags|=4194308)):(typeof O.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=g,o.memoizedState=J),O.props=g,O.state=J,O.context=pe,g=H):(typeof O.componentDidMount=="function"&&(o.flags|=4194308),g=!1)}else{O=o.stateNode,Gh(n,o),H=o.memoizedProps,pe=o.type===o.elementType?H:fi(o.type,H),O.props=pe,Be=o.pendingProps,ke=O.context,J=f.contextType,typeof J=="object"&&J!==null?J=Qr(J):(J=Dr(f)?Hs:vr.current,J=No(o,J));var it=f.getDerivedStateFromProps;(Oe=typeof it=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(H!==Be||ke!==J)&&y0(o,O,g,J),ms=!1,ke=o.memoizedState,O.state=ke,Ol(o,g,O,A);var ot=o.memoizedState;H!==Be||ke!==ot||Or.current||ms?(typeof it=="function"&&(Vu(o,f,it,g),ot=o.memoizedState),(pe=ms||g0(o,f,pe,g,ke,ot,J)||!1)?(Oe||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(g,ot,J),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(g,ot,J)),typeof O.componentDidUpdate=="function"&&(o.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof O.componentDidUpdate!="function"||H===n.memoizedProps&&ke===n.memoizedState||(o.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||H===n.memoizedProps&&ke===n.memoizedState||(o.flags|=1024),o.memoizedProps=g,o.memoizedState=ot),O.props=g,O.state=ot,O.context=J,g=pe):(typeof O.componentDidUpdate!="function"||H===n.memoizedProps&&ke===n.memoizedState||(o.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||H===n.memoizedProps&&ke===n.memoizedState||(o.flags|=1024),g=!1)}return Gu(n,o,f,g,T,A)}function Gu(n,o,f,g,A,T){T0(n,o);var O=(o.flags&128)!==0;if(!g&&!O)return A&&Oh(o,f,!1),Hi(n,o,T);g=o.stateNode,o2.current=o;var H=O&&typeof f.getDerivedStateFromError!="function"?null:g.render();return o.flags|=1,n!==null&&O?(o.child=Ro(o,n.child,null,T),o.child=Ro(o,null,H,T)):Tr(n,o,H,T),o.memoizedState=g.state,A&&Oh(o,f,!0),o.child}function R0(n){var o=n.stateNode;o.pendingContext?Ph(n,o.pendingContext,o.pendingContext!==o.context):o.context&&Ph(n,o.context,!1),Tu(n,o.containerInfo)}function k0(n,o,f,g,A){return _o(),Cu(A),o.flags|=256,Tr(n,o,f,g),o.child}var Xu={dehydrated:null,treeContext:null,retryLane:0};function Yu(n){return{baseLanes:n,cachePool:null,transitions:null}}function P0(n,o,f){var g=o.pendingProps,A=En.current,T=!1,O=(o.flags&128)!==0,H;if((H=O)||(H=n!==null&&n.memoizedState===null?!1:(A&2)!==0),H?(T=!0,o.flags&=-129):(n===null||n.memoizedState!==null)&&(A|=1),cn(En,A&1),n===null)return vu(o),n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(o.mode&1?n.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(O=g.children,n=g.fallback,T?(g=o.mode,T=o.child,O={mode:"hidden",children:O},!(g&1)&&T!==null?(T.childLanes=0,T.pendingProps=O):T=tc(O,g,0,null),n=eo(n,g,f,null),T.return=o,n.return=o,T.sibling=n,o.child=T,o.child.memoizedState=Yu(f),o.memoizedState=Xu,n):$u(o,O));if(A=n.memoizedState,A!==null&&(H=A.dehydrated,H!==null))return a2(n,o,O,g,H,A,f);if(T){T=g.fallback,O=o.mode,A=n.child,H=A.sibling;var J={mode:"hidden",children:g.children};return!(O&1)&&o.child!==A?(g=o.child,g.childLanes=0,g.pendingProps=J,o.deletions=null):(g=Cs(A,J),g.subtreeFlags=A.subtreeFlags&14680064),H!==null?T=Cs(H,T):(T=eo(T,O,f,null),T.flags|=2),T.return=o,g.return=o,g.sibling=T,o.child=g,g=T,T=o.child,O=n.child.memoizedState,O=O===null?Yu(f):{baseLanes:O.baseLanes|f,cachePool:null,transitions:O.transitions},T.memoizedState=O,T.childLanes=n.childLanes&~f,o.memoizedState=Xu,g}return T=n.child,n=T.sibling,g=Cs(T,{mode:"visible",children:g.children}),!(o.mode&1)&&(g.lanes=f),g.return=o,g.sibling=null,n!==null&&(f=o.deletions,f===null?(o.deletions=[n],o.flags|=16):f.push(n)),o.child=g,o.memoizedState=null,g}function $u(n,o){return o=tc({mode:"visible",children:o},n.mode,0,null),o.return=n,n.child=o}function zl(n,o,f,g){return g!==null&&Cu(g),Ro(o,n.child,null,f),n=$u(o,o.pendingProps.children),n.flags|=2,o.memoizedState=null,n}function a2(n,o,f,g,A,T,O){if(f)return o.flags&256?(o.flags&=-257,g=zu(Error(a(422))),zl(n,o,O,g)):o.memoizedState!==null?(o.child=n.child,o.flags|=128,null):(T=g.fallback,A=o.mode,g=tc({mode:"visible",children:g.children},A,0,null),T=eo(T,A,O,null),T.flags|=2,g.return=o,T.return=o,g.sibling=T,o.child=g,o.mode&1&&Ro(o,n.child,null,O),o.child.memoizedState=Yu(O),o.memoizedState=Xu,T);if(!(o.mode&1))return zl(n,o,O,null);if(A.data==="$!"){if(g=A.nextSibling&&A.nextSibling.dataset,g)var H=g.dgst;return g=H,T=Error(a(419)),g=zu(T,g,void 0),zl(n,o,O,g)}if(H=(O&n.childLanes)!==0,Lr||H){if(g=or,g!==null){switch(O&-O){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}A=A&(g.suspendedLanes|O)?0:A,A!==0&&A!==T.retryLane&&(T.retryLane=A,zi(n,A),pi(g,n,A,-1))}return ud(),g=zu(Error(a(421))),zl(n,o,O,g)}return A.data==="$?"?(o.flags|=128,o.child=n.child,o=v2.bind(null,n),A._reactRetry=o,null):(n=T.treeContext,Gr=us(A.nextSibling),Hr=o,xn=!0,di=null,n!==null&&(Kr[qr++]=Vi,Kr[qr++]=Ui,Kr[qr++]=Gs,Vi=n.id,Ui=n.overflow,Gs=o),o=$u(o,g.children),o.flags|=4096,o)}function M0(n,o,f){n.lanes|=o;var g=n.alternate;g!==null&&(g.lanes|=o),Au(n.return,o,f)}function Zu(n,o,f,g,A){var T=n.memoizedState;T===null?n.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:A}:(T.isBackwards=o,T.rendering=null,T.renderingStartTime=0,T.last=g,T.tail=f,T.tailMode=A)}function O0(n,o,f){var g=o.pendingProps,A=g.revealOrder,T=g.tail;if(Tr(n,o,g.children,f),g=En.current,g&2)g=g&1|2,o.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=o.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&M0(n,f,o);else if(n.tag===19)M0(n,f,o);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===o)break e;for(;n.sibling===null;){if(n.return===null||n.return===o)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}g&=1}if(cn(En,g),!(o.mode&1))o.memoizedState=null;else switch(A){case"forwards":for(f=o.child,A=null;f!==null;)n=f.alternate,n!==null&&Dl(n)===null&&(A=f),f=f.sibling;f=A,f===null?(A=o.child,o.child=null):(A=f.sibling,f.sibling=null),Zu(o,!1,A,f,T);break;case"backwards":for(f=null,A=o.child,o.child=null;A!==null;){if(n=A.alternate,n!==null&&Dl(n)===null){o.child=A;break}n=A.sibling,A.sibling=f,f=A,A=n}Zu(o,!0,f,null,T);break;case"together":Zu(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Wl(n,o){!(o.mode&1)&&n!==null&&(n.alternate=null,o.alternate=null,o.flags|=2)}function Hi(n,o,f){if(n!==null&&(o.dependencies=n.dependencies),Ks|=o.lanes,!(f&o.childLanes))return null;if(n!==null&&o.child!==n.child)throw Error(a(153));if(o.child!==null){for(n=o.child,f=Cs(n,n.pendingProps),o.child=f,f.return=o;n.sibling!==null;)n=n.sibling,f=f.sibling=Cs(n,n.pendingProps),f.return=o;f.sibling=null}return o.child}function l2(n,o,f){switch(o.tag){case 3:R0(o),_o();break;case 5:$h(o);break;case 1:Dr(o.type)&&Al(o);break;case 4:Tu(o,o.stateNode.containerInfo);break;case 10:var g=o.type._context,A=o.memoizedProps.value;cn(kl,g._currentValue),g._currentValue=A;break;case 13:if(g=o.memoizedState,g!==null)return g.dehydrated!==null?(cn(En,En.current&1),o.flags|=128,null):f&o.child.childLanes?P0(n,o,f):(cn(En,En.current&1),n=Hi(n,o,f),n!==null?n.sibling:null);cn(En,En.current&1);break;case 19:if(g=(f&o.childLanes)!==0,n.flags&128){if(g)return O0(n,o,f);o.flags|=128}if(A=o.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),cn(En,En.current),g)break;return null;case 22:case 23:return o.lanes=0,I0(n,o,f)}return Hi(n,o,f)}var D0,Ku,L0,j0;D0=function(n,o){for(var f=o.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===o)break;for(;f.sibling===null;){if(f.return===null||f.return===o)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},Ku=function(){},L0=function(n,o,f,g){var A=n.memoizedProps;if(A!==g){n=o.stateNode,$s(Ei.current);var T=null;switch(f){case"input":A=Re(n,A),g=Re(n,g),T=[];break;case"select":A=we({},A,{value:void 0}),g=we({},g,{value:void 0}),T=[];break;case"textarea":A=vt(n,A),g=vt(n,g),T=[];break;default:typeof A.onClick!="function"&&typeof g.onClick=="function"&&(n.onclick=bl)}nt(f,g);var O;f=null;for(pe in A)if(!g.hasOwnProperty(pe)&&A.hasOwnProperty(pe)&&A[pe]!=null)if(pe==="style"){var H=A[pe];for(O in H)H.hasOwnProperty(O)&&(f||(f={}),f[O]="")}else pe!=="dangerouslySetInnerHTML"&&pe!=="children"&&pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&pe!=="autoFocus"&&(m.hasOwnProperty(pe)?T||(T=[]):(T=T||[]).push(pe,null));for(pe in g){var J=g[pe];if(H=A!=null?A[pe]:void 0,g.hasOwnProperty(pe)&&J!==H&&(J!=null||H!=null))if(pe==="style")if(H){for(O in H)!H.hasOwnProperty(O)||J&&J.hasOwnProperty(O)||(f||(f={}),f[O]="");for(O in J)J.hasOwnProperty(O)&&H[O]!==J[O]&&(f||(f={}),f[O]=J[O])}else f||(T||(T=[]),T.push(pe,f)),f=J;else pe==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,H=H?H.__html:void 0,J!=null&&H!==J&&(T=T||[]).push(pe,J)):pe==="children"?typeof J!="string"&&typeof J!="number"||(T=T||[]).push(pe,""+J):pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&(m.hasOwnProperty(pe)?(J!=null&&pe==="onScroll"&&mn("scroll",n),T||H===J||(T=[])):(T=T||[]).push(pe,J))}f&&(T=T||[]).push("style",f);var pe=T;(o.updateQueue=pe)&&(o.flags|=4)}},j0=function(n,o,f,g){f!==g&&(o.flags|=4)};function Aa(n,o){if(!xn)switch(n.tailMode){case"hidden":o=n.tail;for(var f=null;o!==null;)o.alternate!==null&&(f=o),o=o.sibling;f===null?n.tail=null:f.sibling=null;break;case"collapsed":f=n.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?o||n.tail===null?n.tail=null:n.tail.sibling=null:g.sibling=null}}function br(n){var o=n.alternate!==null&&n.alternate.child===n.child,f=0,g=0;if(o)for(var A=n.child;A!==null;)f|=A.lanes|A.childLanes,g|=A.subtreeFlags&14680064,g|=A.flags&14680064,A.return=n,A=A.sibling;else for(A=n.child;A!==null;)f|=A.lanes|A.childLanes,g|=A.subtreeFlags,g|=A.flags,A.return=n,A=A.sibling;return n.subtreeFlags|=g,n.childLanes=f,o}function c2(n,o,f){var g=o.pendingProps;switch(yu(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return br(o),null;case 1:return Dr(o.type)&&Sl(),br(o),null;case 3:return g=o.stateNode,Mo(),pn(Or),pn(vr),ku(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(n===null||n.child===null)&&(_l(o)?o.flags|=4:n===null||n.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,di!==null&&(ad(di),di=null))),Ku(n,o),br(o),null;case 5:_u(o);var A=$s(va.current);if(f=o.type,n!==null&&o.stateNode!=null)L0(n,o,f,g,A),n.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!g){if(o.stateNode===null)throw Error(a(166));return br(o),null}if(n=$s(Ei.current),_l(o)){g=o.stateNode,f=o.type;var T=o.memoizedProps;switch(g[bi]=o,g[pa]=T,n=(o.mode&1)!==0,f){case"dialog":mn("cancel",g),mn("close",g);break;case"iframe":case"object":case"embed":mn("load",g);break;case"video":case"audio":for(A=0;A<fa.length;A++)mn(fa[A],g);break;case"source":mn("error",g);break;case"img":case"image":case"link":mn("error",g),mn("load",g);break;case"details":mn("toggle",g);break;case"input":Ze(g,T),mn("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!T.multiple},mn("invalid",g);break;case"textarea":Lt(g,T),mn("invalid",g)}nt(f,T),A=null;for(var O in T)if(T.hasOwnProperty(O)){var H=T[O];O==="children"?typeof H=="string"?g.textContent!==H&&(T.suppressHydrationWarning!==!0&&Cl(g.textContent,H,n),A=["children",H]):typeof H=="number"&&g.textContent!==""+H&&(T.suppressHydrationWarning!==!0&&Cl(g.textContent,H,n),A=["children",""+H]):m.hasOwnProperty(O)&&H!=null&&O==="onScroll"&&mn("scroll",g)}switch(f){case"input":xe(g),_e(g,T,!0);break;case"textarea":xe(g),Pt(g);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(g.onclick=bl)}g=A,o.updateQueue=g,g!==null&&(o.flags|=4)}else{O=A.nodeType===9?A:A.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=St(f)),n==="http://www.w3.org/1999/xhtml"?f==="script"?(n=O.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof g.is=="string"?n=O.createElement(f,{is:g.is}):(n=O.createElement(f),f==="select"&&(O=n,g.multiple?O.multiple=!0:g.size&&(O.size=g.size))):n=O.createElementNS(n,f),n[bi]=o,n[pa]=g,D0(n,o,!1,!1),o.stateNode=n;e:{switch(O=ht(f,g),f){case"dialog":mn("cancel",n),mn("close",n),A=g;break;case"iframe":case"object":case"embed":mn("load",n),A=g;break;case"video":case"audio":for(A=0;A<fa.length;A++)mn(fa[A],n);A=g;break;case"source":mn("error",n),A=g;break;case"img":case"image":case"link":mn("error",n),mn("load",n),A=g;break;case"details":mn("toggle",n),A=g;break;case"input":Ze(n,g),A=Re(n,g),mn("invalid",n);break;case"option":A=g;break;case"select":n._wrapperState={wasMultiple:!!g.multiple},A=we({},g,{value:void 0}),mn("invalid",n);break;case"textarea":Lt(n,g),A=vt(n,g),mn("invalid",n);break;default:A=g}nt(f,A),H=A;for(T in H)if(H.hasOwnProperty(T)){var J=H[T];T==="style"?se(n,J):T==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,J!=null&&Wt(n,J)):T==="children"?typeof J=="string"?(f!=="textarea"||J!=="")&&Qe(n,J):typeof J=="number"&&Qe(n,""+J):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(m.hasOwnProperty(T)?J!=null&&T==="onScroll"&&mn("scroll",n):J!=null&&F(n,T,J,O))}switch(f){case"input":xe(n),_e(n,g,!1);break;case"textarea":xe(n),Pt(n);break;case"option":g.value!=null&&n.setAttribute("value",""+Pe(g.value));break;case"select":n.multiple=!!g.multiple,T=g.value,T!=null?Ie(n,!!g.multiple,T,!1):g.defaultValue!=null&&Ie(n,!!g.multiple,g.defaultValue,!0);break;default:typeof A.onClick=="function"&&(n.onclick=bl)}switch(f){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return br(o),null;case 6:if(n&&o.stateNode!=null)j0(n,o,n.memoizedProps,g);else{if(typeof g!="string"&&o.stateNode===null)throw Error(a(166));if(f=$s(va.current),$s(Ei.current),_l(o)){if(g=o.stateNode,f=o.memoizedProps,g[bi]=o,(T=g.nodeValue!==f)&&(n=Hr,n!==null))switch(n.tag){case 3:Cl(g.nodeValue,f,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Cl(g.nodeValue,f,(n.mode&1)!==0)}T&&(o.flags|=4)}else g=(f.nodeType===9?f:f.ownerDocument).createTextNode(g),g[bi]=o,o.stateNode=g}return br(o),null;case 13:if(pn(En),g=o.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(xn&&Gr!==null&&o.mode&1&&!(o.flags&128))Vh(),_o(),o.flags|=98560,T=!1;else if(T=_l(o),g!==null&&g.dehydrated!==null){if(n===null){if(!T)throw Error(a(318));if(T=o.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(a(317));T[bi]=o}else _o(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;br(o),T=!1}else di!==null&&(ad(di),di=null),T=!0;if(!T)return o.flags&65536?o:null}return o.flags&128?(o.lanes=f,o):(g=g!==null,g!==(n!==null&&n.memoizedState!==null)&&g&&(o.child.flags|=8192,o.mode&1&&(n===null||En.current&1?Jn===0&&(Jn=3):ud())),o.updateQueue!==null&&(o.flags|=4),br(o),null);case 4:return Mo(),Ku(n,o),n===null&&ha(o.stateNode.containerInfo),br(o),null;case 10:return Su(o.type._context),br(o),null;case 17:return Dr(o.type)&&Sl(),br(o),null;case 19:if(pn(En),T=o.memoizedState,T===null)return br(o),null;if(g=(o.flags&128)!==0,O=T.rendering,O===null)if(g)Aa(T,!1);else{if(Jn!==0||n!==null&&n.flags&128)for(n=o.child;n!==null;){if(O=Dl(n),O!==null){for(o.flags|=128,Aa(T,!1),g=O.updateQueue,g!==null&&(o.updateQueue=g,o.flags|=4),o.subtreeFlags=0,g=f,f=o.child;f!==null;)T=f,n=g,T.flags&=14680066,O=T.alternate,O===null?(T.childLanes=0,T.lanes=n,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=O.childLanes,T.lanes=O.lanes,T.child=O.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=O.memoizedProps,T.memoizedState=O.memoizedState,T.updateQueue=O.updateQueue,T.type=O.type,n=O.dependencies,T.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),f=f.sibling;return cn(En,En.current&1|2),o.child}n=n.sibling}T.tail!==null&&Xt()>jo&&(o.flags|=128,g=!0,Aa(T,!1),o.lanes=4194304)}else{if(!g)if(n=Dl(O),n!==null){if(o.flags|=128,g=!0,f=n.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),Aa(T,!0),T.tail===null&&T.tailMode==="hidden"&&!O.alternate&&!xn)return br(o),null}else 2*Xt()-T.renderingStartTime>jo&&f!==1073741824&&(o.flags|=128,g=!0,Aa(T,!1),o.lanes=4194304);T.isBackwards?(O.sibling=o.child,o.child=O):(f=T.last,f!==null?f.sibling=O:o.child=O,T.last=O)}return T.tail!==null?(o=T.tail,T.rendering=o,T.tail=o.sibling,T.renderingStartTime=Xt(),o.sibling=null,f=En.current,cn(En,g?f&1|2:f&1),o):(br(o),null);case 22:case 23:return cd(),g=o.memoizedState!==null,n!==null&&n.memoizedState!==null!==g&&(o.flags|=8192),g&&o.mode&1?Xr&1073741824&&(br(o),o.subtreeFlags&6&&(o.flags|=8192)):br(o),null;case 24:return null;case 25:return null}throw Error(a(156,o.tag))}function u2(n,o){switch(yu(o),o.tag){case 1:return Dr(o.type)&&Sl(),n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 3:return Mo(),pn(Or),pn(vr),ku(),n=o.flags,n&65536&&!(n&128)?(o.flags=n&-65537|128,o):null;case 5:return _u(o),null;case 13:if(pn(En),n=o.memoizedState,n!==null&&n.dehydrated!==null){if(o.alternate===null)throw Error(a(340));_o()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 19:return pn(En),null;case 4:return Mo(),null;case 10:return Su(o.type._context),null;case 22:case 23:return cd(),null;case 24:return null;default:return null}}var Hl=!1,Er=!1,d2=typeof WeakSet=="function"?WeakSet:Set,st=null;function Do(n,o){var f=n.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(g){Tn(n,o,g)}else f.current=null}function qu(n,o,f){try{f()}catch(g){Tn(n,o,g)}}var B0=!1;function f2(n,o){if(cu=vi,n=jt(),Tt(n)){if("selectionStart"in n)var f={start:n.selectionStart,end:n.selectionEnd};else e:{f=(f=n.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var A=g.anchorOffset,T=g.focusNode;g=g.focusOffset;try{f.nodeType,T.nodeType}catch{f=null;break e}var O=0,H=-1,J=-1,pe=0,Oe=0,Be=n,ke=null;t:for(;;){for(var it;Be!==f||A!==0&&Be.nodeType!==3||(H=O+A),Be!==T||g!==0&&Be.nodeType!==3||(J=O+g),Be.nodeType===3&&(O+=Be.nodeValue.length),(it=Be.firstChild)!==null;)ke=Be,Be=it;for(;;){if(Be===n)break t;if(ke===f&&++pe===A&&(H=O),ke===T&&++Oe===g&&(J=O),(it=Be.nextSibling)!==null)break;Be=ke,ke=Be.parentNode}Be=it}f=H===-1||J===-1?null:{start:H,end:J}}else f=null}f=f||{start:0,end:0}}else f=null;for(uu={focusedElem:n,selectionRange:f},vi=!1,st=o;st!==null;)if(o=st,n=o.child,(o.subtreeFlags&1028)!==0&&n!==null)n.return=o,st=n;else for(;st!==null;){o=st;try{var ot=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ot!==null){var ut=ot.memoizedProps,jn=ot.memoizedState,ce=o.stateNode,ne=ce.getSnapshotBeforeUpdate(o.elementType===o.type?ut:fi(o.type,ut),jn);ce.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:var de=o.stateNode.containerInfo;de.nodeType===1?de.textContent="":de.nodeType===9&&de.documentElement&&de.removeChild(de.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(Ye){Tn(o,o.return,Ye)}if(n=o.sibling,n!==null){n.return=o.return,st=n;break}st=o.return}return ot=B0,B0=!1,ot}function Na(n,o,f){var g=o.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var A=g=g.next;do{if((A.tag&n)===n){var T=A.destroy;A.destroy=void 0,T!==void 0&&qu(o,f,T)}A=A.next}while(A!==g)}}function Gl(n,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var f=o=o.next;do{if((f.tag&n)===n){var g=f.create;f.destroy=g()}f=f.next}while(f!==o)}}function Qu(n){var o=n.ref;if(o!==null){var f=n.stateNode;switch(n.tag){case 5:n=f;break;default:n=f}typeof o=="function"?o(n):o.current=n}}function F0(n){var o=n.alternate;o!==null&&(n.alternate=null,F0(o)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(o=n.stateNode,o!==null&&(delete o[bi],delete o[pa],delete o[mu],delete o[$x],delete o[Zx])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function V0(n){return n.tag===5||n.tag===3||n.tag===4}function U0(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||V0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ju(n,o,f){var g=n.tag;if(g===5||g===6)n=n.stateNode,o?f.nodeType===8?f.parentNode.insertBefore(n,o):f.insertBefore(n,o):(f.nodeType===8?(o=f.parentNode,o.insertBefore(n,f)):(o=f,o.appendChild(n)),f=f._reactRootContainer,f!=null||o.onclick!==null||(o.onclick=bl));else if(g!==4&&(n=n.child,n!==null))for(Ju(n,o,f),n=n.sibling;n!==null;)Ju(n,o,f),n=n.sibling}function ed(n,o,f){var g=n.tag;if(g===5||g===6)n=n.stateNode,o?f.insertBefore(n,o):f.appendChild(n);else if(g!==4&&(n=n.child,n!==null))for(ed(n,o,f),n=n.sibling;n!==null;)ed(n,o,f),n=n.sibling}var hr=null,hi=!1;function gs(n,o,f){for(f=f.child;f!==null;)z0(n,o,f),f=f.sibling}function z0(n,o,f){if(Rt&&typeof Rt.onCommitFiberUnmount=="function")try{Rt.onCommitFiberUnmount(Ot,f)}catch{}switch(f.tag){case 5:Er||Do(f,o);case 6:var g=hr,A=hi;hr=null,gs(n,o,f),hr=g,hi=A,hr!==null&&(hi?(n=hr,f=f.stateNode,n.nodeType===8?n.parentNode.removeChild(f):n.removeChild(f)):hr.removeChild(f.stateNode));break;case 18:hr!==null&&(hi?(n=hr,f=f.stateNode,n.nodeType===8?hu(n.parentNode,f):n.nodeType===1&&hu(n,f),On(n)):hu(hr,f.stateNode));break;case 4:g=hr,A=hi,hr=f.stateNode.containerInfo,hi=!0,gs(n,o,f),hr=g,hi=A;break;case 0:case 11:case 14:case 15:if(!Er&&(g=f.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){A=g=g.next;do{var T=A,O=T.destroy;T=T.tag,O!==void 0&&(T&2||T&4)&&qu(f,o,O),A=A.next}while(A!==g)}gs(n,o,f);break;case 1:if(!Er&&(Do(f,o),g=f.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=f.memoizedProps,g.state=f.memoizedState,g.componentWillUnmount()}catch(H){Tn(f,o,H)}gs(n,o,f);break;case 21:gs(n,o,f);break;case 22:f.mode&1?(Er=(g=Er)||f.memoizedState!==null,gs(n,o,f),Er=g):gs(n,o,f);break;default:gs(n,o,f)}}function W0(n){var o=n.updateQueue;if(o!==null){n.updateQueue=null;var f=n.stateNode;f===null&&(f=n.stateNode=new d2),o.forEach(function(g){var A=C2.bind(null,n,g);f.has(g)||(f.add(g),g.then(A,A))})}}function mi(n,o){var f=o.deletions;if(f!==null)for(var g=0;g<f.length;g++){var A=f[g];try{var T=n,O=o,H=O;e:for(;H!==null;){switch(H.tag){case 5:hr=H.stateNode,hi=!1;break e;case 3:hr=H.stateNode.containerInfo,hi=!0;break e;case 4:hr=H.stateNode.containerInfo,hi=!0;break e}H=H.return}if(hr===null)throw Error(a(160));z0(T,O,A),hr=null,hi=!1;var J=A.alternate;J!==null&&(J.return=null),A.return=null}catch(pe){Tn(A,o,pe)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)H0(o,n),o=o.sibling}function H0(n,o){var f=n.alternate,g=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(mi(o,n),Ai(n),g&4){try{Na(3,n,n.return),Gl(3,n)}catch(ut){Tn(n,n.return,ut)}try{Na(5,n,n.return)}catch(ut){Tn(n,n.return,ut)}}break;case 1:mi(o,n),Ai(n),g&512&&f!==null&&Do(f,f.return);break;case 5:if(mi(o,n),Ai(n),g&512&&f!==null&&Do(f,f.return),n.flags&32){var A=n.stateNode;try{Qe(A,"")}catch(ut){Tn(n,n.return,ut)}}if(g&4&&(A=n.stateNode,A!=null)){var T=n.memoizedProps,O=f!==null?f.memoizedProps:T,H=n.type,J=n.updateQueue;if(n.updateQueue=null,J!==null)try{H==="input"&&T.type==="radio"&&T.name!=null&&tt(A,T),ht(H,O);var pe=ht(H,T);for(O=0;O<J.length;O+=2){var Oe=J[O],Be=J[O+1];Oe==="style"?se(A,Be):Oe==="dangerouslySetInnerHTML"?Wt(A,Be):Oe==="children"?Qe(A,Be):F(A,Oe,Be,pe)}switch(H){case"input":ze(A,T);break;case"textarea":Ee(A,T);break;case"select":var ke=A._wrapperState.wasMultiple;A._wrapperState.wasMultiple=!!T.multiple;var it=T.value;it!=null?Ie(A,!!T.multiple,it,!1):ke!==!!T.multiple&&(T.defaultValue!=null?Ie(A,!!T.multiple,T.defaultValue,!0):Ie(A,!!T.multiple,T.multiple?[]:"",!1))}A[pa]=T}catch(ut){Tn(n,n.return,ut)}}break;case 6:if(mi(o,n),Ai(n),g&4){if(n.stateNode===null)throw Error(a(162));A=n.stateNode,T=n.memoizedProps;try{A.nodeValue=T}catch(ut){Tn(n,n.return,ut)}}break;case 3:if(mi(o,n),Ai(n),g&4&&f!==null&&f.memoizedState.isDehydrated)try{On(o.containerInfo)}catch(ut){Tn(n,n.return,ut)}break;case 4:mi(o,n),Ai(n);break;case 13:mi(o,n),Ai(n),A=n.child,A.flags&8192&&(T=A.memoizedState!==null,A.stateNode.isHidden=T,!T||A.alternate!==null&&A.alternate.memoizedState!==null||(rd=Xt())),g&4&&W0(n);break;case 22:if(Oe=f!==null&&f.memoizedState!==null,n.mode&1?(Er=(pe=Er)||Oe,mi(o,n),Er=pe):mi(o,n),Ai(n),g&8192){if(pe=n.memoizedState!==null,(n.stateNode.isHidden=pe)&&!Oe&&n.mode&1)for(st=n,Oe=n.child;Oe!==null;){for(Be=st=Oe;st!==null;){switch(ke=st,it=ke.child,ke.tag){case 0:case 11:case 14:case 15:Na(4,ke,ke.return);break;case 1:Do(ke,ke.return);var ot=ke.stateNode;if(typeof ot.componentWillUnmount=="function"){g=ke,f=ke.return;try{o=g,ot.props=o.memoizedProps,ot.state=o.memoizedState,ot.componentWillUnmount()}catch(ut){Tn(g,f,ut)}}break;case 5:Do(ke,ke.return);break;case 22:if(ke.memoizedState!==null){Y0(Be);continue}}it!==null?(it.return=ke,st=it):Y0(Be)}Oe=Oe.sibling}e:for(Oe=null,Be=n;;){if(Be.tag===5){if(Oe===null){Oe=Be;try{A=Be.stateNode,pe?(T=A.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(H=Be.stateNode,J=Be.memoizedProps.style,O=J!=null&&J.hasOwnProperty("display")?J.display:null,H.style.display=ve("display",O))}catch(ut){Tn(n,n.return,ut)}}}else if(Be.tag===6){if(Oe===null)try{Be.stateNode.nodeValue=pe?"":Be.memoizedProps}catch(ut){Tn(n,n.return,ut)}}else if((Be.tag!==22&&Be.tag!==23||Be.memoizedState===null||Be===n)&&Be.child!==null){Be.child.return=Be,Be=Be.child;continue}if(Be===n)break e;for(;Be.sibling===null;){if(Be.return===null||Be.return===n)break e;Oe===Be&&(Oe=null),Be=Be.return}Oe===Be&&(Oe=null),Be.sibling.return=Be.return,Be=Be.sibling}}break;case 19:mi(o,n),Ai(n),g&4&&W0(n);break;case 21:break;default:mi(o,n),Ai(n)}}function Ai(n){var o=n.flags;if(o&2){try{e:{for(var f=n.return;f!==null;){if(V0(f)){var g=f;break e}f=f.return}throw Error(a(160))}switch(g.tag){case 5:var A=g.stateNode;g.flags&32&&(Qe(A,""),g.flags&=-33);var T=U0(n);ed(n,T,A);break;case 3:case 4:var O=g.stateNode.containerInfo,H=U0(n);Ju(n,H,O);break;default:throw Error(a(161))}}catch(J){Tn(n,n.return,J)}n.flags&=-3}o&4096&&(n.flags&=-4097)}function h2(n,o,f){st=n,G0(n)}function G0(n,o,f){for(var g=(n.mode&1)!==0;st!==null;){var A=st,T=A.child;if(A.tag===22&&g){var O=A.memoizedState!==null||Hl;if(!O){var H=A.alternate,J=H!==null&&H.memoizedState!==null||Er;H=Hl;var pe=Er;if(Hl=O,(Er=J)&&!pe)for(st=A;st!==null;)O=st,J=O.child,O.tag===22&&O.memoizedState!==null?$0(A):J!==null?(J.return=O,st=J):$0(A);for(;T!==null;)st=T,G0(T),T=T.sibling;st=A,Hl=H,Er=pe}X0(n)}else A.subtreeFlags&8772&&T!==null?(T.return=A,st=T):X0(n)}}function X0(n){for(;st!==null;){var o=st;if(o.flags&8772){var f=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:Er||Gl(5,o);break;case 1:var g=o.stateNode;if(o.flags&4&&!Er)if(f===null)g.componentDidMount();else{var A=o.elementType===o.type?f.memoizedProps:fi(o.type,f.memoizedProps);g.componentDidUpdate(A,f.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var T=o.updateQueue;T!==null&&Yh(o,T,g);break;case 3:var O=o.updateQueue;if(O!==null){if(f=null,o.child!==null)switch(o.child.tag){case 5:f=o.child.stateNode;break;case 1:f=o.child.stateNode}Yh(o,O,f)}break;case 5:var H=o.stateNode;if(f===null&&o.flags&4){f=H;var J=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":J.autoFocus&&f.focus();break;case"img":J.src&&(f.src=J.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var pe=o.alternate;if(pe!==null){var Oe=pe.memoizedState;if(Oe!==null){var Be=Oe.dehydrated;Be!==null&&On(Be)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}Er||o.flags&512&&Qu(o)}catch(ke){Tn(o,o.return,ke)}}if(o===n){st=null;break}if(f=o.sibling,f!==null){f.return=o.return,st=f;break}st=o.return}}function Y0(n){for(;st!==null;){var o=st;if(o===n){st=null;break}var f=o.sibling;if(f!==null){f.return=o.return,st=f;break}st=o.return}}function $0(n){for(;st!==null;){var o=st;try{switch(o.tag){case 0:case 11:case 15:var f=o.return;try{Gl(4,o)}catch(J){Tn(o,f,J)}break;case 1:var g=o.stateNode;if(typeof g.componentDidMount=="function"){var A=o.return;try{g.componentDidMount()}catch(J){Tn(o,A,J)}}var T=o.return;try{Qu(o)}catch(J){Tn(o,T,J)}break;case 5:var O=o.return;try{Qu(o)}catch(J){Tn(o,O,J)}}}catch(J){Tn(o,o.return,J)}if(o===n){st=null;break}var H=o.sibling;if(H!==null){H.return=o.return,st=H;break}st=o.return}}var m2=Math.ceil,Xl=$.ReactCurrentDispatcher,td=$.ReactCurrentOwner,ei=$.ReactCurrentBatchConfig,Gt=0,or=null,zn=null,mr=0,Xr=0,Lo=ds(0),Jn=0,Ia=null,Ks=0,Yl=0,nd=0,Ta=null,jr=null,rd=0,jo=1/0,Gi=null,$l=!1,id=null,xs=null,Zl=!1,ys=null,Kl=0,_a=0,sd=null,ql=-1,Ql=0;function _r(){return Gt&6?Xt():ql!==-1?ql:ql=Xt()}function ws(n){return n.mode&1?Gt&2&&mr!==0?mr&-mr:qx.transition!==null?(Ql===0&&(Ql=Mn()),Ql):(n=Nt,n!==0||(n=window.event,n=n===void 0?16:na(n.type)),n):1}function pi(n,o,f,g){if(50<_a)throw _a=0,sd=null,Error(a(185));U(n,f,g),(!(Gt&2)||n!==or)&&(n===or&&(!(Gt&2)&&(Yl|=f),Jn===4&&vs(n,mr)),Br(n,g),f===1&&Gt===0&&!(o.mode&1)&&(jo=Xt()+500,Nl&&hs()))}function Br(n,o){var f=n.callbackNode;wi(n,o);var g=yr(n,n===or?mr:0);if(g===0)f!==null&&$n(f),n.callbackNode=null,n.callbackPriority=0;else if(o=g&-g,n.callbackPriority!==o){if(f!=null&&$n(f),o===1)n.tag===0?Kx(K0.bind(null,n)):Dh(K0.bind(null,n)),Xx(function(){!(Gt&6)&&hs()}),f=null;else{switch(po(g)){case 1:f=Se;break;case 4:f=ho;break;case 16:f=Zt;break;case 536870912:f=mo;break;default:f=Zt}f=i1(f,Z0.bind(null,n))}n.callbackPriority=o,n.callbackNode=f}}function Z0(n,o){if(ql=-1,Ql=0,Gt&6)throw Error(a(327));var f=n.callbackNode;if(Bo()&&n.callbackNode!==f)return null;var g=yr(n,n===or?mr:0);if(g===0)return null;if(g&30||g&n.expiredLanes||o)o=Jl(n,g);else{o=g;var A=Gt;Gt|=2;var T=Q0();(or!==n||mr!==o)&&(Gi=null,jo=Xt()+500,Qs(n,o));do try{x2();break}catch(H){q0(n,H)}while(!0);Eu(),Xl.current=T,Gt=A,zn!==null?o=0:(or=null,mr=0,o=Jn)}if(o!==0){if(o===2&&(A=Ut(n),A!==0&&(g=A,o=od(n,A))),o===1)throw f=Ia,Qs(n,0),vs(n,g),Br(n,Xt()),f;if(o===6)vs(n,g);else{if(A=n.current.alternate,!(g&30)&&!p2(A)&&(o=Jl(n,g),o===2&&(T=Ut(n),T!==0&&(g=T,o=od(n,T))),o===1))throw f=Ia,Qs(n,0),vs(n,g),Br(n,Xt()),f;switch(n.finishedWork=A,n.finishedLanes=g,o){case 0:case 1:throw Error(a(345));case 2:Js(n,jr,Gi);break;case 3:if(vs(n,g),(g&130023424)===g&&(o=rd+500-Xt(),10<o)){if(yr(n,0)!==0)break;if(A=n.suspendedLanes,(A&g)!==g){_r(),n.pingedLanes|=n.suspendedLanes&A;break}n.timeoutHandle=fu(Js.bind(null,n,jr,Gi),o);break}Js(n,jr,Gi);break;case 4:if(vs(n,g),(g&4194240)===g)break;for(o=n.eventTimes,A=-1;0<g;){var O=31-Zn(g);T=1<<O,O=o[O],O>A&&(A=O),g&=~T}if(g=A,g=Xt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*m2(g/1960))-g,10<g){n.timeoutHandle=fu(Js.bind(null,n,jr,Gi),g);break}Js(n,jr,Gi);break;case 5:Js(n,jr,Gi);break;default:throw Error(a(329))}}}return Br(n,Xt()),n.callbackNode===f?Z0.bind(null,n):null}function od(n,o){var f=Ta;return n.current.memoizedState.isDehydrated&&(Qs(n,o).flags|=256),n=Jl(n,o),n!==2&&(o=jr,jr=f,o!==null&&ad(o)),n}function ad(n){jr===null?jr=n:jr.push.apply(jr,n)}function p2(n){for(var o=n;;){if(o.flags&16384){var f=o.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var g=0;g<f.length;g++){var A=f[g],T=A.getSnapshot;A=A.value;try{if(!oe(T(),A))return!1}catch{return!1}}}if(f=o.child,o.subtreeFlags&16384&&f!==null)f.return=o,o=f;else{if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function vs(n,o){for(o&=~nd,o&=~Yl,n.suspendedLanes|=o,n.pingedLanes&=~o,n=n.expirationTimes;0<o;){var f=31-Zn(o),g=1<<f;n[f]=-1,o&=~g}}function K0(n){if(Gt&6)throw Error(a(327));Bo();var o=yr(n,0);if(!(o&1))return Br(n,Xt()),null;var f=Jl(n,o);if(n.tag!==0&&f===2){var g=Ut(n);g!==0&&(o=g,f=od(n,g))}if(f===1)throw f=Ia,Qs(n,0),vs(n,o),Br(n,Xt()),f;if(f===6)throw Error(a(345));return n.finishedWork=n.current.alternate,n.finishedLanes=o,Js(n,jr,Gi),Br(n,Xt()),null}function ld(n,o){var f=Gt;Gt|=1;try{return n(o)}finally{Gt=f,Gt===0&&(jo=Xt()+500,Nl&&hs())}}function qs(n){ys!==null&&ys.tag===0&&!(Gt&6)&&Bo();var o=Gt;Gt|=1;var f=ei.transition,g=Nt;try{if(ei.transition=null,Nt=1,n)return n()}finally{Nt=g,ei.transition=f,Gt=o,!(Gt&6)&&hs()}}function cd(){Xr=Lo.current,pn(Lo)}function Qs(n,o){n.finishedWork=null,n.finishedLanes=0;var f=n.timeoutHandle;if(f!==-1&&(n.timeoutHandle=-1,Gx(f)),zn!==null)for(f=zn.return;f!==null;){var g=f;switch(yu(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Sl();break;case 3:Mo(),pn(Or),pn(vr),ku();break;case 5:_u(g);break;case 4:Mo();break;case 13:pn(En);break;case 19:pn(En);break;case 10:Su(g.type._context);break;case 22:case 23:cd()}f=f.return}if(or=n,zn=n=Cs(n.current,null),mr=Xr=o,Jn=0,Ia=null,nd=Yl=Ks=0,jr=Ta=null,Ys!==null){for(o=0;o<Ys.length;o++)if(f=Ys[o],g=f.interleaved,g!==null){f.interleaved=null;var A=g.next,T=f.pending;if(T!==null){var O=T.next;T.next=A,g.next=O}f.pending=g}Ys=null}return n}function q0(n,o){do{var f=zn;try{if(Eu(),Ll.current=Vl,jl){for(var g=Sn.memoizedState;g!==null;){var A=g.queue;A!==null&&(A.pending=null),g=g.next}jl=!1}if(Zs=0,sr=Qn=Sn=null,Ca=!1,ba=0,td.current=null,f===null||f.return===null){Jn=1,Ia=o,zn=null;break}e:{var T=n,O=f.return,H=f,J=o;if(o=mr,H.flags|=32768,J!==null&&typeof J=="object"&&typeof J.then=="function"){var pe=J,Oe=H,Be=Oe.tag;if(!(Oe.mode&1)&&(Be===0||Be===11||Be===15)){var ke=Oe.alternate;ke?(Oe.updateQueue=ke.updateQueue,Oe.memoizedState=ke.memoizedState,Oe.lanes=ke.lanes):(Oe.updateQueue=null,Oe.memoizedState=null)}var it=b0(O);if(it!==null){it.flags&=-257,E0(it,O,H,T,o),it.mode&1&&C0(T,pe,o),o=it,J=pe;var ot=o.updateQueue;if(ot===null){var ut=new Set;ut.add(J),o.updateQueue=ut}else ot.add(J);break e}else{if(!(o&1)){C0(T,pe,o),ud();break e}J=Error(a(426))}}else if(xn&&H.mode&1){var jn=b0(O);if(jn!==null){!(jn.flags&65536)&&(jn.flags|=256),E0(jn,O,H,T,o),Cu(Oo(J,H));break e}}T=J=Oo(J,H),Jn!==4&&(Jn=2),Ta===null?Ta=[T]:Ta.push(T),T=O;do{switch(T.tag){case 3:T.flags|=65536,o&=-o,T.lanes|=o;var ce=w0(T,J,o);Xh(T,ce);break e;case 1:H=J;var ne=T.type,de=T.stateNode;if(!(T.flags&128)&&(typeof ne.getDerivedStateFromError=="function"||de!==null&&typeof de.componentDidCatch=="function"&&(xs===null||!xs.has(de)))){T.flags|=65536,o&=-o,T.lanes|=o;var Ye=v0(T,H,o);Xh(T,Ye);break e}}T=T.return}while(T!==null)}e1(f)}catch(ft){o=ft,zn===f&&f!==null&&(zn=f=f.return);continue}break}while(!0)}function Q0(){var n=Xl.current;return Xl.current=Vl,n===null?Vl:n}function ud(){(Jn===0||Jn===3||Jn===2)&&(Jn=4),or===null||!(Ks&268435455)&&!(Yl&268435455)||vs(or,mr)}function Jl(n,o){var f=Gt;Gt|=2;var g=Q0();(or!==n||mr!==o)&&(Gi=null,Qs(n,o));do try{g2();break}catch(A){q0(n,A)}while(!0);if(Eu(),Gt=f,Xl.current=g,zn!==null)throw Error(a(261));return or=null,mr=0,Jn}function g2(){for(;zn!==null;)J0(zn)}function x2(){for(;zn!==null&&!rn();)J0(zn)}function J0(n){var o=r1(n.alternate,n,Xr);n.memoizedProps=n.pendingProps,o===null?e1(n):zn=o,td.current=null}function e1(n){var o=n;do{var f=o.alternate;if(n=o.return,o.flags&32768){if(f=u2(f,o),f!==null){f.flags&=32767,zn=f;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Jn=6,zn=null;return}}else if(f=c2(f,o,Xr),f!==null){zn=f;return}if(o=o.sibling,o!==null){zn=o;return}zn=o=n}while(o!==null);Jn===0&&(Jn=5)}function Js(n,o,f){var g=Nt,A=ei.transition;try{ei.transition=null,Nt=1,y2(n,o,f,g)}finally{ei.transition=A,Nt=g}return null}function y2(n,o,f,g){do Bo();while(ys!==null);if(Gt&6)throw Error(a(327));f=n.finishedWork;var A=n.finishedLanes;if(f===null)return null;if(n.finishedWork=null,n.finishedLanes=0,f===n.current)throw Error(a(177));n.callbackNode=null,n.callbackPriority=0;var T=f.lanes|f.childLanes;if(ct(n,T),n===or&&(zn=or=null,mr=0),!(f.subtreeFlags&2064)&&!(f.flags&2064)||Zl||(Zl=!0,i1(Zt,function(){return Bo(),null})),T=(f.flags&15990)!==0,f.subtreeFlags&15990||T){T=ei.transition,ei.transition=null;var O=Nt;Nt=1;var H=Gt;Gt|=4,td.current=null,f2(n,f),H0(f,n),wr(uu),vi=!!cu,uu=cu=null,n.current=f,h2(f),ks(),Gt=H,Nt=O,ei.transition=T}else n.current=f;if(Zl&&(Zl=!1,ys=n,Kl=A),T=n.pendingLanes,T===0&&(xs=null),Mt(f.stateNode),Br(n,Xt()),o!==null)for(g=n.onRecoverableError,f=0;f<o.length;f++)A=o[f],g(A.value,{componentStack:A.stack,digest:A.digest});if($l)throw $l=!1,n=id,id=null,n;return Kl&1&&n.tag!==0&&Bo(),T=n.pendingLanes,T&1?n===sd?_a++:(_a=0,sd=n):_a=0,hs(),null}function Bo(){if(ys!==null){var n=po(Kl),o=ei.transition,f=Nt;try{if(ei.transition=null,Nt=16>n?16:n,ys===null)var g=!1;else{if(n=ys,ys=null,Kl=0,Gt&6)throw Error(a(331));var A=Gt;for(Gt|=4,st=n.current;st!==null;){var T=st,O=T.child;if(st.flags&16){var H=T.deletions;if(H!==null){for(var J=0;J<H.length;J++){var pe=H[J];for(st=pe;st!==null;){var Oe=st;switch(Oe.tag){case 0:case 11:case 15:Na(8,Oe,T)}var Be=Oe.child;if(Be!==null)Be.return=Oe,st=Be;else for(;st!==null;){Oe=st;var ke=Oe.sibling,it=Oe.return;if(F0(Oe),Oe===pe){st=null;break}if(ke!==null){ke.return=it,st=ke;break}st=it}}}var ot=T.alternate;if(ot!==null){var ut=ot.child;if(ut!==null){ot.child=null;do{var jn=ut.sibling;ut.sibling=null,ut=jn}while(ut!==null)}}st=T}}if(T.subtreeFlags&2064&&O!==null)O.return=T,st=O;else e:for(;st!==null;){if(T=st,T.flags&2048)switch(T.tag){case 0:case 11:case 15:Na(9,T,T.return)}var ce=T.sibling;if(ce!==null){ce.return=T.return,st=ce;break e}st=T.return}}var ne=n.current;for(st=ne;st!==null;){O=st;var de=O.child;if(O.subtreeFlags&2064&&de!==null)de.return=O,st=de;else e:for(O=ne;st!==null;){if(H=st,H.flags&2048)try{switch(H.tag){case 0:case 11:case 15:Gl(9,H)}}catch(ft){Tn(H,H.return,ft)}if(H===O){st=null;break e}var Ye=H.sibling;if(Ye!==null){Ye.return=H.return,st=Ye;break e}st=H.return}}if(Gt=A,hs(),Rt&&typeof Rt.onPostCommitFiberRoot=="function")try{Rt.onPostCommitFiberRoot(Ot,n)}catch{}g=!0}return g}finally{Nt=f,ei.transition=o}}return!1}function t1(n,o,f){o=Oo(f,o),o=w0(n,o,1),n=ps(n,o,1),o=_r(),n!==null&&(U(n,1,o),Br(n,o))}function Tn(n,o,f){if(n.tag===3)t1(n,n,f);else for(;o!==null;){if(o.tag===3){t1(o,n,f);break}else if(o.tag===1){var g=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(xs===null||!xs.has(g))){n=Oo(f,n),n=v0(o,n,1),o=ps(o,n,1),n=_r(),o!==null&&(U(o,1,n),Br(o,n));break}}o=o.return}}function w2(n,o,f){var g=n.pingCache;g!==null&&g.delete(o),o=_r(),n.pingedLanes|=n.suspendedLanes&f,or===n&&(mr&f)===f&&(Jn===4||Jn===3&&(mr&130023424)===mr&&500>Xt()-rd?Qs(n,0):nd|=f),Br(n,o)}function n1(n,o){o===0&&(n.mode&1?(o=ai,ai<<=1,!(ai&130023424)&&(ai=4194304)):o=1);var f=_r();n=zi(n,o),n!==null&&(U(n,o,f),Br(n,f))}function v2(n){var o=n.memoizedState,f=0;o!==null&&(f=o.retryLane),n1(n,f)}function C2(n,o){var f=0;switch(n.tag){case 13:var g=n.stateNode,A=n.memoizedState;A!==null&&(f=A.retryLane);break;case 19:g=n.stateNode;break;default:throw Error(a(314))}g!==null&&g.delete(o),n1(n,f)}var r1;r1=function(n,o,f){if(n!==null)if(n.memoizedProps!==o.pendingProps||Or.current)Lr=!0;else{if(!(n.lanes&f)&&!(o.flags&128))return Lr=!1,l2(n,o,f);Lr=!!(n.flags&131072)}else Lr=!1,xn&&o.flags&1048576&&Lh(o,Tl,o.index);switch(o.lanes=0,o.tag){case 2:var g=o.type;Wl(n,o),n=o.pendingProps;var A=No(o,vr.current);Po(o,f),A=Ou(null,o,g,n,A,f);var T=Du();return o.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Dr(g)?(T=!0,Al(o)):T=!1,o.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,Iu(o),A.updater=Ul,o.stateNode=A,A._reactInternals=o,Uu(o,g,n,f),o=Gu(null,o,g,!0,T,f)):(o.tag=0,xn&&T&&xu(o),Tr(null,o,A,f),o=o.child),o;case 16:g=o.elementType;e:{switch(Wl(n,o),n=o.pendingProps,A=g._init,g=A(g._payload),o.type=g,A=o.tag=E2(g),n=fi(g,n),A){case 0:o=Hu(null,o,g,n,f);break e;case 1:o=_0(null,o,g,n,f);break e;case 11:o=S0(null,o,g,n,f);break e;case 14:o=A0(null,o,g,fi(g.type,n),f);break e}throw Error(a(306,g,""))}return o;case 0:return g=o.type,A=o.pendingProps,A=o.elementType===g?A:fi(g,A),Hu(n,o,g,A,f);case 1:return g=o.type,A=o.pendingProps,A=o.elementType===g?A:fi(g,A),_0(n,o,g,A,f);case 3:e:{if(R0(o),n===null)throw Error(a(387));g=o.pendingProps,T=o.memoizedState,A=T.element,Gh(n,o),Ol(o,g,null,f);var O=o.memoizedState;if(g=O.element,T.isDehydrated)if(T={element:g,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},o.updateQueue.baseState=T,o.memoizedState=T,o.flags&256){A=Oo(Error(a(423)),o),o=k0(n,o,g,f,A);break e}else if(g!==A){A=Oo(Error(a(424)),o),o=k0(n,o,g,f,A);break e}else for(Gr=us(o.stateNode.containerInfo.firstChild),Hr=o,xn=!0,di=null,f=Wh(o,null,g,f),o.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(_o(),g===A){o=Hi(n,o,f);break e}Tr(n,o,g,f)}o=o.child}return o;case 5:return $h(o),n===null&&vu(o),g=o.type,A=o.pendingProps,T=n!==null?n.memoizedProps:null,O=A.children,du(g,A)?O=null:T!==null&&du(g,T)&&(o.flags|=32),T0(n,o),Tr(n,o,O,f),o.child;case 6:return n===null&&vu(o),null;case 13:return P0(n,o,f);case 4:return Tu(o,o.stateNode.containerInfo),g=o.pendingProps,n===null?o.child=Ro(o,null,g,f):Tr(n,o,g,f),o.child;case 11:return g=o.type,A=o.pendingProps,A=o.elementType===g?A:fi(g,A),S0(n,o,g,A,f);case 7:return Tr(n,o,o.pendingProps,f),o.child;case 8:return Tr(n,o,o.pendingProps.children,f),o.child;case 12:return Tr(n,o,o.pendingProps.children,f),o.child;case 10:e:{if(g=o.type._context,A=o.pendingProps,T=o.memoizedProps,O=A.value,cn(kl,g._currentValue),g._currentValue=O,T!==null)if(oe(T.value,O)){if(T.children===A.children&&!Or.current){o=Hi(n,o,f);break e}}else for(T=o.child,T!==null&&(T.return=o);T!==null;){var H=T.dependencies;if(H!==null){O=T.child;for(var J=H.firstContext;J!==null;){if(J.context===g){if(T.tag===1){J=Wi(-1,f&-f),J.tag=2;var pe=T.updateQueue;if(pe!==null){pe=pe.shared;var Oe=pe.pending;Oe===null?J.next=J:(J.next=Oe.next,Oe.next=J),pe.pending=J}}T.lanes|=f,J=T.alternate,J!==null&&(J.lanes|=f),Au(T.return,f,o),H.lanes|=f;break}J=J.next}}else if(T.tag===10)O=T.type===o.type?null:T.child;else if(T.tag===18){if(O=T.return,O===null)throw Error(a(341));O.lanes|=f,H=O.alternate,H!==null&&(H.lanes|=f),Au(O,f,o),O=T.sibling}else O=T.child;if(O!==null)O.return=T;else for(O=T;O!==null;){if(O===o){O=null;break}if(T=O.sibling,T!==null){T.return=O.return,O=T;break}O=O.return}T=O}Tr(n,o,A.children,f),o=o.child}return o;case 9:return A=o.type,g=o.pendingProps.children,Po(o,f),A=Qr(A),g=g(A),o.flags|=1,Tr(n,o,g,f),o.child;case 14:return g=o.type,A=fi(g,o.pendingProps),A=fi(g.type,A),A0(n,o,g,A,f);case 15:return N0(n,o,o.type,o.pendingProps,f);case 17:return g=o.type,A=o.pendingProps,A=o.elementType===g?A:fi(g,A),Wl(n,o),o.tag=1,Dr(g)?(n=!0,Al(o)):n=!1,Po(o,f),x0(o,g,A),Uu(o,g,A,f),Gu(null,o,g,!0,n,f);case 19:return O0(n,o,f);case 22:return I0(n,o,f)}throw Error(a(156,o.tag))};function i1(n,o){return Yn(n,o)}function b2(n,o,f,g){this.tag=n,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ti(n,o,f,g){return new b2(n,o,f,g)}function dd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function E2(n){if(typeof n=="function")return dd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Ae)return 11;if(n===G)return 14}return 2}function Cs(n,o){var f=n.alternate;return f===null?(f=ti(n.tag,o,n.key,n.mode),f.elementType=n.elementType,f.type=n.type,f.stateNode=n.stateNode,f.alternate=n,n.alternate=f):(f.pendingProps=o,f.type=n.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=n.flags&14680064,f.childLanes=n.childLanes,f.lanes=n.lanes,f.child=n.child,f.memoizedProps=n.memoizedProps,f.memoizedState=n.memoizedState,f.updateQueue=n.updateQueue,o=n.dependencies,f.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},f.sibling=n.sibling,f.index=n.index,f.ref=n.ref,f}function ec(n,o,f,g,A,T){var O=2;if(g=n,typeof n=="function")dd(n)&&(O=1);else if(typeof n=="string")O=5;else e:switch(n){case X:return eo(f.children,A,T,o);case Q:O=8,A|=8;break;case q:return n=ti(12,f,o,A|2),n.elementType=q,n.lanes=T,n;case De:return n=ti(13,f,o,A),n.elementType=De,n.lanes=T,n;case Ce:return n=ti(19,f,o,A),n.elementType=Ce,n.lanes=T,n;case ye:return tc(f,A,T,o);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ge:O=10;break e;case Ne:O=9;break e;case Ae:O=11;break e;case G:O=14;break e;case je:O=16,g=null;break e}throw Error(a(130,n==null?n:typeof n,""))}return o=ti(O,f,o,A),o.elementType=n,o.type=g,o.lanes=T,o}function eo(n,o,f,g){return n=ti(7,n,g,o),n.lanes=f,n}function tc(n,o,f,g){return n=ti(22,n,g,o),n.elementType=ye,n.lanes=f,n.stateNode={isHidden:!1},n}function fd(n,o,f){return n=ti(6,n,null,o),n.lanes=f,n}function hd(n,o,f){return o=ti(4,n.children!==null?n.children:[],n.key,o),o.lanes=f,o.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},o}function S2(n,o,f,g,A){this.tag=o,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ae(0),this.expirationTimes=ae(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ae(0),this.identifierPrefix=g,this.onRecoverableError=A,this.mutableSourceEagerHydrationData=null}function md(n,o,f,g,A,T,O,H,J){return n=new S2(n,o,f,H,J),o===1?(o=1,T===!0&&(o|=8)):o=0,T=ti(3,null,null,o),n.current=T,T.stateNode=n,T.memoizedState={element:g,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},Iu(T),n}function A2(n,o,f){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:re,key:g==null?null:""+g,children:n,containerInfo:o,implementation:f}}function s1(n){if(!n)return fs;n=n._reactInternals;e:{if(xr(n)!==n||n.tag!==1)throw Error(a(170));var o=n;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Dr(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(a(171))}if(n.tag===1){var f=n.type;if(Dr(f))return Mh(n,f,o)}return o}function o1(n,o,f,g,A,T,O,H,J){return n=md(f,g,!0,n,A,T,O,H,J),n.context=s1(null),f=n.current,g=_r(),A=ws(f),T=Wi(g,A),T.callback=o??null,ps(f,T,A),n.current.lanes=A,U(n,A,g),Br(n,g),n}function nc(n,o,f,g){var A=o.current,T=_r(),O=ws(A);return f=s1(f),o.context===null?o.context=f:o.pendingContext=f,o=Wi(T,O),o.payload={element:n},g=g===void 0?null:g,g!==null&&(o.callback=g),n=ps(A,o,O),n!==null&&(pi(n,A,O,T),Ml(n,A,O)),O}function rc(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function a1(n,o){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var f=n.retryLane;n.retryLane=f!==0&&f<o?f:o}}function pd(n,o){a1(n,o),(n=n.alternate)&&a1(n,o)}function N2(){return null}var l1=typeof reportError=="function"?reportError:function(n){console.error(n)};function gd(n){this._internalRoot=n}ic.prototype.render=gd.prototype.render=function(n){var o=this._internalRoot;if(o===null)throw Error(a(409));nc(n,o,null,null)},ic.prototype.unmount=gd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var o=n.containerInfo;qs(function(){nc(null,n,null,null)}),o[Bi]=null}};function ic(n){this._internalRoot=n}ic.prototype.unstable_scheduleHydration=function(n){if(n){var o=tn();n={blockedOn:null,target:n,priority:o};for(var f=0;f<an.length&&o!==0&&o<an[f].priority;f++);an.splice(f,0,n),f===0&&ta(n)}};function xd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function sc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function c1(){}function I2(n,o,f,g,A){if(A){if(typeof g=="function"){var T=g;g=function(){var pe=rc(O);T.call(pe)}}var O=o1(o,g,n,0,null,!1,!1,"",c1);return n._reactRootContainer=O,n[Bi]=O.current,ha(n.nodeType===8?n.parentNode:n),qs(),O}for(;A=n.lastChild;)n.removeChild(A);if(typeof g=="function"){var H=g;g=function(){var pe=rc(J);H.call(pe)}}var J=md(n,0,!1,null,null,!1,!1,"",c1);return n._reactRootContainer=J,n[Bi]=J.current,ha(n.nodeType===8?n.parentNode:n),qs(function(){nc(o,J,f,g)}),J}function oc(n,o,f,g,A){var T=f._reactRootContainer;if(T){var O=T;if(typeof A=="function"){var H=A;A=function(){var J=rc(O);H.call(J)}}nc(o,O,n,A)}else O=I2(f,o,n,A,g);return rc(O)}Mi=function(n){switch(n.tag){case 3:var o=n.stateNode;if(o.current.memoizedState.isDehydrated){var f=en(o.pendingLanes);f!==0&&(on(o,f|1),Br(o,Xt()),!(Gt&6)&&(jo=Xt()+500,hs()))}break;case 13:qs(function(){var g=zi(n,1);if(g!==null){var A=_r();pi(g,n,1,A)}}),pd(n,1)}},rr=function(n){if(n.tag===13){var o=zi(n,134217728);if(o!==null){var f=_r();pi(o,n,134217728,f)}pd(n,134217728)}},dt=function(n){if(n.tag===13){var o=ws(n),f=zi(n,o);if(f!==null){var g=_r();pi(f,n,o,g)}pd(n,o)}},tn=function(){return Nt},ns=function(n,o){var f=Nt;try{return Nt=n,o()}finally{Nt=f}},fn=function(n,o,f){switch(o){case"input":if(ze(n,f),o=f.name,f.type==="radio"&&o!=null){for(f=n;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<f.length;o++){var g=f[o];if(g!==n&&g.form===n.form){var A=El(g);if(!A)throw Error(a(90));ie(g),ze(g,A)}}}break;case"textarea":Ee(n,f);break;case"select":o=f.value,o!=null&&Ie(n,!!f.multiple,o,!1)}},Qi=ld,yn=qs;var T2={usingClientEntryPoint:!1,Events:[ga,So,El,Yr,Vn,ld]},Ra={findFiberByHostInstance:Ws,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_2={bundleType:Ra.bundleType,version:Ra.version,rendererPackageName:Ra.rendererPackageName,rendererConfig:Ra.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Jo(n),n===null?null:n.stateNode},findFiberByHostInstance:Ra.findFiberByHostInstance||N2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{Ot=ac.inject(_2),Rt=ac}catch{}}return Fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T2,Fr.createPortal=function(n,o){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xd(o))throw Error(a(200));return A2(n,o,null,f)},Fr.createRoot=function(n,o){if(!xd(n))throw Error(a(299));var f=!1,g="",A=l1;return o!=null&&(o.unstable_strictMode===!0&&(f=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onRecoverableError!==void 0&&(A=o.onRecoverableError)),o=md(n,1,!1,null,null,f,!1,g,A),n[Bi]=o.current,ha(n.nodeType===8?n.parentNode:n),new gd(o)},Fr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var o=n._reactInternals;if(o===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=Jo(o),n=n===null?null:n.stateNode,n},Fr.flushSync=function(n){return qs(n)},Fr.hydrate=function(n,o,f){if(!sc(o))throw Error(a(200));return oc(null,n,o,!0,f)},Fr.hydrateRoot=function(n,o,f){if(!xd(n))throw Error(a(405));var g=f!=null&&f.hydratedSources||null,A=!1,T="",O=l1;if(f!=null&&(f.unstable_strictMode===!0&&(A=!0),f.identifierPrefix!==void 0&&(T=f.identifierPrefix),f.onRecoverableError!==void 0&&(O=f.onRecoverableError)),o=o1(o,null,n,1,f??null,A,!1,T,O),n[Bi]=o.current,ha(n),g)for(n=0;n<g.length;n++)f=g[n],A=f._getVersion,A=A(f._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[f,A]:o.mutableSourceEagerHydrationData.push(f,A);return new ic(o)},Fr.render=function(n,o,f){if(!sc(o))throw Error(a(200));return oc(null,n,o,!1,f)},Fr.unmountComponentAtNode=function(n){if(!sc(n))throw Error(a(40));return n._reactRootContainer?(qs(function(){oc(null,null,n,!1,function(){n._reactRootContainer=null,n[Bi]=null})}),!0):!1},Fr.unstable_batchedUpdates=ld,Fr.unstable_renderSubtreeIntoContainer=function(n,o,f,g){if(!sc(f))throw Error(a(200));if(n==null||n._reactInternals===void 0)throw Error(a(38));return oc(n,o,f,!1,g)},Fr.version="18.3.1-next-f1338f8080-20240426",Fr}var x1;function j2(){if(x1)return vd.exports;x1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(i){console.error(i)}}return t(),vd.exports=L2(),vd.exports}var y1;function B2(){if(y1)return cc;y1=1;var t=j2();return cc.createRoot=t.createRoot,cc.hydrateRoot=t.hydrateRoot,cc}var F2=B2();const Hn=N.createContext(null),V2=({children:t})=>{const[i,a]=N.useState(null),[u,m]=N.useState(null),[x,y]=N.useState(null),[b,v]=N.useState(null),[C,S]=N.useState(!1),[I,_]=N.useState(null),[M,L]=N.useState(!1),[B,j]=N.useState(!0),[z,V]=N.useState("Connecting..."),F=N.useRef(null),$=async()=>{j(!0),V("Connecting..."),F.current&&clearTimeout(F.current),F.current=setTimeout(()=>{V("Taking longer than expected. Check your connection.")},1e4);try{try{const q=await fetch(window.server_url+"/auth/session",{method:"GET",credentials:"include"});if(q.ok){const ge=await q.json();if(ge.authenticated){console.log("SESSION AUTH SUCCESS:",ge);const Ne=localStorage.getItem("user");Ne&&Ne!==ge.user.username&&(console.log("Session user differs from cached user, clearing stale credentials"),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user")),ge.access_token&&(console.log("Session includes JWT, storing in localStorage"),localStorage.setItem("access_token",ge.access_token),localStorage.setItem("user",ge.user.username),ge.refresh_token&&localStorage.setItem("refresh_token",ge.refresh_token)),S(!0),a(ge.user.username),m(ge.user.profile||null),_(ge.user.permissions||null),L(ge.user.email_verified===!0);return}}}catch(q){console.log("Session auth check failed (this is ok if using JWT):",q)}const Q=localStorage.getItem("access_token");if(Q)try{const q=await fetch(window.server_url+"/load_user",{headers:{Authorization:`Bearer ${Q}`},credentials:"include"});if(q.ok){S(!0);const ge=await q.json();console.log("JWT AUTH SUCCESS:",ge),a(ge.username),m(ge.profile),_(ge.permissions),L(ge.email_verified===!0),console.log("PERMISSIONS:",ge.permissions)}else console.log("TOKEN INVALID"),localStorage.removeItem("access_token"),a(null),m(null),y(null),v(null),S(!1)}catch(q){console.log("JWT auth error (network issue):",q);const ge=localStorage.getItem("user");Q&&ge&&(console.log("Using optimistic auth with cached user:",ge),a(ge),S(!0))}}finally{F.current&&(clearTimeout(F.current),F.current=null),j(!1)}};N.useEffect(()=>{$()},[]);const Z=Q=>{a(Q.username),y(Q.access_token),v(Q.refresh_token),_(Q.permissions),console.log("PRE SAVE USERNAME:",Q.username),localStorage.setItem("user",Q.username),localStorage.setItem("access_token",Q.access_token),localStorage.setItem("refresh_token",Q.refresh_token)},re=async(Q,q)=>{const ge=await fetch(window.server_url+"/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:Q,password:q})});if(ge.ok){const Ne=await ge.json();console.log("SIGNED UP, userData:",Ne)}},X=async()=>{try{await fetch(window.server_url+"/auth/logout",{method:"POST",credentials:"include"})}catch(Q){console.log("Logout request failed (session may already be cleared):",Q)}localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),a(null),m(null),y(null),v(null),S(!1),_(null),L(!1)};return h.jsx(Hn.Provider,{value:{user:i,login:Z,signup:re,logout:X,userProfile:u,checkAuth:$,permissions:I,emailVerified:M,isAuthLoading:B,authLoadingMessage:z},children:t})};var $d=function(t,i){return $d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var m in u)Object.prototype.hasOwnProperty.call(u,m)&&(a[m]=u[m])},$d(t,i)};function U2(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");$d(t,i);function a(){this.constructor=t}t.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}var pr=function(){return pr=Object.assign||function(i){for(var a,u=1,m=arguments.length;u<m;u++){a=arguments[u];for(var x in a)Object.prototype.hasOwnProperty.call(a,x)&&(i[x]=a[x])}return i},pr.apply(this,arguments)};var Ed,w1;function z2(){if(w1)return Ed;w1=1;var t=!1,i,a,u,m,x,y,b,v,C,S,I,_,M,L,B;function j(){if(!t){t=!0;var V=navigator.userAgent,F=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(V),$=/(Mac OS X)|(Windows)|(Linux)/.exec(V);if(_=/\b(iPhone|iP[ao]d)/.exec(V),M=/\b(iP[ao]d)/.exec(V),S=/Android/i.exec(V),L=/FBAN\/\w+;/i.exec(V),B=/Mobile/i.exec(V),I=!!/Win64/.exec(V),F){i=F[1]?parseFloat(F[1]):F[5]?parseFloat(F[5]):NaN,i&&document&&document.documentMode&&(i=document.documentMode);var Z=/(?:Trident\/(\d+.\d+))/.exec(V);y=Z?parseFloat(Z[1])+4:i,a=F[2]?parseFloat(F[2]):NaN,u=F[3]?parseFloat(F[3]):NaN,m=F[4]?parseFloat(F[4]):NaN,m?(F=/(?:Chrome\/(\d+\.\d+))/.exec(V),x=F&&F[1]?parseFloat(F[1]):NaN):x=NaN}else i=a=u=x=m=NaN;if($){if($[1]){var re=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(V);b=re?parseFloat(re[1].replace("_",".")):!0}else b=!1;v=!!$[2],C=!!$[3]}else b=v=C=!1}}var z={ie:function(){return j()||i},ieCompatibilityMode:function(){return j()||y>i},ie64:function(){return z.ie()&&I},firefox:function(){return j()||a},opera:function(){return j()||u},webkit:function(){return j()||m},safari:function(){return z.webkit()},chrome:function(){return j()||x},windows:function(){return j()||v},osx:function(){return j()||b},linux:function(){return j()||C},iphone:function(){return j()||_},mobile:function(){return j()||_||M||S||B},nativeApp:function(){return j()||L},android:function(){return j()||S},ipad:function(){return j()||M}};return Ed=z,Ed}var Sd,v1;function W2(){if(v1)return Sd;v1=1;var t=!!(typeof window<"u"&&window.document&&window.document.createElement),i={canUseDOM:t,canUseWorkers:typeof Worker<"u",canUseEventListeners:t&&!!(window.addEventListener||window.attachEvent),canUseViewport:t&&!!window.screen,isInWorker:!t};return Sd=i,Sd}var Ad,C1;function H2(){if(C1)return Ad;C1=1;var t=W2(),i;t.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function a(u,m){if(!t.canUseDOM||m&&!("addEventListener"in document))return!1;var x="on"+u,y=x in document;if(!y){var b=document.createElement("div");b.setAttribute(x,"return;"),y=typeof b[x]=="function"}return!y&&i&&u==="wheel"&&(y=document.implementation.hasFeature("Events.wheel","3.0")),y}return Ad=a,Ad}var Nd,b1;function G2(){if(b1)return Nd;b1=1;var t=z2(),i=H2(),a=10,u=40,m=800;function x(y){var b=0,v=0,C=0,S=0;return"detail"in y&&(v=y.detail),"wheelDelta"in y&&(v=-y.wheelDelta/120),"wheelDeltaY"in y&&(v=-y.wheelDeltaY/120),"wheelDeltaX"in y&&(b=-y.wheelDeltaX/120),"axis"in y&&y.axis===y.HORIZONTAL_AXIS&&(b=v,v=0),C=b*a,S=v*a,"deltaY"in y&&(S=y.deltaY),"deltaX"in y&&(C=y.deltaX),(C||S)&&y.deltaMode&&(y.deltaMode==1?(C*=u,S*=u):(C*=m,S*=m)),C&&!b&&(b=C<1?-1:1),S&&!v&&(v=S<1?-1:1),{spinX:b,spinY:v,pixelX:C,pixelY:S}}return x.getEventType=function(){return t.firefox()?"DOMMouseScroll":i("wheel")?"wheel":"mousewheel"},Nd=x,Nd}var Id,E1;function X2(){return E1||(E1=1,Id=G2()),Id}var Y2=X2();const $2=mp(Y2);function Z2(t,i,a,u,m,x){x===void 0&&(x=0);var y=Xo(t,i,x),b=y.width,v=y.height,C=Math.min(b,a),S=Math.min(v,u);return C>S*m?{width:S*m,height:S}:{width:C,height:C/m}}function K2(t){return t.width>t.height?t.width/t.naturalWidth:t.height/t.naturalHeight}function Pa(t,i,a,u,m){m===void 0&&(m=0);var x=Xo(i.width,i.height,m),y=x.width,b=x.height;return{x:S1(t.x,y,a.width,u),y:S1(t.y,b,a.height,u)}}function S1(t,i,a,u){var m=i*u/2-a/2;return Vc(t,-m,m)}function A1(t,i){return Math.sqrt(Math.pow(t.y-i.y,2)+Math.pow(t.x-i.x,2))}function N1(t,i){return Math.atan2(i.y-t.y,i.x-t.x)*180/Math.PI}function q2(t,i,a,u,m,x,y){x===void 0&&(x=0),y===void 0&&(y=!0);var b=y?Q2:J2,v=Xo(i.width,i.height,x),C=Xo(i.naturalWidth,i.naturalHeight,x),S={x:b(100,((v.width-a.width/m)/2-t.x/m)/v.width*100),y:b(100,((v.height-a.height/m)/2-t.y/m)/v.height*100),width:b(100,a.width/v.width*100/m),height:b(100,a.height/v.height*100/m)},I=Math.round(b(C.width,S.width*C.width/100)),_=Math.round(b(C.height,S.height*C.height/100)),M=C.width>=C.height*u,L=M?{width:Math.round(_*u),height:_}:{width:I,height:Math.round(I/u)},B=pr(pr({},L),{x:Math.round(b(C.width-L.width,S.x*C.width/100)),y:Math.round(b(C.height-L.height,S.y*C.height/100))});return{croppedAreaPercentages:S,croppedAreaPixels:B}}function Q2(t,i){return Math.min(t,Math.max(0,i))}function J2(t,i){return i}function ey(t,i,a,u,m,x){var y=Xo(i.width,i.height,a),b=Vc(u.width/y.width*(100/t.width),m,x),v={x:b*y.width/2-u.width/2-y.width*b*(t.x/100),y:b*y.height/2-u.height/2-y.height*b*(t.y/100)};return{crop:v,zoom:b}}function ty(t,i,a){var u=K2(i);return a.height>a.width?a.height/(t.height*u):a.width/(t.width*u)}function ny(t,i,a,u,m,x){a===void 0&&(a=0);var y=Xo(i.naturalWidth,i.naturalHeight,a),b=Vc(ty(t,i,u),m,x),v=u.height>u.width?u.height/t.height:u.width/t.width,C={x:((y.width-t.width)/2-t.x)*v,y:((y.height-t.height)/2-t.y)*v};return{crop:C,zoom:b}}function I1(t,i){return{x:(i.x+t.x)/2,y:(i.y+t.y)/2}}function ry(t){return t*Math.PI/180}function Xo(t,i,a){var u=ry(a);return{width:Math.abs(Math.cos(u)*t)+Math.abs(Math.sin(u)*i),height:Math.abs(Math.sin(u)*t)+Math.abs(Math.cos(u)*i)}}function Vc(t,i,a){return Math.min(Math.max(t,i),a)}function uc(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return t.filter(function(a){return typeof a=="string"&&a.length>0}).join(" ").trim()}var iy=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,sy=1,oy=3,ay=1,Uc=function(t){U2(i,t);function i(){var a=t!==null&&t.apply(this,arguments)||this;return a.imageRef=N.createRef(),a.videoRef=N.createRef(),a.containerPosition={x:0,y:0},a.containerRef=null,a.styleRef=null,a.containerRect=null,a.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},a.dragStartPosition={x:0,y:0},a.dragStartCrop={x:0,y:0},a.gestureZoomStart=0,a.gestureRotationStart=0,a.isTouching=!1,a.lastPinchDistance=0,a.lastPinchRotation=0,a.rafDragTimeout=null,a.rafPinchTimeout=null,a.wheelTimer=null,a.currentDoc=typeof document<"u"?document:null,a.currentWindow=typeof window<"u"?window:null,a.resizeObserver=null,a.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},a.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!a.containerRef)){var u=!0;a.resizeObserver=new window.ResizeObserver(function(m){if(u){u=!1;return}a.computeSizes()}),a.resizeObserver.observe(a.containerRef)}},a.preventZoomSafari=function(u){return u.preventDefault()},a.cleanEvents=function(){a.currentDoc&&(a.currentDoc.removeEventListener("mousemove",a.onMouseMove),a.currentDoc.removeEventListener("mouseup",a.onDragStopped),a.currentDoc.removeEventListener("touchmove",a.onTouchMove),a.currentDoc.removeEventListener("touchend",a.onDragStopped),a.currentDoc.removeEventListener("gesturemove",a.onGestureMove),a.currentDoc.removeEventListener("gestureend",a.onGestureEnd),a.currentDoc.removeEventListener("scroll",a.onScroll))},a.clearScrollEvent=function(){a.containerRef&&a.containerRef.removeEventListener("wheel",a.onWheel),a.wheelTimer&&clearTimeout(a.wheelTimer)},a.onMediaLoad=function(){var u=a.computeSizes();u&&(a.emitCropData(),a.setInitialCrop(u)),a.props.onMediaLoaded&&a.props.onMediaLoaded(a.mediaSize)},a.setInitialCrop=function(u){if(a.props.initialCroppedAreaPercentages){var m=ey(a.props.initialCroppedAreaPercentages,a.mediaSize,a.props.rotation,u,a.props.minZoom,a.props.maxZoom),x=m.crop,y=m.zoom;a.props.onCropChange(x),a.props.onZoomChange&&a.props.onZoomChange(y)}else if(a.props.initialCroppedAreaPixels){var b=ny(a.props.initialCroppedAreaPixels,a.mediaSize,a.props.rotation,u,a.props.minZoom,a.props.maxZoom),x=b.crop,y=b.zoom;a.props.onCropChange(x),a.props.onZoomChange&&a.props.onZoomChange(y)}},a.computeSizes=function(){var u,m,x,y,b,v,C=a.imageRef.current||a.videoRef.current;if(C&&a.containerRef){a.containerRect=a.containerRef.getBoundingClientRect(),a.saveContainerPosition();var S=a.containerRect.width/a.containerRect.height,I=((u=a.imageRef.current)===null||u===void 0?void 0:u.naturalWidth)||((m=a.videoRef.current)===null||m===void 0?void 0:m.videoWidth)||0,_=((x=a.imageRef.current)===null||x===void 0?void 0:x.naturalHeight)||((y=a.videoRef.current)===null||y===void 0?void 0:y.videoHeight)||0,M=C.offsetWidth<I||C.offsetHeight<_,L=I/_,B=void 0;if(M)switch(a.state.mediaObjectFit){default:case"contain":B=S>L?{width:a.containerRect.height*L,height:a.containerRect.height}:{width:a.containerRect.width,height:a.containerRect.width/L};break;case"horizontal-cover":B={width:a.containerRect.width,height:a.containerRect.width/L};break;case"vertical-cover":B={width:a.containerRect.height*L,height:a.containerRect.height};break}else B={width:C.offsetWidth,height:C.offsetHeight};a.mediaSize=pr(pr({},B),{naturalWidth:I,naturalHeight:_}),a.props.setMediaSize&&a.props.setMediaSize(a.mediaSize);var j=a.props.cropSize?a.props.cropSize:Z2(a.mediaSize.width,a.mediaSize.height,a.containerRect.width,a.containerRect.height,a.props.aspect,a.props.rotation);return(((b=a.state.cropSize)===null||b===void 0?void 0:b.height)!==j.height||((v=a.state.cropSize)===null||v===void 0?void 0:v.width)!==j.width)&&a.props.onCropSizeChange&&a.props.onCropSizeChange(j),a.setState({cropSize:j},a.recomputeCropPosition),a.props.setCropSize&&a.props.setCropSize(j),j}},a.saveContainerPosition=function(){if(a.containerRef){var u=a.containerRef.getBoundingClientRect();a.containerPosition={x:u.left,y:u.top}}},a.onMouseDown=function(u){a.currentDoc&&(u.preventDefault(),a.currentDoc.addEventListener("mousemove",a.onMouseMove),a.currentDoc.addEventListener("mouseup",a.onDragStopped),a.saveContainerPosition(),a.onDragStart(i.getMousePoint(u)))},a.onMouseMove=function(u){return a.onDrag(i.getMousePoint(u))},a.onScroll=function(u){a.currentDoc&&(u.preventDefault(),a.saveContainerPosition())},a.onTouchStart=function(u){a.currentDoc&&(a.isTouching=!0,!(a.props.onTouchRequest&&!a.props.onTouchRequest(u))&&(a.currentDoc.addEventListener("touchmove",a.onTouchMove,{passive:!1}),a.currentDoc.addEventListener("touchend",a.onDragStopped),a.saveContainerPosition(),u.touches.length===2?a.onPinchStart(u):u.touches.length===1&&a.onDragStart(i.getTouchPoint(u.touches[0]))))},a.onTouchMove=function(u){u.preventDefault(),u.touches.length===2?a.onPinchMove(u):u.touches.length===1&&a.onDrag(i.getTouchPoint(u.touches[0]))},a.onGestureStart=function(u){a.currentDoc&&(u.preventDefault(),a.currentDoc.addEventListener("gesturechange",a.onGestureMove),a.currentDoc.addEventListener("gestureend",a.onGestureEnd),a.gestureZoomStart=a.props.zoom,a.gestureRotationStart=a.props.rotation)},a.onGestureMove=function(u){if(u.preventDefault(),!a.isTouching){var m=i.getMousePoint(u),x=a.gestureZoomStart-1+u.scale;if(a.setNewZoom(x,m,{shouldUpdatePosition:!0}),a.props.onRotationChange){var y=a.gestureRotationStart+u.rotation;a.props.onRotationChange(y)}}},a.onGestureEnd=function(u){a.cleanEvents()},a.onDragStart=function(u){var m,x,y=u.x,b=u.y;a.dragStartPosition={x:y,y:b},a.dragStartCrop=pr({},a.props.crop),(x=(m=a.props).onInteractionStart)===null||x===void 0||x.call(m)},a.onDrag=function(u){var m=u.x,x=u.y;a.currentWindow&&(a.rafDragTimeout&&a.currentWindow.cancelAnimationFrame(a.rafDragTimeout),a.rafDragTimeout=a.currentWindow.requestAnimationFrame(function(){if(a.state.cropSize&&!(m===void 0||x===void 0)){var y=m-a.dragStartPosition.x,b=x-a.dragStartPosition.y,v={x:a.dragStartCrop.x+y,y:a.dragStartCrop.y+b},C=a.props.restrictPosition?Pa(v,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):v;a.props.onCropChange(C)}}))},a.onDragStopped=function(){var u,m;a.isTouching=!1,a.cleanEvents(),a.emitCropData(),(m=(u=a.props).onInteractionEnd)===null||m===void 0||m.call(u)},a.onWheel=function(u){if(a.currentWindow&&!(a.props.onWheelRequest&&!a.props.onWheelRequest(u))){u.preventDefault();var m=i.getMousePoint(u),x=$2(u).pixelY,y=a.props.zoom-x*a.props.zoomSpeed/200;a.setNewZoom(y,m,{shouldUpdatePosition:!0}),a.state.hasWheelJustStarted||a.setState({hasWheelJustStarted:!0},function(){var b,v;return(v=(b=a.props).onInteractionStart)===null||v===void 0?void 0:v.call(b)}),a.wheelTimer&&clearTimeout(a.wheelTimer),a.wheelTimer=a.currentWindow.setTimeout(function(){return a.setState({hasWheelJustStarted:!1},function(){var b,v;return(v=(b=a.props).onInteractionEnd)===null||v===void 0?void 0:v.call(b)})},250)}},a.getPointOnContainer=function(u,m){var x=u.x,y=u.y;if(!a.containerRect)throw new Error("The Cropper is not mounted");return{x:a.containerRect.width/2-(x-m.x),y:a.containerRect.height/2-(y-m.y)}},a.getPointOnMedia=function(u){var m=u.x,x=u.y,y=a.props,b=y.crop,v=y.zoom;return{x:(m+b.x)/v,y:(x+b.y)/v}},a.setNewZoom=function(u,m,x){var y=x===void 0?{}:x,b=y.shouldUpdatePosition,v=b===void 0?!0:b;if(!(!a.state.cropSize||!a.props.onZoomChange)){var C=Vc(u,a.props.minZoom,a.props.maxZoom);if(v){var S=a.getPointOnContainer(m,a.containerPosition),I=a.getPointOnMedia(S),_={x:I.x*C-S.x,y:I.y*C-S.y},M=a.props.restrictPosition?Pa(_,a.mediaSize,a.state.cropSize,C,a.props.rotation):_;a.props.onCropChange(M)}a.props.onZoomChange(C)}},a.getCropData=function(){if(!a.state.cropSize)return null;var u=a.props.restrictPosition?Pa(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;return q2(u,a.mediaSize,a.state.cropSize,a.getAspect(),a.props.zoom,a.props.rotation,a.props.restrictPosition)},a.emitCropData=function(){var u=a.getCropData();if(u){var m=u.croppedAreaPercentages,x=u.croppedAreaPixels;a.props.onCropComplete&&a.props.onCropComplete(m,x),a.props.onCropAreaChange&&a.props.onCropAreaChange(m,x)}},a.emitCropAreaChange=function(){var u=a.getCropData();if(u){var m=u.croppedAreaPercentages,x=u.croppedAreaPixels;a.props.onCropAreaChange&&a.props.onCropAreaChange(m,x)}},a.recomputeCropPosition=function(){if(a.state.cropSize){var u=a.props.restrictPosition?Pa(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;a.props.onCropChange(u),a.emitCropData()}},a.onKeyDown=function(u){var m=a.props,x=m.crop,y=m.onCropChange,b=m.keyboardStep,v=m.zoom,C=m.rotation,S=b;if(a.state.cropSize){u.shiftKey&&(S*=.2);var I=pr({},x);switch(u.key){case"ArrowUp":I.y-=S,u.preventDefault();break;case"ArrowDown":I.y+=S,u.preventDefault();break;case"ArrowLeft":I.x-=S,u.preventDefault();break;case"ArrowRight":I.x+=S,u.preventDefault();break;default:return}a.props.restrictPosition&&(I=Pa(I,a.mediaSize,a.state.cropSize,v,C)),y(I)}},a}return i.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=iy,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef))},i.prototype.componentWillUnmount=function(){var a,u;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(a=this.resizeObserver)===null||a===void 0||a.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((u=this.styleRef.parentNode)===null||u===void 0||u.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},i.prototype.componentDidUpdate=function(a){var u,m,x,y,b,v,C,S,I;a.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):a.aspect!==this.props.aspect?this.computeSizes():a.objectFit!==this.props.objectFit?this.computeSizes():a.zoom!==this.props.zoom?this.recomputeCropPosition():((u=a.cropSize)===null||u===void 0?void 0:u.height)!==((m=this.props.cropSize)===null||m===void 0?void 0:m.height)||((x=a.cropSize)===null||x===void 0?void 0:x.width)!==((y=this.props.cropSize)===null||y===void 0?void 0:y.width)?this.computeSizes():(((b=a.crop)===null||b===void 0?void 0:b.x)!==((v=this.props.crop)===null||v===void 0?void 0:v.x)||((C=a.crop)===null||C===void 0?void 0:C.y)!==((S=this.props.crop)===null||S===void 0?void 0:S.y))&&this.emitCropAreaChange(),a.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),a.video!==this.props.video&&((I=this.videoRef.current)===null||I===void 0||I.load());var _=this.getObjectFit();_!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:_},this.computeSizes)},i.prototype.getAspect=function(){var a=this.props,u=a.cropSize,m=a.aspect;return u?u.width/u.height:m},i.prototype.getObjectFit=function(){var a,u,m,x;if(this.props.objectFit==="cover"){var y=this.imageRef.current||this.videoRef.current;if(y&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var b=this.containerRect.width/this.containerRect.height,v=((a=this.imageRef.current)===null||a===void 0?void 0:a.naturalWidth)||((u=this.videoRef.current)===null||u===void 0?void 0:u.videoWidth)||0,C=((m=this.imageRef.current)===null||m===void 0?void 0:m.naturalHeight)||((x=this.videoRef.current)===null||x===void 0?void 0:x.videoHeight)||0,S=v/C;return S<b?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},i.prototype.onPinchStart=function(a){var u=i.getTouchPoint(a.touches[0]),m=i.getTouchPoint(a.touches[1]);this.lastPinchDistance=A1(u,m),this.lastPinchRotation=N1(u,m),this.onDragStart(I1(u,m))},i.prototype.onPinchMove=function(a){var u=this;if(!(!this.currentDoc||!this.currentWindow)){var m=i.getTouchPoint(a.touches[0]),x=i.getTouchPoint(a.touches[1]),y=I1(m,x);this.onDrag(y),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var b=A1(m,x),v=u.props.zoom*(b/u.lastPinchDistance);u.setNewZoom(v,y,{shouldUpdatePosition:!1}),u.lastPinchDistance=b;var C=N1(m,x),S=u.props.rotation+(C-u.lastPinchRotation);u.props.onRotationChange&&u.props.onRotationChange(S),u.lastPinchRotation=C})}},i.prototype.render=function(){var a=this,u,m=this.props,x=m.image,y=m.video,b=m.mediaProps,v=m.transform,C=m.crop,S=C.x,I=C.y,_=m.rotation,M=m.zoom,L=m.cropShape,B=m.showGrid,j=m.style,z=j.containerStyle,V=j.cropAreaStyle,F=j.mediaStyle,$=m.classes,Z=$.containerClassName,re=$.cropAreaClassName,X=$.mediaClassName,Q=(u=this.state.mediaObjectFit)!==null&&u!==void 0?u:this.getObjectFit();return N.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(ge){return a.containerRef=ge},"data-testid":"container",style:z,className:uc("reactEasyCrop_Container",Z)},x?N.createElement("img",pr({alt:"",className:uc("reactEasyCrop_Image",Q==="contain"&&"reactEasyCrop_Contain",Q==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",Q==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",X)},b,{src:x,ref:this.imageRef,style:pr(pr({},F),{transform:v||"translate(".concat(S,"px, ").concat(I,"px) rotate(").concat(_,"deg) scale(").concat(M,")")}),onLoad:this.onMediaLoad})):y&&N.createElement("video",pr({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:uc("reactEasyCrop_Video",Q==="contain"&&"reactEasyCrop_Contain",Q==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",Q==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",X)},b,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:pr(pr({},F),{transform:v||"translate(".concat(S,"px, ").concat(I,"px) rotate(").concat(_,"deg) scale(").concat(M,")")}),controls:!1}),(Array.isArray(y)?y:[{src:y}]).map(function(q){return N.createElement("source",pr({key:q.src},q))})),this.state.cropSize&&N.createElement("div",{style:pr(pr({},V),{width:this.state.cropSize.width,height:this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,"data-testid":"cropper",className:uc("reactEasyCrop_CropArea",L==="round"&&"reactEasyCrop_CropAreaRound",B&&"reactEasyCrop_CropAreaGrid",re)}))},i.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:oy,minZoom:sy,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:ay},i.getMousePoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},i.getTouchPoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},i}(N.Component),Ma={},T1;function ly(){return T1||(T1=1,Ma.createCanvas=function(t,i){return Object.assign(document.createElement("canvas"),{width:t,height:i})},Ma.createImageData=function(t,i,a){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(t);case 2:return new ImageData(t,i);default:return new ImageData(t,i,a)}},Ma.loadImage=function(t,i){return new Promise(function(a,u){const m=Object.assign(document.createElement("img"),i);function x(){m.onload=null,m.onerror=null}m.onload=function(){x(),a(m)},m.onerror=function(){x(),u(new Error('Failed to load the image "'+t+'"'))},m.src=t})}),Ma}ly();async function zc(t,i){return console.log("Image source being cropped:",t),new Promise((a,u)=>{const m=new Image;m.onload=()=>{const x=document.createElement("canvas"),y=x.getContext("2d");x.width=i.width,x.height=i.height,y.drawImage(m,i.x,i.y,i.width,i.height,0,0,i.width,i.height);try{const b=x.toDataURL("image/jpeg");a(b)}catch{u(new Error("Error converting canvas to base64"))}},m.onerror=x=>u(new Error(`Image load error: ${x.message}`)),m.src=t})}async function bt(t,i={}){const a=localStorage.getItem("access_token"),u={...i,credentials:"include",headers:{...a&&{Authorization:`Bearer ${a}`},...i.headers}};return fetch(`${window.server_url}${t}`,u)}const cy=({onSubmit:t,onClose:i,existingProfile:a})=>{const{user:u,userProfile:m,checkAuth:x}=N.useContext(Hn),[y,b]=N.useState({name:(m==null?void 0:m.name)||"",image:null,imagePreview:m!=null&&m.image_data?`data:image/jpeg;base64,${m.image_data}`:"/assets/fakeprofile.png",croppedImage:null}),[v,C]=N.useState({x:0,y:0}),[S,I]=N.useState(1),[_,M]=N.useState(null),[L,B]=N.useState(!1),[j,z]=N.useState(!1),V=Z=>{const re=Z.target.files[0];if(re){const X=new FileReader;X.onload=Q=>{b(q=>({...q,image:re,imagePreview:Q.target.result})),B(!0)},X.readAsDataURL(re)}},F=(Z,re)=>{console.log("Cropped Area Pixels:",re),M(re)};async function $(Z){Z.preventDefault();let re;if(y.croppedImage)re=y.croppedImage.split(",")[1];else if(y.image instanceof File){const Q=await y.image.arrayBuffer();re=btoa(new Uint8Array(Q).reduce((q,ge)=>q+String.fromCharCode(ge),""))}else if(m!=null&&m.image_data)re=m.image_data;else{console.error("No valid image provided");return}const X={name:y.name,image_data:re};console.log("Image data (first 100 chars):",re.substring(0,100));try{const Q=await bt("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)});if(!Q.ok)throw new Error("Failed to update profile");const q=await Q.json();await x(),console.log("Profile updated successfully:",q),i()}catch(Q){console.error("Error updating profile:",Q)}}return h.jsx("div",{className:"profile-creation-overlay",style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:h.jsxs("div",{className:"profile-creation-modal",style:{width:"70%",maxWidth:"500px",backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",padding:"2rem",boxShadow:"0 10px 30px rgba(20,77,255,0.15)",position:"relative",border:"1px solid rgba(20,77,255,0.1)"},children:[h.jsx("button",{onClick:i,style:{position:"absolute",top:"1.2rem",right:"1.2rem",background:"none",border:"none",fontSize:"1.8rem",cursor:"pointer",color:"#144dff",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.1)"}},children:""}),h.jsx("h2",{style:{fontSize:"clamp(1.8rem, 6vw, 2.5rem)",color:"#144dff",textAlign:"center",marginBottom:"2rem",fontWeight:"600"},children:"Your Profile"}),h.jsxs("form",{onSubmit:$,style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[h.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem"},children:[h.jsx("label",{style:{color:"#144dff",fontWeight:"500",fontSize:"1rem"},children:"Your Name"}),h.jsx("input",{type:"text",value:y.name,onChange:Z=>b({...y,name:Z.target.value}),style:{width:"100%",padding:"12px",borderRadius:"12px",border:"2px solid #e0e0e0",fontSize:"0.9rem",transition:"all 0.3s ease",backgroundColor:"rgba(255,255,255,0.9)","&:focus":{borderColor:"#144dff",outline:"none",boxShadow:"0 0 0 3px rgba(20,77,255,0.1)"}}})]}),!L&&h.jsx("div",{style:{width:"250px",height:"250px",margin:"0 auto",borderRadius:"20%",overflow:"hidden",border:"7px solid #144dff",boxShadow:"0 8px 25px rgba(20,77,255,0.2)",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.02)"}},children:h.jsx("img",{src:y.croppedImage?y.croppedImage:y.imagePreview?y.imagePreview:m!=null&&m.image_data?`data:image/jpeg;base64,${m.image_data}`:"/assets/fakeprofile.png",alt:"Profile preview",style:{width:"100%",height:"100%",objectFit:"cover"}})}),h.jsxs("div",{style:{textAlign:"center"},children:[h.jsx("input",{type:"file",id:"image-upload",accept:"image/*",onChange:V,style:{display:"none"}}),h.jsx("label",{htmlFor:"image-upload",style:{padding:"0.8rem 1.2rem",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",borderRadius:"25px",cursor:"pointer",display:"inline-block",fontSize:"0.9rem",fontWeight:"600",boxShadow:"0 4px 15px rgba(20,77,255,0.2)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Upload New Image"})]}),L&&h.jsxs("div",{style:{width:"100%",maxWidth:"300px",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",gap:"1.2rem"},children:[h.jsx("div",{style:{position:"relative",width:"250px",height:"250px",borderRadius:"20%",overflow:"hidden",border:"7px solid #144dff",boxShadow:"0 8px 25px rgba(20,77,255,0.2)"},children:h.jsx(Uc,{image:y.imagePreview,crop:v,zoom:S,aspect:1,onCropComplete:F,onCropChange:C,onZoomChange:I})}),h.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[h.jsx("button",{type:"button",onClick:()=>{B(!1),y.croppedImage||b(Z=>({...Z,imagePreview:null}))},style:{padding:"0.8rem 1.2rem",borderRadius:"25px",border:"2px solid #144dff",background:"white",color:"#144dff",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease","&:hover":{background:"rgba(20,77,255,0.1)"}},children:"Cancel"}),h.jsx("button",{type:"button",onClick:async()=>{try{const Z=await zc(y.imagePreview,_);b(re=>({...re,croppedImage:Z,imagePreview:Z})),B(!1),z(!0),setTimeout(()=>z(!1),1e4)}catch(Z){console.error("Error cropping image:",Z)}},className:`save-profile-button ${j?"glow-bounce":""}`,style:{padding:"0.8rem 1.2rem",borderRadius:"25px",border:"none",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(20,77,255,0.2)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Save Cropped Image"})]})]}),h.jsx("button",{type:"submit",className:`save-profile-button ${j?"glow-bounce":""}`,style:{padding:"1rem",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",border:"none",borderRadius:"25px",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",marginTop:"1rem",boxShadow:"0 4px 15px rgba(20,77,255,0.2)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Save Profile"})]})]})})};var Oa={},_1;function uy(){if(_1)return Oa;_1=1,Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.parse=y,Oa.serialize=C;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,i=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,u=/^[\u0020-\u003A\u003D-\u007E]*$/,m=Object.prototype.toString,x=(()=>{const _=function(){};return _.prototype=Object.create(null),_})();function y(_,M){const L=new x,B=_.length;if(B<2)return L;const j=(M==null?void 0:M.decode)||S;let z=0;do{const V=_.indexOf("=",z);if(V===-1)break;const F=_.indexOf(";",z),$=F===-1?B:F;if(V>$){z=_.lastIndexOf(";",V-1)+1;continue}const Z=b(_,z,V),re=v(_,V,Z),X=_.slice(Z,re);if(L[X]===void 0){let Q=b(_,V+1,$),q=v(_,$,Q);const ge=j(_.slice(Q,q));L[X]=ge}z=$+1}while(z<B);return L}function b(_,M,L){do{const B=_.charCodeAt(M);if(B!==32&&B!==9)return M}while(++M<L);return L}function v(_,M,L){for(;M>L;){const B=_.charCodeAt(--M);if(B!==32&&B!==9)return M+1}return L}function C(_,M,L){const B=(L==null?void 0:L.encode)||encodeURIComponent;if(!t.test(_))throw new TypeError(`argument name is invalid: ${_}`);const j=B(M);if(!i.test(j))throw new TypeError(`argument val is invalid: ${M}`);let z=_+"="+j;if(!L)return z;if(L.maxAge!==void 0){if(!Number.isInteger(L.maxAge))throw new TypeError(`option maxAge is invalid: ${L.maxAge}`);z+="; Max-Age="+L.maxAge}if(L.domain){if(!a.test(L.domain))throw new TypeError(`option domain is invalid: ${L.domain}`);z+="; Domain="+L.domain}if(L.path){if(!u.test(L.path))throw new TypeError(`option path is invalid: ${L.path}`);z+="; Path="+L.path}if(L.expires){if(!I(L.expires)||!Number.isFinite(L.expires.valueOf()))throw new TypeError(`option expires is invalid: ${L.expires}`);z+="; Expires="+L.expires.toUTCString()}if(L.httpOnly&&(z+="; HttpOnly"),L.secure&&(z+="; Secure"),L.partitioned&&(z+="; Partitioned"),L.priority)switch(typeof L.priority=="string"?L.priority.toLowerCase():void 0){case"low":z+="; Priority=Low";break;case"medium":z+="; Priority=Medium";break;case"high":z+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${L.priority}`)}if(L.sameSite)switch(typeof L.sameSite=="string"?L.sameSite.toLowerCase():L.sameSite){case!0:case"strict":z+="; SameSite=Strict";break;case"lax":z+="; SameSite=Lax";break;case"none":z+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${L.sameSite}`)}return z}function S(_){if(_.indexOf("%")===-1)return _;try{return decodeURIComponent(_)}catch{return _}}function I(_){return m.call(_)==="[object Date]"}return Oa}uy();/**
 * react-router v7.0.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var R1="popstate";function dy(t={}){function i(u,m){let{pathname:x,search:y,hash:b}=u.location;return Zd("",{pathname:x,search:y,hash:b},m.state&&m.state.usr||null,m.state&&m.state.key||"default")}function a(u,m){return typeof m=="string"?m:Ya(m)}return hy(i,a,null,t)}function Nn(t,i){if(t===!1||t===null||typeof t>"u")throw new Error(i)}function xi(t,i){if(!t){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function fy(){return Math.random().toString(36).substring(2,10)}function k1(t,i){return{usr:t.state,key:t.key,idx:i}}function Zd(t,i,a=null,u){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof i=="string"?$o(i):i,state:a,key:i&&i.key||u||fy()}}function Ya({pathname:t="/",search:i="",hash:a=""}){return i&&i!=="?"&&(t+=i.charAt(0)==="?"?i:"?"+i),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function $o(t){let i={};if(t){let a=t.indexOf("#");a>=0&&(i.hash=t.substring(a),t=t.substring(0,a));let u=t.indexOf("?");u>=0&&(i.search=t.substring(u),t=t.substring(0,u)),t&&(i.pathname=t)}return i}function hy(t,i,a,u={}){let{window:m=document.defaultView,v5Compat:x=!1}=u,y=m.history,b="POP",v=null,C=S();C==null&&(C=0,y.replaceState({...y.state,idx:C},""));function S(){return(y.state||{idx:null}).idx}function I(){b="POP";let j=S(),z=j==null?null:j-C;C=j,v&&v({action:b,location:B.location,delta:z})}function _(j,z){b="PUSH";let V=Zd(B.location,j,z);C=S()+1;let F=k1(V,C),$=B.createHref(V);try{y.pushState(F,"",$)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;m.location.assign($)}x&&v&&v({action:b,location:B.location,delta:1})}function M(j,z){b="REPLACE";let V=Zd(B.location,j,z);C=S();let F=k1(V,C),$=B.createHref(V);y.replaceState(F,"",$),x&&v&&v({action:b,location:B.location,delta:0})}function L(j){let z=m.location.origin!=="null"?m.location.origin:m.location.href,V=typeof j=="string"?j:Ya(j);return V=V.replace(/ $/,"%20"),Nn(z,`No window.location.(origin|href) available to create URL for href: ${V}`),new URL(V,z)}let B={get action(){return b},get location(){return t(m,y)},listen(j){if(v)throw new Error("A history only accepts one active listener");return m.addEventListener(R1,I),v=j,()=>{m.removeEventListener(R1,I),v=null}},createHref(j){return i(m,j)},createURL:L,encodeLocation(j){let z=L(j);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:_,replace:M,go(j){return y.go(j)}};return B}function pp(t,i,a="/"){return my(t,i,a,!1)}function my(t,i,a,u){let m=typeof i=="string"?$o(i):i,x=As(m.pathname||"/",a);if(x==null)return null;let y=gp(t);py(y);let b=null;for(let v=0;b==null&&v<y.length;++v){let C=Ny(x);b=Sy(y[v],C,u)}return b}function gp(t,i=[],a=[],u=""){let m=(x,y,b)=>{let v={relativePath:b===void 0?x.path||"":b,caseSensitive:x.caseSensitive===!0,childrenIndex:y,route:x};v.relativePath.startsWith("/")&&(Nn(v.relativePath.startsWith(u),`Absolute route path "${v.relativePath}" nested under path "${u}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(u.length));let C=Yi([u,v.relativePath]),S=a.concat(v);x.children&&x.children.length>0&&(Nn(x.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${C}".`),gp(x.children,i,S,C)),!(x.path==null&&!x.index)&&i.push({path:C,score:by(C,x.index),routesMeta:S})};return t.forEach((x,y)=>{var b;if(x.path===""||!((b=x.path)!=null&&b.includes("?")))m(x,y);else for(let v of xp(x.path))m(x,y,v)}),i}function xp(t){let i=t.split("/");if(i.length===0)return[];let[a,...u]=i,m=a.endsWith("?"),x=a.replace(/\?$/,"");if(u.length===0)return m?[x,""]:[x];let y=xp(u.join("/")),b=[];return b.push(...y.map(v=>v===""?x:[x,v].join("/"))),m&&b.push(...y),b.map(v=>t.startsWith("/")&&v===""?"/":v)}function py(t){t.sort((i,a)=>i.score!==a.score?a.score-i.score:Ey(i.routesMeta.map(u=>u.childrenIndex),a.routesMeta.map(u=>u.childrenIndex)))}var gy=/^:[\w-]+$/,xy=3,yy=2,wy=1,vy=10,Cy=-2,P1=t=>t==="*";function by(t,i){let a=t.split("/"),u=a.length;return a.some(P1)&&(u+=Cy),i&&(u+=yy),a.filter(m=>!P1(m)).reduce((m,x)=>m+(gy.test(x)?xy:x===""?wy:vy),u)}function Ey(t,i){return t.length===i.length&&t.slice(0,-1).every((u,m)=>u===i[m])?t[t.length-1]-i[i.length-1]:0}function Sy(t,i,a=!1){let{routesMeta:u}=t,m={},x="/",y=[];for(let b=0;b<u.length;++b){let v=u[b],C=b===u.length-1,S=x==="/"?i:i.slice(x.length)||"/",I=Tc({path:v.relativePath,caseSensitive:v.caseSensitive,end:C},S),_=v.route;if(!I&&C&&a&&!u[u.length-1].route.index&&(I=Tc({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},S)),!I)return null;Object.assign(m,I.params),y.push({params:m,pathname:Yi([x,I.pathname]),pathnameBase:Ry(Yi([x,I.pathnameBase])),route:_}),I.pathnameBase!=="/"&&(x=Yi([x,I.pathnameBase]))}return y}function Tc(t,i){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,u]=Ay(t.path,t.caseSensitive,t.end),m=i.match(a);if(!m)return null;let x=m[0],y=x.replace(/(.)\/+$/,"$1"),b=m.slice(1);return{params:u.reduce((C,{paramName:S,isOptional:I},_)=>{if(S==="*"){let L=b[_]||"";y=x.slice(0,x.length-L.length).replace(/(.)\/+$/,"$1")}const M=b[_];return I&&!M?C[S]=void 0:C[S]=(M||"").replace(/%2F/g,"/"),C},{}),pathname:x,pathnameBase:y,pattern:t}}function Ay(t,i=!1,a=!0){xi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let u=[],m="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,b,v)=>(u.push({paramName:b,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(u.push({paramName:"*"}),m+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?m+="\\/*$":t!==""&&t!=="/"&&(m+="(?:(?=\\/|$))"),[new RegExp(m,i?void 0:"i"),u]}function Ny(t){try{return t.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return xi(!1,`The URL path "${t}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${i}).`),t}}function As(t,i){if(i==="/")return t;if(!t.toLowerCase().startsWith(i.toLowerCase()))return null;let a=i.endsWith("/")?i.length-1:i.length,u=t.charAt(a);return u&&u!=="/"?null:t.slice(a)||"/"}function Iy(t,i="/"){let{pathname:a,search:u="",hash:m=""}=typeof t=="string"?$o(t):t;return{pathname:a?a.startsWith("/")?a:Ty(a,i):i,search:ky(u),hash:Py(m)}}function Ty(t,i){let a=i.replace(/\/+$/,"").split("/");return t.split("/").forEach(m=>{m===".."?a.length>1&&a.pop():m!=="."&&a.push(m)}),a.length>1?a.join("/"):"/"}function Td(t,i,a,u){return`Cannot include a '${t}' character in a manually specified \`to.${i}\` field [${JSON.stringify(u)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function _y(t){return t.filter((i,a)=>a===0||i.route.path&&i.route.path.length>0)}function yp(t){let i=_y(t);return i.map((a,u)=>u===i.length-1?a.pathname:a.pathnameBase)}function wp(t,i,a,u=!1){let m;typeof t=="string"?m=$o(t):(m={...t},Nn(!m.pathname||!m.pathname.includes("?"),Td("?","pathname","search",m)),Nn(!m.pathname||!m.pathname.includes("#"),Td("#","pathname","hash",m)),Nn(!m.search||!m.search.includes("#"),Td("#","search","hash",m)));let x=t===""||m.pathname==="",y=x?"/":m.pathname,b;if(y==null)b=a;else{let I=i.length-1;if(!u&&y.startsWith("..")){let _=y.split("/");for(;_[0]==="..";)_.shift(),I-=1;m.pathname=_.join("/")}b=I>=0?i[I]:"/"}let v=Iy(m,b),C=y&&y!=="/"&&y.endsWith("/"),S=(x||y===".")&&a.endsWith("/");return!v.pathname.endsWith("/")&&(C||S)&&(v.pathname+="/"),v}var Yi=t=>t.join("/").replace(/\/\/+/g,"/"),Ry=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ky=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Py=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function My(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var vp=["POST","PUT","PATCH","DELETE"];new Set(vp);var Oy=["GET",...vp];new Set(Oy);var Zo=N.createContext(null);Zo.displayName="DataRouter";var Wc=N.createContext(null);Wc.displayName="DataRouterState";var Cp=N.createContext({isTransitioning:!1});Cp.displayName="ViewTransition";var Dy=N.createContext(new Map);Dy.displayName="Fetchers";var Ly=N.createContext(null);Ly.displayName="Await";var _i=N.createContext(null);_i.displayName="Navigation";var el=N.createContext(null);el.displayName="Location";var Ri=N.createContext({outlet:null,matches:[],isDataRoute:!1});Ri.displayName="Route";var _f=N.createContext(null);_f.displayName="RouteError";function jy(t,{relative:i}={}){Nn(tl(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:u}=N.useContext(_i),{hash:m,pathname:x,search:y}=nl(t,{relative:i}),b=x;return a!=="/"&&(b=x==="/"?a:Yi([a,x])),u.createHref({pathname:b,search:y,hash:m})}function tl(){return N.useContext(el)!=null}function Pr(){return Nn(tl(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(el).location}var bp="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ep(t){N.useContext(_i).static||N.useLayoutEffect(t)}function Fn(){let{isDataRoute:t}=N.useContext(Ri);return t?qy():By()}function By(){Nn(tl(),"useNavigate() may be used only in the context of a <Router> component.");let t=N.useContext(Zo),{basename:i,navigator:a}=N.useContext(_i),{matches:u}=N.useContext(Ri),{pathname:m}=Pr(),x=JSON.stringify(yp(u)),y=N.useRef(!1);return Ep(()=>{y.current=!0}),N.useCallback((v,C={})=>{if(xi(y.current,bp),!y.current)return;if(typeof v=="number"){a.go(v);return}let S=wp(v,JSON.parse(x),m,C.relative==="path");t==null&&i!=="/"&&(S.pathname=S.pathname==="/"?i:Yi([i,S.pathname])),(C.replace?a.replace:a.push)(S,C.state,C)},[i,a,x,m,t])}N.createContext(null);function Fy(){let{matches:t}=N.useContext(Ri),i=t[t.length-1];return i?i.params:{}}function nl(t,{relative:i}={}){let{matches:a}=N.useContext(Ri),{pathname:u}=Pr(),m=JSON.stringify(yp(a));return N.useMemo(()=>wp(t,JSON.parse(m),u,i==="path"),[t,m,u,i])}function Vy(t,i){return Sp(t,i)}function Sp(t,i,a,u){var z;Nn(tl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:m}=N.useContext(_i),{matches:x}=N.useContext(Ri),y=x[x.length-1],b=y?y.params:{},v=y?y.pathname:"/",C=y?y.pathnameBase:"/",S=y&&y.route;{let V=S&&S.path||"";Ap(v,!S||V.endsWith("*")||V.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${v}" (under <Route path="${V}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${V}"> to <Route path="${V==="/"?"*":`${V}/*`}">.`)}let I=Pr(),_;if(i){let V=typeof i=="string"?$o(i):i;Nn(C==="/"||((z=V.pathname)==null?void 0:z.startsWith(C)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${C}" but pathname "${V.pathname}" was given in the \`location\` prop.`),_=V}else _=I;let M=_.pathname||"/",L=M;if(C!=="/"){let V=C.replace(/^\//,"").split("/");L="/"+M.replace(/^\//,"").split("/").slice(V.length).join("/")}let B=pp(t,{pathname:L});xi(S||B!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),xi(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=Gy(B&&B.map(V=>Object.assign({},V,{params:Object.assign({},b,V.params),pathname:Yi([C,m.encodeLocation?m.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?C:Yi([C,m.encodeLocation?m.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),x,a,u);return i&&j?N.createElement(el.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},j):j}function Uy(){let t=Ky(),i=My(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,u="rgba(200,200,200, 0.5)",m={padding:"0.5rem",backgroundColor:u},x={padding:"2px 4px",backgroundColor:u},y=null;return console.error("Error handled by React Router default ErrorBoundary:",t),y=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:x},"ErrorBoundary")," or"," ",N.createElement("code",{style:x},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},i),a?N.createElement("pre",{style:m},a):null,y)}var zy=N.createElement(Uy,null),Wy=class extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,i){return i.location!==t.location||i.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:i.error,location:i.location,revalidation:t.revalidation||i.revalidation}}componentDidCatch(t,i){console.error("React Router caught the following error during render",t,i)}render(){return this.state.error!==void 0?N.createElement(Ri.Provider,{value:this.props.routeContext},N.createElement(_f.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Hy({routeContext:t,match:i,children:a}){let u=N.useContext(Zo);return u&&u.static&&u.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=i.route.id),N.createElement(Ri.Provider,{value:t},a)}function Gy(t,i=[],a=null,u=null){if(t==null){if(!a)return null;if(a.errors)t=a.matches;else if(i.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let m=t,x=a==null?void 0:a.errors;if(x!=null){let v=m.findIndex(C=>C.route.id&&(x==null?void 0:x[C.route.id])!==void 0);Nn(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(x).join(",")}`),m=m.slice(0,Math.min(m.length,v+1))}let y=!1,b=-1;if(a)for(let v=0;v<m.length;v++){let C=m[v];if((C.route.HydrateFallback||C.route.hydrateFallbackElement)&&(b=v),C.route.id){let{loaderData:S,errors:I}=a,_=C.route.loader&&!S.hasOwnProperty(C.route.id)&&(!I||I[C.route.id]===void 0);if(C.route.lazy||_){y=!0,b>=0?m=m.slice(0,b+1):m=[m[0]];break}}}return m.reduceRight((v,C,S)=>{let I,_=!1,M=null,L=null;a&&(I=x&&C.route.id?x[C.route.id]:void 0,M=C.route.errorElement||zy,y&&(b<0&&S===0?(Ap("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,L=null):b===S&&(_=!0,L=C.route.hydrateFallbackElement||null)));let B=i.concat(m.slice(0,S+1)),j=()=>{let z;return I?z=M:_?z=L:C.route.Component?z=N.createElement(C.route.Component,null):C.route.element?z=C.route.element:z=v,N.createElement(Hy,{match:C,routeContext:{outlet:v,matches:B,isDataRoute:a!=null},children:z})};return a&&(C.route.ErrorBoundary||C.route.errorElement||S===0)?N.createElement(Wy,{location:a.location,revalidation:a.revalidation,component:M,error:I,children:j(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):j()},null)}function Rf(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Xy(t){let i=N.useContext(Zo);return Nn(i,Rf(t)),i}function Yy(t){let i=N.useContext(Wc);return Nn(i,Rf(t)),i}function $y(t){let i=N.useContext(Ri);return Nn(i,Rf(t)),i}function kf(t){let i=$y(t),a=i.matches[i.matches.length-1];return Nn(a.route.id,`${t} can only be used on routes that contain a unique "id"`),a.route.id}function Zy(){return kf("useRouteId")}function Ky(){var u;let t=N.useContext(_f),i=Yy("useRouteError"),a=kf("useRouteError");return t!==void 0?t:(u=i.errors)==null?void 0:u[a]}function qy(){let{router:t}=Xy("useNavigate"),i=kf("useNavigate"),a=N.useRef(!1);return Ep(()=>{a.current=!0}),N.useCallback(async(m,x={})=>{xi(a.current,bp),a.current&&(typeof m=="number"?t.navigate(m):await t.navigate(m,{fromRouteId:i,...x}))},[t,i])}var M1={};function Ap(t,i,a){!i&&!M1[t]&&(M1[t]=!0,xi(!1,a))}N.memo(Qy);function Qy({routes:t,future:i,state:a}){return Sp(t,void 0,a,i)}function er(t){Nn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Jy({basename:t="/",children:i=null,location:a,navigationType:u="POP",navigator:m,static:x=!1}){Nn(!tl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let y=t.replace(/^\/*/,"/"),b=N.useMemo(()=>({basename:y,navigator:m,static:x,future:{}}),[y,m,x]);typeof a=="string"&&(a=$o(a));let{pathname:v="/",search:C="",hash:S="",state:I=null,key:_="default"}=a,M=N.useMemo(()=>{let L=As(v,y);return L==null?null:{location:{pathname:L,search:C,hash:S,state:I,key:_},navigationType:u}},[y,v,C,S,I,_,u]);return xi(M!=null,`<Router basename="${y}"> is not able to match the URL "${v}${C}${S}" because it does not start with the basename, so the <Router> won't render anything.`),M==null?null:N.createElement(_i.Provider,{value:b},N.createElement(el.Provider,{children:i,value:M}))}function ew({children:t,location:i}){return Vy(Kd(t),i)}function Kd(t,i=[]){let a=[];return N.Children.forEach(t,(u,m)=>{if(!N.isValidElement(u))return;let x=[...i,m];if(u.type===N.Fragment){a.push.apply(a,Kd(u.props.children,x));return}Nn(u.type===er,`[${typeof u.type=="string"?u.type:u.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Nn(!u.props.index||!u.props.children,"An index route cannot have child routes.");let y={id:u.props.id||x.join("-"),caseSensitive:u.props.caseSensitive,element:u.props.element,Component:u.props.Component,index:u.props.index,path:u.props.path,loader:u.props.loader,action:u.props.action,hydrateFallbackElement:u.props.hydrateFallbackElement,HydrateFallback:u.props.HydrateFallback,errorElement:u.props.errorElement,ErrorBoundary:u.props.ErrorBoundary,hasErrorBoundary:u.props.hasErrorBoundary===!0||u.props.ErrorBoundary!=null||u.props.errorElement!=null,shouldRevalidate:u.props.shouldRevalidate,handle:u.props.handle,lazy:u.props.lazy};u.props.children&&(y.children=Kd(u.props.children,x)),a.push(y)}),a}var vc="get",Cc="application/x-www-form-urlencoded";function Hc(t){return t!=null&&typeof t.tagName=="string"}function tw(t){return Hc(t)&&t.tagName.toLowerCase()==="button"}function nw(t){return Hc(t)&&t.tagName.toLowerCase()==="form"}function rw(t){return Hc(t)&&t.tagName.toLowerCase()==="input"}function iw(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function sw(t,i){return t.button===0&&(!i||i==="_self")&&!iw(t)}function qd(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((i,a)=>{let u=t[a];return i.concat(Array.isArray(u)?u.map(m=>[a,m]):[[a,u]])},[]))}function ow(t,i){let a=qd(t);return i&&i.forEach((u,m)=>{a.has(m)||i.getAll(m).forEach(x=>{a.append(m,x)})}),a}var dc=null;function aw(){if(dc===null)try{new FormData(document.createElement("form"),0),dc=!1}catch{dc=!0}return dc}var lw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function _d(t){return t!=null&&!lw.has(t)?(xi(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Cc}"`),null):t}function cw(t,i){let a,u,m,x,y;if(nw(t)){let b=t.getAttribute("action");u=b?As(b,i):null,a=t.getAttribute("method")||vc,m=_d(t.getAttribute("enctype"))||Cc,x=new FormData(t)}else if(tw(t)||rw(t)&&(t.type==="submit"||t.type==="image")){let b=t.form;if(b==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=t.getAttribute("formaction")||b.getAttribute("action");if(u=v?As(v,i):null,a=t.getAttribute("formmethod")||b.getAttribute("method")||vc,m=_d(t.getAttribute("formenctype"))||_d(b.getAttribute("enctype"))||Cc,x=new FormData(b,t),!aw()){let{name:C,type:S,value:I}=t;if(S==="image"){let _=C?`${C}.`:"";x.append(`${_}x`,"0"),x.append(`${_}y`,"0")}else C&&x.append(C,I)}}else{if(Hc(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=vc,u=null,m=Cc,y=t}return x&&m==="text/plain"&&(y=x,x=void 0),{action:u,method:a.toLowerCase(),encType:m,formData:x,body:y}}function Pf(t,i){if(t===!1||t===null||typeof t>"u")throw new Error(i)}async function uw(t,i){if(t.id in i)return i[t.id];try{let a=await import(t.module);return i[t.id]=a,a}catch(a){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function dw(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function fw(t,i,a){let u=await Promise.all(t.map(async m=>{let x=i.routes[m.route.id];if(x){let y=await uw(x,a);return y.links?y.links():[]}return[]}));return gw(u.flat(1).filter(dw).filter(m=>m.rel==="stylesheet"||m.rel==="preload").map(m=>m.rel==="stylesheet"?{...m,rel:"prefetch",as:"style"}:{...m,rel:"prefetch"}))}function O1(t,i,a,u,m,x){let y=(v,C)=>a[C]?v.route.id!==a[C].route.id:!0,b=(v,C)=>{var S;return a[C].pathname!==v.pathname||((S=a[C].route.path)==null?void 0:S.endsWith("*"))&&a[C].params["*"]!==v.params["*"]};return x==="assets"?i.filter((v,C)=>y(v,C)||b(v,C)):x==="data"?i.filter((v,C)=>{var I;let S=u.routes[v.route.id];if(!S||!S.hasLoader)return!1;if(y(v,C)||b(v,C))return!0;if(v.route.shouldRevalidate){let _=v.route.shouldRevalidate({currentUrl:new URL(m.pathname+m.search+m.hash,window.origin),currentParams:((I=a[0])==null?void 0:I.params)||{},nextUrl:new URL(t,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function hw(t,i){return mw(t.map(a=>{let u=i.routes[a.route.id];if(!u)return[];let m=[u.module];return u.imports&&(m=m.concat(u.imports)),m}).flat(1))}function mw(t){return[...new Set(t)]}function pw(t){let i={},a=Object.keys(t).sort();for(let u of a)i[u]=t[u];return i}function gw(t,i){let a=new Set;return new Set(i),t.reduce((u,m)=>{let x=JSON.stringify(pw(m));return a.has(x)||(a.add(x),u.push({key:x,link:m})),u},[])}function xw(t){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname="_root.data":i.pathname=`${i.pathname.replace(/\/$/,"")}.data`,i}function yw(){let t=N.useContext(Zo);return Pf(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function ww(){let t=N.useContext(Wc);return Pf(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Mf=N.createContext(void 0);Mf.displayName="FrameworkContext";function Np(){let t=N.useContext(Mf);return Pf(t,"You must render this element inside a <HydratedRouter> element"),t}function vw(t,i){let a=N.useContext(Mf),[u,m]=N.useState(!1),[x,y]=N.useState(!1),{onFocus:b,onBlur:v,onMouseEnter:C,onMouseLeave:S,onTouchStart:I}=i,_=N.useRef(null);N.useEffect(()=>{if(t==="render"&&y(!0),t==="viewport"){let B=z=>{z.forEach(V=>{y(V.isIntersecting)})},j=new IntersectionObserver(B,{threshold:.5});return _.current&&j.observe(_.current),()=>{j.disconnect()}}},[t]),N.useEffect(()=>{if(u){let B=setTimeout(()=>{y(!0)},100);return()=>{clearTimeout(B)}}},[u]);let M=()=>{m(!0)},L=()=>{m(!1),y(!1)};return a?t!=="intent"?[x,_,{}]:[x,_,{onFocus:Da(b,M),onBlur:Da(v,L),onMouseEnter:Da(C,M),onMouseLeave:Da(S,L),onTouchStart:Da(I,M)}]:[!1,_,{}]}function Da(t,i){return a=>{t&&t(a),a.defaultPrevented||i(a)}}function Cw({page:t,...i}){let{router:a}=yw(),u=N.useMemo(()=>pp(a.routes,t,a.basename),[a.routes,t,a.basename]);return u?N.createElement(Ew,{page:t,matches:u,...i}):(console.warn(`Tried to prefetch ${t} but no routes matched.`),null)}function bw(t){let{manifest:i,routeModules:a}=Np(),[u,m]=N.useState([]);return N.useEffect(()=>{let x=!1;return fw(t,i,a).then(y=>{x||m(y)}),()=>{x=!0}},[t,i,a]),u}function Ew({page:t,matches:i,...a}){let u=Pr(),{manifest:m,routeModules:x}=Np(),{loaderData:y,matches:b}=ww(),v=N.useMemo(()=>O1(t,i,b,m,u,"data"),[t,i,b,m,u]),C=N.useMemo(()=>O1(t,i,b,m,u,"assets"),[t,i,b,m,u]),S=N.useMemo(()=>{if(t===u.pathname+u.search+u.hash)return[];let M=new Set,L=!1;if(i.forEach(j=>{var V;let z=m.routes[j.route.id];!z||!z.hasLoader||(!v.some(F=>F.route.id===j.route.id)&&j.route.id in y&&((V=x[j.route.id])!=null&&V.shouldRevalidate)||z.hasClientLoader?L=!0:M.add(j.route.id))}),M.size===0)return[];let B=xw(t);return L&&M.size>0&&B.searchParams.set("_routes",i.filter(j=>M.has(j.route.id)).map(j=>j.route.id).join(",")),[B.pathname+B.search]},[y,u,m,v,i,t,x]),I=N.useMemo(()=>hw(C,m),[C,m]),_=bw(C);return N.createElement(N.Fragment,null,S.map(M=>N.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...a})),I.map(M=>N.createElement("link",{key:M,rel:"modulepreload",href:M,...a})),_.map(({key:M,link:L})=>N.createElement("link",{key:M,...L})))}function Sw(...t){return i=>{t.forEach(a=>{typeof a=="function"?a(i):a!=null&&(a.current=i)})}}var Ip=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ip&&(window.__reactRouterVersion="7.0.2")}catch{}function Aw({basename:t,children:i,window:a}){let u=N.useRef();u.current==null&&(u.current=dy({window:a,v5Compat:!0}));let m=u.current,[x,y]=N.useState({action:m.action,location:m.location}),b=N.useCallback(v=>{N.startTransition(()=>y(v))},[y]);return N.useLayoutEffect(()=>m.listen(b),[m,b]),N.createElement(Jy,{basename:t,children:i,location:x.location,navigationType:x.action,navigator:m})}var Tp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_p=N.forwardRef(function({onClick:i,discover:a="render",prefetch:u="none",relative:m,reloadDocument:x,replace:y,state:b,target:v,to:C,preventScrollReset:S,viewTransition:I,..._},M){let{basename:L}=N.useContext(_i),B=typeof C=="string"&&Tp.test(C),j,z=!1;if(typeof C=="string"&&B&&(j=C,Ip))try{let q=new URL(window.location.href),ge=C.startsWith("//")?new URL(q.protocol+C):new URL(C),Ne=As(ge.pathname,L);ge.origin===q.origin&&Ne!=null?C=Ne+ge.search+ge.hash:z=!0}catch{xi(!1,`<Link to="${C}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let V=jy(C,{relative:m}),[F,$,Z]=vw(u,_),re=_w(C,{replace:y,state:b,target:v,preventScrollReset:S,relative:m,viewTransition:I});function X(q){i&&i(q),q.defaultPrevented||re(q)}let Q=N.createElement("a",{..._,...Z,href:j||V,onClick:z||x?i:X,ref:Sw(M,$),target:v,"data-discover":!B&&a==="render"?"true":void 0});return F&&!B?N.createElement(N.Fragment,null,Q,N.createElement(Cw,{page:V})):Q});_p.displayName="Link";var Nw=N.forwardRef(function({"aria-current":i="page",caseSensitive:a=!1,className:u="",end:m=!1,style:x,to:y,viewTransition:b,children:v,...C},S){let I=nl(y,{relative:C.relative}),_=Pr(),M=N.useContext(Wc),{navigator:L,basename:B}=N.useContext(_i),j=M!=null&&Ow(I)&&b===!0,z=L.encodeLocation?L.encodeLocation(I).pathname:I.pathname,V=_.pathname,F=M&&M.navigation&&M.navigation.location?M.navigation.location.pathname:null;a||(V=V.toLowerCase(),F=F?F.toLowerCase():null,z=z.toLowerCase()),F&&B&&(F=As(F,B)||F);const $=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let Z=V===z||!m&&V.startsWith(z)&&V.charAt($)==="/",re=F!=null&&(F===z||!m&&F.startsWith(z)&&F.charAt(z.length)==="/"),X={isActive:Z,isPending:re,isTransitioning:j},Q=Z?i:void 0,q;typeof u=="function"?q=u(X):q=[u,Z?"active":null,re?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let ge=typeof x=="function"?x(X):x;return N.createElement(_p,{...C,"aria-current":Q,className:q,ref:S,style:ge,to:y,viewTransition:b},typeof v=="function"?v(X):v)});Nw.displayName="NavLink";var Iw=N.forwardRef(({discover:t="render",fetcherKey:i,navigate:a,reloadDocument:u,replace:m,state:x,method:y=vc,action:b,onSubmit:v,relative:C,preventScrollReset:S,viewTransition:I,..._},M)=>{let L=Pw(),B=Mw(b,{relative:C}),j=y.toLowerCase()==="get"?"get":"post",z=typeof b=="string"&&Tp.test(b),V=F=>{if(v&&v(F),F.defaultPrevented)return;F.preventDefault();let $=F.nativeEvent.submitter,Z=($==null?void 0:$.getAttribute("formmethod"))||y;L($||F.currentTarget,{fetcherKey:i,method:Z,navigate:a,replace:m,state:x,relative:C,preventScrollReset:S,viewTransition:I})};return N.createElement("form",{ref:M,method:j,action:B,onSubmit:u?v:V,..._,"data-discover":!z&&t==="render"?"true":void 0})});Iw.displayName="Form";function Tw(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Rp(t){let i=N.useContext(Zo);return Nn(i,Tw(t)),i}function _w(t,{target:i,replace:a,state:u,preventScrollReset:m,relative:x,viewTransition:y}={}){let b=Fn(),v=Pr(),C=nl(t,{relative:x});return N.useCallback(S=>{if(sw(S,i)){S.preventDefault();let I=a!==void 0?a:Ya(v)===Ya(C);b(t,{replace:I,state:u,preventScrollReset:m,relative:x,viewTransition:y})}},[v,b,C,a,u,i,t,m,x,y])}function kp(t){xi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let i=N.useRef(qd(t)),a=N.useRef(!1),u=Pr(),m=N.useMemo(()=>ow(u.search,a.current?null:i.current),[u.search]),x=Fn(),y=N.useCallback((b,v)=>{const C=qd(typeof b=="function"?b(m):b);a.current=!0,x("?"+C,v)},[x,m]);return[m,y]}var Rw=0,kw=()=>`__${String(++Rw)}__`;function Pw(){let{router:t}=Rp("useSubmit"),{basename:i}=N.useContext(_i),a=Zy();return N.useCallback(async(u,m={})=>{let{action:x,method:y,encType:b,formData:v,body:C}=cw(u,i);if(m.navigate===!1){let S=m.fetcherKey||kw();await t.fetch(S,a,m.action||x,{preventScrollReset:m.preventScrollReset,formData:v,body:C,formMethod:m.method||y,formEncType:m.encType||b,flushSync:m.flushSync})}else await t.navigate(m.action||x,{preventScrollReset:m.preventScrollReset,formData:v,body:C,formMethod:m.method||y,formEncType:m.encType||b,replace:m.replace,state:m.state,fromRouteId:a,flushSync:m.flushSync,viewTransition:m.viewTransition})},[t,i,a])}function Mw(t,{relative:i}={}){let{basename:a}=N.useContext(_i),u=N.useContext(Ri);Nn(u,"useFormAction must be used inside a RouteContext");let[m]=u.matches.slice(-1),x={...nl(t||".",{relative:i})},y=Pr();if(t==null){x.search=y.search;let b=new URLSearchParams(x.search),v=b.getAll("index");if(v.some(S=>S==="")){b.delete("index"),v.filter(I=>I).forEach(I=>b.append("index",I));let S=b.toString();x.search=S?`?${S}`:""}}return(!t||t===".")&&m.route.index&&(x.search=x.search?x.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(x.pathname=x.pathname==="/"?a:Yi([a,x.pathname])),Ya(x)}function Ow(t,i={}){let a=N.useContext(Cp);Nn(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:u}=Rp("useViewTransitionState"),m=nl(t,{relative:i.relative});if(!a.isTransitioning)return!1;let x=As(a.currentLocation.pathname,u)||a.currentLocation.pathname,y=As(a.nextLocation.pathname,u)||a.nextLocation.pathname;return Tc(m.pathname,y)!=null||Tc(m.pathname,x)!=null}new TextEncoder;function Of(){const t="./assets",i="/sounds/new_elevator_combined.mp3",a="/sounds/ambient_loop.mp3";Fn();const u=N.useRef(new Audio(t+i)),m=N.useRef(new Audio(t+a)),x=N.useRef("idle"),[y,b]=N.useState(!1),[v,C]=N.useState(!1),[S,I]=N.useState(null),[_,M]=N.useState(!1),[L,B]=N.useState(!1);N.useEffect(()=>{const X=u.current,Q=()=>{X.pause(),X.currentTime=0,C(!1),Z()};return X.addEventListener("ended",Q),()=>X.removeEventListener("ended",Q)},[L]);function j(){I(null),x.current="main",m.current&&!m.current.paused&&(m.current.pause(),m.current.currentTime=0),u.current.load(),u.current.play().then(()=>{u.current.pause(),u.current.currentTime=0,b(!0),C(!0),M(!0),$()}).catch(X=>{console.error("Error loading audio:",X),I("Failed to load audio. Please check the file path and format."),M(!1)})}function z(){I(null),x.current="ambient",u.current.load(),u.current.play().then(()=>{u.current.pause(),u.current.currentTime=0,console.log("Main track pre-unlocked for later switchover")}).catch(X=>{console.error("Error pre-loading main audio:",X)}),m.current.loop=!0,m.current.load(),m.current.play().then(()=>{b(!0),C(!0),M(!0)}).catch(X=>{console.error("Error loading ambient audio:",X),I("Failed to load audio. Please check the file path and format."),M(!1)})}function V(X){return m.current&&!m.current.paused&&(m.current.pause(),m.current.currentTime=0),x.current="main",u.current?(u.current.currentTime=X,u.current.paused?u.current.play().then(()=>{C(!0),M(!0)}).catch(Q=>{throw console.error("Switchover to main track failed:",Q),C(!1),M(!1),Q}):Promise.resolve()):(C(!1),M(!1),Promise.reject(new Error("No audio ref available")))}function F(){return x.current==="ambient"&&m.current?!m.current.paused:!!(u.current&&!u.current.paused)}function $(){u.current&&u.current.paused?u.current.play().catch(X=>{console.error("Error playing audio:",X),I("Failed to play audio. Please try again.")}):u.current&&(u.current.currentTime=0)}function Z(){m.current&&(m.current.pause(),m.current.currentTime=0,m.current.src="",m.current=null),u.current&&(u.current.pause(),u.current.currentTime=0,u.current.src="",u.current=null),x.current="idle"}function re(X){u.current&&(u.current.currentTime=X,console.log(u.current.duration))}return{audioRef:u,error:S,playSound:$,loadSound:j,loadAmbientSound:z,switchToMainTrack:V,seekTo:re,cancelSound:Z,checkSound:F,soundEnabled:_,setSoundEnabled:M,isPlaying:v}}var tr;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(tr||(tr={}));tr.QR_CODE,tr.AZTEC,tr.CODABAR,tr.CODE_39,tr.CODE_93,tr.CODE_128,tr.DATA_MATRIX,tr.MAXICODE,tr.ITF,tr.EAN_13,tr.EAN_8,tr.PDF_417,tr.RSS_14,tr.RSS_EXPANDED,tr.UPC_A,tr.UPC_E,tr.UPC_EAN_EXTENSION;var D1;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(D1||(D1={}));var _c;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(_c||(_c={}));var Dw=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[_c.SCAN_TYPE_CAMERA,_c.SCAN_TYPE_FILE],t}(),L1;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(L1||(L1={}));var ja={exports:{}},Lw=ja.exports,j1;function jw(){return j1||(j1=1,function(t,i){(function(a,u){u(i)})(Lw,function(a){function u(k){return k==null}var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,e){k.__proto__=e}||function(k,e){for(var r in e)e.hasOwnProperty(r)&&(k[r]=e[r])};function x(k,e){m(k,e);function r(){this.constructor=k}k.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function y(k,e){var r=Object.setPrototypeOf;r?r(k,e):k.__proto__=e}function b(k,e){e===void 0&&(e=k.constructor);var r=Error.captureStackTrace;r&&r(k,e)}var v=function(k){x(e,k);function e(r){var s=this.constructor,l=k.call(this,r)||this;return Object.defineProperty(l,"name",{value:s.name,enumerable:!1}),y(l,s.prototype),b(l),l}return e}(Error);class C extends v{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}C.kind="Exception";class S extends C{}S.kind="ArgumentException";class I extends C{}I.kind="IllegalArgumentException";class _{constructor(e){if(this.binarizer=e,e===null)throw new I("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,r){return this.binarizer.getBlackRow(e,r)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,r,s,l){const c=this.binarizer.getLuminanceSource().crop(e,r,s,l);return new _(this.binarizer.createBinarizer(c))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new _(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new _(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class M extends C{static getChecksumInstance(){return new M}}M.kind="ChecksumException";class L{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class B{static arraycopy(e,r,s,l,c){for(;c--;)s[l++]=e[r++]}static currentTimeMillis(){return Date.now()}}class j extends C{}j.kind="IndexOutOfBoundsException";class z extends j{constructor(e=void 0,r=void 0){super(r),this.index=e,this.message=r}}z.kind="ArrayIndexOutOfBoundsException";class V{static fill(e,r){for(let s=0,l=e.length;s<l;s++)e[s]=r}static fillWithin(e,r,s,l){V.rangeCheck(e.length,r,s);for(let c=r;c<s;c++)e[c]=l}static rangeCheck(e,r,s){if(r>s)throw new I("fromIndex("+r+") > toIndex("+s+")");if(r<0)throw new z(r);if(s>e)throw new z(s)}static asList(...e){return e}static create(e,r,s){return Array.from({length:e}).map(c=>Array.from({length:r}).fill(s))}static createInt32Array(e,r,s){return Array.from({length:e}).map(c=>Int32Array.from({length:r}).fill(s))}static equals(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(let s=0,l=e.length;s<l;s++)if(e[s]!==r[s])return!1;return!0}static hashCode(e){if(e===null)return 0;let r=1;for(const s of e)r=31*r+s;return r}static fillUint8Array(e,r){for(let s=0;s!==e.length;s++)e[s]=r}static copyOf(e,r){return e.slice(0,r)}static copyOfUint8Array(e,r){if(e.length<=r){const s=new Uint8Array(r);return s.set(e),s}return e.slice(0,r)}static copyOfRange(e,r,s){const l=s-r,c=new Int32Array(l);return B.arraycopy(e,r,c,0,l),c}static binarySearch(e,r,s){s===void 0&&(s=V.numberComparator);let l=0,c=e.length-1;for(;l<=c;){const d=c+l>>1,p=s(r,e[d]);if(p>0)l=d+1;else if(p<0)c=d-1;else return d}return-l-1}static numberComparator(e,r){return e-r}}class F{static numberOfTrailingZeros(e){let r;if(e===0)return 32;let s=31;return r=e<<16,r!==0&&(s-=16,e=r),r=e<<8,r!==0&&(s-=8,e=r),r=e<<4,r!==0&&(s-=4,e=r),r=e<<2,r!==0&&(s-=2,e=r),s-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,r){return Math.trunc(e/r)}static parseInt(e,r=void 0){return parseInt(e,r)}}F.MIN_VALUE_32_BITS=-2147483648,F.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ${constructor(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=$.makeArray(e):this.bits=r)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const r=$.makeArray(e);B.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const r=this.size;if(e>=r)return r;const s=this.bits;let l=Math.floor(e/32),c=s[l];c&=~((1<<(e&31))-1);const d=s.length;for(;c===0;){if(++l===d)return r;c=s[l]}const p=l*32+F.numberOfTrailingZeros(c);return p>r?r:p}getNextUnset(e){const r=this.size;if(e>=r)return r;const s=this.bits;let l=Math.floor(e/32),c=~s[l];c&=~((1<<(e&31))-1);const d=s.length;for(;c===0;){if(++l===d)return r;c=~s[l]}const p=l*32+F.numberOfTrailingZeros(c);return p>r?r:p}setBulk(e,r){this.bits[Math.floor(e/32)]=r}setRange(e,r){if(r<e||e<0||r>this.size)throw new I;if(r===e)return;r--;const s=Math.floor(e/32),l=Math.floor(r/32),c=this.bits;for(let d=s;d<=l;d++){const p=d>s?0:e&31,E=(2<<(d<l?31:r&31))-(1<<p);c[d]|=E}}clear(){const e=this.bits.length,r=this.bits;for(let s=0;s<e;s++)r[s]=0}isRange(e,r,s){if(r<e||e<0||r>this.size)throw new I;if(r===e)return!0;r--;const l=Math.floor(e/32),c=Math.floor(r/32),d=this.bits;for(let p=l;p<=c;p++){const w=p>l?0:e&31,R=(2<<(p<c?31:r&31))-(1<<w)&4294967295;if((d[p]&R)!==(s?R:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,r){if(r<0||r>32)throw new I("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(let s=r;s>0;s--)this.appendBit((e>>s-1&1)===1)}appendBitArray(e){const r=e.size;this.ensureCapacity(this.size+r);for(let s=0;s<r;s++)this.appendBit(e.get(s))}xor(e){if(this.size!==e.size)throw new I("Sizes don't match");const r=this.bits;for(let s=0,l=r.length;s<l;s++)r[s]^=e.bits[s]}toBytes(e,r,s,l){for(let c=0;c<l;c++){let d=0;for(let p=0;p<8;p++)this.get(e)&&(d|=1<<7-p),e++;r[s+c]=d}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),s=r+1,l=this.bits;for(let c=0;c<s;c++){let d=l[c];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,e[r-c]=d}if(this.size!==s*32){const c=s*32-this.size;let d=e[0]>>>c;for(let p=1;p<s;p++){const w=e[p];d|=w<<32-c,e[p-1]=d,d=w>>>c}e[s-1]=d}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof $))return!1;const r=e;return this.size===r.size&&V.equals(this.bits,r.bits)}hashCode(){return 31*this.size+V.hashCode(this.bits)}toString(){let e="";for(let r=0,s=this.size;r<s;r++)r&7||(e+=" "),e+=this.get(r)?"X":".";return e}clone(){return new $(this.size,this.bits.slice())}}var Z;(function(k){k[k.OTHER=0]="OTHER",k[k.PURE_BARCODE=1]="PURE_BARCODE",k[k.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",k[k.TRY_HARDER=3]="TRY_HARDER",k[k.CHARACTER_SET=4]="CHARACTER_SET",k[k.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",k[k.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",k[k.ASSUME_GS1=7]="ASSUME_GS1",k[k.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",k[k.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",k[k.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Z||(Z={}));var re=Z;class X extends C{static getFormatInstance(){return new X}}X.kind="FormatException";var Q;(function(k){k[k.Cp437=0]="Cp437",k[k.ISO8859_1=1]="ISO8859_1",k[k.ISO8859_2=2]="ISO8859_2",k[k.ISO8859_3=3]="ISO8859_3",k[k.ISO8859_4=4]="ISO8859_4",k[k.ISO8859_5=5]="ISO8859_5",k[k.ISO8859_6=6]="ISO8859_6",k[k.ISO8859_7=7]="ISO8859_7",k[k.ISO8859_8=8]="ISO8859_8",k[k.ISO8859_9=9]="ISO8859_9",k[k.ISO8859_10=10]="ISO8859_10",k[k.ISO8859_11=11]="ISO8859_11",k[k.ISO8859_13=12]="ISO8859_13",k[k.ISO8859_14=13]="ISO8859_14",k[k.ISO8859_15=14]="ISO8859_15",k[k.ISO8859_16=15]="ISO8859_16",k[k.SJIS=16]="SJIS",k[k.Cp1250=17]="Cp1250",k[k.Cp1251=18]="Cp1251",k[k.Cp1252=19]="Cp1252",k[k.Cp1256=20]="Cp1256",k[k.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",k[k.UTF8=22]="UTF8",k[k.ASCII=23]="ASCII",k[k.Big5=24]="Big5",k[k.GB18030=25]="GB18030",k[k.EUC_KR=26]="EUC_KR"})(Q||(Q={}));class q{constructor(e,r,s,...l){this.valueIdentifier=e,this.name=s,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=l,q.VALUE_IDENTIFIER_TO_ECI.set(e,this),q.NAME_TO_ECI.set(s,this);const c=this.values;for(let d=0,p=c.length;d!==p;d++){const w=c[d];q.VALUES_TO_ECI.set(w,this)}for(const d of l)q.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new X("incorect value");const r=q.VALUES_TO_ECI.get(e);if(r===void 0)throw new X("incorect value");return r}static getCharacterSetECIByName(e){const r=q.NAME_TO_ECI.get(e);if(r===void 0)throw new X("incorect value");return r}equals(e){if(!(e instanceof q))return!1;const r=e;return this.getName()===r.getName()}}q.VALUE_IDENTIFIER_TO_ECI=new Map,q.VALUES_TO_ECI=new Map,q.NAME_TO_ECI=new Map,q.Cp437=new q(Q.Cp437,Int32Array.from([0,2]),"Cp437"),q.ISO8859_1=new q(Q.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),q.ISO8859_2=new q(Q.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),q.ISO8859_3=new q(Q.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),q.ISO8859_4=new q(Q.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),q.ISO8859_5=new q(Q.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),q.ISO8859_6=new q(Q.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),q.ISO8859_7=new q(Q.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),q.ISO8859_8=new q(Q.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),q.ISO8859_9=new q(Q.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),q.ISO8859_10=new q(Q.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),q.ISO8859_11=new q(Q.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),q.ISO8859_13=new q(Q.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),q.ISO8859_14=new q(Q.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),q.ISO8859_15=new q(Q.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),q.ISO8859_16=new q(Q.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),q.SJIS=new q(Q.SJIS,20,"SJIS","Shift_JIS"),q.Cp1250=new q(Q.Cp1250,21,"Cp1250","windows-1250"),q.Cp1251=new q(Q.Cp1251,22,"Cp1251","windows-1251"),q.Cp1252=new q(Q.Cp1252,23,"Cp1252","windows-1252"),q.Cp1256=new q(Q.Cp1256,24,"Cp1256","windows-1256"),q.UnicodeBigUnmarked=new q(Q.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),q.UTF8=new q(Q.UTF8,26,"UTF8","UTF-8"),q.ASCII=new q(Q.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),q.Big5=new q(Q.Big5,28,"Big5"),q.GB18030=new q(Q.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),q.EUC_KR=new q(Q.EUC_KR,30,"EUC_KR","EUC-KR");class ge extends C{}ge.kind="UnsupportedOperationException";class Ne{static decode(e,r){const s=this.encodingName(r);return this.customDecoder?this.customDecoder(e,s):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(s)?this.decodeFallback(e,s):new TextDecoder(s).decode(e)}static shouldDecodeOnFallback(e){return!Ne.isBrowser()&&e==="ISO-8859-1"}static encode(e,r){const s=this.encodingName(r);return this.customEncoder?this.customEncoder(e,s):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof q?e:q.getCharacterSetECIByName(e)}static decodeFallback(e,r){const s=this.encodingCharacterSet(r);if(Ne.isDecodeFallbackSupported(s)){let l="";for(let c=0,d=e.length;c<d;c++){let p=e[c].toString(16);p.length<2&&(p="0"+p),l+="%"+p}return decodeURIComponent(l)}if(s.equals(q.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new ge(`Encoding ${this.encodingName(r)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(q.UTF8)||e.equals(q.ISO8859_1)||e.equals(q.ASCII)}static encodeFallback(e){const s=btoa(unescape(encodeURIComponent(e))).split(""),l=[];for(let c=0;c<s.length;c++)l.push(s[c].charCodeAt(0));return new Uint8Array(l)}}class Ae{static castAsNonUtf8Char(e,r=null){const s=r?r.getName():this.ISO88591;return Ne.decode(new Uint8Array([e]),s)}static guessEncoding(e,r){if(r!=null&&r.get(re.CHARACTER_SET)!==void 0)return r.get(re.CHARACTER_SET).toString();const s=e.length;let l=!0,c=!0,d=!0,p=0,w=0,E=0,R=0,P=0,D=0,W=0,K=0,ee=0,oe=0,he=0;const Fe=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let He=0;He<s&&(l||c||d);He++){const Me=e[He]&255;d&&(p>0?Me&128?p--:d=!1:Me&128&&(Me&64?(p++,Me&32?(p++,Me&16?(p++,Me&8?d=!1:R++):E++):w++):d=!1)),l&&(Me>127&&Me<160?l=!1:Me>159&&(Me<192||Me===215||Me===247)&&he++),c&&(P>0?Me<64||Me===127||Me>252?c=!1:P--:Me===128||Me===160||Me>239?c=!1:Me>160&&Me<224?(D++,K=0,W++,W>ee&&(ee=W)):Me>127?(P++,W=0,K++,K>oe&&(oe=K)):(W=0,K=0))}return d&&p>0&&(d=!1),c&&P>0&&(c=!1),d&&(Fe||w+E+R>0)?Ae.UTF8:c&&(Ae.ASSUME_SHIFT_JIS||ee>=3||oe>=3)?Ae.SHIFT_JIS:l&&c?ee===2&&D===2||he*10>=s?Ae.SHIFT_JIS:Ae.ISO88591:l?Ae.ISO88591:c?Ae.SHIFT_JIS:d?Ae.UTF8:Ae.PLATFORM_DEFAULT_ENCODING}static format(e,...r){let s=-1;function l(d,p,w,E,R,P){if(d==="%%")return"%";if(r[++s]===void 0)return;d=E?parseInt(E.substr(1)):void 0;let D=R?parseInt(R.substr(1)):void 0,W;switch(P){case"s":W=r[s];break;case"c":W=r[s][0];break;case"f":W=parseFloat(r[s]).toFixed(d);break;case"p":W=parseFloat(r[s]).toPrecision(d);break;case"e":W=parseFloat(r[s]).toExponential(d);break;case"x":W=parseInt(r[s]).toString(D||16);break;case"d":W=parseFloat(parseInt(r[s],D||10).toPrecision(d)).toFixed(0);break}W=typeof W=="object"?JSON.stringify(W):(+W).toString(D);let K=parseInt(w),ee=w&&w[0]+""=="0"?"0":" ";for(;W.length<K;)W=p!==void 0?W+ee:ee+W;return W}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(c,l)}static getBytes(e,r){return Ne.encode(e,r)}static getCharCode(e,r=0){return e.charCodeAt(r)}static getCharAt(e){return String.fromCharCode(e)}}Ae.SHIFT_JIS=q.SJIS.getName(),Ae.GB2312="GB2312",Ae.ISO88591=q.ISO8859_1.getName(),Ae.EUC_JP="EUC_JP",Ae.UTF8=q.UTF8.getName(),Ae.PLATFORM_DEFAULT_ENCODING=Ae.UTF8,Ae.ASSUME_SHIFT_JIS=!1;class De{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Ae.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,r,s){for(let l=r;r<r+s;l++)this.append(e[l]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)}substring(e,r){return this.value.substring(e,r)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+r.length)}}class Ce{constructor(e,r,s,l){if(this.width=e,this.height=r,this.rowSize=s,this.bits=l,r==null&&(r=e),this.height=r,e<1||r<1)throw new I("Both dimensions must be greater than 0");s==null&&(s=Math.floor((e+31)/32)),this.rowSize=s,l==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const r=e.length,s=e[0].length,l=new Ce(s,r);for(let c=0;c<r;c++){const d=e[c];for(let p=0;p<s;p++)d[p]&&l.set(p,c)}return l}static parseFromString(e,r,s){if(e===null)throw new I("stringRepresentation cannot be null");const l=new Array(e.length);let c=0,d=0,p=-1,w=0,E=0;for(;E<e.length;)if(e.charAt(E)===`
`||e.charAt(E)==="\r"){if(c>d){if(p===-1)p=c-d;else if(c-d!==p)throw new I("row lengths do not match");d=c,w++}E++}else if(e.substring(E,E+r.length)===r)E+=r.length,l[c]=!0,c++;else if(e.substring(E,E+s.length)===s)E+=s.length,l[c]=!1,c++;else throw new I("illegal character encountered: "+e.substring(E));if(c>d){if(p===-1)p=c-d;else if(c-d!==p)throw new I("row lengths do not match");w++}const R=new Ce(p,w);for(let P=0;P<c;P++)l[P]&&R.set(Math.floor(P%p),Math.floor(P/p));return R}get(e,r){const s=r*this.rowSize+Math.floor(e/32);return(this.bits[s]>>>(e&31)&1)!==0}set(e,r){const s=r*this.rowSize+Math.floor(e/32);this.bits[s]|=1<<(e&31)&4294967295}unset(e,r){const s=r*this.rowSize+Math.floor(e/32);this.bits[s]&=~(1<<(e&31)&4294967295)}flip(e,r){const s=r*this.rowSize+Math.floor(e/32);this.bits[s]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new I("input matrix dimensions do not match");const r=new $(Math.floor(this.width/32)+1),s=this.rowSize,l=this.bits;for(let c=0,d=this.height;c<d;c++){const p=c*s,w=e.getRow(c,r).getBitArray();for(let E=0;E<s;E++)l[p+E]^=w[E]}}clear(){const e=this.bits,r=e.length;for(let s=0;s<r;s++)e[s]=0}setRegion(e,r,s,l){if(r<0||e<0)throw new I("Left and top must be nonnegative");if(l<1||s<1)throw new I("Height and width must be at least 1");const c=e+s,d=r+l;if(d>this.height||c>this.width)throw new I("The region must fit inside the matrix");const p=this.rowSize,w=this.bits;for(let E=r;E<d;E++){const R=E*p;for(let P=e;P<c;P++)w[R+Math.floor(P/32)]|=1<<(P&31)&4294967295}}getRow(e,r){r==null||r.getSize()<this.width?r=new $(this.width):r.clear();const s=this.rowSize,l=this.bits,c=e*s;for(let d=0;d<s;d++)r.setBulk(d*32,l[c+d]);return r}setRow(e,r){B.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),r=this.getHeight();let s=new $(e),l=new $(e);for(let c=0,d=Math.floor((r+1)/2);c<d;c++)s=this.getRow(c,s),l=this.getRow(r-1-c,l),s.reverse(),l.reverse(),this.setRow(c,l),this.setRow(r-1-c,s)}getEnclosingRectangle(){const e=this.width,r=this.height,s=this.rowSize,l=this.bits;let c=e,d=r,p=-1,w=-1;for(let E=0;E<r;E++)for(let R=0;R<s;R++){const P=l[E*s+R];if(P!==0){if(E<d&&(d=E),E>w&&(w=E),R*32<c){let D=0;for(;!(P<<31-D&4294967295);)D++;R*32+D<c&&(c=R*32+D)}if(R*32+31>p){let D=31;for(;!(P>>>D);)D--;R*32+D>p&&(p=R*32+D)}}}return p<c||w<d?null:Int32Array.from([c,d,p-c+1,w-d+1])}getTopLeftOnBit(){const e=this.rowSize,r=this.bits;let s=0;for(;s<r.length&&r[s]===0;)s++;if(s===r.length)return null;const l=s/e;let c=s%e*32;const d=r[s];let p=0;for(;!(d<<31-p&4294967295);)p++;return c+=p,Int32Array.from([c,l])}getBottomRightOnBit(){const e=this.rowSize,r=this.bits;let s=r.length-1;for(;s>=0&&r[s]===0;)s--;if(s<0)return null;const l=Math.floor(s/e);let c=Math.floor(s%e)*32;const d=r[s];let p=31;for(;!(d>>>p);)p--;return c+=p,Int32Array.from([c,l])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof Ce))return!1;const r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&V.equals(this.bits,r.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+V.hashCode(this.bits),e}toString(e="X ",r="  ",s=`
`){return this.buildToString(e,r,s)}buildToString(e,r,s){let l=new De;for(let c=0,d=this.height;c<d;c++){for(let p=0,w=this.width;p<w;p++)l.append(this.get(p,c)?e:r);l.append(s)}return l.toString()}clone(){return new Ce(this.width,this.height,this.rowSize,this.bits.slice())}}class G extends C{static getNotFoundInstance(){return new G}}G.kind="NotFoundException";class je extends L{constructor(e){super(e),this.luminances=je.EMPTY,this.buckets=new Int32Array(je.LUMINANCE_BUCKETS)}getBlackRow(e,r){const s=this.getLuminanceSource(),l=s.getWidth();r==null||r.getSize()<l?r=new $(l):r.clear(),this.initArrays(l);const c=s.getRow(e,this.luminances),d=this.buckets;for(let w=0;w<l;w++)d[(c[w]&255)>>je.LUMINANCE_SHIFT]++;const p=je.estimateBlackPoint(d);if(l<3)for(let w=0;w<l;w++)(c[w]&255)<p&&r.set(w);else{let w=c[0]&255,E=c[1]&255;for(let R=1;R<l-1;R++){const P=c[R+1]&255;(E*4-w-P)/2<p&&r.set(R),w=E,E=P}}return r}getBlackMatrix(){const e=this.getLuminanceSource(),r=e.getWidth(),s=e.getHeight(),l=new Ce(r,s);this.initArrays(r);const c=this.buckets;for(let w=1;w<5;w++){const E=Math.floor(s*w/5),R=e.getRow(E,this.luminances),P=Math.floor(r*4/5);for(let D=Math.floor(r/5);D<P;D++){const W=R[D]&255;c[W>>je.LUMINANCE_SHIFT]++}}const d=je.estimateBlackPoint(c),p=e.getMatrix();for(let w=0;w<s;w++){const E=w*r;for(let R=0;R<r;R++)(p[E+R]&255)<d&&l.set(R,w)}return l}createBinarizer(e){return new je(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const r=this.buckets;for(let s=0;s<je.LUMINANCE_BUCKETS;s++)r[s]=0}static estimateBlackPoint(e){const r=e.length;let s=0,l=0,c=0;for(let R=0;R<r;R++)e[R]>c&&(l=R,c=e[R]),e[R]>s&&(s=e[R]);let d=0,p=0;for(let R=0;R<r;R++){const P=R-l,D=e[R]*P*P;D>p&&(d=R,p=D)}if(l>d){const R=l;l=d,d=R}if(d-l<=r/16)throw new G;let w=d-1,E=-1;for(let R=d-1;R>l;R--){const P=R-l,D=P*P*(d-R)*(s-e[R]);D>E&&(w=R,E=D)}return w<<je.LUMINANCE_SHIFT}}je.LUMINANCE_BITS=5,je.LUMINANCE_SHIFT=8-je.LUMINANCE_BITS,je.LUMINANCE_BUCKETS=1<<je.LUMINANCE_BITS,je.EMPTY=Uint8ClampedArray.from([0]);class ye extends je{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),r=e.getWidth(),s=e.getHeight();if(r>=ye.MINIMUM_DIMENSION&&s>=ye.MINIMUM_DIMENSION){const l=e.getMatrix();let c=r>>ye.BLOCK_SIZE_POWER;r&ye.BLOCK_SIZE_MASK&&c++;let d=s>>ye.BLOCK_SIZE_POWER;s&ye.BLOCK_SIZE_MASK&&d++;const p=ye.calculateBlackPoints(l,c,d,r,s),w=new Ce(r,s);ye.calculateThresholdForBlock(l,c,d,r,s,p,w),this.matrix=w}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new ye(e)}static calculateThresholdForBlock(e,r,s,l,c,d,p){const w=c-ye.BLOCK_SIZE,E=l-ye.BLOCK_SIZE;for(let R=0;R<s;R++){let P=R<<ye.BLOCK_SIZE_POWER;P>w&&(P=w);const D=ye.cap(R,2,s-3);for(let W=0;W<r;W++){let K=W<<ye.BLOCK_SIZE_POWER;K>E&&(K=E);const ee=ye.cap(W,2,r-3);let oe=0;for(let Fe=-2;Fe<=2;Fe++){const He=d[D+Fe];oe+=He[ee-2]+He[ee-1]+He[ee]+He[ee+1]+He[ee+2]}const he=oe/25;ye.thresholdBlock(e,K,P,he,l,p)}}}static cap(e,r,s){return e<r?r:e>s?s:e}static thresholdBlock(e,r,s,l,c,d){for(let p=0,w=s*c+r;p<ye.BLOCK_SIZE;p++,w+=c)for(let E=0;E<ye.BLOCK_SIZE;E++)(e[w+E]&255)<=l&&d.set(r+E,s+p)}static calculateBlackPoints(e,r,s,l,c){const d=c-ye.BLOCK_SIZE,p=l-ye.BLOCK_SIZE,w=new Array(s);for(let E=0;E<s;E++){w[E]=new Int32Array(r);let R=E<<ye.BLOCK_SIZE_POWER;R>d&&(R=d);for(let P=0;P<r;P++){let D=P<<ye.BLOCK_SIZE_POWER;D>p&&(D=p);let W=0,K=255,ee=0;for(let he=0,Fe=R*l+D;he<ye.BLOCK_SIZE;he++,Fe+=l){for(let He=0;He<ye.BLOCK_SIZE;He++){const Me=e[Fe+He]&255;W+=Me,Me<K&&(K=Me),Me>ee&&(ee=Me)}if(ee-K>ye.MIN_DYNAMIC_RANGE)for(he++,Fe+=l;he<ye.BLOCK_SIZE;he++,Fe+=l)for(let He=0;He<ye.BLOCK_SIZE;He++)W+=e[Fe+He]&255}let oe=W>>ye.BLOCK_SIZE_POWER*2;if(ee-K<=ye.MIN_DYNAMIC_RANGE&&(oe=K/2,E>0&&P>0)){const he=(w[E-1][P]+2*w[E][P-1]+w[E-1][P-1])/4;K<he&&(oe=he)}w[E][P]=oe}}return w}}ye.BLOCK_SIZE_POWER=3,ye.BLOCK_SIZE=1<<ye.BLOCK_SIZE_POWER,ye.BLOCK_SIZE_MASK=ye.BLOCK_SIZE-1,ye.MINIMUM_DIMENSION=ye.BLOCK_SIZE*5,ye.MIN_DYNAMIC_RANGE=24;class fe{constructor(e,r){this.width=e,this.height=r}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,r,s,l){throw new ge("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ge("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ge("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let r=new De;for(let s=0;s<this.height;s++){const l=this.getRow(s,e);for(let c=0;c<this.width;c++){const d=l[c]&255;let p;d<64?p="#":d<128?p="+":d<192?p=".":p=" ",r.append(p)}r.append(`
`)}return r.toString()}}class Ve extends fe{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,r){const s=this.delegate.getRow(e,r),l=this.getWidth();for(let c=0;c<l;c++)s[c]=255-(s[c]&255);return s}getMatrix(){const e=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),s=new Uint8ClampedArray(r);for(let l=0;l<r;l++)s[l]=255-(e[l]&255);return s}isCropSupported(){return this.delegate.isCropSupported()}crop(e,r,s,l){return new Ve(this.delegate.crop(e,r,s,l))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ve(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ve(this.delegate.rotateCounterClockwise45())}}class we extends fe{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=we.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const r=e.getContext("2d").getImageData(0,0,e.width,e.height);return we.toGrayscaleBuffer(r.data,e.width,e.height)}static toGrayscaleBuffer(e,r,s){const l=new Uint8ClampedArray(r*s);for(let c=0,d=0,p=e.length;c<p;c+=4,d++){let w;if(e[c+3]===0)w=255;else{const R=e[c],P=e[c+1],D=e[c+2];w=306*R+601*P+117*D+512>>10}l[d]=w}return l}getRow(e,r){if(e<0||e>=this.getHeight())throw new I("Requested row is outside the image: "+e);const s=this.getWidth(),l=e*s;return r===null?r=this.buffer.slice(l,l+s):(r.length<s&&(r=new Uint8ClampedArray(s)),r.set(this.buffer.slice(l,l+s))),r}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,r,s,l){return super.crop(e,r,s,l),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const r=this.getTempCanvasElement(),s=r.getContext("2d"),l=e*we.DEGREE_TO_RADIANS,c=this.canvas.width,d=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(l))*c+Math.abs(Math.sin(l))*d),w=Math.ceil(Math.abs(Math.sin(l))*c+Math.abs(Math.cos(l))*d);return r.width=p,r.height=w,s.translate(p/2,w/2),s.rotate(l),s.drawImage(this.canvas,c/-2,d/-2),this.buffer=we.makeBufferFromCanvasImageData(r),this}invert(){return new Ve(this)}}we.DEGREE_TO_RADIANS=Math.PI/180;class Y{constructor(e,r,s){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=s||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var le=(globalThis||lc||self||window||void 0)&&(globalThis||lc||self||window||void 0).__awaiter||function(k,e,r,s){function l(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function p(R){try{E(s.next(R))}catch(P){d(P)}}function w(R){try{E(s.throw(R))}catch(P){d(P)}}function E(R){R.done?c(R.value):l(R.value).then(p,w)}E((s=s.apply(k,e||[])).next())})};class Te{constructor(e,r=500,s){this.reader=e,this.timeBetweenScansMillis=r,this._hints=s,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return le(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),r=[];for(const s of e){const l=s.kind==="video"?"videoinput":s.kind;if(l!=="videoinput")continue;const c=s.deviceId||s.id,d=s.label||`Video device ${r.length+1}`,p=s.groupId,w={deviceId:c,label:d,kind:l,groupId:p};r.push(w)}return r})}getVideoInputDevices(){return le(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(r=>new Y(r.deviceId,r.label))})}findDeviceById(e){return le(this,void 0,void 0,function*(){const r=yield this.listVideoInputDevices();return r?r.find(s=>s.deviceId===e):null})}decodeFromInputVideoDevice(e,r){return le(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,r)})}decodeOnceFromVideoDevice(e,r){return le(this,void 0,void 0,function*(){this.reset();let s;e?s={deviceId:{exact:e}}:s={facingMode:"environment"};const l={video:s};return yield this.decodeOnceFromConstraints(l,r)})}decodeOnceFromConstraints(e,r){return le(this,void 0,void 0,function*(){const s=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(s,r)})}decodeOnceFromStream(e,r){return le(this,void 0,void 0,function*(){this.reset();const s=yield this.attachStreamToVideo(e,r);return yield this.decodeOnce(s)})}decodeFromInputVideoDeviceContinuously(e,r,s){return le(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,r,s)})}decodeFromVideoDevice(e,r,s){return le(this,void 0,void 0,function*(){let l;e?l={deviceId:{exact:e}}:l={facingMode:"environment"};const c={video:l};return yield this.decodeFromConstraints(c,r,s)})}decodeFromConstraints(e,r,s){return le(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(l,r,s)})}decodeFromStream(e,r,s){return le(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(e,r);return yield this.decodeContinuously(l,s)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,r){return le(this,void 0,void 0,function*(){const s=this.prepareVideoElement(r);return this.addVideoSource(s,e),this.videoElement=s,this.stream=e,yield this.playVideoOnLoadAsync(s),s})}playVideoOnLoadAsync(e){return new Promise((r,s)=>this.playVideoOnLoad(e,()=>r()))}playVideoOnLoad(e,r){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return le(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,r){const s=document.getElementById(e);if(!s)throw new S(`element with id '${e}' not found`);if(s.nodeName.toLowerCase()!==r.toLowerCase())throw new S(`element with id '${e}' must be an ${r} element`);return s}decodeFromImage(e,r){if(!e&&!r)throw new S("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)}decodeFromVideo(e,r){if(!e&&!r)throw new S("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,r,s){if(e===void 0&&r===void 0)throw new S("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,s):this.decodeFromVideoElementContinuously(e,s)}decodeFromImageElement(e){if(!e)throw new S("An image element must be provided.");this.reset();const r=this.prepareImageElement(e);this.imageElement=r;let s;return this.isImageLoaded(r)?s=this.decodeOnce(r,!1,!0):s=this._decodeOnLoadImage(r),s}decodeFromVideoElement(e){const r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)}decodeFromVideoElementContinuously(e,r){const s=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(s,r)}_decodeFromVideoElementSetup(e){if(!e)throw new S("A video element must be provided.");this.reset();const r=this.prepareVideoElement(e);return this.videoElement=r,r}decodeFromImageUrl(e){if(!e)throw new S("An URL must be provided.");this.reset();const r=this.prepareImageElement();this.imageElement=r;const s=this._decodeOnLoadImage(r);return r.src=e,s}decodeFromVideoUrl(e){if(!e)throw new S("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),s=this.decodeFromVideoElement(r);return r.src=e,s}decodeFromVideoUrlContinuously(e,r){if(!e)throw new S("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),l=this.decodeFromVideoElementContinuously(s,r);return s.src=e,l}_decodeOnLoadImage(e){return new Promise((r,s)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(r,s),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return le(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,r){return le(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,r)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r}prepareVideoElement(e){let r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r}decodeOnce(e,r=!0,s=!0){this._stopAsyncDecode=!1;const l=(c,d)=>{if(this._stopAsyncDecode){d(new G("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const p=this.decode(e);c(p)}catch(p){const w=r&&p instanceof G,R=(p instanceof M||p instanceof X)&&s;if(w||R)return setTimeout(l,this._timeBetweenDecodingAttempts,c,d);d(p)}};return new Promise((c,d)=>l(c,d))}decodeContinuously(e,r){this._stopContinuousDecode=!1;const s=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const l=this.decode(e);r(l,null),setTimeout(s,this.timeBetweenScansMillis)}catch(l){r(null,l);const c=l instanceof M||l instanceof X,d=l instanceof G;(c||d)&&setTimeout(s,this._timeBetweenDecodingAttempts)}};s()}decode(e){const r=this.createBinaryBitmap(e);return this.decodeBitmap(r)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,r,s){r||(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),s||(s=this.captureCanvasContext),s.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}drawImageOnCanvas(e,r,s=this.captureCanvasContext){r||(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),s||(s=this.captureCanvasContext),s.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const r=this.getCaptureCanvas(e),s=new we(r),l=new ye(s);return new _(l)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const s=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=s}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const r=document.createElement("canvas");let s,l;return typeof e<"u"&&(e instanceof HTMLVideoElement?(s=e.videoWidth,l=e.videoHeight):e instanceof HTMLImageElement&&(s=e.naturalWidth||e.width,l=e.naturalHeight||e.height)),r.style.width=s+"px",r.style.height=l+"px",r.width=s,r.height=l,r}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class Ge{constructor(e,r,s=r==null?0:8*r.length,l,c,d=B.currentTimeMillis()){this.text=e,this.rawBytes=r,this.numBits=s,this.resultPoints=l,this.format=c,this.timestamp=d,this.text=e,this.rawBytes=r,s==null?this.numBits=r==null?0:8*r.length:this.numBits=s,this.resultPoints=l,this.format=c,this.resultMetadata=null,d==null?this.timestamp=B.currentTimeMillis():this.timestamp=d}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){const s=new Array(r.length+e.length);B.arraycopy(r,0,s,0,r.length),B.arraycopy(e,0,s,r.length,e.length),this.resultPoints=s}}getTimestamp(){return this.timestamp}toString(){return this.text}}var be;(function(k){k[k.AZTEC=0]="AZTEC",k[k.CODABAR=1]="CODABAR",k[k.CODE_39=2]="CODE_39",k[k.CODE_93=3]="CODE_93",k[k.CODE_128=4]="CODE_128",k[k.DATA_MATRIX=5]="DATA_MATRIX",k[k.EAN_8=6]="EAN_8",k[k.EAN_13=7]="EAN_13",k[k.ITF=8]="ITF",k[k.MAXICODE=9]="MAXICODE",k[k.PDF_417=10]="PDF_417",k[k.QR_CODE=11]="QR_CODE",k[k.RSS_14=12]="RSS_14",k[k.RSS_EXPANDED=13]="RSS_EXPANDED",k[k.UPC_A=14]="UPC_A",k[k.UPC_E=15]="UPC_E",k[k.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(be||(be={}));var te=be,Xe;(function(k){k[k.OTHER=0]="OTHER",k[k.ORIENTATION=1]="ORIENTATION",k[k.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",k[k.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",k[k.ISSUE_NUMBER=4]="ISSUE_NUMBER",k[k.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",k[k.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",k[k.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",k[k.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",k[k.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",k[k.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Xe||(Xe={}));var Pe=Xe;class $e{constructor(e,r,s,l,c=-1,d=-1){this.rawBytes=e,this.text=r,this.byteSegments=s,this.ecLevel=l,this.structuredAppendSequenceNumber=c,this.structuredAppendParity=d,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class kt{exp(e){return this.expTable[e]}log(e){if(e===0)throw new I;return this.logTable[e]}static addOrSubtract(e,r){return e^r}}class xe{constructor(e,r){if(r.length===0)throw new I;this.field=e;const s=r.length;if(s>1&&r[0]===0){let l=1;for(;l<s&&r[l]===0;)l++;l===s?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(s-l),B.arraycopy(r,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const r=this.coefficients;let s;if(e===1){s=0;for(let d=0,p=r.length;d!==p;d++){const w=r[d];s=kt.addOrSubtract(s,w)}return s}s=r[0];const l=r.length,c=this.field;for(let d=1;d<l;d++)s=kt.addOrSubtract(c.multiply(e,s),r[d]);return s}addOrSubtract(e){if(!this.field.equals(e.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let r=this.coefficients,s=e.coefficients;if(r.length>s.length){const d=r;r=s,s=d}let l=new Int32Array(s.length);const c=s.length-r.length;B.arraycopy(s,0,l,0,c);for(let d=c;d<s.length;d++)l[d]=kt.addOrSubtract(r[d-c],s[d]);return new xe(this.field,l)}multiply(e){if(!this.field.equals(e.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const r=this.coefficients,s=r.length,l=e.coefficients,c=l.length,d=new Int32Array(s+c-1),p=this.field;for(let w=0;w<s;w++){const E=r[w];for(let R=0;R<c;R++)d[w+R]=kt.addOrSubtract(d[w+R],p.multiply(E,l[R]))}return new xe(p,d)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const r=this.coefficients.length,s=this.field,l=new Int32Array(r),c=this.coefficients;for(let d=0;d<r;d++)l[d]=s.multiply(c[d],e);return new xe(s,l)}multiplyByMonomial(e,r){if(e<0)throw new I;if(r===0)return this.field.getZero();const s=this.coefficients,l=s.length,c=new Int32Array(l+e),d=this.field;for(let p=0;p<l;p++)c[p]=d.multiply(s[p],r);return new xe(d,c)}divide(e){if(!this.field.equals(e.field))throw new I("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new I("Divide by 0");const r=this.field;let s=r.getZero(),l=this;const c=e.getCoefficient(e.getDegree()),d=r.inverse(c);for(;l.getDegree()>=e.getDegree()&&!l.isZero();){const p=l.getDegree()-e.getDegree(),w=r.multiply(l.getCoefficient(l.getDegree()),d),E=e.multiplyByMonomial(p,w),R=r.buildMonomial(p,w);s=s.addOrSubtract(R),l=l.addOrSubtract(E)}return[s,l]}toString(){let e="";for(let r=this.getDegree();r>=0;r--){let s=this.getCoefficient(r);if(s!==0){if(s<0?(e+=" - ",s=-s):e.length>0&&(e+=" + "),r===0||s!==1){const l=this.field.log(s);l===0?e+="1":l===1?e+="a":(e+="a^",e+=l)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e}}class ie extends C{}ie.kind="ArithmeticException";class ue extends kt{constructor(e,r,s){super(),this.primitive=e,this.size=r,this.generatorBase=s;const l=new Int32Array(r);let c=1;for(let p=0;p<r;p++)l[p]=c,c*=2,c>=r&&(c^=e,c&=r-1);this.expTable=l;const d=new Int32Array(r);for(let p=0;p<r-1;p++)d[l[p]]=p;this.logTable=d,this.zero=new xe(this,Int32Array.from([0])),this.one=new xe(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,r){if(e<0)throw new I;if(r===0)return this.zero;const s=new Int32Array(e+1);return s[0]=r,new xe(this,s)}inverse(e){if(e===0)throw new ie;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+F.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}ue.AZTEC_DATA_12=new ue(4201,4096,1),ue.AZTEC_DATA_10=new ue(1033,1024,1),ue.AZTEC_DATA_6=new ue(67,64,1),ue.AZTEC_PARAM=new ue(19,16,1),ue.QR_CODE_FIELD_256=new ue(285,256,0),ue.DATA_MATRIX_FIELD_256=new ue(301,256,1),ue.AZTEC_DATA_8=ue.DATA_MATRIX_FIELD_256,ue.MAXICODE_FIELD_64=ue.AZTEC_DATA_6;class Re extends C{}Re.kind="ReedSolomonException";class Ze extends C{}Ze.kind="IllegalStateException";class tt{constructor(e){this.field=e}decode(e,r){const s=this.field,l=new xe(s,e),c=new Int32Array(r);let d=!0;for(let W=0;W<r;W++){const K=l.evaluateAt(s.exp(W+s.getGeneratorBase()));c[c.length-1-W]=K,K!==0&&(d=!1)}if(d)return;const p=new xe(s,c),w=this.runEuclideanAlgorithm(s.buildMonomial(r,1),p,r),E=w[0],R=w[1],P=this.findErrorLocations(E),D=this.findErrorMagnitudes(R,P);for(let W=0;W<P.length;W++){const K=e.length-1-s.log(P[W]);if(K<0)throw new Re("Bad error location");e[K]=ue.addOrSubtract(e[K],D[W])}}runEuclideanAlgorithm(e,r,s){if(e.getDegree()<r.getDegree()){const W=e;e=r,r=W}const l=this.field;let c=e,d=r,p=l.getZero(),w=l.getOne();for(;d.getDegree()>=(s/2|0);){let W=c,K=p;if(c=d,p=w,c.isZero())throw new Re("r_{i-1} was zero");d=W;let ee=l.getZero();const oe=c.getCoefficient(c.getDegree()),he=l.inverse(oe);for(;d.getDegree()>=c.getDegree()&&!d.isZero();){const Fe=d.getDegree()-c.getDegree(),He=l.multiply(d.getCoefficient(d.getDegree()),he);ee=ee.addOrSubtract(l.buildMonomial(Fe,He)),d=d.addOrSubtract(c.multiplyByMonomial(Fe,He))}if(w=ee.multiply(p).addOrSubtract(K),d.getDegree()>=c.getDegree())throw new Ze("Division algorithm failed to reduce polynomial?")}const E=w.getCoefficient(0);if(E===0)throw new Re("sigmaTilde(0) was zero");const R=l.inverse(E),P=w.multiplyScalar(R),D=d.multiplyScalar(R);return[P,D]}findErrorLocations(e){const r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);const s=new Int32Array(r);let l=0;const c=this.field;for(let d=1;d<c.getSize()&&l<r;d++)e.evaluateAt(d)===0&&(s[l]=c.inverse(d),l++);if(l!==r)throw new Re("Error locator degree does not match number of roots");return s}findErrorMagnitudes(e,r){const s=r.length,l=new Int32Array(s),c=this.field;for(let d=0;d<s;d++){const p=c.inverse(r[d]);let w=1;for(let E=0;E<s;E++)if(d!==E){const R=c.multiply(r[E],p),P=R&1?R&-2:R|1;w=c.multiply(w,P)}l[d]=c.multiply(e.evaluateAt(p),c.inverse(w)),c.getGeneratorBase()!==0&&(l[d]=c.multiply(l[d],p))}return l}}var ze;(function(k){k[k.UPPER=0]="UPPER",k[k.LOWER=1]="LOWER",k[k.MIXED=2]="MIXED",k[k.DIGIT=3]="DIGIT",k[k.PUNCT=4]="PUNCT",k[k.BINARY=5]="BINARY"})(ze||(ze={}));class _e{decode(e){this.ddata=e;let r=e.getBits(),s=this.extractBits(r),l=this.correctBits(s),c=_e.convertBoolArrayToByteArray(l),d=_e.getEncodedData(l),p=new $e(c,d,null,null);return p.setNumBits(l.length),p}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let r=e.length,s=ze.UPPER,l=ze.UPPER,c="",d=0;for(;d<r;)if(l===ze.BINARY){if(r-d<5)break;let p=_e.readCode(e,d,5);if(d+=5,p===0){if(r-d<11)break;p=_e.readCode(e,d,11)+31,d+=11}for(let w=0;w<p;w++){if(r-d<8){d=r;break}const E=_e.readCode(e,d,8);c+=Ae.castAsNonUtf8Char(E),d+=8}l=s}else{let p=l===ze.DIGIT?4:5;if(r-d<p)break;let w=_e.readCode(e,d,p);d+=p;let E=_e.getCharacter(l,w);E.startsWith("CTRL_")?(s=l,l=_e.getTable(E.charAt(5)),E.charAt(6)==="L"&&(s=l)):(c+=E,l=s)}return c}static getTable(e){switch(e){case"L":return ze.LOWER;case"P":return ze.PUNCT;case"M":return ze.MIXED;case"D":return ze.DIGIT;case"B":return ze.BINARY;case"U":default:return ze.UPPER}}static getCharacter(e,r){switch(e){case ze.UPPER:return _e.UPPER_TABLE[r];case ze.LOWER:return _e.LOWER_TABLE[r];case ze.MIXED:return _e.MIXED_TABLE[r];case ze.PUNCT:return _e.PUNCT_TABLE[r];case ze.DIGIT:return _e.DIGIT_TABLE[r];default:throw new Ze("Bad table")}}correctBits(e){let r,s;this.ddata.getNbLayers()<=2?(s=6,r=ue.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(s=8,r=ue.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(s=10,r=ue.AZTEC_DATA_10):(s=12,r=ue.AZTEC_DATA_12);let l=this.ddata.getNbDatablocks(),c=e.length/s;if(c<l)throw new X;let d=e.length%s,p=new Int32Array(c);for(let D=0;D<c;D++,d+=s)p[D]=_e.readCode(e,d,s);try{new tt(r).decode(p,c-l)}catch(D){throw new X(D)}let w=(1<<s)-1,E=0;for(let D=0;D<l;D++){let W=p[D];if(W===0||W===w)throw new X;(W===1||W===w-1)&&E++}let R=new Array(l*s-E),P=0;for(let D=0;D<l;D++){let W=p[D];if(W===1||W===w-1)R.fill(W>1,P,P+s-1),P+=s-1;else for(let K=s-1;K>=0;--K)R[P++]=(W&1<<K)!==0}return R}extractBits(e){let r=this.ddata.isCompact(),s=this.ddata.getNbLayers(),l=(r?11:14)+s*4,c=new Int32Array(l),d=new Array(this.totalBitsInLayer(s,r));if(r)for(let p=0;p<c.length;p++)c[p]=p;else{let p=l+1+2*F.truncDivision(F.truncDivision(l,2)-1,15),w=l/2,E=F.truncDivision(p,2);for(let R=0;R<w;R++){let P=R+F.truncDivision(R,15);c[w-R-1]=E-P-1,c[w+R]=E+P+1}}for(let p=0,w=0;p<s;p++){let E=(s-p)*4+(r?9:12),R=p*2,P=l-1-R;for(let D=0;D<E;D++){let W=D*2;for(let K=0;K<2;K++)d[w+W+K]=e.get(c[R+K],c[R+D]),d[w+2*E+W+K]=e.get(c[R+D],c[P-K]),d[w+4*E+W+K]=e.get(c[P-K],c[P-D]),d[w+6*E+W+K]=e.get(c[P-D],c[R+K])}w+=E*8}return d}static readCode(e,r,s){let l=0;for(let c=r;c<r+s;c++)l<<=1,e[c]&&(l|=1);return l}static readByte(e,r){let s=e.length-r;return s>=8?_e.readCode(e,r,8):_e.readCode(e,r,s)<<8-s}static convertBoolArrayToByteArray(e){let r=new Uint8Array((e.length+7)/8);for(let s=0;s<r.length;s++)r[s]=_e.readByte(e,8*s);return r}totalBitsInLayer(e,r){return((r?88:112)+16*e)*e}}_e.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],_e.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],_e.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],_e.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],_e.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class We{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,r,s,l){const c=e-s,d=r-l;return Math.sqrt(c*c+d*d)}static sum(e){let r=0;for(let s=0,l=e.length;s!==l;s++){const c=e[s];r+=c}return r}}class wt{static floatToIntBits(e){return e}}wt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ie{constructor(e,r){this.x=e,this.y=r}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof Ie){const r=e;return this.x===r.x&&this.y===r.y}return!1}hashCode(){return 31*wt.floatToIntBits(this.x)+wt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const r=this.distance(e[0],e[1]),s=this.distance(e[1],e[2]),l=this.distance(e[0],e[2]);let c,d,p;if(s>=r&&s>=l?(d=e[0],c=e[1],p=e[2]):l>=s&&l>=r?(d=e[1],c=e[0],p=e[2]):(d=e[2],c=e[0],p=e[1]),this.crossProductZ(c,d,p)<0){const w=c;c=p,p=w}e[0]=c,e[1]=d,e[2]=p}static distance(e,r){return We.distance(e.x,e.y,r.x,r.y)}static crossProductZ(e,r,s){const l=r.x,c=r.y;return(s.x-l)*(e.y-c)-(s.y-c)*(e.x-l)}}class vt{constructor(e,r){this.bits=e,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class Lt extends vt{constructor(e,r,s,l,c){super(e,r),this.compact=s,this.nbDatablocks=l,this.nbLayers=c}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Ee{constructor(e,r,s,l){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=Ee.INIT_SIZE),s==null&&(s=e.getWidth()/2|0),l==null&&(l=e.getHeight()/2|0);const c=r/2|0;if(this.leftInit=s-c,this.rightInit=s+c,this.upInit=l-c,this.downInit=l+c,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new G}detect(){let e=this.leftInit,r=this.rightInit,s=this.upInit,l=this.downInit,c=!1,d=!0,p=!1,w=!1,E=!1,R=!1,P=!1;const D=this.width,W=this.height;for(;d;){d=!1;let K=!0;for(;(K||!w)&&r<D;)K=this.containsBlackPoint(s,l,r,!1),K?(r++,d=!0,w=!0):w||r++;if(r>=D){c=!0;break}let ee=!0;for(;(ee||!E)&&l<W;)ee=this.containsBlackPoint(e,r,l,!0),ee?(l++,d=!0,E=!0):E||l++;if(l>=W){c=!0;break}let oe=!0;for(;(oe||!R)&&e>=0;)oe=this.containsBlackPoint(s,l,e,!1),oe?(e--,d=!0,R=!0):R||e--;if(e<0){c=!0;break}let he=!0;for(;(he||!P)&&s>=0;)he=this.containsBlackPoint(e,r,s,!0),he?(s--,d=!0,P=!0):P||s--;if(s<0){c=!0;break}d&&(p=!0)}if(!c&&p){const K=r-e;let ee=null;for(let He=1;ee===null&&He<K;He++)ee=this.getBlackPointOnSegment(e,l-He,e+He,l);if(ee==null)throw new G;let oe=null;for(let He=1;oe===null&&He<K;He++)oe=this.getBlackPointOnSegment(e,s+He,e+He,s);if(oe==null)throw new G;let he=null;for(let He=1;he===null&&He<K;He++)he=this.getBlackPointOnSegment(r,s+He,r-He,s);if(he==null)throw new G;let Fe=null;for(let He=1;Fe===null&&He<K;He++)Fe=this.getBlackPointOnSegment(r,l-He,r-He,l);if(Fe==null)throw new G;return this.centerEdges(Fe,ee,he,oe)}else throw new G}getBlackPointOnSegment(e,r,s,l){const c=We.round(We.distance(e,r,s,l)),d=(s-e)/c,p=(l-r)/c,w=this.image;for(let E=0;E<c;E++){const R=We.round(e+E*d),P=We.round(r+E*p);if(w.get(R,P))return new Ie(R,P)}return null}centerEdges(e,r,s,l){const c=e.getX(),d=e.getY(),p=r.getX(),w=r.getY(),E=s.getX(),R=s.getY(),P=l.getX(),D=l.getY(),W=Ee.CORR;return c<this.width/2?[new Ie(P-W,D+W),new Ie(p+W,w+W),new Ie(E-W,R-W),new Ie(c+W,d-W)]:[new Ie(P+W,D+W),new Ie(p+W,w-W),new Ie(E-W,R+W),new Ie(c-W,d-W)]}containsBlackPoint(e,r,s,l){const c=this.image;if(l){for(let d=e;d<=r;d++)if(c.get(d,s))return!0}else for(let d=e;d<=r;d++)if(c.get(s,d))return!0;return!1}}Ee.INIT_SIZE=10,Ee.CORR=1;class Pt{static checkAndNudgePoints(e,r){const s=e.getWidth(),l=e.getHeight();let c=!0;for(let d=0;d<r.length&&c;d+=2){const p=Math.floor(r[d]),w=Math.floor(r[d+1]);if(p<-1||p>s||w<-1||w>l)throw new G;c=!1,p===-1?(r[d]=0,c=!0):p===s&&(r[d]=s-1,c=!0),w===-1?(r[d+1]=0,c=!0):w===l&&(r[d+1]=l-1,c=!0)}c=!0;for(let d=r.length-2;d>=0&&c;d-=2){const p=Math.floor(r[d]),w=Math.floor(r[d+1]);if(p<-1||p>s||w<-1||w>l)throw new G;c=!1,p===-1?(r[d]=0,c=!0):p===s&&(r[d]=s-1,c=!0),w===-1?(r[d+1]=0,c=!0):w===l&&(r[d+1]=l-1,c=!0)}}}class St{constructor(e,r,s,l,c,d,p,w,E){this.a11=e,this.a21=r,this.a31=s,this.a12=l,this.a22=c,this.a32=d,this.a13=p,this.a23=w,this.a33=E}static quadrilateralToQuadrilateral(e,r,s,l,c,d,p,w,E,R,P,D,W,K,ee,oe){const he=St.quadrilateralToSquare(e,r,s,l,c,d,p,w);return St.squareToQuadrilateral(E,R,P,D,W,K,ee,oe).times(he)}transformPoints(e){const r=e.length,s=this.a11,l=this.a12,c=this.a13,d=this.a21,p=this.a22,w=this.a23,E=this.a31,R=this.a32,P=this.a33;for(let D=0;D<r;D+=2){const W=e[D],K=e[D+1],ee=c*W+w*K+P;e[D]=(s*W+d*K+E)/ee,e[D+1]=(l*W+p*K+R)/ee}}transformPointsWithValues(e,r){const s=this.a11,l=this.a12,c=this.a13,d=this.a21,p=this.a22,w=this.a23,E=this.a31,R=this.a32,P=this.a33,D=e.length;for(let W=0;W<D;W++){const K=e[W],ee=r[W],oe=c*K+w*ee+P;e[W]=(s*K+d*ee+E)/oe,r[W]=(l*K+p*ee+R)/oe}}static squareToQuadrilateral(e,r,s,l,c,d,p,w){const E=e-s+c-p,R=r-l+d-w;if(E===0&&R===0)return new St(s-e,c-s,e,l-r,d-l,r,0,0,1);{const P=s-c,D=p-c,W=l-d,K=w-d,ee=P*K-D*W,oe=(E*K-D*R)/ee,he=(P*R-E*W)/ee;return new St(s-e+oe*s,p-e+he*p,e,l-r+oe*l,w-r+he*w,r,oe,he,1)}}static quadrilateralToSquare(e,r,s,l,c,d,p,w){return St.squareToQuadrilateral(e,r,s,l,c,d,p,w).buildAdjoint()}buildAdjoint(){return new St(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new St(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class zt extends Pt{sampleGrid(e,r,s,l,c,d,p,w,E,R,P,D,W,K,ee,oe,he,Fe,He){const Me=St.quadrilateralToQuadrilateral(l,c,d,p,w,E,R,P,D,W,K,ee,oe,he,Fe,He);return this.sampleGridWithTransform(e,r,s,Me)}sampleGridWithTransform(e,r,s,l){if(r<=0||s<=0)throw new G;const c=new Ce(r,s),d=new Float32Array(2*r);for(let p=0;p<s;p++){const w=d.length,E=p+.5;for(let R=0;R<w;R+=2)d[R]=R/2+.5,d[R+1]=E;l.transformPoints(d),Pt.checkAndNudgePoints(e,d);try{for(let R=0;R<w;R+=2)e.get(Math.floor(d[R]),Math.floor(d[R+1]))&&c.set(R/2,p)}catch{throw new G}}return c}}class lt{static setGridSampler(e){lt.gridSampler=e}static getInstance(){return lt.gridSampler}}lt.gridSampler=new zt;class Wt{constructor(e,r){this.x=e,this.y=r}toResultPoint(){return new Ie(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Qe{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let r=this.getMatrixCenter(),s=this.getBullsEyeCorners(r);if(e){let d=s[0];s[0]=s[2],s[2]=d}this.extractParameters(s);let l=this.sampleGrid(this.image,s[this.shift%4],s[(this.shift+1)%4],s[(this.shift+2)%4],s[(this.shift+3)%4]),c=this.getMatrixCornerPoints(s);return new Lt(l,c,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new G;let r=2*this.nbCenterLayers,s=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(s,r);let l=0;for(let d=0;d<4;d++){let p=s[(this.shift+d)%4];this.compact?(l<<=7,l+=p>>1&127):(l<<=10,l+=(p>>2&992)+(p>>1&31))}let c=this.getCorrectedParameterData(l,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)}getRotation(e,r){let s=0;e.forEach((l,c,d)=>{let p=(l>>r-2<<1)+(l&1);s=(s<<3)+p}),s=((s&1)<<11)+(s>>1);for(let l=0;l<4;l++)if(F.bitCount(s^this.EXPECTED_CORNER_BITS[l])<=2)return l;throw new G}getCorrectedParameterData(e,r){let s,l;r?(s=7,l=2):(s=10,l=4);let c=s-l,d=new Int32Array(s);for(let w=s-1;w>=0;--w)d[w]=e&15,e>>=4;try{new tt(ue.AZTEC_PARAM).decode(d,c)}catch{throw new G}let p=0;for(let w=0;w<l;w++)p=(p<<4)+d[w];return p}getBullsEyeCorners(e){let r=e,s=e,l=e,c=e,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let P=this.getFirstDifferent(r,d,1,-1),D=this.getFirstDifferent(s,d,1,1),W=this.getFirstDifferent(l,d,-1,1),K=this.getFirstDifferent(c,d,-1,-1);if(this.nbCenterLayers>2){let ee=this.distancePoint(K,P)*this.nbCenterLayers/(this.distancePoint(c,r)*(this.nbCenterLayers+2));if(ee<.75||ee>1.25||!this.isWhiteOrBlackRectangle(P,D,W,K))break}r=P,s=D,l=W,c=K,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new G;this.compact=this.nbCenterLayers===5;let p=new Ie(r.getX()+.5,r.getY()-.5),w=new Ie(s.getX()+.5,s.getY()+.5),E=new Ie(l.getX()-.5,l.getY()+.5),R=new Ie(c.getX()-.5,c.getY()-.5);return this.expandSquare([p,w,E,R],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,r,s,l;try{let p=new Ee(this.image).detect();e=p[0],r=p[1],s=p[2],l=p[3]}catch{let w=this.image.getWidth()/2,E=this.image.getHeight()/2;e=this.getFirstDifferent(new Wt(w+7,E-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Wt(w+7,E+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new Wt(w-7,E+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new Wt(w-7,E-7),!1,-1,-1).toResultPoint()}let c=We.round((e.getX()+l.getX()+r.getX()+s.getX())/4),d=We.round((e.getY()+l.getY()+r.getY()+s.getY())/4);try{let p=new Ee(this.image,15,c,d).detect();e=p[0],r=p[1],s=p[2],l=p[3]}catch{e=this.getFirstDifferent(new Wt(c+7,d-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Wt(c+7,d+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new Wt(c-7,d+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new Wt(c-7,d-7),!1,-1,-1).toResultPoint()}return c=We.round((e.getX()+l.getX()+r.getX()+s.getX())/4),d=We.round((e.getY()+l.getY()+r.getY()+s.getY())/4),new Wt(c,d)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,r,s,l,c){let d=lt.getInstance(),p=this.getDimension(),w=p/2-this.nbCenterLayers,E=p/2+this.nbCenterLayers;return d.sampleGrid(e,p,p,w,w,E,w,E,E,w,E,r.getX(),r.getY(),s.getX(),s.getY(),l.getX(),l.getY(),c.getX(),c.getY())}sampleLine(e,r,s){let l=0,c=this.distanceResultPoint(e,r),d=c/s,p=e.getX(),w=e.getY(),E=d*(r.getX()-e.getX())/c,R=d*(r.getY()-e.getY())/c;for(let P=0;P<s;P++)this.image.get(We.round(p+P*E),We.round(w+P*R))&&(l|=1<<s-P-1);return l}isWhiteOrBlackRectangle(e,r,s,l){let c=3;e=new Wt(e.getX()-c,e.getY()+c),r=new Wt(r.getX()-c,r.getY()-c),s=new Wt(s.getX()+c,s.getY()-c),l=new Wt(l.getX()+c,l.getY()+c);let d=this.getColor(l,e);if(d===0)return!1;let p=this.getColor(e,r);return p!==d||(p=this.getColor(r,s),p!==d)?!1:(p=this.getColor(s,l),p===d)}getColor(e,r){let s=this.distancePoint(e,r),l=(r.getX()-e.getX())/s,c=(r.getY()-e.getY())/s,d=0,p=e.getX(),w=e.getY(),E=this.image.get(e.getX(),e.getY()),R=Math.ceil(s);for(let D=0;D<R;D++)p+=l,w+=c,this.image.get(We.round(p),We.round(w))!==E&&d++;let P=d/s;return P>.1&&P<.9?0:P<=.1===E?1:-1}getFirstDifferent(e,r,s,l){let c=e.getX()+s,d=e.getY()+l;for(;this.isValid(c,d)&&this.image.get(c,d)===r;)c+=s,d+=l;for(c-=s,d-=l;this.isValid(c,d)&&this.image.get(c,d)===r;)c+=s;for(c-=s;this.isValid(c,d)&&this.image.get(c,d)===r;)d+=l;return d-=l,new Wt(c,d)}expandSquare(e,r,s){let l=s/(2*r),c=e[0].getX()-e[2].getX(),d=e[0].getY()-e[2].getY(),p=(e[0].getX()+e[2].getX())/2,w=(e[0].getY()+e[2].getY())/2,E=new Ie(p+l*c,w+l*d),R=new Ie(p-l*c,w-l*d);c=e[1].getX()-e[3].getX(),d=e[1].getY()-e[3].getY(),p=(e[1].getX()+e[3].getX())/2,w=(e[1].getY()+e[3].getY())/2;let P=new Ie(p+l*c,w+l*d),D=new Ie(p-l*c,w-l*d);return[E,P,R,D]}isValid(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()}isValidPoint(e){let r=We.round(e.getX()),s=We.round(e.getY());return this.isValid(r,s)}distancePoint(e,r){return We.distance(e.getX(),e.getY(),r.getX(),r.getY())}distanceResultPoint(e,r){return We.distance(e.getX(),e.getY(),r.getX(),r.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(F.truncDivision(this.nbLayers-4,8)+1)+15}}class at{decode(e,r=null){let s=null,l=new Qe(e.getBlackMatrix()),c=null,d=null;try{let R=l.detectMirror(!1);c=R.getPoints(),this.reportFoundResultPoints(r,c),d=new _e().decode(R)}catch(R){s=R}if(d==null)try{let R=l.detectMirror(!0);c=R.getPoints(),this.reportFoundResultPoints(r,c),d=new _e().decode(R)}catch(R){throw s??R}let p=new Ge(d.getText(),d.getRawBytes(),d.getNumBits(),c,te.AZTEC,B.currentTimeMillis()),w=d.getByteSegments();w!=null&&p.putMetadata(Pe.BYTE_SEGMENTS,w);let E=d.getECLevel();return E!=null&&p.putMetadata(Pe.ERROR_CORRECTION_LEVEL,E),p}reportFoundResultPoints(e,r){if(e!=null){let s=e.get(re.NEED_RESULT_POINT_CALLBACK);s!=null&&r.forEach((l,c,d)=>{s.foundPossibleResultPoint(l)})}}reset(){}}class qe extends Te{constructor(e=500){super(new at,e)}}class ve{decode(e,r){try{return this.doDecode(e,r)}catch{if(r&&r.get(re.TRY_HARDER)===!0&&e.isRotateSupported()){const c=e.rotateCounterClockwise(),d=this.doDecode(c,r),p=d.getResultMetadata();let w=270;p!==null&&p.get(Pe.ORIENTATION)===!0&&(w=w+p.get(Pe.ORIENTATION)%360),d.putMetadata(Pe.ORIENTATION,w);const E=d.getResultPoints();if(E!==null){const R=c.getHeight();for(let P=0;P<E.length;P++)E[P]=new Ie(R-E[P].getY()-1,E[P].getX())}return d}else throw new G}}reset(){}doDecode(e,r){const s=e.getWidth(),l=e.getHeight();let c=new $(s);const d=r&&r.get(re.TRY_HARDER)===!0,p=Math.max(1,l>>(d?8:5));let w;d?w=l:w=15;const E=Math.trunc(l/2);for(let R=0;R<w;R++){const P=Math.trunc((R+1)/2),D=(R&1)===0,W=E+p*(D?P:-P);if(W<0||W>=l)break;try{c=e.getBlackRow(W,c)}catch{continue}for(let K=0;K<2;K++){if(K===1&&(c.reverse(),r&&r.get(re.NEED_RESULT_POINT_CALLBACK)===!0)){const ee=new Map;r.forEach((oe,he)=>ee.set(he,oe)),ee.delete(re.NEED_RESULT_POINT_CALLBACK),r=ee}try{const ee=this.decodeRow(W,c,r);if(K===1){ee.putMetadata(Pe.ORIENTATION,180);const oe=ee.getResultPoints();oe!==null&&(oe[0]=new Ie(s-oe[0].getX()-1,oe[0].getY()),oe[1]=new Ie(s-oe[1].getX()-1,oe[1].getY()))}return ee}catch{}}}throw new G}static recordPattern(e,r,s){const l=s.length;for(let E=0;E<l;E++)s[E]=0;const c=e.getSize();if(r>=c)throw new G;let d=!e.get(r),p=0,w=r;for(;w<c;){if(e.get(w)!==d)s[p]++;else{if(++p===l)break;s[p]=1,d=!d}w++}if(!(p===l||p===l-1&&w===c))throw new G}static recordPatternInReverse(e,r,s){let l=s.length,c=e.get(r);for(;r>0&&l>=0;)e.get(--r)!==c&&(l--,c=!c);if(l>=0)throw new G;ve.recordPattern(e,r+1,s)}static patternMatchVariance(e,r,s){const l=e.length;let c=0,d=0;for(let E=0;E<l;E++)c+=e[E],d+=r[E];if(c<d)return Number.POSITIVE_INFINITY;const p=c/d;s*=p;let w=0;for(let E=0;E<l;E++){const R=e[E],P=r[E]*p,D=R>P?R-P:P-R;if(D>s)return Number.POSITIVE_INFINITY;w+=D}return w/c}}class se extends ve{static findStartPattern(e){const r=e.getSize(),s=e.getNextSet(0);let l=0,c=Int32Array.from([0,0,0,0,0,0]),d=s,p=!1;const w=6;for(let E=s;E<r;E++)if(e.get(E)!==p)c[l]++;else{if(l===w-1){let R=se.MAX_AVG_VARIANCE,P=-1;for(let D=se.CODE_START_A;D<=se.CODE_START_C;D++){const W=ve.patternMatchVariance(c,se.CODE_PATTERNS[D],se.MAX_INDIVIDUAL_VARIANCE);W<R&&(R=W,P=D)}if(P>=0&&e.isRange(Math.max(0,d-(E-d)/2),d,!1))return Int32Array.from([d,E,P]);d+=c[0]+c[1],c=c.slice(2,c.length-1),c[l-1]=0,c[l]=0,l--}else l++;c[l]=1,p=!p}throw new G}static decodeCode(e,r,s){ve.recordPattern(e,s,r);let l=se.MAX_AVG_VARIANCE,c=-1;for(let d=0;d<se.CODE_PATTERNS.length;d++){const p=se.CODE_PATTERNS[d],w=this.patternMatchVariance(r,p,se.MAX_INDIVIDUAL_VARIANCE);w<l&&(l=w,c=d)}if(c>=0)return c;throw new G}decodeRow(e,r,s){const l=s&&s.get(re.ASSUME_GS1)===!0,c=se.findStartPattern(r),d=c[2];let p=0;const w=new Uint8Array(20);w[p++]=d;let E;switch(d){case se.CODE_START_A:E=se.CODE_CODE_A;break;case se.CODE_START_B:E=se.CODE_CODE_B;break;case se.CODE_START_C:E=se.CODE_CODE_C;break;default:throw new X}let R=!1,P=!1,D="",W=c[0],K=c[1];const ee=Int32Array.from([0,0,0,0,0,0]);let oe=0,he=0,Fe=d,He=0,Me=!0,jt=!1,Tt=!1;for(;!R;){const ui=P;switch(P=!1,oe=he,he=se.decodeCode(r,ee,K),w[p++]=he,he!==se.CODE_STOP&&(Me=!0),he!==se.CODE_STOP&&(He++,Fe+=He*he),W=K,K+=ee.reduce((ls,da)=>ls+da,0),he){case se.CODE_START_A:case se.CODE_START_B:case se.CODE_START_C:throw new X}switch(E){case se.CODE_CODE_A:if(he<64)Tt===jt?D+=String.fromCharCode(32+he):D+=String.fromCharCode(32+he+128),Tt=!1;else if(he<96)Tt===jt?D+=String.fromCharCode(he-64):D+=String.fromCharCode(he+64),Tt=!1;else switch(he!==se.CODE_STOP&&(Me=!1),he){case se.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case se.CODE_FNC_2:case se.CODE_FNC_3:break;case se.CODE_FNC_4_A:!jt&&Tt?(jt=!0,Tt=!1):jt&&Tt?(jt=!1,Tt=!1):Tt=!0;break;case se.CODE_SHIFT:P=!0,E=se.CODE_CODE_B;break;case se.CODE_CODE_B:E=se.CODE_CODE_B;break;case se.CODE_CODE_C:E=se.CODE_CODE_C;break;case se.CODE_STOP:R=!0;break}break;case se.CODE_CODE_B:if(he<96)Tt===jt?D+=String.fromCharCode(32+he):D+=String.fromCharCode(32+he+128),Tt=!1;else switch(he!==se.CODE_STOP&&(Me=!1),he){case se.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case se.CODE_FNC_2:case se.CODE_FNC_3:break;case se.CODE_FNC_4_B:!jt&&Tt?(jt=!0,Tt=!1):jt&&Tt?(jt=!1,Tt=!1):Tt=!0;break;case se.CODE_SHIFT:P=!0,E=se.CODE_CODE_A;break;case se.CODE_CODE_A:E=se.CODE_CODE_A;break;case se.CODE_CODE_C:E=se.CODE_CODE_C;break;case se.CODE_STOP:R=!0;break}break;case se.CODE_CODE_C:if(he<100)he<10&&(D+="0"),D+=he;else switch(he!==se.CODE_STOP&&(Me=!1),he){case se.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case se.CODE_CODE_A:E=se.CODE_CODE_A;break;case se.CODE_CODE_B:E=se.CODE_CODE_B;break;case se.CODE_STOP:R=!0;break}break}ui&&(E=E===se.CODE_CODE_A?se.CODE_CODE_B:se.CODE_CODE_A)}const wr=K-W;if(K=r.getNextUnset(K),!r.isRange(K,Math.min(r.getSize(),K+(K-W)/2),!1))throw new G;if(Fe-=He*oe,Fe%103!==oe)throw new M;const Wr=D.length;if(Wr===0)throw new G;Wr>0&&Me&&(E===se.CODE_CODE_C?D=D.substring(0,Wr-2):D=D.substring(0,Wr-1));const Ln=(c[1]+c[0])/2,Kt=W+wr/2,bn=w.length,fr=new Uint8Array(bn);for(let ui=0;ui<bn;ui++)fr[ui]=w[ui];const ji=[new Ie(Ln,e),new Ie(Kt,e)];return new Ge(D,fr,0,ji,te.CODE_128,new Date().getTime())}}se.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],se.MAX_AVG_VARIANCE=.25,se.MAX_INDIVIDUAL_VARIANCE=.7,se.CODE_SHIFT=98,se.CODE_CODE_C=99,se.CODE_CODE_B=100,se.CODE_CODE_A=101,se.CODE_FNC_1=102,se.CODE_FNC_2=97,se.CODE_FNC_3=96,se.CODE_FNC_4_A=101,se.CODE_FNC_4_B=100,se.CODE_START_A=103,se.CODE_START_B=104,se.CODE_START_C=105,se.CODE_STOP=106;class et extends ve{constructor(e=!1,r=!1){super(),this.usingCheckDigit=e,this.extendedMode=r,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,r,s){let l=this.counters;l.fill(0),this.decodeRowResult="";let c=et.findAsteriskPattern(r,l),d=r.getNextSet(c[1]),p=r.getSize(),w,E;do{et.recordPattern(r,d,l);let ee=et.toNarrowWidePattern(l);if(ee<0)throw new G;w=et.patternToChar(ee),this.decodeRowResult+=w,E=d;for(let oe of l)d+=oe;d=r.getNextSet(d)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let R=0;for(let ee of l)R+=ee;let P=d-E-R;if(d!==p&&P*2<R)throw new G;if(this.usingCheckDigit){let ee=this.decodeRowResult.length-1,oe=0;for(let he=0;he<ee;he++)oe+=et.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(he));if(this.decodeRowResult.charAt(ee)!==et.ALPHABET_STRING.charAt(oe%43))throw new M;this.decodeRowResult=this.decodeRowResult.substring(0,ee)}if(this.decodeRowResult.length===0)throw new G;let D;this.extendedMode?D=et.decodeExtended(this.decodeRowResult):D=this.decodeRowResult;let W=(c[1]+c[0])/2,K=E+R/2;return new Ge(D,null,0,[new Ie(W,e),new Ie(K,e)],te.CODE_39,new Date().getTime())}static findAsteriskPattern(e,r){let s=e.getSize(),l=e.getNextSet(0),c=0,d=l,p=!1,w=r.length;for(let E=l;E<s;E++)if(e.get(E)!==p)r[c]++;else{if(c===w-1){if(this.toNarrowWidePattern(r)===et.ASTERISK_ENCODING&&e.isRange(Math.max(0,d-Math.floor((E-d)/2)),d,!1))return[d,E];d+=r[0]+r[1],r.copyWithin(0,2,2+c-1),r[c-1]=0,r[c]=0,c--}else c++;r[c]=1,p=!p}throw new G}static toNarrowWidePattern(e){let r=e.length,s=0,l;do{let c=2147483647;for(let w of e)w<c&&w>s&&(c=w);s=c,l=0;let d=0,p=0;for(let w=0;w<r;w++){let E=e[w];E>s&&(p|=1<<r-1-w,l++,d+=E)}if(l===3){for(let w=0;w<r&&l>0;w++){let E=e[w];if(E>s&&(l--,E*2>=d))return-1}return p}}while(l>3);return-1}static patternToChar(e){for(let r=0;r<et.CHARACTER_ENCODINGS.length;r++)if(et.CHARACTER_ENCODINGS[r]===e)return et.ALPHABET_STRING.charAt(r);if(e===et.ASTERISK_ENCODING)return"*";throw new G}static decodeExtended(e){let r=e.length,s="";for(let l=0;l<r;l++){let c=e.charAt(l);if(c==="+"||c==="$"||c==="%"||c==="/"){let d=e.charAt(l+1),p="\0";switch(c){case"+":if(d>="A"&&d<="Z")p=String.fromCharCode(d.charCodeAt(0)+32);else throw new X;break;case"$":if(d>="A"&&d<="Z")p=String.fromCharCode(d.charCodeAt(0)-64);else throw new X;break;case"%":if(d>="A"&&d<="E")p=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")p=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")p=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")p=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")p="\0";else if(d==="V")p="@";else if(d==="W")p="`";else if(d==="X"||d==="Y"||d==="Z")p="";else throw new X;break;case"/":if(d>="A"&&d<="O")p=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")p=":";else throw new X;break}s+=p,l++}else s+=c}return s}}et.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",et.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],et.ASTERISK_ENCODING=148;class nt extends ve{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,r,s){let l=this.decodeStart(r),c=this.decodeEnd(r),d=new De;nt.decodeMiddle(r,l[1],c[0],d);let p=d.toString(),w=null;s!=null&&(w=s.get(re.ALLOWED_LENGTHS)),w==null&&(w=nt.DEFAULT_ALLOWED_LENGTHS);let E=p.length,R=!1,P=0;for(let K of w){if(E===K){R=!0;break}K>P&&(P=K)}if(!R&&E>P&&(R=!0),!R)throw new X;const D=[new Ie(l[1],e),new Ie(c[0],e)];return new Ge(p,null,0,D,te.ITF,new Date().getTime())}static decodeMiddle(e,r,s,l){let c=new Int32Array(10),d=new Int32Array(5),p=new Int32Array(5);for(c.fill(0),d.fill(0),p.fill(0);r<s;){ve.recordPattern(e,r,c);for(let E=0;E<5;E++){let R=2*E;d[E]=c[R],p[E]=c[R+1]}let w=nt.decodeDigit(d);l.append(w.toString()),w=this.decodeDigit(p),l.append(w.toString()),c.forEach(function(E){r+=E})}}decodeStart(e){let r=nt.skipWhiteSpace(e),s=nt.findGuardPattern(e,r,nt.START_PATTERN);return this.narrowLineWidth=(s[1]-s[0])/4,this.validateQuietZone(e,s[0]),s}validateQuietZone(e,r){let s=this.narrowLineWidth*10;s=s<r?s:r;for(let l=r-1;s>0&&l>=0&&!e.get(l);l--)s--;if(s!==0)throw new G}static skipWhiteSpace(e){const r=e.getSize(),s=e.getNextSet(0);if(s===r)throw new G;return s}decodeEnd(e){e.reverse();try{let r=nt.skipWhiteSpace(e),s;try{s=nt.findGuardPattern(e,r,nt.END_PATTERN_REVERSED[0])}catch(c){c instanceof G&&(s=nt.findGuardPattern(e,r,nt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,s[0]);let l=s[0];return s[0]=e.getSize()-s[1],s[1]=e.getSize()-l,s}finally{e.reverse()}}static findGuardPattern(e,r,s){let l=s.length,c=new Int32Array(l),d=e.getSize(),p=!1,w=0,E=r;c.fill(0);for(let R=r;R<d;R++)if(e.get(R)!==p)c[w]++;else{if(w===l-1){if(ve.patternMatchVariance(c,s,nt.MAX_INDIVIDUAL_VARIANCE)<nt.MAX_AVG_VARIANCE)return[E,R];E+=c[0]+c[1],B.arraycopy(c,2,c,0,w-1),c[w-1]=0,c[w]=0,w--}else w++;c[w]=1,p=!p}throw new G}static decodeDigit(e){let r=nt.MAX_AVG_VARIANCE,s=-1,l=nt.PATTERNS.length;for(let c=0;c<l;c++){let d=nt.PATTERNS[c],p=ve.patternMatchVariance(e,d,nt.MAX_INDIVIDUAL_VARIANCE);p<r?(r=p,s=c):p===r&&(s=-1)}if(s>=0)return s%10;throw new G}}nt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],nt.MAX_AVG_VARIANCE=.38,nt.MAX_INDIVIDUAL_VARIANCE=.5,nt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],nt.START_PATTERN=Int32Array.from([1,1,1,1]),nt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class ht extends ve{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let r=!1,s,l=0,c=Int32Array.from([0,0,0]);for(;!r;){c=Int32Array.from([0,0,0]),s=ht.findGuardPattern(e,l,!1,this.START_END_PATTERN,c);let d=s[0];l=s[1];let p=d-(l-d);p>=0&&(r=e.isRange(p,d,!1))}return s}static checkChecksum(e){return ht.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let r=e.length;if(r===0)return!1;let s=parseInt(e.charAt(r-1),10);return ht.getStandardUPCEANChecksum(e.substring(0,r-1))===s}static getStandardUPCEANChecksum(e){let r=e.length,s=0;for(let l=r-1;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new X;s+=c}s*=3;for(let l=r-2;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new X;s+=c}return(1e3-s)%10}static decodeEnd(e,r){return ht.findGuardPattern(e,r,!1,ht.START_END_PATTERN,new Int32Array(ht.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,r,s,l){return this.findGuardPattern(e,r,s,l,new Int32Array(l.length))}static findGuardPattern(e,r,s,l,c){let d=e.getSize();r=s?e.getNextUnset(r):e.getNextSet(r);let p=0,w=r,E=l.length,R=s;for(let P=r;P<d;P++)if(e.get(P)!==R)c[p]++;else{if(p===E-1){if(ve.patternMatchVariance(c,l,ht.MAX_INDIVIDUAL_VARIANCE)<ht.MAX_AVG_VARIANCE)return Int32Array.from([w,P]);w+=c[0]+c[1];let D=c.slice(2,c.length-1);for(let W=0;W<p-1;W++)c[W]=D[W];c[p-1]=0,c[p]=0,p--}else p++;c[p]=1,R=!R}throw new G}static decodeDigit(e,r,s,l){this.recordPattern(e,s,r);let c=this.MAX_AVG_VARIANCE,d=-1,p=l.length;for(let w=0;w<p;w++){let E=l[w],R=ve.patternMatchVariance(r,E,ht.MAX_INDIVIDUAL_VARIANCE);R<c&&(c=R,d=w)}if(d>=0)return d;throw new G}}ht.MAX_AVG_VARIANCE=.48,ht.MAX_INDIVIDUAL_VARIANCE=.7,ht.START_END_PATTERN=Int32Array.from([1,1,1]),ht.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),ht.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ht.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Qt{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,r,s){let l=this.decodeRowStringBuffer,c=this.decodeMiddle(r,s,l),d=l.toString(),p=Qt.parseExtensionString(d),w=[new Ie((s[0]+s[1])/2,e),new Ie(c,e)],E=new Ge(d,null,0,w,te.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&E.putAllMetadata(p),E}decodeMiddle(e,r,s){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),d=r[1],p=0;for(let E=0;E<5&&d<c;E++){let R=ht.decodeDigit(e,l,d,ht.L_AND_G_PATTERNS);s+=String.fromCharCode(48+R%10);for(let P of l)d+=P;R>=10&&(p|=1<<4-E),E!==4&&(d=e.getNextSet(d),d=e.getNextUnset(d))}if(s.length!==5)throw new G;let w=this.determineCheckDigit(p);if(Qt.extensionChecksum(s.toString())!==w)throw new G;return d}static extensionChecksum(e){let r=e.length,s=0;for(let l=r-2;l>=0;l-=2)s+=e.charAt(l).charCodeAt(0)-48;s*=3;for(let l=r-1;l>=0;l-=2)s+=e.charAt(l).charCodeAt(0)-48;return s*=3,s%10}determineCheckDigit(e){for(let r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new G}static parseExtensionString(e){if(e.length!==5)return null;let r=Qt.parseExtension5String(e);return r==null?null:new Map([[Pe.SUGGESTED_PRICE,r]])}static parseExtension5String(e){let r;switch(e.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}let s=parseInt(e.substring(1)),l=(s/100).toString(),c=s%100,d=c<10?"0"+c:c.toString();return r+l+"."+d}}class dn{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,r,s){let l=this.decodeRowStringBuffer,c=this.decodeMiddle(r,s,l),d=l.toString(),p=dn.parseExtensionString(d),w=[new Ie((s[0]+s[1])/2,e),new Ie(c,e)],E=new Ge(d,null,0,w,te.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&E.putAllMetadata(p),E}decodeMiddle(e,r,s){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),d=r[1],p=0;for(let w=0;w<2&&d<c;w++){let E=ht.decodeDigit(e,l,d,ht.L_AND_G_PATTERNS);s+=String.fromCharCode(48+E%10);for(let R of l)d+=R;E>=10&&(p|=1<<1-w),w!==1&&(d=e.getNextSet(d),d=e.getNextUnset(d))}if(s.length!==2)throw new G;if(parseInt(s.toString())%4!==p)throw new G;return d}static parseExtensionString(e){return e.length!==2?null:new Map([[Pe.ISSUE_NUMBER,parseInt(e)]])}}class fn{static decodeRow(e,r,s){let l=ht.findGuardPattern(r,s,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Qt().decodeRow(e,r,l)}catch{return new dn().decodeRow(e,r,l)}}}fn.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ue extends ht{constructor(){super(),this.decodeRowStringBuffer="",Ue.L_AND_G_PATTERNS=Ue.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let r=Ue.L_PATTERNS[e-10],s=new Int32Array(r.length);for(let l=0;l<r.length;l++)s[l]=r[r.length-l-1];Ue.L_AND_G_PATTERNS[e]=s}}decodeRow(e,r,s){let l=Ue.findStartGuardPattern(r),c=s==null?null:s.get(re.NEED_RESULT_POINT_CALLBACK);if(c!=null){const Me=new Ie((l[0]+l[1])/2,e);c.foundPossibleResultPoint(Me)}let d=this.decodeMiddle(r,l,this.decodeRowStringBuffer),p=d.rowOffset,w=d.resultString;if(c!=null){const Me=new Ie(p,e);c.foundPossibleResultPoint(Me)}let E=this.decodeEnd(r,p);if(c!=null){const Me=new Ie((E[0]+E[1])/2,e);c.foundPossibleResultPoint(Me)}let R=E[1],P=R+(R-E[0]);if(P>=r.getSize()||!r.isRange(R,P,!1))throw new G;let D=w.toString();if(D.length<8)throw new X;if(!Ue.checkChecksum(D))throw new M;let W=(l[1]+l[0])/2,K=(E[1]+E[0])/2,ee=this.getBarcodeFormat(),oe=[new Ie(W,e),new Ie(K,e)],he=new Ge(D,null,0,oe,ee,new Date().getTime()),Fe=0;try{let Me=fn.decodeRow(e,r,E[1]);he.putMetadata(Pe.UPC_EAN_EXTENSION,Me.getText()),he.putAllMetadata(Me.getResultMetadata()),he.addResultPoints(Me.getResultPoints()),Fe=Me.getText().length}catch{}let He=s==null?null:s.get(re.ALLOWED_EAN_EXTENSIONS);if(He!=null){let Me=!1;for(let jt in He)if(Fe.toString()===jt){Me=!0;break}if(!Me)throw new G}return he}decodeEnd(e,r){return Ue.findGuardPattern(e,r,!1,Ue.START_END_PATTERN,new Int32Array(Ue.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return Ue.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let r=e.length;if(r===0)return!1;let s=parseInt(e.charAt(r-1),10);return Ue.getStandardUPCEANChecksum(e.substring(0,r-1))===s}static getStandardUPCEANChecksum(e){let r=e.length,s=0;for(let l=r-1;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new X;s+=c}s*=3;for(let l=r-2;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new X;s+=c}return(1e3-s)%10}}class hn extends Ue{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,r,s){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),d=r[1],p=0;for(let E=0;E<6&&d<c;E++){let R=Ue.decodeDigit(e,l,d,Ue.L_AND_G_PATTERNS);s+=String.fromCharCode(48+R%10);for(let P of l)d+=P;R>=10&&(p|=1<<5-E)}s=hn.determineFirstDigit(s,p),d=Ue.findGuardPattern(e,d,!0,Ue.MIDDLE_PATTERN,new Int32Array(Ue.MIDDLE_PATTERN.length).fill(0))[1];for(let E=0;E<6&&d<c;E++){let R=Ue.decodeDigit(e,l,d,Ue.L_PATTERNS);s+=String.fromCharCode(48+R);for(let P of l)d+=P}return{rowOffset:d,resultString:s}}getBarcodeFormat(){return te.EAN_13}static determineFirstDigit(e,r){for(let s=0;s<10;s++)if(r===this.FIRST_DIGIT_ENCODINGS[s])return e=String.fromCharCode(48+s)+e,e;throw new G}}hn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Gn extends Ue{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,r,s){const l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),d=r[1];for(let w=0;w<4&&d<c;w++){let E=Ue.decodeDigit(e,l,d,Ue.L_PATTERNS);s+=String.fromCharCode(48+E);for(let R of l)d+=R}d=Ue.findGuardPattern(e,d,!0,Ue.MIDDLE_PATTERN,new Int32Array(Ue.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<4&&d<c;w++){let E=Ue.decodeDigit(e,l,d,Ue.L_PATTERNS);s+=String.fromCharCode(48+E);for(let R of l)d+=R}return{rowOffset:d,resultString:s}}getBarcodeFormat(){return te.EAN_8}}class Yr extends Ue{constructor(){super(...arguments),this.ean13Reader=new hn}getBarcodeFormat(){return te.UPC_A}decode(e,r){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,r,s){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,r,s))}decodeMiddle(e,r,s){return this.ean13Reader.decodeMiddle(e,r,s)}maybeReturnResult(e){let r=e.getText();if(r.charAt(0)==="0"){let s=new Ge(r.substring(1),null,null,e.getResultPoints(),te.UPC_A);return e.getResultMetadata()!=null&&s.putAllMetadata(e.getResultMetadata()),s}else throw new G}reset(){this.ean13Reader.reset()}}class Vn extends Ue{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,r,s){const l=this.decodeMiddleCounters.map(E=>E);l[0]=0,l[1]=0,l[2]=0,l[3]=0;const c=e.getSize();let d=r[1],p=0;for(let E=0;E<6&&d<c;E++){const R=Vn.decodeDigit(e,l,d,Vn.L_AND_G_PATTERNS);s+=String.fromCharCode(48+R%10);for(let P of l)d+=P;R>=10&&(p|=1<<5-E)}let w=Vn.determineNumSysAndCheckDigit(s,p);return{rowOffset:d,resultString:w}}decodeEnd(e,r){return Vn.findGuardPatternWithoutCounters(e,r,!0,Vn.MIDDLE_END_PATTERN)}checkChecksum(e){return Ue.checkChecksum(Vn.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,r){for(let s=0;s<=1;s++)for(let l=0;l<10;l++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[s][l]){let c=String.fromCharCode(48+s),d=String.fromCharCode(48+l);return c+e+d}throw G.getNotFoundInstance()}getBarcodeFormat(){return te.UPC_E}static convertUPCEtoUPCA(e){const r=e.slice(1,7).split("").map(c=>c.charCodeAt(0)),s=new De;s.append(e.charAt(0));let l=r[5];switch(l){case 0:case 1:case 2:s.appendChars(r,0,2),s.append(l),s.append("0000"),s.appendChars(r,2,3);break;case 3:s.appendChars(r,0,3),s.append("00000"),s.appendChars(r,3,2);break;case 4:s.appendChars(r,0,4),s.append("00000"),s.append(r[4]);break;default:s.appendChars(r,0,5),s.append("0000"),s.append(l);break}return e.length>=8&&s.append(e.charAt(7)),s.toString()}}Vn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Vn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Qi extends ve{constructor(e){super();let r=e==null?null:e.get(re.POSSIBLE_FORMATS),s=[];u(r)?(s.push(new hn),s.push(new Yr),s.push(new Gn),s.push(new Vn)):(r.indexOf(te.EAN_13)>-1&&s.push(new hn),r.indexOf(te.UPC_A)>-1&&s.push(new Yr),r.indexOf(te.EAN_8)>-1&&s.push(new Gn),r.indexOf(te.UPC_E)>-1&&s.push(new Vn)),this.readers=s}decodeRow(e,r,s){for(let l of this.readers)try{const c=l.decodeRow(e,r,s),d=c.getBarcodeFormat()===te.EAN_13&&c.getText().charAt(0)==="0",p=s==null?null:s.get(re.POSSIBLE_FORMATS),w=p==null||p.includes(te.UPC_A);if(d&&w){const E=c.getRawBytes(),R=new Ge(c.getText().substring(1),E,E?E.length:null,c.getResultPoints(),te.UPC_A);return R.putAllMetadata(c.getResultMetadata()),R}return c}catch{}throw new G}reset(){for(let e of this.readers)e.reset()}}class yn extends ve{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,r){for(let s=0;s<r.length;s++)if(ve.patternMatchVariance(e,r[s],yn.MAX_INDIVIDUAL_VARIANCE)<yn.MAX_AVG_VARIANCE)return s;throw new G}static count(e){return We.sum(new Int32Array(e))}static increment(e,r){let s=0,l=r[0];for(let c=1;c<e.length;c++)r[c]>l&&(l=r[c],s=c);e[s]++}static decrement(e,r){let s=0,l=r[0];for(let c=1;c<e.length;c++)r[c]<l&&(l=r[c],s=c);e[s]--}static isFinderPattern(e){let r=e[0]+e[1],s=r+e[2]+e[3],l=r/s;if(l>=yn.MIN_FINDER_PATTERN_RATIO&&l<=yn.MAX_FINDER_PATTERN_RATIO){let c=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;for(let p of e)p>d&&(d=p),p<c&&(c=p);return d<10*c}return!1}}yn.MAX_AVG_VARIANCE=.2,yn.MAX_INDIVIDUAL_VARIANCE=.45,yn.MIN_FINDER_PATTERN_RATIO=9.5/12,yn.MAX_FINDER_PATTERN_RATIO=12.5/14;class $r{constructor(e,r){this.value=e,this.checksumPortion=r}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof $r))return!1;const r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class si{constructor(e,r,s,l,c){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new Ie(s,c)),this.resultPoints.push(new Ie(l,c))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof si))return!1;const r=e;return this.value===r.value}hashCode(){return this.value}}class Un{constructor(){}static getRSSvalue(e,r,s){let l=0;for(let w of e)l+=w;let c=0,d=0,p=e.length;for(let w=0;w<p-1;w++){let E;for(E=1,d|=1<<w;E<e[w];E++,d&=~(1<<w)){let R=Un.combins(l-E-1,p-w-2);if(s&&d===0&&l-E-(p-w-1)>=p-w-1&&(R-=Un.combins(l-E-(p-w),p-w-2)),p-w-1>1){let P=0;for(let D=l-E-(p-w-2);D>r;D--)P+=Un.combins(l-E-D-1,p-w-3);R-=P*(p-1-w)}else l-E>r&&R--;c+=R}l-=E}return c}static combins(e,r){let s,l;e-r>r?(l=r,s=e-r):(l=e-r,s=r);let c=1,d=1;for(let p=e;p>s;p--)c*=p,d<=l&&(c/=d,d++);for(;d<=l;)c/=d,d++;return c}}class ki{static buildBitArray(e){let r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);let s=12*r,l=new $(s),c=0,p=e[0].getRightChar().getValue();for(let w=11;w>=0;--w)p&1<<w&&l.set(c),c++;for(let w=1;w<e.length;++w){let E=e[w],R=E.getLeftChar().getValue();for(let P=11;P>=0;--P)R&1<<P&&l.set(c),c++;if(E.getRightChar()!=null){let P=E.getRightChar().getValue();for(let D=11;D>=0;--D)P&1<<D&&l.set(c),c++}}return l}}class wn{constructor(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Ji{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class Jt extends Ji{constructor(e,r){super(e),this.value=r}getValue(){return this.value}isFNC1(){return this.value===Jt.FNC1}}Jt.FNC1="$";class Sr extends Ji{constructor(e,r,s){super(e),s?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=r}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class qt extends Ji{constructor(e,r,s){if(super(e),r<0||r>10||s<0||s>10)throw new X;this.firstDigit=r,this.secondDigit=s}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===qt.FNC1}isSecondDigitFNC1(){return this.secondDigit===qt.FNC1}isAnyFNC1(){return this.firstDigit===qt.FNC1||this.secondDigit===qt.FNC1}}qt.FNC1=10;class Je{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new G;let r=e.substring(0,2);for(let c of Je.TWO_DIGIT_DATA_LENGTH)if(c[0]===r)return c[1]===Je.VARIABLE_LENGTH?Je.processVariableAI(2,c[2],e):Je.processFixedAI(2,c[1],e);if(e.length<3)throw new G;let s=e.substring(0,3);for(let c of Je.THREE_DIGIT_DATA_LENGTH)if(c[0]===s)return c[1]===Je.VARIABLE_LENGTH?Je.processVariableAI(3,c[2],e):Je.processFixedAI(3,c[1],e);for(let c of Je.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(c[0]===s)return c[1]===Je.VARIABLE_LENGTH?Je.processVariableAI(4,c[2],e):Je.processFixedAI(4,c[1],e);if(e.length<4)throw new G;let l=e.substring(0,4);for(let c of Je.FOUR_DIGIT_DATA_LENGTH)if(c[0]===l)return c[1]===Je.VARIABLE_LENGTH?Je.processVariableAI(4,c[2],e):Je.processFixedAI(4,c[1],e);throw new G}static processFixedAI(e,r,s){if(s.length<e)throw new G;let l=s.substring(0,e);if(s.length<e+r)throw new G;let c=s.substring(e,e+r),d=s.substring(e+r),p="("+l+")"+c,w=Je.parseFieldsInGeneralPurpose(d);return w==null?p:p+w}static processVariableAI(e,r,s){let l=s.substring(0,e),c;s.length<e+r?c=s.length:c=e+r;let d=s.substring(e,c),p=s.substring(c),w="("+l+")"+d,E=Je.parseFieldsInGeneralPurpose(p);return E==null?w:w+E}}Je.VARIABLE_LENGTH=[],Je.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Je.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Je.VARIABLE_LENGTH,20],["22",Je.VARIABLE_LENGTH,29],["30",Je.VARIABLE_LENGTH,8],["37",Je.VARIABLE_LENGTH,8],["90",Je.VARIABLE_LENGTH,30],["91",Je.VARIABLE_LENGTH,30],["92",Je.VARIABLE_LENGTH,30],["93",Je.VARIABLE_LENGTH,30],["94",Je.VARIABLE_LENGTH,30],["95",Je.VARIABLE_LENGTH,30],["96",Je.VARIABLE_LENGTH,30],["97",Je.VARIABLE_LENGTH,3],["98",Je.VARIABLE_LENGTH,30],["99",Je.VARIABLE_LENGTH,30]],Je.THREE_DIGIT_DATA_LENGTH=[["240",Je.VARIABLE_LENGTH,30],["241",Je.VARIABLE_LENGTH,30],["242",Je.VARIABLE_LENGTH,6],["250",Je.VARIABLE_LENGTH,30],["251",Je.VARIABLE_LENGTH,30],["253",Je.VARIABLE_LENGTH,17],["254",Je.VARIABLE_LENGTH,20],["400",Je.VARIABLE_LENGTH,30],["401",Je.VARIABLE_LENGTH,30],["402",17],["403",Je.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Je.VARIABLE_LENGTH,20],["421",Je.VARIABLE_LENGTH,15],["422",3],["423",Je.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Je.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Je.VARIABLE_LENGTH,15],["391",Je.VARIABLE_LENGTH,18],["392",Je.VARIABLE_LENGTH,15],["393",Je.VARIABLE_LENGTH,18],["703",Je.VARIABLE_LENGTH,30]],Je.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Je.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Je.VARIABLE_LENGTH,20],["8003",Je.VARIABLE_LENGTH,30],["8004",Je.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Je.VARIABLE_LENGTH,30],["8008",Je.VARIABLE_LENGTH,12],["8018",18],["8020",Je.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Je.VARIABLE_LENGTH,70],["8200",Je.VARIABLE_LENGTH,70]];class Pn{constructor(e){this.buffer=new De,this.information=e}decodeAllCodes(e,r){let s=r,l=null;do{let c=this.decodeGeneralPurposeField(s,l),d=Je.parseFieldsInGeneralPurpose(c.getNewString());if(d!=null&&e.append(d),c.isRemaining()?l=""+c.getRemainingValue():l=null,s===c.getNewPosition())break;s=c.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let c=this.extractNumericValueFromBitArray(e,4);return c===0?new qt(this.information.getSize(),qt.FNC1,qt.FNC1):new qt(this.information.getSize(),c-1,qt.FNC1)}let r=this.extractNumericValueFromBitArray(e,7),s=(r-8)/11,l=(r-8)%11;return new qt(e+7,s,l)}extractNumericValueFromBitArray(e,r){return Pn.extractNumericValueFromBitArray(this.information,e,r)}static extractNumericValueFromBitArray(e,r,s){let l=0;for(let c=0;c<s;++c)e.get(r+c)&&(l|=1<<s-c-1);return l}decodeGeneralPurposeField(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);let s=this.parseBlocks();return s!=null&&s.isRemaining()?new Sr(this.current.getPosition(),this.buffer.toString(),s.getRemainingValue()):new Sr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,r;do{let s=this.current.getPosition();if(this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished()),!(s!==this.current.getPosition())&&!e)break}while(!e);return r.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let r;return e.isSecondDigitFNC1()?r=new Sr(this.current.getPosition(),this.buffer.toString()):r=new Sr(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new wn(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let r=new Sr(this.current.getPosition(),this.buffer.toString());return new wn(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new wn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let r=new Sr(this.current.getPosition(),this.buffer.toString());return new wn(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new wn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let r=new Sr(this.current.getPosition(),this.buffer.toString());return new wn(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new wn(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(e,7);if(s>=64&&s<116)return!0;if(e+8>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(e,8);return l>=232&&l<253}decodeIsoIec646(e){let r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new Jt(e+5,Jt.FNC1);if(r>=5&&r<15)return new Jt(e+5,"0"+(r-5));let s=this.extractNumericValueFromBitArray(e,7);if(s>=64&&s<90)return new Jt(e+7,""+(s+1));if(s>=90&&s<116)return new Jt(e+7,""+(s+7));let l=this.extractNumericValueFromBitArray(e,8),c;switch(l){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new X}return new Jt(e+8,c)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(e,6);return s>=16&&s<63}decodeAlphanumeric(e){let r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new Jt(e+5,Jt.FNC1);if(r>=5&&r<15)return new Jt(e+5,"0"+(r-5));let s=this.extractNumericValueFromBitArray(e,6);if(s>=32&&s<58)return new Jt(e+6,""+(s+33));let l;switch(s){case 58:l="*";break;case 59:l=",";break;case 60:l="-";break;case 61:l=".";break;case 62:l="/";break;default:throw new Ze("Decoding invalid alphanumeric value: "+s)}return new Jt(e+6,l)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0}}class es{constructor(e){this.information=e,this.generalDecoder=new Pn(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Xn extends es{constructor(e){super(e)}encodeCompressedGtin(e,r){e.append("(01)");let s=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,r,s)}encodeCompressedGtinWithoutAI(e,r,s){for(let l=0;l<4;++l){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*l,10);c/100===0&&e.append("0"),c/10===0&&e.append("0"),e.append(c)}Xn.appendCheckDigit(e,s)}static appendCheckDigit(e,r){let s=0;for(let l=0;l<13;l++){let c=e.charAt(l+r).charCodeAt(0)-48;s+=l&1?c:3*c}s=10-s%10,s===10&&(s=0),e.append(s)}}Xn.GTIN_SIZE=40;class xr extends Xn{constructor(e){super(e)}parseInformation(){let e=new De;e.append("(01)");let r=e.length(),s=this.getGeneralDecoder().extractNumericValueFromBitArray(xr.HEADER_SIZE,4);return e.append(s),this.encodeCompressedGtinWithoutAI(e,xr.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(e,xr.HEADER_SIZE+44)}}xr.HEADER_SIZE=4;class oi extends es{constructor(e){super(e)}parseInformation(){let e=new De;return this.getGeneralDecoder().decodeAllCodes(e,oi.HEADER_SIZE)}}oi.HEADER_SIZE=5;class Ar extends Xn{constructor(e){super(e)}encodeCompressedWeight(e,r,s){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(r,s);this.addWeightCode(e,l);let c=this.checkWeight(l),d=1e5;for(let p=0;p<5;++p)c/d===0&&e.append("0"),d/=10;e.append(c)}}class nr extends Ar{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=nr.HEADER_SIZE+Ar.GTIN_SIZE+nr.WEIGHT_SIZE)throw new G;let e=new De;return this.encodeCompressedGtin(e,nr.HEADER_SIZE),this.encodeCompressedWeight(e,nr.HEADER_SIZE+Ar.GTIN_SIZE,nr.WEIGHT_SIZE),e.toString()}}nr.HEADER_SIZE=5,nr.WEIGHT_SIZE=15;class Jo extends nr{constructor(e){super(e)}addWeightCode(e,r){e.append("(3103)")}checkWeight(e){return e}}class Rs extends nr{constructor(e){super(e)}addWeightCode(e,r){r<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class Yn extends Xn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Yn.HEADER_SIZE+Xn.GTIN_SIZE)throw new G;let e=new De;this.encodeCompressedGtin(e,Yn.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(Yn.HEADER_SIZE+Xn.GTIN_SIZE,Yn.LAST_DIGIT_SIZE);e.append("(392"),e.append(r),e.append(")");let s=this.getGeneralDecoder().decodeGeneralPurposeField(Yn.HEADER_SIZE+Xn.GTIN_SIZE+Yn.LAST_DIGIT_SIZE,null);return e.append(s.getNewString()),e.toString()}}Yn.HEADER_SIZE=8,Yn.LAST_DIGIT_SIZE=2;class $n extends Xn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<$n.HEADER_SIZE+Xn.GTIN_SIZE)throw new G;let e=new De;this.encodeCompressedGtin(e,$n.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray($n.HEADER_SIZE+Xn.GTIN_SIZE,$n.LAST_DIGIT_SIZE);e.append("(393"),e.append(r),e.append(")");let s=this.getGeneralDecoder().extractNumericValueFromBitArray($n.HEADER_SIZE+Xn.GTIN_SIZE+$n.LAST_DIGIT_SIZE,$n.FIRST_THREE_DIGITS_SIZE);s/100==0&&e.append("0"),s/10==0&&e.append("0"),e.append(s);let l=this.getGeneralDecoder().decodeGeneralPurposeField($n.HEADER_SIZE+Xn.GTIN_SIZE+$n.LAST_DIGIT_SIZE+$n.FIRST_THREE_DIGITS_SIZE,null);return e.append(l.getNewString()),e.toString()}}$n.HEADER_SIZE=8,$n.LAST_DIGIT_SIZE=2,$n.FIRST_THREE_DIGITS_SIZE=10;class rn extends Ar{constructor(e,r,s){super(e),this.dateCode=s,this.firstAIdigits=r}parseInformation(){if(this.getInformation().getSize()!=rn.HEADER_SIZE+rn.GTIN_SIZE+rn.WEIGHT_SIZE+rn.DATE_SIZE)throw new G;let e=new De;return this.encodeCompressedGtin(e,rn.HEADER_SIZE),this.encodeCompressedWeight(e,rn.HEADER_SIZE+rn.GTIN_SIZE,rn.WEIGHT_SIZE),this.encodeCompressedDate(e,rn.HEADER_SIZE+rn.GTIN_SIZE+rn.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,r){let s=this.getGeneralDecoder().extractNumericValueFromBitArray(r,rn.DATE_SIZE);if(s==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let l=s%32;s/=32;let c=s%12+1;s/=12;let d=s;d/10==0&&e.append("0"),e.append(d),c/10==0&&e.append("0"),e.append(c),l/10==0&&e.append("0"),e.append(l)}addWeightCode(e,r){e.append("("),e.append(this.firstAIdigits),e.append(r/1e5),e.append(")")}checkWeight(e){return e%1e5}}rn.HEADER_SIZE=8,rn.WEIGHT_SIZE=20,rn.DATE_SIZE=16;function ks(k){try{if(k.get(1))return new xr(k);if(!k.get(2))return new oi(k);switch(Pn.extractNumericValueFromBitArray(k,1,4)){case 4:return new Jo(k);case 5:return new Rs(k)}switch(Pn.extractNumericValueFromBitArray(k,1,5)){case 12:return new Yn(k);case 13:return new $n(k)}switch(Pn.extractNumericValueFromBitArray(k,1,7)){case 56:return new rn(k,"310","11");case 57:return new rn(k,"320","11");case 58:return new rn(k,"310","13");case 59:return new rn(k,"320","13");case 60:return new rn(k,"310","15");case 61:return new rn(k,"320","15");case 62:return new rn(k,"310","17");case 63:return new rn(k,"320","17")}}catch(e){throw console.log(e),new Ze("unknown decoder: "+k)}}class Xt{constructor(e,r,s,l){this.leftchar=e,this.rightchar=r,this.finderpattern=s,this.maybeLast=l}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,r){return e instanceof Xt?Xt.equalsOrNull(e.leftchar,r.leftchar)&&Xt.equalsOrNull(e.rightchar,r.rightchar)&&Xt.equalsOrNull(e.finderpattern,r.finderpattern):!1}static equalsOrNull(e,r){return e===null?r===null:Xt.equals(e,r)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ps{constructor(e,r,s){this.pairs=e,this.rowNumber=r,this.wasReversed=s}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,r){return e instanceof Ps?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1}checkEqualitity(e,r){if(!e||!r)return;let s;return e.forEach((l,c)=>{r.forEach(d=>{l.getLeftChar().getValue()===d.getLeftChar().getValue()&&l.getRightChar().getValue()===d.getRightChar().getValue()&&l.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(s=!0)})}),s}}class Se extends yn{constructor(e){super(...arguments),this.pairs=new Array(Se.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,r,s){this.pairs.length=0,this.startFromEven=!1;try{return Se.constructResult(this.decodeRow2pairs(e,r))}catch(l){this.verbose&&console.log(l)}return this.pairs.length=0,this.startFromEven=!0,Se.constructResult(this.decodeRow2pairs(e,r))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,r){let s=!1;for(;!s;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,e))}catch(c){if(c instanceof G){if(!this.pairs.length)throw new G;s=!0}}if(this.checkChecksum())return this.pairs;let l;if(this.rows.length?l=!0:l=!1,this.storeRow(e,!1),l){let c=this.checkRowsBoolean(!1);if(c!=null||(c=this.checkRowsBoolean(!0),c!=null))return c}throw new G}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let r=null;try{r=this.checkRows(new Array,0)}catch(s){this.verbose&&console.log(s)}return e&&(this.rows=this.rows.reverse()),r}checkRows(e,r){for(let s=r;s<this.rows.length;s++){let l=this.rows[s];this.pairs.length=0;for(let d of e)this.pairs.push(d.getPairs());if(this.pairs.push(l.getPairs()),!Se.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let c=new Array(e);c.push(l);try{return this.checkRows(c,s+1)}catch(d){this.verbose&&console.log(d)}}throw new G}static isValidSequence(e){for(let r of Se.FINDER_PATTERN_SEQUENCES){if(e.length>r.length)continue;let s=!0;for(let l=0;l<e.length;l++)if(e[l].getFinderPattern().getValue()!=r[l]){s=!1;break}if(s)return!0}return!1}storeRow(e,r){let s=0,l=!1,c=!1;for(;s<this.rows.length;){let d=this.rows[s];if(d.getRowNumber()>e){c=d.isEquivalent(this.pairs);break}l=d.isEquivalent(this.pairs),s++}c||l||Se.isPartialRow(this.pairs,this.rows)||(this.rows.push(s,new Ps(this.pairs,e,r)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,r){for(let s of r)if(s.getPairs().length!==e.length){for(let l of s.getPairs())for(let c of e)if(Xt.equals(l,c))break}}static isPartialRow(e,r){for(let s of r){let l=!0;for(let c of e){let d=!1;for(let p of s.getPairs())if(c.equals(p)){d=!0;break}if(!d){l=!1;break}}if(l)return!0}return!1}getRows(){return this.rows}static constructResult(e){let r=ki.buildBitArray(e),l=ks(r).parseInformation(),c=e[0].getFinderPattern().getResultPoints(),d=e[e.length-1].getFinderPattern().getResultPoints(),p=[c[0],c[1],d[0],d[1]];return new Ge(l,null,null,p,te.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),r=e.getLeftChar(),s=e.getRightChar();if(s==null)return!1;let l=s.getChecksumPortion(),c=2;for(let p=1;p<this.pairs.size();++p){let w=this.pairs.get(p);l+=w.getLeftChar().getChecksumPortion(),c++;let E=w.getRightChar();E!=null&&(l+=E.getChecksumPortion(),c++)}return l%=211,211*(c-4)+l==r.getValue()}static getNextSecondBar(e,r){let s;return e.get(r)?(s=e.getNextUnset(r),s=e.getNextSet(s)):(s=e.getNextSet(r),s=e.getNextUnset(s)),s}retrieveNextPair(e,r,s){let l=r.length%2==0;this.startFromEven&&(l=!l);let c,d=!0,p=-1;do this.findNextPair(e,r,p),c=this.parseFoundFinderPattern(e,s,l),c==null?p=Se.getNextSecondBar(e,this.startEnd[0]):d=!1;while(d);let w=this.decodeDataCharacter(e,c,l,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new G;let E;try{E=this.decodeDataCharacter(e,c,l,!1)}catch(R){E=null,this.verbose&&console.log(R)}return new Xt(w,E,c,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,r,s){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),d;s>=0?d=s:this.isEmptyPair(r)?d=0:d=r[r.length-1].getFinderPattern().getStartEnd()[1];let p=r.length%2!=0;this.startFromEven&&(p=!p);let w=!1;for(;d<c&&(w=!e.get(d),!!w);)d++;let E=0,R=d;for(let P=d;P<c;P++)if(e.get(P)!=w)l[E]++;else{if(E==3){if(p&&Se.reverseCounters(l),Se.isFinderPattern(l)){this.startEnd[0]=R,this.startEnd[1]=P;return}p&&Se.reverseCounters(l),R+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,E--}else E++;l[E]=1,w=!w}throw new G}static reverseCounters(e){let r=e.length;for(let s=0;s<r/2;++s){let l=e[s];e[s]=e[r-s-1],e[r-s-1]=l}}parseFoundFinderPattern(e,r,s){let l,c,d;if(s){let E=this.startEnd[0]-1;for(;E>=0&&!e.get(E);)E--;E++,l=this.startEnd[0]-E,c=E,d=this.startEnd[1]}else c=this.startEnd[0],d=e.getNextUnset(this.startEnd[1]+1),l=d-this.startEnd[1];let p=this.getDecodeFinderCounters();B.arraycopy(p,0,p,1,p.length-1),p[0]=l;let w;try{w=this.parseFinderValue(p,Se.FINDER_PATTERNS)}catch{return null}return new si(w,[c,d],c,d,r)}decodeDataCharacter(e,r,s,l){let c=this.getDataCharacterCounters();for(let Kt=0;Kt<c.length;Kt++)c[Kt]=0;if(l)Se.recordPatternInReverse(e,r.getStartEnd()[0],c);else{Se.recordPattern(e,r.getStartEnd()[1],c);for(let Kt=0,bn=c.length-1;Kt<bn;Kt++,bn--){let fr=c[Kt];c[Kt]=c[bn],c[bn]=fr}}let d=17,p=We.sum(new Int32Array(c))/d,w=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(p-w)/w>.3)throw new G;let E=this.getOddCounts(),R=this.getEvenCounts(),P=this.getOddRoundingErrors(),D=this.getEvenRoundingErrors();for(let Kt=0;Kt<c.length;Kt++){let bn=1*c[Kt]/p,fr=bn+.5;if(fr<1){if(bn<.3)throw new G;fr=1}else if(fr>8){if(bn>8.7)throw new G;fr=8}let ji=Kt/2;Kt&1?(R[ji]=fr,D[ji]=bn-fr):(E[ji]=fr,P[ji]=bn-fr)}this.adjustOddEvenCounts(d);let W=4*r.getValue()+(s?0:2)+(l?0:1)-1,K=0,ee=0;for(let Kt=E.length-1;Kt>=0;Kt--){if(Se.isNotA1left(r,s,l)){let bn=Se.WEIGHTS[W][2*Kt];ee+=E[Kt]*bn}K+=E[Kt]}let oe=0;for(let Kt=R.length-1;Kt>=0;Kt--)if(Se.isNotA1left(r,s,l)){let bn=Se.WEIGHTS[W][2*Kt+1];oe+=R[Kt]*bn}let he=ee+oe;if(K&1||K>13||K<4)throw new G;let Fe=(13-K)/2,He=Se.SYMBOL_WIDEST[Fe],Me=9-He,jt=Un.getRSSvalue(E,He,!0),Tt=Un.getRSSvalue(R,Me,!1),wr=Se.EVEN_TOTAL_SUBSET[Fe],Wr=Se.GSUM[Fe],Ln=jt*wr+Tt+Wr;return new $r(Ln,he)}static isNotA1left(e,r,s){return!(e.getValue()==0&&r&&s)}adjustOddEvenCounts(e){let r=We.sum(new Int32Array(this.getOddCounts())),s=We.sum(new Int32Array(this.getEvenCounts())),l=!1,c=!1;r>13?c=!0:r<4&&(l=!0);let d=!1,p=!1;s>13?p=!0:s<4&&(d=!0);let w=r+s-e,E=(r&1)==1,R=(s&1)==0;if(w==1)if(E){if(R)throw new G;c=!0}else{if(!R)throw new G;p=!0}else if(w==-1)if(E){if(R)throw new G;l=!0}else{if(!R)throw new G;d=!0}else if(w==0){if(E){if(!R)throw new G;r<s?(l=!0,p=!0):(c=!0,d=!0)}else if(R)throw new G}else throw new G;if(l){if(c)throw new G;Se.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&Se.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(p)throw new G;Se.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&Se.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Se.SYMBOL_WIDEST=[7,5,4,3,1],Se.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Se.GSUM=[0,348,1388,2948,3988],Se.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Se.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Se.FINDER_PAT_A=0,Se.FINDER_PAT_B=1,Se.FINDER_PAT_C=2,Se.FINDER_PAT_D=3,Se.FINDER_PAT_E=4,Se.FINDER_PAT_F=5,Se.FINDER_PATTERN_SEQUENCES=[[Se.FINDER_PAT_A,Se.FINDER_PAT_A],[Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B],[Se.FINDER_PAT_A,Se.FINDER_PAT_C,Se.FINDER_PAT_B,Se.FINDER_PAT_D],[Se.FINDER_PAT_A,Se.FINDER_PAT_E,Se.FINDER_PAT_B,Se.FINDER_PAT_D,Se.FINDER_PAT_C],[Se.FINDER_PAT_A,Se.FINDER_PAT_E,Se.FINDER_PAT_B,Se.FINDER_PAT_D,Se.FINDER_PAT_D,Se.FINDER_PAT_F],[Se.FINDER_PAT_A,Se.FINDER_PAT_E,Se.FINDER_PAT_B,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_F,Se.FINDER_PAT_F],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_D],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_E],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_F,Se.FINDER_PAT_F],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_E,Se.FINDER_PAT_F,Se.FINDER_PAT_F]],Se.MAX_PAIRS=11;class ho extends $r{constructor(e,r,s){super(e,r),this.count=0,this.finderPattern=s}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Zt extends yn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,r,s){const l=this.decodePair(r,!1,e,s);Zt.addOrTally(this.possibleLeftPairs,l),r.reverse();let c=this.decodePair(r,!0,e,s);Zt.addOrTally(this.possibleRightPairs,c),r.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&Zt.checkChecksum(d,p))return Zt.constructResult(d,p)}throw new G}static addOrTally(e,r){if(r==null)return;let s=!1;for(let l of e)if(l.getValue()===r.getValue()){l.incrementCount(),s=!0;break}s||e.push(r)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,r){let s=4537077*e.getValue()+r.getValue(),l=new String(s).toString(),c=new De;for(let E=13-l.length;E>0;E--)c.append("0");c.append(l);let d=0;for(let E=0;E<13;E++){let R=c.charAt(E).charCodeAt(0)-48;d+=E&1?R:3*R}d=10-d%10,d===10&&(d=0),c.append(d.toString());let p=e.getFinderPattern().getResultPoints(),w=r.getFinderPattern().getResultPoints();return new Ge(c.toString(),null,0,[p[0],p[1],w[0],w[1]],te.RSS_14,new Date().getTime())}static checkChecksum(e,r){let s=(e.getChecksumPortion()+16*r.getChecksumPortion())%79,l=9*e.getFinderPattern().getValue()+r.getFinderPattern().getValue();return l>72&&l--,l>8&&l--,s===l}decodePair(e,r,s,l){try{let c=this.findFinderPattern(e,r),d=this.parseFoundFinderPattern(e,s,r,c),p=l==null?null:l.get(re.NEED_RESULT_POINT_CALLBACK);if(p!=null){let R=(c[0]+c[1])/2;r&&(R=e.getSize()-1-R),p.foundPossibleResultPoint(new Ie(R,s))}let w=this.decodeDataCharacter(e,d,!0),E=this.decodeDataCharacter(e,d,!1);return new ho(1597*w.getValue()+E.getValue(),w.getChecksumPortion()+4*E.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(e,r,s){let l=this.getDataCharacterCounters();for(let oe=0;oe<l.length;oe++)l[oe]=0;if(s)ve.recordPatternInReverse(e,r.getStartEnd()[0],l);else{ve.recordPattern(e,r.getStartEnd()[1]+1,l);for(let oe=0,he=l.length-1;oe<he;oe++,he--){let Fe=l[oe];l[oe]=l[he],l[he]=Fe}}let c=s?16:15,d=We.sum(new Int32Array(l))/c,p=this.getOddCounts(),w=this.getEvenCounts(),E=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let oe=0;oe<l.length;oe++){let he=l[oe]/d,Fe=Math.floor(he+.5);Fe<1?Fe=1:Fe>8&&(Fe=8);let He=Math.floor(oe/2);oe&1?(w[He]=Fe,R[He]=he-Fe):(p[He]=Fe,E[He]=he-Fe)}this.adjustOddEvenCounts(s,c);let P=0,D=0;for(let oe=p.length-1;oe>=0;oe--)D*=9,D+=p[oe],P+=p[oe];let W=0,K=0;for(let oe=w.length-1;oe>=0;oe--)W*=9,W+=w[oe],K+=w[oe];let ee=D+3*W;if(s){if(P&1||P>12||P<4)throw new G;let oe=(12-P)/2,he=Zt.OUTSIDE_ODD_WIDEST[oe],Fe=9-he,He=Un.getRSSvalue(p,he,!1),Me=Un.getRSSvalue(w,Fe,!0),jt=Zt.OUTSIDE_EVEN_TOTAL_SUBSET[oe],Tt=Zt.OUTSIDE_GSUM[oe];return new $r(He*jt+Me+Tt,ee)}else{if(K&1||K>10||K<4)throw new G;let oe=(10-K)/2,he=Zt.INSIDE_ODD_WIDEST[oe],Fe=9-he,He=Un.getRSSvalue(p,he,!0),Me=Un.getRSSvalue(w,Fe,!1),jt=Zt.INSIDE_ODD_TOTAL_SUBSET[oe],Tt=Zt.INSIDE_GSUM[oe];return new $r(Me*jt+He+Tt,ee)}}findFinderPattern(e,r){let s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;let l=e.getSize(),c=!1,d=0;for(;d<l&&(c=!e.get(d),r!==c);)d++;let p=0,w=d;for(let E=d;E<l;E++)if(e.get(E)!==c)s[p]++;else{if(p===3){if(yn.isFinderPattern(s))return[w,E];w+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,p--}else p++;s[p]=1,c=!c}throw new G}parseFoundFinderPattern(e,r,s,l){let c=e.get(l[0]),d=l[0]-1;for(;d>=0&&c!==e.get(d);)d--;d++;const p=l[0]-d,w=this.getDecodeFinderCounters(),E=new Int32Array(w.length);B.arraycopy(w,0,E,1,w.length-1),E[0]=p;const R=this.parseFinderValue(E,Zt.FINDER_PATTERNS);let P=d,D=l[1];return s&&(P=e.getSize()-1-P,D=e.getSize()-1-D),new si(R,[d,l[1]],P,D,r)}adjustOddEvenCounts(e,r){let s=We.sum(new Int32Array(this.getOddCounts())),l=We.sum(new Int32Array(this.getEvenCounts())),c=!1,d=!1,p=!1,w=!1;e?(s>12?d=!0:s<4&&(c=!0),l>12?w=!0:l<4&&(p=!0)):(s>11?d=!0:s<5&&(c=!0),l>10?w=!0:l<4&&(p=!0));let E=s+l-r,R=(s&1)===(e?1:0),P=(l&1)===1;if(E===1)if(R){if(P)throw new G;d=!0}else{if(!P)throw new G;w=!0}else if(E===-1)if(R){if(P)throw new G;c=!0}else{if(!P)throw new G;p=!0}else if(E===0){if(R){if(!P)throw new G;s<l?(c=!0,w=!0):(d=!0,p=!0)}else if(P)throw new G}else throw new G;if(c){if(d)throw new G;yn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&yn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(w)throw new G;yn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&yn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Zt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Zt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Zt.OUTSIDE_GSUM=[0,161,961,2015,2715],Zt.INSIDE_GSUM=[0,336,1036,1516],Zt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Zt.INSIDE_ODD_WIDEST=[2,4,6,8],Zt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class yi extends ve{constructor(e,r){super(),this.readers=[],this.verbose=r===!0;const s=e?e.get(re.POSSIBLE_FORMATS):null,l=e&&e.get(re.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;s?((s.includes(te.EAN_13)||s.includes(te.UPC_A)||s.includes(te.EAN_8)||s.includes(te.UPC_E))&&this.readers.push(new Qi(e)),s.includes(te.CODE_39)&&this.readers.push(new et(l)),s.includes(te.CODE_128)&&this.readers.push(new se),s.includes(te.ITF)&&this.readers.push(new nt),s.includes(te.RSS_14)&&this.readers.push(new Zt),s.includes(te.RSS_EXPANDED)&&this.readers.push(new Se(this.verbose))):(this.readers.push(new Qi(e)),this.readers.push(new et),this.readers.push(new Qi(e)),this.readers.push(new se),this.readers.push(new nt),this.readers.push(new Zt),this.readers.push(new Se(this.verbose)))}decodeRow(e,r,s){for(let l=0;l<this.readers.length;l++)try{return this.readers[l].decodeRow(e,r,s)}catch{}throw new G}reset(){this.readers.forEach(e=>e.reset())}}class mo extends Te{constructor(e=500,r){super(new yi(r),e,r)}}class Ot{constructor(e,r,s){this.ecCodewords=e,this.ecBlocks=[r],s&&this.ecBlocks.push(s)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Rt{constructor(e,r){this.count=e,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Mt{constructor(e,r,s,l,c,d){this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=s,this.dataRegionSizeRows=l,this.dataRegionSizeColumns=c,this.ecBlocks=d;let p=0;const w=d.getECCodewords(),E=d.getECBlocks();for(let R of E)p+=R.getCount()*(R.getDataCodewords()+w);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,r){if(e&1||r&1)throw new X;for(let s of Mt.VERSIONS)if(s.symbolSizeRows===e&&s.symbolSizeColumns===r)return s;throw new X}toString(){return""+this.versionNumber}static buildVersions(){return[new Mt(1,10,10,8,8,new Ot(5,new Rt(1,3))),new Mt(2,12,12,10,10,new Ot(7,new Rt(1,5))),new Mt(3,14,14,12,12,new Ot(10,new Rt(1,8))),new Mt(4,16,16,14,14,new Ot(12,new Rt(1,12))),new Mt(5,18,18,16,16,new Ot(14,new Rt(1,18))),new Mt(6,20,20,18,18,new Ot(18,new Rt(1,22))),new Mt(7,22,22,20,20,new Ot(20,new Rt(1,30))),new Mt(8,24,24,22,22,new Ot(24,new Rt(1,36))),new Mt(9,26,26,24,24,new Ot(28,new Rt(1,44))),new Mt(10,32,32,14,14,new Ot(36,new Rt(1,62))),new Mt(11,36,36,16,16,new Ot(42,new Rt(1,86))),new Mt(12,40,40,18,18,new Ot(48,new Rt(1,114))),new Mt(13,44,44,20,20,new Ot(56,new Rt(1,144))),new Mt(14,48,48,22,22,new Ot(68,new Rt(1,174))),new Mt(15,52,52,24,24,new Ot(42,new Rt(2,102))),new Mt(16,64,64,14,14,new Ot(56,new Rt(2,140))),new Mt(17,72,72,16,16,new Ot(36,new Rt(4,92))),new Mt(18,80,80,18,18,new Ot(48,new Rt(4,114))),new Mt(19,88,88,20,20,new Ot(56,new Rt(4,144))),new Mt(20,96,96,22,22,new Ot(68,new Rt(4,174))),new Mt(21,104,104,24,24,new Ot(56,new Rt(6,136))),new Mt(22,120,120,18,18,new Ot(68,new Rt(6,175))),new Mt(23,132,132,20,20,new Ot(62,new Rt(8,163))),new Mt(24,144,144,22,22,new Ot(62,new Rt(8,156),new Rt(2,155))),new Mt(25,8,18,6,16,new Ot(7,new Rt(1,5))),new Mt(26,8,32,6,14,new Ot(11,new Rt(1,10))),new Mt(27,12,26,10,24,new Ot(14,new Rt(1,16))),new Mt(28,12,36,10,16,new Ot(18,new Rt(1,22))),new Mt(29,16,36,14,16,new Ot(24,new Rt(1,32))),new Mt(30,16,48,14,22,new Ot(28,new Rt(1,49)))]}}Mt.VERSIONS=Mt.buildVersions();class Zn{constructor(e){const r=e.getHeight();if(r<8||r>144||r&1)throw new X;this.version=Zn.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Ce(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const r=e.getHeight(),s=e.getWidth();return Mt.getVersionForDimensions(r,s)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let r=0,s=4,l=0;const c=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth();let p=!1,w=!1,E=!1,R=!1;do if(s===c&&l===0&&!p)e[r++]=this.readCorner1(c,d)&255,s-=2,l+=2,p=!0;else if(s===c-2&&l===0&&d&3&&!w)e[r++]=this.readCorner2(c,d)&255,s-=2,l+=2,w=!0;else if(s===c+4&&l===2&&!(d&7)&&!E)e[r++]=this.readCorner3(c,d)&255,s-=2,l+=2,E=!0;else if(s===c-2&&l===0&&(d&7)===4&&!R)e[r++]=this.readCorner4(c,d)&255,s-=2,l+=2,R=!0;else{do s<c&&l>=0&&!this.readMappingMatrix.get(l,s)&&(e[r++]=this.readUtah(s,l,c,d)&255),s-=2,l+=2;while(s>=0&&l<d);s+=1,l+=3;do s>=0&&l<d&&!this.readMappingMatrix.get(l,s)&&(e[r++]=this.readUtah(s,l,c,d)&255),s+=2,l-=2;while(s<c&&l>=0);s+=3,l+=1}while(s<c||l<d);if(r!==this.version.getTotalCodewords())throw new X;return e}readModule(e,r,s,l){return e<0&&(e+=s,r+=4-(s+4&7)),r<0&&(r+=l,e+=4-(l+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)}readUtah(e,r,s,l){let c=0;return this.readModule(e-2,r-2,s,l)&&(c|=1),c<<=1,this.readModule(e-2,r-1,s,l)&&(c|=1),c<<=1,this.readModule(e-1,r-2,s,l)&&(c|=1),c<<=1,this.readModule(e-1,r-1,s,l)&&(c|=1),c<<=1,this.readModule(e-1,r,s,l)&&(c|=1),c<<=1,this.readModule(e,r-2,s,l)&&(c|=1),c<<=1,this.readModule(e,r-1,s,l)&&(c|=1),c<<=1,this.readModule(e,r,s,l)&&(c|=1),c}readCorner1(e,r){let s=0;return this.readModule(e-1,0,e,r)&&(s|=1),s<<=1,this.readModule(e-1,1,e,r)&&(s|=1),s<<=1,this.readModule(e-1,2,e,r)&&(s|=1),s<<=1,this.readModule(0,r-2,e,r)&&(s|=1),s<<=1,this.readModule(0,r-1,e,r)&&(s|=1),s<<=1,this.readModule(1,r-1,e,r)&&(s|=1),s<<=1,this.readModule(2,r-1,e,r)&&(s|=1),s<<=1,this.readModule(3,r-1,e,r)&&(s|=1),s}readCorner2(e,r){let s=0;return this.readModule(e-3,0,e,r)&&(s|=1),s<<=1,this.readModule(e-2,0,e,r)&&(s|=1),s<<=1,this.readModule(e-1,0,e,r)&&(s|=1),s<<=1,this.readModule(0,r-4,e,r)&&(s|=1),s<<=1,this.readModule(0,r-3,e,r)&&(s|=1),s<<=1,this.readModule(0,r-2,e,r)&&(s|=1),s<<=1,this.readModule(0,r-1,e,r)&&(s|=1),s<<=1,this.readModule(1,r-1,e,r)&&(s|=1),s}readCorner3(e,r){let s=0;return this.readModule(e-1,0,e,r)&&(s|=1),s<<=1,this.readModule(e-1,r-1,e,r)&&(s|=1),s<<=1,this.readModule(0,r-3,e,r)&&(s|=1),s<<=1,this.readModule(0,r-2,e,r)&&(s|=1),s<<=1,this.readModule(0,r-1,e,r)&&(s|=1),s<<=1,this.readModule(1,r-3,e,r)&&(s|=1),s<<=1,this.readModule(1,r-2,e,r)&&(s|=1),s<<=1,this.readModule(1,r-1,e,r)&&(s|=1),s}readCorner4(e,r){let s=0;return this.readModule(e-3,0,e,r)&&(s|=1),s<<=1,this.readModule(e-2,0,e,r)&&(s|=1),s<<=1,this.readModule(e-1,0,e,r)&&(s|=1),s<<=1,this.readModule(0,r-2,e,r)&&(s|=1),s<<=1,this.readModule(0,r-1,e,r)&&(s|=1),s<<=1,this.readModule(1,r-1,e,r)&&(s|=1),s<<=1,this.readModule(2,r-1,e,r)&&(s|=1),s<<=1,this.readModule(3,r-1,e,r)&&(s|=1),s}extractDataRegion(e){const r=this.version.getSymbolSizeRows(),s=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new I("Dimension of bitMatrix must match the version size");const l=this.version.getDataRegionSizeRows(),c=this.version.getDataRegionSizeColumns(),d=r/l|0,p=s/c|0,w=d*l,E=p*c,R=new Ce(E,w);for(let P=0;P<d;++P){const D=P*l;for(let W=0;W<p;++W){const K=W*c;for(let ee=0;ee<l;++ee){const oe=P*(l+2)+1+ee,he=D+ee;for(let Fe=0;Fe<c;++Fe){const He=W*(c+2)+1+Fe;if(e.get(He,oe)){const Me=K+Fe;R.set(Me,he)}}}}}return R}}class Pi{constructor(e,r){this.numDataCodewords=e,this.codewords=r}static getDataBlocks(e,r){const s=r.getECBlocks();let l=0;const c=s.getECBlocks();for(let ee of c)l+=ee.getCount();const d=new Array(l);let p=0;for(let ee of c)for(let oe=0;oe<ee.getCount();oe++){const he=ee.getDataCodewords(),Fe=s.getECCodewords()+he;d[p++]=new Pi(he,new Uint8Array(Fe))}const E=d[0].codewords.length-s.getECCodewords(),R=E-1;let P=0;for(let ee=0;ee<R;ee++)for(let oe=0;oe<p;oe++)d[oe].codewords[ee]=e[P++];const D=r.getVersionNumber()===24,W=D?8:p;for(let ee=0;ee<W;ee++)d[ee].codewords[E-1]=e[P++];const K=d[0].codewords.length;for(let ee=E;ee<K;ee++)for(let oe=0;oe<p;oe++){const he=D?(oe+8)%p:oe,Fe=D&&he>7?ee-1:ee;d[he].codewords[Fe]=e[P++]}if(P!==e.length)throw new I;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ts{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new I(""+e);let r=0,s=this.bitOffset,l=this.byteOffset;const c=this.bytes;if(s>0){const d=8-s,p=e<d?e:d,w=d-p,E=255>>8-p<<w;r=(c[l]&E)>>w,e-=p,s+=p,s===8&&(s=0,l++)}if(e>0){for(;e>=8;)r=r<<8|c[l]&255,l++,e-=8;if(e>0){const d=8-e,p=255>>d<<d;r=r<<e|(c[l]&p)>>d,s+=e}}return this.bitOffset=s,this.byteOffset=l,r}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var gn;(function(k){k[k.PAD_ENCODE=0]="PAD_ENCODE",k[k.ASCII_ENCODE=1]="ASCII_ENCODE",k[k.C40_ENCODE=2]="C40_ENCODE",k[k.TEXT_ENCODE=3]="TEXT_ENCODE",k[k.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",k[k.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",k[k.BASE256_ENCODE=6]="BASE256_ENCODE"})(gn||(gn={}));class Nr{static decode(e){const r=new ts(e),s=new De,l=new De,c=new Array;let d=gn.ASCII_ENCODE;do if(d===gn.ASCII_ENCODE)d=this.decodeAsciiSegment(r,s,l);else{switch(d){case gn.C40_ENCODE:this.decodeC40Segment(r,s);break;case gn.TEXT_ENCODE:this.decodeTextSegment(r,s);break;case gn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,s);break;case gn.EDIFACT_ENCODE:this.decodeEdifactSegment(r,s);break;case gn.BASE256_ENCODE:this.decodeBase256Segment(r,s,c);break;default:throw new X}d=gn.ASCII_ENCODE}while(d!==gn.PAD_ENCODE&&r.available()>0);return l.length()>0&&s.append(l.toString()),new $e(e,s.toString(),c.length===0?null:c,null)}static decodeAsciiSegment(e,r,s){let l=!1;do{let c=e.readBits(8);if(c===0)throw new X;if(c<=128)return l&&(c+=128),r.append(String.fromCharCode(c-1)),gn.ASCII_ENCODE;if(c===129)return gn.PAD_ENCODE;if(c<=229){const d=c-130;d<10&&r.append("0"),r.append(""+d)}else switch(c){case 230:return gn.C40_ENCODE;case 231:return gn.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:l=!0;break;case 236:r.append("[)>05"),s.insert(0,"");break;case 237:r.append("[)>06"),s.insert(0,"");break;case 238:return gn.ANSIX12_ENCODE;case 239:return gn.TEXT_ENCODE;case 240:return gn.EDIFACT_ENCODE;case 241:break;default:if(c!==254||e.available()!==0)throw new X;break}}while(e.available()>0);return gn.ASCII_ENCODE}static decodeC40Segment(e,r){let s=!1;const l=[];let c=0;do{if(e.available()===8)return;const d=e.readBits(8);if(d===254)return;this.parseTwoBytes(d,e.readBits(8),l);for(let p=0;p<3;p++){const w=l[p];switch(c){case 0:if(w<3)c=w+1;else if(w<this.C40_BASIC_SET_CHARS.length){const E=this.C40_BASIC_SET_CHARS[w];s?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),s=!1):r.append(E)}else throw new X;break;case 1:s?(r.append(String.fromCharCode(w+128)),s=!1):r.append(String.fromCharCode(w)),c=0;break;case 2:if(w<this.C40_SHIFT2_SET_CHARS.length){const E=this.C40_SHIFT2_SET_CHARS[w];s?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),s=!1):r.append(E)}else switch(w){case 27:r.append("");break;case 30:s=!0;break;default:throw new X}c=0;break;case 3:s?(r.append(String.fromCharCode(w+224)),s=!1):r.append(String.fromCharCode(w+96)),c=0;break;default:throw new X}}}while(e.available()>0)}static decodeTextSegment(e,r){let s=!1,l=[],c=0;do{if(e.available()===8)return;const d=e.readBits(8);if(d===254)return;this.parseTwoBytes(d,e.readBits(8),l);for(let p=0;p<3;p++){const w=l[p];switch(c){case 0:if(w<3)c=w+1;else if(w<this.TEXT_BASIC_SET_CHARS.length){const E=this.TEXT_BASIC_SET_CHARS[w];s?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),s=!1):r.append(E)}else throw new X;break;case 1:s?(r.append(String.fromCharCode(w+128)),s=!1):r.append(String.fromCharCode(w)),c=0;break;case 2:if(w<this.TEXT_SHIFT2_SET_CHARS.length){const E=this.TEXT_SHIFT2_SET_CHARS[w];s?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),s=!1):r.append(E)}else switch(w){case 27:r.append("");break;case 30:s=!0;break;default:throw new X}c=0;break;case 3:if(w<this.TEXT_SHIFT3_SET_CHARS.length){const E=this.TEXT_SHIFT3_SET_CHARS[w];s?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),s=!1):r.append(E),c=0}else throw new X;break;default:throw new X}}}while(e.available()>0)}static decodeAnsiX12Segment(e,r){const s=[];do{if(e.available()===8)return;const l=e.readBits(8);if(l===254)return;this.parseTwoBytes(l,e.readBits(8),s);for(let c=0;c<3;c++){const d=s[c];switch(d){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(d<14)r.append(String.fromCharCode(d+44));else if(d<40)r.append(String.fromCharCode(d+51));else throw new X;break}}}while(e.available()>0)}static parseTwoBytes(e,r,s){let l=(e<<8)+r-1,c=Math.floor(l/1600);s[0]=c,l-=c*1600,c=Math.floor(l/40),s[1]=c,s[2]=l-c*40}static decodeEdifactSegment(e,r){do{if(e.available()<=16)return;for(let s=0;s<4;s++){let l=e.readBits(6);if(l===31){const c=8-e.getBitOffset();c!==8&&e.readBits(c);return}l&32||(l|=64),r.append(String.fromCharCode(l))}}while(e.available()>0)}static decodeBase256Segment(e,r,s){let l=1+e.getByteOffset();const c=this.unrandomize255State(e.readBits(8),l++);let d;if(c===0?d=e.available()/8|0:c<250?d=c:d=250*(c-249)+this.unrandomize255State(e.readBits(8),l++),d<0)throw new X;const p=new Uint8Array(d);for(let w=0;w<d;w++){if(e.available()<8)throw new X;p[w]=this.unrandomize255State(e.readBits(8),l++)}s.push(p);try{r.append(Ne.decode(p,Ae.ISO88591))}catch(w){throw new Ze("Platform does not support required encoding: "+w.message)}}static unrandomize255State(e,r){const s=149*r%255+1,l=e-s;return l>=0?l:l+256}}Nr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Nr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Nr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Nr.TEXT_SHIFT2_SET_CHARS=Nr.C40_SHIFT2_SET_CHARS,Nr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class ai{constructor(){this.rsDecoder=new tt(ue.DATA_MATRIX_FIELD_256)}decode(e){const r=new Zn(e),s=r.getVersion(),l=r.readCodewords(),c=Pi.getDataBlocks(l,s);let d=0;for(let E of c)d+=E.getNumDataCodewords();const p=new Uint8Array(d),w=c.length;for(let E=0;E<w;E++){const R=c[E],P=R.getCodewords(),D=R.getNumDataCodewords();this.correctErrors(P,D);for(let W=0;W<D;W++)p[W*w+E]=P[W]}return Nr.decode(p)}correctErrors(e,r){const s=new Int32Array(e);try{this.rsDecoder.decode(s,e.length-r)}catch{throw new M}for(let l=0;l<r;l++)e[l]=s[l]}}class en{constructor(e){this.image=e,this.rectangleDetector=new Ee(this.image)}detect(){const e=this.rectangleDetector.detect();let r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new G;r=this.shiftToModuleCenter(r);const s=r[0],l=r[1],c=r[2],d=r[3];let p=this.transitionsBetween(s,d)+1,w=this.transitionsBetween(c,d)+1;(p&1)===1&&(p+=1),(w&1)===1&&(w+=1),4*p<7*w&&4*w<7*p&&(p=w=Math.max(p,w));let E=en.sampleGrid(this.image,s,l,c,d,p,w);return new vt(E,[s,l,c,d])}static shiftPoint(e,r,s){let l=(r.getX()-e.getX())/(s+1),c=(r.getY()-e.getY())/(s+1);return new Ie(e.getX()+l,e.getY()+c)}static moveAway(e,r,s){let l=e.getX(),c=e.getY();return l<r?l-=1:l+=1,c<s?c-=1:c+=1,new Ie(l,c)}detectSolid1(e){let r=e[0],s=e[1],l=e[3],c=e[2],d=this.transitionsBetween(r,s),p=this.transitionsBetween(s,l),w=this.transitionsBetween(l,c),E=this.transitionsBetween(c,r),R=d,P=[c,r,s,l];return R>p&&(R=p,P[0]=r,P[1]=s,P[2]=l,P[3]=c),R>w&&(R=w,P[0]=s,P[1]=l,P[2]=c,P[3]=r),R>E&&(P[0]=l,P[1]=c,P[2]=r,P[3]=s),P}detectSolid2(e){let r=e[0],s=e[1],l=e[2],c=e[3],d=this.transitionsBetween(r,c),p=en.shiftPoint(s,l,(d+1)*4),w=en.shiftPoint(l,s,(d+1)*4),E=this.transitionsBetween(p,r),R=this.transitionsBetween(w,c);return E<R?(e[0]=r,e[1]=s,e[2]=l,e[3]=c):(e[0]=s,e[1]=l,e[2]=c,e[3]=r),e}correctTopRight(e){let r=e[0],s=e[1],l=e[2],c=e[3],d=this.transitionsBetween(r,c),p=this.transitionsBetween(s,c),w=en.shiftPoint(r,s,(p+1)*4),E=en.shiftPoint(l,s,(d+1)*4);d=this.transitionsBetween(w,c),p=this.transitionsBetween(E,c);let R=new Ie(c.getX()+(l.getX()-s.getX())/(d+1),c.getY()+(l.getY()-s.getY())/(d+1)),P=new Ie(c.getX()+(r.getX()-s.getX())/(p+1),c.getY()+(r.getY()-s.getY())/(p+1));if(!this.isValid(R))return this.isValid(P)?P:null;if(!this.isValid(P))return R;let D=this.transitionsBetween(w,R)+this.transitionsBetween(E,R),W=this.transitionsBetween(w,P)+this.transitionsBetween(E,P);return D>W?R:P}shiftToModuleCenter(e){let r=e[0],s=e[1],l=e[2],c=e[3],d=this.transitionsBetween(r,c)+1,p=this.transitionsBetween(l,c)+1,w=en.shiftPoint(r,s,p*4),E=en.shiftPoint(l,s,d*4);d=this.transitionsBetween(w,c)+1,p=this.transitionsBetween(E,c)+1,(d&1)===1&&(d+=1),(p&1)===1&&(p+=1);let R=(r.getX()+s.getX()+l.getX()+c.getX())/4,P=(r.getY()+s.getY()+l.getY()+c.getY())/4;r=en.moveAway(r,R,P),s=en.moveAway(s,R,P),l=en.moveAway(l,R,P),c=en.moveAway(c,R,P);let D,W;return w=en.shiftPoint(r,s,p*4),w=en.shiftPoint(w,c,d*4),D=en.shiftPoint(s,r,p*4),D=en.shiftPoint(D,l,d*4),E=en.shiftPoint(l,c,p*4),E=en.shiftPoint(E,s,d*4),W=en.shiftPoint(c,l,p*4),W=en.shiftPoint(W,r,d*4),[w,D,E,W]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,r,s,l,c,d,p){return lt.getInstance().sampleGrid(e,d,p,.5,.5,d-.5,.5,d-.5,p-.5,.5,p-.5,r.getX(),r.getY(),c.getX(),c.getY(),l.getX(),l.getY(),s.getX(),s.getY())}transitionsBetween(e,r){let s=Math.trunc(e.getX()),l=Math.trunc(e.getY()),c=Math.trunc(r.getX()),d=Math.trunc(r.getY()),p=Math.abs(d-l)>Math.abs(c-s);if(p){let ee=s;s=l,l=ee,ee=c,c=d,d=ee}let w=Math.abs(c-s),E=Math.abs(d-l),R=-w/2,P=l<d?1:-1,D=s<c?1:-1,W=0,K=this.image.get(p?l:s,p?s:l);for(let ee=s,oe=l;ee!==c;ee+=D){let he=this.image.get(p?oe:ee,p?ee:oe);if(he!==K&&(W++,K=he),R+=E,R>0){if(oe===d)break;oe+=P,R-=w}}return W}}class yr{constructor(){this.decoder=new ai}decode(e,r=null){let s,l;if(r!=null&&r.has(re.PURE_BARCODE)){const E=yr.extractPureBits(e.getBlackMatrix());s=this.decoder.decode(E),l=yr.NO_POINTS}else{const E=new en(e.getBlackMatrix()).detect();s=this.decoder.decode(E.getBits()),l=E.getPoints()}const c=s.getRawBytes(),d=new Ge(s.getText(),c,8*c.length,l,te.DATA_MATRIX,B.currentTimeMillis()),p=s.getByteSegments();p!=null&&d.putMetadata(Pe.BYTE_SEGMENTS,p);const w=s.getECLevel();return w!=null&&d.putMetadata(Pe.ERROR_CORRECTION_LEVEL,w),d}reset(){}static extractPureBits(e){const r=e.getTopLeftOnBit(),s=e.getBottomRightOnBit();if(r==null||s==null)throw new G;const l=this.moduleSize(r,e);let c=r[1];const d=s[1];let p=r[0];const E=(s[0]-p+1)/l,R=(d-c+1)/l;if(E<=0||R<=0)throw new G;const P=l/2;c+=P,p+=P;const D=new Ce(E,R);for(let W=0;W<R;W++){const K=c+W*l;for(let ee=0;ee<E;ee++)e.get(p+ee*l,K)&&D.set(ee,W)}return D}static moduleSize(e,r){const s=r.getWidth();let l=e[0];const c=e[1];for(;l<s&&r.get(l,c);)l++;if(l===s)throw new G;const d=l-e[0];if(d===0)throw new G;return d}}yr.NO_POINTS=[];class ea extends Te{constructor(e=500){super(new yr,e)}}var wi;(function(k){k[k.L=0]="L",k[k.M=1]="M",k[k.Q=2]="Q",k[k.H=3]="H"})(wi||(wi={}));class Ut{constructor(e,r,s){this.value=e,this.stringValue=r,this.bits=s,Ut.FOR_BITS.set(s,this),Ut.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return Ut.L;case"M":return Ut.M;case"Q":return Ut.Q;case"H":return Ut.H;default:throw new S(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof Ut))return!1;const r=e;return this.value===r.value}static forBits(e){if(e<0||e>=Ut.FOR_BITS.size)throw new I;return Ut.FOR_BITS.get(e)}}Ut.FOR_BITS=new Map,Ut.FOR_VALUE=new Map,Ut.L=new Ut(wi.L,"L",1),Ut.M=new Ut(wi.M,"M",0),Ut.Q=new Ut(wi.Q,"Q",3),Ut.H=new Ut(wi.H,"H",2);class Mn{constructor(e){this.errorCorrectionLevel=Ut.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,r){return F.bitCount(e^r)}static decodeFormatInformation(e,r){const s=Mn.doDecodeFormatInformation(e,r);return s!==null?s:Mn.doDecodeFormatInformation(e^Mn.FORMAT_INFO_MASK_QR,r^Mn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,r){let s=Number.MAX_SAFE_INTEGER,l=0;for(const c of Mn.FORMAT_INFO_DECODE_LOOKUP){const d=c[0];if(d===e||d===r)return new Mn(c[1]);let p=Mn.numBitsDiffering(e,d);p<s&&(l=c[1],s=p),e!==r&&(p=Mn.numBitsDiffering(r,d),p<s&&(l=c[1],s=p))}return s<=3?new Mn(l):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof Mn))return!1;const r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask}}Mn.FORMAT_INFO_MASK_QR=21522,Mn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ae{constructor(e,...r){this.ecCodewordsPerBlock=e,this.ecBlocks=r}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const r=this.ecBlocks;for(const s of r)e+=s.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class U{constructor(e,r){this.count=e,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ct{constructor(e,r,...s){this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=s;let l=0;const c=s[0].getECCodewordsPerBlock(),d=s[0].getECBlocks();for(const p of d)l+=p.getCount()*(p.getDataCodewords()+c);this.totalCodewords=l}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new X;try{return this.getVersionForNumber((e-17)/4)}catch{throw new X}}static getVersionForNumber(e){if(e<1||e>40)throw new I;return ct.VERSIONS[e-1]}static decodeVersionInformation(e){let r=Number.MAX_SAFE_INTEGER,s=0;for(let l=0;l<ct.VERSION_DECODE_INFO.length;l++){const c=ct.VERSION_DECODE_INFO[l];if(c===e)return ct.getVersionForNumber(l+7);const d=Mn.numBitsDiffering(e,c);d<r&&(s=l+7,r=d)}return r<=3?ct.getVersionForNumber(s):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),r=new Ce(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);const s=this.alignmentPatternCenters.length;for(let l=0;l<s;l++){const c=this.alignmentPatternCenters[l]-2;for(let d=0;d<s;d++)l===0&&(d===0||d===s-1)||l===s-1&&d===0||r.setRegion(this.alignmentPatternCenters[d]-2,c,5,5)}return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r}toString(){return""+this.versionNumber}}ct.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ct.VERSIONS=[new ct(1,new Int32Array(0),new ae(7,new U(1,19)),new ae(10,new U(1,16)),new ae(13,new U(1,13)),new ae(17,new U(1,9))),new ct(2,Int32Array.from([6,18]),new ae(10,new U(1,34)),new ae(16,new U(1,28)),new ae(22,new U(1,22)),new ae(28,new U(1,16))),new ct(3,Int32Array.from([6,22]),new ae(15,new U(1,55)),new ae(26,new U(1,44)),new ae(18,new U(2,17)),new ae(22,new U(2,13))),new ct(4,Int32Array.from([6,26]),new ae(20,new U(1,80)),new ae(18,new U(2,32)),new ae(26,new U(2,24)),new ae(16,new U(4,9))),new ct(5,Int32Array.from([6,30]),new ae(26,new U(1,108)),new ae(24,new U(2,43)),new ae(18,new U(2,15),new U(2,16)),new ae(22,new U(2,11),new U(2,12))),new ct(6,Int32Array.from([6,34]),new ae(18,new U(2,68)),new ae(16,new U(4,27)),new ae(24,new U(4,19)),new ae(28,new U(4,15))),new ct(7,Int32Array.from([6,22,38]),new ae(20,new U(2,78)),new ae(18,new U(4,31)),new ae(18,new U(2,14),new U(4,15)),new ae(26,new U(4,13),new U(1,14))),new ct(8,Int32Array.from([6,24,42]),new ae(24,new U(2,97)),new ae(22,new U(2,38),new U(2,39)),new ae(22,new U(4,18),new U(2,19)),new ae(26,new U(4,14),new U(2,15))),new ct(9,Int32Array.from([6,26,46]),new ae(30,new U(2,116)),new ae(22,new U(3,36),new U(2,37)),new ae(20,new U(4,16),new U(4,17)),new ae(24,new U(4,12),new U(4,13))),new ct(10,Int32Array.from([6,28,50]),new ae(18,new U(2,68),new U(2,69)),new ae(26,new U(4,43),new U(1,44)),new ae(24,new U(6,19),new U(2,20)),new ae(28,new U(6,15),new U(2,16))),new ct(11,Int32Array.from([6,30,54]),new ae(20,new U(4,81)),new ae(30,new U(1,50),new U(4,51)),new ae(28,new U(4,22),new U(4,23)),new ae(24,new U(3,12),new U(8,13))),new ct(12,Int32Array.from([6,32,58]),new ae(24,new U(2,92),new U(2,93)),new ae(22,new U(6,36),new U(2,37)),new ae(26,new U(4,20),new U(6,21)),new ae(28,new U(7,14),new U(4,15))),new ct(13,Int32Array.from([6,34,62]),new ae(26,new U(4,107)),new ae(22,new U(8,37),new U(1,38)),new ae(24,new U(8,20),new U(4,21)),new ae(22,new U(12,11),new U(4,12))),new ct(14,Int32Array.from([6,26,46,66]),new ae(30,new U(3,115),new U(1,116)),new ae(24,new U(4,40),new U(5,41)),new ae(20,new U(11,16),new U(5,17)),new ae(24,new U(11,12),new U(5,13))),new ct(15,Int32Array.from([6,26,48,70]),new ae(22,new U(5,87),new U(1,88)),new ae(24,new U(5,41),new U(5,42)),new ae(30,new U(5,24),new U(7,25)),new ae(24,new U(11,12),new U(7,13))),new ct(16,Int32Array.from([6,26,50,74]),new ae(24,new U(5,98),new U(1,99)),new ae(28,new U(7,45),new U(3,46)),new ae(24,new U(15,19),new U(2,20)),new ae(30,new U(3,15),new U(13,16))),new ct(17,Int32Array.from([6,30,54,78]),new ae(28,new U(1,107),new U(5,108)),new ae(28,new U(10,46),new U(1,47)),new ae(28,new U(1,22),new U(15,23)),new ae(28,new U(2,14),new U(17,15))),new ct(18,Int32Array.from([6,30,56,82]),new ae(30,new U(5,120),new U(1,121)),new ae(26,new U(9,43),new U(4,44)),new ae(28,new U(17,22),new U(1,23)),new ae(28,new U(2,14),new U(19,15))),new ct(19,Int32Array.from([6,30,58,86]),new ae(28,new U(3,113),new U(4,114)),new ae(26,new U(3,44),new U(11,45)),new ae(26,new U(17,21),new U(4,22)),new ae(26,new U(9,13),new U(16,14))),new ct(20,Int32Array.from([6,34,62,90]),new ae(28,new U(3,107),new U(5,108)),new ae(26,new U(3,41),new U(13,42)),new ae(30,new U(15,24),new U(5,25)),new ae(28,new U(15,15),new U(10,16))),new ct(21,Int32Array.from([6,28,50,72,94]),new ae(28,new U(4,116),new U(4,117)),new ae(26,new U(17,42)),new ae(28,new U(17,22),new U(6,23)),new ae(30,new U(19,16),new U(6,17))),new ct(22,Int32Array.from([6,26,50,74,98]),new ae(28,new U(2,111),new U(7,112)),new ae(28,new U(17,46)),new ae(30,new U(7,24),new U(16,25)),new ae(24,new U(34,13))),new ct(23,Int32Array.from([6,30,54,78,102]),new ae(30,new U(4,121),new U(5,122)),new ae(28,new U(4,47),new U(14,48)),new ae(30,new U(11,24),new U(14,25)),new ae(30,new U(16,15),new U(14,16))),new ct(24,Int32Array.from([6,28,54,80,106]),new ae(30,new U(6,117),new U(4,118)),new ae(28,new U(6,45),new U(14,46)),new ae(30,new U(11,24),new U(16,25)),new ae(30,new U(30,16),new U(2,17))),new ct(25,Int32Array.from([6,32,58,84,110]),new ae(26,new U(8,106),new U(4,107)),new ae(28,new U(8,47),new U(13,48)),new ae(30,new U(7,24),new U(22,25)),new ae(30,new U(22,15),new U(13,16))),new ct(26,Int32Array.from([6,30,58,86,114]),new ae(28,new U(10,114),new U(2,115)),new ae(28,new U(19,46),new U(4,47)),new ae(28,new U(28,22),new U(6,23)),new ae(30,new U(33,16),new U(4,17))),new ct(27,Int32Array.from([6,34,62,90,118]),new ae(30,new U(8,122),new U(4,123)),new ae(28,new U(22,45),new U(3,46)),new ae(30,new U(8,23),new U(26,24)),new ae(30,new U(12,15),new U(28,16))),new ct(28,Int32Array.from([6,26,50,74,98,122]),new ae(30,new U(3,117),new U(10,118)),new ae(28,new U(3,45),new U(23,46)),new ae(30,new U(4,24),new U(31,25)),new ae(30,new U(11,15),new U(31,16))),new ct(29,Int32Array.from([6,30,54,78,102,126]),new ae(30,new U(7,116),new U(7,117)),new ae(28,new U(21,45),new U(7,46)),new ae(30,new U(1,23),new U(37,24)),new ae(30,new U(19,15),new U(26,16))),new ct(30,Int32Array.from([6,26,52,78,104,130]),new ae(30,new U(5,115),new U(10,116)),new ae(28,new U(19,47),new U(10,48)),new ae(30,new U(15,24),new U(25,25)),new ae(30,new U(23,15),new U(25,16))),new ct(31,Int32Array.from([6,30,56,82,108,134]),new ae(30,new U(13,115),new U(3,116)),new ae(28,new U(2,46),new U(29,47)),new ae(30,new U(42,24),new U(1,25)),new ae(30,new U(23,15),new U(28,16))),new ct(32,Int32Array.from([6,34,60,86,112,138]),new ae(30,new U(17,115)),new ae(28,new U(10,46),new U(23,47)),new ae(30,new U(10,24),new U(35,25)),new ae(30,new U(19,15),new U(35,16))),new ct(33,Int32Array.from([6,30,58,86,114,142]),new ae(30,new U(17,115),new U(1,116)),new ae(28,new U(14,46),new U(21,47)),new ae(30,new U(29,24),new U(19,25)),new ae(30,new U(11,15),new U(46,16))),new ct(34,Int32Array.from([6,34,62,90,118,146]),new ae(30,new U(13,115),new U(6,116)),new ae(28,new U(14,46),new U(23,47)),new ae(30,new U(44,24),new U(7,25)),new ae(30,new U(59,16),new U(1,17))),new ct(35,Int32Array.from([6,30,54,78,102,126,150]),new ae(30,new U(12,121),new U(7,122)),new ae(28,new U(12,47),new U(26,48)),new ae(30,new U(39,24),new U(14,25)),new ae(30,new U(22,15),new U(41,16))),new ct(36,Int32Array.from([6,24,50,76,102,128,154]),new ae(30,new U(6,121),new U(14,122)),new ae(28,new U(6,47),new U(34,48)),new ae(30,new U(46,24),new U(10,25)),new ae(30,new U(2,15),new U(64,16))),new ct(37,Int32Array.from([6,28,54,80,106,132,158]),new ae(30,new U(17,122),new U(4,123)),new ae(28,new U(29,46),new U(14,47)),new ae(30,new U(49,24),new U(10,25)),new ae(30,new U(24,15),new U(46,16))),new ct(38,Int32Array.from([6,32,58,84,110,136,162]),new ae(30,new U(4,122),new U(18,123)),new ae(28,new U(13,46),new U(32,47)),new ae(30,new U(48,24),new U(14,25)),new ae(30,new U(42,15),new U(32,16))),new ct(39,Int32Array.from([6,26,54,82,110,138,166]),new ae(30,new U(20,117),new U(4,118)),new ae(28,new U(40,47),new U(7,48)),new ae(30,new U(43,24),new U(22,25)),new ae(30,new U(10,15),new U(67,16))),new ct(40,Int32Array.from([6,30,58,86,114,142,170]),new ae(30,new U(19,118),new U(6,119)),new ae(28,new U(18,47),new U(31,48)),new ae(30,new U(34,24),new U(34,25)),new ae(30,new U(20,15),new U(61,16)))];var on;(function(k){k[k.DATA_MASK_000=0]="DATA_MASK_000",k[k.DATA_MASK_001=1]="DATA_MASK_001",k[k.DATA_MASK_010=2]="DATA_MASK_010",k[k.DATA_MASK_011=3]="DATA_MASK_011",k[k.DATA_MASK_100=4]="DATA_MASK_100",k[k.DATA_MASK_101=5]="DATA_MASK_101",k[k.DATA_MASK_110=6]="DATA_MASK_110",k[k.DATA_MASK_111=7]="DATA_MASK_111"})(on||(on={}));class Nt{constructor(e,r){this.value=e,this.isMasked=r}unmaskBitMatrix(e,r){for(let s=0;s<r;s++)for(let l=0;l<r;l++)this.isMasked(s,l)&&e.flip(l,s)}}Nt.values=new Map([[on.DATA_MASK_000,new Nt(on.DATA_MASK_000,(k,e)=>(k+e&1)===0)],[on.DATA_MASK_001,new Nt(on.DATA_MASK_001,(k,e)=>(k&1)===0)],[on.DATA_MASK_010,new Nt(on.DATA_MASK_010,(k,e)=>e%3===0)],[on.DATA_MASK_011,new Nt(on.DATA_MASK_011,(k,e)=>(k+e)%3===0)],[on.DATA_MASK_100,new Nt(on.DATA_MASK_100,(k,e)=>(Math.floor(k/2)+Math.floor(e/3)&1)===0)],[on.DATA_MASK_101,new Nt(on.DATA_MASK_101,(k,e)=>k*e%6===0)],[on.DATA_MASK_110,new Nt(on.DATA_MASK_110,(k,e)=>k*e%6<3)],[on.DATA_MASK_111,new Nt(on.DATA_MASK_111,(k,e)=>(k+e+k*e%3&1)===0)]]);class po{constructor(e){const r=e.getHeight();if(r<21||(r&3)!==1)throw new X;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let c=0;c<6;c++)e=this.copyBit(c,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let c=5;c>=0;c--)e=this.copyBit(8,c,e);const r=this.bitMatrix.getHeight();let s=0;const l=r-7;for(let c=r-1;c>=l;c--)s=this.copyBit(8,c,s);for(let c=r-8;c<r;c++)s=this.copyBit(c,8,s);if(this.parsedFormatInfo=Mn.decodeFormatInformation(e,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new X}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return ct.getVersionForNumber(r);let s=0;const l=e-11;for(let d=5;d>=0;d--)for(let p=e-9;p>=l;p--)s=this.copyBit(p,d,s);let c=ct.decodeVersionInformation(s);if(c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;s=0;for(let d=5;d>=0;d--)for(let p=e-9;p>=l;p--)s=this.copyBit(d,p,s);if(c=ct.decodeVersionInformation(s),c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;throw new X}copyBit(e,r,s){return(this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r))?s<<1|1:s<<1}readCodewords(){const e=this.readFormatInformation(),r=this.readVersion(),s=Nt.values.get(e.getDataMask()),l=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,l);const c=r.buildFunctionPattern();let d=!0;const p=new Uint8Array(r.getTotalCodewords());let w=0,E=0,R=0;for(let P=l-1;P>0;P-=2){P===6&&P--;for(let D=0;D<l;D++){const W=d?l-1-D:D;for(let K=0;K<2;K++)c.get(P-K,W)||(R++,E<<=1,this.bitMatrix.get(P-K,W)&&(E|=1),R===8&&(p[w++]=E,R=0,E=0))}d=!d}if(w!==r.getTotalCodewords())throw new X;return p}remask(){if(this.parsedFormatInfo===null)return;const e=Nt.values[this.parsedFormatInfo.getDataMask()],r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let r=0,s=e.getWidth();r<s;r++)for(let l=r+1,c=e.getHeight();l<c;l++)e.get(r,l)!==e.get(l,r)&&(e.flip(l,r),e.flip(r,l))}}class Mi{constructor(e,r){this.numDataCodewords=e,this.codewords=r}static getDataBlocks(e,r,s){if(e.length!==r.getTotalCodewords())throw new I;const l=r.getECBlocksForLevel(s);let c=0;const d=l.getECBlocks();for(const K of d)c+=K.getCount();const p=new Array(c);let w=0;for(const K of d)for(let ee=0;ee<K.getCount();ee++){const oe=K.getDataCodewords(),he=l.getECCodewordsPerBlock()+oe;p[w++]=new Mi(oe,new Uint8Array(he))}const E=p[0].codewords.length;let R=p.length-1;for(;R>=0&&p[R].codewords.length!==E;)R--;R++;const P=E-l.getECCodewordsPerBlock();let D=0;for(let K=0;K<P;K++)for(let ee=0;ee<w;ee++)p[ee].codewords[K]=e[D++];for(let K=R;K<w;K++)p[K].codewords[P]=e[D++];const W=p[0].codewords.length;for(let K=P;K<W;K++)for(let ee=0;ee<w;ee++){const oe=ee<R?K:K+1;p[ee].codewords[oe]=e[D++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var rr;(function(k){k[k.TERMINATOR=0]="TERMINATOR",k[k.NUMERIC=1]="NUMERIC",k[k.ALPHANUMERIC=2]="ALPHANUMERIC",k[k.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",k[k.BYTE=4]="BYTE",k[k.ECI=5]="ECI",k[k.KANJI=6]="KANJI",k[k.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",k[k.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",k[k.HANZI=9]="HANZI"})(rr||(rr={}));class dt{constructor(e,r,s,l){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=s,this.bits=l,dt.FOR_BITS.set(l,this),dt.FOR_VALUE.set(e,this)}static forBits(e){const r=dt.FOR_BITS.get(e);if(r===void 0)throw new I;return r}getCharacterCountBits(e){const r=e.getVersionNumber();let s;return r<=9?s=0:r<=26?s=1:s=2,this.characterCountBitsForVersions[s]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof dt))return!1;const r=e;return this.value===r.value}toString(){return this.stringValue}}dt.FOR_BITS=new Map,dt.FOR_VALUE=new Map,dt.TERMINATOR=new dt(rr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),dt.NUMERIC=new dt(rr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),dt.ALPHANUMERIC=new dt(rr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),dt.STRUCTURED_APPEND=new dt(rr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),dt.BYTE=new dt(rr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),dt.ECI=new dt(rr.ECI,"ECI",Int32Array.from([0,0,0]),7),dt.KANJI=new dt(rr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),dt.FNC1_FIRST_POSITION=new dt(rr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),dt.FNC1_SECOND_POSITION=new dt(rr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),dt.HANZI=new dt(rr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class tn{static decode(e,r,s,l){const c=new ts(e);let d=new De;const p=new Array;let w=-1,E=-1;try{let R=null,P=!1,D;do{if(c.available()<4)D=dt.TERMINATOR;else{const W=c.readBits(4);D=dt.forBits(W)}switch(D){case dt.TERMINATOR:break;case dt.FNC1_FIRST_POSITION:case dt.FNC1_SECOND_POSITION:P=!0;break;case dt.STRUCTURED_APPEND:if(c.available()<16)throw new X;w=c.readBits(8),E=c.readBits(8);break;case dt.ECI:const W=tn.parseECIValue(c);if(R=q.getCharacterSetECIByValue(W),R===null)throw new X;break;case dt.HANZI:const K=c.readBits(4),ee=c.readBits(D.getCharacterCountBits(r));K===tn.GB2312_SUBSET&&tn.decodeHanziSegment(c,d,ee);break;default:const oe=c.readBits(D.getCharacterCountBits(r));switch(D){case dt.NUMERIC:tn.decodeNumericSegment(c,d,oe);break;case dt.ALPHANUMERIC:tn.decodeAlphanumericSegment(c,d,oe,P);break;case dt.BYTE:tn.decodeByteSegment(c,d,oe,R,p,l);break;case dt.KANJI:tn.decodeKanjiSegment(c,d,oe);break;default:throw new X}break}}while(D!==dt.TERMINATOR)}catch{throw new X}return new $e(e,d.toString(),p.length===0?null:p,s===null?null:s.toString(),w,E)}static decodeHanziSegment(e,r,s){if(s*13>e.available())throw new X;const l=new Uint8Array(2*s);let c=0;for(;s>0;){const d=e.readBits(13);let p=d/96<<8&4294967295|d%96;p<959?p+=41377:p+=42657,l[c]=p>>8&255,l[c+1]=p&255,c+=2,s--}try{r.append(Ne.decode(l,Ae.GB2312))}catch(d){throw new X(d)}}static decodeKanjiSegment(e,r,s){if(s*13>e.available())throw new X;const l=new Uint8Array(2*s);let c=0;for(;s>0;){const d=e.readBits(13);let p=d/192<<8&4294967295|d%192;p<7936?p+=33088:p+=49472,l[c]=p>>8,l[c+1]=p,c+=2,s--}try{r.append(Ne.decode(l,Ae.SHIFT_JIS))}catch(d){throw new X(d)}}static decodeByteSegment(e,r,s,l,c,d){if(8*s>e.available())throw new X;const p=new Uint8Array(s);for(let E=0;E<s;E++)p[E]=e.readBits(8);let w;l===null?w=Ae.guessEncoding(p,d):w=l.getName();try{r.append(Ne.decode(p,w))}catch(E){throw new X(E)}c.push(p)}static toAlphaNumericChar(e){if(e>=tn.ALPHANUMERIC_CHARS.length)throw new X;return tn.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,r,s,l){const c=r.length();for(;s>1;){if(e.available()<11)throw new X;const d=e.readBits(11);r.append(tn.toAlphaNumericChar(Math.floor(d/45))),r.append(tn.toAlphaNumericChar(d%45)),s-=2}if(s===1){if(e.available()<6)throw new X;r.append(tn.toAlphaNumericChar(e.readBits(6)))}if(l)for(let d=c;d<r.length();d++)r.charAt(d)==="%"&&(d<r.length()-1&&r.charAt(d+1)==="%"?r.deleteCharAt(d+1):r.setCharAt(d,""))}static decodeNumericSegment(e,r,s){for(;s>=3;){if(e.available()<10)throw new X;const l=e.readBits(10);if(l>=1e3)throw new X;r.append(tn.toAlphaNumericChar(Math.floor(l/100))),r.append(tn.toAlphaNumericChar(Math.floor(l/10)%10)),r.append(tn.toAlphaNumericChar(l%10)),s-=3}if(s===2){if(e.available()<7)throw new X;const l=e.readBits(7);if(l>=100)throw new X;r.append(tn.toAlphaNumericChar(Math.floor(l/10))),r.append(tn.toAlphaNumericChar(l%10))}else if(s===1){if(e.available()<4)throw new X;const l=e.readBits(4);if(l>=10)throw new X;r.append(tn.toAlphaNumericChar(l))}}static parseECIValue(e){const r=e.readBits(8);if(!(r&128))return r&127;if((r&192)===128){const s=e.readBits(8);return(r&63)<<8&4294967295|s}if((r&224)===192){const s=e.readBits(16);return(r&31)<<16&4294967295|s}throw new X}}tn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",tn.GB2312_SUBSET=1;class ns{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const r=e[0];e[0]=e[2],e[2]=r}}class Ms{constructor(){this.rsDecoder=new tt(ue.QR_CODE_FIELD_256)}decodeBooleanArray(e,r){return this.decodeBitMatrix(Ce.parseFromBooleanArray(e),r)}decodeBitMatrix(e,r){const s=new po(e);let l=null;try{return this.decodeBitMatrixParser(s,r)}catch(c){l=c}try{s.remask(),s.setMirror(!0),s.readVersion(),s.readFormatInformation(),s.mirror();const c=this.decodeBitMatrixParser(s,r);return c.setOther(new ns(!0)),c}catch(c){throw l!==null?l:c}}decodeBitMatrixParser(e,r){const s=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),c=e.readCodewords(),d=Mi.getDataBlocks(c,s,l);let p=0;for(const R of d)p+=R.getNumDataCodewords();const w=new Uint8Array(p);let E=0;for(const R of d){const P=R.getCodewords(),D=R.getNumDataCodewords();this.correctErrors(P,D);for(let W=0;W<D;W++)w[E++]=P[W]}return tn.decode(w,s,l,r)}correctErrors(e,r){const s=new Int32Array(e);try{this.rsDecoder.decode(s,e.length-r)}catch{throw new M}for(let l=0;l<r;l++)e[l]=s[l]}}class li extends Ie{constructor(e,r,s){super(e,r),this.estimatedModuleSize=s}aboutEquals(e,r,s){if(Math.abs(r-this.getY())<=e&&Math.abs(s-this.getX())<=e){const l=Math.abs(e-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(e,r,s){const l=(this.getX()+r)/2,c=(this.getY()+e)/2,d=(this.estimatedModuleSize+s)/2;return new li(l,c,d)}}class Le{constructor(e,r,s,l,c,d,p){this.image=e,this.startX=r,this.startY=s,this.width=l,this.height=c,this.moduleSize=d,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,r=this.height,s=this.width,l=e+s,c=this.startY+r/2,d=new Int32Array(3),p=this.image;for(let w=0;w<r;w++){const E=c+(w&1?-Math.floor((w+1)/2):Math.floor((w+1)/2));d[0]=0,d[1]=0,d[2]=0;let R=e;for(;R<l&&!p.get(R,E);)R++;let P=0;for(;R<l;){if(p.get(R,E))if(P===1)d[1]++;else if(P===2){if(this.foundPatternCross(d)){const D=this.handlePossibleCenter(d,E,R);if(D!==null)return D}d[0]=d[2],d[1]=1,d[2]=0,P=1}else d[++P]++;else P===1&&P++,d[P]++;R++}if(this.foundPatternCross(d)){const D=this.handlePossibleCenter(d,E,l);if(D!==null)return D}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new G}static centerFromEnd(e,r){return r-e[2]-e[1]/2}foundPatternCross(e){const r=this.moduleSize,s=r/2;for(let l=0;l<3;l++)if(Math.abs(r-e[l])>=s)return!1;return!0}crossCheckVertical(e,r,s,l){const c=this.image,d=c.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let w=e;for(;w>=0&&c.get(r,w)&&p[1]<=s;)p[1]++,w--;if(w<0||p[1]>s)return NaN;for(;w>=0&&!c.get(r,w)&&p[0]<=s;)p[0]++,w--;if(p[0]>s)return NaN;for(w=e+1;w<d&&c.get(r,w)&&p[1]<=s;)p[1]++,w++;if(w===d||p[1]>s)return NaN;for(;w<d&&!c.get(r,w)&&p[2]<=s;)p[2]++,w++;if(p[2]>s)return NaN;const E=p[0]+p[1]+p[2];return 5*Math.abs(E-l)>=2*l?NaN:this.foundPatternCross(p)?Le.centerFromEnd(p,w):NaN}handlePossibleCenter(e,r,s){const l=e[0]+e[1]+e[2],c=Le.centerFromEnd(e,s),d=this.crossCheckVertical(r,c,2*e[1],l);if(!isNaN(d)){const p=(e[0]+e[1]+e[2])/3;for(const E of this.possibleCenters)if(E.aboutEquals(p,d,c))return E.combineEstimate(d,c,p);const w=new li(c,d,p);this.possibleCenters.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return null}}class rt extends Ie{constructor(e,r,s,l){super(e,r),this.estimatedModuleSize=s,this.count=l,l===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,r,s){if(Math.abs(r-this.getY())<=e&&Math.abs(s-this.getX())<=e){const l=Math.abs(e-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(e,r,s){const l=this.count+1,c=(this.count*this.getX()+r)/l,d=(this.count*this.getY()+e)/l,p=(this.count*this.estimatedModuleSize+s)/l;return new rt(c,d,p,l)}}class It{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Ke{constructor(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const r=e!=null&&e.get(re.TRY_HARDER)!==void 0,s=e!=null&&e.get(re.PURE_BARCODE)!==void 0,l=this.image,c=l.getHeight(),d=l.getWidth();let p=Math.floor(3*c/(4*Ke.MAX_MODULES));(p<Ke.MIN_SKIP||r)&&(p=Ke.MIN_SKIP);let w=!1;const E=new Int32Array(5);for(let P=p-1;P<c&&!w;P+=p){E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0;let D=0;for(let W=0;W<d;W++)if(l.get(W,P))(D&1)===1&&D++,E[D]++;else if(D&1)E[D]++;else if(D===4)if(Ke.foundPatternCross(E)){if(this.handlePossibleCenter(E,P,W,s)===!0)if(p=2,this.hasSkipped===!0)w=this.haveMultiplyConfirmedCenters();else{const ee=this.findRowSkip();ee>E[2]&&(P+=ee-E[2]-p,W=d-1)}else{E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,D=3;continue}D=0,E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0}else E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,D=3;else E[++D]++;Ke.foundPatternCross(E)&&this.handlePossibleCenter(E,P,d,s)===!0&&(p=E[0],this.hasSkipped&&(w=this.haveMultiplyConfirmedCenters()))}const R=this.selectBestPatterns();return Ie.orderBestPatterns(R),new It(R)}static centerFromEnd(e,r){return r-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let r=0;for(let c=0;c<5;c++){const d=e[c];if(d===0)return!1;r+=d}if(r<7)return!1;const s=r/7,l=s/2;return Math.abs(s-e[0])<l&&Math.abs(s-e[1])<l&&Math.abs(3*s-e[2])<3*l&&Math.abs(s-e[3])<l&&Math.abs(s-e[4])<l}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,r,s,l){const c=this.getCrossCheckStateCount();let d=0;const p=this.image;for(;e>=d&&r>=d&&p.get(r-d,e-d);)c[2]++,d++;if(e<d||r<d)return!1;for(;e>=d&&r>=d&&!p.get(r-d,e-d)&&c[1]<=s;)c[1]++,d++;if(e<d||r<d||c[1]>s)return!1;for(;e>=d&&r>=d&&p.get(r-d,e-d)&&c[0]<=s;)c[0]++,d++;if(c[0]>s)return!1;const w=p.getHeight(),E=p.getWidth();for(d=1;e+d<w&&r+d<E&&p.get(r+d,e+d);)c[2]++,d++;if(e+d>=w||r+d>=E)return!1;for(;e+d<w&&r+d<E&&!p.get(r+d,e+d)&&c[3]<s;)c[3]++,d++;if(e+d>=w||r+d>=E||c[3]>=s)return!1;for(;e+d<w&&r+d<E&&p.get(r+d,e+d)&&c[4]<s;)c[4]++,d++;if(c[4]>=s)return!1;const R=c[0]+c[1]+c[2]+c[3]+c[4];return Math.abs(R-l)<2*l&&Ke.foundPatternCross(c)}crossCheckVertical(e,r,s,l){const c=this.image,d=c.getHeight(),p=this.getCrossCheckStateCount();let w=e;for(;w>=0&&c.get(r,w);)p[2]++,w--;if(w<0)return NaN;for(;w>=0&&!c.get(r,w)&&p[1]<=s;)p[1]++,w--;if(w<0||p[1]>s)return NaN;for(;w>=0&&c.get(r,w)&&p[0]<=s;)p[0]++,w--;if(p[0]>s)return NaN;for(w=e+1;w<d&&c.get(r,w);)p[2]++,w++;if(w===d)return NaN;for(;w<d&&!c.get(r,w)&&p[3]<s;)p[3]++,w++;if(w===d||p[3]>=s)return NaN;for(;w<d&&c.get(r,w)&&p[4]<s;)p[4]++,w++;if(p[4]>=s)return NaN;const E=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(E-l)>=2*l?NaN:Ke.foundPatternCross(p)?Ke.centerFromEnd(p,w):NaN}crossCheckHorizontal(e,r,s,l){const c=this.image,d=c.getWidth(),p=this.getCrossCheckStateCount();let w=e;for(;w>=0&&c.get(w,r);)p[2]++,w--;if(w<0)return NaN;for(;w>=0&&!c.get(w,r)&&p[1]<=s;)p[1]++,w--;if(w<0||p[1]>s)return NaN;for(;w>=0&&c.get(w,r)&&p[0]<=s;)p[0]++,w--;if(p[0]>s)return NaN;for(w=e+1;w<d&&c.get(w,r);)p[2]++,w++;if(w===d)return NaN;for(;w<d&&!c.get(w,r)&&p[3]<s;)p[3]++,w++;if(w===d||p[3]>=s)return NaN;for(;w<d&&c.get(w,r)&&p[4]<s;)p[4]++,w++;if(p[4]>=s)return NaN;const E=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(E-l)>=l?NaN:Ke.foundPatternCross(p)?Ke.centerFromEnd(p,w):NaN}handlePossibleCenter(e,r,s,l){const c=e[0]+e[1]+e[2]+e[3]+e[4];let d=Ke.centerFromEnd(e,s),p=this.crossCheckVertical(r,Math.floor(d),e[2],c);if(!isNaN(p)&&(d=this.crossCheckHorizontal(Math.floor(d),Math.floor(p),e[2],c),!isNaN(d)&&(!l||this.crossCheckDiagonal(Math.floor(p),Math.floor(d),e[2],c)))){const w=c/7;let E=!1;const R=this.possibleCenters;for(let P=0,D=R.length;P<D;P++){const W=R[P];if(W.aboutEquals(w,p,d)){R[P]=W.combineEstimate(p,d,w),E=!0;break}}if(!E){const P=new rt(d,p,w);R.push(P),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(P)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let r=null;for(const s of this.possibleCenters)if(s.getCount()>=Ke.CENTER_QUORUM)if(r==null)r=s;else return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-s.getX())-Math.abs(r.getY()-s.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,r=0;const s=this.possibleCenters.length;for(const d of this.possibleCenters)d.getCount()>=Ke.CENTER_QUORUM&&(e++,r+=d.getEstimatedModuleSize());if(e<3)return!1;const l=r/s;let c=0;for(const d of this.possibleCenters)c+=Math.abs(d.getEstimatedModuleSize()-l);return c<=.05*r}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new G;const r=this.possibleCenters;let s;if(e>3){let l=0,c=0;for(const w of this.possibleCenters){const E=w.getEstimatedModuleSize();l+=E,c+=E*E}s=l/e;let d=Math.sqrt(c/e-s*s);r.sort((w,E)=>{const R=Math.abs(E.getEstimatedModuleSize()-s),P=Math.abs(w.getEstimatedModuleSize()-s);return R<P?-1:R>P?1:0});const p=Math.max(.2*s,d);for(let w=0;w<r.length&&r.length>3;w++){const E=r[w];Math.abs(E.getEstimatedModuleSize()-s)>p&&(r.splice(w,1),w--)}}if(r.length>3){let l=0;for(const c of r)l+=c.getEstimatedModuleSize();s=l/r.length,r.sort((c,d)=>{if(d.getCount()===c.getCount()){const p=Math.abs(d.getEstimatedModuleSize()-s),w=Math.abs(c.getEstimatedModuleSize()-s);return p<w?1:p>w?-1:0}else return d.getCount()-c.getCount()}),r.splice(3)}return[r[0],r[1],r[2]]}}Ke.CENTER_QUORUM=2,Ke.MIN_SKIP=3,Ke.MAX_MODULES=57;class Dt{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(re.NEED_RESULT_POINT_CALLBACK);const s=new Ke(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(s)}processFinderPatternInfo(e){const r=e.getTopLeft(),s=e.getTopRight(),l=e.getBottomLeft(),c=this.calculateModuleSize(r,s,l);if(c<1)throw new G("No pattern found in proccess finder.");const d=Dt.computeDimension(r,s,l,c),p=ct.getProvisionalVersionForDimension(d),w=p.getDimensionForVersion()-7;let E=null;if(p.getAlignmentPatternCenters().length>0){const W=s.getX()-r.getX()+l.getX(),K=s.getY()-r.getY()+l.getY(),ee=1-3/w,oe=Math.floor(r.getX()+ee*(W-r.getX())),he=Math.floor(r.getY()+ee*(K-r.getY()));for(let Fe=4;Fe<=16;Fe<<=1)try{E=this.findAlignmentInRegion(c,oe,he,Fe);break}catch(He){if(!(He instanceof G))throw He}}const R=Dt.createTransform(r,s,l,E,d),P=Dt.sampleGrid(this.image,R,d);let D;return E===null?D=[l,r,s]:D=[l,r,s,E],new vt(P,D)}static createTransform(e,r,s,l,c){const d=c-3.5;let p,w,E,R;return l!==null?(p=l.getX(),w=l.getY(),E=d-3,R=E):(p=r.getX()-e.getX()+s.getX(),w=r.getY()-e.getY()+s.getY(),E=d,R=d),St.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,E,R,3.5,d,e.getX(),e.getY(),r.getX(),r.getY(),p,w,s.getX(),s.getY())}static sampleGrid(e,r,s){return lt.getInstance().sampleGridWithTransform(e,s,s,r)}static computeDimension(e,r,s,l){const c=We.round(Ie.distance(e,r)/l),d=We.round(Ie.distance(e,s)/l);let p=Math.floor((c+d)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new G("Dimensions could be not found.")}return p}calculateModuleSize(e,r,s){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,s))/2}calculateModuleSizeOneWay(e,r){const s=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(s)?l/7:isNaN(l)?s/7:(s+l)/14}sizeOfBlackWhiteBlackRunBothWays(e,r,s,l){let c=this.sizeOfBlackWhiteBlackRun(e,r,s,l),d=1,p=e-(s-e);p<0?(d=e/(e-p),p=0):p>=this.image.getWidth()&&(d=(this.image.getWidth()-1-e)/(p-e),p=this.image.getWidth()-1);let w=Math.floor(r-(l-r)*d);return d=1,w<0?(d=r/(r-w),w=0):w>=this.image.getHeight()&&(d=(this.image.getHeight()-1-r)/(w-r),w=this.image.getHeight()-1),p=Math.floor(e+(p-e)*d),c+=this.sizeOfBlackWhiteBlackRun(e,r,p,w),c-1}sizeOfBlackWhiteBlackRun(e,r,s,l){const c=Math.abs(l-r)>Math.abs(s-e);if(c){let W=e;e=r,r=W,W=s,s=l,l=W}const d=Math.abs(s-e),p=Math.abs(l-r);let w=-d/2;const E=e<s?1:-1,R=r<l?1:-1;let P=0;const D=s+E;for(let W=e,K=r;W!==D;W+=E){const ee=c?K:W,oe=c?W:K;if(P===1===this.image.get(ee,oe)){if(P===2)return We.distance(W,K,e,r);P++}if(w+=p,w>0){if(K===l)break;K+=R,w-=d}}return P===2?We.distance(s+E,l,e,r):NaN}findAlignmentInRegion(e,r,s,l){const c=Math.floor(l*e),d=Math.max(0,r-c),p=Math.min(this.image.getWidth()-1,r+c);if(p-d<e*3)throw new G("Alignment top exceeds estimated module size.");const w=Math.max(0,s-c),E=Math.min(this.image.getHeight()-1,s+c);if(E-w<e*3)throw new G("Alignment bottom exceeds estimated module size.");return new Le(this.image,d,w,p-d,E-w,e,this.resultPointCallback).find()}}class an{constructor(){this.decoder=new Ms}getDecoder(){return this.decoder}decode(e,r){let s,l;if(r!=null&&r.get(re.PURE_BARCODE)!==void 0){const w=an.extractPureBits(e.getBlackMatrix());s=this.decoder.decodeBitMatrix(w,r),l=an.NO_POINTS}else{const w=new Dt(e.getBlackMatrix()).detect(r);s=this.decoder.decodeBitMatrix(w.getBits(),r),l=w.getPoints()}s.getOther()instanceof ns&&s.getOther().applyMirroredCorrection(l);const c=new Ge(s.getText(),s.getRawBytes(),void 0,l,te.QR_CODE,void 0),d=s.getByteSegments();d!==null&&c.putMetadata(Pe.BYTE_SEGMENTS,d);const p=s.getECLevel();return p!==null&&c.putMetadata(Pe.ERROR_CORRECTION_LEVEL,p),s.hasStructuredAppend()&&(c.putMetadata(Pe.STRUCTURED_APPEND_SEQUENCE,s.getStructuredAppendSequenceNumber()),c.putMetadata(Pe.STRUCTURED_APPEND_PARITY,s.getStructuredAppendParity())),c}reset(){}static extractPureBits(e){const r=e.getTopLeftOnBit(),s=e.getBottomRightOnBit();if(r===null||s===null)throw new G;const l=this.moduleSize(r,e);let c=r[1],d=s[1],p=r[0],w=s[0];if(p>=w||c>=d)throw new G;if(d-c!==w-p&&(w=p+(d-c),w>=e.getWidth()))throw new G;const E=Math.round((w-p+1)/l),R=Math.round((d-c+1)/l);if(E<=0||R<=0)throw new G;if(R!==E)throw new G;const P=Math.floor(l/2);c+=P,p+=P;const D=p+Math.floor((E-1)*l)-w;if(D>0){if(D>P)throw new G;p-=D}const W=c+Math.floor((R-1)*l)-d;if(W>0){if(W>P)throw new G;c-=W}const K=new Ce(E,R);for(let ee=0;ee<R;ee++){const oe=c+Math.floor(ee*l);for(let he=0;he<E;he++)e.get(p+Math.floor(he*l),oe)&&K.set(he,ee)}return K}static moduleSize(e,r){const s=r.getHeight(),l=r.getWidth();let c=e[0],d=e[1],p=!0,w=0;for(;c<l&&d<s;){if(p!==r.get(c,d)){if(++w===5)break;p=!p}c++,d++}if(c===l||d===s)throw new G;return(c-e[0])/7}}an.NO_POINTS=new Array;class mt{PDF417Common(){}static getBitCountSum(e){return We.sum(e)}static toIntArray(e){if(e==null||!e.length)return mt.EMPTY_INT_ARRAY;const r=new Int32Array(e.length);let s=0;for(const l of e)r[s++]=l;return r}static getCodeword(e){const r=V.binarySearch(mt.SYMBOL_TABLE,e&262143);return r<0?-1:(mt.CODEWORD_TABLE[r]-1)%mt.NUMBER_OF_CODEWORDS}}mt.NUMBER_OF_CODEWORDS=929,mt.MAX_CODEWORDS_IN_BARCODE=mt.NUMBER_OF_CODEWORDS-1,mt.MIN_ROWS_IN_BARCODE=3,mt.MAX_ROWS_IN_BARCODE=90,mt.MODULES_IN_CODEWORD=17,mt.MODULES_IN_STOP_PATTERN=18,mt.BARS_IN_MODULE=8,mt.EMPTY_INT_ARRAY=new Int32Array([]),mt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),mt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Os{constructor(e,r){this.bits=e,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class Ct{static detectMultiple(e,r,s){let l=e.getBlackMatrix(),c=Ct.detect(s,l);return c.length||(l=l.clone(),l.rotate180(),c=Ct.detect(s,l)),new Os(l,c)}static detect(e,r){const s=new Array;let l=0,c=0,d=!1;for(;l<r.getHeight();){const p=Ct.findVertices(r,l,c);if(p[0]==null&&p[3]==null){if(!d)break;d=!1,c=0;for(const w of s)w[1]!=null&&(l=Math.trunc(Math.max(l,w[1].getY()))),w[3]!=null&&(l=Math.max(l,Math.trunc(w[3].getY())));l+=Ct.ROW_STEP;continue}if(d=!0,s.push(p),!e)break;p[2]!=null?(c=Math.trunc(p[2].getX()),l=Math.trunc(p[2].getY())):(c=Math.trunc(p[4].getX()),l=Math.trunc(p[4].getY()))}return s}static findVertices(e,r,s){const l=e.getHeight(),c=e.getWidth(),d=new Array(8);return Ct.copyToResult(d,Ct.findRowsWithPattern(e,l,c,r,s,Ct.START_PATTERN),Ct.INDEXES_START_PATTERN),d[4]!=null&&(s=Math.trunc(d[4].getX()),r=Math.trunc(d[4].getY())),Ct.copyToResult(d,Ct.findRowsWithPattern(e,l,c,r,s,Ct.STOP_PATTERN),Ct.INDEXES_STOP_PATTERN),d}static copyToResult(e,r,s){for(let l=0;l<s.length;l++)e[s[l]]=r[l]}static findRowsWithPattern(e,r,s,l,c,d){const p=new Array(4);let w=!1;const E=new Int32Array(d.length);for(;l<r;l+=Ct.ROW_STEP){let P=Ct.findGuardPattern(e,c,l,s,!1,d,E);if(P!=null){for(;l>0;){const D=Ct.findGuardPattern(e,c,--l,s,!1,d,E);if(D!=null)P=D;else{l++;break}}p[0]=new Ie(P[0],l),p[1]=new Ie(P[1],l),w=!0;break}}let R=l+1;if(w){let P=0,D=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;R<r;R++){const W=Ct.findGuardPattern(e,D[0],R,s,!1,d,E);if(W!=null&&Math.abs(D[0]-W[0])<Ct.MAX_PATTERN_DRIFT&&Math.abs(D[1]-W[1])<Ct.MAX_PATTERN_DRIFT)D=W,P=0;else{if(P>Ct.SKIPPED_ROW_COUNT_MAX)break;P++}}R-=P+1,p[2]=new Ie(D[0],R),p[3]=new Ie(D[1],R)}return R-l<Ct.BARCODE_MIN_HEIGHT&&V.fill(p,null),p}static findGuardPattern(e,r,s,l,c,d,p){V.fillWithin(p,0,p.length,0);let w=r,E=0;for(;e.get(w,s)&&w>0&&E++<Ct.MAX_PIXEL_DRIFT;)w--;let R=w,P=0,D=d.length;for(let W=c;R<l;R++)if(e.get(R,s)!==W)p[P]++;else{if(P===D-1){if(Ct.patternMatchVariance(p,d,Ct.MAX_INDIVIDUAL_VARIANCE)<Ct.MAX_AVG_VARIANCE)return new Int32Array([w,R]);w+=p[0]+p[1],B.arraycopy(p,2,p,0,P-1),p[P-1]=0,p[P]=0,P--}else P++;p[P]=1,W=!W}return P===D-1&&Ct.patternMatchVariance(p,d,Ct.MAX_INDIVIDUAL_VARIANCE)<Ct.MAX_AVG_VARIANCE?new Int32Array([w,R-1]):null}static patternMatchVariance(e,r,s){let l=e.length,c=0,d=0;for(let E=0;E<l;E++)c+=e[E],d+=r[E];if(c<d)return 1/0;let p=c/d;s*=p;let w=0;for(let E=0;E<l;E++){let R=e[E],P=r[E]*p,D=R>P?R-P:P-R;if(D>s)return 1/0;w+=D}return w/c}}Ct.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ct.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ct.MAX_AVG_VARIANCE=.42,Ct.MAX_INDIVIDUAL_VARIANCE=.8,Ct.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ct.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ct.MAX_PIXEL_DRIFT=3,Ct.MAX_PATTERN_DRIFT=5,Ct.SKIPPED_ROW_COUNT_MAX=25,Ct.ROW_STEP=5,Ct.BARCODE_MIN_HEIGHT=10;class vn{constructor(e,r){if(r.length===0)throw new I;this.field=e;let s=r.length;if(s>1&&r[0]===0){let l=1;for(;l<s&&r[l]===0;)l++;l===s?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(s-l),B.arraycopy(r,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let l=0;for(let c of this.coefficients)l=this.field.add(l,c);return l}let r=this.coefficients[0],s=this.coefficients.length;for(let l=1;l<s;l++)r=this.field.add(this.field.multiply(e,r),this.coefficients[l]);return r}add(e){if(!this.field.equals(e.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let r=this.coefficients,s=e.coefficients;if(r.length>s.length){let d=r;r=s,s=d}let l=new Int32Array(s.length),c=s.length-r.length;B.arraycopy(s,0,l,0,c);for(let d=c;d<s.length;d++)l[d]=this.field.add(r[d-c],s[d]);return new vn(this.field,l)}subtract(e){if(!this.field.equals(e.field))throw new I("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof vn?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new vn(this.field,new Int32Array([0]));let r=this.coefficients,s=r.length,l=e.coefficients,c=l.length,d=new Int32Array(s+c-1);for(let p=0;p<s;p++){let w=r[p];for(let E=0;E<c;E++)d[p+E]=this.field.add(d[p+E],this.field.multiply(w,l[E]))}return new vn(this.field,d)}negative(){let e=this.coefficients.length,r=new Int32Array(e);for(let s=0;s<e;s++)r[s]=this.field.subtract(0,this.coefficients[s]);return new vn(this.field,r)}multiplyScalar(e){if(e===0)return new vn(this.field,new Int32Array([0]));if(e===1)return this;let r=this.coefficients.length,s=new Int32Array(r);for(let l=0;l<r;l++)s[l]=this.field.multiply(this.coefficients[l],e);return new vn(this.field,s)}multiplyByMonomial(e,r){if(e<0)throw new I;if(r===0)return new vn(this.field,new Int32Array([0]));let s=this.coefficients.length,l=new Int32Array(s+e);for(let c=0;c<s;c++)l[c]=this.field.multiply(this.coefficients[c],r);return new vn(this.field,l)}toString(){let e=new De;for(let r=this.getDegree();r>=0;r--){let s=this.getCoefficient(r);s!==0&&(s<0?(e.append(" - "),s=-s):e.length()>0&&e.append(" + "),(r===0||s!==1)&&e.append(s),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()}}class ta{add(e,r){return(e+r)%this.modulus}subtract(e,r){return(this.modulus+e-r)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new I;return this.logTable[e]}inverse(e){if(e===0)throw new ie;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class Cn extends ta{constructor(e,r){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let s=1;for(let l=0;l<e;l++)this.expTable[l]=s,s=s*r%e;for(let l=0;l<e-1;l++)this.logTable[this.expTable[l]]=l;this.zero=new vn(this,new Int32Array([0])),this.one=new vn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,r){if(e<0)throw new I;if(r===0)return this.zero;let s=new Int32Array(e+1);return s[0]=r,new vn(this,s)}}Cn.PDF417_GF=new Cn(mt.NUMBER_OF_CODEWORDS,3);class Ir{constructor(){this.field=Cn.PDF417_GF}decode(e,r,s){let l=new vn(this.field,e),c=new Int32Array(r),d=!1;for(let K=r;K>0;K--){let ee=l.evaluateAt(this.field.exp(K));c[r-K]=ee,ee!==0&&(d=!0)}if(!d)return 0;let p=this.field.getOne();if(s!=null)for(const K of s){let ee=this.field.exp(e.length-1-K),oe=new vn(this.field,new Int32Array([this.field.subtract(0,ee),1]));p=p.multiply(oe)}let w=new vn(this.field,c),E=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),w,r),R=E[0],P=E[1],D=this.findErrorLocations(R),W=this.findErrorMagnitudes(P,R,D);for(let K=0;K<D.length;K++){let ee=e.length-1-this.field.log(D[K]);if(ee<0)throw M.getChecksumInstance();e[ee]=this.field.subtract(e[ee],W[K])}return D.length}runEuclideanAlgorithm(e,r,s){if(e.getDegree()<r.getDegree()){let D=e;e=r,r=D}let l=e,c=r,d=this.field.getZero(),p=this.field.getOne();for(;c.getDegree()>=Math.round(s/2);){let D=l,W=d;if(l=c,d=p,l.isZero())throw M.getChecksumInstance();c=D;let K=this.field.getZero(),ee=l.getCoefficient(l.getDegree()),oe=this.field.inverse(ee);for(;c.getDegree()>=l.getDegree()&&!c.isZero();){let he=c.getDegree()-l.getDegree(),Fe=this.field.multiply(c.getCoefficient(c.getDegree()),oe);K=K.add(this.field.buildMonomial(he,Fe)),c=c.subtract(l.multiplyByMonomial(he,Fe))}p=K.multiply(d).subtract(W).negative()}let w=p.getCoefficient(0);if(w===0)throw M.getChecksumInstance();let E=this.field.inverse(w),R=p.multiply(E),P=c.multiply(E);return[R,P]}findErrorLocations(e){let r=e.getDegree(),s=new Int32Array(r),l=0;for(let c=1;c<this.field.getSize()&&l<r;c++)e.evaluateAt(c)===0&&(s[l]=this.field.inverse(c),l++);if(l!==r)throw M.getChecksumInstance();return s}findErrorMagnitudes(e,r,s){let l=r.getDegree(),c=new Int32Array(l);for(let E=1;E<=l;E++)c[l-E]=this.field.multiply(E,r.getCoefficient(E));let d=new vn(this.field,c),p=s.length,w=new Int32Array(p);for(let E=0;E<p;E++){let R=this.field.inverse(s[E]),P=this.field.subtract(0,e.evaluateAt(R)),D=this.field.inverse(d.evaluateAt(R));w[E]=this.field.multiply(P,D)}return w}}class Ur{constructor(e,r,s,l,c){e instanceof Ur?this.constructor_2(e):this.constructor_1(e,r,s,l,c)}constructor_1(e,r,s,l,c){const d=r==null||s==null,p=l==null||c==null;if(d&&p)throw new G;d?(r=new Ie(0,l.getY()),s=new Ie(0,c.getY())):p&&(l=new Ie(e.getWidth()-1,r.getY()),c=new Ie(e.getWidth()-1,s.getY())),this.image=e,this.topLeft=r,this.bottomLeft=s,this.topRight=l,this.bottomRight=c,this.minX=Math.trunc(Math.min(r.getX(),s.getX())),this.maxX=Math.trunc(Math.max(l.getX(),c.getX())),this.minY=Math.trunc(Math.min(r.getY(),l.getY())),this.maxY=Math.trunc(Math.max(s.getY(),c.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,r){return e==null?r:r==null?e:new Ur(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)}addMissingRows(e,r,s){let l=this.topLeft,c=this.bottomLeft,d=this.topRight,p=this.bottomRight;if(e>0){let w=s?this.topLeft:this.topRight,E=Math.trunc(w.getY()-e);E<0&&(E=0);let R=new Ie(w.getX(),E);s?l=R:d=R}if(r>0){let w=s?this.bottomLeft:this.bottomRight,E=Math.trunc(w.getY()+r);E>=this.image.getHeight()&&(E=this.image.getHeight()-1);let R=new Ie(w.getX(),E);s?c=R:p=R}return new Ur(this.image,l,c,d,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class ur{constructor(e,r,s,l){this.columnCount=e,this.errorCorrectionLevel=l,this.rowCountUpperPart=r,this.rowCountLowerPart=s,this.rowCount=r+s}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class On{constructor(){this.buffer=""}static form(e,r){let s=-1;function l(d,p,w,E,R,P){if(d==="%%")return"%";if(r[++s]===void 0)return;d=E?parseInt(E.substr(1)):void 0;let D=R?parseInt(R.substr(1)):void 0,W;switch(P){case"s":W=r[s];break;case"c":W=r[s][0];break;case"f":W=parseFloat(r[s]).toFixed(d);break;case"p":W=parseFloat(r[s]).toPrecision(d);break;case"e":W=parseFloat(r[s]).toExponential(d);break;case"x":W=parseInt(r[s]).toString(D||16);break;case"d":W=parseFloat(parseInt(r[s],D||10).toPrecision(d)).toFixed(0);break}W=typeof W=="object"?JSON.stringify(W):(+W).toString(D);let K=parseInt(w),ee=w&&w[0]+""=="0"?"0":" ";for(;W.length<K;)W=p!==void 0?W+ee:ee+W;return W}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(c,l)}format(e,...r){this.buffer+=On.form(e,r)}toString(){return this.buffer}}class Mr{constructor(e){this.boundingBox=new Ur(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let r=this.getCodeword(e);if(r!=null)return r;for(let s=1;s<Mr.MAX_NEARBY_DISTANCE;s++){let l=this.imageRowToCodewordIndex(e)-s;if(l>=0&&(r=this.codewords[l],r!=null)||(l=this.imageRowToCodewordIndex(e)+s,l<this.codewords.length&&(r=this.codewords[l],r!=null)))return r}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new On;let r=0;for(const s of this.codewords){if(s==null){e.format("%3d:    |   %n",r++);continue}e.format("%3d: %3d|%3d%n",r++,s.getRowNumber(),s.getValue())}return e.toString()}}Mr.MAX_NEARBY_DISTANCE=5;class vi{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)}getValue(){let e=-1,r=new Array;for(const[s,l]of this.values.entries()){const c={getKey:()=>s,getValue:()=>l};c.getValue()>e?(e=c.getValue(),r=[],r.push(c.getKey())):c.getValue()===e&&r.push(c.getKey())}return mt.toIntArray(r)}getConfidence(e){return this.values.get(e)}}class ul extends Mr{constructor(e,r){super(e),this._isLeft=r}setRowNumbers(){for(let e of this.getCodewords())e!=null&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,e);let s=this.getBoundingBox(),l=this._isLeft?s.getTopLeft():s.getTopRight(),c=this._isLeft?s.getBottomLeft():s.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),p=this.imageRowToCodewordIndex(Math.trunc(c.getY())),w=-1,E=1,R=0;for(let P=d;P<p;P++){if(r[P]==null)continue;let D=r[P],W=D.getRowNumber()-w;if(W===0)R++;else if(W===1)E=Math.max(E,R),R=1,w=D.getRowNumber();else if(W<0||D.getRowNumber()>=e.getRowCount()||W>P)r[P]=null;else{let K;E>2?K=(E-2)*W:K=W;let ee=K>=P;for(let oe=1;oe<=K&&!ee;oe++)ee=r[P-oe]!=null;ee?r[P]=null:(w=D.getRowNumber(),R=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let r=new Int32Array(e.getRowCount());for(let s of this.getCodewords())if(s!=null){let l=s.getRowNumber();if(l>=r.length)continue;r[l]++}return r}adjustIncompleteIndicatorColumnRowNumbers(e){let r=this.getBoundingBox(),s=this._isLeft?r.getTopLeft():r.getTopRight(),l=this._isLeft?r.getBottomLeft():r.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),p=this.getCodewords(),w=-1;for(let E=c;E<d;E++){if(p[E]==null)continue;let R=p[E];R.setRowNumberAsRowIndicatorColumn();let P=R.getRowNumber()-w;P===0||(P===1?w=R.getRowNumber():R.getRowNumber()>=e.getRowCount()?p[E]=null:w=R.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),r=new vi,s=new vi,l=new vi,c=new vi;for(let p of e){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let w=p.getValue()%30,E=p.getRowNumber();switch(this._isLeft||(E+=2),E%3){case 0:s.setValue(w*3+1);break;case 1:c.setValue(w/3),l.setValue(w%3);break;case 2:r.setValue(w+1);break}}if(r.getValue().length===0||s.getValue().length===0||l.getValue().length===0||c.getValue().length===0||r.getValue()[0]<1||s.getValue()[0]+l.getValue()[0]<mt.MIN_ROWS_IN_BARCODE||s.getValue()[0]+l.getValue()[0]>mt.MAX_ROWS_IN_BARCODE)return null;let d=new ur(r.getValue()[0],s.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(e,d),d}removeIncorrectCodewords(e,r){for(let s=0;s<e.length;s++){let l=e[s];if(e[s]==null)continue;let c=l.getValue()%30,d=l.getRowNumber();if(d>r.getRowCount()){e[s]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:c*3+1!==r.getRowCountUpperPart()&&(e[s]=null);break;case 1:(Math.trunc(c/3)!==r.getErrorCorrectionLevel()||c%3!==r.getRowCountLowerPart())&&(e[s]=null);break;case 2:c+1!==r.getColumnCount()&&(e[s]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ds{constructor(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=mt.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let r=1;r<this.barcodeColumnCount+1;r++){let s=this.detectionResultColumns[r].getCodewords();for(let l=0;l<s.length;l++)s[l]!=null&&(s[l].hasValidRowNumber()||this.adjustRowNumbers(r,l,s))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let s=0;s<e.length;s++)if(e[s]!=null&&r[s]!=null&&e[s].getRowNumber()===r[s].getRowNumber())for(let l=1;l<=this.barcodeColumnCount;l++){let c=this.detectionResultColumns[l].getCodewords()[s];c!=null&&(c.setRowNumber(e[s].getRowNumber()),c.hasValidRowNumber()||(this.detectionResultColumns[l].getCodewords()[s]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let s=0;s<r.length;s++){if(r[s]==null)continue;let l=r[s].getRowNumber(),c=0;for(let d=this.barcodeColumnCount+1;d>0&&c<this.ADJUST_ROW_NUMBER_SKIP;d--){let p=this.detectionResultColumns[d].getCodewords()[s];p!=null&&(c=Ds.adjustRowNumberIfValid(l,c,p),p.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,r=this.detectionResultColumns[0].getCodewords();for(let s=0;s<r.length;s++){if(r[s]==null)continue;let l=r[s].getRowNumber(),c=0;for(let d=1;d<this.barcodeColumnCount+1&&c<this.ADJUST_ROW_NUMBER_SKIP;d++){let p=this.detectionResultColumns[d].getCodewords()[s];p!=null&&(c=Ds.adjustRowNumberIfValid(l,c,p),p.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,r,s){return s==null||s.hasValidRowNumber()||(s.isValidRowNumber(e)?(s.setRowNumber(e),r=0):++r),r}adjustRowNumbers(e,r,s){if(!this.detectionResultColumns[e-1])return;let l=s[r],c=this.detectionResultColumns[e-1].getCodewords(),d=c;this.detectionResultColumns[e+1]!=null&&(d=this.detectionResultColumns[e+1].getCodewords());let p=new Array(14);p[2]=c[r],p[3]=d[r],r>0&&(p[0]=s[r-1],p[4]=c[r-1],p[5]=d[r-1]),r>1&&(p[8]=s[r-2],p[10]=c[r-2],p[11]=d[r-2]),r<s.length-1&&(p[1]=s[r+1],p[6]=c[r+1],p[7]=d[r+1]),r<s.length-2&&(p[9]=s[r+2],p[12]=c[r+2],p[13]=d[r+2]);for(let w of p)if(Ds.adjustRowNumber(l,w))return}static adjustRowNumber(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,r){this.detectionResultColumns[e]=r}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let r=new On;for(let s=0;s<e.getCodewords().length;s++){r.format("CW %3d:",s);for(let l=0;l<this.barcodeColumnCount+2;l++){if(this.detectionResultColumns[l]==null){r.format("    |   ");continue}let c=this.detectionResultColumns[l].getCodewords()[s];if(c==null){r.format("    |   ");continue}r.format(" %3d|%3d",c.getRowNumber(),c.getValue())}r.format("%n")}return r.toString()}}class Oi{constructor(e,r,s,l){this.rowNumber=Oi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(s),this.value=Math.trunc(l)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==Oi.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}Oi.BARCODE_ROW_UNKNOWN=-1;class Kn{static initialize(){for(let e=0;e<mt.SYMBOL_TABLE.length;e++){let r=mt.SYMBOL_TABLE[e],s=r&1;for(let l=0;l<mt.BARS_IN_MODULE;l++){let c=0;for(;(r&1)===s;)c+=1,r>>=1;s=r&1,Kn.RATIOS_TABLE[e]||(Kn.RATIOS_TABLE[e]=new Array(mt.BARS_IN_MODULE)),Kn.RATIOS_TABLE[e][mt.BARS_IN_MODULE-l-1]=Math.fround(c/mt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let r=Kn.getDecodedCodewordValue(Kn.sampleBitCounts(e));return r!==-1?r:Kn.getClosestDecodedValue(e)}static sampleBitCounts(e){let r=We.sum(e),s=new Int32Array(mt.BARS_IN_MODULE),l=0,c=0;for(let d=0;d<mt.MODULES_IN_CODEWORD;d++){let p=r/(2*mt.MODULES_IN_CODEWORD)+d*r/mt.MODULES_IN_CODEWORD;c+e[l]<=p&&(c+=e[l],l++),s[l]++}return s}static getDecodedCodewordValue(e){let r=Kn.getBitValue(e);return mt.getCodeword(r)===-1?-1:r}static getBitValue(e){let r=0;for(let s=0;s<e.length;s++)for(let l=0;l<e[s];l++)r=r<<1|(s%2===0?1:0);return Math.trunc(r)}static getClosestDecodedValue(e){let r=We.sum(e),s=new Array(mt.BARS_IN_MODULE);if(r>1)for(let d=0;d<s.length;d++)s[d]=Math.fround(e[d]/r);let l=wt.MAX_VALUE,c=-1;this.bSymbolTableReady||Kn.initialize();for(let d=0;d<Kn.RATIOS_TABLE.length;d++){let p=0,w=Kn.RATIOS_TABLE[d];for(let E=0;E<mt.BARS_IN_MODULE;E++){let R=Math.fround(w[E]-s[E]);if(p+=Math.fround(R*R),p>=l)break}p<l&&(l=p,c=mt.SYMBOL_TABLE[d])}return c}}Kn.bSymbolTableReady=!1,Kn.RATIOS_TABLE=new Array(mt.SYMBOL_TABLE.length).map(k=>new Array(mt.BARS_IN_MODULE));class go{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class na{static parseLong(e,r=void 0){return parseInt(e,r)}}class ci extends C{}ci.kind="NullPointerException";class ra{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,r,s){if(e==null)throw new ci;if(r<0||r>e.length||s<0||r+s>e.length||r+s<0)throw new j;if(s===0)return;for(let l=0;l<s;l++)this.write(e[r+l])}flush(){}close(){}}class xo extends C{}class dl extends ra{constructor(e=32){if(super(),this.count=0,e<0)throw new I("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let s=this.buf.length<<1;if(s-e<0&&(s=e),s<0){if(e<0)throw new xo;s=F.MAX_VALUE}this.buf=V.copyOfUint8Array(this.buf,s)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,r,s){if(r<0||r>e.length||s<0||r+s-e.length>0)throw new j;this.ensureCapacity(this.count+s),B.arraycopy(e,r,this.buf,this.count,s),this.count+=s}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return V.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var Ht;(function(k){k[k.ALPHA=0]="ALPHA",k[k.LOWER=1]="LOWER",k[k.MIXED=2]="MIXED",k[k.PUNCT=3]="PUNCT",k[k.ALPHA_SHIFT=4]="ALPHA_SHIFT",k[k.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ht||(Ht={}));function Ls(){if(typeof window<"u")return window.BigInt||null;if(typeof lc<"u")return lc.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let js;function In(k){if(typeof js>"u"&&(js=Ls()),js===null)throw new Error("BigInt is not supported!");return js(k)}function rs(){let k=[];k[0]=In(1);let e=In(900);k[1]=e;for(let r=2;r<16;r++)k[r]=k[r-1]*e;return k}class me{static decode(e,r){let s=new De(""),l=q.ISO8859_1;s.enableDecoding(l);let c=1,d=e[c++],p=new go;for(;c<e[0];){switch(d){case me.TEXT_COMPACTION_MODE_LATCH:c=me.textCompaction(e,c,s);break;case me.BYTE_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:c=me.byteCompaction(d,e,l,c,s);break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(e[c++]);break;case me.NUMERIC_COMPACTION_MODE_LATCH:c=me.numericCompaction(e,c,s);break;case me.ECI_CHARSET:q.getCharacterSetECIByValue(e[c++]);break;case me.ECI_GENERAL_PURPOSE:c+=2;break;case me.ECI_USER_DEFINED:c++;break;case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:c=me.decodeMacroBlock(e,c,p);break;case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:throw new X;default:c--,c=me.textCompaction(e,c,s);break}if(c<e.length)d=e[c++];else throw X.getFormatInstance()}if(s.length()===0)throw X.getFormatInstance();let w=new $e(null,s.toString(),null,r);return w.setOther(p),w}static decodeMacroBlock(e,r,s){if(r+me.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw X.getFormatInstance();let l=new Int32Array(me.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<me.NUMBER_OF_SEQUENCE_CODEWORDS;p++,r++)l[p]=e[r];s.setSegmentIndex(F.parseInt(me.decodeBase900toBase10(l,me.NUMBER_OF_SEQUENCE_CODEWORDS)));let c=new De;r=me.textCompaction(e,r,c),s.setFileId(c.toString());let d=-1;for(e[r]===me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=r+1);r<e[0];)switch(e[r]){case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case me.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new De;r=me.textCompaction(e,r+1,p),s.setFileName(p.toString());break;case me.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let w=new De;r=me.textCompaction(e,r+1,w),s.setSender(w.toString());break;case me.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let E=new De;r=me.textCompaction(e,r+1,E),s.setAddressee(E.toString());break;case me.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let R=new De;r=me.numericCompaction(e,r+1,R),s.setSegmentCount(F.parseInt(R.toString()));break;case me.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let P=new De;r=me.numericCompaction(e,r+1,P),s.setTimestamp(na.parseLong(P.toString()));break;case me.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let D=new De;r=me.numericCompaction(e,r+1,D),s.setChecksum(F.parseInt(D.toString()));break;case me.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let W=new De;r=me.numericCompaction(e,r+1,W),s.setFileSize(na.parseLong(W.toString()));break;default:throw X.getFormatInstance()}break;case me.MACRO_PDF417_TERMINATOR:r++,s.setLastSegment(!0);break;default:throw X.getFormatInstance()}if(d!==-1){let p=r-d;s.isLastSegment()&&p--,s.setOptionalData(V.copyOfRange(e,d,d+p))}return r}static textCompaction(e,r,s){let l=new Int32Array((e[0]-r)*2),c=new Int32Array((e[0]-r)*2),d=0,p=!1;for(;r<e[0]&&!p;){let w=e[r++];if(w<me.TEXT_COMPACTION_MODE_LATCH)l[d]=w/30,l[d+1]=w%30,d+=2;else switch(w){case me.TEXT_COMPACTION_MODE_LATCH:l[d++]=me.TEXT_COMPACTION_MODE_LATCH;break;case me.BYTE_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:case me.NUMERIC_COMPACTION_MODE_LATCH:case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:r--,p=!0;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l[d]=me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,w=e[r++],c[d]=w,d++;break}}return me.decodeTextCompaction(l,c,d,s),r}static decodeTextCompaction(e,r,s,l){let c=Ht.ALPHA,d=Ht.ALPHA,p=0;for(;p<s;){let w=e[p],E="";switch(c){case Ht.ALPHA:if(w<26)E=String.fromCharCode(65+w);else switch(w){case 26:E=" ";break;case me.LL:c=Ht.LOWER;break;case me.ML:c=Ht.MIXED;break;case me.PS:d=c,c=Ht.PUNCT_SHIFT;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[p]);break;case me.TEXT_COMPACTION_MODE_LATCH:c=Ht.ALPHA;break}break;case Ht.LOWER:if(w<26)E=String.fromCharCode(97+w);else switch(w){case 26:E=" ";break;case me.AS:d=c,c=Ht.ALPHA_SHIFT;break;case me.ML:c=Ht.MIXED;break;case me.PS:d=c,c=Ht.PUNCT_SHIFT;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[p]);break;case me.TEXT_COMPACTION_MODE_LATCH:c=Ht.ALPHA;break}break;case Ht.MIXED:if(w<me.PL)E=me.MIXED_CHARS[w];else switch(w){case me.PL:c=Ht.PUNCT;break;case 26:E=" ";break;case me.LL:c=Ht.LOWER;break;case me.AL:c=Ht.ALPHA;break;case me.PS:d=c,c=Ht.PUNCT_SHIFT;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[p]);break;case me.TEXT_COMPACTION_MODE_LATCH:c=Ht.ALPHA;break}break;case Ht.PUNCT:if(w<me.PAL)E=me.PUNCT_CHARS[w];else switch(w){case me.PAL:c=Ht.ALPHA;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[p]);break;case me.TEXT_COMPACTION_MODE_LATCH:c=Ht.ALPHA;break}break;case Ht.ALPHA_SHIFT:if(c=d,w<26)E=String.fromCharCode(65+w);else switch(w){case 26:E=" ";break;case me.TEXT_COMPACTION_MODE_LATCH:c=Ht.ALPHA;break}break;case Ht.PUNCT_SHIFT:if(c=d,w<me.PAL)E=me.PUNCT_CHARS[w];else switch(w){case me.PAL:c=Ht.ALPHA;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[p]);break;case me.TEXT_COMPACTION_MODE_LATCH:c=Ht.ALPHA;break}break}E!==""&&l.append(E),p++}}static byteCompaction(e,r,s,l,c){let d=new dl,p=0,w=0,E=!1;switch(e){case me.BYTE_COMPACTION_MODE_LATCH:let R=new Int32Array(6),P=r[l++];for(;l<r[0]&&!E;)switch(R[p++]=P,w=900*w+P,P=r[l++],P){case me.TEXT_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH:case me.NUMERIC_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:l--,E=!0;break;default:if(p%5===0&&p>0){for(let D=0;D<6;++D)d.write(Number(In(w)>>In(8*(5-D))));w=0,p=0}break}l===r[0]&&P<me.TEXT_COMPACTION_MODE_LATCH&&(R[p++]=P);for(let D=0;D<p;D++)d.write(R[D]);break;case me.BYTE_COMPACTION_MODE_LATCH_6:for(;l<r[0]&&!E;){let D=r[l++];if(D<me.TEXT_COMPACTION_MODE_LATCH)p++,w=900*w+D;else switch(D){case me.TEXT_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH:case me.NUMERIC_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:l--,E=!0;break}if(p%5===0&&p>0){for(let W=0;W<6;++W)d.write(Number(In(w)>>In(8*(5-W))));w=0,p=0}}break}return c.append(Ne.decode(d.toByteArray(),s)),l}static numericCompaction(e,r,s){let l=0,c=!1,d=new Int32Array(me.MAX_NUMERIC_CODEWORDS);for(;r<e[0]&&!c;){let p=e[r++];if(r===e[0]&&(c=!0),p<me.TEXT_COMPACTION_MODE_LATCH)d[l]=p,l++;else switch(p){case me.TEXT_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:r--,c=!0;break}(l%me.MAX_NUMERIC_CODEWORDS===0||p===me.NUMERIC_COMPACTION_MODE_LATCH||c)&&l>0&&(s.append(me.decodeBase900toBase10(d,l)),l=0)}return r}static decodeBase900toBase10(e,r){let s=In(0);for(let c=0;c<r;c++)s+=me.EXP900[r-c-1]*In(e[c]);let l=s.toString();if(l.charAt(0)!=="1")throw new X;return l.substring(1)}}me.TEXT_COMPACTION_MODE_LATCH=900,me.BYTE_COMPACTION_MODE_LATCH=901,me.NUMERIC_COMPACTION_MODE_LATCH=902,me.BYTE_COMPACTION_MODE_LATCH_6=924,me.ECI_USER_DEFINED=925,me.ECI_GENERAL_PURPOSE=926,me.ECI_CHARSET=927,me.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,me.MACRO_PDF417_TERMINATOR=922,me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,me.MAX_NUMERIC_CODEWORDS=15,me.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,me.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,me.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,me.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,me.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,me.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,me.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,me.PL=25,me.LL=27,me.AS=27,me.ML=28,me.AL=28,me.PS=29,me.PAL=29,me.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,me.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",me.EXP900=Ls()?rs():[],me.NUMBER_OF_SEQUENCE_CODEWORDS=2;class _t{constructor(){}static decode(e,r,s,l,c,d,p){let w=new Ur(e,r,s,l,c),E=null,R=null,P;for(let K=!0;;K=!1){if(r!=null&&(E=_t.getRowIndicatorColumn(e,w,r,!0,d,p)),l!=null&&(R=_t.getRowIndicatorColumn(e,w,l,!1,d,p)),P=_t.merge(E,R),P==null)throw G.getNotFoundInstance();let ee=P.getBoundingBox();if(K&&ee!=null&&(ee.getMinY()<w.getMinY()||ee.getMaxY()>w.getMaxY()))w=ee;else break}P.setBoundingBox(w);let D=P.getBarcodeColumnCount()+1;P.setDetectionResultColumn(0,E),P.setDetectionResultColumn(D,R);let W=E!=null;for(let K=1;K<=D;K++){let ee=W?K:D-K;if(P.getDetectionResultColumn(ee)!==void 0)continue;let oe;ee===0||ee===D?oe=new ul(w,ee===0):oe=new Mr(w),P.setDetectionResultColumn(ee,oe);let he=-1,Fe=he;for(let He=w.getMinY();He<=w.getMaxY();He++){if(he=_t.getStartColumn(P,ee,He,W),he<0||he>w.getMaxX()){if(Fe===-1)continue;he=Fe}let Me=_t.detectCodeword(e,w.getMinX(),w.getMaxX(),W,he,He,d,p);Me!=null&&(oe.setCodeword(He,Me),Fe=he,d=Math.min(d,Me.getWidth()),p=Math.max(p,Me.getWidth()))}}return _t.createDecoderResult(P)}static merge(e,r){if(e==null&&r==null)return null;let s=_t.getBarcodeMetadata(e,r);if(s==null)return null;let l=Ur.merge(_t.adjustBoundingBox(e),_t.adjustBoundingBox(r));return new Ds(s,l)}static adjustBoundingBox(e){if(e==null)return null;let r=e.getRowHeights();if(r==null)return null;let s=_t.getMax(r),l=0;for(let p of r)if(l+=s-p,p>0)break;let c=e.getCodewords();for(let p=0;l>0&&c[p]==null;p++)l--;let d=0;for(let p=r.length-1;p>=0&&(d+=s-r[p],!(r[p]>0));p--);for(let p=c.length-1;d>0&&c[p]==null;p--)d--;return e.getBoundingBox().addMissingRows(l,d,e.isLeft())}static getMax(e){let r=-1;for(let s of e)r=Math.max(r,s);return r}static getBarcodeMetadata(e,r){let s;if(e==null||(s=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();let l;return r==null||(l=r.getBarcodeMetadata())==null?s:s.getColumnCount()!==l.getColumnCount()&&s.getErrorCorrectionLevel()!==l.getErrorCorrectionLevel()&&s.getRowCount()!==l.getRowCount()?null:s}static getRowIndicatorColumn(e,r,s,l,c,d){let p=new ul(r,l);for(let w=0;w<2;w++){let E=w===0?1:-1,R=Math.trunc(Math.trunc(s.getX()));for(let P=Math.trunc(Math.trunc(s.getY()));P<=r.getMaxY()&&P>=r.getMinY();P+=E){let D=_t.detectCodeword(e,0,e.getWidth(),l,R,P,c,d);D!=null&&(p.setCodeword(P,D),l?R=D.getStartX():R=D.getEndX())}}return p}static adjustCodewordCount(e,r){let s=r[0][1],l=s.getValue(),c=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-_t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(l.length===0){if(c<1||c>mt.MAX_CODEWORDS_IN_BARCODE)throw G.getNotFoundInstance();s.setValue(c)}else l[0]!==c&&s.setValue(c)}static createDecoderResult(e){let r=_t.createBarcodeMatrix(e);_t.adjustCodewordCount(e,r);let s=new Array,l=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),c=[],d=new Array;for(let w=0;w<e.getBarcodeRowCount();w++)for(let E=0;E<e.getBarcodeColumnCount();E++){let R=r[w][E+1].getValue(),P=w*e.getBarcodeColumnCount()+E;R.length===0?s.push(P):R.length===1?l[P]=R[0]:(d.push(P),c.push(R))}let p=new Array(c.length);for(let w=0;w<p.length;w++)p[w]=c[w];return _t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),l,mt.toIntArray(s),mt.toIntArray(d),p)}static createDecoderResultFromAmbiguousValues(e,r,s,l,c){let d=new Int32Array(l.length),p=100;for(;p-- >0;){for(let w=0;w<d.length;w++)r[l[w]]=c[w][d[w]];try{return _t.decodeCodewords(r,e,s)}catch(w){if(!(w instanceof M))throw w}if(d.length===0)throw M.getChecksumInstance();for(let w=0;w<d.length;w++)if(d[w]<c[w].length-1){d[w]++;break}else if(d[w]=0,w===d.length-1)throw M.getChecksumInstance()}throw M.getChecksumInstance()}static createBarcodeMatrix(e){let r=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let l=0;l<r.length;l++)for(let c=0;c<r[l].length;c++)r[l][c]=new vi;let s=0;for(let l of e.getDetectionResultColumns()){if(l!=null){for(let c of l.getCodewords())if(c!=null){let d=c.getRowNumber();if(d>=0){if(d>=r.length)continue;r[d][s].setValue(c.getValue())}}}s++}return r}static isValidBarcodeColumn(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1}static getStartColumn(e,r,s,l){let c=l?1:-1,d=null;if(_t.isValidBarcodeColumn(e,r-c)&&(d=e.getDetectionResultColumn(r-c).getCodeword(s)),d!=null)return l?d.getEndX():d.getStartX();if(d=e.getDetectionResultColumn(r).getCodewordNearby(s),d!=null)return l?d.getStartX():d.getEndX();if(_t.isValidBarcodeColumn(e,r-c)&&(d=e.getDetectionResultColumn(r-c).getCodewordNearby(s)),d!=null)return l?d.getEndX():d.getStartX();let p=0;for(;_t.isValidBarcodeColumn(e,r-c);){r-=c;for(let w of e.getDetectionResultColumn(r).getCodewords())if(w!=null)return(l?w.getEndX():w.getStartX())+c*p*(w.getEndX()-w.getStartX());p++}return l?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,r,s,l,c,d,p,w){c=_t.adjustCodewordStartColumn(e,r,s,l,c,d);let E=_t.getModuleBitCount(e,r,s,l,c,d);if(E==null)return null;let R,P=We.sum(E);if(l)R=c+P;else{for(let K=0;K<E.length/2;K++){let ee=E[K];E[K]=E[E.length-1-K],E[E.length-1-K]=ee}R=c,c=R-P}if(!_t.checkCodewordSkew(P,p,w))return null;let D=Kn.getDecodedValue(E),W=mt.getCodeword(D);return W===-1?null:new Oi(c,R,_t.getCodewordBucketNumber(D),W)}static getModuleBitCount(e,r,s,l,c,d){let p=c,w=new Int32Array(8),E=0,R=l?1:-1,P=l;for(;(l?p<s:p>=r)&&E<w.length;)e.get(p,d)===P?(w[E]++,p+=R):(E++,P=!P);return E===w.length||p===(l?s:r)&&E===w.length-1?w:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,r,s,l,c,d){let p=c,w=l?-1:1;for(let E=0;E<2;E++){for(;(l?p>=r:p<s)&&l===e.get(p,d);){if(Math.abs(c-p)>_t.CODEWORD_SKEW_SIZE)return c;p+=w}w=-w,l=!l}return p}static checkCodewordSkew(e,r,s){return r-_t.CODEWORD_SKEW_SIZE<=e&&e<=s+_t.CODEWORD_SKEW_SIZE}static decodeCodewords(e,r,s){if(e.length===0)throw X.getFormatInstance();let l=1<<r+1,c=_t.correctErrors(e,s,l);_t.verifyCodewordCount(e,l);let d=me.decode(e,""+r);return d.setErrorsCorrected(c),d.setErasures(s.length),d}static correctErrors(e,r,s){if(r!=null&&r.length>s/2+_t.MAX_ERRORS||s<0||s>_t.MAX_EC_CODEWORDS)throw M.getChecksumInstance();return _t.errorCorrection.decode(e,s,r)}static verifyCodewordCount(e,r){if(e.length<4)throw X.getFormatInstance();let s=e[0];if(s>e.length)throw X.getFormatInstance();if(s===0)if(r<e.length)e[0]=e.length-r;else throw X.getFormatInstance()}static getBitCountForCodeword(e){let r=new Int32Array(8),s=0,l=r.length-1;for(;!((e&1)!==s&&(s=e&1,l--,l<0));)r[l]++,e>>=1;return r}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return _t.getCodewordBucketNumber(_t.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let r=new On;for(let s=0;s<e.length;s++){r.format("Row %2d: ",s);for(let l=0;l<e[s].length;l++){let c=e[s][l];c.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",c.getValue()[0],c.getConfidence(c.getValue()[0]))}r.format("%n")}return r.toString()}}_t.CODEWORD_SKEW_SIZE=2,_t.MAX_ERRORS=3,_t.MAX_EC_CODEWORDS=512,_t.errorCorrection=new Ir;class qn{decode(e,r=null){let s=qn.decode(e,r,!1);if(s==null||s.length===0||s[0]==null)throw G.getNotFoundInstance();return s[0]}decodeMultiple(e,r=null){try{return qn.decode(e,r,!0)}catch(s){throw s instanceof X||s instanceof M?G.getNotFoundInstance():s}}static decode(e,r,s){const l=new Array,c=Ct.detectMultiple(e,r,s);for(const d of c.getPoints()){const p=_t.decode(c.getBits(),d[4],d[5],d[6],d[7],qn.getMinCodewordWidth(d),qn.getMaxCodewordWidth(d)),w=new Ge(p.getText(),p.getRawBytes(),void 0,d,te.PDF_417);w.putMetadata(Pe.ERROR_CORRECTION_LEVEL,p.getECLevel());const E=p.getOther();E!=null&&w.putMetadata(Pe.PDF417_EXTRA_METADATA,E),l.push(w)}return l.map(d=>d)}static getMaxWidth(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))}static getMinWidth(e,r){return e==null||r==null?F.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(qn.getMaxWidth(e[0],e[4]),qn.getMaxWidth(e[6],e[2])*mt.MODULES_IN_CODEWORD/mt.MODULES_IN_STOP_PATTERN),Math.max(qn.getMaxWidth(e[1],e[5]),qn.getMaxWidth(e[7],e[3])*mt.MODULES_IN_CODEWORD/mt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(qn.getMinWidth(e[0],e[4]),qn.getMinWidth(e[6],e[2])*mt.MODULES_IN_CODEWORD/mt.MODULES_IN_STOP_PATTERN),Math.min(qn.getMinWidth(e[1],e[5]),qn.getMinWidth(e[7],e[3])*mt.MODULES_IN_CODEWORD/mt.MODULES_IN_STOP_PATTERN)))}reset(){}}class is extends C{}is.kind="ReaderException";class yo{constructor(e,r){this.verbose=e===!0,r&&this.setHints(r)}decode(e,r){return r&&this.setHints(r),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const r=!u(e)&&e.get(re.TRY_HARDER)===!0,s=u(e)?null:e.get(re.POSSIBLE_FORMATS),l=new Array;if(!u(s)){const c=s.some(d=>d===te.UPC_A||d===te.UPC_E||d===te.EAN_13||d===te.EAN_8||d===te.CODABAR||d===te.CODE_39||d===te.CODE_93||d===te.CODE_128||d===te.ITF||d===te.RSS_14||d===te.RSS_EXPANDED);c&&!r&&l.push(new yi(e,this.verbose)),s.includes(te.QR_CODE)&&l.push(new an),s.includes(te.DATA_MATRIX)&&l.push(new yr),s.includes(te.AZTEC)&&l.push(new at),s.includes(te.PDF_417)&&l.push(new qn),c&&r&&l.push(new yi(e,this.verbose))}l.length===0&&(r||l.push(new yi(e,this.verbose)),l.push(new an),l.push(new yr),l.push(new at),l.push(new qn),r&&l.push(new yi(e,this.verbose))),this.readers=l}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new is("No readers where selected, nothing can be read.");for(const r of this.readers)try{return r.decode(e,this.hints)}catch(s){if(s instanceof is)continue}throw new G("No MultiFormat Readers were able to detect the code.")}}class Bs extends Te{constructor(e=null,r=500){const s=new yo;s.setHints(e),super(s,r)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class wo extends Te{constructor(e=500){super(new qn,e)}}class fl extends Te{constructor(e=500){super(new an,e)}}var ia;(function(k){k[k.ERROR_CORRECTION=0]="ERROR_CORRECTION",k[k.CHARACTER_SET=1]="CHARACTER_SET",k[k.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",k[k.MIN_SIZE=3]="MIN_SIZE",k[k.MAX_SIZE=4]="MAX_SIZE",k[k.MARGIN=5]="MARGIN",k[k.PDF417_COMPACT=6]="PDF417_COMPACT",k[k.PDF417_COMPACTION=7]="PDF417_COMPACTION",k[k.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",k[k.AZTEC_LAYERS=9]="AZTEC_LAYERS",k[k.QR_VERSION=10]="QR_VERSION"})(ia||(ia={}));var Dn=ia;class sa{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new xe(e,Int32Array.from([1])))}buildGenerator(e){const r=this.cachedGenerators;if(e>=r.length){let s=r[r.length-1];const l=this.field;for(let c=r.length;c<=e;c++){const d=s.multiply(new xe(l,Int32Array.from([1,l.exp(c-1+l.getGeneratorBase())])));r.push(d),s=d}}return r[e]}encode(e,r){if(r===0)throw new I("No error correction bytes");const s=e.length-r;if(s<=0)throw new I("No data bytes provided");const l=this.buildGenerator(r),c=new Int32Array(s);B.arraycopy(e,0,c,0,s);let d=new xe(this.field,c);d=d.multiplyByMonomial(r,1);const w=d.divide(l)[1].getCoefficients(),E=r-w.length;for(let R=0;R<E;R++)e[s+R]=0;B.arraycopy(w,0,e,s+E,w.length)}}class ln{constructor(){}static applyMaskPenaltyRule1(e){return ln.applyMaskPenaltyRule1Internal(e,!0)+ln.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let r=0;const s=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let d=0;d<c-1;d++){const p=s[d];for(let w=0;w<l-1;w++){const E=p[w];E===p[w+1]&&E===s[d+1][w]&&E===s[d+1][w+1]&&r++}}return ln.N2*r}static applyMaskPenaltyRule3(e){let r=0;const s=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let d=0;d<c;d++)for(let p=0;p<l;p++){const w=s[d];p+6<l&&w[p]===1&&w[p+1]===0&&w[p+2]===1&&w[p+3]===1&&w[p+4]===1&&w[p+5]===0&&w[p+6]===1&&(ln.isWhiteHorizontal(w,p-4,p)||ln.isWhiteHorizontal(w,p+7,p+11))&&r++,d+6<c&&s[d][p]===1&&s[d+1][p]===0&&s[d+2][p]===1&&s[d+3][p]===1&&s[d+4][p]===1&&s[d+5][p]===0&&s[d+6][p]===1&&(ln.isWhiteVertical(s,p,d-4,d)||ln.isWhiteVertical(s,p,d+7,d+11))&&r++}return r*ln.N3}static isWhiteHorizontal(e,r,s){r=Math.max(r,0),s=Math.min(s,e.length);for(let l=r;l<s;l++)if(e[l]===1)return!1;return!0}static isWhiteVertical(e,r,s,l){s=Math.max(s,0),l=Math.min(l,e.length);for(let c=s;c<l;c++)if(e[c][r]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let r=0;const s=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let w=0;w<c;w++){const E=s[w];for(let R=0;R<l;R++)E[R]===1&&r++}const d=e.getHeight()*e.getWidth();return Math.floor(Math.abs(r*2-d)*10/d)*ln.N4}static getDataMaskBit(e,r,s){let l,c;switch(e){case 0:l=s+r&1;break;case 1:l=s&1;break;case 2:l=r%3;break;case 3:l=(s+r)%3;break;case 4:l=Math.floor(s/2)+Math.floor(r/3)&1;break;case 5:c=s*r,l=(c&1)+c%3;break;case 6:c=s*r,l=(c&1)+c%3&1;break;case 7:c=s*r,l=c%3+(s+r&1)&1;break;default:throw new I("Invalid mask pattern: "+e)}return l===0}static applyMaskPenaltyRule1Internal(e,r){let s=0;const l=r?e.getHeight():e.getWidth(),c=r?e.getWidth():e.getHeight(),d=e.getArray();for(let p=0;p<l;p++){let w=0,E=-1;for(let R=0;R<c;R++){const P=r?d[p][R]:d[R][p];P===E?w++:(w>=5&&(s+=ln.N1+(w-5)),w=1,E=P)}w>=5&&(s+=ln.N1+(w-5))}return s}}ln.N1=3,ln.N2=3,ln.N3=40,ln.N4=10;class vo{constructor(e,r){this.width=e,this.height=r;const s=new Array(r);for(let l=0;l!==r;l++)s[l]=new Uint8Array(e);this.bytes=s}getHeight(){return this.height}getWidth(){return this.width}get(e,r){return this.bytes[r][e]}getArray(){return this.bytes}setNumber(e,r,s){this.bytes[r][e]=s}setBoolean(e,r,s){this.bytes[r][e]=s?1:0}clear(e){for(const r of this.bytes)V.fill(r,e)}equals(e){if(!(e instanceof vo))return!1;const r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(let s=0,l=this.height;s<l;++s){const c=this.bytes[s],d=r.bytes[s];for(let p=0,w=this.width;p<w;++p)if(c[p]!==d[p])return!1}return!0}toString(){const e=new De;for(let r=0,s=this.height;r<s;++r){const l=this.bytes[r];for(let c=0,d=this.width;c<d;++c)switch(l[c]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class Di{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new De;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Di.NUM_MASK_PATTERNS}}Di.NUM_MASK_PATTERNS=8;class nn extends C{}nn.kind="WriterException";class pt{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,r,s,l,c){pt.clearMatrix(c),pt.embedBasicPatterns(s,c),pt.embedTypeInfo(r,l,c),pt.maybeEmbedVersionInfo(s,c),pt.embedDataBits(e,l,c)}static embedBasicPatterns(e,r){pt.embedPositionDetectionPatternsAndSeparators(r),pt.embedDarkDotAtLeftBottomCorner(r),pt.maybeEmbedPositionAdjustmentPatterns(e,r),pt.embedTimingPatterns(r)}static embedTypeInfo(e,r,s){const l=new $;pt.makeTypeInfoBits(e,r,l);for(let c=0,d=l.getSize();c<d;++c){const p=l.get(l.getSize()-1-c),w=pt.TYPE_INFO_COORDINATES[c],E=w[0],R=w[1];if(s.setBoolean(E,R,p),c<8){const P=s.getWidth()-c-1;s.setBoolean(P,8,p)}else{const D=s.getHeight()-7+(c-8);s.setBoolean(8,D,p)}}}static maybeEmbedVersionInfo(e,r){if(e.getVersionNumber()<7)return;const s=new $;pt.makeVersionInfoBits(e,s);let l=6*3-1;for(let c=0;c<6;++c)for(let d=0;d<3;++d){const p=s.get(l);l--,r.setBoolean(c,r.getHeight()-11+d,p),r.setBoolean(r.getHeight()-11+d,c,p)}}static embedDataBits(e,r,s){let l=0,c=-1,d=s.getWidth()-1,p=s.getHeight()-1;for(;d>0;){for(d===6&&(d-=1);p>=0&&p<s.getHeight();){for(let w=0;w<2;++w){const E=d-w;if(!pt.isEmpty(s.get(E,p)))continue;let R;l<e.getSize()?(R=e.get(l),++l):R=!1,r!==255&&ln.getDataMaskBit(r,E,p)&&(R=!R),s.setBoolean(E,p,R)}p+=c}c=-c,p+=c,d-=2}if(l!==e.getSize())throw new nn("Not all bits consumed: "+l+"/"+e.getSize())}static findMSBSet(e){return 32-F.numberOfLeadingZeros(e)}static calculateBCHCode(e,r){if(r===0)throw new I("0 polynomial");const s=pt.findMSBSet(r);for(e<<=s-1;pt.findMSBSet(e)>=s;)e^=r<<pt.findMSBSet(e)-s;return e}static makeTypeInfoBits(e,r,s){if(!Di.isValidMaskPattern(r))throw new nn("Invalid mask pattern");const l=e.getBits()<<3|r;s.appendBits(l,5);const c=pt.calculateBCHCode(l,pt.TYPE_INFO_POLY);s.appendBits(c,10);const d=new $;if(d.appendBits(pt.TYPE_INFO_MASK_PATTERN,15),s.xor(d),s.getSize()!==15)throw new nn("should not happen but we got: "+s.getSize())}static makeVersionInfoBits(e,r){r.appendBits(e.getVersionNumber(),6);const s=pt.calculateBCHCode(e.getVersionNumber(),pt.VERSION_INFO_POLY);if(r.appendBits(s,12),r.getSize()!==18)throw new nn("should not happen but we got: "+r.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let r=8;r<e.getWidth()-8;++r){const s=(r+1)%2;pt.isEmpty(e.get(r,6))&&e.setNumber(r,6,s),pt.isEmpty(e.get(6,r))&&e.setNumber(6,r,s)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new nn;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,r,s){for(let l=0;l<8;++l){if(!pt.isEmpty(s.get(e+l,r)))throw new nn;s.setNumber(e+l,r,0)}}static embedVerticalSeparationPattern(e,r,s){for(let l=0;l<7;++l){if(!pt.isEmpty(s.get(e,r+l)))throw new nn;s.setNumber(e,r+l,0)}}static embedPositionAdjustmentPattern(e,r,s){for(let l=0;l<5;++l){const c=pt.POSITION_ADJUSTMENT_PATTERN[l];for(let d=0;d<5;++d)s.setNumber(e+d,r+l,c[d])}}static embedPositionDetectionPattern(e,r,s){for(let l=0;l<7;++l){const c=pt.POSITION_DETECTION_PATTERN[l];for(let d=0;d<7;++d)s.setNumber(e+d,r+l,c[d])}}static embedPositionDetectionPatternsAndSeparators(e){const r=pt.POSITION_DETECTION_PATTERN[0].length;pt.embedPositionDetectionPattern(0,0,e),pt.embedPositionDetectionPattern(e.getWidth()-r,0,e),pt.embedPositionDetectionPattern(0,e.getWidth()-r,e);const s=8;pt.embedHorizontalSeparationPattern(0,s-1,e),pt.embedHorizontalSeparationPattern(e.getWidth()-s,s-1,e),pt.embedHorizontalSeparationPattern(0,e.getWidth()-s,e);const l=7;pt.embedVerticalSeparationPattern(l,0,e),pt.embedVerticalSeparationPattern(e.getHeight()-l-1,0,e),pt.embedVerticalSeparationPattern(l,e.getHeight()-l,e)}static maybeEmbedPositionAdjustmentPatterns(e,r){if(e.getVersionNumber()<2)return;const s=e.getVersionNumber()-1,l=pt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[s];for(let c=0,d=l.length;c!==d;c++){const p=l[c];if(p>=0)for(let w=0;w!==d;w++){const E=l[w];E>=0&&pt.isEmpty(r.get(E,p))&&pt.embedPositionAdjustmentPattern(E-2,p-2,r)}}}}pt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),pt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),pt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),pt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),pt.VERSION_INFO_POLY=7973,pt.TYPE_INFO_POLY=1335,pt.TYPE_INFO_MASK_PATTERN=21522;class Jc{constructor(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class sn{constructor(){}static calculateMaskPenalty(e){return ln.applyMaskPenaltyRule1(e)+ln.applyMaskPenaltyRule2(e)+ln.applyMaskPenaltyRule3(e)+ln.applyMaskPenaltyRule4(e)}static encode(e,r,s=null){let l=sn.DEFAULT_BYTE_MODE_ENCODING;const c=s!==null&&s.get(Dn.CHARACTER_SET)!==void 0;c&&(l=s.get(Dn.CHARACTER_SET).toString());const d=this.chooseMode(e,l),p=new $;if(d===dt.BYTE&&(c||sn.DEFAULT_BYTE_MODE_ENCODING!==l)){const He=q.getCharacterSetECIByName(l);He!==void 0&&this.appendECI(He,p)}this.appendModeInfo(d,p);const w=new $;this.appendBytes(e,d,w,l);let E;if(s!==null&&s.get(Dn.QR_VERSION)!==void 0){const He=Number.parseInt(s.get(Dn.QR_VERSION).toString(),10);E=ct.getVersionForNumber(He);const Me=this.calculateBitsNeeded(d,p,w,E);if(!this.willFit(Me,E,r))throw new nn("Data too big for requested version")}else E=this.recommendVersion(r,d,p,w);const R=new $;R.appendBitArray(p);const P=d===dt.BYTE?w.getSizeInBytes():e.length;this.appendLengthInfo(P,E,d,R),R.appendBitArray(w);const D=E.getECBlocksForLevel(r),W=E.getTotalCodewords()-D.getTotalECCodewords();this.terminateBits(W,R);const K=this.interleaveWithECBytes(R,E.getTotalCodewords(),W,D.getNumBlocks()),ee=new Di;ee.setECLevel(r),ee.setMode(d),ee.setVersion(E);const oe=E.getDimensionForVersion(),he=new vo(oe,oe),Fe=this.chooseMaskPattern(K,r,E,he);return ee.setMaskPattern(Fe),pt.buildMatrix(K,r,E,Fe,he),ee.setMatrix(he),ee}static recommendVersion(e,r,s,l){const c=this.calculateBitsNeeded(r,s,l,ct.getVersionForNumber(1)),d=this.chooseVersion(c,e),p=this.calculateBitsNeeded(r,s,l,d);return this.chooseVersion(p,e)}static calculateBitsNeeded(e,r,s,l){return r.getSize()+e.getCharacterCountBits(l)+s.getSize()}static getAlphanumericCode(e){return e<sn.ALPHANUMERIC_TABLE.length?sn.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,r=null){if(q.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return dt.KANJI;let s=!1,l=!1;for(let c=0,d=e.length;c<d;++c){const p=e.charAt(c);if(sn.isDigit(p))s=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)l=!0;else return dt.BYTE}return l?dt.ALPHANUMERIC:s?dt.NUMERIC:dt.BYTE}static isOnlyDoubleByteKanji(e){let r;try{r=Ne.encode(e,q.SJIS)}catch{return!1}const s=r.length;if(s%2!==0)return!1;for(let l=0;l<s;l+=2){const c=r[l]&255;if((c<129||c>159)&&(c<224||c>235))return!1}return!0}static chooseMaskPattern(e,r,s,l){let c=Number.MAX_SAFE_INTEGER,d=-1;for(let p=0;p<Di.NUM_MASK_PATTERNS;p++){pt.buildMatrix(e,r,s,p,l);let w=this.calculateMaskPenalty(l);w<c&&(c=w,d=p)}return d}static chooseVersion(e,r){for(let s=1;s<=40;s++){const l=ct.getVersionForNumber(s);if(sn.willFit(e,l,r))return l}throw new nn("Data too big")}static willFit(e,r,s){const l=r.getTotalCodewords(),d=r.getECBlocksForLevel(s).getTotalECCodewords(),p=l-d,w=(e+7)/8;return p>=w}static terminateBits(e,r){const s=e*8;if(r.getSize()>s)throw new nn("data bits cannot fit in the QR Code"+r.getSize()+" > "+s);for(let d=0;d<4&&r.getSize()<s;++d)r.appendBit(!1);const l=r.getSize()&7;if(l>0)for(let d=l;d<8;d++)r.appendBit(!1);const c=e-r.getSizeInBytes();for(let d=0;d<c;++d)r.appendBits(d&1?17:236,8);if(r.getSize()!==s)throw new nn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,r,s,l,c,d){if(l>=s)throw new nn("Block ID too large");const p=e%s,w=s-p,E=Math.floor(e/s),R=E+1,P=Math.floor(r/s),D=P+1,W=E-P,K=R-D;if(W!==K)throw new nn("EC bytes mismatch");if(s!==w+p)throw new nn("RS blocks mismatch");if(e!==(P+W)*w+(D+K)*p)throw new nn("Total bytes mismatch");l<w?(c[0]=P,d[0]=W):(c[0]=D,d[0]=K)}static interleaveWithECBytes(e,r,s,l){if(e.getSizeInBytes()!==s)throw new nn("Number of bits and data bytes does not match");let c=0,d=0,p=0;const w=new Array;for(let R=0;R<l;++R){const P=new Int32Array(1),D=new Int32Array(1);sn.getNumDataBytesAndNumECBytesForBlockID(r,s,l,R,P,D);const W=P[0],K=new Uint8Array(W);e.toBytes(8*c,K,0,W);const ee=sn.generateECBytes(K,D[0]);w.push(new Jc(K,ee)),d=Math.max(d,W),p=Math.max(p,ee.length),c+=P[0]}if(s!==c)throw new nn("Data bytes does not match offset");const E=new $;for(let R=0;R<d;++R)for(const P of w){const D=P.getDataBytes();R<D.length&&E.appendBits(D[R],8)}for(let R=0;R<p;++R)for(const P of w){const D=P.getErrorCorrectionBytes();R<D.length&&E.appendBits(D[R],8)}if(r!==E.getSizeInBytes())throw new nn("Interleaving error: "+r+" and "+E.getSizeInBytes()+" differ.");return E}static generateECBytes(e,r){const s=e.length,l=new Int32Array(s+r);for(let d=0;d<s;d++)l[d]=e[d]&255;new sa(ue.QR_CODE_FIELD_256).encode(l,r);const c=new Uint8Array(r);for(let d=0;d<r;d++)c[d]=l[s+d];return c}static appendModeInfo(e,r){r.appendBits(e.getBits(),4)}static appendLengthInfo(e,r,s,l){const c=s.getCharacterCountBits(r);if(e>=1<<c)throw new nn(e+" is bigger than "+((1<<c)-1));l.appendBits(e,c)}static appendBytes(e,r,s,l){switch(r){case dt.NUMERIC:sn.appendNumericBytes(e,s);break;case dt.ALPHANUMERIC:sn.appendAlphanumericBytes(e,s);break;case dt.BYTE:sn.append8BitBytes(e,s,l);break;case dt.KANJI:sn.appendKanjiBytes(e,s);break;default:throw new nn("Invalid mode: "+r)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const r=sn.getDigit(e);return r>=0&&r<=9}static appendNumericBytes(e,r){const s=e.length;let l=0;for(;l<s;){const c=sn.getDigit(e.charAt(l));if(l+2<s){const d=sn.getDigit(e.charAt(l+1)),p=sn.getDigit(e.charAt(l+2));r.appendBits(c*100+d*10+p,10),l+=3}else if(l+1<s){const d=sn.getDigit(e.charAt(l+1));r.appendBits(c*10+d,7),l+=2}else r.appendBits(c,4),l++}}static appendAlphanumericBytes(e,r){const s=e.length;let l=0;for(;l<s;){const c=sn.getAlphanumericCode(e.charCodeAt(l));if(c===-1)throw new nn;if(l+1<s){const d=sn.getAlphanumericCode(e.charCodeAt(l+1));if(d===-1)throw new nn;r.appendBits(c*45+d,11),l+=2}else r.appendBits(c,6),l++}}static append8BitBytes(e,r,s){let l;try{l=Ne.encode(e,s)}catch(c){throw new nn(c)}for(let c=0,d=l.length;c!==d;c++){const p=l[c];r.appendBits(p,8)}}static appendKanjiBytes(e,r){let s;try{s=Ne.encode(e,q.SJIS)}catch(c){throw new nn(c)}const l=s.length;for(let c=0;c<l;c+=2){const d=s[c]&255,p=s[c+1]&255,w=d<<8&4294967295|p;let E=-1;if(w>=33088&&w<=40956?E=w-33088:w>=57408&&w<=60351&&(E=w-49472),E===-1)throw new nn("Invalid byte sequence");const R=(E>>8)*192+(E&255);r.appendBits(R,13)}}static appendECI(e,r){r.appendBits(dt.ECI.getBits(),4),r.appendBits(e.getValue(),8)}}sn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),sn.DEFAULT_BYTE_MODE_ENCODING=q.UTF8.getName();class Li{write(e,r,s,l=null){if(e.length===0)throw new I("Found empty contents");if(r<0||s<0)throw new I("Requested dimensions are too small: "+r+"x"+s);let c=Ut.L,d=Li.QUIET_ZONE_SIZE;l!==null&&(l.get(Dn.ERROR_CORRECTION)!==void 0&&(c=Ut.fromString(l.get(Dn.ERROR_CORRECTION).toString())),l.get(Dn.MARGIN)!==void 0&&(d=Number.parseInt(l.get(Dn.MARGIN).toString(),10)));const p=sn.encode(e,c,l);return this.renderResult(p,r,s,d)}writeToDom(e,r,s,l,c=null){typeof e=="string"&&(e=document.querySelector(e));const d=this.write(r,s,l,c);e&&e.appendChild(d)}renderResult(e,r,s,l){const c=e.getMatrix();if(c===null)throw new Ze;const d=c.getWidth(),p=c.getHeight(),w=d+l*2,E=p+l*2,R=Math.max(r,w),P=Math.max(s,E),D=Math.min(Math.floor(R/w),Math.floor(P/E)),W=Math.floor((R-d*D)/2),K=Math.floor((P-p*D)/2),ee=this.createSVGElement(R,P);for(let oe=0,he=K;oe<p;oe++,he+=D)for(let Fe=0,He=W;Fe<d;Fe++,He+=D)if(c.get(Fe,oe)===1){const Me=this.createSvgRectElement(He,he,D,D);ee.appendChild(Me)}return ee}createSVGElement(e,r){const s=document.createElementNS(Li.SVG_NS,"svg");return s.setAttributeNS(null,"height",e.toString()),s.setAttributeNS(null,"width",r.toString()),s}createSvgRectElement(e,r,s,l){const c=document.createElementNS(Li.SVG_NS,"rect");return c.setAttributeNS(null,"x",e.toString()),c.setAttributeNS(null,"y",r.toString()),c.setAttributeNS(null,"height",s.toString()),c.setAttributeNS(null,"width",l.toString()),c.setAttributeNS(null,"fill","#000000"),c}}Li.QUIET_ZONE_SIZE=4,Li.SVG_NS="http://www.w3.org/2000/svg";class ss{encode(e,r,s,l,c){if(e.length===0)throw new I("Found empty contents");if(r!==te.QR_CODE)throw new I("Can only encode QR_CODE, but got "+r);if(s<0||l<0)throw new I(`Requested dimensions are too small: ${s}x${l}`);let d=Ut.L,p=ss.QUIET_ZONE_SIZE;c!==null&&(c.get(Dn.ERROR_CORRECTION)!==void 0&&(d=Ut.fromString(c.get(Dn.ERROR_CORRECTION).toString())),c.get(Dn.MARGIN)!==void 0&&(p=Number.parseInt(c.get(Dn.MARGIN).toString(),10)));const w=sn.encode(e,d,c);return ss.renderResult(w,s,l,p)}static renderResult(e,r,s,l){const c=e.getMatrix();if(c===null)throw new Ze;const d=c.getWidth(),p=c.getHeight(),w=d+l*2,E=p+l*2,R=Math.max(r,w),P=Math.max(s,E),D=Math.min(Math.floor(R/w),Math.floor(P/E)),W=Math.floor((R-d*D)/2),K=Math.floor((P-p*D)/2),ee=new Ce(R,P);for(let oe=0,he=K;oe<p;oe++,he+=D)for(let Fe=0,He=W;Fe<d;Fe++,He+=D)c.get(Fe,oe)===1&&ee.setRegion(He,he,D,D);return ee}}ss.QUIET_ZONE_SIZE=4;class eu{encode(e,r,s,l,c){let d;switch(r){case te.QR_CODE:d=new ss;break;default:throw new I("No encoder available for format "+r)}return d.encode(e,r,s,l,c)}}class Zr extends fe{constructor(e,r,s,l,c,d,p,w){if(super(d,p),this.yuvData=e,this.dataWidth=r,this.dataHeight=s,this.left=l,this.top=c,l+d>r||c+p>s)throw new I("Crop rectangle does not fit within image data.");w&&this.reverseHorizontal(d,p)}getRow(e,r){if(e<0||e>=this.getHeight())throw new I("Requested row is outside the image: "+e);const s=this.getWidth();(r==null||r.length<s)&&(r=new Uint8ClampedArray(s));const l=(e+this.top)*this.dataWidth+this.left;return B.arraycopy(this.yuvData,l,r,0,s),r}getMatrix(){const e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.yuvData;const s=e*r,l=new Uint8ClampedArray(s);let c=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return B.arraycopy(this.yuvData,c,l,0,s),l;for(let d=0;d<r;d++){const p=d*e;B.arraycopy(this.yuvData,c,l,p,e),c+=this.dataWidth}return l}isCropSupported(){return!0}crop(e,r,s,l){return new Zr(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+r,s,l,!1)}renderThumbnail(){const e=this.getWidth()/Zr.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/Zr.THUMBNAIL_SCALE_FACTOR,s=new Int32Array(e*r),l=this.yuvData;let c=this.top*this.dataWidth+this.left;for(let d=0;d<r;d++){const p=d*e;for(let w=0;w<e;w++){const E=l[c+w*Zr.THUMBNAIL_SCALE_FACTOR]&255;s[p+w]=4278190080|E*65793}c+=this.dataWidth*Zr.THUMBNAIL_SCALE_FACTOR}return s}getThumbnailWidth(){return this.getWidth()/Zr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Zr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,r){const s=this.yuvData;for(let l=0,c=this.top*this.dataWidth+this.left;l<r;l++,c+=this.dataWidth){const d=c+e/2;for(let p=c,w=c+e-1;p<d;p++,w--){const E=s[p];s[p]=s[w],s[w]=E}}}invert(){return new Ve(this)}}Zr.THUMBNAIL_SCALE_FACTOR=2;class Fs extends fe{constructor(e,r,s,l,c,d,p){if(super(r,s),this.dataWidth=l,this.dataHeight=c,this.left=d,this.top=p,e.BYTES_PER_ELEMENT===4){const w=r*s,E=new Uint8ClampedArray(w);for(let R=0;R<w;R++){const P=e[R],D=P>>16&255,W=P>>7&510,K=P&255;E[R]=(D+W+K)/4&255}this.luminances=E}else this.luminances=e;if(l===void 0&&(this.dataWidth=r),c===void 0&&(this.dataHeight=s),d===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+r>this.dataWidth||this.top+s>this.dataHeight)throw new I("Crop rectangle does not fit within image data.")}getRow(e,r){if(e<0||e>=this.getHeight())throw new I("Requested row is outside the image: "+e);const s=this.getWidth();(r==null||r.length<s)&&(r=new Uint8ClampedArray(s));const l=(e+this.top)*this.dataWidth+this.left;return B.arraycopy(this.luminances,l,r,0,s),r}getMatrix(){const e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.luminances;const s=e*r,l=new Uint8ClampedArray(s);let c=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return B.arraycopy(this.luminances,c,l,0,s),l;for(let d=0;d<r;d++){const p=d*e;B.arraycopy(this.luminances,c,l,p,e),c+=this.dataWidth}return l}isCropSupported(){return!0}crop(e,r,s,l){return new Fs(this.luminances,s,l,this.dataWidth,this.dataHeight,this.left+e,this.top+r)}invert(){return new Ve(this)}}class hl extends q{static forName(e){return this.getCharacterSetECIByName(e)}}class oa{}oa.ISO_8859_1=q.ISO8859_1;class ml{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class aa{static singletonList(e){return[e]}static min(e,r){return e.sort(r)[0]}}class tu{constructor(e){this.previous=e}getPrevious(){return this.previous}}class os extends tu{constructor(e,r,s){super(e),this.value=r,this.bitCount=s}appendTo(e,r){e.appendBits(this.value,this.bitCount)}add(e,r){return new os(this,e,r)}addBinaryShift(e,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new os(this,e,r)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+F.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class la extends os{constructor(e,r,s){super(e,0,0),this.binaryShiftStart=r,this.binaryShiftByteCount=s}appendTo(e,r){for(let s=0;s<this.binaryShiftByteCount;s++)(s===0||s===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):s===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(r[this.binaryShiftStart+s],8)}addBinaryShift(e,r){return new la(this,e,r)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function nu(k,e,r){return new la(k,e,r)}function Vs(k,e,r){return new os(k,e,r)}const ru=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ci=0,as=1,ir=2,pl=3,zr=4,gl=new os(null,0,0),Co=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function xl(k){for(let e of k)V.fill(e,-1);return k[Ci][zr]=0,k[as][zr]=0,k[as][Ci]=28,k[pl][zr]=0,k[ir][zr]=0,k[ir][Ci]=15,k}const ca=xl(V.createInt32Array(6,6));class dr{constructor(e,r,s,l){this.token=e,this.mode=r,this.binaryShiftByteCount=s,this.bitCount=l}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,r){let s=this.bitCount,l=this.token;if(e!==this.mode){let d=Co[this.mode][e];l=Vs(l,d&65535,d>>16),s+=d>>16}let c=e===ir?4:5;return l=Vs(l,r,c),new dr(l,e,0,s+c)}shiftAndAppend(e,r){let s=this.token,l=this.mode===ir?4:5;return s=Vs(s,ca[this.mode][e],l),s=Vs(s,r,5),new dr(s,this.mode,0,this.bitCount+l+5)}addBinaryShiftChar(e){let r=this.token,s=this.mode,l=this.bitCount;if(this.mode===zr||this.mode===ir){let p=Co[s][Ci];r=Vs(r,p&65535,p>>16),l+=p>>16,s=Ci}let c=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new dr(r,s,this.binaryShiftByteCount+1,l+c);return d.binaryShiftByteCount===2078&&(d=d.endBinaryShift(e+1)),d}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let r=this.token;return r=nu(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new dr(r,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let r=this.bitCount+(Co[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=dr.calculateBinaryShiftCost(e)-dr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount}toBitArray(e){let r=[];for(let l=this.endBinaryShift(e.length).token;l!==null;l=l.getPrevious())r.unshift(l);let s=new $;for(const l of r)l.appendTo(s,e);return s}toString(){return Ae.format("%s bits=%d bytes=%d",ru[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}dr.INITIAL_STATE=new dr(gl,Ci,0,0);function iu(k){const e=Ae.getCharCode(" "),r=Ae.getCharCode("."),s=Ae.getCharCode(",");k[Ci][e]=1;const l=Ae.getCharCode("Z"),c=Ae.getCharCode("A");for(let D=c;D<=l;D++)k[Ci][D]=D-c+2;k[as][e]=1;const d=Ae.getCharCode("z"),p=Ae.getCharCode("a");for(let D=p;D<=d;D++)k[as][D]=D-p+2;k[ir][e]=1;const w=Ae.getCharCode("9"),E=Ae.getCharCode("0");for(let D=E;D<=w;D++)k[ir][D]=D-E+2;k[ir][s]=12,k[ir][r]=13;const R=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let D=0;D<R.length;D++)k[pl][Ae.getCharCode(R[D])]=D;const P=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let D=0;D<P.length;D++)Ae.getCharCode(P[D])>0&&(k[zr][Ae.getCharCode(P[D])]=D);return k}const ua=iu(V.createInt32Array(5,256));class Us{constructor(e){this.text=e}encode(){const e=Ae.getCharCode(" "),r=Ae.getCharCode(`
`);let s=aa.singletonList(dr.INITIAL_STATE);for(let c=0;c<this.text.length;c++){let d,p=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case Ae.getCharCode("\r"):d=p===r?2:0;break;case Ae.getCharCode("."):d=p===e?3:0;break;case Ae.getCharCode(","):d=p===e?4:0;break;case Ae.getCharCode(":"):d=p===e?5:0;break;default:d=0}d>0?(s=Us.updateStateListForPair(s,c,d),c++):s=this.updateStateListForChar(s,c)}return aa.min(s,(c,d)=>c.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,r){const s=[];for(let l of e)this.updateStateForChar(l,r,s);return Us.simplifyStates(s)}updateStateForChar(e,r,s){let l=this.text[r]&255,c=ua[e.getMode()][l]>0,d=null;for(let p=0;p<=zr;p++){let w=ua[p][l];if(w>0){if(d==null&&(d=e.endBinaryShift(r)),!c||p===e.getMode()||p===ir){const E=d.latchAndAppend(p,w);s.push(E)}if(!c&&ca[e.getMode()][p]>=0){const E=d.shiftAndAppend(p,w);s.push(E)}}}if(e.getBinaryShiftByteCount()>0||ua[e.getMode()][l]===0){let p=e.addBinaryShiftChar(r);s.push(p)}}static updateStateListForPair(e,r,s){const l=[];for(let c of e)this.updateStateForPair(c,r,s,l);return this.simplifyStates(l)}static updateStateForPair(e,r,s,l){let c=e.endBinaryShift(r);if(l.push(c.latchAndAppend(zr,s)),e.getMode()!==zr&&l.push(c.shiftAndAppend(zr,s)),s===3||s===4){let d=c.latchAndAppend(ir,16-s).latchAndAppend(ir,1);l.push(d)}if(e.getBinaryShiftByteCount()>0){let d=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);l.push(d)}}static simplifyStates(e){let r=[];for(const s of e){let l=!0;for(const c of r){if(c.isBetterThanOrEqualTo(s)){l=!1;break}s.isBetterThanOrEqualTo(c)&&(r=r.filter(d=>d!==c))}l&&r.push(s)}return r}}class Vt{constructor(){}static encodeBytes(e){return Vt.encode(e,Vt.DEFAULT_EC_PERCENT,Vt.DEFAULT_AZTEC_LAYERS)}static encode(e,r,s){let l=new Us(e).encode(),c=F.truncDivision(l.getSize()*r,100)+11,d=l.getSize()+c,p,w,E,R,P;if(s!==Vt.DEFAULT_AZTEC_LAYERS){if(p=s<0,w=Math.abs(s),w>(p?Vt.MAX_NB_BITS_COMPACT:Vt.MAX_NB_BITS))throw new I(Ae.format("Illegal value %s for layers",s));E=Vt.totalBitsInLayer(w,p),R=Vt.WORD_SIZE[w];let Me=E-E%R;if(P=Vt.stuffBits(l,R),P.getSize()+c>Me)throw new I("Data to large for user specified layer");if(p&&P.getSize()>R*64)throw new I("Data to large for user specified layer")}else{R=0,P=null;for(let Me=0;;Me++){if(Me>Vt.MAX_NB_BITS)throw new I("Data too large for an Aztec code");if(p=Me<=3,w=p?Me+1:Me,E=Vt.totalBitsInLayer(w,p),d>E)continue;(P==null||R!==Vt.WORD_SIZE[w])&&(R=Vt.WORD_SIZE[w],P=Vt.stuffBits(l,R));let jt=E-E%R;if(!(p&&P.getSize()>R*64)&&P.getSize()+c<=jt)break}}let D=Vt.generateCheckWords(P,E,R),W=P.getSize()/R,K=Vt.generateModeMessage(p,w,W),ee=(p?11:14)+w*4,oe=new Int32Array(ee),he;if(p){he=ee;for(let Me=0;Me<oe.length;Me++)oe[Me]=Me}else{he=ee+1+2*F.truncDivision(F.truncDivision(ee,2)-1,15);let Me=F.truncDivision(ee,2),jt=F.truncDivision(he,2);for(let Tt=0;Tt<Me;Tt++){let wr=Tt+F.truncDivision(Tt,15);oe[Me-Tt-1]=jt-wr-1,oe[Me+Tt]=jt+wr+1}}let Fe=new Ce(he);for(let Me=0,jt=0;Me<w;Me++){let Tt=(w-Me)*4+(p?9:12);for(let wr=0;wr<Tt;wr++){let Wr=wr*2;for(let Ln=0;Ln<2;Ln++)D.get(jt+Wr+Ln)&&Fe.set(oe[Me*2+Ln],oe[Me*2+wr]),D.get(jt+Tt*2+Wr+Ln)&&Fe.set(oe[Me*2+wr],oe[ee-1-Me*2-Ln]),D.get(jt+Tt*4+Wr+Ln)&&Fe.set(oe[ee-1-Me*2-Ln],oe[ee-1-Me*2-wr]),D.get(jt+Tt*6+Wr+Ln)&&Fe.set(oe[ee-1-Me*2-wr],oe[Me*2+Ln])}jt+=Tt*8}if(Vt.drawModeMessage(Fe,p,he,K),p)Vt.drawBullsEye(Fe,F.truncDivision(he,2),5);else{Vt.drawBullsEye(Fe,F.truncDivision(he,2),7);for(let Me=0,jt=0;Me<F.truncDivision(ee,2)-1;Me+=15,jt+=16)for(let Tt=F.truncDivision(he,2)&1;Tt<he;Tt+=2)Fe.set(F.truncDivision(he,2)-jt,Tt),Fe.set(F.truncDivision(he,2)+jt,Tt),Fe.set(Tt,F.truncDivision(he,2)-jt),Fe.set(Tt,F.truncDivision(he,2)+jt)}let He=new ml;return He.setCompact(p),He.setSize(he),He.setLayers(w),He.setCodeWords(W),He.setMatrix(Fe),He}static drawBullsEye(e,r,s){for(let l=0;l<s;l+=2)for(let c=r-l;c<=r+l;c++)e.set(c,r-l),e.set(c,r+l),e.set(r-l,c),e.set(r+l,c);e.set(r-s,r-s),e.set(r-s+1,r-s),e.set(r-s,r-s+1),e.set(r+s,r-s),e.set(r+s,r-s+1),e.set(r+s,r+s-1)}static generateModeMessage(e,r,s){let l=new $;return e?(l.appendBits(r-1,2),l.appendBits(s-1,6),l=Vt.generateCheckWords(l,28,4)):(l.appendBits(r-1,5),l.appendBits(s-1,11),l=Vt.generateCheckWords(l,40,4)),l}static drawModeMessage(e,r,s,l){let c=F.truncDivision(s,2);if(r)for(let d=0;d<7;d++){let p=c-3+d;l.get(d)&&e.set(p,c-5),l.get(d+7)&&e.set(c+5,p),l.get(20-d)&&e.set(p,c+5),l.get(27-d)&&e.set(c-5,p)}else for(let d=0;d<10;d++){let p=c-5+d+F.truncDivision(d,5);l.get(d)&&e.set(p,c-7),l.get(d+10)&&e.set(c+7,p),l.get(29-d)&&e.set(p,c+7),l.get(39-d)&&e.set(c-7,p)}}static generateCheckWords(e,r,s){let l=e.getSize()/s,c=new sa(Vt.getGF(s)),d=F.truncDivision(r,s),p=Vt.bitsToWords(e,s,d);c.encode(p,d-l);let w=r%s,E=new $;E.appendBits(0,w);for(const R of Array.from(p))E.appendBits(R,s);return E}static bitsToWords(e,r,s){let l=new Int32Array(s),c,d;for(c=0,d=e.getSize()/r;c<d;c++){let p=0;for(let w=0;w<r;w++)p|=e.get(c*r+w)?1<<r-w-1:0;l[c]=p}return l}static getGF(e){switch(e){case 4:return ue.AZTEC_PARAM;case 6:return ue.AZTEC_DATA_6;case 8:return ue.AZTEC_DATA_8;case 10:return ue.AZTEC_DATA_10;case 12:return ue.AZTEC_DATA_12;default:throw new I("Unsupported word size "+e)}}static stuffBits(e,r){let s=new $,l=e.getSize(),c=(1<<r)-2;for(let d=0;d<l;d+=r){let p=0;for(let w=0;w<r;w++)(d+w>=l||e.get(d+w))&&(p|=1<<r-1-w);(p&c)===c?(s.appendBits(p&c,r),d--):p&c?s.appendBits(p,r):(s.appendBits(p|1,r),d--)}return s}static totalBitsInLayer(e,r){return((r?88:112)+16*e)*e}}Vt.DEFAULT_EC_PERCENT=33,Vt.DEFAULT_AZTEC_LAYERS=0,Vt.MAX_NB_BITS=32,Vt.MAX_NB_BITS_COMPACT=4,Vt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class zs{encode(e,r,s,l){return this.encodeWithHints(e,r,s,l,null)}encodeWithHints(e,r,s,l,c){let d=oa.ISO_8859_1,p=Vt.DEFAULT_EC_PERCENT,w=Vt.DEFAULT_AZTEC_LAYERS;return c!=null&&(c.has(Dn.CHARACTER_SET)&&(d=hl.forName(c.get(Dn.CHARACTER_SET).toString())),c.has(Dn.ERROR_CORRECTION)&&(p=F.parseInt(c.get(Dn.ERROR_CORRECTION).toString())),c.has(Dn.AZTEC_LAYERS)&&(w=F.parseInt(c.get(Dn.AZTEC_LAYERS).toString()))),zs.encodeLayers(e,r,s,l,d,p,w)}static encodeLayers(e,r,s,l,c,d,p){if(r!==te.AZTEC)throw new I("Can only encode AZTEC, but got "+r);let w=Vt.encode(Ae.getBytes(e,c),d,p);return zs.renderResult(w,s,l)}static renderResult(e,r,s){let l=e.getMatrix();if(l==null)throw new Ze;let c=l.getWidth(),d=l.getHeight(),p=Math.max(r,c),w=Math.max(s,d),E=Math.min(p/c,w/d),R=(p-c*E)/2,P=(w-d*E)/2,D=new Ce(p,w);for(let W=0,K=P;W<d;W++,K+=E)for(let ee=0,oe=R;ee<c;ee++,oe+=E)l.get(ee,W)&&D.setRegion(oe,K,E,E);return D}}a.AbstractExpandedDecoder=es,a.ArgumentException=S,a.ArithmeticException=ie,a.AztecCode=ml,a.AztecCodeReader=at,a.AztecCodeWriter=zs,a.AztecDecoder=_e,a.AztecDetector=Qe,a.AztecDetectorResult=Lt,a.AztecEncoder=Vt,a.AztecHighLevelEncoder=Us,a.AztecPoint=Wt,a.BarcodeFormat=te,a.Binarizer=L,a.BinaryBitmap=_,a.BitArray=$,a.BitMatrix=Ce,a.BitSource=ts,a.BrowserAztecCodeReader=qe,a.BrowserBarcodeReader=mo,a.BrowserCodeReader=Te,a.BrowserDatamatrixCodeReader=ea,a.BrowserMultiFormatReader=Bs,a.BrowserPDF417Reader=wo,a.BrowserQRCodeReader=fl,a.BrowserQRCodeSvgWriter=Li,a.CharacterSetECI=q,a.ChecksumException=M,a.Code128Reader=se,a.Code39Reader=et,a.DataMatrixDecodedBitStreamParser=Nr,a.DataMatrixReader=yr,a.DecodeHintType=re,a.DecoderResult=$e,a.DefaultGridSampler=zt,a.DetectorResult=vt,a.EAN13Reader=hn,a.EncodeHintType=Dn,a.Exception=C,a.FormatException=X,a.GenericGF=ue,a.GenericGFPoly=xe,a.GlobalHistogramBinarizer=je,a.GridSampler=Pt,a.GridSamplerInstance=lt,a.HTMLCanvasElementLuminanceSource=we,a.HybridBinarizer=ye,a.ITFReader=nt,a.IllegalArgumentException=I,a.IllegalStateException=Ze,a.InvertedLuminanceSource=Ve,a.LuminanceSource=fe,a.MathUtils=We,a.MultiFormatOneDReader=yi,a.MultiFormatReader=yo,a.MultiFormatWriter=eu,a.NotFoundException=G,a.OneDReader=ve,a.PDF417DecodedBitStreamParser=me,a.PDF417DecoderErrorCorrection=Ir,a.PDF417Reader=qn,a.PDF417ResultMetadata=go,a.PerspectiveTransform=St,a.PlanarYUVLuminanceSource=Zr,a.QRCodeByteMatrix=vo,a.QRCodeDataMask=Nt,a.QRCodeDecodedBitStreamParser=tn,a.QRCodeDecoderErrorCorrectionLevel=Ut,a.QRCodeDecoderFormatInformation=Mn,a.QRCodeEncoder=sn,a.QRCodeEncoderQRCode=Di,a.QRCodeMaskUtil=ln,a.QRCodeMatrixUtil=pt,a.QRCodeMode=dt,a.QRCodeReader=an,a.QRCodeVersion=ct,a.QRCodeWriter=ss,a.RGBLuminanceSource=Fs,a.RSS14Reader=Zt,a.RSSExpandedReader=Se,a.ReaderException=is,a.ReedSolomonDecoder=tt,a.ReedSolomonEncoder=sa,a.ReedSolomonException=Re,a.Result=Ge,a.ResultMetadataType=Pe,a.ResultPoint=Ie,a.StringUtils=Ae,a.UnsupportedOperationException=ge,a.VideoInputDevice=Y,a.WhiteRectangleDetector=Ee,a.WriterException=nn,a.ZXingArrays=V,a.ZXingCharset=hl,a.ZXingInteger=F,a.ZXingStandardCharsets=oa,a.ZXingStringBuilder=De,a.ZXingStringEncoding=Ne,a.ZXingSystem=B,a.createAbstractExpandedDecoder=ks,Object.defineProperty(a,"__esModule",{value:!0})})}(ja,ja.exports)),ja.exports}jw();var Df=function(){var t=function(i,a){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,m){u.__proto__=m}||function(u,m){for(var x in m)Object.prototype.hasOwnProperty.call(m,x)&&(u[x]=m[x])},t(i,a)};return function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");t(i,a);function u(){this.constructor=i}i.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}}(),Pp=function(){function t(i,a){this.name=i,this.track=a}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(i){var a={};a[this.name]=i;var u={advanced:[a]};return this.track.applyConstraints(u)},t.prototype.value=function(){var i=this.track.getSettings();if(this.name in i){var a=i[this.name];return a}return null},t}(),Bw=function(t){Df(i,t);function i(a,u){return t.call(this,a,u)||this}return i.prototype.min=function(){return this.getCapabilities().min},i.prototype.max=function(){return this.getCapabilities().max},i.prototype.step=function(){return this.getCapabilities().step},i.prototype.apply=function(a){var u={};u[this.name]=a;var m={advanced:[u]};return this.track.applyConstraints(m)},i.prototype.getCapabilities=function(){this.failIfNotSupported();var a=this.track.getCapabilities(),u=a[this.name];return{min:u.min,max:u.max,step:u.step}},i.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},i}(Pp);(function(t){Df(i,t);function i(a){return t.call(this,"zoom",a)||this}return i})(Bw);(function(t){Df(i,t);function i(a){return t.call(this,"torch",a)||this}return i})(Pp);var B1;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(B1||(B1={}));var Fw=function(){var t=function(i,a){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,m){u.__proto__=m}||function(u,m){for(var x in m)Object.prototype.hasOwnProperty.call(m,x)&&(u[x]=m[x])},t(i,a)};return function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");t(i,a);function u(){this.constructor=i}i.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}}();(function(t){Fw(i,t);function i(){return t!==null&&t.apply(this,arguments)||this}return i.DEFAULT_WIDTH=300,i.DEFAULT_WIDTH_OFFSET=2,i.FILE_SCAN_MIN_HEIGHT=300,i.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,i.MIN_QR_BOX_SIZE=50,i.SHADED_LEFT=1,i.SHADED_RIGHT=2,i.SHADED_TOP=3,i.SHADED_BOTTOM=4,i.SHADED_REGION_ELEMENT_ID="qr-shaded-region",i.VERBOSE=!1,i.BORDER_SHADER_DEFAULT_COLOR="#ffffff",i.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",i})(Dw);var F1;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(F1||(F1={}));const Vw=({user:t,onProfileClick:i})=>null,Lf=N.createContext({});function rl(t){const i=N.useRef(null);return i.current===null&&(i.current=t()),i.current}const jf=typeof window<"u",Bf=jf?N.useLayoutEffect:N.useEffect,Gc=N.createContext(null);function Ff(t,i){t.indexOf(i)===-1&&t.push(i)}function Vf(t,i){const a=t.indexOf(i);a>-1&&t.splice(a,1)}const $i=(t,i,a)=>a>i?i:a<t?t:a;let Uf=()=>{};const Zi={},Mp=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Op(t){return typeof t=="object"&&t!==null}const Dp=t=>/^0[^.\s]+$/u.test(t);function zf(t){let i;return()=>(i===void 0&&(i=t()),i)}const ii=t=>t,Uw=(t,i)=>a=>i(t(a)),il=(...t)=>t.reduce(Uw),$a=(t,i,a)=>{const u=i-t;return u===0?1:(a-t)/u};class Wf{constructor(){this.subscriptions=[]}add(i){return Ff(this.subscriptions,i),()=>Vf(this.subscriptions,i)}notify(i,a,u){const m=this.subscriptions.length;if(m)if(m===1)this.subscriptions[0](i,a,u);else for(let x=0;x<m;x++){const y=this.subscriptions[x];y&&y(i,a,u)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ni=t=>t*1e3,Ii=t=>t/1e3;function Lp(t,i){return i?t*(1e3/i):0}const jp=(t,i,a)=>(((1-3*a+3*i)*t+(3*a-6*i))*t+3*i)*t,zw=1e-7,Ww=12;function Hw(t,i,a,u,m){let x,y,b=0;do y=i+(a-i)/2,x=jp(y,u,m)-t,x>0?a=y:i=y;while(Math.abs(x)>zw&&++b<Ww);return y}function sl(t,i,a,u){if(t===i&&a===u)return ii;const m=x=>Hw(x,0,1,t,a);return x=>x===0||x===1?x:jp(m(x),i,u)}const Bp=t=>i=>i<=.5?t(2*i)/2:(2-t(2*(1-i)))/2,Fp=t=>i=>1-t(1-i),Vp=sl(.33,1.53,.69,.99),Hf=Fp(Vp),Up=Bp(Hf),zp=t=>(t*=2)<1?.5*Hf(t):.5*(2-Math.pow(2,-10*(t-1))),Gf=t=>1-Math.sin(Math.acos(t)),Wp=Fp(Gf),Hp=Bp(Gf),Gw=sl(.42,0,1,1),Xw=sl(0,0,.58,1),Gp=sl(.42,0,.58,1),Yw=t=>Array.isArray(t)&&typeof t[0]!="number",Xp=t=>Array.isArray(t)&&typeof t[0]=="number",$w={linear:ii,easeIn:Gw,easeInOut:Gp,easeOut:Xw,circIn:Gf,circInOut:Hp,circOut:Wp,backIn:Hf,backInOut:Up,backOut:Vp,anticipate:zp},Zw=t=>typeof t=="string",V1=t=>{if(Xp(t)){Uf(t.length===4);const[i,a,u,m]=t;return sl(i,a,u,m)}else if(Zw(t))return $w[t];return t},fc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Kw(t,i){let a=new Set,u=new Set,m=!1,x=!1;const y=new WeakSet;let b={delta:0,timestamp:0,isProcessing:!1};function v(S){y.has(S)&&(C.schedule(S),t()),S(b)}const C={schedule:(S,I=!1,_=!1)=>{const L=_&&m?a:u;return I&&y.add(S),L.has(S)||L.add(S),S},cancel:S=>{u.delete(S),y.delete(S)},process:S=>{if(b=S,m){x=!0;return}m=!0,[a,u]=[u,a],a.forEach(v),a.clear(),m=!1,x&&(x=!1,C.process(S))}};return C}const qw=40;function Yp(t,i){let a=!1,u=!0;const m={delta:0,timestamp:0,isProcessing:!1},x=()=>a=!0,y=fc.reduce((F,$)=>(F[$]=Kw(x),F),{}),{setup:b,read:v,resolveKeyframes:C,preUpdate:S,update:I,preRender:_,render:M,postRender:L}=y,B=()=>{const F=Zi.useManualTiming?m.timestamp:performance.now();a=!1,Zi.useManualTiming||(m.delta=u?1e3/60:Math.max(Math.min(F-m.timestamp,qw),1)),m.timestamp=F,m.isProcessing=!0,b.process(m),v.process(m),C.process(m),S.process(m),I.process(m),_.process(m),M.process(m),L.process(m),m.isProcessing=!1,a&&i&&(u=!1,t(B))},j=()=>{a=!0,u=!0,m.isProcessing||t(B)};return{schedule:fc.reduce((F,$)=>{const Z=y[$];return F[$]=(re,X=!1,Q=!1)=>(a||j(),Z.schedule(re,X,Q)),F},{}),cancel:F=>{for(let $=0;$<fc.length;$++)y[fc[$]].cancel(F)},state:m,steps:y}}const{schedule:un,cancel:Ki,state:gr,steps:Rd}=Yp(typeof requestAnimationFrame<"u"?requestAnimationFrame:ii,!0);let bc;function Qw(){bc=void 0}const Vr={now:()=>(bc===void 0&&Vr.set(gr.isProcessing||Zi.useManualTiming?gr.timestamp:performance.now()),bc),set:t=>{bc=t,queueMicrotask(Qw)}},$p=t=>i=>typeof i=="string"&&i.startsWith(t),Xf=$p("--"),Jw=$p("var(--"),Yf=t=>Jw(t)?ev.test(t.split("/*")[0].trim()):!1,ev=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ko={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Za={...Ko,transform:t=>$i(0,1,t)},hc={...Ko,default:1},Fa=t=>Math.round(t*1e5)/1e5,$f=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function tv(t){return t==null}const nv=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Zf=(t,i)=>a=>!!(typeof a=="string"&&nv.test(a)&&a.startsWith(t)||i&&!tv(a)&&Object.prototype.hasOwnProperty.call(a,i)),Zp=(t,i,a)=>u=>{if(typeof u!="string")return u;const[m,x,y,b]=u.match($f);return{[t]:parseFloat(m),[i]:parseFloat(x),[a]:parseFloat(y),alpha:b!==void 0?parseFloat(b):1}},rv=t=>$i(0,255,t),kd={...Ko,transform:t=>Math.round(rv(t))},ro={test:Zf("rgb","red"),parse:Zp("red","green","blue"),transform:({red:t,green:i,blue:a,alpha:u=1})=>"rgba("+kd.transform(t)+", "+kd.transform(i)+", "+kd.transform(a)+", "+Fa(Za.transform(u))+")"};function iv(t){let i="",a="",u="",m="";return t.length>5?(i=t.substring(1,3),a=t.substring(3,5),u=t.substring(5,7),m=t.substring(7,9)):(i=t.substring(1,2),a=t.substring(2,3),u=t.substring(3,4),m=t.substring(4,5),i+=i,a+=a,u+=u,m+=m),{red:parseInt(i,16),green:parseInt(a,16),blue:parseInt(u,16),alpha:m?parseInt(m,16)/255:1}}const Qd={test:Zf("#"),parse:iv,transform:ro.transform},ol=t=>({test:i=>typeof i=="string"&&i.endsWith(t)&&i.split(" ").length===1,parse:parseFloat,transform:i=>`${i}${t}`}),Es=ol("deg"),Ti=ol("%"),Et=ol("px"),sv=ol("vh"),ov=ol("vw"),U1={...Ti,parse:t=>Ti.parse(t)/100,transform:t=>Ti.transform(t*100)},Fo={test:Zf("hsl","hue"),parse:Zp("hue","saturation","lightness"),transform:({hue:t,saturation:i,lightness:a,alpha:u=1})=>"hsla("+Math.round(t)+", "+Ti.transform(Fa(i))+", "+Ti.transform(Fa(a))+", "+Fa(Za.transform(u))+")"},Wn={test:t=>ro.test(t)||Qd.test(t)||Fo.test(t),parse:t=>ro.test(t)?ro.parse(t):Fo.test(t)?Fo.parse(t):Qd.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ro.transform(t):Fo.transform(t),getAnimatableNone:t=>{const i=Wn.parse(t);return i.alpha=0,Wn.transform(i)}},av=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function lv(t){var i,a;return isNaN(t)&&typeof t=="string"&&(((i=t.match($f))==null?void 0:i.length)||0)+(((a=t.match(av))==null?void 0:a.length)||0)>0}const Kp="number",qp="color",cv="var",uv="var(",z1="${}",dv=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ka(t){const i=t.toString(),a=[],u={color:[],number:[],var:[]},m=[];let x=0;const b=i.replace(dv,v=>(Wn.test(v)?(u.color.push(x),m.push(qp),a.push(Wn.parse(v))):v.startsWith(uv)?(u.var.push(x),m.push(cv),a.push(v)):(u.number.push(x),m.push(Kp),a.push(parseFloat(v))),++x,z1)).split(z1);return{values:a,split:b,indexes:u,types:m}}function Qp(t){return Ka(t).values}function Jp(t){const{split:i,types:a}=Ka(t),u=i.length;return m=>{let x="";for(let y=0;y<u;y++)if(x+=i[y],m[y]!==void 0){const b=a[y];b===Kp?x+=Fa(m[y]):b===qp?x+=Wn.transform(m[y]):x+=m[y]}return x}}const fv=t=>typeof t=="number"?0:Wn.test(t)?Wn.getAnimatableNone(t):t;function hv(t){const i=Qp(t);return Jp(t)(i.map(fv))}const Ns={test:lv,parse:Qp,createTransformer:Jp,getAnimatableNone:hv};function Pd(t,i,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?t+(i-t)*6*a:a<1/2?i:a<2/3?t+(i-t)*(2/3-a)*6:t}function mv({hue:t,saturation:i,lightness:a,alpha:u}){t/=360,i/=100,a/=100;let m=0,x=0,y=0;if(!i)m=x=y=a;else{const b=a<.5?a*(1+i):a+i-a*i,v=2*a-b;m=Pd(v,b,t+1/3),x=Pd(v,b,t),y=Pd(v,b,t-1/3)}return{red:Math.round(m*255),green:Math.round(x*255),blue:Math.round(y*255),alpha:u}}function Rc(t,i){return a=>a>0?i:t}const An=(t,i,a)=>t+(i-t)*a,Md=(t,i,a)=>{const u=t*t,m=a*(i*i-u)+u;return m<0?0:Math.sqrt(m)},pv=[Qd,ro,Fo],gv=t=>pv.find(i=>i.test(t));function W1(t){const i=gv(t);if(!i)return!1;let a=i.parse(t);return i===Fo&&(a=mv(a)),a}const H1=(t,i)=>{const a=W1(t),u=W1(i);if(!a||!u)return Rc(t,i);const m={...a};return x=>(m.red=Md(a.red,u.red,x),m.green=Md(a.green,u.green,x),m.blue=Md(a.blue,u.blue,x),m.alpha=An(a.alpha,u.alpha,x),ro.transform(m))},Jd=new Set(["none","hidden"]);function xv(t,i){return Jd.has(t)?a=>a<=0?t:i:a=>a>=1?i:t}function yv(t,i){return a=>An(t,i,a)}function Kf(t){return typeof t=="number"?yv:typeof t=="string"?Yf(t)?Rc:Wn.test(t)?H1:Cv:Array.isArray(t)?eg:typeof t=="object"?Wn.test(t)?H1:wv:Rc}function eg(t,i){const a=[...t],u=a.length,m=t.map((x,y)=>Kf(x)(x,i[y]));return x=>{for(let y=0;y<u;y++)a[y]=m[y](x);return a}}function wv(t,i){const a={...t,...i},u={};for(const m in a)t[m]!==void 0&&i[m]!==void 0&&(u[m]=Kf(t[m])(t[m],i[m]));return m=>{for(const x in u)a[x]=u[x](m);return a}}function vv(t,i){const a=[],u={color:0,var:0,number:0};for(let m=0;m<i.values.length;m++){const x=i.types[m],y=t.indexes[x][u[x]],b=t.values[y]??0;a[m]=b,u[x]++}return a}const Cv=(t,i)=>{const a=Ns.createTransformer(i),u=Ka(t),m=Ka(i);return u.indexes.var.length===m.indexes.var.length&&u.indexes.color.length===m.indexes.color.length&&u.indexes.number.length>=m.indexes.number.length?Jd.has(t)&&!m.values.length||Jd.has(i)&&!u.values.length?xv(t,i):il(eg(vv(u,m),m.values),a):Rc(t,i)};function tg(t,i,a){return typeof t=="number"&&typeof i=="number"&&typeof a=="number"?An(t,i,a):Kf(t)(t,i)}const bv=t=>{const i=({timestamp:a})=>t(a);return{start:(a=!0)=>un.update(i,a),stop:()=>Ki(i),now:()=>gr.isProcessing?gr.timestamp:Vr.now()}},ng=(t,i,a=10)=>{let u="";const m=Math.max(Math.round(i/a),2);for(let x=0;x<m;x++)u+=Math.round(t(x/(m-1))*1e4)/1e4+", ";return`linear(${u.substring(0,u.length-2)})`},kc=2e4;function qf(t){let i=0;const a=50;let u=t.next(i);for(;!u.done&&i<kc;)i+=a,u=t.next(i);return i>=kc?1/0:i}function Ev(t,i=100,a){const u=a({...t,keyframes:[0,i]}),m=Math.min(qf(u),kc);return{type:"keyframes",ease:x=>u.next(m*x).value/i,duration:Ii(m)}}const Sv=5;function rg(t,i,a){const u=Math.max(i-Sv,0);return Lp(a-t(u),i-u)}const kn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},G1=.001;function Av({duration:t=kn.duration,bounce:i=kn.bounce,velocity:a=kn.velocity,mass:u=kn.mass}){let m,x,y=1-i;y=$i(kn.minDamping,kn.maxDamping,y),t=$i(kn.minDuration,kn.maxDuration,Ii(t)),y<1?(m=C=>{const S=C*y,I=S*t,_=S-a,M=ef(C,y),L=Math.exp(-I);return G1-_/M*L},x=C=>{const I=C*y*t,_=I*a+a,M=Math.pow(y,2)*Math.pow(C,2)*t,L=Math.exp(-I),B=ef(Math.pow(C,2),y);return(-m(C)+G1>0?-1:1)*((_-M)*L)/B}):(m=C=>{const S=Math.exp(-C*t),I=(C-a)*t+1;return-.001+S*I},x=C=>{const S=Math.exp(-C*t),I=(a-C)*(t*t);return S*I});const b=5/t,v=Iv(m,x,b);if(t=Ni(t),isNaN(v))return{stiffness:kn.stiffness,damping:kn.damping,duration:t};{const C=Math.pow(v,2)*u;return{stiffness:C,damping:y*2*Math.sqrt(u*C),duration:t}}}const Nv=12;function Iv(t,i,a){let u=a;for(let m=1;m<Nv;m++)u=u-t(u)/i(u);return u}function ef(t,i){return t*Math.sqrt(1-i*i)}const Tv=["duration","bounce"],_v=["stiffness","damping","mass"];function X1(t,i){return i.some(a=>t[a]!==void 0)}function Rv(t){let i={velocity:kn.velocity,stiffness:kn.stiffness,damping:kn.damping,mass:kn.mass,isResolvedFromDuration:!1,...t};if(!X1(t,_v)&&X1(t,Tv))if(t.visualDuration){const a=t.visualDuration,u=2*Math.PI/(a*1.2),m=u*u,x=2*$i(.05,1,1-(t.bounce||0))*Math.sqrt(m);i={...i,mass:kn.mass,stiffness:m,damping:x}}else{const a=Av(t);i={...i,...a,mass:kn.mass},i.isResolvedFromDuration=!0}return i}function Pc(t=kn.visualDuration,i=kn.bounce){const a=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:i}:t;let{restSpeed:u,restDelta:m}=a;const x=a.keyframes[0],y=a.keyframes[a.keyframes.length-1],b={done:!1,value:x},{stiffness:v,damping:C,mass:S,duration:I,velocity:_,isResolvedFromDuration:M}=Rv({...a,velocity:-Ii(a.velocity||0)}),L=_||0,B=C/(2*Math.sqrt(v*S)),j=y-x,z=Ii(Math.sqrt(v/S)),V=Math.abs(j)<5;u||(u=V?kn.restSpeed.granular:kn.restSpeed.default),m||(m=V?kn.restDelta.granular:kn.restDelta.default);let F;if(B<1){const Z=ef(z,B);F=re=>{const X=Math.exp(-B*z*re);return y-X*((L+B*z*j)/Z*Math.sin(Z*re)+j*Math.cos(Z*re))}}else if(B===1)F=Z=>y-Math.exp(-z*Z)*(j+(L+z*j)*Z);else{const Z=z*Math.sqrt(B*B-1);F=re=>{const X=Math.exp(-B*z*re),Q=Math.min(Z*re,300);return y-X*((L+B*z*j)*Math.sinh(Q)+Z*j*Math.cosh(Q))/Z}}const $={calculatedDuration:M&&I||null,next:Z=>{const re=F(Z);if(M)b.done=Z>=I;else{let X=Z===0?L:0;B<1&&(X=Z===0?Ni(L):rg(F,Z,re));const Q=Math.abs(X)<=u,q=Math.abs(y-re)<=m;b.done=Q&&q}return b.value=b.done?y:re,b},toString:()=>{const Z=Math.min(qf($),kc),re=ng(X=>$.next(Z*X).value,Z,30);return Z+"ms "+re},toTransition:()=>{}};return $}Pc.applyToOptions=t=>{const i=Ev(t,100,Pc);return t.ease=i.ease,t.duration=Ni(i.duration),t.type="keyframes",t};function tf({keyframes:t,velocity:i=0,power:a=.8,timeConstant:u=325,bounceDamping:m=10,bounceStiffness:x=500,modifyTarget:y,min:b,max:v,restDelta:C=.5,restSpeed:S}){const I=t[0],_={done:!1,value:I},M=Q=>b!==void 0&&Q<b||v!==void 0&&Q>v,L=Q=>b===void 0?v:v===void 0||Math.abs(b-Q)<Math.abs(v-Q)?b:v;let B=a*i;const j=I+B,z=y===void 0?j:y(j);z!==j&&(B=z-I);const V=Q=>-B*Math.exp(-Q/u),F=Q=>z+V(Q),$=Q=>{const q=V(Q),ge=F(Q);_.done=Math.abs(q)<=C,_.value=_.done?z:ge};let Z,re;const X=Q=>{M(_.value)&&(Z=Q,re=Pc({keyframes:[_.value,L(_.value)],velocity:rg(F,Q,_.value),damping:m,stiffness:x,restDelta:C,restSpeed:S}))};return X(0),{calculatedDuration:null,next:Q=>{let q=!1;return!re&&Z===void 0&&(q=!0,$(Q),X(Q)),Z!==void 0&&Q>=Z?re.next(Q-Z):(!q&&$(Q),_)}}}function kv(t,i,a){const u=[],m=a||Zi.mix||tg,x=t.length-1;for(let y=0;y<x;y++){let b=m(t[y],t[y+1]);if(i){const v=Array.isArray(i)?i[y]||ii:i;b=il(v,b)}u.push(b)}return u}function ig(t,i,{clamp:a=!0,ease:u,mixer:m}={}){const x=t.length;if(Uf(x===i.length),x===1)return()=>i[0];if(x===2&&i[0]===i[1])return()=>i[1];const y=t[0]===t[1];t[0]>t[x-1]&&(t=[...t].reverse(),i=[...i].reverse());const b=kv(i,u,m),v=b.length,C=S=>{if(y&&S<t[0])return i[0];let I=0;if(v>1)for(;I<t.length-2&&!(S<t[I+1]);I++);const _=$a(t[I],t[I+1],S);return b[I](_)};return a?S=>C($i(t[0],t[x-1],S)):C}function Pv(t,i){const a=t[t.length-1];for(let u=1;u<=i;u++){const m=$a(0,i,u);t.push(An(a,1,m))}}function Mv(t){const i=[0];return Pv(i,t.length-1),i}function Ov(t,i){return t.map(a=>a*i)}function Dv(t,i){return t.map(()=>i||Gp).splice(0,t.length-1)}function Va({duration:t=300,keyframes:i,times:a,ease:u="easeInOut"}){const m=Yw(u)?u.map(V1):V1(u),x={done:!1,value:i[0]},y=Ov(a&&a.length===i.length?a:Mv(i),t),b=ig(y,i,{ease:Array.isArray(m)?m:Dv(i,m)});return{calculatedDuration:t,next:v=>(x.value=b(v),x.done=v>=t,x)}}const Lv=t=>t!==null;function Qf(t,{repeat:i,repeatType:a="loop"},u,m=1){const x=t.filter(Lv),b=m<0||i&&a!=="loop"&&i%2===1?0:x.length-1;return!b||u===void 0?x[b]:u}const jv={decay:tf,inertia:tf,tween:Va,keyframes:Va,spring:Pc};function sg(t){typeof t.type=="string"&&(t.type=jv[t.type])}class Jf{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(i=>{this.resolve=i})}notifyFinished(){this.resolve()}then(i,a){return this.finished.then(i,a)}}const Bv=t=>t/100;class Xc extends Jf{constructor(i){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var u,m;const{motionValue:a}=this.options;a&&a.updatedAt!==Vr.now()&&this.tick(Vr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(m=(u=this.options).onStop)==null||m.call(u))},this.options=i,this.initAnimation(),this.play(),i.autoplay===!1&&this.pause()}initAnimation(){const{options:i}=this;sg(i);const{type:a=Va,repeat:u=0,repeatDelay:m=0,repeatType:x,velocity:y=0}=i;let{keyframes:b}=i;const v=a||Va;v!==Va&&typeof b[0]!="number"&&(this.mixKeyframes=il(Bv,tg(b[0],b[1])),b=[0,100]);const C=v({...i,keyframes:b});x==="mirror"&&(this.mirroredGenerator=v({...i,keyframes:[...b].reverse(),velocity:-y})),C.calculatedDuration===null&&(C.calculatedDuration=qf(C));const{calculatedDuration:S}=C;this.calculatedDuration=S,this.resolvedDuration=S+m,this.totalDuration=this.resolvedDuration*(u+1)-m,this.generator=C}updateTime(i){const a=Math.round(i-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=a}tick(i,a=!1){const{generator:u,totalDuration:m,mixKeyframes:x,mirroredGenerator:y,resolvedDuration:b,calculatedDuration:v}=this;if(this.startTime===null)return u.next(0);const{delay:C=0,keyframes:S,repeat:I,repeatType:_,repeatDelay:M,type:L,onUpdate:B,finalKeyframe:j}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,i):this.speed<0&&(this.startTime=Math.min(i-m/this.speed,this.startTime)),a?this.currentTime=i:this.updateTime(i);const z=this.currentTime-C*(this.playbackSpeed>=0?1:-1),V=this.playbackSpeed>=0?z<0:z>m;this.currentTime=Math.max(z,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=m);let F=this.currentTime,$=u;if(I){const Q=Math.min(this.currentTime,m)/b;let q=Math.floor(Q),ge=Q%1;!ge&&Q>=1&&(ge=1),ge===1&&q--,q=Math.min(q,I+1),!!(q%2)&&(_==="reverse"?(ge=1-ge,M&&(ge-=M/b)):_==="mirror"&&($=y)),F=$i(0,1,ge)*b}const Z=V?{done:!1,value:S[0]}:$.next(F);x&&(Z.value=x(Z.value));let{done:re}=Z;!V&&v!==null&&(re=this.playbackSpeed>=0?this.currentTime>=m:this.currentTime<=0);const X=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&re);return X&&L!==tf&&(Z.value=Qf(S,this.options,j,this.speed)),B&&B(Z.value),X&&this.finish(),Z}then(i,a){return this.finished.then(i,a)}get duration(){return Ii(this.calculatedDuration)}get time(){return Ii(this.currentTime)}set time(i){var a;i=Ni(i),this.currentTime=i,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=i:this.driver&&(this.startTime=this.driver.now()-i/this.playbackSpeed),(a=this.driver)==null||a.start(!1)}get speed(){return this.playbackSpeed}set speed(i){this.updateTime(Vr.now());const a=this.playbackSpeed!==i;this.playbackSpeed=i,a&&(this.time=Ii(this.currentTime))}play(){var m,x;if(this.isStopped)return;const{driver:i=bv,startTime:a}=this.options;this.driver||(this.driver=i(y=>this.tick(y))),(x=(m=this.options).onPlay)==null||x.call(m);const u=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=u):this.holdTime!==null?this.startTime=u-this.holdTime:this.startTime||(this.startTime=a??u),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Vr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var i,a;this.notifyFinished(),this.teardown(),this.state="finished",(a=(i=this.options).onComplete)==null||a.call(i)}cancel(){var i,a;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(a=(i=this.options).onCancel)==null||a.call(i)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(i){return this.startTime=0,this.tick(i,!0)}attachTimeline(i){var a;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(a=this.driver)==null||a.stop(),i.observe(this)}}function Fv(t){for(let i=1;i<t.length;i++)t[i]??(t[i]=t[i-1])}const io=t=>t*180/Math.PI,nf=t=>{const i=io(Math.atan2(t[1],t[0]));return rf(i)},Vv={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:nf,rotateZ:nf,skewX:t=>io(Math.atan(t[1])),skewY:t=>io(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},rf=t=>(t=t%360,t<0&&(t+=360),t),Y1=nf,$1=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Z1=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Uv={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:$1,scaleY:Z1,scale:t=>($1(t)+Z1(t))/2,rotateX:t=>rf(io(Math.atan2(t[6],t[5]))),rotateY:t=>rf(io(Math.atan2(-t[2],t[0]))),rotateZ:Y1,rotate:Y1,skewX:t=>io(Math.atan(t[4])),skewY:t=>io(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function sf(t){return t.includes("scale")?1:0}function of(t,i){if(!t||t==="none")return sf(i);const a=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let u,m;if(a)u=Uv,m=a;else{const b=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);u=Vv,m=b}if(!m)return sf(i);const x=u[i],y=m[1].split(",").map(Wv);return typeof x=="function"?x(y):y[x]}const zv=(t,i)=>{const{transform:a="none"}=getComputedStyle(t);return of(a,i)};function Wv(t){return parseFloat(t.trim())}const qo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Qo=new Set(qo),K1=t=>t===Ko||t===Et,Hv=new Set(["x","y","z"]),Gv=qo.filter(t=>!Hv.has(t));function Xv(t){const i=[];return Gv.forEach(a=>{const u=t.getValue(a);u!==void 0&&(i.push([a,u.get()]),u.set(a.startsWith("scale")?1:0))}),i}const oo={width:({x:t},{paddingLeft:i="0",paddingRight:a="0"})=>t.max-t.min-parseFloat(i)-parseFloat(a),height:({y:t},{paddingTop:i="0",paddingBottom:a="0"})=>t.max-t.min-parseFloat(i)-parseFloat(a),top:(t,{top:i})=>parseFloat(i),left:(t,{left:i})=>parseFloat(i),bottom:({y:t},{top:i})=>parseFloat(i)+(t.max-t.min),right:({x:t},{left:i})=>parseFloat(i)+(t.max-t.min),x:(t,{transform:i})=>of(i,"x"),y:(t,{transform:i})=>of(i,"y")};oo.translateX=oo.x;oo.translateY=oo.y;const ao=new Set;let af=!1,lf=!1,cf=!1;function og(){if(lf){const t=Array.from(ao).filter(u=>u.needsMeasurement),i=new Set(t.map(u=>u.element)),a=new Map;i.forEach(u=>{const m=Xv(u);m.length&&(a.set(u,m),u.render())}),t.forEach(u=>u.measureInitialState()),i.forEach(u=>{u.render();const m=a.get(u);m&&m.forEach(([x,y])=>{var b;(b=u.getValue(x))==null||b.set(y)})}),t.forEach(u=>u.measureEndState()),t.forEach(u=>{u.suspendedScrollY!==void 0&&window.scrollTo(0,u.suspendedScrollY)})}lf=!1,af=!1,ao.forEach(t=>t.complete(cf)),ao.clear()}function ag(){ao.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(lf=!0)})}function Yv(){cf=!0,ag(),og(),cf=!1}class eh{constructor(i,a,u,m,x,y=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...i],this.onComplete=a,this.name=u,this.motionValue=m,this.element=x,this.isAsync=y}scheduleResolve(){this.state="scheduled",this.isAsync?(ao.add(this),af||(af=!0,un.read(ag),un.resolveKeyframes(og))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:i,name:a,element:u,motionValue:m}=this;if(i[0]===null){const x=m==null?void 0:m.get(),y=i[i.length-1];if(x!==void 0)i[0]=x;else if(u&&a){const b=u.readValue(a,y);b!=null&&(i[0]=b)}i[0]===void 0&&(i[0]=y),m&&x===void 0&&m.set(i[0])}Fv(i)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(i=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,i),ao.delete(this)}cancel(){this.state==="scheduled"&&(ao.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const $v=t=>t.startsWith("--");function Zv(t,i,a){$v(i)?t.style.setProperty(i,a):t.style[i]=a}const Kv=zf(()=>window.ScrollTimeline!==void 0),qv={};function Qv(t,i){const a=zf(t);return()=>qv[i]??a()}const lg=Qv(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ba=([t,i,a,u])=>`cubic-bezier(${t}, ${i}, ${a}, ${u})`,q1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ba([0,.65,.55,1]),circOut:Ba([.55,0,1,.45]),backIn:Ba([.31,.01,.66,-.59]),backOut:Ba([.33,1.53,.69,.99])};function cg(t,i){if(t)return typeof t=="function"?lg()?ng(t,i):"ease-out":Xp(t)?Ba(t):Array.isArray(t)?t.map(a=>cg(a,i)||q1.easeOut):q1[t]}function Jv(t,i,a,{delay:u=0,duration:m=300,repeat:x=0,repeatType:y="loop",ease:b="easeOut",times:v}={},C=void 0){const S={[i]:a};v&&(S.offset=v);const I=cg(b,m);Array.isArray(I)&&(S.easing=I);const _={delay:u,duration:m,easing:Array.isArray(I)?"linear":I,fill:"both",iterations:x+1,direction:y==="reverse"?"alternate":"normal"};return C&&(_.pseudoElement=C),t.animate(S,_)}function ug(t){return typeof t=="function"&&"applyToOptions"in t}function e3({type:t,...i}){return ug(t)&&lg()?t.applyToOptions(i):(i.duration??(i.duration=300),i.ease??(i.ease="easeOut"),i)}class t3 extends Jf{constructor(i){if(super(),this.finishedTime=null,this.isStopped=!1,!i)return;const{element:a,name:u,keyframes:m,pseudoElement:x,allowFlatten:y=!1,finalKeyframe:b,onComplete:v}=i;this.isPseudoElement=!!x,this.allowFlatten=y,this.options=i,Uf(typeof i.type!="string");const C=e3(i);this.animation=Jv(a,u,m,C,x),C.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!x){const S=Qf(m,this.options,b,this.speed);this.updateMotionValue?this.updateMotionValue(S):Zv(a,u,S),this.animation.cancel()}v==null||v(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var i,a;(a=(i=this.animation).finish)==null||a.call(i)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:i}=this;i==="idle"||i==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var i,a;this.isPseudoElement||(a=(i=this.animation).commitStyles)==null||a.call(i)}get duration(){var a,u;const i=((u=(a=this.animation.effect)==null?void 0:a.getComputedTiming)==null?void 0:u.call(a).duration)||0;return Ii(Number(i))}get time(){return Ii(Number(this.animation.currentTime)||0)}set time(i){this.finishedTime=null,this.animation.currentTime=Ni(i)}get speed(){return this.animation.playbackRate}set speed(i){i<0&&(this.finishedTime=null),this.animation.playbackRate=i}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(i){this.animation.startTime=i}attachTimeline({timeline:i,observe:a}){var u;return this.allowFlatten&&((u=this.animation.effect)==null||u.updateTiming({easing:"linear"})),this.animation.onfinish=null,i&&Kv()?(this.animation.timeline=i,ii):a(this)}}const dg={anticipate:zp,backInOut:Up,circInOut:Hp};function n3(t){return t in dg}function r3(t){typeof t.ease=="string"&&n3(t.ease)&&(t.ease=dg[t.ease])}const Q1=10;class i3 extends t3{constructor(i){r3(i),sg(i),super(i),i.startTime&&(this.startTime=i.startTime),this.options=i}updateMotionValue(i){const{motionValue:a,onUpdate:u,onComplete:m,element:x,...y}=this.options;if(!a)return;if(i!==void 0){a.set(i);return}const b=new Xc({...y,autoplay:!1}),v=Ni(this.finishedTime??this.time);a.setWithVelocity(b.sample(v-Q1).value,b.sample(v).value,Q1),b.stop()}}const J1=(t,i)=>i==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ns.test(t)||t==="0")&&!t.startsWith("url("));function s3(t){const i=t[0];if(t.length===1)return!0;for(let a=0;a<t.length;a++)if(t[a]!==i)return!0}function o3(t,i,a,u){const m=t[0];if(m===null)return!1;if(i==="display"||i==="visibility")return!0;const x=t[t.length-1],y=J1(m,i),b=J1(x,i);return!y||!b?!1:s3(t)||(a==="spring"||ug(a))&&u}function uf(t){t.duration=0,t.type}const a3=new Set(["opacity","clipPath","filter","transform"]),l3=zf(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function c3(t){var S;const{motionValue:i,name:a,repeatDelay:u,repeatType:m,damping:x,type:y}=t;if(!(((S=i==null?void 0:i.owner)==null?void 0:S.current)instanceof HTMLElement))return!1;const{onUpdate:v,transformTemplate:C}=i.owner.getProps();return l3()&&a&&a3.has(a)&&(a!=="transform"||!C)&&!v&&!u&&m!=="mirror"&&x!==0&&y!=="inertia"}const u3=40;class d3 extends Jf{constructor({autoplay:i=!0,delay:a=0,type:u="keyframes",repeat:m=0,repeatDelay:x=0,repeatType:y="loop",keyframes:b,name:v,motionValue:C,element:S,...I}){var L;super(),this.stop=()=>{var B,j;this._animation&&(this._animation.stop(),(B=this.stopTimeline)==null||B.call(this)),(j=this.keyframeResolver)==null||j.cancel()},this.createdAt=Vr.now();const _={autoplay:i,delay:a,type:u,repeat:m,repeatDelay:x,repeatType:y,name:v,motionValue:C,element:S,...I},M=(S==null?void 0:S.KeyframeResolver)||eh;this.keyframeResolver=new M(b,(B,j,z)=>this.onKeyframesResolved(B,j,_,!z),v,C,S),(L=this.keyframeResolver)==null||L.scheduleResolve()}onKeyframesResolved(i,a,u,m){this.keyframeResolver=void 0;const{name:x,type:y,velocity:b,delay:v,isHandoff:C,onUpdate:S}=u;this.resolvedAt=Vr.now(),o3(i,x,y,b)||((Zi.instantAnimations||!v)&&(S==null||S(Qf(i,u,a))),i[0]=i[i.length-1],uf(u),u.repeat=0);const _={startTime:m?this.resolvedAt?this.resolvedAt-this.createdAt>u3?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:a,...u,keyframes:i},M=!C&&c3(_)?new i3({..._,element:_.motionValue.owner.current}):new Xc(_);M.finished.then(()=>this.notifyFinished()).catch(ii),this.pendingTimeline&&(this.stopTimeline=M.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=M}get finished(){return this._animation?this.animation.finished:this._finished}then(i,a){return this.finished.finally(i).then(()=>{})}get animation(){var i;return this._animation||((i=this.keyframeResolver)==null||i.resume(),Yv()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(i){this.animation.time=i}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(i){this.animation.speed=i}get startTime(){return this.animation.startTime}attachTimeline(i){return this._animation?this.stopTimeline=this.animation.attachTimeline(i):this.pendingTimeline=i,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var i;this._animation&&this.animation.cancel(),(i=this.keyframeResolver)==null||i.cancel()}}const f3=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function h3(t){const i=f3.exec(t);if(!i)return[,];const[,a,u,m]=i;return[`--${a??u}`,m]}function fg(t,i,a=1){const[u,m]=h3(t);if(!u)return;const x=window.getComputedStyle(i).getPropertyValue(u);if(x){const y=x.trim();return Mp(y)?parseFloat(y):y}return Yf(m)?fg(m,i,a+1):m}function th(t,i){return(t==null?void 0:t[i])??(t==null?void 0:t.default)??t}const hg=new Set(["width","height","top","left","right","bottom",...qo]),m3={test:t=>t==="auto",parse:t=>t},mg=t=>i=>i.test(t),pg=[Ko,Et,Ti,Es,ov,sv,m3],em=t=>pg.find(mg(t));function p3(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Dp(t):!0}const g3=new Set(["brightness","contrast","saturate","opacity"]);function x3(t){const[i,a]=t.slice(0,-1).split("(");if(i==="drop-shadow")return t;const[u]=a.match($f)||[];if(!u)return t;const m=a.replace(u,"");let x=g3.has(i)?1:0;return u!==a&&(x*=100),i+"("+x+m+")"}const y3=/\b([a-z-]*)\(.*?\)/gu,df={...Ns,getAnimatableNone:t=>{const i=t.match(y3);return i?i.map(x3).join(" "):t}},tm={...Ko,transform:Math.round},w3={rotate:Es,rotateX:Es,rotateY:Es,rotateZ:Es,scale:hc,scaleX:hc,scaleY:hc,scaleZ:hc,skew:Es,skewX:Es,skewY:Es,distance:Et,translateX:Et,translateY:Et,translateZ:Et,x:Et,y:Et,z:Et,perspective:Et,transformPerspective:Et,opacity:Za,originX:U1,originY:U1,originZ:Et},nh={borderWidth:Et,borderTopWidth:Et,borderRightWidth:Et,borderBottomWidth:Et,borderLeftWidth:Et,borderRadius:Et,radius:Et,borderTopLeftRadius:Et,borderTopRightRadius:Et,borderBottomRightRadius:Et,borderBottomLeftRadius:Et,width:Et,maxWidth:Et,height:Et,maxHeight:Et,top:Et,right:Et,bottom:Et,left:Et,padding:Et,paddingTop:Et,paddingRight:Et,paddingBottom:Et,paddingLeft:Et,margin:Et,marginTop:Et,marginRight:Et,marginBottom:Et,marginLeft:Et,backgroundPositionX:Et,backgroundPositionY:Et,...w3,zIndex:tm,fillOpacity:Za,strokeOpacity:Za,numOctaves:tm},v3={...nh,color:Wn,backgroundColor:Wn,outlineColor:Wn,fill:Wn,stroke:Wn,borderColor:Wn,borderTopColor:Wn,borderRightColor:Wn,borderBottomColor:Wn,borderLeftColor:Wn,filter:df,WebkitFilter:df},gg=t=>v3[t];function xg(t,i){let a=gg(t);return a!==df&&(a=Ns),a.getAnimatableNone?a.getAnimatableNone(i):void 0}const C3=new Set(["auto","none","0"]);function b3(t,i,a){let u=0,m;for(;u<t.length&&!m;){const x=t[u];typeof x=="string"&&!C3.has(x)&&Ka(x).values.length&&(m=t[u]),u++}if(m&&a)for(const x of i)t[x]=xg(a,m)}class E3 extends eh{constructor(i,a,u,m,x){super(i,a,u,m,x,!0)}readKeyframes(){const{unresolvedKeyframes:i,element:a,name:u}=this;if(!a||!a.current)return;super.readKeyframes();for(let v=0;v<i.length;v++){let C=i[v];if(typeof C=="string"&&(C=C.trim(),Yf(C))){const S=fg(C,a.current);S!==void 0&&(i[v]=S),v===i.length-1&&(this.finalKeyframe=C)}}if(this.resolveNoneKeyframes(),!hg.has(u)||i.length!==2)return;const[m,x]=i,y=em(m),b=em(x);if(y!==b)if(K1(y)&&K1(b))for(let v=0;v<i.length;v++){const C=i[v];typeof C=="string"&&(i[v]=parseFloat(C))}else oo[u]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:i,name:a}=this,u=[];for(let m=0;m<i.length;m++)(i[m]===null||p3(i[m]))&&u.push(m);u.length&&b3(i,u,a)}measureInitialState(){const{element:i,unresolvedKeyframes:a,name:u}=this;if(!i||!i.current)return;u==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=oo[u](i.measureViewportBox(),window.getComputedStyle(i.current)),a[0]=this.measuredOrigin;const m=a[a.length-1];m!==void 0&&i.getValue(u,m).jump(m,!1)}measureEndState(){var b;const{element:i,name:a,unresolvedKeyframes:u}=this;if(!i||!i.current)return;const m=i.getValue(a);m&&m.jump(this.measuredOrigin,!1);const x=u.length-1,y=u[x];u[x]=oo[a](i.measureViewportBox(),window.getComputedStyle(i.current)),y!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=y),(b=this.removedTransforms)!=null&&b.length&&this.removedTransforms.forEach(([v,C])=>{i.getValue(v).set(C)}),this.resolveNoneKeyframes()}}function yg(t,i,a){if(t instanceof EventTarget)return[t];if(typeof t=="string"){const m=document.querySelectorAll(t);return m?Array.from(m):[]}return Array.from(t)}const wg=(t,i)=>i&&typeof t=="number"?i.transform(t):t;function vg(t){return Op(t)&&"offsetHeight"in t}const nm=30,S3=t=>!isNaN(parseFloat(t)),Ua={current:void 0};class A3{constructor(i,a={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=u=>{var x;const m=Vr.now();if(this.updatedAt!==m&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(u),this.current!==this.prev&&((x=this.events.change)==null||x.notify(this.current),this.dependents))for(const y of this.dependents)y.dirty()},this.hasAnimated=!1,this.setCurrent(i),this.owner=a.owner}setCurrent(i){this.current=i,this.updatedAt=Vr.now(),this.canTrackVelocity===null&&i!==void 0&&(this.canTrackVelocity=S3(this.current))}setPrevFrameValue(i=this.current){this.prevFrameValue=i,this.prevUpdatedAt=this.updatedAt}onChange(i){return this.on("change",i)}on(i,a){this.events[i]||(this.events[i]=new Wf);const u=this.events[i].add(a);return i==="change"?()=>{u(),un.read(()=>{this.events.change.getSize()||this.stop()})}:u}clearListeners(){for(const i in this.events)this.events[i].clear()}attach(i,a){this.passiveEffect=i,this.stopPassiveEffect=a}set(i){this.passiveEffect?this.passiveEffect(i,this.updateAndNotify):this.updateAndNotify(i)}setWithVelocity(i,a,u){this.set(a),this.prev=void 0,this.prevFrameValue=i,this.prevUpdatedAt=this.updatedAt-u}jump(i,a=!0){this.updateAndNotify(i),this.prev=i,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var i;(i=this.events.change)==null||i.notify(this.current)}addDependent(i){this.dependents||(this.dependents=new Set),this.dependents.add(i)}removeDependent(i){this.dependents&&this.dependents.delete(i)}get(){return Ua.current&&Ua.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const i=Vr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||i-this.updatedAt>nm)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,nm);return Lp(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(i){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=i(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var i,a;(i=this.dependents)==null||i.clear(),(a=this.events.destroy)==null||a.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function lo(t,i){return new A3(t,i)}const{schedule:rh}=Yp(queueMicrotask,!1),gi={x:!1,y:!1};function Cg(){return gi.x||gi.y}function N3(t){return t==="x"||t==="y"?gi[t]?null:(gi[t]=!0,()=>{gi[t]=!1}):gi.x||gi.y?null:(gi.x=gi.y=!0,()=>{gi.x=gi.y=!1})}function bg(t,i){const a=yg(t),u=new AbortController,m={passive:!0,...i,signal:u.signal};return[a,m,()=>u.abort()]}function rm(t){return!(t.pointerType==="touch"||Cg())}function I3(t,i,a={}){const[u,m,x]=bg(t,a),y=b=>{if(!rm(b))return;const{target:v}=b,C=i(v,b);if(typeof C!="function"||!v)return;const S=I=>{rm(I)&&(C(I),v.removeEventListener("pointerleave",S))};v.addEventListener("pointerleave",S,m)};return u.forEach(b=>{b.addEventListener("pointerenter",y,m)}),x}const Eg=(t,i)=>i?t===i?!0:Eg(t,i.parentElement):!1,ih=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,T3=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function _3(t){return T3.has(t.tagName)||t.tabIndex!==-1}const Ec=new WeakSet;function im(t){return i=>{i.key==="Enter"&&t(i)}}function Od(t,i){t.dispatchEvent(new PointerEvent("pointer"+i,{isPrimary:!0,bubbles:!0}))}const R3=(t,i)=>{const a=t.currentTarget;if(!a)return;const u=im(()=>{if(Ec.has(a))return;Od(a,"down");const m=im(()=>{Od(a,"up")}),x=()=>Od(a,"cancel");a.addEventListener("keyup",m,i),a.addEventListener("blur",x,i)});a.addEventListener("keydown",u,i),a.addEventListener("blur",()=>a.removeEventListener("keydown",u),i)};function sm(t){return ih(t)&&!Cg()}function k3(t,i,a={}){const[u,m,x]=bg(t,a),y=b=>{const v=b.currentTarget;if(!sm(b))return;Ec.add(v);const C=i(v,b),S=(M,L)=>{window.removeEventListener("pointerup",I),window.removeEventListener("pointercancel",_),Ec.has(v)&&Ec.delete(v),sm(M)&&typeof C=="function"&&C(M,{success:L})},I=M=>{S(M,v===window||v===document||a.useGlobalTarget||Eg(v,M.target))},_=M=>{S(M,!1)};window.addEventListener("pointerup",I,m),window.addEventListener("pointercancel",_,m)};return u.forEach(b=>{(a.useGlobalTarget?window:b).addEventListener("pointerdown",y,m),vg(b)&&(b.addEventListener("focus",C=>R3(C,m)),!_3(b)&&!b.hasAttribute("tabindex")&&(b.tabIndex=0))}),x}function Sg(t){return Op(t)&&"ownerSVGElement"in t}function P3(t){return Sg(t)&&t.tagName==="svg"}function M3(...t){const i=!Array.isArray(t[0]),a=i?0:-1,u=t[0+a],m=t[1+a],x=t[2+a],y=t[3+a],b=ig(m,x,y);return i?b(u):b}const lr=t=>!!(t&&t.getVelocity);function O3(t,i,a){const u=t.get();let m=null,x=u,y;const b=typeof u=="string"?u.replace(/[\d.-]/g,""):void 0,v=()=>{m&&(m.stop(),m=null)},C=()=>{v(),m=new Xc({keyframes:[am(t.get()),am(x)],velocity:t.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...a,onUpdate:y})};if(t.attach((S,I)=>(x=S,y=_=>I(om(_,b)),un.postRender(C),t.get()),v),lr(i)){const S=i.on("change",_=>t.set(om(_,b))),I=t.on("destroy",S);return()=>{S(),I()}}return v}function om(t,i){return i?t+i:t}function am(t){return typeof t=="number"?t:parseFloat(t)}const D3=[...pg,Wn,Ns],L3=t=>D3.find(mg(t)),al=N.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class j3 extends N.Component{getSnapshotBeforeUpdate(i){const a=this.props.childRef.current;if(a&&i.isPresent&&!this.props.isPresent){const u=a.offsetParent,m=vg(u)&&u.offsetWidth||0,x=this.props.sizeRef.current;x.height=a.offsetHeight||0,x.width=a.offsetWidth||0,x.top=a.offsetTop,x.left=a.offsetLeft,x.right=m-x.width-x.left}return null}componentDidUpdate(){}render(){return this.props.children}}function B3({children:t,isPresent:i,anchorX:a,root:u}){const m=N.useId(),x=N.useRef(null),y=N.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:b}=N.useContext(al);return N.useInsertionEffect(()=>{const{width:v,height:C,top:S,left:I,right:_}=y.current;if(i||!x.current||!v||!C)return;const M=a==="left"?`left: ${I}`:`right: ${_}`;x.current.dataset.motionPopId=m;const L=document.createElement("style");b&&(L.nonce=b);const B=u??document.head;return B.appendChild(L),L.sheet&&L.sheet.insertRule(`
          [data-motion-pop-id="${m}"] {
            position: absolute !important;
            width: ${v}px !important;
            height: ${C}px !important;
            ${M}px !important;
            top: ${S}px !important;
          }
        `),()=>{B.contains(L)&&B.removeChild(L)}},[i]),h.jsx(j3,{isPresent:i,childRef:x,sizeRef:y,children:N.cloneElement(t,{ref:x})})}const F3=({children:t,initial:i,isPresent:a,onExitComplete:u,custom:m,presenceAffectsLayout:x,mode:y,anchorX:b,root:v})=>{const C=rl(V3),S=N.useId();let I=!0,_=N.useMemo(()=>(I=!1,{id:S,initial:i,isPresent:a,custom:m,onExitComplete:M=>{C.set(M,!0);for(const L of C.values())if(!L)return;u&&u()},register:M=>(C.set(M,!1),()=>C.delete(M))}),[a,C,u]);return x&&I&&(_={..._}),N.useMemo(()=>{C.forEach((M,L)=>C.set(L,!1))},[a]),N.useEffect(()=>{!a&&!C.size&&u&&u()},[a]),y==="popLayout"&&(t=h.jsx(B3,{isPresent:a,anchorX:b,root:v,children:t})),h.jsx(Gc.Provider,{value:_,children:t})};function V3(){return new Map}function Ag(t=!0){const i=N.useContext(Gc);if(i===null)return[!0,null];const{isPresent:a,onExitComplete:u,register:m}=i,x=N.useId();N.useEffect(()=>{if(t)return m(x)},[t]);const y=N.useCallback(()=>t&&u&&u(x),[x,u,t]);return!a&&u?[!1,y]:[!0]}const mc=t=>t.key||"";function lm(t){const i=[];return N.Children.forEach(t,a=>{N.isValidElement(a)&&i.push(a)}),i}const cr=({children:t,custom:i,initial:a=!0,onExitComplete:u,presenceAffectsLayout:m=!0,mode:x="sync",propagate:y=!1,anchorX:b="left",root:v})=>{const[C,S]=Ag(y),I=N.useMemo(()=>lm(t),[t]),_=y&&!C?[]:I.map(mc),M=N.useRef(!0),L=N.useRef(I),B=rl(()=>new Map),[j,z]=N.useState(I),[V,F]=N.useState(I);Bf(()=>{M.current=!1,L.current=I;for(let re=0;re<V.length;re++){const X=mc(V[re]);_.includes(X)?B.delete(X):B.get(X)!==!0&&B.set(X,!1)}},[V,_.length,_.join("-")]);const $=[];if(I!==j){let re=[...I];for(let X=0;X<V.length;X++){const Q=V[X],q=mc(Q);_.includes(q)||(re.splice(X,0,Q),$.push(Q))}return x==="wait"&&$.length&&(re=$),F(lm(re)),z(I),null}const{forceRender:Z}=N.useContext(Lf);return h.jsx(h.Fragment,{children:V.map(re=>{const X=mc(re),Q=y&&!C?!1:I===V||_.includes(X),q=()=>{if(B.has(X))B.set(X,!0);else return;let ge=!0;B.forEach(Ne=>{Ne||(ge=!1)}),ge&&(Z==null||Z(),F(L.current),y&&(S==null||S()),u&&u())};return h.jsx(F3,{isPresent:Q,initial:!M.current||a?void 0:!1,custom:i,presenceAffectsLayout:m,mode:x,root:v,onExitComplete:Q?void 0:q,anchorX:b,children:re},X)})})},Ng=N.createContext({strict:!1}),cm={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Yo={};for(const t in cm)Yo[t]={isEnabled:i=>cm[t].some(a=>!!i[a])};function U3(t){for(const i in t)Yo[i]={...Yo[i],...t[i]}}const z3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Mc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||z3.has(t)}let Ig=t=>!Mc(t);function W3(t){typeof t=="function"&&(Ig=i=>i.startsWith("on")?!Mc(i):t(i))}try{W3(require("@emotion/is-prop-valid").default)}catch{}function H3(t,i,a){const u={};for(const m in t)m==="values"&&typeof t.values=="object"||(Ig(m)||a===!0&&Mc(m)||!i&&!Mc(m)||t.draggable&&m.startsWith("onDrag"))&&(u[m]=t[m]);return u}const Yc=N.createContext({});function $c(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function qa(t){return typeof t=="string"||Array.isArray(t)}const sh=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],oh=["initial",...sh];function Zc(t){return $c(t.animate)||oh.some(i=>qa(t[i]))}function Tg(t){return!!(Zc(t)||t.variants)}function G3(t,i){if(Zc(t)){const{initial:a,animate:u}=t;return{initial:a===!1||qa(a)?a:void 0,animate:qa(u)?u:void 0}}return t.inherit!==!1?i:{}}function X3(t){const{initial:i,animate:a}=G3(t,N.useContext(Yc));return N.useMemo(()=>({initial:i,animate:a}),[um(i),um(a)])}function um(t){return Array.isArray(t)?t.join(" "):t}const Qa={};function Y3(t){for(const i in t)Qa[i]=t[i],Xf(i)&&(Qa[i].isCSSVariable=!0)}function _g(t,{layout:i,layoutId:a}){return Qo.has(t)||t.startsWith("origin")||(i||a!==void 0)&&(!!Qa[t]||t==="opacity")}const $3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Z3=qo.length;function K3(t,i,a){let u="",m=!0;for(let x=0;x<Z3;x++){const y=qo[x],b=t[y];if(b===void 0)continue;let v=!0;if(typeof b=="number"?v=b===(y.startsWith("scale")?1:0):v=parseFloat(b)===0,!v||a){const C=wg(b,nh[y]);if(!v){m=!1;const S=$3[y]||y;u+=`${S}(${C}) `}a&&(i[y]=C)}}return u=u.trim(),a?u=a(i,m?"":u):m&&(u="none"),u}function ah(t,i,a){const{style:u,vars:m,transformOrigin:x}=t;let y=!1,b=!1;for(const v in i){const C=i[v];if(Qo.has(v)){y=!0;continue}else if(Xf(v)){m[v]=C;continue}else{const S=wg(C,nh[v]);v.startsWith("origin")?(b=!0,x[v]=S):u[v]=S}}if(i.transform||(y||a?u.transform=K3(i,t.transform,a):u.transform&&(u.transform="none")),b){const{originX:v="50%",originY:C="50%",originZ:S=0}=x;u.transformOrigin=`${v} ${C} ${S}`}}const lh=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Rg(t,i,a){for(const u in i)!lr(i[u])&&!_g(u,a)&&(t[u]=i[u])}function q3({transformTemplate:t},i){return N.useMemo(()=>{const a=lh();return ah(a,i,t),Object.assign({},a.vars,a.style)},[i])}function Q3(t,i){const a=t.style||{},u={};return Rg(u,a,t),Object.assign(u,q3(t,i)),u}function J3(t,i){const a={},u=Q3(t,i);return t.drag&&t.dragListener!==!1&&(a.draggable=!1,u.userSelect=u.WebkitUserSelect=u.WebkitTouchCallout="none",u.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(a.tabIndex=0),a.style=u,a}const eC={offset:"stroke-dashoffset",array:"stroke-dasharray"},tC={offset:"strokeDashoffset",array:"strokeDasharray"};function nC(t,i,a=1,u=0,m=!0){t.pathLength=1;const x=m?eC:tC;t[x.offset]=Et.transform(-u);const y=Et.transform(i),b=Et.transform(a);t[x.array]=`${y} ${b}`}function kg(t,{attrX:i,attrY:a,attrScale:u,pathLength:m,pathSpacing:x=1,pathOffset:y=0,...b},v,C,S){if(ah(t,b,C),v){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:I,style:_}=t;I.transform&&(_.transform=I.transform,delete I.transform),(_.transform||I.transformOrigin)&&(_.transformOrigin=I.transformOrigin??"50% 50%",delete I.transformOrigin),_.transform&&(_.transformBox=(S==null?void 0:S.transformBox)??"fill-box",delete I.transformBox),i!==void 0&&(I.x=i),a!==void 0&&(I.y=a),u!==void 0&&(I.scale=u),m!==void 0&&nC(I,m,x,y,!1)}const Pg=()=>({...lh(),attrs:{}}),Mg=t=>typeof t=="string"&&t.toLowerCase()==="svg";function rC(t,i,a,u){const m=N.useMemo(()=>{const x=Pg();return kg(x,i,Mg(u),t.transformTemplate,t.style),{...x.attrs,style:{...x.style}}},[i]);if(t.style){const x={};Rg(x,t.style,t),m.style={...x,...m.style}}return m}const iC=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ch(t){return typeof t!="string"||t.includes("-")?!1:!!(iC.indexOf(t)>-1||/[A-Z]/u.test(t))}function sC(t,i,a,{latestValues:u},m,x=!1){const b=(ch(t)?rC:J3)(i,u,m,t),v=H3(i,typeof t=="string",x),C=t!==N.Fragment?{...v,...b,ref:a}:{},{children:S}=i,I=N.useMemo(()=>lr(S)?S.get():S,[S]);return N.createElement(t,{...C,children:I})}function dm(t){const i=[{},{}];return t==null||t.values.forEach((a,u)=>{i[0][u]=a.get(),i[1][u]=a.getVelocity()}),i}function uh(t,i,a,u){if(typeof i=="function"){const[m,x]=dm(u);i=i(a!==void 0?a:t.custom,m,x)}if(typeof i=="string"&&(i=t.variants&&t.variants[i]),typeof i=="function"){const[m,x]=dm(u);i=i(a!==void 0?a:t.custom,m,x)}return i}function Sc(t){return lr(t)?t.get():t}function oC({scrapeMotionValuesFromProps:t,createRenderState:i},a,u,m){return{latestValues:aC(a,u,m,t),renderState:i()}}function aC(t,i,a,u){const m={},x=u(t,{});for(const _ in x)m[_]=Sc(x[_]);let{initial:y,animate:b}=t;const v=Zc(t),C=Tg(t);i&&C&&!v&&t.inherit!==!1&&(y===void 0&&(y=i.initial),b===void 0&&(b=i.animate));let S=a?a.initial===!1:!1;S=S||y===!1;const I=S?b:y;if(I&&typeof I!="boolean"&&!$c(I)){const _=Array.isArray(I)?I:[I];for(let M=0;M<_.length;M++){const L=uh(t,_[M]);if(L){const{transitionEnd:B,transition:j,...z}=L;for(const V in z){let F=z[V];if(Array.isArray(F)){const $=S?F.length-1:0;F=F[$]}F!==null&&(m[V]=F)}for(const V in B)m[V]=B[V]}}}return m}const Og=t=>(i,a)=>{const u=N.useContext(Yc),m=N.useContext(Gc),x=()=>oC(t,i,u,m);return a?x():rl(x)};function dh(t,i,a){var x;const{style:u}=t,m={};for(const y in u)(lr(u[y])||i.style&&lr(i.style[y])||_g(y,t)||((x=a==null?void 0:a.getValue(y))==null?void 0:x.liveStyle)!==void 0)&&(m[y]=u[y]);return m}const lC=Og({scrapeMotionValuesFromProps:dh,createRenderState:lh});function Dg(t,i,a){const u=dh(t,i,a);for(const m in t)if(lr(t[m])||lr(i[m])){const x=qo.indexOf(m)!==-1?"attr"+m.charAt(0).toUpperCase()+m.substring(1):m;u[x]=t[m]}return u}const cC=Og({scrapeMotionValuesFromProps:Dg,createRenderState:Pg}),uC=Symbol.for("motionComponentSymbol");function Vo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function dC(t,i,a){return N.useCallback(u=>{u&&t.onMount&&t.onMount(u),i&&(u?i.mount(u):i.unmount()),a&&(typeof a=="function"?a(u):Vo(a)&&(a.current=u))},[i])}const fh=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),fC="framerAppearId",Lg="data-"+fh(fC),jg=N.createContext({});function hC(t,i,a,u,m){var B,j;const{visualElement:x}=N.useContext(Yc),y=N.useContext(Ng),b=N.useContext(Gc),v=N.useContext(al).reducedMotion,C=N.useRef(null);u=u||y.renderer,!C.current&&u&&(C.current=u(t,{visualState:i,parent:x,props:a,presenceContext:b,blockInitialAnimation:b?b.initial===!1:!1,reducedMotionConfig:v}));const S=C.current,I=N.useContext(jg);S&&!S.projection&&m&&(S.type==="html"||S.type==="svg")&&mC(C.current,a,m,I);const _=N.useRef(!1);N.useInsertionEffect(()=>{S&&_.current&&S.update(a,b)});const M=a[Lg],L=N.useRef(!!M&&!((B=window.MotionHandoffIsComplete)!=null&&B.call(window,M))&&((j=window.MotionHasOptimisedAnimation)==null?void 0:j.call(window,M)));return Bf(()=>{S&&(_.current=!0,window.MotionIsMounted=!0,S.updateFeatures(),S.scheduleRenderMicrotask(),L.current&&S.animationState&&S.animationState.animateChanges())}),N.useEffect(()=>{S&&(!L.current&&S.animationState&&S.animationState.animateChanges(),L.current&&(queueMicrotask(()=>{var z;(z=window.MotionHandoffMarkAsComplete)==null||z.call(window,M)}),L.current=!1),S.enteringChildren=void 0)}),S}function mC(t,i,a,u){const{layoutId:m,layout:x,drag:y,dragConstraints:b,layoutScroll:v,layoutRoot:C,layoutCrossfade:S}=i;t.projection=new a(t.latestValues,i["data-framer-portal-id"]?void 0:Bg(t.parent)),t.projection.setOptions({layoutId:m,layout:x,alwaysMeasureLayout:!!y||b&&Vo(b),visualElement:t,animationType:typeof x=="string"?x:"both",initialPromotionConfig:u,crossfade:S,layoutScroll:v,layoutRoot:C})}function Bg(t){if(t)return t.options.allowProjection!==!1?t.projection:Bg(t.parent)}function Dd(t,{forwardMotionProps:i=!1}={},a,u){a&&U3(a);const m=ch(t)?cC:lC;function x(b,v){let C;const S={...N.useContext(al),...b,layoutId:pC(b)},{isStatic:I}=S,_=X3(b),M=m(b,I);if(!I&&jf){gC();const L=xC(S);C=L.MeasureLayout,_.visualElement=hC(t,M,S,u,L.ProjectionNode)}return h.jsxs(Yc.Provider,{value:_,children:[C&&_.visualElement?h.jsx(C,{visualElement:_.visualElement,...S}):null,sC(t,b,dC(M,_.visualElement,v),M,I,i)]})}x.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const y=N.forwardRef(x);return y[uC]=t,y}function pC({layoutId:t}){const i=N.useContext(Lf).id;return i&&t!==void 0?i+"-"+t:t}function gC(t,i){N.useContext(Ng).strict}function xC(t){const{drag:i,layout:a}=Yo;if(!i&&!a)return{};const u={...i,...a};return{MeasureLayout:i!=null&&i.isEnabled(t)||a!=null&&a.isEnabled(t)?u.MeasureLayout:void 0,ProjectionNode:u.ProjectionNode}}function yC(t,i){if(typeof Proxy>"u")return Dd;const a=new Map,u=(x,y)=>Dd(x,y,t,i),m=(x,y)=>u(x,y);return new Proxy(m,{get:(x,y)=>y==="create"?u:(a.has(y)||a.set(y,Dd(y,void 0,t,i)),a.get(y))})}function Fg({top:t,left:i,right:a,bottom:u}){return{x:{min:i,max:a},y:{min:t,max:u}}}function wC({x:t,y:i}){return{top:i.min,right:t.max,bottom:i.max,left:t.min}}function vC(t,i){if(!i)return t;const a=i({x:t.left,y:t.top}),u=i({x:t.right,y:t.bottom});return{top:a.y,left:a.x,bottom:u.y,right:u.x}}function Ld(t){return t===void 0||t===1}function ff({scale:t,scaleX:i,scaleY:a}){return!Ld(t)||!Ld(i)||!Ld(a)}function no(t){return ff(t)||Vg(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Vg(t){return fm(t.x)||fm(t.y)}function fm(t){return t&&t!=="0%"}function Oc(t,i,a){const u=t-a,m=i*u;return a+m}function hm(t,i,a,u,m){return m!==void 0&&(t=Oc(t,m,u)),Oc(t,a,u)+i}function hf(t,i=0,a=1,u,m){t.min=hm(t.min,i,a,u,m),t.max=hm(t.max,i,a,u,m)}function Ug(t,{x:i,y:a}){hf(t.x,i.translate,i.scale,i.originPoint),hf(t.y,a.translate,a.scale,a.originPoint)}const mm=.999999999999,pm=1.0000000000001;function CC(t,i,a,u=!1){const m=a.length;if(!m)return;i.x=i.y=1;let x,y;for(let b=0;b<m;b++){x=a[b],y=x.projectionDelta;const{visualElement:v}=x.options;v&&v.props.style&&v.props.style.display==="contents"||(u&&x.options.layoutScroll&&x.scroll&&x!==x.root&&zo(t,{x:-x.scroll.offset.x,y:-x.scroll.offset.y}),y&&(i.x*=y.x.scale,i.y*=y.y.scale,Ug(t,y)),u&&no(x.latestValues)&&zo(t,x.latestValues))}i.x<pm&&i.x>mm&&(i.x=1),i.y<pm&&i.y>mm&&(i.y=1)}function Uo(t,i){t.min=t.min+i,t.max=t.max+i}function gm(t,i,a,u,m=.5){const x=An(t.min,t.max,m);hf(t,i,a,x,u)}function zo(t,i){gm(t.x,i.x,i.scaleX,i.scale,i.originX),gm(t.y,i.y,i.scaleY,i.scale,i.originY)}function zg(t,i){return Fg(vC(t.getBoundingClientRect(),i))}function bC(t,i,a){const u=zg(t,a),{scroll:m}=i;return m&&(Uo(u.x,m.offset.x),Uo(u.y,m.offset.y)),u}const xm=()=>({translate:0,scale:1,origin:0,originPoint:0}),Wo=()=>({x:xm(),y:xm()}),ym=()=>({min:0,max:0}),Bn=()=>({x:ym(),y:ym()}),mf={current:null},Wg={current:!1};function EC(){if(Wg.current=!0,!!jf)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),i=()=>mf.current=t.matches;t.addEventListener("change",i),i()}else mf.current=!1}const SC=new WeakMap;function AC(t,i,a){for(const u in i){const m=i[u],x=a[u];if(lr(m))t.addValue(u,m);else if(lr(x))t.addValue(u,lo(m,{owner:t}));else if(x!==m)if(t.hasValue(u)){const y=t.getValue(u);y.liveStyle===!0?y.jump(m):y.hasAnimated||y.set(m)}else{const y=t.getStaticValue(u);t.addValue(u,lo(y!==void 0?y:m,{owner:t}))}}for(const u in a)i[u]===void 0&&t.removeValue(u);return i}const wm=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class NC{scrapeMotionValuesFromProps(i,a,u){return{}}constructor({parent:i,props:a,presenceContext:u,reducedMotionConfig:m,blockInitialAnimation:x,visualState:y},b={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=eh,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=Vr.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,un.render(this.render,!1,!0))};const{latestValues:v,renderState:C}=y;this.latestValues=v,this.baseTarget={...v},this.initialValues=a.initial?{...v}:{},this.renderState=C,this.parent=i,this.props=a,this.presenceContext=u,this.depth=i?i.depth+1:0,this.reducedMotionConfig=m,this.options=b,this.blockInitialAnimation=!!x,this.isControllingVariants=Zc(a),this.isVariantNode=Tg(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(i&&i.current);const{willChange:S,...I}=this.scrapeMotionValuesFromProps(a,{},this);for(const _ in I){const M=I[_];v[_]!==void 0&&lr(M)&&M.set(v[_])}}mount(i){var a;this.current=i,SC.set(i,this),this.projection&&!this.projection.instance&&this.projection.mount(i),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((u,m)=>this.bindToMotionValue(m,u)),Wg.current||EC(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:mf.current,(a=this.parent)==null||a.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var i;this.projection&&this.projection.unmount(),Ki(this.notifyUpdate),Ki(this.render),this.valueSubscriptions.forEach(a=>a()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(i=this.parent)==null||i.removeChild(this);for(const a in this.events)this.events[a].clear();for(const a in this.features){const u=this.features[a];u&&(u.unmount(),u.isMounted=!1)}this.current=null}addChild(i){this.children.add(i),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(i)}removeChild(i){this.children.delete(i),this.enteringChildren&&this.enteringChildren.delete(i)}bindToMotionValue(i,a){this.valueSubscriptions.has(i)&&this.valueSubscriptions.get(i)();const u=Qo.has(i);u&&this.onBindTransform&&this.onBindTransform();const m=a.on("change",y=>{this.latestValues[i]=y,this.props.onUpdate&&un.preRender(this.notifyUpdate),u&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let x;window.MotionCheckAppearSync&&(x=window.MotionCheckAppearSync(this,i,a)),this.valueSubscriptions.set(i,()=>{m(),x&&x(),a.owner&&a.stop()})}sortNodePosition(i){return!this.current||!this.sortInstanceNodePosition||this.type!==i.type?0:this.sortInstanceNodePosition(this.current,i.current)}updateFeatures(){let i="animation";for(i in Yo){const a=Yo[i];if(!a)continue;const{isEnabled:u,Feature:m}=a;if(!this.features[i]&&m&&u(this.props)&&(this.features[i]=new m(this)),this.features[i]){const x=this.features[i];x.isMounted?x.update():(x.mount(),x.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Bn()}getStaticValue(i){return this.latestValues[i]}setStaticValue(i,a){this.latestValues[i]=a}update(i,a){(i.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=i,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let u=0;u<wm.length;u++){const m=wm[u];this.propEventSubscriptions[m]&&(this.propEventSubscriptions[m](),delete this.propEventSubscriptions[m]);const x="on"+m,y=i[x];y&&(this.propEventSubscriptions[m]=this.on(m,y))}this.prevMotionValues=AC(this,this.scrapeMotionValuesFromProps(i,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(i){return this.props.variants?this.props.variants[i]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(i){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(i),()=>a.variantChildren.delete(i)}addValue(i,a){const u=this.values.get(i);a!==u&&(u&&this.removeValue(i),this.bindToMotionValue(i,a),this.values.set(i,a),this.latestValues[i]=a.get())}removeValue(i){this.values.delete(i);const a=this.valueSubscriptions.get(i);a&&(a(),this.valueSubscriptions.delete(i)),delete this.latestValues[i],this.removeValueFromRenderState(i,this.renderState)}hasValue(i){return this.values.has(i)}getValue(i,a){if(this.props.values&&this.props.values[i])return this.props.values[i];let u=this.values.get(i);return u===void 0&&a!==void 0&&(u=lo(a===null?void 0:a,{owner:this}),this.addValue(i,u)),u}readValue(i,a){let u=this.latestValues[i]!==void 0||!this.current?this.latestValues[i]:this.getBaseTargetFromProps(this.props,i)??this.readValueFromInstance(this.current,i,this.options);return u!=null&&(typeof u=="string"&&(Mp(u)||Dp(u))?u=parseFloat(u):!L3(u)&&Ns.test(a)&&(u=xg(i,a)),this.setBaseTarget(i,lr(u)?u.get():u)),lr(u)?u.get():u}setBaseTarget(i,a){this.baseTarget[i]=a}getBaseTarget(i){var x;const{initial:a}=this.props;let u;if(typeof a=="string"||typeof a=="object"){const y=uh(this.props,a,(x=this.presenceContext)==null?void 0:x.custom);y&&(u=y[i])}if(a&&u!==void 0)return u;const m=this.getBaseTargetFromProps(this.props,i);return m!==void 0&&!lr(m)?m:this.initialValues[i]!==void 0&&u===void 0?void 0:this.baseTarget[i]}on(i,a){return this.events[i]||(this.events[i]=new Wf),this.events[i].add(a)}notify(i,...a){this.events[i]&&this.events[i].notify(...a)}scheduleRenderMicrotask(){rh.render(this.render)}}class Hg extends NC{constructor(){super(...arguments),this.KeyframeResolver=E3}sortInstanceNodePosition(i,a){return i.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(i,a){return i.style?i.style[a]:void 0}removeValueFromRenderState(i,{vars:a,style:u}){delete a[i],delete u[i]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:i}=this.props;lr(i)&&(this.childSubscription=i.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function Gg(t,{style:i,vars:a},u,m){const x=t.style;let y;for(y in i)x[y]=i[y];m==null||m.applyProjectionStyles(x,u);for(y in a)x.setProperty(y,a[y])}function IC(t){return window.getComputedStyle(t)}class TC extends Hg{constructor(){super(...arguments),this.type="html",this.renderInstance=Gg}readValueFromInstance(i,a){var u;if(Qo.has(a))return(u=this.projection)!=null&&u.isProjecting?sf(a):zv(i,a);{const m=IC(i),x=(Xf(a)?m.getPropertyValue(a):m[a])||0;return typeof x=="string"?x.trim():x}}measureInstanceViewportBox(i,{transformPagePoint:a}){return zg(i,a)}build(i,a,u){ah(i,a,u.transformTemplate)}scrapeMotionValuesFromProps(i,a,u){return dh(i,a,u)}}const Xg=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function _C(t,i,a,u){Gg(t,i,void 0,u);for(const m in i.attrs)t.setAttribute(Xg.has(m)?m:fh(m),i.attrs[m])}class RC extends Hg{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Bn}getBaseTargetFromProps(i,a){return i[a]}readValueFromInstance(i,a){if(Qo.has(a)){const u=gg(a);return u&&u.default||0}return a=Xg.has(a)?a:fh(a),i.getAttribute(a)}scrapeMotionValuesFromProps(i,a,u){return Dg(i,a,u)}build(i,a,u){kg(i,a,this.isSVGTag,u.transformTemplate,u.style)}renderInstance(i,a,u,m){_C(i,a,u,m)}mount(i){this.isSVGTag=Mg(i.tagName),super.mount(i)}}const kC=(t,i)=>ch(t)?new RC(i):new TC(i,{allowProjection:t!==N.Fragment});function Go(t,i,a){const u=t.getProps();return uh(u,i,a!==void 0?a:u.custom,t)}const pf=t=>Array.isArray(t);function PC(t,i,a){t.hasValue(i)?t.getValue(i).set(a):t.addValue(i,lo(a))}function MC(t){return pf(t)?t[t.length-1]||0:t}function OC(t,i){const a=Go(t,i);let{transitionEnd:u={},transition:m={},...x}=a||{};x={...x,...u};for(const y in x){const b=MC(x[y]);PC(t,y,b)}}function DC(t){return!!(lr(t)&&t.add)}function gf(t,i){const a=t.getValue("willChange");if(DC(a))return a.add(i);if(!a&&Zi.WillChange){const u=new Zi.WillChange("auto");t.addValue("willChange",u),u.add(i)}}function Yg(t){return t.props[Lg]}const LC=t=>t!==null;function jC(t,{repeat:i,repeatType:a="loop"},u){const m=t.filter(LC),x=i&&a!=="loop"&&i%2===1?0:m.length-1;return m[x]}const BC={type:"spring",stiffness:500,damping:25,restSpeed:10},FC=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),VC={type:"keyframes",duration:.8},UC={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},zC=(t,{keyframes:i})=>i.length>2?VC:Qo.has(t)?t.startsWith("scale")?FC(i[1]):BC:UC;function WC({when:t,delay:i,delayChildren:a,staggerChildren:u,staggerDirection:m,repeat:x,repeatType:y,repeatDelay:b,from:v,elapsed:C,...S}){return!!Object.keys(S).length}const hh=(t,i,a,u={},m,x)=>y=>{const b=th(u,t)||{},v=b.delay||u.delay||0;let{elapsed:C=0}=u;C=C-Ni(v);const S={keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:i.getVelocity(),...b,delay:-C,onUpdate:_=>{i.set(_),b.onUpdate&&b.onUpdate(_)},onComplete:()=>{y(),b.onComplete&&b.onComplete()},name:t,motionValue:i,element:x?void 0:m};WC(b)||Object.assign(S,zC(t,S)),S.duration&&(S.duration=Ni(S.duration)),S.repeatDelay&&(S.repeatDelay=Ni(S.repeatDelay)),S.from!==void 0&&(S.keyframes[0]=S.from);let I=!1;if((S.type===!1||S.duration===0&&!S.repeatDelay)&&(uf(S),S.delay===0&&(I=!0)),(Zi.instantAnimations||Zi.skipAnimations)&&(I=!0,uf(S),S.delay=0),S.allowFlatten=!b.type&&!b.ease,I&&!x&&i.get()!==void 0){const _=jC(S.keyframes,b);if(_!==void 0){un.update(()=>{S.onUpdate(_),S.onComplete()});return}}return b.isSync?new Xc(S):new d3(S)};function HC({protectedKeys:t,needsAnimating:i},a){const u=t.hasOwnProperty(a)&&i[a]!==!0;return i[a]=!1,u}function $g(t,i,{delay:a=0,transitionOverride:u,type:m}={}){let{transition:x=t.getDefaultTransition(),transitionEnd:y,...b}=i;u&&(x=u);const v=[],C=m&&t.animationState&&t.animationState.getState()[m];for(const S in b){const I=t.getValue(S,t.latestValues[S]??null),_=b[S];if(_===void 0||C&&HC(C,S))continue;const M={delay:a,...th(x||{},S)},L=I.get();if(L!==void 0&&!I.isAnimating&&!Array.isArray(_)&&_===L&&!M.velocity)continue;let B=!1;if(window.MotionHandoffAnimation){const z=Yg(t);if(z){const V=window.MotionHandoffAnimation(z,S,un);V!==null&&(M.startTime=V,B=!0)}}gf(t,S),I.start(hh(S,I,_,t.shouldReduceMotion&&hg.has(S)?{type:!1}:M,t,B));const j=I.animation;j&&v.push(j)}return y&&Promise.all(v).then(()=>{un.update(()=>{y&&OC(t,y)})}),v}function Zg(t,i,a,u=0,m=1){const x=Array.from(t).sort((C,S)=>C.sortNodePosition(S)).indexOf(i),y=t.size,b=(y-1)*u;return typeof a=="function"?a(x,y):m===1?x*u:b-x*u}function xf(t,i,a={}){var v;const u=Go(t,i,a.type==="exit"?(v=t.presenceContext)==null?void 0:v.custom:void 0);let{transition:m=t.getDefaultTransition()||{}}=u||{};a.transitionOverride&&(m=a.transitionOverride);const x=u?()=>Promise.all($g(t,u,a)):()=>Promise.resolve(),y=t.variantChildren&&t.variantChildren.size?(C=0)=>{const{delayChildren:S=0,staggerChildren:I,staggerDirection:_}=m;return GC(t,i,C,S,I,_,a)}:()=>Promise.resolve(),{when:b}=m;if(b){const[C,S]=b==="beforeChildren"?[x,y]:[y,x];return C().then(()=>S())}else return Promise.all([x(),y(a.delay)])}function GC(t,i,a=0,u=0,m=0,x=1,y){const b=[];for(const v of t.variantChildren)v.notify("AnimationStart",i),b.push(xf(v,i,{...y,delay:a+(typeof u=="function"?0:u)+Zg(t.variantChildren,v,u,m,x)}).then(()=>v.notify("AnimationComplete",i)));return Promise.all(b)}function XC(t,i,a={}){t.notify("AnimationStart",i);let u;if(Array.isArray(i)){const m=i.map(x=>xf(t,x,a));u=Promise.all(m)}else if(typeof i=="string")u=xf(t,i,a);else{const m=typeof i=="function"?Go(t,i,a.custom):i;u=Promise.all($g(t,m,a))}return u.then(()=>{t.notify("AnimationComplete",i)})}function Kg(t,i){if(!Array.isArray(i))return!1;const a=i.length;if(a!==t.length)return!1;for(let u=0;u<a;u++)if(i[u]!==t[u])return!1;return!0}const YC=oh.length;function qg(t){if(!t)return;if(!t.isControllingVariants){const a=t.parent?qg(t.parent)||{}:{};return t.props.initial!==void 0&&(a.initial=t.props.initial),a}const i={};for(let a=0;a<YC;a++){const u=oh[a],m=t.props[u];(qa(m)||m===!1)&&(i[u]=m)}return i}const $C=[...sh].reverse(),ZC=sh.length;function KC(t){return i=>Promise.all(i.map(({animation:a,options:u})=>XC(t,a,u)))}function qC(t){let i=KC(t),a=vm(),u=!0;const m=v=>(C,S)=>{var _;const I=Go(t,S,v==="exit"?(_=t.presenceContext)==null?void 0:_.custom:void 0);if(I){const{transition:M,transitionEnd:L,...B}=I;C={...C,...B,...L}}return C};function x(v){i=v(t)}function y(v){const{props:C}=t,S=qg(t.parent)||{},I=[],_=new Set;let M={},L=1/0;for(let j=0;j<ZC;j++){const z=$C[j],V=a[z],F=C[z]!==void 0?C[z]:S[z],$=qa(F),Z=z===v?V.isActive:null;Z===!1&&(L=j);let re=F===S[z]&&F!==C[z]&&$;if(re&&u&&t.manuallyAnimateOnMount&&(re=!1),V.protectedKeys={...M},!V.isActive&&Z===null||!F&&!V.prevProp||$c(F)||typeof F=="boolean")continue;const X=QC(V.prevProp,F);let Q=X||z===v&&V.isActive&&!re&&$||j>L&&$,q=!1;const ge=Array.isArray(F)?F:[F];let Ne=ge.reduce(m(z),{});Z===!1&&(Ne={});const{prevResolvedValues:Ae={}}=V,De={...Ae,...Ne},Ce=ye=>{Q=!0,_.has(ye)&&(q=!0,_.delete(ye)),V.needsAnimating[ye]=!0;const fe=t.getValue(ye);fe&&(fe.liveStyle=!1)};for(const ye in De){const fe=Ne[ye],Ve=Ae[ye];if(M.hasOwnProperty(ye))continue;let we=!1;pf(fe)&&pf(Ve)?we=!Kg(fe,Ve):we=fe!==Ve,we?fe!=null?Ce(ye):_.add(ye):fe!==void 0&&_.has(ye)?Ce(ye):V.protectedKeys[ye]=!0}V.prevProp=F,V.prevResolvedValues=Ne,V.isActive&&(M={...M,...Ne}),u&&t.blockInitialAnimation&&(Q=!1);const G=re&&X;Q&&(!G||q)&&I.push(...ge.map(ye=>{const fe={type:z};if(typeof ye=="string"&&u&&!G&&t.manuallyAnimateOnMount&&t.parent){const{parent:Ve}=t,we=Go(Ve,ye);if(Ve.enteringChildren&&we){const{delayChildren:Y}=we.transition||{};fe.delay=Zg(Ve.enteringChildren,t,Y)}}return{animation:ye,options:fe}}))}if(_.size){const j={};if(typeof C.initial!="boolean"){const z=Go(t,Array.isArray(C.initial)?C.initial[0]:C.initial);z&&z.transition&&(j.transition=z.transition)}_.forEach(z=>{const V=t.getBaseTarget(z),F=t.getValue(z);F&&(F.liveStyle=!0),j[z]=V??null}),I.push({animation:j})}let B=!!I.length;return u&&(C.initial===!1||C.initial===C.animate)&&!t.manuallyAnimateOnMount&&(B=!1),u=!1,B?i(I):Promise.resolve()}function b(v,C){var I;if(a[v].isActive===C)return Promise.resolve();(I=t.variantChildren)==null||I.forEach(_=>{var M;return(M=_.animationState)==null?void 0:M.setActive(v,C)}),a[v].isActive=C;const S=y(v);for(const _ in a)a[_].protectedKeys={};return S}return{animateChanges:y,setActive:b,setAnimateFunction:x,getState:()=>a,reset:()=>{a=vm(),u=!0}}}function QC(t,i){return typeof i=="string"?i!==t:Array.isArray(i)?!Kg(i,t):!1}function to(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function vm(){return{animate:to(!0),whileInView:to(),whileHover:to(),whileTap:to(),whileDrag:to(),whileFocus:to(),exit:to()}}class Is{constructor(i){this.isMounted=!1,this.node=i}update(){}}class JC extends Is{constructor(i){super(i),i.animationState||(i.animationState=qC(i))}updateAnimationControlsSubscription(){const{animate:i}=this.node.getProps();$c(i)&&(this.unmountControls=i.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:i}=this.node.getProps(),{animate:a}=this.node.prevProps||{};i!==a&&this.updateAnimationControlsSubscription()}unmount(){var i;this.node.animationState.reset(),(i=this.unmountControls)==null||i.call(this)}}let eb=0;class tb extends Is{constructor(){super(...arguments),this.id=eb++}update(){if(!this.node.presenceContext)return;const{isPresent:i,onExitComplete:a}=this.node.presenceContext,{isPresent:u}=this.node.prevPresenceContext||{};if(!this.node.animationState||i===u)return;const m=this.node.animationState.setActive("exit",!i);a&&!i&&m.then(()=>{a(this.id)})}mount(){const{register:i,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),i&&(this.unmount=i(this.id))}unmount(){}}const nb={animation:{Feature:JC},exit:{Feature:tb}};function Ja(t,i,a,u={passive:!0}){return t.addEventListener(i,a,u),()=>t.removeEventListener(i,a)}function ll(t){return{point:{x:t.pageX,y:t.pageY}}}const rb=t=>i=>ih(i)&&t(i,ll(i));function za(t,i,a,u){return Ja(t,i,rb(a),u)}const Qg=1e-4,ib=1-Qg,sb=1+Qg,Jg=.01,ob=0-Jg,ab=0+Jg;function kr(t){return t.max-t.min}function lb(t,i,a){return Math.abs(t-i)<=a}function Cm(t,i,a,u=.5){t.origin=u,t.originPoint=An(i.min,i.max,t.origin),t.scale=kr(a)/kr(i),t.translate=An(a.min,a.max,t.origin)-t.originPoint,(t.scale>=ib&&t.scale<=sb||isNaN(t.scale))&&(t.scale=1),(t.translate>=ob&&t.translate<=ab||isNaN(t.translate))&&(t.translate=0)}function Wa(t,i,a,u){Cm(t.x,i.x,a.x,u?u.originX:void 0),Cm(t.y,i.y,a.y,u?u.originY:void 0)}function bm(t,i,a){t.min=a.min+i.min,t.max=t.min+kr(i)}function cb(t,i,a){bm(t.x,i.x,a.x),bm(t.y,i.y,a.y)}function Em(t,i,a){t.min=i.min-a.min,t.max=t.min+kr(i)}function Ha(t,i,a){Em(t.x,i.x,a.x),Em(t.y,i.y,a.y)}function ri(t){return[t("x"),t("y")]}const ex=({current:t})=>t?t.ownerDocument.defaultView:null,Sm=(t,i)=>Math.abs(t-i);function ub(t,i){const a=Sm(t.x,i.x),u=Sm(t.y,i.y);return Math.sqrt(a**2+u**2)}class tx{constructor(i,a,{transformPagePoint:u,contextWindow:m=window,dragSnapToOrigin:x=!1,distanceThreshold:y=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Bd(this.lastMoveEventInfo,this.history),M=this.startEvent!==null,L=ub(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!M&&!L)return;const{point:B}=_,{timestamp:j}=gr;this.history.push({...B,timestamp:j});const{onStart:z,onMove:V}=this.handlers;M||(z&&z(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),V&&V(this.lastMoveEvent,_)},this.handlePointerMove=(_,M)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=jd(M,this.transformPagePoint),un.update(this.updatePoint,!0)},this.handlePointerUp=(_,M)=>{this.end();const{onEnd:L,onSessionEnd:B,resumeAnimation:j}=this.handlers;if(this.dragSnapToOrigin&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const z=Bd(_.type==="pointercancel"?this.lastMoveEventInfo:jd(M,this.transformPagePoint),this.history);this.startEvent&&L&&L(_,z),B&&B(_,z)},!ih(i))return;this.dragSnapToOrigin=x,this.handlers=a,this.transformPagePoint=u,this.distanceThreshold=y,this.contextWindow=m||window;const b=ll(i),v=jd(b,this.transformPagePoint),{point:C}=v,{timestamp:S}=gr;this.history=[{...C,timestamp:S}];const{onSessionStart:I}=a;I&&I(i,Bd(v,this.history)),this.removeListeners=il(za(this.contextWindow,"pointermove",this.handlePointerMove),za(this.contextWindow,"pointerup",this.handlePointerUp),za(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(i){this.handlers=i}end(){this.removeListeners&&this.removeListeners(),Ki(this.updatePoint)}}function jd(t,i){return i?{point:i(t.point)}:t}function Am(t,i){return{x:t.x-i.x,y:t.y-i.y}}function Bd({point:t},i){return{point:t,delta:Am(t,nx(i)),offset:Am(t,db(i)),velocity:fb(i,.1)}}function db(t){return t[0]}function nx(t){return t[t.length-1]}function fb(t,i){if(t.length<2)return{x:0,y:0};let a=t.length-1,u=null;const m=nx(t);for(;a>=0&&(u=t[a],!(m.timestamp-u.timestamp>Ni(i)));)a--;if(!u)return{x:0,y:0};const x=Ii(m.timestamp-u.timestamp);if(x===0)return{x:0,y:0};const y={x:(m.x-u.x)/x,y:(m.y-u.y)/x};return y.x===1/0&&(y.x=0),y.y===1/0&&(y.y=0),y}function hb(t,{min:i,max:a},u){return i!==void 0&&t<i?t=u?An(i,t,u.min):Math.max(t,i):a!==void 0&&t>a&&(t=u?An(a,t,u.max):Math.min(t,a)),t}function Nm(t,i,a){return{min:i!==void 0?t.min+i:void 0,max:a!==void 0?t.max+a-(t.max-t.min):void 0}}function mb(t,{top:i,left:a,bottom:u,right:m}){return{x:Nm(t.x,a,m),y:Nm(t.y,i,u)}}function Im(t,i){let a=i.min-t.min,u=i.max-t.max;return i.max-i.min<t.max-t.min&&([a,u]=[u,a]),{min:a,max:u}}function pb(t,i){return{x:Im(t.x,i.x),y:Im(t.y,i.y)}}function gb(t,i){let a=.5;const u=kr(t),m=kr(i);return m>u?a=$a(i.min,i.max-u,t.min):u>m&&(a=$a(t.min,t.max-m,i.min)),$i(0,1,a)}function xb(t,i){const a={};return i.min!==void 0&&(a.min=i.min-t.min),i.max!==void 0&&(a.max=i.max-t.min),a}const yf=.35;function yb(t=yf){return t===!1?t=0:t===!0&&(t=yf),{x:Tm(t,"left","right"),y:Tm(t,"top","bottom")}}function Tm(t,i,a){return{min:_m(t,i),max:_m(t,a)}}function _m(t,i){return typeof t=="number"?t:t[i]||0}const wb=new WeakMap;class vb{constructor(i){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Bn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=i}start(i,{snapToCursor:a=!1,distanceThreshold:u}={}){const{presenceContext:m}=this.visualElement;if(m&&m.isPresent===!1)return;const x=I=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(ll(I).point)},y=(I,_)=>{const{drag:M,dragPropagation:L,onDragStart:B}=this.getProps();if(M&&!L&&(this.openDragLock&&this.openDragLock(),this.openDragLock=N3(M),!this.openDragLock))return;this.latestPointerEvent=I,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ri(z=>{let V=this.getAxisMotionValue(z).get()||0;if(Ti.test(V)){const{projection:F}=this.visualElement;if(F&&F.layout){const $=F.layout.layoutBox[z];$&&(V=kr($)*(parseFloat(V)/100))}}this.originPoint[z]=V}),B&&un.postRender(()=>B(I,_)),gf(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},b=(I,_)=>{this.latestPointerEvent=I,this.latestPanInfo=_;const{dragPropagation:M,dragDirectionLock:L,onDirectionLock:B,onDrag:j}=this.getProps();if(!M&&!this.openDragLock)return;const{offset:z}=_;if(L&&this.currentDirection===null){this.currentDirection=Cb(z),this.currentDirection!==null&&B&&B(this.currentDirection);return}this.updateAxis("x",_.point,z),this.updateAxis("y",_.point,z),this.visualElement.render(),j&&j(I,_)},v=(I,_)=>{this.latestPointerEvent=I,this.latestPanInfo=_,this.stop(I,_),this.latestPointerEvent=null,this.latestPanInfo=null},C=()=>ri(I=>{var _;return this.getAnimationState(I)==="paused"&&((_=this.getAxisMotionValue(I).animation)==null?void 0:_.play())}),{dragSnapToOrigin:S}=this.getProps();this.panSession=new tx(i,{onSessionStart:x,onStart:y,onMove:b,onSessionEnd:v,resumeAnimation:C},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:S,distanceThreshold:u,contextWindow:ex(this.visualElement)})}stop(i,a){const u=i||this.latestPointerEvent,m=a||this.latestPanInfo,x=this.isDragging;if(this.cancel(),!x||!m||!u)return;const{velocity:y}=m;this.startAnimation(y);const{onDragEnd:b}=this.getProps();b&&un.postRender(()=>b(u,m))}cancel(){this.isDragging=!1;const{projection:i,animationState:a}=this.visualElement;i&&(i.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:u}=this.getProps();!u&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(i,a,u){const{drag:m}=this.getProps();if(!u||!pc(i,m,this.currentDirection))return;const x=this.getAxisMotionValue(i);let y=this.originPoint[i]+u[i];this.constraints&&this.constraints[i]&&(y=hb(y,this.constraints[i],this.elastic[i])),x.set(y)}resolveConstraints(){var x;const{dragConstraints:i,dragElastic:a}=this.getProps(),u=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(x=this.visualElement.projection)==null?void 0:x.layout,m=this.constraints;i&&Vo(i)?this.constraints||(this.constraints=this.resolveRefConstraints()):i&&u?this.constraints=mb(u.layoutBox,i):this.constraints=!1,this.elastic=yb(a),m!==this.constraints&&u&&this.constraints&&!this.hasMutatedConstraints&&ri(y=>{this.constraints!==!1&&this.getAxisMotionValue(y)&&(this.constraints[y]=xb(u.layoutBox[y],this.constraints[y]))})}resolveRefConstraints(){const{dragConstraints:i,onMeasureDragConstraints:a}=this.getProps();if(!i||!Vo(i))return!1;const u=i.current,{projection:m}=this.visualElement;if(!m||!m.layout)return!1;const x=bC(u,m.root,this.visualElement.getTransformPagePoint());let y=pb(m.layout.layoutBox,x);if(a){const b=a(wC(y));this.hasMutatedConstraints=!!b,b&&(y=Fg(b))}return y}startAnimation(i){const{drag:a,dragMomentum:u,dragElastic:m,dragTransition:x,dragSnapToOrigin:y,onDragTransitionEnd:b}=this.getProps(),v=this.constraints||{},C=ri(S=>{if(!pc(S,a,this.currentDirection))return;let I=v&&v[S]||{};y&&(I={min:0,max:0});const _=m?200:1e6,M=m?40:1e7,L={type:"inertia",velocity:u?i[S]:0,bounceStiffness:_,bounceDamping:M,timeConstant:750,restDelta:1,restSpeed:10,...x,...I};return this.startAxisValueAnimation(S,L)});return Promise.all(C).then(b)}startAxisValueAnimation(i,a){const u=this.getAxisMotionValue(i);return gf(this.visualElement,i),u.start(hh(i,u,0,a,this.visualElement,!1))}stopAnimation(){ri(i=>this.getAxisMotionValue(i).stop())}pauseAnimation(){ri(i=>{var a;return(a=this.getAxisMotionValue(i).animation)==null?void 0:a.pause()})}getAnimationState(i){var a;return(a=this.getAxisMotionValue(i).animation)==null?void 0:a.state}getAxisMotionValue(i){const a=`_drag${i.toUpperCase()}`,u=this.visualElement.getProps(),m=u[a];return m||this.visualElement.getValue(i,(u.initial?u.initial[i]:void 0)||0)}snapToCursor(i){ri(a=>{const{drag:u}=this.getProps();if(!pc(a,u,this.currentDirection))return;const{projection:m}=this.visualElement,x=this.getAxisMotionValue(a);if(m&&m.layout){const{min:y,max:b}=m.layout.layoutBox[a];x.set(i[a]-An(y,b,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:i,dragConstraints:a}=this.getProps(),{projection:u}=this.visualElement;if(!Vo(a)||!u||!this.constraints)return;this.stopAnimation();const m={x:0,y:0};ri(y=>{const b=this.getAxisMotionValue(y);if(b&&this.constraints!==!1){const v=b.get();m[y]=gb({min:v,max:v},this.constraints[y])}});const{transformTemplate:x}=this.visualElement.getProps();this.visualElement.current.style.transform=x?x({},""):"none",u.root&&u.root.updateScroll(),u.updateLayout(),this.resolveConstraints(),ri(y=>{if(!pc(y,i,null))return;const b=this.getAxisMotionValue(y),{min:v,max:C}=this.constraints[y];b.set(An(v,C,m[y]))})}addListeners(){if(!this.visualElement.current)return;wb.set(this.visualElement,this);const i=this.visualElement.current,a=za(i,"pointerdown",v=>{const{drag:C,dragListener:S=!0}=this.getProps();C&&S&&this.start(v)}),u=()=>{const{dragConstraints:v}=this.getProps();Vo(v)&&v.current&&(this.constraints=this.resolveRefConstraints())},{projection:m}=this.visualElement,x=m.addEventListener("measure",u);m&&!m.layout&&(m.root&&m.root.updateScroll(),m.updateLayout()),un.read(u);const y=Ja(window,"resize",()=>this.scalePositionWithinConstraints()),b=m.addEventListener("didUpdate",({delta:v,hasLayoutChanged:C})=>{this.isDragging&&C&&(ri(S=>{const I=this.getAxisMotionValue(S);I&&(this.originPoint[S]+=v[S].translate,I.set(I.get()+v[S].translate))}),this.visualElement.render())});return()=>{y(),a(),x(),b&&b()}}getProps(){const i=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:u=!1,dragPropagation:m=!1,dragConstraints:x=!1,dragElastic:y=yf,dragMomentum:b=!0}=i;return{...i,drag:a,dragDirectionLock:u,dragPropagation:m,dragConstraints:x,dragElastic:y,dragMomentum:b}}}function pc(t,i,a){return(i===!0||i===t)&&(a===null||a===t)}function Cb(t,i=10){let a=null;return Math.abs(t.y)>i?a="y":Math.abs(t.x)>i&&(a="x"),a}class bb extends Is{constructor(i){super(i),this.removeGroupControls=ii,this.removeListeners=ii,this.controls=new vb(i)}mount(){const{dragControls:i}=this.node.getProps();i&&(this.removeGroupControls=i.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ii}unmount(){this.removeGroupControls(),this.removeListeners()}}const Rm=t=>(i,a)=>{t&&un.postRender(()=>t(i,a))};class Eb extends Is{constructor(){super(...arguments),this.removePointerDownListener=ii}onPointerDown(i){this.session=new tx(i,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ex(this.node)})}createPanHandlers(){const{onPanSessionStart:i,onPanStart:a,onPan:u,onPanEnd:m}=this.node.getProps();return{onSessionStart:Rm(i),onStart:Rm(a),onMove:u,onEnd:(x,y)=>{delete this.session,m&&un.postRender(()=>m(x,y))}}}mount(){this.removePointerDownListener=za(this.node.current,"pointerdown",i=>this.onPointerDown(i))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ac={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function km(t,i){return i.max===i.min?0:t/(i.max-i.min)*100}const La={correct:(t,i)=>{if(!i.target)return t;if(typeof t=="string")if(Et.test(t))t=parseFloat(t);else return t;const a=km(t,i.target.x),u=km(t,i.target.y);return`${a}% ${u}%`}},Sb={correct:(t,{treeScale:i,projectionDelta:a})=>{const u=t,m=Ns.parse(t);if(m.length>5)return u;const x=Ns.createTransformer(t),y=typeof m[0]!="number"?1:0,b=a.x.scale*i.x,v=a.y.scale*i.y;m[0+y]/=b,m[1+y]/=v;const C=An(b,v,.5);return typeof m[2+y]=="number"&&(m[2+y]/=C),typeof m[3+y]=="number"&&(m[3+y]/=C),x(m)}};let Fd=!1;class Ab extends N.Component{componentDidMount(){const{visualElement:i,layoutGroup:a,switchLayoutGroup:u,layoutId:m}=this.props,{projection:x}=i;Y3(Nb),x&&(a.group&&a.group.add(x),u&&u.register&&m&&u.register(x),Fd&&x.root.didUpdate(),x.addEventListener("animationComplete",()=>{this.safeToRemove()}),x.setOptions({...x.options,onExitComplete:()=>this.safeToRemove()})),Ac.hasEverUpdated=!0}getSnapshotBeforeUpdate(i){const{layoutDependency:a,visualElement:u,drag:m,isPresent:x}=this.props,{projection:y}=u;return y&&(y.isPresent=x,Fd=!0,m||i.layoutDependency!==a||a===void 0||i.isPresent!==x?y.willUpdate():this.safeToRemove(),i.isPresent!==x&&(x?y.promote():y.relegate()||un.postRender(()=>{const b=y.getStack();(!b||!b.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:i}=this.props.visualElement;i&&(i.root.didUpdate(),rh.postRender(()=>{!i.currentAnimation&&i.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:i,layoutGroup:a,switchLayoutGroup:u}=this.props,{projection:m}=i;Fd=!0,m&&(m.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(m),u&&u.deregister&&u.deregister(m))}safeToRemove(){const{safeToRemove:i}=this.props;i&&i()}render(){return null}}function rx(t){const[i,a]=Ag(),u=N.useContext(Lf);return h.jsx(Ab,{...t,layoutGroup:u,switchLayoutGroup:N.useContext(jg),isPresent:i,safeToRemove:a})}const Nb={borderRadius:{...La,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:La,borderTopRightRadius:La,borderBottomLeftRadius:La,borderBottomRightRadius:La,boxShadow:Sb};function Ib(t,i,a){const u=lr(t)?t:lo(t);return u.start(hh("",u,i,a)),u.animation}const Tb=(t,i)=>t.depth-i.depth;class _b{constructor(){this.children=[],this.isDirty=!1}add(i){Ff(this.children,i),this.isDirty=!0}remove(i){Vf(this.children,i),this.isDirty=!0}forEach(i){this.isDirty&&this.children.sort(Tb),this.isDirty=!1,this.children.forEach(i)}}function Rb(t,i){const a=Vr.now(),u=({timestamp:m})=>{const x=m-a;x>=i&&(Ki(u),t(x-i))};return un.setup(u,!0),()=>Ki(u)}const ix=["TopLeft","TopRight","BottomLeft","BottomRight"],kb=ix.length,Pm=t=>typeof t=="string"?parseFloat(t):t,Mm=t=>typeof t=="number"||Et.test(t);function Pb(t,i,a,u,m,x){m?(t.opacity=An(0,a.opacity??1,Mb(u)),t.opacityExit=An(i.opacity??1,0,Ob(u))):x&&(t.opacity=An(i.opacity??1,a.opacity??1,u));for(let y=0;y<kb;y++){const b=`border${ix[y]}Radius`;let v=Om(i,b),C=Om(a,b);if(v===void 0&&C===void 0)continue;v||(v=0),C||(C=0),v===0||C===0||Mm(v)===Mm(C)?(t[b]=Math.max(An(Pm(v),Pm(C),u),0),(Ti.test(C)||Ti.test(v))&&(t[b]+="%")):t[b]=C}(i.rotate||a.rotate)&&(t.rotate=An(i.rotate||0,a.rotate||0,u))}function Om(t,i){return t[i]!==void 0?t[i]:t.borderRadius}const Mb=sx(0,.5,Wp),Ob=sx(.5,.95,ii);function sx(t,i,a){return u=>u<t?0:u>i?1:a($a(t,i,u))}function Dm(t,i){t.min=i.min,t.max=i.max}function ni(t,i){Dm(t.x,i.x),Dm(t.y,i.y)}function Lm(t,i){t.translate=i.translate,t.scale=i.scale,t.originPoint=i.originPoint,t.origin=i.origin}function jm(t,i,a,u,m){return t-=i,t=Oc(t,1/a,u),m!==void 0&&(t=Oc(t,1/m,u)),t}function Db(t,i=0,a=1,u=.5,m,x=t,y=t){if(Ti.test(i)&&(i=parseFloat(i),i=An(y.min,y.max,i/100)-y.min),typeof i!="number")return;let b=An(x.min,x.max,u);t===x&&(b-=i),t.min=jm(t.min,i,a,b,m),t.max=jm(t.max,i,a,b,m)}function Bm(t,i,[a,u,m],x,y){Db(t,i[a],i[u],i[m],i.scale,x,y)}const Lb=["x","scaleX","originX"],jb=["y","scaleY","originY"];function Fm(t,i,a,u){Bm(t.x,i,Lb,a?a.x:void 0,u?u.x:void 0),Bm(t.y,i,jb,a?a.y:void 0,u?u.y:void 0)}function Vm(t){return t.translate===0&&t.scale===1}function ox(t){return Vm(t.x)&&Vm(t.y)}function Um(t,i){return t.min===i.min&&t.max===i.max}function Bb(t,i){return Um(t.x,i.x)&&Um(t.y,i.y)}function zm(t,i){return Math.round(t.min)===Math.round(i.min)&&Math.round(t.max)===Math.round(i.max)}function ax(t,i){return zm(t.x,i.x)&&zm(t.y,i.y)}function Wm(t){return kr(t.x)/kr(t.y)}function Hm(t,i){return t.translate===i.translate&&t.scale===i.scale&&t.originPoint===i.originPoint}class Fb{constructor(){this.members=[]}add(i){Ff(this.members,i),i.scheduleRender()}remove(i){if(Vf(this.members,i),i===this.prevLead&&(this.prevLead=void 0),i===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(i){const a=this.members.findIndex(m=>i===m);if(a===0)return!1;let u;for(let m=a;m>=0;m--){const x=this.members[m];if(x.isPresent!==!1){u=x;break}}return u?(this.promote(u),!0):!1}promote(i,a){const u=this.lead;if(i!==u&&(this.prevLead=u,this.lead=i,i.show(),u)){u.instance&&u.scheduleRender(),i.scheduleRender(),i.resumeFrom=u,a&&(i.resumeFrom.preserveOpacity=!0),u.snapshot&&(i.snapshot=u.snapshot,i.snapshot.latestValues=u.animationValues||u.latestValues),i.root&&i.root.isUpdating&&(i.isLayoutDirty=!0);const{crossfade:m}=i.options;m===!1&&u.hide()}}exitAnimationComplete(){this.members.forEach(i=>{const{options:a,resumingFrom:u}=i;a.onExitComplete&&a.onExitComplete(),u&&u.options.onExitComplete&&u.options.onExitComplete()})}scheduleRender(){this.members.forEach(i=>{i.instance&&i.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Vb(t,i,a){let u="";const m=t.x.translate/i.x,x=t.y.translate/i.y,y=(a==null?void 0:a.z)||0;if((m||x||y)&&(u=`translate3d(${m}px, ${x}px, ${y}px) `),(i.x!==1||i.y!==1)&&(u+=`scale(${1/i.x}, ${1/i.y}) `),a){const{transformPerspective:C,rotate:S,rotateX:I,rotateY:_,skewX:M,skewY:L}=a;C&&(u=`perspective(${C}px) ${u}`),S&&(u+=`rotate(${S}deg) `),I&&(u+=`rotateX(${I}deg) `),_&&(u+=`rotateY(${_}deg) `),M&&(u+=`skewX(${M}deg) `),L&&(u+=`skewY(${L}deg) `)}const b=t.x.scale*i.x,v=t.y.scale*i.y;return(b!==1||v!==1)&&(u+=`scale(${b}, ${v})`),u||"none"}const Vd=["","X","Y","Z"],Ub=1e3;let zb=0;function Ud(t,i,a,u){const{latestValues:m}=i;m[t]&&(a[t]=m[t],i.setStaticValue(t,0),u&&(u[t]=0))}function lx(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:i}=t.options;if(!i)return;const a=Yg(i);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:m,layoutId:x}=t.options;window.MotionCancelOptimisedAnimation(a,"transform",un,!(m||x))}const{parent:u}=t;u&&!u.hasCheckedOptimisedAppear&&lx(u)}function cx({attachResizeListener:t,defaultParent:i,measureScroll:a,checkIsScrollRoot:u,resetTransform:m}){return class{constructor(y={},b=i==null?void 0:i()){this.id=zb++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Gb),this.nodes.forEach(Zb),this.nodes.forEach(Kb),this.nodes.forEach(Xb)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=y,this.root=b?b.root||b:this,this.path=b?[...b.path,b]:[],this.parent=b,this.depth=b?b.depth+1:0;for(let v=0;v<this.path.length;v++)this.path[v].shouldResetTransform=!0;this.root===this&&(this.nodes=new _b)}addEventListener(y,b){return this.eventHandlers.has(y)||this.eventHandlers.set(y,new Wf),this.eventHandlers.get(y).add(b)}notifyListeners(y,...b){const v=this.eventHandlers.get(y);v&&v.notify(...b)}hasListeners(y){return this.eventHandlers.has(y)}mount(y){if(this.instance)return;this.isSVG=Sg(y)&&!P3(y),this.instance=y;const{layoutId:b,layout:v,visualElement:C}=this.options;if(C&&!C.current&&C.mount(y),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(v||b)&&(this.isLayoutDirty=!0),t){let S,I=0;const _=()=>this.root.updateBlockedByResize=!1;un.read(()=>{I=window.innerWidth}),t(y,()=>{const M=window.innerWidth;M!==I&&(I=M,this.root.updateBlockedByResize=!0,S&&S(),S=Rb(_,250),Ac.hasAnimatedSinceResize&&(Ac.hasAnimatedSinceResize=!1,this.nodes.forEach(Ym)))})}b&&this.root.registerSharedNode(b,this),this.options.animate!==!1&&C&&(b||v)&&this.addEventListener("didUpdate",({delta:S,hasLayoutChanged:I,hasRelativeLayoutChanged:_,layout:M})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const L=this.options.transition||C.getDefaultTransition()||tE,{onLayoutAnimationStart:B,onLayoutAnimationComplete:j}=C.getProps(),z=!this.targetLayout||!ax(this.targetLayout,M),V=!I&&_;if(this.options.layoutRoot||this.resumeFrom||V||I&&(z||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const F={...th(L,"layout"),onPlay:B,onComplete:j};(C.shouldReduceMotion||this.options.layoutRoot)&&(F.delay=0,F.type=!1),this.startAnimation(F),this.setAnimationOrigin(S,V)}else I||Ym(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=M})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const y=this.getStack();y&&y.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ki(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(qb),this.animationId++)}getTransformTemplate(){const{visualElement:y}=this.options;return y&&y.getProps().transformTemplate}willUpdate(y=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&lx(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let S=0;S<this.path.length;S++){const I=this.path[S];I.shouldResetTransform=!0,I.updateScroll("snapshot"),I.options.layoutRoot&&I.willUpdate(!1)}const{layoutId:b,layout:v}=this.options;if(b===void 0&&!v)return;const C=this.getTransformTemplate();this.prevTransformTemplateValue=C?C(this.latestValues,""):void 0,this.updateSnapshot(),y&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Gm);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Xm);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach($b),this.nodes.forEach(Wb),this.nodes.forEach(Hb)):this.nodes.forEach(Xm),this.clearAllSnapshots();const b=Vr.now();gr.delta=$i(0,1e3/60,b-gr.timestamp),gr.timestamp=b,gr.isProcessing=!0,Rd.update.process(gr),Rd.preRender.process(gr),Rd.render.process(gr),gr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,rh.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Yb),this.sharedNodes.forEach(Qb)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,un.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){un.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!kr(this.snapshot.measuredBox.x)&&!kr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let v=0;v<this.path.length;v++)this.path[v].updateScroll();const y=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Bn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:b}=this.options;b&&b.notify("LayoutMeasure",this.layout.layoutBox,y?y.layoutBox:void 0)}updateScroll(y="measure"){let b=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===y&&(b=!1),b&&this.instance){const v=u(this.instance);this.scroll={animationId:this.root.animationId,phase:y,isRoot:v,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:v}}}resetTransform(){if(!m)return;const y=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,b=this.projectionDelta&&!ox(this.projectionDelta),v=this.getTransformTemplate(),C=v?v(this.latestValues,""):void 0,S=C!==this.prevTransformTemplateValue;y&&this.instance&&(b||no(this.latestValues)||S)&&(m(this.instance,C),this.shouldResetTransform=!1,this.scheduleRender())}measure(y=!0){const b=this.measurePageBox();let v=this.removeElementScroll(b);return y&&(v=this.removeTransform(v)),nE(v),{animationId:this.root.animationId,measuredBox:b,layoutBox:v,latestValues:{},source:this.id}}measurePageBox(){var C;const{visualElement:y}=this.options;if(!y)return Bn();const b=y.measureViewportBox();if(!(((C=this.scroll)==null?void 0:C.wasRoot)||this.path.some(rE))){const{scroll:S}=this.root;S&&(Uo(b.x,S.offset.x),Uo(b.y,S.offset.y))}return b}removeElementScroll(y){var v;const b=Bn();if(ni(b,y),(v=this.scroll)!=null&&v.wasRoot)return b;for(let C=0;C<this.path.length;C++){const S=this.path[C],{scroll:I,options:_}=S;S!==this.root&&I&&_.layoutScroll&&(I.wasRoot&&ni(b,y),Uo(b.x,I.offset.x),Uo(b.y,I.offset.y))}return b}applyTransform(y,b=!1){const v=Bn();ni(v,y);for(let C=0;C<this.path.length;C++){const S=this.path[C];!b&&S.options.layoutScroll&&S.scroll&&S!==S.root&&zo(v,{x:-S.scroll.offset.x,y:-S.scroll.offset.y}),no(S.latestValues)&&zo(v,S.latestValues)}return no(this.latestValues)&&zo(v,this.latestValues),v}removeTransform(y){const b=Bn();ni(b,y);for(let v=0;v<this.path.length;v++){const C=this.path[v];if(!C.instance||!no(C.latestValues))continue;ff(C.latestValues)&&C.updateSnapshot();const S=Bn(),I=C.measurePageBox();ni(S,I),Fm(b,C.latestValues,C.snapshot?C.snapshot.layoutBox:void 0,S)}return no(this.latestValues)&&Fm(b,this.latestValues),b}setTargetDelta(y){this.targetDelta=y,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(y){this.options={...this.options,...y,crossfade:y.crossfade!==void 0?y.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==gr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(y=!1){var _;const b=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=b.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=b.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=b.isSharedProjectionDirty);const v=!!this.resumingFrom||this!==b;if(!(y||v&&this.isSharedProjectionDirty||this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:S,layoutId:I}=this.options;if(!(!this.layout||!(S||I))){if(this.resolvedRelativeTargetAt=gr.timestamp,!this.targetDelta&&!this.relativeTarget){const M=this.getClosestProjectingParent();M&&M.layout&&this.animationProgress!==1?(this.relativeParent=M,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Bn(),this.relativeTargetOrigin=Bn(),Ha(this.relativeTargetOrigin,this.layout.layoutBox,M.layout.layoutBox),ni(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Bn(),this.targetWithTransforms=Bn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),cb(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ni(this.target,this.layout.layoutBox),Ug(this.target,this.targetDelta)):ni(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const M=this.getClosestProjectingParent();M&&!!M.resumingFrom==!!this.resumingFrom&&!M.options.layoutScroll&&M.target&&this.animationProgress!==1?(this.relativeParent=M,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Bn(),this.relativeTargetOrigin=Bn(),Ha(this.relativeTargetOrigin,this.target,M.target),ni(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||ff(this.parent.latestValues)||Vg(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var L;const y=this.getLead(),b=!!this.resumingFrom||this!==y;let v=!0;if((this.isProjectionDirty||(L=this.parent)!=null&&L.isProjectionDirty)&&(v=!1),b&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(v=!1),this.resolvedRelativeTargetAt===gr.timestamp&&(v=!1),v)return;const{layout:C,layoutId:S}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(C||S))return;ni(this.layoutCorrected,this.layout.layoutBox);const I=this.treeScale.x,_=this.treeScale.y;CC(this.layoutCorrected,this.treeScale,this.path,b),y.layout&&!y.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(y.target=y.layout.layoutBox,y.targetWithTransforms=Bn());const{target:M}=y;if(!M){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Lm(this.prevProjectionDelta.x,this.projectionDelta.x),Lm(this.prevProjectionDelta.y,this.projectionDelta.y)),Wa(this.projectionDelta,this.layoutCorrected,M,this.latestValues),(this.treeScale.x!==I||this.treeScale.y!==_||!Hm(this.projectionDelta.x,this.prevProjectionDelta.x)||!Hm(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",M))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(y=!0){var b;if((b=this.options.visualElement)==null||b.scheduleRender(),y){const v=this.getStack();v&&v.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Wo(),this.projectionDelta=Wo(),this.projectionDeltaWithTransform=Wo()}setAnimationOrigin(y,b=!1){const v=this.snapshot,C=v?v.latestValues:{},S={...this.latestValues},I=Wo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!b;const _=Bn(),M=v?v.source:void 0,L=this.layout?this.layout.source:void 0,B=M!==L,j=this.getStack(),z=!j||j.members.length<=1,V=!!(B&&!z&&this.options.crossfade===!0&&!this.path.some(eE));this.animationProgress=0;let F;this.mixTargetDelta=$=>{const Z=$/1e3;$m(I.x,y.x,Z),$m(I.y,y.y,Z),this.setTargetDelta(I),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ha(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Jb(this.relativeTarget,this.relativeTargetOrigin,_,Z),F&&Bb(this.relativeTarget,F)&&(this.isProjectionDirty=!1),F||(F=Bn()),ni(F,this.relativeTarget)),B&&(this.animationValues=S,Pb(S,C,this.latestValues,Z,V,z)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(y){var b,v,C;this.notifyListeners("animationStart"),(b=this.currentAnimation)==null||b.stop(),(C=(v=this.resumingFrom)==null?void 0:v.currentAnimation)==null||C.stop(),this.pendingAnimation&&(Ki(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=un.update(()=>{Ac.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=lo(0)),this.currentAnimation=Ib(this.motionValue,[0,1e3],{...y,velocity:0,isSync:!0,onUpdate:S=>{this.mixTargetDelta(S),y.onUpdate&&y.onUpdate(S)},onStop:()=>{},onComplete:()=>{y.onComplete&&y.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const y=this.getStack();y&&y.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Ub),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const y=this.getLead();let{targetWithTransforms:b,target:v,layout:C,latestValues:S}=y;if(!(!b||!v||!C)){if(this!==y&&this.layout&&C&&ux(this.options.animationType,this.layout.layoutBox,C.layoutBox)){v=this.target||Bn();const I=kr(this.layout.layoutBox.x);v.x.min=y.target.x.min,v.x.max=v.x.min+I;const _=kr(this.layout.layoutBox.y);v.y.min=y.target.y.min,v.y.max=v.y.min+_}ni(b,v),zo(b,S),Wa(this.projectionDeltaWithTransform,this.layoutCorrected,b,S)}}registerSharedNode(y,b){this.sharedNodes.has(y)||this.sharedNodes.set(y,new Fb),this.sharedNodes.get(y).add(b);const C=b.options.initialPromotionConfig;b.promote({transition:C?C.transition:void 0,preserveFollowOpacity:C&&C.shouldPreserveFollowOpacity?C.shouldPreserveFollowOpacity(b):void 0})}isLead(){const y=this.getStack();return y?y.lead===this:!0}getLead(){var b;const{layoutId:y}=this.options;return y?((b=this.getStack())==null?void 0:b.lead)||this:this}getPrevLead(){var b;const{layoutId:y}=this.options;return y?(b=this.getStack())==null?void 0:b.prevLead:void 0}getStack(){const{layoutId:y}=this.options;if(y)return this.root.sharedNodes.get(y)}promote({needsReset:y,transition:b,preserveFollowOpacity:v}={}){const C=this.getStack();C&&C.promote(this,v),y&&(this.projectionDelta=void 0,this.needsReset=!0),b&&this.setOptions({transition:b})}relegate(){const y=this.getStack();return y?y.relegate(this):!1}resetSkewAndRotation(){const{visualElement:y}=this.options;if(!y)return;let b=!1;const{latestValues:v}=y;if((v.z||v.rotate||v.rotateX||v.rotateY||v.rotateZ||v.skewX||v.skewY)&&(b=!0),!b)return;const C={};v.z&&Ud("z",y,C,this.animationValues);for(let S=0;S<Vd.length;S++)Ud(`rotate${Vd[S]}`,y,C,this.animationValues),Ud(`skew${Vd[S]}`,y,C,this.animationValues);y.render();for(const S in C)y.setStaticValue(S,C[S]),this.animationValues&&(this.animationValues[S]=C[S]);y.scheduleRender()}applyProjectionStyles(y,b){if(!this.instance||this.isSVG)return;if(!this.isVisible){y.visibility="hidden";return}const v=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,y.visibility="",y.opacity="",y.pointerEvents=Sc(b==null?void 0:b.pointerEvents)||"",y.transform=v?v(this.latestValues,""):"none";return}const C=this.getLead();if(!this.projectionDelta||!this.layout||!C.target){this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=Sc(b==null?void 0:b.pointerEvents)||""),this.hasProjected&&!no(this.latestValues)&&(y.transform=v?v({},""):"none",this.hasProjected=!1);return}y.visibility="";const S=C.animationValues||C.latestValues;this.applyTransformsToTarget();let I=Vb(this.projectionDeltaWithTransform,this.treeScale,S);v&&(I=v(S,I)),y.transform=I;const{x:_,y:M}=this.projectionDelta;y.transformOrigin=`${_.origin*100}% ${M.origin*100}% 0`,C.animationValues?y.opacity=C===this?S.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:S.opacityExit:y.opacity=C===this?S.opacity!==void 0?S.opacity:"":S.opacityExit!==void 0?S.opacityExit:0;for(const L in Qa){if(S[L]===void 0)continue;const{correct:B,applyTo:j,isCSSVariable:z}=Qa[L],V=I==="none"?S[L]:B(S[L],C);if(j){const F=j.length;for(let $=0;$<F;$++)y[j[$]]=V}else z?this.options.visualElement.renderState.vars[L]=V:y[L]=V}this.options.layoutId&&(y.pointerEvents=C===this?Sc(b==null?void 0:b.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(y=>{var b;return(b=y.currentAnimation)==null?void 0:b.stop()}),this.root.nodes.forEach(Gm),this.root.sharedNodes.clear()}}}function Wb(t){t.updateLayout()}function Hb(t){var a;const i=((a=t.resumeFrom)==null?void 0:a.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&i&&t.hasListeners("didUpdate")){const{layoutBox:u,measuredBox:m}=t.layout,{animationType:x}=t.options,y=i.source!==t.layout.source;x==="size"?ri(I=>{const _=y?i.measuredBox[I]:i.layoutBox[I],M=kr(_);_.min=u[I].min,_.max=_.min+M}):ux(x,i.layoutBox,u)&&ri(I=>{const _=y?i.measuredBox[I]:i.layoutBox[I],M=kr(u[I]);_.max=_.min+M,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[I].max=t.relativeTarget[I].min+M)});const b=Wo();Wa(b,u,i.layoutBox);const v=Wo();y?Wa(v,t.applyTransform(m,!0),i.measuredBox):Wa(v,u,i.layoutBox);const C=!ox(b);let S=!1;if(!t.resumeFrom){const I=t.getClosestProjectingParent();if(I&&!I.resumeFrom){const{snapshot:_,layout:M}=I;if(_&&M){const L=Bn();Ha(L,i.layoutBox,_.layoutBox);const B=Bn();Ha(B,u,M.layoutBox),ax(L,B)||(S=!0),I.options.layoutRoot&&(t.relativeTarget=B,t.relativeTargetOrigin=L,t.relativeParent=I)}}}t.notifyListeners("didUpdate",{layout:u,snapshot:i,delta:v,layoutDelta:b,hasLayoutChanged:C,hasRelativeLayoutChanged:S})}else if(t.isLead()){const{onExitComplete:u}=t.options;u&&u()}t.options.transition=void 0}function Gb(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Xb(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Yb(t){t.clearSnapshot()}function Gm(t){t.clearMeasurements()}function Xm(t){t.isLayoutDirty=!1}function $b(t){const{visualElement:i}=t.options;i&&i.getProps().onBeforeLayoutMeasure&&i.notify("BeforeLayoutMeasure"),t.resetTransform()}function Ym(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Zb(t){t.resolveTargetDelta()}function Kb(t){t.calcProjection()}function qb(t){t.resetSkewAndRotation()}function Qb(t){t.removeLeadSnapshot()}function $m(t,i,a){t.translate=An(i.translate,0,a),t.scale=An(i.scale,1,a),t.origin=i.origin,t.originPoint=i.originPoint}function Zm(t,i,a,u){t.min=An(i.min,a.min,u),t.max=An(i.max,a.max,u)}function Jb(t,i,a,u){Zm(t.x,i.x,a.x,u),Zm(t.y,i.y,a.y,u)}function eE(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const tE={duration:.45,ease:[.4,0,.1,1]},Km=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),qm=Km("applewebkit/")&&!Km("chrome/")?Math.round:ii;function Qm(t){t.min=qm(t.min),t.max=qm(t.max)}function nE(t){Qm(t.x),Qm(t.y)}function ux(t,i,a){return t==="position"||t==="preserve-aspect"&&!lb(Wm(i),Wm(a),.2)}function rE(t){var i;return t!==t.root&&((i=t.scroll)==null?void 0:i.wasRoot)}const iE=cx({attachResizeListener:(t,i)=>Ja(t,"resize",i),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),zd={current:void 0},dx=cx({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!zd.current){const t=new iE({});t.mount(window),t.setOptions({layoutScroll:!0}),zd.current=t}return zd.current},resetTransform:(t,i)=>{t.style.transform=i!==void 0?i:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),sE={pan:{Feature:Eb},drag:{Feature:bb,ProjectionNode:dx,MeasureLayout:rx}};function Jm(t,i,a){const{props:u}=t;t.animationState&&u.whileHover&&t.animationState.setActive("whileHover",a==="Start");const m="onHover"+a,x=u[m];x&&un.postRender(()=>x(i,ll(i)))}class oE extends Is{mount(){const{current:i}=this.node;i&&(this.unmount=I3(i,(a,u)=>(Jm(this.node,u,"Start"),m=>Jm(this.node,m,"End"))))}unmount(){}}class aE extends Is{constructor(){super(...arguments),this.isActive=!1}onFocus(){let i=!1;try{i=this.node.current.matches(":focus-visible")}catch{i=!0}!i||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=il(Ja(this.node.current,"focus",()=>this.onFocus()),Ja(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function ep(t,i,a){const{props:u}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&u.whileTap&&t.animationState.setActive("whileTap",a==="Start");const m="onTap"+(a==="End"?"":a),x=u[m];x&&un.postRender(()=>x(i,ll(i)))}class lE extends Is{mount(){const{current:i}=this.node;i&&(this.unmount=k3(i,(a,u)=>(ep(this.node,u,"Start"),(m,{success:x})=>ep(this.node,m,x?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const wf=new WeakMap,Wd=new WeakMap,cE=t=>{const i=wf.get(t.target);i&&i(t)},uE=t=>{t.forEach(cE)};function dE({root:t,...i}){const a=t||document;Wd.has(a)||Wd.set(a,{});const u=Wd.get(a),m=JSON.stringify(i);return u[m]||(u[m]=new IntersectionObserver(uE,{root:t,...i})),u[m]}function fE(t,i,a){const u=dE(i);return wf.set(t,a),u.observe(t),()=>{wf.delete(t),u.unobserve(t)}}const hE={some:0,all:1};class mE extends Is{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:i={}}=this.node.getProps(),{root:a,margin:u,amount:m="some",once:x}=i,y={root:a?a.current:void 0,rootMargin:u,threshold:typeof m=="number"?m:hE[m]},b=v=>{const{isIntersecting:C}=v;if(this.isInView===C||(this.isInView=C,x&&!C&&this.hasEnteredView))return;C&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",C);const{onViewportEnter:S,onViewportLeave:I}=this.node.getProps(),_=C?S:I;_&&_(v)};return fE(this.node.current,y,b)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:i,prevProps:a}=this.node;["amount","margin","root"].some(pE(i,a))&&this.startObserver()}unmount(){}}function pE({viewport:t={}},{viewport:i={}}={}){return a=>t[a]!==i[a]}const gE={inView:{Feature:mE},tap:{Feature:lE},focus:{Feature:aE},hover:{Feature:oE}},xE={layout:{ProjectionNode:dx,MeasureLayout:rx}},yE={...nb,...gE,...sE,...xE},yt=yC(yE,kC);function mh(t){const i=rl(()=>lo(t)),{isStatic:a}=N.useContext(al);if(a){const[,u]=N.useState(t);N.useEffect(()=>i.on("change",u),[])}return i}function fx(t,i){const a=mh(i()),u=()=>a.set(i());return u(),Bf(()=>{const m=()=>un.preRender(u,!1,!0),x=t.map(y=>y.on("change",m));return()=>{x.forEach(y=>y()),Ki(u)}}),a}function wE(t){Ua.current=[],t();const i=fx(Ua.current,t);return Ua.current=void 0,i}function vf(t,i,a,u){if(typeof t=="function")return wE(t);const m=typeof i=="function"?i:M3(i,a,u);return Array.isArray(t)?tp(t,m):tp([t],([x])=>m(x))}function tp(t,i){const a=rl(()=>[]);return fx(t,()=>{a.length=0;const u=t.length;for(let m=0;m<u;m++)a[m]=t[m].get();return i(a)})}function vE(t,i={}){const{isStatic:a}=N.useContext(al),u=()=>lr(t)?t.get():t;if(a)return vf(u);const m=mh(u());return N.useInsertionEffect(()=>O3(m,t,i),[m,JSON.stringify(i)]),m}const CE={some:0,all:1};function bE(t,i,{root:a,margin:u,amount:m="some"}={}){const x=yg(t),y=new WeakMap,b=C=>{C.forEach(S=>{const I=y.get(S.target);if(S.isIntersecting!==!!I)if(S.isIntersecting){const _=i(S.target,S);typeof _=="function"?y.set(S.target,_):v.unobserve(S.target)}else typeof I=="function"&&(I(S),y.delete(S.target))})},v=new IntersectionObserver(b,{root:a,rootMargin:u,threshold:typeof m=="number"?m:CE[m]});return x.forEach(C=>v.observe(C)),()=>v.disconnect()}function EE(t,{root:i,margin:a,amount:u,once:m=!1,initial:x=!1}={}){const[y,b]=N.useState(x);return N.useEffect(()=>{if(!t.current||m&&y)return;const v=()=>(b(!0),m?void 0:()=>b(!1)),C={root:i&&i.current||void 0,margin:a,amount:u};return bE(t.current,v,C)},[i,t,a,m,u]),y}const co=({size:t=60,fullScreen:i=!1,message:a=null})=>i?h.jsx("div",{className:"loading-spinner-fullscreen",children:h.jsxs("div",{className:"loading-spinner-content",children:[h.jsx("div",{className:"loading-spinner",style:{width:t,height:t},children:h.jsx("div",{className:"loading-spinner-inner"})}),a&&h.jsx("p",{className:"loading-spinner-message",children:a})]})}):h.jsxs("div",{className:"loading-spinner-wrapper",children:[h.jsx("div",{className:"loading-spinner",style:{width:t,height:t},children:h.jsx("div",{className:"loading-spinner-inner"})}),a&&h.jsx("p",{className:"loading-spinner-message",children:a})]}),SE=()=>{const{login:t,signup:i,user:a,logout:u,checkAuth:m,isAuthLoading:x,authLoadingMessage:y}=N.useContext(Hn),[b,v]=N.useState(""),[C,S]=N.useState(""),[I,_]=N.useState(""),[M,L]=N.useState(null),[B,j]=N.useState(null),[z,V]=N.useState(""),[F,$]=N.useState(0),[Z,re]=N.useState({x:0,y:0}),[X,Q]=N.useState(1),[q,ge]=N.useState(null),[Ne,Ae]=N.useState(!1),[De,Ce]=N.useState(!1),[G,je]=N.useState({}),[ye,fe]=N.useState({}),[Ve,we]=N.useState(!1),[Y,le]=N.useState(!1),[Te,Ge]=N.useState(!1),be=N.useRef(null),[te,Xe]=N.useState(!1),Pe=Fn(),$e=Pr(),kt=new URLSearchParams($e.search),xe=kt.get("redirect"),ie=kt.get("code"),ue=xe==="lobby",Re=()=>{const qe="abcdefghijklmnopqrstuvwxyz0123456789";let ve="";for(let se=0;se<10;se++)ve+=qe.charAt(Math.floor(Math.random()*qe.length));return ve};N.useEffect(()=>{if(ue&&!b&&!C){const qe=Re();v(qe),S(qe),fe(ve=>({...ve,username:!0,password:!0})),je(ve=>({...ve,username:"",password:""}))}},[ue]),N.useEffect(()=>{x||a&&Pe(xe==="lobby"?ie?`/lobby?code=${ie}`:"/?showLobbyModal=true":xe==="product-selection"?"/product-selection":"/")},[x,a,xe,ie,Pe]),N.useEffect(()=>{F===1&&ie!=="demolobby"&&(b&&C&&I)&&!Te&&(le(!0),Ge(!0))},[F,ie,b,C,I,Te]);const Ze=()=>{le(!1),setTimeout(()=>{be.current&&be.current.click()},150)},tt=()=>{le(!1)},ze=qe=>{const ve=/^[a-z0-9]+$/;return qe.length>=2&&ve.test(qe)},_e=qe=>qe.length>=2,We=qe=>qe.length>=2,wt=(qe,ve,se)=>{const et=We(qe)&&ze(ve)&&_e(se);we(et)},Ie=()=>{F<at.length-1&&(we(!1),$(qe=>qe+1))},vt=()=>{F>0&&($(qe=>qe-1),F===1&&wt(I,b,C))},Lt=qe=>{const ve=qe.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");v(ve),ze(ve)?(fe(se=>({...se,username:!0})),je(se=>({...se,username:""}))):(fe(se=>({...se,username:!1})),je(se=>({...se,username:"Must be at least 2 characters (letters and numbers only)"}))),wt(I,ve,C)},Ee=qe=>{const ve=qe.target.value;S(ve),_e(ve)?(fe(se=>({...se,password:!0})),je(se=>({...se,password:""}))):(fe(se=>({...se,password:!1})),je(se=>({...se,password:"Must be at least 2 characters"}))),wt(I,b,ve)},Pt=qe=>{const ve=qe.target.value;_(ve),We(ve)?(fe(se=>({...se,displayName:!0})),je(se=>({...se,displayName:""}))):(fe(se=>({...se,displayName:!1})),je(se=>({...se,displayName:"Must be at least 2 characters"}))),wt(ve,b,C)},St=qe=>{const ve=qe.target.files[0];if(ve){const se=new FileReader;se.onload=et=>{const nt=new Image;nt.onload=()=>{let ht=nt.width,Qt=nt.height;const dn=1500;ht>Qt&&ht>dn?(Qt=Qt*dn/ht,ht=dn):Qt>ht&&Qt>dn&&(ht=ht*dn/Qt,Qt=dn);const fn=document.createElement("canvas");fn.width=ht,fn.height=Qt,fn.getContext("2d").drawImage(nt,0,0,ht,Qt);const hn=fn.toDataURL("image/jpeg",.75);L(ve),j(hn),Ae(!0),fe(Gn=>({...Gn,image:!0})),je(Gn=>({...Gn,image:""})),we(!0)},nt.src=et.target.result},se.readAsDataURL(ve)}},zt=(qe,ve)=>{ge(ve)},lt=async()=>{try{const qe=await zc(B,q);j(qe),Ae(!1)}catch(qe){console.error("Error cropping the image:",qe),V("Failed to crop image. Please try again.")}},Wt=async(qe,ve,se)=>{if("credentials"in navigator&&window.PasswordCredential)try{const et=new PasswordCredential({id:qe,password:ve,name:se});await navigator.credentials.store(et),console.log("Credentials saved to password manager")}catch(et){console.warn("Could not save credentials:",et)}},Qe=async qe=>{if(qe.preventDefault(),Ce(!0),V(""),console.log("Signup attempt - Username:",b,"Password:",C),!b||!C||!I){V("All fields are required"),Ce(!1);return}if(!M||!B){V("Your profile picture is required"),Ce(!1);return}try{const ve="/signup",se=await bt(ve,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:b,password:C,is_lobby_signup:ue})}),et=await se.json();let nt=b,ht=C;if(et.error==="Username already taken")if(ue){const Ue=Re(),hn=Ue,Gn=Ue;v(hn),S(Gn);const Yr=await bt(ve,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:hn,password:Gn,is_lobby_signup:!0})}),Vn=await Yr.json();if(!Yr.ok||Vn.error==="Username already taken"){V("Unable to create account. Please try again."),Ce(!1);return}t(Vn),nt=hn,ht=Gn}else{V("Username is taken"),Ce(!1);return}else{if(!se.ok){V(et.message||"Signup failed"),Ce(!1);return}t(et)}if(await m(),!localStorage.getItem("access_token"))throw new Error("Authentication failed");let dn=null;if(M)dn=B,dn=dn.split(",")[1];else{const Gn=await(await(await fetch("/assets/fakeprofile.png")).blob()).arrayBuffer();dn=btoa(new Uint8Array(Gn).reduce((Yr,Vn)=>Yr+String.fromCharCode(Vn),""))}if(!(await bt("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:I,image_data:dn})})).ok)throw new Error("Failed to update profile");await m(),await Wt(nt,ht,I),Pe(xe==="lobby"?ie?`/lobby?code=${ie}`:"/?showLobbyModal=true":xe==="product-selection"?"/product-selection":"/")}catch(ve){console.error("Error:",ve),V("An error occurred. Please try again.")}Ce(!1)},at=[{id:"credentials",type:"combined"},{id:"image",label:ie==="demolobby"?"Profile Image (Upload Any Image)":"Take a Selfie (so people can find you)",type:"file",onChange:St,accept:"image/*"}];return x?h.jsx(co,{fullScreen:!0,message:y}):h.jsxs("div",{className:"signup-container",children:[h.jsx("button",{onClick:()=>Pe("/"),className:"homescreen-button",children:"Home"}),h.jsx("img",{src:"/assets/reuneo_test_11.png",alt:"Reunio Logo",className:"logo-image",style:{marginTop:"-1.5rem"}}),h.jsx("h3",{className:"signup-header",children:ie==="demolobby"?"Join the demo":"Sign Up to Join"}),ie&&ie!=="demolobby"&&h.jsxs("h2",{className:"signup-header",children:[ie," lobby"]}),ie==="demolobby"&&h.jsx("h2",{className:"signup-header",style:{fontSize:"0.9rem"},children:"Try Reuneo for Free!"}),h.jsx("p",{className:"login-link-text",children:"Already have an account?"}),h.jsx("button",{type:"button",onClick:()=>Pe("/login"),className:"login-cta-button",children:"Yes, I saved my email before"}),h.jsxs("div",{className:"step-form-container",children:[h.jsx("div",{className:"step-progress",children:at.map((qe,ve)=>h.jsx("div",{className:`progress-dot ${ve===F?"active":""} ${ve<F?"completed":""}`},ve))}),h.jsxs("form",{onSubmit:Qe,autoComplete:"on",children:[h.jsx(cr,{mode:"wait",initial:!1,children:h.jsxs(yt.div,{initial:{opacity:0,x:8},animate:{opacity:1,x:0},exit:{opacity:0,x:-8},transition:{type:"spring",stiffness:500,damping:25,mass:.3},className:"step active",style:{willChange:"transform, opacity"},children:[h.jsxs("div",{className:"step-content",children:[F===0&&h.jsxs(yt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"credentials-step",children:[h.jsxs("div",{className:"name-field-container",children:[h.jsx("label",{className:"step-label",children:ie==="demolobby"?"Your Name (Type Any Name)":"Your Name"}),h.jsx("input",{type:"text",name:"displayName",autoComplete:"name",value:I,onChange:Pt,placeholder:"Enter your name",className:"step-input",autoFocus:!0}),h.jsxs(cr,{mode:"wait",children:[G.displayName&&h.jsx(yt.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},className:"step-error",children:G.displayName}),ye.displayName&&!G.displayName&&h.jsx(yt.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"step-success",children:" Valid"})]})]}),Ve&&h.jsx("div",{className:"inline-next-button-container",children:h.jsx(yt.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},type:"button",onClick:Ie,className:"inline-next-button",children:"Continue "})}),ue?h.jsxs("div",{className:"credentials-collapsible",children:[h.jsx("p",{className:"credentials-hint",children:"Auto-generated login (edit if you want)"}),h.jsx("button",{type:"button",className:"see-more-toggle",onClick:()=>Xe(!te),children:te?"Hide ":"See More "}),te&&h.jsxs(yt.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"credentials-fields-expanded",children:[h.jsxs("div",{className:"field-row",children:[h.jsx("label",{className:"step-label small-label",children:"Username"}),h.jsx("input",{type:"text",name:"username",autoComplete:"username",value:b,onChange:Lt,placeholder:"Choose a username",className:"step-input"}),G.username&&h.jsx("div",{className:"step-error small-feedback",children:G.username}),ye.username&&!G.username&&h.jsx("div",{className:"step-success small-feedback",children:" Valid"})]}),h.jsxs("div",{className:"field-row",children:[h.jsx("label",{className:"step-label small-label",children:"Password"}),h.jsx("input",{type:"password",name:"password",autoComplete:"new-password",value:C,onChange:Ee,placeholder:"Create a password",className:"step-input"}),G.password&&h.jsx("div",{className:"step-error small-feedback",children:G.password}),ye.password&&!G.password&&h.jsx("div",{className:"step-success small-feedback",children:" Valid"})]})]})]}):h.jsxs("div",{className:"credentials-fields",children:[h.jsxs("div",{className:"field-row",children:[h.jsx("label",{className:"step-label small-label",children:"Username"}),h.jsx("input",{type:"text",name:"username",autoComplete:"username",value:b,onChange:Lt,placeholder:"Choose a username",className:"step-input"}),G.username&&h.jsx("div",{className:"step-error small-feedback",children:G.username}),ye.username&&!G.username&&h.jsx("div",{className:"step-success small-feedback",children:" Valid"})]}),h.jsxs("div",{className:"field-row",children:[h.jsx("label",{className:"step-label small-label",children:"Password"}),h.jsx("input",{type:"password",name:"password",autoComplete:"new-password",value:C,onChange:Ee,placeholder:"Create a password",className:"step-input"}),G.password&&h.jsx("div",{className:"step-error small-feedback",children:G.password}),ye.password&&!G.password&&h.jsx("div",{className:"step-success small-feedback",children:" Valid"})]})]})]}),F===1&&h.jsxs(yt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:[h.jsx("div",{className:"inline-back-button-container",children:h.jsx(yt.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},type:"button",onClick:vt,className:"inline-back-button",children:" Back"})}),h.jsx("label",{className:"step-label",children:at[1].label}),h.jsx("div",{className:"image-upload-container",children:Ne?h.jsxs("div",{className:"cropper-container",children:[h.jsx("div",{className:"cropper-wrapper",children:h.jsx(Uc,{image:B,crop:Z,zoom:X,aspect:1,onCropComplete:zt,onCropChange:re,onZoomChange:Q})}),h.jsxs("div",{className:"cropper-controls",children:[h.jsx("button",{type:"button",onClick:()=>{Ae(!1),j(null),L(null)},className:"cancel-crop-button",children:"Cancel"}),h.jsx("button",{type:"button",onClick:lt,className:"save-crop-button",children:"Good"})]})]}):h.jsxs(h.Fragment,{children:[h.jsx("input",{ref:be,type:"file",onChange:St,accept:"image/*",className:"step-input"}),B&&h.jsx("div",{children:h.jsx("img",{src:B,alt:"Profile preview",className:"profile-preview-image"})})]})})]})]}),!Ne&&h.jsx("div",{className:`button-container ${F===0?"combined-step-buttons":""}`,children:Ve&&F>0&&F<at.length-1&&h.jsx(yt.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},type:"button",onClick:Ie,className:"nextz-button",children:"Next "})})]},F)}),z&&h.jsx(yt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"error-message",children:z}),F===at.length-1&&h.jsx(yt.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},type:"submit",className:"primary-button",disabled:De,children:De?"Loading...":"Complete Signup"})]})]}),h.jsx(cr,{children:Y&&h.jsx(yt.div,{className:"selfie-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:tt,children:h.jsxs(yt.div,{className:"selfie-modal-content",initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},transition:{type:"spring",stiffness:400,damping:25},onClick:qe=>qe.stopPropagation(),children:[h.jsx("h2",{className:"selfie-modal-header",children:"You Must Take a Selfie"}),h.jsx("p",{className:"selfie-modal-subtext",children:"Don't use old photos, people need to know how you look in order to find you in the room - trust us."}),h.jsx("button",{type:"button",className:"selfie-modal-button",onClick:Ze,children:"Understood"})]})})})]})},AE=5e3,hx=(t,i=null,a=null)=>{N.useEffect(()=>{const u=async()=>{try{const x=a?`/display_lobby_metadata?lobby_code=${a}`:"/display_lobby_metadata",y=await bt(x,{headers:{lobby_code:a}});if(!y.ok){console.error("Failed to fetch lobby metadata");return}const b=await y.json();t(b.player_count),i&&i(b.lobby_state)}catch(x){console.error("Error fetching lobby metadata:",x)}};u();const m=setInterval(u,AE);return()=>clearInterval(m)},[t,i,a])},Kc="currentLobbyCode",qc="currentLobbyTimestamp",ph="currentLobbyLastValidated",NE=30*60*1e3,IE=3*60*1e3,TE=t=>{localStorage.setItem(Kc,t),localStorage.setItem(qc,Date.now().toString()),console.log(`Stored lobby code: ${t}`)},_E=()=>{const t=localStorage.getItem(Kc),i=localStorage.getItem(qc);return!t||!i?null:Date.now()-parseInt(i)>NE?(Dc(),console.log("Lobby code expired, cleared from storage"),null):t},RE=()=>{const t=localStorage.getItem(ph);return t?Date.now()-parseInt(t)>IE:!0},kE=()=>{localStorage.setItem(ph,Date.now().toString())},Dc=()=>{localStorage.removeItem(Kc),localStorage.removeItem(qc),localStorage.removeItem(ph),console.log("Cleared lobby storage")},PE=()=>{localStorage.getItem(Kc)&&localStorage.setItem(qc,Date.now().toString())},ME=()=>h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:[h.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),h.jsx("circle",{cx:"9",cy:"7",r:"4"}),h.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),h.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}),h.jsx("path",{d:"M12 11v6"}),h.jsx("path",{d:"M9 14h6"})]}),OE=()=>h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:[h.jsx("path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}),h.jsx("polyline",{points:"10 17 15 12 10 7"}),h.jsx("line",{x1:"15",y1:"12",x2:"3",y2:"12"})]}),Hd=({cx:t,cy:i,r:a,className:u})=>h.jsx("path",{className:u,d:`M${t} ${i-a} C${t+a*.1} ${i-a*.1} ${t+a*.1} ${i-a*.1} ${t+a} ${i} C${t+a*.1} ${i+a*.1} ${t+a*.1} ${i+a*.1} ${t} ${i+a} C${t-a*.1} ${i+a*.1} ${t-a*.1} ${i+a*.1} ${t-a} ${i} C${t-a*.1} ${i-a*.1} ${t-a*.1} ${i-a*.1} ${t} ${i-a}Z`}),DE=()=>h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:[h.jsx("circle",{cx:"12",cy:"12",r:"3"}),h.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),LE=()=>h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,style:{transform:"scaleX(-1)"},children:[h.jsx("path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}),h.jsx("polyline",{points:"10 17 15 12 10 7"}),h.jsx("line",{x1:"15",y1:"12",x2:"3",y2:"12"})]}),jE=()=>h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:[h.jsx("path",{d:"M12 22c-4.97 0-9-3.58-9-8 0-3.07 2.25-6.34 4.36-8.74C9.03 3.42 11 2 12 2c1 0 2.97 1.42 4.64 3.26C18.75 7.66 21 10.93 21 14c0 4.42-4.03 8-9 8z"}),h.jsx("path",{d:"M12 22c-1.66 0-3-1.79-3-4 0-1.48.84-3.2 1.7-4.3.5-.64 1.1-1.2 1.3-1.2s.8.56 1.3 1.2c.86 1.1 1.7 2.82 1.7 4.3 0 2.21-1.34 4-3 4z"})]}),np=()=>h.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":!0,children:[h.jsx(Hd,{cx:12,cy:12,r:12.5}),h.jsx(Hd,{cx:26,cy:25,r:7}),h.jsx(Hd,{cx:27,cy:6,r:4})]});function BE({children:t,onClick:i,disabled:a,mouseX:u,spring:m,distance:x,magnification:y,baseItemSize:b,ariaLabel:v,title:C}){const S=N.useRef(null),I=vf(u,L=>{var j;const B=(j=S.current)==null?void 0:j.getBoundingClientRect();return B?L-B.x-B.width/2:x+1}),_=vf(I,[-x,0,x],[b,y,b]),M=vE(_,m);return h.jsx(yt.div,{ref:S,style:{width:M,height:M,minWidth:b,minHeight:b},onClick:a?void 0:i,onKeyDown:L=>{(L.key==="Enter"||L.key===" ")&&!a&&(L.preventDefault(),i==null||i())},className:"app-dock-item",tabIndex:a?-1:0,role:"button","aria-disabled":!!a,"aria-label":v,title:C,children:t})}const FE={mass:.1,stiffness:1400,damping:30};function VE({items:t,panelHeight:i=68,baseItemSize:a=50,magnification:u=58,distance:m=200}){const x=mh(1/0);return h.jsx("div",{className:"app-dock-outer",children:h.jsx(yt.div,{className:"app-dock-panel",style:{minHeight:i},role:"toolbar","aria-label":"Application dock",onMouseMove:({pageX:y})=>x.set(y),onMouseLeave:()=>x.set(1/0),children:t.map((y,b)=>h.jsxs(BE,{onClick:y.onClick,disabled:y.disabled,mouseX:x,spring:FE,distance:m,magnification:u,baseItemSize:a,ariaLabel:y.label,title:y.title,children:[h.jsx("div",{className:"app-dock-icon",children:y.icon}),h.jsx("span",{className:"app-dock-label",children:y.label})]},b))})})}const UE=()=>{const[t,i]=N.useState(!1),[a,u]=N.useState(!1),[m,x]=N.useState(""),[y,b]=N.useState(""),[v,C]=N.useState(""),[S,I]=N.useState(null);Of();const{user:_,userProfile:M,checkAuth:L,permissions:B,emailVerified:j}=N.useContext(Hn),[z,V]=N.useState(null),[F,$]=N.useState(null),[Z,re]=N.useState([]),[X,Q]=N.useState(!1),[q,ge]=N.useState(null),[Ne,Ae]=N.useState(!1),[De,Ce]=N.useState(!1),G=Fn();hx(V,$);const[je,ye]=N.useState(!1);N.useRef(null);const fe=N.useRef(null),Ve=async(te=!1)=>{const Xe=_E();if(!Xe||!_){ge(null);return}if(ge(Xe),te||RE())try{const Pe=await bt(`/display_lobby_metadata?lobby_code=${Xe}`,{headers:{lobby_code:Xe}});if(Pe.ok){const $e=await Pe.json();$e.status==="error"||$e.lobby_state==="terminated"?(Dc(),ge(null)):kE()}else Pe.status===404&&(Dc(),ge(null))}catch(Pe){console.error("Error validating current lobby:",Pe)}},we=async()=>{if(_){Q(!0);try{const te=await bt("/view_my_active_lobbies");if(te.ok){const Xe=await te.json();console.log("User's active lobbies:",Xe),Xe&&Xe.lobbies&&Array.isArray(Xe.lobbies)?re(Xe.lobbies):re([])}else console.error("Failed to fetch user's active lobbies"),re([])}catch(te){console.error("Error fetching user's active lobbies:",te),re([])}finally{Q(!1)}}};N.useEffect(()=>{_?(we(),Ve(!0)):ge(null)},[_]),N.useEffect(()=>{L()},[]),N.useEffect(()=>{if(new URLSearchParams(window.location.search).get("showLobbyModal")==="true"&&_){u(!0);const Pe=window.location.pathname;window.history.replaceState({},"",Pe)}},[_]);const Y=te=>{(B==="admin"||B==="organizer")&&G(`/admin_lobby_view?code=${te}`)},le=te=>{te.preventDefault();const Pe=new FormData(te.target).get("name");if(!Pe||Pe.trim()===""){b("Please enter a lobby code");return}const $e=Pe.toLowerCase().replace(/[^a-z0-9]/g,"");if($e===""){b("Lobby code must contain only letters and numbers");return}C($e),u(!1),console.log($e),x($e),G(`/lobby?code=${$e}`),x(""),b("")},Te=()=>{ye(!1),fe.current&&(fe.current.clear(),fe.current=null)},Ge=()=>{if(!a)return null;const te=()=>{u(!1),x(""),b(""),Te()};return h.jsx("div",{className:"qr-instruction-overlay",onClick:te,children:h.jsxs("div",{className:"qr-instruction-container",onClick:Xe=>Xe.stopPropagation(),children:[h.jsx("button",{onClick:te,className:"qr-modal-close","aria-label":"Close",children:""}),h.jsx("h2",{className:"qr-instruction-title",children:"Enter Lobby Code"}),h.jsx("p",{className:"qr-instruction-text",children:"Ask your host for the lobby code if you don't have it."}),h.jsxs("form",{onSubmit:le,className:"qr-code-form",children:[h.jsxs("div",{className:"qr-input-container",children:[h.jsx("input",{type:"text",name:"name",placeholder:"Lobby code",className:"qr-code-input",pattern:"[a-zA-Z0-9]+",title:"Only letters and numbers are allowed",autoComplete:"off",autoCapitalize:"none",required:!0}),y&&h.jsx("div",{className:"qr-error-message",children:y})]}),h.jsx("button",{type:"submit",className:"qr-instruction-primary qr-submit-button",children:"Join"})]})]})})},be=()=>{if(!Ne)return null;const te=()=>{Ae(!1),u(!0)};return h.jsx("div",{className:"qr-instruction-overlay",onClick:()=>Ae(!1),children:h.jsxs("div",{className:"qr-instruction-container",onClick:Xe=>Xe.stopPropagation(),children:[h.jsx("button",{onClick:()=>Ae(!1),className:"qr-modal-close","aria-label":"Close",children:""}),h.jsx("div",{className:"qr-instruction-icon",children:h.jsxs("svg",{width:"56",height:"56",viewBox:"0 0 24 24",fill:"none",children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"qrIconGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[h.jsx("stop",{offset:"0%",stopColor:"#144dff"}),h.jsx("stop",{offset:"100%",stopColor:"#8b5cf6"})]})}),h.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1",fill:"url(#qrIconGradient)"}),h.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"1",fill:"url(#qrIconGradient)"}),h.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",fill:"url(#qrIconGradient)"}),h.jsx("rect",{x:"14",y:"14",width:"3",height:"3",rx:"0.5",fill:"url(#qrIconGradient)"}),h.jsx("rect",{x:"18",y:"14",width:"3",height:"3",rx:"0.5",fill:"url(#qrIconGradient)"}),h.jsx("rect",{x:"14",y:"18",width:"3",height:"3",rx:"0.5",fill:"url(#qrIconGradient)"}),h.jsx("rect",{x:"18",y:"18",width:"3",height:"3",rx:"0.5",fill:"url(#qrIconGradient)"})]})}),h.jsx("h2",{className:"qr-instruction-title",children:"Open your camera app and scan the QR code provided by your host"}),h.jsx("p",{className:"qr-instruction-text",children:"Don't worry, the app will remember your matches if you are still logged in."}),h.jsxs("div",{className:"qr-instruction-buttons",children:[h.jsx("button",{className:"qr-instruction-secondary",onClick:te,children:"Can't find QR"}),h.jsx("button",{className:"qr-instruction-primary",onClick:()=>Ae(!1),children:"Got it"})]})]})})};return N.useEffect(()=>{if(!De)return;const te=Xe=>{!Xe.target.closest(".app-dock-outer")&&!Xe.target.closest(".app-dock-expand-logout")&&Ce(!1)};return document.addEventListener("mousedown",te),()=>document.removeEventListener("mousedown",te)},[De]),h.jsxs("div",{style:{position:"relative",height:"var(--viewport-height)",overflow:"hidden"},children:[h.jsxs("video",{className:"background-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,poster:"/assets/demo_app_home_video_cover.jpg",children:[h.jsx("source",{src:"/assets/demo_app_home_video_X2_small.mp4",type:"video/mp4"}),h.jsx("source",{src:"/assets/app_home_video_2.webm",type:"video/webm"}),h.jsx("img",{src:"/assets/demo_app_home_video_cover.jpg",alt:"Background fallback",style:{width:"100%",height:"100%",objectFit:"cover"}}),"Your browser does not support the video tag."]}),h.jsxs("div",{style:{position:"relative",zIndex:1,color:"white",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[h.jsx("div",{style:{position:"absolute",top:"0",left:"50%",transform:"translateX(-50%)"},children:h.jsx("img",{src:"/assets/reuneo_test_11.png",alt:"Logo",style:{width:"100px",height:"100px",objectFit:"contain"}})}),h.jsx("div",{style:{marginTop:"10%",display:"flex",flexDirection:"column"},children:h.jsx(Vw,{user:_,onProfileClick:()=>i(!0)})}),h.jsx("div",{style:{position:"absolute",top:"85px",display:"none",justifyContent:"flex-end",width:"94%",left:"3%",alignItems:"center"},children:(B==="admin"||B==="organizer")&&h.jsx("button",{className:"login-button",onClick:()=>G("/organizer-account-details"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:te=>{te.currentTarget.style.transform="translateY(-2px)",te.currentTarget.style.boxShadow="0 2px 8px rgba(74, 58, 58, 0.7)"},onMouseLeave:te=>{te.currentTarget.style.transform="translateY(0)",te.currentTarget.style.boxShadow="0 0 4px rgba(74, 58, 58, 0.5)"},children:h.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Settings"})})}),(B==="admin"||B==="organizer")&&_==="topaz"&&h.jsx("div",{style:{position:"absolute",top:"120px",right:"20px",zIndex:10},children:h.jsx("button",{className:"master-lobbies-button",onClick:()=>G("/master_lobby_view"),children:"Lobbies"})}),t&&h.jsx(cy,{onSubmit:te=>{i(!1)},onClose:()=>i(!1),existingProfile:M}),B!=="admin"&&B!=="organizer"&&!q?h.jsx("div",{style:{position:"fixed",top:"46%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10,display:"flex",justifyContent:"center",alignItems:"center"},children:h.jsxs("div",{className:"app-dock-item-standalone",onClick:()=>window.location.href="https://reuneo.app/become-an-organizer",onKeyDown:te=>{(te.key==="Enter"||te.key===" ")&&(te.preventDefault(),window.location.href="https://reuneo.app/become-an-organizer")},tabIndex:0,role:"button","aria-label":"Organizer",children:[h.jsx("div",{className:"app-dock-icon",children:h.jsx(np,{})}),h.jsx("span",{className:"app-dock-label",children:"Create"})]})}):Z.length===0&&(B==="admin"||B==="organizer")?h.jsx("div",{style:{position:"fixed",top:"46%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10,display:"flex",justifyContent:"center",alignItems:"center"},children:h.jsxs("div",{className:"app-dock-item-standalone",onClick:()=>G("/create_lobby"),onKeyDown:te=>{(te.key==="Enter"||te.key===" ")&&(te.preventDefault(),G("/create_lobby"))},tabIndex:0,role:"button","aria-label":"Create Lobby",children:[h.jsx("div",{className:"app-dock-icon",children:h.jsx(np,{})}),h.jsx("span",{className:"app-dock-label",children:"Create"})]})}):null,h.jsx("div",{style:{position:"absolute",left:"50%",width:"90%",maxWidth:"1200px",textAlign:"center",marginLeft:"auto",marginRight:"auto",zIndex:1,top:"130px",transform:"translateX(-50%)"},children:_?h.jsx("h2",{className:"welcome-header",style:{color:"#ffffff",fontSize:"1rem",textTransform:"uppercase",letterSpacing:"0.1em",textShadow:"4px 4px 8px rgba(0,0,0,0.9)",margin:0},children:_&&M&&(B==="admin"||B==="organizer")?(()=>{const te="Create a Lobby",Xe=M?M.name.slice(0,15):"";return h.jsxs(h.Fragment,{children:[te.split("").map((Pe,$e)=>h.jsx("span",{style:{"--i":$e+1,marginRight:Pe===" "?"0.5em":"1px"},children:Pe},`main-${$e}`)),h.jsx("br",{}),Xe&&Xe.split("").map((Pe,$e)=>h.jsx("span",{style:{"--i":$e+1,marginRight:Pe===" "?"0.5em":"1px"},children:Pe},`name-${$e}`))]})})():(()=>{const te="Join the Experience",Xe=M?M.name.slice(0,15):"";return h.jsxs(h.Fragment,{children:[te.split("").map((Pe,$e)=>h.jsx("span",{style:{"--i":$e+1,marginRight:Pe===" "?"0.5em":"1px"},children:Pe},`main-${$e}`)),h.jsx("br",{}),Xe&&Xe.split("").map((Pe,$e)=>h.jsx("span",{style:{"--i":$e+1,marginRight:Pe===" "?"0.5em":"1px"},children:Pe},`name-${$e}`))]})})()}):null}),h.jsx("div",{style:{position:"absolute",bottom:"40px",left:"50%",transform:"translateX(-50%)",width:"94%",display:"flex",flexDirection:"row",justifyContent:"center",gap:"1.5rem"},children:h.jsx("div",{className:"event-item",style:{width:"auto",maxWidth:"none",margin:"0",padding:"10px 20px",borderRadius:"16px",marginBottom:"20px",cursor:"pointer",opacity:1,display:"flex",flexDirection:"row",alignItems:"center",gap:"1.5rem",":hover":{transform:"translateY(-5px)"}},children:h.jsx("div",{style:{display:"flex",gap:"1.5rem",flexDirection:"row",alignItems:"center"},children:h.jsxs("div",{style:{position:"relative"},children:[h.jsx(VE,{panelHeight:88,baseItemSize:65,magnification:75,distance:200,items:[{icon:h.jsx(ME,{}),label:"Join Lobby",onClick:()=>Ae(!0),disabled:z===null||F==="terminate",title:z===null||F==="terminate"?F==="terminate"?"Lobby closed":"Lobby loading":void 0},..._?[{icon:h.jsx(jE,{}),label:"Matches",onClick:()=>G("/paired-player-history"),disabled:!1},{icon:h.jsx(DE,{}),label:"Profile",onClick:()=>{De?(Ce(!1),i(!0)):Ce(!0)},disabled:!1}]:[{icon:h.jsx(OE,{}),label:"Login",onClick:()=>G("/login"),disabled:!1}]]}),h.jsx(cr,{children:De&&_&&h.jsxs(yt.div,{className:"app-dock-expand-logout",initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.8},transition:{duration:.1,ease:"easeOut"},onClick:()=>{G("/logout"),Ce(!1)},onKeyDown:te=>{(te.key==="Enter"||te.key===" ")&&(te.preventDefault(),G("/logout"),Ce(!1))},tabIndex:0,role:"button","aria-label":"Logout",children:[h.jsx("div",{className:"app-dock-icon",children:h.jsx(LE,{})}),h.jsx("span",{className:"app-dock-label",children:"Logout"})]})})]})})})}),q&&!((B==="admin"||B==="organizer")&&Z.length>0)&&h.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"85%",maxWidth:"280px",display:"flex",justifyContent:"center",alignItems:"center",zIndex:10,transition:"all 0.3s ease"},children:h.jsxs("div",{onClick:()=>G(`/lobby?code=${q}`),style:{width:"100%",background:"linear-gradient(145deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05))",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRadius:"24px",border:"1px solid rgba(255, 255, 255, 0.25)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2)",padding:"16px 20px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",flexDirection:"row",alignItems:"center",gap:"14px",overflow:"hidden"},onMouseEnter:te=>{te.currentTarget.style.transform="scale(1.02)",te.currentTarget.style.boxShadow="0 12px 40px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.3)",te.currentTarget.style.border="1px solid rgba(255, 255, 255, 0.4)"},onMouseLeave:te=>{te.currentTarget.style.transform="scale(1)",te.currentTarget.style.boxShadow="0 8px 32px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2)",te.currentTarget.style.border="1px solid rgba(255, 255, 255, 0.25)"},children:[h.jsxs("div",{style:{position:"relative",flexShrink:0},children:[h.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"50%",background:"linear-gradient(135deg, #144dff 0%, #8b5cf6 50%, #ec4899 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 15px rgba(20, 77, 255, 0.4)",animation:"pulse-glow 2s ease-in-out infinite"},children:h.jsx("span",{style:{color:"white",fontWeight:"800",fontSize:"1.1rem",textTransform:"uppercase"},children:q.charAt(0).toUpperCase()})}),h.jsx("div",{style:{position:"absolute",top:"-2px",right:"-2px",width:"14px",height:"14px",borderRadius:"50%",background:"#22c55e",border:"2px solid rgba(255, 255, 255, 0.9)",boxShadow:"0 0 8px rgba(34, 197, 94, 0.6)",animation:"pulse-dot 1.5s ease-in-out infinite"}})]}),h.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",gap:"2px"},children:[h.jsx("span",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.65rem",fontWeight:"600",letterSpacing:"0.02em"},children:"Return to your active lobby"}),h.jsx("span",{style:{color:"white",fontWeight:"700",fontSize:"1rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",textShadow:"0 2px 4px rgba(0, 0, 0, 0.3)"},children:q.length>15?q.slice(0,15)+"...":q})]}),h.jsx("div",{style:{flexShrink:0,width:"32px",height:"32px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},children:h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})})]})}),(B==="admin"||B==="organizer")&&Z.length>0&&h.jsx("div",{style:{position:"absolute",top:"calc(32% + 80px)",left:"50%",transform:"translateX(-50%)",width:"85%",maxWidth:"280px",display:"flex",justifyContent:"center",alignItems:"center",zIndex:10,transition:"all 0.3s ease"},children:X?h.jsx("div",{style:{textAlign:"center",color:"white"},children:h.jsx("p",{children:"Loading your lobbies..."})}):Z.length>0?h.jsxs("div",{className:"admin-lobby-tile",onClick:()=>Y(Z[0]),children:[h.jsxs("div",{className:"admin-lobby-tile-icon",children:[h.jsx("div",{className:"admin-lobby-tile-icon-circle",children:h.jsx("span",{children:Z[0]&&Z[0].length>0?Z[0].charAt(0).toUpperCase():"?"})}),h.jsx("div",{className:"admin-lobby-tile-live-dot"})]}),h.jsxs("div",{className:"admin-lobby-tile-content",children:[h.jsx("span",{className:"admin-lobby-tile-subtitle",children:"Manage your active lobby"}),h.jsx("span",{className:"admin-lobby-tile-title",children:Z[0]&&Z[0].length>15?Z[0].slice(0,15)+"...":Z[0]})]}),h.jsx("div",{className:"admin-lobby-tile-arrow",children:h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})})]}):null})]}),h.jsx(Ge,{}),h.jsx(be,{})]})};function zE(){const{pathname:t}=Pr();return N.useEffect(()=>{window.scrollTo(0,0)},[t]),null}function WE(){const{pathname:t}=Pr(),i=t.startsWith("/organizer-dashboard");return N.useEffect(()=>{const a=document.getElementById("root"),u=document.body;return i?(a==null||a.classList.add("dashboard-view"),u==null||u.classList.add("dashboard-view")):(a==null||a.classList.remove("dashboard-view"),u==null||u.classList.remove("dashboard-view")),()=>{a==null||a.classList.remove("dashboard-view"),u==null||u.classList.remove("dashboard-view")}},[t,i]),null}const HE=()=>{const{login:t,signup:i,user:a,logout:u,checkAuth:m}=N.useContext(Hn),[x,y]=N.useState(""),[b,v]=N.useState(""),[C,S]=N.useState(""),[I,_]=N.useState(""),[M,L]=N.useState(!0),[B,j]=N.useState({}),[z,V]=N.useState(!1),[F,$]=N.useState(""),Z=Fn(),[re]=kp();N.useEffect(()=>{re.get("error")==="invalid_or_expired_link"&&($("Your login link has expired or is invalid. Please request a new one."),window.history.replaceState({},"","/login"))},[re]);const X=Ne=>{const Ae=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,De=/^[a-z0-9]+$/;return Ne.length>=2&&(Ae.test(Ne)||De.test(Ne))},Q=Ne=>{const Ae=Ne.target.value.toLowerCase().replace(/[^a-z0-9@._\-]/g,"");y(Ae);const De=Ae.includes("@");Ae.length>0&&!De?V(!0):V(!1),X(Ae)?j(Ce=>({...Ce,username:""})):j(Ce=>({...Ce,username:" "}))},q=Ne=>{v(Ne.target.value)},ge=async Ne=>{if(Ne.preventDefault(),_(""),!X(x)){_("Please enter a valid email or username");return}try{const De=await bt(M?"/login":"/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:x,password:b})});if(De.ok){const Ce=await De.json();t(Ce),m(),Z("/")}else{const Ce=await De.json();_(Ce.message||`${M?"Login":"Signup"} failed`)}}catch(Ae){_("Network error occurred. Please try again."),console.error("Error:",Ae)}};return h.jsxs("div",{className:"login-container",children:[h.jsx("button",{onClick:()=>Z("/"),className:"homescreen-button",children:"Home"}),h.jsx("img",{src:"/assets/reuneo_test_11.png",alt:"Reunio Logo",className:"logo-image"}),h.jsx("h1",{className:"login-header",children:"Login"}),h.jsxs("div",{className:"login-signup-form",children:[F&&h.jsx("div",{className:"error-message",style:{backgroundColor:"rgba(255, 107, 107, 0.1)",border:"1px solid rgba(255, 107, 107, 0.3)",padding:"12px 16px",borderRadius:"8px",marginBottom:"16px"},children:F}),I&&h.jsx("div",{className:"error-message",children:I}),h.jsxs("form",{onSubmit:ge,children:[h.jsxs("div",{className:"form-group",children:[h.jsx("input",{type:"text",placeholder:"email or username",className:"login-input",value:x,onChange:Q,required:!0,autoComplete:"email"}),z&&h.jsx("div",{className:"step-success",children:"or username (lowercase letters and numbers)"})]}),h.jsx("div",{className:"form-group",children:h.jsx("input",{type:"password",placeholder:"password",className:"login-input",value:b,onChange:q,required:!0,autoComplete:"current-password"})}),h.jsx("button",{type:"submit",className:"login-primary-button",children:"Login"})]}),h.jsx("button",{type:"button",onClick:()=>Z("/forgot-password"),className:"forgot-password-link",children:"Forgot password?"})]})]})},GE=()=>{const t=Fn(),{logout:i}=N.useContext(Hn);return localStorage.removeItem("access_token"),N.useEffect(()=>{console.log("LogoutPage useEffect"),setTimeout(()=>{i(),t("/")},100)},[]),h.jsx("div",{children:"Logged out redirecting to homescreen"})};var XE=Object.defineProperty,Lc=Object.getOwnPropertySymbols,mx=Object.prototype.hasOwnProperty,px=Object.prototype.propertyIsEnumerable,rp=(t,i,a)=>i in t?XE(t,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[i]=a,Cf=(t,i)=>{for(var a in i||(i={}))mx.call(i,a)&&rp(t,a,i[a]);if(Lc)for(var a of Lc(i))px.call(i,a)&&rp(t,a,i[a]);return t},bf=(t,i)=>{var a={};for(var u in t)mx.call(t,u)&&i.indexOf(u)<0&&(a[u]=t[u]);if(t!=null&&Lc)for(var u of Lc(t))i.indexOf(u)<0&&px.call(t,u)&&(a[u]=t[u]);return a};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var uo;(t=>{const i=class Ft{constructor(v,C,S,I){if(this.version=v,this.errorCorrectionLevel=C,this.modules=[],this.isFunction=[],v<Ft.MIN_VERSION||v>Ft.MAX_VERSION)throw new RangeError("Version value out of range");if(I<-1||I>7)throw new RangeError("Mask value out of range");this.size=v*4+17;let _=[];for(let L=0;L<this.size;L++)_.push(!1);for(let L=0;L<this.size;L++)this.modules.push(_.slice()),this.isFunction.push(_.slice());this.drawFunctionPatterns();const M=this.addEccAndInterleave(S);if(this.drawCodewords(M),I==-1){let L=1e9;for(let B=0;B<8;B++){this.applyMask(B),this.drawFormatBits(B);const j=this.getPenaltyScore();j<L&&(I=B,L=j),this.applyMask(B)}}m(0<=I&&I<=7),this.mask=I,this.applyMask(I),this.drawFormatBits(I),this.isFunction=[]}static encodeText(v,C){const S=t.QrSegment.makeSegments(v);return Ft.encodeSegments(S,C)}static encodeBinary(v,C){const S=t.QrSegment.makeBytes(v);return Ft.encodeSegments([S],C)}static encodeSegments(v,C,S=1,I=40,_=-1,M=!0){if(!(Ft.MIN_VERSION<=S&&S<=I&&I<=Ft.MAX_VERSION)||_<-1||_>7)throw new RangeError("Invalid value");let L,B;for(L=S;;L++){const F=Ft.getNumDataCodewords(L,C)*8,$=y.getTotalBits(v,L);if($<=F){B=$;break}if(L>=I)throw new RangeError("Data too long")}for(const F of[Ft.Ecc.MEDIUM,Ft.Ecc.QUARTILE,Ft.Ecc.HIGH])M&&B<=Ft.getNumDataCodewords(L,F)*8&&(C=F);let j=[];for(const F of v){a(F.mode.modeBits,4,j),a(F.numChars,F.mode.numCharCountBits(L),j);for(const $ of F.getData())j.push($)}m(j.length==B);const z=Ft.getNumDataCodewords(L,C)*8;m(j.length<=z),a(0,Math.min(4,z-j.length),j),a(0,(8-j.length%8)%8,j),m(j.length%8==0);for(let F=236;j.length<z;F^=253)a(F,8,j);let V=[];for(;V.length*8<j.length;)V.push(0);return j.forEach((F,$)=>V[$>>>3]|=F<<7-($&7)),new Ft(L,C,V,_)}getModule(v,C){return 0<=v&&v<this.size&&0<=C&&C<this.size&&this.modules[C][v]}getModules(){return this.modules}drawFunctionPatterns(){for(let S=0;S<this.size;S++)this.setFunctionModule(6,S,S%2==0),this.setFunctionModule(S,6,S%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const v=this.getAlignmentPatternPositions(),C=v.length;for(let S=0;S<C;S++)for(let I=0;I<C;I++)S==0&&I==0||S==0&&I==C-1||S==C-1&&I==0||this.drawAlignmentPattern(v[S],v[I]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(v){const C=this.errorCorrectionLevel.formatBits<<3|v;let S=C;for(let _=0;_<10;_++)S=S<<1^(S>>>9)*1335;const I=(C<<10|S)^21522;m(I>>>15==0);for(let _=0;_<=5;_++)this.setFunctionModule(8,_,u(I,_));this.setFunctionModule(8,7,u(I,6)),this.setFunctionModule(8,8,u(I,7)),this.setFunctionModule(7,8,u(I,8));for(let _=9;_<15;_++)this.setFunctionModule(14-_,8,u(I,_));for(let _=0;_<8;_++)this.setFunctionModule(this.size-1-_,8,u(I,_));for(let _=8;_<15;_++)this.setFunctionModule(8,this.size-15+_,u(I,_));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let v=this.version;for(let S=0;S<12;S++)v=v<<1^(v>>>11)*7973;const C=this.version<<12|v;m(C>>>18==0);for(let S=0;S<18;S++){const I=u(C,S),_=this.size-11+S%3,M=Math.floor(S/3);this.setFunctionModule(_,M,I),this.setFunctionModule(M,_,I)}}drawFinderPattern(v,C){for(let S=-4;S<=4;S++)for(let I=-4;I<=4;I++){const _=Math.max(Math.abs(I),Math.abs(S)),M=v+I,L=C+S;0<=M&&M<this.size&&0<=L&&L<this.size&&this.setFunctionModule(M,L,_!=2&&_!=4)}}drawAlignmentPattern(v,C){for(let S=-2;S<=2;S++)for(let I=-2;I<=2;I++)this.setFunctionModule(v+I,C+S,Math.max(Math.abs(I),Math.abs(S))!=1)}setFunctionModule(v,C,S){this.modules[C][v]=S,this.isFunction[C][v]=!0}addEccAndInterleave(v){const C=this.version,S=this.errorCorrectionLevel;if(v.length!=Ft.getNumDataCodewords(C,S))throw new RangeError("Invalid argument");const I=Ft.NUM_ERROR_CORRECTION_BLOCKS[S.ordinal][C],_=Ft.ECC_CODEWORDS_PER_BLOCK[S.ordinal][C],M=Math.floor(Ft.getNumRawDataModules(C)/8),L=I-M%I,B=Math.floor(M/I);let j=[];const z=Ft.reedSolomonComputeDivisor(_);for(let F=0,$=0;F<I;F++){let Z=v.slice($,$+B-_+(F<L?0:1));$+=Z.length;const re=Ft.reedSolomonComputeRemainder(Z,z);F<L&&Z.push(0),j.push(Z.concat(re))}let V=[];for(let F=0;F<j[0].length;F++)j.forEach(($,Z)=>{(F!=B-_||Z>=L)&&V.push($[F])});return m(V.length==M),V}drawCodewords(v){if(v.length!=Math.floor(Ft.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let C=0;for(let S=this.size-1;S>=1;S-=2){S==6&&(S=5);for(let I=0;I<this.size;I++)for(let _=0;_<2;_++){const M=S-_,B=(S+1&2)==0?this.size-1-I:I;!this.isFunction[B][M]&&C<v.length*8&&(this.modules[B][M]=u(v[C>>>3],7-(C&7)),C++)}}m(C==v.length*8)}applyMask(v){if(v<0||v>7)throw new RangeError("Mask value out of range");for(let C=0;C<this.size;C++)for(let S=0;S<this.size;S++){let I;switch(v){case 0:I=(S+C)%2==0;break;case 1:I=C%2==0;break;case 2:I=S%3==0;break;case 3:I=(S+C)%3==0;break;case 4:I=(Math.floor(S/3)+Math.floor(C/2))%2==0;break;case 5:I=S*C%2+S*C%3==0;break;case 6:I=(S*C%2+S*C%3)%2==0;break;case 7:I=((S+C)%2+S*C%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[C][S]&&I&&(this.modules[C][S]=!this.modules[C][S])}}getPenaltyScore(){let v=0;for(let _=0;_<this.size;_++){let M=!1,L=0,B=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[_][j]==M?(L++,L==5?v+=Ft.PENALTY_N1:L>5&&v++):(this.finderPenaltyAddHistory(L,B),M||(v+=this.finderPenaltyCountPatterns(B)*Ft.PENALTY_N3),M=this.modules[_][j],L=1);v+=this.finderPenaltyTerminateAndCount(M,L,B)*Ft.PENALTY_N3}for(let _=0;_<this.size;_++){let M=!1,L=0,B=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[j][_]==M?(L++,L==5?v+=Ft.PENALTY_N1:L>5&&v++):(this.finderPenaltyAddHistory(L,B),M||(v+=this.finderPenaltyCountPatterns(B)*Ft.PENALTY_N3),M=this.modules[j][_],L=1);v+=this.finderPenaltyTerminateAndCount(M,L,B)*Ft.PENALTY_N3}for(let _=0;_<this.size-1;_++)for(let M=0;M<this.size-1;M++){const L=this.modules[_][M];L==this.modules[_][M+1]&&L==this.modules[_+1][M]&&L==this.modules[_+1][M+1]&&(v+=Ft.PENALTY_N2)}let C=0;for(const _ of this.modules)C=_.reduce((M,L)=>M+(L?1:0),C);const S=this.size*this.size,I=Math.ceil(Math.abs(C*20-S*10)/S)-1;return m(0<=I&&I<=9),v+=I*Ft.PENALTY_N4,m(0<=v&&v<=2568888),v}getAlignmentPatternPositions(){if(this.version==1)return[];{const v=Math.floor(this.version/7)+2,C=this.version==32?26:Math.ceil((this.version*4+4)/(v*2-2))*2;let S=[6];for(let I=this.size-7;S.length<v;I-=C)S.splice(1,0,I);return S}}static getNumRawDataModules(v){if(v<Ft.MIN_VERSION||v>Ft.MAX_VERSION)throw new RangeError("Version number out of range");let C=(16*v+128)*v+64;if(v>=2){const S=Math.floor(v/7)+2;C-=(25*S-10)*S-55,v>=7&&(C-=36)}return m(208<=C&&C<=29648),C}static getNumDataCodewords(v,C){return Math.floor(Ft.getNumRawDataModules(v)/8)-Ft.ECC_CODEWORDS_PER_BLOCK[C.ordinal][v]*Ft.NUM_ERROR_CORRECTION_BLOCKS[C.ordinal][v]}static reedSolomonComputeDivisor(v){if(v<1||v>255)throw new RangeError("Degree out of range");let C=[];for(let I=0;I<v-1;I++)C.push(0);C.push(1);let S=1;for(let I=0;I<v;I++){for(let _=0;_<C.length;_++)C[_]=Ft.reedSolomonMultiply(C[_],S),_+1<C.length&&(C[_]^=C[_+1]);S=Ft.reedSolomonMultiply(S,2)}return C}static reedSolomonComputeRemainder(v,C){let S=C.map(I=>0);for(const I of v){const _=I^S.shift();S.push(0),C.forEach((M,L)=>S[L]^=Ft.reedSolomonMultiply(M,_))}return S}static reedSolomonMultiply(v,C){if(v>>>8||C>>>8)throw new RangeError("Byte out of range");let S=0;for(let I=7;I>=0;I--)S=S<<1^(S>>>7)*285,S^=(C>>>I&1)*v;return m(S>>>8==0),S}finderPenaltyCountPatterns(v){const C=v[1];m(C<=this.size*3);const S=C>0&&v[2]==C&&v[3]==C*3&&v[4]==C&&v[5]==C;return(S&&v[0]>=C*4&&v[6]>=C?1:0)+(S&&v[6]>=C*4&&v[0]>=C?1:0)}finderPenaltyTerminateAndCount(v,C,S){return v&&(this.finderPenaltyAddHistory(C,S),C=0),C+=this.size,this.finderPenaltyAddHistory(C,S),this.finderPenaltyCountPatterns(S)}finderPenaltyAddHistory(v,C){C[0]==0&&(v+=this.size),C.pop(),C.unshift(v)}};i.MIN_VERSION=1,i.MAX_VERSION=40,i.PENALTY_N1=3,i.PENALTY_N2=3,i.PENALTY_N3=40,i.PENALTY_N4=10,i.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],i.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=i;function a(b,v,C){if(v<0||v>31||b>>>v)throw new RangeError("Value out of range");for(let S=v-1;S>=0;S--)C.push(b>>>S&1)}function u(b,v){return(b>>>v&1)!=0}function m(b){if(!b)throw new Error("Assertion error")}const x=class _n{constructor(v,C,S){if(this.mode=v,this.numChars=C,this.bitData=S,C<0)throw new RangeError("Invalid argument");this.bitData=S.slice()}static makeBytes(v){let C=[];for(const S of v)a(S,8,C);return new _n(_n.Mode.BYTE,v.length,C)}static makeNumeric(v){if(!_n.isNumeric(v))throw new RangeError("String contains non-numeric characters");let C=[];for(let S=0;S<v.length;){const I=Math.min(v.length-S,3);a(parseInt(v.substring(S,S+I),10),I*3+1,C),S+=I}return new _n(_n.Mode.NUMERIC,v.length,C)}static makeAlphanumeric(v){if(!_n.isAlphanumeric(v))throw new RangeError("String contains unencodable characters in alphanumeric mode");let C=[],S;for(S=0;S+2<=v.length;S+=2){let I=_n.ALPHANUMERIC_CHARSET.indexOf(v.charAt(S))*45;I+=_n.ALPHANUMERIC_CHARSET.indexOf(v.charAt(S+1)),a(I,11,C)}return S<v.length&&a(_n.ALPHANUMERIC_CHARSET.indexOf(v.charAt(S)),6,C),new _n(_n.Mode.ALPHANUMERIC,v.length,C)}static makeSegments(v){return v==""?[]:_n.isNumeric(v)?[_n.makeNumeric(v)]:_n.isAlphanumeric(v)?[_n.makeAlphanumeric(v)]:[_n.makeBytes(_n.toUtf8ByteArray(v))]}static makeEci(v){let C=[];if(v<0)throw new RangeError("ECI assignment value out of range");if(v<128)a(v,8,C);else if(v<16384)a(2,2,C),a(v,14,C);else if(v<1e6)a(6,3,C),a(v,21,C);else throw new RangeError("ECI assignment value out of range");return new _n(_n.Mode.ECI,0,C)}static isNumeric(v){return _n.NUMERIC_REGEX.test(v)}static isAlphanumeric(v){return _n.ALPHANUMERIC_REGEX.test(v)}getData(){return this.bitData.slice()}static getTotalBits(v,C){let S=0;for(const I of v){const _=I.mode.numCharCountBits(C);if(I.numChars>=1<<_)return 1/0;S+=4+_+I.bitData.length}return S}static toUtf8ByteArray(v){v=encodeURI(v);let C=[];for(let S=0;S<v.length;S++)v.charAt(S)!="%"?C.push(v.charCodeAt(S)):(C.push(parseInt(v.substring(S+1,S+3),16)),S+=2);return C}};x.NUMERIC_REGEX=/^[0-9]*$/,x.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,x.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let y=x;t.QrSegment=x})(uo||(uo={}));(t=>{(i=>{const a=class{constructor(m,x){this.ordinal=m,this.formatBits=x}};a.LOW=new a(0,1),a.MEDIUM=new a(1,0),a.QUARTILE=new a(2,3),a.HIGH=new a(3,2),i.Ecc=a})(t.QrCode||(t.QrCode={}))})(uo||(uo={}));(t=>{(i=>{const a=class{constructor(m,x){this.modeBits=m,this.numBitsCharCount=x}numCharCountBits(m){return this.numBitsCharCount[Math.floor((m+7)/17)]}};a.NUMERIC=new a(1,[10,12,14]),a.ALPHANUMERIC=new a(2,[9,11,13]),a.BYTE=new a(4,[8,16,16]),a.KANJI=new a(8,[8,10,12]),a.ECI=new a(7,[0,0,0]),i.Mode=a})(t.QrSegment||(t.QrSegment={}))})(uo||(uo={}));var Ho=uo;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var YE={L:Ho.QrCode.Ecc.LOW,M:Ho.QrCode.Ecc.MEDIUM,Q:Ho.QrCode.Ecc.QUARTILE,H:Ho.QrCode.Ecc.HIGH},gx=128,xx="L",yx="#FFFFFF",wx="#000000",vx=!1,Cx=1,$E=4,ZE=0,KE=.1;function bx(t,i=0){const a=[];return t.forEach(function(u,m){let x=null;u.forEach(function(y,b){if(!y&&x!==null){a.push(`M${x+i} ${m+i}h${b-x}v1H${x+i}z`),x=null;return}if(b===u.length-1){if(!y)return;x===null?a.push(`M${b+i},${m+i} h1v1H${b+i}z`):a.push(`M${x+i},${m+i} h${b+1-x}v1H${x+i}z`);return}y&&x===null&&(x=b)})}),a.join("")}function Ex(t,i){return t.slice().map((a,u)=>u<i.y||u>=i.y+i.h?a:a.map((m,x)=>x<i.x||x>=i.x+i.w?m:!1))}function qE(t,i,a,u){if(u==null)return null;const m=t.length+a*2,x=Math.floor(i*KE),y=m/i,b=(u.width||x)*y,v=(u.height||x)*y,C=u.x==null?t.length/2-b/2:u.x*y,S=u.y==null?t.length/2-v/2:u.y*y,I=u.opacity==null?1:u.opacity;let _=null;if(u.excavate){let L=Math.floor(C),B=Math.floor(S),j=Math.ceil(b+C-L),z=Math.ceil(v+S-B);_={x:L,y:B,w:j,h:z}}const M=u.crossOrigin;return{x:C,y:S,h:v,w:b,excavation:_,opacity:I,crossOrigin:M}}function QE(t,i){return i!=null?Math.max(Math.floor(i),0):t?$E:ZE}function Sx({value:t,level:i,minVersion:a,includeMargin:u,marginSize:m,imageSettings:x,size:y,boostLevel:b}){let v=$t.useMemo(()=>{const L=(Array.isArray(t)?t:[t]).reduce((B,j)=>(B.push(...Ho.QrSegment.makeSegments(j)),B),[]);return Ho.QrCode.encodeSegments(L,YE[i],a,void 0,void 0,b)},[t,i,a,b]);const{cells:C,margin:S,numCells:I,calculatedImageSettings:_}=$t.useMemo(()=>{let M=v.getModules();const L=QE(u,m),B=M.length+L*2,j=qE(M,y,L,x);return{cells:M,margin:L,numCells:B,calculatedImageSettings:j}},[v,y,x,u,m]);return{qrcode:v,margin:S,cells:C,numCells:I,calculatedImageSettings:_}}var JE=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),eS=$t.forwardRef(function(i,a){const u=i,{value:m,size:x=gx,level:y=xx,bgColor:b=yx,fgColor:v=wx,includeMargin:C=vx,minVersion:S=Cx,boostLevel:I,marginSize:_,imageSettings:M}=u,B=bf(u,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:j}=B,z=bf(B,["style"]),V=M==null?void 0:M.src,F=$t.useRef(null),$=$t.useRef(null),Z=$t.useCallback(Ce=>{F.current=Ce,typeof a=="function"?a(Ce):a&&(a.current=Ce)},[a]),[re,X]=$t.useState(!1),{margin:Q,cells:q,numCells:ge,calculatedImageSettings:Ne}=Sx({value:m,level:y,minVersion:S,boostLevel:I,includeMargin:C,marginSize:_,imageSettings:M,size:x});$t.useEffect(()=>{if(F.current!=null){const Ce=F.current,G=Ce.getContext("2d");if(!G)return;let je=q;const ye=$.current,fe=Ne!=null&&ye!==null&&ye.complete&&ye.naturalHeight!==0&&ye.naturalWidth!==0;fe&&Ne.excavation!=null&&(je=Ex(q,Ne.excavation));const Ve=window.devicePixelRatio||1;Ce.height=Ce.width=x*Ve;const we=x/ge*Ve;G.scale(we,we),G.fillStyle=b,G.fillRect(0,0,ge,ge),G.fillStyle=v,JE?G.fill(new Path2D(bx(je,Q))):q.forEach(function(Y,le){Y.forEach(function(Te,Ge){Te&&G.fillRect(Ge+Q,le+Q,1,1)})}),Ne&&(G.globalAlpha=Ne.opacity),fe&&G.drawImage(ye,Ne.x+Q,Ne.y+Q,Ne.w,Ne.h)}}),$t.useEffect(()=>{X(!1)},[V]);const Ae=Cf({height:x,width:x},j);let De=null;return V!=null&&(De=$t.createElement("img",{src:V,key:V,style:{display:"none"},onLoad:()=>{X(!0)},ref:$,crossOrigin:Ne==null?void 0:Ne.crossOrigin})),$t.createElement($t.Fragment,null,$t.createElement("canvas",Cf({style:Ae,height:x,width:x,ref:Z,role:"img"},z)),De)});eS.displayName="QRCodeCanvas";var gh=$t.forwardRef(function(i,a){const u=i,{value:m,size:x=gx,level:y=xx,bgColor:b=yx,fgColor:v=wx,includeMargin:C=vx,minVersion:S=Cx,boostLevel:I,title:_,marginSize:M,imageSettings:L}=u,B=bf(u,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:j,cells:z,numCells:V,calculatedImageSettings:F}=Sx({value:m,level:y,minVersion:S,boostLevel:I,includeMargin:C,marginSize:M,imageSettings:L,size:x});let $=z,Z=null;L!=null&&F!=null&&(F.excavation!=null&&($=Ex(z,F.excavation)),Z=$t.createElement("image",{href:L.src,height:F.h,width:F.w,x:F.x+j,y:F.y+j,preserveAspectRatio:"none",opacity:F.opacity,crossOrigin:F.crossOrigin}));const re=bx($,j);return $t.createElement("svg",Cf({height:x,width:x,viewBox:`0 0 ${V} ${V}`,ref:a,role:"img"},B),!!_&&$t.createElement("title",null,_),$t.createElement("path",{fill:b,d:`M0,0 h${V}v${V}H0z`,shapeRendering:"crispEdges"}),$t.createElement("path",{fill:v,d:re,shapeRendering:"crispEdges"}),Z)});gh.displayName="QRCodeSVG";const tS=({player:t})=>h.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"350px",height:"500px",margin:"0 auto",position:"relative"},children:t!=null&&t.image_data?h.jsxs("div",{style:{position:"relative",width:"350px",height:"450px"},children:[h.jsx("img",{src:`data:image/jpeg;base64,${t.image_data}`,alt:t.name,style:{width:"350px",height:"450px",objectFit:"cover",borderRadius:"28px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.15)",margin:"auto",display:"block"},onError:i=>{console.error("Image failed to load:",i),i.target.style.display="none"}}),h.jsx("div",{style:{position:"absolute",bottom:"-6px",left:"1px",right:"1px",background:"linear-gradient(135deg, #42A5F5 0%, #2196F3 30%, #1976D2 70%, #1565C0 100%)",color:"white",padding:"14px 28px",borderRadius:"50px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',boxShadow:"0 4px 12px rgba(33, 150, 243, 0.25)",letterSpacing:"0.02em"},children:t.name})]}):h.jsxs("div",{style:{width:"350px",height:"450px",backgroundColor:"#f0f1f4",borderRadius:"28px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"relative",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[h.jsx("p",{style:{marginBottom:"60px",color:"#6b7280"},children:"No image available"}),h.jsx("div",{style:{position:"absolute",bottom:"-6px",left:"1px",right:"1px",background:"linear-gradient(135deg, #42A5F5 0%, #2196F3 30%, #1976D2 70%, #1565C0 100%)",color:"white",padding:"14px 28px",borderRadius:"50px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',boxShadow:"0 4px 12px rgba(33, 150, 243, 0.25)",letterSpacing:"0.02em"},children:t.name})]})});var ip=typeof window>"u"?N.useEffect:N.useLayoutEffect,nS=({isPlaying:t,duration:i,startAt:a=0,updateInterval:u=0,onComplete:m,onUpdate:x})=>{let[y,b]=N.useState(a),v=N.useRef(0),C=N.useRef(a),S=N.useRef(a*-1e3),I=N.useRef(null),_=N.useRef(null),M=N.useRef(null),L=z=>{let V=z/1e3;if(_.current===null){_.current=V,I.current=requestAnimationFrame(L);return}let F=V-_.current,$=v.current+F;_.current=V,v.current=$;let Z=C.current+(u===0?$:($/u|0)*u),re=C.current+$,X=typeof i=="number"&&re>=i;b(X?i:Z),X||(I.current=requestAnimationFrame(L))},B=()=>{I.current&&cancelAnimationFrame(I.current),M.current&&clearTimeout(M.current),_.current=null},j=N.useCallback(z=>{B(),v.current=0;let V=typeof z=="number"?z:a;C.current=V,b(V),t&&(I.current=requestAnimationFrame(L))},[t,a]);return ip(()=>{if(x==null||x(y),i&&y>=i){S.current+=i*1e3;let{shouldRepeat:z=!1,delay:V=0,newStartAt:F}=(m==null?void 0:m(S.current/1e3))||{};z&&(M.current=setTimeout(()=>j(F),V*1e3))}},[y,i]),ip(()=>(t&&(I.current=requestAnimationFrame(L)),B),[t,i,u]),{elapsedTime:y,reset:j}},rS=(t,i,a)=>{let u=t/2,m=i/2,x=u-m,y=2*x,b=a==="clockwise"?"1,0":"0,1",v=2*Math.PI*x;return{path:`m ${u},${m} a ${x},${x} 0 ${b} 0,${y} a ${x},${x} 0 ${b} 0,-${y}`,pathLength:v}},sp=(t,i)=>t===0||t===i?0:typeof i=="number"?t-i:0,iS=t=>({position:"relative",width:t,height:t}),sS={display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,top:0,width:"100%",height:"100%"},Ax=(t,i,a,u,m)=>{if(u===0)return i;let x=(m?u-t:t)/u;return i+a*x},op=t=>{var i,a;return(a=(i=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(u,m,x,y)=>`#${m}${m}${x}${x}${y}${y}`).substring(1).match(/.{2}/g))==null?void 0:i.map(u=>parseInt(u,16)))!=null?a:[]},oS=(t,i)=>{var a;let{colors:u,colorsTime:m,isSmoothColorTransition:x=!0}=t;if(typeof u=="string")return u;let y=(a=m==null?void 0:m.findIndex((_,M)=>_>=i&&i>=m[M+1]))!=null?a:-1;if(!m||y===-1)return u[0];if(!x)return u[y];let b=m[y]-i,v=m[y]-m[y+1],C=op(u[y]),S=op(u[y+1]),I=!!t.isGrowing;return`rgb(${C.map((_,M)=>Ax(b,_,S[M]-_,v,I)|0).join(",")})`},aS=t=>{let{duration:i,initialRemainingTime:a,updateInterval:u,size:m=180,strokeWidth:x=12,trailStrokeWidth:y,isPlaying:b=!1,isGrowing:v=!1,rotation:C="clockwise",onComplete:S,onUpdate:I}=t,_=N.useRef(),M=Math.max(x,y??0),{path:L,pathLength:B}=rS(m,M,C),{elapsedTime:j}=nS({isPlaying:b,duration:i,startAt:sp(i,a),updateInterval:u,onUpdate:typeof I=="function"?V=>{let F=Math.ceil(i-V);F!==_.current&&(_.current=F,I(F))}:void 0,onComplete:typeof S=="function"?V=>{var F;let{shouldRepeat:$,delay:Z,newInitialRemainingTime:re}=(F=S(V))!=null?F:{};if($)return{shouldRepeat:$,delay:Z,newStartAt:sp(i,re)}}:void 0}),z=i-j;return{elapsedTime:j,path:L,pathLength:B,remainingTime:Math.ceil(z),rotation:C,size:m,stroke:oS(t,z),strokeDashoffset:Ax(j,0,B,i,v),strokeWidth:x}},xh=t=>{let{children:i,strokeLinecap:a,trailColor:u,trailStrokeWidth:m}=t,{path:x,pathLength:y,stroke:b,strokeDashoffset:v,remainingTime:C,elapsedTime:S,size:I,strokeWidth:_}=aS(t);return $t.createElement("div",{style:iS(I)},$t.createElement("svg",{viewBox:`0 0 ${I} ${I}`,width:I,height:I,xmlns:"http://www.w3.org/2000/svg"},$t.createElement("path",{d:x,fill:"none",stroke:u??"#d9d9d9",strokeWidth:m??_}),$t.createElement("path",{d:x,fill:"none",stroke:b,strokeLinecap:a??"round",strokeWidth:_,strokeDasharray:y,strokeDashoffset:v})),typeof i=="function"&&$t.createElement("div",{style:sS},i({remainingTime:C,elapsedTime:S,color:b})))};xh.displayName="CountdownCircleTimer";const lS=({onComplete:t})=>{const[i,a]=N.useState(7),u=N.useRef(null);N.useEffect(()=>(u.current&&clearInterval(u.current),u.current=setInterval(()=>{a(b=>b<=1?(clearInterval(u.current),t&&setTimeout(t,400),0):b-1)},1e3),()=>{u.current&&clearInterval(u.current)}),[t]);const m=i/7,x=2*Math.PI*120,y=x*(1-m);return h.jsxs("div",{className:"lobby-countdown-overlay",children:[h.jsx("div",{className:"countdown-bg-gradient"}),h.jsxs("div",{className:"countdown-floating-orbs",children:[h.jsx("div",{className:"orb orb-1"}),h.jsx("div",{className:"orb orb-2"}),h.jsx("div",{className:"orb orb-3"}),h.jsx("div",{className:"orb orb-4"})]}),h.jsxs("div",{className:"lobby-countdown-content",children:[h.jsxs("svg",{className:"countdown-ring",viewBox:"0 0 260 260",children:[h.jsx("circle",{className:"countdown-ring-bg",cx:"130",cy:"130",r:"120",fill:"none",strokeWidth:"6"}),h.jsx(yt.circle,{className:"countdown-ring-progress",cx:"130",cy:"130",r:"120",fill:"none",strokeWidth:"6",strokeLinecap:"round",strokeDasharray:x,initial:{strokeDashoffset:0},animate:{strokeDashoffset:y},transition:{duration:.8,ease:"easeInOut"}})]}),h.jsx("div",{className:"countdown-number-container",children:h.jsx(cr,{mode:"popLayout",children:h.jsx(yt.div,{className:"lobby-countdown-number",initial:{scale:.5,opacity:0,filter:"blur(10px)",y:40},animate:{scale:1,opacity:1,filter:"blur(0px)",y:0},exit:{scale:1.5,opacity:0,filter:"blur(8px)",y:-30},transition:{duration:.5,ease:[.16,1,.3,1]},children:i},i)})}),h.jsx(yt.div,{className:"lobby-countdown-text",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.5},children:i>0?"Get ready!":"Starting..."})]}),h.jsx(cr,{children:h.jsx(yt.div,{className:"countdown-pulse",initial:{scale:.8,opacity:.5},animate:{scale:2.5,opacity:0},transition:{duration:1,ease:"easeOut"}},i)})]})},cS=({isActive:t})=>{const[i,a]=N.useState(0),u=N.useRef(null);N.useEffect(()=>{if(!t)return;let y=null;const b=4e3,v=C=>{y===null&&(y=C);const S=C-y,I=Math.min(S/b,1);a(I),I<1&&(u.current=requestAnimationFrame(v))};return u.current=requestAnimationFrame(v),()=>{u.current&&cancelAnimationFrame(u.current)}},[t]);const m=Math.round(i*100),x=i*100;return h.jsxs("div",{className:"slide2-layout",children:[h.jsxs("h2",{className:"slide2-header",children:["Raise your volume to 100%",h.jsx("span",{className:"slide2-header-sub",children:"You need this to know when you've matched."})]}),h.jsxs("div",{className:"slide2-content",children:[h.jsx("div",{className:"slide2-arrow-section",children:h.jsxs("div",{className:"slide2-chevron-group",children:[h.jsx("svg",{className:"slide2-chevron slide2-chevron-1",width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",children:h.jsx("path",{d:"M15 18L9 12L15 6",stroke:"#4b73ef",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),h.jsx("svg",{className:"slide2-chevron slide2-chevron-2",width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",children:h.jsx("path",{d:"M15 18L9 12L15 6",stroke:"#4b73ef",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),h.jsx("svg",{className:"slide2-chevron slide2-chevron-3",width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",children:h.jsx("path",{d:"M15 18L9 12L15 6",stroke:"#4b73ef",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})]})}),h.jsxs("div",{className:"slide2-slider-section",children:[h.jsxs("svg",{className:"slide2-volume-icon",width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",children:[h.jsx("path",{d:"M11 5L6 9H2v6h4l5 4V5z",fill:"#4b73ef",stroke:"#4b73ef",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),h.jsx("path",{d:"M19.07 4.93a10 10 0 010 14.14M15.54 8.46a5 5 0 010 7.07",stroke:"#4b73ef",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),h.jsx("div",{className:`slide2-number ${i>=1?"slide2-number-complete":""}`,children:m}),h.jsx("div",{className:"slide2-track",children:h.jsx("div",{className:"slide2-track-bg",children:h.jsx("div",{className:`slide2-track-fill ${i>=1?"slide2-fill-complete":""}`,style:{height:`${x}%`}})})}),h.jsxs("svg",{className:"slide2-volume-icon",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",children:[h.jsx("path",{d:"M11 5L6 9H2v6h4l5 4V5z",fill:"#4b73ef",stroke:"#4b73ef",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),h.jsx("line",{x1:"23",y1:"9",x2:"17",y2:"15",stroke:"#4b73ef",strokeWidth:"2",strokeLinecap:"round"}),h.jsx("line",{x1:"17",y1:"9",x2:"23",y2:"15",stroke:"#4b73ef",strokeWidth:"2",strokeLinecap:"round"})]})]})]})]})},uS=({isActive:t,onPauseClicked:i})=>{const a=N.useRef(null),u=N.useRef(null),m=N.useRef(null),x=N.useRef(null),y=N.useRef(null),b=N.useRef({x:0,y:0}),v=N.useRef({x:0,y:0});return N.useEffect(()=>{if(!t)return;const C=()=>{if(!a.current||!u.current||!m.current)return;const j=a.current.getBoundingClientRect(),z=u.current.getBoundingClientRect(),V=m.current.getBoundingClientRect();b.current={x:(z.left+z.right)/2-j.left,y:z.bottom-j.top+12},v.current={x:(V.left+V.right)/2-j.left,y:(V.top+V.bottom)/2-j.top}},S=(j,z,V)=>j+(z-j)*V,I=j=>j<.5?2*j*j:-1+(4-2*j)*j;let _=null;const M=3500,L=j=>{if(!x.current){y.current=requestAnimationFrame(L);return}_===null&&(_=j);const V=(j-_)%M/M,F=b.current.x,$=b.current.y,Z=v.current.x,re=v.current.y;let X,Q,q,ge;if(V<=.35){const Ne=I(V/.35);X=S(F,Z,Ne),Q=S($,re,Ne),q=1,ge=S(0,10,Ne)}else if(V<=.45)X=Z,Q=re,q=S(1,.8,(V-.35)/.1),ge=10;else if(V<=.55)X=Z,Q=re,q=S(.8,1,(V-.45)/.1),ge=10;else if(V<=.9){const Ne=I((V-.55)/.35);X=S(Z,F,Ne),Q=S(re,$,Ne),q=1,ge=S(10,0,Ne)}else X=F,Q=$,q=1,ge=0;x.current.style.left=`${X}px`,x.current.style.top=`${Q}px`,x.current.style.transform=`translate(-50%, -50%) rotate(${ge}deg) scale(${q})`,y.current=requestAnimationFrame(L)},B=setTimeout(()=>{C(),y.current=requestAnimationFrame(L)},50);return window.addEventListener("resize",C),()=>{clearTimeout(B),y.current&&cancelAnimationFrame(y.current),window.removeEventListener("resize",C)}},[t]),h.jsxs("div",{className:"slide3-layout",ref:a,children:[h.jsxs("div",{className:"slide3-top-content",children:[h.jsx("h2",{className:"slide3-header",children:"Click 'Pause' to take a break or leave."}),h.jsx("span",{className:"slide3-subheader",ref:u,children:"You can rejoin at any time."})]}),h.jsxs("div",{className:"slide3-phone-frame",children:[h.jsx("button",{className:"slide3-mock-pause",ref:m,onClick:i,children:"Pause"}),h.jsx("span",{className:"slide3-tap-hint",children:"Tap here to continue"}),h.jsx("img",{src:"/assets/stock-woman-cropped.png",alt:"Profile example",className:"slide3-phone-image"})]}),t&&h.jsx("div",{className:"slide3-finger-cursor",ref:x,children:h.jsx("svg",{width:"30",height:"30",viewBox:"0 0 24 24",fill:"none",children:h.jsx("path",{d:"M11.5 2A1.5 1.5 0 0 0 10 3.5V12l-2.3-2.3a1.5 1.5 0 0 0-2.12 2.12l5.16 5.16A4.5 4.5 0 0 0 13.92 18.5h1.58A3.5 3.5 0 0 0 19 15V8a1.5 1.5 0 0 0-3 0v-.5a1.5 1.5 0 0 0-3 0V7a1.5 1.5 0 0 0-3 0V3.5A1.5 1.5 0 0 0 11.5 2z",fill:"#4b73ef",opacity:"0.9"})})})]})},dS=({onComplete:t,lobbyCode:i="this"})=>{const{userProfile:a}=N.useContext(Hn),[u,m]=N.useState(0),[x,y]=N.useState(!1),[b,v]=N.useState(!1),[C,S]=N.useState([0]),[I,_]=N.useState(!1),[M,L]=N.useState(!1),[B,j]=N.useState(!1),z=N.useRef(null),V=N.useRef(null),F=N.useRef(!1),$=N.useRef(t);$.current=t;const Z=()=>{F.current||(F.current=!0,$.current&&$.current())},re=()=>{F.current||(z.current&&clearInterval(z.current),V.current&&clearTimeout(V.current),L(!0),setTimeout(()=>{j(!0),setTimeout(()=>{Z()},1500)},500))},X=[{duration:2e3},{customSlide:!0,duration:4e3},{customSlide:!0,duration:1e4}];return N.useEffect(()=>{const Q=()=>{if(u>=X.length-1){clearInterval(z.current),F.current||(L(!0),setTimeout(()=>{j(!0),setTimeout(()=>{Z()},1500)},500));return}y(!0);const q=u+1;S([u,q]),V.current=setTimeout(()=>{_(!1),m(q),y(!1),setTimeout(()=>{S([q]),v(!0),X[q].animatedText&&_(!0)},500)},500)};return z.current=setInterval(Q,X[u].duration),v(!0),u===0&&X[0].animatedText&&_(!0),()=>{z.current&&clearInterval(z.current),V.current&&clearTimeout(V.current)}},[u,X.length]),h.jsx("div",{className:"tutorial-overlay",children:h.jsxs("div",{className:"tutorial-container",children:[B&&h.jsx("div",{className:"slide3-congrats",children:h.jsx("h2",{className:"slide3-congrats-text",children:"Congratulations! You are ready."})}),C.map(Q=>h.jsxs("div",{className:`tutorial-slide ${Q===u?"current":Q<u?"previous":"next"} ${M?"tutorial-fading":""}`,children:[Q===u&&X[Q].animatedText&&I&&h.jsx("div",{className:"animated-text pop-burst",children:X[Q].animatedText}),Q===1?h.jsx(cS,{isActive:Q===u}):Q===2?h.jsx(uS,{isActive:Q===u,onPauseClicked:re}):null,h.jsx("div",{className:`tutorial-text ${b&&Q===u?"text-animate":""}`,children:X[Q].text})]},Q)),h.jsx("div",{className:`tutorial-progress-bar-container ${M?"tutorial-fading":""}`,children:h.jsx("div",{className:"tutorial-progress-bar",children:h.jsx("div",{className:"tutorial-progress-bar-fill"})})})]})})},fS=t=>Array.from({length:t},(i,a)=>{const u=a/t*Math.PI*2,m=300+Math.random()*200;return{id:a,startX:Math.cos(u)*m,startY:Math.sin(u)*m,delay:Math.random()*.5,duration:.8+Math.random()*.4,size:4+Math.random()*6}}),hS=t=>Array.from({length:t},(i,a)=>({id:a,left:Math.random()*100,delay:Math.random()*2,duration:1+Math.random()*1,size:2+Math.random()*3})),mS=({isVisible:t,onAnimationEnd:i})=>{const[a,u]=N.useState(!1),[m,x]=N.useState(!1),y=N.useRef(null),b=N.useMemo(()=>fS(30),[]),v=N.useMemo(()=>hS(20),[]);return N.useEffect(()=>(y.current&&clearTimeout(y.current),t?(u(!0),x(!1),setTimeout(()=>x(!0),600),y.current=setTimeout(()=>{u(!1),x(!1),i&&i()},3500)):(u(!1),x(!1)),()=>{y.current&&(clearTimeout(y.current),y.current=null)}),[t,i]),h.jsx(cr,{children:a&&h.jsxs(yt.div,{className:"match-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[h.jsx("div",{className:"match-spotlight-bg"}),h.jsx("div",{className:"spotlight-rays",children:[...Array(8)].map((C,S)=>h.jsx(yt.div,{className:"ray",style:{transform:`rotate(${S*45}deg)`},initial:{opacity:0,scaleY:0},animate:{opacity:.15,scaleY:1},transition:{delay:.3+S*.05,duration:.6,ease:"easeOut"}},S))}),h.jsx("div",{className:"particles-container",children:b.map(C=>h.jsx(yt.div,{className:"converge-particle",style:{width:C.size,height:C.size},initial:{x:C.startX,y:C.startY,opacity:0,scale:0},animate:{x:0,y:0,opacity:[0,1,1,0],scale:[0,1.5,1,0]},transition:{duration:C.duration,delay:C.delay,ease:[.25,.1,.25,1]}},C.id))}),h.jsx(yt.div,{className:"central-burst",initial:{scale:0,opacity:0},animate:{scale:[0,1.5,1],opacity:[0,1,.8]},transition:{delay:.5,duration:.6,ease:"easeOut"}}),h.jsx("div",{className:"falling-stars",children:v.map(C=>h.jsx(yt.div,{className:"falling-star",style:{left:`${C.left}%`,width:C.size,height:C.size},initial:{y:-20,opacity:0},animate:{y:[null,window.innerHeight+20],opacity:[0,1,1,0]},transition:{duration:C.duration,delay:C.delay,repeat:1,ease:"linear"}},C.id))}),h.jsx(cr,{children:m&&h.jsxs(yt.div,{className:"match-text-container",initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:1.2,opacity:0},transition:{type:"spring",stiffness:300,damping:20},children:[h.jsx(yt.div,{className:"match-text-glow",animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:"It's a Match!"}),h.jsx("div",{className:"match-text",children:"It's a Match!"}),h.jsx(yt.div,{className:"match-subtext",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:.3,duration:.4},children:"Get ready to connect"})]})}),m&&h.jsx(yt.div,{className:"ring-pulse",initial:{scale:.2,opacity:1},animate:{scale:3,opacity:0},transition:{duration:1,ease:"easeOut"}})]})})},pS=({isVisible:t,onAnimationEnd:i})=>{const[a,u]=N.useState(!1),m=N.useRef(null),x=N.useRef(i);return x.current=i,N.useEffect(()=>(m.current&&clearTimeout(m.current),t?(u(!0),m.current=setTimeout(()=>{var y;u(!1),(y=x.current)==null||y.call(x)},2200)):u(!1),()=>{m.current&&(clearTimeout(m.current),m.current=null)}),[t]),h.jsx(cr,{children:a&&h.jsxs(yt.div,{className:"ready-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[h.jsx("div",{className:"ready-backdrop"}),h.jsxs(yt.div,{className:"ready-card",initial:{scale:.8,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},transition:{type:"spring",stiffness:300,damping:25,delay:.1},children:[h.jsxs("div",{className:"checkmark-container",children:[h.jsxs("svg",{className:"checkmark-svg",viewBox:"0 0 100 100",children:[h.jsx(yt.circle,{className:"checkmark-circle",cx:"50",cy:"50",r:"45",fill:"none",strokeWidth:"4",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.5,delay:.2,ease:"easeOut"}}),h.jsx(yt.path,{className:"checkmark-check",d:"M30 50 L45 65 L70 35",fill:"none",strokeWidth:"5",strokeLinecap:"round",strokeLinejoin:"round",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.4,delay:.6,ease:"easeOut"}})]}),h.jsx(yt.div,{className:"success-pulse",initial:{scale:.8,opacity:.6},animate:{scale:1.8,opacity:0},transition:{duration:.8,delay:.9,ease:"easeOut"}})]}),h.jsx(yt.div,{className:"ready-text",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.8,duration:.3},children:"You're ready!"}),h.jsx(yt.div,{className:"ready-subtext",initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:.3},children:"You will be paired up soon."})]})]})})},gS=({children:t,delay:i=0,index:a,onMouseEnter:u})=>{const m=N.useRef(null),x=EE(m,{amount:.5,once:!1});return h.jsx(yt.div,{ref:m,"data-index":a,onMouseEnter:u,initial:{scale:.7,opacity:0},animate:x?{scale:1,opacity:1}:{scale:.7,opacity:0},transition:{duration:.2,delay:i},className:"animated-tag-item-wrapper",children:t})},ap=({tags:t=[],selectedTags:i=[],onTagChange:a,showGradients:u=!0,enableArrowNavigation:m=!0,displayScrollbar:x=!0,className:y="",maxHeight:b=400})=>{const v=N.useRef(null),[C,S]=N.useState(-1),[I,_]=N.useState(!1),[M,L]=N.useState(0),[B,j]=N.useState(1),z=N.useCallback($=>{S($)},[]),V=N.useCallback(($,Z)=>{S(Z),a&&a($)},[a]),F=N.useCallback($=>{const{scrollTop:Z,scrollHeight:re,clientHeight:X}=$.target;L(Math.min(Z/50,1));const Q=re-(Z+X);j(re<=X?0:Math.min(Q/50,1))},[]);return N.useEffect(()=>{if(v.current){const{scrollHeight:$,clientHeight:Z}=v.current;$<=Z?j(0):j(1)}},[t]),N.useEffect(()=>{if(!m)return;const $=Z=>{Z.key==="ArrowDown"||Z.key==="Tab"&&!Z.shiftKey?(Z.preventDefault(),_(!0),S(re=>Math.min(re+1,t.length-1))):Z.key==="ArrowUp"||Z.key==="Tab"&&Z.shiftKey?(Z.preventDefault(),_(!0),S(re=>Math.max(re-1,0))):(Z.key==="Enter"||Z.key===" ")&&C>=0&&C<t.length&&(Z.preventDefault(),a&&a(t[C]))};return window.addEventListener("keydown",$),()=>window.removeEventListener("keydown",$)},[t,C,a,m]),N.useEffect(()=>{if(!I||C<0||!v.current)return;const $=v.current,Z=$.querySelector(`[data-index="${C}"]`);if(Z){const X=$.scrollTop,Q=$.clientHeight,q=Z.offsetTop,ge=q+Z.offsetHeight;q<X+50?$.scrollTo({top:q-50,behavior:"smooth"}):ge>X+Q-50&&$.scrollTo({top:ge-Q+50,behavior:"smooth"})}_(!1)},[C,I]),h.jsxs("div",{className:`animated-tag-list-container ${y}`,children:[h.jsx("div",{ref:v,className:`animated-tag-list ${x?"":"no-scrollbar"}`,onScroll:F,style:{maxHeight:`${b}px`},children:t.map(($,Z)=>h.jsx(gS,{delay:.05,index:Z,onMouseEnter:()=>z(Z),children:h.jsxs("label",{className:`animated-tag-label ${C===Z?"focused":""} ${i.includes($)?"selected":""}`,onClick:re=>{re.preventDefault(),V($,Z)},children:[h.jsx("input",{type:"checkbox",checked:i.includes($),onChange:()=>{},tabIndex:-1}),h.jsx("span",{className:"tag-text",children:$})]})},`tag-${$}`))}),u&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"animated-tag-top-gradient",style:{opacity:M}}),h.jsx("div",{className:"animated-tag-bottom-gradient",style:{opacity:B}})]})]})},xS=({onProfileClick:t,onTutorialClick:i,userImage:a})=>{const[u,m]=N.useState(!1),x=N.useRef(null);N.useEffect(()=>{const v=C=>{x.current&&!x.current.contains(C.target)&&m(!1)};return document.addEventListener("mousedown",v),document.addEventListener("touchstart",v),()=>{document.removeEventListener("mousedown",v),document.removeEventListener("touchstart",v)}},[]);const y=()=>{m(!1),t()},b=()=>{m(!1),i()};return h.jsxs("div",{className:"profile-dropdown-container",ref:x,children:[h.jsxs("button",{className:`profile-dropdown-button ${u?"active":""}`,onClick:()=>m(!u),children:[h.jsx("div",{className:"profile-dropdown-avatar",children:h.jsx("img",{src:a||"/assets/avatar_3.png",alt:"Profile"})}),h.jsx("span",{className:"profile-dropdown-text",children:"            "}),h.jsx("svg",{className:`profile-dropdown-chevron ${u?"rotated":""}`,width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:h.jsx("path",{d:"M2.5 4.5L6 8L9.5 4.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]}),h.jsx(cr,{children:u&&h.jsxs(yt.div,{className:"profile-dropdown-menu",initial:{opacity:0,y:-8,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-8,scale:.95},transition:{duration:.15,ease:[.4,0,.2,1]},children:[h.jsxs("button",{className:"profile-dropdown-item profile-dropdown-item--primary",onClick:y,children:[h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[h.jsx("circle",{cx:"12",cy:"8",r:"4",stroke:"currentColor",strokeWidth:"2"}),h.jsx("path",{d:"M4 20C4 16.6863 7.58172 14 12 14C16.4183 14 20 16.6863 20 20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),h.jsx("span",{children:"Edit Profile"})]}),h.jsx("div",{className:"profile-dropdown-divider"}),h.jsxs("button",{className:"profile-dropdown-item",onClick:b,children:[h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[h.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:"currentColor",strokeWidth:"2"}),h.jsx("path",{d:"M12 8V12L15 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),h.jsx("span",{children:"Tutorial"})]})]})})]})},yS=({isOpen:t,onClose:i})=>{const{userProfile:a}=N.useContext(Hn),[u,m]=N.useState(""),[x,y]=N.useState(""),[b,v]=N.useState(""),[C,S]=N.useState(null),[I,_]=N.useState(null),[M,L]=N.useState(!1),[B,j]=N.useState({x:0,y:0}),[z,V]=N.useState(1),[F,$]=N.useState(null),[Z,re]=N.useState(!1),[X,Q]=N.useState(!1),[q,ge]=N.useState(""),[Ne,Ae]=N.useState(!0),De=N.useRef(null);N.useEffect(()=>{t&&(ge(""),_(null),re(!1),j({x:0,y:0}),V(1),Ce())},[t]);const Ce=async()=>{var Y,le,Te;Ae(!0),ge("");try{const Ge=await bt("/load_user");if(Ge.ok){const be=await Ge.json();m(((Y=be.profile)==null?void 0:Y.name)||""),y(be.email||""),v(((le=be.profile)==null?void 0:le.contact_url)||""),L(be.email_verified===!0),(Te=be.profile)!=null&&Te.image_data?S(`data:image/jpeg;base64,${be.profile.image_data}`):a!=null&&a.image_data&&S(`data:image/jpeg;base64,${a.image_data}`)}}catch(Ge){console.error("Error loading user data:",Ge),m((a==null?void 0:a.name)||""),y((user==null?void 0:user.email)||""),a!=null&&a.image_data&&S(`data:image/jpeg;base64,${a.image_data}`)}finally{Ae(!1)}},G=Y=>{const le=Y.target.files[0];if(le){const Te=new FileReader;Te.onload=Ge=>{S(Ge.target.result),re(!0)},Te.readAsDataURL(le)}},je=(Y,le)=>{$(le)},ye=async()=>{try{const Y=await zc(C,F);_(Y),S(Y),re(!1)}catch(Y){console.error("Error cropping image:",Y),ge("Failed to crop image. Please try again.")}},fe=()=>{re(!1),a!=null&&a.image_data&&S(`data:image/jpeg;base64,${a.image_data}`)},Ve=async Y=>{var le;Y.preventDefault(),Q(!0),ge("");try{const Te={name:u.trim()||void 0,contact_url:b.trim()||void 0};if(!M&&x.trim()){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(x.trim())){ge("Please enter a valid email address."),Q(!1);return}Te.email=x.trim()}I&&(Te.image_data=I.split(",")[1]);const Ge=await bt("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Te)});if(!Ge.ok){const be=await Ge.json();throw new Error(be.detail||"Failed to update profile")}Q(!1),i()}catch(Te){console.error("Error updating profile:",Te),(le=Te.message)!=null&&le.toLowerCase().includes("already associated")?ge("This email is already in use by another account."):ge(Te.message||"Failed to update profile. Please try again.")}finally{Q(!1)}},we=I||C||"/assets/avatar_3.png";return h.jsx(cr,{children:t&&h.jsx(yt.div,{className:"lobby-profile-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:i,children:h.jsxs(yt.div,{className:"lobby-profile-modal",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",stiffness:400,damping:30},onClick:Y=>Y.stopPropagation(),children:[h.jsx("button",{className:"lobby-profile-modal-close",onClick:i,"aria-label":"Close",children:h.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:h.jsx("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}),h.jsx("h2",{className:"lobby-profile-modal-title",children:"Edit Profile"}),Ne?h.jsxs("div",{className:"lobby-profile-modal-loading",children:[h.jsx("div",{className:"lobby-profile-spinner"}),h.jsx("span",{children:"Loading..."})]}):h.jsxs("form",{onSubmit:Ve,className:"lobby-profile-form",children:[q&&h.jsx("div",{className:"lobby-profile-error",children:q}),Z?h.jsxs("div",{className:"lobby-profile-crop-section",children:[h.jsx("div",{className:"lobby-profile-crop-container",children:h.jsx(Uc,{image:C,crop:B,zoom:z,aspect:1,onCropComplete:je,onCropChange:j,onZoomChange:V,cropShape:"round"})}),h.jsxs("div",{className:"lobby-profile-crop-actions",children:[h.jsx("button",{type:"button",className:"lobby-profile-btn-secondary",onClick:fe,children:"Cancel"}),h.jsx("button",{type:"button",className:"lobby-profile-btn-primary",onClick:ye,children:"Save Crop"})]})]}):h.jsxs("div",{className:"lobby-profile-image-section",children:[h.jsxs("div",{className:"lobby-profile-image-container",children:[h.jsx("img",{src:we,alt:"Profile",className:"lobby-profile-image"}),h.jsx("button",{type:"button",className:"lobby-profile-image-edit",onClick:()=>{var Y;return(Y=De.current)==null?void 0:Y.click()},children:h.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#144dff"}),h.jsx("path",{d:"M14.5 7.5L16.5 9.5M8 16L8.5 13.5L14.5 7.5L16.5 9.5L10.5 15.5L8 16Z",fill:"white",stroke:"white",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]}),h.jsx("input",{ref:De,type:"file",accept:"image/*",onChange:G,style:{display:"none"}}),h.jsx("span",{className:"lobby-profile-image-hint",children:"Tap to change photo"})]}),h.jsxs("div",{className:"lobby-profile-field",children:[h.jsx("label",{className:"lobby-profile-label",children:"Name"}),h.jsx("input",{type:"text",value:u,onChange:Y=>m(Y.target.value),placeholder:"Your name",className:"lobby-profile-input"})]}),h.jsxs("div",{className:"lobby-profile-field",children:[h.jsxs("label",{className:"lobby-profile-label",children:["Email",M&&h.jsxs("span",{className:"lobby-profile-verified-badge",children:[h.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",children:h.jsx("path",{d:"M5 13L9 17L19 7",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),"Verified"]})]}),h.jsx("input",{type:"email",value:x,onChange:Y=>y(Y.target.value),placeholder:"you@example.com",className:`lobby-profile-input ${M?"lobby-profile-input--readonly":""}`,disabled:M}),M&&h.jsx("span",{className:"lobby-profile-field-hint",children:"Verified emails cannot be changed"})]}),h.jsxs("div",{className:"lobby-profile-field",children:[h.jsx("label",{className:"lobby-profile-label",children:"Contact URL"}),h.jsx("input",{type:"text",value:b,onChange:Y=>v(Y.target.value),placeholder:"linkedin.com/in/yourprofile",className:"lobby-profile-input"}),h.jsx("span",{className:"lobby-profile-field-hint",children:"LinkedIn, Twitter, or any way to connect"})]}),h.jsx("button",{type:"submit",className:"lobby-profile-submit",disabled:X||Z,children:X?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"lobby-profile-spinner-small"}),"Saving..."]}):"Save Changes"})]})]})})})},lp={self:"Who are you?",desiring:"Who do you want to meet?"},wS=({isVisible:t,phase:i})=>h.jsx(cr,{children:t&&h.jsx(yt.div,{className:"tags-phase-intro-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:h.jsx(yt.h2,{className:"tags-phase-intro-text",initial:{clipPath:"inset(0 100% 0 0)"},animate:{clipPath:"inset(0 0% 0 0)"},exit:{opacity:0},transition:{duration:1.8,ease:"easeOut"},children:lp[i]||lp.self})},"tags-phase-intro")}),gc=9,vS=5,CS=5e3,bS=!1,ES=()=>{var li;const t=Math.floor(540),[i,a]=N.useState([]),[u,m]=N.useState("self"),[x,y]=N.useState(!1),[b,v]=N.useState(""),C=N.useRef(null),S=N.useRef(null),[I,_]=N.useState(!1),M=N.useRef(!1),[L,B]=N.useState(!1),[j,z]=N.useState(!1),[V,F]=N.useState(!1),$=N.useRef(null),[Z,re]=N.useState(!1),{loadSound:X,loadAmbientSound:Q,switchToMainTrack:q,seekTo:ge,cancelSound:Ne,checkSound:Ae,soundEnabled:De,setSoundEnabled:Ce,isPlaying:G}=Of(),[je,ye]=N.useState("yonder"),fe=Fn(),{code:Ve}=Fy(),[we,Y]=N.useState(null);hx(Y,null,je);const{user:le,userProfile:Te,checkAuth:Ge,permissions:be,isAuthLoading:te,authLoadingMessage:Xe,emailVerified:Pe}=N.useContext(Hn),[$e,kt]=N.useState(!1),[xe,ie]=N.useState([]),[ue,Re]=N.useState(""),[Ze,tt]=N.useState(""),[ze,_e]=N.useState(!1),We=N.useRef(null),wt=N.useRef(localStorage.getItem("hasShownEmailBackupModal")==="true"),[Ie,vt]=N.useState(!1),Lt=N.useRef(localStorage.getItem("hasShownPauseInfoModal")==="true");N.useEffect(()=>{if(!te&&!le){const rt=new URLSearchParams(window.location.search).get("code")||Ve;fe(rt?`/signup?redirect=lobby&code=${rt}`:"/signup?redirect=lobby")}},[te,le,fe,Ve]),N.useEffect(()=>{(()=>{const It=new URLSearchParams(window.location.search).get("code")||Ve;if(It){ye(It),TE(It),Ps(It);const Ke=`hasSeenTutorial_${It}`,Dt=localStorage.getItem(Ke),an=!!localStorage.getItem("access_token");console.log("Tutorial check:",{codeParam:It,lobbyTutorialKey:Ke,hasSeenLobbyTutorial:Dt,isAuthenticated:an}),!Dt&&an&&(on(!0),localStorage.setItem(Ke,"true"))}})()},[Ve]);const[Ee,Pt]=N.useState(null),[St,zt]=N.useState(null),[lt,Wt]=N.useState(null),[Qe,at]=N.useState(null),[qe,ve]=N.useState(null),se=N.useRef(!1),et=N.useRef(null),nt=N.useRef(null),ht=N.useRef(null),Qt=N.useRef(null),dn=N.useRef(!1),fn=N.useRef(!1),[Ue,hn]=N.useState(null),[Gn,Yr]=N.useState(null),[Vn,Qi]=N.useState(null),[yn,$r]=N.useState(null),[si,Un]=N.useState(!0),ki=N.useRef(0),[wn,Ji]=N.useState(null),[Jt,Sr]=N.useState(null),[qt,Je]=N.useState([]),[Pn,es]=N.useState([]),[Xn,xr]=N.useState(!document.hidden),oi=N.useRef("yonder"),Ar=N.useRef({}),nr=N.useRef([]),[Jo,Rs]=N.useState(!1),Yn=N.useRef(null),[$n,rn]=N.useState(!1);N.useEffect(()=>{oi.current=je},[je]);async function ks(Le,rt){const Ke=await(await bt("/set_profile_info",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tags_work:Le,tags_desiring_work:rt})})).json();console.log("SET PROFILE INFO:",Ke)}const Xt=async Le=>{if(Le.length!==0){Rs(!0);try{const rt=await bt("/load_batch_pfp_small_icons",{method:"POST",headers:{"Content-Type":"application/json",lobby_code:oi.current},body:JSON.stringify({usernames:Le})});if(rt.ok){const It=await rt.json();Ar.current={...Ar.current,...It},console.log("Profile images fetched:",Object.keys(It))}else console.error("Failed to fetch profile images:",rt.status)}catch(rt){console.error("Error fetching profile images:",rt)}finally{Rs(!1)}}},Ps=async Le=>{try{const rt=await bt("/lobby_setup_data",{headers:{lobby_code:Le}});if(rt.ok){const It=await rt.json();It.logo_icon?(Yn.current=It.logo_icon,rn(!0),console.log("Sponsor logo loaded successfully")):console.log("No sponsor logo available for this lobby")}else console.error("Failed to fetch lobby setup data:",rt.status)}catch(rt){console.error("Error fetching lobby setup data:",rt)}};async function Se(){try{Ne(),Ar.current={},nr.current=[],(await bt("/disconnect_lobby",{headers:{lobby_code:je}})).ok&&fe("/")}catch(Le){console.error("Error disconnecting from lobby:",Le),fe("/")}finally{Ne(),fe("/"),console.log("finally")}}const[ho,Zt]=N.useState(!1),[yi,mo]=N.useState(null),Ot=N.useRef(!1),[Rt,Mt]=N.useState(!1),[Zn,Pi]=N.useState(null),[ts,gn]=N.useState(!1),Nr=(Le,rt)=>{if(!Le||!rt)return null;for(const It of Le.tags_work)if(rt.desiring_tags_work.includes(It)){for(const Ke of rt.tags_work)if(Le.desiring_tags_work.includes(Ke))return{playerTag:It,opponentTag:Ke}}return null};async function ai(){try{ki.current+=1,ki.current>5&&(ki.current=0,se.current=!1);const Le=!document.hidden,rt=oi.current;if(console.log("lobby code fr:",rt),rt=="yonder"){console.log("lobby code is not set");return}const It=await bt(`/lobby?is_visible=${Le}`,{headers:{is_visible_t_f:Le?"t":"f",lobby_code:rt}});if(It.ok){const Ke=await It.json();if(console.log("LOBBY PAIR DATA:",rt,Ke),Ke.status=="inactive"){dn.current||(dn.current=!0,re(!0),q(t).then(()=>{setTimeout(()=>{Ne(),fe("/paired-player-history",{state:{fromLobby:!0}})},7e3)}).catch(()=>{Ne(),fe("/paired-player-history",{state:{fromLobby:!0}})}));return}Ke.lobby_state!=="terminated"&&PE(),Wt(Ke.opponent_name),Ke.opponent_name==null&&Pt(null),a(Ke.custom_tags),hn(Ke.lobby_state),$r(Ke.lobby_duration);const Dt=typeof Ke.round_time_left=="number"&&!isNaN(Ke.round_time_left)?Ke.round_time_left:0;console.log("Timer Debug:",{roundDuration:Ke.lobby_duration,timeLeft:Dt,lobbyState:Ke.lobby_state,usingDefaultDuration:!Ke.lobby_duration}),ht.current=Dt,Qt.current=Ke.beat_go_off,Yr(Math.floor(Dt));const an=Math.floor(Dt/60),mt=Math.floor(Dt%60);if(Qi(`${an}:${mt.toString().padStart(2,"0")}`),ve(Ke.table_number),Ke.player_tags!=null&&Ke.player_tags.tags_work!=null&&Je(Ke.player_tags.tags_work),Ke.player_tags!=null&&Ke.player_tags.desiring_tags_work!=null&&es(Ke.player_tags.desiring_tags_work),!fn.current&&Ke.lobby_state!=="checkin"){fn.current=!0;const Cn=Ke.lobby_state==="active"&&ht.current?t-ht.current:t;q(Cn).catch(()=>{Un(!0)})}fn.current&&ht.current!=null&&Ke.lobby_state=="active"&&ht.current!=0&&(ge(t-ht.current),console.log("seeking to",t-ht.current));const Os=await bt(`/display_lobby_metadata?lobby_code=${rt}`,{headers:{lobby_code:rt}});if(Os.ok){const Cn=await Os.json();Y(Cn.player_count);const Ir=Cn.usernames||[];if(JSON.stringify(nr.current)!==JSON.stringify(Ir)){nr.current=Ir;const ur=Ir.filter(On=>!Ar.current[On]&&On!==(le==null?void 0:le.username));ur.length>0&&(bS||(console.log("Fetching images for new users:",ur),Xt(ur)))}}if((lt!=Ke.opponent_name||Ee==null)&&!se.current&&Ke.opponent_name!=null){se.current=!0,console.log("fetching profile");const Cn=await bt("/paired_player_profile");if(Cn.ok){const Ir=await Cn.json();Pt(Ir),console.log("profile fetched:",Ir.name)}else console.log("profile fetch failed");se.current=!1}const Ct=yi==="interrim"&&Ke.lobby_state==="active"&&Ke.opponent_name,vn=Ke.lobby_state==="active"&&Ke.opponent_name&&Ke.is_purgatory_pair&&et.current!==Ke.opponent_name;if((Ct||vn)&&!Ot.current){console.log("New pairing detected:",{isNormalPairingStart:Ct,isPurgatoryPairing:vn}),et.current=Ke.opponent_name;const Cn=Nr(Ke.player_tags,Ke.opponent_tags);if(vn){Nt.current?console.log("Purgatory pairing - skipping animation (tutorial active)"):(console.log("Purgatory pairing - triggering animation"),Ot.current=!0,Zt(!0));const ur=()=>{nt.current&&(nt.current.currentTime=0,nt.current.play().catch(On=>console.log("Purgatory notification sound blocked:",On)))};Nt.current?setTimeout(ur,8e3):ur(),Cn&&(console.log("Purgatory pairing also has interest match:",Cn),Pi(Cn),Mt(!0))}else Cn&&(console.log("Normal pairing with interest match:",Cn),Pi(Cn),Mt(!0),Ot.current=!0,Zt(!0));const Ir=!Pe&&!wt.current,Ur=!Lt.current;if(Ir||Ur)try{const On=await(await bt("/lobby/previous_match_profiles",{headers:{lobby_code:rt}})).json(),Mr=On.total_match_count||0;Ir&&On.profiles&&On.profiles.length>=2?(ie(On.profiles),kt(!0),wt.current=!0,localStorage.setItem("hasShownEmailBackupModal","true")):Ur&&Mr>=4&&!$e&&(vt(!0),Lt.current=!0,localStorage.setItem("hasShownPauseInfoModal","true"))}catch(ur){console.error("Error fetching previous match profiles:",ur)}}mo(Ke.lobby_state)}}catch(Le){console.error("Error fetching lobby data:",Le)}}N.useEffect(()=>{Ae()?Ce(!0):Ce(!1);const Le=setInterval(async()=>{ai()},CS);return()=>clearInterval(Le)},[]),N.useEffect(()=>{const Le=()=>{nt.current||(nt.current=new Audio("./assets/sounds/new_banger_chorus.mp3"),nt.current.load(),console.log("Purgatory notification sound unlocked")),document.removeEventListener("click",Le),document.removeEventListener("touchstart",Le)};return document.addEventListener("click",Le),document.addEventListener("touchstart",Le),()=>{document.removeEventListener("click",Le),document.removeEventListener("touchstart",Le)}},[]),N.useEffect(()=>{const Le=setTimeout(ai,1e3);return()=>clearTimeout(Le)},[Ue,je]),N.useEffect(()=>{const Le=()=>{const rt=!document.hidden;rt&&!Xn&&(console.log("Page became visible - fetching latest data"),ai()),xr(rt)};return document.addEventListener("visibilitychange",Le),()=>{document.removeEventListener("visibilitychange",Le)}},[Xn]);const en=()=>h.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(4px)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},children:h.jsxs("div",{style:{backgroundColor:"#ffffff",padding:"32px 28px",borderRadius:"24px",position:"relative",minWidth:"300px",maxWidth:"340px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.2)",textAlign:"center"},children:[h.jsx("button",{onClick:()=>Un(!1),style:{color:"#ffffff",position:"absolute",right:"12px",top:"12px",border:"none",background:"transparent",fontSize:"10px",cursor:"pointer",width:"10px",height:"10px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:""}),h.jsx("h2",{style:{marginTop:"8px",marginBottom:"8px",color:"#1a1a2e",fontWeight:700,fontSize:"1.25rem",fontFamily:"-apple-system, BlinkMacSystemFont, sans-serif"},children:"Sound is Important"}),h.jsx("p",{style:{color:"#6b7280",fontSize:"0.9rem",marginBottom:"4px"},children:"Raise your volume for the best experience"}),h.jsx("button",{onClick:()=>{Ue==="checkin"?Q():X(),Un(!1)},style:{padding:"14px 32px",marginTop:"20px",backgroundColor:"#1a1a2e",color:"#ffffff",border:"none",borderRadius:"16px",fontWeight:600,cursor:"pointer",fontSize:"1rem",fontFamily:"-apple-system, BlinkMacSystemFont, sans-serif",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",transition:"all 0.2s ease"},children:"Enable Sound"})]})}),yr=(Le,rt)=>{wn==null&&Ji(qt),Jt==null&&Sr(Pn);const It=Le==="self"?wn:Jt;if(!(It!=null&&It.includes(rt))&&(It==null?void 0:It.length)>=vS){v("Reached tag limit for this section"),setTimeout(()=>{var Dt;(Dt=S.current)==null||Dt.scrollIntoView({behavior:"smooth",block:"center"})},100),setTimeout(()=>{v("")},3e3);return}Le==="self"?Ji(Dt=>Dt.includes(rt)?Dt.filter(an=>an!==rt):[...Dt,rt]):Sr(Dt=>Dt.includes(rt)?Dt.filter(an=>an!==rt):[...Dt,rt])},ea=()=>{wn!=null&&(ks(wn,Jt||[]),setTimeout(()=>{Je(wn||[])},800)),m("desiring"),Ut(),setTimeout(()=>{var Le;(Le=C.current)==null||Le.scrollIntoView({behavior:"smooth",block:"start"})},100)},wi=()=>{Jt!=null?(ks(wn||[],Jt),M.current||(M.current=!0,_(!0),B(!0))):window.scrollTo({top:0,behavior:"smooth"}),z(!1)},Ut=()=>{$.current&&clearTimeout($.current),F(!0),$.current=setTimeout(()=>{F(!1)},2300)};N.useEffect(()=>()=>{$.current&&clearTimeout($.current)},[]);const[Mn,ae]=N.useState(!1);N.useEffect(()=>{if(Ue==="interrim")ae(!0);else if(Ue==="active"){const Le=setTimeout(()=>{ae(!1)},1e3);return()=>clearTimeout(Le)}},[Ue]);const U=()=>{console.log("Lobby countdown animation completed")},[ct,on]=N.useState(!1),Nt=N.useRef(!1);N.useEffect(()=>{Nt.current=ct},[ct]);const[po,Mi]=N.useState(!1),rr=()=>{on(!1)};N.useEffect(()=>{(Ue!=="active"||!Ee)&&(Mt(!1),Pi(null),et.current=null)},[Ue,Ee]),N.useEffect(()=>{Ue==="terminated"&&(Ar.current={},nr.current=[],Dc(),localStorage.removeItem("hasShownEmailBackupModal"),localStorage.removeItem("hasShownPauseInfoModal"))},[Ue]);const dt=N.useRef(null);N.useEffect(()=>{var rt;!x&&!(!De&&si&&Ue!=="checkin"&&Ue!==null&&!G)&&!(qt!=null&&qt.length)&&!(Pn!=null&&Pn.length)&&(i==null?void 0:i.length)>0&&((rt=dt.current)==null||rt.scrollIntoView({behavior:"smooth"}),y(!0),z(!0),Ut())},[qt,Pn,i,x,De,si,Ue,G]);const tn=()=>{ze||(kt(!1),Re(""),tt(""),ie([]))},ns=()=>{vt(!1)},Ms=async Le=>{var It;if(Le.preventDefault(),tt(""),!ue||!ue.trim()){tt("Email is required.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ue.trim())){tt("Please enter a valid email.");return}_e(!0);try{const Ke=await bt("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:ue.trim()})});if(!Ke.ok){const Dt=await Ke.json();(It=Dt.detail)!=null&&It.toLowerCase().includes("already associated")?tt("This email is already in use. Try a different one or skip."):tt(Dt.detail||"Failed to save email."),_e(!1);return}try{await bt("/auth/send-magic-link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:ue.trim()})})}catch(Dt){console.error("Magic link send failed:",Dt)}kt(!1),Re(""),tt("")}catch(Ke){console.error("Email backup error:",Ke),tt("Something went wrong. Try again.")}finally{_e(!1)}};return N.useEffect(()=>{$e&&We.current&&setTimeout(()=>{var Le;return(Le=We.current)==null?void 0:Le.focus()},100)},[$e]),te?h.jsx(co,{fullScreen:!0,message:Xe}):Z?h.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",background:"rgba(255, 255, 255, 0.95)",zIndex:1e3,gap:"1.5rem"},children:[h.jsx(co,{size:60}),h.jsx("h2",{className:"lobby-header",children:"Session ended. Generating your matches..."})]}):h.jsxs("div",{className:"lobby-container",children:[h.jsxs("div",{className:"lobby-content",children:[h.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0",marginTop:"-1.85rem"},children:h.jsx("img",{src:"/assets/reuneo_test_11.png",alt:"Reuneo Logo",style:{maxWidth:"90px",height:"auto",objectFit:"contain"}})}),(Ue==="checkin"||Ue==="active"&&!Ee||Ue==="interrim")&&h.jsx("div",{className:"user-profile-container",children:h.jsxs("div",{className:"user-profile",children:[h.jsx("img",{src:Te!=null&&Te.image_data?`data:image/jpeg;base64,${Te.image_data}`:"/assets/avatar_3.png",alt:"Your Profile",className:"user-profile-picture"}),h.jsx("div",{className:"user-profile-glow"})]})}),h.jsx("div",{className:"lobby-header",style:{marginTop:"-30px"},children:h.jsx("h2",{children:i.length>0&&(qt.length==0||Pn.length==0)?h.jsxs(h.Fragment,{children:["You're not ready, complete your interests.",h.jsx("button",{className:"missing-tags-button",onClick:()=>{var Le;return(Le=dt.current)==null?void 0:Le.scrollIntoView({behavior:"smooth"})},children:"Complete Interests"})]}):Ue==="active"&&Ee?h.jsxs("span",{className:"lobby-pop-burst",children:["Go find ",Ee.name,"!"]}):Ue==="checkin"?h.jsxs(h.Fragment,{children:["Wait here ",((li=Te==null?void 0:Te.name)==null?void 0:li.slice(0,15))||le||"Guest",".",h.jsx("br",{}),"Your host will start the experience."]}):Ue==="active"&&!Ee?"You'll be paired up when the timer ends.":Ue==="interrim"?"Get ready for the next round!":Ue==="terminated"?"This session has ended. Thank you for participating!":Ue===null?"Connecting to lobby...":""})},Ue),Ue==="active"&&Ee&&qe&&h.jsx("div",{className:"table-number",children:h.jsxs("h3",{style:{color:"#4b73ef"},children:["at table: ",qe]})}),(Yn.current||Ue!=="checkin")&&h.jsxs("div",{className:`timer-sponsor-container ${Yn.current&&Ue!=="checkin"?"has-timer":""}`,children:[Yn.current&&h.jsx("div",{className:"sponsor-logo",children:h.jsx("img",{src:`data:image/jpeg;base64,${Yn.current}`,alt:"Sponsor Logo",style:{width:"100px",height:"100px",objectFit:"contain"}})}),Ue!=="checkin"&&h.jsx("div",{className:"time-left",style:{display:"flex",flexDirection:"column",alignItems:"center",background:"transparent",padding:"8px"},children:(Ue==="active"||Ue==="interrim")&&Gn?h.jsx(h.Fragment,{children:h.jsx(xh,{isPlaying:Ue==="active",duration:yn||300,initialRemainingTime:Gn||0,colors:["#64B5F6","#2196F3","#1976D2"],colorsTime:[yn||300,(yn||300)/2,0],size:100,strokeWidth:8,trailColor:"#f0f1f4",strokeLinecap:"round",onComplete:()=>(ai(),{shouldRepeat:!1}),children:({remainingTime:Le})=>{const rt=typeof Le=="number"&&!isNaN(Le)?Le:0,It=Math.floor(rt/60),Ke=Math.floor(rt%60);return h.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[h.jsxs("span",{style:{fontSize:"1.5rem",color:"#1a1a2e",fontWeight:700,fontFamily:"-apple-system, BlinkMacSystemFont, sans-serif"},children:[It,":",String(Ke).padStart(2,"0")]}),h.jsx("span",{style:{fontSize:"0.65rem",color:"#6b7280",fontWeight:500,marginTop:"2px"},children:"time left"})]})}},`${Ue}-${Gn}`)}):h.jsx("span",{className:"time-left-text"})})]}),Rt&&Zn&&Ue==="active"&&Ee&&h.jsxs("div",{className:`match-banner ${ts?"sparkling":""}`,children:[ts&&h.jsx("div",{className:"banner-sparkles",children:[...Array(8)].map((Le,rt)=>h.jsx("span",{className:"banner-sparkle",style:{left:`${10+rt*12}%`,animationDelay:`${rt*.15}s`}},rt))}),h.jsx("span",{className:"match-tag",children:h.jsx("span",{className:"match-tag-text",children:Zn.playerTag.split(" ").map(Le=>Le.charAt(0).toUpperCase()+Le.slice(1).toLowerCase()).join(" ")})}),h.jsx("div",{className:"match-arrow"}),h.jsx("span",{className:"match-tag",children:h.jsx("span",{className:"match-tag-text",children:Zn.opponentTag.split(" ").map(Le=>Le.charAt(0).toUpperCase()+Le.slice(1).toLowerCase()).join(" ")})})]}),h.jsx("div",{style:{display:"flex",justifyContent:"center",width:"100%",margin:"0 auto",marginTop:"-2rem"},children:Ue==="active"||Ue==="interrim"?Ee?h.jsx("div",{style:{marginTop:"-1rem",width:"100%",display:"flex",justifyContent:"center"},children:h.jsx(tS,{player:Ee})}):h.jsx(h.Fragment,{}):Ue==="terminated"?h.jsx("div",{className:"status-message",children:h.jsxs("h2",{children:["This session has ended.",h.jsx("br",{}),"Thank you for participating!"]})}):null}),(Ue==="checkin"||Ue==="active"&&!Ee)&&we!==null&&h.jsx("div",{className:"player-count-container",children:h.jsxs("div",{className:"player-count-widget",children:[h.jsxs("div",{className:"player-count-icon",children:[h.jsx("div",{className:"icon-pulse"}),h.jsx("img",{src:"/assets/players_display_icon2.png",alt:"Players in lobby",className:"player-count-img"})]}),h.jsxs("div",{className:"player-count-info",children:[h.jsx("span",{className:"player-count-number",children:we}),h.jsx("span",{className:"player-count-label",children:"joined"})]}),h.jsx("div",{className:"player-count-lobby",children:je})]})}),(Ue==="checkin"||Ue==="active"&&!Ee)&&h.jsx("div",{className:"lobby-profiles-container",children:h.jsx("div",{className:"lobby-profiles-grid",children:we>0?h.jsxs(h.Fragment,{children:[Array.from({length:Math.min(we,gc)}).map((Le,rt)=>{let It;{const Dt=nr.current[rt];Dt&&Ar.current[Dt]?It=`data:image/jpeg;base64,${Ar.current[Dt]}`:It="/assets/avatar_8.png"}return h.jsxs("div",{className:`profile-icon-wrapper ${rt===Math.min(we,gc)-1?"pop-in":""}`,children:[h.jsx("img",{src:It,alt:`Profile ${rt+1}`,className:"profile-icon",loading:"lazy"}),h.jsx("div",{className:"profile-icon-glow"})]},`profile-${rt}`)}),we>gc&&h.jsx("div",{className:"profile-icon-wrapper more-profiles",children:h.jsxs("div",{className:"more-profiles-bubble",children:["+",we-gc]})})]}):h.jsx("div",{children:"No profiles to display"})})}),(Ue==="checkin"||Ue==="active")&&h.jsxs("div",{className:"selected-tags-container",children:[qt&&qt.length>0&&h.jsxs("div",{className:"tag-category",children:[h.jsx("h4",{children:"I am:"}),h.jsx("div",{className:"tag-list",children:qt.map(Le=>h.jsx("span",{className:"tag-item",style:{color:"#1a1a2e"},children:Le},`self-${Le}`))})]}),Pn&&Pn.length>0&&h.jsxs("div",{className:"tag-category",children:[h.jsx("h4",{children:"Looking for:"}),h.jsx("div",{className:"tag-list",children:Pn.map(Le=>h.jsx("span",{className:"tag-item",style:{color:"#1a1a2e"},children:Le},`desiring-${Le}`))})]})]}),h.jsx("button",{className:`leave-lobby-button ${Ie?"pause-button-elevated":""}`,onClick:Se,children:"Pause"}),h.jsx(xS,{onProfileClick:()=>Mi(!0),onTutorialClick:()=>on(!0),userImage:Te!=null&&Te.image_data?`data:image/jpeg;base64,${Te.image_data}`:null}),(be==="admin"||be==="organizer")&&h.jsx("button",{className:"admin-view-button",onClick:()=>fe(`/admin_lobby_view?code=${je}`),children:"Manage"}),j&&h.jsx("div",{className:"tags-focus-overlay"}),Array.isArray(i)&&i.length>0&&h.jsx("form",{onSubmit:Le=>{Le.preventDefault(),u==="self"?ea():wi()},children:h.jsxs("div",{className:`tags-section ${j?"focused":""}`,ref:dt,children:[h.jsx(wS,{isVisible:V,phase:u}),h.jsxs("div",{className:"progress-bar-container",children:[h.jsx("div",{className:`self-progress-bar-tab ${u==="self"?"active":""} ${qt.length>0?"complete":""}`,onClick:()=>{u!=="self"&&(m("self"),Ut())},children:"Who are you?"}),h.jsx("div",{className:`desiring-progress-bar-tab ${u==="desiring"?"active":""} ${Pn.length>0?"complete":""}`,onClick:()=>{qt.length>0&&u!=="desiring"&&(m("desiring"),Ut())},children:"Who do you want to meet?"})]}),h.jsxs("div",{className:`tag-group ${u==="self"?"active":"hidden"}`,children:[h.jsx("h2",{style:{fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif",color:"#1a1a2e"},children:"Who are you?"}),h.jsx(ap,{tags:i,selectedTags:wn??qt,onTagChange:Le=>yr("self",Le),showGradients:!0,enableArrowNavigation:u==="self",displayScrollbar:!0,maxHeight:350})]}),h.jsxs("div",{className:`tag-group ${u==="desiring"?"active":"hidden"}`,ref:C,children:[h.jsx("h2",{style:{fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif",color:"#1a1a2e"},children:"Who do you want to meet?"}),h.jsx(ap,{tags:i,selectedTags:Jt??Pn,onTagChange:Le=>yr("desiring",Le),showGradients:!0,enableArrowNavigation:u==="desiring",displayScrollbar:!0,maxHeight:350})]}),h.jsx("button",{type:"submit",className:"tag-selection-button",ref:S,children:u==="self"?"Continue":"Save"}),b&&h.jsx("div",{style:{color:"#144dff",textAlign:"center",marginTop:"1rem",fontSize:"0.9rem",fontWeight:"600"},children:b})]})})]}),De||!si||Ue==null||G?null:h.jsx(en,{}),Mn&&!(i.length>0&&Pn.length===0)&&h.jsx(lS,{onComplete:U}),ct&&h.jsx(dS,{onComplete:rr,lobbyCode:je}),h.jsx(yS,{isOpen:po,onClose:()=>Mi(!1)}),h.jsx(mS,{isVisible:ho,onAnimationEnd:()=>{Zt(!1),Ot.current=!1,gn(!0),setTimeout(()=>gn(!1),3e3)}}),h.jsx(pS,{isVisible:I,onAnimationEnd:()=>{_(!1),M.current=!1,window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{Je(wn||[]),es(Jt)},600)}}),h.jsx(cr,{children:$e&&h.jsx(yt.div,{className:"email-backup-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:tn,children:h.jsxs(yt.div,{className:"email-backup-modal-content",initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},transition:{type:"spring",stiffness:400,damping:25},onClick:Le=>Le.stopPropagation(),children:[xe.length>0&&h.jsx("div",{className:"previous-matches-row",children:xe.slice(0,2).map((Le,rt)=>h.jsx("img",{src:Le.small_image_data?`data:image/jpeg;base64,${Le.small_image_data}`:"/assets/avatar_3.png",alt:Le.name,className:"match-avatar"},rt))}),h.jsx("h2",{className:"email-backup-modal-header",children:"Save Your Match History"}),h.jsx("p",{className:"email-backup-modal-subtext",children:"We'll send you a sign-in link in case you get logged out."}),h.jsxs("form",{onSubmit:Ms,className:"email-backup-form",children:[h.jsx("input",{ref:We,type:"email",value:ue,onChange:Le=>Re(Le.target.value),placeholder:"you@example.com",className:"email-backup-input",disabled:ze}),Ze&&h.jsx("div",{className:"email-backup-error",children:Ze}),h.jsx("button",{type:"submit",className:"email-backup-submit-button",disabled:ze,children:ze?"Sending...":"Save Matches"})]}),h.jsx("button",{type:"button",className:"email-backup-skip-button",onClick:tn,disabled:ze,children:"Don't back up matches"})]})})}),h.jsx(cr,{children:Ie&&h.jsx(yt.div,{className:"pause-info-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:ns,children:h.jsxs(yt.div,{className:"pause-info-modal-content",initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},transition:{type:"spring",stiffness:400,damping:25},onClick:Le=>Le.stopPropagation(),children:[h.jsx("h2",{className:"pause-info-modal-header",children:"Need a Break?"}),h.jsxs("p",{className:"pause-info-modal-body",children:["Tap ",h.jsx("strong",{children:'"Pause"'})," anytime to stop being paired. This way no one's left looking for you"]}),h.jsx("p",{className:"pause-info-modal-subtext",children:"Your matches are saved and you can rejoin whenever you're ready"}),h.jsx("button",{type:"button",className:"pause-info-modal-button",onClick:ns,children:"Got it"})]})})})]})};let SS={data:""},AS=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||SS,NS=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,IS=/\/\*[^]*?\*\/|  +/g,cp=/\n+/g,Ss=(t,i)=>{let a="",u="",m="";for(let x in t){let y=t[x];x[0]=="@"?x[1]=="i"?a=x+" "+y+";":u+=x[1]=="f"?Ss(y,x):x+"{"+Ss(y,x[1]=="k"?"":i)+"}":typeof y=="object"?u+=Ss(y,i?i.replace(/([^,])+/g,b=>x.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,v=>/&/.test(v)?v.replace(/&/g,b):b?b+" "+v:v)):x):y!=null&&(x=/^--/.test(x)?x:x.replace(/[A-Z]/g,"-$&").toLowerCase(),m+=Ss.p?Ss.p(x,y):x+":"+y+";")}return a+(i&&m?i+"{"+m+"}":m)+u},Xi={},Nx=t=>{if(typeof t=="object"){let i="";for(let a in t)i+=a+Nx(t[a]);return i}return t},TS=(t,i,a,u,m)=>{let x=Nx(t),y=Xi[x]||(Xi[x]=(v=>{let C=0,S=11;for(;C<v.length;)S=101*S+v.charCodeAt(C++)>>>0;return"go"+S})(x));if(!Xi[y]){let v=x!==t?t:(C=>{let S,I,_=[{}];for(;S=NS.exec(C.replace(IS,""));)S[4]?_.shift():S[3]?(I=S[3].replace(cp," ").trim(),_.unshift(_[0][I]=_[0][I]||{})):_[0][S[1]]=S[2].replace(cp," ").trim();return _[0]})(t);Xi[y]=Ss(m?{["@keyframes "+y]:v}:v,a?"":"."+y)}let b=a&&Xi.g?Xi.g:null;return a&&(Xi.g=Xi[y]),((v,C,S,I)=>{I?C.data=C.data.replace(I,v):C.data.indexOf(v)===-1&&(C.data=S?v+C.data:C.data+v)})(Xi[y],i,u,b),y},_S=(t,i,a)=>t.reduce((u,m,x)=>{let y=i[x];if(y&&y.call){let b=y(a),v=b&&b.props&&b.props.className||/^go/.test(b)&&b;y=v?"."+v:b&&typeof b=="object"?b.props?"":Ss(b,""):b===!1?"":b}return u+m+(y??"")},"");function Qc(t){let i=this||{},a=t.call?t(i.p):t;return TS(a.unshift?a.raw?_S(a,[].slice.call(arguments,1),i.p):a.reduce((u,m)=>Object.assign(u,m&&m.call?m(i.p):m),{}):a,AS(i.target),i.g,i.o,i.k)}let Ix,Ef,Sf;Qc.bind({g:1});let qi=Qc.bind({k:1});function RS(t,i,a,u){Ss.p=i,Ix=t,Ef=a,Sf=u}function Ts(t,i){let a=this||{};return function(){let u=arguments;function m(x,y){let b=Object.assign({},x),v=b.className||m.className;a.p=Object.assign({theme:Ef&&Ef()},b),a.o=/ *go\d+/.test(v),b.className=Qc.apply(a,u)+(v?" "+v:"");let C=t;return t[0]&&(C=b.as||t,delete b.as),Sf&&C[0]&&Sf(b),Ix(C,b)}return m}}var kS=t=>typeof t=="function",jc=(t,i)=>kS(t)?t(i):t,PS=(()=>{let t=0;return()=>(++t).toString()})(),Tx=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let i=matchMedia("(prefers-reduced-motion: reduce)");t=!i||i.matches}return t}})(),MS=20,_x=(t,i)=>{switch(i.type){case 0:return{...t,toasts:[i.toast,...t.toasts].slice(0,MS)};case 1:return{...t,toasts:t.toasts.map(x=>x.id===i.toast.id?{...x,...i.toast}:x)};case 2:let{toast:a}=i;return _x(t,{type:t.toasts.find(x=>x.id===a.id)?1:0,toast:a});case 3:let{toastId:u}=i;return{...t,toasts:t.toasts.map(x=>x.id===u||u===void 0?{...x,dismissed:!0,visible:!1}:x)};case 4:return i.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(x=>x.id!==i.toastId)};case 5:return{...t,pausedAt:i.time};case 6:let m=i.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(x=>({...x,pauseDuration:x.pauseDuration+m}))}}},Nc=[],so={toasts:[],pausedAt:void 0},fo=t=>{so=_x(so,t),Nc.forEach(i=>{i(so)})},OS={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},DS=(t={})=>{let[i,a]=N.useState(so),u=N.useRef(so);N.useEffect(()=>(u.current!==so&&a(so),Nc.push(a),()=>{let x=Nc.indexOf(a);x>-1&&Nc.splice(x,1)}),[]);let m=i.toasts.map(x=>{var y,b,v;return{...t,...t[x.type],...x,removeDelay:x.removeDelay||((y=t[x.type])==null?void 0:y.removeDelay)||(t==null?void 0:t.removeDelay),duration:x.duration||((b=t[x.type])==null?void 0:b.duration)||(t==null?void 0:t.duration)||OS[x.type],style:{...t.style,...(v=t[x.type])==null?void 0:v.style,...x.style}}});return{...i,toasts:m}},LS=(t,i="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:i,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...a,id:(a==null?void 0:a.id)||PS()}),cl=t=>(i,a)=>{let u=LS(i,t,a);return fo({type:2,toast:u}),u.id},Rr=(t,i)=>cl("blank")(t,i);Rr.error=cl("error");Rr.success=cl("success");Rr.loading=cl("loading");Rr.custom=cl("custom");Rr.dismiss=t=>{fo({type:3,toastId:t})};Rr.remove=t=>fo({type:4,toastId:t});Rr.promise=(t,i,a)=>{let u=Rr.loading(i.loading,{...a,...a==null?void 0:a.loading});return typeof t=="function"&&(t=t()),t.then(m=>{let x=i.success?jc(i.success,m):void 0;return x?Rr.success(x,{id:u,...a,...a==null?void 0:a.success}):Rr.dismiss(u),m}).catch(m=>{let x=i.error?jc(i.error,m):void 0;x?Rr.error(x,{id:u,...a,...a==null?void 0:a.error}):Rr.dismiss(u)}),t};var jS=(t,i)=>{fo({type:1,toast:{id:t,height:i}})},BS=()=>{fo({type:5,time:Date.now()})},Ga=new Map,FS=1e3,VS=(t,i=FS)=>{if(Ga.has(t))return;let a=setTimeout(()=>{Ga.delete(t),fo({type:4,toastId:t})},i);Ga.set(t,a)},US=t=>{let{toasts:i,pausedAt:a}=DS(t);N.useEffect(()=>{if(a)return;let x=Date.now(),y=i.map(b=>{if(b.duration===1/0)return;let v=(b.duration||0)+b.pauseDuration-(x-b.createdAt);if(v<0){b.visible&&Rr.dismiss(b.id);return}return setTimeout(()=>Rr.dismiss(b.id),v)});return()=>{y.forEach(b=>b&&clearTimeout(b))}},[i,a]);let u=N.useCallback(()=>{a&&fo({type:6,time:Date.now()})},[a]),m=N.useCallback((x,y)=>{let{reverseOrder:b=!1,gutter:v=8,defaultPosition:C}=y||{},S=i.filter(M=>(M.position||C)===(x.position||C)&&M.height),I=S.findIndex(M=>M.id===x.id),_=S.filter((M,L)=>L<I&&M.visible).length;return S.filter(M=>M.visible).slice(...b?[_+1]:[0,_]).reduce((M,L)=>M+(L.height||0)+v,0)},[i]);return N.useEffect(()=>{i.forEach(x=>{if(x.dismissed)VS(x.id,x.removeDelay);else{let y=Ga.get(x.id);y&&(clearTimeout(y),Ga.delete(x.id))}})},[i]),{toasts:i,handlers:{updateHeight:jS,startPause:BS,endPause:u,calculateOffset:m}}},zS=qi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,WS=qi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,HS=qi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,GS=Ts("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${zS} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${WS} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${HS} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,XS=qi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,YS=Ts("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${XS} 1s linear infinite;
`,$S=qi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,ZS=qi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,KS=Ts("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${$S} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${ZS} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,qS=Ts("div")`
  position: absolute;
`,QS=Ts("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,JS=qi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,e4=Ts("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${JS} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,t4=({toast:t})=>{let{icon:i,type:a,iconTheme:u}=t;return i!==void 0?typeof i=="string"?N.createElement(e4,null,i):i:a==="blank"?null:N.createElement(QS,null,N.createElement(YS,{...u}),a!=="loading"&&N.createElement(qS,null,a==="error"?N.createElement(GS,{...u}):N.createElement(KS,{...u})))},n4=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,r4=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,i4="0%{opacity:0;} 100%{opacity:1;}",s4="0%{opacity:1;} 100%{opacity:0;}",o4=Ts("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,a4=Ts("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,l4=(t,i)=>{let a=t.includes("top")?1:-1,[u,m]=Tx()?[i4,s4]:[n4(a),r4(a)];return{animation:i?`${qi(u)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${qi(m)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},c4=N.memo(({toast:t,position:i,style:a,children:u})=>{let m=t.height?l4(t.position||i||"top-center",t.visible):{opacity:0},x=N.createElement(t4,{toast:t}),y=N.createElement(a4,{...t.ariaProps},jc(t.message,t));return N.createElement(o4,{className:t.className,style:{...m,...a,...t.style}},typeof u=="function"?u({icon:x,message:y}):N.createElement(N.Fragment,null,x,y))});RS(N.createElement);var u4=({id:t,className:i,style:a,onHeightUpdate:u,children:m})=>{let x=N.useCallback(y=>{if(y){let b=()=>{let v=y.getBoundingClientRect().height;u(t,v)};b(),new MutationObserver(b).observe(y,{subtree:!0,childList:!0,characterData:!0})}},[t,u]);return N.createElement("div",{ref:x,className:i,style:a},m)},d4=(t,i)=>{let a=t.includes("top"),u=a?{top:0}:{bottom:0},m=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Tx()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${i*(a?1:-1)}px)`,...u,...m}},f4=Qc`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,xc=16,Xa=({reverseOrder:t,position:i="top-center",toastOptions:a,gutter:u,children:m,containerStyle:x,containerClassName:y})=>{let{toasts:b,handlers:v}=US(a);return N.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:xc,left:xc,right:xc,bottom:xc,pointerEvents:"none",...x},className:y,onMouseEnter:v.startPause,onMouseLeave:v.endPause},b.map(C=>{let S=C.position||i,I=v.calculateOffset(C,{reverseOrder:t,gutter:u,defaultPosition:i}),_=d4(S,I);return N.createElement(u4,{id:C.id,key:C.id,onHeightUpdate:v.updateHeight,className:C.visible?f4:"",style:_},C.type==="custom"?jc(C.message,C):m?m(C):N.createElement(c4,{toast:C,position:S}))}))},Rn=Rr;const Gd=({direction:t="down",show:i=!0,className:a="",style:u={}})=>{if(!i)return null;const m=t==="down"?"rotate(180 16 16)":"";return h.jsxs("div",{className:`arrow-hint-container ${t} ${a}`,style:u,children:[h.jsx("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"arrow-hint-svg",children:h.jsxs("g",{transform:m,children:[h.jsx("path",{d:"M16 6v16M16 22l-7-7M16 22l7-7",stroke:"url(#arrow-gradient)",strokeWidth:"3.2",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#arrow-glow)"}),h.jsxs("defs",{children:[h.jsxs("linearGradient",{id:"arrow-gradient",x1:"16",y1:"6",x2:"16",y2:"22",gradientUnits:"userSpaceOnUse",children:[h.jsx("stop",{stopColor:"#7f5fff"}),h.jsx("stop",{offset:"0.5",stopColor:"#2e8bff"}),h.jsx("stop",{offset:"1",stopColor:"#00e0ff"})]}),h.jsx("filter",{id:"arrow-glow",x:"-10",y:"-10",width:"52",height:"52",filterUnits:"userSpaceOnUse",children:h.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"2.5",floodColor:"#7f5fff",floodOpacity:"0.5"})})]})]})}),h.jsx("div",{className:"arrow-hint-text",children:"Tap Here"})]})},h4=({isOpen:t,onClose:i,onConfirm:a,userName:u})=>t?h.jsx("div",{className:"kick-modal",children:h.jsxs("div",{className:"kick-modal-content",children:[h.jsx("h2",{className:"kick-modal-title",children:"Kick User"}),h.jsxs("p",{className:"kick-modal-message",children:["Are you sure you want to kick ",u," from the lobby?"]}),h.jsxs("div",{className:"kick-modal-actions",children:[h.jsx("button",{onClick:a,className:"admin-button admin-button-danger",children:"Yes, Kick User"}),h.jsx("button",{onClick:i,className:"admin-button admin-button-primary",children:"Cancel"})]})]})}):null,m4=({isOpen:t,onClose:i,onConfirm:a})=>t?h.jsx("div",{className:"join-modal",children:h.jsxs("div",{className:"join-modal-content",children:[h.jsx("h2",{className:"join-modal-title",children:"Join Lobby"}),h.jsx("p",{className:"join-modal-message",children:"Are you sure you want to join? You will be paired up with your attendees."}),h.jsxs("div",{className:"join-modal-actions",children:[h.jsx("button",{onClick:a,className:"admin-button admin-button-join",children:"Yes, Join Lobby"}),h.jsx("button",{onClick:i,className:"admin-button admin-button-primary",children:"Cancel"})]})]})}):null,Rx=(t,i)=>new Promise((a,u)=>{const x=new XMLSerializer().serializeToString(t),y=800,b=1e3,v=document.createElement("canvas");v.width=y,v.height=b;const C=v.getContext("2d");C.fillStyle="#ffffff",C.fillRect(0,0,y,b);const S=new window.Image;S.crossOrigin="anonymous",S.onload=()=>{const I=new window.Image;I.onload=()=>{const B=S.width/S.height*180,j=36,z=28,V=550,F=22,$=182+F,Z=j+F*1.2,re=z+32,X=$+Z,Q=re,q=b-X-Q,ge=X+(q-V)/2-35,Ne=(y-V)/2;let Ae=2;const De=(y-B)/2;C.drawImage(S,De,Ae,B,180),Ae+=180+F,C.fillStyle="#000000",C.font=`600 ${j}px Helvetica, Arial, sans-serif`,C.textAlign="center",C.textBaseline="top",C.fillText("Scan to join the ice-breaking session!",y/2,Ae),Ae+=j+F*1.2,C.drawImage(I,Ne,ge,V,V);const G=b-32-z;C.font=`${z}px Helvetica, Arial, sans-serif`,C.fillStyle="#000000",C.textBaseline="top";const je=`code (optional): ${i}`;C.fillText(je,y/2,G),v.toBlob(ye=>{ye?a(ye):u(new Error("Failed to create blob"))},"image/png")},I.onerror=()=>u(new Error("Failed to load QR code image")),I.src="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(x)))},S.onerror=()=>u(new Error("Failed to load logo image")),S.src="/assets/reuneo_test_9.png"}),p4=({lobbyState:t,playerCount:i,onStart:a,onEnd:u,lobbyCode:m,currentRound:x})=>{const y=t==="checkin",b=i>=2&&t==="checkin",v=t==="active",C=t==="active",S=t==="terminated",[I,_]=N.useState(null),[M,L]=N.useState({qr:!1}),[B,j]=N.useState(!1),z=N.useRef(!1),V=()=>{_("start")},F=()=>{_("end")},$=()=>{j(!0),_("checkin")},Z=()=>{I==="start"?(a(),Rn.success("Rounds started!",{position:"top-center"})):I==="end"&&u(),_(null)},re=()=>_(null);N.useEffect(()=>{z.current||t==="checkin"&&i===0&&(z.current=!0,j(!0),_("checkin"))},[t,i]);const X=(De,Ce)=>De?"progress-arrow active-shimmer":Ce?"progress-arrow available-shimmer":"progress-arrow inactive",Q=y&&!B&&i<6,q=t==="checkin"&&i>=6,ge=t==="active"&&x+1>=12;function Ne(De,Ce={}){const{silent:G=!1}=Ce,je=URL.createObjectURL(De),ye=document.createElement("a");ye.href=je,ye.download=`reuneo-lobby-${m}.png`,document.body.appendChild(ye),ye.click(),document.body.removeChild(ye),URL.revokeObjectURL(je),G||(L(fe=>({...fe,qr:!0})),setTimeout(()=>L(fe=>({...fe,qr:!1})),800))}const Ae=()=>{const De=document.getElementById("modal-qr-svg");De&&Rx(De,m).then(Ce=>{Ne(Ce,{silent:!0}),navigator.clipboard&&navigator.clipboard.write?navigator.clipboard.write([new window.ClipboardItem({"image/png":Ce})]).then(()=>{L(G=>({...G,qr:!0})),setTimeout(()=>L(G=>({...G,qr:!1})),800)}).catch(()=>{L(G=>({...G,qr:!0})),setTimeout(()=>L(G=>({...G,qr:!1})),800)}):(L(G=>({...G,qr:!0})),setTimeout(()=>L(G=>({...G,qr:!1})),800))}).catch(Ce=>{console.error("Error generating QR code image:",Ce),alert("Failed to generate QR code image.")})};return h.jsxs("div",{className:"lobby-progress-bar",style:{marginTop:"-1rem",height:"40px"},children:[h.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[h.jsx("div",{className:X(y,!1),tabIndex:0,title:"Check-in phase",onClick:$,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"Start Checkin"}),h.jsx(Gd,{direction:"down",show:Q})]}),h.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[h.jsx("div",{className:X(v,b&&!v),tabIndex:0,title:b?"Start rounds":"At least 2 players required",onClick:V,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"Start Rounds"}),h.jsx(Gd,{direction:"down",show:q})]}),h.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[h.jsx("div",{className:X(S,C&&!S),tabIndex:0,title:C?"End rounds":"Cannot end yet",onClick:F,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"End Rounds"}),h.jsx(Gd,{direction:"down",show:ge})]}),I&&h.jsx("div",{className:"progress-modal-overlay",children:h.jsx("div",{className:"progress-modal",children:I==="checkin"?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"progress-modal-title",children:"Check-in: Print or Display this QR code to your attendees"}),h.jsx("div",{className:"progress-modal-message",children:"They scan to join. Once you have 6-10 people ready, click 'Start Rounds' - New arrivals will get paired up in the next rounds."}),h.jsxs("div",{className:"progress-modal-qr",onClick:Ae,style:{cursor:"pointer",position:"relative"},children:[h.jsx(gh,{value:`${window.location.origin}/lobby?code=${m}`,size:200,level:"H",includeMargin:!1,bgColor:"#ffffff",fgColor:"#000000",id:"modal-qr-svg"}),h.jsx("span",{className:"copy-icon modal-copy-icon","aria-label":"Copy",style:{position:"absolute",right:8,bottom:8,background:"#fff",borderRadius:"50%",padding:"2px"},children:h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[h.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),h.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})}),M.qr&&h.jsx("span",{className:"modal-copied-feedback",style:{position:"absolute",left:"50%",bottom:"-1.5rem",transform:"translateX(-50%)",color:"#28a745",fontWeight:600,fontSize:"0.95rem"},children:"Copied!"})]}),h.jsxs("div",{style:{textAlign:"center",marginTop:"1rem",marginBottom:"0.5rem",fontSize:"1rem",color:"#3b3b3b",fontFamily:"Helvetica, Arial, sans-serif"},children:["code (optional): ",m]}),h.jsx("div",{className:"progress-modal-actions",children:h.jsx("button",{className:"progress-modal-btn confirm",onClick:re,children:"Got it"})})]}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"progress-modal-title",children:I==="start"?"Are you sure you want to start rounds? - Dont worry new people can join in the next rounds.":"Are you sure you want to end the rounds?"}),h.jsx("div",{className:"progress-modal-actions",children:I==="start"?h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"progress-modal-btn cancel",onClick:re,children:"Not Yet"}),h.jsx("button",{className:"progress-modal-btn confirm",onClick:Z,children:"Start"})]}):h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"progress-modal-btn cancel",onClick:re,children:"Keep Going"}),h.jsx("button",{className:"progress-modal-btn confirm danger",onClick:Z,children:"End"})]})})]})})})]})},g4=({players:t})=>{const i=[...t.pairedPlayers?t.pairedPlayers.flat():[],...t.lobbyData?t.lobbyData:[]],a=10,u=i.slice(0,a),m=i.length-a,x=i.length;return h.jsxs("div",{className:"overlapping-profile-list-wrapper",style:{marginTop:"3rem"},children:[h.jsxs("div",{className:"overlapping-profile-list",children:[u.map((y,b)=>h.jsx("img",{src:y.pfp_data||"/assets/player_icon_trans.png",alt:y.name||"Player",className:"overlapping-profile-img",style:{zIndex:b+1}},y.username||y.name||b)),m>0&&h.jsxs("span",{className:"overlapping-profile-overflow",children:["+ ",m]})]}),h.jsxs("div",{className:"overlapping-profile-list-label",style:{marginTop:"0.5rem",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.1)"},children:["People joined: ",x]})]})},x4=()=>{const{user:t,userProfile:i,checkAuth:a,permissions:u}=N.useContext(Hn),m=Fn(),x=Pr(),y=!1,b=Math.floor(9*60),{loadSound:v,seekTo:C,cancelSound:S,checkSound:I,soundEnabled:_,setSoundEnabled:M,isPlaying:L}=Of(),[B,j]=N.useState(!0),[z,V]=N.useState(!document.hidden),F=N.useRef(null),Z=new URLSearchParams(x.search).get("code"),[re,X]=N.useState(Z||"test");N.useEffect(()=>{Z||(console.log("No lobby code found in URL, using default 'test' value"),(async()=>{try{const Pt=await bt("/view_my_active_lobbies");if(Pt.ok){const St=await Pt.json();if(console.log("Active lobbies response:",St),St&&St.lobbies&&St.lobbies.length>0){const zt=St.lobbies[0];X(zt),window.history.replaceState({},"",`/admin_lobby_view?code=${zt}`)}}}catch(Pt){console.error("Error fetching active lobby:",Pt)}})())},[Z]);const[Q,q]=N.useState(!1),[ge,Ne]=N.useState(null),[Ae,De]=N.useState(!1),[Ce,G]=N.useState(null),[je,ye]=N.useState(null),[fe,Ve]=N.useState(null),[we,Y]=N.useState(null),[le,Te]=N.useState(null),[Ge,be]=N.useState({}),[te,Xe]=N.useState([]),[Pe,$e]=N.useState(0),kt=((je==null?void 0:je.length)||0)+((Ce==null?void 0:Ce.length)*2||0),[xe,ie]=N.useState(!1);N.useEffect(()=>{I()?M(!0):M(!1)},[]),N.useEffect(()=>{const Ee=()=>{const Pt=!document.hidden;Pt&&!z&&console.log("Page became visible - next poll will fetch latest data"),V(Pt)};return document.addEventListener("visibilitychange",Ee),()=>{document.removeEventListener("visibilitychange",Ee)}},[z]),N.useEffect(()=>{(we==="terminated"||we==="inactive")&&S()},[we]),N.useEffect(()=>{if(a(),u!=="admin"&&u!=="organizer"){m("/");return}const Ee=async St=>{if(Ge[St])return Ge[St];try{const zt=await bt(`/pfp_small_icon?username=${encodeURIComponent(St)}`);if(zt.ok){let lt=await zt.text();lt.startsWith('"')&&lt.endsWith('"')&&(lt=lt.slice(1,-1));const Wt=lt.startsWith("data:image")?lt:`data:image/jpeg;base64,${lt}`;return be(Qe=>({...Qe,[St]:Wt})),Wt}return null}catch(zt){return console.error(`Error fetching profile picture for ${St}:`,zt),null}},Pt=setInterval(async()=>{try{const St=!document.hidden,zt=await bt(`/admin_lobby_data?is_visible=${St}`,{headers:{is_visible_t_f:St?"t":"f",lobby_code:re}});if(zt.ok){const lt=await zt.json();console.log("Admin lobby data:",re,lt),(lt.lobby_state==="inactive"||lt.status==="inactive")&&S();const Wt=typeof lt.round_time_left=="number"&&!isNaN(lt.round_time_left)?lt.round_time_left:0;if(F.current=Wt,F.current!=null&&lt.lobby_state==="active"&&F.current!=0&&(C(b-F.current),console.log("seeking to",b-F.current)),lt.lobby_state==="active"&&$e(Qe=>lt.current_round>Qe?lt.current_round:Qe),lt.lobby_state==="terminated"&&($e(0),S()),lt&&lt.unpaired_players){const Qe=await Promise.all(lt.unpaired_players.map(async qe=>{const ve=await Ee(qe.username);return{...qe,pfp_data:ve}})),at=await Promise.all((lt.pairs_data||[]).map(async qe=>{const ve=await Ee(qe[0].username),se=await Ee(qe[1].username);return[{...qe[0],pfp_data:ve},{...qe[1],pfp_data:se}]}));ye(Qe),G(at),Ve(lt.round_time_left),Y(lt.lobby_state),Te(lt.lobby_duration||300),Xe(lt.custom_tags||[])}else console.error("Invalid lobby data structure:",lt),ye([]),G([])}else console.error("Failed to fetch admin lobby data:",zt.status)}catch(St){console.error("Error fetching admin lobby data:",St)}},1e3);return()=>clearInterval(Pt)},[Ge]);const ue=Ee=>{Ne(Ee),q(!0)},Re=()=>{q(!1),Ne(null)},Ze=()=>{ge&&fetch(window.server_url+"/kick_user",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"},body:JSON.stringify({username:ge.username,lobby_code:re})}).then(Ee=>{Ee.ok?console.log(`User ${ge.name} kicked successfully`):console.error(`Failed to kick user ${ge.name}`)}).catch(Ee=>{console.error("Error kicking user:",Ee)}).finally(()=>{Re()})},tt=()=>{De(!0)},ze=()=>{De(!1)},_e=()=>{m(`/lobby?code=${re}`),ze()};function We(Ee,Pt={}){const{silent:St=!1}=Pt,zt=URL.createObjectURL(Ee),lt=document.createElement("a");lt.href=zt,lt.download=`reuneo-lobby-${re}.png`,document.body.appendChild(lt),lt.click(),document.body.removeChild(lt),URL.revokeObjectURL(zt),St||Rn.success("QR code downloaded!")}async function wt(){const Ee=document.getElementById("admin-qr-svg");Ee&&Rx(Ee,re).then(Pt=>{We(Pt,{silent:!0}),navigator.clipboard&&navigator.clipboard.write?navigator.clipboard.write([new window.ClipboardItem({"image/png":Pt})]).then(()=>{Rn.success("Downloaded and copied to clipboard!")}).catch(()=>{Rn.success("QR code downloaded!")}):Rn.success("QR code downloaded!")}).catch(Pt=>{console.error("Error generating QR code image:",Pt),Rn.error("Failed to generate QR code image.")})}const Ie=()=>h.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.125)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},children:h.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",position:"relative",minWidth:"300px"},children:[h.jsx("button",{onClick:()=>j(!1),style:{color:"#144fff",position:"absolute",right:"10px",top:"10px",border:"none",background:"none",fontSize:"16px",cursor:"pointer",fontWeight:"bold",padding:"4px 8px"},children:"X"}),h.jsx("h2",{style:{marginTop:"5px"},children:"The Sound is Important"}),h.jsx("h3",{style:{marginTop:"5px"},children:"Raise your volume also"}),h.jsx("p",{style:{color:"#144dff"},children:"You'll need this for the best experience."}),h.jsx("button",{onClick:()=>{v(),j(!1)},style:{padding:"10px 20px",marginTop:"20px",backgroundColor:"#144dff",color:"#ffffff",border:"none",borderRadius:"14px",fontWeight:"bold",cursor:"pointer"},children:"Enable Sound"})]})}),vt=async()=>{await bt("/start_rounds",{method:"GET",headers:{lobby_code:re}})},Lt=async()=>{S(),(await bt("/terminate_lobby",{method:"GET",headers:{lobby_code:re}})).ok&&m("/")};return h.jsxs(h.Fragment,{children:[h.jsx(Xa,{position:"top-center"}),h.jsxs("div",{className:"admin-lobby-container",children:[y,h.jsx("div",{className:"admin-view-logo",style:{cursor:"pointer"},children:h.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Reuneo Logo",style:{maxWidth:"85px",height:"auto",objectFit:"contain",transition:"transform 0.3s ease"},onClick:()=>m("/")})}),h.jsx(p4,{lobbyState:we,playerCount:kt,onStart:vt,onEnd:Lt,lobbyCode:re,currentRound:Pe}),h.jsx(g4,{players:{pairedPlayers:Ce,lobbyData:je}}),h.jsxs("div",{className:"admin-lobby-dropdown-toggle",onClick:()=>ie(Ee=>!Ee),style:{cursor:"pointer",background:"var(--primary-color)",color:"#f5f7ff",fontWeight:700,textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",fontSize:".75rem",borderRadius:xe?"14px 14px 0 0":"14px",padding:"0.5rem 1rem",margin:"0 auto",maxWidth:420,boxShadow:"0 2px 8px rgba(20,77,255,0.08)",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s",letterSpacing:"0.5px"},children:[xe?"Hide Controls":"More Controls",h.jsx("span",{style:{marginLeft:12,fontSize:"1.2em",transition:"transform 0.3s",display:"inline-block",transform:xe?"rotate(180deg)":"rotate(0deg)"},children:""})]}),h.jsxs("div",{className:"admin-lobby-body",style:{maxHeight:xe?1e3:0,overflow:"hidden",transition:"max-height 0.5s cubic-bezier(0.4,0,0.2,1)",opacity:xe?1:0,pointerEvents:xe?"auto":"none",marginBottom:xe?"2rem":0},children:[h.jsxs("div",{className:"admin-lobby-qr",onClick:wt,style:{cursor:"pointer"},children:[h.jsxs("span",{className:"qr-label",style:{display:"flex",alignItems:"center",gap:"0.4rem",marginBottom:"0.5rem"},children:["People scan to join",h.jsx("span",{className:"copy-icon","aria-label":"Copy",children:h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[h.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),h.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})})]}),h.jsx("div",{style:{position:"relative",display:"inline-block"},children:h.jsx(gh,{value:`${window.location.origin}/lobby?code=${re}`,size:140,level:"H",includeMargin:!1,bgColor:"#ffffff",fgColor:"#000000",id:"admin-qr-svg"})}),h.jsxs("div",{className:"lobby-code-display",onClick:()=>{navigator.clipboard.writeText(re);const Ee=document.querySelector(".lobby-code-display");Ee.classList.add("copied"),setTimeout(()=>Ee.classList.remove("copied"),250)},children:[h.jsx("span",{className:"lobby-code-label",children:"lobby code:"}),h.jsx("span",{className:"lobby-code-value",children:re}),h.jsx("span",{className:"copy-icon","aria-label":"Copy",children:h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[h.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),h.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})})]})]}),h.jsxs("div",{className:"admin-lobby-event-settings",children:[h.jsxs("div",{className:"admin-profile",children:[h.jsx("img",{src:i!=null&&i.image_data?`data:image/jpeg;base64,${i.image_data}`:"/assets/player_icon_trans.png",alt:"Your Profile",className:"admin-profile-picture"}),h.jsx("span",{className:"admin-profile-name",children:i!=null&&i.name?i.name.slice(0,20):t==null?void 0:t.slice(0,20)})]}),h.jsx("button",{onClick:tt,className:"page-control-button page-control-join",style:{marginTop:".5rem"},children:"Join Rounds"}),h.jsxs("div",{className:"setting-item",style:{padding:"1rem"},children:[h.jsxs("span",{className:"setting-label",children:["Round Duration: ",h.jsxs("span",{className:"setting-value",children:[Math.floor(le/60)," min"]})]}),h.jsx("span",{className:"setting-label",style:{},children:"Tags:"}),te&&te.length>0&&h.jsx("div",{className:"setting-item",children:h.jsxs("div",{className:"tags-container",children:[te.slice(0,3).map((Ee,Pt)=>h.jsx("span",{className:"tag-pill",children:Ee},Pt)),te.length>3&&h.jsxs("span",{className:"tag-pill more-tags",children:["+",te.length-3," more"]})]})})]})]}),h.jsx("div",{className:"admin-lobby-actions"})]}),(we==="active"||we==="interrim")&&fe&&h.jsx("div",{className:"admin-lobby-timer-container",children:h.jsxs("div",{className:"admin-lobby-timer-glass",children:[h.jsx(xh,{isPlaying:we==="active",duration:le,initialRemainingTime:fe,colors:["#144dff"],size:90,strokeWidth:12,trailColor:"url(#trailGradient)",onComplete:()=>({shouldRepeat:!1}),strokeLinecap:"round",children:({remainingTime:Ee})=>{const Pt=Math.floor(Ee/60),St=Math.floor(Ee%60);return h.jsxs("span",{className:`timer-text ${Ee<=10?"timer-text-fadescale":""}`,children:[Pt,":",String(St).padStart(2,"0")]})}},`${we}-${Math.floor(fe)}`),h.jsx("span",{className:"timer-subtext",children:"round time left"}),h.jsx("svg",{width:"0",height:"0",children:h.jsx("defs",{children:h.jsxs("linearGradient",{id:"trailGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[h.jsx("stop",{offset:"0%",stopColor:"#e0e7ff"}),h.jsx("stop",{offset:"100%",stopColor:"#f5f7ff"})]})})})]})}),we!=="checkin"&&h.jsxs("div",{className:"admin-lobby-stats",children:[h.jsxs("div",{className:"stat-card",children:[h.jsx("div",{className:"stat-title",children:"Total Players"}),h.jsx("div",{className:"stat-value",children:((je==null?void 0:je.length)||0)+((Ce==null?void 0:Ce.length)*2||0)})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("div",{className:"stat-title",children:"Paired Players"}),h.jsx("div",{className:"stat-value",children:(Ce==null?void 0:Ce.length)*2||0})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("div",{className:"stat-title",children:"Unpaired Players"}),h.jsx("div",{className:"stat-value",children:(je==null?void 0:je.length)||0})]})]}),Ce&&we!=="checkin"&&h.jsx("div",{className:"admin-lobby-players",children:h.jsxs("div",{className:"player-section",children:[h.jsxs("div",{className:"section-header",children:["Paired Players: ",h.jsx("span",{className:"stat-value",style:{fontSize:"1.3rem"},children:(Ce==null?void 0:Ce.length)*2||0})]}),h.jsx("div",{className:"player-grid",children:Ce.map((Ee,Pt)=>{const St=Ee[0].match_details&&Ee[0].match_details.opponent_matched_tags&&Ee[0].match_details.opponent_matched_tags.length>0||Ee[1].match_details&&Ee[1].match_details.opponent_matched_tags&&Ee[1].match_details.opponent_matched_tags.length>0;return h.jsxs("div",{className:"paired-player-card",children:[St&&h.jsx("div",{className:"matched-pair-badge",children:"Matched"}),h.jsxs("div",{className:"paired-player",onClick:()=>ue(Ee[0]),children:[h.jsx("img",{src:Ee[0].pfp_data,alt:Ee[0].name,className:"paired-player-avatar"}),h.jsx("h3",{className:"paired-player-name",children:Ee[0].name}),Ee[0].match_details&&Ee[0].match_details.opponent_matched_tags&&Ee[0].match_details.opponent_matched_tags.length>0&&h.jsx("div",{className:"matching-tag-container",children:h.jsx("div",{className:"matched-player-tag",children:Ee[0].match_details.opponent_matched_tags.map((zt,lt)=>h.jsx("span",{className:"matching-tag-pill",children:zt},lt))})})]}),h.jsxs("div",{className:"paired-player",onClick:()=>ue(Ee[1]),children:[h.jsx("img",{src:Ee[1].pfp_data,alt:Ee[1].name,className:"paired-player-avatar"}),h.jsx("h3",{className:"paired-player-name",children:Ee[1].name}),Ee[1].match_details&&Ee[1].match_details.opponent_matched_tags&&Ee[1].match_details.opponent_matched_tags.length>0&&h.jsx("div",{className:"matching-tag-container",children:h.jsx("div",{className:"matched-player-tag",children:Ee[1].match_details.opponent_matched_tags.map((zt,lt)=>h.jsx("span",{className:"matching-tag-pill",children:zt},lt))})})]})]},Pt)})})]})}),je&&h.jsx("div",{className:"admin-lobby-players",children:h.jsxs("div",{className:"player-section",children:[h.jsxs("div",{className:"section-header",children:[we==="checkin"?"People Joined":"Unpaired Players",": ",h.jsx("span",{className:"stat-value",style:{fontSize:"1.3rem"},children:(je==null?void 0:je.length)||0})]}),h.jsx("div",{className:"player-grid",children:je.map((Ee,Pt)=>h.jsxs("div",{className:"player-card",onClick:()=>ue(Ee),children:[h.jsx("img",{src:Ee.pfp_data,alt:Ee.name,className:"player-avatar"}),h.jsx("h3",{className:"player-name",children:Ee.name})]},Pt))})]})}),h.jsx(m4,{isOpen:Ae,onClose:ze,onConfirm:_e}),h.jsx(h4,{isOpen:Q,onClose:Re,onConfirm:Ze,userName:(ge==null?void 0:ge.name)||"this user"})]}),_||!B||we=="checkin"||we==null||L?null:h.jsx(Ie,{})]})},y4=()=>{const t=Fn(),{user:i}=N.useContext(Hn),a=()=>{window.location.href="https://reunio.app/become-an-organizer"};return h.jsxs("div",{className:"product-selection-container",children:[h.jsxs("video",{className:"background-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,children:[h.jsx("source",{src:"/assets/purchase_plan_video.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]}),h.jsxs("div",{className:"product-selection-content",children:[h.jsx("div",{className:"product-selection-header",children:h.jsx("h1",{children:"Product Selection"})}),h.jsxs("div",{className:"plans-section",children:[h.jsx("h2",{children:"Available Plans"}),h.jsxs("div",{className:"plan-card",children:[h.jsx("h3",{children:"Organizer Plan"}),h.jsxs("div",{className:"plan-description",children:[h.jsx("p",{children:"Create experiences for your community with our beta plan."}),h.jsxs("ul",{children:[h.jsx("li",{children:"Create unlimited experiences"}),h.jsx("li",{children:"Access to organizer dashboard"}),h.jsx("li",{children:"Priority customer support"})]})]}),h.jsx("button",{className:"purchase-button",onClick:a,children:"Contact Us"})]})]}),h.jsx("button",{className:"back-button",onClick:()=>t("/"),children:"Home"})]})]})},w4=()=>{const{user:t,userProfile:i,checkAuth:a,permissions:u}=N.useContext(Hn),[m,x]=N.useState(""),[y,b]=N.useState(""),[v,C]=N.useState(!1),[S,I]=N.useState(""),[_,M]=N.useState(!1),[L,B]=N.useState([]),[j,z]=N.useState(""),[V,F]=N.useState("5"),[$,Z]=N.useState("0"),[re,X]=N.useState(!1),[Q,q]=N.useState(null),[ge,Ne]=N.useState(!1),[Ae,De]=N.useState(null),[Ce,G]=N.useState(null),[je,ye]=N.useState(""),[fe,Ve]=N.useState(""),[we,Y]=N.useState(null),[le,Te]=N.useState(null),[Ge,be]=N.useState(""),[te,Xe]=N.useState(!1),[Pe,$e]=N.useState(!1),[kt,xe]=N.useState({x:0,y:0}),[ie,ue]=N.useState(1),[Re,Ze]=N.useState(null),tt=8,ze=Fn(),_e=N.useRef(null);N.useEffect(()=>{window.scrollTo(0,0),t&&(x(t),b(t)),_e.current&&_e.current.focus()},[t]);const We=ve=>{const se=/^[a-z0-9]+$/;return ve.length>=2&&se.test(ve)},wt=ve=>{const se=ve.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");b(se),M(!0),setTimeout(()=>{M(!1)},500)},Ie=()=>{if(j.includes(",")){const ve=j.split(",").map(et=>et.startsWith(" ")?et.substring(1):et),se=[];ve.forEach(et=>{const nt=et.trim();nt&&!L.includes(nt)&&!se.includes(nt)&&se.push(nt)}),se.length>0&&B([...L,...se]),z("")}else j.trim()&&!L.includes(j.trim())&&(B([...L,j.trim()]),z(""))},vt=ve=>{B(L.filter(se=>se!==ve))},Lt=ve=>{ve.key==="Enter"&&j.trim()&&(ve.preventDefault(),Ie())},Ee=ve=>{ve==="icebreaker"?L.length>0||j.trim()?(De("icebreaker"),Ne(!0)):(q("icebreaker"),B([]),z("")):ve==="custom"&&q("custom")},Pt=()=>{q(Ae),B([]),z(""),Ne(!1),De(null)},St=()=>{Ne(!1),De(null)},zt=(ve,se,et)=>new Promise(nt=>{const ht=new Image;ht.onload=()=>{const Qt=document.createElement("canvas"),dn=Qt.getContext("2d");let{width:fn,height:Ue}=ht;fn>Ue?fn>se&&(Ue=Ue*se/fn,fn=se):Ue>et&&(fn=fn*et/Ue,Ue=et),Qt.width=fn,Qt.height=Ue,dn.drawImage(ht,0,0,fn,Ue);const hn=Qt.toDataURL("image/jpeg",.7);nt(hn)},ht.src=URL.createObjectURL(ve)}),lt=async ve=>{const se=ve.target.files[0];if(se){if(be(""),$e(!0),!["image/jpeg","image/jpg","image/png"].includes(se.type)){be("Invalid format. Please upload a JPG or PNG image."),$e(!1);return}if(se.size>2*1024*1024){be("File too large. Please choose an image under 2MB."),$e(!1);return}try{const et=await zt(se,400,400);G(se),Y(et),Xe(!0),$e(!1)}catch(et){console.error("Error processing image:",et),be("Error processing image. Please try again."),$e(!1)}}},Wt=(ve,se)=>{Ze(se)},Qe=async()=>{try{$e(!0);const ve=await zc(we,Re);Te(ve),Xe(!1),$e(!1)}catch(ve){console.error("Error cropping logo:",ve),be("Error processing image. Please try again."),Xe(!1),$e(!1)}},at=()=>{G(null),Y(null),Te(null),Xe(!1),$e(!1),xe({x:0,y:0}),ue(1),Ze(null),be("");const ve=document.getElementById("logoUpload");ve&&(ve.value="")},qe=async ve=>{if(ve.preventDefault(),!We(y)){I("Lobby code must be at least 2 characters long and contain only lowercase letters and numbers");return}C(!0),I("");const se=parseInt(V)*60+parseInt($);let et=null;le&&(et=le.split(",")[1]);try{const nt={lobby_code:y,custom_tags:Q==="custom"?L:[],lobby_duration:se,show_table_numbers:re};et&&(nt.logo_icon=et),je.trim()&&(nt.logo_name=je.trim()),fe.trim()&&(nt.logo_hyperlink=fe.trim());const ht=await bt("/create_lobby",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(nt)});if(ht.ok)console.log("Lobby created successfully"),console.log(await ht.json()),ze(`/admin_lobby_view?code=${y}`);else{const Qt=await ht.json();I(Qt.message||"Failed to create lobby"),console.error("Failed to create lobby")}}catch(nt){I("An error occurred while creating the lobby"),console.error("Error creating lobby:",nt)}finally{C(!1)}};return h.jsxs("div",{className:"create-lobby-background",children:[h.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Reunio Logo",className:"logo-image",onClick:()=>ze(-1)}),h.jsxs("div",{className:"create-lobby-container",children:[h.jsx("h1",{className:"create-lobby-title",children:"Create a New Lobby"}),h.jsxs("form",{onSubmit:qe,className:"create-lobby-form",children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"lobbyCode",children:"Lobby Code"}),h.jsx("input",{ref:_e,type:"text",id:"lobbyCode",value:y,onChange:wt,placeholder:"Enter lobby code (lowercase letters and numbers only)",required:!0,className:`form-input ${_?"typing":""}`,autoComplete:"off"}),h.jsx("div",{className:"input-hint",children:"lowercase letters and numbers only"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{children:"Round Duration"}),h.jsxs("div",{className:"duration-input-container",children:[h.jsxs("div",{className:"duration-input-group",children:[h.jsx("input",{type:"number",id:"minutes",value:V,onChange:ve=>{const se=ve.target.value;(se===""||parseInt(se)>0&&parseInt(se)<=tt)&&(F(se),parseInt(se)===tt&&Z("0"))},min:"1",max:tt,placeholder:`1-${tt}`,className:"form-input duration-input",autoComplete:"off"}),h.jsx("label",{htmlFor:"minutes",className:"duration-label",children:"Minutes"})]}),h.jsxs("div",{className:"duration-input-group",children:[h.jsx("input",{type:"number",id:"seconds",value:$,onChange:ve=>{const se=ve.target.value;(se===""||parseInt(se)>=0&&parseInt(se)<=59)&&Z(se)},min:"0",max:"59",placeholder:"0-59",className:"form-input duration-input",autoComplete:"off",disabled:parseInt(V)===tt}),h.jsx("label",{htmlFor:"seconds",className:"duration-label",children:"Seconds"})]})]}),h.jsxs("div",{className:"input-hint",children:["Maximum total duration is ",tt," minutes"]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"showTableNumbers",children:"Table Numbers"}),h.jsx("input",{type:"checkbox",id:"showTableNumbers",checked:re,onChange:ve=>X(ve.target.checked),className:"form-input checkbox-input"}),h.jsx("div",{className:"input-hint",children:"Recommended for events with 50+ people"}),h.jsx("div",{className:"input-hint",children:"Make sure to provide table numbers"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{children:"Matchmaking Categories"}),h.jsxs("div",{className:"matchmaking-tabs",children:[h.jsx("button",{type:"button",className:`tab-button ${Q==="icebreaker"?"tab-selected":""}`,onClick:()=>Ee("icebreaker"),children:"Community Ice Breaker"}),h.jsx("button",{type:"button",className:`tab-button ${Q==="custom"?"tab-selected":""}`,onClick:()=>Ee("custom"),children:"Custom Matching"})]}),Q==="custom"&&h.jsxs("div",{className:"custom-matching-section",children:[h.jsxs("div",{className:"tag-input-container",children:[h.jsx("input",{type:"text",id:"tagInput",value:j,onChange:ve=>z(ve.target.value),onKeyDown:Lt,placeholder:"Add categories (press + to add)",className:"form-input",autoComplete:"off"}),h.jsx("button",{type:"button",onClick:Ie,className:"tag-add-button",children:"+"})]}),L.length>0&&h.jsx("div",{className:"tag-list",children:L.map((ve,se)=>h.jsxs("div",{className:"tag-item",children:[ve,h.jsx("button",{type:"button",onClick:()=>vt(ve),className:"tag-remove-button",children:""})]},se))}),h.jsx("div",{className:"input-hint",children:"If you want to match people based on categories"})]})]}),h.jsxs("div",{className:"form-group logo-upload-section",children:[h.jsx("label",{children:"Sponsor Logo"}),!le&&!te&&h.jsxs(h.Fragment,{children:[Pe?h.jsx("div",{className:"logo-processing",children:"Processing..."}):h.jsxs(h.Fragment,{children:[h.jsx("input",{type:"file",id:"logoUpload",accept:"image/jpeg,image/jpg,image/png",onChange:lt,style:{display:"none"}}),h.jsx("button",{type:"button",onClick:()=>document.getElementById("logoUpload").click(),className:"logo-upload-button",children:"Upload Logo"})]}),Ge&&h.jsx("div",{className:"logo-error-message",children:Ge})]}),te&&we&&h.jsxs("div",{className:"logo-crop-container",children:[h.jsx("div",{className:"logo-crop-area",children:h.jsx(Uc,{image:we,crop:kt,zoom:ie,aspect:1,onCropChange:xe,onZoomChange:ue,onCropComplete:Wt})}),h.jsxs("div",{className:"logo-crop-controls",children:[h.jsx("button",{type:"button",onClick:Qe,className:"logo-save-button",disabled:Pe,children:Pe?"Processing...":"Save Crop"}),h.jsx("button",{type:"button",onClick:at,className:"logo-cancel-button",children:"Cancel"})]})]}),le&&!te&&h.jsx("div",{className:"logo-preview-container",children:h.jsxs("div",{className:"logo-preview",children:[h.jsx("img",{src:le,alt:"Logo preview",className:"logo-preview-image"}),h.jsx("button",{type:"button",onClick:at,className:"logo-remove-button",children:""})]})}),!1]}),S&&h.jsx("div",{className:"error-message",children:S}),h.jsx("button",{type:"submit",className:"submit-button",disabled:v,children:v?"Creating...":"Create Lobby"})]})]}),ge&&h.jsx("div",{className:"modal-overlay",children:h.jsxs("div",{className:"modal-content",children:[h.jsx("h3",{children:"Switch to Community Ice Breaker?"}),h.jsx("p",{children:"This will clear your current matching categories."}),h.jsxs("div",{className:"modal-buttons",children:[h.jsx("button",{type:"button",onClick:St,className:"modal-button modal-cancel",children:"Cancel"}),h.jsx("button",{type:"button",onClick:Pt,className:"modal-button modal-confirm",children:"Confirm"})]})]})})]})},v4=t=>{try{const i=new URLSearchParams(t||window.location.search),a=i.get("via")||"",u=i.get("rewardful")||i.get("rewardful_referral")||"",m=typeof window<"u"&&window.Rewardful&&window.Rewardful.referral||"",x=typeof window<"u"&&window.localStorage&&window.localStorage.getItem("rewardful_referral")||"",y=m||u||a||x||"";return y&&typeof window<"u"&&window.localStorage&&window.localStorage.setItem("rewardful_referral",y),y}catch{return""}},C4=()=>{const{login:t,user:i,checkAuth:a,permissions:u}=N.useContext(Hn),[m,x]=N.useState(""),[y,b]=N.useState(""),[v,C]=N.useState(""),[S,I]=N.useState(""),[_,M]=N.useState(""),[L,B]=N.useState(""),[j,z]=N.useState({}),[V,F]=N.useState(""),[$,Z]=N.useState(!1),re=Fn(),X=Pr();N.useEffect(()=>{localStorage.getItem("access_token")&&!i&&a()},[]),N.useEffect(()=>{u!==null&&(u==="admin"||u==="organizer")&&re("/")},[u,re]),N.useEffect(()=>{(async()=>{if(i!==null&&u!==null&&u!=="admin"&&u!=="organizer")try{if(!localStorage.getItem("access_token"))return;const Xe=await bt("/check-subscription-status");Xe.ok&&(await Xe.json()).has_access===!0&&re("/organizer-account-details")}catch(te){console.error("Error checking subscription status:",te)}})()},[i,u,re]);const Q=be=>{const te=/^[a-z0-9]+$/;return be.length>=2&&te.test(be)},q=be=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(be)&&be.trim()!=="",ge=be=>be.replace(/\D/g,"").length===10,Ne=be=>be.trim().length>=2,Ae=be=>{const te=be.replace(/\D/g,"");return te.length===0?"":te.length<=3?`(${te}`:te.length<=6?`(${te.slice(0,3)}) ${te.slice(3)}`:`(${te.slice(0,3)}) ${te.slice(3,6)}-${te.slice(6,10)}`},De=be=>be.replace(/\D/g,""),Ce=be=>{const te=be.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");x(te),V&&F("")},G=be=>{b(be.target.value),V&&F(""),j.email&&z(te=>({...te,email:""}))},je=be=>{const te=be.target.value;C(te),V&&F(""),j.phone&&z(Xe=>({...Xe,phone:""}))},ye=()=>{const be=Ae(v);C(be),be&&!ge(be)?z(te=>({...te,phone:"Invalid phone number"})):z(te=>({...te,phone:""}))},fe=be=>{const te=be.target.value;I(te),V&&F(""),j.cityState&&z(Xe=>({...Xe,cityState:""}))},Ve=()=>{S&&!Ne(S)?z(be=>({...be,cityState:"City/State must be at least 2 characters"})):z(be=>({...be,cityState:""}))},we=be=>{M(be.target.value),j.eventType&&z(te=>({...te,eventType:""}))},Y=be=>{B(be.target.value),j.avgAttendees&&z(te=>({...te,avgAttendees:""}))},le=async be=>{be.preventDefault(),F(""),Z(!0);const te=i!==null;if(!te&&(!m||!Q(m))){F("Username must be at least 2 characters and contain only lowercase letters and numbers"),Z(!1);return}if(!y||!q(y)){z(xe=>({...xe,email:"Please enter a valid email address"})),F("Please enter a valid email address"),Z(!1);return}const Xe=De(v);if(!v||!ge(v)){z(xe=>({...xe,phone:"Please enter a valid phone number"})),F("Please enter a valid phone number"),Z(!1);return}if(!S||!Ne(S)){z(xe=>({...xe,cityState:"City/State is required (minimum 2 characters)"})),F("City/State is required (minimum 2 characters)"),Z(!1);return}const Pe=new URLSearchParams(X.search),$e=v4(X.search),kt=Pe.get("ref")||Pe.get("affiliate_code")||"";if(te){if(!localStorage.getItem("access_token")){F("Authentication required. Please log in again."),Z(!1);return}try{if(!(await bt("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone_number:Xe,city_state:S,event_type:_||"",avg_attendees:L||""})})).ok)throw new Error("Failed to update profile");const ue=await bt("/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:y,rewardful_referral:$e,affiliate_code:kt})}),Re=await ue.json();if(!ue.ok||Re.error){if(Re.error&&Re.error.includes("already have an active subscription")){re("/organizer-account-details");return}F(Re.error||"Failed to create checkout session. Please try again."),Z(!1);return}window.location.href=Re.checkout_url;return}catch(ie){console.error("Error creating checkout session:",ie),F("An error occurred. Please try again."),Z(!1);return}}try{const ie=await bt("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:m,password:m})}),ue=await ie.json();if(ue.error==="Username already taken"){F("Username is taken"),Z(!1);return}if(!ie.ok){F(ue.message||"Signup failed"),Z(!1);return}if(t(ue),await a(),!localStorage.getItem("access_token"))throw new Error("Authentication failed");const Ze=await fetch("/assets/fakeprofile.png");if(!Ze.ok)throw new Error("Failed to fetch profile image");const ze=await(await Ze.blob()).arrayBuffer(),_e=btoa(new Uint8Array(ze).reduce((vt,Lt)=>vt+String.fromCharCode(Lt),""));if(!(await bt("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:m,image_data:_e,phone_number:Xe,city_state:S,event_type:_||"",avg_attendees:L||""})})).ok)throw new Error("Failed to update profile");await a();const wt=await bt("/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:y,rewardful_referral:$e,affiliate_code:kt})}),Ie=await wt.json();if(!wt.ok||Ie.error){if(Ie.error&&Ie.error.includes("already have an active subscription")){re("/organizer-account-details");return}throw new Error(Ie.error||"Failed to create checkout session")}window.location.href=Ie.checkout_url}catch(xe){console.error("Error:",xe),F("An error occurred. Please try again."),Z(!1)}},Te=i===null,Ge=$||u==="admin"||u==="organizer";return h.jsxs("div",{className:"signup-container",children:[h.jsx("button",{onClick:()=>re("/"),className:"homescreen-button",children:"Home"}),h.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),h.jsx("h3",{className:"signup-header",children:"Become an Organizer"}),h.jsx("div",{className:"step-form-container",children:h.jsxs("form",{onSubmit:le,children:[h.jsxs("div",{style:{display:Te?"block":"none"},children:[h.jsx("label",{className:"step-label",children:"Username"}),h.jsx("input",{type:"text",value:m,onChange:Ce,placeholder:"Enter a username",className:"step-input",autoFocus:Te}),m.length>0&&h.jsxs("div",{className:"username-info-message",children:[h.jsxs("svg",{className:"info-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[h.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),h.jsx("path",{d:"M8 5V7M8 11V9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),h.jsx("circle",{cx:"8",cy:"5",r:"0.5",fill:"currentColor"})]}),h.jsx("span",{children:"This will be your temporary password"})]})]}),h.jsxs("div",{style:{marginTop:Te?"20px":"0"},children:[h.jsxs("label",{className:"step-label",children:["Email",j.email&&h.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[h.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),h.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),h.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),h.jsx("input",{type:"email",value:y,onChange:G,placeholder:"Enter your email",className:`step-input ${j.email?"input-error":""}`,autoFocus:!Te})]}),h.jsxs("div",{style:{marginTop:"20px"},children:[h.jsxs("label",{className:"step-label",children:["Phone Number",j.phone&&h.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[h.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),h.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),h.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),h.jsx("input",{type:"tel",value:v,onChange:je,onBlur:ye,placeholder:"(123) 456-7890",className:`step-input ${j.phone?"input-error":""}`})]}),h.jsxs("div",{style:{marginTop:"20px"},children:[h.jsxs("label",{className:"step-label",children:["City / State",j.cityState&&h.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[h.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),h.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),h.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),h.jsx("input",{type:"text",value:S,onChange:fe,onBlur:Ve,placeholder:"City / State",className:`step-input ${j.cityState?"input-error":""}`})]}),h.jsxs("div",{style:{marginTop:"20px"},children:[h.jsx("label",{className:"step-label",children:"What events do you host?"}),h.jsxs("select",{value:_,onChange:we,className:"step-select",children:[h.jsx("option",{value:"",children:"Select an option..."}),h.jsx("option",{value:"Hospitality-Restaurants",children:"Hospitality-Restaurants"}),h.jsx("option",{value:"Social",children:"Social"}),h.jsx("option",{value:"Residential",children:"Residential"}),h.jsx("option",{value:"Business Networking",children:"Business Networking"}),h.jsx("option",{value:"Event Specialist",children:"Event Specialist"}),h.jsx("option",{value:"Education",children:"Education"}),h.jsx("option",{value:"HR-Team Building",children:"HR-Team Building"}),h.jsx("option",{value:"Corporate",children:"Corporate"}),h.jsx("option",{value:"Co-working",children:"Co-working"}),h.jsx("option",{value:"Dating",children:"Dating"}),h.jsx("option",{value:"Other",children:"Other"})]})]}),h.jsxs("div",{style:{marginTop:"20px"},children:[h.jsx("label",{className:"step-label",children:"Avg # of attendees"}),h.jsxs("select",{value:L,onChange:Y,className:"step-select",children:[h.jsx("option",{value:"",children:"Select an option..."}),h.jsx("option",{value:"5-15",children:"5-15"}),h.jsx("option",{value:"15-30",children:"15-30"}),h.jsx("option",{value:"30-50",children:"30-50"}),h.jsx("option",{value:"50-75",children:"50-75"}),h.jsx("option",{value:"75-100",children:"75-100"}),h.jsx("option",{value:"100-150",children:"100-150"}),h.jsx("option",{value:"150-200",children:"150-200"}),h.jsx("option",{value:"200+",children:"200+"})]})]}),V&&h.jsx("div",{className:"error-message",style:{marginTop:"15px",marginBottom:"10px"},children:V}),h.jsx("button",{type:"submit",className:"primary-button",disabled:Ge,style:{marginTop:"20px"},children:$?"Loading...":"Submit"})]})})]})},b4=()=>{const[t,i]=N.useState(!1),[a,u]=N.useState(""),m=N.useRef(null),x=Fn(),y=Pr();return N.useEffect(()=>{const v=new URLSearchParams(y.search).get("session_id");return(async()=>{let S="/";if(!v){u("Missing session ID"),i(!0),m.current=setTimeout(()=>{i(!1),x(S)},2e3);return}try{if(!localStorage.getItem("access_token")){u("Authentication required"),i(!0),m.current=setTimeout(()=>{i(!1),x(S)},2e3);return}const _=await bt(`/organizer-signup-success?session_id=${v}`),M=await _.json();if(!_.ok||M.error)console.error("Payment verification failed:",M.error),u(M.error||"Payment verification failed");else try{const L=await bt("/view_my_active_lobbies");if(L.ok){const B=await L.json();S=!!(B&&Array.isArray(B.lobbies)&&B.lobbies.length>0)?"/":"/create_lobby"}else S="/"}catch(L){console.error("Error checking active lobbies:",L),S="/"}}catch(I){console.error("Error verifying payment:",I),u("Failed to verify payment")}i(!0),m.current=setTimeout(()=>{i(!1),x(S)},2e3)})(),()=>{m.current&&(clearTimeout(m.current),m.current=null)}},[y.search,x]),t?h.jsxs("div",{className:"success-overlay",children:[h.jsx("div",{className:"success-text",children:"Success! You're now an organizer!"}),a&&h.jsx("div",{className:"success-error",style:{marginTop:"20px"},children:a})]}):h.jsx("div",{className:"signup-container",children:h.jsx("div",{className:"loading-message",children:"Processing..."})})},E4=()=>{const{user:t,checkAuth:i,permissions:a}=N.useContext(Hn),u=Fn(),[m,x]=N.useState(null),[y,b]=N.useState(!0),[v,C]=N.useState(!1),[S,I]=N.useState(""),[_,M]=N.useState(!1),[L,B]=N.useState(!1);N.useEffect(()=>{a!==null&&a!=="admin"&&a!=="organizer"&&u("/organizer-signup")},[a,u]),N.useEffect(()=>{t&&(async()=>{try{const F=await bt("/organizer-account-details"),$=await F.json();if(!F.ok||$.error){if((a==="admin"||a==="organizer")&&$.has_subscription!==!1){I($.error||"Some subscription details may be incomplete"),x($),b(!1);return}if($.has_subscription===!1){u("/organizer-signup");return}I($.error||"Failed to load account details"),$.has_subscription!==!1&&x($),b(!1);return}if($.has_subscription===!1){u("/organizer-signup");return}x($)}catch(F){console.error("Error fetching account details:",F),I("Failed to load account details. Please try again.")}finally{b(!1)}})()},[t,a,u]),N.useEffect(()=>(_?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[_]);const j=V=>V?new Date(V*1e3).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):null,z=async()=>{C(!0),I("");try{const V=await bt("/cancel-subscription",{method:"POST",headers:{"Content-Type":"application/json"}}),F=await V.json();if(!V.ok||F.error){I(F.error||"Failed to cancel subscription"),C(!1),M(!1);return}B(!0),M(!1),setTimeout(()=>{u("/")},1500)}catch(V){console.error("Error canceling subscription:",V),I("An error occurred. Please try again."),C(!1),M(!1)}};return y?h.jsx("div",{className:"signup-container",children:h.jsx("div",{className:"loading-message",children:"Loading account details..."})}):!m&&!y?h.jsxs("div",{className:"signup-container",children:[h.jsx("button",{onClick:()=>u("/"),className:"homescreen-button",children:"Home"}),h.jsx("div",{className:"error-message",children:S||"No account details found"})]}):m?h.jsxs("div",{className:"signup-container",children:[h.jsx("button",{onClick:()=>u("/"),className:"homescreen-button",children:"Home"}),h.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),h.jsx("h3",{className:"signup-header",children:"Organizer Account Details"}),h.jsx("div",{className:"step-form-container",children:h.jsxs("div",{className:"account-details-content",children:[S&&h.jsx("div",{className:"error-message",style:{marginBottom:"20px"},children:S}),m.subscription_status&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Subscription Status:"}),h.jsx("span",{className:`detail-value status-${m.subscription_status}`,children:m.subscription_status})]}),m.email&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Email:"}),h.jsx("span",{className:"detail-value",children:m.email})]}),m.billing_period&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Billing Period:"}),h.jsx("span",{className:"detail-value",children:m.billing_period})]}),m.amount!==null&&m.amount!==void 0&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Amount:"}),h.jsxs("span",{className:"detail-value",children:["$",m.amount," ",m.currency||""]})]}),m.current_period_start&&j(m.current_period_start)&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Current Period Start:"}),h.jsx("span",{className:"detail-value",children:j(m.current_period_start)})]}),m.current_period_end&&j(m.current_period_end)&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Current Period End:"}),h.jsx("span",{className:"detail-value",children:j(m.current_period_end)})]}),m.cancel_at_period_end&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Cancellation:"}),h.jsx("span",{className:"detail-value",children:"Will cancel at period end"})]}),h.jsx("button",{onClick:()=>M(!0),className:"primary-button cancel-button",style:{marginTop:"30px"},children:"Cancel Subscription"})]})}),_&&h.jsx("div",{className:"modal-overlay",onClick:V=>V.stopPropagation(),children:h.jsxs("div",{className:"modal-content",onClick:V=>V.stopPropagation(),children:[h.jsx("h3",{children:"Cancel Subscription"}),h.jsx("p",{children:"Are you sure you want to cancel your subscription?"}),h.jsxs("div",{className:"modal-buttons",children:[h.jsx("button",{className:"modal-button modal-cancel",onClick:()=>M(!1),disabled:v,children:"Cancel"}),h.jsx("button",{className:"modal-button modal-confirm",onClick:z,disabled:v,children:v?"Processing...":"Confirm"})]})]})}),L&&h.jsx("div",{className:"toast-container",children:h.jsx("div",{className:"toast-message",children:"Subscription canceled successfully"})})]}):null},Af=({size:t=60,className:i=""})=>h.jsx("div",{className:`attendees-spinner ${i}`,style:{width:t,height:t},children:h.jsx("div",{className:"attendees-spinner-inner"})}),Xd=["#6366f1","#8b5cf6","#ec4899","#f59e0b","#10b981","#3b82f6","#ef4444","#14b8a6","#f97316","#a855f7","#06b6d4","#84cc16"],S4=t=>{if(!t)return Xd[0];let i=0;for(let u=0;u<t.length;u++)i=t.charCodeAt(u)+((i<<5)-i);const a=Math.abs(i)%Xd.length;return Xd[a]},Nf=$t.memo(({tag:t})=>{const i=S4(t);return h.jsx("span",{className:"attendee-modal-tag-pill",style:{background:i},children:t})});Nf.displayName="TagPill";const A4=t=>{if(!t)return"Date not available";let i;if(typeof t=="number")i=t<1e10?new Date(t*1e3):new Date(t);else if(typeof t=="string")i=new Date(t);else return"Date not available";return isNaN(i.getTime())?"Date not available":i.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},N4=({attendees:t=[]})=>{const i=N.useRef(null),a=N.useRef(null),u=N.useRef(null),[m,x]=N.useState(null),[y,b]=N.useState(!1),[v,C]=N.useState({}),[S,I]=N.useState(!1),[_,M]=N.useState({}),L=N.useRef(-1),B=N.useRef(null),[j,z]=N.useState(!1),[V,F]=N.useState(null),[$,Z]=N.useState({}),[re,X]=N.useState(!1),[Q,q]=N.useState(null),[ge,Ne]=N.useState(null),[Ae,De]=N.useState(!1),Ce=N.useRef(null),G=N.useRef(null),je=N.useRef({}),ye=N.useRef(null);N.useEffect(()=>{const ie=window.matchMedia("(pointer: coarse)"),ue=()=>b(!!ie.matches);return ue(),ie.addEventListener?ie.addEventListener("change",ue):ie.addListener(ue),()=>{ie.removeEventListener?ie.removeEventListener("change",ue):ie.removeListener(ue)}},[]),N.useEffect(()=>{const ie=ue=>{a.current&&(a.current.contains(ue.target)||x(null))};return document.addEventListener("pointerdown",ie,{capture:!0}),()=>{document.removeEventListener("pointerdown",ie,{capture:!0})}},[]);const fe=N.useCallback((ie=1)=>{const ue=i.current;if(!ue)return;const Re=Math.round(ue.clientWidth*.75)*ie;ue.scrollBy({left:Re,behavior:"smooth"})},[]),Ve=N.useCallback(()=>{const ie=i.current;return ie?ie.scrollLeft>0:!1},[]),we=N.useCallback(()=>{const ie=i.current;return ie?ie.scrollLeft<ie.scrollWidth-ie.clientWidth-1:!1},[]),[Y,le]=N.useState({left:!1,right:!0});N.useEffect(()=>{const ie=()=>{le({left:Ve(),right:we()})},ue=i.current;return ue&&(ie(),ue.addEventListener("scroll",ie),window.addEventListener("resize",ie)),()=>{ue&&(ue.removeEventListener("scroll",ie),window.removeEventListener("resize",ie))}},[t.length,Ve,we]);const Te=N.useCallback(async ie=>{if(S||ie.length===0)return;const ue=ie.filter(Ze=>!v[Ze]&&!_[Ze]);if(ue.length===0)return;I(!0);const Re={..._};ue.forEach(Ze=>{Re[Ze]=!0}),M(Re);try{const Ze=await bt("/organizer_attendees/images",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({usernames:ue})});if(!Ze.ok)throw Ze.status===401?new Error("Unauthorized"):new Error("Failed to load images");const tt=await Ze.json();if(tt.status==="success"&&tt.images){const ze={...v};ue.forEach(_e=>{tt.images[_e]?ze[_e]=`data:image/jpeg;base64,${tt.images[_e]}`:ze[_e]=null}),C(ze)}}catch(Ze){console.error("Error loading images:",Ze)}finally{I(!1);const Ze={..._};ue.forEach(tt=>{delete Ze[tt]}),M(Ze)}},[S,v,_]);N.useEffect(()=>{if(t.length===0||L.current>=0)return;const ie=t.slice(0,30).map(ue=>ue.username);ie.length>0&&(Te(ie),L.current=Math.min(29,t.length-1))},[t.length,Te]),N.useEffect(()=>{if(t.length===0||!i.current)return;const ie=new IntersectionObserver(Re=>{B.current&&clearTimeout(B.current),B.current=setTimeout(()=>{Re.forEach(Ze=>{if(Ze.isIntersecting){const tt=parseInt(Ze.target.dataset.index),ze=L.current;if(tt>=ze-5&&tt<t.length&&ze<t.length-1){const _e=ze+1,We=Math.min(_e+30,t.length);if(_e<t.length){const wt=t.slice(_e,We).map(Ie=>Ie.username);Te(wt),L.current=We-1}}}})},150)},{root:i.current,rootMargin:"200px",threshold:.5});return i.current.querySelectorAll("[data-index]").forEach(Re=>ie.observe(Re)),u.current=ie,()=>{B.current&&clearTimeout(B.current),u.current&&u.current.disconnect()}},[t.length,Te]);const Ge=N.useCallback(()=>!V||t.length===0?-1:t.findIndex(ie=>ie.username===V),[V,t]),be=N.useCallback(ie=>{var Ze;const ue=Ge();if(ue===-1||t.length===0)return null;let Re;return ie==="next"?Re=(ue+1)%t.length:Re=ue===0?t.length-1:ue-1,((Ze=t[Re])==null?void 0:Ze.username)||null},[Ge,t]),te=N.useCallback(async ie=>{const ue=be(ie);ue&&(Ne(ie==="next"?"left":"right"),ye.current&&clearTimeout(ye.current),ye.current=setTimeout(()=>{Ne(null),ye.current=null},400),await $e(ue,!1))},[be]),Xe=N.useMemo(()=>!(t.length<=1),[t.length]),Pe=N.useMemo(()=>!(t.length<=1),[t.length]),$e=N.useCallback(async(ie,ue=!0)=>{var Re,Ze,tt,ze;if(je.current[ie]){F(ie),z(!0),q(null),De(ue);return}Ce.current&&Ce.current,Ce.current=ie,X(!0),q(null),z(!0),F(ie),De(ue);try{const _e=await bt(`/organizer_attendees/${ie}/details`);if(Ce.current!==ie)return;if(_e.status===401)throw localStorage.removeItem("access_token"),new Error("Session expired. Please log in again.");if(_e.status===403)throw new Error("Access denied. Organizer permissions required.");if(_e.status===404)throw new Error("Attendee details not found.");if(!_e.ok)throw new Error("Failed to load attendee details");const We=await _e.json();if(We.status==="success"&&We.attendee){const wt={username:We.attendee.username,name:We.attendee.name||We.attendee.username,image_data:We.attendee.image_data?`data:image/jpeg;base64,${We.attendee.image_data}`:null,last_joined_date:We.attendee.last_joined_date,self_tags:((Re=We.attendee.tags)==null?void 0:Re.tags_work)||[],desiring_tags:((Ze=We.attendee.tags)==null?void 0:Ze.desiring_tags_work)||[],lobbies_attended:((tt=We.attendee.stats)==null?void 0:tt.lobbies_attended)||0,rounds_paired:((ze=We.attendee.stats)==null?void 0:ze.rounds_paired)||0};Z(Ie=>{const vt={...Ie,[ie]:wt};return je.current=vt,vt}),Ce.current===ie&&F(ie)}else throw new Error(We.error||"Failed to load attendee details")}catch(_e){Ce.current===ie&&(console.error("Error fetching attendee details:",_e),q(_e.message||"An error occurred while loading details."))}finally{Ce.current===ie&&(X(!1),Ce.current=null)}},[]),kt=N.useCallback(()=>{G.current&&clearTimeout(G.current),ye.current&&clearTimeout(ye.current),z(!1),q(null),Ne(null),De(!1),G.current=setTimeout(()=>{F(null),G.current=null},300)},[]);N.useEffect(()=>()=>{G.current&&clearTimeout(G.current)},[]),N.useEffect(()=>{const ie=ue=>{ue.key==="Escape"&&j&&(ue.stopPropagation(),kt())};return document.addEventListener("keydown",ie,!0),()=>document.removeEventListener("keydown",ie,!0)},[j,kt]),N.useEffect(()=>{if(j){const ie=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=ie}}},[j]),N.useEffect(()=>()=>{ye.current&&clearTimeout(ye.current)},[]);const xe=N.useMemo(()=>t.map((ie,ue)=>({username:ie.username||`temp-${ue}`,name:ie.name||ie.username||`User ${ue+1}`,small_image_data:ie.small_image_data||null})),[t]);return h.jsxs("section",{className:`attendees-root ${j&&Ae?"attendees-root-modal-open":""}`,ref:a,"aria-label":"Your Community",children:[h.jsxs("div",{className:"attendees-card",children:[h.jsx("header",{className:"attendees-header",children:h.jsx("h2",{className:"attendees-title",children:"Your Community"})}),h.jsxs("div",{className:"attendees-carouselWrap",children:[h.jsx("button",{type:"button",className:"attendees-arrow attendees-arrowLeft","aria-label":"Scroll left",onClick:()=>fe(-1),disabled:!Y.left||y,children:""}),h.jsx("div",{ref:i,className:"attendees-scroller",role:"list","aria-label":"Community attendees list",onMouseLeave:()=>{y||x(null)},children:xe.map((ie,ue)=>{const Re=m===ie.username,Ze=m!==null,tt=v[ie.username],ze=_[ie.username];return h.jsxs("div",{"data-index":ue,className:["attendees-item",Re?"is-active":"",Ze&&!Re?"is-dimmed":"",y?"is-touch":"is-mouse"].join(" "),role:"listitem",tabIndex:0,onMouseEnter:()=>{y||x(ie.username)},onFocus:()=>x(ie.username),onClick:()=>{y&&x(ie.username),$e(ie.username,!0)},onKeyDown:_e=>{(_e.key==="Enter"||_e.key===" ")&&(_e.preventDefault(),x(ie.username)),_e.key==="Escape"&&x(null)},children:[h.jsx("div",{className:"attendees-avatarWrap","aria-hidden":"true",children:ze?h.jsx(Af,{size:30,className:"attendees-tile-spinner"}):tt?h.jsx("img",{className:"attendees-avatarImg",src:tt,alt:"",onError:_e=>{_e.target.src="/assets/fakeprofile.png"}}):h.jsx("img",{className:"attendees-avatarImg",src:"/assets/fakeprofile.png",alt:""})}),h.jsx("div",{className:"attendees-name",title:ie.name,children:ie.name})]},ie.username)})}),h.jsx("button",{type:"button",className:"attendees-arrow attendees-arrowRight","aria-label":"Scroll right",onClick:()=>fe(1),disabled:!Y.right||y,children:""})]}),h.jsxs("div",{className:"attendees-dots","aria-hidden":"true",children:[h.jsx("span",{className:"attendees-dot is-on"}),h.jsx("span",{className:"attendees-dot"}),h.jsx("span",{className:"attendees-dot"}),h.jsx("span",{className:"attendees-dot"})]})]}),j&&h.jsxs(h.Fragment,{children:[t.length>1&&h.jsxs(h.Fragment,{children:[h.jsx("button",{type:"button",className:"attendee-modal-nav-arrow attendee-modal-nav-left",onClick:ie=>{ie.stopPropagation(),te("prev")},disabled:!Xe,children:""}),h.jsx("button",{type:"button",className:"attendee-modal-nav-arrow attendee-modal-nav-right",onClick:ie=>{ie.stopPropagation(),te("next")},disabled:!Pe,children:""})]}),h.jsx("div",{className:"attendee-modal-overlay",onClick:kt,children:h.jsx("div",{className:`attendee-modal-content ${ge?`swipe-${ge}`:""}`,onClick:ie=>ie.stopPropagation(),children:re?h.jsxs("div",{className:"attendee-modal-loading",children:[h.jsx(Af,{size:60}),h.jsx("p",{children:"Loading attendee details..."})]}):Q?h.jsx("div",{className:"attendee-modal-error",children:h.jsx("p",{className:"attendee-modal-error-message",children:Q})}):V&&$[V]?h.jsx("div",{className:"attendee-modal-inner",children:(()=>{const ie=$[V];return h.jsxs(h.Fragment,{children:[h.jsx("h2",{className:"attendee-modal-header",id:"attendee-modal-title",children:ie.name}),h.jsxs("div",{className:"attendee-modal-grid",children:[h.jsxs("div",{className:"attendee-modal-left",children:[h.jsx("div",{className:"attendee-modal-date",children:A4(ie.last_joined_date)}),h.jsxs("div",{className:"attendee-modal-profile-card",children:[h.jsx("div",{className:"attendee-modal-profile-img-wrapper",children:ie.image_data?h.jsx("img",{className:"attendee-modal-profile-img",src:ie.image_data,alt:ie.name,onError:ue=>{ue.target.src="/assets/fakeprofile.png"}}):h.jsx("img",{className:"attendee-modal-profile-img",src:"/assets/fakeprofile.png",alt:ie.name})}),h.jsx("div",{className:"attendee-modal-profile-footer",children:ie.name})]})]}),h.jsxs("div",{className:"attendee-modal-right",children:[h.jsxs("div",{className:"attendee-modal-stat",children:[h.jsx("span",{className:"attendee-modal-stat-label",children:"events attended"}),h.jsx("span",{className:"attendee-modal-stat-value",children:ie.lobbies_attended})]}),h.jsxs("div",{className:"attendee-modal-stat",children:[h.jsx("span",{className:"attendee-modal-stat-label",children:"real connections"}),h.jsxs("div",{className:"attendee-modal-stat-value-with-icons",children:[h.jsx("span",{className:"attendee-modal-stat-value",children:ie.rounds_paired}),h.jsx("div",{className:"attendee-modal-staggered-icons",children:[...Array(4)].map((ue,Re)=>h.jsx("img",{className:"attendee-modal-staggered-icon",src:"/assets/fakeprofile.png",alt:""},Re))})]})]}),h.jsxs("div",{className:"attendee-modal-tags-section",children:[h.jsx("h3",{className:"attendee-modal-tags-label",children:"who I am:"}),h.jsx("div",{className:"attendee-modal-tags-container",children:ie.self_tags&&ie.self_tags.length>0?ie.self_tags.map((ue,Re)=>h.jsx(Nf,{tag:ue},`self-${Re}-${ue}`)):h.jsx("span",{className:"attendee-modal-empty-state",children:"No tags"})})]}),h.jsxs("div",{className:"attendee-modal-tags-section",children:[h.jsx("h3",{className:"attendee-modal-tags-label",children:"looking for:"}),h.jsx("div",{className:"attendee-modal-tags-container",children:ie.desiring_tags&&ie.desiring_tags.length>0?ie.desiring_tags.map((ue,Re)=>h.jsx(Nf,{tag:ue},`desiring-${Re}-${ue}`)):h.jsx("span",{className:"attendee-modal-empty-state",children:"No tags"})})]})]})]})]})})()}):null})})]})]})},I4=()=>{const{user:t,permissions:i,checkAuth:a}=N.useContext(Hn),u=Fn(),[m,x]=N.useState([]),[y,b]=N.useState(!0),[v,C]=N.useState(null);N.useEffect(()=>{i!==null&&i!=="admin"&&i!=="organizer"&&u("/organizer-signup")},[i,u]),N.useEffect(()=>{a()},[a]);const S=N.useCallback(async()=>{b(!0),C(null);try{const I=await bt("/organizer_attendees");if(I.status===401){localStorage.removeItem("access_token"),u("/organizer-signup");return}if(I.status===403){C("Access denied. Organizer permissions required."),b(!1);return}if(!I.ok)throw new Error("Failed to load attendees");const _=await I.json();if(_.status==="success")x(_.attendees||[]);else throw new Error(_.error||"Failed to load attendees")}catch(I){console.error("Error fetching attendees:",I),I.message==="Failed to fetch"||I.message.includes("network")?C("Network error. Please check your connection and try again."):C(I.message||"An error occurred. Please try again.")}finally{b(!1)}},[u]);return N.useEffect(()=>{(i==="organizer"||i==="admin")&&S()},[i,S]),h.jsxs("div",{className:"organizer-dashboard",children:[h.jsxs("div",{className:"dashboard-header",children:[h.jsx("h1",{children:"Organizer Dashboard"}),h.jsx("button",{onClick:()=>u("/"),className:"dashboard-home-button",children:"Home"})]}),y?h.jsx("div",{className:"attendees-loading-container",children:h.jsx(Af,{size:60})}):v?h.jsxs("div",{className:"attendees-error-container",children:[h.jsx("div",{className:"attendees-error-message",children:v}),h.jsx("button",{className:"attendees-retry-button",onClick:S,children:"Retry"})]}):m.length===0?h.jsx("div",{className:"attendees-empty-container",children:h.jsx("div",{className:"attendees-empty-message",children:"No attendees yet"})}):h.jsx(N4,{attendees:m})]})},T4=5e3,_4=()=>{const{checkAuth:t,permissions:i,user:a}=N.useContext(Hn),u=Fn(),[m,x]=N.useState([]),[y,b]=N.useState(!0),[v,C]=N.useState(null),[S,I]=N.useState(!1);return N.useEffect(()=>{t()},[t]),N.useEffect(()=>{a==="topaz"&&i==="admin"?I(!0):i!==null&&a!==null&&u("/")},[i,a,u]),N.useEffect(()=>{if(!S)return;let _=!0,M,L=!0;const B=async()=>{L&&b(!0),C(null);try{const j=await bt("/admin_all_lobbies");if(!j.ok)throw new Error("Failed to fetch lobbies");const z=await j.json();if(z.status!=="success"||!Array.isArray(z.lobbies))throw new Error("Invalid response format");if(!_)return;x(z.lobbies),console.log("Received lobbies data:",z.lobbies)}catch(j){_&&C(j.message||"Error fetching lobbies")}finally{_&&L&&b(!1),L=!1,M=setTimeout(B,T4)}};return B(),()=>{_=!1,M&&clearTimeout(M)}},[S]),y?h.jsx("div",{className:"master-lobby-container",children:h.jsxs("div",{className:"loading-state",children:[h.jsx("div",{className:"loading-spinner"}),h.jsx("p",{children:"Loading lobbies..."})]})}):v&&m.length===0?h.jsx("div",{className:"master-lobby-container",children:h.jsx("div",{className:"error-state",children:h.jsx("p",{children:v})})}):m.length===0?h.jsx("div",{className:"master-lobby-container",children:h.jsx("div",{className:"empty-state",children:h.jsx("p",{children:"No active lobbies found"})})}):h.jsxs("div",{className:"master-lobby-container",children:[h.jsx("button",{className:"back-button",onClick:()=>u(-1),children:"Back"}),v&&h.jsxs("div",{className:"error-banner",style:{backgroundColor:"#f8d7da",color:"#721c24",padding:"0.75rem",marginBottom:"1rem",borderRadius:"0.25rem",border:"1px solid #f5c6cb"},children:[v," (showing last known data)"]}),h.jsx("div",{className:"master-lobby-grid",children:m.map(_=>h.jsx("div",{className:"lobby-tile",children:h.jsxs("div",{className:"lobby-tile-content",children:[h.jsx("h3",{className:"lobby-code",children:_.code}),h.jsxs("div",{className:"lobby-stats",children:[h.jsxs("span",{className:"player-count",children:[_.player_count," players"]}),h.jsx("span",{className:"lobby-state",children:_.lobby_state})]}),h.jsxs("div",{style:{fontSize:"0.7rem",color:"#666",marginTop:"0.5rem"},children:["Debug: player_count=",_.player_count,", lobby_state=",_.lobby_state]})]})},_.code))})]})};var kx={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},up=$t.createContext&&$t.createContext(kx),R4=["attr","size","title"];function k4(t,i){if(t==null)return{};var a=P4(t,i),u,m;if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(t);for(m=0;m<x.length;m++)u=x[m],!(i.indexOf(u)>=0)&&Object.prototype.propertyIsEnumerable.call(t,u)&&(a[u]=t[u])}return a}function P4(t,i){if(t==null)return{};var a={};for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){if(i.indexOf(u)>=0)continue;a[u]=t[u]}return a}function Bc(){return Bc=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},Bc.apply(this,arguments)}function dp(t,i){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),a.push.apply(a,u)}return a}function Fc(t){for(var i=1;i<arguments.length;i++){var a=arguments[i]!=null?arguments[i]:{};i%2?dp(Object(a),!0).forEach(function(u){M4(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):dp(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function M4(t,i,a){return i=O4(i),i in t?Object.defineProperty(t,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[i]=a,t}function O4(t){var i=D4(t,"string");return typeof i=="symbol"?i:i+""}function D4(t,i){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var u=a.call(t,i);if(typeof u!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function Px(t){return t&&t.map((i,a)=>$t.createElement(i.tag,Fc({key:a},i.attr),Px(i.child)))}function _s(t){return i=>$t.createElement(L4,Bc({attr:Fc({},t.attr)},i),Px(t.child))}function L4(t){var i=a=>{var{attr:u,size:m,title:x}=t,y=k4(t,R4),b=m||a.size||"1em",v;return a.className&&(v=a.className),t.className&&(v=(v?v+" ":"")+t.className),$t.createElement("svg",Bc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,u,y,{className:v,style:Fc(Fc({color:t.color||a.color},a.style),t.style),height:b,width:b,xmlns:"http://www.w3.org/2000/svg"}),x&&$t.createElement("title",null,x),t.children)};return up!==void 0?$t.createElement(up.Consumer,null,a=>i(a)):i(kx)}function Mx(t){return _s({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"},child:[]}]})(t)}function Ox(t){return _s({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(t)}function Dx(t){return _s({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"},child:[]}]})(t)}function Lx(t){return _s({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M510.846 392.673c-5.211 12.157-27.239 21.089-67.36 27.318-2.064 2.786-3.775 14.686-6.507 23.956-1.625 5.566-5.623 8.869-12.128 8.869l-.297-.005c-9.395 0-19.203-4.323-38.852-4.323-26.521 0-35.662 6.043-56.254 20.588-21.832 15.438-42.771 28.764-74.027 27.399-31.646 2.334-58.025-16.908-72.871-27.404-20.714-14.643-29.828-20.582-56.241-20.582-18.864 0-30.736 4.72-38.852 4.72-8.073 0-11.213-4.922-12.422-9.04-2.703-9.189-4.404-21.263-6.523-24.13-20.679-3.209-67.31-11.344-68.498-32.15a10.627 10.627 0 0 1 8.877-11.069c69.583-11.455 100.924-82.901 102.227-85.934.074-.176.155-.344.237-.515 3.713-7.537 4.544-13.849 2.463-18.753-5.05-11.896-26.872-16.164-36.053-19.796-23.715-9.366-27.015-20.128-25.612-27.504 2.437-12.836 21.725-20.735 33.002-15.453 8.919 4.181 16.843 6.297 23.547 6.297 5.022 0 8.212-1.204 9.96-2.171-2.043-35.936-7.101-87.29 5.687-115.969C158.122 21.304 229.705 15.42 250.826 15.42c.944 0 9.141-.089 10.11-.089 52.148 0 102.254 26.78 126.723 81.643 12.777 28.65 7.749 79.792 5.695 116.009 1.582.872 4.357 1.942 8.599 2.139 6.397-.286 13.815-2.389 22.069-6.257 6.085-2.846 14.406-2.461 20.48.058l.029.01c9.476 3.385 15.439 10.215 15.589 17.87.184 9.747-8.522 18.165-25.878 25.018-2.118.835-4.694 1.655-7.434 2.525-9.797 3.106-24.6 7.805-28.616 17.271-2.079 4.904-1.256 11.211 2.46 18.748.087.168.166.342.239.515 1.301 3.03 32.615 74.46 102.23 85.934 6.427 1.058 11.163 7.877 7.725 15.859z"},child:[]}]})(t)}function jx(t){return _s({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448,209.91a210.06,210.06,0,0,1-122.77-39.25V349.38A162.55,162.55,0,1,1,185,188.31V278.2a74.62,74.62,0,1,0,52.23,71.18V0l88,0a121.18,121.18,0,0,0,1.86,22.17h0A122.18,122.18,0,0,0,381,102.39a121.43,121.43,0,0,0,67,20.14Z"},child:[]}]})(t)}function Bx(t){return _s({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(t)}function If(t){return _s({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"},child:[]}]})(t)}function Fx(t){return _s({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(t)}const fp=({size:t=60,className:i=""})=>h.jsx("div",{className:`attendees-spinner ${i}`,style:{width:t,height:t},children:h.jsx("div",{className:"attendees-spinner-inner"})}),j4=t=>t?`data:image/jpeg;base64,${t}`:"/assets/fakeprofile.png",B4=["phone","email","website","instagram","facebook","linkedin","tiktok","snapchat"],F4=t=>({instagram:{label:"Instagram",Icon:Ox,color:"#E4405F",displayPrefix:"@"},facebook:{label:"Facebook",Icon:Mx,color:"#1877F2",displayPrefix:"@"},email:{label:"Email",Icon:Bx,color:"#4b7ef0",displayPrefix:""},phone:{label:"Phone",Icon:Fx,color:"#25D366",displayPrefix:""},website:{label:"Website",Icon:If,color:"#4b7ef0",displayPrefix:""},linkedin:{label:"LinkedIn",Icon:Dx,color:"#0A66C2",displayPrefix:""},tiktok:{label:"TikTok",Icon:jx,color:"#000000",displayPrefix:"@"},snapchat:{label:"Snapchat",Icon:Lx,color:"#FFFC00",displayPrefix:"@"}})[t]||{label:t,Icon:If,color:"#4b7ef0",displayPrefix:""},V4=(t,i)=>{if(!i)return null;switch(t){case"instagram":return`https://instagram.com/${i}`;case"facebook":return`https://facebook.com/${i}`;case"tiktok":return`https://tiktok.com/@${i}`;case"snapchat":return`https://snapchat.com/add/${i}`;case"linkedin":return`https://linkedin.com/in/${i}`;case"email":return`mailto:${i}`;case"phone":return`tel:${i.replace(/[^\d+]/g,"")}`;case"website":return i;default:return i}},U4=t=>!t||typeof t!="object"?!1:Object.values(t).some(i=>i&&typeof i=="string"&&i.trim()),Yd=t=>[...t].sort((i,a)=>{var b,v,C,S;const u=i.lobby_date?new Date(i.lobby_date).getTime():0,m=a.lobby_date?new Date(a.lobby_date).getTime():0;if(u!==m)return m-u;const x=(((b=i.paired_with)==null?void 0:b.name)||((v=i.paired_with)==null?void 0:v.username)||"").toLowerCase(),y=(((C=a.paired_with)==null?void 0:C.name)||((S=a.paired_with)==null?void 0:S.username)||"").toLowerCase();return x<y?-1:x>y?1:0}),z4=(t,i)=>{var y;if(!t||t.length===0)return{hasNew:i.length>0,hasUpdated:!1};const a=new Set(t.map(b=>{var v;return(v=b.paired_with)==null?void 0:v.username})),u=i.some(b=>{var v;return((v=b.paired_with)==null?void 0:v.username)&&!a.has(b.paired_with.username)});let m=!1;const x=new Map(t.map(b=>{var v;return[(v=b.paired_with)==null?void 0:v.username,b]}));for(const b of i){const v=(y=b.paired_with)==null?void 0:y.username;if(!v)continue;const C=x.get(v);if(C&&JSON.stringify(C)!==JSON.stringify(b)){m=!0;break}}return{hasNew:u,hasUpdated:m}},W4=(t,i,a)=>{var x;if(!t||t.length===0)return i;const u=[...t],m=[];for(const y of i){const b=(x=y.paired_with)==null?void 0:x.username;if(!b)continue;const v=u.findIndex(C=>{var S;return((S=C.paired_with)==null?void 0:S.username)===b});v>=0?u[v]=y:m.push(y)}return[...m,...u]},Ic=(t,i)=>{var m;const a=(m=t.paired_with)==null?void 0:m.username;if(a)return a;const u=`${t.lobby_date||""}-${t.interaction_date||""}`;return u!=="-"?u:`interaction-${i}`},yc=(t,i)=>t.find((a,u)=>Ic(a,u)===i)||null,hp=async(t,i,a,u)=>{try{const m=await bt("/update-paired-interaction",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({lobby_id:t,paired_with_username:i,...a}),signal:u});if(!m.ok){const y=await m.text();throw new Error(y||`HTTP ${m.status}`)}return{success:!0,data:await m.json()}}catch(m){if(m.name==="AbortError")throw m;return{success:!1,error:m.message}}},H4=({rating:t,onRatingChange:i,interactionKey:a})=>{const u=t||0,m=x=>{i(x)};return h.jsxs("div",{className:"star-rating-container",children:[h.jsx("div",{className:"star-rating-question",children:"How was the chat?"}),h.jsx("div",{className:"star-rating-stars",children:[1,2,3,4,5].map(x=>h.jsx("button",{type:"button",className:`star-button ${x<=u?"star-filled":"star-empty"}`,onClick:()=>m(x),"aria-label":`Rate ${x} star${x!==1?"s":""}`,children:""},x))}),h.jsx("div",{className:"star-rating-disclaimer",children:"(Don't worry, your response is hidden)"})]})},G4=({value:t,onChange:i,interactionKey:a})=>{const u=m=>{i(m)};return h.jsxs("div",{className:"share-contact-container",children:[h.jsx("div",{className:"share-contact-question",children:"Share Your Contact?"}),h.jsxs("div",{className:"share-contact-buttons",children:[h.jsx("button",{type:"button",className:`share-contact-button ${t===!1?"selected":""}`,onClick:()=>u(!1),children:"No"}),h.jsx("button",{type:"button",className:`share-contact-button ${t===!0?"selected":""}`,onClick:()=>u(!0),children:"Yes"})]})]})},X4=()=>{var kt;const t=Fn(),i=Pr(),{checkAuth:a,user:u,isAuthLoading:m,emailVerified:x,userProfile:y}=N.useContext(Hn),b=((kt=i.state)==null?void 0:kt.fromLobby)===!0&&x!==!0,v=(y==null?void 0:y.social_links)&&typeof y.social_links=="object"&&Object.values(y.social_links).some(xe=>xe&&typeof xe=="string"&&xe.trim()),C=N.useRef(0),[S,I]=N.useState([]),[_,M]=N.useState(!0),[L,B]=N.useState(!1),[j,z]=N.useState(!0),[V,F]=N.useState(0),[$,Z]=N.useState(null),[re,X]=N.useState(!1),[Q,q]=N.useState(!1),[ge,Ne]=N.useState(new Map),[Ae,De]=N.useState(new Map),Ce=N.useRef(!1),G=N.useRef(!0),je=N.useRef(null),ye=N.useRef(null),fe=N.useRef([]),Ve=N.useRef(!1),we=N.useRef(new Map),Y=N.useRef(new Map),le=N.useRef(new Map),Te=N.useRef(new Map),Ge=N.useRef(new Map),be=N.useRef(new Map),te=N.useCallback(xe=>{const ie=we.current.get(xe);ie&&(clearTimeout(ie),we.current.delete(xe));const ue=Y.current.get(xe);ue&&(ue.abort(),Y.current.delete(xe))},[]),Xe=N.useCallback(async(xe,ie,ue)=>{if(!Ce.current){Ce.current=!0;try{const Re=await bt(`/paired-player-history?offset=${xe}&limit=30`);if(!Re.ok){if(Re.status===401){G.current&&t("/");return}const ze=await Re.text();throw new Error(`HTTP ${Re.status}: ${ze}`)}const Ze=await Re.json();if(!G.current)return;if(Ze.status!=="success"||!Array.isArray(Ze.interactions))throw new Error("Invalid response format");const tt=Yd(Ze.interactions);if(ue){const ze=fe.current,_e=z4(ze,tt),We=W4(ze,tt,!0);console.log("[PairedHistory] Poll update:",{count:tt.length,hasNew:_e.hasNew,hasUpdated:_e.hasUpdated});const wt=Yd(We);I(wt),fe.current=wt,z(Ze.has_more),F(Ze.next_offset||0),(_e.hasNew||_e.hasUpdated)&&X(!0)}else ie?(console.log("[PairedHistory] Initial load:",{count:tt.length}),I(tt),fe.current=tt,z(Ze.has_more),F(Ze.next_offset||0),M(!1)):(I(ze=>{const _e=[...ze,...tt],We=Yd(_e);return fe.current=We,We}),z(Ze.has_more),F(Ze.next_offset||0),B(!1));Z(null)}catch(Re){if(console.error("[PairedHistory] Error:",{message:Re.message,type:ue?"polling":ie?"initial":"infinite-scroll"}),!G.current)return;Z(Re.message),Rn.error(`Error: ${Re.message}`),ie?M(!1):ue||B(!1)}finally{G.current&&(Ce.current=!1)}}},[t]);N.useEffect(()=>{if(G.current=!0,!m){if(!u){t("/");return}if(!Ve.current)return Ve.current=!0,Xe(0,!0,!1),()=>{G.current=!1}}},[m,u,t,Xe]),N.useEffect(()=>{const xe=()=>{document.hidden||Ce.current||!G.current||Xe(0,!1,!0)};if(document.hidden)return;const ie=setInterval(xe,5e3),ue=()=>{};return document.addEventListener("visibilitychange",ue),()=>{clearInterval(ie),document.removeEventListener("visibilitychange",ue)}},[Xe]),N.useEffect(()=>(re&&(je.current&&clearTimeout(je.current),je.current=setTimeout(()=>{G.current&&X(!1)},4e3)),()=>{je.current&&clearTimeout(je.current)}),[re]),N.useEffect(()=>{if(!j||L||Ce.current)return;const xe=new IntersectionObserver(ie=>{ie[0].isIntersecting&&j&&!L&&!Ce.current&&G.current&&(B(!0),Xe(V,!1,!1))},{root:null,rootMargin:"300px",threshold:.1});return ye.current&&xe.observe(ye.current),()=>{xe.disconnect()}},[j,L,V,Xe]),N.useEffect(()=>{fe.current=S},[S]),N.useEffect(()=>{Ge.current=ge},[ge]),N.useEffect(()=>{be.current=Ae},[Ae]),N.useEffect(()=>{S.length!==0&&(Ne(xe=>{const ie=new Map(xe);let ue=!1;return S.forEach((Re,Ze)=>{const tt=Ic(Re,Ze);if(!ie.has(tt)){const ze=Re.partner_star_rating;ze!==null&&ze>=1&&ze<=5&&(ie.set(tt,ze),ue=!0)}}),ue?ie:xe}),De(xe=>{const ie=new Map(xe);let ue=!1;return S.forEach((Re,Ze)=>{const tt=Ic(Re,Ze);if(!ie.has(tt)){const ze=Re.user_show_contact;ze!==null&&typeof ze=="boolean"&&(ie.set(tt,ze),ue=!0)}}),ue?ie:xe}))},[S]);const Pe=N.useCallback((xe,ie)=>{var tt;if(b){t("/post-event-auth");return}if(!v&&(C.current+=1,C.current>=3)){q(!0);return}const ue=yc(fe.current,xe);if(!(ue!=null&&ue.lobby_id)||!((tt=ue.paired_with)!=null&&tt.username)){Rn.error("Unable to save: interaction not found");return}let Re=le.current.get(xe);if(Re===void 0){const ze=Ge.current.get(xe),_e=ue.partner_star_rating;Re=ze??(_e!==null&&_e>=1&&_e<=5?_e:null),le.current.set(xe,Re)}te(xe),Ne(ze=>{const _e=new Map(ze);return _e.set(xe,ie),Ge.current=_e,_e});const Ze=setTimeout(async()=>{var Ie;if(!G.current)return;const ze=yc(fe.current,xe);if(!(ze!=null&&ze.lobby_id)||!((Ie=ze.paired_with)!=null&&Ie.username)){if(!G.current)return;Ne(vt=>{const Lt=new Map(vt);return Re!=null?Lt.set(xe,Re):Lt.delete(xe),Ge.current=Lt,Lt}),le.current.delete(xe),Rn.error("Unable to save: interaction not found");return}const _e=new AbortController;Y.current.set(xe,_e);const We=ze.paired_with.username,wt=ze.lobby_id;console.log("[PairedHistory] Updating rating:",{partner_username:We,lobby_id:wt,rating:ie,previous_rating:Re});try{const vt=await hp(wt,We,{partner_star_rating:ie},_e.signal);if(!G.current)return;Y.current.delete(xe),vt.success?(le.current.delete(xe),console.log("[PairedHistory] Rating update successful:",{partner_username:We,lobby_id:wt,rating:ie,response:vt.data}),Rn.success("Saved",{duration:1e3,style:{background:"#144dff",color:"white",borderRadius:"8px",padding:"12px 20px",fontSize:"0.9rem",fontWeight:"500"}})):(console.error("[PairedHistory] Rating update failed:",{partner_username:We,lobby_id:wt,rating:ie,error:vt.error}),Ne(Lt=>{const Ee=new Map(Lt);return Re!=null?Ee.set(xe,Re):Ee.delete(xe),Ge.current=Ee,Ee}),le.current.delete(xe),Rn.error(vt.error||"Failed to save. Please try again."))}catch(vt){if(!G.current)return;if(Y.current.delete(xe),vt.name==="AbortError"){console.log("[PairedHistory] Rating update aborted:",{partner_username:We,lobby_id:wt});return}console.error("[PairedHistory] Rating update error:",{partner_username:We,lobby_id:wt,rating:ie,error:vt.message}),Ne(Lt=>{const Ee=new Map(Lt);return Re!=null?Ee.set(xe,Re):Ee.delete(xe),Ge.current=Ee,Ee}),le.current.delete(xe),Rn.error(vt.message||"Failed to save. Please try again.")}},500);we.current.set(xe,Ze)},[te,b,v,t]),$e=N.useCallback((xe,ie)=>{var tt;if(b){t("/post-event-auth");return}if(!v&&(C.current+=1,C.current>=3)){q(!0);return}const ue=yc(fe.current,xe);if(!(ue!=null&&ue.lobby_id)||!((tt=ue.paired_with)!=null&&tt.username)){Rn.error("Unable to save: interaction not found");return}let Re=Te.current.get(xe);if(Re===void 0){const ze=be.current.get(xe),_e=ue.user_show_contact;Re=ze??(_e!==null&&typeof _e=="boolean"?_e:null),Te.current.set(xe,Re)}te(xe),De(ze=>{const _e=new Map(ze);return _e.set(xe,ie),be.current=_e,_e});const Ze=setTimeout(async()=>{var Ie;if(!G.current)return;const ze=yc(fe.current,xe);if(!(ze!=null&&ze.lobby_id)||!((Ie=ze.paired_with)!=null&&Ie.username)){if(!G.current)return;De(vt=>{const Lt=new Map(vt);return Re!=null?Lt.set(xe,Re):Lt.delete(xe),be.current=Lt,Lt}),Te.current.delete(xe),Rn.error("Unable to save: interaction not found");return}const _e=new AbortController;Y.current.set(xe,_e);const We=ze.paired_with.username,wt=ze.lobby_id;console.log("[PairedHistory] Updating share contact:",{partner_username:We,lobby_id:wt,user_show_contact:ie,previous_value:Re});try{const vt=await hp(wt,We,{user_show_contact:ie},_e.signal);if(!G.current)return;Y.current.delete(xe),vt.success?(Te.current.delete(xe),console.log("[PairedHistory] Share contact update successful:",{partner_username:We,lobby_id:wt,user_show_contact:ie,response:vt.data}),Rn.success("Saved",{duration:1e3,style:{background:"#144dff",color:"white",borderRadius:"8px",padding:"12px 20px",fontSize:"0.9rem",fontWeight:"500"}})):(console.error("[PairedHistory] Share contact update failed:",{partner_username:We,lobby_id:wt,user_show_contact:ie,error:vt.error}),De(Lt=>{const Ee=new Map(Lt);return Re!=null?Ee.set(xe,Re):Ee.delete(xe),be.current=Ee,Ee}),Te.current.delete(xe),Rn.error(vt.error||"Failed to save. Please try again."))}catch(vt){if(!G.current)return;if(Y.current.delete(xe),vt.name==="AbortError"){console.log("[PairedHistory] Share contact update aborted:",{partner_username:We,lobby_id:wt});return}console.error("[PairedHistory] Share contact update error:",{partner_username:We,lobby_id:wt,user_show_contact:ie,error:vt.message}),De(Lt=>{const Ee=new Map(Lt);return Re!=null?Ee.set(xe,Re):Ee.delete(xe),be.current=Ee,Ee}),Te.current.delete(xe),Rn.error(vt.message||"Failed to save. Please try again.")}},300);we.current.set(xe,Ze)},[te,b,v,t]);return N.useEffect(()=>()=>{G.current=!1,je.current&&clearTimeout(je.current),Y.current.forEach(xe=>{xe.abort()}),we.current.forEach(xe=>{clearTimeout(xe)}),we.current.clear(),Y.current.clear(),le.current.clear(),Te.current.clear()},[]),m?h.jsx(co,{fullScreen:!0}):h.jsxs("div",{className:"paired-player-history-container",children:[h.jsx(Xa,{position:"top-center"}),h.jsx("button",{onClick:()=>t("/"),className:"history-home-button",children:"Home"}),h.jsxs("button",{onClick:()=>t("/post-event-auth"),className:"history-profile-button",children:[h.jsx("div",{className:"history-profile-avatar",children:h.jsx("img",{src:y!=null&&y.image_data?`data:image/jpeg;base64,${y.image_data}`:"/assets/avatar_3.png",alt:"Profile"})}),"Profile"]}),re&&h.jsx("div",{className:"new-info-indicator",children:"New Notifications"}),h.jsxs("div",{className:"paired-player-history-content",children:[h.jsx("h1",{className:"paired-player-history-title",children:"View Your Matches"}),_&&h.jsx("div",{className:"loading-grid",children:Array.from({length:30}).map((xe,ie)=>h.jsx(fp,{size:60},ie))}),!_&&S.length===0&&h.jsx("div",{className:"empty-state",children:h.jsx("p",{children:"No Past History Available"})}),!_&&S.length>0&&h.jsxs("div",{className:"interactions-list",children:[S.map((xe,ie)=>{const ue=xe.paired_with||{},Re=j4(ue.image_data),Ze=Ic(xe,ie),tt=ge.get(Ze)??(xe.partner_star_rating!==null&&xe.partner_star_rating>=1&&xe.partner_star_rating<=5?xe.partner_star_rating:null),ze=Ae.has(Ze)?Ae.get(Ze):xe.user_show_contact!==null&&typeof xe.user_show_contact=="boolean"?xe.user_show_contact:null,_e=xe.partner_show_contact===!0,We=_e&&U4(ue.social_links),wt=_e&&ue.contact_url&&!We;return h.jsxs("div",{className:"interaction-card",children:[h.jsxs("div",{className:"interaction-card-main",children:[h.jsxs("div",{className:"interaction-card-left",children:[h.jsx("div",{className:"interaction-card-image",children:h.jsx("img",{src:Re,alt:ue.name||"Partner",onError:Ie=>{Ie.target.src="/assets/fakeprofile.png"}})}),h.jsx("div",{className:"interaction-card-name",children:ue.name||ue.username||"Unknown"})]}),h.jsxs("div",{className:"interaction-card-right",children:[h.jsx(H4,{rating:tt,onRatingChange:Ie=>Pe(Ze,Ie),interactionKey:Ze}),h.jsx(G4,{value:ze,onChange:Ie=>$e(Ze,Ie),interactionKey:Ze})]})]}),(We||wt)&&h.jsxs("div",{className:"contact-info-section",children:[h.jsx("div",{className:"social-links-header",children:ue.name?`${ue.name}'s contact info`:"Contact info"}),We&&h.jsx("div",{className:"social-links-display",children:B4.map(Ie=>{var Wt;const vt=(Wt=ue.social_links)==null?void 0:Wt[Ie];if(!vt||!vt.trim())return null;const{label:Lt,Icon:Ee,color:Pt,displayPrefix:St}=F4(Ie),zt=V4(Ie,vt),lt=St+vt;return h.jsxs("a",{href:zt,target:"_blank",rel:"noopener noreferrer",className:"social-link-item",title:Lt,children:[h.jsx("span",{className:"social-link-icon",children:h.jsx(Ee,{size:16,color:Pt})}),h.jsx("span",{className:"social-link-value",children:lt})]},Ie)})}),wt&&h.jsxs("div",{className:"interaction-card-contact-row",children:[h.jsx("img",{src:"/assets/contact_url_asset.png",alt:"Contact",className:"contact-url-icon"}),h.jsx("a",{href:ue.contact_url,target:"_blank",rel:"noopener noreferrer",className:"contact-url-link",title:ue.contact_url,children:ue.contact_url})]})]})]},Ze)}),j&&h.jsx("div",{ref:ye,"data-sentinel":"true",className:"infinite-scroll-sentinel",children:L&&h.jsx(fp,{size:40})}),!j&&h.jsx("div",{className:"no-more-interactions",children:"No more interactions"})]})]}),h.jsx(cr,{children:Q&&h.jsx(yt.div,{className:"profile-incomplete-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:h.jsxs(yt.div,{className:"profile-incomplete-modal-content",initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},transition:{type:"spring",stiffness:400,damping:25},onClick:xe=>xe.stopPropagation(),children:[h.jsx("h2",{className:"profile-incomplete-modal-header",children:"Your profile is not complete"}),h.jsx("p",{className:"profile-incomplete-modal-subtext",children:"Update it with your email / social links so people you liked can reach out to you"}),h.jsx("button",{type:"button",className:"profile-incomplete-modal-button",onClick:()=>{q(!1),t("/post-event-auth")},children:"Got it"})]})})})]})},Y4=!0,wc=[{key:"phone",label:"Phone",Icon:Fx,color:"#25D366",placeholder:"+1 (555) 123-4567",type:"tel",stripAt:!1},{key:"email",label:"Email",Icon:Bx,color:"#4b7ef0",placeholder:"you@example.com",type:"email",stripAt:!1},{key:"website",label:"Website",Icon:If,color:"#4b7ef0",placeholder:"https://yourwebsite.com",type:"text",stripAt:!1},{key:"instagram",label:"Instagram",Icon:Ox,color:"#E4405F",placeholder:"@username",type:"text",stripAt:!0},{key:"facebook",label:"Facebook",Icon:Mx,color:"#1877F2",placeholder:"@username",type:"text",stripAt:!0},{key:"linkedin",label:"LinkedIn",Icon:Dx,color:"#0A66C2",placeholder:"john-smith",type:"text",stripAt:!1},{key:"tiktok",label:"TikTok",Icon:jx,color:"#000000",placeholder:"@username",type:"text",stripAt:!0},{key:"snapchat",label:"Snapchat",Icon:Lx,color:"#F7D600",placeholder:"@username",type:"text",stripAt:!0}],$4=({platforms:t,selectedPlatforms:i,onToggle:a})=>{const u=N.useRef(null),m=N.useRef(!1);N.useEffect(()=>{const b=u.current;if(!b)return;const v=requestAnimationFrame(()=>{const C=b.scrollHeight/3;b.scrollTop=C});return()=>cancelAnimationFrame(v)},[]);const x=N.useCallback(()=>{const b=u.current;if(!b||m.current)return;const v=b.scrollHeight/3,C=b.scrollTop;C<v?(m.current=!0,b.scrollTop=C+v,requestAnimationFrame(()=>{m.current=!1})):C>=v*2&&(m.current=!0,b.scrollTop=C-v,requestAnimationFrame(()=>{m.current=!1}))},[]),y=[...t,...t,...t];return h.jsxs("div",{className:"social-selector-container",children:[h.jsx("div",{ref:u,className:"social-selector-list",onScroll:x,children:y.map((b,v)=>{const C=i.has(b.key),{Icon:S,color:I,label:_}=b;return h.jsx("div",{className:"social-selector-item-wrapper",children:h.jsxs("label",{className:`social-selector-item ${C?"selected":""}`,onClick:M=>{M.preventDefault(),a(b.key)},children:[h.jsx("div",{className:`social-selector-checkbox ${C?"checked":""}`,children:C&&h.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:h.jsx("path",{d:"M11.5 3.5L5.5 10L2.5 7",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),h.jsx("span",{className:"social-selector-label",children:_}),h.jsx("span",{className:"social-selector-icon",children:h.jsx(S,{size:20,color:I})})]})},`${b.key}-${v}`)})}),h.jsx("div",{className:"social-selector-top-gradient"}),h.jsx("div",{className:"social-selector-bottom-gradient"})]})},Z4=()=>{const t=Fn(),{checkAuth:i,user:a,isAuthLoading:u}=N.useContext(Hn),[m,x]=N.useState(""),[y,b]=N.useState(""),[v,C]=N.useState(""),[S,I]=N.useState(""),[_,M]=N.useState(""),[L,B]=N.useState(""),[j,z]=N.useState(""),[V,F]=N.useState(""),[$,Z]=N.useState(""),[re,X]=N.useState(""),[Q,q]=N.useState(new Set),[ge,Ne]=N.useState(!1),[Ae,De]=N.useState(!0),[Ce,G]=N.useState(!1),[je,ye]=N.useState(""),[fe,Ve]=N.useState(!1),[we,Y]=N.useState(!1),[le,Te]=N.useState(!1),[Ge,be]=N.useState(!1),[te,Xe]=N.useState(!1),[Pe,$e]=N.useState(!1),[kt,xe]=N.useState(!1),[ie,ue]=N.useState(!1),[Re,Ze]=N.useState(""),tt=N.useRef(null);N.useEffect(()=>{const at=new URLSearchParams(window.location.search).get("error");if(at){const ve={claim_expired:"Your verification link has expired. Please try again.",claim_invalid:"Invalid verification link. Please try again.",claim_failed:"Account linking failed. Please try again.",claim_blocked:"This account is an organizer account and cannot be linked this way. Please contact support."}[at]||"An error occurred. Please try again.";ye(ve),window.history.replaceState({},"","/post-event-auth")}},[]),N.useEffect(()=>{if(u)return;if(!a){t("/login");return}(async()=>{var at,qe;try{const ve=await bt("/load_user");if(ve.status===401){t("/login");return}if(!ve.ok)throw new Error("Failed to load user data");const se=await ve.json();x(((at=se.profile)==null?void 0:at.name)||""),b(se.email||"");const et=((qe=se.profile)==null?void 0:qe.social_links)||{};C(et.instagram||""),I(et.facebook||""),M(et.email||""),B(et.phone||""),z(et.website||""),F(et.linkedin||""),Z(et.tiktok||""),X(et.snapchat||"");const nt=new Set;et.phone&&nt.add("phone"),et.email&&nt.add("email"),et.website&&nt.add("website"),et.instagram&&nt.add("instagram"),et.facebook&&nt.add("facebook"),et.linkedin&&nt.add("linkedin"),et.tiktok&&nt.add("tiktok"),et.snapchat&&nt.add("snapchat"),q(nt),Ne(se.email_verified===!0)}catch(ve){console.error("Error fetching user data:",ve),ye("Failed to load user data. Please try again.")}finally{De(!1)}})()},[u,a,t]),N.useEffect(()=>{if(te){const Qe=setTimeout(()=>{Xe(!1)},4e3);return()=>clearTimeout(Qe)}},[te]),N.useEffect(()=>{if(!fe)return;const Qe=setTimeout(async()=>{try{await i()}catch(at){console.error("checkAuth failed during redirect:",at)}t("/paired-player-history")},4e3);return()=>clearTimeout(Qe)},[fe,i,t]);const ze=()=>{!ge&&!we&&(Y(!0),Xe(!0))},_e={phone:L,email:_,website:j,instagram:v,facebook:S,linkedin:V,tiktok:$,snapchat:re},We={phone:B,email:M,website:z,instagram:C,facebook:I,linkedin:F,tiktok:Z,snapchat:X},wt=(Qe,at)=>{const qe=wc.find(se=>se.key===Qe),ve=qe!=null&&qe.stripAt?at.replace(/@/g,""):at;We[Qe](ve)},Ie=Qe=>{q(at=>{const qe=new Set(at);return qe.has(Qe)?qe.delete(Qe):qe.add(Qe),qe})},vt=()=>{const Qe={};if(Q.has("phone")&&L.trim()&&(Qe.phone=L.trim()),Q.has("email")&&_.trim()&&(Qe.email=_.trim()),Q.has("website")&&j.trim()){let at=j.trim();at&&!at.match(/^https?:\/\//i)&&(at="https://"+at),Qe.website=at}if(Q.has("instagram")&&v.trim()&&(Qe.instagram=v.trim()),Q.has("facebook")&&S.trim()&&(Qe.facebook=S.trim()),Q.has("linkedin")&&V.trim()){let at=V.trim();const qe=at.match(/linkedin\.com\/in\/([^/?#]+)/i);qe&&(at=qe[1]),at=at.replace(/^\/+|\/+$/g,""),Qe.linkedin=at}return Q.has("tiktok")&&$.trim()&&(Qe.tiktok=$.trim()),Q.has("snapchat")&&re.trim()&&(Qe.snapchat=re.trim()),Object.keys(Qe).length>0?Qe:null},Lt=()=>wc.some(Qe=>{var at;return Q.has(Qe.key)&&((at=_e[Qe.key])==null?void 0:at.trim())}),Ee=async()=>{var Qe;G(!0),ye("");try{const at={name:m||"",social_links:vt()};ge||(at.email=y||"");const qe=await bt("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(at)});if(qe.status===401){t("/login");return}if(!qe.ok){const ve=await qe.json();throw new Error(ve.detail||ve.message||"Failed to update profile")}if(Y4&&!ge)try{const se=await(await bt("/auth/send-magic-link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:y.trim()})})).json();se.success?(Ve(!0),Rn.success("Check your email for the magic link!",{duration:4e3})):(console.error("Magic link failed:",se.error),Rn.success("Profile saved! (Email verification unavailable)",{duration:3e3}),await i(),setTimeout(()=>t("/paired-player-history"),1500))}catch(ve){console.error("Magic link request error:",ve),Rn.success("Profile saved!",{duration:2e3}),await i(),setTimeout(()=>t("/paired-player-history"),1500)}else Rn.success("Profile saved! Redirecting to your matches...",{duration:2e3}),await i(),setTimeout(()=>t("/paired-player-history"),1500)}catch(at){console.error("Error updating profile:",at),(Qe=at.message)!=null&&Qe.toLowerCase().includes("already associated with another account")?($e(!0),ye("")):ye(at.message||"An error occurred. Please try again.")}finally{G(!1)}},Pt=async()=>{ue(!0),Ze("");try{const at=await(await bt("/auth/claim-existing-account",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:y.trim()})})).json();at.success?($e(!1),xe(!0),Rn.success("Verification email sent!",{duration:4e3})):Ze(at.error||"Failed to send verification email. Please try again.")}catch(Qe){console.error("Error sending claim email:",Qe),Ze("Network error. Please try again.")}finally{ue(!1)}},St=()=>{$e(!1),Ze(""),setTimeout(()=>{var Qe;(Qe=tt.current)==null||Qe.focus()},100)},zt=()=>{be(!1),Ee()},lt=()=>{be(!1),setTimeout(()=>{var Qe;(Qe=tt.current)==null||Qe.focus()},100)},Wt=async Qe=>{if(Qe.preventDefault(),ye(""),!y||!y.trim()){ye("Email is required to access your matches."),window.scrollTo({top:0,behavior:"smooth"});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(y.trim())){ye("Please enter a valid email address."),window.scrollTo({top:0,behavior:"smooth"});return}if(!Lt()){ye("Please provide at least one way to contact you."),window.scrollTo({top:0,behavior:"smooth"});return}if(!ge&&!le){Te(!0),be(!0);return}Ee()};return u||Ae?h.jsx(co,{fullScreen:!0}):fe?h.jsxs("div",{className:"post-event-auth-container",children:[h.jsx(Xa,{position:"top-center"}),h.jsxs("div",{className:"step-form-container",style:{textAlign:"center",padding:"40px 28px"},children:[h.jsx("div",{style:{fontSize:"56px",marginBottom:"24px"},children:""}),h.jsx("h2",{style:{color:"#1a1a2e",marginBottom:"12px",fontSize:"1.4rem",fontWeight:"700",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:"Check Your Email!"}),h.jsx("p",{style:{color:"#1a1a2e",marginBottom:"20px",lineHeight:"1.6",fontSize:"0.95rem",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:"We sent a magic link to"}),h.jsx("div",{style:{background:"#f9fafb",border:"1.5px solid #e5e7eb",borderRadius:"12px",padding:"14px 18px",marginBottom:"28px",fontWeight:"600",color:"#1a1a2e",wordBreak:"break-all",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:y}),h.jsx(co,{size:40})]})]}):kt?h.jsxs("div",{className:"post-event-auth-container",children:[h.jsx(Xa,{position:"top-center"}),h.jsxs("div",{className:"step-form-container",style:{textAlign:"center",padding:"40px 28px"},children:[h.jsx("div",{style:{fontSize:"56px",marginBottom:"24px"},children:""}),h.jsx("h2",{style:{color:"#1a1a2e",marginBottom:"12px",fontSize:"1.4rem",fontWeight:"700",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:"Check Your Email!"}),h.jsx("p",{style:{color:"#1a1a2e",marginBottom:"20px",lineHeight:"1.6",fontSize:"0.95rem",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:"We sent a verification link to"}),h.jsx("div",{style:{background:"#f9fafb",border:"1.5px solid #e5e7eb",borderRadius:"12px",padding:"14px 18px",marginBottom:"20px",fontWeight:"600",color:"#1a1a2e",wordBreak:"break-all",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:y}),h.jsx("p",{style:{color:"#1a1a2e",marginBottom:"24px",lineHeight:"1.6",fontSize:"0.95rem",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:"Click the link to link your matches to your existing account."}),h.jsxs("p",{style:{color:"#6b7280",fontSize:"0.85rem",marginBottom:"28px",lineHeight:"1.5",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:["The link expires in 24 hours.",h.jsx("br",{}),"Don't see it? Check your spam folder."]}),h.jsx("button",{onClick:()=>xe(!1),className:"primary-button",children:" Back to Form"})]})]}):h.jsxs("div",{className:"post-event-auth-container",children:[h.jsx(Xa,{position:"top-center",toastOptions:{style:{background:"#1a1a2e",color:"white",borderRadius:"12px",padding:"12px 20px",fontSize:"0.9rem",fontWeight:"500",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},success:{iconTheme:{primary:"#10b981",secondary:"white"}},error:{iconTheme:{primary:"#ef4444",secondary:"white"}}}}),h.jsx("button",{onClick:()=>t("/"),className:"homescreen-button",children:"Home"}),h.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:"8px",marginBottom:"0"},children:h.jsx("img",{src:"/assets/reuneo_test_11.png",alt:"Reuneo Logo",style:{maxWidth:"100px",height:"auto",objectFit:"contain"}})}),h.jsx("h3",{className:"post-event-auth-header",style:{marginTop:"12px"},children:"Dont Loose Your Matches!"}),h.jsx("div",{className:"step-form-container",children:h.jsxs("form",{onSubmit:Wt,children:[je&&h.jsx("div",{className:"error-message",style:{marginBottom:"20px"},children:je}),h.jsxs("div",{style:{marginTop:"0"},children:[h.jsx("label",{className:"step-label",children:"Name"}),h.jsx("input",{type:"text",value:m,onChange:Qe=>x(Qe.target.value),placeholder:"Enter your name",className:"step-input"})]}),h.jsxs("div",{style:{marginTop:"20px",position:"relative"},children:[h.jsxs("label",{className:"step-label",children:["Email ",h.jsx("span",{style:{color:"#ef4444"},children:"*"}),ge&&h.jsx("span",{style:{color:"#10b981",fontSize:"0.75rem",marginLeft:"8px",fontWeight:"600",background:"rgba(16, 185, 129, 0.1)",padding:"2px 8px",borderRadius:"6px"},children:" Verified"})]}),te&&h.jsxs("div",{className:"email-warning-toast",children:[h.jsx("span",{className:"email-warning-icon",children:""}),h.jsx("span",{className:"email-warning-text",children:"Make sure the email is correct"})]}),h.jsx("input",{ref:tt,type:"email",value:y,onChange:Qe=>b(Qe.target.value),onFocus:ze,placeholder:"Enter your email",className:"step-input",required:!0,disabled:ge,style:ge?{backgroundColor:"#f3f4f6",color:"#9ca3af",cursor:"not-allowed",borderColor:"#e5e7eb"}:{}})]}),h.jsxs("div",{className:"social-links-section",children:[h.jsxs("div",{className:"social-links-header",children:[h.jsx("span",{className:"social-links-title",children:"Choose your preferred info to share"}),h.jsx("span",{className:"social-links-subtitle",children:"Don't worry, only people who you choose to share with can see it"})]}),h.jsx($4,{platforms:wc,selectedPlatforms:Q,onToggle:Ie}),h.jsx(cr,{initial:!1,children:wc.filter(Qe=>Q.has(Qe.key)).map(Qe=>h.jsxs(yt.div,{className:"social-link-field",initial:{opacity:0,height:0,marginTop:0},animate:{opacity:1,height:"auto",marginTop:16},exit:{opacity:0,height:0,marginTop:0},transition:{duration:.25,ease:"easeInOut"},style:{overflow:"hidden"},children:[h.jsx("label",{className:"step-label",children:Qe.label}),h.jsx("input",{type:Qe.type,value:_e[Qe.key],onChange:at=>wt(Qe.key,at.target.value),placeholder:Qe.placeholder,className:"step-input"}),Qe.key==="email"&&h.jsx("span",{className:"social-link-helper",children:"Separate email for people to reach you"})]},Qe.key))})]}),h.jsx("button",{type:"submit",className:"primary-button",disabled:Ce,style:{marginTop:"30px"},children:Ce?ge?"Updating...":"Submitting...":ge?"Update":"Submit"})]})}),Ge&&h.jsx("div",{className:"email-confirm-modal-overlay",children:h.jsxs("div",{className:"email-confirm-modal",children:[h.jsx("div",{className:"email-confirm-modal-icon",children:""}),h.jsx("h3",{className:"email-confirm-modal-title",children:"Is this email correct?"}),h.jsx("p",{className:"email-confirm-modal-subtitle",children:"Make sure its right"}),h.jsx("div",{className:"email-confirm-modal-email",children:y}),h.jsxs("div",{className:"email-confirm-modal-buttons",children:[h.jsx("button",{className:"email-confirm-btn email-confirm-btn-yes",onClick:zt,children:"Yes, it's correct"}),h.jsx("button",{className:"email-confirm-btn email-confirm-btn-no",onClick:lt,children:"Let me edit"})]})]})}),Pe&&h.jsx("div",{className:"email-confirm-modal-overlay",children:h.jsxs("div",{className:"email-confirm-modal",children:[h.jsx("div",{className:"email-confirm-modal-icon",children:""}),h.jsx("h3",{className:"email-confirm-modal-title",children:"This email is already registered"}),h.jsx("p",{className:"email-confirm-modal-subtitle",children:"To link your matches to your existing account, we'll send a verification email to:"}),h.jsx("div",{className:"email-confirm-modal-email",children:y}),Re&&h.jsx("div",{style:{color:"#b91c1c",fontSize:"0.85rem",marginBottom:"16px",padding:"10px 14px",backgroundColor:"rgba(185, 28, 28, 0.08)",borderRadius:"10px",fontWeight:"500",textAlign:"left",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:Re}),h.jsxs("div",{className:"email-confirm-modal-buttons",children:[h.jsx("button",{className:"email-confirm-btn email-confirm-btn-yes",onClick:Pt,disabled:ie,children:ie?"Sending...":"Send Verification Email"}),h.jsx("button",{className:"email-confirm-btn email-confirm-btn-no",onClick:St,disabled:ie,children:"Use Different Email"})]})]})})]})},K4=()=>{const t=Fn(),{checkAuth:i}=N.useContext(Hn),[a,u]=N.useState("verifying"),[m,x]=N.useState("");return N.useEffect(()=>{(async()=>{try{const b=await bt("/auth/session",{method:"GET"});b.ok?(await b.json()).authenticated?(u("success"),await i(),setTimeout(()=>{t("/")},2e3)):(u("error"),x("Session not found. Please try logging in again.")):(u("error"),x("Could not verify your session. Please try again."))}catch(b){console.error("Session verification error:",b),u("error"),x("Network error. Please check your connection and try again.")}})()},[i,t]),h.jsx("div",{className:"auth-success-container",children:h.jsxs("div",{className:"auth-success-card",children:[a==="verifying"&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"auth-success-spinner"}),h.jsx("h2",{children:"Signing you in..."}),h.jsx("p",{children:"Please wait while we verify your session."})]}),a==="success"&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"auth-success-checkmark",children:""}),h.jsx("h2",{children:"Welcome to Reuneo!"}),h.jsx("p",{children:"You're now signed in. Redirecting you..."})]}),a==="error"&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"auth-success-error",children:""}),h.jsx("h2",{children:"Something went wrong"}),h.jsx("p",{children:m}),h.jsx("button",{className:"auth-success-button",onClick:()=>t("/login"),children:"Back to Login"})]})]})})},q4=()=>{const t=Fn(),[i]=kp(),{checkAuth:a}=N.useContext(Hn),[u,m]=N.useState(""),[x,y]=N.useState(""),[b,v]=N.useState(""),[C,S]=N.useState(!0),[I,_]=N.useState(!1),[M,L]=N.useState(""),[B,j]=N.useState(""),z=i.get("token");N.useEffect(()=>{(async()=>{if(!z){j("No token provided. Please request a new magic link."),S(!1);return}try{const Z=await(await fetch(`${window.server_url}/auth/verify-setup-token?token=${encodeURIComponent(z)}`,{credentials:"include"})).json();Z.valid&&Z.email?m(Z.email):j(Z.error||"Invalid or expired token. Please request a new magic link.")}catch($){console.error("Token validation error:",$),j("Unable to validate token. Please try again.")}finally{S(!1)}})()},[z]);const V=async F=>{if(F.preventDefault(),L(""),!x){L("Password is required");return}if(x.length<2){L("Password must be at least 2 characters");return}if(x!==b){L("Passwords do not match");return}_(!0);try{const Z=await(await bt("/auth/set-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:z,password:x})})).json();Z.success?(await a(),t("/paired-player-history")):L(Z.error||"Failed to set password. Please try again.")}catch($){console.error("Set password error:",$),L("An error occurred. Please try again.")}finally{_(!1)}};return C?h.jsx(co,{fullScreen:!0,message:"Verifying..."}):B?h.jsxs("div",{className:"set-password-container",children:[h.jsx("button",{onClick:()=>t("/"),className:"homescreen-button",children:"Home"}),h.jsxs("div",{className:"set-password-error-container",children:[h.jsx("div",{className:"error-icon",children:""}),h.jsx("h2",{className:"error-title",children:"Link Expired or Invalid"}),h.jsx("p",{className:"error-description",children:B}),h.jsx("button",{onClick:()=>t("/login"),className:"primary-button",style:{marginTop:"20px"},children:"Go to Login"})]})]}):h.jsxs("div",{className:"set-password-container",children:[h.jsx("button",{onClick:()=>t("/"),className:"homescreen-button",children:"Home"}),h.jsx("h3",{className:"set-password-header",children:"Set Your Password"}),h.jsx("p",{className:"set-password-subtitle",children:"You'll use this to log in later"}),h.jsx("div",{className:"step-form-container",children:h.jsxs("form",{onSubmit:V,children:[M&&h.jsx("div",{className:"error-message",children:M}),h.jsxs("div",{style:{marginTop:"0"},children:[h.jsx("label",{className:"step-label",children:"Email"}),h.jsxs("div",{className:"email-display",children:[h.jsx("input",{type:"email",value:u,className:"step-input email-locked",disabled:!0,readOnly:!0}),h.jsx("span",{className:"lock-icon",children:""})]}),h.jsx("p",{className:"email-hint",children:"This is the email you verified"})]}),h.jsxs("div",{style:{marginTop:"24px"},children:[h.jsx("label",{className:"step-label",children:"Create Password"}),h.jsx("input",{type:"password",value:x,onChange:F=>y(F.target.value),placeholder:"Enter a password",className:"step-input",autoFocus:!0,autoComplete:"new-password"})]}),h.jsxs("div",{style:{marginTop:"16px"},children:[h.jsx("label",{className:"step-label",children:"Confirm Password"}),h.jsx("input",{type:"password",value:b,onChange:F=>v(F.target.value),placeholder:"Confirm your password",className:"step-input",autoComplete:"new-password"})]}),h.jsx("button",{type:"submit",className:"primary-button",disabled:I||!x,style:{marginTop:"30px"},children:I?"Setting Password...":"Set Password"})]})})]})},Q4=()=>{const t=Fn(),[i,a]=N.useState(""),[u,m]=N.useState(!1),[x,y]=N.useState(!1),[b,v]=N.useState(!1),[C,S]=N.useState(!1),[I,_]=N.useState(""),M=z=>{const V=z.target.value.toLowerCase();a(V),_(""),!b&&V.length>0&&(v(!0),setTimeout(()=>S(!0),300),setTimeout(()=>S(!1),4300))},L=z=>z&&z.includes("@")&&z.includes("."),B=async z=>{if(z.preventDefault(),_(""),!L(i)){_("Please enter a valid email address");return}m(!0);try{const F=await(await bt("/auth/request-password-reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i.trim()})})).json();F.success?y(!0):_(F.error||"Something went wrong. Please try again.")}catch(V){console.error("Password reset request error:",V),_("Network error. Please check your connection and try again.")}finally{m(!1)}},j=()=>{y(!1),a(""),v(!1)};return h.jsxs("div",{className:"forgot-password-container",children:[h.jsx("button",{onClick:()=>t("/"),className:"homescreen-button",children:"Home"}),h.jsx("h3",{className:"forgot-password-header",children:"Reset Your Password"}),h.jsx("p",{className:"forgot-password-subtitle",children:"Enter your email and we'll send you a reset link"}),h.jsxs("div",{className:"step-form-container",children:[h.jsxs("form",{onSubmit:B,children:[I&&h.jsx("div",{className:"error-message",children:I}),h.jsxs("div",{style:{marginTop:"0"},children:[h.jsx("label",{className:"step-label",children:"Email Address"}),h.jsx("input",{type:"email",value:i,onChange:M,placeholder:"Enter your email",className:"step-input",autoFocus:!0,autoComplete:"email"})]}),h.jsx("button",{type:"submit",className:"primary-button",disabled:u||!i,style:{marginTop:"30px"},children:u?"Sending...":"Send Reset Link"})]}),h.jsx("button",{type:"button",onClick:()=>t("/login"),className:"back-to-login-link",children:"Back to Login"})]}),h.jsx(cr,{children:C&&h.jsx(yt.div,{className:"email-toast",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.3},children:"Double-check your email address is correct before submitting."})}),h.jsx(cr,{children:x&&h.jsx(yt.div,{className:"reset-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:j,children:h.jsxs(yt.div,{className:"reset-modal-content",initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},transition:{type:"spring",stiffness:400,damping:25},onClick:z=>z.stopPropagation(),children:[h.jsx("h2",{className:"reset-modal-header",children:" Check Your Inbox"}),h.jsx("p",{className:"reset-modal-subtext",children:"If an account exists with this email, we've sent a password reset link. Check your inbox and spam folder."}),h.jsx("button",{type:"button",className:"reset-modal-button",onClick:j,children:"Got it"})]})})})]})};F2.createRoot(document.getElementById("root")).render(h.jsx(N.StrictMode,{children:h.jsx(V2,{children:h.jsxs(Aw,{basename:"/",children:[h.jsx(zE,{}),h.jsx(WE,{}),h.jsxs(ew,{children:[h.jsx(er,{path:"/",element:h.jsx(UE,{})}),h.jsx(er,{path:"/login",element:h.jsx(HE,{})}),h.jsx(er,{path:"/signup",element:h.jsx(SE,{})}),h.jsx(er,{path:"/logout",element:h.jsx(GE,{})}),h.jsx(er,{path:"/lobby",element:h.jsx(ES,{})}),h.jsx(er,{path:"/admin_lobby_view",element:h.jsx(x4,{})}),h.jsx(er,{path:"/create_lobby",element:h.jsx(w4,{})}),h.jsx(er,{path:"/product-selection",element:h.jsx(y4,{})}),h.jsx(er,{path:"/organizer-signup",element:h.jsx(C4,{})}),h.jsx(er,{path:"/organizer-signup-success",element:h.jsx(b4,{})}),h.jsx(er,{path:"/organizer-account-details",element:h.jsx(E4,{})}),h.jsx(er,{path:"/organizer-dashboard",element:h.jsx(I4,{})}),h.jsx(er,{path:"/master_lobby_view",element:h.jsx(_4,{})}),h.jsx(er,{path:"/paired-player-history",element:h.jsx(X4,{})}),h.jsx(er,{path:"/post-event-auth",element:h.jsx(Z4,{})}),h.jsx(er,{path:"/set-password",element:h.jsx(q4,{})}),h.jsx(er,{path:"/forgot-password",element:h.jsx(Q4,{})}),h.jsx(er,{path:"/auth/success",element:h.jsx(K4,{})})]})]})})}));
