(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))f(p);new MutationObserver(p=>{for(const x of p)if(x.type==="childList")for(const y of x.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&f(y)}).observe(document,{childList:!0,subtree:!0});function a(p){const x={};return p.integrity&&(x.integrity=p.integrity),p.referrerPolicy&&(x.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?x.credentials="include":p.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function f(p){if(p.ep)return;p.ep=!0;const x=a(p);fetch(p.href,x)}})();var Jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yp(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var nd={exports:{}},ba={},rd={exports:{}},kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K0;function Qx(){if(K0)return kt;K0=1;var r=Symbol.for("react.element"),o=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),y=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),I=Symbol.iterator;function R(W){return W===null||typeof W!="object"?null:(W=I&&W[I]||W["@@iterator"],typeof W=="function"?W:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,B={};function j(W,Y,pe){this.props=W,this.context=Y,this.refs=B,this.updater=pe||M}j.prototype.isReactComponent={},j.prototype.setState=function(W,Y){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,Y,"setState")},j.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function z(){}z.prototype=j.prototype;function U(W,Y,pe){this.props=W,this.context=Y,this.refs=B,this.updater=pe||M}var V=U.prototype=new z;V.constructor=U,L(V,j.prototype),V.isPureReactComponent=!0;var ee=Array.isArray,re=Object.prototype.hasOwnProperty,ne={current:null},q={key:!0,ref:!0,__self:!0,__source:!0};function le(W,Y,pe){var ve,Ee={},ie=null,be=null;if(Y!=null)for(ve in Y.ref!==void 0&&(be=Y.ref),Y.key!==void 0&&(ie=""+Y.key),Y)re.call(Y,ve)&&!q.hasOwnProperty(ve)&&(Ee[ve]=Y[ve]);var Ae=arguments.length-2;if(Ae===1)Ee.children=pe;else if(1<Ae){for(var Ve=Array(Ae),De=0;De<Ae;De++)Ve[De]=arguments[De+2];Ee.children=Ve}if(W&&W.defaultProps)for(ve in Ae=W.defaultProps,Ae)Ee[ve]===void 0&&(Ee[ve]=Ae[ve]);return{$$typeof:r,type:W,key:ie,ref:be,props:Ee,_owner:ne.current}}function K(W,Y){return{$$typeof:r,type:W.type,key:Y,ref:W.ref,props:W.props,_owner:W._owner}}function Re(W){return typeof W=="object"&&W!==null&&W.$$typeof===r}function Be(W){var Y={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(pe){return Y[pe]})}var Ne=/\/+/g;function Le(W,Y){return typeof W=="object"&&W!==null&&W.key!=null?Be(""+W.key):Y.toString(36)}function Se(W,Y,pe,ve,Ee){var ie=typeof W;(ie==="undefined"||ie==="boolean")&&(W=null);var be=!1;if(W===null)be=!0;else switch(ie){case"string":case"number":be=!0;break;case"object":switch(W.$$typeof){case r:case o:be=!0}}if(be)return be=W,Ee=Ee(be),W=ve===""?"."+Le(be,0):ve,ee(Ee)?(pe="",W!=null&&(pe=W.replace(Ne,"$&/")+"/"),Se(Ee,Y,pe,"",function(De){return De})):Ee!=null&&(Re(Ee)&&(Ee=K(Ee,pe+(!Ee.key||be&&be.key===Ee.key?"":(""+Ee.key).replace(Ne,"$&/")+"/")+W)),Y.push(Ee)),1;if(be=0,ve=ve===""?".":ve+":",ee(W))for(var Ae=0;Ae<W.length;Ae++){ie=W[Ae];var Ve=ve+Le(ie,Ae);be+=Se(ie,Y,pe,Ve,Ee)}else if(Ve=R(W),typeof Ve=="function")for(W=Ve.call(W),Ae=0;!(ie=W.next()).done;)ie=ie.value,Ve=ve+Le(ie,Ae++),be+=Se(ie,Y,pe,Ve,Ee);else if(ie==="object")throw Y=String(W),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return be}function Q(W,Y,pe){if(W==null)return W;var ve=[],Ee=0;return Se(W,ve,"","",function(ie){return Y.call(pe,ie,Ee++)}),ve}function Fe(W){if(W._status===-1){var Y=W._result;Y=Y(),Y.then(function(pe){(W._status===0||W._status===-1)&&(W._status=1,W._result=pe)},function(pe){(W._status===0||W._status===-1)&&(W._status=2,W._result=pe)}),W._status===-1&&(W._status=0,W._result=Y)}if(W._status===1)return W._result.default;throw W._result}var ge={current:null},me={transition:null},ze={ReactCurrentDispatcher:ge,ReactCurrentBatchConfig:me,ReactCurrentOwner:ne};function ce(){throw Error("act(...) is not supported in production builds of React.")}return kt.Children={map:Q,forEach:function(W,Y,pe){Q(W,function(){Y.apply(this,arguments)},pe)},count:function(W){var Y=0;return Q(W,function(){Y++}),Y},toArray:function(W){return Q(W,function(Y){return Y})||[]},only:function(W){if(!Re(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},kt.Component=j,kt.Fragment=a,kt.Profiler=p,kt.PureComponent=U,kt.StrictMode=f,kt.Suspense=v,kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ze,kt.act=ce,kt.cloneElement=function(W,Y,pe){if(W==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+W+".");var ve=L({},W.props),Ee=W.key,ie=W.ref,be=W._owner;if(Y!=null){if(Y.ref!==void 0&&(ie=Y.ref,be=ne.current),Y.key!==void 0&&(Ee=""+Y.key),W.type&&W.type.defaultProps)var Ae=W.type.defaultProps;for(Ve in Y)re.call(Y,Ve)&&!q.hasOwnProperty(Ve)&&(ve[Ve]=Y[Ve]===void 0&&Ae!==void 0?Ae[Ve]:Y[Ve])}var Ve=arguments.length-2;if(Ve===1)ve.children=pe;else if(1<Ve){Ae=Array(Ve);for(var De=0;De<Ve;De++)Ae[De]=arguments[De+2];ve.children=Ae}return{$$typeof:r,type:W.type,key:Ee,ref:ie,props:ve,_owner:be}},kt.createContext=function(W){return W={$$typeof:y,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},W.Provider={$$typeof:x,_context:W},W.Consumer=W},kt.createElement=le,kt.createFactory=function(W){var Y=le.bind(null,W);return Y.type=W,Y},kt.createRef=function(){return{current:null}},kt.forwardRef=function(W){return{$$typeof:A,render:W}},kt.isValidElement=Re,kt.lazy=function(W){return{$$typeof:S,_payload:{_status:-1,_result:W},_init:Fe}},kt.memo=function(W,Y){return{$$typeof:E,type:W,compare:Y===void 0?null:Y}},kt.startTransition=function(W){var Y=me.transition;me.transition={};try{W()}finally{me.transition=Y}},kt.unstable_act=ce,kt.useCallback=function(W,Y){return ge.current.useCallback(W,Y)},kt.useContext=function(W){return ge.current.useContext(W)},kt.useDebugValue=function(){},kt.useDeferredValue=function(W){return ge.current.useDeferredValue(W)},kt.useEffect=function(W,Y){return ge.current.useEffect(W,Y)},kt.useId=function(){return ge.current.useId()},kt.useImperativeHandle=function(W,Y,pe){return ge.current.useImperativeHandle(W,Y,pe)},kt.useInsertionEffect=function(W,Y){return ge.current.useInsertionEffect(W,Y)},kt.useLayoutEffect=function(W,Y){return ge.current.useLayoutEffect(W,Y)},kt.useMemo=function(W,Y){return ge.current.useMemo(W,Y)},kt.useReducer=function(W,Y,pe){return ge.current.useReducer(W,Y,pe)},kt.useRef=function(W){return ge.current.useRef(W)},kt.useState=function(W){return ge.current.useState(W)},kt.useSyncExternalStore=function(W,Y,pe){return ge.current.useSyncExternalStore(W,Y,pe)},kt.useTransition=function(){return ge.current.useTransition()},kt.version="18.3.1",kt}var q0;function lf(){return q0||(q0=1,rd.exports=Qx()),rd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q0;function Jx(){if(Q0)return ba;Q0=1;var r=lf(),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),f=Object.prototype.hasOwnProperty,p=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x={key:!0,ref:!0,__self:!0,__source:!0};function y(A,v,E){var S,I={},R=null,M=null;E!==void 0&&(R=""+E),v.key!==void 0&&(R=""+v.key),v.ref!==void 0&&(M=v.ref);for(S in v)f.call(v,S)&&!x.hasOwnProperty(S)&&(I[S]=v[S]);if(A&&A.defaultProps)for(S in v=A.defaultProps,v)I[S]===void 0&&(I[S]=v[S]);return{$$typeof:o,type:A,key:R,ref:M,props:I,_owner:p.current}}return ba.Fragment=a,ba.jsx=y,ba.jsxs=y,ba}var J0;function e2(){return J0||(J0=1,nd.exports=Jx()),nd.exports}var w=e2(),N=lf();const tn=Yp(N);var ec={},id={exports:{}},Ar={},sd={exports:{}},od={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e1;function t2(){return e1||(e1=1,function(r){function o(me,ze){var ce=me.length;me.push(ze);e:for(;0<ce;){var W=ce-1>>>1,Y=me[W];if(0<p(Y,ze))me[W]=ze,me[ce]=Y,ce=W;else break e}}function a(me){return me.length===0?null:me[0]}function f(me){if(me.length===0)return null;var ze=me[0],ce=me.pop();if(ce!==ze){me[0]=ce;e:for(var W=0,Y=me.length,pe=Y>>>1;W<pe;){var ve=2*(W+1)-1,Ee=me[ve],ie=ve+1,be=me[ie];if(0>p(Ee,ce))ie<Y&&0>p(be,Ee)?(me[W]=be,me[ie]=ce,W=ie):(me[W]=Ee,me[ve]=ce,W=ve);else if(ie<Y&&0>p(be,ce))me[W]=be,me[ie]=ce,W=ie;else break e}}return ze}function p(me,ze){var ce=me.sortIndex-ze.sortIndex;return ce!==0?ce:me.id-ze.id}if(typeof performance=="object"&&typeof performance.now=="function"){var x=performance;r.unstable_now=function(){return x.now()}}else{var y=Date,A=y.now();r.unstable_now=function(){return y.now()-A}}var v=[],E=[],S=1,I=null,R=3,M=!1,L=!1,B=!1,j=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function V(me){for(var ze=a(E);ze!==null;){if(ze.callback===null)f(E);else if(ze.startTime<=me)f(E),ze.sortIndex=ze.expirationTime,o(v,ze);else break;ze=a(E)}}function ee(me){if(B=!1,V(me),!L)if(a(v)!==null)L=!0,Fe(re);else{var ze=a(E);ze!==null&&ge(ee,ze.startTime-me)}}function re(me,ze){L=!1,B&&(B=!1,z(le),le=-1),M=!0;var ce=R;try{for(V(ze),I=a(v);I!==null&&(!(I.expirationTime>ze)||me&&!Be());){var W=I.callback;if(typeof W=="function"){I.callback=null,R=I.priorityLevel;var Y=W(I.expirationTime<=ze);ze=r.unstable_now(),typeof Y=="function"?I.callback=Y:I===a(v)&&f(v),V(ze)}else f(v);I=a(v)}if(I!==null)var pe=!0;else{var ve=a(E);ve!==null&&ge(ee,ve.startTime-ze),pe=!1}return pe}finally{I=null,R=ce,M=!1}}var ne=!1,q=null,le=-1,K=5,Re=-1;function Be(){return!(r.unstable_now()-Re<K)}function Ne(){if(q!==null){var me=r.unstable_now();Re=me;var ze=!0;try{ze=q(!0,me)}finally{ze?Le():(ne=!1,q=null)}}else ne=!1}var Le;if(typeof U=="function")Le=function(){U(Ne)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,Q=Se.port2;Se.port1.onmessage=Ne,Le=function(){Q.postMessage(null)}}else Le=function(){j(Ne,0)};function Fe(me){q=me,ne||(ne=!0,Le())}function ge(me,ze){le=j(function(){me(r.unstable_now())},ze)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(me){me.callback=null},r.unstable_continueExecution=function(){L||M||(L=!0,Fe(re))},r.unstable_forceFrameRate=function(me){0>me||125<me?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<me?Math.floor(1e3/me):5},r.unstable_getCurrentPriorityLevel=function(){return R},r.unstable_getFirstCallbackNode=function(){return a(v)},r.unstable_next=function(me){switch(R){case 1:case 2:case 3:var ze=3;break;default:ze=R}var ce=R;R=ze;try{return me()}finally{R=ce}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(me,ze){switch(me){case 1:case 2:case 3:case 4:case 5:break;default:me=3}var ce=R;R=me;try{return ze()}finally{R=ce}},r.unstable_scheduleCallback=function(me,ze,ce){var W=r.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?W+ce:W):ce=W,me){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=ce+Y,me={id:S++,callback:ze,priorityLevel:me,startTime:ce,expirationTime:Y,sortIndex:-1},ce>W?(me.sortIndex=ce,o(E,me),a(v)===null&&me===a(E)&&(B?(z(le),le=-1):B=!0,ge(ee,ce-W))):(me.sortIndex=Y,o(v,me),L||M||(L=!0,Fe(re))),me},r.unstable_shouldYield=Be,r.unstable_wrapCallback=function(me){var ze=R;return function(){var ce=R;R=ze;try{return me.apply(this,arguments)}finally{R=ce}}}}(od)),od}var t1;function n2(){return t1||(t1=1,sd.exports=t2()),sd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n1;function r2(){if(n1)return Ar;n1=1;var r=lf(),o=n2();function a(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,d=1;d<arguments.length;d++)s+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f=new Set,p={};function x(t,s){y(t,s),y(t+"Capture",s)}function y(t,s){for(p[t]=s,t=0;t<s.length;t++)f.add(s[t])}var A=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v=Object.prototype.hasOwnProperty,E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S={},I={};function R(t){return v.call(I,t)?!0:v.call(S,t)?!1:E.test(t)?I[t]=!0:(S[t]=!0,!1)}function M(t,s,d,g){if(d!==null&&d.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return g?!1:d!==null?!d.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function L(t,s,d,g){if(s===null||typeof s>"u"||M(t,s,d,g))return!0;if(g)return!1;if(d!==null)switch(d.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function B(t,s,d,g,b,T,O){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=g,this.attributeNamespace=b,this.mustUseProperty=d,this.propertyName=t,this.type=s,this.sanitizeURL=T,this.removeEmptyString=O}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){j[t]=new B(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];j[s]=new B(s,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){j[t]=new B(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){j[t]=new B(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){j[t]=new B(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){j[t]=new B(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){j[t]=new B(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){j[t]=new B(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){j[t]=new B(t,5,!1,t.toLowerCase(),null,!1,!1)});var z=/[\-:]([a-z])/g;function U(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(z,U);j[s]=new B(s,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(z,U);j[s]=new B(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(z,U);j[s]=new B(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){j[t]=new B(t,1,!1,t.toLowerCase(),null,!1,!1)}),j.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){j[t]=new B(t,1,!1,t.toLowerCase(),null,!0,!0)});function V(t,s,d,g){var b=j.hasOwnProperty(s)?j[s]:null;(b!==null?b.type!==0:g||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(L(s,d,b,g)&&(d=null),g||b===null?R(s)&&(d===null?t.removeAttribute(s):t.setAttribute(s,""+d)):b.mustUseProperty?t[b.propertyName]=d===null?b.type===3?!1:"":d:(s=b.attributeName,g=b.attributeNamespace,d===null?t.removeAttribute(s):(b=b.type,d=b===3||b===4&&d===!0?"":""+d,g?t.setAttributeNS(g,s,d):t.setAttribute(s,d))))}var ee=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,re=Symbol.for("react.element"),ne=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),le=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),Re=Symbol.for("react.provider"),Be=Symbol.for("react.context"),Ne=Symbol.for("react.forward_ref"),Le=Symbol.for("react.suspense"),Se=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),Fe=Symbol.for("react.lazy"),ge=Symbol.for("react.offscreen"),me=Symbol.iterator;function ze(t){return t===null||typeof t!="object"?null:(t=me&&t[me]||t["@@iterator"],typeof t=="function"?t:null)}var ce=Object.assign,W;function Y(t){if(W===void 0)try{throw Error()}catch(d){var s=d.stack.trim().match(/\n( *(at )?)/);W=s&&s[1]||""}return`
`+W+t}var pe=!1;function ve(t,s){if(!t||pe)return"";pe=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(he){var g=he}Reflect.construct(t,[],s)}else{try{s.call()}catch(he){g=he}t.call(s.prototype)}else{try{throw Error()}catch(he){g=he}t()}}catch(he){if(he&&g&&typeof he.stack=="string"){for(var b=he.stack.split(`
`),T=g.stack.split(`
`),O=b.length-1,G=T.length-1;1<=O&&0<=G&&b[O]!==T[G];)G--;for(;1<=O&&0<=G;O--,G--)if(b[O]!==T[G]){if(O!==1||G!==1)do if(O--,G--,0>G||b[O]!==T[G]){var $=`
`+b[O].replace(" at new "," at ");return t.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",t.displayName)),$}while(1<=O&&0<=G);break}}}finally{pe=!1,Error.prepareStackTrace=d}return(t=t?t.displayName||t.name:"")?Y(t):""}function Ee(t){switch(t.tag){case 5:return Y(t.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return t=ve(t.type,!1),t;case 11:return t=ve(t.type.render,!1),t;case 1:return t=ve(t.type,!0),t;default:return""}}function ie(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case q:return"Fragment";case ne:return"Portal";case K:return"Profiler";case le:return"StrictMode";case Le:return"Suspense";case Se:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Be:return(t.displayName||"Context")+".Consumer";case Re:return(t._context.displayName||"Context")+".Provider";case Ne:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Q:return s=t.displayName||null,s!==null?s:ie(t.type)||"Memo";case Fe:s=t._payload,t=t._init;try{return ie(t(s))}catch{}}return null}function be(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ie(s);case 8:return s===le?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ae(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ve(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function De(t){var s=Ve(t)?"checked":"value",d=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),g=""+t[s];if(!t.hasOwnProperty(s)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var b=d.get,T=d.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return b.call(this)},set:function(O){g=""+O,T.call(this,O)}}),Object.defineProperty(t,s,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(O){g=""+O},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function tt(t){t._valueTracker||(t._valueTracker=De(t))}function ue(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var d=s.getValue(),g="";return t&&(g=Ve(t)?t.checked?"true":"false":t.value),t=g,t!==d?(s.setValue(t),!0):!1}function ye(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Xe(t,s){var d=s.checked;return ce({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??t._wrapperState.initialChecked})}function ht(t,s){var d=s.defaultValue==null?"":s.defaultValue,g=s.checked!=null?s.checked:s.defaultChecked;d=Ae(s.value!=null?s.value:d),t._wrapperState={initialChecked:g,initialValue:d,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Pt(t,s){s=s.checked,s!=null&&V(t,"checked",s,!1)}function xt(t,s){Pt(t,s);var d=Ae(s.value),g=s.type;if(d!=null)g==="number"?(d===0&&t.value===""||t.value!=d)&&(t.value=""+d):t.value!==""+d&&(t.value=""+d);else if(g==="submit"||g==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?nt(t,s.type,d):s.hasOwnProperty("defaultValue")&&nt(t,s.type,Ae(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function Je(t,s,d){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var g=s.type;if(!(g!=="submit"&&g!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,d||s===t.value||(t.value=s),t.defaultValue=s}d=t.name,d!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,d!==""&&(t.name=d)}function nt(t,s,d){(s!=="number"||ye(t.ownerDocument)!==t)&&(d==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+d&&(t.defaultValue=""+d))}var Nt=Array.isArray;function Pe(t,s,d,g){if(t=t.options,s){s={};for(var b=0;b<d.length;b++)s["$"+d[b]]=!0;for(d=0;d<t.length;d++)b=s.hasOwnProperty("$"+t[d].value),t[d].selected!==b&&(t[d].selected=b),b&&g&&(t[d].defaultSelected=!0)}else{for(d=""+Ae(d),s=null,b=0;b<t.length;b++){if(t[b].value===d){t[b].selected=!0,g&&(t[b].defaultSelected=!0);return}s!==null||t[b].disabled||(s=t[b])}s!==null&&(s.selected=!0)}}function yn(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(a(91));return ce({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ct(t,s){var d=s.value;if(d==null){if(d=s.children,s=s.defaultValue,d!=null){if(s!=null)throw Error(a(92));if(Nt(d)){if(1<d.length)throw Error(a(93));d=d[0]}s=d}s==null&&(s=""),d=s}t._wrapperState={initialValue:Ae(d)}}function we(t,s){var d=Ae(s.value),g=Ae(s.defaultValue);d!=null&&(d=""+d,d!==t.value&&(t.value=d),s.defaultValue==null&&t.defaultValue!==d&&(t.defaultValue=d)),g!=null&&(t.defaultValue=""+g)}function He(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function qe(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ut(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?qe(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ge,At=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,d,g,b){MSApp.execUnsafeLocalFunction(function(){return t(s,d,g,b)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(Ge=Ge||document.createElement("div"),Ge.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Ge.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function Wt(t,s){if(s){var d=t.firstChild;if(d&&d===t.lastChild&&d.nodeType===3){d.nodeValue=s;return}}t.textContent=s}var Ht={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gt=["Webkit","ms","Moz","O"];Object.keys(Ht).forEach(function(t){Gt.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Ht[s]=Ht[t]})});function Ue(t,s,d){return s==null||typeof s=="boolean"||s===""?"":d||typeof s!="number"||s===0||Ht.hasOwnProperty(t)&&Ht[t]?(""+s).trim():s+"px"}function xe(t,s){t=t.style;for(var d in s)if(s.hasOwnProperty(d)){var g=d.indexOf("--")===0,b=Ue(d,s[d],g);d==="float"&&(d="cssFloat"),g?t.setProperty(d,b):t[d]=b}}var gt=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dt(t,s){if(s){if(gt[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(a(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(a(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(a(61))}if(s.style!=null&&typeof s.style!="object")throw Error(a(62))}}function Dt(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dn=null;function Dr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hn=null,pt=null,Ln=null;function As(t){if(t=la(t)){if(typeof Hn!="function")throw Error(a(280));var s=t.stateNode;s&&(s=pl(s),Hn(t.stateNode,t.type,s))}}function Wi(t){pt?Ln?Ln.push(t):Ln=[t]:pt=t}function er(){if(pt){var t=pt,s=Ln;if(Ln=pt=null,As(t),s)for(t=0;t<s.length;t++)As(s[t])}}function Hi(t,s){return t(s)}function on(){}var Lr=!1;function oi(t,s,d){if(Lr)return t(s,d);Lr=!0;try{return Hi(t,s,d)}finally{Lr=!1,(pt!==null||Ln!==null)&&(on(),er())}}function An(t,s){var d=t.stateNode;if(d===null)return null;var g=pl(d);if(g===null)return null;d=g[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(t=t.type,g=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!g;break e;default:t=!1}if(t)return null;if(d&&typeof d!="function")throw Error(a(231,s,typeof d));return d}var Gi=!1;if(A)try{var dr={};Object.defineProperty(dr,"passive",{get:function(){Gi=!0}}),window.addEventListener("test",dr,dr),window.removeEventListener("test",dr,dr)}catch{Gi=!1}function ai(t,s,d,g,b,T,O,G,$){var he=Array.prototype.slice.call(arguments,3);try{s.apply(d,he)}catch(_e){this.onError(_e)}}var fn=!1,fr=null,In=!1,Ye=null,li={onError:function(t){fn=!0,fr=t}};function Xi(t,s,d,g,b,T,O,G,$){fn=!1,fr=null,ai.apply(li,arguments)}function Bn(t,s,d,g,b,T,O,G,$){if(Xi.apply(this,arguments),fn){if(fn){var he=fr;fn=!1,fr=null}else throw Error(a(198));In||(In=!0,Ye=he)}}function tr(t){var s=t,d=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(d=s.return),t=s.return;while(t)}return s.tag===3?d:null}function Zr(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function Ei(t){if(tr(t)!==t)throw Error(a(188))}function nr(t){var s=t.alternate;if(!s){if(s=tr(t),s===null)throw Error(a(188));return s!==t?null:t}for(var d=t,g=s;;){var b=d.return;if(b===null)break;var T=b.alternate;if(T===null){if(g=b.return,g!==null){d=g;continue}break}if(b.child===T.child){for(T=b.child;T;){if(T===d)return Ei(b),t;if(T===g)return Ei(b),s;T=T.sibling}throw Error(a(188))}if(d.return!==g.return)d=b,g=T;else{for(var O=!1,G=b.child;G;){if(G===d){O=!0,d=b,g=T;break}if(G===g){O=!0,g=b,d=T;break}G=G.sibling}if(!O){for(G=T.child;G;){if(G===d){O=!0,d=T,g=b;break}if(G===g){O=!0,g=T,d=b;break}G=G.sibling}if(!O)throw Error(a(189))}}if(d.alternate!==g)throw Error(a(190))}if(d.tag!==3)throw Error(a(188));return d.stateNode.current===d?t:s}function $e(t){return t=nr(t),t!==null?Et(t):null}function Et(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=Et(t);if(s!==null)return s;t=t.sibling}return null}var ot=o.unstable_scheduleCallback,It=o.unstable_cancelCallback,We=o.unstable_shouldYield,Gn=o.unstable_requestPaint,Vt=o.unstable_now,Ss=o.unstable_getCurrentPriorityLevel,Ce=o.unstable_ImmediatePriority,yr=o.unstable_UserBlockingPriority,Bt=o.unstable_NormalPriority,bi=o.unstable_LowPriority,Yi=o.unstable_IdlePriority,Rt=null,St=null;function Ot(t){if(St&&typeof St.onCommitFiberRoot=="function")try{St.onCommitFiberRoot(Rt,t,void 0,(t.current.flags&128)===128)}catch{}}var hr=Math.clz32?Math.clz32:wn,Wo=Math.log,Ho=Math.LN2;function wn(t){return t>>>=0,t===0?32:31-(Wo(t)/Ho|0)|0}var Tr=64,no=4194304;function Zt(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ir(t,s){var d=t.pendingLanes;if(d===0)return 0;var g=0,b=t.suspendedLanes,T=t.pingedLanes,O=d&268435455;if(O!==0){var G=O&~b;G!==0?g=Zt(G):(T&=O,T!==0&&(g=Zt(T)))}else O=d&~b,O!==0?g=Zt(O):T!==0&&(g=Zt(T));if(g===0)return 0;if(s!==0&&s!==g&&!(s&b)&&(b=g&-g,T=s&-s,b>=T||b===16&&(T&4194240)!==0))return s;if(g&4&&(g|=d&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=g;0<s;)d=31-hr(s),b=1<<d,g|=t[d],s&=~b;return g}function Lc(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $i(t,s){for(var d=t.suspendedLanes,g=t.pingedLanes,b=t.expirationTimes,T=t.pendingLanes;0<T;){var O=31-hr(T),G=1<<O,$=b[O];$===-1?(!(G&d)||G&g)&&(b[O]=Lc(G,s)):$<=s&&(t.expiredLanes|=G),T&=~G}}function Xt(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Nn(){var t=Tr;return Tr<<=1,!(Tr&4194240)&&(Tr=64),t}function se(t){for(var s=[],d=0;31>d;d++)s.push(t);return s}function F(t,s,d){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-hr(s),t[s]=d}function it(t,s){var d=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var g=t.eventTimes;for(t=t.expirationTimes;0<d;){var b=31-hr(d),T=1<<b;s[b]=0,g[b]=-1,t[b]=-1,d&=~T}}function hn(t,s){var d=t.entangledLanes|=s;for(t=t.entanglements;d;){var g=31-hr(d),b=1<<g;b&s|t[g]&s&&(t[g]|=s),d&=~b}}var Tt=0;function Qa(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ro,rr,st,Kt,Go,Xo=!1,Zi=[],Nr=null,Br=null,ci=null,nn=new Map,Kr=new Map,Xn=[],ft="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ja(t,s){switch(t){case"focusin":case"focusout":Nr=null;break;case"dragenter":case"dragleave":Br=null;break;case"mouseover":case"mouseout":ci=null;break;case"pointerover":case"pointerout":nn.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kr.delete(s.pointerId)}}function wt(t,s,d,g,b,T){return t===null||t.nativeEvent!==T?(t={blockedOn:s,domEventName:d,eventSystemFlags:g,nativeEvent:T,targetContainers:[b]},s!==null&&(s=la(s),s!==null&&rr(s)),t):(t.eventSystemFlags|=g,s=t.targetContainers,b!==null&&s.indexOf(b)===-1&&s.push(b),t)}function _n(t,s,d,g,b){switch(s){case"focusin":return Nr=wt(Nr,t,s,d,g,b),!0;case"dragenter":return Br=wt(Br,t,s,d,g,b),!0;case"mouseover":return ci=wt(ci,t,s,d,g,b),!0;case"pointerover":var T=b.pointerId;return nn.set(T,wt(nn.get(T)||null,t,s,d,g,b)),!0;case"gotpointercapture":return T=b.pointerId,Kr.set(T,wt(Kr.get(T)||null,t,s,d,g,b)),!0}return!1}function el(t){var s=Ds(t.target);if(s!==null){var d=tr(s);if(d!==null){if(s=d.tag,s===13){if(s=Zr(d),s!==null){t.blockedOn=s,Go(t.priority,function(){st(d)});return}}else if(s===3&&d.stateNode.current.memoizedState.isDehydrated){t.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ki(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var d=io(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(d===null){d=t.nativeEvent;var g=new d.constructor(d.type,d);Dn=g,d.target.dispatchEvent(g),Dn=null}else return s=la(d),s!==null&&rr(s),t.blockedOn=d,!1;s.shift()}return!0}function Yo(t,s,d){Ki(t)&&d.delete(s)}function Ai(){Xo=!1,Nr!==null&&Ki(Nr)&&(Nr=null),Br!==null&&Ki(Br)&&(Br=null),ci!==null&&Ki(ci)&&(ci=null),nn.forEach(Yo),Kr.forEach(Yo)}function Ts(t,s){t.blockedOn===s&&(t.blockedOn=null,Xo||(Xo=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ai)))}function qr(t){function s(b){return Ts(b,t)}if(0<Zi.length){Ts(Zi[0],t);for(var d=1;d<Zi.length;d++){var g=Zi[d];g.blockedOn===t&&(g.blockedOn=null)}}for(Nr!==null&&Ts(Nr,t),Br!==null&&Ts(Br,t),ci!==null&&Ts(ci,t),nn.forEach(s),Kr.forEach(s),d=0;d<Xn.length;d++)g=Xn[d],g.blockedOn===t&&(g.blockedOn=null);for(;0<Xn.length&&(d=Xn[0],d.blockedOn===null);)el(d),d.blockedOn===null&&Xn.shift()}var jr=ee.ReactCurrentBatchConfig,ui=!0;function tl(t,s,d,g){var b=Tt,T=jr.transition;jr.transition=null;try{Tt=1,Si(t,s,d,g)}finally{Tt=b,jr.transition=T}}function Is(t,s,d,g){var b=Tt,T=jr.transition;jr.transition=null;try{Tt=4,Si(t,s,d,g)}finally{Tt=b,jr.transition=T}}function Si(t,s,d,g){if(ui){var b=io(t,s,d,g);if(b===null)Xc(t,s,g,Rn,d),Ja(t,g);else if(_n(b,t,s,d,g))g.stopPropagation();else if(Ja(t,g),s&4&&-1<ft.indexOf(t)){for(;b!==null;){var T=la(b);if(T!==null&&ro(T),T=io(t,s,d,g),T===null&&Xc(t,s,g,Rn,d),T===b)break;b=T}b!==null&&g.stopPropagation()}else Xc(t,s,g,null,d)}}var Rn=null;function io(t,s,d,g){if(Rn=null,t=Dr(g),t=Ds(t),t!==null)if(s=tr(t),s===null)t=null;else if(d=s.tag,d===13){if(t=Zr(s),t!==null)return t;t=null}else if(d===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return Rn=t,null}function $o(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ss()){case Ce:return 1;case yr:return 4;case Bt:case bi:return 16;case Yi:return 536870912;default:return 16}default:return 16}}var Qr=null,Zo=null,so=null;function nl(){if(so)return so;var t,s=Zo,d=s.length,g,b="value"in Qr?Qr.value:Qr.textContent,T=b.length;for(t=0;t<d&&s[t]===b[t];t++);var O=d-t;for(g=1;g<=O&&s[d-g]===b[T-g];g++);return so=b.slice(t,1<g?1-g:void 0)}function jt(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Ns(){return!0}function _s(){return!1}function pn(t){function s(d,g,b,T,O){this._reactName=d,this._targetInst=b,this.type=g,this.nativeEvent=T,this.target=O,this.currentTarget=null;for(var G in t)t.hasOwnProperty(G)&&(d=t[G],this[G]=d?d(T):T[G]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Ns:_s,this.isPropagationStopped=_s,this}return ce(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Ns)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Ns)},persist:function(){},isPersistent:Ns}),s}var qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fe=pn(qi),bt=ce({},qi,{view:0,detail:0}),kn=pn(bt),Qi,oo,Rs,ao=ce({},bt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ks,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Rs&&(Rs&&t.type==="mousemove"?(Qi=t.screenX-Rs.screenX,oo=t.screenY-Rs.screenY):oo=Qi=0,Rs=t),Qi)},movementY:function(t){return"movementY"in t?t.movementY:oo}}),rl=pn(ao),Ko=ce({},ao,{dataTransfer:0}),vn=pn(Ko),qo=ce({},bt,{relatedTarget:0}),qt=pn(qo),lo=ce({},qi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ti=pn(lo),Yt=ce({},qi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),at=pn(Yt),Bc=ce({},qi,{data:0}),$t=pn(Bc),Ii={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ji={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fr(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=jc[t])?!!s[t]:!1}function ks(){return Fr}var il=ce({},bt,{key:function(t){if(t.key){var s=Ii[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=jt(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ji[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ks,charCode:function(t){return t.type==="keypress"?jt(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?jt(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Qo=pn(il),sl=ce({},ao,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jo=pn(sl),Fc=ce({},bt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ks}),es=pn(Fc),ea=ce({},qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vc=pn(ea),Ps=ce({},ao,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zc=pn(Ps),di=[9,13,27,32],ts=A&&"CompositionEvent"in window,jn=null;A&&"documentMode"in document&&(jn=document.documentMode);var ol=A&&"TextEvent"in window&&!jn,_r=A&&(!ts||jn&&8<jn&&11>=jn),al=" ",co=!1;function ll(t,s){switch(t){case"keyup":return di.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ta(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yn=!1;function Uc(t,s){switch(t){case"compositionend":return ta(s);case"keypress":return s.which!==32?null:(co=!0,al);case"textInput":return t=s.data,t===al&&co?null:t;default:return null}}function na(t,s){if(Yn)return t==="compositionend"||!ts&&ll(t,s)?(t=nl(),so=Zo=Qr=null,Yn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return _r&&s.locale!=="ko"?null:s.data;default:return null}}var Os={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lt(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Os[t.type]:s==="textarea"}function Ms(t,s,d,g){Wi(g),s=dl(s,"onChange"),0<s.length&&(d=new fe("onChange","change",null,d,g),t.push({event:d,listeners:s}))}var k=null,e=null;function n(t){fh(t,0)}function i(t){var s=ho(t);if(ue(s))return t}function l(t,s){if(t==="change")return s}var c=!1;if(A){var u;if(A){var h="oninput"in document;if(!h){var m=document.createElement("div");m.setAttribute("oninput","return;"),h=typeof m.oninput=="function"}u=h}else u=!1;c=u&&(!document.documentMode||9<document.documentMode)}function C(){k&&(k.detachEvent("onpropertychange",_),e=k=null)}function _(t){if(t.propertyName==="value"&&i(e)){var s=[];Ms(s,e,t,Dr(t)),oi(n,s)}}function P(t,s,d){t==="focusin"?(C(),k=s,e=d,k.attachEvent("onpropertychange",_)):t==="focusout"&&C()}function D(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return i(e)}function H(t,s){if(t==="click")return i(s)}function X(t,s){if(t==="input"||t==="change")return i(s)}function Z(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var te=typeof Object.is=="function"?Object.is:Z;function de(t,s){if(te(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var d=Object.keys(t),g=Object.keys(s);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var b=d[g];if(!v.call(s,b)||!te(t[b],s[b]))return!1}return!0}function Oe(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Me(t,s){var d=Oe(t);t=0;for(var g;d;){if(d.nodeType===3){if(g=t+d.textContent.length,t<=s&&g>=s)return{node:d,offset:s-t};t=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Oe(d)}}function Ie(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Ie(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function _t(){for(var t=window,s=ye();s instanceof t.HTMLIFrameElement;){try{var d=typeof s.contentWindow.location.href=="string"}catch{d=!1}if(d)t=s.contentWindow;else break;s=ye(t.document)}return s}function vt(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function ir(t){var s=_t(),d=t.focusedElem,g=t.selectionRange;if(s!==d&&d&&d.ownerDocument&&Ie(d.ownerDocument.documentElement,d)){if(g!==null&&vt(d)){if(s=g.start,t=g.end,t===void 0&&(t=s),"selectionStart"in d)d.selectionStart=s,d.selectionEnd=Math.min(t,d.value.length);else if(t=(s=d.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var b=d.textContent.length,T=Math.min(g.start,b);g=g.end===void 0?T:Math.min(g.end,b),!t.extend&&T>g&&(b=g,g=T,T=b),b=Me(d,T);var O=Me(d,g);b&&O&&(t.rangeCount!==1||t.anchorNode!==b.node||t.anchorOffset!==b.offset||t.focusNode!==O.node||t.focusOffset!==O.offset)&&(s=s.createRange(),s.setStart(b.node,b.offset),t.removeAllRanges(),T>g?(t.addRange(s),t.extend(O.node,O.offset)):(s.setEnd(O.node,O.offset),t.addRange(s)))}}for(s=[],t=d;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<s.length;d++)t=s[d],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Rr=A&&"documentMode"in document&&11>=document.documentMode,Cn=null,Ut=null,an=null,$n=!1;function Ni(t,s,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;$n||Cn==null||Cn!==ye(g)||(g=Cn,"selectionStart"in g&&vt(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),an&&de(an,g)||(an=g,g=dl(Ut,"onSelect"),0<g.length&&(s=new fe("onSelect","select",null,s,d),t.push({event:s,listeners:g}),s.target=Cn)))}function Jr(t,s){var d={};return d[t.toLowerCase()]=s.toLowerCase(),d["Webkit"+t]="webkit"+s,d["Moz"+t]="moz"+s,d}var ns={animationend:Jr("Animation","AnimationEnd"),animationiteration:Jr("Animation","AnimationIteration"),animationstart:Jr("Animation","AnimationStart"),transitionend:Jr("Transition","TransitionEnd")},ra={},ih={};A&&(ih=document.createElement("div").style,"AnimationEvent"in window||(delete ns.animationend.animation,delete ns.animationiteration.animation,delete ns.animationstart.animation),"TransitionEvent"in window||delete ns.transitionend.transition);function cl(t){if(ra[t])return ra[t];if(!ns[t])return t;var s=ns[t],d;for(d in s)if(s.hasOwnProperty(d)&&d in ih)return ra[t]=s[d];return t}var sh=cl("animationend"),oh=cl("animationiteration"),ah=cl("animationstart"),lh=cl("transitionend"),ch=new Map,uh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rs(t,s){ch.set(t,s),x(s,[t])}for(var Wc=0;Wc<uh.length;Wc++){var Hc=uh[Wc],ax=Hc.toLowerCase(),lx=Hc[0].toUpperCase()+Hc.slice(1);rs(ax,"on"+lx)}rs(sh,"onAnimationEnd"),rs(oh,"onAnimationIteration"),rs(ah,"onAnimationStart"),rs("dblclick","onDoubleClick"),rs("focusin","onFocus"),rs("focusout","onBlur"),rs(lh,"onTransitionEnd"),y("onMouseEnter",["mouseout","mouseover"]),y("onMouseLeave",["mouseout","mouseover"]),y("onPointerEnter",["pointerout","pointerover"]),y("onPointerLeave",["pointerout","pointerover"]),x("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),x("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),x("onBeforeInput",["compositionend","keypress","textInput","paste"]),x("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cx=new Set("cancel close invalid load scroll toggle".split(" ").concat(ia));function dh(t,s,d){var g=t.type||"unknown-event";t.currentTarget=d,Bn(g,s,void 0,t),t.currentTarget=null}function fh(t,s){s=(s&4)!==0;for(var d=0;d<t.length;d++){var g=t[d],b=g.event;g=g.listeners;e:{var T=void 0;if(s)for(var O=g.length-1;0<=O;O--){var G=g[O],$=G.instance,he=G.currentTarget;if(G=G.listener,$!==T&&b.isPropagationStopped())break e;dh(b,G,he),T=$}else for(O=0;O<g.length;O++){if(G=g[O],$=G.instance,he=G.currentTarget,G=G.listener,$!==T&&b.isPropagationStopped())break e;dh(b,G,he),T=$}}}if(In)throw t=Ye,In=!1,Ye=null,t}function Jt(t,s){var d=s[Qc];d===void 0&&(d=s[Qc]=new Set);var g=t+"__bubble";d.has(g)||(hh(s,t,2,!1),d.add(g))}function Gc(t,s,d){var g=0;s&&(g|=4),hh(d,t,g,s)}var ul="_reactListening"+Math.random().toString(36).slice(2);function sa(t){if(!t[ul]){t[ul]=!0,f.forEach(function(d){d!=="selectionchange"&&(cx.has(d)||Gc(d,!1,t),Gc(d,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[ul]||(s[ul]=!0,Gc("selectionchange",!1,s))}}function hh(t,s,d,g){switch($o(s)){case 1:var b=tl;break;case 4:b=Is;break;default:b=Si}d=b.bind(null,s,d,t),b=void 0,!Gi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(b=!0),g?b!==void 0?t.addEventListener(s,d,{capture:!0,passive:b}):t.addEventListener(s,d,!0):b!==void 0?t.addEventListener(s,d,{passive:b}):t.addEventListener(s,d,!1)}function Xc(t,s,d,g,b){var T=g;if(!(s&1)&&!(s&2)&&g!==null)e:for(;;){if(g===null)return;var O=g.tag;if(O===3||O===4){var G=g.stateNode.containerInfo;if(G===b||G.nodeType===8&&G.parentNode===b)break;if(O===4)for(O=g.return;O!==null;){var $=O.tag;if(($===3||$===4)&&($=O.stateNode.containerInfo,$===b||$.nodeType===8&&$.parentNode===b))return;O=O.return}for(;G!==null;){if(O=Ds(G),O===null)return;if($=O.tag,$===5||$===6){g=T=O;continue e}G=G.parentNode}}g=g.return}oi(function(){var he=T,_e=Dr(d),ke=[];e:{var Te=ch.get(t);if(Te!==void 0){var Ze=fe,Qe=t;switch(t){case"keypress":if(jt(d)===0)break e;case"keydown":case"keyup":Ze=Qo;break;case"focusin":Qe="focus",Ze=qt;break;case"focusout":Qe="blur",Ze=qt;break;case"beforeblur":case"afterblur":Ze=qt;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ze=rl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ze=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ze=es;break;case sh:case oh:case ah:Ze=Ti;break;case lh:Ze=Vc;break;case"scroll":Ze=kn;break;case"wheel":Ze=zc;break;case"copy":case"cut":case"paste":Ze=at;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ze=Jo}var et=(s&4)!==0,En=!et&&t==="scroll",oe=et?Te!==null?Te+"Capture":null:Te;et=[];for(var J=he,ae;J!==null;){ae=J;var je=ae.stateNode;if(ae.tag===5&&je!==null&&(ae=je,oe!==null&&(je=An(J,oe),je!=null&&et.push(oa(J,je,ae)))),En)break;J=J.return}0<et.length&&(Te=new Ze(Te,Qe,null,d,_e),ke.push({event:Te,listeners:et}))}}if(!(s&7)){e:{if(Te=t==="mouseover"||t==="pointerover",Ze=t==="mouseout"||t==="pointerout",Te&&d!==Dn&&(Qe=d.relatedTarget||d.fromElement)&&(Ds(Qe)||Qe[_i]))break e;if((Ze||Te)&&(Te=_e.window===_e?_e:(Te=_e.ownerDocument)?Te.defaultView||Te.parentWindow:window,Ze?(Qe=d.relatedTarget||d.toElement,Ze=he,Qe=Qe?Ds(Qe):null,Qe!==null&&(En=tr(Qe),Qe!==En||Qe.tag!==5&&Qe.tag!==6)&&(Qe=null)):(Ze=null,Qe=he),Ze!==Qe)){if(et=rl,je="onMouseLeave",oe="onMouseEnter",J="mouse",(t==="pointerout"||t==="pointerover")&&(et=Jo,je="onPointerLeave",oe="onPointerEnter",J="pointer"),En=Ze==null?Te:ho(Ze),ae=Qe==null?Te:ho(Qe),Te=new et(je,J+"leave",Ze,d,_e),Te.target=En,Te.relatedTarget=ae,je=null,Ds(_e)===he&&(et=new et(oe,J+"enter",Qe,d,_e),et.target=ae,et.relatedTarget=En,je=et),En=je,Ze&&Qe)t:{for(et=Ze,oe=Qe,J=0,ae=et;ae;ae=uo(ae))J++;for(ae=0,je=oe;je;je=uo(je))ae++;for(;0<J-ae;)et=uo(et),J--;for(;0<ae-J;)oe=uo(oe),ae--;for(;J--;){if(et===oe||oe!==null&&et===oe.alternate)break t;et=uo(et),oe=uo(oe)}et=null}else et=null;Ze!==null&&ph(ke,Te,Ze,et,!1),Qe!==null&&En!==null&&ph(ke,En,Qe,et,!0)}}e:{if(Te=he?ho(he):window,Ze=Te.nodeName&&Te.nodeName.toLowerCase(),Ze==="select"||Ze==="input"&&Te.type==="file")var rt=l;else if(Lt(Te))if(c)rt=X;else{rt=D;var lt=P}else(Ze=Te.nodeName)&&Ze.toLowerCase()==="input"&&(Te.type==="checkbox"||Te.type==="radio")&&(rt=H);if(rt&&(rt=rt(t,he))){Ms(ke,rt,d,_e);break e}lt&&lt(t,Te,he),t==="focusout"&&(lt=Te._wrapperState)&&lt.controlled&&Te.type==="number"&&nt(Te,"number",Te.value)}switch(lt=he?ho(he):window,t){case"focusin":(Lt(lt)||lt.contentEditable==="true")&&(Cn=lt,Ut=he,an=null);break;case"focusout":an=Ut=Cn=null;break;case"mousedown":$n=!0;break;case"contextmenu":case"mouseup":case"dragend":$n=!1,Ni(ke,d,_e);break;case"selectionchange":if(Rr)break;case"keydown":case"keyup":Ni(ke,d,_e)}var ct;if(ts)e:{switch(t){case"compositionstart":var yt="onCompositionStart";break e;case"compositionend":yt="onCompositionEnd";break e;case"compositionupdate":yt="onCompositionUpdate";break e}yt=void 0}else Yn?ll(t,d)&&(yt="onCompositionEnd"):t==="keydown"&&d.keyCode===229&&(yt="onCompositionStart");yt&&(_r&&d.locale!=="ko"&&(Yn||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&Yn&&(ct=nl()):(Qr=_e,Zo="value"in Qr?Qr.value:Qr.textContent,Yn=!0)),lt=dl(he,yt),0<lt.length&&(yt=new $t(yt,t,null,d,_e),ke.push({event:yt,listeners:lt}),ct?yt.data=ct:(ct=ta(d),ct!==null&&(yt.data=ct)))),(ct=ol?Uc(t,d):na(t,d))&&(he=dl(he,"onBeforeInput"),0<he.length&&(_e=new $t("onBeforeInput","beforeinput",null,d,_e),ke.push({event:_e,listeners:he}),_e.data=ct))}fh(ke,s)})}function oa(t,s,d){return{instance:t,listener:s,currentTarget:d}}function dl(t,s){for(var d=s+"Capture",g=[];t!==null;){var b=t,T=b.stateNode;b.tag===5&&T!==null&&(b=T,T=An(t,d),T!=null&&g.unshift(oa(t,T,b)),T=An(t,s),T!=null&&g.push(oa(t,T,b))),t=t.return}return g}function uo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ph(t,s,d,g,b){for(var T=s._reactName,O=[];d!==null&&d!==g;){var G=d,$=G.alternate,he=G.stateNode;if($!==null&&$===g)break;G.tag===5&&he!==null&&(G=he,b?($=An(d,T),$!=null&&O.unshift(oa(d,$,G))):b||($=An(d,T),$!=null&&O.push(oa(d,$,G)))),d=d.return}O.length!==0&&t.push({event:s,listeners:O})}var ux=/\r\n?/g,dx=/\u0000|\uFFFD/g;function gh(t){return(typeof t=="string"?t:""+t).replace(ux,`
`).replace(dx,"")}function fl(t,s,d){if(s=gh(s),gh(t)!==s&&d)throw Error(a(425))}function hl(){}var Yc=null,$c=null;function Zc(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Kc=typeof setTimeout=="function"?setTimeout:void 0,fx=typeof clearTimeout=="function"?clearTimeout:void 0,mh=typeof Promise=="function"?Promise:void 0,hx=typeof queueMicrotask=="function"?queueMicrotask:typeof mh<"u"?function(t){return mh.resolve(null).then(t).catch(px)}:Kc;function px(t){setTimeout(function(){throw t})}function qc(t,s){var d=s,g=0;do{var b=d.nextSibling;if(t.removeChild(d),b&&b.nodeType===8)if(d=b.data,d==="/$"){if(g===0){t.removeChild(b),qr(s);return}g--}else d!=="$"&&d!=="$?"&&d!=="$!"||g++;d=b}while(d);qr(s)}function is(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function xh(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var d=t.data;if(d==="$"||d==="$!"||d==="$?"){if(s===0)return t;s--}else d==="/$"&&s++}t=t.previousSibling}return null}var fo=Math.random().toString(36).slice(2),fi="__reactFiber$"+fo,aa="__reactProps$"+fo,_i="__reactContainer$"+fo,Qc="__reactEvents$"+fo,gx="__reactListeners$"+fo,mx="__reactHandles$"+fo;function Ds(t){var s=t[fi];if(s)return s;for(var d=t.parentNode;d;){if(s=d[_i]||d[fi]){if(d=s.alternate,s.child!==null||d!==null&&d.child!==null)for(t=xh(t);t!==null;){if(d=t[fi])return d;t=xh(t)}return s}t=d,d=t.parentNode}return null}function la(t){return t=t[fi]||t[_i],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ho(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(a(33))}function pl(t){return t[aa]||null}var Jc=[],po=-1;function ss(t){return{current:t}}function en(t){0>po||(t.current=Jc[po],Jc[po]=null,po--)}function Qt(t,s){po++,Jc[po]=t.current,t.current=s}var os={},sr=ss(os),wr=ss(!1),Ls=os;function go(t,s){var d=t.type.contextTypes;if(!d)return os;var g=t.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===s)return g.__reactInternalMemoizedMaskedChildContext;var b={},T;for(T in d)b[T]=s[T];return g&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=b),b}function vr(t){return t=t.childContextTypes,t!=null}function gl(){en(wr),en(sr)}function yh(t,s,d){if(sr.current!==os)throw Error(a(168));Qt(sr,s),Qt(wr,d)}function wh(t,s,d){var g=t.stateNode;if(s=s.childContextTypes,typeof g.getChildContext!="function")return d;g=g.getChildContext();for(var b in g)if(!(b in s))throw Error(a(108,be(t)||"Unknown",b));return ce({},d,g)}function ml(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||os,Ls=sr.current,Qt(sr,t),Qt(wr,wr.current),!0}function vh(t,s,d){var g=t.stateNode;if(!g)throw Error(a(169));d?(t=wh(t,s,Ls),g.__reactInternalMemoizedMergedChildContext=t,en(wr),en(sr),Qt(sr,t)):en(wr),Qt(wr,d)}var Ri=null,xl=!1,eu=!1;function Ch(t){Ri===null?Ri=[t]:Ri.push(t)}function xx(t){xl=!0,Ch(t)}function as(){if(!eu&&Ri!==null){eu=!0;var t=0,s=Tt;try{var d=Ri;for(Tt=1;t<d.length;t++){var g=d[t];do g=g(!0);while(g!==null)}Ri=null,xl=!1}catch(b){throw Ri!==null&&(Ri=Ri.slice(t+1)),ot(Ce,as),b}finally{Tt=s,eu=!1}}return null}var mo=[],xo=0,yl=null,wl=0,Vr=[],zr=0,Bs=null,ki=1,Pi="";function js(t,s){mo[xo++]=wl,mo[xo++]=yl,yl=t,wl=s}function Eh(t,s,d){Vr[zr++]=ki,Vr[zr++]=Pi,Vr[zr++]=Bs,Bs=t;var g=ki;t=Pi;var b=32-hr(g)-1;g&=~(1<<b),d+=1;var T=32-hr(s)+b;if(30<T){var O=b-b%5;T=(g&(1<<O)-1).toString(32),g>>=O,b-=O,ki=1<<32-hr(s)+b|d<<b|g,Pi=T+t}else ki=1<<T|d<<b|g,Pi=t}function tu(t){t.return!==null&&(js(t,1),Eh(t,1,0))}function nu(t){for(;t===yl;)yl=mo[--xo],mo[xo]=null,wl=mo[--xo],mo[xo]=null;for(;t===Bs;)Bs=Vr[--zr],Vr[zr]=null,Pi=Vr[--zr],Vr[zr]=null,ki=Vr[--zr],Vr[zr]=null}var kr=null,Pr=null,rn=!1,ei=null;function bh(t,s){var d=Gr(5,null,null,0);d.elementType="DELETED",d.stateNode=s,d.return=t,s=t.deletions,s===null?(t.deletions=[d],t.flags|=16):s.push(d)}function Ah(t,s){switch(t.tag){case 5:var d=t.type;return s=s.nodeType!==1||d.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,kr=t,Pr=is(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,kr=t,Pr=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(d=Bs!==null?{id:ki,overflow:Pi}:null,t.memoizedState={dehydrated:s,treeContext:d,retryLane:1073741824},d=Gr(18,null,null,0),d.stateNode=s,d.return=t,t.child=d,kr=t,Pr=null,!0):!1;default:return!1}}function ru(t){return(t.mode&1)!==0&&(t.flags&128)===0}function iu(t){if(rn){var s=Pr;if(s){var d=s;if(!Ah(t,s)){if(ru(t))throw Error(a(418));s=is(d.nextSibling);var g=kr;s&&Ah(t,s)?bh(g,d):(t.flags=t.flags&-4097|2,rn=!1,kr=t)}}else{if(ru(t))throw Error(a(418));t.flags=t.flags&-4097|2,rn=!1,kr=t}}}function Sh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kr=t}function vl(t){if(t!==kr)return!1;if(!rn)return Sh(t),rn=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!Zc(t.type,t.memoizedProps)),s&&(s=Pr)){if(ru(t))throw Th(),Error(a(418));for(;s;)bh(t,s),s=is(s.nextSibling)}if(Sh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var d=t.data;if(d==="/$"){if(s===0){Pr=is(t.nextSibling);break e}s--}else d!=="$"&&d!=="$!"&&d!=="$?"||s++}t=t.nextSibling}Pr=null}}else Pr=kr?is(t.stateNode.nextSibling):null;return!0}function Th(){for(var t=Pr;t;)t=is(t.nextSibling)}function yo(){Pr=kr=null,rn=!1}function su(t){ei===null?ei=[t]:ei.push(t)}var yx=ee.ReactCurrentBatchConfig;function ca(t,s,d){if(t=d.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(a(309));var g=d.stateNode}if(!g)throw Error(a(147,t));var b=g,T=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===T?s.ref:(s=function(O){var G=b.refs;O===null?delete G[T]:G[T]=O},s._stringRef=T,s)}if(typeof t!="string")throw Error(a(284));if(!d._owner)throw Error(a(290,t))}return t}function Cl(t,s){throw t=Object.prototype.toString.call(s),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function Ih(t){var s=t._init;return s(t._payload)}function Nh(t){function s(oe,J){if(t){var ae=oe.deletions;ae===null?(oe.deletions=[J],oe.flags|=16):ae.push(J)}}function d(oe,J){if(!t)return null;for(;J!==null;)s(oe,J),J=J.sibling;return null}function g(oe,J){for(oe=new Map;J!==null;)J.key!==null?oe.set(J.key,J):oe.set(J.index,J),J=J.sibling;return oe}function b(oe,J){return oe=gs(oe,J),oe.index=0,oe.sibling=null,oe}function T(oe,J,ae){return oe.index=ae,t?(ae=oe.alternate,ae!==null?(ae=ae.index,ae<J?(oe.flags|=2,J):ae):(oe.flags|=2,J)):(oe.flags|=1048576,J)}function O(oe){return t&&oe.alternate===null&&(oe.flags|=2),oe}function G(oe,J,ae,je){return J===null||J.tag!==6?(J=Ku(ae,oe.mode,je),J.return=oe,J):(J=b(J,ae),J.return=oe,J)}function $(oe,J,ae,je){var rt=ae.type;return rt===q?_e(oe,J,ae.props.children,je,ae.key):J!==null&&(J.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===Fe&&Ih(rt)===J.type)?(je=b(J,ae.props),je.ref=ca(oe,J,ae),je.return=oe,je):(je=Gl(ae.type,ae.key,ae.props,null,oe.mode,je),je.ref=ca(oe,J,ae),je.return=oe,je)}function he(oe,J,ae,je){return J===null||J.tag!==4||J.stateNode.containerInfo!==ae.containerInfo||J.stateNode.implementation!==ae.implementation?(J=qu(ae,oe.mode,je),J.return=oe,J):(J=b(J,ae.children||[]),J.return=oe,J)}function _e(oe,J,ae,je,rt){return J===null||J.tag!==7?(J=Xs(ae,oe.mode,je,rt),J.return=oe,J):(J=b(J,ae),J.return=oe,J)}function ke(oe,J,ae){if(typeof J=="string"&&J!==""||typeof J=="number")return J=Ku(""+J,oe.mode,ae),J.return=oe,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case re:return ae=Gl(J.type,J.key,J.props,null,oe.mode,ae),ae.ref=ca(oe,null,J),ae.return=oe,ae;case ne:return J=qu(J,oe.mode,ae),J.return=oe,J;case Fe:var je=J._init;return ke(oe,je(J._payload),ae)}if(Nt(J)||ze(J))return J=Xs(J,oe.mode,ae,null),J.return=oe,J;Cl(oe,J)}return null}function Te(oe,J,ae,je){var rt=J!==null?J.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number")return rt!==null?null:G(oe,J,""+ae,je);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case re:return ae.key===rt?$(oe,J,ae,je):null;case ne:return ae.key===rt?he(oe,J,ae,je):null;case Fe:return rt=ae._init,Te(oe,J,rt(ae._payload),je)}if(Nt(ae)||ze(ae))return rt!==null?null:_e(oe,J,ae,je,null);Cl(oe,ae)}return null}function Ze(oe,J,ae,je,rt){if(typeof je=="string"&&je!==""||typeof je=="number")return oe=oe.get(ae)||null,G(J,oe,""+je,rt);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case re:return oe=oe.get(je.key===null?ae:je.key)||null,$(J,oe,je,rt);case ne:return oe=oe.get(je.key===null?ae:je.key)||null,he(J,oe,je,rt);case Fe:var lt=je._init;return Ze(oe,J,ae,lt(je._payload),rt)}if(Nt(je)||ze(je))return oe=oe.get(ae)||null,_e(J,oe,je,rt,null);Cl(J,je)}return null}function Qe(oe,J,ae,je){for(var rt=null,lt=null,ct=J,yt=J=0,zn=null;ct!==null&&yt<ae.length;yt++){ct.index>yt?(zn=ct,ct=null):zn=ct.sibling;var zt=Te(oe,ct,ae[yt],je);if(zt===null){ct===null&&(ct=zn);break}t&&ct&&zt.alternate===null&&s(oe,ct),J=T(zt,J,yt),lt===null?rt=zt:lt.sibling=zt,lt=zt,ct=zn}if(yt===ae.length)return d(oe,ct),rn&&js(oe,yt),rt;if(ct===null){for(;yt<ae.length;yt++)ct=ke(oe,ae[yt],je),ct!==null&&(J=T(ct,J,yt),lt===null?rt=ct:lt.sibling=ct,lt=ct);return rn&&js(oe,yt),rt}for(ct=g(oe,ct);yt<ae.length;yt++)zn=Ze(ct,oe,yt,ae[yt],je),zn!==null&&(t&&zn.alternate!==null&&ct.delete(zn.key===null?yt:zn.key),J=T(zn,J,yt),lt===null?rt=zn:lt.sibling=zn,lt=zn);return t&&ct.forEach(function(ms){return s(oe,ms)}),rn&&js(oe,yt),rt}function et(oe,J,ae,je){var rt=ze(ae);if(typeof rt!="function")throw Error(a(150));if(ae=rt.call(ae),ae==null)throw Error(a(151));for(var lt=rt=null,ct=J,yt=J=0,zn=null,zt=ae.next();ct!==null&&!zt.done;yt++,zt=ae.next()){ct.index>yt?(zn=ct,ct=null):zn=ct.sibling;var ms=Te(oe,ct,zt.value,je);if(ms===null){ct===null&&(ct=zn);break}t&&ct&&ms.alternate===null&&s(oe,ct),J=T(ms,J,yt),lt===null?rt=ms:lt.sibling=ms,lt=ms,ct=zn}if(zt.done)return d(oe,ct),rn&&js(oe,yt),rt;if(ct===null){for(;!zt.done;yt++,zt=ae.next())zt=ke(oe,zt.value,je),zt!==null&&(J=T(zt,J,yt),lt===null?rt=zt:lt.sibling=zt,lt=zt);return rn&&js(oe,yt),rt}for(ct=g(oe,ct);!zt.done;yt++,zt=ae.next())zt=Ze(ct,oe,yt,zt.value,je),zt!==null&&(t&&zt.alternate!==null&&ct.delete(zt.key===null?yt:zt.key),J=T(zt,J,yt),lt===null?rt=zt:lt.sibling=zt,lt=zt);return t&&ct.forEach(function(qx){return s(oe,qx)}),rn&&js(oe,yt),rt}function En(oe,J,ae,je){if(typeof ae=="object"&&ae!==null&&ae.type===q&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case re:e:{for(var rt=ae.key,lt=J;lt!==null;){if(lt.key===rt){if(rt=ae.type,rt===q){if(lt.tag===7){d(oe,lt.sibling),J=b(lt,ae.props.children),J.return=oe,oe=J;break e}}else if(lt.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===Fe&&Ih(rt)===lt.type){d(oe,lt.sibling),J=b(lt,ae.props),J.ref=ca(oe,lt,ae),J.return=oe,oe=J;break e}d(oe,lt);break}else s(oe,lt);lt=lt.sibling}ae.type===q?(J=Xs(ae.props.children,oe.mode,je,ae.key),J.return=oe,oe=J):(je=Gl(ae.type,ae.key,ae.props,null,oe.mode,je),je.ref=ca(oe,J,ae),je.return=oe,oe=je)}return O(oe);case ne:e:{for(lt=ae.key;J!==null;){if(J.key===lt)if(J.tag===4&&J.stateNode.containerInfo===ae.containerInfo&&J.stateNode.implementation===ae.implementation){d(oe,J.sibling),J=b(J,ae.children||[]),J.return=oe,oe=J;break e}else{d(oe,J);break}else s(oe,J);J=J.sibling}J=qu(ae,oe.mode,je),J.return=oe,oe=J}return O(oe);case Fe:return lt=ae._init,En(oe,J,lt(ae._payload),je)}if(Nt(ae))return Qe(oe,J,ae,je);if(ze(ae))return et(oe,J,ae,je);Cl(oe,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"?(ae=""+ae,J!==null&&J.tag===6?(d(oe,J.sibling),J=b(J,ae),J.return=oe,oe=J):(d(oe,J),J=Ku(ae,oe.mode,je),J.return=oe,oe=J),O(oe)):d(oe,J)}return En}var wo=Nh(!0),_h=Nh(!1),El=ss(null),bl=null,vo=null,ou=null;function au(){ou=vo=bl=null}function lu(t){var s=El.current;en(El),t._currentValue=s}function cu(t,s,d){for(;t!==null;){var g=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,g!==null&&(g.childLanes|=s)):g!==null&&(g.childLanes&s)!==s&&(g.childLanes|=s),t===d)break;t=t.return}}function Co(t,s){bl=t,ou=vo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(Cr=!0),t.firstContext=null)}function Ur(t){var s=t._currentValue;if(ou!==t)if(t={context:t,memoizedValue:s,next:null},vo===null){if(bl===null)throw Error(a(308));vo=t,bl.dependencies={lanes:0,firstContext:t}}else vo=vo.next=t;return s}var Fs=null;function uu(t){Fs===null?Fs=[t]:Fs.push(t)}function Rh(t,s,d,g){var b=s.interleaved;return b===null?(d.next=d,uu(s)):(d.next=b.next,b.next=d),s.interleaved=d,Oi(t,g)}function Oi(t,s){t.lanes|=s;var d=t.alternate;for(d!==null&&(d.lanes|=s),d=t,t=t.return;t!==null;)t.childLanes|=s,d=t.alternate,d!==null&&(d.childLanes|=s),d=t,t=t.return;return d.tag===3?d.stateNode:null}var ls=!1;function du(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kh(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mi(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function cs(t,s,d){var g=t.updateQueue;if(g===null)return null;if(g=g.shared,Ft&2){var b=g.pending;return b===null?s.next=s:(s.next=b.next,b.next=s),g.pending=s,Oi(t,d)}return b=g.interleaved,b===null?(s.next=s,uu(g)):(s.next=b.next,b.next=s),g.interleaved=s,Oi(t,d)}function Al(t,s,d){if(s=s.updateQueue,s!==null&&(s=s.shared,(d&4194240)!==0)){var g=s.lanes;g&=t.pendingLanes,d|=g,s.lanes=d,hn(t,d)}}function Ph(t,s){var d=t.updateQueue,g=t.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var b=null,T=null;if(d=d.firstBaseUpdate,d!==null){do{var O={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};T===null?b=T=O:T=T.next=O,d=d.next}while(d!==null);T===null?b=T=s:T=T.next=s}else b=T=s;d={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:T,shared:g.shared,effects:g.effects},t.updateQueue=d;return}t=d.lastBaseUpdate,t===null?d.firstBaseUpdate=s:t.next=s,d.lastBaseUpdate=s}function Sl(t,s,d,g){var b=t.updateQueue;ls=!1;var T=b.firstBaseUpdate,O=b.lastBaseUpdate,G=b.shared.pending;if(G!==null){b.shared.pending=null;var $=G,he=$.next;$.next=null,O===null?T=he:O.next=he,O=$;var _e=t.alternate;_e!==null&&(_e=_e.updateQueue,G=_e.lastBaseUpdate,G!==O&&(G===null?_e.firstBaseUpdate=he:G.next=he,_e.lastBaseUpdate=$))}if(T!==null){var ke=b.baseState;O=0,_e=he=$=null,G=T;do{var Te=G.lane,Ze=G.eventTime;if((g&Te)===Te){_e!==null&&(_e=_e.next={eventTime:Ze,lane:0,tag:G.tag,payload:G.payload,callback:G.callback,next:null});e:{var Qe=t,et=G;switch(Te=s,Ze=d,et.tag){case 1:if(Qe=et.payload,typeof Qe=="function"){ke=Qe.call(Ze,ke,Te);break e}ke=Qe;break e;case 3:Qe.flags=Qe.flags&-65537|128;case 0:if(Qe=et.payload,Te=typeof Qe=="function"?Qe.call(Ze,ke,Te):Qe,Te==null)break e;ke=ce({},ke,Te);break e;case 2:ls=!0}}G.callback!==null&&G.lane!==0&&(t.flags|=64,Te=b.effects,Te===null?b.effects=[G]:Te.push(G))}else Ze={eventTime:Ze,lane:Te,tag:G.tag,payload:G.payload,callback:G.callback,next:null},_e===null?(he=_e=Ze,$=ke):_e=_e.next=Ze,O|=Te;if(G=G.next,G===null){if(G=b.shared.pending,G===null)break;Te=G,G=Te.next,Te.next=null,b.lastBaseUpdate=Te,b.shared.pending=null}}while(!0);if(_e===null&&($=ke),b.baseState=$,b.firstBaseUpdate=he,b.lastBaseUpdate=_e,s=b.shared.interleaved,s!==null){b=s;do O|=b.lane,b=b.next;while(b!==s)}else T===null&&(b.shared.lanes=0);Us|=O,t.lanes=O,t.memoizedState=ke}}function Oh(t,s,d){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var g=t[s],b=g.callback;if(b!==null){if(g.callback=null,g=d,typeof b!="function")throw Error(a(191,b));b.call(g)}}}var ua={},hi=ss(ua),da=ss(ua),fa=ss(ua);function Vs(t){if(t===ua)throw Error(a(174));return t}function fu(t,s){switch(Qt(fa,s),Qt(da,t),Qt(hi,ua),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:ut(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=ut(s,t)}en(hi),Qt(hi,s)}function Eo(){en(hi),en(da),en(fa)}function Mh(t){Vs(fa.current);var s=Vs(hi.current),d=ut(s,t.type);s!==d&&(Qt(da,t),Qt(hi,d))}function hu(t){da.current===t&&(en(hi),en(da))}var ln=ss(0);function Tl(t){for(var s=t;s!==null;){if(s.tag===13){var d=s.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var pu=[];function gu(){for(var t=0;t<pu.length;t++)pu[t]._workInProgressVersionPrimary=null;pu.length=0}var Il=ee.ReactCurrentDispatcher,mu=ee.ReactCurrentBatchConfig,zs=0,cn=null,Pn=null,Fn=null,Nl=!1,ha=!1,pa=0,wx=0;function or(){throw Error(a(321))}function xu(t,s){if(s===null)return!1;for(var d=0;d<s.length&&d<t.length;d++)if(!te(t[d],s[d]))return!1;return!0}function yu(t,s,d,g,b,T){if(zs=T,cn=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Il.current=t===null||t.memoizedState===null?bx:Ax,t=d(g,b),ha){T=0;do{if(ha=!1,pa=0,25<=T)throw Error(a(301));T+=1,Fn=Pn=null,s.updateQueue=null,Il.current=Sx,t=d(g,b)}while(ha)}if(Il.current=kl,s=Pn!==null&&Pn.next!==null,zs=0,Fn=Pn=cn=null,Nl=!1,s)throw Error(a(300));return t}function wu(){var t=pa!==0;return pa=0,t}function pi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fn===null?cn.memoizedState=Fn=t:Fn=Fn.next=t,Fn}function Wr(){if(Pn===null){var t=cn.alternate;t=t!==null?t.memoizedState:null}else t=Pn.next;var s=Fn===null?cn.memoizedState:Fn.next;if(s!==null)Fn=s,Pn=t;else{if(t===null)throw Error(a(310));Pn=t,t={memoizedState:Pn.memoizedState,baseState:Pn.baseState,baseQueue:Pn.baseQueue,queue:Pn.queue,next:null},Fn===null?cn.memoizedState=Fn=t:Fn=Fn.next=t}return Fn}function ga(t,s){return typeof s=="function"?s(t):s}function vu(t){var s=Wr(),d=s.queue;if(d===null)throw Error(a(311));d.lastRenderedReducer=t;var g=Pn,b=g.baseQueue,T=d.pending;if(T!==null){if(b!==null){var O=b.next;b.next=T.next,T.next=O}g.baseQueue=b=T,d.pending=null}if(b!==null){T=b.next,g=g.baseState;var G=O=null,$=null,he=T;do{var _e=he.lane;if((zs&_e)===_e)$!==null&&($=$.next={lane:0,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),g=he.hasEagerState?he.eagerState:t(g,he.action);else{var ke={lane:_e,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null};$===null?(G=$=ke,O=g):$=$.next=ke,cn.lanes|=_e,Us|=_e}he=he.next}while(he!==null&&he!==T);$===null?O=g:$.next=G,te(g,s.memoizedState)||(Cr=!0),s.memoizedState=g,s.baseState=O,s.baseQueue=$,d.lastRenderedState=g}if(t=d.interleaved,t!==null){b=t;do T=b.lane,cn.lanes|=T,Us|=T,b=b.next;while(b!==t)}else b===null&&(d.lanes=0);return[s.memoizedState,d.dispatch]}function Cu(t){var s=Wr(),d=s.queue;if(d===null)throw Error(a(311));d.lastRenderedReducer=t;var g=d.dispatch,b=d.pending,T=s.memoizedState;if(b!==null){d.pending=null;var O=b=b.next;do T=t(T,O.action),O=O.next;while(O!==b);te(T,s.memoizedState)||(Cr=!0),s.memoizedState=T,s.baseQueue===null&&(s.baseState=T),d.lastRenderedState=T}return[T,g]}function Dh(){}function Lh(t,s){var d=cn,g=Wr(),b=s(),T=!te(g.memoizedState,b);if(T&&(g.memoizedState=b,Cr=!0),g=g.queue,Eu(Fh.bind(null,d,g,t),[t]),g.getSnapshot!==s||T||Fn!==null&&Fn.memoizedState.tag&1){if(d.flags|=2048,ma(9,jh.bind(null,d,g,b,s),void 0,null),Vn===null)throw Error(a(349));zs&30||Bh(d,s,b)}return b}function Bh(t,s,d){t.flags|=16384,t={getSnapshot:s,value:d},s=cn.updateQueue,s===null?(s={lastEffect:null,stores:null},cn.updateQueue=s,s.stores=[t]):(d=s.stores,d===null?s.stores=[t]:d.push(t))}function jh(t,s,d,g){s.value=d,s.getSnapshot=g,Vh(s)&&zh(t)}function Fh(t,s,d){return d(function(){Vh(s)&&zh(t)})}function Vh(t){var s=t.getSnapshot;t=t.value;try{var d=s();return!te(t,d)}catch{return!0}}function zh(t){var s=Oi(t,1);s!==null&&ii(s,t,1,-1)}function Uh(t){var s=pi();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:t},s.queue=t,t=t.dispatch=Ex.bind(null,cn,t),[s.memoizedState,t]}function ma(t,s,d,g){return t={tag:t,create:s,destroy:d,deps:g,next:null},s=cn.updateQueue,s===null?(s={lastEffect:null,stores:null},cn.updateQueue=s,s.lastEffect=t.next=t):(d=s.lastEffect,d===null?s.lastEffect=t.next=t:(g=d.next,d.next=t,t.next=g,s.lastEffect=t)),t}function Wh(){return Wr().memoizedState}function _l(t,s,d,g){var b=pi();cn.flags|=t,b.memoizedState=ma(1|s,d,void 0,g===void 0?null:g)}function Rl(t,s,d,g){var b=Wr();g=g===void 0?null:g;var T=void 0;if(Pn!==null){var O=Pn.memoizedState;if(T=O.destroy,g!==null&&xu(g,O.deps)){b.memoizedState=ma(s,d,T,g);return}}cn.flags|=t,b.memoizedState=ma(1|s,d,T,g)}function Hh(t,s){return _l(8390656,8,t,s)}function Eu(t,s){return Rl(2048,8,t,s)}function Gh(t,s){return Rl(4,2,t,s)}function Xh(t,s){return Rl(4,4,t,s)}function Yh(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function $h(t,s,d){return d=d!=null?d.concat([t]):null,Rl(4,4,Yh.bind(null,s,t),d)}function bu(){}function Zh(t,s){var d=Wr();s=s===void 0?null:s;var g=d.memoizedState;return g!==null&&s!==null&&xu(s,g[1])?g[0]:(d.memoizedState=[t,s],t)}function Kh(t,s){var d=Wr();s=s===void 0?null:s;var g=d.memoizedState;return g!==null&&s!==null&&xu(s,g[1])?g[0]:(t=t(),d.memoizedState=[t,s],t)}function qh(t,s,d){return zs&21?(te(d,s)||(d=Nn(),cn.lanes|=d,Us|=d,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,Cr=!0),t.memoizedState=d)}function vx(t,s){var d=Tt;Tt=d!==0&&4>d?d:4,t(!0);var g=mu.transition;mu.transition={};try{t(!1),s()}finally{Tt=d,mu.transition=g}}function Qh(){return Wr().memoizedState}function Cx(t,s,d){var g=hs(t);if(d={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null},Jh(t))e0(s,d);else if(d=Rh(t,s,d,g),d!==null){var b=gr();ii(d,t,g,b),t0(d,s,g)}}function Ex(t,s,d){var g=hs(t),b={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null};if(Jh(t))e0(s,b);else{var T=t.alternate;if(t.lanes===0&&(T===null||T.lanes===0)&&(T=s.lastRenderedReducer,T!==null))try{var O=s.lastRenderedState,G=T(O,d);if(b.hasEagerState=!0,b.eagerState=G,te(G,O)){var $=s.interleaved;$===null?(b.next=b,uu(s)):(b.next=$.next,$.next=b),s.interleaved=b;return}}catch{}finally{}d=Rh(t,s,b,g),d!==null&&(b=gr(),ii(d,t,g,b),t0(d,s,g))}}function Jh(t){var s=t.alternate;return t===cn||s!==null&&s===cn}function e0(t,s){ha=Nl=!0;var d=t.pending;d===null?s.next=s:(s.next=d.next,d.next=s),t.pending=s}function t0(t,s,d){if(d&4194240){var g=s.lanes;g&=t.pendingLanes,d|=g,s.lanes=d,hn(t,d)}}var kl={readContext:Ur,useCallback:or,useContext:or,useEffect:or,useImperativeHandle:or,useInsertionEffect:or,useLayoutEffect:or,useMemo:or,useReducer:or,useRef:or,useState:or,useDebugValue:or,useDeferredValue:or,useTransition:or,useMutableSource:or,useSyncExternalStore:or,useId:or,unstable_isNewReconciler:!1},bx={readContext:Ur,useCallback:function(t,s){return pi().memoizedState=[t,s===void 0?null:s],t},useContext:Ur,useEffect:Hh,useImperativeHandle:function(t,s,d){return d=d!=null?d.concat([t]):null,_l(4194308,4,Yh.bind(null,s,t),d)},useLayoutEffect:function(t,s){return _l(4194308,4,t,s)},useInsertionEffect:function(t,s){return _l(4,2,t,s)},useMemo:function(t,s){var d=pi();return s=s===void 0?null:s,t=t(),d.memoizedState=[t,s],t},useReducer:function(t,s,d){var g=pi();return s=d!==void 0?d(s):s,g.memoizedState=g.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},g.queue=t,t=t.dispatch=Cx.bind(null,cn,t),[g.memoizedState,t]},useRef:function(t){var s=pi();return t={current:t},s.memoizedState=t},useState:Uh,useDebugValue:bu,useDeferredValue:function(t){return pi().memoizedState=t},useTransition:function(){var t=Uh(!1),s=t[0];return t=vx.bind(null,t[1]),pi().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,d){var g=cn,b=pi();if(rn){if(d===void 0)throw Error(a(407));d=d()}else{if(d=s(),Vn===null)throw Error(a(349));zs&30||Bh(g,s,d)}b.memoizedState=d;var T={value:d,getSnapshot:s};return b.queue=T,Hh(Fh.bind(null,g,T,t),[t]),g.flags|=2048,ma(9,jh.bind(null,g,T,d,s),void 0,null),d},useId:function(){var t=pi(),s=Vn.identifierPrefix;if(rn){var d=Pi,g=ki;d=(g&~(1<<32-hr(g)-1)).toString(32)+d,s=":"+s+"R"+d,d=pa++,0<d&&(s+="H"+d.toString(32)),s+=":"}else d=wx++,s=":"+s+"r"+d.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},Ax={readContext:Ur,useCallback:Zh,useContext:Ur,useEffect:Eu,useImperativeHandle:$h,useInsertionEffect:Gh,useLayoutEffect:Xh,useMemo:Kh,useReducer:vu,useRef:Wh,useState:function(){return vu(ga)},useDebugValue:bu,useDeferredValue:function(t){var s=Wr();return qh(s,Pn.memoizedState,t)},useTransition:function(){var t=vu(ga)[0],s=Wr().memoizedState;return[t,s]},useMutableSource:Dh,useSyncExternalStore:Lh,useId:Qh,unstable_isNewReconciler:!1},Sx={readContext:Ur,useCallback:Zh,useContext:Ur,useEffect:Eu,useImperativeHandle:$h,useInsertionEffect:Gh,useLayoutEffect:Xh,useMemo:Kh,useReducer:Cu,useRef:Wh,useState:function(){return Cu(ga)},useDebugValue:bu,useDeferredValue:function(t){var s=Wr();return Pn===null?s.memoizedState=t:qh(s,Pn.memoizedState,t)},useTransition:function(){var t=Cu(ga)[0],s=Wr().memoizedState;return[t,s]},useMutableSource:Dh,useSyncExternalStore:Lh,useId:Qh,unstable_isNewReconciler:!1};function ti(t,s){if(t&&t.defaultProps){s=ce({},s),t=t.defaultProps;for(var d in t)s[d]===void 0&&(s[d]=t[d]);return s}return s}function Au(t,s,d,g){s=t.memoizedState,d=d(g,s),d=d==null?s:ce({},s,d),t.memoizedState=d,t.lanes===0&&(t.updateQueue.baseState=d)}var Pl={isMounted:function(t){return(t=t._reactInternals)?tr(t)===t:!1},enqueueSetState:function(t,s,d){t=t._reactInternals;var g=gr(),b=hs(t),T=Mi(g,b);T.payload=s,d!=null&&(T.callback=d),s=cs(t,T,b),s!==null&&(ii(s,t,b,g),Al(s,t,b))},enqueueReplaceState:function(t,s,d){t=t._reactInternals;var g=gr(),b=hs(t),T=Mi(g,b);T.tag=1,T.payload=s,d!=null&&(T.callback=d),s=cs(t,T,b),s!==null&&(ii(s,t,b,g),Al(s,t,b))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var d=gr(),g=hs(t),b=Mi(d,g);b.tag=2,s!=null&&(b.callback=s),s=cs(t,b,g),s!==null&&(ii(s,t,g,d),Al(s,t,g))}};function n0(t,s,d,g,b,T,O){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(g,T,O):s.prototype&&s.prototype.isPureReactComponent?!de(d,g)||!de(b,T):!0}function r0(t,s,d){var g=!1,b=os,T=s.contextType;return typeof T=="object"&&T!==null?T=Ur(T):(b=vr(s)?Ls:sr.current,g=s.contextTypes,T=(g=g!=null)?go(t,b):os),s=new s(d,T),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Pl,t.stateNode=s,s._reactInternals=t,g&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=b,t.__reactInternalMemoizedMaskedChildContext=T),s}function i0(t,s,d,g){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(d,g),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(d,g),s.state!==t&&Pl.enqueueReplaceState(s,s.state,null)}function Su(t,s,d,g){var b=t.stateNode;b.props=d,b.state=t.memoizedState,b.refs={},du(t);var T=s.contextType;typeof T=="object"&&T!==null?b.context=Ur(T):(T=vr(s)?Ls:sr.current,b.context=go(t,T)),b.state=t.memoizedState,T=s.getDerivedStateFromProps,typeof T=="function"&&(Au(t,s,T,d),b.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(s=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),s!==b.state&&Pl.enqueueReplaceState(b,b.state,null),Sl(t,d,b,g),b.state=t.memoizedState),typeof b.componentDidMount=="function"&&(t.flags|=4194308)}function bo(t,s){try{var d="",g=s;do d+=Ee(g),g=g.return;while(g);var b=d}catch(T){b=`
Error generating stack: `+T.message+`
`+T.stack}return{value:t,source:s,stack:b,digest:null}}function Tu(t,s,d){return{value:t,source:null,stack:d??null,digest:s??null}}function Iu(t,s){try{console.error(s.value)}catch(d){setTimeout(function(){throw d})}}var Tx=typeof WeakMap=="function"?WeakMap:Map;function s0(t,s,d){d=Mi(-1,d),d.tag=3,d.payload={element:null};var g=s.value;return d.callback=function(){Fl||(Fl=!0,Uu=g),Iu(t,s)},d}function o0(t,s,d){d=Mi(-1,d),d.tag=3;var g=t.type.getDerivedStateFromError;if(typeof g=="function"){var b=s.value;d.payload=function(){return g(b)},d.callback=function(){Iu(t,s)}}var T=t.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(d.callback=function(){Iu(t,s),typeof g!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var O=s.stack;this.componentDidCatch(s.value,{componentStack:O!==null?O:""})}),d}function a0(t,s,d){var g=t.pingCache;if(g===null){g=t.pingCache=new Tx;var b=new Set;g.set(s,b)}else b=g.get(s),b===void 0&&(b=new Set,g.set(s,b));b.has(d)||(b.add(d),t=Vx.bind(null,t,s,d),s.then(t,t))}function l0(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function c0(t,s,d,g,b){return t.mode&1?(t.flags|=65536,t.lanes=b,t):(t===s?t.flags|=65536:(t.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(s=Mi(-1,1),s.tag=2,cs(d,s,1))),d.lanes|=1),t)}var Ix=ee.ReactCurrentOwner,Cr=!1;function pr(t,s,d,g){s.child=t===null?_h(s,null,d,g):wo(s,t.child,d,g)}function u0(t,s,d,g,b){d=d.render;var T=s.ref;return Co(s,b),g=yu(t,s,d,g,T,b),d=wu(),t!==null&&!Cr?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~b,Di(t,s,b)):(rn&&d&&tu(s),s.flags|=1,pr(t,s,g,b),s.child)}function d0(t,s,d,g,b){if(t===null){var T=d.type;return typeof T=="function"&&!Zu(T)&&T.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(s.tag=15,s.type=T,f0(t,s,T,g,b)):(t=Gl(d.type,null,g,s,s.mode,b),t.ref=s.ref,t.return=s,s.child=t)}if(T=t.child,!(t.lanes&b)){var O=T.memoizedProps;if(d=d.compare,d=d!==null?d:de,d(O,g)&&t.ref===s.ref)return Di(t,s,b)}return s.flags|=1,t=gs(T,g),t.ref=s.ref,t.return=s,s.child=t}function f0(t,s,d,g,b){if(t!==null){var T=t.memoizedProps;if(de(T,g)&&t.ref===s.ref)if(Cr=!1,s.pendingProps=g=T,(t.lanes&b)!==0)t.flags&131072&&(Cr=!0);else return s.lanes=t.lanes,Di(t,s,b)}return Nu(t,s,d,g,b)}function h0(t,s,d){var g=s.pendingProps,b=g.children,T=t!==null?t.memoizedState:null;if(g.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qt(So,Or),Or|=d;else{if(!(d&1073741824))return t=T!==null?T.baseLanes|d:d,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Qt(So,Or),Or|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=T!==null?T.baseLanes:d,Qt(So,Or),Or|=g}else T!==null?(g=T.baseLanes|d,s.memoizedState=null):g=d,Qt(So,Or),Or|=g;return pr(t,s,b,d),s.child}function p0(t,s){var d=s.ref;(t===null&&d!==null||t!==null&&t.ref!==d)&&(s.flags|=512,s.flags|=2097152)}function Nu(t,s,d,g,b){var T=vr(d)?Ls:sr.current;return T=go(s,T),Co(s,b),d=yu(t,s,d,g,T,b),g=wu(),t!==null&&!Cr?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~b,Di(t,s,b)):(rn&&g&&tu(s),s.flags|=1,pr(t,s,d,b),s.child)}function g0(t,s,d,g,b){if(vr(d)){var T=!0;ml(s)}else T=!1;if(Co(s,b),s.stateNode===null)Ml(t,s),r0(s,d,g),Su(s,d,g,b),g=!0;else if(t===null){var O=s.stateNode,G=s.memoizedProps;O.props=G;var $=O.context,he=d.contextType;typeof he=="object"&&he!==null?he=Ur(he):(he=vr(d)?Ls:sr.current,he=go(s,he));var _e=d.getDerivedStateFromProps,ke=typeof _e=="function"||typeof O.getSnapshotBeforeUpdate=="function";ke||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(G!==g||$!==he)&&i0(s,O,g,he),ls=!1;var Te=s.memoizedState;O.state=Te,Sl(s,g,O,b),$=s.memoizedState,G!==g||Te!==$||wr.current||ls?(typeof _e=="function"&&(Au(s,d,_e,g),$=s.memoizedState),(G=ls||n0(s,d,G,g,Te,$,he))?(ke||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(s.flags|=4194308)):(typeof O.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=g,s.memoizedState=$),O.props=g,O.state=$,O.context=he,g=G):(typeof O.componentDidMount=="function"&&(s.flags|=4194308),g=!1)}else{O=s.stateNode,kh(t,s),G=s.memoizedProps,he=s.type===s.elementType?G:ti(s.type,G),O.props=he,ke=s.pendingProps,Te=O.context,$=d.contextType,typeof $=="object"&&$!==null?$=Ur($):($=vr(d)?Ls:sr.current,$=go(s,$));var Ze=d.getDerivedStateFromProps;(_e=typeof Ze=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(G!==ke||Te!==$)&&i0(s,O,g,$),ls=!1,Te=s.memoizedState,O.state=Te,Sl(s,g,O,b);var Qe=s.memoizedState;G!==ke||Te!==Qe||wr.current||ls?(typeof Ze=="function"&&(Au(s,d,Ze,g),Qe=s.memoizedState),(he=ls||n0(s,d,he,g,Te,Qe,$)||!1)?(_e||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(g,Qe,$),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(g,Qe,$)),typeof O.componentDidUpdate=="function"&&(s.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof O.componentDidUpdate!="function"||G===t.memoizedProps&&Te===t.memoizedState||(s.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||G===t.memoizedProps&&Te===t.memoizedState||(s.flags|=1024),s.memoizedProps=g,s.memoizedState=Qe),O.props=g,O.state=Qe,O.context=$,g=he):(typeof O.componentDidUpdate!="function"||G===t.memoizedProps&&Te===t.memoizedState||(s.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||G===t.memoizedProps&&Te===t.memoizedState||(s.flags|=1024),g=!1)}return _u(t,s,d,g,T,b)}function _u(t,s,d,g,b,T){p0(t,s);var O=(s.flags&128)!==0;if(!g&&!O)return b&&vh(s,d,!1),Di(t,s,T);g=s.stateNode,Ix.current=s;var G=O&&typeof d.getDerivedStateFromError!="function"?null:g.render();return s.flags|=1,t!==null&&O?(s.child=wo(s,t.child,null,T),s.child=wo(s,null,G,T)):pr(t,s,G,T),s.memoizedState=g.state,b&&vh(s,d,!0),s.child}function m0(t){var s=t.stateNode;s.pendingContext?yh(t,s.pendingContext,s.pendingContext!==s.context):s.context&&yh(t,s.context,!1),fu(t,s.containerInfo)}function x0(t,s,d,g,b){return yo(),su(b),s.flags|=256,pr(t,s,d,g),s.child}var Ru={dehydrated:null,treeContext:null,retryLane:0};function ku(t){return{baseLanes:t,cachePool:null,transitions:null}}function y0(t,s,d){var g=s.pendingProps,b=ln.current,T=!1,O=(s.flags&128)!==0,G;if((G=O)||(G=t!==null&&t.memoizedState===null?!1:(b&2)!==0),G?(T=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(b|=1),Qt(ln,b&1),t===null)return iu(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(O=g.children,t=g.fallback,T?(g=s.mode,T=s.child,O={mode:"hidden",children:O},!(g&1)&&T!==null?(T.childLanes=0,T.pendingProps=O):T=Xl(O,g,0,null),t=Xs(t,g,d,null),T.return=s,t.return=s,T.sibling=t,s.child=T,s.child.memoizedState=ku(d),s.memoizedState=Ru,t):Pu(s,O));if(b=t.memoizedState,b!==null&&(G=b.dehydrated,G!==null))return Nx(t,s,O,g,G,b,d);if(T){T=g.fallback,O=s.mode,b=t.child,G=b.sibling;var $={mode:"hidden",children:g.children};return!(O&1)&&s.child!==b?(g=s.child,g.childLanes=0,g.pendingProps=$,s.deletions=null):(g=gs(b,$),g.subtreeFlags=b.subtreeFlags&14680064),G!==null?T=gs(G,T):(T=Xs(T,O,d,null),T.flags|=2),T.return=s,g.return=s,g.sibling=T,s.child=g,g=T,T=s.child,O=t.child.memoizedState,O=O===null?ku(d):{baseLanes:O.baseLanes|d,cachePool:null,transitions:O.transitions},T.memoizedState=O,T.childLanes=t.childLanes&~d,s.memoizedState=Ru,g}return T=t.child,t=T.sibling,g=gs(T,{mode:"visible",children:g.children}),!(s.mode&1)&&(g.lanes=d),g.return=s,g.sibling=null,t!==null&&(d=s.deletions,d===null?(s.deletions=[t],s.flags|=16):d.push(t)),s.child=g,s.memoizedState=null,g}function Pu(t,s){return s=Xl({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function Ol(t,s,d,g){return g!==null&&su(g),wo(s,t.child,null,d),t=Pu(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Nx(t,s,d,g,b,T,O){if(d)return s.flags&256?(s.flags&=-257,g=Tu(Error(a(422))),Ol(t,s,O,g)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(T=g.fallback,b=s.mode,g=Xl({mode:"visible",children:g.children},b,0,null),T=Xs(T,b,O,null),T.flags|=2,g.return=s,T.return=s,g.sibling=T,s.child=g,s.mode&1&&wo(s,t.child,null,O),s.child.memoizedState=ku(O),s.memoizedState=Ru,T);if(!(s.mode&1))return Ol(t,s,O,null);if(b.data==="$!"){if(g=b.nextSibling&&b.nextSibling.dataset,g)var G=g.dgst;return g=G,T=Error(a(419)),g=Tu(T,g,void 0),Ol(t,s,O,g)}if(G=(O&t.childLanes)!==0,Cr||G){if(g=Vn,g!==null){switch(O&-O){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=b&(g.suspendedLanes|O)?0:b,b!==0&&b!==T.retryLane&&(T.retryLane=b,Oi(t,b),ii(g,t,b,-1))}return $u(),g=Tu(Error(a(421))),Ol(t,s,O,g)}return b.data==="$?"?(s.flags|=128,s.child=t.child,s=zx.bind(null,t),b._reactRetry=s,null):(t=T.treeContext,Pr=is(b.nextSibling),kr=s,rn=!0,ei=null,t!==null&&(Vr[zr++]=ki,Vr[zr++]=Pi,Vr[zr++]=Bs,ki=t.id,Pi=t.overflow,Bs=s),s=Pu(s,g.children),s.flags|=4096,s)}function w0(t,s,d){t.lanes|=s;var g=t.alternate;g!==null&&(g.lanes|=s),cu(t.return,s,d)}function Ou(t,s,d,g,b){var T=t.memoizedState;T===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:b}:(T.isBackwards=s,T.rendering=null,T.renderingStartTime=0,T.last=g,T.tail=d,T.tailMode=b)}function v0(t,s,d){var g=s.pendingProps,b=g.revealOrder,T=g.tail;if(pr(t,s,g.children,d),g=ln.current,g&2)g=g&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&w0(t,d,s);else if(t.tag===19)w0(t,d,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}g&=1}if(Qt(ln,g),!(s.mode&1))s.memoizedState=null;else switch(b){case"forwards":for(d=s.child,b=null;d!==null;)t=d.alternate,t!==null&&Tl(t)===null&&(b=d),d=d.sibling;d=b,d===null?(b=s.child,s.child=null):(b=d.sibling,d.sibling=null),Ou(s,!1,b,d,T);break;case"backwards":for(d=null,b=s.child,s.child=null;b!==null;){if(t=b.alternate,t!==null&&Tl(t)===null){s.child=b;break}t=b.sibling,b.sibling=d,d=b,b=t}Ou(s,!0,d,null,T);break;case"together":Ou(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ml(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function Di(t,s,d){if(t!==null&&(s.dependencies=t.dependencies),Us|=s.lanes,!(d&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(a(153));if(s.child!==null){for(t=s.child,d=gs(t,t.pendingProps),s.child=d,d.return=s;t.sibling!==null;)t=t.sibling,d=d.sibling=gs(t,t.pendingProps),d.return=s;d.sibling=null}return s.child}function _x(t,s,d){switch(s.tag){case 3:m0(s),yo();break;case 5:Mh(s);break;case 1:vr(s.type)&&ml(s);break;case 4:fu(s,s.stateNode.containerInfo);break;case 10:var g=s.type._context,b=s.memoizedProps.value;Qt(El,g._currentValue),g._currentValue=b;break;case 13:if(g=s.memoizedState,g!==null)return g.dehydrated!==null?(Qt(ln,ln.current&1),s.flags|=128,null):d&s.child.childLanes?y0(t,s,d):(Qt(ln,ln.current&1),t=Di(t,s,d),t!==null?t.sibling:null);Qt(ln,ln.current&1);break;case 19:if(g=(d&s.childLanes)!==0,t.flags&128){if(g)return v0(t,s,d);s.flags|=128}if(b=s.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Qt(ln,ln.current),g)break;return null;case 22:case 23:return s.lanes=0,h0(t,s,d)}return Di(t,s,d)}var C0,Mu,E0,b0;C0=function(t,s){for(var d=s.child;d!==null;){if(d.tag===5||d.tag===6)t.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break;for(;d.sibling===null;){if(d.return===null||d.return===s)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Mu=function(){},E0=function(t,s,d,g){var b=t.memoizedProps;if(b!==g){t=s.stateNode,Vs(hi.current);var T=null;switch(d){case"input":b=Xe(t,b),g=Xe(t,g),T=[];break;case"select":b=ce({},b,{value:void 0}),g=ce({},g,{value:void 0}),T=[];break;case"textarea":b=yn(t,b),g=yn(t,g),T=[];break;default:typeof b.onClick!="function"&&typeof g.onClick=="function"&&(t.onclick=hl)}dt(d,g);var O;d=null;for(he in b)if(!g.hasOwnProperty(he)&&b.hasOwnProperty(he)&&b[he]!=null)if(he==="style"){var G=b[he];for(O in G)G.hasOwnProperty(O)&&(d||(d={}),d[O]="")}else he!=="dangerouslySetInnerHTML"&&he!=="children"&&he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&he!=="autoFocus"&&(p.hasOwnProperty(he)?T||(T=[]):(T=T||[]).push(he,null));for(he in g){var $=g[he];if(G=b!=null?b[he]:void 0,g.hasOwnProperty(he)&&$!==G&&($!=null||G!=null))if(he==="style")if(G){for(O in G)!G.hasOwnProperty(O)||$&&$.hasOwnProperty(O)||(d||(d={}),d[O]="");for(O in $)$.hasOwnProperty(O)&&G[O]!==$[O]&&(d||(d={}),d[O]=$[O])}else d||(T||(T=[]),T.push(he,d)),d=$;else he==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,G=G?G.__html:void 0,$!=null&&G!==$&&(T=T||[]).push(he,$)):he==="children"?typeof $!="string"&&typeof $!="number"||(T=T||[]).push(he,""+$):he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&(p.hasOwnProperty(he)?($!=null&&he==="onScroll"&&Jt("scroll",t),T||G===$||(T=[])):(T=T||[]).push(he,$))}d&&(T=T||[]).push("style",d);var he=T;(s.updateQueue=he)&&(s.flags|=4)}},b0=function(t,s,d,g){d!==g&&(s.flags|=4)};function xa(t,s){if(!rn)switch(t.tailMode){case"hidden":s=t.tail;for(var d=null;s!==null;)s.alternate!==null&&(d=s),s=s.sibling;d===null?t.tail=null:d.sibling=null;break;case"collapsed":d=t.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:g.sibling=null}}function ar(t){var s=t.alternate!==null&&t.alternate.child===t.child,d=0,g=0;if(s)for(var b=t.child;b!==null;)d|=b.lanes|b.childLanes,g|=b.subtreeFlags&14680064,g|=b.flags&14680064,b.return=t,b=b.sibling;else for(b=t.child;b!==null;)d|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=t,b=b.sibling;return t.subtreeFlags|=g,t.childLanes=d,s}function Rx(t,s,d){var g=s.pendingProps;switch(nu(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ar(s),null;case 1:return vr(s.type)&&gl(),ar(s),null;case 3:return g=s.stateNode,Eo(),en(wr),en(sr),gu(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(t===null||t.child===null)&&(vl(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,ei!==null&&(Gu(ei),ei=null))),Mu(t,s),ar(s),null;case 5:hu(s);var b=Vs(fa.current);if(d=s.type,t!==null&&s.stateNode!=null)E0(t,s,d,g,b),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!g){if(s.stateNode===null)throw Error(a(166));return ar(s),null}if(t=Vs(hi.current),vl(s)){g=s.stateNode,d=s.type;var T=s.memoizedProps;switch(g[fi]=s,g[aa]=T,t=(s.mode&1)!==0,d){case"dialog":Jt("cancel",g),Jt("close",g);break;case"iframe":case"object":case"embed":Jt("load",g);break;case"video":case"audio":for(b=0;b<ia.length;b++)Jt(ia[b],g);break;case"source":Jt("error",g);break;case"img":case"image":case"link":Jt("error",g),Jt("load",g);break;case"details":Jt("toggle",g);break;case"input":ht(g,T),Jt("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!T.multiple},Jt("invalid",g);break;case"textarea":Ct(g,T),Jt("invalid",g)}dt(d,T),b=null;for(var O in T)if(T.hasOwnProperty(O)){var G=T[O];O==="children"?typeof G=="string"?g.textContent!==G&&(T.suppressHydrationWarning!==!0&&fl(g.textContent,G,t),b=["children",G]):typeof G=="number"&&g.textContent!==""+G&&(T.suppressHydrationWarning!==!0&&fl(g.textContent,G,t),b=["children",""+G]):p.hasOwnProperty(O)&&G!=null&&O==="onScroll"&&Jt("scroll",g)}switch(d){case"input":tt(g),Je(g,T,!0);break;case"textarea":tt(g),He(g);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(g.onclick=hl)}g=b,s.updateQueue=g,g!==null&&(s.flags|=4)}else{O=b.nodeType===9?b:b.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=qe(d)),t==="http://www.w3.org/1999/xhtml"?d==="script"?(t=O.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof g.is=="string"?t=O.createElement(d,{is:g.is}):(t=O.createElement(d),d==="select"&&(O=t,g.multiple?O.multiple=!0:g.size&&(O.size=g.size))):t=O.createElementNS(t,d),t[fi]=s,t[aa]=g,C0(t,s,!1,!1),s.stateNode=t;e:{switch(O=Dt(d,g),d){case"dialog":Jt("cancel",t),Jt("close",t),b=g;break;case"iframe":case"object":case"embed":Jt("load",t),b=g;break;case"video":case"audio":for(b=0;b<ia.length;b++)Jt(ia[b],t);b=g;break;case"source":Jt("error",t),b=g;break;case"img":case"image":case"link":Jt("error",t),Jt("load",t),b=g;break;case"details":Jt("toggle",t),b=g;break;case"input":ht(t,g),b=Xe(t,g),Jt("invalid",t);break;case"option":b=g;break;case"select":t._wrapperState={wasMultiple:!!g.multiple},b=ce({},g,{value:void 0}),Jt("invalid",t);break;case"textarea":Ct(t,g),b=yn(t,g),Jt("invalid",t);break;default:b=g}dt(d,b),G=b;for(T in G)if(G.hasOwnProperty(T)){var $=G[T];T==="style"?xe(t,$):T==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,$!=null&&At(t,$)):T==="children"?typeof $=="string"?(d!=="textarea"||$!=="")&&Wt(t,$):typeof $=="number"&&Wt(t,""+$):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(p.hasOwnProperty(T)?$!=null&&T==="onScroll"&&Jt("scroll",t):$!=null&&V(t,T,$,O))}switch(d){case"input":tt(t),Je(t,g,!1);break;case"textarea":tt(t),He(t);break;case"option":g.value!=null&&t.setAttribute("value",""+Ae(g.value));break;case"select":t.multiple=!!g.multiple,T=g.value,T!=null?Pe(t,!!g.multiple,T,!1):g.defaultValue!=null&&Pe(t,!!g.multiple,g.defaultValue,!0);break;default:typeof b.onClick=="function"&&(t.onclick=hl)}switch(d){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return ar(s),null;case 6:if(t&&s.stateNode!=null)b0(t,s,t.memoizedProps,g);else{if(typeof g!="string"&&s.stateNode===null)throw Error(a(166));if(d=Vs(fa.current),Vs(hi.current),vl(s)){if(g=s.stateNode,d=s.memoizedProps,g[fi]=s,(T=g.nodeValue!==d)&&(t=kr,t!==null))switch(t.tag){case 3:fl(g.nodeValue,d,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fl(g.nodeValue,d,(t.mode&1)!==0)}T&&(s.flags|=4)}else g=(d.nodeType===9?d:d.ownerDocument).createTextNode(g),g[fi]=s,s.stateNode=g}return ar(s),null;case 13:if(en(ln),g=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(rn&&Pr!==null&&s.mode&1&&!(s.flags&128))Th(),yo(),s.flags|=98560,T=!1;else if(T=vl(s),g!==null&&g.dehydrated!==null){if(t===null){if(!T)throw Error(a(318));if(T=s.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(a(317));T[fi]=s}else yo(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;ar(s),T=!1}else ei!==null&&(Gu(ei),ei=null),T=!0;if(!T)return s.flags&65536?s:null}return s.flags&128?(s.lanes=d,s):(g=g!==null,g!==(t!==null&&t.memoizedState!==null)&&g&&(s.child.flags|=8192,s.mode&1&&(t===null||ln.current&1?On===0&&(On=3):$u())),s.updateQueue!==null&&(s.flags|=4),ar(s),null);case 4:return Eo(),Mu(t,s),t===null&&sa(s.stateNode.containerInfo),ar(s),null;case 10:return lu(s.type._context),ar(s),null;case 17:return vr(s.type)&&gl(),ar(s),null;case 19:if(en(ln),T=s.memoizedState,T===null)return ar(s),null;if(g=(s.flags&128)!==0,O=T.rendering,O===null)if(g)xa(T,!1);else{if(On!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(O=Tl(t),O!==null){for(s.flags|=128,xa(T,!1),g=O.updateQueue,g!==null&&(s.updateQueue=g,s.flags|=4),s.subtreeFlags=0,g=d,d=s.child;d!==null;)T=d,t=g,T.flags&=14680066,O=T.alternate,O===null?(T.childLanes=0,T.lanes=t,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=O.childLanes,T.lanes=O.lanes,T.child=O.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=O.memoizedProps,T.memoizedState=O.memoizedState,T.updateQueue=O.updateQueue,T.type=O.type,t=O.dependencies,T.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),d=d.sibling;return Qt(ln,ln.current&1|2),s.child}t=t.sibling}T.tail!==null&&Vt()>To&&(s.flags|=128,g=!0,xa(T,!1),s.lanes=4194304)}else{if(!g)if(t=Tl(O),t!==null){if(s.flags|=128,g=!0,d=t.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),xa(T,!0),T.tail===null&&T.tailMode==="hidden"&&!O.alternate&&!rn)return ar(s),null}else 2*Vt()-T.renderingStartTime>To&&d!==1073741824&&(s.flags|=128,g=!0,xa(T,!1),s.lanes=4194304);T.isBackwards?(O.sibling=s.child,s.child=O):(d=T.last,d!==null?d.sibling=O:s.child=O,T.last=O)}return T.tail!==null?(s=T.tail,T.rendering=s,T.tail=s.sibling,T.renderingStartTime=Vt(),s.sibling=null,d=ln.current,Qt(ln,g?d&1|2:d&1),s):(ar(s),null);case 22:case 23:return Yu(),g=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==g&&(s.flags|=8192),g&&s.mode&1?Or&1073741824&&(ar(s),s.subtreeFlags&6&&(s.flags|=8192)):ar(s),null;case 24:return null;case 25:return null}throw Error(a(156,s.tag))}function kx(t,s){switch(nu(s),s.tag){case 1:return vr(s.type)&&gl(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Eo(),en(wr),en(sr),gu(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return hu(s),null;case 13:if(en(ln),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(a(340));yo()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return en(ln),null;case 4:return Eo(),null;case 10:return lu(s.type._context),null;case 22:case 23:return Yu(),null;case 24:return null;default:return null}}var Dl=!1,lr=!1,Px=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function Ao(t,s){var d=t.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(g){gn(t,s,g)}else d.current=null}function Du(t,s,d){try{d()}catch(g){gn(t,s,g)}}var A0=!1;function Ox(t,s){if(Yc=ui,t=_t(),vt(t)){if("selectionStart"in t)var d={start:t.selectionStart,end:t.selectionEnd};else e:{d=(d=t.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var b=g.anchorOffset,T=g.focusNode;g=g.focusOffset;try{d.nodeType,T.nodeType}catch{d=null;break e}var O=0,G=-1,$=-1,he=0,_e=0,ke=t,Te=null;t:for(;;){for(var Ze;ke!==d||b!==0&&ke.nodeType!==3||(G=O+b),ke!==T||g!==0&&ke.nodeType!==3||($=O+g),ke.nodeType===3&&(O+=ke.nodeValue.length),(Ze=ke.firstChild)!==null;)Te=ke,ke=Ze;for(;;){if(ke===t)break t;if(Te===d&&++he===b&&(G=O),Te===T&&++_e===g&&($=O),(Ze=ke.nextSibling)!==null)break;ke=Te,Te=ke.parentNode}ke=Ze}d=G===-1||$===-1?null:{start:G,end:$}}else d=null}d=d||{start:0,end:0}}else d=null;for($c={focusedElem:t,selectionRange:d},ui=!1,Ke=s;Ke!==null;)if(s=Ke,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Ke=t;else for(;Ke!==null;){s=Ke;try{var Qe=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Qe!==null){var et=Qe.memoizedProps,En=Qe.memoizedState,oe=s.stateNode,J=oe.getSnapshotBeforeUpdate(s.elementType===s.type?et:ti(s.type,et),En);oe.__reactInternalSnapshotBeforeUpdate=J}break;case 3:var ae=s.stateNode.containerInfo;ae.nodeType===1?ae.textContent="":ae.nodeType===9&&ae.documentElement&&ae.removeChild(ae.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(je){gn(s,s.return,je)}if(t=s.sibling,t!==null){t.return=s.return,Ke=t;break}Ke=s.return}return Qe=A0,A0=!1,Qe}function ya(t,s,d){var g=s.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var b=g=g.next;do{if((b.tag&t)===t){var T=b.destroy;b.destroy=void 0,T!==void 0&&Du(s,d,T)}b=b.next}while(b!==g)}}function Ll(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var d=s=s.next;do{if((d.tag&t)===t){var g=d.create;d.destroy=g()}d=d.next}while(d!==s)}}function Lu(t){var s=t.ref;if(s!==null){var d=t.stateNode;switch(t.tag){case 5:t=d;break;default:t=d}typeof s=="function"?s(t):s.current=t}}function S0(t){var s=t.alternate;s!==null&&(t.alternate=null,S0(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[fi],delete s[aa],delete s[Qc],delete s[gx],delete s[mx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function T0(t){return t.tag===5||t.tag===3||t.tag===4}function I0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||T0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bu(t,s,d){var g=t.tag;if(g===5||g===6)t=t.stateNode,s?d.nodeType===8?d.parentNode.insertBefore(t,s):d.insertBefore(t,s):(d.nodeType===8?(s=d.parentNode,s.insertBefore(t,d)):(s=d,s.appendChild(t)),d=d._reactRootContainer,d!=null||s.onclick!==null||(s.onclick=hl));else if(g!==4&&(t=t.child,t!==null))for(Bu(t,s,d),t=t.sibling;t!==null;)Bu(t,s,d),t=t.sibling}function ju(t,s,d){var g=t.tag;if(g===5||g===6)t=t.stateNode,s?d.insertBefore(t,s):d.appendChild(t);else if(g!==4&&(t=t.child,t!==null))for(ju(t,s,d),t=t.sibling;t!==null;)ju(t,s,d),t=t.sibling}var Zn=null,ni=!1;function us(t,s,d){for(d=d.child;d!==null;)N0(t,s,d),d=d.sibling}function N0(t,s,d){if(St&&typeof St.onCommitFiberUnmount=="function")try{St.onCommitFiberUnmount(Rt,d)}catch{}switch(d.tag){case 5:lr||Ao(d,s);case 6:var g=Zn,b=ni;Zn=null,us(t,s,d),Zn=g,ni=b,Zn!==null&&(ni?(t=Zn,d=d.stateNode,t.nodeType===8?t.parentNode.removeChild(d):t.removeChild(d)):Zn.removeChild(d.stateNode));break;case 18:Zn!==null&&(ni?(t=Zn,d=d.stateNode,t.nodeType===8?qc(t.parentNode,d):t.nodeType===1&&qc(t,d),qr(t)):qc(Zn,d.stateNode));break;case 4:g=Zn,b=ni,Zn=d.stateNode.containerInfo,ni=!0,us(t,s,d),Zn=g,ni=b;break;case 0:case 11:case 14:case 15:if(!lr&&(g=d.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){b=g=g.next;do{var T=b,O=T.destroy;T=T.tag,O!==void 0&&(T&2||T&4)&&Du(d,s,O),b=b.next}while(b!==g)}us(t,s,d);break;case 1:if(!lr&&(Ao(d,s),g=d.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=d.memoizedProps,g.state=d.memoizedState,g.componentWillUnmount()}catch(G){gn(d,s,G)}us(t,s,d);break;case 21:us(t,s,d);break;case 22:d.mode&1?(lr=(g=lr)||d.memoizedState!==null,us(t,s,d),lr=g):us(t,s,d);break;default:us(t,s,d)}}function _0(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var d=t.stateNode;d===null&&(d=t.stateNode=new Px),s.forEach(function(g){var b=Ux.bind(null,t,g);d.has(g)||(d.add(g),g.then(b,b))})}}function ri(t,s){var d=s.deletions;if(d!==null)for(var g=0;g<d.length;g++){var b=d[g];try{var T=t,O=s,G=O;e:for(;G!==null;){switch(G.tag){case 5:Zn=G.stateNode,ni=!1;break e;case 3:Zn=G.stateNode.containerInfo,ni=!0;break e;case 4:Zn=G.stateNode.containerInfo,ni=!0;break e}G=G.return}if(Zn===null)throw Error(a(160));N0(T,O,b),Zn=null,ni=!1;var $=b.alternate;$!==null&&($.return=null),b.return=null}catch(he){gn(b,s,he)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)R0(s,t),s=s.sibling}function R0(t,s){var d=t.alternate,g=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ri(s,t),gi(t),g&4){try{ya(3,t,t.return),Ll(3,t)}catch(et){gn(t,t.return,et)}try{ya(5,t,t.return)}catch(et){gn(t,t.return,et)}}break;case 1:ri(s,t),gi(t),g&512&&d!==null&&Ao(d,d.return);break;case 5:if(ri(s,t),gi(t),g&512&&d!==null&&Ao(d,d.return),t.flags&32){var b=t.stateNode;try{Wt(b,"")}catch(et){gn(t,t.return,et)}}if(g&4&&(b=t.stateNode,b!=null)){var T=t.memoizedProps,O=d!==null?d.memoizedProps:T,G=t.type,$=t.updateQueue;if(t.updateQueue=null,$!==null)try{G==="input"&&T.type==="radio"&&T.name!=null&&Pt(b,T),Dt(G,O);var he=Dt(G,T);for(O=0;O<$.length;O+=2){var _e=$[O],ke=$[O+1];_e==="style"?xe(b,ke):_e==="dangerouslySetInnerHTML"?At(b,ke):_e==="children"?Wt(b,ke):V(b,_e,ke,he)}switch(G){case"input":xt(b,T);break;case"textarea":we(b,T);break;case"select":var Te=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!T.multiple;var Ze=T.value;Ze!=null?Pe(b,!!T.multiple,Ze,!1):Te!==!!T.multiple&&(T.defaultValue!=null?Pe(b,!!T.multiple,T.defaultValue,!0):Pe(b,!!T.multiple,T.multiple?[]:"",!1))}b[aa]=T}catch(et){gn(t,t.return,et)}}break;case 6:if(ri(s,t),gi(t),g&4){if(t.stateNode===null)throw Error(a(162));b=t.stateNode,T=t.memoizedProps;try{b.nodeValue=T}catch(et){gn(t,t.return,et)}}break;case 3:if(ri(s,t),gi(t),g&4&&d!==null&&d.memoizedState.isDehydrated)try{qr(s.containerInfo)}catch(et){gn(t,t.return,et)}break;case 4:ri(s,t),gi(t);break;case 13:ri(s,t),gi(t),b=t.child,b.flags&8192&&(T=b.memoizedState!==null,b.stateNode.isHidden=T,!T||b.alternate!==null&&b.alternate.memoizedState!==null||(zu=Vt())),g&4&&_0(t);break;case 22:if(_e=d!==null&&d.memoizedState!==null,t.mode&1?(lr=(he=lr)||_e,ri(s,t),lr=he):ri(s,t),gi(t),g&8192){if(he=t.memoizedState!==null,(t.stateNode.isHidden=he)&&!_e&&t.mode&1)for(Ke=t,_e=t.child;_e!==null;){for(ke=Ke=_e;Ke!==null;){switch(Te=Ke,Ze=Te.child,Te.tag){case 0:case 11:case 14:case 15:ya(4,Te,Te.return);break;case 1:Ao(Te,Te.return);var Qe=Te.stateNode;if(typeof Qe.componentWillUnmount=="function"){g=Te,d=Te.return;try{s=g,Qe.props=s.memoizedProps,Qe.state=s.memoizedState,Qe.componentWillUnmount()}catch(et){gn(g,d,et)}}break;case 5:Ao(Te,Te.return);break;case 22:if(Te.memoizedState!==null){O0(ke);continue}}Ze!==null?(Ze.return=Te,Ke=Ze):O0(ke)}_e=_e.sibling}e:for(_e=null,ke=t;;){if(ke.tag===5){if(_e===null){_e=ke;try{b=ke.stateNode,he?(T=b.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(G=ke.stateNode,$=ke.memoizedProps.style,O=$!=null&&$.hasOwnProperty("display")?$.display:null,G.style.display=Ue("display",O))}catch(et){gn(t,t.return,et)}}}else if(ke.tag===6){if(_e===null)try{ke.stateNode.nodeValue=he?"":ke.memoizedProps}catch(et){gn(t,t.return,et)}}else if((ke.tag!==22&&ke.tag!==23||ke.memoizedState===null||ke===t)&&ke.child!==null){ke.child.return=ke,ke=ke.child;continue}if(ke===t)break e;for(;ke.sibling===null;){if(ke.return===null||ke.return===t)break e;_e===ke&&(_e=null),ke=ke.return}_e===ke&&(_e=null),ke.sibling.return=ke.return,ke=ke.sibling}}break;case 19:ri(s,t),gi(t),g&4&&_0(t);break;case 21:break;default:ri(s,t),gi(t)}}function gi(t){var s=t.flags;if(s&2){try{e:{for(var d=t.return;d!==null;){if(T0(d)){var g=d;break e}d=d.return}throw Error(a(160))}switch(g.tag){case 5:var b=g.stateNode;g.flags&32&&(Wt(b,""),g.flags&=-33);var T=I0(t);ju(t,T,b);break;case 3:case 4:var O=g.stateNode.containerInfo,G=I0(t);Bu(t,G,O);break;default:throw Error(a(161))}}catch($){gn(t,t.return,$)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Mx(t,s,d){Ke=t,k0(t)}function k0(t,s,d){for(var g=(t.mode&1)!==0;Ke!==null;){var b=Ke,T=b.child;if(b.tag===22&&g){var O=b.memoizedState!==null||Dl;if(!O){var G=b.alternate,$=G!==null&&G.memoizedState!==null||lr;G=Dl;var he=lr;if(Dl=O,(lr=$)&&!he)for(Ke=b;Ke!==null;)O=Ke,$=O.child,O.tag===22&&O.memoizedState!==null?M0(b):$!==null?($.return=O,Ke=$):M0(b);for(;T!==null;)Ke=T,k0(T),T=T.sibling;Ke=b,Dl=G,lr=he}P0(t)}else b.subtreeFlags&8772&&T!==null?(T.return=b,Ke=T):P0(t)}}function P0(t){for(;Ke!==null;){var s=Ke;if(s.flags&8772){var d=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:lr||Ll(5,s);break;case 1:var g=s.stateNode;if(s.flags&4&&!lr)if(d===null)g.componentDidMount();else{var b=s.elementType===s.type?d.memoizedProps:ti(s.type,d.memoizedProps);g.componentDidUpdate(b,d.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var T=s.updateQueue;T!==null&&Oh(s,T,g);break;case 3:var O=s.updateQueue;if(O!==null){if(d=null,s.child!==null)switch(s.child.tag){case 5:d=s.child.stateNode;break;case 1:d=s.child.stateNode}Oh(s,O,d)}break;case 5:var G=s.stateNode;if(d===null&&s.flags&4){d=G;var $=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":$.autoFocus&&d.focus();break;case"img":$.src&&(d.src=$.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var he=s.alternate;if(he!==null){var _e=he.memoizedState;if(_e!==null){var ke=_e.dehydrated;ke!==null&&qr(ke)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}lr||s.flags&512&&Lu(s)}catch(Te){gn(s,s.return,Te)}}if(s===t){Ke=null;break}if(d=s.sibling,d!==null){d.return=s.return,Ke=d;break}Ke=s.return}}function O0(t){for(;Ke!==null;){var s=Ke;if(s===t){Ke=null;break}var d=s.sibling;if(d!==null){d.return=s.return,Ke=d;break}Ke=s.return}}function M0(t){for(;Ke!==null;){var s=Ke;try{switch(s.tag){case 0:case 11:case 15:var d=s.return;try{Ll(4,s)}catch($){gn(s,d,$)}break;case 1:var g=s.stateNode;if(typeof g.componentDidMount=="function"){var b=s.return;try{g.componentDidMount()}catch($){gn(s,b,$)}}var T=s.return;try{Lu(s)}catch($){gn(s,T,$)}break;case 5:var O=s.return;try{Lu(s)}catch($){gn(s,O,$)}}}catch($){gn(s,s.return,$)}if(s===t){Ke=null;break}var G=s.sibling;if(G!==null){G.return=s.return,Ke=G;break}Ke=s.return}}var Dx=Math.ceil,Bl=ee.ReactCurrentDispatcher,Fu=ee.ReactCurrentOwner,Hr=ee.ReactCurrentBatchConfig,Ft=0,Vn=null,Sn=null,Kn=0,Or=0,So=ss(0),On=0,wa=null,Us=0,jl=0,Vu=0,va=null,Er=null,zu=0,To=1/0,Li=null,Fl=!1,Uu=null,ds=null,Vl=!1,fs=null,zl=0,Ca=0,Wu=null,Ul=-1,Wl=0;function gr(){return Ft&6?Vt():Ul!==-1?Ul:Ul=Vt()}function hs(t){return t.mode&1?Ft&2&&Kn!==0?Kn&-Kn:yx.transition!==null?(Wl===0&&(Wl=Nn()),Wl):(t=Tt,t!==0||(t=window.event,t=t===void 0?16:$o(t.type)),t):1}function ii(t,s,d,g){if(50<Ca)throw Ca=0,Wu=null,Error(a(185));F(t,d,g),(!(Ft&2)||t!==Vn)&&(t===Vn&&(!(Ft&2)&&(jl|=d),On===4&&ps(t,Kn)),br(t,g),d===1&&Ft===0&&!(s.mode&1)&&(To=Vt()+500,xl&&as()))}function br(t,s){var d=t.callbackNode;$i(t,s);var g=Ir(t,t===Vn?Kn:0);if(g===0)d!==null&&It(d),t.callbackNode=null,t.callbackPriority=0;else if(s=g&-g,t.callbackPriority!==s){if(d!=null&&It(d),s===1)t.tag===0?xx(L0.bind(null,t)):Ch(L0.bind(null,t)),hx(function(){!(Ft&6)&&as()}),d=null;else{switch(Qa(g)){case 1:d=Ce;break;case 4:d=yr;break;case 16:d=Bt;break;case 536870912:d=Yi;break;default:d=Bt}d=H0(d,D0.bind(null,t))}t.callbackPriority=s,t.callbackNode=d}}function D0(t,s){if(Ul=-1,Wl=0,Ft&6)throw Error(a(327));var d=t.callbackNode;if(Io()&&t.callbackNode!==d)return null;var g=Ir(t,t===Vn?Kn:0);if(g===0)return null;if(g&30||g&t.expiredLanes||s)s=Hl(t,g);else{s=g;var b=Ft;Ft|=2;var T=j0();(Vn!==t||Kn!==s)&&(Li=null,To=Vt()+500,Hs(t,s));do try{jx();break}catch(G){B0(t,G)}while(!0);au(),Bl.current=T,Ft=b,Sn!==null?s=0:(Vn=null,Kn=0,s=On)}if(s!==0){if(s===2&&(b=Xt(t),b!==0&&(g=b,s=Hu(t,b))),s===1)throw d=wa,Hs(t,0),ps(t,g),br(t,Vt()),d;if(s===6)ps(t,g);else{if(b=t.current.alternate,!(g&30)&&!Lx(b)&&(s=Hl(t,g),s===2&&(T=Xt(t),T!==0&&(g=T,s=Hu(t,T))),s===1))throw d=wa,Hs(t,0),ps(t,g),br(t,Vt()),d;switch(t.finishedWork=b,t.finishedLanes=g,s){case 0:case 1:throw Error(a(345));case 2:Gs(t,Er,Li);break;case 3:if(ps(t,g),(g&130023424)===g&&(s=zu+500-Vt(),10<s)){if(Ir(t,0)!==0)break;if(b=t.suspendedLanes,(b&g)!==g){gr(),t.pingedLanes|=t.suspendedLanes&b;break}t.timeoutHandle=Kc(Gs.bind(null,t,Er,Li),s);break}Gs(t,Er,Li);break;case 4:if(ps(t,g),(g&4194240)===g)break;for(s=t.eventTimes,b=-1;0<g;){var O=31-hr(g);T=1<<O,O=s[O],O>b&&(b=O),g&=~T}if(g=b,g=Vt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*Dx(g/1960))-g,10<g){t.timeoutHandle=Kc(Gs.bind(null,t,Er,Li),g);break}Gs(t,Er,Li);break;case 5:Gs(t,Er,Li);break;default:throw Error(a(329))}}}return br(t,Vt()),t.callbackNode===d?D0.bind(null,t):null}function Hu(t,s){var d=va;return t.current.memoizedState.isDehydrated&&(Hs(t,s).flags|=256),t=Hl(t,s),t!==2&&(s=Er,Er=d,s!==null&&Gu(s)),t}function Gu(t){Er===null?Er=t:Er.push.apply(Er,t)}function Lx(t){for(var s=t;;){if(s.flags&16384){var d=s.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var g=0;g<d.length;g++){var b=d[g],T=b.getSnapshot;b=b.value;try{if(!te(T(),b))return!1}catch{return!1}}}if(d=s.child,s.subtreeFlags&16384&&d!==null)d.return=s,s=d;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ps(t,s){for(s&=~Vu,s&=~jl,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var d=31-hr(s),g=1<<d;t[d]=-1,s&=~g}}function L0(t){if(Ft&6)throw Error(a(327));Io();var s=Ir(t,0);if(!(s&1))return br(t,Vt()),null;var d=Hl(t,s);if(t.tag!==0&&d===2){var g=Xt(t);g!==0&&(s=g,d=Hu(t,g))}if(d===1)throw d=wa,Hs(t,0),ps(t,s),br(t,Vt()),d;if(d===6)throw Error(a(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,Gs(t,Er,Li),br(t,Vt()),null}function Xu(t,s){var d=Ft;Ft|=1;try{return t(s)}finally{Ft=d,Ft===0&&(To=Vt()+500,xl&&as())}}function Ws(t){fs!==null&&fs.tag===0&&!(Ft&6)&&Io();var s=Ft;Ft|=1;var d=Hr.transition,g=Tt;try{if(Hr.transition=null,Tt=1,t)return t()}finally{Tt=g,Hr.transition=d,Ft=s,!(Ft&6)&&as()}}function Yu(){Or=So.current,en(So)}function Hs(t,s){t.finishedWork=null,t.finishedLanes=0;var d=t.timeoutHandle;if(d!==-1&&(t.timeoutHandle=-1,fx(d)),Sn!==null)for(d=Sn.return;d!==null;){var g=d;switch(nu(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&gl();break;case 3:Eo(),en(wr),en(sr),gu();break;case 5:hu(g);break;case 4:Eo();break;case 13:en(ln);break;case 19:en(ln);break;case 10:lu(g.type._context);break;case 22:case 23:Yu()}d=d.return}if(Vn=t,Sn=t=gs(t.current,null),Kn=Or=s,On=0,wa=null,Vu=jl=Us=0,Er=va=null,Fs!==null){for(s=0;s<Fs.length;s++)if(d=Fs[s],g=d.interleaved,g!==null){d.interleaved=null;var b=g.next,T=d.pending;if(T!==null){var O=T.next;T.next=b,g.next=O}d.pending=g}Fs=null}return t}function B0(t,s){do{var d=Sn;try{if(au(),Il.current=kl,Nl){for(var g=cn.memoizedState;g!==null;){var b=g.queue;b!==null&&(b.pending=null),g=g.next}Nl=!1}if(zs=0,Fn=Pn=cn=null,ha=!1,pa=0,Fu.current=null,d===null||d.return===null){On=1,wa=s,Sn=null;break}e:{var T=t,O=d.return,G=d,$=s;if(s=Kn,G.flags|=32768,$!==null&&typeof $=="object"&&typeof $.then=="function"){var he=$,_e=G,ke=_e.tag;if(!(_e.mode&1)&&(ke===0||ke===11||ke===15)){var Te=_e.alternate;Te?(_e.updateQueue=Te.updateQueue,_e.memoizedState=Te.memoizedState,_e.lanes=Te.lanes):(_e.updateQueue=null,_e.memoizedState=null)}var Ze=l0(O);if(Ze!==null){Ze.flags&=-257,c0(Ze,O,G,T,s),Ze.mode&1&&a0(T,he,s),s=Ze,$=he;var Qe=s.updateQueue;if(Qe===null){var et=new Set;et.add($),s.updateQueue=et}else Qe.add($);break e}else{if(!(s&1)){a0(T,he,s),$u();break e}$=Error(a(426))}}else if(rn&&G.mode&1){var En=l0(O);if(En!==null){!(En.flags&65536)&&(En.flags|=256),c0(En,O,G,T,s),su(bo($,G));break e}}T=$=bo($,G),On!==4&&(On=2),va===null?va=[T]:va.push(T),T=O;do{switch(T.tag){case 3:T.flags|=65536,s&=-s,T.lanes|=s;var oe=s0(T,$,s);Ph(T,oe);break e;case 1:G=$;var J=T.type,ae=T.stateNode;if(!(T.flags&128)&&(typeof J.getDerivedStateFromError=="function"||ae!==null&&typeof ae.componentDidCatch=="function"&&(ds===null||!ds.has(ae)))){T.flags|=65536,s&=-s,T.lanes|=s;var je=o0(T,G,s);Ph(T,je);break e}}T=T.return}while(T!==null)}V0(d)}catch(rt){s=rt,Sn===d&&d!==null&&(Sn=d=d.return);continue}break}while(!0)}function j0(){var t=Bl.current;return Bl.current=kl,t===null?kl:t}function $u(){(On===0||On===3||On===2)&&(On=4),Vn===null||!(Us&268435455)&&!(jl&268435455)||ps(Vn,Kn)}function Hl(t,s){var d=Ft;Ft|=2;var g=j0();(Vn!==t||Kn!==s)&&(Li=null,Hs(t,s));do try{Bx();break}catch(b){B0(t,b)}while(!0);if(au(),Ft=d,Bl.current=g,Sn!==null)throw Error(a(261));return Vn=null,Kn=0,On}function Bx(){for(;Sn!==null;)F0(Sn)}function jx(){for(;Sn!==null&&!We();)F0(Sn)}function F0(t){var s=W0(t.alternate,t,Or);t.memoizedProps=t.pendingProps,s===null?V0(t):Sn=s,Fu.current=null}function V0(t){var s=t;do{var d=s.alternate;if(t=s.return,s.flags&32768){if(d=kx(d,s),d!==null){d.flags&=32767,Sn=d;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{On=6,Sn=null;return}}else if(d=Rx(d,s,Or),d!==null){Sn=d;return}if(s=s.sibling,s!==null){Sn=s;return}Sn=s=t}while(s!==null);On===0&&(On=5)}function Gs(t,s,d){var g=Tt,b=Hr.transition;try{Hr.transition=null,Tt=1,Fx(t,s,d,g)}finally{Hr.transition=b,Tt=g}return null}function Fx(t,s,d,g){do Io();while(fs!==null);if(Ft&6)throw Error(a(327));d=t.finishedWork;var b=t.finishedLanes;if(d===null)return null;if(t.finishedWork=null,t.finishedLanes=0,d===t.current)throw Error(a(177));t.callbackNode=null,t.callbackPriority=0;var T=d.lanes|d.childLanes;if(it(t,T),t===Vn&&(Sn=Vn=null,Kn=0),!(d.subtreeFlags&2064)&&!(d.flags&2064)||Vl||(Vl=!0,H0(Bt,function(){return Io(),null})),T=(d.flags&15990)!==0,d.subtreeFlags&15990||T){T=Hr.transition,Hr.transition=null;var O=Tt;Tt=1;var G=Ft;Ft|=4,Fu.current=null,Ox(t,d),R0(d,t),ir($c),ui=!!Yc,$c=Yc=null,t.current=d,Mx(d),Gn(),Ft=G,Tt=O,Hr.transition=T}else t.current=d;if(Vl&&(Vl=!1,fs=t,zl=b),T=t.pendingLanes,T===0&&(ds=null),Ot(d.stateNode),br(t,Vt()),s!==null)for(g=t.onRecoverableError,d=0;d<s.length;d++)b=s[d],g(b.value,{componentStack:b.stack,digest:b.digest});if(Fl)throw Fl=!1,t=Uu,Uu=null,t;return zl&1&&t.tag!==0&&Io(),T=t.pendingLanes,T&1?t===Wu?Ca++:(Ca=0,Wu=t):Ca=0,as(),null}function Io(){if(fs!==null){var t=Qa(zl),s=Hr.transition,d=Tt;try{if(Hr.transition=null,Tt=16>t?16:t,fs===null)var g=!1;else{if(t=fs,fs=null,zl=0,Ft&6)throw Error(a(331));var b=Ft;for(Ft|=4,Ke=t.current;Ke!==null;){var T=Ke,O=T.child;if(Ke.flags&16){var G=T.deletions;if(G!==null){for(var $=0;$<G.length;$++){var he=G[$];for(Ke=he;Ke!==null;){var _e=Ke;switch(_e.tag){case 0:case 11:case 15:ya(8,_e,T)}var ke=_e.child;if(ke!==null)ke.return=_e,Ke=ke;else for(;Ke!==null;){_e=Ke;var Te=_e.sibling,Ze=_e.return;if(S0(_e),_e===he){Ke=null;break}if(Te!==null){Te.return=Ze,Ke=Te;break}Ke=Ze}}}var Qe=T.alternate;if(Qe!==null){var et=Qe.child;if(et!==null){Qe.child=null;do{var En=et.sibling;et.sibling=null,et=En}while(et!==null)}}Ke=T}}if(T.subtreeFlags&2064&&O!==null)O.return=T,Ke=O;else e:for(;Ke!==null;){if(T=Ke,T.flags&2048)switch(T.tag){case 0:case 11:case 15:ya(9,T,T.return)}var oe=T.sibling;if(oe!==null){oe.return=T.return,Ke=oe;break e}Ke=T.return}}var J=t.current;for(Ke=J;Ke!==null;){O=Ke;var ae=O.child;if(O.subtreeFlags&2064&&ae!==null)ae.return=O,Ke=ae;else e:for(O=J;Ke!==null;){if(G=Ke,G.flags&2048)try{switch(G.tag){case 0:case 11:case 15:Ll(9,G)}}catch(rt){gn(G,G.return,rt)}if(G===O){Ke=null;break e}var je=G.sibling;if(je!==null){je.return=G.return,Ke=je;break e}Ke=G.return}}if(Ft=b,as(),St&&typeof St.onPostCommitFiberRoot=="function")try{St.onPostCommitFiberRoot(Rt,t)}catch{}g=!0}return g}finally{Tt=d,Hr.transition=s}}return!1}function z0(t,s,d){s=bo(d,s),s=s0(t,s,1),t=cs(t,s,1),s=gr(),t!==null&&(F(t,1,s),br(t,s))}function gn(t,s,d){if(t.tag===3)z0(t,t,d);else for(;s!==null;){if(s.tag===3){z0(s,t,d);break}else if(s.tag===1){var g=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(ds===null||!ds.has(g))){t=bo(d,t),t=o0(s,t,1),s=cs(s,t,1),t=gr(),s!==null&&(F(s,1,t),br(s,t));break}}s=s.return}}function Vx(t,s,d){var g=t.pingCache;g!==null&&g.delete(s),s=gr(),t.pingedLanes|=t.suspendedLanes&d,Vn===t&&(Kn&d)===d&&(On===4||On===3&&(Kn&130023424)===Kn&&500>Vt()-zu?Hs(t,0):Vu|=d),br(t,s)}function U0(t,s){s===0&&(t.mode&1?(s=no,no<<=1,!(no&130023424)&&(no=4194304)):s=1);var d=gr();t=Oi(t,s),t!==null&&(F(t,s,d),br(t,d))}function zx(t){var s=t.memoizedState,d=0;s!==null&&(d=s.retryLane),U0(t,d)}function Ux(t,s){var d=0;switch(t.tag){case 13:var g=t.stateNode,b=t.memoizedState;b!==null&&(d=b.retryLane);break;case 19:g=t.stateNode;break;default:throw Error(a(314))}g!==null&&g.delete(s),U0(t,d)}var W0;W0=function(t,s,d){if(t!==null)if(t.memoizedProps!==s.pendingProps||wr.current)Cr=!0;else{if(!(t.lanes&d)&&!(s.flags&128))return Cr=!1,_x(t,s,d);Cr=!!(t.flags&131072)}else Cr=!1,rn&&s.flags&1048576&&Eh(s,wl,s.index);switch(s.lanes=0,s.tag){case 2:var g=s.type;Ml(t,s),t=s.pendingProps;var b=go(s,sr.current);Co(s,d),b=yu(null,s,g,t,b,d);var T=wu();return s.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,vr(g)?(T=!0,ml(s)):T=!1,s.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,du(s),b.updater=Pl,s.stateNode=b,b._reactInternals=s,Su(s,g,t,d),s=_u(null,s,g,!0,T,d)):(s.tag=0,rn&&T&&tu(s),pr(null,s,b,d),s=s.child),s;case 16:g=s.elementType;e:{switch(Ml(t,s),t=s.pendingProps,b=g._init,g=b(g._payload),s.type=g,b=s.tag=Hx(g),t=ti(g,t),b){case 0:s=Nu(null,s,g,t,d);break e;case 1:s=g0(null,s,g,t,d);break e;case 11:s=u0(null,s,g,t,d);break e;case 14:s=d0(null,s,g,ti(g.type,t),d);break e}throw Error(a(306,g,""))}return s;case 0:return g=s.type,b=s.pendingProps,b=s.elementType===g?b:ti(g,b),Nu(t,s,g,b,d);case 1:return g=s.type,b=s.pendingProps,b=s.elementType===g?b:ti(g,b),g0(t,s,g,b,d);case 3:e:{if(m0(s),t===null)throw Error(a(387));g=s.pendingProps,T=s.memoizedState,b=T.element,kh(t,s),Sl(s,g,null,d);var O=s.memoizedState;if(g=O.element,T.isDehydrated)if(T={element:g,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},s.updateQueue.baseState=T,s.memoizedState=T,s.flags&256){b=bo(Error(a(423)),s),s=x0(t,s,g,d,b);break e}else if(g!==b){b=bo(Error(a(424)),s),s=x0(t,s,g,d,b);break e}else for(Pr=is(s.stateNode.containerInfo.firstChild),kr=s,rn=!0,ei=null,d=_h(s,null,g,d),s.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(yo(),g===b){s=Di(t,s,d);break e}pr(t,s,g,d)}s=s.child}return s;case 5:return Mh(s),t===null&&iu(s),g=s.type,b=s.pendingProps,T=t!==null?t.memoizedProps:null,O=b.children,Zc(g,b)?O=null:T!==null&&Zc(g,T)&&(s.flags|=32),p0(t,s),pr(t,s,O,d),s.child;case 6:return t===null&&iu(s),null;case 13:return y0(t,s,d);case 4:return fu(s,s.stateNode.containerInfo),g=s.pendingProps,t===null?s.child=wo(s,null,g,d):pr(t,s,g,d),s.child;case 11:return g=s.type,b=s.pendingProps,b=s.elementType===g?b:ti(g,b),u0(t,s,g,b,d);case 7:return pr(t,s,s.pendingProps,d),s.child;case 8:return pr(t,s,s.pendingProps.children,d),s.child;case 12:return pr(t,s,s.pendingProps.children,d),s.child;case 10:e:{if(g=s.type._context,b=s.pendingProps,T=s.memoizedProps,O=b.value,Qt(El,g._currentValue),g._currentValue=O,T!==null)if(te(T.value,O)){if(T.children===b.children&&!wr.current){s=Di(t,s,d);break e}}else for(T=s.child,T!==null&&(T.return=s);T!==null;){var G=T.dependencies;if(G!==null){O=T.child;for(var $=G.firstContext;$!==null;){if($.context===g){if(T.tag===1){$=Mi(-1,d&-d),$.tag=2;var he=T.updateQueue;if(he!==null){he=he.shared;var _e=he.pending;_e===null?$.next=$:($.next=_e.next,_e.next=$),he.pending=$}}T.lanes|=d,$=T.alternate,$!==null&&($.lanes|=d),cu(T.return,d,s),G.lanes|=d;break}$=$.next}}else if(T.tag===10)O=T.type===s.type?null:T.child;else if(T.tag===18){if(O=T.return,O===null)throw Error(a(341));O.lanes|=d,G=O.alternate,G!==null&&(G.lanes|=d),cu(O,d,s),O=T.sibling}else O=T.child;if(O!==null)O.return=T;else for(O=T;O!==null;){if(O===s){O=null;break}if(T=O.sibling,T!==null){T.return=O.return,O=T;break}O=O.return}T=O}pr(t,s,b.children,d),s=s.child}return s;case 9:return b=s.type,g=s.pendingProps.children,Co(s,d),b=Ur(b),g=g(b),s.flags|=1,pr(t,s,g,d),s.child;case 14:return g=s.type,b=ti(g,s.pendingProps),b=ti(g.type,b),d0(t,s,g,b,d);case 15:return f0(t,s,s.type,s.pendingProps,d);case 17:return g=s.type,b=s.pendingProps,b=s.elementType===g?b:ti(g,b),Ml(t,s),s.tag=1,vr(g)?(t=!0,ml(s)):t=!1,Co(s,d),r0(s,g,b),Su(s,g,b,d),_u(null,s,g,!0,t,d);case 19:return v0(t,s,d);case 22:return h0(t,s,d)}throw Error(a(156,s.tag))};function H0(t,s){return ot(t,s)}function Wx(t,s,d,g){this.tag=t,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gr(t,s,d,g){return new Wx(t,s,d,g)}function Zu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Hx(t){if(typeof t=="function")return Zu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ne)return 11;if(t===Q)return 14}return 2}function gs(t,s){var d=t.alternate;return d===null?(d=Gr(t.tag,s,t.key,t.mode),d.elementType=t.elementType,d.type=t.type,d.stateNode=t.stateNode,d.alternate=t,t.alternate=d):(d.pendingProps=s,d.type=t.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=t.flags&14680064,d.childLanes=t.childLanes,d.lanes=t.lanes,d.child=t.child,d.memoizedProps=t.memoizedProps,d.memoizedState=t.memoizedState,d.updateQueue=t.updateQueue,s=t.dependencies,d.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},d.sibling=t.sibling,d.index=t.index,d.ref=t.ref,d}function Gl(t,s,d,g,b,T){var O=2;if(g=t,typeof t=="function")Zu(t)&&(O=1);else if(typeof t=="string")O=5;else e:switch(t){case q:return Xs(d.children,b,T,s);case le:O=8,b|=8;break;case K:return t=Gr(12,d,s,b|2),t.elementType=K,t.lanes=T,t;case Le:return t=Gr(13,d,s,b),t.elementType=Le,t.lanes=T,t;case Se:return t=Gr(19,d,s,b),t.elementType=Se,t.lanes=T,t;case ge:return Xl(d,b,T,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Re:O=10;break e;case Be:O=9;break e;case Ne:O=11;break e;case Q:O=14;break e;case Fe:O=16,g=null;break e}throw Error(a(130,t==null?t:typeof t,""))}return s=Gr(O,d,s,b),s.elementType=t,s.type=g,s.lanes=T,s}function Xs(t,s,d,g){return t=Gr(7,t,g,s),t.lanes=d,t}function Xl(t,s,d,g){return t=Gr(22,t,g,s),t.elementType=ge,t.lanes=d,t.stateNode={isHidden:!1},t}function Ku(t,s,d){return t=Gr(6,t,null,s),t.lanes=d,t}function qu(t,s,d){return s=Gr(4,t.children!==null?t.children:[],t.key,s),s.lanes=d,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function Gx(t,s,d,g,b){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=se(0),this.expirationTimes=se(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=se(0),this.identifierPrefix=g,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function Qu(t,s,d,g,b,T,O,G,$){return t=new Gx(t,s,d,G,$),s===1?(s=1,T===!0&&(s|=8)):s=0,T=Gr(3,null,null,s),t.current=T,T.stateNode=t,T.memoizedState={element:g,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},du(T),t}function Xx(t,s,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ne,key:g==null?null:""+g,children:t,containerInfo:s,implementation:d}}function G0(t){if(!t)return os;t=t._reactInternals;e:{if(tr(t)!==t||t.tag!==1)throw Error(a(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(vr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(a(171))}if(t.tag===1){var d=t.type;if(vr(d))return wh(t,d,s)}return s}function X0(t,s,d,g,b,T,O,G,$){return t=Qu(d,g,!0,t,b,T,O,G,$),t.context=G0(null),d=t.current,g=gr(),b=hs(d),T=Mi(g,b),T.callback=s??null,cs(d,T,b),t.current.lanes=b,F(t,b,g),br(t,g),t}function Yl(t,s,d,g){var b=s.current,T=gr(),O=hs(b);return d=G0(d),s.context===null?s.context=d:s.pendingContext=d,s=Mi(T,O),s.payload={element:t},g=g===void 0?null:g,g!==null&&(s.callback=g),t=cs(b,s,O),t!==null&&(ii(t,b,O,T),Al(t,b,O)),O}function $l(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Y0(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var d=t.retryLane;t.retryLane=d!==0&&d<s?d:s}}function Ju(t,s){Y0(t,s),(t=t.alternate)&&Y0(t,s)}function Yx(){return null}var $0=typeof reportError=="function"?reportError:function(t){console.error(t)};function ed(t){this._internalRoot=t}Zl.prototype.render=ed.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(a(409));Yl(t,s,null,null)},Zl.prototype.unmount=ed.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Ws(function(){Yl(null,t,null,null)}),s[_i]=null}};function Zl(t){this._internalRoot=t}Zl.prototype.unstable_scheduleHydration=function(t){if(t){var s=Kt();t={blockedOn:null,target:t,priority:s};for(var d=0;d<Xn.length&&s!==0&&s<Xn[d].priority;d++);Xn.splice(d,0,t),d===0&&el(t)}};function td(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Kl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Z0(){}function $x(t,s,d,g,b){if(b){if(typeof g=="function"){var T=g;g=function(){var he=$l(O);T.call(he)}}var O=X0(s,g,t,0,null,!1,!1,"",Z0);return t._reactRootContainer=O,t[_i]=O.current,sa(t.nodeType===8?t.parentNode:t),Ws(),O}for(;b=t.lastChild;)t.removeChild(b);if(typeof g=="function"){var G=g;g=function(){var he=$l($);G.call(he)}}var $=Qu(t,0,!1,null,null,!1,!1,"",Z0);return t._reactRootContainer=$,t[_i]=$.current,sa(t.nodeType===8?t.parentNode:t),Ws(function(){Yl(s,$,d,g)}),$}function ql(t,s,d,g,b){var T=d._reactRootContainer;if(T){var O=T;if(typeof b=="function"){var G=b;b=function(){var $=$l(O);G.call($)}}Yl(s,O,t,b)}else O=$x(d,s,t,b,g);return $l(O)}ro=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var d=Zt(s.pendingLanes);d!==0&&(hn(s,d|1),br(s,Vt()),!(Ft&6)&&(To=Vt()+500,as()))}break;case 13:Ws(function(){var g=Oi(t,1);if(g!==null){var b=gr();ii(g,t,1,b)}}),Ju(t,1)}},rr=function(t){if(t.tag===13){var s=Oi(t,134217728);if(s!==null){var d=gr();ii(s,t,134217728,d)}Ju(t,134217728)}},st=function(t){if(t.tag===13){var s=hs(t),d=Oi(t,s);if(d!==null){var g=gr();ii(d,t,s,g)}Ju(t,s)}},Kt=function(){return Tt},Go=function(t,s){var d=Tt;try{return Tt=t,s()}finally{Tt=d}},Hn=function(t,s,d){switch(s){case"input":if(xt(t,d),s=d.name,d.type==="radio"&&s!=null){for(d=t;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<d.length;s++){var g=d[s];if(g!==t&&g.form===t.form){var b=pl(g);if(!b)throw Error(a(90));ue(g),xt(g,b)}}}break;case"textarea":we(t,d);break;case"select":s=d.value,s!=null&&Pe(t,!!d.multiple,s,!1)}},Hi=Xu,on=Ws;var Zx={usingClientEntryPoint:!1,Events:[la,ho,pl,Wi,er,Xu]},Ea={findFiberByHostInstance:Ds,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Kx={bundleType:Ea.bundleType,version:Ea.version,rendererPackageName:Ea.rendererPackageName,rendererConfig:Ea.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ee.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$e(t),t===null?null:t.stateNode},findFiberByHostInstance:Ea.findFiberByHostInstance||Yx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ql.isDisabled&&Ql.supportsFiber)try{Rt=Ql.inject(Kx),St=Ql}catch{}}return Ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zx,Ar.createPortal=function(t,s){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!td(s))throw Error(a(200));return Xx(t,s,null,d)},Ar.createRoot=function(t,s){if(!td(t))throw Error(a(299));var d=!1,g="",b=$0;return s!=null&&(s.unstable_strictMode===!0&&(d=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onRecoverableError!==void 0&&(b=s.onRecoverableError)),s=Qu(t,1,!1,null,null,d,!1,g,b),t[_i]=s.current,sa(t.nodeType===8?t.parentNode:t),new ed(s)},Ar.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=$e(s),t=t===null?null:t.stateNode,t},Ar.flushSync=function(t){return Ws(t)},Ar.hydrate=function(t,s,d){if(!Kl(s))throw Error(a(200));return ql(null,t,s,!0,d)},Ar.hydrateRoot=function(t,s,d){if(!td(t))throw Error(a(405));var g=d!=null&&d.hydratedSources||null,b=!1,T="",O=$0;if(d!=null&&(d.unstable_strictMode===!0&&(b=!0),d.identifierPrefix!==void 0&&(T=d.identifierPrefix),d.onRecoverableError!==void 0&&(O=d.onRecoverableError)),s=X0(s,null,t,1,d??null,b,!1,T,O),t[_i]=s.current,sa(t),g)for(t=0;t<g.length;t++)d=g[t],b=d._getVersion,b=b(d._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[d,b]:s.mutableSourceEagerHydrationData.push(d,b);return new Zl(s)},Ar.render=function(t,s,d){if(!Kl(s))throw Error(a(200));return ql(null,t,s,!1,d)},Ar.unmountComponentAtNode=function(t){if(!Kl(t))throw Error(a(40));return t._reactRootContainer?(Ws(function(){ql(null,null,t,!1,function(){t._reactRootContainer=null,t[_i]=null})}),!0):!1},Ar.unstable_batchedUpdates=Xu,Ar.unstable_renderSubtreeIntoContainer=function(t,s,d,g){if(!Kl(d))throw Error(a(200));if(t==null||t._reactInternals===void 0)throw Error(a(38));return ql(t,s,d,!1,g)},Ar.version="18.3.1-next-f1338f8080-20240426",Ar}var r1;function i2(){if(r1)return id.exports;r1=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(o){console.error(o)}}return r(),id.exports=r2(),id.exports}var i1;function s2(){if(i1)return ec;i1=1;var r=i2();return ec.createRoot=r.createRoot,ec.hydrateRoot=r.hydrateRoot,ec}var o2=s2();const Jn=N.createContext(null),a2=({children:r})=>{const[o,a]=N.useState(null),[f,p]=N.useState(null),[x,y]=N.useState(null),[A,v]=N.useState(null),[E,S]=N.useState(!1),[I,R]=N.useState(null),M=async()=>{const z=localStorage.getItem("access_token");if(z)try{const U=await fetch(window.server_url+"/load_user",{headers:{Authorization:`Bearer ${z}`}});if(U.ok){S(!0);const V=await U.json();console.log("USER DATA:",V),a(V.username),p(V.profile),R(V.permissions),console.log("PERMISSIONS:",V.permissions)}else console.log("TOKEN INVALID"),localStorage.removeItem("access_token"),a(null),p(null),y(null),v(null),S(!1)}catch(U){console.log("ERROR:",U)}};N.useEffect(()=>{M()},[]);const L=z=>{a(z.username),y(z.access_token),v(z.refresh_token),R(z.permissions),console.log("PRE SAVE USERNAME:",z.username),localStorage.setItem("user",z.username),localStorage.setItem("access_token",z.access_token),localStorage.setItem("refresh_token",z.refresh_token)},B=async(z,U)=>{const V=await fetch(window.server_url+"/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:z,password:U})});if(V.ok){const ee=await V.json();console.log("SIGNED UP, userData:",ee)}},j=()=>{a(null),p(null),y(null),v(null),S(!1)};return w.jsx(Jn.Provider,{value:{user:o,login:L,signup:B,logout:j,userProfile:f,checkAuth:M,permissions:I},children:r})};var kd=function(r,o){return kd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,f){a.__proto__=f}||function(a,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(a[p]=f[p])},kd(r,o)};function l2(r,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");kd(r,o);function a(){this.constructor=r}r.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}var qn=function(){return qn=Object.assign||function(o){for(var a,f=1,p=arguments.length;f<p;f++){a=arguments[f];for(var x in a)Object.prototype.hasOwnProperty.call(a,x)&&(o[x]=a[x])}return o},qn.apply(this,arguments)};var ad,s1;function c2(){if(s1)return ad;s1=1;var r=!1,o,a,f,p,x,y,A,v,E,S,I,R,M,L,B;function j(){if(!r){r=!0;var U=navigator.userAgent,V=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(U),ee=/(Mac OS X)|(Windows)|(Linux)/.exec(U);if(R=/\b(iPhone|iP[ao]d)/.exec(U),M=/\b(iP[ao]d)/.exec(U),S=/Android/i.exec(U),L=/FBAN\/\w+;/i.exec(U),B=/Mobile/i.exec(U),I=!!/Win64/.exec(U),V){o=V[1]?parseFloat(V[1]):V[5]?parseFloat(V[5]):NaN,o&&document&&document.documentMode&&(o=document.documentMode);var re=/(?:Trident\/(\d+.\d+))/.exec(U);y=re?parseFloat(re[1])+4:o,a=V[2]?parseFloat(V[2]):NaN,f=V[3]?parseFloat(V[3]):NaN,p=V[4]?parseFloat(V[4]):NaN,p?(V=/(?:Chrome\/(\d+\.\d+))/.exec(U),x=V&&V[1]?parseFloat(V[1]):NaN):x=NaN}else o=a=f=x=p=NaN;if(ee){if(ee[1]){var ne=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(U);A=ne?parseFloat(ne[1].replace("_",".")):!0}else A=!1;v=!!ee[2],E=!!ee[3]}else A=v=E=!1}}var z={ie:function(){return j()||o},ieCompatibilityMode:function(){return j()||y>o},ie64:function(){return z.ie()&&I},firefox:function(){return j()||a},opera:function(){return j()||f},webkit:function(){return j()||p},safari:function(){return z.webkit()},chrome:function(){return j()||x},windows:function(){return j()||v},osx:function(){return j()||A},linux:function(){return j()||E},iphone:function(){return j()||R},mobile:function(){return j()||R||M||S||B},nativeApp:function(){return j()||L},android:function(){return j()||S},ipad:function(){return j()||M}};return ad=z,ad}var ld,o1;function u2(){if(o1)return ld;o1=1;var r=!!(typeof window<"u"&&window.document&&window.document.createElement),o={canUseDOM:r,canUseWorkers:typeof Worker<"u",canUseEventListeners:r&&!!(window.addEventListener||window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};return ld=o,ld}var cd,a1;function d2(){if(a1)return cd;a1=1;var r=u2(),o;r.canUseDOM&&(o=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function a(f,p){if(!r.canUseDOM||p&&!("addEventListener"in document))return!1;var x="on"+f,y=x in document;if(!y){var A=document.createElement("div");A.setAttribute(x,"return;"),y=typeof A[x]=="function"}return!y&&o&&f==="wheel"&&(y=document.implementation.hasFeature("Events.wheel","3.0")),y}return cd=a,cd}var ud,l1;function f2(){if(l1)return ud;l1=1;var r=c2(),o=d2(),a=10,f=40,p=800;function x(y){var A=0,v=0,E=0,S=0;return"detail"in y&&(v=y.detail),"wheelDelta"in y&&(v=-y.wheelDelta/120),"wheelDeltaY"in y&&(v=-y.wheelDeltaY/120),"wheelDeltaX"in y&&(A=-y.wheelDeltaX/120),"axis"in y&&y.axis===y.HORIZONTAL_AXIS&&(A=v,v=0),E=A*a,S=v*a,"deltaY"in y&&(S=y.deltaY),"deltaX"in y&&(E=y.deltaX),(E||S)&&y.deltaMode&&(y.deltaMode==1?(E*=f,S*=f):(E*=p,S*=p)),E&&!A&&(A=E<1?-1:1),S&&!v&&(v=S<1?-1:1),{spinX:A,spinY:v,pixelX:E,pixelY:S}}return x.getEventType=function(){return r.firefox()?"DOMMouseScroll":o("wheel")?"wheel":"mousewheel"},ud=x,ud}var dd,c1;function h2(){return c1||(c1=1,dd=f2()),dd}var p2=h2();const g2=Yp(p2);function m2(r,o,a,f,p,x){x===void 0&&(x=0);var y=Do(r,o,x),A=y.width,v=y.height,E=Math.min(A,a),S=Math.min(v,f);return E>S*p?{width:S*p,height:S}:{width:E,height:E/p}}function x2(r){return r.width>r.height?r.width/r.naturalWidth:r.height/r.naturalHeight}function Aa(r,o,a,f,p){p===void 0&&(p=0);var x=Do(o.width,o.height,p),y=x.width,A=x.height;return{x:u1(r.x,y,a.width,f),y:u1(r.y,A,a.height,f)}}function u1(r,o,a,f){var p=o*f/2-a/2;return Nc(r,-p,p)}function d1(r,o){return Math.sqrt(Math.pow(r.y-o.y,2)+Math.pow(r.x-o.x,2))}function f1(r,o){return Math.atan2(o.y-r.y,o.x-r.x)*180/Math.PI}function y2(r,o,a,f,p,x,y){x===void 0&&(x=0),y===void 0&&(y=!0);var A=y?w2:v2,v=Do(o.width,o.height,x),E=Do(o.naturalWidth,o.naturalHeight,x),S={x:A(100,((v.width-a.width/p)/2-r.x/p)/v.width*100),y:A(100,((v.height-a.height/p)/2-r.y/p)/v.height*100),width:A(100,a.width/v.width*100/p),height:A(100,a.height/v.height*100/p)},I=Math.round(A(E.width,S.width*E.width/100)),R=Math.round(A(E.height,S.height*E.height/100)),M=E.width>=E.height*f,L=M?{width:Math.round(R*f),height:R}:{width:I,height:Math.round(I/f)},B=qn(qn({},L),{x:Math.round(A(E.width-L.width,S.x*E.width/100)),y:Math.round(A(E.height-L.height,S.y*E.height/100))});return{croppedAreaPercentages:S,croppedAreaPixels:B}}function w2(r,o){return Math.min(r,Math.max(0,o))}function v2(r,o){return o}function C2(r,o,a,f,p,x){var y=Do(o.width,o.height,a),A=Nc(f.width/y.width*(100/r.width),p,x),v={x:A*y.width/2-f.width/2-y.width*A*(r.x/100),y:A*y.height/2-f.height/2-y.height*A*(r.y/100)};return{crop:v,zoom:A}}function E2(r,o,a){var f=x2(o);return a.height>a.width?a.height/(r.height*f):a.width/(r.width*f)}function b2(r,o,a,f,p,x){a===void 0&&(a=0);var y=Do(o.naturalWidth,o.naturalHeight,a),A=Nc(E2(r,o,f),p,x),v=f.height>f.width?f.height/r.height:f.width/r.width,E={x:((y.width-r.width)/2-r.x)*v,y:((y.height-r.height)/2-r.y)*v};return{crop:E,zoom:A}}function h1(r,o){return{x:(o.x+r.x)/2,y:(o.y+r.y)/2}}function A2(r){return r*Math.PI/180}function Do(r,o,a){var f=A2(a);return{width:Math.abs(Math.cos(f)*r)+Math.abs(Math.sin(f)*o),height:Math.abs(Math.sin(f)*r)+Math.abs(Math.cos(f)*o)}}function Nc(r,o,a){return Math.min(Math.max(r,o),a)}function tc(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return r.filter(function(a){return typeof a=="string"&&a.length>0}).join(" ").trim()}var S2=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,T2=1,I2=3,N2=1,cf=function(r){l2(o,r);function o(){var a=r!==null&&r.apply(this,arguments)||this;return a.imageRef=N.createRef(),a.videoRef=N.createRef(),a.containerPosition={x:0,y:0},a.containerRef=null,a.styleRef=null,a.containerRect=null,a.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},a.dragStartPosition={x:0,y:0},a.dragStartCrop={x:0,y:0},a.gestureZoomStart=0,a.gestureRotationStart=0,a.isTouching=!1,a.lastPinchDistance=0,a.lastPinchRotation=0,a.rafDragTimeout=null,a.rafPinchTimeout=null,a.wheelTimer=null,a.currentDoc=typeof document<"u"?document:null,a.currentWindow=typeof window<"u"?window:null,a.resizeObserver=null,a.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},a.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!a.containerRef)){var f=!0;a.resizeObserver=new window.ResizeObserver(function(p){if(f){f=!1;return}a.computeSizes()}),a.resizeObserver.observe(a.containerRef)}},a.preventZoomSafari=function(f){return f.preventDefault()},a.cleanEvents=function(){a.currentDoc&&(a.currentDoc.removeEventListener("mousemove",a.onMouseMove),a.currentDoc.removeEventListener("mouseup",a.onDragStopped),a.currentDoc.removeEventListener("touchmove",a.onTouchMove),a.currentDoc.removeEventListener("touchend",a.onDragStopped),a.currentDoc.removeEventListener("gesturemove",a.onGestureMove),a.currentDoc.removeEventListener("gestureend",a.onGestureEnd),a.currentDoc.removeEventListener("scroll",a.onScroll))},a.clearScrollEvent=function(){a.containerRef&&a.containerRef.removeEventListener("wheel",a.onWheel),a.wheelTimer&&clearTimeout(a.wheelTimer)},a.onMediaLoad=function(){var f=a.computeSizes();f&&(a.emitCropData(),a.setInitialCrop(f)),a.props.onMediaLoaded&&a.props.onMediaLoaded(a.mediaSize)},a.setInitialCrop=function(f){if(a.props.initialCroppedAreaPercentages){var p=C2(a.props.initialCroppedAreaPercentages,a.mediaSize,a.props.rotation,f,a.props.minZoom,a.props.maxZoom),x=p.crop,y=p.zoom;a.props.onCropChange(x),a.props.onZoomChange&&a.props.onZoomChange(y)}else if(a.props.initialCroppedAreaPixels){var A=b2(a.props.initialCroppedAreaPixels,a.mediaSize,a.props.rotation,f,a.props.minZoom,a.props.maxZoom),x=A.crop,y=A.zoom;a.props.onCropChange(x),a.props.onZoomChange&&a.props.onZoomChange(y)}},a.computeSizes=function(){var f,p,x,y,A,v,E=a.imageRef.current||a.videoRef.current;if(E&&a.containerRef){a.containerRect=a.containerRef.getBoundingClientRect(),a.saveContainerPosition();var S=a.containerRect.width/a.containerRect.height,I=((f=a.imageRef.current)===null||f===void 0?void 0:f.naturalWidth)||((p=a.videoRef.current)===null||p===void 0?void 0:p.videoWidth)||0,R=((x=a.imageRef.current)===null||x===void 0?void 0:x.naturalHeight)||((y=a.videoRef.current)===null||y===void 0?void 0:y.videoHeight)||0,M=E.offsetWidth<I||E.offsetHeight<R,L=I/R,B=void 0;if(M)switch(a.state.mediaObjectFit){default:case"contain":B=S>L?{width:a.containerRect.height*L,height:a.containerRect.height}:{width:a.containerRect.width,height:a.containerRect.width/L};break;case"horizontal-cover":B={width:a.containerRect.width,height:a.containerRect.width/L};break;case"vertical-cover":B={width:a.containerRect.height*L,height:a.containerRect.height};break}else B={width:E.offsetWidth,height:E.offsetHeight};a.mediaSize=qn(qn({},B),{naturalWidth:I,naturalHeight:R}),a.props.setMediaSize&&a.props.setMediaSize(a.mediaSize);var j=a.props.cropSize?a.props.cropSize:m2(a.mediaSize.width,a.mediaSize.height,a.containerRect.width,a.containerRect.height,a.props.aspect,a.props.rotation);return(((A=a.state.cropSize)===null||A===void 0?void 0:A.height)!==j.height||((v=a.state.cropSize)===null||v===void 0?void 0:v.width)!==j.width)&&a.props.onCropSizeChange&&a.props.onCropSizeChange(j),a.setState({cropSize:j},a.recomputeCropPosition),a.props.setCropSize&&a.props.setCropSize(j),j}},a.saveContainerPosition=function(){if(a.containerRef){var f=a.containerRef.getBoundingClientRect();a.containerPosition={x:f.left,y:f.top}}},a.onMouseDown=function(f){a.currentDoc&&(f.preventDefault(),a.currentDoc.addEventListener("mousemove",a.onMouseMove),a.currentDoc.addEventListener("mouseup",a.onDragStopped),a.saveContainerPosition(),a.onDragStart(o.getMousePoint(f)))},a.onMouseMove=function(f){return a.onDrag(o.getMousePoint(f))},a.onScroll=function(f){a.currentDoc&&(f.preventDefault(),a.saveContainerPosition())},a.onTouchStart=function(f){a.currentDoc&&(a.isTouching=!0,!(a.props.onTouchRequest&&!a.props.onTouchRequest(f))&&(a.currentDoc.addEventListener("touchmove",a.onTouchMove,{passive:!1}),a.currentDoc.addEventListener("touchend",a.onDragStopped),a.saveContainerPosition(),f.touches.length===2?a.onPinchStart(f):f.touches.length===1&&a.onDragStart(o.getTouchPoint(f.touches[0]))))},a.onTouchMove=function(f){f.preventDefault(),f.touches.length===2?a.onPinchMove(f):f.touches.length===1&&a.onDrag(o.getTouchPoint(f.touches[0]))},a.onGestureStart=function(f){a.currentDoc&&(f.preventDefault(),a.currentDoc.addEventListener("gesturechange",a.onGestureMove),a.currentDoc.addEventListener("gestureend",a.onGestureEnd),a.gestureZoomStart=a.props.zoom,a.gestureRotationStart=a.props.rotation)},a.onGestureMove=function(f){if(f.preventDefault(),!a.isTouching){var p=o.getMousePoint(f),x=a.gestureZoomStart-1+f.scale;if(a.setNewZoom(x,p,{shouldUpdatePosition:!0}),a.props.onRotationChange){var y=a.gestureRotationStart+f.rotation;a.props.onRotationChange(y)}}},a.onGestureEnd=function(f){a.cleanEvents()},a.onDragStart=function(f){var p,x,y=f.x,A=f.y;a.dragStartPosition={x:y,y:A},a.dragStartCrop=qn({},a.props.crop),(x=(p=a.props).onInteractionStart)===null||x===void 0||x.call(p)},a.onDrag=function(f){var p=f.x,x=f.y;a.currentWindow&&(a.rafDragTimeout&&a.currentWindow.cancelAnimationFrame(a.rafDragTimeout),a.rafDragTimeout=a.currentWindow.requestAnimationFrame(function(){if(a.state.cropSize&&!(p===void 0||x===void 0)){var y=p-a.dragStartPosition.x,A=x-a.dragStartPosition.y,v={x:a.dragStartCrop.x+y,y:a.dragStartCrop.y+A},E=a.props.restrictPosition?Aa(v,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):v;a.props.onCropChange(E)}}))},a.onDragStopped=function(){var f,p;a.isTouching=!1,a.cleanEvents(),a.emitCropData(),(p=(f=a.props).onInteractionEnd)===null||p===void 0||p.call(f)},a.onWheel=function(f){if(a.currentWindow&&!(a.props.onWheelRequest&&!a.props.onWheelRequest(f))){f.preventDefault();var p=o.getMousePoint(f),x=g2(f).pixelY,y=a.props.zoom-x*a.props.zoomSpeed/200;a.setNewZoom(y,p,{shouldUpdatePosition:!0}),a.state.hasWheelJustStarted||a.setState({hasWheelJustStarted:!0},function(){var A,v;return(v=(A=a.props).onInteractionStart)===null||v===void 0?void 0:v.call(A)}),a.wheelTimer&&clearTimeout(a.wheelTimer),a.wheelTimer=a.currentWindow.setTimeout(function(){return a.setState({hasWheelJustStarted:!1},function(){var A,v;return(v=(A=a.props).onInteractionEnd)===null||v===void 0?void 0:v.call(A)})},250)}},a.getPointOnContainer=function(f,p){var x=f.x,y=f.y;if(!a.containerRect)throw new Error("The Cropper is not mounted");return{x:a.containerRect.width/2-(x-p.x),y:a.containerRect.height/2-(y-p.y)}},a.getPointOnMedia=function(f){var p=f.x,x=f.y,y=a.props,A=y.crop,v=y.zoom;return{x:(p+A.x)/v,y:(x+A.y)/v}},a.setNewZoom=function(f,p,x){var y=x===void 0?{}:x,A=y.shouldUpdatePosition,v=A===void 0?!0:A;if(!(!a.state.cropSize||!a.props.onZoomChange)){var E=Nc(f,a.props.minZoom,a.props.maxZoom);if(v){var S=a.getPointOnContainer(p,a.containerPosition),I=a.getPointOnMedia(S),R={x:I.x*E-S.x,y:I.y*E-S.y},M=a.props.restrictPosition?Aa(R,a.mediaSize,a.state.cropSize,E,a.props.rotation):R;a.props.onCropChange(M)}a.props.onZoomChange(E)}},a.getCropData=function(){if(!a.state.cropSize)return null;var f=a.props.restrictPosition?Aa(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;return y2(f,a.mediaSize,a.state.cropSize,a.getAspect(),a.props.zoom,a.props.rotation,a.props.restrictPosition)},a.emitCropData=function(){var f=a.getCropData();if(f){var p=f.croppedAreaPercentages,x=f.croppedAreaPixels;a.props.onCropComplete&&a.props.onCropComplete(p,x),a.props.onCropAreaChange&&a.props.onCropAreaChange(p,x)}},a.emitCropAreaChange=function(){var f=a.getCropData();if(f){var p=f.croppedAreaPercentages,x=f.croppedAreaPixels;a.props.onCropAreaChange&&a.props.onCropAreaChange(p,x)}},a.recomputeCropPosition=function(){if(a.state.cropSize){var f=a.props.restrictPosition?Aa(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;a.props.onCropChange(f),a.emitCropData()}},a.onKeyDown=function(f){var p=a.props,x=p.crop,y=p.onCropChange,A=p.keyboardStep,v=p.zoom,E=p.rotation,S=A;if(a.state.cropSize){f.shiftKey&&(S*=.2);var I=qn({},x);switch(f.key){case"ArrowUp":I.y-=S,f.preventDefault();break;case"ArrowDown":I.y+=S,f.preventDefault();break;case"ArrowLeft":I.x-=S,f.preventDefault();break;case"ArrowRight":I.x+=S,f.preventDefault();break;default:return}a.props.restrictPosition&&(I=Aa(I,a.mediaSize,a.state.cropSize,v,E)),y(I)}},a}return o.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=S2,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef))},o.prototype.componentWillUnmount=function(){var a,f;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(a=this.resizeObserver)===null||a===void 0||a.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((f=this.styleRef.parentNode)===null||f===void 0||f.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},o.prototype.componentDidUpdate=function(a){var f,p,x,y,A,v,E,S,I;a.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):a.aspect!==this.props.aspect?this.computeSizes():a.objectFit!==this.props.objectFit?this.computeSizes():a.zoom!==this.props.zoom?this.recomputeCropPosition():((f=a.cropSize)===null||f===void 0?void 0:f.height)!==((p=this.props.cropSize)===null||p===void 0?void 0:p.height)||((x=a.cropSize)===null||x===void 0?void 0:x.width)!==((y=this.props.cropSize)===null||y===void 0?void 0:y.width)?this.computeSizes():(((A=a.crop)===null||A===void 0?void 0:A.x)!==((v=this.props.crop)===null||v===void 0?void 0:v.x)||((E=a.crop)===null||E===void 0?void 0:E.y)!==((S=this.props.crop)===null||S===void 0?void 0:S.y))&&this.emitCropAreaChange(),a.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),a.video!==this.props.video&&((I=this.videoRef.current)===null||I===void 0||I.load());var R=this.getObjectFit();R!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:R},this.computeSizes)},o.prototype.getAspect=function(){var a=this.props,f=a.cropSize,p=a.aspect;return f?f.width/f.height:p},o.prototype.getObjectFit=function(){var a,f,p,x;if(this.props.objectFit==="cover"){var y=this.imageRef.current||this.videoRef.current;if(y&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var A=this.containerRect.width/this.containerRect.height,v=((a=this.imageRef.current)===null||a===void 0?void 0:a.naturalWidth)||((f=this.videoRef.current)===null||f===void 0?void 0:f.videoWidth)||0,E=((p=this.imageRef.current)===null||p===void 0?void 0:p.naturalHeight)||((x=this.videoRef.current)===null||x===void 0?void 0:x.videoHeight)||0,S=v/E;return S<A?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},o.prototype.onPinchStart=function(a){var f=o.getTouchPoint(a.touches[0]),p=o.getTouchPoint(a.touches[1]);this.lastPinchDistance=d1(f,p),this.lastPinchRotation=f1(f,p),this.onDragStart(h1(f,p))},o.prototype.onPinchMove=function(a){var f=this;if(!(!this.currentDoc||!this.currentWindow)){var p=o.getTouchPoint(a.touches[0]),x=o.getTouchPoint(a.touches[1]),y=h1(p,x);this.onDrag(y),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var A=d1(p,x),v=f.props.zoom*(A/f.lastPinchDistance);f.setNewZoom(v,y,{shouldUpdatePosition:!1}),f.lastPinchDistance=A;var E=f1(p,x),S=f.props.rotation+(E-f.lastPinchRotation);f.props.onRotationChange&&f.props.onRotationChange(S),f.lastPinchRotation=E})}},o.prototype.render=function(){var a=this,f,p=this.props,x=p.image,y=p.video,A=p.mediaProps,v=p.transform,E=p.crop,S=E.x,I=E.y,R=p.rotation,M=p.zoom,L=p.cropShape,B=p.showGrid,j=p.style,z=j.containerStyle,U=j.cropAreaStyle,V=j.mediaStyle,ee=p.classes,re=ee.containerClassName,ne=ee.cropAreaClassName,q=ee.mediaClassName,le=(f=this.state.mediaObjectFit)!==null&&f!==void 0?f:this.getObjectFit();return N.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(Re){return a.containerRef=Re},"data-testid":"container",style:z,className:tc("reactEasyCrop_Container",re)},x?N.createElement("img",qn({alt:"",className:tc("reactEasyCrop_Image",le==="contain"&&"reactEasyCrop_Contain",le==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",le==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",q)},A,{src:x,ref:this.imageRef,style:qn(qn({},V),{transform:v||"translate(".concat(S,"px, ").concat(I,"px) rotate(").concat(R,"deg) scale(").concat(M,")")}),onLoad:this.onMediaLoad})):y&&N.createElement("video",qn({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:tc("reactEasyCrop_Video",le==="contain"&&"reactEasyCrop_Contain",le==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",le==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",q)},A,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:qn(qn({},V),{transform:v||"translate(".concat(S,"px, ").concat(I,"px) rotate(").concat(R,"deg) scale(").concat(M,")")}),controls:!1}),(Array.isArray(y)?y:[{src:y}]).map(function(K){return N.createElement("source",qn({key:K.src},K))})),this.state.cropSize&&N.createElement("div",{style:qn(qn({},U),{width:this.state.cropSize.width,height:this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,"data-testid":"cropper",className:tc("reactEasyCrop_CropArea",L==="round"&&"reactEasyCrop_CropAreaRound",B&&"reactEasyCrop_CropAreaGrid",ne)}))},o.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:I2,minZoom:T2,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:N2},o.getMousePoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},o.getTouchPoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},o}(N.Component),Sa={},p1;function _2(){return p1||(p1=1,Sa.createCanvas=function(r,o){return Object.assign(document.createElement("canvas"),{width:r,height:o})},Sa.createImageData=function(r,o,a){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(r);case 2:return new ImageData(r,o);default:return new ImageData(r,o,a)}},Sa.loadImage=function(r,o){return new Promise(function(a,f){const p=Object.assign(document.createElement("img"),o);function x(){p.onload=null,p.onerror=null}p.onload=function(){x(),a(p)},p.onerror=function(){x(),f(new Error('Failed to load the image "'+r+'"'))},p.src=r})}),Sa}_2();async function uf(r,o){return console.log("Image source being cropped:",r),new Promise((a,f)=>{const p=new Image;p.onload=()=>{const x=document.createElement("canvas"),y=x.getContext("2d");x.width=o.width,x.height=o.height,y.drawImage(p,o.x,o.y,o.width,o.height,0,0,o.width,o.height);try{const A=x.toDataURL("image/jpeg");a(A)}catch{f(new Error("Error converting canvas to base64"))}},p.onerror=x=>f(new Error(`Image load error: ${x.message}`)),p.src=r})}const R2=({onSubmit:r,onClose:o,existingProfile:a})=>{const{user:f,userProfile:p,checkAuth:x}=N.useContext(Jn),[y,A]=N.useState({name:(p==null?void 0:p.name)||"",image:null,imagePreview:p!=null&&p.image_data?`data:image/jpeg;base64,${p.image_data}`:"/assets/fakeprofile.png",croppedImage:null}),[v,E]=N.useState({x:0,y:0}),[S,I]=N.useState(1),[R,M]=N.useState(null),[L,B]=N.useState(!1),[j,z]=N.useState(!1),U=re=>{const ne=re.target.files[0];if(ne){const q=new FileReader;q.onload=le=>{A(K=>({...K,image:ne,imagePreview:le.target.result})),B(!0)},q.readAsDataURL(ne)}},V=(re,ne)=>{console.log("Cropped Area Pixels:",ne),M(ne)};async function ee(re){re.preventDefault();let ne;if(y.croppedImage)ne=y.croppedImage.split(",")[1];else if(y.image instanceof File){const K=await y.image.arrayBuffer();ne=btoa(new Uint8Array(K).reduce((Re,Be)=>Re+String.fromCharCode(Be),""))}else if(p!=null&&p.image_data)ne=p.image_data;else{console.error("No valid image provided");return}const q={name:y.name,image_data:ne};console.log("Image data (first 100 chars):",ne.substring(0,100));const le=localStorage.getItem("access_token");try{const K=await fetch(`${window.server_url}/update_profile`,{method:"POST",headers:{Authorization:`Bearer ${le}`,"Content-Type":"application/json"},body:JSON.stringify(q)});if(!K.ok)throw new Error("Failed to update profile");const Re=await K.json();await x(),console.log("Profile updated successfully:",Re),o()}catch(K){console.error("Error updating profile:",K)}}return w.jsx("div",{className:"profile-creation-overlay",style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:w.jsxs("div",{className:"profile-creation-modal",style:{width:"70%",maxWidth:"500px",backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",padding:"2rem",boxShadow:"0 10px 30px rgba(20,77,255,0.15)",position:"relative",border:"1px solid rgba(20,77,255,0.1)"},children:[w.jsx("button",{onClick:o,style:{position:"absolute",top:"1.2rem",right:"1.2rem",background:"none",border:"none",fontSize:"1.8rem",cursor:"pointer",color:"#144dff",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.1)"}},children:""}),w.jsx("h2",{style:{fontSize:"clamp(1.8rem, 6vw, 2.5rem)",color:"#144dff",textAlign:"center",marginBottom:"2rem",fontWeight:"600"},children:"Your Profile"}),w.jsxs("form",{onSubmit:ee,style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[w.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem"},children:[w.jsx("label",{style:{color:"#144dff",fontWeight:"500",fontSize:"1rem"},children:"Your Name"}),w.jsx("input",{type:"text",value:y.name,onChange:re=>A({...y,name:re.target.value}),style:{width:"100%",padding:"12px",borderRadius:"12px",border:"2px solid #e0e0e0",fontSize:"0.9rem",transition:"all 0.3s ease",backgroundColor:"rgba(255,255,255,0.9)","&:focus":{borderColor:"#144dff",outline:"none",boxShadow:"0 0 0 3px rgba(20,77,255,0.1)"}}})]}),!L&&w.jsx("div",{style:{width:"250px",height:"250px",margin:"0 auto",borderRadius:"20%",overflow:"hidden",border:"7px solid #144dff",boxShadow:"0 8px 25px rgba(20,77,255,0.2)",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.02)"}},children:w.jsx("img",{src:y.croppedImage?y.croppedImage:y.imagePreview?y.imagePreview:p!=null&&p.image_data?`data:image/jpeg;base64,${p.image_data}`:"/assets/fakeprofile.png",alt:"Profile preview",style:{width:"100%",height:"100%",objectFit:"cover"}})}),w.jsxs("div",{style:{textAlign:"center"},children:[w.jsx("input",{type:"file",id:"image-upload",accept:"image/*",onChange:U,style:{display:"none"}}),w.jsx("label",{htmlFor:"image-upload",style:{padding:"0.8rem 1.2rem",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",borderRadius:"25px",cursor:"pointer",display:"inline-block",fontSize:"0.9rem",fontWeight:"600",boxShadow:"0 4px 15px rgba(20,77,255,0.2)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Upload New Image"})]}),L&&w.jsxs("div",{style:{width:"100%",maxWidth:"300px",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",gap:"1.2rem"},children:[w.jsx("div",{style:{position:"relative",width:"250px",height:"250px",borderRadius:"20%",overflow:"hidden",border:"7px solid #144dff",boxShadow:"0 8px 25px rgba(20,77,255,0.2)"},children:w.jsx(cf,{image:y.imagePreview,crop:v,zoom:S,aspect:1,onCropComplete:V,onCropChange:E,onZoomChange:I})}),w.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[w.jsx("button",{type:"button",onClick:()=>{B(!1),y.croppedImage||A(re=>({...re,imagePreview:null}))},style:{padding:"0.8rem 1.2rem",borderRadius:"25px",border:"2px solid #144dff",background:"white",color:"#144dff",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease","&:hover":{background:"rgba(20,77,255,0.1)"}},children:"Cancel"}),w.jsx("button",{type:"button",onClick:async()=>{try{const re=await uf(y.imagePreview,R);A(ne=>({...ne,croppedImage:re,imagePreview:re})),B(!1),z(!0),setTimeout(()=>z(!1),1e4)}catch(re){console.error("Error cropping image:",re)}},className:`save-profile-button ${j?"glow-bounce":""}`,style:{padding:"0.8rem 1.2rem",borderRadius:"25px",border:"none",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(20,77,255,0.2)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Save Cropped Image"})]})]}),w.jsx("button",{type:"submit",className:`save-profile-button ${j?"glow-bounce":""}`,style:{padding:"1rem",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",border:"none",borderRadius:"25px",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",marginTop:"1rem",boxShadow:"0 4px 15px rgba(20,77,255,0.2)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Save Profile"})]})]})})};var Ta={},g1;function k2(){if(g1)return Ta;g1=1,Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.parse=y,Ta.serialize=E;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,o=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,f=/^[\u0020-\u003A\u003D-\u007E]*$/,p=Object.prototype.toString,x=(()=>{const R=function(){};return R.prototype=Object.create(null),R})();function y(R,M){const L=new x,B=R.length;if(B<2)return L;const j=(M==null?void 0:M.decode)||S;let z=0;do{const U=R.indexOf("=",z);if(U===-1)break;const V=R.indexOf(";",z),ee=V===-1?B:V;if(U>ee){z=R.lastIndexOf(";",U-1)+1;continue}const re=A(R,z,U),ne=v(R,U,re),q=R.slice(re,ne);if(L[q]===void 0){let le=A(R,U+1,ee),K=v(R,ee,le);const Re=j(R.slice(le,K));L[q]=Re}z=ee+1}while(z<B);return L}function A(R,M,L){do{const B=R.charCodeAt(M);if(B!==32&&B!==9)return M}while(++M<L);return L}function v(R,M,L){for(;M>L;){const B=R.charCodeAt(--M);if(B!==32&&B!==9)return M+1}return L}function E(R,M,L){const B=(L==null?void 0:L.encode)||encodeURIComponent;if(!r.test(R))throw new TypeError(`argument name is invalid: ${R}`);const j=B(M);if(!o.test(j))throw new TypeError(`argument val is invalid: ${M}`);let z=R+"="+j;if(!L)return z;if(L.maxAge!==void 0){if(!Number.isInteger(L.maxAge))throw new TypeError(`option maxAge is invalid: ${L.maxAge}`);z+="; Max-Age="+L.maxAge}if(L.domain){if(!a.test(L.domain))throw new TypeError(`option domain is invalid: ${L.domain}`);z+="; Domain="+L.domain}if(L.path){if(!f.test(L.path))throw new TypeError(`option path is invalid: ${L.path}`);z+="; Path="+L.path}if(L.expires){if(!I(L.expires)||!Number.isFinite(L.expires.valueOf()))throw new TypeError(`option expires is invalid: ${L.expires}`);z+="; Expires="+L.expires.toUTCString()}if(L.httpOnly&&(z+="; HttpOnly"),L.secure&&(z+="; Secure"),L.partitioned&&(z+="; Partitioned"),L.priority)switch(typeof L.priority=="string"?L.priority.toLowerCase():void 0){case"low":z+="; Priority=Low";break;case"medium":z+="; Priority=Medium";break;case"high":z+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${L.priority}`)}if(L.sameSite)switch(typeof L.sameSite=="string"?L.sameSite.toLowerCase():L.sameSite){case!0:case"strict":z+="; SameSite=Strict";break;case"lax":z+="; SameSite=Lax";break;case"none":z+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${L.sameSite}`)}return z}function S(R){if(R.indexOf("%")===-1)return R;try{return decodeURIComponent(R)}catch{return R}}function I(R){return p.call(R)==="[object Date]"}return Ta}k2();/**
 * react-router v7.0.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var m1="popstate";function P2(r={}){function o(f,p){let{pathname:x,search:y,hash:A}=f.location;return Pd("",{pathname:x,search:y,hash:A},p.state&&p.state.usr||null,p.state&&p.state.key||"default")}function a(f,p){return typeof p=="string"?p:Ba(p)}return M2(o,a,null,r)}function dn(r,o){if(r===!1||r===null||typeof r>"u")throw new Error(o)}function wi(r,o){if(!r){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}function O2(){return Math.random().toString(36).substring(2,10)}function x1(r,o){return{usr:r.state,key:r.key,idx:o}}function Pd(r,o,a=null,f){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof o=="string"?jo(o):o,state:a,key:o&&o.key||f||O2()}}function Ba({pathname:r="/",search:o="",hash:a=""}){return o&&o!=="?"&&(r+=o.charAt(0)==="?"?o:"?"+o),a&&a!=="#"&&(r+=a.charAt(0)==="#"?a:"#"+a),r}function jo(r){let o={};if(r){let a=r.indexOf("#");a>=0&&(o.hash=r.substring(a),r=r.substring(0,a));let f=r.indexOf("?");f>=0&&(o.search=r.substring(f),r=r.substring(0,f)),r&&(o.pathname=r)}return o}function M2(r,o,a,f={}){let{window:p=document.defaultView,v5Compat:x=!1}=f,y=p.history,A="POP",v=null,E=S();E==null&&(E=0,y.replaceState({...y.state,idx:E},""));function S(){return(y.state||{idx:null}).idx}function I(){A="POP";let j=S(),z=j==null?null:j-E;E=j,v&&v({action:A,location:B.location,delta:z})}function R(j,z){A="PUSH";let U=Pd(B.location,j,z);E=S()+1;let V=x1(U,E),ee=B.createHref(U);try{y.pushState(V,"",ee)}catch(re){if(re instanceof DOMException&&re.name==="DataCloneError")throw re;p.location.assign(ee)}x&&v&&v({action:A,location:B.location,delta:1})}function M(j,z){A="REPLACE";let U=Pd(B.location,j,z);E=S();let V=x1(U,E),ee=B.createHref(U);y.replaceState(V,"",ee),x&&v&&v({action:A,location:B.location,delta:0})}function L(j){let z=p.location.origin!=="null"?p.location.origin:p.location.href,U=typeof j=="string"?j:Ba(j);return U=U.replace(/ $/,"%20"),dn(z,`No window.location.(origin|href) available to create URL for href: ${U}`),new URL(U,z)}let B={get action(){return A},get location(){return r(p,y)},listen(j){if(v)throw new Error("A history only accepts one active listener");return p.addEventListener(m1,I),v=j,()=>{p.removeEventListener(m1,I),v=null}},createHref(j){return o(p,j)},createURL:L,encodeLocation(j){let z=L(j);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:R,replace:M,go(j){return y.go(j)}};return B}function $p(r,o,a="/"){return D2(r,o,a,!1)}function D2(r,o,a,f){let p=typeof o=="string"?jo(o):o,x=ws(p.pathname||"/",a);if(x==null)return null;let y=Zp(r);L2(y);let A=null;for(let v=0;A==null&&v<y.length;++v){let E=Y2(x);A=G2(y[v],E,f)}return A}function Zp(r,o=[],a=[],f=""){let p=(x,y,A)=>{let v={relativePath:A===void 0?x.path||"":A,caseSensitive:x.caseSensitive===!0,childrenIndex:y,route:x};v.relativePath.startsWith("/")&&(dn(v.relativePath.startsWith(f),`Absolute route path "${v.relativePath}" nested under path "${f}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(f.length));let E=Fi([f,v.relativePath]),S=a.concat(v);x.children&&x.children.length>0&&(dn(x.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),Zp(x.children,o,S,E)),!(x.path==null&&!x.index)&&o.push({path:E,score:W2(E,x.index),routesMeta:S})};return r.forEach((x,y)=>{var A;if(x.path===""||!((A=x.path)!=null&&A.includes("?")))p(x,y);else for(let v of Kp(x.path))p(x,y,v)}),o}function Kp(r){let o=r.split("/");if(o.length===0)return[];let[a,...f]=o,p=a.endsWith("?"),x=a.replace(/\?$/,"");if(f.length===0)return p?[x,""]:[x];let y=Kp(f.join("/")),A=[];return A.push(...y.map(v=>v===""?x:[x,v].join("/"))),p&&A.push(...y),A.map(v=>r.startsWith("/")&&v===""?"/":v)}function L2(r){r.sort((o,a)=>o.score!==a.score?a.score-o.score:H2(o.routesMeta.map(f=>f.childrenIndex),a.routesMeta.map(f=>f.childrenIndex)))}var B2=/^:[\w-]+$/,j2=3,F2=2,V2=1,z2=10,U2=-2,y1=r=>r==="*";function W2(r,o){let a=r.split("/"),f=a.length;return a.some(y1)&&(f+=U2),o&&(f+=F2),a.filter(p=>!y1(p)).reduce((p,x)=>p+(B2.test(x)?j2:x===""?V2:z2),f)}function H2(r,o){return r.length===o.length&&r.slice(0,-1).every((f,p)=>f===o[p])?r[r.length-1]-o[o.length-1]:0}function G2(r,o,a=!1){let{routesMeta:f}=r,p={},x="/",y=[];for(let A=0;A<f.length;++A){let v=f[A],E=A===f.length-1,S=x==="/"?o:o.slice(x.length)||"/",I=yc({path:v.relativePath,caseSensitive:v.caseSensitive,end:E},S),R=v.route;if(!I&&E&&a&&!f[f.length-1].route.index&&(I=yc({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},S)),!I)return null;Object.assign(p,I.params),y.push({params:p,pathname:Fi([x,I.pathname]),pathnameBase:q2(Fi([x,I.pathnameBase])),route:R}),I.pathnameBase!=="/"&&(x=Fi([x,I.pathnameBase]))}return y}function yc(r,o){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[a,f]=X2(r.path,r.caseSensitive,r.end),p=o.match(a);if(!p)return null;let x=p[0],y=x.replace(/(.)\/+$/,"$1"),A=p.slice(1);return{params:f.reduce((E,{paramName:S,isOptional:I},R)=>{if(S==="*"){let L=A[R]||"";y=x.slice(0,x.length-L.length).replace(/(.)\/+$/,"$1")}const M=A[R];return I&&!M?E[S]=void 0:E[S]=(M||"").replace(/%2F/g,"/"),E},{}),pathname:x,pathnameBase:y,pattern:r}}function X2(r,o=!1,a=!0){wi(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let f=[],p="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,A,v)=>(f.push({paramName:A,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(f.push({paramName:"*"}),p+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?p+="\\/*$":r!==""&&r!=="/"&&(p+="(?:(?=\\/|$))"),[new RegExp(p,o?void 0:"i"),f]}function Y2(r){try{return r.split("/").map(o=>decodeURIComponent(o).replace(/\//g,"%2F")).join("/")}catch(o){return wi(!1,`The URL path "${r}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${o}).`),r}}function ws(r,o){if(o==="/")return r;if(!r.toLowerCase().startsWith(o.toLowerCase()))return null;let a=o.endsWith("/")?o.length-1:o.length,f=r.charAt(a);return f&&f!=="/"?null:r.slice(a)||"/"}function $2(r,o="/"){let{pathname:a,search:f="",hash:p=""}=typeof r=="string"?jo(r):r;return{pathname:a?a.startsWith("/")?a:Z2(a,o):o,search:Q2(f),hash:J2(p)}}function Z2(r,o){let a=o.replace(/\/+$/,"").split("/");return r.split("/").forEach(p=>{p===".."?a.length>1&&a.pop():p!=="."&&a.push(p)}),a.length>1?a.join("/"):"/"}function fd(r,o,a,f){return`Cannot include a '${r}' character in a manually specified \`to.${o}\` field [${JSON.stringify(f)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function K2(r){return r.filter((o,a)=>a===0||o.route.path&&o.route.path.length>0)}function qp(r){let o=K2(r);return o.map((a,f)=>f===o.length-1?a.pathname:a.pathnameBase)}function Qp(r,o,a,f=!1){let p;typeof r=="string"?p=jo(r):(p={...r},dn(!p.pathname||!p.pathname.includes("?"),fd("?","pathname","search",p)),dn(!p.pathname||!p.pathname.includes("#"),fd("#","pathname","hash",p)),dn(!p.search||!p.search.includes("#"),fd("#","search","hash",p)));let x=r===""||p.pathname==="",y=x?"/":p.pathname,A;if(y==null)A=a;else{let I=o.length-1;if(!f&&y.startsWith("..")){let R=y.split("/");for(;R[0]==="..";)R.shift(),I-=1;p.pathname=R.join("/")}A=I>=0?o[I]:"/"}let v=$2(p,A),E=y&&y!=="/"&&y.endsWith("/"),S=(x||y===".")&&a.endsWith("/");return!v.pathname.endsWith("/")&&(E||S)&&(v.pathname+="/"),v}var Fi=r=>r.join("/").replace(/\/\/+/g,"/"),q2=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Q2=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,J2=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function ey(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var Jp=["POST","PUT","PATCH","DELETE"];new Set(Jp);var ty=["GET",...Jp];new Set(ty);var Fo=N.createContext(null);Fo.displayName="DataRouter";var _c=N.createContext(null);_c.displayName="DataRouterState";var eg=N.createContext({isTransitioning:!1});eg.displayName="ViewTransition";var ny=N.createContext(new Map);ny.displayName="Fetchers";var ry=N.createContext(null);ry.displayName="Await";var vi=N.createContext(null);vi.displayName="Navigation";var Ha=N.createContext(null);Ha.displayName="Location";var Ci=N.createContext({outlet:null,matches:[],isDataRoute:!1});Ci.displayName="Route";var df=N.createContext(null);df.displayName="RouteError";function iy(r,{relative:o}={}){dn(Ga(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:f}=N.useContext(vi),{hash:p,pathname:x,search:y}=Xa(r,{relative:o}),A=x;return a!=="/"&&(A=x==="/"?a:Fi([a,x])),f.createHref({pathname:A,search:y,hash:p})}function Ga(){return N.useContext(Ha)!=null}function Mr(){return dn(Ga(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(Ha).location}var tg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ng(r){N.useContext(vi).static||N.useLayoutEffect(r)}function Wn(){let{isDataRoute:r}=N.useContext(Ci);return r?yy():sy()}function sy(){dn(Ga(),"useNavigate() may be used only in the context of a <Router> component.");let r=N.useContext(Fo),{basename:o,navigator:a}=N.useContext(vi),{matches:f}=N.useContext(Ci),{pathname:p}=Mr(),x=JSON.stringify(qp(f)),y=N.useRef(!1);return ng(()=>{y.current=!0}),N.useCallback((v,E={})=>{if(wi(y.current,tg),!y.current)return;if(typeof v=="number"){a.go(v);return}let S=Qp(v,JSON.parse(x),p,E.relative==="path");r==null&&o!=="/"&&(S.pathname=S.pathname==="/"?o:Fi([o,S.pathname])),(E.replace?a.replace:a.push)(S,E.state,E)},[o,a,x,p,r])}N.createContext(null);function oy(){let{matches:r}=N.useContext(Ci),o=r[r.length-1];return o?o.params:{}}function Xa(r,{relative:o}={}){let{matches:a}=N.useContext(Ci),{pathname:f}=Mr(),p=JSON.stringify(qp(a));return N.useMemo(()=>Qp(r,JSON.parse(p),f,o==="path"),[r,p,f,o])}function ay(r,o){return rg(r,o)}function rg(r,o,a,f){var z;dn(Ga(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:p}=N.useContext(vi),{matches:x}=N.useContext(Ci),y=x[x.length-1],A=y?y.params:{},v=y?y.pathname:"/",E=y?y.pathnameBase:"/",S=y&&y.route;{let U=S&&S.path||"";ig(v,!S||U.endsWith("*")||U.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${v}" (under <Route path="${U}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${U}"> to <Route path="${U==="/"?"*":`${U}/*`}">.`)}let I=Mr(),R;if(o){let U=typeof o=="string"?jo(o):o;dn(E==="/"||((z=U.pathname)==null?void 0:z.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${U.pathname}" was given in the \`location\` prop.`),R=U}else R=I;let M=R.pathname||"/",L=M;if(E!=="/"){let U=E.replace(/^\//,"").split("/");L="/"+M.replace(/^\//,"").split("/").slice(U.length).join("/")}let B=$p(r,{pathname:L});wi(S||B!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),wi(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=fy(B&&B.map(U=>Object.assign({},U,{params:Object.assign({},A,U.params),pathname:Fi([E,p.encodeLocation?p.encodeLocation(U.pathname).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?E:Fi([E,p.encodeLocation?p.encodeLocation(U.pathnameBase).pathname:U.pathnameBase])})),x,a,f);return o&&j?N.createElement(Ha.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},j):j}function ly(){let r=xy(),o=ey(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),a=r instanceof Error?r.stack:null,f="rgba(200,200,200, 0.5)",p={padding:"0.5rem",backgroundColor:f},x={padding:"2px 4px",backgroundColor:f},y=null;return console.error("Error handled by React Router default ErrorBoundary:",r),y=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:x},"ErrorBoundary")," or"," ",N.createElement("code",{style:x},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},o),a?N.createElement("pre",{style:p},a):null,y)}var cy=N.createElement(ly,null),uy=class extends N.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,o){return o.location!==r.location||o.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:o.error,location:o.location,revalidation:r.revalidation||o.revalidation}}componentDidCatch(r,o){console.error("React Router caught the following error during render",r,o)}render(){return this.state.error!==void 0?N.createElement(Ci.Provider,{value:this.props.routeContext},N.createElement(df.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function dy({routeContext:r,match:o,children:a}){let f=N.useContext(Fo);return f&&f.static&&f.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(f.staticContext._deepestRenderedBoundaryId=o.route.id),N.createElement(Ci.Provider,{value:r},a)}function fy(r,o=[],a=null,f=null){if(r==null){if(!a)return null;if(a.errors)r=a.matches;else if(o.length===0&&!a.initialized&&a.matches.length>0)r=a.matches;else return null}let p=r,x=a==null?void 0:a.errors;if(x!=null){let v=p.findIndex(E=>E.route.id&&(x==null?void 0:x[E.route.id])!==void 0);dn(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(x).join(",")}`),p=p.slice(0,Math.min(p.length,v+1))}let y=!1,A=-1;if(a)for(let v=0;v<p.length;v++){let E=p[v];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(A=v),E.route.id){let{loaderData:S,errors:I}=a,R=E.route.loader&&!S.hasOwnProperty(E.route.id)&&(!I||I[E.route.id]===void 0);if(E.route.lazy||R){y=!0,A>=0?p=p.slice(0,A+1):p=[p[0]];break}}}return p.reduceRight((v,E,S)=>{let I,R=!1,M=null,L=null;a&&(I=x&&E.route.id?x[E.route.id]:void 0,M=E.route.errorElement||cy,y&&(A<0&&S===0?(ig("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,L=null):A===S&&(R=!0,L=E.route.hydrateFallbackElement||null)));let B=o.concat(p.slice(0,S+1)),j=()=>{let z;return I?z=M:R?z=L:E.route.Component?z=N.createElement(E.route.Component,null):E.route.element?z=E.route.element:z=v,N.createElement(dy,{match:E,routeContext:{outlet:v,matches:B,isDataRoute:a!=null},children:z})};return a&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?N.createElement(uy,{location:a.location,revalidation:a.revalidation,component:M,error:I,children:j(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):j()},null)}function ff(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hy(r){let o=N.useContext(Fo);return dn(o,ff(r)),o}function py(r){let o=N.useContext(_c);return dn(o,ff(r)),o}function gy(r){let o=N.useContext(Ci);return dn(o,ff(r)),o}function hf(r){let o=gy(r),a=o.matches[o.matches.length-1];return dn(a.route.id,`${r} can only be used on routes that contain a unique "id"`),a.route.id}function my(){return hf("useRouteId")}function xy(){var f;let r=N.useContext(df),o=py("useRouteError"),a=hf("useRouteError");return r!==void 0?r:(f=o.errors)==null?void 0:f[a]}function yy(){let{router:r}=hy("useNavigate"),o=hf("useNavigate"),a=N.useRef(!1);return ng(()=>{a.current=!0}),N.useCallback(async(p,x={})=>{wi(a.current,tg),a.current&&(typeof p=="number"?r.navigate(p):await r.navigate(p,{fromRouteId:o,...x}))},[r,o])}var w1={};function ig(r,o,a){!o&&!w1[r]&&(w1[r]=!0,wi(!1,a))}N.memo(wy);function wy({routes:r,future:o,state:a}){return rg(r,void 0,a,o)}function cr(r){dn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vy({basename:r="/",children:o=null,location:a,navigationType:f="POP",navigator:p,static:x=!1}){dn(!Ga(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let y=r.replace(/^\/*/,"/"),A=N.useMemo(()=>({basename:y,navigator:p,static:x,future:{}}),[y,p,x]);typeof a=="string"&&(a=jo(a));let{pathname:v="/",search:E="",hash:S="",state:I=null,key:R="default"}=a,M=N.useMemo(()=>{let L=ws(v,y);return L==null?null:{location:{pathname:L,search:E,hash:S,state:I,key:R},navigationType:f}},[y,v,E,S,I,R,f]);return wi(M!=null,`<Router basename="${y}"> is not able to match the URL "${v}${E}${S}" because it does not start with the basename, so the <Router> won't render anything.`),M==null?null:N.createElement(vi.Provider,{value:A},N.createElement(Ha.Provider,{children:o,value:M}))}function Cy({children:r,location:o}){return ay(Od(r),o)}function Od(r,o=[]){let a=[];return N.Children.forEach(r,(f,p)=>{if(!N.isValidElement(f))return;let x=[...o,p];if(f.type===N.Fragment){a.push.apply(a,Od(f.props.children,x));return}dn(f.type===cr,`[${typeof f.type=="string"?f.type:f.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),dn(!f.props.index||!f.props.children,"An index route cannot have child routes.");let y={id:f.props.id||x.join("-"),caseSensitive:f.props.caseSensitive,element:f.props.element,Component:f.props.Component,index:f.props.index,path:f.props.path,loader:f.props.loader,action:f.props.action,hydrateFallbackElement:f.props.hydrateFallbackElement,HydrateFallback:f.props.HydrateFallback,errorElement:f.props.errorElement,ErrorBoundary:f.props.ErrorBoundary,hasErrorBoundary:f.props.hasErrorBoundary===!0||f.props.ErrorBoundary!=null||f.props.errorElement!=null,shouldRevalidate:f.props.shouldRevalidate,handle:f.props.handle,lazy:f.props.lazy};f.props.children&&(y.children=Od(f.props.children,x)),a.push(y)}),a}var uc="get",dc="application/x-www-form-urlencoded";function Rc(r){return r!=null&&typeof r.tagName=="string"}function Ey(r){return Rc(r)&&r.tagName.toLowerCase()==="button"}function by(r){return Rc(r)&&r.tagName.toLowerCase()==="form"}function Ay(r){return Rc(r)&&r.tagName.toLowerCase()==="input"}function Sy(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Ty(r,o){return r.button===0&&(!o||o==="_self")&&!Sy(r)}var nc=null;function Iy(){if(nc===null)try{new FormData(document.createElement("form"),0),nc=!1}catch{nc=!0}return nc}var Ny=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function hd(r){return r!=null&&!Ny.has(r)?(wi(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${dc}"`),null):r}function _y(r,o){let a,f,p,x,y;if(by(r)){let A=r.getAttribute("action");f=A?ws(A,o):null,a=r.getAttribute("method")||uc,p=hd(r.getAttribute("enctype"))||dc,x=new FormData(r)}else if(Ey(r)||Ay(r)&&(r.type==="submit"||r.type==="image")){let A=r.form;if(A==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=r.getAttribute("formaction")||A.getAttribute("action");if(f=v?ws(v,o):null,a=r.getAttribute("formmethod")||A.getAttribute("method")||uc,p=hd(r.getAttribute("formenctype"))||hd(A.getAttribute("enctype"))||dc,x=new FormData(A,r),!Iy()){let{name:E,type:S,value:I}=r;if(S==="image"){let R=E?`${E}.`:"";x.append(`${R}x`,"0"),x.append(`${R}y`,"0")}else E&&x.append(E,I)}}else{if(Rc(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=uc,f=null,p=dc,y=r}return x&&p==="text/plain"&&(y=x,x=void 0),{action:f,method:a.toLowerCase(),encType:p,formData:x,body:y}}function pf(r,o){if(r===!1||r===null||typeof r>"u")throw new Error(o)}async function Ry(r,o){if(r.id in o)return o[r.id];try{let a=await import(r.module);return o[r.id]=a,a}catch(a){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ky(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function Py(r,o,a){let f=await Promise.all(r.map(async p=>{let x=o.routes[p.route.id];if(x){let y=await Ry(x,a);return y.links?y.links():[]}return[]}));return Ly(f.flat(1).filter(ky).filter(p=>p.rel==="stylesheet"||p.rel==="preload").map(p=>p.rel==="stylesheet"?{...p,rel:"prefetch",as:"style"}:{...p,rel:"prefetch"}))}function v1(r,o,a,f,p,x){let y=(v,E)=>a[E]?v.route.id!==a[E].route.id:!0,A=(v,E)=>{var S;return a[E].pathname!==v.pathname||((S=a[E].route.path)==null?void 0:S.endsWith("*"))&&a[E].params["*"]!==v.params["*"]};return x==="assets"?o.filter((v,E)=>y(v,E)||A(v,E)):x==="data"?o.filter((v,E)=>{var I;let S=f.routes[v.route.id];if(!S||!S.hasLoader)return!1;if(y(v,E)||A(v,E))return!0;if(v.route.shouldRevalidate){let R=v.route.shouldRevalidate({currentUrl:new URL(p.pathname+p.search+p.hash,window.origin),currentParams:((I=a[0])==null?void 0:I.params)||{},nextUrl:new URL(r,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof R=="boolean")return R}return!0}):[]}function Oy(r,o){return My(r.map(a=>{let f=o.routes[a.route.id];if(!f)return[];let p=[f.module];return f.imports&&(p=p.concat(f.imports)),p}).flat(1))}function My(r){return[...new Set(r)]}function Dy(r){let o={},a=Object.keys(r).sort();for(let f of a)o[f]=r[f];return o}function Ly(r,o){let a=new Set;return new Set(o),r.reduce((f,p)=>{let x=JSON.stringify(Dy(p));return a.has(x)||(a.add(x),f.push({key:x,link:p})),f},[])}function By(r){let o=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return o.pathname==="/"?o.pathname="_root.data":o.pathname=`${o.pathname.replace(/\/$/,"")}.data`,o}function jy(){let r=N.useContext(Fo);return pf(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Fy(){let r=N.useContext(_c);return pf(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var gf=N.createContext(void 0);gf.displayName="FrameworkContext";function sg(){let r=N.useContext(gf);return pf(r,"You must render this element inside a <HydratedRouter> element"),r}function Vy(r,o){let a=N.useContext(gf),[f,p]=N.useState(!1),[x,y]=N.useState(!1),{onFocus:A,onBlur:v,onMouseEnter:E,onMouseLeave:S,onTouchStart:I}=o,R=N.useRef(null);N.useEffect(()=>{if(r==="render"&&y(!0),r==="viewport"){let B=z=>{z.forEach(U=>{y(U.isIntersecting)})},j=new IntersectionObserver(B,{threshold:.5});return R.current&&j.observe(R.current),()=>{j.disconnect()}}},[r]),N.useEffect(()=>{if(f){let B=setTimeout(()=>{y(!0)},100);return()=>{clearTimeout(B)}}},[f]);let M=()=>{p(!0)},L=()=>{p(!1),y(!1)};return a?r!=="intent"?[x,R,{}]:[x,R,{onFocus:Ia(A,M),onBlur:Ia(v,L),onMouseEnter:Ia(E,M),onMouseLeave:Ia(S,L),onTouchStart:Ia(I,M)}]:[!1,R,{}]}function Ia(r,o){return a=>{r&&r(a),a.defaultPrevented||o(a)}}function zy({page:r,...o}){let{router:a}=jy(),f=N.useMemo(()=>$p(a.routes,r,a.basename),[a.routes,r,a.basename]);return f?N.createElement(Wy,{page:r,matches:f,...o}):(console.warn(`Tried to prefetch ${r} but no routes matched.`),null)}function Uy(r){let{manifest:o,routeModules:a}=sg(),[f,p]=N.useState([]);return N.useEffect(()=>{let x=!1;return Py(r,o,a).then(y=>{x||p(y)}),()=>{x=!0}},[r,o,a]),f}function Wy({page:r,matches:o,...a}){let f=Mr(),{manifest:p,routeModules:x}=sg(),{loaderData:y,matches:A}=Fy(),v=N.useMemo(()=>v1(r,o,A,p,f,"data"),[r,o,A,p,f]),E=N.useMemo(()=>v1(r,o,A,p,f,"assets"),[r,o,A,p,f]),S=N.useMemo(()=>{if(r===f.pathname+f.search+f.hash)return[];let M=new Set,L=!1;if(o.forEach(j=>{var U;let z=p.routes[j.route.id];!z||!z.hasLoader||(!v.some(V=>V.route.id===j.route.id)&&j.route.id in y&&((U=x[j.route.id])!=null&&U.shouldRevalidate)||z.hasClientLoader?L=!0:M.add(j.route.id))}),M.size===0)return[];let B=By(r);return L&&M.size>0&&B.searchParams.set("_routes",o.filter(j=>M.has(j.route.id)).map(j=>j.route.id).join(",")),[B.pathname+B.search]},[y,f,p,v,o,r,x]),I=N.useMemo(()=>Oy(E,p),[E,p]),R=Uy(E);return N.createElement(N.Fragment,null,S.map(M=>N.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...a})),I.map(M=>N.createElement("link",{key:M,rel:"modulepreload",href:M,...a})),R.map(({key:M,link:L})=>N.createElement("link",{key:M,...L})))}function Hy(...r){return o=>{r.forEach(a=>{typeof a=="function"?a(o):a!=null&&(a.current=o)})}}var og=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{og&&(window.__reactRouterVersion="7.0.2")}catch{}function Gy({basename:r,children:o,window:a}){let f=N.useRef();f.current==null&&(f.current=P2({window:a,v5Compat:!0}));let p=f.current,[x,y]=N.useState({action:p.action,location:p.location}),A=N.useCallback(v=>{N.startTransition(()=>y(v))},[y]);return N.useLayoutEffect(()=>p.listen(A),[p,A]),N.createElement(vy,{basename:r,children:o,location:x.location,navigationType:x.action,navigator:p})}var ag=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lg=N.forwardRef(function({onClick:o,discover:a="render",prefetch:f="none",relative:p,reloadDocument:x,replace:y,state:A,target:v,to:E,preventScrollReset:S,viewTransition:I,...R},M){let{basename:L}=N.useContext(vi),B=typeof E=="string"&&ag.test(E),j,z=!1;if(typeof E=="string"&&B&&(j=E,og))try{let K=new URL(window.location.href),Re=E.startsWith("//")?new URL(K.protocol+E):new URL(E),Be=ws(Re.pathname,L);Re.origin===K.origin&&Be!=null?E=Be+Re.search+Re.hash:z=!0}catch{wi(!1,`<Link to="${E}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let U=iy(E,{relative:p}),[V,ee,re]=Vy(f,R),ne=Zy(E,{replace:y,state:A,target:v,preventScrollReset:S,relative:p,viewTransition:I});function q(K){o&&o(K),K.defaultPrevented||ne(K)}let le=N.createElement("a",{...R,...re,href:j||U,onClick:z||x?o:q,ref:Hy(M,ee),target:v,"data-discover":!B&&a==="render"?"true":void 0});return V&&!B?N.createElement(N.Fragment,null,le,N.createElement(zy,{page:U})):le});lg.displayName="Link";var Xy=N.forwardRef(function({"aria-current":o="page",caseSensitive:a=!1,className:f="",end:p=!1,style:x,to:y,viewTransition:A,children:v,...E},S){let I=Xa(y,{relative:E.relative}),R=Mr(),M=N.useContext(_c),{navigator:L,basename:B}=N.useContext(vi),j=M!=null&&ew(I)&&A===!0,z=L.encodeLocation?L.encodeLocation(I).pathname:I.pathname,U=R.pathname,V=M&&M.navigation&&M.navigation.location?M.navigation.location.pathname:null;a||(U=U.toLowerCase(),V=V?V.toLowerCase():null,z=z.toLowerCase()),V&&B&&(V=ws(V,B)||V);const ee=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let re=U===z||!p&&U.startsWith(z)&&U.charAt(ee)==="/",ne=V!=null&&(V===z||!p&&V.startsWith(z)&&V.charAt(z.length)==="/"),q={isActive:re,isPending:ne,isTransitioning:j},le=re?o:void 0,K;typeof f=="function"?K=f(q):K=[f,re?"active":null,ne?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let Re=typeof x=="function"?x(q):x;return N.createElement(lg,{...E,"aria-current":le,className:K,ref:S,style:Re,to:y,viewTransition:A},typeof v=="function"?v(q):v)});Xy.displayName="NavLink";var Yy=N.forwardRef(({discover:r="render",fetcherKey:o,navigate:a,reloadDocument:f,replace:p,state:x,method:y=uc,action:A,onSubmit:v,relative:E,preventScrollReset:S,viewTransition:I,...R},M)=>{let L=Qy(),B=Jy(A,{relative:E}),j=y.toLowerCase()==="get"?"get":"post",z=typeof A=="string"&&ag.test(A),U=V=>{if(v&&v(V),V.defaultPrevented)return;V.preventDefault();let ee=V.nativeEvent.submitter,re=(ee==null?void 0:ee.getAttribute("formmethod"))||y;L(ee||V.currentTarget,{fetcherKey:o,method:re,navigate:a,replace:p,state:x,relative:E,preventScrollReset:S,viewTransition:I})};return N.createElement("form",{ref:M,method:j,action:B,onSubmit:f?v:U,...R,"data-discover":!z&&r==="render"?"true":void 0})});Yy.displayName="Form";function $y(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cg(r){let o=N.useContext(Fo);return dn(o,$y(r)),o}function Zy(r,{target:o,replace:a,state:f,preventScrollReset:p,relative:x,viewTransition:y}={}){let A=Wn(),v=Mr(),E=Xa(r,{relative:x});return N.useCallback(S=>{if(Ty(S,o)){S.preventDefault();let I=a!==void 0?a:Ba(v)===Ba(E);A(r,{replace:I,state:f,preventScrollReset:p,relative:x,viewTransition:y})}},[v,A,E,a,f,o,r,p,x,y])}var Ky=0,qy=()=>`__${String(++Ky)}__`;function Qy(){let{router:r}=cg("useSubmit"),{basename:o}=N.useContext(vi),a=my();return N.useCallback(async(f,p={})=>{let{action:x,method:y,encType:A,formData:v,body:E}=_y(f,o);if(p.navigate===!1){let S=p.fetcherKey||qy();await r.fetch(S,a,p.action||x,{preventScrollReset:p.preventScrollReset,formData:v,body:E,formMethod:p.method||y,formEncType:p.encType||A,flushSync:p.flushSync})}else await r.navigate(p.action||x,{preventScrollReset:p.preventScrollReset,formData:v,body:E,formMethod:p.method||y,formEncType:p.encType||A,replace:p.replace,state:p.state,fromRouteId:a,flushSync:p.flushSync,viewTransition:p.viewTransition})},[r,o,a])}function Jy(r,{relative:o}={}){let{basename:a}=N.useContext(vi),f=N.useContext(Ci);dn(f,"useFormAction must be used inside a RouteContext");let[p]=f.matches.slice(-1),x={...Xa(r||".",{relative:o})},y=Mr();if(r==null){x.search=y.search;let A=new URLSearchParams(x.search),v=A.getAll("index");if(v.some(S=>S==="")){A.delete("index"),v.filter(I=>I).forEach(I=>A.append("index",I));let S=A.toString();x.search=S?`?${S}`:""}}return(!r||r===".")&&p.route.index&&(x.search=x.search?x.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(x.pathname=x.pathname==="/"?a:Fi([a,x.pathname])),Ba(x)}function ew(r,o={}){let a=N.useContext(eg);dn(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:f}=cg("useViewTransitionState"),p=Xa(r,{relative:o.relative});if(!a.isTransitioning)return!1;let x=ws(a.currentLocation.pathname,f)||a.currentLocation.pathname,y=ws(a.nextLocation.pathname,f)||a.nextLocation.pathname;return yc(p.pathname,y)!=null||yc(p.pathname,x)!=null}new TextEncoder;function mf(){const r="./assets",o="/sounds/new_elevator_combined.mp3";Wn();const a=N.useRef(new Audio(r+o)),[f,p]=N.useState(!1),[x,y]=N.useState(!1),[A,v]=N.useState(null),[E,S]=N.useState(!1),[I,R]=N.useState(!1);N.useEffect(()=>{const U=a.current,V=()=>{U.pause(),U.currentTime=0,y(!1),j()};return U.addEventListener("ended",V),()=>U.removeEventListener("ended",V)},[I]);function M(){v(null),a.current.load(),a.current.play().then(()=>{a.current.pause(),a.current.currentTime=0,p(!0),y(!0),S(!0),B()}).catch(U=>{console.error("Error loading audio:",U),v("Failed to load audio. Please check the file path and format."),S(!1)})}function L(){return!!(a.current&&!a.current.paused)}function B(){a.current.paused?a.current.play().catch(U=>{console.error("Error playing audio:",U),v("Failed to play audio. Please try again.")}):a.current.currentTime=0}function j(){a.current&&(a.current.pause(),a.current.currentTime=0,a.current.src="",a.current=null)}function z(U){a.current.currentTime=U,console.log(a.current.duration)}return{audioRef:a,error:A,playSound:B,loadSound:M,seekTo:z,cancelSound:j,checkSound:L,soundEnabled:E,setSoundEnabled:S,isPlaying:x}}var Mn;(function(r){r[r.QR_CODE=0]="QR_CODE",r[r.AZTEC=1]="AZTEC",r[r.CODABAR=2]="CODABAR",r[r.CODE_39=3]="CODE_39",r[r.CODE_93=4]="CODE_93",r[r.CODE_128=5]="CODE_128",r[r.DATA_MATRIX=6]="DATA_MATRIX",r[r.MAXICODE=7]="MAXICODE",r[r.ITF=8]="ITF",r[r.EAN_13=9]="EAN_13",r[r.EAN_8=10]="EAN_8",r[r.PDF_417=11]="PDF_417",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Mn||(Mn={}));Mn.QR_CODE,Mn.AZTEC,Mn.CODABAR,Mn.CODE_39,Mn.CODE_93,Mn.CODE_128,Mn.DATA_MATRIX,Mn.MAXICODE,Mn.ITF,Mn.EAN_13,Mn.EAN_8,Mn.PDF_417,Mn.RSS_14,Mn.RSS_EXPANDED,Mn.UPC_A,Mn.UPC_E,Mn.UPC_EAN_EXTENSION;var C1;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.URL=1]="URL"})(C1||(C1={}));var wc;(function(r){r[r.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",r[r.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(wc||(wc={}));var tw=function(){function r(){}return r.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",r.SCAN_DEFAULT_FPS=2,r.DEFAULT_DISABLE_FLIP=!1,r.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,r.DEFAULT_SUPPORTED_SCAN_TYPE=[wc.SCAN_TYPE_CAMERA,wc.SCAN_TYPE_FILE],r}(),E1;(function(r){r[r.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",r[r.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",r[r.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(E1||(E1={}));var _a={exports:{}},nw=_a.exports,b1;function rw(){return b1||(b1=1,function(r,o){(function(a,f){f(o)})(nw,function(a){function f(k){return k==null}var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,e){k.__proto__=e}||function(k,e){for(var n in e)e.hasOwnProperty(n)&&(k[n]=e[n])};function x(k,e){p(k,e);function n(){this.constructor=k}k.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function y(k,e){var n=Object.setPrototypeOf;n?n(k,e):k.__proto__=e}function A(k,e){e===void 0&&(e=k.constructor);var n=Error.captureStackTrace;n&&n(k,e)}var v=function(k){x(e,k);function e(n){var i=this.constructor,l=k.call(this,n)||this;return Object.defineProperty(l,"name",{value:i.name,enumerable:!1}),y(l,i.prototype),A(l),l}return e}(Error);class E extends v{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}E.kind="Exception";class S extends E{}S.kind="ArgumentException";class I extends E{}I.kind="IllegalArgumentException";class R{constructor(e){if(this.binarizer=e,e===null)throw new I("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,n){return this.binarizer.getBlackRow(e,n)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,n,i,l){const c=this.binarizer.getLuminanceSource().crop(e,n,i,l);return new R(this.binarizer.createBinarizer(c))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new R(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new R(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class M extends E{static getChecksumInstance(){return new M}}M.kind="ChecksumException";class L{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class B{static arraycopy(e,n,i,l,c){for(;c--;)i[l++]=e[n++]}static currentTimeMillis(){return Date.now()}}class j extends E{}j.kind="IndexOutOfBoundsException";class z extends j{constructor(e=void 0,n=void 0){super(n),this.index=e,this.message=n}}z.kind="ArrayIndexOutOfBoundsException";class U{static fill(e,n){for(let i=0,l=e.length;i<l;i++)e[i]=n}static fillWithin(e,n,i,l){U.rangeCheck(e.length,n,i);for(let c=n;c<i;c++)e[c]=l}static rangeCheck(e,n,i){if(n>i)throw new I("fromIndex("+n+") > toIndex("+i+")");if(n<0)throw new z(n);if(i>e)throw new z(i)}static asList(...e){return e}static create(e,n,i){return Array.from({length:e}).map(c=>Array.from({length:n}).fill(i))}static createInt32Array(e,n,i){return Array.from({length:e}).map(c=>Int32Array.from({length:n}).fill(i))}static equals(e,n){if(!e||!n||!e.length||!n.length||e.length!==n.length)return!1;for(let i=0,l=e.length;i<l;i++)if(e[i]!==n[i])return!1;return!0}static hashCode(e){if(e===null)return 0;let n=1;for(const i of e)n=31*n+i;return n}static fillUint8Array(e,n){for(let i=0;i!==e.length;i++)e[i]=n}static copyOf(e,n){return e.slice(0,n)}static copyOfUint8Array(e,n){if(e.length<=n){const i=new Uint8Array(n);return i.set(e),i}return e.slice(0,n)}static copyOfRange(e,n,i){const l=i-n,c=new Int32Array(l);return B.arraycopy(e,n,c,0,l),c}static binarySearch(e,n,i){i===void 0&&(i=U.numberComparator);let l=0,c=e.length-1;for(;l<=c;){const u=c+l>>1,h=i(n,e[u]);if(h>0)l=u+1;else if(h<0)c=u-1;else return u}return-l-1}static numberComparator(e,n){return e-n}}class V{static numberOfTrailingZeros(e){let n;if(e===0)return 32;let i=31;return n=e<<16,n!==0&&(i-=16,e=n),n=e<<8,n!==0&&(i-=8,e=n),n=e<<4,n!==0&&(i-=4,e=n),n=e<<2,n!==0&&(i-=2,e=n),i-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let n=1;return e>>>16||(n+=16,e<<=16),e>>>24||(n+=8,e<<=8),e>>>28||(n+=4,e<<=4),e>>>30||(n+=2,e<<=2),n-=e>>>31,n}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,n){return Math.trunc(e/n)}static parseInt(e,n=void 0){return parseInt(e,n)}}V.MIN_VALUE_32_BITS=-2147483648,V.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ee{constructor(e,n){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,n==null?this.bits=ee.makeArray(e):this.bits=n)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const n=ee.makeArray(e);B.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const n=this.size;if(e>=n)return n;const i=this.bits;let l=Math.floor(e/32),c=i[l];c&=~((1<<(e&31))-1);const u=i.length;for(;c===0;){if(++l===u)return n;c=i[l]}const h=l*32+V.numberOfTrailingZeros(c);return h>n?n:h}getNextUnset(e){const n=this.size;if(e>=n)return n;const i=this.bits;let l=Math.floor(e/32),c=~i[l];c&=~((1<<(e&31))-1);const u=i.length;for(;c===0;){if(++l===u)return n;c=~i[l]}const h=l*32+V.numberOfTrailingZeros(c);return h>n?n:h}setBulk(e,n){this.bits[Math.floor(e/32)]=n}setRange(e,n){if(n<e||e<0||n>this.size)throw new I;if(n===e)return;n--;const i=Math.floor(e/32),l=Math.floor(n/32),c=this.bits;for(let u=i;u<=l;u++){const h=u>i?0:e&31,C=(2<<(u<l?31:n&31))-(1<<h);c[u]|=C}}clear(){const e=this.bits.length,n=this.bits;for(let i=0;i<e;i++)n[i]=0}isRange(e,n,i){if(n<e||e<0||n>this.size)throw new I;if(n===e)return!0;n--;const l=Math.floor(e/32),c=Math.floor(n/32),u=this.bits;for(let h=l;h<=c;h++){const m=h>l?0:e&31,_=(2<<(h<c?31:n&31))-(1<<m)&4294967295;if((u[h]&_)!==(i?_:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,n){if(n<0||n>32)throw new I("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(let i=n;i>0;i--)this.appendBit((e>>i-1&1)===1)}appendBitArray(e){const n=e.size;this.ensureCapacity(this.size+n);for(let i=0;i<n;i++)this.appendBit(e.get(i))}xor(e){if(this.size!==e.size)throw new I("Sizes don't match");const n=this.bits;for(let i=0,l=n.length;i<l;i++)n[i]^=e.bits[i]}toBytes(e,n,i,l){for(let c=0;c<l;c++){let u=0;for(let h=0;h<8;h++)this.get(e)&&(u|=1<<7-h),e++;n[i+c]=u}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),i=n+1,l=this.bits;for(let c=0;c<i;c++){let u=l[c];u=u>>1&1431655765|(u&1431655765)<<1,u=u>>2&858993459|(u&858993459)<<2,u=u>>4&252645135|(u&252645135)<<4,u=u>>8&16711935|(u&16711935)<<8,u=u>>16&65535|(u&65535)<<16,e[n-c]=u}if(this.size!==i*32){const c=i*32-this.size;let u=e[0]>>>c;for(let h=1;h<i;h++){const m=e[h];u|=m<<32-c,e[h-1]=u,u=m>>>c}e[i-1]=u}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof ee))return!1;const n=e;return this.size===n.size&&U.equals(this.bits,n.bits)}hashCode(){return 31*this.size+U.hashCode(this.bits)}toString(){let e="";for(let n=0,i=this.size;n<i;n++)n&7||(e+=" "),e+=this.get(n)?"X":".";return e}clone(){return new ee(this.size,this.bits.slice())}}var re;(function(k){k[k.OTHER=0]="OTHER",k[k.PURE_BARCODE=1]="PURE_BARCODE",k[k.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",k[k.TRY_HARDER=3]="TRY_HARDER",k[k.CHARACTER_SET=4]="CHARACTER_SET",k[k.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",k[k.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",k[k.ASSUME_GS1=7]="ASSUME_GS1",k[k.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",k[k.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",k[k.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(re||(re={}));var ne=re;class q extends E{static getFormatInstance(){return new q}}q.kind="FormatException";var le;(function(k){k[k.Cp437=0]="Cp437",k[k.ISO8859_1=1]="ISO8859_1",k[k.ISO8859_2=2]="ISO8859_2",k[k.ISO8859_3=3]="ISO8859_3",k[k.ISO8859_4=4]="ISO8859_4",k[k.ISO8859_5=5]="ISO8859_5",k[k.ISO8859_6=6]="ISO8859_6",k[k.ISO8859_7=7]="ISO8859_7",k[k.ISO8859_8=8]="ISO8859_8",k[k.ISO8859_9=9]="ISO8859_9",k[k.ISO8859_10=10]="ISO8859_10",k[k.ISO8859_11=11]="ISO8859_11",k[k.ISO8859_13=12]="ISO8859_13",k[k.ISO8859_14=13]="ISO8859_14",k[k.ISO8859_15=14]="ISO8859_15",k[k.ISO8859_16=15]="ISO8859_16",k[k.SJIS=16]="SJIS",k[k.Cp1250=17]="Cp1250",k[k.Cp1251=18]="Cp1251",k[k.Cp1252=19]="Cp1252",k[k.Cp1256=20]="Cp1256",k[k.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",k[k.UTF8=22]="UTF8",k[k.ASCII=23]="ASCII",k[k.Big5=24]="Big5",k[k.GB18030=25]="GB18030",k[k.EUC_KR=26]="EUC_KR"})(le||(le={}));class K{constructor(e,n,i,...l){this.valueIdentifier=e,this.name=i,typeof n=="number"?this.values=Int32Array.from([n]):this.values=n,this.otherEncodingNames=l,K.VALUE_IDENTIFIER_TO_ECI.set(e,this),K.NAME_TO_ECI.set(i,this);const c=this.values;for(let u=0,h=c.length;u!==h;u++){const m=c[u];K.VALUES_TO_ECI.set(m,this)}for(const u of l)K.NAME_TO_ECI.set(u,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new q("incorect value");const n=K.VALUES_TO_ECI.get(e);if(n===void 0)throw new q("incorect value");return n}static getCharacterSetECIByName(e){const n=K.NAME_TO_ECI.get(e);if(n===void 0)throw new q("incorect value");return n}equals(e){if(!(e instanceof K))return!1;const n=e;return this.getName()===n.getName()}}K.VALUE_IDENTIFIER_TO_ECI=new Map,K.VALUES_TO_ECI=new Map,K.NAME_TO_ECI=new Map,K.Cp437=new K(le.Cp437,Int32Array.from([0,2]),"Cp437"),K.ISO8859_1=new K(le.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),K.ISO8859_2=new K(le.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),K.ISO8859_3=new K(le.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),K.ISO8859_4=new K(le.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),K.ISO8859_5=new K(le.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),K.ISO8859_6=new K(le.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),K.ISO8859_7=new K(le.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),K.ISO8859_8=new K(le.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),K.ISO8859_9=new K(le.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),K.ISO8859_10=new K(le.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),K.ISO8859_11=new K(le.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),K.ISO8859_13=new K(le.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),K.ISO8859_14=new K(le.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),K.ISO8859_15=new K(le.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),K.ISO8859_16=new K(le.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),K.SJIS=new K(le.SJIS,20,"SJIS","Shift_JIS"),K.Cp1250=new K(le.Cp1250,21,"Cp1250","windows-1250"),K.Cp1251=new K(le.Cp1251,22,"Cp1251","windows-1251"),K.Cp1252=new K(le.Cp1252,23,"Cp1252","windows-1252"),K.Cp1256=new K(le.Cp1256,24,"Cp1256","windows-1256"),K.UnicodeBigUnmarked=new K(le.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),K.UTF8=new K(le.UTF8,26,"UTF8","UTF-8"),K.ASCII=new K(le.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),K.Big5=new K(le.Big5,28,"Big5"),K.GB18030=new K(le.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),K.EUC_KR=new K(le.EUC_KR,30,"EUC_KR","EUC-KR");class Re extends E{}Re.kind="UnsupportedOperationException";class Be{static decode(e,n){const i=this.encodingName(n);return this.customDecoder?this.customDecoder(e,i):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(i)?this.decodeFallback(e,i):new TextDecoder(i).decode(e)}static shouldDecodeOnFallback(e){return!Be.isBrowser()&&e==="ISO-8859-1"}static encode(e,n){const i=this.encodingName(n);return this.customEncoder?this.customEncoder(e,i):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof K?e:K.getCharacterSetECIByName(e)}static decodeFallback(e,n){const i=this.encodingCharacterSet(n);if(Be.isDecodeFallbackSupported(i)){let l="";for(let c=0,u=e.length;c<u;c++){let h=e[c].toString(16);h.length<2&&(h="0"+h),l+="%"+h}return decodeURIComponent(l)}if(i.equals(K.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Re(`Encoding ${this.encodingName(n)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(K.UTF8)||e.equals(K.ISO8859_1)||e.equals(K.ASCII)}static encodeFallback(e){const i=btoa(unescape(encodeURIComponent(e))).split(""),l=[];for(let c=0;c<i.length;c++)l.push(i[c].charCodeAt(0));return new Uint8Array(l)}}class Ne{static castAsNonUtf8Char(e,n=null){const i=n?n.getName():this.ISO88591;return Be.decode(new Uint8Array([e]),i)}static guessEncoding(e,n){if(n!=null&&n.get(ne.CHARACTER_SET)!==void 0)return n.get(ne.CHARACTER_SET).toString();const i=e.length;let l=!0,c=!0,u=!0,h=0,m=0,C=0,_=0,P=0,D=0,H=0,X=0,Z=0,te=0,de=0;const Oe=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let Me=0;Me<i&&(l||c||u);Me++){const Ie=e[Me]&255;u&&(h>0?Ie&128?h--:u=!1:Ie&128&&(Ie&64?(h++,Ie&32?(h++,Ie&16?(h++,Ie&8?u=!1:_++):C++):m++):u=!1)),l&&(Ie>127&&Ie<160?l=!1:Ie>159&&(Ie<192||Ie===215||Ie===247)&&de++),c&&(P>0?Ie<64||Ie===127||Ie>252?c=!1:P--:Ie===128||Ie===160||Ie>239?c=!1:Ie>160&&Ie<224?(D++,X=0,H++,H>Z&&(Z=H)):Ie>127?(P++,H=0,X++,X>te&&(te=X)):(H=0,X=0))}return u&&h>0&&(u=!1),c&&P>0&&(c=!1),u&&(Oe||m+C+_>0)?Ne.UTF8:c&&(Ne.ASSUME_SHIFT_JIS||Z>=3||te>=3)?Ne.SHIFT_JIS:l&&c?Z===2&&D===2||de*10>=i?Ne.SHIFT_JIS:Ne.ISO88591:l?Ne.ISO88591:c?Ne.SHIFT_JIS:u?Ne.UTF8:Ne.PLATFORM_DEFAULT_ENCODING}static format(e,...n){let i=-1;function l(u,h,m,C,_,P){if(u==="%%")return"%";if(n[++i]===void 0)return;u=C?parseInt(C.substr(1)):void 0;let D=_?parseInt(_.substr(1)):void 0,H;switch(P){case"s":H=n[i];break;case"c":H=n[i][0];break;case"f":H=parseFloat(n[i]).toFixed(u);break;case"p":H=parseFloat(n[i]).toPrecision(u);break;case"e":H=parseFloat(n[i]).toExponential(u);break;case"x":H=parseInt(n[i]).toString(D||16);break;case"d":H=parseFloat(parseInt(n[i],D||10).toPrecision(u)).toFixed(0);break}H=typeof H=="object"?JSON.stringify(H):(+H).toString(D);let X=parseInt(m),Z=m&&m[0]+""=="0"?"0":" ";for(;H.length<X;)H=h!==void 0?H+Z:Z+H;return H}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(c,l)}static getBytes(e,n){return Be.encode(e,n)}static getCharCode(e,n=0){return e.charCodeAt(n)}static getCharAt(e){return String.fromCharCode(e)}}Ne.SHIFT_JIS=K.SJIS.getName(),Ne.GB2312="GB2312",Ne.ISO88591=K.ISO8859_1.getName(),Ne.EUC_JP="EUC_JP",Ne.UTF8=K.UTF8.getName(),Ne.PLATFORM_DEFAULT_ENCODING=Ne.UTF8,Ne.ASSUME_SHIFT_JIS=!1;class Le{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Ne.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,n,i){for(let l=n;n<n+i;l++)this.append(e[l]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+1)}substring(e,n){return this.value.substring(e,n)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+n.length)}}class Se{constructor(e,n,i,l){if(this.width=e,this.height=n,this.rowSize=i,this.bits=l,n==null&&(n=e),this.height=n,e<1||n<1)throw new I("Both dimensions must be greater than 0");i==null&&(i=Math.floor((e+31)/32)),this.rowSize=i,l==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const n=e.length,i=e[0].length,l=new Se(i,n);for(let c=0;c<n;c++){const u=e[c];for(let h=0;h<i;h++)u[h]&&l.set(h,c)}return l}static parseFromString(e,n,i){if(e===null)throw new I("stringRepresentation cannot be null");const l=new Array(e.length);let c=0,u=0,h=-1,m=0,C=0;for(;C<e.length;)if(e.charAt(C)===`
`||e.charAt(C)==="\r"){if(c>u){if(h===-1)h=c-u;else if(c-u!==h)throw new I("row lengths do not match");u=c,m++}C++}else if(e.substring(C,C+n.length)===n)C+=n.length,l[c]=!0,c++;else if(e.substring(C,C+i.length)===i)C+=i.length,l[c]=!1,c++;else throw new I("illegal character encountered: "+e.substring(C));if(c>u){if(h===-1)h=c-u;else if(c-u!==h)throw new I("row lengths do not match");m++}const _=new Se(h,m);for(let P=0;P<c;P++)l[P]&&_.set(Math.floor(P%h),Math.floor(P/h));return _}get(e,n){const i=n*this.rowSize+Math.floor(e/32);return(this.bits[i]>>>(e&31)&1)!==0}set(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]|=1<<(e&31)&4294967295}unset(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]&=~(1<<(e&31)&4294967295)}flip(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new I("input matrix dimensions do not match");const n=new ee(Math.floor(this.width/32)+1),i=this.rowSize,l=this.bits;for(let c=0,u=this.height;c<u;c++){const h=c*i,m=e.getRow(c,n).getBitArray();for(let C=0;C<i;C++)l[h+C]^=m[C]}}clear(){const e=this.bits,n=e.length;for(let i=0;i<n;i++)e[i]=0}setRegion(e,n,i,l){if(n<0||e<0)throw new I("Left and top must be nonnegative");if(l<1||i<1)throw new I("Height and width must be at least 1");const c=e+i,u=n+l;if(u>this.height||c>this.width)throw new I("The region must fit inside the matrix");const h=this.rowSize,m=this.bits;for(let C=n;C<u;C++){const _=C*h;for(let P=e;P<c;P++)m[_+Math.floor(P/32)]|=1<<(P&31)&4294967295}}getRow(e,n){n==null||n.getSize()<this.width?n=new ee(this.width):n.clear();const i=this.rowSize,l=this.bits,c=e*i;for(let u=0;u<i;u++)n.setBulk(u*32,l[c+u]);return n}setRow(e,n){B.arraycopy(n.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),n=this.getHeight();let i=new ee(e),l=new ee(e);for(let c=0,u=Math.floor((n+1)/2);c<u;c++)i=this.getRow(c,i),l=this.getRow(n-1-c,l),i.reverse(),l.reverse(),this.setRow(c,l),this.setRow(n-1-c,i)}getEnclosingRectangle(){const e=this.width,n=this.height,i=this.rowSize,l=this.bits;let c=e,u=n,h=-1,m=-1;for(let C=0;C<n;C++)for(let _=0;_<i;_++){const P=l[C*i+_];if(P!==0){if(C<u&&(u=C),C>m&&(m=C),_*32<c){let D=0;for(;!(P<<31-D&4294967295);)D++;_*32+D<c&&(c=_*32+D)}if(_*32+31>h){let D=31;for(;!(P>>>D);)D--;_*32+D>h&&(h=_*32+D)}}}return h<c||m<u?null:Int32Array.from([c,u,h-c+1,m-u+1])}getTopLeftOnBit(){const e=this.rowSize,n=this.bits;let i=0;for(;i<n.length&&n[i]===0;)i++;if(i===n.length)return null;const l=i/e;let c=i%e*32;const u=n[i];let h=0;for(;!(u<<31-h&4294967295);)h++;return c+=h,Int32Array.from([c,l])}getBottomRightOnBit(){const e=this.rowSize,n=this.bits;let i=n.length-1;for(;i>=0&&n[i]===0;)i--;if(i<0)return null;const l=Math.floor(i/e);let c=Math.floor(i%e)*32;const u=n[i];let h=31;for(;!(u>>>h);)h--;return c+=h,Int32Array.from([c,l])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof Se))return!1;const n=e;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&U.equals(this.bits,n.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+U.hashCode(this.bits),e}toString(e="X ",n="  ",i=`
`){return this.buildToString(e,n,i)}buildToString(e,n,i){let l=new Le;for(let c=0,u=this.height;c<u;c++){for(let h=0,m=this.width;h<m;h++)l.append(this.get(h,c)?e:n);l.append(i)}return l.toString()}clone(){return new Se(this.width,this.height,this.rowSize,this.bits.slice())}}class Q extends E{static getNotFoundInstance(){return new Q}}Q.kind="NotFoundException";class Fe extends L{constructor(e){super(e),this.luminances=Fe.EMPTY,this.buckets=new Int32Array(Fe.LUMINANCE_BUCKETS)}getBlackRow(e,n){const i=this.getLuminanceSource(),l=i.getWidth();n==null||n.getSize()<l?n=new ee(l):n.clear(),this.initArrays(l);const c=i.getRow(e,this.luminances),u=this.buckets;for(let m=0;m<l;m++)u[(c[m]&255)>>Fe.LUMINANCE_SHIFT]++;const h=Fe.estimateBlackPoint(u);if(l<3)for(let m=0;m<l;m++)(c[m]&255)<h&&n.set(m);else{let m=c[0]&255,C=c[1]&255;for(let _=1;_<l-1;_++){const P=c[_+1]&255;(C*4-m-P)/2<h&&n.set(_),m=C,C=P}}return n}getBlackMatrix(){const e=this.getLuminanceSource(),n=e.getWidth(),i=e.getHeight(),l=new Se(n,i);this.initArrays(n);const c=this.buckets;for(let m=1;m<5;m++){const C=Math.floor(i*m/5),_=e.getRow(C,this.luminances),P=Math.floor(n*4/5);for(let D=Math.floor(n/5);D<P;D++){const H=_[D]&255;c[H>>Fe.LUMINANCE_SHIFT]++}}const u=Fe.estimateBlackPoint(c),h=e.getMatrix();for(let m=0;m<i;m++){const C=m*n;for(let _=0;_<n;_++)(h[C+_]&255)<u&&l.set(_,m)}return l}createBinarizer(e){return new Fe(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const n=this.buckets;for(let i=0;i<Fe.LUMINANCE_BUCKETS;i++)n[i]=0}static estimateBlackPoint(e){const n=e.length;let i=0,l=0,c=0;for(let _=0;_<n;_++)e[_]>c&&(l=_,c=e[_]),e[_]>i&&(i=e[_]);let u=0,h=0;for(let _=0;_<n;_++){const P=_-l,D=e[_]*P*P;D>h&&(u=_,h=D)}if(l>u){const _=l;l=u,u=_}if(u-l<=n/16)throw new Q;let m=u-1,C=-1;for(let _=u-1;_>l;_--){const P=_-l,D=P*P*(u-_)*(i-e[_]);D>C&&(m=_,C=D)}return m<<Fe.LUMINANCE_SHIFT}}Fe.LUMINANCE_BITS=5,Fe.LUMINANCE_SHIFT=8-Fe.LUMINANCE_BITS,Fe.LUMINANCE_BUCKETS=1<<Fe.LUMINANCE_BITS,Fe.EMPTY=Uint8ClampedArray.from([0]);class ge extends Fe{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),n=e.getWidth(),i=e.getHeight();if(n>=ge.MINIMUM_DIMENSION&&i>=ge.MINIMUM_DIMENSION){const l=e.getMatrix();let c=n>>ge.BLOCK_SIZE_POWER;n&ge.BLOCK_SIZE_MASK&&c++;let u=i>>ge.BLOCK_SIZE_POWER;i&ge.BLOCK_SIZE_MASK&&u++;const h=ge.calculateBlackPoints(l,c,u,n,i),m=new Se(n,i);ge.calculateThresholdForBlock(l,c,u,n,i,h,m),this.matrix=m}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new ge(e)}static calculateThresholdForBlock(e,n,i,l,c,u,h){const m=c-ge.BLOCK_SIZE,C=l-ge.BLOCK_SIZE;for(let _=0;_<i;_++){let P=_<<ge.BLOCK_SIZE_POWER;P>m&&(P=m);const D=ge.cap(_,2,i-3);for(let H=0;H<n;H++){let X=H<<ge.BLOCK_SIZE_POWER;X>C&&(X=C);const Z=ge.cap(H,2,n-3);let te=0;for(let Oe=-2;Oe<=2;Oe++){const Me=u[D+Oe];te+=Me[Z-2]+Me[Z-1]+Me[Z]+Me[Z+1]+Me[Z+2]}const de=te/25;ge.thresholdBlock(e,X,P,de,l,h)}}}static cap(e,n,i){return e<n?n:e>i?i:e}static thresholdBlock(e,n,i,l,c,u){for(let h=0,m=i*c+n;h<ge.BLOCK_SIZE;h++,m+=c)for(let C=0;C<ge.BLOCK_SIZE;C++)(e[m+C]&255)<=l&&u.set(n+C,i+h)}static calculateBlackPoints(e,n,i,l,c){const u=c-ge.BLOCK_SIZE,h=l-ge.BLOCK_SIZE,m=new Array(i);for(let C=0;C<i;C++){m[C]=new Int32Array(n);let _=C<<ge.BLOCK_SIZE_POWER;_>u&&(_=u);for(let P=0;P<n;P++){let D=P<<ge.BLOCK_SIZE_POWER;D>h&&(D=h);let H=0,X=255,Z=0;for(let de=0,Oe=_*l+D;de<ge.BLOCK_SIZE;de++,Oe+=l){for(let Me=0;Me<ge.BLOCK_SIZE;Me++){const Ie=e[Oe+Me]&255;H+=Ie,Ie<X&&(X=Ie),Ie>Z&&(Z=Ie)}if(Z-X>ge.MIN_DYNAMIC_RANGE)for(de++,Oe+=l;de<ge.BLOCK_SIZE;de++,Oe+=l)for(let Me=0;Me<ge.BLOCK_SIZE;Me++)H+=e[Oe+Me]&255}let te=H>>ge.BLOCK_SIZE_POWER*2;if(Z-X<=ge.MIN_DYNAMIC_RANGE&&(te=X/2,C>0&&P>0)){const de=(m[C-1][P]+2*m[C][P-1]+m[C-1][P-1])/4;X<de&&(te=de)}m[C][P]=te}}return m}}ge.BLOCK_SIZE_POWER=3,ge.BLOCK_SIZE=1<<ge.BLOCK_SIZE_POWER,ge.BLOCK_SIZE_MASK=ge.BLOCK_SIZE-1,ge.MINIMUM_DIMENSION=ge.BLOCK_SIZE*5,ge.MIN_DYNAMIC_RANGE=24;class me{constructor(e,n){this.width=e,this.height=n}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,n,i,l){throw new Re("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Re("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Re("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let n=new Le;for(let i=0;i<this.height;i++){const l=this.getRow(i,e);for(let c=0;c<this.width;c++){const u=l[c]&255;let h;u<64?h="#":u<128?h="+":u<192?h=".":h=" ",n.append(h)}n.append(`
`)}return n.toString()}}class ze extends me{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,n){const i=this.delegate.getRow(e,n),l=this.getWidth();for(let c=0;c<l;c++)i[c]=255-(i[c]&255);return i}getMatrix(){const e=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n);for(let l=0;l<n;l++)i[l]=255-(e[l]&255);return i}isCropSupported(){return this.delegate.isCropSupported()}crop(e,n,i,l){return new ze(this.delegate.crop(e,n,i,l))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ze(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ze(this.delegate.rotateCounterClockwise45())}}class ce extends me{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=ce.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const n=e.getContext("2d").getImageData(0,0,e.width,e.height);return ce.toGrayscaleBuffer(n.data,e.width,e.height)}static toGrayscaleBuffer(e,n,i){const l=new Uint8ClampedArray(n*i);for(let c=0,u=0,h=e.length;c<h;c+=4,u++){let m;if(e[c+3]===0)m=255;else{const _=e[c],P=e[c+1],D=e[c+2];m=306*_+601*P+117*D+512>>10}l[u]=m}return l}getRow(e,n){if(e<0||e>=this.getHeight())throw new I("Requested row is outside the image: "+e);const i=this.getWidth(),l=e*i;return n===null?n=this.buffer.slice(l,l+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(l,l+i))),n}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,n,i,l){return super.crop(e,n,i,l),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const n=this.getTempCanvasElement(),i=n.getContext("2d"),l=e*ce.DEGREE_TO_RADIANS,c=this.canvas.width,u=this.canvas.height,h=Math.ceil(Math.abs(Math.cos(l))*c+Math.abs(Math.sin(l))*u),m=Math.ceil(Math.abs(Math.sin(l))*c+Math.abs(Math.cos(l))*u);return n.width=h,n.height=m,i.translate(h/2,m/2),i.rotate(l),i.drawImage(this.canvas,c/-2,u/-2),this.buffer=ce.makeBufferFromCanvasImageData(n),this}invert(){return new ze(this)}}ce.DEGREE_TO_RADIANS=Math.PI/180;class W{constructor(e,n,i){this.deviceId=e,this.label=n,this.kind="videoinput",this.groupId=i||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Y=(globalThis||Jl||self||window||void 0)&&(globalThis||Jl||self||window||void 0).__awaiter||function(k,e,n,i){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(_){try{C(i.next(_))}catch(P){u(P)}}function m(_){try{C(i.throw(_))}catch(P){u(P)}}function C(_){_.done?c(_.value):l(_.value).then(h,m)}C((i=i.apply(k,e||[])).next())})};class pe{constructor(e,n=500,i){this.reader=e,this.timeBetweenScansMillis=n,this._hints=i,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return Y(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),n=[];for(const i of e){const l=i.kind==="video"?"videoinput":i.kind;if(l!=="videoinput")continue;const c=i.deviceId||i.id,u=i.label||`Video device ${n.length+1}`,h=i.groupId,m={deviceId:c,label:u,kind:l,groupId:h};n.push(m)}return n})}getVideoInputDevices(){return Y(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(n=>new W(n.deviceId,n.label))})}findDeviceById(e){return Y(this,void 0,void 0,function*(){const n=yield this.listVideoInputDevices();return n?n.find(i=>i.deviceId===e):null})}decodeFromInputVideoDevice(e,n){return Y(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,n)})}decodeOnceFromVideoDevice(e,n){return Y(this,void 0,void 0,function*(){this.reset();let i;e?i={deviceId:{exact:e}}:i={facingMode:"environment"};const l={video:i};return yield this.decodeOnceFromConstraints(l,n)})}decodeOnceFromConstraints(e,n){return Y(this,void 0,void 0,function*(){const i=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(i,n)})}decodeOnceFromStream(e,n){return Y(this,void 0,void 0,function*(){this.reset();const i=yield this.attachStreamToVideo(e,n);return yield this.decodeOnce(i)})}decodeFromInputVideoDeviceContinuously(e,n,i){return Y(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,n,i)})}decodeFromVideoDevice(e,n,i){return Y(this,void 0,void 0,function*(){let l;e?l={deviceId:{exact:e}}:l={facingMode:"environment"};const c={video:l};return yield this.decodeFromConstraints(c,n,i)})}decodeFromConstraints(e,n,i){return Y(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(l,n,i)})}decodeFromStream(e,n,i){return Y(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(e,n);return yield this.decodeContinuously(l,i)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,n){return Y(this,void 0,void 0,function*(){const i=this.prepareVideoElement(n);return this.addVideoSource(i,e),this.videoElement=i,this.stream=e,yield this.playVideoOnLoadAsync(i),i})}playVideoOnLoadAsync(e){return new Promise((n,i)=>this.playVideoOnLoad(e,()=>n()))}playVideoOnLoad(e,n){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",n),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return Y(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,n){const i=document.getElementById(e);if(!i)throw new S(`element with id '${e}' not found`);if(i.nodeName.toLowerCase()!==n.toLowerCase())throw new S(`element with id '${e}' must be an ${n} element`);return i}decodeFromImage(e,n){if(!e&&!n)throw new S("either imageElement with a src set or an url must be provided");return n&&!e?this.decodeFromImageUrl(n):this.decodeFromImageElement(e)}decodeFromVideo(e,n){if(!e&&!n)throw new S("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,n,i){if(e===void 0&&n===void 0)throw new S("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrlContinuously(n,i):this.decodeFromVideoElementContinuously(e,i)}decodeFromImageElement(e){if(!e)throw new S("An image element must be provided.");this.reset();const n=this.prepareImageElement(e);this.imageElement=n;let i;return this.isImageLoaded(n)?i=this.decodeOnce(n,!1,!0):i=this._decodeOnLoadImage(n),i}decodeFromVideoElement(e){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(n)}decodeFromVideoElementContinuously(e,n){const i=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(i,n)}_decodeFromVideoElementSetup(e){if(!e)throw new S("A video element must be provided.");this.reset();const n=this.prepareVideoElement(e);return this.videoElement=n,n}decodeFromImageUrl(e){if(!e)throw new S("An URL must be provided.");this.reset();const n=this.prepareImageElement();this.imageElement=n;const i=this._decodeOnLoadImage(n);return n.src=e,i}decodeFromVideoUrl(e){if(!e)throw new S("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),i=this.decodeFromVideoElement(n);return n.src=e,i}decodeFromVideoUrlContinuously(e,n){if(!e)throw new S("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),l=this.decodeFromVideoElementContinuously(i,n);return i.src=e,l}_decodeOnLoadImage(e){return new Promise((n,i)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(n,i),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return Y(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,n){return Y(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,n)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let n;return typeof e>"u"&&(n=document.createElement("img"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(n=e),n}prepareVideoElement(e){let n;return!e&&typeof document<"u"&&(n=document.createElement("video"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(n=e),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n}decodeOnce(e,n=!0,i=!0){this._stopAsyncDecode=!1;const l=(c,u)=>{if(this._stopAsyncDecode){u(new Q("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const h=this.decode(e);c(h)}catch(h){const m=n&&h instanceof Q,_=(h instanceof M||h instanceof q)&&i;if(m||_)return setTimeout(l,this._timeBetweenDecodingAttempts,c,u);u(h)}};return new Promise((c,u)=>l(c,u))}decodeContinuously(e,n){this._stopContinuousDecode=!1;const i=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const l=this.decode(e);n(l,null),setTimeout(i,this.timeBetweenScansMillis)}catch(l){n(null,l);const c=l instanceof M||l instanceof q,u=l instanceof Q;(c||u)&&setTimeout(i,this._timeBetweenDecodingAttempts)}};i()}decode(e){const n=this.createBinaryBitmap(e);return this.decodeBitmap(n)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,n,i){n||(n={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),i||(i=this.captureCanvasContext),i.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}drawImageOnCanvas(e,n,i=this.captureCanvasContext){n||(n={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),i||(i=this.captureCanvasContext),i.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const n=this.getCaptureCanvas(e),i=new ce(n),l=new ge(i);return new R(l)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const i=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=i}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const n=this.createCaptureCanvas(e);this.captureCanvas=n}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const n=document.createElement("canvas");let i,l;return typeof e<"u"&&(e instanceof HTMLVideoElement?(i=e.videoWidth,l=e.videoHeight):e instanceof HTMLImageElement&&(i=e.naturalWidth||e.width,l=e.naturalHeight||e.height)),n.style.width=i+"px",n.style.height=l+"px",n.width=i,n.height=l,n}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,n){try{e.srcObject=n}catch{e.src=URL.createObjectURL(n)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class ve{constructor(e,n,i=n==null?0:8*n.length,l,c,u=B.currentTimeMillis()){this.text=e,this.rawBytes=n,this.numBits=i,this.resultPoints=l,this.format=c,this.timestamp=u,this.text=e,this.rawBytes=n,i==null?this.numBits=n==null?0:8*n.length:this.numBits=i,this.resultPoints=l,this.format=c,this.resultMetadata=null,u==null?this.timestamp=B.currentTimeMillis():this.timestamp=u}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,n){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,n)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const n=this.resultPoints;if(n===null)this.resultPoints=e;else if(e!==null&&e.length>0){const i=new Array(n.length+e.length);B.arraycopy(n,0,i,0,n.length),B.arraycopy(e,0,i,n.length,e.length),this.resultPoints=i}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Ee;(function(k){k[k.AZTEC=0]="AZTEC",k[k.CODABAR=1]="CODABAR",k[k.CODE_39=2]="CODE_39",k[k.CODE_93=3]="CODE_93",k[k.CODE_128=4]="CODE_128",k[k.DATA_MATRIX=5]="DATA_MATRIX",k[k.EAN_8=6]="EAN_8",k[k.EAN_13=7]="EAN_13",k[k.ITF=8]="ITF",k[k.MAXICODE=9]="MAXICODE",k[k.PDF_417=10]="PDF_417",k[k.QR_CODE=11]="QR_CODE",k[k.RSS_14=12]="RSS_14",k[k.RSS_EXPANDED=13]="RSS_EXPANDED",k[k.UPC_A=14]="UPC_A",k[k.UPC_E=15]="UPC_E",k[k.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ee||(Ee={}));var ie=Ee,be;(function(k){k[k.OTHER=0]="OTHER",k[k.ORIENTATION=1]="ORIENTATION",k[k.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",k[k.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",k[k.ISSUE_NUMBER=4]="ISSUE_NUMBER",k[k.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",k[k.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",k[k.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",k[k.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",k[k.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",k[k.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(be||(be={}));var Ae=be;class Ve{constructor(e,n,i,l,c=-1,u=-1){this.rawBytes=e,this.text=n,this.byteSegments=i,this.ecLevel=l,this.structuredAppendSequenceNumber=c,this.structuredAppendParity=u,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class De{exp(e){return this.expTable[e]}log(e){if(e===0)throw new I;return this.logTable[e]}static addOrSubtract(e,n){return e^n}}class tt{constructor(e,n){if(n.length===0)throw new I;this.field=e;const i=n.length;if(i>1&&n[0]===0){let l=1;for(;l<i&&n[l]===0;)l++;l===i?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(i-l),B.arraycopy(n,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const n=this.coefficients;let i;if(e===1){i=0;for(let u=0,h=n.length;u!==h;u++){const m=n[u];i=De.addOrSubtract(i,m)}return i}i=n[0];const l=n.length,c=this.field;for(let u=1;u<l;u++)i=De.addOrSubtract(c.multiply(e,i),n[u]);return i}addOrSubtract(e){if(!this.field.equals(e.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,i=e.coefficients;if(n.length>i.length){const u=n;n=i,i=u}let l=new Int32Array(i.length);const c=i.length-n.length;B.arraycopy(i,0,l,0,c);for(let u=c;u<i.length;u++)l[u]=De.addOrSubtract(n[u-c],i[u]);return new tt(this.field,l)}multiply(e){if(!this.field.equals(e.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const n=this.coefficients,i=n.length,l=e.coefficients,c=l.length,u=new Int32Array(i+c-1),h=this.field;for(let m=0;m<i;m++){const C=n[m];for(let _=0;_<c;_++)u[m+_]=De.addOrSubtract(u[m+_],h.multiply(C,l[_]))}return new tt(h,u)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const n=this.coefficients.length,i=this.field,l=new Int32Array(n),c=this.coefficients;for(let u=0;u<n;u++)l[u]=i.multiply(c[u],e);return new tt(i,l)}multiplyByMonomial(e,n){if(e<0)throw new I;if(n===0)return this.field.getZero();const i=this.coefficients,l=i.length,c=new Int32Array(l+e),u=this.field;for(let h=0;h<l;h++)c[h]=u.multiply(i[h],n);return new tt(u,c)}divide(e){if(!this.field.equals(e.field))throw new I("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new I("Divide by 0");const n=this.field;let i=n.getZero(),l=this;const c=e.getCoefficient(e.getDegree()),u=n.inverse(c);for(;l.getDegree()>=e.getDegree()&&!l.isZero();){const h=l.getDegree()-e.getDegree(),m=n.multiply(l.getCoefficient(l.getDegree()),u),C=e.multiplyByMonomial(h,m),_=n.buildMonomial(h,m);i=i.addOrSubtract(_),l=l.addOrSubtract(C)}return[i,l]}toString(){let e="";for(let n=this.getDegree();n>=0;n--){let i=this.getCoefficient(n);if(i!==0){if(i<0?(e+=" - ",i=-i):e.length>0&&(e+=" + "),n===0||i!==1){const l=this.field.log(i);l===0?e+="1":l===1?e+="a":(e+="a^",e+=l)}n!==0&&(n===1?e+="x":(e+="x^",e+=n))}}return e}}class ue extends E{}ue.kind="ArithmeticException";class ye extends De{constructor(e,n,i){super(),this.primitive=e,this.size=n,this.generatorBase=i;const l=new Int32Array(n);let c=1;for(let h=0;h<n;h++)l[h]=c,c*=2,c>=n&&(c^=e,c&=n-1);this.expTable=l;const u=new Int32Array(n);for(let h=0;h<n-1;h++)u[l[h]]=h;this.logTable=u,this.zero=new tt(this,Int32Array.from([0])),this.one=new tt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new I;if(n===0)return this.zero;const i=new Int32Array(e+1);return i[0]=n,new tt(this,i)}inverse(e){if(e===0)throw new ue;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+V.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}ye.AZTEC_DATA_12=new ye(4201,4096,1),ye.AZTEC_DATA_10=new ye(1033,1024,1),ye.AZTEC_DATA_6=new ye(67,64,1),ye.AZTEC_PARAM=new ye(19,16,1),ye.QR_CODE_FIELD_256=new ye(285,256,0),ye.DATA_MATRIX_FIELD_256=new ye(301,256,1),ye.AZTEC_DATA_8=ye.DATA_MATRIX_FIELD_256,ye.MAXICODE_FIELD_64=ye.AZTEC_DATA_6;class Xe extends E{}Xe.kind="ReedSolomonException";class ht extends E{}ht.kind="IllegalStateException";class Pt{constructor(e){this.field=e}decode(e,n){const i=this.field,l=new tt(i,e),c=new Int32Array(n);let u=!0;for(let H=0;H<n;H++){const X=l.evaluateAt(i.exp(H+i.getGeneratorBase()));c[c.length-1-H]=X,X!==0&&(u=!1)}if(u)return;const h=new tt(i,c),m=this.runEuclideanAlgorithm(i.buildMonomial(n,1),h,n),C=m[0],_=m[1],P=this.findErrorLocations(C),D=this.findErrorMagnitudes(_,P);for(let H=0;H<P.length;H++){const X=e.length-1-i.log(P[H]);if(X<0)throw new Xe("Bad error location");e[X]=ye.addOrSubtract(e[X],D[H])}}runEuclideanAlgorithm(e,n,i){if(e.getDegree()<n.getDegree()){const H=e;e=n,n=H}const l=this.field;let c=e,u=n,h=l.getZero(),m=l.getOne();for(;u.getDegree()>=(i/2|0);){let H=c,X=h;if(c=u,h=m,c.isZero())throw new Xe("r_{i-1} was zero");u=H;let Z=l.getZero();const te=c.getCoefficient(c.getDegree()),de=l.inverse(te);for(;u.getDegree()>=c.getDegree()&&!u.isZero();){const Oe=u.getDegree()-c.getDegree(),Me=l.multiply(u.getCoefficient(u.getDegree()),de);Z=Z.addOrSubtract(l.buildMonomial(Oe,Me)),u=u.addOrSubtract(c.multiplyByMonomial(Oe,Me))}if(m=Z.multiply(h).addOrSubtract(X),u.getDegree()>=c.getDegree())throw new ht("Division algorithm failed to reduce polynomial?")}const C=m.getCoefficient(0);if(C===0)throw new Xe("sigmaTilde(0) was zero");const _=l.inverse(C),P=m.multiplyScalar(_),D=u.multiplyScalar(_);return[P,D]}findErrorLocations(e){const n=e.getDegree();if(n===1)return Int32Array.from([e.getCoefficient(1)]);const i=new Int32Array(n);let l=0;const c=this.field;for(let u=1;u<c.getSize()&&l<n;u++)e.evaluateAt(u)===0&&(i[l]=c.inverse(u),l++);if(l!==n)throw new Xe("Error locator degree does not match number of roots");return i}findErrorMagnitudes(e,n){const i=n.length,l=new Int32Array(i),c=this.field;for(let u=0;u<i;u++){const h=c.inverse(n[u]);let m=1;for(let C=0;C<i;C++)if(u!==C){const _=c.multiply(n[C],h),P=_&1?_&-2:_|1;m=c.multiply(m,P)}l[u]=c.multiply(e.evaluateAt(h),c.inverse(m)),c.getGeneratorBase()!==0&&(l[u]=c.multiply(l[u],h))}return l}}var xt;(function(k){k[k.UPPER=0]="UPPER",k[k.LOWER=1]="LOWER",k[k.MIXED=2]="MIXED",k[k.DIGIT=3]="DIGIT",k[k.PUNCT=4]="PUNCT",k[k.BINARY=5]="BINARY"})(xt||(xt={}));class Je{decode(e){this.ddata=e;let n=e.getBits(),i=this.extractBits(n),l=this.correctBits(i),c=Je.convertBoolArrayToByteArray(l),u=Je.getEncodedData(l),h=new Ve(c,u,null,null);return h.setNumBits(l.length),h}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let n=e.length,i=xt.UPPER,l=xt.UPPER,c="",u=0;for(;u<n;)if(l===xt.BINARY){if(n-u<5)break;let h=Je.readCode(e,u,5);if(u+=5,h===0){if(n-u<11)break;h=Je.readCode(e,u,11)+31,u+=11}for(let m=0;m<h;m++){if(n-u<8){u=n;break}const C=Je.readCode(e,u,8);c+=Ne.castAsNonUtf8Char(C),u+=8}l=i}else{let h=l===xt.DIGIT?4:5;if(n-u<h)break;let m=Je.readCode(e,u,h);u+=h;let C=Je.getCharacter(l,m);C.startsWith("CTRL_")?(i=l,l=Je.getTable(C.charAt(5)),C.charAt(6)==="L"&&(i=l)):(c+=C,l=i)}return c}static getTable(e){switch(e){case"L":return xt.LOWER;case"P":return xt.PUNCT;case"M":return xt.MIXED;case"D":return xt.DIGIT;case"B":return xt.BINARY;case"U":default:return xt.UPPER}}static getCharacter(e,n){switch(e){case xt.UPPER:return Je.UPPER_TABLE[n];case xt.LOWER:return Je.LOWER_TABLE[n];case xt.MIXED:return Je.MIXED_TABLE[n];case xt.PUNCT:return Je.PUNCT_TABLE[n];case xt.DIGIT:return Je.DIGIT_TABLE[n];default:throw new ht("Bad table")}}correctBits(e){let n,i;this.ddata.getNbLayers()<=2?(i=6,n=ye.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(i=8,n=ye.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(i=10,n=ye.AZTEC_DATA_10):(i=12,n=ye.AZTEC_DATA_12);let l=this.ddata.getNbDatablocks(),c=e.length/i;if(c<l)throw new q;let u=e.length%i,h=new Int32Array(c);for(let D=0;D<c;D++,u+=i)h[D]=Je.readCode(e,u,i);try{new Pt(n).decode(h,c-l)}catch(D){throw new q(D)}let m=(1<<i)-1,C=0;for(let D=0;D<l;D++){let H=h[D];if(H===0||H===m)throw new q;(H===1||H===m-1)&&C++}let _=new Array(l*i-C),P=0;for(let D=0;D<l;D++){let H=h[D];if(H===1||H===m-1)_.fill(H>1,P,P+i-1),P+=i-1;else for(let X=i-1;X>=0;--X)_[P++]=(H&1<<X)!==0}return _}extractBits(e){let n=this.ddata.isCompact(),i=this.ddata.getNbLayers(),l=(n?11:14)+i*4,c=new Int32Array(l),u=new Array(this.totalBitsInLayer(i,n));if(n)for(let h=0;h<c.length;h++)c[h]=h;else{let h=l+1+2*V.truncDivision(V.truncDivision(l,2)-1,15),m=l/2,C=V.truncDivision(h,2);for(let _=0;_<m;_++){let P=_+V.truncDivision(_,15);c[m-_-1]=C-P-1,c[m+_]=C+P+1}}for(let h=0,m=0;h<i;h++){let C=(i-h)*4+(n?9:12),_=h*2,P=l-1-_;for(let D=0;D<C;D++){let H=D*2;for(let X=0;X<2;X++)u[m+H+X]=e.get(c[_+X],c[_+D]),u[m+2*C+H+X]=e.get(c[_+D],c[P-X]),u[m+4*C+H+X]=e.get(c[P-X],c[P-D]),u[m+6*C+H+X]=e.get(c[P-D],c[_+X])}m+=C*8}return u}static readCode(e,n,i){let l=0;for(let c=n;c<n+i;c++)l<<=1,e[c]&&(l|=1);return l}static readByte(e,n){let i=e.length-n;return i>=8?Je.readCode(e,n,8):Je.readCode(e,n,i)<<8-i}static convertBoolArrayToByteArray(e){let n=new Uint8Array((e.length+7)/8);for(let i=0;i<n.length;i++)n[i]=Je.readByte(e,8*i);return n}totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}Je.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Je.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Je.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Je.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Je.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class nt{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,n,i,l){const c=e-i,u=n-l;return Math.sqrt(c*c+u*u)}static sum(e){let n=0;for(let i=0,l=e.length;i!==l;i++){const c=e[i];n+=c}return n}}class Nt{static floatToIntBits(e){return e}}Nt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Pe{constructor(e,n){this.x=e,this.y=n}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof Pe){const n=e;return this.x===n.x&&this.y===n.y}return!1}hashCode(){return 31*Nt.floatToIntBits(this.x)+Nt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const n=this.distance(e[0],e[1]),i=this.distance(e[1],e[2]),l=this.distance(e[0],e[2]);let c,u,h;if(i>=n&&i>=l?(u=e[0],c=e[1],h=e[2]):l>=i&&l>=n?(u=e[1],c=e[0],h=e[2]):(u=e[2],c=e[0],h=e[1]),this.crossProductZ(c,u,h)<0){const m=c;c=h,h=m}e[0]=c,e[1]=u,e[2]=h}static distance(e,n){return nt.distance(e.x,e.y,n.x,n.y)}static crossProductZ(e,n,i){const l=n.x,c=n.y;return(i.x-l)*(e.y-c)-(i.y-c)*(e.x-l)}}class yn{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class Ct extends yn{constructor(e,n,i,l,c){super(e,n),this.compact=i,this.nbDatablocks=l,this.nbLayers=c}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class we{constructor(e,n,i,l){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),n==null&&(n=we.INIT_SIZE),i==null&&(i=e.getWidth()/2|0),l==null&&(l=e.getHeight()/2|0);const c=n/2|0;if(this.leftInit=i-c,this.rightInit=i+c,this.upInit=l-c,this.downInit=l+c,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Q}detect(){let e=this.leftInit,n=this.rightInit,i=this.upInit,l=this.downInit,c=!1,u=!0,h=!1,m=!1,C=!1,_=!1,P=!1;const D=this.width,H=this.height;for(;u;){u=!1;let X=!0;for(;(X||!m)&&n<D;)X=this.containsBlackPoint(i,l,n,!1),X?(n++,u=!0,m=!0):m||n++;if(n>=D){c=!0;break}let Z=!0;for(;(Z||!C)&&l<H;)Z=this.containsBlackPoint(e,n,l,!0),Z?(l++,u=!0,C=!0):C||l++;if(l>=H){c=!0;break}let te=!0;for(;(te||!_)&&e>=0;)te=this.containsBlackPoint(i,l,e,!1),te?(e--,u=!0,_=!0):_||e--;if(e<0){c=!0;break}let de=!0;for(;(de||!P)&&i>=0;)de=this.containsBlackPoint(e,n,i,!0),de?(i--,u=!0,P=!0):P||i--;if(i<0){c=!0;break}u&&(h=!0)}if(!c&&h){const X=n-e;let Z=null;for(let Me=1;Z===null&&Me<X;Me++)Z=this.getBlackPointOnSegment(e,l-Me,e+Me,l);if(Z==null)throw new Q;let te=null;for(let Me=1;te===null&&Me<X;Me++)te=this.getBlackPointOnSegment(e,i+Me,e+Me,i);if(te==null)throw new Q;let de=null;for(let Me=1;de===null&&Me<X;Me++)de=this.getBlackPointOnSegment(n,i+Me,n-Me,i);if(de==null)throw new Q;let Oe=null;for(let Me=1;Oe===null&&Me<X;Me++)Oe=this.getBlackPointOnSegment(n,l-Me,n-Me,l);if(Oe==null)throw new Q;return this.centerEdges(Oe,Z,de,te)}else throw new Q}getBlackPointOnSegment(e,n,i,l){const c=nt.round(nt.distance(e,n,i,l)),u=(i-e)/c,h=(l-n)/c,m=this.image;for(let C=0;C<c;C++){const _=nt.round(e+C*u),P=nt.round(n+C*h);if(m.get(_,P))return new Pe(_,P)}return null}centerEdges(e,n,i,l){const c=e.getX(),u=e.getY(),h=n.getX(),m=n.getY(),C=i.getX(),_=i.getY(),P=l.getX(),D=l.getY(),H=we.CORR;return c<this.width/2?[new Pe(P-H,D+H),new Pe(h+H,m+H),new Pe(C-H,_-H),new Pe(c+H,u-H)]:[new Pe(P+H,D+H),new Pe(h+H,m-H),new Pe(C-H,_+H),new Pe(c-H,u-H)]}containsBlackPoint(e,n,i,l){const c=this.image;if(l){for(let u=e;u<=n;u++)if(c.get(u,i))return!0}else for(let u=e;u<=n;u++)if(c.get(i,u))return!0;return!1}}we.INIT_SIZE=10,we.CORR=1;class He{static checkAndNudgePoints(e,n){const i=e.getWidth(),l=e.getHeight();let c=!0;for(let u=0;u<n.length&&c;u+=2){const h=Math.floor(n[u]),m=Math.floor(n[u+1]);if(h<-1||h>i||m<-1||m>l)throw new Q;c=!1,h===-1?(n[u]=0,c=!0):h===i&&(n[u]=i-1,c=!0),m===-1?(n[u+1]=0,c=!0):m===l&&(n[u+1]=l-1,c=!0)}c=!0;for(let u=n.length-2;u>=0&&c;u-=2){const h=Math.floor(n[u]),m=Math.floor(n[u+1]);if(h<-1||h>i||m<-1||m>l)throw new Q;c=!1,h===-1?(n[u]=0,c=!0):h===i&&(n[u]=i-1,c=!0),m===-1?(n[u+1]=0,c=!0):m===l&&(n[u+1]=l-1,c=!0)}}}class qe{constructor(e,n,i,l,c,u,h,m,C){this.a11=e,this.a21=n,this.a31=i,this.a12=l,this.a22=c,this.a32=u,this.a13=h,this.a23=m,this.a33=C}static quadrilateralToQuadrilateral(e,n,i,l,c,u,h,m,C,_,P,D,H,X,Z,te){const de=qe.quadrilateralToSquare(e,n,i,l,c,u,h,m);return qe.squareToQuadrilateral(C,_,P,D,H,X,Z,te).times(de)}transformPoints(e){const n=e.length,i=this.a11,l=this.a12,c=this.a13,u=this.a21,h=this.a22,m=this.a23,C=this.a31,_=this.a32,P=this.a33;for(let D=0;D<n;D+=2){const H=e[D],X=e[D+1],Z=c*H+m*X+P;e[D]=(i*H+u*X+C)/Z,e[D+1]=(l*H+h*X+_)/Z}}transformPointsWithValues(e,n){const i=this.a11,l=this.a12,c=this.a13,u=this.a21,h=this.a22,m=this.a23,C=this.a31,_=this.a32,P=this.a33,D=e.length;for(let H=0;H<D;H++){const X=e[H],Z=n[H],te=c*X+m*Z+P;e[H]=(i*X+u*Z+C)/te,n[H]=(l*X+h*Z+_)/te}}static squareToQuadrilateral(e,n,i,l,c,u,h,m){const C=e-i+c-h,_=n-l+u-m;if(C===0&&_===0)return new qe(i-e,c-i,e,l-n,u-l,n,0,0,1);{const P=i-c,D=h-c,H=l-u,X=m-u,Z=P*X-D*H,te=(C*X-D*_)/Z,de=(P*_-C*H)/Z;return new qe(i-e+te*i,h-e+de*h,e,l-n+te*l,m-n+de*m,n,te,de,1)}}static quadrilateralToSquare(e,n,i,l,c,u,h,m){return qe.squareToQuadrilateral(e,n,i,l,c,u,h,m).buildAdjoint()}buildAdjoint(){return new qe(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new qe(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class ut extends He{sampleGrid(e,n,i,l,c,u,h,m,C,_,P,D,H,X,Z,te,de,Oe,Me){const Ie=qe.quadrilateralToQuadrilateral(l,c,u,h,m,C,_,P,D,H,X,Z,te,de,Oe,Me);return this.sampleGridWithTransform(e,n,i,Ie)}sampleGridWithTransform(e,n,i,l){if(n<=0||i<=0)throw new Q;const c=new Se(n,i),u=new Float32Array(2*n);for(let h=0;h<i;h++){const m=u.length,C=h+.5;for(let _=0;_<m;_+=2)u[_]=_/2+.5,u[_+1]=C;l.transformPoints(u),He.checkAndNudgePoints(e,u);try{for(let _=0;_<m;_+=2)e.get(Math.floor(u[_]),Math.floor(u[_+1]))&&c.set(_/2,h)}catch{throw new Q}}return c}}class Ge{static setGridSampler(e){Ge.gridSampler=e}static getInstance(){return Ge.gridSampler}}Ge.gridSampler=new ut;class At{constructor(e,n){this.x=e,this.y=n}toResultPoint(){return new Pe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Wt{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let n=this.getMatrixCenter(),i=this.getBullsEyeCorners(n);if(e){let u=i[0];i[0]=i[2],i[2]=u}this.extractParameters(i);let l=this.sampleGrid(this.image,i[this.shift%4],i[(this.shift+1)%4],i[(this.shift+2)%4],i[(this.shift+3)%4]),c=this.getMatrixCornerPoints(i);return new Ct(l,c,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new Q;let n=2*this.nbCenterLayers,i=new Int32Array([this.sampleLine(e[0],e[1],n),this.sampleLine(e[1],e[2],n),this.sampleLine(e[2],e[3],n),this.sampleLine(e[3],e[0],n)]);this.shift=this.getRotation(i,n);let l=0;for(let u=0;u<4;u++){let h=i[(this.shift+u)%4];this.compact?(l<<=7,l+=h>>1&127):(l<<=10,l+=(h>>2&992)+(h>>1&31))}let c=this.getCorrectedParameterData(l,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)}getRotation(e,n){let i=0;e.forEach((l,c,u)=>{let h=(l>>n-2<<1)+(l&1);i=(i<<3)+h}),i=((i&1)<<11)+(i>>1);for(let l=0;l<4;l++)if(V.bitCount(i^this.EXPECTED_CORNER_BITS[l])<=2)return l;throw new Q}getCorrectedParameterData(e,n){let i,l;n?(i=7,l=2):(i=10,l=4);let c=i-l,u=new Int32Array(i);for(let m=i-1;m>=0;--m)u[m]=e&15,e>>=4;try{new Pt(ye.AZTEC_PARAM).decode(u,c)}catch{throw new Q}let h=0;for(let m=0;m<l;m++)h=(h<<4)+u[m];return h}getBullsEyeCorners(e){let n=e,i=e,l=e,c=e,u=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let P=this.getFirstDifferent(n,u,1,-1),D=this.getFirstDifferent(i,u,1,1),H=this.getFirstDifferent(l,u,-1,1),X=this.getFirstDifferent(c,u,-1,-1);if(this.nbCenterLayers>2){let Z=this.distancePoint(X,P)*this.nbCenterLayers/(this.distancePoint(c,n)*(this.nbCenterLayers+2));if(Z<.75||Z>1.25||!this.isWhiteOrBlackRectangle(P,D,H,X))break}n=P,i=D,l=H,c=X,u=!u}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Q;this.compact=this.nbCenterLayers===5;let h=new Pe(n.getX()+.5,n.getY()-.5),m=new Pe(i.getX()+.5,i.getY()+.5),C=new Pe(l.getX()-.5,l.getY()+.5),_=new Pe(c.getX()-.5,c.getY()-.5);return this.expandSquare([h,m,C,_],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,n,i,l;try{let h=new we(this.image).detect();e=h[0],n=h[1],i=h[2],l=h[3]}catch{let m=this.image.getWidth()/2,C=this.image.getHeight()/2;e=this.getFirstDifferent(new At(m+7,C-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new At(m+7,C+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new At(m-7,C+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new At(m-7,C-7),!1,-1,-1).toResultPoint()}let c=nt.round((e.getX()+l.getX()+n.getX()+i.getX())/4),u=nt.round((e.getY()+l.getY()+n.getY()+i.getY())/4);try{let h=new we(this.image,15,c,u).detect();e=h[0],n=h[1],i=h[2],l=h[3]}catch{e=this.getFirstDifferent(new At(c+7,u-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new At(c+7,u+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new At(c-7,u+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new At(c-7,u-7),!1,-1,-1).toResultPoint()}return c=nt.round((e.getX()+l.getX()+n.getX()+i.getX())/4),u=nt.round((e.getY()+l.getY()+n.getY()+i.getY())/4),new At(c,u)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,n,i,l,c){let u=Ge.getInstance(),h=this.getDimension(),m=h/2-this.nbCenterLayers,C=h/2+this.nbCenterLayers;return u.sampleGrid(e,h,h,m,m,C,m,C,C,m,C,n.getX(),n.getY(),i.getX(),i.getY(),l.getX(),l.getY(),c.getX(),c.getY())}sampleLine(e,n,i){let l=0,c=this.distanceResultPoint(e,n),u=c/i,h=e.getX(),m=e.getY(),C=u*(n.getX()-e.getX())/c,_=u*(n.getY()-e.getY())/c;for(let P=0;P<i;P++)this.image.get(nt.round(h+P*C),nt.round(m+P*_))&&(l|=1<<i-P-1);return l}isWhiteOrBlackRectangle(e,n,i,l){let c=3;e=new At(e.getX()-c,e.getY()+c),n=new At(n.getX()-c,n.getY()-c),i=new At(i.getX()+c,i.getY()-c),l=new At(l.getX()+c,l.getY()+c);let u=this.getColor(l,e);if(u===0)return!1;let h=this.getColor(e,n);return h!==u||(h=this.getColor(n,i),h!==u)?!1:(h=this.getColor(i,l),h===u)}getColor(e,n){let i=this.distancePoint(e,n),l=(n.getX()-e.getX())/i,c=(n.getY()-e.getY())/i,u=0,h=e.getX(),m=e.getY(),C=this.image.get(e.getX(),e.getY()),_=Math.ceil(i);for(let D=0;D<_;D++)h+=l,m+=c,this.image.get(nt.round(h),nt.round(m))!==C&&u++;let P=u/i;return P>.1&&P<.9?0:P<=.1===C?1:-1}getFirstDifferent(e,n,i,l){let c=e.getX()+i,u=e.getY()+l;for(;this.isValid(c,u)&&this.image.get(c,u)===n;)c+=i,u+=l;for(c-=i,u-=l;this.isValid(c,u)&&this.image.get(c,u)===n;)c+=i;for(c-=i;this.isValid(c,u)&&this.image.get(c,u)===n;)u+=l;return u-=l,new At(c,u)}expandSquare(e,n,i){let l=i/(2*n),c=e[0].getX()-e[2].getX(),u=e[0].getY()-e[2].getY(),h=(e[0].getX()+e[2].getX())/2,m=(e[0].getY()+e[2].getY())/2,C=new Pe(h+l*c,m+l*u),_=new Pe(h-l*c,m-l*u);c=e[1].getX()-e[3].getX(),u=e[1].getY()-e[3].getY(),h=(e[1].getX()+e[3].getX())/2,m=(e[1].getY()+e[3].getY())/2;let P=new Pe(h+l*c,m+l*u),D=new Pe(h-l*c,m-l*u);return[C,P,_,D]}isValid(e,n){return e>=0&&e<this.image.getWidth()&&n>0&&n<this.image.getHeight()}isValidPoint(e){let n=nt.round(e.getX()),i=nt.round(e.getY());return this.isValid(n,i)}distancePoint(e,n){return nt.distance(e.getX(),e.getY(),n.getX(),n.getY())}distanceResultPoint(e,n){return nt.distance(e.getX(),e.getY(),n.getX(),n.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(V.truncDivision(this.nbLayers-4,8)+1)+15}}class Ht{decode(e,n=null){let i=null,l=new Wt(e.getBlackMatrix()),c=null,u=null;try{let _=l.detectMirror(!1);c=_.getPoints(),this.reportFoundResultPoints(n,c),u=new Je().decode(_)}catch(_){i=_}if(u==null)try{let _=l.detectMirror(!0);c=_.getPoints(),this.reportFoundResultPoints(n,c),u=new Je().decode(_)}catch(_){throw i??_}let h=new ve(u.getText(),u.getRawBytes(),u.getNumBits(),c,ie.AZTEC,B.currentTimeMillis()),m=u.getByteSegments();m!=null&&h.putMetadata(Ae.BYTE_SEGMENTS,m);let C=u.getECLevel();return C!=null&&h.putMetadata(Ae.ERROR_CORRECTION_LEVEL,C),h}reportFoundResultPoints(e,n){if(e!=null){let i=e.get(ne.NEED_RESULT_POINT_CALLBACK);i!=null&&n.forEach((l,c,u)=>{i.foundPossibleResultPoint(l)})}}reset(){}}class Gt extends pe{constructor(e=500){super(new Ht,e)}}class Ue{decode(e,n){try{return this.doDecode(e,n)}catch{if(n&&n.get(ne.TRY_HARDER)===!0&&e.isRotateSupported()){const c=e.rotateCounterClockwise(),u=this.doDecode(c,n),h=u.getResultMetadata();let m=270;h!==null&&h.get(Ae.ORIENTATION)===!0&&(m=m+h.get(Ae.ORIENTATION)%360),u.putMetadata(Ae.ORIENTATION,m);const C=u.getResultPoints();if(C!==null){const _=c.getHeight();for(let P=0;P<C.length;P++)C[P]=new Pe(_-C[P].getY()-1,C[P].getX())}return u}else throw new Q}}reset(){}doDecode(e,n){const i=e.getWidth(),l=e.getHeight();let c=new ee(i);const u=n&&n.get(ne.TRY_HARDER)===!0,h=Math.max(1,l>>(u?8:5));let m;u?m=l:m=15;const C=Math.trunc(l/2);for(let _=0;_<m;_++){const P=Math.trunc((_+1)/2),D=(_&1)===0,H=C+h*(D?P:-P);if(H<0||H>=l)break;try{c=e.getBlackRow(H,c)}catch{continue}for(let X=0;X<2;X++){if(X===1&&(c.reverse(),n&&n.get(ne.NEED_RESULT_POINT_CALLBACK)===!0)){const Z=new Map;n.forEach((te,de)=>Z.set(de,te)),Z.delete(ne.NEED_RESULT_POINT_CALLBACK),n=Z}try{const Z=this.decodeRow(H,c,n);if(X===1){Z.putMetadata(Ae.ORIENTATION,180);const te=Z.getResultPoints();te!==null&&(te[0]=new Pe(i-te[0].getX()-1,te[0].getY()),te[1]=new Pe(i-te[1].getX()-1,te[1].getY()))}return Z}catch{}}}throw new Q}static recordPattern(e,n,i){const l=i.length;for(let C=0;C<l;C++)i[C]=0;const c=e.getSize();if(n>=c)throw new Q;let u=!e.get(n),h=0,m=n;for(;m<c;){if(e.get(m)!==u)i[h]++;else{if(++h===l)break;i[h]=1,u=!u}m++}if(!(h===l||h===l-1&&m===c))throw new Q}static recordPatternInReverse(e,n,i){let l=i.length,c=e.get(n);for(;n>0&&l>=0;)e.get(--n)!==c&&(l--,c=!c);if(l>=0)throw new Q;Ue.recordPattern(e,n+1,i)}static patternMatchVariance(e,n,i){const l=e.length;let c=0,u=0;for(let C=0;C<l;C++)c+=e[C],u+=n[C];if(c<u)return Number.POSITIVE_INFINITY;const h=c/u;i*=h;let m=0;for(let C=0;C<l;C++){const _=e[C],P=n[C]*h,D=_>P?_-P:P-_;if(D>i)return Number.POSITIVE_INFINITY;m+=D}return m/c}}class xe extends Ue{static findStartPattern(e){const n=e.getSize(),i=e.getNextSet(0);let l=0,c=Int32Array.from([0,0,0,0,0,0]),u=i,h=!1;const m=6;for(let C=i;C<n;C++)if(e.get(C)!==h)c[l]++;else{if(l===m-1){let _=xe.MAX_AVG_VARIANCE,P=-1;for(let D=xe.CODE_START_A;D<=xe.CODE_START_C;D++){const H=Ue.patternMatchVariance(c,xe.CODE_PATTERNS[D],xe.MAX_INDIVIDUAL_VARIANCE);H<_&&(_=H,P=D)}if(P>=0&&e.isRange(Math.max(0,u-(C-u)/2),u,!1))return Int32Array.from([u,C,P]);u+=c[0]+c[1],c=c.slice(2,c.length-1),c[l-1]=0,c[l]=0,l--}else l++;c[l]=1,h=!h}throw new Q}static decodeCode(e,n,i){Ue.recordPattern(e,i,n);let l=xe.MAX_AVG_VARIANCE,c=-1;for(let u=0;u<xe.CODE_PATTERNS.length;u++){const h=xe.CODE_PATTERNS[u],m=this.patternMatchVariance(n,h,xe.MAX_INDIVIDUAL_VARIANCE);m<l&&(l=m,c=u)}if(c>=0)return c;throw new Q}decodeRow(e,n,i){const l=i&&i.get(ne.ASSUME_GS1)===!0,c=xe.findStartPattern(n),u=c[2];let h=0;const m=new Uint8Array(20);m[h++]=u;let C;switch(u){case xe.CODE_START_A:C=xe.CODE_CODE_A;break;case xe.CODE_START_B:C=xe.CODE_CODE_B;break;case xe.CODE_START_C:C=xe.CODE_CODE_C;break;default:throw new q}let _=!1,P=!1,D="",H=c[0],X=c[1];const Z=Int32Array.from([0,0,0,0,0,0]);let te=0,de=0,Oe=u,Me=0,Ie=!0,_t=!1,vt=!1;for(;!_;){const Jr=P;switch(P=!1,te=de,de=xe.decodeCode(n,Z,X),m[h++]=de,de!==xe.CODE_STOP&&(Ie=!0),de!==xe.CODE_STOP&&(Me++,Oe+=Me*de),H=X,X+=Z.reduce((ns,ra)=>ns+ra,0),de){case xe.CODE_START_A:case xe.CODE_START_B:case xe.CODE_START_C:throw new q}switch(C){case xe.CODE_CODE_A:if(de<64)vt===_t?D+=String.fromCharCode(32+de):D+=String.fromCharCode(32+de+128),vt=!1;else if(de<96)vt===_t?D+=String.fromCharCode(de-64):D+=String.fromCharCode(de+64),vt=!1;else switch(de!==xe.CODE_STOP&&(Ie=!1),de){case xe.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case xe.CODE_FNC_2:case xe.CODE_FNC_3:break;case xe.CODE_FNC_4_A:!_t&&vt?(_t=!0,vt=!1):_t&&vt?(_t=!1,vt=!1):vt=!0;break;case xe.CODE_SHIFT:P=!0,C=xe.CODE_CODE_B;break;case xe.CODE_CODE_B:C=xe.CODE_CODE_B;break;case xe.CODE_CODE_C:C=xe.CODE_CODE_C;break;case xe.CODE_STOP:_=!0;break}break;case xe.CODE_CODE_B:if(de<96)vt===_t?D+=String.fromCharCode(32+de):D+=String.fromCharCode(32+de+128),vt=!1;else switch(de!==xe.CODE_STOP&&(Ie=!1),de){case xe.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case xe.CODE_FNC_2:case xe.CODE_FNC_3:break;case xe.CODE_FNC_4_B:!_t&&vt?(_t=!0,vt=!1):_t&&vt?(_t=!1,vt=!1):vt=!0;break;case xe.CODE_SHIFT:P=!0,C=xe.CODE_CODE_A;break;case xe.CODE_CODE_A:C=xe.CODE_CODE_A;break;case xe.CODE_CODE_C:C=xe.CODE_CODE_C;break;case xe.CODE_STOP:_=!0;break}break;case xe.CODE_CODE_C:if(de<100)de<10&&(D+="0"),D+=de;else switch(de!==xe.CODE_STOP&&(Ie=!1),de){case xe.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case xe.CODE_CODE_A:C=xe.CODE_CODE_A;break;case xe.CODE_CODE_B:C=xe.CODE_CODE_B;break;case xe.CODE_STOP:_=!0;break}break}Jr&&(C=C===xe.CODE_CODE_A?xe.CODE_CODE_B:xe.CODE_CODE_A)}const ir=X-H;if(X=n.getNextUnset(X),!n.isRange(X,Math.min(n.getSize(),X+(X-H)/2),!1))throw new Q;if(Oe-=Me*te,Oe%103!==te)throw new M;const Rr=D.length;if(Rr===0)throw new Q;Rr>0&&Ie&&(C===xe.CODE_CODE_C?D=D.substring(0,Rr-2):D=D.substring(0,Rr-1));const Cn=(c[1]+c[0])/2,Ut=H+ir/2,an=m.length,$n=new Uint8Array(an);for(let Jr=0;Jr<an;Jr++)$n[Jr]=m[Jr];const Ni=[new Pe(Cn,e),new Pe(Ut,e)];return new ve(D,$n,0,Ni,ie.CODE_128,new Date().getTime())}}xe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],xe.MAX_AVG_VARIANCE=.25,xe.MAX_INDIVIDUAL_VARIANCE=.7,xe.CODE_SHIFT=98,xe.CODE_CODE_C=99,xe.CODE_CODE_B=100,xe.CODE_CODE_A=101,xe.CODE_FNC_1=102,xe.CODE_FNC_2=97,xe.CODE_FNC_3=96,xe.CODE_FNC_4_A=101,xe.CODE_FNC_4_B=100,xe.CODE_START_A=103,xe.CODE_START_B=104,xe.CODE_START_C=105,xe.CODE_STOP=106;class gt extends Ue{constructor(e=!1,n=!1){super(),this.usingCheckDigit=e,this.extendedMode=n,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,n,i){let l=this.counters;l.fill(0),this.decodeRowResult="";let c=gt.findAsteriskPattern(n,l),u=n.getNextSet(c[1]),h=n.getSize(),m,C;do{gt.recordPattern(n,u,l);let Z=gt.toNarrowWidePattern(l);if(Z<0)throw new Q;m=gt.patternToChar(Z),this.decodeRowResult+=m,C=u;for(let te of l)u+=te;u=n.getNextSet(u)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let _=0;for(let Z of l)_+=Z;let P=u-C-_;if(u!==h&&P*2<_)throw new Q;if(this.usingCheckDigit){let Z=this.decodeRowResult.length-1,te=0;for(let de=0;de<Z;de++)te+=gt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(de));if(this.decodeRowResult.charAt(Z)!==gt.ALPHABET_STRING.charAt(te%43))throw new M;this.decodeRowResult=this.decodeRowResult.substring(0,Z)}if(this.decodeRowResult.length===0)throw new Q;let D;this.extendedMode?D=gt.decodeExtended(this.decodeRowResult):D=this.decodeRowResult;let H=(c[1]+c[0])/2,X=C+_/2;return new ve(D,null,0,[new Pe(H,e),new Pe(X,e)],ie.CODE_39,new Date().getTime())}static findAsteriskPattern(e,n){let i=e.getSize(),l=e.getNextSet(0),c=0,u=l,h=!1,m=n.length;for(let C=l;C<i;C++)if(e.get(C)!==h)n[c]++;else{if(c===m-1){if(this.toNarrowWidePattern(n)===gt.ASTERISK_ENCODING&&e.isRange(Math.max(0,u-Math.floor((C-u)/2)),u,!1))return[u,C];u+=n[0]+n[1],n.copyWithin(0,2,2+c-1),n[c-1]=0,n[c]=0,c--}else c++;n[c]=1,h=!h}throw new Q}static toNarrowWidePattern(e){let n=e.length,i=0,l;do{let c=2147483647;for(let m of e)m<c&&m>i&&(c=m);i=c,l=0;let u=0,h=0;for(let m=0;m<n;m++){let C=e[m];C>i&&(h|=1<<n-1-m,l++,u+=C)}if(l===3){for(let m=0;m<n&&l>0;m++){let C=e[m];if(C>i&&(l--,C*2>=u))return-1}return h}}while(l>3);return-1}static patternToChar(e){for(let n=0;n<gt.CHARACTER_ENCODINGS.length;n++)if(gt.CHARACTER_ENCODINGS[n]===e)return gt.ALPHABET_STRING.charAt(n);if(e===gt.ASTERISK_ENCODING)return"*";throw new Q}static decodeExtended(e){let n=e.length,i="";for(let l=0;l<n;l++){let c=e.charAt(l);if(c==="+"||c==="$"||c==="%"||c==="/"){let u=e.charAt(l+1),h="\0";switch(c){case"+":if(u>="A"&&u<="Z")h=String.fromCharCode(u.charCodeAt(0)+32);else throw new q;break;case"$":if(u>="A"&&u<="Z")h=String.fromCharCode(u.charCodeAt(0)-64);else throw new q;break;case"%":if(u>="A"&&u<="E")h=String.fromCharCode(u.charCodeAt(0)-38);else if(u>="F"&&u<="J")h=String.fromCharCode(u.charCodeAt(0)-11);else if(u>="K"&&u<="O")h=String.fromCharCode(u.charCodeAt(0)+16);else if(u>="P"&&u<="T")h=String.fromCharCode(u.charCodeAt(0)+43);else if(u==="U")h="\0";else if(u==="V")h="@";else if(u==="W")h="`";else if(u==="X"||u==="Y"||u==="Z")h="";else throw new q;break;case"/":if(u>="A"&&u<="O")h=String.fromCharCode(u.charCodeAt(0)-32);else if(u==="Z")h=":";else throw new q;break}i+=h,l++}else i+=c}return i}}gt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",gt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],gt.ASTERISK_ENCODING=148;class dt extends Ue{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,n,i){let l=this.decodeStart(n),c=this.decodeEnd(n),u=new Le;dt.decodeMiddle(n,l[1],c[0],u);let h=u.toString(),m=null;i!=null&&(m=i.get(ne.ALLOWED_LENGTHS)),m==null&&(m=dt.DEFAULT_ALLOWED_LENGTHS);let C=h.length,_=!1,P=0;for(let X of m){if(C===X){_=!0;break}X>P&&(P=X)}if(!_&&C>P&&(_=!0),!_)throw new q;const D=[new Pe(l[1],e),new Pe(c[0],e)];return new ve(h,null,0,D,ie.ITF,new Date().getTime())}static decodeMiddle(e,n,i,l){let c=new Int32Array(10),u=new Int32Array(5),h=new Int32Array(5);for(c.fill(0),u.fill(0),h.fill(0);n<i;){Ue.recordPattern(e,n,c);for(let C=0;C<5;C++){let _=2*C;u[C]=c[_],h[C]=c[_+1]}let m=dt.decodeDigit(u);l.append(m.toString()),m=this.decodeDigit(h),l.append(m.toString()),c.forEach(function(C){n+=C})}}decodeStart(e){let n=dt.skipWhiteSpace(e),i=dt.findGuardPattern(e,n,dt.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(e,i[0]),i}validateQuietZone(e,n){let i=this.narrowLineWidth*10;i=i<n?i:n;for(let l=n-1;i>0&&l>=0&&!e.get(l);l--)i--;if(i!==0)throw new Q}static skipWhiteSpace(e){const n=e.getSize(),i=e.getNextSet(0);if(i===n)throw new Q;return i}decodeEnd(e){e.reverse();try{let n=dt.skipWhiteSpace(e),i;try{i=dt.findGuardPattern(e,n,dt.END_PATTERN_REVERSED[0])}catch(c){c instanceof Q&&(i=dt.findGuardPattern(e,n,dt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,i[0]);let l=i[0];return i[0]=e.getSize()-i[1],i[1]=e.getSize()-l,i}finally{e.reverse()}}static findGuardPattern(e,n,i){let l=i.length,c=new Int32Array(l),u=e.getSize(),h=!1,m=0,C=n;c.fill(0);for(let _=n;_<u;_++)if(e.get(_)!==h)c[m]++;else{if(m===l-1){if(Ue.patternMatchVariance(c,i,dt.MAX_INDIVIDUAL_VARIANCE)<dt.MAX_AVG_VARIANCE)return[C,_];C+=c[0]+c[1],B.arraycopy(c,2,c,0,m-1),c[m-1]=0,c[m]=0,m--}else m++;c[m]=1,h=!h}throw new Q}static decodeDigit(e){let n=dt.MAX_AVG_VARIANCE,i=-1,l=dt.PATTERNS.length;for(let c=0;c<l;c++){let u=dt.PATTERNS[c],h=Ue.patternMatchVariance(e,u,dt.MAX_INDIVIDUAL_VARIANCE);h<n?(n=h,i=c):h===n&&(i=-1)}if(i>=0)return i%10;throw new Q}}dt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],dt.MAX_AVG_VARIANCE=.38,dt.MAX_INDIVIDUAL_VARIANCE=.5,dt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],dt.START_PATTERN=Int32Array.from([1,1,1,1]),dt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Dt extends Ue{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let n=!1,i,l=0,c=Int32Array.from([0,0,0]);for(;!n;){c=Int32Array.from([0,0,0]),i=Dt.findGuardPattern(e,l,!1,this.START_END_PATTERN,c);let u=i[0];l=i[1];let h=u-(l-u);h>=0&&(n=e.isRange(h,u,!1))}return i}static checkChecksum(e){return Dt.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let i=parseInt(e.charAt(n-1),10);return Dt.getStandardUPCEANChecksum(e.substring(0,n-1))===i}static getStandardUPCEANChecksum(e){let n=e.length,i=0;for(let l=n-1;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;i+=c}i*=3;for(let l=n-2;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;i+=c}return(1e3-i)%10}static decodeEnd(e,n){return Dt.findGuardPattern(e,n,!1,Dt.START_END_PATTERN,new Int32Array(Dt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,n,i,l){return this.findGuardPattern(e,n,i,l,new Int32Array(l.length))}static findGuardPattern(e,n,i,l,c){let u=e.getSize();n=i?e.getNextUnset(n):e.getNextSet(n);let h=0,m=n,C=l.length,_=i;for(let P=n;P<u;P++)if(e.get(P)!==_)c[h]++;else{if(h===C-1){if(Ue.patternMatchVariance(c,l,Dt.MAX_INDIVIDUAL_VARIANCE)<Dt.MAX_AVG_VARIANCE)return Int32Array.from([m,P]);m+=c[0]+c[1];let D=c.slice(2,c.length-1);for(let H=0;H<h-1;H++)c[H]=D[H];c[h-1]=0,c[h]=0,h--}else h++;c[h]=1,_=!_}throw new Q}static decodeDigit(e,n,i,l){this.recordPattern(e,i,n);let c=this.MAX_AVG_VARIANCE,u=-1,h=l.length;for(let m=0;m<h;m++){let C=l[m],_=Ue.patternMatchVariance(n,C,Dt.MAX_INDIVIDUAL_VARIANCE);_<c&&(c=_,u=m)}if(u>=0)return u;throw new Q}}Dt.MAX_AVG_VARIANCE=.48,Dt.MAX_INDIVIDUAL_VARIANCE=.7,Dt.START_END_PATTERN=Int32Array.from([1,1,1]),Dt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Dt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Dt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Dn{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,i){let l=this.decodeRowStringBuffer,c=this.decodeMiddle(n,i,l),u=l.toString(),h=Dn.parseExtensionString(u),m=[new Pe((i[0]+i[1])/2,e),new Pe(c,e)],C=new ve(u,null,0,m,ie.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&C.putAllMetadata(h),C}decodeMiddle(e,n,i){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u=n[1],h=0;for(let C=0;C<5&&u<c;C++){let _=Dt.decodeDigit(e,l,u,Dt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+_%10);for(let P of l)u+=P;_>=10&&(h|=1<<4-C),C!==4&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(i.length!==5)throw new Q;let m=this.determineCheckDigit(h);if(Dn.extensionChecksum(i.toString())!==m)throw new Q;return u}static extensionChecksum(e){let n=e.length,i=0;for(let l=n-2;l>=0;l-=2)i+=e.charAt(l).charCodeAt(0)-48;i*=3;for(let l=n-1;l>=0;l-=2)i+=e.charAt(l).charCodeAt(0)-48;return i*=3,i%10}determineCheckDigit(e){for(let n=0;n<10;n++)if(e===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new Q}static parseExtensionString(e){if(e.length!==5)return null;let n=Dn.parseExtension5String(e);return n==null?null:new Map([[Ae.SUGGESTED_PRICE,n]])}static parseExtension5String(e){let n;switch(e.charAt(0)){case"0":n="";break;case"5":n="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n="";break}let i=parseInt(e.substring(1)),l=(i/100).toString(),c=i%100,u=c<10?"0"+c:c.toString();return n+l+"."+u}}class Dr{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,i){let l=this.decodeRowStringBuffer,c=this.decodeMiddle(n,i,l),u=l.toString(),h=Dr.parseExtensionString(u),m=[new Pe((i[0]+i[1])/2,e),new Pe(c,e)],C=new ve(u,null,0,m,ie.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&C.putAllMetadata(h),C}decodeMiddle(e,n,i){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u=n[1],h=0;for(let m=0;m<2&&u<c;m++){let C=Dt.decodeDigit(e,l,u,Dt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+C%10);for(let _ of l)u+=_;C>=10&&(h|=1<<1-m),m!==1&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(i.length!==2)throw new Q;if(parseInt(i.toString())%4!==h)throw new Q;return u}static parseExtensionString(e){return e.length!==2?null:new Map([[Ae.ISSUE_NUMBER,parseInt(e)]])}}class Hn{static decodeRow(e,n,i){let l=Dt.findGuardPattern(n,i,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Dn().decodeRow(e,n,l)}catch{return new Dr().decodeRow(e,n,l)}}}Hn.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class pt extends Dt{constructor(){super(),this.decodeRowStringBuffer="",pt.L_AND_G_PATTERNS=pt.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let n=pt.L_PATTERNS[e-10],i=new Int32Array(n.length);for(let l=0;l<n.length;l++)i[l]=n[n.length-l-1];pt.L_AND_G_PATTERNS[e]=i}}decodeRow(e,n,i){let l=pt.findStartGuardPattern(n),c=i==null?null:i.get(ne.NEED_RESULT_POINT_CALLBACK);if(c!=null){const Ie=new Pe((l[0]+l[1])/2,e);c.foundPossibleResultPoint(Ie)}let u=this.decodeMiddle(n,l,this.decodeRowStringBuffer),h=u.rowOffset,m=u.resultString;if(c!=null){const Ie=new Pe(h,e);c.foundPossibleResultPoint(Ie)}let C=this.decodeEnd(n,h);if(c!=null){const Ie=new Pe((C[0]+C[1])/2,e);c.foundPossibleResultPoint(Ie)}let _=C[1],P=_+(_-C[0]);if(P>=n.getSize()||!n.isRange(_,P,!1))throw new Q;let D=m.toString();if(D.length<8)throw new q;if(!pt.checkChecksum(D))throw new M;let H=(l[1]+l[0])/2,X=(C[1]+C[0])/2,Z=this.getBarcodeFormat(),te=[new Pe(H,e),new Pe(X,e)],de=new ve(D,null,0,te,Z,new Date().getTime()),Oe=0;try{let Ie=Hn.decodeRow(e,n,C[1]);de.putMetadata(Ae.UPC_EAN_EXTENSION,Ie.getText()),de.putAllMetadata(Ie.getResultMetadata()),de.addResultPoints(Ie.getResultPoints()),Oe=Ie.getText().length}catch{}let Me=i==null?null:i.get(ne.ALLOWED_EAN_EXTENSIONS);if(Me!=null){let Ie=!1;for(let _t in Me)if(Oe.toString()===_t){Ie=!0;break}if(!Ie)throw new Q}return de}decodeEnd(e,n){return pt.findGuardPattern(e,n,!1,pt.START_END_PATTERN,new Int32Array(pt.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return pt.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let i=parseInt(e.charAt(n-1),10);return pt.getStandardUPCEANChecksum(e.substring(0,n-1))===i}static getStandardUPCEANChecksum(e){let n=e.length,i=0;for(let l=n-1;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;i+=c}i*=3;for(let l=n-2;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;i+=c}return(1e3-i)%10}}class Ln extends pt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,i){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u=n[1],h=0;for(let C=0;C<6&&u<c;C++){let _=pt.decodeDigit(e,l,u,pt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+_%10);for(let P of l)u+=P;_>=10&&(h|=1<<5-C)}i=Ln.determineFirstDigit(i,h),u=pt.findGuardPattern(e,u,!0,pt.MIDDLE_PATTERN,new Int32Array(pt.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<6&&u<c;C++){let _=pt.decodeDigit(e,l,u,pt.L_PATTERNS);i+=String.fromCharCode(48+_);for(let P of l)u+=P}return{rowOffset:u,resultString:i}}getBarcodeFormat(){return ie.EAN_13}static determineFirstDigit(e,n){for(let i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return e=String.fromCharCode(48+i)+e,e;throw new Q}}Ln.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class As extends pt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,i){const l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u=n[1];for(let m=0;m<4&&u<c;m++){let C=pt.decodeDigit(e,l,u,pt.L_PATTERNS);i+=String.fromCharCode(48+C);for(let _ of l)u+=_}u=pt.findGuardPattern(e,u,!0,pt.MIDDLE_PATTERN,new Int32Array(pt.MIDDLE_PATTERN.length).fill(0))[1];for(let m=0;m<4&&u<c;m++){let C=pt.decodeDigit(e,l,u,pt.L_PATTERNS);i+=String.fromCharCode(48+C);for(let _ of l)u+=_}return{rowOffset:u,resultString:i}}getBarcodeFormat(){return ie.EAN_8}}class Wi extends pt{constructor(){super(...arguments),this.ean13Reader=new Ln}getBarcodeFormat(){return ie.UPC_A}decode(e,n){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,n,i))}decodeMiddle(e,n,i){return this.ean13Reader.decodeMiddle(e,n,i)}maybeReturnResult(e){let n=e.getText();if(n.charAt(0)==="0"){let i=new ve(n.substring(1),null,null,e.getResultPoints(),ie.UPC_A);return e.getResultMetadata()!=null&&i.putAllMetadata(e.getResultMetadata()),i}else throw new Q}reset(){this.ean13Reader.reset()}}class er extends pt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,n,i){const l=this.decodeMiddleCounters.map(C=>C);l[0]=0,l[1]=0,l[2]=0,l[3]=0;const c=e.getSize();let u=n[1],h=0;for(let C=0;C<6&&u<c;C++){const _=er.decodeDigit(e,l,u,er.L_AND_G_PATTERNS);i+=String.fromCharCode(48+_%10);for(let P of l)u+=P;_>=10&&(h|=1<<5-C)}let m=er.determineNumSysAndCheckDigit(i,h);return{rowOffset:u,resultString:m}}decodeEnd(e,n){return er.findGuardPatternWithoutCounters(e,n,!0,er.MIDDLE_END_PATTERN)}checkChecksum(e){return pt.checkChecksum(er.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,n){for(let i=0;i<=1;i++)for(let l=0;l<10;l++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][l]){let c=String.fromCharCode(48+i),u=String.fromCharCode(48+l);return c+e+u}throw Q.getNotFoundInstance()}getBarcodeFormat(){return ie.UPC_E}static convertUPCEtoUPCA(e){const n=e.slice(1,7).split("").map(c=>c.charCodeAt(0)),i=new Le;i.append(e.charAt(0));let l=n[5];switch(l){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(l),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(l);break}return e.length>=8&&i.append(e.charAt(7)),i.toString()}}er.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),er.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Hi extends Ue{constructor(e){super();let n=e==null?null:e.get(ne.POSSIBLE_FORMATS),i=[];f(n)?(i.push(new Ln),i.push(new Wi),i.push(new As),i.push(new er)):(n.indexOf(ie.EAN_13)>-1&&i.push(new Ln),n.indexOf(ie.UPC_A)>-1&&i.push(new Wi),n.indexOf(ie.EAN_8)>-1&&i.push(new As),n.indexOf(ie.UPC_E)>-1&&i.push(new er)),this.readers=i}decodeRow(e,n,i){for(let l of this.readers)try{const c=l.decodeRow(e,n,i),u=c.getBarcodeFormat()===ie.EAN_13&&c.getText().charAt(0)==="0",h=i==null?null:i.get(ne.POSSIBLE_FORMATS),m=h==null||h.includes(ie.UPC_A);if(u&&m){const C=c.getRawBytes(),_=new ve(c.getText().substring(1),C,C?C.length:null,c.getResultPoints(),ie.UPC_A);return _.putAllMetadata(c.getResultMetadata()),_}return c}catch{}throw new Q}reset(){for(let e of this.readers)e.reset()}}class on extends Ue{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,n){for(let i=0;i<n.length;i++)if(Ue.patternMatchVariance(e,n[i],on.MAX_INDIVIDUAL_VARIANCE)<on.MAX_AVG_VARIANCE)return i;throw new Q}static count(e){return nt.sum(new Int32Array(e))}static increment(e,n){let i=0,l=n[0];for(let c=1;c<e.length;c++)n[c]>l&&(l=n[c],i=c);e[i]++}static decrement(e,n){let i=0,l=n[0];for(let c=1;c<e.length;c++)n[c]<l&&(l=n[c],i=c);e[i]--}static isFinderPattern(e){let n=e[0]+e[1],i=n+e[2]+e[3],l=n/i;if(l>=on.MIN_FINDER_PATTERN_RATIO&&l<=on.MAX_FINDER_PATTERN_RATIO){let c=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;for(let h of e)h>u&&(u=h),h<c&&(c=h);return u<10*c}return!1}}on.MAX_AVG_VARIANCE=.2,on.MAX_INDIVIDUAL_VARIANCE=.45,on.MIN_FINDER_PATTERN_RATIO=9.5/12,on.MAX_FINDER_PATTERN_RATIO=12.5/14;class Lr{constructor(e,n){this.value=e,this.checksumPortion=n}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Lr))return!1;const n=e;return this.value===n.value&&this.checksumPortion===n.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class oi{constructor(e,n,i,l,c){this.value=e,this.startEnd=n,this.value=e,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new Pe(i,c)),this.resultPoints.push(new Pe(l,c))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof oi))return!1;const n=e;return this.value===n.value}hashCode(){return this.value}}class An{constructor(){}static getRSSvalue(e,n,i){let l=0;for(let m of e)l+=m;let c=0,u=0,h=e.length;for(let m=0;m<h-1;m++){let C;for(C=1,u|=1<<m;C<e[m];C++,u&=~(1<<m)){let _=An.combins(l-C-1,h-m-2);if(i&&u===0&&l-C-(h-m-1)>=h-m-1&&(_-=An.combins(l-C-(h-m),h-m-2)),h-m-1>1){let P=0;for(let D=l-C-(h-m-2);D>n;D--)P+=An.combins(l-C-D-1,h-m-3);_-=P*(h-1-m)}else l-C>n&&_--;c+=_}l-=C}return c}static combins(e,n){let i,l;e-n>n?(l=n,i=e-n):(l=e-n,i=n);let c=1,u=1;for(let h=e;h>i;h--)c*=h,u<=l&&(c/=u,u++);for(;u<=l;)c/=u,u++;return c}}class Gi{static buildBitArray(e){let n=e.length*2-1;e[e.length-1].getRightChar()==null&&(n-=1);let i=12*n,l=new ee(i),c=0,h=e[0].getRightChar().getValue();for(let m=11;m>=0;--m)h&1<<m&&l.set(c),c++;for(let m=1;m<e.length;++m){let C=e[m],_=C.getLeftChar().getValue();for(let P=11;P>=0;--P)_&1<<P&&l.set(c),c++;if(C.getRightChar()!=null){let P=C.getRightChar().getValue();for(let D=11;D>=0;--D)P&1<<D&&l.set(c),c++}}return l}}class dr{constructor(e,n){n?this.decodedInformation=null:(this.finished=e,this.decodedInformation=n)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ai{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class fn extends ai{constructor(e,n){super(e),this.value=n}getValue(){return this.value}isFNC1(){return this.value===fn.FNC1}}fn.FNC1="$";class fr extends ai{constructor(e,n,i){super(e),i?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=n}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class In extends ai{constructor(e,n,i){if(super(e),n<0||n>10||i<0||i>10)throw new q;this.firstDigit=n,this.secondDigit=i}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===In.FNC1}isSecondDigitFNC1(){return this.secondDigit===In.FNC1}isAnyFNC1(){return this.firstDigit===In.FNC1||this.secondDigit===In.FNC1}}In.FNC1=10;class Ye{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new Q;let n=e.substring(0,2);for(let c of Ye.TWO_DIGIT_DATA_LENGTH)if(c[0]===n)return c[1]===Ye.VARIABLE_LENGTH?Ye.processVariableAI(2,c[2],e):Ye.processFixedAI(2,c[1],e);if(e.length<3)throw new Q;let i=e.substring(0,3);for(let c of Ye.THREE_DIGIT_DATA_LENGTH)if(c[0]===i)return c[1]===Ye.VARIABLE_LENGTH?Ye.processVariableAI(3,c[2],e):Ye.processFixedAI(3,c[1],e);for(let c of Ye.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(c[0]===i)return c[1]===Ye.VARIABLE_LENGTH?Ye.processVariableAI(4,c[2],e):Ye.processFixedAI(4,c[1],e);if(e.length<4)throw new Q;let l=e.substring(0,4);for(let c of Ye.FOUR_DIGIT_DATA_LENGTH)if(c[0]===l)return c[1]===Ye.VARIABLE_LENGTH?Ye.processVariableAI(4,c[2],e):Ye.processFixedAI(4,c[1],e);throw new Q}static processFixedAI(e,n,i){if(i.length<e)throw new Q;let l=i.substring(0,e);if(i.length<e+n)throw new Q;let c=i.substring(e,e+n),u=i.substring(e+n),h="("+l+")"+c,m=Ye.parseFieldsInGeneralPurpose(u);return m==null?h:h+m}static processVariableAI(e,n,i){let l=i.substring(0,e),c;i.length<e+n?c=i.length:c=e+n;let u=i.substring(e,c),h=i.substring(c),m="("+l+")"+u,C=Ye.parseFieldsInGeneralPurpose(h);return C==null?m:m+C}}Ye.VARIABLE_LENGTH=[],Ye.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ye.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ye.VARIABLE_LENGTH,20],["22",Ye.VARIABLE_LENGTH,29],["30",Ye.VARIABLE_LENGTH,8],["37",Ye.VARIABLE_LENGTH,8],["90",Ye.VARIABLE_LENGTH,30],["91",Ye.VARIABLE_LENGTH,30],["92",Ye.VARIABLE_LENGTH,30],["93",Ye.VARIABLE_LENGTH,30],["94",Ye.VARIABLE_LENGTH,30],["95",Ye.VARIABLE_LENGTH,30],["96",Ye.VARIABLE_LENGTH,30],["97",Ye.VARIABLE_LENGTH,3],["98",Ye.VARIABLE_LENGTH,30],["99",Ye.VARIABLE_LENGTH,30]],Ye.THREE_DIGIT_DATA_LENGTH=[["240",Ye.VARIABLE_LENGTH,30],["241",Ye.VARIABLE_LENGTH,30],["242",Ye.VARIABLE_LENGTH,6],["250",Ye.VARIABLE_LENGTH,30],["251",Ye.VARIABLE_LENGTH,30],["253",Ye.VARIABLE_LENGTH,17],["254",Ye.VARIABLE_LENGTH,20],["400",Ye.VARIABLE_LENGTH,30],["401",Ye.VARIABLE_LENGTH,30],["402",17],["403",Ye.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ye.VARIABLE_LENGTH,20],["421",Ye.VARIABLE_LENGTH,15],["422",3],["423",Ye.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ye.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ye.VARIABLE_LENGTH,15],["391",Ye.VARIABLE_LENGTH,18],["392",Ye.VARIABLE_LENGTH,15],["393",Ye.VARIABLE_LENGTH,18],["703",Ye.VARIABLE_LENGTH,30]],Ye.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ye.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ye.VARIABLE_LENGTH,20],["8003",Ye.VARIABLE_LENGTH,30],["8004",Ye.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ye.VARIABLE_LENGTH,30],["8008",Ye.VARIABLE_LENGTH,12],["8018",18],["8020",Ye.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ye.VARIABLE_LENGTH,70],["8200",Ye.VARIABLE_LENGTH,70]];class li{constructor(e){this.buffer=new Le,this.information=e}decodeAllCodes(e,n){let i=n,l=null;do{let c=this.decodeGeneralPurposeField(i,l),u=Ye.parseFieldsInGeneralPurpose(c.getNewString());if(u!=null&&e.append(u),c.isRemaining()?l=""+c.getRemainingValue():l=null,i===c.getNewPosition())break;i=c.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let n=e;n<e+3;++n)if(this.information.get(n))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let c=this.extractNumericValueFromBitArray(e,4);return c===0?new In(this.information.getSize(),In.FNC1,In.FNC1):new In(this.information.getSize(),c-1,In.FNC1)}let n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,l=(n-8)%11;return new In(e+7,i,l)}extractNumericValueFromBitArray(e,n){return li.extractNumericValueFromBitArray(this.information,e,n)}static extractNumericValueFromBitArray(e,n,i){let l=0;for(let c=0;c<i;++c)e.get(n+c)&&(l|=1<<i-c-1);return l}decodeGeneralPurposeField(e,n){this.buffer.setLengthToZero(),n!=null&&this.buffer.append(n),this.current.setPosition(e);let i=this.parseBlocks();return i!=null&&i.isRemaining()?new fr(this.current.getPosition(),this.buffer.toString(),i.getRemainingValue()):new fr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,n;do{let i=this.current.getPosition();if(this.current.isAlpha()?(n=this.parseAlphaBlock(),e=n.isFinished()):this.current.isIsoIec646()?(n=this.parseIsoIec646Block(),e=n.isFinished()):(n=this.parseNumericBlock(),e=n.isFinished()),!(i!==this.current.getPosition())&&!e)break}while(!e);return n.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let n;return e.isSecondDigitFNC1()?n=new fr(this.current.getPosition(),this.buffer.toString()):n=new fr(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new dr(!0,n)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let n=new fr(this.current.getPosition(),this.buffer.toString());return new dr(!0,n)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new dr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new fr(this.current.getPosition(),this.buffer.toString());return new dr(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new dr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new fr(this.current.getPosition(),this.buffer.toString());return new dr(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new dr(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+7>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<116)return!0;if(e+8>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(e,8);return l>=232&&l<253}decodeIsoIec646(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new fn(e+5,fn.FNC1);if(n>=5&&n<15)return new fn(e+5,"0"+(n-5));let i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<90)return new fn(e+7,""+(i+1));if(i>=90&&i<116)return new fn(e+7,""+(i+7));let l=this.extractNumericValueFromBitArray(e,8),c;switch(l){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new q}return new fn(e+8,c)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+6>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,6);return i>=16&&i<63}decodeAlphanumeric(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new fn(e+5,fn.FNC1);if(n>=5&&n<15)return new fn(e+5,"0"+(n-5));let i=this.extractNumericValueFromBitArray(e,6);if(i>=32&&i<58)return new fn(e+6,""+(i+33));let l;switch(i){case 58:l="*";break;case 59:l=",";break;case 60:l="-";break;case 61:l=".";break;case 62:l="/";break;default:throw new ht("Decoding invalid alphanumeric value: "+i)}return new fn(e+6,l)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<5&&n+e<this.information.getSize();++n)if(n===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+n))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let n=e;n<e+3;++n)if(this.information.get(n))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<4&&n+e<this.information.getSize();++n)if(this.information.get(e+n))return!1;return!0}}class Xi{constructor(e){this.information=e,this.generalDecoder=new li(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Bn extends Xi{constructor(e){super(e)}encodeCompressedGtin(e,n){e.append("(01)");let i=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,n,i)}encodeCompressedGtinWithoutAI(e,n,i){for(let l=0;l<4;++l){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*l,10);c/100===0&&e.append("0"),c/10===0&&e.append("0"),e.append(c)}Bn.appendCheckDigit(e,i)}static appendCheckDigit(e,n){let i=0;for(let l=0;l<13;l++){let c=e.charAt(l+n).charCodeAt(0)-48;i+=l&1?c:3*c}i=10-i%10,i===10&&(i=0),e.append(i)}}Bn.GTIN_SIZE=40;class tr extends Bn{constructor(e){super(e)}parseInformation(){let e=new Le;e.append("(01)");let n=e.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(tr.HEADER_SIZE,4);return e.append(i),this.encodeCompressedGtinWithoutAI(e,tr.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(e,tr.HEADER_SIZE+44)}}tr.HEADER_SIZE=4;class Zr extends Xi{constructor(e){super(e)}parseInformation(){let e=new Le;return this.getGeneralDecoder().decodeAllCodes(e,Zr.HEADER_SIZE)}}Zr.HEADER_SIZE=5;class Ei extends Bn{constructor(e){super(e)}encodeCompressedWeight(e,n,i){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(e,l);let c=this.checkWeight(l),u=1e5;for(let h=0;h<5;++h)c/u===0&&e.append("0"),u/=10;e.append(c)}}class nr extends Ei{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=nr.HEADER_SIZE+Ei.GTIN_SIZE+nr.WEIGHT_SIZE)throw new Q;let e=new Le;return this.encodeCompressedGtin(e,nr.HEADER_SIZE),this.encodeCompressedWeight(e,nr.HEADER_SIZE+Ei.GTIN_SIZE,nr.WEIGHT_SIZE),e.toString()}}nr.HEADER_SIZE=5,nr.WEIGHT_SIZE=15;class $e extends nr{constructor(e){super(e)}addWeightCode(e,n){e.append("(3103)")}checkWeight(e){return e}}class Et extends nr{constructor(e){super(e)}addWeightCode(e,n){n<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class ot extends Bn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<ot.HEADER_SIZE+Bn.GTIN_SIZE)throw new Q;let e=new Le;this.encodeCompressedGtin(e,ot.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(ot.HEADER_SIZE+Bn.GTIN_SIZE,ot.LAST_DIGIT_SIZE);e.append("(392"),e.append(n),e.append(")");let i=this.getGeneralDecoder().decodeGeneralPurposeField(ot.HEADER_SIZE+Bn.GTIN_SIZE+ot.LAST_DIGIT_SIZE,null);return e.append(i.getNewString()),e.toString()}}ot.HEADER_SIZE=8,ot.LAST_DIGIT_SIZE=2;class It extends Bn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<It.HEADER_SIZE+Bn.GTIN_SIZE)throw new Q;let e=new Le;this.encodeCompressedGtin(e,It.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(It.HEADER_SIZE+Bn.GTIN_SIZE,It.LAST_DIGIT_SIZE);e.append("(393"),e.append(n),e.append(")");let i=this.getGeneralDecoder().extractNumericValueFromBitArray(It.HEADER_SIZE+Bn.GTIN_SIZE+It.LAST_DIGIT_SIZE,It.FIRST_THREE_DIGITS_SIZE);i/100==0&&e.append("0"),i/10==0&&e.append("0"),e.append(i);let l=this.getGeneralDecoder().decodeGeneralPurposeField(It.HEADER_SIZE+Bn.GTIN_SIZE+It.LAST_DIGIT_SIZE+It.FIRST_THREE_DIGITS_SIZE,null);return e.append(l.getNewString()),e.toString()}}It.HEADER_SIZE=8,It.LAST_DIGIT_SIZE=2,It.FIRST_THREE_DIGITS_SIZE=10;class We extends Ei{constructor(e,n,i){super(e),this.dateCode=i,this.firstAIdigits=n}parseInformation(){if(this.getInformation().getSize()!=We.HEADER_SIZE+We.GTIN_SIZE+We.WEIGHT_SIZE+We.DATE_SIZE)throw new Q;let e=new Le;return this.encodeCompressedGtin(e,We.HEADER_SIZE),this.encodeCompressedWeight(e,We.HEADER_SIZE+We.GTIN_SIZE,We.WEIGHT_SIZE),this.encodeCompressedDate(e,We.HEADER_SIZE+We.GTIN_SIZE+We.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,n){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,We.DATE_SIZE);if(i==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let l=i%32;i/=32;let c=i%12+1;i/=12;let u=i;u/10==0&&e.append("0"),e.append(u),c/10==0&&e.append("0"),e.append(c),l/10==0&&e.append("0"),e.append(l)}addWeightCode(e,n){e.append("("),e.append(this.firstAIdigits),e.append(n/1e5),e.append(")")}checkWeight(e){return e%1e5}}We.HEADER_SIZE=8,We.WEIGHT_SIZE=20,We.DATE_SIZE=16;function Gn(k){try{if(k.get(1))return new tr(k);if(!k.get(2))return new Zr(k);switch(li.extractNumericValueFromBitArray(k,1,4)){case 4:return new $e(k);case 5:return new Et(k)}switch(li.extractNumericValueFromBitArray(k,1,5)){case 12:return new ot(k);case 13:return new It(k)}switch(li.extractNumericValueFromBitArray(k,1,7)){case 56:return new We(k,"310","11");case 57:return new We(k,"320","11");case 58:return new We(k,"310","13");case 59:return new We(k,"320","13");case 60:return new We(k,"310","15");case 61:return new We(k,"320","15");case 62:return new We(k,"310","17");case 63:return new We(k,"320","17")}}catch(e){throw console.log(e),new ht("unknown decoder: "+k)}}class Vt{constructor(e,n,i,l){this.leftchar=e,this.rightchar=n,this.finderpattern=i,this.maybeLast=l}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,n){return e instanceof Vt?Vt.equalsOrNull(e.leftchar,n.leftchar)&&Vt.equalsOrNull(e.rightchar,n.rightchar)&&Vt.equalsOrNull(e.finderpattern,n.finderpattern):!1}static equalsOrNull(e,n){return e===null?n===null:Vt.equals(e,n)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ss{constructor(e,n,i){this.pairs=e,this.rowNumber=n,this.wasReversed=i}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,n){return e instanceof Ss?this.checkEqualitity(e,n)&&e.wasReversed===n.wasReversed:!1}checkEqualitity(e,n){if(!e||!n)return;let i;return e.forEach((l,c)=>{n.forEach(u=>{l.getLeftChar().getValue()===u.getLeftChar().getValue()&&l.getRightChar().getValue()===u.getRightChar().getValue()&&l.getFinderPatter().getValue()===u.getFinderPatter().getValue()&&(i=!0)})}),i}}class Ce extends on{constructor(e){super(...arguments),this.pairs=new Array(Ce.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,n,i){this.pairs.length=0,this.startFromEven=!1;try{return Ce.constructResult(this.decodeRow2pairs(e,n))}catch(l){this.verbose&&console.log(l)}return this.pairs.length=0,this.startFromEven=!0,Ce.constructResult(this.decodeRow2pairs(e,n))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,n){let i=!1;for(;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,e))}catch(c){if(c instanceof Q){if(!this.pairs.length)throw new Q;i=!0}}if(this.checkChecksum())return this.pairs;let l;if(this.rows.length?l=!0:l=!1,this.storeRow(e,!1),l){let c=this.checkRowsBoolean(!1);if(c!=null||(c=this.checkRowsBoolean(!0),c!=null))return c}throw new Q}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let n=null;try{n=this.checkRows(new Array,0)}catch(i){this.verbose&&console.log(i)}return e&&(this.rows=this.rows.reverse()),n}checkRows(e,n){for(let i=n;i<this.rows.length;i++){let l=this.rows[i];this.pairs.length=0;for(let u of e)this.pairs.push(u.getPairs());if(this.pairs.push(l.getPairs()),!Ce.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let c=new Array(e);c.push(l);try{return this.checkRows(c,i+1)}catch(u){this.verbose&&console.log(u)}}throw new Q}static isValidSequence(e){for(let n of Ce.FINDER_PATTERN_SEQUENCES){if(e.length>n.length)continue;let i=!0;for(let l=0;l<e.length;l++)if(e[l].getFinderPattern().getValue()!=n[l]){i=!1;break}if(i)return!0}return!1}storeRow(e,n){let i=0,l=!1,c=!1;for(;i<this.rows.length;){let u=this.rows[i];if(u.getRowNumber()>e){c=u.isEquivalent(this.pairs);break}l=u.isEquivalent(this.pairs),i++}c||l||Ce.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new Ss(this.pairs,e,n)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,n){for(let i of n)if(i.getPairs().length!==e.length){for(let l of i.getPairs())for(let c of e)if(Vt.equals(l,c))break}}static isPartialRow(e,n){for(let i of n){let l=!0;for(let c of e){let u=!1;for(let h of i.getPairs())if(c.equals(h)){u=!0;break}if(!u){l=!1;break}}if(l)return!0}return!1}getRows(){return this.rows}static constructResult(e){let n=Gi.buildBitArray(e),l=Gn(n).parseInformation(),c=e[0].getFinderPattern().getResultPoints(),u=e[e.length-1].getFinderPattern().getResultPoints(),h=[c[0],c[1],u[0],u[1]];return new ve(l,null,null,h,ie.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),n=e.getLeftChar(),i=e.getRightChar();if(i==null)return!1;let l=i.getChecksumPortion(),c=2;for(let h=1;h<this.pairs.size();++h){let m=this.pairs.get(h);l+=m.getLeftChar().getChecksumPortion(),c++;let C=m.getRightChar();C!=null&&(l+=C.getChecksumPortion(),c++)}return l%=211,211*(c-4)+l==n.getValue()}static getNextSecondBar(e,n){let i;return e.get(n)?(i=e.getNextUnset(n),i=e.getNextSet(i)):(i=e.getNextSet(n),i=e.getNextUnset(i)),i}retrieveNextPair(e,n,i){let l=n.length%2==0;this.startFromEven&&(l=!l);let c,u=!0,h=-1;do this.findNextPair(e,n,h),c=this.parseFoundFinderPattern(e,i,l),c==null?h=Ce.getNextSecondBar(e,this.startEnd[0]):u=!1;while(u);let m=this.decodeDataCharacter(e,c,l,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new Q;let C;try{C=this.decodeDataCharacter(e,c,l,!1)}catch(_){C=null,this.verbose&&console.log(_)}return new Vt(m,C,c,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,n,i){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u;i>=0?u=i:this.isEmptyPair(n)?u=0:u=n[n.length-1].getFinderPattern().getStartEnd()[1];let h=n.length%2!=0;this.startFromEven&&(h=!h);let m=!1;for(;u<c&&(m=!e.get(u),!!m);)u++;let C=0,_=u;for(let P=u;P<c;P++)if(e.get(P)!=m)l[C]++;else{if(C==3){if(h&&Ce.reverseCounters(l),Ce.isFinderPattern(l)){this.startEnd[0]=_,this.startEnd[1]=P;return}h&&Ce.reverseCounters(l),_+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,C--}else C++;l[C]=1,m=!m}throw new Q}static reverseCounters(e){let n=e.length;for(let i=0;i<n/2;++i){let l=e[i];e[i]=e[n-i-1],e[n-i-1]=l}}parseFoundFinderPattern(e,n,i){let l,c,u;if(i){let C=this.startEnd[0]-1;for(;C>=0&&!e.get(C);)C--;C++,l=this.startEnd[0]-C,c=C,u=this.startEnd[1]}else c=this.startEnd[0],u=e.getNextUnset(this.startEnd[1]+1),l=u-this.startEnd[1];let h=this.getDecodeFinderCounters();B.arraycopy(h,0,h,1,h.length-1),h[0]=l;let m;try{m=this.parseFinderValue(h,Ce.FINDER_PATTERNS)}catch{return null}return new oi(m,[c,u],c,u,n)}decodeDataCharacter(e,n,i,l){let c=this.getDataCharacterCounters();for(let Ut=0;Ut<c.length;Ut++)c[Ut]=0;if(l)Ce.recordPatternInReverse(e,n.getStartEnd()[0],c);else{Ce.recordPattern(e,n.getStartEnd()[1],c);for(let Ut=0,an=c.length-1;Ut<an;Ut++,an--){let $n=c[Ut];c[Ut]=c[an],c[an]=$n}}let u=17,h=nt.sum(new Int32Array(c))/u,m=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(h-m)/m>.3)throw new Q;let C=this.getOddCounts(),_=this.getEvenCounts(),P=this.getOddRoundingErrors(),D=this.getEvenRoundingErrors();for(let Ut=0;Ut<c.length;Ut++){let an=1*c[Ut]/h,$n=an+.5;if($n<1){if(an<.3)throw new Q;$n=1}else if($n>8){if(an>8.7)throw new Q;$n=8}let Ni=Ut/2;Ut&1?(_[Ni]=$n,D[Ni]=an-$n):(C[Ni]=$n,P[Ni]=an-$n)}this.adjustOddEvenCounts(u);let H=4*n.getValue()+(i?0:2)+(l?0:1)-1,X=0,Z=0;for(let Ut=C.length-1;Ut>=0;Ut--){if(Ce.isNotA1left(n,i,l)){let an=Ce.WEIGHTS[H][2*Ut];Z+=C[Ut]*an}X+=C[Ut]}let te=0;for(let Ut=_.length-1;Ut>=0;Ut--)if(Ce.isNotA1left(n,i,l)){let an=Ce.WEIGHTS[H][2*Ut+1];te+=_[Ut]*an}let de=Z+te;if(X&1||X>13||X<4)throw new Q;let Oe=(13-X)/2,Me=Ce.SYMBOL_WIDEST[Oe],Ie=9-Me,_t=An.getRSSvalue(C,Me,!0),vt=An.getRSSvalue(_,Ie,!1),ir=Ce.EVEN_TOTAL_SUBSET[Oe],Rr=Ce.GSUM[Oe],Cn=_t*ir+vt+Rr;return new Lr(Cn,de)}static isNotA1left(e,n,i){return!(e.getValue()==0&&n&&i)}adjustOddEvenCounts(e){let n=nt.sum(new Int32Array(this.getOddCounts())),i=nt.sum(new Int32Array(this.getEvenCounts())),l=!1,c=!1;n>13?c=!0:n<4&&(l=!0);let u=!1,h=!1;i>13?h=!0:i<4&&(u=!0);let m=n+i-e,C=(n&1)==1,_=(i&1)==0;if(m==1)if(C){if(_)throw new Q;c=!0}else{if(!_)throw new Q;h=!0}else if(m==-1)if(C){if(_)throw new Q;l=!0}else{if(!_)throw new Q;u=!0}else if(m==0){if(C){if(!_)throw new Q;n<i?(l=!0,h=!0):(c=!0,u=!0)}else if(_)throw new Q}else throw new Q;if(l){if(c)throw new Q;Ce.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&Ce.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(h)throw new Q;Ce.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&Ce.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ce.SYMBOL_WIDEST=[7,5,4,3,1],Ce.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ce.GSUM=[0,348,1388,2948,3988],Ce.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ce.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ce.FINDER_PAT_A=0,Ce.FINDER_PAT_B=1,Ce.FINDER_PAT_C=2,Ce.FINDER_PAT_D=3,Ce.FINDER_PAT_E=4,Ce.FINDER_PAT_F=5,Ce.FINDER_PATTERN_SEQUENCES=[[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_C,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_E,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D,Ce.FINDER_PAT_C],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_E,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D,Ce.FINDER_PAT_D,Ce.FINDER_PAT_F],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_E,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_F,Ce.FINDER_PAT_F],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_D],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_E],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_F,Ce.FINDER_PAT_F],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_E,Ce.FINDER_PAT_F,Ce.FINDER_PAT_F]],Ce.MAX_PAIRS=11;class yr extends Lr{constructor(e,n,i){super(e,n),this.count=0,this.finderPattern=i}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Bt extends on{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,n,i){const l=this.decodePair(n,!1,e,i);Bt.addOrTally(this.possibleLeftPairs,l),n.reverse();let c=this.decodePair(n,!0,e,i);Bt.addOrTally(this.possibleRightPairs,c),n.reverse();for(let u of this.possibleLeftPairs)if(u.getCount()>1){for(let h of this.possibleRightPairs)if(h.getCount()>1&&Bt.checkChecksum(u,h))return Bt.constructResult(u,h)}throw new Q}static addOrTally(e,n){if(n==null)return;let i=!1;for(let l of e)if(l.getValue()===n.getValue()){l.incrementCount(),i=!0;break}i||e.push(n)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,n){let i=4537077*e.getValue()+n.getValue(),l=new String(i).toString(),c=new Le;for(let C=13-l.length;C>0;C--)c.append("0");c.append(l);let u=0;for(let C=0;C<13;C++){let _=c.charAt(C).charCodeAt(0)-48;u+=C&1?_:3*_}u=10-u%10,u===10&&(u=0),c.append(u.toString());let h=e.getFinderPattern().getResultPoints(),m=n.getFinderPattern().getResultPoints();return new ve(c.toString(),null,0,[h[0],h[1],m[0],m[1]],ie.RSS_14,new Date().getTime())}static checkChecksum(e,n){let i=(e.getChecksumPortion()+16*n.getChecksumPortion())%79,l=9*e.getFinderPattern().getValue()+n.getFinderPattern().getValue();return l>72&&l--,l>8&&l--,i===l}decodePair(e,n,i,l){try{let c=this.findFinderPattern(e,n),u=this.parseFoundFinderPattern(e,i,n,c),h=l==null?null:l.get(ne.NEED_RESULT_POINT_CALLBACK);if(h!=null){let _=(c[0]+c[1])/2;n&&(_=e.getSize()-1-_),h.foundPossibleResultPoint(new Pe(_,i))}let m=this.decodeDataCharacter(e,u,!0),C=this.decodeDataCharacter(e,u,!1);return new yr(1597*m.getValue()+C.getValue(),m.getChecksumPortion()+4*C.getChecksumPortion(),u)}catch{return null}}decodeDataCharacter(e,n,i){let l=this.getDataCharacterCounters();for(let te=0;te<l.length;te++)l[te]=0;if(i)Ue.recordPatternInReverse(e,n.getStartEnd()[0],l);else{Ue.recordPattern(e,n.getStartEnd()[1]+1,l);for(let te=0,de=l.length-1;te<de;te++,de--){let Oe=l[te];l[te]=l[de],l[de]=Oe}}let c=i?16:15,u=nt.sum(new Int32Array(l))/c,h=this.getOddCounts(),m=this.getEvenCounts(),C=this.getOddRoundingErrors(),_=this.getEvenRoundingErrors();for(let te=0;te<l.length;te++){let de=l[te]/u,Oe=Math.floor(de+.5);Oe<1?Oe=1:Oe>8&&(Oe=8);let Me=Math.floor(te/2);te&1?(m[Me]=Oe,_[Me]=de-Oe):(h[Me]=Oe,C[Me]=de-Oe)}this.adjustOddEvenCounts(i,c);let P=0,D=0;for(let te=h.length-1;te>=0;te--)D*=9,D+=h[te],P+=h[te];let H=0,X=0;for(let te=m.length-1;te>=0;te--)H*=9,H+=m[te],X+=m[te];let Z=D+3*H;if(i){if(P&1||P>12||P<4)throw new Q;let te=(12-P)/2,de=Bt.OUTSIDE_ODD_WIDEST[te],Oe=9-de,Me=An.getRSSvalue(h,de,!1),Ie=An.getRSSvalue(m,Oe,!0),_t=Bt.OUTSIDE_EVEN_TOTAL_SUBSET[te],vt=Bt.OUTSIDE_GSUM[te];return new Lr(Me*_t+Ie+vt,Z)}else{if(X&1||X>10||X<4)throw new Q;let te=(10-X)/2,de=Bt.INSIDE_ODD_WIDEST[te],Oe=9-de,Me=An.getRSSvalue(h,de,!0),Ie=An.getRSSvalue(m,Oe,!1),_t=Bt.INSIDE_ODD_TOTAL_SUBSET[te],vt=Bt.INSIDE_GSUM[te];return new Lr(Ie*_t+Me+vt,Z)}}findFinderPattern(e,n){let i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;let l=e.getSize(),c=!1,u=0;for(;u<l&&(c=!e.get(u),n!==c);)u++;let h=0,m=u;for(let C=u;C<l;C++)if(e.get(C)!==c)i[h]++;else{if(h===3){if(on.isFinderPattern(i))return[m,C];m+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,h--}else h++;i[h]=1,c=!c}throw new Q}parseFoundFinderPattern(e,n,i,l){let c=e.get(l[0]),u=l[0]-1;for(;u>=0&&c!==e.get(u);)u--;u++;const h=l[0]-u,m=this.getDecodeFinderCounters(),C=new Int32Array(m.length);B.arraycopy(m,0,C,1,m.length-1),C[0]=h;const _=this.parseFinderValue(C,Bt.FINDER_PATTERNS);let P=u,D=l[1];return i&&(P=e.getSize()-1-P,D=e.getSize()-1-D),new oi(_,[u,l[1]],P,D,n)}adjustOddEvenCounts(e,n){let i=nt.sum(new Int32Array(this.getOddCounts())),l=nt.sum(new Int32Array(this.getEvenCounts())),c=!1,u=!1,h=!1,m=!1;e?(i>12?u=!0:i<4&&(c=!0),l>12?m=!0:l<4&&(h=!0)):(i>11?u=!0:i<5&&(c=!0),l>10?m=!0:l<4&&(h=!0));let C=i+l-n,_=(i&1)===(e?1:0),P=(l&1)===1;if(C===1)if(_){if(P)throw new Q;u=!0}else{if(!P)throw new Q;m=!0}else if(C===-1)if(_){if(P)throw new Q;c=!0}else{if(!P)throw new Q;h=!0}else if(C===0){if(_){if(!P)throw new Q;i<l?(c=!0,m=!0):(u=!0,h=!0)}else if(P)throw new Q}else throw new Q;if(c){if(u)throw new Q;on.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&on.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(m)throw new Q;on.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&on.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Bt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Bt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Bt.OUTSIDE_GSUM=[0,161,961,2015,2715],Bt.INSIDE_GSUM=[0,336,1036,1516],Bt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Bt.INSIDE_ODD_WIDEST=[2,4,6,8],Bt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class bi extends Ue{constructor(e,n){super(),this.readers=[],this.verbose=n===!0;const i=e?e.get(ne.POSSIBLE_FORMATS):null,l=e&&e.get(ne.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;i?((i.includes(ie.EAN_13)||i.includes(ie.UPC_A)||i.includes(ie.EAN_8)||i.includes(ie.UPC_E))&&this.readers.push(new Hi(e)),i.includes(ie.CODE_39)&&this.readers.push(new gt(l)),i.includes(ie.CODE_128)&&this.readers.push(new xe),i.includes(ie.ITF)&&this.readers.push(new dt),i.includes(ie.RSS_14)&&this.readers.push(new Bt),i.includes(ie.RSS_EXPANDED)&&this.readers.push(new Ce(this.verbose))):(this.readers.push(new Hi(e)),this.readers.push(new gt),this.readers.push(new Hi(e)),this.readers.push(new xe),this.readers.push(new dt),this.readers.push(new Bt),this.readers.push(new Ce(this.verbose)))}decodeRow(e,n,i){for(let l=0;l<this.readers.length;l++)try{return this.readers[l].decodeRow(e,n,i)}catch{}throw new Q}reset(){this.readers.forEach(e=>e.reset())}}class Yi extends pe{constructor(e=500,n){super(new bi(n),e,n)}}class Rt{constructor(e,n,i){this.ecCodewords=e,this.ecBlocks=[n],i&&this.ecBlocks.push(i)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class St{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ot{constructor(e,n,i,l,c,u){this.versionNumber=e,this.symbolSizeRows=n,this.symbolSizeColumns=i,this.dataRegionSizeRows=l,this.dataRegionSizeColumns=c,this.ecBlocks=u;let h=0;const m=u.getECCodewords(),C=u.getECBlocks();for(let _ of C)h+=_.getCount()*(_.getDataCodewords()+m);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,n){if(e&1||n&1)throw new q;for(let i of Ot.VERSIONS)if(i.symbolSizeRows===e&&i.symbolSizeColumns===n)return i;throw new q}toString(){return""+this.versionNumber}static buildVersions(){return[new Ot(1,10,10,8,8,new Rt(5,new St(1,3))),new Ot(2,12,12,10,10,new Rt(7,new St(1,5))),new Ot(3,14,14,12,12,new Rt(10,new St(1,8))),new Ot(4,16,16,14,14,new Rt(12,new St(1,12))),new Ot(5,18,18,16,16,new Rt(14,new St(1,18))),new Ot(6,20,20,18,18,new Rt(18,new St(1,22))),new Ot(7,22,22,20,20,new Rt(20,new St(1,30))),new Ot(8,24,24,22,22,new Rt(24,new St(1,36))),new Ot(9,26,26,24,24,new Rt(28,new St(1,44))),new Ot(10,32,32,14,14,new Rt(36,new St(1,62))),new Ot(11,36,36,16,16,new Rt(42,new St(1,86))),new Ot(12,40,40,18,18,new Rt(48,new St(1,114))),new Ot(13,44,44,20,20,new Rt(56,new St(1,144))),new Ot(14,48,48,22,22,new Rt(68,new St(1,174))),new Ot(15,52,52,24,24,new Rt(42,new St(2,102))),new Ot(16,64,64,14,14,new Rt(56,new St(2,140))),new Ot(17,72,72,16,16,new Rt(36,new St(4,92))),new Ot(18,80,80,18,18,new Rt(48,new St(4,114))),new Ot(19,88,88,20,20,new Rt(56,new St(4,144))),new Ot(20,96,96,22,22,new Rt(68,new St(4,174))),new Ot(21,104,104,24,24,new Rt(56,new St(6,136))),new Ot(22,120,120,18,18,new Rt(68,new St(6,175))),new Ot(23,132,132,20,20,new Rt(62,new St(8,163))),new Ot(24,144,144,22,22,new Rt(62,new St(8,156),new St(2,155))),new Ot(25,8,18,6,16,new Rt(7,new St(1,5))),new Ot(26,8,32,6,14,new Rt(11,new St(1,10))),new Ot(27,12,26,10,24,new Rt(14,new St(1,16))),new Ot(28,12,36,10,16,new Rt(18,new St(1,22))),new Ot(29,16,36,14,16,new Rt(24,new St(1,32))),new Ot(30,16,48,14,22,new Rt(28,new St(1,49)))]}}Ot.VERSIONS=Ot.buildVersions();class hr{constructor(e){const n=e.getHeight();if(n<8||n>144||n&1)throw new q;this.version=hr.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Se(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const n=e.getHeight(),i=e.getWidth();return Ot.getVersionForDimensions(n,i)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let n=0,i=4,l=0;const c=this.mappingBitMatrix.getHeight(),u=this.mappingBitMatrix.getWidth();let h=!1,m=!1,C=!1,_=!1;do if(i===c&&l===0&&!h)e[n++]=this.readCorner1(c,u)&255,i-=2,l+=2,h=!0;else if(i===c-2&&l===0&&u&3&&!m)e[n++]=this.readCorner2(c,u)&255,i-=2,l+=2,m=!0;else if(i===c+4&&l===2&&!(u&7)&&!C)e[n++]=this.readCorner3(c,u)&255,i-=2,l+=2,C=!0;else if(i===c-2&&l===0&&(u&7)===4&&!_)e[n++]=this.readCorner4(c,u)&255,i-=2,l+=2,_=!0;else{do i<c&&l>=0&&!this.readMappingMatrix.get(l,i)&&(e[n++]=this.readUtah(i,l,c,u)&255),i-=2,l+=2;while(i>=0&&l<u);i+=1,l+=3;do i>=0&&l<u&&!this.readMappingMatrix.get(l,i)&&(e[n++]=this.readUtah(i,l,c,u)&255),i+=2,l-=2;while(i<c&&l>=0);i+=3,l+=1}while(i<c||l<u);if(n!==this.version.getTotalCodewords())throw new q;return e}readModule(e,n,i,l){return e<0&&(e+=i,n+=4-(i+4&7)),n<0&&(n+=l,e+=4-(l+4&7)),this.readMappingMatrix.set(n,e),this.mappingBitMatrix.get(n,e)}readUtah(e,n,i,l){let c=0;return this.readModule(e-2,n-2,i,l)&&(c|=1),c<<=1,this.readModule(e-2,n-1,i,l)&&(c|=1),c<<=1,this.readModule(e-1,n-2,i,l)&&(c|=1),c<<=1,this.readModule(e-1,n-1,i,l)&&(c|=1),c<<=1,this.readModule(e-1,n,i,l)&&(c|=1),c<<=1,this.readModule(e,n-2,i,l)&&(c|=1),c<<=1,this.readModule(e,n-1,i,l)&&(c|=1),c<<=1,this.readModule(e,n,i,l)&&(c|=1),c}readCorner1(e,n){let i=0;return this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,1,e,n)&&(i|=1),i<<=1,this.readModule(e-1,2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(2,n-1,e,n)&&(i|=1),i<<=1,this.readModule(3,n-1,e,n)&&(i|=1),i}readCorner2(e,n){let i=0;return this.readModule(e-3,0,e,n)&&(i|=1),i<<=1,this.readModule(e-2,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(0,n-4,e,n)&&(i|=1),i<<=1,this.readModule(0,n-3,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i}readCorner3(e,n){let i=0;return this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(0,n-3,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-3,e,n)&&(i|=1),i<<=1,this.readModule(1,n-2,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i}readCorner4(e,n){let i=0;return this.readModule(e-3,0,e,n)&&(i|=1),i<<=1,this.readModule(e-2,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(2,n-1,e,n)&&(i|=1),i<<=1,this.readModule(3,n-1,e,n)&&(i|=1),i}extractDataRegion(e){const n=this.version.getSymbolSizeRows(),i=this.version.getSymbolSizeColumns();if(e.getHeight()!==n)throw new I("Dimension of bitMatrix must match the version size");const l=this.version.getDataRegionSizeRows(),c=this.version.getDataRegionSizeColumns(),u=n/l|0,h=i/c|0,m=u*l,C=h*c,_=new Se(C,m);for(let P=0;P<u;++P){const D=P*l;for(let H=0;H<h;++H){const X=H*c;for(let Z=0;Z<l;++Z){const te=P*(l+2)+1+Z,de=D+Z;for(let Oe=0;Oe<c;++Oe){const Me=H*(c+2)+1+Oe;if(e.get(Me,te)){const Ie=X+Oe;_.set(Ie,de)}}}}}return _}}class Wo{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n){const i=n.getECBlocks();let l=0;const c=i.getECBlocks();for(let Z of c)l+=Z.getCount();const u=new Array(l);let h=0;for(let Z of c)for(let te=0;te<Z.getCount();te++){const de=Z.getDataCodewords(),Oe=i.getECCodewords()+de;u[h++]=new Wo(de,new Uint8Array(Oe))}const C=u[0].codewords.length-i.getECCodewords(),_=C-1;let P=0;for(let Z=0;Z<_;Z++)for(let te=0;te<h;te++)u[te].codewords[Z]=e[P++];const D=n.getVersionNumber()===24,H=D?8:h;for(let Z=0;Z<H;Z++)u[Z].codewords[C-1]=e[P++];const X=u[0].codewords.length;for(let Z=C;Z<X;Z++)for(let te=0;te<h;te++){const de=D?(te+8)%h:te,Oe=D&&de>7?Z-1:Z;u[de].codewords[Oe]=e[P++]}if(P!==e.length)throw new I;return u}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ho{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new I(""+e);let n=0,i=this.bitOffset,l=this.byteOffset;const c=this.bytes;if(i>0){const u=8-i,h=e<u?e:u,m=u-h,C=255>>8-h<<m;n=(c[l]&C)>>m,e-=h,i+=h,i===8&&(i=0,l++)}if(e>0){for(;e>=8;)n=n<<8|c[l]&255,l++,e-=8;if(e>0){const u=8-e,h=255>>u<<u;n=n<<e|(c[l]&h)>>u,i+=e}}return this.bitOffset=i,this.byteOffset=l,n}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var wn;(function(k){k[k.PAD_ENCODE=0]="PAD_ENCODE",k[k.ASCII_ENCODE=1]="ASCII_ENCODE",k[k.C40_ENCODE=2]="C40_ENCODE",k[k.TEXT_ENCODE=3]="TEXT_ENCODE",k[k.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",k[k.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",k[k.BASE256_ENCODE=6]="BASE256_ENCODE"})(wn||(wn={}));class Tr{static decode(e){const n=new Ho(e),i=new Le,l=new Le,c=new Array;let u=wn.ASCII_ENCODE;do if(u===wn.ASCII_ENCODE)u=this.decodeAsciiSegment(n,i,l);else{switch(u){case wn.C40_ENCODE:this.decodeC40Segment(n,i);break;case wn.TEXT_ENCODE:this.decodeTextSegment(n,i);break;case wn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,i);break;case wn.EDIFACT_ENCODE:this.decodeEdifactSegment(n,i);break;case wn.BASE256_ENCODE:this.decodeBase256Segment(n,i,c);break;default:throw new q}u=wn.ASCII_ENCODE}while(u!==wn.PAD_ENCODE&&n.available()>0);return l.length()>0&&i.append(l.toString()),new Ve(e,i.toString(),c.length===0?null:c,null)}static decodeAsciiSegment(e,n,i){let l=!1;do{let c=e.readBits(8);if(c===0)throw new q;if(c<=128)return l&&(c+=128),n.append(String.fromCharCode(c-1)),wn.ASCII_ENCODE;if(c===129)return wn.PAD_ENCODE;if(c<=229){const u=c-130;u<10&&n.append("0"),n.append(""+u)}else switch(c){case 230:return wn.C40_ENCODE;case 231:return wn.BASE256_ENCODE;case 232:n.append("");break;case 233:case 234:break;case 235:l=!0;break;case 236:n.append("[)>05"),i.insert(0,"");break;case 237:n.append("[)>06"),i.insert(0,"");break;case 238:return wn.ANSIX12_ENCODE;case 239:return wn.TEXT_ENCODE;case 240:return wn.EDIFACT_ENCODE;case 241:break;default:if(c!==254||e.available()!==0)throw new q;break}}while(e.available()>0);return wn.ASCII_ENCODE}static decodeC40Segment(e,n){let i=!1;const l=[];let c=0;do{if(e.available()===8)return;const u=e.readBits(8);if(u===254)return;this.parseTwoBytes(u,e.readBits(8),l);for(let h=0;h<3;h++){const m=l[h];switch(c){case 0:if(m<3)c=m+1;else if(m<this.C40_BASIC_SET_CHARS.length){const C=this.C40_BASIC_SET_CHARS[m];i?(n.append(String.fromCharCode(C.charCodeAt(0)+128)),i=!1):n.append(C)}else throw new q;break;case 1:i?(n.append(String.fromCharCode(m+128)),i=!1):n.append(String.fromCharCode(m)),c=0;break;case 2:if(m<this.C40_SHIFT2_SET_CHARS.length){const C=this.C40_SHIFT2_SET_CHARS[m];i?(n.append(String.fromCharCode(C.charCodeAt(0)+128)),i=!1):n.append(C)}else switch(m){case 27:n.append("");break;case 30:i=!0;break;default:throw new q}c=0;break;case 3:i?(n.append(String.fromCharCode(m+224)),i=!1):n.append(String.fromCharCode(m+96)),c=0;break;default:throw new q}}}while(e.available()>0)}static decodeTextSegment(e,n){let i=!1,l=[],c=0;do{if(e.available()===8)return;const u=e.readBits(8);if(u===254)return;this.parseTwoBytes(u,e.readBits(8),l);for(let h=0;h<3;h++){const m=l[h];switch(c){case 0:if(m<3)c=m+1;else if(m<this.TEXT_BASIC_SET_CHARS.length){const C=this.TEXT_BASIC_SET_CHARS[m];i?(n.append(String.fromCharCode(C.charCodeAt(0)+128)),i=!1):n.append(C)}else throw new q;break;case 1:i?(n.append(String.fromCharCode(m+128)),i=!1):n.append(String.fromCharCode(m)),c=0;break;case 2:if(m<this.TEXT_SHIFT2_SET_CHARS.length){const C=this.TEXT_SHIFT2_SET_CHARS[m];i?(n.append(String.fromCharCode(C.charCodeAt(0)+128)),i=!1):n.append(C)}else switch(m){case 27:n.append("");break;case 30:i=!0;break;default:throw new q}c=0;break;case 3:if(m<this.TEXT_SHIFT3_SET_CHARS.length){const C=this.TEXT_SHIFT3_SET_CHARS[m];i?(n.append(String.fromCharCode(C.charCodeAt(0)+128)),i=!1):n.append(C),c=0}else throw new q;break;default:throw new q}}}while(e.available()>0)}static decodeAnsiX12Segment(e,n){const i=[];do{if(e.available()===8)return;const l=e.readBits(8);if(l===254)return;this.parseTwoBytes(l,e.readBits(8),i);for(let c=0;c<3;c++){const u=i[c];switch(u){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(u<14)n.append(String.fromCharCode(u+44));else if(u<40)n.append(String.fromCharCode(u+51));else throw new q;break}}}while(e.available()>0)}static parseTwoBytes(e,n,i){let l=(e<<8)+n-1,c=Math.floor(l/1600);i[0]=c,l-=c*1600,c=Math.floor(l/40),i[1]=c,i[2]=l-c*40}static decodeEdifactSegment(e,n){do{if(e.available()<=16)return;for(let i=0;i<4;i++){let l=e.readBits(6);if(l===31){const c=8-e.getBitOffset();c!==8&&e.readBits(c);return}l&32||(l|=64),n.append(String.fromCharCode(l))}}while(e.available()>0)}static decodeBase256Segment(e,n,i){let l=1+e.getByteOffset();const c=this.unrandomize255State(e.readBits(8),l++);let u;if(c===0?u=e.available()/8|0:c<250?u=c:u=250*(c-249)+this.unrandomize255State(e.readBits(8),l++),u<0)throw new q;const h=new Uint8Array(u);for(let m=0;m<u;m++){if(e.available()<8)throw new q;h[m]=this.unrandomize255State(e.readBits(8),l++)}i.push(h);try{n.append(Be.decode(h,Ne.ISO88591))}catch(m){throw new ht("Platform does not support required encoding: "+m.message)}}static unrandomize255State(e,n){const i=149*n%255+1,l=e-i;return l>=0?l:l+256}}Tr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Tr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Tr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Tr.TEXT_SHIFT2_SET_CHARS=Tr.C40_SHIFT2_SET_CHARS,Tr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class no{constructor(){this.rsDecoder=new Pt(ye.DATA_MATRIX_FIELD_256)}decode(e){const n=new hr(e),i=n.getVersion(),l=n.readCodewords(),c=Wo.getDataBlocks(l,i);let u=0;for(let C of c)u+=C.getNumDataCodewords();const h=new Uint8Array(u),m=c.length;for(let C=0;C<m;C++){const _=c[C],P=_.getCodewords(),D=_.getNumDataCodewords();this.correctErrors(P,D);for(let H=0;H<D;H++)h[H*m+C]=P[H]}return Tr.decode(h)}correctErrors(e,n){const i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-n)}catch{throw new M}for(let l=0;l<n;l++)e[l]=i[l]}}class Zt{constructor(e){this.image=e,this.rectangleDetector=new we(this.image)}detect(){const e=this.rectangleDetector.detect();let n=this.detectSolid1(e);if(n=this.detectSolid2(n),n[3]=this.correctTopRight(n),!n[3])throw new Q;n=this.shiftToModuleCenter(n);const i=n[0],l=n[1],c=n[2],u=n[3];let h=this.transitionsBetween(i,u)+1,m=this.transitionsBetween(c,u)+1;(h&1)===1&&(h+=1),(m&1)===1&&(m+=1),4*h<7*m&&4*m<7*h&&(h=m=Math.max(h,m));let C=Zt.sampleGrid(this.image,i,l,c,u,h,m);return new yn(C,[i,l,c,u])}static shiftPoint(e,n,i){let l=(n.getX()-e.getX())/(i+1),c=(n.getY()-e.getY())/(i+1);return new Pe(e.getX()+l,e.getY()+c)}static moveAway(e,n,i){let l=e.getX(),c=e.getY();return l<n?l-=1:l+=1,c<i?c-=1:c+=1,new Pe(l,c)}detectSolid1(e){let n=e[0],i=e[1],l=e[3],c=e[2],u=this.transitionsBetween(n,i),h=this.transitionsBetween(i,l),m=this.transitionsBetween(l,c),C=this.transitionsBetween(c,n),_=u,P=[c,n,i,l];return _>h&&(_=h,P[0]=n,P[1]=i,P[2]=l,P[3]=c),_>m&&(_=m,P[0]=i,P[1]=l,P[2]=c,P[3]=n),_>C&&(P[0]=l,P[1]=c,P[2]=n,P[3]=i),P}detectSolid2(e){let n=e[0],i=e[1],l=e[2],c=e[3],u=this.transitionsBetween(n,c),h=Zt.shiftPoint(i,l,(u+1)*4),m=Zt.shiftPoint(l,i,(u+1)*4),C=this.transitionsBetween(h,n),_=this.transitionsBetween(m,c);return C<_?(e[0]=n,e[1]=i,e[2]=l,e[3]=c):(e[0]=i,e[1]=l,e[2]=c,e[3]=n),e}correctTopRight(e){let n=e[0],i=e[1],l=e[2],c=e[3],u=this.transitionsBetween(n,c),h=this.transitionsBetween(i,c),m=Zt.shiftPoint(n,i,(h+1)*4),C=Zt.shiftPoint(l,i,(u+1)*4);u=this.transitionsBetween(m,c),h=this.transitionsBetween(C,c);let _=new Pe(c.getX()+(l.getX()-i.getX())/(u+1),c.getY()+(l.getY()-i.getY())/(u+1)),P=new Pe(c.getX()+(n.getX()-i.getX())/(h+1),c.getY()+(n.getY()-i.getY())/(h+1));if(!this.isValid(_))return this.isValid(P)?P:null;if(!this.isValid(P))return _;let D=this.transitionsBetween(m,_)+this.transitionsBetween(C,_),H=this.transitionsBetween(m,P)+this.transitionsBetween(C,P);return D>H?_:P}shiftToModuleCenter(e){let n=e[0],i=e[1],l=e[2],c=e[3],u=this.transitionsBetween(n,c)+1,h=this.transitionsBetween(l,c)+1,m=Zt.shiftPoint(n,i,h*4),C=Zt.shiftPoint(l,i,u*4);u=this.transitionsBetween(m,c)+1,h=this.transitionsBetween(C,c)+1,(u&1)===1&&(u+=1),(h&1)===1&&(h+=1);let _=(n.getX()+i.getX()+l.getX()+c.getX())/4,P=(n.getY()+i.getY()+l.getY()+c.getY())/4;n=Zt.moveAway(n,_,P),i=Zt.moveAway(i,_,P),l=Zt.moveAway(l,_,P),c=Zt.moveAway(c,_,P);let D,H;return m=Zt.shiftPoint(n,i,h*4),m=Zt.shiftPoint(m,c,u*4),D=Zt.shiftPoint(i,n,h*4),D=Zt.shiftPoint(D,l,u*4),C=Zt.shiftPoint(l,c,h*4),C=Zt.shiftPoint(C,i,u*4),H=Zt.shiftPoint(c,l,h*4),H=Zt.shiftPoint(H,n,u*4),[m,D,C,H]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,n,i,l,c,u,h){return Ge.getInstance().sampleGrid(e,u,h,.5,.5,u-.5,.5,u-.5,h-.5,.5,h-.5,n.getX(),n.getY(),c.getX(),c.getY(),l.getX(),l.getY(),i.getX(),i.getY())}transitionsBetween(e,n){let i=Math.trunc(e.getX()),l=Math.trunc(e.getY()),c=Math.trunc(n.getX()),u=Math.trunc(n.getY()),h=Math.abs(u-l)>Math.abs(c-i);if(h){let Z=i;i=l,l=Z,Z=c,c=u,u=Z}let m=Math.abs(c-i),C=Math.abs(u-l),_=-m/2,P=l<u?1:-1,D=i<c?1:-1,H=0,X=this.image.get(h?l:i,h?i:l);for(let Z=i,te=l;Z!==c;Z+=D){let de=this.image.get(h?te:Z,h?Z:te);if(de!==X&&(H++,X=de),_+=C,_>0){if(te===u)break;te+=P,_-=m}}return H}}class Ir{constructor(){this.decoder=new no}decode(e,n=null){let i,l;if(n!=null&&n.has(ne.PURE_BARCODE)){const C=Ir.extractPureBits(e.getBlackMatrix());i=this.decoder.decode(C),l=Ir.NO_POINTS}else{const C=new Zt(e.getBlackMatrix()).detect();i=this.decoder.decode(C.getBits()),l=C.getPoints()}const c=i.getRawBytes(),u=new ve(i.getText(),c,8*c.length,l,ie.DATA_MATRIX,B.currentTimeMillis()),h=i.getByteSegments();h!=null&&u.putMetadata(Ae.BYTE_SEGMENTS,h);const m=i.getECLevel();return m!=null&&u.putMetadata(Ae.ERROR_CORRECTION_LEVEL,m),u}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(n==null||i==null)throw new Q;const l=this.moduleSize(n,e);let c=n[1];const u=i[1];let h=n[0];const C=(i[0]-h+1)/l,_=(u-c+1)/l;if(C<=0||_<=0)throw new Q;const P=l/2;c+=P,h+=P;const D=new Se(C,_);for(let H=0;H<_;H++){const X=c+H*l;for(let Z=0;Z<C;Z++)e.get(h+Z*l,X)&&D.set(Z,H)}return D}static moduleSize(e,n){const i=n.getWidth();let l=e[0];const c=e[1];for(;l<i&&n.get(l,c);)l++;if(l===i)throw new Q;const u=l-e[0];if(u===0)throw new Q;return u}}Ir.NO_POINTS=[];class Lc extends pe{constructor(e=500){super(new Ir,e)}}var $i;(function(k){k[k.L=0]="L",k[k.M=1]="M",k[k.Q=2]="Q",k[k.H=3]="H"})($i||($i={}));class Xt{constructor(e,n,i){this.value=e,this.stringValue=n,this.bits=i,Xt.FOR_BITS.set(i,this),Xt.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return Xt.L;case"M":return Xt.M;case"Q":return Xt.Q;case"H":return Xt.H;default:throw new S(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof Xt))return!1;const n=e;return this.value===n.value}static forBits(e){if(e<0||e>=Xt.FOR_BITS.size)throw new I;return Xt.FOR_BITS.get(e)}}Xt.FOR_BITS=new Map,Xt.FOR_VALUE=new Map,Xt.L=new Xt($i.L,"L",1),Xt.M=new Xt($i.M,"M",0),Xt.Q=new Xt($i.Q,"Q",3),Xt.H=new Xt($i.H,"H",2);class Nn{constructor(e){this.errorCorrectionLevel=Xt.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,n){return V.bitCount(e^n)}static decodeFormatInformation(e,n){const i=Nn.doDecodeFormatInformation(e,n);return i!==null?i:Nn.doDecodeFormatInformation(e^Nn.FORMAT_INFO_MASK_QR,n^Nn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,n){let i=Number.MAX_SAFE_INTEGER,l=0;for(const c of Nn.FORMAT_INFO_DECODE_LOOKUP){const u=c[0];if(u===e||u===n)return new Nn(c[1]);let h=Nn.numBitsDiffering(e,u);h<i&&(l=c[1],i=h),e!==n&&(h=Nn.numBitsDiffering(n,u),h<i&&(l=c[1],i=h))}return i<=3?new Nn(l):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof Nn))return!1;const n=e;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask}}Nn.FORMAT_INFO_MASK_QR=21522,Nn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class se{constructor(e,...n){this.ecCodewordsPerBlock=e,this.ecBlocks=n}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const n=this.ecBlocks;for(const i of n)e+=i.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class F{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class it{constructor(e,n,...i){this.versionNumber=e,this.alignmentPatternCenters=n,this.ecBlocks=i;let l=0;const c=i[0].getECCodewordsPerBlock(),u=i[0].getECBlocks();for(const h of u)l+=h.getCount()*(h.getDataCodewords()+c);this.totalCodewords=l}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new q;try{return this.getVersionForNumber((e-17)/4)}catch{throw new q}}static getVersionForNumber(e){if(e<1||e>40)throw new I;return it.VERSIONS[e-1]}static decodeVersionInformation(e){let n=Number.MAX_SAFE_INTEGER,i=0;for(let l=0;l<it.VERSION_DECODE_INFO.length;l++){const c=it.VERSION_DECODE_INFO[l];if(c===e)return it.getVersionForNumber(l+7);const u=Nn.numBitsDiffering(e,c);u<n&&(i=l+7,n=u)}return n<=3?it.getVersionForNumber(i):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),n=new Se(e);n.setRegion(0,0,9,9),n.setRegion(e-8,0,8,9),n.setRegion(0,e-8,9,8);const i=this.alignmentPatternCenters.length;for(let l=0;l<i;l++){const c=this.alignmentPatternCenters[l]-2;for(let u=0;u<i;u++)l===0&&(u===0||u===i-1)||l===i-1&&u===0||n.setRegion(this.alignmentPatternCenters[u]-2,c,5,5)}return n.setRegion(6,9,1,e-17),n.setRegion(9,6,e-17,1),this.versionNumber>6&&(n.setRegion(e-11,0,3,6),n.setRegion(0,e-11,6,3)),n}toString(){return""+this.versionNumber}}it.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),it.VERSIONS=[new it(1,new Int32Array(0),new se(7,new F(1,19)),new se(10,new F(1,16)),new se(13,new F(1,13)),new se(17,new F(1,9))),new it(2,Int32Array.from([6,18]),new se(10,new F(1,34)),new se(16,new F(1,28)),new se(22,new F(1,22)),new se(28,new F(1,16))),new it(3,Int32Array.from([6,22]),new se(15,new F(1,55)),new se(26,new F(1,44)),new se(18,new F(2,17)),new se(22,new F(2,13))),new it(4,Int32Array.from([6,26]),new se(20,new F(1,80)),new se(18,new F(2,32)),new se(26,new F(2,24)),new se(16,new F(4,9))),new it(5,Int32Array.from([6,30]),new se(26,new F(1,108)),new se(24,new F(2,43)),new se(18,new F(2,15),new F(2,16)),new se(22,new F(2,11),new F(2,12))),new it(6,Int32Array.from([6,34]),new se(18,new F(2,68)),new se(16,new F(4,27)),new se(24,new F(4,19)),new se(28,new F(4,15))),new it(7,Int32Array.from([6,22,38]),new se(20,new F(2,78)),new se(18,new F(4,31)),new se(18,new F(2,14),new F(4,15)),new se(26,new F(4,13),new F(1,14))),new it(8,Int32Array.from([6,24,42]),new se(24,new F(2,97)),new se(22,new F(2,38),new F(2,39)),new se(22,new F(4,18),new F(2,19)),new se(26,new F(4,14),new F(2,15))),new it(9,Int32Array.from([6,26,46]),new se(30,new F(2,116)),new se(22,new F(3,36),new F(2,37)),new se(20,new F(4,16),new F(4,17)),new se(24,new F(4,12),new F(4,13))),new it(10,Int32Array.from([6,28,50]),new se(18,new F(2,68),new F(2,69)),new se(26,new F(4,43),new F(1,44)),new se(24,new F(6,19),new F(2,20)),new se(28,new F(6,15),new F(2,16))),new it(11,Int32Array.from([6,30,54]),new se(20,new F(4,81)),new se(30,new F(1,50),new F(4,51)),new se(28,new F(4,22),new F(4,23)),new se(24,new F(3,12),new F(8,13))),new it(12,Int32Array.from([6,32,58]),new se(24,new F(2,92),new F(2,93)),new se(22,new F(6,36),new F(2,37)),new se(26,new F(4,20),new F(6,21)),new se(28,new F(7,14),new F(4,15))),new it(13,Int32Array.from([6,34,62]),new se(26,new F(4,107)),new se(22,new F(8,37),new F(1,38)),new se(24,new F(8,20),new F(4,21)),new se(22,new F(12,11),new F(4,12))),new it(14,Int32Array.from([6,26,46,66]),new se(30,new F(3,115),new F(1,116)),new se(24,new F(4,40),new F(5,41)),new se(20,new F(11,16),new F(5,17)),new se(24,new F(11,12),new F(5,13))),new it(15,Int32Array.from([6,26,48,70]),new se(22,new F(5,87),new F(1,88)),new se(24,new F(5,41),new F(5,42)),new se(30,new F(5,24),new F(7,25)),new se(24,new F(11,12),new F(7,13))),new it(16,Int32Array.from([6,26,50,74]),new se(24,new F(5,98),new F(1,99)),new se(28,new F(7,45),new F(3,46)),new se(24,new F(15,19),new F(2,20)),new se(30,new F(3,15),new F(13,16))),new it(17,Int32Array.from([6,30,54,78]),new se(28,new F(1,107),new F(5,108)),new se(28,new F(10,46),new F(1,47)),new se(28,new F(1,22),new F(15,23)),new se(28,new F(2,14),new F(17,15))),new it(18,Int32Array.from([6,30,56,82]),new se(30,new F(5,120),new F(1,121)),new se(26,new F(9,43),new F(4,44)),new se(28,new F(17,22),new F(1,23)),new se(28,new F(2,14),new F(19,15))),new it(19,Int32Array.from([6,30,58,86]),new se(28,new F(3,113),new F(4,114)),new se(26,new F(3,44),new F(11,45)),new se(26,new F(17,21),new F(4,22)),new se(26,new F(9,13),new F(16,14))),new it(20,Int32Array.from([6,34,62,90]),new se(28,new F(3,107),new F(5,108)),new se(26,new F(3,41),new F(13,42)),new se(30,new F(15,24),new F(5,25)),new se(28,new F(15,15),new F(10,16))),new it(21,Int32Array.from([6,28,50,72,94]),new se(28,new F(4,116),new F(4,117)),new se(26,new F(17,42)),new se(28,new F(17,22),new F(6,23)),new se(30,new F(19,16),new F(6,17))),new it(22,Int32Array.from([6,26,50,74,98]),new se(28,new F(2,111),new F(7,112)),new se(28,new F(17,46)),new se(30,new F(7,24),new F(16,25)),new se(24,new F(34,13))),new it(23,Int32Array.from([6,30,54,78,102]),new se(30,new F(4,121),new F(5,122)),new se(28,new F(4,47),new F(14,48)),new se(30,new F(11,24),new F(14,25)),new se(30,new F(16,15),new F(14,16))),new it(24,Int32Array.from([6,28,54,80,106]),new se(30,new F(6,117),new F(4,118)),new se(28,new F(6,45),new F(14,46)),new se(30,new F(11,24),new F(16,25)),new se(30,new F(30,16),new F(2,17))),new it(25,Int32Array.from([6,32,58,84,110]),new se(26,new F(8,106),new F(4,107)),new se(28,new F(8,47),new F(13,48)),new se(30,new F(7,24),new F(22,25)),new se(30,new F(22,15),new F(13,16))),new it(26,Int32Array.from([6,30,58,86,114]),new se(28,new F(10,114),new F(2,115)),new se(28,new F(19,46),new F(4,47)),new se(28,new F(28,22),new F(6,23)),new se(30,new F(33,16),new F(4,17))),new it(27,Int32Array.from([6,34,62,90,118]),new se(30,new F(8,122),new F(4,123)),new se(28,new F(22,45),new F(3,46)),new se(30,new F(8,23),new F(26,24)),new se(30,new F(12,15),new F(28,16))),new it(28,Int32Array.from([6,26,50,74,98,122]),new se(30,new F(3,117),new F(10,118)),new se(28,new F(3,45),new F(23,46)),new se(30,new F(4,24),new F(31,25)),new se(30,new F(11,15),new F(31,16))),new it(29,Int32Array.from([6,30,54,78,102,126]),new se(30,new F(7,116),new F(7,117)),new se(28,new F(21,45),new F(7,46)),new se(30,new F(1,23),new F(37,24)),new se(30,new F(19,15),new F(26,16))),new it(30,Int32Array.from([6,26,52,78,104,130]),new se(30,new F(5,115),new F(10,116)),new se(28,new F(19,47),new F(10,48)),new se(30,new F(15,24),new F(25,25)),new se(30,new F(23,15),new F(25,16))),new it(31,Int32Array.from([6,30,56,82,108,134]),new se(30,new F(13,115),new F(3,116)),new se(28,new F(2,46),new F(29,47)),new se(30,new F(42,24),new F(1,25)),new se(30,new F(23,15),new F(28,16))),new it(32,Int32Array.from([6,34,60,86,112,138]),new se(30,new F(17,115)),new se(28,new F(10,46),new F(23,47)),new se(30,new F(10,24),new F(35,25)),new se(30,new F(19,15),new F(35,16))),new it(33,Int32Array.from([6,30,58,86,114,142]),new se(30,new F(17,115),new F(1,116)),new se(28,new F(14,46),new F(21,47)),new se(30,new F(29,24),new F(19,25)),new se(30,new F(11,15),new F(46,16))),new it(34,Int32Array.from([6,34,62,90,118,146]),new se(30,new F(13,115),new F(6,116)),new se(28,new F(14,46),new F(23,47)),new se(30,new F(44,24),new F(7,25)),new se(30,new F(59,16),new F(1,17))),new it(35,Int32Array.from([6,30,54,78,102,126,150]),new se(30,new F(12,121),new F(7,122)),new se(28,new F(12,47),new F(26,48)),new se(30,new F(39,24),new F(14,25)),new se(30,new F(22,15),new F(41,16))),new it(36,Int32Array.from([6,24,50,76,102,128,154]),new se(30,new F(6,121),new F(14,122)),new se(28,new F(6,47),new F(34,48)),new se(30,new F(46,24),new F(10,25)),new se(30,new F(2,15),new F(64,16))),new it(37,Int32Array.from([6,28,54,80,106,132,158]),new se(30,new F(17,122),new F(4,123)),new se(28,new F(29,46),new F(14,47)),new se(30,new F(49,24),new F(10,25)),new se(30,new F(24,15),new F(46,16))),new it(38,Int32Array.from([6,32,58,84,110,136,162]),new se(30,new F(4,122),new F(18,123)),new se(28,new F(13,46),new F(32,47)),new se(30,new F(48,24),new F(14,25)),new se(30,new F(42,15),new F(32,16))),new it(39,Int32Array.from([6,26,54,82,110,138,166]),new se(30,new F(20,117),new F(4,118)),new se(28,new F(40,47),new F(7,48)),new se(30,new F(43,24),new F(22,25)),new se(30,new F(10,15),new F(67,16))),new it(40,Int32Array.from([6,30,58,86,114,142,170]),new se(30,new F(19,118),new F(6,119)),new se(28,new F(18,47),new F(31,48)),new se(30,new F(34,24),new F(34,25)),new se(30,new F(20,15),new F(61,16)))];var hn;(function(k){k[k.DATA_MASK_000=0]="DATA_MASK_000",k[k.DATA_MASK_001=1]="DATA_MASK_001",k[k.DATA_MASK_010=2]="DATA_MASK_010",k[k.DATA_MASK_011=3]="DATA_MASK_011",k[k.DATA_MASK_100=4]="DATA_MASK_100",k[k.DATA_MASK_101=5]="DATA_MASK_101",k[k.DATA_MASK_110=6]="DATA_MASK_110",k[k.DATA_MASK_111=7]="DATA_MASK_111"})(hn||(hn={}));class Tt{constructor(e,n){this.value=e,this.isMasked=n}unmaskBitMatrix(e,n){for(let i=0;i<n;i++)for(let l=0;l<n;l++)this.isMasked(i,l)&&e.flip(l,i)}}Tt.values=new Map([[hn.DATA_MASK_000,new Tt(hn.DATA_MASK_000,(k,e)=>(k+e&1)===0)],[hn.DATA_MASK_001,new Tt(hn.DATA_MASK_001,(k,e)=>(k&1)===0)],[hn.DATA_MASK_010,new Tt(hn.DATA_MASK_010,(k,e)=>e%3===0)],[hn.DATA_MASK_011,new Tt(hn.DATA_MASK_011,(k,e)=>(k+e)%3===0)],[hn.DATA_MASK_100,new Tt(hn.DATA_MASK_100,(k,e)=>(Math.floor(k/2)+Math.floor(e/3)&1)===0)],[hn.DATA_MASK_101,new Tt(hn.DATA_MASK_101,(k,e)=>k*e%6===0)],[hn.DATA_MASK_110,new Tt(hn.DATA_MASK_110,(k,e)=>k*e%6<3)],[hn.DATA_MASK_111,new Tt(hn.DATA_MASK_111,(k,e)=>(k+e+k*e%3&1)===0)]]);class Qa{constructor(e){const n=e.getHeight();if(n<21||(n&3)!==1)throw new q;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let c=0;c<6;c++)e=this.copyBit(c,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let c=5;c>=0;c--)e=this.copyBit(8,c,e);const n=this.bitMatrix.getHeight();let i=0;const l=n-7;for(let c=n-1;c>=l;c--)i=this.copyBit(8,c,i);for(let c=n-8;c<n;c++)i=this.copyBit(c,8,i);if(this.parsedFormatInfo=Nn.decodeFormatInformation(e,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new q}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),n=Math.floor((e-17)/4);if(n<=6)return it.getVersionForNumber(n);let i=0;const l=e-11;for(let u=5;u>=0;u--)for(let h=e-9;h>=l;h--)i=this.copyBit(h,u,i);let c=it.decodeVersionInformation(i);if(c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;i=0;for(let u=5;u>=0;u--)for(let h=e-9;h>=l;h--)i=this.copyBit(u,h,i);if(c=it.decodeVersionInformation(i),c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;throw new q}copyBit(e,n,i){return(this.isMirror?this.bitMatrix.get(n,e):this.bitMatrix.get(e,n))?i<<1|1:i<<1}readCodewords(){const e=this.readFormatInformation(),n=this.readVersion(),i=Tt.values.get(e.getDataMask()),l=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,l);const c=n.buildFunctionPattern();let u=!0;const h=new Uint8Array(n.getTotalCodewords());let m=0,C=0,_=0;for(let P=l-1;P>0;P-=2){P===6&&P--;for(let D=0;D<l;D++){const H=u?l-1-D:D;for(let X=0;X<2;X++)c.get(P-X,H)||(_++,C<<=1,this.bitMatrix.get(P-X,H)&&(C|=1),_===8&&(h[m++]=C,_=0,C=0))}u=!u}if(m!==n.getTotalCodewords())throw new q;return h}remask(){if(this.parsedFormatInfo===null)return;const e=Tt.values[this.parsedFormatInfo.getDataMask()],n=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,n)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let n=0,i=e.getWidth();n<i;n++)for(let l=n+1,c=e.getHeight();l<c;l++)e.get(n,l)!==e.get(l,n)&&(e.flip(l,n),e.flip(n,l))}}class ro{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n,i){if(e.length!==n.getTotalCodewords())throw new I;const l=n.getECBlocksForLevel(i);let c=0;const u=l.getECBlocks();for(const X of u)c+=X.getCount();const h=new Array(c);let m=0;for(const X of u)for(let Z=0;Z<X.getCount();Z++){const te=X.getDataCodewords(),de=l.getECCodewordsPerBlock()+te;h[m++]=new ro(te,new Uint8Array(de))}const C=h[0].codewords.length;let _=h.length-1;for(;_>=0&&h[_].codewords.length!==C;)_--;_++;const P=C-l.getECCodewordsPerBlock();let D=0;for(let X=0;X<P;X++)for(let Z=0;Z<m;Z++)h[Z].codewords[X]=e[D++];for(let X=_;X<m;X++)h[X].codewords[P]=e[D++];const H=h[0].codewords.length;for(let X=P;X<H;X++)for(let Z=0;Z<m;Z++){const te=Z<_?X:X+1;h[Z].codewords[te]=e[D++]}return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var rr;(function(k){k[k.TERMINATOR=0]="TERMINATOR",k[k.NUMERIC=1]="NUMERIC",k[k.ALPHANUMERIC=2]="ALPHANUMERIC",k[k.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",k[k.BYTE=4]="BYTE",k[k.ECI=5]="ECI",k[k.KANJI=6]="KANJI",k[k.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",k[k.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",k[k.HANZI=9]="HANZI"})(rr||(rr={}));class st{constructor(e,n,i,l){this.value=e,this.stringValue=n,this.characterCountBitsForVersions=i,this.bits=l,st.FOR_BITS.set(l,this),st.FOR_VALUE.set(e,this)}static forBits(e){const n=st.FOR_BITS.get(e);if(n===void 0)throw new I;return n}getCharacterCountBits(e){const n=e.getVersionNumber();let i;return n<=9?i=0:n<=26?i=1:i=2,this.characterCountBitsForVersions[i]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof st))return!1;const n=e;return this.value===n.value}toString(){return this.stringValue}}st.FOR_BITS=new Map,st.FOR_VALUE=new Map,st.TERMINATOR=new st(rr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),st.NUMERIC=new st(rr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),st.ALPHANUMERIC=new st(rr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),st.STRUCTURED_APPEND=new st(rr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),st.BYTE=new st(rr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),st.ECI=new st(rr.ECI,"ECI",Int32Array.from([0,0,0]),7),st.KANJI=new st(rr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),st.FNC1_FIRST_POSITION=new st(rr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),st.FNC1_SECOND_POSITION=new st(rr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),st.HANZI=new st(rr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Kt{static decode(e,n,i,l){const c=new Ho(e);let u=new Le;const h=new Array;let m=-1,C=-1;try{let _=null,P=!1,D;do{if(c.available()<4)D=st.TERMINATOR;else{const H=c.readBits(4);D=st.forBits(H)}switch(D){case st.TERMINATOR:break;case st.FNC1_FIRST_POSITION:case st.FNC1_SECOND_POSITION:P=!0;break;case st.STRUCTURED_APPEND:if(c.available()<16)throw new q;m=c.readBits(8),C=c.readBits(8);break;case st.ECI:const H=Kt.parseECIValue(c);if(_=K.getCharacterSetECIByValue(H),_===null)throw new q;break;case st.HANZI:const X=c.readBits(4),Z=c.readBits(D.getCharacterCountBits(n));X===Kt.GB2312_SUBSET&&Kt.decodeHanziSegment(c,u,Z);break;default:const te=c.readBits(D.getCharacterCountBits(n));switch(D){case st.NUMERIC:Kt.decodeNumericSegment(c,u,te);break;case st.ALPHANUMERIC:Kt.decodeAlphanumericSegment(c,u,te,P);break;case st.BYTE:Kt.decodeByteSegment(c,u,te,_,h,l);break;case st.KANJI:Kt.decodeKanjiSegment(c,u,te);break;default:throw new q}break}}while(D!==st.TERMINATOR)}catch{throw new q}return new Ve(e,u.toString(),h.length===0?null:h,i===null?null:i.toString(),m,C)}static decodeHanziSegment(e,n,i){if(i*13>e.available())throw new q;const l=new Uint8Array(2*i);let c=0;for(;i>0;){const u=e.readBits(13);let h=u/96<<8&4294967295|u%96;h<959?h+=41377:h+=42657,l[c]=h>>8&255,l[c+1]=h&255,c+=2,i--}try{n.append(Be.decode(l,Ne.GB2312))}catch(u){throw new q(u)}}static decodeKanjiSegment(e,n,i){if(i*13>e.available())throw new q;const l=new Uint8Array(2*i);let c=0;for(;i>0;){const u=e.readBits(13);let h=u/192<<8&4294967295|u%192;h<7936?h+=33088:h+=49472,l[c]=h>>8,l[c+1]=h,c+=2,i--}try{n.append(Be.decode(l,Ne.SHIFT_JIS))}catch(u){throw new q(u)}}static decodeByteSegment(e,n,i,l,c,u){if(8*i>e.available())throw new q;const h=new Uint8Array(i);for(let C=0;C<i;C++)h[C]=e.readBits(8);let m;l===null?m=Ne.guessEncoding(h,u):m=l.getName();try{n.append(Be.decode(h,m))}catch(C){throw new q(C)}c.push(h)}static toAlphaNumericChar(e){if(e>=Kt.ALPHANUMERIC_CHARS.length)throw new q;return Kt.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,n,i,l){const c=n.length();for(;i>1;){if(e.available()<11)throw new q;const u=e.readBits(11);n.append(Kt.toAlphaNumericChar(Math.floor(u/45))),n.append(Kt.toAlphaNumericChar(u%45)),i-=2}if(i===1){if(e.available()<6)throw new q;n.append(Kt.toAlphaNumericChar(e.readBits(6)))}if(l)for(let u=c;u<n.length();u++)n.charAt(u)==="%"&&(u<n.length()-1&&n.charAt(u+1)==="%"?n.deleteCharAt(u+1):n.setCharAt(u,""))}static decodeNumericSegment(e,n,i){for(;i>=3;){if(e.available()<10)throw new q;const l=e.readBits(10);if(l>=1e3)throw new q;n.append(Kt.toAlphaNumericChar(Math.floor(l/100))),n.append(Kt.toAlphaNumericChar(Math.floor(l/10)%10)),n.append(Kt.toAlphaNumericChar(l%10)),i-=3}if(i===2){if(e.available()<7)throw new q;const l=e.readBits(7);if(l>=100)throw new q;n.append(Kt.toAlphaNumericChar(Math.floor(l/10))),n.append(Kt.toAlphaNumericChar(l%10))}else if(i===1){if(e.available()<4)throw new q;const l=e.readBits(4);if(l>=10)throw new q;n.append(Kt.toAlphaNumericChar(l))}}static parseECIValue(e){const n=e.readBits(8);if(!(n&128))return n&127;if((n&192)===128){const i=e.readBits(8);return(n&63)<<8&4294967295|i}if((n&224)===192){const i=e.readBits(16);return(n&31)<<16&4294967295|i}throw new q}}Kt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Kt.GB2312_SUBSET=1;class Go{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const n=e[0];e[0]=e[2],e[2]=n}}class Xo{constructor(){this.rsDecoder=new Pt(ye.QR_CODE_FIELD_256)}decodeBooleanArray(e,n){return this.decodeBitMatrix(Se.parseFromBooleanArray(e),n)}decodeBitMatrix(e,n){const i=new Qa(e);let l=null;try{return this.decodeBitMatrixParser(i,n)}catch(c){l=c}try{i.remask(),i.setMirror(!0),i.readVersion(),i.readFormatInformation(),i.mirror();const c=this.decodeBitMatrixParser(i,n);return c.setOther(new Go(!0)),c}catch(c){throw l!==null?l:c}}decodeBitMatrixParser(e,n){const i=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),c=e.readCodewords(),u=ro.getDataBlocks(c,i,l);let h=0;for(const _ of u)h+=_.getNumDataCodewords();const m=new Uint8Array(h);let C=0;for(const _ of u){const P=_.getCodewords(),D=_.getNumDataCodewords();this.correctErrors(P,D);for(let H=0;H<D;H++)m[C++]=P[H]}return Kt.decode(m,i,l,n)}correctErrors(e,n){const i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-n)}catch{throw new M}for(let l=0;l<n;l++)e[l]=i[l]}}class Zi extends Pe{constructor(e,n,i){super(e,n),this.estimatedModuleSize=i}aboutEquals(e,n,i){if(Math.abs(n-this.getY())<=e&&Math.abs(i-this.getX())<=e){const l=Math.abs(e-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(e,n,i){const l=(this.getX()+n)/2,c=(this.getY()+e)/2,u=(this.estimatedModuleSize+i)/2;return new Zi(l,c,u)}}class Nr{constructor(e,n,i,l,c,u,h){this.image=e,this.startX=n,this.startY=i,this.width=l,this.height=c,this.moduleSize=u,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,n=this.height,i=this.width,l=e+i,c=this.startY+n/2,u=new Int32Array(3),h=this.image;for(let m=0;m<n;m++){const C=c+(m&1?-Math.floor((m+1)/2):Math.floor((m+1)/2));u[0]=0,u[1]=0,u[2]=0;let _=e;for(;_<l&&!h.get(_,C);)_++;let P=0;for(;_<l;){if(h.get(_,C))if(P===1)u[1]++;else if(P===2){if(this.foundPatternCross(u)){const D=this.handlePossibleCenter(u,C,_);if(D!==null)return D}u[0]=u[2],u[1]=1,u[2]=0,P=1}else u[++P]++;else P===1&&P++,u[P]++;_++}if(this.foundPatternCross(u)){const D=this.handlePossibleCenter(u,C,l);if(D!==null)return D}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Q}static centerFromEnd(e,n){return n-e[2]-e[1]/2}foundPatternCross(e){const n=this.moduleSize,i=n/2;for(let l=0;l<3;l++)if(Math.abs(n-e[l])>=i)return!1;return!0}crossCheckVertical(e,n,i,l){const c=this.image,u=c.getHeight(),h=this.crossCheckStateCount;h[0]=0,h[1]=0,h[2]=0;let m=e;for(;m>=0&&c.get(n,m)&&h[1]<=i;)h[1]++,m--;if(m<0||h[1]>i)return NaN;for(;m>=0&&!c.get(n,m)&&h[0]<=i;)h[0]++,m--;if(h[0]>i)return NaN;for(m=e+1;m<u&&c.get(n,m)&&h[1]<=i;)h[1]++,m++;if(m===u||h[1]>i)return NaN;for(;m<u&&!c.get(n,m)&&h[2]<=i;)h[2]++,m++;if(h[2]>i)return NaN;const C=h[0]+h[1]+h[2];return 5*Math.abs(C-l)>=2*l?NaN:this.foundPatternCross(h)?Nr.centerFromEnd(h,m):NaN}handlePossibleCenter(e,n,i){const l=e[0]+e[1]+e[2],c=Nr.centerFromEnd(e,i),u=this.crossCheckVertical(n,c,2*e[1],l);if(!isNaN(u)){const h=(e[0]+e[1]+e[2])/3;for(const C of this.possibleCenters)if(C.aboutEquals(h,u,c))return C.combineEstimate(u,c,h);const m=new Zi(c,u,h);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null}}class Br extends Pe{constructor(e,n,i,l){super(e,n),this.estimatedModuleSize=i,this.count=l,l===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,n,i){if(Math.abs(n-this.getY())<=e&&Math.abs(i-this.getX())<=e){const l=Math.abs(e-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(e,n,i){const l=this.count+1,c=(this.count*this.getX()+n)/l,u=(this.count*this.getY()+e)/l,h=(this.count*this.estimatedModuleSize+i)/l;return new Br(c,u,h,l)}}class ci{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class nn{constructor(e,n){this.image=e,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const n=e!=null&&e.get(ne.TRY_HARDER)!==void 0,i=e!=null&&e.get(ne.PURE_BARCODE)!==void 0,l=this.image,c=l.getHeight(),u=l.getWidth();let h=Math.floor(3*c/(4*nn.MAX_MODULES));(h<nn.MIN_SKIP||n)&&(h=nn.MIN_SKIP);let m=!1;const C=new Int32Array(5);for(let P=h-1;P<c&&!m;P+=h){C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0;let D=0;for(let H=0;H<u;H++)if(l.get(H,P))(D&1)===1&&D++,C[D]++;else if(D&1)C[D]++;else if(D===4)if(nn.foundPatternCross(C)){if(this.handlePossibleCenter(C,P,H,i)===!0)if(h=2,this.hasSkipped===!0)m=this.haveMultiplyConfirmedCenters();else{const Z=this.findRowSkip();Z>C[2]&&(P+=Z-C[2]-h,H=u-1)}else{C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,D=3;continue}D=0,C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0}else C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,D=3;else C[++D]++;nn.foundPatternCross(C)&&this.handlePossibleCenter(C,P,u,i)===!0&&(h=C[0],this.hasSkipped&&(m=this.haveMultiplyConfirmedCenters()))}const _=this.selectBestPatterns();return Pe.orderBestPatterns(_),new ci(_)}static centerFromEnd(e,n){return n-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let n=0;for(let c=0;c<5;c++){const u=e[c];if(u===0)return!1;n+=u}if(n<7)return!1;const i=n/7,l=i/2;return Math.abs(i-e[0])<l&&Math.abs(i-e[1])<l&&Math.abs(3*i-e[2])<3*l&&Math.abs(i-e[3])<l&&Math.abs(i-e[4])<l}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,n,i,l){const c=this.getCrossCheckStateCount();let u=0;const h=this.image;for(;e>=u&&n>=u&&h.get(n-u,e-u);)c[2]++,u++;if(e<u||n<u)return!1;for(;e>=u&&n>=u&&!h.get(n-u,e-u)&&c[1]<=i;)c[1]++,u++;if(e<u||n<u||c[1]>i)return!1;for(;e>=u&&n>=u&&h.get(n-u,e-u)&&c[0]<=i;)c[0]++,u++;if(c[0]>i)return!1;const m=h.getHeight(),C=h.getWidth();for(u=1;e+u<m&&n+u<C&&h.get(n+u,e+u);)c[2]++,u++;if(e+u>=m||n+u>=C)return!1;for(;e+u<m&&n+u<C&&!h.get(n+u,e+u)&&c[3]<i;)c[3]++,u++;if(e+u>=m||n+u>=C||c[3]>=i)return!1;for(;e+u<m&&n+u<C&&h.get(n+u,e+u)&&c[4]<i;)c[4]++,u++;if(c[4]>=i)return!1;const _=c[0]+c[1]+c[2]+c[3]+c[4];return Math.abs(_-l)<2*l&&nn.foundPatternCross(c)}crossCheckVertical(e,n,i,l){const c=this.image,u=c.getHeight(),h=this.getCrossCheckStateCount();let m=e;for(;m>=0&&c.get(n,m);)h[2]++,m--;if(m<0)return NaN;for(;m>=0&&!c.get(n,m)&&h[1]<=i;)h[1]++,m--;if(m<0||h[1]>i)return NaN;for(;m>=0&&c.get(n,m)&&h[0]<=i;)h[0]++,m--;if(h[0]>i)return NaN;for(m=e+1;m<u&&c.get(n,m);)h[2]++,m++;if(m===u)return NaN;for(;m<u&&!c.get(n,m)&&h[3]<i;)h[3]++,m++;if(m===u||h[3]>=i)return NaN;for(;m<u&&c.get(n,m)&&h[4]<i;)h[4]++,m++;if(h[4]>=i)return NaN;const C=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(C-l)>=2*l?NaN:nn.foundPatternCross(h)?nn.centerFromEnd(h,m):NaN}crossCheckHorizontal(e,n,i,l){const c=this.image,u=c.getWidth(),h=this.getCrossCheckStateCount();let m=e;for(;m>=0&&c.get(m,n);)h[2]++,m--;if(m<0)return NaN;for(;m>=0&&!c.get(m,n)&&h[1]<=i;)h[1]++,m--;if(m<0||h[1]>i)return NaN;for(;m>=0&&c.get(m,n)&&h[0]<=i;)h[0]++,m--;if(h[0]>i)return NaN;for(m=e+1;m<u&&c.get(m,n);)h[2]++,m++;if(m===u)return NaN;for(;m<u&&!c.get(m,n)&&h[3]<i;)h[3]++,m++;if(m===u||h[3]>=i)return NaN;for(;m<u&&c.get(m,n)&&h[4]<i;)h[4]++,m++;if(h[4]>=i)return NaN;const C=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(C-l)>=l?NaN:nn.foundPatternCross(h)?nn.centerFromEnd(h,m):NaN}handlePossibleCenter(e,n,i,l){const c=e[0]+e[1]+e[2]+e[3]+e[4];let u=nn.centerFromEnd(e,i),h=this.crossCheckVertical(n,Math.floor(u),e[2],c);if(!isNaN(h)&&(u=this.crossCheckHorizontal(Math.floor(u),Math.floor(h),e[2],c),!isNaN(u)&&(!l||this.crossCheckDiagonal(Math.floor(h),Math.floor(u),e[2],c)))){const m=c/7;let C=!1;const _=this.possibleCenters;for(let P=0,D=_.length;P<D;P++){const H=_[P];if(H.aboutEquals(m,h,u)){_[P]=H.combineEstimate(h,u,m),C=!0;break}}if(!C){const P=new Br(u,h,m);_.push(P),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(P)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let n=null;for(const i of this.possibleCenters)if(i.getCount()>=nn.CENTER_QUORUM)if(n==null)n=i;else return this.hasSkipped=!0,Math.floor((Math.abs(n.getX()-i.getX())-Math.abs(n.getY()-i.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,n=0;const i=this.possibleCenters.length;for(const u of this.possibleCenters)u.getCount()>=nn.CENTER_QUORUM&&(e++,n+=u.getEstimatedModuleSize());if(e<3)return!1;const l=n/i;let c=0;for(const u of this.possibleCenters)c+=Math.abs(u.getEstimatedModuleSize()-l);return c<=.05*n}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new Q;const n=this.possibleCenters;let i;if(e>3){let l=0,c=0;for(const m of this.possibleCenters){const C=m.getEstimatedModuleSize();l+=C,c+=C*C}i=l/e;let u=Math.sqrt(c/e-i*i);n.sort((m,C)=>{const _=Math.abs(C.getEstimatedModuleSize()-i),P=Math.abs(m.getEstimatedModuleSize()-i);return _<P?-1:_>P?1:0});const h=Math.max(.2*i,u);for(let m=0;m<n.length&&n.length>3;m++){const C=n[m];Math.abs(C.getEstimatedModuleSize()-i)>h&&(n.splice(m,1),m--)}}if(n.length>3){let l=0;for(const c of n)l+=c.getEstimatedModuleSize();i=l/n.length,n.sort((c,u)=>{if(u.getCount()===c.getCount()){const h=Math.abs(u.getEstimatedModuleSize()-i),m=Math.abs(c.getEstimatedModuleSize()-i);return h<m?1:h>m?-1:0}else return u.getCount()-c.getCount()}),n.splice(3)}return[n[0],n[1],n[2]]}}nn.CENTER_QUORUM=2,nn.MIN_SKIP=3,nn.MAX_MODULES=57;class Kr{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(ne.NEED_RESULT_POINT_CALLBACK);const i=new nn(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(i)}processFinderPatternInfo(e){const n=e.getTopLeft(),i=e.getTopRight(),l=e.getBottomLeft(),c=this.calculateModuleSize(n,i,l);if(c<1)throw new Q("No pattern found in proccess finder.");const u=Kr.computeDimension(n,i,l,c),h=it.getProvisionalVersionForDimension(u),m=h.getDimensionForVersion()-7;let C=null;if(h.getAlignmentPatternCenters().length>0){const H=i.getX()-n.getX()+l.getX(),X=i.getY()-n.getY()+l.getY(),Z=1-3/m,te=Math.floor(n.getX()+Z*(H-n.getX())),de=Math.floor(n.getY()+Z*(X-n.getY()));for(let Oe=4;Oe<=16;Oe<<=1)try{C=this.findAlignmentInRegion(c,te,de,Oe);break}catch(Me){if(!(Me instanceof Q))throw Me}}const _=Kr.createTransform(n,i,l,C,u),P=Kr.sampleGrid(this.image,_,u);let D;return C===null?D=[l,n,i]:D=[l,n,i,C],new yn(P,D)}static createTransform(e,n,i,l,c){const u=c-3.5;let h,m,C,_;return l!==null?(h=l.getX(),m=l.getY(),C=u-3,_=C):(h=n.getX()-e.getX()+i.getX(),m=n.getY()-e.getY()+i.getY(),C=u,_=u),qe.quadrilateralToQuadrilateral(3.5,3.5,u,3.5,C,_,3.5,u,e.getX(),e.getY(),n.getX(),n.getY(),h,m,i.getX(),i.getY())}static sampleGrid(e,n,i){return Ge.getInstance().sampleGridWithTransform(e,i,i,n)}static computeDimension(e,n,i,l){const c=nt.round(Pe.distance(e,n)/l),u=nt.round(Pe.distance(e,i)/l);let h=Math.floor((c+u)/2)+7;switch(h&3){case 0:h++;break;case 2:h--;break;case 3:throw new Q("Dimensions could be not found.")}return h}calculateModuleSize(e,n,i){return(this.calculateModuleSizeOneWay(e,n)+this.calculateModuleSizeOneWay(e,i))/2}calculateModuleSizeOneWay(e,n){const i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(n.getX()),Math.floor(n.getY())),l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(i)?l/7:isNaN(l)?i/7:(i+l)/14}sizeOfBlackWhiteBlackRunBothWays(e,n,i,l){let c=this.sizeOfBlackWhiteBlackRun(e,n,i,l),u=1,h=e-(i-e);h<0?(u=e/(e-h),h=0):h>=this.image.getWidth()&&(u=(this.image.getWidth()-1-e)/(h-e),h=this.image.getWidth()-1);let m=Math.floor(n-(l-n)*u);return u=1,m<0?(u=n/(n-m),m=0):m>=this.image.getHeight()&&(u=(this.image.getHeight()-1-n)/(m-n),m=this.image.getHeight()-1),h=Math.floor(e+(h-e)*u),c+=this.sizeOfBlackWhiteBlackRun(e,n,h,m),c-1}sizeOfBlackWhiteBlackRun(e,n,i,l){const c=Math.abs(l-n)>Math.abs(i-e);if(c){let H=e;e=n,n=H,H=i,i=l,l=H}const u=Math.abs(i-e),h=Math.abs(l-n);let m=-u/2;const C=e<i?1:-1,_=n<l?1:-1;let P=0;const D=i+C;for(let H=e,X=n;H!==D;H+=C){const Z=c?X:H,te=c?H:X;if(P===1===this.image.get(Z,te)){if(P===2)return nt.distance(H,X,e,n);P++}if(m+=h,m>0){if(X===l)break;X+=_,m-=u}}return P===2?nt.distance(i+C,l,e,n):NaN}findAlignmentInRegion(e,n,i,l){const c=Math.floor(l*e),u=Math.max(0,n-c),h=Math.min(this.image.getWidth()-1,n+c);if(h-u<e*3)throw new Q("Alignment top exceeds estimated module size.");const m=Math.max(0,i-c),C=Math.min(this.image.getHeight()-1,i+c);if(C-m<e*3)throw new Q("Alignment bottom exceeds estimated module size.");return new Nr(this.image,u,m,h-u,C-m,e,this.resultPointCallback).find()}}class Xn{constructor(){this.decoder=new Xo}getDecoder(){return this.decoder}decode(e,n){let i,l;if(n!=null&&n.get(ne.PURE_BARCODE)!==void 0){const m=Xn.extractPureBits(e.getBlackMatrix());i=this.decoder.decodeBitMatrix(m,n),l=Xn.NO_POINTS}else{const m=new Kr(e.getBlackMatrix()).detect(n);i=this.decoder.decodeBitMatrix(m.getBits(),n),l=m.getPoints()}i.getOther()instanceof Go&&i.getOther().applyMirroredCorrection(l);const c=new ve(i.getText(),i.getRawBytes(),void 0,l,ie.QR_CODE,void 0),u=i.getByteSegments();u!==null&&c.putMetadata(Ae.BYTE_SEGMENTS,u);const h=i.getECLevel();return h!==null&&c.putMetadata(Ae.ERROR_CORRECTION_LEVEL,h),i.hasStructuredAppend()&&(c.putMetadata(Ae.STRUCTURED_APPEND_SEQUENCE,i.getStructuredAppendSequenceNumber()),c.putMetadata(Ae.STRUCTURED_APPEND_PARITY,i.getStructuredAppendParity())),c}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(n===null||i===null)throw new Q;const l=this.moduleSize(n,e);let c=n[1],u=i[1],h=n[0],m=i[0];if(h>=m||c>=u)throw new Q;if(u-c!==m-h&&(m=h+(u-c),m>=e.getWidth()))throw new Q;const C=Math.round((m-h+1)/l),_=Math.round((u-c+1)/l);if(C<=0||_<=0)throw new Q;if(_!==C)throw new Q;const P=Math.floor(l/2);c+=P,h+=P;const D=h+Math.floor((C-1)*l)-m;if(D>0){if(D>P)throw new Q;h-=D}const H=c+Math.floor((_-1)*l)-u;if(H>0){if(H>P)throw new Q;c-=H}const X=new Se(C,_);for(let Z=0;Z<_;Z++){const te=c+Math.floor(Z*l);for(let de=0;de<C;de++)e.get(h+Math.floor(de*l),te)&&X.set(de,Z)}return X}static moduleSize(e,n){const i=n.getHeight(),l=n.getWidth();let c=e[0],u=e[1],h=!0,m=0;for(;c<l&&u<i;){if(h!==n.get(c,u)){if(++m===5)break;h=!h}c++,u++}if(c===l||u===i)throw new Q;return(c-e[0])/7}}Xn.NO_POINTS=new Array;class ft{PDF417Common(){}static getBitCountSum(e){return nt.sum(e)}static toIntArray(e){if(e==null||!e.length)return ft.EMPTY_INT_ARRAY;const n=new Int32Array(e.length);let i=0;for(const l of e)n[i++]=l;return n}static getCodeword(e){const n=U.binarySearch(ft.SYMBOL_TABLE,e&262143);return n<0?-1:(ft.CODEWORD_TABLE[n]-1)%ft.NUMBER_OF_CODEWORDS}}ft.NUMBER_OF_CODEWORDS=929,ft.MAX_CODEWORDS_IN_BARCODE=ft.NUMBER_OF_CODEWORDS-1,ft.MIN_ROWS_IN_BARCODE=3,ft.MAX_ROWS_IN_BARCODE=90,ft.MODULES_IN_CODEWORD=17,ft.MODULES_IN_STOP_PATTERN=18,ft.BARS_IN_MODULE=8,ft.EMPTY_INT_ARRAY=new Int32Array([]),ft.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ft.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ja{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class wt{static detectMultiple(e,n,i){let l=e.getBlackMatrix(),c=wt.detect(i,l);return c.length||(l=l.clone(),l.rotate180(),c=wt.detect(i,l)),new Ja(l,c)}static detect(e,n){const i=new Array;let l=0,c=0,u=!1;for(;l<n.getHeight();){const h=wt.findVertices(n,l,c);if(h[0]==null&&h[3]==null){if(!u)break;u=!1,c=0;for(const m of i)m[1]!=null&&(l=Math.trunc(Math.max(l,m[1].getY()))),m[3]!=null&&(l=Math.max(l,Math.trunc(m[3].getY())));l+=wt.ROW_STEP;continue}if(u=!0,i.push(h),!e)break;h[2]!=null?(c=Math.trunc(h[2].getX()),l=Math.trunc(h[2].getY())):(c=Math.trunc(h[4].getX()),l=Math.trunc(h[4].getY()))}return i}static findVertices(e,n,i){const l=e.getHeight(),c=e.getWidth(),u=new Array(8);return wt.copyToResult(u,wt.findRowsWithPattern(e,l,c,n,i,wt.START_PATTERN),wt.INDEXES_START_PATTERN),u[4]!=null&&(i=Math.trunc(u[4].getX()),n=Math.trunc(u[4].getY())),wt.copyToResult(u,wt.findRowsWithPattern(e,l,c,n,i,wt.STOP_PATTERN),wt.INDEXES_STOP_PATTERN),u}static copyToResult(e,n,i){for(let l=0;l<i.length;l++)e[i[l]]=n[l]}static findRowsWithPattern(e,n,i,l,c,u){const h=new Array(4);let m=!1;const C=new Int32Array(u.length);for(;l<n;l+=wt.ROW_STEP){let P=wt.findGuardPattern(e,c,l,i,!1,u,C);if(P!=null){for(;l>0;){const D=wt.findGuardPattern(e,c,--l,i,!1,u,C);if(D!=null)P=D;else{l++;break}}h[0]=new Pe(P[0],l),h[1]=new Pe(P[1],l),m=!0;break}}let _=l+1;if(m){let P=0,D=Int32Array.from([Math.trunc(h[0].getX()),Math.trunc(h[1].getX())]);for(;_<n;_++){const H=wt.findGuardPattern(e,D[0],_,i,!1,u,C);if(H!=null&&Math.abs(D[0]-H[0])<wt.MAX_PATTERN_DRIFT&&Math.abs(D[1]-H[1])<wt.MAX_PATTERN_DRIFT)D=H,P=0;else{if(P>wt.SKIPPED_ROW_COUNT_MAX)break;P++}}_-=P+1,h[2]=new Pe(D[0],_),h[3]=new Pe(D[1],_)}return _-l<wt.BARCODE_MIN_HEIGHT&&U.fill(h,null),h}static findGuardPattern(e,n,i,l,c,u,h){U.fillWithin(h,0,h.length,0);let m=n,C=0;for(;e.get(m,i)&&m>0&&C++<wt.MAX_PIXEL_DRIFT;)m--;let _=m,P=0,D=u.length;for(let H=c;_<l;_++)if(e.get(_,i)!==H)h[P]++;else{if(P===D-1){if(wt.patternMatchVariance(h,u,wt.MAX_INDIVIDUAL_VARIANCE)<wt.MAX_AVG_VARIANCE)return new Int32Array([m,_]);m+=h[0]+h[1],B.arraycopy(h,2,h,0,P-1),h[P-1]=0,h[P]=0,P--}else P++;h[P]=1,H=!H}return P===D-1&&wt.patternMatchVariance(h,u,wt.MAX_INDIVIDUAL_VARIANCE)<wt.MAX_AVG_VARIANCE?new Int32Array([m,_-1]):null}static patternMatchVariance(e,n,i){let l=e.length,c=0,u=0;for(let C=0;C<l;C++)c+=e[C],u+=n[C];if(c<u)return 1/0;let h=c/u;i*=h;let m=0;for(let C=0;C<l;C++){let _=e[C],P=n[C]*h,D=_>P?_-P:P-_;if(D>i)return 1/0;m+=D}return m/c}}wt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),wt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),wt.MAX_AVG_VARIANCE=.42,wt.MAX_INDIVIDUAL_VARIANCE=.8,wt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),wt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),wt.MAX_PIXEL_DRIFT=3,wt.MAX_PATTERN_DRIFT=5,wt.SKIPPED_ROW_COUNT_MAX=25,wt.ROW_STEP=5,wt.BARCODE_MIN_HEIGHT=10;class _n{constructor(e,n){if(n.length===0)throw new I;this.field=e;let i=n.length;if(i>1&&n[0]===0){let l=1;for(;l<i&&n[l]===0;)l++;l===i?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(i-l),B.arraycopy(n,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let l=0;for(let c of this.coefficients)l=this.field.add(l,c);return l}let n=this.coefficients[0],i=this.coefficients.length;for(let l=1;l<i;l++)n=this.field.add(this.field.multiply(e,n),this.coefficients[l]);return n}add(e){if(!this.field.equals(e.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,i=e.coefficients;if(n.length>i.length){let u=n;n=i,i=u}let l=new Int32Array(i.length),c=i.length-n.length;B.arraycopy(i,0,l,0,c);for(let u=c;u<i.length;u++)l[u]=this.field.add(n[u-c],i[u]);return new _n(this.field,l)}subtract(e){if(!this.field.equals(e.field))throw new I("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof _n?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new _n(this.field,new Int32Array([0]));let n=this.coefficients,i=n.length,l=e.coefficients,c=l.length,u=new Int32Array(i+c-1);for(let h=0;h<i;h++){let m=n[h];for(let C=0;C<c;C++)u[h+C]=this.field.add(u[h+C],this.field.multiply(m,l[C]))}return new _n(this.field,u)}negative(){let e=this.coefficients.length,n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=this.field.subtract(0,this.coefficients[i]);return new _n(this.field,n)}multiplyScalar(e){if(e===0)return new _n(this.field,new Int32Array([0]));if(e===1)return this;let n=this.coefficients.length,i=new Int32Array(n);for(let l=0;l<n;l++)i[l]=this.field.multiply(this.coefficients[l],e);return new _n(this.field,i)}multiplyByMonomial(e,n){if(e<0)throw new I;if(n===0)return new _n(this.field,new Int32Array([0]));let i=this.coefficients.length,l=new Int32Array(i+e);for(let c=0;c<i;c++)l[c]=this.field.multiply(this.coefficients[c],n);return new _n(this.field,l)}toString(){let e=new Le;for(let n=this.getDegree();n>=0;n--){let i=this.getCoefficient(n);i!==0&&(i<0?(e.append(" - "),i=-i):e.length()>0&&e.append(" + "),(n===0||i!==1)&&e.append(i),n!==0&&(n===1?e.append("x"):(e.append("x^"),e.append(n))))}return e.toString()}}class el{add(e,n){return(e+n)%this.modulus}subtract(e,n){return(this.modulus+e-n)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new I;return this.logTable[e]}inverse(e){if(e===0)throw new ue;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class Ki extends el{constructor(e,n){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let i=1;for(let l=0;l<e;l++)this.expTable[l]=i,i=i*n%e;for(let l=0;l<e-1;l++)this.logTable[this.expTable[l]]=l;this.zero=new _n(this,new Int32Array([0])),this.one=new _n(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new I;if(n===0)return this.zero;let i=new Int32Array(e+1);return i[0]=n,new _n(this,i)}}Ki.PDF417_GF=new Ki(ft.NUMBER_OF_CODEWORDS,3);class Yo{constructor(){this.field=Ki.PDF417_GF}decode(e,n,i){let l=new _n(this.field,e),c=new Int32Array(n),u=!1;for(let X=n;X>0;X--){let Z=l.evaluateAt(this.field.exp(X));c[n-X]=Z,Z!==0&&(u=!0)}if(!u)return 0;let h=this.field.getOne();if(i!=null)for(const X of i){let Z=this.field.exp(e.length-1-X),te=new _n(this.field,new Int32Array([this.field.subtract(0,Z),1]));h=h.multiply(te)}let m=new _n(this.field,c),C=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),m,n),_=C[0],P=C[1],D=this.findErrorLocations(_),H=this.findErrorMagnitudes(P,_,D);for(let X=0;X<D.length;X++){let Z=e.length-1-this.field.log(D[X]);if(Z<0)throw M.getChecksumInstance();e[Z]=this.field.subtract(e[Z],H[X])}return D.length}runEuclideanAlgorithm(e,n,i){if(e.getDegree()<n.getDegree()){let D=e;e=n,n=D}let l=e,c=n,u=this.field.getZero(),h=this.field.getOne();for(;c.getDegree()>=Math.round(i/2);){let D=l,H=u;if(l=c,u=h,l.isZero())throw M.getChecksumInstance();c=D;let X=this.field.getZero(),Z=l.getCoefficient(l.getDegree()),te=this.field.inverse(Z);for(;c.getDegree()>=l.getDegree()&&!c.isZero();){let de=c.getDegree()-l.getDegree(),Oe=this.field.multiply(c.getCoefficient(c.getDegree()),te);X=X.add(this.field.buildMonomial(de,Oe)),c=c.subtract(l.multiplyByMonomial(de,Oe))}h=X.multiply(u).subtract(H).negative()}let m=h.getCoefficient(0);if(m===0)throw M.getChecksumInstance();let C=this.field.inverse(m),_=h.multiply(C),P=c.multiply(C);return[_,P]}findErrorLocations(e){let n=e.getDegree(),i=new Int32Array(n),l=0;for(let c=1;c<this.field.getSize()&&l<n;c++)e.evaluateAt(c)===0&&(i[l]=this.field.inverse(c),l++);if(l!==n)throw M.getChecksumInstance();return i}findErrorMagnitudes(e,n,i){let l=n.getDegree(),c=new Int32Array(l);for(let C=1;C<=l;C++)c[l-C]=this.field.multiply(C,n.getCoefficient(C));let u=new _n(this.field,c),h=i.length,m=new Int32Array(h);for(let C=0;C<h;C++){let _=this.field.inverse(i[C]),P=this.field.subtract(0,e.evaluateAt(_)),D=this.field.inverse(u.evaluateAt(_));m[C]=this.field.multiply(P,D)}return m}}class Ai{constructor(e,n,i,l,c){e instanceof Ai?this.constructor_2(e):this.constructor_1(e,n,i,l,c)}constructor_1(e,n,i,l,c){const u=n==null||i==null,h=l==null||c==null;if(u&&h)throw new Q;u?(n=new Pe(0,l.getY()),i=new Pe(0,c.getY())):h&&(l=new Pe(e.getWidth()-1,n.getY()),c=new Pe(e.getWidth()-1,i.getY())),this.image=e,this.topLeft=n,this.bottomLeft=i,this.topRight=l,this.bottomRight=c,this.minX=Math.trunc(Math.min(n.getX(),i.getX())),this.maxX=Math.trunc(Math.max(l.getX(),c.getX())),this.minY=Math.trunc(Math.min(n.getY(),l.getY())),this.maxY=Math.trunc(Math.max(i.getY(),c.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,n){return e==null?n:n==null?e:new Ai(e.image,e.topLeft,e.bottomLeft,n.topRight,n.bottomRight)}addMissingRows(e,n,i){let l=this.topLeft,c=this.bottomLeft,u=this.topRight,h=this.bottomRight;if(e>0){let m=i?this.topLeft:this.topRight,C=Math.trunc(m.getY()-e);C<0&&(C=0);let _=new Pe(m.getX(),C);i?l=_:u=_}if(n>0){let m=i?this.bottomLeft:this.bottomRight,C=Math.trunc(m.getY()+n);C>=this.image.getHeight()&&(C=this.image.getHeight()-1);let _=new Pe(m.getX(),C);i?c=_:h=_}return new Ai(this.image,l,c,u,h)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ts{constructor(e,n,i,l){this.columnCount=e,this.errorCorrectionLevel=l,this.rowCountUpperPart=n,this.rowCountLowerPart=i,this.rowCount=n+i}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class qr{constructor(){this.buffer=""}static form(e,n){let i=-1;function l(u,h,m,C,_,P){if(u==="%%")return"%";if(n[++i]===void 0)return;u=C?parseInt(C.substr(1)):void 0;let D=_?parseInt(_.substr(1)):void 0,H;switch(P){case"s":H=n[i];break;case"c":H=n[i][0];break;case"f":H=parseFloat(n[i]).toFixed(u);break;case"p":H=parseFloat(n[i]).toPrecision(u);break;case"e":H=parseFloat(n[i]).toExponential(u);break;case"x":H=parseInt(n[i]).toString(D||16);break;case"d":H=parseFloat(parseInt(n[i],D||10).toPrecision(u)).toFixed(0);break}H=typeof H=="object"?JSON.stringify(H):(+H).toString(D);let X=parseInt(m),Z=m&&m[0]+""=="0"?"0":" ";for(;H.length<X;)H=h!==void 0?H+Z:Z+H;return H}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(c,l)}format(e,...n){this.buffer+=qr.form(e,n)}toString(){return this.buffer}}class jr{constructor(e){this.boundingBox=new Ai(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let n=this.getCodeword(e);if(n!=null)return n;for(let i=1;i<jr.MAX_NEARBY_DISTANCE;i++){let l=this.imageRowToCodewordIndex(e)-i;if(l>=0&&(n=this.codewords[l],n!=null)||(l=this.imageRowToCodewordIndex(e)+i,l<this.codewords.length&&(n=this.codewords[l],n!=null)))return n}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,n){this.codewords[this.imageRowToCodewordIndex(e)]=n}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new qr;let n=0;for(const i of this.codewords){if(i==null){e.format("%3d:    |   %n",n++);continue}e.format("%3d: %3d|%3d%n",n++,i.getRowNumber(),i.getValue())}return e.toString()}}jr.MAX_NEARBY_DISTANCE=5;class ui{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let n=this.values.get(e);n==null&&(n=0),n++,this.values.set(e,n)}getValue(){let e=-1,n=new Array;for(const[i,l]of this.values.entries()){const c={getKey:()=>i,getValue:()=>l};c.getValue()>e?(e=c.getValue(),n=[],n.push(c.getKey())):c.getValue()===e&&n.push(c.getKey())}return ft.toIntArray(n)}getConfidence(e){return this.values.get(e)}}class tl extends jr{constructor(e,n){super(e),this._isLeft=n}setRowNumbers(){for(let e of this.getCodewords())e!=null&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,e);let i=this.getBoundingBox(),l=this._isLeft?i.getTopLeft():i.getTopRight(),c=this._isLeft?i.getBottomLeft():i.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(l.getY())),h=this.imageRowToCodewordIndex(Math.trunc(c.getY())),m=-1,C=1,_=0;for(let P=u;P<h;P++){if(n[P]==null)continue;let D=n[P],H=D.getRowNumber()-m;if(H===0)_++;else if(H===1)C=Math.max(C,_),_=1,m=D.getRowNumber();else if(H<0||D.getRowNumber()>=e.getRowCount()||H>P)n[P]=null;else{let X;C>2?X=(C-2)*H:X=H;let Z=X>=P;for(let te=1;te<=X&&!Z;te++)Z=n[P-te]!=null;Z?n[P]=null:(m=D.getRowNumber(),_=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let n=new Int32Array(e.getRowCount());for(let i of this.getCodewords())if(i!=null){let l=i.getRowNumber();if(l>=n.length)continue;n[l]++}return n}adjustIncompleteIndicatorColumnRowNumbers(e){let n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),l=this._isLeft?n.getBottomLeft():n.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=this.imageRowToCodewordIndex(Math.trunc(l.getY())),h=this.getCodewords(),m=-1;for(let C=c;C<u;C++){if(h[C]==null)continue;let _=h[C];_.setRowNumberAsRowIndicatorColumn();let P=_.getRowNumber()-m;P===0||(P===1?m=_.getRowNumber():_.getRowNumber()>=e.getRowCount()?h[C]=null:m=_.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),n=new ui,i=new ui,l=new ui,c=new ui;for(let h of e){if(h==null)continue;h.setRowNumberAsRowIndicatorColumn();let m=h.getValue()%30,C=h.getRowNumber();switch(this._isLeft||(C+=2),C%3){case 0:i.setValue(m*3+1);break;case 1:c.setValue(m/3),l.setValue(m%3);break;case 2:n.setValue(m+1);break}}if(n.getValue().length===0||i.getValue().length===0||l.getValue().length===0||c.getValue().length===0||n.getValue()[0]<1||i.getValue()[0]+l.getValue()[0]<ft.MIN_ROWS_IN_BARCODE||i.getValue()[0]+l.getValue()[0]>ft.MAX_ROWS_IN_BARCODE)return null;let u=new Ts(n.getValue()[0],i.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(e,u),u}removeIncorrectCodewords(e,n){for(let i=0;i<e.length;i++){let l=e[i];if(e[i]==null)continue;let c=l.getValue()%30,u=l.getRowNumber();if(u>n.getRowCount()){e[i]=null;continue}switch(this._isLeft||(u+=2),u%3){case 0:c*3+1!==n.getRowCountUpperPart()&&(e[i]=null);break;case 1:(Math.trunc(c/3)!==n.getErrorCorrectionLevel()||c%3!==n.getRowCountLowerPart())&&(e[i]=null);break;case 2:c+1!==n.getColumnCount()&&(e[i]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Is{constructor(e,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=ft.MAX_CODEWORDS_IN_BARCODE,n;do n=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<n);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let n=1;n<this.barcodeColumnCount+1;n++){let i=this.detectionResultColumns[n].getCodewords();for(let l=0;l<i.length;l++)i[l]!=null&&(i[l].hasValidRowNumber()||this.adjustRowNumbers(n,l,i))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<e.length;i++)if(e[i]!=null&&n[i]!=null&&e[i].getRowNumber()===n[i].getRowNumber())for(let l=1;l<=this.barcodeColumnCount;l++){let c=this.detectionResultColumns[l].getCodewords()[i];c!=null&&(c.setRowNumber(e[i].getRowNumber()),c.hasValidRowNumber()||(this.detectionResultColumns[l].getCodewords()[i]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<n.length;i++){if(n[i]==null)continue;let l=n[i].getRowNumber(),c=0;for(let u=this.barcodeColumnCount+1;u>0&&c<this.ADJUST_ROW_NUMBER_SKIP;u--){let h=this.detectionResultColumns[u].getCodewords()[i];h!=null&&(c=Is.adjustRowNumberIfValid(l,c,h),h.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,n=this.detectionResultColumns[0].getCodewords();for(let i=0;i<n.length;i++){if(n[i]==null)continue;let l=n[i].getRowNumber(),c=0;for(let u=1;u<this.barcodeColumnCount+1&&c<this.ADJUST_ROW_NUMBER_SKIP;u++){let h=this.detectionResultColumns[u].getCodewords()[i];h!=null&&(c=Is.adjustRowNumberIfValid(l,c,h),h.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,n,i){return i==null||i.hasValidRowNumber()||(i.isValidRowNumber(e)?(i.setRowNumber(e),n=0):++n),n}adjustRowNumbers(e,n,i){if(!this.detectionResultColumns[e-1])return;let l=i[n],c=this.detectionResultColumns[e-1].getCodewords(),u=c;this.detectionResultColumns[e+1]!=null&&(u=this.detectionResultColumns[e+1].getCodewords());let h=new Array(14);h[2]=c[n],h[3]=u[n],n>0&&(h[0]=i[n-1],h[4]=c[n-1],h[5]=u[n-1]),n>1&&(h[8]=i[n-2],h[10]=c[n-2],h[11]=u[n-2]),n<i.length-1&&(h[1]=i[n+1],h[6]=c[n+1],h[7]=u[n+1]),n<i.length-2&&(h[9]=i[n+2],h[12]=c[n+2],h[13]=u[n+2]);for(let m of h)if(Is.adjustRowNumber(l,m))return}static adjustRowNumber(e,n){return n==null?!1:n.hasValidRowNumber()&&n.getBucket()===e.getBucket()?(e.setRowNumber(n.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,n){this.detectionResultColumns[e]=n}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let n=new qr;for(let i=0;i<e.getCodewords().length;i++){n.format("CW %3d:",i);for(let l=0;l<this.barcodeColumnCount+2;l++){if(this.detectionResultColumns[l]==null){n.format("    |   ");continue}let c=this.detectionResultColumns[l].getCodewords()[i];if(c==null){n.format("    |   ");continue}n.format(" %3d|%3d",c.getRowNumber(),c.getValue())}n.format("%n")}return n.toString()}}class Si{constructor(e,n,i,l){this.rowNumber=Si.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(n),this.bucket=Math.trunc(i),this.value=Math.trunc(l)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==Si.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}Si.BARCODE_ROW_UNKNOWN=-1;class Rn{static initialize(){for(let e=0;e<ft.SYMBOL_TABLE.length;e++){let n=ft.SYMBOL_TABLE[e],i=n&1;for(let l=0;l<ft.BARS_IN_MODULE;l++){let c=0;for(;(n&1)===i;)c+=1,n>>=1;i=n&1,Rn.RATIOS_TABLE[e]||(Rn.RATIOS_TABLE[e]=new Array(ft.BARS_IN_MODULE)),Rn.RATIOS_TABLE[e][ft.BARS_IN_MODULE-l-1]=Math.fround(c/ft.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let n=Rn.getDecodedCodewordValue(Rn.sampleBitCounts(e));return n!==-1?n:Rn.getClosestDecodedValue(e)}static sampleBitCounts(e){let n=nt.sum(e),i=new Int32Array(ft.BARS_IN_MODULE),l=0,c=0;for(let u=0;u<ft.MODULES_IN_CODEWORD;u++){let h=n/(2*ft.MODULES_IN_CODEWORD)+u*n/ft.MODULES_IN_CODEWORD;c+e[l]<=h&&(c+=e[l],l++),i[l]++}return i}static getDecodedCodewordValue(e){let n=Rn.getBitValue(e);return ft.getCodeword(n)===-1?-1:n}static getBitValue(e){let n=0;for(let i=0;i<e.length;i++)for(let l=0;l<e[i];l++)n=n<<1|(i%2===0?1:0);return Math.trunc(n)}static getClosestDecodedValue(e){let n=nt.sum(e),i=new Array(ft.BARS_IN_MODULE);if(n>1)for(let u=0;u<i.length;u++)i[u]=Math.fround(e[u]/n);let l=Nt.MAX_VALUE,c=-1;this.bSymbolTableReady||Rn.initialize();for(let u=0;u<Rn.RATIOS_TABLE.length;u++){let h=0,m=Rn.RATIOS_TABLE[u];for(let C=0;C<ft.BARS_IN_MODULE;C++){let _=Math.fround(m[C]-i[C]);if(h+=Math.fround(_*_),h>=l)break}h<l&&(l=h,c=ft.SYMBOL_TABLE[u])}return c}}Rn.bSymbolTableReady=!1,Rn.RATIOS_TABLE=new Array(ft.SYMBOL_TABLE.length).map(k=>new Array(ft.BARS_IN_MODULE));class io{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class $o{static parseLong(e,n=void 0){return parseInt(e,n)}}class Qr extends E{}Qr.kind="NullPointerException";class Zo{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,n,i){if(e==null)throw new Qr;if(n<0||n>e.length||i<0||n+i>e.length||n+i<0)throw new j;if(i===0)return;for(let l=0;l<i;l++)this.write(e[n+l])}flush(){}close(){}}class so extends E{}class nl extends Zo{constructor(e=32){if(super(),this.count=0,e<0)throw new I("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let i=this.buf.length<<1;if(i-e<0&&(i=e),i<0){if(e<0)throw new so;i=V.MAX_VALUE}this.buf=U.copyOfUint8Array(this.buf,i)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,n,i){if(n<0||n>e.length||i<0||n+i-e.length>0)throw new j;this.ensureCapacity(this.count+i),B.arraycopy(e,n,this.buf,this.count,i),this.count+=i}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return U.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var jt;(function(k){k[k.ALPHA=0]="ALPHA",k[k.LOWER=1]="LOWER",k[k.MIXED=2]="MIXED",k[k.PUNCT=3]="PUNCT",k[k.ALPHA_SHIFT=4]="ALPHA_SHIFT",k[k.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(jt||(jt={}));function Ns(){if(typeof window<"u")return window.BigInt||null;if(typeof Jl<"u")return Jl.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let _s;function pn(k){if(typeof _s>"u"&&(_s=Ns()),_s===null)throw new Error("BigInt is not supported!");return _s(k)}function qi(){let k=[];k[0]=pn(1);let e=pn(900);k[1]=e;for(let n=2;n<16;n++)k[n]=k[n-1]*e;return k}class fe{static decode(e,n){let i=new Le(""),l=K.ISO8859_1;i.enableDecoding(l);let c=1,u=e[c++],h=new io;for(;c<e[0];){switch(u){case fe.TEXT_COMPACTION_MODE_LATCH:c=fe.textCompaction(e,c,i);break;case fe.BYTE_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:c=fe.byteCompaction(u,e,l,c,i);break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[c++]);break;case fe.NUMERIC_COMPACTION_MODE_LATCH:c=fe.numericCompaction(e,c,i);break;case fe.ECI_CHARSET:K.getCharacterSetECIByValue(e[c++]);break;case fe.ECI_GENERAL_PURPOSE:c+=2;break;case fe.ECI_USER_DEFINED:c++;break;case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:c=fe.decodeMacroBlock(e,c,h);break;case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:throw new q;default:c--,c=fe.textCompaction(e,c,i);break}if(c<e.length)u=e[c++];else throw q.getFormatInstance()}if(i.length()===0)throw q.getFormatInstance();let m=new Ve(null,i.toString(),null,n);return m.setOther(h),m}static decodeMacroBlock(e,n,i){if(n+fe.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw q.getFormatInstance();let l=new Int32Array(fe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let h=0;h<fe.NUMBER_OF_SEQUENCE_CODEWORDS;h++,n++)l[h]=e[n];i.setSegmentIndex(V.parseInt(fe.decodeBase900toBase10(l,fe.NUMBER_OF_SEQUENCE_CODEWORDS)));let c=new Le;n=fe.textCompaction(e,n,c),i.setFileId(c.toString());let u=-1;for(e[n]===fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(u=n+1);n<e[0];)switch(e[n]){case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(n++,e[n]){case fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let h=new Le;n=fe.textCompaction(e,n+1,h),i.setFileName(h.toString());break;case fe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let m=new Le;n=fe.textCompaction(e,n+1,m),i.setSender(m.toString());break;case fe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let C=new Le;n=fe.textCompaction(e,n+1,C),i.setAddressee(C.toString());break;case fe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let _=new Le;n=fe.numericCompaction(e,n+1,_),i.setSegmentCount(V.parseInt(_.toString()));break;case fe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let P=new Le;n=fe.numericCompaction(e,n+1,P),i.setTimestamp($o.parseLong(P.toString()));break;case fe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let D=new Le;n=fe.numericCompaction(e,n+1,D),i.setChecksum(V.parseInt(D.toString()));break;case fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let H=new Le;n=fe.numericCompaction(e,n+1,H),i.setFileSize($o.parseLong(H.toString()));break;default:throw q.getFormatInstance()}break;case fe.MACRO_PDF417_TERMINATOR:n++,i.setLastSegment(!0);break;default:throw q.getFormatInstance()}if(u!==-1){let h=n-u;i.isLastSegment()&&h--,i.setOptionalData(U.copyOfRange(e,u,u+h))}return n}static textCompaction(e,n,i){let l=new Int32Array((e[0]-n)*2),c=new Int32Array((e[0]-n)*2),u=0,h=!1;for(;n<e[0]&&!h;){let m=e[n++];if(m<fe.TEXT_COMPACTION_MODE_LATCH)l[u]=m/30,l[u+1]=m%30,u+=2;else switch(m){case fe.TEXT_COMPACTION_MODE_LATCH:l[u++]=fe.TEXT_COMPACTION_MODE_LATCH;break;case fe.BYTE_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:case fe.NUMERIC_COMPACTION_MODE_LATCH:case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:n--,h=!0;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l[u]=fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,m=e[n++],c[u]=m,u++;break}}return fe.decodeTextCompaction(l,c,u,i),n}static decodeTextCompaction(e,n,i,l){let c=jt.ALPHA,u=jt.ALPHA,h=0;for(;h<i;){let m=e[h],C="";switch(c){case jt.ALPHA:if(m<26)C=String.fromCharCode(65+m);else switch(m){case 26:C=" ";break;case fe.LL:c=jt.LOWER;break;case fe.ML:c=jt.MIXED;break;case fe.PS:u=c,c=jt.PUNCT_SHIFT;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case fe.TEXT_COMPACTION_MODE_LATCH:c=jt.ALPHA;break}break;case jt.LOWER:if(m<26)C=String.fromCharCode(97+m);else switch(m){case 26:C=" ";break;case fe.AS:u=c,c=jt.ALPHA_SHIFT;break;case fe.ML:c=jt.MIXED;break;case fe.PS:u=c,c=jt.PUNCT_SHIFT;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case fe.TEXT_COMPACTION_MODE_LATCH:c=jt.ALPHA;break}break;case jt.MIXED:if(m<fe.PL)C=fe.MIXED_CHARS[m];else switch(m){case fe.PL:c=jt.PUNCT;break;case 26:C=" ";break;case fe.LL:c=jt.LOWER;break;case fe.AL:c=jt.ALPHA;break;case fe.PS:u=c,c=jt.PUNCT_SHIFT;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case fe.TEXT_COMPACTION_MODE_LATCH:c=jt.ALPHA;break}break;case jt.PUNCT:if(m<fe.PAL)C=fe.PUNCT_CHARS[m];else switch(m){case fe.PAL:c=jt.ALPHA;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case fe.TEXT_COMPACTION_MODE_LATCH:c=jt.ALPHA;break}break;case jt.ALPHA_SHIFT:if(c=u,m<26)C=String.fromCharCode(65+m);else switch(m){case 26:C=" ";break;case fe.TEXT_COMPACTION_MODE_LATCH:c=jt.ALPHA;break}break;case jt.PUNCT_SHIFT:if(c=u,m<fe.PAL)C=fe.PUNCT_CHARS[m];else switch(m){case fe.PAL:c=jt.ALPHA;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case fe.TEXT_COMPACTION_MODE_LATCH:c=jt.ALPHA;break}break}C!==""&&l.append(C),h++}}static byteCompaction(e,n,i,l,c){let u=new nl,h=0,m=0,C=!1;switch(e){case fe.BYTE_COMPACTION_MODE_LATCH:let _=new Int32Array(6),P=n[l++];for(;l<n[0]&&!C;)switch(_[h++]=P,m=900*m+P,P=n[l++],P){case fe.TEXT_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH:case fe.NUMERIC_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:l--,C=!0;break;default:if(h%5===0&&h>0){for(let D=0;D<6;++D)u.write(Number(pn(m)>>pn(8*(5-D))));m=0,h=0}break}l===n[0]&&P<fe.TEXT_COMPACTION_MODE_LATCH&&(_[h++]=P);for(let D=0;D<h;D++)u.write(_[D]);break;case fe.BYTE_COMPACTION_MODE_LATCH_6:for(;l<n[0]&&!C;){let D=n[l++];if(D<fe.TEXT_COMPACTION_MODE_LATCH)h++,m=900*m+D;else switch(D){case fe.TEXT_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH:case fe.NUMERIC_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:l--,C=!0;break}if(h%5===0&&h>0){for(let H=0;H<6;++H)u.write(Number(pn(m)>>pn(8*(5-H))));m=0,h=0}}break}return c.append(Be.decode(u.toByteArray(),i)),l}static numericCompaction(e,n,i){let l=0,c=!1,u=new Int32Array(fe.MAX_NUMERIC_CODEWORDS);for(;n<e[0]&&!c;){let h=e[n++];if(n===e[0]&&(c=!0),h<fe.TEXT_COMPACTION_MODE_LATCH)u[l]=h,l++;else switch(h){case fe.TEXT_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:n--,c=!0;break}(l%fe.MAX_NUMERIC_CODEWORDS===0||h===fe.NUMERIC_COMPACTION_MODE_LATCH||c)&&l>0&&(i.append(fe.decodeBase900toBase10(u,l)),l=0)}return n}static decodeBase900toBase10(e,n){let i=pn(0);for(let c=0;c<n;c++)i+=fe.EXP900[n-c-1]*pn(e[c]);let l=i.toString();if(l.charAt(0)!=="1")throw new q;return l.substring(1)}}fe.TEXT_COMPACTION_MODE_LATCH=900,fe.BYTE_COMPACTION_MODE_LATCH=901,fe.NUMERIC_COMPACTION_MODE_LATCH=902,fe.BYTE_COMPACTION_MODE_LATCH_6=924,fe.ECI_USER_DEFINED=925,fe.ECI_GENERAL_PURPOSE=926,fe.ECI_CHARSET=927,fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,fe.MACRO_PDF417_TERMINATOR=922,fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,fe.MAX_NUMERIC_CODEWORDS=15,fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,fe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,fe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,fe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,fe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,fe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,fe.PL=25,fe.LL=27,fe.AS=27,fe.ML=28,fe.AL=28,fe.PS=29,fe.PAL=29,fe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,fe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",fe.EXP900=Ns()?qi():[],fe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class bt{constructor(){}static decode(e,n,i,l,c,u,h){let m=new Ai(e,n,i,l,c),C=null,_=null,P;for(let X=!0;;X=!1){if(n!=null&&(C=bt.getRowIndicatorColumn(e,m,n,!0,u,h)),l!=null&&(_=bt.getRowIndicatorColumn(e,m,l,!1,u,h)),P=bt.merge(C,_),P==null)throw Q.getNotFoundInstance();let Z=P.getBoundingBox();if(X&&Z!=null&&(Z.getMinY()<m.getMinY()||Z.getMaxY()>m.getMaxY()))m=Z;else break}P.setBoundingBox(m);let D=P.getBarcodeColumnCount()+1;P.setDetectionResultColumn(0,C),P.setDetectionResultColumn(D,_);let H=C!=null;for(let X=1;X<=D;X++){let Z=H?X:D-X;if(P.getDetectionResultColumn(Z)!==void 0)continue;let te;Z===0||Z===D?te=new tl(m,Z===0):te=new jr(m),P.setDetectionResultColumn(Z,te);let de=-1,Oe=de;for(let Me=m.getMinY();Me<=m.getMaxY();Me++){if(de=bt.getStartColumn(P,Z,Me,H),de<0||de>m.getMaxX()){if(Oe===-1)continue;de=Oe}let Ie=bt.detectCodeword(e,m.getMinX(),m.getMaxX(),H,de,Me,u,h);Ie!=null&&(te.setCodeword(Me,Ie),Oe=de,u=Math.min(u,Ie.getWidth()),h=Math.max(h,Ie.getWidth()))}}return bt.createDecoderResult(P)}static merge(e,n){if(e==null&&n==null)return null;let i=bt.getBarcodeMetadata(e,n);if(i==null)return null;let l=Ai.merge(bt.adjustBoundingBox(e),bt.adjustBoundingBox(n));return new Is(i,l)}static adjustBoundingBox(e){if(e==null)return null;let n=e.getRowHeights();if(n==null)return null;let i=bt.getMax(n),l=0;for(let h of n)if(l+=i-h,h>0)break;let c=e.getCodewords();for(let h=0;l>0&&c[h]==null;h++)l--;let u=0;for(let h=n.length-1;h>=0&&(u+=i-n[h],!(n[h]>0));h--);for(let h=c.length-1;u>0&&c[h]==null;h--)u--;return e.getBoundingBox().addMissingRows(l,u,e.isLeft())}static getMax(e){let n=-1;for(let i of e)n=Math.max(n,i);return n}static getBarcodeMetadata(e,n){let i;if(e==null||(i=e.getBarcodeMetadata())==null)return n==null?null:n.getBarcodeMetadata();let l;return n==null||(l=n.getBarcodeMetadata())==null?i:i.getColumnCount()!==l.getColumnCount()&&i.getErrorCorrectionLevel()!==l.getErrorCorrectionLevel()&&i.getRowCount()!==l.getRowCount()?null:i}static getRowIndicatorColumn(e,n,i,l,c,u){let h=new tl(n,l);for(let m=0;m<2;m++){let C=m===0?1:-1,_=Math.trunc(Math.trunc(i.getX()));for(let P=Math.trunc(Math.trunc(i.getY()));P<=n.getMaxY()&&P>=n.getMinY();P+=C){let D=bt.detectCodeword(e,0,e.getWidth(),l,_,P,c,u);D!=null&&(h.setCodeword(P,D),l?_=D.getStartX():_=D.getEndX())}}return h}static adjustCodewordCount(e,n){let i=n[0][1],l=i.getValue(),c=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-bt.getNumberOfECCodeWords(e.getBarcodeECLevel());if(l.length===0){if(c<1||c>ft.MAX_CODEWORDS_IN_BARCODE)throw Q.getNotFoundInstance();i.setValue(c)}else l[0]!==c&&i.setValue(c)}static createDecoderResult(e){let n=bt.createBarcodeMatrix(e);bt.adjustCodewordCount(e,n);let i=new Array,l=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),c=[],u=new Array;for(let m=0;m<e.getBarcodeRowCount();m++)for(let C=0;C<e.getBarcodeColumnCount();C++){let _=n[m][C+1].getValue(),P=m*e.getBarcodeColumnCount()+C;_.length===0?i.push(P):_.length===1?l[P]=_[0]:(u.push(P),c.push(_))}let h=new Array(c.length);for(let m=0;m<h.length;m++)h[m]=c[m];return bt.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),l,ft.toIntArray(i),ft.toIntArray(u),h)}static createDecoderResultFromAmbiguousValues(e,n,i,l,c){let u=new Int32Array(l.length),h=100;for(;h-- >0;){for(let m=0;m<u.length;m++)n[l[m]]=c[m][u[m]];try{return bt.decodeCodewords(n,e,i)}catch(m){if(!(m instanceof M))throw m}if(u.length===0)throw M.getChecksumInstance();for(let m=0;m<u.length;m++)if(u[m]<c[m].length-1){u[m]++;break}else if(u[m]=0,m===u.length-1)throw M.getChecksumInstance()}throw M.getChecksumInstance()}static createBarcodeMatrix(e){let n=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let l=0;l<n.length;l++)for(let c=0;c<n[l].length;c++)n[l][c]=new ui;let i=0;for(let l of e.getDetectionResultColumns()){if(l!=null){for(let c of l.getCodewords())if(c!=null){let u=c.getRowNumber();if(u>=0){if(u>=n.length)continue;n[u][i].setValue(c.getValue())}}}i++}return n}static isValidBarcodeColumn(e,n){return n>=0&&n<=e.getBarcodeColumnCount()+1}static getStartColumn(e,n,i,l){let c=l?1:-1,u=null;if(bt.isValidBarcodeColumn(e,n-c)&&(u=e.getDetectionResultColumn(n-c).getCodeword(i)),u!=null)return l?u.getEndX():u.getStartX();if(u=e.getDetectionResultColumn(n).getCodewordNearby(i),u!=null)return l?u.getStartX():u.getEndX();if(bt.isValidBarcodeColumn(e,n-c)&&(u=e.getDetectionResultColumn(n-c).getCodewordNearby(i)),u!=null)return l?u.getEndX():u.getStartX();let h=0;for(;bt.isValidBarcodeColumn(e,n-c);){n-=c;for(let m of e.getDetectionResultColumn(n).getCodewords())if(m!=null)return(l?m.getEndX():m.getStartX())+c*h*(m.getEndX()-m.getStartX());h++}return l?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,n,i,l,c,u,h,m){c=bt.adjustCodewordStartColumn(e,n,i,l,c,u);let C=bt.getModuleBitCount(e,n,i,l,c,u);if(C==null)return null;let _,P=nt.sum(C);if(l)_=c+P;else{for(let X=0;X<C.length/2;X++){let Z=C[X];C[X]=C[C.length-1-X],C[C.length-1-X]=Z}_=c,c=_-P}if(!bt.checkCodewordSkew(P,h,m))return null;let D=Rn.getDecodedValue(C),H=ft.getCodeword(D);return H===-1?null:new Si(c,_,bt.getCodewordBucketNumber(D),H)}static getModuleBitCount(e,n,i,l,c,u){let h=c,m=new Int32Array(8),C=0,_=l?1:-1,P=l;for(;(l?h<i:h>=n)&&C<m.length;)e.get(h,u)===P?(m[C]++,h+=_):(C++,P=!P);return C===m.length||h===(l?i:n)&&C===m.length-1?m:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,n,i,l,c,u){let h=c,m=l?-1:1;for(let C=0;C<2;C++){for(;(l?h>=n:h<i)&&l===e.get(h,u);){if(Math.abs(c-h)>bt.CODEWORD_SKEW_SIZE)return c;h+=m}m=-m,l=!l}return h}static checkCodewordSkew(e,n,i){return n-bt.CODEWORD_SKEW_SIZE<=e&&e<=i+bt.CODEWORD_SKEW_SIZE}static decodeCodewords(e,n,i){if(e.length===0)throw q.getFormatInstance();let l=1<<n+1,c=bt.correctErrors(e,i,l);bt.verifyCodewordCount(e,l);let u=fe.decode(e,""+n);return u.setErrorsCorrected(c),u.setErasures(i.length),u}static correctErrors(e,n,i){if(n!=null&&n.length>i/2+bt.MAX_ERRORS||i<0||i>bt.MAX_EC_CODEWORDS)throw M.getChecksumInstance();return bt.errorCorrection.decode(e,i,n)}static verifyCodewordCount(e,n){if(e.length<4)throw q.getFormatInstance();let i=e[0];if(i>e.length)throw q.getFormatInstance();if(i===0)if(n<e.length)e[0]=e.length-n;else throw q.getFormatInstance()}static getBitCountForCodeword(e){let n=new Int32Array(8),i=0,l=n.length-1;for(;!((e&1)!==i&&(i=e&1,l--,l<0));)n[l]++,e>>=1;return n}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return bt.getCodewordBucketNumber(bt.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let n=new qr;for(let i=0;i<e.length;i++){n.format("Row %2d: ",i);for(let l=0;l<e[i].length;l++){let c=e[i][l];c.getValue().length===0?n.format("        ",null):n.format("%4d(%2d)",c.getValue()[0],c.getConfidence(c.getValue()[0]))}n.format("%n")}return n.toString()}}bt.CODEWORD_SKEW_SIZE=2,bt.MAX_ERRORS=3,bt.MAX_EC_CODEWORDS=512,bt.errorCorrection=new Yo;class kn{decode(e,n=null){let i=kn.decode(e,n,!1);if(i==null||i.length===0||i[0]==null)throw Q.getNotFoundInstance();return i[0]}decodeMultiple(e,n=null){try{return kn.decode(e,n,!0)}catch(i){throw i instanceof q||i instanceof M?Q.getNotFoundInstance():i}}static decode(e,n,i){const l=new Array,c=wt.detectMultiple(e,n,i);for(const u of c.getPoints()){const h=bt.decode(c.getBits(),u[4],u[5],u[6],u[7],kn.getMinCodewordWidth(u),kn.getMaxCodewordWidth(u)),m=new ve(h.getText(),h.getRawBytes(),void 0,u,ie.PDF_417);m.putMetadata(Ae.ERROR_CORRECTION_LEVEL,h.getECLevel());const C=h.getOther();C!=null&&m.putMetadata(Ae.PDF417_EXTRA_METADATA,C),l.push(m)}return l.map(u=>u)}static getMaxWidth(e,n){return e==null||n==null?0:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMinWidth(e,n){return e==null||n==null?V.MAX_VALUE:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(kn.getMaxWidth(e[0],e[4]),kn.getMaxWidth(e[6],e[2])*ft.MODULES_IN_CODEWORD/ft.MODULES_IN_STOP_PATTERN),Math.max(kn.getMaxWidth(e[1],e[5]),kn.getMaxWidth(e[7],e[3])*ft.MODULES_IN_CODEWORD/ft.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(kn.getMinWidth(e[0],e[4]),kn.getMinWidth(e[6],e[2])*ft.MODULES_IN_CODEWORD/ft.MODULES_IN_STOP_PATTERN),Math.min(kn.getMinWidth(e[1],e[5]),kn.getMinWidth(e[7],e[3])*ft.MODULES_IN_CODEWORD/ft.MODULES_IN_STOP_PATTERN)))}reset(){}}class Qi extends E{}Qi.kind="ReaderException";class oo{constructor(e,n){this.verbose=e===!0,n&&this.setHints(n)}decode(e,n){return n&&this.setHints(n),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const n=!f(e)&&e.get(ne.TRY_HARDER)===!0,i=f(e)?null:e.get(ne.POSSIBLE_FORMATS),l=new Array;if(!f(i)){const c=i.some(u=>u===ie.UPC_A||u===ie.UPC_E||u===ie.EAN_13||u===ie.EAN_8||u===ie.CODABAR||u===ie.CODE_39||u===ie.CODE_93||u===ie.CODE_128||u===ie.ITF||u===ie.RSS_14||u===ie.RSS_EXPANDED);c&&!n&&l.push(new bi(e,this.verbose)),i.includes(ie.QR_CODE)&&l.push(new Xn),i.includes(ie.DATA_MATRIX)&&l.push(new Ir),i.includes(ie.AZTEC)&&l.push(new Ht),i.includes(ie.PDF_417)&&l.push(new kn),c&&n&&l.push(new bi(e,this.verbose))}l.length===0&&(n||l.push(new bi(e,this.verbose)),l.push(new Xn),l.push(new Ir),l.push(new Ht),l.push(new kn),n&&l.push(new bi(e,this.verbose))),this.readers=l}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new Qi("No readers where selected, nothing can be read.");for(const n of this.readers)try{return n.decode(e,this.hints)}catch(i){if(i instanceof Qi)continue}throw new Q("No MultiFormat Readers were able to detect the code.")}}class Rs extends pe{constructor(e=null,n=500){const i=new oo;i.setHints(e),super(i,n)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class ao extends pe{constructor(e=500){super(new kn,e)}}class rl extends pe{constructor(e=500){super(new Xn,e)}}var Ko;(function(k){k[k.ERROR_CORRECTION=0]="ERROR_CORRECTION",k[k.CHARACTER_SET=1]="CHARACTER_SET",k[k.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",k[k.MIN_SIZE=3]="MIN_SIZE",k[k.MAX_SIZE=4]="MAX_SIZE",k[k.MARGIN=5]="MARGIN",k[k.PDF417_COMPACT=6]="PDF417_COMPACT",k[k.PDF417_COMPACTION=7]="PDF417_COMPACTION",k[k.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",k[k.AZTEC_LAYERS=9]="AZTEC_LAYERS",k[k.QR_VERSION=10]="QR_VERSION"})(Ko||(Ko={}));var vn=Ko;class qo{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new tt(e,Int32Array.from([1])))}buildGenerator(e){const n=this.cachedGenerators;if(e>=n.length){let i=n[n.length-1];const l=this.field;for(let c=n.length;c<=e;c++){const u=i.multiply(new tt(l,Int32Array.from([1,l.exp(c-1+l.getGeneratorBase())])));n.push(u),i=u}}return n[e]}encode(e,n){if(n===0)throw new I("No error correction bytes");const i=e.length-n;if(i<=0)throw new I("No data bytes provided");const l=this.buildGenerator(n),c=new Int32Array(i);B.arraycopy(e,0,c,0,i);let u=new tt(this.field,c);u=u.multiplyByMonomial(n,1);const m=u.divide(l)[1].getCoefficients(),C=n-m.length;for(let _=0;_<C;_++)e[i+_]=0;B.arraycopy(m,0,e,i+C,m.length)}}class qt{constructor(){}static applyMaskPenaltyRule1(e){return qt.applyMaskPenaltyRule1Internal(e,!0)+qt.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let n=0;const i=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let u=0;u<c-1;u++){const h=i[u];for(let m=0;m<l-1;m++){const C=h[m];C===h[m+1]&&C===i[u+1][m]&&C===i[u+1][m+1]&&n++}}return qt.N2*n}static applyMaskPenaltyRule3(e){let n=0;const i=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let u=0;u<c;u++)for(let h=0;h<l;h++){const m=i[u];h+6<l&&m[h]===1&&m[h+1]===0&&m[h+2]===1&&m[h+3]===1&&m[h+4]===1&&m[h+5]===0&&m[h+6]===1&&(qt.isWhiteHorizontal(m,h-4,h)||qt.isWhiteHorizontal(m,h+7,h+11))&&n++,u+6<c&&i[u][h]===1&&i[u+1][h]===0&&i[u+2][h]===1&&i[u+3][h]===1&&i[u+4][h]===1&&i[u+5][h]===0&&i[u+6][h]===1&&(qt.isWhiteVertical(i,h,u-4,u)||qt.isWhiteVertical(i,h,u+7,u+11))&&n++}return n*qt.N3}static isWhiteHorizontal(e,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(let l=n;l<i;l++)if(e[l]===1)return!1;return!0}static isWhiteVertical(e,n,i,l){i=Math.max(i,0),l=Math.min(l,e.length);for(let c=i;c<l;c++)if(e[c][n]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let n=0;const i=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let m=0;m<c;m++){const C=i[m];for(let _=0;_<l;_++)C[_]===1&&n++}const u=e.getHeight()*e.getWidth();return Math.floor(Math.abs(n*2-u)*10/u)*qt.N4}static getDataMaskBit(e,n,i){let l,c;switch(e){case 0:l=i+n&1;break;case 1:l=i&1;break;case 2:l=n%3;break;case 3:l=(i+n)%3;break;case 4:l=Math.floor(i/2)+Math.floor(n/3)&1;break;case 5:c=i*n,l=(c&1)+c%3;break;case 6:c=i*n,l=(c&1)+c%3&1;break;case 7:c=i*n,l=c%3+(i+n&1)&1;break;default:throw new I("Invalid mask pattern: "+e)}return l===0}static applyMaskPenaltyRule1Internal(e,n){let i=0;const l=n?e.getHeight():e.getWidth(),c=n?e.getWidth():e.getHeight(),u=e.getArray();for(let h=0;h<l;h++){let m=0,C=-1;for(let _=0;_<c;_++){const P=n?u[h][_]:u[_][h];P===C?m++:(m>=5&&(i+=qt.N1+(m-5)),m=1,C=P)}m>=5&&(i+=qt.N1+(m-5))}return i}}qt.N1=3,qt.N2=3,qt.N3=40,qt.N4=10;class lo{constructor(e,n){this.width=e,this.height=n;const i=new Array(n);for(let l=0;l!==n;l++)i[l]=new Uint8Array(e);this.bytes=i}getHeight(){return this.height}getWidth(){return this.width}get(e,n){return this.bytes[n][e]}getArray(){return this.bytes}setNumber(e,n,i){this.bytes[n][e]=i}setBoolean(e,n,i){this.bytes[n][e]=i?1:0}clear(e){for(const n of this.bytes)U.fill(n,e)}equals(e){if(!(e instanceof lo))return!1;const n=e;if(this.width!==n.width||this.height!==n.height)return!1;for(let i=0,l=this.height;i<l;++i){const c=this.bytes[i],u=n.bytes[i];for(let h=0,m=this.width;h<m;++h)if(c[h]!==u[h])return!1}return!0}toString(){const e=new Le;for(let n=0,i=this.height;n<i;++n){const l=this.bytes[n];for(let c=0,u=this.width;c<u;++c)switch(l[c]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class Ti{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new Le;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Ti.NUM_MASK_PATTERNS}}Ti.NUM_MASK_PATTERNS=8;class Yt extends E{}Yt.kind="WriterException";class at{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,n,i,l,c){at.clearMatrix(c),at.embedBasicPatterns(i,c),at.embedTypeInfo(n,l,c),at.maybeEmbedVersionInfo(i,c),at.embedDataBits(e,l,c)}static embedBasicPatterns(e,n){at.embedPositionDetectionPatternsAndSeparators(n),at.embedDarkDotAtLeftBottomCorner(n),at.maybeEmbedPositionAdjustmentPatterns(e,n),at.embedTimingPatterns(n)}static embedTypeInfo(e,n,i){const l=new ee;at.makeTypeInfoBits(e,n,l);for(let c=0,u=l.getSize();c<u;++c){const h=l.get(l.getSize()-1-c),m=at.TYPE_INFO_COORDINATES[c],C=m[0],_=m[1];if(i.setBoolean(C,_,h),c<8){const P=i.getWidth()-c-1;i.setBoolean(P,8,h)}else{const D=i.getHeight()-7+(c-8);i.setBoolean(8,D,h)}}}static maybeEmbedVersionInfo(e,n){if(e.getVersionNumber()<7)return;const i=new ee;at.makeVersionInfoBits(e,i);let l=6*3-1;for(let c=0;c<6;++c)for(let u=0;u<3;++u){const h=i.get(l);l--,n.setBoolean(c,n.getHeight()-11+u,h),n.setBoolean(n.getHeight()-11+u,c,h)}}static embedDataBits(e,n,i){let l=0,c=-1,u=i.getWidth()-1,h=i.getHeight()-1;for(;u>0;){for(u===6&&(u-=1);h>=0&&h<i.getHeight();){for(let m=0;m<2;++m){const C=u-m;if(!at.isEmpty(i.get(C,h)))continue;let _;l<e.getSize()?(_=e.get(l),++l):_=!1,n!==255&&qt.getDataMaskBit(n,C,h)&&(_=!_),i.setBoolean(C,h,_)}h+=c}c=-c,h+=c,u-=2}if(l!==e.getSize())throw new Yt("Not all bits consumed: "+l+"/"+e.getSize())}static findMSBSet(e){return 32-V.numberOfLeadingZeros(e)}static calculateBCHCode(e,n){if(n===0)throw new I("0 polynomial");const i=at.findMSBSet(n);for(e<<=i-1;at.findMSBSet(e)>=i;)e^=n<<at.findMSBSet(e)-i;return e}static makeTypeInfoBits(e,n,i){if(!Ti.isValidMaskPattern(n))throw new Yt("Invalid mask pattern");const l=e.getBits()<<3|n;i.appendBits(l,5);const c=at.calculateBCHCode(l,at.TYPE_INFO_POLY);i.appendBits(c,10);const u=new ee;if(u.appendBits(at.TYPE_INFO_MASK_PATTERN,15),i.xor(u),i.getSize()!==15)throw new Yt("should not happen but we got: "+i.getSize())}static makeVersionInfoBits(e,n){n.appendBits(e.getVersionNumber(),6);const i=at.calculateBCHCode(e.getVersionNumber(),at.VERSION_INFO_POLY);if(n.appendBits(i,12),n.getSize()!==18)throw new Yt("should not happen but we got: "+n.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let n=8;n<e.getWidth()-8;++n){const i=(n+1)%2;at.isEmpty(e.get(n,6))&&e.setNumber(n,6,i),at.isEmpty(e.get(6,n))&&e.setNumber(6,n,i)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new Yt;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,n,i){for(let l=0;l<8;++l){if(!at.isEmpty(i.get(e+l,n)))throw new Yt;i.setNumber(e+l,n,0)}}static embedVerticalSeparationPattern(e,n,i){for(let l=0;l<7;++l){if(!at.isEmpty(i.get(e,n+l)))throw new Yt;i.setNumber(e,n+l,0)}}static embedPositionAdjustmentPattern(e,n,i){for(let l=0;l<5;++l){const c=at.POSITION_ADJUSTMENT_PATTERN[l];for(let u=0;u<5;++u)i.setNumber(e+u,n+l,c[u])}}static embedPositionDetectionPattern(e,n,i){for(let l=0;l<7;++l){const c=at.POSITION_DETECTION_PATTERN[l];for(let u=0;u<7;++u)i.setNumber(e+u,n+l,c[u])}}static embedPositionDetectionPatternsAndSeparators(e){const n=at.POSITION_DETECTION_PATTERN[0].length;at.embedPositionDetectionPattern(0,0,e),at.embedPositionDetectionPattern(e.getWidth()-n,0,e),at.embedPositionDetectionPattern(0,e.getWidth()-n,e);const i=8;at.embedHorizontalSeparationPattern(0,i-1,e),at.embedHorizontalSeparationPattern(e.getWidth()-i,i-1,e),at.embedHorizontalSeparationPattern(0,e.getWidth()-i,e);const l=7;at.embedVerticalSeparationPattern(l,0,e),at.embedVerticalSeparationPattern(e.getHeight()-l-1,0,e),at.embedVerticalSeparationPattern(l,e.getHeight()-l,e)}static maybeEmbedPositionAdjustmentPatterns(e,n){if(e.getVersionNumber()<2)return;const i=e.getVersionNumber()-1,l=at.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[i];for(let c=0,u=l.length;c!==u;c++){const h=l[c];if(h>=0)for(let m=0;m!==u;m++){const C=l[m];C>=0&&at.isEmpty(n.get(C,h))&&at.embedPositionAdjustmentPattern(C-2,h-2,n)}}}}at.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),at.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),at.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),at.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),at.VERSION_INFO_POLY=7973,at.TYPE_INFO_POLY=1335,at.TYPE_INFO_MASK_PATTERN=21522;class Bc{constructor(e,n){this.dataBytes=e,this.errorCorrectionBytes=n}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class $t{constructor(){}static calculateMaskPenalty(e){return qt.applyMaskPenaltyRule1(e)+qt.applyMaskPenaltyRule2(e)+qt.applyMaskPenaltyRule3(e)+qt.applyMaskPenaltyRule4(e)}static encode(e,n,i=null){let l=$t.DEFAULT_BYTE_MODE_ENCODING;const c=i!==null&&i.get(vn.CHARACTER_SET)!==void 0;c&&(l=i.get(vn.CHARACTER_SET).toString());const u=this.chooseMode(e,l),h=new ee;if(u===st.BYTE&&(c||$t.DEFAULT_BYTE_MODE_ENCODING!==l)){const Me=K.getCharacterSetECIByName(l);Me!==void 0&&this.appendECI(Me,h)}this.appendModeInfo(u,h);const m=new ee;this.appendBytes(e,u,m,l);let C;if(i!==null&&i.get(vn.QR_VERSION)!==void 0){const Me=Number.parseInt(i.get(vn.QR_VERSION).toString(),10);C=it.getVersionForNumber(Me);const Ie=this.calculateBitsNeeded(u,h,m,C);if(!this.willFit(Ie,C,n))throw new Yt("Data too big for requested version")}else C=this.recommendVersion(n,u,h,m);const _=new ee;_.appendBitArray(h);const P=u===st.BYTE?m.getSizeInBytes():e.length;this.appendLengthInfo(P,C,u,_),_.appendBitArray(m);const D=C.getECBlocksForLevel(n),H=C.getTotalCodewords()-D.getTotalECCodewords();this.terminateBits(H,_);const X=this.interleaveWithECBytes(_,C.getTotalCodewords(),H,D.getNumBlocks()),Z=new Ti;Z.setECLevel(n),Z.setMode(u),Z.setVersion(C);const te=C.getDimensionForVersion(),de=new lo(te,te),Oe=this.chooseMaskPattern(X,n,C,de);return Z.setMaskPattern(Oe),at.buildMatrix(X,n,C,Oe,de),Z.setMatrix(de),Z}static recommendVersion(e,n,i,l){const c=this.calculateBitsNeeded(n,i,l,it.getVersionForNumber(1)),u=this.chooseVersion(c,e),h=this.calculateBitsNeeded(n,i,l,u);return this.chooseVersion(h,e)}static calculateBitsNeeded(e,n,i,l){return n.getSize()+e.getCharacterCountBits(l)+i.getSize()}static getAlphanumericCode(e){return e<$t.ALPHANUMERIC_TABLE.length?$t.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,n=null){if(K.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(e))return st.KANJI;let i=!1,l=!1;for(let c=0,u=e.length;c<u;++c){const h=e.charAt(c);if($t.isDigit(h))i=!0;else if(this.getAlphanumericCode(h.charCodeAt(0))!==-1)l=!0;else return st.BYTE}return l?st.ALPHANUMERIC:i?st.NUMERIC:st.BYTE}static isOnlyDoubleByteKanji(e){let n;try{n=Be.encode(e,K.SJIS)}catch{return!1}const i=n.length;if(i%2!==0)return!1;for(let l=0;l<i;l+=2){const c=n[l]&255;if((c<129||c>159)&&(c<224||c>235))return!1}return!0}static chooseMaskPattern(e,n,i,l){let c=Number.MAX_SAFE_INTEGER,u=-1;for(let h=0;h<Ti.NUM_MASK_PATTERNS;h++){at.buildMatrix(e,n,i,h,l);let m=this.calculateMaskPenalty(l);m<c&&(c=m,u=h)}return u}static chooseVersion(e,n){for(let i=1;i<=40;i++){const l=it.getVersionForNumber(i);if($t.willFit(e,l,n))return l}throw new Yt("Data too big")}static willFit(e,n,i){const l=n.getTotalCodewords(),u=n.getECBlocksForLevel(i).getTotalECCodewords(),h=l-u,m=(e+7)/8;return h>=m}static terminateBits(e,n){const i=e*8;if(n.getSize()>i)throw new Yt("data bits cannot fit in the QR Code"+n.getSize()+" > "+i);for(let u=0;u<4&&n.getSize()<i;++u)n.appendBit(!1);const l=n.getSize()&7;if(l>0)for(let u=l;u<8;u++)n.appendBit(!1);const c=e-n.getSizeInBytes();for(let u=0;u<c;++u)n.appendBits(u&1?17:236,8);if(n.getSize()!==i)throw new Yt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,n,i,l,c,u){if(l>=i)throw new Yt("Block ID too large");const h=e%i,m=i-h,C=Math.floor(e/i),_=C+1,P=Math.floor(n/i),D=P+1,H=C-P,X=_-D;if(H!==X)throw new Yt("EC bytes mismatch");if(i!==m+h)throw new Yt("RS blocks mismatch");if(e!==(P+H)*m+(D+X)*h)throw new Yt("Total bytes mismatch");l<m?(c[0]=P,u[0]=H):(c[0]=D,u[0]=X)}static interleaveWithECBytes(e,n,i,l){if(e.getSizeInBytes()!==i)throw new Yt("Number of bits and data bytes does not match");let c=0,u=0,h=0;const m=new Array;for(let _=0;_<l;++_){const P=new Int32Array(1),D=new Int32Array(1);$t.getNumDataBytesAndNumECBytesForBlockID(n,i,l,_,P,D);const H=P[0],X=new Uint8Array(H);e.toBytes(8*c,X,0,H);const Z=$t.generateECBytes(X,D[0]);m.push(new Bc(X,Z)),u=Math.max(u,H),h=Math.max(h,Z.length),c+=P[0]}if(i!==c)throw new Yt("Data bytes does not match offset");const C=new ee;for(let _=0;_<u;++_)for(const P of m){const D=P.getDataBytes();_<D.length&&C.appendBits(D[_],8)}for(let _=0;_<h;++_)for(const P of m){const D=P.getErrorCorrectionBytes();_<D.length&&C.appendBits(D[_],8)}if(n!==C.getSizeInBytes())throw new Yt("Interleaving error: "+n+" and "+C.getSizeInBytes()+" differ.");return C}static generateECBytes(e,n){const i=e.length,l=new Int32Array(i+n);for(let u=0;u<i;u++)l[u]=e[u]&255;new qo(ye.QR_CODE_FIELD_256).encode(l,n);const c=new Uint8Array(n);for(let u=0;u<n;u++)c[u]=l[i+u];return c}static appendModeInfo(e,n){n.appendBits(e.getBits(),4)}static appendLengthInfo(e,n,i,l){const c=i.getCharacterCountBits(n);if(e>=1<<c)throw new Yt(e+" is bigger than "+((1<<c)-1));l.appendBits(e,c)}static appendBytes(e,n,i,l){switch(n){case st.NUMERIC:$t.appendNumericBytes(e,i);break;case st.ALPHANUMERIC:$t.appendAlphanumericBytes(e,i);break;case st.BYTE:$t.append8BitBytes(e,i,l);break;case st.KANJI:$t.appendKanjiBytes(e,i);break;default:throw new Yt("Invalid mode: "+n)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const n=$t.getDigit(e);return n>=0&&n<=9}static appendNumericBytes(e,n){const i=e.length;let l=0;for(;l<i;){const c=$t.getDigit(e.charAt(l));if(l+2<i){const u=$t.getDigit(e.charAt(l+1)),h=$t.getDigit(e.charAt(l+2));n.appendBits(c*100+u*10+h,10),l+=3}else if(l+1<i){const u=$t.getDigit(e.charAt(l+1));n.appendBits(c*10+u,7),l+=2}else n.appendBits(c,4),l++}}static appendAlphanumericBytes(e,n){const i=e.length;let l=0;for(;l<i;){const c=$t.getAlphanumericCode(e.charCodeAt(l));if(c===-1)throw new Yt;if(l+1<i){const u=$t.getAlphanumericCode(e.charCodeAt(l+1));if(u===-1)throw new Yt;n.appendBits(c*45+u,11),l+=2}else n.appendBits(c,6),l++}}static append8BitBytes(e,n,i){let l;try{l=Be.encode(e,i)}catch(c){throw new Yt(c)}for(let c=0,u=l.length;c!==u;c++){const h=l[c];n.appendBits(h,8)}}static appendKanjiBytes(e,n){let i;try{i=Be.encode(e,K.SJIS)}catch(c){throw new Yt(c)}const l=i.length;for(let c=0;c<l;c+=2){const u=i[c]&255,h=i[c+1]&255,m=u<<8&4294967295|h;let C=-1;if(m>=33088&&m<=40956?C=m-33088:m>=57408&&m<=60351&&(C=m-49472),C===-1)throw new Yt("Invalid byte sequence");const _=(C>>8)*192+(C&255);n.appendBits(_,13)}}static appendECI(e,n){n.appendBits(st.ECI.getBits(),4),n.appendBits(e.getValue(),8)}}$t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),$t.DEFAULT_BYTE_MODE_ENCODING=K.UTF8.getName();class Ii{write(e,n,i,l=null){if(e.length===0)throw new I("Found empty contents");if(n<0||i<0)throw new I("Requested dimensions are too small: "+n+"x"+i);let c=Xt.L,u=Ii.QUIET_ZONE_SIZE;l!==null&&(l.get(vn.ERROR_CORRECTION)!==void 0&&(c=Xt.fromString(l.get(vn.ERROR_CORRECTION).toString())),l.get(vn.MARGIN)!==void 0&&(u=Number.parseInt(l.get(vn.MARGIN).toString(),10)));const h=$t.encode(e,c,l);return this.renderResult(h,n,i,u)}writeToDom(e,n,i,l,c=null){typeof e=="string"&&(e=document.querySelector(e));const u=this.write(n,i,l,c);e&&e.appendChild(u)}renderResult(e,n,i,l){const c=e.getMatrix();if(c===null)throw new ht;const u=c.getWidth(),h=c.getHeight(),m=u+l*2,C=h+l*2,_=Math.max(n,m),P=Math.max(i,C),D=Math.min(Math.floor(_/m),Math.floor(P/C)),H=Math.floor((_-u*D)/2),X=Math.floor((P-h*D)/2),Z=this.createSVGElement(_,P);for(let te=0,de=X;te<h;te++,de+=D)for(let Oe=0,Me=H;Oe<u;Oe++,Me+=D)if(c.get(Oe,te)===1){const Ie=this.createSvgRectElement(Me,de,D,D);Z.appendChild(Ie)}return Z}createSVGElement(e,n){const i=document.createElementNS(Ii.SVG_NS,"svg");return i.setAttributeNS(null,"height",e.toString()),i.setAttributeNS(null,"width",n.toString()),i}createSvgRectElement(e,n,i,l){const c=document.createElementNS(Ii.SVG_NS,"rect");return c.setAttributeNS(null,"x",e.toString()),c.setAttributeNS(null,"y",n.toString()),c.setAttributeNS(null,"height",i.toString()),c.setAttributeNS(null,"width",l.toString()),c.setAttributeNS(null,"fill","#000000"),c}}Ii.QUIET_ZONE_SIZE=4,Ii.SVG_NS="http://www.w3.org/2000/svg";class Ji{encode(e,n,i,l,c){if(e.length===0)throw new I("Found empty contents");if(n!==ie.QR_CODE)throw new I("Can only encode QR_CODE, but got "+n);if(i<0||l<0)throw new I(`Requested dimensions are too small: ${i}x${l}`);let u=Xt.L,h=Ji.QUIET_ZONE_SIZE;c!==null&&(c.get(vn.ERROR_CORRECTION)!==void 0&&(u=Xt.fromString(c.get(vn.ERROR_CORRECTION).toString())),c.get(vn.MARGIN)!==void 0&&(h=Number.parseInt(c.get(vn.MARGIN).toString(),10)));const m=$t.encode(e,u,c);return Ji.renderResult(m,i,l,h)}static renderResult(e,n,i,l){const c=e.getMatrix();if(c===null)throw new ht;const u=c.getWidth(),h=c.getHeight(),m=u+l*2,C=h+l*2,_=Math.max(n,m),P=Math.max(i,C),D=Math.min(Math.floor(_/m),Math.floor(P/C)),H=Math.floor((_-u*D)/2),X=Math.floor((P-h*D)/2),Z=new Se(_,P);for(let te=0,de=X;te<h;te++,de+=D)for(let Oe=0,Me=H;Oe<u;Oe++,Me+=D)c.get(Oe,te)===1&&Z.setRegion(Me,de,D,D);return Z}}Ji.QUIET_ZONE_SIZE=4;class jc{encode(e,n,i,l,c){let u;switch(n){case ie.QR_CODE:u=new Ji;break;default:throw new I("No encoder available for format "+n)}return u.encode(e,n,i,l,c)}}class Fr extends me{constructor(e,n,i,l,c,u,h,m){if(super(u,h),this.yuvData=e,this.dataWidth=n,this.dataHeight=i,this.left=l,this.top=c,l+u>n||c+h>i)throw new I("Crop rectangle does not fit within image data.");m&&this.reverseHorizontal(u,h)}getRow(e,n){if(e<0||e>=this.getHeight())throw new I("Requested row is outside the image: "+e);const i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));const l=(e+this.top)*this.dataWidth+this.left;return B.arraycopy(this.yuvData,l,n,0,i),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.yuvData;const i=e*n,l=new Uint8ClampedArray(i);let c=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return B.arraycopy(this.yuvData,c,l,0,i),l;for(let u=0;u<n;u++){const h=u*e;B.arraycopy(this.yuvData,c,l,h,e),c+=this.dataWidth}return l}isCropSupported(){return!0}crop(e,n,i,l){return new Fr(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+n,i,l,!1)}renderThumbnail(){const e=this.getWidth()/Fr.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/Fr.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(e*n),l=this.yuvData;let c=this.top*this.dataWidth+this.left;for(let u=0;u<n;u++){const h=u*e;for(let m=0;m<e;m++){const C=l[c+m*Fr.THUMBNAIL_SCALE_FACTOR]&255;i[h+m]=4278190080|C*65793}c+=this.dataWidth*Fr.THUMBNAIL_SCALE_FACTOR}return i}getThumbnailWidth(){return this.getWidth()/Fr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Fr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,n){const i=this.yuvData;for(let l=0,c=this.top*this.dataWidth+this.left;l<n;l++,c+=this.dataWidth){const u=c+e/2;for(let h=c,m=c+e-1;h<u;h++,m--){const C=i[h];i[h]=i[m],i[m]=C}}}invert(){return new ze(this)}}Fr.THUMBNAIL_SCALE_FACTOR=2;class ks extends me{constructor(e,n,i,l,c,u,h){if(super(n,i),this.dataWidth=l,this.dataHeight=c,this.left=u,this.top=h,e.BYTES_PER_ELEMENT===4){const m=n*i,C=new Uint8ClampedArray(m);for(let _=0;_<m;_++){const P=e[_],D=P>>16&255,H=P>>7&510,X=P&255;C[_]=(D+H+X)/4&255}this.luminances=C}else this.luminances=e;if(l===void 0&&(this.dataWidth=n),c===void 0&&(this.dataHeight=i),u===void 0&&(this.left=0),h===void 0&&(this.top=0),this.left+n>this.dataWidth||this.top+i>this.dataHeight)throw new I("Crop rectangle does not fit within image data.")}getRow(e,n){if(e<0||e>=this.getHeight())throw new I("Requested row is outside the image: "+e);const i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));const l=(e+this.top)*this.dataWidth+this.left;return B.arraycopy(this.luminances,l,n,0,i),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.luminances;const i=e*n,l=new Uint8ClampedArray(i);let c=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return B.arraycopy(this.luminances,c,l,0,i),l;for(let u=0;u<n;u++){const h=u*e;B.arraycopy(this.luminances,c,l,h,e),c+=this.dataWidth}return l}isCropSupported(){return!0}crop(e,n,i,l){return new ks(this.luminances,i,l,this.dataWidth,this.dataHeight,this.left+e,this.top+n)}invert(){return new ze(this)}}class il extends K{static forName(e){return this.getCharacterSetECIByName(e)}}class Qo{}Qo.ISO_8859_1=K.ISO8859_1;class sl{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Jo{static singletonList(e){return[e]}static min(e,n){return e.sort(n)[0]}}class Fc{constructor(e){this.previous=e}getPrevious(){return this.previous}}class es extends Fc{constructor(e,n,i){super(e),this.value=n,this.bitCount=i}appendTo(e,n){e.appendBits(this.value,this.bitCount)}add(e,n){return new es(this,e,n)}addBinaryShift(e,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new es(this,e,n)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+V.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class ea extends es{constructor(e,n,i){super(e,0,0),this.binaryShiftStart=n,this.binaryShiftByteCount=i}appendTo(e,n){for(let i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):i===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(n[this.binaryShiftStart+i],8)}addBinaryShift(e,n){return new ea(this,e,n)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Vc(k,e,n){return new ea(k,e,n)}function Ps(k,e,n){return new es(k,e,n)}const zc=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],di=0,ts=1,jn=2,ol=3,_r=4,al=new es(null,0,0),co=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function ll(k){for(let e of k)U.fill(e,-1);return k[di][_r]=0,k[ts][_r]=0,k[ts][di]=28,k[ol][_r]=0,k[jn][_r]=0,k[jn][di]=15,k}const ta=ll(U.createInt32Array(6,6));class Yn{constructor(e,n,i,l){this.token=e,this.mode=n,this.binaryShiftByteCount=i,this.bitCount=l}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,n){let i=this.bitCount,l=this.token;if(e!==this.mode){let u=co[this.mode][e];l=Ps(l,u&65535,u>>16),i+=u>>16}let c=e===jn?4:5;return l=Ps(l,n,c),new Yn(l,e,0,i+c)}shiftAndAppend(e,n){let i=this.token,l=this.mode===jn?4:5;return i=Ps(i,ta[this.mode][e],l),i=Ps(i,n,5),new Yn(i,this.mode,0,this.bitCount+l+5)}addBinaryShiftChar(e){let n=this.token,i=this.mode,l=this.bitCount;if(this.mode===_r||this.mode===jn){let h=co[i][di];n=Ps(n,h&65535,h>>16),l+=h>>16,i=di}let c=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,u=new Yn(n,i,this.binaryShiftByteCount+1,l+c);return u.binaryShiftByteCount===2078&&(u=u.endBinaryShift(e+1)),u}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let n=this.token;return n=Vc(n,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new Yn(n,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let n=this.bitCount+(co[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?n+=Yn.calculateBinaryShiftCost(e)-Yn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(n+=10),n<=e.bitCount}toBitArray(e){let n=[];for(let l=this.endBinaryShift(e.length).token;l!==null;l=l.getPrevious())n.unshift(l);let i=new ee;for(const l of n)l.appendTo(i,e);return i}toString(){return Ne.format("%s bits=%d bytes=%d",zc[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}Yn.INITIAL_STATE=new Yn(al,di,0,0);function Uc(k){const e=Ne.getCharCode(" "),n=Ne.getCharCode("."),i=Ne.getCharCode(",");k[di][e]=1;const l=Ne.getCharCode("Z"),c=Ne.getCharCode("A");for(let D=c;D<=l;D++)k[di][D]=D-c+2;k[ts][e]=1;const u=Ne.getCharCode("z"),h=Ne.getCharCode("a");for(let D=h;D<=u;D++)k[ts][D]=D-h+2;k[jn][e]=1;const m=Ne.getCharCode("9"),C=Ne.getCharCode("0");for(let D=C;D<=m;D++)k[jn][D]=D-C+2;k[jn][i]=12,k[jn][n]=13;const _=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let D=0;D<_.length;D++)k[ol][Ne.getCharCode(_[D])]=D;const P=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let D=0;D<P.length;D++)Ne.getCharCode(P[D])>0&&(k[_r][Ne.getCharCode(P[D])]=D);return k}const na=Uc(U.createInt32Array(5,256));class Os{constructor(e){this.text=e}encode(){const e=Ne.getCharCode(" "),n=Ne.getCharCode(`
`);let i=Jo.singletonList(Yn.INITIAL_STATE);for(let c=0;c<this.text.length;c++){let u,h=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case Ne.getCharCode("\r"):u=h===n?2:0;break;case Ne.getCharCode("."):u=h===e?3:0;break;case Ne.getCharCode(","):u=h===e?4:0;break;case Ne.getCharCode(":"):u=h===e?5:0;break;default:u=0}u>0?(i=Os.updateStateListForPair(i,c,u),c++):i=this.updateStateListForChar(i,c)}return Jo.min(i,(c,u)=>c.getBitCount()-u.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,n){const i=[];for(let l of e)this.updateStateForChar(l,n,i);return Os.simplifyStates(i)}updateStateForChar(e,n,i){let l=this.text[n]&255,c=na[e.getMode()][l]>0,u=null;for(let h=0;h<=_r;h++){let m=na[h][l];if(m>0){if(u==null&&(u=e.endBinaryShift(n)),!c||h===e.getMode()||h===jn){const C=u.latchAndAppend(h,m);i.push(C)}if(!c&&ta[e.getMode()][h]>=0){const C=u.shiftAndAppend(h,m);i.push(C)}}}if(e.getBinaryShiftByteCount()>0||na[e.getMode()][l]===0){let h=e.addBinaryShiftChar(n);i.push(h)}}static updateStateListForPair(e,n,i){const l=[];for(let c of e)this.updateStateForPair(c,n,i,l);return this.simplifyStates(l)}static updateStateForPair(e,n,i,l){let c=e.endBinaryShift(n);if(l.push(c.latchAndAppend(_r,i)),e.getMode()!==_r&&l.push(c.shiftAndAppend(_r,i)),i===3||i===4){let u=c.latchAndAppend(jn,16-i).latchAndAppend(jn,1);l.push(u)}if(e.getBinaryShiftByteCount()>0){let u=e.addBinaryShiftChar(n).addBinaryShiftChar(n+1);l.push(u)}}static simplifyStates(e){let n=[];for(const i of e){let l=!0;for(const c of n){if(c.isBetterThanOrEqualTo(i)){l=!1;break}i.isBetterThanOrEqualTo(c)&&(n=n.filter(u=>u!==c))}l&&n.push(i)}return n}}class Lt{constructor(){}static encodeBytes(e){return Lt.encode(e,Lt.DEFAULT_EC_PERCENT,Lt.DEFAULT_AZTEC_LAYERS)}static encode(e,n,i){let l=new Os(e).encode(),c=V.truncDivision(l.getSize()*n,100)+11,u=l.getSize()+c,h,m,C,_,P;if(i!==Lt.DEFAULT_AZTEC_LAYERS){if(h=i<0,m=Math.abs(i),m>(h?Lt.MAX_NB_BITS_COMPACT:Lt.MAX_NB_BITS))throw new I(Ne.format("Illegal value %s for layers",i));C=Lt.totalBitsInLayer(m,h),_=Lt.WORD_SIZE[m];let Ie=C-C%_;if(P=Lt.stuffBits(l,_),P.getSize()+c>Ie)throw new I("Data to large for user specified layer");if(h&&P.getSize()>_*64)throw new I("Data to large for user specified layer")}else{_=0,P=null;for(let Ie=0;;Ie++){if(Ie>Lt.MAX_NB_BITS)throw new I("Data too large for an Aztec code");if(h=Ie<=3,m=h?Ie+1:Ie,C=Lt.totalBitsInLayer(m,h),u>C)continue;(P==null||_!==Lt.WORD_SIZE[m])&&(_=Lt.WORD_SIZE[m],P=Lt.stuffBits(l,_));let _t=C-C%_;if(!(h&&P.getSize()>_*64)&&P.getSize()+c<=_t)break}}let D=Lt.generateCheckWords(P,C,_),H=P.getSize()/_,X=Lt.generateModeMessage(h,m,H),Z=(h?11:14)+m*4,te=new Int32Array(Z),de;if(h){de=Z;for(let Ie=0;Ie<te.length;Ie++)te[Ie]=Ie}else{de=Z+1+2*V.truncDivision(V.truncDivision(Z,2)-1,15);let Ie=V.truncDivision(Z,2),_t=V.truncDivision(de,2);for(let vt=0;vt<Ie;vt++){let ir=vt+V.truncDivision(vt,15);te[Ie-vt-1]=_t-ir-1,te[Ie+vt]=_t+ir+1}}let Oe=new Se(de);for(let Ie=0,_t=0;Ie<m;Ie++){let vt=(m-Ie)*4+(h?9:12);for(let ir=0;ir<vt;ir++){let Rr=ir*2;for(let Cn=0;Cn<2;Cn++)D.get(_t+Rr+Cn)&&Oe.set(te[Ie*2+Cn],te[Ie*2+ir]),D.get(_t+vt*2+Rr+Cn)&&Oe.set(te[Ie*2+ir],te[Z-1-Ie*2-Cn]),D.get(_t+vt*4+Rr+Cn)&&Oe.set(te[Z-1-Ie*2-Cn],te[Z-1-Ie*2-ir]),D.get(_t+vt*6+Rr+Cn)&&Oe.set(te[Z-1-Ie*2-ir],te[Ie*2+Cn])}_t+=vt*8}if(Lt.drawModeMessage(Oe,h,de,X),h)Lt.drawBullsEye(Oe,V.truncDivision(de,2),5);else{Lt.drawBullsEye(Oe,V.truncDivision(de,2),7);for(let Ie=0,_t=0;Ie<V.truncDivision(Z,2)-1;Ie+=15,_t+=16)for(let vt=V.truncDivision(de,2)&1;vt<de;vt+=2)Oe.set(V.truncDivision(de,2)-_t,vt),Oe.set(V.truncDivision(de,2)+_t,vt),Oe.set(vt,V.truncDivision(de,2)-_t),Oe.set(vt,V.truncDivision(de,2)+_t)}let Me=new sl;return Me.setCompact(h),Me.setSize(de),Me.setLayers(m),Me.setCodeWords(H),Me.setMatrix(Oe),Me}static drawBullsEye(e,n,i){for(let l=0;l<i;l+=2)for(let c=n-l;c<=n+l;c++)e.set(c,n-l),e.set(c,n+l),e.set(n-l,c),e.set(n+l,c);e.set(n-i,n-i),e.set(n-i+1,n-i),e.set(n-i,n-i+1),e.set(n+i,n-i),e.set(n+i,n-i+1),e.set(n+i,n+i-1)}static generateModeMessage(e,n,i){let l=new ee;return e?(l.appendBits(n-1,2),l.appendBits(i-1,6),l=Lt.generateCheckWords(l,28,4)):(l.appendBits(n-1,5),l.appendBits(i-1,11),l=Lt.generateCheckWords(l,40,4)),l}static drawModeMessage(e,n,i,l){let c=V.truncDivision(i,2);if(n)for(let u=0;u<7;u++){let h=c-3+u;l.get(u)&&e.set(h,c-5),l.get(u+7)&&e.set(c+5,h),l.get(20-u)&&e.set(h,c+5),l.get(27-u)&&e.set(c-5,h)}else for(let u=0;u<10;u++){let h=c-5+u+V.truncDivision(u,5);l.get(u)&&e.set(h,c-7),l.get(u+10)&&e.set(c+7,h),l.get(29-u)&&e.set(h,c+7),l.get(39-u)&&e.set(c-7,h)}}static generateCheckWords(e,n,i){let l=e.getSize()/i,c=new qo(Lt.getGF(i)),u=V.truncDivision(n,i),h=Lt.bitsToWords(e,i,u);c.encode(h,u-l);let m=n%i,C=new ee;C.appendBits(0,m);for(const _ of Array.from(h))C.appendBits(_,i);return C}static bitsToWords(e,n,i){let l=new Int32Array(i),c,u;for(c=0,u=e.getSize()/n;c<u;c++){let h=0;for(let m=0;m<n;m++)h|=e.get(c*n+m)?1<<n-m-1:0;l[c]=h}return l}static getGF(e){switch(e){case 4:return ye.AZTEC_PARAM;case 6:return ye.AZTEC_DATA_6;case 8:return ye.AZTEC_DATA_8;case 10:return ye.AZTEC_DATA_10;case 12:return ye.AZTEC_DATA_12;default:throw new I("Unsupported word size "+e)}}static stuffBits(e,n){let i=new ee,l=e.getSize(),c=(1<<n)-2;for(let u=0;u<l;u+=n){let h=0;for(let m=0;m<n;m++)(u+m>=l||e.get(u+m))&&(h|=1<<n-1-m);(h&c)===c?(i.appendBits(h&c,n),u--):h&c?i.appendBits(h,n):(i.appendBits(h|1,n),u--)}return i}static totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}Lt.DEFAULT_EC_PERCENT=33,Lt.DEFAULT_AZTEC_LAYERS=0,Lt.MAX_NB_BITS=32,Lt.MAX_NB_BITS_COMPACT=4,Lt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ms{encode(e,n,i,l){return this.encodeWithHints(e,n,i,l,null)}encodeWithHints(e,n,i,l,c){let u=Qo.ISO_8859_1,h=Lt.DEFAULT_EC_PERCENT,m=Lt.DEFAULT_AZTEC_LAYERS;return c!=null&&(c.has(vn.CHARACTER_SET)&&(u=il.forName(c.get(vn.CHARACTER_SET).toString())),c.has(vn.ERROR_CORRECTION)&&(h=V.parseInt(c.get(vn.ERROR_CORRECTION).toString())),c.has(vn.AZTEC_LAYERS)&&(m=V.parseInt(c.get(vn.AZTEC_LAYERS).toString()))),Ms.encodeLayers(e,n,i,l,u,h,m)}static encodeLayers(e,n,i,l,c,u,h){if(n!==ie.AZTEC)throw new I("Can only encode AZTEC, but got "+n);let m=Lt.encode(Ne.getBytes(e,c),u,h);return Ms.renderResult(m,i,l)}static renderResult(e,n,i){let l=e.getMatrix();if(l==null)throw new ht;let c=l.getWidth(),u=l.getHeight(),h=Math.max(n,c),m=Math.max(i,u),C=Math.min(h/c,m/u),_=(h-c*C)/2,P=(m-u*C)/2,D=new Se(h,m);for(let H=0,X=P;H<u;H++,X+=C)for(let Z=0,te=_;Z<c;Z++,te+=C)l.get(Z,H)&&D.setRegion(te,X,C,C);return D}}a.AbstractExpandedDecoder=Xi,a.ArgumentException=S,a.ArithmeticException=ue,a.AztecCode=sl,a.AztecCodeReader=Ht,a.AztecCodeWriter=Ms,a.AztecDecoder=Je,a.AztecDetector=Wt,a.AztecDetectorResult=Ct,a.AztecEncoder=Lt,a.AztecHighLevelEncoder=Os,a.AztecPoint=At,a.BarcodeFormat=ie,a.Binarizer=L,a.BinaryBitmap=R,a.BitArray=ee,a.BitMatrix=Se,a.BitSource=Ho,a.BrowserAztecCodeReader=Gt,a.BrowserBarcodeReader=Yi,a.BrowserCodeReader=pe,a.BrowserDatamatrixCodeReader=Lc,a.BrowserMultiFormatReader=Rs,a.BrowserPDF417Reader=ao,a.BrowserQRCodeReader=rl,a.BrowserQRCodeSvgWriter=Ii,a.CharacterSetECI=K,a.ChecksumException=M,a.Code128Reader=xe,a.Code39Reader=gt,a.DataMatrixDecodedBitStreamParser=Tr,a.DataMatrixReader=Ir,a.DecodeHintType=ne,a.DecoderResult=Ve,a.DefaultGridSampler=ut,a.DetectorResult=yn,a.EAN13Reader=Ln,a.EncodeHintType=vn,a.Exception=E,a.FormatException=q,a.GenericGF=ye,a.GenericGFPoly=tt,a.GlobalHistogramBinarizer=Fe,a.GridSampler=He,a.GridSamplerInstance=Ge,a.HTMLCanvasElementLuminanceSource=ce,a.HybridBinarizer=ge,a.ITFReader=dt,a.IllegalArgumentException=I,a.IllegalStateException=ht,a.InvertedLuminanceSource=ze,a.LuminanceSource=me,a.MathUtils=nt,a.MultiFormatOneDReader=bi,a.MultiFormatReader=oo,a.MultiFormatWriter=jc,a.NotFoundException=Q,a.OneDReader=Ue,a.PDF417DecodedBitStreamParser=fe,a.PDF417DecoderErrorCorrection=Yo,a.PDF417Reader=kn,a.PDF417ResultMetadata=io,a.PerspectiveTransform=qe,a.PlanarYUVLuminanceSource=Fr,a.QRCodeByteMatrix=lo,a.QRCodeDataMask=Tt,a.QRCodeDecodedBitStreamParser=Kt,a.QRCodeDecoderErrorCorrectionLevel=Xt,a.QRCodeDecoderFormatInformation=Nn,a.QRCodeEncoder=$t,a.QRCodeEncoderQRCode=Ti,a.QRCodeMaskUtil=qt,a.QRCodeMatrixUtil=at,a.QRCodeMode=st,a.QRCodeReader=Xn,a.QRCodeVersion=it,a.QRCodeWriter=Ji,a.RGBLuminanceSource=ks,a.RSS14Reader=Bt,a.RSSExpandedReader=Ce,a.ReaderException=Qi,a.ReedSolomonDecoder=Pt,a.ReedSolomonEncoder=qo,a.ReedSolomonException=Xe,a.Result=ve,a.ResultMetadataType=Ae,a.ResultPoint=Pe,a.StringUtils=Ne,a.UnsupportedOperationException=Re,a.VideoInputDevice=W,a.WhiteRectangleDetector=we,a.WriterException=Yt,a.ZXingArrays=U,a.ZXingCharset=il,a.ZXingInteger=V,a.ZXingStandardCharsets=Qo,a.ZXingStringBuilder=Le,a.ZXingStringEncoding=Be,a.ZXingSystem=B,a.createAbstractExpandedDecoder=Gn,Object.defineProperty(a,"__esModule",{value:!0})})}(_a,_a.exports)),_a.exports}rw();var xf=function(){var r=function(o,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var x in p)Object.prototype.hasOwnProperty.call(p,x)&&(f[x]=p[x])},r(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(o,a);function f(){this.constructor=o}o.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),ug=function(){function r(o,a){this.name=o,this.track=a}return r.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},r.prototype.apply=function(o){var a={};a[this.name]=o;var f={advanced:[a]};return this.track.applyConstraints(f)},r.prototype.value=function(){var o=this.track.getSettings();if(this.name in o){var a=o[this.name];return a}return null},r}(),iw=function(r){xf(o,r);function o(a,f){return r.call(this,a,f)||this}return o.prototype.min=function(){return this.getCapabilities().min},o.prototype.max=function(){return this.getCapabilities().max},o.prototype.step=function(){return this.getCapabilities().step},o.prototype.apply=function(a){var f={};f[this.name]=a;var p={advanced:[f]};return this.track.applyConstraints(p)},o.prototype.getCapabilities=function(){this.failIfNotSupported();var a=this.track.getCapabilities(),f=a[this.name];return{min:f.min,max:f.max,step:f.step}},o.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},o}(ug);(function(r){xf(o,r);function o(a){return r.call(this,"zoom",a)||this}return o})(iw);(function(r){xf(o,r);function o(a){return r.call(this,"torch",a)||this}return o})(ug);var A1;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.NOT_STARTED=1]="NOT_STARTED",r[r.SCANNING=2]="SCANNING",r[r.PAUSED=3]="PAUSED"})(A1||(A1={}));var sw=function(){var r=function(o,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var x in p)Object.prototype.hasOwnProperty.call(p,x)&&(f[x]=p[x])},r(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(o,a);function f(){this.constructor=o}o.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}();(function(r){sw(o,r);function o(){return r!==null&&r.apply(this,arguments)||this}return o.DEFAULT_WIDTH=300,o.DEFAULT_WIDTH_OFFSET=2,o.FILE_SCAN_MIN_HEIGHT=300,o.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,o.MIN_QR_BOX_SIZE=50,o.SHADED_LEFT=1,o.SHADED_RIGHT=2,o.SHADED_TOP=3,o.SHADED_BOTTOM=4,o.SHADED_REGION_ELEMENT_ID="qr-shaded-region",o.VERBOSE=!1,o.BORDER_SHADER_DEFAULT_COLOR="#ffffff",o.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",o})(tw);var S1;(function(r){r[r.STATUS_DEFAULT=0]="STATUS_DEFAULT",r[r.STATUS_SUCCESS=1]="STATUS_SUCCESS",r[r.STATUS_WARNING=2]="STATUS_WARNING",r[r.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(S1||(S1={}));const ow=({user:r,onProfileClick:o})=>{const a=Wn();return w.jsx("div",{children:w.jsx("div",{style:{position:"absolute",top:"45px",display:"flex",alignItems:"center",width:"94%",height:"10px",left:"3%"},children:r==null?w.jsxs("div",{style:{position:"absolute",width:"100%",display:"flex",justifyContent:"space-between"},children:[w.jsx("button",{className:"login-button",onClick:()=>a("/login"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:w.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Login"})}),w.jsx("button",{className:"login-button",onClick:()=>a("/signup"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:w.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Sign up"})})]}):w.jsxs("div",{style:{position:"absolute",width:"100%",display:"flex",justifyContent:"space-between"},children:[w.jsx("button",{className:"login-button",onClick:()=>a("/logout"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:w.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Logout"})}),w.jsx("button",{className:"login-button",onClick:o,style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:w.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Profile"})})]})})})},yf=N.createContext({});function wf(r){const o=N.useRef(null);return o.current===null&&(o.current=r()),o.current}const vf=typeof window<"u",dg=vf?N.useLayoutEffect:N.useEffect,kc=N.createContext(null);function Cf(r,o){r.indexOf(o)===-1&&r.push(o)}function Ef(r,o){const a=r.indexOf(o);a>-1&&r.splice(a,1)}const Vi=(r,o,a)=>a>o?o:a<r?r:a;let bf=()=>{};const zi={},fg=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r);function hg(r){return typeof r=="object"&&r!==null}const pg=r=>/^0[^.\s]+$/u.test(r);function Af(r){let o;return()=>(o===void 0&&(o=r()),o)}const $r=r=>r,aw=(r,o)=>a=>o(r(a)),Ya=(...r)=>r.reduce(aw),ja=(r,o,a)=>{const f=o-r;return f===0?1:(a-r)/f};class Sf{constructor(){this.subscriptions=[]}add(o){return Cf(this.subscriptions,o),()=>Ef(this.subscriptions,o)}notify(o,a,f){const p=this.subscriptions.length;if(p)if(p===1)this.subscriptions[0](o,a,f);else for(let x=0;x<p;x++){const y=this.subscriptions[x];y&&y(o,a,f)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const mi=r=>r*1e3,xi=r=>r/1e3;function gg(r,o){return o?r*(1e3/o):0}const mg=(r,o,a)=>(((1-3*a+3*o)*r+(3*a-6*o))*r+3*o)*r,lw=1e-7,cw=12;function uw(r,o,a,f,p){let x,y,A=0;do y=o+(a-o)/2,x=mg(y,f,p)-r,x>0?a=y:o=y;while(Math.abs(x)>lw&&++A<cw);return y}function $a(r,o,a,f){if(r===o&&a===f)return $r;const p=x=>uw(x,0,1,r,a);return x=>x===0||x===1?x:mg(p(x),o,f)}const xg=r=>o=>o<=.5?r(2*o)/2:(2-r(2*(1-o)))/2,yg=r=>o=>1-r(1-o),wg=$a(.33,1.53,.69,.99),Tf=yg(wg),vg=xg(Tf),Cg=r=>(r*=2)<1?.5*Tf(r):.5*(2-Math.pow(2,-10*(r-1))),If=r=>1-Math.sin(Math.acos(r)),Eg=yg(If),bg=xg(If),dw=$a(.42,0,1,1),fw=$a(0,0,.58,1),Ag=$a(.42,0,.58,1),hw=r=>Array.isArray(r)&&typeof r[0]!="number",Sg=r=>Array.isArray(r)&&typeof r[0]=="number",pw={linear:$r,easeIn:dw,easeInOut:Ag,easeOut:fw,circIn:If,circInOut:bg,circOut:Eg,backIn:Tf,backInOut:vg,backOut:wg,anticipate:Cg},gw=r=>typeof r=="string",T1=r=>{if(Sg(r)){bf(r.length===4);const[o,a,f,p]=r;return $a(o,a,f,p)}else if(gw(r))return pw[r];return r},rc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function mw(r,o){let a=new Set,f=new Set,p=!1,x=!1;const y=new WeakSet;let A={delta:0,timestamp:0,isProcessing:!1};function v(S){y.has(S)&&(E.schedule(S),r()),S(A)}const E={schedule:(S,I=!1,R=!1)=>{const L=R&&p?a:f;return I&&y.add(S),L.has(S)||L.add(S),S},cancel:S=>{f.delete(S),y.delete(S)},process:S=>{if(A=S,p){x=!0;return}p=!0,[a,f]=[f,a],a.forEach(v),a.clear(),p=!1,x&&(x=!1,E.process(S))}};return E}const xw=40;function Tg(r,o){let a=!1,f=!0;const p={delta:0,timestamp:0,isProcessing:!1},x=()=>a=!0,y=rc.reduce((V,ee)=>(V[ee]=mw(x),V),{}),{setup:A,read:v,resolveKeyframes:E,preUpdate:S,update:I,preRender:R,render:M,postRender:L}=y,B=()=>{const V=zi.useManualTiming?p.timestamp:performance.now();a=!1,zi.useManualTiming||(p.delta=f?1e3/60:Math.max(Math.min(V-p.timestamp,xw),1)),p.timestamp=V,p.isProcessing=!0,A.process(p),v.process(p),E.process(p),S.process(p),I.process(p),R.process(p),M.process(p),L.process(p),p.isProcessing=!1,a&&o&&(f=!1,r(B))},j=()=>{a=!0,f=!0,p.isProcessing||r(B)};return{schedule:rc.reduce((V,ee)=>{const re=y[ee];return V[ee]=(ne,q=!1,le=!1)=>(a||j(),re.schedule(ne,q,le)),V},{}),cancel:V=>{for(let ee=0;ee<rc.length;ee++)y[rc[ee]].cancel(V)},state:p,steps:y}}const{schedule:sn,cancel:vs,state:Qn,steps:pd}=Tg(typeof requestAnimationFrame<"u"?requestAnimationFrame:$r,!0);let fc;function yw(){fc=void 0}const Sr={now:()=>(fc===void 0&&Sr.set(Qn.isProcessing||zi.useManualTiming?Qn.timestamp:performance.now()),fc),set:r=>{fc=r,queueMicrotask(yw)}},Ig=r=>o=>typeof o=="string"&&o.startsWith(r),Nf=Ig("--"),ww=Ig("var(--"),_f=r=>ww(r)?vw.test(r.split("/*")[0].trim()):!1,vw=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Vo={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},Fa={...Vo,transform:r=>Vi(0,1,r)},ic={...Vo,default:1},ka=r=>Math.round(r*1e5)/1e5,Rf=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Cw(r){return r==null}const Ew=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,kf=(r,o)=>a=>!!(typeof a=="string"&&Ew.test(a)&&a.startsWith(r)||o&&!Cw(a)&&Object.prototype.hasOwnProperty.call(a,o)),Ng=(r,o,a)=>f=>{if(typeof f!="string")return f;const[p,x,y,A]=f.match(Rf);return{[r]:parseFloat(p),[o]:parseFloat(x),[a]:parseFloat(y),alpha:A!==void 0?parseFloat(A):1}},bw=r=>Vi(0,255,r),gd={...Vo,transform:r=>Math.round(bw(r))},Zs={test:kf("rgb","red"),parse:Ng("red","green","blue"),transform:({red:r,green:o,blue:a,alpha:f=1})=>"rgba("+gd.transform(r)+", "+gd.transform(o)+", "+gd.transform(a)+", "+ka(Fa.transform(f))+")"};function Aw(r){let o="",a="",f="",p="";return r.length>5?(o=r.substring(1,3),a=r.substring(3,5),f=r.substring(5,7),p=r.substring(7,9)):(o=r.substring(1,2),a=r.substring(2,3),f=r.substring(3,4),p=r.substring(4,5),o+=o,a+=a,f+=f,p+=p),{red:parseInt(o,16),green:parseInt(a,16),blue:parseInt(f,16),alpha:p?parseInt(p,16)/255:1}}const Md={test:kf("#"),parse:Aw,transform:Zs.transform},Za=r=>({test:o=>typeof o=="string"&&o.endsWith(r)&&o.split(" ").length===1,parse:parseFloat,transform:o=>`${o}${r}`}),xs=Za("deg"),yi=Za("%"),mt=Za("px"),Sw=Za("vh"),Tw=Za("vw"),I1={...yi,parse:r=>yi.parse(r)/100,transform:r=>yi.transform(r*100)},No={test:kf("hsl","hue"),parse:Ng("hue","saturation","lightness"),transform:({hue:r,saturation:o,lightness:a,alpha:f=1})=>"hsla("+Math.round(r)+", "+yi.transform(ka(o))+", "+yi.transform(ka(a))+", "+ka(Fa.transform(f))+")"},Tn={test:r=>Zs.test(r)||Md.test(r)||No.test(r),parse:r=>Zs.test(r)?Zs.parse(r):No.test(r)?No.parse(r):Md.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?Zs.transform(r):No.transform(r),getAnimatableNone:r=>{const o=Tn.parse(r);return o.alpha=0,Tn.transform(o)}},Iw=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Nw(r){var o,a;return isNaN(r)&&typeof r=="string"&&(((o=r.match(Rf))==null?void 0:o.length)||0)+(((a=r.match(Iw))==null?void 0:a.length)||0)>0}const _g="number",Rg="color",_w="var",Rw="var(",N1="${}",kw=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Va(r){const o=r.toString(),a=[],f={color:[],number:[],var:[]},p=[];let x=0;const A=o.replace(kw,v=>(Tn.test(v)?(f.color.push(x),p.push(Rg),a.push(Tn.parse(v))):v.startsWith(Rw)?(f.var.push(x),p.push(_w),a.push(v)):(f.number.push(x),p.push(_g),a.push(parseFloat(v))),++x,N1)).split(N1);return{values:a,split:A,indexes:f,types:p}}function kg(r){return Va(r).values}function Pg(r){const{split:o,types:a}=Va(r),f=o.length;return p=>{let x="";for(let y=0;y<f;y++)if(x+=o[y],p[y]!==void 0){const A=a[y];A===_g?x+=ka(p[y]):A===Rg?x+=Tn.transform(p[y]):x+=p[y]}return x}}const Pw=r=>typeof r=="number"?0:Tn.test(r)?Tn.getAnimatableNone(r):r;function Ow(r){const o=kg(r);return Pg(r)(o.map(Pw))}const Cs={test:Nw,parse:kg,createTransformer:Pg,getAnimatableNone:Ow};function md(r,o,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?r+(o-r)*6*a:a<1/2?o:a<2/3?r+(o-r)*(2/3-a)*6:r}function Mw({hue:r,saturation:o,lightness:a,alpha:f}){r/=360,o/=100,a/=100;let p=0,x=0,y=0;if(!o)p=x=y=a;else{const A=a<.5?a*(1+o):a+o-a*o,v=2*a-A;p=md(v,A,r+1/3),x=md(v,A,r),y=md(v,A,r-1/3)}return{red:Math.round(p*255),green:Math.round(x*255),blue:Math.round(y*255),alpha:f}}function vc(r,o){return a=>a>0?o:r}const un=(r,o,a)=>r+(o-r)*a,xd=(r,o,a)=>{const f=r*r,p=a*(o*o-f)+f;return p<0?0:Math.sqrt(p)},Dw=[Md,Zs,No],Lw=r=>Dw.find(o=>o.test(r));function _1(r){const o=Lw(r);if(!o)return!1;let a=o.parse(r);return o===No&&(a=Mw(a)),a}const R1=(r,o)=>{const a=_1(r),f=_1(o);if(!a||!f)return vc(r,o);const p={...a};return x=>(p.red=xd(a.red,f.red,x),p.green=xd(a.green,f.green,x),p.blue=xd(a.blue,f.blue,x),p.alpha=un(a.alpha,f.alpha,x),Zs.transform(p))},Dd=new Set(["none","hidden"]);function Bw(r,o){return Dd.has(r)?a=>a<=0?r:o:a=>a>=1?o:r}function jw(r,o){return a=>un(r,o,a)}function Pf(r){return typeof r=="number"?jw:typeof r=="string"?_f(r)?vc:Tn.test(r)?R1:zw:Array.isArray(r)?Og:typeof r=="object"?Tn.test(r)?R1:Fw:vc}function Og(r,o){const a=[...r],f=a.length,p=r.map((x,y)=>Pf(x)(x,o[y]));return x=>{for(let y=0;y<f;y++)a[y]=p[y](x);return a}}function Fw(r,o){const a={...r,...o},f={};for(const p in a)r[p]!==void 0&&o[p]!==void 0&&(f[p]=Pf(r[p])(r[p],o[p]));return p=>{for(const x in f)a[x]=f[x](p);return a}}function Vw(r,o){const a=[],f={color:0,var:0,number:0};for(let p=0;p<o.values.length;p++){const x=o.types[p],y=r.indexes[x][f[x]],A=r.values[y]??0;a[p]=A,f[x]++}return a}const zw=(r,o)=>{const a=Cs.createTransformer(o),f=Va(r),p=Va(o);return f.indexes.var.length===p.indexes.var.length&&f.indexes.color.length===p.indexes.color.length&&f.indexes.number.length>=p.indexes.number.length?Dd.has(r)&&!p.values.length||Dd.has(o)&&!f.values.length?Bw(r,o):Ya(Og(Vw(f,p),p.values),a):vc(r,o)};function Mg(r,o,a){return typeof r=="number"&&typeof o=="number"&&typeof a=="number"?un(r,o,a):Pf(r)(r,o)}const Uw=r=>{const o=({timestamp:a})=>r(a);return{start:(a=!0)=>sn.update(o,a),stop:()=>vs(o),now:()=>Qn.isProcessing?Qn.timestamp:Sr.now()}},Dg=(r,o,a=10)=>{let f="";const p=Math.max(Math.round(o/a),2);for(let x=0;x<p;x++)f+=Math.round(r(x/(p-1))*1e4)/1e4+", ";return`linear(${f.substring(0,f.length-2)})`},Cc=2e4;function Of(r){let o=0;const a=50;let f=r.next(o);for(;!f.done&&o<Cc;)o+=a,f=r.next(o);return o>=Cc?1/0:o}function Ww(r,o=100,a){const f=a({...r,keyframes:[0,o]}),p=Math.min(Of(f),Cc);return{type:"keyframes",ease:x=>f.next(p*x).value/o,duration:xi(p)}}const Hw=5;function Lg(r,o,a){const f=Math.max(o-Hw,0);return gg(a-r(f),o-f)}const xn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},k1=.001;function Gw({duration:r=xn.duration,bounce:o=xn.bounce,velocity:a=xn.velocity,mass:f=xn.mass}){let p,x,y=1-o;y=Vi(xn.minDamping,xn.maxDamping,y),r=Vi(xn.minDuration,xn.maxDuration,xi(r)),y<1?(p=E=>{const S=E*y,I=S*r,R=S-a,M=Ld(E,y),L=Math.exp(-I);return k1-R/M*L},x=E=>{const I=E*y*r,R=I*a+a,M=Math.pow(y,2)*Math.pow(E,2)*r,L=Math.exp(-I),B=Ld(Math.pow(E,2),y);return(-p(E)+k1>0?-1:1)*((R-M)*L)/B}):(p=E=>{const S=Math.exp(-E*r),I=(E-a)*r+1;return-.001+S*I},x=E=>{const S=Math.exp(-E*r),I=(a-E)*(r*r);return S*I});const A=5/r,v=Yw(p,x,A);if(r=mi(r),isNaN(v))return{stiffness:xn.stiffness,damping:xn.damping,duration:r};{const E=Math.pow(v,2)*f;return{stiffness:E,damping:y*2*Math.sqrt(f*E),duration:r}}}const Xw=12;function Yw(r,o,a){let f=a;for(let p=1;p<Xw;p++)f=f-r(f)/o(f);return f}function Ld(r,o){return r*Math.sqrt(1-o*o)}const $w=["duration","bounce"],Zw=["stiffness","damping","mass"];function P1(r,o){return o.some(a=>r[a]!==void 0)}function Kw(r){let o={velocity:xn.velocity,stiffness:xn.stiffness,damping:xn.damping,mass:xn.mass,isResolvedFromDuration:!1,...r};if(!P1(r,Zw)&&P1(r,$w))if(r.visualDuration){const a=r.visualDuration,f=2*Math.PI/(a*1.2),p=f*f,x=2*Vi(.05,1,1-(r.bounce||0))*Math.sqrt(p);o={...o,mass:xn.mass,stiffness:p,damping:x}}else{const a=Gw(r);o={...o,...a,mass:xn.mass},o.isResolvedFromDuration=!0}return o}function Ec(r=xn.visualDuration,o=xn.bounce){const a=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:o}:r;let{restSpeed:f,restDelta:p}=a;const x=a.keyframes[0],y=a.keyframes[a.keyframes.length-1],A={done:!1,value:x},{stiffness:v,damping:E,mass:S,duration:I,velocity:R,isResolvedFromDuration:M}=Kw({...a,velocity:-xi(a.velocity||0)}),L=R||0,B=E/(2*Math.sqrt(v*S)),j=y-x,z=xi(Math.sqrt(v/S)),U=Math.abs(j)<5;f||(f=U?xn.restSpeed.granular:xn.restSpeed.default),p||(p=U?xn.restDelta.granular:xn.restDelta.default);let V;if(B<1){const re=Ld(z,B);V=ne=>{const q=Math.exp(-B*z*ne);return y-q*((L+B*z*j)/re*Math.sin(re*ne)+j*Math.cos(re*ne))}}else if(B===1)V=re=>y-Math.exp(-z*re)*(j+(L+z*j)*re);else{const re=z*Math.sqrt(B*B-1);V=ne=>{const q=Math.exp(-B*z*ne),le=Math.min(re*ne,300);return y-q*((L+B*z*j)*Math.sinh(le)+re*j*Math.cosh(le))/re}}const ee={calculatedDuration:M&&I||null,next:re=>{const ne=V(re);if(M)A.done=re>=I;else{let q=re===0?L:0;B<1&&(q=re===0?mi(L):Lg(V,re,ne));const le=Math.abs(q)<=f,K=Math.abs(y-ne)<=p;A.done=le&&K}return A.value=A.done?y:ne,A},toString:()=>{const re=Math.min(Of(ee),Cc),ne=Dg(q=>ee.next(re*q).value,re,30);return re+"ms "+ne},toTransition:()=>{}};return ee}Ec.applyToOptions=r=>{const o=Ww(r,100,Ec);return r.ease=o.ease,r.duration=mi(o.duration),r.type="keyframes",r};function Bd({keyframes:r,velocity:o=0,power:a=.8,timeConstant:f=325,bounceDamping:p=10,bounceStiffness:x=500,modifyTarget:y,min:A,max:v,restDelta:E=.5,restSpeed:S}){const I=r[0],R={done:!1,value:I},M=le=>A!==void 0&&le<A||v!==void 0&&le>v,L=le=>A===void 0?v:v===void 0||Math.abs(A-le)<Math.abs(v-le)?A:v;let B=a*o;const j=I+B,z=y===void 0?j:y(j);z!==j&&(B=z-I);const U=le=>-B*Math.exp(-le/f),V=le=>z+U(le),ee=le=>{const K=U(le),Re=V(le);R.done=Math.abs(K)<=E,R.value=R.done?z:Re};let re,ne;const q=le=>{M(R.value)&&(re=le,ne=Ec({keyframes:[R.value,L(R.value)],velocity:Lg(V,le,R.value),damping:p,stiffness:x,restDelta:E,restSpeed:S}))};return q(0),{calculatedDuration:null,next:le=>{let K=!1;return!ne&&re===void 0&&(K=!0,ee(le),q(le)),re!==void 0&&le>=re?ne.next(le-re):(!K&&ee(le),R)}}}function qw(r,o,a){const f=[],p=a||zi.mix||Mg,x=r.length-1;for(let y=0;y<x;y++){let A=p(r[y],r[y+1]);if(o){const v=Array.isArray(o)?o[y]||$r:o;A=Ya(v,A)}f.push(A)}return f}function Qw(r,o,{clamp:a=!0,ease:f,mixer:p}={}){const x=r.length;if(bf(x===o.length),x===1)return()=>o[0];if(x===2&&o[0]===o[1])return()=>o[1];const y=r[0]===r[1];r[0]>r[x-1]&&(r=[...r].reverse(),o=[...o].reverse());const A=qw(o,f,p),v=A.length,E=S=>{if(y&&S<r[0])return o[0];let I=0;if(v>1)for(;I<r.length-2&&!(S<r[I+1]);I++);const R=ja(r[I],r[I+1],S);return A[I](R)};return a?S=>E(Vi(r[0],r[x-1],S)):E}function Jw(r,o){const a=r[r.length-1];for(let f=1;f<=o;f++){const p=ja(0,o,f);r.push(un(a,1,p))}}function ev(r){const o=[0];return Jw(o,r.length-1),o}function tv(r,o){return r.map(a=>a*o)}function nv(r,o){return r.map(()=>o||Ag).splice(0,r.length-1)}function Pa({duration:r=300,keyframes:o,times:a,ease:f="easeInOut"}){const p=hw(f)?f.map(T1):T1(f),x={done:!1,value:o[0]},y=tv(a&&a.length===o.length?a:ev(o),r),A=Qw(y,o,{ease:Array.isArray(p)?p:nv(o,p)});return{calculatedDuration:r,next:v=>(x.value=A(v),x.done=v>=r,x)}}const rv=r=>r!==null;function Mf(r,{repeat:o,repeatType:a="loop"},f,p=1){const x=r.filter(rv),A=p<0||o&&a!=="loop"&&o%2===1?0:x.length-1;return!A||f===void 0?x[A]:f}const iv={decay:Bd,inertia:Bd,tween:Pa,keyframes:Pa,spring:Ec};function Bg(r){typeof r.type=="string"&&(r.type=iv[r.type])}class Df{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(o=>{this.resolve=o})}notifyFinished(){this.resolve()}then(o,a){return this.finished.then(o,a)}}const sv=r=>r/100;class Lf extends Df{constructor(o){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var f,p;const{motionValue:a}=this.options;a&&a.updatedAt!==Sr.now()&&this.tick(Sr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(p=(f=this.options).onStop)==null||p.call(f))},this.options=o,this.initAnimation(),this.play(),o.autoplay===!1&&this.pause()}initAnimation(){const{options:o}=this;Bg(o);const{type:a=Pa,repeat:f=0,repeatDelay:p=0,repeatType:x,velocity:y=0}=o;let{keyframes:A}=o;const v=a||Pa;v!==Pa&&typeof A[0]!="number"&&(this.mixKeyframes=Ya(sv,Mg(A[0],A[1])),A=[0,100]);const E=v({...o,keyframes:A});x==="mirror"&&(this.mirroredGenerator=v({...o,keyframes:[...A].reverse(),velocity:-y})),E.calculatedDuration===null&&(E.calculatedDuration=Of(E));const{calculatedDuration:S}=E;this.calculatedDuration=S,this.resolvedDuration=S+p,this.totalDuration=this.resolvedDuration*(f+1)-p,this.generator=E}updateTime(o){const a=Math.round(o-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=a}tick(o,a=!1){const{generator:f,totalDuration:p,mixKeyframes:x,mirroredGenerator:y,resolvedDuration:A,calculatedDuration:v}=this;if(this.startTime===null)return f.next(0);const{delay:E=0,keyframes:S,repeat:I,repeatType:R,repeatDelay:M,type:L,onUpdate:B,finalKeyframe:j}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,o):this.speed<0&&(this.startTime=Math.min(o-p/this.speed,this.startTime)),a?this.currentTime=o:this.updateTime(o);const z=this.currentTime-E*(this.playbackSpeed>=0?1:-1),U=this.playbackSpeed>=0?z<0:z>p;this.currentTime=Math.max(z,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let V=this.currentTime,ee=f;if(I){const le=Math.min(this.currentTime,p)/A;let K=Math.floor(le),Re=le%1;!Re&&le>=1&&(Re=1),Re===1&&K--,K=Math.min(K,I+1),!!(K%2)&&(R==="reverse"?(Re=1-Re,M&&(Re-=M/A)):R==="mirror"&&(ee=y)),V=Vi(0,1,Re)*A}const re=U?{done:!1,value:S[0]}:ee.next(V);x&&(re.value=x(re.value));let{done:ne}=re;!U&&v!==null&&(ne=this.playbackSpeed>=0?this.currentTime>=p:this.currentTime<=0);const q=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ne);return q&&L!==Bd&&(re.value=Mf(S,this.options,j,this.speed)),B&&B(re.value),q&&this.finish(),re}then(o,a){return this.finished.then(o,a)}get duration(){return xi(this.calculatedDuration)}get time(){return xi(this.currentTime)}set time(o){var a;o=mi(o),this.currentTime=o,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=o:this.driver&&(this.startTime=this.driver.now()-o/this.playbackSpeed),(a=this.driver)==null||a.start(!1)}get speed(){return this.playbackSpeed}set speed(o){this.updateTime(Sr.now());const a=this.playbackSpeed!==o;this.playbackSpeed=o,a&&(this.time=xi(this.currentTime))}play(){var p,x;if(this.isStopped)return;const{driver:o=Uw,startTime:a}=this.options;this.driver||(this.driver=o(y=>this.tick(y))),(x=(p=this.options).onPlay)==null||x.call(p);const f=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=f):this.holdTime!==null?this.startTime=f-this.holdTime:this.startTime||(this.startTime=a??f),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Sr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var o,a;this.notifyFinished(),this.teardown(),this.state="finished",(a=(o=this.options).onComplete)==null||a.call(o)}cancel(){var o,a;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(a=(o=this.options).onCancel)==null||a.call(o)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(o){return this.startTime=0,this.tick(o,!0)}attachTimeline(o){var a;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(a=this.driver)==null||a.stop(),o.observe(this)}}function ov(r){for(let o=1;o<r.length;o++)r[o]??(r[o]=r[o-1])}const Ks=r=>r*180/Math.PI,jd=r=>{const o=Ks(Math.atan2(r[1],r[0]));return Fd(o)},av={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:r=>(Math.abs(r[0])+Math.abs(r[3]))/2,rotate:jd,rotateZ:jd,skewX:r=>Ks(Math.atan(r[1])),skewY:r=>Ks(Math.atan(r[2])),skew:r=>(Math.abs(r[1])+Math.abs(r[2]))/2},Fd=r=>(r=r%360,r<0&&(r+=360),r),O1=jd,M1=r=>Math.sqrt(r[0]*r[0]+r[1]*r[1]),D1=r=>Math.sqrt(r[4]*r[4]+r[5]*r[5]),lv={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:M1,scaleY:D1,scale:r=>(M1(r)+D1(r))/2,rotateX:r=>Fd(Ks(Math.atan2(r[6],r[5]))),rotateY:r=>Fd(Ks(Math.atan2(-r[2],r[0]))),rotateZ:O1,rotate:O1,skewX:r=>Ks(Math.atan(r[4])),skewY:r=>Ks(Math.atan(r[1])),skew:r=>(Math.abs(r[1])+Math.abs(r[4]))/2};function Vd(r){return r.includes("scale")?1:0}function zd(r,o){if(!r||r==="none")return Vd(o);const a=r.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let f,p;if(a)f=lv,p=a;else{const A=r.match(/^matrix\(([-\d.e\s,]+)\)$/u);f=av,p=A}if(!p)return Vd(o);const x=f[o],y=p[1].split(",").map(uv);return typeof x=="function"?x(y):y[x]}const cv=(r,o)=>{const{transform:a="none"}=getComputedStyle(r);return zd(a,o)};function uv(r){return parseFloat(r.trim())}const zo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Uo=new Set(zo),L1=r=>r===Vo||r===mt,dv=new Set(["x","y","z"]),fv=zo.filter(r=>!dv.has(r));function hv(r){const o=[];return fv.forEach(a=>{const f=r.getValue(a);f!==void 0&&(o.push([a,f.get()]),f.set(a.startsWith("scale")?1:0))}),o}const Qs={width:({x:r},{paddingLeft:o="0",paddingRight:a="0"})=>r.max-r.min-parseFloat(o)-parseFloat(a),height:({y:r},{paddingTop:o="0",paddingBottom:a="0"})=>r.max-r.min-parseFloat(o)-parseFloat(a),top:(r,{top:o})=>parseFloat(o),left:(r,{left:o})=>parseFloat(o),bottom:({y:r},{top:o})=>parseFloat(o)+(r.max-r.min),right:({x:r},{left:o})=>parseFloat(o)+(r.max-r.min),x:(r,{transform:o})=>zd(o,"x"),y:(r,{transform:o})=>zd(o,"y")};Qs.translateX=Qs.x;Qs.translateY=Qs.y;const Js=new Set;let Ud=!1,Wd=!1,Hd=!1;function jg(){if(Wd){const r=Array.from(Js).filter(f=>f.needsMeasurement),o=new Set(r.map(f=>f.element)),a=new Map;o.forEach(f=>{const p=hv(f);p.length&&(a.set(f,p),f.render())}),r.forEach(f=>f.measureInitialState()),o.forEach(f=>{f.render();const p=a.get(f);p&&p.forEach(([x,y])=>{var A;(A=f.getValue(x))==null||A.set(y)})}),r.forEach(f=>f.measureEndState()),r.forEach(f=>{f.suspendedScrollY!==void 0&&window.scrollTo(0,f.suspendedScrollY)})}Wd=!1,Ud=!1,Js.forEach(r=>r.complete(Hd)),Js.clear()}function Fg(){Js.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(Wd=!0)})}function pv(){Hd=!0,Fg(),jg(),Hd=!1}class Bf{constructor(o,a,f,p,x,y=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...o],this.onComplete=a,this.name=f,this.motionValue=p,this.element=x,this.isAsync=y}scheduleResolve(){this.state="scheduled",this.isAsync?(Js.add(this),Ud||(Ud=!0,sn.read(Fg),sn.resolveKeyframes(jg))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:o,name:a,element:f,motionValue:p}=this;if(o[0]===null){const x=p==null?void 0:p.get(),y=o[o.length-1];if(x!==void 0)o[0]=x;else if(f&&a){const A=f.readValue(a,y);A!=null&&(o[0]=A)}o[0]===void 0&&(o[0]=y),p&&x===void 0&&p.set(o[0])}ov(o)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(o=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,o),Js.delete(this)}cancel(){this.state==="scheduled"&&(Js.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const gv=r=>r.startsWith("--");function mv(r,o,a){gv(o)?r.style.setProperty(o,a):r.style[o]=a}const xv=Af(()=>window.ScrollTimeline!==void 0),yv={};function wv(r,o){const a=Af(r);return()=>yv[o]??a()}const Vg=wv(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ra=([r,o,a,f])=>`cubic-bezier(${r}, ${o}, ${a}, ${f})`,B1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ra([0,.65,.55,1]),circOut:Ra([.55,0,1,.45]),backIn:Ra([.31,.01,.66,-.59]),backOut:Ra([.33,1.53,.69,.99])};function zg(r,o){if(r)return typeof r=="function"?Vg()?Dg(r,o):"ease-out":Sg(r)?Ra(r):Array.isArray(r)?r.map(a=>zg(a,o)||B1.easeOut):B1[r]}function vv(r,o,a,{delay:f=0,duration:p=300,repeat:x=0,repeatType:y="loop",ease:A="easeOut",times:v}={},E=void 0){const S={[o]:a};v&&(S.offset=v);const I=zg(A,p);Array.isArray(I)&&(S.easing=I);const R={delay:f,duration:p,easing:Array.isArray(I)?"linear":I,fill:"both",iterations:x+1,direction:y==="reverse"?"alternate":"normal"};return E&&(R.pseudoElement=E),r.animate(S,R)}function Ug(r){return typeof r=="function"&&"applyToOptions"in r}function Cv({type:r,...o}){return Ug(r)&&Vg()?r.applyToOptions(o):(o.duration??(o.duration=300),o.ease??(o.ease="easeOut"),o)}class Ev extends Df{constructor(o){if(super(),this.finishedTime=null,this.isStopped=!1,!o)return;const{element:a,name:f,keyframes:p,pseudoElement:x,allowFlatten:y=!1,finalKeyframe:A,onComplete:v}=o;this.isPseudoElement=!!x,this.allowFlatten=y,this.options=o,bf(typeof o.type!="string");const E=Cv(o);this.animation=vv(a,f,p,E,x),E.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!x){const S=Mf(p,this.options,A,this.speed);this.updateMotionValue?this.updateMotionValue(S):mv(a,f,S),this.animation.cancel()}v==null||v(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var o,a;(a=(o=this.animation).finish)==null||a.call(o)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:o}=this;o==="idle"||o==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var o,a;this.isPseudoElement||(a=(o=this.animation).commitStyles)==null||a.call(o)}get duration(){var a,f;const o=((f=(a=this.animation.effect)==null?void 0:a.getComputedTiming)==null?void 0:f.call(a).duration)||0;return xi(Number(o))}get time(){return xi(Number(this.animation.currentTime)||0)}set time(o){this.finishedTime=null,this.animation.currentTime=mi(o)}get speed(){return this.animation.playbackRate}set speed(o){o<0&&(this.finishedTime=null),this.animation.playbackRate=o}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(o){this.animation.startTime=o}attachTimeline({timeline:o,observe:a}){var f;return this.allowFlatten&&((f=this.animation.effect)==null||f.updateTiming({easing:"linear"})),this.animation.onfinish=null,o&&xv()?(this.animation.timeline=o,$r):a(this)}}const Wg={anticipate:Cg,backInOut:vg,circInOut:bg};function bv(r){return r in Wg}function Av(r){typeof r.ease=="string"&&bv(r.ease)&&(r.ease=Wg[r.ease])}const j1=10;class Sv extends Ev{constructor(o){Av(o),Bg(o),super(o),o.startTime&&(this.startTime=o.startTime),this.options=o}updateMotionValue(o){const{motionValue:a,onUpdate:f,onComplete:p,element:x,...y}=this.options;if(!a)return;if(o!==void 0){a.set(o);return}const A=new Lf({...y,autoplay:!1}),v=mi(this.finishedTime??this.time);a.setWithVelocity(A.sample(v-j1).value,A.sample(v).value,j1),A.stop()}}const F1=(r,o)=>o==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(Cs.test(r)||r==="0")&&!r.startsWith("url("));function Tv(r){const o=r[0];if(r.length===1)return!0;for(let a=0;a<r.length;a++)if(r[a]!==o)return!0}function Iv(r,o,a,f){const p=r[0];if(p===null)return!1;if(o==="display"||o==="visibility")return!0;const x=r[r.length-1],y=F1(p,o),A=F1(x,o);return!y||!A?!1:Tv(r)||(a==="spring"||Ug(a))&&f}function Gd(r){r.duration=0,r.type}const Nv=new Set(["opacity","clipPath","filter","transform"]),_v=Af(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Rv(r){var S;const{motionValue:o,name:a,repeatDelay:f,repeatType:p,damping:x,type:y}=r;if(!(((S=o==null?void 0:o.owner)==null?void 0:S.current)instanceof HTMLElement))return!1;const{onUpdate:v,transformTemplate:E}=o.owner.getProps();return _v()&&a&&Nv.has(a)&&(a!=="transform"||!E)&&!v&&!f&&p!=="mirror"&&x!==0&&y!=="inertia"}const kv=40;class Pv extends Df{constructor({autoplay:o=!0,delay:a=0,type:f="keyframes",repeat:p=0,repeatDelay:x=0,repeatType:y="loop",keyframes:A,name:v,motionValue:E,element:S,...I}){var L;super(),this.stop=()=>{var B,j;this._animation&&(this._animation.stop(),(B=this.stopTimeline)==null||B.call(this)),(j=this.keyframeResolver)==null||j.cancel()},this.createdAt=Sr.now();const R={autoplay:o,delay:a,type:f,repeat:p,repeatDelay:x,repeatType:y,name:v,motionValue:E,element:S,...I},M=(S==null?void 0:S.KeyframeResolver)||Bf;this.keyframeResolver=new M(A,(B,j,z)=>this.onKeyframesResolved(B,j,R,!z),v,E,S),(L=this.keyframeResolver)==null||L.scheduleResolve()}onKeyframesResolved(o,a,f,p){this.keyframeResolver=void 0;const{name:x,type:y,velocity:A,delay:v,isHandoff:E,onUpdate:S}=f;this.resolvedAt=Sr.now(),Iv(o,x,y,A)||((zi.instantAnimations||!v)&&(S==null||S(Mf(o,f,a))),o[0]=o[o.length-1],Gd(f),f.repeat=0);const R={startTime:p?this.resolvedAt?this.resolvedAt-this.createdAt>kv?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:a,...f,keyframes:o},M=!E&&Rv(R)?new Sv({...R,element:R.motionValue.owner.current}):new Lf(R);M.finished.then(()=>this.notifyFinished()).catch($r),this.pendingTimeline&&(this.stopTimeline=M.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=M}get finished(){return this._animation?this.animation.finished:this._finished}then(o,a){return this.finished.finally(o).then(()=>{})}get animation(){var o;return this._animation||((o=this.keyframeResolver)==null||o.resume(),pv()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(o){this.animation.time=o}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(o){this.animation.speed=o}get startTime(){return this.animation.startTime}attachTimeline(o){return this._animation?this.stopTimeline=this.animation.attachTimeline(o):this.pendingTimeline=o,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var o;this._animation&&this.animation.cancel(),(o=this.keyframeResolver)==null||o.cancel()}}const Ov=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Mv(r){const o=Ov.exec(r);if(!o)return[,];const[,a,f,p]=o;return[`--${a??f}`,p]}function Hg(r,o,a=1){const[f,p]=Mv(r);if(!f)return;const x=window.getComputedStyle(o).getPropertyValue(f);if(x){const y=x.trim();return fg(y)?parseFloat(y):y}return _f(p)?Hg(p,o,a+1):p}function jf(r,o){return(r==null?void 0:r[o])??(r==null?void 0:r.default)??r}const Gg=new Set(["width","height","top","left","right","bottom",...zo]),Dv={test:r=>r==="auto",parse:r=>r},Xg=r=>o=>o.test(r),Yg=[Vo,mt,yi,xs,Tw,Sw,Dv],V1=r=>Yg.find(Xg(r));function Lv(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||pg(r):!0}const Bv=new Set(["brightness","contrast","saturate","opacity"]);function jv(r){const[o,a]=r.slice(0,-1).split("(");if(o==="drop-shadow")return r;const[f]=a.match(Rf)||[];if(!f)return r;const p=a.replace(f,"");let x=Bv.has(o)?1:0;return f!==a&&(x*=100),o+"("+x+p+")"}const Fv=/\b([a-z-]*)\(.*?\)/gu,Xd={...Cs,getAnimatableNone:r=>{const o=r.match(Fv);return o?o.map(jv).join(" "):r}},z1={...Vo,transform:Math.round},Vv={rotate:xs,rotateX:xs,rotateY:xs,rotateZ:xs,scale:ic,scaleX:ic,scaleY:ic,scaleZ:ic,skew:xs,skewX:xs,skewY:xs,distance:mt,translateX:mt,translateY:mt,translateZ:mt,x:mt,y:mt,z:mt,perspective:mt,transformPerspective:mt,opacity:Fa,originX:I1,originY:I1,originZ:mt},Ff={borderWidth:mt,borderTopWidth:mt,borderRightWidth:mt,borderBottomWidth:mt,borderLeftWidth:mt,borderRadius:mt,radius:mt,borderTopLeftRadius:mt,borderTopRightRadius:mt,borderBottomRightRadius:mt,borderBottomLeftRadius:mt,width:mt,maxWidth:mt,height:mt,maxHeight:mt,top:mt,right:mt,bottom:mt,left:mt,padding:mt,paddingTop:mt,paddingRight:mt,paddingBottom:mt,paddingLeft:mt,margin:mt,marginTop:mt,marginRight:mt,marginBottom:mt,marginLeft:mt,backgroundPositionX:mt,backgroundPositionY:mt,...Vv,zIndex:z1,fillOpacity:Fa,strokeOpacity:Fa,numOctaves:z1},zv={...Ff,color:Tn,backgroundColor:Tn,outlineColor:Tn,fill:Tn,stroke:Tn,borderColor:Tn,borderTopColor:Tn,borderRightColor:Tn,borderBottomColor:Tn,borderLeftColor:Tn,filter:Xd,WebkitFilter:Xd},$g=r=>zv[r];function Zg(r,o){let a=$g(r);return a!==Xd&&(a=Cs),a.getAnimatableNone?a.getAnimatableNone(o):void 0}const Uv=new Set(["auto","none","0"]);function Wv(r,o,a){let f=0,p;for(;f<r.length&&!p;){const x=r[f];typeof x=="string"&&!Uv.has(x)&&Va(x).values.length&&(p=r[f]),f++}if(p&&a)for(const x of o)r[x]=Zg(a,p)}class Hv extends Bf{constructor(o,a,f,p,x){super(o,a,f,p,x,!0)}readKeyframes(){const{unresolvedKeyframes:o,element:a,name:f}=this;if(!a||!a.current)return;super.readKeyframes();for(let v=0;v<o.length;v++){let E=o[v];if(typeof E=="string"&&(E=E.trim(),_f(E))){const S=Hg(E,a.current);S!==void 0&&(o[v]=S),v===o.length-1&&(this.finalKeyframe=E)}}if(this.resolveNoneKeyframes(),!Gg.has(f)||o.length!==2)return;const[p,x]=o,y=V1(p),A=V1(x);if(y!==A)if(L1(y)&&L1(A))for(let v=0;v<o.length;v++){const E=o[v];typeof E=="string"&&(o[v]=parseFloat(E))}else Qs[f]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:o,name:a}=this,f=[];for(let p=0;p<o.length;p++)(o[p]===null||Lv(o[p]))&&f.push(p);f.length&&Wv(o,f,a)}measureInitialState(){const{element:o,unresolvedKeyframes:a,name:f}=this;if(!o||!o.current)return;f==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Qs[f](o.measureViewportBox(),window.getComputedStyle(o.current)),a[0]=this.measuredOrigin;const p=a[a.length-1];p!==void 0&&o.getValue(f,p).jump(p,!1)}measureEndState(){var A;const{element:o,name:a,unresolvedKeyframes:f}=this;if(!o||!o.current)return;const p=o.getValue(a);p&&p.jump(this.measuredOrigin,!1);const x=f.length-1,y=f[x];f[x]=Qs[a](o.measureViewportBox(),window.getComputedStyle(o.current)),y!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=y),(A=this.removedTransforms)!=null&&A.length&&this.removedTransforms.forEach(([v,E])=>{o.getValue(v).set(E)}),this.resolveNoneKeyframes()}}function Gv(r,o,a){if(r instanceof EventTarget)return[r];if(typeof r=="string"){let f=document;const p=(a==null?void 0:a[r])??f.querySelectorAll(r);return p?Array.from(p):[]}return Array.from(r)}const Kg=(r,o)=>o&&typeof r=="number"?o.transform(r):r;function qg(r){return hg(r)&&"offsetHeight"in r}const U1=30,Xv=r=>!isNaN(parseFloat(r));class Yv{constructor(o,a={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=f=>{var x;const p=Sr.now();if(this.updatedAt!==p&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(f),this.current!==this.prev&&((x=this.events.change)==null||x.notify(this.current),this.dependents))for(const y of this.dependents)y.dirty()},this.hasAnimated=!1,this.setCurrent(o),this.owner=a.owner}setCurrent(o){this.current=o,this.updatedAt=Sr.now(),this.canTrackVelocity===null&&o!==void 0&&(this.canTrackVelocity=Xv(this.current))}setPrevFrameValue(o=this.current){this.prevFrameValue=o,this.prevUpdatedAt=this.updatedAt}onChange(o){return this.on("change",o)}on(o,a){this.events[o]||(this.events[o]=new Sf);const f=this.events[o].add(a);return o==="change"?()=>{f(),sn.read(()=>{this.events.change.getSize()||this.stop()})}:f}clearListeners(){for(const o in this.events)this.events[o].clear()}attach(o,a){this.passiveEffect=o,this.stopPassiveEffect=a}set(o){this.passiveEffect?this.passiveEffect(o,this.updateAndNotify):this.updateAndNotify(o)}setWithVelocity(o,a,f){this.set(a),this.prev=void 0,this.prevFrameValue=o,this.prevUpdatedAt=this.updatedAt-f}jump(o,a=!0){this.updateAndNotify(o),this.prev=o,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var o;(o=this.events.change)==null||o.notify(this.current)}addDependent(o){this.dependents||(this.dependents=new Set),this.dependents.add(o)}removeDependent(o){this.dependents&&this.dependents.delete(o)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const o=Sr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||o-this.updatedAt>U1)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,U1);return gg(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(o){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=o(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var o,a;(o=this.dependents)==null||o.clear(),(a=this.events.destroy)==null||a.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Lo(r,o){return new Yv(r,o)}const{schedule:Vf}=Tg(queueMicrotask,!1),si={x:!1,y:!1};function Qg(){return si.x||si.y}function $v(r){return r==="x"||r==="y"?si[r]?null:(si[r]=!0,()=>{si[r]=!1}):si.x||si.y?null:(si.x=si.y=!0,()=>{si.x=si.y=!1})}function Jg(r,o){const a=Gv(r),f=new AbortController,p={passive:!0,...o,signal:f.signal};return[a,p,()=>f.abort()]}function W1(r){return!(r.pointerType==="touch"||Qg())}function Zv(r,o,a={}){const[f,p,x]=Jg(r,a),y=A=>{if(!W1(A))return;const{target:v}=A,E=o(v,A);if(typeof E!="function"||!v)return;const S=I=>{W1(I)&&(E(I),v.removeEventListener("pointerleave",S))};v.addEventListener("pointerleave",S,p)};return f.forEach(A=>{A.addEventListener("pointerenter",y,p)}),x}const em=(r,o)=>o?r===o?!0:em(r,o.parentElement):!1,zf=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,Kv=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function qv(r){return Kv.has(r.tagName)||r.tabIndex!==-1}const hc=new WeakSet;function H1(r){return o=>{o.key==="Enter"&&r(o)}}function yd(r,o){r.dispatchEvent(new PointerEvent("pointer"+o,{isPrimary:!0,bubbles:!0}))}const Qv=(r,o)=>{const a=r.currentTarget;if(!a)return;const f=H1(()=>{if(hc.has(a))return;yd(a,"down");const p=H1(()=>{yd(a,"up")}),x=()=>yd(a,"cancel");a.addEventListener("keyup",p,o),a.addEventListener("blur",x,o)});a.addEventListener("keydown",f,o),a.addEventListener("blur",()=>a.removeEventListener("keydown",f),o)};function G1(r){return zf(r)&&!Qg()}function Jv(r,o,a={}){const[f,p,x]=Jg(r,a),y=A=>{const v=A.currentTarget;if(!G1(A))return;hc.add(v);const E=o(v,A),S=(M,L)=>{window.removeEventListener("pointerup",I),window.removeEventListener("pointercancel",R),hc.has(v)&&hc.delete(v),G1(M)&&typeof E=="function"&&E(M,{success:L})},I=M=>{S(M,v===window||v===document||a.useGlobalTarget||em(v,M.target))},R=M=>{S(M,!1)};window.addEventListener("pointerup",I,p),window.addEventListener("pointercancel",R,p)};return f.forEach(A=>{(a.useGlobalTarget?window:A).addEventListener("pointerdown",y,p),qg(A)&&(A.addEventListener("focus",E=>Qv(E,p)),!qv(A)&&!A.hasAttribute("tabindex")&&(A.tabIndex=0))}),x}function tm(r){return hg(r)&&"ownerSVGElement"in r}function e3(r){return tm(r)&&r.tagName==="svg"}const ur=r=>!!(r&&r.getVelocity),t3=[...Yg,Tn,Cs],n3=r=>t3.find(Xg(r)),Uf=N.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});class r3 extends N.Component{getSnapshotBeforeUpdate(o){const a=this.props.childRef.current;if(a&&o.isPresent&&!this.props.isPresent){const f=a.offsetParent,p=qg(f)&&f.offsetWidth||0,x=this.props.sizeRef.current;x.height=a.offsetHeight||0,x.width=a.offsetWidth||0,x.top=a.offsetTop,x.left=a.offsetLeft,x.right=p-x.width-x.left}return null}componentDidUpdate(){}render(){return this.props.children}}function i3({children:r,isPresent:o,anchorX:a,root:f}){const p=N.useId(),x=N.useRef(null),y=N.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:A}=N.useContext(Uf);return N.useInsertionEffect(()=>{const{width:v,height:E,top:S,left:I,right:R}=y.current;if(o||!x.current||!v||!E)return;const M=a==="left"?`left: ${I}`:`right: ${R}`;x.current.dataset.motionPopId=p;const L=document.createElement("style");A&&(L.nonce=A);const B=f??document.head;return B.appendChild(L),L.sheet&&L.sheet.insertRule(`
          [data-motion-pop-id="${p}"] {
            position: absolute !important;
            width: ${v}px !important;
            height: ${E}px !important;
            ${M}px !important;
            top: ${S}px !important;
          }
        `),()=>{B.contains(L)&&B.removeChild(L)}},[o]),w.jsx(r3,{isPresent:o,childRef:x,sizeRef:y,children:N.cloneElement(r,{ref:x})})}const s3=({children:r,initial:o,isPresent:a,onExitComplete:f,custom:p,presenceAffectsLayout:x,mode:y,anchorX:A,root:v})=>{const E=wf(o3),S=N.useId();let I=!0,R=N.useMemo(()=>(I=!1,{id:S,initial:o,isPresent:a,custom:p,onExitComplete:M=>{E.set(M,!0);for(const L of E.values())if(!L)return;f&&f()},register:M=>(E.set(M,!1),()=>E.delete(M))}),[a,E,f]);return x&&I&&(R={...R}),N.useMemo(()=>{E.forEach((M,L)=>E.set(L,!1))},[a]),N.useEffect(()=>{!a&&!E.size&&f&&f()},[a]),y==="popLayout"&&(r=w.jsx(i3,{isPresent:a,anchorX:A,root:v,children:r})),w.jsx(kc.Provider,{value:R,children:r})};function o3(){return new Map}function nm(r=!0){const o=N.useContext(kc);if(o===null)return[!0,null];const{isPresent:a,onExitComplete:f,register:p}=o,x=N.useId();N.useEffect(()=>{if(r)return p(x)},[r]);const y=N.useCallback(()=>r&&f&&f(x),[x,f,r]);return!a&&f?[!1,y]:[!0]}const sc=r=>r.key||"";function X1(r){const o=[];return N.Children.forEach(r,a=>{N.isValidElement(a)&&o.push(a)}),o}const Y1=({children:r,custom:o,initial:a=!0,onExitComplete:f,presenceAffectsLayout:p=!0,mode:x="sync",propagate:y=!1,anchorX:A="left",root:v})=>{const[E,S]=nm(y),I=N.useMemo(()=>X1(r),[r]),R=y&&!E?[]:I.map(sc),M=N.useRef(!0),L=N.useRef(I),B=wf(()=>new Map),[j,z]=N.useState(I),[U,V]=N.useState(I);dg(()=>{M.current=!1,L.current=I;for(let ne=0;ne<U.length;ne++){const q=sc(U[ne]);R.includes(q)?B.delete(q):B.get(q)!==!0&&B.set(q,!1)}},[U,R.length,R.join("-")]);const ee=[];if(I!==j){let ne=[...I];for(let q=0;q<U.length;q++){const le=U[q],K=sc(le);R.includes(K)||(ne.splice(q,0,le),ee.push(le))}return x==="wait"&&ee.length&&(ne=ee),V(X1(ne)),z(I),null}const{forceRender:re}=N.useContext(yf);return w.jsx(w.Fragment,{children:U.map(ne=>{const q=sc(ne),le=y&&!E?!1:I===U||R.includes(q),K=()=>{if(B.has(q))B.set(q,!0);else return;let Re=!0;B.forEach(Be=>{Be||(Re=!1)}),Re&&(re==null||re(),V(L.current),y&&(S==null||S()),f&&f())};return w.jsx(s3,{isPresent:le,initial:!M.current||a?void 0:!1,custom:o,presenceAffectsLayout:p,mode:x,root:v,onExitComplete:le?void 0:K,anchorX:A,children:ne},q)})})},rm=N.createContext({strict:!1}),$1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Bo={};for(const r in $1)Bo[r]={isEnabled:o=>$1[r].some(a=>!!o[a])};function a3(r){for(const o in r)Bo[o]={...Bo[o],...r[o]}}const l3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function bc(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||l3.has(r)}let im=r=>!bc(r);function c3(r){typeof r=="function"&&(im=o=>o.startsWith("on")?!bc(o):r(o))}try{c3(require("@emotion/is-prop-valid").default)}catch{}function u3(r,o,a){const f={};for(const p in r)p==="values"&&typeof r.values=="object"||(im(p)||a===!0&&bc(p)||!o&&!bc(p)||r.draggable&&p.startsWith("onDrag"))&&(f[p]=r[p]);return f}const Pc=N.createContext({});function Oc(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}function za(r){return typeof r=="string"||Array.isArray(r)}const Wf=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Hf=["initial",...Wf];function Mc(r){return Oc(r.animate)||Hf.some(o=>za(r[o]))}function sm(r){return!!(Mc(r)||r.variants)}function d3(r,o){if(Mc(r)){const{initial:a,animate:f}=r;return{initial:a===!1||za(a)?a:void 0,animate:za(f)?f:void 0}}return r.inherit!==!1?o:{}}function f3(r){const{initial:o,animate:a}=d3(r,N.useContext(Pc));return N.useMemo(()=>({initial:o,animate:a}),[Z1(o),Z1(a)])}function Z1(r){return Array.isArray(r)?r.join(" "):r}const Ua={};function h3(r){for(const o in r)Ua[o]=r[o],Nf(o)&&(Ua[o].isCSSVariable=!0)}function om(r,{layout:o,layoutId:a}){return Uo.has(r)||r.startsWith("origin")||(o||a!==void 0)&&(!!Ua[r]||r==="opacity")}const p3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},g3=zo.length;function m3(r,o,a){let f="",p=!0;for(let x=0;x<g3;x++){const y=zo[x],A=r[y];if(A===void 0)continue;let v=!0;if(typeof A=="number"?v=A===(y.startsWith("scale")?1:0):v=parseFloat(A)===0,!v||a){const E=Kg(A,Ff[y]);if(!v){p=!1;const S=p3[y]||y;f+=`${S}(${E}) `}a&&(o[y]=E)}}return f=f.trim(),a?f=a(o,p?"":f):p&&(f="none"),f}function Gf(r,o,a){const{style:f,vars:p,transformOrigin:x}=r;let y=!1,A=!1;for(const v in o){const E=o[v];if(Uo.has(v)){y=!0;continue}else if(Nf(v)){p[v]=E;continue}else{const S=Kg(E,Ff[v]);v.startsWith("origin")?(A=!0,x[v]=S):f[v]=S}}if(o.transform||(y||a?f.transform=m3(o,r.transform,a):f.transform&&(f.transform="none")),A){const{originX:v="50%",originY:E="50%",originZ:S=0}=x;f.transformOrigin=`${v} ${E} ${S}`}}const Xf=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function am(r,o,a){for(const f in o)!ur(o[f])&&!om(f,a)&&(r[f]=o[f])}function x3({transformTemplate:r},o){return N.useMemo(()=>{const a=Xf();return Gf(a,o,r),Object.assign({},a.vars,a.style)},[o])}function y3(r,o){const a=r.style||{},f={};return am(f,a,r),Object.assign(f,x3(r,o)),f}function w3(r,o){const a={},f=y3(r,o);return r.drag&&r.dragListener!==!1&&(a.draggable=!1,f.userSelect=f.WebkitUserSelect=f.WebkitTouchCallout="none",f.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(a.tabIndex=0),a.style=f,a}const v3={offset:"stroke-dashoffset",array:"stroke-dasharray"},C3={offset:"strokeDashoffset",array:"strokeDasharray"};function E3(r,o,a=1,f=0,p=!0){r.pathLength=1;const x=p?v3:C3;r[x.offset]=mt.transform(-f);const y=mt.transform(o),A=mt.transform(a);r[x.array]=`${y} ${A}`}function lm(r,{attrX:o,attrY:a,attrScale:f,pathLength:p,pathSpacing:x=1,pathOffset:y=0,...A},v,E,S){if(Gf(r,A,E),v){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:I,style:R}=r;I.transform&&(R.transform=I.transform,delete I.transform),(R.transform||I.transformOrigin)&&(R.transformOrigin=I.transformOrigin??"50% 50%",delete I.transformOrigin),R.transform&&(R.transformBox=(S==null?void 0:S.transformBox)??"fill-box",delete I.transformBox),o!==void 0&&(I.x=o),a!==void 0&&(I.y=a),f!==void 0&&(I.scale=f),p!==void 0&&E3(I,p,x,y,!1)}const cm=()=>({...Xf(),attrs:{}}),um=r=>typeof r=="string"&&r.toLowerCase()==="svg";function b3(r,o,a,f){const p=N.useMemo(()=>{const x=cm();return lm(x,o,um(f),r.transformTemplate,r.style),{...x.attrs,style:{...x.style}}},[o]);if(r.style){const x={};am(x,r.style,r),p.style={...x,...p.style}}return p}const A3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Yf(r){return typeof r!="string"||r.includes("-")?!1:!!(A3.indexOf(r)>-1||/[A-Z]/u.test(r))}function S3(r,o,a,{latestValues:f},p,x=!1){const A=(Yf(r)?b3:w3)(o,f,p,r),v=u3(o,typeof r=="string",x),E=r!==N.Fragment?{...v,...A,ref:a}:{},{children:S}=o,I=N.useMemo(()=>ur(S)?S.get():S,[S]);return N.createElement(r,{...E,children:I})}function K1(r){const o=[{},{}];return r==null||r.values.forEach((a,f)=>{o[0][f]=a.get(),o[1][f]=a.getVelocity()}),o}function $f(r,o,a,f){if(typeof o=="function"){const[p,x]=K1(f);o=o(a!==void 0?a:r.custom,p,x)}if(typeof o=="string"&&(o=r.variants&&r.variants[o]),typeof o=="function"){const[p,x]=K1(f);o=o(a!==void 0?a:r.custom,p,x)}return o}function pc(r){return ur(r)?r.get():r}function T3({scrapeMotionValuesFromProps:r,createRenderState:o},a,f,p){return{latestValues:I3(a,f,p,r),renderState:o()}}function I3(r,o,a,f){const p={},x=f(r,{});for(const R in x)p[R]=pc(x[R]);let{initial:y,animate:A}=r;const v=Mc(r),E=sm(r);o&&E&&!v&&r.inherit!==!1&&(y===void 0&&(y=o.initial),A===void 0&&(A=o.animate));let S=a?a.initial===!1:!1;S=S||y===!1;const I=S?A:y;if(I&&typeof I!="boolean"&&!Oc(I)){const R=Array.isArray(I)?I:[I];for(let M=0;M<R.length;M++){const L=$f(r,R[M]);if(L){const{transitionEnd:B,transition:j,...z}=L;for(const U in z){let V=z[U];if(Array.isArray(V)){const ee=S?V.length-1:0;V=V[ee]}V!==null&&(p[U]=V)}for(const U in B)p[U]=B[U]}}}return p}const dm=r=>(o,a)=>{const f=N.useContext(Pc),p=N.useContext(kc),x=()=>T3(r,o,f,p);return a?x():wf(x)};function Zf(r,o,a){var x;const{style:f}=r,p={};for(const y in f)(ur(f[y])||o.style&&ur(o.style[y])||om(y,r)||((x=a==null?void 0:a.getValue(y))==null?void 0:x.liveStyle)!==void 0)&&(p[y]=f[y]);return p}const N3=dm({scrapeMotionValuesFromProps:Zf,createRenderState:Xf});function fm(r,o,a){const f=Zf(r,o,a);for(const p in r)if(ur(r[p])||ur(o[p])){const x=zo.indexOf(p)!==-1?"attr"+p.charAt(0).toUpperCase()+p.substring(1):p;f[x]=r[p]}return f}const _3=dm({scrapeMotionValuesFromProps:fm,createRenderState:cm}),R3=Symbol.for("motionComponentSymbol");function _o(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function k3(r,o,a){return N.useCallback(f=>{f&&r.onMount&&r.onMount(f),o&&(f?o.mount(f):o.unmount()),a&&(typeof a=="function"?a(f):_o(a)&&(a.current=f))},[o])}const Kf=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),P3="framerAppearId",hm="data-"+Kf(P3),pm=N.createContext({});function O3(r,o,a,f,p){var B,j;const{visualElement:x}=N.useContext(Pc),y=N.useContext(rm),A=N.useContext(kc),v=N.useContext(Uf).reducedMotion,E=N.useRef(null);f=f||y.renderer,!E.current&&f&&(E.current=f(r,{visualState:o,parent:x,props:a,presenceContext:A,blockInitialAnimation:A?A.initial===!1:!1,reducedMotionConfig:v}));const S=E.current,I=N.useContext(pm);S&&!S.projection&&p&&(S.type==="html"||S.type==="svg")&&M3(E.current,a,p,I);const R=N.useRef(!1);N.useInsertionEffect(()=>{S&&R.current&&S.update(a,A)});const M=a[hm],L=N.useRef(!!M&&!((B=window.MotionHandoffIsComplete)!=null&&B.call(window,M))&&((j=window.MotionHasOptimisedAnimation)==null?void 0:j.call(window,M)));return dg(()=>{S&&(R.current=!0,window.MotionIsMounted=!0,S.updateFeatures(),S.scheduleRenderMicrotask(),L.current&&S.animationState&&S.animationState.animateChanges())}),N.useEffect(()=>{S&&(!L.current&&S.animationState&&S.animationState.animateChanges(),L.current&&(queueMicrotask(()=>{var z;(z=window.MotionHandoffMarkAsComplete)==null||z.call(window,M)}),L.current=!1),S.enteringChildren=void 0)}),S}function M3(r,o,a,f){const{layoutId:p,layout:x,drag:y,dragConstraints:A,layoutScroll:v,layoutRoot:E,layoutCrossfade:S}=o;r.projection=new a(r.latestValues,o["data-framer-portal-id"]?void 0:gm(r.parent)),r.projection.setOptions({layoutId:p,layout:x,alwaysMeasureLayout:!!y||A&&_o(A),visualElement:r,animationType:typeof x=="string"?x:"both",initialPromotionConfig:f,crossfade:S,layoutScroll:v,layoutRoot:E})}function gm(r){if(r)return r.options.allowProjection!==!1?r.projection:gm(r.parent)}function wd(r,{forwardMotionProps:o=!1}={},a,f){a&&a3(a);const p=Yf(r)?_3:N3;function x(A,v){let E;const S={...N.useContext(Uf),...A,layoutId:D3(A)},{isStatic:I}=S,R=f3(A),M=p(A,I);if(!I&&vf){L3();const L=B3(S);E=L.MeasureLayout,R.visualElement=O3(r,M,S,f,L.ProjectionNode)}return w.jsxs(Pc.Provider,{value:R,children:[E&&R.visualElement?w.jsx(E,{visualElement:R.visualElement,...S}):null,S3(r,A,k3(M,R.visualElement,v),M,I,o)]})}x.displayName=`motion.${typeof r=="string"?r:`create(${r.displayName??r.name??""})`}`;const y=N.forwardRef(x);return y[R3]=r,y}function D3({layoutId:r}){const o=N.useContext(yf).id;return o&&r!==void 0?o+"-"+r:r}function L3(r,o){N.useContext(rm).strict}function B3(r){const{drag:o,layout:a}=Bo;if(!o&&!a)return{};const f={...o,...a};return{MeasureLayout:o!=null&&o.isEnabled(r)||a!=null&&a.isEnabled(r)?f.MeasureLayout:void 0,ProjectionNode:f.ProjectionNode}}function j3(r,o){if(typeof Proxy>"u")return wd;const a=new Map,f=(x,y)=>wd(x,y,r,o),p=(x,y)=>f(x,y);return new Proxy(p,{get:(x,y)=>y==="create"?f:(a.has(y)||a.set(y,wd(y,void 0,r,o)),a.get(y))})}function mm({top:r,left:o,right:a,bottom:f}){return{x:{min:o,max:a},y:{min:r,max:f}}}function F3({x:r,y:o}){return{top:o.min,right:r.max,bottom:o.max,left:r.min}}function V3(r,o){if(!o)return r;const a=o({x:r.left,y:r.top}),f=o({x:r.right,y:r.bottom});return{top:a.y,left:a.x,bottom:f.y,right:f.x}}function vd(r){return r===void 0||r===1}function Yd({scale:r,scaleX:o,scaleY:a}){return!vd(r)||!vd(o)||!vd(a)}function $s(r){return Yd(r)||xm(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function xm(r){return q1(r.x)||q1(r.y)}function q1(r){return r&&r!=="0%"}function Ac(r,o,a){const f=r-a,p=o*f;return a+p}function Q1(r,o,a,f,p){return p!==void 0&&(r=Ac(r,p,f)),Ac(r,a,f)+o}function $d(r,o=0,a=1,f,p){r.min=Q1(r.min,o,a,f,p),r.max=Q1(r.max,o,a,f,p)}function ym(r,{x:o,y:a}){$d(r.x,o.translate,o.scale,o.originPoint),$d(r.y,a.translate,a.scale,a.originPoint)}const J1=.999999999999,ep=1.0000000000001;function z3(r,o,a,f=!1){const p=a.length;if(!p)return;o.x=o.y=1;let x,y;for(let A=0;A<p;A++){x=a[A],y=x.projectionDelta;const{visualElement:v}=x.options;v&&v.props.style&&v.props.style.display==="contents"||(f&&x.options.layoutScroll&&x.scroll&&x!==x.root&&ko(r,{x:-x.scroll.offset.x,y:-x.scroll.offset.y}),y&&(o.x*=y.x.scale,o.y*=y.y.scale,ym(r,y)),f&&$s(x.latestValues)&&ko(r,x.latestValues))}o.x<ep&&o.x>J1&&(o.x=1),o.y<ep&&o.y>J1&&(o.y=1)}function Ro(r,o){r.min=r.min+o,r.max=r.max+o}function tp(r,o,a,f,p=.5){const x=un(r.min,r.max,p);$d(r,o,a,x,f)}function ko(r,o){tp(r.x,o.x,o.scaleX,o.scale,o.originX),tp(r.y,o.y,o.scaleY,o.scale,o.originY)}function wm(r,o){return mm(V3(r.getBoundingClientRect(),o))}function U3(r,o,a){const f=wm(r,a),{scroll:p}=o;return p&&(Ro(f.x,p.offset.x),Ro(f.y,p.offset.y)),f}const np=()=>({translate:0,scale:1,origin:0,originPoint:0}),Po=()=>({x:np(),y:np()}),rp=()=>({min:0,max:0}),bn=()=>({x:rp(),y:rp()}),Zd={current:null},vm={current:!1};function W3(){if(vm.current=!0,!!vf)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),o=()=>Zd.current=r.matches;r.addEventListener("change",o),o()}else Zd.current=!1}const H3=new WeakMap;function G3(r,o,a){for(const f in o){const p=o[f],x=a[f];if(ur(p))r.addValue(f,p);else if(ur(x))r.addValue(f,Lo(p,{owner:r}));else if(x!==p)if(r.hasValue(f)){const y=r.getValue(f);y.liveStyle===!0?y.jump(p):y.hasAnimated||y.set(p)}else{const y=r.getStaticValue(f);r.addValue(f,Lo(y!==void 0?y:p,{owner:r}))}}for(const f in a)o[f]===void 0&&r.removeValue(f);return o}const ip=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class X3{scrapeMotionValuesFromProps(o,a,f){return{}}constructor({parent:o,props:a,presenceContext:f,reducedMotionConfig:p,blockInitialAnimation:x,visualState:y},A={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Bf,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const R=Sr.now();this.renderScheduledAt<R&&(this.renderScheduledAt=R,sn.render(this.render,!1,!0))};const{latestValues:v,renderState:E}=y;this.latestValues=v,this.baseTarget={...v},this.initialValues=a.initial?{...v}:{},this.renderState=E,this.parent=o,this.props=a,this.presenceContext=f,this.depth=o?o.depth+1:0,this.reducedMotionConfig=p,this.options=A,this.blockInitialAnimation=!!x,this.isControllingVariants=Mc(a),this.isVariantNode=sm(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(o&&o.current);const{willChange:S,...I}=this.scrapeMotionValuesFromProps(a,{},this);for(const R in I){const M=I[R];v[R]!==void 0&&ur(M)&&M.set(v[R])}}mount(o){var a;this.current=o,H3.set(o,this),this.projection&&!this.projection.instance&&this.projection.mount(o),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((f,p)=>this.bindToMotionValue(p,f)),vm.current||W3(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Zd.current,(a=this.parent)==null||a.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var o;this.projection&&this.projection.unmount(),vs(this.notifyUpdate),vs(this.render),this.valueSubscriptions.forEach(a=>a()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(o=this.parent)==null||o.removeChild(this);for(const a in this.events)this.events[a].clear();for(const a in this.features){const f=this.features[a];f&&(f.unmount(),f.isMounted=!1)}this.current=null}addChild(o){this.children.add(o),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(o)}removeChild(o){this.children.delete(o),this.enteringChildren&&this.enteringChildren.delete(o)}bindToMotionValue(o,a){this.valueSubscriptions.has(o)&&this.valueSubscriptions.get(o)();const f=Uo.has(o);f&&this.onBindTransform&&this.onBindTransform();const p=a.on("change",y=>{this.latestValues[o]=y,this.props.onUpdate&&sn.preRender(this.notifyUpdate),f&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let x;window.MotionCheckAppearSync&&(x=window.MotionCheckAppearSync(this,o,a)),this.valueSubscriptions.set(o,()=>{p(),x&&x(),a.owner&&a.stop()})}sortNodePosition(o){return!this.current||!this.sortInstanceNodePosition||this.type!==o.type?0:this.sortInstanceNodePosition(this.current,o.current)}updateFeatures(){let o="animation";for(o in Bo){const a=Bo[o];if(!a)continue;const{isEnabled:f,Feature:p}=a;if(!this.features[o]&&p&&f(this.props)&&(this.features[o]=new p(this)),this.features[o]){const x=this.features[o];x.isMounted?x.update():(x.mount(),x.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):bn()}getStaticValue(o){return this.latestValues[o]}setStaticValue(o,a){this.latestValues[o]=a}update(o,a){(o.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=o,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let f=0;f<ip.length;f++){const p=ip[f];this.propEventSubscriptions[p]&&(this.propEventSubscriptions[p](),delete this.propEventSubscriptions[p]);const x="on"+p,y=o[x];y&&(this.propEventSubscriptions[p]=this.on(p,y))}this.prevMotionValues=G3(this,this.scrapeMotionValuesFromProps(o,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(o){return this.props.variants?this.props.variants[o]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(o){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(o),()=>a.variantChildren.delete(o)}addValue(o,a){const f=this.values.get(o);a!==f&&(f&&this.removeValue(o),this.bindToMotionValue(o,a),this.values.set(o,a),this.latestValues[o]=a.get())}removeValue(o){this.values.delete(o);const a=this.valueSubscriptions.get(o);a&&(a(),this.valueSubscriptions.delete(o)),delete this.latestValues[o],this.removeValueFromRenderState(o,this.renderState)}hasValue(o){return this.values.has(o)}getValue(o,a){if(this.props.values&&this.props.values[o])return this.props.values[o];let f=this.values.get(o);return f===void 0&&a!==void 0&&(f=Lo(a===null?void 0:a,{owner:this}),this.addValue(o,f)),f}readValue(o,a){let f=this.latestValues[o]!==void 0||!this.current?this.latestValues[o]:this.getBaseTargetFromProps(this.props,o)??this.readValueFromInstance(this.current,o,this.options);return f!=null&&(typeof f=="string"&&(fg(f)||pg(f))?f=parseFloat(f):!n3(f)&&Cs.test(a)&&(f=Zg(o,a)),this.setBaseTarget(o,ur(f)?f.get():f)),ur(f)?f.get():f}setBaseTarget(o,a){this.baseTarget[o]=a}getBaseTarget(o){var x;const{initial:a}=this.props;let f;if(typeof a=="string"||typeof a=="object"){const y=$f(this.props,a,(x=this.presenceContext)==null?void 0:x.custom);y&&(f=y[o])}if(a&&f!==void 0)return f;const p=this.getBaseTargetFromProps(this.props,o);return p!==void 0&&!ur(p)?p:this.initialValues[o]!==void 0&&f===void 0?void 0:this.baseTarget[o]}on(o,a){return this.events[o]||(this.events[o]=new Sf),this.events[o].add(a)}notify(o,...a){this.events[o]&&this.events[o].notify(...a)}scheduleRenderMicrotask(){Vf.render(this.render)}}class Cm extends X3{constructor(){super(...arguments),this.KeyframeResolver=Hv}sortInstanceNodePosition(o,a){return o.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(o,a){return o.style?o.style[a]:void 0}removeValueFromRenderState(o,{vars:a,style:f}){delete a[o],delete f[o]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:o}=this.props;ur(o)&&(this.childSubscription=o.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function Em(r,{style:o,vars:a},f,p){const x=r.style;let y;for(y in o)x[y]=o[y];p==null||p.applyProjectionStyles(x,f);for(y in a)x.setProperty(y,a[y])}function Y3(r){return window.getComputedStyle(r)}class $3 extends Cm{constructor(){super(...arguments),this.type="html",this.renderInstance=Em}readValueFromInstance(o,a){var f;if(Uo.has(a))return(f=this.projection)!=null&&f.isProjecting?Vd(a):cv(o,a);{const p=Y3(o),x=(Nf(a)?p.getPropertyValue(a):p[a])||0;return typeof x=="string"?x.trim():x}}measureInstanceViewportBox(o,{transformPagePoint:a}){return wm(o,a)}build(o,a,f){Gf(o,a,f.transformTemplate)}scrapeMotionValuesFromProps(o,a,f){return Zf(o,a,f)}}const bm=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Z3(r,o,a,f){Em(r,o,void 0,f);for(const p in o.attrs)r.setAttribute(bm.has(p)?p:Kf(p),o.attrs[p])}class K3 extends Cm{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=bn}getBaseTargetFromProps(o,a){return o[a]}readValueFromInstance(o,a){if(Uo.has(a)){const f=$g(a);return f&&f.default||0}return a=bm.has(a)?a:Kf(a),o.getAttribute(a)}scrapeMotionValuesFromProps(o,a,f){return fm(o,a,f)}build(o,a,f){lm(o,a,this.isSVGTag,f.transformTemplate,f.style)}renderInstance(o,a,f,p){Z3(o,a,f,p)}mount(o){this.isSVGTag=um(o.tagName),super.mount(o)}}const q3=(r,o)=>Yf(r)?new K3(o):new $3(o,{allowProjection:r!==N.Fragment});function Mo(r,o,a){const f=r.getProps();return $f(f,o,a!==void 0?a:f.custom,r)}const Kd=r=>Array.isArray(r);function Q3(r,o,a){r.hasValue(o)?r.getValue(o).set(a):r.addValue(o,Lo(a))}function J3(r){return Kd(r)?r[r.length-1]||0:r}function eC(r,o){const a=Mo(r,o);let{transitionEnd:f={},transition:p={},...x}=a||{};x={...x,...f};for(const y in x){const A=J3(x[y]);Q3(r,y,A)}}function tC(r){return!!(ur(r)&&r.add)}function qd(r,o){const a=r.getValue("willChange");if(tC(a))return a.add(o);if(!a&&zi.WillChange){const f=new zi.WillChange("auto");r.addValue("willChange",f),f.add(o)}}function Am(r){return r.props[hm]}const nC=r=>r!==null;function rC(r,{repeat:o,repeatType:a="loop"},f){const p=r.filter(nC),x=o&&a!=="loop"&&o%2===1?0:p.length-1;return p[x]}const iC={type:"spring",stiffness:500,damping:25,restSpeed:10},sC=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),oC={type:"keyframes",duration:.8},aC={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},lC=(r,{keyframes:o})=>o.length>2?oC:Uo.has(r)?r.startsWith("scale")?sC(o[1]):iC:aC;function cC({when:r,delay:o,delayChildren:a,staggerChildren:f,staggerDirection:p,repeat:x,repeatType:y,repeatDelay:A,from:v,elapsed:E,...S}){return!!Object.keys(S).length}const qf=(r,o,a,f={},p,x)=>y=>{const A=jf(f,r)||{},v=A.delay||f.delay||0;let{elapsed:E=0}=f;E=E-mi(v);const S={keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:o.getVelocity(),...A,delay:-E,onUpdate:R=>{o.set(R),A.onUpdate&&A.onUpdate(R)},onComplete:()=>{y(),A.onComplete&&A.onComplete()},name:r,motionValue:o,element:x?void 0:p};cC(A)||Object.assign(S,lC(r,S)),S.duration&&(S.duration=mi(S.duration)),S.repeatDelay&&(S.repeatDelay=mi(S.repeatDelay)),S.from!==void 0&&(S.keyframes[0]=S.from);let I=!1;if((S.type===!1||S.duration===0&&!S.repeatDelay)&&(Gd(S),S.delay===0&&(I=!0)),(zi.instantAnimations||zi.skipAnimations)&&(I=!0,Gd(S),S.delay=0),S.allowFlatten=!A.type&&!A.ease,I&&!x&&o.get()!==void 0){const R=rC(S.keyframes,A);if(R!==void 0){sn.update(()=>{S.onUpdate(R),S.onComplete()});return}}return A.isSync?new Lf(S):new Pv(S)};function uC({protectedKeys:r,needsAnimating:o},a){const f=r.hasOwnProperty(a)&&o[a]!==!0;return o[a]=!1,f}function Sm(r,o,{delay:a=0,transitionOverride:f,type:p}={}){let{transition:x=r.getDefaultTransition(),transitionEnd:y,...A}=o;f&&(x=f);const v=[],E=p&&r.animationState&&r.animationState.getState()[p];for(const S in A){const I=r.getValue(S,r.latestValues[S]??null),R=A[S];if(R===void 0||E&&uC(E,S))continue;const M={delay:a,...jf(x||{},S)},L=I.get();if(L!==void 0&&!I.isAnimating&&!Array.isArray(R)&&R===L&&!M.velocity)continue;let B=!1;if(window.MotionHandoffAnimation){const z=Am(r);if(z){const U=window.MotionHandoffAnimation(z,S,sn);U!==null&&(M.startTime=U,B=!0)}}qd(r,S),I.start(qf(S,I,R,r.shouldReduceMotion&&Gg.has(S)?{type:!1}:M,r,B));const j=I.animation;j&&v.push(j)}return y&&Promise.all(v).then(()=>{sn.update(()=>{y&&eC(r,y)})}),v}function Tm(r,o,a,f=0,p=1){const x=Array.from(r).sort((E,S)=>E.sortNodePosition(S)).indexOf(o),y=r.size,A=(y-1)*f;return typeof a=="function"?a(x,y):p===1?x*f:A-x*f}function Qd(r,o,a={}){var v;const f=Mo(r,o,a.type==="exit"?(v=r.presenceContext)==null?void 0:v.custom:void 0);let{transition:p=r.getDefaultTransition()||{}}=f||{};a.transitionOverride&&(p=a.transitionOverride);const x=f?()=>Promise.all(Sm(r,f,a)):()=>Promise.resolve(),y=r.variantChildren&&r.variantChildren.size?(E=0)=>{const{delayChildren:S=0,staggerChildren:I,staggerDirection:R}=p;return dC(r,o,E,S,I,R,a)}:()=>Promise.resolve(),{when:A}=p;if(A){const[E,S]=A==="beforeChildren"?[x,y]:[y,x];return E().then(()=>S())}else return Promise.all([x(),y(a.delay)])}function dC(r,o,a=0,f=0,p=0,x=1,y){const A=[];for(const v of r.variantChildren)v.notify("AnimationStart",o),A.push(Qd(v,o,{...y,delay:a+(typeof f=="function"?0:f)+Tm(r.variantChildren,v,f,p,x)}).then(()=>v.notify("AnimationComplete",o)));return Promise.all(A)}function fC(r,o,a={}){r.notify("AnimationStart",o);let f;if(Array.isArray(o)){const p=o.map(x=>Qd(r,x,a));f=Promise.all(p)}else if(typeof o=="string")f=Qd(r,o,a);else{const p=typeof o=="function"?Mo(r,o,a.custom):o;f=Promise.all(Sm(r,p,a))}return f.then(()=>{r.notify("AnimationComplete",o)})}function Im(r,o){if(!Array.isArray(o))return!1;const a=o.length;if(a!==r.length)return!1;for(let f=0;f<a;f++)if(o[f]!==r[f])return!1;return!0}const hC=Hf.length;function Nm(r){if(!r)return;if(!r.isControllingVariants){const a=r.parent?Nm(r.parent)||{}:{};return r.props.initial!==void 0&&(a.initial=r.props.initial),a}const o={};for(let a=0;a<hC;a++){const f=Hf[a],p=r.props[f];(za(p)||p===!1)&&(o[f]=p)}return o}const pC=[...Wf].reverse(),gC=Wf.length;function mC(r){return o=>Promise.all(o.map(({animation:a,options:f})=>fC(r,a,f)))}function xC(r){let o=mC(r),a=sp(),f=!0;const p=v=>(E,S)=>{var R;const I=Mo(r,S,v==="exit"?(R=r.presenceContext)==null?void 0:R.custom:void 0);if(I){const{transition:M,transitionEnd:L,...B}=I;E={...E,...B,...L}}return E};function x(v){o=v(r)}function y(v){const{props:E}=r,S=Nm(r.parent)||{},I=[],R=new Set;let M={},L=1/0;for(let j=0;j<gC;j++){const z=pC[j],U=a[z],V=E[z]!==void 0?E[z]:S[z],ee=za(V),re=z===v?U.isActive:null;re===!1&&(L=j);let ne=V===S[z]&&V!==E[z]&&ee;if(ne&&f&&r.manuallyAnimateOnMount&&(ne=!1),U.protectedKeys={...M},!U.isActive&&re===null||!V&&!U.prevProp||Oc(V)||typeof V=="boolean")continue;const q=yC(U.prevProp,V);let le=q||z===v&&U.isActive&&!ne&&ee||j>L&&ee,K=!1;const Re=Array.isArray(V)?V:[V];let Be=Re.reduce(p(z),{});re===!1&&(Be={});const{prevResolvedValues:Ne={}}=U,Le={...Ne,...Be},Se=ge=>{le=!0,R.has(ge)&&(K=!0,R.delete(ge)),U.needsAnimating[ge]=!0;const me=r.getValue(ge);me&&(me.liveStyle=!1)};for(const ge in Le){const me=Be[ge],ze=Ne[ge];if(M.hasOwnProperty(ge))continue;let ce=!1;Kd(me)&&Kd(ze)?ce=!Im(me,ze):ce=me!==ze,ce?me!=null?Se(ge):R.add(ge):me!==void 0&&R.has(ge)?Se(ge):U.protectedKeys[ge]=!0}U.prevProp=V,U.prevResolvedValues=Be,U.isActive&&(M={...M,...Be}),f&&r.blockInitialAnimation&&(le=!1);const Q=ne&&q;le&&(!Q||K)&&I.push(...Re.map(ge=>{const me={type:z};if(typeof ge=="string"&&f&&!Q&&r.manuallyAnimateOnMount&&r.parent){const{parent:ze}=r,ce=Mo(ze,ge);if(ze.enteringChildren&&ce){const{delayChildren:W}=ce.transition||{};me.delay=Tm(ze.enteringChildren,r,W)}}return{animation:ge,options:me}}))}if(R.size){const j={};if(typeof E.initial!="boolean"){const z=Mo(r,Array.isArray(E.initial)?E.initial[0]:E.initial);z&&z.transition&&(j.transition=z.transition)}R.forEach(z=>{const U=r.getBaseTarget(z),V=r.getValue(z);V&&(V.liveStyle=!0),j[z]=U??null}),I.push({animation:j})}let B=!!I.length;return f&&(E.initial===!1||E.initial===E.animate)&&!r.manuallyAnimateOnMount&&(B=!1),f=!1,B?o(I):Promise.resolve()}function A(v,E){var I;if(a[v].isActive===E)return Promise.resolve();(I=r.variantChildren)==null||I.forEach(R=>{var M;return(M=R.animationState)==null?void 0:M.setActive(v,E)}),a[v].isActive=E;const S=y(v);for(const R in a)a[R].protectedKeys={};return S}return{animateChanges:y,setActive:A,setAnimateFunction:x,getState:()=>a,reset:()=>{a=sp(),f=!0}}}function yC(r,o){return typeof o=="string"?o!==r:Array.isArray(o)?!Im(o,r):!1}function Ys(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function sp(){return{animate:Ys(!0),whileInView:Ys(),whileHover:Ys(),whileTap:Ys(),whileDrag:Ys(),whileFocus:Ys(),exit:Ys()}}class Es{constructor(o){this.isMounted=!1,this.node=o}update(){}}class wC extends Es{constructor(o){super(o),o.animationState||(o.animationState=xC(o))}updateAnimationControlsSubscription(){const{animate:o}=this.node.getProps();Oc(o)&&(this.unmountControls=o.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:o}=this.node.getProps(),{animate:a}=this.node.prevProps||{};o!==a&&this.updateAnimationControlsSubscription()}unmount(){var o;this.node.animationState.reset(),(o=this.unmountControls)==null||o.call(this)}}let vC=0;class CC extends Es{constructor(){super(...arguments),this.id=vC++}update(){if(!this.node.presenceContext)return;const{isPresent:o,onExitComplete:a}=this.node.presenceContext,{isPresent:f}=this.node.prevPresenceContext||{};if(!this.node.animationState||o===f)return;const p=this.node.animationState.setActive("exit",!o);a&&!o&&p.then(()=>{a(this.id)})}mount(){const{register:o,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),o&&(this.unmount=o(this.id))}unmount(){}}const EC={animation:{Feature:wC},exit:{Feature:CC}};function Wa(r,o,a,f={passive:!0}){return r.addEventListener(o,a,f),()=>r.removeEventListener(o,a)}function Ka(r){return{point:{x:r.pageX,y:r.pageY}}}const bC=r=>o=>zf(o)&&r(o,Ka(o));function Oa(r,o,a,f){return Wa(r,o,bC(a),f)}const _m=1e-4,AC=1-_m,SC=1+_m,Rm=.01,TC=0-Rm,IC=0+Rm;function xr(r){return r.max-r.min}function NC(r,o,a){return Math.abs(r-o)<=a}function op(r,o,a,f=.5){r.origin=f,r.originPoint=un(o.min,o.max,r.origin),r.scale=xr(a)/xr(o),r.translate=un(a.min,a.max,r.origin)-r.originPoint,(r.scale>=AC&&r.scale<=SC||isNaN(r.scale))&&(r.scale=1),(r.translate>=TC&&r.translate<=IC||isNaN(r.translate))&&(r.translate=0)}function Ma(r,o,a,f){op(r.x,o.x,a.x,f?f.originX:void 0),op(r.y,o.y,a.y,f?f.originY:void 0)}function ap(r,o,a){r.min=a.min+o.min,r.max=r.min+xr(o)}function _C(r,o,a){ap(r.x,o.x,a.x),ap(r.y,o.y,a.y)}function lp(r,o,a){r.min=o.min-a.min,r.max=r.min+xr(o)}function Da(r,o,a){lp(r.x,o.x,a.x),lp(r.y,o.y,a.y)}function Yr(r){return[r("x"),r("y")]}const km=({current:r})=>r?r.ownerDocument.defaultView:null,cp=(r,o)=>Math.abs(r-o);function RC(r,o){const a=cp(r.x,o.x),f=cp(r.y,o.y);return Math.sqrt(a**2+f**2)}class Pm{constructor(o,a,{transformPagePoint:f,contextWindow:p=window,dragSnapToOrigin:x=!1,distanceThreshold:y=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const R=Ed(this.lastMoveEventInfo,this.history),M=this.startEvent!==null,L=RC(R.offset,{x:0,y:0})>=this.distanceThreshold;if(!M&&!L)return;const{point:B}=R,{timestamp:j}=Qn;this.history.push({...B,timestamp:j});const{onStart:z,onMove:U}=this.handlers;M||(z&&z(this.lastMoveEvent,R),this.startEvent=this.lastMoveEvent),U&&U(this.lastMoveEvent,R)},this.handlePointerMove=(R,M)=>{this.lastMoveEvent=R,this.lastMoveEventInfo=Cd(M,this.transformPagePoint),sn.update(this.updatePoint,!0)},this.handlePointerUp=(R,M)=>{this.end();const{onEnd:L,onSessionEnd:B,resumeAnimation:j}=this.handlers;if(this.dragSnapToOrigin&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const z=Ed(R.type==="pointercancel"?this.lastMoveEventInfo:Cd(M,this.transformPagePoint),this.history);this.startEvent&&L&&L(R,z),B&&B(R,z)},!zf(o))return;this.dragSnapToOrigin=x,this.handlers=a,this.transformPagePoint=f,this.distanceThreshold=y,this.contextWindow=p||window;const A=Ka(o),v=Cd(A,this.transformPagePoint),{point:E}=v,{timestamp:S}=Qn;this.history=[{...E,timestamp:S}];const{onSessionStart:I}=a;I&&I(o,Ed(v,this.history)),this.removeListeners=Ya(Oa(this.contextWindow,"pointermove",this.handlePointerMove),Oa(this.contextWindow,"pointerup",this.handlePointerUp),Oa(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(o){this.handlers=o}end(){this.removeListeners&&this.removeListeners(),vs(this.updatePoint)}}function Cd(r,o){return o?{point:o(r.point)}:r}function up(r,o){return{x:r.x-o.x,y:r.y-o.y}}function Ed({point:r},o){return{point:r,delta:up(r,Om(o)),offset:up(r,kC(o)),velocity:PC(o,.1)}}function kC(r){return r[0]}function Om(r){return r[r.length-1]}function PC(r,o){if(r.length<2)return{x:0,y:0};let a=r.length-1,f=null;const p=Om(r);for(;a>=0&&(f=r[a],!(p.timestamp-f.timestamp>mi(o)));)a--;if(!f)return{x:0,y:0};const x=xi(p.timestamp-f.timestamp);if(x===0)return{x:0,y:0};const y={x:(p.x-f.x)/x,y:(p.y-f.y)/x};return y.x===1/0&&(y.x=0),y.y===1/0&&(y.y=0),y}function OC(r,{min:o,max:a},f){return o!==void 0&&r<o?r=f?un(o,r,f.min):Math.max(r,o):a!==void 0&&r>a&&(r=f?un(a,r,f.max):Math.min(r,a)),r}function dp(r,o,a){return{min:o!==void 0?r.min+o:void 0,max:a!==void 0?r.max+a-(r.max-r.min):void 0}}function MC(r,{top:o,left:a,bottom:f,right:p}){return{x:dp(r.x,a,p),y:dp(r.y,o,f)}}function fp(r,o){let a=o.min-r.min,f=o.max-r.max;return o.max-o.min<r.max-r.min&&([a,f]=[f,a]),{min:a,max:f}}function DC(r,o){return{x:fp(r.x,o.x),y:fp(r.y,o.y)}}function LC(r,o){let a=.5;const f=xr(r),p=xr(o);return p>f?a=ja(o.min,o.max-f,r.min):f>p&&(a=ja(r.min,r.max-p,o.min)),Vi(0,1,a)}function BC(r,o){const a={};return o.min!==void 0&&(a.min=o.min-r.min),o.max!==void 0&&(a.max=o.max-r.min),a}const Jd=.35;function jC(r=Jd){return r===!1?r=0:r===!0&&(r=Jd),{x:hp(r,"left","right"),y:hp(r,"top","bottom")}}function hp(r,o,a){return{min:pp(r,o),max:pp(r,a)}}function pp(r,o){return typeof r=="number"?r:r[o]||0}const FC=new WeakMap;class VC{constructor(o){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=bn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=o}start(o,{snapToCursor:a=!1,distanceThreshold:f}={}){const{presenceContext:p}=this.visualElement;if(p&&p.isPresent===!1)return;const x=I=>{const{dragSnapToOrigin:R}=this.getProps();R?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(Ka(I).point)},y=(I,R)=>{const{drag:M,dragPropagation:L,onDragStart:B}=this.getProps();if(M&&!L&&(this.openDragLock&&this.openDragLock(),this.openDragLock=$v(M),!this.openDragLock))return;this.latestPointerEvent=I,this.latestPanInfo=R,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Yr(z=>{let U=this.getAxisMotionValue(z).get()||0;if(yi.test(U)){const{projection:V}=this.visualElement;if(V&&V.layout){const ee=V.layout.layoutBox[z];ee&&(U=xr(ee)*(parseFloat(U)/100))}}this.originPoint[z]=U}),B&&sn.postRender(()=>B(I,R)),qd(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},A=(I,R)=>{this.latestPointerEvent=I,this.latestPanInfo=R;const{dragPropagation:M,dragDirectionLock:L,onDirectionLock:B,onDrag:j}=this.getProps();if(!M&&!this.openDragLock)return;const{offset:z}=R;if(L&&this.currentDirection===null){this.currentDirection=zC(z),this.currentDirection!==null&&B&&B(this.currentDirection);return}this.updateAxis("x",R.point,z),this.updateAxis("y",R.point,z),this.visualElement.render(),j&&j(I,R)},v=(I,R)=>{this.latestPointerEvent=I,this.latestPanInfo=R,this.stop(I,R),this.latestPointerEvent=null,this.latestPanInfo=null},E=()=>Yr(I=>{var R;return this.getAnimationState(I)==="paused"&&((R=this.getAxisMotionValue(I).animation)==null?void 0:R.play())}),{dragSnapToOrigin:S}=this.getProps();this.panSession=new Pm(o,{onSessionStart:x,onStart:y,onMove:A,onSessionEnd:v,resumeAnimation:E},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:S,distanceThreshold:f,contextWindow:km(this.visualElement)})}stop(o,a){const f=o||this.latestPointerEvent,p=a||this.latestPanInfo,x=this.isDragging;if(this.cancel(),!x||!p||!f)return;const{velocity:y}=p;this.startAnimation(y);const{onDragEnd:A}=this.getProps();A&&sn.postRender(()=>A(f,p))}cancel(){this.isDragging=!1;const{projection:o,animationState:a}=this.visualElement;o&&(o.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:f}=this.getProps();!f&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(o,a,f){const{drag:p}=this.getProps();if(!f||!oc(o,p,this.currentDirection))return;const x=this.getAxisMotionValue(o);let y=this.originPoint[o]+f[o];this.constraints&&this.constraints[o]&&(y=OC(y,this.constraints[o],this.elastic[o])),x.set(y)}resolveConstraints(){var x;const{dragConstraints:o,dragElastic:a}=this.getProps(),f=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(x=this.visualElement.projection)==null?void 0:x.layout,p=this.constraints;o&&_o(o)?this.constraints||(this.constraints=this.resolveRefConstraints()):o&&f?this.constraints=MC(f.layoutBox,o):this.constraints=!1,this.elastic=jC(a),p!==this.constraints&&f&&this.constraints&&!this.hasMutatedConstraints&&Yr(y=>{this.constraints!==!1&&this.getAxisMotionValue(y)&&(this.constraints[y]=BC(f.layoutBox[y],this.constraints[y]))})}resolveRefConstraints(){const{dragConstraints:o,onMeasureDragConstraints:a}=this.getProps();if(!o||!_o(o))return!1;const f=o.current,{projection:p}=this.visualElement;if(!p||!p.layout)return!1;const x=U3(f,p.root,this.visualElement.getTransformPagePoint());let y=DC(p.layout.layoutBox,x);if(a){const A=a(F3(y));this.hasMutatedConstraints=!!A,A&&(y=mm(A))}return y}startAnimation(o){const{drag:a,dragMomentum:f,dragElastic:p,dragTransition:x,dragSnapToOrigin:y,onDragTransitionEnd:A}=this.getProps(),v=this.constraints||{},E=Yr(S=>{if(!oc(S,a,this.currentDirection))return;let I=v&&v[S]||{};y&&(I={min:0,max:0});const R=p?200:1e6,M=p?40:1e7,L={type:"inertia",velocity:f?o[S]:0,bounceStiffness:R,bounceDamping:M,timeConstant:750,restDelta:1,restSpeed:10,...x,...I};return this.startAxisValueAnimation(S,L)});return Promise.all(E).then(A)}startAxisValueAnimation(o,a){const f=this.getAxisMotionValue(o);return qd(this.visualElement,o),f.start(qf(o,f,0,a,this.visualElement,!1))}stopAnimation(){Yr(o=>this.getAxisMotionValue(o).stop())}pauseAnimation(){Yr(o=>{var a;return(a=this.getAxisMotionValue(o).animation)==null?void 0:a.pause()})}getAnimationState(o){var a;return(a=this.getAxisMotionValue(o).animation)==null?void 0:a.state}getAxisMotionValue(o){const a=`_drag${o.toUpperCase()}`,f=this.visualElement.getProps(),p=f[a];return p||this.visualElement.getValue(o,(f.initial?f.initial[o]:void 0)||0)}snapToCursor(o){Yr(a=>{const{drag:f}=this.getProps();if(!oc(a,f,this.currentDirection))return;const{projection:p}=this.visualElement,x=this.getAxisMotionValue(a);if(p&&p.layout){const{min:y,max:A}=p.layout.layoutBox[a];x.set(o[a]-un(y,A,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:o,dragConstraints:a}=this.getProps(),{projection:f}=this.visualElement;if(!_o(a)||!f||!this.constraints)return;this.stopAnimation();const p={x:0,y:0};Yr(y=>{const A=this.getAxisMotionValue(y);if(A&&this.constraints!==!1){const v=A.get();p[y]=LC({min:v,max:v},this.constraints[y])}});const{transformTemplate:x}=this.visualElement.getProps();this.visualElement.current.style.transform=x?x({},""):"none",f.root&&f.root.updateScroll(),f.updateLayout(),this.resolveConstraints(),Yr(y=>{if(!oc(y,o,null))return;const A=this.getAxisMotionValue(y),{min:v,max:E}=this.constraints[y];A.set(un(v,E,p[y]))})}addListeners(){if(!this.visualElement.current)return;FC.set(this.visualElement,this);const o=this.visualElement.current,a=Oa(o,"pointerdown",v=>{const{drag:E,dragListener:S=!0}=this.getProps();E&&S&&this.start(v)}),f=()=>{const{dragConstraints:v}=this.getProps();_o(v)&&v.current&&(this.constraints=this.resolveRefConstraints())},{projection:p}=this.visualElement,x=p.addEventListener("measure",f);p&&!p.layout&&(p.root&&p.root.updateScroll(),p.updateLayout()),sn.read(f);const y=Wa(window,"resize",()=>this.scalePositionWithinConstraints()),A=p.addEventListener("didUpdate",({delta:v,hasLayoutChanged:E})=>{this.isDragging&&E&&(Yr(S=>{const I=this.getAxisMotionValue(S);I&&(this.originPoint[S]+=v[S].translate,I.set(I.get()+v[S].translate))}),this.visualElement.render())});return()=>{y(),a(),x(),A&&A()}}getProps(){const o=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:f=!1,dragPropagation:p=!1,dragConstraints:x=!1,dragElastic:y=Jd,dragMomentum:A=!0}=o;return{...o,drag:a,dragDirectionLock:f,dragPropagation:p,dragConstraints:x,dragElastic:y,dragMomentum:A}}}function oc(r,o,a){return(o===!0||o===r)&&(a===null||a===r)}function zC(r,o=10){let a=null;return Math.abs(r.y)>o?a="y":Math.abs(r.x)>o&&(a="x"),a}class UC extends Es{constructor(o){super(o),this.removeGroupControls=$r,this.removeListeners=$r,this.controls=new VC(o)}mount(){const{dragControls:o}=this.node.getProps();o&&(this.removeGroupControls=o.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||$r}unmount(){this.removeGroupControls(),this.removeListeners()}}const gp=r=>(o,a)=>{r&&sn.postRender(()=>r(o,a))};class WC extends Es{constructor(){super(...arguments),this.removePointerDownListener=$r}onPointerDown(o){this.session=new Pm(o,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:km(this.node)})}createPanHandlers(){const{onPanSessionStart:o,onPanStart:a,onPan:f,onPanEnd:p}=this.node.getProps();return{onSessionStart:gp(o),onStart:gp(a),onMove:f,onEnd:(x,y)=>{delete this.session,p&&sn.postRender(()=>p(x,y))}}}mount(){this.removePointerDownListener=Oa(this.node.current,"pointerdown",o=>this.onPointerDown(o))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const gc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function mp(r,o){return o.max===o.min?0:r/(o.max-o.min)*100}const Na={correct:(r,o)=>{if(!o.target)return r;if(typeof r=="string")if(mt.test(r))r=parseFloat(r);else return r;const a=mp(r,o.target.x),f=mp(r,o.target.y);return`${a}% ${f}%`}},HC={correct:(r,{treeScale:o,projectionDelta:a})=>{const f=r,p=Cs.parse(r);if(p.length>5)return f;const x=Cs.createTransformer(r),y=typeof p[0]!="number"?1:0,A=a.x.scale*o.x,v=a.y.scale*o.y;p[0+y]/=A,p[1+y]/=v;const E=un(A,v,.5);return typeof p[2+y]=="number"&&(p[2+y]/=E),typeof p[3+y]=="number"&&(p[3+y]/=E),x(p)}};let bd=!1;class GC extends N.Component{componentDidMount(){const{visualElement:o,layoutGroup:a,switchLayoutGroup:f,layoutId:p}=this.props,{projection:x}=o;h3(XC),x&&(a.group&&a.group.add(x),f&&f.register&&p&&f.register(x),bd&&x.root.didUpdate(),x.addEventListener("animationComplete",()=>{this.safeToRemove()}),x.setOptions({...x.options,onExitComplete:()=>this.safeToRemove()})),gc.hasEverUpdated=!0}getSnapshotBeforeUpdate(o){const{layoutDependency:a,visualElement:f,drag:p,isPresent:x}=this.props,{projection:y}=f;return y&&(y.isPresent=x,bd=!0,p||o.layoutDependency!==a||a===void 0||o.isPresent!==x?y.willUpdate():this.safeToRemove(),o.isPresent!==x&&(x?y.promote():y.relegate()||sn.postRender(()=>{const A=y.getStack();(!A||!A.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:o}=this.props.visualElement;o&&(o.root.didUpdate(),Vf.postRender(()=>{!o.currentAnimation&&o.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:o,layoutGroup:a,switchLayoutGroup:f}=this.props,{projection:p}=o;bd=!0,p&&(p.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(p),f&&f.deregister&&f.deregister(p))}safeToRemove(){const{safeToRemove:o}=this.props;o&&o()}render(){return null}}function Mm(r){const[o,a]=nm(),f=N.useContext(yf);return w.jsx(GC,{...r,layoutGroup:f,switchLayoutGroup:N.useContext(pm),isPresent:o,safeToRemove:a})}const XC={borderRadius:{...Na,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Na,borderTopRightRadius:Na,borderBottomLeftRadius:Na,borderBottomRightRadius:Na,boxShadow:HC};function YC(r,o,a){const f=ur(r)?r:Lo(r);return f.start(qf("",f,o,a)),f.animation}const $C=(r,o)=>r.depth-o.depth;class ZC{constructor(){this.children=[],this.isDirty=!1}add(o){Cf(this.children,o),this.isDirty=!0}remove(o){Ef(this.children,o),this.isDirty=!0}forEach(o){this.isDirty&&this.children.sort($C),this.isDirty=!1,this.children.forEach(o)}}function KC(r,o){const a=Sr.now(),f=({timestamp:p})=>{const x=p-a;x>=o&&(vs(f),r(x-o))};return sn.setup(f,!0),()=>vs(f)}const Dm=["TopLeft","TopRight","BottomLeft","BottomRight"],qC=Dm.length,xp=r=>typeof r=="string"?parseFloat(r):r,yp=r=>typeof r=="number"||mt.test(r);function QC(r,o,a,f,p,x){p?(r.opacity=un(0,a.opacity??1,JC(f)),r.opacityExit=un(o.opacity??1,0,eE(f))):x&&(r.opacity=un(o.opacity??1,a.opacity??1,f));for(let y=0;y<qC;y++){const A=`border${Dm[y]}Radius`;let v=wp(o,A),E=wp(a,A);if(v===void 0&&E===void 0)continue;v||(v=0),E||(E=0),v===0||E===0||yp(v)===yp(E)?(r[A]=Math.max(un(xp(v),xp(E),f),0),(yi.test(E)||yi.test(v))&&(r[A]+="%")):r[A]=E}(o.rotate||a.rotate)&&(r.rotate=un(o.rotate||0,a.rotate||0,f))}function wp(r,o){return r[o]!==void 0?r[o]:r.borderRadius}const JC=Lm(0,.5,Eg),eE=Lm(.5,.95,$r);function Lm(r,o,a){return f=>f<r?0:f>o?1:a(ja(r,o,f))}function vp(r,o){r.min=o.min,r.max=o.max}function Xr(r,o){vp(r.x,o.x),vp(r.y,o.y)}function Cp(r,o){r.translate=o.translate,r.scale=o.scale,r.originPoint=o.originPoint,r.origin=o.origin}function Ep(r,o,a,f,p){return r-=o,r=Ac(r,1/a,f),p!==void 0&&(r=Ac(r,1/p,f)),r}function tE(r,o=0,a=1,f=.5,p,x=r,y=r){if(yi.test(o)&&(o=parseFloat(o),o=un(y.min,y.max,o/100)-y.min),typeof o!="number")return;let A=un(x.min,x.max,f);r===x&&(A-=o),r.min=Ep(r.min,o,a,A,p),r.max=Ep(r.max,o,a,A,p)}function bp(r,o,[a,f,p],x,y){tE(r,o[a],o[f],o[p],o.scale,x,y)}const nE=["x","scaleX","originX"],rE=["y","scaleY","originY"];function Ap(r,o,a,f){bp(r.x,o,nE,a?a.x:void 0,f?f.x:void 0),bp(r.y,o,rE,a?a.y:void 0,f?f.y:void 0)}function Sp(r){return r.translate===0&&r.scale===1}function Bm(r){return Sp(r.x)&&Sp(r.y)}function Tp(r,o){return r.min===o.min&&r.max===o.max}function iE(r,o){return Tp(r.x,o.x)&&Tp(r.y,o.y)}function Ip(r,o){return Math.round(r.min)===Math.round(o.min)&&Math.round(r.max)===Math.round(o.max)}function jm(r,o){return Ip(r.x,o.x)&&Ip(r.y,o.y)}function Np(r){return xr(r.x)/xr(r.y)}function _p(r,o){return r.translate===o.translate&&r.scale===o.scale&&r.originPoint===o.originPoint}class sE{constructor(){this.members=[]}add(o){Cf(this.members,o),o.scheduleRender()}remove(o){if(Ef(this.members,o),o===this.prevLead&&(this.prevLead=void 0),o===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(o){const a=this.members.findIndex(p=>o===p);if(a===0)return!1;let f;for(let p=a;p>=0;p--){const x=this.members[p];if(x.isPresent!==!1){f=x;break}}return f?(this.promote(f),!0):!1}promote(o,a){const f=this.lead;if(o!==f&&(this.prevLead=f,this.lead=o,o.show(),f)){f.instance&&f.scheduleRender(),o.scheduleRender(),o.resumeFrom=f,a&&(o.resumeFrom.preserveOpacity=!0),f.snapshot&&(o.snapshot=f.snapshot,o.snapshot.latestValues=f.animationValues||f.latestValues),o.root&&o.root.isUpdating&&(o.isLayoutDirty=!0);const{crossfade:p}=o.options;p===!1&&f.hide()}}exitAnimationComplete(){this.members.forEach(o=>{const{options:a,resumingFrom:f}=o;a.onExitComplete&&a.onExitComplete(),f&&f.options.onExitComplete&&f.options.onExitComplete()})}scheduleRender(){this.members.forEach(o=>{o.instance&&o.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function oE(r,o,a){let f="";const p=r.x.translate/o.x,x=r.y.translate/o.y,y=(a==null?void 0:a.z)||0;if((p||x||y)&&(f=`translate3d(${p}px, ${x}px, ${y}px) `),(o.x!==1||o.y!==1)&&(f+=`scale(${1/o.x}, ${1/o.y}) `),a){const{transformPerspective:E,rotate:S,rotateX:I,rotateY:R,skewX:M,skewY:L}=a;E&&(f=`perspective(${E}px) ${f}`),S&&(f+=`rotate(${S}deg) `),I&&(f+=`rotateX(${I}deg) `),R&&(f+=`rotateY(${R}deg) `),M&&(f+=`skewX(${M}deg) `),L&&(f+=`skewY(${L}deg) `)}const A=r.x.scale*o.x,v=r.y.scale*o.y;return(A!==1||v!==1)&&(f+=`scale(${A}, ${v})`),f||"none"}const Ad=["","X","Y","Z"],aE=1e3;let lE=0;function Sd(r,o,a,f){const{latestValues:p}=o;p[r]&&(a[r]=p[r],o.setStaticValue(r,0),f&&(f[r]=0))}function Fm(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:o}=r.options;if(!o)return;const a=Am(o);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:p,layoutId:x}=r.options;window.MotionCancelOptimisedAnimation(a,"transform",sn,!(p||x))}const{parent:f}=r;f&&!f.hasCheckedOptimisedAppear&&Fm(f)}function Vm({attachResizeListener:r,defaultParent:o,measureScroll:a,checkIsScrollRoot:f,resetTransform:p}){return class{constructor(y={},A=o==null?void 0:o()){this.id=lE++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(dE),this.nodes.forEach(gE),this.nodes.forEach(mE),this.nodes.forEach(fE)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=y,this.root=A?A.root||A:this,this.path=A?[...A.path,A]:[],this.parent=A,this.depth=A?A.depth+1:0;for(let v=0;v<this.path.length;v++)this.path[v].shouldResetTransform=!0;this.root===this&&(this.nodes=new ZC)}addEventListener(y,A){return this.eventHandlers.has(y)||this.eventHandlers.set(y,new Sf),this.eventHandlers.get(y).add(A)}notifyListeners(y,...A){const v=this.eventHandlers.get(y);v&&v.notify(...A)}hasListeners(y){return this.eventHandlers.has(y)}mount(y){if(this.instance)return;this.isSVG=tm(y)&&!e3(y),this.instance=y;const{layoutId:A,layout:v,visualElement:E}=this.options;if(E&&!E.current&&E.mount(y),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(v||A)&&(this.isLayoutDirty=!0),r){let S,I=0;const R=()=>this.root.updateBlockedByResize=!1;sn.read(()=>{I=window.innerWidth}),r(y,()=>{const M=window.innerWidth;M!==I&&(I=M,this.root.updateBlockedByResize=!0,S&&S(),S=KC(R,250),gc.hasAnimatedSinceResize&&(gc.hasAnimatedSinceResize=!1,this.nodes.forEach(Pp)))})}A&&this.root.registerSharedNode(A,this),this.options.animate!==!1&&E&&(A||v)&&this.addEventListener("didUpdate",({delta:S,hasLayoutChanged:I,hasRelativeLayoutChanged:R,layout:M})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const L=this.options.transition||E.getDefaultTransition()||CE,{onLayoutAnimationStart:B,onLayoutAnimationComplete:j}=E.getProps(),z=!this.targetLayout||!jm(this.targetLayout,M),U=!I&&R;if(this.options.layoutRoot||this.resumeFrom||U||I&&(z||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const V={...jf(L,"layout"),onPlay:B,onComplete:j};(E.shouldReduceMotion||this.options.layoutRoot)&&(V.delay=0,V.type=!1),this.startAnimation(V),this.setAnimationOrigin(S,U)}else I||Pp(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=M})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const y=this.getStack();y&&y.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),vs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(xE),this.animationId++)}getTransformTemplate(){const{visualElement:y}=this.options;return y&&y.getProps().transformTemplate}willUpdate(y=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Fm(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let S=0;S<this.path.length;S++){const I=this.path[S];I.shouldResetTransform=!0,I.updateScroll("snapshot"),I.options.layoutRoot&&I.willUpdate(!1)}const{layoutId:A,layout:v}=this.options;if(A===void 0&&!v)return;const E=this.getTransformTemplate();this.prevTransformTemplateValue=E?E(this.latestValues,""):void 0,this.updateSnapshot(),y&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Rp);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(kp);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(pE),this.nodes.forEach(cE),this.nodes.forEach(uE)):this.nodes.forEach(kp),this.clearAllSnapshots();const A=Sr.now();Qn.delta=Vi(0,1e3/60,A-Qn.timestamp),Qn.timestamp=A,Qn.isProcessing=!0,pd.update.process(Qn),pd.preRender.process(Qn),pd.render.process(Qn),Qn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Vf.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(hE),this.sharedNodes.forEach(yE)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,sn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){sn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!xr(this.snapshot.measuredBox.x)&&!xr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let v=0;v<this.path.length;v++)this.path[v].updateScroll();const y=this.layout;this.layout=this.measure(!1),this.layoutCorrected=bn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:A}=this.options;A&&A.notify("LayoutMeasure",this.layout.layoutBox,y?y.layoutBox:void 0)}updateScroll(y="measure"){let A=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===y&&(A=!1),A&&this.instance){const v=f(this.instance);this.scroll={animationId:this.root.animationId,phase:y,isRoot:v,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:v}}}resetTransform(){if(!p)return;const y=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,A=this.projectionDelta&&!Bm(this.projectionDelta),v=this.getTransformTemplate(),E=v?v(this.latestValues,""):void 0,S=E!==this.prevTransformTemplateValue;y&&this.instance&&(A||$s(this.latestValues)||S)&&(p(this.instance,E),this.shouldResetTransform=!1,this.scheduleRender())}measure(y=!0){const A=this.measurePageBox();let v=this.removeElementScroll(A);return y&&(v=this.removeTransform(v)),EE(v),{animationId:this.root.animationId,measuredBox:A,layoutBox:v,latestValues:{},source:this.id}}measurePageBox(){var E;const{visualElement:y}=this.options;if(!y)return bn();const A=y.measureViewportBox();if(!(((E=this.scroll)==null?void 0:E.wasRoot)||this.path.some(bE))){const{scroll:S}=this.root;S&&(Ro(A.x,S.offset.x),Ro(A.y,S.offset.y))}return A}removeElementScroll(y){var v;const A=bn();if(Xr(A,y),(v=this.scroll)!=null&&v.wasRoot)return A;for(let E=0;E<this.path.length;E++){const S=this.path[E],{scroll:I,options:R}=S;S!==this.root&&I&&R.layoutScroll&&(I.wasRoot&&Xr(A,y),Ro(A.x,I.offset.x),Ro(A.y,I.offset.y))}return A}applyTransform(y,A=!1){const v=bn();Xr(v,y);for(let E=0;E<this.path.length;E++){const S=this.path[E];!A&&S.options.layoutScroll&&S.scroll&&S!==S.root&&ko(v,{x:-S.scroll.offset.x,y:-S.scroll.offset.y}),$s(S.latestValues)&&ko(v,S.latestValues)}return $s(this.latestValues)&&ko(v,this.latestValues),v}removeTransform(y){const A=bn();Xr(A,y);for(let v=0;v<this.path.length;v++){const E=this.path[v];if(!E.instance||!$s(E.latestValues))continue;Yd(E.latestValues)&&E.updateSnapshot();const S=bn(),I=E.measurePageBox();Xr(S,I),Ap(A,E.latestValues,E.snapshot?E.snapshot.layoutBox:void 0,S)}return $s(this.latestValues)&&Ap(A,this.latestValues),A}setTargetDelta(y){this.targetDelta=y,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(y){this.options={...this.options,...y,crossfade:y.crossfade!==void 0?y.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Qn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(y=!1){var R;const A=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=A.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=A.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=A.isSharedProjectionDirty);const v=!!this.resumingFrom||this!==A;if(!(y||v&&this.isSharedProjectionDirty||this.isProjectionDirty||(R=this.parent)!=null&&R.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:S,layoutId:I}=this.options;if(!(!this.layout||!(S||I))){if(this.resolvedRelativeTargetAt=Qn.timestamp,!this.targetDelta&&!this.relativeTarget){const M=this.getClosestProjectingParent();M&&M.layout&&this.animationProgress!==1?(this.relativeParent=M,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bn(),this.relativeTargetOrigin=bn(),Da(this.relativeTargetOrigin,this.layout.layoutBox,M.layout.layoutBox),Xr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=bn(),this.targetWithTransforms=bn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),_C(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Xr(this.target,this.layout.layoutBox),ym(this.target,this.targetDelta)):Xr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const M=this.getClosestProjectingParent();M&&!!M.resumingFrom==!!this.resumingFrom&&!M.options.layoutScroll&&M.target&&this.animationProgress!==1?(this.relativeParent=M,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bn(),this.relativeTargetOrigin=bn(),Da(this.relativeTargetOrigin,this.target,M.target),Xr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Yd(this.parent.latestValues)||xm(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var L;const y=this.getLead(),A=!!this.resumingFrom||this!==y;let v=!0;if((this.isProjectionDirty||(L=this.parent)!=null&&L.isProjectionDirty)&&(v=!1),A&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(v=!1),this.resolvedRelativeTargetAt===Qn.timestamp&&(v=!1),v)return;const{layout:E,layoutId:S}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(E||S))return;Xr(this.layoutCorrected,this.layout.layoutBox);const I=this.treeScale.x,R=this.treeScale.y;z3(this.layoutCorrected,this.treeScale,this.path,A),y.layout&&!y.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(y.target=y.layout.layoutBox,y.targetWithTransforms=bn());const{target:M}=y;if(!M){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Cp(this.prevProjectionDelta.x,this.projectionDelta.x),Cp(this.prevProjectionDelta.y,this.projectionDelta.y)),Ma(this.projectionDelta,this.layoutCorrected,M,this.latestValues),(this.treeScale.x!==I||this.treeScale.y!==R||!_p(this.projectionDelta.x,this.prevProjectionDelta.x)||!_p(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",M))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(y=!0){var A;if((A=this.options.visualElement)==null||A.scheduleRender(),y){const v=this.getStack();v&&v.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Po(),this.projectionDelta=Po(),this.projectionDeltaWithTransform=Po()}setAnimationOrigin(y,A=!1){const v=this.snapshot,E=v?v.latestValues:{},S={...this.latestValues},I=Po();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!A;const R=bn(),M=v?v.source:void 0,L=this.layout?this.layout.source:void 0,B=M!==L,j=this.getStack(),z=!j||j.members.length<=1,U=!!(B&&!z&&this.options.crossfade===!0&&!this.path.some(vE));this.animationProgress=0;let V;this.mixTargetDelta=ee=>{const re=ee/1e3;Op(I.x,y.x,re),Op(I.y,y.y,re),this.setTargetDelta(I),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Da(R,this.layout.layoutBox,this.relativeParent.layout.layoutBox),wE(this.relativeTarget,this.relativeTargetOrigin,R,re),V&&iE(this.relativeTarget,V)&&(this.isProjectionDirty=!1),V||(V=bn()),Xr(V,this.relativeTarget)),B&&(this.animationValues=S,QC(S,E,this.latestValues,re,U,z)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=re},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(y){var A,v,E;this.notifyListeners("animationStart"),(A=this.currentAnimation)==null||A.stop(),(E=(v=this.resumingFrom)==null?void 0:v.currentAnimation)==null||E.stop(),this.pendingAnimation&&(vs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=sn.update(()=>{gc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Lo(0)),this.currentAnimation=YC(this.motionValue,[0,1e3],{...y,velocity:0,isSync:!0,onUpdate:S=>{this.mixTargetDelta(S),y.onUpdate&&y.onUpdate(S)},onStop:()=>{},onComplete:()=>{y.onComplete&&y.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const y=this.getStack();y&&y.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(aE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const y=this.getLead();let{targetWithTransforms:A,target:v,layout:E,latestValues:S}=y;if(!(!A||!v||!E)){if(this!==y&&this.layout&&E&&zm(this.options.animationType,this.layout.layoutBox,E.layoutBox)){v=this.target||bn();const I=xr(this.layout.layoutBox.x);v.x.min=y.target.x.min,v.x.max=v.x.min+I;const R=xr(this.layout.layoutBox.y);v.y.min=y.target.y.min,v.y.max=v.y.min+R}Xr(A,v),ko(A,S),Ma(this.projectionDeltaWithTransform,this.layoutCorrected,A,S)}}registerSharedNode(y,A){this.sharedNodes.has(y)||this.sharedNodes.set(y,new sE),this.sharedNodes.get(y).add(A);const E=A.options.initialPromotionConfig;A.promote({transition:E?E.transition:void 0,preserveFollowOpacity:E&&E.shouldPreserveFollowOpacity?E.shouldPreserveFollowOpacity(A):void 0})}isLead(){const y=this.getStack();return y?y.lead===this:!0}getLead(){var A;const{layoutId:y}=this.options;return y?((A=this.getStack())==null?void 0:A.lead)||this:this}getPrevLead(){var A;const{layoutId:y}=this.options;return y?(A=this.getStack())==null?void 0:A.prevLead:void 0}getStack(){const{layoutId:y}=this.options;if(y)return this.root.sharedNodes.get(y)}promote({needsReset:y,transition:A,preserveFollowOpacity:v}={}){const E=this.getStack();E&&E.promote(this,v),y&&(this.projectionDelta=void 0,this.needsReset=!0),A&&this.setOptions({transition:A})}relegate(){const y=this.getStack();return y?y.relegate(this):!1}resetSkewAndRotation(){const{visualElement:y}=this.options;if(!y)return;let A=!1;const{latestValues:v}=y;if((v.z||v.rotate||v.rotateX||v.rotateY||v.rotateZ||v.skewX||v.skewY)&&(A=!0),!A)return;const E={};v.z&&Sd("z",y,E,this.animationValues);for(let S=0;S<Ad.length;S++)Sd(`rotate${Ad[S]}`,y,E,this.animationValues),Sd(`skew${Ad[S]}`,y,E,this.animationValues);y.render();for(const S in E)y.setStaticValue(S,E[S]),this.animationValues&&(this.animationValues[S]=E[S]);y.scheduleRender()}applyProjectionStyles(y,A){if(!this.instance||this.isSVG)return;if(!this.isVisible){y.visibility="hidden";return}const v=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,y.visibility="",y.opacity="",y.pointerEvents=pc(A==null?void 0:A.pointerEvents)||"",y.transform=v?v(this.latestValues,""):"none";return}const E=this.getLead();if(!this.projectionDelta||!this.layout||!E.target){this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=pc(A==null?void 0:A.pointerEvents)||""),this.hasProjected&&!$s(this.latestValues)&&(y.transform=v?v({},""):"none",this.hasProjected=!1);return}y.visibility="";const S=E.animationValues||E.latestValues;this.applyTransformsToTarget();let I=oE(this.projectionDeltaWithTransform,this.treeScale,S);v&&(I=v(S,I)),y.transform=I;const{x:R,y:M}=this.projectionDelta;y.transformOrigin=`${R.origin*100}% ${M.origin*100}% 0`,E.animationValues?y.opacity=E===this?S.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:S.opacityExit:y.opacity=E===this?S.opacity!==void 0?S.opacity:"":S.opacityExit!==void 0?S.opacityExit:0;for(const L in Ua){if(S[L]===void 0)continue;const{correct:B,applyTo:j,isCSSVariable:z}=Ua[L],U=I==="none"?S[L]:B(S[L],E);if(j){const V=j.length;for(let ee=0;ee<V;ee++)y[j[ee]]=U}else z?this.options.visualElement.renderState.vars[L]=U:y[L]=U}this.options.layoutId&&(y.pointerEvents=E===this?pc(A==null?void 0:A.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(y=>{var A;return(A=y.currentAnimation)==null?void 0:A.stop()}),this.root.nodes.forEach(Rp),this.root.sharedNodes.clear()}}}function cE(r){r.updateLayout()}function uE(r){var a;const o=((a=r.resumeFrom)==null?void 0:a.snapshot)||r.snapshot;if(r.isLead()&&r.layout&&o&&r.hasListeners("didUpdate")){const{layoutBox:f,measuredBox:p}=r.layout,{animationType:x}=r.options,y=o.source!==r.layout.source;x==="size"?Yr(I=>{const R=y?o.measuredBox[I]:o.layoutBox[I],M=xr(R);R.min=f[I].min,R.max=R.min+M}):zm(x,o.layoutBox,f)&&Yr(I=>{const R=y?o.measuredBox[I]:o.layoutBox[I],M=xr(f[I]);R.max=R.min+M,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[I].max=r.relativeTarget[I].min+M)});const A=Po();Ma(A,f,o.layoutBox);const v=Po();y?Ma(v,r.applyTransform(p,!0),o.measuredBox):Ma(v,f,o.layoutBox);const E=!Bm(A);let S=!1;if(!r.resumeFrom){const I=r.getClosestProjectingParent();if(I&&!I.resumeFrom){const{snapshot:R,layout:M}=I;if(R&&M){const L=bn();Da(L,o.layoutBox,R.layoutBox);const B=bn();Da(B,f,M.layoutBox),jm(L,B)||(S=!0),I.options.layoutRoot&&(r.relativeTarget=B,r.relativeTargetOrigin=L,r.relativeParent=I)}}}r.notifyListeners("didUpdate",{layout:f,snapshot:o,delta:v,layoutDelta:A,hasLayoutChanged:E,hasRelativeLayoutChanged:S})}else if(r.isLead()){const{onExitComplete:f}=r.options;f&&f()}r.options.transition=void 0}function dE(r){r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function fE(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function hE(r){r.clearSnapshot()}function Rp(r){r.clearMeasurements()}function kp(r){r.isLayoutDirty=!1}function pE(r){const{visualElement:o}=r.options;o&&o.getProps().onBeforeLayoutMeasure&&o.notify("BeforeLayoutMeasure"),r.resetTransform()}function Pp(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function gE(r){r.resolveTargetDelta()}function mE(r){r.calcProjection()}function xE(r){r.resetSkewAndRotation()}function yE(r){r.removeLeadSnapshot()}function Op(r,o,a){r.translate=un(o.translate,0,a),r.scale=un(o.scale,1,a),r.origin=o.origin,r.originPoint=o.originPoint}function Mp(r,o,a,f){r.min=un(o.min,a.min,f),r.max=un(o.max,a.max,f)}function wE(r,o,a,f){Mp(r.x,o.x,a.x,f),Mp(r.y,o.y,a.y,f)}function vE(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const CE={duration:.45,ease:[.4,0,.1,1]},Dp=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),Lp=Dp("applewebkit/")&&!Dp("chrome/")?Math.round:$r;function Bp(r){r.min=Lp(r.min),r.max=Lp(r.max)}function EE(r){Bp(r.x),Bp(r.y)}function zm(r,o,a){return r==="position"||r==="preserve-aspect"&&!NC(Np(o),Np(a),.2)}function bE(r){var o;return r!==r.root&&((o=r.scroll)==null?void 0:o.wasRoot)}const AE=Vm({attachResizeListener:(r,o)=>Wa(r,"resize",o),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Td={current:void 0},Um=Vm({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!Td.current){const r=new AE({});r.mount(window),r.setOptions({layoutScroll:!0}),Td.current=r}return Td.current},resetTransform:(r,o)=>{r.style.transform=o!==void 0?o:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),SE={pan:{Feature:WC},drag:{Feature:UC,ProjectionNode:Um,MeasureLayout:Mm}};function jp(r,o,a){const{props:f}=r;r.animationState&&f.whileHover&&r.animationState.setActive("whileHover",a==="Start");const p="onHover"+a,x=f[p];x&&sn.postRender(()=>x(o,Ka(o)))}class TE extends Es{mount(){const{current:o}=this.node;o&&(this.unmount=Zv(o,(a,f)=>(jp(this.node,f,"Start"),p=>jp(this.node,p,"End"))))}unmount(){}}class IE extends Es{constructor(){super(...arguments),this.isActive=!1}onFocus(){let o=!1;try{o=this.node.current.matches(":focus-visible")}catch{o=!0}!o||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ya(Wa(this.node.current,"focus",()=>this.onFocus()),Wa(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Fp(r,o,a){const{props:f}=r;if(r.current instanceof HTMLButtonElement&&r.current.disabled)return;r.animationState&&f.whileTap&&r.animationState.setActive("whileTap",a==="Start");const p="onTap"+(a==="End"?"":a),x=f[p];x&&sn.postRender(()=>x(o,Ka(o)))}class NE extends Es{mount(){const{current:o}=this.node;o&&(this.unmount=Jv(o,(a,f)=>(Fp(this.node,f,"Start"),(p,{success:x})=>Fp(this.node,p,x?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ef=new WeakMap,Id=new WeakMap,_E=r=>{const o=ef.get(r.target);o&&o(r)},RE=r=>{r.forEach(_E)};function kE({root:r,...o}){const a=r||document;Id.has(a)||Id.set(a,{});const f=Id.get(a),p=JSON.stringify(o);return f[p]||(f[p]=new IntersectionObserver(RE,{root:r,...o})),f[p]}function PE(r,o,a){const f=kE(o);return ef.set(r,a),f.observe(r),()=>{ef.delete(r),f.unobserve(r)}}const OE={some:0,all:1};class ME extends Es{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:o={}}=this.node.getProps(),{root:a,margin:f,amount:p="some",once:x}=o,y={root:a?a.current:void 0,rootMargin:f,threshold:typeof p=="number"?p:OE[p]},A=v=>{const{isIntersecting:E}=v;if(this.isInView===E||(this.isInView=E,x&&!E&&this.hasEnteredView))return;E&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",E);const{onViewportEnter:S,onViewportLeave:I}=this.node.getProps(),R=E?S:I;R&&R(v)};return PE(this.node.current,y,A)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:o,prevProps:a}=this.node;["amount","margin","root"].some(DE(o,a))&&this.startObserver()}unmount(){}}function DE({viewport:r={}},{viewport:o={}}={}){return a=>r[a]!==o[a]}const LE={inView:{Feature:ME},tap:{Feature:NE},focus:{Feature:IE},hover:{Feature:TE}},BE={layout:{ProjectionNode:Um,MeasureLayout:Mm}},jE={...EC,...LE,...SE,...BE},Bi=j3(jE,q3),FE=()=>{const{login:r,signup:o,user:a,logout:f,checkAuth:p}=N.useContext(Jn),[x,y]=N.useState(""),[A,v]=N.useState(""),[E,S]=N.useState(""),[I,R]=N.useState(null),[M,L]=N.useState(null),[B,j]=N.useState(""),[z,U]=N.useState(0),[V,ee]=N.useState({x:0,y:0}),[re,ne]=N.useState(1),[q,le]=N.useState(null),[K,Re]=N.useState(!1),[Be,Ne]=N.useState(!1),[Le,Se]=N.useState({}),[Q,Fe]=N.useState({}),[ge,me]=N.useState(!1),[ze,ce]=N.useState(!1),[W,Y]=N.useState(null),pe=Wn(),ve=Mr(),Ee=new URLSearchParams(ve.search),ie=Ee.get("redirect"),be=Ee.get("code"),Ae=ie==="lobby",Ve=()=>{const we="abcdefghijklmnopqrstuvwxyz0123456789";let He="";for(let qe=0;qe<10;qe++)He+=we.charAt(Math.floor(Math.random()*we.length));return He};N.useEffect(()=>{if(Ae&&!x&&!A){const we=Ve(),He=Ve();y(we),v(He),Fe(qe=>({...qe,username:!0,password:!0})),Se(qe=>({...qe,username:"",password:""})),U(2)}},[Ae,x,A,E]),N.useEffect(()=>{localStorage.getItem("access_token")&&pe(ie==="lobby"?be?`/lobby?code=${be}`:"/?showLobbyModal=true":ie==="product-selection"?"/product-selection":"/")},[ie,be,pe]),N.useEffect(()=>{z===2&&E&&ue(E)&&(me(!0),Fe(we=>({...we,displayName:!0})),Se(we=>({...we,displayName:""})))},[z,E]);const De=we=>{const He=/^[a-z0-9]+$/;return we.length>=2&&He.test(we)},tt=we=>we.length>=2,ue=we=>we.length>=2,ye=()=>{z<Ct.length-1&&(z===0&&!E&&(S(x),Fe(we=>({...we,displayName:!0})),Se(we=>({...we,displayName:""}))),z===1&&E&&E.length>=2?me(!0):me(!1),U(we=>we+1))},Xe=()=>{if(z>0){const we=z-1;U(we);const He=Ct[we];if(He.validate){const qe=He.value;He.validate(qe)&&me(!0)}else me(!0)}},ht=(we,He,qe)=>{qe(we.target.value);const ut=we.target.value;He(ut)?(Fe(Ge=>({...Ge,[Ct[z].id]:!0})),Se(Ge=>({...Ge,[Ct[z].id]:""})),me(!0)):(Fe(Ge=>({...Ge,[Ct[z].id]:!1})),Se(Ge=>({...Ge,[Ct[z].id]:"Must be at least 2 characters"})),me(!1))},Pt=we=>{const He=we.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");y(He),De(He)?(Fe(qe=>({...qe,username:!0})),Se(qe=>({...qe,username:""})),me(!0)):(Fe(qe=>({...qe,username:!1})),Se(qe=>({...qe,username:"Must be at least 2 characters"})),me(!1))},xt=we=>{ht(we,tt,v)},Je=we=>{ht(we,ue,S)},nt=we=>{const He=we.target.files[0];if(He){const qe=new FileReader;qe.onload=ut=>{const Ge=new Image;Ge.onload=()=>{let At=Ge.width,Wt=Ge.height;const Ht=1500;At>Wt&&At>Ht?(Wt=Wt*Ht/At,At=Ht):Wt>At&&Wt>Ht&&(At=At*Ht/Wt,Wt=Ht);const Gt=document.createElement("canvas");Gt.width=At,Gt.height=Wt,Gt.getContext("2d").drawImage(Ge,0,0,At,Wt);const xe=Gt.toDataURL("image/jpeg",.75);R(He),L(xe),Re(!0),Fe(gt=>({...gt,image:!0})),Se(gt=>({...gt,image:""})),me(!0)},Ge.src=ut.target.result},qe.readAsDataURL(He)}},Nt=(we,He)=>{le(He)},Pe=async()=>{try{const we=await uf(M,q);L(we),Re(!1)}catch(we){console.error("Error cropping the image:",we),j("Failed to crop image. Please try again.")}},yn=async we=>{if(we.preventDefault(),Ne(!0),j(""),console.log("Signup attempt - Username:",x,"Password:",A),!x||!A||!E){j("All fields are required"),Ne(!1);return}if(!I||!M){j("Your profile picture is required"),Ne(!1);return}try{const He="/signup",qe=await fetch(window.server_url+He,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:x,password:A})}),ut=await qe.json();if(ut.error==="Username already taken")if(Ae){const Ht=Ve(),Gt=Ve();y(Ht),v(Gt);const Ue=await fetch(window.server_url+He,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:Ht,password:Gt})}),xe=await Ue.json();if(!Ue.ok||xe.error==="Username already taken"){j("Unable to create account. Please try again."),Ne(!1);return}r(xe)}else{j("Username is taken"),Ne(!1);return}else{if(!qe.ok){j(ut.message||"Signup failed"),Ne(!1);return}r(ut)}await p();const Ge=localStorage.getItem("access_token");if(!Ge)throw new Error("Authentication failed");let At=null;if(I)At=M,At=At.split(",")[1];else{const Ue=await(await(await fetch("/assets/fakeprofile.png")).blob()).arrayBuffer();At=btoa(new Uint8Array(Ue).reduce((xe,gt)=>xe+String.fromCharCode(gt),""))}if(!(await fetch(`${window.server_url}/update_profile`,{method:"POST",headers:{Authorization:`Bearer ${Ge}`,"Content-Type":"application/json"},body:JSON.stringify({name:E,image_data:At})})).ok)throw new Error("Failed to update profile");await p(),pe(ie==="lobby"?be?`/lobby?code=${be}`:"/?showLobbyModal=true":ie==="product-selection"?"/product-selection":"/")}catch(He){console.error("Error:",He),j("An error occurred. Please try again.")}Ne(!1)},Ct=[{id:"username",label:"Username",value:x,onChange:Pt,type:"text",placeholder:"Enter a username",validate:De},{id:"password",label:"Password",value:A,onChange:xt,type:"text",placeholder:"Create a password",validate:tt},{id:"displayName",label:be==="demolobby"?"Display Name (Type Any Name)":"Display Name (what people will see)",value:E,onChange:Je,type:"text",placeholder:"Enter your preferred name",validate:ue},{id:"image",label:be==="demolobby"?"Profile Image (Upload Any Image)":"Upload a Selfie (so people can find you)",type:"file",onChange:nt,accept:"image/*"}];return w.jsxs("div",{className:"signup-container",children:[w.jsx("button",{onClick:()=>pe("/"),className:"homescreen-button",children:"Home"}),w.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),w.jsx("h3",{className:"signup-header",children:be==="demolobby"?"Join the demo":"Sign Up to Join"}),be&&be!=="demolobby"&&w.jsxs("h2",{className:"signup-header",children:[be," lobby"]}),be==="demolobby"&&w.jsx("h2",{className:"signup-header",style:{fontSize:"0.9rem"},children:"Try Reuneo for Free!"}),w.jsxs("p",{className:"login-link-text",children:["Already have an account? ",w.jsx("a",{href:"#",onClick:we=>{we.preventDefault(),pe("/login")},className:"login-link",children:"Login here"})]}),w.jsxs("div",{className:"step-form-container",children:[w.jsx("div",{className:"step-progress",children:(Ae?Ct.slice(2):Ct).map((we,He)=>w.jsx("div",{className:`progress-dot ${Ae?(He===z-2?"active":"")+(He<z-2?" completed":""):(He===z?"active":"")+(He<z?" completed":"")}`},He))}),w.jsxs("form",{onSubmit:yn,children:[w.jsx(Y1,{mode:"wait",initial:!1,children:w.jsxs(Bi.div,{initial:{opacity:0,x:8},animate:{opacity:1,x:0},exit:{opacity:0,x:-8},transition:{type:"spring",stiffness:500,damping:25,mass:.3},className:"step active",style:{willChange:"transform, opacity"},children:[w.jsx("div",{className:"step-content",children:w.jsxs(Bi.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:[w.jsx("label",{className:"step-label",children:Ct[z].label}),w.jsx(Bi.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},transition:{duration:.15,ease:"easeOut"},children:Ct[z].type==="file"?w.jsx("div",{className:"image-upload-container",children:K?w.jsxs("div",{className:"cropper-container",children:[w.jsx("div",{className:"cropper-wrapper",children:w.jsx(cf,{image:M,crop:V,zoom:re,aspect:1,onCropComplete:Nt,onCropChange:ee,onZoomChange:ne})}),w.jsxs("div",{className:"cropper-controls",children:[w.jsx("button",{type:"button",onClick:()=>{Re(!1),L(null),R(null)},className:"cancel-crop-button",children:"Cancel"}),w.jsx("button",{type:"button",onClick:Pe,className:"save-crop-button",children:"Good"})]})]}):w.jsxs(w.Fragment,{children:[w.jsx("input",{type:"file",onChange:Ct[z].onChange,accept:Ct[z].accept,className:"step-input"}),M&&w.jsx("div",{children:w.jsx("img",{src:M,alt:"Profile preview",className:"profile-preview-image"})})]})}):w.jsx("input",{type:Ct[z].type,value:Ct[z].value,onChange:Ct[z].onChange,placeholder:Ct[z].placeholder,className:"step-input",autoFocus:!0})}),w.jsxs(Y1,{mode:"wait",children:[Le[Ct[z].id]&&w.jsx(Bi.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"step-error",children:Le[Ct[z].id]}),Q[Ct[z].id]&&w.jsx(Bi.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},className:"step-success",children:" Valid"})]})]})}),!K&&w.jsxs("div",{className:"button-container",children:[z>0&&w.jsx(Bi.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},type:"button",onClick:Xe,className:"backz-button",children:" Back"}),ge&&z<Ct.length-1&&w.jsx(Bi.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},type:"button",onClick:ye,className:"nextz-button",children:"Next "})]})]},z)}),B&&w.jsx(Bi.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"error-message",children:B}),z===Ct.length-1&&w.jsx(Bi.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},type:"submit",className:"primary-button",disabled:Be,children:Be?"Loading...":"Complete Signup"})]})]})]})},VE=5e3,Wm=(r,o=null,a=null)=>{N.useEffect(()=>{const f=async()=>{try{const x=a?`${window.server_url}/display_lobby_metadata?lobby_code=${a}`:`${window.server_url}/display_lobby_metadata`,y=localStorage.getItem("access_token"),A=await fetch(x,{headers:{Authorization:`Bearer ${y}`,lobby_code:a}});if(!A.ok){console.error("Failed to fetch lobby metadata");return}const v=await A.json();r(v.player_count),o&&o(v.lobby_state)}catch(x){console.error("Error fetching lobby metadata:",x)}};f();const p=setInterval(f,VE);return()=>clearInterval(p)},[r,o,a])},Qf="currentLobbyCode",Jf="currentLobbyTimestamp",eh="currentLobbyLastValidated",zE=30*60*1e3,UE=3*60*1e3,WE=r=>{localStorage.setItem(Qf,r),localStorage.setItem(Jf,Date.now().toString()),console.log(`Stored lobby code: ${r}`)},HE=()=>{const r=localStorage.getItem(Qf),o=localStorage.getItem(Jf);return!r||!o?null:Date.now()-parseInt(o)>zE?(Sc(),console.log("Lobby code expired, cleared from storage"),null):r},GE=()=>{const r=localStorage.getItem(eh);return r?Date.now()-parseInt(r)>UE:!0},XE=()=>{localStorage.setItem(eh,Date.now().toString())},Sc=()=>{localStorage.removeItem(Qf),localStorage.removeItem(Jf),localStorage.removeItem(eh),console.log("Cleared lobby storage")},YE=()=>{const[r,o]=N.useState(!1),[a,f]=N.useState(!1),[p,x]=N.useState(""),[y,A]=N.useState(""),[v,E]=N.useState(""),[S,I]=N.useState(null);mf();const{user:R,userProfile:M,checkAuth:L,permissions:B}=N.useContext(Jn),[j,z]=N.useState(null),[U,V]=N.useState(null),[ee,re]=N.useState([]),[ne,q]=N.useState(!1),[le,K]=N.useState(null),Re=Wn();Wm(z,V);const[Be,Ne]=N.useState(!1);N.useRef(null);const Le=N.useRef(null),Se=async(ce=!1)=>{const W=HE();if(!W||!R){K(null);return}if(K(W),ce||GE())try{const Y=localStorage.getItem("access_token"),pe=await fetch(`${window.server_url}/display_lobby_metadata?lobby_code=${W}`,{headers:{Authorization:`Bearer ${Y}`,lobby_code:W}});if(pe.ok){const ve=await pe.json();ve.status==="error"||ve.lobby_state==="terminated"?(Sc(),K(null)):XE()}else Sc(),K(null)}catch(Y){console.error("Error validating current lobby:",Y),K(null)}},Q=async()=>{if(R){q(!0);try{const ce=localStorage.getItem("access_token"),W=await fetch(window.server_url+"/view_my_active_lobbies",{headers:{Authorization:`Bearer ${ce}`}});if(W.ok){const Y=await W.json();console.log("User's active lobbies:",Y),Y&&Y.lobbies&&Array.isArray(Y.lobbies)?re(Y.lobbies):re([])}else console.error("Failed to fetch user's active lobbies"),re([])}catch(ce){console.error("Error fetching user's active lobbies:",ce),re([])}finally{q(!1)}}};N.useEffect(()=>{R?(Q(),Se(!0)):K(null)},[R]),N.useEffect(()=>{L()},[]),N.useEffect(()=>{if(new URLSearchParams(window.location.search).get("showLobbyModal")==="true"&&R){f(!0);const Y=window.location.pathname;window.history.replaceState({},"",Y)}},[R]);const Fe=ce=>{(B==="admin"||B==="organizer")&&Re(`/admin_lobby_view?code=${ce}`)},ge=ce=>{ce.preventDefault();const Y=new FormData(ce.target).get("name");if(!Y||Y.trim()===""){A("Please enter a lobby code");return}const pe=Y.toLowerCase().replace(/[^a-z0-9]/g,"");if(pe===""){A("Lobby code must contain only letters and numbers");return}E(pe),f(!1),console.log(pe),x(pe),Re(`/lobby?code=${pe}`),x(""),A("")},me=()=>{Ne(!1),Le.current&&(Le.current.clear(),Le.current=null)},ze=()=>a?w.jsx("div",{className:"lobby-modal-overlay",children:w.jsxs("div",{className:"lobby-modal-container",children:[w.jsx("button",{onClick:()=>{f(!1),x(""),A(""),me()},className:"lobby-modal-close",children:""}),w.jsx("h2",{className:"lobby-modal-title",children:"Join Lobby"}),w.jsxs("form",{onSubmit:ge,className:"lobby-form",children:[w.jsxs("div",{className:"lobby-input-container",children:[w.jsx("input",{type:"text",name:"name",placeholder:"Enter Lobby Code",className:"lobby-input",pattern:"[a-zA-Z0-9]+",title:"Only letters and numbers are allowed",required:!0}),y&&w.jsx("div",{className:"lobby-error-message",children:y})]}),w.jsx("button",{type:"submit",className:"lobby-submit-button",children:"Join"})]})]})}):null;return w.jsxs("div",{style:{position:"relative",height:"var(--viewport-height)",overflow:"hidden"},children:[w.jsxs("video",{className:"background-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,poster:"/assets/demo_app_home_video_cover.jpg",children:[w.jsx("source",{src:"/assets/demo_app_home_video_X2_small.mp4",type:"video/mp4"}),w.jsx("source",{src:"/assets/app_home_video_2.webm",type:"video/webm"}),w.jsx("img",{src:"/assets/demo_app_home_video_cover.jpg",alt:"Background fallback",style:{width:"100%",height:"100%",objectFit:"cover"}}),"Your browser does not support the video tag."]}),w.jsxs("div",{style:{position:"relative",zIndex:1,color:"white",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[w.jsx("div",{style:{position:"absolute",top:"0",left:"50%",transform:"translateX(-50%)"},children:w.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Logo",style:{width:"110px",height:"110px",objectFit:"contain"}})}),w.jsx("div",{style:{marginTop:"10%",display:"flex",flexDirection:"column"},children:w.jsx(ow,{user:R,onProfileClick:()=>o(!0)})}),w.jsx("div",{style:{position:"absolute",top:"85px",display:B==="admin"||B==="organizer"?"flex":"none",justifyContent:"flex-end",width:"94%",left:"3%",alignItems:"center"},children:(B==="admin"||B==="organizer")&&w.jsx("button",{className:"login-button",onClick:()=>Re("/organizer-account-details"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:ce=>{ce.currentTarget.style.transform="translateY(-2px)",ce.currentTarget.style.boxShadow="0 2px 8px rgba(74, 58, 58, 0.7)"},onMouseLeave:ce=>{ce.currentTarget.style.transform="translateY(0)",ce.currentTarget.style.boxShadow="0 0 4px rgba(74, 58, 58, 0.5)"},children:w.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Settings"})})}),(B==="admin"||B==="organizer")&&R==="topaz"&&w.jsx("div",{style:{position:"absolute",top:"120px",right:"20px",zIndex:10},children:w.jsx("button",{className:"master-lobbies-button",onClick:()=>Re("/master_lobby_view"),children:"Lobbies"})}),r&&w.jsx(R2,{onSubmit:ce=>{o(!1)},onClose:()=>o(!1),existingProfile:M}),w.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",width:"90%",maxWidth:"1200px",textAlign:"center",marginLeft:"auto",marginRight:"auto",zIndex:1,top:"50%"},children:R?w.jsx("h2",{className:"welcome-header",style:{color:"#ffffff",fontSize:"1rem",textTransform:"uppercase",letterSpacing:"0.1em",textShadow:"4px 4px 8px rgba(0,0,0,0.9)",margin:0},children:R&&M&&(B==="admin"||B==="organizer")?(()=>{const ce="Create a Lobby",W=M?M.name.slice(0,15):"";return w.jsxs(w.Fragment,{children:[ce.split("").map((Y,pe)=>w.jsx("span",{style:{"--i":pe+1,marginRight:Y===" "?"0.5em":"1px"},children:Y},`main-${pe}`)),w.jsx("br",{}),W&&W.split("").map((Y,pe)=>w.jsx("span",{style:{"--i":pe+1,marginRight:Y===" "?"0.5em":"1px"},children:Y},`name-${pe}`))]})})():(()=>{const ce="Join the Experience",W=M?M.name.slice(0,15):"";return w.jsxs(w.Fragment,{children:[ce.split("").map((Y,pe)=>w.jsx("span",{style:{"--i":pe+1,marginRight:Y===" "?"0.5em":"1px"},children:Y},`main-${pe}`)),w.jsx("br",{}),W&&W.split("").map((Y,pe)=>w.jsx("span",{style:{"--i":pe+1,marginRight:Y===" "?"0.5em":"1px"},children:Y},`name-${pe}`))]})})()}):w.jsx("button",{className:"primary-button join-lobby-button",onClick:()=>window.location.href="https://reuneo.app/access",style:{padding:"16px 20px",backgroundColor:"transparent",color:"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0 auto",display:"block",position:"relative",zIndex:1,textAlign:"center",outline:"none",":hover":{transform:"scale(1.02)"}},children:w.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Become Organizer"})})}),R&&w.jsx("div",{style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",width:"94%",display:"flex",flexDirection:"row",justifyContent:"center",gap:"1.5rem"},children:w.jsx("div",{className:"event-item",style:{width:"auto",maxWidth:"none",margin:"0",padding:"10px 20px",borderRadius:"16px",marginBottom:"20px",cursor:"pointer",opacity:1,display:"flex",flexDirection:"row",alignItems:"center",gap:"1.5rem",":hover":{transform:"translateY(-5px)"}},children:w.jsxs("div",{style:{display:"flex",gap:"1.5rem",flexDirection:"row",alignItems:"center"},children:[w.jsx("button",{className:`primary-button ${B!=="admin"&&B!=="organizer"?"join-lobby-button":""}`,onClick:()=>R?f(!0):Re("/signup?redirect=lobby"),disabled:j===null||U==="terminate",style:{opacity:1,cursor:j===null||U==="terminate"?"not-allowed":"pointer",padding:"16px 20px",backgroundColor:B!=="admin"&&B!=="organizer"?"transparent":"#144dff",color:"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0",display:"block",position:"relative",zIndex:1,textAlign:"center",outline:B!=="admin"&&B!=="organizer"?"none":"1px solid rgba(58, 53, 53, 0.7)",":hover":{backgroundColor:B!=="admin"&&B!=="organizer"?"transparent":"#535bf2",transform:"scale(1.02)"}},children:w.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Join Lobby"})}),R&&B!=="admin"&&B!=="organizer"&&w.jsx("button",{className:"primary-button join-lobby-button",onClick:()=>window.location.href="https://reuneo.com/organizer-signup",style:{padding:"16px 20px",backgroundColor:"transparent",color:"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0",display:"block",position:"relative",zIndex:1,textAlign:"center",outline:"none",":hover":{transform:"scale(1.02)"}},children:w.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Become Organizer"})}),(B==="admin"||B==="organizer")&&w.jsx("button",{className:`primary-button ${B==="admin"||B==="organizer"?"create-lobby-button":""}`,onClick:ee.length>0?void 0:()=>Re("/create_lobby"),disabled:ee.length>0,title:ee.length>0?"You already have an active lobby. Close it before creating a new one.":"Create a new lobby",style:{padding:"16px 20px",backgroundColor:ee.length>0?"rgba(128, 128, 128, 0.3)":"transparent",color:ee.length>0?"rgba(255, 255, 255, 0.5)":"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:ee.length>0?"0 2px 3px rgba(0, 0, 0, 0.2)":"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0",position:"relative",zIndex:1,textAlign:"center",cursor:ee.length>0?"not-allowed":"pointer",opacity:ee.length>0?.6:1,":hover":{transform:ee.length>0?"none":"scale(1.02)"}},children:w.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Create Lobby"})})]})})}),le&&!((B==="admin"||B==="organizer")&&ee.length>0)&&w.jsx("div",{className:"events-list",style:{position:"absolute",bottom:"calc(20px + 120px + 10px)",left:"50%",transform:"translateX(-50%)",width:"44%",height:"15%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.05), rgba(83, 91, 242, 0.05))",borderRadius:"30px",padding:"1rem",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",justifyContent:"center",alignItems:"center"},children:w.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",perspective:"1000px"},children:w.jsxs("div",{className:"card",style:{width:"calc(100% - 2rem)",maxWidth:"200px",minWidth:"150px",background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",boxShadow:"0 10px 30px rgba(20, 77, 255, 0.15)",border:"1px solid rgba(20, 77, 255, 0.2)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",padding:"1rem 1rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",transformStyle:"preserve-3d","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(20, 77, 255, 0.1), rgba(83, 91, 242, 0.1))",opacity:0,transition:"opacity 0.4s ease"}},onClick:()=>Re(`/lobby?code=${le}`),onMouseEnter:ce=>{ce.currentTarget.style.transform="translateY(-10px) rotateX(5deg)",ce.currentTarget.style.boxShadow="0 20px 40px rgba(20, 77, 255, 0.25)",ce.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.4)",ce.currentTarget.style.background="rgba(255, 255, 255, 0.98)"},onMouseLeave:ce=>{ce.currentTarget.style.transform="translateY(0) rotateX(0)",ce.currentTarget.style.boxShadow="0 10px 30px rgba(20, 77, 255, 0.15)",ce.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.2)",ce.currentTarget.style.background="rgba(255, 255, 255, 0.95)"},children:[w.jsx("div",{className:"glow-button",style:{width:"30px",height:"30px",borderRadius:"50%",background:"linear-gradient(135deg, #144dff, #535bf2)",marginBottom:".5rem",marginTop:"-1rem",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:".8rem",boxShadow:"0 8px 20px rgba(20, 77, 255, 0.3)",transition:"all 0.4s ease",position:"relative","&::after":{content:'""',position:"absolute",top:"-5px",left:"-5px",right:"-5px",bottom:"-5px",borderRadius:"50%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.2), rgba(83, 91, 242, 0.2))",zIndex:-1,animation:"pulse 2s infinite"}},children:le.charAt(0).toUpperCase()}),w.jsxs("h3",{style:{marginTop:"0.5rem",color:"#144dff",fontWeight:"700",fontSize:".9em",fontFamily:"Helvetica",textAlign:"center",textShadow:"0 2px 4px rgba(20, 77, 255, 0.1)",letterSpacing:"0.5px"},children:["Return to ",le]})]})})}),(B==="admin"||B==="organizer")&&ee.length>0&&w.jsx("div",{className:"events-list",style:{position:"absolute",bottom:le&&!((B==="admin"||B==="organizer")&&ee.length>0)?"calc(20px + 120px + 10px + 15% + 10px)":"calc(20px + 120px + 10px)",left:"50%",transform:"translateX(-50%)",width:"44%",height:"15%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.05), rgba(83, 91, 242, 0.05))",borderRadius:"30px",padding:"1rem",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",justifyContent:"center",alignItems:"center"},children:ne?w.jsx("div",{style:{textAlign:"center",color:"white"},children:w.jsx("p",{children:"Loading your lobbies..."})}):ee.length>0?w.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",perspective:"1000px"},children:ee.map((ce,W)=>w.jsxs("div",{className:"card",style:{width:"calc(100% - 2rem)",maxWidth:"200px",minWidth:"150px",background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",boxShadow:"0 10px 30px rgba(20, 77, 255, 0.15)",border:"1px solid rgba(20, 77, 255, 0.2)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",padding:"1rem 1rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",transformStyle:"preserve-3d","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(20, 77, 255, 0.1), rgba(83, 91, 242, 0.1))",opacity:0,transition:"opacity 0.4s ease"}},onClick:()=>Fe(ce),onMouseEnter:Y=>{Y.currentTarget.style.transform="translateY(-10px) rotateX(5deg)",Y.currentTarget.style.boxShadow="0 20px 40px rgba(20, 77, 255, 0.25)",Y.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.4)",Y.currentTarget.style.background="rgba(255, 255, 255, 0.98)"},onMouseLeave:Y=>{Y.currentTarget.style.transform="translateY(0) rotateX(0)",Y.currentTarget.style.boxShadow="0 10px 30px rgba(20, 77, 255, 0.15)",Y.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.2)",Y.currentTarget.style.background="rgba(255, 255, 255, 0.95)"},children:[w.jsx("div",{className:"glow-button",style:{width:"30px",height:"30px",borderRadius:"50%",background:"linear-gradient(135deg, #144dff, #535bf2)",marginBottom:".5rem",marginTop:"-1rem",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:".8rem",boxShadow:"0 8px 20px rgba(20, 77, 255, 0.3)",transition:"all 0.4s ease",position:"relative","&::after":{content:'""',position:"absolute",top:"-5px",left:"-5px",right:"-5px",bottom:"-5px",borderRadius:"50%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.2), rgba(83, 91, 242, 0.2))",zIndex:-1,animation:"pulse 2s infinite"}},children:ce&&ce.length>0?ce.charAt(0).toUpperCase():"?"}),w.jsxs("h3",{style:{marginTop:"0.5rem",color:"#144dff",fontWeight:"700",fontSize:".9em",fontFamily:"Helvetica",textAlign:"center",textShadow:"0 2px 4px rgba(20, 77, 255, 0.1)",letterSpacing:"0.5px"},children:["Lobby ",ce||"Unknown"]})]},W))}):w.jsx("div",{style:{}})})]}),w.jsx(ze,{})]})};function $E(){const{pathname:r}=Mr();return N.useEffect(()=>{window.scrollTo(0,0)},[r]),null}function ZE(){const{pathname:r}=Mr(),o=r.startsWith("/organizer-dashboard");return N.useEffect(()=>{const a=document.getElementById("root"),f=document.body;return o?(a==null||a.classList.add("dashboard-view"),f==null||f.classList.add("dashboard-view")):(a==null||a.classList.remove("dashboard-view"),f==null||f.classList.remove("dashboard-view")),()=>{a==null||a.classList.remove("dashboard-view"),f==null||f.classList.remove("dashboard-view")}},[r,o]),null}const KE=()=>{const{login:r,signup:o,user:a,logout:f,checkAuth:p}=N.useContext(Jn),[x,y]=N.useState(""),[A,v]=N.useState(""),[E,S]=N.useState(""),[I,R]=N.useState(""),[M,L]=N.useState(!0),[B,j]=N.useState({}),[z,U]=N.useState(!1),V=Wn(),ee=le=>{const K=/^[a-z0-9]+$/;return le.length>=2&&K.test(le)},re=le=>{const K=le.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");y(K),K.length>0?U(!0):U(!1),ee(K)?j(Re=>({...Re,username:""})):j(Re=>({...Re,username:" "}))},ne=le=>{const K=le.target.value.toLowerCase();v(K)},q=async le=>{if(le.preventDefault(),R(""),!ee(x)){R("Please enter a valid username");return}try{const K=M?"/login":"/signup",Re=await fetch(window.server_url+K,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:x,password:A}),mode:"cors"});if(Re.ok){const Be=await Re.json();r(Be),p(),V("/")}else{const Be=await Re.json();R(Be.message||`${M?"Login":"Signup"} failed`)}}catch(K){R("Network error occurred. Please try again."),console.error("Error:",K)}};return w.jsxs("div",{className:"login-container",children:[w.jsx("button",{onClick:()=>V("/"),className:"homescreen-button",children:"Home"}),w.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),w.jsx("h1",{className:"login-header",children:"Login"}),w.jsxs("div",{className:"login-signup-form",children:[I&&w.jsx("div",{className:"error-message",children:I}),w.jsxs("form",{onSubmit:q,children:[w.jsxs("div",{className:"form-group",children:[w.jsx("input",{type:"text",placeholder:"Username",className:"login-input",value:x,onChange:re,required:!0}),z&&w.jsx("div",{className:"step-success",children:"lowercase letters and numbers only"})]}),w.jsx("div",{className:"form-group",children:w.jsx("input",{type:"text",placeholder:"Password",className:"login-input",value:A,onChange:ne,required:!0})}),w.jsx("button",{type:"submit",className:"login-primary-button",children:"Login"})]})]})]})},qE=()=>{const r=Wn(),{logout:o}=N.useContext(Jn);return localStorage.removeItem("access_token"),N.useEffect(()=>{console.log("LogoutPage useEffect"),setTimeout(()=>{o(),r("/")},100)},[]),w.jsx("div",{children:"Logged out redirecting to homescreen"})};var QE=Object.defineProperty,Tc=Object.getOwnPropertySymbols,Hm=Object.prototype.hasOwnProperty,Gm=Object.prototype.propertyIsEnumerable,Vp=(r,o,a)=>o in r?QE(r,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[o]=a,tf=(r,o)=>{for(var a in o||(o={}))Hm.call(o,a)&&Vp(r,a,o[a]);if(Tc)for(var a of Tc(o))Gm.call(o,a)&&Vp(r,a,o[a]);return r},nf=(r,o)=>{var a={};for(var f in r)Hm.call(r,f)&&o.indexOf(f)<0&&(a[f]=r[f]);if(r!=null&&Tc)for(var f of Tc(r))o.indexOf(f)<0&&Gm.call(r,f)&&(a[f]=r[f]);return a};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var eo;(r=>{const o=class Mt{constructor(v,E,S,I){if(this.version=v,this.errorCorrectionLevel=E,this.modules=[],this.isFunction=[],v<Mt.MIN_VERSION||v>Mt.MAX_VERSION)throw new RangeError("Version value out of range");if(I<-1||I>7)throw new RangeError("Mask value out of range");this.size=v*4+17;let R=[];for(let L=0;L<this.size;L++)R.push(!1);for(let L=0;L<this.size;L++)this.modules.push(R.slice()),this.isFunction.push(R.slice());this.drawFunctionPatterns();const M=this.addEccAndInterleave(S);if(this.drawCodewords(M),I==-1){let L=1e9;for(let B=0;B<8;B++){this.applyMask(B),this.drawFormatBits(B);const j=this.getPenaltyScore();j<L&&(I=B,L=j),this.applyMask(B)}}p(0<=I&&I<=7),this.mask=I,this.applyMask(I),this.drawFormatBits(I),this.isFunction=[]}static encodeText(v,E){const S=r.QrSegment.makeSegments(v);return Mt.encodeSegments(S,E)}static encodeBinary(v,E){const S=r.QrSegment.makeBytes(v);return Mt.encodeSegments([S],E)}static encodeSegments(v,E,S=1,I=40,R=-1,M=!0){if(!(Mt.MIN_VERSION<=S&&S<=I&&I<=Mt.MAX_VERSION)||R<-1||R>7)throw new RangeError("Invalid value");let L,B;for(L=S;;L++){const V=Mt.getNumDataCodewords(L,E)*8,ee=y.getTotalBits(v,L);if(ee<=V){B=ee;break}if(L>=I)throw new RangeError("Data too long")}for(const V of[Mt.Ecc.MEDIUM,Mt.Ecc.QUARTILE,Mt.Ecc.HIGH])M&&B<=Mt.getNumDataCodewords(L,V)*8&&(E=V);let j=[];for(const V of v){a(V.mode.modeBits,4,j),a(V.numChars,V.mode.numCharCountBits(L),j);for(const ee of V.getData())j.push(ee)}p(j.length==B);const z=Mt.getNumDataCodewords(L,E)*8;p(j.length<=z),a(0,Math.min(4,z-j.length),j),a(0,(8-j.length%8)%8,j),p(j.length%8==0);for(let V=236;j.length<z;V^=253)a(V,8,j);let U=[];for(;U.length*8<j.length;)U.push(0);return j.forEach((V,ee)=>U[ee>>>3]|=V<<7-(ee&7)),new Mt(L,E,U,R)}getModule(v,E){return 0<=v&&v<this.size&&0<=E&&E<this.size&&this.modules[E][v]}getModules(){return this.modules}drawFunctionPatterns(){for(let S=0;S<this.size;S++)this.setFunctionModule(6,S,S%2==0),this.setFunctionModule(S,6,S%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const v=this.getAlignmentPatternPositions(),E=v.length;for(let S=0;S<E;S++)for(let I=0;I<E;I++)S==0&&I==0||S==0&&I==E-1||S==E-1&&I==0||this.drawAlignmentPattern(v[S],v[I]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(v){const E=this.errorCorrectionLevel.formatBits<<3|v;let S=E;for(let R=0;R<10;R++)S=S<<1^(S>>>9)*1335;const I=(E<<10|S)^21522;p(I>>>15==0);for(let R=0;R<=5;R++)this.setFunctionModule(8,R,f(I,R));this.setFunctionModule(8,7,f(I,6)),this.setFunctionModule(8,8,f(I,7)),this.setFunctionModule(7,8,f(I,8));for(let R=9;R<15;R++)this.setFunctionModule(14-R,8,f(I,R));for(let R=0;R<8;R++)this.setFunctionModule(this.size-1-R,8,f(I,R));for(let R=8;R<15;R++)this.setFunctionModule(8,this.size-15+R,f(I,R));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let v=this.version;for(let S=0;S<12;S++)v=v<<1^(v>>>11)*7973;const E=this.version<<12|v;p(E>>>18==0);for(let S=0;S<18;S++){const I=f(E,S),R=this.size-11+S%3,M=Math.floor(S/3);this.setFunctionModule(R,M,I),this.setFunctionModule(M,R,I)}}drawFinderPattern(v,E){for(let S=-4;S<=4;S++)for(let I=-4;I<=4;I++){const R=Math.max(Math.abs(I),Math.abs(S)),M=v+I,L=E+S;0<=M&&M<this.size&&0<=L&&L<this.size&&this.setFunctionModule(M,L,R!=2&&R!=4)}}drawAlignmentPattern(v,E){for(let S=-2;S<=2;S++)for(let I=-2;I<=2;I++)this.setFunctionModule(v+I,E+S,Math.max(Math.abs(I),Math.abs(S))!=1)}setFunctionModule(v,E,S){this.modules[E][v]=S,this.isFunction[E][v]=!0}addEccAndInterleave(v){const E=this.version,S=this.errorCorrectionLevel;if(v.length!=Mt.getNumDataCodewords(E,S))throw new RangeError("Invalid argument");const I=Mt.NUM_ERROR_CORRECTION_BLOCKS[S.ordinal][E],R=Mt.ECC_CODEWORDS_PER_BLOCK[S.ordinal][E],M=Math.floor(Mt.getNumRawDataModules(E)/8),L=I-M%I,B=Math.floor(M/I);let j=[];const z=Mt.reedSolomonComputeDivisor(R);for(let V=0,ee=0;V<I;V++){let re=v.slice(ee,ee+B-R+(V<L?0:1));ee+=re.length;const ne=Mt.reedSolomonComputeRemainder(re,z);V<L&&re.push(0),j.push(re.concat(ne))}let U=[];for(let V=0;V<j[0].length;V++)j.forEach((ee,re)=>{(V!=B-R||re>=L)&&U.push(ee[V])});return p(U.length==M),U}drawCodewords(v){if(v.length!=Math.floor(Mt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let E=0;for(let S=this.size-1;S>=1;S-=2){S==6&&(S=5);for(let I=0;I<this.size;I++)for(let R=0;R<2;R++){const M=S-R,B=(S+1&2)==0?this.size-1-I:I;!this.isFunction[B][M]&&E<v.length*8&&(this.modules[B][M]=f(v[E>>>3],7-(E&7)),E++)}}p(E==v.length*8)}applyMask(v){if(v<0||v>7)throw new RangeError("Mask value out of range");for(let E=0;E<this.size;E++)for(let S=0;S<this.size;S++){let I;switch(v){case 0:I=(S+E)%2==0;break;case 1:I=E%2==0;break;case 2:I=S%3==0;break;case 3:I=(S+E)%3==0;break;case 4:I=(Math.floor(S/3)+Math.floor(E/2))%2==0;break;case 5:I=S*E%2+S*E%3==0;break;case 6:I=(S*E%2+S*E%3)%2==0;break;case 7:I=((S+E)%2+S*E%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[E][S]&&I&&(this.modules[E][S]=!this.modules[E][S])}}getPenaltyScore(){let v=0;for(let R=0;R<this.size;R++){let M=!1,L=0,B=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[R][j]==M?(L++,L==5?v+=Mt.PENALTY_N1:L>5&&v++):(this.finderPenaltyAddHistory(L,B),M||(v+=this.finderPenaltyCountPatterns(B)*Mt.PENALTY_N3),M=this.modules[R][j],L=1);v+=this.finderPenaltyTerminateAndCount(M,L,B)*Mt.PENALTY_N3}for(let R=0;R<this.size;R++){let M=!1,L=0,B=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[j][R]==M?(L++,L==5?v+=Mt.PENALTY_N1:L>5&&v++):(this.finderPenaltyAddHistory(L,B),M||(v+=this.finderPenaltyCountPatterns(B)*Mt.PENALTY_N3),M=this.modules[j][R],L=1);v+=this.finderPenaltyTerminateAndCount(M,L,B)*Mt.PENALTY_N3}for(let R=0;R<this.size-1;R++)for(let M=0;M<this.size-1;M++){const L=this.modules[R][M];L==this.modules[R][M+1]&&L==this.modules[R+1][M]&&L==this.modules[R+1][M+1]&&(v+=Mt.PENALTY_N2)}let E=0;for(const R of this.modules)E=R.reduce((M,L)=>M+(L?1:0),E);const S=this.size*this.size,I=Math.ceil(Math.abs(E*20-S*10)/S)-1;return p(0<=I&&I<=9),v+=I*Mt.PENALTY_N4,p(0<=v&&v<=2568888),v}getAlignmentPatternPositions(){if(this.version==1)return[];{const v=Math.floor(this.version/7)+2,E=this.version==32?26:Math.ceil((this.version*4+4)/(v*2-2))*2;let S=[6];for(let I=this.size-7;S.length<v;I-=E)S.splice(1,0,I);return S}}static getNumRawDataModules(v){if(v<Mt.MIN_VERSION||v>Mt.MAX_VERSION)throw new RangeError("Version number out of range");let E=(16*v+128)*v+64;if(v>=2){const S=Math.floor(v/7)+2;E-=(25*S-10)*S-55,v>=7&&(E-=36)}return p(208<=E&&E<=29648),E}static getNumDataCodewords(v,E){return Math.floor(Mt.getNumRawDataModules(v)/8)-Mt.ECC_CODEWORDS_PER_BLOCK[E.ordinal][v]*Mt.NUM_ERROR_CORRECTION_BLOCKS[E.ordinal][v]}static reedSolomonComputeDivisor(v){if(v<1||v>255)throw new RangeError("Degree out of range");let E=[];for(let I=0;I<v-1;I++)E.push(0);E.push(1);let S=1;for(let I=0;I<v;I++){for(let R=0;R<E.length;R++)E[R]=Mt.reedSolomonMultiply(E[R],S),R+1<E.length&&(E[R]^=E[R+1]);S=Mt.reedSolomonMultiply(S,2)}return E}static reedSolomonComputeRemainder(v,E){let S=E.map(I=>0);for(const I of v){const R=I^S.shift();S.push(0),E.forEach((M,L)=>S[L]^=Mt.reedSolomonMultiply(M,R))}return S}static reedSolomonMultiply(v,E){if(v>>>8||E>>>8)throw new RangeError("Byte out of range");let S=0;for(let I=7;I>=0;I--)S=S<<1^(S>>>7)*285,S^=(E>>>I&1)*v;return p(S>>>8==0),S}finderPenaltyCountPatterns(v){const E=v[1];p(E<=this.size*3);const S=E>0&&v[2]==E&&v[3]==E*3&&v[4]==E&&v[5]==E;return(S&&v[0]>=E*4&&v[6]>=E?1:0)+(S&&v[6]>=E*4&&v[0]>=E?1:0)}finderPenaltyTerminateAndCount(v,E,S){return v&&(this.finderPenaltyAddHistory(E,S),E=0),E+=this.size,this.finderPenaltyAddHistory(E,S),this.finderPenaltyCountPatterns(S)}finderPenaltyAddHistory(v,E){E[0]==0&&(v+=this.size),E.pop(),E.unshift(v)}};o.MIN_VERSION=1,o.MAX_VERSION=40,o.PENALTY_N1=3,o.PENALTY_N2=3,o.PENALTY_N3=40,o.PENALTY_N4=10,o.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],o.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],r.QrCode=o;function a(A,v,E){if(v<0||v>31||A>>>v)throw new RangeError("Value out of range");for(let S=v-1;S>=0;S--)E.push(A>>>S&1)}function f(A,v){return(A>>>v&1)!=0}function p(A){if(!A)throw new Error("Assertion error")}const x=class mn{constructor(v,E,S){if(this.mode=v,this.numChars=E,this.bitData=S,E<0)throw new RangeError("Invalid argument");this.bitData=S.slice()}static makeBytes(v){let E=[];for(const S of v)a(S,8,E);return new mn(mn.Mode.BYTE,v.length,E)}static makeNumeric(v){if(!mn.isNumeric(v))throw new RangeError("String contains non-numeric characters");let E=[];for(let S=0;S<v.length;){const I=Math.min(v.length-S,3);a(parseInt(v.substring(S,S+I),10),I*3+1,E),S+=I}return new mn(mn.Mode.NUMERIC,v.length,E)}static makeAlphanumeric(v){if(!mn.isAlphanumeric(v))throw new RangeError("String contains unencodable characters in alphanumeric mode");let E=[],S;for(S=0;S+2<=v.length;S+=2){let I=mn.ALPHANUMERIC_CHARSET.indexOf(v.charAt(S))*45;I+=mn.ALPHANUMERIC_CHARSET.indexOf(v.charAt(S+1)),a(I,11,E)}return S<v.length&&a(mn.ALPHANUMERIC_CHARSET.indexOf(v.charAt(S)),6,E),new mn(mn.Mode.ALPHANUMERIC,v.length,E)}static makeSegments(v){return v==""?[]:mn.isNumeric(v)?[mn.makeNumeric(v)]:mn.isAlphanumeric(v)?[mn.makeAlphanumeric(v)]:[mn.makeBytes(mn.toUtf8ByteArray(v))]}static makeEci(v){let E=[];if(v<0)throw new RangeError("ECI assignment value out of range");if(v<128)a(v,8,E);else if(v<16384)a(2,2,E),a(v,14,E);else if(v<1e6)a(6,3,E),a(v,21,E);else throw new RangeError("ECI assignment value out of range");return new mn(mn.Mode.ECI,0,E)}static isNumeric(v){return mn.NUMERIC_REGEX.test(v)}static isAlphanumeric(v){return mn.ALPHANUMERIC_REGEX.test(v)}getData(){return this.bitData.slice()}static getTotalBits(v,E){let S=0;for(const I of v){const R=I.mode.numCharCountBits(E);if(I.numChars>=1<<R)return 1/0;S+=4+R+I.bitData.length}return S}static toUtf8ByteArray(v){v=encodeURI(v);let E=[];for(let S=0;S<v.length;S++)v.charAt(S)!="%"?E.push(v.charCodeAt(S)):(E.push(parseInt(v.substring(S+1,S+3),16)),S+=2);return E}};x.NUMERIC_REGEX=/^[0-9]*$/,x.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,x.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let y=x;r.QrSegment=x})(eo||(eo={}));(r=>{(o=>{const a=class{constructor(p,x){this.ordinal=p,this.formatBits=x}};a.LOW=new a(0,1),a.MEDIUM=new a(1,0),a.QUARTILE=new a(2,3),a.HIGH=new a(3,2),o.Ecc=a})(r.QrCode||(r.QrCode={}))})(eo||(eo={}));(r=>{(o=>{const a=class{constructor(p,x){this.modeBits=p,this.numBitsCharCount=x}numCharCountBits(p){return this.numBitsCharCount[Math.floor((p+7)/17)]}};a.NUMERIC=new a(1,[10,12,14]),a.ALPHANUMERIC=new a(2,[9,11,13]),a.BYTE=new a(4,[8,16,16]),a.KANJI=new a(8,[8,10,12]),a.ECI=new a(7,[0,0,0]),o.Mode=a})(r.QrSegment||(r.QrSegment={}))})(eo||(eo={}));var Oo=eo;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var JE={L:Oo.QrCode.Ecc.LOW,M:Oo.QrCode.Ecc.MEDIUM,Q:Oo.QrCode.Ecc.QUARTILE,H:Oo.QrCode.Ecc.HIGH},Xm=128,Ym="L",$m="#FFFFFF",Zm="#000000",Km=!1,qm=1,eb=4,tb=0,nb=.1;function Qm(r,o=0){const a=[];return r.forEach(function(f,p){let x=null;f.forEach(function(y,A){if(!y&&x!==null){a.push(`M${x+o} ${p+o}h${A-x}v1H${x+o}z`),x=null;return}if(A===f.length-1){if(!y)return;x===null?a.push(`M${A+o},${p+o} h1v1H${A+o}z`):a.push(`M${x+o},${p+o} h${A+1-x}v1H${x+o}z`);return}y&&x===null&&(x=A)})}),a.join("")}function Jm(r,o){return r.slice().map((a,f)=>f<o.y||f>=o.y+o.h?a:a.map((p,x)=>x<o.x||x>=o.x+o.w?p:!1))}function rb(r,o,a,f){if(f==null)return null;const p=r.length+a*2,x=Math.floor(o*nb),y=p/o,A=(f.width||x)*y,v=(f.height||x)*y,E=f.x==null?r.length/2-A/2:f.x*y,S=f.y==null?r.length/2-v/2:f.y*y,I=f.opacity==null?1:f.opacity;let R=null;if(f.excavate){let L=Math.floor(E),B=Math.floor(S),j=Math.ceil(A+E-L),z=Math.ceil(v+S-B);R={x:L,y:B,w:j,h:z}}const M=f.crossOrigin;return{x:E,y:S,h:v,w:A,excavation:R,opacity:I,crossOrigin:M}}function ib(r,o){return o!=null?Math.max(Math.floor(o),0):r?eb:tb}function ex({value:r,level:o,minVersion:a,includeMargin:f,marginSize:p,imageSettings:x,size:y,boostLevel:A}){let v=tn.useMemo(()=>{const L=(Array.isArray(r)?r:[r]).reduce((B,j)=>(B.push(...Oo.QrSegment.makeSegments(j)),B),[]);return Oo.QrCode.encodeSegments(L,JE[o],a,void 0,void 0,A)},[r,o,a,A]);const{cells:E,margin:S,numCells:I,calculatedImageSettings:R}=tn.useMemo(()=>{let M=v.getModules();const L=ib(f,p),B=M.length+L*2,j=rb(M,y,L,x);return{cells:M,margin:L,numCells:B,calculatedImageSettings:j}},[v,y,x,f,p]);return{qrcode:v,margin:S,cells:E,numCells:I,calculatedImageSettings:R}}var sb=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),ob=tn.forwardRef(function(o,a){const f=o,{value:p,size:x=Xm,level:y=Ym,bgColor:A=$m,fgColor:v=Zm,includeMargin:E=Km,minVersion:S=qm,boostLevel:I,marginSize:R,imageSettings:M}=f,B=nf(f,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:j}=B,z=nf(B,["style"]),U=M==null?void 0:M.src,V=tn.useRef(null),ee=tn.useRef(null),re=tn.useCallback(Se=>{V.current=Se,typeof a=="function"?a(Se):a&&(a.current=Se)},[a]),[ne,q]=tn.useState(!1),{margin:le,cells:K,numCells:Re,calculatedImageSettings:Be}=ex({value:p,level:y,minVersion:S,boostLevel:I,includeMargin:E,marginSize:R,imageSettings:M,size:x});tn.useEffect(()=>{if(V.current!=null){const Se=V.current,Q=Se.getContext("2d");if(!Q)return;let Fe=K;const ge=ee.current,me=Be!=null&&ge!==null&&ge.complete&&ge.naturalHeight!==0&&ge.naturalWidth!==0;me&&Be.excavation!=null&&(Fe=Jm(K,Be.excavation));const ze=window.devicePixelRatio||1;Se.height=Se.width=x*ze;const ce=x/Re*ze;Q.scale(ce,ce),Q.fillStyle=A,Q.fillRect(0,0,Re,Re),Q.fillStyle=v,sb?Q.fill(new Path2D(Qm(Fe,le))):K.forEach(function(W,Y){W.forEach(function(pe,ve){pe&&Q.fillRect(ve+le,Y+le,1,1)})}),Be&&(Q.globalAlpha=Be.opacity),me&&Q.drawImage(ge,Be.x+le,Be.y+le,Be.w,Be.h)}}),tn.useEffect(()=>{q(!1)},[U]);const Ne=tf({height:x,width:x},j);let Le=null;return U!=null&&(Le=tn.createElement("img",{src:U,key:U,style:{display:"none"},onLoad:()=>{q(!0)},ref:ee,crossOrigin:Be==null?void 0:Be.crossOrigin})),tn.createElement(tn.Fragment,null,tn.createElement("canvas",tf({style:Ne,height:x,width:x,ref:re,role:"img"},z)),Le)});ob.displayName="QRCodeCanvas";var th=tn.forwardRef(function(o,a){const f=o,{value:p,size:x=Xm,level:y=Ym,bgColor:A=$m,fgColor:v=Zm,includeMargin:E=Km,minVersion:S=qm,boostLevel:I,title:R,marginSize:M,imageSettings:L}=f,B=nf(f,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:j,cells:z,numCells:U,calculatedImageSettings:V}=ex({value:p,level:y,minVersion:S,boostLevel:I,includeMargin:E,marginSize:M,imageSettings:L,size:x});let ee=z,re=null;L!=null&&V!=null&&(V.excavation!=null&&(ee=Jm(z,V.excavation)),re=tn.createElement("image",{href:L.src,height:V.h,width:V.w,x:V.x+j,y:V.y+j,preserveAspectRatio:"none",opacity:V.opacity,crossOrigin:V.crossOrigin}));const ne=Qm(ee,j);return tn.createElement("svg",tf({height:x,width:x,viewBox:`0 0 ${U} ${U}`,ref:a,role:"img"},B),!!R&&tn.createElement("title",null,R),tn.createElement("path",{fill:A,d:`M0,0 h${U}v${U}H0z`,shapeRendering:"crispEdges"}),tn.createElement("path",{fill:v,d:ne,shapeRendering:"crispEdges"}),re)});th.displayName="QRCodeSVG";const ab=({player:r})=>w.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"350px",height:"500px",margin:"0 auto",position:"relative"},children:r!=null&&r.image_data?w.jsxs("div",{style:{position:"relative",width:"350px",height:"450px"},children:[w.jsx("img",{src:`data:image/jpeg;base64,${r.image_data}`,alt:r.name,style:{width:"350px",height:"450px",objectFit:"cover",borderRadius:"50px",boxShadow:"0 6px 12px rgba(0, 0, 0, 0.3)",margin:"auto",display:"block"},onError:o=>{console.error("Image failed to load:",o),o.target.style.display="none"}}),w.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",backgroundColor:"#144dff",color:"white",padding:"12px 0",borderBottomLeftRadius:"50px",borderBottomRightRadius:"50px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",fontFamily:"Helvetica, Arial, sans-serif",boxShadow:"0 -4px 10px rgba(0, 0, 0, 0.1)",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.2)"},children:r.name})]}):w.jsxs("div",{style:{width:"350px",height:"450px",backgroundColor:"#f0f0f0",borderRadius:"50px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"relative"},children:[w.jsx("p",{style:{marginBottom:"60px"},children:"No image available"}),w.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",backgroundColor:"#144dff",color:"white",padding:"12px 0",borderBottomLeftRadius:"50px",borderBottomRightRadius:"50px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",fontFamily:"Helvetica, Arial, sans-serif",boxShadow:"0 -4px 10px rgba(0, 0, 0, 0.1)",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.2)"},children:r.name})]})});var zp=typeof window>"u"?N.useEffect:N.useLayoutEffect,lb=({isPlaying:r,duration:o,startAt:a=0,updateInterval:f=0,onComplete:p,onUpdate:x})=>{let[y,A]=N.useState(a),v=N.useRef(0),E=N.useRef(a),S=N.useRef(a*-1e3),I=N.useRef(null),R=N.useRef(null),M=N.useRef(null),L=z=>{let U=z/1e3;if(R.current===null){R.current=U,I.current=requestAnimationFrame(L);return}let V=U-R.current,ee=v.current+V;R.current=U,v.current=ee;let re=E.current+(f===0?ee:(ee/f|0)*f),ne=E.current+ee,q=typeof o=="number"&&ne>=o;A(q?o:re),q||(I.current=requestAnimationFrame(L))},B=()=>{I.current&&cancelAnimationFrame(I.current),M.current&&clearTimeout(M.current),R.current=null},j=N.useCallback(z=>{B(),v.current=0;let U=typeof z=="number"?z:a;E.current=U,A(U),r&&(I.current=requestAnimationFrame(L))},[r,a]);return zp(()=>{if(x==null||x(y),o&&y>=o){S.current+=o*1e3;let{shouldRepeat:z=!1,delay:U=0,newStartAt:V}=(p==null?void 0:p(S.current/1e3))||{};z&&(M.current=setTimeout(()=>j(V),U*1e3))}},[y,o]),zp(()=>(r&&(I.current=requestAnimationFrame(L)),B),[r,o,f]),{elapsedTime:y,reset:j}},cb=(r,o,a)=>{let f=r/2,p=o/2,x=f-p,y=2*x,A=a==="clockwise"?"1,0":"0,1",v=2*Math.PI*x;return{path:`m ${f},${p} a ${x},${x} 0 ${A} 0,${y} a ${x},${x} 0 ${A} 0,-${y}`,pathLength:v}},Up=(r,o)=>r===0||r===o?0:typeof o=="number"?r-o:0,ub=r=>({position:"relative",width:r,height:r}),db={display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,top:0,width:"100%",height:"100%"},tx=(r,o,a,f,p)=>{if(f===0)return o;let x=(p?f-r:r)/f;return o+a*x},Wp=r=>{var o,a;return(a=(o=r.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(f,p,x,y)=>`#${p}${p}${x}${x}${y}${y}`).substring(1).match(/.{2}/g))==null?void 0:o.map(f=>parseInt(f,16)))!=null?a:[]},fb=(r,o)=>{var a;let{colors:f,colorsTime:p,isSmoothColorTransition:x=!0}=r;if(typeof f=="string")return f;let y=(a=p==null?void 0:p.findIndex((R,M)=>R>=o&&o>=p[M+1]))!=null?a:-1;if(!p||y===-1)return f[0];if(!x)return f[y];let A=p[y]-o,v=p[y]-p[y+1],E=Wp(f[y]),S=Wp(f[y+1]),I=!!r.isGrowing;return`rgb(${E.map((R,M)=>tx(A,R,S[M]-R,v,I)|0).join(",")})`},hb=r=>{let{duration:o,initialRemainingTime:a,updateInterval:f,size:p=180,strokeWidth:x=12,trailStrokeWidth:y,isPlaying:A=!1,isGrowing:v=!1,rotation:E="clockwise",onComplete:S,onUpdate:I}=r,R=N.useRef(),M=Math.max(x,y??0),{path:L,pathLength:B}=cb(p,M,E),{elapsedTime:j}=lb({isPlaying:A,duration:o,startAt:Up(o,a),updateInterval:f,onUpdate:typeof I=="function"?U=>{let V=Math.ceil(o-U);V!==R.current&&(R.current=V,I(V))}:void 0,onComplete:typeof S=="function"?U=>{var V;let{shouldRepeat:ee,delay:re,newInitialRemainingTime:ne}=(V=S(U))!=null?V:{};if(ee)return{shouldRepeat:ee,delay:re,newStartAt:Up(o,ne)}}:void 0}),z=o-j;return{elapsedTime:j,path:L,pathLength:B,remainingTime:Math.ceil(z),rotation:E,size:p,stroke:fb(r,z),strokeDashoffset:tx(j,0,B,o,v),strokeWidth:x}},nh=r=>{let{children:o,strokeLinecap:a,trailColor:f,trailStrokeWidth:p}=r,{path:x,pathLength:y,stroke:A,strokeDashoffset:v,remainingTime:E,elapsedTime:S,size:I,strokeWidth:R}=hb(r);return tn.createElement("div",{style:ub(I)},tn.createElement("svg",{viewBox:`0 0 ${I} ${I}`,width:I,height:I,xmlns:"http://www.w3.org/2000/svg"},tn.createElement("path",{d:x,fill:"none",stroke:f??"#d9d9d9",strokeWidth:p??R}),tn.createElement("path",{d:x,fill:"none",stroke:A,strokeLinecap:a??"round",strokeWidth:R,strokeDasharray:y,strokeDashoffset:v})),typeof o=="function"&&tn.createElement("div",{style:db},o({remainingTime:E,elapsedTime:S,color:A})))};nh.displayName="CountdownCircleTimer";const pb=({onComplete:r})=>{const[o,a]=N.useState(7),[f,p]=N.useState(!1),x=N.useRef(null),y=N.useRef(null);N.useEffect(()=>(x.current&&clearTimeout(x.current),y.current&&clearInterval(y.current),y.current=setInterval(()=>{p(!0),x.current=setTimeout(()=>{a(v=>v<=1?(y.current&&clearInterval(y.current),x.current&&clearTimeout(x.current),r&&r(),0):v-1),p(!1)},500)},1e3),()=>{y.current&&clearInterval(y.current),x.current&&clearTimeout(x.current)}),[r]);const A=f?"pop-burst":"";return w.jsx("div",{className:"lobby-countdown-overlay",children:w.jsxs("div",{className:`lobby-countdown-container ${A}`,children:[w.jsx("div",{className:"lobby-countdown-number",children:o}),w.jsx("div",{className:"lobby-countdown-text",children:o>0?"Get ready!":"Starting..."})]})})},gb=({onComplete:r,lobbyCode:o="this"})=>{const{userProfile:a}=N.useContext(Jn),[f,p]=N.useState(0),[x,y]=N.useState(!1),[A,v]=N.useState(!1),[E,S]=N.useState([0]),[I,R]=N.useState(!1),M=N.useRef(null),L=N.useRef(null),B=[{image:"/assets/how_to_tutorial_updated_slide1.svg",duration:2e3,animatedText:"Find your match using their profile picture!"},{image:"/assets/how_to_pt2_2.svg",duration:4e3,animatedText:"Raise volume to the max, to know when you have a match!"},{image:"/assets/how_to_tutorial_updated_slide3.svg",duration:4e3,animatedText:"Tap leave to stop being paired/take a break"}];return N.useEffect(()=>{const j=()=>{if(f>=B.length-1){clearInterval(M.current),r&&r();return}y(!0);const z=f+1;S([f,z]),L.current=setTimeout(()=>{R(!1),p(z),y(!1),setTimeout(()=>{S([z]),v(!0),B[z].animatedText&&R(!0)},500)},500)};return M.current=setInterval(j,B[f].duration),v(!0),f===0&&B[0].animatedText&&R(!0),()=>{M.current&&clearInterval(M.current),L.current&&clearTimeout(L.current)}},[f,B.length,r]),w.jsx("div",{className:"tutorial-overlay",children:w.jsxs("div",{className:"tutorial-container",children:[E.map(j=>w.jsxs("div",{className:`tutorial-slide ${j===f?"current":j<f?"previous":"next"}`,children:[j===f&&B[j].animatedText&&I&&w.jsx("div",{className:"animated-text pop-burst",children:B[j].animatedText}),j===1&&w.jsx("div",{className:"volume-arrow-container",children:w.jsx("svg",{className:"volume-arrow",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{d:"M19 12H5M5 12L12 5M5 12L12 19",stroke:"#144dff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),w.jsx("div",{className:`tutorial-image-container ${j===0?"first-slide":""}`,children:w.jsx("img",{src:B[j].image,alt:`Tutorial step ${j+1}`,className:"tutorial-image"})}),w.jsx("div",{className:`tutorial-text ${A&&j===f?"text-animate":""}`,children:B[j].text})]},j)),w.jsx("div",{className:"tutorial-progress-bar-container",children:w.jsx("div",{className:"tutorial-progress-bar",children:w.jsx("div",{className:"tutorial-progress-bar-fill"})})})]})})},mb=({isVisible:r,onAnimationEnd:o})=>{const[a,f]=N.useState(!1),p=N.useRef(null);return N.useEffect(()=>(p.current&&clearTimeout(p.current),r?(f(!0),p.current=setTimeout(()=>{f(!1),o&&o()},3e3)):f(!1),()=>{p.current&&(clearTimeout(p.current),p.current=null)}),[r,o]),a?w.jsxs("div",{className:"match-overlay",children:[w.jsxs("div",{className:"confetti-container",children:[[...Array(50)].map((x,y)=>w.jsx("div",{className:`confetti confetti-${y%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":Math.random()*.2}},`first-${y}`)),[...Array(50)].map((x,y)=>w.jsx("div",{className:`confetti confetti-${y%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":`${.6+Math.random()*.2}s`}},`second-${y}`))]}),w.jsx("div",{className:"match-text",children:"It's a Match!"})]}):null},xb=({isVisible:r,onAnimationEnd:o})=>{const[a,f]=N.useState(!1),p=N.useRef(null);return N.useEffect(()=>(p.current&&clearTimeout(p.current),r?(f(!0),p.current=setTimeout(()=>{f(!1),o&&o()},1800)):f(!1),()=>{p.current&&(clearTimeout(p.current),p.current=null)}),[r,o]),a?w.jsxs("div",{className:"ready-overlay",children:[w.jsxs("div",{className:"confetti-container",children:[[...Array(50)].map((x,y)=>w.jsx("div",{className:`confetti confetti-${y%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":Math.random()*.2}},`first-${y}`)),[...Array(50)].map((x,y)=>w.jsx("div",{className:`confetti confetti-${y%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":`${.6+Math.random()*.2}s`}},`second-${y}`))]}),w.jsx("div",{className:"ready-text",children:"You're ready!"})]}):null},ac=9,yb=5,wb=5e3,vb=!1,Cb=()=>{const r=Math.floor(540),[o,a]=N.useState([]),[f,p]=N.useState("self"),[x,y]=N.useState(!1),[A,v]=N.useState(""),E=N.useRef(null),S=N.useRef(null),[I,R]=N.useState(!1),M=N.useRef(!1),[L,B]=N.useState(!1),{loadSound:j,seekTo:z,cancelSound:U,checkSound:V,soundEnabled:ee,setSoundEnabled:re,isPlaying:ne}=mf(),[q,le]=N.useState("yonder"),K=Wn(),{code:Re}=oy(),[Be,Ne]=N.useState(null);Wm(Ne,null,q);const{user:Le,userProfile:Se,checkAuth:Q,permissions:Fe}=N.useContext(Jn);N.useEffect(()=>{(async()=>{if(localStorage.getItem("access_token"))try{Le||await Q()}catch(ot){console.error("Authentication error:",ot);const We=new URLSearchParams(window.location.search).get("code")||Re;K(We?`/signup?redirect=lobby&code=${We}`:"/signup?redirect=lobby")}else{await fetch(window.server_url+"/debug?username="+Le+"&message=no token on the lobby page",{method:"GET"});const It=new URLSearchParams(window.location.search).get("code")||Re;K(It?`/signup?redirect=lobby&code=${It}`:"/signup?redirect=lobby")}})()},[K,Re,Q,Le]),N.useEffect(()=>{(()=>{const ot=new URLSearchParams(window.location.search).get("code")||Re;if(ot){le(ot),WE(ot),pt(ot);const It=`hasSeenTutorial_${ot}`,We=localStorage.getItem(It),Gn=!!localStorage.getItem("access_token");console.log("Tutorial check:",{codeParam:ot,lobbyTutorialKey:It,hasSeenLobbyTutorial:We,isAuthenticated:Gn}),!We&&Gn&&(Zr(!0),localStorage.setItem(It,"true"))}})()},[Re]);const[ge,me]=N.useState(null),[ze,ce]=N.useState(null),[W,Y]=N.useState(null),[pe,ve]=N.useState(null),[Ee,ie]=N.useState(null),be=N.useRef(!1),Ae=N.useRef(null),Ve=N.useRef(null),[De,tt]=N.useState(null),[ue,ye]=N.useState(null),[Xe,ht]=N.useState(null),[Pt,xt]=N.useState(null),[Je,nt]=N.useState(!0),Nt=N.useRef(0),[Pe,yn]=N.useState(null),[Ct,we]=N.useState(null),[He,qe]=N.useState([]),[ut,Ge]=N.useState([]),[At,Wt]=N.useState(!document.hidden),Ht=N.useRef("yonder"),Gt=N.useRef({}),Ue=N.useRef([]),[xe,gt]=N.useState(!1),dt=N.useRef(null),[Dt,Dn]=N.useState(!1);N.useEffect(()=>{Ht.current=q},[q]);async function Dr($e,Et){const ot=localStorage.getItem("access_token"),We=await(await fetch(window.server_url+"/set_profile_info",{method:"POST",headers:{Authorization:`Bearer ${ot}`,"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},mode:"cors",body:JSON.stringify({tags_work:$e,tags_desiring_work:Et})})).json();console.log("SET PROFILE INFO:",We)}const Hn=async $e=>{if($e.length!==0){gt(!0);try{const Et=localStorage.getItem("access_token"),ot=await fetch(`${window.server_url}/load_batch_pfp_small_icons`,{method:"POST",headers:{Authorization:`Bearer ${Et}`,"Content-Type":"application/json",lobby_code:Ht.current},body:JSON.stringify({usernames:$e})});if(ot.ok){const It=await ot.json();Gt.current={...Gt.current,...It},console.log("Profile images fetched:",Object.keys(It))}else console.error("Failed to fetch profile images:",ot.status)}catch(Et){console.error("Error fetching profile images:",Et)}finally{gt(!1)}}},pt=async $e=>{try{const Et=await fetch(`${window.server_url}/lobby_setup_data`,{headers:{lobby_code:$e}});if(Et.ok){const ot=await Et.json();ot.logo_icon?(dt.current=ot.logo_icon,Dn(!0),console.log("Sponsor logo loaded successfully")):console.log("No sponsor logo available for this lobby")}else console.error("Failed to fetch lobby setup data:",Et.status)}catch(Et){console.error("Error fetching lobby setup data:",Et)}};async function Ln(){try{const $e=localStorage.getItem("access_token");U(),Gt.current={},Ue.current=[],(await fetch(window.server_url+"/disconnect_lobby",{headers:{Authorization:`Bearer ${$e}`,lobby_code:q}})).ok&&K("/")}catch($e){console.error("Error disconnecting from lobby:",$e),K("/")}finally{U(),K("/"),console.log("finally")}}const[As,Wi]=N.useState(!1),[er,Hi]=N.useState(null),on=N.useRef(!1),[Lr,oi]=N.useState(!1),[An,Gi]=N.useState(null),dr=($e,Et)=>{if(!$e||!Et)return null;for(const ot of $e.tags_work)if(Et.desiring_tags_work.includes(ot)){for(const It of Et.tags_work)if($e.desiring_tags_work.includes(It))return{playerTag:ot,opponentTag:It}}return null};async function ai(){try{Nt.current+=1,Nt.current>5&&(Nt.current=0,be.current=!1);const $e=localStorage.getItem("access_token"),Et=!document.hidden,ot=Ht.current;if(console.log("lobby code fr:",ot),ot=="yonder"){console.log("lobby code is not set");return}const It=await fetch(`${window.server_url}/lobby?is_visible=${Et}`,{headers:{Authorization:`Bearer ${$e}`,is_visible_t_f:Et?"t":"f",lobby_code:ot}});if(It.ok){const We=await It.json();console.log("LOBBY PAIR DATA:",ot,We),We.status=="inactive"&&(U(),K("/")),Y(We.opponent_name),We.opponent_name==null&&me(null),a(We.custom_tags),tt(We.lobby_state),xt(We.lobby_duration);const Gn=typeof We.round_time_left=="number"&&!isNaN(We.round_time_left)?We.round_time_left:0;console.log("Timer Debug:",{roundDuration:We.lobby_duration,timeLeft:Gn,lobbyState:We.lobby_state,usingDefaultDuration:!We.lobby_duration}),Ae.current=Gn,Ve.current=We.beat_go_off,ye(Math.floor(Gn));const Vt=Math.floor(Gn/60),Ss=Math.floor(Gn%60);ht(`${Vt}:${Ss.toString().padStart(2,"0")}`),ie(We.table_number),We.player_tags!=null&&We.player_tags.tags_work!=null&&qe(We.player_tags.tags_work),We.player_tags!=null&&We.player_tags.desiring_tags_work!=null&&Ge(We.player_tags.desiring_tags_work),Ae.current!=null&&We.lobby_state=="active"&&Ae.current!=0&&(z(r-Ae.current),console.log("seeking to",r-Ae.current));const Ce=await fetch(`${window.server_url}/display_lobby_metadata?lobby_code=${ot}`,{headers:{Authorization:`Bearer ${$e}`,lobby_code:ot}});if(Ce.ok){const yr=await Ce.json();Ne(yr.player_count);const Bt=yr.usernames||[];if(JSON.stringify(Ue.current)!==JSON.stringify(Bt)){Ue.current=Bt;const Yi=Bt.filter(Rt=>!Gt.current[Rt]&&Rt!==(Le==null?void 0:Le.username));Yi.length>0&&(vb||(console.log("Fetching images for new users:",Yi),Hn(Yi)))}}if((W!=We.opponent_name||ge==null)&&!be.current&&We.opponent_name!=null){be.current=!0,console.log("fetching profile");const yr=await fetch(window.server_url+"/paired_player_profile",{headers:{Authorization:`Bearer ${$e}`}});if(yr.ok){const Bt=await yr.json();me(Bt),console.log("profile fetched:",Bt.name)}else console.log("profile fetch failed");be.current=!1}if(er==="interrim"&&We.lobby_state==="active"&&We.opponent_name&&!on.current){console.log("Checking for matches...");const yr=dr(We.player_tags,We.opponent_tags);yr&&(console.log("Match found! Setting animation and banner...",yr),Gi(yr),oi(!0),on.current=!0,Wi(!0))}Hi(We.lobby_state)}}catch($e){console.error("Error fetching lobby data:",$e)}}N.useEffect(()=>{V()?re(!0):re(!1);const $e=setInterval(async()=>{ai()},wb);return()=>clearInterval($e)},[]),N.useEffect(()=>{const $e=setTimeout(ai,1e3);return()=>clearTimeout($e)},[De,q]),N.useEffect(()=>{const $e=()=>{const Et=!document.hidden;Et&&!At&&(console.log("Page became visible - fetching latest data"),ai()),Wt(Et)};return document.addEventListener("visibilitychange",$e),()=>{document.removeEventListener("visibilitychange",$e)}},[At]);const fn=()=>w.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.125)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},children:w.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",position:"relative",minWidth:"300px"},children:[w.jsx("button",{onClick:()=>nt(!1),style:{color:"#144fff",position:"absolute",right:"10px",top:"10px",border:"none",background:"none",fontSize:"2px",cursor:"pointer"},children:"X"}),w.jsx("h2",{style:{marginTop:"5px"},children:"The Sound is Important"}),w.jsx("h3",{style:{marginTop:"5px"},children:"Raise your volume also"}),w.jsx("p",{style:{color:"#144dff"},children:"You'll need this for the best experience."}),w.jsx("button",{onClick:()=>{j(),nt(!1)},style:{padding:"10px 20px",marginTop:"20px",backgroundColor:"#144dff",color:"#ffffff",border:"none",borderRadius:"14px",fontWeight:"bold",cursor:"pointer"},children:"Enable Sound"})]})}),fr=($e,Et)=>{Pe==null&&yn(He),Ct==null&&we(ut);const ot=$e==="self"?Pe:Ct;if(!(ot!=null&&ot.includes(Et))&&(ot==null?void 0:ot.length)>=yb){v("Reached tag limit for this section"),setTimeout(()=>{var We;(We=S.current)==null||We.scrollIntoView({behavior:"smooth",block:"center"})},100),setTimeout(()=>{v("")},3e3);return}$e==="self"?yn(We=>We.includes(Et)?We.filter(Gn=>Gn!==Et):[...We,Et]):we(We=>We.includes(Et)?We.filter(Gn=>Gn!==Et):[...We,Et])},In=()=>{Pe!=null&&(Dr(Pe,Ct||[]),setTimeout(()=>{qe(Pe||[])},800)),p("desiring"),setTimeout(()=>{var $e;($e=E.current)==null||$e.scrollIntoView({behavior:"smooth",block:"start"})},100)},Ye=()=>{Ct!=null&&(Dr(Pe||[],Ct),setTimeout(()=>{qe(Pe||[]),Ge(Ct)},800),setTimeout(()=>{M.current||(M.current=!0,R(!0),B(!0))},500)),window.scrollTo({top:0,behavior:"smooth"})},[li,Xi]=N.useState(!1);N.useEffect(()=>{if(De==="interrim")Xi(!0);else if(De==="active"){const $e=setTimeout(()=>{Xi(!1)},1e3);return()=>clearTimeout($e)}},[De]);const Bn=()=>{console.log("Lobby countdown animation completed")},[tr,Zr]=N.useState(!1),Ei=()=>{Zr(!1)};N.useEffect(()=>{(De!=="active"||!ge)&&(oi(!1),Gi(null))},[De,ge]),N.useEffect(()=>{De==="terminated"&&(Gt.current={},Ue.current=[],Sc())},[De]);const nr=N.useRef(null);return N.useEffect(()=>{var $e;!x&&!(He!=null&&He.length)&&!(ut!=null&&ut.length)&&(o==null?void 0:o.length)>0&&(($e=nr.current)==null||$e.scrollIntoView({behavior:"smooth"}),y(!0))},[He,ut,o,x]),w.jsxs("div",{className:"lobby-container",children:[w.jsxs("div",{className:"lobby-content",children:[w.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0",marginTop:"-1.5rem"},children:w.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",style:{maxWidth:"85px",height:"auto",objectFit:"contain"}})}),(De==="checkin"||De==="active"&&!ge||De==="interrim")&&w.jsx("div",{className:"user-profile-container",children:w.jsxs("div",{className:"user-profile",children:[w.jsx("img",{src:Se!=null&&Se.image_data?`data:image/jpeg;base64,${Se.image_data}`:"/assets/avatar_3.png",alt:"Your Profile",className:"user-profile-picture"}),w.jsx("div",{className:"user-profile-glow"})]})}),w.jsx("div",{className:"lobby-header",style:{marginTop:"-50px"},children:w.jsx("h2",{children:o.length>0&&(He.length==0||ut.length==0)?w.jsxs(w.Fragment,{children:["You're not ready, complete your profile to get matched up.",w.jsx("button",{className:"missing-tags-button",onClick:()=>{var $e;return($e=nr.current)==null?void 0:$e.scrollIntoView({behavior:"smooth"})},children:"Complete Profile"})]}):De==="active"&&ge?w.jsxs("span",{className:"lobby-pop-burst",children:["Go find ",ge.name,"!"]}):De==="checkin"?w.jsxs(w.Fragment,{children:["Wait here ",Se.name.slice(0,15),".",w.jsx("br",{}),"Your host will start the experience."]}):De==="active"&&!ge?"You will be paired with someone in the next round.":De==="interrim"?"Get ready for the next round!":De==="terminated"?"This session has ended. Thank you for participating!":""})},De),De==="active"&&ge&&Ee&&w.jsx("div",{className:"table-number",children:w.jsxs("h3",{children:["at table: ",Ee]})}),(dt.current||De!=="checkin")&&w.jsxs("div",{className:`timer-sponsor-container ${dt.current&&De!=="checkin"?"has-timer":""}`,children:[dt.current&&w.jsx("div",{className:"sponsor-logo",children:w.jsx("img",{src:`data:image/jpeg;base64,${dt.current}`,alt:"Sponsor Logo",style:{width:"100px",height:"100px",objectFit:"contain"}})}),De!=="checkin"&&w.jsx("div",{className:"time-left",style:{display:"flex",flexDirection:"column",alignItems:"center",background:"white"},children:(De==="active"||De==="interrim")&&ue?w.jsxs(w.Fragment,{children:[w.jsx(nh,{isPlaying:De==="active",duration:Pt||300,initialRemainingTime:ue||0,colors:["#144dff"],size:90,strokeWidth:12,trailColor:"#f5f7ff",onComplete:()=>(ai(),{shouldRepeat:!1}),children:({remainingTime:$e})=>{const Et=typeof $e=="number"&&!isNaN($e)?$e:0,ot=Math.floor(Et/60),It=Math.floor(Et%60);return w.jsxs("span",{style:{fontSize:".95rem",color:"#144dff",fontWeight:600},children:[ot,":",String(It).padStart(2,"0")]})}},`${De}-${ue}`),w.jsx("span",{style:{fontWeight:700,fontSize:"0.7em",marginTop:"4px",opacity:"1",color:"#144dff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.1)"},children:"round time left"})]}):w.jsx("span",{className:"time-left-text"})})]}),Lr&&An&&De==="active"&&ge&&w.jsxs("div",{className:"match-banner",children:[w.jsx("span",{className:"match-tag",children:An.playerTag}),w.jsx("div",{className:"match-arrow"}),w.jsx("span",{className:"match-tag",children:An.opponentTag})]}),w.jsx("div",{style:{display:"flex",justifyContent:"center",width:"100%",margin:"0 auto"},children:De==="active"||De==="interrim"?ge?w.jsx("div",{style:{marginTop:"-3rem",width:"100%",display:"flex",justifyContent:"center"},children:w.jsx(ab,{player:ge})}):w.jsx(w.Fragment,{}):De==="terminated"?w.jsx("div",{className:"status-message",children:w.jsxs("h2",{children:["This session has ended.",w.jsx("br",{}),"Thank you for participating!"]})}):null}),(De==="checkin"||De==="active"&&!ge)&&Be!==null&&w.jsx("div",{className:"player-count-container",children:w.jsxs("div",{className:"player-count-widget",children:[w.jsxs("div",{className:"player-count-icon",children:[w.jsx("div",{className:"icon-pulse"}),w.jsx("img",{src:"/assets/players_display_icon2.png",alt:"Players in lobby",className:"player-count-img"})]}),w.jsxs("div",{className:"player-count-info",children:[w.jsx("span",{className:"player-count-number",children:Be}),w.jsx("span",{className:"player-count-label",children:"joined"})]}),w.jsx("div",{className:"player-count-lobby",children:q})]})}),(De==="checkin"||De==="active"&&!ge)&&w.jsx("div",{className:"lobby-profiles-container",children:w.jsx("div",{className:"lobby-profiles-grid",children:Be>0?w.jsxs(w.Fragment,{children:[Array.from({length:Math.min(Be,ac)}).map(($e,Et)=>{let ot;{const We=Ue.current[Et];We&&Gt.current[We]?ot=`data:image/jpeg;base64,${Gt.current[We]}`:ot="/assets/avatar_8.png"}return w.jsxs("div",{className:`profile-icon-wrapper ${Et===Math.min(Be,ac)-1?"pop-in":""}`,children:[w.jsx("img",{src:ot,alt:`Profile ${Et+1}`,className:"profile-icon",loading:"lazy"}),w.jsx("div",{className:"profile-icon-glow"})]},`profile-${Et}`)}),Be>ac&&w.jsx("div",{className:"profile-icon-wrapper more-profiles",children:w.jsxs("div",{className:"more-profiles-bubble",children:["+",Be-ac]})})]}):w.jsx("div",{children:"No profiles to display"})})}),(De==="checkin"||De==="active")&&w.jsxs("div",{className:"selected-tags-container",children:[He&&He.length>0&&w.jsxs("div",{className:"tag-category",children:[w.jsx("h4",{children:"I am:"}),w.jsx("div",{className:"tag-list",children:He.map($e=>w.jsx("span",{className:"tag-item",children:$e},`self-${$e}`))})]}),ut&&ut.length>0&&w.jsxs("div",{className:"tag-category",children:[w.jsx("h4",{children:"Looking for:"}),w.jsx("div",{className:"tag-list",children:ut.map($e=>w.jsx("span",{className:"tag-item",children:$e},`desiring-${$e}`))})]})]}),w.jsx("button",{className:"leave-lobby-button",onClick:Ln,children:"Take a Break"}),w.jsx("button",{className:"how-to-tutorial-button",onClick:()=>Zr(!0),children:"Tutorial"}),(Fe==="admin"||Fe==="organizer")&&w.jsx("button",{className:"admin-view-button",onClick:()=>K(`/admin_lobby_view?code=${q}`),children:"Manage"}),Array.isArray(o)&&o.length>0&&w.jsx("form",{onSubmit:$e=>{$e.preventDefault(),f==="self"?In():Ye()},children:w.jsxs("div",{className:"tags-section",ref:nr,children:[w.jsxs("div",{className:"progress-bar-container",children:[w.jsx("div",{className:`self-progress-bar-tab ${f==="self"?"active":""} ${He.length>0?"complete":""}`,onClick:()=>p("self"),children:" Who are you?"}),w.jsx("div",{className:`desiring-progress-bar-tab ${f==="desiring"?"active":""} ${ut.length>0?"complete":""}`,onClick:()=>He.length>0?p("desiring"):null,children:" Who do you want to meet?"})]}),w.jsxs("div",{className:`tag-group ${f==="self"?"active":"hidden"}`,children:[w.jsx("div",{className:"bounce-wrapper",children:w.jsx("h2",{children:"Who are you?"})}),w.jsx("div",{className:"tag-labels-container",children:o.map($e=>w.jsxs("label",{className:"tag-label",children:[w.jsx("input",{type:"checkbox",checked:Pe!=null?Pe.includes($e):He.includes($e),onChange:()=>fr("self",$e)}),$e]},`self-${$e}`))})]}),w.jsxs("div",{className:`tag-group ${f==="desiring"?"active":"hidden"}`,ref:E,children:[w.jsx("div",{className:"bounce-wrapper",children:w.jsx("h2",{children:"Who do you want to meet?"})}),w.jsx("div",{className:"tag-labels-container",children:o.map($e=>w.jsxs("label",{className:"tag-label",children:[w.jsx("input",{type:"checkbox",checked:Ct!=null?Ct.includes($e):ut.includes($e),onChange:()=>fr("desiring",$e)}),$e]},`desiring-${$e}`))})]}),w.jsx("button",{type:"submit",className:"tag-selection-button",ref:S,children:f==="self"?"Continue":"Save"}),A&&w.jsx("div",{style:{color:"#144dff",textAlign:"center",marginTop:"1rem",fontSize:"0.9rem",fontWeight:"600"},children:A})]})})]}),ee||!Je||De=="checkin"||De==null||ne?null:w.jsx(fn,{}),li&&!(o.length>0&&ut.length===0)&&w.jsx(pb,{onComplete:Bn}),tr&&w.jsx(gb,{onComplete:Ei,lobbyCode:q}),w.jsx(mb,{isVisible:As,onAnimationEnd:()=>{Wi(!1),on.current=!1}}),w.jsx(xb,{isVisible:I,onAnimationEnd:()=>{R(!1),M.current=!1}})]})};let Eb={data:""},bb=r=>typeof window=="object"?((r?r.querySelector("#_goober"):window._goober)||Object.assign((r||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:r||Eb,Ab=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Sb=/\/\*[^]*?\*\/|  +/g,Hp=/\n+/g,ys=(r,o)=>{let a="",f="",p="";for(let x in r){let y=r[x];x[0]=="@"?x[1]=="i"?a=x+" "+y+";":f+=x[1]=="f"?ys(y,x):x+"{"+ys(y,x[1]=="k"?"":o)+"}":typeof y=="object"?f+=ys(y,o?o.replace(/([^,])+/g,A=>x.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,v=>/&/.test(v)?v.replace(/&/g,A):A?A+" "+v:v)):x):y!=null&&(x=/^--/.test(x)?x:x.replace(/[A-Z]/g,"-$&").toLowerCase(),p+=ys.p?ys.p(x,y):x+":"+y+";")}return a+(o&&p?o+"{"+p+"}":p)+f},ji={},nx=r=>{if(typeof r=="object"){let o="";for(let a in r)o+=a+nx(r[a]);return o}return r},Tb=(r,o,a,f,p)=>{let x=nx(r),y=ji[x]||(ji[x]=(v=>{let E=0,S=11;for(;E<v.length;)S=101*S+v.charCodeAt(E++)>>>0;return"go"+S})(x));if(!ji[y]){let v=x!==r?r:(E=>{let S,I,R=[{}];for(;S=Ab.exec(E.replace(Sb,""));)S[4]?R.shift():S[3]?(I=S[3].replace(Hp," ").trim(),R.unshift(R[0][I]=R[0][I]||{})):R[0][S[1]]=S[2].replace(Hp," ").trim();return R[0]})(r);ji[y]=ys(p?{["@keyframes "+y]:v}:v,a?"":"."+y)}let A=a&&ji.g?ji.g:null;return a&&(ji.g=ji[y]),((v,E,S,I)=>{I?E.data=E.data.replace(I,v):E.data.indexOf(v)===-1&&(E.data=S?v+E.data:E.data+v)})(ji[y],o,f,A),y},Ib=(r,o,a)=>r.reduce((f,p,x)=>{let y=o[x];if(y&&y.call){let A=y(a),v=A&&A.props&&A.props.className||/^go/.test(A)&&A;y=v?"."+v:A&&typeof A=="object"?A.props?"":ys(A,""):A===!1?"":A}return f+p+(y??"")},"");function Dc(r){let o=this||{},a=r.call?r(o.p):r;return Tb(a.unshift?a.raw?Ib(a,[].slice.call(arguments,1),o.p):a.reduce((f,p)=>Object.assign(f,p&&p.call?p(o.p):p),{}):a,bb(o.target),o.g,o.o,o.k)}let rx,rf,sf;Dc.bind({g:1});let Ui=Dc.bind({k:1});function Nb(r,o,a,f){ys.p=o,rx=r,rf=a,sf=f}function bs(r,o){let a=this||{};return function(){let f=arguments;function p(x,y){let A=Object.assign({},x),v=A.className||p.className;a.p=Object.assign({theme:rf&&rf()},A),a.o=/ *go\d+/.test(v),A.className=Dc.apply(a,f)+(v?" "+v:"");let E=r;return r[0]&&(E=A.as||r,delete A.as),sf&&E[0]&&sf(A),rx(E,A)}return p}}var _b=r=>typeof r=="function",Ic=(r,o)=>_b(r)?r(o):r,Rb=(()=>{let r=0;return()=>(++r).toString()})(),ix=(()=>{let r;return()=>{if(r===void 0&&typeof window<"u"){let o=matchMedia("(prefers-reduced-motion: reduce)");r=!o||o.matches}return r}})(),kb=20,sx=(r,o)=>{switch(o.type){case 0:return{...r,toasts:[o.toast,...r.toasts].slice(0,kb)};case 1:return{...r,toasts:r.toasts.map(x=>x.id===o.toast.id?{...x,...o.toast}:x)};case 2:let{toast:a}=o;return sx(r,{type:r.toasts.find(x=>x.id===a.id)?1:0,toast:a});case 3:let{toastId:f}=o;return{...r,toasts:r.toasts.map(x=>x.id===f||f===void 0?{...x,dismissed:!0,visible:!1}:x)};case 4:return o.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(x=>x.id!==o.toastId)};case 5:return{...r,pausedAt:o.time};case 6:let p=o.time-(r.pausedAt||0);return{...r,pausedAt:void 0,toasts:r.toasts.map(x=>({...x,pauseDuration:x.pauseDuration+p}))}}},mc=[],qs={toasts:[],pausedAt:void 0},to=r=>{qs=sx(qs,r),mc.forEach(o=>{o(qs)})},Pb={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Ob=(r={})=>{let[o,a]=N.useState(qs),f=N.useRef(qs);N.useEffect(()=>(f.current!==qs&&a(qs),mc.push(a),()=>{let x=mc.indexOf(a);x>-1&&mc.splice(x,1)}),[]);let p=o.toasts.map(x=>{var y,A,v;return{...r,...r[x.type],...x,removeDelay:x.removeDelay||((y=r[x.type])==null?void 0:y.removeDelay)||(r==null?void 0:r.removeDelay),duration:x.duration||((A=r[x.type])==null?void 0:A.duration)||(r==null?void 0:r.duration)||Pb[x.type],style:{...r.style,...(v=r[x.type])==null?void 0:v.style,...x.style}}});return{...o,toasts:p}},Mb=(r,o="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:o,ariaProps:{role:"status","aria-live":"polite"},message:r,pauseDuration:0,...a,id:(a==null?void 0:a.id)||Rb()}),qa=r=>(o,a)=>{let f=Mb(o,r,a);return to({type:2,toast:f}),f.id},mr=(r,o)=>qa("blank")(r,o);mr.error=qa("error");mr.success=qa("success");mr.loading=qa("loading");mr.custom=qa("custom");mr.dismiss=r=>{to({type:3,toastId:r})};mr.remove=r=>to({type:4,toastId:r});mr.promise=(r,o,a)=>{let f=mr.loading(o.loading,{...a,...a==null?void 0:a.loading});return typeof r=="function"&&(r=r()),r.then(p=>{let x=o.success?Ic(o.success,p):void 0;return x?mr.success(x,{id:f,...a,...a==null?void 0:a.success}):mr.dismiss(f),p}).catch(p=>{let x=o.error?Ic(o.error,p):void 0;x?mr.error(x,{id:f,...a,...a==null?void 0:a.error}):mr.dismiss(f)}),r};var Db=(r,o)=>{to({type:1,toast:{id:r,height:o}})},Lb=()=>{to({type:5,time:Date.now()})},La=new Map,Bb=1e3,jb=(r,o=Bb)=>{if(La.has(r))return;let a=setTimeout(()=>{La.delete(r),to({type:4,toastId:r})},o);La.set(r,a)},Fb=r=>{let{toasts:o,pausedAt:a}=Ob(r);N.useEffect(()=>{if(a)return;let x=Date.now(),y=o.map(A=>{if(A.duration===1/0)return;let v=(A.duration||0)+A.pauseDuration-(x-A.createdAt);if(v<0){A.visible&&mr.dismiss(A.id);return}return setTimeout(()=>mr.dismiss(A.id),v)});return()=>{y.forEach(A=>A&&clearTimeout(A))}},[o,a]);let f=N.useCallback(()=>{a&&to({type:6,time:Date.now()})},[a]),p=N.useCallback((x,y)=>{let{reverseOrder:A=!1,gutter:v=8,defaultPosition:E}=y||{},S=o.filter(M=>(M.position||E)===(x.position||E)&&M.height),I=S.findIndex(M=>M.id===x.id),R=S.filter((M,L)=>L<I&&M.visible).length;return S.filter(M=>M.visible).slice(...A?[R+1]:[0,R]).reduce((M,L)=>M+(L.height||0)+v,0)},[o]);return N.useEffect(()=>{o.forEach(x=>{if(x.dismissed)jb(x.id,x.removeDelay);else{let y=La.get(x.id);y&&(clearTimeout(y),La.delete(x.id))}})},[o]),{toasts:o,handlers:{updateHeight:Db,startPause:Lb,endPause:f,calculateOffset:p}}},Vb=Ui`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,zb=Ui`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Ub=Ui`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Wb=bs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Vb} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${zb} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${r=>r.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Ub} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Hb=Ui`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Gb=bs("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${r=>r.secondary||"#e0e0e0"};
  border-right-color: ${r=>r.primary||"#616161"};
  animation: ${Hb} 1s linear infinite;
`,Xb=Ui`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Yb=Ui`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,$b=bs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Xb} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Yb} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${r=>r.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Zb=bs("div")`
  position: absolute;
`,Kb=bs("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,qb=Ui`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Qb=bs("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${qb} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Jb=({toast:r})=>{let{icon:o,type:a,iconTheme:f}=r;return o!==void 0?typeof o=="string"?N.createElement(Qb,null,o):o:a==="blank"?null:N.createElement(Kb,null,N.createElement(Gb,{...f}),a!=="loading"&&N.createElement(Zb,null,a==="error"?N.createElement(Wb,{...f}):N.createElement($b,{...f})))},eA=r=>`
0% {transform: translate3d(0,${r*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,tA=r=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${r*-150}%,-1px) scale(.6); opacity:0;}
`,nA="0%{opacity:0;} 100%{opacity:1;}",rA="0%{opacity:1;} 100%{opacity:0;}",iA=bs("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,sA=bs("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,oA=(r,o)=>{let a=r.includes("top")?1:-1,[f,p]=ix()?[nA,rA]:[eA(a),tA(a)];return{animation:o?`${Ui(f)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ui(p)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},aA=N.memo(({toast:r,position:o,style:a,children:f})=>{let p=r.height?oA(r.position||o||"top-center",r.visible):{opacity:0},x=N.createElement(Jb,{toast:r}),y=N.createElement(sA,{...r.ariaProps},Ic(r.message,r));return N.createElement(iA,{className:r.className,style:{...p,...a,...r.style}},typeof f=="function"?f({icon:x,message:y}):N.createElement(N.Fragment,null,x,y))});Nb(N.createElement);var lA=({id:r,className:o,style:a,onHeightUpdate:f,children:p})=>{let x=N.useCallback(y=>{if(y){let A=()=>{let v=y.getBoundingClientRect().height;f(r,v)};A(),new MutationObserver(A).observe(y,{subtree:!0,childList:!0,characterData:!0})}},[r,f]);return N.createElement("div",{ref:x,className:o,style:a},p)},cA=(r,o)=>{let a=r.includes("top"),f=a?{top:0}:{bottom:0},p=r.includes("center")?{justifyContent:"center"}:r.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:ix()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${o*(a?1:-1)}px)`,...f,...p}},uA=Dc`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,lc=16,rh=({reverseOrder:r,position:o="top-center",toastOptions:a,gutter:f,children:p,containerStyle:x,containerClassName:y})=>{let{toasts:A,handlers:v}=Fb(a);return N.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:lc,left:lc,right:lc,bottom:lc,pointerEvents:"none",...x},className:y,onMouseEnter:v.startPause,onMouseLeave:v.endPause},A.map(E=>{let S=E.position||o,I=v.calculateOffset(E,{reverseOrder:r,gutter:f,defaultPosition:o}),R=cA(S,I);return N.createElement(lA,{id:E.id,key:E.id,onHeightUpdate:v.updateHeight,className:E.visible?uA:"",style:R},E.type==="custom"?Ic(E.message,E):p?p(E):N.createElement(aA,{toast:E,position:S}))}))},Un=mr;const Nd=({direction:r="down",show:o=!0,className:a="",style:f={}})=>{if(!o)return null;const p=r==="down"?"rotate(180 16 16)":"";return w.jsxs("div",{className:`arrow-hint-container ${r} ${a}`,style:f,children:[w.jsx("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"arrow-hint-svg",children:w.jsxs("g",{transform:p,children:[w.jsx("path",{d:"M16 6v16M16 22l-7-7M16 22l7-7",stroke:"url(#arrow-gradient)",strokeWidth:"3.2",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#arrow-glow)"}),w.jsxs("defs",{children:[w.jsxs("linearGradient",{id:"arrow-gradient",x1:"16",y1:"6",x2:"16",y2:"22",gradientUnits:"userSpaceOnUse",children:[w.jsx("stop",{stopColor:"#7f5fff"}),w.jsx("stop",{offset:"0.5",stopColor:"#2e8bff"}),w.jsx("stop",{offset:"1",stopColor:"#00e0ff"})]}),w.jsx("filter",{id:"arrow-glow",x:"-10",y:"-10",width:"52",height:"52",filterUnits:"userSpaceOnUse",children:w.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"2.5",floodColor:"#7f5fff",floodOpacity:"0.5"})})]})]})}),w.jsx("div",{className:"arrow-hint-text",children:"Tap Here"})]})},dA=({isOpen:r,onClose:o,onConfirm:a,userName:f})=>r?w.jsx("div",{className:"kick-modal",children:w.jsxs("div",{className:"kick-modal-content",children:[w.jsx("h2",{className:"kick-modal-title",children:"Kick User"}),w.jsxs("p",{className:"kick-modal-message",children:["Are you sure you want to kick ",f," from the lobby?"]}),w.jsxs("div",{className:"kick-modal-actions",children:[w.jsx("button",{onClick:a,className:"admin-button admin-button-danger",children:"Yes, Kick User"}),w.jsx("button",{onClick:o,className:"admin-button admin-button-primary",children:"Cancel"})]})]})}):null,fA=({isOpen:r,onClose:o,onConfirm:a})=>r?w.jsx("div",{className:"join-modal",children:w.jsxs("div",{className:"join-modal-content",children:[w.jsx("h2",{className:"join-modal-title",children:"Join Lobby"}),w.jsx("p",{className:"join-modal-message",children:"Are you sure you want to join? You will be paired up with your attendees."}),w.jsxs("div",{className:"join-modal-actions",children:[w.jsx("button",{onClick:a,className:"admin-button admin-button-join",children:"Yes, Join Lobby"}),w.jsx("button",{onClick:o,className:"admin-button admin-button-primary",children:"Cancel"})]})]})}):null,ox=(r,o)=>new Promise((a,f)=>{const x=new XMLSerializer().serializeToString(r),y=800,A=1e3,v=document.createElement("canvas");v.width=y,v.height=A;const E=v.getContext("2d");E.fillStyle="#ffffff",E.fillRect(0,0,y,A);const S=new window.Image;S.crossOrigin="anonymous",S.onload=()=>{const I=new window.Image;I.onload=()=>{const B=S.width/S.height*180,j=36,z=28,U=550,V=22,ee=182+V,re=j+V*1.2,ne=z+32,q=ee+re,le=ne,K=A-q-le,Re=q+(K-U)/2-35,Be=(y-U)/2;let Ne=2;const Le=(y-B)/2;E.drawImage(S,Le,Ne,B,180),Ne+=180+V,E.fillStyle="#000000",E.font=`600 ${j}px Helvetica, Arial, sans-serif`,E.textAlign="center",E.textBaseline="top",E.fillText("Scan to join the ice-breaking session!",y/2,Ne),Ne+=j+V*1.2,E.drawImage(I,Be,Re,U,U);const Q=A-32-z;E.font=`${z}px Helvetica, Arial, sans-serif`,E.fillStyle="#000000",E.textBaseline="top";const Fe=`code (optional): ${o}`;E.fillText(Fe,y/2,Q),v.toBlob(ge=>{ge?a(ge):f(new Error("Failed to create blob"))},"image/png")},I.onerror=()=>f(new Error("Failed to load QR code image")),I.src="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(x)))},S.onerror=()=>f(new Error("Failed to load logo image")),S.src="/assets/reuneo_test_9.png"}),hA=({lobbyState:r,playerCount:o,onStart:a,onEnd:f,lobbyCode:p,currentRound:x})=>{const y=r==="checkin",A=o>=2&&r==="checkin",v=r==="active",E=r==="active",S=r==="terminated",[I,R]=N.useState(null),[M,L]=N.useState({qr:!1}),[B,j]=N.useState(!1),z=N.useRef(!1),U=()=>{R("start")},V=()=>{R("end")},ee=()=>{j(!0),R("checkin")},re=()=>{I==="start"?(a(),Un.success("Rounds started!",{position:"top-center"})):I==="end"&&f(),R(null)},ne=()=>R(null);N.useEffect(()=>{z.current||r==="checkin"&&o===0&&(z.current=!0,j(!0),R("checkin"))},[r,o]);const q=(Le,Se)=>Le?"progress-arrow active-shimmer":Se?"progress-arrow available-shimmer":"progress-arrow inactive",le=y&&!B&&o<6,K=r==="checkin"&&o>=6,Re=r==="active"&&x+1>=12;function Be(Le,Se={}){const{silent:Q=!1}=Se,Fe=URL.createObjectURL(Le),ge=document.createElement("a");ge.href=Fe,ge.download=`reuneo-lobby-${p}.png`,document.body.appendChild(ge),ge.click(),document.body.removeChild(ge),URL.revokeObjectURL(Fe),Q||(L(me=>({...me,qr:!0})),setTimeout(()=>L(me=>({...me,qr:!1})),800))}const Ne=()=>{const Le=document.getElementById("modal-qr-svg");Le&&ox(Le,p).then(Se=>{Be(Se,{silent:!0}),navigator.clipboard&&navigator.clipboard.write?navigator.clipboard.write([new window.ClipboardItem({"image/png":Se})]).then(()=>{L(Q=>({...Q,qr:!0})),setTimeout(()=>L(Q=>({...Q,qr:!1})),800)}).catch(()=>{L(Q=>({...Q,qr:!0})),setTimeout(()=>L(Q=>({...Q,qr:!1})),800)}):(L(Q=>({...Q,qr:!0})),setTimeout(()=>L(Q=>({...Q,qr:!1})),800))}).catch(Se=>{console.error("Error generating QR code image:",Se),alert("Failed to generate QR code image.")})};return w.jsxs("div",{className:"lobby-progress-bar",style:{marginTop:"-1rem",height:"40px"},children:[w.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[w.jsx("div",{className:q(y,!1),tabIndex:0,title:"Check-in phase",onClick:ee,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"Start Checkin"}),w.jsx(Nd,{direction:"down",show:le})]}),w.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[w.jsx("div",{className:q(v,A&&!v),tabIndex:0,title:A?"Start rounds":"At least 2 players required",onClick:U,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"Start Rounds"}),w.jsx(Nd,{direction:"down",show:K})]}),w.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[w.jsx("div",{className:q(S,E&&!S),tabIndex:0,title:E?"End rounds":"Cannot end yet",onClick:V,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"End Rounds"}),w.jsx(Nd,{direction:"down",show:Re})]}),I&&w.jsx("div",{className:"progress-modal-overlay",children:w.jsx("div",{className:"progress-modal",children:I==="checkin"?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"progress-modal-title",children:"Check-in: Print or Display this QR code to your attendees"}),w.jsx("div",{className:"progress-modal-message",children:"They scan to join. Once you have 6-10 people ready, click 'Start Rounds' - New arrivals will get paired up in the next rounds."}),w.jsxs("div",{className:"progress-modal-qr",onClick:Ne,style:{cursor:"pointer",position:"relative"},children:[w.jsx(th,{value:`${window.location.origin}/lobby?code=${p}`,size:200,level:"H",includeMargin:!1,bgColor:"#ffffff",fgColor:"#000000",id:"modal-qr-svg"}),w.jsx("span",{className:"copy-icon modal-copy-icon","aria-label":"Copy",style:{position:"absolute",right:8,bottom:8,background:"#fff",borderRadius:"50%",padding:"2px"},children:w.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[w.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),w.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})}),M.qr&&w.jsx("span",{className:"modal-copied-feedback",style:{position:"absolute",left:"50%",bottom:"-1.5rem",transform:"translateX(-50%)",color:"#28a745",fontWeight:600,fontSize:"0.95rem"},children:"Copied!"})]}),w.jsxs("div",{style:{textAlign:"center",marginTop:"1rem",marginBottom:"0.5rem",fontSize:"1rem",color:"#3b3b3b",fontFamily:"Helvetica, Arial, sans-serif"},children:["code (optional): ",p]}),w.jsx("div",{className:"progress-modal-actions",children:w.jsx("button",{className:"progress-modal-btn confirm",onClick:ne,children:"Got it"})})]}):w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"progress-modal-title",children:I==="start"?"Are you sure you want to start rounds? - Dont worry new people can join in the next rounds.":"Are you sure you want to end the rounds?"}),w.jsx("div",{className:"progress-modal-actions",children:I==="start"?w.jsxs(w.Fragment,{children:[w.jsx("button",{className:"progress-modal-btn cancel",onClick:ne,children:"Not Yet"}),w.jsx("button",{className:"progress-modal-btn confirm",onClick:re,children:"Start"})]}):w.jsxs(w.Fragment,{children:[w.jsx("button",{className:"progress-modal-btn cancel",onClick:ne,children:"Keep Going"}),w.jsx("button",{className:"progress-modal-btn confirm danger",onClick:re,children:"End"})]})})]})})})]})},pA=({players:r})=>{const o=[...r.pairedPlayers?r.pairedPlayers.flat():[],...r.lobbyData?r.lobbyData:[]],a=10,f=o.slice(0,a),p=o.length-a,x=o.length;return w.jsxs("div",{className:"overlapping-profile-list-wrapper",style:{marginTop:"3rem"},children:[w.jsxs("div",{className:"overlapping-profile-list",children:[f.map((y,A)=>w.jsx("img",{src:y.pfp_data||"/assets/player_icon_trans.png",alt:y.name||"Player",className:"overlapping-profile-img",style:{zIndex:A+1}},y.username||y.name||A)),p>0&&w.jsxs("span",{className:"overlapping-profile-overflow",children:["+ ",p]})]}),w.jsxs("div",{className:"overlapping-profile-list-label",style:{marginTop:"0.5rem",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.1)"},children:["People joined: ",x]})]})},gA=()=>{const{user:r,userProfile:o,checkAuth:a,permissions:f}=N.useContext(Jn),p=Wn(),x=Mr(),y=!1,A=Math.floor(9*60),{loadSound:v,seekTo:E,cancelSound:S,checkSound:I,soundEnabled:R,setSoundEnabled:M,isPlaying:L}=mf(),[B,j]=N.useState(!0),[z,U]=N.useState(!document.hidden),V=N.useRef(null),re=new URLSearchParams(x.search).get("code"),[ne,q]=N.useState(re||"test");N.useEffect(()=>{re||(console.log("No lobby code found in URL, using default 'test' value"),(async()=>{try{const He=localStorage.getItem("access_token"),qe=await fetch(window.server_url+"/view_my_active_lobbies",{headers:{Authorization:`Bearer ${He}`}});if(qe.ok){const ut=await qe.json();if(console.log("Active lobbies response:",ut),ut&&ut.lobbies&&ut.lobbies.length>0){const Ge=ut.lobbies[0];q(Ge),window.history.replaceState({},"",`/admin_lobby_view?code=${Ge}`)}}}catch(He){console.error("Error fetching active lobby:",He)}})())},[re]);const[le,K]=N.useState(!1),[Re,Be]=N.useState(null),[Ne,Le]=N.useState(!1),[Se,Q]=N.useState(null),[Fe,ge]=N.useState(null),[me,ze]=N.useState(null),[ce,W]=N.useState(null),[Y,pe]=N.useState(null),[ve,Ee]=N.useState({}),[ie,be]=N.useState([]),[Ae,Ve]=N.useState(0),De=((Fe==null?void 0:Fe.length)||0)+((Se==null?void 0:Se.length)*2||0),[tt,ue]=N.useState(!1);N.useEffect(()=>{I()?M(!0):M(!1)},[]),N.useEffect(()=>{const we=()=>{const He=!document.hidden;He&&!z&&console.log("Page became visible - next poll will fetch latest data"),U(He)};return document.addEventListener("visibilitychange",we),()=>{document.removeEventListener("visibilitychange",we)}},[z]),N.useEffect(()=>{(ce==="terminated"||ce==="inactive")&&S()},[ce]),N.useEffect(()=>{if(a(),f!=="admin"&&f!=="organizer"){p("/");return}const we=async qe=>{if(ve[qe])return ve[qe];try{const ut=await fetch(`${window.server_url}/pfp_small_icon?username=${encodeURIComponent(qe)}`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(ut.ok){let Ge=await ut.text();Ge.startsWith('"')&&Ge.endsWith('"')&&(Ge=Ge.slice(1,-1));const At=Ge.startsWith("data:image")?Ge:`data:image/jpeg;base64,${Ge}`;return Ee(Wt=>({...Wt,[qe]:At})),At}return null}catch(ut){return console.error(`Error fetching profile picture for ${qe}:`,ut),null}},He=setInterval(async()=>{try{const qe=!document.hidden,ut=await fetch(`${window.server_url}/admin_lobby_data?is_visible=${qe}`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,is_visible_t_f:qe?"t":"f",lobby_code:ne}});if(ut.ok){const Ge=await ut.json();console.log("Admin lobby data:",ne,Ge),(Ge.lobby_state==="inactive"||Ge.status==="inactive")&&S();const At=typeof Ge.round_time_left=="number"&&!isNaN(Ge.round_time_left)?Ge.round_time_left:0;if(V.current=At,V.current!=null&&Ge.lobby_state==="active"&&V.current!=0&&(E(A-V.current),console.log("seeking to",A-V.current)),Ge.lobby_state==="active"&&Ve(Wt=>Ge.current_round>Wt?Ge.current_round:Wt),Ge.lobby_state==="terminated"&&(Ve(0),S()),Ge&&Ge.unpaired_players){const Wt=await Promise.all(Ge.unpaired_players.map(async Gt=>{const Ue=await we(Gt.username);return{...Gt,pfp_data:Ue}})),Ht=await Promise.all((Ge.pairs_data||[]).map(async Gt=>{const Ue=await we(Gt[0].username),xe=await we(Gt[1].username);return[{...Gt[0],pfp_data:Ue},{...Gt[1],pfp_data:xe}]}));ge(Wt),Q(Ht),ze(Ge.round_time_left),W(Ge.lobby_state),pe(Ge.lobby_duration||300),be(Ge.custom_tags||[])}else console.error("Invalid lobby data structure:",Ge),ge([]),Q([])}else console.error("Failed to fetch admin lobby data:",ut.status)}catch(qe){console.error("Error fetching admin lobby data:",qe)}},1e3);return()=>clearInterval(He)},[ve]);const ye=we=>{Be(we),K(!0)},Xe=()=>{K(!1),Be(null)},ht=()=>{Re&&fetch(window.server_url+"/kick_user",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"},body:JSON.stringify({username:Re.username,lobby_code:ne})}).then(we=>{we.ok?console.log(`User ${Re.name} kicked successfully`):console.error(`Failed to kick user ${Re.name}`)}).catch(we=>{console.error("Error kicking user:",we)}).finally(()=>{Xe()})},Pt=()=>{Le(!0)},xt=()=>{Le(!1)},Je=()=>{p(`/lobby?code=${ne}`),xt()};function nt(we,He={}){const{silent:qe=!1}=He,ut=URL.createObjectURL(we),Ge=document.createElement("a");Ge.href=ut,Ge.download=`reuneo-lobby-${ne}.png`,document.body.appendChild(Ge),Ge.click(),document.body.removeChild(Ge),URL.revokeObjectURL(ut),qe||Un.success("QR code downloaded!")}async function Nt(){const we=document.getElementById("admin-qr-svg");we&&ox(we,ne).then(He=>{nt(He,{silent:!0}),navigator.clipboard&&navigator.clipboard.write?navigator.clipboard.write([new window.ClipboardItem({"image/png":He})]).then(()=>{Un.success("Downloaded and copied to clipboard!")}).catch(()=>{Un.success("QR code downloaded!")}):Un.success("QR code downloaded!")}).catch(He=>{console.error("Error generating QR code image:",He),Un.error("Failed to generate QR code image.")})}const Pe=()=>w.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.125)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},children:w.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",position:"relative",minWidth:"300px"},children:[w.jsx("button",{onClick:()=>j(!1),style:{color:"#144fff",position:"absolute",right:"10px",top:"10px",border:"none",background:"none",fontSize:"16px",cursor:"pointer",fontWeight:"bold",padding:"4px 8px"},children:"X"}),w.jsx("h2",{style:{marginTop:"5px"},children:"The Sound is Important"}),w.jsx("h3",{style:{marginTop:"5px"},children:"Raise your volume also"}),w.jsx("p",{style:{color:"#144dff"},children:"You'll need this for the best experience."}),w.jsx("button",{onClick:()=>{v(),j(!1)},style:{padding:"10px 20px",marginTop:"20px",backgroundColor:"#144dff",color:"#ffffff",border:"none",borderRadius:"14px",fontWeight:"bold",cursor:"pointer"},children:"Enable Sound"})]})}),yn=async()=>{await fetch(window.server_url+"/start_rounds",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,lobby_code:ne}})},Ct=async()=>{S(),(await fetch(window.server_url+"/terminate_lobby",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,lobby_code:ne}})).ok&&p("/")};return w.jsxs(w.Fragment,{children:[w.jsx(rh,{position:"top-center"}),w.jsxs("div",{className:"admin-lobby-container",children:[y,w.jsx("div",{className:"admin-view-logo",style:{cursor:"pointer"},children:w.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Reuneo Logo",style:{maxWidth:"85px",height:"auto",objectFit:"contain",transition:"transform 0.3s ease"},onClick:()=>p("/")})}),w.jsx(hA,{lobbyState:ce,playerCount:De,onStart:yn,onEnd:Ct,lobbyCode:ne,currentRound:Ae}),w.jsx(pA,{players:{pairedPlayers:Se,lobbyData:Fe}}),w.jsxs("div",{className:"admin-lobby-dropdown-toggle",onClick:()=>ue(we=>!we),style:{cursor:"pointer",background:"var(--primary-color)",color:"#f5f7ff",fontWeight:700,textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",fontSize:".75rem",borderRadius:tt?"14px 14px 0 0":"14px",padding:"0.5rem 1rem",margin:"0 auto",maxWidth:420,boxShadow:"0 2px 8px rgba(20,77,255,0.08)",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s",letterSpacing:"0.5px"},children:[tt?"Hide Controls":"More Controls",w.jsx("span",{style:{marginLeft:12,fontSize:"1.2em",transition:"transform 0.3s",display:"inline-block",transform:tt?"rotate(180deg)":"rotate(0deg)"},children:""})]}),w.jsxs("div",{className:"admin-lobby-body",style:{maxHeight:tt?1e3:0,overflow:"hidden",transition:"max-height 0.5s cubic-bezier(0.4,0,0.2,1)",opacity:tt?1:0,pointerEvents:tt?"auto":"none",marginBottom:tt?"2rem":0},children:[w.jsxs("div",{className:"admin-lobby-qr",onClick:Nt,style:{cursor:"pointer"},children:[w.jsxs("span",{className:"qr-label",style:{display:"flex",alignItems:"center",gap:"0.4rem",marginBottom:"0.5rem"},children:["People scan to join",w.jsx("span",{className:"copy-icon","aria-label":"Copy",children:w.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[w.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),w.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})})]}),w.jsx("div",{style:{position:"relative",display:"inline-block"},children:w.jsx(th,{value:`${window.location.origin}/lobby?code=${ne}`,size:140,level:"H",includeMargin:!1,bgColor:"#ffffff",fgColor:"#000000",id:"admin-qr-svg"})}),w.jsxs("div",{className:"lobby-code-display",onClick:()=>{navigator.clipboard.writeText(ne);const we=document.querySelector(".lobby-code-display");we.classList.add("copied"),setTimeout(()=>we.classList.remove("copied"),250)},children:[w.jsx("span",{className:"lobby-code-label",children:"lobby code:"}),w.jsx("span",{className:"lobby-code-value",children:ne}),w.jsx("span",{className:"copy-icon","aria-label":"Copy",children:w.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[w.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),w.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})})]})]}),w.jsxs("div",{className:"admin-lobby-event-settings",children:[w.jsxs("div",{className:"admin-profile",children:[w.jsx("img",{src:o!=null&&o.image_data?`data:image/jpeg;base64,${o.image_data}`:"/assets/player_icon_trans.png",alt:"Your Profile",className:"admin-profile-picture"}),w.jsx("span",{className:"admin-profile-name",children:o!=null&&o.name?o.name.slice(0,20):r==null?void 0:r.slice(0,20)})]}),w.jsx("button",{onClick:Pt,className:"page-control-button page-control-join",style:{marginTop:".5rem"},children:"Join Rounds"}),w.jsxs("div",{className:"setting-item",style:{padding:"1rem"},children:[w.jsxs("span",{className:"setting-label",children:["Round Duration: ",w.jsxs("span",{className:"setting-value",children:[Math.floor(Y/60)," min"]})]}),w.jsx("span",{className:"setting-label",style:{},children:"Tags:"}),ie&&ie.length>0&&w.jsx("div",{className:"setting-item",children:w.jsxs("div",{className:"tags-container",children:[ie.slice(0,3).map((we,He)=>w.jsx("span",{className:"tag-pill",children:we},He)),ie.length>3&&w.jsxs("span",{className:"tag-pill more-tags",children:["+",ie.length-3," more"]})]})})]})]}),w.jsx("div",{className:"admin-lobby-actions"})]}),(ce==="active"||ce==="interrim")&&me&&w.jsx("div",{className:"admin-lobby-timer-container",children:w.jsxs("div",{className:"admin-lobby-timer-glass",children:[w.jsx(nh,{isPlaying:ce==="active",duration:Y,initialRemainingTime:me,colors:["#144dff"],size:90,strokeWidth:12,trailColor:"url(#trailGradient)",onComplete:()=>({shouldRepeat:!1}),strokeLinecap:"round",children:({remainingTime:we})=>{const He=Math.floor(we/60),qe=Math.floor(we%60);return w.jsxs("span",{className:`timer-text ${we<=10?"timer-text-fadescale":""}`,children:[He,":",String(qe).padStart(2,"0")]})}},`${ce}-${Math.floor(me)}`),w.jsx("span",{className:"timer-subtext",children:"round time left"}),w.jsx("svg",{width:"0",height:"0",children:w.jsx("defs",{children:w.jsxs("linearGradient",{id:"trailGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[w.jsx("stop",{offset:"0%",stopColor:"#e0e7ff"}),w.jsx("stop",{offset:"100%",stopColor:"#f5f7ff"})]})})})]})}),ce!=="checkin"&&w.jsxs("div",{className:"admin-lobby-stats",children:[w.jsxs("div",{className:"stat-card",children:[w.jsx("div",{className:"stat-title",children:"Total Players"}),w.jsx("div",{className:"stat-value",children:((Fe==null?void 0:Fe.length)||0)+((Se==null?void 0:Se.length)*2||0)})]}),w.jsxs("div",{className:"stat-card",children:[w.jsx("div",{className:"stat-title",children:"Paired Players"}),w.jsx("div",{className:"stat-value",children:(Se==null?void 0:Se.length)*2||0})]}),w.jsxs("div",{className:"stat-card",children:[w.jsx("div",{className:"stat-title",children:"Unpaired Players"}),w.jsx("div",{className:"stat-value",children:(Fe==null?void 0:Fe.length)||0})]})]}),Se&&ce!=="checkin"&&w.jsx("div",{className:"admin-lobby-players",children:w.jsxs("div",{className:"player-section",children:[w.jsxs("div",{className:"section-header",children:["Paired Players: ",w.jsx("span",{className:"stat-value",style:{fontSize:"1.3rem"},children:(Se==null?void 0:Se.length)*2||0})]}),w.jsx("div",{className:"player-grid",children:Se.map((we,He)=>{const qe=we[0].match_details&&we[0].match_details.opponent_matched_tags&&we[0].match_details.opponent_matched_tags.length>0||we[1].match_details&&we[1].match_details.opponent_matched_tags&&we[1].match_details.opponent_matched_tags.length>0;return w.jsxs("div",{className:"paired-player-card",children:[qe&&w.jsx("div",{className:"matched-pair-badge",children:"Matched"}),w.jsxs("div",{className:"paired-player",onClick:()=>ye(we[0]),children:[w.jsx("img",{src:we[0].pfp_data,alt:we[0].name,className:"paired-player-avatar"}),w.jsx("h3",{className:"paired-player-name",children:we[0].name}),we[0].match_details&&we[0].match_details.opponent_matched_tags&&we[0].match_details.opponent_matched_tags.length>0&&w.jsx("div",{className:"matching-tag-container",children:w.jsx("div",{className:"matched-player-tag",children:we[0].match_details.opponent_matched_tags.map((ut,Ge)=>w.jsx("span",{className:"matching-tag-pill",children:ut},Ge))})})]}),w.jsxs("div",{className:"paired-player",onClick:()=>ye(we[1]),children:[w.jsx("img",{src:we[1].pfp_data,alt:we[1].name,className:"paired-player-avatar"}),w.jsx("h3",{className:"paired-player-name",children:we[1].name}),we[1].match_details&&we[1].match_details.opponent_matched_tags&&we[1].match_details.opponent_matched_tags.length>0&&w.jsx("div",{className:"matching-tag-container",children:w.jsx("div",{className:"matched-player-tag",children:we[1].match_details.opponent_matched_tags.map((ut,Ge)=>w.jsx("span",{className:"matching-tag-pill",children:ut},Ge))})})]})]},He)})})]})}),Fe&&w.jsx("div",{className:"admin-lobby-players",children:w.jsxs("div",{className:"player-section",children:[w.jsxs("div",{className:"section-header",children:[ce==="checkin"?"People Joined":"Unpaired Players",": ",w.jsx("span",{className:"stat-value",style:{fontSize:"1.3rem"},children:(Fe==null?void 0:Fe.length)||0})]}),w.jsx("div",{className:"player-grid",children:Fe.map((we,He)=>w.jsxs("div",{className:"player-card",onClick:()=>ye(we),children:[w.jsx("img",{src:we.pfp_data,alt:we.name,className:"player-avatar"}),w.jsx("h3",{className:"player-name",children:we.name})]},He))})]})}),w.jsx(fA,{isOpen:Ne,onClose:xt,onConfirm:Je}),w.jsx(dA,{isOpen:le,onClose:Xe,onConfirm:ht,userName:(Re==null?void 0:Re.name)||"this user"})]}),R||!B||ce=="checkin"||ce==null||L?null:w.jsx(Pe,{})]})},mA=()=>{const r=Wn(),{user:o}=N.useContext(Jn),a=()=>{window.location.href="https://reunio.app/become-an-organizer"};return w.jsxs("div",{className:"product-selection-container",children:[w.jsxs("video",{className:"background-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,children:[w.jsx("source",{src:"/assets/purchase_plan_video.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]}),w.jsxs("div",{className:"product-selection-content",children:[w.jsx("div",{className:"product-selection-header",children:w.jsx("h1",{children:"Product Selection"})}),w.jsxs("div",{className:"plans-section",children:[w.jsx("h2",{children:"Available Plans"}),w.jsxs("div",{className:"plan-card",children:[w.jsx("h3",{children:"Organizer Plan"}),w.jsxs("div",{className:"plan-description",children:[w.jsx("p",{children:"Create experiences for your community with our beta plan."}),w.jsxs("ul",{children:[w.jsx("li",{children:"Create unlimited experiences"}),w.jsx("li",{children:"Access to organizer dashboard"}),w.jsx("li",{children:"Priority customer support"})]})]}),w.jsx("button",{className:"purchase-button",onClick:a,children:"Contact Us"})]})]}),w.jsx("button",{className:"back-button",onClick:()=>r("/"),children:"Home"})]})]})},xA=()=>{const{user:r,userProfile:o,checkAuth:a,permissions:f}=N.useContext(Jn),[p,x]=N.useState(""),[y,A]=N.useState(""),[v,E]=N.useState(!1),[S,I]=N.useState(""),[R,M]=N.useState(!1),[L,B]=N.useState([]),[j,z]=N.useState(""),[U,V]=N.useState("5"),[ee,re]=N.useState("0"),[ne,q]=N.useState(!1),[le,K]=N.useState(null),[Re,Be]=N.useState(!1),[Ne,Le]=N.useState(null),[Se,Q]=N.useState(null),[Fe,ge]=N.useState(""),[me,ze]=N.useState(""),[ce,W]=N.useState(null),[Y,pe]=N.useState(null),[ve,Ee]=N.useState(""),[ie,be]=N.useState(!1),[Ae,Ve]=N.useState(!1),[De,tt]=N.useState({x:0,y:0}),[ue,ye]=N.useState(1),[Xe,ht]=N.useState(null),Pt=8,xt=Wn(),Je=N.useRef(null);N.useEffect(()=>{window.scrollTo(0,0),r&&(x(r),A(r)),Je.current&&Je.current.focus()},[r]);const nt=Ue=>{const xe=/^[a-z0-9]+$/;return Ue.length>=2&&xe.test(Ue)},Nt=Ue=>{const xe=Ue.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");A(xe),M(!0),setTimeout(()=>{M(!1)},500)},Pe=()=>{if(j.includes(",")){const Ue=j.split(",").map(gt=>gt.startsWith(" ")?gt.substring(1):gt),xe=[];Ue.forEach(gt=>{const dt=gt.trim();dt&&!L.includes(dt)&&!xe.includes(dt)&&xe.push(dt)}),xe.length>0&&B([...L,...xe]),z("")}else j.trim()&&!L.includes(j.trim())&&(B([...L,j.trim()]),z(""))},yn=Ue=>{B(L.filter(xe=>xe!==Ue))},Ct=Ue=>{Ue.key==="Enter"&&j.trim()&&(Ue.preventDefault(),Pe())},we=Ue=>{Ue==="icebreaker"?L.length>0||j.trim()?(Le("icebreaker"),Be(!0)):(K("icebreaker"),B([]),z("")):Ue==="custom"&&K("custom")},He=()=>{K(Ne),B([]),z(""),Be(!1),Le(null)},qe=()=>{Be(!1),Le(null)},ut=(Ue,xe,gt)=>new Promise(dt=>{const Dt=new Image;Dt.onload=()=>{const Dn=document.createElement("canvas"),Dr=Dn.getContext("2d");let{width:Hn,height:pt}=Dt;Hn>pt?Hn>xe&&(pt=pt*xe/Hn,Hn=xe):pt>gt&&(Hn=Hn*gt/pt,pt=gt),Dn.width=Hn,Dn.height=pt,Dr.drawImage(Dt,0,0,Hn,pt);const Ln=Dn.toDataURL("image/jpeg",.7);dt(Ln)},Dt.src=URL.createObjectURL(Ue)}),Ge=async Ue=>{const xe=Ue.target.files[0];if(xe){if(Ee(""),Ve(!0),!["image/jpeg","image/jpg","image/png"].includes(xe.type)){Ee("Invalid format. Please upload a JPG or PNG image."),Ve(!1);return}if(xe.size>2*1024*1024){Ee("File too large. Please choose an image under 2MB."),Ve(!1);return}try{const gt=await ut(xe,400,400);Q(xe),W(gt),be(!0),Ve(!1)}catch(gt){console.error("Error processing image:",gt),Ee("Error processing image. Please try again."),Ve(!1)}}},At=(Ue,xe)=>{ht(xe)},Wt=async()=>{try{Ve(!0);const Ue=await uf(ce,Xe);pe(Ue),be(!1),Ve(!1)}catch(Ue){console.error("Error cropping logo:",Ue),Ee("Error processing image. Please try again."),be(!1),Ve(!1)}},Ht=()=>{Q(null),W(null),pe(null),be(!1),Ve(!1),tt({x:0,y:0}),ye(1),ht(null),Ee("");const Ue=document.getElementById("logoUpload");Ue&&(Ue.value="")},Gt=async Ue=>{if(Ue.preventDefault(),!nt(y)){I("Lobby code must be at least 2 characters long and contain only lowercase letters and numbers");return}E(!0),I("");const xe=parseInt(U)*60+parseInt(ee);let gt=null;Y&&(gt=Y.split(",")[1]);try{const dt={lobby_code:y,custom_tags:le==="custom"?L:[],lobby_duration:xe,show_table_numbers:ne};gt&&(dt.logo_icon=gt),Fe.trim()&&(dt.logo_name=Fe.trim()),me.trim()&&(dt.logo_hyperlink=me.trim());const Dt=await fetch(window.server_url+"/create_lobby",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"},body:JSON.stringify(dt)});if(Dt.ok)console.log("Lobby created successfully"),console.log(await Dt.json()),xt(`/admin_lobby_view?code=${y}`);else{const Dn=await Dt.json();I(Dn.message||"Failed to create lobby"),console.error("Failed to create lobby")}}catch(dt){I("An error occurred while creating the lobby"),console.error("Error creating lobby:",dt)}finally{E(!1)}};return w.jsxs("div",{className:"create-lobby-background",children:[w.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Reunio Logo",className:"logo-image",onClick:()=>xt(-1)}),w.jsxs("div",{className:"create-lobby-container",children:[w.jsx("h1",{className:"create-lobby-title",children:"Create a New Lobby"}),w.jsxs("form",{onSubmit:Gt,className:"create-lobby-form",children:[w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"lobbyCode",children:"Lobby Code"}),w.jsx("input",{ref:Je,type:"text",id:"lobbyCode",value:y,onChange:Nt,placeholder:"Enter lobby code (lowercase letters and numbers only)",required:!0,className:`form-input ${R?"typing":""}`,autoComplete:"off"}),w.jsx("div",{className:"input-hint",children:"lowercase letters and numbers only"})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Round Duration"}),w.jsxs("div",{className:"duration-input-container",children:[w.jsxs("div",{className:"duration-input-group",children:[w.jsx("input",{type:"number",id:"minutes",value:U,onChange:Ue=>{const xe=Ue.target.value;(xe===""||parseInt(xe)>0&&parseInt(xe)<=Pt)&&(V(xe),parseInt(xe)===Pt&&re("0"))},min:"1",max:Pt,placeholder:`1-${Pt}`,className:"form-input duration-input",autoComplete:"off"}),w.jsx("label",{htmlFor:"minutes",className:"duration-label",children:"Minutes"})]}),w.jsxs("div",{className:"duration-input-group",children:[w.jsx("input",{type:"number",id:"seconds",value:ee,onChange:Ue=>{const xe=Ue.target.value;(xe===""||parseInt(xe)>=0&&parseInt(xe)<=59)&&re(xe)},min:"0",max:"59",placeholder:"0-59",className:"form-input duration-input",autoComplete:"off",disabled:parseInt(U)===Pt}),w.jsx("label",{htmlFor:"seconds",className:"duration-label",children:"Seconds"})]})]}),w.jsxs("div",{className:"input-hint",children:["Maximum total duration is ",Pt," minutes"]})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"showTableNumbers",children:"Table Numbers"}),w.jsx("input",{type:"checkbox",id:"showTableNumbers",checked:ne,onChange:Ue=>q(Ue.target.checked),className:"form-input checkbox-input"}),w.jsx("div",{className:"input-hint",children:"Recommended for events with 50+ people"}),w.jsx("div",{className:"input-hint",children:"Make sure to provide table numbers"})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Matchmaking Categories"}),w.jsxs("div",{className:"matchmaking-tabs",children:[w.jsx("button",{type:"button",className:`tab-button ${le==="icebreaker"?"tab-selected":""}`,onClick:()=>we("icebreaker"),children:"Community Ice Breaker"}),w.jsx("button",{type:"button",className:`tab-button ${le==="custom"?"tab-selected":""}`,onClick:()=>we("custom"),children:"Custom Matching"})]}),le==="custom"&&w.jsxs("div",{className:"custom-matching-section",children:[w.jsxs("div",{className:"tag-input-container",children:[w.jsx("input",{type:"text",id:"tagInput",value:j,onChange:Ue=>z(Ue.target.value),onKeyDown:Ct,placeholder:"Add categories (press + to add)",className:"form-input",autoComplete:"off"}),w.jsx("button",{type:"button",onClick:Pe,className:"tag-add-button",children:"+"})]}),L.length>0&&w.jsx("div",{className:"tag-list",children:L.map((Ue,xe)=>w.jsxs("div",{className:"tag-item",children:[Ue,w.jsx("button",{type:"button",onClick:()=>yn(Ue),className:"tag-remove-button",children:""})]},xe))}),w.jsx("div",{className:"input-hint",children:"If you want to match people based on categories"})]})]}),w.jsxs("div",{className:"form-group logo-upload-section",children:[w.jsx("label",{children:"Sponsor Logo"}),!Y&&!ie&&w.jsxs(w.Fragment,{children:[Ae?w.jsx("div",{className:"logo-processing",children:"Processing..."}):w.jsxs(w.Fragment,{children:[w.jsx("input",{type:"file",id:"logoUpload",accept:"image/jpeg,image/jpg,image/png",onChange:Ge,style:{display:"none"}}),w.jsx("button",{type:"button",onClick:()=>document.getElementById("logoUpload").click(),className:"logo-upload-button",children:"Upload Logo"})]}),ve&&w.jsx("div",{className:"logo-error-message",children:ve})]}),ie&&ce&&w.jsxs("div",{className:"logo-crop-container",children:[w.jsx("div",{className:"logo-crop-area",children:w.jsx(cf,{image:ce,crop:De,zoom:ue,aspect:1,onCropChange:tt,onZoomChange:ye,onCropComplete:At})}),w.jsxs("div",{className:"logo-crop-controls",children:[w.jsx("button",{type:"button",onClick:Wt,className:"logo-save-button",disabled:Ae,children:Ae?"Processing...":"Save Crop"}),w.jsx("button",{type:"button",onClick:Ht,className:"logo-cancel-button",children:"Cancel"})]})]}),Y&&!ie&&w.jsx("div",{className:"logo-preview-container",children:w.jsxs("div",{className:"logo-preview",children:[w.jsx("img",{src:Y,alt:"Logo preview",className:"logo-preview-image"}),w.jsx("button",{type:"button",onClick:Ht,className:"logo-remove-button",children:""})]})}),!1]}),S&&w.jsx("div",{className:"error-message",children:S}),w.jsx("button",{type:"submit",className:"submit-button",disabled:v,children:v?"Creating...":"Create Lobby"})]})]}),Re&&w.jsx("div",{className:"modal-overlay",children:w.jsxs("div",{className:"modal-content",children:[w.jsx("h3",{children:"Switch to Community Ice Breaker?"}),w.jsx("p",{children:"This will clear your current matching categories."}),w.jsxs("div",{className:"modal-buttons",children:[w.jsx("button",{type:"button",onClick:qe,className:"modal-button modal-cancel",children:"Cancel"}),w.jsx("button",{type:"button",onClick:He,className:"modal-button modal-confirm",children:"Confirm"})]})]})})]})},yA=r=>{try{const o=new URLSearchParams(r||window.location.search),a=o.get("via")||"",f=o.get("rewardful")||o.get("rewardful_referral")||"",p=typeof window<"u"&&window.Rewardful&&window.Rewardful.referral||"",x=typeof window<"u"&&window.localStorage&&window.localStorage.getItem("rewardful_referral")||"",y=p||f||a||x||"";return y&&typeof window<"u"&&window.localStorage&&window.localStorage.setItem("rewardful_referral",y),y}catch{return""}},wA=()=>{const{login:r,user:o,checkAuth:a,permissions:f}=N.useContext(Jn),[p,x]=N.useState(""),[y,A]=N.useState(""),[v,E]=N.useState(""),[S,I]=N.useState(""),[R,M]=N.useState(""),[L,B]=N.useState(""),[j,z]=N.useState({}),[U,V]=N.useState(""),[ee,re]=N.useState(!1),ne=Wn(),q=Mr();N.useEffect(()=>{localStorage.getItem("access_token")&&!o&&a()},[]),N.useEffect(()=>{f!==null&&(f==="admin"||f==="organizer")&&ne("/")},[f,ne]),N.useEffect(()=>{(async()=>{if(o!==null&&f!==null&&f!=="admin"&&f!=="organizer")try{const ie=localStorage.getItem("access_token");if(!ie)return;const be=await fetch(`${window.server_url}/check-subscription-status`,{headers:{Authorization:`Bearer ${ie}`}});be.ok&&(await be.json()).has_access===!0&&ne("/organizer-account-details")}catch(ie){console.error("Error checking subscription status:",ie)}})()},[o,f,ne]);const le=Ee=>{const ie=/^[a-z0-9]+$/;return Ee.length>=2&&ie.test(Ee)},K=Ee=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Ee)&&Ee.trim()!=="",Re=Ee=>Ee.replace(/\D/g,"").length===10,Be=Ee=>Ee.trim().length>=2,Ne=Ee=>{const ie=Ee.replace(/\D/g,"");return ie.length===0?"":ie.length<=3?`(${ie}`:ie.length<=6?`(${ie.slice(0,3)}) ${ie.slice(3)}`:`(${ie.slice(0,3)}) ${ie.slice(3,6)}-${ie.slice(6,10)}`},Le=Ee=>Ee.replace(/\D/g,""),Se=Ee=>{const ie=Ee.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");x(ie),U&&V("")},Q=Ee=>{A(Ee.target.value),U&&V(""),j.email&&z(ie=>({...ie,email:""}))},Fe=Ee=>{const ie=Ee.target.value;E(ie),U&&V(""),j.phone&&z(be=>({...be,phone:""}))},ge=()=>{const Ee=Ne(v);E(Ee),Ee&&!Re(Ee)?z(ie=>({...ie,phone:"Invalid phone number"})):z(ie=>({...ie,phone:""}))},me=Ee=>{const ie=Ee.target.value;I(ie),U&&V(""),j.cityState&&z(be=>({...be,cityState:""}))},ze=()=>{S&&!Be(S)?z(Ee=>({...Ee,cityState:"City/State must be at least 2 characters"})):z(Ee=>({...Ee,cityState:""}))},ce=Ee=>{M(Ee.target.value),j.eventType&&z(ie=>({...ie,eventType:""}))},W=Ee=>{B(Ee.target.value),j.avgAttendees&&z(ie=>({...ie,avgAttendees:""}))},Y=async Ee=>{Ee.preventDefault(),V(""),re(!0);const ie=o!==null;if(!ie&&(!p||!le(p))){V("Username must be at least 2 characters and contain only lowercase letters and numbers"),re(!1);return}if(!y||!K(y)){z(tt=>({...tt,email:"Please enter a valid email address"})),V("Please enter a valid email address"),re(!1);return}const be=Le(v);if(!v||!Re(v)){z(tt=>({...tt,phone:"Please enter a valid phone number"})),V("Please enter a valid phone number"),re(!1);return}if(!S||!Be(S)){z(tt=>({...tt,cityState:"City/State is required (minimum 2 characters)"})),V("City/State is required (minimum 2 characters)"),re(!1);return}const Ae=new URLSearchParams(q.search),Ve=yA(q.search),De=Ae.get("ref")||Ae.get("affiliate_code")||"";if(ie){const tt=localStorage.getItem("access_token");if(!tt){V("Authentication required. Please log in again."),re(!1);return}try{if(!(await fetch(`${window.server_url}/update_profile`,{method:"POST",headers:{Authorization:`Bearer ${tt}`,"Content-Type":"application/json"},body:JSON.stringify({phone_number:be,city_state:S,event_type:R||"",avg_attendees:L||""})})).ok)throw new Error("Failed to update profile");const ye=await fetch(`${window.server_url}/create-checkout-session`,{method:"POST",headers:{Authorization:`Bearer ${tt}`,"Content-Type":"application/json"},body:JSON.stringify({email:y,rewardful_referral:Ve,affiliate_code:De})}),Xe=await ye.json();if(!ye.ok||Xe.error){if(Xe.error&&Xe.error.includes("already have an active subscription")){ne("/organizer-account-details");return}V(Xe.error||"Failed to create checkout session. Please try again."),re(!1);return}window.location.href=Xe.checkout_url;return}catch(ue){console.error("Error creating checkout session:",ue),V("An error occurred. Please try again."),re(!1);return}}try{const ue=await fetch(window.server_url+"/signup",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:p,password:p})}),ye=await ue.json();if(ye.error==="Username already taken"){V("Username is taken"),re(!1);return}if(!ue.ok){V(ye.message||"Signup failed"),re(!1);return}r(ye),await a();const Xe=localStorage.getItem("access_token");if(!Xe)throw new Error("Authentication failed");const ht=await fetch("/assets/fakeprofile.png");if(!ht.ok)throw new Error("Failed to fetch profile image");const xt=await(await ht.blob()).arrayBuffer(),Je=btoa(new Uint8Array(xt).reduce((yn,Ct)=>yn+String.fromCharCode(Ct),""));if(!(await fetch(`${window.server_url}/update_profile`,{method:"POST",headers:{Authorization:`Bearer ${Xe}`,"Content-Type":"application/json"},body:JSON.stringify({name:p,image_data:Je,phone_number:be,city_state:S,event_type:R||"",avg_attendees:L||""})})).ok)throw new Error("Failed to update profile");await a();const Nt=await fetch(`${window.server_url}/create-checkout-session`,{method:"POST",headers:{Authorization:`Bearer ${Xe}`,"Content-Type":"application/json"},body:JSON.stringify({email:y,rewardful_referral:Ve,affiliate_code:De})}),Pe=await Nt.json();if(!Nt.ok||Pe.error){if(Pe.error&&Pe.error.includes("already have an active subscription")){ne("/organizer-account-details");return}throw new Error(Pe.error||"Failed to create checkout session")}window.location.href=Pe.checkout_url}catch(tt){console.error("Error:",tt),V("An error occurred. Please try again."),re(!1)}},pe=o===null,ve=ee||f==="admin"||f==="organizer";return w.jsxs("div",{className:"signup-container",children:[w.jsx("button",{onClick:()=>ne("/"),className:"homescreen-button",children:"Home"}),w.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),w.jsx("h3",{className:"signup-header",children:"Become an Organizer"}),w.jsx("div",{className:"step-form-container",children:w.jsxs("form",{onSubmit:Y,children:[w.jsxs("div",{style:{display:pe?"block":"none"},children:[w.jsx("label",{className:"step-label",children:"Username"}),w.jsx("input",{type:"text",value:p,onChange:Se,placeholder:"Enter a username",className:"step-input",autoFocus:pe}),p.length>0&&w.jsxs("div",{className:"username-info-message",children:[w.jsxs("svg",{className:"info-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[w.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),w.jsx("path",{d:"M8 5V7M8 11V9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),w.jsx("circle",{cx:"8",cy:"5",r:"0.5",fill:"currentColor"})]}),w.jsx("span",{children:"This will be your temporary password"})]})]}),w.jsxs("div",{style:{marginTop:pe?"20px":"0"},children:[w.jsxs("label",{className:"step-label",children:["Email",j.email&&w.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[w.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),w.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),w.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),w.jsx("input",{type:"email",value:y,onChange:Q,placeholder:"Enter your email",className:`step-input ${j.email?"input-error":""}`,autoFocus:!pe})]}),w.jsxs("div",{style:{marginTop:"20px"},children:[w.jsxs("label",{className:"step-label",children:["Phone Number",j.phone&&w.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[w.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),w.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),w.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),w.jsx("input",{type:"tel",value:v,onChange:Fe,onBlur:ge,placeholder:"(123) 456-7890",className:`step-input ${j.phone?"input-error":""}`})]}),w.jsxs("div",{style:{marginTop:"20px"},children:[w.jsxs("label",{className:"step-label",children:["City / State",j.cityState&&w.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[w.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),w.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),w.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),w.jsx("input",{type:"text",value:S,onChange:me,onBlur:ze,placeholder:"City / State",className:`step-input ${j.cityState?"input-error":""}`})]}),w.jsxs("div",{style:{marginTop:"20px"},children:[w.jsx("label",{className:"step-label",children:"What events do you host?"}),w.jsxs("select",{value:R,onChange:ce,className:"step-select",children:[w.jsx("option",{value:"",children:"Select an option..."}),w.jsx("option",{value:"Hospitality-Restaurants",children:"Hospitality-Restaurants"}),w.jsx("option",{value:"Social",children:"Social"}),w.jsx("option",{value:"Residential",children:"Residential"}),w.jsx("option",{value:"Business Networking",children:"Business Networking"}),w.jsx("option",{value:"Event Specialist",children:"Event Specialist"}),w.jsx("option",{value:"Education",children:"Education"}),w.jsx("option",{value:"HR-Team Building",children:"HR-Team Building"}),w.jsx("option",{value:"Corporate",children:"Corporate"}),w.jsx("option",{value:"Co-working",children:"Co-working"}),w.jsx("option",{value:"Dating",children:"Dating"}),w.jsx("option",{value:"Other",children:"Other"})]})]}),w.jsxs("div",{style:{marginTop:"20px"},children:[w.jsx("label",{className:"step-label",children:"Avg # of attendees"}),w.jsxs("select",{value:L,onChange:W,className:"step-select",children:[w.jsx("option",{value:"",children:"Select an option..."}),w.jsx("option",{value:"5-15",children:"5-15"}),w.jsx("option",{value:"15-30",children:"15-30"}),w.jsx("option",{value:"30-50",children:"30-50"}),w.jsx("option",{value:"50-75",children:"50-75"}),w.jsx("option",{value:"75-100",children:"75-100"}),w.jsx("option",{value:"100-150",children:"100-150"}),w.jsx("option",{value:"150-200",children:"150-200"}),w.jsx("option",{value:"200+",children:"200+"})]})]}),U&&w.jsx("div",{className:"error-message",style:{marginTop:"15px",marginBottom:"10px"},children:U}),w.jsx("button",{type:"submit",className:"primary-button",disabled:ve,style:{marginTop:"20px"},children:ee?"Loading...":"Submit"})]})})]})},vA=()=>{const[r,o]=N.useState(!1),[a,f]=N.useState(""),p=N.useRef(null),x=Wn(),y=Mr();return N.useEffect(()=>{const v=new URLSearchParams(y.search).get("session_id");return(async()=>{let S="/";if(!v){f("Missing session ID"),o(!0),p.current=setTimeout(()=>{o(!1),x(S)},2e3);return}try{const I=localStorage.getItem("access_token");if(!I){f("Authentication required"),o(!0),p.current=setTimeout(()=>{o(!1),x(S)},2e3);return}const R=await fetch(`${window.server_url}/organizer-signup-success?session_id=${v}`,{headers:{Authorization:`Bearer ${I}`}}),M=await R.json();if(!R.ok||M.error)console.error("Payment verification failed:",M.error),f(M.error||"Payment verification failed");else try{const L=await fetch(`${window.server_url}/view_my_active_lobbies`,{headers:{Authorization:`Bearer ${I}`}});if(L.ok){const B=await L.json();S=!!(B&&Array.isArray(B.lobbies)&&B.lobbies.length>0)?"/":"/create_lobby"}else S="/"}catch(L){console.error("Error checking active lobbies:",L),S="/"}}catch(I){console.error("Error verifying payment:",I),f("Failed to verify payment")}o(!0),p.current=setTimeout(()=>{o(!1),x(S)},2e3)})(),()=>{p.current&&(clearTimeout(p.current),p.current=null)}},[y.search,x]),r?w.jsxs("div",{className:"success-overlay",children:[w.jsx("div",{className:"success-text",children:"Success! You're now an organizer!"}),a&&w.jsx("div",{className:"success-error",style:{marginTop:"20px"},children:a})]}):w.jsx("div",{className:"signup-container",children:w.jsx("div",{className:"loading-message",children:"Processing..."})})},CA=()=>{const{user:r,checkAuth:o,permissions:a}=N.useContext(Jn),f=Wn(),[p,x]=N.useState(null),[y,A]=N.useState(!0),[v,E]=N.useState(!1),[S,I]=N.useState(""),[R,M]=N.useState(!1),[L,B]=N.useState(!1);N.useEffect(()=>{a!==null&&a!=="admin"&&a!=="organizer"&&f("/organizer-signup")},[a,f]),N.useEffect(()=>{r&&(async()=>{try{const V=localStorage.getItem("access_token");if(!V){f("/organizer-signup");return}const ee=await fetch(`${window.server_url}/organizer-account-details`,{headers:{Authorization:`Bearer ${V}`}}),re=await ee.json();if(!ee.ok||re.error){if((a==="admin"||a==="organizer")&&re.has_subscription!==!1){I(re.error||"Some subscription details may be incomplete"),x(re),A(!1);return}if(re.has_subscription===!1){f("/organizer-signup");return}I(re.error||"Failed to load account details"),re.has_subscription!==!1&&x(re),A(!1);return}if(re.has_subscription===!1){f("/organizer-signup");return}x(re)}catch(V){console.error("Error fetching account details:",V),I("Failed to load account details. Please try again.")}finally{A(!1)}})()},[r,a,f]),N.useEffect(()=>(R?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[R]);const j=U=>U?new Date(U*1e3).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):null,z=async()=>{E(!0),I("");try{const U=localStorage.getItem("access_token");if(!U){I("Authentication required"),E(!1);return}const V=await fetch(`${window.server_url}/cancel-subscription`,{method:"POST",headers:{Authorization:`Bearer ${U}`,"Content-Type":"application/json"}}),ee=await V.json();if(!V.ok||ee.error){I(ee.error||"Failed to cancel subscription"),E(!1),M(!1);return}B(!0),M(!1),setTimeout(()=>{f("/")},1500)}catch(U){console.error("Error canceling subscription:",U),I("An error occurred. Please try again."),E(!1),M(!1)}};return y?w.jsx("div",{className:"signup-container",children:w.jsx("div",{className:"loading-message",children:"Loading account details..."})}):!p&&!y?w.jsxs("div",{className:"signup-container",children:[w.jsx("button",{onClick:()=>f("/"),className:"homescreen-button",children:"Home"}),w.jsx("div",{className:"error-message",children:S||"No account details found"})]}):p?w.jsxs("div",{className:"signup-container",children:[w.jsx("button",{onClick:()=>f("/"),className:"homescreen-button",children:"Home"}),w.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),w.jsx("h3",{className:"signup-header",children:"Organizer Account Details"}),w.jsx("div",{className:"step-form-container",children:w.jsxs("div",{className:"account-details-content",children:[S&&w.jsx("div",{className:"error-message",style:{marginBottom:"20px"},children:S}),p.subscription_status&&w.jsxs("div",{className:"detail-row",children:[w.jsx("span",{className:"detail-label",children:"Subscription Status:"}),w.jsx("span",{className:`detail-value status-${p.subscription_status}`,children:p.subscription_status})]}),p.email&&w.jsxs("div",{className:"detail-row",children:[w.jsx("span",{className:"detail-label",children:"Email:"}),w.jsx("span",{className:"detail-value",children:p.email})]}),p.billing_period&&w.jsxs("div",{className:"detail-row",children:[w.jsx("span",{className:"detail-label",children:"Billing Period:"}),w.jsx("span",{className:"detail-value",children:p.billing_period})]}),p.amount!==null&&p.amount!==void 0&&w.jsxs("div",{className:"detail-row",children:[w.jsx("span",{className:"detail-label",children:"Amount:"}),w.jsxs("span",{className:"detail-value",children:["$",p.amount," ",p.currency||""]})]}),p.current_period_start&&j(p.current_period_start)&&w.jsxs("div",{className:"detail-row",children:[w.jsx("span",{className:"detail-label",children:"Current Period Start:"}),w.jsx("span",{className:"detail-value",children:j(p.current_period_start)})]}),p.current_period_end&&j(p.current_period_end)&&w.jsxs("div",{className:"detail-row",children:[w.jsx("span",{className:"detail-label",children:"Current Period End:"}),w.jsx("span",{className:"detail-value",children:j(p.current_period_end)})]}),p.cancel_at_period_end&&w.jsxs("div",{className:"detail-row",children:[w.jsx("span",{className:"detail-label",children:"Cancellation:"}),w.jsx("span",{className:"detail-value",children:"Will cancel at period end"})]}),w.jsx("button",{onClick:()=>M(!0),className:"primary-button cancel-button",style:{marginTop:"30px"},children:"Cancel Subscription"})]})}),R&&w.jsx("div",{className:"modal-overlay",onClick:U=>U.stopPropagation(),children:w.jsxs("div",{className:"modal-content",onClick:U=>U.stopPropagation(),children:[w.jsx("h3",{children:"Cancel Subscription"}),w.jsx("p",{children:"Are you sure you want to cancel your subscription?"}),w.jsxs("div",{className:"modal-buttons",children:[w.jsx("button",{className:"modal-button modal-cancel",onClick:()=>M(!1),disabled:v,children:"Cancel"}),w.jsx("button",{className:"modal-button modal-confirm",onClick:z,disabled:v,children:v?"Processing...":"Confirm"})]})]})}),L&&w.jsx("div",{className:"toast-container",children:w.jsx("div",{className:"toast-message",children:"Subscription canceled successfully"})})]}):null},of=({size:r=60,className:o=""})=>w.jsx("div",{className:`attendees-spinner ${o}`,style:{width:r,height:r},children:w.jsx("div",{className:"attendees-spinner-inner"})}),_d=["#6366f1","#8b5cf6","#ec4899","#f59e0b","#10b981","#3b82f6","#ef4444","#14b8a6","#f97316","#a855f7","#06b6d4","#84cc16"],EA=r=>{if(!r)return _d[0];let o=0;for(let f=0;f<r.length;f++)o=r.charCodeAt(f)+((o<<5)-o);const a=Math.abs(o)%_d.length;return _d[a]},af=tn.memo(({tag:r})=>{const o=EA(r);return w.jsx("span",{className:"attendee-modal-tag-pill",style:{background:o},children:r})});af.displayName="TagPill";const bA=r=>{if(!r)return"Date not available";let o;if(typeof r=="number")o=r<1e10?new Date(r*1e3):new Date(r);else if(typeof r=="string")o=new Date(r);else return"Date not available";return isNaN(o.getTime())?"Date not available":o.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},AA=({attendees:r=[]})=>{const o=N.useRef(null),a=N.useRef(null),f=N.useRef(null),[p,x]=N.useState(null),[y,A]=N.useState(!1),[v,E]=N.useState({}),[S,I]=N.useState(!1),[R,M]=N.useState({}),L=N.useRef(-1),B=N.useRef(null),[j,z]=N.useState(!1),[U,V]=N.useState(null),[ee,re]=N.useState({}),[ne,q]=N.useState(!1),[le,K]=N.useState(null),[Re,Be]=N.useState(null),[Ne,Le]=N.useState(!1),Se=N.useRef(null),Q=N.useRef(null),Fe=N.useRef({}),ge=N.useRef(null);N.useEffect(()=>{const ue=window.matchMedia("(pointer: coarse)"),ye=()=>A(!!ue.matches);return ye(),ue.addEventListener?ue.addEventListener("change",ye):ue.addListener(ye),()=>{ue.removeEventListener?ue.removeEventListener("change",ye):ue.removeListener(ye)}},[]),N.useEffect(()=>{const ue=ye=>{a.current&&(a.current.contains(ye.target)||x(null))};return document.addEventListener("pointerdown",ue,{capture:!0}),()=>{document.removeEventListener("pointerdown",ue,{capture:!0})}},[]);const me=N.useCallback((ue=1)=>{const ye=o.current;if(!ye)return;const Xe=Math.round(ye.clientWidth*.75)*ue;ye.scrollBy({left:Xe,behavior:"smooth"})},[]),ze=N.useCallback(()=>{const ue=o.current;return ue?ue.scrollLeft>0:!1},[]),ce=N.useCallback(()=>{const ue=o.current;return ue?ue.scrollLeft<ue.scrollWidth-ue.clientWidth-1:!1},[]),[W,Y]=N.useState({left:!1,right:!0});N.useEffect(()=>{const ue=()=>{Y({left:ze(),right:ce()})},ye=o.current;return ye&&(ue(),ye.addEventListener("scroll",ue),window.addEventListener("resize",ue)),()=>{ye&&(ye.removeEventListener("scroll",ue),window.removeEventListener("resize",ue))}},[r.length,ze,ce]);const pe=N.useCallback(async ue=>{if(S||ue.length===0)return;const ye=ue.filter(ht=>!v[ht]&&!R[ht]);if(ye.length===0)return;I(!0);const Xe={...R};ye.forEach(ht=>{Xe[ht]=!0}),M(Xe);try{const ht=localStorage.getItem("access_token"),Pt=await fetch(`${window.server_url}/organizer_attendees/images`,{method:"POST",headers:{Authorization:`Bearer ${ht}`,"Content-Type":"application/json"},body:JSON.stringify({usernames:ye})});if(!Pt.ok)throw Pt.status===401?new Error("Unauthorized"):new Error("Failed to load images");const xt=await Pt.json();if(xt.status==="success"&&xt.images){const Je={...v};ye.forEach(nt=>{xt.images[nt]?Je[nt]=`data:image/jpeg;base64,${xt.images[nt]}`:Je[nt]=null}),E(Je)}}catch(ht){console.error("Error loading images:",ht)}finally{I(!1);const ht={...R};ye.forEach(Pt=>{delete ht[Pt]}),M(ht)}},[S,v,R]);N.useEffect(()=>{if(r.length===0||L.current>=0)return;const ue=r.slice(0,30).map(ye=>ye.username);ue.length>0&&(pe(ue),L.current=Math.min(29,r.length-1))},[r.length,pe]),N.useEffect(()=>{if(r.length===0||!o.current)return;const ue=new IntersectionObserver(Xe=>{B.current&&clearTimeout(B.current),B.current=setTimeout(()=>{Xe.forEach(ht=>{if(ht.isIntersecting){const Pt=parseInt(ht.target.dataset.index),xt=L.current;if(Pt>=xt-5&&Pt<r.length&&xt<r.length-1){const Je=xt+1,nt=Math.min(Je+30,r.length);if(Je<r.length){const Nt=r.slice(Je,nt).map(Pe=>Pe.username);pe(Nt),L.current=nt-1}}}})},150)},{root:o.current,rootMargin:"200px",threshold:.5});return o.current.querySelectorAll("[data-index]").forEach(Xe=>ue.observe(Xe)),f.current=ue,()=>{B.current&&clearTimeout(B.current),f.current&&f.current.disconnect()}},[r.length,pe]);const ve=N.useCallback(()=>!U||r.length===0?-1:r.findIndex(ue=>ue.username===U),[U,r]),Ee=N.useCallback(ue=>{var ht;const ye=ve();if(ye===-1||r.length===0)return null;let Xe;return ue==="next"?Xe=(ye+1)%r.length:Xe=ye===0?r.length-1:ye-1,((ht=r[Xe])==null?void 0:ht.username)||null},[ve,r]),ie=N.useCallback(async ue=>{const ye=Ee(ue);ye&&(Be(ue==="next"?"left":"right"),ge.current&&clearTimeout(ge.current),ge.current=setTimeout(()=>{Be(null),ge.current=null},400),await Ve(ye,!1))},[Ee]),be=N.useMemo(()=>!(r.length<=1),[r.length]),Ae=N.useMemo(()=>!(r.length<=1),[r.length]),Ve=N.useCallback(async(ue,ye=!0)=>{var Xe,ht,Pt,xt;if(Fe.current[ue]){V(ue),z(!0),K(null),Le(ye);return}Se.current&&Se.current,Se.current=ue,q(!0),K(null),z(!0),V(ue),Le(ye);try{const Je=localStorage.getItem("access_token");if(!Je)throw new Error("Authentication required");const nt=await fetch(`${window.server_url}/organizer_attendees/${ue}/details`,{headers:{Authorization:`Bearer ${Je}`}});if(Se.current!==ue)return;if(nt.status===401)throw localStorage.removeItem("access_token"),new Error("Session expired. Please log in again.");if(nt.status===403)throw new Error("Access denied. Organizer permissions required.");if(nt.status===404)throw new Error("Attendee details not found.");if(!nt.ok)throw new Error("Failed to load attendee details");const Nt=await nt.json();if(Nt.status==="success"&&Nt.attendee){const Pe={username:Nt.attendee.username,name:Nt.attendee.name||Nt.attendee.username,image_data:Nt.attendee.image_data?`data:image/jpeg;base64,${Nt.attendee.image_data}`:null,last_joined_date:Nt.attendee.last_joined_date,self_tags:((Xe=Nt.attendee.tags)==null?void 0:Xe.tags_work)||[],desiring_tags:((ht=Nt.attendee.tags)==null?void 0:ht.desiring_tags_work)||[],lobbies_attended:((Pt=Nt.attendee.stats)==null?void 0:Pt.lobbies_attended)||0,rounds_paired:((xt=Nt.attendee.stats)==null?void 0:xt.rounds_paired)||0};re(yn=>{const Ct={...yn,[ue]:Pe};return Fe.current=Ct,Ct}),Se.current===ue&&V(ue)}else throw new Error(Nt.error||"Failed to load attendee details")}catch(Je){Se.current===ue&&(console.error("Error fetching attendee details:",Je),K(Je.message||"An error occurred while loading details."))}finally{Se.current===ue&&(q(!1),Se.current=null)}},[]),De=N.useCallback(()=>{Q.current&&clearTimeout(Q.current),ge.current&&clearTimeout(ge.current),z(!1),K(null),Be(null),Le(!1),Q.current=setTimeout(()=>{V(null),Q.current=null},300)},[]);N.useEffect(()=>()=>{Q.current&&clearTimeout(Q.current)},[]),N.useEffect(()=>{const ue=ye=>{ye.key==="Escape"&&j&&(ye.stopPropagation(),De())};return document.addEventListener("keydown",ue,!0),()=>document.removeEventListener("keydown",ue,!0)},[j,De]),N.useEffect(()=>{if(j){const ue=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=ue}}},[j]),N.useEffect(()=>()=>{ge.current&&clearTimeout(ge.current)},[]);const tt=N.useMemo(()=>r.map((ue,ye)=>({username:ue.username||`temp-${ye}`,name:ue.name||ue.username||`User ${ye+1}`,small_image_data:ue.small_image_data||null})),[r]);return w.jsxs("section",{className:`attendees-root ${j&&Ne?"attendees-root-modal-open":""}`,ref:a,"aria-label":"Your Community",children:[w.jsxs("div",{className:"attendees-card",children:[w.jsx("header",{className:"attendees-header",children:w.jsx("h2",{className:"attendees-title",children:"Your Community"})}),w.jsxs("div",{className:"attendees-carouselWrap",children:[w.jsx("button",{type:"button",className:"attendees-arrow attendees-arrowLeft","aria-label":"Scroll left",onClick:()=>me(-1),disabled:!W.left||y,children:""}),w.jsx("div",{ref:o,className:"attendees-scroller",role:"list","aria-label":"Community attendees list",onMouseLeave:()=>{y||x(null)},children:tt.map((ue,ye)=>{const Xe=p===ue.username,ht=p!==null,Pt=v[ue.username],xt=R[ue.username];return w.jsxs("div",{"data-index":ye,className:["attendees-item",Xe?"is-active":"",ht&&!Xe?"is-dimmed":"",y?"is-touch":"is-mouse"].join(" "),role:"listitem",tabIndex:0,onMouseEnter:()=>{y||x(ue.username)},onFocus:()=>x(ue.username),onClick:()=>{y&&x(ue.username),Ve(ue.username,!0)},onKeyDown:Je=>{(Je.key==="Enter"||Je.key===" ")&&(Je.preventDefault(),x(ue.username)),Je.key==="Escape"&&x(null)},children:[w.jsx("div",{className:"attendees-avatarWrap","aria-hidden":"true",children:xt?w.jsx(of,{size:30,className:"attendees-tile-spinner"}):Pt?w.jsx("img",{className:"attendees-avatarImg",src:Pt,alt:"",onError:Je=>{Je.target.src="/assets/fakeprofile.png"}}):w.jsx("img",{className:"attendees-avatarImg",src:"/assets/fakeprofile.png",alt:""})}),w.jsx("div",{className:"attendees-name",title:ue.name,children:ue.name})]},ue.username)})}),w.jsx("button",{type:"button",className:"attendees-arrow attendees-arrowRight","aria-label":"Scroll right",onClick:()=>me(1),disabled:!W.right||y,children:""})]}),w.jsxs("div",{className:"attendees-dots","aria-hidden":"true",children:[w.jsx("span",{className:"attendees-dot is-on"}),w.jsx("span",{className:"attendees-dot"}),w.jsx("span",{className:"attendees-dot"}),w.jsx("span",{className:"attendees-dot"})]})]}),j&&w.jsxs(w.Fragment,{children:[r.length>1&&w.jsxs(w.Fragment,{children:[w.jsx("button",{type:"button",className:"attendee-modal-nav-arrow attendee-modal-nav-left",onClick:ue=>{ue.stopPropagation(),ie("prev")},disabled:!be,children:""}),w.jsx("button",{type:"button",className:"attendee-modal-nav-arrow attendee-modal-nav-right",onClick:ue=>{ue.stopPropagation(),ie("next")},disabled:!Ae,children:""})]}),w.jsx("div",{className:"attendee-modal-overlay",onClick:De,children:w.jsx("div",{className:`attendee-modal-content ${Re?`swipe-${Re}`:""}`,onClick:ue=>ue.stopPropagation(),children:ne?w.jsxs("div",{className:"attendee-modal-loading",children:[w.jsx(of,{size:60}),w.jsx("p",{children:"Loading attendee details..."})]}):le?w.jsx("div",{className:"attendee-modal-error",children:w.jsx("p",{className:"attendee-modal-error-message",children:le})}):U&&ee[U]?w.jsx("div",{className:"attendee-modal-inner",children:(()=>{const ue=ee[U];return w.jsxs(w.Fragment,{children:[w.jsx("h2",{className:"attendee-modal-header",id:"attendee-modal-title",children:ue.name}),w.jsxs("div",{className:"attendee-modal-grid",children:[w.jsxs("div",{className:"attendee-modal-left",children:[w.jsx("div",{className:"attendee-modal-date",children:bA(ue.last_joined_date)}),w.jsxs("div",{className:"attendee-modal-profile-card",children:[w.jsx("div",{className:"attendee-modal-profile-img-wrapper",children:ue.image_data?w.jsx("img",{className:"attendee-modal-profile-img",src:ue.image_data,alt:ue.name,onError:ye=>{ye.target.src="/assets/fakeprofile.png"}}):w.jsx("img",{className:"attendee-modal-profile-img",src:"/assets/fakeprofile.png",alt:ue.name})}),w.jsx("div",{className:"attendee-modal-profile-footer",children:ue.name})]})]}),w.jsxs("div",{className:"attendee-modal-right",children:[w.jsxs("div",{className:"attendee-modal-stat",children:[w.jsx("span",{className:"attendee-modal-stat-label",children:"events attended"}),w.jsx("span",{className:"attendee-modal-stat-value",children:ue.lobbies_attended})]}),w.jsxs("div",{className:"attendee-modal-stat",children:[w.jsx("span",{className:"attendee-modal-stat-label",children:"real connections"}),w.jsxs("div",{className:"attendee-modal-stat-value-with-icons",children:[w.jsx("span",{className:"attendee-modal-stat-value",children:ue.rounds_paired}),w.jsx("div",{className:"attendee-modal-staggered-icons",children:[...Array(4)].map((ye,Xe)=>w.jsx("img",{className:"attendee-modal-staggered-icon",src:"/assets/fakeprofile.png",alt:""},Xe))})]})]}),w.jsxs("div",{className:"attendee-modal-tags-section",children:[w.jsx("h3",{className:"attendee-modal-tags-label",children:"who I am:"}),w.jsx("div",{className:"attendee-modal-tags-container",children:ue.self_tags&&ue.self_tags.length>0?ue.self_tags.map((ye,Xe)=>w.jsx(af,{tag:ye},`self-${Xe}-${ye}`)):w.jsx("span",{className:"attendee-modal-empty-state",children:"No tags"})})]}),w.jsxs("div",{className:"attendee-modal-tags-section",children:[w.jsx("h3",{className:"attendee-modal-tags-label",children:"looking for:"}),w.jsx("div",{className:"attendee-modal-tags-container",children:ue.desiring_tags&&ue.desiring_tags.length>0?ue.desiring_tags.map((ye,Xe)=>w.jsx(af,{tag:ye},`desiring-${Xe}-${ye}`)):w.jsx("span",{className:"attendee-modal-empty-state",children:"No tags"})})]})]})]})]})})()}):null})})]})]})},SA=()=>{const{user:r,permissions:o,checkAuth:a}=N.useContext(Jn),f=Wn(),[p,x]=N.useState([]),[y,A]=N.useState(!0),[v,E]=N.useState(null);N.useEffect(()=>{o!==null&&o!=="admin"&&o!=="organizer"&&f("/organizer-signup")},[o,f]),N.useEffect(()=>{a()},[a]);const S=N.useCallback(async()=>{A(!0),E(null);try{const I=localStorage.getItem("access_token");if(!I){E("Authentication required"),A(!1);return}const R=await fetch(`${window.server_url}/organizer_attendees`,{headers:{Authorization:`Bearer ${I}`}});if(R.status===401){localStorage.removeItem("access_token"),f("/organizer-signup");return}if(R.status===403){E("Access denied. Organizer permissions required."),A(!1);return}if(!R.ok)throw new Error("Failed to load attendees");const M=await R.json();if(M.status==="success")x(M.attendees||[]);else throw new Error(M.error||"Failed to load attendees")}catch(I){console.error("Error fetching attendees:",I),I.message==="Failed to fetch"||I.message.includes("network")?E("Network error. Please check your connection and try again."):E(I.message||"An error occurred. Please try again.")}finally{A(!1)}},[f]);return N.useEffect(()=>{(o==="organizer"||o==="admin")&&S()},[o,S]),w.jsxs("div",{className:"organizer-dashboard",children:[w.jsxs("div",{className:"dashboard-header",children:[w.jsx("h1",{children:"Organizer Dashboard"}),w.jsx("button",{onClick:()=>f("/"),className:"dashboard-home-button",children:"Home"})]}),y?w.jsx("div",{className:"attendees-loading-container",children:w.jsx(of,{size:60})}):v?w.jsxs("div",{className:"attendees-error-container",children:[w.jsx("div",{className:"attendees-error-message",children:v}),w.jsx("button",{className:"attendees-retry-button",onClick:S,children:"Retry"})]}):p.length===0?w.jsx("div",{className:"attendees-empty-container",children:w.jsx("div",{className:"attendees-empty-message",children:"No attendees yet"})}):w.jsx(AA,{attendees:p})]})},TA=5e3,IA=()=>{const{checkAuth:r,permissions:o,user:a}=N.useContext(Jn),f=Wn(),[p,x]=N.useState([]),[y,A]=N.useState(!0),[v,E]=N.useState(null),[S,I]=N.useState(!1);return N.useEffect(()=>{r()},[r]),N.useEffect(()=>{a==="topaz"&&o==="admin"?I(!0):o!==null&&a!==null&&f("/")},[o,a,f]),N.useEffect(()=>{if(!S)return;let R=!0,M,L=!0;const B=async()=>{L&&A(!0),E(null);try{const j=localStorage.getItem("access_token");if(!j)return;const z=await fetch(window.server_url+"/admin_all_lobbies",{headers:{Authorization:`Bearer ${j}`}});if(!z.ok)throw new Error("Failed to fetch lobbies");const U=await z.json();if(U.status!=="success"||!Array.isArray(U.lobbies))throw new Error("Invalid response format");if(!R)return;x(U.lobbies),console.log("Received lobbies data:",U.lobbies)}catch(j){R&&E(j.message||"Error fetching lobbies")}finally{R&&L&&A(!1),L=!1,M=setTimeout(B,TA)}};return B(),()=>{R=!1,M&&clearTimeout(M)}},[S]),y?w.jsx("div",{className:"master-lobby-container",children:w.jsxs("div",{className:"loading-state",children:[w.jsx("div",{className:"loading-spinner"}),w.jsx("p",{children:"Loading lobbies..."})]})}):v&&p.length===0?w.jsx("div",{className:"master-lobby-container",children:w.jsx("div",{className:"error-state",children:w.jsx("p",{children:v})})}):p.length===0?w.jsx("div",{className:"master-lobby-container",children:w.jsx("div",{className:"empty-state",children:w.jsx("p",{children:"No active lobbies found"})})}):w.jsxs("div",{className:"master-lobby-container",children:[w.jsx("button",{className:"back-button",onClick:()=>f(-1),children:"Back"}),v&&w.jsxs("div",{className:"error-banner",style:{backgroundColor:"#f8d7da",color:"#721c24",padding:"0.75rem",marginBottom:"1rem",borderRadius:"0.25rem",border:"1px solid #f5c6cb"},children:[v," (showing last known data)"]}),w.jsx("div",{className:"master-lobby-grid",children:p.map(R=>w.jsx("div",{className:"lobby-tile",children:w.jsxs("div",{className:"lobby-tile-content",children:[w.jsx("h3",{className:"lobby-code",children:R.code}),w.jsxs("div",{className:"lobby-stats",children:[w.jsxs("span",{className:"player-count",children:[R.player_count," players"]}),w.jsx("span",{className:"lobby-state",children:R.lobby_state})]}),w.jsxs("div",{style:{fontSize:"0.7rem",color:"#666",marginTop:"0.5rem"},children:["Debug: player_count=",R.player_count,", lobby_state=",R.lobby_state]})]})},R.code))})]})},Gp=({size:r=60,className:o=""})=>w.jsx("div",{className:`attendees-spinner ${o}`,style:{width:r,height:r},children:w.jsx("div",{className:"attendees-spinner-inner"})}),NA=r=>r?`data:image/jpeg;base64,${r}`:"/assets/fakeprofile.png",Rd=r=>[...r].sort((o,a)=>{var A,v,E,S;const f=o.lobby_date?new Date(o.lobby_date).getTime():0,p=a.lobby_date?new Date(a.lobby_date).getTime():0;if(f!==p)return p-f;const x=(((A=o.paired_with)==null?void 0:A.name)||((v=o.paired_with)==null?void 0:v.username)||"").toLowerCase(),y=(((E=a.paired_with)==null?void 0:E.name)||((S=a.paired_with)==null?void 0:S.username)||"").toLowerCase();return x<y?-1:x>y?1:0}),_A=(r,o)=>{var y;if(!r||r.length===0)return{hasNew:o.length>0,hasUpdated:!1};const a=new Set(r.map(A=>{var v;return(v=A.paired_with)==null?void 0:v.username})),f=o.some(A=>{var v;return((v=A.paired_with)==null?void 0:v.username)&&!a.has(A.paired_with.username)});let p=!1;const x=new Map(r.map(A=>{var v;return[(v=A.paired_with)==null?void 0:v.username,A]}));for(const A of o){const v=(y=A.paired_with)==null?void 0:y.username;if(!v)continue;const E=x.get(v);if(E&&JSON.stringify(E)!==JSON.stringify(A)){p=!0;break}}return{hasNew:f,hasUpdated:p}},RA=(r,o,a)=>{var x;if(!r||r.length===0)return o;const f=[...r],p=[];for(const y of o){const A=(x=y.paired_with)==null?void 0:x.username;if(!A)continue;const v=f.findIndex(E=>{var S;return((S=E.paired_with)==null?void 0:S.username)===A});v>=0?f[v]=y:p.push(y)}return[...p,...f]},xc=(r,o)=>{var p;const a=(p=r.paired_with)==null?void 0:p.username;if(a)return a;const f=`${r.lobby_date||""}-${r.interaction_date||""}`;return f!=="-"?f:`interaction-${o}`},cc=(r,o)=>r.find((a,f)=>xc(a,f)===o)||null,Xp=async(r,o,a,f)=>{try{const p=localStorage.getItem("access_token");if(!p)throw new Error("Not authenticated");const x=await fetch(`${window.server_url}/update-paired-interaction`,{method:"PATCH",headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"},body:JSON.stringify({lobby_id:r,paired_with_username:o,...a}),signal:f});if(!x.ok){const A=await x.text();throw new Error(A||`HTTP ${x.status}`)}return{success:!0,data:await x.json()}}catch(p){if(p.name==="AbortError")throw p;return{success:!1,error:p.message}}},kA=({rating:r,onRatingChange:o,interactionKey:a})=>{const f=r||0,p=x=>{o(x)};return w.jsxs("div",{className:"star-rating-container",children:[w.jsx("div",{className:"star-rating-question",children:"How was the chat?"}),w.jsx("div",{className:"star-rating-stars",children:[1,2,3,4,5].map(x=>w.jsx("button",{type:"button",className:`star-button ${x<=f?"star-filled":"star-empty"}`,onClick:()=>p(x),"aria-label":`Rate ${x} star${x!==1?"s":""}`,children:""},x))}),w.jsx("div",{className:"star-rating-disclaimer",children:"(Don't worry, your response is hidden)"})]})},PA=({value:r,onChange:o,interactionKey:a})=>{const f=p=>{o(p)};return w.jsxs("div",{className:"share-contact-container",children:[w.jsx("div",{className:"share-contact-question",children:"Share Your Contact?"}),w.jsxs("div",{className:"share-contact-buttons",children:[w.jsx("button",{type:"button",className:`share-contact-button ${r===!1?"selected":""}`,onClick:()=>f(!1),children:"No"}),w.jsx("button",{type:"button",className:`share-contact-button ${r===!0?"selected":""}`,onClick:()=>f(!0),children:"Yes"})]})]})},OA=()=>{const r=Wn(),{checkAuth:o,user:a}=N.useContext(Jn),[f,p]=N.useState([]),[x,y]=N.useState(!0),[A,v]=N.useState(!1),[E,S]=N.useState(!0),[I,R]=N.useState(0),[M,L]=N.useState(null),[B,j]=N.useState(!1),[z,U]=N.useState(new Map),[V,ee]=N.useState(new Map),re=N.useRef(!1),ne=N.useRef(!0),q=N.useRef(null),le=N.useRef(null),K=N.useRef([]),Re=N.useRef(!1),Be=N.useRef(new Map),Ne=N.useRef(new Map),Le=N.useRef(new Map),Se=N.useRef(new Map),Q=N.useRef(new Map),Fe=N.useRef(new Map),ge=N.useCallback(W=>{const Y=Be.current.get(W);Y&&(clearTimeout(Y),Be.current.delete(W));const pe=Ne.current.get(W);pe&&(pe.abort(),Ne.current.delete(W))},[]),me=N.useCallback(async(W,Y,pe)=>{if(!re.current){re.current=!0;try{const ve=localStorage.getItem("access_token");if(!ve){ne.current&&r("/");return}const Ee=`${window.server_url}/paired-player-history?offset=${W}&limit=30`,ie=await fetch(Ee,{headers:{Authorization:`Bearer ${ve}`}});if(!ie.ok){if(ie.status===401){ne.current&&r("/");return}const Ve=await ie.text();throw new Error(`HTTP ${ie.status}: ${Ve}`)}const be=await ie.json();if(!ne.current)return;if(be.status!=="success"||!Array.isArray(be.interactions))throw new Error("Invalid response format");const Ae=Rd(be.interactions);if(pe){const Ve=K.current,De=_A(Ve,Ae),tt=RA(Ve,Ae,!0);console.log("[PairedHistory] Poll update:",{count:Ae.length,hasNew:De.hasNew,hasUpdated:De.hasUpdated});const ue=Rd(tt);p(ue),K.current=ue,S(be.has_more),R(be.next_offset||0),(De.hasNew||De.hasUpdated)&&j(!0)}else Y?(console.log("[PairedHistory] Initial load:",{count:Ae.length}),p(Ae),K.current=Ae,S(be.has_more),R(be.next_offset||0),y(!1)):(p(Ve=>{const De=[...Ve,...Ae],tt=Rd(De);return K.current=tt,tt}),S(be.has_more),R(be.next_offset||0),v(!1));L(null)}catch(ve){if(console.error("[PairedHistory] Error:",{message:ve.message,type:pe?"polling":Y?"initial":"infinite-scroll"}),!ne.current)return;L(ve.message),Un.error(`Error: ${ve.message}`),Y?y(!1):pe||v(!1)}finally{ne.current&&(re.current=!1)}}},[r]);N.useEffect(()=>{if(ne.current=!0,Re.current)return;if(!localStorage.getItem("access_token")){r("/");return}return Re.current=!0,o(),me(0,!0,!1),()=>{ne.current=!1}},[]),N.useEffect(()=>{const W=()=>{document.hidden||re.current||!ne.current||me(0,!1,!0)};if(document.hidden)return;const Y=setInterval(W,5e3),pe=()=>{};return document.addEventListener("visibilitychange",pe),()=>{clearInterval(Y),document.removeEventListener("visibilitychange",pe)}},[me]),N.useEffect(()=>(B&&(q.current&&clearTimeout(q.current),q.current=setTimeout(()=>{ne.current&&j(!1)},4e3)),()=>{q.current&&clearTimeout(q.current)}),[B]),N.useEffect(()=>{if(!E||A||re.current)return;const W=new IntersectionObserver(Y=>{Y[0].isIntersecting&&E&&!A&&!re.current&&ne.current&&(v(!0),me(I,!1,!1))},{root:null,rootMargin:"300px",threshold:.1});return le.current&&W.observe(le.current),()=>{W.disconnect()}},[E,A,I,me]),N.useEffect(()=>{K.current=f},[f]),N.useEffect(()=>{Q.current=z},[z]),N.useEffect(()=>{Fe.current=V},[V]),N.useEffect(()=>{f.length!==0&&(U(W=>{const Y=new Map(W);let pe=!1;return f.forEach((ve,Ee)=>{const ie=xc(ve,Ee);if(!Y.has(ie)){const be=ve.partner_star_rating;be!==null&&be>=1&&be<=5&&(Y.set(ie,be),pe=!0)}}),pe?Y:W}),ee(W=>{const Y=new Map(W);let pe=!1;return f.forEach((ve,Ee)=>{const ie=xc(ve,Ee);if(!Y.has(ie)){const be=ve.user_show_contact;be!==null&&typeof be=="boolean"&&(Y.set(ie,be),pe=!0)}}),pe?Y:W}))},[f]);const ze=N.useCallback((W,Y)=>{var ie;const pe=cc(K.current,W);if(!(pe!=null&&pe.lobby_id)||!((ie=pe.paired_with)!=null&&ie.username)){Un.error("Unable to save: interaction not found");return}let ve=Le.current.get(W);if(ve===void 0){const be=Q.current.get(W),Ae=pe.partner_star_rating;ve=be??(Ae!==null&&Ae>=1&&Ae<=5?Ae:null),Le.current.set(W,ve)}ge(W),U(be=>{const Ae=new Map(be);return Ae.set(W,Y),Q.current=Ae,Ae});const Ee=setTimeout(async()=>{var tt;if(!ne.current)return;const be=cc(K.current,W);if(!(be!=null&&be.lobby_id)||!((tt=be.paired_with)!=null&&tt.username)){if(!ne.current)return;U(ue=>{const ye=new Map(ue);return ve!=null?ye.set(W,ve):ye.delete(W),Q.current=ye,ye}),Le.current.delete(W),Un.error("Unable to save: interaction not found");return}const Ae=new AbortController;Ne.current.set(W,Ae);const Ve=be.paired_with.username,De=be.lobby_id;console.log("[PairedHistory] Updating rating:",{partner_username:Ve,lobby_id:De,rating:Y,previous_rating:ve});try{const ue=await Xp(De,Ve,{partner_star_rating:Y},Ae.signal);if(!ne.current)return;Ne.current.delete(W),ue.success?(Le.current.delete(W),console.log("[PairedHistory] Rating update successful:",{partner_username:Ve,lobby_id:De,rating:Y,response:ue.data}),Un.success("Saved",{duration:1e3,style:{background:"#144dff",color:"white",borderRadius:"8px",padding:"12px 20px",fontSize:"0.9rem",fontWeight:"500"}})):(console.error("[PairedHistory] Rating update failed:",{partner_username:Ve,lobby_id:De,rating:Y,error:ue.error}),U(ye=>{const Xe=new Map(ye);return ve!=null?Xe.set(W,ve):Xe.delete(W),Q.current=Xe,Xe}),Le.current.delete(W),Un.error(ue.error||"Failed to save. Please try again."))}catch(ue){if(!ne.current)return;if(Ne.current.delete(W),ue.name==="AbortError"){console.log("[PairedHistory] Rating update aborted:",{partner_username:Ve,lobby_id:De});return}console.error("[PairedHistory] Rating update error:",{partner_username:Ve,lobby_id:De,rating:Y,error:ue.message}),U(ye=>{const Xe=new Map(ye);return ve!=null?Xe.set(W,ve):Xe.delete(W),Q.current=Xe,Xe}),Le.current.delete(W),Un.error(ue.message||"Failed to save. Please try again.")}},500);Be.current.set(W,Ee)},[ge]),ce=N.useCallback((W,Y)=>{var ie;const pe=cc(K.current,W);if(!(pe!=null&&pe.lobby_id)||!((ie=pe.paired_with)!=null&&ie.username)){Un.error("Unable to save: interaction not found");return}let ve=Se.current.get(W);if(ve===void 0){const be=Fe.current.get(W),Ae=pe.user_show_contact;ve=be??(Ae!==null&&typeof Ae=="boolean"?Ae:null),Se.current.set(W,ve)}ge(W),ee(be=>{const Ae=new Map(be);return Ae.set(W,Y),Fe.current=Ae,Ae});const Ee=setTimeout(async()=>{var tt;if(!ne.current)return;const be=cc(K.current,W);if(!(be!=null&&be.lobby_id)||!((tt=be.paired_with)!=null&&tt.username)){if(!ne.current)return;ee(ue=>{const ye=new Map(ue);return ve!=null?ye.set(W,ve):ye.delete(W),Fe.current=ye,ye}),Se.current.delete(W),Un.error("Unable to save: interaction not found");return}const Ae=new AbortController;Ne.current.set(W,Ae);const Ve=be.paired_with.username,De=be.lobby_id;console.log("[PairedHistory] Updating share contact:",{partner_username:Ve,lobby_id:De,user_show_contact:Y,previous_value:ve});try{const ue=await Xp(De,Ve,{user_show_contact:Y},Ae.signal);if(!ne.current)return;Ne.current.delete(W),ue.success?(Se.current.delete(W),console.log("[PairedHistory] Share contact update successful:",{partner_username:Ve,lobby_id:De,user_show_contact:Y,response:ue.data}),Un.success("Saved",{duration:1e3,style:{background:"#144dff",color:"white",borderRadius:"8px",padding:"12px 20px",fontSize:"0.9rem",fontWeight:"500"}})):(console.error("[PairedHistory] Share contact update failed:",{partner_username:Ve,lobby_id:De,user_show_contact:Y,error:ue.error}),ee(ye=>{const Xe=new Map(ye);return ve!=null?Xe.set(W,ve):Xe.delete(W),Fe.current=Xe,Xe}),Se.current.delete(W),Un.error(ue.error||"Failed to save. Please try again."))}catch(ue){if(!ne.current)return;if(Ne.current.delete(W),ue.name==="AbortError"){console.log("[PairedHistory] Share contact update aborted:",{partner_username:Ve,lobby_id:De});return}console.error("[PairedHistory] Share contact update error:",{partner_username:Ve,lobby_id:De,user_show_contact:Y,error:ue.message}),ee(ye=>{const Xe=new Map(ye);return ve!=null?Xe.set(W,ve):Xe.delete(W),Fe.current=Xe,Xe}),Se.current.delete(W),Un.error(ue.message||"Failed to save. Please try again.")}},300);Be.current.set(W,Ee)},[ge]);return N.useEffect(()=>()=>{ne.current=!1,q.current&&clearTimeout(q.current),Ne.current.forEach(W=>{W.abort()}),Be.current.forEach(W=>{clearTimeout(W)}),Be.current.clear(),Ne.current.clear(),Le.current.clear(),Se.current.clear()},[]),w.jsxs("div",{className:"paired-player-history-container",children:[w.jsx(rh,{position:"top-center"}),B&&w.jsx("div",{className:"new-info-indicator",children:"New Notifications"}),w.jsxs("div",{className:"paired-player-history-content",children:[w.jsx("h1",{className:"paired-player-history-title",children:"Paired Player History"}),x&&w.jsx("div",{className:"loading-grid",children:Array.from({length:30}).map((W,Y)=>w.jsx(Gp,{size:60},Y))}),!x&&f.length===0&&w.jsx("div",{className:"empty-state",children:w.jsx("p",{children:"No Past History Available"})}),!x&&f.length>0&&w.jsxs("div",{className:"interactions-list",children:[f.map((W,Y)=>{const pe=W.paired_with||{},ve=NA(pe.image_data),Ee=xc(W,Y),ie=z.get(Ee)??(W.partner_star_rating!==null&&W.partner_star_rating>=1&&W.partner_star_rating<=5?W.partner_star_rating:null),be=V.has(Ee)?V.get(Ee):W.user_show_contact!==null&&typeof W.user_show_contact=="boolean"?W.user_show_contact:null,Ae=pe.contact_url&&W.partner_show_contact===!0;return w.jsxs("div",{className:"interaction-card",children:[w.jsxs("div",{className:"interaction-card-main",children:[w.jsxs("div",{className:"interaction-card-left",children:[w.jsx("div",{className:"interaction-card-image",children:w.jsx("img",{src:ve,alt:pe.name||"Partner",onError:Ve=>{Ve.target.src="/assets/fakeprofile.png"}})}),w.jsx("div",{className:"interaction-card-name",children:pe.name||pe.username||"Unknown"})]}),w.jsxs("div",{className:"interaction-card-right",children:[w.jsx(kA,{rating:ie,onRatingChange:Ve=>ze(Ee,Ve),interactionKey:Ee}),w.jsx(PA,{value:be,onChange:Ve=>ce(Ee,Ve),interactionKey:Ee})]})]}),Ae&&w.jsxs("div",{className:"interaction-card-contact-row",children:[w.jsx("img",{src:"/assets/contact_url_asset.png",alt:"Contact",className:"contact-url-icon"}),w.jsx("a",{href:pe.contact_url,target:"_blank",rel:"noopener noreferrer",className:"contact-url-link",title:pe.contact_url,children:pe.contact_url})]})]},Ee)}),E&&w.jsx("div",{ref:le,"data-sentinel":"true",className:"infinite-scroll-sentinel",children:A&&w.jsx(Gp,{size:40})}),!E&&w.jsx("div",{className:"no-more-interactions",children:"No more interactions"})]})]})]})},MA=()=>{const r=Wn(),{checkAuth:o}=N.useContext(Jn),[a,f]=N.useState(""),[p,x]=N.useState(""),[y,A]=N.useState(""),[v,E]=N.useState(!0),[S,I]=N.useState(!1),[R,M]=N.useState("");N.useEffect(()=>{(async()=>{var j,z;try{const U=localStorage.getItem("access_token");if(!U){r("/login");return}const V=await fetch(`${window.server_url}/load_user`,{headers:{Authorization:`Bearer ${U}`}});if(V.status===401){localStorage.removeItem("access_token"),r("/login");return}if(!V.ok)throw new Error("Failed to load user data");const ee=await V.json();f(((j=ee.profile)==null?void 0:j.name)||""),x(ee.email||""),A(((z=ee.profile)==null?void 0:z.contact_url)||"")}catch(U){console.error("Error fetching user data:",U),M("Failed to load user data. Please try again.")}finally{E(!1)}})()},[r]);const L=async B=>{B.preventDefault(),I(!0),M("");try{const j=localStorage.getItem("access_token");if(!j){r("/login");return}const z={name:a||"",email:p||"",contact_url:y||""},U=await fetch(`${window.server_url}/update_profile`,{method:"POST",headers:{Authorization:`Bearer ${j}`,"Content-Type":"application/json"},body:JSON.stringify(z)});if(U.status===401){localStorage.removeItem("access_token"),r("/login");return}if(!U.ok){const V=await U.json();throw new Error(V.message||"Failed to update profile")}Un.success("Profile updated successfully!",{duration:2e3,style:{background:"#4b73ef",color:"white",borderRadius:"8px",padding:"12px 20px",fontSize:"0.9rem",fontWeight:"500"}}),await o(),setTimeout(()=>{r("/paired-player-history")},1500)}catch(j){console.error("Error updating profile:",j),M(j.message||"An error occurred. Please try again.")}finally{I(!1)}};return v?w.jsx("div",{className:"post-event-auth-container",children:w.jsx("div",{className:"loading-message",children:"Loading..."})}):w.jsxs("div",{className:"post-event-auth-container",children:[w.jsx(rh,{position:"top-center"}),w.jsx("button",{onClick:()=>r("/"),className:"homescreen-button",children:"Home"}),w.jsx("h3",{className:"post-event-auth-header",children:"Gain Access to Your Matches"}),w.jsx("div",{className:"step-form-container",children:w.jsxs("form",{onSubmit:L,children:[R&&w.jsx("div",{className:"error-message",style:{marginBottom:"20px"},children:R}),w.jsxs("div",{style:{marginTop:"0"},children:[w.jsx("label",{className:"step-label",children:"Name"}),w.jsx("input",{type:"text",value:a,onChange:B=>f(B.target.value),placeholder:"Enter your name",className:"step-input"})]}),w.jsxs("div",{style:{marginTop:"20px"},children:[w.jsx("label",{className:"step-label",children:"Email"}),w.jsx("input",{type:"email",value:p,onChange:B=>x(B.target.value),placeholder:"Enter your email",className:"step-input"})]}),w.jsxs("div",{style:{marginTop:"20px"},children:[w.jsx("label",{className:"step-label",children:"Contact URL"}),w.jsx("input",{type:"text",value:y,onChange:B=>A(B.target.value),placeholder:"Enter your contact URL (e.g., https://linkedin.com/...)",className:"step-input"})]}),w.jsx("button",{type:"submit",className:"primary-button",disabled:S,style:{marginTop:"30px"},children:S?"Submitting...":"Submit"})]})})]})};o2.createRoot(document.getElementById("root")).render(w.jsx(N.StrictMode,{children:w.jsx(a2,{children:w.jsxs(Gy,{basename:"/",children:[w.jsx($E,{}),w.jsx(ZE,{}),w.jsxs(Cy,{children:[w.jsx(cr,{path:"/",element:w.jsx(YE,{})}),w.jsx(cr,{path:"/login",element:w.jsx(KE,{})}),w.jsx(cr,{path:"/signup",element:w.jsx(FE,{})}),w.jsx(cr,{path:"/logout",element:w.jsx(qE,{})}),w.jsx(cr,{path:"/lobby",element:w.jsx(Cb,{})}),w.jsx(cr,{path:"/admin_lobby_view",element:w.jsx(gA,{})}),w.jsx(cr,{path:"/create_lobby",element:w.jsx(xA,{})}),w.jsx(cr,{path:"/product-selection",element:w.jsx(mA,{})}),w.jsx(cr,{path:"/organizer-signup",element:w.jsx(wA,{})}),w.jsx(cr,{path:"/organizer-signup-success",element:w.jsx(vA,{})}),w.jsx(cr,{path:"/organizer-account-details",element:w.jsx(CA,{})}),w.jsx(cr,{path:"/organizer-dashboard",element:w.jsx(SA,{})}),w.jsx(cr,{path:"/master_lobby_view",element:w.jsx(IA,{})}),w.jsx(cr,{path:"/paired-player-history",element:w.jsx(OA,{})}),w.jsx(cr,{path:"/post-event-auth",element:w.jsx(MA,{})})]})]})})}));
