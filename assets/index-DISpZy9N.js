(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))f(p);new MutationObserver(p=>{for(const x of p)if(x.type==="childList")for(const y of x.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&f(y)}).observe(document,{childList:!0,subtree:!0});function a(p){const x={};return p.integrity&&(x.integrity=p.integrity),p.referrerPolicy&&(x.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?x.credentials="include":p.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function f(p){if(p.ep)return;p.ep=!0;const x=a(p);fetch(p.href,x)}})();var Jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fp(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ed={exports:{}},Aa={},td={exports:{}},Tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W0;function Hx(){if(W0)return Tt;W0=1;var r=Symbol.for("react.element"),o=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),y=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),I=Symbol.iterator;function _(K){return K===null||typeof K!="object"?null:(K=I&&K[I]||K["@@iterator"],typeof K=="function"?K:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,B={};function F(K,H,pe){this.props=K,this.context=H,this.refs=B,this.updater=pe||D}F.prototype.isReactComponent={},F.prototype.setState=function(K,H){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,H,"setState")},F.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function j(){}j.prototype=F.prototype;function W(K,H,pe){this.props=K,this.context=H,this.refs=B,this.updater=pe||D}var z=W.prototype=new j;z.constructor=W,L(z,F.prototype),z.isPureReactComponent=!0;var J=Array.isArray,ne=Object.prototype.hasOwnProperty,de={current:null},q={key:!0,ref:!0,__self:!0,__source:!0};function ce(K,H,pe){var Oe,we={},oe=null,Me=null;if(H!=null)for(Oe in H.ref!==void 0&&(Me=H.ref),H.key!==void 0&&(oe=""+H.key),H)ne.call(H,Oe)&&!q.hasOwnProperty(Oe)&&(we[Oe]=H[Oe]);var Ne=arguments.length-2;if(Ne===1)we.children=pe;else if(1<Ne){for(var Ve=Array(Ne),me=0;me<Ne;me++)Ve[me]=arguments[me+2];we.children=Ve}if(K&&K.defaultProps)for(Oe in Ne=K.defaultProps,Ne)we[Oe]===void 0&&(we[Oe]=Ne[Oe]);return{$$typeof:r,type:K,key:oe,ref:Me,props:we,_owner:de.current}}function Z(K,H){return{$$typeof:r,type:K.type,key:H,ref:K.ref,props:K.props,_owner:K._owner}}function Ae(K){return typeof K=="object"&&K!==null&&K.$$typeof===r}function ke(K){var H={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(pe){return H[pe]})}var Ie=/\/+/g;function Pe(K,H){return typeof K=="object"&&K!==null&&K.key!=null?ke(""+K.key):H.toString(36)}function Fe(K,H,pe,Oe,we){var oe=typeof K;(oe==="undefined"||oe==="boolean")&&(K=null);var Me=!1;if(K===null)Me=!0;else switch(oe){case"string":case"number":Me=!0;break;case"object":switch(K.$$typeof){case r:case o:Me=!0}}if(Me)return Me=K,we=we(Me),K=Oe===""?"."+Pe(Me,0):Oe,J(we)?(pe="",K!=null&&(pe=K.replace(Ie,"$&/")+"/"),Fe(we,H,pe,"",function(me){return me})):we!=null&&(Ae(we)&&(we=Z(we,pe+(!we.key||Me&&Me.key===we.key?"":(""+we.key).replace(Ie,"$&/")+"/")+K)),H.push(we)),1;if(Me=0,Oe=Oe===""?".":Oe+":",J(K))for(var Ne=0;Ne<K.length;Ne++){oe=K[Ne];var Ve=Oe+Pe(oe,Ne);Me+=Fe(oe,H,pe,Ve,we)}else if(Ve=_(K),typeof Ve=="function")for(K=Ve.call(K),Ne=0;!(oe=K.next()).done;)oe=oe.value,Ve=Oe+Pe(oe,Ne++),Me+=Fe(oe,H,pe,Ve,we);else if(oe==="object")throw H=String(K),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return Me}function ee(K,H,pe){if(K==null)return K;var Oe=[],we=0;return Fe(K,Oe,"","",function(oe){return H.call(pe,oe,we++)}),Oe}function He(K){if(K._status===-1){var H=K._result;H=H(),H.then(function(pe){(K._status===0||K._status===-1)&&(K._status=1,K._result=pe)},function(pe){(K._status===0||K._status===-1)&&(K._status=2,K._result=pe)}),K._status===-1&&(K._status=0,K._result=H)}if(K._status===1)return K._result.default;throw K._result}var xe={current:null},he={transition:null},Le={ReactCurrentDispatcher:xe,ReactCurrentBatchConfig:he,ReactCurrentOwner:de};function fe(){throw Error("act(...) is not supported in production builds of React.")}return Tt.Children={map:ee,forEach:function(K,H,pe){ee(K,function(){H.apply(this,arguments)},pe)},count:function(K){var H=0;return ee(K,function(){H++}),H},toArray:function(K){return ee(K,function(H){return H})||[]},only:function(K){if(!Ae(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},Tt.Component=F,Tt.Fragment=a,Tt.Profiler=p,Tt.PureComponent=W,Tt.StrictMode=f,Tt.Suspense=w,Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Le,Tt.act=fe,Tt.cloneElement=function(K,H,pe){if(K==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+K+".");var Oe=L({},K.props),we=K.key,oe=K.ref,Me=K._owner;if(H!=null){if(H.ref!==void 0&&(oe=H.ref,Me=de.current),H.key!==void 0&&(we=""+H.key),K.type&&K.type.defaultProps)var Ne=K.type.defaultProps;for(Ve in H)ne.call(H,Ve)&&!q.hasOwnProperty(Ve)&&(Oe[Ve]=H[Ve]===void 0&&Ne!==void 0?Ne[Ve]:H[Ve])}var Ve=arguments.length-2;if(Ve===1)Oe.children=pe;else if(1<Ve){Ne=Array(Ve);for(var me=0;me<Ve;me++)Ne[me]=arguments[me+2];Oe.children=Ne}return{$$typeof:r,type:K.type,key:we,ref:oe,props:Oe,_owner:Me}},Tt.createContext=function(K){return K={$$typeof:y,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},K.Provider={$$typeof:x,_context:K},K.Consumer=K},Tt.createElement=ce,Tt.createFactory=function(K){var H=ce.bind(null,K);return H.type=K,H},Tt.createRef=function(){return{current:null}},Tt.forwardRef=function(K){return{$$typeof:b,render:K}},Tt.isValidElement=Ae,Tt.lazy=function(K){return{$$typeof:S,_payload:{_status:-1,_result:K},_init:He}},Tt.memo=function(K,H){return{$$typeof:E,type:K,compare:H===void 0?null:H}},Tt.startTransition=function(K){var H=he.transition;he.transition={};try{K()}finally{he.transition=H}},Tt.unstable_act=fe,Tt.useCallback=function(K,H){return xe.current.useCallback(K,H)},Tt.useContext=function(K){return xe.current.useContext(K)},Tt.useDebugValue=function(){},Tt.useDeferredValue=function(K){return xe.current.useDeferredValue(K)},Tt.useEffect=function(K,H){return xe.current.useEffect(K,H)},Tt.useId=function(){return xe.current.useId()},Tt.useImperativeHandle=function(K,H,pe){return xe.current.useImperativeHandle(K,H,pe)},Tt.useInsertionEffect=function(K,H){return xe.current.useInsertionEffect(K,H)},Tt.useLayoutEffect=function(K,H){return xe.current.useLayoutEffect(K,H)},Tt.useMemo=function(K,H){return xe.current.useMemo(K,H)},Tt.useReducer=function(K,H,pe){return xe.current.useReducer(K,H,pe)},Tt.useRef=function(K){return xe.current.useRef(K)},Tt.useState=function(K){return xe.current.useState(K)},Tt.useSyncExternalStore=function(K,H,pe){return xe.current.useSyncExternalStore(K,H,pe)},Tt.useTransition=function(){return xe.current.useTransition()},Tt.version="18.3.1",Tt}var H0;function nf(){return H0||(H0=1,td.exports=Hx()),td.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G0;function Gx(){if(G0)return Aa;G0=1;var r=nf(),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),f=Object.prototype.hasOwnProperty,p=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x={key:!0,ref:!0,__self:!0,__source:!0};function y(b,w,E){var S,I={},_=null,D=null;E!==void 0&&(_=""+E),w.key!==void 0&&(_=""+w.key),w.ref!==void 0&&(D=w.ref);for(S in w)f.call(w,S)&&!x.hasOwnProperty(S)&&(I[S]=w[S]);if(b&&b.defaultProps)for(S in w=b.defaultProps,w)I[S]===void 0&&(I[S]=w[S]);return{$$typeof:o,type:b,key:_,ref:D,props:I,_owner:p.current}}return Aa.Fragment=a,Aa.jsx=y,Aa.jsxs=y,Aa}var X0;function Xx(){return X0||(X0=1,ed.exports=Gx()),ed.exports}var v=Xx(),R=nf();const en=Fp(R);var ec={},nd={exports:{}},Er={},rd={exports:{}},id={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y0;function Yx(){return Y0||(Y0=1,function(r){function o(he,Le){var fe=he.length;he.push(Le);e:for(;0<fe;){var K=fe-1>>>1,H=he[K];if(0<p(H,Le))he[K]=Le,he[fe]=H,fe=K;else break e}}function a(he){return he.length===0?null:he[0]}function f(he){if(he.length===0)return null;var Le=he[0],fe=he.pop();if(fe!==Le){he[0]=fe;e:for(var K=0,H=he.length,pe=H>>>1;K<pe;){var Oe=2*(K+1)-1,we=he[Oe],oe=Oe+1,Me=he[oe];if(0>p(we,fe))oe<H&&0>p(Me,we)?(he[K]=Me,he[oe]=fe,K=oe):(he[K]=we,he[Oe]=fe,K=Oe);else if(oe<H&&0>p(Me,fe))he[K]=Me,he[oe]=fe,K=oe;else break e}}return Le}function p(he,Le){var fe=he.sortIndex-Le.sortIndex;return fe!==0?fe:he.id-Le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var x=performance;r.unstable_now=function(){return x.now()}}else{var y=Date,b=y.now();r.unstable_now=function(){return y.now()-b}}var w=[],E=[],S=1,I=null,_=3,D=!1,L=!1,B=!1,F=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(he){for(var Le=a(E);Le!==null;){if(Le.callback===null)f(E);else if(Le.startTime<=he)f(E),Le.sortIndex=Le.expirationTime,o(w,Le);else break;Le=a(E)}}function J(he){if(B=!1,z(he),!L)if(a(w)!==null)L=!0,He(ne);else{var Le=a(E);Le!==null&&xe(J,Le.startTime-he)}}function ne(he,Le){L=!1,B&&(B=!1,j(ce),ce=-1),D=!0;var fe=_;try{for(z(Le),I=a(w);I!==null&&(!(I.expirationTime>Le)||he&&!ke());){var K=I.callback;if(typeof K=="function"){I.callback=null,_=I.priorityLevel;var H=K(I.expirationTime<=Le);Le=r.unstable_now(),typeof H=="function"?I.callback=H:I===a(w)&&f(w),z(Le)}else f(w);I=a(w)}if(I!==null)var pe=!0;else{var Oe=a(E);Oe!==null&&xe(J,Oe.startTime-Le),pe=!1}return pe}finally{I=null,_=fe,D=!1}}var de=!1,q=null,ce=-1,Z=5,Ae=-1;function ke(){return!(r.unstable_now()-Ae<Z)}function Ie(){if(q!==null){var he=r.unstable_now();Ae=he;var Le=!0;try{Le=q(!0,he)}finally{Le?Pe():(de=!1,q=null)}}else de=!1}var Pe;if(typeof W=="function")Pe=function(){W(Ie)};else if(typeof MessageChannel<"u"){var Fe=new MessageChannel,ee=Fe.port2;Fe.port1.onmessage=Ie,Pe=function(){ee.postMessage(null)}}else Pe=function(){F(Ie,0)};function He(he){q=he,de||(de=!0,Pe())}function xe(he,Le){ce=F(function(){he(r.unstable_now())},Le)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(he){he.callback=null},r.unstable_continueExecution=function(){L||D||(L=!0,He(ne))},r.unstable_forceFrameRate=function(he){0>he||125<he?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<he?Math.floor(1e3/he):5},r.unstable_getCurrentPriorityLevel=function(){return _},r.unstable_getFirstCallbackNode=function(){return a(w)},r.unstable_next=function(he){switch(_){case 1:case 2:case 3:var Le=3;break;default:Le=_}var fe=_;_=Le;try{return he()}finally{_=fe}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(he,Le){switch(he){case 1:case 2:case 3:case 4:case 5:break;default:he=3}var fe=_;_=he;try{return Le()}finally{_=fe}},r.unstable_scheduleCallback=function(he,Le,fe){var K=r.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?K+fe:K):fe=K,he){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=fe+H,he={id:S++,callback:Le,priorityLevel:he,startTime:fe,expirationTime:H,sortIndex:-1},fe>K?(he.sortIndex=fe,o(E,he),a(w)===null&&he===a(E)&&(B?(j(ce),ce=-1):B=!0,xe(J,fe-K))):(he.sortIndex=H,o(w,he),L||D||(L=!0,He(ne))),he},r.unstable_shouldYield=ke,r.unstable_wrapCallback=function(he){var Le=_;return function(){var fe=_;_=Le;try{return he.apply(this,arguments)}finally{_=fe}}}}(id)),id}var K0;function Kx(){return K0||(K0=1,rd.exports=Yx()),rd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $0;function $x(){if($0)return Er;$0=1;var r=nf(),o=Kx();function a(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,d=1;d<arguments.length;d++)s+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f=new Set,p={};function x(t,s){y(t,s),y(t+"Capture",s)}function y(t,s){for(p[t]=s,t=0;t<s.length;t++)f.add(s[t])}var b=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),w=Object.prototype.hasOwnProperty,E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S={},I={};function _(t){return w.call(I,t)?!0:w.call(S,t)?!1:E.test(t)?I[t]=!0:(S[t]=!0,!1)}function D(t,s,d,g){if(d!==null&&d.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return g?!1:d!==null?!d.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function L(t,s,d,g){if(s===null||typeof s>"u"||D(t,s,d,g))return!0;if(g)return!1;if(d!==null)switch(d.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function B(t,s,d,g,A,T,O){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=g,this.attributeNamespace=A,this.mustUseProperty=d,this.propertyName=t,this.type=s,this.sanitizeURL=T,this.removeEmptyString=O}var F={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){F[t]=new B(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];F[s]=new B(s,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){F[t]=new B(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){F[t]=new B(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){F[t]=new B(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){F[t]=new B(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){F[t]=new B(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){F[t]=new B(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){F[t]=new B(t,5,!1,t.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function W(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(j,W);F[s]=new B(s,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(j,W);F[s]=new B(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(j,W);F[s]=new B(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){F[t]=new B(t,1,!1,t.toLowerCase(),null,!1,!1)}),F.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){F[t]=new B(t,1,!1,t.toLowerCase(),null,!0,!0)});function z(t,s,d,g){var A=F.hasOwnProperty(s)?F[s]:null;(A!==null?A.type!==0:g||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(L(s,d,A,g)&&(d=null),g||A===null?_(s)&&(d===null?t.removeAttribute(s):t.setAttribute(s,""+d)):A.mustUseProperty?t[A.propertyName]=d===null?A.type===3?!1:"":d:(s=A.attributeName,g=A.attributeNamespace,d===null?t.removeAttribute(s):(A=A.type,d=A===3||A===4&&d===!0?"":""+d,g?t.setAttributeNS(g,s,d):t.setAttribute(s,d))))}var J=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ne=Symbol.for("react.element"),de=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),ce=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),Ae=Symbol.for("react.provider"),ke=Symbol.for("react.context"),Ie=Symbol.for("react.forward_ref"),Pe=Symbol.for("react.suspense"),Fe=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),He=Symbol.for("react.lazy"),xe=Symbol.for("react.offscreen"),he=Symbol.iterator;function Le(t){return t===null||typeof t!="object"?null:(t=he&&t[he]||t["@@iterator"],typeof t=="function"?t:null)}var fe=Object.assign,K;function H(t){if(K===void 0)try{throw Error()}catch(d){var s=d.stack.trim().match(/\n( *(at )?)/);K=s&&s[1]||""}return`
`+K+t}var pe=!1;function Oe(t,s){if(!t||pe)return"";pe=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(ue){var g=ue}Reflect.construct(t,[],s)}else{try{s.call()}catch(ue){g=ue}t.call(s.prototype)}else{try{throw Error()}catch(ue){g=ue}t()}}catch(ue){if(ue&&g&&typeof ue.stack=="string"){for(var A=ue.stack.split(`
`),T=g.stack.split(`
`),O=A.length-1,G=T.length-1;1<=O&&0<=G&&A[O]!==T[G];)G--;for(;1<=O&&0<=G;O--,G--)if(A[O]!==T[G]){if(O!==1||G!==1)do if(O--,G--,0>G||A[O]!==T[G]){var Y=`
`+A[O].replace(" at new "," at ");return t.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",t.displayName)),Y}while(1<=O&&0<=G);break}}}finally{pe=!1,Error.prepareStackTrace=d}return(t=t?t.displayName||t.name:"")?H(t):""}function we(t){switch(t.tag){case 5:return H(t.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return t=Oe(t.type,!1),t;case 11:return t=Oe(t.type.render,!1),t;case 1:return t=Oe(t.type,!0),t;default:return""}}function oe(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case q:return"Fragment";case de:return"Portal";case Z:return"Profiler";case ce:return"StrictMode";case Pe:return"Suspense";case Fe:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ke:return(t.displayName||"Context")+".Consumer";case Ae:return(t._context.displayName||"Context")+".Provider";case Ie:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ee:return s=t.displayName||null,s!==null?s:oe(t.type)||"Memo";case He:s=t._payload,t=t._init;try{return oe(t(s))}catch{}}return null}function Me(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oe(s);case 8:return s===ce?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ne(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ve(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function me(t){var s=Ve(t)?"checked":"value",d=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),g=""+t[s];if(!t.hasOwnProperty(s)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var A=d.get,T=d.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return A.call(this)},set:function(O){g=""+O,T.call(this,O)}}),Object.defineProperty(t,s,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(O){g=""+O},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Xe(t){t._valueTracker||(t._valueTracker=me(t))}function ut(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var d=s.getValue(),g="";return t&&(g=Ve(t)?t.checked?"true":"false":t.value),t=g,t!==d?(s.setValue(t),!0):!1}function De(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function it(t,s){var d=s.checked;return fe({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??t._wrapperState.initialChecked})}function zt(t,s){var d=s.defaultValue==null?"":s.defaultValue,g=s.checked!=null?s.checked:s.defaultChecked;d=Ne(s.value!=null?s.value:d),t._wrapperState={initialChecked:g,initialValue:d,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function jt(t,s){s=s.checked,s!=null&&z(t,"checked",s,!1)}function Pt(t,s){jt(t,s);var d=Ne(s.value),g=s.type;if(d!=null)g==="number"?(d===0&&t.value===""||t.value!=d)&&(t.value=""+d):t.value!==""+d&&(t.value=""+d);else if(g==="submit"||g==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?pt(t,s.type,d):s.hasOwnProperty("defaultValue")&&pt(t,s.type,Ne(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function vt(t,s,d){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var g=s.type;if(!(g!=="submit"&&g!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,d||s===t.value||(t.value=s),t.defaultValue=s}d=t.name,d!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,d!==""&&(t.name=d)}function pt(t,s,d){(s!=="number"||De(t.ownerDocument)!==t)&&(d==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+d&&(t.defaultValue=""+d))}var xn=Array.isArray;function _e(t,s,d,g){if(t=t.options,s){s={};for(var A=0;A<d.length;A++)s["$"+d[A]]=!0;for(d=0;d<t.length;d++)A=s.hasOwnProperty("$"+t[d].value),t[d].selected!==A&&(t[d].selected=A),A&&g&&(t[d].defaultSelected=!0)}else{for(d=""+Ne(d),s=null,A=0;A<t.length;A++){if(t[A].value===d){t[A].selected=!0,g&&(t[A].defaultSelected=!0);return}s!==null||t[A].disabled||(s=t[A])}s!==null&&(s.selected=!0)}}function zn(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(a(91));return fe({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ct(t,s){var d=s.value;if(d==null){if(d=s.children,s=s.defaultValue,d!=null){if(s!=null)throw Error(a(92));if(xn(d)){if(1<d.length)throw Error(a(93));d=d[0]}s=d}s==null&&(s=""),d=s}t._wrapperState={initialValue:Ne(d)}}function Ye(t,s){var d=Ne(s.value),g=Ne(s.defaultValue);d!=null&&(d=""+d,d!==t.value&&(t.value=d),s.defaultValue==null&&t.defaultValue!==d&&(t.defaultValue=d)),g!=null&&(t.defaultValue=""+g)}function et(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function gt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ut(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?gt(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var kt,At=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,d,g,A){MSApp.execUnsafeLocalFunction(function(){return t(s,d,g,A)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(kt=kt||document.createElement("div"),kt.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=kt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function nn(t,s){if(s){var d=t.firstChild;if(d&&d===t.lastChild&&d.nodeType===3){d.nodeValue=s;return}}t.textContent=s}var Ht={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},un=["Webkit","ms","Moz","O"];Object.keys(Ht).forEach(function(t){un.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Ht[s]=Ht[t]})});function je(t,s,d){return s==null||typeof s=="boolean"||s===""?"":d||typeof s!="number"||s===0||Ht.hasOwnProperty(t)&&Ht[t]?(""+s).trim():s+"px"}function ge(t,s){t=t.style;for(var d in s)if(s.hasOwnProperty(d)){var g=d.indexOf("--")===0,A=je(d,s[d],g);d==="float"&&(d="cssFloat"),g?t.setProperty(d,A):t[d]=A}}var lt=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function st(t,s){if(s){if(lt[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(a(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(a(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(a(61))}if(s.style!=null&&typeof s.style!="object")throw Error(a(62))}}function _t(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dn=null;function Dr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Un=null,at=null,Mn=null;function As(t){if(t=la(t)){if(typeof Un!="function")throw Error(a(280));var s=t.stateNode;s&&(s=pl(s),Un(t.stateNode,t.type,s))}}function Ui(t){at?Mn?Mn.push(t):Mn=[t]:at=t}function qn(){if(at){var t=at,s=Mn;if(Mn=at=null,As(t),s)for(t=0;t<s.length;t++)As(s[t])}}function Wi(t,s){return t(s)}function rn(){}var Mr=!1;function si(t,s,d){if(Mr)return t(s,d);Mr=!0;try{return Wi(t,s,d)}finally{Mr=!1,(at!==null||Mn!==null)&&(rn(),qn())}}function An(t,s){var d=t.stateNode;if(d===null)return null;var g=pl(d);if(g===null)return null;d=g[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(t=t.type,g=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!g;break e;default:t=!1}if(t)return null;if(d&&typeof d!="function")throw Error(a(231,s,typeof d));return d}var Hi=!1;if(b)try{var lr={};Object.defineProperty(lr,"passive",{get:function(){Hi=!0}}),window.addEventListener("test",lr,lr),window.removeEventListener("test",lr,lr)}catch{Hi=!1}function oi(t,s,d,g,A,T,O,G,Y){var ue=Array.prototype.slice.call(arguments,3);try{s.apply(d,ue)}catch(Ee){this.onError(Ee)}}var dn=!1,cr=null,Tn=!1,ze=null,ai={onError:function(t){dn=!0,cr=t}};function Gi(t,s,d,g,A,T,O,G,Y){dn=!1,cr=null,oi.apply(ai,arguments)}function Ln(t,s,d,g,A,T,O,G,Y){if(Gi.apply(this,arguments),dn){if(dn){var ue=cr;dn=!1,cr=null}else throw Error(a(198));Tn||(Tn=!0,ze=ue)}}function Qn(t){var s=t,d=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(d=s.return),t=s.return;while(t)}return s.tag===3?d:null}function Kr(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function Ci(t){if(Qn(t)!==t)throw Error(a(188))}function Jn(t){var s=t.alternate;if(!s){if(s=Qn(t),s===null)throw Error(a(188));return s!==t?null:t}for(var d=t,g=s;;){var A=d.return;if(A===null)break;var T=A.alternate;if(T===null){if(g=A.return,g!==null){d=g;continue}break}if(A.child===T.child){for(T=A.child;T;){if(T===d)return Ci(A),t;if(T===g)return Ci(A),s;T=T.sibling}throw Error(a(188))}if(d.return!==g.return)d=A,g=T;else{for(var O=!1,G=A.child;G;){if(G===d){O=!0,d=A,g=T;break}if(G===g){O=!0,g=A,d=T;break}G=G.sibling}if(!O){for(G=T.child;G;){if(G===d){O=!0,d=T,g=A;break}if(G===g){O=!0,g=T,d=A;break}G=G.sibling}if(!O)throw Error(a(189))}}if(d.alternate!==g)throw Error(a(190))}if(d.tag!==3)throw Error(a(188));return d.stateNode.current===d?t:s}function Ue(t){return t=Jn(t),t!==null?mt(t):null}function mt(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=mt(t);if(s!==null)return s;t=t.sibling}return null}var Je=o.unstable_scheduleCallback,Et=o.unstable_cancelCallback,Be=o.unstable_shouldYield,Wn=o.unstable_requestPaint,Lt=o.unstable_now,bs=o.unstable_getCurrentPriorityLevel,ye=o.unstable_ImmediatePriority,mr=o.unstable_UserBlockingPriority,Ot=o.unstable_NormalPriority,Ei=o.unstable_LowPriority,Xi=o.unstable_IdlePriority,St=null,yt=null;function It(t){if(yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(St,t,void 0,(t.current.flags&128)===128)}catch{}}var ur=Math.clz32?Math.clz32:yn,Wo=Math.log,Ho=Math.LN2;function yn(t){return t>>>=0,t===0?32:31-(Wo(t)/Ho|0)|0}var Sr=64,to=4194304;function Xt(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Tr(t,s){var d=t.pendingLanes;if(d===0)return 0;var g=0,A=t.suspendedLanes,T=t.pingedLanes,O=d&268435455;if(O!==0){var G=O&~A;G!==0?g=Xt(G):(T&=O,T!==0&&(g=Xt(T)))}else O=d&~A,O!==0?g=Xt(O):T!==0&&(g=Xt(T));if(g===0)return 0;if(s!==0&&s!==g&&!(s&A)&&(A=g&-g,T=s&-s,A>=T||A===16&&(T&4194240)!==0))return s;if(g&4&&(g|=d&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=g;0<s;)d=31-ur(s),A=1<<d,g|=t[d],s&=~A;return g}function Dc(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yi(t,s){for(var d=t.suspendedLanes,g=t.pingedLanes,A=t.expirationTimes,T=t.pendingLanes;0<T;){var O=31-ur(T),G=1<<O,Y=A[O];Y===-1?(!(G&d)||G&g)&&(A[O]=Dc(G,s)):Y<=s&&(t.expiredLanes|=G),T&=~G}}function Vt(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function In(){var t=Sr;return Sr<<=1,!(Sr&4194240)&&(Sr=64),t}function re(t){for(var s=[],d=0;31>d;d++)s.push(t);return s}function V(t,s,d){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-ur(s),t[s]=d}function qe(t,s){var d=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var g=t.eventTimes;for(t=t.expirationTimes;0<d;){var A=31-ur(d),T=1<<A;s[A]=0,g[A]=-1,t[A]=-1,d&=~T}}function fn(t,s){var d=t.entangledLanes|=s;for(t=t.entanglements;d;){var g=31-ur(d),A=1<<g;A&s|t[g]&s&&(t[g]|=s),d&=~A}}var wt=0;function Qa(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var no,er,Qe,Yt,Go,Xo=!1,Ki=[],Ir=null,Lr=null,li=null,Qt=new Map,$r=new Map,Hn=[],ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ja(t,s){switch(t){case"focusin":case"focusout":Ir=null;break;case"dragenter":case"dragleave":Lr=null;break;case"mouseover":case"mouseout":li=null;break;case"pointerover":case"pointerout":Qt.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":$r.delete(s.pointerId)}}function ft(t,s,d,g,A,T){return t===null||t.nativeEvent!==T?(t={blockedOn:s,domEventName:d,eventSystemFlags:g,nativeEvent:T,targetContainers:[A]},s!==null&&(s=la(s),s!==null&&er(s)),t):(t.eventSystemFlags|=g,s=t.targetContainers,A!==null&&s.indexOf(A)===-1&&s.push(A),t)}function Nn(t,s,d,g,A){switch(s){case"focusin":return Ir=ft(Ir,t,s,d,g,A),!0;case"dragenter":return Lr=ft(Lr,t,s,d,g,A),!0;case"mouseover":return li=ft(li,t,s,d,g,A),!0;case"pointerover":var T=A.pointerId;return Qt.set(T,ft(Qt.get(T)||null,t,s,d,g,A)),!0;case"gotpointercapture":return T=A.pointerId,$r.set(T,ft($r.get(T)||null,t,s,d,g,A)),!0}return!1}function el(t){var s=Ds(t.target);if(s!==null){var d=Qn(s);if(d!==null){if(s=d.tag,s===13){if(s=Kr(d),s!==null){t.blockedOn=s,Go(t.priority,function(){Qe(d)});return}}else if(s===3&&d.stateNode.current.memoizedState.isDehydrated){t.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $i(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var d=ro(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(d===null){d=t.nativeEvent;var g=new d.constructor(d.type,d);Dn=g,d.target.dispatchEvent(g),Dn=null}else return s=la(d),s!==null&&er(s),t.blockedOn=d,!1;s.shift()}return!0}function Yo(t,s,d){$i(t)&&d.delete(s)}function Ai(){Xo=!1,Ir!==null&&$i(Ir)&&(Ir=null),Lr!==null&&$i(Lr)&&(Lr=null),li!==null&&$i(li)&&(li=null),Qt.forEach(Yo),$r.forEach(Yo)}function Ss(t,s){t.blockedOn===s&&(t.blockedOn=null,Xo||(Xo=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ai)))}function Zr(t){function s(A){return Ss(A,t)}if(0<Ki.length){Ss(Ki[0],t);for(var d=1;d<Ki.length;d++){var g=Ki[d];g.blockedOn===t&&(g.blockedOn=null)}}for(Ir!==null&&Ss(Ir,t),Lr!==null&&Ss(Lr,t),li!==null&&Ss(li,t),Qt.forEach(s),$r.forEach(s),d=0;d<Hn.length;d++)g=Hn[d],g.blockedOn===t&&(g.blockedOn=null);for(;0<Hn.length&&(d=Hn[0],d.blockedOn===null);)el(d),d.blockedOn===null&&Hn.shift()}var Br=J.ReactCurrentBatchConfig,ci=!0;function tl(t,s,d,g){var A=wt,T=Br.transition;Br.transition=null;try{wt=1,bi(t,s,d,g)}finally{wt=A,Br.transition=T}}function Ts(t,s,d,g){var A=wt,T=Br.transition;Br.transition=null;try{wt=4,bi(t,s,d,g)}finally{wt=A,Br.transition=T}}function bi(t,s,d,g){if(ci){var A=ro(t,s,d,g);if(A===null)Hc(t,s,g,_n,d),Ja(t,g);else if(Nn(A,t,s,d,g))g.stopPropagation();else if(Ja(t,g),s&4&&-1<ot.indexOf(t)){for(;A!==null;){var T=la(A);if(T!==null&&no(T),T=ro(t,s,d,g),T===null&&Hc(t,s,g,_n,d),T===A)break;A=T}A!==null&&g.stopPropagation()}else Hc(t,s,g,null,d)}}var _n=null;function ro(t,s,d,g){if(_n=null,t=Dr(g),t=Ds(t),t!==null)if(s=Qn(t),s===null)t=null;else if(d=s.tag,d===13){if(t=Kr(s),t!==null)return t;t=null}else if(d===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return _n=t,null}function Ko(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bs()){case ye:return 1;case mr:return 4;case Ot:case Ei:return 16;case Xi:return 536870912;default:return 16}default:return 16}}var qr=null,$o=null,io=null;function nl(){if(io)return io;var t,s=$o,d=s.length,g,A="value"in qr?qr.value:qr.textContent,T=A.length;for(t=0;t<d&&s[t]===A[t];t++);var O=d-t;for(g=1;g<=O&&s[d-g]===A[T-g];g++);return io=A.slice(t,1<g?1-g:void 0)}function Dt(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Is(){return!0}function Ns(){return!1}function hn(t){function s(d,g,A,T,O){this._reactName=d,this._targetInst=A,this.type=g,this.nativeEvent=T,this.target=O,this.currentTarget=null;for(var G in t)t.hasOwnProperty(G)&&(d=t[G],this[G]=d?d(T):T[G]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Is:Ns,this.isPropagationStopped=Ns,this}return fe(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Is)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Is)},persist:function(){},isPersistent:Is}),s}var Zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},le=hn(Zi),xt=fe({},Zi,{view:0,detail:0}),Rn=hn(xt),qi,so,_s,oo=fe({},xt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_s&&(_s&&t.type==="mousemove"?(qi=t.screenX-_s.screenX,so=t.screenY-_s.screenY):so=qi=0,_s=t),qi)},movementY:function(t){return"movementY"in t?t.movementY:so}}),rl=hn(oo),Zo=fe({},oo,{dataTransfer:0}),wn=hn(Zo),qo=fe({},xt,{relatedTarget:0}),Kt=hn(qo),ao=fe({},Zi,{animationName:0,elapsedTime:0,pseudoElement:0}),Si=hn(ao),Wt=fe({},Zi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tt=hn(Wt),Mc=fe({},Zi,{data:0}),Gt=hn(Mc),Ti={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fr(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Lc[t])?!!s[t]:!1}function Rs(){return Fr}var il=fe({},xt,{key:function(t){if(t.key){var s=Ti[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Dt(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Qi[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rs,charCode:function(t){return t.type==="keypress"?Dt(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Dt(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Qo=hn(il),sl=fe({},oo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jo=hn(sl),Bc=fe({},xt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rs}),Ji=hn(Bc),ea=fe({},Zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fc=hn(ea),ks=fe({},oo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jc=hn(ks),ui=[9,13,27,32],es=b&&"CompositionEvent"in window,Bn=null;b&&"documentMode"in document&&(Bn=document.documentMode);var ol=b&&"TextEvent"in window&&!Bn,Nr=b&&(!es||Bn&&8<Bn&&11>=Bn),al=" ",lo=!1;function ll(t,s){switch(t){case"keyup":return ui.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ta(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gn=!1;function Vc(t,s){switch(t){case"compositionend":return ta(s);case"keypress":return s.which!==32?null:(lo=!0,al);case"textInput":return t=s.data,t===al&&lo?null:t;default:return null}}function na(t,s){if(Gn)return t==="compositionend"||!es&&ll(t,s)?(t=nl(),io=$o=qr=null,Gn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Nr&&s.locale!=="ko"?null:s.data;default:return null}}var Ps={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rt(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Ps[t.type]:s==="textarea"}function Os(t,s,d,g){Ui(g),s=dl(s,"onChange"),0<s.length&&(d=new le("onChange","change",null,d,g),t.push({event:d,listeners:s}))}var k=null,e=null;function n(t){sh(t,0)}function i(t){var s=fo(t);if(ut(s))return t}function l(t,s){if(t==="change")return s}var c=!1;if(b){var u;if(b){var h="oninput"in document;if(!h){var m=document.createElement("div");m.setAttribute("oninput","return;"),h=typeof m.oninput=="function"}u=h}else u=!1;c=u&&(!document.documentMode||9<document.documentMode)}function C(){k&&(k.detachEvent("onpropertychange",N),e=k=null)}function N(t){if(t.propertyName==="value"&&i(e)){var s=[];Os(s,e,t,Dr(t)),si(n,s)}}function P(t,s,d){t==="focusin"?(C(),k=s,e=d,k.attachEvent("onpropertychange",N)):t==="focusout"&&C()}function M(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return i(e)}function U(t,s){if(t==="click")return i(s)}function X(t,s){if(t==="input"||t==="change")return i(s)}function $(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var te=typeof Object.is=="function"?Object.is:$;function ae(t,s){if(te(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var d=Object.keys(t),g=Object.keys(s);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var A=d[g];if(!w.call(s,A)||!te(t[A],s[A]))return!1}return!0}function Se(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Te(t,s){var d=Se(t);t=0;for(var g;d;){if(d.nodeType===3){if(g=t+d.textContent.length,t<=s&&g>=s)return{node:d,offset:s-t};t=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Se(d)}}function Ce(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Ce(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function bt(){for(var t=window,s=De();s instanceof t.HTMLIFrameElement;){try{var d=typeof s.contentWindow.location.href=="string"}catch{d=!1}if(d)t=s.contentWindow;else break;s=De(t.document)}return s}function ht(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function tr(t){var s=bt(),d=t.focusedElem,g=t.selectionRange;if(s!==d&&d&&d.ownerDocument&&Ce(d.ownerDocument.documentElement,d)){if(g!==null&&ht(d)){if(s=g.start,t=g.end,t===void 0&&(t=s),"selectionStart"in d)d.selectionStart=s,d.selectionEnd=Math.min(t,d.value.length);else if(t=(s=d.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var A=d.textContent.length,T=Math.min(g.start,A);g=g.end===void 0?T:Math.min(g.end,A),!t.extend&&T>g&&(A=g,g=T,T=A),A=Te(d,T);var O=Te(d,g);A&&O&&(t.rangeCount!==1||t.anchorNode!==A.node||t.anchorOffset!==A.offset||t.focusNode!==O.node||t.focusOffset!==O.offset)&&(s=s.createRange(),s.setStart(A.node,A.offset),t.removeAllRanges(),T>g?(t.addRange(s),t.extend(O.node,O.offset)):(s.setEnd(O.node,O.offset),t.addRange(s)))}}for(s=[],t=d;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<s.length;d++)t=s[d],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _r=b&&"documentMode"in document&&11>=document.documentMode,vn=null,Ft=null,sn=null,Xn=!1;function Ii(t,s,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Xn||vn==null||vn!==De(g)||(g=vn,"selectionStart"in g&&ht(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),sn&&ae(sn,g)||(sn=g,g=dl(Ft,"onSelect"),0<g.length&&(s=new le("onSelect","select",null,s,d),t.push({event:s,listeners:g}),s.target=vn)))}function Qr(t,s){var d={};return d[t.toLowerCase()]=s.toLowerCase(),d["Webkit"+t]="webkit"+s,d["Moz"+t]="moz"+s,d}var ts={animationend:Qr("Animation","AnimationEnd"),animationiteration:Qr("Animation","AnimationIteration"),animationstart:Qr("Animation","AnimationStart"),transitionend:Qr("Transition","TransitionEnd")},ra={},qf={};b&&(qf=document.createElement("div").style,"AnimationEvent"in window||(delete ts.animationend.animation,delete ts.animationiteration.animation,delete ts.animationstart.animation),"TransitionEvent"in window||delete ts.transitionend.transition);function cl(t){if(ra[t])return ra[t];if(!ts[t])return t;var s=ts[t],d;for(d in s)if(s.hasOwnProperty(d)&&d in qf)return ra[t]=s[d];return t}var Qf=cl("animationend"),Jf=cl("animationiteration"),eh=cl("animationstart"),th=cl("transitionend"),nh=new Map,rh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ns(t,s){nh.set(t,s),x(s,[t])}for(var zc=0;zc<rh.length;zc++){var Uc=rh[zc],Jm=Uc.toLowerCase(),ex=Uc[0].toUpperCase()+Uc.slice(1);ns(Jm,"on"+ex)}ns(Qf,"onAnimationEnd"),ns(Jf,"onAnimationIteration"),ns(eh,"onAnimationStart"),ns("dblclick","onDoubleClick"),ns("focusin","onFocus"),ns("focusout","onBlur"),ns(th,"onTransitionEnd"),y("onMouseEnter",["mouseout","mouseover"]),y("onMouseLeave",["mouseout","mouseover"]),y("onPointerEnter",["pointerout","pointerover"]),y("onPointerLeave",["pointerout","pointerover"]),x("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),x("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),x("onBeforeInput",["compositionend","keypress","textInput","paste"]),x("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tx=new Set("cancel close invalid load scroll toggle".split(" ").concat(ia));function ih(t,s,d){var g=t.type||"unknown-event";t.currentTarget=d,Ln(g,s,void 0,t),t.currentTarget=null}function sh(t,s){s=(s&4)!==0;for(var d=0;d<t.length;d++){var g=t[d],A=g.event;g=g.listeners;e:{var T=void 0;if(s)for(var O=g.length-1;0<=O;O--){var G=g[O],Y=G.instance,ue=G.currentTarget;if(G=G.listener,Y!==T&&A.isPropagationStopped())break e;ih(A,G,ue),T=Y}else for(O=0;O<g.length;O++){if(G=g[O],Y=G.instance,ue=G.currentTarget,G=G.listener,Y!==T&&A.isPropagationStopped())break e;ih(A,G,ue),T=Y}}}if(Tn)throw t=ze,Tn=!1,ze=null,t}function Zt(t,s){var d=s[Zc];d===void 0&&(d=s[Zc]=new Set);var g=t+"__bubble";d.has(g)||(oh(s,t,2,!1),d.add(g))}function Wc(t,s,d){var g=0;s&&(g|=4),oh(d,t,g,s)}var ul="_reactListening"+Math.random().toString(36).slice(2);function sa(t){if(!t[ul]){t[ul]=!0,f.forEach(function(d){d!=="selectionchange"&&(tx.has(d)||Wc(d,!1,t),Wc(d,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[ul]||(s[ul]=!0,Wc("selectionchange",!1,s))}}function oh(t,s,d,g){switch(Ko(s)){case 1:var A=tl;break;case 4:A=Ts;break;default:A=bi}d=A.bind(null,s,d,t),A=void 0,!Hi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(A=!0),g?A!==void 0?t.addEventListener(s,d,{capture:!0,passive:A}):t.addEventListener(s,d,!0):A!==void 0?t.addEventListener(s,d,{passive:A}):t.addEventListener(s,d,!1)}function Hc(t,s,d,g,A){var T=g;if(!(s&1)&&!(s&2)&&g!==null)e:for(;;){if(g===null)return;var O=g.tag;if(O===3||O===4){var G=g.stateNode.containerInfo;if(G===A||G.nodeType===8&&G.parentNode===A)break;if(O===4)for(O=g.return;O!==null;){var Y=O.tag;if((Y===3||Y===4)&&(Y=O.stateNode.containerInfo,Y===A||Y.nodeType===8&&Y.parentNode===A))return;O=O.return}for(;G!==null;){if(O=Ds(G),O===null)return;if(Y=O.tag,Y===5||Y===6){g=T=O;continue e}G=G.parentNode}}g=g.return}si(function(){var ue=T,Ee=Dr(d),be=[];e:{var ve=nh.get(t);if(ve!==void 0){var We=le,Ke=t;switch(t){case"keypress":if(Dt(d)===0)break e;case"keydown":case"keyup":We=Qo;break;case"focusin":Ke="focus",We=Kt;break;case"focusout":Ke="blur",We=Kt;break;case"beforeblur":case"afterblur":We=Kt;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":We=rl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":We=wn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":We=Ji;break;case Qf:case Jf:case eh:We=Si;break;case th:We=Fc;break;case"scroll":We=Rn;break;case"wheel":We=jc;break;case"copy":case"cut":case"paste":We=tt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":We=Jo}var $e=(s&4)!==0,Cn=!$e&&t==="scroll",ie=$e?ve!==null?ve+"Capture":null:ve;$e=[];for(var Q=ue,se;Q!==null;){se=Q;var Re=se.stateNode;if(se.tag===5&&Re!==null&&(se=Re,ie!==null&&(Re=An(Q,ie),Re!=null&&$e.push(oa(Q,Re,se)))),Cn)break;Q=Q.return}0<$e.length&&(ve=new We(ve,Ke,null,d,Ee),be.push({event:ve,listeners:$e}))}}if(!(s&7)){e:{if(ve=t==="mouseover"||t==="pointerover",We=t==="mouseout"||t==="pointerout",ve&&d!==Dn&&(Ke=d.relatedTarget||d.fromElement)&&(Ds(Ke)||Ke[Ni]))break e;if((We||ve)&&(ve=Ee.window===Ee?Ee:(ve=Ee.ownerDocument)?ve.defaultView||ve.parentWindow:window,We?(Ke=d.relatedTarget||d.toElement,We=ue,Ke=Ke?Ds(Ke):null,Ke!==null&&(Cn=Qn(Ke),Ke!==Cn||Ke.tag!==5&&Ke.tag!==6)&&(Ke=null)):(We=null,Ke=ue),We!==Ke)){if($e=rl,Re="onMouseLeave",ie="onMouseEnter",Q="mouse",(t==="pointerout"||t==="pointerover")&&($e=Jo,Re="onPointerLeave",ie="onPointerEnter",Q="pointer"),Cn=We==null?ve:fo(We),se=Ke==null?ve:fo(Ke),ve=new $e(Re,Q+"leave",We,d,Ee),ve.target=Cn,ve.relatedTarget=se,Re=null,Ds(Ee)===ue&&($e=new $e(ie,Q+"enter",Ke,d,Ee),$e.target=se,$e.relatedTarget=Cn,Re=$e),Cn=Re,We&&Ke)t:{for($e=We,ie=Ke,Q=0,se=$e;se;se=co(se))Q++;for(se=0,Re=ie;Re;Re=co(Re))se++;for(;0<Q-se;)$e=co($e),Q--;for(;0<se-Q;)ie=co(ie),se--;for(;Q--;){if($e===ie||ie!==null&&$e===ie.alternate)break t;$e=co($e),ie=co(ie)}$e=null}else $e=null;We!==null&&ah(be,ve,We,$e,!1),Ke!==null&&Cn!==null&&ah(be,Cn,Ke,$e,!0)}}e:{if(ve=ue?fo(ue):window,We=ve.nodeName&&ve.nodeName.toLowerCase(),We==="select"||We==="input"&&ve.type==="file")var Ze=l;else if(Rt(ve))if(c)Ze=X;else{Ze=M;var nt=P}else(We=ve.nodeName)&&We.toLowerCase()==="input"&&(ve.type==="checkbox"||ve.type==="radio")&&(Ze=U);if(Ze&&(Ze=Ze(t,ue))){Os(be,Ze,d,Ee);break e}nt&&nt(t,ve,ue),t==="focusout"&&(nt=ve._wrapperState)&&nt.controlled&&ve.type==="number"&&pt(ve,"number",ve.value)}switch(nt=ue?fo(ue):window,t){case"focusin":(Rt(nt)||nt.contentEditable==="true")&&(vn=nt,Ft=ue,sn=null);break;case"focusout":sn=Ft=vn=null;break;case"mousedown":Xn=!0;break;case"contextmenu":case"mouseup":case"dragend":Xn=!1,Ii(be,d,Ee);break;case"selectionchange":if(_r)break;case"keydown":case"keyup":Ii(be,d,Ee)}var rt;if(es)e:{switch(t){case"compositionstart":var dt="onCompositionStart";break e;case"compositionend":dt="onCompositionEnd";break e;case"compositionupdate":dt="onCompositionUpdate";break e}dt=void 0}else Gn?ll(t,d)&&(dt="onCompositionEnd"):t==="keydown"&&d.keyCode===229&&(dt="onCompositionStart");dt&&(Nr&&d.locale!=="ko"&&(Gn||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&Gn&&(rt=nl()):(qr=Ee,$o="value"in qr?qr.value:qr.textContent,Gn=!0)),nt=dl(ue,dt),0<nt.length&&(dt=new Gt(dt,t,null,d,Ee),be.push({event:dt,listeners:nt}),rt?dt.data=rt:(rt=ta(d),rt!==null&&(dt.data=rt)))),(rt=ol?Vc(t,d):na(t,d))&&(ue=dl(ue,"onBeforeInput"),0<ue.length&&(Ee=new Gt("onBeforeInput","beforeinput",null,d,Ee),be.push({event:Ee,listeners:ue}),Ee.data=rt))}sh(be,s)})}function oa(t,s,d){return{instance:t,listener:s,currentTarget:d}}function dl(t,s){for(var d=s+"Capture",g=[];t!==null;){var A=t,T=A.stateNode;A.tag===5&&T!==null&&(A=T,T=An(t,d),T!=null&&g.unshift(oa(t,T,A)),T=An(t,s),T!=null&&g.push(oa(t,T,A))),t=t.return}return g}function co(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ah(t,s,d,g,A){for(var T=s._reactName,O=[];d!==null&&d!==g;){var G=d,Y=G.alternate,ue=G.stateNode;if(Y!==null&&Y===g)break;G.tag===5&&ue!==null&&(G=ue,A?(Y=An(d,T),Y!=null&&O.unshift(oa(d,Y,G))):A||(Y=An(d,T),Y!=null&&O.push(oa(d,Y,G)))),d=d.return}O.length!==0&&t.push({event:s,listeners:O})}var nx=/\r\n?/g,rx=/\u0000|\uFFFD/g;function lh(t){return(typeof t=="string"?t:""+t).replace(nx,`
`).replace(rx,"")}function fl(t,s,d){if(s=lh(s),lh(t)!==s&&d)throw Error(a(425))}function hl(){}var Gc=null,Xc=null;function Yc(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Kc=typeof setTimeout=="function"?setTimeout:void 0,ix=typeof clearTimeout=="function"?clearTimeout:void 0,ch=typeof Promise=="function"?Promise:void 0,sx=typeof queueMicrotask=="function"?queueMicrotask:typeof ch<"u"?function(t){return ch.resolve(null).then(t).catch(ox)}:Kc;function ox(t){setTimeout(function(){throw t})}function $c(t,s){var d=s,g=0;do{var A=d.nextSibling;if(t.removeChild(d),A&&A.nodeType===8)if(d=A.data,d==="/$"){if(g===0){t.removeChild(A),Zr(s);return}g--}else d!=="$"&&d!=="$?"&&d!=="$!"||g++;d=A}while(d);Zr(s)}function rs(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function uh(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var d=t.data;if(d==="$"||d==="$!"||d==="$?"){if(s===0)return t;s--}else d==="/$"&&s++}t=t.previousSibling}return null}var uo=Math.random().toString(36).slice(2),di="__reactFiber$"+uo,aa="__reactProps$"+uo,Ni="__reactContainer$"+uo,Zc="__reactEvents$"+uo,ax="__reactListeners$"+uo,lx="__reactHandles$"+uo;function Ds(t){var s=t[di];if(s)return s;for(var d=t.parentNode;d;){if(s=d[Ni]||d[di]){if(d=s.alternate,s.child!==null||d!==null&&d.child!==null)for(t=uh(t);t!==null;){if(d=t[di])return d;t=uh(t)}return s}t=d,d=t.parentNode}return null}function la(t){return t=t[di]||t[Ni],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(a(33))}function pl(t){return t[aa]||null}var qc=[],ho=-1;function is(t){return{current:t}}function qt(t){0>ho||(t.current=qc[ho],qc[ho]=null,ho--)}function $t(t,s){ho++,qc[ho]=t.current,t.current=s}var ss={},nr=is(ss),xr=is(!1),Ms=ss;function po(t,s){var d=t.type.contextTypes;if(!d)return ss;var g=t.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===s)return g.__reactInternalMemoizedMaskedChildContext;var A={},T;for(T in d)A[T]=s[T];return g&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=A),A}function yr(t){return t=t.childContextTypes,t!=null}function gl(){qt(xr),qt(nr)}function dh(t,s,d){if(nr.current!==ss)throw Error(a(168));$t(nr,s),$t(xr,d)}function fh(t,s,d){var g=t.stateNode;if(s=s.childContextTypes,typeof g.getChildContext!="function")return d;g=g.getChildContext();for(var A in g)if(!(A in s))throw Error(a(108,Me(t)||"Unknown",A));return fe({},d,g)}function ml(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ss,Ms=nr.current,$t(nr,t),$t(xr,xr.current),!0}function hh(t,s,d){var g=t.stateNode;if(!g)throw Error(a(169));d?(t=fh(t,s,Ms),g.__reactInternalMemoizedMergedChildContext=t,qt(xr),qt(nr),$t(nr,t)):qt(xr),$t(xr,d)}var _i=null,xl=!1,Qc=!1;function ph(t){_i===null?_i=[t]:_i.push(t)}function cx(t){xl=!0,ph(t)}function os(){if(!Qc&&_i!==null){Qc=!0;var t=0,s=wt;try{var d=_i;for(wt=1;t<d.length;t++){var g=d[t];do g=g(!0);while(g!==null)}_i=null,xl=!1}catch(A){throw _i!==null&&(_i=_i.slice(t+1)),Je(ye,os),A}finally{wt=s,Qc=!1}}return null}var go=[],mo=0,yl=null,wl=0,jr=[],Vr=0,Ls=null,Ri=1,ki="";function Bs(t,s){go[mo++]=wl,go[mo++]=yl,yl=t,wl=s}function gh(t,s,d){jr[Vr++]=Ri,jr[Vr++]=ki,jr[Vr++]=Ls,Ls=t;var g=Ri;t=ki;var A=32-ur(g)-1;g&=~(1<<A),d+=1;var T=32-ur(s)+A;if(30<T){var O=A-A%5;T=(g&(1<<O)-1).toString(32),g>>=O,A-=O,Ri=1<<32-ur(s)+A|d<<A|g,ki=T+t}else Ri=1<<T|d<<A|g,ki=t}function Jc(t){t.return!==null&&(Bs(t,1),gh(t,1,0))}function eu(t){for(;t===yl;)yl=go[--mo],go[mo]=null,wl=go[--mo],go[mo]=null;for(;t===Ls;)Ls=jr[--Vr],jr[Vr]=null,ki=jr[--Vr],jr[Vr]=null,Ri=jr[--Vr],jr[Vr]=null}var Rr=null,kr=null,Jt=!1,Jr=null;function mh(t,s){var d=Hr(5,null,null,0);d.elementType="DELETED",d.stateNode=s,d.return=t,s=t.deletions,s===null?(t.deletions=[d],t.flags|=16):s.push(d)}function xh(t,s){switch(t.tag){case 5:var d=t.type;return s=s.nodeType!==1||d.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,Rr=t,kr=rs(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,Rr=t,kr=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(d=Ls!==null?{id:Ri,overflow:ki}:null,t.memoizedState={dehydrated:s,treeContext:d,retryLane:1073741824},d=Hr(18,null,null,0),d.stateNode=s,d.return=t,t.child=d,Rr=t,kr=null,!0):!1;default:return!1}}function tu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function nu(t){if(Jt){var s=kr;if(s){var d=s;if(!xh(t,s)){if(tu(t))throw Error(a(418));s=rs(d.nextSibling);var g=Rr;s&&xh(t,s)?mh(g,d):(t.flags=t.flags&-4097|2,Jt=!1,Rr=t)}}else{if(tu(t))throw Error(a(418));t.flags=t.flags&-4097|2,Jt=!1,Rr=t}}}function yh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Rr=t}function vl(t){if(t!==Rr)return!1;if(!Jt)return yh(t),Jt=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!Yc(t.type,t.memoizedProps)),s&&(s=kr)){if(tu(t))throw wh(),Error(a(418));for(;s;)mh(t,s),s=rs(s.nextSibling)}if(yh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var d=t.data;if(d==="/$"){if(s===0){kr=rs(t.nextSibling);break e}s--}else d!=="$"&&d!=="$!"&&d!=="$?"||s++}t=t.nextSibling}kr=null}}else kr=Rr?rs(t.stateNode.nextSibling):null;return!0}function wh(){for(var t=kr;t;)t=rs(t.nextSibling)}function xo(){kr=Rr=null,Jt=!1}function ru(t){Jr===null?Jr=[t]:Jr.push(t)}var ux=J.ReactCurrentBatchConfig;function ca(t,s,d){if(t=d.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(a(309));var g=d.stateNode}if(!g)throw Error(a(147,t));var A=g,T=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===T?s.ref:(s=function(O){var G=A.refs;O===null?delete G[T]:G[T]=O},s._stringRef=T,s)}if(typeof t!="string")throw Error(a(284));if(!d._owner)throw Error(a(290,t))}return t}function Cl(t,s){throw t=Object.prototype.toString.call(s),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function vh(t){var s=t._init;return s(t._payload)}function Ch(t){function s(ie,Q){if(t){var se=ie.deletions;se===null?(ie.deletions=[Q],ie.flags|=16):se.push(Q)}}function d(ie,Q){if(!t)return null;for(;Q!==null;)s(ie,Q),Q=Q.sibling;return null}function g(ie,Q){for(ie=new Map;Q!==null;)Q.key!==null?ie.set(Q.key,Q):ie.set(Q.index,Q),Q=Q.sibling;return ie}function A(ie,Q){return ie=ps(ie,Q),ie.index=0,ie.sibling=null,ie}function T(ie,Q,se){return ie.index=se,t?(se=ie.alternate,se!==null?(se=se.index,se<Q?(ie.flags|=2,Q):se):(ie.flags|=2,Q)):(ie.flags|=1048576,Q)}function O(ie){return t&&ie.alternate===null&&(ie.flags|=2),ie}function G(ie,Q,se,Re){return Q===null||Q.tag!==6?(Q=Ku(se,ie.mode,Re),Q.return=ie,Q):(Q=A(Q,se),Q.return=ie,Q)}function Y(ie,Q,se,Re){var Ze=se.type;return Ze===q?Ee(ie,Q,se.props.children,Re,se.key):Q!==null&&(Q.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===He&&vh(Ze)===Q.type)?(Re=A(Q,se.props),Re.ref=ca(ie,Q,se),Re.return=ie,Re):(Re=Gl(se.type,se.key,se.props,null,ie.mode,Re),Re.ref=ca(ie,Q,se),Re.return=ie,Re)}function ue(ie,Q,se,Re){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==se.containerInfo||Q.stateNode.implementation!==se.implementation?(Q=$u(se,ie.mode,Re),Q.return=ie,Q):(Q=A(Q,se.children||[]),Q.return=ie,Q)}function Ee(ie,Q,se,Re,Ze){return Q===null||Q.tag!==7?(Q=Gs(se,ie.mode,Re,Ze),Q.return=ie,Q):(Q=A(Q,se),Q.return=ie,Q)}function be(ie,Q,se){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=Ku(""+Q,ie.mode,se),Q.return=ie,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case ne:return se=Gl(Q.type,Q.key,Q.props,null,ie.mode,se),se.ref=ca(ie,null,Q),se.return=ie,se;case de:return Q=$u(Q,ie.mode,se),Q.return=ie,Q;case He:var Re=Q._init;return be(ie,Re(Q._payload),se)}if(xn(Q)||Le(Q))return Q=Gs(Q,ie.mode,se,null),Q.return=ie,Q;Cl(ie,Q)}return null}function ve(ie,Q,se,Re){var Ze=Q!==null?Q.key:null;if(typeof se=="string"&&se!==""||typeof se=="number")return Ze!==null?null:G(ie,Q,""+se,Re);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case ne:return se.key===Ze?Y(ie,Q,se,Re):null;case de:return se.key===Ze?ue(ie,Q,se,Re):null;case He:return Ze=se._init,ve(ie,Q,Ze(se._payload),Re)}if(xn(se)||Le(se))return Ze!==null?null:Ee(ie,Q,se,Re,null);Cl(ie,se)}return null}function We(ie,Q,se,Re,Ze){if(typeof Re=="string"&&Re!==""||typeof Re=="number")return ie=ie.get(se)||null,G(Q,ie,""+Re,Ze);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case ne:return ie=ie.get(Re.key===null?se:Re.key)||null,Y(Q,ie,Re,Ze);case de:return ie=ie.get(Re.key===null?se:Re.key)||null,ue(Q,ie,Re,Ze);case He:var nt=Re._init;return We(ie,Q,se,nt(Re._payload),Ze)}if(xn(Re)||Le(Re))return ie=ie.get(se)||null,Ee(Q,ie,Re,Ze,null);Cl(Q,Re)}return null}function Ke(ie,Q,se,Re){for(var Ze=null,nt=null,rt=Q,dt=Q=0,Vn=null;rt!==null&&dt<se.length;dt++){rt.index>dt?(Vn=rt,rt=null):Vn=rt.sibling;var Bt=ve(ie,rt,se[dt],Re);if(Bt===null){rt===null&&(rt=Vn);break}t&&rt&&Bt.alternate===null&&s(ie,rt),Q=T(Bt,Q,dt),nt===null?Ze=Bt:nt.sibling=Bt,nt=Bt,rt=Vn}if(dt===se.length)return d(ie,rt),Jt&&Bs(ie,dt),Ze;if(rt===null){for(;dt<se.length;dt++)rt=be(ie,se[dt],Re),rt!==null&&(Q=T(rt,Q,dt),nt===null?Ze=rt:nt.sibling=rt,nt=rt);return Jt&&Bs(ie,dt),Ze}for(rt=g(ie,rt);dt<se.length;dt++)Vn=We(rt,ie,dt,se[dt],Re),Vn!==null&&(t&&Vn.alternate!==null&&rt.delete(Vn.key===null?dt:Vn.key),Q=T(Vn,Q,dt),nt===null?Ze=Vn:nt.sibling=Vn,nt=Vn);return t&&rt.forEach(function(gs){return s(ie,gs)}),Jt&&Bs(ie,dt),Ze}function $e(ie,Q,se,Re){var Ze=Le(se);if(typeof Ze!="function")throw Error(a(150));if(se=Ze.call(se),se==null)throw Error(a(151));for(var nt=Ze=null,rt=Q,dt=Q=0,Vn=null,Bt=se.next();rt!==null&&!Bt.done;dt++,Bt=se.next()){rt.index>dt?(Vn=rt,rt=null):Vn=rt.sibling;var gs=ve(ie,rt,Bt.value,Re);if(gs===null){rt===null&&(rt=Vn);break}t&&rt&&gs.alternate===null&&s(ie,rt),Q=T(gs,Q,dt),nt===null?Ze=gs:nt.sibling=gs,nt=gs,rt=Vn}if(Bt.done)return d(ie,rt),Jt&&Bs(ie,dt),Ze;if(rt===null){for(;!Bt.done;dt++,Bt=se.next())Bt=be(ie,Bt.value,Re),Bt!==null&&(Q=T(Bt,Q,dt),nt===null?Ze=Bt:nt.sibling=Bt,nt=Bt);return Jt&&Bs(ie,dt),Ze}for(rt=g(ie,rt);!Bt.done;dt++,Bt=se.next())Bt=We(rt,ie,dt,Bt.value,Re),Bt!==null&&(t&&Bt.alternate!==null&&rt.delete(Bt.key===null?dt:Bt.key),Q=T(Bt,Q,dt),nt===null?Ze=Bt:nt.sibling=Bt,nt=Bt);return t&&rt.forEach(function(Wx){return s(ie,Wx)}),Jt&&Bs(ie,dt),Ze}function Cn(ie,Q,se,Re){if(typeof se=="object"&&se!==null&&se.type===q&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case ne:e:{for(var Ze=se.key,nt=Q;nt!==null;){if(nt.key===Ze){if(Ze=se.type,Ze===q){if(nt.tag===7){d(ie,nt.sibling),Q=A(nt,se.props.children),Q.return=ie,ie=Q;break e}}else if(nt.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===He&&vh(Ze)===nt.type){d(ie,nt.sibling),Q=A(nt,se.props),Q.ref=ca(ie,nt,se),Q.return=ie,ie=Q;break e}d(ie,nt);break}else s(ie,nt);nt=nt.sibling}se.type===q?(Q=Gs(se.props.children,ie.mode,Re,se.key),Q.return=ie,ie=Q):(Re=Gl(se.type,se.key,se.props,null,ie.mode,Re),Re.ref=ca(ie,Q,se),Re.return=ie,ie=Re)}return O(ie);case de:e:{for(nt=se.key;Q!==null;){if(Q.key===nt)if(Q.tag===4&&Q.stateNode.containerInfo===se.containerInfo&&Q.stateNode.implementation===se.implementation){d(ie,Q.sibling),Q=A(Q,se.children||[]),Q.return=ie,ie=Q;break e}else{d(ie,Q);break}else s(ie,Q);Q=Q.sibling}Q=$u(se,ie.mode,Re),Q.return=ie,ie=Q}return O(ie);case He:return nt=se._init,Cn(ie,Q,nt(se._payload),Re)}if(xn(se))return Ke(ie,Q,se,Re);if(Le(se))return $e(ie,Q,se,Re);Cl(ie,se)}return typeof se=="string"&&se!==""||typeof se=="number"?(se=""+se,Q!==null&&Q.tag===6?(d(ie,Q.sibling),Q=A(Q,se),Q.return=ie,ie=Q):(d(ie,Q),Q=Ku(se,ie.mode,Re),Q.return=ie,ie=Q),O(ie)):d(ie,Q)}return Cn}var yo=Ch(!0),Eh=Ch(!1),El=is(null),Al=null,wo=null,iu=null;function su(){iu=wo=Al=null}function ou(t){var s=El.current;qt(El),t._currentValue=s}function au(t,s,d){for(;t!==null;){var g=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,g!==null&&(g.childLanes|=s)):g!==null&&(g.childLanes&s)!==s&&(g.childLanes|=s),t===d)break;t=t.return}}function vo(t,s){Al=t,iu=wo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(wr=!0),t.firstContext=null)}function zr(t){var s=t._currentValue;if(iu!==t)if(t={context:t,memoizedValue:s,next:null},wo===null){if(Al===null)throw Error(a(308));wo=t,Al.dependencies={lanes:0,firstContext:t}}else wo=wo.next=t;return s}var Fs=null;function lu(t){Fs===null?Fs=[t]:Fs.push(t)}function Ah(t,s,d,g){var A=s.interleaved;return A===null?(d.next=d,lu(s)):(d.next=A.next,A.next=d),s.interleaved=d,Pi(t,g)}function Pi(t,s){t.lanes|=s;var d=t.alternate;for(d!==null&&(d.lanes|=s),d=t,t=t.return;t!==null;)t.childLanes|=s,d=t.alternate,d!==null&&(d.childLanes|=s),d=t,t=t.return;return d.tag===3?d.stateNode:null}var as=!1;function cu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Oi(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function ls(t,s,d){var g=t.updateQueue;if(g===null)return null;if(g=g.shared,Mt&2){var A=g.pending;return A===null?s.next=s:(s.next=A.next,A.next=s),g.pending=s,Pi(t,d)}return A=g.interleaved,A===null?(s.next=s,lu(g)):(s.next=A.next,A.next=s),g.interleaved=s,Pi(t,d)}function bl(t,s,d){if(s=s.updateQueue,s!==null&&(s=s.shared,(d&4194240)!==0)){var g=s.lanes;g&=t.pendingLanes,d|=g,s.lanes=d,fn(t,d)}}function Sh(t,s){var d=t.updateQueue,g=t.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var A=null,T=null;if(d=d.firstBaseUpdate,d!==null){do{var O={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};T===null?A=T=O:T=T.next=O,d=d.next}while(d!==null);T===null?A=T=s:T=T.next=s}else A=T=s;d={baseState:g.baseState,firstBaseUpdate:A,lastBaseUpdate:T,shared:g.shared,effects:g.effects},t.updateQueue=d;return}t=d.lastBaseUpdate,t===null?d.firstBaseUpdate=s:t.next=s,d.lastBaseUpdate=s}function Sl(t,s,d,g){var A=t.updateQueue;as=!1;var T=A.firstBaseUpdate,O=A.lastBaseUpdate,G=A.shared.pending;if(G!==null){A.shared.pending=null;var Y=G,ue=Y.next;Y.next=null,O===null?T=ue:O.next=ue,O=Y;var Ee=t.alternate;Ee!==null&&(Ee=Ee.updateQueue,G=Ee.lastBaseUpdate,G!==O&&(G===null?Ee.firstBaseUpdate=ue:G.next=ue,Ee.lastBaseUpdate=Y))}if(T!==null){var be=A.baseState;O=0,Ee=ue=Y=null,G=T;do{var ve=G.lane,We=G.eventTime;if((g&ve)===ve){Ee!==null&&(Ee=Ee.next={eventTime:We,lane:0,tag:G.tag,payload:G.payload,callback:G.callback,next:null});e:{var Ke=t,$e=G;switch(ve=s,We=d,$e.tag){case 1:if(Ke=$e.payload,typeof Ke=="function"){be=Ke.call(We,be,ve);break e}be=Ke;break e;case 3:Ke.flags=Ke.flags&-65537|128;case 0:if(Ke=$e.payload,ve=typeof Ke=="function"?Ke.call(We,be,ve):Ke,ve==null)break e;be=fe({},be,ve);break e;case 2:as=!0}}G.callback!==null&&G.lane!==0&&(t.flags|=64,ve=A.effects,ve===null?A.effects=[G]:ve.push(G))}else We={eventTime:We,lane:ve,tag:G.tag,payload:G.payload,callback:G.callback,next:null},Ee===null?(ue=Ee=We,Y=be):Ee=Ee.next=We,O|=ve;if(G=G.next,G===null){if(G=A.shared.pending,G===null)break;ve=G,G=ve.next,ve.next=null,A.lastBaseUpdate=ve,A.shared.pending=null}}while(!0);if(Ee===null&&(Y=be),A.baseState=Y,A.firstBaseUpdate=ue,A.lastBaseUpdate=Ee,s=A.shared.interleaved,s!==null){A=s;do O|=A.lane,A=A.next;while(A!==s)}else T===null&&(A.shared.lanes=0);zs|=O,t.lanes=O,t.memoizedState=be}}function Th(t,s,d){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var g=t[s],A=g.callback;if(A!==null){if(g.callback=null,g=d,typeof A!="function")throw Error(a(191,A));A.call(g)}}}var ua={},fi=is(ua),da=is(ua),fa=is(ua);function js(t){if(t===ua)throw Error(a(174));return t}function uu(t,s){switch($t(fa,s),$t(da,t),$t(fi,ua),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Ut(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=Ut(s,t)}qt(fi),$t(fi,s)}function Co(){qt(fi),qt(da),qt(fa)}function Ih(t){js(fa.current);var s=js(fi.current),d=Ut(s,t.type);s!==d&&($t(da,t),$t(fi,d))}function du(t){da.current===t&&(qt(fi),qt(da))}var on=is(0);function Tl(t){for(var s=t;s!==null;){if(s.tag===13){var d=s.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var fu=[];function hu(){for(var t=0;t<fu.length;t++)fu[t]._workInProgressVersionPrimary=null;fu.length=0}var Il=J.ReactCurrentDispatcher,pu=J.ReactCurrentBatchConfig,Vs=0,an=null,kn=null,Fn=null,Nl=!1,ha=!1,pa=0,dx=0;function rr(){throw Error(a(321))}function gu(t,s){if(s===null)return!1;for(var d=0;d<s.length&&d<t.length;d++)if(!te(t[d],s[d]))return!1;return!0}function mu(t,s,d,g,A,T){if(Vs=T,an=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Il.current=t===null||t.memoizedState===null?gx:mx,t=d(g,A),ha){T=0;do{if(ha=!1,pa=0,25<=T)throw Error(a(301));T+=1,Fn=kn=null,s.updateQueue=null,Il.current=xx,t=d(g,A)}while(ha)}if(Il.current=kl,s=kn!==null&&kn.next!==null,Vs=0,Fn=kn=an=null,Nl=!1,s)throw Error(a(300));return t}function xu(){var t=pa!==0;return pa=0,t}function hi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fn===null?an.memoizedState=Fn=t:Fn=Fn.next=t,Fn}function Ur(){if(kn===null){var t=an.alternate;t=t!==null?t.memoizedState:null}else t=kn.next;var s=Fn===null?an.memoizedState:Fn.next;if(s!==null)Fn=s,kn=t;else{if(t===null)throw Error(a(310));kn=t,t={memoizedState:kn.memoizedState,baseState:kn.baseState,baseQueue:kn.baseQueue,queue:kn.queue,next:null},Fn===null?an.memoizedState=Fn=t:Fn=Fn.next=t}return Fn}function ga(t,s){return typeof s=="function"?s(t):s}function yu(t){var s=Ur(),d=s.queue;if(d===null)throw Error(a(311));d.lastRenderedReducer=t;var g=kn,A=g.baseQueue,T=d.pending;if(T!==null){if(A!==null){var O=A.next;A.next=T.next,T.next=O}g.baseQueue=A=T,d.pending=null}if(A!==null){T=A.next,g=g.baseState;var G=O=null,Y=null,ue=T;do{var Ee=ue.lane;if((Vs&Ee)===Ee)Y!==null&&(Y=Y.next={lane:0,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),g=ue.hasEagerState?ue.eagerState:t(g,ue.action);else{var be={lane:Ee,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null};Y===null?(G=Y=be,O=g):Y=Y.next=be,an.lanes|=Ee,zs|=Ee}ue=ue.next}while(ue!==null&&ue!==T);Y===null?O=g:Y.next=G,te(g,s.memoizedState)||(wr=!0),s.memoizedState=g,s.baseState=O,s.baseQueue=Y,d.lastRenderedState=g}if(t=d.interleaved,t!==null){A=t;do T=A.lane,an.lanes|=T,zs|=T,A=A.next;while(A!==t)}else A===null&&(d.lanes=0);return[s.memoizedState,d.dispatch]}function wu(t){var s=Ur(),d=s.queue;if(d===null)throw Error(a(311));d.lastRenderedReducer=t;var g=d.dispatch,A=d.pending,T=s.memoizedState;if(A!==null){d.pending=null;var O=A=A.next;do T=t(T,O.action),O=O.next;while(O!==A);te(T,s.memoizedState)||(wr=!0),s.memoizedState=T,s.baseQueue===null&&(s.baseState=T),d.lastRenderedState=T}return[T,g]}function Nh(){}function _h(t,s){var d=an,g=Ur(),A=s(),T=!te(g.memoizedState,A);if(T&&(g.memoizedState=A,wr=!0),g=g.queue,vu(Ph.bind(null,d,g,t),[t]),g.getSnapshot!==s||T||Fn!==null&&Fn.memoizedState.tag&1){if(d.flags|=2048,ma(9,kh.bind(null,d,g,A,s),void 0,null),jn===null)throw Error(a(349));Vs&30||Rh(d,s,A)}return A}function Rh(t,s,d){t.flags|=16384,t={getSnapshot:s,value:d},s=an.updateQueue,s===null?(s={lastEffect:null,stores:null},an.updateQueue=s,s.stores=[t]):(d=s.stores,d===null?s.stores=[t]:d.push(t))}function kh(t,s,d,g){s.value=d,s.getSnapshot=g,Oh(s)&&Dh(t)}function Ph(t,s,d){return d(function(){Oh(s)&&Dh(t)})}function Oh(t){var s=t.getSnapshot;t=t.value;try{var d=s();return!te(t,d)}catch{return!0}}function Dh(t){var s=Pi(t,1);s!==null&&ri(s,t,1,-1)}function Mh(t){var s=hi();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:t},s.queue=t,t=t.dispatch=px.bind(null,an,t),[s.memoizedState,t]}function ma(t,s,d,g){return t={tag:t,create:s,destroy:d,deps:g,next:null},s=an.updateQueue,s===null?(s={lastEffect:null,stores:null},an.updateQueue=s,s.lastEffect=t.next=t):(d=s.lastEffect,d===null?s.lastEffect=t.next=t:(g=d.next,d.next=t,t.next=g,s.lastEffect=t)),t}function Lh(){return Ur().memoizedState}function _l(t,s,d,g){var A=hi();an.flags|=t,A.memoizedState=ma(1|s,d,void 0,g===void 0?null:g)}function Rl(t,s,d,g){var A=Ur();g=g===void 0?null:g;var T=void 0;if(kn!==null){var O=kn.memoizedState;if(T=O.destroy,g!==null&&gu(g,O.deps)){A.memoizedState=ma(s,d,T,g);return}}an.flags|=t,A.memoizedState=ma(1|s,d,T,g)}function Bh(t,s){return _l(8390656,8,t,s)}function vu(t,s){return Rl(2048,8,t,s)}function Fh(t,s){return Rl(4,2,t,s)}function jh(t,s){return Rl(4,4,t,s)}function Vh(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function zh(t,s,d){return d=d!=null?d.concat([t]):null,Rl(4,4,Vh.bind(null,s,t),d)}function Cu(){}function Uh(t,s){var d=Ur();s=s===void 0?null:s;var g=d.memoizedState;return g!==null&&s!==null&&gu(s,g[1])?g[0]:(d.memoizedState=[t,s],t)}function Wh(t,s){var d=Ur();s=s===void 0?null:s;var g=d.memoizedState;return g!==null&&s!==null&&gu(s,g[1])?g[0]:(t=t(),d.memoizedState=[t,s],t)}function Hh(t,s,d){return Vs&21?(te(d,s)||(d=In(),an.lanes|=d,zs|=d,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,wr=!0),t.memoizedState=d)}function fx(t,s){var d=wt;wt=d!==0&&4>d?d:4,t(!0);var g=pu.transition;pu.transition={};try{t(!1),s()}finally{wt=d,pu.transition=g}}function Gh(){return Ur().memoizedState}function hx(t,s,d){var g=fs(t);if(d={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null},Xh(t))Yh(s,d);else if(d=Ah(t,s,d,g),d!==null){var A=fr();ri(d,t,g,A),Kh(d,s,g)}}function px(t,s,d){var g=fs(t),A={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null};if(Xh(t))Yh(s,A);else{var T=t.alternate;if(t.lanes===0&&(T===null||T.lanes===0)&&(T=s.lastRenderedReducer,T!==null))try{var O=s.lastRenderedState,G=T(O,d);if(A.hasEagerState=!0,A.eagerState=G,te(G,O)){var Y=s.interleaved;Y===null?(A.next=A,lu(s)):(A.next=Y.next,Y.next=A),s.interleaved=A;return}}catch{}finally{}d=Ah(t,s,A,g),d!==null&&(A=fr(),ri(d,t,g,A),Kh(d,s,g))}}function Xh(t){var s=t.alternate;return t===an||s!==null&&s===an}function Yh(t,s){ha=Nl=!0;var d=t.pending;d===null?s.next=s:(s.next=d.next,d.next=s),t.pending=s}function Kh(t,s,d){if(d&4194240){var g=s.lanes;g&=t.pendingLanes,d|=g,s.lanes=d,fn(t,d)}}var kl={readContext:zr,useCallback:rr,useContext:rr,useEffect:rr,useImperativeHandle:rr,useInsertionEffect:rr,useLayoutEffect:rr,useMemo:rr,useReducer:rr,useRef:rr,useState:rr,useDebugValue:rr,useDeferredValue:rr,useTransition:rr,useMutableSource:rr,useSyncExternalStore:rr,useId:rr,unstable_isNewReconciler:!1},gx={readContext:zr,useCallback:function(t,s){return hi().memoizedState=[t,s===void 0?null:s],t},useContext:zr,useEffect:Bh,useImperativeHandle:function(t,s,d){return d=d!=null?d.concat([t]):null,_l(4194308,4,Vh.bind(null,s,t),d)},useLayoutEffect:function(t,s){return _l(4194308,4,t,s)},useInsertionEffect:function(t,s){return _l(4,2,t,s)},useMemo:function(t,s){var d=hi();return s=s===void 0?null:s,t=t(),d.memoizedState=[t,s],t},useReducer:function(t,s,d){var g=hi();return s=d!==void 0?d(s):s,g.memoizedState=g.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},g.queue=t,t=t.dispatch=hx.bind(null,an,t),[g.memoizedState,t]},useRef:function(t){var s=hi();return t={current:t},s.memoizedState=t},useState:Mh,useDebugValue:Cu,useDeferredValue:function(t){return hi().memoizedState=t},useTransition:function(){var t=Mh(!1),s=t[0];return t=fx.bind(null,t[1]),hi().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,d){var g=an,A=hi();if(Jt){if(d===void 0)throw Error(a(407));d=d()}else{if(d=s(),jn===null)throw Error(a(349));Vs&30||Rh(g,s,d)}A.memoizedState=d;var T={value:d,getSnapshot:s};return A.queue=T,Bh(Ph.bind(null,g,T,t),[t]),g.flags|=2048,ma(9,kh.bind(null,g,T,d,s),void 0,null),d},useId:function(){var t=hi(),s=jn.identifierPrefix;if(Jt){var d=ki,g=Ri;d=(g&~(1<<32-ur(g)-1)).toString(32)+d,s=":"+s+"R"+d,d=pa++,0<d&&(s+="H"+d.toString(32)),s+=":"}else d=dx++,s=":"+s+"r"+d.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},mx={readContext:zr,useCallback:Uh,useContext:zr,useEffect:vu,useImperativeHandle:zh,useInsertionEffect:Fh,useLayoutEffect:jh,useMemo:Wh,useReducer:yu,useRef:Lh,useState:function(){return yu(ga)},useDebugValue:Cu,useDeferredValue:function(t){var s=Ur();return Hh(s,kn.memoizedState,t)},useTransition:function(){var t=yu(ga)[0],s=Ur().memoizedState;return[t,s]},useMutableSource:Nh,useSyncExternalStore:_h,useId:Gh,unstable_isNewReconciler:!1},xx={readContext:zr,useCallback:Uh,useContext:zr,useEffect:vu,useImperativeHandle:zh,useInsertionEffect:Fh,useLayoutEffect:jh,useMemo:Wh,useReducer:wu,useRef:Lh,useState:function(){return wu(ga)},useDebugValue:Cu,useDeferredValue:function(t){var s=Ur();return kn===null?s.memoizedState=t:Hh(s,kn.memoizedState,t)},useTransition:function(){var t=wu(ga)[0],s=Ur().memoizedState;return[t,s]},useMutableSource:Nh,useSyncExternalStore:_h,useId:Gh,unstable_isNewReconciler:!1};function ei(t,s){if(t&&t.defaultProps){s=fe({},s),t=t.defaultProps;for(var d in t)s[d]===void 0&&(s[d]=t[d]);return s}return s}function Eu(t,s,d,g){s=t.memoizedState,d=d(g,s),d=d==null?s:fe({},s,d),t.memoizedState=d,t.lanes===0&&(t.updateQueue.baseState=d)}var Pl={isMounted:function(t){return(t=t._reactInternals)?Qn(t)===t:!1},enqueueSetState:function(t,s,d){t=t._reactInternals;var g=fr(),A=fs(t),T=Oi(g,A);T.payload=s,d!=null&&(T.callback=d),s=ls(t,T,A),s!==null&&(ri(s,t,A,g),bl(s,t,A))},enqueueReplaceState:function(t,s,d){t=t._reactInternals;var g=fr(),A=fs(t),T=Oi(g,A);T.tag=1,T.payload=s,d!=null&&(T.callback=d),s=ls(t,T,A),s!==null&&(ri(s,t,A,g),bl(s,t,A))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var d=fr(),g=fs(t),A=Oi(d,g);A.tag=2,s!=null&&(A.callback=s),s=ls(t,A,g),s!==null&&(ri(s,t,g,d),bl(s,t,g))}};function $h(t,s,d,g,A,T,O){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(g,T,O):s.prototype&&s.prototype.isPureReactComponent?!ae(d,g)||!ae(A,T):!0}function Zh(t,s,d){var g=!1,A=ss,T=s.contextType;return typeof T=="object"&&T!==null?T=zr(T):(A=yr(s)?Ms:nr.current,g=s.contextTypes,T=(g=g!=null)?po(t,A):ss),s=new s(d,T),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Pl,t.stateNode=s,s._reactInternals=t,g&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=A,t.__reactInternalMemoizedMaskedChildContext=T),s}function qh(t,s,d,g){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(d,g),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(d,g),s.state!==t&&Pl.enqueueReplaceState(s,s.state,null)}function Au(t,s,d,g){var A=t.stateNode;A.props=d,A.state=t.memoizedState,A.refs={},cu(t);var T=s.contextType;typeof T=="object"&&T!==null?A.context=zr(T):(T=yr(s)?Ms:nr.current,A.context=po(t,T)),A.state=t.memoizedState,T=s.getDerivedStateFromProps,typeof T=="function"&&(Eu(t,s,T,d),A.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(s=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),s!==A.state&&Pl.enqueueReplaceState(A,A.state,null),Sl(t,d,A,g),A.state=t.memoizedState),typeof A.componentDidMount=="function"&&(t.flags|=4194308)}function Eo(t,s){try{var d="",g=s;do d+=we(g),g=g.return;while(g);var A=d}catch(T){A=`
Error generating stack: `+T.message+`
`+T.stack}return{value:t,source:s,stack:A,digest:null}}function bu(t,s,d){return{value:t,source:null,stack:d??null,digest:s??null}}function Su(t,s){try{console.error(s.value)}catch(d){setTimeout(function(){throw d})}}var yx=typeof WeakMap=="function"?WeakMap:Map;function Qh(t,s,d){d=Oi(-1,d),d.tag=3,d.payload={element:null};var g=s.value;return d.callback=function(){jl||(jl=!0,Vu=g),Su(t,s)},d}function Jh(t,s,d){d=Oi(-1,d),d.tag=3;var g=t.type.getDerivedStateFromError;if(typeof g=="function"){var A=s.value;d.payload=function(){return g(A)},d.callback=function(){Su(t,s)}}var T=t.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(d.callback=function(){Su(t,s),typeof g!="function"&&(us===null?us=new Set([this]):us.add(this));var O=s.stack;this.componentDidCatch(s.value,{componentStack:O!==null?O:""})}),d}function e0(t,s,d){var g=t.pingCache;if(g===null){g=t.pingCache=new yx;var A=new Set;g.set(s,A)}else A=g.get(s),A===void 0&&(A=new Set,g.set(s,A));A.has(d)||(A.add(d),t=Px.bind(null,t,s,d),s.then(t,t))}function t0(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function n0(t,s,d,g,A){return t.mode&1?(t.flags|=65536,t.lanes=A,t):(t===s?t.flags|=65536:(t.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(s=Oi(-1,1),s.tag=2,ls(d,s,1))),d.lanes|=1),t)}var wx=J.ReactCurrentOwner,wr=!1;function dr(t,s,d,g){s.child=t===null?Eh(s,null,d,g):yo(s,t.child,d,g)}function r0(t,s,d,g,A){d=d.render;var T=s.ref;return vo(s,A),g=mu(t,s,d,g,T,A),d=xu(),t!==null&&!wr?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~A,Di(t,s,A)):(Jt&&d&&Jc(s),s.flags|=1,dr(t,s,g,A),s.child)}function i0(t,s,d,g,A){if(t===null){var T=d.type;return typeof T=="function"&&!Yu(T)&&T.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(s.tag=15,s.type=T,s0(t,s,T,g,A)):(t=Gl(d.type,null,g,s,s.mode,A),t.ref=s.ref,t.return=s,s.child=t)}if(T=t.child,!(t.lanes&A)){var O=T.memoizedProps;if(d=d.compare,d=d!==null?d:ae,d(O,g)&&t.ref===s.ref)return Di(t,s,A)}return s.flags|=1,t=ps(T,g),t.ref=s.ref,t.return=s,s.child=t}function s0(t,s,d,g,A){if(t!==null){var T=t.memoizedProps;if(ae(T,g)&&t.ref===s.ref)if(wr=!1,s.pendingProps=g=T,(t.lanes&A)!==0)t.flags&131072&&(wr=!0);else return s.lanes=t.lanes,Di(t,s,A)}return Tu(t,s,d,g,A)}function o0(t,s,d){var g=s.pendingProps,A=g.children,T=t!==null?t.memoizedState:null;if(g.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},$t(bo,Pr),Pr|=d;else{if(!(d&1073741824))return t=T!==null?T.baseLanes|d:d,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,$t(bo,Pr),Pr|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=T!==null?T.baseLanes:d,$t(bo,Pr),Pr|=g}else T!==null?(g=T.baseLanes|d,s.memoizedState=null):g=d,$t(bo,Pr),Pr|=g;return dr(t,s,A,d),s.child}function a0(t,s){var d=s.ref;(t===null&&d!==null||t!==null&&t.ref!==d)&&(s.flags|=512,s.flags|=2097152)}function Tu(t,s,d,g,A){var T=yr(d)?Ms:nr.current;return T=po(s,T),vo(s,A),d=mu(t,s,d,g,T,A),g=xu(),t!==null&&!wr?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~A,Di(t,s,A)):(Jt&&g&&Jc(s),s.flags|=1,dr(t,s,d,A),s.child)}function l0(t,s,d,g,A){if(yr(d)){var T=!0;ml(s)}else T=!1;if(vo(s,A),s.stateNode===null)Dl(t,s),Zh(s,d,g),Au(s,d,g,A),g=!0;else if(t===null){var O=s.stateNode,G=s.memoizedProps;O.props=G;var Y=O.context,ue=d.contextType;typeof ue=="object"&&ue!==null?ue=zr(ue):(ue=yr(d)?Ms:nr.current,ue=po(s,ue));var Ee=d.getDerivedStateFromProps,be=typeof Ee=="function"||typeof O.getSnapshotBeforeUpdate=="function";be||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(G!==g||Y!==ue)&&qh(s,O,g,ue),as=!1;var ve=s.memoizedState;O.state=ve,Sl(s,g,O,A),Y=s.memoizedState,G!==g||ve!==Y||xr.current||as?(typeof Ee=="function"&&(Eu(s,d,Ee,g),Y=s.memoizedState),(G=as||$h(s,d,G,g,ve,Y,ue))?(be||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(s.flags|=4194308)):(typeof O.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=g,s.memoizedState=Y),O.props=g,O.state=Y,O.context=ue,g=G):(typeof O.componentDidMount=="function"&&(s.flags|=4194308),g=!1)}else{O=s.stateNode,bh(t,s),G=s.memoizedProps,ue=s.type===s.elementType?G:ei(s.type,G),O.props=ue,be=s.pendingProps,ve=O.context,Y=d.contextType,typeof Y=="object"&&Y!==null?Y=zr(Y):(Y=yr(d)?Ms:nr.current,Y=po(s,Y));var We=d.getDerivedStateFromProps;(Ee=typeof We=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(G!==be||ve!==Y)&&qh(s,O,g,Y),as=!1,ve=s.memoizedState,O.state=ve,Sl(s,g,O,A);var Ke=s.memoizedState;G!==be||ve!==Ke||xr.current||as?(typeof We=="function"&&(Eu(s,d,We,g),Ke=s.memoizedState),(ue=as||$h(s,d,ue,g,ve,Ke,Y)||!1)?(Ee||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(g,Ke,Y),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(g,Ke,Y)),typeof O.componentDidUpdate=="function"&&(s.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof O.componentDidUpdate!="function"||G===t.memoizedProps&&ve===t.memoizedState||(s.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||G===t.memoizedProps&&ve===t.memoizedState||(s.flags|=1024),s.memoizedProps=g,s.memoizedState=Ke),O.props=g,O.state=Ke,O.context=Y,g=ue):(typeof O.componentDidUpdate!="function"||G===t.memoizedProps&&ve===t.memoizedState||(s.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||G===t.memoizedProps&&ve===t.memoizedState||(s.flags|=1024),g=!1)}return Iu(t,s,d,g,T,A)}function Iu(t,s,d,g,A,T){a0(t,s);var O=(s.flags&128)!==0;if(!g&&!O)return A&&hh(s,d,!1),Di(t,s,T);g=s.stateNode,wx.current=s;var G=O&&typeof d.getDerivedStateFromError!="function"?null:g.render();return s.flags|=1,t!==null&&O?(s.child=yo(s,t.child,null,T),s.child=yo(s,null,G,T)):dr(t,s,G,T),s.memoizedState=g.state,A&&hh(s,d,!0),s.child}function c0(t){var s=t.stateNode;s.pendingContext?dh(t,s.pendingContext,s.pendingContext!==s.context):s.context&&dh(t,s.context,!1),uu(t,s.containerInfo)}function u0(t,s,d,g,A){return xo(),ru(A),s.flags|=256,dr(t,s,d,g),s.child}var Nu={dehydrated:null,treeContext:null,retryLane:0};function _u(t){return{baseLanes:t,cachePool:null,transitions:null}}function d0(t,s,d){var g=s.pendingProps,A=on.current,T=!1,O=(s.flags&128)!==0,G;if((G=O)||(G=t!==null&&t.memoizedState===null?!1:(A&2)!==0),G?(T=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(A|=1),$t(on,A&1),t===null)return nu(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(O=g.children,t=g.fallback,T?(g=s.mode,T=s.child,O={mode:"hidden",children:O},!(g&1)&&T!==null?(T.childLanes=0,T.pendingProps=O):T=Xl(O,g,0,null),t=Gs(t,g,d,null),T.return=s,t.return=s,T.sibling=t,s.child=T,s.child.memoizedState=_u(d),s.memoizedState=Nu,t):Ru(s,O));if(A=t.memoizedState,A!==null&&(G=A.dehydrated,G!==null))return vx(t,s,O,g,G,A,d);if(T){T=g.fallback,O=s.mode,A=t.child,G=A.sibling;var Y={mode:"hidden",children:g.children};return!(O&1)&&s.child!==A?(g=s.child,g.childLanes=0,g.pendingProps=Y,s.deletions=null):(g=ps(A,Y),g.subtreeFlags=A.subtreeFlags&14680064),G!==null?T=ps(G,T):(T=Gs(T,O,d,null),T.flags|=2),T.return=s,g.return=s,g.sibling=T,s.child=g,g=T,T=s.child,O=t.child.memoizedState,O=O===null?_u(d):{baseLanes:O.baseLanes|d,cachePool:null,transitions:O.transitions},T.memoizedState=O,T.childLanes=t.childLanes&~d,s.memoizedState=Nu,g}return T=t.child,t=T.sibling,g=ps(T,{mode:"visible",children:g.children}),!(s.mode&1)&&(g.lanes=d),g.return=s,g.sibling=null,t!==null&&(d=s.deletions,d===null?(s.deletions=[t],s.flags|=16):d.push(t)),s.child=g,s.memoizedState=null,g}function Ru(t,s){return s=Xl({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function Ol(t,s,d,g){return g!==null&&ru(g),yo(s,t.child,null,d),t=Ru(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function vx(t,s,d,g,A,T,O){if(d)return s.flags&256?(s.flags&=-257,g=bu(Error(a(422))),Ol(t,s,O,g)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(T=g.fallback,A=s.mode,g=Xl({mode:"visible",children:g.children},A,0,null),T=Gs(T,A,O,null),T.flags|=2,g.return=s,T.return=s,g.sibling=T,s.child=g,s.mode&1&&yo(s,t.child,null,O),s.child.memoizedState=_u(O),s.memoizedState=Nu,T);if(!(s.mode&1))return Ol(t,s,O,null);if(A.data==="$!"){if(g=A.nextSibling&&A.nextSibling.dataset,g)var G=g.dgst;return g=G,T=Error(a(419)),g=bu(T,g,void 0),Ol(t,s,O,g)}if(G=(O&t.childLanes)!==0,wr||G){if(g=jn,g!==null){switch(O&-O){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}A=A&(g.suspendedLanes|O)?0:A,A!==0&&A!==T.retryLane&&(T.retryLane=A,Pi(t,A),ri(g,t,A,-1))}return Xu(),g=bu(Error(a(421))),Ol(t,s,O,g)}return A.data==="$?"?(s.flags|=128,s.child=t.child,s=Ox.bind(null,t),A._reactRetry=s,null):(t=T.treeContext,kr=rs(A.nextSibling),Rr=s,Jt=!0,Jr=null,t!==null&&(jr[Vr++]=Ri,jr[Vr++]=ki,jr[Vr++]=Ls,Ri=t.id,ki=t.overflow,Ls=s),s=Ru(s,g.children),s.flags|=4096,s)}function f0(t,s,d){t.lanes|=s;var g=t.alternate;g!==null&&(g.lanes|=s),au(t.return,s,d)}function ku(t,s,d,g,A){var T=t.memoizedState;T===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:A}:(T.isBackwards=s,T.rendering=null,T.renderingStartTime=0,T.last=g,T.tail=d,T.tailMode=A)}function h0(t,s,d){var g=s.pendingProps,A=g.revealOrder,T=g.tail;if(dr(t,s,g.children,d),g=on.current,g&2)g=g&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&f0(t,d,s);else if(t.tag===19)f0(t,d,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}g&=1}if($t(on,g),!(s.mode&1))s.memoizedState=null;else switch(A){case"forwards":for(d=s.child,A=null;d!==null;)t=d.alternate,t!==null&&Tl(t)===null&&(A=d),d=d.sibling;d=A,d===null?(A=s.child,s.child=null):(A=d.sibling,d.sibling=null),ku(s,!1,A,d,T);break;case"backwards":for(d=null,A=s.child,s.child=null;A!==null;){if(t=A.alternate,t!==null&&Tl(t)===null){s.child=A;break}t=A.sibling,A.sibling=d,d=A,A=t}ku(s,!0,d,null,T);break;case"together":ku(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Dl(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function Di(t,s,d){if(t!==null&&(s.dependencies=t.dependencies),zs|=s.lanes,!(d&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(a(153));if(s.child!==null){for(t=s.child,d=ps(t,t.pendingProps),s.child=d,d.return=s;t.sibling!==null;)t=t.sibling,d=d.sibling=ps(t,t.pendingProps),d.return=s;d.sibling=null}return s.child}function Cx(t,s,d){switch(s.tag){case 3:c0(s),xo();break;case 5:Ih(s);break;case 1:yr(s.type)&&ml(s);break;case 4:uu(s,s.stateNode.containerInfo);break;case 10:var g=s.type._context,A=s.memoizedProps.value;$t(El,g._currentValue),g._currentValue=A;break;case 13:if(g=s.memoizedState,g!==null)return g.dehydrated!==null?($t(on,on.current&1),s.flags|=128,null):d&s.child.childLanes?d0(t,s,d):($t(on,on.current&1),t=Di(t,s,d),t!==null?t.sibling:null);$t(on,on.current&1);break;case 19:if(g=(d&s.childLanes)!==0,t.flags&128){if(g)return h0(t,s,d);s.flags|=128}if(A=s.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),$t(on,on.current),g)break;return null;case 22:case 23:return s.lanes=0,o0(t,s,d)}return Di(t,s,d)}var p0,Pu,g0,m0;p0=function(t,s){for(var d=s.child;d!==null;){if(d.tag===5||d.tag===6)t.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break;for(;d.sibling===null;){if(d.return===null||d.return===s)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Pu=function(){},g0=function(t,s,d,g){var A=t.memoizedProps;if(A!==g){t=s.stateNode,js(fi.current);var T=null;switch(d){case"input":A=it(t,A),g=it(t,g),T=[];break;case"select":A=fe({},A,{value:void 0}),g=fe({},g,{value:void 0}),T=[];break;case"textarea":A=zn(t,A),g=zn(t,g),T=[];break;default:typeof A.onClick!="function"&&typeof g.onClick=="function"&&(t.onclick=hl)}st(d,g);var O;d=null;for(ue in A)if(!g.hasOwnProperty(ue)&&A.hasOwnProperty(ue)&&A[ue]!=null)if(ue==="style"){var G=A[ue];for(O in G)G.hasOwnProperty(O)&&(d||(d={}),d[O]="")}else ue!=="dangerouslySetInnerHTML"&&ue!=="children"&&ue!=="suppressContentEditableWarning"&&ue!=="suppressHydrationWarning"&&ue!=="autoFocus"&&(p.hasOwnProperty(ue)?T||(T=[]):(T=T||[]).push(ue,null));for(ue in g){var Y=g[ue];if(G=A!=null?A[ue]:void 0,g.hasOwnProperty(ue)&&Y!==G&&(Y!=null||G!=null))if(ue==="style")if(G){for(O in G)!G.hasOwnProperty(O)||Y&&Y.hasOwnProperty(O)||(d||(d={}),d[O]="");for(O in Y)Y.hasOwnProperty(O)&&G[O]!==Y[O]&&(d||(d={}),d[O]=Y[O])}else d||(T||(T=[]),T.push(ue,d)),d=Y;else ue==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,G=G?G.__html:void 0,Y!=null&&G!==Y&&(T=T||[]).push(ue,Y)):ue==="children"?typeof Y!="string"&&typeof Y!="number"||(T=T||[]).push(ue,""+Y):ue!=="suppressContentEditableWarning"&&ue!=="suppressHydrationWarning"&&(p.hasOwnProperty(ue)?(Y!=null&&ue==="onScroll"&&Zt("scroll",t),T||G===Y||(T=[])):(T=T||[]).push(ue,Y))}d&&(T=T||[]).push("style",d);var ue=T;(s.updateQueue=ue)&&(s.flags|=4)}},m0=function(t,s,d,g){d!==g&&(s.flags|=4)};function xa(t,s){if(!Jt)switch(t.tailMode){case"hidden":s=t.tail;for(var d=null;s!==null;)s.alternate!==null&&(d=s),s=s.sibling;d===null?t.tail=null:d.sibling=null;break;case"collapsed":d=t.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:g.sibling=null}}function ir(t){var s=t.alternate!==null&&t.alternate.child===t.child,d=0,g=0;if(s)for(var A=t.child;A!==null;)d|=A.lanes|A.childLanes,g|=A.subtreeFlags&14680064,g|=A.flags&14680064,A.return=t,A=A.sibling;else for(A=t.child;A!==null;)d|=A.lanes|A.childLanes,g|=A.subtreeFlags,g|=A.flags,A.return=t,A=A.sibling;return t.subtreeFlags|=g,t.childLanes=d,s}function Ex(t,s,d){var g=s.pendingProps;switch(eu(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ir(s),null;case 1:return yr(s.type)&&gl(),ir(s),null;case 3:return g=s.stateNode,Co(),qt(xr),qt(nr),hu(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(t===null||t.child===null)&&(vl(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Jr!==null&&(Wu(Jr),Jr=null))),Pu(t,s),ir(s),null;case 5:du(s);var A=js(fa.current);if(d=s.type,t!==null&&s.stateNode!=null)g0(t,s,d,g,A),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!g){if(s.stateNode===null)throw Error(a(166));return ir(s),null}if(t=js(fi.current),vl(s)){g=s.stateNode,d=s.type;var T=s.memoizedProps;switch(g[di]=s,g[aa]=T,t=(s.mode&1)!==0,d){case"dialog":Zt("cancel",g),Zt("close",g);break;case"iframe":case"object":case"embed":Zt("load",g);break;case"video":case"audio":for(A=0;A<ia.length;A++)Zt(ia[A],g);break;case"source":Zt("error",g);break;case"img":case"image":case"link":Zt("error",g),Zt("load",g);break;case"details":Zt("toggle",g);break;case"input":zt(g,T),Zt("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!T.multiple},Zt("invalid",g);break;case"textarea":Ct(g,T),Zt("invalid",g)}st(d,T),A=null;for(var O in T)if(T.hasOwnProperty(O)){var G=T[O];O==="children"?typeof G=="string"?g.textContent!==G&&(T.suppressHydrationWarning!==!0&&fl(g.textContent,G,t),A=["children",G]):typeof G=="number"&&g.textContent!==""+G&&(T.suppressHydrationWarning!==!0&&fl(g.textContent,G,t),A=["children",""+G]):p.hasOwnProperty(O)&&G!=null&&O==="onScroll"&&Zt("scroll",g)}switch(d){case"input":Xe(g),vt(g,T,!0);break;case"textarea":Xe(g),et(g);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(g.onclick=hl)}g=A,s.updateQueue=g,g!==null&&(s.flags|=4)}else{O=A.nodeType===9?A:A.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=gt(d)),t==="http://www.w3.org/1999/xhtml"?d==="script"?(t=O.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof g.is=="string"?t=O.createElement(d,{is:g.is}):(t=O.createElement(d),d==="select"&&(O=t,g.multiple?O.multiple=!0:g.size&&(O.size=g.size))):t=O.createElementNS(t,d),t[di]=s,t[aa]=g,p0(t,s,!1,!1),s.stateNode=t;e:{switch(O=_t(d,g),d){case"dialog":Zt("cancel",t),Zt("close",t),A=g;break;case"iframe":case"object":case"embed":Zt("load",t),A=g;break;case"video":case"audio":for(A=0;A<ia.length;A++)Zt(ia[A],t);A=g;break;case"source":Zt("error",t),A=g;break;case"img":case"image":case"link":Zt("error",t),Zt("load",t),A=g;break;case"details":Zt("toggle",t),A=g;break;case"input":zt(t,g),A=it(t,g),Zt("invalid",t);break;case"option":A=g;break;case"select":t._wrapperState={wasMultiple:!!g.multiple},A=fe({},g,{value:void 0}),Zt("invalid",t);break;case"textarea":Ct(t,g),A=zn(t,g),Zt("invalid",t);break;default:A=g}st(d,A),G=A;for(T in G)if(G.hasOwnProperty(T)){var Y=G[T];T==="style"?ge(t,Y):T==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,Y!=null&&At(t,Y)):T==="children"?typeof Y=="string"?(d!=="textarea"||Y!=="")&&nn(t,Y):typeof Y=="number"&&nn(t,""+Y):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(p.hasOwnProperty(T)?Y!=null&&T==="onScroll"&&Zt("scroll",t):Y!=null&&z(t,T,Y,O))}switch(d){case"input":Xe(t),vt(t,g,!1);break;case"textarea":Xe(t),et(t);break;case"option":g.value!=null&&t.setAttribute("value",""+Ne(g.value));break;case"select":t.multiple=!!g.multiple,T=g.value,T!=null?_e(t,!!g.multiple,T,!1):g.defaultValue!=null&&_e(t,!!g.multiple,g.defaultValue,!0);break;default:typeof A.onClick=="function"&&(t.onclick=hl)}switch(d){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return ir(s),null;case 6:if(t&&s.stateNode!=null)m0(t,s,t.memoizedProps,g);else{if(typeof g!="string"&&s.stateNode===null)throw Error(a(166));if(d=js(fa.current),js(fi.current),vl(s)){if(g=s.stateNode,d=s.memoizedProps,g[di]=s,(T=g.nodeValue!==d)&&(t=Rr,t!==null))switch(t.tag){case 3:fl(g.nodeValue,d,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fl(g.nodeValue,d,(t.mode&1)!==0)}T&&(s.flags|=4)}else g=(d.nodeType===9?d:d.ownerDocument).createTextNode(g),g[di]=s,s.stateNode=g}return ir(s),null;case 13:if(qt(on),g=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Jt&&kr!==null&&s.mode&1&&!(s.flags&128))wh(),xo(),s.flags|=98560,T=!1;else if(T=vl(s),g!==null&&g.dehydrated!==null){if(t===null){if(!T)throw Error(a(318));if(T=s.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(a(317));T[di]=s}else xo(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;ir(s),T=!1}else Jr!==null&&(Wu(Jr),Jr=null),T=!0;if(!T)return s.flags&65536?s:null}return s.flags&128?(s.lanes=d,s):(g=g!==null,g!==(t!==null&&t.memoizedState!==null)&&g&&(s.child.flags|=8192,s.mode&1&&(t===null||on.current&1?Pn===0&&(Pn=3):Xu())),s.updateQueue!==null&&(s.flags|=4),ir(s),null);case 4:return Co(),Pu(t,s),t===null&&sa(s.stateNode.containerInfo),ir(s),null;case 10:return ou(s.type._context),ir(s),null;case 17:return yr(s.type)&&gl(),ir(s),null;case 19:if(qt(on),T=s.memoizedState,T===null)return ir(s),null;if(g=(s.flags&128)!==0,O=T.rendering,O===null)if(g)xa(T,!1);else{if(Pn!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(O=Tl(t),O!==null){for(s.flags|=128,xa(T,!1),g=O.updateQueue,g!==null&&(s.updateQueue=g,s.flags|=4),s.subtreeFlags=0,g=d,d=s.child;d!==null;)T=d,t=g,T.flags&=14680066,O=T.alternate,O===null?(T.childLanes=0,T.lanes=t,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=O.childLanes,T.lanes=O.lanes,T.child=O.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=O.memoizedProps,T.memoizedState=O.memoizedState,T.updateQueue=O.updateQueue,T.type=O.type,t=O.dependencies,T.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),d=d.sibling;return $t(on,on.current&1|2),s.child}t=t.sibling}T.tail!==null&&Lt()>So&&(s.flags|=128,g=!0,xa(T,!1),s.lanes=4194304)}else{if(!g)if(t=Tl(O),t!==null){if(s.flags|=128,g=!0,d=t.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),xa(T,!0),T.tail===null&&T.tailMode==="hidden"&&!O.alternate&&!Jt)return ir(s),null}else 2*Lt()-T.renderingStartTime>So&&d!==1073741824&&(s.flags|=128,g=!0,xa(T,!1),s.lanes=4194304);T.isBackwards?(O.sibling=s.child,s.child=O):(d=T.last,d!==null?d.sibling=O:s.child=O,T.last=O)}return T.tail!==null?(s=T.tail,T.rendering=s,T.tail=s.sibling,T.renderingStartTime=Lt(),s.sibling=null,d=on.current,$t(on,g?d&1|2:d&1),s):(ir(s),null);case 22:case 23:return Gu(),g=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==g&&(s.flags|=8192),g&&s.mode&1?Pr&1073741824&&(ir(s),s.subtreeFlags&6&&(s.flags|=8192)):ir(s),null;case 24:return null;case 25:return null}throw Error(a(156,s.tag))}function Ax(t,s){switch(eu(s),s.tag){case 1:return yr(s.type)&&gl(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Co(),qt(xr),qt(nr),hu(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return du(s),null;case 13:if(qt(on),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(a(340));xo()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return qt(on),null;case 4:return Co(),null;case 10:return ou(s.type._context),null;case 22:case 23:return Gu(),null;case 24:return null;default:return null}}var Ml=!1,sr=!1,bx=typeof WeakSet=="function"?WeakSet:Set,Ge=null;function Ao(t,s){var d=t.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(g){pn(t,s,g)}else d.current=null}function Ou(t,s,d){try{d()}catch(g){pn(t,s,g)}}var x0=!1;function Sx(t,s){if(Gc=ci,t=bt(),ht(t)){if("selectionStart"in t)var d={start:t.selectionStart,end:t.selectionEnd};else e:{d=(d=t.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var A=g.anchorOffset,T=g.focusNode;g=g.focusOffset;try{d.nodeType,T.nodeType}catch{d=null;break e}var O=0,G=-1,Y=-1,ue=0,Ee=0,be=t,ve=null;t:for(;;){for(var We;be!==d||A!==0&&be.nodeType!==3||(G=O+A),be!==T||g!==0&&be.nodeType!==3||(Y=O+g),be.nodeType===3&&(O+=be.nodeValue.length),(We=be.firstChild)!==null;)ve=be,be=We;for(;;){if(be===t)break t;if(ve===d&&++ue===A&&(G=O),ve===T&&++Ee===g&&(Y=O),(We=be.nextSibling)!==null)break;be=ve,ve=be.parentNode}be=We}d=G===-1||Y===-1?null:{start:G,end:Y}}else d=null}d=d||{start:0,end:0}}else d=null;for(Xc={focusedElem:t,selectionRange:d},ci=!1,Ge=s;Ge!==null;)if(s=Ge,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Ge=t;else for(;Ge!==null;){s=Ge;try{var Ke=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Ke!==null){var $e=Ke.memoizedProps,Cn=Ke.memoizedState,ie=s.stateNode,Q=ie.getSnapshotBeforeUpdate(s.elementType===s.type?$e:ei(s.type,$e),Cn);ie.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:var se=s.stateNode.containerInfo;se.nodeType===1?se.textContent="":se.nodeType===9&&se.documentElement&&se.removeChild(se.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(Re){pn(s,s.return,Re)}if(t=s.sibling,t!==null){t.return=s.return,Ge=t;break}Ge=s.return}return Ke=x0,x0=!1,Ke}function ya(t,s,d){var g=s.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var A=g=g.next;do{if((A.tag&t)===t){var T=A.destroy;A.destroy=void 0,T!==void 0&&Ou(s,d,T)}A=A.next}while(A!==g)}}function Ll(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var d=s=s.next;do{if((d.tag&t)===t){var g=d.create;d.destroy=g()}d=d.next}while(d!==s)}}function Du(t){var s=t.ref;if(s!==null){var d=t.stateNode;switch(t.tag){case 5:t=d;break;default:t=d}typeof s=="function"?s(t):s.current=t}}function y0(t){var s=t.alternate;s!==null&&(t.alternate=null,y0(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[di],delete s[aa],delete s[Zc],delete s[ax],delete s[lx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function w0(t){return t.tag===5||t.tag===3||t.tag===4}function v0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||w0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Mu(t,s,d){var g=t.tag;if(g===5||g===6)t=t.stateNode,s?d.nodeType===8?d.parentNode.insertBefore(t,s):d.insertBefore(t,s):(d.nodeType===8?(s=d.parentNode,s.insertBefore(t,d)):(s=d,s.appendChild(t)),d=d._reactRootContainer,d!=null||s.onclick!==null||(s.onclick=hl));else if(g!==4&&(t=t.child,t!==null))for(Mu(t,s,d),t=t.sibling;t!==null;)Mu(t,s,d),t=t.sibling}function Lu(t,s,d){var g=t.tag;if(g===5||g===6)t=t.stateNode,s?d.insertBefore(t,s):d.appendChild(t);else if(g!==4&&(t=t.child,t!==null))for(Lu(t,s,d),t=t.sibling;t!==null;)Lu(t,s,d),t=t.sibling}var Yn=null,ti=!1;function cs(t,s,d){for(d=d.child;d!==null;)C0(t,s,d),d=d.sibling}function C0(t,s,d){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(St,d)}catch{}switch(d.tag){case 5:sr||Ao(d,s);case 6:var g=Yn,A=ti;Yn=null,cs(t,s,d),Yn=g,ti=A,Yn!==null&&(ti?(t=Yn,d=d.stateNode,t.nodeType===8?t.parentNode.removeChild(d):t.removeChild(d)):Yn.removeChild(d.stateNode));break;case 18:Yn!==null&&(ti?(t=Yn,d=d.stateNode,t.nodeType===8?$c(t.parentNode,d):t.nodeType===1&&$c(t,d),Zr(t)):$c(Yn,d.stateNode));break;case 4:g=Yn,A=ti,Yn=d.stateNode.containerInfo,ti=!0,cs(t,s,d),Yn=g,ti=A;break;case 0:case 11:case 14:case 15:if(!sr&&(g=d.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){A=g=g.next;do{var T=A,O=T.destroy;T=T.tag,O!==void 0&&(T&2||T&4)&&Ou(d,s,O),A=A.next}while(A!==g)}cs(t,s,d);break;case 1:if(!sr&&(Ao(d,s),g=d.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=d.memoizedProps,g.state=d.memoizedState,g.componentWillUnmount()}catch(G){pn(d,s,G)}cs(t,s,d);break;case 21:cs(t,s,d);break;case 22:d.mode&1?(sr=(g=sr)||d.memoizedState!==null,cs(t,s,d),sr=g):cs(t,s,d);break;default:cs(t,s,d)}}function E0(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var d=t.stateNode;d===null&&(d=t.stateNode=new bx),s.forEach(function(g){var A=Dx.bind(null,t,g);d.has(g)||(d.add(g),g.then(A,A))})}}function ni(t,s){var d=s.deletions;if(d!==null)for(var g=0;g<d.length;g++){var A=d[g];try{var T=t,O=s,G=O;e:for(;G!==null;){switch(G.tag){case 5:Yn=G.stateNode,ti=!1;break e;case 3:Yn=G.stateNode.containerInfo,ti=!0;break e;case 4:Yn=G.stateNode.containerInfo,ti=!0;break e}G=G.return}if(Yn===null)throw Error(a(160));C0(T,O,A),Yn=null,ti=!1;var Y=A.alternate;Y!==null&&(Y.return=null),A.return=null}catch(ue){pn(A,s,ue)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)A0(s,t),s=s.sibling}function A0(t,s){var d=t.alternate,g=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ni(s,t),pi(t),g&4){try{ya(3,t,t.return),Ll(3,t)}catch($e){pn(t,t.return,$e)}try{ya(5,t,t.return)}catch($e){pn(t,t.return,$e)}}break;case 1:ni(s,t),pi(t),g&512&&d!==null&&Ao(d,d.return);break;case 5:if(ni(s,t),pi(t),g&512&&d!==null&&Ao(d,d.return),t.flags&32){var A=t.stateNode;try{nn(A,"")}catch($e){pn(t,t.return,$e)}}if(g&4&&(A=t.stateNode,A!=null)){var T=t.memoizedProps,O=d!==null?d.memoizedProps:T,G=t.type,Y=t.updateQueue;if(t.updateQueue=null,Y!==null)try{G==="input"&&T.type==="radio"&&T.name!=null&&jt(A,T),_t(G,O);var ue=_t(G,T);for(O=0;O<Y.length;O+=2){var Ee=Y[O],be=Y[O+1];Ee==="style"?ge(A,be):Ee==="dangerouslySetInnerHTML"?At(A,be):Ee==="children"?nn(A,be):z(A,Ee,be,ue)}switch(G){case"input":Pt(A,T);break;case"textarea":Ye(A,T);break;case"select":var ve=A._wrapperState.wasMultiple;A._wrapperState.wasMultiple=!!T.multiple;var We=T.value;We!=null?_e(A,!!T.multiple,We,!1):ve!==!!T.multiple&&(T.defaultValue!=null?_e(A,!!T.multiple,T.defaultValue,!0):_e(A,!!T.multiple,T.multiple?[]:"",!1))}A[aa]=T}catch($e){pn(t,t.return,$e)}}break;case 6:if(ni(s,t),pi(t),g&4){if(t.stateNode===null)throw Error(a(162));A=t.stateNode,T=t.memoizedProps;try{A.nodeValue=T}catch($e){pn(t,t.return,$e)}}break;case 3:if(ni(s,t),pi(t),g&4&&d!==null&&d.memoizedState.isDehydrated)try{Zr(s.containerInfo)}catch($e){pn(t,t.return,$e)}break;case 4:ni(s,t),pi(t);break;case 13:ni(s,t),pi(t),A=t.child,A.flags&8192&&(T=A.memoizedState!==null,A.stateNode.isHidden=T,!T||A.alternate!==null&&A.alternate.memoizedState!==null||(ju=Lt())),g&4&&E0(t);break;case 22:if(Ee=d!==null&&d.memoizedState!==null,t.mode&1?(sr=(ue=sr)||Ee,ni(s,t),sr=ue):ni(s,t),pi(t),g&8192){if(ue=t.memoizedState!==null,(t.stateNode.isHidden=ue)&&!Ee&&t.mode&1)for(Ge=t,Ee=t.child;Ee!==null;){for(be=Ge=Ee;Ge!==null;){switch(ve=Ge,We=ve.child,ve.tag){case 0:case 11:case 14:case 15:ya(4,ve,ve.return);break;case 1:Ao(ve,ve.return);var Ke=ve.stateNode;if(typeof Ke.componentWillUnmount=="function"){g=ve,d=ve.return;try{s=g,Ke.props=s.memoizedProps,Ke.state=s.memoizedState,Ke.componentWillUnmount()}catch($e){pn(g,d,$e)}}break;case 5:Ao(ve,ve.return);break;case 22:if(ve.memoizedState!==null){T0(be);continue}}We!==null?(We.return=ve,Ge=We):T0(be)}Ee=Ee.sibling}e:for(Ee=null,be=t;;){if(be.tag===5){if(Ee===null){Ee=be;try{A=be.stateNode,ue?(T=A.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(G=be.stateNode,Y=be.memoizedProps.style,O=Y!=null&&Y.hasOwnProperty("display")?Y.display:null,G.style.display=je("display",O))}catch($e){pn(t,t.return,$e)}}}else if(be.tag===6){if(Ee===null)try{be.stateNode.nodeValue=ue?"":be.memoizedProps}catch($e){pn(t,t.return,$e)}}else if((be.tag!==22&&be.tag!==23||be.memoizedState===null||be===t)&&be.child!==null){be.child.return=be,be=be.child;continue}if(be===t)break e;for(;be.sibling===null;){if(be.return===null||be.return===t)break e;Ee===be&&(Ee=null),be=be.return}Ee===be&&(Ee=null),be.sibling.return=be.return,be=be.sibling}}break;case 19:ni(s,t),pi(t),g&4&&E0(t);break;case 21:break;default:ni(s,t),pi(t)}}function pi(t){var s=t.flags;if(s&2){try{e:{for(var d=t.return;d!==null;){if(w0(d)){var g=d;break e}d=d.return}throw Error(a(160))}switch(g.tag){case 5:var A=g.stateNode;g.flags&32&&(nn(A,""),g.flags&=-33);var T=v0(t);Lu(t,T,A);break;case 3:case 4:var O=g.stateNode.containerInfo,G=v0(t);Mu(t,G,O);break;default:throw Error(a(161))}}catch(Y){pn(t,t.return,Y)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Tx(t,s,d){Ge=t,b0(t)}function b0(t,s,d){for(var g=(t.mode&1)!==0;Ge!==null;){var A=Ge,T=A.child;if(A.tag===22&&g){var O=A.memoizedState!==null||Ml;if(!O){var G=A.alternate,Y=G!==null&&G.memoizedState!==null||sr;G=Ml;var ue=sr;if(Ml=O,(sr=Y)&&!ue)for(Ge=A;Ge!==null;)O=Ge,Y=O.child,O.tag===22&&O.memoizedState!==null?I0(A):Y!==null?(Y.return=O,Ge=Y):I0(A);for(;T!==null;)Ge=T,b0(T),T=T.sibling;Ge=A,Ml=G,sr=ue}S0(t)}else A.subtreeFlags&8772&&T!==null?(T.return=A,Ge=T):S0(t)}}function S0(t){for(;Ge!==null;){var s=Ge;if(s.flags&8772){var d=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:sr||Ll(5,s);break;case 1:var g=s.stateNode;if(s.flags&4&&!sr)if(d===null)g.componentDidMount();else{var A=s.elementType===s.type?d.memoizedProps:ei(s.type,d.memoizedProps);g.componentDidUpdate(A,d.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var T=s.updateQueue;T!==null&&Th(s,T,g);break;case 3:var O=s.updateQueue;if(O!==null){if(d=null,s.child!==null)switch(s.child.tag){case 5:d=s.child.stateNode;break;case 1:d=s.child.stateNode}Th(s,O,d)}break;case 5:var G=s.stateNode;if(d===null&&s.flags&4){d=G;var Y=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":Y.autoFocus&&d.focus();break;case"img":Y.src&&(d.src=Y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var ue=s.alternate;if(ue!==null){var Ee=ue.memoizedState;if(Ee!==null){var be=Ee.dehydrated;be!==null&&Zr(be)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}sr||s.flags&512&&Du(s)}catch(ve){pn(s,s.return,ve)}}if(s===t){Ge=null;break}if(d=s.sibling,d!==null){d.return=s.return,Ge=d;break}Ge=s.return}}function T0(t){for(;Ge!==null;){var s=Ge;if(s===t){Ge=null;break}var d=s.sibling;if(d!==null){d.return=s.return,Ge=d;break}Ge=s.return}}function I0(t){for(;Ge!==null;){var s=Ge;try{switch(s.tag){case 0:case 11:case 15:var d=s.return;try{Ll(4,s)}catch(Y){pn(s,d,Y)}break;case 1:var g=s.stateNode;if(typeof g.componentDidMount=="function"){var A=s.return;try{g.componentDidMount()}catch(Y){pn(s,A,Y)}}var T=s.return;try{Du(s)}catch(Y){pn(s,T,Y)}break;case 5:var O=s.return;try{Du(s)}catch(Y){pn(s,O,Y)}}}catch(Y){pn(s,s.return,Y)}if(s===t){Ge=null;break}var G=s.sibling;if(G!==null){G.return=s.return,Ge=G;break}Ge=s.return}}var Ix=Math.ceil,Bl=J.ReactCurrentDispatcher,Bu=J.ReactCurrentOwner,Wr=J.ReactCurrentBatchConfig,Mt=0,jn=null,bn=null,Kn=0,Pr=0,bo=is(0),Pn=0,wa=null,zs=0,Fl=0,Fu=0,va=null,vr=null,ju=0,So=1/0,Mi=null,jl=!1,Vu=null,us=null,Vl=!1,ds=null,zl=0,Ca=0,zu=null,Ul=-1,Wl=0;function fr(){return Mt&6?Lt():Ul!==-1?Ul:Ul=Lt()}function fs(t){return t.mode&1?Mt&2&&Kn!==0?Kn&-Kn:ux.transition!==null?(Wl===0&&(Wl=In()),Wl):(t=wt,t!==0||(t=window.event,t=t===void 0?16:Ko(t.type)),t):1}function ri(t,s,d,g){if(50<Ca)throw Ca=0,zu=null,Error(a(185));V(t,d,g),(!(Mt&2)||t!==jn)&&(t===jn&&(!(Mt&2)&&(Fl|=d),Pn===4&&hs(t,Kn)),Cr(t,g),d===1&&Mt===0&&!(s.mode&1)&&(So=Lt()+500,xl&&os()))}function Cr(t,s){var d=t.callbackNode;Yi(t,s);var g=Tr(t,t===jn?Kn:0);if(g===0)d!==null&&Et(d),t.callbackNode=null,t.callbackPriority=0;else if(s=g&-g,t.callbackPriority!==s){if(d!=null&&Et(d),s===1)t.tag===0?cx(_0.bind(null,t)):ph(_0.bind(null,t)),sx(function(){!(Mt&6)&&os()}),d=null;else{switch(Qa(g)){case 1:d=ye;break;case 4:d=mr;break;case 16:d=Ot;break;case 536870912:d=Xi;break;default:d=Ot}d=B0(d,N0.bind(null,t))}t.callbackPriority=s,t.callbackNode=d}}function N0(t,s){if(Ul=-1,Wl=0,Mt&6)throw Error(a(327));var d=t.callbackNode;if(To()&&t.callbackNode!==d)return null;var g=Tr(t,t===jn?Kn:0);if(g===0)return null;if(g&30||g&t.expiredLanes||s)s=Hl(t,g);else{s=g;var A=Mt;Mt|=2;var T=k0();(jn!==t||Kn!==s)&&(Mi=null,So=Lt()+500,Ws(t,s));do try{Rx();break}catch(G){R0(t,G)}while(!0);su(),Bl.current=T,Mt=A,bn!==null?s=0:(jn=null,Kn=0,s=Pn)}if(s!==0){if(s===2&&(A=Vt(t),A!==0&&(g=A,s=Uu(t,A))),s===1)throw d=wa,Ws(t,0),hs(t,g),Cr(t,Lt()),d;if(s===6)hs(t,g);else{if(A=t.current.alternate,!(g&30)&&!Nx(A)&&(s=Hl(t,g),s===2&&(T=Vt(t),T!==0&&(g=T,s=Uu(t,T))),s===1))throw d=wa,Ws(t,0),hs(t,g),Cr(t,Lt()),d;switch(t.finishedWork=A,t.finishedLanes=g,s){case 0:case 1:throw Error(a(345));case 2:Hs(t,vr,Mi);break;case 3:if(hs(t,g),(g&130023424)===g&&(s=ju+500-Lt(),10<s)){if(Tr(t,0)!==0)break;if(A=t.suspendedLanes,(A&g)!==g){fr(),t.pingedLanes|=t.suspendedLanes&A;break}t.timeoutHandle=Kc(Hs.bind(null,t,vr,Mi),s);break}Hs(t,vr,Mi);break;case 4:if(hs(t,g),(g&4194240)===g)break;for(s=t.eventTimes,A=-1;0<g;){var O=31-ur(g);T=1<<O,O=s[O],O>A&&(A=O),g&=~T}if(g=A,g=Lt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*Ix(g/1960))-g,10<g){t.timeoutHandle=Kc(Hs.bind(null,t,vr,Mi),g);break}Hs(t,vr,Mi);break;case 5:Hs(t,vr,Mi);break;default:throw Error(a(329))}}}return Cr(t,Lt()),t.callbackNode===d?N0.bind(null,t):null}function Uu(t,s){var d=va;return t.current.memoizedState.isDehydrated&&(Ws(t,s).flags|=256),t=Hl(t,s),t!==2&&(s=vr,vr=d,s!==null&&Wu(s)),t}function Wu(t){vr===null?vr=t:vr.push.apply(vr,t)}function Nx(t){for(var s=t;;){if(s.flags&16384){var d=s.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var g=0;g<d.length;g++){var A=d[g],T=A.getSnapshot;A=A.value;try{if(!te(T(),A))return!1}catch{return!1}}}if(d=s.child,s.subtreeFlags&16384&&d!==null)d.return=s,s=d;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function hs(t,s){for(s&=~Fu,s&=~Fl,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var d=31-ur(s),g=1<<d;t[d]=-1,s&=~g}}function _0(t){if(Mt&6)throw Error(a(327));To();var s=Tr(t,0);if(!(s&1))return Cr(t,Lt()),null;var d=Hl(t,s);if(t.tag!==0&&d===2){var g=Vt(t);g!==0&&(s=g,d=Uu(t,g))}if(d===1)throw d=wa,Ws(t,0),hs(t,s),Cr(t,Lt()),d;if(d===6)throw Error(a(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,Hs(t,vr,Mi),Cr(t,Lt()),null}function Hu(t,s){var d=Mt;Mt|=1;try{return t(s)}finally{Mt=d,Mt===0&&(So=Lt()+500,xl&&os())}}function Us(t){ds!==null&&ds.tag===0&&!(Mt&6)&&To();var s=Mt;Mt|=1;var d=Wr.transition,g=wt;try{if(Wr.transition=null,wt=1,t)return t()}finally{wt=g,Wr.transition=d,Mt=s,!(Mt&6)&&os()}}function Gu(){Pr=bo.current,qt(bo)}function Ws(t,s){t.finishedWork=null,t.finishedLanes=0;var d=t.timeoutHandle;if(d!==-1&&(t.timeoutHandle=-1,ix(d)),bn!==null)for(d=bn.return;d!==null;){var g=d;switch(eu(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&gl();break;case 3:Co(),qt(xr),qt(nr),hu();break;case 5:du(g);break;case 4:Co();break;case 13:qt(on);break;case 19:qt(on);break;case 10:ou(g.type._context);break;case 22:case 23:Gu()}d=d.return}if(jn=t,bn=t=ps(t.current,null),Kn=Pr=s,Pn=0,wa=null,Fu=Fl=zs=0,vr=va=null,Fs!==null){for(s=0;s<Fs.length;s++)if(d=Fs[s],g=d.interleaved,g!==null){d.interleaved=null;var A=g.next,T=d.pending;if(T!==null){var O=T.next;T.next=A,g.next=O}d.pending=g}Fs=null}return t}function R0(t,s){do{var d=bn;try{if(su(),Il.current=kl,Nl){for(var g=an.memoizedState;g!==null;){var A=g.queue;A!==null&&(A.pending=null),g=g.next}Nl=!1}if(Vs=0,Fn=kn=an=null,ha=!1,pa=0,Bu.current=null,d===null||d.return===null){Pn=1,wa=s,bn=null;break}e:{var T=t,O=d.return,G=d,Y=s;if(s=Kn,G.flags|=32768,Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var ue=Y,Ee=G,be=Ee.tag;if(!(Ee.mode&1)&&(be===0||be===11||be===15)){var ve=Ee.alternate;ve?(Ee.updateQueue=ve.updateQueue,Ee.memoizedState=ve.memoizedState,Ee.lanes=ve.lanes):(Ee.updateQueue=null,Ee.memoizedState=null)}var We=t0(O);if(We!==null){We.flags&=-257,n0(We,O,G,T,s),We.mode&1&&e0(T,ue,s),s=We,Y=ue;var Ke=s.updateQueue;if(Ke===null){var $e=new Set;$e.add(Y),s.updateQueue=$e}else Ke.add(Y);break e}else{if(!(s&1)){e0(T,ue,s),Xu();break e}Y=Error(a(426))}}else if(Jt&&G.mode&1){var Cn=t0(O);if(Cn!==null){!(Cn.flags&65536)&&(Cn.flags|=256),n0(Cn,O,G,T,s),ru(Eo(Y,G));break e}}T=Y=Eo(Y,G),Pn!==4&&(Pn=2),va===null?va=[T]:va.push(T),T=O;do{switch(T.tag){case 3:T.flags|=65536,s&=-s,T.lanes|=s;var ie=Qh(T,Y,s);Sh(T,ie);break e;case 1:G=Y;var Q=T.type,se=T.stateNode;if(!(T.flags&128)&&(typeof Q.getDerivedStateFromError=="function"||se!==null&&typeof se.componentDidCatch=="function"&&(us===null||!us.has(se)))){T.flags|=65536,s&=-s,T.lanes|=s;var Re=Jh(T,G,s);Sh(T,Re);break e}}T=T.return}while(T!==null)}O0(d)}catch(Ze){s=Ze,bn===d&&d!==null&&(bn=d=d.return);continue}break}while(!0)}function k0(){var t=Bl.current;return Bl.current=kl,t===null?kl:t}function Xu(){(Pn===0||Pn===3||Pn===2)&&(Pn=4),jn===null||!(zs&268435455)&&!(Fl&268435455)||hs(jn,Kn)}function Hl(t,s){var d=Mt;Mt|=2;var g=k0();(jn!==t||Kn!==s)&&(Mi=null,Ws(t,s));do try{_x();break}catch(A){R0(t,A)}while(!0);if(su(),Mt=d,Bl.current=g,bn!==null)throw Error(a(261));return jn=null,Kn=0,Pn}function _x(){for(;bn!==null;)P0(bn)}function Rx(){for(;bn!==null&&!Be();)P0(bn)}function P0(t){var s=L0(t.alternate,t,Pr);t.memoizedProps=t.pendingProps,s===null?O0(t):bn=s,Bu.current=null}function O0(t){var s=t;do{var d=s.alternate;if(t=s.return,s.flags&32768){if(d=Ax(d,s),d!==null){d.flags&=32767,bn=d;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Pn=6,bn=null;return}}else if(d=Ex(d,s,Pr),d!==null){bn=d;return}if(s=s.sibling,s!==null){bn=s;return}bn=s=t}while(s!==null);Pn===0&&(Pn=5)}function Hs(t,s,d){var g=wt,A=Wr.transition;try{Wr.transition=null,wt=1,kx(t,s,d,g)}finally{Wr.transition=A,wt=g}return null}function kx(t,s,d,g){do To();while(ds!==null);if(Mt&6)throw Error(a(327));d=t.finishedWork;var A=t.finishedLanes;if(d===null)return null;if(t.finishedWork=null,t.finishedLanes=0,d===t.current)throw Error(a(177));t.callbackNode=null,t.callbackPriority=0;var T=d.lanes|d.childLanes;if(qe(t,T),t===jn&&(bn=jn=null,Kn=0),!(d.subtreeFlags&2064)&&!(d.flags&2064)||Vl||(Vl=!0,B0(Ot,function(){return To(),null})),T=(d.flags&15990)!==0,d.subtreeFlags&15990||T){T=Wr.transition,Wr.transition=null;var O=wt;wt=1;var G=Mt;Mt|=4,Bu.current=null,Sx(t,d),A0(d,t),tr(Xc),ci=!!Gc,Xc=Gc=null,t.current=d,Tx(d),Wn(),Mt=G,wt=O,Wr.transition=T}else t.current=d;if(Vl&&(Vl=!1,ds=t,zl=A),T=t.pendingLanes,T===0&&(us=null),It(d.stateNode),Cr(t,Lt()),s!==null)for(g=t.onRecoverableError,d=0;d<s.length;d++)A=s[d],g(A.value,{componentStack:A.stack,digest:A.digest});if(jl)throw jl=!1,t=Vu,Vu=null,t;return zl&1&&t.tag!==0&&To(),T=t.pendingLanes,T&1?t===zu?Ca++:(Ca=0,zu=t):Ca=0,os(),null}function To(){if(ds!==null){var t=Qa(zl),s=Wr.transition,d=wt;try{if(Wr.transition=null,wt=16>t?16:t,ds===null)var g=!1;else{if(t=ds,ds=null,zl=0,Mt&6)throw Error(a(331));var A=Mt;for(Mt|=4,Ge=t.current;Ge!==null;){var T=Ge,O=T.child;if(Ge.flags&16){var G=T.deletions;if(G!==null){for(var Y=0;Y<G.length;Y++){var ue=G[Y];for(Ge=ue;Ge!==null;){var Ee=Ge;switch(Ee.tag){case 0:case 11:case 15:ya(8,Ee,T)}var be=Ee.child;if(be!==null)be.return=Ee,Ge=be;else for(;Ge!==null;){Ee=Ge;var ve=Ee.sibling,We=Ee.return;if(y0(Ee),Ee===ue){Ge=null;break}if(ve!==null){ve.return=We,Ge=ve;break}Ge=We}}}var Ke=T.alternate;if(Ke!==null){var $e=Ke.child;if($e!==null){Ke.child=null;do{var Cn=$e.sibling;$e.sibling=null,$e=Cn}while($e!==null)}}Ge=T}}if(T.subtreeFlags&2064&&O!==null)O.return=T,Ge=O;else e:for(;Ge!==null;){if(T=Ge,T.flags&2048)switch(T.tag){case 0:case 11:case 15:ya(9,T,T.return)}var ie=T.sibling;if(ie!==null){ie.return=T.return,Ge=ie;break e}Ge=T.return}}var Q=t.current;for(Ge=Q;Ge!==null;){O=Ge;var se=O.child;if(O.subtreeFlags&2064&&se!==null)se.return=O,Ge=se;else e:for(O=Q;Ge!==null;){if(G=Ge,G.flags&2048)try{switch(G.tag){case 0:case 11:case 15:Ll(9,G)}}catch(Ze){pn(G,G.return,Ze)}if(G===O){Ge=null;break e}var Re=G.sibling;if(Re!==null){Re.return=G.return,Ge=Re;break e}Ge=G.return}}if(Mt=A,os(),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(St,t)}catch{}g=!0}return g}finally{wt=d,Wr.transition=s}}return!1}function D0(t,s,d){s=Eo(d,s),s=Qh(t,s,1),t=ls(t,s,1),s=fr(),t!==null&&(V(t,1,s),Cr(t,s))}function pn(t,s,d){if(t.tag===3)D0(t,t,d);else for(;s!==null;){if(s.tag===3){D0(s,t,d);break}else if(s.tag===1){var g=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(us===null||!us.has(g))){t=Eo(d,t),t=Jh(s,t,1),s=ls(s,t,1),t=fr(),s!==null&&(V(s,1,t),Cr(s,t));break}}s=s.return}}function Px(t,s,d){var g=t.pingCache;g!==null&&g.delete(s),s=fr(),t.pingedLanes|=t.suspendedLanes&d,jn===t&&(Kn&d)===d&&(Pn===4||Pn===3&&(Kn&130023424)===Kn&&500>Lt()-ju?Ws(t,0):Fu|=d),Cr(t,s)}function M0(t,s){s===0&&(t.mode&1?(s=to,to<<=1,!(to&130023424)&&(to=4194304)):s=1);var d=fr();t=Pi(t,s),t!==null&&(V(t,s,d),Cr(t,d))}function Ox(t){var s=t.memoizedState,d=0;s!==null&&(d=s.retryLane),M0(t,d)}function Dx(t,s){var d=0;switch(t.tag){case 13:var g=t.stateNode,A=t.memoizedState;A!==null&&(d=A.retryLane);break;case 19:g=t.stateNode;break;default:throw Error(a(314))}g!==null&&g.delete(s),M0(t,d)}var L0;L0=function(t,s,d){if(t!==null)if(t.memoizedProps!==s.pendingProps||xr.current)wr=!0;else{if(!(t.lanes&d)&&!(s.flags&128))return wr=!1,Cx(t,s,d);wr=!!(t.flags&131072)}else wr=!1,Jt&&s.flags&1048576&&gh(s,wl,s.index);switch(s.lanes=0,s.tag){case 2:var g=s.type;Dl(t,s),t=s.pendingProps;var A=po(s,nr.current);vo(s,d),A=mu(null,s,g,t,A,d);var T=xu();return s.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,yr(g)?(T=!0,ml(s)):T=!1,s.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,cu(s),A.updater=Pl,s.stateNode=A,A._reactInternals=s,Au(s,g,t,d),s=Iu(null,s,g,!0,T,d)):(s.tag=0,Jt&&T&&Jc(s),dr(null,s,A,d),s=s.child),s;case 16:g=s.elementType;e:{switch(Dl(t,s),t=s.pendingProps,A=g._init,g=A(g._payload),s.type=g,A=s.tag=Lx(g),t=ei(g,t),A){case 0:s=Tu(null,s,g,t,d);break e;case 1:s=l0(null,s,g,t,d);break e;case 11:s=r0(null,s,g,t,d);break e;case 14:s=i0(null,s,g,ei(g.type,t),d);break e}throw Error(a(306,g,""))}return s;case 0:return g=s.type,A=s.pendingProps,A=s.elementType===g?A:ei(g,A),Tu(t,s,g,A,d);case 1:return g=s.type,A=s.pendingProps,A=s.elementType===g?A:ei(g,A),l0(t,s,g,A,d);case 3:e:{if(c0(s),t===null)throw Error(a(387));g=s.pendingProps,T=s.memoizedState,A=T.element,bh(t,s),Sl(s,g,null,d);var O=s.memoizedState;if(g=O.element,T.isDehydrated)if(T={element:g,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},s.updateQueue.baseState=T,s.memoizedState=T,s.flags&256){A=Eo(Error(a(423)),s),s=u0(t,s,g,d,A);break e}else if(g!==A){A=Eo(Error(a(424)),s),s=u0(t,s,g,d,A);break e}else for(kr=rs(s.stateNode.containerInfo.firstChild),Rr=s,Jt=!0,Jr=null,d=Eh(s,null,g,d),s.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(xo(),g===A){s=Di(t,s,d);break e}dr(t,s,g,d)}s=s.child}return s;case 5:return Ih(s),t===null&&nu(s),g=s.type,A=s.pendingProps,T=t!==null?t.memoizedProps:null,O=A.children,Yc(g,A)?O=null:T!==null&&Yc(g,T)&&(s.flags|=32),a0(t,s),dr(t,s,O,d),s.child;case 6:return t===null&&nu(s),null;case 13:return d0(t,s,d);case 4:return uu(s,s.stateNode.containerInfo),g=s.pendingProps,t===null?s.child=yo(s,null,g,d):dr(t,s,g,d),s.child;case 11:return g=s.type,A=s.pendingProps,A=s.elementType===g?A:ei(g,A),r0(t,s,g,A,d);case 7:return dr(t,s,s.pendingProps,d),s.child;case 8:return dr(t,s,s.pendingProps.children,d),s.child;case 12:return dr(t,s,s.pendingProps.children,d),s.child;case 10:e:{if(g=s.type._context,A=s.pendingProps,T=s.memoizedProps,O=A.value,$t(El,g._currentValue),g._currentValue=O,T!==null)if(te(T.value,O)){if(T.children===A.children&&!xr.current){s=Di(t,s,d);break e}}else for(T=s.child,T!==null&&(T.return=s);T!==null;){var G=T.dependencies;if(G!==null){O=T.child;for(var Y=G.firstContext;Y!==null;){if(Y.context===g){if(T.tag===1){Y=Oi(-1,d&-d),Y.tag=2;var ue=T.updateQueue;if(ue!==null){ue=ue.shared;var Ee=ue.pending;Ee===null?Y.next=Y:(Y.next=Ee.next,Ee.next=Y),ue.pending=Y}}T.lanes|=d,Y=T.alternate,Y!==null&&(Y.lanes|=d),au(T.return,d,s),G.lanes|=d;break}Y=Y.next}}else if(T.tag===10)O=T.type===s.type?null:T.child;else if(T.tag===18){if(O=T.return,O===null)throw Error(a(341));O.lanes|=d,G=O.alternate,G!==null&&(G.lanes|=d),au(O,d,s),O=T.sibling}else O=T.child;if(O!==null)O.return=T;else for(O=T;O!==null;){if(O===s){O=null;break}if(T=O.sibling,T!==null){T.return=O.return,O=T;break}O=O.return}T=O}dr(t,s,A.children,d),s=s.child}return s;case 9:return A=s.type,g=s.pendingProps.children,vo(s,d),A=zr(A),g=g(A),s.flags|=1,dr(t,s,g,d),s.child;case 14:return g=s.type,A=ei(g,s.pendingProps),A=ei(g.type,A),i0(t,s,g,A,d);case 15:return s0(t,s,s.type,s.pendingProps,d);case 17:return g=s.type,A=s.pendingProps,A=s.elementType===g?A:ei(g,A),Dl(t,s),s.tag=1,yr(g)?(t=!0,ml(s)):t=!1,vo(s,d),Zh(s,g,A),Au(s,g,A,d),Iu(null,s,g,!0,t,d);case 19:return h0(t,s,d);case 22:return o0(t,s,d)}throw Error(a(156,s.tag))};function B0(t,s){return Je(t,s)}function Mx(t,s,d,g){this.tag=t,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hr(t,s,d,g){return new Mx(t,s,d,g)}function Yu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Lx(t){if(typeof t=="function")return Yu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ie)return 11;if(t===ee)return 14}return 2}function ps(t,s){var d=t.alternate;return d===null?(d=Hr(t.tag,s,t.key,t.mode),d.elementType=t.elementType,d.type=t.type,d.stateNode=t.stateNode,d.alternate=t,t.alternate=d):(d.pendingProps=s,d.type=t.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=t.flags&14680064,d.childLanes=t.childLanes,d.lanes=t.lanes,d.child=t.child,d.memoizedProps=t.memoizedProps,d.memoizedState=t.memoizedState,d.updateQueue=t.updateQueue,s=t.dependencies,d.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},d.sibling=t.sibling,d.index=t.index,d.ref=t.ref,d}function Gl(t,s,d,g,A,T){var O=2;if(g=t,typeof t=="function")Yu(t)&&(O=1);else if(typeof t=="string")O=5;else e:switch(t){case q:return Gs(d.children,A,T,s);case ce:O=8,A|=8;break;case Z:return t=Hr(12,d,s,A|2),t.elementType=Z,t.lanes=T,t;case Pe:return t=Hr(13,d,s,A),t.elementType=Pe,t.lanes=T,t;case Fe:return t=Hr(19,d,s,A),t.elementType=Fe,t.lanes=T,t;case xe:return Xl(d,A,T,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ae:O=10;break e;case ke:O=9;break e;case Ie:O=11;break e;case ee:O=14;break e;case He:O=16,g=null;break e}throw Error(a(130,t==null?t:typeof t,""))}return s=Hr(O,d,s,A),s.elementType=t,s.type=g,s.lanes=T,s}function Gs(t,s,d,g){return t=Hr(7,t,g,s),t.lanes=d,t}function Xl(t,s,d,g){return t=Hr(22,t,g,s),t.elementType=xe,t.lanes=d,t.stateNode={isHidden:!1},t}function Ku(t,s,d){return t=Hr(6,t,null,s),t.lanes=d,t}function $u(t,s,d){return s=Hr(4,t.children!==null?t.children:[],t.key,s),s.lanes=d,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function Bx(t,s,d,g,A){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=re(0),this.expirationTimes=re(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=re(0),this.identifierPrefix=g,this.onRecoverableError=A,this.mutableSourceEagerHydrationData=null}function Zu(t,s,d,g,A,T,O,G,Y){return t=new Bx(t,s,d,G,Y),s===1?(s=1,T===!0&&(s|=8)):s=0,T=Hr(3,null,null,s),t.current=T,T.stateNode=t,T.memoizedState={element:g,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},cu(T),t}function Fx(t,s,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:de,key:g==null?null:""+g,children:t,containerInfo:s,implementation:d}}function F0(t){if(!t)return ss;t=t._reactInternals;e:{if(Qn(t)!==t||t.tag!==1)throw Error(a(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(yr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(a(171))}if(t.tag===1){var d=t.type;if(yr(d))return fh(t,d,s)}return s}function j0(t,s,d,g,A,T,O,G,Y){return t=Zu(d,g,!0,t,A,T,O,G,Y),t.context=F0(null),d=t.current,g=fr(),A=fs(d),T=Oi(g,A),T.callback=s??null,ls(d,T,A),t.current.lanes=A,V(t,A,g),Cr(t,g),t}function Yl(t,s,d,g){var A=s.current,T=fr(),O=fs(A);return d=F0(d),s.context===null?s.context=d:s.pendingContext=d,s=Oi(T,O),s.payload={element:t},g=g===void 0?null:g,g!==null&&(s.callback=g),t=ls(A,s,O),t!==null&&(ri(t,A,O,T),bl(t,A,O)),O}function Kl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function V0(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var d=t.retryLane;t.retryLane=d!==0&&d<s?d:s}}function qu(t,s){V0(t,s),(t=t.alternate)&&V0(t,s)}function jx(){return null}var z0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Qu(t){this._internalRoot=t}$l.prototype.render=Qu.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(a(409));Yl(t,s,null,null)},$l.prototype.unmount=Qu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Us(function(){Yl(null,t,null,null)}),s[Ni]=null}};function $l(t){this._internalRoot=t}$l.prototype.unstable_scheduleHydration=function(t){if(t){var s=Yt();t={blockedOn:null,target:t,priority:s};for(var d=0;d<Hn.length&&s!==0&&s<Hn[d].priority;d++);Hn.splice(d,0,t),d===0&&el(t)}};function Ju(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function U0(){}function Vx(t,s,d,g,A){if(A){if(typeof g=="function"){var T=g;g=function(){var ue=Kl(O);T.call(ue)}}var O=j0(s,g,t,0,null,!1,!1,"",U0);return t._reactRootContainer=O,t[Ni]=O.current,sa(t.nodeType===8?t.parentNode:t),Us(),O}for(;A=t.lastChild;)t.removeChild(A);if(typeof g=="function"){var G=g;g=function(){var ue=Kl(Y);G.call(ue)}}var Y=Zu(t,0,!1,null,null,!1,!1,"",U0);return t._reactRootContainer=Y,t[Ni]=Y.current,sa(t.nodeType===8?t.parentNode:t),Us(function(){Yl(s,Y,d,g)}),Y}function ql(t,s,d,g,A){var T=d._reactRootContainer;if(T){var O=T;if(typeof A=="function"){var G=A;A=function(){var Y=Kl(O);G.call(Y)}}Yl(s,O,t,A)}else O=Vx(d,s,t,A,g);return Kl(O)}no=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var d=Xt(s.pendingLanes);d!==0&&(fn(s,d|1),Cr(s,Lt()),!(Mt&6)&&(So=Lt()+500,os()))}break;case 13:Us(function(){var g=Pi(t,1);if(g!==null){var A=fr();ri(g,t,1,A)}}),qu(t,1)}},er=function(t){if(t.tag===13){var s=Pi(t,134217728);if(s!==null){var d=fr();ri(s,t,134217728,d)}qu(t,134217728)}},Qe=function(t){if(t.tag===13){var s=fs(t),d=Pi(t,s);if(d!==null){var g=fr();ri(d,t,s,g)}qu(t,s)}},Yt=function(){return wt},Go=function(t,s){var d=wt;try{return wt=t,s()}finally{wt=d}},Un=function(t,s,d){switch(s){case"input":if(Pt(t,d),s=d.name,d.type==="radio"&&s!=null){for(d=t;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<d.length;s++){var g=d[s];if(g!==t&&g.form===t.form){var A=pl(g);if(!A)throw Error(a(90));ut(g),Pt(g,A)}}}break;case"textarea":Ye(t,d);break;case"select":s=d.value,s!=null&&_e(t,!!d.multiple,s,!1)}},Wi=Hu,rn=Us;var zx={usingClientEntryPoint:!1,Events:[la,fo,pl,Ui,qn,Hu]},Ea={findFiberByHostInstance:Ds,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ux={bundleType:Ea.bundleType,version:Ea.version,rendererPackageName:Ea.rendererPackageName,rendererConfig:Ea.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:J.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ue(t),t===null?null:t.stateNode},findFiberByHostInstance:Ea.findFiberByHostInstance||jx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ql.isDisabled&&Ql.supportsFiber)try{St=Ql.inject(Ux),yt=Ql}catch{}}return Er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zx,Er.createPortal=function(t,s){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ju(s))throw Error(a(200));return Fx(t,s,null,d)},Er.createRoot=function(t,s){if(!Ju(t))throw Error(a(299));var d=!1,g="",A=z0;return s!=null&&(s.unstable_strictMode===!0&&(d=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onRecoverableError!==void 0&&(A=s.onRecoverableError)),s=Zu(t,1,!1,null,null,d,!1,g,A),t[Ni]=s.current,sa(t.nodeType===8?t.parentNode:t),new Qu(s)},Er.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=Ue(s),t=t===null?null:t.stateNode,t},Er.flushSync=function(t){return Us(t)},Er.hydrate=function(t,s,d){if(!Zl(s))throw Error(a(200));return ql(null,t,s,!0,d)},Er.hydrateRoot=function(t,s,d){if(!Ju(t))throw Error(a(405));var g=d!=null&&d.hydratedSources||null,A=!1,T="",O=z0;if(d!=null&&(d.unstable_strictMode===!0&&(A=!0),d.identifierPrefix!==void 0&&(T=d.identifierPrefix),d.onRecoverableError!==void 0&&(O=d.onRecoverableError)),s=j0(s,null,t,1,d??null,A,!1,T,O),t[Ni]=s.current,sa(t),g)for(t=0;t<g.length;t++)d=g[t],A=d._getVersion,A=A(d._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[d,A]:s.mutableSourceEagerHydrationData.push(d,A);return new $l(s)},Er.render=function(t,s,d){if(!Zl(s))throw Error(a(200));return ql(null,t,s,!1,d)},Er.unmountComponentAtNode=function(t){if(!Zl(t))throw Error(a(40));return t._reactRootContainer?(Us(function(){ql(null,null,t,!1,function(){t._reactRootContainer=null,t[Ni]=null})}),!0):!1},Er.unstable_batchedUpdates=Hu,Er.unstable_renderSubtreeIntoContainer=function(t,s,d,g){if(!Zl(d))throw Error(a(200));if(t==null||t._reactInternals===void 0)throw Error(a(38));return ql(t,s,d,!1,g)},Er.version="18.3.1-next-f1338f8080-20240426",Er}var Z0;function Zx(){if(Z0)return nd.exports;Z0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(o){console.error(o)}}return r(),nd.exports=$x(),nd.exports}var q0;function qx(){if(q0)return ec;q0=1;var r=Zx();return ec.createRoot=r.createRoot,ec.hydrateRoot=r.hydrateRoot,ec}var Qx=qx();const gr=R.createContext(null),Jx=({children:r})=>{const[o,a]=R.useState(null),[f,p]=R.useState(null),[x,y]=R.useState(null),[b,w]=R.useState(null),[E,S]=R.useState(!1),[I,_]=R.useState(null),D=async()=>{const j=localStorage.getItem("access_token");if(j)try{const W=await fetch(window.server_url+"/load_user",{headers:{Authorization:`Bearer ${j}`}});if(W.ok){S(!0);const z=await W.json();console.log("USER DATA:",z),a(z.username),p(z.profile),_(z.permissions),console.log("PERMISSIONS:",z.permissions)}else console.log("TOKEN INVALID"),localStorage.removeItem("access_token"),a(null),p(null),y(null),w(null),S(!1)}catch(W){console.log("ERROR:",W)}};R.useEffect(()=>{D()},[]);const L=j=>{a(j.username),y(j.access_token),w(j.refresh_token),_(j.permissions),console.log("PRE SAVE USERNAME:",j.username),localStorage.setItem("user",j.username),localStorage.setItem("access_token",j.access_token),localStorage.setItem("refresh_token",j.refresh_token)},B=async(j,W)=>{const z=await fetch(window.server_url+"/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:j,password:W})});if(z.ok){const J=await z.json();console.log("SIGNED UP, userData:",J)}},F=()=>{a(null),p(null),y(null),w(null),S(!1)};return v.jsx(gr.Provider,{value:{user:o,login:L,signup:B,logout:F,userProfile:f,checkAuth:D,permissions:I},children:r})};var Id=function(r,o){return Id=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,f){a.__proto__=f}||function(a,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(a[p]=f[p])},Id(r,o)};function e2(r,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");Id(r,o);function a(){this.constructor=r}r.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}var $n=function(){return $n=Object.assign||function(o){for(var a,f=1,p=arguments.length;f<p;f++){a=arguments[f];for(var x in a)Object.prototype.hasOwnProperty.call(a,x)&&(o[x]=a[x])}return o},$n.apply(this,arguments)};var sd,Q0;function t2(){if(Q0)return sd;Q0=1;var r=!1,o,a,f,p,x,y,b,w,E,S,I,_,D,L,B;function F(){if(!r){r=!0;var W=navigator.userAgent,z=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(W),J=/(Mac OS X)|(Windows)|(Linux)/.exec(W);if(_=/\b(iPhone|iP[ao]d)/.exec(W),D=/\b(iP[ao]d)/.exec(W),S=/Android/i.exec(W),L=/FBAN\/\w+;/i.exec(W),B=/Mobile/i.exec(W),I=!!/Win64/.exec(W),z){o=z[1]?parseFloat(z[1]):z[5]?parseFloat(z[5]):NaN,o&&document&&document.documentMode&&(o=document.documentMode);var ne=/(?:Trident\/(\d+.\d+))/.exec(W);y=ne?parseFloat(ne[1])+4:o,a=z[2]?parseFloat(z[2]):NaN,f=z[3]?parseFloat(z[3]):NaN,p=z[4]?parseFloat(z[4]):NaN,p?(z=/(?:Chrome\/(\d+\.\d+))/.exec(W),x=z&&z[1]?parseFloat(z[1]):NaN):x=NaN}else o=a=f=x=p=NaN;if(J){if(J[1]){var de=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(W);b=de?parseFloat(de[1].replace("_",".")):!0}else b=!1;w=!!J[2],E=!!J[3]}else b=w=E=!1}}var j={ie:function(){return F()||o},ieCompatibilityMode:function(){return F()||y>o},ie64:function(){return j.ie()&&I},firefox:function(){return F()||a},opera:function(){return F()||f},webkit:function(){return F()||p},safari:function(){return j.webkit()},chrome:function(){return F()||x},windows:function(){return F()||w},osx:function(){return F()||b},linux:function(){return F()||E},iphone:function(){return F()||_},mobile:function(){return F()||_||D||S||B},nativeApp:function(){return F()||L},android:function(){return F()||S},ipad:function(){return F()||D}};return sd=j,sd}var od,J0;function n2(){if(J0)return od;J0=1;var r=!!(typeof window<"u"&&window.document&&window.document.createElement),o={canUseDOM:r,canUseWorkers:typeof Worker<"u",canUseEventListeners:r&&!!(window.addEventListener||window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};return od=o,od}var ad,e1;function r2(){if(e1)return ad;e1=1;var r=n2(),o;r.canUseDOM&&(o=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function a(f,p){if(!r.canUseDOM||p&&!("addEventListener"in document))return!1;var x="on"+f,y=x in document;if(!y){var b=document.createElement("div");b.setAttribute(x,"return;"),y=typeof b[x]=="function"}return!y&&o&&f==="wheel"&&(y=document.implementation.hasFeature("Events.wheel","3.0")),y}return ad=a,ad}var ld,t1;function i2(){if(t1)return ld;t1=1;var r=t2(),o=r2(),a=10,f=40,p=800;function x(y){var b=0,w=0,E=0,S=0;return"detail"in y&&(w=y.detail),"wheelDelta"in y&&(w=-y.wheelDelta/120),"wheelDeltaY"in y&&(w=-y.wheelDeltaY/120),"wheelDeltaX"in y&&(b=-y.wheelDeltaX/120),"axis"in y&&y.axis===y.HORIZONTAL_AXIS&&(b=w,w=0),E=b*a,S=w*a,"deltaY"in y&&(S=y.deltaY),"deltaX"in y&&(E=y.deltaX),(E||S)&&y.deltaMode&&(y.deltaMode==1?(E*=f,S*=f):(E*=p,S*=p)),E&&!b&&(b=E<1?-1:1),S&&!w&&(w=S<1?-1:1),{spinX:b,spinY:w,pixelX:E,pixelY:S}}return x.getEventType=function(){return r.firefox()?"DOMMouseScroll":o("wheel")?"wheel":"mousewheel"},ld=x,ld}var cd,n1;function s2(){return n1||(n1=1,cd=i2()),cd}var o2=s2();const a2=Fp(o2);function l2(r,o,a,f,p,x){x===void 0&&(x=0);var y=Mo(r,o,x),b=y.width,w=y.height,E=Math.min(b,a),S=Math.min(w,f);return E>S*p?{width:S*p,height:S}:{width:E,height:E/p}}function c2(r){return r.width>r.height?r.width/r.naturalWidth:r.height/r.naturalHeight}function ba(r,o,a,f,p){p===void 0&&(p=0);var x=Mo(o.width,o.height,p),y=x.width,b=x.height;return{x:r1(r.x,y,a.width,f),y:r1(r.y,b,a.height,f)}}function r1(r,o,a,f){var p=o*f/2-a/2;return Tc(r,-p,p)}function i1(r,o){return Math.sqrt(Math.pow(r.y-o.y,2)+Math.pow(r.x-o.x,2))}function s1(r,o){return Math.atan2(o.y-r.y,o.x-r.x)*180/Math.PI}function u2(r,o,a,f,p,x,y){x===void 0&&(x=0),y===void 0&&(y=!0);var b=y?d2:f2,w=Mo(o.width,o.height,x),E=Mo(o.naturalWidth,o.naturalHeight,x),S={x:b(100,((w.width-a.width/p)/2-r.x/p)/w.width*100),y:b(100,((w.height-a.height/p)/2-r.y/p)/w.height*100),width:b(100,a.width/w.width*100/p),height:b(100,a.height/w.height*100/p)},I=Math.round(b(E.width,S.width*E.width/100)),_=Math.round(b(E.height,S.height*E.height/100)),D=E.width>=E.height*f,L=D?{width:Math.round(_*f),height:_}:{width:I,height:Math.round(I/f)},B=$n($n({},L),{x:Math.round(b(E.width-L.width,S.x*E.width/100)),y:Math.round(b(E.height-L.height,S.y*E.height/100))});return{croppedAreaPercentages:S,croppedAreaPixels:B}}function d2(r,o){return Math.min(r,Math.max(0,o))}function f2(r,o){return o}function h2(r,o,a,f,p,x){var y=Mo(o.width,o.height,a),b=Tc(f.width/y.width*(100/r.width),p,x),w={x:b*y.width/2-f.width/2-y.width*b*(r.x/100),y:b*y.height/2-f.height/2-y.height*b*(r.y/100)};return{crop:w,zoom:b}}function p2(r,o,a){var f=c2(o);return a.height>a.width?a.height/(r.height*f):a.width/(r.width*f)}function g2(r,o,a,f,p,x){a===void 0&&(a=0);var y=Mo(o.naturalWidth,o.naturalHeight,a),b=Tc(p2(r,o,f),p,x),w=f.height>f.width?f.height/r.height:f.width/r.width,E={x:((y.width-r.width)/2-r.x)*w,y:((y.height-r.height)/2-r.y)*w};return{crop:E,zoom:b}}function o1(r,o){return{x:(o.x+r.x)/2,y:(o.y+r.y)/2}}function m2(r){return r*Math.PI/180}function Mo(r,o,a){var f=m2(a);return{width:Math.abs(Math.cos(f)*r)+Math.abs(Math.sin(f)*o),height:Math.abs(Math.sin(f)*r)+Math.abs(Math.cos(f)*o)}}function Tc(r,o,a){return Math.min(Math.max(r,o),a)}function tc(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return r.filter(function(a){return typeof a=="string"&&a.length>0}).join(" ").trim()}var x2=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,y2=1,w2=3,v2=1,rf=function(r){e2(o,r);function o(){var a=r!==null&&r.apply(this,arguments)||this;return a.imageRef=R.createRef(),a.videoRef=R.createRef(),a.containerPosition={x:0,y:0},a.containerRef=null,a.styleRef=null,a.containerRect=null,a.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},a.dragStartPosition={x:0,y:0},a.dragStartCrop={x:0,y:0},a.gestureZoomStart=0,a.gestureRotationStart=0,a.isTouching=!1,a.lastPinchDistance=0,a.lastPinchRotation=0,a.rafDragTimeout=null,a.rafPinchTimeout=null,a.wheelTimer=null,a.currentDoc=typeof document<"u"?document:null,a.currentWindow=typeof window<"u"?window:null,a.resizeObserver=null,a.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},a.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!a.containerRef)){var f=!0;a.resizeObserver=new window.ResizeObserver(function(p){if(f){f=!1;return}a.computeSizes()}),a.resizeObserver.observe(a.containerRef)}},a.preventZoomSafari=function(f){return f.preventDefault()},a.cleanEvents=function(){a.currentDoc&&(a.currentDoc.removeEventListener("mousemove",a.onMouseMove),a.currentDoc.removeEventListener("mouseup",a.onDragStopped),a.currentDoc.removeEventListener("touchmove",a.onTouchMove),a.currentDoc.removeEventListener("touchend",a.onDragStopped),a.currentDoc.removeEventListener("gesturemove",a.onGestureMove),a.currentDoc.removeEventListener("gestureend",a.onGestureEnd),a.currentDoc.removeEventListener("scroll",a.onScroll))},a.clearScrollEvent=function(){a.containerRef&&a.containerRef.removeEventListener("wheel",a.onWheel),a.wheelTimer&&clearTimeout(a.wheelTimer)},a.onMediaLoad=function(){var f=a.computeSizes();f&&(a.emitCropData(),a.setInitialCrop(f)),a.props.onMediaLoaded&&a.props.onMediaLoaded(a.mediaSize)},a.setInitialCrop=function(f){if(a.props.initialCroppedAreaPercentages){var p=h2(a.props.initialCroppedAreaPercentages,a.mediaSize,a.props.rotation,f,a.props.minZoom,a.props.maxZoom),x=p.crop,y=p.zoom;a.props.onCropChange(x),a.props.onZoomChange&&a.props.onZoomChange(y)}else if(a.props.initialCroppedAreaPixels){var b=g2(a.props.initialCroppedAreaPixels,a.mediaSize,a.props.rotation,f,a.props.minZoom,a.props.maxZoom),x=b.crop,y=b.zoom;a.props.onCropChange(x),a.props.onZoomChange&&a.props.onZoomChange(y)}},a.computeSizes=function(){var f,p,x,y,b,w,E=a.imageRef.current||a.videoRef.current;if(E&&a.containerRef){a.containerRect=a.containerRef.getBoundingClientRect(),a.saveContainerPosition();var S=a.containerRect.width/a.containerRect.height,I=((f=a.imageRef.current)===null||f===void 0?void 0:f.naturalWidth)||((p=a.videoRef.current)===null||p===void 0?void 0:p.videoWidth)||0,_=((x=a.imageRef.current)===null||x===void 0?void 0:x.naturalHeight)||((y=a.videoRef.current)===null||y===void 0?void 0:y.videoHeight)||0,D=E.offsetWidth<I||E.offsetHeight<_,L=I/_,B=void 0;if(D)switch(a.state.mediaObjectFit){default:case"contain":B=S>L?{width:a.containerRect.height*L,height:a.containerRect.height}:{width:a.containerRect.width,height:a.containerRect.width/L};break;case"horizontal-cover":B={width:a.containerRect.width,height:a.containerRect.width/L};break;case"vertical-cover":B={width:a.containerRect.height*L,height:a.containerRect.height};break}else B={width:E.offsetWidth,height:E.offsetHeight};a.mediaSize=$n($n({},B),{naturalWidth:I,naturalHeight:_}),a.props.setMediaSize&&a.props.setMediaSize(a.mediaSize);var F=a.props.cropSize?a.props.cropSize:l2(a.mediaSize.width,a.mediaSize.height,a.containerRect.width,a.containerRect.height,a.props.aspect,a.props.rotation);return(((b=a.state.cropSize)===null||b===void 0?void 0:b.height)!==F.height||((w=a.state.cropSize)===null||w===void 0?void 0:w.width)!==F.width)&&a.props.onCropSizeChange&&a.props.onCropSizeChange(F),a.setState({cropSize:F},a.recomputeCropPosition),a.props.setCropSize&&a.props.setCropSize(F),F}},a.saveContainerPosition=function(){if(a.containerRef){var f=a.containerRef.getBoundingClientRect();a.containerPosition={x:f.left,y:f.top}}},a.onMouseDown=function(f){a.currentDoc&&(f.preventDefault(),a.currentDoc.addEventListener("mousemove",a.onMouseMove),a.currentDoc.addEventListener("mouseup",a.onDragStopped),a.saveContainerPosition(),a.onDragStart(o.getMousePoint(f)))},a.onMouseMove=function(f){return a.onDrag(o.getMousePoint(f))},a.onScroll=function(f){a.currentDoc&&(f.preventDefault(),a.saveContainerPosition())},a.onTouchStart=function(f){a.currentDoc&&(a.isTouching=!0,!(a.props.onTouchRequest&&!a.props.onTouchRequest(f))&&(a.currentDoc.addEventListener("touchmove",a.onTouchMove,{passive:!1}),a.currentDoc.addEventListener("touchend",a.onDragStopped),a.saveContainerPosition(),f.touches.length===2?a.onPinchStart(f):f.touches.length===1&&a.onDragStart(o.getTouchPoint(f.touches[0]))))},a.onTouchMove=function(f){f.preventDefault(),f.touches.length===2?a.onPinchMove(f):f.touches.length===1&&a.onDrag(o.getTouchPoint(f.touches[0]))},a.onGestureStart=function(f){a.currentDoc&&(f.preventDefault(),a.currentDoc.addEventListener("gesturechange",a.onGestureMove),a.currentDoc.addEventListener("gestureend",a.onGestureEnd),a.gestureZoomStart=a.props.zoom,a.gestureRotationStart=a.props.rotation)},a.onGestureMove=function(f){if(f.preventDefault(),!a.isTouching){var p=o.getMousePoint(f),x=a.gestureZoomStart-1+f.scale;if(a.setNewZoom(x,p,{shouldUpdatePosition:!0}),a.props.onRotationChange){var y=a.gestureRotationStart+f.rotation;a.props.onRotationChange(y)}}},a.onGestureEnd=function(f){a.cleanEvents()},a.onDragStart=function(f){var p,x,y=f.x,b=f.y;a.dragStartPosition={x:y,y:b},a.dragStartCrop=$n({},a.props.crop),(x=(p=a.props).onInteractionStart)===null||x===void 0||x.call(p)},a.onDrag=function(f){var p=f.x,x=f.y;a.currentWindow&&(a.rafDragTimeout&&a.currentWindow.cancelAnimationFrame(a.rafDragTimeout),a.rafDragTimeout=a.currentWindow.requestAnimationFrame(function(){if(a.state.cropSize&&!(p===void 0||x===void 0)){var y=p-a.dragStartPosition.x,b=x-a.dragStartPosition.y,w={x:a.dragStartCrop.x+y,y:a.dragStartCrop.y+b},E=a.props.restrictPosition?ba(w,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):w;a.props.onCropChange(E)}}))},a.onDragStopped=function(){var f,p;a.isTouching=!1,a.cleanEvents(),a.emitCropData(),(p=(f=a.props).onInteractionEnd)===null||p===void 0||p.call(f)},a.onWheel=function(f){if(a.currentWindow&&!(a.props.onWheelRequest&&!a.props.onWheelRequest(f))){f.preventDefault();var p=o.getMousePoint(f),x=a2(f).pixelY,y=a.props.zoom-x*a.props.zoomSpeed/200;a.setNewZoom(y,p,{shouldUpdatePosition:!0}),a.state.hasWheelJustStarted||a.setState({hasWheelJustStarted:!0},function(){var b,w;return(w=(b=a.props).onInteractionStart)===null||w===void 0?void 0:w.call(b)}),a.wheelTimer&&clearTimeout(a.wheelTimer),a.wheelTimer=a.currentWindow.setTimeout(function(){return a.setState({hasWheelJustStarted:!1},function(){var b,w;return(w=(b=a.props).onInteractionEnd)===null||w===void 0?void 0:w.call(b)})},250)}},a.getPointOnContainer=function(f,p){var x=f.x,y=f.y;if(!a.containerRect)throw new Error("The Cropper is not mounted");return{x:a.containerRect.width/2-(x-p.x),y:a.containerRect.height/2-(y-p.y)}},a.getPointOnMedia=function(f){var p=f.x,x=f.y,y=a.props,b=y.crop,w=y.zoom;return{x:(p+b.x)/w,y:(x+b.y)/w}},a.setNewZoom=function(f,p,x){var y=x===void 0?{}:x,b=y.shouldUpdatePosition,w=b===void 0?!0:b;if(!(!a.state.cropSize||!a.props.onZoomChange)){var E=Tc(f,a.props.minZoom,a.props.maxZoom);if(w){var S=a.getPointOnContainer(p,a.containerPosition),I=a.getPointOnMedia(S),_={x:I.x*E-S.x,y:I.y*E-S.y},D=a.props.restrictPosition?ba(_,a.mediaSize,a.state.cropSize,E,a.props.rotation):_;a.props.onCropChange(D)}a.props.onZoomChange(E)}},a.getCropData=function(){if(!a.state.cropSize)return null;var f=a.props.restrictPosition?ba(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;return u2(f,a.mediaSize,a.state.cropSize,a.getAspect(),a.props.zoom,a.props.rotation,a.props.restrictPosition)},a.emitCropData=function(){var f=a.getCropData();if(f){var p=f.croppedAreaPercentages,x=f.croppedAreaPixels;a.props.onCropComplete&&a.props.onCropComplete(p,x),a.props.onCropAreaChange&&a.props.onCropAreaChange(p,x)}},a.emitCropAreaChange=function(){var f=a.getCropData();if(f){var p=f.croppedAreaPercentages,x=f.croppedAreaPixels;a.props.onCropAreaChange&&a.props.onCropAreaChange(p,x)}},a.recomputeCropPosition=function(){if(a.state.cropSize){var f=a.props.restrictPosition?ba(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;a.props.onCropChange(f),a.emitCropData()}},a.onKeyDown=function(f){var p=a.props,x=p.crop,y=p.onCropChange,b=p.keyboardStep,w=p.zoom,E=p.rotation,S=b;if(a.state.cropSize){f.shiftKey&&(S*=.2);var I=$n({},x);switch(f.key){case"ArrowUp":I.y-=S,f.preventDefault();break;case"ArrowDown":I.y+=S,f.preventDefault();break;case"ArrowLeft":I.x-=S,f.preventDefault();break;case"ArrowRight":I.x+=S,f.preventDefault();break;default:return}a.props.restrictPosition&&(I=ba(I,a.mediaSize,a.state.cropSize,w,E)),y(I)}},a}return o.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=x2,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef))},o.prototype.componentWillUnmount=function(){var a,f;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(a=this.resizeObserver)===null||a===void 0||a.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((f=this.styleRef.parentNode)===null||f===void 0||f.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},o.prototype.componentDidUpdate=function(a){var f,p,x,y,b,w,E,S,I;a.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):a.aspect!==this.props.aspect?this.computeSizes():a.objectFit!==this.props.objectFit?this.computeSizes():a.zoom!==this.props.zoom?this.recomputeCropPosition():((f=a.cropSize)===null||f===void 0?void 0:f.height)!==((p=this.props.cropSize)===null||p===void 0?void 0:p.height)||((x=a.cropSize)===null||x===void 0?void 0:x.width)!==((y=this.props.cropSize)===null||y===void 0?void 0:y.width)?this.computeSizes():(((b=a.crop)===null||b===void 0?void 0:b.x)!==((w=this.props.crop)===null||w===void 0?void 0:w.x)||((E=a.crop)===null||E===void 0?void 0:E.y)!==((S=this.props.crop)===null||S===void 0?void 0:S.y))&&this.emitCropAreaChange(),a.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),a.video!==this.props.video&&((I=this.videoRef.current)===null||I===void 0||I.load());var _=this.getObjectFit();_!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:_},this.computeSizes)},o.prototype.getAspect=function(){var a=this.props,f=a.cropSize,p=a.aspect;return f?f.width/f.height:p},o.prototype.getObjectFit=function(){var a,f,p,x;if(this.props.objectFit==="cover"){var y=this.imageRef.current||this.videoRef.current;if(y&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var b=this.containerRect.width/this.containerRect.height,w=((a=this.imageRef.current)===null||a===void 0?void 0:a.naturalWidth)||((f=this.videoRef.current)===null||f===void 0?void 0:f.videoWidth)||0,E=((p=this.imageRef.current)===null||p===void 0?void 0:p.naturalHeight)||((x=this.videoRef.current)===null||x===void 0?void 0:x.videoHeight)||0,S=w/E;return S<b?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},o.prototype.onPinchStart=function(a){var f=o.getTouchPoint(a.touches[0]),p=o.getTouchPoint(a.touches[1]);this.lastPinchDistance=i1(f,p),this.lastPinchRotation=s1(f,p),this.onDragStart(o1(f,p))},o.prototype.onPinchMove=function(a){var f=this;if(!(!this.currentDoc||!this.currentWindow)){var p=o.getTouchPoint(a.touches[0]),x=o.getTouchPoint(a.touches[1]),y=o1(p,x);this.onDrag(y),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var b=i1(p,x),w=f.props.zoom*(b/f.lastPinchDistance);f.setNewZoom(w,y,{shouldUpdatePosition:!1}),f.lastPinchDistance=b;var E=s1(p,x),S=f.props.rotation+(E-f.lastPinchRotation);f.props.onRotationChange&&f.props.onRotationChange(S),f.lastPinchRotation=E})}},o.prototype.render=function(){var a=this,f,p=this.props,x=p.image,y=p.video,b=p.mediaProps,w=p.transform,E=p.crop,S=E.x,I=E.y,_=p.rotation,D=p.zoom,L=p.cropShape,B=p.showGrid,F=p.style,j=F.containerStyle,W=F.cropAreaStyle,z=F.mediaStyle,J=p.classes,ne=J.containerClassName,de=J.cropAreaClassName,q=J.mediaClassName,ce=(f=this.state.mediaObjectFit)!==null&&f!==void 0?f:this.getObjectFit();return R.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(Ae){return a.containerRef=Ae},"data-testid":"container",style:j,className:tc("reactEasyCrop_Container",ne)},x?R.createElement("img",$n({alt:"",className:tc("reactEasyCrop_Image",ce==="contain"&&"reactEasyCrop_Contain",ce==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",ce==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",q)},b,{src:x,ref:this.imageRef,style:$n($n({},z),{transform:w||"translate(".concat(S,"px, ").concat(I,"px) rotate(").concat(_,"deg) scale(").concat(D,")")}),onLoad:this.onMediaLoad})):y&&R.createElement("video",$n({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:tc("reactEasyCrop_Video",ce==="contain"&&"reactEasyCrop_Contain",ce==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",ce==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",q)},b,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:$n($n({},z),{transform:w||"translate(".concat(S,"px, ").concat(I,"px) rotate(").concat(_,"deg) scale(").concat(D,")")}),controls:!1}),(Array.isArray(y)?y:[{src:y}]).map(function(Z){return R.createElement("source",$n({key:Z.src},Z))})),this.state.cropSize&&R.createElement("div",{style:$n($n({},W),{width:this.state.cropSize.width,height:this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,"data-testid":"cropper",className:tc("reactEasyCrop_CropArea",L==="round"&&"reactEasyCrop_CropAreaRound",B&&"reactEasyCrop_CropAreaGrid",de)}))},o.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:w2,minZoom:y2,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:v2},o.getMousePoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},o.getTouchPoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},o}(R.Component),Sa={},a1;function C2(){return a1||(a1=1,Sa.createCanvas=function(r,o){return Object.assign(document.createElement("canvas"),{width:r,height:o})},Sa.createImageData=function(r,o,a){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(r);case 2:return new ImageData(r,o);default:return new ImageData(r,o,a)}},Sa.loadImage=function(r,o){return new Promise(function(a,f){const p=Object.assign(document.createElement("img"),o);function x(){p.onload=null,p.onerror=null}p.onload=function(){x(),a(p)},p.onerror=function(){x(),f(new Error('Failed to load the image "'+r+'"'))},p.src=r})}),Sa}C2();async function sf(r,o){return console.log("Image source being cropped:",r),new Promise((a,f)=>{const p=new Image;p.onload=()=>{const x=document.createElement("canvas"),y=x.getContext("2d");x.width=o.width,x.height=o.height,y.drawImage(p,o.x,o.y,o.width,o.height,0,0,o.width,o.height);try{const b=x.toDataURL("image/jpeg");a(b)}catch{f(new Error("Error converting canvas to base64"))}},p.onerror=x=>f(new Error(`Image load error: ${x.message}`)),p.src=r})}const E2=({onSubmit:r,onClose:o,existingProfile:a})=>{const{user:f,userProfile:p,checkAuth:x}=R.useContext(gr),[y,b]=R.useState({name:(p==null?void 0:p.name)||"",image:null,imagePreview:p!=null&&p.image_data?`data:image/jpeg;base64,${p.image_data}`:"/assets/fakeprofile.png",croppedImage:null}),[w,E]=R.useState({x:0,y:0}),[S,I]=R.useState(1),[_,D]=R.useState(null),[L,B]=R.useState(!1),[F,j]=R.useState(!1),W=ne=>{const de=ne.target.files[0];if(de){const q=new FileReader;q.onload=ce=>{b(Z=>({...Z,image:de,imagePreview:ce.target.result})),B(!0)},q.readAsDataURL(de)}},z=(ne,de)=>{console.log("Cropped Area Pixels:",de),D(de)};async function J(ne){ne.preventDefault();let de;if(y.croppedImage)de=y.croppedImage.split(",")[1];else if(y.image instanceof File){const Z=await y.image.arrayBuffer();de=btoa(new Uint8Array(Z).reduce((Ae,ke)=>Ae+String.fromCharCode(ke),""))}else if(p!=null&&p.image_data)de=p.image_data;else{console.error("No valid image provided");return}const q={name:y.name,image_data:de};console.log("Image data (first 100 chars):",de.substring(0,100));const ce=localStorage.getItem("access_token");try{const Z=await fetch(`${window.server_url}/update_profile`,{method:"POST",headers:{Authorization:`Bearer ${ce}`,"Content-Type":"application/json"},body:JSON.stringify(q)});if(!Z.ok)throw new Error("Failed to update profile");const Ae=await Z.json();await x(),console.log("Profile updated successfully:",Ae),o()}catch(Z){console.error("Error updating profile:",Z)}}return v.jsx("div",{className:"profile-creation-overlay",style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:v.jsxs("div",{className:"profile-creation-modal",style:{width:"70%",maxWidth:"500px",backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",padding:"2rem",boxShadow:"0 10px 30px rgba(20,77,255,0.15)",position:"relative",border:"1px solid rgba(20,77,255,0.1)"},children:[v.jsx("button",{onClick:o,style:{position:"absolute",top:"1.2rem",right:"1.2rem",background:"none",border:"none",fontSize:"1.8rem",cursor:"pointer",color:"#144dff",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.1)"}},children:""}),v.jsx("h2",{style:{fontSize:"clamp(1.8rem, 6vw, 2.5rem)",color:"#144dff",textAlign:"center",marginBottom:"2rem",fontWeight:"600"},children:"Your Profile"}),v.jsxs("form",{onSubmit:J,style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem"},children:[v.jsx("label",{style:{color:"#144dff",fontWeight:"500",fontSize:"1rem"},children:"Your Name"}),v.jsx("input",{type:"text",value:y.name,onChange:ne=>b({...y,name:ne.target.value}),style:{width:"100%",padding:"12px",borderRadius:"12px",border:"2px solid #e0e0e0",fontSize:"0.9rem",transition:"all 0.3s ease",backgroundColor:"rgba(255,255,255,0.9)","&:focus":{borderColor:"#144dff",outline:"none",boxShadow:"0 0 0 3px rgba(20,77,255,0.1)"}}})]}),!L&&v.jsx("div",{style:{width:"250px",height:"250px",margin:"0 auto",borderRadius:"20%",overflow:"hidden",border:"7px solid #144dff",boxShadow:"0 8px 25px rgba(20,77,255,0.2)",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.02)"}},children:v.jsx("img",{src:y.croppedImage?y.croppedImage:y.imagePreview?y.imagePreview:p!=null&&p.image_data?`data:image/jpeg;base64,${p.image_data}`:"/assets/fakeprofile.png",alt:"Profile preview",style:{width:"100%",height:"100%",objectFit:"cover"}})}),v.jsxs("div",{style:{textAlign:"center"},children:[v.jsx("input",{type:"file",id:"image-upload",accept:"image/*",onChange:W,style:{display:"none"}}),v.jsx("label",{htmlFor:"image-upload",style:{padding:"0.8rem 1.2rem",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",borderRadius:"25px",cursor:"pointer",display:"inline-block",fontSize:"0.9rem",fontWeight:"600",boxShadow:"0 4px 15px rgba(20,77,255,0.2)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Upload New Image"})]}),L&&v.jsxs("div",{style:{width:"100%",maxWidth:"300px",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",gap:"1.2rem"},children:[v.jsx("div",{style:{position:"relative",width:"250px",height:"250px",borderRadius:"20%",overflow:"hidden",border:"7px solid #144dff",boxShadow:"0 8px 25px rgba(20,77,255,0.2)"},children:v.jsx(rf,{image:y.imagePreview,crop:w,zoom:S,aspect:1,onCropComplete:z,onCropChange:E,onZoomChange:I})}),v.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[v.jsx("button",{type:"button",onClick:()=>{B(!1),y.croppedImage||b(ne=>({...ne,imagePreview:null}))},style:{padding:"0.8rem 1.2rem",borderRadius:"25px",border:"2px solid #144dff",background:"white",color:"#144dff",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease","&:hover":{background:"rgba(20,77,255,0.1)"}},children:"Cancel"}),v.jsx("button",{type:"button",onClick:async()=>{try{const ne=await sf(y.imagePreview,_);b(de=>({...de,croppedImage:ne,imagePreview:ne})),B(!1),j(!0),setTimeout(()=>j(!1),1e4)}catch(ne){console.error("Error cropping image:",ne)}},className:`save-profile-button ${F?"glow-bounce":""}`,style:{padding:"0.8rem 1.2rem",borderRadius:"25px",border:"none",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(20,77,255,0.2)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Save Cropped Image"})]})]}),v.jsx("button",{type:"submit",className:`save-profile-button ${F?"glow-bounce":""}`,style:{padding:"1rem",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",border:"none",borderRadius:"25px",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",marginTop:"1rem",boxShadow:"0 4px 15px rgba(20,77,255,0.2)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Save Profile"})]})]})})};var Ta={},l1;function A2(){if(l1)return Ta;l1=1,Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.parse=y,Ta.serialize=E;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,o=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,f=/^[\u0020-\u003A\u003D-\u007E]*$/,p=Object.prototype.toString,x=(()=>{const _=function(){};return _.prototype=Object.create(null),_})();function y(_,D){const L=new x,B=_.length;if(B<2)return L;const F=(D==null?void 0:D.decode)||S;let j=0;do{const W=_.indexOf("=",j);if(W===-1)break;const z=_.indexOf(";",j),J=z===-1?B:z;if(W>J){j=_.lastIndexOf(";",W-1)+1;continue}const ne=b(_,j,W),de=w(_,W,ne),q=_.slice(ne,de);if(L[q]===void 0){let ce=b(_,W+1,J),Z=w(_,J,ce);const Ae=F(_.slice(ce,Z));L[q]=Ae}j=J+1}while(j<B);return L}function b(_,D,L){do{const B=_.charCodeAt(D);if(B!==32&&B!==9)return D}while(++D<L);return L}function w(_,D,L){for(;D>L;){const B=_.charCodeAt(--D);if(B!==32&&B!==9)return D+1}return L}function E(_,D,L){const B=(L==null?void 0:L.encode)||encodeURIComponent;if(!r.test(_))throw new TypeError(`argument name is invalid: ${_}`);const F=B(D);if(!o.test(F))throw new TypeError(`argument val is invalid: ${D}`);let j=_+"="+F;if(!L)return j;if(L.maxAge!==void 0){if(!Number.isInteger(L.maxAge))throw new TypeError(`option maxAge is invalid: ${L.maxAge}`);j+="; Max-Age="+L.maxAge}if(L.domain){if(!a.test(L.domain))throw new TypeError(`option domain is invalid: ${L.domain}`);j+="; Domain="+L.domain}if(L.path){if(!f.test(L.path))throw new TypeError(`option path is invalid: ${L.path}`);j+="; Path="+L.path}if(L.expires){if(!I(L.expires)||!Number.isFinite(L.expires.valueOf()))throw new TypeError(`option expires is invalid: ${L.expires}`);j+="; Expires="+L.expires.toUTCString()}if(L.httpOnly&&(j+="; HttpOnly"),L.secure&&(j+="; Secure"),L.partitioned&&(j+="; Partitioned"),L.priority)switch(typeof L.priority=="string"?L.priority.toLowerCase():void 0){case"low":j+="; Priority=Low";break;case"medium":j+="; Priority=Medium";break;case"high":j+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${L.priority}`)}if(L.sameSite)switch(typeof L.sameSite=="string"?L.sameSite.toLowerCase():L.sameSite){case!0:case"strict":j+="; SameSite=Strict";break;case"lax":j+="; SameSite=Lax";break;case"none":j+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${L.sameSite}`)}return j}function S(_){if(_.indexOf("%")===-1)return _;try{return decodeURIComponent(_)}catch{return _}}function I(_){return p.call(_)==="[object Date]"}return Ta}A2();/**
 * react-router v7.0.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var c1="popstate";function b2(r={}){function o(f,p){let{pathname:x,search:y,hash:b}=f.location;return Nd("",{pathname:x,search:y,hash:b},p.state&&p.state.usr||null,p.state&&p.state.key||"default")}function a(f,p){return typeof p=="string"?p:Ba(p)}return T2(o,a,null,r)}function cn(r,o){if(r===!1||r===null||typeof r>"u")throw new Error(o)}function yi(r,o){if(!r){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}function S2(){return Math.random().toString(36).substring(2,10)}function u1(r,o){return{usr:r.state,key:r.key,idx:o}}function Nd(r,o,a=null,f){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof o=="string"?Fo(o):o,state:a,key:o&&o.key||f||S2()}}function Ba({pathname:r="/",search:o="",hash:a=""}){return o&&o!=="?"&&(r+=o.charAt(0)==="?"?o:"?"+o),a&&a!=="#"&&(r+=a.charAt(0)==="#"?a:"#"+a),r}function Fo(r){let o={};if(r){let a=r.indexOf("#");a>=0&&(o.hash=r.substring(a),r=r.substring(0,a));let f=r.indexOf("?");f>=0&&(o.search=r.substring(f),r=r.substring(0,f)),r&&(o.pathname=r)}return o}function T2(r,o,a,f={}){let{window:p=document.defaultView,v5Compat:x=!1}=f,y=p.history,b="POP",w=null,E=S();E==null&&(E=0,y.replaceState({...y.state,idx:E},""));function S(){return(y.state||{idx:null}).idx}function I(){b="POP";let F=S(),j=F==null?null:F-E;E=F,w&&w({action:b,location:B.location,delta:j})}function _(F,j){b="PUSH";let W=Nd(B.location,F,j);E=S()+1;let z=u1(W,E),J=B.createHref(W);try{y.pushState(z,"",J)}catch(ne){if(ne instanceof DOMException&&ne.name==="DataCloneError")throw ne;p.location.assign(J)}x&&w&&w({action:b,location:B.location,delta:1})}function D(F,j){b="REPLACE";let W=Nd(B.location,F,j);E=S();let z=u1(W,E),J=B.createHref(W);y.replaceState(z,"",J),x&&w&&w({action:b,location:B.location,delta:0})}function L(F){let j=p.location.origin!=="null"?p.location.origin:p.location.href,W=typeof F=="string"?F:Ba(F);return W=W.replace(/ $/,"%20"),cn(j,`No window.location.(origin|href) available to create URL for href: ${W}`),new URL(W,j)}let B={get action(){return b},get location(){return r(p,y)},listen(F){if(w)throw new Error("A history only accepts one active listener");return p.addEventListener(c1,I),w=F,()=>{p.removeEventListener(c1,I),w=null}},createHref(F){return o(p,F)},createURL:L,encodeLocation(F){let j=L(F);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:_,replace:D,go(F){return y.go(F)}};return B}function jp(r,o,a="/"){return I2(r,o,a,!1)}function I2(r,o,a,f){let p=typeof o=="string"?Fo(o):o,x=ys(p.pathname||"/",a);if(x==null)return null;let y=Vp(r);N2(y);let b=null;for(let w=0;b==null&&w<y.length;++w){let E=j2(x);b=B2(y[w],E,f)}return b}function Vp(r,o=[],a=[],f=""){let p=(x,y,b)=>{let w={relativePath:b===void 0?x.path||"":b,caseSensitive:x.caseSensitive===!0,childrenIndex:y,route:x};w.relativePath.startsWith("/")&&(cn(w.relativePath.startsWith(f),`Absolute route path "${w.relativePath}" nested under path "${f}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(f.length));let E=Fi([f,w.relativePath]),S=a.concat(w);x.children&&x.children.length>0&&(cn(x.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),Vp(x.children,o,S,E)),!(x.path==null&&!x.index)&&o.push({path:E,score:M2(E,x.index),routesMeta:S})};return r.forEach((x,y)=>{var b;if(x.path===""||!((b=x.path)!=null&&b.includes("?")))p(x,y);else for(let w of zp(x.path))p(x,y,w)}),o}function zp(r){let o=r.split("/");if(o.length===0)return[];let[a,...f]=o,p=a.endsWith("?"),x=a.replace(/\?$/,"");if(f.length===0)return p?[x,""]:[x];let y=zp(f.join("/")),b=[];return b.push(...y.map(w=>w===""?x:[x,w].join("/"))),p&&b.push(...y),b.map(w=>r.startsWith("/")&&w===""?"/":w)}function N2(r){r.sort((o,a)=>o.score!==a.score?a.score-o.score:L2(o.routesMeta.map(f=>f.childrenIndex),a.routesMeta.map(f=>f.childrenIndex)))}var _2=/^:[\w-]+$/,R2=3,k2=2,P2=1,O2=10,D2=-2,d1=r=>r==="*";function M2(r,o){let a=r.split("/"),f=a.length;return a.some(d1)&&(f+=D2),o&&(f+=k2),a.filter(p=>!d1(p)).reduce((p,x)=>p+(_2.test(x)?R2:x===""?P2:O2),f)}function L2(r,o){return r.length===o.length&&r.slice(0,-1).every((f,p)=>f===o[p])?r[r.length-1]-o[o.length-1]:0}function B2(r,o,a=!1){let{routesMeta:f}=r,p={},x="/",y=[];for(let b=0;b<f.length;++b){let w=f[b],E=b===f.length-1,S=x==="/"?o:o.slice(x.length)||"/",I=mc({path:w.relativePath,caseSensitive:w.caseSensitive,end:E},S),_=w.route;if(!I&&E&&a&&!f[f.length-1].route.index&&(I=mc({path:w.relativePath,caseSensitive:w.caseSensitive,end:!1},S)),!I)return null;Object.assign(p,I.params),y.push({params:p,pathname:Fi([x,I.pathname]),pathnameBase:W2(Fi([x,I.pathnameBase])),route:_}),I.pathnameBase!=="/"&&(x=Fi([x,I.pathnameBase]))}return y}function mc(r,o){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[a,f]=F2(r.path,r.caseSensitive,r.end),p=o.match(a);if(!p)return null;let x=p[0],y=x.replace(/(.)\/+$/,"$1"),b=p.slice(1);return{params:f.reduce((E,{paramName:S,isOptional:I},_)=>{if(S==="*"){let L=b[_]||"";y=x.slice(0,x.length-L.length).replace(/(.)\/+$/,"$1")}const D=b[_];return I&&!D?E[S]=void 0:E[S]=(D||"").replace(/%2F/g,"/"),E},{}),pathname:x,pathnameBase:y,pattern:r}}function F2(r,o=!1,a=!0){yi(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let f=[],p="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,b,w)=>(f.push({paramName:b,isOptional:w!=null}),w?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(f.push({paramName:"*"}),p+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?p+="\\/*$":r!==""&&r!=="/"&&(p+="(?:(?=\\/|$))"),[new RegExp(p,o?void 0:"i"),f]}function j2(r){try{return r.split("/").map(o=>decodeURIComponent(o).replace(/\//g,"%2F")).join("/")}catch(o){return yi(!1,`The URL path "${r}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${o}).`),r}}function ys(r,o){if(o==="/")return r;if(!r.toLowerCase().startsWith(o.toLowerCase()))return null;let a=o.endsWith("/")?o.length-1:o.length,f=r.charAt(a);return f&&f!=="/"?null:r.slice(a)||"/"}function V2(r,o="/"){let{pathname:a,search:f="",hash:p=""}=typeof r=="string"?Fo(r):r;return{pathname:a?a.startsWith("/")?a:z2(a,o):o,search:H2(f),hash:G2(p)}}function z2(r,o){let a=o.replace(/\/+$/,"").split("/");return r.split("/").forEach(p=>{p===".."?a.length>1&&a.pop():p!=="."&&a.push(p)}),a.length>1?a.join("/"):"/"}function ud(r,o,a,f){return`Cannot include a '${r}' character in a manually specified \`to.${o}\` field [${JSON.stringify(f)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function U2(r){return r.filter((o,a)=>a===0||o.route.path&&o.route.path.length>0)}function Up(r){let o=U2(r);return o.map((a,f)=>f===o.length-1?a.pathname:a.pathnameBase)}function Wp(r,o,a,f=!1){let p;typeof r=="string"?p=Fo(r):(p={...r},cn(!p.pathname||!p.pathname.includes("?"),ud("?","pathname","search",p)),cn(!p.pathname||!p.pathname.includes("#"),ud("#","pathname","hash",p)),cn(!p.search||!p.search.includes("#"),ud("#","search","hash",p)));let x=r===""||p.pathname==="",y=x?"/":p.pathname,b;if(y==null)b=a;else{let I=o.length-1;if(!f&&y.startsWith("..")){let _=y.split("/");for(;_[0]==="..";)_.shift(),I-=1;p.pathname=_.join("/")}b=I>=0?o[I]:"/"}let w=V2(p,b),E=y&&y!=="/"&&y.endsWith("/"),S=(x||y===".")&&a.endsWith("/");return!w.pathname.endsWith("/")&&(E||S)&&(w.pathname+="/"),w}var Fi=r=>r.join("/").replace(/\/\/+/g,"/"),W2=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),H2=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,G2=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function X2(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var Hp=["POST","PUT","PATCH","DELETE"];new Set(Hp);var Y2=["GET",...Hp];new Set(Y2);var jo=R.createContext(null);jo.displayName="DataRouter";var Ic=R.createContext(null);Ic.displayName="DataRouterState";var Gp=R.createContext({isTransitioning:!1});Gp.displayName="ViewTransition";var K2=R.createContext(new Map);K2.displayName="Fetchers";var $2=R.createContext(null);$2.displayName="Await";var wi=R.createContext(null);wi.displayName="Navigation";var Ha=R.createContext(null);Ha.displayName="Location";var vi=R.createContext({outlet:null,matches:[],isDataRoute:!1});vi.displayName="Route";var of=R.createContext(null);of.displayName="RouteError";function Z2(r,{relative:o}={}){cn(Ga(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:f}=R.useContext(wi),{hash:p,pathname:x,search:y}=Xa(r,{relative:o}),b=x;return a!=="/"&&(b=x==="/"?a:Fi([a,x])),f.createHref({pathname:b,search:y,hash:p})}function Ga(){return R.useContext(Ha)!=null}function Or(){return cn(Ga(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(Ha).location}var Xp="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Yp(r){R.useContext(wi).static||R.useLayoutEffect(r)}function ar(){let{isDataRoute:r}=R.useContext(vi);return r?uy():q2()}function q2(){cn(Ga(),"useNavigate() may be used only in the context of a <Router> component.");let r=R.useContext(jo),{basename:o,navigator:a}=R.useContext(wi),{matches:f}=R.useContext(vi),{pathname:p}=Or(),x=JSON.stringify(Up(f)),y=R.useRef(!1);return Yp(()=>{y.current=!0}),R.useCallback((w,E={})=>{if(yi(y.current,Xp),!y.current)return;if(typeof w=="number"){a.go(w);return}let S=Wp(w,JSON.parse(x),p,E.relative==="path");r==null&&o!=="/"&&(S.pathname=S.pathname==="/"?o:Fi([o,S.pathname])),(E.replace?a.replace:a.push)(S,E.state,E)},[o,a,x,p,r])}R.createContext(null);function Q2(){let{matches:r}=R.useContext(vi),o=r[r.length-1];return o?o.params:{}}function Xa(r,{relative:o}={}){let{matches:a}=R.useContext(vi),{pathname:f}=Or(),p=JSON.stringify(Up(a));return R.useMemo(()=>Wp(r,JSON.parse(p),f,o==="path"),[r,p,f,o])}function J2(r,o){return Kp(r,o)}function Kp(r,o,a,f){var j;cn(Ga(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:p}=R.useContext(wi),{matches:x}=R.useContext(vi),y=x[x.length-1],b=y?y.params:{},w=y?y.pathname:"/",E=y?y.pathnameBase:"/",S=y&&y.route;{let W=S&&S.path||"";$p(w,!S||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${w}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let I=Or(),_;if(o){let W=typeof o=="string"?Fo(o):o;cn(E==="/"||((j=W.pathname)==null?void 0:j.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${W.pathname}" was given in the \`location\` prop.`),_=W}else _=I;let D=_.pathname||"/",L=D;if(E!=="/"){let W=E.replace(/^\//,"").split("/");L="/"+D.replace(/^\//,"").split("/").slice(W.length).join("/")}let B=jp(r,{pathname:L});yi(S||B!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),yi(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let F=iy(B&&B.map(W=>Object.assign({},W,{params:Object.assign({},b,W.params),pathname:Fi([E,p.encodeLocation?p.encodeLocation(W.pathname).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?E:Fi([E,p.encodeLocation?p.encodeLocation(W.pathnameBase).pathname:W.pathnameBase])})),x,a,f);return o&&F?R.createElement(Ha.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},F):F}function ey(){let r=cy(),o=X2(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),a=r instanceof Error?r.stack:null,f="rgba(200,200,200, 0.5)",p={padding:"0.5rem",backgroundColor:f},x={padding:"2px 4px",backgroundColor:f},y=null;return console.error("Error handled by React Router default ErrorBoundary:",r),y=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:x},"ErrorBoundary")," or"," ",R.createElement("code",{style:x},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},o),a?R.createElement("pre",{style:p},a):null,y)}var ty=R.createElement(ey,null),ny=class extends R.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,o){return o.location!==r.location||o.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:o.error,location:o.location,revalidation:r.revalidation||o.revalidation}}componentDidCatch(r,o){console.error("React Router caught the following error during render",r,o)}render(){return this.state.error!==void 0?R.createElement(vi.Provider,{value:this.props.routeContext},R.createElement(of.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ry({routeContext:r,match:o,children:a}){let f=R.useContext(jo);return f&&f.static&&f.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(f.staticContext._deepestRenderedBoundaryId=o.route.id),R.createElement(vi.Provider,{value:r},a)}function iy(r,o=[],a=null,f=null){if(r==null){if(!a)return null;if(a.errors)r=a.matches;else if(o.length===0&&!a.initialized&&a.matches.length>0)r=a.matches;else return null}let p=r,x=a==null?void 0:a.errors;if(x!=null){let w=p.findIndex(E=>E.route.id&&(x==null?void 0:x[E.route.id])!==void 0);cn(w>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(x).join(",")}`),p=p.slice(0,Math.min(p.length,w+1))}let y=!1,b=-1;if(a)for(let w=0;w<p.length;w++){let E=p[w];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(b=w),E.route.id){let{loaderData:S,errors:I}=a,_=E.route.loader&&!S.hasOwnProperty(E.route.id)&&(!I||I[E.route.id]===void 0);if(E.route.lazy||_){y=!0,b>=0?p=p.slice(0,b+1):p=[p[0]];break}}}return p.reduceRight((w,E,S)=>{let I,_=!1,D=null,L=null;a&&(I=x&&E.route.id?x[E.route.id]:void 0,D=E.route.errorElement||ty,y&&(b<0&&S===0?($p("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,L=null):b===S&&(_=!0,L=E.route.hydrateFallbackElement||null)));let B=o.concat(p.slice(0,S+1)),F=()=>{let j;return I?j=D:_?j=L:E.route.Component?j=R.createElement(E.route.Component,null):E.route.element?j=E.route.element:j=w,R.createElement(ry,{match:E,routeContext:{outlet:w,matches:B,isDataRoute:a!=null},children:j})};return a&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?R.createElement(ny,{location:a.location,revalidation:a.revalidation,component:D,error:I,children:F(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):F()},null)}function af(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sy(r){let o=R.useContext(jo);return cn(o,af(r)),o}function oy(r){let o=R.useContext(Ic);return cn(o,af(r)),o}function ay(r){let o=R.useContext(vi);return cn(o,af(r)),o}function lf(r){let o=ay(r),a=o.matches[o.matches.length-1];return cn(a.route.id,`${r} can only be used on routes that contain a unique "id"`),a.route.id}function ly(){return lf("useRouteId")}function cy(){var f;let r=R.useContext(of),o=oy("useRouteError"),a=lf("useRouteError");return r!==void 0?r:(f=o.errors)==null?void 0:f[a]}function uy(){let{router:r}=sy("useNavigate"),o=lf("useNavigate"),a=R.useRef(!1);return Yp(()=>{a.current=!0}),R.useCallback(async(p,x={})=>{yi(a.current,Xp),a.current&&(typeof p=="number"?r.navigate(p):await r.navigate(p,{fromRouteId:o,...x}))},[r,o])}var f1={};function $p(r,o,a){!o&&!f1[r]&&(f1[r]=!0,yi(!1,a))}R.memo(dy);function dy({routes:r,future:o,state:a}){return Kp(r,void 0,a,o)}function Ar(r){cn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function fy({basename:r="/",children:o=null,location:a,navigationType:f="POP",navigator:p,static:x=!1}){cn(!Ga(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let y=r.replace(/^\/*/,"/"),b=R.useMemo(()=>({basename:y,navigator:p,static:x,future:{}}),[y,p,x]);typeof a=="string"&&(a=Fo(a));let{pathname:w="/",search:E="",hash:S="",state:I=null,key:_="default"}=a,D=R.useMemo(()=>{let L=ys(w,y);return L==null?null:{location:{pathname:L,search:E,hash:S,state:I,key:_},navigationType:f}},[y,w,E,S,I,_,f]);return yi(D!=null,`<Router basename="${y}"> is not able to match the URL "${w}${E}${S}" because it does not start with the basename, so the <Router> won't render anything.`),D==null?null:R.createElement(wi.Provider,{value:b},R.createElement(Ha.Provider,{children:o,value:D}))}function hy({children:r,location:o}){return J2(_d(r),o)}function _d(r,o=[]){let a=[];return R.Children.forEach(r,(f,p)=>{if(!R.isValidElement(f))return;let x=[...o,p];if(f.type===R.Fragment){a.push.apply(a,_d(f.props.children,x));return}cn(f.type===Ar,`[${typeof f.type=="string"?f.type:f.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),cn(!f.props.index||!f.props.children,"An index route cannot have child routes.");let y={id:f.props.id||x.join("-"),caseSensitive:f.props.caseSensitive,element:f.props.element,Component:f.props.Component,index:f.props.index,path:f.props.path,loader:f.props.loader,action:f.props.action,hydrateFallbackElement:f.props.hydrateFallbackElement,HydrateFallback:f.props.HydrateFallback,errorElement:f.props.errorElement,ErrorBoundary:f.props.ErrorBoundary,hasErrorBoundary:f.props.hasErrorBoundary===!0||f.props.ErrorBoundary!=null||f.props.errorElement!=null,shouldRevalidate:f.props.shouldRevalidate,handle:f.props.handle,lazy:f.props.lazy};f.props.children&&(y.children=_d(f.props.children,x)),a.push(y)}),a}var cc="get",uc="application/x-www-form-urlencoded";function Nc(r){return r!=null&&typeof r.tagName=="string"}function py(r){return Nc(r)&&r.tagName.toLowerCase()==="button"}function gy(r){return Nc(r)&&r.tagName.toLowerCase()==="form"}function my(r){return Nc(r)&&r.tagName.toLowerCase()==="input"}function xy(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function yy(r,o){return r.button===0&&(!o||o==="_self")&&!xy(r)}var nc=null;function wy(){if(nc===null)try{new FormData(document.createElement("form"),0),nc=!1}catch{nc=!0}return nc}var vy=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function dd(r){return r!=null&&!vy.has(r)?(yi(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${uc}"`),null):r}function Cy(r,o){let a,f,p,x,y;if(gy(r)){let b=r.getAttribute("action");f=b?ys(b,o):null,a=r.getAttribute("method")||cc,p=dd(r.getAttribute("enctype"))||uc,x=new FormData(r)}else if(py(r)||my(r)&&(r.type==="submit"||r.type==="image")){let b=r.form;if(b==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let w=r.getAttribute("formaction")||b.getAttribute("action");if(f=w?ys(w,o):null,a=r.getAttribute("formmethod")||b.getAttribute("method")||cc,p=dd(r.getAttribute("formenctype"))||dd(b.getAttribute("enctype"))||uc,x=new FormData(b,r),!wy()){let{name:E,type:S,value:I}=r;if(S==="image"){let _=E?`${E}.`:"";x.append(`${_}x`,"0"),x.append(`${_}y`,"0")}else E&&x.append(E,I)}}else{if(Nc(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=cc,f=null,p=uc,y=r}return x&&p==="text/plain"&&(y=x,x=void 0),{action:f,method:a.toLowerCase(),encType:p,formData:x,body:y}}function cf(r,o){if(r===!1||r===null||typeof r>"u")throw new Error(o)}async function Ey(r,o){if(r.id in o)return o[r.id];try{let a=await import(r.module);return o[r.id]=a,a}catch(a){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ay(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function by(r,o,a){let f=await Promise.all(r.map(async p=>{let x=o.routes[p.route.id];if(x){let y=await Ey(x,a);return y.links?y.links():[]}return[]}));return Ny(f.flat(1).filter(Ay).filter(p=>p.rel==="stylesheet"||p.rel==="preload").map(p=>p.rel==="stylesheet"?{...p,rel:"prefetch",as:"style"}:{...p,rel:"prefetch"}))}function h1(r,o,a,f,p,x){let y=(w,E)=>a[E]?w.route.id!==a[E].route.id:!0,b=(w,E)=>{var S;return a[E].pathname!==w.pathname||((S=a[E].route.path)==null?void 0:S.endsWith("*"))&&a[E].params["*"]!==w.params["*"]};return x==="assets"?o.filter((w,E)=>y(w,E)||b(w,E)):x==="data"?o.filter((w,E)=>{var I;let S=f.routes[w.route.id];if(!S||!S.hasLoader)return!1;if(y(w,E)||b(w,E))return!0;if(w.route.shouldRevalidate){let _=w.route.shouldRevalidate({currentUrl:new URL(p.pathname+p.search+p.hash,window.origin),currentParams:((I=a[0])==null?void 0:I.params)||{},nextUrl:new URL(r,window.origin),nextParams:w.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function Sy(r,o){return Ty(r.map(a=>{let f=o.routes[a.route.id];if(!f)return[];let p=[f.module];return f.imports&&(p=p.concat(f.imports)),p}).flat(1))}function Ty(r){return[...new Set(r)]}function Iy(r){let o={},a=Object.keys(r).sort();for(let f of a)o[f]=r[f];return o}function Ny(r,o){let a=new Set;return new Set(o),r.reduce((f,p)=>{let x=JSON.stringify(Iy(p));return a.has(x)||(a.add(x),f.push({key:x,link:p})),f},[])}function _y(r){let o=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return o.pathname==="/"?o.pathname="_root.data":o.pathname=`${o.pathname.replace(/\/$/,"")}.data`,o}function Ry(){let r=R.useContext(jo);return cf(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function ky(){let r=R.useContext(Ic);return cf(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var uf=R.createContext(void 0);uf.displayName="FrameworkContext";function Zp(){let r=R.useContext(uf);return cf(r,"You must render this element inside a <HydratedRouter> element"),r}function Py(r,o){let a=R.useContext(uf),[f,p]=R.useState(!1),[x,y]=R.useState(!1),{onFocus:b,onBlur:w,onMouseEnter:E,onMouseLeave:S,onTouchStart:I}=o,_=R.useRef(null);R.useEffect(()=>{if(r==="render"&&y(!0),r==="viewport"){let B=j=>{j.forEach(W=>{y(W.isIntersecting)})},F=new IntersectionObserver(B,{threshold:.5});return _.current&&F.observe(_.current),()=>{F.disconnect()}}},[r]),R.useEffect(()=>{if(f){let B=setTimeout(()=>{y(!0)},100);return()=>{clearTimeout(B)}}},[f]);let D=()=>{p(!0)},L=()=>{p(!1),y(!1)};return a?r!=="intent"?[x,_,{}]:[x,_,{onFocus:Ia(b,D),onBlur:Ia(w,L),onMouseEnter:Ia(E,D),onMouseLeave:Ia(S,L),onTouchStart:Ia(I,D)}]:[!1,_,{}]}function Ia(r,o){return a=>{r&&r(a),a.defaultPrevented||o(a)}}function Oy({page:r,...o}){let{router:a}=Ry(),f=R.useMemo(()=>jp(a.routes,r,a.basename),[a.routes,r,a.basename]);return f?R.createElement(My,{page:r,matches:f,...o}):(console.warn(`Tried to prefetch ${r} but no routes matched.`),null)}function Dy(r){let{manifest:o,routeModules:a}=Zp(),[f,p]=R.useState([]);return R.useEffect(()=>{let x=!1;return by(r,o,a).then(y=>{x||p(y)}),()=>{x=!0}},[r,o,a]),f}function My({page:r,matches:o,...a}){let f=Or(),{manifest:p,routeModules:x}=Zp(),{loaderData:y,matches:b}=ky(),w=R.useMemo(()=>h1(r,o,b,p,f,"data"),[r,o,b,p,f]),E=R.useMemo(()=>h1(r,o,b,p,f,"assets"),[r,o,b,p,f]),S=R.useMemo(()=>{if(r===f.pathname+f.search+f.hash)return[];let D=new Set,L=!1;if(o.forEach(F=>{var W;let j=p.routes[F.route.id];!j||!j.hasLoader||(!w.some(z=>z.route.id===F.route.id)&&F.route.id in y&&((W=x[F.route.id])!=null&&W.shouldRevalidate)||j.hasClientLoader?L=!0:D.add(F.route.id))}),D.size===0)return[];let B=_y(r);return L&&D.size>0&&B.searchParams.set("_routes",o.filter(F=>D.has(F.route.id)).map(F=>F.route.id).join(",")),[B.pathname+B.search]},[y,f,p,w,o,r,x]),I=R.useMemo(()=>Sy(E,p),[E,p]),_=Dy(E);return R.createElement(R.Fragment,null,S.map(D=>R.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...a})),I.map(D=>R.createElement("link",{key:D,rel:"modulepreload",href:D,...a})),_.map(({key:D,link:L})=>R.createElement("link",{key:D,...L})))}function Ly(...r){return o=>{r.forEach(a=>{typeof a=="function"?a(o):a!=null&&(a.current=o)})}}var qp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{qp&&(window.__reactRouterVersion="7.0.2")}catch{}function By({basename:r,children:o,window:a}){let f=R.useRef();f.current==null&&(f.current=b2({window:a,v5Compat:!0}));let p=f.current,[x,y]=R.useState({action:p.action,location:p.location}),b=R.useCallback(w=>{R.startTransition(()=>y(w))},[y]);return R.useLayoutEffect(()=>p.listen(b),[p,b]),R.createElement(fy,{basename:r,children:o,location:x.location,navigationType:x.action,navigator:p})}var Qp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jp=R.forwardRef(function({onClick:o,discover:a="render",prefetch:f="none",relative:p,reloadDocument:x,replace:y,state:b,target:w,to:E,preventScrollReset:S,viewTransition:I,..._},D){let{basename:L}=R.useContext(wi),B=typeof E=="string"&&Qp.test(E),F,j=!1;if(typeof E=="string"&&B&&(F=E,qp))try{let Z=new URL(window.location.href),Ae=E.startsWith("//")?new URL(Z.protocol+E):new URL(E),ke=ys(Ae.pathname,L);Ae.origin===Z.origin&&ke!=null?E=ke+Ae.search+Ae.hash:j=!0}catch{yi(!1,`<Link to="${E}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let W=Z2(E,{relative:p}),[z,J,ne]=Py(f,_),de=zy(E,{replace:y,state:b,target:w,preventScrollReset:S,relative:p,viewTransition:I});function q(Z){o&&o(Z),Z.defaultPrevented||de(Z)}let ce=R.createElement("a",{..._,...ne,href:F||W,onClick:j||x?o:q,ref:Ly(D,J),target:w,"data-discover":!B&&a==="render"?"true":void 0});return z&&!B?R.createElement(R.Fragment,null,ce,R.createElement(Oy,{page:W})):ce});Jp.displayName="Link";var Fy=R.forwardRef(function({"aria-current":o="page",caseSensitive:a=!1,className:f="",end:p=!1,style:x,to:y,viewTransition:b,children:w,...E},S){let I=Xa(y,{relative:E.relative}),_=Or(),D=R.useContext(Ic),{navigator:L,basename:B}=R.useContext(wi),F=D!=null&&Xy(I)&&b===!0,j=L.encodeLocation?L.encodeLocation(I).pathname:I.pathname,W=_.pathname,z=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;a||(W=W.toLowerCase(),z=z?z.toLowerCase():null,j=j.toLowerCase()),z&&B&&(z=ys(z,B)||z);const J=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let ne=W===j||!p&&W.startsWith(j)&&W.charAt(J)==="/",de=z!=null&&(z===j||!p&&z.startsWith(j)&&z.charAt(j.length)==="/"),q={isActive:ne,isPending:de,isTransitioning:F},ce=ne?o:void 0,Z;typeof f=="function"?Z=f(q):Z=[f,ne?"active":null,de?"pending":null,F?"transitioning":null].filter(Boolean).join(" ");let Ae=typeof x=="function"?x(q):x;return R.createElement(Jp,{...E,"aria-current":ce,className:Z,ref:S,style:Ae,to:y,viewTransition:b},typeof w=="function"?w(q):w)});Fy.displayName="NavLink";var jy=R.forwardRef(({discover:r="render",fetcherKey:o,navigate:a,reloadDocument:f,replace:p,state:x,method:y=cc,action:b,onSubmit:w,relative:E,preventScrollReset:S,viewTransition:I,..._},D)=>{let L=Hy(),B=Gy(b,{relative:E}),F=y.toLowerCase()==="get"?"get":"post",j=typeof b=="string"&&Qp.test(b),W=z=>{if(w&&w(z),z.defaultPrevented)return;z.preventDefault();let J=z.nativeEvent.submitter,ne=(J==null?void 0:J.getAttribute("formmethod"))||y;L(J||z.currentTarget,{fetcherKey:o,method:ne,navigate:a,replace:p,state:x,relative:E,preventScrollReset:S,viewTransition:I})};return R.createElement("form",{ref:D,method:F,action:B,onSubmit:f?w:W,..._,"data-discover":!j&&r==="render"?"true":void 0})});jy.displayName="Form";function Vy(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eg(r){let o=R.useContext(jo);return cn(o,Vy(r)),o}function zy(r,{target:o,replace:a,state:f,preventScrollReset:p,relative:x,viewTransition:y}={}){let b=ar(),w=Or(),E=Xa(r,{relative:x});return R.useCallback(S=>{if(yy(S,o)){S.preventDefault();let I=a!==void 0?a:Ba(w)===Ba(E);b(r,{replace:I,state:f,preventScrollReset:p,relative:x,viewTransition:y})}},[w,b,E,a,f,o,r,p,x,y])}var Uy=0,Wy=()=>`__${String(++Uy)}__`;function Hy(){let{router:r}=eg("useSubmit"),{basename:o}=R.useContext(wi),a=ly();return R.useCallback(async(f,p={})=>{let{action:x,method:y,encType:b,formData:w,body:E}=Cy(f,o);if(p.navigate===!1){let S=p.fetcherKey||Wy();await r.fetch(S,a,p.action||x,{preventScrollReset:p.preventScrollReset,formData:w,body:E,formMethod:p.method||y,formEncType:p.encType||b,flushSync:p.flushSync})}else await r.navigate(p.action||x,{preventScrollReset:p.preventScrollReset,formData:w,body:E,formMethod:p.method||y,formEncType:p.encType||b,replace:p.replace,state:p.state,fromRouteId:a,flushSync:p.flushSync,viewTransition:p.viewTransition})},[r,o,a])}function Gy(r,{relative:o}={}){let{basename:a}=R.useContext(wi),f=R.useContext(vi);cn(f,"useFormAction must be used inside a RouteContext");let[p]=f.matches.slice(-1),x={...Xa(r||".",{relative:o})},y=Or();if(r==null){x.search=y.search;let b=new URLSearchParams(x.search),w=b.getAll("index");if(w.some(S=>S==="")){b.delete("index"),w.filter(I=>I).forEach(I=>b.append("index",I));let S=b.toString();x.search=S?`?${S}`:""}}return(!r||r===".")&&p.route.index&&(x.search=x.search?x.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(x.pathname=x.pathname==="/"?a:Fi([a,x.pathname])),Ba(x)}function Xy(r,o={}){let a=R.useContext(Gp);cn(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:f}=eg("useViewTransitionState"),p=Xa(r,{relative:o.relative});if(!a.isTransitioning)return!1;let x=ys(a.currentLocation.pathname,f)||a.currentLocation.pathname,y=ys(a.nextLocation.pathname,f)||a.nextLocation.pathname;return mc(p.pathname,y)!=null||mc(p.pathname,x)!=null}new TextEncoder;function tg(){const r="./assets",o="/sounds/new_elevator_combined.mp3";ar();const a=R.useRef(new Audio(r+o)),[f,p]=R.useState(!1),[x,y]=R.useState(!1),[b,w]=R.useState(null),[E,S]=R.useState(!1),[I,_]=R.useState(!1);R.useEffect(()=>{const W=a.current,z=()=>{W.pause(),W.currentTime=0,y(!1),F()};return W.addEventListener("ended",z),()=>W.removeEventListener("ended",z)},[I]);function D(){w(null),a.current.load(),a.current.play().then(()=>{a.current.pause(),a.current.currentTime=0,p(!0),y(!0),S(!0),B()}).catch(W=>{console.error("Error loading audio:",W),w("Failed to load audio. Please check the file path and format."),S(!1)})}function L(){return!!(a.current&&!a.current.paused)}function B(){a.current.paused?a.current.play().catch(W=>{console.error("Error playing audio:",W),w("Failed to play audio. Please try again.")}):a.current.currentTime=0}function F(){a.current&&(a.current.pause(),a.current.currentTime=0,a.current.src="",a.current=null)}function j(W){a.current.currentTime=W,console.log(a.current.duration)}return{audioRef:a,error:b,playSound:B,loadSound:D,seekTo:j,cancelSound:F,checkSound:L,soundEnabled:E,setSoundEnabled:S,isPlaying:x}}var On;(function(r){r[r.QR_CODE=0]="QR_CODE",r[r.AZTEC=1]="AZTEC",r[r.CODABAR=2]="CODABAR",r[r.CODE_39=3]="CODE_39",r[r.CODE_93=4]="CODE_93",r[r.CODE_128=5]="CODE_128",r[r.DATA_MATRIX=6]="DATA_MATRIX",r[r.MAXICODE=7]="MAXICODE",r[r.ITF=8]="ITF",r[r.EAN_13=9]="EAN_13",r[r.EAN_8=10]="EAN_8",r[r.PDF_417=11]="PDF_417",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(On||(On={}));On.QR_CODE,On.AZTEC,On.CODABAR,On.CODE_39,On.CODE_93,On.CODE_128,On.DATA_MATRIX,On.MAXICODE,On.ITF,On.EAN_13,On.EAN_8,On.PDF_417,On.RSS_14,On.RSS_EXPANDED,On.UPC_A,On.UPC_E,On.UPC_EAN_EXTENSION;var p1;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.URL=1]="URL"})(p1||(p1={}));var xc;(function(r){r[r.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",r[r.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(xc||(xc={}));var Yy=function(){function r(){}return r.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",r.SCAN_DEFAULT_FPS=2,r.DEFAULT_DISABLE_FLIP=!1,r.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,r.DEFAULT_SUPPORTED_SCAN_TYPE=[xc.SCAN_TYPE_CAMERA,xc.SCAN_TYPE_FILE],r}(),g1;(function(r){r[r.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",r[r.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",r[r.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(g1||(g1={}));var _a={exports:{}},Ky=_a.exports,m1;function $y(){return m1||(m1=1,function(r,o){(function(a,f){f(o)})(Ky,function(a){function f(k){return k==null}var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,e){k.__proto__=e}||function(k,e){for(var n in e)e.hasOwnProperty(n)&&(k[n]=e[n])};function x(k,e){p(k,e);function n(){this.constructor=k}k.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function y(k,e){var n=Object.setPrototypeOf;n?n(k,e):k.__proto__=e}function b(k,e){e===void 0&&(e=k.constructor);var n=Error.captureStackTrace;n&&n(k,e)}var w=function(k){x(e,k);function e(n){var i=this.constructor,l=k.call(this,n)||this;return Object.defineProperty(l,"name",{value:i.name,enumerable:!1}),y(l,i.prototype),b(l),l}return e}(Error);class E extends w{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}E.kind="Exception";class S extends E{}S.kind="ArgumentException";class I extends E{}I.kind="IllegalArgumentException";class _{constructor(e){if(this.binarizer=e,e===null)throw new I("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,n){return this.binarizer.getBlackRow(e,n)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,n,i,l){const c=this.binarizer.getLuminanceSource().crop(e,n,i,l);return new _(this.binarizer.createBinarizer(c))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new _(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new _(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class D extends E{static getChecksumInstance(){return new D}}D.kind="ChecksumException";class L{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class B{static arraycopy(e,n,i,l,c){for(;c--;)i[l++]=e[n++]}static currentTimeMillis(){return Date.now()}}class F extends E{}F.kind="IndexOutOfBoundsException";class j extends F{constructor(e=void 0,n=void 0){super(n),this.index=e,this.message=n}}j.kind="ArrayIndexOutOfBoundsException";class W{static fill(e,n){for(let i=0,l=e.length;i<l;i++)e[i]=n}static fillWithin(e,n,i,l){W.rangeCheck(e.length,n,i);for(let c=n;c<i;c++)e[c]=l}static rangeCheck(e,n,i){if(n>i)throw new I("fromIndex("+n+") > toIndex("+i+")");if(n<0)throw new j(n);if(i>e)throw new j(i)}static asList(...e){return e}static create(e,n,i){return Array.from({length:e}).map(c=>Array.from({length:n}).fill(i))}static createInt32Array(e,n,i){return Array.from({length:e}).map(c=>Int32Array.from({length:n}).fill(i))}static equals(e,n){if(!e||!n||!e.length||!n.length||e.length!==n.length)return!1;for(let i=0,l=e.length;i<l;i++)if(e[i]!==n[i])return!1;return!0}static hashCode(e){if(e===null)return 0;let n=1;for(const i of e)n=31*n+i;return n}static fillUint8Array(e,n){for(let i=0;i!==e.length;i++)e[i]=n}static copyOf(e,n){return e.slice(0,n)}static copyOfUint8Array(e,n){if(e.length<=n){const i=new Uint8Array(n);return i.set(e),i}return e.slice(0,n)}static copyOfRange(e,n,i){const l=i-n,c=new Int32Array(l);return B.arraycopy(e,n,c,0,l),c}static binarySearch(e,n,i){i===void 0&&(i=W.numberComparator);let l=0,c=e.length-1;for(;l<=c;){const u=c+l>>1,h=i(n,e[u]);if(h>0)l=u+1;else if(h<0)c=u-1;else return u}return-l-1}static numberComparator(e,n){return e-n}}class z{static numberOfTrailingZeros(e){let n;if(e===0)return 32;let i=31;return n=e<<16,n!==0&&(i-=16,e=n),n=e<<8,n!==0&&(i-=8,e=n),n=e<<4,n!==0&&(i-=4,e=n),n=e<<2,n!==0&&(i-=2,e=n),i-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let n=1;return e>>>16||(n+=16,e<<=16),e>>>24||(n+=8,e<<=8),e>>>28||(n+=4,e<<=4),e>>>30||(n+=2,e<<=2),n-=e>>>31,n}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,n){return Math.trunc(e/n)}static parseInt(e,n=void 0){return parseInt(e,n)}}z.MIN_VALUE_32_BITS=-2147483648,z.MAX_VALUE=Number.MAX_SAFE_INTEGER;class J{constructor(e,n){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,n==null?this.bits=J.makeArray(e):this.bits=n)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const n=J.makeArray(e);B.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const n=this.size;if(e>=n)return n;const i=this.bits;let l=Math.floor(e/32),c=i[l];c&=~((1<<(e&31))-1);const u=i.length;for(;c===0;){if(++l===u)return n;c=i[l]}const h=l*32+z.numberOfTrailingZeros(c);return h>n?n:h}getNextUnset(e){const n=this.size;if(e>=n)return n;const i=this.bits;let l=Math.floor(e/32),c=~i[l];c&=~((1<<(e&31))-1);const u=i.length;for(;c===0;){if(++l===u)return n;c=~i[l]}const h=l*32+z.numberOfTrailingZeros(c);return h>n?n:h}setBulk(e,n){this.bits[Math.floor(e/32)]=n}setRange(e,n){if(n<e||e<0||n>this.size)throw new I;if(n===e)return;n--;const i=Math.floor(e/32),l=Math.floor(n/32),c=this.bits;for(let u=i;u<=l;u++){const h=u>i?0:e&31,C=(2<<(u<l?31:n&31))-(1<<h);c[u]|=C}}clear(){const e=this.bits.length,n=this.bits;for(let i=0;i<e;i++)n[i]=0}isRange(e,n,i){if(n<e||e<0||n>this.size)throw new I;if(n===e)return!0;n--;const l=Math.floor(e/32),c=Math.floor(n/32),u=this.bits;for(let h=l;h<=c;h++){const m=h>l?0:e&31,N=(2<<(h<c?31:n&31))-(1<<m)&4294967295;if((u[h]&N)!==(i?N:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,n){if(n<0||n>32)throw new I("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(let i=n;i>0;i--)this.appendBit((e>>i-1&1)===1)}appendBitArray(e){const n=e.size;this.ensureCapacity(this.size+n);for(let i=0;i<n;i++)this.appendBit(e.get(i))}xor(e){if(this.size!==e.size)throw new I("Sizes don't match");const n=this.bits;for(let i=0,l=n.length;i<l;i++)n[i]^=e.bits[i]}toBytes(e,n,i,l){for(let c=0;c<l;c++){let u=0;for(let h=0;h<8;h++)this.get(e)&&(u|=1<<7-h),e++;n[i+c]=u}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),i=n+1,l=this.bits;for(let c=0;c<i;c++){let u=l[c];u=u>>1&1431655765|(u&1431655765)<<1,u=u>>2&858993459|(u&858993459)<<2,u=u>>4&252645135|(u&252645135)<<4,u=u>>8&16711935|(u&16711935)<<8,u=u>>16&65535|(u&65535)<<16,e[n-c]=u}if(this.size!==i*32){const c=i*32-this.size;let u=e[0]>>>c;for(let h=1;h<i;h++){const m=e[h];u|=m<<32-c,e[h-1]=u,u=m>>>c}e[i-1]=u}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof J))return!1;const n=e;return this.size===n.size&&W.equals(this.bits,n.bits)}hashCode(){return 31*this.size+W.hashCode(this.bits)}toString(){let e="";for(let n=0,i=this.size;n<i;n++)n&7||(e+=" "),e+=this.get(n)?"X":".";return e}clone(){return new J(this.size,this.bits.slice())}}var ne;(function(k){k[k.OTHER=0]="OTHER",k[k.PURE_BARCODE=1]="PURE_BARCODE",k[k.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",k[k.TRY_HARDER=3]="TRY_HARDER",k[k.CHARACTER_SET=4]="CHARACTER_SET",k[k.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",k[k.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",k[k.ASSUME_GS1=7]="ASSUME_GS1",k[k.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",k[k.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",k[k.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(ne||(ne={}));var de=ne;class q extends E{static getFormatInstance(){return new q}}q.kind="FormatException";var ce;(function(k){k[k.Cp437=0]="Cp437",k[k.ISO8859_1=1]="ISO8859_1",k[k.ISO8859_2=2]="ISO8859_2",k[k.ISO8859_3=3]="ISO8859_3",k[k.ISO8859_4=4]="ISO8859_4",k[k.ISO8859_5=5]="ISO8859_5",k[k.ISO8859_6=6]="ISO8859_6",k[k.ISO8859_7=7]="ISO8859_7",k[k.ISO8859_8=8]="ISO8859_8",k[k.ISO8859_9=9]="ISO8859_9",k[k.ISO8859_10=10]="ISO8859_10",k[k.ISO8859_11=11]="ISO8859_11",k[k.ISO8859_13=12]="ISO8859_13",k[k.ISO8859_14=13]="ISO8859_14",k[k.ISO8859_15=14]="ISO8859_15",k[k.ISO8859_16=15]="ISO8859_16",k[k.SJIS=16]="SJIS",k[k.Cp1250=17]="Cp1250",k[k.Cp1251=18]="Cp1251",k[k.Cp1252=19]="Cp1252",k[k.Cp1256=20]="Cp1256",k[k.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",k[k.UTF8=22]="UTF8",k[k.ASCII=23]="ASCII",k[k.Big5=24]="Big5",k[k.GB18030=25]="GB18030",k[k.EUC_KR=26]="EUC_KR"})(ce||(ce={}));class Z{constructor(e,n,i,...l){this.valueIdentifier=e,this.name=i,typeof n=="number"?this.values=Int32Array.from([n]):this.values=n,this.otherEncodingNames=l,Z.VALUE_IDENTIFIER_TO_ECI.set(e,this),Z.NAME_TO_ECI.set(i,this);const c=this.values;for(let u=0,h=c.length;u!==h;u++){const m=c[u];Z.VALUES_TO_ECI.set(m,this)}for(const u of l)Z.NAME_TO_ECI.set(u,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new q("incorect value");const n=Z.VALUES_TO_ECI.get(e);if(n===void 0)throw new q("incorect value");return n}static getCharacterSetECIByName(e){const n=Z.NAME_TO_ECI.get(e);if(n===void 0)throw new q("incorect value");return n}equals(e){if(!(e instanceof Z))return!1;const n=e;return this.getName()===n.getName()}}Z.VALUE_IDENTIFIER_TO_ECI=new Map,Z.VALUES_TO_ECI=new Map,Z.NAME_TO_ECI=new Map,Z.Cp437=new Z(ce.Cp437,Int32Array.from([0,2]),"Cp437"),Z.ISO8859_1=new Z(ce.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),Z.ISO8859_2=new Z(ce.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),Z.ISO8859_3=new Z(ce.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),Z.ISO8859_4=new Z(ce.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),Z.ISO8859_5=new Z(ce.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),Z.ISO8859_6=new Z(ce.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),Z.ISO8859_7=new Z(ce.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),Z.ISO8859_8=new Z(ce.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),Z.ISO8859_9=new Z(ce.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),Z.ISO8859_10=new Z(ce.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),Z.ISO8859_11=new Z(ce.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),Z.ISO8859_13=new Z(ce.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),Z.ISO8859_14=new Z(ce.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),Z.ISO8859_15=new Z(ce.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),Z.ISO8859_16=new Z(ce.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),Z.SJIS=new Z(ce.SJIS,20,"SJIS","Shift_JIS"),Z.Cp1250=new Z(ce.Cp1250,21,"Cp1250","windows-1250"),Z.Cp1251=new Z(ce.Cp1251,22,"Cp1251","windows-1251"),Z.Cp1252=new Z(ce.Cp1252,23,"Cp1252","windows-1252"),Z.Cp1256=new Z(ce.Cp1256,24,"Cp1256","windows-1256"),Z.UnicodeBigUnmarked=new Z(ce.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),Z.UTF8=new Z(ce.UTF8,26,"UTF8","UTF-8"),Z.ASCII=new Z(ce.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),Z.Big5=new Z(ce.Big5,28,"Big5"),Z.GB18030=new Z(ce.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),Z.EUC_KR=new Z(ce.EUC_KR,30,"EUC_KR","EUC-KR");class Ae extends E{}Ae.kind="UnsupportedOperationException";class ke{static decode(e,n){const i=this.encodingName(n);return this.customDecoder?this.customDecoder(e,i):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(i)?this.decodeFallback(e,i):new TextDecoder(i).decode(e)}static shouldDecodeOnFallback(e){return!ke.isBrowser()&&e==="ISO-8859-1"}static encode(e,n){const i=this.encodingName(n);return this.customEncoder?this.customEncoder(e,i):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof Z?e:Z.getCharacterSetECIByName(e)}static decodeFallback(e,n){const i=this.encodingCharacterSet(n);if(ke.isDecodeFallbackSupported(i)){let l="";for(let c=0,u=e.length;c<u;c++){let h=e[c].toString(16);h.length<2&&(h="0"+h),l+="%"+h}return decodeURIComponent(l)}if(i.equals(Z.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Ae(`Encoding ${this.encodingName(n)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(Z.UTF8)||e.equals(Z.ISO8859_1)||e.equals(Z.ASCII)}static encodeFallback(e){const i=btoa(unescape(encodeURIComponent(e))).split(""),l=[];for(let c=0;c<i.length;c++)l.push(i[c].charCodeAt(0));return new Uint8Array(l)}}class Ie{static castAsNonUtf8Char(e,n=null){const i=n?n.getName():this.ISO88591;return ke.decode(new Uint8Array([e]),i)}static guessEncoding(e,n){if(n!=null&&n.get(de.CHARACTER_SET)!==void 0)return n.get(de.CHARACTER_SET).toString();const i=e.length;let l=!0,c=!0,u=!0,h=0,m=0,C=0,N=0,P=0,M=0,U=0,X=0,$=0,te=0,ae=0;const Se=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let Te=0;Te<i&&(l||c||u);Te++){const Ce=e[Te]&255;u&&(h>0?Ce&128?h--:u=!1:Ce&128&&(Ce&64?(h++,Ce&32?(h++,Ce&16?(h++,Ce&8?u=!1:N++):C++):m++):u=!1)),l&&(Ce>127&&Ce<160?l=!1:Ce>159&&(Ce<192||Ce===215||Ce===247)&&ae++),c&&(P>0?Ce<64||Ce===127||Ce>252?c=!1:P--:Ce===128||Ce===160||Ce>239?c=!1:Ce>160&&Ce<224?(M++,X=0,U++,U>$&&($=U)):Ce>127?(P++,U=0,X++,X>te&&(te=X)):(U=0,X=0))}return u&&h>0&&(u=!1),c&&P>0&&(c=!1),u&&(Se||m+C+N>0)?Ie.UTF8:c&&(Ie.ASSUME_SHIFT_JIS||$>=3||te>=3)?Ie.SHIFT_JIS:l&&c?$===2&&M===2||ae*10>=i?Ie.SHIFT_JIS:Ie.ISO88591:l?Ie.ISO88591:c?Ie.SHIFT_JIS:u?Ie.UTF8:Ie.PLATFORM_DEFAULT_ENCODING}static format(e,...n){let i=-1;function l(u,h,m,C,N,P){if(u==="%%")return"%";if(n[++i]===void 0)return;u=C?parseInt(C.substr(1)):void 0;let M=N?parseInt(N.substr(1)):void 0,U;switch(P){case"s":U=n[i];break;case"c":U=n[i][0];break;case"f":U=parseFloat(n[i]).toFixed(u);break;case"p":U=parseFloat(n[i]).toPrecision(u);break;case"e":U=parseFloat(n[i]).toExponential(u);break;case"x":U=parseInt(n[i]).toString(M||16);break;case"d":U=parseFloat(parseInt(n[i],M||10).toPrecision(u)).toFixed(0);break}U=typeof U=="object"?JSON.stringify(U):(+U).toString(M);let X=parseInt(m),$=m&&m[0]+""=="0"?"0":" ";for(;U.length<X;)U=h!==void 0?U+$:$+U;return U}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(c,l)}static getBytes(e,n){return ke.encode(e,n)}static getCharCode(e,n=0){return e.charCodeAt(n)}static getCharAt(e){return String.fromCharCode(e)}}Ie.SHIFT_JIS=Z.SJIS.getName(),Ie.GB2312="GB2312",Ie.ISO88591=Z.ISO8859_1.getName(),Ie.EUC_JP="EUC_JP",Ie.UTF8=Z.UTF8.getName(),Ie.PLATFORM_DEFAULT_ENCODING=Ie.UTF8,Ie.ASSUME_SHIFT_JIS=!1;class Pe{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Ie.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,n,i){for(let l=n;n<n+i;l++)this.append(e[l]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+1)}substring(e,n){return this.value.substring(e,n)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+n.length)}}class Fe{constructor(e,n,i,l){if(this.width=e,this.height=n,this.rowSize=i,this.bits=l,n==null&&(n=e),this.height=n,e<1||n<1)throw new I("Both dimensions must be greater than 0");i==null&&(i=Math.floor((e+31)/32)),this.rowSize=i,l==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const n=e.length,i=e[0].length,l=new Fe(i,n);for(let c=0;c<n;c++){const u=e[c];for(let h=0;h<i;h++)u[h]&&l.set(h,c)}return l}static parseFromString(e,n,i){if(e===null)throw new I("stringRepresentation cannot be null");const l=new Array(e.length);let c=0,u=0,h=-1,m=0,C=0;for(;C<e.length;)if(e.charAt(C)===`
`||e.charAt(C)==="\r"){if(c>u){if(h===-1)h=c-u;else if(c-u!==h)throw new I("row lengths do not match");u=c,m++}C++}else if(e.substring(C,C+n.length)===n)C+=n.length,l[c]=!0,c++;else if(e.substring(C,C+i.length)===i)C+=i.length,l[c]=!1,c++;else throw new I("illegal character encountered: "+e.substring(C));if(c>u){if(h===-1)h=c-u;else if(c-u!==h)throw new I("row lengths do not match");m++}const N=new Fe(h,m);for(let P=0;P<c;P++)l[P]&&N.set(Math.floor(P%h),Math.floor(P/h));return N}get(e,n){const i=n*this.rowSize+Math.floor(e/32);return(this.bits[i]>>>(e&31)&1)!==0}set(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]|=1<<(e&31)&4294967295}unset(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]&=~(1<<(e&31)&4294967295)}flip(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new I("input matrix dimensions do not match");const n=new J(Math.floor(this.width/32)+1),i=this.rowSize,l=this.bits;for(let c=0,u=this.height;c<u;c++){const h=c*i,m=e.getRow(c,n).getBitArray();for(let C=0;C<i;C++)l[h+C]^=m[C]}}clear(){const e=this.bits,n=e.length;for(let i=0;i<n;i++)e[i]=0}setRegion(e,n,i,l){if(n<0||e<0)throw new I("Left and top must be nonnegative");if(l<1||i<1)throw new I("Height and width must be at least 1");const c=e+i,u=n+l;if(u>this.height||c>this.width)throw new I("The region must fit inside the matrix");const h=this.rowSize,m=this.bits;for(let C=n;C<u;C++){const N=C*h;for(let P=e;P<c;P++)m[N+Math.floor(P/32)]|=1<<(P&31)&4294967295}}getRow(e,n){n==null||n.getSize()<this.width?n=new J(this.width):n.clear();const i=this.rowSize,l=this.bits,c=e*i;for(let u=0;u<i;u++)n.setBulk(u*32,l[c+u]);return n}setRow(e,n){B.arraycopy(n.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),n=this.getHeight();let i=new J(e),l=new J(e);for(let c=0,u=Math.floor((n+1)/2);c<u;c++)i=this.getRow(c,i),l=this.getRow(n-1-c,l),i.reverse(),l.reverse(),this.setRow(c,l),this.setRow(n-1-c,i)}getEnclosingRectangle(){const e=this.width,n=this.height,i=this.rowSize,l=this.bits;let c=e,u=n,h=-1,m=-1;for(let C=0;C<n;C++)for(let N=0;N<i;N++){const P=l[C*i+N];if(P!==0){if(C<u&&(u=C),C>m&&(m=C),N*32<c){let M=0;for(;!(P<<31-M&4294967295);)M++;N*32+M<c&&(c=N*32+M)}if(N*32+31>h){let M=31;for(;!(P>>>M);)M--;N*32+M>h&&(h=N*32+M)}}}return h<c||m<u?null:Int32Array.from([c,u,h-c+1,m-u+1])}getTopLeftOnBit(){const e=this.rowSize,n=this.bits;let i=0;for(;i<n.length&&n[i]===0;)i++;if(i===n.length)return null;const l=i/e;let c=i%e*32;const u=n[i];let h=0;for(;!(u<<31-h&4294967295);)h++;return c+=h,Int32Array.from([c,l])}getBottomRightOnBit(){const e=this.rowSize,n=this.bits;let i=n.length-1;for(;i>=0&&n[i]===0;)i--;if(i<0)return null;const l=Math.floor(i/e);let c=Math.floor(i%e)*32;const u=n[i];let h=31;for(;!(u>>>h);)h--;return c+=h,Int32Array.from([c,l])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof Fe))return!1;const n=e;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&W.equals(this.bits,n.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+W.hashCode(this.bits),e}toString(e="X ",n="  ",i=`
`){return this.buildToString(e,n,i)}buildToString(e,n,i){let l=new Pe;for(let c=0,u=this.height;c<u;c++){for(let h=0,m=this.width;h<m;h++)l.append(this.get(h,c)?e:n);l.append(i)}return l.toString()}clone(){return new Fe(this.width,this.height,this.rowSize,this.bits.slice())}}class ee extends E{static getNotFoundInstance(){return new ee}}ee.kind="NotFoundException";class He extends L{constructor(e){super(e),this.luminances=He.EMPTY,this.buckets=new Int32Array(He.LUMINANCE_BUCKETS)}getBlackRow(e,n){const i=this.getLuminanceSource(),l=i.getWidth();n==null||n.getSize()<l?n=new J(l):n.clear(),this.initArrays(l);const c=i.getRow(e,this.luminances),u=this.buckets;for(let m=0;m<l;m++)u[(c[m]&255)>>He.LUMINANCE_SHIFT]++;const h=He.estimateBlackPoint(u);if(l<3)for(let m=0;m<l;m++)(c[m]&255)<h&&n.set(m);else{let m=c[0]&255,C=c[1]&255;for(let N=1;N<l-1;N++){const P=c[N+1]&255;(C*4-m-P)/2<h&&n.set(N),m=C,C=P}}return n}getBlackMatrix(){const e=this.getLuminanceSource(),n=e.getWidth(),i=e.getHeight(),l=new Fe(n,i);this.initArrays(n);const c=this.buckets;for(let m=1;m<5;m++){const C=Math.floor(i*m/5),N=e.getRow(C,this.luminances),P=Math.floor(n*4/5);for(let M=Math.floor(n/5);M<P;M++){const U=N[M]&255;c[U>>He.LUMINANCE_SHIFT]++}}const u=He.estimateBlackPoint(c),h=e.getMatrix();for(let m=0;m<i;m++){const C=m*n;for(let N=0;N<n;N++)(h[C+N]&255)<u&&l.set(N,m)}return l}createBinarizer(e){return new He(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const n=this.buckets;for(let i=0;i<He.LUMINANCE_BUCKETS;i++)n[i]=0}static estimateBlackPoint(e){const n=e.length;let i=0,l=0,c=0;for(let N=0;N<n;N++)e[N]>c&&(l=N,c=e[N]),e[N]>i&&(i=e[N]);let u=0,h=0;for(let N=0;N<n;N++){const P=N-l,M=e[N]*P*P;M>h&&(u=N,h=M)}if(l>u){const N=l;l=u,u=N}if(u-l<=n/16)throw new ee;let m=u-1,C=-1;for(let N=u-1;N>l;N--){const P=N-l,M=P*P*(u-N)*(i-e[N]);M>C&&(m=N,C=M)}return m<<He.LUMINANCE_SHIFT}}He.LUMINANCE_BITS=5,He.LUMINANCE_SHIFT=8-He.LUMINANCE_BITS,He.LUMINANCE_BUCKETS=1<<He.LUMINANCE_BITS,He.EMPTY=Uint8ClampedArray.from([0]);class xe extends He{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),n=e.getWidth(),i=e.getHeight();if(n>=xe.MINIMUM_DIMENSION&&i>=xe.MINIMUM_DIMENSION){const l=e.getMatrix();let c=n>>xe.BLOCK_SIZE_POWER;n&xe.BLOCK_SIZE_MASK&&c++;let u=i>>xe.BLOCK_SIZE_POWER;i&xe.BLOCK_SIZE_MASK&&u++;const h=xe.calculateBlackPoints(l,c,u,n,i),m=new Fe(n,i);xe.calculateThresholdForBlock(l,c,u,n,i,h,m),this.matrix=m}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new xe(e)}static calculateThresholdForBlock(e,n,i,l,c,u,h){const m=c-xe.BLOCK_SIZE,C=l-xe.BLOCK_SIZE;for(let N=0;N<i;N++){let P=N<<xe.BLOCK_SIZE_POWER;P>m&&(P=m);const M=xe.cap(N,2,i-3);for(let U=0;U<n;U++){let X=U<<xe.BLOCK_SIZE_POWER;X>C&&(X=C);const $=xe.cap(U,2,n-3);let te=0;for(let Se=-2;Se<=2;Se++){const Te=u[M+Se];te+=Te[$-2]+Te[$-1]+Te[$]+Te[$+1]+Te[$+2]}const ae=te/25;xe.thresholdBlock(e,X,P,ae,l,h)}}}static cap(e,n,i){return e<n?n:e>i?i:e}static thresholdBlock(e,n,i,l,c,u){for(let h=0,m=i*c+n;h<xe.BLOCK_SIZE;h++,m+=c)for(let C=0;C<xe.BLOCK_SIZE;C++)(e[m+C]&255)<=l&&u.set(n+C,i+h)}static calculateBlackPoints(e,n,i,l,c){const u=c-xe.BLOCK_SIZE,h=l-xe.BLOCK_SIZE,m=new Array(i);for(let C=0;C<i;C++){m[C]=new Int32Array(n);let N=C<<xe.BLOCK_SIZE_POWER;N>u&&(N=u);for(let P=0;P<n;P++){let M=P<<xe.BLOCK_SIZE_POWER;M>h&&(M=h);let U=0,X=255,$=0;for(let ae=0,Se=N*l+M;ae<xe.BLOCK_SIZE;ae++,Se+=l){for(let Te=0;Te<xe.BLOCK_SIZE;Te++){const Ce=e[Se+Te]&255;U+=Ce,Ce<X&&(X=Ce),Ce>$&&($=Ce)}if($-X>xe.MIN_DYNAMIC_RANGE)for(ae++,Se+=l;ae<xe.BLOCK_SIZE;ae++,Se+=l)for(let Te=0;Te<xe.BLOCK_SIZE;Te++)U+=e[Se+Te]&255}let te=U>>xe.BLOCK_SIZE_POWER*2;if($-X<=xe.MIN_DYNAMIC_RANGE&&(te=X/2,C>0&&P>0)){const ae=(m[C-1][P]+2*m[C][P-1]+m[C-1][P-1])/4;X<ae&&(te=ae)}m[C][P]=te}}return m}}xe.BLOCK_SIZE_POWER=3,xe.BLOCK_SIZE=1<<xe.BLOCK_SIZE_POWER,xe.BLOCK_SIZE_MASK=xe.BLOCK_SIZE-1,xe.MINIMUM_DIMENSION=xe.BLOCK_SIZE*5,xe.MIN_DYNAMIC_RANGE=24;class he{constructor(e,n){this.width=e,this.height=n}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,n,i,l){throw new Ae("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Ae("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Ae("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let n=new Pe;for(let i=0;i<this.height;i++){const l=this.getRow(i,e);for(let c=0;c<this.width;c++){const u=l[c]&255;let h;u<64?h="#":u<128?h="+":u<192?h=".":h=" ",n.append(h)}n.append(`
`)}return n.toString()}}class Le extends he{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,n){const i=this.delegate.getRow(e,n),l=this.getWidth();for(let c=0;c<l;c++)i[c]=255-(i[c]&255);return i}getMatrix(){const e=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n);for(let l=0;l<n;l++)i[l]=255-(e[l]&255);return i}isCropSupported(){return this.delegate.isCropSupported()}crop(e,n,i,l){return new Le(this.delegate.crop(e,n,i,l))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Le(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Le(this.delegate.rotateCounterClockwise45())}}class fe extends he{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=fe.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const n=e.getContext("2d").getImageData(0,0,e.width,e.height);return fe.toGrayscaleBuffer(n.data,e.width,e.height)}static toGrayscaleBuffer(e,n,i){const l=new Uint8ClampedArray(n*i);for(let c=0,u=0,h=e.length;c<h;c+=4,u++){let m;if(e[c+3]===0)m=255;else{const N=e[c],P=e[c+1],M=e[c+2];m=306*N+601*P+117*M+512>>10}l[u]=m}return l}getRow(e,n){if(e<0||e>=this.getHeight())throw new I("Requested row is outside the image: "+e);const i=this.getWidth(),l=e*i;return n===null?n=this.buffer.slice(l,l+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(l,l+i))),n}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,n,i,l){return super.crop(e,n,i,l),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const n=this.getTempCanvasElement(),i=n.getContext("2d"),l=e*fe.DEGREE_TO_RADIANS,c=this.canvas.width,u=this.canvas.height,h=Math.ceil(Math.abs(Math.cos(l))*c+Math.abs(Math.sin(l))*u),m=Math.ceil(Math.abs(Math.sin(l))*c+Math.abs(Math.cos(l))*u);return n.width=h,n.height=m,i.translate(h/2,m/2),i.rotate(l),i.drawImage(this.canvas,c/-2,u/-2),this.buffer=fe.makeBufferFromCanvasImageData(n),this}invert(){return new Le(this)}}fe.DEGREE_TO_RADIANS=Math.PI/180;class K{constructor(e,n,i){this.deviceId=e,this.label=n,this.kind="videoinput",this.groupId=i||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var H=(globalThis||Jl||self||window||void 0)&&(globalThis||Jl||self||window||void 0).__awaiter||function(k,e,n,i){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(N){try{C(i.next(N))}catch(P){u(P)}}function m(N){try{C(i.throw(N))}catch(P){u(P)}}function C(N){N.done?c(N.value):l(N.value).then(h,m)}C((i=i.apply(k,e||[])).next())})};class pe{constructor(e,n=500,i){this.reader=e,this.timeBetweenScansMillis=n,this._hints=i,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return H(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),n=[];for(const i of e){const l=i.kind==="video"?"videoinput":i.kind;if(l!=="videoinput")continue;const c=i.deviceId||i.id,u=i.label||`Video device ${n.length+1}`,h=i.groupId,m={deviceId:c,label:u,kind:l,groupId:h};n.push(m)}return n})}getVideoInputDevices(){return H(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(n=>new K(n.deviceId,n.label))})}findDeviceById(e){return H(this,void 0,void 0,function*(){const n=yield this.listVideoInputDevices();return n?n.find(i=>i.deviceId===e):null})}decodeFromInputVideoDevice(e,n){return H(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,n)})}decodeOnceFromVideoDevice(e,n){return H(this,void 0,void 0,function*(){this.reset();let i;e?i={deviceId:{exact:e}}:i={facingMode:"environment"};const l={video:i};return yield this.decodeOnceFromConstraints(l,n)})}decodeOnceFromConstraints(e,n){return H(this,void 0,void 0,function*(){const i=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(i,n)})}decodeOnceFromStream(e,n){return H(this,void 0,void 0,function*(){this.reset();const i=yield this.attachStreamToVideo(e,n);return yield this.decodeOnce(i)})}decodeFromInputVideoDeviceContinuously(e,n,i){return H(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,n,i)})}decodeFromVideoDevice(e,n,i){return H(this,void 0,void 0,function*(){let l;e?l={deviceId:{exact:e}}:l={facingMode:"environment"};const c={video:l};return yield this.decodeFromConstraints(c,n,i)})}decodeFromConstraints(e,n,i){return H(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(l,n,i)})}decodeFromStream(e,n,i){return H(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(e,n);return yield this.decodeContinuously(l,i)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,n){return H(this,void 0,void 0,function*(){const i=this.prepareVideoElement(n);return this.addVideoSource(i,e),this.videoElement=i,this.stream=e,yield this.playVideoOnLoadAsync(i),i})}playVideoOnLoadAsync(e){return new Promise((n,i)=>this.playVideoOnLoad(e,()=>n()))}playVideoOnLoad(e,n){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",n),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return H(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,n){const i=document.getElementById(e);if(!i)throw new S(`element with id '${e}' not found`);if(i.nodeName.toLowerCase()!==n.toLowerCase())throw new S(`element with id '${e}' must be an ${n} element`);return i}decodeFromImage(e,n){if(!e&&!n)throw new S("either imageElement with a src set or an url must be provided");return n&&!e?this.decodeFromImageUrl(n):this.decodeFromImageElement(e)}decodeFromVideo(e,n){if(!e&&!n)throw new S("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,n,i){if(e===void 0&&n===void 0)throw new S("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrlContinuously(n,i):this.decodeFromVideoElementContinuously(e,i)}decodeFromImageElement(e){if(!e)throw new S("An image element must be provided.");this.reset();const n=this.prepareImageElement(e);this.imageElement=n;let i;return this.isImageLoaded(n)?i=this.decodeOnce(n,!1,!0):i=this._decodeOnLoadImage(n),i}decodeFromVideoElement(e){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(n)}decodeFromVideoElementContinuously(e,n){const i=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(i,n)}_decodeFromVideoElementSetup(e){if(!e)throw new S("A video element must be provided.");this.reset();const n=this.prepareVideoElement(e);return this.videoElement=n,n}decodeFromImageUrl(e){if(!e)throw new S("An URL must be provided.");this.reset();const n=this.prepareImageElement();this.imageElement=n;const i=this._decodeOnLoadImage(n);return n.src=e,i}decodeFromVideoUrl(e){if(!e)throw new S("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),i=this.decodeFromVideoElement(n);return n.src=e,i}decodeFromVideoUrlContinuously(e,n){if(!e)throw new S("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),l=this.decodeFromVideoElementContinuously(i,n);return i.src=e,l}_decodeOnLoadImage(e){return new Promise((n,i)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(n,i),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return H(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,n){return H(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,n)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let n;return typeof e>"u"&&(n=document.createElement("img"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(n=e),n}prepareVideoElement(e){let n;return!e&&typeof document<"u"&&(n=document.createElement("video"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(n=e),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n}decodeOnce(e,n=!0,i=!0){this._stopAsyncDecode=!1;const l=(c,u)=>{if(this._stopAsyncDecode){u(new ee("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const h=this.decode(e);c(h)}catch(h){const m=n&&h instanceof ee,N=(h instanceof D||h instanceof q)&&i;if(m||N)return setTimeout(l,this._timeBetweenDecodingAttempts,c,u);u(h)}};return new Promise((c,u)=>l(c,u))}decodeContinuously(e,n){this._stopContinuousDecode=!1;const i=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const l=this.decode(e);n(l,null),setTimeout(i,this.timeBetweenScansMillis)}catch(l){n(null,l);const c=l instanceof D||l instanceof q,u=l instanceof ee;(c||u)&&setTimeout(i,this._timeBetweenDecodingAttempts)}};i()}decode(e){const n=this.createBinaryBitmap(e);return this.decodeBitmap(n)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,n,i){n||(n={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),i||(i=this.captureCanvasContext),i.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}drawImageOnCanvas(e,n,i=this.captureCanvasContext){n||(n={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),i||(i=this.captureCanvasContext),i.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const n=this.getCaptureCanvas(e),i=new fe(n),l=new xe(i);return new _(l)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const i=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=i}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const n=this.createCaptureCanvas(e);this.captureCanvas=n}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const n=document.createElement("canvas");let i,l;return typeof e<"u"&&(e instanceof HTMLVideoElement?(i=e.videoWidth,l=e.videoHeight):e instanceof HTMLImageElement&&(i=e.naturalWidth||e.width,l=e.naturalHeight||e.height)),n.style.width=i+"px",n.style.height=l+"px",n.width=i,n.height=l,n}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,n){try{e.srcObject=n}catch{e.src=URL.createObjectURL(n)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class Oe{constructor(e,n,i=n==null?0:8*n.length,l,c,u=B.currentTimeMillis()){this.text=e,this.rawBytes=n,this.numBits=i,this.resultPoints=l,this.format=c,this.timestamp=u,this.text=e,this.rawBytes=n,i==null?this.numBits=n==null?0:8*n.length:this.numBits=i,this.resultPoints=l,this.format=c,this.resultMetadata=null,u==null?this.timestamp=B.currentTimeMillis():this.timestamp=u}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,n){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,n)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const n=this.resultPoints;if(n===null)this.resultPoints=e;else if(e!==null&&e.length>0){const i=new Array(n.length+e.length);B.arraycopy(n,0,i,0,n.length),B.arraycopy(e,0,i,n.length,e.length),this.resultPoints=i}}getTimestamp(){return this.timestamp}toString(){return this.text}}var we;(function(k){k[k.AZTEC=0]="AZTEC",k[k.CODABAR=1]="CODABAR",k[k.CODE_39=2]="CODE_39",k[k.CODE_93=3]="CODE_93",k[k.CODE_128=4]="CODE_128",k[k.DATA_MATRIX=5]="DATA_MATRIX",k[k.EAN_8=6]="EAN_8",k[k.EAN_13=7]="EAN_13",k[k.ITF=8]="ITF",k[k.MAXICODE=9]="MAXICODE",k[k.PDF_417=10]="PDF_417",k[k.QR_CODE=11]="QR_CODE",k[k.RSS_14=12]="RSS_14",k[k.RSS_EXPANDED=13]="RSS_EXPANDED",k[k.UPC_A=14]="UPC_A",k[k.UPC_E=15]="UPC_E",k[k.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(we||(we={}));var oe=we,Me;(function(k){k[k.OTHER=0]="OTHER",k[k.ORIENTATION=1]="ORIENTATION",k[k.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",k[k.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",k[k.ISSUE_NUMBER=4]="ISSUE_NUMBER",k[k.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",k[k.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",k[k.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",k[k.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",k[k.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",k[k.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Me||(Me={}));var Ne=Me;class Ve{constructor(e,n,i,l,c=-1,u=-1){this.rawBytes=e,this.text=n,this.byteSegments=i,this.ecLevel=l,this.structuredAppendSequenceNumber=c,this.structuredAppendParity=u,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class me{exp(e){return this.expTable[e]}log(e){if(e===0)throw new I;return this.logTable[e]}static addOrSubtract(e,n){return e^n}}class Xe{constructor(e,n){if(n.length===0)throw new I;this.field=e;const i=n.length;if(i>1&&n[0]===0){let l=1;for(;l<i&&n[l]===0;)l++;l===i?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(i-l),B.arraycopy(n,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const n=this.coefficients;let i;if(e===1){i=0;for(let u=0,h=n.length;u!==h;u++){const m=n[u];i=me.addOrSubtract(i,m)}return i}i=n[0];const l=n.length,c=this.field;for(let u=1;u<l;u++)i=me.addOrSubtract(c.multiply(e,i),n[u]);return i}addOrSubtract(e){if(!this.field.equals(e.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,i=e.coefficients;if(n.length>i.length){const u=n;n=i,i=u}let l=new Int32Array(i.length);const c=i.length-n.length;B.arraycopy(i,0,l,0,c);for(let u=c;u<i.length;u++)l[u]=me.addOrSubtract(n[u-c],i[u]);return new Xe(this.field,l)}multiply(e){if(!this.field.equals(e.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const n=this.coefficients,i=n.length,l=e.coefficients,c=l.length,u=new Int32Array(i+c-1),h=this.field;for(let m=0;m<i;m++){const C=n[m];for(let N=0;N<c;N++)u[m+N]=me.addOrSubtract(u[m+N],h.multiply(C,l[N]))}return new Xe(h,u)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const n=this.coefficients.length,i=this.field,l=new Int32Array(n),c=this.coefficients;for(let u=0;u<n;u++)l[u]=i.multiply(c[u],e);return new Xe(i,l)}multiplyByMonomial(e,n){if(e<0)throw new I;if(n===0)return this.field.getZero();const i=this.coefficients,l=i.length,c=new Int32Array(l+e),u=this.field;for(let h=0;h<l;h++)c[h]=u.multiply(i[h],n);return new Xe(u,c)}divide(e){if(!this.field.equals(e.field))throw new I("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new I("Divide by 0");const n=this.field;let i=n.getZero(),l=this;const c=e.getCoefficient(e.getDegree()),u=n.inverse(c);for(;l.getDegree()>=e.getDegree()&&!l.isZero();){const h=l.getDegree()-e.getDegree(),m=n.multiply(l.getCoefficient(l.getDegree()),u),C=e.multiplyByMonomial(h,m),N=n.buildMonomial(h,m);i=i.addOrSubtract(N),l=l.addOrSubtract(C)}return[i,l]}toString(){let e="";for(let n=this.getDegree();n>=0;n--){let i=this.getCoefficient(n);if(i!==0){if(i<0?(e+=" - ",i=-i):e.length>0&&(e+=" + "),n===0||i!==1){const l=this.field.log(i);l===0?e+="1":l===1?e+="a":(e+="a^",e+=l)}n!==0&&(n===1?e+="x":(e+="x^",e+=n))}}return e}}class ut extends E{}ut.kind="ArithmeticException";class De extends me{constructor(e,n,i){super(),this.primitive=e,this.size=n,this.generatorBase=i;const l=new Int32Array(n);let c=1;for(let h=0;h<n;h++)l[h]=c,c*=2,c>=n&&(c^=e,c&=n-1);this.expTable=l;const u=new Int32Array(n);for(let h=0;h<n-1;h++)u[l[h]]=h;this.logTable=u,this.zero=new Xe(this,Int32Array.from([0])),this.one=new Xe(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new I;if(n===0)return this.zero;const i=new Int32Array(e+1);return i[0]=n,new Xe(this,i)}inverse(e){if(e===0)throw new ut;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+z.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}De.AZTEC_DATA_12=new De(4201,4096,1),De.AZTEC_DATA_10=new De(1033,1024,1),De.AZTEC_DATA_6=new De(67,64,1),De.AZTEC_PARAM=new De(19,16,1),De.QR_CODE_FIELD_256=new De(285,256,0),De.DATA_MATRIX_FIELD_256=new De(301,256,1),De.AZTEC_DATA_8=De.DATA_MATRIX_FIELD_256,De.MAXICODE_FIELD_64=De.AZTEC_DATA_6;class it extends E{}it.kind="ReedSolomonException";class zt extends E{}zt.kind="IllegalStateException";class jt{constructor(e){this.field=e}decode(e,n){const i=this.field,l=new Xe(i,e),c=new Int32Array(n);let u=!0;for(let U=0;U<n;U++){const X=l.evaluateAt(i.exp(U+i.getGeneratorBase()));c[c.length-1-U]=X,X!==0&&(u=!1)}if(u)return;const h=new Xe(i,c),m=this.runEuclideanAlgorithm(i.buildMonomial(n,1),h,n),C=m[0],N=m[1],P=this.findErrorLocations(C),M=this.findErrorMagnitudes(N,P);for(let U=0;U<P.length;U++){const X=e.length-1-i.log(P[U]);if(X<0)throw new it("Bad error location");e[X]=De.addOrSubtract(e[X],M[U])}}runEuclideanAlgorithm(e,n,i){if(e.getDegree()<n.getDegree()){const U=e;e=n,n=U}const l=this.field;let c=e,u=n,h=l.getZero(),m=l.getOne();for(;u.getDegree()>=(i/2|0);){let U=c,X=h;if(c=u,h=m,c.isZero())throw new it("r_{i-1} was zero");u=U;let $=l.getZero();const te=c.getCoefficient(c.getDegree()),ae=l.inverse(te);for(;u.getDegree()>=c.getDegree()&&!u.isZero();){const Se=u.getDegree()-c.getDegree(),Te=l.multiply(u.getCoefficient(u.getDegree()),ae);$=$.addOrSubtract(l.buildMonomial(Se,Te)),u=u.addOrSubtract(c.multiplyByMonomial(Se,Te))}if(m=$.multiply(h).addOrSubtract(X),u.getDegree()>=c.getDegree())throw new zt("Division algorithm failed to reduce polynomial?")}const C=m.getCoefficient(0);if(C===0)throw new it("sigmaTilde(0) was zero");const N=l.inverse(C),P=m.multiplyScalar(N),M=u.multiplyScalar(N);return[P,M]}findErrorLocations(e){const n=e.getDegree();if(n===1)return Int32Array.from([e.getCoefficient(1)]);const i=new Int32Array(n);let l=0;const c=this.field;for(let u=1;u<c.getSize()&&l<n;u++)e.evaluateAt(u)===0&&(i[l]=c.inverse(u),l++);if(l!==n)throw new it("Error locator degree does not match number of roots");return i}findErrorMagnitudes(e,n){const i=n.length,l=new Int32Array(i),c=this.field;for(let u=0;u<i;u++){const h=c.inverse(n[u]);let m=1;for(let C=0;C<i;C++)if(u!==C){const N=c.multiply(n[C],h),P=N&1?N&-2:N|1;m=c.multiply(m,P)}l[u]=c.multiply(e.evaluateAt(h),c.inverse(m)),c.getGeneratorBase()!==0&&(l[u]=c.multiply(l[u],h))}return l}}var Pt;(function(k){k[k.UPPER=0]="UPPER",k[k.LOWER=1]="LOWER",k[k.MIXED=2]="MIXED",k[k.DIGIT=3]="DIGIT",k[k.PUNCT=4]="PUNCT",k[k.BINARY=5]="BINARY"})(Pt||(Pt={}));class vt{decode(e){this.ddata=e;let n=e.getBits(),i=this.extractBits(n),l=this.correctBits(i),c=vt.convertBoolArrayToByteArray(l),u=vt.getEncodedData(l),h=new Ve(c,u,null,null);return h.setNumBits(l.length),h}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let n=e.length,i=Pt.UPPER,l=Pt.UPPER,c="",u=0;for(;u<n;)if(l===Pt.BINARY){if(n-u<5)break;let h=vt.readCode(e,u,5);if(u+=5,h===0){if(n-u<11)break;h=vt.readCode(e,u,11)+31,u+=11}for(let m=0;m<h;m++){if(n-u<8){u=n;break}const C=vt.readCode(e,u,8);c+=Ie.castAsNonUtf8Char(C),u+=8}l=i}else{let h=l===Pt.DIGIT?4:5;if(n-u<h)break;let m=vt.readCode(e,u,h);u+=h;let C=vt.getCharacter(l,m);C.startsWith("CTRL_")?(i=l,l=vt.getTable(C.charAt(5)),C.charAt(6)==="L"&&(i=l)):(c+=C,l=i)}return c}static getTable(e){switch(e){case"L":return Pt.LOWER;case"P":return Pt.PUNCT;case"M":return Pt.MIXED;case"D":return Pt.DIGIT;case"B":return Pt.BINARY;case"U":default:return Pt.UPPER}}static getCharacter(e,n){switch(e){case Pt.UPPER:return vt.UPPER_TABLE[n];case Pt.LOWER:return vt.LOWER_TABLE[n];case Pt.MIXED:return vt.MIXED_TABLE[n];case Pt.PUNCT:return vt.PUNCT_TABLE[n];case Pt.DIGIT:return vt.DIGIT_TABLE[n];default:throw new zt("Bad table")}}correctBits(e){let n,i;this.ddata.getNbLayers()<=2?(i=6,n=De.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(i=8,n=De.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(i=10,n=De.AZTEC_DATA_10):(i=12,n=De.AZTEC_DATA_12);let l=this.ddata.getNbDatablocks(),c=e.length/i;if(c<l)throw new q;let u=e.length%i,h=new Int32Array(c);for(let M=0;M<c;M++,u+=i)h[M]=vt.readCode(e,u,i);try{new jt(n).decode(h,c-l)}catch(M){throw new q(M)}let m=(1<<i)-1,C=0;for(let M=0;M<l;M++){let U=h[M];if(U===0||U===m)throw new q;(U===1||U===m-1)&&C++}let N=new Array(l*i-C),P=0;for(let M=0;M<l;M++){let U=h[M];if(U===1||U===m-1)N.fill(U>1,P,P+i-1),P+=i-1;else for(let X=i-1;X>=0;--X)N[P++]=(U&1<<X)!==0}return N}extractBits(e){let n=this.ddata.isCompact(),i=this.ddata.getNbLayers(),l=(n?11:14)+i*4,c=new Int32Array(l),u=new Array(this.totalBitsInLayer(i,n));if(n)for(let h=0;h<c.length;h++)c[h]=h;else{let h=l+1+2*z.truncDivision(z.truncDivision(l,2)-1,15),m=l/2,C=z.truncDivision(h,2);for(let N=0;N<m;N++){let P=N+z.truncDivision(N,15);c[m-N-1]=C-P-1,c[m+N]=C+P+1}}for(let h=0,m=0;h<i;h++){let C=(i-h)*4+(n?9:12),N=h*2,P=l-1-N;for(let M=0;M<C;M++){let U=M*2;for(let X=0;X<2;X++)u[m+U+X]=e.get(c[N+X],c[N+M]),u[m+2*C+U+X]=e.get(c[N+M],c[P-X]),u[m+4*C+U+X]=e.get(c[P-X],c[P-M]),u[m+6*C+U+X]=e.get(c[P-M],c[N+X])}m+=C*8}return u}static readCode(e,n,i){let l=0;for(let c=n;c<n+i;c++)l<<=1,e[c]&&(l|=1);return l}static readByte(e,n){let i=e.length-n;return i>=8?vt.readCode(e,n,8):vt.readCode(e,n,i)<<8-i}static convertBoolArrayToByteArray(e){let n=new Uint8Array((e.length+7)/8);for(let i=0;i<n.length;i++)n[i]=vt.readByte(e,8*i);return n}totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}vt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],vt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],vt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],vt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],vt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class pt{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,n,i,l){const c=e-i,u=n-l;return Math.sqrt(c*c+u*u)}static sum(e){let n=0;for(let i=0,l=e.length;i!==l;i++){const c=e[i];n+=c}return n}}class xn{static floatToIntBits(e){return e}}xn.MAX_VALUE=Number.MAX_SAFE_INTEGER;class _e{constructor(e,n){this.x=e,this.y=n}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof _e){const n=e;return this.x===n.x&&this.y===n.y}return!1}hashCode(){return 31*xn.floatToIntBits(this.x)+xn.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const n=this.distance(e[0],e[1]),i=this.distance(e[1],e[2]),l=this.distance(e[0],e[2]);let c,u,h;if(i>=n&&i>=l?(u=e[0],c=e[1],h=e[2]):l>=i&&l>=n?(u=e[1],c=e[0],h=e[2]):(u=e[2],c=e[0],h=e[1]),this.crossProductZ(c,u,h)<0){const m=c;c=h,h=m}e[0]=c,e[1]=u,e[2]=h}static distance(e,n){return pt.distance(e.x,e.y,n.x,n.y)}static crossProductZ(e,n,i){const l=n.x,c=n.y;return(i.x-l)*(e.y-c)-(i.y-c)*(e.x-l)}}class zn{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class Ct extends zn{constructor(e,n,i,l,c){super(e,n),this.compact=i,this.nbDatablocks=l,this.nbLayers=c}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Ye{constructor(e,n,i,l){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),n==null&&(n=Ye.INIT_SIZE),i==null&&(i=e.getWidth()/2|0),l==null&&(l=e.getHeight()/2|0);const c=n/2|0;if(this.leftInit=i-c,this.rightInit=i+c,this.upInit=l-c,this.downInit=l+c,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ee}detect(){let e=this.leftInit,n=this.rightInit,i=this.upInit,l=this.downInit,c=!1,u=!0,h=!1,m=!1,C=!1,N=!1,P=!1;const M=this.width,U=this.height;for(;u;){u=!1;let X=!0;for(;(X||!m)&&n<M;)X=this.containsBlackPoint(i,l,n,!1),X?(n++,u=!0,m=!0):m||n++;if(n>=M){c=!0;break}let $=!0;for(;($||!C)&&l<U;)$=this.containsBlackPoint(e,n,l,!0),$?(l++,u=!0,C=!0):C||l++;if(l>=U){c=!0;break}let te=!0;for(;(te||!N)&&e>=0;)te=this.containsBlackPoint(i,l,e,!1),te?(e--,u=!0,N=!0):N||e--;if(e<0){c=!0;break}let ae=!0;for(;(ae||!P)&&i>=0;)ae=this.containsBlackPoint(e,n,i,!0),ae?(i--,u=!0,P=!0):P||i--;if(i<0){c=!0;break}u&&(h=!0)}if(!c&&h){const X=n-e;let $=null;for(let Te=1;$===null&&Te<X;Te++)$=this.getBlackPointOnSegment(e,l-Te,e+Te,l);if($==null)throw new ee;let te=null;for(let Te=1;te===null&&Te<X;Te++)te=this.getBlackPointOnSegment(e,i+Te,e+Te,i);if(te==null)throw new ee;let ae=null;for(let Te=1;ae===null&&Te<X;Te++)ae=this.getBlackPointOnSegment(n,i+Te,n-Te,i);if(ae==null)throw new ee;let Se=null;for(let Te=1;Se===null&&Te<X;Te++)Se=this.getBlackPointOnSegment(n,l-Te,n-Te,l);if(Se==null)throw new ee;return this.centerEdges(Se,$,ae,te)}else throw new ee}getBlackPointOnSegment(e,n,i,l){const c=pt.round(pt.distance(e,n,i,l)),u=(i-e)/c,h=(l-n)/c,m=this.image;for(let C=0;C<c;C++){const N=pt.round(e+C*u),P=pt.round(n+C*h);if(m.get(N,P))return new _e(N,P)}return null}centerEdges(e,n,i,l){const c=e.getX(),u=e.getY(),h=n.getX(),m=n.getY(),C=i.getX(),N=i.getY(),P=l.getX(),M=l.getY(),U=Ye.CORR;return c<this.width/2?[new _e(P-U,M+U),new _e(h+U,m+U),new _e(C-U,N-U),new _e(c+U,u-U)]:[new _e(P+U,M+U),new _e(h+U,m-U),new _e(C-U,N+U),new _e(c-U,u-U)]}containsBlackPoint(e,n,i,l){const c=this.image;if(l){for(let u=e;u<=n;u++)if(c.get(u,i))return!0}else for(let u=e;u<=n;u++)if(c.get(i,u))return!0;return!1}}Ye.INIT_SIZE=10,Ye.CORR=1;class et{static checkAndNudgePoints(e,n){const i=e.getWidth(),l=e.getHeight();let c=!0;for(let u=0;u<n.length&&c;u+=2){const h=Math.floor(n[u]),m=Math.floor(n[u+1]);if(h<-1||h>i||m<-1||m>l)throw new ee;c=!1,h===-1?(n[u]=0,c=!0):h===i&&(n[u]=i-1,c=!0),m===-1?(n[u+1]=0,c=!0):m===l&&(n[u+1]=l-1,c=!0)}c=!0;for(let u=n.length-2;u>=0&&c;u-=2){const h=Math.floor(n[u]),m=Math.floor(n[u+1]);if(h<-1||h>i||m<-1||m>l)throw new ee;c=!1,h===-1?(n[u]=0,c=!0):h===i&&(n[u]=i-1,c=!0),m===-1?(n[u+1]=0,c=!0):m===l&&(n[u+1]=l-1,c=!0)}}}class gt{constructor(e,n,i,l,c,u,h,m,C){this.a11=e,this.a21=n,this.a31=i,this.a12=l,this.a22=c,this.a32=u,this.a13=h,this.a23=m,this.a33=C}static quadrilateralToQuadrilateral(e,n,i,l,c,u,h,m,C,N,P,M,U,X,$,te){const ae=gt.quadrilateralToSquare(e,n,i,l,c,u,h,m);return gt.squareToQuadrilateral(C,N,P,M,U,X,$,te).times(ae)}transformPoints(e){const n=e.length,i=this.a11,l=this.a12,c=this.a13,u=this.a21,h=this.a22,m=this.a23,C=this.a31,N=this.a32,P=this.a33;for(let M=0;M<n;M+=2){const U=e[M],X=e[M+1],$=c*U+m*X+P;e[M]=(i*U+u*X+C)/$,e[M+1]=(l*U+h*X+N)/$}}transformPointsWithValues(e,n){const i=this.a11,l=this.a12,c=this.a13,u=this.a21,h=this.a22,m=this.a23,C=this.a31,N=this.a32,P=this.a33,M=e.length;for(let U=0;U<M;U++){const X=e[U],$=n[U],te=c*X+m*$+P;e[U]=(i*X+u*$+C)/te,n[U]=(l*X+h*$+N)/te}}static squareToQuadrilateral(e,n,i,l,c,u,h,m){const C=e-i+c-h,N=n-l+u-m;if(C===0&&N===0)return new gt(i-e,c-i,e,l-n,u-l,n,0,0,1);{const P=i-c,M=h-c,U=l-u,X=m-u,$=P*X-M*U,te=(C*X-M*N)/$,ae=(P*N-C*U)/$;return new gt(i-e+te*i,h-e+ae*h,e,l-n+te*l,m-n+ae*m,n,te,ae,1)}}static quadrilateralToSquare(e,n,i,l,c,u,h,m){return gt.squareToQuadrilateral(e,n,i,l,c,u,h,m).buildAdjoint()}buildAdjoint(){return new gt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new gt(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class Ut extends et{sampleGrid(e,n,i,l,c,u,h,m,C,N,P,M,U,X,$,te,ae,Se,Te){const Ce=gt.quadrilateralToQuadrilateral(l,c,u,h,m,C,N,P,M,U,X,$,te,ae,Se,Te);return this.sampleGridWithTransform(e,n,i,Ce)}sampleGridWithTransform(e,n,i,l){if(n<=0||i<=0)throw new ee;const c=new Fe(n,i),u=new Float32Array(2*n);for(let h=0;h<i;h++){const m=u.length,C=h+.5;for(let N=0;N<m;N+=2)u[N]=N/2+.5,u[N+1]=C;l.transformPoints(u),et.checkAndNudgePoints(e,u);try{for(let N=0;N<m;N+=2)e.get(Math.floor(u[N]),Math.floor(u[N+1]))&&c.set(N/2,h)}catch{throw new ee}}return c}}class kt{static setGridSampler(e){kt.gridSampler=e}static getInstance(){return kt.gridSampler}}kt.gridSampler=new Ut;class At{constructor(e,n){this.x=e,this.y=n}toResultPoint(){return new _e(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class nn{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let n=this.getMatrixCenter(),i=this.getBullsEyeCorners(n);if(e){let u=i[0];i[0]=i[2],i[2]=u}this.extractParameters(i);let l=this.sampleGrid(this.image,i[this.shift%4],i[(this.shift+1)%4],i[(this.shift+2)%4],i[(this.shift+3)%4]),c=this.getMatrixCornerPoints(i);return new Ct(l,c,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new ee;let n=2*this.nbCenterLayers,i=new Int32Array([this.sampleLine(e[0],e[1],n),this.sampleLine(e[1],e[2],n),this.sampleLine(e[2],e[3],n),this.sampleLine(e[3],e[0],n)]);this.shift=this.getRotation(i,n);let l=0;for(let u=0;u<4;u++){let h=i[(this.shift+u)%4];this.compact?(l<<=7,l+=h>>1&127):(l<<=10,l+=(h>>2&992)+(h>>1&31))}let c=this.getCorrectedParameterData(l,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)}getRotation(e,n){let i=0;e.forEach((l,c,u)=>{let h=(l>>n-2<<1)+(l&1);i=(i<<3)+h}),i=((i&1)<<11)+(i>>1);for(let l=0;l<4;l++)if(z.bitCount(i^this.EXPECTED_CORNER_BITS[l])<=2)return l;throw new ee}getCorrectedParameterData(e,n){let i,l;n?(i=7,l=2):(i=10,l=4);let c=i-l,u=new Int32Array(i);for(let m=i-1;m>=0;--m)u[m]=e&15,e>>=4;try{new jt(De.AZTEC_PARAM).decode(u,c)}catch{throw new ee}let h=0;for(let m=0;m<l;m++)h=(h<<4)+u[m];return h}getBullsEyeCorners(e){let n=e,i=e,l=e,c=e,u=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let P=this.getFirstDifferent(n,u,1,-1),M=this.getFirstDifferent(i,u,1,1),U=this.getFirstDifferent(l,u,-1,1),X=this.getFirstDifferent(c,u,-1,-1);if(this.nbCenterLayers>2){let $=this.distancePoint(X,P)*this.nbCenterLayers/(this.distancePoint(c,n)*(this.nbCenterLayers+2));if($<.75||$>1.25||!this.isWhiteOrBlackRectangle(P,M,U,X))break}n=P,i=M,l=U,c=X,u=!u}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ee;this.compact=this.nbCenterLayers===5;let h=new _e(n.getX()+.5,n.getY()-.5),m=new _e(i.getX()+.5,i.getY()+.5),C=new _e(l.getX()-.5,l.getY()+.5),N=new _e(c.getX()-.5,c.getY()-.5);return this.expandSquare([h,m,C,N],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,n,i,l;try{let h=new Ye(this.image).detect();e=h[0],n=h[1],i=h[2],l=h[3]}catch{let m=this.image.getWidth()/2,C=this.image.getHeight()/2;e=this.getFirstDifferent(new At(m+7,C-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new At(m+7,C+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new At(m-7,C+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new At(m-7,C-7),!1,-1,-1).toResultPoint()}let c=pt.round((e.getX()+l.getX()+n.getX()+i.getX())/4),u=pt.round((e.getY()+l.getY()+n.getY()+i.getY())/4);try{let h=new Ye(this.image,15,c,u).detect();e=h[0],n=h[1],i=h[2],l=h[3]}catch{e=this.getFirstDifferent(new At(c+7,u-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new At(c+7,u+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new At(c-7,u+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new At(c-7,u-7),!1,-1,-1).toResultPoint()}return c=pt.round((e.getX()+l.getX()+n.getX()+i.getX())/4),u=pt.round((e.getY()+l.getY()+n.getY()+i.getY())/4),new At(c,u)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,n,i,l,c){let u=kt.getInstance(),h=this.getDimension(),m=h/2-this.nbCenterLayers,C=h/2+this.nbCenterLayers;return u.sampleGrid(e,h,h,m,m,C,m,C,C,m,C,n.getX(),n.getY(),i.getX(),i.getY(),l.getX(),l.getY(),c.getX(),c.getY())}sampleLine(e,n,i){let l=0,c=this.distanceResultPoint(e,n),u=c/i,h=e.getX(),m=e.getY(),C=u*(n.getX()-e.getX())/c,N=u*(n.getY()-e.getY())/c;for(let P=0;P<i;P++)this.image.get(pt.round(h+P*C),pt.round(m+P*N))&&(l|=1<<i-P-1);return l}isWhiteOrBlackRectangle(e,n,i,l){let c=3;e=new At(e.getX()-c,e.getY()+c),n=new At(n.getX()-c,n.getY()-c),i=new At(i.getX()+c,i.getY()-c),l=new At(l.getX()+c,l.getY()+c);let u=this.getColor(l,e);if(u===0)return!1;let h=this.getColor(e,n);return h!==u||(h=this.getColor(n,i),h!==u)?!1:(h=this.getColor(i,l),h===u)}getColor(e,n){let i=this.distancePoint(e,n),l=(n.getX()-e.getX())/i,c=(n.getY()-e.getY())/i,u=0,h=e.getX(),m=e.getY(),C=this.image.get(e.getX(),e.getY()),N=Math.ceil(i);for(let M=0;M<N;M++)h+=l,m+=c,this.image.get(pt.round(h),pt.round(m))!==C&&u++;let P=u/i;return P>.1&&P<.9?0:P<=.1===C?1:-1}getFirstDifferent(e,n,i,l){let c=e.getX()+i,u=e.getY()+l;for(;this.isValid(c,u)&&this.image.get(c,u)===n;)c+=i,u+=l;for(c-=i,u-=l;this.isValid(c,u)&&this.image.get(c,u)===n;)c+=i;for(c-=i;this.isValid(c,u)&&this.image.get(c,u)===n;)u+=l;return u-=l,new At(c,u)}expandSquare(e,n,i){let l=i/(2*n),c=e[0].getX()-e[2].getX(),u=e[0].getY()-e[2].getY(),h=(e[0].getX()+e[2].getX())/2,m=(e[0].getY()+e[2].getY())/2,C=new _e(h+l*c,m+l*u),N=new _e(h-l*c,m-l*u);c=e[1].getX()-e[3].getX(),u=e[1].getY()-e[3].getY(),h=(e[1].getX()+e[3].getX())/2,m=(e[1].getY()+e[3].getY())/2;let P=new _e(h+l*c,m+l*u),M=new _e(h-l*c,m-l*u);return[C,P,N,M]}isValid(e,n){return e>=0&&e<this.image.getWidth()&&n>0&&n<this.image.getHeight()}isValidPoint(e){let n=pt.round(e.getX()),i=pt.round(e.getY());return this.isValid(n,i)}distancePoint(e,n){return pt.distance(e.getX(),e.getY(),n.getX(),n.getY())}distanceResultPoint(e,n){return pt.distance(e.getX(),e.getY(),n.getX(),n.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(z.truncDivision(this.nbLayers-4,8)+1)+15}}class Ht{decode(e,n=null){let i=null,l=new nn(e.getBlackMatrix()),c=null,u=null;try{let N=l.detectMirror(!1);c=N.getPoints(),this.reportFoundResultPoints(n,c),u=new vt().decode(N)}catch(N){i=N}if(u==null)try{let N=l.detectMirror(!0);c=N.getPoints(),this.reportFoundResultPoints(n,c),u=new vt().decode(N)}catch(N){throw i??N}let h=new Oe(u.getText(),u.getRawBytes(),u.getNumBits(),c,oe.AZTEC,B.currentTimeMillis()),m=u.getByteSegments();m!=null&&h.putMetadata(Ne.BYTE_SEGMENTS,m);let C=u.getECLevel();return C!=null&&h.putMetadata(Ne.ERROR_CORRECTION_LEVEL,C),h}reportFoundResultPoints(e,n){if(e!=null){let i=e.get(de.NEED_RESULT_POINT_CALLBACK);i!=null&&n.forEach((l,c,u)=>{i.foundPossibleResultPoint(l)})}}reset(){}}class un extends pe{constructor(e=500){super(new Ht,e)}}class je{decode(e,n){try{return this.doDecode(e,n)}catch{if(n&&n.get(de.TRY_HARDER)===!0&&e.isRotateSupported()){const c=e.rotateCounterClockwise(),u=this.doDecode(c,n),h=u.getResultMetadata();let m=270;h!==null&&h.get(Ne.ORIENTATION)===!0&&(m=m+h.get(Ne.ORIENTATION)%360),u.putMetadata(Ne.ORIENTATION,m);const C=u.getResultPoints();if(C!==null){const N=c.getHeight();for(let P=0;P<C.length;P++)C[P]=new _e(N-C[P].getY()-1,C[P].getX())}return u}else throw new ee}}reset(){}doDecode(e,n){const i=e.getWidth(),l=e.getHeight();let c=new J(i);const u=n&&n.get(de.TRY_HARDER)===!0,h=Math.max(1,l>>(u?8:5));let m;u?m=l:m=15;const C=Math.trunc(l/2);for(let N=0;N<m;N++){const P=Math.trunc((N+1)/2),M=(N&1)===0,U=C+h*(M?P:-P);if(U<0||U>=l)break;try{c=e.getBlackRow(U,c)}catch{continue}for(let X=0;X<2;X++){if(X===1&&(c.reverse(),n&&n.get(de.NEED_RESULT_POINT_CALLBACK)===!0)){const $=new Map;n.forEach((te,ae)=>$.set(ae,te)),$.delete(de.NEED_RESULT_POINT_CALLBACK),n=$}try{const $=this.decodeRow(U,c,n);if(X===1){$.putMetadata(Ne.ORIENTATION,180);const te=$.getResultPoints();te!==null&&(te[0]=new _e(i-te[0].getX()-1,te[0].getY()),te[1]=new _e(i-te[1].getX()-1,te[1].getY()))}return $}catch{}}}throw new ee}static recordPattern(e,n,i){const l=i.length;for(let C=0;C<l;C++)i[C]=0;const c=e.getSize();if(n>=c)throw new ee;let u=!e.get(n),h=0,m=n;for(;m<c;){if(e.get(m)!==u)i[h]++;else{if(++h===l)break;i[h]=1,u=!u}m++}if(!(h===l||h===l-1&&m===c))throw new ee}static recordPatternInReverse(e,n,i){let l=i.length,c=e.get(n);for(;n>0&&l>=0;)e.get(--n)!==c&&(l--,c=!c);if(l>=0)throw new ee;je.recordPattern(e,n+1,i)}static patternMatchVariance(e,n,i){const l=e.length;let c=0,u=0;for(let C=0;C<l;C++)c+=e[C],u+=n[C];if(c<u)return Number.POSITIVE_INFINITY;const h=c/u;i*=h;let m=0;for(let C=0;C<l;C++){const N=e[C],P=n[C]*h,M=N>P?N-P:P-N;if(M>i)return Number.POSITIVE_INFINITY;m+=M}return m/c}}class ge extends je{static findStartPattern(e){const n=e.getSize(),i=e.getNextSet(0);let l=0,c=Int32Array.from([0,0,0,0,0,0]),u=i,h=!1;const m=6;for(let C=i;C<n;C++)if(e.get(C)!==h)c[l]++;else{if(l===m-1){let N=ge.MAX_AVG_VARIANCE,P=-1;for(let M=ge.CODE_START_A;M<=ge.CODE_START_C;M++){const U=je.patternMatchVariance(c,ge.CODE_PATTERNS[M],ge.MAX_INDIVIDUAL_VARIANCE);U<N&&(N=U,P=M)}if(P>=0&&e.isRange(Math.max(0,u-(C-u)/2),u,!1))return Int32Array.from([u,C,P]);u+=c[0]+c[1],c=c.slice(2,c.length-1),c[l-1]=0,c[l]=0,l--}else l++;c[l]=1,h=!h}throw new ee}static decodeCode(e,n,i){je.recordPattern(e,i,n);let l=ge.MAX_AVG_VARIANCE,c=-1;for(let u=0;u<ge.CODE_PATTERNS.length;u++){const h=ge.CODE_PATTERNS[u],m=this.patternMatchVariance(n,h,ge.MAX_INDIVIDUAL_VARIANCE);m<l&&(l=m,c=u)}if(c>=0)return c;throw new ee}decodeRow(e,n,i){const l=i&&i.get(de.ASSUME_GS1)===!0,c=ge.findStartPattern(n),u=c[2];let h=0;const m=new Uint8Array(20);m[h++]=u;let C;switch(u){case ge.CODE_START_A:C=ge.CODE_CODE_A;break;case ge.CODE_START_B:C=ge.CODE_CODE_B;break;case ge.CODE_START_C:C=ge.CODE_CODE_C;break;default:throw new q}let N=!1,P=!1,M="",U=c[0],X=c[1];const $=Int32Array.from([0,0,0,0,0,0]);let te=0,ae=0,Se=u,Te=0,Ce=!0,bt=!1,ht=!1;for(;!N;){const Qr=P;switch(P=!1,te=ae,ae=ge.decodeCode(n,$,X),m[h++]=ae,ae!==ge.CODE_STOP&&(Ce=!0),ae!==ge.CODE_STOP&&(Te++,Se+=Te*ae),U=X,X+=$.reduce((ts,ra)=>ts+ra,0),ae){case ge.CODE_START_A:case ge.CODE_START_B:case ge.CODE_START_C:throw new q}switch(C){case ge.CODE_CODE_A:if(ae<64)ht===bt?M+=String.fromCharCode(32+ae):M+=String.fromCharCode(32+ae+128),ht=!1;else if(ae<96)ht===bt?M+=String.fromCharCode(ae-64):M+=String.fromCharCode(ae+64),ht=!1;else switch(ae!==ge.CODE_STOP&&(Ce=!1),ae){case ge.CODE_FNC_1:l&&(M.length===0?M+="]C1":M+="");break;case ge.CODE_FNC_2:case ge.CODE_FNC_3:break;case ge.CODE_FNC_4_A:!bt&&ht?(bt=!0,ht=!1):bt&&ht?(bt=!1,ht=!1):ht=!0;break;case ge.CODE_SHIFT:P=!0,C=ge.CODE_CODE_B;break;case ge.CODE_CODE_B:C=ge.CODE_CODE_B;break;case ge.CODE_CODE_C:C=ge.CODE_CODE_C;break;case ge.CODE_STOP:N=!0;break}break;case ge.CODE_CODE_B:if(ae<96)ht===bt?M+=String.fromCharCode(32+ae):M+=String.fromCharCode(32+ae+128),ht=!1;else switch(ae!==ge.CODE_STOP&&(Ce=!1),ae){case ge.CODE_FNC_1:l&&(M.length===0?M+="]C1":M+="");break;case ge.CODE_FNC_2:case ge.CODE_FNC_3:break;case ge.CODE_FNC_4_B:!bt&&ht?(bt=!0,ht=!1):bt&&ht?(bt=!1,ht=!1):ht=!0;break;case ge.CODE_SHIFT:P=!0,C=ge.CODE_CODE_A;break;case ge.CODE_CODE_A:C=ge.CODE_CODE_A;break;case ge.CODE_CODE_C:C=ge.CODE_CODE_C;break;case ge.CODE_STOP:N=!0;break}break;case ge.CODE_CODE_C:if(ae<100)ae<10&&(M+="0"),M+=ae;else switch(ae!==ge.CODE_STOP&&(Ce=!1),ae){case ge.CODE_FNC_1:l&&(M.length===0?M+="]C1":M+="");break;case ge.CODE_CODE_A:C=ge.CODE_CODE_A;break;case ge.CODE_CODE_B:C=ge.CODE_CODE_B;break;case ge.CODE_STOP:N=!0;break}break}Qr&&(C=C===ge.CODE_CODE_A?ge.CODE_CODE_B:ge.CODE_CODE_A)}const tr=X-U;if(X=n.getNextUnset(X),!n.isRange(X,Math.min(n.getSize(),X+(X-U)/2),!1))throw new ee;if(Se-=Te*te,Se%103!==te)throw new D;const _r=M.length;if(_r===0)throw new ee;_r>0&&Ce&&(C===ge.CODE_CODE_C?M=M.substring(0,_r-2):M=M.substring(0,_r-1));const vn=(c[1]+c[0])/2,Ft=U+tr/2,sn=m.length,Xn=new Uint8Array(sn);for(let Qr=0;Qr<sn;Qr++)Xn[Qr]=m[Qr];const Ii=[new _e(vn,e),new _e(Ft,e)];return new Oe(M,Xn,0,Ii,oe.CODE_128,new Date().getTime())}}ge.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ge.MAX_AVG_VARIANCE=.25,ge.MAX_INDIVIDUAL_VARIANCE=.7,ge.CODE_SHIFT=98,ge.CODE_CODE_C=99,ge.CODE_CODE_B=100,ge.CODE_CODE_A=101,ge.CODE_FNC_1=102,ge.CODE_FNC_2=97,ge.CODE_FNC_3=96,ge.CODE_FNC_4_A=101,ge.CODE_FNC_4_B=100,ge.CODE_START_A=103,ge.CODE_START_B=104,ge.CODE_START_C=105,ge.CODE_STOP=106;class lt extends je{constructor(e=!1,n=!1){super(),this.usingCheckDigit=e,this.extendedMode=n,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,n,i){let l=this.counters;l.fill(0),this.decodeRowResult="";let c=lt.findAsteriskPattern(n,l),u=n.getNextSet(c[1]),h=n.getSize(),m,C;do{lt.recordPattern(n,u,l);let $=lt.toNarrowWidePattern(l);if($<0)throw new ee;m=lt.patternToChar($),this.decodeRowResult+=m,C=u;for(let te of l)u+=te;u=n.getNextSet(u)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let N=0;for(let $ of l)N+=$;let P=u-C-N;if(u!==h&&P*2<N)throw new ee;if(this.usingCheckDigit){let $=this.decodeRowResult.length-1,te=0;for(let ae=0;ae<$;ae++)te+=lt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ae));if(this.decodeRowResult.charAt($)!==lt.ALPHABET_STRING.charAt(te%43))throw new D;this.decodeRowResult=this.decodeRowResult.substring(0,$)}if(this.decodeRowResult.length===0)throw new ee;let M;this.extendedMode?M=lt.decodeExtended(this.decodeRowResult):M=this.decodeRowResult;let U=(c[1]+c[0])/2,X=C+N/2;return new Oe(M,null,0,[new _e(U,e),new _e(X,e)],oe.CODE_39,new Date().getTime())}static findAsteriskPattern(e,n){let i=e.getSize(),l=e.getNextSet(0),c=0,u=l,h=!1,m=n.length;for(let C=l;C<i;C++)if(e.get(C)!==h)n[c]++;else{if(c===m-1){if(this.toNarrowWidePattern(n)===lt.ASTERISK_ENCODING&&e.isRange(Math.max(0,u-Math.floor((C-u)/2)),u,!1))return[u,C];u+=n[0]+n[1],n.copyWithin(0,2,2+c-1),n[c-1]=0,n[c]=0,c--}else c++;n[c]=1,h=!h}throw new ee}static toNarrowWidePattern(e){let n=e.length,i=0,l;do{let c=2147483647;for(let m of e)m<c&&m>i&&(c=m);i=c,l=0;let u=0,h=0;for(let m=0;m<n;m++){let C=e[m];C>i&&(h|=1<<n-1-m,l++,u+=C)}if(l===3){for(let m=0;m<n&&l>0;m++){let C=e[m];if(C>i&&(l--,C*2>=u))return-1}return h}}while(l>3);return-1}static patternToChar(e){for(let n=0;n<lt.CHARACTER_ENCODINGS.length;n++)if(lt.CHARACTER_ENCODINGS[n]===e)return lt.ALPHABET_STRING.charAt(n);if(e===lt.ASTERISK_ENCODING)return"*";throw new ee}static decodeExtended(e){let n=e.length,i="";for(let l=0;l<n;l++){let c=e.charAt(l);if(c==="+"||c==="$"||c==="%"||c==="/"){let u=e.charAt(l+1),h="\0";switch(c){case"+":if(u>="A"&&u<="Z")h=String.fromCharCode(u.charCodeAt(0)+32);else throw new q;break;case"$":if(u>="A"&&u<="Z")h=String.fromCharCode(u.charCodeAt(0)-64);else throw new q;break;case"%":if(u>="A"&&u<="E")h=String.fromCharCode(u.charCodeAt(0)-38);else if(u>="F"&&u<="J")h=String.fromCharCode(u.charCodeAt(0)-11);else if(u>="K"&&u<="O")h=String.fromCharCode(u.charCodeAt(0)+16);else if(u>="P"&&u<="T")h=String.fromCharCode(u.charCodeAt(0)+43);else if(u==="U")h="\0";else if(u==="V")h="@";else if(u==="W")h="`";else if(u==="X"||u==="Y"||u==="Z")h="";else throw new q;break;case"/":if(u>="A"&&u<="O")h=String.fromCharCode(u.charCodeAt(0)-32);else if(u==="Z")h=":";else throw new q;break}i+=h,l++}else i+=c}return i}}lt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",lt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],lt.ASTERISK_ENCODING=148;class st extends je{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,n,i){let l=this.decodeStart(n),c=this.decodeEnd(n),u=new Pe;st.decodeMiddle(n,l[1],c[0],u);let h=u.toString(),m=null;i!=null&&(m=i.get(de.ALLOWED_LENGTHS)),m==null&&(m=st.DEFAULT_ALLOWED_LENGTHS);let C=h.length,N=!1,P=0;for(let X of m){if(C===X){N=!0;break}X>P&&(P=X)}if(!N&&C>P&&(N=!0),!N)throw new q;const M=[new _e(l[1],e),new _e(c[0],e)];return new Oe(h,null,0,M,oe.ITF,new Date().getTime())}static decodeMiddle(e,n,i,l){let c=new Int32Array(10),u=new Int32Array(5),h=new Int32Array(5);for(c.fill(0),u.fill(0),h.fill(0);n<i;){je.recordPattern(e,n,c);for(let C=0;C<5;C++){let N=2*C;u[C]=c[N],h[C]=c[N+1]}let m=st.decodeDigit(u);l.append(m.toString()),m=this.decodeDigit(h),l.append(m.toString()),c.forEach(function(C){n+=C})}}decodeStart(e){let n=st.skipWhiteSpace(e),i=st.findGuardPattern(e,n,st.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(e,i[0]),i}validateQuietZone(e,n){let i=this.narrowLineWidth*10;i=i<n?i:n;for(let l=n-1;i>0&&l>=0&&!e.get(l);l--)i--;if(i!==0)throw new ee}static skipWhiteSpace(e){const n=e.getSize(),i=e.getNextSet(0);if(i===n)throw new ee;return i}decodeEnd(e){e.reverse();try{let n=st.skipWhiteSpace(e),i;try{i=st.findGuardPattern(e,n,st.END_PATTERN_REVERSED[0])}catch(c){c instanceof ee&&(i=st.findGuardPattern(e,n,st.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,i[0]);let l=i[0];return i[0]=e.getSize()-i[1],i[1]=e.getSize()-l,i}finally{e.reverse()}}static findGuardPattern(e,n,i){let l=i.length,c=new Int32Array(l),u=e.getSize(),h=!1,m=0,C=n;c.fill(0);for(let N=n;N<u;N++)if(e.get(N)!==h)c[m]++;else{if(m===l-1){if(je.patternMatchVariance(c,i,st.MAX_INDIVIDUAL_VARIANCE)<st.MAX_AVG_VARIANCE)return[C,N];C+=c[0]+c[1],B.arraycopy(c,2,c,0,m-1),c[m-1]=0,c[m]=0,m--}else m++;c[m]=1,h=!h}throw new ee}static decodeDigit(e){let n=st.MAX_AVG_VARIANCE,i=-1,l=st.PATTERNS.length;for(let c=0;c<l;c++){let u=st.PATTERNS[c],h=je.patternMatchVariance(e,u,st.MAX_INDIVIDUAL_VARIANCE);h<n?(n=h,i=c):h===n&&(i=-1)}if(i>=0)return i%10;throw new ee}}st.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],st.MAX_AVG_VARIANCE=.38,st.MAX_INDIVIDUAL_VARIANCE=.5,st.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],st.START_PATTERN=Int32Array.from([1,1,1,1]),st.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class _t extends je{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let n=!1,i,l=0,c=Int32Array.from([0,0,0]);for(;!n;){c=Int32Array.from([0,0,0]),i=_t.findGuardPattern(e,l,!1,this.START_END_PATTERN,c);let u=i[0];l=i[1];let h=u-(l-u);h>=0&&(n=e.isRange(h,u,!1))}return i}static checkChecksum(e){return _t.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let i=parseInt(e.charAt(n-1),10);return _t.getStandardUPCEANChecksum(e.substring(0,n-1))===i}static getStandardUPCEANChecksum(e){let n=e.length,i=0;for(let l=n-1;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;i+=c}i*=3;for(let l=n-2;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;i+=c}return(1e3-i)%10}static decodeEnd(e,n){return _t.findGuardPattern(e,n,!1,_t.START_END_PATTERN,new Int32Array(_t.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,n,i,l){return this.findGuardPattern(e,n,i,l,new Int32Array(l.length))}static findGuardPattern(e,n,i,l,c){let u=e.getSize();n=i?e.getNextUnset(n):e.getNextSet(n);let h=0,m=n,C=l.length,N=i;for(let P=n;P<u;P++)if(e.get(P)!==N)c[h]++;else{if(h===C-1){if(je.patternMatchVariance(c,l,_t.MAX_INDIVIDUAL_VARIANCE)<_t.MAX_AVG_VARIANCE)return Int32Array.from([m,P]);m+=c[0]+c[1];let M=c.slice(2,c.length-1);for(let U=0;U<h-1;U++)c[U]=M[U];c[h-1]=0,c[h]=0,h--}else h++;c[h]=1,N=!N}throw new ee}static decodeDigit(e,n,i,l){this.recordPattern(e,i,n);let c=this.MAX_AVG_VARIANCE,u=-1,h=l.length;for(let m=0;m<h;m++){let C=l[m],N=je.patternMatchVariance(n,C,_t.MAX_INDIVIDUAL_VARIANCE);N<c&&(c=N,u=m)}if(u>=0)return u;throw new ee}}_t.MAX_AVG_VARIANCE=.48,_t.MAX_INDIVIDUAL_VARIANCE=.7,_t.START_END_PATTERN=Int32Array.from([1,1,1]),_t.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),_t.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),_t.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Dn{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,i){let l=this.decodeRowStringBuffer,c=this.decodeMiddle(n,i,l),u=l.toString(),h=Dn.parseExtensionString(u),m=[new _e((i[0]+i[1])/2,e),new _e(c,e)],C=new Oe(u,null,0,m,oe.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&C.putAllMetadata(h),C}decodeMiddle(e,n,i){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u=n[1],h=0;for(let C=0;C<5&&u<c;C++){let N=_t.decodeDigit(e,l,u,_t.L_AND_G_PATTERNS);i+=String.fromCharCode(48+N%10);for(let P of l)u+=P;N>=10&&(h|=1<<4-C),C!==4&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(i.length!==5)throw new ee;let m=this.determineCheckDigit(h);if(Dn.extensionChecksum(i.toString())!==m)throw new ee;return u}static extensionChecksum(e){let n=e.length,i=0;for(let l=n-2;l>=0;l-=2)i+=e.charAt(l).charCodeAt(0)-48;i*=3;for(let l=n-1;l>=0;l-=2)i+=e.charAt(l).charCodeAt(0)-48;return i*=3,i%10}determineCheckDigit(e){for(let n=0;n<10;n++)if(e===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new ee}static parseExtensionString(e){if(e.length!==5)return null;let n=Dn.parseExtension5String(e);return n==null?null:new Map([[Ne.SUGGESTED_PRICE,n]])}static parseExtension5String(e){let n;switch(e.charAt(0)){case"0":n="";break;case"5":n="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n="";break}let i=parseInt(e.substring(1)),l=(i/100).toString(),c=i%100,u=c<10?"0"+c:c.toString();return n+l+"."+u}}class Dr{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,i){let l=this.decodeRowStringBuffer,c=this.decodeMiddle(n,i,l),u=l.toString(),h=Dr.parseExtensionString(u),m=[new _e((i[0]+i[1])/2,e),new _e(c,e)],C=new Oe(u,null,0,m,oe.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&C.putAllMetadata(h),C}decodeMiddle(e,n,i){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u=n[1],h=0;for(let m=0;m<2&&u<c;m++){let C=_t.decodeDigit(e,l,u,_t.L_AND_G_PATTERNS);i+=String.fromCharCode(48+C%10);for(let N of l)u+=N;C>=10&&(h|=1<<1-m),m!==1&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(i.length!==2)throw new ee;if(parseInt(i.toString())%4!==h)throw new ee;return u}static parseExtensionString(e){return e.length!==2?null:new Map([[Ne.ISSUE_NUMBER,parseInt(e)]])}}class Un{static decodeRow(e,n,i){let l=_t.findGuardPattern(n,i,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Dn().decodeRow(e,n,l)}catch{return new Dr().decodeRow(e,n,l)}}}Un.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class at extends _t{constructor(){super(),this.decodeRowStringBuffer="",at.L_AND_G_PATTERNS=at.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let n=at.L_PATTERNS[e-10],i=new Int32Array(n.length);for(let l=0;l<n.length;l++)i[l]=n[n.length-l-1];at.L_AND_G_PATTERNS[e]=i}}decodeRow(e,n,i){let l=at.findStartGuardPattern(n),c=i==null?null:i.get(de.NEED_RESULT_POINT_CALLBACK);if(c!=null){const Ce=new _e((l[0]+l[1])/2,e);c.foundPossibleResultPoint(Ce)}let u=this.decodeMiddle(n,l,this.decodeRowStringBuffer),h=u.rowOffset,m=u.resultString;if(c!=null){const Ce=new _e(h,e);c.foundPossibleResultPoint(Ce)}let C=this.decodeEnd(n,h);if(c!=null){const Ce=new _e((C[0]+C[1])/2,e);c.foundPossibleResultPoint(Ce)}let N=C[1],P=N+(N-C[0]);if(P>=n.getSize()||!n.isRange(N,P,!1))throw new ee;let M=m.toString();if(M.length<8)throw new q;if(!at.checkChecksum(M))throw new D;let U=(l[1]+l[0])/2,X=(C[1]+C[0])/2,$=this.getBarcodeFormat(),te=[new _e(U,e),new _e(X,e)],ae=new Oe(M,null,0,te,$,new Date().getTime()),Se=0;try{let Ce=Un.decodeRow(e,n,C[1]);ae.putMetadata(Ne.UPC_EAN_EXTENSION,Ce.getText()),ae.putAllMetadata(Ce.getResultMetadata()),ae.addResultPoints(Ce.getResultPoints()),Se=Ce.getText().length}catch{}let Te=i==null?null:i.get(de.ALLOWED_EAN_EXTENSIONS);if(Te!=null){let Ce=!1;for(let bt in Te)if(Se.toString()===bt){Ce=!0;break}if(!Ce)throw new ee}return ae}decodeEnd(e,n){return at.findGuardPattern(e,n,!1,at.START_END_PATTERN,new Int32Array(at.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return at.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let i=parseInt(e.charAt(n-1),10);return at.getStandardUPCEANChecksum(e.substring(0,n-1))===i}static getStandardUPCEANChecksum(e){let n=e.length,i=0;for(let l=n-1;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;i+=c}i*=3;for(let l=n-2;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;i+=c}return(1e3-i)%10}}class Mn extends at{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,i){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u=n[1],h=0;for(let C=0;C<6&&u<c;C++){let N=at.decodeDigit(e,l,u,at.L_AND_G_PATTERNS);i+=String.fromCharCode(48+N%10);for(let P of l)u+=P;N>=10&&(h|=1<<5-C)}i=Mn.determineFirstDigit(i,h),u=at.findGuardPattern(e,u,!0,at.MIDDLE_PATTERN,new Int32Array(at.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<6&&u<c;C++){let N=at.decodeDigit(e,l,u,at.L_PATTERNS);i+=String.fromCharCode(48+N);for(let P of l)u+=P}return{rowOffset:u,resultString:i}}getBarcodeFormat(){return oe.EAN_13}static determineFirstDigit(e,n){for(let i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return e=String.fromCharCode(48+i)+e,e;throw new ee}}Mn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class As extends at{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,i){const l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u=n[1];for(let m=0;m<4&&u<c;m++){let C=at.decodeDigit(e,l,u,at.L_PATTERNS);i+=String.fromCharCode(48+C);for(let N of l)u+=N}u=at.findGuardPattern(e,u,!0,at.MIDDLE_PATTERN,new Int32Array(at.MIDDLE_PATTERN.length).fill(0))[1];for(let m=0;m<4&&u<c;m++){let C=at.decodeDigit(e,l,u,at.L_PATTERNS);i+=String.fromCharCode(48+C);for(let N of l)u+=N}return{rowOffset:u,resultString:i}}getBarcodeFormat(){return oe.EAN_8}}class Ui extends at{constructor(){super(...arguments),this.ean13Reader=new Mn}getBarcodeFormat(){return oe.UPC_A}decode(e,n){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,n,i))}decodeMiddle(e,n,i){return this.ean13Reader.decodeMiddle(e,n,i)}maybeReturnResult(e){let n=e.getText();if(n.charAt(0)==="0"){let i=new Oe(n.substring(1),null,null,e.getResultPoints(),oe.UPC_A);return e.getResultMetadata()!=null&&i.putAllMetadata(e.getResultMetadata()),i}else throw new ee}reset(){this.ean13Reader.reset()}}class qn extends at{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,n,i){const l=this.decodeMiddleCounters.map(C=>C);l[0]=0,l[1]=0,l[2]=0,l[3]=0;const c=e.getSize();let u=n[1],h=0;for(let C=0;C<6&&u<c;C++){const N=qn.decodeDigit(e,l,u,qn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+N%10);for(let P of l)u+=P;N>=10&&(h|=1<<5-C)}let m=qn.determineNumSysAndCheckDigit(i,h);return{rowOffset:u,resultString:m}}decodeEnd(e,n){return qn.findGuardPatternWithoutCounters(e,n,!0,qn.MIDDLE_END_PATTERN)}checkChecksum(e){return at.checkChecksum(qn.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,n){for(let i=0;i<=1;i++)for(let l=0;l<10;l++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][l]){let c=String.fromCharCode(48+i),u=String.fromCharCode(48+l);return c+e+u}throw ee.getNotFoundInstance()}getBarcodeFormat(){return oe.UPC_E}static convertUPCEtoUPCA(e){const n=e.slice(1,7).split("").map(c=>c.charCodeAt(0)),i=new Pe;i.append(e.charAt(0));let l=n[5];switch(l){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(l),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(l);break}return e.length>=8&&i.append(e.charAt(7)),i.toString()}}qn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),qn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Wi extends je{constructor(e){super();let n=e==null?null:e.get(de.POSSIBLE_FORMATS),i=[];f(n)?(i.push(new Mn),i.push(new Ui),i.push(new As),i.push(new qn)):(n.indexOf(oe.EAN_13)>-1&&i.push(new Mn),n.indexOf(oe.UPC_A)>-1&&i.push(new Ui),n.indexOf(oe.EAN_8)>-1&&i.push(new As),n.indexOf(oe.UPC_E)>-1&&i.push(new qn)),this.readers=i}decodeRow(e,n,i){for(let l of this.readers)try{const c=l.decodeRow(e,n,i),u=c.getBarcodeFormat()===oe.EAN_13&&c.getText().charAt(0)==="0",h=i==null?null:i.get(de.POSSIBLE_FORMATS),m=h==null||h.includes(oe.UPC_A);if(u&&m){const C=c.getRawBytes(),N=new Oe(c.getText().substring(1),C,C?C.length:null,c.getResultPoints(),oe.UPC_A);return N.putAllMetadata(c.getResultMetadata()),N}return c}catch{}throw new ee}reset(){for(let e of this.readers)e.reset()}}class rn extends je{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,n){for(let i=0;i<n.length;i++)if(je.patternMatchVariance(e,n[i],rn.MAX_INDIVIDUAL_VARIANCE)<rn.MAX_AVG_VARIANCE)return i;throw new ee}static count(e){return pt.sum(new Int32Array(e))}static increment(e,n){let i=0,l=n[0];for(let c=1;c<e.length;c++)n[c]>l&&(l=n[c],i=c);e[i]++}static decrement(e,n){let i=0,l=n[0];for(let c=1;c<e.length;c++)n[c]<l&&(l=n[c],i=c);e[i]--}static isFinderPattern(e){let n=e[0]+e[1],i=n+e[2]+e[3],l=n/i;if(l>=rn.MIN_FINDER_PATTERN_RATIO&&l<=rn.MAX_FINDER_PATTERN_RATIO){let c=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;for(let h of e)h>u&&(u=h),h<c&&(c=h);return u<10*c}return!1}}rn.MAX_AVG_VARIANCE=.2,rn.MAX_INDIVIDUAL_VARIANCE=.45,rn.MIN_FINDER_PATTERN_RATIO=9.5/12,rn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Mr{constructor(e,n){this.value=e,this.checksumPortion=n}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Mr))return!1;const n=e;return this.value===n.value&&this.checksumPortion===n.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class si{constructor(e,n,i,l,c){this.value=e,this.startEnd=n,this.value=e,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new _e(i,c)),this.resultPoints.push(new _e(l,c))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof si))return!1;const n=e;return this.value===n.value}hashCode(){return this.value}}class An{constructor(){}static getRSSvalue(e,n,i){let l=0;for(let m of e)l+=m;let c=0,u=0,h=e.length;for(let m=0;m<h-1;m++){let C;for(C=1,u|=1<<m;C<e[m];C++,u&=~(1<<m)){let N=An.combins(l-C-1,h-m-2);if(i&&u===0&&l-C-(h-m-1)>=h-m-1&&(N-=An.combins(l-C-(h-m),h-m-2)),h-m-1>1){let P=0;for(let M=l-C-(h-m-2);M>n;M--)P+=An.combins(l-C-M-1,h-m-3);N-=P*(h-1-m)}else l-C>n&&N--;c+=N}l-=C}return c}static combins(e,n){let i,l;e-n>n?(l=n,i=e-n):(l=e-n,i=n);let c=1,u=1;for(let h=e;h>i;h--)c*=h,u<=l&&(c/=u,u++);for(;u<=l;)c/=u,u++;return c}}class Hi{static buildBitArray(e){let n=e.length*2-1;e[e.length-1].getRightChar()==null&&(n-=1);let i=12*n,l=new J(i),c=0,h=e[0].getRightChar().getValue();for(let m=11;m>=0;--m)h&1<<m&&l.set(c),c++;for(let m=1;m<e.length;++m){let C=e[m],N=C.getLeftChar().getValue();for(let P=11;P>=0;--P)N&1<<P&&l.set(c),c++;if(C.getRightChar()!=null){let P=C.getRightChar().getValue();for(let M=11;M>=0;--M)P&1<<M&&l.set(c),c++}}return l}}class lr{constructor(e,n){n?this.decodedInformation=null:(this.finished=e,this.decodedInformation=n)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class oi{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class dn extends oi{constructor(e,n){super(e),this.value=n}getValue(){return this.value}isFNC1(){return this.value===dn.FNC1}}dn.FNC1="$";class cr extends oi{constructor(e,n,i){super(e),i?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=n}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Tn extends oi{constructor(e,n,i){if(super(e),n<0||n>10||i<0||i>10)throw new q;this.firstDigit=n,this.secondDigit=i}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Tn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Tn.FNC1}isAnyFNC1(){return this.firstDigit===Tn.FNC1||this.secondDigit===Tn.FNC1}}Tn.FNC1=10;class ze{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new ee;let n=e.substring(0,2);for(let c of ze.TWO_DIGIT_DATA_LENGTH)if(c[0]===n)return c[1]===ze.VARIABLE_LENGTH?ze.processVariableAI(2,c[2],e):ze.processFixedAI(2,c[1],e);if(e.length<3)throw new ee;let i=e.substring(0,3);for(let c of ze.THREE_DIGIT_DATA_LENGTH)if(c[0]===i)return c[1]===ze.VARIABLE_LENGTH?ze.processVariableAI(3,c[2],e):ze.processFixedAI(3,c[1],e);for(let c of ze.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(c[0]===i)return c[1]===ze.VARIABLE_LENGTH?ze.processVariableAI(4,c[2],e):ze.processFixedAI(4,c[1],e);if(e.length<4)throw new ee;let l=e.substring(0,4);for(let c of ze.FOUR_DIGIT_DATA_LENGTH)if(c[0]===l)return c[1]===ze.VARIABLE_LENGTH?ze.processVariableAI(4,c[2],e):ze.processFixedAI(4,c[1],e);throw new ee}static processFixedAI(e,n,i){if(i.length<e)throw new ee;let l=i.substring(0,e);if(i.length<e+n)throw new ee;let c=i.substring(e,e+n),u=i.substring(e+n),h="("+l+")"+c,m=ze.parseFieldsInGeneralPurpose(u);return m==null?h:h+m}static processVariableAI(e,n,i){let l=i.substring(0,e),c;i.length<e+n?c=i.length:c=e+n;let u=i.substring(e,c),h=i.substring(c),m="("+l+")"+u,C=ze.parseFieldsInGeneralPurpose(h);return C==null?m:m+C}}ze.VARIABLE_LENGTH=[],ze.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ze.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ze.VARIABLE_LENGTH,20],["22",ze.VARIABLE_LENGTH,29],["30",ze.VARIABLE_LENGTH,8],["37",ze.VARIABLE_LENGTH,8],["90",ze.VARIABLE_LENGTH,30],["91",ze.VARIABLE_LENGTH,30],["92",ze.VARIABLE_LENGTH,30],["93",ze.VARIABLE_LENGTH,30],["94",ze.VARIABLE_LENGTH,30],["95",ze.VARIABLE_LENGTH,30],["96",ze.VARIABLE_LENGTH,30],["97",ze.VARIABLE_LENGTH,3],["98",ze.VARIABLE_LENGTH,30],["99",ze.VARIABLE_LENGTH,30]],ze.THREE_DIGIT_DATA_LENGTH=[["240",ze.VARIABLE_LENGTH,30],["241",ze.VARIABLE_LENGTH,30],["242",ze.VARIABLE_LENGTH,6],["250",ze.VARIABLE_LENGTH,30],["251",ze.VARIABLE_LENGTH,30],["253",ze.VARIABLE_LENGTH,17],["254",ze.VARIABLE_LENGTH,20],["400",ze.VARIABLE_LENGTH,30],["401",ze.VARIABLE_LENGTH,30],["402",17],["403",ze.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ze.VARIABLE_LENGTH,20],["421",ze.VARIABLE_LENGTH,15],["422",3],["423",ze.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ze.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ze.VARIABLE_LENGTH,15],["391",ze.VARIABLE_LENGTH,18],["392",ze.VARIABLE_LENGTH,15],["393",ze.VARIABLE_LENGTH,18],["703",ze.VARIABLE_LENGTH,30]],ze.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ze.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ze.VARIABLE_LENGTH,20],["8003",ze.VARIABLE_LENGTH,30],["8004",ze.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ze.VARIABLE_LENGTH,30],["8008",ze.VARIABLE_LENGTH,12],["8018",18],["8020",ze.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ze.VARIABLE_LENGTH,70],["8200",ze.VARIABLE_LENGTH,70]];class ai{constructor(e){this.buffer=new Pe,this.information=e}decodeAllCodes(e,n){let i=n,l=null;do{let c=this.decodeGeneralPurposeField(i,l),u=ze.parseFieldsInGeneralPurpose(c.getNewString());if(u!=null&&e.append(u),c.isRemaining()?l=""+c.getRemainingValue():l=null,i===c.getNewPosition())break;i=c.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let n=e;n<e+3;++n)if(this.information.get(n))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let c=this.extractNumericValueFromBitArray(e,4);return c===0?new Tn(this.information.getSize(),Tn.FNC1,Tn.FNC1):new Tn(this.information.getSize(),c-1,Tn.FNC1)}let n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,l=(n-8)%11;return new Tn(e+7,i,l)}extractNumericValueFromBitArray(e,n){return ai.extractNumericValueFromBitArray(this.information,e,n)}static extractNumericValueFromBitArray(e,n,i){let l=0;for(let c=0;c<i;++c)e.get(n+c)&&(l|=1<<i-c-1);return l}decodeGeneralPurposeField(e,n){this.buffer.setLengthToZero(),n!=null&&this.buffer.append(n),this.current.setPosition(e);let i=this.parseBlocks();return i!=null&&i.isRemaining()?new cr(this.current.getPosition(),this.buffer.toString(),i.getRemainingValue()):new cr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,n;do{let i=this.current.getPosition();if(this.current.isAlpha()?(n=this.parseAlphaBlock(),e=n.isFinished()):this.current.isIsoIec646()?(n=this.parseIsoIec646Block(),e=n.isFinished()):(n=this.parseNumericBlock(),e=n.isFinished()),!(i!==this.current.getPosition())&&!e)break}while(!e);return n.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let n;return e.isSecondDigitFNC1()?n=new cr(this.current.getPosition(),this.buffer.toString()):n=new cr(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new lr(!0,n)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let n=new cr(this.current.getPosition(),this.buffer.toString());return new lr(!0,n)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new lr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new cr(this.current.getPosition(),this.buffer.toString());return new lr(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new lr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new cr(this.current.getPosition(),this.buffer.toString());return new lr(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new lr(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+7>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<116)return!0;if(e+8>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(e,8);return l>=232&&l<253}decodeIsoIec646(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new dn(e+5,dn.FNC1);if(n>=5&&n<15)return new dn(e+5,"0"+(n-5));let i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<90)return new dn(e+7,""+(i+1));if(i>=90&&i<116)return new dn(e+7,""+(i+7));let l=this.extractNumericValueFromBitArray(e,8),c;switch(l){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new q}return new dn(e+8,c)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+6>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,6);return i>=16&&i<63}decodeAlphanumeric(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new dn(e+5,dn.FNC1);if(n>=5&&n<15)return new dn(e+5,"0"+(n-5));let i=this.extractNumericValueFromBitArray(e,6);if(i>=32&&i<58)return new dn(e+6,""+(i+33));let l;switch(i){case 58:l="*";break;case 59:l=",";break;case 60:l="-";break;case 61:l=".";break;case 62:l="/";break;default:throw new zt("Decoding invalid alphanumeric value: "+i)}return new dn(e+6,l)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<5&&n+e<this.information.getSize();++n)if(n===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+n))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let n=e;n<e+3;++n)if(this.information.get(n))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<4&&n+e<this.information.getSize();++n)if(this.information.get(e+n))return!1;return!0}}class Gi{constructor(e){this.information=e,this.generalDecoder=new ai(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ln extends Gi{constructor(e){super(e)}encodeCompressedGtin(e,n){e.append("(01)");let i=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,n,i)}encodeCompressedGtinWithoutAI(e,n,i){for(let l=0;l<4;++l){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*l,10);c/100===0&&e.append("0"),c/10===0&&e.append("0"),e.append(c)}Ln.appendCheckDigit(e,i)}static appendCheckDigit(e,n){let i=0;for(let l=0;l<13;l++){let c=e.charAt(l+n).charCodeAt(0)-48;i+=l&1?c:3*c}i=10-i%10,i===10&&(i=0),e.append(i)}}Ln.GTIN_SIZE=40;class Qn extends Ln{constructor(e){super(e)}parseInformation(){let e=new Pe;e.append("(01)");let n=e.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(Qn.HEADER_SIZE,4);return e.append(i),this.encodeCompressedGtinWithoutAI(e,Qn.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(e,Qn.HEADER_SIZE+44)}}Qn.HEADER_SIZE=4;class Kr extends Gi{constructor(e){super(e)}parseInformation(){let e=new Pe;return this.getGeneralDecoder().decodeAllCodes(e,Kr.HEADER_SIZE)}}Kr.HEADER_SIZE=5;class Ci extends Ln{constructor(e){super(e)}encodeCompressedWeight(e,n,i){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(e,l);let c=this.checkWeight(l),u=1e5;for(let h=0;h<5;++h)c/u===0&&e.append("0"),u/=10;e.append(c)}}class Jn extends Ci{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=Jn.HEADER_SIZE+Ci.GTIN_SIZE+Jn.WEIGHT_SIZE)throw new ee;let e=new Pe;return this.encodeCompressedGtin(e,Jn.HEADER_SIZE),this.encodeCompressedWeight(e,Jn.HEADER_SIZE+Ci.GTIN_SIZE,Jn.WEIGHT_SIZE),e.toString()}}Jn.HEADER_SIZE=5,Jn.WEIGHT_SIZE=15;class Ue extends Jn{constructor(e){super(e)}addWeightCode(e,n){e.append("(3103)")}checkWeight(e){return e}}class mt extends Jn{constructor(e){super(e)}addWeightCode(e,n){n<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class Je extends Ln{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Je.HEADER_SIZE+Ln.GTIN_SIZE)throw new ee;let e=new Pe;this.encodeCompressedGtin(e,Je.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(Je.HEADER_SIZE+Ln.GTIN_SIZE,Je.LAST_DIGIT_SIZE);e.append("(392"),e.append(n),e.append(")");let i=this.getGeneralDecoder().decodeGeneralPurposeField(Je.HEADER_SIZE+Ln.GTIN_SIZE+Je.LAST_DIGIT_SIZE,null);return e.append(i.getNewString()),e.toString()}}Je.HEADER_SIZE=8,Je.LAST_DIGIT_SIZE=2;class Et extends Ln{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Et.HEADER_SIZE+Ln.GTIN_SIZE)throw new ee;let e=new Pe;this.encodeCompressedGtin(e,Et.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(Et.HEADER_SIZE+Ln.GTIN_SIZE,Et.LAST_DIGIT_SIZE);e.append("(393"),e.append(n),e.append(")");let i=this.getGeneralDecoder().extractNumericValueFromBitArray(Et.HEADER_SIZE+Ln.GTIN_SIZE+Et.LAST_DIGIT_SIZE,Et.FIRST_THREE_DIGITS_SIZE);i/100==0&&e.append("0"),i/10==0&&e.append("0"),e.append(i);let l=this.getGeneralDecoder().decodeGeneralPurposeField(Et.HEADER_SIZE+Ln.GTIN_SIZE+Et.LAST_DIGIT_SIZE+Et.FIRST_THREE_DIGITS_SIZE,null);return e.append(l.getNewString()),e.toString()}}Et.HEADER_SIZE=8,Et.LAST_DIGIT_SIZE=2,Et.FIRST_THREE_DIGITS_SIZE=10;class Be extends Ci{constructor(e,n,i){super(e),this.dateCode=i,this.firstAIdigits=n}parseInformation(){if(this.getInformation().getSize()!=Be.HEADER_SIZE+Be.GTIN_SIZE+Be.WEIGHT_SIZE+Be.DATE_SIZE)throw new ee;let e=new Pe;return this.encodeCompressedGtin(e,Be.HEADER_SIZE),this.encodeCompressedWeight(e,Be.HEADER_SIZE+Be.GTIN_SIZE,Be.WEIGHT_SIZE),this.encodeCompressedDate(e,Be.HEADER_SIZE+Be.GTIN_SIZE+Be.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,n){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,Be.DATE_SIZE);if(i==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let l=i%32;i/=32;let c=i%12+1;i/=12;let u=i;u/10==0&&e.append("0"),e.append(u),c/10==0&&e.append("0"),e.append(c),l/10==0&&e.append("0"),e.append(l)}addWeightCode(e,n){e.append("("),e.append(this.firstAIdigits),e.append(n/1e5),e.append(")")}checkWeight(e){return e%1e5}}Be.HEADER_SIZE=8,Be.WEIGHT_SIZE=20,Be.DATE_SIZE=16;function Wn(k){try{if(k.get(1))return new Qn(k);if(!k.get(2))return new Kr(k);switch(ai.extractNumericValueFromBitArray(k,1,4)){case 4:return new Ue(k);case 5:return new mt(k)}switch(ai.extractNumericValueFromBitArray(k,1,5)){case 12:return new Je(k);case 13:return new Et(k)}switch(ai.extractNumericValueFromBitArray(k,1,7)){case 56:return new Be(k,"310","11");case 57:return new Be(k,"320","11");case 58:return new Be(k,"310","13");case 59:return new Be(k,"320","13");case 60:return new Be(k,"310","15");case 61:return new Be(k,"320","15");case 62:return new Be(k,"310","17");case 63:return new Be(k,"320","17")}}catch(e){throw console.log(e),new zt("unknown decoder: "+k)}}class Lt{constructor(e,n,i,l){this.leftchar=e,this.rightchar=n,this.finderpattern=i,this.maybeLast=l}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,n){return e instanceof Lt?Lt.equalsOrNull(e.leftchar,n.leftchar)&&Lt.equalsOrNull(e.rightchar,n.rightchar)&&Lt.equalsOrNull(e.finderpattern,n.finderpattern):!1}static equalsOrNull(e,n){return e===null?n===null:Lt.equals(e,n)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class bs{constructor(e,n,i){this.pairs=e,this.rowNumber=n,this.wasReversed=i}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,n){return e instanceof bs?this.checkEqualitity(e,n)&&e.wasReversed===n.wasReversed:!1}checkEqualitity(e,n){if(!e||!n)return;let i;return e.forEach((l,c)=>{n.forEach(u=>{l.getLeftChar().getValue()===u.getLeftChar().getValue()&&l.getRightChar().getValue()===u.getRightChar().getValue()&&l.getFinderPatter().getValue()===u.getFinderPatter().getValue()&&(i=!0)})}),i}}class ye extends rn{constructor(e){super(...arguments),this.pairs=new Array(ye.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,n,i){this.pairs.length=0,this.startFromEven=!1;try{return ye.constructResult(this.decodeRow2pairs(e,n))}catch(l){this.verbose&&console.log(l)}return this.pairs.length=0,this.startFromEven=!0,ye.constructResult(this.decodeRow2pairs(e,n))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,n){let i=!1;for(;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,e))}catch(c){if(c instanceof ee){if(!this.pairs.length)throw new ee;i=!0}}if(this.checkChecksum())return this.pairs;let l;if(this.rows.length?l=!0:l=!1,this.storeRow(e,!1),l){let c=this.checkRowsBoolean(!1);if(c!=null||(c=this.checkRowsBoolean(!0),c!=null))return c}throw new ee}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let n=null;try{n=this.checkRows(new Array,0)}catch(i){this.verbose&&console.log(i)}return e&&(this.rows=this.rows.reverse()),n}checkRows(e,n){for(let i=n;i<this.rows.length;i++){let l=this.rows[i];this.pairs.length=0;for(let u of e)this.pairs.push(u.getPairs());if(this.pairs.push(l.getPairs()),!ye.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let c=new Array(e);c.push(l);try{return this.checkRows(c,i+1)}catch(u){this.verbose&&console.log(u)}}throw new ee}static isValidSequence(e){for(let n of ye.FINDER_PATTERN_SEQUENCES){if(e.length>n.length)continue;let i=!0;for(let l=0;l<e.length;l++)if(e[l].getFinderPattern().getValue()!=n[l]){i=!1;break}if(i)return!0}return!1}storeRow(e,n){let i=0,l=!1,c=!1;for(;i<this.rows.length;){let u=this.rows[i];if(u.getRowNumber()>e){c=u.isEquivalent(this.pairs);break}l=u.isEquivalent(this.pairs),i++}c||l||ye.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new bs(this.pairs,e,n)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,n){for(let i of n)if(i.getPairs().length!==e.length){for(let l of i.getPairs())for(let c of e)if(Lt.equals(l,c))break}}static isPartialRow(e,n){for(let i of n){let l=!0;for(let c of e){let u=!1;for(let h of i.getPairs())if(c.equals(h)){u=!0;break}if(!u){l=!1;break}}if(l)return!0}return!1}getRows(){return this.rows}static constructResult(e){let n=Hi.buildBitArray(e),l=Wn(n).parseInformation(),c=e[0].getFinderPattern().getResultPoints(),u=e[e.length-1].getFinderPattern().getResultPoints(),h=[c[0],c[1],u[0],u[1]];return new Oe(l,null,null,h,oe.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),n=e.getLeftChar(),i=e.getRightChar();if(i==null)return!1;let l=i.getChecksumPortion(),c=2;for(let h=1;h<this.pairs.size();++h){let m=this.pairs.get(h);l+=m.getLeftChar().getChecksumPortion(),c++;let C=m.getRightChar();C!=null&&(l+=C.getChecksumPortion(),c++)}return l%=211,211*(c-4)+l==n.getValue()}static getNextSecondBar(e,n){let i;return e.get(n)?(i=e.getNextUnset(n),i=e.getNextSet(i)):(i=e.getNextSet(n),i=e.getNextUnset(i)),i}retrieveNextPair(e,n,i){let l=n.length%2==0;this.startFromEven&&(l=!l);let c,u=!0,h=-1;do this.findNextPair(e,n,h),c=this.parseFoundFinderPattern(e,i,l),c==null?h=ye.getNextSecondBar(e,this.startEnd[0]):u=!1;while(u);let m=this.decodeDataCharacter(e,c,l,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new ee;let C;try{C=this.decodeDataCharacter(e,c,l,!1)}catch(N){C=null,this.verbose&&console.log(N)}return new Lt(m,C,c,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,n,i){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u;i>=0?u=i:this.isEmptyPair(n)?u=0:u=n[n.length-1].getFinderPattern().getStartEnd()[1];let h=n.length%2!=0;this.startFromEven&&(h=!h);let m=!1;for(;u<c&&(m=!e.get(u),!!m);)u++;let C=0,N=u;for(let P=u;P<c;P++)if(e.get(P)!=m)l[C]++;else{if(C==3){if(h&&ye.reverseCounters(l),ye.isFinderPattern(l)){this.startEnd[0]=N,this.startEnd[1]=P;return}h&&ye.reverseCounters(l),N+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,C--}else C++;l[C]=1,m=!m}throw new ee}static reverseCounters(e){let n=e.length;for(let i=0;i<n/2;++i){let l=e[i];e[i]=e[n-i-1],e[n-i-1]=l}}parseFoundFinderPattern(e,n,i){let l,c,u;if(i){let C=this.startEnd[0]-1;for(;C>=0&&!e.get(C);)C--;C++,l=this.startEnd[0]-C,c=C,u=this.startEnd[1]}else c=this.startEnd[0],u=e.getNextUnset(this.startEnd[1]+1),l=u-this.startEnd[1];let h=this.getDecodeFinderCounters();B.arraycopy(h,0,h,1,h.length-1),h[0]=l;let m;try{m=this.parseFinderValue(h,ye.FINDER_PATTERNS)}catch{return null}return new si(m,[c,u],c,u,n)}decodeDataCharacter(e,n,i,l){let c=this.getDataCharacterCounters();for(let Ft=0;Ft<c.length;Ft++)c[Ft]=0;if(l)ye.recordPatternInReverse(e,n.getStartEnd()[0],c);else{ye.recordPattern(e,n.getStartEnd()[1],c);for(let Ft=0,sn=c.length-1;Ft<sn;Ft++,sn--){let Xn=c[Ft];c[Ft]=c[sn],c[sn]=Xn}}let u=17,h=pt.sum(new Int32Array(c))/u,m=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(h-m)/m>.3)throw new ee;let C=this.getOddCounts(),N=this.getEvenCounts(),P=this.getOddRoundingErrors(),M=this.getEvenRoundingErrors();for(let Ft=0;Ft<c.length;Ft++){let sn=1*c[Ft]/h,Xn=sn+.5;if(Xn<1){if(sn<.3)throw new ee;Xn=1}else if(Xn>8){if(sn>8.7)throw new ee;Xn=8}let Ii=Ft/2;Ft&1?(N[Ii]=Xn,M[Ii]=sn-Xn):(C[Ii]=Xn,P[Ii]=sn-Xn)}this.adjustOddEvenCounts(u);let U=4*n.getValue()+(i?0:2)+(l?0:1)-1,X=0,$=0;for(let Ft=C.length-1;Ft>=0;Ft--){if(ye.isNotA1left(n,i,l)){let sn=ye.WEIGHTS[U][2*Ft];$+=C[Ft]*sn}X+=C[Ft]}let te=0;for(let Ft=N.length-1;Ft>=0;Ft--)if(ye.isNotA1left(n,i,l)){let sn=ye.WEIGHTS[U][2*Ft+1];te+=N[Ft]*sn}let ae=$+te;if(X&1||X>13||X<4)throw new ee;let Se=(13-X)/2,Te=ye.SYMBOL_WIDEST[Se],Ce=9-Te,bt=An.getRSSvalue(C,Te,!0),ht=An.getRSSvalue(N,Ce,!1),tr=ye.EVEN_TOTAL_SUBSET[Se],_r=ye.GSUM[Se],vn=bt*tr+ht+_r;return new Mr(vn,ae)}static isNotA1left(e,n,i){return!(e.getValue()==0&&n&&i)}adjustOddEvenCounts(e){let n=pt.sum(new Int32Array(this.getOddCounts())),i=pt.sum(new Int32Array(this.getEvenCounts())),l=!1,c=!1;n>13?c=!0:n<4&&(l=!0);let u=!1,h=!1;i>13?h=!0:i<4&&(u=!0);let m=n+i-e,C=(n&1)==1,N=(i&1)==0;if(m==1)if(C){if(N)throw new ee;c=!0}else{if(!N)throw new ee;h=!0}else if(m==-1)if(C){if(N)throw new ee;l=!0}else{if(!N)throw new ee;u=!0}else if(m==0){if(C){if(!N)throw new ee;n<i?(l=!0,h=!0):(c=!0,u=!0)}else if(N)throw new ee}else throw new ee;if(l){if(c)throw new ee;ye.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&ye.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(h)throw new ee;ye.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&ye.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ye.SYMBOL_WIDEST=[7,5,4,3,1],ye.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ye.GSUM=[0,348,1388,2948,3988],ye.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ye.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ye.FINDER_PAT_A=0,ye.FINDER_PAT_B=1,ye.FINDER_PAT_C=2,ye.FINDER_PAT_D=3,ye.FINDER_PAT_E=4,ye.FINDER_PAT_F=5,ye.FINDER_PATTERN_SEQUENCES=[[ye.FINDER_PAT_A,ye.FINDER_PAT_A],[ye.FINDER_PAT_A,ye.FINDER_PAT_B,ye.FINDER_PAT_B],[ye.FINDER_PAT_A,ye.FINDER_PAT_C,ye.FINDER_PAT_B,ye.FINDER_PAT_D],[ye.FINDER_PAT_A,ye.FINDER_PAT_E,ye.FINDER_PAT_B,ye.FINDER_PAT_D,ye.FINDER_PAT_C],[ye.FINDER_PAT_A,ye.FINDER_PAT_E,ye.FINDER_PAT_B,ye.FINDER_PAT_D,ye.FINDER_PAT_D,ye.FINDER_PAT_F],[ye.FINDER_PAT_A,ye.FINDER_PAT_E,ye.FINDER_PAT_B,ye.FINDER_PAT_D,ye.FINDER_PAT_E,ye.FINDER_PAT_F,ye.FINDER_PAT_F],[ye.FINDER_PAT_A,ye.FINDER_PAT_A,ye.FINDER_PAT_B,ye.FINDER_PAT_B,ye.FINDER_PAT_C,ye.FINDER_PAT_C,ye.FINDER_PAT_D,ye.FINDER_PAT_D],[ye.FINDER_PAT_A,ye.FINDER_PAT_A,ye.FINDER_PAT_B,ye.FINDER_PAT_B,ye.FINDER_PAT_C,ye.FINDER_PAT_C,ye.FINDER_PAT_D,ye.FINDER_PAT_E,ye.FINDER_PAT_E],[ye.FINDER_PAT_A,ye.FINDER_PAT_A,ye.FINDER_PAT_B,ye.FINDER_PAT_B,ye.FINDER_PAT_C,ye.FINDER_PAT_C,ye.FINDER_PAT_D,ye.FINDER_PAT_E,ye.FINDER_PAT_F,ye.FINDER_PAT_F],[ye.FINDER_PAT_A,ye.FINDER_PAT_A,ye.FINDER_PAT_B,ye.FINDER_PAT_B,ye.FINDER_PAT_C,ye.FINDER_PAT_D,ye.FINDER_PAT_D,ye.FINDER_PAT_E,ye.FINDER_PAT_E,ye.FINDER_PAT_F,ye.FINDER_PAT_F]],ye.MAX_PAIRS=11;class mr extends Mr{constructor(e,n,i){super(e,n),this.count=0,this.finderPattern=i}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Ot extends rn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,n,i){const l=this.decodePair(n,!1,e,i);Ot.addOrTally(this.possibleLeftPairs,l),n.reverse();let c=this.decodePair(n,!0,e,i);Ot.addOrTally(this.possibleRightPairs,c),n.reverse();for(let u of this.possibleLeftPairs)if(u.getCount()>1){for(let h of this.possibleRightPairs)if(h.getCount()>1&&Ot.checkChecksum(u,h))return Ot.constructResult(u,h)}throw new ee}static addOrTally(e,n){if(n==null)return;let i=!1;for(let l of e)if(l.getValue()===n.getValue()){l.incrementCount(),i=!0;break}i||e.push(n)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,n){let i=4537077*e.getValue()+n.getValue(),l=new String(i).toString(),c=new Pe;for(let C=13-l.length;C>0;C--)c.append("0");c.append(l);let u=0;for(let C=0;C<13;C++){let N=c.charAt(C).charCodeAt(0)-48;u+=C&1?N:3*N}u=10-u%10,u===10&&(u=0),c.append(u.toString());let h=e.getFinderPattern().getResultPoints(),m=n.getFinderPattern().getResultPoints();return new Oe(c.toString(),null,0,[h[0],h[1],m[0],m[1]],oe.RSS_14,new Date().getTime())}static checkChecksum(e,n){let i=(e.getChecksumPortion()+16*n.getChecksumPortion())%79,l=9*e.getFinderPattern().getValue()+n.getFinderPattern().getValue();return l>72&&l--,l>8&&l--,i===l}decodePair(e,n,i,l){try{let c=this.findFinderPattern(e,n),u=this.parseFoundFinderPattern(e,i,n,c),h=l==null?null:l.get(de.NEED_RESULT_POINT_CALLBACK);if(h!=null){let N=(c[0]+c[1])/2;n&&(N=e.getSize()-1-N),h.foundPossibleResultPoint(new _e(N,i))}let m=this.decodeDataCharacter(e,u,!0),C=this.decodeDataCharacter(e,u,!1);return new mr(1597*m.getValue()+C.getValue(),m.getChecksumPortion()+4*C.getChecksumPortion(),u)}catch{return null}}decodeDataCharacter(e,n,i){let l=this.getDataCharacterCounters();for(let te=0;te<l.length;te++)l[te]=0;if(i)je.recordPatternInReverse(e,n.getStartEnd()[0],l);else{je.recordPattern(e,n.getStartEnd()[1]+1,l);for(let te=0,ae=l.length-1;te<ae;te++,ae--){let Se=l[te];l[te]=l[ae],l[ae]=Se}}let c=i?16:15,u=pt.sum(new Int32Array(l))/c,h=this.getOddCounts(),m=this.getEvenCounts(),C=this.getOddRoundingErrors(),N=this.getEvenRoundingErrors();for(let te=0;te<l.length;te++){let ae=l[te]/u,Se=Math.floor(ae+.5);Se<1?Se=1:Se>8&&(Se=8);let Te=Math.floor(te/2);te&1?(m[Te]=Se,N[Te]=ae-Se):(h[Te]=Se,C[Te]=ae-Se)}this.adjustOddEvenCounts(i,c);let P=0,M=0;for(let te=h.length-1;te>=0;te--)M*=9,M+=h[te],P+=h[te];let U=0,X=0;for(let te=m.length-1;te>=0;te--)U*=9,U+=m[te],X+=m[te];let $=M+3*U;if(i){if(P&1||P>12||P<4)throw new ee;let te=(12-P)/2,ae=Ot.OUTSIDE_ODD_WIDEST[te],Se=9-ae,Te=An.getRSSvalue(h,ae,!1),Ce=An.getRSSvalue(m,Se,!0),bt=Ot.OUTSIDE_EVEN_TOTAL_SUBSET[te],ht=Ot.OUTSIDE_GSUM[te];return new Mr(Te*bt+Ce+ht,$)}else{if(X&1||X>10||X<4)throw new ee;let te=(10-X)/2,ae=Ot.INSIDE_ODD_WIDEST[te],Se=9-ae,Te=An.getRSSvalue(h,ae,!0),Ce=An.getRSSvalue(m,Se,!1),bt=Ot.INSIDE_ODD_TOTAL_SUBSET[te],ht=Ot.INSIDE_GSUM[te];return new Mr(Ce*bt+Te+ht,$)}}findFinderPattern(e,n){let i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;let l=e.getSize(),c=!1,u=0;for(;u<l&&(c=!e.get(u),n!==c);)u++;let h=0,m=u;for(let C=u;C<l;C++)if(e.get(C)!==c)i[h]++;else{if(h===3){if(rn.isFinderPattern(i))return[m,C];m+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,h--}else h++;i[h]=1,c=!c}throw new ee}parseFoundFinderPattern(e,n,i,l){let c=e.get(l[0]),u=l[0]-1;for(;u>=0&&c!==e.get(u);)u--;u++;const h=l[0]-u,m=this.getDecodeFinderCounters(),C=new Int32Array(m.length);B.arraycopy(m,0,C,1,m.length-1),C[0]=h;const N=this.parseFinderValue(C,Ot.FINDER_PATTERNS);let P=u,M=l[1];return i&&(P=e.getSize()-1-P,M=e.getSize()-1-M),new si(N,[u,l[1]],P,M,n)}adjustOddEvenCounts(e,n){let i=pt.sum(new Int32Array(this.getOddCounts())),l=pt.sum(new Int32Array(this.getEvenCounts())),c=!1,u=!1,h=!1,m=!1;e?(i>12?u=!0:i<4&&(c=!0),l>12?m=!0:l<4&&(h=!0)):(i>11?u=!0:i<5&&(c=!0),l>10?m=!0:l<4&&(h=!0));let C=i+l-n,N=(i&1)===(e?1:0),P=(l&1)===1;if(C===1)if(N){if(P)throw new ee;u=!0}else{if(!P)throw new ee;m=!0}else if(C===-1)if(N){if(P)throw new ee;c=!0}else{if(!P)throw new ee;h=!0}else if(C===0){if(N){if(!P)throw new ee;i<l?(c=!0,m=!0):(u=!0,h=!0)}else if(P)throw new ee}else throw new ee;if(c){if(u)throw new ee;rn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&rn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(m)throw new ee;rn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&rn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ot.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Ot.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Ot.OUTSIDE_GSUM=[0,161,961,2015,2715],Ot.INSIDE_GSUM=[0,336,1036,1516],Ot.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Ot.INSIDE_ODD_WIDEST=[2,4,6,8],Ot.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ei extends je{constructor(e,n){super(),this.readers=[],this.verbose=n===!0;const i=e?e.get(de.POSSIBLE_FORMATS):null,l=e&&e.get(de.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;i?((i.includes(oe.EAN_13)||i.includes(oe.UPC_A)||i.includes(oe.EAN_8)||i.includes(oe.UPC_E))&&this.readers.push(new Wi(e)),i.includes(oe.CODE_39)&&this.readers.push(new lt(l)),i.includes(oe.CODE_128)&&this.readers.push(new ge),i.includes(oe.ITF)&&this.readers.push(new st),i.includes(oe.RSS_14)&&this.readers.push(new Ot),i.includes(oe.RSS_EXPANDED)&&this.readers.push(new ye(this.verbose))):(this.readers.push(new Wi(e)),this.readers.push(new lt),this.readers.push(new Wi(e)),this.readers.push(new ge),this.readers.push(new st),this.readers.push(new Ot),this.readers.push(new ye(this.verbose)))}decodeRow(e,n,i){for(let l=0;l<this.readers.length;l++)try{return this.readers[l].decodeRow(e,n,i)}catch{}throw new ee}reset(){this.readers.forEach(e=>e.reset())}}class Xi extends pe{constructor(e=500,n){super(new Ei(n),e,n)}}class St{constructor(e,n,i){this.ecCodewords=e,this.ecBlocks=[n],i&&this.ecBlocks.push(i)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class yt{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class It{constructor(e,n,i,l,c,u){this.versionNumber=e,this.symbolSizeRows=n,this.symbolSizeColumns=i,this.dataRegionSizeRows=l,this.dataRegionSizeColumns=c,this.ecBlocks=u;let h=0;const m=u.getECCodewords(),C=u.getECBlocks();for(let N of C)h+=N.getCount()*(N.getDataCodewords()+m);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,n){if(e&1||n&1)throw new q;for(let i of It.VERSIONS)if(i.symbolSizeRows===e&&i.symbolSizeColumns===n)return i;throw new q}toString(){return""+this.versionNumber}static buildVersions(){return[new It(1,10,10,8,8,new St(5,new yt(1,3))),new It(2,12,12,10,10,new St(7,new yt(1,5))),new It(3,14,14,12,12,new St(10,new yt(1,8))),new It(4,16,16,14,14,new St(12,new yt(1,12))),new It(5,18,18,16,16,new St(14,new yt(1,18))),new It(6,20,20,18,18,new St(18,new yt(1,22))),new It(7,22,22,20,20,new St(20,new yt(1,30))),new It(8,24,24,22,22,new St(24,new yt(1,36))),new It(9,26,26,24,24,new St(28,new yt(1,44))),new It(10,32,32,14,14,new St(36,new yt(1,62))),new It(11,36,36,16,16,new St(42,new yt(1,86))),new It(12,40,40,18,18,new St(48,new yt(1,114))),new It(13,44,44,20,20,new St(56,new yt(1,144))),new It(14,48,48,22,22,new St(68,new yt(1,174))),new It(15,52,52,24,24,new St(42,new yt(2,102))),new It(16,64,64,14,14,new St(56,new yt(2,140))),new It(17,72,72,16,16,new St(36,new yt(4,92))),new It(18,80,80,18,18,new St(48,new yt(4,114))),new It(19,88,88,20,20,new St(56,new yt(4,144))),new It(20,96,96,22,22,new St(68,new yt(4,174))),new It(21,104,104,24,24,new St(56,new yt(6,136))),new It(22,120,120,18,18,new St(68,new yt(6,175))),new It(23,132,132,20,20,new St(62,new yt(8,163))),new It(24,144,144,22,22,new St(62,new yt(8,156),new yt(2,155))),new It(25,8,18,6,16,new St(7,new yt(1,5))),new It(26,8,32,6,14,new St(11,new yt(1,10))),new It(27,12,26,10,24,new St(14,new yt(1,16))),new It(28,12,36,10,16,new St(18,new yt(1,22))),new It(29,16,36,14,16,new St(24,new yt(1,32))),new It(30,16,48,14,22,new St(28,new yt(1,49)))]}}It.VERSIONS=It.buildVersions();class ur{constructor(e){const n=e.getHeight();if(n<8||n>144||n&1)throw new q;this.version=ur.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Fe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const n=e.getHeight(),i=e.getWidth();return It.getVersionForDimensions(n,i)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let n=0,i=4,l=0;const c=this.mappingBitMatrix.getHeight(),u=this.mappingBitMatrix.getWidth();let h=!1,m=!1,C=!1,N=!1;do if(i===c&&l===0&&!h)e[n++]=this.readCorner1(c,u)&255,i-=2,l+=2,h=!0;else if(i===c-2&&l===0&&u&3&&!m)e[n++]=this.readCorner2(c,u)&255,i-=2,l+=2,m=!0;else if(i===c+4&&l===2&&!(u&7)&&!C)e[n++]=this.readCorner3(c,u)&255,i-=2,l+=2,C=!0;else if(i===c-2&&l===0&&(u&7)===4&&!N)e[n++]=this.readCorner4(c,u)&255,i-=2,l+=2,N=!0;else{do i<c&&l>=0&&!this.readMappingMatrix.get(l,i)&&(e[n++]=this.readUtah(i,l,c,u)&255),i-=2,l+=2;while(i>=0&&l<u);i+=1,l+=3;do i>=0&&l<u&&!this.readMappingMatrix.get(l,i)&&(e[n++]=this.readUtah(i,l,c,u)&255),i+=2,l-=2;while(i<c&&l>=0);i+=3,l+=1}while(i<c||l<u);if(n!==this.version.getTotalCodewords())throw new q;return e}readModule(e,n,i,l){return e<0&&(e+=i,n+=4-(i+4&7)),n<0&&(n+=l,e+=4-(l+4&7)),this.readMappingMatrix.set(n,e),this.mappingBitMatrix.get(n,e)}readUtah(e,n,i,l){let c=0;return this.readModule(e-2,n-2,i,l)&&(c|=1),c<<=1,this.readModule(e-2,n-1,i,l)&&(c|=1),c<<=1,this.readModule(e-1,n-2,i,l)&&(c|=1),c<<=1,this.readModule(e-1,n-1,i,l)&&(c|=1),c<<=1,this.readModule(e-1,n,i,l)&&(c|=1),c<<=1,this.readModule(e,n-2,i,l)&&(c|=1),c<<=1,this.readModule(e,n-1,i,l)&&(c|=1),c<<=1,this.readModule(e,n,i,l)&&(c|=1),c}readCorner1(e,n){let i=0;return this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,1,e,n)&&(i|=1),i<<=1,this.readModule(e-1,2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(2,n-1,e,n)&&(i|=1),i<<=1,this.readModule(3,n-1,e,n)&&(i|=1),i}readCorner2(e,n){let i=0;return this.readModule(e-3,0,e,n)&&(i|=1),i<<=1,this.readModule(e-2,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(0,n-4,e,n)&&(i|=1),i<<=1,this.readModule(0,n-3,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i}readCorner3(e,n){let i=0;return this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(0,n-3,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-3,e,n)&&(i|=1),i<<=1,this.readModule(1,n-2,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i}readCorner4(e,n){let i=0;return this.readModule(e-3,0,e,n)&&(i|=1),i<<=1,this.readModule(e-2,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(2,n-1,e,n)&&(i|=1),i<<=1,this.readModule(3,n-1,e,n)&&(i|=1),i}extractDataRegion(e){const n=this.version.getSymbolSizeRows(),i=this.version.getSymbolSizeColumns();if(e.getHeight()!==n)throw new I("Dimension of bitMatrix must match the version size");const l=this.version.getDataRegionSizeRows(),c=this.version.getDataRegionSizeColumns(),u=n/l|0,h=i/c|0,m=u*l,C=h*c,N=new Fe(C,m);for(let P=0;P<u;++P){const M=P*l;for(let U=0;U<h;++U){const X=U*c;for(let $=0;$<l;++$){const te=P*(l+2)+1+$,ae=M+$;for(let Se=0;Se<c;++Se){const Te=U*(c+2)+1+Se;if(e.get(Te,te)){const Ce=X+Se;N.set(Ce,ae)}}}}}return N}}class Wo{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n){const i=n.getECBlocks();let l=0;const c=i.getECBlocks();for(let $ of c)l+=$.getCount();const u=new Array(l);let h=0;for(let $ of c)for(let te=0;te<$.getCount();te++){const ae=$.getDataCodewords(),Se=i.getECCodewords()+ae;u[h++]=new Wo(ae,new Uint8Array(Se))}const C=u[0].codewords.length-i.getECCodewords(),N=C-1;let P=0;for(let $=0;$<N;$++)for(let te=0;te<h;te++)u[te].codewords[$]=e[P++];const M=n.getVersionNumber()===24,U=M?8:h;for(let $=0;$<U;$++)u[$].codewords[C-1]=e[P++];const X=u[0].codewords.length;for(let $=C;$<X;$++)for(let te=0;te<h;te++){const ae=M?(te+8)%h:te,Se=M&&ae>7?$-1:$;u[ae].codewords[Se]=e[P++]}if(P!==e.length)throw new I;return u}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ho{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new I(""+e);let n=0,i=this.bitOffset,l=this.byteOffset;const c=this.bytes;if(i>0){const u=8-i,h=e<u?e:u,m=u-h,C=255>>8-h<<m;n=(c[l]&C)>>m,e-=h,i+=h,i===8&&(i=0,l++)}if(e>0){for(;e>=8;)n=n<<8|c[l]&255,l++,e-=8;if(e>0){const u=8-e,h=255>>u<<u;n=n<<e|(c[l]&h)>>u,i+=e}}return this.bitOffset=i,this.byteOffset=l,n}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var yn;(function(k){k[k.PAD_ENCODE=0]="PAD_ENCODE",k[k.ASCII_ENCODE=1]="ASCII_ENCODE",k[k.C40_ENCODE=2]="C40_ENCODE",k[k.TEXT_ENCODE=3]="TEXT_ENCODE",k[k.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",k[k.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",k[k.BASE256_ENCODE=6]="BASE256_ENCODE"})(yn||(yn={}));class Sr{static decode(e){const n=new Ho(e),i=new Pe,l=new Pe,c=new Array;let u=yn.ASCII_ENCODE;do if(u===yn.ASCII_ENCODE)u=this.decodeAsciiSegment(n,i,l);else{switch(u){case yn.C40_ENCODE:this.decodeC40Segment(n,i);break;case yn.TEXT_ENCODE:this.decodeTextSegment(n,i);break;case yn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,i);break;case yn.EDIFACT_ENCODE:this.decodeEdifactSegment(n,i);break;case yn.BASE256_ENCODE:this.decodeBase256Segment(n,i,c);break;default:throw new q}u=yn.ASCII_ENCODE}while(u!==yn.PAD_ENCODE&&n.available()>0);return l.length()>0&&i.append(l.toString()),new Ve(e,i.toString(),c.length===0?null:c,null)}static decodeAsciiSegment(e,n,i){let l=!1;do{let c=e.readBits(8);if(c===0)throw new q;if(c<=128)return l&&(c+=128),n.append(String.fromCharCode(c-1)),yn.ASCII_ENCODE;if(c===129)return yn.PAD_ENCODE;if(c<=229){const u=c-130;u<10&&n.append("0"),n.append(""+u)}else switch(c){case 230:return yn.C40_ENCODE;case 231:return yn.BASE256_ENCODE;case 232:n.append("");break;case 233:case 234:break;case 235:l=!0;break;case 236:n.append("[)>05"),i.insert(0,"");break;case 237:n.append("[)>06"),i.insert(0,"");break;case 238:return yn.ANSIX12_ENCODE;case 239:return yn.TEXT_ENCODE;case 240:return yn.EDIFACT_ENCODE;case 241:break;default:if(c!==254||e.available()!==0)throw new q;break}}while(e.available()>0);return yn.ASCII_ENCODE}static decodeC40Segment(e,n){let i=!1;const l=[];let c=0;do{if(e.available()===8)return;const u=e.readBits(8);if(u===254)return;this.parseTwoBytes(u,e.readBits(8),l);for(let h=0;h<3;h++){const m=l[h];switch(c){case 0:if(m<3)c=m+1;else if(m<this.C40_BASIC_SET_CHARS.length){const C=this.C40_BASIC_SET_CHARS[m];i?(n.append(String.fromCharCode(C.charCodeAt(0)+128)),i=!1):n.append(C)}else throw new q;break;case 1:i?(n.append(String.fromCharCode(m+128)),i=!1):n.append(String.fromCharCode(m)),c=0;break;case 2:if(m<this.C40_SHIFT2_SET_CHARS.length){const C=this.C40_SHIFT2_SET_CHARS[m];i?(n.append(String.fromCharCode(C.charCodeAt(0)+128)),i=!1):n.append(C)}else switch(m){case 27:n.append("");break;case 30:i=!0;break;default:throw new q}c=0;break;case 3:i?(n.append(String.fromCharCode(m+224)),i=!1):n.append(String.fromCharCode(m+96)),c=0;break;default:throw new q}}}while(e.available()>0)}static decodeTextSegment(e,n){let i=!1,l=[],c=0;do{if(e.available()===8)return;const u=e.readBits(8);if(u===254)return;this.parseTwoBytes(u,e.readBits(8),l);for(let h=0;h<3;h++){const m=l[h];switch(c){case 0:if(m<3)c=m+1;else if(m<this.TEXT_BASIC_SET_CHARS.length){const C=this.TEXT_BASIC_SET_CHARS[m];i?(n.append(String.fromCharCode(C.charCodeAt(0)+128)),i=!1):n.append(C)}else throw new q;break;case 1:i?(n.append(String.fromCharCode(m+128)),i=!1):n.append(String.fromCharCode(m)),c=0;break;case 2:if(m<this.TEXT_SHIFT2_SET_CHARS.length){const C=this.TEXT_SHIFT2_SET_CHARS[m];i?(n.append(String.fromCharCode(C.charCodeAt(0)+128)),i=!1):n.append(C)}else switch(m){case 27:n.append("");break;case 30:i=!0;break;default:throw new q}c=0;break;case 3:if(m<this.TEXT_SHIFT3_SET_CHARS.length){const C=this.TEXT_SHIFT3_SET_CHARS[m];i?(n.append(String.fromCharCode(C.charCodeAt(0)+128)),i=!1):n.append(C),c=0}else throw new q;break;default:throw new q}}}while(e.available()>0)}static decodeAnsiX12Segment(e,n){const i=[];do{if(e.available()===8)return;const l=e.readBits(8);if(l===254)return;this.parseTwoBytes(l,e.readBits(8),i);for(let c=0;c<3;c++){const u=i[c];switch(u){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(u<14)n.append(String.fromCharCode(u+44));else if(u<40)n.append(String.fromCharCode(u+51));else throw new q;break}}}while(e.available()>0)}static parseTwoBytes(e,n,i){let l=(e<<8)+n-1,c=Math.floor(l/1600);i[0]=c,l-=c*1600,c=Math.floor(l/40),i[1]=c,i[2]=l-c*40}static decodeEdifactSegment(e,n){do{if(e.available()<=16)return;for(let i=0;i<4;i++){let l=e.readBits(6);if(l===31){const c=8-e.getBitOffset();c!==8&&e.readBits(c);return}l&32||(l|=64),n.append(String.fromCharCode(l))}}while(e.available()>0)}static decodeBase256Segment(e,n,i){let l=1+e.getByteOffset();const c=this.unrandomize255State(e.readBits(8),l++);let u;if(c===0?u=e.available()/8|0:c<250?u=c:u=250*(c-249)+this.unrandomize255State(e.readBits(8),l++),u<0)throw new q;const h=new Uint8Array(u);for(let m=0;m<u;m++){if(e.available()<8)throw new q;h[m]=this.unrandomize255State(e.readBits(8),l++)}i.push(h);try{n.append(ke.decode(h,Ie.ISO88591))}catch(m){throw new zt("Platform does not support required encoding: "+m.message)}}static unrandomize255State(e,n){const i=149*n%255+1,l=e-i;return l>=0?l:l+256}}Sr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Sr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Sr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Sr.TEXT_SHIFT2_SET_CHARS=Sr.C40_SHIFT2_SET_CHARS,Sr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class to{constructor(){this.rsDecoder=new jt(De.DATA_MATRIX_FIELD_256)}decode(e){const n=new ur(e),i=n.getVersion(),l=n.readCodewords(),c=Wo.getDataBlocks(l,i);let u=0;for(let C of c)u+=C.getNumDataCodewords();const h=new Uint8Array(u),m=c.length;for(let C=0;C<m;C++){const N=c[C],P=N.getCodewords(),M=N.getNumDataCodewords();this.correctErrors(P,M);for(let U=0;U<M;U++)h[U*m+C]=P[U]}return Sr.decode(h)}correctErrors(e,n){const i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-n)}catch{throw new D}for(let l=0;l<n;l++)e[l]=i[l]}}class Xt{constructor(e){this.image=e,this.rectangleDetector=new Ye(this.image)}detect(){const e=this.rectangleDetector.detect();let n=this.detectSolid1(e);if(n=this.detectSolid2(n),n[3]=this.correctTopRight(n),!n[3])throw new ee;n=this.shiftToModuleCenter(n);const i=n[0],l=n[1],c=n[2],u=n[3];let h=this.transitionsBetween(i,u)+1,m=this.transitionsBetween(c,u)+1;(h&1)===1&&(h+=1),(m&1)===1&&(m+=1),4*h<7*m&&4*m<7*h&&(h=m=Math.max(h,m));let C=Xt.sampleGrid(this.image,i,l,c,u,h,m);return new zn(C,[i,l,c,u])}static shiftPoint(e,n,i){let l=(n.getX()-e.getX())/(i+1),c=(n.getY()-e.getY())/(i+1);return new _e(e.getX()+l,e.getY()+c)}static moveAway(e,n,i){let l=e.getX(),c=e.getY();return l<n?l-=1:l+=1,c<i?c-=1:c+=1,new _e(l,c)}detectSolid1(e){let n=e[0],i=e[1],l=e[3],c=e[2],u=this.transitionsBetween(n,i),h=this.transitionsBetween(i,l),m=this.transitionsBetween(l,c),C=this.transitionsBetween(c,n),N=u,P=[c,n,i,l];return N>h&&(N=h,P[0]=n,P[1]=i,P[2]=l,P[3]=c),N>m&&(N=m,P[0]=i,P[1]=l,P[2]=c,P[3]=n),N>C&&(P[0]=l,P[1]=c,P[2]=n,P[3]=i),P}detectSolid2(e){let n=e[0],i=e[1],l=e[2],c=e[3],u=this.transitionsBetween(n,c),h=Xt.shiftPoint(i,l,(u+1)*4),m=Xt.shiftPoint(l,i,(u+1)*4),C=this.transitionsBetween(h,n),N=this.transitionsBetween(m,c);return C<N?(e[0]=n,e[1]=i,e[2]=l,e[3]=c):(e[0]=i,e[1]=l,e[2]=c,e[3]=n),e}correctTopRight(e){let n=e[0],i=e[1],l=e[2],c=e[3],u=this.transitionsBetween(n,c),h=this.transitionsBetween(i,c),m=Xt.shiftPoint(n,i,(h+1)*4),C=Xt.shiftPoint(l,i,(u+1)*4);u=this.transitionsBetween(m,c),h=this.transitionsBetween(C,c);let N=new _e(c.getX()+(l.getX()-i.getX())/(u+1),c.getY()+(l.getY()-i.getY())/(u+1)),P=new _e(c.getX()+(n.getX()-i.getX())/(h+1),c.getY()+(n.getY()-i.getY())/(h+1));if(!this.isValid(N))return this.isValid(P)?P:null;if(!this.isValid(P))return N;let M=this.transitionsBetween(m,N)+this.transitionsBetween(C,N),U=this.transitionsBetween(m,P)+this.transitionsBetween(C,P);return M>U?N:P}shiftToModuleCenter(e){let n=e[0],i=e[1],l=e[2],c=e[3],u=this.transitionsBetween(n,c)+1,h=this.transitionsBetween(l,c)+1,m=Xt.shiftPoint(n,i,h*4),C=Xt.shiftPoint(l,i,u*4);u=this.transitionsBetween(m,c)+1,h=this.transitionsBetween(C,c)+1,(u&1)===1&&(u+=1),(h&1)===1&&(h+=1);let N=(n.getX()+i.getX()+l.getX()+c.getX())/4,P=(n.getY()+i.getY()+l.getY()+c.getY())/4;n=Xt.moveAway(n,N,P),i=Xt.moveAway(i,N,P),l=Xt.moveAway(l,N,P),c=Xt.moveAway(c,N,P);let M,U;return m=Xt.shiftPoint(n,i,h*4),m=Xt.shiftPoint(m,c,u*4),M=Xt.shiftPoint(i,n,h*4),M=Xt.shiftPoint(M,l,u*4),C=Xt.shiftPoint(l,c,h*4),C=Xt.shiftPoint(C,i,u*4),U=Xt.shiftPoint(c,l,h*4),U=Xt.shiftPoint(U,n,u*4),[m,M,C,U]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,n,i,l,c,u,h){return kt.getInstance().sampleGrid(e,u,h,.5,.5,u-.5,.5,u-.5,h-.5,.5,h-.5,n.getX(),n.getY(),c.getX(),c.getY(),l.getX(),l.getY(),i.getX(),i.getY())}transitionsBetween(e,n){let i=Math.trunc(e.getX()),l=Math.trunc(e.getY()),c=Math.trunc(n.getX()),u=Math.trunc(n.getY()),h=Math.abs(u-l)>Math.abs(c-i);if(h){let $=i;i=l,l=$,$=c,c=u,u=$}let m=Math.abs(c-i),C=Math.abs(u-l),N=-m/2,P=l<u?1:-1,M=i<c?1:-1,U=0,X=this.image.get(h?l:i,h?i:l);for(let $=i,te=l;$!==c;$+=M){let ae=this.image.get(h?te:$,h?$:te);if(ae!==X&&(U++,X=ae),N+=C,N>0){if(te===u)break;te+=P,N-=m}}return U}}class Tr{constructor(){this.decoder=new to}decode(e,n=null){let i,l;if(n!=null&&n.has(de.PURE_BARCODE)){const C=Tr.extractPureBits(e.getBlackMatrix());i=this.decoder.decode(C),l=Tr.NO_POINTS}else{const C=new Xt(e.getBlackMatrix()).detect();i=this.decoder.decode(C.getBits()),l=C.getPoints()}const c=i.getRawBytes(),u=new Oe(i.getText(),c,8*c.length,l,oe.DATA_MATRIX,B.currentTimeMillis()),h=i.getByteSegments();h!=null&&u.putMetadata(Ne.BYTE_SEGMENTS,h);const m=i.getECLevel();return m!=null&&u.putMetadata(Ne.ERROR_CORRECTION_LEVEL,m),u}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(n==null||i==null)throw new ee;const l=this.moduleSize(n,e);let c=n[1];const u=i[1];let h=n[0];const C=(i[0]-h+1)/l,N=(u-c+1)/l;if(C<=0||N<=0)throw new ee;const P=l/2;c+=P,h+=P;const M=new Fe(C,N);for(let U=0;U<N;U++){const X=c+U*l;for(let $=0;$<C;$++)e.get(h+$*l,X)&&M.set($,U)}return M}static moduleSize(e,n){const i=n.getWidth();let l=e[0];const c=e[1];for(;l<i&&n.get(l,c);)l++;if(l===i)throw new ee;const u=l-e[0];if(u===0)throw new ee;return u}}Tr.NO_POINTS=[];class Dc extends pe{constructor(e=500){super(new Tr,e)}}var Yi;(function(k){k[k.L=0]="L",k[k.M=1]="M",k[k.Q=2]="Q",k[k.H=3]="H"})(Yi||(Yi={}));class Vt{constructor(e,n,i){this.value=e,this.stringValue=n,this.bits=i,Vt.FOR_BITS.set(i,this),Vt.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return Vt.L;case"M":return Vt.M;case"Q":return Vt.Q;case"H":return Vt.H;default:throw new S(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof Vt))return!1;const n=e;return this.value===n.value}static forBits(e){if(e<0||e>=Vt.FOR_BITS.size)throw new I;return Vt.FOR_BITS.get(e)}}Vt.FOR_BITS=new Map,Vt.FOR_VALUE=new Map,Vt.L=new Vt(Yi.L,"L",1),Vt.M=new Vt(Yi.M,"M",0),Vt.Q=new Vt(Yi.Q,"Q",3),Vt.H=new Vt(Yi.H,"H",2);class In{constructor(e){this.errorCorrectionLevel=Vt.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,n){return z.bitCount(e^n)}static decodeFormatInformation(e,n){const i=In.doDecodeFormatInformation(e,n);return i!==null?i:In.doDecodeFormatInformation(e^In.FORMAT_INFO_MASK_QR,n^In.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,n){let i=Number.MAX_SAFE_INTEGER,l=0;for(const c of In.FORMAT_INFO_DECODE_LOOKUP){const u=c[0];if(u===e||u===n)return new In(c[1]);let h=In.numBitsDiffering(e,u);h<i&&(l=c[1],i=h),e!==n&&(h=In.numBitsDiffering(n,u),h<i&&(l=c[1],i=h))}return i<=3?new In(l):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof In))return!1;const n=e;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask}}In.FORMAT_INFO_MASK_QR=21522,In.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class re{constructor(e,...n){this.ecCodewordsPerBlock=e,this.ecBlocks=n}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const n=this.ecBlocks;for(const i of n)e+=i.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class V{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class qe{constructor(e,n,...i){this.versionNumber=e,this.alignmentPatternCenters=n,this.ecBlocks=i;let l=0;const c=i[0].getECCodewordsPerBlock(),u=i[0].getECBlocks();for(const h of u)l+=h.getCount()*(h.getDataCodewords()+c);this.totalCodewords=l}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new q;try{return this.getVersionForNumber((e-17)/4)}catch{throw new q}}static getVersionForNumber(e){if(e<1||e>40)throw new I;return qe.VERSIONS[e-1]}static decodeVersionInformation(e){let n=Number.MAX_SAFE_INTEGER,i=0;for(let l=0;l<qe.VERSION_DECODE_INFO.length;l++){const c=qe.VERSION_DECODE_INFO[l];if(c===e)return qe.getVersionForNumber(l+7);const u=In.numBitsDiffering(e,c);u<n&&(i=l+7,n=u)}return n<=3?qe.getVersionForNumber(i):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),n=new Fe(e);n.setRegion(0,0,9,9),n.setRegion(e-8,0,8,9),n.setRegion(0,e-8,9,8);const i=this.alignmentPatternCenters.length;for(let l=0;l<i;l++){const c=this.alignmentPatternCenters[l]-2;for(let u=0;u<i;u++)l===0&&(u===0||u===i-1)||l===i-1&&u===0||n.setRegion(this.alignmentPatternCenters[u]-2,c,5,5)}return n.setRegion(6,9,1,e-17),n.setRegion(9,6,e-17,1),this.versionNumber>6&&(n.setRegion(e-11,0,3,6),n.setRegion(0,e-11,6,3)),n}toString(){return""+this.versionNumber}}qe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),qe.VERSIONS=[new qe(1,new Int32Array(0),new re(7,new V(1,19)),new re(10,new V(1,16)),new re(13,new V(1,13)),new re(17,new V(1,9))),new qe(2,Int32Array.from([6,18]),new re(10,new V(1,34)),new re(16,new V(1,28)),new re(22,new V(1,22)),new re(28,new V(1,16))),new qe(3,Int32Array.from([6,22]),new re(15,new V(1,55)),new re(26,new V(1,44)),new re(18,new V(2,17)),new re(22,new V(2,13))),new qe(4,Int32Array.from([6,26]),new re(20,new V(1,80)),new re(18,new V(2,32)),new re(26,new V(2,24)),new re(16,new V(4,9))),new qe(5,Int32Array.from([6,30]),new re(26,new V(1,108)),new re(24,new V(2,43)),new re(18,new V(2,15),new V(2,16)),new re(22,new V(2,11),new V(2,12))),new qe(6,Int32Array.from([6,34]),new re(18,new V(2,68)),new re(16,new V(4,27)),new re(24,new V(4,19)),new re(28,new V(4,15))),new qe(7,Int32Array.from([6,22,38]),new re(20,new V(2,78)),new re(18,new V(4,31)),new re(18,new V(2,14),new V(4,15)),new re(26,new V(4,13),new V(1,14))),new qe(8,Int32Array.from([6,24,42]),new re(24,new V(2,97)),new re(22,new V(2,38),new V(2,39)),new re(22,new V(4,18),new V(2,19)),new re(26,new V(4,14),new V(2,15))),new qe(9,Int32Array.from([6,26,46]),new re(30,new V(2,116)),new re(22,new V(3,36),new V(2,37)),new re(20,new V(4,16),new V(4,17)),new re(24,new V(4,12),new V(4,13))),new qe(10,Int32Array.from([6,28,50]),new re(18,new V(2,68),new V(2,69)),new re(26,new V(4,43),new V(1,44)),new re(24,new V(6,19),new V(2,20)),new re(28,new V(6,15),new V(2,16))),new qe(11,Int32Array.from([6,30,54]),new re(20,new V(4,81)),new re(30,new V(1,50),new V(4,51)),new re(28,new V(4,22),new V(4,23)),new re(24,new V(3,12),new V(8,13))),new qe(12,Int32Array.from([6,32,58]),new re(24,new V(2,92),new V(2,93)),new re(22,new V(6,36),new V(2,37)),new re(26,new V(4,20),new V(6,21)),new re(28,new V(7,14),new V(4,15))),new qe(13,Int32Array.from([6,34,62]),new re(26,new V(4,107)),new re(22,new V(8,37),new V(1,38)),new re(24,new V(8,20),new V(4,21)),new re(22,new V(12,11),new V(4,12))),new qe(14,Int32Array.from([6,26,46,66]),new re(30,new V(3,115),new V(1,116)),new re(24,new V(4,40),new V(5,41)),new re(20,new V(11,16),new V(5,17)),new re(24,new V(11,12),new V(5,13))),new qe(15,Int32Array.from([6,26,48,70]),new re(22,new V(5,87),new V(1,88)),new re(24,new V(5,41),new V(5,42)),new re(30,new V(5,24),new V(7,25)),new re(24,new V(11,12),new V(7,13))),new qe(16,Int32Array.from([6,26,50,74]),new re(24,new V(5,98),new V(1,99)),new re(28,new V(7,45),new V(3,46)),new re(24,new V(15,19),new V(2,20)),new re(30,new V(3,15),new V(13,16))),new qe(17,Int32Array.from([6,30,54,78]),new re(28,new V(1,107),new V(5,108)),new re(28,new V(10,46),new V(1,47)),new re(28,new V(1,22),new V(15,23)),new re(28,new V(2,14),new V(17,15))),new qe(18,Int32Array.from([6,30,56,82]),new re(30,new V(5,120),new V(1,121)),new re(26,new V(9,43),new V(4,44)),new re(28,new V(17,22),new V(1,23)),new re(28,new V(2,14),new V(19,15))),new qe(19,Int32Array.from([6,30,58,86]),new re(28,new V(3,113),new V(4,114)),new re(26,new V(3,44),new V(11,45)),new re(26,new V(17,21),new V(4,22)),new re(26,new V(9,13),new V(16,14))),new qe(20,Int32Array.from([6,34,62,90]),new re(28,new V(3,107),new V(5,108)),new re(26,new V(3,41),new V(13,42)),new re(30,new V(15,24),new V(5,25)),new re(28,new V(15,15),new V(10,16))),new qe(21,Int32Array.from([6,28,50,72,94]),new re(28,new V(4,116),new V(4,117)),new re(26,new V(17,42)),new re(28,new V(17,22),new V(6,23)),new re(30,new V(19,16),new V(6,17))),new qe(22,Int32Array.from([6,26,50,74,98]),new re(28,new V(2,111),new V(7,112)),new re(28,new V(17,46)),new re(30,new V(7,24),new V(16,25)),new re(24,new V(34,13))),new qe(23,Int32Array.from([6,30,54,78,102]),new re(30,new V(4,121),new V(5,122)),new re(28,new V(4,47),new V(14,48)),new re(30,new V(11,24),new V(14,25)),new re(30,new V(16,15),new V(14,16))),new qe(24,Int32Array.from([6,28,54,80,106]),new re(30,new V(6,117),new V(4,118)),new re(28,new V(6,45),new V(14,46)),new re(30,new V(11,24),new V(16,25)),new re(30,new V(30,16),new V(2,17))),new qe(25,Int32Array.from([6,32,58,84,110]),new re(26,new V(8,106),new V(4,107)),new re(28,new V(8,47),new V(13,48)),new re(30,new V(7,24),new V(22,25)),new re(30,new V(22,15),new V(13,16))),new qe(26,Int32Array.from([6,30,58,86,114]),new re(28,new V(10,114),new V(2,115)),new re(28,new V(19,46),new V(4,47)),new re(28,new V(28,22),new V(6,23)),new re(30,new V(33,16),new V(4,17))),new qe(27,Int32Array.from([6,34,62,90,118]),new re(30,new V(8,122),new V(4,123)),new re(28,new V(22,45),new V(3,46)),new re(30,new V(8,23),new V(26,24)),new re(30,new V(12,15),new V(28,16))),new qe(28,Int32Array.from([6,26,50,74,98,122]),new re(30,new V(3,117),new V(10,118)),new re(28,new V(3,45),new V(23,46)),new re(30,new V(4,24),new V(31,25)),new re(30,new V(11,15),new V(31,16))),new qe(29,Int32Array.from([6,30,54,78,102,126]),new re(30,new V(7,116),new V(7,117)),new re(28,new V(21,45),new V(7,46)),new re(30,new V(1,23),new V(37,24)),new re(30,new V(19,15),new V(26,16))),new qe(30,Int32Array.from([6,26,52,78,104,130]),new re(30,new V(5,115),new V(10,116)),new re(28,new V(19,47),new V(10,48)),new re(30,new V(15,24),new V(25,25)),new re(30,new V(23,15),new V(25,16))),new qe(31,Int32Array.from([6,30,56,82,108,134]),new re(30,new V(13,115),new V(3,116)),new re(28,new V(2,46),new V(29,47)),new re(30,new V(42,24),new V(1,25)),new re(30,new V(23,15),new V(28,16))),new qe(32,Int32Array.from([6,34,60,86,112,138]),new re(30,new V(17,115)),new re(28,new V(10,46),new V(23,47)),new re(30,new V(10,24),new V(35,25)),new re(30,new V(19,15),new V(35,16))),new qe(33,Int32Array.from([6,30,58,86,114,142]),new re(30,new V(17,115),new V(1,116)),new re(28,new V(14,46),new V(21,47)),new re(30,new V(29,24),new V(19,25)),new re(30,new V(11,15),new V(46,16))),new qe(34,Int32Array.from([6,34,62,90,118,146]),new re(30,new V(13,115),new V(6,116)),new re(28,new V(14,46),new V(23,47)),new re(30,new V(44,24),new V(7,25)),new re(30,new V(59,16),new V(1,17))),new qe(35,Int32Array.from([6,30,54,78,102,126,150]),new re(30,new V(12,121),new V(7,122)),new re(28,new V(12,47),new V(26,48)),new re(30,new V(39,24),new V(14,25)),new re(30,new V(22,15),new V(41,16))),new qe(36,Int32Array.from([6,24,50,76,102,128,154]),new re(30,new V(6,121),new V(14,122)),new re(28,new V(6,47),new V(34,48)),new re(30,new V(46,24),new V(10,25)),new re(30,new V(2,15),new V(64,16))),new qe(37,Int32Array.from([6,28,54,80,106,132,158]),new re(30,new V(17,122),new V(4,123)),new re(28,new V(29,46),new V(14,47)),new re(30,new V(49,24),new V(10,25)),new re(30,new V(24,15),new V(46,16))),new qe(38,Int32Array.from([6,32,58,84,110,136,162]),new re(30,new V(4,122),new V(18,123)),new re(28,new V(13,46),new V(32,47)),new re(30,new V(48,24),new V(14,25)),new re(30,new V(42,15),new V(32,16))),new qe(39,Int32Array.from([6,26,54,82,110,138,166]),new re(30,new V(20,117),new V(4,118)),new re(28,new V(40,47),new V(7,48)),new re(30,new V(43,24),new V(22,25)),new re(30,new V(10,15),new V(67,16))),new qe(40,Int32Array.from([6,30,58,86,114,142,170]),new re(30,new V(19,118),new V(6,119)),new re(28,new V(18,47),new V(31,48)),new re(30,new V(34,24),new V(34,25)),new re(30,new V(20,15),new V(61,16)))];var fn;(function(k){k[k.DATA_MASK_000=0]="DATA_MASK_000",k[k.DATA_MASK_001=1]="DATA_MASK_001",k[k.DATA_MASK_010=2]="DATA_MASK_010",k[k.DATA_MASK_011=3]="DATA_MASK_011",k[k.DATA_MASK_100=4]="DATA_MASK_100",k[k.DATA_MASK_101=5]="DATA_MASK_101",k[k.DATA_MASK_110=6]="DATA_MASK_110",k[k.DATA_MASK_111=7]="DATA_MASK_111"})(fn||(fn={}));class wt{constructor(e,n){this.value=e,this.isMasked=n}unmaskBitMatrix(e,n){for(let i=0;i<n;i++)for(let l=0;l<n;l++)this.isMasked(i,l)&&e.flip(l,i)}}wt.values=new Map([[fn.DATA_MASK_000,new wt(fn.DATA_MASK_000,(k,e)=>(k+e&1)===0)],[fn.DATA_MASK_001,new wt(fn.DATA_MASK_001,(k,e)=>(k&1)===0)],[fn.DATA_MASK_010,new wt(fn.DATA_MASK_010,(k,e)=>e%3===0)],[fn.DATA_MASK_011,new wt(fn.DATA_MASK_011,(k,e)=>(k+e)%3===0)],[fn.DATA_MASK_100,new wt(fn.DATA_MASK_100,(k,e)=>(Math.floor(k/2)+Math.floor(e/3)&1)===0)],[fn.DATA_MASK_101,new wt(fn.DATA_MASK_101,(k,e)=>k*e%6===0)],[fn.DATA_MASK_110,new wt(fn.DATA_MASK_110,(k,e)=>k*e%6<3)],[fn.DATA_MASK_111,new wt(fn.DATA_MASK_111,(k,e)=>(k+e+k*e%3&1)===0)]]);class Qa{constructor(e){const n=e.getHeight();if(n<21||(n&3)!==1)throw new q;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let c=0;c<6;c++)e=this.copyBit(c,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let c=5;c>=0;c--)e=this.copyBit(8,c,e);const n=this.bitMatrix.getHeight();let i=0;const l=n-7;for(let c=n-1;c>=l;c--)i=this.copyBit(8,c,i);for(let c=n-8;c<n;c++)i=this.copyBit(c,8,i);if(this.parsedFormatInfo=In.decodeFormatInformation(e,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new q}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),n=Math.floor((e-17)/4);if(n<=6)return qe.getVersionForNumber(n);let i=0;const l=e-11;for(let u=5;u>=0;u--)for(let h=e-9;h>=l;h--)i=this.copyBit(h,u,i);let c=qe.decodeVersionInformation(i);if(c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;i=0;for(let u=5;u>=0;u--)for(let h=e-9;h>=l;h--)i=this.copyBit(u,h,i);if(c=qe.decodeVersionInformation(i),c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;throw new q}copyBit(e,n,i){return(this.isMirror?this.bitMatrix.get(n,e):this.bitMatrix.get(e,n))?i<<1|1:i<<1}readCodewords(){const e=this.readFormatInformation(),n=this.readVersion(),i=wt.values.get(e.getDataMask()),l=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,l);const c=n.buildFunctionPattern();let u=!0;const h=new Uint8Array(n.getTotalCodewords());let m=0,C=0,N=0;for(let P=l-1;P>0;P-=2){P===6&&P--;for(let M=0;M<l;M++){const U=u?l-1-M:M;for(let X=0;X<2;X++)c.get(P-X,U)||(N++,C<<=1,this.bitMatrix.get(P-X,U)&&(C|=1),N===8&&(h[m++]=C,N=0,C=0))}u=!u}if(m!==n.getTotalCodewords())throw new q;return h}remask(){if(this.parsedFormatInfo===null)return;const e=wt.values[this.parsedFormatInfo.getDataMask()],n=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,n)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let n=0,i=e.getWidth();n<i;n++)for(let l=n+1,c=e.getHeight();l<c;l++)e.get(n,l)!==e.get(l,n)&&(e.flip(l,n),e.flip(n,l))}}class no{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n,i){if(e.length!==n.getTotalCodewords())throw new I;const l=n.getECBlocksForLevel(i);let c=0;const u=l.getECBlocks();for(const X of u)c+=X.getCount();const h=new Array(c);let m=0;for(const X of u)for(let $=0;$<X.getCount();$++){const te=X.getDataCodewords(),ae=l.getECCodewordsPerBlock()+te;h[m++]=new no(te,new Uint8Array(ae))}const C=h[0].codewords.length;let N=h.length-1;for(;N>=0&&h[N].codewords.length!==C;)N--;N++;const P=C-l.getECCodewordsPerBlock();let M=0;for(let X=0;X<P;X++)for(let $=0;$<m;$++)h[$].codewords[X]=e[M++];for(let X=N;X<m;X++)h[X].codewords[P]=e[M++];const U=h[0].codewords.length;for(let X=P;X<U;X++)for(let $=0;$<m;$++){const te=$<N?X:X+1;h[$].codewords[te]=e[M++]}return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var er;(function(k){k[k.TERMINATOR=0]="TERMINATOR",k[k.NUMERIC=1]="NUMERIC",k[k.ALPHANUMERIC=2]="ALPHANUMERIC",k[k.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",k[k.BYTE=4]="BYTE",k[k.ECI=5]="ECI",k[k.KANJI=6]="KANJI",k[k.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",k[k.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",k[k.HANZI=9]="HANZI"})(er||(er={}));class Qe{constructor(e,n,i,l){this.value=e,this.stringValue=n,this.characterCountBitsForVersions=i,this.bits=l,Qe.FOR_BITS.set(l,this),Qe.FOR_VALUE.set(e,this)}static forBits(e){const n=Qe.FOR_BITS.get(e);if(n===void 0)throw new I;return n}getCharacterCountBits(e){const n=e.getVersionNumber();let i;return n<=9?i=0:n<=26?i=1:i=2,this.characterCountBitsForVersions[i]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof Qe))return!1;const n=e;return this.value===n.value}toString(){return this.stringValue}}Qe.FOR_BITS=new Map,Qe.FOR_VALUE=new Map,Qe.TERMINATOR=new Qe(er.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Qe.NUMERIC=new Qe(er.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Qe.ALPHANUMERIC=new Qe(er.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Qe.STRUCTURED_APPEND=new Qe(er.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Qe.BYTE=new Qe(er.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Qe.ECI=new Qe(er.ECI,"ECI",Int32Array.from([0,0,0]),7),Qe.KANJI=new Qe(er.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Qe.FNC1_FIRST_POSITION=new Qe(er.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Qe.FNC1_SECOND_POSITION=new Qe(er.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Qe.HANZI=new Qe(er.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Yt{static decode(e,n,i,l){const c=new Ho(e);let u=new Pe;const h=new Array;let m=-1,C=-1;try{let N=null,P=!1,M;do{if(c.available()<4)M=Qe.TERMINATOR;else{const U=c.readBits(4);M=Qe.forBits(U)}switch(M){case Qe.TERMINATOR:break;case Qe.FNC1_FIRST_POSITION:case Qe.FNC1_SECOND_POSITION:P=!0;break;case Qe.STRUCTURED_APPEND:if(c.available()<16)throw new q;m=c.readBits(8),C=c.readBits(8);break;case Qe.ECI:const U=Yt.parseECIValue(c);if(N=Z.getCharacterSetECIByValue(U),N===null)throw new q;break;case Qe.HANZI:const X=c.readBits(4),$=c.readBits(M.getCharacterCountBits(n));X===Yt.GB2312_SUBSET&&Yt.decodeHanziSegment(c,u,$);break;default:const te=c.readBits(M.getCharacterCountBits(n));switch(M){case Qe.NUMERIC:Yt.decodeNumericSegment(c,u,te);break;case Qe.ALPHANUMERIC:Yt.decodeAlphanumericSegment(c,u,te,P);break;case Qe.BYTE:Yt.decodeByteSegment(c,u,te,N,h,l);break;case Qe.KANJI:Yt.decodeKanjiSegment(c,u,te);break;default:throw new q}break}}while(M!==Qe.TERMINATOR)}catch{throw new q}return new Ve(e,u.toString(),h.length===0?null:h,i===null?null:i.toString(),m,C)}static decodeHanziSegment(e,n,i){if(i*13>e.available())throw new q;const l=new Uint8Array(2*i);let c=0;for(;i>0;){const u=e.readBits(13);let h=u/96<<8&4294967295|u%96;h<959?h+=41377:h+=42657,l[c]=h>>8&255,l[c+1]=h&255,c+=2,i--}try{n.append(ke.decode(l,Ie.GB2312))}catch(u){throw new q(u)}}static decodeKanjiSegment(e,n,i){if(i*13>e.available())throw new q;const l=new Uint8Array(2*i);let c=0;for(;i>0;){const u=e.readBits(13);let h=u/192<<8&4294967295|u%192;h<7936?h+=33088:h+=49472,l[c]=h>>8,l[c+1]=h,c+=2,i--}try{n.append(ke.decode(l,Ie.SHIFT_JIS))}catch(u){throw new q(u)}}static decodeByteSegment(e,n,i,l,c,u){if(8*i>e.available())throw new q;const h=new Uint8Array(i);for(let C=0;C<i;C++)h[C]=e.readBits(8);let m;l===null?m=Ie.guessEncoding(h,u):m=l.getName();try{n.append(ke.decode(h,m))}catch(C){throw new q(C)}c.push(h)}static toAlphaNumericChar(e){if(e>=Yt.ALPHANUMERIC_CHARS.length)throw new q;return Yt.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,n,i,l){const c=n.length();for(;i>1;){if(e.available()<11)throw new q;const u=e.readBits(11);n.append(Yt.toAlphaNumericChar(Math.floor(u/45))),n.append(Yt.toAlphaNumericChar(u%45)),i-=2}if(i===1){if(e.available()<6)throw new q;n.append(Yt.toAlphaNumericChar(e.readBits(6)))}if(l)for(let u=c;u<n.length();u++)n.charAt(u)==="%"&&(u<n.length()-1&&n.charAt(u+1)==="%"?n.deleteCharAt(u+1):n.setCharAt(u,""))}static decodeNumericSegment(e,n,i){for(;i>=3;){if(e.available()<10)throw new q;const l=e.readBits(10);if(l>=1e3)throw new q;n.append(Yt.toAlphaNumericChar(Math.floor(l/100))),n.append(Yt.toAlphaNumericChar(Math.floor(l/10)%10)),n.append(Yt.toAlphaNumericChar(l%10)),i-=3}if(i===2){if(e.available()<7)throw new q;const l=e.readBits(7);if(l>=100)throw new q;n.append(Yt.toAlphaNumericChar(Math.floor(l/10))),n.append(Yt.toAlphaNumericChar(l%10))}else if(i===1){if(e.available()<4)throw new q;const l=e.readBits(4);if(l>=10)throw new q;n.append(Yt.toAlphaNumericChar(l))}}static parseECIValue(e){const n=e.readBits(8);if(!(n&128))return n&127;if((n&192)===128){const i=e.readBits(8);return(n&63)<<8&4294967295|i}if((n&224)===192){const i=e.readBits(16);return(n&31)<<16&4294967295|i}throw new q}}Yt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Yt.GB2312_SUBSET=1;class Go{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const n=e[0];e[0]=e[2],e[2]=n}}class Xo{constructor(){this.rsDecoder=new jt(De.QR_CODE_FIELD_256)}decodeBooleanArray(e,n){return this.decodeBitMatrix(Fe.parseFromBooleanArray(e),n)}decodeBitMatrix(e,n){const i=new Qa(e);let l=null;try{return this.decodeBitMatrixParser(i,n)}catch(c){l=c}try{i.remask(),i.setMirror(!0),i.readVersion(),i.readFormatInformation(),i.mirror();const c=this.decodeBitMatrixParser(i,n);return c.setOther(new Go(!0)),c}catch(c){throw l!==null?l:c}}decodeBitMatrixParser(e,n){const i=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),c=e.readCodewords(),u=no.getDataBlocks(c,i,l);let h=0;for(const N of u)h+=N.getNumDataCodewords();const m=new Uint8Array(h);let C=0;for(const N of u){const P=N.getCodewords(),M=N.getNumDataCodewords();this.correctErrors(P,M);for(let U=0;U<M;U++)m[C++]=P[U]}return Yt.decode(m,i,l,n)}correctErrors(e,n){const i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-n)}catch{throw new D}for(let l=0;l<n;l++)e[l]=i[l]}}class Ki extends _e{constructor(e,n,i){super(e,n),this.estimatedModuleSize=i}aboutEquals(e,n,i){if(Math.abs(n-this.getY())<=e&&Math.abs(i-this.getX())<=e){const l=Math.abs(e-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(e,n,i){const l=(this.getX()+n)/2,c=(this.getY()+e)/2,u=(this.estimatedModuleSize+i)/2;return new Ki(l,c,u)}}class Ir{constructor(e,n,i,l,c,u,h){this.image=e,this.startX=n,this.startY=i,this.width=l,this.height=c,this.moduleSize=u,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,n=this.height,i=this.width,l=e+i,c=this.startY+n/2,u=new Int32Array(3),h=this.image;for(let m=0;m<n;m++){const C=c+(m&1?-Math.floor((m+1)/2):Math.floor((m+1)/2));u[0]=0,u[1]=0,u[2]=0;let N=e;for(;N<l&&!h.get(N,C);)N++;let P=0;for(;N<l;){if(h.get(N,C))if(P===1)u[1]++;else if(P===2){if(this.foundPatternCross(u)){const M=this.handlePossibleCenter(u,C,N);if(M!==null)return M}u[0]=u[2],u[1]=1,u[2]=0,P=1}else u[++P]++;else P===1&&P++,u[P]++;N++}if(this.foundPatternCross(u)){const M=this.handlePossibleCenter(u,C,l);if(M!==null)return M}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ee}static centerFromEnd(e,n){return n-e[2]-e[1]/2}foundPatternCross(e){const n=this.moduleSize,i=n/2;for(let l=0;l<3;l++)if(Math.abs(n-e[l])>=i)return!1;return!0}crossCheckVertical(e,n,i,l){const c=this.image,u=c.getHeight(),h=this.crossCheckStateCount;h[0]=0,h[1]=0,h[2]=0;let m=e;for(;m>=0&&c.get(n,m)&&h[1]<=i;)h[1]++,m--;if(m<0||h[1]>i)return NaN;for(;m>=0&&!c.get(n,m)&&h[0]<=i;)h[0]++,m--;if(h[0]>i)return NaN;for(m=e+1;m<u&&c.get(n,m)&&h[1]<=i;)h[1]++,m++;if(m===u||h[1]>i)return NaN;for(;m<u&&!c.get(n,m)&&h[2]<=i;)h[2]++,m++;if(h[2]>i)return NaN;const C=h[0]+h[1]+h[2];return 5*Math.abs(C-l)>=2*l?NaN:this.foundPatternCross(h)?Ir.centerFromEnd(h,m):NaN}handlePossibleCenter(e,n,i){const l=e[0]+e[1]+e[2],c=Ir.centerFromEnd(e,i),u=this.crossCheckVertical(n,c,2*e[1],l);if(!isNaN(u)){const h=(e[0]+e[1]+e[2])/3;for(const C of this.possibleCenters)if(C.aboutEquals(h,u,c))return C.combineEstimate(u,c,h);const m=new Ki(c,u,h);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null}}class Lr extends _e{constructor(e,n,i,l){super(e,n),this.estimatedModuleSize=i,this.count=l,l===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,n,i){if(Math.abs(n-this.getY())<=e&&Math.abs(i-this.getX())<=e){const l=Math.abs(e-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(e,n,i){const l=this.count+1,c=(this.count*this.getX()+n)/l,u=(this.count*this.getY()+e)/l,h=(this.count*this.estimatedModuleSize+i)/l;return new Lr(c,u,h,l)}}class li{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Qt{constructor(e,n){this.image=e,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const n=e!=null&&e.get(de.TRY_HARDER)!==void 0,i=e!=null&&e.get(de.PURE_BARCODE)!==void 0,l=this.image,c=l.getHeight(),u=l.getWidth();let h=Math.floor(3*c/(4*Qt.MAX_MODULES));(h<Qt.MIN_SKIP||n)&&(h=Qt.MIN_SKIP);let m=!1;const C=new Int32Array(5);for(let P=h-1;P<c&&!m;P+=h){C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0;let M=0;for(let U=0;U<u;U++)if(l.get(U,P))(M&1)===1&&M++,C[M]++;else if(M&1)C[M]++;else if(M===4)if(Qt.foundPatternCross(C)){if(this.handlePossibleCenter(C,P,U,i)===!0)if(h=2,this.hasSkipped===!0)m=this.haveMultiplyConfirmedCenters();else{const $=this.findRowSkip();$>C[2]&&(P+=$-C[2]-h,U=u-1)}else{C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,M=3;continue}M=0,C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0}else C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,M=3;else C[++M]++;Qt.foundPatternCross(C)&&this.handlePossibleCenter(C,P,u,i)===!0&&(h=C[0],this.hasSkipped&&(m=this.haveMultiplyConfirmedCenters()))}const N=this.selectBestPatterns();return _e.orderBestPatterns(N),new li(N)}static centerFromEnd(e,n){return n-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let n=0;for(let c=0;c<5;c++){const u=e[c];if(u===0)return!1;n+=u}if(n<7)return!1;const i=n/7,l=i/2;return Math.abs(i-e[0])<l&&Math.abs(i-e[1])<l&&Math.abs(3*i-e[2])<3*l&&Math.abs(i-e[3])<l&&Math.abs(i-e[4])<l}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,n,i,l){const c=this.getCrossCheckStateCount();let u=0;const h=this.image;for(;e>=u&&n>=u&&h.get(n-u,e-u);)c[2]++,u++;if(e<u||n<u)return!1;for(;e>=u&&n>=u&&!h.get(n-u,e-u)&&c[1]<=i;)c[1]++,u++;if(e<u||n<u||c[1]>i)return!1;for(;e>=u&&n>=u&&h.get(n-u,e-u)&&c[0]<=i;)c[0]++,u++;if(c[0]>i)return!1;const m=h.getHeight(),C=h.getWidth();for(u=1;e+u<m&&n+u<C&&h.get(n+u,e+u);)c[2]++,u++;if(e+u>=m||n+u>=C)return!1;for(;e+u<m&&n+u<C&&!h.get(n+u,e+u)&&c[3]<i;)c[3]++,u++;if(e+u>=m||n+u>=C||c[3]>=i)return!1;for(;e+u<m&&n+u<C&&h.get(n+u,e+u)&&c[4]<i;)c[4]++,u++;if(c[4]>=i)return!1;const N=c[0]+c[1]+c[2]+c[3]+c[4];return Math.abs(N-l)<2*l&&Qt.foundPatternCross(c)}crossCheckVertical(e,n,i,l){const c=this.image,u=c.getHeight(),h=this.getCrossCheckStateCount();let m=e;for(;m>=0&&c.get(n,m);)h[2]++,m--;if(m<0)return NaN;for(;m>=0&&!c.get(n,m)&&h[1]<=i;)h[1]++,m--;if(m<0||h[1]>i)return NaN;for(;m>=0&&c.get(n,m)&&h[0]<=i;)h[0]++,m--;if(h[0]>i)return NaN;for(m=e+1;m<u&&c.get(n,m);)h[2]++,m++;if(m===u)return NaN;for(;m<u&&!c.get(n,m)&&h[3]<i;)h[3]++,m++;if(m===u||h[3]>=i)return NaN;for(;m<u&&c.get(n,m)&&h[4]<i;)h[4]++,m++;if(h[4]>=i)return NaN;const C=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(C-l)>=2*l?NaN:Qt.foundPatternCross(h)?Qt.centerFromEnd(h,m):NaN}crossCheckHorizontal(e,n,i,l){const c=this.image,u=c.getWidth(),h=this.getCrossCheckStateCount();let m=e;for(;m>=0&&c.get(m,n);)h[2]++,m--;if(m<0)return NaN;for(;m>=0&&!c.get(m,n)&&h[1]<=i;)h[1]++,m--;if(m<0||h[1]>i)return NaN;for(;m>=0&&c.get(m,n)&&h[0]<=i;)h[0]++,m--;if(h[0]>i)return NaN;for(m=e+1;m<u&&c.get(m,n);)h[2]++,m++;if(m===u)return NaN;for(;m<u&&!c.get(m,n)&&h[3]<i;)h[3]++,m++;if(m===u||h[3]>=i)return NaN;for(;m<u&&c.get(m,n)&&h[4]<i;)h[4]++,m++;if(h[4]>=i)return NaN;const C=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(C-l)>=l?NaN:Qt.foundPatternCross(h)?Qt.centerFromEnd(h,m):NaN}handlePossibleCenter(e,n,i,l){const c=e[0]+e[1]+e[2]+e[3]+e[4];let u=Qt.centerFromEnd(e,i),h=this.crossCheckVertical(n,Math.floor(u),e[2],c);if(!isNaN(h)&&(u=this.crossCheckHorizontal(Math.floor(u),Math.floor(h),e[2],c),!isNaN(u)&&(!l||this.crossCheckDiagonal(Math.floor(h),Math.floor(u),e[2],c)))){const m=c/7;let C=!1;const N=this.possibleCenters;for(let P=0,M=N.length;P<M;P++){const U=N[P];if(U.aboutEquals(m,h,u)){N[P]=U.combineEstimate(h,u,m),C=!0;break}}if(!C){const P=new Lr(u,h,m);N.push(P),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(P)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let n=null;for(const i of this.possibleCenters)if(i.getCount()>=Qt.CENTER_QUORUM)if(n==null)n=i;else return this.hasSkipped=!0,Math.floor((Math.abs(n.getX()-i.getX())-Math.abs(n.getY()-i.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,n=0;const i=this.possibleCenters.length;for(const u of this.possibleCenters)u.getCount()>=Qt.CENTER_QUORUM&&(e++,n+=u.getEstimatedModuleSize());if(e<3)return!1;const l=n/i;let c=0;for(const u of this.possibleCenters)c+=Math.abs(u.getEstimatedModuleSize()-l);return c<=.05*n}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new ee;const n=this.possibleCenters;let i;if(e>3){let l=0,c=0;for(const m of this.possibleCenters){const C=m.getEstimatedModuleSize();l+=C,c+=C*C}i=l/e;let u=Math.sqrt(c/e-i*i);n.sort((m,C)=>{const N=Math.abs(C.getEstimatedModuleSize()-i),P=Math.abs(m.getEstimatedModuleSize()-i);return N<P?-1:N>P?1:0});const h=Math.max(.2*i,u);for(let m=0;m<n.length&&n.length>3;m++){const C=n[m];Math.abs(C.getEstimatedModuleSize()-i)>h&&(n.splice(m,1),m--)}}if(n.length>3){let l=0;for(const c of n)l+=c.getEstimatedModuleSize();i=l/n.length,n.sort((c,u)=>{if(u.getCount()===c.getCount()){const h=Math.abs(u.getEstimatedModuleSize()-i),m=Math.abs(c.getEstimatedModuleSize()-i);return h<m?1:h>m?-1:0}else return u.getCount()-c.getCount()}),n.splice(3)}return[n[0],n[1],n[2]]}}Qt.CENTER_QUORUM=2,Qt.MIN_SKIP=3,Qt.MAX_MODULES=57;class $r{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(de.NEED_RESULT_POINT_CALLBACK);const i=new Qt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(i)}processFinderPatternInfo(e){const n=e.getTopLeft(),i=e.getTopRight(),l=e.getBottomLeft(),c=this.calculateModuleSize(n,i,l);if(c<1)throw new ee("No pattern found in proccess finder.");const u=$r.computeDimension(n,i,l,c),h=qe.getProvisionalVersionForDimension(u),m=h.getDimensionForVersion()-7;let C=null;if(h.getAlignmentPatternCenters().length>0){const U=i.getX()-n.getX()+l.getX(),X=i.getY()-n.getY()+l.getY(),$=1-3/m,te=Math.floor(n.getX()+$*(U-n.getX())),ae=Math.floor(n.getY()+$*(X-n.getY()));for(let Se=4;Se<=16;Se<<=1)try{C=this.findAlignmentInRegion(c,te,ae,Se);break}catch(Te){if(!(Te instanceof ee))throw Te}}const N=$r.createTransform(n,i,l,C,u),P=$r.sampleGrid(this.image,N,u);let M;return C===null?M=[l,n,i]:M=[l,n,i,C],new zn(P,M)}static createTransform(e,n,i,l,c){const u=c-3.5;let h,m,C,N;return l!==null?(h=l.getX(),m=l.getY(),C=u-3,N=C):(h=n.getX()-e.getX()+i.getX(),m=n.getY()-e.getY()+i.getY(),C=u,N=u),gt.quadrilateralToQuadrilateral(3.5,3.5,u,3.5,C,N,3.5,u,e.getX(),e.getY(),n.getX(),n.getY(),h,m,i.getX(),i.getY())}static sampleGrid(e,n,i){return kt.getInstance().sampleGridWithTransform(e,i,i,n)}static computeDimension(e,n,i,l){const c=pt.round(_e.distance(e,n)/l),u=pt.round(_e.distance(e,i)/l);let h=Math.floor((c+u)/2)+7;switch(h&3){case 0:h++;break;case 2:h--;break;case 3:throw new ee("Dimensions could be not found.")}return h}calculateModuleSize(e,n,i){return(this.calculateModuleSizeOneWay(e,n)+this.calculateModuleSizeOneWay(e,i))/2}calculateModuleSizeOneWay(e,n){const i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(n.getX()),Math.floor(n.getY())),l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(i)?l/7:isNaN(l)?i/7:(i+l)/14}sizeOfBlackWhiteBlackRunBothWays(e,n,i,l){let c=this.sizeOfBlackWhiteBlackRun(e,n,i,l),u=1,h=e-(i-e);h<0?(u=e/(e-h),h=0):h>=this.image.getWidth()&&(u=(this.image.getWidth()-1-e)/(h-e),h=this.image.getWidth()-1);let m=Math.floor(n-(l-n)*u);return u=1,m<0?(u=n/(n-m),m=0):m>=this.image.getHeight()&&(u=(this.image.getHeight()-1-n)/(m-n),m=this.image.getHeight()-1),h=Math.floor(e+(h-e)*u),c+=this.sizeOfBlackWhiteBlackRun(e,n,h,m),c-1}sizeOfBlackWhiteBlackRun(e,n,i,l){const c=Math.abs(l-n)>Math.abs(i-e);if(c){let U=e;e=n,n=U,U=i,i=l,l=U}const u=Math.abs(i-e),h=Math.abs(l-n);let m=-u/2;const C=e<i?1:-1,N=n<l?1:-1;let P=0;const M=i+C;for(let U=e,X=n;U!==M;U+=C){const $=c?X:U,te=c?U:X;if(P===1===this.image.get($,te)){if(P===2)return pt.distance(U,X,e,n);P++}if(m+=h,m>0){if(X===l)break;X+=N,m-=u}}return P===2?pt.distance(i+C,l,e,n):NaN}findAlignmentInRegion(e,n,i,l){const c=Math.floor(l*e),u=Math.max(0,n-c),h=Math.min(this.image.getWidth()-1,n+c);if(h-u<e*3)throw new ee("Alignment top exceeds estimated module size.");const m=Math.max(0,i-c),C=Math.min(this.image.getHeight()-1,i+c);if(C-m<e*3)throw new ee("Alignment bottom exceeds estimated module size.");return new Ir(this.image,u,m,h-u,C-m,e,this.resultPointCallback).find()}}class Hn{constructor(){this.decoder=new Xo}getDecoder(){return this.decoder}decode(e,n){let i,l;if(n!=null&&n.get(de.PURE_BARCODE)!==void 0){const m=Hn.extractPureBits(e.getBlackMatrix());i=this.decoder.decodeBitMatrix(m,n),l=Hn.NO_POINTS}else{const m=new $r(e.getBlackMatrix()).detect(n);i=this.decoder.decodeBitMatrix(m.getBits(),n),l=m.getPoints()}i.getOther()instanceof Go&&i.getOther().applyMirroredCorrection(l);const c=new Oe(i.getText(),i.getRawBytes(),void 0,l,oe.QR_CODE,void 0),u=i.getByteSegments();u!==null&&c.putMetadata(Ne.BYTE_SEGMENTS,u);const h=i.getECLevel();return h!==null&&c.putMetadata(Ne.ERROR_CORRECTION_LEVEL,h),i.hasStructuredAppend()&&(c.putMetadata(Ne.STRUCTURED_APPEND_SEQUENCE,i.getStructuredAppendSequenceNumber()),c.putMetadata(Ne.STRUCTURED_APPEND_PARITY,i.getStructuredAppendParity())),c}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(n===null||i===null)throw new ee;const l=this.moduleSize(n,e);let c=n[1],u=i[1],h=n[0],m=i[0];if(h>=m||c>=u)throw new ee;if(u-c!==m-h&&(m=h+(u-c),m>=e.getWidth()))throw new ee;const C=Math.round((m-h+1)/l),N=Math.round((u-c+1)/l);if(C<=0||N<=0)throw new ee;if(N!==C)throw new ee;const P=Math.floor(l/2);c+=P,h+=P;const M=h+Math.floor((C-1)*l)-m;if(M>0){if(M>P)throw new ee;h-=M}const U=c+Math.floor((N-1)*l)-u;if(U>0){if(U>P)throw new ee;c-=U}const X=new Fe(C,N);for(let $=0;$<N;$++){const te=c+Math.floor($*l);for(let ae=0;ae<C;ae++)e.get(h+Math.floor(ae*l),te)&&X.set(ae,$)}return X}static moduleSize(e,n){const i=n.getHeight(),l=n.getWidth();let c=e[0],u=e[1],h=!0,m=0;for(;c<l&&u<i;){if(h!==n.get(c,u)){if(++m===5)break;h=!h}c++,u++}if(c===l||u===i)throw new ee;return(c-e[0])/7}}Hn.NO_POINTS=new Array;class ot{PDF417Common(){}static getBitCountSum(e){return pt.sum(e)}static toIntArray(e){if(e==null||!e.length)return ot.EMPTY_INT_ARRAY;const n=new Int32Array(e.length);let i=0;for(const l of e)n[i++]=l;return n}static getCodeword(e){const n=W.binarySearch(ot.SYMBOL_TABLE,e&262143);return n<0?-1:(ot.CODEWORD_TABLE[n]-1)%ot.NUMBER_OF_CODEWORDS}}ot.NUMBER_OF_CODEWORDS=929,ot.MAX_CODEWORDS_IN_BARCODE=ot.NUMBER_OF_CODEWORDS-1,ot.MIN_ROWS_IN_BARCODE=3,ot.MAX_ROWS_IN_BARCODE=90,ot.MODULES_IN_CODEWORD=17,ot.MODULES_IN_STOP_PATTERN=18,ot.BARS_IN_MODULE=8,ot.EMPTY_INT_ARRAY=new Int32Array([]),ot.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ot.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ja{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class ft{static detectMultiple(e,n,i){let l=e.getBlackMatrix(),c=ft.detect(i,l);return c.length||(l=l.clone(),l.rotate180(),c=ft.detect(i,l)),new Ja(l,c)}static detect(e,n){const i=new Array;let l=0,c=0,u=!1;for(;l<n.getHeight();){const h=ft.findVertices(n,l,c);if(h[0]==null&&h[3]==null){if(!u)break;u=!1,c=0;for(const m of i)m[1]!=null&&(l=Math.trunc(Math.max(l,m[1].getY()))),m[3]!=null&&(l=Math.max(l,Math.trunc(m[3].getY())));l+=ft.ROW_STEP;continue}if(u=!0,i.push(h),!e)break;h[2]!=null?(c=Math.trunc(h[2].getX()),l=Math.trunc(h[2].getY())):(c=Math.trunc(h[4].getX()),l=Math.trunc(h[4].getY()))}return i}static findVertices(e,n,i){const l=e.getHeight(),c=e.getWidth(),u=new Array(8);return ft.copyToResult(u,ft.findRowsWithPattern(e,l,c,n,i,ft.START_PATTERN),ft.INDEXES_START_PATTERN),u[4]!=null&&(i=Math.trunc(u[4].getX()),n=Math.trunc(u[4].getY())),ft.copyToResult(u,ft.findRowsWithPattern(e,l,c,n,i,ft.STOP_PATTERN),ft.INDEXES_STOP_PATTERN),u}static copyToResult(e,n,i){for(let l=0;l<i.length;l++)e[i[l]]=n[l]}static findRowsWithPattern(e,n,i,l,c,u){const h=new Array(4);let m=!1;const C=new Int32Array(u.length);for(;l<n;l+=ft.ROW_STEP){let P=ft.findGuardPattern(e,c,l,i,!1,u,C);if(P!=null){for(;l>0;){const M=ft.findGuardPattern(e,c,--l,i,!1,u,C);if(M!=null)P=M;else{l++;break}}h[0]=new _e(P[0],l),h[1]=new _e(P[1],l),m=!0;break}}let N=l+1;if(m){let P=0,M=Int32Array.from([Math.trunc(h[0].getX()),Math.trunc(h[1].getX())]);for(;N<n;N++){const U=ft.findGuardPattern(e,M[0],N,i,!1,u,C);if(U!=null&&Math.abs(M[0]-U[0])<ft.MAX_PATTERN_DRIFT&&Math.abs(M[1]-U[1])<ft.MAX_PATTERN_DRIFT)M=U,P=0;else{if(P>ft.SKIPPED_ROW_COUNT_MAX)break;P++}}N-=P+1,h[2]=new _e(M[0],N),h[3]=new _e(M[1],N)}return N-l<ft.BARCODE_MIN_HEIGHT&&W.fill(h,null),h}static findGuardPattern(e,n,i,l,c,u,h){W.fillWithin(h,0,h.length,0);let m=n,C=0;for(;e.get(m,i)&&m>0&&C++<ft.MAX_PIXEL_DRIFT;)m--;let N=m,P=0,M=u.length;for(let U=c;N<l;N++)if(e.get(N,i)!==U)h[P]++;else{if(P===M-1){if(ft.patternMatchVariance(h,u,ft.MAX_INDIVIDUAL_VARIANCE)<ft.MAX_AVG_VARIANCE)return new Int32Array([m,N]);m+=h[0]+h[1],B.arraycopy(h,2,h,0,P-1),h[P-1]=0,h[P]=0,P--}else P++;h[P]=1,U=!U}return P===M-1&&ft.patternMatchVariance(h,u,ft.MAX_INDIVIDUAL_VARIANCE)<ft.MAX_AVG_VARIANCE?new Int32Array([m,N-1]):null}static patternMatchVariance(e,n,i){let l=e.length,c=0,u=0;for(let C=0;C<l;C++)c+=e[C],u+=n[C];if(c<u)return 1/0;let h=c/u;i*=h;let m=0;for(let C=0;C<l;C++){let N=e[C],P=n[C]*h,M=N>P?N-P:P-N;if(M>i)return 1/0;m+=M}return m/c}}ft.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),ft.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),ft.MAX_AVG_VARIANCE=.42,ft.MAX_INDIVIDUAL_VARIANCE=.8,ft.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),ft.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),ft.MAX_PIXEL_DRIFT=3,ft.MAX_PATTERN_DRIFT=5,ft.SKIPPED_ROW_COUNT_MAX=25,ft.ROW_STEP=5,ft.BARCODE_MIN_HEIGHT=10;class Nn{constructor(e,n){if(n.length===0)throw new I;this.field=e;let i=n.length;if(i>1&&n[0]===0){let l=1;for(;l<i&&n[l]===0;)l++;l===i?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(i-l),B.arraycopy(n,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let l=0;for(let c of this.coefficients)l=this.field.add(l,c);return l}let n=this.coefficients[0],i=this.coefficients.length;for(let l=1;l<i;l++)n=this.field.add(this.field.multiply(e,n),this.coefficients[l]);return n}add(e){if(!this.field.equals(e.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,i=e.coefficients;if(n.length>i.length){let u=n;n=i,i=u}let l=new Int32Array(i.length),c=i.length-n.length;B.arraycopy(i,0,l,0,c);for(let u=c;u<i.length;u++)l[u]=this.field.add(n[u-c],i[u]);return new Nn(this.field,l)}subtract(e){if(!this.field.equals(e.field))throw new I("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof Nn?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new Nn(this.field,new Int32Array([0]));let n=this.coefficients,i=n.length,l=e.coefficients,c=l.length,u=new Int32Array(i+c-1);for(let h=0;h<i;h++){let m=n[h];for(let C=0;C<c;C++)u[h+C]=this.field.add(u[h+C],this.field.multiply(m,l[C]))}return new Nn(this.field,u)}negative(){let e=this.coefficients.length,n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=this.field.subtract(0,this.coefficients[i]);return new Nn(this.field,n)}multiplyScalar(e){if(e===0)return new Nn(this.field,new Int32Array([0]));if(e===1)return this;let n=this.coefficients.length,i=new Int32Array(n);for(let l=0;l<n;l++)i[l]=this.field.multiply(this.coefficients[l],e);return new Nn(this.field,i)}multiplyByMonomial(e,n){if(e<0)throw new I;if(n===0)return new Nn(this.field,new Int32Array([0]));let i=this.coefficients.length,l=new Int32Array(i+e);for(let c=0;c<i;c++)l[c]=this.field.multiply(this.coefficients[c],n);return new Nn(this.field,l)}toString(){let e=new Pe;for(let n=this.getDegree();n>=0;n--){let i=this.getCoefficient(n);i!==0&&(i<0?(e.append(" - "),i=-i):e.length()>0&&e.append(" + "),(n===0||i!==1)&&e.append(i),n!==0&&(n===1?e.append("x"):(e.append("x^"),e.append(n))))}return e.toString()}}class el{add(e,n){return(e+n)%this.modulus}subtract(e,n){return(this.modulus+e-n)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new I;return this.logTable[e]}inverse(e){if(e===0)throw new ut;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class $i extends el{constructor(e,n){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let i=1;for(let l=0;l<e;l++)this.expTable[l]=i,i=i*n%e;for(let l=0;l<e-1;l++)this.logTable[this.expTable[l]]=l;this.zero=new Nn(this,new Int32Array([0])),this.one=new Nn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new I;if(n===0)return this.zero;let i=new Int32Array(e+1);return i[0]=n,new Nn(this,i)}}$i.PDF417_GF=new $i(ot.NUMBER_OF_CODEWORDS,3);class Yo{constructor(){this.field=$i.PDF417_GF}decode(e,n,i){let l=new Nn(this.field,e),c=new Int32Array(n),u=!1;for(let X=n;X>0;X--){let $=l.evaluateAt(this.field.exp(X));c[n-X]=$,$!==0&&(u=!0)}if(!u)return 0;let h=this.field.getOne();if(i!=null)for(const X of i){let $=this.field.exp(e.length-1-X),te=new Nn(this.field,new Int32Array([this.field.subtract(0,$),1]));h=h.multiply(te)}let m=new Nn(this.field,c),C=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),m,n),N=C[0],P=C[1],M=this.findErrorLocations(N),U=this.findErrorMagnitudes(P,N,M);for(let X=0;X<M.length;X++){let $=e.length-1-this.field.log(M[X]);if($<0)throw D.getChecksumInstance();e[$]=this.field.subtract(e[$],U[X])}return M.length}runEuclideanAlgorithm(e,n,i){if(e.getDegree()<n.getDegree()){let M=e;e=n,n=M}let l=e,c=n,u=this.field.getZero(),h=this.field.getOne();for(;c.getDegree()>=Math.round(i/2);){let M=l,U=u;if(l=c,u=h,l.isZero())throw D.getChecksumInstance();c=M;let X=this.field.getZero(),$=l.getCoefficient(l.getDegree()),te=this.field.inverse($);for(;c.getDegree()>=l.getDegree()&&!c.isZero();){let ae=c.getDegree()-l.getDegree(),Se=this.field.multiply(c.getCoefficient(c.getDegree()),te);X=X.add(this.field.buildMonomial(ae,Se)),c=c.subtract(l.multiplyByMonomial(ae,Se))}h=X.multiply(u).subtract(U).negative()}let m=h.getCoefficient(0);if(m===0)throw D.getChecksumInstance();let C=this.field.inverse(m),N=h.multiply(C),P=c.multiply(C);return[N,P]}findErrorLocations(e){let n=e.getDegree(),i=new Int32Array(n),l=0;for(let c=1;c<this.field.getSize()&&l<n;c++)e.evaluateAt(c)===0&&(i[l]=this.field.inverse(c),l++);if(l!==n)throw D.getChecksumInstance();return i}findErrorMagnitudes(e,n,i){let l=n.getDegree(),c=new Int32Array(l);for(let C=1;C<=l;C++)c[l-C]=this.field.multiply(C,n.getCoefficient(C));let u=new Nn(this.field,c),h=i.length,m=new Int32Array(h);for(let C=0;C<h;C++){let N=this.field.inverse(i[C]),P=this.field.subtract(0,e.evaluateAt(N)),M=this.field.inverse(u.evaluateAt(N));m[C]=this.field.multiply(P,M)}return m}}class Ai{constructor(e,n,i,l,c){e instanceof Ai?this.constructor_2(e):this.constructor_1(e,n,i,l,c)}constructor_1(e,n,i,l,c){const u=n==null||i==null,h=l==null||c==null;if(u&&h)throw new ee;u?(n=new _e(0,l.getY()),i=new _e(0,c.getY())):h&&(l=new _e(e.getWidth()-1,n.getY()),c=new _e(e.getWidth()-1,i.getY())),this.image=e,this.topLeft=n,this.bottomLeft=i,this.topRight=l,this.bottomRight=c,this.minX=Math.trunc(Math.min(n.getX(),i.getX())),this.maxX=Math.trunc(Math.max(l.getX(),c.getX())),this.minY=Math.trunc(Math.min(n.getY(),l.getY())),this.maxY=Math.trunc(Math.max(i.getY(),c.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,n){return e==null?n:n==null?e:new Ai(e.image,e.topLeft,e.bottomLeft,n.topRight,n.bottomRight)}addMissingRows(e,n,i){let l=this.topLeft,c=this.bottomLeft,u=this.topRight,h=this.bottomRight;if(e>0){let m=i?this.topLeft:this.topRight,C=Math.trunc(m.getY()-e);C<0&&(C=0);let N=new _e(m.getX(),C);i?l=N:u=N}if(n>0){let m=i?this.bottomLeft:this.bottomRight,C=Math.trunc(m.getY()+n);C>=this.image.getHeight()&&(C=this.image.getHeight()-1);let N=new _e(m.getX(),C);i?c=N:h=N}return new Ai(this.image,l,c,u,h)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ss{constructor(e,n,i,l){this.columnCount=e,this.errorCorrectionLevel=l,this.rowCountUpperPart=n,this.rowCountLowerPart=i,this.rowCount=n+i}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Zr{constructor(){this.buffer=""}static form(e,n){let i=-1;function l(u,h,m,C,N,P){if(u==="%%")return"%";if(n[++i]===void 0)return;u=C?parseInt(C.substr(1)):void 0;let M=N?parseInt(N.substr(1)):void 0,U;switch(P){case"s":U=n[i];break;case"c":U=n[i][0];break;case"f":U=parseFloat(n[i]).toFixed(u);break;case"p":U=parseFloat(n[i]).toPrecision(u);break;case"e":U=parseFloat(n[i]).toExponential(u);break;case"x":U=parseInt(n[i]).toString(M||16);break;case"d":U=parseFloat(parseInt(n[i],M||10).toPrecision(u)).toFixed(0);break}U=typeof U=="object"?JSON.stringify(U):(+U).toString(M);let X=parseInt(m),$=m&&m[0]+""=="0"?"0":" ";for(;U.length<X;)U=h!==void 0?U+$:$+U;return U}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(c,l)}format(e,...n){this.buffer+=Zr.form(e,n)}toString(){return this.buffer}}class Br{constructor(e){this.boundingBox=new Ai(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let n=this.getCodeword(e);if(n!=null)return n;for(let i=1;i<Br.MAX_NEARBY_DISTANCE;i++){let l=this.imageRowToCodewordIndex(e)-i;if(l>=0&&(n=this.codewords[l],n!=null)||(l=this.imageRowToCodewordIndex(e)+i,l<this.codewords.length&&(n=this.codewords[l],n!=null)))return n}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,n){this.codewords[this.imageRowToCodewordIndex(e)]=n}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new Zr;let n=0;for(const i of this.codewords){if(i==null){e.format("%3d:    |   %n",n++);continue}e.format("%3d: %3d|%3d%n",n++,i.getRowNumber(),i.getValue())}return e.toString()}}Br.MAX_NEARBY_DISTANCE=5;class ci{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let n=this.values.get(e);n==null&&(n=0),n++,this.values.set(e,n)}getValue(){let e=-1,n=new Array;for(const[i,l]of this.values.entries()){const c={getKey:()=>i,getValue:()=>l};c.getValue()>e?(e=c.getValue(),n=[],n.push(c.getKey())):c.getValue()===e&&n.push(c.getKey())}return ot.toIntArray(n)}getConfidence(e){return this.values.get(e)}}class tl extends Br{constructor(e,n){super(e),this._isLeft=n}setRowNumbers(){for(let e of this.getCodewords())e!=null&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,e);let i=this.getBoundingBox(),l=this._isLeft?i.getTopLeft():i.getTopRight(),c=this._isLeft?i.getBottomLeft():i.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(l.getY())),h=this.imageRowToCodewordIndex(Math.trunc(c.getY())),m=-1,C=1,N=0;for(let P=u;P<h;P++){if(n[P]==null)continue;let M=n[P],U=M.getRowNumber()-m;if(U===0)N++;else if(U===1)C=Math.max(C,N),N=1,m=M.getRowNumber();else if(U<0||M.getRowNumber()>=e.getRowCount()||U>P)n[P]=null;else{let X;C>2?X=(C-2)*U:X=U;let $=X>=P;for(let te=1;te<=X&&!$;te++)$=n[P-te]!=null;$?n[P]=null:(m=M.getRowNumber(),N=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let n=new Int32Array(e.getRowCount());for(let i of this.getCodewords())if(i!=null){let l=i.getRowNumber();if(l>=n.length)continue;n[l]++}return n}adjustIncompleteIndicatorColumnRowNumbers(e){let n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),l=this._isLeft?n.getBottomLeft():n.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=this.imageRowToCodewordIndex(Math.trunc(l.getY())),h=this.getCodewords(),m=-1;for(let C=c;C<u;C++){if(h[C]==null)continue;let N=h[C];N.setRowNumberAsRowIndicatorColumn();let P=N.getRowNumber()-m;P===0||(P===1?m=N.getRowNumber():N.getRowNumber()>=e.getRowCount()?h[C]=null:m=N.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),n=new ci,i=new ci,l=new ci,c=new ci;for(let h of e){if(h==null)continue;h.setRowNumberAsRowIndicatorColumn();let m=h.getValue()%30,C=h.getRowNumber();switch(this._isLeft||(C+=2),C%3){case 0:i.setValue(m*3+1);break;case 1:c.setValue(m/3),l.setValue(m%3);break;case 2:n.setValue(m+1);break}}if(n.getValue().length===0||i.getValue().length===0||l.getValue().length===0||c.getValue().length===0||n.getValue()[0]<1||i.getValue()[0]+l.getValue()[0]<ot.MIN_ROWS_IN_BARCODE||i.getValue()[0]+l.getValue()[0]>ot.MAX_ROWS_IN_BARCODE)return null;let u=new Ss(n.getValue()[0],i.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(e,u),u}removeIncorrectCodewords(e,n){for(let i=0;i<e.length;i++){let l=e[i];if(e[i]==null)continue;let c=l.getValue()%30,u=l.getRowNumber();if(u>n.getRowCount()){e[i]=null;continue}switch(this._isLeft||(u+=2),u%3){case 0:c*3+1!==n.getRowCountUpperPart()&&(e[i]=null);break;case 1:(Math.trunc(c/3)!==n.getErrorCorrectionLevel()||c%3!==n.getRowCountLowerPart())&&(e[i]=null);break;case 2:c+1!==n.getColumnCount()&&(e[i]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ts{constructor(e,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=ot.MAX_CODEWORDS_IN_BARCODE,n;do n=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<n);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let n=1;n<this.barcodeColumnCount+1;n++){let i=this.detectionResultColumns[n].getCodewords();for(let l=0;l<i.length;l++)i[l]!=null&&(i[l].hasValidRowNumber()||this.adjustRowNumbers(n,l,i))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<e.length;i++)if(e[i]!=null&&n[i]!=null&&e[i].getRowNumber()===n[i].getRowNumber())for(let l=1;l<=this.barcodeColumnCount;l++){let c=this.detectionResultColumns[l].getCodewords()[i];c!=null&&(c.setRowNumber(e[i].getRowNumber()),c.hasValidRowNumber()||(this.detectionResultColumns[l].getCodewords()[i]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<n.length;i++){if(n[i]==null)continue;let l=n[i].getRowNumber(),c=0;for(let u=this.barcodeColumnCount+1;u>0&&c<this.ADJUST_ROW_NUMBER_SKIP;u--){let h=this.detectionResultColumns[u].getCodewords()[i];h!=null&&(c=Ts.adjustRowNumberIfValid(l,c,h),h.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,n=this.detectionResultColumns[0].getCodewords();for(let i=0;i<n.length;i++){if(n[i]==null)continue;let l=n[i].getRowNumber(),c=0;for(let u=1;u<this.barcodeColumnCount+1&&c<this.ADJUST_ROW_NUMBER_SKIP;u++){let h=this.detectionResultColumns[u].getCodewords()[i];h!=null&&(c=Ts.adjustRowNumberIfValid(l,c,h),h.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,n,i){return i==null||i.hasValidRowNumber()||(i.isValidRowNumber(e)?(i.setRowNumber(e),n=0):++n),n}adjustRowNumbers(e,n,i){if(!this.detectionResultColumns[e-1])return;let l=i[n],c=this.detectionResultColumns[e-1].getCodewords(),u=c;this.detectionResultColumns[e+1]!=null&&(u=this.detectionResultColumns[e+1].getCodewords());let h=new Array(14);h[2]=c[n],h[3]=u[n],n>0&&(h[0]=i[n-1],h[4]=c[n-1],h[5]=u[n-1]),n>1&&(h[8]=i[n-2],h[10]=c[n-2],h[11]=u[n-2]),n<i.length-1&&(h[1]=i[n+1],h[6]=c[n+1],h[7]=u[n+1]),n<i.length-2&&(h[9]=i[n+2],h[12]=c[n+2],h[13]=u[n+2]);for(let m of h)if(Ts.adjustRowNumber(l,m))return}static adjustRowNumber(e,n){return n==null?!1:n.hasValidRowNumber()&&n.getBucket()===e.getBucket()?(e.setRowNumber(n.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,n){this.detectionResultColumns[e]=n}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let n=new Zr;for(let i=0;i<e.getCodewords().length;i++){n.format("CW %3d:",i);for(let l=0;l<this.barcodeColumnCount+2;l++){if(this.detectionResultColumns[l]==null){n.format("    |   ");continue}let c=this.detectionResultColumns[l].getCodewords()[i];if(c==null){n.format("    |   ");continue}n.format(" %3d|%3d",c.getRowNumber(),c.getValue())}n.format("%n")}return n.toString()}}class bi{constructor(e,n,i,l){this.rowNumber=bi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(n),this.bucket=Math.trunc(i),this.value=Math.trunc(l)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==bi.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}bi.BARCODE_ROW_UNKNOWN=-1;class _n{static initialize(){for(let e=0;e<ot.SYMBOL_TABLE.length;e++){let n=ot.SYMBOL_TABLE[e],i=n&1;for(let l=0;l<ot.BARS_IN_MODULE;l++){let c=0;for(;(n&1)===i;)c+=1,n>>=1;i=n&1,_n.RATIOS_TABLE[e]||(_n.RATIOS_TABLE[e]=new Array(ot.BARS_IN_MODULE)),_n.RATIOS_TABLE[e][ot.BARS_IN_MODULE-l-1]=Math.fround(c/ot.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let n=_n.getDecodedCodewordValue(_n.sampleBitCounts(e));return n!==-1?n:_n.getClosestDecodedValue(e)}static sampleBitCounts(e){let n=pt.sum(e),i=new Int32Array(ot.BARS_IN_MODULE),l=0,c=0;for(let u=0;u<ot.MODULES_IN_CODEWORD;u++){let h=n/(2*ot.MODULES_IN_CODEWORD)+u*n/ot.MODULES_IN_CODEWORD;c+e[l]<=h&&(c+=e[l],l++),i[l]++}return i}static getDecodedCodewordValue(e){let n=_n.getBitValue(e);return ot.getCodeword(n)===-1?-1:n}static getBitValue(e){let n=0;for(let i=0;i<e.length;i++)for(let l=0;l<e[i];l++)n=n<<1|(i%2===0?1:0);return Math.trunc(n)}static getClosestDecodedValue(e){let n=pt.sum(e),i=new Array(ot.BARS_IN_MODULE);if(n>1)for(let u=0;u<i.length;u++)i[u]=Math.fround(e[u]/n);let l=xn.MAX_VALUE,c=-1;this.bSymbolTableReady||_n.initialize();for(let u=0;u<_n.RATIOS_TABLE.length;u++){let h=0,m=_n.RATIOS_TABLE[u];for(let C=0;C<ot.BARS_IN_MODULE;C++){let N=Math.fround(m[C]-i[C]);if(h+=Math.fround(N*N),h>=l)break}h<l&&(l=h,c=ot.SYMBOL_TABLE[u])}return c}}_n.bSymbolTableReady=!1,_n.RATIOS_TABLE=new Array(ot.SYMBOL_TABLE.length).map(k=>new Array(ot.BARS_IN_MODULE));class ro{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class Ko{static parseLong(e,n=void 0){return parseInt(e,n)}}class qr extends E{}qr.kind="NullPointerException";class $o{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,n,i){if(e==null)throw new qr;if(n<0||n>e.length||i<0||n+i>e.length||n+i<0)throw new F;if(i===0)return;for(let l=0;l<i;l++)this.write(e[n+l])}flush(){}close(){}}class io extends E{}class nl extends $o{constructor(e=32){if(super(),this.count=0,e<0)throw new I("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let i=this.buf.length<<1;if(i-e<0&&(i=e),i<0){if(e<0)throw new io;i=z.MAX_VALUE}this.buf=W.copyOfUint8Array(this.buf,i)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,n,i){if(n<0||n>e.length||i<0||n+i-e.length>0)throw new F;this.ensureCapacity(this.count+i),B.arraycopy(e,n,this.buf,this.count,i),this.count+=i}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return W.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var Dt;(function(k){k[k.ALPHA=0]="ALPHA",k[k.LOWER=1]="LOWER",k[k.MIXED=2]="MIXED",k[k.PUNCT=3]="PUNCT",k[k.ALPHA_SHIFT=4]="ALPHA_SHIFT",k[k.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Dt||(Dt={}));function Is(){if(typeof window<"u")return window.BigInt||null;if(typeof Jl<"u")return Jl.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ns;function hn(k){if(typeof Ns>"u"&&(Ns=Is()),Ns===null)throw new Error("BigInt is not supported!");return Ns(k)}function Zi(){let k=[];k[0]=hn(1);let e=hn(900);k[1]=e;for(let n=2;n<16;n++)k[n]=k[n-1]*e;return k}class le{static decode(e,n){let i=new Pe(""),l=Z.ISO8859_1;i.enableDecoding(l);let c=1,u=e[c++],h=new ro;for(;c<e[0];){switch(u){case le.TEXT_COMPACTION_MODE_LATCH:c=le.textCompaction(e,c,i);break;case le.BYTE_COMPACTION_MODE_LATCH:case le.BYTE_COMPACTION_MODE_LATCH_6:c=le.byteCompaction(u,e,l,c,i);break;case le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[c++]);break;case le.NUMERIC_COMPACTION_MODE_LATCH:c=le.numericCompaction(e,c,i);break;case le.ECI_CHARSET:Z.getCharacterSetECIByValue(e[c++]);break;case le.ECI_GENERAL_PURPOSE:c+=2;break;case le.ECI_USER_DEFINED:c++;break;case le.BEGIN_MACRO_PDF417_CONTROL_BLOCK:c=le.decodeMacroBlock(e,c,h);break;case le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case le.MACRO_PDF417_TERMINATOR:throw new q;default:c--,c=le.textCompaction(e,c,i);break}if(c<e.length)u=e[c++];else throw q.getFormatInstance()}if(i.length()===0)throw q.getFormatInstance();let m=new Ve(null,i.toString(),null,n);return m.setOther(h),m}static decodeMacroBlock(e,n,i){if(n+le.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw q.getFormatInstance();let l=new Int32Array(le.NUMBER_OF_SEQUENCE_CODEWORDS);for(let h=0;h<le.NUMBER_OF_SEQUENCE_CODEWORDS;h++,n++)l[h]=e[n];i.setSegmentIndex(z.parseInt(le.decodeBase900toBase10(l,le.NUMBER_OF_SEQUENCE_CODEWORDS)));let c=new Pe;n=le.textCompaction(e,n,c),i.setFileId(c.toString());let u=-1;for(e[n]===le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(u=n+1);n<e[0];)switch(e[n]){case le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(n++,e[n]){case le.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let h=new Pe;n=le.textCompaction(e,n+1,h),i.setFileName(h.toString());break;case le.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let m=new Pe;n=le.textCompaction(e,n+1,m),i.setSender(m.toString());break;case le.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let C=new Pe;n=le.textCompaction(e,n+1,C),i.setAddressee(C.toString());break;case le.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let N=new Pe;n=le.numericCompaction(e,n+1,N),i.setSegmentCount(z.parseInt(N.toString()));break;case le.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let P=new Pe;n=le.numericCompaction(e,n+1,P),i.setTimestamp(Ko.parseLong(P.toString()));break;case le.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let M=new Pe;n=le.numericCompaction(e,n+1,M),i.setChecksum(z.parseInt(M.toString()));break;case le.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let U=new Pe;n=le.numericCompaction(e,n+1,U),i.setFileSize(Ko.parseLong(U.toString()));break;default:throw q.getFormatInstance()}break;case le.MACRO_PDF417_TERMINATOR:n++,i.setLastSegment(!0);break;default:throw q.getFormatInstance()}if(u!==-1){let h=n-u;i.isLastSegment()&&h--,i.setOptionalData(W.copyOfRange(e,u,u+h))}return n}static textCompaction(e,n,i){let l=new Int32Array((e[0]-n)*2),c=new Int32Array((e[0]-n)*2),u=0,h=!1;for(;n<e[0]&&!h;){let m=e[n++];if(m<le.TEXT_COMPACTION_MODE_LATCH)l[u]=m/30,l[u+1]=m%30,u+=2;else switch(m){case le.TEXT_COMPACTION_MODE_LATCH:l[u++]=le.TEXT_COMPACTION_MODE_LATCH;break;case le.BYTE_COMPACTION_MODE_LATCH:case le.BYTE_COMPACTION_MODE_LATCH_6:case le.NUMERIC_COMPACTION_MODE_LATCH:case le.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case le.MACRO_PDF417_TERMINATOR:n--,h=!0;break;case le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l[u]=le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,m=e[n++],c[u]=m,u++;break}}return le.decodeTextCompaction(l,c,u,i),n}static decodeTextCompaction(e,n,i,l){let c=Dt.ALPHA,u=Dt.ALPHA,h=0;for(;h<i;){let m=e[h],C="";switch(c){case Dt.ALPHA:if(m<26)C=String.fromCharCode(65+m);else switch(m){case 26:C=" ";break;case le.LL:c=Dt.LOWER;break;case le.ML:c=Dt.MIXED;break;case le.PS:u=c,c=Dt.PUNCT_SHIFT;break;case le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case le.TEXT_COMPACTION_MODE_LATCH:c=Dt.ALPHA;break}break;case Dt.LOWER:if(m<26)C=String.fromCharCode(97+m);else switch(m){case 26:C=" ";break;case le.AS:u=c,c=Dt.ALPHA_SHIFT;break;case le.ML:c=Dt.MIXED;break;case le.PS:u=c,c=Dt.PUNCT_SHIFT;break;case le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case le.TEXT_COMPACTION_MODE_LATCH:c=Dt.ALPHA;break}break;case Dt.MIXED:if(m<le.PL)C=le.MIXED_CHARS[m];else switch(m){case le.PL:c=Dt.PUNCT;break;case 26:C=" ";break;case le.LL:c=Dt.LOWER;break;case le.AL:c=Dt.ALPHA;break;case le.PS:u=c,c=Dt.PUNCT_SHIFT;break;case le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case le.TEXT_COMPACTION_MODE_LATCH:c=Dt.ALPHA;break}break;case Dt.PUNCT:if(m<le.PAL)C=le.PUNCT_CHARS[m];else switch(m){case le.PAL:c=Dt.ALPHA;break;case le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case le.TEXT_COMPACTION_MODE_LATCH:c=Dt.ALPHA;break}break;case Dt.ALPHA_SHIFT:if(c=u,m<26)C=String.fromCharCode(65+m);else switch(m){case 26:C=" ";break;case le.TEXT_COMPACTION_MODE_LATCH:c=Dt.ALPHA;break}break;case Dt.PUNCT_SHIFT:if(c=u,m<le.PAL)C=le.PUNCT_CHARS[m];else switch(m){case le.PAL:c=Dt.ALPHA;break;case le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case le.TEXT_COMPACTION_MODE_LATCH:c=Dt.ALPHA;break}break}C!==""&&l.append(C),h++}}static byteCompaction(e,n,i,l,c){let u=new nl,h=0,m=0,C=!1;switch(e){case le.BYTE_COMPACTION_MODE_LATCH:let N=new Int32Array(6),P=n[l++];for(;l<n[0]&&!C;)switch(N[h++]=P,m=900*m+P,P=n[l++],P){case le.TEXT_COMPACTION_MODE_LATCH:case le.BYTE_COMPACTION_MODE_LATCH:case le.NUMERIC_COMPACTION_MODE_LATCH:case le.BYTE_COMPACTION_MODE_LATCH_6:case le.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case le.MACRO_PDF417_TERMINATOR:l--,C=!0;break;default:if(h%5===0&&h>0){for(let M=0;M<6;++M)u.write(Number(hn(m)>>hn(8*(5-M))));m=0,h=0}break}l===n[0]&&P<le.TEXT_COMPACTION_MODE_LATCH&&(N[h++]=P);for(let M=0;M<h;M++)u.write(N[M]);break;case le.BYTE_COMPACTION_MODE_LATCH_6:for(;l<n[0]&&!C;){let M=n[l++];if(M<le.TEXT_COMPACTION_MODE_LATCH)h++,m=900*m+M;else switch(M){case le.TEXT_COMPACTION_MODE_LATCH:case le.BYTE_COMPACTION_MODE_LATCH:case le.NUMERIC_COMPACTION_MODE_LATCH:case le.BYTE_COMPACTION_MODE_LATCH_6:case le.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case le.MACRO_PDF417_TERMINATOR:l--,C=!0;break}if(h%5===0&&h>0){for(let U=0;U<6;++U)u.write(Number(hn(m)>>hn(8*(5-U))));m=0,h=0}}break}return c.append(ke.decode(u.toByteArray(),i)),l}static numericCompaction(e,n,i){let l=0,c=!1,u=new Int32Array(le.MAX_NUMERIC_CODEWORDS);for(;n<e[0]&&!c;){let h=e[n++];if(n===e[0]&&(c=!0),h<le.TEXT_COMPACTION_MODE_LATCH)u[l]=h,l++;else switch(h){case le.TEXT_COMPACTION_MODE_LATCH:case le.BYTE_COMPACTION_MODE_LATCH:case le.BYTE_COMPACTION_MODE_LATCH_6:case le.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case le.MACRO_PDF417_TERMINATOR:n--,c=!0;break}(l%le.MAX_NUMERIC_CODEWORDS===0||h===le.NUMERIC_COMPACTION_MODE_LATCH||c)&&l>0&&(i.append(le.decodeBase900toBase10(u,l)),l=0)}return n}static decodeBase900toBase10(e,n){let i=hn(0);for(let c=0;c<n;c++)i+=le.EXP900[n-c-1]*hn(e[c]);let l=i.toString();if(l.charAt(0)!=="1")throw new q;return l.substring(1)}}le.TEXT_COMPACTION_MODE_LATCH=900,le.BYTE_COMPACTION_MODE_LATCH=901,le.NUMERIC_COMPACTION_MODE_LATCH=902,le.BYTE_COMPACTION_MODE_LATCH_6=924,le.ECI_USER_DEFINED=925,le.ECI_GENERAL_PURPOSE=926,le.ECI_CHARSET=927,le.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,le.MACRO_PDF417_TERMINATOR=922,le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,le.MAX_NUMERIC_CODEWORDS=15,le.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,le.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,le.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,le.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,le.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,le.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,le.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,le.PL=25,le.LL=27,le.AS=27,le.ML=28,le.AL=28,le.PS=29,le.PAL=29,le.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,le.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",le.EXP900=Is()?Zi():[],le.NUMBER_OF_SEQUENCE_CODEWORDS=2;class xt{constructor(){}static decode(e,n,i,l,c,u,h){let m=new Ai(e,n,i,l,c),C=null,N=null,P;for(let X=!0;;X=!1){if(n!=null&&(C=xt.getRowIndicatorColumn(e,m,n,!0,u,h)),l!=null&&(N=xt.getRowIndicatorColumn(e,m,l,!1,u,h)),P=xt.merge(C,N),P==null)throw ee.getNotFoundInstance();let $=P.getBoundingBox();if(X&&$!=null&&($.getMinY()<m.getMinY()||$.getMaxY()>m.getMaxY()))m=$;else break}P.setBoundingBox(m);let M=P.getBarcodeColumnCount()+1;P.setDetectionResultColumn(0,C),P.setDetectionResultColumn(M,N);let U=C!=null;for(let X=1;X<=M;X++){let $=U?X:M-X;if(P.getDetectionResultColumn($)!==void 0)continue;let te;$===0||$===M?te=new tl(m,$===0):te=new Br(m),P.setDetectionResultColumn($,te);let ae=-1,Se=ae;for(let Te=m.getMinY();Te<=m.getMaxY();Te++){if(ae=xt.getStartColumn(P,$,Te,U),ae<0||ae>m.getMaxX()){if(Se===-1)continue;ae=Se}let Ce=xt.detectCodeword(e,m.getMinX(),m.getMaxX(),U,ae,Te,u,h);Ce!=null&&(te.setCodeword(Te,Ce),Se=ae,u=Math.min(u,Ce.getWidth()),h=Math.max(h,Ce.getWidth()))}}return xt.createDecoderResult(P)}static merge(e,n){if(e==null&&n==null)return null;let i=xt.getBarcodeMetadata(e,n);if(i==null)return null;let l=Ai.merge(xt.adjustBoundingBox(e),xt.adjustBoundingBox(n));return new Ts(i,l)}static adjustBoundingBox(e){if(e==null)return null;let n=e.getRowHeights();if(n==null)return null;let i=xt.getMax(n),l=0;for(let h of n)if(l+=i-h,h>0)break;let c=e.getCodewords();for(let h=0;l>0&&c[h]==null;h++)l--;let u=0;for(let h=n.length-1;h>=0&&(u+=i-n[h],!(n[h]>0));h--);for(let h=c.length-1;u>0&&c[h]==null;h--)u--;return e.getBoundingBox().addMissingRows(l,u,e.isLeft())}static getMax(e){let n=-1;for(let i of e)n=Math.max(n,i);return n}static getBarcodeMetadata(e,n){let i;if(e==null||(i=e.getBarcodeMetadata())==null)return n==null?null:n.getBarcodeMetadata();let l;return n==null||(l=n.getBarcodeMetadata())==null?i:i.getColumnCount()!==l.getColumnCount()&&i.getErrorCorrectionLevel()!==l.getErrorCorrectionLevel()&&i.getRowCount()!==l.getRowCount()?null:i}static getRowIndicatorColumn(e,n,i,l,c,u){let h=new tl(n,l);for(let m=0;m<2;m++){let C=m===0?1:-1,N=Math.trunc(Math.trunc(i.getX()));for(let P=Math.trunc(Math.trunc(i.getY()));P<=n.getMaxY()&&P>=n.getMinY();P+=C){let M=xt.detectCodeword(e,0,e.getWidth(),l,N,P,c,u);M!=null&&(h.setCodeword(P,M),l?N=M.getStartX():N=M.getEndX())}}return h}static adjustCodewordCount(e,n){let i=n[0][1],l=i.getValue(),c=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-xt.getNumberOfECCodeWords(e.getBarcodeECLevel());if(l.length===0){if(c<1||c>ot.MAX_CODEWORDS_IN_BARCODE)throw ee.getNotFoundInstance();i.setValue(c)}else l[0]!==c&&i.setValue(c)}static createDecoderResult(e){let n=xt.createBarcodeMatrix(e);xt.adjustCodewordCount(e,n);let i=new Array,l=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),c=[],u=new Array;for(let m=0;m<e.getBarcodeRowCount();m++)for(let C=0;C<e.getBarcodeColumnCount();C++){let N=n[m][C+1].getValue(),P=m*e.getBarcodeColumnCount()+C;N.length===0?i.push(P):N.length===1?l[P]=N[0]:(u.push(P),c.push(N))}let h=new Array(c.length);for(let m=0;m<h.length;m++)h[m]=c[m];return xt.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),l,ot.toIntArray(i),ot.toIntArray(u),h)}static createDecoderResultFromAmbiguousValues(e,n,i,l,c){let u=new Int32Array(l.length),h=100;for(;h-- >0;){for(let m=0;m<u.length;m++)n[l[m]]=c[m][u[m]];try{return xt.decodeCodewords(n,e,i)}catch(m){if(!(m instanceof D))throw m}if(u.length===0)throw D.getChecksumInstance();for(let m=0;m<u.length;m++)if(u[m]<c[m].length-1){u[m]++;break}else if(u[m]=0,m===u.length-1)throw D.getChecksumInstance()}throw D.getChecksumInstance()}static createBarcodeMatrix(e){let n=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let l=0;l<n.length;l++)for(let c=0;c<n[l].length;c++)n[l][c]=new ci;let i=0;for(let l of e.getDetectionResultColumns()){if(l!=null){for(let c of l.getCodewords())if(c!=null){let u=c.getRowNumber();if(u>=0){if(u>=n.length)continue;n[u][i].setValue(c.getValue())}}}i++}return n}static isValidBarcodeColumn(e,n){return n>=0&&n<=e.getBarcodeColumnCount()+1}static getStartColumn(e,n,i,l){let c=l?1:-1,u=null;if(xt.isValidBarcodeColumn(e,n-c)&&(u=e.getDetectionResultColumn(n-c).getCodeword(i)),u!=null)return l?u.getEndX():u.getStartX();if(u=e.getDetectionResultColumn(n).getCodewordNearby(i),u!=null)return l?u.getStartX():u.getEndX();if(xt.isValidBarcodeColumn(e,n-c)&&(u=e.getDetectionResultColumn(n-c).getCodewordNearby(i)),u!=null)return l?u.getEndX():u.getStartX();let h=0;for(;xt.isValidBarcodeColumn(e,n-c);){n-=c;for(let m of e.getDetectionResultColumn(n).getCodewords())if(m!=null)return(l?m.getEndX():m.getStartX())+c*h*(m.getEndX()-m.getStartX());h++}return l?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,n,i,l,c,u,h,m){c=xt.adjustCodewordStartColumn(e,n,i,l,c,u);let C=xt.getModuleBitCount(e,n,i,l,c,u);if(C==null)return null;let N,P=pt.sum(C);if(l)N=c+P;else{for(let X=0;X<C.length/2;X++){let $=C[X];C[X]=C[C.length-1-X],C[C.length-1-X]=$}N=c,c=N-P}if(!xt.checkCodewordSkew(P,h,m))return null;let M=_n.getDecodedValue(C),U=ot.getCodeword(M);return U===-1?null:new bi(c,N,xt.getCodewordBucketNumber(M),U)}static getModuleBitCount(e,n,i,l,c,u){let h=c,m=new Int32Array(8),C=0,N=l?1:-1,P=l;for(;(l?h<i:h>=n)&&C<m.length;)e.get(h,u)===P?(m[C]++,h+=N):(C++,P=!P);return C===m.length||h===(l?i:n)&&C===m.length-1?m:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,n,i,l,c,u){let h=c,m=l?-1:1;for(let C=0;C<2;C++){for(;(l?h>=n:h<i)&&l===e.get(h,u);){if(Math.abs(c-h)>xt.CODEWORD_SKEW_SIZE)return c;h+=m}m=-m,l=!l}return h}static checkCodewordSkew(e,n,i){return n-xt.CODEWORD_SKEW_SIZE<=e&&e<=i+xt.CODEWORD_SKEW_SIZE}static decodeCodewords(e,n,i){if(e.length===0)throw q.getFormatInstance();let l=1<<n+1,c=xt.correctErrors(e,i,l);xt.verifyCodewordCount(e,l);let u=le.decode(e,""+n);return u.setErrorsCorrected(c),u.setErasures(i.length),u}static correctErrors(e,n,i){if(n!=null&&n.length>i/2+xt.MAX_ERRORS||i<0||i>xt.MAX_EC_CODEWORDS)throw D.getChecksumInstance();return xt.errorCorrection.decode(e,i,n)}static verifyCodewordCount(e,n){if(e.length<4)throw q.getFormatInstance();let i=e[0];if(i>e.length)throw q.getFormatInstance();if(i===0)if(n<e.length)e[0]=e.length-n;else throw q.getFormatInstance()}static getBitCountForCodeword(e){let n=new Int32Array(8),i=0,l=n.length-1;for(;!((e&1)!==i&&(i=e&1,l--,l<0));)n[l]++,e>>=1;return n}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return xt.getCodewordBucketNumber(xt.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let n=new Zr;for(let i=0;i<e.length;i++){n.format("Row %2d: ",i);for(let l=0;l<e[i].length;l++){let c=e[i][l];c.getValue().length===0?n.format("        ",null):n.format("%4d(%2d)",c.getValue()[0],c.getConfidence(c.getValue()[0]))}n.format("%n")}return n.toString()}}xt.CODEWORD_SKEW_SIZE=2,xt.MAX_ERRORS=3,xt.MAX_EC_CODEWORDS=512,xt.errorCorrection=new Yo;class Rn{decode(e,n=null){let i=Rn.decode(e,n,!1);if(i==null||i.length===0||i[0]==null)throw ee.getNotFoundInstance();return i[0]}decodeMultiple(e,n=null){try{return Rn.decode(e,n,!0)}catch(i){throw i instanceof q||i instanceof D?ee.getNotFoundInstance():i}}static decode(e,n,i){const l=new Array,c=ft.detectMultiple(e,n,i);for(const u of c.getPoints()){const h=xt.decode(c.getBits(),u[4],u[5],u[6],u[7],Rn.getMinCodewordWidth(u),Rn.getMaxCodewordWidth(u)),m=new Oe(h.getText(),h.getRawBytes(),void 0,u,oe.PDF_417);m.putMetadata(Ne.ERROR_CORRECTION_LEVEL,h.getECLevel());const C=h.getOther();C!=null&&m.putMetadata(Ne.PDF417_EXTRA_METADATA,C),l.push(m)}return l.map(u=>u)}static getMaxWidth(e,n){return e==null||n==null?0:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMinWidth(e,n){return e==null||n==null?z.MAX_VALUE:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(Rn.getMaxWidth(e[0],e[4]),Rn.getMaxWidth(e[6],e[2])*ot.MODULES_IN_CODEWORD/ot.MODULES_IN_STOP_PATTERN),Math.max(Rn.getMaxWidth(e[1],e[5]),Rn.getMaxWidth(e[7],e[3])*ot.MODULES_IN_CODEWORD/ot.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(Rn.getMinWidth(e[0],e[4]),Rn.getMinWidth(e[6],e[2])*ot.MODULES_IN_CODEWORD/ot.MODULES_IN_STOP_PATTERN),Math.min(Rn.getMinWidth(e[1],e[5]),Rn.getMinWidth(e[7],e[3])*ot.MODULES_IN_CODEWORD/ot.MODULES_IN_STOP_PATTERN)))}reset(){}}class qi extends E{}qi.kind="ReaderException";class so{constructor(e,n){this.verbose=e===!0,n&&this.setHints(n)}decode(e,n){return n&&this.setHints(n),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const n=!f(e)&&e.get(de.TRY_HARDER)===!0,i=f(e)?null:e.get(de.POSSIBLE_FORMATS),l=new Array;if(!f(i)){const c=i.some(u=>u===oe.UPC_A||u===oe.UPC_E||u===oe.EAN_13||u===oe.EAN_8||u===oe.CODABAR||u===oe.CODE_39||u===oe.CODE_93||u===oe.CODE_128||u===oe.ITF||u===oe.RSS_14||u===oe.RSS_EXPANDED);c&&!n&&l.push(new Ei(e,this.verbose)),i.includes(oe.QR_CODE)&&l.push(new Hn),i.includes(oe.DATA_MATRIX)&&l.push(new Tr),i.includes(oe.AZTEC)&&l.push(new Ht),i.includes(oe.PDF_417)&&l.push(new Rn),c&&n&&l.push(new Ei(e,this.verbose))}l.length===0&&(n||l.push(new Ei(e,this.verbose)),l.push(new Hn),l.push(new Tr),l.push(new Ht),l.push(new Rn),n&&l.push(new Ei(e,this.verbose))),this.readers=l}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new qi("No readers where selected, nothing can be read.");for(const n of this.readers)try{return n.decode(e,this.hints)}catch(i){if(i instanceof qi)continue}throw new ee("No MultiFormat Readers were able to detect the code.")}}class _s extends pe{constructor(e=null,n=500){const i=new so;i.setHints(e),super(i,n)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class oo extends pe{constructor(e=500){super(new Rn,e)}}class rl extends pe{constructor(e=500){super(new Hn,e)}}var Zo;(function(k){k[k.ERROR_CORRECTION=0]="ERROR_CORRECTION",k[k.CHARACTER_SET=1]="CHARACTER_SET",k[k.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",k[k.MIN_SIZE=3]="MIN_SIZE",k[k.MAX_SIZE=4]="MAX_SIZE",k[k.MARGIN=5]="MARGIN",k[k.PDF417_COMPACT=6]="PDF417_COMPACT",k[k.PDF417_COMPACTION=7]="PDF417_COMPACTION",k[k.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",k[k.AZTEC_LAYERS=9]="AZTEC_LAYERS",k[k.QR_VERSION=10]="QR_VERSION"})(Zo||(Zo={}));var wn=Zo;class qo{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Xe(e,Int32Array.from([1])))}buildGenerator(e){const n=this.cachedGenerators;if(e>=n.length){let i=n[n.length-1];const l=this.field;for(let c=n.length;c<=e;c++){const u=i.multiply(new Xe(l,Int32Array.from([1,l.exp(c-1+l.getGeneratorBase())])));n.push(u),i=u}}return n[e]}encode(e,n){if(n===0)throw new I("No error correction bytes");const i=e.length-n;if(i<=0)throw new I("No data bytes provided");const l=this.buildGenerator(n),c=new Int32Array(i);B.arraycopy(e,0,c,0,i);let u=new Xe(this.field,c);u=u.multiplyByMonomial(n,1);const m=u.divide(l)[1].getCoefficients(),C=n-m.length;for(let N=0;N<C;N++)e[i+N]=0;B.arraycopy(m,0,e,i+C,m.length)}}class Kt{constructor(){}static applyMaskPenaltyRule1(e){return Kt.applyMaskPenaltyRule1Internal(e,!0)+Kt.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let n=0;const i=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let u=0;u<c-1;u++){const h=i[u];for(let m=0;m<l-1;m++){const C=h[m];C===h[m+1]&&C===i[u+1][m]&&C===i[u+1][m+1]&&n++}}return Kt.N2*n}static applyMaskPenaltyRule3(e){let n=0;const i=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let u=0;u<c;u++)for(let h=0;h<l;h++){const m=i[u];h+6<l&&m[h]===1&&m[h+1]===0&&m[h+2]===1&&m[h+3]===1&&m[h+4]===1&&m[h+5]===0&&m[h+6]===1&&(Kt.isWhiteHorizontal(m,h-4,h)||Kt.isWhiteHorizontal(m,h+7,h+11))&&n++,u+6<c&&i[u][h]===1&&i[u+1][h]===0&&i[u+2][h]===1&&i[u+3][h]===1&&i[u+4][h]===1&&i[u+5][h]===0&&i[u+6][h]===1&&(Kt.isWhiteVertical(i,h,u-4,u)||Kt.isWhiteVertical(i,h,u+7,u+11))&&n++}return n*Kt.N3}static isWhiteHorizontal(e,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(let l=n;l<i;l++)if(e[l]===1)return!1;return!0}static isWhiteVertical(e,n,i,l){i=Math.max(i,0),l=Math.min(l,e.length);for(let c=i;c<l;c++)if(e[c][n]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let n=0;const i=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let m=0;m<c;m++){const C=i[m];for(let N=0;N<l;N++)C[N]===1&&n++}const u=e.getHeight()*e.getWidth();return Math.floor(Math.abs(n*2-u)*10/u)*Kt.N4}static getDataMaskBit(e,n,i){let l,c;switch(e){case 0:l=i+n&1;break;case 1:l=i&1;break;case 2:l=n%3;break;case 3:l=(i+n)%3;break;case 4:l=Math.floor(i/2)+Math.floor(n/3)&1;break;case 5:c=i*n,l=(c&1)+c%3;break;case 6:c=i*n,l=(c&1)+c%3&1;break;case 7:c=i*n,l=c%3+(i+n&1)&1;break;default:throw new I("Invalid mask pattern: "+e)}return l===0}static applyMaskPenaltyRule1Internal(e,n){let i=0;const l=n?e.getHeight():e.getWidth(),c=n?e.getWidth():e.getHeight(),u=e.getArray();for(let h=0;h<l;h++){let m=0,C=-1;for(let N=0;N<c;N++){const P=n?u[h][N]:u[N][h];P===C?m++:(m>=5&&(i+=Kt.N1+(m-5)),m=1,C=P)}m>=5&&(i+=Kt.N1+(m-5))}return i}}Kt.N1=3,Kt.N2=3,Kt.N3=40,Kt.N4=10;class ao{constructor(e,n){this.width=e,this.height=n;const i=new Array(n);for(let l=0;l!==n;l++)i[l]=new Uint8Array(e);this.bytes=i}getHeight(){return this.height}getWidth(){return this.width}get(e,n){return this.bytes[n][e]}getArray(){return this.bytes}setNumber(e,n,i){this.bytes[n][e]=i}setBoolean(e,n,i){this.bytes[n][e]=i?1:0}clear(e){for(const n of this.bytes)W.fill(n,e)}equals(e){if(!(e instanceof ao))return!1;const n=e;if(this.width!==n.width||this.height!==n.height)return!1;for(let i=0,l=this.height;i<l;++i){const c=this.bytes[i],u=n.bytes[i];for(let h=0,m=this.width;h<m;++h)if(c[h]!==u[h])return!1}return!0}toString(){const e=new Pe;for(let n=0,i=this.height;n<i;++n){const l=this.bytes[n];for(let c=0,u=this.width;c<u;++c)switch(l[c]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class Si{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new Pe;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Si.NUM_MASK_PATTERNS}}Si.NUM_MASK_PATTERNS=8;class Wt extends E{}Wt.kind="WriterException";class tt{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,n,i,l,c){tt.clearMatrix(c),tt.embedBasicPatterns(i,c),tt.embedTypeInfo(n,l,c),tt.maybeEmbedVersionInfo(i,c),tt.embedDataBits(e,l,c)}static embedBasicPatterns(e,n){tt.embedPositionDetectionPatternsAndSeparators(n),tt.embedDarkDotAtLeftBottomCorner(n),tt.maybeEmbedPositionAdjustmentPatterns(e,n),tt.embedTimingPatterns(n)}static embedTypeInfo(e,n,i){const l=new J;tt.makeTypeInfoBits(e,n,l);for(let c=0,u=l.getSize();c<u;++c){const h=l.get(l.getSize()-1-c),m=tt.TYPE_INFO_COORDINATES[c],C=m[0],N=m[1];if(i.setBoolean(C,N,h),c<8){const P=i.getWidth()-c-1;i.setBoolean(P,8,h)}else{const M=i.getHeight()-7+(c-8);i.setBoolean(8,M,h)}}}static maybeEmbedVersionInfo(e,n){if(e.getVersionNumber()<7)return;const i=new J;tt.makeVersionInfoBits(e,i);let l=6*3-1;for(let c=0;c<6;++c)for(let u=0;u<3;++u){const h=i.get(l);l--,n.setBoolean(c,n.getHeight()-11+u,h),n.setBoolean(n.getHeight()-11+u,c,h)}}static embedDataBits(e,n,i){let l=0,c=-1,u=i.getWidth()-1,h=i.getHeight()-1;for(;u>0;){for(u===6&&(u-=1);h>=0&&h<i.getHeight();){for(let m=0;m<2;++m){const C=u-m;if(!tt.isEmpty(i.get(C,h)))continue;let N;l<e.getSize()?(N=e.get(l),++l):N=!1,n!==255&&Kt.getDataMaskBit(n,C,h)&&(N=!N),i.setBoolean(C,h,N)}h+=c}c=-c,h+=c,u-=2}if(l!==e.getSize())throw new Wt("Not all bits consumed: "+l+"/"+e.getSize())}static findMSBSet(e){return 32-z.numberOfLeadingZeros(e)}static calculateBCHCode(e,n){if(n===0)throw new I("0 polynomial");const i=tt.findMSBSet(n);for(e<<=i-1;tt.findMSBSet(e)>=i;)e^=n<<tt.findMSBSet(e)-i;return e}static makeTypeInfoBits(e,n,i){if(!Si.isValidMaskPattern(n))throw new Wt("Invalid mask pattern");const l=e.getBits()<<3|n;i.appendBits(l,5);const c=tt.calculateBCHCode(l,tt.TYPE_INFO_POLY);i.appendBits(c,10);const u=new J;if(u.appendBits(tt.TYPE_INFO_MASK_PATTERN,15),i.xor(u),i.getSize()!==15)throw new Wt("should not happen but we got: "+i.getSize())}static makeVersionInfoBits(e,n){n.appendBits(e.getVersionNumber(),6);const i=tt.calculateBCHCode(e.getVersionNumber(),tt.VERSION_INFO_POLY);if(n.appendBits(i,12),n.getSize()!==18)throw new Wt("should not happen but we got: "+n.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let n=8;n<e.getWidth()-8;++n){const i=(n+1)%2;tt.isEmpty(e.get(n,6))&&e.setNumber(n,6,i),tt.isEmpty(e.get(6,n))&&e.setNumber(6,n,i)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new Wt;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,n,i){for(let l=0;l<8;++l){if(!tt.isEmpty(i.get(e+l,n)))throw new Wt;i.setNumber(e+l,n,0)}}static embedVerticalSeparationPattern(e,n,i){for(let l=0;l<7;++l){if(!tt.isEmpty(i.get(e,n+l)))throw new Wt;i.setNumber(e,n+l,0)}}static embedPositionAdjustmentPattern(e,n,i){for(let l=0;l<5;++l){const c=tt.POSITION_ADJUSTMENT_PATTERN[l];for(let u=0;u<5;++u)i.setNumber(e+u,n+l,c[u])}}static embedPositionDetectionPattern(e,n,i){for(let l=0;l<7;++l){const c=tt.POSITION_DETECTION_PATTERN[l];for(let u=0;u<7;++u)i.setNumber(e+u,n+l,c[u])}}static embedPositionDetectionPatternsAndSeparators(e){const n=tt.POSITION_DETECTION_PATTERN[0].length;tt.embedPositionDetectionPattern(0,0,e),tt.embedPositionDetectionPattern(e.getWidth()-n,0,e),tt.embedPositionDetectionPattern(0,e.getWidth()-n,e);const i=8;tt.embedHorizontalSeparationPattern(0,i-1,e),tt.embedHorizontalSeparationPattern(e.getWidth()-i,i-1,e),tt.embedHorizontalSeparationPattern(0,e.getWidth()-i,e);const l=7;tt.embedVerticalSeparationPattern(l,0,e),tt.embedVerticalSeparationPattern(e.getHeight()-l-1,0,e),tt.embedVerticalSeparationPattern(l,e.getHeight()-l,e)}static maybeEmbedPositionAdjustmentPatterns(e,n){if(e.getVersionNumber()<2)return;const i=e.getVersionNumber()-1,l=tt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[i];for(let c=0,u=l.length;c!==u;c++){const h=l[c];if(h>=0)for(let m=0;m!==u;m++){const C=l[m];C>=0&&tt.isEmpty(n.get(C,h))&&tt.embedPositionAdjustmentPattern(C-2,h-2,n)}}}}tt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),tt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),tt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),tt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),tt.VERSION_INFO_POLY=7973,tt.TYPE_INFO_POLY=1335,tt.TYPE_INFO_MASK_PATTERN=21522;class Mc{constructor(e,n){this.dataBytes=e,this.errorCorrectionBytes=n}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Gt{constructor(){}static calculateMaskPenalty(e){return Kt.applyMaskPenaltyRule1(e)+Kt.applyMaskPenaltyRule2(e)+Kt.applyMaskPenaltyRule3(e)+Kt.applyMaskPenaltyRule4(e)}static encode(e,n,i=null){let l=Gt.DEFAULT_BYTE_MODE_ENCODING;const c=i!==null&&i.get(wn.CHARACTER_SET)!==void 0;c&&(l=i.get(wn.CHARACTER_SET).toString());const u=this.chooseMode(e,l),h=new J;if(u===Qe.BYTE&&(c||Gt.DEFAULT_BYTE_MODE_ENCODING!==l)){const Te=Z.getCharacterSetECIByName(l);Te!==void 0&&this.appendECI(Te,h)}this.appendModeInfo(u,h);const m=new J;this.appendBytes(e,u,m,l);let C;if(i!==null&&i.get(wn.QR_VERSION)!==void 0){const Te=Number.parseInt(i.get(wn.QR_VERSION).toString(),10);C=qe.getVersionForNumber(Te);const Ce=this.calculateBitsNeeded(u,h,m,C);if(!this.willFit(Ce,C,n))throw new Wt("Data too big for requested version")}else C=this.recommendVersion(n,u,h,m);const N=new J;N.appendBitArray(h);const P=u===Qe.BYTE?m.getSizeInBytes():e.length;this.appendLengthInfo(P,C,u,N),N.appendBitArray(m);const M=C.getECBlocksForLevel(n),U=C.getTotalCodewords()-M.getTotalECCodewords();this.terminateBits(U,N);const X=this.interleaveWithECBytes(N,C.getTotalCodewords(),U,M.getNumBlocks()),$=new Si;$.setECLevel(n),$.setMode(u),$.setVersion(C);const te=C.getDimensionForVersion(),ae=new ao(te,te),Se=this.chooseMaskPattern(X,n,C,ae);return $.setMaskPattern(Se),tt.buildMatrix(X,n,C,Se,ae),$.setMatrix(ae),$}static recommendVersion(e,n,i,l){const c=this.calculateBitsNeeded(n,i,l,qe.getVersionForNumber(1)),u=this.chooseVersion(c,e),h=this.calculateBitsNeeded(n,i,l,u);return this.chooseVersion(h,e)}static calculateBitsNeeded(e,n,i,l){return n.getSize()+e.getCharacterCountBits(l)+i.getSize()}static getAlphanumericCode(e){return e<Gt.ALPHANUMERIC_TABLE.length?Gt.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,n=null){if(Z.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(e))return Qe.KANJI;let i=!1,l=!1;for(let c=0,u=e.length;c<u;++c){const h=e.charAt(c);if(Gt.isDigit(h))i=!0;else if(this.getAlphanumericCode(h.charCodeAt(0))!==-1)l=!0;else return Qe.BYTE}return l?Qe.ALPHANUMERIC:i?Qe.NUMERIC:Qe.BYTE}static isOnlyDoubleByteKanji(e){let n;try{n=ke.encode(e,Z.SJIS)}catch{return!1}const i=n.length;if(i%2!==0)return!1;for(let l=0;l<i;l+=2){const c=n[l]&255;if((c<129||c>159)&&(c<224||c>235))return!1}return!0}static chooseMaskPattern(e,n,i,l){let c=Number.MAX_SAFE_INTEGER,u=-1;for(let h=0;h<Si.NUM_MASK_PATTERNS;h++){tt.buildMatrix(e,n,i,h,l);let m=this.calculateMaskPenalty(l);m<c&&(c=m,u=h)}return u}static chooseVersion(e,n){for(let i=1;i<=40;i++){const l=qe.getVersionForNumber(i);if(Gt.willFit(e,l,n))return l}throw new Wt("Data too big")}static willFit(e,n,i){const l=n.getTotalCodewords(),u=n.getECBlocksForLevel(i).getTotalECCodewords(),h=l-u,m=(e+7)/8;return h>=m}static terminateBits(e,n){const i=e*8;if(n.getSize()>i)throw new Wt("data bits cannot fit in the QR Code"+n.getSize()+" > "+i);for(let u=0;u<4&&n.getSize()<i;++u)n.appendBit(!1);const l=n.getSize()&7;if(l>0)for(let u=l;u<8;u++)n.appendBit(!1);const c=e-n.getSizeInBytes();for(let u=0;u<c;++u)n.appendBits(u&1?17:236,8);if(n.getSize()!==i)throw new Wt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,n,i,l,c,u){if(l>=i)throw new Wt("Block ID too large");const h=e%i,m=i-h,C=Math.floor(e/i),N=C+1,P=Math.floor(n/i),M=P+1,U=C-P,X=N-M;if(U!==X)throw new Wt("EC bytes mismatch");if(i!==m+h)throw new Wt("RS blocks mismatch");if(e!==(P+U)*m+(M+X)*h)throw new Wt("Total bytes mismatch");l<m?(c[0]=P,u[0]=U):(c[0]=M,u[0]=X)}static interleaveWithECBytes(e,n,i,l){if(e.getSizeInBytes()!==i)throw new Wt("Number of bits and data bytes does not match");let c=0,u=0,h=0;const m=new Array;for(let N=0;N<l;++N){const P=new Int32Array(1),M=new Int32Array(1);Gt.getNumDataBytesAndNumECBytesForBlockID(n,i,l,N,P,M);const U=P[0],X=new Uint8Array(U);e.toBytes(8*c,X,0,U);const $=Gt.generateECBytes(X,M[0]);m.push(new Mc(X,$)),u=Math.max(u,U),h=Math.max(h,$.length),c+=P[0]}if(i!==c)throw new Wt("Data bytes does not match offset");const C=new J;for(let N=0;N<u;++N)for(const P of m){const M=P.getDataBytes();N<M.length&&C.appendBits(M[N],8)}for(let N=0;N<h;++N)for(const P of m){const M=P.getErrorCorrectionBytes();N<M.length&&C.appendBits(M[N],8)}if(n!==C.getSizeInBytes())throw new Wt("Interleaving error: "+n+" and "+C.getSizeInBytes()+" differ.");return C}static generateECBytes(e,n){const i=e.length,l=new Int32Array(i+n);for(let u=0;u<i;u++)l[u]=e[u]&255;new qo(De.QR_CODE_FIELD_256).encode(l,n);const c=new Uint8Array(n);for(let u=0;u<n;u++)c[u]=l[i+u];return c}static appendModeInfo(e,n){n.appendBits(e.getBits(),4)}static appendLengthInfo(e,n,i,l){const c=i.getCharacterCountBits(n);if(e>=1<<c)throw new Wt(e+" is bigger than "+((1<<c)-1));l.appendBits(e,c)}static appendBytes(e,n,i,l){switch(n){case Qe.NUMERIC:Gt.appendNumericBytes(e,i);break;case Qe.ALPHANUMERIC:Gt.appendAlphanumericBytes(e,i);break;case Qe.BYTE:Gt.append8BitBytes(e,i,l);break;case Qe.KANJI:Gt.appendKanjiBytes(e,i);break;default:throw new Wt("Invalid mode: "+n)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const n=Gt.getDigit(e);return n>=0&&n<=9}static appendNumericBytes(e,n){const i=e.length;let l=0;for(;l<i;){const c=Gt.getDigit(e.charAt(l));if(l+2<i){const u=Gt.getDigit(e.charAt(l+1)),h=Gt.getDigit(e.charAt(l+2));n.appendBits(c*100+u*10+h,10),l+=3}else if(l+1<i){const u=Gt.getDigit(e.charAt(l+1));n.appendBits(c*10+u,7),l+=2}else n.appendBits(c,4),l++}}static appendAlphanumericBytes(e,n){const i=e.length;let l=0;for(;l<i;){const c=Gt.getAlphanumericCode(e.charCodeAt(l));if(c===-1)throw new Wt;if(l+1<i){const u=Gt.getAlphanumericCode(e.charCodeAt(l+1));if(u===-1)throw new Wt;n.appendBits(c*45+u,11),l+=2}else n.appendBits(c,6),l++}}static append8BitBytes(e,n,i){let l;try{l=ke.encode(e,i)}catch(c){throw new Wt(c)}for(let c=0,u=l.length;c!==u;c++){const h=l[c];n.appendBits(h,8)}}static appendKanjiBytes(e,n){let i;try{i=ke.encode(e,Z.SJIS)}catch(c){throw new Wt(c)}const l=i.length;for(let c=0;c<l;c+=2){const u=i[c]&255,h=i[c+1]&255,m=u<<8&4294967295|h;let C=-1;if(m>=33088&&m<=40956?C=m-33088:m>=57408&&m<=60351&&(C=m-49472),C===-1)throw new Wt("Invalid byte sequence");const N=(C>>8)*192+(C&255);n.appendBits(N,13)}}static appendECI(e,n){n.appendBits(Qe.ECI.getBits(),4),n.appendBits(e.getValue(),8)}}Gt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Gt.DEFAULT_BYTE_MODE_ENCODING=Z.UTF8.getName();class Ti{write(e,n,i,l=null){if(e.length===0)throw new I("Found empty contents");if(n<0||i<0)throw new I("Requested dimensions are too small: "+n+"x"+i);let c=Vt.L,u=Ti.QUIET_ZONE_SIZE;l!==null&&(l.get(wn.ERROR_CORRECTION)!==void 0&&(c=Vt.fromString(l.get(wn.ERROR_CORRECTION).toString())),l.get(wn.MARGIN)!==void 0&&(u=Number.parseInt(l.get(wn.MARGIN).toString(),10)));const h=Gt.encode(e,c,l);return this.renderResult(h,n,i,u)}writeToDom(e,n,i,l,c=null){typeof e=="string"&&(e=document.querySelector(e));const u=this.write(n,i,l,c);e&&e.appendChild(u)}renderResult(e,n,i,l){const c=e.getMatrix();if(c===null)throw new zt;const u=c.getWidth(),h=c.getHeight(),m=u+l*2,C=h+l*2,N=Math.max(n,m),P=Math.max(i,C),M=Math.min(Math.floor(N/m),Math.floor(P/C)),U=Math.floor((N-u*M)/2),X=Math.floor((P-h*M)/2),$=this.createSVGElement(N,P);for(let te=0,ae=X;te<h;te++,ae+=M)for(let Se=0,Te=U;Se<u;Se++,Te+=M)if(c.get(Se,te)===1){const Ce=this.createSvgRectElement(Te,ae,M,M);$.appendChild(Ce)}return $}createSVGElement(e,n){const i=document.createElementNS(Ti.SVG_NS,"svg");return i.setAttributeNS(null,"height",e.toString()),i.setAttributeNS(null,"width",n.toString()),i}createSvgRectElement(e,n,i,l){const c=document.createElementNS(Ti.SVG_NS,"rect");return c.setAttributeNS(null,"x",e.toString()),c.setAttributeNS(null,"y",n.toString()),c.setAttributeNS(null,"height",i.toString()),c.setAttributeNS(null,"width",l.toString()),c.setAttributeNS(null,"fill","#000000"),c}}Ti.QUIET_ZONE_SIZE=4,Ti.SVG_NS="http://www.w3.org/2000/svg";class Qi{encode(e,n,i,l,c){if(e.length===0)throw new I("Found empty contents");if(n!==oe.QR_CODE)throw new I("Can only encode QR_CODE, but got "+n);if(i<0||l<0)throw new I(`Requested dimensions are too small: ${i}x${l}`);let u=Vt.L,h=Qi.QUIET_ZONE_SIZE;c!==null&&(c.get(wn.ERROR_CORRECTION)!==void 0&&(u=Vt.fromString(c.get(wn.ERROR_CORRECTION).toString())),c.get(wn.MARGIN)!==void 0&&(h=Number.parseInt(c.get(wn.MARGIN).toString(),10)));const m=Gt.encode(e,u,c);return Qi.renderResult(m,i,l,h)}static renderResult(e,n,i,l){const c=e.getMatrix();if(c===null)throw new zt;const u=c.getWidth(),h=c.getHeight(),m=u+l*2,C=h+l*2,N=Math.max(n,m),P=Math.max(i,C),M=Math.min(Math.floor(N/m),Math.floor(P/C)),U=Math.floor((N-u*M)/2),X=Math.floor((P-h*M)/2),$=new Fe(N,P);for(let te=0,ae=X;te<h;te++,ae+=M)for(let Se=0,Te=U;Se<u;Se++,Te+=M)c.get(Se,te)===1&&$.setRegion(Te,ae,M,M);return $}}Qi.QUIET_ZONE_SIZE=4;class Lc{encode(e,n,i,l,c){let u;switch(n){case oe.QR_CODE:u=new Qi;break;default:throw new I("No encoder available for format "+n)}return u.encode(e,n,i,l,c)}}class Fr extends he{constructor(e,n,i,l,c,u,h,m){if(super(u,h),this.yuvData=e,this.dataWidth=n,this.dataHeight=i,this.left=l,this.top=c,l+u>n||c+h>i)throw new I("Crop rectangle does not fit within image data.");m&&this.reverseHorizontal(u,h)}getRow(e,n){if(e<0||e>=this.getHeight())throw new I("Requested row is outside the image: "+e);const i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));const l=(e+this.top)*this.dataWidth+this.left;return B.arraycopy(this.yuvData,l,n,0,i),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.yuvData;const i=e*n,l=new Uint8ClampedArray(i);let c=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return B.arraycopy(this.yuvData,c,l,0,i),l;for(let u=0;u<n;u++){const h=u*e;B.arraycopy(this.yuvData,c,l,h,e),c+=this.dataWidth}return l}isCropSupported(){return!0}crop(e,n,i,l){return new Fr(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+n,i,l,!1)}renderThumbnail(){const e=this.getWidth()/Fr.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/Fr.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(e*n),l=this.yuvData;let c=this.top*this.dataWidth+this.left;for(let u=0;u<n;u++){const h=u*e;for(let m=0;m<e;m++){const C=l[c+m*Fr.THUMBNAIL_SCALE_FACTOR]&255;i[h+m]=4278190080|C*65793}c+=this.dataWidth*Fr.THUMBNAIL_SCALE_FACTOR}return i}getThumbnailWidth(){return this.getWidth()/Fr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Fr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,n){const i=this.yuvData;for(let l=0,c=this.top*this.dataWidth+this.left;l<n;l++,c+=this.dataWidth){const u=c+e/2;for(let h=c,m=c+e-1;h<u;h++,m--){const C=i[h];i[h]=i[m],i[m]=C}}}invert(){return new Le(this)}}Fr.THUMBNAIL_SCALE_FACTOR=2;class Rs extends he{constructor(e,n,i,l,c,u,h){if(super(n,i),this.dataWidth=l,this.dataHeight=c,this.left=u,this.top=h,e.BYTES_PER_ELEMENT===4){const m=n*i,C=new Uint8ClampedArray(m);for(let N=0;N<m;N++){const P=e[N],M=P>>16&255,U=P>>7&510,X=P&255;C[N]=(M+U+X)/4&255}this.luminances=C}else this.luminances=e;if(l===void 0&&(this.dataWidth=n),c===void 0&&(this.dataHeight=i),u===void 0&&(this.left=0),h===void 0&&(this.top=0),this.left+n>this.dataWidth||this.top+i>this.dataHeight)throw new I("Crop rectangle does not fit within image data.")}getRow(e,n){if(e<0||e>=this.getHeight())throw new I("Requested row is outside the image: "+e);const i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));const l=(e+this.top)*this.dataWidth+this.left;return B.arraycopy(this.luminances,l,n,0,i),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.luminances;const i=e*n,l=new Uint8ClampedArray(i);let c=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return B.arraycopy(this.luminances,c,l,0,i),l;for(let u=0;u<n;u++){const h=u*e;B.arraycopy(this.luminances,c,l,h,e),c+=this.dataWidth}return l}isCropSupported(){return!0}crop(e,n,i,l){return new Rs(this.luminances,i,l,this.dataWidth,this.dataHeight,this.left+e,this.top+n)}invert(){return new Le(this)}}class il extends Z{static forName(e){return this.getCharacterSetECIByName(e)}}class Qo{}Qo.ISO_8859_1=Z.ISO8859_1;class sl{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Jo{static singletonList(e){return[e]}static min(e,n){return e.sort(n)[0]}}class Bc{constructor(e){this.previous=e}getPrevious(){return this.previous}}class Ji extends Bc{constructor(e,n,i){super(e),this.value=n,this.bitCount=i}appendTo(e,n){e.appendBits(this.value,this.bitCount)}add(e,n){return new Ji(this,e,n)}addBinaryShift(e,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ji(this,e,n)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+z.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class ea extends Ji{constructor(e,n,i){super(e,0,0),this.binaryShiftStart=n,this.binaryShiftByteCount=i}appendTo(e,n){for(let i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):i===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(n[this.binaryShiftStart+i],8)}addBinaryShift(e,n){return new ea(this,e,n)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Fc(k,e,n){return new ea(k,e,n)}function ks(k,e,n){return new Ji(k,e,n)}const jc=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ui=0,es=1,Bn=2,ol=3,Nr=4,al=new Ji(null,0,0),lo=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function ll(k){for(let e of k)W.fill(e,-1);return k[ui][Nr]=0,k[es][Nr]=0,k[es][ui]=28,k[ol][Nr]=0,k[Bn][Nr]=0,k[Bn][ui]=15,k}const ta=ll(W.createInt32Array(6,6));class Gn{constructor(e,n,i,l){this.token=e,this.mode=n,this.binaryShiftByteCount=i,this.bitCount=l}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,n){let i=this.bitCount,l=this.token;if(e!==this.mode){let u=lo[this.mode][e];l=ks(l,u&65535,u>>16),i+=u>>16}let c=e===Bn?4:5;return l=ks(l,n,c),new Gn(l,e,0,i+c)}shiftAndAppend(e,n){let i=this.token,l=this.mode===Bn?4:5;return i=ks(i,ta[this.mode][e],l),i=ks(i,n,5),new Gn(i,this.mode,0,this.bitCount+l+5)}addBinaryShiftChar(e){let n=this.token,i=this.mode,l=this.bitCount;if(this.mode===Nr||this.mode===Bn){let h=lo[i][ui];n=ks(n,h&65535,h>>16),l+=h>>16,i=ui}let c=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,u=new Gn(n,i,this.binaryShiftByteCount+1,l+c);return u.binaryShiftByteCount===2078&&(u=u.endBinaryShift(e+1)),u}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let n=this.token;return n=Fc(n,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new Gn(n,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let n=this.bitCount+(lo[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?n+=Gn.calculateBinaryShiftCost(e)-Gn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(n+=10),n<=e.bitCount}toBitArray(e){let n=[];for(let l=this.endBinaryShift(e.length).token;l!==null;l=l.getPrevious())n.unshift(l);let i=new J;for(const l of n)l.appendTo(i,e);return i}toString(){return Ie.format("%s bits=%d bytes=%d",jc[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}Gn.INITIAL_STATE=new Gn(al,ui,0,0);function Vc(k){const e=Ie.getCharCode(" "),n=Ie.getCharCode("."),i=Ie.getCharCode(",");k[ui][e]=1;const l=Ie.getCharCode("Z"),c=Ie.getCharCode("A");for(let M=c;M<=l;M++)k[ui][M]=M-c+2;k[es][e]=1;const u=Ie.getCharCode("z"),h=Ie.getCharCode("a");for(let M=h;M<=u;M++)k[es][M]=M-h+2;k[Bn][e]=1;const m=Ie.getCharCode("9"),C=Ie.getCharCode("0");for(let M=C;M<=m;M++)k[Bn][M]=M-C+2;k[Bn][i]=12,k[Bn][n]=13;const N=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let M=0;M<N.length;M++)k[ol][Ie.getCharCode(N[M])]=M;const P=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let M=0;M<P.length;M++)Ie.getCharCode(P[M])>0&&(k[Nr][Ie.getCharCode(P[M])]=M);return k}const na=Vc(W.createInt32Array(5,256));class Ps{constructor(e){this.text=e}encode(){const e=Ie.getCharCode(" "),n=Ie.getCharCode(`
`);let i=Jo.singletonList(Gn.INITIAL_STATE);for(let c=0;c<this.text.length;c++){let u,h=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case Ie.getCharCode("\r"):u=h===n?2:0;break;case Ie.getCharCode("."):u=h===e?3:0;break;case Ie.getCharCode(","):u=h===e?4:0;break;case Ie.getCharCode(":"):u=h===e?5:0;break;default:u=0}u>0?(i=Ps.updateStateListForPair(i,c,u),c++):i=this.updateStateListForChar(i,c)}return Jo.min(i,(c,u)=>c.getBitCount()-u.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,n){const i=[];for(let l of e)this.updateStateForChar(l,n,i);return Ps.simplifyStates(i)}updateStateForChar(e,n,i){let l=this.text[n]&255,c=na[e.getMode()][l]>0,u=null;for(let h=0;h<=Nr;h++){let m=na[h][l];if(m>0){if(u==null&&(u=e.endBinaryShift(n)),!c||h===e.getMode()||h===Bn){const C=u.latchAndAppend(h,m);i.push(C)}if(!c&&ta[e.getMode()][h]>=0){const C=u.shiftAndAppend(h,m);i.push(C)}}}if(e.getBinaryShiftByteCount()>0||na[e.getMode()][l]===0){let h=e.addBinaryShiftChar(n);i.push(h)}}static updateStateListForPair(e,n,i){const l=[];for(let c of e)this.updateStateForPair(c,n,i,l);return this.simplifyStates(l)}static updateStateForPair(e,n,i,l){let c=e.endBinaryShift(n);if(l.push(c.latchAndAppend(Nr,i)),e.getMode()!==Nr&&l.push(c.shiftAndAppend(Nr,i)),i===3||i===4){let u=c.latchAndAppend(Bn,16-i).latchAndAppend(Bn,1);l.push(u)}if(e.getBinaryShiftByteCount()>0){let u=e.addBinaryShiftChar(n).addBinaryShiftChar(n+1);l.push(u)}}static simplifyStates(e){let n=[];for(const i of e){let l=!0;for(const c of n){if(c.isBetterThanOrEqualTo(i)){l=!1;break}i.isBetterThanOrEqualTo(c)&&(n=n.filter(u=>u!==c))}l&&n.push(i)}return n}}class Rt{constructor(){}static encodeBytes(e){return Rt.encode(e,Rt.DEFAULT_EC_PERCENT,Rt.DEFAULT_AZTEC_LAYERS)}static encode(e,n,i){let l=new Ps(e).encode(),c=z.truncDivision(l.getSize()*n,100)+11,u=l.getSize()+c,h,m,C,N,P;if(i!==Rt.DEFAULT_AZTEC_LAYERS){if(h=i<0,m=Math.abs(i),m>(h?Rt.MAX_NB_BITS_COMPACT:Rt.MAX_NB_BITS))throw new I(Ie.format("Illegal value %s for layers",i));C=Rt.totalBitsInLayer(m,h),N=Rt.WORD_SIZE[m];let Ce=C-C%N;if(P=Rt.stuffBits(l,N),P.getSize()+c>Ce)throw new I("Data to large for user specified layer");if(h&&P.getSize()>N*64)throw new I("Data to large for user specified layer")}else{N=0,P=null;for(let Ce=0;;Ce++){if(Ce>Rt.MAX_NB_BITS)throw new I("Data too large for an Aztec code");if(h=Ce<=3,m=h?Ce+1:Ce,C=Rt.totalBitsInLayer(m,h),u>C)continue;(P==null||N!==Rt.WORD_SIZE[m])&&(N=Rt.WORD_SIZE[m],P=Rt.stuffBits(l,N));let bt=C-C%N;if(!(h&&P.getSize()>N*64)&&P.getSize()+c<=bt)break}}let M=Rt.generateCheckWords(P,C,N),U=P.getSize()/N,X=Rt.generateModeMessage(h,m,U),$=(h?11:14)+m*4,te=new Int32Array($),ae;if(h){ae=$;for(let Ce=0;Ce<te.length;Ce++)te[Ce]=Ce}else{ae=$+1+2*z.truncDivision(z.truncDivision($,2)-1,15);let Ce=z.truncDivision($,2),bt=z.truncDivision(ae,2);for(let ht=0;ht<Ce;ht++){let tr=ht+z.truncDivision(ht,15);te[Ce-ht-1]=bt-tr-1,te[Ce+ht]=bt+tr+1}}let Se=new Fe(ae);for(let Ce=0,bt=0;Ce<m;Ce++){let ht=(m-Ce)*4+(h?9:12);for(let tr=0;tr<ht;tr++){let _r=tr*2;for(let vn=0;vn<2;vn++)M.get(bt+_r+vn)&&Se.set(te[Ce*2+vn],te[Ce*2+tr]),M.get(bt+ht*2+_r+vn)&&Se.set(te[Ce*2+tr],te[$-1-Ce*2-vn]),M.get(bt+ht*4+_r+vn)&&Se.set(te[$-1-Ce*2-vn],te[$-1-Ce*2-tr]),M.get(bt+ht*6+_r+vn)&&Se.set(te[$-1-Ce*2-tr],te[Ce*2+vn])}bt+=ht*8}if(Rt.drawModeMessage(Se,h,ae,X),h)Rt.drawBullsEye(Se,z.truncDivision(ae,2),5);else{Rt.drawBullsEye(Se,z.truncDivision(ae,2),7);for(let Ce=0,bt=0;Ce<z.truncDivision($,2)-1;Ce+=15,bt+=16)for(let ht=z.truncDivision(ae,2)&1;ht<ae;ht+=2)Se.set(z.truncDivision(ae,2)-bt,ht),Se.set(z.truncDivision(ae,2)+bt,ht),Se.set(ht,z.truncDivision(ae,2)-bt),Se.set(ht,z.truncDivision(ae,2)+bt)}let Te=new sl;return Te.setCompact(h),Te.setSize(ae),Te.setLayers(m),Te.setCodeWords(U),Te.setMatrix(Se),Te}static drawBullsEye(e,n,i){for(let l=0;l<i;l+=2)for(let c=n-l;c<=n+l;c++)e.set(c,n-l),e.set(c,n+l),e.set(n-l,c),e.set(n+l,c);e.set(n-i,n-i),e.set(n-i+1,n-i),e.set(n-i,n-i+1),e.set(n+i,n-i),e.set(n+i,n-i+1),e.set(n+i,n+i-1)}static generateModeMessage(e,n,i){let l=new J;return e?(l.appendBits(n-1,2),l.appendBits(i-1,6),l=Rt.generateCheckWords(l,28,4)):(l.appendBits(n-1,5),l.appendBits(i-1,11),l=Rt.generateCheckWords(l,40,4)),l}static drawModeMessage(e,n,i,l){let c=z.truncDivision(i,2);if(n)for(let u=0;u<7;u++){let h=c-3+u;l.get(u)&&e.set(h,c-5),l.get(u+7)&&e.set(c+5,h),l.get(20-u)&&e.set(h,c+5),l.get(27-u)&&e.set(c-5,h)}else for(let u=0;u<10;u++){let h=c-5+u+z.truncDivision(u,5);l.get(u)&&e.set(h,c-7),l.get(u+10)&&e.set(c+7,h),l.get(29-u)&&e.set(h,c+7),l.get(39-u)&&e.set(c-7,h)}}static generateCheckWords(e,n,i){let l=e.getSize()/i,c=new qo(Rt.getGF(i)),u=z.truncDivision(n,i),h=Rt.bitsToWords(e,i,u);c.encode(h,u-l);let m=n%i,C=new J;C.appendBits(0,m);for(const N of Array.from(h))C.appendBits(N,i);return C}static bitsToWords(e,n,i){let l=new Int32Array(i),c,u;for(c=0,u=e.getSize()/n;c<u;c++){let h=0;for(let m=0;m<n;m++)h|=e.get(c*n+m)?1<<n-m-1:0;l[c]=h}return l}static getGF(e){switch(e){case 4:return De.AZTEC_PARAM;case 6:return De.AZTEC_DATA_6;case 8:return De.AZTEC_DATA_8;case 10:return De.AZTEC_DATA_10;case 12:return De.AZTEC_DATA_12;default:throw new I("Unsupported word size "+e)}}static stuffBits(e,n){let i=new J,l=e.getSize(),c=(1<<n)-2;for(let u=0;u<l;u+=n){let h=0;for(let m=0;m<n;m++)(u+m>=l||e.get(u+m))&&(h|=1<<n-1-m);(h&c)===c?(i.appendBits(h&c,n),u--):h&c?i.appendBits(h,n):(i.appendBits(h|1,n),u--)}return i}static totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}Rt.DEFAULT_EC_PERCENT=33,Rt.DEFAULT_AZTEC_LAYERS=0,Rt.MAX_NB_BITS=32,Rt.MAX_NB_BITS_COMPACT=4,Rt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Os{encode(e,n,i,l){return this.encodeWithHints(e,n,i,l,null)}encodeWithHints(e,n,i,l,c){let u=Qo.ISO_8859_1,h=Rt.DEFAULT_EC_PERCENT,m=Rt.DEFAULT_AZTEC_LAYERS;return c!=null&&(c.has(wn.CHARACTER_SET)&&(u=il.forName(c.get(wn.CHARACTER_SET).toString())),c.has(wn.ERROR_CORRECTION)&&(h=z.parseInt(c.get(wn.ERROR_CORRECTION).toString())),c.has(wn.AZTEC_LAYERS)&&(m=z.parseInt(c.get(wn.AZTEC_LAYERS).toString()))),Os.encodeLayers(e,n,i,l,u,h,m)}static encodeLayers(e,n,i,l,c,u,h){if(n!==oe.AZTEC)throw new I("Can only encode AZTEC, but got "+n);let m=Rt.encode(Ie.getBytes(e,c),u,h);return Os.renderResult(m,i,l)}static renderResult(e,n,i){let l=e.getMatrix();if(l==null)throw new zt;let c=l.getWidth(),u=l.getHeight(),h=Math.max(n,c),m=Math.max(i,u),C=Math.min(h/c,m/u),N=(h-c*C)/2,P=(m-u*C)/2,M=new Fe(h,m);for(let U=0,X=P;U<u;U++,X+=C)for(let $=0,te=N;$<c;$++,te+=C)l.get($,U)&&M.setRegion(te,X,C,C);return M}}a.AbstractExpandedDecoder=Gi,a.ArgumentException=S,a.ArithmeticException=ut,a.AztecCode=sl,a.AztecCodeReader=Ht,a.AztecCodeWriter=Os,a.AztecDecoder=vt,a.AztecDetector=nn,a.AztecDetectorResult=Ct,a.AztecEncoder=Rt,a.AztecHighLevelEncoder=Ps,a.AztecPoint=At,a.BarcodeFormat=oe,a.Binarizer=L,a.BinaryBitmap=_,a.BitArray=J,a.BitMatrix=Fe,a.BitSource=Ho,a.BrowserAztecCodeReader=un,a.BrowserBarcodeReader=Xi,a.BrowserCodeReader=pe,a.BrowserDatamatrixCodeReader=Dc,a.BrowserMultiFormatReader=_s,a.BrowserPDF417Reader=oo,a.BrowserQRCodeReader=rl,a.BrowserQRCodeSvgWriter=Ti,a.CharacterSetECI=Z,a.ChecksumException=D,a.Code128Reader=ge,a.Code39Reader=lt,a.DataMatrixDecodedBitStreamParser=Sr,a.DataMatrixReader=Tr,a.DecodeHintType=de,a.DecoderResult=Ve,a.DefaultGridSampler=Ut,a.DetectorResult=zn,a.EAN13Reader=Mn,a.EncodeHintType=wn,a.Exception=E,a.FormatException=q,a.GenericGF=De,a.GenericGFPoly=Xe,a.GlobalHistogramBinarizer=He,a.GridSampler=et,a.GridSamplerInstance=kt,a.HTMLCanvasElementLuminanceSource=fe,a.HybridBinarizer=xe,a.ITFReader=st,a.IllegalArgumentException=I,a.IllegalStateException=zt,a.InvertedLuminanceSource=Le,a.LuminanceSource=he,a.MathUtils=pt,a.MultiFormatOneDReader=Ei,a.MultiFormatReader=so,a.MultiFormatWriter=Lc,a.NotFoundException=ee,a.OneDReader=je,a.PDF417DecodedBitStreamParser=le,a.PDF417DecoderErrorCorrection=Yo,a.PDF417Reader=Rn,a.PDF417ResultMetadata=ro,a.PerspectiveTransform=gt,a.PlanarYUVLuminanceSource=Fr,a.QRCodeByteMatrix=ao,a.QRCodeDataMask=wt,a.QRCodeDecodedBitStreamParser=Yt,a.QRCodeDecoderErrorCorrectionLevel=Vt,a.QRCodeDecoderFormatInformation=In,a.QRCodeEncoder=Gt,a.QRCodeEncoderQRCode=Si,a.QRCodeMaskUtil=Kt,a.QRCodeMatrixUtil=tt,a.QRCodeMode=Qe,a.QRCodeReader=Hn,a.QRCodeVersion=qe,a.QRCodeWriter=Qi,a.RGBLuminanceSource=Rs,a.RSS14Reader=Ot,a.RSSExpandedReader=ye,a.ReaderException=qi,a.ReedSolomonDecoder=jt,a.ReedSolomonEncoder=qo,a.ReedSolomonException=it,a.Result=Oe,a.ResultMetadataType=Ne,a.ResultPoint=_e,a.StringUtils=Ie,a.UnsupportedOperationException=Ae,a.VideoInputDevice=K,a.WhiteRectangleDetector=Ye,a.WriterException=Wt,a.ZXingArrays=W,a.ZXingCharset=il,a.ZXingInteger=z,a.ZXingStandardCharsets=Qo,a.ZXingStringBuilder=Pe,a.ZXingStringEncoding=ke,a.ZXingSystem=B,a.createAbstractExpandedDecoder=Wn,Object.defineProperty(a,"__esModule",{value:!0})})}(_a,_a.exports)),_a.exports}$y();var df=function(){var r=function(o,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var x in p)Object.prototype.hasOwnProperty.call(p,x)&&(f[x]=p[x])},r(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(o,a);function f(){this.constructor=o}o.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),ng=function(){function r(o,a){this.name=o,this.track=a}return r.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},r.prototype.apply=function(o){var a={};a[this.name]=o;var f={advanced:[a]};return this.track.applyConstraints(f)},r.prototype.value=function(){var o=this.track.getSettings();if(this.name in o){var a=o[this.name];return a}return null},r}(),Zy=function(r){df(o,r);function o(a,f){return r.call(this,a,f)||this}return o.prototype.min=function(){return this.getCapabilities().min},o.prototype.max=function(){return this.getCapabilities().max},o.prototype.step=function(){return this.getCapabilities().step},o.prototype.apply=function(a){var f={};f[this.name]=a;var p={advanced:[f]};return this.track.applyConstraints(p)},o.prototype.getCapabilities=function(){this.failIfNotSupported();var a=this.track.getCapabilities(),f=a[this.name];return{min:f.min,max:f.max,step:f.step}},o.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},o}(ng);(function(r){df(o,r);function o(a){return r.call(this,"zoom",a)||this}return o})(Zy);(function(r){df(o,r);function o(a){return r.call(this,"torch",a)||this}return o})(ng);var x1;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.NOT_STARTED=1]="NOT_STARTED",r[r.SCANNING=2]="SCANNING",r[r.PAUSED=3]="PAUSED"})(x1||(x1={}));var qy=function(){var r=function(o,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var x in p)Object.prototype.hasOwnProperty.call(p,x)&&(f[x]=p[x])},r(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(o,a);function f(){this.constructor=o}o.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}();(function(r){qy(o,r);function o(){return r!==null&&r.apply(this,arguments)||this}return o.DEFAULT_WIDTH=300,o.DEFAULT_WIDTH_OFFSET=2,o.FILE_SCAN_MIN_HEIGHT=300,o.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,o.MIN_QR_BOX_SIZE=50,o.SHADED_LEFT=1,o.SHADED_RIGHT=2,o.SHADED_TOP=3,o.SHADED_BOTTOM=4,o.SHADED_REGION_ELEMENT_ID="qr-shaded-region",o.VERBOSE=!1,o.BORDER_SHADER_DEFAULT_COLOR="#ffffff",o.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",o})(Yy);var y1;(function(r){r[r.STATUS_DEFAULT=0]="STATUS_DEFAULT",r[r.STATUS_SUCCESS=1]="STATUS_SUCCESS",r[r.STATUS_WARNING=2]="STATUS_WARNING",r[r.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(y1||(y1={}));const Qy=({user:r,onProfileClick:o})=>{const a=ar();return v.jsx("div",{children:v.jsx("div",{style:{position:"absolute",top:"45px",display:"flex",alignItems:"center",width:"94%",height:"10px",left:"3%"},children:r==null?v.jsxs("div",{style:{position:"absolute",width:"100%",display:"flex",justifyContent:"space-between"},children:[v.jsx("button",{className:"login-button",onClick:()=>a("/login"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:v.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Login"})}),v.jsx("button",{className:"login-button",onClick:()=>a("/signup"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:v.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Sign up"})})]}):v.jsxs("div",{style:{position:"absolute",width:"100%",display:"flex",justifyContent:"space-between"},children:[v.jsx("button",{className:"login-button",onClick:()=>a("/logout"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:v.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Logout"})}),v.jsx("button",{className:"login-button",onClick:o,style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:v.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Profile"})})]})})})},ff=R.createContext({});function hf(r){const o=R.useRef(null);return o.current===null&&(o.current=r()),o.current}const pf=typeof window<"u",rg=pf?R.useLayoutEffect:R.useEffect,_c=R.createContext(null);function gf(r,o){r.indexOf(o)===-1&&r.push(o)}function mf(r,o){const a=r.indexOf(o);a>-1&&r.splice(a,1)}const ji=(r,o,a)=>a>o?o:a<r?r:a;let xf=()=>{};const Vi={},ig=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r);function sg(r){return typeof r=="object"&&r!==null}const og=r=>/^0[^.\s]+$/u.test(r);function yf(r){let o;return()=>(o===void 0&&(o=r()),o)}const Yr=r=>r,Jy=(r,o)=>a=>o(r(a)),Ya=(...r)=>r.reduce(Jy),Fa=(r,o,a)=>{const f=o-r;return f===0?1:(a-r)/f};class wf{constructor(){this.subscriptions=[]}add(o){return gf(this.subscriptions,o),()=>mf(this.subscriptions,o)}notify(o,a,f){const p=this.subscriptions.length;if(p)if(p===1)this.subscriptions[0](o,a,f);else for(let x=0;x<p;x++){const y=this.subscriptions[x];y&&y(o,a,f)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const gi=r=>r*1e3,mi=r=>r/1e3;function ag(r,o){return o?r*(1e3/o):0}const lg=(r,o,a)=>(((1-3*a+3*o)*r+(3*a-6*o))*r+3*o)*r,ew=1e-7,tw=12;function nw(r,o,a,f,p){let x,y,b=0;do y=o+(a-o)/2,x=lg(y,f,p)-r,x>0?a=y:o=y;while(Math.abs(x)>ew&&++b<tw);return y}function Ka(r,o,a,f){if(r===o&&a===f)return Yr;const p=x=>nw(x,0,1,r,a);return x=>x===0||x===1?x:lg(p(x),o,f)}const cg=r=>o=>o<=.5?r(2*o)/2:(2-r(2*(1-o)))/2,ug=r=>o=>1-r(1-o),dg=Ka(.33,1.53,.69,.99),vf=ug(dg),fg=cg(vf),hg=r=>(r*=2)<1?.5*vf(r):.5*(2-Math.pow(2,-10*(r-1))),Cf=r=>1-Math.sin(Math.acos(r)),pg=ug(Cf),gg=cg(Cf),rw=Ka(.42,0,1,1),iw=Ka(0,0,.58,1),mg=Ka(.42,0,.58,1),sw=r=>Array.isArray(r)&&typeof r[0]!="number",xg=r=>Array.isArray(r)&&typeof r[0]=="number",ow={linear:Yr,easeIn:rw,easeInOut:mg,easeOut:iw,circIn:Cf,circInOut:gg,circOut:pg,backIn:vf,backInOut:fg,backOut:dg,anticipate:hg},aw=r=>typeof r=="string",w1=r=>{if(xg(r)){xf(r.length===4);const[o,a,f,p]=r;return Ka(o,a,f,p)}else if(aw(r))return ow[r];return r},rc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function lw(r,o){let a=new Set,f=new Set,p=!1,x=!1;const y=new WeakSet;let b={delta:0,timestamp:0,isProcessing:!1};function w(S){y.has(S)&&(E.schedule(S),r()),S(b)}const E={schedule:(S,I=!1,_=!1)=>{const L=_&&p?a:f;return I&&y.add(S),L.has(S)||L.add(S),S},cancel:S=>{f.delete(S),y.delete(S)},process:S=>{if(b=S,p){x=!0;return}p=!0,[a,f]=[f,a],a.forEach(w),a.clear(),p=!1,x&&(x=!1,E.process(S))}};return E}const cw=40;function yg(r,o){let a=!1,f=!0;const p={delta:0,timestamp:0,isProcessing:!1},x=()=>a=!0,y=rc.reduce((z,J)=>(z[J]=lw(x),z),{}),{setup:b,read:w,resolveKeyframes:E,preUpdate:S,update:I,preRender:_,render:D,postRender:L}=y,B=()=>{const z=Vi.useManualTiming?p.timestamp:performance.now();a=!1,Vi.useManualTiming||(p.delta=f?1e3/60:Math.max(Math.min(z-p.timestamp,cw),1)),p.timestamp=z,p.isProcessing=!0,b.process(p),w.process(p),E.process(p),S.process(p),I.process(p),_.process(p),D.process(p),L.process(p),p.isProcessing=!1,a&&o&&(f=!1,r(B))},F=()=>{a=!0,f=!0,p.isProcessing||r(B)};return{schedule:rc.reduce((z,J)=>{const ne=y[J];return z[J]=(de,q=!1,ce=!1)=>(a||F(),ne.schedule(de,q,ce)),z},{}),cancel:z=>{for(let J=0;J<rc.length;J++)y[rc[J]].cancel(z)},state:p,steps:y}}const{schedule:tn,cancel:ws,state:Zn,steps:fd}=yg(typeof requestAnimationFrame<"u"?requestAnimationFrame:Yr,!0);let dc;function uw(){dc=void 0}const br={now:()=>(dc===void 0&&br.set(Zn.isProcessing||Vi.useManualTiming?Zn.timestamp:performance.now()),dc),set:r=>{dc=r,queueMicrotask(uw)}},wg=r=>o=>typeof o=="string"&&o.startsWith(r),Ef=wg("--"),dw=wg("var(--"),Af=r=>dw(r)?fw.test(r.split("/*")[0].trim()):!1,fw=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Vo={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},ja={...Vo,transform:r=>ji(0,1,r)},ic={...Vo,default:1},ka=r=>Math.round(r*1e5)/1e5,bf=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function hw(r){return r==null}const pw=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Sf=(r,o)=>a=>!!(typeof a=="string"&&pw.test(a)&&a.startsWith(r)||o&&!hw(a)&&Object.prototype.hasOwnProperty.call(a,o)),vg=(r,o,a)=>f=>{if(typeof f!="string")return f;const[p,x,y,b]=f.match(bf);return{[r]:parseFloat(p),[o]:parseFloat(x),[a]:parseFloat(y),alpha:b!==void 0?parseFloat(b):1}},gw=r=>ji(0,255,r),hd={...Vo,transform:r=>Math.round(gw(r))},Ks={test:Sf("rgb","red"),parse:vg("red","green","blue"),transform:({red:r,green:o,blue:a,alpha:f=1})=>"rgba("+hd.transform(r)+", "+hd.transform(o)+", "+hd.transform(a)+", "+ka(ja.transform(f))+")"};function mw(r){let o="",a="",f="",p="";return r.length>5?(o=r.substring(1,3),a=r.substring(3,5),f=r.substring(5,7),p=r.substring(7,9)):(o=r.substring(1,2),a=r.substring(2,3),f=r.substring(3,4),p=r.substring(4,5),o+=o,a+=a,f+=f,p+=p),{red:parseInt(o,16),green:parseInt(a,16),blue:parseInt(f,16),alpha:p?parseInt(p,16)/255:1}}const Rd={test:Sf("#"),parse:mw,transform:Ks.transform},$a=r=>({test:o=>typeof o=="string"&&o.endsWith(r)&&o.split(" ").length===1,parse:parseFloat,transform:o=>`${o}${r}`}),ms=$a("deg"),xi=$a("%"),ct=$a("px"),xw=$a("vh"),yw=$a("vw"),v1={...xi,parse:r=>xi.parse(r)/100,transform:r=>xi.transform(r*100)},No={test:Sf("hsl","hue"),parse:vg("hue","saturation","lightness"),transform:({hue:r,saturation:o,lightness:a,alpha:f=1})=>"hsla("+Math.round(r)+", "+xi.transform(ka(o))+", "+xi.transform(ka(a))+", "+ka(ja.transform(f))+")"},Sn={test:r=>Ks.test(r)||Rd.test(r)||No.test(r),parse:r=>Ks.test(r)?Ks.parse(r):No.test(r)?No.parse(r):Rd.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?Ks.transform(r):No.transform(r),getAnimatableNone:r=>{const o=Sn.parse(r);return o.alpha=0,Sn.transform(o)}},ww=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function vw(r){var o,a;return isNaN(r)&&typeof r=="string"&&(((o=r.match(bf))==null?void 0:o.length)||0)+(((a=r.match(ww))==null?void 0:a.length)||0)>0}const Cg="number",Eg="color",Cw="var",Ew="var(",C1="${}",Aw=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Va(r){const o=r.toString(),a=[],f={color:[],number:[],var:[]},p=[];let x=0;const b=o.replace(Aw,w=>(Sn.test(w)?(f.color.push(x),p.push(Eg),a.push(Sn.parse(w))):w.startsWith(Ew)?(f.var.push(x),p.push(Cw),a.push(w)):(f.number.push(x),p.push(Cg),a.push(parseFloat(w))),++x,C1)).split(C1);return{values:a,split:b,indexes:f,types:p}}function Ag(r){return Va(r).values}function bg(r){const{split:o,types:a}=Va(r),f=o.length;return p=>{let x="";for(let y=0;y<f;y++)if(x+=o[y],p[y]!==void 0){const b=a[y];b===Cg?x+=ka(p[y]):b===Eg?x+=Sn.transform(p[y]):x+=p[y]}return x}}const bw=r=>typeof r=="number"?0:Sn.test(r)?Sn.getAnimatableNone(r):r;function Sw(r){const o=Ag(r);return bg(r)(o.map(bw))}const vs={test:vw,parse:Ag,createTransformer:bg,getAnimatableNone:Sw};function pd(r,o,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?r+(o-r)*6*a:a<1/2?o:a<2/3?r+(o-r)*(2/3-a)*6:r}function Tw({hue:r,saturation:o,lightness:a,alpha:f}){r/=360,o/=100,a/=100;let p=0,x=0,y=0;if(!o)p=x=y=a;else{const b=a<.5?a*(1+o):a+o-a*o,w=2*a-b;p=pd(w,b,r+1/3),x=pd(w,b,r),y=pd(w,b,r-1/3)}return{red:Math.round(p*255),green:Math.round(x*255),blue:Math.round(y*255),alpha:f}}function yc(r,o){return a=>a>0?o:r}const ln=(r,o,a)=>r+(o-r)*a,gd=(r,o,a)=>{const f=r*r,p=a*(o*o-f)+f;return p<0?0:Math.sqrt(p)},Iw=[Rd,Ks,No],Nw=r=>Iw.find(o=>o.test(r));function E1(r){const o=Nw(r);if(!o)return!1;let a=o.parse(r);return o===No&&(a=Tw(a)),a}const A1=(r,o)=>{const a=E1(r),f=E1(o);if(!a||!f)return yc(r,o);const p={...a};return x=>(p.red=gd(a.red,f.red,x),p.green=gd(a.green,f.green,x),p.blue=gd(a.blue,f.blue,x),p.alpha=ln(a.alpha,f.alpha,x),Ks.transform(p))},kd=new Set(["none","hidden"]);function _w(r,o){return kd.has(r)?a=>a<=0?r:o:a=>a>=1?o:r}function Rw(r,o){return a=>ln(r,o,a)}function Tf(r){return typeof r=="number"?Rw:typeof r=="string"?Af(r)?yc:Sn.test(r)?A1:Ow:Array.isArray(r)?Sg:typeof r=="object"?Sn.test(r)?A1:kw:yc}function Sg(r,o){const a=[...r],f=a.length,p=r.map((x,y)=>Tf(x)(x,o[y]));return x=>{for(let y=0;y<f;y++)a[y]=p[y](x);return a}}function kw(r,o){const a={...r,...o},f={};for(const p in a)r[p]!==void 0&&o[p]!==void 0&&(f[p]=Tf(r[p])(r[p],o[p]));return p=>{for(const x in f)a[x]=f[x](p);return a}}function Pw(r,o){const a=[],f={color:0,var:0,number:0};for(let p=0;p<o.values.length;p++){const x=o.types[p],y=r.indexes[x][f[x]],b=r.values[y]??0;a[p]=b,f[x]++}return a}const Ow=(r,o)=>{const a=vs.createTransformer(o),f=Va(r),p=Va(o);return f.indexes.var.length===p.indexes.var.length&&f.indexes.color.length===p.indexes.color.length&&f.indexes.number.length>=p.indexes.number.length?kd.has(r)&&!p.values.length||kd.has(o)&&!f.values.length?_w(r,o):Ya(Sg(Pw(f,p),p.values),a):yc(r,o)};function Tg(r,o,a){return typeof r=="number"&&typeof o=="number"&&typeof a=="number"?ln(r,o,a):Tf(r)(r,o)}const Dw=r=>{const o=({timestamp:a})=>r(a);return{start:(a=!0)=>tn.update(o,a),stop:()=>ws(o),now:()=>Zn.isProcessing?Zn.timestamp:br.now()}},Ig=(r,o,a=10)=>{let f="";const p=Math.max(Math.round(o/a),2);for(let x=0;x<p;x++)f+=Math.round(r(x/(p-1))*1e4)/1e4+", ";return`linear(${f.substring(0,f.length-2)})`},wc=2e4;function If(r){let o=0;const a=50;let f=r.next(o);for(;!f.done&&o<wc;)o+=a,f=r.next(o);return o>=wc?1/0:o}function Mw(r,o=100,a){const f=a({...r,keyframes:[0,o]}),p=Math.min(If(f),wc);return{type:"keyframes",ease:x=>f.next(p*x).value/o,duration:mi(p)}}const Lw=5;function Ng(r,o,a){const f=Math.max(o-Lw,0);return ag(a-r(f),o-f)}const mn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},b1=.001;function Bw({duration:r=mn.duration,bounce:o=mn.bounce,velocity:a=mn.velocity,mass:f=mn.mass}){let p,x,y=1-o;y=ji(mn.minDamping,mn.maxDamping,y),r=ji(mn.minDuration,mn.maxDuration,mi(r)),y<1?(p=E=>{const S=E*y,I=S*r,_=S-a,D=Pd(E,y),L=Math.exp(-I);return b1-_/D*L},x=E=>{const I=E*y*r,_=I*a+a,D=Math.pow(y,2)*Math.pow(E,2)*r,L=Math.exp(-I),B=Pd(Math.pow(E,2),y);return(-p(E)+b1>0?-1:1)*((_-D)*L)/B}):(p=E=>{const S=Math.exp(-E*r),I=(E-a)*r+1;return-.001+S*I},x=E=>{const S=Math.exp(-E*r),I=(a-E)*(r*r);return S*I});const b=5/r,w=jw(p,x,b);if(r=gi(r),isNaN(w))return{stiffness:mn.stiffness,damping:mn.damping,duration:r};{const E=Math.pow(w,2)*f;return{stiffness:E,damping:y*2*Math.sqrt(f*E),duration:r}}}const Fw=12;function jw(r,o,a){let f=a;for(let p=1;p<Fw;p++)f=f-r(f)/o(f);return f}function Pd(r,o){return r*Math.sqrt(1-o*o)}const Vw=["duration","bounce"],zw=["stiffness","damping","mass"];function S1(r,o){return o.some(a=>r[a]!==void 0)}function Uw(r){let o={velocity:mn.velocity,stiffness:mn.stiffness,damping:mn.damping,mass:mn.mass,isResolvedFromDuration:!1,...r};if(!S1(r,zw)&&S1(r,Vw))if(r.visualDuration){const a=r.visualDuration,f=2*Math.PI/(a*1.2),p=f*f,x=2*ji(.05,1,1-(r.bounce||0))*Math.sqrt(p);o={...o,mass:mn.mass,stiffness:p,damping:x}}else{const a=Bw(r);o={...o,...a,mass:mn.mass},o.isResolvedFromDuration=!0}return o}function vc(r=mn.visualDuration,o=mn.bounce){const a=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:o}:r;let{restSpeed:f,restDelta:p}=a;const x=a.keyframes[0],y=a.keyframes[a.keyframes.length-1],b={done:!1,value:x},{stiffness:w,damping:E,mass:S,duration:I,velocity:_,isResolvedFromDuration:D}=Uw({...a,velocity:-mi(a.velocity||0)}),L=_||0,B=E/(2*Math.sqrt(w*S)),F=y-x,j=mi(Math.sqrt(w/S)),W=Math.abs(F)<5;f||(f=W?mn.restSpeed.granular:mn.restSpeed.default),p||(p=W?mn.restDelta.granular:mn.restDelta.default);let z;if(B<1){const ne=Pd(j,B);z=de=>{const q=Math.exp(-B*j*de);return y-q*((L+B*j*F)/ne*Math.sin(ne*de)+F*Math.cos(ne*de))}}else if(B===1)z=ne=>y-Math.exp(-j*ne)*(F+(L+j*F)*ne);else{const ne=j*Math.sqrt(B*B-1);z=de=>{const q=Math.exp(-B*j*de),ce=Math.min(ne*de,300);return y-q*((L+B*j*F)*Math.sinh(ce)+ne*F*Math.cosh(ce))/ne}}const J={calculatedDuration:D&&I||null,next:ne=>{const de=z(ne);if(D)b.done=ne>=I;else{let q=ne===0?L:0;B<1&&(q=ne===0?gi(L):Ng(z,ne,de));const ce=Math.abs(q)<=f,Z=Math.abs(y-de)<=p;b.done=ce&&Z}return b.value=b.done?y:de,b},toString:()=>{const ne=Math.min(If(J),wc),de=Ig(q=>J.next(ne*q).value,ne,30);return ne+"ms "+de},toTransition:()=>{}};return J}vc.applyToOptions=r=>{const o=Mw(r,100,vc);return r.ease=o.ease,r.duration=gi(o.duration),r.type="keyframes",r};function Od({keyframes:r,velocity:o=0,power:a=.8,timeConstant:f=325,bounceDamping:p=10,bounceStiffness:x=500,modifyTarget:y,min:b,max:w,restDelta:E=.5,restSpeed:S}){const I=r[0],_={done:!1,value:I},D=ce=>b!==void 0&&ce<b||w!==void 0&&ce>w,L=ce=>b===void 0?w:w===void 0||Math.abs(b-ce)<Math.abs(w-ce)?b:w;let B=a*o;const F=I+B,j=y===void 0?F:y(F);j!==F&&(B=j-I);const W=ce=>-B*Math.exp(-ce/f),z=ce=>j+W(ce),J=ce=>{const Z=W(ce),Ae=z(ce);_.done=Math.abs(Z)<=E,_.value=_.done?j:Ae};let ne,de;const q=ce=>{D(_.value)&&(ne=ce,de=vc({keyframes:[_.value,L(_.value)],velocity:Ng(z,ce,_.value),damping:p,stiffness:x,restDelta:E,restSpeed:S}))};return q(0),{calculatedDuration:null,next:ce=>{let Z=!1;return!de&&ne===void 0&&(Z=!0,J(ce),q(ce)),ne!==void 0&&ce>=ne?de.next(ce-ne):(!Z&&J(ce),_)}}}function Ww(r,o,a){const f=[],p=a||Vi.mix||Tg,x=r.length-1;for(let y=0;y<x;y++){let b=p(r[y],r[y+1]);if(o){const w=Array.isArray(o)?o[y]||Yr:o;b=Ya(w,b)}f.push(b)}return f}function Hw(r,o,{clamp:a=!0,ease:f,mixer:p}={}){const x=r.length;if(xf(x===o.length),x===1)return()=>o[0];if(x===2&&o[0]===o[1])return()=>o[1];const y=r[0]===r[1];r[0]>r[x-1]&&(r=[...r].reverse(),o=[...o].reverse());const b=Ww(o,f,p),w=b.length,E=S=>{if(y&&S<r[0])return o[0];let I=0;if(w>1)for(;I<r.length-2&&!(S<r[I+1]);I++);const _=Fa(r[I],r[I+1],S);return b[I](_)};return a?S=>E(ji(r[0],r[x-1],S)):E}function Gw(r,o){const a=r[r.length-1];for(let f=1;f<=o;f++){const p=Fa(0,o,f);r.push(ln(a,1,p))}}function Xw(r){const o=[0];return Gw(o,r.length-1),o}function Yw(r,o){return r.map(a=>a*o)}function Kw(r,o){return r.map(()=>o||mg).splice(0,r.length-1)}function Pa({duration:r=300,keyframes:o,times:a,ease:f="easeInOut"}){const p=sw(f)?f.map(w1):w1(f),x={done:!1,value:o[0]},y=Yw(a&&a.length===o.length?a:Xw(o),r),b=Hw(y,o,{ease:Array.isArray(p)?p:Kw(o,p)});return{calculatedDuration:r,next:w=>(x.value=b(w),x.done=w>=r,x)}}const $w=r=>r!==null;function Nf(r,{repeat:o,repeatType:a="loop"},f,p=1){const x=r.filter($w),b=p<0||o&&a!=="loop"&&o%2===1?0:x.length-1;return!b||f===void 0?x[b]:f}const Zw={decay:Od,inertia:Od,tween:Pa,keyframes:Pa,spring:vc};function _g(r){typeof r.type=="string"&&(r.type=Zw[r.type])}class _f{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(o=>{this.resolve=o})}notifyFinished(){this.resolve()}then(o,a){return this.finished.then(o,a)}}const qw=r=>r/100;class Rf extends _f{constructor(o){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var f,p;const{motionValue:a}=this.options;a&&a.updatedAt!==br.now()&&this.tick(br.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(p=(f=this.options).onStop)==null||p.call(f))},this.options=o,this.initAnimation(),this.play(),o.autoplay===!1&&this.pause()}initAnimation(){const{options:o}=this;_g(o);const{type:a=Pa,repeat:f=0,repeatDelay:p=0,repeatType:x,velocity:y=0}=o;let{keyframes:b}=o;const w=a||Pa;w!==Pa&&typeof b[0]!="number"&&(this.mixKeyframes=Ya(qw,Tg(b[0],b[1])),b=[0,100]);const E=w({...o,keyframes:b});x==="mirror"&&(this.mirroredGenerator=w({...o,keyframes:[...b].reverse(),velocity:-y})),E.calculatedDuration===null&&(E.calculatedDuration=If(E));const{calculatedDuration:S}=E;this.calculatedDuration=S,this.resolvedDuration=S+p,this.totalDuration=this.resolvedDuration*(f+1)-p,this.generator=E}updateTime(o){const a=Math.round(o-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=a}tick(o,a=!1){const{generator:f,totalDuration:p,mixKeyframes:x,mirroredGenerator:y,resolvedDuration:b,calculatedDuration:w}=this;if(this.startTime===null)return f.next(0);const{delay:E=0,keyframes:S,repeat:I,repeatType:_,repeatDelay:D,type:L,onUpdate:B,finalKeyframe:F}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,o):this.speed<0&&(this.startTime=Math.min(o-p/this.speed,this.startTime)),a?this.currentTime=o:this.updateTime(o);const j=this.currentTime-E*(this.playbackSpeed>=0?1:-1),W=this.playbackSpeed>=0?j<0:j>p;this.currentTime=Math.max(j,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let z=this.currentTime,J=f;if(I){const ce=Math.min(this.currentTime,p)/b;let Z=Math.floor(ce),Ae=ce%1;!Ae&&ce>=1&&(Ae=1),Ae===1&&Z--,Z=Math.min(Z,I+1),!!(Z%2)&&(_==="reverse"?(Ae=1-Ae,D&&(Ae-=D/b)):_==="mirror"&&(J=y)),z=ji(0,1,Ae)*b}const ne=W?{done:!1,value:S[0]}:J.next(z);x&&(ne.value=x(ne.value));let{done:de}=ne;!W&&w!==null&&(de=this.playbackSpeed>=0?this.currentTime>=p:this.currentTime<=0);const q=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&de);return q&&L!==Od&&(ne.value=Nf(S,this.options,F,this.speed)),B&&B(ne.value),q&&this.finish(),ne}then(o,a){return this.finished.then(o,a)}get duration(){return mi(this.calculatedDuration)}get time(){return mi(this.currentTime)}set time(o){var a;o=gi(o),this.currentTime=o,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=o:this.driver&&(this.startTime=this.driver.now()-o/this.playbackSpeed),(a=this.driver)==null||a.start(!1)}get speed(){return this.playbackSpeed}set speed(o){this.updateTime(br.now());const a=this.playbackSpeed!==o;this.playbackSpeed=o,a&&(this.time=mi(this.currentTime))}play(){var p,x;if(this.isStopped)return;const{driver:o=Dw,startTime:a}=this.options;this.driver||(this.driver=o(y=>this.tick(y))),(x=(p=this.options).onPlay)==null||x.call(p);const f=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=f):this.holdTime!==null?this.startTime=f-this.holdTime:this.startTime||(this.startTime=a??f),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(br.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var o,a;this.notifyFinished(),this.teardown(),this.state="finished",(a=(o=this.options).onComplete)==null||a.call(o)}cancel(){var o,a;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(a=(o=this.options).onCancel)==null||a.call(o)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(o){return this.startTime=0,this.tick(o,!0)}attachTimeline(o){var a;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(a=this.driver)==null||a.stop(),o.observe(this)}}function Qw(r){for(let o=1;o<r.length;o++)r[o]??(r[o]=r[o-1])}const $s=r=>r*180/Math.PI,Dd=r=>{const o=$s(Math.atan2(r[1],r[0]));return Md(o)},Jw={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:r=>(Math.abs(r[0])+Math.abs(r[3]))/2,rotate:Dd,rotateZ:Dd,skewX:r=>$s(Math.atan(r[1])),skewY:r=>$s(Math.atan(r[2])),skew:r=>(Math.abs(r[1])+Math.abs(r[2]))/2},Md=r=>(r=r%360,r<0&&(r+=360),r),T1=Dd,I1=r=>Math.sqrt(r[0]*r[0]+r[1]*r[1]),N1=r=>Math.sqrt(r[4]*r[4]+r[5]*r[5]),ev={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:I1,scaleY:N1,scale:r=>(I1(r)+N1(r))/2,rotateX:r=>Md($s(Math.atan2(r[6],r[5]))),rotateY:r=>Md($s(Math.atan2(-r[2],r[0]))),rotateZ:T1,rotate:T1,skewX:r=>$s(Math.atan(r[4])),skewY:r=>$s(Math.atan(r[1])),skew:r=>(Math.abs(r[1])+Math.abs(r[4]))/2};function Ld(r){return r.includes("scale")?1:0}function Bd(r,o){if(!r||r==="none")return Ld(o);const a=r.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let f,p;if(a)f=ev,p=a;else{const b=r.match(/^matrix\(([-\d.e\s,]+)\)$/u);f=Jw,p=b}if(!p)return Ld(o);const x=f[o],y=p[1].split(",").map(nv);return typeof x=="function"?x(y):y[x]}const tv=(r,o)=>{const{transform:a="none"}=getComputedStyle(r);return Bd(a,o)};function nv(r){return parseFloat(r.trim())}const zo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Uo=new Set(zo),_1=r=>r===Vo||r===ct,rv=new Set(["x","y","z"]),iv=zo.filter(r=>!rv.has(r));function sv(r){const o=[];return iv.forEach(a=>{const f=r.getValue(a);f!==void 0&&(o.push([a,f.get()]),f.set(a.startsWith("scale")?1:0))}),o}const qs={width:({x:r},{paddingLeft:o="0",paddingRight:a="0"})=>r.max-r.min-parseFloat(o)-parseFloat(a),height:({y:r},{paddingTop:o="0",paddingBottom:a="0"})=>r.max-r.min-parseFloat(o)-parseFloat(a),top:(r,{top:o})=>parseFloat(o),left:(r,{left:o})=>parseFloat(o),bottom:({y:r},{top:o})=>parseFloat(o)+(r.max-r.min),right:({x:r},{left:o})=>parseFloat(o)+(r.max-r.min),x:(r,{transform:o})=>Bd(o,"x"),y:(r,{transform:o})=>Bd(o,"y")};qs.translateX=qs.x;qs.translateY=qs.y;const Qs=new Set;let Fd=!1,jd=!1,Vd=!1;function Rg(){if(jd){const r=Array.from(Qs).filter(f=>f.needsMeasurement),o=new Set(r.map(f=>f.element)),a=new Map;o.forEach(f=>{const p=sv(f);p.length&&(a.set(f,p),f.render())}),r.forEach(f=>f.measureInitialState()),o.forEach(f=>{f.render();const p=a.get(f);p&&p.forEach(([x,y])=>{var b;(b=f.getValue(x))==null||b.set(y)})}),r.forEach(f=>f.measureEndState()),r.forEach(f=>{f.suspendedScrollY!==void 0&&window.scrollTo(0,f.suspendedScrollY)})}jd=!1,Fd=!1,Qs.forEach(r=>r.complete(Vd)),Qs.clear()}function kg(){Qs.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(jd=!0)})}function ov(){Vd=!0,kg(),Rg(),Vd=!1}class kf{constructor(o,a,f,p,x,y=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...o],this.onComplete=a,this.name=f,this.motionValue=p,this.element=x,this.isAsync=y}scheduleResolve(){this.state="scheduled",this.isAsync?(Qs.add(this),Fd||(Fd=!0,tn.read(kg),tn.resolveKeyframes(Rg))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:o,name:a,element:f,motionValue:p}=this;if(o[0]===null){const x=p==null?void 0:p.get(),y=o[o.length-1];if(x!==void 0)o[0]=x;else if(f&&a){const b=f.readValue(a,y);b!=null&&(o[0]=b)}o[0]===void 0&&(o[0]=y),p&&x===void 0&&p.set(o[0])}Qw(o)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(o=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,o),Qs.delete(this)}cancel(){this.state==="scheduled"&&(Qs.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const av=r=>r.startsWith("--");function lv(r,o,a){av(o)?r.style.setProperty(o,a):r.style[o]=a}const cv=yf(()=>window.ScrollTimeline!==void 0),uv={};function dv(r,o){const a=yf(r);return()=>uv[o]??a()}const Pg=dv(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ra=([r,o,a,f])=>`cubic-bezier(${r}, ${o}, ${a}, ${f})`,R1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ra([0,.65,.55,1]),circOut:Ra([.55,0,1,.45]),backIn:Ra([.31,.01,.66,-.59]),backOut:Ra([.33,1.53,.69,.99])};function Og(r,o){if(r)return typeof r=="function"?Pg()?Ig(r,o):"ease-out":xg(r)?Ra(r):Array.isArray(r)?r.map(a=>Og(a,o)||R1.easeOut):R1[r]}function fv(r,o,a,{delay:f=0,duration:p=300,repeat:x=0,repeatType:y="loop",ease:b="easeOut",times:w}={},E=void 0){const S={[o]:a};w&&(S.offset=w);const I=Og(b,p);Array.isArray(I)&&(S.easing=I);const _={delay:f,duration:p,easing:Array.isArray(I)?"linear":I,fill:"both",iterations:x+1,direction:y==="reverse"?"alternate":"normal"};return E&&(_.pseudoElement=E),r.animate(S,_)}function Dg(r){return typeof r=="function"&&"applyToOptions"in r}function hv({type:r,...o}){return Dg(r)&&Pg()?r.applyToOptions(o):(o.duration??(o.duration=300),o.ease??(o.ease="easeOut"),o)}class pv extends _f{constructor(o){if(super(),this.finishedTime=null,this.isStopped=!1,!o)return;const{element:a,name:f,keyframes:p,pseudoElement:x,allowFlatten:y=!1,finalKeyframe:b,onComplete:w}=o;this.isPseudoElement=!!x,this.allowFlatten=y,this.options=o,xf(typeof o.type!="string");const E=hv(o);this.animation=fv(a,f,p,E,x),E.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!x){const S=Nf(p,this.options,b,this.speed);this.updateMotionValue?this.updateMotionValue(S):lv(a,f,S),this.animation.cancel()}w==null||w(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var o,a;(a=(o=this.animation).finish)==null||a.call(o)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:o}=this;o==="idle"||o==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var o,a;this.isPseudoElement||(a=(o=this.animation).commitStyles)==null||a.call(o)}get duration(){var a,f;const o=((f=(a=this.animation.effect)==null?void 0:a.getComputedTiming)==null?void 0:f.call(a).duration)||0;return mi(Number(o))}get time(){return mi(Number(this.animation.currentTime)||0)}set time(o){this.finishedTime=null,this.animation.currentTime=gi(o)}get speed(){return this.animation.playbackRate}set speed(o){o<0&&(this.finishedTime=null),this.animation.playbackRate=o}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(o){this.animation.startTime=o}attachTimeline({timeline:o,observe:a}){var f;return this.allowFlatten&&((f=this.animation.effect)==null||f.updateTiming({easing:"linear"})),this.animation.onfinish=null,o&&cv()?(this.animation.timeline=o,Yr):a(this)}}const Mg={anticipate:hg,backInOut:fg,circInOut:gg};function gv(r){return r in Mg}function mv(r){typeof r.ease=="string"&&gv(r.ease)&&(r.ease=Mg[r.ease])}const k1=10;class xv extends pv{constructor(o){mv(o),_g(o),super(o),o.startTime&&(this.startTime=o.startTime),this.options=o}updateMotionValue(o){const{motionValue:a,onUpdate:f,onComplete:p,element:x,...y}=this.options;if(!a)return;if(o!==void 0){a.set(o);return}const b=new Rf({...y,autoplay:!1}),w=gi(this.finishedTime??this.time);a.setWithVelocity(b.sample(w-k1).value,b.sample(w).value,k1),b.stop()}}const P1=(r,o)=>o==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(vs.test(r)||r==="0")&&!r.startsWith("url("));function yv(r){const o=r[0];if(r.length===1)return!0;for(let a=0;a<r.length;a++)if(r[a]!==o)return!0}function wv(r,o,a,f){const p=r[0];if(p===null)return!1;if(o==="display"||o==="visibility")return!0;const x=r[r.length-1],y=P1(p,o),b=P1(x,o);return!y||!b?!1:yv(r)||(a==="spring"||Dg(a))&&f}function zd(r){r.duration=0,r.type}const vv=new Set(["opacity","clipPath","filter","transform"]),Cv=yf(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Ev(r){var S;const{motionValue:o,name:a,repeatDelay:f,repeatType:p,damping:x,type:y}=r;if(!(((S=o==null?void 0:o.owner)==null?void 0:S.current)instanceof HTMLElement))return!1;const{onUpdate:w,transformTemplate:E}=o.owner.getProps();return Cv()&&a&&vv.has(a)&&(a!=="transform"||!E)&&!w&&!f&&p!=="mirror"&&x!==0&&y!=="inertia"}const Av=40;class bv extends _f{constructor({autoplay:o=!0,delay:a=0,type:f="keyframes",repeat:p=0,repeatDelay:x=0,repeatType:y="loop",keyframes:b,name:w,motionValue:E,element:S,...I}){var L;super(),this.stop=()=>{var B,F;this._animation&&(this._animation.stop(),(B=this.stopTimeline)==null||B.call(this)),(F=this.keyframeResolver)==null||F.cancel()},this.createdAt=br.now();const _={autoplay:o,delay:a,type:f,repeat:p,repeatDelay:x,repeatType:y,name:w,motionValue:E,element:S,...I},D=(S==null?void 0:S.KeyframeResolver)||kf;this.keyframeResolver=new D(b,(B,F,j)=>this.onKeyframesResolved(B,F,_,!j),w,E,S),(L=this.keyframeResolver)==null||L.scheduleResolve()}onKeyframesResolved(o,a,f,p){this.keyframeResolver=void 0;const{name:x,type:y,velocity:b,delay:w,isHandoff:E,onUpdate:S}=f;this.resolvedAt=br.now(),wv(o,x,y,b)||((Vi.instantAnimations||!w)&&(S==null||S(Nf(o,f,a))),o[0]=o[o.length-1],zd(f),f.repeat=0);const _={startTime:p?this.resolvedAt?this.resolvedAt-this.createdAt>Av?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:a,...f,keyframes:o},D=!E&&Ev(_)?new xv({..._,element:_.motionValue.owner.current}):new Rf(_);D.finished.then(()=>this.notifyFinished()).catch(Yr),this.pendingTimeline&&(this.stopTimeline=D.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=D}get finished(){return this._animation?this.animation.finished:this._finished}then(o,a){return this.finished.finally(o).then(()=>{})}get animation(){var o;return this._animation||((o=this.keyframeResolver)==null||o.resume(),ov()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(o){this.animation.time=o}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(o){this.animation.speed=o}get startTime(){return this.animation.startTime}attachTimeline(o){return this._animation?this.stopTimeline=this.animation.attachTimeline(o):this.pendingTimeline=o,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var o;this._animation&&this.animation.cancel(),(o=this.keyframeResolver)==null||o.cancel()}}const Sv=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Tv(r){const o=Sv.exec(r);if(!o)return[,];const[,a,f,p]=o;return[`--${a??f}`,p]}function Lg(r,o,a=1){const[f,p]=Tv(r);if(!f)return;const x=window.getComputedStyle(o).getPropertyValue(f);if(x){const y=x.trim();return ig(y)?parseFloat(y):y}return Af(p)?Lg(p,o,a+1):p}function Pf(r,o){return(r==null?void 0:r[o])??(r==null?void 0:r.default)??r}const Bg=new Set(["width","height","top","left","right","bottom",...zo]),Iv={test:r=>r==="auto",parse:r=>r},Fg=r=>o=>o.test(r),jg=[Vo,ct,xi,ms,yw,xw,Iv],O1=r=>jg.find(Fg(r));function Nv(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||og(r):!0}const _v=new Set(["brightness","contrast","saturate","opacity"]);function Rv(r){const[o,a]=r.slice(0,-1).split("(");if(o==="drop-shadow")return r;const[f]=a.match(bf)||[];if(!f)return r;const p=a.replace(f,"");let x=_v.has(o)?1:0;return f!==a&&(x*=100),o+"("+x+p+")"}const kv=/\b([a-z-]*)\(.*?\)/gu,Ud={...vs,getAnimatableNone:r=>{const o=r.match(kv);return o?o.map(Rv).join(" "):r}},D1={...Vo,transform:Math.round},Pv={rotate:ms,rotateX:ms,rotateY:ms,rotateZ:ms,scale:ic,scaleX:ic,scaleY:ic,scaleZ:ic,skew:ms,skewX:ms,skewY:ms,distance:ct,translateX:ct,translateY:ct,translateZ:ct,x:ct,y:ct,z:ct,perspective:ct,transformPerspective:ct,opacity:ja,originX:v1,originY:v1,originZ:ct},Of={borderWidth:ct,borderTopWidth:ct,borderRightWidth:ct,borderBottomWidth:ct,borderLeftWidth:ct,borderRadius:ct,radius:ct,borderTopLeftRadius:ct,borderTopRightRadius:ct,borderBottomRightRadius:ct,borderBottomLeftRadius:ct,width:ct,maxWidth:ct,height:ct,maxHeight:ct,top:ct,right:ct,bottom:ct,left:ct,padding:ct,paddingTop:ct,paddingRight:ct,paddingBottom:ct,paddingLeft:ct,margin:ct,marginTop:ct,marginRight:ct,marginBottom:ct,marginLeft:ct,backgroundPositionX:ct,backgroundPositionY:ct,...Pv,zIndex:D1,fillOpacity:ja,strokeOpacity:ja,numOctaves:D1},Ov={...Of,color:Sn,backgroundColor:Sn,outlineColor:Sn,fill:Sn,stroke:Sn,borderColor:Sn,borderTopColor:Sn,borderRightColor:Sn,borderBottomColor:Sn,borderLeftColor:Sn,filter:Ud,WebkitFilter:Ud},Vg=r=>Ov[r];function zg(r,o){let a=Vg(r);return a!==Ud&&(a=vs),a.getAnimatableNone?a.getAnimatableNone(o):void 0}const Dv=new Set(["auto","none","0"]);function Mv(r,o,a){let f=0,p;for(;f<r.length&&!p;){const x=r[f];typeof x=="string"&&!Dv.has(x)&&Va(x).values.length&&(p=r[f]),f++}if(p&&a)for(const x of o)r[x]=zg(a,p)}class Lv extends kf{constructor(o,a,f,p,x){super(o,a,f,p,x,!0)}readKeyframes(){const{unresolvedKeyframes:o,element:a,name:f}=this;if(!a||!a.current)return;super.readKeyframes();for(let w=0;w<o.length;w++){let E=o[w];if(typeof E=="string"&&(E=E.trim(),Af(E))){const S=Lg(E,a.current);S!==void 0&&(o[w]=S),w===o.length-1&&(this.finalKeyframe=E)}}if(this.resolveNoneKeyframes(),!Bg.has(f)||o.length!==2)return;const[p,x]=o,y=O1(p),b=O1(x);if(y!==b)if(_1(y)&&_1(b))for(let w=0;w<o.length;w++){const E=o[w];typeof E=="string"&&(o[w]=parseFloat(E))}else qs[f]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:o,name:a}=this,f=[];for(let p=0;p<o.length;p++)(o[p]===null||Nv(o[p]))&&f.push(p);f.length&&Mv(o,f,a)}measureInitialState(){const{element:o,unresolvedKeyframes:a,name:f}=this;if(!o||!o.current)return;f==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=qs[f](o.measureViewportBox(),window.getComputedStyle(o.current)),a[0]=this.measuredOrigin;const p=a[a.length-1];p!==void 0&&o.getValue(f,p).jump(p,!1)}measureEndState(){var b;const{element:o,name:a,unresolvedKeyframes:f}=this;if(!o||!o.current)return;const p=o.getValue(a);p&&p.jump(this.measuredOrigin,!1);const x=f.length-1,y=f[x];f[x]=qs[a](o.measureViewportBox(),window.getComputedStyle(o.current)),y!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=y),(b=this.removedTransforms)!=null&&b.length&&this.removedTransforms.forEach(([w,E])=>{o.getValue(w).set(E)}),this.resolveNoneKeyframes()}}function Bv(r,o,a){if(r instanceof EventTarget)return[r];if(typeof r=="string"){let f=document;const p=(a==null?void 0:a[r])??f.querySelectorAll(r);return p?Array.from(p):[]}return Array.from(r)}const Ug=(r,o)=>o&&typeof r=="number"?o.transform(r):r;function Wg(r){return sg(r)&&"offsetHeight"in r}const M1=30,Fv=r=>!isNaN(parseFloat(r));class jv{constructor(o,a={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=f=>{var x;const p=br.now();if(this.updatedAt!==p&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(f),this.current!==this.prev&&((x=this.events.change)==null||x.notify(this.current),this.dependents))for(const y of this.dependents)y.dirty()},this.hasAnimated=!1,this.setCurrent(o),this.owner=a.owner}setCurrent(o){this.current=o,this.updatedAt=br.now(),this.canTrackVelocity===null&&o!==void 0&&(this.canTrackVelocity=Fv(this.current))}setPrevFrameValue(o=this.current){this.prevFrameValue=o,this.prevUpdatedAt=this.updatedAt}onChange(o){return this.on("change",o)}on(o,a){this.events[o]||(this.events[o]=new wf);const f=this.events[o].add(a);return o==="change"?()=>{f(),tn.read(()=>{this.events.change.getSize()||this.stop()})}:f}clearListeners(){for(const o in this.events)this.events[o].clear()}attach(o,a){this.passiveEffect=o,this.stopPassiveEffect=a}set(o){this.passiveEffect?this.passiveEffect(o,this.updateAndNotify):this.updateAndNotify(o)}setWithVelocity(o,a,f){this.set(a),this.prev=void 0,this.prevFrameValue=o,this.prevUpdatedAt=this.updatedAt-f}jump(o,a=!0){this.updateAndNotify(o),this.prev=o,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var o;(o=this.events.change)==null||o.notify(this.current)}addDependent(o){this.dependents||(this.dependents=new Set),this.dependents.add(o)}removeDependent(o){this.dependents&&this.dependents.delete(o)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const o=br.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||o-this.updatedAt>M1)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,M1);return ag(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(o){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=o(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var o,a;(o=this.dependents)==null||o.clear(),(a=this.events.destroy)==null||a.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Lo(r,o){return new jv(r,o)}const{schedule:Df}=yg(queueMicrotask,!1),ii={x:!1,y:!1};function Hg(){return ii.x||ii.y}function Vv(r){return r==="x"||r==="y"?ii[r]?null:(ii[r]=!0,()=>{ii[r]=!1}):ii.x||ii.y?null:(ii.x=ii.y=!0,()=>{ii.x=ii.y=!1})}function Gg(r,o){const a=Bv(r),f=new AbortController,p={passive:!0,...o,signal:f.signal};return[a,p,()=>f.abort()]}function L1(r){return!(r.pointerType==="touch"||Hg())}function zv(r,o,a={}){const[f,p,x]=Gg(r,a),y=b=>{if(!L1(b))return;const{target:w}=b,E=o(w,b);if(typeof E!="function"||!w)return;const S=I=>{L1(I)&&(E(I),w.removeEventListener("pointerleave",S))};w.addEventListener("pointerleave",S,p)};return f.forEach(b=>{b.addEventListener("pointerenter",y,p)}),x}const Xg=(r,o)=>o?r===o?!0:Xg(r,o.parentElement):!1,Mf=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,Uv=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Wv(r){return Uv.has(r.tagName)||r.tabIndex!==-1}const fc=new WeakSet;function B1(r){return o=>{o.key==="Enter"&&r(o)}}function md(r,o){r.dispatchEvent(new PointerEvent("pointer"+o,{isPrimary:!0,bubbles:!0}))}const Hv=(r,o)=>{const a=r.currentTarget;if(!a)return;const f=B1(()=>{if(fc.has(a))return;md(a,"down");const p=B1(()=>{md(a,"up")}),x=()=>md(a,"cancel");a.addEventListener("keyup",p,o),a.addEventListener("blur",x,o)});a.addEventListener("keydown",f,o),a.addEventListener("blur",()=>a.removeEventListener("keydown",f),o)};function F1(r){return Mf(r)&&!Hg()}function Gv(r,o,a={}){const[f,p,x]=Gg(r,a),y=b=>{const w=b.currentTarget;if(!F1(b))return;fc.add(w);const E=o(w,b),S=(D,L)=>{window.removeEventListener("pointerup",I),window.removeEventListener("pointercancel",_),fc.has(w)&&fc.delete(w),F1(D)&&typeof E=="function"&&E(D,{success:L})},I=D=>{S(D,w===window||w===document||a.useGlobalTarget||Xg(w,D.target))},_=D=>{S(D,!1)};window.addEventListener("pointerup",I,p),window.addEventListener("pointercancel",_,p)};return f.forEach(b=>{(a.useGlobalTarget?window:b).addEventListener("pointerdown",y,p),Wg(b)&&(b.addEventListener("focus",E=>Hv(E,p)),!Wv(b)&&!b.hasAttribute("tabindex")&&(b.tabIndex=0))}),x}function Yg(r){return sg(r)&&"ownerSVGElement"in r}function Xv(r){return Yg(r)&&r.tagName==="svg"}const or=r=>!!(r&&r.getVelocity),Yv=[...jg,Sn,vs],Kv=r=>Yv.find(Fg(r)),Lf=R.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});class $v extends R.Component{getSnapshotBeforeUpdate(o){const a=this.props.childRef.current;if(a&&o.isPresent&&!this.props.isPresent){const f=a.offsetParent,p=Wg(f)&&f.offsetWidth||0,x=this.props.sizeRef.current;x.height=a.offsetHeight||0,x.width=a.offsetWidth||0,x.top=a.offsetTop,x.left=a.offsetLeft,x.right=p-x.width-x.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Zv({children:r,isPresent:o,anchorX:a,root:f}){const p=R.useId(),x=R.useRef(null),y=R.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:b}=R.useContext(Lf);return R.useInsertionEffect(()=>{const{width:w,height:E,top:S,left:I,right:_}=y.current;if(o||!x.current||!w||!E)return;const D=a==="left"?`left: ${I}`:`right: ${_}`;x.current.dataset.motionPopId=p;const L=document.createElement("style");b&&(L.nonce=b);const B=f??document.head;return B.appendChild(L),L.sheet&&L.sheet.insertRule(`
          [data-motion-pop-id="${p}"] {
            position: absolute !important;
            width: ${w}px !important;
            height: ${E}px !important;
            ${D}px !important;
            top: ${S}px !important;
          }
        `),()=>{B.contains(L)&&B.removeChild(L)}},[o]),v.jsx($v,{isPresent:o,childRef:x,sizeRef:y,children:R.cloneElement(r,{ref:x})})}const qv=({children:r,initial:o,isPresent:a,onExitComplete:f,custom:p,presenceAffectsLayout:x,mode:y,anchorX:b,root:w})=>{const E=hf(Qv),S=R.useId();let I=!0,_=R.useMemo(()=>(I=!1,{id:S,initial:o,isPresent:a,custom:p,onExitComplete:D=>{E.set(D,!0);for(const L of E.values())if(!L)return;f&&f()},register:D=>(E.set(D,!1),()=>E.delete(D))}),[a,E,f]);return x&&I&&(_={..._}),R.useMemo(()=>{E.forEach((D,L)=>E.set(L,!1))},[a]),R.useEffect(()=>{!a&&!E.size&&f&&f()},[a]),y==="popLayout"&&(r=v.jsx(Zv,{isPresent:a,anchorX:b,root:w,children:r})),v.jsx(_c.Provider,{value:_,children:r})};function Qv(){return new Map}function Kg(r=!0){const o=R.useContext(_c);if(o===null)return[!0,null];const{isPresent:a,onExitComplete:f,register:p}=o,x=R.useId();R.useEffect(()=>{if(r)return p(x)},[r]);const y=R.useCallback(()=>r&&f&&f(x),[x,f,r]);return!a&&f?[!1,y]:[!0]}const sc=r=>r.key||"";function j1(r){const o=[];return R.Children.forEach(r,a=>{R.isValidElement(a)&&o.push(a)}),o}const V1=({children:r,custom:o,initial:a=!0,onExitComplete:f,presenceAffectsLayout:p=!0,mode:x="sync",propagate:y=!1,anchorX:b="left",root:w})=>{const[E,S]=Kg(y),I=R.useMemo(()=>j1(r),[r]),_=y&&!E?[]:I.map(sc),D=R.useRef(!0),L=R.useRef(I),B=hf(()=>new Map),[F,j]=R.useState(I),[W,z]=R.useState(I);rg(()=>{D.current=!1,L.current=I;for(let de=0;de<W.length;de++){const q=sc(W[de]);_.includes(q)?B.delete(q):B.get(q)!==!0&&B.set(q,!1)}},[W,_.length,_.join("-")]);const J=[];if(I!==F){let de=[...I];for(let q=0;q<W.length;q++){const ce=W[q],Z=sc(ce);_.includes(Z)||(de.splice(q,0,ce),J.push(ce))}return x==="wait"&&J.length&&(de=J),z(j1(de)),j(I),null}const{forceRender:ne}=R.useContext(ff);return v.jsx(v.Fragment,{children:W.map(de=>{const q=sc(de),ce=y&&!E?!1:I===W||_.includes(q),Z=()=>{if(B.has(q))B.set(q,!0);else return;let Ae=!0;B.forEach(ke=>{ke||(Ae=!1)}),Ae&&(ne==null||ne(),z(L.current),y&&(S==null||S()),f&&f())};return v.jsx(qv,{isPresent:ce,initial:!D.current||a?void 0:!1,custom:o,presenceAffectsLayout:p,mode:x,root:w,onExitComplete:ce?void 0:Z,anchorX:b,children:de},q)})})},$g=R.createContext({strict:!1}),z1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Bo={};for(const r in z1)Bo[r]={isEnabled:o=>z1[r].some(a=>!!o[a])};function Jv(r){for(const o in r)Bo[o]={...Bo[o],...r[o]}}const e3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Cc(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||e3.has(r)}let Zg=r=>!Cc(r);function t3(r){typeof r=="function"&&(Zg=o=>o.startsWith("on")?!Cc(o):r(o))}try{t3(require("@emotion/is-prop-valid").default)}catch{}function n3(r,o,a){const f={};for(const p in r)p==="values"&&typeof r.values=="object"||(Zg(p)||a===!0&&Cc(p)||!o&&!Cc(p)||r.draggable&&p.startsWith("onDrag"))&&(f[p]=r[p]);return f}const Rc=R.createContext({});function kc(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}function za(r){return typeof r=="string"||Array.isArray(r)}const Bf=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ff=["initial",...Bf];function Pc(r){return kc(r.animate)||Ff.some(o=>za(r[o]))}function qg(r){return!!(Pc(r)||r.variants)}function r3(r,o){if(Pc(r)){const{initial:a,animate:f}=r;return{initial:a===!1||za(a)?a:void 0,animate:za(f)?f:void 0}}return r.inherit!==!1?o:{}}function i3(r){const{initial:o,animate:a}=r3(r,R.useContext(Rc));return R.useMemo(()=>({initial:o,animate:a}),[U1(o),U1(a)])}function U1(r){return Array.isArray(r)?r.join(" "):r}const Ua={};function s3(r){for(const o in r)Ua[o]=r[o],Ef(o)&&(Ua[o].isCSSVariable=!0)}function Qg(r,{layout:o,layoutId:a}){return Uo.has(r)||r.startsWith("origin")||(o||a!==void 0)&&(!!Ua[r]||r==="opacity")}const o3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},a3=zo.length;function l3(r,o,a){let f="",p=!0;for(let x=0;x<a3;x++){const y=zo[x],b=r[y];if(b===void 0)continue;let w=!0;if(typeof b=="number"?w=b===(y.startsWith("scale")?1:0):w=parseFloat(b)===0,!w||a){const E=Ug(b,Of[y]);if(!w){p=!1;const S=o3[y]||y;f+=`${S}(${E}) `}a&&(o[y]=E)}}return f=f.trim(),a?f=a(o,p?"":f):p&&(f="none"),f}function jf(r,o,a){const{style:f,vars:p,transformOrigin:x}=r;let y=!1,b=!1;for(const w in o){const E=o[w];if(Uo.has(w)){y=!0;continue}else if(Ef(w)){p[w]=E;continue}else{const S=Ug(E,Of[w]);w.startsWith("origin")?(b=!0,x[w]=S):f[w]=S}}if(o.transform||(y||a?f.transform=l3(o,r.transform,a):f.transform&&(f.transform="none")),b){const{originX:w="50%",originY:E="50%",originZ:S=0}=x;f.transformOrigin=`${w} ${E} ${S}`}}const Vf=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Jg(r,o,a){for(const f in o)!or(o[f])&&!Qg(f,a)&&(r[f]=o[f])}function c3({transformTemplate:r},o){return R.useMemo(()=>{const a=Vf();return jf(a,o,r),Object.assign({},a.vars,a.style)},[o])}function u3(r,o){const a=r.style||{},f={};return Jg(f,a,r),Object.assign(f,c3(r,o)),f}function d3(r,o){const a={},f=u3(r,o);return r.drag&&r.dragListener!==!1&&(a.draggable=!1,f.userSelect=f.WebkitUserSelect=f.WebkitTouchCallout="none",f.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(a.tabIndex=0),a.style=f,a}const f3={offset:"stroke-dashoffset",array:"stroke-dasharray"},h3={offset:"strokeDashoffset",array:"strokeDasharray"};function p3(r,o,a=1,f=0,p=!0){r.pathLength=1;const x=p?f3:h3;r[x.offset]=ct.transform(-f);const y=ct.transform(o),b=ct.transform(a);r[x.array]=`${y} ${b}`}function em(r,{attrX:o,attrY:a,attrScale:f,pathLength:p,pathSpacing:x=1,pathOffset:y=0,...b},w,E,S){if(jf(r,b,E),w){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:I,style:_}=r;I.transform&&(_.transform=I.transform,delete I.transform),(_.transform||I.transformOrigin)&&(_.transformOrigin=I.transformOrigin??"50% 50%",delete I.transformOrigin),_.transform&&(_.transformBox=(S==null?void 0:S.transformBox)??"fill-box",delete I.transformBox),o!==void 0&&(I.x=o),a!==void 0&&(I.y=a),f!==void 0&&(I.scale=f),p!==void 0&&p3(I,p,x,y,!1)}const tm=()=>({...Vf(),attrs:{}}),nm=r=>typeof r=="string"&&r.toLowerCase()==="svg";function g3(r,o,a,f){const p=R.useMemo(()=>{const x=tm();return em(x,o,nm(f),r.transformTemplate,r.style),{...x.attrs,style:{...x.style}}},[o]);if(r.style){const x={};Jg(x,r.style,r),p.style={...x,...p.style}}return p}const m3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function zf(r){return typeof r!="string"||r.includes("-")?!1:!!(m3.indexOf(r)>-1||/[A-Z]/u.test(r))}function x3(r,o,a,{latestValues:f},p,x=!1){const b=(zf(r)?g3:d3)(o,f,p,r),w=n3(o,typeof r=="string",x),E=r!==R.Fragment?{...w,...b,ref:a}:{},{children:S}=o,I=R.useMemo(()=>or(S)?S.get():S,[S]);return R.createElement(r,{...E,children:I})}function W1(r){const o=[{},{}];return r==null||r.values.forEach((a,f)=>{o[0][f]=a.get(),o[1][f]=a.getVelocity()}),o}function Uf(r,o,a,f){if(typeof o=="function"){const[p,x]=W1(f);o=o(a!==void 0?a:r.custom,p,x)}if(typeof o=="string"&&(o=r.variants&&r.variants[o]),typeof o=="function"){const[p,x]=W1(f);o=o(a!==void 0?a:r.custom,p,x)}return o}function hc(r){return or(r)?r.get():r}function y3({scrapeMotionValuesFromProps:r,createRenderState:o},a,f,p){return{latestValues:w3(a,f,p,r),renderState:o()}}function w3(r,o,a,f){const p={},x=f(r,{});for(const _ in x)p[_]=hc(x[_]);let{initial:y,animate:b}=r;const w=Pc(r),E=qg(r);o&&E&&!w&&r.inherit!==!1&&(y===void 0&&(y=o.initial),b===void 0&&(b=o.animate));let S=a?a.initial===!1:!1;S=S||y===!1;const I=S?b:y;if(I&&typeof I!="boolean"&&!kc(I)){const _=Array.isArray(I)?I:[I];for(let D=0;D<_.length;D++){const L=Uf(r,_[D]);if(L){const{transitionEnd:B,transition:F,...j}=L;for(const W in j){let z=j[W];if(Array.isArray(z)){const J=S?z.length-1:0;z=z[J]}z!==null&&(p[W]=z)}for(const W in B)p[W]=B[W]}}}return p}const rm=r=>(o,a)=>{const f=R.useContext(Rc),p=R.useContext(_c),x=()=>y3(r,o,f,p);return a?x():hf(x)};function Wf(r,o,a){var x;const{style:f}=r,p={};for(const y in f)(or(f[y])||o.style&&or(o.style[y])||Qg(y,r)||((x=a==null?void 0:a.getValue(y))==null?void 0:x.liveStyle)!==void 0)&&(p[y]=f[y]);return p}const v3=rm({scrapeMotionValuesFromProps:Wf,createRenderState:Vf});function im(r,o,a){const f=Wf(r,o,a);for(const p in r)if(or(r[p])||or(o[p])){const x=zo.indexOf(p)!==-1?"attr"+p.charAt(0).toUpperCase()+p.substring(1):p;f[x]=r[p]}return f}const C3=rm({scrapeMotionValuesFromProps:im,createRenderState:tm}),E3=Symbol.for("motionComponentSymbol");function _o(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function A3(r,o,a){return R.useCallback(f=>{f&&r.onMount&&r.onMount(f),o&&(f?o.mount(f):o.unmount()),a&&(typeof a=="function"?a(f):_o(a)&&(a.current=f))},[o])}const Hf=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),b3="framerAppearId",sm="data-"+Hf(b3),om=R.createContext({});function S3(r,o,a,f,p){var B,F;const{visualElement:x}=R.useContext(Rc),y=R.useContext($g),b=R.useContext(_c),w=R.useContext(Lf).reducedMotion,E=R.useRef(null);f=f||y.renderer,!E.current&&f&&(E.current=f(r,{visualState:o,parent:x,props:a,presenceContext:b,blockInitialAnimation:b?b.initial===!1:!1,reducedMotionConfig:w}));const S=E.current,I=R.useContext(om);S&&!S.projection&&p&&(S.type==="html"||S.type==="svg")&&T3(E.current,a,p,I);const _=R.useRef(!1);R.useInsertionEffect(()=>{S&&_.current&&S.update(a,b)});const D=a[sm],L=R.useRef(!!D&&!((B=window.MotionHandoffIsComplete)!=null&&B.call(window,D))&&((F=window.MotionHasOptimisedAnimation)==null?void 0:F.call(window,D)));return rg(()=>{S&&(_.current=!0,window.MotionIsMounted=!0,S.updateFeatures(),S.scheduleRenderMicrotask(),L.current&&S.animationState&&S.animationState.animateChanges())}),R.useEffect(()=>{S&&(!L.current&&S.animationState&&S.animationState.animateChanges(),L.current&&(queueMicrotask(()=>{var j;(j=window.MotionHandoffMarkAsComplete)==null||j.call(window,D)}),L.current=!1),S.enteringChildren=void 0)}),S}function T3(r,o,a,f){const{layoutId:p,layout:x,drag:y,dragConstraints:b,layoutScroll:w,layoutRoot:E,layoutCrossfade:S}=o;r.projection=new a(r.latestValues,o["data-framer-portal-id"]?void 0:am(r.parent)),r.projection.setOptions({layoutId:p,layout:x,alwaysMeasureLayout:!!y||b&&_o(b),visualElement:r,animationType:typeof x=="string"?x:"both",initialPromotionConfig:f,crossfade:S,layoutScroll:w,layoutRoot:E})}function am(r){if(r)return r.options.allowProjection!==!1?r.projection:am(r.parent)}function xd(r,{forwardMotionProps:o=!1}={},a,f){a&&Jv(a);const p=zf(r)?C3:v3;function x(b,w){let E;const S={...R.useContext(Lf),...b,layoutId:I3(b)},{isStatic:I}=S,_=i3(b),D=p(b,I);if(!I&&pf){N3();const L=_3(S);E=L.MeasureLayout,_.visualElement=S3(r,D,S,f,L.ProjectionNode)}return v.jsxs(Rc.Provider,{value:_,children:[E&&_.visualElement?v.jsx(E,{visualElement:_.visualElement,...S}):null,x3(r,b,A3(D,_.visualElement,w),D,I,o)]})}x.displayName=`motion.${typeof r=="string"?r:`create(${r.displayName??r.name??""})`}`;const y=R.forwardRef(x);return y[E3]=r,y}function I3({layoutId:r}){const o=R.useContext(ff).id;return o&&r!==void 0?o+"-"+r:r}function N3(r,o){R.useContext($g).strict}function _3(r){const{drag:o,layout:a}=Bo;if(!o&&!a)return{};const f={...o,...a};return{MeasureLayout:o!=null&&o.isEnabled(r)||a!=null&&a.isEnabled(r)?f.MeasureLayout:void 0,ProjectionNode:f.ProjectionNode}}function R3(r,o){if(typeof Proxy>"u")return xd;const a=new Map,f=(x,y)=>xd(x,y,r,o),p=(x,y)=>f(x,y);return new Proxy(p,{get:(x,y)=>y==="create"?f:(a.has(y)||a.set(y,xd(y,void 0,r,o)),a.get(y))})}function lm({top:r,left:o,right:a,bottom:f}){return{x:{min:o,max:a},y:{min:r,max:f}}}function k3({x:r,y:o}){return{top:o.min,right:r.max,bottom:o.max,left:r.min}}function P3(r,o){if(!o)return r;const a=o({x:r.left,y:r.top}),f=o({x:r.right,y:r.bottom});return{top:a.y,left:a.x,bottom:f.y,right:f.x}}function yd(r){return r===void 0||r===1}function Wd({scale:r,scaleX:o,scaleY:a}){return!yd(r)||!yd(o)||!yd(a)}function Ys(r){return Wd(r)||cm(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function cm(r){return H1(r.x)||H1(r.y)}function H1(r){return r&&r!=="0%"}function Ec(r,o,a){const f=r-a,p=o*f;return a+p}function G1(r,o,a,f,p){return p!==void 0&&(r=Ec(r,p,f)),Ec(r,a,f)+o}function Hd(r,o=0,a=1,f,p){r.min=G1(r.min,o,a,f,p),r.max=G1(r.max,o,a,f,p)}function um(r,{x:o,y:a}){Hd(r.x,o.translate,o.scale,o.originPoint),Hd(r.y,a.translate,a.scale,a.originPoint)}const X1=.999999999999,Y1=1.0000000000001;function O3(r,o,a,f=!1){const p=a.length;if(!p)return;o.x=o.y=1;let x,y;for(let b=0;b<p;b++){x=a[b],y=x.projectionDelta;const{visualElement:w}=x.options;w&&w.props.style&&w.props.style.display==="contents"||(f&&x.options.layoutScroll&&x.scroll&&x!==x.root&&ko(r,{x:-x.scroll.offset.x,y:-x.scroll.offset.y}),y&&(o.x*=y.x.scale,o.y*=y.y.scale,um(r,y)),f&&Ys(x.latestValues)&&ko(r,x.latestValues))}o.x<Y1&&o.x>X1&&(o.x=1),o.y<Y1&&o.y>X1&&(o.y=1)}function Ro(r,o){r.min=r.min+o,r.max=r.max+o}function K1(r,o,a,f,p=.5){const x=ln(r.min,r.max,p);Hd(r,o,a,x,f)}function ko(r,o){K1(r.x,o.x,o.scaleX,o.scale,o.originX),K1(r.y,o.y,o.scaleY,o.scale,o.originY)}function dm(r,o){return lm(P3(r.getBoundingClientRect(),o))}function D3(r,o,a){const f=dm(r,a),{scroll:p}=o;return p&&(Ro(f.x,p.offset.x),Ro(f.y,p.offset.y)),f}const $1=()=>({translate:0,scale:1,origin:0,originPoint:0}),Po=()=>({x:$1(),y:$1()}),Z1=()=>({min:0,max:0}),En=()=>({x:Z1(),y:Z1()}),Gd={current:null},fm={current:!1};function M3(){if(fm.current=!0,!!pf)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),o=()=>Gd.current=r.matches;r.addEventListener("change",o),o()}else Gd.current=!1}const L3=new WeakMap;function B3(r,o,a){for(const f in o){const p=o[f],x=a[f];if(or(p))r.addValue(f,p);else if(or(x))r.addValue(f,Lo(p,{owner:r}));else if(x!==p)if(r.hasValue(f)){const y=r.getValue(f);y.liveStyle===!0?y.jump(p):y.hasAnimated||y.set(p)}else{const y=r.getStaticValue(f);r.addValue(f,Lo(y!==void 0?y:p,{owner:r}))}}for(const f in a)o[f]===void 0&&r.removeValue(f);return o}const q1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class F3{scrapeMotionValuesFromProps(o,a,f){return{}}constructor({parent:o,props:a,presenceContext:f,reducedMotionConfig:p,blockInitialAnimation:x,visualState:y},b={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=kf,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=br.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,tn.render(this.render,!1,!0))};const{latestValues:w,renderState:E}=y;this.latestValues=w,this.baseTarget={...w},this.initialValues=a.initial?{...w}:{},this.renderState=E,this.parent=o,this.props=a,this.presenceContext=f,this.depth=o?o.depth+1:0,this.reducedMotionConfig=p,this.options=b,this.blockInitialAnimation=!!x,this.isControllingVariants=Pc(a),this.isVariantNode=qg(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(o&&o.current);const{willChange:S,...I}=this.scrapeMotionValuesFromProps(a,{},this);for(const _ in I){const D=I[_];w[_]!==void 0&&or(D)&&D.set(w[_])}}mount(o){var a;this.current=o,L3.set(o,this),this.projection&&!this.projection.instance&&this.projection.mount(o),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((f,p)=>this.bindToMotionValue(p,f)),fm.current||M3(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Gd.current,(a=this.parent)==null||a.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var o;this.projection&&this.projection.unmount(),ws(this.notifyUpdate),ws(this.render),this.valueSubscriptions.forEach(a=>a()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(o=this.parent)==null||o.removeChild(this);for(const a in this.events)this.events[a].clear();for(const a in this.features){const f=this.features[a];f&&(f.unmount(),f.isMounted=!1)}this.current=null}addChild(o){this.children.add(o),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(o)}removeChild(o){this.children.delete(o),this.enteringChildren&&this.enteringChildren.delete(o)}bindToMotionValue(o,a){this.valueSubscriptions.has(o)&&this.valueSubscriptions.get(o)();const f=Uo.has(o);f&&this.onBindTransform&&this.onBindTransform();const p=a.on("change",y=>{this.latestValues[o]=y,this.props.onUpdate&&tn.preRender(this.notifyUpdate),f&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let x;window.MotionCheckAppearSync&&(x=window.MotionCheckAppearSync(this,o,a)),this.valueSubscriptions.set(o,()=>{p(),x&&x(),a.owner&&a.stop()})}sortNodePosition(o){return!this.current||!this.sortInstanceNodePosition||this.type!==o.type?0:this.sortInstanceNodePosition(this.current,o.current)}updateFeatures(){let o="animation";for(o in Bo){const a=Bo[o];if(!a)continue;const{isEnabled:f,Feature:p}=a;if(!this.features[o]&&p&&f(this.props)&&(this.features[o]=new p(this)),this.features[o]){const x=this.features[o];x.isMounted?x.update():(x.mount(),x.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):En()}getStaticValue(o){return this.latestValues[o]}setStaticValue(o,a){this.latestValues[o]=a}update(o,a){(o.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=o,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let f=0;f<q1.length;f++){const p=q1[f];this.propEventSubscriptions[p]&&(this.propEventSubscriptions[p](),delete this.propEventSubscriptions[p]);const x="on"+p,y=o[x];y&&(this.propEventSubscriptions[p]=this.on(p,y))}this.prevMotionValues=B3(this,this.scrapeMotionValuesFromProps(o,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(o){return this.props.variants?this.props.variants[o]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(o){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(o),()=>a.variantChildren.delete(o)}addValue(o,a){const f=this.values.get(o);a!==f&&(f&&this.removeValue(o),this.bindToMotionValue(o,a),this.values.set(o,a),this.latestValues[o]=a.get())}removeValue(o){this.values.delete(o);const a=this.valueSubscriptions.get(o);a&&(a(),this.valueSubscriptions.delete(o)),delete this.latestValues[o],this.removeValueFromRenderState(o,this.renderState)}hasValue(o){return this.values.has(o)}getValue(o,a){if(this.props.values&&this.props.values[o])return this.props.values[o];let f=this.values.get(o);return f===void 0&&a!==void 0&&(f=Lo(a===null?void 0:a,{owner:this}),this.addValue(o,f)),f}readValue(o,a){let f=this.latestValues[o]!==void 0||!this.current?this.latestValues[o]:this.getBaseTargetFromProps(this.props,o)??this.readValueFromInstance(this.current,o,this.options);return f!=null&&(typeof f=="string"&&(ig(f)||og(f))?f=parseFloat(f):!Kv(f)&&vs.test(a)&&(f=zg(o,a)),this.setBaseTarget(o,or(f)?f.get():f)),or(f)?f.get():f}setBaseTarget(o,a){this.baseTarget[o]=a}getBaseTarget(o){var x;const{initial:a}=this.props;let f;if(typeof a=="string"||typeof a=="object"){const y=Uf(this.props,a,(x=this.presenceContext)==null?void 0:x.custom);y&&(f=y[o])}if(a&&f!==void 0)return f;const p=this.getBaseTargetFromProps(this.props,o);return p!==void 0&&!or(p)?p:this.initialValues[o]!==void 0&&f===void 0?void 0:this.baseTarget[o]}on(o,a){return this.events[o]||(this.events[o]=new wf),this.events[o].add(a)}notify(o,...a){this.events[o]&&this.events[o].notify(...a)}scheduleRenderMicrotask(){Df.render(this.render)}}class hm extends F3{constructor(){super(...arguments),this.KeyframeResolver=Lv}sortInstanceNodePosition(o,a){return o.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(o,a){return o.style?o.style[a]:void 0}removeValueFromRenderState(o,{vars:a,style:f}){delete a[o],delete f[o]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:o}=this.props;or(o)&&(this.childSubscription=o.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function pm(r,{style:o,vars:a},f,p){const x=r.style;let y;for(y in o)x[y]=o[y];p==null||p.applyProjectionStyles(x,f);for(y in a)x.setProperty(y,a[y])}function j3(r){return window.getComputedStyle(r)}class V3 extends hm{constructor(){super(...arguments),this.type="html",this.renderInstance=pm}readValueFromInstance(o,a){var f;if(Uo.has(a))return(f=this.projection)!=null&&f.isProjecting?Ld(a):tv(o,a);{const p=j3(o),x=(Ef(a)?p.getPropertyValue(a):p[a])||0;return typeof x=="string"?x.trim():x}}measureInstanceViewportBox(o,{transformPagePoint:a}){return dm(o,a)}build(o,a,f){jf(o,a,f.transformTemplate)}scrapeMotionValuesFromProps(o,a,f){return Wf(o,a,f)}}const gm=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function z3(r,o,a,f){pm(r,o,void 0,f);for(const p in o.attrs)r.setAttribute(gm.has(p)?p:Hf(p),o.attrs[p])}class U3 extends hm{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=En}getBaseTargetFromProps(o,a){return o[a]}readValueFromInstance(o,a){if(Uo.has(a)){const f=Vg(a);return f&&f.default||0}return a=gm.has(a)?a:Hf(a),o.getAttribute(a)}scrapeMotionValuesFromProps(o,a,f){return im(o,a,f)}build(o,a,f){em(o,a,this.isSVGTag,f.transformTemplate,f.style)}renderInstance(o,a,f,p){z3(o,a,f,p)}mount(o){this.isSVGTag=nm(o.tagName),super.mount(o)}}const W3=(r,o)=>zf(r)?new U3(o):new V3(o,{allowProjection:r!==R.Fragment});function Do(r,o,a){const f=r.getProps();return Uf(f,o,a!==void 0?a:f.custom,r)}const Xd=r=>Array.isArray(r);function H3(r,o,a){r.hasValue(o)?r.getValue(o).set(a):r.addValue(o,Lo(a))}function G3(r){return Xd(r)?r[r.length-1]||0:r}function X3(r,o){const a=Do(r,o);let{transitionEnd:f={},transition:p={},...x}=a||{};x={...x,...f};for(const y in x){const b=G3(x[y]);H3(r,y,b)}}function Y3(r){return!!(or(r)&&r.add)}function Yd(r,o){const a=r.getValue("willChange");if(Y3(a))return a.add(o);if(!a&&Vi.WillChange){const f=new Vi.WillChange("auto");r.addValue("willChange",f),f.add(o)}}function mm(r){return r.props[sm]}const K3=r=>r!==null;function $3(r,{repeat:o,repeatType:a="loop"},f){const p=r.filter(K3),x=o&&a!=="loop"&&o%2===1?0:p.length-1;return p[x]}const Z3={type:"spring",stiffness:500,damping:25,restSpeed:10},q3=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),Q3={type:"keyframes",duration:.8},J3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},eC=(r,{keyframes:o})=>o.length>2?Q3:Uo.has(r)?r.startsWith("scale")?q3(o[1]):Z3:J3;function tC({when:r,delay:o,delayChildren:a,staggerChildren:f,staggerDirection:p,repeat:x,repeatType:y,repeatDelay:b,from:w,elapsed:E,...S}){return!!Object.keys(S).length}const Gf=(r,o,a,f={},p,x)=>y=>{const b=Pf(f,r)||{},w=b.delay||f.delay||0;let{elapsed:E=0}=f;E=E-gi(w);const S={keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:o.getVelocity(),...b,delay:-E,onUpdate:_=>{o.set(_),b.onUpdate&&b.onUpdate(_)},onComplete:()=>{y(),b.onComplete&&b.onComplete()},name:r,motionValue:o,element:x?void 0:p};tC(b)||Object.assign(S,eC(r,S)),S.duration&&(S.duration=gi(S.duration)),S.repeatDelay&&(S.repeatDelay=gi(S.repeatDelay)),S.from!==void 0&&(S.keyframes[0]=S.from);let I=!1;if((S.type===!1||S.duration===0&&!S.repeatDelay)&&(zd(S),S.delay===0&&(I=!0)),(Vi.instantAnimations||Vi.skipAnimations)&&(I=!0,zd(S),S.delay=0),S.allowFlatten=!b.type&&!b.ease,I&&!x&&o.get()!==void 0){const _=$3(S.keyframes,b);if(_!==void 0){tn.update(()=>{S.onUpdate(_),S.onComplete()});return}}return b.isSync?new Rf(S):new bv(S)};function nC({protectedKeys:r,needsAnimating:o},a){const f=r.hasOwnProperty(a)&&o[a]!==!0;return o[a]=!1,f}function xm(r,o,{delay:a=0,transitionOverride:f,type:p}={}){let{transition:x=r.getDefaultTransition(),transitionEnd:y,...b}=o;f&&(x=f);const w=[],E=p&&r.animationState&&r.animationState.getState()[p];for(const S in b){const I=r.getValue(S,r.latestValues[S]??null),_=b[S];if(_===void 0||E&&nC(E,S))continue;const D={delay:a,...Pf(x||{},S)},L=I.get();if(L!==void 0&&!I.isAnimating&&!Array.isArray(_)&&_===L&&!D.velocity)continue;let B=!1;if(window.MotionHandoffAnimation){const j=mm(r);if(j){const W=window.MotionHandoffAnimation(j,S,tn);W!==null&&(D.startTime=W,B=!0)}}Yd(r,S),I.start(Gf(S,I,_,r.shouldReduceMotion&&Bg.has(S)?{type:!1}:D,r,B));const F=I.animation;F&&w.push(F)}return y&&Promise.all(w).then(()=>{tn.update(()=>{y&&X3(r,y)})}),w}function ym(r,o,a,f=0,p=1){const x=Array.from(r).sort((E,S)=>E.sortNodePosition(S)).indexOf(o),y=r.size,b=(y-1)*f;return typeof a=="function"?a(x,y):p===1?x*f:b-x*f}function Kd(r,o,a={}){var w;const f=Do(r,o,a.type==="exit"?(w=r.presenceContext)==null?void 0:w.custom:void 0);let{transition:p=r.getDefaultTransition()||{}}=f||{};a.transitionOverride&&(p=a.transitionOverride);const x=f?()=>Promise.all(xm(r,f,a)):()=>Promise.resolve(),y=r.variantChildren&&r.variantChildren.size?(E=0)=>{const{delayChildren:S=0,staggerChildren:I,staggerDirection:_}=p;return rC(r,o,E,S,I,_,a)}:()=>Promise.resolve(),{when:b}=p;if(b){const[E,S]=b==="beforeChildren"?[x,y]:[y,x];return E().then(()=>S())}else return Promise.all([x(),y(a.delay)])}function rC(r,o,a=0,f=0,p=0,x=1,y){const b=[];for(const w of r.variantChildren)w.notify("AnimationStart",o),b.push(Kd(w,o,{...y,delay:a+(typeof f=="function"?0:f)+ym(r.variantChildren,w,f,p,x)}).then(()=>w.notify("AnimationComplete",o)));return Promise.all(b)}function iC(r,o,a={}){r.notify("AnimationStart",o);let f;if(Array.isArray(o)){const p=o.map(x=>Kd(r,x,a));f=Promise.all(p)}else if(typeof o=="string")f=Kd(r,o,a);else{const p=typeof o=="function"?Do(r,o,a.custom):o;f=Promise.all(xm(r,p,a))}return f.then(()=>{r.notify("AnimationComplete",o)})}function wm(r,o){if(!Array.isArray(o))return!1;const a=o.length;if(a!==r.length)return!1;for(let f=0;f<a;f++)if(o[f]!==r[f])return!1;return!0}const sC=Ff.length;function vm(r){if(!r)return;if(!r.isControllingVariants){const a=r.parent?vm(r.parent)||{}:{};return r.props.initial!==void 0&&(a.initial=r.props.initial),a}const o={};for(let a=0;a<sC;a++){const f=Ff[a],p=r.props[f];(za(p)||p===!1)&&(o[f]=p)}return o}const oC=[...Bf].reverse(),aC=Bf.length;function lC(r){return o=>Promise.all(o.map(({animation:a,options:f})=>iC(r,a,f)))}function cC(r){let o=lC(r),a=Q1(),f=!0;const p=w=>(E,S)=>{var _;const I=Do(r,S,w==="exit"?(_=r.presenceContext)==null?void 0:_.custom:void 0);if(I){const{transition:D,transitionEnd:L,...B}=I;E={...E,...B,...L}}return E};function x(w){o=w(r)}function y(w){const{props:E}=r,S=vm(r.parent)||{},I=[],_=new Set;let D={},L=1/0;for(let F=0;F<aC;F++){const j=oC[F],W=a[j],z=E[j]!==void 0?E[j]:S[j],J=za(z),ne=j===w?W.isActive:null;ne===!1&&(L=F);let de=z===S[j]&&z!==E[j]&&J;if(de&&f&&r.manuallyAnimateOnMount&&(de=!1),W.protectedKeys={...D},!W.isActive&&ne===null||!z&&!W.prevProp||kc(z)||typeof z=="boolean")continue;const q=uC(W.prevProp,z);let ce=q||j===w&&W.isActive&&!de&&J||F>L&&J,Z=!1;const Ae=Array.isArray(z)?z:[z];let ke=Ae.reduce(p(j),{});ne===!1&&(ke={});const{prevResolvedValues:Ie={}}=W,Pe={...Ie,...ke},Fe=xe=>{ce=!0,_.has(xe)&&(Z=!0,_.delete(xe)),W.needsAnimating[xe]=!0;const he=r.getValue(xe);he&&(he.liveStyle=!1)};for(const xe in Pe){const he=ke[xe],Le=Ie[xe];if(D.hasOwnProperty(xe))continue;let fe=!1;Xd(he)&&Xd(Le)?fe=!wm(he,Le):fe=he!==Le,fe?he!=null?Fe(xe):_.add(xe):he!==void 0&&_.has(xe)?Fe(xe):W.protectedKeys[xe]=!0}W.prevProp=z,W.prevResolvedValues=ke,W.isActive&&(D={...D,...ke}),f&&r.blockInitialAnimation&&(ce=!1);const ee=de&&q;ce&&(!ee||Z)&&I.push(...Ae.map(xe=>{const he={type:j};if(typeof xe=="string"&&f&&!ee&&r.manuallyAnimateOnMount&&r.parent){const{parent:Le}=r,fe=Do(Le,xe);if(Le.enteringChildren&&fe){const{delayChildren:K}=fe.transition||{};he.delay=ym(Le.enteringChildren,r,K)}}return{animation:xe,options:he}}))}if(_.size){const F={};if(typeof E.initial!="boolean"){const j=Do(r,Array.isArray(E.initial)?E.initial[0]:E.initial);j&&j.transition&&(F.transition=j.transition)}_.forEach(j=>{const W=r.getBaseTarget(j),z=r.getValue(j);z&&(z.liveStyle=!0),F[j]=W??null}),I.push({animation:F})}let B=!!I.length;return f&&(E.initial===!1||E.initial===E.animate)&&!r.manuallyAnimateOnMount&&(B=!1),f=!1,B?o(I):Promise.resolve()}function b(w,E){var I;if(a[w].isActive===E)return Promise.resolve();(I=r.variantChildren)==null||I.forEach(_=>{var D;return(D=_.animationState)==null?void 0:D.setActive(w,E)}),a[w].isActive=E;const S=y(w);for(const _ in a)a[_].protectedKeys={};return S}return{animateChanges:y,setActive:b,setAnimateFunction:x,getState:()=>a,reset:()=>{a=Q1(),f=!0}}}function uC(r,o){return typeof o=="string"?o!==r:Array.isArray(o)?!wm(o,r):!1}function Xs(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Q1(){return{animate:Xs(!0),whileInView:Xs(),whileHover:Xs(),whileTap:Xs(),whileDrag:Xs(),whileFocus:Xs(),exit:Xs()}}class Cs{constructor(o){this.isMounted=!1,this.node=o}update(){}}class dC extends Cs{constructor(o){super(o),o.animationState||(o.animationState=cC(o))}updateAnimationControlsSubscription(){const{animate:o}=this.node.getProps();kc(o)&&(this.unmountControls=o.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:o}=this.node.getProps(),{animate:a}=this.node.prevProps||{};o!==a&&this.updateAnimationControlsSubscription()}unmount(){var o;this.node.animationState.reset(),(o=this.unmountControls)==null||o.call(this)}}let fC=0;class hC extends Cs{constructor(){super(...arguments),this.id=fC++}update(){if(!this.node.presenceContext)return;const{isPresent:o,onExitComplete:a}=this.node.presenceContext,{isPresent:f}=this.node.prevPresenceContext||{};if(!this.node.animationState||o===f)return;const p=this.node.animationState.setActive("exit",!o);a&&!o&&p.then(()=>{a(this.id)})}mount(){const{register:o,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),o&&(this.unmount=o(this.id))}unmount(){}}const pC={animation:{Feature:dC},exit:{Feature:hC}};function Wa(r,o,a,f={passive:!0}){return r.addEventListener(o,a,f),()=>r.removeEventListener(o,a)}function Za(r){return{point:{x:r.pageX,y:r.pageY}}}const gC=r=>o=>Mf(o)&&r(o,Za(o));function Oa(r,o,a,f){return Wa(r,o,gC(a),f)}const Cm=1e-4,mC=1-Cm,xC=1+Cm,Em=.01,yC=0-Em,wC=0+Em;function pr(r){return r.max-r.min}function vC(r,o,a){return Math.abs(r-o)<=a}function J1(r,o,a,f=.5){r.origin=f,r.originPoint=ln(o.min,o.max,r.origin),r.scale=pr(a)/pr(o),r.translate=ln(a.min,a.max,r.origin)-r.originPoint,(r.scale>=mC&&r.scale<=xC||isNaN(r.scale))&&(r.scale=1),(r.translate>=yC&&r.translate<=wC||isNaN(r.translate))&&(r.translate=0)}function Da(r,o,a,f){J1(r.x,o.x,a.x,f?f.originX:void 0),J1(r.y,o.y,a.y,f?f.originY:void 0)}function ep(r,o,a){r.min=a.min+o.min,r.max=r.min+pr(o)}function CC(r,o,a){ep(r.x,o.x,a.x),ep(r.y,o.y,a.y)}function tp(r,o,a){r.min=o.min-a.min,r.max=r.min+pr(o)}function Ma(r,o,a){tp(r.x,o.x,a.x),tp(r.y,o.y,a.y)}function Xr(r){return[r("x"),r("y")]}const Am=({current:r})=>r?r.ownerDocument.defaultView:null,np=(r,o)=>Math.abs(r-o);function EC(r,o){const a=np(r.x,o.x),f=np(r.y,o.y);return Math.sqrt(a**2+f**2)}class bm{constructor(o,a,{transformPagePoint:f,contextWindow:p=window,dragSnapToOrigin:x=!1,distanceThreshold:y=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=vd(this.lastMoveEventInfo,this.history),D=this.startEvent!==null,L=EC(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!D&&!L)return;const{point:B}=_,{timestamp:F}=Zn;this.history.push({...B,timestamp:F});const{onStart:j,onMove:W}=this.handlers;D||(j&&j(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),W&&W(this.lastMoveEvent,_)},this.handlePointerMove=(_,D)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=wd(D,this.transformPagePoint),tn.update(this.updatePoint,!0)},this.handlePointerUp=(_,D)=>{this.end();const{onEnd:L,onSessionEnd:B,resumeAnimation:F}=this.handlers;if(this.dragSnapToOrigin&&F&&F(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=vd(_.type==="pointercancel"?this.lastMoveEventInfo:wd(D,this.transformPagePoint),this.history);this.startEvent&&L&&L(_,j),B&&B(_,j)},!Mf(o))return;this.dragSnapToOrigin=x,this.handlers=a,this.transformPagePoint=f,this.distanceThreshold=y,this.contextWindow=p||window;const b=Za(o),w=wd(b,this.transformPagePoint),{point:E}=w,{timestamp:S}=Zn;this.history=[{...E,timestamp:S}];const{onSessionStart:I}=a;I&&I(o,vd(w,this.history)),this.removeListeners=Ya(Oa(this.contextWindow,"pointermove",this.handlePointerMove),Oa(this.contextWindow,"pointerup",this.handlePointerUp),Oa(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(o){this.handlers=o}end(){this.removeListeners&&this.removeListeners(),ws(this.updatePoint)}}function wd(r,o){return o?{point:o(r.point)}:r}function rp(r,o){return{x:r.x-o.x,y:r.y-o.y}}function vd({point:r},o){return{point:r,delta:rp(r,Sm(o)),offset:rp(r,AC(o)),velocity:bC(o,.1)}}function AC(r){return r[0]}function Sm(r){return r[r.length-1]}function bC(r,o){if(r.length<2)return{x:0,y:0};let a=r.length-1,f=null;const p=Sm(r);for(;a>=0&&(f=r[a],!(p.timestamp-f.timestamp>gi(o)));)a--;if(!f)return{x:0,y:0};const x=mi(p.timestamp-f.timestamp);if(x===0)return{x:0,y:0};const y={x:(p.x-f.x)/x,y:(p.y-f.y)/x};return y.x===1/0&&(y.x=0),y.y===1/0&&(y.y=0),y}function SC(r,{min:o,max:a},f){return o!==void 0&&r<o?r=f?ln(o,r,f.min):Math.max(r,o):a!==void 0&&r>a&&(r=f?ln(a,r,f.max):Math.min(r,a)),r}function ip(r,o,a){return{min:o!==void 0?r.min+o:void 0,max:a!==void 0?r.max+a-(r.max-r.min):void 0}}function TC(r,{top:o,left:a,bottom:f,right:p}){return{x:ip(r.x,a,p),y:ip(r.y,o,f)}}function sp(r,o){let a=o.min-r.min,f=o.max-r.max;return o.max-o.min<r.max-r.min&&([a,f]=[f,a]),{min:a,max:f}}function IC(r,o){return{x:sp(r.x,o.x),y:sp(r.y,o.y)}}function NC(r,o){let a=.5;const f=pr(r),p=pr(o);return p>f?a=Fa(o.min,o.max-f,r.min):f>p&&(a=Fa(r.min,r.max-p,o.min)),ji(0,1,a)}function _C(r,o){const a={};return o.min!==void 0&&(a.min=o.min-r.min),o.max!==void 0&&(a.max=o.max-r.min),a}const $d=.35;function RC(r=$d){return r===!1?r=0:r===!0&&(r=$d),{x:op(r,"left","right"),y:op(r,"top","bottom")}}function op(r,o,a){return{min:ap(r,o),max:ap(r,a)}}function ap(r,o){return typeof r=="number"?r:r[o]||0}const kC=new WeakMap;class PC{constructor(o){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=En(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=o}start(o,{snapToCursor:a=!1,distanceThreshold:f}={}){const{presenceContext:p}=this.visualElement;if(p&&p.isPresent===!1)return;const x=I=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(Za(I).point)},y=(I,_)=>{const{drag:D,dragPropagation:L,onDragStart:B}=this.getProps();if(D&&!L&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Vv(D),!this.openDragLock))return;this.latestPointerEvent=I,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Xr(j=>{let W=this.getAxisMotionValue(j).get()||0;if(xi.test(W)){const{projection:z}=this.visualElement;if(z&&z.layout){const J=z.layout.layoutBox[j];J&&(W=pr(J)*(parseFloat(W)/100))}}this.originPoint[j]=W}),B&&tn.postRender(()=>B(I,_)),Yd(this.visualElement,"transform");const{animationState:F}=this.visualElement;F&&F.setActive("whileDrag",!0)},b=(I,_)=>{this.latestPointerEvent=I,this.latestPanInfo=_;const{dragPropagation:D,dragDirectionLock:L,onDirectionLock:B,onDrag:F}=this.getProps();if(!D&&!this.openDragLock)return;const{offset:j}=_;if(L&&this.currentDirection===null){this.currentDirection=OC(j),this.currentDirection!==null&&B&&B(this.currentDirection);return}this.updateAxis("x",_.point,j),this.updateAxis("y",_.point,j),this.visualElement.render(),F&&F(I,_)},w=(I,_)=>{this.latestPointerEvent=I,this.latestPanInfo=_,this.stop(I,_),this.latestPointerEvent=null,this.latestPanInfo=null},E=()=>Xr(I=>{var _;return this.getAnimationState(I)==="paused"&&((_=this.getAxisMotionValue(I).animation)==null?void 0:_.play())}),{dragSnapToOrigin:S}=this.getProps();this.panSession=new bm(o,{onSessionStart:x,onStart:y,onMove:b,onSessionEnd:w,resumeAnimation:E},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:S,distanceThreshold:f,contextWindow:Am(this.visualElement)})}stop(o,a){const f=o||this.latestPointerEvent,p=a||this.latestPanInfo,x=this.isDragging;if(this.cancel(),!x||!p||!f)return;const{velocity:y}=p;this.startAnimation(y);const{onDragEnd:b}=this.getProps();b&&tn.postRender(()=>b(f,p))}cancel(){this.isDragging=!1;const{projection:o,animationState:a}=this.visualElement;o&&(o.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:f}=this.getProps();!f&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(o,a,f){const{drag:p}=this.getProps();if(!f||!oc(o,p,this.currentDirection))return;const x=this.getAxisMotionValue(o);let y=this.originPoint[o]+f[o];this.constraints&&this.constraints[o]&&(y=SC(y,this.constraints[o],this.elastic[o])),x.set(y)}resolveConstraints(){var x;const{dragConstraints:o,dragElastic:a}=this.getProps(),f=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(x=this.visualElement.projection)==null?void 0:x.layout,p=this.constraints;o&&_o(o)?this.constraints||(this.constraints=this.resolveRefConstraints()):o&&f?this.constraints=TC(f.layoutBox,o):this.constraints=!1,this.elastic=RC(a),p!==this.constraints&&f&&this.constraints&&!this.hasMutatedConstraints&&Xr(y=>{this.constraints!==!1&&this.getAxisMotionValue(y)&&(this.constraints[y]=_C(f.layoutBox[y],this.constraints[y]))})}resolveRefConstraints(){const{dragConstraints:o,onMeasureDragConstraints:a}=this.getProps();if(!o||!_o(o))return!1;const f=o.current,{projection:p}=this.visualElement;if(!p||!p.layout)return!1;const x=D3(f,p.root,this.visualElement.getTransformPagePoint());let y=IC(p.layout.layoutBox,x);if(a){const b=a(k3(y));this.hasMutatedConstraints=!!b,b&&(y=lm(b))}return y}startAnimation(o){const{drag:a,dragMomentum:f,dragElastic:p,dragTransition:x,dragSnapToOrigin:y,onDragTransitionEnd:b}=this.getProps(),w=this.constraints||{},E=Xr(S=>{if(!oc(S,a,this.currentDirection))return;let I=w&&w[S]||{};y&&(I={min:0,max:0});const _=p?200:1e6,D=p?40:1e7,L={type:"inertia",velocity:f?o[S]:0,bounceStiffness:_,bounceDamping:D,timeConstant:750,restDelta:1,restSpeed:10,...x,...I};return this.startAxisValueAnimation(S,L)});return Promise.all(E).then(b)}startAxisValueAnimation(o,a){const f=this.getAxisMotionValue(o);return Yd(this.visualElement,o),f.start(Gf(o,f,0,a,this.visualElement,!1))}stopAnimation(){Xr(o=>this.getAxisMotionValue(o).stop())}pauseAnimation(){Xr(o=>{var a;return(a=this.getAxisMotionValue(o).animation)==null?void 0:a.pause()})}getAnimationState(o){var a;return(a=this.getAxisMotionValue(o).animation)==null?void 0:a.state}getAxisMotionValue(o){const a=`_drag${o.toUpperCase()}`,f=this.visualElement.getProps(),p=f[a];return p||this.visualElement.getValue(o,(f.initial?f.initial[o]:void 0)||0)}snapToCursor(o){Xr(a=>{const{drag:f}=this.getProps();if(!oc(a,f,this.currentDirection))return;const{projection:p}=this.visualElement,x=this.getAxisMotionValue(a);if(p&&p.layout){const{min:y,max:b}=p.layout.layoutBox[a];x.set(o[a]-ln(y,b,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:o,dragConstraints:a}=this.getProps(),{projection:f}=this.visualElement;if(!_o(a)||!f||!this.constraints)return;this.stopAnimation();const p={x:0,y:0};Xr(y=>{const b=this.getAxisMotionValue(y);if(b&&this.constraints!==!1){const w=b.get();p[y]=NC({min:w,max:w},this.constraints[y])}});const{transformTemplate:x}=this.visualElement.getProps();this.visualElement.current.style.transform=x?x({},""):"none",f.root&&f.root.updateScroll(),f.updateLayout(),this.resolveConstraints(),Xr(y=>{if(!oc(y,o,null))return;const b=this.getAxisMotionValue(y),{min:w,max:E}=this.constraints[y];b.set(ln(w,E,p[y]))})}addListeners(){if(!this.visualElement.current)return;kC.set(this.visualElement,this);const o=this.visualElement.current,a=Oa(o,"pointerdown",w=>{const{drag:E,dragListener:S=!0}=this.getProps();E&&S&&this.start(w)}),f=()=>{const{dragConstraints:w}=this.getProps();_o(w)&&w.current&&(this.constraints=this.resolveRefConstraints())},{projection:p}=this.visualElement,x=p.addEventListener("measure",f);p&&!p.layout&&(p.root&&p.root.updateScroll(),p.updateLayout()),tn.read(f);const y=Wa(window,"resize",()=>this.scalePositionWithinConstraints()),b=p.addEventListener("didUpdate",({delta:w,hasLayoutChanged:E})=>{this.isDragging&&E&&(Xr(S=>{const I=this.getAxisMotionValue(S);I&&(this.originPoint[S]+=w[S].translate,I.set(I.get()+w[S].translate))}),this.visualElement.render())});return()=>{y(),a(),x(),b&&b()}}getProps(){const o=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:f=!1,dragPropagation:p=!1,dragConstraints:x=!1,dragElastic:y=$d,dragMomentum:b=!0}=o;return{...o,drag:a,dragDirectionLock:f,dragPropagation:p,dragConstraints:x,dragElastic:y,dragMomentum:b}}}function oc(r,o,a){return(o===!0||o===r)&&(a===null||a===r)}function OC(r,o=10){let a=null;return Math.abs(r.y)>o?a="y":Math.abs(r.x)>o&&(a="x"),a}class DC extends Cs{constructor(o){super(o),this.removeGroupControls=Yr,this.removeListeners=Yr,this.controls=new PC(o)}mount(){const{dragControls:o}=this.node.getProps();o&&(this.removeGroupControls=o.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Yr}unmount(){this.removeGroupControls(),this.removeListeners()}}const lp=r=>(o,a)=>{r&&tn.postRender(()=>r(o,a))};class MC extends Cs{constructor(){super(...arguments),this.removePointerDownListener=Yr}onPointerDown(o){this.session=new bm(o,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Am(this.node)})}createPanHandlers(){const{onPanSessionStart:o,onPanStart:a,onPan:f,onPanEnd:p}=this.node.getProps();return{onSessionStart:lp(o),onStart:lp(a),onMove:f,onEnd:(x,y)=>{delete this.session,p&&tn.postRender(()=>p(x,y))}}}mount(){this.removePointerDownListener=Oa(this.node.current,"pointerdown",o=>this.onPointerDown(o))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const pc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function cp(r,o){return o.max===o.min?0:r/(o.max-o.min)*100}const Na={correct:(r,o)=>{if(!o.target)return r;if(typeof r=="string")if(ct.test(r))r=parseFloat(r);else return r;const a=cp(r,o.target.x),f=cp(r,o.target.y);return`${a}% ${f}%`}},LC={correct:(r,{treeScale:o,projectionDelta:a})=>{const f=r,p=vs.parse(r);if(p.length>5)return f;const x=vs.createTransformer(r),y=typeof p[0]!="number"?1:0,b=a.x.scale*o.x,w=a.y.scale*o.y;p[0+y]/=b,p[1+y]/=w;const E=ln(b,w,.5);return typeof p[2+y]=="number"&&(p[2+y]/=E),typeof p[3+y]=="number"&&(p[3+y]/=E),x(p)}};let Cd=!1;class BC extends R.Component{componentDidMount(){const{visualElement:o,layoutGroup:a,switchLayoutGroup:f,layoutId:p}=this.props,{projection:x}=o;s3(FC),x&&(a.group&&a.group.add(x),f&&f.register&&p&&f.register(x),Cd&&x.root.didUpdate(),x.addEventListener("animationComplete",()=>{this.safeToRemove()}),x.setOptions({...x.options,onExitComplete:()=>this.safeToRemove()})),pc.hasEverUpdated=!0}getSnapshotBeforeUpdate(o){const{layoutDependency:a,visualElement:f,drag:p,isPresent:x}=this.props,{projection:y}=f;return y&&(y.isPresent=x,Cd=!0,p||o.layoutDependency!==a||a===void 0||o.isPresent!==x?y.willUpdate():this.safeToRemove(),o.isPresent!==x&&(x?y.promote():y.relegate()||tn.postRender(()=>{const b=y.getStack();(!b||!b.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:o}=this.props.visualElement;o&&(o.root.didUpdate(),Df.postRender(()=>{!o.currentAnimation&&o.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:o,layoutGroup:a,switchLayoutGroup:f}=this.props,{projection:p}=o;Cd=!0,p&&(p.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(p),f&&f.deregister&&f.deregister(p))}safeToRemove(){const{safeToRemove:o}=this.props;o&&o()}render(){return null}}function Tm(r){const[o,a]=Kg(),f=R.useContext(ff);return v.jsx(BC,{...r,layoutGroup:f,switchLayoutGroup:R.useContext(om),isPresent:o,safeToRemove:a})}const FC={borderRadius:{...Na,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Na,borderTopRightRadius:Na,borderBottomLeftRadius:Na,borderBottomRightRadius:Na,boxShadow:LC};function jC(r,o,a){const f=or(r)?r:Lo(r);return f.start(Gf("",f,o,a)),f.animation}const VC=(r,o)=>r.depth-o.depth;class zC{constructor(){this.children=[],this.isDirty=!1}add(o){gf(this.children,o),this.isDirty=!0}remove(o){mf(this.children,o),this.isDirty=!0}forEach(o){this.isDirty&&this.children.sort(VC),this.isDirty=!1,this.children.forEach(o)}}function UC(r,o){const a=br.now(),f=({timestamp:p})=>{const x=p-a;x>=o&&(ws(f),r(x-o))};return tn.setup(f,!0),()=>ws(f)}const Im=["TopLeft","TopRight","BottomLeft","BottomRight"],WC=Im.length,up=r=>typeof r=="string"?parseFloat(r):r,dp=r=>typeof r=="number"||ct.test(r);function HC(r,o,a,f,p,x){p?(r.opacity=ln(0,a.opacity??1,GC(f)),r.opacityExit=ln(o.opacity??1,0,XC(f))):x&&(r.opacity=ln(o.opacity??1,a.opacity??1,f));for(let y=0;y<WC;y++){const b=`border${Im[y]}Radius`;let w=fp(o,b),E=fp(a,b);if(w===void 0&&E===void 0)continue;w||(w=0),E||(E=0),w===0||E===0||dp(w)===dp(E)?(r[b]=Math.max(ln(up(w),up(E),f),0),(xi.test(E)||xi.test(w))&&(r[b]+="%")):r[b]=E}(o.rotate||a.rotate)&&(r.rotate=ln(o.rotate||0,a.rotate||0,f))}function fp(r,o){return r[o]!==void 0?r[o]:r.borderRadius}const GC=Nm(0,.5,pg),XC=Nm(.5,.95,Yr);function Nm(r,o,a){return f=>f<r?0:f>o?1:a(Fa(r,o,f))}function hp(r,o){r.min=o.min,r.max=o.max}function Gr(r,o){hp(r.x,o.x),hp(r.y,o.y)}function pp(r,o){r.translate=o.translate,r.scale=o.scale,r.originPoint=o.originPoint,r.origin=o.origin}function gp(r,o,a,f,p){return r-=o,r=Ec(r,1/a,f),p!==void 0&&(r=Ec(r,1/p,f)),r}function YC(r,o=0,a=1,f=.5,p,x=r,y=r){if(xi.test(o)&&(o=parseFloat(o),o=ln(y.min,y.max,o/100)-y.min),typeof o!="number")return;let b=ln(x.min,x.max,f);r===x&&(b-=o),r.min=gp(r.min,o,a,b,p),r.max=gp(r.max,o,a,b,p)}function mp(r,o,[a,f,p],x,y){YC(r,o[a],o[f],o[p],o.scale,x,y)}const KC=["x","scaleX","originX"],$C=["y","scaleY","originY"];function xp(r,o,a,f){mp(r.x,o,KC,a?a.x:void 0,f?f.x:void 0),mp(r.y,o,$C,a?a.y:void 0,f?f.y:void 0)}function yp(r){return r.translate===0&&r.scale===1}function _m(r){return yp(r.x)&&yp(r.y)}function wp(r,o){return r.min===o.min&&r.max===o.max}function ZC(r,o){return wp(r.x,o.x)&&wp(r.y,o.y)}function vp(r,o){return Math.round(r.min)===Math.round(o.min)&&Math.round(r.max)===Math.round(o.max)}function Rm(r,o){return vp(r.x,o.x)&&vp(r.y,o.y)}function Cp(r){return pr(r.x)/pr(r.y)}function Ep(r,o){return r.translate===o.translate&&r.scale===o.scale&&r.originPoint===o.originPoint}class qC{constructor(){this.members=[]}add(o){gf(this.members,o),o.scheduleRender()}remove(o){if(mf(this.members,o),o===this.prevLead&&(this.prevLead=void 0),o===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(o){const a=this.members.findIndex(p=>o===p);if(a===0)return!1;let f;for(let p=a;p>=0;p--){const x=this.members[p];if(x.isPresent!==!1){f=x;break}}return f?(this.promote(f),!0):!1}promote(o,a){const f=this.lead;if(o!==f&&(this.prevLead=f,this.lead=o,o.show(),f)){f.instance&&f.scheduleRender(),o.scheduleRender(),o.resumeFrom=f,a&&(o.resumeFrom.preserveOpacity=!0),f.snapshot&&(o.snapshot=f.snapshot,o.snapshot.latestValues=f.animationValues||f.latestValues),o.root&&o.root.isUpdating&&(o.isLayoutDirty=!0);const{crossfade:p}=o.options;p===!1&&f.hide()}}exitAnimationComplete(){this.members.forEach(o=>{const{options:a,resumingFrom:f}=o;a.onExitComplete&&a.onExitComplete(),f&&f.options.onExitComplete&&f.options.onExitComplete()})}scheduleRender(){this.members.forEach(o=>{o.instance&&o.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function QC(r,o,a){let f="";const p=r.x.translate/o.x,x=r.y.translate/o.y,y=(a==null?void 0:a.z)||0;if((p||x||y)&&(f=`translate3d(${p}px, ${x}px, ${y}px) `),(o.x!==1||o.y!==1)&&(f+=`scale(${1/o.x}, ${1/o.y}) `),a){const{transformPerspective:E,rotate:S,rotateX:I,rotateY:_,skewX:D,skewY:L}=a;E&&(f=`perspective(${E}px) ${f}`),S&&(f+=`rotate(${S}deg) `),I&&(f+=`rotateX(${I}deg) `),_&&(f+=`rotateY(${_}deg) `),D&&(f+=`skewX(${D}deg) `),L&&(f+=`skewY(${L}deg) `)}const b=r.x.scale*o.x,w=r.y.scale*o.y;return(b!==1||w!==1)&&(f+=`scale(${b}, ${w})`),f||"none"}const Ed=["","X","Y","Z"],JC=1e3;let eE=0;function Ad(r,o,a,f){const{latestValues:p}=o;p[r]&&(a[r]=p[r],o.setStaticValue(r,0),f&&(f[r]=0))}function km(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:o}=r.options;if(!o)return;const a=mm(o);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:p,layoutId:x}=r.options;window.MotionCancelOptimisedAnimation(a,"transform",tn,!(p||x))}const{parent:f}=r;f&&!f.hasCheckedOptimisedAppear&&km(f)}function Pm({attachResizeListener:r,defaultParent:o,measureScroll:a,checkIsScrollRoot:f,resetTransform:p}){return class{constructor(y={},b=o==null?void 0:o()){this.id=eE++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(rE),this.nodes.forEach(aE),this.nodes.forEach(lE),this.nodes.forEach(iE)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=y,this.root=b?b.root||b:this,this.path=b?[...b.path,b]:[],this.parent=b,this.depth=b?b.depth+1:0;for(let w=0;w<this.path.length;w++)this.path[w].shouldResetTransform=!0;this.root===this&&(this.nodes=new zC)}addEventListener(y,b){return this.eventHandlers.has(y)||this.eventHandlers.set(y,new wf),this.eventHandlers.get(y).add(b)}notifyListeners(y,...b){const w=this.eventHandlers.get(y);w&&w.notify(...b)}hasListeners(y){return this.eventHandlers.has(y)}mount(y){if(this.instance)return;this.isSVG=Yg(y)&&!Xv(y),this.instance=y;const{layoutId:b,layout:w,visualElement:E}=this.options;if(E&&!E.current&&E.mount(y),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(w||b)&&(this.isLayoutDirty=!0),r){let S,I=0;const _=()=>this.root.updateBlockedByResize=!1;tn.read(()=>{I=window.innerWidth}),r(y,()=>{const D=window.innerWidth;D!==I&&(I=D,this.root.updateBlockedByResize=!0,S&&S(),S=UC(_,250),pc.hasAnimatedSinceResize&&(pc.hasAnimatedSinceResize=!1,this.nodes.forEach(Sp)))})}b&&this.root.registerSharedNode(b,this),this.options.animate!==!1&&E&&(b||w)&&this.addEventListener("didUpdate",({delta:S,hasLayoutChanged:I,hasRelativeLayoutChanged:_,layout:D})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const L=this.options.transition||E.getDefaultTransition()||hE,{onLayoutAnimationStart:B,onLayoutAnimationComplete:F}=E.getProps(),j=!this.targetLayout||!Rm(this.targetLayout,D),W=!I&&_;if(this.options.layoutRoot||this.resumeFrom||W||I&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const z={...Pf(L,"layout"),onPlay:B,onComplete:F};(E.shouldReduceMotion||this.options.layoutRoot)&&(z.delay=0,z.type=!1),this.startAnimation(z),this.setAnimationOrigin(S,W)}else I||Sp(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=D})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const y=this.getStack();y&&y.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ws(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(cE),this.animationId++)}getTransformTemplate(){const{visualElement:y}=this.options;return y&&y.getProps().transformTemplate}willUpdate(y=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&km(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let S=0;S<this.path.length;S++){const I=this.path[S];I.shouldResetTransform=!0,I.updateScroll("snapshot"),I.options.layoutRoot&&I.willUpdate(!1)}const{layoutId:b,layout:w}=this.options;if(b===void 0&&!w)return;const E=this.getTransformTemplate();this.prevTransformTemplateValue=E?E(this.latestValues,""):void 0,this.updateSnapshot(),y&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ap);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(bp);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(oE),this.nodes.forEach(tE),this.nodes.forEach(nE)):this.nodes.forEach(bp),this.clearAllSnapshots();const b=br.now();Zn.delta=ji(0,1e3/60,b-Zn.timestamp),Zn.timestamp=b,Zn.isProcessing=!0,fd.update.process(Zn),fd.preRender.process(Zn),fd.render.process(Zn),Zn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Df.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(sE),this.sharedNodes.forEach(uE)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,tn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){tn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!pr(this.snapshot.measuredBox.x)&&!pr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let w=0;w<this.path.length;w++)this.path[w].updateScroll();const y=this.layout;this.layout=this.measure(!1),this.layoutCorrected=En(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:b}=this.options;b&&b.notify("LayoutMeasure",this.layout.layoutBox,y?y.layoutBox:void 0)}updateScroll(y="measure"){let b=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===y&&(b=!1),b&&this.instance){const w=f(this.instance);this.scroll={animationId:this.root.animationId,phase:y,isRoot:w,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:w}}}resetTransform(){if(!p)return;const y=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,b=this.projectionDelta&&!_m(this.projectionDelta),w=this.getTransformTemplate(),E=w?w(this.latestValues,""):void 0,S=E!==this.prevTransformTemplateValue;y&&this.instance&&(b||Ys(this.latestValues)||S)&&(p(this.instance,E),this.shouldResetTransform=!1,this.scheduleRender())}measure(y=!0){const b=this.measurePageBox();let w=this.removeElementScroll(b);return y&&(w=this.removeTransform(w)),pE(w),{animationId:this.root.animationId,measuredBox:b,layoutBox:w,latestValues:{},source:this.id}}measurePageBox(){var E;const{visualElement:y}=this.options;if(!y)return En();const b=y.measureViewportBox();if(!(((E=this.scroll)==null?void 0:E.wasRoot)||this.path.some(gE))){const{scroll:S}=this.root;S&&(Ro(b.x,S.offset.x),Ro(b.y,S.offset.y))}return b}removeElementScroll(y){var w;const b=En();if(Gr(b,y),(w=this.scroll)!=null&&w.wasRoot)return b;for(let E=0;E<this.path.length;E++){const S=this.path[E],{scroll:I,options:_}=S;S!==this.root&&I&&_.layoutScroll&&(I.wasRoot&&Gr(b,y),Ro(b.x,I.offset.x),Ro(b.y,I.offset.y))}return b}applyTransform(y,b=!1){const w=En();Gr(w,y);for(let E=0;E<this.path.length;E++){const S=this.path[E];!b&&S.options.layoutScroll&&S.scroll&&S!==S.root&&ko(w,{x:-S.scroll.offset.x,y:-S.scroll.offset.y}),Ys(S.latestValues)&&ko(w,S.latestValues)}return Ys(this.latestValues)&&ko(w,this.latestValues),w}removeTransform(y){const b=En();Gr(b,y);for(let w=0;w<this.path.length;w++){const E=this.path[w];if(!E.instance||!Ys(E.latestValues))continue;Wd(E.latestValues)&&E.updateSnapshot();const S=En(),I=E.measurePageBox();Gr(S,I),xp(b,E.latestValues,E.snapshot?E.snapshot.layoutBox:void 0,S)}return Ys(this.latestValues)&&xp(b,this.latestValues),b}setTargetDelta(y){this.targetDelta=y,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(y){this.options={...this.options,...y,crossfade:y.crossfade!==void 0?y.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Zn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(y=!1){var _;const b=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=b.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=b.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=b.isSharedProjectionDirty);const w=!!this.resumingFrom||this!==b;if(!(y||w&&this.isSharedProjectionDirty||this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:S,layoutId:I}=this.options;if(!(!this.layout||!(S||I))){if(this.resolvedRelativeTargetAt=Zn.timestamp,!this.targetDelta&&!this.relativeTarget){const D=this.getClosestProjectingParent();D&&D.layout&&this.animationProgress!==1?(this.relativeParent=D,this.forceRelativeParentToResolveTarget(),this.relativeTarget=En(),this.relativeTargetOrigin=En(),Ma(this.relativeTargetOrigin,this.layout.layoutBox,D.layout.layoutBox),Gr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=En(),this.targetWithTransforms=En()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),CC(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Gr(this.target,this.layout.layoutBox),um(this.target,this.targetDelta)):Gr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const D=this.getClosestProjectingParent();D&&!!D.resumingFrom==!!this.resumingFrom&&!D.options.layoutScroll&&D.target&&this.animationProgress!==1?(this.relativeParent=D,this.forceRelativeParentToResolveTarget(),this.relativeTarget=En(),this.relativeTargetOrigin=En(),Ma(this.relativeTargetOrigin,this.target,D.target),Gr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Wd(this.parent.latestValues)||cm(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var L;const y=this.getLead(),b=!!this.resumingFrom||this!==y;let w=!0;if((this.isProjectionDirty||(L=this.parent)!=null&&L.isProjectionDirty)&&(w=!1),b&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(w=!1),this.resolvedRelativeTargetAt===Zn.timestamp&&(w=!1),w)return;const{layout:E,layoutId:S}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(E||S))return;Gr(this.layoutCorrected,this.layout.layoutBox);const I=this.treeScale.x,_=this.treeScale.y;O3(this.layoutCorrected,this.treeScale,this.path,b),y.layout&&!y.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(y.target=y.layout.layoutBox,y.targetWithTransforms=En());const{target:D}=y;if(!D){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(pp(this.prevProjectionDelta.x,this.projectionDelta.x),pp(this.prevProjectionDelta.y,this.projectionDelta.y)),Da(this.projectionDelta,this.layoutCorrected,D,this.latestValues),(this.treeScale.x!==I||this.treeScale.y!==_||!Ep(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ep(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",D))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(y=!0){var b;if((b=this.options.visualElement)==null||b.scheduleRender(),y){const w=this.getStack();w&&w.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Po(),this.projectionDelta=Po(),this.projectionDeltaWithTransform=Po()}setAnimationOrigin(y,b=!1){const w=this.snapshot,E=w?w.latestValues:{},S={...this.latestValues},I=Po();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!b;const _=En(),D=w?w.source:void 0,L=this.layout?this.layout.source:void 0,B=D!==L,F=this.getStack(),j=!F||F.members.length<=1,W=!!(B&&!j&&this.options.crossfade===!0&&!this.path.some(fE));this.animationProgress=0;let z;this.mixTargetDelta=J=>{const ne=J/1e3;Tp(I.x,y.x,ne),Tp(I.y,y.y,ne),this.setTargetDelta(I),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ma(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),dE(this.relativeTarget,this.relativeTargetOrigin,_,ne),z&&ZC(this.relativeTarget,z)&&(this.isProjectionDirty=!1),z||(z=En()),Gr(z,this.relativeTarget)),B&&(this.animationValues=S,HC(S,E,this.latestValues,ne,W,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ne},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(y){var b,w,E;this.notifyListeners("animationStart"),(b=this.currentAnimation)==null||b.stop(),(E=(w=this.resumingFrom)==null?void 0:w.currentAnimation)==null||E.stop(),this.pendingAnimation&&(ws(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=tn.update(()=>{pc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Lo(0)),this.currentAnimation=jC(this.motionValue,[0,1e3],{...y,velocity:0,isSync:!0,onUpdate:S=>{this.mixTargetDelta(S),y.onUpdate&&y.onUpdate(S)},onStop:()=>{},onComplete:()=>{y.onComplete&&y.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const y=this.getStack();y&&y.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(JC),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const y=this.getLead();let{targetWithTransforms:b,target:w,layout:E,latestValues:S}=y;if(!(!b||!w||!E)){if(this!==y&&this.layout&&E&&Om(this.options.animationType,this.layout.layoutBox,E.layoutBox)){w=this.target||En();const I=pr(this.layout.layoutBox.x);w.x.min=y.target.x.min,w.x.max=w.x.min+I;const _=pr(this.layout.layoutBox.y);w.y.min=y.target.y.min,w.y.max=w.y.min+_}Gr(b,w),ko(b,S),Da(this.projectionDeltaWithTransform,this.layoutCorrected,b,S)}}registerSharedNode(y,b){this.sharedNodes.has(y)||this.sharedNodes.set(y,new qC),this.sharedNodes.get(y).add(b);const E=b.options.initialPromotionConfig;b.promote({transition:E?E.transition:void 0,preserveFollowOpacity:E&&E.shouldPreserveFollowOpacity?E.shouldPreserveFollowOpacity(b):void 0})}isLead(){const y=this.getStack();return y?y.lead===this:!0}getLead(){var b;const{layoutId:y}=this.options;return y?((b=this.getStack())==null?void 0:b.lead)||this:this}getPrevLead(){var b;const{layoutId:y}=this.options;return y?(b=this.getStack())==null?void 0:b.prevLead:void 0}getStack(){const{layoutId:y}=this.options;if(y)return this.root.sharedNodes.get(y)}promote({needsReset:y,transition:b,preserveFollowOpacity:w}={}){const E=this.getStack();E&&E.promote(this,w),y&&(this.projectionDelta=void 0,this.needsReset=!0),b&&this.setOptions({transition:b})}relegate(){const y=this.getStack();return y?y.relegate(this):!1}resetSkewAndRotation(){const{visualElement:y}=this.options;if(!y)return;let b=!1;const{latestValues:w}=y;if((w.z||w.rotate||w.rotateX||w.rotateY||w.rotateZ||w.skewX||w.skewY)&&(b=!0),!b)return;const E={};w.z&&Ad("z",y,E,this.animationValues);for(let S=0;S<Ed.length;S++)Ad(`rotate${Ed[S]}`,y,E,this.animationValues),Ad(`skew${Ed[S]}`,y,E,this.animationValues);y.render();for(const S in E)y.setStaticValue(S,E[S]),this.animationValues&&(this.animationValues[S]=E[S]);y.scheduleRender()}applyProjectionStyles(y,b){if(!this.instance||this.isSVG)return;if(!this.isVisible){y.visibility="hidden";return}const w=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,y.visibility="",y.opacity="",y.pointerEvents=hc(b==null?void 0:b.pointerEvents)||"",y.transform=w?w(this.latestValues,""):"none";return}const E=this.getLead();if(!this.projectionDelta||!this.layout||!E.target){this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=hc(b==null?void 0:b.pointerEvents)||""),this.hasProjected&&!Ys(this.latestValues)&&(y.transform=w?w({},""):"none",this.hasProjected=!1);return}y.visibility="";const S=E.animationValues||E.latestValues;this.applyTransformsToTarget();let I=QC(this.projectionDeltaWithTransform,this.treeScale,S);w&&(I=w(S,I)),y.transform=I;const{x:_,y:D}=this.projectionDelta;y.transformOrigin=`${_.origin*100}% ${D.origin*100}% 0`,E.animationValues?y.opacity=E===this?S.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:S.opacityExit:y.opacity=E===this?S.opacity!==void 0?S.opacity:"":S.opacityExit!==void 0?S.opacityExit:0;for(const L in Ua){if(S[L]===void 0)continue;const{correct:B,applyTo:F,isCSSVariable:j}=Ua[L],W=I==="none"?S[L]:B(S[L],E);if(F){const z=F.length;for(let J=0;J<z;J++)y[F[J]]=W}else j?this.options.visualElement.renderState.vars[L]=W:y[L]=W}this.options.layoutId&&(y.pointerEvents=E===this?hc(b==null?void 0:b.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(y=>{var b;return(b=y.currentAnimation)==null?void 0:b.stop()}),this.root.nodes.forEach(Ap),this.root.sharedNodes.clear()}}}function tE(r){r.updateLayout()}function nE(r){var a;const o=((a=r.resumeFrom)==null?void 0:a.snapshot)||r.snapshot;if(r.isLead()&&r.layout&&o&&r.hasListeners("didUpdate")){const{layoutBox:f,measuredBox:p}=r.layout,{animationType:x}=r.options,y=o.source!==r.layout.source;x==="size"?Xr(I=>{const _=y?o.measuredBox[I]:o.layoutBox[I],D=pr(_);_.min=f[I].min,_.max=_.min+D}):Om(x,o.layoutBox,f)&&Xr(I=>{const _=y?o.measuredBox[I]:o.layoutBox[I],D=pr(f[I]);_.max=_.min+D,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[I].max=r.relativeTarget[I].min+D)});const b=Po();Da(b,f,o.layoutBox);const w=Po();y?Da(w,r.applyTransform(p,!0),o.measuredBox):Da(w,f,o.layoutBox);const E=!_m(b);let S=!1;if(!r.resumeFrom){const I=r.getClosestProjectingParent();if(I&&!I.resumeFrom){const{snapshot:_,layout:D}=I;if(_&&D){const L=En();Ma(L,o.layoutBox,_.layoutBox);const B=En();Ma(B,f,D.layoutBox),Rm(L,B)||(S=!0),I.options.layoutRoot&&(r.relativeTarget=B,r.relativeTargetOrigin=L,r.relativeParent=I)}}}r.notifyListeners("didUpdate",{layout:f,snapshot:o,delta:w,layoutDelta:b,hasLayoutChanged:E,hasRelativeLayoutChanged:S})}else if(r.isLead()){const{onExitComplete:f}=r.options;f&&f()}r.options.transition=void 0}function rE(r){r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function iE(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function sE(r){r.clearSnapshot()}function Ap(r){r.clearMeasurements()}function bp(r){r.isLayoutDirty=!1}function oE(r){const{visualElement:o}=r.options;o&&o.getProps().onBeforeLayoutMeasure&&o.notify("BeforeLayoutMeasure"),r.resetTransform()}function Sp(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function aE(r){r.resolveTargetDelta()}function lE(r){r.calcProjection()}function cE(r){r.resetSkewAndRotation()}function uE(r){r.removeLeadSnapshot()}function Tp(r,o,a){r.translate=ln(o.translate,0,a),r.scale=ln(o.scale,1,a),r.origin=o.origin,r.originPoint=o.originPoint}function Ip(r,o,a,f){r.min=ln(o.min,a.min,f),r.max=ln(o.max,a.max,f)}function dE(r,o,a,f){Ip(r.x,o.x,a.x,f),Ip(r.y,o.y,a.y,f)}function fE(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const hE={duration:.45,ease:[.4,0,.1,1]},Np=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),_p=Np("applewebkit/")&&!Np("chrome/")?Math.round:Yr;function Rp(r){r.min=_p(r.min),r.max=_p(r.max)}function pE(r){Rp(r.x),Rp(r.y)}function Om(r,o,a){return r==="position"||r==="preserve-aspect"&&!vC(Cp(o),Cp(a),.2)}function gE(r){var o;return r!==r.root&&((o=r.scroll)==null?void 0:o.wasRoot)}const mE=Pm({attachResizeListener:(r,o)=>Wa(r,"resize",o),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),bd={current:void 0},Dm=Pm({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!bd.current){const r=new mE({});r.mount(window),r.setOptions({layoutScroll:!0}),bd.current=r}return bd.current},resetTransform:(r,o)=>{r.style.transform=o!==void 0?o:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),xE={pan:{Feature:MC},drag:{Feature:DC,ProjectionNode:Dm,MeasureLayout:Tm}};function kp(r,o,a){const{props:f}=r;r.animationState&&f.whileHover&&r.animationState.setActive("whileHover",a==="Start");const p="onHover"+a,x=f[p];x&&tn.postRender(()=>x(o,Za(o)))}class yE extends Cs{mount(){const{current:o}=this.node;o&&(this.unmount=zv(o,(a,f)=>(kp(this.node,f,"Start"),p=>kp(this.node,p,"End"))))}unmount(){}}class wE extends Cs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let o=!1;try{o=this.node.current.matches(":focus-visible")}catch{o=!0}!o||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ya(Wa(this.node.current,"focus",()=>this.onFocus()),Wa(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Pp(r,o,a){const{props:f}=r;if(r.current instanceof HTMLButtonElement&&r.current.disabled)return;r.animationState&&f.whileTap&&r.animationState.setActive("whileTap",a==="Start");const p="onTap"+(a==="End"?"":a),x=f[p];x&&tn.postRender(()=>x(o,Za(o)))}class vE extends Cs{mount(){const{current:o}=this.node;o&&(this.unmount=Gv(o,(a,f)=>(Pp(this.node,f,"Start"),(p,{success:x})=>Pp(this.node,p,x?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Zd=new WeakMap,Sd=new WeakMap,CE=r=>{const o=Zd.get(r.target);o&&o(r)},EE=r=>{r.forEach(CE)};function AE({root:r,...o}){const a=r||document;Sd.has(a)||Sd.set(a,{});const f=Sd.get(a),p=JSON.stringify(o);return f[p]||(f[p]=new IntersectionObserver(EE,{root:r,...o})),f[p]}function bE(r,o,a){const f=AE(o);return Zd.set(r,a),f.observe(r),()=>{Zd.delete(r),f.unobserve(r)}}const SE={some:0,all:1};class TE extends Cs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:o={}}=this.node.getProps(),{root:a,margin:f,amount:p="some",once:x}=o,y={root:a?a.current:void 0,rootMargin:f,threshold:typeof p=="number"?p:SE[p]},b=w=>{const{isIntersecting:E}=w;if(this.isInView===E||(this.isInView=E,x&&!E&&this.hasEnteredView))return;E&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",E);const{onViewportEnter:S,onViewportLeave:I}=this.node.getProps(),_=E?S:I;_&&_(w)};return bE(this.node.current,y,b)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:o,prevProps:a}=this.node;["amount","margin","root"].some(IE(o,a))&&this.startObserver()}unmount(){}}function IE({viewport:r={}},{viewport:o={}}={}){return a=>r[a]!==o[a]}const NE={inView:{Feature:TE},tap:{Feature:vE},focus:{Feature:wE},hover:{Feature:yE}},_E={layout:{ProjectionNode:Dm,MeasureLayout:Tm}},RE={...pC,...NE,...xE,..._E},Li=R3(RE,W3),kE=()=>{const{login:r,signup:o,user:a,logout:f,checkAuth:p}=R.useContext(gr),[x,y]=R.useState(""),[b,w]=R.useState(""),[E,S]=R.useState(""),[I,_]=R.useState(null),[D,L]=R.useState(null),[B,F]=R.useState(""),[j,W]=R.useState(0),[z,J]=R.useState({x:0,y:0}),[ne,de]=R.useState(1),[q,ce]=R.useState(null),[Z,Ae]=R.useState(!1),[ke,Ie]=R.useState(!1),[Pe,Fe]=R.useState({}),[ee,He]=R.useState({}),[xe,he]=R.useState(!1),[Le,fe]=R.useState(!1),[K,H]=R.useState(null),pe=ar(),Oe=Or(),we=new URLSearchParams(Oe.search),oe=we.get("redirect"),Me=we.get("code"),Ne=oe==="lobby",Ve=()=>{const Ye="abcdefghijklmnopqrstuvwxyz0123456789";let et="";for(let gt=0;gt<10;gt++)et+=Ye.charAt(Math.floor(Math.random()*Ye.length));return et};R.useEffect(()=>{if(Ne&&!x&&!b){const Ye=Ve(),et=Ve();y(Ye),w(et),He(gt=>({...gt,username:!0,password:!0})),Fe(gt=>({...gt,username:"",password:""})),W(2)}},[Ne,x,b,E]),R.useEffect(()=>{localStorage.getItem("access_token")&&pe(oe==="lobby"?Me?`/lobby?code=${Me}`:"/?showLobbyModal=true":oe==="product-selection"?"/product-selection":"/")},[oe,Me,pe]),R.useEffect(()=>{j===2&&E&&ut(E)&&(he(!0),He(Ye=>({...Ye,displayName:!0})),Fe(Ye=>({...Ye,displayName:""})))},[j,E]);const me=Ye=>{const et=/^[a-z0-9]+$/;return Ye.length>=2&&et.test(Ye)},Xe=Ye=>Ye.length>=2,ut=Ye=>Ye.length>=2,De=()=>{j<Ct.length-1&&(j===0&&!E&&(S(x),He(Ye=>({...Ye,displayName:!0})),Fe(Ye=>({...Ye,displayName:""}))),j===1&&E&&E.length>=2?he(!0):he(!1),W(Ye=>Ye+1))},it=()=>{if(j>0){const Ye=j-1;W(Ye);const et=Ct[Ye];if(et.validate){const gt=et.value;et.validate(gt)&&he(!0)}else he(!0)}},zt=(Ye,et,gt)=>{gt(Ye.target.value);const Ut=Ye.target.value;et(Ut)?(He(kt=>({...kt,[Ct[j].id]:!0})),Fe(kt=>({...kt,[Ct[j].id]:""})),he(!0)):(He(kt=>({...kt,[Ct[j].id]:!1})),Fe(kt=>({...kt,[Ct[j].id]:"Must be at least 2 characters"})),he(!1))},jt=Ye=>{const et=Ye.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");y(et),me(et)?(He(gt=>({...gt,username:!0})),Fe(gt=>({...gt,username:""})),he(!0)):(He(gt=>({...gt,username:!1})),Fe(gt=>({...gt,username:"Must be at least 2 characters"})),he(!1))},Pt=Ye=>{zt(Ye,Xe,w)},vt=Ye=>{zt(Ye,ut,S)},pt=Ye=>{const et=Ye.target.files[0];if(et){const gt=new FileReader;gt.onload=Ut=>{const kt=new Image;kt.onload=()=>{let At=kt.width,nn=kt.height;const Ht=1500;At>nn&&At>Ht?(nn=nn*Ht/At,At=Ht):nn>At&&nn>Ht&&(At=At*Ht/nn,nn=Ht);const un=document.createElement("canvas");un.width=At,un.height=nn,un.getContext("2d").drawImage(kt,0,0,At,nn);const ge=un.toDataURL("image/jpeg",.75);_(et),L(ge),Ae(!0),He(lt=>({...lt,image:!0})),Fe(lt=>({...lt,image:""})),he(!0)},kt.src=Ut.target.result},gt.readAsDataURL(et)}},xn=(Ye,et)=>{ce(et)},_e=async()=>{try{const Ye=await sf(D,q);L(Ye),Ae(!1)}catch(Ye){console.error("Error cropping the image:",Ye),F("Failed to crop image. Please try again.")}},zn=async Ye=>{if(Ye.preventDefault(),Ie(!0),F(""),console.log("Signup attempt - Username:",x,"Password:",b),!x||!b||!E){F("All fields are required"),Ie(!1);return}if(!I||!D){F("Your profile picture is required"),Ie(!1);return}try{const et="/signup",gt=await fetch(window.server_url+et,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:x,password:b})}),Ut=await gt.json();if(Ut.error==="Username already taken")if(Ne){const Ht=Ve(),un=Ve();y(Ht),w(un);const je=await fetch(window.server_url+et,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:Ht,password:un})}),ge=await je.json();if(!je.ok||ge.error==="Username already taken"){F("Unable to create account. Please try again."),Ie(!1);return}r(ge)}else{F("Username is taken"),Ie(!1);return}else{if(!gt.ok){F(Ut.message||"Signup failed"),Ie(!1);return}r(Ut)}await p();const kt=localStorage.getItem("access_token");if(!kt)throw new Error("Authentication failed");let At=null;if(I)At=D,At=At.split(",")[1];else{const je=await(await(await fetch("/assets/fakeprofile.png")).blob()).arrayBuffer();At=btoa(new Uint8Array(je).reduce((ge,lt)=>ge+String.fromCharCode(lt),""))}if(!(await fetch(`${window.server_url}/update_profile`,{method:"POST",headers:{Authorization:`Bearer ${kt}`,"Content-Type":"application/json"},body:JSON.stringify({name:E,image_data:At})})).ok)throw new Error("Failed to update profile");await p(),pe(oe==="lobby"?Me?`/lobby?code=${Me}`:"/?showLobbyModal=true":oe==="product-selection"?"/product-selection":"/")}catch(et){console.error("Error:",et),F("An error occurred. Please try again.")}Ie(!1)},Ct=[{id:"username",label:"Username",value:x,onChange:jt,type:"text",placeholder:"Enter a username",validate:me},{id:"password",label:"Password",value:b,onChange:Pt,type:"text",placeholder:"Create a password",validate:Xe},{id:"displayName",label:Me==="demolobby"?"Display Name (Type Any Name)":"Display Name (what people will see)",value:E,onChange:vt,type:"text",placeholder:"Enter your preferred name",validate:ut},{id:"image",label:Me==="demolobby"?"Profile Image (Upload Any Image)":"Upload a Selfie (so people can find you)",type:"file",onChange:pt,accept:"image/*"}];return v.jsxs("div",{className:"signup-container",children:[v.jsx("button",{onClick:()=>pe("/"),className:"homescreen-button",children:"Home"}),v.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),v.jsx("h3",{className:"signup-header",children:Me==="demolobby"?"Join the demo":"Sign Up to Join"}),Me&&Me!=="demolobby"&&v.jsxs("h2",{className:"signup-header",children:[Me," lobby"]}),Me==="demolobby"&&v.jsx("h2",{className:"signup-header",style:{fontSize:"0.9rem"},children:"Try Reuneo for Free!"}),v.jsxs("p",{className:"login-link-text",children:["Already have an account? ",v.jsx("a",{href:"#",onClick:Ye=>{Ye.preventDefault(),pe("/login")},className:"login-link",children:"Login here"})]}),v.jsxs("div",{className:"step-form-container",children:[v.jsx("div",{className:"step-progress",children:(Ne?Ct.slice(2):Ct).map((Ye,et)=>v.jsx("div",{className:`progress-dot ${Ne?(et===j-2?"active":"")+(et<j-2?" completed":""):(et===j?"active":"")+(et<j?" completed":"")}`},et))}),v.jsxs("form",{onSubmit:zn,children:[v.jsx(V1,{mode:"wait",initial:!1,children:v.jsxs(Li.div,{initial:{opacity:0,x:8},animate:{opacity:1,x:0},exit:{opacity:0,x:-8},transition:{type:"spring",stiffness:500,damping:25,mass:.3},className:"step active",style:{willChange:"transform, opacity"},children:[v.jsx("div",{className:"step-content",children:v.jsxs(Li.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:[v.jsx("label",{className:"step-label",children:Ct[j].label}),v.jsx(Li.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},transition:{duration:.15,ease:"easeOut"},children:Ct[j].type==="file"?v.jsx("div",{className:"image-upload-container",children:Z?v.jsxs("div",{className:"cropper-container",children:[v.jsx("div",{className:"cropper-wrapper",children:v.jsx(rf,{image:D,crop:z,zoom:ne,aspect:1,onCropComplete:xn,onCropChange:J,onZoomChange:de})}),v.jsxs("div",{className:"cropper-controls",children:[v.jsx("button",{type:"button",onClick:()=>{Ae(!1),L(null),_(null)},className:"cancel-crop-button",children:"Cancel"}),v.jsx("button",{type:"button",onClick:_e,className:"save-crop-button",children:"Good"})]})]}):v.jsxs(v.Fragment,{children:[v.jsx("input",{type:"file",onChange:Ct[j].onChange,accept:Ct[j].accept,className:"step-input"}),D&&v.jsx("div",{children:v.jsx("img",{src:D,alt:"Profile preview",className:"profile-preview-image"})})]})}):v.jsx("input",{type:Ct[j].type,value:Ct[j].value,onChange:Ct[j].onChange,placeholder:Ct[j].placeholder,className:"step-input",autoFocus:!0})}),v.jsxs(V1,{mode:"wait",children:[Pe[Ct[j].id]&&v.jsx(Li.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"step-error",children:Pe[Ct[j].id]}),ee[Ct[j].id]&&v.jsx(Li.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},className:"step-success",children:" Valid"})]})]})}),!Z&&v.jsxs("div",{className:"button-container",children:[j>0&&v.jsx(Li.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},type:"button",onClick:it,className:"backz-button",children:" Back"}),xe&&j<Ct.length-1&&v.jsx(Li.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},type:"button",onClick:De,className:"nextz-button",children:"Next "})]})]},j)}),B&&v.jsx(Li.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"error-message",children:B}),j===Ct.length-1&&v.jsx(Li.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},type:"submit",className:"primary-button",disabled:ke,children:ke?"Loading...":"Complete Signup"})]})]})]})},PE=5e3,Mm=(r,o=null,a=null)=>{R.useEffect(()=>{const f=async()=>{try{const x=a?`${window.server_url}/display_lobby_metadata?lobby_code=${a}`:`${window.server_url}/display_lobby_metadata`,y=localStorage.getItem("access_token"),b=await fetch(x,{headers:{Authorization:`Bearer ${y}`,lobby_code:a}});if(!b.ok){console.error("Failed to fetch lobby metadata");return}const w=await b.json();r(w.player_count),o&&o(w.lobby_state)}catch(x){console.error("Error fetching lobby metadata:",x)}};f();const p=setInterval(f,PE);return()=>clearInterval(p)},[r,o,a])},Xf="currentLobbyCode",Yf="currentLobbyTimestamp",Kf="currentLobbyLastValidated",OE=30*60*1e3,DE=3*60*1e3,ME=r=>{localStorage.setItem(Xf,r),localStorage.setItem(Yf,Date.now().toString()),console.log(`Stored lobby code: ${r}`)},LE=()=>{const r=localStorage.getItem(Xf),o=localStorage.getItem(Yf);return!r||!o?null:Date.now()-parseInt(o)>OE?(Ac(),console.log("Lobby code expired, cleared from storage"),null):r},BE=()=>{const r=localStorage.getItem(Kf);return r?Date.now()-parseInt(r)>DE:!0},FE=()=>{localStorage.setItem(Kf,Date.now().toString())},Ac=()=>{localStorage.removeItem(Xf),localStorage.removeItem(Yf),localStorage.removeItem(Kf),console.log("Cleared lobby storage")},jE=()=>{const[r,o]=R.useState(!1),[a,f]=R.useState(!1),[p,x]=R.useState(""),[y,b]=R.useState(""),[w,E]=R.useState(""),[S,I]=R.useState(null);tg();const{user:_,userProfile:D,checkAuth:L,permissions:B}=R.useContext(gr),[F,j]=R.useState(null),[W,z]=R.useState(null),[J,ne]=R.useState([]),[de,q]=R.useState(!1),[ce,Z]=R.useState(null),Ae=ar();Mm(j,z);const[ke,Ie]=R.useState(!1);R.useRef(null);const Pe=R.useRef(null),Fe=async(fe=!1)=>{const K=LE();if(!K||!_){Z(null);return}if(Z(K),fe||BE())try{const H=localStorage.getItem("access_token"),pe=await fetch(`${window.server_url}/display_lobby_metadata?lobby_code=${K}`,{headers:{Authorization:`Bearer ${H}`,lobby_code:K}});if(pe.ok){const Oe=await pe.json();Oe.status==="error"||Oe.lobby_state==="terminated"?(Ac(),Z(null)):FE()}else Ac(),Z(null)}catch(H){console.error("Error validating current lobby:",H),Z(null)}},ee=async()=>{if(_){q(!0);try{const fe=localStorage.getItem("access_token"),K=await fetch(window.server_url+"/view_my_active_lobbies",{headers:{Authorization:`Bearer ${fe}`}});if(K.ok){const H=await K.json();console.log("User's active lobbies:",H),H&&H.lobbies&&Array.isArray(H.lobbies)?ne(H.lobbies):ne([])}else console.error("Failed to fetch user's active lobbies"),ne([])}catch(fe){console.error("Error fetching user's active lobbies:",fe),ne([])}finally{q(!1)}}};R.useEffect(()=>{_?(ee(),Fe(!0)):Z(null)},[_]),R.useEffect(()=>{L()},[]),R.useEffect(()=>{if(new URLSearchParams(window.location.search).get("showLobbyModal")==="true"&&_){f(!0);const H=window.location.pathname;window.history.replaceState({},"",H)}},[_]);const He=fe=>{(B==="admin"||B==="organizer")&&Ae(`/admin_lobby_view?code=${fe}`)},xe=fe=>{fe.preventDefault();const H=new FormData(fe.target).get("name");if(!H||H.trim()===""){b("Please enter a lobby code");return}const pe=H.toLowerCase().replace(/[^a-z0-9]/g,"");if(pe===""){b("Lobby code must contain only letters and numbers");return}E(pe),f(!1),console.log(pe),x(pe),Ae(`/lobby?code=${pe}`),x(""),b("")},he=()=>{Ie(!1),Pe.current&&(Pe.current.clear(),Pe.current=null)},Le=()=>a?v.jsx("div",{className:"lobby-modal-overlay",children:v.jsxs("div",{className:"lobby-modal-container",children:[v.jsx("button",{onClick:()=>{f(!1),x(""),b(""),he()},className:"lobby-modal-close",children:""}),v.jsx("h2",{className:"lobby-modal-title",children:"Join Lobby"}),v.jsxs("form",{onSubmit:xe,className:"lobby-form",children:[v.jsxs("div",{className:"lobby-input-container",children:[v.jsx("input",{type:"text",name:"name",placeholder:"Enter Lobby Code",className:"lobby-input",pattern:"[a-zA-Z0-9]+",title:"Only letters and numbers are allowed",required:!0}),y&&v.jsx("div",{className:"lobby-error-message",children:y})]}),v.jsx("button",{type:"submit",className:"lobby-submit-button",children:"Join"})]})]})}):null;return v.jsxs("div",{style:{position:"relative",height:"var(--viewport-height)",overflow:"hidden"},children:[v.jsxs("video",{className:"background-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,poster:"/assets/demo_app_home_video_cover.jpg",children:[v.jsx("source",{src:"/assets/demo_app_home_video_X2_small.mp4",type:"video/mp4"}),v.jsx("source",{src:"/assets/app_home_video_2.webm",type:"video/webm"}),v.jsx("img",{src:"/assets/demo_app_home_video_cover.jpg",alt:"Background fallback",style:{width:"100%",height:"100%",objectFit:"cover"}}),"Your browser does not support the video tag."]}),v.jsxs("div",{style:{position:"relative",zIndex:1,color:"white",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[v.jsx("div",{style:{position:"absolute",top:"0",left:"50%",transform:"translateX(-50%)"},children:v.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Logo",style:{width:"110px",height:"110px",objectFit:"contain"}})}),v.jsx("div",{style:{marginTop:"10%",display:"flex",flexDirection:"column"},children:v.jsx(Qy,{user:_,onProfileClick:()=>o(!0)})}),v.jsx("div",{style:{position:"absolute",top:"85px",display:B==="admin"||B==="organizer"?"flex":"none",justifyContent:"flex-end",width:"94%",left:"3%",alignItems:"center"},children:(B==="admin"||B==="organizer")&&v.jsx("button",{className:"login-button",onClick:()=>Ae("/organizer-account-details"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:fe=>{fe.currentTarget.style.transform="translateY(-2px)",fe.currentTarget.style.boxShadow="0 2px 8px rgba(74, 58, 58, 0.7)"},onMouseLeave:fe=>{fe.currentTarget.style.transform="translateY(0)",fe.currentTarget.style.boxShadow="0 0 4px rgba(74, 58, 58, 0.5)"},children:v.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Settings"})})}),(B==="admin"||B==="organizer")&&_==="topaz"&&v.jsx("div",{style:{position:"absolute",top:"120px",right:"20px",zIndex:10},children:v.jsx("button",{className:"master-lobbies-button",onClick:()=>Ae("/master_lobby_view"),children:"Lobbies"})}),r&&v.jsx(E2,{onSubmit:fe=>{o(!1)},onClose:()=>o(!1),existingProfile:D}),v.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",width:"90%",maxWidth:"1200px",textAlign:"center",marginLeft:"auto",marginRight:"auto",zIndex:1,top:"50%"},children:_?v.jsx("h2",{className:"welcome-header",style:{color:"#ffffff",fontSize:"1rem",textTransform:"uppercase",letterSpacing:"0.1em",textShadow:"4px 4px 8px rgba(0,0,0,0.9)",margin:0},children:_&&D&&(B==="admin"||B==="organizer")?(()=>{const fe="Create a Lobby",K=D?D.name.slice(0,15):"";return v.jsxs(v.Fragment,{children:[fe.split("").map((H,pe)=>v.jsx("span",{style:{"--i":pe+1,marginRight:H===" "?"0.5em":"1px"},children:H},`main-${pe}`)),v.jsx("br",{}),K&&K.split("").map((H,pe)=>v.jsx("span",{style:{"--i":pe+1,marginRight:H===" "?"0.5em":"1px"},children:H},`name-${pe}`))]})})():(()=>{const fe="Join the Experience",K=D?D.name.slice(0,15):"";return v.jsxs(v.Fragment,{children:[fe.split("").map((H,pe)=>v.jsx("span",{style:{"--i":pe+1,marginRight:H===" "?"0.5em":"1px"},children:H},`main-${pe}`)),v.jsx("br",{}),K&&K.split("").map((H,pe)=>v.jsx("span",{style:{"--i":pe+1,marginRight:H===" "?"0.5em":"1px"},children:H},`name-${pe}`))]})})()}):v.jsx("button",{className:"primary-button join-lobby-button",onClick:()=>window.location.href="https://reuneo.app/access",style:{padding:"16px 20px",backgroundColor:"transparent",color:"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0 auto",display:"block",position:"relative",zIndex:1,textAlign:"center",outline:"none",":hover":{transform:"scale(1.02)"}},children:v.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Become Organizer"})})}),_&&v.jsx("div",{style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",width:"94%",display:"flex",flexDirection:"row",justifyContent:"center",gap:"1.5rem"},children:v.jsx("div",{className:"event-item",style:{width:"auto",maxWidth:"none",margin:"0",padding:"10px 20px",borderRadius:"16px",marginBottom:"20px",cursor:"pointer",opacity:1,display:"flex",flexDirection:"row",alignItems:"center",gap:"1.5rem",":hover":{transform:"translateY(-5px)"}},children:v.jsxs("div",{style:{display:"flex",gap:"1.5rem",flexDirection:"row",alignItems:"center"},children:[v.jsx("button",{className:`primary-button ${B!=="admin"&&B!=="organizer"?"join-lobby-button":""}`,onClick:()=>_?f(!0):Ae("/signup?redirect=lobby"),disabled:F===null||W==="terminate",style:{opacity:1,cursor:F===null||W==="terminate"?"not-allowed":"pointer",padding:"16px 20px",backgroundColor:B!=="admin"&&B!=="organizer"?"transparent":"#144dff",color:"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0",display:"block",position:"relative",zIndex:1,textAlign:"center",outline:B!=="admin"&&B!=="organizer"?"none":"1px solid rgba(58, 53, 53, 0.7)",":hover":{backgroundColor:B!=="admin"&&B!=="organizer"?"transparent":"#535bf2",transform:"scale(1.02)"}},children:v.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Join Lobby"})}),_&&B!=="admin"&&B!=="organizer"&&v.jsx("button",{className:"primary-button join-lobby-button",onClick:()=>window.location.href="https://reuneo.com/organizer-signup",style:{padding:"16px 20px",backgroundColor:"transparent",color:"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0",display:"block",position:"relative",zIndex:1,textAlign:"center",outline:"none",":hover":{transform:"scale(1.02)"}},children:v.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Become Organizer"})}),(B==="admin"||B==="organizer")&&v.jsx("button",{className:`primary-button ${B==="admin"||B==="organizer"?"create-lobby-button":""}`,onClick:J.length>0?void 0:()=>Ae("/create_lobby"),disabled:J.length>0,title:J.length>0?"You already have an active lobby. Close it before creating a new one.":"Create a new lobby",style:{padding:"16px 20px",backgroundColor:J.length>0?"rgba(128, 128, 128, 0.3)":"transparent",color:J.length>0?"rgba(255, 255, 255, 0.5)":"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:J.length>0?"0 2px 3px rgba(0, 0, 0, 0.2)":"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0",position:"relative",zIndex:1,textAlign:"center",cursor:J.length>0?"not-allowed":"pointer",opacity:J.length>0?.6:1,":hover":{transform:J.length>0?"none":"scale(1.02)"}},children:v.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Create Lobby"})})]})})}),ce&&!((B==="admin"||B==="organizer")&&J.length>0)&&v.jsx("div",{className:"events-list",style:{position:"absolute",bottom:"calc(20px + 120px + 10px)",left:"50%",transform:"translateX(-50%)",width:"44%",height:"15%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.05), rgba(83, 91, 242, 0.05))",borderRadius:"30px",padding:"1rem",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",justifyContent:"center",alignItems:"center"},children:v.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",perspective:"1000px"},children:v.jsxs("div",{className:"card",style:{width:"calc(100% - 2rem)",maxWidth:"200px",minWidth:"150px",background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",boxShadow:"0 10px 30px rgba(20, 77, 255, 0.15)",border:"1px solid rgba(20, 77, 255, 0.2)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",padding:"1rem 1rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",transformStyle:"preserve-3d","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(20, 77, 255, 0.1), rgba(83, 91, 242, 0.1))",opacity:0,transition:"opacity 0.4s ease"}},onClick:()=>Ae(`/lobby?code=${ce}`),onMouseEnter:fe=>{fe.currentTarget.style.transform="translateY(-10px) rotateX(5deg)",fe.currentTarget.style.boxShadow="0 20px 40px rgba(20, 77, 255, 0.25)",fe.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.4)",fe.currentTarget.style.background="rgba(255, 255, 255, 0.98)"},onMouseLeave:fe=>{fe.currentTarget.style.transform="translateY(0) rotateX(0)",fe.currentTarget.style.boxShadow="0 10px 30px rgba(20, 77, 255, 0.15)",fe.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.2)",fe.currentTarget.style.background="rgba(255, 255, 255, 0.95)"},children:[v.jsx("div",{className:"glow-button",style:{width:"30px",height:"30px",borderRadius:"50%",background:"linear-gradient(135deg, #144dff, #535bf2)",marginBottom:".5rem",marginTop:"-1rem",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:".8rem",boxShadow:"0 8px 20px rgba(20, 77, 255, 0.3)",transition:"all 0.4s ease",position:"relative","&::after":{content:'""',position:"absolute",top:"-5px",left:"-5px",right:"-5px",bottom:"-5px",borderRadius:"50%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.2), rgba(83, 91, 242, 0.2))",zIndex:-1,animation:"pulse 2s infinite"}},children:ce.charAt(0).toUpperCase()}),v.jsxs("h3",{style:{marginTop:"0.5rem",color:"#144dff",fontWeight:"700",fontSize:".9em",fontFamily:"Helvetica",textAlign:"center",textShadow:"0 2px 4px rgba(20, 77, 255, 0.1)",letterSpacing:"0.5px"},children:["Return to ",ce]})]})})}),(B==="admin"||B==="organizer")&&J.length>0&&v.jsx("div",{className:"events-list",style:{position:"absolute",bottom:ce&&!((B==="admin"||B==="organizer")&&J.length>0)?"calc(20px + 120px + 10px + 15% + 10px)":"calc(20px + 120px + 10px)",left:"50%",transform:"translateX(-50%)",width:"44%",height:"15%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.05), rgba(83, 91, 242, 0.05))",borderRadius:"30px",padding:"1rem",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",justifyContent:"center",alignItems:"center"},children:de?v.jsx("div",{style:{textAlign:"center",color:"white"},children:v.jsx("p",{children:"Loading your lobbies..."})}):J.length>0?v.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",perspective:"1000px"},children:J.map((fe,K)=>v.jsxs("div",{className:"card",style:{width:"calc(100% - 2rem)",maxWidth:"200px",minWidth:"150px",background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",boxShadow:"0 10px 30px rgba(20, 77, 255, 0.15)",border:"1px solid rgba(20, 77, 255, 0.2)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",padding:"1rem 1rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",transformStyle:"preserve-3d","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(20, 77, 255, 0.1), rgba(83, 91, 242, 0.1))",opacity:0,transition:"opacity 0.4s ease"}},onClick:()=>He(fe),onMouseEnter:H=>{H.currentTarget.style.transform="translateY(-10px) rotateX(5deg)",H.currentTarget.style.boxShadow="0 20px 40px rgba(20, 77, 255, 0.25)",H.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.4)",H.currentTarget.style.background="rgba(255, 255, 255, 0.98)"},onMouseLeave:H=>{H.currentTarget.style.transform="translateY(0) rotateX(0)",H.currentTarget.style.boxShadow="0 10px 30px rgba(20, 77, 255, 0.15)",H.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.2)",H.currentTarget.style.background="rgba(255, 255, 255, 0.95)"},children:[v.jsx("div",{className:"glow-button",style:{width:"30px",height:"30px",borderRadius:"50%",background:"linear-gradient(135deg, #144dff, #535bf2)",marginBottom:".5rem",marginTop:"-1rem",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:".8rem",boxShadow:"0 8px 20px rgba(20, 77, 255, 0.3)",transition:"all 0.4s ease",position:"relative","&::after":{content:'""',position:"absolute",top:"-5px",left:"-5px",right:"-5px",bottom:"-5px",borderRadius:"50%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.2), rgba(83, 91, 242, 0.2))",zIndex:-1,animation:"pulse 2s infinite"}},children:fe&&fe.length>0?fe.charAt(0).toUpperCase():"?"}),v.jsxs("h3",{style:{marginTop:"0.5rem",color:"#144dff",fontWeight:"700",fontSize:".9em",fontFamily:"Helvetica",textAlign:"center",textShadow:"0 2px 4px rgba(20, 77, 255, 0.1)",letterSpacing:"0.5px"},children:["Lobby ",fe||"Unknown"]})]},K))}):v.jsx("div",{style:{}})})]}),v.jsx(Le,{})]})};function VE(){const{pathname:r}=Or();return R.useEffect(()=>{window.scrollTo(0,0)},[r]),null}function zE(){const{pathname:r}=Or(),o=r.startsWith("/organizer-dashboard");return R.useEffect(()=>{const a=document.getElementById("root"),f=document.body;return o?(a==null||a.classList.add("dashboard-view"),f==null||f.classList.add("dashboard-view")):(a==null||a.classList.remove("dashboard-view"),f==null||f.classList.remove("dashboard-view")),()=>{a==null||a.classList.remove("dashboard-view"),f==null||f.classList.remove("dashboard-view")}},[r,o]),null}const UE=()=>{const{login:r,signup:o,user:a,logout:f,checkAuth:p}=R.useContext(gr),[x,y]=R.useState(""),[b,w]=R.useState(""),[E,S]=R.useState(""),[I,_]=R.useState(""),[D,L]=R.useState(!0),[B,F]=R.useState({}),[j,W]=R.useState(!1),z=ar(),J=ce=>{const Z=/^[a-z0-9]+$/;return ce.length>=2&&Z.test(ce)},ne=ce=>{const Z=ce.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");y(Z),Z.length>0?W(!0):W(!1),J(Z)?F(Ae=>({...Ae,username:""})):F(Ae=>({...Ae,username:" "}))},de=ce=>{const Z=ce.target.value.toLowerCase();w(Z)},q=async ce=>{if(ce.preventDefault(),_(""),!J(x)){_("Please enter a valid username");return}try{const Z=D?"/login":"/signup",Ae=await fetch(window.server_url+Z,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:x,password:b}),mode:"cors"});if(Ae.ok){const ke=await Ae.json();r(ke),p(),z("/")}else{const ke=await Ae.json();_(ke.message||`${D?"Login":"Signup"} failed`)}}catch(Z){_("Network error occurred. Please try again."),console.error("Error:",Z)}};return v.jsxs("div",{className:"login-container",children:[v.jsx("button",{onClick:()=>z("/"),className:"homescreen-button",children:"Home"}),v.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),v.jsx("h1",{className:"login-header",children:"Login"}),v.jsxs("div",{className:"login-signup-form",children:[I&&v.jsx("div",{className:"error-message",children:I}),v.jsxs("form",{onSubmit:q,children:[v.jsxs("div",{className:"form-group",children:[v.jsx("input",{type:"text",placeholder:"Username",className:"login-input",value:x,onChange:ne,required:!0}),j&&v.jsx("div",{className:"step-success",children:"lowercase letters and numbers only"})]}),v.jsx("div",{className:"form-group",children:v.jsx("input",{type:"text",placeholder:"Password",className:"login-input",value:b,onChange:de,required:!0})}),v.jsx("button",{type:"submit",className:"login-primary-button",children:"Login"})]})]})]})},WE=()=>{const r=ar(),{logout:o}=R.useContext(gr);return localStorage.removeItem("access_token"),R.useEffect(()=>{console.log("LogoutPage useEffect"),setTimeout(()=>{o(),r("/")},100)},[]),v.jsx("div",{children:"Logged out redirecting to homescreen"})};var HE=Object.defineProperty,bc=Object.getOwnPropertySymbols,Lm=Object.prototype.hasOwnProperty,Bm=Object.prototype.propertyIsEnumerable,Op=(r,o,a)=>o in r?HE(r,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[o]=a,qd=(r,o)=>{for(var a in o||(o={}))Lm.call(o,a)&&Op(r,a,o[a]);if(bc)for(var a of bc(o))Bm.call(o,a)&&Op(r,a,o[a]);return r},Qd=(r,o)=>{var a={};for(var f in r)Lm.call(r,f)&&o.indexOf(f)<0&&(a[f]=r[f]);if(r!=null&&bc)for(var f of bc(r))o.indexOf(f)<0&&Bm.call(r,f)&&(a[f]=r[f]);return a};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Js;(r=>{const o=class Nt{constructor(w,E,S,I){if(this.version=w,this.errorCorrectionLevel=E,this.modules=[],this.isFunction=[],w<Nt.MIN_VERSION||w>Nt.MAX_VERSION)throw new RangeError("Version value out of range");if(I<-1||I>7)throw new RangeError("Mask value out of range");this.size=w*4+17;let _=[];for(let L=0;L<this.size;L++)_.push(!1);for(let L=0;L<this.size;L++)this.modules.push(_.slice()),this.isFunction.push(_.slice());this.drawFunctionPatterns();const D=this.addEccAndInterleave(S);if(this.drawCodewords(D),I==-1){let L=1e9;for(let B=0;B<8;B++){this.applyMask(B),this.drawFormatBits(B);const F=this.getPenaltyScore();F<L&&(I=B,L=F),this.applyMask(B)}}p(0<=I&&I<=7),this.mask=I,this.applyMask(I),this.drawFormatBits(I),this.isFunction=[]}static encodeText(w,E){const S=r.QrSegment.makeSegments(w);return Nt.encodeSegments(S,E)}static encodeBinary(w,E){const S=r.QrSegment.makeBytes(w);return Nt.encodeSegments([S],E)}static encodeSegments(w,E,S=1,I=40,_=-1,D=!0){if(!(Nt.MIN_VERSION<=S&&S<=I&&I<=Nt.MAX_VERSION)||_<-1||_>7)throw new RangeError("Invalid value");let L,B;for(L=S;;L++){const z=Nt.getNumDataCodewords(L,E)*8,J=y.getTotalBits(w,L);if(J<=z){B=J;break}if(L>=I)throw new RangeError("Data too long")}for(const z of[Nt.Ecc.MEDIUM,Nt.Ecc.QUARTILE,Nt.Ecc.HIGH])D&&B<=Nt.getNumDataCodewords(L,z)*8&&(E=z);let F=[];for(const z of w){a(z.mode.modeBits,4,F),a(z.numChars,z.mode.numCharCountBits(L),F);for(const J of z.getData())F.push(J)}p(F.length==B);const j=Nt.getNumDataCodewords(L,E)*8;p(F.length<=j),a(0,Math.min(4,j-F.length),F),a(0,(8-F.length%8)%8,F),p(F.length%8==0);for(let z=236;F.length<j;z^=253)a(z,8,F);let W=[];for(;W.length*8<F.length;)W.push(0);return F.forEach((z,J)=>W[J>>>3]|=z<<7-(J&7)),new Nt(L,E,W,_)}getModule(w,E){return 0<=w&&w<this.size&&0<=E&&E<this.size&&this.modules[E][w]}getModules(){return this.modules}drawFunctionPatterns(){for(let S=0;S<this.size;S++)this.setFunctionModule(6,S,S%2==0),this.setFunctionModule(S,6,S%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const w=this.getAlignmentPatternPositions(),E=w.length;for(let S=0;S<E;S++)for(let I=0;I<E;I++)S==0&&I==0||S==0&&I==E-1||S==E-1&&I==0||this.drawAlignmentPattern(w[S],w[I]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(w){const E=this.errorCorrectionLevel.formatBits<<3|w;let S=E;for(let _=0;_<10;_++)S=S<<1^(S>>>9)*1335;const I=(E<<10|S)^21522;p(I>>>15==0);for(let _=0;_<=5;_++)this.setFunctionModule(8,_,f(I,_));this.setFunctionModule(8,7,f(I,6)),this.setFunctionModule(8,8,f(I,7)),this.setFunctionModule(7,8,f(I,8));for(let _=9;_<15;_++)this.setFunctionModule(14-_,8,f(I,_));for(let _=0;_<8;_++)this.setFunctionModule(this.size-1-_,8,f(I,_));for(let _=8;_<15;_++)this.setFunctionModule(8,this.size-15+_,f(I,_));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let w=this.version;for(let S=0;S<12;S++)w=w<<1^(w>>>11)*7973;const E=this.version<<12|w;p(E>>>18==0);for(let S=0;S<18;S++){const I=f(E,S),_=this.size-11+S%3,D=Math.floor(S/3);this.setFunctionModule(_,D,I),this.setFunctionModule(D,_,I)}}drawFinderPattern(w,E){for(let S=-4;S<=4;S++)for(let I=-4;I<=4;I++){const _=Math.max(Math.abs(I),Math.abs(S)),D=w+I,L=E+S;0<=D&&D<this.size&&0<=L&&L<this.size&&this.setFunctionModule(D,L,_!=2&&_!=4)}}drawAlignmentPattern(w,E){for(let S=-2;S<=2;S++)for(let I=-2;I<=2;I++)this.setFunctionModule(w+I,E+S,Math.max(Math.abs(I),Math.abs(S))!=1)}setFunctionModule(w,E,S){this.modules[E][w]=S,this.isFunction[E][w]=!0}addEccAndInterleave(w){const E=this.version,S=this.errorCorrectionLevel;if(w.length!=Nt.getNumDataCodewords(E,S))throw new RangeError("Invalid argument");const I=Nt.NUM_ERROR_CORRECTION_BLOCKS[S.ordinal][E],_=Nt.ECC_CODEWORDS_PER_BLOCK[S.ordinal][E],D=Math.floor(Nt.getNumRawDataModules(E)/8),L=I-D%I,B=Math.floor(D/I);let F=[];const j=Nt.reedSolomonComputeDivisor(_);for(let z=0,J=0;z<I;z++){let ne=w.slice(J,J+B-_+(z<L?0:1));J+=ne.length;const de=Nt.reedSolomonComputeRemainder(ne,j);z<L&&ne.push(0),F.push(ne.concat(de))}let W=[];for(let z=0;z<F[0].length;z++)F.forEach((J,ne)=>{(z!=B-_||ne>=L)&&W.push(J[z])});return p(W.length==D),W}drawCodewords(w){if(w.length!=Math.floor(Nt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let E=0;for(let S=this.size-1;S>=1;S-=2){S==6&&(S=5);for(let I=0;I<this.size;I++)for(let _=0;_<2;_++){const D=S-_,B=(S+1&2)==0?this.size-1-I:I;!this.isFunction[B][D]&&E<w.length*8&&(this.modules[B][D]=f(w[E>>>3],7-(E&7)),E++)}}p(E==w.length*8)}applyMask(w){if(w<0||w>7)throw new RangeError("Mask value out of range");for(let E=0;E<this.size;E++)for(let S=0;S<this.size;S++){let I;switch(w){case 0:I=(S+E)%2==0;break;case 1:I=E%2==0;break;case 2:I=S%3==0;break;case 3:I=(S+E)%3==0;break;case 4:I=(Math.floor(S/3)+Math.floor(E/2))%2==0;break;case 5:I=S*E%2+S*E%3==0;break;case 6:I=(S*E%2+S*E%3)%2==0;break;case 7:I=((S+E)%2+S*E%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[E][S]&&I&&(this.modules[E][S]=!this.modules[E][S])}}getPenaltyScore(){let w=0;for(let _=0;_<this.size;_++){let D=!1,L=0,B=[0,0,0,0,0,0,0];for(let F=0;F<this.size;F++)this.modules[_][F]==D?(L++,L==5?w+=Nt.PENALTY_N1:L>5&&w++):(this.finderPenaltyAddHistory(L,B),D||(w+=this.finderPenaltyCountPatterns(B)*Nt.PENALTY_N3),D=this.modules[_][F],L=1);w+=this.finderPenaltyTerminateAndCount(D,L,B)*Nt.PENALTY_N3}for(let _=0;_<this.size;_++){let D=!1,L=0,B=[0,0,0,0,0,0,0];for(let F=0;F<this.size;F++)this.modules[F][_]==D?(L++,L==5?w+=Nt.PENALTY_N1:L>5&&w++):(this.finderPenaltyAddHistory(L,B),D||(w+=this.finderPenaltyCountPatterns(B)*Nt.PENALTY_N3),D=this.modules[F][_],L=1);w+=this.finderPenaltyTerminateAndCount(D,L,B)*Nt.PENALTY_N3}for(let _=0;_<this.size-1;_++)for(let D=0;D<this.size-1;D++){const L=this.modules[_][D];L==this.modules[_][D+1]&&L==this.modules[_+1][D]&&L==this.modules[_+1][D+1]&&(w+=Nt.PENALTY_N2)}let E=0;for(const _ of this.modules)E=_.reduce((D,L)=>D+(L?1:0),E);const S=this.size*this.size,I=Math.ceil(Math.abs(E*20-S*10)/S)-1;return p(0<=I&&I<=9),w+=I*Nt.PENALTY_N4,p(0<=w&&w<=2568888),w}getAlignmentPatternPositions(){if(this.version==1)return[];{const w=Math.floor(this.version/7)+2,E=this.version==32?26:Math.ceil((this.version*4+4)/(w*2-2))*2;let S=[6];for(let I=this.size-7;S.length<w;I-=E)S.splice(1,0,I);return S}}static getNumRawDataModules(w){if(w<Nt.MIN_VERSION||w>Nt.MAX_VERSION)throw new RangeError("Version number out of range");let E=(16*w+128)*w+64;if(w>=2){const S=Math.floor(w/7)+2;E-=(25*S-10)*S-55,w>=7&&(E-=36)}return p(208<=E&&E<=29648),E}static getNumDataCodewords(w,E){return Math.floor(Nt.getNumRawDataModules(w)/8)-Nt.ECC_CODEWORDS_PER_BLOCK[E.ordinal][w]*Nt.NUM_ERROR_CORRECTION_BLOCKS[E.ordinal][w]}static reedSolomonComputeDivisor(w){if(w<1||w>255)throw new RangeError("Degree out of range");let E=[];for(let I=0;I<w-1;I++)E.push(0);E.push(1);let S=1;for(let I=0;I<w;I++){for(let _=0;_<E.length;_++)E[_]=Nt.reedSolomonMultiply(E[_],S),_+1<E.length&&(E[_]^=E[_+1]);S=Nt.reedSolomonMultiply(S,2)}return E}static reedSolomonComputeRemainder(w,E){let S=E.map(I=>0);for(const I of w){const _=I^S.shift();S.push(0),E.forEach((D,L)=>S[L]^=Nt.reedSolomonMultiply(D,_))}return S}static reedSolomonMultiply(w,E){if(w>>>8||E>>>8)throw new RangeError("Byte out of range");let S=0;for(let I=7;I>=0;I--)S=S<<1^(S>>>7)*285,S^=(E>>>I&1)*w;return p(S>>>8==0),S}finderPenaltyCountPatterns(w){const E=w[1];p(E<=this.size*3);const S=E>0&&w[2]==E&&w[3]==E*3&&w[4]==E&&w[5]==E;return(S&&w[0]>=E*4&&w[6]>=E?1:0)+(S&&w[6]>=E*4&&w[0]>=E?1:0)}finderPenaltyTerminateAndCount(w,E,S){return w&&(this.finderPenaltyAddHistory(E,S),E=0),E+=this.size,this.finderPenaltyAddHistory(E,S),this.finderPenaltyCountPatterns(S)}finderPenaltyAddHistory(w,E){E[0]==0&&(w+=this.size),E.pop(),E.unshift(w)}};o.MIN_VERSION=1,o.MAX_VERSION=40,o.PENALTY_N1=3,o.PENALTY_N2=3,o.PENALTY_N3=40,o.PENALTY_N4=10,o.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],o.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],r.QrCode=o;function a(b,w,E){if(w<0||w>31||b>>>w)throw new RangeError("Value out of range");for(let S=w-1;S>=0;S--)E.push(b>>>S&1)}function f(b,w){return(b>>>w&1)!=0}function p(b){if(!b)throw new Error("Assertion error")}const x=class gn{constructor(w,E,S){if(this.mode=w,this.numChars=E,this.bitData=S,E<0)throw new RangeError("Invalid argument");this.bitData=S.slice()}static makeBytes(w){let E=[];for(const S of w)a(S,8,E);return new gn(gn.Mode.BYTE,w.length,E)}static makeNumeric(w){if(!gn.isNumeric(w))throw new RangeError("String contains non-numeric characters");let E=[];for(let S=0;S<w.length;){const I=Math.min(w.length-S,3);a(parseInt(w.substring(S,S+I),10),I*3+1,E),S+=I}return new gn(gn.Mode.NUMERIC,w.length,E)}static makeAlphanumeric(w){if(!gn.isAlphanumeric(w))throw new RangeError("String contains unencodable characters in alphanumeric mode");let E=[],S;for(S=0;S+2<=w.length;S+=2){let I=gn.ALPHANUMERIC_CHARSET.indexOf(w.charAt(S))*45;I+=gn.ALPHANUMERIC_CHARSET.indexOf(w.charAt(S+1)),a(I,11,E)}return S<w.length&&a(gn.ALPHANUMERIC_CHARSET.indexOf(w.charAt(S)),6,E),new gn(gn.Mode.ALPHANUMERIC,w.length,E)}static makeSegments(w){return w==""?[]:gn.isNumeric(w)?[gn.makeNumeric(w)]:gn.isAlphanumeric(w)?[gn.makeAlphanumeric(w)]:[gn.makeBytes(gn.toUtf8ByteArray(w))]}static makeEci(w){let E=[];if(w<0)throw new RangeError("ECI assignment value out of range");if(w<128)a(w,8,E);else if(w<16384)a(2,2,E),a(w,14,E);else if(w<1e6)a(6,3,E),a(w,21,E);else throw new RangeError("ECI assignment value out of range");return new gn(gn.Mode.ECI,0,E)}static isNumeric(w){return gn.NUMERIC_REGEX.test(w)}static isAlphanumeric(w){return gn.ALPHANUMERIC_REGEX.test(w)}getData(){return this.bitData.slice()}static getTotalBits(w,E){let S=0;for(const I of w){const _=I.mode.numCharCountBits(E);if(I.numChars>=1<<_)return 1/0;S+=4+_+I.bitData.length}return S}static toUtf8ByteArray(w){w=encodeURI(w);let E=[];for(let S=0;S<w.length;S++)w.charAt(S)!="%"?E.push(w.charCodeAt(S)):(E.push(parseInt(w.substring(S+1,S+3),16)),S+=2);return E}};x.NUMERIC_REGEX=/^[0-9]*$/,x.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,x.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let y=x;r.QrSegment=x})(Js||(Js={}));(r=>{(o=>{const a=class{constructor(p,x){this.ordinal=p,this.formatBits=x}};a.LOW=new a(0,1),a.MEDIUM=new a(1,0),a.QUARTILE=new a(2,3),a.HIGH=new a(3,2),o.Ecc=a})(r.QrCode||(r.QrCode={}))})(Js||(Js={}));(r=>{(o=>{const a=class{constructor(p,x){this.modeBits=p,this.numBitsCharCount=x}numCharCountBits(p){return this.numBitsCharCount[Math.floor((p+7)/17)]}};a.NUMERIC=new a(1,[10,12,14]),a.ALPHANUMERIC=new a(2,[9,11,13]),a.BYTE=new a(4,[8,16,16]),a.KANJI=new a(8,[8,10,12]),a.ECI=new a(7,[0,0,0]),o.Mode=a})(r.QrSegment||(r.QrSegment={}))})(Js||(Js={}));var Oo=Js;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var GE={L:Oo.QrCode.Ecc.LOW,M:Oo.QrCode.Ecc.MEDIUM,Q:Oo.QrCode.Ecc.QUARTILE,H:Oo.QrCode.Ecc.HIGH},Fm=128,jm="L",Vm="#FFFFFF",zm="#000000",Um=!1,Wm=1,XE=4,YE=0,KE=.1;function Hm(r,o=0){const a=[];return r.forEach(function(f,p){let x=null;f.forEach(function(y,b){if(!y&&x!==null){a.push(`M${x+o} ${p+o}h${b-x}v1H${x+o}z`),x=null;return}if(b===f.length-1){if(!y)return;x===null?a.push(`M${b+o},${p+o} h1v1H${b+o}z`):a.push(`M${x+o},${p+o} h${b+1-x}v1H${x+o}z`);return}y&&x===null&&(x=b)})}),a.join("")}function Gm(r,o){return r.slice().map((a,f)=>f<o.y||f>=o.y+o.h?a:a.map((p,x)=>x<o.x||x>=o.x+o.w?p:!1))}function $E(r,o,a,f){if(f==null)return null;const p=r.length+a*2,x=Math.floor(o*KE),y=p/o,b=(f.width||x)*y,w=(f.height||x)*y,E=f.x==null?r.length/2-b/2:f.x*y,S=f.y==null?r.length/2-w/2:f.y*y,I=f.opacity==null?1:f.opacity;let _=null;if(f.excavate){let L=Math.floor(E),B=Math.floor(S),F=Math.ceil(b+E-L),j=Math.ceil(w+S-B);_={x:L,y:B,w:F,h:j}}const D=f.crossOrigin;return{x:E,y:S,h:w,w:b,excavation:_,opacity:I,crossOrigin:D}}function ZE(r,o){return o!=null?Math.max(Math.floor(o),0):r?XE:YE}function Xm({value:r,level:o,minVersion:a,includeMargin:f,marginSize:p,imageSettings:x,size:y,boostLevel:b}){let w=en.useMemo(()=>{const L=(Array.isArray(r)?r:[r]).reduce((B,F)=>(B.push(...Oo.QrSegment.makeSegments(F)),B),[]);return Oo.QrCode.encodeSegments(L,GE[o],a,void 0,void 0,b)},[r,o,a,b]);const{cells:E,margin:S,numCells:I,calculatedImageSettings:_}=en.useMemo(()=>{let D=w.getModules();const L=ZE(f,p),B=D.length+L*2,F=$E(D,y,L,x);return{cells:D,margin:L,numCells:B,calculatedImageSettings:F}},[w,y,x,f,p]);return{qrcode:w,margin:S,cells:E,numCells:I,calculatedImageSettings:_}}var qE=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),QE=en.forwardRef(function(o,a){const f=o,{value:p,size:x=Fm,level:y=jm,bgColor:b=Vm,fgColor:w=zm,includeMargin:E=Um,minVersion:S=Wm,boostLevel:I,marginSize:_,imageSettings:D}=f,B=Qd(f,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:F}=B,j=Qd(B,["style"]),W=D==null?void 0:D.src,z=en.useRef(null),J=en.useRef(null),ne=en.useCallback(Fe=>{z.current=Fe,typeof a=="function"?a(Fe):a&&(a.current=Fe)},[a]),[de,q]=en.useState(!1),{margin:ce,cells:Z,numCells:Ae,calculatedImageSettings:ke}=Xm({value:p,level:y,minVersion:S,boostLevel:I,includeMargin:E,marginSize:_,imageSettings:D,size:x});en.useEffect(()=>{if(z.current!=null){const Fe=z.current,ee=Fe.getContext("2d");if(!ee)return;let He=Z;const xe=J.current,he=ke!=null&&xe!==null&&xe.complete&&xe.naturalHeight!==0&&xe.naturalWidth!==0;he&&ke.excavation!=null&&(He=Gm(Z,ke.excavation));const Le=window.devicePixelRatio||1;Fe.height=Fe.width=x*Le;const fe=x/Ae*Le;ee.scale(fe,fe),ee.fillStyle=b,ee.fillRect(0,0,Ae,Ae),ee.fillStyle=w,qE?ee.fill(new Path2D(Hm(He,ce))):Z.forEach(function(K,H){K.forEach(function(pe,Oe){pe&&ee.fillRect(Oe+ce,H+ce,1,1)})}),ke&&(ee.globalAlpha=ke.opacity),he&&ee.drawImage(xe,ke.x+ce,ke.y+ce,ke.w,ke.h)}}),en.useEffect(()=>{q(!1)},[W]);const Ie=qd({height:x,width:x},F);let Pe=null;return W!=null&&(Pe=en.createElement("img",{src:W,key:W,style:{display:"none"},onLoad:()=>{q(!0)},ref:J,crossOrigin:ke==null?void 0:ke.crossOrigin})),en.createElement(en.Fragment,null,en.createElement("canvas",qd({style:Ie,height:x,width:x,ref:ne,role:"img"},j)),Pe)});QE.displayName="QRCodeCanvas";var $f=en.forwardRef(function(o,a){const f=o,{value:p,size:x=Fm,level:y=jm,bgColor:b=Vm,fgColor:w=zm,includeMargin:E=Um,minVersion:S=Wm,boostLevel:I,title:_,marginSize:D,imageSettings:L}=f,B=Qd(f,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:F,cells:j,numCells:W,calculatedImageSettings:z}=Xm({value:p,level:y,minVersion:S,boostLevel:I,includeMargin:E,marginSize:D,imageSettings:L,size:x});let J=j,ne=null;L!=null&&z!=null&&(z.excavation!=null&&(J=Gm(j,z.excavation)),ne=en.createElement("image",{href:L.src,height:z.h,width:z.w,x:z.x+F,y:z.y+F,preserveAspectRatio:"none",opacity:z.opacity,crossOrigin:z.crossOrigin}));const de=Hm(J,F);return en.createElement("svg",qd({height:x,width:x,viewBox:`0 0 ${W} ${W}`,ref:a,role:"img"},B),!!_&&en.createElement("title",null,_),en.createElement("path",{fill:b,d:`M0,0 h${W}v${W}H0z`,shapeRendering:"crispEdges"}),en.createElement("path",{fill:w,d:de,shapeRendering:"crispEdges"}),ne)});$f.displayName="QRCodeSVG";const JE=({player:r})=>v.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"350px",height:"500px",margin:"0 auto",position:"relative"},children:r!=null&&r.image_data?v.jsxs("div",{style:{position:"relative",width:"350px",height:"450px"},children:[v.jsx("img",{src:`data:image/jpeg;base64,${r.image_data}`,alt:r.name,style:{width:"350px",height:"450px",objectFit:"cover",borderRadius:"50px",boxShadow:"0 6px 12px rgba(0, 0, 0, 0.3)",margin:"auto",display:"block"},onError:o=>{console.error("Image failed to load:",o),o.target.style.display="none"}}),v.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",backgroundColor:"#144dff",color:"white",padding:"12px 0",borderBottomLeftRadius:"50px",borderBottomRightRadius:"50px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",fontFamily:"Helvetica, Arial, sans-serif",boxShadow:"0 -4px 10px rgba(0, 0, 0, 0.1)",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.2)"},children:r.name})]}):v.jsxs("div",{style:{width:"350px",height:"450px",backgroundColor:"#f0f0f0",borderRadius:"50px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"relative"},children:[v.jsx("p",{style:{marginBottom:"60px"},children:"No image available"}),v.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",backgroundColor:"#144dff",color:"white",padding:"12px 0",borderBottomLeftRadius:"50px",borderBottomRightRadius:"50px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",fontFamily:"Helvetica, Arial, sans-serif",boxShadow:"0 -4px 10px rgba(0, 0, 0, 0.1)",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.2)"},children:r.name})]})});var Dp=typeof window>"u"?R.useEffect:R.useLayoutEffect,eA=({isPlaying:r,duration:o,startAt:a=0,updateInterval:f=0,onComplete:p,onUpdate:x})=>{let[y,b]=R.useState(a),w=R.useRef(0),E=R.useRef(a),S=R.useRef(a*-1e3),I=R.useRef(null),_=R.useRef(null),D=R.useRef(null),L=j=>{let W=j/1e3;if(_.current===null){_.current=W,I.current=requestAnimationFrame(L);return}let z=W-_.current,J=w.current+z;_.current=W,w.current=J;let ne=E.current+(f===0?J:(J/f|0)*f),de=E.current+J,q=typeof o=="number"&&de>=o;b(q?o:ne),q||(I.current=requestAnimationFrame(L))},B=()=>{I.current&&cancelAnimationFrame(I.current),D.current&&clearTimeout(D.current),_.current=null},F=R.useCallback(j=>{B(),w.current=0;let W=typeof j=="number"?j:a;E.current=W,b(W),r&&(I.current=requestAnimationFrame(L))},[r,a]);return Dp(()=>{if(x==null||x(y),o&&y>=o){S.current+=o*1e3;let{shouldRepeat:j=!1,delay:W=0,newStartAt:z}=(p==null?void 0:p(S.current/1e3))||{};j&&(D.current=setTimeout(()=>F(z),W*1e3))}},[y,o]),Dp(()=>(r&&(I.current=requestAnimationFrame(L)),B),[r,o,f]),{elapsedTime:y,reset:F}},tA=(r,o,a)=>{let f=r/2,p=o/2,x=f-p,y=2*x,b=a==="clockwise"?"1,0":"0,1",w=2*Math.PI*x;return{path:`m ${f},${p} a ${x},${x} 0 ${b} 0,${y} a ${x},${x} 0 ${b} 0,-${y}`,pathLength:w}},Mp=(r,o)=>r===0||r===o?0:typeof o=="number"?r-o:0,nA=r=>({position:"relative",width:r,height:r}),rA={display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,top:0,width:"100%",height:"100%"},Ym=(r,o,a,f,p)=>{if(f===0)return o;let x=(p?f-r:r)/f;return o+a*x},Lp=r=>{var o,a;return(a=(o=r.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(f,p,x,y)=>`#${p}${p}${x}${x}${y}${y}`).substring(1).match(/.{2}/g))==null?void 0:o.map(f=>parseInt(f,16)))!=null?a:[]},iA=(r,o)=>{var a;let{colors:f,colorsTime:p,isSmoothColorTransition:x=!0}=r;if(typeof f=="string")return f;let y=(a=p==null?void 0:p.findIndex((_,D)=>_>=o&&o>=p[D+1]))!=null?a:-1;if(!p||y===-1)return f[0];if(!x)return f[y];let b=p[y]-o,w=p[y]-p[y+1],E=Lp(f[y]),S=Lp(f[y+1]),I=!!r.isGrowing;return`rgb(${E.map((_,D)=>Ym(b,_,S[D]-_,w,I)|0).join(",")})`},sA=r=>{let{duration:o,initialRemainingTime:a,updateInterval:f,size:p=180,strokeWidth:x=12,trailStrokeWidth:y,isPlaying:b=!1,isGrowing:w=!1,rotation:E="clockwise",onComplete:S,onUpdate:I}=r,_=R.useRef(),D=Math.max(x,y??0),{path:L,pathLength:B}=tA(p,D,E),{elapsedTime:F}=eA({isPlaying:b,duration:o,startAt:Mp(o,a),updateInterval:f,onUpdate:typeof I=="function"?W=>{let z=Math.ceil(o-W);z!==_.current&&(_.current=z,I(z))}:void 0,onComplete:typeof S=="function"?W=>{var z;let{shouldRepeat:J,delay:ne,newInitialRemainingTime:de}=(z=S(W))!=null?z:{};if(J)return{shouldRepeat:J,delay:ne,newStartAt:Mp(o,de)}}:void 0}),j=o-F;return{elapsedTime:F,path:L,pathLength:B,remainingTime:Math.ceil(j),rotation:E,size:p,stroke:iA(r,j),strokeDashoffset:Ym(F,0,B,o,w),strokeWidth:x}},Zf=r=>{let{children:o,strokeLinecap:a,trailColor:f,trailStrokeWidth:p}=r,{path:x,pathLength:y,stroke:b,strokeDashoffset:w,remainingTime:E,elapsedTime:S,size:I,strokeWidth:_}=sA(r);return en.createElement("div",{style:nA(I)},en.createElement("svg",{viewBox:`0 0 ${I} ${I}`,width:I,height:I,xmlns:"http://www.w3.org/2000/svg"},en.createElement("path",{d:x,fill:"none",stroke:f??"#d9d9d9",strokeWidth:p??_}),en.createElement("path",{d:x,fill:"none",stroke:b,strokeLinecap:a??"round",strokeWidth:_,strokeDasharray:y,strokeDashoffset:w})),typeof o=="function"&&en.createElement("div",{style:rA},o({remainingTime:E,elapsedTime:S,color:b})))};Zf.displayName="CountdownCircleTimer";const oA=({onComplete:r})=>{const[o,a]=R.useState(7),[f,p]=R.useState(!1),x=R.useRef(null),y=R.useRef(null);R.useEffect(()=>(x.current&&clearTimeout(x.current),y.current&&clearInterval(y.current),y.current=setInterval(()=>{p(!0),x.current=setTimeout(()=>{a(w=>w<=1?(y.current&&clearInterval(y.current),x.current&&clearTimeout(x.current),r&&r(),0):w-1),p(!1)},500)},1e3),()=>{y.current&&clearInterval(y.current),x.current&&clearTimeout(x.current)}),[r]);const b=f?"pop-burst":"";return v.jsx("div",{className:"lobby-countdown-overlay",children:v.jsxs("div",{className:`lobby-countdown-container ${b}`,children:[v.jsx("div",{className:"lobby-countdown-number",children:o}),v.jsx("div",{className:"lobby-countdown-text",children:o>0?"Get ready!":"Starting..."})]})})},aA=({onComplete:r,lobbyCode:o="this"})=>{const{userProfile:a}=R.useContext(gr),[f,p]=R.useState(0),[x,y]=R.useState(!1),[b,w]=R.useState(!1),[E,S]=R.useState([0]),[I,_]=R.useState(!1),D=R.useRef(null),L=R.useRef(null),B=[{image:"/assets/how_to_tutorial_updated_slide1.svg",duration:2e3,animatedText:"Find your match using their profile picture!"},{image:"/assets/how_to_pt2_2.svg",duration:4e3,animatedText:"Raise volume to the max, to know when you have a match!"},{image:"/assets/how_to_tutorial_updated_slide3.svg",duration:4e3,animatedText:"Tap leave to stop being paired/take a break"}];return R.useEffect(()=>{const F=()=>{if(f>=B.length-1){clearInterval(D.current),r&&r();return}y(!0);const j=f+1;S([f,j]),L.current=setTimeout(()=>{_(!1),p(j),y(!1),setTimeout(()=>{S([j]),w(!0),B[j].animatedText&&_(!0)},500)},500)};return D.current=setInterval(F,B[f].duration),w(!0),f===0&&B[0].animatedText&&_(!0),()=>{D.current&&clearInterval(D.current),L.current&&clearTimeout(L.current)}},[f,B.length,r]),v.jsx("div",{className:"tutorial-overlay",children:v.jsxs("div",{className:"tutorial-container",children:[E.map(F=>v.jsxs("div",{className:`tutorial-slide ${F===f?"current":F<f?"previous":"next"}`,children:[F===f&&B[F].animatedText&&I&&v.jsx("div",{className:"animated-text pop-burst",children:B[F].animatedText}),F===1&&v.jsx("div",{className:"volume-arrow-container",children:v.jsx("svg",{className:"volume-arrow",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{d:"M19 12H5M5 12L12 5M5 12L12 19",stroke:"#144dff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),v.jsx("div",{className:`tutorial-image-container ${F===0?"first-slide":""}`,children:v.jsx("img",{src:B[F].image,alt:`Tutorial step ${F+1}`,className:"tutorial-image"})}),v.jsx("div",{className:`tutorial-text ${b&&F===f?"text-animate":""}`,children:B[F].text})]},F)),v.jsx("div",{className:"tutorial-progress-bar-container",children:v.jsx("div",{className:"tutorial-progress-bar",children:v.jsx("div",{className:"tutorial-progress-bar-fill"})})})]})})},lA=({isVisible:r,onAnimationEnd:o})=>{const[a,f]=R.useState(!1),p=R.useRef(null);return R.useEffect(()=>(p.current&&clearTimeout(p.current),r?(f(!0),p.current=setTimeout(()=>{f(!1),o&&o()},3e3)):f(!1),()=>{p.current&&(clearTimeout(p.current),p.current=null)}),[r,o]),a?v.jsxs("div",{className:"match-overlay",children:[v.jsxs("div",{className:"confetti-container",children:[[...Array(50)].map((x,y)=>v.jsx("div",{className:`confetti confetti-${y%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":Math.random()*.2}},`first-${y}`)),[...Array(50)].map((x,y)=>v.jsx("div",{className:`confetti confetti-${y%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":`${.6+Math.random()*.2}s`}},`second-${y}`))]}),v.jsx("div",{className:"match-text",children:"It's a Match!"})]}):null},cA=({isVisible:r,onAnimationEnd:o})=>{const[a,f]=R.useState(!1),p=R.useRef(null);return R.useEffect(()=>(p.current&&clearTimeout(p.current),r?(f(!0),p.current=setTimeout(()=>{f(!1),o&&o()},1800)):f(!1),()=>{p.current&&(clearTimeout(p.current),p.current=null)}),[r,o]),a?v.jsxs("div",{className:"ready-overlay",children:[v.jsxs("div",{className:"confetti-container",children:[[...Array(50)].map((x,y)=>v.jsx("div",{className:`confetti confetti-${y%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":Math.random()*.2}},`first-${y}`)),[...Array(50)].map((x,y)=>v.jsx("div",{className:`confetti confetti-${y%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":`${.6+Math.random()*.2}s`}},`second-${y}`))]}),v.jsx("div",{className:"ready-text",children:"You're ready!"})]}):null},ac=9,uA=5,dA=5e3,fA=!1,hA=()=>{const r=Math.floor(540),[o,a]=R.useState([]),[f,p]=R.useState("self"),[x,y]=R.useState(!1),[b,w]=R.useState(""),E=R.useRef(null),S=R.useRef(null),[I,_]=R.useState(!1),D=R.useRef(!1),[L,B]=R.useState(!1),{loadSound:F,seekTo:j,cancelSound:W,checkSound:z,soundEnabled:J,setSoundEnabled:ne,isPlaying:de}=tg(),[q,ce]=R.useState("yonder"),Z=ar(),{code:Ae}=Q2(),[ke,Ie]=R.useState(null);Mm(Ie,null,q);const{user:Pe,userProfile:Fe,checkAuth:ee,permissions:He}=R.useContext(gr);R.useEffect(()=>{(async()=>{if(localStorage.getItem("access_token"))try{Pe||await ee()}catch(Je){console.error("Authentication error:",Je);const Be=new URLSearchParams(window.location.search).get("code")||Ae;Z(Be?`/signup?redirect=lobby&code=${Be}`:"/signup?redirect=lobby")}else{await fetch(window.server_url+"/debug?username="+Pe+"&message=no token on the lobby page",{method:"GET"});const Et=new URLSearchParams(window.location.search).get("code")||Ae;Z(Et?`/signup?redirect=lobby&code=${Et}`:"/signup?redirect=lobby")}})()},[Z,Ae,ee,Pe]),R.useEffect(()=>{(()=>{const Je=new URLSearchParams(window.location.search).get("code")||Ae;if(Je){ce(Je),ME(Je),at(Je);const Et=`hasSeenTutorial_${Je}`,Be=localStorage.getItem(Et),Wn=!!localStorage.getItem("access_token");console.log("Tutorial check:",{codeParam:Je,lobbyTutorialKey:Et,hasSeenLobbyTutorial:Be,isAuthenticated:Wn}),!Be&&Wn&&(Kr(!0),localStorage.setItem(Et,"true"))}})()},[Ae]);const[xe,he]=R.useState(null),[Le,fe]=R.useState(null),[K,H]=R.useState(null),[pe,Oe]=R.useState(null),[we,oe]=R.useState(null),Me=R.useRef(!1),Ne=R.useRef(null),Ve=R.useRef(null),[me,Xe]=R.useState(null),[ut,De]=R.useState(null),[it,zt]=R.useState(null),[jt,Pt]=R.useState(null),[vt,pt]=R.useState(!0),xn=R.useRef(0),[_e,zn]=R.useState(null),[Ct,Ye]=R.useState(null),[et,gt]=R.useState([]),[Ut,kt]=R.useState([]),[At,nn]=R.useState(!document.hidden),Ht=R.useRef("yonder"),un=R.useRef({}),je=R.useRef([]),[ge,lt]=R.useState(!1),st=R.useRef(null),[_t,Dn]=R.useState(!1);R.useEffect(()=>{Ht.current=q},[q]);async function Dr(Ue,mt){const Je=localStorage.getItem("access_token"),Be=await(await fetch(window.server_url+"/set_profile_info",{method:"POST",headers:{Authorization:`Bearer ${Je}`,"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},mode:"cors",body:JSON.stringify({tags_work:Ue,tags_desiring_work:mt})})).json();console.log("SET PROFILE INFO:",Be)}const Un=async Ue=>{if(Ue.length!==0){lt(!0);try{const mt=localStorage.getItem("access_token"),Je=await fetch(`${window.server_url}/load_batch_pfp_small_icons`,{method:"POST",headers:{Authorization:`Bearer ${mt}`,"Content-Type":"application/json",lobby_code:Ht.current},body:JSON.stringify({usernames:Ue})});if(Je.ok){const Et=await Je.json();un.current={...un.current,...Et},console.log("Profile images fetched:",Object.keys(Et))}else console.error("Failed to fetch profile images:",Je.status)}catch(mt){console.error("Error fetching profile images:",mt)}finally{lt(!1)}}},at=async Ue=>{try{const mt=await fetch(`${window.server_url}/lobby_setup_data`,{headers:{lobby_code:Ue}});if(mt.ok){const Je=await mt.json();Je.logo_icon?(st.current=Je.logo_icon,Dn(!0),console.log("Sponsor logo loaded successfully")):console.log("No sponsor logo available for this lobby")}else console.error("Failed to fetch lobby setup data:",mt.status)}catch(mt){console.error("Error fetching lobby setup data:",mt)}};async function Mn(){try{const Ue=localStorage.getItem("access_token");W(),un.current={},je.current=[],(await fetch(window.server_url+"/disconnect_lobby",{headers:{Authorization:`Bearer ${Ue}`,lobby_code:q}})).ok&&Z("/")}catch(Ue){console.error("Error disconnecting from lobby:",Ue),Z("/")}finally{W(),Z("/"),console.log("finally")}}const[As,Ui]=R.useState(!1),[qn,Wi]=R.useState(null),rn=R.useRef(!1),[Mr,si]=R.useState(!1),[An,Hi]=R.useState(null),lr=(Ue,mt)=>{if(!Ue||!mt)return null;for(const Je of Ue.tags_work)if(mt.desiring_tags_work.includes(Je)){for(const Et of mt.tags_work)if(Ue.desiring_tags_work.includes(Et))return{playerTag:Je,opponentTag:Et}}return null};async function oi(){try{xn.current+=1,xn.current>5&&(xn.current=0,Me.current=!1);const Ue=localStorage.getItem("access_token"),mt=!document.hidden,Je=Ht.current;if(console.log("lobby code fr:",Je),Je=="yonder"){console.log("lobby code is not set");return}const Et=await fetch(`${window.server_url}/lobby?is_visible=${mt}`,{headers:{Authorization:`Bearer ${Ue}`,is_visible_t_f:mt?"t":"f",lobby_code:Je}});if(Et.ok){const Be=await Et.json();console.log("LOBBY PAIR DATA:",Je,Be),Be.status=="inactive"&&(W(),Z("/")),H(Be.opponent_name),Be.opponent_name==null&&he(null),a(Be.custom_tags),Xe(Be.lobby_state),Pt(Be.lobby_duration);const Wn=typeof Be.round_time_left=="number"&&!isNaN(Be.round_time_left)?Be.round_time_left:0;console.log("Timer Debug:",{roundDuration:Be.lobby_duration,timeLeft:Wn,lobbyState:Be.lobby_state,usingDefaultDuration:!Be.lobby_duration}),Ne.current=Wn,Ve.current=Be.beat_go_off,De(Math.floor(Wn));const Lt=Math.floor(Wn/60),bs=Math.floor(Wn%60);zt(`${Lt}:${bs.toString().padStart(2,"0")}`),oe(Be.table_number),Be.player_tags!=null&&Be.player_tags.tags_work!=null&&gt(Be.player_tags.tags_work),Be.player_tags!=null&&Be.player_tags.desiring_tags_work!=null&&kt(Be.player_tags.desiring_tags_work),Ne.current!=null&&Be.lobby_state=="active"&&Ne.current!=0&&(j(r-Ne.current),console.log("seeking to",r-Ne.current));const ye=await fetch(`${window.server_url}/display_lobby_metadata?lobby_code=${Je}`,{headers:{Authorization:`Bearer ${Ue}`,lobby_code:Je}});if(ye.ok){const mr=await ye.json();Ie(mr.player_count);const Ot=mr.usernames||[];if(JSON.stringify(je.current)!==JSON.stringify(Ot)){je.current=Ot;const Xi=Ot.filter(St=>!un.current[St]&&St!==(Pe==null?void 0:Pe.username));Xi.length>0&&(fA||(console.log("Fetching images for new users:",Xi),Un(Xi)))}}if((K!=Be.opponent_name||xe==null)&&!Me.current&&Be.opponent_name!=null){Me.current=!0,console.log("fetching profile");const mr=await fetch(window.server_url+"/paired_player_profile",{headers:{Authorization:`Bearer ${Ue}`}});if(mr.ok){const Ot=await mr.json();he(Ot),console.log("profile fetched:",Ot.name)}else console.log("profile fetch failed");Me.current=!1}if(qn==="interrim"&&Be.lobby_state==="active"&&Be.opponent_name&&!rn.current){console.log("Checking for matches...");const mr=lr(Be.player_tags,Be.opponent_tags);mr&&(console.log("Match found! Setting animation and banner...",mr),Hi(mr),si(!0),rn.current=!0,Ui(!0))}Wi(Be.lobby_state)}}catch(Ue){console.error("Error fetching lobby data:",Ue)}}R.useEffect(()=>{z()?ne(!0):ne(!1);const Ue=setInterval(async()=>{oi()},dA);return()=>clearInterval(Ue)},[]),R.useEffect(()=>{const Ue=setTimeout(oi,1e3);return()=>clearTimeout(Ue)},[me,q]),R.useEffect(()=>{const Ue=()=>{const mt=!document.hidden;mt&&!At&&(console.log("Page became visible - fetching latest data"),oi()),nn(mt)};return document.addEventListener("visibilitychange",Ue),()=>{document.removeEventListener("visibilitychange",Ue)}},[At]);const dn=()=>v.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.125)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},children:v.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",position:"relative",minWidth:"300px"},children:[v.jsx("button",{onClick:()=>pt(!1),style:{color:"#144fff",position:"absolute",right:"10px",top:"10px",border:"none",background:"none",fontSize:"2px",cursor:"pointer"},children:"X"}),v.jsx("h2",{style:{marginTop:"5px"},children:"The Sound is Important"}),v.jsx("h3",{style:{marginTop:"5px"},children:"Raise your volume also"}),v.jsx("p",{style:{color:"#144dff"},children:"You'll need this for the best experience."}),v.jsx("button",{onClick:()=>{F(),pt(!1)},style:{padding:"10px 20px",marginTop:"20px",backgroundColor:"#144dff",color:"#ffffff",border:"none",borderRadius:"14px",fontWeight:"bold",cursor:"pointer"},children:"Enable Sound"})]})}),cr=(Ue,mt)=>{_e==null&&zn(et),Ct==null&&Ye(Ut);const Je=Ue==="self"?_e:Ct;if(!(Je!=null&&Je.includes(mt))&&(Je==null?void 0:Je.length)>=uA){w("Reached tag limit for this section"),setTimeout(()=>{var Be;(Be=S.current)==null||Be.scrollIntoView({behavior:"smooth",block:"center"})},100),setTimeout(()=>{w("")},3e3);return}Ue==="self"?zn(Be=>Be.includes(mt)?Be.filter(Wn=>Wn!==mt):[...Be,mt]):Ye(Be=>Be.includes(mt)?Be.filter(Wn=>Wn!==mt):[...Be,mt])},Tn=()=>{_e!=null&&(Dr(_e,Ct||[]),setTimeout(()=>{gt(_e||[])},800)),p("desiring"),setTimeout(()=>{var Ue;(Ue=E.current)==null||Ue.scrollIntoView({behavior:"smooth",block:"start"})},100)},ze=()=>{Ct!=null&&(Dr(_e||[],Ct),setTimeout(()=>{gt(_e||[]),kt(Ct)},800),setTimeout(()=>{D.current||(D.current=!0,_(!0),B(!0))},500)),window.scrollTo({top:0,behavior:"smooth"})},[ai,Gi]=R.useState(!1);R.useEffect(()=>{if(me==="interrim")Gi(!0);else if(me==="active"){const Ue=setTimeout(()=>{Gi(!1)},1e3);return()=>clearTimeout(Ue)}},[me]);const Ln=()=>{console.log("Lobby countdown animation completed")},[Qn,Kr]=R.useState(!1),Ci=()=>{Kr(!1)};R.useEffect(()=>{(me!=="active"||!xe)&&(si(!1),Hi(null))},[me,xe]),R.useEffect(()=>{me==="terminated"&&(un.current={},je.current=[],Ac())},[me]);const Jn=R.useRef(null);return R.useEffect(()=>{var Ue;!x&&!(et!=null&&et.length)&&!(Ut!=null&&Ut.length)&&(o==null?void 0:o.length)>0&&((Ue=Jn.current)==null||Ue.scrollIntoView({behavior:"smooth"}),y(!0))},[et,Ut,o,x]),v.jsxs("div",{className:"lobby-container",children:[v.jsxs("div",{className:"lobby-content",children:[v.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0",marginTop:"-1.5rem"},children:v.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",style:{maxWidth:"85px",height:"auto",objectFit:"contain"}})}),(me==="checkin"||me==="active"&&!xe||me==="interrim")&&v.jsx("div",{className:"user-profile-container",children:v.jsxs("div",{className:"user-profile",children:[v.jsx("img",{src:Fe!=null&&Fe.image_data?`data:image/jpeg;base64,${Fe.image_data}`:"/assets/avatar_3.png",alt:"Your Profile",className:"user-profile-picture"}),v.jsx("div",{className:"user-profile-glow"})]})}),v.jsx("div",{className:"lobby-header",style:{marginTop:"-50px"},children:v.jsx("h2",{children:o.length>0&&(et.length==0||Ut.length==0)?v.jsxs(v.Fragment,{children:["You're not ready, complete your profile to get matched up.",v.jsx("button",{className:"missing-tags-button",onClick:()=>{var Ue;return(Ue=Jn.current)==null?void 0:Ue.scrollIntoView({behavior:"smooth"})},children:"Complete Profile"})]}):me==="active"&&xe?v.jsxs("span",{className:"lobby-pop-burst",children:["Go find ",xe.name,"!"]}):me==="checkin"?v.jsxs(v.Fragment,{children:["Wait here ",Fe.name.slice(0,15),".",v.jsx("br",{}),"Your host will start the experience."]}):me==="active"&&!xe?"You will be paired with someone in the next round.":me==="interrim"?"Get ready for the next round!":me==="terminated"?"This session has ended. Thank you for participating!":""})},me),me==="active"&&xe&&we&&v.jsx("div",{className:"table-number",children:v.jsxs("h3",{children:["at table: ",we]})}),(st.current||me!=="checkin")&&v.jsxs("div",{className:`timer-sponsor-container ${st.current&&me!=="checkin"?"has-timer":""}`,children:[st.current&&v.jsx("div",{className:"sponsor-logo",children:v.jsx("img",{src:`data:image/jpeg;base64,${st.current}`,alt:"Sponsor Logo",style:{width:"100px",height:"100px",objectFit:"contain"}})}),me!=="checkin"&&v.jsx("div",{className:"time-left",style:{display:"flex",flexDirection:"column",alignItems:"center",background:"white"},children:(me==="active"||me==="interrim")&&ut?v.jsxs(v.Fragment,{children:[v.jsx(Zf,{isPlaying:me==="active",duration:jt||300,initialRemainingTime:ut||0,colors:["#144dff"],size:90,strokeWidth:12,trailColor:"#f5f7ff",onComplete:()=>(oi(),{shouldRepeat:!1}),children:({remainingTime:Ue})=>{const mt=typeof Ue=="number"&&!isNaN(Ue)?Ue:0,Je=Math.floor(mt/60),Et=Math.floor(mt%60);return v.jsxs("span",{style:{fontSize:".95rem",color:"#144dff",fontWeight:600},children:[Je,":",String(Et).padStart(2,"0")]})}},`${me}-${ut}`),v.jsx("span",{style:{fontWeight:700,fontSize:"0.7em",marginTop:"4px",opacity:"1",color:"#144dff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.1)"},children:"round time left"})]}):v.jsx("span",{className:"time-left-text"})})]}),Mr&&An&&me==="active"&&xe&&v.jsxs("div",{className:"match-banner",children:[v.jsx("span",{className:"match-tag",children:An.playerTag}),v.jsx("div",{className:"match-arrow"}),v.jsx("span",{className:"match-tag",children:An.opponentTag})]}),v.jsx("div",{style:{display:"flex",justifyContent:"center",width:"100%",margin:"0 auto"},children:me==="active"||me==="interrim"?xe?v.jsx("div",{style:{marginTop:"-3rem",width:"100%",display:"flex",justifyContent:"center"},children:v.jsx(JE,{player:xe})}):v.jsx(v.Fragment,{}):me==="terminated"?v.jsx("div",{className:"status-message",children:v.jsxs("h2",{children:["This session has ended.",v.jsx("br",{}),"Thank you for participating!"]})}):null}),(me==="checkin"||me==="active"&&!xe)&&ke!==null&&v.jsx("div",{className:"player-count-container",children:v.jsxs("div",{className:"player-count-widget",children:[v.jsxs("div",{className:"player-count-icon",children:[v.jsx("div",{className:"icon-pulse"}),v.jsx("img",{src:"/assets/players_display_icon2.png",alt:"Players in lobby",className:"player-count-img"})]}),v.jsxs("div",{className:"player-count-info",children:[v.jsx("span",{className:"player-count-number",children:ke}),v.jsx("span",{className:"player-count-label",children:"joined"})]}),v.jsx("div",{className:"player-count-lobby",children:q})]})}),(me==="checkin"||me==="active"&&!xe)&&v.jsx("div",{className:"lobby-profiles-container",children:v.jsx("div",{className:"lobby-profiles-grid",children:ke>0?v.jsxs(v.Fragment,{children:[Array.from({length:Math.min(ke,ac)}).map((Ue,mt)=>{let Je;{const Be=je.current[mt];Be&&un.current[Be]?Je=`data:image/jpeg;base64,${un.current[Be]}`:Je="/assets/avatar_8.png"}return v.jsxs("div",{className:`profile-icon-wrapper ${mt===Math.min(ke,ac)-1?"pop-in":""}`,children:[v.jsx("img",{src:Je,alt:`Profile ${mt+1}`,className:"profile-icon",loading:"lazy"}),v.jsx("div",{className:"profile-icon-glow"})]},`profile-${mt}`)}),ke>ac&&v.jsx("div",{className:"profile-icon-wrapper more-profiles",children:v.jsxs("div",{className:"more-profiles-bubble",children:["+",ke-ac]})})]}):v.jsx("div",{children:"No profiles to display"})})}),(me==="checkin"||me==="active")&&v.jsxs("div",{className:"selected-tags-container",children:[et&&et.length>0&&v.jsxs("div",{className:"tag-category",children:[v.jsx("h4",{children:"I am:"}),v.jsx("div",{className:"tag-list",children:et.map(Ue=>v.jsx("span",{className:"tag-item",children:Ue},`self-${Ue}`))})]}),Ut&&Ut.length>0&&v.jsxs("div",{className:"tag-category",children:[v.jsx("h4",{children:"Looking for:"}),v.jsx("div",{className:"tag-list",children:Ut.map(Ue=>v.jsx("span",{className:"tag-item",children:Ue},`desiring-${Ue}`))})]})]}),v.jsx("button",{className:"leave-lobby-button",onClick:Mn,children:"Leave"}),v.jsx("button",{className:"how-to-tutorial-button",onClick:()=>Kr(!0),children:"Tutorial"}),(He==="admin"||He==="organizer")&&v.jsx("button",{className:"admin-view-button",onClick:()=>Z(`/admin_lobby_view?code=${q}`),children:"Manage"}),Array.isArray(o)&&o.length>0&&v.jsx("form",{onSubmit:Ue=>{Ue.preventDefault(),f==="self"?Tn():ze()},children:v.jsxs("div",{className:"tags-section",ref:Jn,children:[v.jsxs("div",{className:"progress-bar-container",children:[v.jsx("div",{className:`self-progress-bar-tab ${f==="self"?"active":""} ${et.length>0?"complete":""}`,onClick:()=>p("self"),children:" Who are you?"}),v.jsx("div",{className:`desiring-progress-bar-tab ${f==="desiring"?"active":""} ${Ut.length>0?"complete":""}`,onClick:()=>et.length>0?p("desiring"):null,children:" Who do you want to meet?"})]}),v.jsxs("div",{className:`tag-group ${f==="self"?"active":"hidden"}`,children:[v.jsx("div",{className:"bounce-wrapper",children:v.jsx("h2",{children:"Who are you?"})}),v.jsx("div",{className:"tag-labels-container",children:o.map(Ue=>v.jsxs("label",{className:"tag-label",children:[v.jsx("input",{type:"checkbox",checked:_e!=null?_e.includes(Ue):et.includes(Ue),onChange:()=>cr("self",Ue)}),Ue]},`self-${Ue}`))})]}),v.jsxs("div",{className:`tag-group ${f==="desiring"?"active":"hidden"}`,ref:E,children:[v.jsx("div",{className:"bounce-wrapper",children:v.jsx("h2",{children:"Who do you want to meet?"})}),v.jsx("div",{className:"tag-labels-container",children:o.map(Ue=>v.jsxs("label",{className:"tag-label",children:[v.jsx("input",{type:"checkbox",checked:Ct!=null?Ct.includes(Ue):Ut.includes(Ue),onChange:()=>cr("desiring",Ue)}),Ue]},`desiring-${Ue}`))})]}),v.jsx("button",{type:"submit",className:"tag-selection-button",ref:S,children:f==="self"?"Continue":"Save"}),b&&v.jsx("div",{style:{color:"#144dff",textAlign:"center",marginTop:"1rem",fontSize:"0.9rem",fontWeight:"600"},children:b})]})})]}),J||!vt||me=="checkin"||me==null||de?null:v.jsx(dn,{}),ai&&!(o.length>0&&Ut.length===0)&&v.jsx(oA,{onComplete:Ln}),Qn&&v.jsx(aA,{onComplete:Ci,lobbyCode:q}),v.jsx(lA,{isVisible:As,onAnimationEnd:()=>{Ui(!1),rn.current=!1}}),v.jsx(cA,{isVisible:I,onAnimationEnd:()=>{_(!1),D.current=!1}})]})};let pA={data:""},gA=r=>typeof window=="object"?((r?r.querySelector("#_goober"):window._goober)||Object.assign((r||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:r||pA,mA=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,xA=/\/\*[^]*?\*\/|  +/g,Bp=/\n+/g,xs=(r,o)=>{let a="",f="",p="";for(let x in r){let y=r[x];x[0]=="@"?x[1]=="i"?a=x+" "+y+";":f+=x[1]=="f"?xs(y,x):x+"{"+xs(y,x[1]=="k"?"":o)+"}":typeof y=="object"?f+=xs(y,o?o.replace(/([^,])+/g,b=>x.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,w=>/&/.test(w)?w.replace(/&/g,b):b?b+" "+w:w)):x):y!=null&&(x=/^--/.test(x)?x:x.replace(/[A-Z]/g,"-$&").toLowerCase(),p+=xs.p?xs.p(x,y):x+":"+y+";")}return a+(o&&p?o+"{"+p+"}":p)+f},Bi={},Km=r=>{if(typeof r=="object"){let o="";for(let a in r)o+=a+Km(r[a]);return o}return r},yA=(r,o,a,f,p)=>{let x=Km(r),y=Bi[x]||(Bi[x]=(w=>{let E=0,S=11;for(;E<w.length;)S=101*S+w.charCodeAt(E++)>>>0;return"go"+S})(x));if(!Bi[y]){let w=x!==r?r:(E=>{let S,I,_=[{}];for(;S=mA.exec(E.replace(xA,""));)S[4]?_.shift():S[3]?(I=S[3].replace(Bp," ").trim(),_.unshift(_[0][I]=_[0][I]||{})):_[0][S[1]]=S[2].replace(Bp," ").trim();return _[0]})(r);Bi[y]=xs(p?{["@keyframes "+y]:w}:w,a?"":"."+y)}let b=a&&Bi.g?Bi.g:null;return a&&(Bi.g=Bi[y]),((w,E,S,I)=>{I?E.data=E.data.replace(I,w):E.data.indexOf(w)===-1&&(E.data=S?w+E.data:E.data+w)})(Bi[y],o,f,b),y},wA=(r,o,a)=>r.reduce((f,p,x)=>{let y=o[x];if(y&&y.call){let b=y(a),w=b&&b.props&&b.props.className||/^go/.test(b)&&b;y=w?"."+w:b&&typeof b=="object"?b.props?"":xs(b,""):b===!1?"":b}return f+p+(y??"")},"");function Oc(r){let o=this||{},a=r.call?r(o.p):r;return yA(a.unshift?a.raw?wA(a,[].slice.call(arguments,1),o.p):a.reduce((f,p)=>Object.assign(f,p&&p.call?p(o.p):p),{}):a,gA(o.target),o.g,o.o,o.k)}let $m,Jd,ef;Oc.bind({g:1});let zi=Oc.bind({k:1});function vA(r,o,a,f){xs.p=o,$m=r,Jd=a,ef=f}function Es(r,o){let a=this||{};return function(){let f=arguments;function p(x,y){let b=Object.assign({},x),w=b.className||p.className;a.p=Object.assign({theme:Jd&&Jd()},b),a.o=/ *go\d+/.test(w),b.className=Oc.apply(a,f)+(w?" "+w:"");let E=r;return r[0]&&(E=b.as||r,delete b.as),ef&&E[0]&&ef(b),$m(E,b)}return p}}var CA=r=>typeof r=="function",Sc=(r,o)=>CA(r)?r(o):r,EA=(()=>{let r=0;return()=>(++r).toString()})(),Zm=(()=>{let r;return()=>{if(r===void 0&&typeof window<"u"){let o=matchMedia("(prefers-reduced-motion: reduce)");r=!o||o.matches}return r}})(),AA=20,qm=(r,o)=>{switch(o.type){case 0:return{...r,toasts:[o.toast,...r.toasts].slice(0,AA)};case 1:return{...r,toasts:r.toasts.map(x=>x.id===o.toast.id?{...x,...o.toast}:x)};case 2:let{toast:a}=o;return qm(r,{type:r.toasts.find(x=>x.id===a.id)?1:0,toast:a});case 3:let{toastId:f}=o;return{...r,toasts:r.toasts.map(x=>x.id===f||f===void 0?{...x,dismissed:!0,visible:!1}:x)};case 4:return o.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(x=>x.id!==o.toastId)};case 5:return{...r,pausedAt:o.time};case 6:let p=o.time-(r.pausedAt||0);return{...r,pausedAt:void 0,toasts:r.toasts.map(x=>({...x,pauseDuration:x.pauseDuration+p}))}}},gc=[],Zs={toasts:[],pausedAt:void 0},eo=r=>{Zs=qm(Zs,r),gc.forEach(o=>{o(Zs)})},bA={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},SA=(r={})=>{let[o,a]=R.useState(Zs),f=R.useRef(Zs);R.useEffect(()=>(f.current!==Zs&&a(Zs),gc.push(a),()=>{let x=gc.indexOf(a);x>-1&&gc.splice(x,1)}),[]);let p=o.toasts.map(x=>{var y,b,w;return{...r,...r[x.type],...x,removeDelay:x.removeDelay||((y=r[x.type])==null?void 0:y.removeDelay)||(r==null?void 0:r.removeDelay),duration:x.duration||((b=r[x.type])==null?void 0:b.duration)||(r==null?void 0:r.duration)||bA[x.type],style:{...r.style,...(w=r[x.type])==null?void 0:w.style,...x.style}}});return{...o,toasts:p}},TA=(r,o="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:o,ariaProps:{role:"status","aria-live":"polite"},message:r,pauseDuration:0,...a,id:(a==null?void 0:a.id)||EA()}),qa=r=>(o,a)=>{let f=TA(o,r,a);return eo({type:2,toast:f}),f.id},hr=(r,o)=>qa("blank")(r,o);hr.error=qa("error");hr.success=qa("success");hr.loading=qa("loading");hr.custom=qa("custom");hr.dismiss=r=>{eo({type:3,toastId:r})};hr.remove=r=>eo({type:4,toastId:r});hr.promise=(r,o,a)=>{let f=hr.loading(o.loading,{...a,...a==null?void 0:a.loading});return typeof r=="function"&&(r=r()),r.then(p=>{let x=o.success?Sc(o.success,p):void 0;return x?hr.success(x,{id:f,...a,...a==null?void 0:a.success}):hr.dismiss(f),p}).catch(p=>{let x=o.error?Sc(o.error,p):void 0;x?hr.error(x,{id:f,...a,...a==null?void 0:a.error}):hr.dismiss(f)}),r};var IA=(r,o)=>{eo({type:1,toast:{id:r,height:o}})},NA=()=>{eo({type:5,time:Date.now()})},La=new Map,_A=1e3,RA=(r,o=_A)=>{if(La.has(r))return;let a=setTimeout(()=>{La.delete(r),eo({type:4,toastId:r})},o);La.set(r,a)},kA=r=>{let{toasts:o,pausedAt:a}=SA(r);R.useEffect(()=>{if(a)return;let x=Date.now(),y=o.map(b=>{if(b.duration===1/0)return;let w=(b.duration||0)+b.pauseDuration-(x-b.createdAt);if(w<0){b.visible&&hr.dismiss(b.id);return}return setTimeout(()=>hr.dismiss(b.id),w)});return()=>{y.forEach(b=>b&&clearTimeout(b))}},[o,a]);let f=R.useCallback(()=>{a&&eo({type:6,time:Date.now()})},[a]),p=R.useCallback((x,y)=>{let{reverseOrder:b=!1,gutter:w=8,defaultPosition:E}=y||{},S=o.filter(D=>(D.position||E)===(x.position||E)&&D.height),I=S.findIndex(D=>D.id===x.id),_=S.filter((D,L)=>L<I&&D.visible).length;return S.filter(D=>D.visible).slice(...b?[_+1]:[0,_]).reduce((D,L)=>D+(L.height||0)+w,0)},[o]);return R.useEffect(()=>{o.forEach(x=>{if(x.dismissed)RA(x.id,x.removeDelay);else{let y=La.get(x.id);y&&(clearTimeout(y),La.delete(x.id))}})},[o]),{toasts:o,handlers:{updateHeight:IA,startPause:NA,endPause:f,calculateOffset:p}}},PA=zi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,OA=zi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,DA=zi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,MA=Es("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${PA} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${OA} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${r=>r.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${DA} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,LA=zi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,BA=Es("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${r=>r.secondary||"#e0e0e0"};
  border-right-color: ${r=>r.primary||"#616161"};
  animation: ${LA} 1s linear infinite;
`,FA=zi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,jA=zi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,VA=Es("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${FA} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${jA} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${r=>r.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,zA=Es("div")`
  position: absolute;
`,UA=Es("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,WA=zi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,HA=Es("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${WA} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,GA=({toast:r})=>{let{icon:o,type:a,iconTheme:f}=r;return o!==void 0?typeof o=="string"?R.createElement(HA,null,o):o:a==="blank"?null:R.createElement(UA,null,R.createElement(BA,{...f}),a!=="loading"&&R.createElement(zA,null,a==="error"?R.createElement(MA,{...f}):R.createElement(VA,{...f})))},XA=r=>`
0% {transform: translate3d(0,${r*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,YA=r=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${r*-150}%,-1px) scale(.6); opacity:0;}
`,KA="0%{opacity:0;} 100%{opacity:1;}",$A="0%{opacity:1;} 100%{opacity:0;}",ZA=Es("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,qA=Es("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,QA=(r,o)=>{let a=r.includes("top")?1:-1,[f,p]=Zm()?[KA,$A]:[XA(a),YA(a)];return{animation:o?`${zi(f)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${zi(p)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},JA=R.memo(({toast:r,position:o,style:a,children:f})=>{let p=r.height?QA(r.position||o||"top-center",r.visible):{opacity:0},x=R.createElement(GA,{toast:r}),y=R.createElement(qA,{...r.ariaProps},Sc(r.message,r));return R.createElement(ZA,{className:r.className,style:{...p,...a,...r.style}},typeof f=="function"?f({icon:x,message:y}):R.createElement(R.Fragment,null,x,y))});vA(R.createElement);var eb=({id:r,className:o,style:a,onHeightUpdate:f,children:p})=>{let x=R.useCallback(y=>{if(y){let b=()=>{let w=y.getBoundingClientRect().height;f(r,w)};b(),new MutationObserver(b).observe(y,{subtree:!0,childList:!0,characterData:!0})}},[r,f]);return R.createElement("div",{ref:x,className:o,style:a},p)},tb=(r,o)=>{let a=r.includes("top"),f=a?{top:0}:{bottom:0},p=r.includes("center")?{justifyContent:"center"}:r.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Zm()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${o*(a?1:-1)}px)`,...f,...p}},nb=Oc`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,lc=16,rb=({reverseOrder:r,position:o="top-center",toastOptions:a,gutter:f,children:p,containerStyle:x,containerClassName:y})=>{let{toasts:b,handlers:w}=kA(a);return R.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:lc,left:lc,right:lc,bottom:lc,pointerEvents:"none",...x},className:y,onMouseEnter:w.startPause,onMouseLeave:w.endPause},b.map(E=>{let S=E.position||o,I=w.calculateOffset(E,{reverseOrder:r,gutter:f,defaultPosition:o}),_=tb(S,I);return R.createElement(eb,{id:E.id,key:E.id,onHeightUpdate:w.updateHeight,className:E.visible?nb:"",style:_},E.type==="custom"?Sc(E.message,E):p?p(E):R.createElement(JA,{toast:E,position:S}))}))},Io=hr;const Td=({direction:r="down",show:o=!0,className:a="",style:f={}})=>{if(!o)return null;const p=r==="down"?"rotate(180 16 16)":"";return v.jsxs("div",{className:`arrow-hint-container ${r} ${a}`,style:f,children:[v.jsx("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"arrow-hint-svg",children:v.jsxs("g",{transform:p,children:[v.jsx("path",{d:"M16 6v16M16 22l-7-7M16 22l7-7",stroke:"url(#arrow-gradient)",strokeWidth:"3.2",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#arrow-glow)"}),v.jsxs("defs",{children:[v.jsxs("linearGradient",{id:"arrow-gradient",x1:"16",y1:"6",x2:"16",y2:"22",gradientUnits:"userSpaceOnUse",children:[v.jsx("stop",{stopColor:"#7f5fff"}),v.jsx("stop",{offset:"0.5",stopColor:"#2e8bff"}),v.jsx("stop",{offset:"1",stopColor:"#00e0ff"})]}),v.jsx("filter",{id:"arrow-glow",x:"-10",y:"-10",width:"52",height:"52",filterUnits:"userSpaceOnUse",children:v.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"2.5",floodColor:"#7f5fff",floodOpacity:"0.5"})})]})]})}),v.jsx("div",{className:"arrow-hint-text",children:"Tap Here"})]})},ib=({isOpen:r,onClose:o,onConfirm:a,userName:f})=>r?v.jsx("div",{className:"kick-modal",children:v.jsxs("div",{className:"kick-modal-content",children:[v.jsx("h2",{className:"kick-modal-title",children:"Kick User"}),v.jsxs("p",{className:"kick-modal-message",children:["Are you sure you want to kick ",f," from the lobby?"]}),v.jsxs("div",{className:"kick-modal-actions",children:[v.jsx("button",{onClick:a,className:"admin-button admin-button-danger",children:"Yes, Kick User"}),v.jsx("button",{onClick:o,className:"admin-button admin-button-primary",children:"Cancel"})]})]})}):null,sb=({isOpen:r,onClose:o,onConfirm:a})=>r?v.jsx("div",{className:"join-modal",children:v.jsxs("div",{className:"join-modal-content",children:[v.jsx("h2",{className:"join-modal-title",children:"Join Lobby"}),v.jsx("p",{className:"join-modal-message",children:"Are you sure you want to join? You will be paired up with your attendees."}),v.jsxs("div",{className:"join-modal-actions",children:[v.jsx("button",{onClick:a,className:"admin-button admin-button-join",children:"Yes, Join Lobby"}),v.jsx("button",{onClick:o,className:"admin-button admin-button-primary",children:"Cancel"})]})]})}):null,Qm=(r,o)=>new Promise((a,f)=>{const x=new XMLSerializer().serializeToString(r),y=800,b=1e3,w=document.createElement("canvas");w.width=y,w.height=b;const E=w.getContext("2d");E.fillStyle="#ffffff",E.fillRect(0,0,y,b);const S=new window.Image;S.crossOrigin="anonymous",S.onload=()=>{const I=new window.Image;I.onload=()=>{const B=S.width/S.height*180,F=36,j=28,W=550,z=22,J=182+z,ne=F+z*1.2,de=j+32,q=J+ne,ce=de,Z=b-q-ce,Ae=q+(Z-W)/2-35,ke=(y-W)/2;let Ie=2;const Pe=(y-B)/2;E.drawImage(S,Pe,Ie,B,180),Ie+=180+z,E.fillStyle="#000000",E.font=`600 ${F}px Helvetica, Arial, sans-serif`,E.textAlign="center",E.textBaseline="top",E.fillText("Scan to join the ice-breaking session!",y/2,Ie),Ie+=F+z*1.2,E.drawImage(I,ke,Ae,W,W);const ee=b-32-j;E.font=`${j}px Helvetica, Arial, sans-serif`,E.fillStyle="#000000",E.textBaseline="top";const He=`code (optional): ${o}`;E.fillText(He,y/2,ee),w.toBlob(xe=>{xe?a(xe):f(new Error("Failed to create blob"))},"image/png")},I.onerror=()=>f(new Error("Failed to load QR code image")),I.src="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(x)))},S.onerror=()=>f(new Error("Failed to load logo image")),S.src="/assets/reuneo_test_9.png"}),ob=({lobbyState:r,playerCount:o,onStart:a,onEnd:f,lobbyCode:p,currentRound:x})=>{const y=r==="checkin",b=o>=2&&r==="checkin",w=r==="active",E=r==="active",S=r==="terminated",[I,_]=R.useState(null),[D,L]=R.useState({qr:!1}),[B,F]=R.useState(!1),j=R.useRef(!1),W=()=>{_("start")},z=()=>{_("end")},J=()=>{F(!0),_("checkin")},ne=()=>{I==="start"?(a(),Io.success("Rounds started!",{position:"top-center"})):I==="end"&&f(),_(null)},de=()=>_(null);R.useEffect(()=>{j.current||r==="checkin"&&o===0&&(j.current=!0,F(!0),_("checkin"))},[r,o]);const q=(Pe,Fe)=>Pe?"progress-arrow active-shimmer":Fe?"progress-arrow available-shimmer":"progress-arrow inactive",ce=y&&!B&&o<6,Z=r==="checkin"&&o>=6,Ae=r==="active"&&x+1>=12;function ke(Pe,Fe={}){const{silent:ee=!1}=Fe,He=URL.createObjectURL(Pe),xe=document.createElement("a");xe.href=He,xe.download=`reuneo-lobby-${p}.png`,document.body.appendChild(xe),xe.click(),document.body.removeChild(xe),URL.revokeObjectURL(He),ee||(L(he=>({...he,qr:!0})),setTimeout(()=>L(he=>({...he,qr:!1})),800))}const Ie=()=>{const Pe=document.getElementById("modal-qr-svg");Pe&&Qm(Pe,p).then(Fe=>{ke(Fe,{silent:!0}),navigator.clipboard&&navigator.clipboard.write?navigator.clipboard.write([new window.ClipboardItem({"image/png":Fe})]).then(()=>{L(ee=>({...ee,qr:!0})),setTimeout(()=>L(ee=>({...ee,qr:!1})),800)}).catch(()=>{L(ee=>({...ee,qr:!0})),setTimeout(()=>L(ee=>({...ee,qr:!1})),800)}):(L(ee=>({...ee,qr:!0})),setTimeout(()=>L(ee=>({...ee,qr:!1})),800))}).catch(Fe=>{console.error("Error generating QR code image:",Fe),alert("Failed to generate QR code image.")})};return v.jsxs("div",{className:"lobby-progress-bar",style:{marginTop:"-1rem",height:"40px"},children:[v.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[v.jsx("div",{className:q(y,!1),tabIndex:0,title:"Check-in phase",onClick:J,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"Start Checkin"}),v.jsx(Td,{direction:"down",show:ce})]}),v.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[v.jsx("div",{className:q(w,b&&!w),tabIndex:0,title:b?"Start rounds":"At least 2 players required",onClick:W,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"Start Rounds"}),v.jsx(Td,{direction:"down",show:Z})]}),v.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[v.jsx("div",{className:q(S,E&&!S),tabIndex:0,title:E?"End rounds":"Cannot end yet",onClick:z,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"End Rounds"}),v.jsx(Td,{direction:"down",show:Ae})]}),I&&v.jsx("div",{className:"progress-modal-overlay",children:v.jsx("div",{className:"progress-modal",children:I==="checkin"?v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"progress-modal-title",children:"Check-in: Print or Display this QR code to your attendees"}),v.jsx("div",{className:"progress-modal-message",children:"They scan to join. Once you have 6-10 people ready, click 'Start Rounds' - New arrivals will get paired up in the next rounds."}),v.jsxs("div",{className:"progress-modal-qr",onClick:Ie,style:{cursor:"pointer",position:"relative"},children:[v.jsx($f,{value:`${window.location.origin}/lobby?code=${p}`,size:200,level:"H",includeMargin:!1,bgColor:"#ffffff",fgColor:"#000000",id:"modal-qr-svg"}),v.jsx("span",{className:"copy-icon modal-copy-icon","aria-label":"Copy",style:{position:"absolute",right:8,bottom:8,background:"#fff",borderRadius:"50%",padding:"2px"},children:v.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[v.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),v.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})}),D.qr&&v.jsx("span",{className:"modal-copied-feedback",style:{position:"absolute",left:"50%",bottom:"-1.5rem",transform:"translateX(-50%)",color:"#28a745",fontWeight:600,fontSize:"0.95rem"},children:"Copied!"})]}),v.jsxs("div",{style:{textAlign:"center",marginTop:"1rem",marginBottom:"0.5rem",fontSize:"1rem",color:"#3b3b3b",fontFamily:"Helvetica, Arial, sans-serif"},children:["code (optional): ",p]}),v.jsx("div",{className:"progress-modal-actions",children:v.jsx("button",{className:"progress-modal-btn confirm",onClick:de,children:"Got it"})})]}):v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"progress-modal-title",children:I==="start"?"Are you sure you want to start rounds? - Dont worry new people can join in the next rounds.":"Are you sure you want to end the rounds?"}),v.jsx("div",{className:"progress-modal-actions",children:I==="start"?v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"progress-modal-btn cancel",onClick:de,children:"Not Yet"}),v.jsx("button",{className:"progress-modal-btn confirm",onClick:ne,children:"Start"})]}):v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"progress-modal-btn cancel",onClick:de,children:"Keep Going"}),v.jsx("button",{className:"progress-modal-btn confirm danger",onClick:ne,children:"End"})]})})]})})})]})},ab=({players:r})=>{const o=[...r.pairedPlayers?r.pairedPlayers.flat():[],...r.lobbyData?r.lobbyData:[]],a=10,f=o.slice(0,a),p=o.length-a,x=o.length;return v.jsxs("div",{className:"overlapping-profile-list-wrapper",style:{marginTop:"3rem"},children:[v.jsxs("div",{className:"overlapping-profile-list",children:[f.map((y,b)=>v.jsx("img",{src:y.pfp_data||"/assets/player_icon_trans.png",alt:y.name||"Player",className:"overlapping-profile-img",style:{zIndex:b+1}},y.username||y.name||b)),p>0&&v.jsxs("span",{className:"overlapping-profile-overflow",children:["+ ",p]})]}),v.jsxs("div",{className:"overlapping-profile-list-label",style:{marginTop:"0.5rem",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.1)"},children:["People joined: ",x]})]})},lb=()=>{const{user:r,userProfile:o,checkAuth:a,permissions:f}=R.useContext(gr),p=ar(),x=Or(),y=!1,w=new URLSearchParams(x.search).get("code"),[E,S]=R.useState(w||"test");R.useEffect(()=>{w||(console.log("No lobby code found in URL, using default 'test' value"),(async()=>{try{const Xe=localStorage.getItem("access_token"),ut=await fetch(window.server_url+"/view_my_active_lobbies",{headers:{Authorization:`Bearer ${Xe}`}});if(ut.ok){const De=await ut.json();if(console.log("Active lobbies response:",De),De&&De.lobbies&&De.lobbies.length>0){const it=De.lobbies[0];S(it),window.history.replaceState({},"",`/admin_lobby_view?code=${it}`)}}}catch(Xe){console.error("Error fetching active lobby:",Xe)}})())},[w]);const[I,_]=R.useState(!1),[D,L]=R.useState(null),[B,F]=R.useState(!1),[j,W]=R.useState(null),[z,J]=R.useState(null),[ne,de]=R.useState(null),[q,ce]=R.useState(null),[Z,Ae]=R.useState(null),[ke,Ie]=R.useState({}),[Pe,Fe]=R.useState([]),[ee,He]=R.useState(0),xe=((z==null?void 0:z.length)||0)+((j==null?void 0:j.length)*2||0),[he,Le]=R.useState(!1);R.useEffect(()=>{if(a(),f!=="admin"&&f!=="organizer"){p("/");return}const me=async ut=>{if(ke[ut])return ke[ut];try{const De=await fetch(`${window.server_url}/pfp_small_icon?username=${encodeURIComponent(ut)}`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(De.ok){let it=await De.text();it.startsWith('"')&&it.endsWith('"')&&(it=it.slice(1,-1));const zt=it.startsWith("data:image")?it:`data:image/jpeg;base64,${it}`;return Ie(jt=>({...jt,[ut]:zt})),zt}return null}catch(De){return console.error(`Error fetching profile picture for ${ut}:`,De),null}},Xe=setInterval(async()=>{try{const ut=await fetch(window.server_url+"/admin_lobby_data",{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,lobby_code:E}});if(ut.ok){const De=await ut.json();if(console.log("Admin lobby data:",E,De),De.lobby_state==="active"&&He(it=>De.current_round>it?De.current_round:it),De.lobby_state==="terminated"&&He(0),De&&De.unpaired_players){const it=await Promise.all(De.unpaired_players.map(async jt=>{const Pt=await me(jt.username);return{...jt,pfp_data:Pt}})),zt=await Promise.all((De.pairs_data||[]).map(async jt=>{const Pt=await me(jt[0].username),vt=await me(jt[1].username);return[{...jt[0],pfp_data:Pt},{...jt[1],pfp_data:vt}]}));J(it),W(zt),de(De.round_time_left),ce(De.lobby_state),Ae(De.lobby_duration||300),Fe(De.custom_tags||[])}else console.error("Invalid lobby data structure:",De),J([]),W([])}else console.error("Failed to fetch admin lobby data:",ut.status)}catch(ut){console.error("Error fetching admin lobby data:",ut)}},1e3);return()=>clearInterval(Xe)},[ke]);const fe=me=>{L(me),_(!0)},K=()=>{_(!1),L(null)},H=()=>{D&&fetch(window.server_url+"/kick_user",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"},body:JSON.stringify({username:D.username,lobby_code:E})}).then(me=>{me.ok?console.log(`User ${D.name} kicked successfully`):console.error(`Failed to kick user ${D.name}`)}).catch(me=>{console.error("Error kicking user:",me)}).finally(()=>{K()})},pe=()=>{F(!0)},Oe=()=>{F(!1)},we=()=>{p(`/lobby?code=${E}`),Oe()};function oe(me,Xe={}){const{silent:ut=!1}=Xe,De=URL.createObjectURL(me),it=document.createElement("a");it.href=De,it.download=`reuneo-lobby-${E}.png`,document.body.appendChild(it),it.click(),document.body.removeChild(it),URL.revokeObjectURL(De),ut||Io.success("QR code downloaded!")}async function Me(){const me=document.getElementById("admin-qr-svg");me&&Qm(me,E).then(Xe=>{oe(Xe,{silent:!0}),navigator.clipboard&&navigator.clipboard.write?navigator.clipboard.write([new window.ClipboardItem({"image/png":Xe})]).then(()=>{Io.success("Downloaded and copied to clipboard!")}).catch(()=>{Io.success("QR code downloaded!")}):Io.success("QR code downloaded!")}).catch(Xe=>{console.error("Error generating QR code image:",Xe),Io.error("Failed to generate QR code image.")})}const Ne=async()=>{await fetch(window.server_url+"/start_rounds",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,lobby_code:E}})},Ve=async()=>{(await fetch(window.server_url+"/terminate_lobby",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,lobby_code:E}})).ok&&p("/")};return v.jsxs(v.Fragment,{children:[v.jsx(rb,{position:"top-center"}),v.jsxs("div",{className:"admin-lobby-container",children:[y,v.jsx("div",{className:"admin-view-logo",style:{cursor:"pointer"},children:v.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Reuneo Logo",style:{maxWidth:"85px",height:"auto",objectFit:"contain",transition:"transform 0.3s ease"},onClick:()=>p("/")})}),v.jsx(ob,{lobbyState:q,playerCount:xe,onStart:Ne,onEnd:Ve,lobbyCode:E,currentRound:ee}),v.jsx(ab,{players:{pairedPlayers:j,lobbyData:z}}),v.jsxs("div",{className:"admin-lobby-dropdown-toggle",onClick:()=>Le(me=>!me),style:{cursor:"pointer",background:"var(--primary-color)",color:"#f5f7ff",fontWeight:700,textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",fontSize:".75rem",borderRadius:he?"14px 14px 0 0":"14px",padding:"0.5rem 1rem",margin:"0 auto",maxWidth:420,boxShadow:"0 2px 8px rgba(20,77,255,0.08)",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s",letterSpacing:"0.5px"},children:[he?"Hide Controls":"More Controls",v.jsx("span",{style:{marginLeft:12,fontSize:"1.2em",transition:"transform 0.3s",display:"inline-block",transform:he?"rotate(180deg)":"rotate(0deg)"},children:""})]}),v.jsxs("div",{className:"admin-lobby-body",style:{maxHeight:he?1e3:0,overflow:"hidden",transition:"max-height 0.5s cubic-bezier(0.4,0,0.2,1)",opacity:he?1:0,pointerEvents:he?"auto":"none",marginBottom:he?"2rem":0},children:[v.jsxs("div",{className:"admin-lobby-qr",onClick:Me,style:{cursor:"pointer"},children:[v.jsxs("span",{className:"qr-label",style:{display:"flex",alignItems:"center",gap:"0.4rem",marginBottom:"0.5rem"},children:["People scan to join",v.jsx("span",{className:"copy-icon","aria-label":"Copy",children:v.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[v.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),v.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})})]}),v.jsx("div",{style:{position:"relative",display:"inline-block"},children:v.jsx($f,{value:`${window.location.origin}/lobby?code=${E}`,size:140,level:"H",includeMargin:!1,bgColor:"#ffffff",fgColor:"#000000",id:"admin-qr-svg"})}),v.jsxs("div",{className:"lobby-code-display",onClick:()=>{navigator.clipboard.writeText(E);const me=document.querySelector(".lobby-code-display");me.classList.add("copied"),setTimeout(()=>me.classList.remove("copied"),250)},children:[v.jsx("span",{className:"lobby-code-label",children:"lobby code:"}),v.jsx("span",{className:"lobby-code-value",children:E}),v.jsx("span",{className:"copy-icon","aria-label":"Copy",children:v.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[v.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),v.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})})]})]}),v.jsxs("div",{className:"admin-lobby-event-settings",children:[v.jsxs("div",{className:"admin-profile",children:[v.jsx("img",{src:o!=null&&o.image_data?`data:image/jpeg;base64,${o.image_data}`:"/assets/player_icon_trans.png",alt:"Your Profile",className:"admin-profile-picture"}),v.jsx("span",{className:"admin-profile-name",children:o!=null&&o.name?o.name.slice(0,20):r==null?void 0:r.slice(0,20)})]}),v.jsx("button",{onClick:pe,className:"page-control-button page-control-join",style:{marginTop:".5rem"},children:"Join Rounds"}),v.jsxs("div",{className:"setting-item",style:{padding:"1rem"},children:[v.jsxs("span",{className:"setting-label",children:["Round Duration: ",v.jsxs("span",{className:"setting-value",children:[Math.floor(Z/60)," min"]})]}),v.jsx("span",{className:"setting-label",style:{},children:"Tags:"}),Pe&&Pe.length>0&&v.jsx("div",{className:"setting-item",children:v.jsxs("div",{className:"tags-container",children:[Pe.slice(0,3).map((me,Xe)=>v.jsx("span",{className:"tag-pill",children:me},Xe)),Pe.length>3&&v.jsxs("span",{className:"tag-pill more-tags",children:["+",Pe.length-3," more"]})]})})]})]}),v.jsx("div",{className:"admin-lobby-actions"})]}),(q==="active"||q==="interrim")&&ne&&v.jsx("div",{className:"admin-lobby-timer-container",children:v.jsxs("div",{className:"admin-lobby-timer-glass",children:[v.jsx(Zf,{isPlaying:q==="active",duration:Z,initialRemainingTime:ne,colors:["#144dff"],size:90,strokeWidth:12,trailColor:"url(#trailGradient)",onComplete:()=>({shouldRepeat:!1}),strokeLinecap:"round",children:({remainingTime:me})=>{const Xe=Math.floor(me/60),ut=Math.floor(me%60);return v.jsxs("span",{className:`timer-text ${me<=10?"timer-text-fadescale":""}`,children:[Xe,":",String(ut).padStart(2,"0")]})}},`${q}-${Math.floor(ne)}`),v.jsx("span",{className:"timer-subtext",children:"round time left"}),v.jsx("svg",{width:"0",height:"0",children:v.jsx("defs",{children:v.jsxs("linearGradient",{id:"trailGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[v.jsx("stop",{offset:"0%",stopColor:"#e0e7ff"}),v.jsx("stop",{offset:"100%",stopColor:"#f5f7ff"})]})})})]})}),q!=="checkin"&&v.jsxs("div",{className:"admin-lobby-stats",children:[v.jsxs("div",{className:"stat-card",children:[v.jsx("div",{className:"stat-title",children:"Total Players"}),v.jsx("div",{className:"stat-value",children:((z==null?void 0:z.length)||0)+((j==null?void 0:j.length)*2||0)})]}),v.jsxs("div",{className:"stat-card",children:[v.jsx("div",{className:"stat-title",children:"Paired Players"}),v.jsx("div",{className:"stat-value",children:(j==null?void 0:j.length)*2||0})]}),v.jsxs("div",{className:"stat-card",children:[v.jsx("div",{className:"stat-title",children:"Unpaired Players"}),v.jsx("div",{className:"stat-value",children:(z==null?void 0:z.length)||0})]})]}),j&&q!=="checkin"&&v.jsx("div",{className:"admin-lobby-players",children:v.jsxs("div",{className:"player-section",children:[v.jsxs("div",{className:"section-header",children:["Paired Players: ",v.jsx("span",{className:"stat-value",style:{fontSize:"1.3rem"},children:(j==null?void 0:j.length)*2||0})]}),v.jsx("div",{className:"player-grid",children:j.map((me,Xe)=>{const ut=me[0].match_details&&me[0].match_details.opponent_matched_tags&&me[0].match_details.opponent_matched_tags.length>0||me[1].match_details&&me[1].match_details.opponent_matched_tags&&me[1].match_details.opponent_matched_tags.length>0;return v.jsxs("div",{className:"paired-player-card",children:[ut&&v.jsx("div",{className:"matched-pair-badge",children:"Matched"}),v.jsxs("div",{className:"paired-player",onClick:()=>fe(me[0]),children:[v.jsx("img",{src:me[0].pfp_data,alt:me[0].name,className:"paired-player-avatar"}),v.jsx("h3",{className:"paired-player-name",children:me[0].name}),me[0].match_details&&me[0].match_details.opponent_matched_tags&&me[0].match_details.opponent_matched_tags.length>0&&v.jsx("div",{className:"matching-tag-container",children:v.jsx("div",{className:"matched-player-tag",children:me[0].match_details.opponent_matched_tags.map((De,it)=>v.jsx("span",{className:"matching-tag-pill",children:De},it))})})]}),v.jsxs("div",{className:"paired-player",onClick:()=>fe(me[1]),children:[v.jsx("img",{src:me[1].pfp_data,alt:me[1].name,className:"paired-player-avatar"}),v.jsx("h3",{className:"paired-player-name",children:me[1].name}),me[1].match_details&&me[1].match_details.opponent_matched_tags&&me[1].match_details.opponent_matched_tags.length>0&&v.jsx("div",{className:"matching-tag-container",children:v.jsx("div",{className:"matched-player-tag",children:me[1].match_details.opponent_matched_tags.map((De,it)=>v.jsx("span",{className:"matching-tag-pill",children:De},it))})})]})]},Xe)})})]})}),z&&v.jsx("div",{className:"admin-lobby-players",children:v.jsxs("div",{className:"player-section",children:[v.jsxs("div",{className:"section-header",children:[q==="checkin"?"People Joined":"Unpaired Players",": ",v.jsx("span",{className:"stat-value",style:{fontSize:"1.3rem"},children:(z==null?void 0:z.length)||0})]}),v.jsx("div",{className:"player-grid",children:z.map((me,Xe)=>v.jsxs("div",{className:"player-card",onClick:()=>fe(me),children:[v.jsx("img",{src:me.pfp_data,alt:me.name,className:"player-avatar"}),v.jsx("h3",{className:"player-name",children:me.name})]},Xe))})]})}),v.jsx(sb,{isOpen:B,onClose:Oe,onConfirm:we}),v.jsx(ib,{isOpen:I,onClose:K,onConfirm:H,userName:(D==null?void 0:D.name)||"this user"})]})]})},cb=()=>{const r=ar(),{user:o}=R.useContext(gr),a=()=>{window.location.href="https://reunio.app/become-an-organizer"};return v.jsxs("div",{className:"product-selection-container",children:[v.jsxs("video",{className:"background-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,children:[v.jsx("source",{src:"/assets/purchase_plan_video.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]}),v.jsxs("div",{className:"product-selection-content",children:[v.jsx("div",{className:"product-selection-header",children:v.jsx("h1",{children:"Product Selection"})}),v.jsxs("div",{className:"plans-section",children:[v.jsx("h2",{children:"Available Plans"}),v.jsxs("div",{className:"plan-card",children:[v.jsx("h3",{children:"Organizer Plan"}),v.jsxs("div",{className:"plan-description",children:[v.jsx("p",{children:"Create experiences for your community with our beta plan."}),v.jsxs("ul",{children:[v.jsx("li",{children:"Create unlimited experiences"}),v.jsx("li",{children:"Access to organizer dashboard"}),v.jsx("li",{children:"Priority customer support"})]})]}),v.jsx("button",{className:"purchase-button",onClick:a,children:"Contact Us"})]})]}),v.jsx("button",{className:"back-button",onClick:()=>r("/"),children:"Home"})]})]})},ub=()=>{const{user:r,userProfile:o,checkAuth:a,permissions:f}=R.useContext(gr),[p,x]=R.useState(""),[y,b]=R.useState(""),[w,E]=R.useState(!1),[S,I]=R.useState(""),[_,D]=R.useState(!1),[L,B]=R.useState([]),[F,j]=R.useState(""),[W,z]=R.useState("5"),[J,ne]=R.useState("0"),[de,q]=R.useState(!1),[ce,Z]=R.useState(null),[Ae,ke]=R.useState(!1),[Ie,Pe]=R.useState(null),[Fe,ee]=R.useState(null),[He,xe]=R.useState(""),[he,Le]=R.useState(""),[fe,K]=R.useState(null),[H,pe]=R.useState(null),[Oe,we]=R.useState(""),[oe,Me]=R.useState(!1),[Ne,Ve]=R.useState(!1),[me,Xe]=R.useState({x:0,y:0}),[ut,De]=R.useState(1),[it,zt]=R.useState(null),jt=8,Pt=ar(),vt=R.useRef(null);R.useEffect(()=>{window.scrollTo(0,0),r&&(x(r),b(r)),vt.current&&vt.current.focus()},[r]);const pt=je=>{const ge=/^[a-z0-9]+$/;return je.length>=2&&ge.test(je)},xn=je=>{const ge=je.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");b(ge),D(!0),setTimeout(()=>{D(!1)},500)},_e=()=>{if(F.includes(",")){const je=F.split(",").map(lt=>lt.startsWith(" ")?lt.substring(1):lt),ge=[];je.forEach(lt=>{const st=lt.trim();st&&!L.includes(st)&&!ge.includes(st)&&ge.push(st)}),ge.length>0&&B([...L,...ge]),j("")}else F.trim()&&!L.includes(F.trim())&&(B([...L,F.trim()]),j(""))},zn=je=>{B(L.filter(ge=>ge!==je))},Ct=je=>{je.key==="Enter"&&F.trim()&&(je.preventDefault(),_e())},Ye=je=>{je==="icebreaker"?L.length>0||F.trim()?(Pe("icebreaker"),ke(!0)):(Z("icebreaker"),B([]),j("")):je==="custom"&&Z("custom")},et=()=>{Z(Ie),B([]),j(""),ke(!1),Pe(null)},gt=()=>{ke(!1),Pe(null)},Ut=(je,ge,lt)=>new Promise(st=>{const _t=new Image;_t.onload=()=>{const Dn=document.createElement("canvas"),Dr=Dn.getContext("2d");let{width:Un,height:at}=_t;Un>at?Un>ge&&(at=at*ge/Un,Un=ge):at>lt&&(Un=Un*lt/at,at=lt),Dn.width=Un,Dn.height=at,Dr.drawImage(_t,0,0,Un,at);const Mn=Dn.toDataURL("image/jpeg",.7);st(Mn)},_t.src=URL.createObjectURL(je)}),kt=async je=>{const ge=je.target.files[0];if(ge){if(we(""),Ve(!0),!["image/jpeg","image/jpg","image/png"].includes(ge.type)){we("Invalid format. Please upload a JPG or PNG image."),Ve(!1);return}if(ge.size>2*1024*1024){we("File too large. Please choose an image under 2MB."),Ve(!1);return}try{const lt=await Ut(ge,400,400);ee(ge),K(lt),Me(!0),Ve(!1)}catch(lt){console.error("Error processing image:",lt),we("Error processing image. Please try again."),Ve(!1)}}},At=(je,ge)=>{zt(ge)},nn=async()=>{try{Ve(!0);const je=await sf(fe,it);pe(je),Me(!1),Ve(!1)}catch(je){console.error("Error cropping logo:",je),we("Error processing image. Please try again."),Me(!1),Ve(!1)}},Ht=()=>{ee(null),K(null),pe(null),Me(!1),Ve(!1),Xe({x:0,y:0}),De(1),zt(null),we("");const je=document.getElementById("logoUpload");je&&(je.value="")},un=async je=>{if(je.preventDefault(),!pt(y)){I("Lobby code must be at least 2 characters long and contain only lowercase letters and numbers");return}E(!0),I("");const ge=parseInt(W)*60+parseInt(J);let lt=null;H&&(lt=H.split(",")[1]);try{const st={lobby_code:y,custom_tags:ce==="custom"?L:[],lobby_duration:ge,show_table_numbers:de};lt&&(st.logo_icon=lt),He.trim()&&(st.logo_name=He.trim()),he.trim()&&(st.logo_hyperlink=he.trim());const _t=await fetch(window.server_url+"/create_lobby",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"},body:JSON.stringify(st)});if(_t.ok)console.log("Lobby created successfully"),console.log(await _t.json()),Pt(`/admin_lobby_view?code=${y}`);else{const Dn=await _t.json();I(Dn.message||"Failed to create lobby"),console.error("Failed to create lobby")}}catch(st){I("An error occurred while creating the lobby"),console.error("Error creating lobby:",st)}finally{E(!1)}};return v.jsxs("div",{className:"create-lobby-background",children:[v.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Reunio Logo",className:"logo-image",onClick:()=>Pt(-1)}),v.jsxs("div",{className:"create-lobby-container",children:[v.jsx("h1",{className:"create-lobby-title",children:"Create a New Lobby"}),v.jsxs("form",{onSubmit:un,className:"create-lobby-form",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"lobbyCode",children:"Lobby Code"}),v.jsx("input",{ref:vt,type:"text",id:"lobbyCode",value:y,onChange:xn,placeholder:"Enter lobby code (lowercase letters and numbers only)",required:!0,className:`form-input ${_?"typing":""}`,autoComplete:"off"}),v.jsx("div",{className:"input-hint",children:"lowercase letters and numbers only"})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Round Duration"}),v.jsxs("div",{className:"duration-input-container",children:[v.jsxs("div",{className:"duration-input-group",children:[v.jsx("input",{type:"number",id:"minutes",value:W,onChange:je=>{const ge=je.target.value;(ge===""||parseInt(ge)>0&&parseInt(ge)<=jt)&&(z(ge),parseInt(ge)===jt&&ne("0"))},min:"1",max:jt,placeholder:`1-${jt}`,className:"form-input duration-input",autoComplete:"off"}),v.jsx("label",{htmlFor:"minutes",className:"duration-label",children:"Minutes"})]}),v.jsxs("div",{className:"duration-input-group",children:[v.jsx("input",{type:"number",id:"seconds",value:J,onChange:je=>{const ge=je.target.value;(ge===""||parseInt(ge)>=0&&parseInt(ge)<=59)&&ne(ge)},min:"0",max:"59",placeholder:"0-59",className:"form-input duration-input",autoComplete:"off",disabled:parseInt(W)===jt}),v.jsx("label",{htmlFor:"seconds",className:"duration-label",children:"Seconds"})]})]}),v.jsxs("div",{className:"input-hint",children:["Maximum total duration is ",jt," minutes"]})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"showTableNumbers",children:"Table Numbers"}),v.jsx("input",{type:"checkbox",id:"showTableNumbers",checked:de,onChange:je=>q(je.target.checked),className:"form-input checkbox-input"}),v.jsx("div",{className:"input-hint",children:"Recommended for events with 50+ people"}),v.jsx("div",{className:"input-hint",children:"Make sure to provide table numbers"})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Matchmaking Categories"}),v.jsxs("div",{className:"matchmaking-tabs",children:[v.jsx("button",{type:"button",className:`tab-button ${ce==="icebreaker"?"tab-selected":""}`,onClick:()=>Ye("icebreaker"),children:"Community Ice Breaker"}),v.jsx("button",{type:"button",className:`tab-button ${ce==="custom"?"tab-selected":""}`,onClick:()=>Ye("custom"),children:"Custom Matching"})]}),ce==="custom"&&v.jsxs("div",{className:"custom-matching-section",children:[v.jsxs("div",{className:"tag-input-container",children:[v.jsx("input",{type:"text",id:"tagInput",value:F,onChange:je=>j(je.target.value),onKeyDown:Ct,placeholder:"Add categories (press + to add)",className:"form-input",autoComplete:"off"}),v.jsx("button",{type:"button",onClick:_e,className:"tag-add-button",children:"+"})]}),L.length>0&&v.jsx("div",{className:"tag-list",children:L.map((je,ge)=>v.jsxs("div",{className:"tag-item",children:[je,v.jsx("button",{type:"button",onClick:()=>zn(je),className:"tag-remove-button",children:""})]},ge))}),v.jsx("div",{className:"input-hint",children:"If you want to match people based on categories"})]})]}),v.jsxs("div",{className:"form-group logo-upload-section",children:[v.jsx("label",{children:"Sponsor Logo"}),!H&&!oe&&v.jsxs(v.Fragment,{children:[Ne?v.jsx("div",{className:"logo-processing",children:"Processing..."}):v.jsxs(v.Fragment,{children:[v.jsx("input",{type:"file",id:"logoUpload",accept:"image/jpeg,image/jpg,image/png",onChange:kt,style:{display:"none"}}),v.jsx("button",{type:"button",onClick:()=>document.getElementById("logoUpload").click(),className:"logo-upload-button",children:"Upload Logo"})]}),Oe&&v.jsx("div",{className:"logo-error-message",children:Oe})]}),oe&&fe&&v.jsxs("div",{className:"logo-crop-container",children:[v.jsx("div",{className:"logo-crop-area",children:v.jsx(rf,{image:fe,crop:me,zoom:ut,aspect:1,onCropChange:Xe,onZoomChange:De,onCropComplete:At})}),v.jsxs("div",{className:"logo-crop-controls",children:[v.jsx("button",{type:"button",onClick:nn,className:"logo-save-button",disabled:Ne,children:Ne?"Processing...":"Save Crop"}),v.jsx("button",{type:"button",onClick:Ht,className:"logo-cancel-button",children:"Cancel"})]})]}),H&&!oe&&v.jsx("div",{className:"logo-preview-container",children:v.jsxs("div",{className:"logo-preview",children:[v.jsx("img",{src:H,alt:"Logo preview",className:"logo-preview-image"}),v.jsx("button",{type:"button",onClick:Ht,className:"logo-remove-button",children:""})]})}),!1]}),S&&v.jsx("div",{className:"error-message",children:S}),v.jsx("button",{type:"submit",className:"submit-button",disabled:w,children:w?"Creating...":"Create Lobby"})]})]}),Ae&&v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-content",children:[v.jsx("h3",{children:"Switch to Community Ice Breaker?"}),v.jsx("p",{children:"This will clear your current matching categories."}),v.jsxs("div",{className:"modal-buttons",children:[v.jsx("button",{type:"button",onClick:gt,className:"modal-button modal-cancel",children:"Cancel"}),v.jsx("button",{type:"button",onClick:et,className:"modal-button modal-confirm",children:"Confirm"})]})]})})]})},db=r=>{try{const o=new URLSearchParams(r||window.location.search),a=o.get("via")||"",f=o.get("rewardful")||o.get("rewardful_referral")||"",p=typeof window<"u"&&window.Rewardful&&window.Rewardful.referral||"",x=typeof window<"u"&&window.localStorage&&window.localStorage.getItem("rewardful_referral")||"",y=p||f||a||x||"";return y&&typeof window<"u"&&window.localStorage&&window.localStorage.setItem("rewardful_referral",y),y}catch{return""}},fb=()=>{const{login:r,user:o,checkAuth:a,permissions:f}=R.useContext(gr),[p,x]=R.useState(""),[y,b]=R.useState(""),[w,E]=R.useState(""),[S,I]=R.useState(""),[_,D]=R.useState(""),[L,B]=R.useState(""),[F,j]=R.useState({}),[W,z]=R.useState(""),[J,ne]=R.useState(!1),de=ar(),q=Or();R.useEffect(()=>{localStorage.getItem("access_token")&&!o&&a()},[]),R.useEffect(()=>{f!==null&&(f==="admin"||f==="organizer")&&de("/")},[f,de]),R.useEffect(()=>{(async()=>{if(o!==null&&f!==null&&f!=="admin"&&f!=="organizer")try{const oe=localStorage.getItem("access_token");if(!oe)return;const Me=await fetch(`${window.server_url}/check-subscription-status`,{headers:{Authorization:`Bearer ${oe}`}});Me.ok&&(await Me.json()).has_access===!0&&de("/organizer-account-details")}catch(oe){console.error("Error checking subscription status:",oe)}})()},[o,f,de]);const ce=we=>{const oe=/^[a-z0-9]+$/;return we.length>=2&&oe.test(we)},Z=we=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(we)&&we.trim()!=="",Ae=we=>we.replace(/\D/g,"").length===10,ke=we=>we.trim().length>=2,Ie=we=>{const oe=we.replace(/\D/g,"");return oe.length===0?"":oe.length<=3?`(${oe}`:oe.length<=6?`(${oe.slice(0,3)}) ${oe.slice(3)}`:`(${oe.slice(0,3)}) ${oe.slice(3,6)}-${oe.slice(6,10)}`},Pe=we=>we.replace(/\D/g,""),Fe=we=>{const oe=we.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");x(oe),W&&z("")},ee=we=>{b(we.target.value),W&&z(""),F.email&&j(oe=>({...oe,email:""}))},He=we=>{const oe=we.target.value;E(oe),W&&z(""),F.phone&&j(Me=>({...Me,phone:""}))},xe=()=>{const we=Ie(w);E(we),we&&!Ae(we)?j(oe=>({...oe,phone:"Invalid phone number"})):j(oe=>({...oe,phone:""}))},he=we=>{const oe=we.target.value;I(oe),W&&z(""),F.cityState&&j(Me=>({...Me,cityState:""}))},Le=()=>{S&&!ke(S)?j(we=>({...we,cityState:"City/State must be at least 2 characters"})):j(we=>({...we,cityState:""}))},fe=we=>{D(we.target.value),F.eventType&&j(oe=>({...oe,eventType:""}))},K=we=>{B(we.target.value),F.avgAttendees&&j(oe=>({...oe,avgAttendees:""}))},H=async we=>{we.preventDefault(),z(""),ne(!0);const oe=o!==null;if(!oe&&(!p||!ce(p))){z("Username must be at least 2 characters and contain only lowercase letters and numbers"),ne(!1);return}if(!y||!Z(y)){j(Xe=>({...Xe,email:"Please enter a valid email address"})),z("Please enter a valid email address"),ne(!1);return}const Me=Pe(w);if(!w||!Ae(w)){j(Xe=>({...Xe,phone:"Please enter a valid phone number"})),z("Please enter a valid phone number"),ne(!1);return}if(!S||!ke(S)){j(Xe=>({...Xe,cityState:"City/State is required (minimum 2 characters)"})),z("City/State is required (minimum 2 characters)"),ne(!1);return}const Ne=new URLSearchParams(q.search),Ve=db(q.search),me=Ne.get("ref")||Ne.get("affiliate_code")||"";if(oe){const Xe=localStorage.getItem("access_token");if(!Xe){z("Authentication required. Please log in again."),ne(!1);return}try{if(!(await fetch(`${window.server_url}/update_profile`,{method:"POST",headers:{Authorization:`Bearer ${Xe}`,"Content-Type":"application/json"},body:JSON.stringify({phone_number:Me,city_state:S,event_type:_||"",avg_attendees:L||""})})).ok)throw new Error("Failed to update profile");const De=await fetch(`${window.server_url}/create-checkout-session`,{method:"POST",headers:{Authorization:`Bearer ${Xe}`,"Content-Type":"application/json"},body:JSON.stringify({email:y,rewardful_referral:Ve,affiliate_code:me})}),it=await De.json();if(!De.ok||it.error){if(it.error&&it.error.includes("already have an active subscription")){de("/organizer-account-details");return}z(it.error||"Failed to create checkout session. Please try again."),ne(!1);return}window.location.href=it.checkout_url;return}catch(ut){console.error("Error creating checkout session:",ut),z("An error occurred. Please try again."),ne(!1);return}}try{const ut=await fetch(window.server_url+"/signup",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:p,password:p})}),De=await ut.json();if(De.error==="Username already taken"){z("Username is taken"),ne(!1);return}if(!ut.ok){z(De.message||"Signup failed"),ne(!1);return}r(De),await a();const it=localStorage.getItem("access_token");if(!it)throw new Error("Authentication failed");const zt=await fetch("/assets/fakeprofile.png");if(!zt.ok)throw new Error("Failed to fetch profile image");const Pt=await(await zt.blob()).arrayBuffer(),vt=btoa(new Uint8Array(Pt).reduce((zn,Ct)=>zn+String.fromCharCode(Ct),""));if(!(await fetch(`${window.server_url}/update_profile`,{method:"POST",headers:{Authorization:`Bearer ${it}`,"Content-Type":"application/json"},body:JSON.stringify({name:p,image_data:vt,phone_number:Me,city_state:S,event_type:_||"",avg_attendees:L||""})})).ok)throw new Error("Failed to update profile");await a();const xn=await fetch(`${window.server_url}/create-checkout-session`,{method:"POST",headers:{Authorization:`Bearer ${it}`,"Content-Type":"application/json"},body:JSON.stringify({email:y,rewardful_referral:Ve,affiliate_code:me})}),_e=await xn.json();if(!xn.ok||_e.error){if(_e.error&&_e.error.includes("already have an active subscription")){de("/organizer-account-details");return}throw new Error(_e.error||"Failed to create checkout session")}window.location.href=_e.checkout_url}catch(Xe){console.error("Error:",Xe),z("An error occurred. Please try again."),ne(!1)}},pe=o===null,Oe=J||f==="admin"||f==="organizer";return v.jsxs("div",{className:"signup-container",children:[v.jsx("button",{onClick:()=>de("/"),className:"homescreen-button",children:"Home"}),v.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),v.jsx("h3",{className:"signup-header",children:"Become an Organizer"}),v.jsx("div",{className:"step-form-container",children:v.jsxs("form",{onSubmit:H,children:[v.jsxs("div",{style:{display:pe?"block":"none"},children:[v.jsx("label",{className:"step-label",children:"Username"}),v.jsx("input",{type:"text",value:p,onChange:Fe,placeholder:"Enter a username",className:"step-input",autoFocus:pe}),p.length>0&&v.jsxs("div",{className:"username-info-message",children:[v.jsxs("svg",{className:"info-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[v.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),v.jsx("path",{d:"M8 5V7M8 11V9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),v.jsx("circle",{cx:"8",cy:"5",r:"0.5",fill:"currentColor"})]}),v.jsx("span",{children:"This will be your temporary password"})]})]}),v.jsxs("div",{style:{marginTop:pe?"20px":"0"},children:[v.jsxs("label",{className:"step-label",children:["Email",F.email&&v.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[v.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),v.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),v.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),v.jsx("input",{type:"email",value:y,onChange:ee,placeholder:"Enter your email",className:`step-input ${F.email?"input-error":""}`,autoFocus:!pe})]}),v.jsxs("div",{style:{marginTop:"20px"},children:[v.jsxs("label",{className:"step-label",children:["Phone Number",F.phone&&v.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[v.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),v.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),v.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),v.jsx("input",{type:"tel",value:w,onChange:He,onBlur:xe,placeholder:"(123) 456-7890",className:`step-input ${F.phone?"input-error":""}`})]}),v.jsxs("div",{style:{marginTop:"20px"},children:[v.jsxs("label",{className:"step-label",children:["City / State",F.cityState&&v.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[v.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),v.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),v.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),v.jsx("input",{type:"text",value:S,onChange:he,onBlur:Le,placeholder:"City / State",className:`step-input ${F.cityState?"input-error":""}`})]}),v.jsxs("div",{style:{marginTop:"20px"},children:[v.jsx("label",{className:"step-label",children:"What events do you host?"}),v.jsxs("select",{value:_,onChange:fe,className:"step-select",children:[v.jsx("option",{value:"",children:"Select an option..."}),v.jsx("option",{value:"Hospitality-Restaurants",children:"Hospitality-Restaurants"}),v.jsx("option",{value:"Social",children:"Social"}),v.jsx("option",{value:"Residential",children:"Residential"}),v.jsx("option",{value:"Business Networking",children:"Business Networking"}),v.jsx("option",{value:"Event Specialist",children:"Event Specialist"}),v.jsx("option",{value:"Education",children:"Education"}),v.jsx("option",{value:"HR-Team Building",children:"HR-Team Building"}),v.jsx("option",{value:"Corporate",children:"Corporate"}),v.jsx("option",{value:"Co-working",children:"Co-working"}),v.jsx("option",{value:"Dating",children:"Dating"}),v.jsx("option",{value:"Other",children:"Other"})]})]}),v.jsxs("div",{style:{marginTop:"20px"},children:[v.jsx("label",{className:"step-label",children:"Avg # of attendees"}),v.jsxs("select",{value:L,onChange:K,className:"step-select",children:[v.jsx("option",{value:"",children:"Select an option..."}),v.jsx("option",{value:"5-15",children:"5-15"}),v.jsx("option",{value:"15-30",children:"15-30"}),v.jsx("option",{value:"30-50",children:"30-50"}),v.jsx("option",{value:"50-75",children:"50-75"}),v.jsx("option",{value:"75-100",children:"75-100"}),v.jsx("option",{value:"100-150",children:"100-150"}),v.jsx("option",{value:"150-200",children:"150-200"}),v.jsx("option",{value:"200+",children:"200+"})]})]}),W&&v.jsx("div",{className:"error-message",style:{marginTop:"15px",marginBottom:"10px"},children:W}),v.jsx("button",{type:"submit",className:"primary-button",disabled:Oe,style:{marginTop:"20px"},children:J?"Loading...":"Submit"})]})})]})},hb=()=>{const[r,o]=R.useState(!1),[a,f]=R.useState(""),p=R.useRef(null),x=ar(),y=Or();return R.useEffect(()=>{const w=new URLSearchParams(y.search).get("session_id");return(async()=>{let S="/";if(!w){f("Missing session ID"),o(!0),p.current=setTimeout(()=>{o(!1),x(S)},2e3);return}try{const I=localStorage.getItem("access_token");if(!I){f("Authentication required"),o(!0),p.current=setTimeout(()=>{o(!1),x(S)},2e3);return}const _=await fetch(`${window.server_url}/organizer-signup-success?session_id=${w}`,{headers:{Authorization:`Bearer ${I}`}}),D=await _.json();if(!_.ok||D.error)console.error("Payment verification failed:",D.error),f(D.error||"Payment verification failed");else try{const L=await fetch(`${window.server_url}/view_my_active_lobbies`,{headers:{Authorization:`Bearer ${I}`}});if(L.ok){const B=await L.json();S=!!(B&&Array.isArray(B.lobbies)&&B.lobbies.length>0)?"/":"/create_lobby"}else S="/"}catch(L){console.error("Error checking active lobbies:",L),S="/"}}catch(I){console.error("Error verifying payment:",I),f("Failed to verify payment")}o(!0),p.current=setTimeout(()=>{o(!1),x(S)},2e3)})(),()=>{p.current&&(clearTimeout(p.current),p.current=null)}},[y.search,x]),r?v.jsxs("div",{className:"success-overlay",children:[v.jsx("div",{className:"success-text",children:"Success! You're now an organizer!"}),a&&v.jsx("div",{className:"success-error",style:{marginTop:"20px"},children:a})]}):v.jsx("div",{className:"signup-container",children:v.jsx("div",{className:"loading-message",children:"Processing..."})})},pb=()=>{const{user:r,checkAuth:o,permissions:a}=R.useContext(gr),f=ar(),[p,x]=R.useState(null),[y,b]=R.useState(!0),[w,E]=R.useState(!1),[S,I]=R.useState(""),[_,D]=R.useState(!1),[L,B]=R.useState(!1);R.useEffect(()=>{a!==null&&a!=="admin"&&a!=="organizer"&&f("/organizer-signup")},[a,f]),R.useEffect(()=>{r&&(async()=>{try{const z=localStorage.getItem("access_token");if(!z){f("/organizer-signup");return}const J=await fetch(`${window.server_url}/organizer-account-details`,{headers:{Authorization:`Bearer ${z}`}}),ne=await J.json();if(!J.ok||ne.error){if((a==="admin"||a==="organizer")&&ne.has_subscription!==!1){I(ne.error||"Some subscription details may be incomplete"),x(ne),b(!1);return}if(ne.has_subscription===!1){f("/organizer-signup");return}I(ne.error||"Failed to load account details"),ne.has_subscription!==!1&&x(ne),b(!1);return}if(ne.has_subscription===!1){f("/organizer-signup");return}x(ne)}catch(z){console.error("Error fetching account details:",z),I("Failed to load account details. Please try again.")}finally{b(!1)}})()},[r,a,f]),R.useEffect(()=>(_?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[_]);const F=W=>W?new Date(W*1e3).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):null,j=async()=>{E(!0),I("");try{const W=localStorage.getItem("access_token");if(!W){I("Authentication required"),E(!1);return}const z=await fetch(`${window.server_url}/cancel-subscription`,{method:"POST",headers:{Authorization:`Bearer ${W}`,"Content-Type":"application/json"}}),J=await z.json();if(!z.ok||J.error){I(J.error||"Failed to cancel subscription"),E(!1),D(!1);return}B(!0),D(!1),setTimeout(()=>{f("/")},1500)}catch(W){console.error("Error canceling subscription:",W),I("An error occurred. Please try again."),E(!1),D(!1)}};return y?v.jsx("div",{className:"signup-container",children:v.jsx("div",{className:"loading-message",children:"Loading account details..."})}):!p&&!y?v.jsxs("div",{className:"signup-container",children:[v.jsx("button",{onClick:()=>f("/"),className:"homescreen-button",children:"Home"}),v.jsx("div",{className:"error-message",children:S||"No account details found"})]}):p?v.jsxs("div",{className:"signup-container",children:[v.jsx("button",{onClick:()=>f("/"),className:"homescreen-button",children:"Home"}),v.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),v.jsx("h3",{className:"signup-header",children:"Organizer Account Details"}),v.jsx("div",{className:"step-form-container",children:v.jsxs("div",{className:"account-details-content",children:[S&&v.jsx("div",{className:"error-message",style:{marginBottom:"20px"},children:S}),p.subscription_status&&v.jsxs("div",{className:"detail-row",children:[v.jsx("span",{className:"detail-label",children:"Subscription Status:"}),v.jsx("span",{className:`detail-value status-${p.subscription_status}`,children:p.subscription_status})]}),p.email&&v.jsxs("div",{className:"detail-row",children:[v.jsx("span",{className:"detail-label",children:"Email:"}),v.jsx("span",{className:"detail-value",children:p.email})]}),p.billing_period&&v.jsxs("div",{className:"detail-row",children:[v.jsx("span",{className:"detail-label",children:"Billing Period:"}),v.jsx("span",{className:"detail-value",children:p.billing_period})]}),p.amount!==null&&p.amount!==void 0&&v.jsxs("div",{className:"detail-row",children:[v.jsx("span",{className:"detail-label",children:"Amount:"}),v.jsxs("span",{className:"detail-value",children:["$",p.amount," ",p.currency||""]})]}),p.current_period_start&&F(p.current_period_start)&&v.jsxs("div",{className:"detail-row",children:[v.jsx("span",{className:"detail-label",children:"Current Period Start:"}),v.jsx("span",{className:"detail-value",children:F(p.current_period_start)})]}),p.current_period_end&&F(p.current_period_end)&&v.jsxs("div",{className:"detail-row",children:[v.jsx("span",{className:"detail-label",children:"Current Period End:"}),v.jsx("span",{className:"detail-value",children:F(p.current_period_end)})]}),p.cancel_at_period_end&&v.jsxs("div",{className:"detail-row",children:[v.jsx("span",{className:"detail-label",children:"Cancellation:"}),v.jsx("span",{className:"detail-value",children:"Will cancel at period end"})]}),v.jsx("button",{onClick:()=>D(!0),className:"primary-button cancel-button",style:{marginTop:"30px"},children:"Cancel Subscription"})]})}),_&&v.jsx("div",{className:"modal-overlay",onClick:W=>W.stopPropagation(),children:v.jsxs("div",{className:"modal-content",onClick:W=>W.stopPropagation(),children:[v.jsx("h3",{children:"Cancel Subscription"}),v.jsx("p",{children:"Are you sure you want to cancel your subscription?"}),v.jsxs("div",{className:"modal-buttons",children:[v.jsx("button",{className:"modal-button modal-cancel",onClick:()=>D(!1),disabled:w,children:"Cancel"}),v.jsx("button",{className:"modal-button modal-confirm",onClick:j,disabled:w,children:w?"Processing...":"Confirm"})]})]})}),L&&v.jsx("div",{className:"toast-container",children:v.jsx("div",{className:"toast-message",children:"Subscription canceled successfully"})})]}):null},tf=({size:r=60,className:o=""})=>v.jsx("div",{className:`attendees-spinner ${o}`,style:{width:r,height:r},children:v.jsx("div",{className:"attendees-spinner-inner"})}),gb=({attendees:r=[]})=>{const o=R.useRef(null),a=R.useRef(null),f=R.useRef(null),[p,x]=R.useState(null),[y,b]=R.useState(!1),[w,E]=R.useState({}),[S,I]=R.useState(!1),[_,D]=R.useState({}),L=R.useRef(-1),B=R.useRef(null),[F,j]=R.useState(!1),[W,z]=R.useState(null),[J,ne]=R.useState({}),[de,q]=R.useState(!1),[ce,Z]=R.useState(null),Ae=R.useRef(null),ke=R.useRef(null),Ie=R.useRef({});R.useEffect(()=>{const H=window.matchMedia("(pointer: coarse)"),pe=()=>b(!!H.matches);return pe(),H.addEventListener?H.addEventListener("change",pe):H.addListener(pe),()=>{H.removeEventListener?H.removeEventListener("change",pe):H.removeListener(pe)}},[]),R.useEffect(()=>{const H=pe=>{a.current&&(a.current.contains(pe.target)||x(null))};return document.addEventListener("pointerdown",H,{capture:!0}),()=>{document.removeEventListener("pointerdown",H,{capture:!0})}},[]);const Pe=R.useCallback((H=1)=>{const pe=o.current;if(!pe)return;const Oe=Math.round(pe.clientWidth*.75)*H;pe.scrollBy({left:Oe,behavior:"smooth"})},[]),Fe=R.useCallback(()=>{const H=o.current;return H?H.scrollLeft>0:!1},[]),ee=R.useCallback(()=>{const H=o.current;return H?H.scrollLeft<H.scrollWidth-H.clientWidth-1:!1},[]),[He,xe]=R.useState({left:!1,right:!0});R.useEffect(()=>{const H=()=>{xe({left:Fe(),right:ee()})},pe=o.current;return pe&&(H(),pe.addEventListener("scroll",H),window.addEventListener("resize",H)),()=>{pe&&(pe.removeEventListener("scroll",H),window.removeEventListener("resize",H))}},[r.length,Fe,ee]);const he=R.useCallback(async H=>{if(S||H.length===0)return;const pe=H.filter(we=>!w[we]&&!_[we]);if(pe.length===0)return;I(!0);const Oe={..._};pe.forEach(we=>{Oe[we]=!0}),D(Oe);try{const we=localStorage.getItem("access_token"),oe=await fetch(`${window.server_url}/organizer_attendees/images`,{method:"POST",headers:{Authorization:`Bearer ${we}`,"Content-Type":"application/json"},body:JSON.stringify({usernames:pe})});if(!oe.ok)throw oe.status===401?new Error("Unauthorized"):new Error("Failed to load images");const Me=await oe.json();if(Me.status==="success"&&Me.images){const Ne={...w};pe.forEach(Ve=>{Me.images[Ve]?Ne[Ve]=`data:image/jpeg;base64,${Me.images[Ve]}`:Ne[Ve]=null}),E(Ne)}}catch(we){console.error("Error loading images:",we)}finally{I(!1);const we={..._};pe.forEach(oe=>{delete we[oe]}),D(we)}},[S,w,_]);R.useEffect(()=>{if(r.length===0||L.current>=0)return;const H=r.slice(0,30).map(pe=>pe.username);H.length>0&&(he(H),L.current=Math.min(29,r.length-1))},[r.length,he]),R.useEffect(()=>{if(r.length===0||!o.current)return;const H=new IntersectionObserver(Oe=>{B.current&&clearTimeout(B.current),B.current=setTimeout(()=>{Oe.forEach(we=>{if(we.isIntersecting){const oe=parseInt(we.target.dataset.index),Me=L.current;if(oe>=Me-5&&oe<r.length&&Me<r.length-1){const Ne=Me+1,Ve=Math.min(Ne+30,r.length);if(Ne<r.length){const me=r.slice(Ne,Ve).map(Xe=>Xe.username);he(me),L.current=Ve-1}}}})},150)},{root:o.current,rootMargin:"200px",threshold:.5});return o.current.querySelectorAll("[data-index]").forEach(Oe=>H.observe(Oe)),f.current=H,()=>{B.current&&clearTimeout(B.current),f.current&&f.current.disconnect()}},[r.length,he]);const Le=R.useCallback(async H=>{var pe,Oe,we,oe;if(Ie.current[H]){z(H),j(!0),Z(null);return}Ae.current&&Ae.current,Ae.current=H,q(!0),Z(null),j(!0),z(H);try{const Me=localStorage.getItem("access_token");if(!Me)throw new Error("Authentication required");const Ne=await fetch(`${window.server_url}/organizer_attendees/${H}/details`,{headers:{Authorization:`Bearer ${Me}`}});if(Ae.current!==H)return;if(Ne.status===401)throw localStorage.removeItem("access_token"),new Error("Session expired. Please log in again.");if(Ne.status===403)throw new Error("Access denied. Organizer permissions required.");if(Ne.status===404)throw new Error("Attendee details not found.");if(!Ne.ok)throw new Error("Failed to load attendee details");const Ve=await Ne.json();if(Ve.status==="success"&&Ve.attendee){const me={username:Ve.attendee.username,name:Ve.attendee.name||Ve.attendee.username,image_data:Ve.attendee.image_data?`data:image/jpeg;base64,${Ve.attendee.image_data}`:null,last_joined_date:Ve.attendee.last_joined_date,self_tags:((pe=Ve.attendee.tags)==null?void 0:pe.tags_work)||[],desiring_tags:((Oe=Ve.attendee.tags)==null?void 0:Oe.desiring_tags_work)||[],lobbies_attended:((we=Ve.attendee.stats)==null?void 0:we.lobbies_attended)||0,rounds_paired:((oe=Ve.attendee.stats)==null?void 0:oe.rounds_paired)||0};ne(Xe=>{const ut={...Xe,[H]:me};return Ie.current=ut,ut}),Ae.current===H&&z(H)}else throw new Error(Ve.error||"Failed to load attendee details")}catch(Me){Ae.current===H&&(console.error("Error fetching attendee details:",Me),Z(Me.message||"An error occurred while loading details."))}finally{Ae.current===H&&(q(!1),Ae.current=null)}},[]),fe=R.useCallback(()=>{ke.current&&clearTimeout(ke.current),j(!1),Z(null),ke.current=setTimeout(()=>{z(null),ke.current=null},300)},[]);R.useEffect(()=>()=>{ke.current&&clearTimeout(ke.current)},[]),R.useEffect(()=>{const H=pe=>{pe.key==="Escape"&&F&&(pe.stopPropagation(),fe())};return document.addEventListener("keydown",H,!0),()=>document.removeEventListener("keydown",H,!0)},[F,fe]),R.useEffect(()=>{if(F){const H=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=H}}},[F]);const K=R.useMemo(()=>r.map((H,pe)=>({username:H.username||`temp-${pe}`,name:H.name||H.username||`User ${pe+1}`,small_image_data:H.small_image_data||null})),[r]);return v.jsxs("section",{className:"attendees-root",ref:a,"aria-label":"Your Community",children:[v.jsxs("div",{className:"attendees-card",children:[v.jsx("header",{className:"attendees-header",children:v.jsx("h2",{className:"attendees-title",children:"Your Community"})}),v.jsxs("div",{className:"attendees-carouselWrap",children:[v.jsx("button",{type:"button",className:"attendees-arrow attendees-arrowLeft","aria-label":"Scroll left",onClick:()=>Pe(-1),disabled:!He.left||y,children:""}),v.jsx("div",{ref:o,className:"attendees-scroller",role:"list","aria-label":"Community attendees list",onMouseLeave:()=>{y||x(null)},children:K.map((H,pe)=>{const Oe=p===H.username,we=p!==null,oe=w[H.username],Me=_[H.username];return v.jsxs("div",{"data-index":pe,className:["attendees-item",Oe?"is-active":"",we&&!Oe?"is-dimmed":"",y?"is-touch":"is-mouse"].join(" "),role:"listitem",tabIndex:0,onMouseEnter:()=>{y||x(H.username)},onFocus:()=>x(H.username),onClick:()=>{y&&x(H.username),Le(H.username)},onKeyDown:Ne=>{(Ne.key==="Enter"||Ne.key===" ")&&(Ne.preventDefault(),x(H.username)),Ne.key==="Escape"&&x(null)},children:[v.jsx("div",{className:"attendees-avatarWrap","aria-hidden":"true",children:Me?v.jsx(tf,{size:30,className:"attendees-tile-spinner"}):oe?v.jsx("img",{className:"attendees-avatarImg",src:oe,alt:"",onError:Ne=>{Ne.target.src="/assets/fakeprofile.png"}}):v.jsx("img",{className:"attendees-avatarImg",src:"/assets/fakeprofile.png",alt:""})}),v.jsx("div",{className:"attendees-name",title:H.name,children:H.name})]},H.username)})}),v.jsx("button",{type:"button",className:"attendees-arrow attendees-arrowRight","aria-label":"Scroll right",onClick:()=>Pe(1),disabled:!He.right||y,children:""})]}),v.jsxs("div",{className:"attendees-dots","aria-hidden":"true",children:[v.jsx("span",{className:"attendees-dot is-on"}),v.jsx("span",{className:"attendees-dot"}),v.jsx("span",{className:"attendees-dot"}),v.jsx("span",{className:"attendees-dot"})]})]}),F&&v.jsx("div",{className:"attendee-modal-overlay",onClick:fe,role:"dialog","aria-modal":"true","aria-labelledby":"attendee-modal-title",children:v.jsx("div",{className:"attendee-modal-content",onClick:H=>H.stopPropagation(),children:de?v.jsxs("div",{className:"attendee-modal-loading",children:[v.jsx(tf,{size:60}),v.jsx("p",{children:"Loading attendee details..."})]}):ce?v.jsx("div",{className:"attendee-modal-error",children:v.jsx("p",{className:"attendee-modal-error-message",children:ce})}):W?(()=>{const H=J[W];return H?v.jsxs("div",{className:"attendee-modal-body",children:[v.jsxs("p",{children:["Details for: ",H.name]}),v.jsxs("p",{children:["Lobbies Attended: ",H.lobbies_attended]}),v.jsxs("p",{children:["Rounds Paired: ",H.rounds_paired]})]}):null})():null})})]})},mb=()=>{const{user:r,permissions:o,checkAuth:a}=R.useContext(gr),f=ar(),[p,x]=R.useState([]),[y,b]=R.useState(!0),[w,E]=R.useState(null);R.useEffect(()=>{o!==null&&o!=="admin"&&o!=="organizer"&&f("/organizer-signup")},[o,f]),R.useEffect(()=>{a()},[a]);const S=R.useCallback(async()=>{b(!0),E(null);try{const I=localStorage.getItem("access_token");if(!I){E("Authentication required"),b(!1);return}const _=await fetch(`${window.server_url}/organizer_attendees`,{headers:{Authorization:`Bearer ${I}`}});if(_.status===401){localStorage.removeItem("access_token"),f("/organizer-signup");return}if(_.status===403){E("Access denied. Organizer permissions required."),b(!1);return}if(!_.ok)throw new Error("Failed to load attendees");const D=await _.json();if(D.status==="success")x(D.attendees||[]);else throw new Error(D.error||"Failed to load attendees")}catch(I){console.error("Error fetching attendees:",I),I.message==="Failed to fetch"||I.message.includes("network")?E("Network error. Please check your connection and try again."):E(I.message||"An error occurred. Please try again.")}finally{b(!1)}},[f]);return R.useEffect(()=>{(o==="organizer"||o==="admin")&&S()},[o,S]),v.jsxs("div",{className:"organizer-dashboard",children:[v.jsxs("div",{className:"dashboard-header",children:[v.jsx("h1",{children:"Organizer Dashboard"}),v.jsx("button",{onClick:()=>f("/"),className:"dashboard-home-button",children:"Home"})]}),y?v.jsx("div",{className:"attendees-loading-container",children:v.jsx(tf,{size:60})}):w?v.jsxs("div",{className:"attendees-error-container",children:[v.jsx("div",{className:"attendees-error-message",children:w}),v.jsx("button",{className:"attendees-retry-button",onClick:S,children:"Retry"})]}):p.length===0?v.jsx("div",{className:"attendees-empty-container",children:v.jsx("div",{className:"attendees-empty-message",children:"No attendees yet"})}):v.jsx(gb,{attendees:p})]})},xb=5e3,yb=()=>{const{checkAuth:r,permissions:o,user:a}=R.useContext(gr),f=ar(),[p,x]=R.useState([]),[y,b]=R.useState(!0),[w,E]=R.useState(null),[S,I]=R.useState(!1);return R.useEffect(()=>{r()},[r]),R.useEffect(()=>{a==="topaz"&&o==="admin"?I(!0):o!==null&&a!==null&&f("/")},[o,a,f]),R.useEffect(()=>{if(!S)return;let _=!0,D,L=!0;const B=async()=>{L&&b(!0),E(null);try{const F=localStorage.getItem("access_token");if(!F)return;const j=await fetch(window.server_url+"/admin_all_lobbies",{headers:{Authorization:`Bearer ${F}`}});if(!j.ok)throw new Error("Failed to fetch lobbies");const W=await j.json();if(W.status!=="success"||!Array.isArray(W.lobbies))throw new Error("Invalid response format");if(!_)return;x(W.lobbies),console.log("Received lobbies data:",W.lobbies)}catch(F){_&&E(F.message||"Error fetching lobbies")}finally{_&&L&&b(!1),L=!1,D=setTimeout(B,xb)}};return B(),()=>{_=!1,D&&clearTimeout(D)}},[S]),y?v.jsx("div",{className:"master-lobby-container",children:v.jsxs("div",{className:"loading-state",children:[v.jsx("div",{className:"loading-spinner"}),v.jsx("p",{children:"Loading lobbies..."})]})}):w&&p.length===0?v.jsx("div",{className:"master-lobby-container",children:v.jsx("div",{className:"error-state",children:v.jsx("p",{children:w})})}):p.length===0?v.jsx("div",{className:"master-lobby-container",children:v.jsx("div",{className:"empty-state",children:v.jsx("p",{children:"No active lobbies found"})})}):v.jsxs("div",{className:"master-lobby-container",children:[v.jsx("button",{className:"back-button",onClick:()=>f(-1),children:"Back"}),w&&v.jsxs("div",{className:"error-banner",style:{backgroundColor:"#f8d7da",color:"#721c24",padding:"0.75rem",marginBottom:"1rem",borderRadius:"0.25rem",border:"1px solid #f5c6cb"},children:[w," (showing last known data)"]}),v.jsx("div",{className:"master-lobby-grid",children:p.map(_=>v.jsx("div",{className:"lobby-tile",children:v.jsxs("div",{className:"lobby-tile-content",children:[v.jsx("h3",{className:"lobby-code",children:_.code}),v.jsxs("div",{className:"lobby-stats",children:[v.jsxs("span",{className:"player-count",children:[_.player_count," players"]}),v.jsx("span",{className:"lobby-state",children:_.lobby_state})]}),v.jsxs("div",{style:{fontSize:"0.7rem",color:"#666",marginTop:"0.5rem"},children:["Debug: player_count=",_.player_count,", lobby_state=",_.lobby_state]})]})},_.code))})]})};Qx.createRoot(document.getElementById("root")).render(v.jsx(R.StrictMode,{children:v.jsx(Jx,{children:v.jsxs(By,{basename:"/",children:[v.jsx(VE,{}),v.jsx(zE,{}),v.jsxs(hy,{children:[v.jsx(Ar,{path:"/",element:v.jsx(jE,{})}),v.jsx(Ar,{path:"/login",element:v.jsx(UE,{})}),v.jsx(Ar,{path:"/signup",element:v.jsx(kE,{})}),v.jsx(Ar,{path:"/logout",element:v.jsx(WE,{})}),v.jsx(Ar,{path:"/lobby",element:v.jsx(hA,{})}),v.jsx(Ar,{path:"/admin_lobby_view",element:v.jsx(lb,{})}),v.jsx(Ar,{path:"/create_lobby",element:v.jsx(ub,{})}),v.jsx(Ar,{path:"/product-selection",element:v.jsx(cb,{})}),v.jsx(Ar,{path:"/organizer-signup",element:v.jsx(fb,{})}),v.jsx(Ar,{path:"/organizer-signup-success",element:v.jsx(hb,{})}),v.jsx(Ar,{path:"/organizer-account-details",element:v.jsx(pb,{})}),v.jsx(Ar,{path:"/organizer-dashboard",element:v.jsx(mb,{})}),v.jsx(Ar,{path:"/master_lobby_view",element:v.jsx(yb,{})})]})]})})}));
