(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))d(p);new MutationObserver(p=>{for(const x of p)if(x.type==="childList")for(const y of x.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&d(y)}).observe(document,{childList:!0,subtree:!0});function a(p){const x={};return p.integrity&&(x.integrity=p.integrity),p.referrerPolicy&&(x.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?x.credentials="include":p.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function d(p){if(p.ep)return;p.ep=!0;const x=a(p);fetch(p.href,x)}})();var Ql=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mp(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var tf={exports:{}},ya={},nf={exports:{}},yt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M0;function Fx(){if(M0)return yt;M0=1;var r=Symbol.for("react.element"),o=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),y=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),I=Symbol.iterator;function R($){return $===null||typeof $!="object"?null:($=I&&$[I]||$["@@iterator"],typeof $=="function"?$:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,B={};function j($,de,Ge){this.props=$,this.context=de,this.refs=B,this.updater=Ge||k}j.prototype.isReactComponent={},j.prototype.setState=function($,de){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,de,"setState")},j.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function V(){}V.prototype=j.prototype;function H($,de,Ge){this.props=$,this.context=de,this.refs=B,this.updater=Ge||k}var U=H.prototype=new V;U.constructor=H,L(U,j.prototype),U.isPureReactComponent=!0;var ne=Array.isArray,se=Object.prototype.hasOwnProperty,re={current:null},q={key:!0,ref:!0,__self:!0,__source:!0};function ue($,de,Ge){var We,ut={},Ee=null,at=null;if(de!=null)for(We in de.ref!==void 0&&(at=de.ref),de.key!==void 0&&(Ee=""+de.key),de)se.call(de,We)&&!q.hasOwnProperty(We)&&(ut[We]=de[We]);var He=arguments.length-2;if(He===1)ut.children=Ge;else if(1<He){for(var rt=Array(He),Be=0;Be<He;Be++)rt[Be]=arguments[Be+2];ut.children=rt}if($&&$.defaultProps)for(We in He=$.defaultProps,He)ut[We]===void 0&&(ut[We]=He[We]);return{$$typeof:r,type:$,key:Ee,ref:at,props:ut,_owner:re.current}}function J($,de){return{$$typeof:r,type:$.type,key:de,ref:$.ref,props:$.props,_owner:$._owner}}function Ie($){return typeof $=="object"&&$!==null&&$.$$typeof===r}function ke($){var de={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(Ge){return de[Ge]})}var be=/\/+/g;function Re($,de){return typeof $=="object"&&$!==null&&$.key!=null?ke(""+$.key):de.toString(36)}function De($,de,Ge,We,ut){var Ee=typeof $;(Ee==="undefined"||Ee==="boolean")&&($=null);var at=!1;if($===null)at=!0;else switch(Ee){case"string":case"number":at=!0;break;case"object":switch($.$$typeof){case r:case o:at=!0}}if(at)return at=$,ut=ut(at),$=We===""?"."+Re(at,0):We,ne(ut)?(Ge="",$!=null&&(Ge=$.replace(be,"$&/")+"/"),De(ut,de,Ge,"",function(Be){return Be})):ut!=null&&(Ie(ut)&&(ut=J(ut,Ge+(!ut.key||at&&at.key===ut.key?"":(""+ut.key).replace(be,"$&/")+"/")+$)),de.push(ut)),1;if(at=0,We=We===""?".":We+":",ne($))for(var He=0;He<$.length;He++){Ee=$[He];var rt=We+Re(Ee,He);at+=De(Ee,de,Ge,rt,ut)}else if(rt=R($),typeof rt=="function")for($=rt.call($),He=0;!(Ee=$.next()).done;)Ee=Ee.value,rt=We+Re(Ee,He++),at+=De(Ee,de,Ge,rt,ut);else if(Ee==="object")throw de=String($),Error("Objects are not valid as a React child (found: "+(de==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":de)+"). If you meant to render a collection of children, use an array instead.");return at}function Z($,de,Ge){if($==null)return $;var We=[],ut=0;return De($,We,"","",function(Ee){return de.call(Ge,Ee,ut++)}),We}function Te($){if($._status===-1){var de=$._result;de=de(),de.then(function(Ge){($._status===0||$._status===-1)&&($._status=1,$._result=Ge)},function(Ge){($._status===0||$._status===-1)&&($._status=2,$._result=Ge)}),$._status===-1&&($._status=0,$._result=de)}if($._status===1)return $._result.default;throw $._result}var fe={current:null},ce={transition:null},ge={ReactCurrentDispatcher:fe,ReactCurrentBatchConfig:ce,ReactCurrentOwner:re};function pe(){throw Error("act(...) is not supported in production builds of React.")}return yt.Children={map:Z,forEach:function($,de,Ge){Z($,function(){de.apply(this,arguments)},Ge)},count:function($){var de=0;return Z($,function(){de++}),de},toArray:function($){return Z($,function(de){return de})||[]},only:function($){if(!Ie($))throw Error("React.Children.only expected to receive a single React element child.");return $}},yt.Component=j,yt.Fragment=a,yt.Profiler=p,yt.PureComponent=H,yt.StrictMode=d,yt.Suspense=w,yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,yt.act=pe,yt.cloneElement=function($,de,Ge){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var We=L({},$.props),ut=$.key,Ee=$.ref,at=$._owner;if(de!=null){if(de.ref!==void 0&&(Ee=de.ref,at=re.current),de.key!==void 0&&(ut=""+de.key),$.type&&$.type.defaultProps)var He=$.type.defaultProps;for(rt in de)se.call(de,rt)&&!q.hasOwnProperty(rt)&&(We[rt]=de[rt]===void 0&&He!==void 0?He[rt]:de[rt])}var rt=arguments.length-2;if(rt===1)We.children=Ge;else if(1<rt){He=Array(rt);for(var Be=0;Be<rt;Be++)He[Be]=arguments[Be+2];We.children=He}return{$$typeof:r,type:$.type,key:ut,ref:Ee,props:We,_owner:at}},yt.createContext=function($){return $={$$typeof:y,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:x,_context:$},$.Consumer=$},yt.createElement=ue,yt.createFactory=function($){var de=ue.bind(null,$);return de.type=$,de},yt.createRef=function(){return{current:null}},yt.forwardRef=function($){return{$$typeof:A,render:$}},yt.isValidElement=Ie,yt.lazy=function($){return{$$typeof:S,_payload:{_status:-1,_result:$},_init:Te}},yt.memo=function($,de){return{$$typeof:E,type:$,compare:de===void 0?null:de}},yt.startTransition=function($){var de=ce.transition;ce.transition={};try{$()}finally{ce.transition=de}},yt.unstable_act=pe,yt.useCallback=function($,de){return fe.current.useCallback($,de)},yt.useContext=function($){return fe.current.useContext($)},yt.useDebugValue=function(){},yt.useDeferredValue=function($){return fe.current.useDeferredValue($)},yt.useEffect=function($,de){return fe.current.useEffect($,de)},yt.useId=function(){return fe.current.useId()},yt.useImperativeHandle=function($,de,Ge){return fe.current.useImperativeHandle($,de,Ge)},yt.useInsertionEffect=function($,de){return fe.current.useInsertionEffect($,de)},yt.useLayoutEffect=function($,de){return fe.current.useLayoutEffect($,de)},yt.useMemo=function($,de){return fe.current.useMemo($,de)},yt.useReducer=function($,de,Ge){return fe.current.useReducer($,de,Ge)},yt.useRef=function($){return fe.current.useRef($)},yt.useState=function($){return fe.current.useState($)},yt.useSyncExternalStore=function($,de,Ge){return fe.current.useSyncExternalStore($,de,Ge)},yt.useTransition=function(){return fe.current.useTransition()},yt.version="18.3.1",yt}var D0;function Qf(){return D0||(D0=1,nf.exports=Fx()),nf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L0;function jx(){if(L0)return ya;L0=1;var r=Qf(),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),d=Object.prototype.hasOwnProperty,p=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x={key:!0,ref:!0,__self:!0,__source:!0};function y(A,w,E){var S,I={},R=null,k=null;E!==void 0&&(R=""+E),w.key!==void 0&&(R=""+w.key),w.ref!==void 0&&(k=w.ref);for(S in w)d.call(w,S)&&!x.hasOwnProperty(S)&&(I[S]=w[S]);if(A&&A.defaultProps)for(S in w=A.defaultProps,w)I[S]===void 0&&(I[S]=w[S]);return{$$typeof:o,type:A,key:R,ref:k,props:I,_owner:p.current}}return ya.Fragment=a,ya.jsx=y,ya.jsxs=y,ya}var B0;function Vx(){return B0||(B0=1,tf.exports=jx()),tf.exports}var T=Vx(),O=Qf();const tn=Mp(O);var Jl={},rf={exports:{}},yr={},sf={exports:{}},of={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F0;function zx(){return F0||(F0=1,function(r){function o(ce,ge){var pe=ce.length;ce.push(ge);e:for(;0<pe;){var $=pe-1>>>1,de=ce[$];if(0<p(de,ge))ce[$]=ge,ce[pe]=de,pe=$;else break e}}function a(ce){return ce.length===0?null:ce[0]}function d(ce){if(ce.length===0)return null;var ge=ce[0],pe=ce.pop();if(pe!==ge){ce[0]=pe;e:for(var $=0,de=ce.length,Ge=de>>>1;$<Ge;){var We=2*($+1)-1,ut=ce[We],Ee=We+1,at=ce[Ee];if(0>p(ut,pe))Ee<de&&0>p(at,ut)?(ce[$]=at,ce[Ee]=pe,$=Ee):(ce[$]=ut,ce[We]=pe,$=We);else if(Ee<de&&0>p(at,pe))ce[$]=at,ce[Ee]=pe,$=Ee;else break e}}return ge}function p(ce,ge){var pe=ce.sortIndex-ge.sortIndex;return pe!==0?pe:ce.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var x=performance;r.unstable_now=function(){return x.now()}}else{var y=Date,A=y.now();r.unstable_now=function(){return y.now()-A}}var w=[],E=[],S=1,I=null,R=3,k=!1,L=!1,B=!1,j=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function U(ce){for(var ge=a(E);ge!==null;){if(ge.callback===null)d(E);else if(ge.startTime<=ce)d(E),ge.sortIndex=ge.expirationTime,o(w,ge);else break;ge=a(E)}}function ne(ce){if(B=!1,U(ce),!L)if(a(w)!==null)L=!0,Te(se);else{var ge=a(E);ge!==null&&fe(ne,ge.startTime-ce)}}function se(ce,ge){L=!1,B&&(B=!1,V(ue),ue=-1),k=!0;var pe=R;try{for(U(ge),I=a(w);I!==null&&(!(I.expirationTime>ge)||ce&&!ke());){var $=I.callback;if(typeof $=="function"){I.callback=null,R=I.priorityLevel;var de=$(I.expirationTime<=ge);ge=r.unstable_now(),typeof de=="function"?I.callback=de:I===a(w)&&d(w),U(ge)}else d(w);I=a(w)}if(I!==null)var Ge=!0;else{var We=a(E);We!==null&&fe(ne,We.startTime-ge),Ge=!1}return Ge}finally{I=null,R=pe,k=!1}}var re=!1,q=null,ue=-1,J=5,Ie=-1;function ke(){return!(r.unstable_now()-Ie<J)}function be(){if(q!==null){var ce=r.unstable_now();Ie=ce;var ge=!0;try{ge=q(!0,ce)}finally{ge?Re():(re=!1,q=null)}}else re=!1}var Re;if(typeof H=="function")Re=function(){H(be)};else if(typeof MessageChannel<"u"){var De=new MessageChannel,Z=De.port2;De.port1.onmessage=be,Re=function(){Z.postMessage(null)}}else Re=function(){j(be,0)};function Te(ce){q=ce,re||(re=!0,Re())}function fe(ce,ge){ue=j(function(){ce(r.unstable_now())},ge)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ce){ce.callback=null},r.unstable_continueExecution=function(){L||k||(L=!0,Te(se))},r.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<ce?Math.floor(1e3/ce):5},r.unstable_getCurrentPriorityLevel=function(){return R},r.unstable_getFirstCallbackNode=function(){return a(w)},r.unstable_next=function(ce){switch(R){case 1:case 2:case 3:var ge=3;break;default:ge=R}var pe=R;R=ge;try{return ce()}finally{R=pe}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ce,ge){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var pe=R;R=ce;try{return ge()}finally{R=pe}},r.unstable_scheduleCallback=function(ce,ge,pe){var $=r.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?$+pe:$):pe=$,ce){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=pe+de,ce={id:S++,callback:ge,priorityLevel:ce,startTime:pe,expirationTime:de,sortIndex:-1},pe>$?(ce.sortIndex=pe,o(E,ce),a(w)===null&&ce===a(E)&&(B?(V(ue),ue=-1):B=!0,fe(ne,pe-$))):(ce.sortIndex=de,o(w,ce),L||k||(L=!0,Te(se))),ce},r.unstable_shouldYield=ke,r.unstable_wrapCallback=function(ce){var ge=R;return function(){var pe=R;R=ge;try{return ce.apply(this,arguments)}finally{R=pe}}}}(of)),of}var j0;function Ux(){return j0||(j0=1,sf.exports=zx()),sf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V0;function Wx(){if(V0)return yr;V0=1;var r=Qf(),o=Ux();function a(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,f=1;f<arguments.length;f++)s+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d=new Set,p={};function x(t,s){y(t,s),y(t+"Capture",s)}function y(t,s){for(p[t]=s,t=0;t<s.length;t++)d.add(s[t])}var A=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),w=Object.prototype.hasOwnProperty,E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S={},I={};function R(t){return w.call(I,t)?!0:w.call(S,t)?!1:E.test(t)?I[t]=!0:(S[t]=!0,!1)}function k(t,s,f,g){if(f!==null&&f.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return g?!1:f!==null?!f.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function L(t,s,f,g){if(s===null||typeof s>"u"||k(t,s,f,g))return!0;if(g)return!1;if(f!==null)switch(f.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function B(t,s,f,g,C,b,M){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=g,this.attributeNamespace=C,this.mustUseProperty=f,this.propertyName=t,this.type=s,this.sanitizeURL=b,this.removeEmptyString=M}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){j[t]=new B(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];j[s]=new B(s,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){j[t]=new B(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){j[t]=new B(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){j[t]=new B(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){j[t]=new B(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){j[t]=new B(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){j[t]=new B(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){j[t]=new B(t,5,!1,t.toLowerCase(),null,!1,!1)});var V=/[\-:]([a-z])/g;function H(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(V,H);j[s]=new B(s,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(V,H);j[s]=new B(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(V,H);j[s]=new B(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){j[t]=new B(t,1,!1,t.toLowerCase(),null,!1,!1)}),j.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){j[t]=new B(t,1,!1,t.toLowerCase(),null,!0,!0)});function U(t,s,f,g){var C=j.hasOwnProperty(s)?j[s]:null;(C!==null?C.type!==0:g||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(L(s,f,C,g)&&(f=null),g||C===null?R(s)&&(f===null?t.removeAttribute(s):t.setAttribute(s,""+f)):C.mustUseProperty?t[C.propertyName]=f===null?C.type===3?!1:"":f:(s=C.attributeName,g=C.attributeNamespace,f===null?t.removeAttribute(s):(C=C.type,f=C===3||C===4&&f===!0?"":""+f,g?t.setAttributeNS(g,s,f):t.setAttribute(s,f))))}var ne=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,se=Symbol.for("react.element"),re=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),ue=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),Ie=Symbol.for("react.provider"),ke=Symbol.for("react.context"),be=Symbol.for("react.forward_ref"),Re=Symbol.for("react.suspense"),De=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),Te=Symbol.for("react.lazy"),fe=Symbol.for("react.offscreen"),ce=Symbol.iterator;function ge(t){return t===null||typeof t!="object"?null:(t=ce&&t[ce]||t["@@iterator"],typeof t=="function"?t:null)}var pe=Object.assign,$;function de(t){if($===void 0)try{throw Error()}catch(f){var s=f.stack.trim().match(/\n( *(at )?)/);$=s&&s[1]||""}return`
`+$+t}var Ge=!1;function We(t,s){if(!t||Ge)return"";Ge=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(le){var g=le}Reflect.construct(t,[],s)}else{try{s.call()}catch(le){g=le}t.call(s.prototype)}else{try{throw Error()}catch(le){g=le}t()}}catch(le){if(le&&g&&typeof le.stack=="string"){for(var C=le.stack.split(`
`),b=g.stack.split(`
`),M=C.length-1,W=b.length-1;1<=M&&0<=W&&C[M]!==b[W];)W--;for(;1<=M&&0<=W;M--,W--)if(C[M]!==b[W]){if(M!==1||W!==1)do if(M--,W--,0>W||C[M]!==b[W]){var X=`
`+C[M].replace(" at new "," at ");return t.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",t.displayName)),X}while(1<=M&&0<=W);break}}}finally{Ge=!1,Error.prepareStackTrace=f}return(t=t?t.displayName||t.name:"")?de(t):""}function ut(t){switch(t.tag){case 5:return de(t.type);case 16:return de("Lazy");case 13:return de("Suspense");case 19:return de("SuspenseList");case 0:case 2:case 15:return t=We(t.type,!1),t;case 11:return t=We(t.type.render,!1),t;case 1:return t=We(t.type,!0),t;default:return""}}function Ee(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case q:return"Fragment";case re:return"Portal";case J:return"Profiler";case ue:return"StrictMode";case Re:return"Suspense";case De:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ke:return(t.displayName||"Context")+".Consumer";case Ie:return(t._context.displayName||"Context")+".Provider";case be:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Z:return s=t.displayName||null,s!==null?s:Ee(t.type)||"Memo";case Te:s=t._payload,t=t._init;try{return Ee(t(s))}catch{}}return null}function at(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ee(s);case 8:return s===ue?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function He(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rt(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Be(t){var s=rt(t)?"checked":"value",f=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),g=""+t[s];if(!t.hasOwnProperty(s)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var C=f.get,b=f.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return C.call(this)},set:function(M){g=""+M,b.call(this,M)}}),Object.defineProperty(t,s,{enumerable:f.enumerable}),{getValue:function(){return g},setValue:function(M){g=""+M},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Ne(t){t._valueTracker||(t._valueTracker=Be(t))}function mt(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var f=s.getValue(),g="";return t&&(g=rt(t)?t.checked?"true":"false":t.value),t=g,t!==f?(s.setValue(t),!0):!1}function Oe(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function wt(t,s){var f=s.checked;return pe({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??t._wrapperState.initialChecked})}function Ht(t,s){var f=s.defaultValue==null?"":s.defaultValue,g=s.checked!=null?s.checked:s.defaultChecked;f=He(s.value!=null?s.value:f),t._wrapperState={initialChecked:g,initialValue:f,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function $t(t,s){s=s.checked,s!=null&&U(t,"checked",s,!1)}function Rt(t,s){$t(t,s);var f=He(s.value),g=s.type;if(f!=null)g==="number"?(f===0&&t.value===""||t.value!=f)&&(t.value=""+f):t.value!==""+f&&(t.value=""+f);else if(g==="submit"||g==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?ht(t,s.type,f):s.hasOwnProperty("defaultValue")&&ht(t,s.type,He(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function Tt(t,s,f){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var g=s.type;if(!(g!=="submit"&&g!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,f||s===t.value||(t.value=s),t.defaultValue=s}f=t.name,f!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,f!==""&&(t.name=f)}function ht(t,s,f){(s!=="number"||Oe(t.ownerDocument)!==t)&&(f==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+f&&(t.defaultValue=""+f))}var sr=Array.isArray;function _e(t,s,f,g){if(t=t.options,s){s={};for(var C=0;C<f.length;C++)s["$"+f[C]]=!0;for(f=0;f<t.length;f++)C=s.hasOwnProperty("$"+t[f].value),t[f].selected!==C&&(t[f].selected=C),C&&g&&(t[f].defaultSelected=!0)}else{for(f=""+He(f),s=null,C=0;C<t.length;C++){if(t[C].value===f){t[C].selected=!0,g&&(t[C].defaultSelected=!0);return}s!==null||t[C].disabled||(s=t[C])}s!==null&&(s.selected=!0)}}function xn(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(a(91));return pe({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Lt(t,s){var f=s.value;if(f==null){if(f=s.children,s=s.defaultValue,f!=null){if(s!=null)throw Error(a(92));if(sr(f)){if(1<f.length)throw Error(a(93));f=f[0]}s=f}s==null&&(s=""),f=s}t._wrapperState={initialValue:He(f)}}function Fe(t,s){var f=He(s.value),g=He(s.defaultValue);f!=null&&(f=""+f,f!==t.value&&(t.value=f),s.defaultValue==null&&t.defaultValue!==f&&(t.defaultValue=f)),g!=null&&(t.defaultValue=""+g)}function ct(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function it(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gn(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?it(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var vt,At=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,f,g,C){MSApp.execUnsafeLocalFunction(function(){return t(s,f,g,C)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(vt=vt||document.createElement("div"),vt.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=vt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function cn(t,s){if(s){var f=t.firstChild;if(f&&f===t.lastChild&&f.nodeType===3){f.nodeValue=s;return}}t.textContent=s}var nn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xn=["Webkit","ms","Moz","O"];Object.keys(nn).forEach(function(t){Xn.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),nn[s]=nn[t]})});function xt(t,s,f){return s==null||typeof s=="boolean"||s===""?"":f||typeof s!="number"||s===0||nn.hasOwnProperty(t)&&nn[t]?(""+s).trim():s+"px"}function we(t,s){t=t.style;for(var f in s)if(s.hasOwnProperty(f)){var g=f.indexOf("--")===0,C=xt(f,s[f],g);f==="float"&&(f="cssFloat"),g?t.setProperty(f,C):t[f]=C}}var zt=pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nt(t,s){if(s){if(zt[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(a(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(a(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(a(61))}if(s.style!=null&&typeof s.style!="object")throw Error(a(62))}}function jt(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ur=null;function yi(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vi=null,pt=null,Yn=null;function xs(t){if(t=ra(t)){if(typeof Vi!="function")throw Error(a(280));var s=t.stateNode;s&&(s=hl(s),Vi(t.stateNode,t.type,s))}}function wi(t){pt?Yn?Yn.push(t):Yn=[t]:pt=t}function Kn(){if(pt){var t=pt,s=Yn;if(Yn=pt=null,xs(t),s)for(t=0;t<s.length;t++)xs(s[t])}}function vi(t,s){return t(s)}function rn(){}var wr=!1;function Ci(t,s,f){if(wr)return t(s,f);wr=!0;try{return vi(t,s,f)}finally{wr=!1,(pt!==null||Yn!==null)&&(rn(),Kn())}}function yn(t,s){var f=t.stateNode;if(f===null)return null;var g=hl(f);if(g===null)return null;f=g[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(t=t.type,g=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!g;break e;default:t=!1}if(t)return null;if(f&&typeof f!="function")throw Error(a(231,s,typeof f));return f}var ys=!1;if(A)try{var Zn={};Object.defineProperty(Zn,"passive",{get:function(){ys=!0}}),window.addEventListener("test",Zn,Zn),window.removeEventListener("test",Zn,Zn)}catch{ys=!1}function ws(t,s,f,g,C,b,M,W,X){var le=Array.prototype.slice.call(arguments,3);try{s.apply(f,le)}catch(ye){this.onError(ye)}}var fn=!1,dr=null,Tn=!1,Pe=null,ti={onError:function(t){fn=!0,dr=t}};function vs(t,s,f,g,C,b,M,W,X){fn=!1,dr=null,ws.apply(ti,arguments)}function Sn(t,s,f,g,C,b,M,W,X){if(vs.apply(this,arguments),fn){if(fn){var le=dr;fn=!1,dr=null}else throw Error(a(198));Tn||(Tn=!0,Pe=le)}}function $n(t){var s=t,f=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(f=s.return),t=s.return;while(t)}return s.tag===3?f:null}function ni(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function Me(t){if($n(t)!==t)throw Error(a(188))}function $e(t){var s=t.alternate;if(!s){if(s=$n(t),s===null)throw Error(a(188));return s!==t?null:t}for(var f=t,g=s;;){var C=f.return;if(C===null)break;var b=C.alternate;if(b===null){if(g=C.return,g!==null){f=g;continue}break}if(C.child===b.child){for(b=C.child;b;){if(b===f)return Me(C),t;if(b===g)return Me(C),s;b=b.sibling}throw Error(a(188))}if(f.return!==g.return)f=C,g=b;else{for(var M=!1,W=C.child;W;){if(W===f){M=!0,f=C,g=b;break}if(W===g){M=!0,g=C,f=b;break}W=W.sibling}if(!M){for(W=b.child;W;){if(W===f){M=!0,f=b,g=C;break}if(W===g){M=!0,g=b,f=C;break}W=W.sibling}if(!M)throw Error(a(189))}}if(f.alternate!==g)throw Error(a(190))}if(f.tag!==3)throw Error(a(188));return f.stateNode.current===f?t:s}function tt(t){return t=$e(t),t!==null?Ut(t):null}function Ut(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=Ut(t);if(s!==null)return s;t=t.sibling}return null}var je=o.unstable_scheduleCallback,St=o.unstable_cancelCallback,Bt=o.unstable_shouldYield,qs=o.unstable_requestPaint,_t=o.unstable_now,or=o.unstable_getCurrentPriorityLevel,he=o.unstable_ImmediatePriority,Bo=o.unstable_UserBlockingPriority,Mt=o.unstable_NormalPriority,Wr=o.unstable_LowPriority,$a=o.unstable_IdlePriority,It=null,ft=null;function Ct(t){if(ft&&typeof ft.onCommitFiberRoot=="function")try{ft.onCommitFiberRoot(It,t,void 0,(t.current.flags&128)===128)}catch{}}var ar=Math.clz32?Math.clz32:wn,Fo=Math.log,jo=Math.LN2;function wn(t){return t>>>=0,t===0?32:31-(Fo(t)/jo|0)|0}var vr=64,Qs=4194304;function Gt(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Cr(t,s){var f=t.pendingLanes;if(f===0)return 0;var g=0,C=t.suspendedLanes,b=t.pingedLanes,M=f&268435455;if(M!==0){var W=M&~C;W!==0?g=Gt(W):(b&=M,b!==0&&(g=Gt(b)))}else M=f&~C,M!==0?g=Gt(M):b!==0&&(g=Gt(b));if(g===0)return 0;if(s!==0&&s!==g&&!(s&C)&&(C=g&-g,b=s&-s,C>=b||C===16&&(b&4194240)!==0))return s;if(g&4&&(g|=f&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=g;0<s;)f=31-ar(s),C=1<<f,g|=t[f],s&=~C;return g}function Du(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zi(t,s){for(var f=t.suspendedLanes,g=t.pingedLanes,C=t.expirationTimes,b=t.pendingLanes;0<b;){var M=31-ar(b),W=1<<M,X=C[M];X===-1?(!(W&f)||W&g)&&(C[M]=Du(W,s)):X<=s&&(t.expiredLanes|=W),b&=~W}}function Ft(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function In(){var t=vr;return vr<<=1,!(vr&4194240)&&(vr=64),t}function ee(t){for(var s=[],f=0;31>f;f++)s.push(t);return s}function F(t,s,f){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-ar(s),t[s]=f}function Ye(t,s){var f=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var g=t.eventTimes;for(t=t.expirationTimes;0<f;){var C=31-ar(f),b=1<<C;s[C]=0,g[C]=-1,t[C]=-1,f&=~b}}function dn(t,s){var f=t.entangledLanes|=s;for(t=t.entanglements;f;){var g=31-ar(f),C=1<<g;C&s|t[g]&s&&(t[g]|=s),f&=~C}}var dt=0;function qa(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Js,qn,Ke,Xt,Vo,zo=!1,Ui=[],Er=null,Rr=null,ri=null,Jt=new Map,Hr=new Map,Fn=[],Je="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qa(t,s){switch(t){case"focusin":case"focusout":Er=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":ri=null;break;case"pointerover":case"pointerout":Jt.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hr.delete(s.pointerId)}}function st(t,s,f,g,C,b){return t===null||t.nativeEvent!==b?(t={blockedOn:s,domEventName:f,eventSystemFlags:g,nativeEvent:b,targetContainers:[C]},s!==null&&(s=ra(s),s!==null&&qn(s)),t):(t.eventSystemFlags|=g,s=t.targetContainers,C!==null&&s.indexOf(C)===-1&&s.push(C),t)}function Nn(t,s,f,g,C){switch(s){case"focusin":return Er=st(Er,t,s,f,g,C),!0;case"dragenter":return Rr=st(Rr,t,s,f,g,C),!0;case"mouseover":return ri=st(ri,t,s,f,g,C),!0;case"pointerover":var b=C.pointerId;return Jt.set(b,st(Jt.get(b)||null,t,s,f,g,C)),!0;case"gotpointercapture":return b=C.pointerId,Hr.set(b,st(Hr.get(b)||null,t,s,f,g,C)),!0}return!1}function Ja(t){var s=_s(t.target);if(s!==null){var f=$n(s);if(f!==null){if(s=f.tag,s===13){if(s=ni(f),s!==null){t.blockedOn=s,Vo(t.priority,function(){Ke(f)});return}}else if(s===3&&f.stateNode.current.memoizedState.isDehydrated){t.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wi(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var f=eo(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(f===null){f=t.nativeEvent;var g=new f.constructor(f.type,f);Ur=g,f.target.dispatchEvent(g),Ur=null}else return s=ra(f),s!==null&&qn(s),t.blockedOn=f,!1;s.shift()}return!0}function Uo(t,s,f){Wi(t)&&f.delete(s)}function Ei(){zo=!1,Er!==null&&Wi(Er)&&(Er=null),Rr!==null&&Wi(Rr)&&(Rr=null),ri!==null&&Wi(ri)&&(ri=null),Jt.forEach(Uo),Hr.forEach(Uo)}function Cs(t,s){t.blockedOn===s&&(t.blockedOn=null,zo||(zo=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ei)))}function Gr(t){function s(C){return Cs(C,t)}if(0<Ui.length){Cs(Ui[0],t);for(var f=1;f<Ui.length;f++){var g=Ui[f];g.blockedOn===t&&(g.blockedOn=null)}}for(Er!==null&&Cs(Er,t),Rr!==null&&Cs(Rr,t),ri!==null&&Cs(ri,t),Jt.forEach(s),Hr.forEach(s),f=0;f<Fn.length;f++)g=Fn[f],g.blockedOn===t&&(g.blockedOn=null);for(;0<Fn.length&&(f=Fn[0],f.blockedOn===null);)Ja(f),f.blockedOn===null&&Fn.shift()}var _r=ne.ReactCurrentBatchConfig,ii=!0;function el(t,s,f,g){var C=dt,b=_r.transition;_r.transition=null;try{dt=1,Ai(t,s,f,g)}finally{dt=C,_r.transition=b}}function Es(t,s,f,g){var C=dt,b=_r.transition;_r.transition=null;try{dt=4,Ai(t,s,f,g)}finally{dt=C,_r.transition=b}}function Ai(t,s,f,g){if(ii){var C=eo(t,s,f,g);if(C===null)Gu(t,s,g,Rn,f),Qa(t,g);else if(Nn(C,t,s,f,g))g.stopPropagation();else if(Qa(t,g),s&4&&-1<Je.indexOf(t)){for(;C!==null;){var b=ra(C);if(b!==null&&Js(b),b=eo(t,s,f,g),b===null&&Gu(t,s,g,Rn,f),b===C)break;C=b}C!==null&&g.stopPropagation()}else Gu(t,s,g,null,f)}}var Rn=null;function eo(t,s,f,g){if(Rn=null,t=yi(g),t=_s(t),t!==null)if(s=$n(t),s===null)t=null;else if(f=s.tag,f===13){if(t=ni(s),t!==null)return t;t=null}else if(f===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return Rn=t,null}function Wo(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(or()){case he:return 1;case Bo:return 4;case Mt:case Wr:return 16;case $a:return 536870912;default:return 16}default:return 16}}var Xr=null,Ho=null,to=null;function tl(){if(to)return to;var t,s=Ho,f=s.length,g,C="value"in Xr?Xr.value:Xr.textContent,b=C.length;for(t=0;t<f&&s[t]===C[t];t++);var M=f-t;for(g=1;g<=M&&s[f-g]===C[b-g];g++);return to=C.slice(t,1<g?1-g:void 0)}function Pt(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function As(){return!0}function Ss(){return!1}function hn(t){function s(f,g,C,b,M){this._reactName=f,this._targetInst=C,this.type=g,this.nativeEvent=b,this.target=M,this.currentTarget=null;for(var W in t)t.hasOwnProperty(W)&&(f=t[W],this[W]=f?f(b):b[W]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?As:Ss,this.isPropagationStopped=Ss,this}return pe(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=As)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=As)},persist:function(){},isPersistent:As}),s}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ae=hn(Hi),lt=pe({},Hi,{view:0,detail:0}),_n=hn(lt),Gi,no,bs,ro=pe({},lt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ts,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bs&&(bs&&t.type==="mousemove"?(Gi=t.screenX-bs.screenX,no=t.screenY-bs.screenY):no=Gi=0,bs=t),Gi)},movementY:function(t){return"movementY"in t?t.movementY:no}}),nl=hn(ro),Go=pe({},ro,{dataTransfer:0}),vn=hn(Go),Xo=pe({},lt,{relatedTarget:0}),Yt=hn(Xo),io=pe({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),Si=hn(io),Vt=pe({},Hi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ze=hn(Vt),Lu=pe({},Hi,{data:0}),Wt=hn(Lu),bi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pr(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Bu[t])?!!s[t]:!1}function Ts(){return Pr}var rl=pe({},lt,{key:function(t){if(t.key){var s=bi[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Pt(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Xi[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ts,charCode:function(t){return t.type==="keypress"?Pt(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pt(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Yo=hn(rl),il=pe({},ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ko=hn(il),Fu=pe({},lt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ts}),Yi=hn(Fu),Zo=pe({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),ju=hn(Zo),Is=pe({},ro,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Vu=hn(Is),si=[9,13,27,32],Ki=A&&"CompositionEvent"in window,Mn=null;A&&"documentMode"in document&&(Mn=document.documentMode);var sl=A&&"TextEvent"in window&&!Mn,Ar=A&&(!Ki||Mn&&8<Mn&&11>=Mn),ol=" ",so=!1;function al(t,s){switch(t){case"keyup":return si.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $o(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var jn=!1;function zu(t,s){switch(t){case"compositionend":return $o(s);case"keypress":return s.which!==32?null:(so=!0,ol);case"textInput":return t=s.data,t===ol&&so?null:t;default:return null}}function qo(t,s){if(jn)return t==="compositionend"||!Ki&&al(t,s)?(t=tl(),to=Ho=Xr=null,jn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ar&&s.locale!=="ko"?null:s.data;default:return null}}var Ns={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bt(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Ns[t.type]:s==="textarea"}function Rs(t,s,f,g){wi(g),s=cl(s,"onChange"),0<s.length&&(f=new ae("onChange","change",null,f,g),t.push({event:f,listeners:s}))}var _=null,e=null;function n(t){$d(t,0)}function i(t){var s=lo(t);if(mt(s))return t}function l(t,s){if(t==="change")return s}var u=!1;if(A){var c;if(A){var h="oninput"in document;if(!h){var m=document.createElement("div");m.setAttribute("oninput","return;"),h=typeof m.oninput=="function"}c=h}else c=!1;u=c&&(!document.documentMode||9<document.documentMode)}function v(){_&&(_.detachEvent("onpropertychange",N),e=_=null)}function N(t){if(t.propertyName==="value"&&i(e)){var s=[];Rs(s,e,t,yi(t)),Ci(n,s)}}function P(t,s,f){t==="focusin"?(v(),_=s,e=f,_.attachEvent("onpropertychange",N)):t==="focusout"&&v()}function D(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return i(e)}function z(t,s){if(t==="click")return i(s)}function G(t,s){if(t==="input"||t==="change")return i(s)}function Y(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Q=typeof Object.is=="function"?Object.is:Y;function oe(t,s){if(Q(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var f=Object.keys(t),g=Object.keys(s);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var C=f[g];if(!w.call(s,C)||!Q(t[C],s[C]))return!1}return!0}function Ce(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ae(t,s){var f=Ce(t);t=0;for(var g;f;){if(f.nodeType===3){if(g=t+f.textContent.length,t<=s&&g>=s)return{node:f,offset:s-t};t=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Ce(f)}}function xe(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?xe(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function gt(){for(var t=window,s=Oe();s instanceof t.HTMLIFrameElement;){try{var f=typeof s.contentWindow.location.href=="string"}catch{f=!1}if(f)t=s.contentWindow;else break;s=Oe(t.document)}return s}function ot(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function Qn(t){var s=gt(),f=t.focusedElem,g=t.selectionRange;if(s!==f&&f&&f.ownerDocument&&xe(f.ownerDocument.documentElement,f)){if(g!==null&&ot(f)){if(s=g.start,t=g.end,t===void 0&&(t=s),"selectionStart"in f)f.selectionStart=s,f.selectionEnd=Math.min(t,f.value.length);else if(t=(s=f.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var C=f.textContent.length,b=Math.min(g.start,C);g=g.end===void 0?b:Math.min(g.end,C),!t.extend&&b>g&&(C=g,g=b,b=C),C=Ae(f,b);var M=Ae(f,g);C&&M&&(t.rangeCount!==1||t.anchorNode!==C.node||t.anchorOffset!==C.offset||t.focusNode!==M.node||t.focusOffset!==M.offset)&&(s=s.createRange(),s.setStart(C.node,C.offset),t.removeAllRanges(),b>g?(t.addRange(s),t.extend(M.node,M.offset)):(s.setEnd(M.node,M.offset),t.addRange(s)))}}for(s=[],t=f;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<s.length;f++)t=s[f],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Sr=A&&"documentMode"in document&&11>=document.documentMode,Cn=null,Dt=null,sn=null,Vn=!1;function Ti(t,s,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Vn||Cn==null||Cn!==Oe(g)||(g=Cn,"selectionStart"in g&&ot(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),sn&&oe(sn,g)||(sn=g,g=cl(Dt,"onSelect"),0<g.length&&(s=new ae("onSelect","select",null,s,f),t.push({event:s,listeners:g}),s.target=Cn)))}function Yr(t,s){var f={};return f[t.toLowerCase()]=s.toLowerCase(),f["Webkit"+t]="webkit"+s,f["Moz"+t]="moz"+s,f}var Zi={animationend:Yr("Animation","AnimationEnd"),animationiteration:Yr("Animation","AnimationIteration"),animationstart:Yr("Animation","AnimationStart"),transitionend:Yr("Transition","TransitionEnd")},Qo={},Ud={};A&&(Ud=document.createElement("div").style,"AnimationEvent"in window||(delete Zi.animationend.animation,delete Zi.animationiteration.animation,delete Zi.animationstart.animation),"TransitionEvent"in window||delete Zi.transitionend.transition);function ll(t){if(Qo[t])return Qo[t];if(!Zi[t])return t;var s=Zi[t],f;for(f in s)if(s.hasOwnProperty(f)&&f in Ud)return Qo[t]=s[f];return t}var Wd=ll("animationend"),Hd=ll("animationiteration"),Gd=ll("animationstart"),Xd=ll("transitionend"),Yd=new Map,Kd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $i(t,s){Yd.set(t,s),x(s,[t])}for(var Uu=0;Uu<Kd.length;Uu++){var Wu=Kd[Uu],Ym=Wu.toLowerCase(),Km=Wu[0].toUpperCase()+Wu.slice(1);$i(Ym,"on"+Km)}$i(Wd,"onAnimationEnd"),$i(Hd,"onAnimationIteration"),$i(Gd,"onAnimationStart"),$i("dblclick","onDoubleClick"),$i("focusin","onFocus"),$i("focusout","onBlur"),$i(Xd,"onTransitionEnd"),y("onMouseEnter",["mouseout","mouseover"]),y("onMouseLeave",["mouseout","mouseover"]),y("onPointerEnter",["pointerout","pointerover"]),y("onPointerLeave",["pointerout","pointerover"]),x("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),x("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),x("onBeforeInput",["compositionend","keypress","textInput","paste"]),x("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jo));function Zd(t,s,f){var g=t.type||"unknown-event";t.currentTarget=f,Sn(g,s,void 0,t),t.currentTarget=null}function $d(t,s){s=(s&4)!==0;for(var f=0;f<t.length;f++){var g=t[f],C=g.event;g=g.listeners;e:{var b=void 0;if(s)for(var M=g.length-1;0<=M;M--){var W=g[M],X=W.instance,le=W.currentTarget;if(W=W.listener,X!==b&&C.isPropagationStopped())break e;Zd(C,W,le),b=X}else for(M=0;M<g.length;M++){if(W=g[M],X=W.instance,le=W.currentTarget,W=W.listener,X!==b&&C.isPropagationStopped())break e;Zd(C,W,le),b=X}}}if(Tn)throw t=Pe,Tn=!1,Pe=null,t}function qt(t,s){var f=s[qu];f===void 0&&(f=s[qu]=new Set);var g=t+"__bubble";f.has(g)||(qd(s,t,2,!1),f.add(g))}function Hu(t,s,f){var g=0;s&&(g|=4),qd(f,t,g,s)}var ul="_reactListening"+Math.random().toString(36).slice(2);function ea(t){if(!t[ul]){t[ul]=!0,d.forEach(function(f){f!=="selectionchange"&&(Zm.has(f)||Hu(f,!1,t),Hu(f,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[ul]||(s[ul]=!0,Hu("selectionchange",!1,s))}}function qd(t,s,f,g){switch(Wo(s)){case 1:var C=el;break;case 4:C=Es;break;default:C=Ai}f=C.bind(null,s,f,t),C=void 0,!ys||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(C=!0),g?C!==void 0?t.addEventListener(s,f,{capture:!0,passive:C}):t.addEventListener(s,f,!0):C!==void 0?t.addEventListener(s,f,{passive:C}):t.addEventListener(s,f,!1)}function Gu(t,s,f,g,C){var b=g;if(!(s&1)&&!(s&2)&&g!==null)e:for(;;){if(g===null)return;var M=g.tag;if(M===3||M===4){var W=g.stateNode.containerInfo;if(W===C||W.nodeType===8&&W.parentNode===C)break;if(M===4)for(M=g.return;M!==null;){var X=M.tag;if((X===3||X===4)&&(X=M.stateNode.containerInfo,X===C||X.nodeType===8&&X.parentNode===C))return;M=M.return}for(;W!==null;){if(M=_s(W),M===null)return;if(X=M.tag,X===5||X===6){g=b=M;continue e}W=W.parentNode}}g=g.return}Ci(function(){var le=b,ye=yi(f),ve=[];e:{var me=Yd.get(t);if(me!==void 0){var Le=ae,ze=t;switch(t){case"keypress":if(Pt(f)===0)break e;case"keydown":case"keyup":Le=Yo;break;case"focusin":ze="focus",Le=Yt;break;case"focusout":ze="blur",Le=Yt;break;case"beforeblur":case"afterblur":Le=Yt;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Le=nl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Le=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Le=Yi;break;case Wd:case Hd:case Gd:Le=Si;break;case Xd:Le=ju;break;case"scroll":Le=_n;break;case"wheel":Le=Vu;break;case"copy":case"cut":case"paste":Le=Ze;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Le=Ko}var Ue=(s&4)!==0,En=!Ue&&t==="scroll",te=Ue?me!==null?me+"Capture":null:me;Ue=[];for(var K=le,ie;K!==null;){ie=K;var Se=ie.stateNode;if(ie.tag===5&&Se!==null&&(ie=Se,te!==null&&(Se=yn(K,te),Se!=null&&Ue.push(ta(K,Se,ie)))),En)break;K=K.return}0<Ue.length&&(me=new Le(me,ze,null,f,ye),ve.push({event:me,listeners:Ue}))}}if(!(s&7)){e:{if(me=t==="mouseover"||t==="pointerover",Le=t==="mouseout"||t==="pointerout",me&&f!==Ur&&(ze=f.relatedTarget||f.fromElement)&&(_s(ze)||ze[Ii]))break e;if((Le||me)&&(me=ye.window===ye?ye:(me=ye.ownerDocument)?me.defaultView||me.parentWindow:window,Le?(ze=f.relatedTarget||f.toElement,Le=le,ze=ze?_s(ze):null,ze!==null&&(En=$n(ze),ze!==En||ze.tag!==5&&ze.tag!==6)&&(ze=null)):(Le=null,ze=le),Le!==ze)){if(Ue=nl,Se="onMouseLeave",te="onMouseEnter",K="mouse",(t==="pointerout"||t==="pointerover")&&(Ue=Ko,Se="onPointerLeave",te="onPointerEnter",K="pointer"),En=Le==null?me:lo(Le),ie=ze==null?me:lo(ze),me=new Ue(Se,K+"leave",Le,f,ye),me.target=En,me.relatedTarget=ie,Se=null,_s(ye)===le&&(Ue=new Ue(te,K+"enter",ze,f,ye),Ue.target=ie,Ue.relatedTarget=En,Se=Ue),En=Se,Le&&ze)t:{for(Ue=Le,te=ze,K=0,ie=Ue;ie;ie=oo(ie))K++;for(ie=0,Se=te;Se;Se=oo(Se))ie++;for(;0<K-ie;)Ue=oo(Ue),K--;for(;0<ie-K;)te=oo(te),ie--;for(;K--;){if(Ue===te||te!==null&&Ue===te.alternate)break t;Ue=oo(Ue),te=oo(te)}Ue=null}else Ue=null;Le!==null&&Qd(ve,me,Le,Ue,!1),ze!==null&&En!==null&&Qd(ve,En,ze,Ue,!0)}}e:{if(me=le?lo(le):window,Le=me.nodeName&&me.nodeName.toLowerCase(),Le==="select"||Le==="input"&&me.type==="file")var Xe=l;else if(bt(me))if(u)Xe=G;else{Xe=D;var qe=P}else(Le=me.nodeName)&&Le.toLowerCase()==="input"&&(me.type==="checkbox"||me.type==="radio")&&(Xe=z);if(Xe&&(Xe=Xe(t,le))){Rs(ve,Xe,f,ye);break e}qe&&qe(t,me,le),t==="focusout"&&(qe=me._wrapperState)&&qe.controlled&&me.type==="number"&&ht(me,"number",me.value)}switch(qe=le?lo(le):window,t){case"focusin":(bt(qe)||qe.contentEditable==="true")&&(Cn=qe,Dt=le,sn=null);break;case"focusout":sn=Dt=Cn=null;break;case"mousedown":Vn=!0;break;case"contextmenu":case"mouseup":case"dragend":Vn=!1,Ti(ve,f,ye);break;case"selectionchange":if(Sr)break;case"keydown":case"keyup":Ti(ve,f,ye)}var Qe;if(Ki)e:{switch(t){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else jn?al(t,f)&&(nt="onCompositionEnd"):t==="keydown"&&f.keyCode===229&&(nt="onCompositionStart");nt&&(Ar&&f.locale!=="ko"&&(jn||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&jn&&(Qe=tl()):(Xr=ye,Ho="value"in Xr?Xr.value:Xr.textContent,jn=!0)),qe=cl(le,nt),0<qe.length&&(nt=new Wt(nt,t,null,f,ye),ve.push({event:nt,listeners:qe}),Qe?nt.data=Qe:(Qe=$o(f),Qe!==null&&(nt.data=Qe)))),(Qe=sl?zu(t,f):qo(t,f))&&(le=cl(le,"onBeforeInput"),0<le.length&&(ye=new Wt("onBeforeInput","beforeinput",null,f,ye),ve.push({event:ye,listeners:le}),ye.data=Qe))}$d(ve,s)})}function ta(t,s,f){return{instance:t,listener:s,currentTarget:f}}function cl(t,s){for(var f=s+"Capture",g=[];t!==null;){var C=t,b=C.stateNode;C.tag===5&&b!==null&&(C=b,b=yn(t,f),b!=null&&g.unshift(ta(t,b,C)),b=yn(t,s),b!=null&&g.push(ta(t,b,C))),t=t.return}return g}function oo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Qd(t,s,f,g,C){for(var b=s._reactName,M=[];f!==null&&f!==g;){var W=f,X=W.alternate,le=W.stateNode;if(X!==null&&X===g)break;W.tag===5&&le!==null&&(W=le,C?(X=yn(f,b),X!=null&&M.unshift(ta(f,X,W))):C||(X=yn(f,b),X!=null&&M.push(ta(f,X,W)))),f=f.return}M.length!==0&&t.push({event:s,listeners:M})}var $m=/\r\n?/g,qm=/\u0000|\uFFFD/g;function Jd(t){return(typeof t=="string"?t:""+t).replace($m,`
`).replace(qm,"")}function fl(t,s,f){if(s=Jd(s),Jd(t)!==s&&f)throw Error(a(425))}function dl(){}var Xu=null,Yu=null;function Ku(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Zu=typeof setTimeout=="function"?setTimeout:void 0,Qm=typeof clearTimeout=="function"?clearTimeout:void 0,eh=typeof Promise=="function"?Promise:void 0,Jm=typeof queueMicrotask=="function"?queueMicrotask:typeof eh<"u"?function(t){return eh.resolve(null).then(t).catch(ex)}:Zu;function ex(t){setTimeout(function(){throw t})}function $u(t,s){var f=s,g=0;do{var C=f.nextSibling;if(t.removeChild(f),C&&C.nodeType===8)if(f=C.data,f==="/$"){if(g===0){t.removeChild(C),Gr(s);return}g--}else f!=="$"&&f!=="$?"&&f!=="$!"||g++;f=C}while(f);Gr(s)}function qi(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function th(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var f=t.data;if(f==="$"||f==="$!"||f==="$?"){if(s===0)return t;s--}else f==="/$"&&s++}t=t.previousSibling}return null}var ao=Math.random().toString(36).slice(2),oi="__reactFiber$"+ao,na="__reactProps$"+ao,Ii="__reactContainer$"+ao,qu="__reactEvents$"+ao,tx="__reactListeners$"+ao,nx="__reactHandles$"+ao;function _s(t){var s=t[oi];if(s)return s;for(var f=t.parentNode;f;){if(s=f[Ii]||f[oi]){if(f=s.alternate,s.child!==null||f!==null&&f.child!==null)for(t=th(t);t!==null;){if(f=t[oi])return f;t=th(t)}return s}t=f,f=t.parentNode}return null}function ra(t){return t=t[oi]||t[Ii],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function lo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(a(33))}function hl(t){return t[na]||null}var Qu=[],uo=-1;function Qi(t){return{current:t}}function Qt(t){0>uo||(t.current=Qu[uo],Qu[uo]=null,uo--)}function Kt(t,s){uo++,Qu[uo]=t.current,t.current=s}var Ji={},Jn=Qi(Ji),hr=Qi(!1),Ps=Ji;function co(t,s){var f=t.type.contextTypes;if(!f)return Ji;var g=t.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===s)return g.__reactInternalMemoizedMaskedChildContext;var C={},b;for(b in f)C[b]=s[b];return g&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=C),C}function pr(t){return t=t.childContextTypes,t!=null}function pl(){Qt(hr),Qt(Jn)}function nh(t,s,f){if(Jn.current!==Ji)throw Error(a(168));Kt(Jn,s),Kt(hr,f)}function rh(t,s,f){var g=t.stateNode;if(s=s.childContextTypes,typeof g.getChildContext!="function")return f;g=g.getChildContext();for(var C in g)if(!(C in s))throw Error(a(108,at(t)||"Unknown",C));return pe({},f,g)}function gl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ji,Ps=Jn.current,Kt(Jn,t),Kt(hr,hr.current),!0}function ih(t,s,f){var g=t.stateNode;if(!g)throw Error(a(169));f?(t=rh(t,s,Ps),g.__reactInternalMemoizedMergedChildContext=t,Qt(hr),Qt(Jn),Kt(Jn,t)):Qt(hr),Kt(hr,f)}var Ni=null,ml=!1,Ju=!1;function sh(t){Ni===null?Ni=[t]:Ni.push(t)}function rx(t){ml=!0,sh(t)}function es(){if(!Ju&&Ni!==null){Ju=!0;var t=0,s=dt;try{var f=Ni;for(dt=1;t<f.length;t++){var g=f[t];do g=g(!0);while(g!==null)}Ni=null,ml=!1}catch(C){throw Ni!==null&&(Ni=Ni.slice(t+1)),je(he,es),C}finally{dt=s,Ju=!1}}return null}var fo=[],ho=0,xl=null,yl=0,Or=[],kr=0,Os=null,Ri=1,_i="";function ks(t,s){fo[ho++]=yl,fo[ho++]=xl,xl=t,yl=s}function oh(t,s,f){Or[kr++]=Ri,Or[kr++]=_i,Or[kr++]=Os,Os=t;var g=Ri;t=_i;var C=32-ar(g)-1;g&=~(1<<C),f+=1;var b=32-ar(s)+C;if(30<b){var M=C-C%5;b=(g&(1<<M)-1).toString(32),g>>=M,C-=M,Ri=1<<32-ar(s)+C|f<<C|g,_i=b+t}else Ri=1<<b|f<<C|g,_i=t}function ec(t){t.return!==null&&(ks(t,1),oh(t,1,0))}function tc(t){for(;t===xl;)xl=fo[--ho],fo[ho]=null,yl=fo[--ho],fo[ho]=null;for(;t===Os;)Os=Or[--kr],Or[kr]=null,_i=Or[--kr],Or[kr]=null,Ri=Or[--kr],Or[kr]=null}var br=null,Tr=null,en=!1,Kr=null;function ah(t,s){var f=Br(5,null,null,0);f.elementType="DELETED",f.stateNode=s,f.return=t,s=t.deletions,s===null?(t.deletions=[f],t.flags|=16):s.push(f)}function lh(t,s){switch(t.tag){case 5:var f=t.type;return s=s.nodeType!==1||f.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,br=t,Tr=qi(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,br=t,Tr=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(f=Os!==null?{id:Ri,overflow:_i}:null,t.memoizedState={dehydrated:s,treeContext:f,retryLane:1073741824},f=Br(18,null,null,0),f.stateNode=s,f.return=t,t.child=f,br=t,Tr=null,!0):!1;default:return!1}}function nc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rc(t){if(en){var s=Tr;if(s){var f=s;if(!lh(t,s)){if(nc(t))throw Error(a(418));s=qi(f.nextSibling);var g=br;s&&lh(t,s)?ah(g,f):(t.flags=t.flags&-4097|2,en=!1,br=t)}}else{if(nc(t))throw Error(a(418));t.flags=t.flags&-4097|2,en=!1,br=t}}}function uh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;br=t}function wl(t){if(t!==br)return!1;if(!en)return uh(t),en=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!Ku(t.type,t.memoizedProps)),s&&(s=Tr)){if(nc(t))throw ch(),Error(a(418));for(;s;)ah(t,s),s=qi(s.nextSibling)}if(uh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var f=t.data;if(f==="/$"){if(s===0){Tr=qi(t.nextSibling);break e}s--}else f!=="$"&&f!=="$!"&&f!=="$?"||s++}t=t.nextSibling}Tr=null}}else Tr=br?qi(t.stateNode.nextSibling):null;return!0}function ch(){for(var t=Tr;t;)t=qi(t.nextSibling)}function po(){Tr=br=null,en=!1}function ic(t){Kr===null?Kr=[t]:Kr.push(t)}var ix=ne.ReactCurrentBatchConfig;function ia(t,s,f){if(t=f.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(a(309));var g=f.stateNode}if(!g)throw Error(a(147,t));var C=g,b=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===b?s.ref:(s=function(M){var W=C.refs;M===null?delete W[b]:W[b]=M},s._stringRef=b,s)}if(typeof t!="string")throw Error(a(284));if(!f._owner)throw Error(a(290,t))}return t}function vl(t,s){throw t=Object.prototype.toString.call(s),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function fh(t){var s=t._init;return s(t._payload)}function dh(t){function s(te,K){if(t){var ie=te.deletions;ie===null?(te.deletions=[K],te.flags|=16):ie.push(K)}}function f(te,K){if(!t)return null;for(;K!==null;)s(te,K),K=K.sibling;return null}function g(te,K){for(te=new Map;K!==null;)K.key!==null?te.set(K.key,K):te.set(K.index,K),K=K.sibling;return te}function C(te,K){return te=ls(te,K),te.index=0,te.sibling=null,te}function b(te,K,ie){return te.index=ie,t?(ie=te.alternate,ie!==null?(ie=ie.index,ie<K?(te.flags|=2,K):ie):(te.flags|=2,K)):(te.flags|=1048576,K)}function M(te){return t&&te.alternate===null&&(te.flags|=2),te}function W(te,K,ie,Se){return K===null||K.tag!==6?(K=Zc(ie,te.mode,Se),K.return=te,K):(K=C(K,ie),K.return=te,K)}function X(te,K,ie,Se){var Xe=ie.type;return Xe===q?ye(te,K,ie.props.children,Se,ie.key):K!==null&&(K.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===Te&&fh(Xe)===K.type)?(Se=C(K,ie.props),Se.ref=ia(te,K,ie),Se.return=te,Se):(Se=Hl(ie.type,ie.key,ie.props,null,te.mode,Se),Se.ref=ia(te,K,ie),Se.return=te,Se)}function le(te,K,ie,Se){return K===null||K.tag!==4||K.stateNode.containerInfo!==ie.containerInfo||K.stateNode.implementation!==ie.implementation?(K=$c(ie,te.mode,Se),K.return=te,K):(K=C(K,ie.children||[]),K.return=te,K)}function ye(te,K,ie,Se,Xe){return K===null||K.tag!==7?(K=zs(ie,te.mode,Se,Xe),K.return=te,K):(K=C(K,ie),K.return=te,K)}function ve(te,K,ie){if(typeof K=="string"&&K!==""||typeof K=="number")return K=Zc(""+K,te.mode,ie),K.return=te,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case se:return ie=Hl(K.type,K.key,K.props,null,te.mode,ie),ie.ref=ia(te,null,K),ie.return=te,ie;case re:return K=$c(K,te.mode,ie),K.return=te,K;case Te:var Se=K._init;return ve(te,Se(K._payload),ie)}if(sr(K)||ge(K))return K=zs(K,te.mode,ie,null),K.return=te,K;vl(te,K)}return null}function me(te,K,ie,Se){var Xe=K!==null?K.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number")return Xe!==null?null:W(te,K,""+ie,Se);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case se:return ie.key===Xe?X(te,K,ie,Se):null;case re:return ie.key===Xe?le(te,K,ie,Se):null;case Te:return Xe=ie._init,me(te,K,Xe(ie._payload),Se)}if(sr(ie)||ge(ie))return Xe!==null?null:ye(te,K,ie,Se,null);vl(te,ie)}return null}function Le(te,K,ie,Se,Xe){if(typeof Se=="string"&&Se!==""||typeof Se=="number")return te=te.get(ie)||null,W(K,te,""+Se,Xe);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case se:return te=te.get(Se.key===null?ie:Se.key)||null,X(K,te,Se,Xe);case re:return te=te.get(Se.key===null?ie:Se.key)||null,le(K,te,Se,Xe);case Te:var qe=Se._init;return Le(te,K,ie,qe(Se._payload),Xe)}if(sr(Se)||ge(Se))return te=te.get(ie)||null,ye(K,te,Se,Xe,null);vl(K,Se)}return null}function ze(te,K,ie,Se){for(var Xe=null,qe=null,Qe=K,nt=K=0,Bn=null;Qe!==null&&nt<ie.length;nt++){Qe.index>nt?(Bn=Qe,Qe=null):Bn=Qe.sibling;var kt=me(te,Qe,ie[nt],Se);if(kt===null){Qe===null&&(Qe=Bn);break}t&&Qe&&kt.alternate===null&&s(te,Qe),K=b(kt,K,nt),qe===null?Xe=kt:qe.sibling=kt,qe=kt,Qe=Bn}if(nt===ie.length)return f(te,Qe),en&&ks(te,nt),Xe;if(Qe===null){for(;nt<ie.length;nt++)Qe=ve(te,ie[nt],Se),Qe!==null&&(K=b(Qe,K,nt),qe===null?Xe=Qe:qe.sibling=Qe,qe=Qe);return en&&ks(te,nt),Xe}for(Qe=g(te,Qe);nt<ie.length;nt++)Bn=Le(Qe,te,nt,ie[nt],Se),Bn!==null&&(t&&Bn.alternate!==null&&Qe.delete(Bn.key===null?nt:Bn.key),K=b(Bn,K,nt),qe===null?Xe=Bn:qe.sibling=Bn,qe=Bn);return t&&Qe.forEach(function(us){return s(te,us)}),en&&ks(te,nt),Xe}function Ue(te,K,ie,Se){var Xe=ge(ie);if(typeof Xe!="function")throw Error(a(150));if(ie=Xe.call(ie),ie==null)throw Error(a(151));for(var qe=Xe=null,Qe=K,nt=K=0,Bn=null,kt=ie.next();Qe!==null&&!kt.done;nt++,kt=ie.next()){Qe.index>nt?(Bn=Qe,Qe=null):Bn=Qe.sibling;var us=me(te,Qe,kt.value,Se);if(us===null){Qe===null&&(Qe=Bn);break}t&&Qe&&us.alternate===null&&s(te,Qe),K=b(us,K,nt),qe===null?Xe=us:qe.sibling=us,qe=us,Qe=Bn}if(kt.done)return f(te,Qe),en&&ks(te,nt),Xe;if(Qe===null){for(;!kt.done;nt++,kt=ie.next())kt=ve(te,kt.value,Se),kt!==null&&(K=b(kt,K,nt),qe===null?Xe=kt:qe.sibling=kt,qe=kt);return en&&ks(te,nt),Xe}for(Qe=g(te,Qe);!kt.done;nt++,kt=ie.next())kt=Le(Qe,te,nt,kt.value,Se),kt!==null&&(t&&kt.alternate!==null&&Qe.delete(kt.key===null?nt:kt.key),K=b(kt,K,nt),qe===null?Xe=kt:qe.sibling=kt,qe=kt);return t&&Qe.forEach(function(Bx){return s(te,Bx)}),en&&ks(te,nt),Xe}function En(te,K,ie,Se){if(typeof ie=="object"&&ie!==null&&ie.type===q&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case se:e:{for(var Xe=ie.key,qe=K;qe!==null;){if(qe.key===Xe){if(Xe=ie.type,Xe===q){if(qe.tag===7){f(te,qe.sibling),K=C(qe,ie.props.children),K.return=te,te=K;break e}}else if(qe.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===Te&&fh(Xe)===qe.type){f(te,qe.sibling),K=C(qe,ie.props),K.ref=ia(te,qe,ie),K.return=te,te=K;break e}f(te,qe);break}else s(te,qe);qe=qe.sibling}ie.type===q?(K=zs(ie.props.children,te.mode,Se,ie.key),K.return=te,te=K):(Se=Hl(ie.type,ie.key,ie.props,null,te.mode,Se),Se.ref=ia(te,K,ie),Se.return=te,te=Se)}return M(te);case re:e:{for(qe=ie.key;K!==null;){if(K.key===qe)if(K.tag===4&&K.stateNode.containerInfo===ie.containerInfo&&K.stateNode.implementation===ie.implementation){f(te,K.sibling),K=C(K,ie.children||[]),K.return=te,te=K;break e}else{f(te,K);break}else s(te,K);K=K.sibling}K=$c(ie,te.mode,Se),K.return=te,te=K}return M(te);case Te:return qe=ie._init,En(te,K,qe(ie._payload),Se)}if(sr(ie))return ze(te,K,ie,Se);if(ge(ie))return Ue(te,K,ie,Se);vl(te,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"?(ie=""+ie,K!==null&&K.tag===6?(f(te,K.sibling),K=C(K,ie),K.return=te,te=K):(f(te,K),K=Zc(ie,te.mode,Se),K.return=te,te=K),M(te)):f(te,K)}return En}var go=dh(!0),hh=dh(!1),Cl=Qi(null),El=null,mo=null,sc=null;function oc(){sc=mo=El=null}function ac(t){var s=Cl.current;Qt(Cl),t._currentValue=s}function lc(t,s,f){for(;t!==null;){var g=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,g!==null&&(g.childLanes|=s)):g!==null&&(g.childLanes&s)!==s&&(g.childLanes|=s),t===f)break;t=t.return}}function xo(t,s){El=t,sc=mo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(gr=!0),t.firstContext=null)}function Mr(t){var s=t._currentValue;if(sc!==t)if(t={context:t,memoizedValue:s,next:null},mo===null){if(El===null)throw Error(a(308));mo=t,El.dependencies={lanes:0,firstContext:t}}else mo=mo.next=t;return s}var Ms=null;function uc(t){Ms===null?Ms=[t]:Ms.push(t)}function ph(t,s,f,g){var C=s.interleaved;return C===null?(f.next=f,uc(s)):(f.next=C.next,C.next=f),s.interleaved=f,Pi(t,g)}function Pi(t,s){t.lanes|=s;var f=t.alternate;for(f!==null&&(f.lanes|=s),f=t,t=t.return;t!==null;)t.childLanes|=s,f=t.alternate,f!==null&&(f.childLanes|=s),f=t,t=t.return;return f.tag===3?f.stateNode:null}var ts=!1;function cc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gh(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Oi(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function ns(t,s,f){var g=t.updateQueue;if(g===null)return null;if(g=g.shared,Ot&2){var C=g.pending;return C===null?s.next=s:(s.next=C.next,C.next=s),g.pending=s,Pi(t,f)}return C=g.interleaved,C===null?(s.next=s,uc(g)):(s.next=C.next,C.next=s),g.interleaved=s,Pi(t,f)}function Al(t,s,f){if(s=s.updateQueue,s!==null&&(s=s.shared,(f&4194240)!==0)){var g=s.lanes;g&=t.pendingLanes,f|=g,s.lanes=f,dn(t,f)}}function mh(t,s){var f=t.updateQueue,g=t.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var C=null,b=null;if(f=f.firstBaseUpdate,f!==null){do{var M={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};b===null?C=b=M:b=b.next=M,f=f.next}while(f!==null);b===null?C=b=s:b=b.next=s}else C=b=s;f={baseState:g.baseState,firstBaseUpdate:C,lastBaseUpdate:b,shared:g.shared,effects:g.effects},t.updateQueue=f;return}t=f.lastBaseUpdate,t===null?f.firstBaseUpdate=s:t.next=s,f.lastBaseUpdate=s}function Sl(t,s,f,g){var C=t.updateQueue;ts=!1;var b=C.firstBaseUpdate,M=C.lastBaseUpdate,W=C.shared.pending;if(W!==null){C.shared.pending=null;var X=W,le=X.next;X.next=null,M===null?b=le:M.next=le,M=X;var ye=t.alternate;ye!==null&&(ye=ye.updateQueue,W=ye.lastBaseUpdate,W!==M&&(W===null?ye.firstBaseUpdate=le:W.next=le,ye.lastBaseUpdate=X))}if(b!==null){var ve=C.baseState;M=0,ye=le=X=null,W=b;do{var me=W.lane,Le=W.eventTime;if((g&me)===me){ye!==null&&(ye=ye.next={eventTime:Le,lane:0,tag:W.tag,payload:W.payload,callback:W.callback,next:null});e:{var ze=t,Ue=W;switch(me=s,Le=f,Ue.tag){case 1:if(ze=Ue.payload,typeof ze=="function"){ve=ze.call(Le,ve,me);break e}ve=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=Ue.payload,me=typeof ze=="function"?ze.call(Le,ve,me):ze,me==null)break e;ve=pe({},ve,me);break e;case 2:ts=!0}}W.callback!==null&&W.lane!==0&&(t.flags|=64,me=C.effects,me===null?C.effects=[W]:me.push(W))}else Le={eventTime:Le,lane:me,tag:W.tag,payload:W.payload,callback:W.callback,next:null},ye===null?(le=ye=Le,X=ve):ye=ye.next=Le,M|=me;if(W=W.next,W===null){if(W=C.shared.pending,W===null)break;me=W,W=me.next,me.next=null,C.lastBaseUpdate=me,C.shared.pending=null}}while(!0);if(ye===null&&(X=ve),C.baseState=X,C.firstBaseUpdate=le,C.lastBaseUpdate=ye,s=C.shared.interleaved,s!==null){C=s;do M|=C.lane,C=C.next;while(C!==s)}else b===null&&(C.shared.lanes=0);Bs|=M,t.lanes=M,t.memoizedState=ve}}function xh(t,s,f){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var g=t[s],C=g.callback;if(C!==null){if(g.callback=null,g=f,typeof C!="function")throw Error(a(191,C));C.call(g)}}}var sa={},ai=Qi(sa),oa=Qi(sa),aa=Qi(sa);function Ds(t){if(t===sa)throw Error(a(174));return t}function fc(t,s){switch(Kt(aa,s),Kt(oa,t),Kt(ai,sa),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Gn(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=Gn(s,t)}Qt(ai),Kt(ai,s)}function yo(){Qt(ai),Qt(oa),Qt(aa)}function yh(t){Ds(aa.current);var s=Ds(ai.current),f=Gn(s,t.type);s!==f&&(Kt(oa,t),Kt(ai,f))}function dc(t){oa.current===t&&(Qt(ai),Qt(oa))}var on=Qi(0);function bl(t){for(var s=t;s!==null;){if(s.tag===13){var f=s.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var hc=[];function pc(){for(var t=0;t<hc.length;t++)hc[t]._workInProgressVersionPrimary=null;hc.length=0}var Tl=ne.ReactCurrentDispatcher,gc=ne.ReactCurrentBatchConfig,Ls=0,an=null,Pn=null,Dn=null,Il=!1,la=!1,ua=0,sx=0;function er(){throw Error(a(321))}function mc(t,s){if(s===null)return!1;for(var f=0;f<s.length&&f<t.length;f++)if(!Q(t[f],s[f]))return!1;return!0}function xc(t,s,f,g,C,b){if(Ls=b,an=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Tl.current=t===null||t.memoizedState===null?ux:cx,t=f(g,C),la){b=0;do{if(la=!1,ua=0,25<=b)throw Error(a(301));b+=1,Dn=Pn=null,s.updateQueue=null,Tl.current=fx,t=f(g,C)}while(la)}if(Tl.current=_l,s=Pn!==null&&Pn.next!==null,Ls=0,Dn=Pn=an=null,Il=!1,s)throw Error(a(300));return t}function yc(){var t=ua!==0;return ua=0,t}function li(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?an.memoizedState=Dn=t:Dn=Dn.next=t,Dn}function Dr(){if(Pn===null){var t=an.alternate;t=t!==null?t.memoizedState:null}else t=Pn.next;var s=Dn===null?an.memoizedState:Dn.next;if(s!==null)Dn=s,Pn=t;else{if(t===null)throw Error(a(310));Pn=t,t={memoizedState:Pn.memoizedState,baseState:Pn.baseState,baseQueue:Pn.baseQueue,queue:Pn.queue,next:null},Dn===null?an.memoizedState=Dn=t:Dn=Dn.next=t}return Dn}function ca(t,s){return typeof s=="function"?s(t):s}function wc(t){var s=Dr(),f=s.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=t;var g=Pn,C=g.baseQueue,b=f.pending;if(b!==null){if(C!==null){var M=C.next;C.next=b.next,b.next=M}g.baseQueue=C=b,f.pending=null}if(C!==null){b=C.next,g=g.baseState;var W=M=null,X=null,le=b;do{var ye=le.lane;if((Ls&ye)===ye)X!==null&&(X=X.next={lane:0,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),g=le.hasEagerState?le.eagerState:t(g,le.action);else{var ve={lane:ye,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null};X===null?(W=X=ve,M=g):X=X.next=ve,an.lanes|=ye,Bs|=ye}le=le.next}while(le!==null&&le!==b);X===null?M=g:X.next=W,Q(g,s.memoizedState)||(gr=!0),s.memoizedState=g,s.baseState=M,s.baseQueue=X,f.lastRenderedState=g}if(t=f.interleaved,t!==null){C=t;do b=C.lane,an.lanes|=b,Bs|=b,C=C.next;while(C!==t)}else C===null&&(f.lanes=0);return[s.memoizedState,f.dispatch]}function vc(t){var s=Dr(),f=s.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=t;var g=f.dispatch,C=f.pending,b=s.memoizedState;if(C!==null){f.pending=null;var M=C=C.next;do b=t(b,M.action),M=M.next;while(M!==C);Q(b,s.memoizedState)||(gr=!0),s.memoizedState=b,s.baseQueue===null&&(s.baseState=b),f.lastRenderedState=b}return[b,g]}function wh(){}function vh(t,s){var f=an,g=Dr(),C=s(),b=!Q(g.memoizedState,C);if(b&&(g.memoizedState=C,gr=!0),g=g.queue,Cc(Ah.bind(null,f,g,t),[t]),g.getSnapshot!==s||b||Dn!==null&&Dn.memoizedState.tag&1){if(f.flags|=2048,fa(9,Eh.bind(null,f,g,C,s),void 0,null),Ln===null)throw Error(a(349));Ls&30||Ch(f,s,C)}return C}function Ch(t,s,f){t.flags|=16384,t={getSnapshot:s,value:f},s=an.updateQueue,s===null?(s={lastEffect:null,stores:null},an.updateQueue=s,s.stores=[t]):(f=s.stores,f===null?s.stores=[t]:f.push(t))}function Eh(t,s,f,g){s.value=f,s.getSnapshot=g,Sh(s)&&bh(t)}function Ah(t,s,f){return f(function(){Sh(s)&&bh(t)})}function Sh(t){var s=t.getSnapshot;t=t.value;try{var f=s();return!Q(t,f)}catch{return!0}}function bh(t){var s=Pi(t,1);s!==null&&Qr(s,t,1,-1)}function Th(t){var s=li();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:t},s.queue=t,t=t.dispatch=lx.bind(null,an,t),[s.memoizedState,t]}function fa(t,s,f,g){return t={tag:t,create:s,destroy:f,deps:g,next:null},s=an.updateQueue,s===null?(s={lastEffect:null,stores:null},an.updateQueue=s,s.lastEffect=t.next=t):(f=s.lastEffect,f===null?s.lastEffect=t.next=t:(g=f.next,f.next=t,t.next=g,s.lastEffect=t)),t}function Ih(){return Dr().memoizedState}function Nl(t,s,f,g){var C=li();an.flags|=t,C.memoizedState=fa(1|s,f,void 0,g===void 0?null:g)}function Rl(t,s,f,g){var C=Dr();g=g===void 0?null:g;var b=void 0;if(Pn!==null){var M=Pn.memoizedState;if(b=M.destroy,g!==null&&mc(g,M.deps)){C.memoizedState=fa(s,f,b,g);return}}an.flags|=t,C.memoizedState=fa(1|s,f,b,g)}function Nh(t,s){return Nl(8390656,8,t,s)}function Cc(t,s){return Rl(2048,8,t,s)}function Rh(t,s){return Rl(4,2,t,s)}function _h(t,s){return Rl(4,4,t,s)}function Ph(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Oh(t,s,f){return f=f!=null?f.concat([t]):null,Rl(4,4,Ph.bind(null,s,t),f)}function Ec(){}function kh(t,s){var f=Dr();s=s===void 0?null:s;var g=f.memoizedState;return g!==null&&s!==null&&mc(s,g[1])?g[0]:(f.memoizedState=[t,s],t)}function Mh(t,s){var f=Dr();s=s===void 0?null:s;var g=f.memoizedState;return g!==null&&s!==null&&mc(s,g[1])?g[0]:(t=t(),f.memoizedState=[t,s],t)}function Dh(t,s,f){return Ls&21?(Q(f,s)||(f=In(),an.lanes|=f,Bs|=f,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,gr=!0),t.memoizedState=f)}function ox(t,s){var f=dt;dt=f!==0&&4>f?f:4,t(!0);var g=gc.transition;gc.transition={};try{t(!1),s()}finally{dt=f,gc.transition=g}}function Lh(){return Dr().memoizedState}function ax(t,s,f){var g=os(t);if(f={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null},Bh(t))Fh(s,f);else if(f=ph(t,s,f,g),f!==null){var C=ur();Qr(f,t,g,C),jh(f,s,g)}}function lx(t,s,f){var g=os(t),C={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null};if(Bh(t))Fh(s,C);else{var b=t.alternate;if(t.lanes===0&&(b===null||b.lanes===0)&&(b=s.lastRenderedReducer,b!==null))try{var M=s.lastRenderedState,W=b(M,f);if(C.hasEagerState=!0,C.eagerState=W,Q(W,M)){var X=s.interleaved;X===null?(C.next=C,uc(s)):(C.next=X.next,X.next=C),s.interleaved=C;return}}catch{}finally{}f=ph(t,s,C,g),f!==null&&(C=ur(),Qr(f,t,g,C),jh(f,s,g))}}function Bh(t){var s=t.alternate;return t===an||s!==null&&s===an}function Fh(t,s){la=Il=!0;var f=t.pending;f===null?s.next=s:(s.next=f.next,f.next=s),t.pending=s}function jh(t,s,f){if(f&4194240){var g=s.lanes;g&=t.pendingLanes,f|=g,s.lanes=f,dn(t,f)}}var _l={readContext:Mr,useCallback:er,useContext:er,useEffect:er,useImperativeHandle:er,useInsertionEffect:er,useLayoutEffect:er,useMemo:er,useReducer:er,useRef:er,useState:er,useDebugValue:er,useDeferredValue:er,useTransition:er,useMutableSource:er,useSyncExternalStore:er,useId:er,unstable_isNewReconciler:!1},ux={readContext:Mr,useCallback:function(t,s){return li().memoizedState=[t,s===void 0?null:s],t},useContext:Mr,useEffect:Nh,useImperativeHandle:function(t,s,f){return f=f!=null?f.concat([t]):null,Nl(4194308,4,Ph.bind(null,s,t),f)},useLayoutEffect:function(t,s){return Nl(4194308,4,t,s)},useInsertionEffect:function(t,s){return Nl(4,2,t,s)},useMemo:function(t,s){var f=li();return s=s===void 0?null:s,t=t(),f.memoizedState=[t,s],t},useReducer:function(t,s,f){var g=li();return s=f!==void 0?f(s):s,g.memoizedState=g.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},g.queue=t,t=t.dispatch=ax.bind(null,an,t),[g.memoizedState,t]},useRef:function(t){var s=li();return t={current:t},s.memoizedState=t},useState:Th,useDebugValue:Ec,useDeferredValue:function(t){return li().memoizedState=t},useTransition:function(){var t=Th(!1),s=t[0];return t=ox.bind(null,t[1]),li().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,f){var g=an,C=li();if(en){if(f===void 0)throw Error(a(407));f=f()}else{if(f=s(),Ln===null)throw Error(a(349));Ls&30||Ch(g,s,f)}C.memoizedState=f;var b={value:f,getSnapshot:s};return C.queue=b,Nh(Ah.bind(null,g,b,t),[t]),g.flags|=2048,fa(9,Eh.bind(null,g,b,f,s),void 0,null),f},useId:function(){var t=li(),s=Ln.identifierPrefix;if(en){var f=_i,g=Ri;f=(g&~(1<<32-ar(g)-1)).toString(32)+f,s=":"+s+"R"+f,f=ua++,0<f&&(s+="H"+f.toString(32)),s+=":"}else f=sx++,s=":"+s+"r"+f.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},cx={readContext:Mr,useCallback:kh,useContext:Mr,useEffect:Cc,useImperativeHandle:Oh,useInsertionEffect:Rh,useLayoutEffect:_h,useMemo:Mh,useReducer:wc,useRef:Ih,useState:function(){return wc(ca)},useDebugValue:Ec,useDeferredValue:function(t){var s=Dr();return Dh(s,Pn.memoizedState,t)},useTransition:function(){var t=wc(ca)[0],s=Dr().memoizedState;return[t,s]},useMutableSource:wh,useSyncExternalStore:vh,useId:Lh,unstable_isNewReconciler:!1},fx={readContext:Mr,useCallback:kh,useContext:Mr,useEffect:Cc,useImperativeHandle:Oh,useInsertionEffect:Rh,useLayoutEffect:_h,useMemo:Mh,useReducer:vc,useRef:Ih,useState:function(){return vc(ca)},useDebugValue:Ec,useDeferredValue:function(t){var s=Dr();return Pn===null?s.memoizedState=t:Dh(s,Pn.memoizedState,t)},useTransition:function(){var t=vc(ca)[0],s=Dr().memoizedState;return[t,s]},useMutableSource:wh,useSyncExternalStore:vh,useId:Lh,unstable_isNewReconciler:!1};function Zr(t,s){if(t&&t.defaultProps){s=pe({},s),t=t.defaultProps;for(var f in t)s[f]===void 0&&(s[f]=t[f]);return s}return s}function Ac(t,s,f,g){s=t.memoizedState,f=f(g,s),f=f==null?s:pe({},s,f),t.memoizedState=f,t.lanes===0&&(t.updateQueue.baseState=f)}var Pl={isMounted:function(t){return(t=t._reactInternals)?$n(t)===t:!1},enqueueSetState:function(t,s,f){t=t._reactInternals;var g=ur(),C=os(t),b=Oi(g,C);b.payload=s,f!=null&&(b.callback=f),s=ns(t,b,C),s!==null&&(Qr(s,t,C,g),Al(s,t,C))},enqueueReplaceState:function(t,s,f){t=t._reactInternals;var g=ur(),C=os(t),b=Oi(g,C);b.tag=1,b.payload=s,f!=null&&(b.callback=f),s=ns(t,b,C),s!==null&&(Qr(s,t,C,g),Al(s,t,C))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var f=ur(),g=os(t),C=Oi(f,g);C.tag=2,s!=null&&(C.callback=s),s=ns(t,C,g),s!==null&&(Qr(s,t,g,f),Al(s,t,g))}};function Vh(t,s,f,g,C,b,M){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(g,b,M):s.prototype&&s.prototype.isPureReactComponent?!oe(f,g)||!oe(C,b):!0}function zh(t,s,f){var g=!1,C=Ji,b=s.contextType;return typeof b=="object"&&b!==null?b=Mr(b):(C=pr(s)?Ps:Jn.current,g=s.contextTypes,b=(g=g!=null)?co(t,C):Ji),s=new s(f,b),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Pl,t.stateNode=s,s._reactInternals=t,g&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=C,t.__reactInternalMemoizedMaskedChildContext=b),s}function Uh(t,s,f,g){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(f,g),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(f,g),s.state!==t&&Pl.enqueueReplaceState(s,s.state,null)}function Sc(t,s,f,g){var C=t.stateNode;C.props=f,C.state=t.memoizedState,C.refs={},cc(t);var b=s.contextType;typeof b=="object"&&b!==null?C.context=Mr(b):(b=pr(s)?Ps:Jn.current,C.context=co(t,b)),C.state=t.memoizedState,b=s.getDerivedStateFromProps,typeof b=="function"&&(Ac(t,s,b,f),C.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(s=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),s!==C.state&&Pl.enqueueReplaceState(C,C.state,null),Sl(t,f,C,g),C.state=t.memoizedState),typeof C.componentDidMount=="function"&&(t.flags|=4194308)}function wo(t,s){try{var f="",g=s;do f+=ut(g),g=g.return;while(g);var C=f}catch(b){C=`
Error generating stack: `+b.message+`
`+b.stack}return{value:t,source:s,stack:C,digest:null}}function bc(t,s,f){return{value:t,source:null,stack:f??null,digest:s??null}}function Tc(t,s){try{console.error(s.value)}catch(f){setTimeout(function(){throw f})}}var dx=typeof WeakMap=="function"?WeakMap:Map;function Wh(t,s,f){f=Oi(-1,f),f.tag=3,f.payload={element:null};var g=s.value;return f.callback=function(){Fl||(Fl=!0,zc=g),Tc(t,s)},f}function Hh(t,s,f){f=Oi(-1,f),f.tag=3;var g=t.type.getDerivedStateFromError;if(typeof g=="function"){var C=s.value;f.payload=function(){return g(C)},f.callback=function(){Tc(t,s)}}var b=t.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(f.callback=function(){Tc(t,s),typeof g!="function"&&(is===null?is=new Set([this]):is.add(this));var M=s.stack;this.componentDidCatch(s.value,{componentStack:M!==null?M:""})}),f}function Gh(t,s,f){var g=t.pingCache;if(g===null){g=t.pingCache=new dx;var C=new Set;g.set(s,C)}else C=g.get(s),C===void 0&&(C=new Set,g.set(s,C));C.has(f)||(C.add(f),t=Tx.bind(null,t,s,f),s.then(t,t))}function Xh(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function Yh(t,s,f,g,C){return t.mode&1?(t.flags|=65536,t.lanes=C,t):(t===s?t.flags|=65536:(t.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(s=Oi(-1,1),s.tag=2,ns(f,s,1))),f.lanes|=1),t)}var hx=ne.ReactCurrentOwner,gr=!1;function lr(t,s,f,g){s.child=t===null?hh(s,null,f,g):go(s,t.child,f,g)}function Kh(t,s,f,g,C){f=f.render;var b=s.ref;return xo(s,C),g=xc(t,s,f,g,b,C),f=yc(),t!==null&&!gr?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~C,ki(t,s,C)):(en&&f&&ec(s),s.flags|=1,lr(t,s,g,C),s.child)}function Zh(t,s,f,g,C){if(t===null){var b=f.type;return typeof b=="function"&&!Kc(b)&&b.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(s.tag=15,s.type=b,$h(t,s,b,g,C)):(t=Hl(f.type,null,g,s,s.mode,C),t.ref=s.ref,t.return=s,s.child=t)}if(b=t.child,!(t.lanes&C)){var M=b.memoizedProps;if(f=f.compare,f=f!==null?f:oe,f(M,g)&&t.ref===s.ref)return ki(t,s,C)}return s.flags|=1,t=ls(b,g),t.ref=s.ref,t.return=s,s.child=t}function $h(t,s,f,g,C){if(t!==null){var b=t.memoizedProps;if(oe(b,g)&&t.ref===s.ref)if(gr=!1,s.pendingProps=g=b,(t.lanes&C)!==0)t.flags&131072&&(gr=!0);else return s.lanes=t.lanes,ki(t,s,C)}return Ic(t,s,f,g,C)}function qh(t,s,f){var g=s.pendingProps,C=g.children,b=t!==null?t.memoizedState:null;if(g.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Kt(Co,Ir),Ir|=f;else{if(!(f&1073741824))return t=b!==null?b.baseLanes|f:f,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Kt(Co,Ir),Ir|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=b!==null?b.baseLanes:f,Kt(Co,Ir),Ir|=g}else b!==null?(g=b.baseLanes|f,s.memoizedState=null):g=f,Kt(Co,Ir),Ir|=g;return lr(t,s,C,f),s.child}function Qh(t,s){var f=s.ref;(t===null&&f!==null||t!==null&&t.ref!==f)&&(s.flags|=512,s.flags|=2097152)}function Ic(t,s,f,g,C){var b=pr(f)?Ps:Jn.current;return b=co(s,b),xo(s,C),f=xc(t,s,f,g,b,C),g=yc(),t!==null&&!gr?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~C,ki(t,s,C)):(en&&g&&ec(s),s.flags|=1,lr(t,s,f,C),s.child)}function Jh(t,s,f,g,C){if(pr(f)){var b=!0;gl(s)}else b=!1;if(xo(s,C),s.stateNode===null)kl(t,s),zh(s,f,g),Sc(s,f,g,C),g=!0;else if(t===null){var M=s.stateNode,W=s.memoizedProps;M.props=W;var X=M.context,le=f.contextType;typeof le=="object"&&le!==null?le=Mr(le):(le=pr(f)?Ps:Jn.current,le=co(s,le));var ye=f.getDerivedStateFromProps,ve=typeof ye=="function"||typeof M.getSnapshotBeforeUpdate=="function";ve||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(W!==g||X!==le)&&Uh(s,M,g,le),ts=!1;var me=s.memoizedState;M.state=me,Sl(s,g,M,C),X=s.memoizedState,W!==g||me!==X||hr.current||ts?(typeof ye=="function"&&(Ac(s,f,ye,g),X=s.memoizedState),(W=ts||Vh(s,f,W,g,me,X,le))?(ve||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(s.flags|=4194308)):(typeof M.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=g,s.memoizedState=X),M.props=g,M.state=X,M.context=le,g=W):(typeof M.componentDidMount=="function"&&(s.flags|=4194308),g=!1)}else{M=s.stateNode,gh(t,s),W=s.memoizedProps,le=s.type===s.elementType?W:Zr(s.type,W),M.props=le,ve=s.pendingProps,me=M.context,X=f.contextType,typeof X=="object"&&X!==null?X=Mr(X):(X=pr(f)?Ps:Jn.current,X=co(s,X));var Le=f.getDerivedStateFromProps;(ye=typeof Le=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(W!==ve||me!==X)&&Uh(s,M,g,X),ts=!1,me=s.memoizedState,M.state=me,Sl(s,g,M,C);var ze=s.memoizedState;W!==ve||me!==ze||hr.current||ts?(typeof Le=="function"&&(Ac(s,f,Le,g),ze=s.memoizedState),(le=ts||Vh(s,f,le,g,me,ze,X)||!1)?(ye||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(g,ze,X),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(g,ze,X)),typeof M.componentDidUpdate=="function"&&(s.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof M.componentDidUpdate!="function"||W===t.memoizedProps&&me===t.memoizedState||(s.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||W===t.memoizedProps&&me===t.memoizedState||(s.flags|=1024),s.memoizedProps=g,s.memoizedState=ze),M.props=g,M.state=ze,M.context=X,g=le):(typeof M.componentDidUpdate!="function"||W===t.memoizedProps&&me===t.memoizedState||(s.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||W===t.memoizedProps&&me===t.memoizedState||(s.flags|=1024),g=!1)}return Nc(t,s,f,g,b,C)}function Nc(t,s,f,g,C,b){Qh(t,s);var M=(s.flags&128)!==0;if(!g&&!M)return C&&ih(s,f,!1),ki(t,s,b);g=s.stateNode,hx.current=s;var W=M&&typeof f.getDerivedStateFromError!="function"?null:g.render();return s.flags|=1,t!==null&&M?(s.child=go(s,t.child,null,b),s.child=go(s,null,W,b)):lr(t,s,W,b),s.memoizedState=g.state,C&&ih(s,f,!0),s.child}function e0(t){var s=t.stateNode;s.pendingContext?nh(t,s.pendingContext,s.pendingContext!==s.context):s.context&&nh(t,s.context,!1),fc(t,s.containerInfo)}function t0(t,s,f,g,C){return po(),ic(C),s.flags|=256,lr(t,s,f,g),s.child}var Rc={dehydrated:null,treeContext:null,retryLane:0};function _c(t){return{baseLanes:t,cachePool:null,transitions:null}}function n0(t,s,f){var g=s.pendingProps,C=on.current,b=!1,M=(s.flags&128)!==0,W;if((W=M)||(W=t!==null&&t.memoizedState===null?!1:(C&2)!==0),W?(b=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(C|=1),Kt(on,C&1),t===null)return rc(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(M=g.children,t=g.fallback,b?(g=s.mode,b=s.child,M={mode:"hidden",children:M},!(g&1)&&b!==null?(b.childLanes=0,b.pendingProps=M):b=Gl(M,g,0,null),t=zs(t,g,f,null),b.return=s,t.return=s,b.sibling=t,s.child=b,s.child.memoizedState=_c(f),s.memoizedState=Rc,t):Pc(s,M));if(C=t.memoizedState,C!==null&&(W=C.dehydrated,W!==null))return px(t,s,M,g,W,C,f);if(b){b=g.fallback,M=s.mode,C=t.child,W=C.sibling;var X={mode:"hidden",children:g.children};return!(M&1)&&s.child!==C?(g=s.child,g.childLanes=0,g.pendingProps=X,s.deletions=null):(g=ls(C,X),g.subtreeFlags=C.subtreeFlags&14680064),W!==null?b=ls(W,b):(b=zs(b,M,f,null),b.flags|=2),b.return=s,g.return=s,g.sibling=b,s.child=g,g=b,b=s.child,M=t.child.memoizedState,M=M===null?_c(f):{baseLanes:M.baseLanes|f,cachePool:null,transitions:M.transitions},b.memoizedState=M,b.childLanes=t.childLanes&~f,s.memoizedState=Rc,g}return b=t.child,t=b.sibling,g=ls(b,{mode:"visible",children:g.children}),!(s.mode&1)&&(g.lanes=f),g.return=s,g.sibling=null,t!==null&&(f=s.deletions,f===null?(s.deletions=[t],s.flags|=16):f.push(t)),s.child=g,s.memoizedState=null,g}function Pc(t,s){return s=Gl({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function Ol(t,s,f,g){return g!==null&&ic(g),go(s,t.child,null,f),t=Pc(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function px(t,s,f,g,C,b,M){if(f)return s.flags&256?(s.flags&=-257,g=bc(Error(a(422))),Ol(t,s,M,g)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(b=g.fallback,C=s.mode,g=Gl({mode:"visible",children:g.children},C,0,null),b=zs(b,C,M,null),b.flags|=2,g.return=s,b.return=s,g.sibling=b,s.child=g,s.mode&1&&go(s,t.child,null,M),s.child.memoizedState=_c(M),s.memoizedState=Rc,b);if(!(s.mode&1))return Ol(t,s,M,null);if(C.data==="$!"){if(g=C.nextSibling&&C.nextSibling.dataset,g)var W=g.dgst;return g=W,b=Error(a(419)),g=bc(b,g,void 0),Ol(t,s,M,g)}if(W=(M&t.childLanes)!==0,gr||W){if(g=Ln,g!==null){switch(M&-M){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}C=C&(g.suspendedLanes|M)?0:C,C!==0&&C!==b.retryLane&&(b.retryLane=C,Pi(t,C),Qr(g,t,C,-1))}return Yc(),g=bc(Error(a(421))),Ol(t,s,M,g)}return C.data==="$?"?(s.flags|=128,s.child=t.child,s=Ix.bind(null,t),C._reactRetry=s,null):(t=b.treeContext,Tr=qi(C.nextSibling),br=s,en=!0,Kr=null,t!==null&&(Or[kr++]=Ri,Or[kr++]=_i,Or[kr++]=Os,Ri=t.id,_i=t.overflow,Os=s),s=Pc(s,g.children),s.flags|=4096,s)}function r0(t,s,f){t.lanes|=s;var g=t.alternate;g!==null&&(g.lanes|=s),lc(t.return,s,f)}function Oc(t,s,f,g,C){var b=t.memoizedState;b===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:C}:(b.isBackwards=s,b.rendering=null,b.renderingStartTime=0,b.last=g,b.tail=f,b.tailMode=C)}function i0(t,s,f){var g=s.pendingProps,C=g.revealOrder,b=g.tail;if(lr(t,s,g.children,f),g=on.current,g&2)g=g&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&r0(t,f,s);else if(t.tag===19)r0(t,f,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}g&=1}if(Kt(on,g),!(s.mode&1))s.memoizedState=null;else switch(C){case"forwards":for(f=s.child,C=null;f!==null;)t=f.alternate,t!==null&&bl(t)===null&&(C=f),f=f.sibling;f=C,f===null?(C=s.child,s.child=null):(C=f.sibling,f.sibling=null),Oc(s,!1,C,f,b);break;case"backwards":for(f=null,C=s.child,s.child=null;C!==null;){if(t=C.alternate,t!==null&&bl(t)===null){s.child=C;break}t=C.sibling,C.sibling=f,f=C,C=t}Oc(s,!0,f,null,b);break;case"together":Oc(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function kl(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function ki(t,s,f){if(t!==null&&(s.dependencies=t.dependencies),Bs|=s.lanes,!(f&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(a(153));if(s.child!==null){for(t=s.child,f=ls(t,t.pendingProps),s.child=f,f.return=s;t.sibling!==null;)t=t.sibling,f=f.sibling=ls(t,t.pendingProps),f.return=s;f.sibling=null}return s.child}function gx(t,s,f){switch(s.tag){case 3:e0(s),po();break;case 5:yh(s);break;case 1:pr(s.type)&&gl(s);break;case 4:fc(s,s.stateNode.containerInfo);break;case 10:var g=s.type._context,C=s.memoizedProps.value;Kt(Cl,g._currentValue),g._currentValue=C;break;case 13:if(g=s.memoizedState,g!==null)return g.dehydrated!==null?(Kt(on,on.current&1),s.flags|=128,null):f&s.child.childLanes?n0(t,s,f):(Kt(on,on.current&1),t=ki(t,s,f),t!==null?t.sibling:null);Kt(on,on.current&1);break;case 19:if(g=(f&s.childLanes)!==0,t.flags&128){if(g)return i0(t,s,f);s.flags|=128}if(C=s.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),Kt(on,on.current),g)break;return null;case 22:case 23:return s.lanes=0,qh(t,s,f)}return ki(t,s,f)}var s0,kc,o0,a0;s0=function(t,s){for(var f=s.child;f!==null;){if(f.tag===5||f.tag===6)t.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break;for(;f.sibling===null;){if(f.return===null||f.return===s)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},kc=function(){},o0=function(t,s,f,g){var C=t.memoizedProps;if(C!==g){t=s.stateNode,Ds(ai.current);var b=null;switch(f){case"input":C=wt(t,C),g=wt(t,g),b=[];break;case"select":C=pe({},C,{value:void 0}),g=pe({},g,{value:void 0}),b=[];break;case"textarea":C=xn(t,C),g=xn(t,g),b=[];break;default:typeof C.onClick!="function"&&typeof g.onClick=="function"&&(t.onclick=dl)}Nt(f,g);var M;f=null;for(le in C)if(!g.hasOwnProperty(le)&&C.hasOwnProperty(le)&&C[le]!=null)if(le==="style"){var W=C[le];for(M in W)W.hasOwnProperty(M)&&(f||(f={}),f[M]="")}else le!=="dangerouslySetInnerHTML"&&le!=="children"&&le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&le!=="autoFocus"&&(p.hasOwnProperty(le)?b||(b=[]):(b=b||[]).push(le,null));for(le in g){var X=g[le];if(W=C!=null?C[le]:void 0,g.hasOwnProperty(le)&&X!==W&&(X!=null||W!=null))if(le==="style")if(W){for(M in W)!W.hasOwnProperty(M)||X&&X.hasOwnProperty(M)||(f||(f={}),f[M]="");for(M in X)X.hasOwnProperty(M)&&W[M]!==X[M]&&(f||(f={}),f[M]=X[M])}else f||(b||(b=[]),b.push(le,f)),f=X;else le==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,W=W?W.__html:void 0,X!=null&&W!==X&&(b=b||[]).push(le,X)):le==="children"?typeof X!="string"&&typeof X!="number"||(b=b||[]).push(le,""+X):le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&(p.hasOwnProperty(le)?(X!=null&&le==="onScroll"&&qt("scroll",t),b||W===X||(b=[])):(b=b||[]).push(le,X))}f&&(b=b||[]).push("style",f);var le=b;(s.updateQueue=le)&&(s.flags|=4)}},a0=function(t,s,f,g){f!==g&&(s.flags|=4)};function da(t,s){if(!en)switch(t.tailMode){case"hidden":s=t.tail;for(var f=null;s!==null;)s.alternate!==null&&(f=s),s=s.sibling;f===null?t.tail=null:f.sibling=null;break;case"collapsed":f=t.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:g.sibling=null}}function tr(t){var s=t.alternate!==null&&t.alternate.child===t.child,f=0,g=0;if(s)for(var C=t.child;C!==null;)f|=C.lanes|C.childLanes,g|=C.subtreeFlags&14680064,g|=C.flags&14680064,C.return=t,C=C.sibling;else for(C=t.child;C!==null;)f|=C.lanes|C.childLanes,g|=C.subtreeFlags,g|=C.flags,C.return=t,C=C.sibling;return t.subtreeFlags|=g,t.childLanes=f,s}function mx(t,s,f){var g=s.pendingProps;switch(tc(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tr(s),null;case 1:return pr(s.type)&&pl(),tr(s),null;case 3:return g=s.stateNode,yo(),Qt(hr),Qt(Jn),pc(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(t===null||t.child===null)&&(wl(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Kr!==null&&(Hc(Kr),Kr=null))),kc(t,s),tr(s),null;case 5:dc(s);var C=Ds(aa.current);if(f=s.type,t!==null&&s.stateNode!=null)o0(t,s,f,g,C),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!g){if(s.stateNode===null)throw Error(a(166));return tr(s),null}if(t=Ds(ai.current),wl(s)){g=s.stateNode,f=s.type;var b=s.memoizedProps;switch(g[oi]=s,g[na]=b,t=(s.mode&1)!==0,f){case"dialog":qt("cancel",g),qt("close",g);break;case"iframe":case"object":case"embed":qt("load",g);break;case"video":case"audio":for(C=0;C<Jo.length;C++)qt(Jo[C],g);break;case"source":qt("error",g);break;case"img":case"image":case"link":qt("error",g),qt("load",g);break;case"details":qt("toggle",g);break;case"input":Ht(g,b),qt("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!b.multiple},qt("invalid",g);break;case"textarea":Lt(g,b),qt("invalid",g)}Nt(f,b),C=null;for(var M in b)if(b.hasOwnProperty(M)){var W=b[M];M==="children"?typeof W=="string"?g.textContent!==W&&(b.suppressHydrationWarning!==!0&&fl(g.textContent,W,t),C=["children",W]):typeof W=="number"&&g.textContent!==""+W&&(b.suppressHydrationWarning!==!0&&fl(g.textContent,W,t),C=["children",""+W]):p.hasOwnProperty(M)&&W!=null&&M==="onScroll"&&qt("scroll",g)}switch(f){case"input":Ne(g),Tt(g,b,!0);break;case"textarea":Ne(g),ct(g);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(g.onclick=dl)}g=C,s.updateQueue=g,g!==null&&(s.flags|=4)}else{M=C.nodeType===9?C:C.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=it(f)),t==="http://www.w3.org/1999/xhtml"?f==="script"?(t=M.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof g.is=="string"?t=M.createElement(f,{is:g.is}):(t=M.createElement(f),f==="select"&&(M=t,g.multiple?M.multiple=!0:g.size&&(M.size=g.size))):t=M.createElementNS(t,f),t[oi]=s,t[na]=g,s0(t,s,!1,!1),s.stateNode=t;e:{switch(M=jt(f,g),f){case"dialog":qt("cancel",t),qt("close",t),C=g;break;case"iframe":case"object":case"embed":qt("load",t),C=g;break;case"video":case"audio":for(C=0;C<Jo.length;C++)qt(Jo[C],t);C=g;break;case"source":qt("error",t),C=g;break;case"img":case"image":case"link":qt("error",t),qt("load",t),C=g;break;case"details":qt("toggle",t),C=g;break;case"input":Ht(t,g),C=wt(t,g),qt("invalid",t);break;case"option":C=g;break;case"select":t._wrapperState={wasMultiple:!!g.multiple},C=pe({},g,{value:void 0}),qt("invalid",t);break;case"textarea":Lt(t,g),C=xn(t,g),qt("invalid",t);break;default:C=g}Nt(f,C),W=C;for(b in W)if(W.hasOwnProperty(b)){var X=W[b];b==="style"?we(t,X):b==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,X!=null&&At(t,X)):b==="children"?typeof X=="string"?(f!=="textarea"||X!=="")&&cn(t,X):typeof X=="number"&&cn(t,""+X):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(p.hasOwnProperty(b)?X!=null&&b==="onScroll"&&qt("scroll",t):X!=null&&U(t,b,X,M))}switch(f){case"input":Ne(t),Tt(t,g,!1);break;case"textarea":Ne(t),ct(t);break;case"option":g.value!=null&&t.setAttribute("value",""+He(g.value));break;case"select":t.multiple=!!g.multiple,b=g.value,b!=null?_e(t,!!g.multiple,b,!1):g.defaultValue!=null&&_e(t,!!g.multiple,g.defaultValue,!0);break;default:typeof C.onClick=="function"&&(t.onclick=dl)}switch(f){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return tr(s),null;case 6:if(t&&s.stateNode!=null)a0(t,s,t.memoizedProps,g);else{if(typeof g!="string"&&s.stateNode===null)throw Error(a(166));if(f=Ds(aa.current),Ds(ai.current),wl(s)){if(g=s.stateNode,f=s.memoizedProps,g[oi]=s,(b=g.nodeValue!==f)&&(t=br,t!==null))switch(t.tag){case 3:fl(g.nodeValue,f,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fl(g.nodeValue,f,(t.mode&1)!==0)}b&&(s.flags|=4)}else g=(f.nodeType===9?f:f.ownerDocument).createTextNode(g),g[oi]=s,s.stateNode=g}return tr(s),null;case 13:if(Qt(on),g=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(en&&Tr!==null&&s.mode&1&&!(s.flags&128))ch(),po(),s.flags|=98560,b=!1;else if(b=wl(s),g!==null&&g.dehydrated!==null){if(t===null){if(!b)throw Error(a(318));if(b=s.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(a(317));b[oi]=s}else po(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;tr(s),b=!1}else Kr!==null&&(Hc(Kr),Kr=null),b=!0;if(!b)return s.flags&65536?s:null}return s.flags&128?(s.lanes=f,s):(g=g!==null,g!==(t!==null&&t.memoizedState!==null)&&g&&(s.child.flags|=8192,s.mode&1&&(t===null||on.current&1?On===0&&(On=3):Yc())),s.updateQueue!==null&&(s.flags|=4),tr(s),null);case 4:return yo(),kc(t,s),t===null&&ea(s.stateNode.containerInfo),tr(s),null;case 10:return ac(s.type._context),tr(s),null;case 17:return pr(s.type)&&pl(),tr(s),null;case 19:if(Qt(on),b=s.memoizedState,b===null)return tr(s),null;if(g=(s.flags&128)!==0,M=b.rendering,M===null)if(g)da(b,!1);else{if(On!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(M=bl(t),M!==null){for(s.flags|=128,da(b,!1),g=M.updateQueue,g!==null&&(s.updateQueue=g,s.flags|=4),s.subtreeFlags=0,g=f,f=s.child;f!==null;)b=f,t=g,b.flags&=14680066,M=b.alternate,M===null?(b.childLanes=0,b.lanes=t,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=M.childLanes,b.lanes=M.lanes,b.child=M.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=M.memoizedProps,b.memoizedState=M.memoizedState,b.updateQueue=M.updateQueue,b.type=M.type,t=M.dependencies,b.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),f=f.sibling;return Kt(on,on.current&1|2),s.child}t=t.sibling}b.tail!==null&&_t()>Eo&&(s.flags|=128,g=!0,da(b,!1),s.lanes=4194304)}else{if(!g)if(t=bl(M),t!==null){if(s.flags|=128,g=!0,f=t.updateQueue,f!==null&&(s.updateQueue=f,s.flags|=4),da(b,!0),b.tail===null&&b.tailMode==="hidden"&&!M.alternate&&!en)return tr(s),null}else 2*_t()-b.renderingStartTime>Eo&&f!==1073741824&&(s.flags|=128,g=!0,da(b,!1),s.lanes=4194304);b.isBackwards?(M.sibling=s.child,s.child=M):(f=b.last,f!==null?f.sibling=M:s.child=M,b.last=M)}return b.tail!==null?(s=b.tail,b.rendering=s,b.tail=s.sibling,b.renderingStartTime=_t(),s.sibling=null,f=on.current,Kt(on,g?f&1|2:f&1),s):(tr(s),null);case 22:case 23:return Xc(),g=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==g&&(s.flags|=8192),g&&s.mode&1?Ir&1073741824&&(tr(s),s.subtreeFlags&6&&(s.flags|=8192)):tr(s),null;case 24:return null;case 25:return null}throw Error(a(156,s.tag))}function xx(t,s){switch(tc(s),s.tag){case 1:return pr(s.type)&&pl(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return yo(),Qt(hr),Qt(Jn),pc(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return dc(s),null;case 13:if(Qt(on),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(a(340));po()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Qt(on),null;case 4:return yo(),null;case 10:return ac(s.type._context),null;case 22:case 23:return Xc(),null;case 24:return null;default:return null}}var Ml=!1,nr=!1,yx=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function vo(t,s){var f=t.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(g){pn(t,s,g)}else f.current=null}function Mc(t,s,f){try{f()}catch(g){pn(t,s,g)}}var l0=!1;function wx(t,s){if(Xu=ii,t=gt(),ot(t)){if("selectionStart"in t)var f={start:t.selectionStart,end:t.selectionEnd};else e:{f=(f=t.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var C=g.anchorOffset,b=g.focusNode;g=g.focusOffset;try{f.nodeType,b.nodeType}catch{f=null;break e}var M=0,W=-1,X=-1,le=0,ye=0,ve=t,me=null;t:for(;;){for(var Le;ve!==f||C!==0&&ve.nodeType!==3||(W=M+C),ve!==b||g!==0&&ve.nodeType!==3||(X=M+g),ve.nodeType===3&&(M+=ve.nodeValue.length),(Le=ve.firstChild)!==null;)me=ve,ve=Le;for(;;){if(ve===t)break t;if(me===f&&++le===C&&(W=M),me===b&&++ye===g&&(X=M),(Le=ve.nextSibling)!==null)break;ve=me,me=ve.parentNode}ve=Le}f=W===-1||X===-1?null:{start:W,end:X}}else f=null}f=f||{start:0,end:0}}else f=null;for(Yu={focusedElem:t,selectionRange:f},ii=!1,Ve=s;Ve!==null;)if(s=Ve,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Ve=t;else for(;Ve!==null;){s=Ve;try{var ze=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ze!==null){var Ue=ze.memoizedProps,En=ze.memoizedState,te=s.stateNode,K=te.getSnapshotBeforeUpdate(s.elementType===s.type?Ue:Zr(s.type,Ue),En);te.__reactInternalSnapshotBeforeUpdate=K}break;case 3:var ie=s.stateNode.containerInfo;ie.nodeType===1?ie.textContent="":ie.nodeType===9&&ie.documentElement&&ie.removeChild(ie.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(Se){pn(s,s.return,Se)}if(t=s.sibling,t!==null){t.return=s.return,Ve=t;break}Ve=s.return}return ze=l0,l0=!1,ze}function ha(t,s,f){var g=s.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var C=g=g.next;do{if((C.tag&t)===t){var b=C.destroy;C.destroy=void 0,b!==void 0&&Mc(s,f,b)}C=C.next}while(C!==g)}}function Dl(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var f=s=s.next;do{if((f.tag&t)===t){var g=f.create;f.destroy=g()}f=f.next}while(f!==s)}}function Dc(t){var s=t.ref;if(s!==null){var f=t.stateNode;switch(t.tag){case 5:t=f;break;default:t=f}typeof s=="function"?s(t):s.current=t}}function u0(t){var s=t.alternate;s!==null&&(t.alternate=null,u0(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[oi],delete s[na],delete s[qu],delete s[tx],delete s[nx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function c0(t){return t.tag===5||t.tag===3||t.tag===4}function f0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||c0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Lc(t,s,f){var g=t.tag;if(g===5||g===6)t=t.stateNode,s?f.nodeType===8?f.parentNode.insertBefore(t,s):f.insertBefore(t,s):(f.nodeType===8?(s=f.parentNode,s.insertBefore(t,f)):(s=f,s.appendChild(t)),f=f._reactRootContainer,f!=null||s.onclick!==null||(s.onclick=dl));else if(g!==4&&(t=t.child,t!==null))for(Lc(t,s,f),t=t.sibling;t!==null;)Lc(t,s,f),t=t.sibling}function Bc(t,s,f){var g=t.tag;if(g===5||g===6)t=t.stateNode,s?f.insertBefore(t,s):f.appendChild(t);else if(g!==4&&(t=t.child,t!==null))for(Bc(t,s,f),t=t.sibling;t!==null;)Bc(t,s,f),t=t.sibling}var zn=null,$r=!1;function rs(t,s,f){for(f=f.child;f!==null;)d0(t,s,f),f=f.sibling}function d0(t,s,f){if(ft&&typeof ft.onCommitFiberUnmount=="function")try{ft.onCommitFiberUnmount(It,f)}catch{}switch(f.tag){case 5:nr||vo(f,s);case 6:var g=zn,C=$r;zn=null,rs(t,s,f),zn=g,$r=C,zn!==null&&($r?(t=zn,f=f.stateNode,t.nodeType===8?t.parentNode.removeChild(f):t.removeChild(f)):zn.removeChild(f.stateNode));break;case 18:zn!==null&&($r?(t=zn,f=f.stateNode,t.nodeType===8?$u(t.parentNode,f):t.nodeType===1&&$u(t,f),Gr(t)):$u(zn,f.stateNode));break;case 4:g=zn,C=$r,zn=f.stateNode.containerInfo,$r=!0,rs(t,s,f),zn=g,$r=C;break;case 0:case 11:case 14:case 15:if(!nr&&(g=f.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){C=g=g.next;do{var b=C,M=b.destroy;b=b.tag,M!==void 0&&(b&2||b&4)&&Mc(f,s,M),C=C.next}while(C!==g)}rs(t,s,f);break;case 1:if(!nr&&(vo(f,s),g=f.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=f.memoizedProps,g.state=f.memoizedState,g.componentWillUnmount()}catch(W){pn(f,s,W)}rs(t,s,f);break;case 21:rs(t,s,f);break;case 22:f.mode&1?(nr=(g=nr)||f.memoizedState!==null,rs(t,s,f),nr=g):rs(t,s,f);break;default:rs(t,s,f)}}function h0(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var f=t.stateNode;f===null&&(f=t.stateNode=new yx),s.forEach(function(g){var C=Nx.bind(null,t,g);f.has(g)||(f.add(g),g.then(C,C))})}}function qr(t,s){var f=s.deletions;if(f!==null)for(var g=0;g<f.length;g++){var C=f[g];try{var b=t,M=s,W=M;e:for(;W!==null;){switch(W.tag){case 5:zn=W.stateNode,$r=!1;break e;case 3:zn=W.stateNode.containerInfo,$r=!0;break e;case 4:zn=W.stateNode.containerInfo,$r=!0;break e}W=W.return}if(zn===null)throw Error(a(160));d0(b,M,C),zn=null,$r=!1;var X=C.alternate;X!==null&&(X.return=null),C.return=null}catch(le){pn(C,s,le)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)p0(s,t),s=s.sibling}function p0(t,s){var f=t.alternate,g=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qr(s,t),ui(t),g&4){try{ha(3,t,t.return),Dl(3,t)}catch(Ue){pn(t,t.return,Ue)}try{ha(5,t,t.return)}catch(Ue){pn(t,t.return,Ue)}}break;case 1:qr(s,t),ui(t),g&512&&f!==null&&vo(f,f.return);break;case 5:if(qr(s,t),ui(t),g&512&&f!==null&&vo(f,f.return),t.flags&32){var C=t.stateNode;try{cn(C,"")}catch(Ue){pn(t,t.return,Ue)}}if(g&4&&(C=t.stateNode,C!=null)){var b=t.memoizedProps,M=f!==null?f.memoizedProps:b,W=t.type,X=t.updateQueue;if(t.updateQueue=null,X!==null)try{W==="input"&&b.type==="radio"&&b.name!=null&&$t(C,b),jt(W,M);var le=jt(W,b);for(M=0;M<X.length;M+=2){var ye=X[M],ve=X[M+1];ye==="style"?we(C,ve):ye==="dangerouslySetInnerHTML"?At(C,ve):ye==="children"?cn(C,ve):U(C,ye,ve,le)}switch(W){case"input":Rt(C,b);break;case"textarea":Fe(C,b);break;case"select":var me=C._wrapperState.wasMultiple;C._wrapperState.wasMultiple=!!b.multiple;var Le=b.value;Le!=null?_e(C,!!b.multiple,Le,!1):me!==!!b.multiple&&(b.defaultValue!=null?_e(C,!!b.multiple,b.defaultValue,!0):_e(C,!!b.multiple,b.multiple?[]:"",!1))}C[na]=b}catch(Ue){pn(t,t.return,Ue)}}break;case 6:if(qr(s,t),ui(t),g&4){if(t.stateNode===null)throw Error(a(162));C=t.stateNode,b=t.memoizedProps;try{C.nodeValue=b}catch(Ue){pn(t,t.return,Ue)}}break;case 3:if(qr(s,t),ui(t),g&4&&f!==null&&f.memoizedState.isDehydrated)try{Gr(s.containerInfo)}catch(Ue){pn(t,t.return,Ue)}break;case 4:qr(s,t),ui(t);break;case 13:qr(s,t),ui(t),C=t.child,C.flags&8192&&(b=C.memoizedState!==null,C.stateNode.isHidden=b,!b||C.alternate!==null&&C.alternate.memoizedState!==null||(Vc=_t())),g&4&&h0(t);break;case 22:if(ye=f!==null&&f.memoizedState!==null,t.mode&1?(nr=(le=nr)||ye,qr(s,t),nr=le):qr(s,t),ui(t),g&8192){if(le=t.memoizedState!==null,(t.stateNode.isHidden=le)&&!ye&&t.mode&1)for(Ve=t,ye=t.child;ye!==null;){for(ve=Ve=ye;Ve!==null;){switch(me=Ve,Le=me.child,me.tag){case 0:case 11:case 14:case 15:ha(4,me,me.return);break;case 1:vo(me,me.return);var ze=me.stateNode;if(typeof ze.componentWillUnmount=="function"){g=me,f=me.return;try{s=g,ze.props=s.memoizedProps,ze.state=s.memoizedState,ze.componentWillUnmount()}catch(Ue){pn(g,f,Ue)}}break;case 5:vo(me,me.return);break;case 22:if(me.memoizedState!==null){x0(ve);continue}}Le!==null?(Le.return=me,Ve=Le):x0(ve)}ye=ye.sibling}e:for(ye=null,ve=t;;){if(ve.tag===5){if(ye===null){ye=ve;try{C=ve.stateNode,le?(b=C.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(W=ve.stateNode,X=ve.memoizedProps.style,M=X!=null&&X.hasOwnProperty("display")?X.display:null,W.style.display=xt("display",M))}catch(Ue){pn(t,t.return,Ue)}}}else if(ve.tag===6){if(ye===null)try{ve.stateNode.nodeValue=le?"":ve.memoizedProps}catch(Ue){pn(t,t.return,Ue)}}else if((ve.tag!==22&&ve.tag!==23||ve.memoizedState===null||ve===t)&&ve.child!==null){ve.child.return=ve,ve=ve.child;continue}if(ve===t)break e;for(;ve.sibling===null;){if(ve.return===null||ve.return===t)break e;ye===ve&&(ye=null),ve=ve.return}ye===ve&&(ye=null),ve.sibling.return=ve.return,ve=ve.sibling}}break;case 19:qr(s,t),ui(t),g&4&&h0(t);break;case 21:break;default:qr(s,t),ui(t)}}function ui(t){var s=t.flags;if(s&2){try{e:{for(var f=t.return;f!==null;){if(c0(f)){var g=f;break e}f=f.return}throw Error(a(160))}switch(g.tag){case 5:var C=g.stateNode;g.flags&32&&(cn(C,""),g.flags&=-33);var b=f0(t);Bc(t,b,C);break;case 3:case 4:var M=g.stateNode.containerInfo,W=f0(t);Lc(t,W,M);break;default:throw Error(a(161))}}catch(X){pn(t,t.return,X)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function vx(t,s,f){Ve=t,g0(t)}function g0(t,s,f){for(var g=(t.mode&1)!==0;Ve!==null;){var C=Ve,b=C.child;if(C.tag===22&&g){var M=C.memoizedState!==null||Ml;if(!M){var W=C.alternate,X=W!==null&&W.memoizedState!==null||nr;W=Ml;var le=nr;if(Ml=M,(nr=X)&&!le)for(Ve=C;Ve!==null;)M=Ve,X=M.child,M.tag===22&&M.memoizedState!==null?y0(C):X!==null?(X.return=M,Ve=X):y0(C);for(;b!==null;)Ve=b,g0(b),b=b.sibling;Ve=C,Ml=W,nr=le}m0(t)}else C.subtreeFlags&8772&&b!==null?(b.return=C,Ve=b):m0(t)}}function m0(t){for(;Ve!==null;){var s=Ve;if(s.flags&8772){var f=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:nr||Dl(5,s);break;case 1:var g=s.stateNode;if(s.flags&4&&!nr)if(f===null)g.componentDidMount();else{var C=s.elementType===s.type?f.memoizedProps:Zr(s.type,f.memoizedProps);g.componentDidUpdate(C,f.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var b=s.updateQueue;b!==null&&xh(s,b,g);break;case 3:var M=s.updateQueue;if(M!==null){if(f=null,s.child!==null)switch(s.child.tag){case 5:f=s.child.stateNode;break;case 1:f=s.child.stateNode}xh(s,M,f)}break;case 5:var W=s.stateNode;if(f===null&&s.flags&4){f=W;var X=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":X.autoFocus&&f.focus();break;case"img":X.src&&(f.src=X.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var le=s.alternate;if(le!==null){var ye=le.memoizedState;if(ye!==null){var ve=ye.dehydrated;ve!==null&&Gr(ve)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}nr||s.flags&512&&Dc(s)}catch(me){pn(s,s.return,me)}}if(s===t){Ve=null;break}if(f=s.sibling,f!==null){f.return=s.return,Ve=f;break}Ve=s.return}}function x0(t){for(;Ve!==null;){var s=Ve;if(s===t){Ve=null;break}var f=s.sibling;if(f!==null){f.return=s.return,Ve=f;break}Ve=s.return}}function y0(t){for(;Ve!==null;){var s=Ve;try{switch(s.tag){case 0:case 11:case 15:var f=s.return;try{Dl(4,s)}catch(X){pn(s,f,X)}break;case 1:var g=s.stateNode;if(typeof g.componentDidMount=="function"){var C=s.return;try{g.componentDidMount()}catch(X){pn(s,C,X)}}var b=s.return;try{Dc(s)}catch(X){pn(s,b,X)}break;case 5:var M=s.return;try{Dc(s)}catch(X){pn(s,M,X)}}}catch(X){pn(s,s.return,X)}if(s===t){Ve=null;break}var W=s.sibling;if(W!==null){W.return=s.return,Ve=W;break}Ve=s.return}}var Cx=Math.ceil,Ll=ne.ReactCurrentDispatcher,Fc=ne.ReactCurrentOwner,Lr=ne.ReactCurrentBatchConfig,Ot=0,Ln=null,bn=null,Un=0,Ir=0,Co=Qi(0),On=0,pa=null,Bs=0,Bl=0,jc=0,ga=null,mr=null,Vc=0,Eo=1/0,Mi=null,Fl=!1,zc=null,is=null,jl=!1,ss=null,Vl=0,ma=0,Uc=null,zl=-1,Ul=0;function ur(){return Ot&6?_t():zl!==-1?zl:zl=_t()}function os(t){return t.mode&1?Ot&2&&Un!==0?Un&-Un:ix.transition!==null?(Ul===0&&(Ul=In()),Ul):(t=dt,t!==0||(t=window.event,t=t===void 0?16:Wo(t.type)),t):1}function Qr(t,s,f,g){if(50<ma)throw ma=0,Uc=null,Error(a(185));F(t,f,g),(!(Ot&2)||t!==Ln)&&(t===Ln&&(!(Ot&2)&&(Bl|=f),On===4&&as(t,Un)),xr(t,g),f===1&&Ot===0&&!(s.mode&1)&&(Eo=_t()+500,ml&&es()))}function xr(t,s){var f=t.callbackNode;zi(t,s);var g=Cr(t,t===Ln?Un:0);if(g===0)f!==null&&St(f),t.callbackNode=null,t.callbackPriority=0;else if(s=g&-g,t.callbackPriority!==s){if(f!=null&&St(f),s===1)t.tag===0?rx(v0.bind(null,t)):sh(v0.bind(null,t)),Jm(function(){!(Ot&6)&&es()}),f=null;else{switch(qa(g)){case 1:f=he;break;case 4:f=Bo;break;case 16:f=Mt;break;case 536870912:f=$a;break;default:f=Mt}f=N0(f,w0.bind(null,t))}t.callbackPriority=s,t.callbackNode=f}}function w0(t,s){if(zl=-1,Ul=0,Ot&6)throw Error(a(327));var f=t.callbackNode;if(Ao()&&t.callbackNode!==f)return null;var g=Cr(t,t===Ln?Un:0);if(g===0)return null;if(g&30||g&t.expiredLanes||s)s=Wl(t,g);else{s=g;var C=Ot;Ot|=2;var b=E0();(Ln!==t||Un!==s)&&(Mi=null,Eo=_t()+500,js(t,s));do try{Sx();break}catch(W){C0(t,W)}while(!0);oc(),Ll.current=b,Ot=C,bn!==null?s=0:(Ln=null,Un=0,s=On)}if(s!==0){if(s===2&&(C=Ft(t),C!==0&&(g=C,s=Wc(t,C))),s===1)throw f=pa,js(t,0),as(t,g),xr(t,_t()),f;if(s===6)as(t,g);else{if(C=t.current.alternate,!(g&30)&&!Ex(C)&&(s=Wl(t,g),s===2&&(b=Ft(t),b!==0&&(g=b,s=Wc(t,b))),s===1))throw f=pa,js(t,0),as(t,g),xr(t,_t()),f;switch(t.finishedWork=C,t.finishedLanes=g,s){case 0:case 1:throw Error(a(345));case 2:Vs(t,mr,Mi);break;case 3:if(as(t,g),(g&130023424)===g&&(s=Vc+500-_t(),10<s)){if(Cr(t,0)!==0)break;if(C=t.suspendedLanes,(C&g)!==g){ur(),t.pingedLanes|=t.suspendedLanes&C;break}t.timeoutHandle=Zu(Vs.bind(null,t,mr,Mi),s);break}Vs(t,mr,Mi);break;case 4:if(as(t,g),(g&4194240)===g)break;for(s=t.eventTimes,C=-1;0<g;){var M=31-ar(g);b=1<<M,M=s[M],M>C&&(C=M),g&=~b}if(g=C,g=_t()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*Cx(g/1960))-g,10<g){t.timeoutHandle=Zu(Vs.bind(null,t,mr,Mi),g);break}Vs(t,mr,Mi);break;case 5:Vs(t,mr,Mi);break;default:throw Error(a(329))}}}return xr(t,_t()),t.callbackNode===f?w0.bind(null,t):null}function Wc(t,s){var f=ga;return t.current.memoizedState.isDehydrated&&(js(t,s).flags|=256),t=Wl(t,s),t!==2&&(s=mr,mr=f,s!==null&&Hc(s)),t}function Hc(t){mr===null?mr=t:mr.push.apply(mr,t)}function Ex(t){for(var s=t;;){if(s.flags&16384){var f=s.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var g=0;g<f.length;g++){var C=f[g],b=C.getSnapshot;C=C.value;try{if(!Q(b(),C))return!1}catch{return!1}}}if(f=s.child,s.subtreeFlags&16384&&f!==null)f.return=s,s=f;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function as(t,s){for(s&=~jc,s&=~Bl,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var f=31-ar(s),g=1<<f;t[f]=-1,s&=~g}}function v0(t){if(Ot&6)throw Error(a(327));Ao();var s=Cr(t,0);if(!(s&1))return xr(t,_t()),null;var f=Wl(t,s);if(t.tag!==0&&f===2){var g=Ft(t);g!==0&&(s=g,f=Wc(t,g))}if(f===1)throw f=pa,js(t,0),as(t,s),xr(t,_t()),f;if(f===6)throw Error(a(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,Vs(t,mr,Mi),xr(t,_t()),null}function Gc(t,s){var f=Ot;Ot|=1;try{return t(s)}finally{Ot=f,Ot===0&&(Eo=_t()+500,ml&&es())}}function Fs(t){ss!==null&&ss.tag===0&&!(Ot&6)&&Ao();var s=Ot;Ot|=1;var f=Lr.transition,g=dt;try{if(Lr.transition=null,dt=1,t)return t()}finally{dt=g,Lr.transition=f,Ot=s,!(Ot&6)&&es()}}function Xc(){Ir=Co.current,Qt(Co)}function js(t,s){t.finishedWork=null,t.finishedLanes=0;var f=t.timeoutHandle;if(f!==-1&&(t.timeoutHandle=-1,Qm(f)),bn!==null)for(f=bn.return;f!==null;){var g=f;switch(tc(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&pl();break;case 3:yo(),Qt(hr),Qt(Jn),pc();break;case 5:dc(g);break;case 4:yo();break;case 13:Qt(on);break;case 19:Qt(on);break;case 10:ac(g.type._context);break;case 22:case 23:Xc()}f=f.return}if(Ln=t,bn=t=ls(t.current,null),Un=Ir=s,On=0,pa=null,jc=Bl=Bs=0,mr=ga=null,Ms!==null){for(s=0;s<Ms.length;s++)if(f=Ms[s],g=f.interleaved,g!==null){f.interleaved=null;var C=g.next,b=f.pending;if(b!==null){var M=b.next;b.next=C,g.next=M}f.pending=g}Ms=null}return t}function C0(t,s){do{var f=bn;try{if(oc(),Tl.current=_l,Il){for(var g=an.memoizedState;g!==null;){var C=g.queue;C!==null&&(C.pending=null),g=g.next}Il=!1}if(Ls=0,Dn=Pn=an=null,la=!1,ua=0,Fc.current=null,f===null||f.return===null){On=1,pa=s,bn=null;break}e:{var b=t,M=f.return,W=f,X=s;if(s=Un,W.flags|=32768,X!==null&&typeof X=="object"&&typeof X.then=="function"){var le=X,ye=W,ve=ye.tag;if(!(ye.mode&1)&&(ve===0||ve===11||ve===15)){var me=ye.alternate;me?(ye.updateQueue=me.updateQueue,ye.memoizedState=me.memoizedState,ye.lanes=me.lanes):(ye.updateQueue=null,ye.memoizedState=null)}var Le=Xh(M);if(Le!==null){Le.flags&=-257,Yh(Le,M,W,b,s),Le.mode&1&&Gh(b,le,s),s=Le,X=le;var ze=s.updateQueue;if(ze===null){var Ue=new Set;Ue.add(X),s.updateQueue=Ue}else ze.add(X);break e}else{if(!(s&1)){Gh(b,le,s),Yc();break e}X=Error(a(426))}}else if(en&&W.mode&1){var En=Xh(M);if(En!==null){!(En.flags&65536)&&(En.flags|=256),Yh(En,M,W,b,s),ic(wo(X,W));break e}}b=X=wo(X,W),On!==4&&(On=2),ga===null?ga=[b]:ga.push(b),b=M;do{switch(b.tag){case 3:b.flags|=65536,s&=-s,b.lanes|=s;var te=Wh(b,X,s);mh(b,te);break e;case 1:W=X;var K=b.type,ie=b.stateNode;if(!(b.flags&128)&&(typeof K.getDerivedStateFromError=="function"||ie!==null&&typeof ie.componentDidCatch=="function"&&(is===null||!is.has(ie)))){b.flags|=65536,s&=-s,b.lanes|=s;var Se=Hh(b,W,s);mh(b,Se);break e}}b=b.return}while(b!==null)}S0(f)}catch(Xe){s=Xe,bn===f&&f!==null&&(bn=f=f.return);continue}break}while(!0)}function E0(){var t=Ll.current;return Ll.current=_l,t===null?_l:t}function Yc(){(On===0||On===3||On===2)&&(On=4),Ln===null||!(Bs&268435455)&&!(Bl&268435455)||as(Ln,Un)}function Wl(t,s){var f=Ot;Ot|=2;var g=E0();(Ln!==t||Un!==s)&&(Mi=null,js(t,s));do try{Ax();break}catch(C){C0(t,C)}while(!0);if(oc(),Ot=f,Ll.current=g,bn!==null)throw Error(a(261));return Ln=null,Un=0,On}function Ax(){for(;bn!==null;)A0(bn)}function Sx(){for(;bn!==null&&!Bt();)A0(bn)}function A0(t){var s=I0(t.alternate,t,Ir);t.memoizedProps=t.pendingProps,s===null?S0(t):bn=s,Fc.current=null}function S0(t){var s=t;do{var f=s.alternate;if(t=s.return,s.flags&32768){if(f=xx(f,s),f!==null){f.flags&=32767,bn=f;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{On=6,bn=null;return}}else if(f=mx(f,s,Ir),f!==null){bn=f;return}if(s=s.sibling,s!==null){bn=s;return}bn=s=t}while(s!==null);On===0&&(On=5)}function Vs(t,s,f){var g=dt,C=Lr.transition;try{Lr.transition=null,dt=1,bx(t,s,f,g)}finally{Lr.transition=C,dt=g}return null}function bx(t,s,f,g){do Ao();while(ss!==null);if(Ot&6)throw Error(a(327));f=t.finishedWork;var C=t.finishedLanes;if(f===null)return null;if(t.finishedWork=null,t.finishedLanes=0,f===t.current)throw Error(a(177));t.callbackNode=null,t.callbackPriority=0;var b=f.lanes|f.childLanes;if(Ye(t,b),t===Ln&&(bn=Ln=null,Un=0),!(f.subtreeFlags&2064)&&!(f.flags&2064)||jl||(jl=!0,N0(Mt,function(){return Ao(),null})),b=(f.flags&15990)!==0,f.subtreeFlags&15990||b){b=Lr.transition,Lr.transition=null;var M=dt;dt=1;var W=Ot;Ot|=4,Fc.current=null,wx(t,f),p0(f,t),Qn(Yu),ii=!!Xu,Yu=Xu=null,t.current=f,vx(f),qs(),Ot=W,dt=M,Lr.transition=b}else t.current=f;if(jl&&(jl=!1,ss=t,Vl=C),b=t.pendingLanes,b===0&&(is=null),Ct(f.stateNode),xr(t,_t()),s!==null)for(g=t.onRecoverableError,f=0;f<s.length;f++)C=s[f],g(C.value,{componentStack:C.stack,digest:C.digest});if(Fl)throw Fl=!1,t=zc,zc=null,t;return Vl&1&&t.tag!==0&&Ao(),b=t.pendingLanes,b&1?t===Uc?ma++:(ma=0,Uc=t):ma=0,es(),null}function Ao(){if(ss!==null){var t=qa(Vl),s=Lr.transition,f=dt;try{if(Lr.transition=null,dt=16>t?16:t,ss===null)var g=!1;else{if(t=ss,ss=null,Vl=0,Ot&6)throw Error(a(331));var C=Ot;for(Ot|=4,Ve=t.current;Ve!==null;){var b=Ve,M=b.child;if(Ve.flags&16){var W=b.deletions;if(W!==null){for(var X=0;X<W.length;X++){var le=W[X];for(Ve=le;Ve!==null;){var ye=Ve;switch(ye.tag){case 0:case 11:case 15:ha(8,ye,b)}var ve=ye.child;if(ve!==null)ve.return=ye,Ve=ve;else for(;Ve!==null;){ye=Ve;var me=ye.sibling,Le=ye.return;if(u0(ye),ye===le){Ve=null;break}if(me!==null){me.return=Le,Ve=me;break}Ve=Le}}}var ze=b.alternate;if(ze!==null){var Ue=ze.child;if(Ue!==null){ze.child=null;do{var En=Ue.sibling;Ue.sibling=null,Ue=En}while(Ue!==null)}}Ve=b}}if(b.subtreeFlags&2064&&M!==null)M.return=b,Ve=M;else e:for(;Ve!==null;){if(b=Ve,b.flags&2048)switch(b.tag){case 0:case 11:case 15:ha(9,b,b.return)}var te=b.sibling;if(te!==null){te.return=b.return,Ve=te;break e}Ve=b.return}}var K=t.current;for(Ve=K;Ve!==null;){M=Ve;var ie=M.child;if(M.subtreeFlags&2064&&ie!==null)ie.return=M,Ve=ie;else e:for(M=K;Ve!==null;){if(W=Ve,W.flags&2048)try{switch(W.tag){case 0:case 11:case 15:Dl(9,W)}}catch(Xe){pn(W,W.return,Xe)}if(W===M){Ve=null;break e}var Se=W.sibling;if(Se!==null){Se.return=W.return,Ve=Se;break e}Ve=W.return}}if(Ot=C,es(),ft&&typeof ft.onPostCommitFiberRoot=="function")try{ft.onPostCommitFiberRoot(It,t)}catch{}g=!0}return g}finally{dt=f,Lr.transition=s}}return!1}function b0(t,s,f){s=wo(f,s),s=Wh(t,s,1),t=ns(t,s,1),s=ur(),t!==null&&(F(t,1,s),xr(t,s))}function pn(t,s,f){if(t.tag===3)b0(t,t,f);else for(;s!==null;){if(s.tag===3){b0(s,t,f);break}else if(s.tag===1){var g=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(is===null||!is.has(g))){t=wo(f,t),t=Hh(s,t,1),s=ns(s,t,1),t=ur(),s!==null&&(F(s,1,t),xr(s,t));break}}s=s.return}}function Tx(t,s,f){var g=t.pingCache;g!==null&&g.delete(s),s=ur(),t.pingedLanes|=t.suspendedLanes&f,Ln===t&&(Un&f)===f&&(On===4||On===3&&(Un&130023424)===Un&&500>_t()-Vc?js(t,0):jc|=f),xr(t,s)}function T0(t,s){s===0&&(t.mode&1?(s=Qs,Qs<<=1,!(Qs&130023424)&&(Qs=4194304)):s=1);var f=ur();t=Pi(t,s),t!==null&&(F(t,s,f),xr(t,f))}function Ix(t){var s=t.memoizedState,f=0;s!==null&&(f=s.retryLane),T0(t,f)}function Nx(t,s){var f=0;switch(t.tag){case 13:var g=t.stateNode,C=t.memoizedState;C!==null&&(f=C.retryLane);break;case 19:g=t.stateNode;break;default:throw Error(a(314))}g!==null&&g.delete(s),T0(t,f)}var I0;I0=function(t,s,f){if(t!==null)if(t.memoizedProps!==s.pendingProps||hr.current)gr=!0;else{if(!(t.lanes&f)&&!(s.flags&128))return gr=!1,gx(t,s,f);gr=!!(t.flags&131072)}else gr=!1,en&&s.flags&1048576&&oh(s,yl,s.index);switch(s.lanes=0,s.tag){case 2:var g=s.type;kl(t,s),t=s.pendingProps;var C=co(s,Jn.current);xo(s,f),C=xc(null,s,g,t,C,f);var b=yc();return s.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,pr(g)?(b=!0,gl(s)):b=!1,s.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,cc(s),C.updater=Pl,s.stateNode=C,C._reactInternals=s,Sc(s,g,t,f),s=Nc(null,s,g,!0,b,f)):(s.tag=0,en&&b&&ec(s),lr(null,s,C,f),s=s.child),s;case 16:g=s.elementType;e:{switch(kl(t,s),t=s.pendingProps,C=g._init,g=C(g._payload),s.type=g,C=s.tag=_x(g),t=Zr(g,t),C){case 0:s=Ic(null,s,g,t,f);break e;case 1:s=Jh(null,s,g,t,f);break e;case 11:s=Kh(null,s,g,t,f);break e;case 14:s=Zh(null,s,g,Zr(g.type,t),f);break e}throw Error(a(306,g,""))}return s;case 0:return g=s.type,C=s.pendingProps,C=s.elementType===g?C:Zr(g,C),Ic(t,s,g,C,f);case 1:return g=s.type,C=s.pendingProps,C=s.elementType===g?C:Zr(g,C),Jh(t,s,g,C,f);case 3:e:{if(e0(s),t===null)throw Error(a(387));g=s.pendingProps,b=s.memoizedState,C=b.element,gh(t,s),Sl(s,g,null,f);var M=s.memoizedState;if(g=M.element,b.isDehydrated)if(b={element:g,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},s.updateQueue.baseState=b,s.memoizedState=b,s.flags&256){C=wo(Error(a(423)),s),s=t0(t,s,g,f,C);break e}else if(g!==C){C=wo(Error(a(424)),s),s=t0(t,s,g,f,C);break e}else for(Tr=qi(s.stateNode.containerInfo.firstChild),br=s,en=!0,Kr=null,f=hh(s,null,g,f),s.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(po(),g===C){s=ki(t,s,f);break e}lr(t,s,g,f)}s=s.child}return s;case 5:return yh(s),t===null&&rc(s),g=s.type,C=s.pendingProps,b=t!==null?t.memoizedProps:null,M=C.children,Ku(g,C)?M=null:b!==null&&Ku(g,b)&&(s.flags|=32),Qh(t,s),lr(t,s,M,f),s.child;case 6:return t===null&&rc(s),null;case 13:return n0(t,s,f);case 4:return fc(s,s.stateNode.containerInfo),g=s.pendingProps,t===null?s.child=go(s,null,g,f):lr(t,s,g,f),s.child;case 11:return g=s.type,C=s.pendingProps,C=s.elementType===g?C:Zr(g,C),Kh(t,s,g,C,f);case 7:return lr(t,s,s.pendingProps,f),s.child;case 8:return lr(t,s,s.pendingProps.children,f),s.child;case 12:return lr(t,s,s.pendingProps.children,f),s.child;case 10:e:{if(g=s.type._context,C=s.pendingProps,b=s.memoizedProps,M=C.value,Kt(Cl,g._currentValue),g._currentValue=M,b!==null)if(Q(b.value,M)){if(b.children===C.children&&!hr.current){s=ki(t,s,f);break e}}else for(b=s.child,b!==null&&(b.return=s);b!==null;){var W=b.dependencies;if(W!==null){M=b.child;for(var X=W.firstContext;X!==null;){if(X.context===g){if(b.tag===1){X=Oi(-1,f&-f),X.tag=2;var le=b.updateQueue;if(le!==null){le=le.shared;var ye=le.pending;ye===null?X.next=X:(X.next=ye.next,ye.next=X),le.pending=X}}b.lanes|=f,X=b.alternate,X!==null&&(X.lanes|=f),lc(b.return,f,s),W.lanes|=f;break}X=X.next}}else if(b.tag===10)M=b.type===s.type?null:b.child;else if(b.tag===18){if(M=b.return,M===null)throw Error(a(341));M.lanes|=f,W=M.alternate,W!==null&&(W.lanes|=f),lc(M,f,s),M=b.sibling}else M=b.child;if(M!==null)M.return=b;else for(M=b;M!==null;){if(M===s){M=null;break}if(b=M.sibling,b!==null){b.return=M.return,M=b;break}M=M.return}b=M}lr(t,s,C.children,f),s=s.child}return s;case 9:return C=s.type,g=s.pendingProps.children,xo(s,f),C=Mr(C),g=g(C),s.flags|=1,lr(t,s,g,f),s.child;case 14:return g=s.type,C=Zr(g,s.pendingProps),C=Zr(g.type,C),Zh(t,s,g,C,f);case 15:return $h(t,s,s.type,s.pendingProps,f);case 17:return g=s.type,C=s.pendingProps,C=s.elementType===g?C:Zr(g,C),kl(t,s),s.tag=1,pr(g)?(t=!0,gl(s)):t=!1,xo(s,f),zh(s,g,C),Sc(s,g,C,f),Nc(null,s,g,!0,t,f);case 19:return i0(t,s,f);case 22:return qh(t,s,f)}throw Error(a(156,s.tag))};function N0(t,s){return je(t,s)}function Rx(t,s,f,g){this.tag=t,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Br(t,s,f,g){return new Rx(t,s,f,g)}function Kc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _x(t){if(typeof t=="function")return Kc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===be)return 11;if(t===Z)return 14}return 2}function ls(t,s){var f=t.alternate;return f===null?(f=Br(t.tag,s,t.key,t.mode),f.elementType=t.elementType,f.type=t.type,f.stateNode=t.stateNode,f.alternate=t,t.alternate=f):(f.pendingProps=s,f.type=t.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=t.flags&14680064,f.childLanes=t.childLanes,f.lanes=t.lanes,f.child=t.child,f.memoizedProps=t.memoizedProps,f.memoizedState=t.memoizedState,f.updateQueue=t.updateQueue,s=t.dependencies,f.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},f.sibling=t.sibling,f.index=t.index,f.ref=t.ref,f}function Hl(t,s,f,g,C,b){var M=2;if(g=t,typeof t=="function")Kc(t)&&(M=1);else if(typeof t=="string")M=5;else e:switch(t){case q:return zs(f.children,C,b,s);case ue:M=8,C|=8;break;case J:return t=Br(12,f,s,C|2),t.elementType=J,t.lanes=b,t;case Re:return t=Br(13,f,s,C),t.elementType=Re,t.lanes=b,t;case De:return t=Br(19,f,s,C),t.elementType=De,t.lanes=b,t;case fe:return Gl(f,C,b,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ie:M=10;break e;case ke:M=9;break e;case be:M=11;break e;case Z:M=14;break e;case Te:M=16,g=null;break e}throw Error(a(130,t==null?t:typeof t,""))}return s=Br(M,f,s,C),s.elementType=t,s.type=g,s.lanes=b,s}function zs(t,s,f,g){return t=Br(7,t,g,s),t.lanes=f,t}function Gl(t,s,f,g){return t=Br(22,t,g,s),t.elementType=fe,t.lanes=f,t.stateNode={isHidden:!1},t}function Zc(t,s,f){return t=Br(6,t,null,s),t.lanes=f,t}function $c(t,s,f){return s=Br(4,t.children!==null?t.children:[],t.key,s),s.lanes=f,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function Px(t,s,f,g,C){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ee(0),this.expirationTimes=ee(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ee(0),this.identifierPrefix=g,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null}function qc(t,s,f,g,C,b,M,W,X){return t=new Px(t,s,f,W,X),s===1?(s=1,b===!0&&(s|=8)):s=0,b=Br(3,null,null,s),t.current=b,b.stateNode=t,b.memoizedState={element:g,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},cc(b),t}function Ox(t,s,f){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:re,key:g==null?null:""+g,children:t,containerInfo:s,implementation:f}}function R0(t){if(!t)return Ji;t=t._reactInternals;e:{if($n(t)!==t||t.tag!==1)throw Error(a(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(pr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(a(171))}if(t.tag===1){var f=t.type;if(pr(f))return rh(t,f,s)}return s}function _0(t,s,f,g,C,b,M,W,X){return t=qc(f,g,!0,t,C,b,M,W,X),t.context=R0(null),f=t.current,g=ur(),C=os(f),b=Oi(g,C),b.callback=s??null,ns(f,b,C),t.current.lanes=C,F(t,C,g),xr(t,g),t}function Xl(t,s,f,g){var C=s.current,b=ur(),M=os(C);return f=R0(f),s.context===null?s.context=f:s.pendingContext=f,s=Oi(b,M),s.payload={element:t},g=g===void 0?null:g,g!==null&&(s.callback=g),t=ns(C,s,M),t!==null&&(Qr(t,C,M,b),Al(t,C,M)),M}function Yl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function P0(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var f=t.retryLane;t.retryLane=f!==0&&f<s?f:s}}function Qc(t,s){P0(t,s),(t=t.alternate)&&P0(t,s)}function kx(){return null}var O0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Jc(t){this._internalRoot=t}Kl.prototype.render=Jc.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(a(409));Xl(t,s,null,null)},Kl.prototype.unmount=Jc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Fs(function(){Xl(null,t,null,null)}),s[Ii]=null}};function Kl(t){this._internalRoot=t}Kl.prototype.unstable_scheduleHydration=function(t){if(t){var s=Xt();t={blockedOn:null,target:t,priority:s};for(var f=0;f<Fn.length&&s!==0&&s<Fn[f].priority;f++);Fn.splice(f,0,t),f===0&&Ja(t)}};function ef(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function k0(){}function Mx(t,s,f,g,C){if(C){if(typeof g=="function"){var b=g;g=function(){var le=Yl(M);b.call(le)}}var M=_0(s,g,t,0,null,!1,!1,"",k0);return t._reactRootContainer=M,t[Ii]=M.current,ea(t.nodeType===8?t.parentNode:t),Fs(),M}for(;C=t.lastChild;)t.removeChild(C);if(typeof g=="function"){var W=g;g=function(){var le=Yl(X);W.call(le)}}var X=qc(t,0,!1,null,null,!1,!1,"",k0);return t._reactRootContainer=X,t[Ii]=X.current,ea(t.nodeType===8?t.parentNode:t),Fs(function(){Xl(s,X,f,g)}),X}function $l(t,s,f,g,C){var b=f._reactRootContainer;if(b){var M=b;if(typeof C=="function"){var W=C;C=function(){var X=Yl(M);W.call(X)}}Xl(s,M,t,C)}else M=Mx(f,s,t,C,g);return Yl(M)}Js=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var f=Gt(s.pendingLanes);f!==0&&(dn(s,f|1),xr(s,_t()),!(Ot&6)&&(Eo=_t()+500,es()))}break;case 13:Fs(function(){var g=Pi(t,1);if(g!==null){var C=ur();Qr(g,t,1,C)}}),Qc(t,1)}},qn=function(t){if(t.tag===13){var s=Pi(t,134217728);if(s!==null){var f=ur();Qr(s,t,134217728,f)}Qc(t,134217728)}},Ke=function(t){if(t.tag===13){var s=os(t),f=Pi(t,s);if(f!==null){var g=ur();Qr(f,t,s,g)}Qc(t,s)}},Xt=function(){return dt},Vo=function(t,s){var f=dt;try{return dt=t,s()}finally{dt=f}},Vi=function(t,s,f){switch(s){case"input":if(Rt(t,f),s=f.name,f.type==="radio"&&s!=null){for(f=t;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<f.length;s++){var g=f[s];if(g!==t&&g.form===t.form){var C=hl(g);if(!C)throw Error(a(90));mt(g),Rt(g,C)}}}break;case"textarea":Fe(t,f);break;case"select":s=f.value,s!=null&&_e(t,!!f.multiple,s,!1)}},vi=Gc,rn=Fs;var Dx={usingClientEntryPoint:!1,Events:[ra,lo,hl,wi,Kn,Gc]},xa={findFiberByHostInstance:_s,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Lx={bundleType:xa.bundleType,version:xa.version,rendererPackageName:xa.rendererPackageName,rendererConfig:xa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=tt(t),t===null?null:t.stateNode},findFiberByHostInstance:xa.findFiberByHostInstance||kx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ql.isDisabled&&ql.supportsFiber)try{It=ql.inject(Lx),ft=ql}catch{}}return yr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dx,yr.createPortal=function(t,s){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ef(s))throw Error(a(200));return Ox(t,s,null,f)},yr.createRoot=function(t,s){if(!ef(t))throw Error(a(299));var f=!1,g="",C=O0;return s!=null&&(s.unstable_strictMode===!0&&(f=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onRecoverableError!==void 0&&(C=s.onRecoverableError)),s=qc(t,1,!1,null,null,f,!1,g,C),t[Ii]=s.current,ea(t.nodeType===8?t.parentNode:t),new Jc(s)},yr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=tt(s),t=t===null?null:t.stateNode,t},yr.flushSync=function(t){return Fs(t)},yr.hydrate=function(t,s,f){if(!Zl(s))throw Error(a(200));return $l(null,t,s,!0,f)},yr.hydrateRoot=function(t,s,f){if(!ef(t))throw Error(a(405));var g=f!=null&&f.hydratedSources||null,C=!1,b="",M=O0;if(f!=null&&(f.unstable_strictMode===!0&&(C=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onRecoverableError!==void 0&&(M=f.onRecoverableError)),s=_0(s,null,t,1,f??null,C,!1,b,M),t[Ii]=s.current,ea(t),g)for(t=0;t<g.length;t++)f=g[t],C=f._getVersion,C=C(f._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[f,C]:s.mutableSourceEagerHydrationData.push(f,C);return new Kl(s)},yr.render=function(t,s,f){if(!Zl(s))throw Error(a(200));return $l(null,t,s,!1,f)},yr.unmountComponentAtNode=function(t){if(!Zl(t))throw Error(a(40));return t._reactRootContainer?(Fs(function(){$l(null,null,t,!1,function(){t._reactRootContainer=null,t[Ii]=null})}),!0):!1},yr.unstable_batchedUpdates=Gc,yr.unstable_renderSubtreeIntoContainer=function(t,s,f,g){if(!Zl(f))throw Error(a(200));if(t==null||t._reactInternals===void 0)throw Error(a(38));return $l(t,s,f,!1,g)},yr.version="18.3.1-next-f1338f8080-20240426",yr}var z0;function Hx(){if(z0)return rf.exports;z0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(o){console.error(o)}}return r(),rf.exports=Wx(),rf.exports}var U0;function Gx(){if(U0)return Jl;U0=1;var r=Hx();return Jl.createRoot=r.createRoot,Jl.hydrateRoot=r.hydrateRoot,Jl}var Xx=Gx();const Nr=O.createContext(null),Yx=({children:r})=>{const[o,a]=O.useState(null),[d,p]=O.useState(null),[x,y]=O.useState(null),[A,w]=O.useState(null),[E,S]=O.useState(!1),[I,R]=O.useState(null),k=async()=>{const V=localStorage.getItem("access_token");if(V)try{const H=await fetch(window.server_url+"/load_user",{headers:{Authorization:`Bearer ${V}`}});if(H.ok){S(!0);const U=await H.json();console.log("USER DATA:",U),a(U.username),p(U.profile),R(U.permissions),console.log("PERMISSIONS:",U.permissions)}else console.log("TOKEN INVALID"),localStorage.removeItem("access_token"),a(null),p(null),y(null),w(null),S(!1)}catch(H){console.log("ERROR:",H)}};O.useEffect(()=>{k()},[]);const L=V=>{a(V.username),y(V.access_token),w(V.refresh_token),R(V.permissions),console.log("PRE SAVE USERNAME:",V.username),localStorage.setItem("user",V.username),localStorage.setItem("access_token",V.access_token),localStorage.setItem("refresh_token",V.refresh_token)},B=async(V,H)=>{const U=await fetch(window.server_url+"/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:V,password:H})});if(U.ok){const ne=await U.json();console.log("SIGNED UP, userData:",ne)}},j=()=>{a(null),p(null),y(null),w(null),S(!1)};return T.jsx(Nr.Provider,{value:{user:o,login:L,signup:B,logout:j,userProfile:d,checkAuth:k,permissions:I},children:r})};var If=function(r,o){return If=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var p in d)Object.prototype.hasOwnProperty.call(d,p)&&(a[p]=d[p])},If(r,o)};function Kx(r,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");If(r,o);function a(){this.constructor=r}r.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}var Wn=function(){return Wn=Object.assign||function(o){for(var a,d=1,p=arguments.length;d<p;d++){a=arguments[d];for(var x in a)Object.prototype.hasOwnProperty.call(a,x)&&(o[x]=a[x])}return o},Wn.apply(this,arguments)};var af,W0;function Zx(){if(W0)return af;W0=1;var r=!1,o,a,d,p,x,y,A,w,E,S,I,R,k,L,B;function j(){if(!r){r=!0;var H=navigator.userAgent,U=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(H),ne=/(Mac OS X)|(Windows)|(Linux)/.exec(H);if(R=/\b(iPhone|iP[ao]d)/.exec(H),k=/\b(iP[ao]d)/.exec(H),S=/Android/i.exec(H),L=/FBAN\/\w+;/i.exec(H),B=/Mobile/i.exec(H),I=!!/Win64/.exec(H),U){o=U[1]?parseFloat(U[1]):U[5]?parseFloat(U[5]):NaN,o&&document&&document.documentMode&&(o=document.documentMode);var se=/(?:Trident\/(\d+.\d+))/.exec(H);y=se?parseFloat(se[1])+4:o,a=U[2]?parseFloat(U[2]):NaN,d=U[3]?parseFloat(U[3]):NaN,p=U[4]?parseFloat(U[4]):NaN,p?(U=/(?:Chrome\/(\d+\.\d+))/.exec(H),x=U&&U[1]?parseFloat(U[1]):NaN):x=NaN}else o=a=d=x=p=NaN;if(ne){if(ne[1]){var re=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(H);A=re?parseFloat(re[1].replace("_",".")):!0}else A=!1;w=!!ne[2],E=!!ne[3]}else A=w=E=!1}}var V={ie:function(){return j()||o},ieCompatibilityMode:function(){return j()||y>o},ie64:function(){return V.ie()&&I},firefox:function(){return j()||a},opera:function(){return j()||d},webkit:function(){return j()||p},safari:function(){return V.webkit()},chrome:function(){return j()||x},windows:function(){return j()||w},osx:function(){return j()||A},linux:function(){return j()||E},iphone:function(){return j()||R},mobile:function(){return j()||R||k||S||B},nativeApp:function(){return j()||L},android:function(){return j()||S},ipad:function(){return j()||k}};return af=V,af}var lf,H0;function $x(){if(H0)return lf;H0=1;var r=!!(typeof window<"u"&&window.document&&window.document.createElement),o={canUseDOM:r,canUseWorkers:typeof Worker<"u",canUseEventListeners:r&&!!(window.addEventListener||window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};return lf=o,lf}var uf,G0;function qx(){if(G0)return uf;G0=1;var r=$x(),o;r.canUseDOM&&(o=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function a(d,p){if(!r.canUseDOM||p&&!("addEventListener"in document))return!1;var x="on"+d,y=x in document;if(!y){var A=document.createElement("div");A.setAttribute(x,"return;"),y=typeof A[x]=="function"}return!y&&o&&d==="wheel"&&(y=document.implementation.hasFeature("Events.wheel","3.0")),y}return uf=a,uf}var cf,X0;function Qx(){if(X0)return cf;X0=1;var r=Zx(),o=qx(),a=10,d=40,p=800;function x(y){var A=0,w=0,E=0,S=0;return"detail"in y&&(w=y.detail),"wheelDelta"in y&&(w=-y.wheelDelta/120),"wheelDeltaY"in y&&(w=-y.wheelDeltaY/120),"wheelDeltaX"in y&&(A=-y.wheelDeltaX/120),"axis"in y&&y.axis===y.HORIZONTAL_AXIS&&(A=w,w=0),E=A*a,S=w*a,"deltaY"in y&&(S=y.deltaY),"deltaX"in y&&(E=y.deltaX),(E||S)&&y.deltaMode&&(y.deltaMode==1?(E*=d,S*=d):(E*=p,S*=p)),E&&!A&&(A=E<1?-1:1),S&&!w&&(w=S<1?-1:1),{spinX:A,spinY:w,pixelX:E,pixelY:S}}return x.getEventType=function(){return r.firefox()?"DOMMouseScroll":o("wheel")?"wheel":"mousewheel"},cf=x,cf}var ff,Y0;function Jx(){return Y0||(Y0=1,ff=Qx()),ff}var e2=Jx();const t2=Mp(e2);function n2(r,o,a,d,p,x){x===void 0&&(x=0);var y=_o(r,o,x),A=y.width,w=y.height,E=Math.min(A,a),S=Math.min(w,d);return E>S*p?{width:S*p,height:S}:{width:E,height:E/p}}function r2(r){return r.width>r.height?r.width/r.naturalWidth:r.height/r.naturalHeight}function wa(r,o,a,d,p){p===void 0&&(p=0);var x=_o(o.width,o.height,p),y=x.width,A=x.height;return{x:K0(r.x,y,a.width,d),y:K0(r.y,A,a.height,d)}}function K0(r,o,a,d){var p=o*d/2-a/2;return Tu(r,-p,p)}function Z0(r,o){return Math.sqrt(Math.pow(r.y-o.y,2)+Math.pow(r.x-o.x,2))}function $0(r,o){return Math.atan2(o.y-r.y,o.x-r.x)*180/Math.PI}function i2(r,o,a,d,p,x,y){x===void 0&&(x=0),y===void 0&&(y=!0);var A=y?s2:o2,w=_o(o.width,o.height,x),E=_o(o.naturalWidth,o.naturalHeight,x),S={x:A(100,((w.width-a.width/p)/2-r.x/p)/w.width*100),y:A(100,((w.height-a.height/p)/2-r.y/p)/w.height*100),width:A(100,a.width/w.width*100/p),height:A(100,a.height/w.height*100/p)},I=Math.round(A(E.width,S.width*E.width/100)),R=Math.round(A(E.height,S.height*E.height/100)),k=E.width>=E.height*d,L=k?{width:Math.round(R*d),height:R}:{width:I,height:Math.round(I/d)},B=Wn(Wn({},L),{x:Math.round(A(E.width-L.width,S.x*E.width/100)),y:Math.round(A(E.height-L.height,S.y*E.height/100))});return{croppedAreaPercentages:S,croppedAreaPixels:B}}function s2(r,o){return Math.min(r,Math.max(0,o))}function o2(r,o){return o}function a2(r,o,a,d,p,x){var y=_o(o.width,o.height,a),A=Tu(d.width/y.width*(100/r.width),p,x),w={x:A*y.width/2-d.width/2-y.width*A*(r.x/100),y:A*y.height/2-d.height/2-y.height*A*(r.y/100)};return{crop:w,zoom:A}}function l2(r,o,a){var d=r2(o);return a.height>a.width?a.height/(r.height*d):a.width/(r.width*d)}function u2(r,o,a,d,p,x){a===void 0&&(a=0);var y=_o(o.naturalWidth,o.naturalHeight,a),A=Tu(l2(r,o,d),p,x),w=d.height>d.width?d.height/r.height:d.width/r.width,E={x:((y.width-r.width)/2-r.x)*w,y:((y.height-r.height)/2-r.y)*w};return{crop:E,zoom:A}}function q0(r,o){return{x:(o.x+r.x)/2,y:(o.y+r.y)/2}}function c2(r){return r*Math.PI/180}function _o(r,o,a){var d=c2(a);return{width:Math.abs(Math.cos(d)*r)+Math.abs(Math.sin(d)*o),height:Math.abs(Math.sin(d)*r)+Math.abs(Math.cos(d)*o)}}function Tu(r,o,a){return Math.min(Math.max(r,o),a)}function eu(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return r.filter(function(a){return typeof a=="string"&&a.length>0}).join(" ").trim()}var f2=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,d2=1,h2=3,p2=1,Dp=function(r){Kx(o,r);function o(){var a=r!==null&&r.apply(this,arguments)||this;return a.imageRef=O.createRef(),a.videoRef=O.createRef(),a.containerPosition={x:0,y:0},a.containerRef=null,a.styleRef=null,a.containerRect=null,a.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},a.dragStartPosition={x:0,y:0},a.dragStartCrop={x:0,y:0},a.gestureZoomStart=0,a.gestureRotationStart=0,a.isTouching=!1,a.lastPinchDistance=0,a.lastPinchRotation=0,a.rafDragTimeout=null,a.rafPinchTimeout=null,a.wheelTimer=null,a.currentDoc=typeof document<"u"?document:null,a.currentWindow=typeof window<"u"?window:null,a.resizeObserver=null,a.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},a.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!a.containerRef)){var d=!0;a.resizeObserver=new window.ResizeObserver(function(p){if(d){d=!1;return}a.computeSizes()}),a.resizeObserver.observe(a.containerRef)}},a.preventZoomSafari=function(d){return d.preventDefault()},a.cleanEvents=function(){a.currentDoc&&(a.currentDoc.removeEventListener("mousemove",a.onMouseMove),a.currentDoc.removeEventListener("mouseup",a.onDragStopped),a.currentDoc.removeEventListener("touchmove",a.onTouchMove),a.currentDoc.removeEventListener("touchend",a.onDragStopped),a.currentDoc.removeEventListener("gesturemove",a.onGestureMove),a.currentDoc.removeEventListener("gestureend",a.onGestureEnd),a.currentDoc.removeEventListener("scroll",a.onScroll))},a.clearScrollEvent=function(){a.containerRef&&a.containerRef.removeEventListener("wheel",a.onWheel),a.wheelTimer&&clearTimeout(a.wheelTimer)},a.onMediaLoad=function(){var d=a.computeSizes();d&&(a.emitCropData(),a.setInitialCrop(d)),a.props.onMediaLoaded&&a.props.onMediaLoaded(a.mediaSize)},a.setInitialCrop=function(d){if(a.props.initialCroppedAreaPercentages){var p=a2(a.props.initialCroppedAreaPercentages,a.mediaSize,a.props.rotation,d,a.props.minZoom,a.props.maxZoom),x=p.crop,y=p.zoom;a.props.onCropChange(x),a.props.onZoomChange&&a.props.onZoomChange(y)}else if(a.props.initialCroppedAreaPixels){var A=u2(a.props.initialCroppedAreaPixels,a.mediaSize,a.props.rotation,d,a.props.minZoom,a.props.maxZoom),x=A.crop,y=A.zoom;a.props.onCropChange(x),a.props.onZoomChange&&a.props.onZoomChange(y)}},a.computeSizes=function(){var d,p,x,y,A,w,E=a.imageRef.current||a.videoRef.current;if(E&&a.containerRef){a.containerRect=a.containerRef.getBoundingClientRect(),a.saveContainerPosition();var S=a.containerRect.width/a.containerRect.height,I=((d=a.imageRef.current)===null||d===void 0?void 0:d.naturalWidth)||((p=a.videoRef.current)===null||p===void 0?void 0:p.videoWidth)||0,R=((x=a.imageRef.current)===null||x===void 0?void 0:x.naturalHeight)||((y=a.videoRef.current)===null||y===void 0?void 0:y.videoHeight)||0,k=E.offsetWidth<I||E.offsetHeight<R,L=I/R,B=void 0;if(k)switch(a.state.mediaObjectFit){default:case"contain":B=S>L?{width:a.containerRect.height*L,height:a.containerRect.height}:{width:a.containerRect.width,height:a.containerRect.width/L};break;case"horizontal-cover":B={width:a.containerRect.width,height:a.containerRect.width/L};break;case"vertical-cover":B={width:a.containerRect.height*L,height:a.containerRect.height};break}else B={width:E.offsetWidth,height:E.offsetHeight};a.mediaSize=Wn(Wn({},B),{naturalWidth:I,naturalHeight:R}),a.props.setMediaSize&&a.props.setMediaSize(a.mediaSize);var j=a.props.cropSize?a.props.cropSize:n2(a.mediaSize.width,a.mediaSize.height,a.containerRect.width,a.containerRect.height,a.props.aspect,a.props.rotation);return(((A=a.state.cropSize)===null||A===void 0?void 0:A.height)!==j.height||((w=a.state.cropSize)===null||w===void 0?void 0:w.width)!==j.width)&&a.props.onCropSizeChange&&a.props.onCropSizeChange(j),a.setState({cropSize:j},a.recomputeCropPosition),a.props.setCropSize&&a.props.setCropSize(j),j}},a.saveContainerPosition=function(){if(a.containerRef){var d=a.containerRef.getBoundingClientRect();a.containerPosition={x:d.left,y:d.top}}},a.onMouseDown=function(d){a.currentDoc&&(d.preventDefault(),a.currentDoc.addEventListener("mousemove",a.onMouseMove),a.currentDoc.addEventListener("mouseup",a.onDragStopped),a.saveContainerPosition(),a.onDragStart(o.getMousePoint(d)))},a.onMouseMove=function(d){return a.onDrag(o.getMousePoint(d))},a.onScroll=function(d){a.currentDoc&&(d.preventDefault(),a.saveContainerPosition())},a.onTouchStart=function(d){a.currentDoc&&(a.isTouching=!0,!(a.props.onTouchRequest&&!a.props.onTouchRequest(d))&&(a.currentDoc.addEventListener("touchmove",a.onTouchMove,{passive:!1}),a.currentDoc.addEventListener("touchend",a.onDragStopped),a.saveContainerPosition(),d.touches.length===2?a.onPinchStart(d):d.touches.length===1&&a.onDragStart(o.getTouchPoint(d.touches[0]))))},a.onTouchMove=function(d){d.preventDefault(),d.touches.length===2?a.onPinchMove(d):d.touches.length===1&&a.onDrag(o.getTouchPoint(d.touches[0]))},a.onGestureStart=function(d){a.currentDoc&&(d.preventDefault(),a.currentDoc.addEventListener("gesturechange",a.onGestureMove),a.currentDoc.addEventListener("gestureend",a.onGestureEnd),a.gestureZoomStart=a.props.zoom,a.gestureRotationStart=a.props.rotation)},a.onGestureMove=function(d){if(d.preventDefault(),!a.isTouching){var p=o.getMousePoint(d),x=a.gestureZoomStart-1+d.scale;if(a.setNewZoom(x,p,{shouldUpdatePosition:!0}),a.props.onRotationChange){var y=a.gestureRotationStart+d.rotation;a.props.onRotationChange(y)}}},a.onGestureEnd=function(d){a.cleanEvents()},a.onDragStart=function(d){var p,x,y=d.x,A=d.y;a.dragStartPosition={x:y,y:A},a.dragStartCrop=Wn({},a.props.crop),(x=(p=a.props).onInteractionStart)===null||x===void 0||x.call(p)},a.onDrag=function(d){var p=d.x,x=d.y;a.currentWindow&&(a.rafDragTimeout&&a.currentWindow.cancelAnimationFrame(a.rafDragTimeout),a.rafDragTimeout=a.currentWindow.requestAnimationFrame(function(){if(a.state.cropSize&&!(p===void 0||x===void 0)){var y=p-a.dragStartPosition.x,A=x-a.dragStartPosition.y,w={x:a.dragStartCrop.x+y,y:a.dragStartCrop.y+A},E=a.props.restrictPosition?wa(w,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):w;a.props.onCropChange(E)}}))},a.onDragStopped=function(){var d,p;a.isTouching=!1,a.cleanEvents(),a.emitCropData(),(p=(d=a.props).onInteractionEnd)===null||p===void 0||p.call(d)},a.onWheel=function(d){if(a.currentWindow&&!(a.props.onWheelRequest&&!a.props.onWheelRequest(d))){d.preventDefault();var p=o.getMousePoint(d),x=t2(d).pixelY,y=a.props.zoom-x*a.props.zoomSpeed/200;a.setNewZoom(y,p,{shouldUpdatePosition:!0}),a.state.hasWheelJustStarted||a.setState({hasWheelJustStarted:!0},function(){var A,w;return(w=(A=a.props).onInteractionStart)===null||w===void 0?void 0:w.call(A)}),a.wheelTimer&&clearTimeout(a.wheelTimer),a.wheelTimer=a.currentWindow.setTimeout(function(){return a.setState({hasWheelJustStarted:!1},function(){var A,w;return(w=(A=a.props).onInteractionEnd)===null||w===void 0?void 0:w.call(A)})},250)}},a.getPointOnContainer=function(d,p){var x=d.x,y=d.y;if(!a.containerRect)throw new Error("The Cropper is not mounted");return{x:a.containerRect.width/2-(x-p.x),y:a.containerRect.height/2-(y-p.y)}},a.getPointOnMedia=function(d){var p=d.x,x=d.y,y=a.props,A=y.crop,w=y.zoom;return{x:(p+A.x)/w,y:(x+A.y)/w}},a.setNewZoom=function(d,p,x){var y=x===void 0?{}:x,A=y.shouldUpdatePosition,w=A===void 0?!0:A;if(!(!a.state.cropSize||!a.props.onZoomChange)){var E=Tu(d,a.props.minZoom,a.props.maxZoom);if(w){var S=a.getPointOnContainer(p,a.containerPosition),I=a.getPointOnMedia(S),R={x:I.x*E-S.x,y:I.y*E-S.y},k=a.props.restrictPosition?wa(R,a.mediaSize,a.state.cropSize,E,a.props.rotation):R;a.props.onCropChange(k)}a.props.onZoomChange(E)}},a.getCropData=function(){if(!a.state.cropSize)return null;var d=a.props.restrictPosition?wa(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;return i2(d,a.mediaSize,a.state.cropSize,a.getAspect(),a.props.zoom,a.props.rotation,a.props.restrictPosition)},a.emitCropData=function(){var d=a.getCropData();if(d){var p=d.croppedAreaPercentages,x=d.croppedAreaPixels;a.props.onCropComplete&&a.props.onCropComplete(p,x),a.props.onCropAreaChange&&a.props.onCropAreaChange(p,x)}},a.emitCropAreaChange=function(){var d=a.getCropData();if(d){var p=d.croppedAreaPercentages,x=d.croppedAreaPixels;a.props.onCropAreaChange&&a.props.onCropAreaChange(p,x)}},a.recomputeCropPosition=function(){if(a.state.cropSize){var d=a.props.restrictPosition?wa(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;a.props.onCropChange(d),a.emitCropData()}},a.onKeyDown=function(d){var p=a.props,x=p.crop,y=p.onCropChange,A=p.keyboardStep,w=p.zoom,E=p.rotation,S=A;if(a.state.cropSize){d.shiftKey&&(S*=.2);var I=Wn({},x);switch(d.key){case"ArrowUp":I.y-=S,d.preventDefault();break;case"ArrowDown":I.y+=S,d.preventDefault();break;case"ArrowLeft":I.x-=S,d.preventDefault();break;case"ArrowRight":I.x+=S,d.preventDefault();break;default:return}a.props.restrictPosition&&(I=wa(I,a.mediaSize,a.state.cropSize,w,E)),y(I)}},a}return o.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=f2,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef))},o.prototype.componentWillUnmount=function(){var a,d;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(a=this.resizeObserver)===null||a===void 0||a.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((d=this.styleRef.parentNode)===null||d===void 0||d.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},o.prototype.componentDidUpdate=function(a){var d,p,x,y,A,w,E,S,I;a.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):a.aspect!==this.props.aspect?this.computeSizes():a.objectFit!==this.props.objectFit?this.computeSizes():a.zoom!==this.props.zoom?this.recomputeCropPosition():((d=a.cropSize)===null||d===void 0?void 0:d.height)!==((p=this.props.cropSize)===null||p===void 0?void 0:p.height)||((x=a.cropSize)===null||x===void 0?void 0:x.width)!==((y=this.props.cropSize)===null||y===void 0?void 0:y.width)?this.computeSizes():(((A=a.crop)===null||A===void 0?void 0:A.x)!==((w=this.props.crop)===null||w===void 0?void 0:w.x)||((E=a.crop)===null||E===void 0?void 0:E.y)!==((S=this.props.crop)===null||S===void 0?void 0:S.y))&&this.emitCropAreaChange(),a.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),a.video!==this.props.video&&((I=this.videoRef.current)===null||I===void 0||I.load());var R=this.getObjectFit();R!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:R},this.computeSizes)},o.prototype.getAspect=function(){var a=this.props,d=a.cropSize,p=a.aspect;return d?d.width/d.height:p},o.prototype.getObjectFit=function(){var a,d,p,x;if(this.props.objectFit==="cover"){var y=this.imageRef.current||this.videoRef.current;if(y&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var A=this.containerRect.width/this.containerRect.height,w=((a=this.imageRef.current)===null||a===void 0?void 0:a.naturalWidth)||((d=this.videoRef.current)===null||d===void 0?void 0:d.videoWidth)||0,E=((p=this.imageRef.current)===null||p===void 0?void 0:p.naturalHeight)||((x=this.videoRef.current)===null||x===void 0?void 0:x.videoHeight)||0,S=w/E;return S<A?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},o.prototype.onPinchStart=function(a){var d=o.getTouchPoint(a.touches[0]),p=o.getTouchPoint(a.touches[1]);this.lastPinchDistance=Z0(d,p),this.lastPinchRotation=$0(d,p),this.onDragStart(q0(d,p))},o.prototype.onPinchMove=function(a){var d=this;if(!(!this.currentDoc||!this.currentWindow)){var p=o.getTouchPoint(a.touches[0]),x=o.getTouchPoint(a.touches[1]),y=q0(p,x);this.onDrag(y),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var A=Z0(p,x),w=d.props.zoom*(A/d.lastPinchDistance);d.setNewZoom(w,y,{shouldUpdatePosition:!1}),d.lastPinchDistance=A;var E=$0(p,x),S=d.props.rotation+(E-d.lastPinchRotation);d.props.onRotationChange&&d.props.onRotationChange(S),d.lastPinchRotation=E})}},o.prototype.render=function(){var a=this,d,p=this.props,x=p.image,y=p.video,A=p.mediaProps,w=p.transform,E=p.crop,S=E.x,I=E.y,R=p.rotation,k=p.zoom,L=p.cropShape,B=p.showGrid,j=p.style,V=j.containerStyle,H=j.cropAreaStyle,U=j.mediaStyle,ne=p.classes,se=ne.containerClassName,re=ne.cropAreaClassName,q=ne.mediaClassName,ue=(d=this.state.mediaObjectFit)!==null&&d!==void 0?d:this.getObjectFit();return O.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(Ie){return a.containerRef=Ie},"data-testid":"container",style:V,className:eu("reactEasyCrop_Container",se)},x?O.createElement("img",Wn({alt:"",className:eu("reactEasyCrop_Image",ue==="contain"&&"reactEasyCrop_Contain",ue==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",ue==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",q)},A,{src:x,ref:this.imageRef,style:Wn(Wn({},U),{transform:w||"translate(".concat(S,"px, ").concat(I,"px) rotate(").concat(R,"deg) scale(").concat(k,")")}),onLoad:this.onMediaLoad})):y&&O.createElement("video",Wn({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:eu("reactEasyCrop_Video",ue==="contain"&&"reactEasyCrop_Contain",ue==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",ue==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",q)},A,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:Wn(Wn({},U),{transform:w||"translate(".concat(S,"px, ").concat(I,"px) rotate(").concat(R,"deg) scale(").concat(k,")")}),controls:!1}),(Array.isArray(y)?y:[{src:y}]).map(function(J){return O.createElement("source",Wn({key:J.src},J))})),this.state.cropSize&&O.createElement("div",{style:Wn(Wn({},H),{width:this.state.cropSize.width,height:this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,"data-testid":"cropper",className:eu("reactEasyCrop_CropArea",L==="round"&&"reactEasyCrop_CropAreaRound",B&&"reactEasyCrop_CropAreaGrid",re)}))},o.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:h2,minZoom:d2,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:p2},o.getMousePoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},o.getTouchPoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},o}(O.Component),va={},Q0;function g2(){return Q0||(Q0=1,va.createCanvas=function(r,o){return Object.assign(document.createElement("canvas"),{width:r,height:o})},va.createImageData=function(r,o,a){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(r);case 2:return new ImageData(r,o);default:return new ImageData(r,o,a)}},va.loadImage=function(r,o){return new Promise(function(a,d){const p=Object.assign(document.createElement("img"),o);function x(){p.onload=null,p.onerror=null}p.onload=function(){x(),a(p)},p.onerror=function(){x(),d(new Error('Failed to load the image "'+r+'"'))},p.src=r})}),va}g2();async function Lp(r,o){return console.log("Image source being cropped:",r),new Promise((a,d)=>{const p=new Image;p.onload=()=>{const x=document.createElement("canvas"),y=x.getContext("2d");x.width=o.width,x.height=o.height,y.drawImage(p,o.x,o.y,o.width,o.height,0,0,o.width,o.height);try{const A=x.toDataURL("image/jpeg");a(A)}catch{d(new Error("Error converting canvas to base64"))}},p.onerror=x=>d(new Error(`Image load error: ${x.message}`)),p.src=r})}const m2=({onSubmit:r,onClose:o,existingProfile:a})=>{const{user:d,userProfile:p,checkAuth:x}=O.useContext(Nr),[y,A]=O.useState({name:(p==null?void 0:p.name)||"",image:null,imagePreview:p!=null&&p.image_data?`data:image/jpeg;base64,${p.image_data}`:"/assets/fakeprofile.png",croppedImage:null}),[w,E]=O.useState({x:0,y:0}),[S,I]=O.useState(1),[R,k]=O.useState(null),[L,B]=O.useState(!1),[j,V]=O.useState(!1),H=se=>{const re=se.target.files[0];if(re){const q=new FileReader;q.onload=ue=>{A(J=>({...J,image:re,imagePreview:ue.target.result})),B(!0)},q.readAsDataURL(re)}},U=(se,re)=>{console.log("Cropped Area Pixels:",re),k(re)};async function ne(se){se.preventDefault();let re;if(y.croppedImage)re=y.croppedImage.split(",")[1];else if(y.image instanceof File){const J=await y.image.arrayBuffer();re=btoa(new Uint8Array(J).reduce((Ie,ke)=>Ie+String.fromCharCode(ke),""))}else if(p!=null&&p.image_data)re=p.image_data;else{console.error("No valid image provided");return}const q={name:y.name,image_data:re};console.log("Image data (first 100 chars):",re.substring(0,100));const ue=localStorage.getItem("access_token");try{const J=await fetch(`${window.server_url}/update_profile`,{method:"POST",headers:{Authorization:`Bearer ${ue}`,"Content-Type":"application/json"},body:JSON.stringify(q)});if(!J.ok)throw new Error("Failed to update profile");const Ie=await J.json();await x(),console.log("Profile updated successfully:",Ie),o()}catch(J){console.error("Error updating profile:",J)}}return T.jsx("div",{className:"profile-creation-overlay",style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:T.jsxs("div",{className:"profile-creation-modal",style:{width:"70%",maxWidth:"500px",backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",padding:"2rem",boxShadow:"0 10px 30px rgba(20,77,255,0.15)",position:"relative",border:"1px solid rgba(20,77,255,0.1)"},children:[T.jsx("button",{onClick:o,style:{position:"absolute",top:"1.2rem",right:"1.2rem",background:"none",border:"none",fontSize:"1.8rem",cursor:"pointer",color:"#144dff",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.1)"}},children:""}),T.jsx("h2",{style:{fontSize:"clamp(1.8rem, 6vw, 2.5rem)",color:"#144dff",textAlign:"center",marginBottom:"2rem",fontWeight:"600"},children:"Your Profile"}),T.jsxs("form",{onSubmit:ne,style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem"},children:[T.jsx("label",{style:{color:"#144dff",fontWeight:"500",fontSize:"1rem"},children:"Your Name"}),T.jsx("input",{type:"text",value:y.name,onChange:se=>A({...y,name:se.target.value}),style:{width:"100%",padding:"12px",borderRadius:"12px",border:"2px solid #e0e0e0",fontSize:"0.9rem",transition:"all 0.3s ease",backgroundColor:"rgba(255,255,255,0.9)","&:focus":{borderColor:"#144dff",outline:"none",boxShadow:"0 0 0 3px rgba(20,77,255,0.1)"}}})]}),!L&&T.jsx("div",{style:{width:"250px",height:"250px",margin:"0 auto",borderRadius:"20%",overflow:"hidden",border:"7px solid #144dff",boxShadow:"0 8px 25px rgba(20,77,255,0.2)",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.02)"}},children:T.jsx("img",{src:y.croppedImage?y.croppedImage:y.imagePreview?y.imagePreview:p!=null&&p.image_data?`data:image/jpeg;base64,${p.image_data}`:"/assets/fakeprofile.png",alt:"Profile preview",style:{width:"100%",height:"100%",objectFit:"cover"}})}),T.jsxs("div",{style:{textAlign:"center"},children:[T.jsx("input",{type:"file",id:"image-upload",accept:"image/*",onChange:H,style:{display:"none"}}),T.jsx("label",{htmlFor:"image-upload",style:{padding:"0.8rem 1.2rem",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",borderRadius:"25px",cursor:"pointer",display:"inline-block",fontSize:"0.9rem",fontWeight:"600",boxShadow:"0 4px 15px rgba(20,77,255,0.2)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Upload New Image"})]}),L&&T.jsxs("div",{style:{width:"100%",maxWidth:"300px",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",gap:"1.2rem"},children:[T.jsx("div",{style:{position:"relative",width:"250px",height:"250px",borderRadius:"20%",overflow:"hidden",border:"7px solid #144dff",boxShadow:"0 8px 25px rgba(20,77,255,0.2)"},children:T.jsx(Dp,{image:y.imagePreview,crop:w,zoom:S,aspect:1,onCropComplete:U,onCropChange:E,onZoomChange:I})}),T.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[T.jsx("button",{type:"button",onClick:()=>{B(!1),y.croppedImage||A(se=>({...se,imagePreview:null}))},style:{padding:"0.8rem 1.2rem",borderRadius:"25px",border:"2px solid #144dff",background:"white",color:"#144dff",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease","&:hover":{background:"rgba(20,77,255,0.1)"}},children:"Cancel"}),T.jsx("button",{type:"button",onClick:async()=>{try{const se=await Lp(y.imagePreview,R);A(re=>({...re,croppedImage:se,imagePreview:se})),B(!1),V(!0),setTimeout(()=>V(!1),1e4)}catch(se){console.error("Error cropping image:",se)}},className:`save-profile-button ${j?"glow-bounce":""}`,style:{padding:"0.8rem 1.2rem",borderRadius:"25px",border:"none",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(20,77,255,0.2)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Save Cropped Image"})]})]}),T.jsx("button",{type:"submit",className:`save-profile-button ${j?"glow-bounce":""}`,style:{padding:"1rem",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",border:"none",borderRadius:"25px",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",marginTop:"1rem",boxShadow:"0 4px 15px rgba(20,77,255,0.2)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Save Profile"})]})]})})};var Ca={},J0;function x2(){if(J0)return Ca;J0=1,Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.parse=y,Ca.serialize=E;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,o=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,d=/^[\u0020-\u003A\u003D-\u007E]*$/,p=Object.prototype.toString,x=(()=>{const R=function(){};return R.prototype=Object.create(null),R})();function y(R,k){const L=new x,B=R.length;if(B<2)return L;const j=(k==null?void 0:k.decode)||S;let V=0;do{const H=R.indexOf("=",V);if(H===-1)break;const U=R.indexOf(";",V),ne=U===-1?B:U;if(H>ne){V=R.lastIndexOf(";",H-1)+1;continue}const se=A(R,V,H),re=w(R,H,se),q=R.slice(se,re);if(L[q]===void 0){let ue=A(R,H+1,ne),J=w(R,ne,ue);const Ie=j(R.slice(ue,J));L[q]=Ie}V=ne+1}while(V<B);return L}function A(R,k,L){do{const B=R.charCodeAt(k);if(B!==32&&B!==9)return k}while(++k<L);return L}function w(R,k,L){for(;k>L;){const B=R.charCodeAt(--k);if(B!==32&&B!==9)return k+1}return L}function E(R,k,L){const B=(L==null?void 0:L.encode)||encodeURIComponent;if(!r.test(R))throw new TypeError(`argument name is invalid: ${R}`);const j=B(k);if(!o.test(j))throw new TypeError(`argument val is invalid: ${k}`);let V=R+"="+j;if(!L)return V;if(L.maxAge!==void 0){if(!Number.isInteger(L.maxAge))throw new TypeError(`option maxAge is invalid: ${L.maxAge}`);V+="; Max-Age="+L.maxAge}if(L.domain){if(!a.test(L.domain))throw new TypeError(`option domain is invalid: ${L.domain}`);V+="; Domain="+L.domain}if(L.path){if(!d.test(L.path))throw new TypeError(`option path is invalid: ${L.path}`);V+="; Path="+L.path}if(L.expires){if(!I(L.expires)||!Number.isFinite(L.expires.valueOf()))throw new TypeError(`option expires is invalid: ${L.expires}`);V+="; Expires="+L.expires.toUTCString()}if(L.httpOnly&&(V+="; HttpOnly"),L.secure&&(V+="; Secure"),L.partitioned&&(V+="; Partitioned"),L.priority)switch(typeof L.priority=="string"?L.priority.toLowerCase():void 0){case"low":V+="; Priority=Low";break;case"medium":V+="; Priority=Medium";break;case"high":V+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${L.priority}`)}if(L.sameSite)switch(typeof L.sameSite=="string"?L.sameSite.toLowerCase():L.sameSite){case!0:case"strict":V+="; SameSite=Strict";break;case"lax":V+="; SameSite=Lax";break;case"none":V+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${L.sameSite}`)}return V}function S(R){if(R.indexOf("%")===-1)return R;try{return decodeURIComponent(R)}catch{return R}}function I(R){return p.call(R)==="[object Date]"}return Ca}x2();/**
 * react-router v7.0.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var e1="popstate";function y2(r={}){function o(d,p){let{pathname:x,search:y,hash:A}=d.location;return Nf("",{pathname:x,search:y,hash:A},p.state&&p.state.usr||null,p.state&&p.state.key||"default")}function a(d,p){return typeof p=="string"?p:Oa(p)}return v2(o,a,null,r)}function un(r,o){if(r===!1||r===null||typeof r>"u")throw new Error(o)}function pi(r,o){if(!r){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}function w2(){return Math.random().toString(36).substring(2,10)}function t1(r,o){return{usr:r.state,key:r.key,idx:o}}function Nf(r,o,a=null,d){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof o=="string"?ko(o):o,state:a,key:o&&o.key||d||w2()}}function Oa({pathname:r="/",search:o="",hash:a=""}){return o&&o!=="?"&&(r+=o.charAt(0)==="?"?o:"?"+o),a&&a!=="#"&&(r+=a.charAt(0)==="#"?a:"#"+a),r}function ko(r){let o={};if(r){let a=r.indexOf("#");a>=0&&(o.hash=r.substring(a),r=r.substring(0,a));let d=r.indexOf("?");d>=0&&(o.search=r.substring(d),r=r.substring(0,d)),r&&(o.pathname=r)}return o}function v2(r,o,a,d={}){let{window:p=document.defaultView,v5Compat:x=!1}=d,y=p.history,A="POP",w=null,E=S();E==null&&(E=0,y.replaceState({...y.state,idx:E},""));function S(){return(y.state||{idx:null}).idx}function I(){A="POP";let j=S(),V=j==null?null:j-E;E=j,w&&w({action:A,location:B.location,delta:V})}function R(j,V){A="PUSH";let H=Nf(B.location,j,V);E=S()+1;let U=t1(H,E),ne=B.createHref(H);try{y.pushState(U,"",ne)}catch(se){if(se instanceof DOMException&&se.name==="DataCloneError")throw se;p.location.assign(ne)}x&&w&&w({action:A,location:B.location,delta:1})}function k(j,V){A="REPLACE";let H=Nf(B.location,j,V);E=S();let U=t1(H,E),ne=B.createHref(H);y.replaceState(U,"",ne),x&&w&&w({action:A,location:B.location,delta:0})}function L(j){let V=p.location.origin!=="null"?p.location.origin:p.location.href,H=typeof j=="string"?j:Oa(j);return H=H.replace(/ $/,"%20"),un(V,`No window.location.(origin|href) available to create URL for href: ${H}`),new URL(H,V)}let B={get action(){return A},get location(){return r(p,y)},listen(j){if(w)throw new Error("A history only accepts one active listener");return p.addEventListener(e1,I),w=j,()=>{p.removeEventListener(e1,I),w=null}},createHref(j){return o(p,j)},createURL:L,encodeLocation(j){let V=L(j);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:R,replace:k,go(j){return y.go(j)}};return B}function Bp(r,o,a="/"){return C2(r,o,a,!1)}function C2(r,o,a,d){let p=typeof o=="string"?ko(o):o,x=ds(p.pathname||"/",a);if(x==null)return null;let y=Fp(r);E2(y);let A=null;for(let w=0;A==null&&w<y.length;++w){let E=k2(x);A=P2(y[w],E,d)}return A}function Fp(r,o=[],a=[],d=""){let p=(x,y,A)=>{let w={relativePath:A===void 0?x.path||"":A,caseSensitive:x.caseSensitive===!0,childrenIndex:y,route:x};w.relativePath.startsWith("/")&&(un(w.relativePath.startsWith(d),`Absolute route path "${w.relativePath}" nested under path "${d}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(d.length));let E=Bi([d,w.relativePath]),S=a.concat(w);x.children&&x.children.length>0&&(un(x.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),Fp(x.children,o,S,E)),!(x.path==null&&!x.index)&&o.push({path:E,score:R2(E,x.index),routesMeta:S})};return r.forEach((x,y)=>{var A;if(x.path===""||!((A=x.path)!=null&&A.includes("?")))p(x,y);else for(let w of jp(x.path))p(x,y,w)}),o}function jp(r){let o=r.split("/");if(o.length===0)return[];let[a,...d]=o,p=a.endsWith("?"),x=a.replace(/\?$/,"");if(d.length===0)return p?[x,""]:[x];let y=jp(d.join("/")),A=[];return A.push(...y.map(w=>w===""?x:[x,w].join("/"))),p&&A.push(...y),A.map(w=>r.startsWith("/")&&w===""?"/":w)}function E2(r){r.sort((o,a)=>o.score!==a.score?a.score-o.score:_2(o.routesMeta.map(d=>d.childrenIndex),a.routesMeta.map(d=>d.childrenIndex)))}var A2=/^:[\w-]+$/,S2=3,b2=2,T2=1,I2=10,N2=-2,n1=r=>r==="*";function R2(r,o){let a=r.split("/"),d=a.length;return a.some(n1)&&(d+=N2),o&&(d+=b2),a.filter(p=>!n1(p)).reduce((p,x)=>p+(A2.test(x)?S2:x===""?T2:I2),d)}function _2(r,o){return r.length===o.length&&r.slice(0,-1).every((d,p)=>d===o[p])?r[r.length-1]-o[o.length-1]:0}function P2(r,o,a=!1){let{routesMeta:d}=r,p={},x="/",y=[];for(let A=0;A<d.length;++A){let w=d[A],E=A===d.length-1,S=x==="/"?o:o.slice(x.length)||"/",I=gu({path:w.relativePath,caseSensitive:w.caseSensitive,end:E},S),R=w.route;if(!I&&E&&a&&!d[d.length-1].route.index&&(I=gu({path:w.relativePath,caseSensitive:w.caseSensitive,end:!1},S)),!I)return null;Object.assign(p,I.params),y.push({params:p,pathname:Bi([x,I.pathname]),pathnameBase:B2(Bi([x,I.pathnameBase])),route:R}),I.pathnameBase!=="/"&&(x=Bi([x,I.pathnameBase]))}return y}function gu(r,o){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[a,d]=O2(r.path,r.caseSensitive,r.end),p=o.match(a);if(!p)return null;let x=p[0],y=x.replace(/(.)\/+$/,"$1"),A=p.slice(1);return{params:d.reduce((E,{paramName:S,isOptional:I},R)=>{if(S==="*"){let L=A[R]||"";y=x.slice(0,x.length-L.length).replace(/(.)\/+$/,"$1")}const k=A[R];return I&&!k?E[S]=void 0:E[S]=(k||"").replace(/%2F/g,"/"),E},{}),pathname:x,pathnameBase:y,pattern:r}}function O2(r,o=!1,a=!0){pi(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let d=[],p="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,A,w)=>(d.push({paramName:A,isOptional:w!=null}),w?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(d.push({paramName:"*"}),p+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?p+="\\/*$":r!==""&&r!=="/"&&(p+="(?:(?=\\/|$))"),[new RegExp(p,o?void 0:"i"),d]}function k2(r){try{return r.split("/").map(o=>decodeURIComponent(o).replace(/\//g,"%2F")).join("/")}catch(o){return pi(!1,`The URL path "${r}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${o}).`),r}}function ds(r,o){if(o==="/")return r;if(!r.toLowerCase().startsWith(o.toLowerCase()))return null;let a=o.endsWith("/")?o.length-1:o.length,d=r.charAt(a);return d&&d!=="/"?null:r.slice(a)||"/"}function M2(r,o="/"){let{pathname:a,search:d="",hash:p=""}=typeof r=="string"?ko(r):r;return{pathname:a?a.startsWith("/")?a:D2(a,o):o,search:F2(d),hash:j2(p)}}function D2(r,o){let a=o.replace(/\/+$/,"").split("/");return r.split("/").forEach(p=>{p===".."?a.length>1&&a.pop():p!=="."&&a.push(p)}),a.length>1?a.join("/"):"/"}function df(r,o,a,d){return`Cannot include a '${r}' character in a manually specified \`to.${o}\` field [${JSON.stringify(d)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function L2(r){return r.filter((o,a)=>a===0||o.route.path&&o.route.path.length>0)}function Vp(r){let o=L2(r);return o.map((a,d)=>d===o.length-1?a.pathname:a.pathnameBase)}function zp(r,o,a,d=!1){let p;typeof r=="string"?p=ko(r):(p={...r},un(!p.pathname||!p.pathname.includes("?"),df("?","pathname","search",p)),un(!p.pathname||!p.pathname.includes("#"),df("#","pathname","hash",p)),un(!p.search||!p.search.includes("#"),df("#","search","hash",p)));let x=r===""||p.pathname==="",y=x?"/":p.pathname,A;if(y==null)A=a;else{let I=o.length-1;if(!d&&y.startsWith("..")){let R=y.split("/");for(;R[0]==="..";)R.shift(),I-=1;p.pathname=R.join("/")}A=I>=0?o[I]:"/"}let w=M2(p,A),E=y&&y!=="/"&&y.endsWith("/"),S=(x||y===".")&&a.endsWith("/");return!w.pathname.endsWith("/")&&(E||S)&&(w.pathname+="/"),w}var Bi=r=>r.join("/").replace(/\/\/+/g,"/"),B2=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),F2=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,j2=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function V2(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var Up=["POST","PUT","PATCH","DELETE"];new Set(Up);var z2=["GET",...Up];new Set(z2);var Mo=O.createContext(null);Mo.displayName="DataRouter";var Iu=O.createContext(null);Iu.displayName="DataRouterState";var Wp=O.createContext({isTransitioning:!1});Wp.displayName="ViewTransition";var U2=O.createContext(new Map);U2.displayName="Fetchers";var W2=O.createContext(null);W2.displayName="Await";var gi=O.createContext(null);gi.displayName="Navigation";var Ua=O.createContext(null);Ua.displayName="Location";var mi=O.createContext({outlet:null,matches:[],isDataRoute:!1});mi.displayName="Route";var Jf=O.createContext(null);Jf.displayName="RouteError";function H2(r,{relative:o}={}){un(Wa(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:d}=O.useContext(gi),{hash:p,pathname:x,search:y}=Ha(r,{relative:o}),A=x;return a!=="/"&&(A=x==="/"?a:Bi([a,x])),d.createHref({pathname:A,search:y,hash:p})}function Wa(){return O.useContext(Ua)!=null}function xi(){return un(Wa(),"useLocation() may be used only in the context of a <Router> component."),O.useContext(Ua).location}var Hp="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Gp(r){O.useContext(gi).static||O.useLayoutEffect(r)}function zr(){let{isDataRoute:r}=O.useContext(mi);return r?iy():G2()}function G2(){un(Wa(),"useNavigate() may be used only in the context of a <Router> component.");let r=O.useContext(Mo),{basename:o,navigator:a}=O.useContext(gi),{matches:d}=O.useContext(mi),{pathname:p}=xi(),x=JSON.stringify(Vp(d)),y=O.useRef(!1);return Gp(()=>{y.current=!0}),O.useCallback((w,E={})=>{if(pi(y.current,Hp),!y.current)return;if(typeof w=="number"){a.go(w);return}let S=zp(w,JSON.parse(x),p,E.relative==="path");r==null&&o!=="/"&&(S.pathname=S.pathname==="/"?o:Bi([o,S.pathname])),(E.replace?a.replace:a.push)(S,E.state,E)},[o,a,x,p,r])}O.createContext(null);function X2(){let{matches:r}=O.useContext(mi),o=r[r.length-1];return o?o.params:{}}function Ha(r,{relative:o}={}){let{matches:a}=O.useContext(mi),{pathname:d}=xi(),p=JSON.stringify(Vp(a));return O.useMemo(()=>zp(r,JSON.parse(p),d,o==="path"),[r,p,d,o])}function Y2(r,o){return Xp(r,o)}function Xp(r,o,a,d){var V;un(Wa(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:p}=O.useContext(gi),{matches:x}=O.useContext(mi),y=x[x.length-1],A=y?y.params:{},w=y?y.pathname:"/",E=y?y.pathnameBase:"/",S=y&&y.route;{let H=S&&S.path||"";Yp(w,!S||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${w}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let I=xi(),R;if(o){let H=typeof o=="string"?ko(o):o;un(E==="/"||((V=H.pathname)==null?void 0:V.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${H.pathname}" was given in the \`location\` prop.`),R=H}else R=I;let k=R.pathname||"/",L=k;if(E!=="/"){let H=E.replace(/^\//,"").split("/");L="/"+k.replace(/^\//,"").split("/").slice(H.length).join("/")}let B=Bp(r,{pathname:L});pi(S||B!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),pi(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=Q2(B&&B.map(H=>Object.assign({},H,{params:Object.assign({},A,H.params),pathname:Bi([E,p.encodeLocation?p.encodeLocation(H.pathname).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?E:Bi([E,p.encodeLocation?p.encodeLocation(H.pathnameBase).pathname:H.pathnameBase])})),x,a,d);return o&&j?O.createElement(Ua.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},j):j}function K2(){let r=ry(),o=V2(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),a=r instanceof Error?r.stack:null,d="rgba(200,200,200, 0.5)",p={padding:"0.5rem",backgroundColor:d},x={padding:"2px 4px",backgroundColor:d},y=null;return console.error("Error handled by React Router default ErrorBoundary:",r),y=O.createElement(O.Fragment,null,O.createElement("p",null," Hey developer "),O.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",O.createElement("code",{style:x},"ErrorBoundary")," or"," ",O.createElement("code",{style:x},"errorElement")," prop on your route.")),O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},o),a?O.createElement("pre",{style:p},a):null,y)}var Z2=O.createElement(K2,null),$2=class extends O.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,o){return o.location!==r.location||o.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:o.error,location:o.location,revalidation:r.revalidation||o.revalidation}}componentDidCatch(r,o){console.error("React Router caught the following error during render",r,o)}render(){return this.state.error!==void 0?O.createElement(mi.Provider,{value:this.props.routeContext},O.createElement(Jf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function q2({routeContext:r,match:o,children:a}){let d=O.useContext(Mo);return d&&d.static&&d.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(d.staticContext._deepestRenderedBoundaryId=o.route.id),O.createElement(mi.Provider,{value:r},a)}function Q2(r,o=[],a=null,d=null){if(r==null){if(!a)return null;if(a.errors)r=a.matches;else if(o.length===0&&!a.initialized&&a.matches.length>0)r=a.matches;else return null}let p=r,x=a==null?void 0:a.errors;if(x!=null){let w=p.findIndex(E=>E.route.id&&(x==null?void 0:x[E.route.id])!==void 0);un(w>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(x).join(",")}`),p=p.slice(0,Math.min(p.length,w+1))}let y=!1,A=-1;if(a)for(let w=0;w<p.length;w++){let E=p[w];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(A=w),E.route.id){let{loaderData:S,errors:I}=a,R=E.route.loader&&!S.hasOwnProperty(E.route.id)&&(!I||I[E.route.id]===void 0);if(E.route.lazy||R){y=!0,A>=0?p=p.slice(0,A+1):p=[p[0]];break}}}return p.reduceRight((w,E,S)=>{let I,R=!1,k=null,L=null;a&&(I=x&&E.route.id?x[E.route.id]:void 0,k=E.route.errorElement||Z2,y&&(A<0&&S===0?(Yp("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,L=null):A===S&&(R=!0,L=E.route.hydrateFallbackElement||null)));let B=o.concat(p.slice(0,S+1)),j=()=>{let V;return I?V=k:R?V=L:E.route.Component?V=O.createElement(E.route.Component,null):E.route.element?V=E.route.element:V=w,O.createElement(q2,{match:E,routeContext:{outlet:w,matches:B,isDataRoute:a!=null},children:V})};return a&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?O.createElement($2,{location:a.location,revalidation:a.revalidation,component:k,error:I,children:j(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):j()},null)}function ed(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function J2(r){let o=O.useContext(Mo);return un(o,ed(r)),o}function ey(r){let o=O.useContext(Iu);return un(o,ed(r)),o}function ty(r){let o=O.useContext(mi);return un(o,ed(r)),o}function td(r){let o=ty(r),a=o.matches[o.matches.length-1];return un(a.route.id,`${r} can only be used on routes that contain a unique "id"`),a.route.id}function ny(){return td("useRouteId")}function ry(){var d;let r=O.useContext(Jf),o=ey("useRouteError"),a=td("useRouteError");return r!==void 0?r:(d=o.errors)==null?void 0:d[a]}function iy(){let{router:r}=J2("useNavigate"),o=td("useNavigate"),a=O.useRef(!1);return Gp(()=>{a.current=!0}),O.useCallback(async(p,x={})=>{pi(a.current,Hp),a.current&&(typeof p=="number"?r.navigate(p):await r.navigate(p,{fromRouteId:o,...x}))},[r,o])}var r1={};function Yp(r,o,a){!o&&!r1[r]&&(r1[r]=!0,pi(!1,a))}O.memo(sy);function sy({routes:r,future:o,state:a}){return Xp(r,void 0,a,o)}function Jr(r){un(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function oy({basename:r="/",children:o=null,location:a,navigationType:d="POP",navigator:p,static:x=!1}){un(!Wa(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let y=r.replace(/^\/*/,"/"),A=O.useMemo(()=>({basename:y,navigator:p,static:x,future:{}}),[y,p,x]);typeof a=="string"&&(a=ko(a));let{pathname:w="/",search:E="",hash:S="",state:I=null,key:R="default"}=a,k=O.useMemo(()=>{let L=ds(w,y);return L==null?null:{location:{pathname:L,search:E,hash:S,state:I,key:R},navigationType:d}},[y,w,E,S,I,R,d]);return pi(k!=null,`<Router basename="${y}"> is not able to match the URL "${w}${E}${S}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:O.createElement(gi.Provider,{value:A},O.createElement(Ua.Provider,{children:o,value:k}))}function ay({children:r,location:o}){return Y2(Rf(r),o)}function Rf(r,o=[]){let a=[];return O.Children.forEach(r,(d,p)=>{if(!O.isValidElement(d))return;let x=[...o,p];if(d.type===O.Fragment){a.push.apply(a,Rf(d.props.children,x));return}un(d.type===Jr,`[${typeof d.type=="string"?d.type:d.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),un(!d.props.index||!d.props.children,"An index route cannot have child routes.");let y={id:d.props.id||x.join("-"),caseSensitive:d.props.caseSensitive,element:d.props.element,Component:d.props.Component,index:d.props.index,path:d.props.path,loader:d.props.loader,action:d.props.action,hydrateFallbackElement:d.props.hydrateFallbackElement,HydrateFallback:d.props.HydrateFallback,errorElement:d.props.errorElement,ErrorBoundary:d.props.ErrorBoundary,hasErrorBoundary:d.props.hasErrorBoundary===!0||d.props.ErrorBoundary!=null||d.props.errorElement!=null,shouldRevalidate:d.props.shouldRevalidate,handle:d.props.handle,lazy:d.props.lazy};d.props.children&&(y.children=Rf(d.props.children,x)),a.push(y)}),a}var lu="get",uu="application/x-www-form-urlencoded";function Nu(r){return r!=null&&typeof r.tagName=="string"}function ly(r){return Nu(r)&&r.tagName.toLowerCase()==="button"}function uy(r){return Nu(r)&&r.tagName.toLowerCase()==="form"}function cy(r){return Nu(r)&&r.tagName.toLowerCase()==="input"}function fy(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function dy(r,o){return r.button===0&&(!o||o==="_self")&&!fy(r)}var tu=null;function hy(){if(tu===null)try{new FormData(document.createElement("form"),0),tu=!1}catch{tu=!0}return tu}var py=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function hf(r){return r!=null&&!py.has(r)?(pi(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${uu}"`),null):r}function gy(r,o){let a,d,p,x,y;if(uy(r)){let A=r.getAttribute("action");d=A?ds(A,o):null,a=r.getAttribute("method")||lu,p=hf(r.getAttribute("enctype"))||uu,x=new FormData(r)}else if(ly(r)||cy(r)&&(r.type==="submit"||r.type==="image")){let A=r.form;if(A==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let w=r.getAttribute("formaction")||A.getAttribute("action");if(d=w?ds(w,o):null,a=r.getAttribute("formmethod")||A.getAttribute("method")||lu,p=hf(r.getAttribute("formenctype"))||hf(A.getAttribute("enctype"))||uu,x=new FormData(A,r),!hy()){let{name:E,type:S,value:I}=r;if(S==="image"){let R=E?`${E}.`:"";x.append(`${R}x`,"0"),x.append(`${R}y`,"0")}else E&&x.append(E,I)}}else{if(Nu(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=lu,d=null,p=uu,y=r}return x&&p==="text/plain"&&(y=x,x=void 0),{action:d,method:a.toLowerCase(),encType:p,formData:x,body:y}}function nd(r,o){if(r===!1||r===null||typeof r>"u")throw new Error(o)}async function my(r,o){if(r.id in o)return o[r.id];try{let a=await import(r.module);return o[r.id]=a,a}catch(a){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function xy(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function yy(r,o,a){let d=await Promise.all(r.map(async p=>{let x=o.routes[p.route.id];if(x){let y=await my(x,a);return y.links?y.links():[]}return[]}));return Ey(d.flat(1).filter(xy).filter(p=>p.rel==="stylesheet"||p.rel==="preload").map(p=>p.rel==="stylesheet"?{...p,rel:"prefetch",as:"style"}:{...p,rel:"prefetch"}))}function i1(r,o,a,d,p,x){let y=(w,E)=>a[E]?w.route.id!==a[E].route.id:!0,A=(w,E)=>{var S;return a[E].pathname!==w.pathname||((S=a[E].route.path)==null?void 0:S.endsWith("*"))&&a[E].params["*"]!==w.params["*"]};return x==="assets"?o.filter((w,E)=>y(w,E)||A(w,E)):x==="data"?o.filter((w,E)=>{var I;let S=d.routes[w.route.id];if(!S||!S.hasLoader)return!1;if(y(w,E)||A(w,E))return!0;if(w.route.shouldRevalidate){let R=w.route.shouldRevalidate({currentUrl:new URL(p.pathname+p.search+p.hash,window.origin),currentParams:((I=a[0])==null?void 0:I.params)||{},nextUrl:new URL(r,window.origin),nextParams:w.params,defaultShouldRevalidate:!0});if(typeof R=="boolean")return R}return!0}):[]}function wy(r,o){return vy(r.map(a=>{let d=o.routes[a.route.id];if(!d)return[];let p=[d.module];return d.imports&&(p=p.concat(d.imports)),p}).flat(1))}function vy(r){return[...new Set(r)]}function Cy(r){let o={},a=Object.keys(r).sort();for(let d of a)o[d]=r[d];return o}function Ey(r,o){let a=new Set;return new Set(o),r.reduce((d,p)=>{let x=JSON.stringify(Cy(p));return a.has(x)||(a.add(x),d.push({key:x,link:p})),d},[])}function Ay(r){let o=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return o.pathname==="/"?o.pathname="_root.data":o.pathname=`${o.pathname.replace(/\/$/,"")}.data`,o}function Sy(){let r=O.useContext(Mo);return nd(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function by(){let r=O.useContext(Iu);return nd(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var rd=O.createContext(void 0);rd.displayName="FrameworkContext";function Kp(){let r=O.useContext(rd);return nd(r,"You must render this element inside a <HydratedRouter> element"),r}function Ty(r,o){let a=O.useContext(rd),[d,p]=O.useState(!1),[x,y]=O.useState(!1),{onFocus:A,onBlur:w,onMouseEnter:E,onMouseLeave:S,onTouchStart:I}=o,R=O.useRef(null);O.useEffect(()=>{if(r==="render"&&y(!0),r==="viewport"){let B=V=>{V.forEach(H=>{y(H.isIntersecting)})},j=new IntersectionObserver(B,{threshold:.5});return R.current&&j.observe(R.current),()=>{j.disconnect()}}},[r]),O.useEffect(()=>{if(d){let B=setTimeout(()=>{y(!0)},100);return()=>{clearTimeout(B)}}},[d]);let k=()=>{p(!0)},L=()=>{p(!1),y(!1)};return a?r!=="intent"?[x,R,{}]:[x,R,{onFocus:Ea(A,k),onBlur:Ea(w,L),onMouseEnter:Ea(E,k),onMouseLeave:Ea(S,L),onTouchStart:Ea(I,k)}]:[!1,R,{}]}function Ea(r,o){return a=>{r&&r(a),a.defaultPrevented||o(a)}}function Iy({page:r,...o}){let{router:a}=Sy(),d=O.useMemo(()=>Bp(a.routes,r,a.basename),[a.routes,r,a.basename]);return d?O.createElement(Ry,{page:r,matches:d,...o}):(console.warn(`Tried to prefetch ${r} but no routes matched.`),null)}function Ny(r){let{manifest:o,routeModules:a}=Kp(),[d,p]=O.useState([]);return O.useEffect(()=>{let x=!1;return yy(r,o,a).then(y=>{x||p(y)}),()=>{x=!0}},[r,o,a]),d}function Ry({page:r,matches:o,...a}){let d=xi(),{manifest:p,routeModules:x}=Kp(),{loaderData:y,matches:A}=by(),w=O.useMemo(()=>i1(r,o,A,p,d,"data"),[r,o,A,p,d]),E=O.useMemo(()=>i1(r,o,A,p,d,"assets"),[r,o,A,p,d]),S=O.useMemo(()=>{if(r===d.pathname+d.search+d.hash)return[];let k=new Set,L=!1;if(o.forEach(j=>{var H;let V=p.routes[j.route.id];!V||!V.hasLoader||(!w.some(U=>U.route.id===j.route.id)&&j.route.id in y&&((H=x[j.route.id])!=null&&H.shouldRevalidate)||V.hasClientLoader?L=!0:k.add(j.route.id))}),k.size===0)return[];let B=Ay(r);return L&&k.size>0&&B.searchParams.set("_routes",o.filter(j=>k.has(j.route.id)).map(j=>j.route.id).join(",")),[B.pathname+B.search]},[y,d,p,w,o,r,x]),I=O.useMemo(()=>wy(E,p),[E,p]),R=Ny(E);return O.createElement(O.Fragment,null,S.map(k=>O.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...a})),I.map(k=>O.createElement("link",{key:k,rel:"modulepreload",href:k,...a})),R.map(({key:k,link:L})=>O.createElement("link",{key:k,...L})))}function _y(...r){return o=>{r.forEach(a=>{typeof a=="function"?a(o):a!=null&&(a.current=o)})}}var Zp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Zp&&(window.__reactRouterVersion="7.0.2")}catch{}function Py({basename:r,children:o,window:a}){let d=O.useRef();d.current==null&&(d.current=y2({window:a,v5Compat:!0}));let p=d.current,[x,y]=O.useState({action:p.action,location:p.location}),A=O.useCallback(w=>{O.startTransition(()=>y(w))},[y]);return O.useLayoutEffect(()=>p.listen(A),[p,A]),O.createElement(oy,{basename:r,children:o,location:x.location,navigationType:x.action,navigator:p})}var $p=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qp=O.forwardRef(function({onClick:o,discover:a="render",prefetch:d="none",relative:p,reloadDocument:x,replace:y,state:A,target:w,to:E,preventScrollReset:S,viewTransition:I,...R},k){let{basename:L}=O.useContext(gi),B=typeof E=="string"&&$p.test(E),j,V=!1;if(typeof E=="string"&&B&&(j=E,Zp))try{let J=new URL(window.location.href),Ie=E.startsWith("//")?new URL(J.protocol+E):new URL(E),ke=ds(Ie.pathname,L);Ie.origin===J.origin&&ke!=null?E=ke+Ie.search+Ie.hash:V=!0}catch{pi(!1,`<Link to="${E}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let H=H2(E,{relative:p}),[U,ne,se]=Ty(d,R),re=Dy(E,{replace:y,state:A,target:w,preventScrollReset:S,relative:p,viewTransition:I});function q(J){o&&o(J),J.defaultPrevented||re(J)}let ue=O.createElement("a",{...R,...se,href:j||H,onClick:V||x?o:q,ref:_y(k,ne),target:w,"data-discover":!B&&a==="render"?"true":void 0});return U&&!B?O.createElement(O.Fragment,null,ue,O.createElement(Iy,{page:H})):ue});qp.displayName="Link";var Oy=O.forwardRef(function({"aria-current":o="page",caseSensitive:a=!1,className:d="",end:p=!1,style:x,to:y,viewTransition:A,children:w,...E},S){let I=Ha(y,{relative:E.relative}),R=xi(),k=O.useContext(Iu),{navigator:L,basename:B}=O.useContext(gi),j=k!=null&&Vy(I)&&A===!0,V=L.encodeLocation?L.encodeLocation(I).pathname:I.pathname,H=R.pathname,U=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;a||(H=H.toLowerCase(),U=U?U.toLowerCase():null,V=V.toLowerCase()),U&&B&&(U=ds(U,B)||U);const ne=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let se=H===V||!p&&H.startsWith(V)&&H.charAt(ne)==="/",re=U!=null&&(U===V||!p&&U.startsWith(V)&&U.charAt(V.length)==="/"),q={isActive:se,isPending:re,isTransitioning:j},ue=se?o:void 0,J;typeof d=="function"?J=d(q):J=[d,se?"active":null,re?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let Ie=typeof x=="function"?x(q):x;return O.createElement(qp,{...E,"aria-current":ue,className:J,ref:S,style:Ie,to:y,viewTransition:A},typeof w=="function"?w(q):w)});Oy.displayName="NavLink";var ky=O.forwardRef(({discover:r="render",fetcherKey:o,navigate:a,reloadDocument:d,replace:p,state:x,method:y=lu,action:A,onSubmit:w,relative:E,preventScrollReset:S,viewTransition:I,...R},k)=>{let L=Fy(),B=jy(A,{relative:E}),j=y.toLowerCase()==="get"?"get":"post",V=typeof A=="string"&&$p.test(A),H=U=>{if(w&&w(U),U.defaultPrevented)return;U.preventDefault();let ne=U.nativeEvent.submitter,se=(ne==null?void 0:ne.getAttribute("formmethod"))||y;L(ne||U.currentTarget,{fetcherKey:o,method:se,navigate:a,replace:p,state:x,relative:E,preventScrollReset:S,viewTransition:I})};return O.createElement("form",{ref:k,method:j,action:B,onSubmit:d?w:H,...R,"data-discover":!V&&r==="render"?"true":void 0})});ky.displayName="Form";function My(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Qp(r){let o=O.useContext(Mo);return un(o,My(r)),o}function Dy(r,{target:o,replace:a,state:d,preventScrollReset:p,relative:x,viewTransition:y}={}){let A=zr(),w=xi(),E=Ha(r,{relative:x});return O.useCallback(S=>{if(dy(S,o)){S.preventDefault();let I=a!==void 0?a:Oa(w)===Oa(E);A(r,{replace:I,state:d,preventScrollReset:p,relative:x,viewTransition:y})}},[w,A,E,a,d,o,r,p,x,y])}var Ly=0,By=()=>`__${String(++Ly)}__`;function Fy(){let{router:r}=Qp("useSubmit"),{basename:o}=O.useContext(gi),a=ny();return O.useCallback(async(d,p={})=>{let{action:x,method:y,encType:A,formData:w,body:E}=gy(d,o);if(p.navigate===!1){let S=p.fetcherKey||By();await r.fetch(S,a,p.action||x,{preventScrollReset:p.preventScrollReset,formData:w,body:E,formMethod:p.method||y,formEncType:p.encType||A,flushSync:p.flushSync})}else await r.navigate(p.action||x,{preventScrollReset:p.preventScrollReset,formData:w,body:E,formMethod:p.method||y,formEncType:p.encType||A,replace:p.replace,state:p.state,fromRouteId:a,flushSync:p.flushSync,viewTransition:p.viewTransition})},[r,o,a])}function jy(r,{relative:o}={}){let{basename:a}=O.useContext(gi),d=O.useContext(mi);un(d,"useFormAction must be used inside a RouteContext");let[p]=d.matches.slice(-1),x={...Ha(r||".",{relative:o})},y=xi();if(r==null){x.search=y.search;let A=new URLSearchParams(x.search),w=A.getAll("index");if(w.some(S=>S==="")){A.delete("index"),w.filter(I=>I).forEach(I=>A.append("index",I));let S=A.toString();x.search=S?`?${S}`:""}}return(!r||r===".")&&p.route.index&&(x.search=x.search?x.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(x.pathname=x.pathname==="/"?a:Bi([a,x.pathname])),Oa(x)}function Vy(r,o={}){let a=O.useContext(Wp);un(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:d}=Qp("useViewTransitionState"),p=Ha(r,{relative:o.relative});if(!a.isTransitioning)return!1;let x=ds(a.currentLocation.pathname,d)||a.currentLocation.pathname,y=ds(a.nextLocation.pathname,d)||a.nextLocation.pathname;return gu(p.pathname,y)!=null||gu(p.pathname,x)!=null}new TextEncoder;function Jp(){const r="./assets",o="/sounds/prod_combined.mp3";zr();const a=O.useRef(new Audio(r+o)),[d,p]=O.useState(!1),[x,y]=O.useState(!1),[A,w]=O.useState(null),[E,S]=O.useState(!1),[I,R]=O.useState(!1);O.useEffect(()=>{const H=a.current,U=()=>{H.pause(),H.currentTime=0,y(!1),j()};return H.addEventListener("ended",U),()=>H.removeEventListener("ended",U)},[I]);function k(){w(null),a.current.load(),a.current.play().then(()=>{a.current.pause(),a.current.currentTime=0,p(!0),y(!0),S(!0),B()}).catch(H=>{console.error("Error loading audio:",H),w("Failed to load audio. Please check the file path and format."),S(!1)})}function L(){return!!(a.current&&!a.current.paused)}function B(){a.current.paused?a.current.play().catch(H=>{console.error("Error playing audio:",H),w("Failed to play audio. Please try again.")}):a.current.currentTime=0}function j(){a.current&&(a.current.pause(),a.current.currentTime=0,a.current.src="",a.current=null)}function V(H){a.current.currentTime=H,console.log(a.current.duration)}return{audioRef:a,error:A,playSound:B,loadSound:k,seekTo:V,cancelSound:j,checkSound:L,soundEnabled:E,setSoundEnabled:S,isPlaying:x}}var kn;(function(r){r[r.QR_CODE=0]="QR_CODE",r[r.AZTEC=1]="AZTEC",r[r.CODABAR=2]="CODABAR",r[r.CODE_39=3]="CODE_39",r[r.CODE_93=4]="CODE_93",r[r.CODE_128=5]="CODE_128",r[r.DATA_MATRIX=6]="DATA_MATRIX",r[r.MAXICODE=7]="MAXICODE",r[r.ITF=8]="ITF",r[r.EAN_13=9]="EAN_13",r[r.EAN_8=10]="EAN_8",r[r.PDF_417=11]="PDF_417",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(kn||(kn={}));kn.QR_CODE,kn.AZTEC,kn.CODABAR,kn.CODE_39,kn.CODE_93,kn.CODE_128,kn.DATA_MATRIX,kn.MAXICODE,kn.ITF,kn.EAN_13,kn.EAN_8,kn.PDF_417,kn.RSS_14,kn.RSS_EXPANDED,kn.UPC_A,kn.UPC_E,kn.UPC_EAN_EXTENSION;var s1;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.URL=1]="URL"})(s1||(s1={}));var mu;(function(r){r[r.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",r[r.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(mu||(mu={}));var zy=function(){function r(){}return r.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",r.SCAN_DEFAULT_FPS=2,r.DEFAULT_DISABLE_FLIP=!1,r.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,r.DEFAULT_SUPPORTED_SCAN_TYPE=[mu.SCAN_TYPE_CAMERA,mu.SCAN_TYPE_FILE],r}(),o1;(function(r){r[r.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",r[r.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",r[r.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(o1||(o1={}));var Sa={exports:{}},Uy=Sa.exports,a1;function Wy(){return a1||(a1=1,function(r,o){(function(a,d){d(o)})(Uy,function(a){function d(_){return _==null}var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,e){_.__proto__=e}||function(_,e){for(var n in e)e.hasOwnProperty(n)&&(_[n]=e[n])};function x(_,e){p(_,e);function n(){this.constructor=_}_.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function y(_,e){var n=Object.setPrototypeOf;n?n(_,e):_.__proto__=e}function A(_,e){e===void 0&&(e=_.constructor);var n=Error.captureStackTrace;n&&n(_,e)}var w=function(_){x(e,_);function e(n){var i=this.constructor,l=_.call(this,n)||this;return Object.defineProperty(l,"name",{value:i.name,enumerable:!1}),y(l,i.prototype),A(l),l}return e}(Error);class E extends w{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}E.kind="Exception";class S extends E{}S.kind="ArgumentException";class I extends E{}I.kind="IllegalArgumentException";class R{constructor(e){if(this.binarizer=e,e===null)throw new I("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,n){return this.binarizer.getBlackRow(e,n)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,n,i,l){const u=this.binarizer.getLuminanceSource().crop(e,n,i,l);return new R(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new R(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new R(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class k extends E{static getChecksumInstance(){return new k}}k.kind="ChecksumException";class L{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class B{static arraycopy(e,n,i,l,u){for(;u--;)i[l++]=e[n++]}static currentTimeMillis(){return Date.now()}}class j extends E{}j.kind="IndexOutOfBoundsException";class V extends j{constructor(e=void 0,n=void 0){super(n),this.index=e,this.message=n}}V.kind="ArrayIndexOutOfBoundsException";class H{static fill(e,n){for(let i=0,l=e.length;i<l;i++)e[i]=n}static fillWithin(e,n,i,l){H.rangeCheck(e.length,n,i);for(let u=n;u<i;u++)e[u]=l}static rangeCheck(e,n,i){if(n>i)throw new I("fromIndex("+n+") > toIndex("+i+")");if(n<0)throw new V(n);if(i>e)throw new V(i)}static asList(...e){return e}static create(e,n,i){return Array.from({length:e}).map(u=>Array.from({length:n}).fill(i))}static createInt32Array(e,n,i){return Array.from({length:e}).map(u=>Int32Array.from({length:n}).fill(i))}static equals(e,n){if(!e||!n||!e.length||!n.length||e.length!==n.length)return!1;for(let i=0,l=e.length;i<l;i++)if(e[i]!==n[i])return!1;return!0}static hashCode(e){if(e===null)return 0;let n=1;for(const i of e)n=31*n+i;return n}static fillUint8Array(e,n){for(let i=0;i!==e.length;i++)e[i]=n}static copyOf(e,n){return e.slice(0,n)}static copyOfUint8Array(e,n){if(e.length<=n){const i=new Uint8Array(n);return i.set(e),i}return e.slice(0,n)}static copyOfRange(e,n,i){const l=i-n,u=new Int32Array(l);return B.arraycopy(e,n,u,0,l),u}static binarySearch(e,n,i){i===void 0&&(i=H.numberComparator);let l=0,u=e.length-1;for(;l<=u;){const c=u+l>>1,h=i(n,e[c]);if(h>0)l=c+1;else if(h<0)u=c-1;else return c}return-l-1}static numberComparator(e,n){return e-n}}class U{static numberOfTrailingZeros(e){let n;if(e===0)return 32;let i=31;return n=e<<16,n!==0&&(i-=16,e=n),n=e<<8,n!==0&&(i-=8,e=n),n=e<<4,n!==0&&(i-=4,e=n),n=e<<2,n!==0&&(i-=2,e=n),i-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let n=1;return e>>>16||(n+=16,e<<=16),e>>>24||(n+=8,e<<=8),e>>>28||(n+=4,e<<=4),e>>>30||(n+=2,e<<=2),n-=e>>>31,n}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,n){return Math.trunc(e/n)}static parseInt(e,n=void 0){return parseInt(e,n)}}U.MIN_VALUE_32_BITS=-2147483648,U.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ne{constructor(e,n){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,n==null?this.bits=ne.makeArray(e):this.bits=n)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const n=ne.makeArray(e);B.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const n=this.size;if(e>=n)return n;const i=this.bits;let l=Math.floor(e/32),u=i[l];u&=~((1<<(e&31))-1);const c=i.length;for(;u===0;){if(++l===c)return n;u=i[l]}const h=l*32+U.numberOfTrailingZeros(u);return h>n?n:h}getNextUnset(e){const n=this.size;if(e>=n)return n;const i=this.bits;let l=Math.floor(e/32),u=~i[l];u&=~((1<<(e&31))-1);const c=i.length;for(;u===0;){if(++l===c)return n;u=~i[l]}const h=l*32+U.numberOfTrailingZeros(u);return h>n?n:h}setBulk(e,n){this.bits[Math.floor(e/32)]=n}setRange(e,n){if(n<e||e<0||n>this.size)throw new I;if(n===e)return;n--;const i=Math.floor(e/32),l=Math.floor(n/32),u=this.bits;for(let c=i;c<=l;c++){const h=c>i?0:e&31,v=(2<<(c<l?31:n&31))-(1<<h);u[c]|=v}}clear(){const e=this.bits.length,n=this.bits;for(let i=0;i<e;i++)n[i]=0}isRange(e,n,i){if(n<e||e<0||n>this.size)throw new I;if(n===e)return!0;n--;const l=Math.floor(e/32),u=Math.floor(n/32),c=this.bits;for(let h=l;h<=u;h++){const m=h>l?0:e&31,N=(2<<(h<u?31:n&31))-(1<<m)&4294967295;if((c[h]&N)!==(i?N:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,n){if(n<0||n>32)throw new I("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(let i=n;i>0;i--)this.appendBit((e>>i-1&1)===1)}appendBitArray(e){const n=e.size;this.ensureCapacity(this.size+n);for(let i=0;i<n;i++)this.appendBit(e.get(i))}xor(e){if(this.size!==e.size)throw new I("Sizes don't match");const n=this.bits;for(let i=0,l=n.length;i<l;i++)n[i]^=e.bits[i]}toBytes(e,n,i,l){for(let u=0;u<l;u++){let c=0;for(let h=0;h<8;h++)this.get(e)&&(c|=1<<7-h),e++;n[i+u]=c}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),i=n+1,l=this.bits;for(let u=0;u<i;u++){let c=l[u];c=c>>1&1431655765|(c&1431655765)<<1,c=c>>2&858993459|(c&858993459)<<2,c=c>>4&252645135|(c&252645135)<<4,c=c>>8&16711935|(c&16711935)<<8,c=c>>16&65535|(c&65535)<<16,e[n-u]=c}if(this.size!==i*32){const u=i*32-this.size;let c=e[0]>>>u;for(let h=1;h<i;h++){const m=e[h];c|=m<<32-u,e[h-1]=c,c=m>>>u}e[i-1]=c}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof ne))return!1;const n=e;return this.size===n.size&&H.equals(this.bits,n.bits)}hashCode(){return 31*this.size+H.hashCode(this.bits)}toString(){let e="";for(let n=0,i=this.size;n<i;n++)n&7||(e+=" "),e+=this.get(n)?"X":".";return e}clone(){return new ne(this.size,this.bits.slice())}}var se;(function(_){_[_.OTHER=0]="OTHER",_[_.PURE_BARCODE=1]="PURE_BARCODE",_[_.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",_[_.TRY_HARDER=3]="TRY_HARDER",_[_.CHARACTER_SET=4]="CHARACTER_SET",_[_.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",_[_.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",_[_.ASSUME_GS1=7]="ASSUME_GS1",_[_.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",_[_.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",_[_.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(se||(se={}));var re=se;class q extends E{static getFormatInstance(){return new q}}q.kind="FormatException";var ue;(function(_){_[_.Cp437=0]="Cp437",_[_.ISO8859_1=1]="ISO8859_1",_[_.ISO8859_2=2]="ISO8859_2",_[_.ISO8859_3=3]="ISO8859_3",_[_.ISO8859_4=4]="ISO8859_4",_[_.ISO8859_5=5]="ISO8859_5",_[_.ISO8859_6=6]="ISO8859_6",_[_.ISO8859_7=7]="ISO8859_7",_[_.ISO8859_8=8]="ISO8859_8",_[_.ISO8859_9=9]="ISO8859_9",_[_.ISO8859_10=10]="ISO8859_10",_[_.ISO8859_11=11]="ISO8859_11",_[_.ISO8859_13=12]="ISO8859_13",_[_.ISO8859_14=13]="ISO8859_14",_[_.ISO8859_15=14]="ISO8859_15",_[_.ISO8859_16=15]="ISO8859_16",_[_.SJIS=16]="SJIS",_[_.Cp1250=17]="Cp1250",_[_.Cp1251=18]="Cp1251",_[_.Cp1252=19]="Cp1252",_[_.Cp1256=20]="Cp1256",_[_.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",_[_.UTF8=22]="UTF8",_[_.ASCII=23]="ASCII",_[_.Big5=24]="Big5",_[_.GB18030=25]="GB18030",_[_.EUC_KR=26]="EUC_KR"})(ue||(ue={}));class J{constructor(e,n,i,...l){this.valueIdentifier=e,this.name=i,typeof n=="number"?this.values=Int32Array.from([n]):this.values=n,this.otherEncodingNames=l,J.VALUE_IDENTIFIER_TO_ECI.set(e,this),J.NAME_TO_ECI.set(i,this);const u=this.values;for(let c=0,h=u.length;c!==h;c++){const m=u[c];J.VALUES_TO_ECI.set(m,this)}for(const c of l)J.NAME_TO_ECI.set(c,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new q("incorect value");const n=J.VALUES_TO_ECI.get(e);if(n===void 0)throw new q("incorect value");return n}static getCharacterSetECIByName(e){const n=J.NAME_TO_ECI.get(e);if(n===void 0)throw new q("incorect value");return n}equals(e){if(!(e instanceof J))return!1;const n=e;return this.getName()===n.getName()}}J.VALUE_IDENTIFIER_TO_ECI=new Map,J.VALUES_TO_ECI=new Map,J.NAME_TO_ECI=new Map,J.Cp437=new J(ue.Cp437,Int32Array.from([0,2]),"Cp437"),J.ISO8859_1=new J(ue.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),J.ISO8859_2=new J(ue.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),J.ISO8859_3=new J(ue.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),J.ISO8859_4=new J(ue.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),J.ISO8859_5=new J(ue.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),J.ISO8859_6=new J(ue.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),J.ISO8859_7=new J(ue.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),J.ISO8859_8=new J(ue.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),J.ISO8859_9=new J(ue.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),J.ISO8859_10=new J(ue.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),J.ISO8859_11=new J(ue.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),J.ISO8859_13=new J(ue.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),J.ISO8859_14=new J(ue.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),J.ISO8859_15=new J(ue.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),J.ISO8859_16=new J(ue.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),J.SJIS=new J(ue.SJIS,20,"SJIS","Shift_JIS"),J.Cp1250=new J(ue.Cp1250,21,"Cp1250","windows-1250"),J.Cp1251=new J(ue.Cp1251,22,"Cp1251","windows-1251"),J.Cp1252=new J(ue.Cp1252,23,"Cp1252","windows-1252"),J.Cp1256=new J(ue.Cp1256,24,"Cp1256","windows-1256"),J.UnicodeBigUnmarked=new J(ue.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),J.UTF8=new J(ue.UTF8,26,"UTF8","UTF-8"),J.ASCII=new J(ue.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),J.Big5=new J(ue.Big5,28,"Big5"),J.GB18030=new J(ue.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),J.EUC_KR=new J(ue.EUC_KR,30,"EUC_KR","EUC-KR");class Ie extends E{}Ie.kind="UnsupportedOperationException";class ke{static decode(e,n){const i=this.encodingName(n);return this.customDecoder?this.customDecoder(e,i):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(i)?this.decodeFallback(e,i):new TextDecoder(i).decode(e)}static shouldDecodeOnFallback(e){return!ke.isBrowser()&&e==="ISO-8859-1"}static encode(e,n){const i=this.encodingName(n);return this.customEncoder?this.customEncoder(e,i):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof J?e:J.getCharacterSetECIByName(e)}static decodeFallback(e,n){const i=this.encodingCharacterSet(n);if(ke.isDecodeFallbackSupported(i)){let l="";for(let u=0,c=e.length;u<c;u++){let h=e[u].toString(16);h.length<2&&(h="0"+h),l+="%"+h}return decodeURIComponent(l)}if(i.equals(J.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Ie(`Encoding ${this.encodingName(n)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(J.UTF8)||e.equals(J.ISO8859_1)||e.equals(J.ASCII)}static encodeFallback(e){const i=btoa(unescape(encodeURIComponent(e))).split(""),l=[];for(let u=0;u<i.length;u++)l.push(i[u].charCodeAt(0));return new Uint8Array(l)}}class be{static castAsNonUtf8Char(e,n=null){const i=n?n.getName():this.ISO88591;return ke.decode(new Uint8Array([e]),i)}static guessEncoding(e,n){if(n!=null&&n.get(re.CHARACTER_SET)!==void 0)return n.get(re.CHARACTER_SET).toString();const i=e.length;let l=!0,u=!0,c=!0,h=0,m=0,v=0,N=0,P=0,D=0,z=0,G=0,Y=0,Q=0,oe=0;const Ce=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let Ae=0;Ae<i&&(l||u||c);Ae++){const xe=e[Ae]&255;c&&(h>0?xe&128?h--:c=!1:xe&128&&(xe&64?(h++,xe&32?(h++,xe&16?(h++,xe&8?c=!1:N++):v++):m++):c=!1)),l&&(xe>127&&xe<160?l=!1:xe>159&&(xe<192||xe===215||xe===247)&&oe++),u&&(P>0?xe<64||xe===127||xe>252?u=!1:P--:xe===128||xe===160||xe>239?u=!1:xe>160&&xe<224?(D++,G=0,z++,z>Y&&(Y=z)):xe>127?(P++,z=0,G++,G>Q&&(Q=G)):(z=0,G=0))}return c&&h>0&&(c=!1),u&&P>0&&(u=!1),c&&(Ce||m+v+N>0)?be.UTF8:u&&(be.ASSUME_SHIFT_JIS||Y>=3||Q>=3)?be.SHIFT_JIS:l&&u?Y===2&&D===2||oe*10>=i?be.SHIFT_JIS:be.ISO88591:l?be.ISO88591:u?be.SHIFT_JIS:c?be.UTF8:be.PLATFORM_DEFAULT_ENCODING}static format(e,...n){let i=-1;function l(c,h,m,v,N,P){if(c==="%%")return"%";if(n[++i]===void 0)return;c=v?parseInt(v.substr(1)):void 0;let D=N?parseInt(N.substr(1)):void 0,z;switch(P){case"s":z=n[i];break;case"c":z=n[i][0];break;case"f":z=parseFloat(n[i]).toFixed(c);break;case"p":z=parseFloat(n[i]).toPrecision(c);break;case"e":z=parseFloat(n[i]).toExponential(c);break;case"x":z=parseInt(n[i]).toString(D||16);break;case"d":z=parseFloat(parseInt(n[i],D||10).toPrecision(c)).toFixed(0);break}z=typeof z=="object"?JSON.stringify(z):(+z).toString(D);let G=parseInt(m),Y=m&&m[0]+""=="0"?"0":" ";for(;z.length<G;)z=h!==void 0?z+Y:Y+z;return z}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(u,l)}static getBytes(e,n){return ke.encode(e,n)}static getCharCode(e,n=0){return e.charCodeAt(n)}static getCharAt(e){return String.fromCharCode(e)}}be.SHIFT_JIS=J.SJIS.getName(),be.GB2312="GB2312",be.ISO88591=J.ISO8859_1.getName(),be.EUC_JP="EUC_JP",be.UTF8=J.UTF8.getName(),be.PLATFORM_DEFAULT_ENCODING=be.UTF8,be.ASSUME_SHIFT_JIS=!1;class Re{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=be.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,n,i){for(let l=n;n<n+i;l++)this.append(e[l]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+1)}substring(e,n){return this.value.substring(e,n)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+n.length)}}class De{constructor(e,n,i,l){if(this.width=e,this.height=n,this.rowSize=i,this.bits=l,n==null&&(n=e),this.height=n,e<1||n<1)throw new I("Both dimensions must be greater than 0");i==null&&(i=Math.floor((e+31)/32)),this.rowSize=i,l==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const n=e.length,i=e[0].length,l=new De(i,n);for(let u=0;u<n;u++){const c=e[u];for(let h=0;h<i;h++)c[h]&&l.set(h,u)}return l}static parseFromString(e,n,i){if(e===null)throw new I("stringRepresentation cannot be null");const l=new Array(e.length);let u=0,c=0,h=-1,m=0,v=0;for(;v<e.length;)if(e.charAt(v)===`
`||e.charAt(v)==="\r"){if(u>c){if(h===-1)h=u-c;else if(u-c!==h)throw new I("row lengths do not match");c=u,m++}v++}else if(e.substring(v,v+n.length)===n)v+=n.length,l[u]=!0,u++;else if(e.substring(v,v+i.length)===i)v+=i.length,l[u]=!1,u++;else throw new I("illegal character encountered: "+e.substring(v));if(u>c){if(h===-1)h=u-c;else if(u-c!==h)throw new I("row lengths do not match");m++}const N=new De(h,m);for(let P=0;P<u;P++)l[P]&&N.set(Math.floor(P%h),Math.floor(P/h));return N}get(e,n){const i=n*this.rowSize+Math.floor(e/32);return(this.bits[i]>>>(e&31)&1)!==0}set(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]|=1<<(e&31)&4294967295}unset(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]&=~(1<<(e&31)&4294967295)}flip(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new I("input matrix dimensions do not match");const n=new ne(Math.floor(this.width/32)+1),i=this.rowSize,l=this.bits;for(let u=0,c=this.height;u<c;u++){const h=u*i,m=e.getRow(u,n).getBitArray();for(let v=0;v<i;v++)l[h+v]^=m[v]}}clear(){const e=this.bits,n=e.length;for(let i=0;i<n;i++)e[i]=0}setRegion(e,n,i,l){if(n<0||e<0)throw new I("Left and top must be nonnegative");if(l<1||i<1)throw new I("Height and width must be at least 1");const u=e+i,c=n+l;if(c>this.height||u>this.width)throw new I("The region must fit inside the matrix");const h=this.rowSize,m=this.bits;for(let v=n;v<c;v++){const N=v*h;for(let P=e;P<u;P++)m[N+Math.floor(P/32)]|=1<<(P&31)&4294967295}}getRow(e,n){n==null||n.getSize()<this.width?n=new ne(this.width):n.clear();const i=this.rowSize,l=this.bits,u=e*i;for(let c=0;c<i;c++)n.setBulk(c*32,l[u+c]);return n}setRow(e,n){B.arraycopy(n.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),n=this.getHeight();let i=new ne(e),l=new ne(e);for(let u=0,c=Math.floor((n+1)/2);u<c;u++)i=this.getRow(u,i),l=this.getRow(n-1-u,l),i.reverse(),l.reverse(),this.setRow(u,l),this.setRow(n-1-u,i)}getEnclosingRectangle(){const e=this.width,n=this.height,i=this.rowSize,l=this.bits;let u=e,c=n,h=-1,m=-1;for(let v=0;v<n;v++)for(let N=0;N<i;N++){const P=l[v*i+N];if(P!==0){if(v<c&&(c=v),v>m&&(m=v),N*32<u){let D=0;for(;!(P<<31-D&4294967295);)D++;N*32+D<u&&(u=N*32+D)}if(N*32+31>h){let D=31;for(;!(P>>>D);)D--;N*32+D>h&&(h=N*32+D)}}}return h<u||m<c?null:Int32Array.from([u,c,h-u+1,m-c+1])}getTopLeftOnBit(){const e=this.rowSize,n=this.bits;let i=0;for(;i<n.length&&n[i]===0;)i++;if(i===n.length)return null;const l=i/e;let u=i%e*32;const c=n[i];let h=0;for(;!(c<<31-h&4294967295);)h++;return u+=h,Int32Array.from([u,l])}getBottomRightOnBit(){const e=this.rowSize,n=this.bits;let i=n.length-1;for(;i>=0&&n[i]===0;)i--;if(i<0)return null;const l=Math.floor(i/e);let u=Math.floor(i%e)*32;const c=n[i];let h=31;for(;!(c>>>h);)h--;return u+=h,Int32Array.from([u,l])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof De))return!1;const n=e;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&H.equals(this.bits,n.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+H.hashCode(this.bits),e}toString(e="X ",n="  ",i=`
`){return this.buildToString(e,n,i)}buildToString(e,n,i){let l=new Re;for(let u=0,c=this.height;u<c;u++){for(let h=0,m=this.width;h<m;h++)l.append(this.get(h,u)?e:n);l.append(i)}return l.toString()}clone(){return new De(this.width,this.height,this.rowSize,this.bits.slice())}}class Z extends E{static getNotFoundInstance(){return new Z}}Z.kind="NotFoundException";class Te extends L{constructor(e){super(e),this.luminances=Te.EMPTY,this.buckets=new Int32Array(Te.LUMINANCE_BUCKETS)}getBlackRow(e,n){const i=this.getLuminanceSource(),l=i.getWidth();n==null||n.getSize()<l?n=new ne(l):n.clear(),this.initArrays(l);const u=i.getRow(e,this.luminances),c=this.buckets;for(let m=0;m<l;m++)c[(u[m]&255)>>Te.LUMINANCE_SHIFT]++;const h=Te.estimateBlackPoint(c);if(l<3)for(let m=0;m<l;m++)(u[m]&255)<h&&n.set(m);else{let m=u[0]&255,v=u[1]&255;for(let N=1;N<l-1;N++){const P=u[N+1]&255;(v*4-m-P)/2<h&&n.set(N),m=v,v=P}}return n}getBlackMatrix(){const e=this.getLuminanceSource(),n=e.getWidth(),i=e.getHeight(),l=new De(n,i);this.initArrays(n);const u=this.buckets;for(let m=1;m<5;m++){const v=Math.floor(i*m/5),N=e.getRow(v,this.luminances),P=Math.floor(n*4/5);for(let D=Math.floor(n/5);D<P;D++){const z=N[D]&255;u[z>>Te.LUMINANCE_SHIFT]++}}const c=Te.estimateBlackPoint(u),h=e.getMatrix();for(let m=0;m<i;m++){const v=m*n;for(let N=0;N<n;N++)(h[v+N]&255)<c&&l.set(N,m)}return l}createBinarizer(e){return new Te(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const n=this.buckets;for(let i=0;i<Te.LUMINANCE_BUCKETS;i++)n[i]=0}static estimateBlackPoint(e){const n=e.length;let i=0,l=0,u=0;for(let N=0;N<n;N++)e[N]>u&&(l=N,u=e[N]),e[N]>i&&(i=e[N]);let c=0,h=0;for(let N=0;N<n;N++){const P=N-l,D=e[N]*P*P;D>h&&(c=N,h=D)}if(l>c){const N=l;l=c,c=N}if(c-l<=n/16)throw new Z;let m=c-1,v=-1;for(let N=c-1;N>l;N--){const P=N-l,D=P*P*(c-N)*(i-e[N]);D>v&&(m=N,v=D)}return m<<Te.LUMINANCE_SHIFT}}Te.LUMINANCE_BITS=5,Te.LUMINANCE_SHIFT=8-Te.LUMINANCE_BITS,Te.LUMINANCE_BUCKETS=1<<Te.LUMINANCE_BITS,Te.EMPTY=Uint8ClampedArray.from([0]);class fe extends Te{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),n=e.getWidth(),i=e.getHeight();if(n>=fe.MINIMUM_DIMENSION&&i>=fe.MINIMUM_DIMENSION){const l=e.getMatrix();let u=n>>fe.BLOCK_SIZE_POWER;n&fe.BLOCK_SIZE_MASK&&u++;let c=i>>fe.BLOCK_SIZE_POWER;i&fe.BLOCK_SIZE_MASK&&c++;const h=fe.calculateBlackPoints(l,u,c,n,i),m=new De(n,i);fe.calculateThresholdForBlock(l,u,c,n,i,h,m),this.matrix=m}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new fe(e)}static calculateThresholdForBlock(e,n,i,l,u,c,h){const m=u-fe.BLOCK_SIZE,v=l-fe.BLOCK_SIZE;for(let N=0;N<i;N++){let P=N<<fe.BLOCK_SIZE_POWER;P>m&&(P=m);const D=fe.cap(N,2,i-3);for(let z=0;z<n;z++){let G=z<<fe.BLOCK_SIZE_POWER;G>v&&(G=v);const Y=fe.cap(z,2,n-3);let Q=0;for(let Ce=-2;Ce<=2;Ce++){const Ae=c[D+Ce];Q+=Ae[Y-2]+Ae[Y-1]+Ae[Y]+Ae[Y+1]+Ae[Y+2]}const oe=Q/25;fe.thresholdBlock(e,G,P,oe,l,h)}}}static cap(e,n,i){return e<n?n:e>i?i:e}static thresholdBlock(e,n,i,l,u,c){for(let h=0,m=i*u+n;h<fe.BLOCK_SIZE;h++,m+=u)for(let v=0;v<fe.BLOCK_SIZE;v++)(e[m+v]&255)<=l&&c.set(n+v,i+h)}static calculateBlackPoints(e,n,i,l,u){const c=u-fe.BLOCK_SIZE,h=l-fe.BLOCK_SIZE,m=new Array(i);for(let v=0;v<i;v++){m[v]=new Int32Array(n);let N=v<<fe.BLOCK_SIZE_POWER;N>c&&(N=c);for(let P=0;P<n;P++){let D=P<<fe.BLOCK_SIZE_POWER;D>h&&(D=h);let z=0,G=255,Y=0;for(let oe=0,Ce=N*l+D;oe<fe.BLOCK_SIZE;oe++,Ce+=l){for(let Ae=0;Ae<fe.BLOCK_SIZE;Ae++){const xe=e[Ce+Ae]&255;z+=xe,xe<G&&(G=xe),xe>Y&&(Y=xe)}if(Y-G>fe.MIN_DYNAMIC_RANGE)for(oe++,Ce+=l;oe<fe.BLOCK_SIZE;oe++,Ce+=l)for(let Ae=0;Ae<fe.BLOCK_SIZE;Ae++)z+=e[Ce+Ae]&255}let Q=z>>fe.BLOCK_SIZE_POWER*2;if(Y-G<=fe.MIN_DYNAMIC_RANGE&&(Q=G/2,v>0&&P>0)){const oe=(m[v-1][P]+2*m[v][P-1]+m[v-1][P-1])/4;G<oe&&(Q=oe)}m[v][P]=Q}}return m}}fe.BLOCK_SIZE_POWER=3,fe.BLOCK_SIZE=1<<fe.BLOCK_SIZE_POWER,fe.BLOCK_SIZE_MASK=fe.BLOCK_SIZE-1,fe.MINIMUM_DIMENSION=fe.BLOCK_SIZE*5,fe.MIN_DYNAMIC_RANGE=24;class ce{constructor(e,n){this.width=e,this.height=n}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,n,i,l){throw new Ie("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Ie("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Ie("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let n=new Re;for(let i=0;i<this.height;i++){const l=this.getRow(i,e);for(let u=0;u<this.width;u++){const c=l[u]&255;let h;c<64?h="#":c<128?h="+":c<192?h=".":h=" ",n.append(h)}n.append(`
`)}return n.toString()}}class ge extends ce{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,n){const i=this.delegate.getRow(e,n),l=this.getWidth();for(let u=0;u<l;u++)i[u]=255-(i[u]&255);return i}getMatrix(){const e=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n);for(let l=0;l<n;l++)i[l]=255-(e[l]&255);return i}isCropSupported(){return this.delegate.isCropSupported()}crop(e,n,i,l){return new ge(this.delegate.crop(e,n,i,l))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ge(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ge(this.delegate.rotateCounterClockwise45())}}class pe extends ce{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=pe.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const n=e.getContext("2d").getImageData(0,0,e.width,e.height);return pe.toGrayscaleBuffer(n.data,e.width,e.height)}static toGrayscaleBuffer(e,n,i){const l=new Uint8ClampedArray(n*i);for(let u=0,c=0,h=e.length;u<h;u+=4,c++){let m;if(e[u+3]===0)m=255;else{const N=e[u],P=e[u+1],D=e[u+2];m=306*N+601*P+117*D+512>>10}l[c]=m}return l}getRow(e,n){if(e<0||e>=this.getHeight())throw new I("Requested row is outside the image: "+e);const i=this.getWidth(),l=e*i;return n===null?n=this.buffer.slice(l,l+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(l,l+i))),n}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,n,i,l){return super.crop(e,n,i,l),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const n=this.getTempCanvasElement(),i=n.getContext("2d"),l=e*pe.DEGREE_TO_RADIANS,u=this.canvas.width,c=this.canvas.height,h=Math.ceil(Math.abs(Math.cos(l))*u+Math.abs(Math.sin(l))*c),m=Math.ceil(Math.abs(Math.sin(l))*u+Math.abs(Math.cos(l))*c);return n.width=h,n.height=m,i.translate(h/2,m/2),i.rotate(l),i.drawImage(this.canvas,u/-2,c/-2),this.buffer=pe.makeBufferFromCanvasImageData(n),this}invert(){return new ge(this)}}pe.DEGREE_TO_RADIANS=Math.PI/180;class ${constructor(e,n,i){this.deviceId=e,this.label=n,this.kind="videoinput",this.groupId=i||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var de=(globalThis||Ql||self||window||void 0)&&(globalThis||Ql||self||window||void 0).__awaiter||function(_,e,n,i){function l(u){return u instanceof n?u:new n(function(c){c(u)})}return new(n||(n=Promise))(function(u,c){function h(N){try{v(i.next(N))}catch(P){c(P)}}function m(N){try{v(i.throw(N))}catch(P){c(P)}}function v(N){N.done?u(N.value):l(N.value).then(h,m)}v((i=i.apply(_,e||[])).next())})};class Ge{constructor(e,n=500,i){this.reader=e,this.timeBetweenScansMillis=n,this._hints=i,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return de(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),n=[];for(const i of e){const l=i.kind==="video"?"videoinput":i.kind;if(l!=="videoinput")continue;const u=i.deviceId||i.id,c=i.label||`Video device ${n.length+1}`,h=i.groupId,m={deviceId:u,label:c,kind:l,groupId:h};n.push(m)}return n})}getVideoInputDevices(){return de(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(n=>new $(n.deviceId,n.label))})}findDeviceById(e){return de(this,void 0,void 0,function*(){const n=yield this.listVideoInputDevices();return n?n.find(i=>i.deviceId===e):null})}decodeFromInputVideoDevice(e,n){return de(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,n)})}decodeOnceFromVideoDevice(e,n){return de(this,void 0,void 0,function*(){this.reset();let i;e?i={deviceId:{exact:e}}:i={facingMode:"environment"};const l={video:i};return yield this.decodeOnceFromConstraints(l,n)})}decodeOnceFromConstraints(e,n){return de(this,void 0,void 0,function*(){const i=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(i,n)})}decodeOnceFromStream(e,n){return de(this,void 0,void 0,function*(){this.reset();const i=yield this.attachStreamToVideo(e,n);return yield this.decodeOnce(i)})}decodeFromInputVideoDeviceContinuously(e,n,i){return de(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,n,i)})}decodeFromVideoDevice(e,n,i){return de(this,void 0,void 0,function*(){let l;e?l={deviceId:{exact:e}}:l={facingMode:"environment"};const u={video:l};return yield this.decodeFromConstraints(u,n,i)})}decodeFromConstraints(e,n,i){return de(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(l,n,i)})}decodeFromStream(e,n,i){return de(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(e,n);return yield this.decodeContinuously(l,i)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,n){return de(this,void 0,void 0,function*(){const i=this.prepareVideoElement(n);return this.addVideoSource(i,e),this.videoElement=i,this.stream=e,yield this.playVideoOnLoadAsync(i),i})}playVideoOnLoadAsync(e){return new Promise((n,i)=>this.playVideoOnLoad(e,()=>n()))}playVideoOnLoad(e,n){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",n),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return de(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,n){const i=document.getElementById(e);if(!i)throw new S(`element with id '${e}' not found`);if(i.nodeName.toLowerCase()!==n.toLowerCase())throw new S(`element with id '${e}' must be an ${n} element`);return i}decodeFromImage(e,n){if(!e&&!n)throw new S("either imageElement with a src set or an url must be provided");return n&&!e?this.decodeFromImageUrl(n):this.decodeFromImageElement(e)}decodeFromVideo(e,n){if(!e&&!n)throw new S("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,n,i){if(e===void 0&&n===void 0)throw new S("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrlContinuously(n,i):this.decodeFromVideoElementContinuously(e,i)}decodeFromImageElement(e){if(!e)throw new S("An image element must be provided.");this.reset();const n=this.prepareImageElement(e);this.imageElement=n;let i;return this.isImageLoaded(n)?i=this.decodeOnce(n,!1,!0):i=this._decodeOnLoadImage(n),i}decodeFromVideoElement(e){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(n)}decodeFromVideoElementContinuously(e,n){const i=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(i,n)}_decodeFromVideoElementSetup(e){if(!e)throw new S("A video element must be provided.");this.reset();const n=this.prepareVideoElement(e);return this.videoElement=n,n}decodeFromImageUrl(e){if(!e)throw new S("An URL must be provided.");this.reset();const n=this.prepareImageElement();this.imageElement=n;const i=this._decodeOnLoadImage(n);return n.src=e,i}decodeFromVideoUrl(e){if(!e)throw new S("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),i=this.decodeFromVideoElement(n);return n.src=e,i}decodeFromVideoUrlContinuously(e,n){if(!e)throw new S("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),l=this.decodeFromVideoElementContinuously(i,n);return i.src=e,l}_decodeOnLoadImage(e){return new Promise((n,i)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(n,i),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return de(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,n){return de(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,n)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let n;return typeof e>"u"&&(n=document.createElement("img"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(n=e),n}prepareVideoElement(e){let n;return!e&&typeof document<"u"&&(n=document.createElement("video"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(n=e),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n}decodeOnce(e,n=!0,i=!0){this._stopAsyncDecode=!1;const l=(u,c)=>{if(this._stopAsyncDecode){c(new Z("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const h=this.decode(e);u(h)}catch(h){const m=n&&h instanceof Z,N=(h instanceof k||h instanceof q)&&i;if(m||N)return setTimeout(l,this._timeBetweenDecodingAttempts,u,c);c(h)}};return new Promise((u,c)=>l(u,c))}decodeContinuously(e,n){this._stopContinuousDecode=!1;const i=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const l=this.decode(e);n(l,null),setTimeout(i,this.timeBetweenScansMillis)}catch(l){n(null,l);const u=l instanceof k||l instanceof q,c=l instanceof Z;(u||c)&&setTimeout(i,this._timeBetweenDecodingAttempts)}};i()}decode(e){const n=this.createBinaryBitmap(e);return this.decodeBitmap(n)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,n,i){n||(n={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),i||(i=this.captureCanvasContext),i.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}drawImageOnCanvas(e,n,i=this.captureCanvasContext){n||(n={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),i||(i=this.captureCanvasContext),i.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const n=this.getCaptureCanvas(e),i=new pe(n),l=new fe(i);return new R(l)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const i=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=i}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const n=this.createCaptureCanvas(e);this.captureCanvas=n}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const n=document.createElement("canvas");let i,l;return typeof e<"u"&&(e instanceof HTMLVideoElement?(i=e.videoWidth,l=e.videoHeight):e instanceof HTMLImageElement&&(i=e.naturalWidth||e.width,l=e.naturalHeight||e.height)),n.style.width=i+"px",n.style.height=l+"px",n.width=i,n.height=l,n}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,n){try{e.srcObject=n}catch{e.src=URL.createObjectURL(n)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class We{constructor(e,n,i=n==null?0:8*n.length,l,u,c=B.currentTimeMillis()){this.text=e,this.rawBytes=n,this.numBits=i,this.resultPoints=l,this.format=u,this.timestamp=c,this.text=e,this.rawBytes=n,i==null?this.numBits=n==null?0:8*n.length:this.numBits=i,this.resultPoints=l,this.format=u,this.resultMetadata=null,c==null?this.timestamp=B.currentTimeMillis():this.timestamp=c}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,n){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,n)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const n=this.resultPoints;if(n===null)this.resultPoints=e;else if(e!==null&&e.length>0){const i=new Array(n.length+e.length);B.arraycopy(n,0,i,0,n.length),B.arraycopy(e,0,i,n.length,e.length),this.resultPoints=i}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ut;(function(_){_[_.AZTEC=0]="AZTEC",_[_.CODABAR=1]="CODABAR",_[_.CODE_39=2]="CODE_39",_[_.CODE_93=3]="CODE_93",_[_.CODE_128=4]="CODE_128",_[_.DATA_MATRIX=5]="DATA_MATRIX",_[_.EAN_8=6]="EAN_8",_[_.EAN_13=7]="EAN_13",_[_.ITF=8]="ITF",_[_.MAXICODE=9]="MAXICODE",_[_.PDF_417=10]="PDF_417",_[_.QR_CODE=11]="QR_CODE",_[_.RSS_14=12]="RSS_14",_[_.RSS_EXPANDED=13]="RSS_EXPANDED",_[_.UPC_A=14]="UPC_A",_[_.UPC_E=15]="UPC_E",_[_.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ut||(ut={}));var Ee=ut,at;(function(_){_[_.OTHER=0]="OTHER",_[_.ORIENTATION=1]="ORIENTATION",_[_.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",_[_.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",_[_.ISSUE_NUMBER=4]="ISSUE_NUMBER",_[_.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",_[_.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",_[_.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",_[_.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",_[_.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",_[_.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(at||(at={}));var He=at;class rt{constructor(e,n,i,l,u=-1,c=-1){this.rawBytes=e,this.text=n,this.byteSegments=i,this.ecLevel=l,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=c,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Be{exp(e){return this.expTable[e]}log(e){if(e===0)throw new I;return this.logTable[e]}static addOrSubtract(e,n){return e^n}}class Ne{constructor(e,n){if(n.length===0)throw new I;this.field=e;const i=n.length;if(i>1&&n[0]===0){let l=1;for(;l<i&&n[l]===0;)l++;l===i?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(i-l),B.arraycopy(n,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const n=this.coefficients;let i;if(e===1){i=0;for(let c=0,h=n.length;c!==h;c++){const m=n[c];i=Be.addOrSubtract(i,m)}return i}i=n[0];const l=n.length,u=this.field;for(let c=1;c<l;c++)i=Be.addOrSubtract(u.multiply(e,i),n[c]);return i}addOrSubtract(e){if(!this.field.equals(e.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,i=e.coefficients;if(n.length>i.length){const c=n;n=i,i=c}let l=new Int32Array(i.length);const u=i.length-n.length;B.arraycopy(i,0,l,0,u);for(let c=u;c<i.length;c++)l[c]=Be.addOrSubtract(n[c-u],i[c]);return new Ne(this.field,l)}multiply(e){if(!this.field.equals(e.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const n=this.coefficients,i=n.length,l=e.coefficients,u=l.length,c=new Int32Array(i+u-1),h=this.field;for(let m=0;m<i;m++){const v=n[m];for(let N=0;N<u;N++)c[m+N]=Be.addOrSubtract(c[m+N],h.multiply(v,l[N]))}return new Ne(h,c)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const n=this.coefficients.length,i=this.field,l=new Int32Array(n),u=this.coefficients;for(let c=0;c<n;c++)l[c]=i.multiply(u[c],e);return new Ne(i,l)}multiplyByMonomial(e,n){if(e<0)throw new I;if(n===0)return this.field.getZero();const i=this.coefficients,l=i.length,u=new Int32Array(l+e),c=this.field;for(let h=0;h<l;h++)u[h]=c.multiply(i[h],n);return new Ne(c,u)}divide(e){if(!this.field.equals(e.field))throw new I("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new I("Divide by 0");const n=this.field;let i=n.getZero(),l=this;const u=e.getCoefficient(e.getDegree()),c=n.inverse(u);for(;l.getDegree()>=e.getDegree()&&!l.isZero();){const h=l.getDegree()-e.getDegree(),m=n.multiply(l.getCoefficient(l.getDegree()),c),v=e.multiplyByMonomial(h,m),N=n.buildMonomial(h,m);i=i.addOrSubtract(N),l=l.addOrSubtract(v)}return[i,l]}toString(){let e="";for(let n=this.getDegree();n>=0;n--){let i=this.getCoefficient(n);if(i!==0){if(i<0?(e+=" - ",i=-i):e.length>0&&(e+=" + "),n===0||i!==1){const l=this.field.log(i);l===0?e+="1":l===1?e+="a":(e+="a^",e+=l)}n!==0&&(n===1?e+="x":(e+="x^",e+=n))}}return e}}class mt extends E{}mt.kind="ArithmeticException";class Oe extends Be{constructor(e,n,i){super(),this.primitive=e,this.size=n,this.generatorBase=i;const l=new Int32Array(n);let u=1;for(let h=0;h<n;h++)l[h]=u,u*=2,u>=n&&(u^=e,u&=n-1);this.expTable=l;const c=new Int32Array(n);for(let h=0;h<n-1;h++)c[l[h]]=h;this.logTable=c,this.zero=new Ne(this,Int32Array.from([0])),this.one=new Ne(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new I;if(n===0)return this.zero;const i=new Int32Array(e+1);return i[0]=n,new Ne(this,i)}inverse(e){if(e===0)throw new mt;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+U.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}Oe.AZTEC_DATA_12=new Oe(4201,4096,1),Oe.AZTEC_DATA_10=new Oe(1033,1024,1),Oe.AZTEC_DATA_6=new Oe(67,64,1),Oe.AZTEC_PARAM=new Oe(19,16,1),Oe.QR_CODE_FIELD_256=new Oe(285,256,0),Oe.DATA_MATRIX_FIELD_256=new Oe(301,256,1),Oe.AZTEC_DATA_8=Oe.DATA_MATRIX_FIELD_256,Oe.MAXICODE_FIELD_64=Oe.AZTEC_DATA_6;class wt extends E{}wt.kind="ReedSolomonException";class Ht extends E{}Ht.kind="IllegalStateException";class $t{constructor(e){this.field=e}decode(e,n){const i=this.field,l=new Ne(i,e),u=new Int32Array(n);let c=!0;for(let z=0;z<n;z++){const G=l.evaluateAt(i.exp(z+i.getGeneratorBase()));u[u.length-1-z]=G,G!==0&&(c=!1)}if(c)return;const h=new Ne(i,u),m=this.runEuclideanAlgorithm(i.buildMonomial(n,1),h,n),v=m[0],N=m[1],P=this.findErrorLocations(v),D=this.findErrorMagnitudes(N,P);for(let z=0;z<P.length;z++){const G=e.length-1-i.log(P[z]);if(G<0)throw new wt("Bad error location");e[G]=Oe.addOrSubtract(e[G],D[z])}}runEuclideanAlgorithm(e,n,i){if(e.getDegree()<n.getDegree()){const z=e;e=n,n=z}const l=this.field;let u=e,c=n,h=l.getZero(),m=l.getOne();for(;c.getDegree()>=(i/2|0);){let z=u,G=h;if(u=c,h=m,u.isZero())throw new wt("r_{i-1} was zero");c=z;let Y=l.getZero();const Q=u.getCoefficient(u.getDegree()),oe=l.inverse(Q);for(;c.getDegree()>=u.getDegree()&&!c.isZero();){const Ce=c.getDegree()-u.getDegree(),Ae=l.multiply(c.getCoefficient(c.getDegree()),oe);Y=Y.addOrSubtract(l.buildMonomial(Ce,Ae)),c=c.addOrSubtract(u.multiplyByMonomial(Ce,Ae))}if(m=Y.multiply(h).addOrSubtract(G),c.getDegree()>=u.getDegree())throw new Ht("Division algorithm failed to reduce polynomial?")}const v=m.getCoefficient(0);if(v===0)throw new wt("sigmaTilde(0) was zero");const N=l.inverse(v),P=m.multiplyScalar(N),D=c.multiplyScalar(N);return[P,D]}findErrorLocations(e){const n=e.getDegree();if(n===1)return Int32Array.from([e.getCoefficient(1)]);const i=new Int32Array(n);let l=0;const u=this.field;for(let c=1;c<u.getSize()&&l<n;c++)e.evaluateAt(c)===0&&(i[l]=u.inverse(c),l++);if(l!==n)throw new wt("Error locator degree does not match number of roots");return i}findErrorMagnitudes(e,n){const i=n.length,l=new Int32Array(i),u=this.field;for(let c=0;c<i;c++){const h=u.inverse(n[c]);let m=1;for(let v=0;v<i;v++)if(c!==v){const N=u.multiply(n[v],h),P=N&1?N&-2:N|1;m=u.multiply(m,P)}l[c]=u.multiply(e.evaluateAt(h),u.inverse(m)),u.getGeneratorBase()!==0&&(l[c]=u.multiply(l[c],h))}return l}}var Rt;(function(_){_[_.UPPER=0]="UPPER",_[_.LOWER=1]="LOWER",_[_.MIXED=2]="MIXED",_[_.DIGIT=3]="DIGIT",_[_.PUNCT=4]="PUNCT",_[_.BINARY=5]="BINARY"})(Rt||(Rt={}));class Tt{decode(e){this.ddata=e;let n=e.getBits(),i=this.extractBits(n),l=this.correctBits(i),u=Tt.convertBoolArrayToByteArray(l),c=Tt.getEncodedData(l),h=new rt(u,c,null,null);return h.setNumBits(l.length),h}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let n=e.length,i=Rt.UPPER,l=Rt.UPPER,u="",c=0;for(;c<n;)if(l===Rt.BINARY){if(n-c<5)break;let h=Tt.readCode(e,c,5);if(c+=5,h===0){if(n-c<11)break;h=Tt.readCode(e,c,11)+31,c+=11}for(let m=0;m<h;m++){if(n-c<8){c=n;break}const v=Tt.readCode(e,c,8);u+=be.castAsNonUtf8Char(v),c+=8}l=i}else{let h=l===Rt.DIGIT?4:5;if(n-c<h)break;let m=Tt.readCode(e,c,h);c+=h;let v=Tt.getCharacter(l,m);v.startsWith("CTRL_")?(i=l,l=Tt.getTable(v.charAt(5)),v.charAt(6)==="L"&&(i=l)):(u+=v,l=i)}return u}static getTable(e){switch(e){case"L":return Rt.LOWER;case"P":return Rt.PUNCT;case"M":return Rt.MIXED;case"D":return Rt.DIGIT;case"B":return Rt.BINARY;case"U":default:return Rt.UPPER}}static getCharacter(e,n){switch(e){case Rt.UPPER:return Tt.UPPER_TABLE[n];case Rt.LOWER:return Tt.LOWER_TABLE[n];case Rt.MIXED:return Tt.MIXED_TABLE[n];case Rt.PUNCT:return Tt.PUNCT_TABLE[n];case Rt.DIGIT:return Tt.DIGIT_TABLE[n];default:throw new Ht("Bad table")}}correctBits(e){let n,i;this.ddata.getNbLayers()<=2?(i=6,n=Oe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(i=8,n=Oe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(i=10,n=Oe.AZTEC_DATA_10):(i=12,n=Oe.AZTEC_DATA_12);let l=this.ddata.getNbDatablocks(),u=e.length/i;if(u<l)throw new q;let c=e.length%i,h=new Int32Array(u);for(let D=0;D<u;D++,c+=i)h[D]=Tt.readCode(e,c,i);try{new $t(n).decode(h,u-l)}catch(D){throw new q(D)}let m=(1<<i)-1,v=0;for(let D=0;D<l;D++){let z=h[D];if(z===0||z===m)throw new q;(z===1||z===m-1)&&v++}let N=new Array(l*i-v),P=0;for(let D=0;D<l;D++){let z=h[D];if(z===1||z===m-1)N.fill(z>1,P,P+i-1),P+=i-1;else for(let G=i-1;G>=0;--G)N[P++]=(z&1<<G)!==0}return N}extractBits(e){let n=this.ddata.isCompact(),i=this.ddata.getNbLayers(),l=(n?11:14)+i*4,u=new Int32Array(l),c=new Array(this.totalBitsInLayer(i,n));if(n)for(let h=0;h<u.length;h++)u[h]=h;else{let h=l+1+2*U.truncDivision(U.truncDivision(l,2)-1,15),m=l/2,v=U.truncDivision(h,2);for(let N=0;N<m;N++){let P=N+U.truncDivision(N,15);u[m-N-1]=v-P-1,u[m+N]=v+P+1}}for(let h=0,m=0;h<i;h++){let v=(i-h)*4+(n?9:12),N=h*2,P=l-1-N;for(let D=0;D<v;D++){let z=D*2;for(let G=0;G<2;G++)c[m+z+G]=e.get(u[N+G],u[N+D]),c[m+2*v+z+G]=e.get(u[N+D],u[P-G]),c[m+4*v+z+G]=e.get(u[P-G],u[P-D]),c[m+6*v+z+G]=e.get(u[P-D],u[N+G])}m+=v*8}return c}static readCode(e,n,i){let l=0;for(let u=n;u<n+i;u++)l<<=1,e[u]&&(l|=1);return l}static readByte(e,n){let i=e.length-n;return i>=8?Tt.readCode(e,n,8):Tt.readCode(e,n,i)<<8-i}static convertBoolArrayToByteArray(e){let n=new Uint8Array((e.length+7)/8);for(let i=0;i<n.length;i++)n[i]=Tt.readByte(e,8*i);return n}totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}Tt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Tt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Tt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Tt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Tt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ht{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,n,i,l){const u=e-i,c=n-l;return Math.sqrt(u*u+c*c)}static sum(e){let n=0;for(let i=0,l=e.length;i!==l;i++){const u=e[i];n+=u}return n}}class sr{static floatToIntBits(e){return e}}sr.MAX_VALUE=Number.MAX_SAFE_INTEGER;class _e{constructor(e,n){this.x=e,this.y=n}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof _e){const n=e;return this.x===n.x&&this.y===n.y}return!1}hashCode(){return 31*sr.floatToIntBits(this.x)+sr.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const n=this.distance(e[0],e[1]),i=this.distance(e[1],e[2]),l=this.distance(e[0],e[2]);let u,c,h;if(i>=n&&i>=l?(c=e[0],u=e[1],h=e[2]):l>=i&&l>=n?(c=e[1],u=e[0],h=e[2]):(c=e[2],u=e[0],h=e[1]),this.crossProductZ(u,c,h)<0){const m=u;u=h,h=m}e[0]=u,e[1]=c,e[2]=h}static distance(e,n){return ht.distance(e.x,e.y,n.x,n.y)}static crossProductZ(e,n,i){const l=n.x,u=n.y;return(i.x-l)*(e.y-u)-(i.y-u)*(e.x-l)}}class xn{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class Lt extends xn{constructor(e,n,i,l,u){super(e,n),this.compact=i,this.nbDatablocks=l,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Fe{constructor(e,n,i,l){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),n==null&&(n=Fe.INIT_SIZE),i==null&&(i=e.getWidth()/2|0),l==null&&(l=e.getHeight()/2|0);const u=n/2|0;if(this.leftInit=i-u,this.rightInit=i+u,this.upInit=l-u,this.downInit=l+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Z}detect(){let e=this.leftInit,n=this.rightInit,i=this.upInit,l=this.downInit,u=!1,c=!0,h=!1,m=!1,v=!1,N=!1,P=!1;const D=this.width,z=this.height;for(;c;){c=!1;let G=!0;for(;(G||!m)&&n<D;)G=this.containsBlackPoint(i,l,n,!1),G?(n++,c=!0,m=!0):m||n++;if(n>=D){u=!0;break}let Y=!0;for(;(Y||!v)&&l<z;)Y=this.containsBlackPoint(e,n,l,!0),Y?(l++,c=!0,v=!0):v||l++;if(l>=z){u=!0;break}let Q=!0;for(;(Q||!N)&&e>=0;)Q=this.containsBlackPoint(i,l,e,!1),Q?(e--,c=!0,N=!0):N||e--;if(e<0){u=!0;break}let oe=!0;for(;(oe||!P)&&i>=0;)oe=this.containsBlackPoint(e,n,i,!0),oe?(i--,c=!0,P=!0):P||i--;if(i<0){u=!0;break}c&&(h=!0)}if(!u&&h){const G=n-e;let Y=null;for(let Ae=1;Y===null&&Ae<G;Ae++)Y=this.getBlackPointOnSegment(e,l-Ae,e+Ae,l);if(Y==null)throw new Z;let Q=null;for(let Ae=1;Q===null&&Ae<G;Ae++)Q=this.getBlackPointOnSegment(e,i+Ae,e+Ae,i);if(Q==null)throw new Z;let oe=null;for(let Ae=1;oe===null&&Ae<G;Ae++)oe=this.getBlackPointOnSegment(n,i+Ae,n-Ae,i);if(oe==null)throw new Z;let Ce=null;for(let Ae=1;Ce===null&&Ae<G;Ae++)Ce=this.getBlackPointOnSegment(n,l-Ae,n-Ae,l);if(Ce==null)throw new Z;return this.centerEdges(Ce,Y,oe,Q)}else throw new Z}getBlackPointOnSegment(e,n,i,l){const u=ht.round(ht.distance(e,n,i,l)),c=(i-e)/u,h=(l-n)/u,m=this.image;for(let v=0;v<u;v++){const N=ht.round(e+v*c),P=ht.round(n+v*h);if(m.get(N,P))return new _e(N,P)}return null}centerEdges(e,n,i,l){const u=e.getX(),c=e.getY(),h=n.getX(),m=n.getY(),v=i.getX(),N=i.getY(),P=l.getX(),D=l.getY(),z=Fe.CORR;return u<this.width/2?[new _e(P-z,D+z),new _e(h+z,m+z),new _e(v-z,N-z),new _e(u+z,c-z)]:[new _e(P+z,D+z),new _e(h+z,m-z),new _e(v-z,N+z),new _e(u-z,c-z)]}containsBlackPoint(e,n,i,l){const u=this.image;if(l){for(let c=e;c<=n;c++)if(u.get(c,i))return!0}else for(let c=e;c<=n;c++)if(u.get(i,c))return!0;return!1}}Fe.INIT_SIZE=10,Fe.CORR=1;class ct{static checkAndNudgePoints(e,n){const i=e.getWidth(),l=e.getHeight();let u=!0;for(let c=0;c<n.length&&u;c+=2){const h=Math.floor(n[c]),m=Math.floor(n[c+1]);if(h<-1||h>i||m<-1||m>l)throw new Z;u=!1,h===-1?(n[c]=0,u=!0):h===i&&(n[c]=i-1,u=!0),m===-1?(n[c+1]=0,u=!0):m===l&&(n[c+1]=l-1,u=!0)}u=!0;for(let c=n.length-2;c>=0&&u;c-=2){const h=Math.floor(n[c]),m=Math.floor(n[c+1]);if(h<-1||h>i||m<-1||m>l)throw new Z;u=!1,h===-1?(n[c]=0,u=!0):h===i&&(n[c]=i-1,u=!0),m===-1?(n[c+1]=0,u=!0):m===l&&(n[c+1]=l-1,u=!0)}}}class it{constructor(e,n,i,l,u,c,h,m,v){this.a11=e,this.a21=n,this.a31=i,this.a12=l,this.a22=u,this.a32=c,this.a13=h,this.a23=m,this.a33=v}static quadrilateralToQuadrilateral(e,n,i,l,u,c,h,m,v,N,P,D,z,G,Y,Q){const oe=it.quadrilateralToSquare(e,n,i,l,u,c,h,m);return it.squareToQuadrilateral(v,N,P,D,z,G,Y,Q).times(oe)}transformPoints(e){const n=e.length,i=this.a11,l=this.a12,u=this.a13,c=this.a21,h=this.a22,m=this.a23,v=this.a31,N=this.a32,P=this.a33;for(let D=0;D<n;D+=2){const z=e[D],G=e[D+1],Y=u*z+m*G+P;e[D]=(i*z+c*G+v)/Y,e[D+1]=(l*z+h*G+N)/Y}}transformPointsWithValues(e,n){const i=this.a11,l=this.a12,u=this.a13,c=this.a21,h=this.a22,m=this.a23,v=this.a31,N=this.a32,P=this.a33,D=e.length;for(let z=0;z<D;z++){const G=e[z],Y=n[z],Q=u*G+m*Y+P;e[z]=(i*G+c*Y+v)/Q,n[z]=(l*G+h*Y+N)/Q}}static squareToQuadrilateral(e,n,i,l,u,c,h,m){const v=e-i+u-h,N=n-l+c-m;if(v===0&&N===0)return new it(i-e,u-i,e,l-n,c-l,n,0,0,1);{const P=i-u,D=h-u,z=l-c,G=m-c,Y=P*G-D*z,Q=(v*G-D*N)/Y,oe=(P*N-v*z)/Y;return new it(i-e+Q*i,h-e+oe*h,e,l-n+Q*l,m-n+oe*m,n,Q,oe,1)}}static quadrilateralToSquare(e,n,i,l,u,c,h,m){return it.squareToQuadrilateral(e,n,i,l,u,c,h,m).buildAdjoint()}buildAdjoint(){return new it(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new it(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class Gn extends ct{sampleGrid(e,n,i,l,u,c,h,m,v,N,P,D,z,G,Y,Q,oe,Ce,Ae){const xe=it.quadrilateralToQuadrilateral(l,u,c,h,m,v,N,P,D,z,G,Y,Q,oe,Ce,Ae);return this.sampleGridWithTransform(e,n,i,xe)}sampleGridWithTransform(e,n,i,l){if(n<=0||i<=0)throw new Z;const u=new De(n,i),c=new Float32Array(2*n);for(let h=0;h<i;h++){const m=c.length,v=h+.5;for(let N=0;N<m;N+=2)c[N]=N/2+.5,c[N+1]=v;l.transformPoints(c),ct.checkAndNudgePoints(e,c);try{for(let N=0;N<m;N+=2)e.get(Math.floor(c[N]),Math.floor(c[N+1]))&&u.set(N/2,h)}catch{throw new Z}}return u}}class vt{static setGridSampler(e){vt.gridSampler=e}static getInstance(){return vt.gridSampler}}vt.gridSampler=new Gn;class At{constructor(e,n){this.x=e,this.y=n}toResultPoint(){return new _e(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class cn{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let n=this.getMatrixCenter(),i=this.getBullsEyeCorners(n);if(e){let c=i[0];i[0]=i[2],i[2]=c}this.extractParameters(i);let l=this.sampleGrid(this.image,i[this.shift%4],i[(this.shift+1)%4],i[(this.shift+2)%4],i[(this.shift+3)%4]),u=this.getMatrixCornerPoints(i);return new Lt(l,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new Z;let n=2*this.nbCenterLayers,i=new Int32Array([this.sampleLine(e[0],e[1],n),this.sampleLine(e[1],e[2],n),this.sampleLine(e[2],e[3],n),this.sampleLine(e[3],e[0],n)]);this.shift=this.getRotation(i,n);let l=0;for(let c=0;c<4;c++){let h=i[(this.shift+c)%4];this.compact?(l<<=7,l+=h>>1&127):(l<<=10,l+=(h>>2&992)+(h>>1&31))}let u=this.getCorrectedParameterData(l,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(e,n){let i=0;e.forEach((l,u,c)=>{let h=(l>>n-2<<1)+(l&1);i=(i<<3)+h}),i=((i&1)<<11)+(i>>1);for(let l=0;l<4;l++)if(U.bitCount(i^this.EXPECTED_CORNER_BITS[l])<=2)return l;throw new Z}getCorrectedParameterData(e,n){let i,l;n?(i=7,l=2):(i=10,l=4);let u=i-l,c=new Int32Array(i);for(let m=i-1;m>=0;--m)c[m]=e&15,e>>=4;try{new $t(Oe.AZTEC_PARAM).decode(c,u)}catch{throw new Z}let h=0;for(let m=0;m<l;m++)h=(h<<4)+c[m];return h}getBullsEyeCorners(e){let n=e,i=e,l=e,u=e,c=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let P=this.getFirstDifferent(n,c,1,-1),D=this.getFirstDifferent(i,c,1,1),z=this.getFirstDifferent(l,c,-1,1),G=this.getFirstDifferent(u,c,-1,-1);if(this.nbCenterLayers>2){let Y=this.distancePoint(G,P)*this.nbCenterLayers/(this.distancePoint(u,n)*(this.nbCenterLayers+2));if(Y<.75||Y>1.25||!this.isWhiteOrBlackRectangle(P,D,z,G))break}n=P,i=D,l=z,u=G,c=!c}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Z;this.compact=this.nbCenterLayers===5;let h=new _e(n.getX()+.5,n.getY()-.5),m=new _e(i.getX()+.5,i.getY()+.5),v=new _e(l.getX()-.5,l.getY()+.5),N=new _e(u.getX()-.5,u.getY()-.5);return this.expandSquare([h,m,v,N],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,n,i,l;try{let h=new Fe(this.image).detect();e=h[0],n=h[1],i=h[2],l=h[3]}catch{let m=this.image.getWidth()/2,v=this.image.getHeight()/2;e=this.getFirstDifferent(new At(m+7,v-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new At(m+7,v+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new At(m-7,v+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new At(m-7,v-7),!1,-1,-1).toResultPoint()}let u=ht.round((e.getX()+l.getX()+n.getX()+i.getX())/4),c=ht.round((e.getY()+l.getY()+n.getY()+i.getY())/4);try{let h=new Fe(this.image,15,u,c).detect();e=h[0],n=h[1],i=h[2],l=h[3]}catch{e=this.getFirstDifferent(new At(u+7,c-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new At(u+7,c+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new At(u-7,c+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new At(u-7,c-7),!1,-1,-1).toResultPoint()}return u=ht.round((e.getX()+l.getX()+n.getX()+i.getX())/4),c=ht.round((e.getY()+l.getY()+n.getY()+i.getY())/4),new At(u,c)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,n,i,l,u){let c=vt.getInstance(),h=this.getDimension(),m=h/2-this.nbCenterLayers,v=h/2+this.nbCenterLayers;return c.sampleGrid(e,h,h,m,m,v,m,v,v,m,v,n.getX(),n.getY(),i.getX(),i.getY(),l.getX(),l.getY(),u.getX(),u.getY())}sampleLine(e,n,i){let l=0,u=this.distanceResultPoint(e,n),c=u/i,h=e.getX(),m=e.getY(),v=c*(n.getX()-e.getX())/u,N=c*(n.getY()-e.getY())/u;for(let P=0;P<i;P++)this.image.get(ht.round(h+P*v),ht.round(m+P*N))&&(l|=1<<i-P-1);return l}isWhiteOrBlackRectangle(e,n,i,l){let u=3;e=new At(e.getX()-u,e.getY()+u),n=new At(n.getX()-u,n.getY()-u),i=new At(i.getX()+u,i.getY()-u),l=new At(l.getX()+u,l.getY()+u);let c=this.getColor(l,e);if(c===0)return!1;let h=this.getColor(e,n);return h!==c||(h=this.getColor(n,i),h!==c)?!1:(h=this.getColor(i,l),h===c)}getColor(e,n){let i=this.distancePoint(e,n),l=(n.getX()-e.getX())/i,u=(n.getY()-e.getY())/i,c=0,h=e.getX(),m=e.getY(),v=this.image.get(e.getX(),e.getY()),N=Math.ceil(i);for(let D=0;D<N;D++)h+=l,m+=u,this.image.get(ht.round(h),ht.round(m))!==v&&c++;let P=c/i;return P>.1&&P<.9?0:P<=.1===v?1:-1}getFirstDifferent(e,n,i,l){let u=e.getX()+i,c=e.getY()+l;for(;this.isValid(u,c)&&this.image.get(u,c)===n;)u+=i,c+=l;for(u-=i,c-=l;this.isValid(u,c)&&this.image.get(u,c)===n;)u+=i;for(u-=i;this.isValid(u,c)&&this.image.get(u,c)===n;)c+=l;return c-=l,new At(u,c)}expandSquare(e,n,i){let l=i/(2*n),u=e[0].getX()-e[2].getX(),c=e[0].getY()-e[2].getY(),h=(e[0].getX()+e[2].getX())/2,m=(e[0].getY()+e[2].getY())/2,v=new _e(h+l*u,m+l*c),N=new _e(h-l*u,m-l*c);u=e[1].getX()-e[3].getX(),c=e[1].getY()-e[3].getY(),h=(e[1].getX()+e[3].getX())/2,m=(e[1].getY()+e[3].getY())/2;let P=new _e(h+l*u,m+l*c),D=new _e(h-l*u,m-l*c);return[v,P,N,D]}isValid(e,n){return e>=0&&e<this.image.getWidth()&&n>0&&n<this.image.getHeight()}isValidPoint(e){let n=ht.round(e.getX()),i=ht.round(e.getY());return this.isValid(n,i)}distancePoint(e,n){return ht.distance(e.getX(),e.getY(),n.getX(),n.getY())}distanceResultPoint(e,n){return ht.distance(e.getX(),e.getY(),n.getX(),n.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(U.truncDivision(this.nbLayers-4,8)+1)+15}}class nn{decode(e,n=null){let i=null,l=new cn(e.getBlackMatrix()),u=null,c=null;try{let N=l.detectMirror(!1);u=N.getPoints(),this.reportFoundResultPoints(n,u),c=new Tt().decode(N)}catch(N){i=N}if(c==null)try{let N=l.detectMirror(!0);u=N.getPoints(),this.reportFoundResultPoints(n,u),c=new Tt().decode(N)}catch(N){throw i??N}let h=new We(c.getText(),c.getRawBytes(),c.getNumBits(),u,Ee.AZTEC,B.currentTimeMillis()),m=c.getByteSegments();m!=null&&h.putMetadata(He.BYTE_SEGMENTS,m);let v=c.getECLevel();return v!=null&&h.putMetadata(He.ERROR_CORRECTION_LEVEL,v),h}reportFoundResultPoints(e,n){if(e!=null){let i=e.get(re.NEED_RESULT_POINT_CALLBACK);i!=null&&n.forEach((l,u,c)=>{i.foundPossibleResultPoint(l)})}}reset(){}}class Xn extends Ge{constructor(e=500){super(new nn,e)}}class xt{decode(e,n){try{return this.doDecode(e,n)}catch{if(n&&n.get(re.TRY_HARDER)===!0&&e.isRotateSupported()){const u=e.rotateCounterClockwise(),c=this.doDecode(u,n),h=c.getResultMetadata();let m=270;h!==null&&h.get(He.ORIENTATION)===!0&&(m=m+h.get(He.ORIENTATION)%360),c.putMetadata(He.ORIENTATION,m);const v=c.getResultPoints();if(v!==null){const N=u.getHeight();for(let P=0;P<v.length;P++)v[P]=new _e(N-v[P].getY()-1,v[P].getX())}return c}else throw new Z}}reset(){}doDecode(e,n){const i=e.getWidth(),l=e.getHeight();let u=new ne(i);const c=n&&n.get(re.TRY_HARDER)===!0,h=Math.max(1,l>>(c?8:5));let m;c?m=l:m=15;const v=Math.trunc(l/2);for(let N=0;N<m;N++){const P=Math.trunc((N+1)/2),D=(N&1)===0,z=v+h*(D?P:-P);if(z<0||z>=l)break;try{u=e.getBlackRow(z,u)}catch{continue}for(let G=0;G<2;G++){if(G===1&&(u.reverse(),n&&n.get(re.NEED_RESULT_POINT_CALLBACK)===!0)){const Y=new Map;n.forEach((Q,oe)=>Y.set(oe,Q)),Y.delete(re.NEED_RESULT_POINT_CALLBACK),n=Y}try{const Y=this.decodeRow(z,u,n);if(G===1){Y.putMetadata(He.ORIENTATION,180);const Q=Y.getResultPoints();Q!==null&&(Q[0]=new _e(i-Q[0].getX()-1,Q[0].getY()),Q[1]=new _e(i-Q[1].getX()-1,Q[1].getY()))}return Y}catch{}}}throw new Z}static recordPattern(e,n,i){const l=i.length;for(let v=0;v<l;v++)i[v]=0;const u=e.getSize();if(n>=u)throw new Z;let c=!e.get(n),h=0,m=n;for(;m<u;){if(e.get(m)!==c)i[h]++;else{if(++h===l)break;i[h]=1,c=!c}m++}if(!(h===l||h===l-1&&m===u))throw new Z}static recordPatternInReverse(e,n,i){let l=i.length,u=e.get(n);for(;n>0&&l>=0;)e.get(--n)!==u&&(l--,u=!u);if(l>=0)throw new Z;xt.recordPattern(e,n+1,i)}static patternMatchVariance(e,n,i){const l=e.length;let u=0,c=0;for(let v=0;v<l;v++)u+=e[v],c+=n[v];if(u<c)return Number.POSITIVE_INFINITY;const h=u/c;i*=h;let m=0;for(let v=0;v<l;v++){const N=e[v],P=n[v]*h,D=N>P?N-P:P-N;if(D>i)return Number.POSITIVE_INFINITY;m+=D}return m/u}}class we extends xt{static findStartPattern(e){const n=e.getSize(),i=e.getNextSet(0);let l=0,u=Int32Array.from([0,0,0,0,0,0]),c=i,h=!1;const m=6;for(let v=i;v<n;v++)if(e.get(v)!==h)u[l]++;else{if(l===m-1){let N=we.MAX_AVG_VARIANCE,P=-1;for(let D=we.CODE_START_A;D<=we.CODE_START_C;D++){const z=xt.patternMatchVariance(u,we.CODE_PATTERNS[D],we.MAX_INDIVIDUAL_VARIANCE);z<N&&(N=z,P=D)}if(P>=0&&e.isRange(Math.max(0,c-(v-c)/2),c,!1))return Int32Array.from([c,v,P]);c+=u[0]+u[1],u=u.slice(2,u.length-1),u[l-1]=0,u[l]=0,l--}else l++;u[l]=1,h=!h}throw new Z}static decodeCode(e,n,i){xt.recordPattern(e,i,n);let l=we.MAX_AVG_VARIANCE,u=-1;for(let c=0;c<we.CODE_PATTERNS.length;c++){const h=we.CODE_PATTERNS[c],m=this.patternMatchVariance(n,h,we.MAX_INDIVIDUAL_VARIANCE);m<l&&(l=m,u=c)}if(u>=0)return u;throw new Z}decodeRow(e,n,i){const l=i&&i.get(re.ASSUME_GS1)===!0,u=we.findStartPattern(n),c=u[2];let h=0;const m=new Uint8Array(20);m[h++]=c;let v;switch(c){case we.CODE_START_A:v=we.CODE_CODE_A;break;case we.CODE_START_B:v=we.CODE_CODE_B;break;case we.CODE_START_C:v=we.CODE_CODE_C;break;default:throw new q}let N=!1,P=!1,D="",z=u[0],G=u[1];const Y=Int32Array.from([0,0,0,0,0,0]);let Q=0,oe=0,Ce=c,Ae=0,xe=!0,gt=!1,ot=!1;for(;!N;){const Yr=P;switch(P=!1,Q=oe,oe=we.decodeCode(n,Y,G),m[h++]=oe,oe!==we.CODE_STOP&&(xe=!0),oe!==we.CODE_STOP&&(Ae++,Ce+=Ae*oe),z=G,G+=Y.reduce((Zi,Qo)=>Zi+Qo,0),oe){case we.CODE_START_A:case we.CODE_START_B:case we.CODE_START_C:throw new q}switch(v){case we.CODE_CODE_A:if(oe<64)ot===gt?D+=String.fromCharCode(32+oe):D+=String.fromCharCode(32+oe+128),ot=!1;else if(oe<96)ot===gt?D+=String.fromCharCode(oe-64):D+=String.fromCharCode(oe+64),ot=!1;else switch(oe!==we.CODE_STOP&&(xe=!1),oe){case we.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case we.CODE_FNC_2:case we.CODE_FNC_3:break;case we.CODE_FNC_4_A:!gt&&ot?(gt=!0,ot=!1):gt&&ot?(gt=!1,ot=!1):ot=!0;break;case we.CODE_SHIFT:P=!0,v=we.CODE_CODE_B;break;case we.CODE_CODE_B:v=we.CODE_CODE_B;break;case we.CODE_CODE_C:v=we.CODE_CODE_C;break;case we.CODE_STOP:N=!0;break}break;case we.CODE_CODE_B:if(oe<96)ot===gt?D+=String.fromCharCode(32+oe):D+=String.fromCharCode(32+oe+128),ot=!1;else switch(oe!==we.CODE_STOP&&(xe=!1),oe){case we.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case we.CODE_FNC_2:case we.CODE_FNC_3:break;case we.CODE_FNC_4_B:!gt&&ot?(gt=!0,ot=!1):gt&&ot?(gt=!1,ot=!1):ot=!0;break;case we.CODE_SHIFT:P=!0,v=we.CODE_CODE_A;break;case we.CODE_CODE_A:v=we.CODE_CODE_A;break;case we.CODE_CODE_C:v=we.CODE_CODE_C;break;case we.CODE_STOP:N=!0;break}break;case we.CODE_CODE_C:if(oe<100)oe<10&&(D+="0"),D+=oe;else switch(oe!==we.CODE_STOP&&(xe=!1),oe){case we.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case we.CODE_CODE_A:v=we.CODE_CODE_A;break;case we.CODE_CODE_B:v=we.CODE_CODE_B;break;case we.CODE_STOP:N=!0;break}break}Yr&&(v=v===we.CODE_CODE_A?we.CODE_CODE_B:we.CODE_CODE_A)}const Qn=G-z;if(G=n.getNextUnset(G),!n.isRange(G,Math.min(n.getSize(),G+(G-z)/2),!1))throw new Z;if(Ce-=Ae*Q,Ce%103!==Q)throw new k;const Sr=D.length;if(Sr===0)throw new Z;Sr>0&&xe&&(v===we.CODE_CODE_C?D=D.substring(0,Sr-2):D=D.substring(0,Sr-1));const Cn=(u[1]+u[0])/2,Dt=z+Qn/2,sn=m.length,Vn=new Uint8Array(sn);for(let Yr=0;Yr<sn;Yr++)Vn[Yr]=m[Yr];const Ti=[new _e(Cn,e),new _e(Dt,e)];return new We(D,Vn,0,Ti,Ee.CODE_128,new Date().getTime())}}we.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],we.MAX_AVG_VARIANCE=.25,we.MAX_INDIVIDUAL_VARIANCE=.7,we.CODE_SHIFT=98,we.CODE_CODE_C=99,we.CODE_CODE_B=100,we.CODE_CODE_A=101,we.CODE_FNC_1=102,we.CODE_FNC_2=97,we.CODE_FNC_3=96,we.CODE_FNC_4_A=101,we.CODE_FNC_4_B=100,we.CODE_START_A=103,we.CODE_START_B=104,we.CODE_START_C=105,we.CODE_STOP=106;class zt extends xt{constructor(e=!1,n=!1){super(),this.usingCheckDigit=e,this.extendedMode=n,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,n,i){let l=this.counters;l.fill(0),this.decodeRowResult="";let u=zt.findAsteriskPattern(n,l),c=n.getNextSet(u[1]),h=n.getSize(),m,v;do{zt.recordPattern(n,c,l);let Y=zt.toNarrowWidePattern(l);if(Y<0)throw new Z;m=zt.patternToChar(Y),this.decodeRowResult+=m,v=c;for(let Q of l)c+=Q;c=n.getNextSet(c)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let N=0;for(let Y of l)N+=Y;let P=c-v-N;if(c!==h&&P*2<N)throw new Z;if(this.usingCheckDigit){let Y=this.decodeRowResult.length-1,Q=0;for(let oe=0;oe<Y;oe++)Q+=zt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(oe));if(this.decodeRowResult.charAt(Y)!==zt.ALPHABET_STRING.charAt(Q%43))throw new k;this.decodeRowResult=this.decodeRowResult.substring(0,Y)}if(this.decodeRowResult.length===0)throw new Z;let D;this.extendedMode?D=zt.decodeExtended(this.decodeRowResult):D=this.decodeRowResult;let z=(u[1]+u[0])/2,G=v+N/2;return new We(D,null,0,[new _e(z,e),new _e(G,e)],Ee.CODE_39,new Date().getTime())}static findAsteriskPattern(e,n){let i=e.getSize(),l=e.getNextSet(0),u=0,c=l,h=!1,m=n.length;for(let v=l;v<i;v++)if(e.get(v)!==h)n[u]++;else{if(u===m-1){if(this.toNarrowWidePattern(n)===zt.ASTERISK_ENCODING&&e.isRange(Math.max(0,c-Math.floor((v-c)/2)),c,!1))return[c,v];c+=n[0]+n[1],n.copyWithin(0,2,2+u-1),n[u-1]=0,n[u]=0,u--}else u++;n[u]=1,h=!h}throw new Z}static toNarrowWidePattern(e){let n=e.length,i=0,l;do{let u=2147483647;for(let m of e)m<u&&m>i&&(u=m);i=u,l=0;let c=0,h=0;for(let m=0;m<n;m++){let v=e[m];v>i&&(h|=1<<n-1-m,l++,c+=v)}if(l===3){for(let m=0;m<n&&l>0;m++){let v=e[m];if(v>i&&(l--,v*2>=c))return-1}return h}}while(l>3);return-1}static patternToChar(e){for(let n=0;n<zt.CHARACTER_ENCODINGS.length;n++)if(zt.CHARACTER_ENCODINGS[n]===e)return zt.ALPHABET_STRING.charAt(n);if(e===zt.ASTERISK_ENCODING)return"*";throw new Z}static decodeExtended(e){let n=e.length,i="";for(let l=0;l<n;l++){let u=e.charAt(l);if(u==="+"||u==="$"||u==="%"||u==="/"){let c=e.charAt(l+1),h="\0";switch(u){case"+":if(c>="A"&&c<="Z")h=String.fromCharCode(c.charCodeAt(0)+32);else throw new q;break;case"$":if(c>="A"&&c<="Z")h=String.fromCharCode(c.charCodeAt(0)-64);else throw new q;break;case"%":if(c>="A"&&c<="E")h=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")h=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")h=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")h=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")h="\0";else if(c==="V")h="@";else if(c==="W")h="`";else if(c==="X"||c==="Y"||c==="Z")h="";else throw new q;break;case"/":if(c>="A"&&c<="O")h=String.fromCharCode(c.charCodeAt(0)-32);else if(c==="Z")h=":";else throw new q;break}i+=h,l++}else i+=u}return i}}zt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",zt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],zt.ASTERISK_ENCODING=148;class Nt extends xt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,n,i){let l=this.decodeStart(n),u=this.decodeEnd(n),c=new Re;Nt.decodeMiddle(n,l[1],u[0],c);let h=c.toString(),m=null;i!=null&&(m=i.get(re.ALLOWED_LENGTHS)),m==null&&(m=Nt.DEFAULT_ALLOWED_LENGTHS);let v=h.length,N=!1,P=0;for(let G of m){if(v===G){N=!0;break}G>P&&(P=G)}if(!N&&v>P&&(N=!0),!N)throw new q;const D=[new _e(l[1],e),new _e(u[0],e)];return new We(h,null,0,D,Ee.ITF,new Date().getTime())}static decodeMiddle(e,n,i,l){let u=new Int32Array(10),c=new Int32Array(5),h=new Int32Array(5);for(u.fill(0),c.fill(0),h.fill(0);n<i;){xt.recordPattern(e,n,u);for(let v=0;v<5;v++){let N=2*v;c[v]=u[N],h[v]=u[N+1]}let m=Nt.decodeDigit(c);l.append(m.toString()),m=this.decodeDigit(h),l.append(m.toString()),u.forEach(function(v){n+=v})}}decodeStart(e){let n=Nt.skipWhiteSpace(e),i=Nt.findGuardPattern(e,n,Nt.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(e,i[0]),i}validateQuietZone(e,n){let i=this.narrowLineWidth*10;i=i<n?i:n;for(let l=n-1;i>0&&l>=0&&!e.get(l);l--)i--;if(i!==0)throw new Z}static skipWhiteSpace(e){const n=e.getSize(),i=e.getNextSet(0);if(i===n)throw new Z;return i}decodeEnd(e){e.reverse();try{let n=Nt.skipWhiteSpace(e),i;try{i=Nt.findGuardPattern(e,n,Nt.END_PATTERN_REVERSED[0])}catch(u){u instanceof Z&&(i=Nt.findGuardPattern(e,n,Nt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,i[0]);let l=i[0];return i[0]=e.getSize()-i[1],i[1]=e.getSize()-l,i}finally{e.reverse()}}static findGuardPattern(e,n,i){let l=i.length,u=new Int32Array(l),c=e.getSize(),h=!1,m=0,v=n;u.fill(0);for(let N=n;N<c;N++)if(e.get(N)!==h)u[m]++;else{if(m===l-1){if(xt.patternMatchVariance(u,i,Nt.MAX_INDIVIDUAL_VARIANCE)<Nt.MAX_AVG_VARIANCE)return[v,N];v+=u[0]+u[1],B.arraycopy(u,2,u,0,m-1),u[m-1]=0,u[m]=0,m--}else m++;u[m]=1,h=!h}throw new Z}static decodeDigit(e){let n=Nt.MAX_AVG_VARIANCE,i=-1,l=Nt.PATTERNS.length;for(let u=0;u<l;u++){let c=Nt.PATTERNS[u],h=xt.patternMatchVariance(e,c,Nt.MAX_INDIVIDUAL_VARIANCE);h<n?(n=h,i=u):h===n&&(i=-1)}if(i>=0)return i%10;throw new Z}}Nt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Nt.MAX_AVG_VARIANCE=.38,Nt.MAX_INDIVIDUAL_VARIANCE=.5,Nt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Nt.START_PATTERN=Int32Array.from([1,1,1,1]),Nt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class jt extends xt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let n=!1,i,l=0,u=Int32Array.from([0,0,0]);for(;!n;){u=Int32Array.from([0,0,0]),i=jt.findGuardPattern(e,l,!1,this.START_END_PATTERN,u);let c=i[0];l=i[1];let h=c-(l-c);h>=0&&(n=e.isRange(h,c,!1))}return i}static checkChecksum(e){return jt.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let i=parseInt(e.charAt(n-1),10);return jt.getStandardUPCEANChecksum(e.substring(0,n-1))===i}static getStandardUPCEANChecksum(e){let n=e.length,i=0;for(let l=n-1;l>=0;l-=2){let u=e.charAt(l).charCodeAt(0)-48;if(u<0||u>9)throw new q;i+=u}i*=3;for(let l=n-2;l>=0;l-=2){let u=e.charAt(l).charCodeAt(0)-48;if(u<0||u>9)throw new q;i+=u}return(1e3-i)%10}static decodeEnd(e,n){return jt.findGuardPattern(e,n,!1,jt.START_END_PATTERN,new Int32Array(jt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,n,i,l){return this.findGuardPattern(e,n,i,l,new Int32Array(l.length))}static findGuardPattern(e,n,i,l,u){let c=e.getSize();n=i?e.getNextUnset(n):e.getNextSet(n);let h=0,m=n,v=l.length,N=i;for(let P=n;P<c;P++)if(e.get(P)!==N)u[h]++;else{if(h===v-1){if(xt.patternMatchVariance(u,l,jt.MAX_INDIVIDUAL_VARIANCE)<jt.MAX_AVG_VARIANCE)return Int32Array.from([m,P]);m+=u[0]+u[1];let D=u.slice(2,u.length-1);for(let z=0;z<h-1;z++)u[z]=D[z];u[h-1]=0,u[h]=0,h--}else h++;u[h]=1,N=!N}throw new Z}static decodeDigit(e,n,i,l){this.recordPattern(e,i,n);let u=this.MAX_AVG_VARIANCE,c=-1,h=l.length;for(let m=0;m<h;m++){let v=l[m],N=xt.patternMatchVariance(n,v,jt.MAX_INDIVIDUAL_VARIANCE);N<u&&(u=N,c=m)}if(c>=0)return c;throw new Z}}jt.MAX_AVG_VARIANCE=.48,jt.MAX_INDIVIDUAL_VARIANCE=.7,jt.START_END_PATTERN=Int32Array.from([1,1,1]),jt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),jt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),jt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ur{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,i){let l=this.decodeRowStringBuffer,u=this.decodeMiddle(n,i,l),c=l.toString(),h=Ur.parseExtensionString(c),m=[new _e((i[0]+i[1])/2,e),new _e(u,e)],v=new We(c,null,0,m,Ee.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&v.putAllMetadata(h),v}decodeMiddle(e,n,i){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=e.getSize(),c=n[1],h=0;for(let v=0;v<5&&c<u;v++){let N=jt.decodeDigit(e,l,c,jt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+N%10);for(let P of l)c+=P;N>=10&&(h|=1<<4-v),v!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(i.length!==5)throw new Z;let m=this.determineCheckDigit(h);if(Ur.extensionChecksum(i.toString())!==m)throw new Z;return c}static extensionChecksum(e){let n=e.length,i=0;for(let l=n-2;l>=0;l-=2)i+=e.charAt(l).charCodeAt(0)-48;i*=3;for(let l=n-1;l>=0;l-=2)i+=e.charAt(l).charCodeAt(0)-48;return i*=3,i%10}determineCheckDigit(e){for(let n=0;n<10;n++)if(e===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new Z}static parseExtensionString(e){if(e.length!==5)return null;let n=Ur.parseExtension5String(e);return n==null?null:new Map([[He.SUGGESTED_PRICE,n]])}static parseExtension5String(e){let n;switch(e.charAt(0)){case"0":n="";break;case"5":n="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n="";break}let i=parseInt(e.substring(1)),l=(i/100).toString(),u=i%100,c=u<10?"0"+u:u.toString();return n+l+"."+c}}class yi{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,i){let l=this.decodeRowStringBuffer,u=this.decodeMiddle(n,i,l),c=l.toString(),h=yi.parseExtensionString(c),m=[new _e((i[0]+i[1])/2,e),new _e(u,e)],v=new We(c,null,0,m,Ee.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&v.putAllMetadata(h),v}decodeMiddle(e,n,i){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=e.getSize(),c=n[1],h=0;for(let m=0;m<2&&c<u;m++){let v=jt.decodeDigit(e,l,c,jt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+v%10);for(let N of l)c+=N;v>=10&&(h|=1<<1-m),m!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(i.length!==2)throw new Z;if(parseInt(i.toString())%4!==h)throw new Z;return c}static parseExtensionString(e){return e.length!==2?null:new Map([[He.ISSUE_NUMBER,parseInt(e)]])}}class Vi{static decodeRow(e,n,i){let l=jt.findGuardPattern(n,i,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Ur().decodeRow(e,n,l)}catch{return new yi().decodeRow(e,n,l)}}}Vi.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class pt extends jt{constructor(){super(),this.decodeRowStringBuffer="",pt.L_AND_G_PATTERNS=pt.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let n=pt.L_PATTERNS[e-10],i=new Int32Array(n.length);for(let l=0;l<n.length;l++)i[l]=n[n.length-l-1];pt.L_AND_G_PATTERNS[e]=i}}decodeRow(e,n,i){let l=pt.findStartGuardPattern(n),u=i==null?null:i.get(re.NEED_RESULT_POINT_CALLBACK);if(u!=null){const xe=new _e((l[0]+l[1])/2,e);u.foundPossibleResultPoint(xe)}let c=this.decodeMiddle(n,l,this.decodeRowStringBuffer),h=c.rowOffset,m=c.resultString;if(u!=null){const xe=new _e(h,e);u.foundPossibleResultPoint(xe)}let v=this.decodeEnd(n,h);if(u!=null){const xe=new _e((v[0]+v[1])/2,e);u.foundPossibleResultPoint(xe)}let N=v[1],P=N+(N-v[0]);if(P>=n.getSize()||!n.isRange(N,P,!1))throw new Z;let D=m.toString();if(D.length<8)throw new q;if(!pt.checkChecksum(D))throw new k;let z=(l[1]+l[0])/2,G=(v[1]+v[0])/2,Y=this.getBarcodeFormat(),Q=[new _e(z,e),new _e(G,e)],oe=new We(D,null,0,Q,Y,new Date().getTime()),Ce=0;try{let xe=Vi.decodeRow(e,n,v[1]);oe.putMetadata(He.UPC_EAN_EXTENSION,xe.getText()),oe.putAllMetadata(xe.getResultMetadata()),oe.addResultPoints(xe.getResultPoints()),Ce=xe.getText().length}catch{}let Ae=i==null?null:i.get(re.ALLOWED_EAN_EXTENSIONS);if(Ae!=null){let xe=!1;for(let gt in Ae)if(Ce.toString()===gt){xe=!0;break}if(!xe)throw new Z}return oe}decodeEnd(e,n){return pt.findGuardPattern(e,n,!1,pt.START_END_PATTERN,new Int32Array(pt.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return pt.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let i=parseInt(e.charAt(n-1),10);return pt.getStandardUPCEANChecksum(e.substring(0,n-1))===i}static getStandardUPCEANChecksum(e){let n=e.length,i=0;for(let l=n-1;l>=0;l-=2){let u=e.charAt(l).charCodeAt(0)-48;if(u<0||u>9)throw new q;i+=u}i*=3;for(let l=n-2;l>=0;l-=2){let u=e.charAt(l).charCodeAt(0)-48;if(u<0||u>9)throw new q;i+=u}return(1e3-i)%10}}class Yn extends pt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,i){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=e.getSize(),c=n[1],h=0;for(let v=0;v<6&&c<u;v++){let N=pt.decodeDigit(e,l,c,pt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+N%10);for(let P of l)c+=P;N>=10&&(h|=1<<5-v)}i=Yn.determineFirstDigit(i,h),c=pt.findGuardPattern(e,c,!0,pt.MIDDLE_PATTERN,new Int32Array(pt.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<6&&c<u;v++){let N=pt.decodeDigit(e,l,c,pt.L_PATTERNS);i+=String.fromCharCode(48+N);for(let P of l)c+=P}return{rowOffset:c,resultString:i}}getBarcodeFormat(){return Ee.EAN_13}static determineFirstDigit(e,n){for(let i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return e=String.fromCharCode(48+i)+e,e;throw new Z}}Yn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class xs extends pt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,i){const l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=e.getSize(),c=n[1];for(let m=0;m<4&&c<u;m++){let v=pt.decodeDigit(e,l,c,pt.L_PATTERNS);i+=String.fromCharCode(48+v);for(let N of l)c+=N}c=pt.findGuardPattern(e,c,!0,pt.MIDDLE_PATTERN,new Int32Array(pt.MIDDLE_PATTERN.length).fill(0))[1];for(let m=0;m<4&&c<u;m++){let v=pt.decodeDigit(e,l,c,pt.L_PATTERNS);i+=String.fromCharCode(48+v);for(let N of l)c+=N}return{rowOffset:c,resultString:i}}getBarcodeFormat(){return Ee.EAN_8}}class wi extends pt{constructor(){super(...arguments),this.ean13Reader=new Yn}getBarcodeFormat(){return Ee.UPC_A}decode(e,n){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,n,i))}decodeMiddle(e,n,i){return this.ean13Reader.decodeMiddle(e,n,i)}maybeReturnResult(e){let n=e.getText();if(n.charAt(0)==="0"){let i=new We(n.substring(1),null,null,e.getResultPoints(),Ee.UPC_A);return e.getResultMetadata()!=null&&i.putAllMetadata(e.getResultMetadata()),i}else throw new Z}reset(){this.ean13Reader.reset()}}class Kn extends pt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,n,i){const l=this.decodeMiddleCounters.map(v=>v);l[0]=0,l[1]=0,l[2]=0,l[3]=0;const u=e.getSize();let c=n[1],h=0;for(let v=0;v<6&&c<u;v++){const N=Kn.decodeDigit(e,l,c,Kn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+N%10);for(let P of l)c+=P;N>=10&&(h|=1<<5-v)}let m=Kn.determineNumSysAndCheckDigit(i,h);return{rowOffset:c,resultString:m}}decodeEnd(e,n){return Kn.findGuardPatternWithoutCounters(e,n,!0,Kn.MIDDLE_END_PATTERN)}checkChecksum(e){return pt.checkChecksum(Kn.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,n){for(let i=0;i<=1;i++)for(let l=0;l<10;l++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][l]){let u=String.fromCharCode(48+i),c=String.fromCharCode(48+l);return u+e+c}throw Z.getNotFoundInstance()}getBarcodeFormat(){return Ee.UPC_E}static convertUPCEtoUPCA(e){const n=e.slice(1,7).split("").map(u=>u.charCodeAt(0)),i=new Re;i.append(e.charAt(0));let l=n[5];switch(l){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(l),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(l);break}return e.length>=8&&i.append(e.charAt(7)),i.toString()}}Kn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Kn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class vi extends xt{constructor(e){super();let n=e==null?null:e.get(re.POSSIBLE_FORMATS),i=[];d(n)?(i.push(new Yn),i.push(new wi),i.push(new xs),i.push(new Kn)):(n.indexOf(Ee.EAN_13)>-1&&i.push(new Yn),n.indexOf(Ee.UPC_A)>-1&&i.push(new wi),n.indexOf(Ee.EAN_8)>-1&&i.push(new xs),n.indexOf(Ee.UPC_E)>-1&&i.push(new Kn)),this.readers=i}decodeRow(e,n,i){for(let l of this.readers)try{const u=l.decodeRow(e,n,i),c=u.getBarcodeFormat()===Ee.EAN_13&&u.getText().charAt(0)==="0",h=i==null?null:i.get(re.POSSIBLE_FORMATS),m=h==null||h.includes(Ee.UPC_A);if(c&&m){const v=u.getRawBytes(),N=new We(u.getText().substring(1),v,v?v.length:null,u.getResultPoints(),Ee.UPC_A);return N.putAllMetadata(u.getResultMetadata()),N}return u}catch{}throw new Z}reset(){for(let e of this.readers)e.reset()}}class rn extends xt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,n){for(let i=0;i<n.length;i++)if(xt.patternMatchVariance(e,n[i],rn.MAX_INDIVIDUAL_VARIANCE)<rn.MAX_AVG_VARIANCE)return i;throw new Z}static count(e){return ht.sum(new Int32Array(e))}static increment(e,n){let i=0,l=n[0];for(let u=1;u<e.length;u++)n[u]>l&&(l=n[u],i=u);e[i]++}static decrement(e,n){let i=0,l=n[0];for(let u=1;u<e.length;u++)n[u]<l&&(l=n[u],i=u);e[i]--}static isFinderPattern(e){let n=e[0]+e[1],i=n+e[2]+e[3],l=n/i;if(l>=rn.MIN_FINDER_PATTERN_RATIO&&l<=rn.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;for(let h of e)h>c&&(c=h),h<u&&(u=h);return c<10*u}return!1}}rn.MAX_AVG_VARIANCE=.2,rn.MAX_INDIVIDUAL_VARIANCE=.45,rn.MIN_FINDER_PATTERN_RATIO=9.5/12,rn.MAX_FINDER_PATTERN_RATIO=12.5/14;class wr{constructor(e,n){this.value=e,this.checksumPortion=n}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof wr))return!1;const n=e;return this.value===n.value&&this.checksumPortion===n.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ci{constructor(e,n,i,l,u){this.value=e,this.startEnd=n,this.value=e,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new _e(i,u)),this.resultPoints.push(new _e(l,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof Ci))return!1;const n=e;return this.value===n.value}hashCode(){return this.value}}class yn{constructor(){}static getRSSvalue(e,n,i){let l=0;for(let m of e)l+=m;let u=0,c=0,h=e.length;for(let m=0;m<h-1;m++){let v;for(v=1,c|=1<<m;v<e[m];v++,c&=~(1<<m)){let N=yn.combins(l-v-1,h-m-2);if(i&&c===0&&l-v-(h-m-1)>=h-m-1&&(N-=yn.combins(l-v-(h-m),h-m-2)),h-m-1>1){let P=0;for(let D=l-v-(h-m-2);D>n;D--)P+=yn.combins(l-v-D-1,h-m-3);N-=P*(h-1-m)}else l-v>n&&N--;u+=N}l-=v}return u}static combins(e,n){let i,l;e-n>n?(l=n,i=e-n):(l=e-n,i=n);let u=1,c=1;for(let h=e;h>i;h--)u*=h,c<=l&&(u/=c,c++);for(;c<=l;)u/=c,c++;return u}}class ys{static buildBitArray(e){let n=e.length*2-1;e[e.length-1].getRightChar()==null&&(n-=1);let i=12*n,l=new ne(i),u=0,h=e[0].getRightChar().getValue();for(let m=11;m>=0;--m)h&1<<m&&l.set(u),u++;for(let m=1;m<e.length;++m){let v=e[m],N=v.getLeftChar().getValue();for(let P=11;P>=0;--P)N&1<<P&&l.set(u),u++;if(v.getRightChar()!=null){let P=v.getRightChar().getValue();for(let D=11;D>=0;--D)P&1<<D&&l.set(u),u++}}return l}}class Zn{constructor(e,n){n?this.decodedInformation=null:(this.finished=e,this.decodedInformation=n)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ws{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class fn extends ws{constructor(e,n){super(e),this.value=n}getValue(){return this.value}isFNC1(){return this.value===fn.FNC1}}fn.FNC1="$";class dr extends ws{constructor(e,n,i){super(e),i?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=n}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Tn extends ws{constructor(e,n,i){if(super(e),n<0||n>10||i<0||i>10)throw new q;this.firstDigit=n,this.secondDigit=i}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Tn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Tn.FNC1}isAnyFNC1(){return this.firstDigit===Tn.FNC1||this.secondDigit===Tn.FNC1}}Tn.FNC1=10;class Pe{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new Z;let n=e.substring(0,2);for(let u of Pe.TWO_DIGIT_DATA_LENGTH)if(u[0]===n)return u[1]===Pe.VARIABLE_LENGTH?Pe.processVariableAI(2,u[2],e):Pe.processFixedAI(2,u[1],e);if(e.length<3)throw new Z;let i=e.substring(0,3);for(let u of Pe.THREE_DIGIT_DATA_LENGTH)if(u[0]===i)return u[1]===Pe.VARIABLE_LENGTH?Pe.processVariableAI(3,u[2],e):Pe.processFixedAI(3,u[1],e);for(let u of Pe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===i)return u[1]===Pe.VARIABLE_LENGTH?Pe.processVariableAI(4,u[2],e):Pe.processFixedAI(4,u[1],e);if(e.length<4)throw new Z;let l=e.substring(0,4);for(let u of Pe.FOUR_DIGIT_DATA_LENGTH)if(u[0]===l)return u[1]===Pe.VARIABLE_LENGTH?Pe.processVariableAI(4,u[2],e):Pe.processFixedAI(4,u[1],e);throw new Z}static processFixedAI(e,n,i){if(i.length<e)throw new Z;let l=i.substring(0,e);if(i.length<e+n)throw new Z;let u=i.substring(e,e+n),c=i.substring(e+n),h="("+l+")"+u,m=Pe.parseFieldsInGeneralPurpose(c);return m==null?h:h+m}static processVariableAI(e,n,i){let l=i.substring(0,e),u;i.length<e+n?u=i.length:u=e+n;let c=i.substring(e,u),h=i.substring(u),m="("+l+")"+c,v=Pe.parseFieldsInGeneralPurpose(h);return v==null?m:m+v}}Pe.VARIABLE_LENGTH=[],Pe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Pe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Pe.VARIABLE_LENGTH,20],["22",Pe.VARIABLE_LENGTH,29],["30",Pe.VARIABLE_LENGTH,8],["37",Pe.VARIABLE_LENGTH,8],["90",Pe.VARIABLE_LENGTH,30],["91",Pe.VARIABLE_LENGTH,30],["92",Pe.VARIABLE_LENGTH,30],["93",Pe.VARIABLE_LENGTH,30],["94",Pe.VARIABLE_LENGTH,30],["95",Pe.VARIABLE_LENGTH,30],["96",Pe.VARIABLE_LENGTH,30],["97",Pe.VARIABLE_LENGTH,3],["98",Pe.VARIABLE_LENGTH,30],["99",Pe.VARIABLE_LENGTH,30]],Pe.THREE_DIGIT_DATA_LENGTH=[["240",Pe.VARIABLE_LENGTH,30],["241",Pe.VARIABLE_LENGTH,30],["242",Pe.VARIABLE_LENGTH,6],["250",Pe.VARIABLE_LENGTH,30],["251",Pe.VARIABLE_LENGTH,30],["253",Pe.VARIABLE_LENGTH,17],["254",Pe.VARIABLE_LENGTH,20],["400",Pe.VARIABLE_LENGTH,30],["401",Pe.VARIABLE_LENGTH,30],["402",17],["403",Pe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Pe.VARIABLE_LENGTH,20],["421",Pe.VARIABLE_LENGTH,15],["422",3],["423",Pe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Pe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Pe.VARIABLE_LENGTH,15],["391",Pe.VARIABLE_LENGTH,18],["392",Pe.VARIABLE_LENGTH,15],["393",Pe.VARIABLE_LENGTH,18],["703",Pe.VARIABLE_LENGTH,30]],Pe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Pe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Pe.VARIABLE_LENGTH,20],["8003",Pe.VARIABLE_LENGTH,30],["8004",Pe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Pe.VARIABLE_LENGTH,30],["8008",Pe.VARIABLE_LENGTH,12],["8018",18],["8020",Pe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Pe.VARIABLE_LENGTH,70],["8200",Pe.VARIABLE_LENGTH,70]];class ti{constructor(e){this.buffer=new Re,this.information=e}decodeAllCodes(e,n){let i=n,l=null;do{let u=this.decodeGeneralPurposeField(i,l),c=Pe.parseFieldsInGeneralPurpose(u.getNewString());if(c!=null&&e.append(c),u.isRemaining()?l=""+u.getRemainingValue():l=null,i===u.getNewPosition())break;i=u.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let n=e;n<e+3;++n)if(this.information.get(n))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(e,4);return u===0?new Tn(this.information.getSize(),Tn.FNC1,Tn.FNC1):new Tn(this.information.getSize(),u-1,Tn.FNC1)}let n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,l=(n-8)%11;return new Tn(e+7,i,l)}extractNumericValueFromBitArray(e,n){return ti.extractNumericValueFromBitArray(this.information,e,n)}static extractNumericValueFromBitArray(e,n,i){let l=0;for(let u=0;u<i;++u)e.get(n+u)&&(l|=1<<i-u-1);return l}decodeGeneralPurposeField(e,n){this.buffer.setLengthToZero(),n!=null&&this.buffer.append(n),this.current.setPosition(e);let i=this.parseBlocks();return i!=null&&i.isRemaining()?new dr(this.current.getPosition(),this.buffer.toString(),i.getRemainingValue()):new dr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,n;do{let i=this.current.getPosition();if(this.current.isAlpha()?(n=this.parseAlphaBlock(),e=n.isFinished()):this.current.isIsoIec646()?(n=this.parseIsoIec646Block(),e=n.isFinished()):(n=this.parseNumericBlock(),e=n.isFinished()),!(i!==this.current.getPosition())&&!e)break}while(!e);return n.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let n;return e.isSecondDigitFNC1()?n=new dr(this.current.getPosition(),this.buffer.toString()):n=new dr(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Zn(!0,n)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let n=new dr(this.current.getPosition(),this.buffer.toString());return new Zn(!0,n)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Zn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new dr(this.current.getPosition(),this.buffer.toString());return new Zn(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Zn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new dr(this.current.getPosition(),this.buffer.toString());return new Zn(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Zn(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+7>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<116)return!0;if(e+8>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(e,8);return l>=232&&l<253}decodeIsoIec646(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new fn(e+5,fn.FNC1);if(n>=5&&n<15)return new fn(e+5,"0"+(n-5));let i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<90)return new fn(e+7,""+(i+1));if(i>=90&&i<116)return new fn(e+7,""+(i+7));let l=this.extractNumericValueFromBitArray(e,8),u;switch(l){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new q}return new fn(e+8,u)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+6>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,6);return i>=16&&i<63}decodeAlphanumeric(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new fn(e+5,fn.FNC1);if(n>=5&&n<15)return new fn(e+5,"0"+(n-5));let i=this.extractNumericValueFromBitArray(e,6);if(i>=32&&i<58)return new fn(e+6,""+(i+33));let l;switch(i){case 58:l="*";break;case 59:l=",";break;case 60:l="-";break;case 61:l=".";break;case 62:l="/";break;default:throw new Ht("Decoding invalid alphanumeric value: "+i)}return new fn(e+6,l)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<5&&n+e<this.information.getSize();++n)if(n===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+n))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let n=e;n<e+3;++n)if(this.information.get(n))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<4&&n+e<this.information.getSize();++n)if(this.information.get(e+n))return!1;return!0}}class vs{constructor(e){this.information=e,this.generalDecoder=new ti(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Sn extends vs{constructor(e){super(e)}encodeCompressedGtin(e,n){e.append("(01)");let i=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,n,i)}encodeCompressedGtinWithoutAI(e,n,i){for(let l=0;l<4;++l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*l,10);u/100===0&&e.append("0"),u/10===0&&e.append("0"),e.append(u)}Sn.appendCheckDigit(e,i)}static appendCheckDigit(e,n){let i=0;for(let l=0;l<13;l++){let u=e.charAt(l+n).charCodeAt(0)-48;i+=l&1?u:3*u}i=10-i%10,i===10&&(i=0),e.append(i)}}Sn.GTIN_SIZE=40;class $n extends Sn{constructor(e){super(e)}parseInformation(){let e=new Re;e.append("(01)");let n=e.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray($n.HEADER_SIZE,4);return e.append(i),this.encodeCompressedGtinWithoutAI(e,$n.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(e,$n.HEADER_SIZE+44)}}$n.HEADER_SIZE=4;class ni extends vs{constructor(e){super(e)}parseInformation(){let e=new Re;return this.getGeneralDecoder().decodeAllCodes(e,ni.HEADER_SIZE)}}ni.HEADER_SIZE=5;class Me extends Sn{constructor(e){super(e)}encodeCompressedWeight(e,n,i){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(e,l);let u=this.checkWeight(l),c=1e5;for(let h=0;h<5;++h)u/c===0&&e.append("0"),c/=10;e.append(u)}}class $e extends Me{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=$e.HEADER_SIZE+Me.GTIN_SIZE+$e.WEIGHT_SIZE)throw new Z;let e=new Re;return this.encodeCompressedGtin(e,$e.HEADER_SIZE),this.encodeCompressedWeight(e,$e.HEADER_SIZE+Me.GTIN_SIZE,$e.WEIGHT_SIZE),e.toString()}}$e.HEADER_SIZE=5,$e.WEIGHT_SIZE=15;class tt extends $e{constructor(e){super(e)}addWeightCode(e,n){e.append("(3103)")}checkWeight(e){return e}}class Ut extends $e{constructor(e){super(e)}addWeightCode(e,n){n<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class je extends Sn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<je.HEADER_SIZE+Sn.GTIN_SIZE)throw new Z;let e=new Re;this.encodeCompressedGtin(e,je.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(je.HEADER_SIZE+Sn.GTIN_SIZE,je.LAST_DIGIT_SIZE);e.append("(392"),e.append(n),e.append(")");let i=this.getGeneralDecoder().decodeGeneralPurposeField(je.HEADER_SIZE+Sn.GTIN_SIZE+je.LAST_DIGIT_SIZE,null);return e.append(i.getNewString()),e.toString()}}je.HEADER_SIZE=8,je.LAST_DIGIT_SIZE=2;class St extends Sn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<St.HEADER_SIZE+Sn.GTIN_SIZE)throw new Z;let e=new Re;this.encodeCompressedGtin(e,St.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(St.HEADER_SIZE+Sn.GTIN_SIZE,St.LAST_DIGIT_SIZE);e.append("(393"),e.append(n),e.append(")");let i=this.getGeneralDecoder().extractNumericValueFromBitArray(St.HEADER_SIZE+Sn.GTIN_SIZE+St.LAST_DIGIT_SIZE,St.FIRST_THREE_DIGITS_SIZE);i/100==0&&e.append("0"),i/10==0&&e.append("0"),e.append(i);let l=this.getGeneralDecoder().decodeGeneralPurposeField(St.HEADER_SIZE+Sn.GTIN_SIZE+St.LAST_DIGIT_SIZE+St.FIRST_THREE_DIGITS_SIZE,null);return e.append(l.getNewString()),e.toString()}}St.HEADER_SIZE=8,St.LAST_DIGIT_SIZE=2,St.FIRST_THREE_DIGITS_SIZE=10;class Bt extends Me{constructor(e,n,i){super(e),this.dateCode=i,this.firstAIdigits=n}parseInformation(){if(this.getInformation().getSize()!=Bt.HEADER_SIZE+Bt.GTIN_SIZE+Bt.WEIGHT_SIZE+Bt.DATE_SIZE)throw new Z;let e=new Re;return this.encodeCompressedGtin(e,Bt.HEADER_SIZE),this.encodeCompressedWeight(e,Bt.HEADER_SIZE+Bt.GTIN_SIZE,Bt.WEIGHT_SIZE),this.encodeCompressedDate(e,Bt.HEADER_SIZE+Bt.GTIN_SIZE+Bt.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,n){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,Bt.DATE_SIZE);if(i==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let l=i%32;i/=32;let u=i%12+1;i/=12;let c=i;c/10==0&&e.append("0"),e.append(c),u/10==0&&e.append("0"),e.append(u),l/10==0&&e.append("0"),e.append(l)}addWeightCode(e,n){e.append("("),e.append(this.firstAIdigits),e.append(n/1e5),e.append(")")}checkWeight(e){return e%1e5}}Bt.HEADER_SIZE=8,Bt.WEIGHT_SIZE=20,Bt.DATE_SIZE=16;function qs(_){try{if(_.get(1))return new $n(_);if(!_.get(2))return new ni(_);switch(ti.extractNumericValueFromBitArray(_,1,4)){case 4:return new tt(_);case 5:return new Ut(_)}switch(ti.extractNumericValueFromBitArray(_,1,5)){case 12:return new je(_);case 13:return new St(_)}switch(ti.extractNumericValueFromBitArray(_,1,7)){case 56:return new Bt(_,"310","11");case 57:return new Bt(_,"320","11");case 58:return new Bt(_,"310","13");case 59:return new Bt(_,"320","13");case 60:return new Bt(_,"310","15");case 61:return new Bt(_,"320","15");case 62:return new Bt(_,"310","17");case 63:return new Bt(_,"320","17")}}catch(e){throw console.log(e),new Ht("unknown decoder: "+_)}}class _t{constructor(e,n,i,l){this.leftchar=e,this.rightchar=n,this.finderpattern=i,this.maybeLast=l}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,n){return e instanceof _t?_t.equalsOrNull(e.leftchar,n.leftchar)&&_t.equalsOrNull(e.rightchar,n.rightchar)&&_t.equalsOrNull(e.finderpattern,n.finderpattern):!1}static equalsOrNull(e,n){return e===null?n===null:_t.equals(e,n)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class or{constructor(e,n,i){this.pairs=e,this.rowNumber=n,this.wasReversed=i}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,n){return e instanceof or?this.checkEqualitity(e,n)&&e.wasReversed===n.wasReversed:!1}checkEqualitity(e,n){if(!e||!n)return;let i;return e.forEach((l,u)=>{n.forEach(c=>{l.getLeftChar().getValue()===c.getLeftChar().getValue()&&l.getRightChar().getValue()===c.getRightChar().getValue()&&l.getFinderPatter().getValue()===c.getFinderPatter().getValue()&&(i=!0)})}),i}}class he extends rn{constructor(e){super(...arguments),this.pairs=new Array(he.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,n,i){this.pairs.length=0,this.startFromEven=!1;try{return he.constructResult(this.decodeRow2pairs(e,n))}catch(l){this.verbose&&console.log(l)}return this.pairs.length=0,this.startFromEven=!0,he.constructResult(this.decodeRow2pairs(e,n))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,n){let i=!1;for(;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,e))}catch(u){if(u instanceof Z){if(!this.pairs.length)throw new Z;i=!0}}if(this.checkChecksum())return this.pairs;let l;if(this.rows.length?l=!0:l=!1,this.storeRow(e,!1),l){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new Z}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let n=null;try{n=this.checkRows(new Array,0)}catch(i){this.verbose&&console.log(i)}return e&&(this.rows=this.rows.reverse()),n}checkRows(e,n){for(let i=n;i<this.rows.length;i++){let l=this.rows[i];this.pairs.length=0;for(let c of e)this.pairs.push(c.getPairs());if(this.pairs.push(l.getPairs()),!he.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(e);u.push(l);try{return this.checkRows(u,i+1)}catch(c){this.verbose&&console.log(c)}}throw new Z}static isValidSequence(e){for(let n of he.FINDER_PATTERN_SEQUENCES){if(e.length>n.length)continue;let i=!0;for(let l=0;l<e.length;l++)if(e[l].getFinderPattern().getValue()!=n[l]){i=!1;break}if(i)return!0}return!1}storeRow(e,n){let i=0,l=!1,u=!1;for(;i<this.rows.length;){let c=this.rows[i];if(c.getRowNumber()>e){u=c.isEquivalent(this.pairs);break}l=c.isEquivalent(this.pairs),i++}u||l||he.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new or(this.pairs,e,n)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,n){for(let i of n)if(i.getPairs().length!==e.length){for(let l of i.getPairs())for(let u of e)if(_t.equals(l,u))break}}static isPartialRow(e,n){for(let i of n){let l=!0;for(let u of e){let c=!1;for(let h of i.getPairs())if(u.equals(h)){c=!0;break}if(!c){l=!1;break}}if(l)return!0}return!1}getRows(){return this.rows}static constructResult(e){let n=ys.buildBitArray(e),l=qs(n).parseInformation(),u=e[0].getFinderPattern().getResultPoints(),c=e[e.length-1].getFinderPattern().getResultPoints(),h=[u[0],u[1],c[0],c[1]];return new We(l,null,null,h,Ee.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),n=e.getLeftChar(),i=e.getRightChar();if(i==null)return!1;let l=i.getChecksumPortion(),u=2;for(let h=1;h<this.pairs.size();++h){let m=this.pairs.get(h);l+=m.getLeftChar().getChecksumPortion(),u++;let v=m.getRightChar();v!=null&&(l+=v.getChecksumPortion(),u++)}return l%=211,211*(u-4)+l==n.getValue()}static getNextSecondBar(e,n){let i;return e.get(n)?(i=e.getNextUnset(n),i=e.getNextSet(i)):(i=e.getNextSet(n),i=e.getNextUnset(i)),i}retrieveNextPair(e,n,i){let l=n.length%2==0;this.startFromEven&&(l=!l);let u,c=!0,h=-1;do this.findNextPair(e,n,h),u=this.parseFoundFinderPattern(e,i,l),u==null?h=he.getNextSecondBar(e,this.startEnd[0]):c=!1;while(c);let m=this.decodeDataCharacter(e,u,l,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new Z;let v;try{v=this.decodeDataCharacter(e,u,l,!1)}catch(N){v=null,this.verbose&&console.log(N)}return new _t(m,v,u,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,n,i){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=e.getSize(),c;i>=0?c=i:this.isEmptyPair(n)?c=0:c=n[n.length-1].getFinderPattern().getStartEnd()[1];let h=n.length%2!=0;this.startFromEven&&(h=!h);let m=!1;for(;c<u&&(m=!e.get(c),!!m);)c++;let v=0,N=c;for(let P=c;P<u;P++)if(e.get(P)!=m)l[v]++;else{if(v==3){if(h&&he.reverseCounters(l),he.isFinderPattern(l)){this.startEnd[0]=N,this.startEnd[1]=P;return}h&&he.reverseCounters(l),N+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,v--}else v++;l[v]=1,m=!m}throw new Z}static reverseCounters(e){let n=e.length;for(let i=0;i<n/2;++i){let l=e[i];e[i]=e[n-i-1],e[n-i-1]=l}}parseFoundFinderPattern(e,n,i){let l,u,c;if(i){let v=this.startEnd[0]-1;for(;v>=0&&!e.get(v);)v--;v++,l=this.startEnd[0]-v,u=v,c=this.startEnd[1]}else u=this.startEnd[0],c=e.getNextUnset(this.startEnd[1]+1),l=c-this.startEnd[1];let h=this.getDecodeFinderCounters();B.arraycopy(h,0,h,1,h.length-1),h[0]=l;let m;try{m=this.parseFinderValue(h,he.FINDER_PATTERNS)}catch{return null}return new Ci(m,[u,c],u,c,n)}decodeDataCharacter(e,n,i,l){let u=this.getDataCharacterCounters();for(let Dt=0;Dt<u.length;Dt++)u[Dt]=0;if(l)he.recordPatternInReverse(e,n.getStartEnd()[0],u);else{he.recordPattern(e,n.getStartEnd()[1],u);for(let Dt=0,sn=u.length-1;Dt<sn;Dt++,sn--){let Vn=u[Dt];u[Dt]=u[sn],u[sn]=Vn}}let c=17,h=ht.sum(new Int32Array(u))/c,m=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(h-m)/m>.3)throw new Z;let v=this.getOddCounts(),N=this.getEvenCounts(),P=this.getOddRoundingErrors(),D=this.getEvenRoundingErrors();for(let Dt=0;Dt<u.length;Dt++){let sn=1*u[Dt]/h,Vn=sn+.5;if(Vn<1){if(sn<.3)throw new Z;Vn=1}else if(Vn>8){if(sn>8.7)throw new Z;Vn=8}let Ti=Dt/2;Dt&1?(N[Ti]=Vn,D[Ti]=sn-Vn):(v[Ti]=Vn,P[Ti]=sn-Vn)}this.adjustOddEvenCounts(c);let z=4*n.getValue()+(i?0:2)+(l?0:1)-1,G=0,Y=0;for(let Dt=v.length-1;Dt>=0;Dt--){if(he.isNotA1left(n,i,l)){let sn=he.WEIGHTS[z][2*Dt];Y+=v[Dt]*sn}G+=v[Dt]}let Q=0;for(let Dt=N.length-1;Dt>=0;Dt--)if(he.isNotA1left(n,i,l)){let sn=he.WEIGHTS[z][2*Dt+1];Q+=N[Dt]*sn}let oe=Y+Q;if(G&1||G>13||G<4)throw new Z;let Ce=(13-G)/2,Ae=he.SYMBOL_WIDEST[Ce],xe=9-Ae,gt=yn.getRSSvalue(v,Ae,!0),ot=yn.getRSSvalue(N,xe,!1),Qn=he.EVEN_TOTAL_SUBSET[Ce],Sr=he.GSUM[Ce],Cn=gt*Qn+ot+Sr;return new wr(Cn,oe)}static isNotA1left(e,n,i){return!(e.getValue()==0&&n&&i)}adjustOddEvenCounts(e){let n=ht.sum(new Int32Array(this.getOddCounts())),i=ht.sum(new Int32Array(this.getEvenCounts())),l=!1,u=!1;n>13?u=!0:n<4&&(l=!0);let c=!1,h=!1;i>13?h=!0:i<4&&(c=!0);let m=n+i-e,v=(n&1)==1,N=(i&1)==0;if(m==1)if(v){if(N)throw new Z;u=!0}else{if(!N)throw new Z;h=!0}else if(m==-1)if(v){if(N)throw new Z;l=!0}else{if(!N)throw new Z;c=!0}else if(m==0){if(v){if(!N)throw new Z;n<i?(l=!0,h=!0):(u=!0,c=!0)}else if(N)throw new Z}else throw new Z;if(l){if(u)throw new Z;he.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&he.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(h)throw new Z;he.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&he.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}he.SYMBOL_WIDEST=[7,5,4,3,1],he.EVEN_TOTAL_SUBSET=[4,20,52,104,204],he.GSUM=[0,348,1388,2948,3988],he.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],he.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],he.FINDER_PAT_A=0,he.FINDER_PAT_B=1,he.FINDER_PAT_C=2,he.FINDER_PAT_D=3,he.FINDER_PAT_E=4,he.FINDER_PAT_F=5,he.FINDER_PATTERN_SEQUENCES=[[he.FINDER_PAT_A,he.FINDER_PAT_A],[he.FINDER_PAT_A,he.FINDER_PAT_B,he.FINDER_PAT_B],[he.FINDER_PAT_A,he.FINDER_PAT_C,he.FINDER_PAT_B,he.FINDER_PAT_D],[he.FINDER_PAT_A,he.FINDER_PAT_E,he.FINDER_PAT_B,he.FINDER_PAT_D,he.FINDER_PAT_C],[he.FINDER_PAT_A,he.FINDER_PAT_E,he.FINDER_PAT_B,he.FINDER_PAT_D,he.FINDER_PAT_D,he.FINDER_PAT_F],[he.FINDER_PAT_A,he.FINDER_PAT_E,he.FINDER_PAT_B,he.FINDER_PAT_D,he.FINDER_PAT_E,he.FINDER_PAT_F,he.FINDER_PAT_F],[he.FINDER_PAT_A,he.FINDER_PAT_A,he.FINDER_PAT_B,he.FINDER_PAT_B,he.FINDER_PAT_C,he.FINDER_PAT_C,he.FINDER_PAT_D,he.FINDER_PAT_D],[he.FINDER_PAT_A,he.FINDER_PAT_A,he.FINDER_PAT_B,he.FINDER_PAT_B,he.FINDER_PAT_C,he.FINDER_PAT_C,he.FINDER_PAT_D,he.FINDER_PAT_E,he.FINDER_PAT_E],[he.FINDER_PAT_A,he.FINDER_PAT_A,he.FINDER_PAT_B,he.FINDER_PAT_B,he.FINDER_PAT_C,he.FINDER_PAT_C,he.FINDER_PAT_D,he.FINDER_PAT_E,he.FINDER_PAT_F,he.FINDER_PAT_F],[he.FINDER_PAT_A,he.FINDER_PAT_A,he.FINDER_PAT_B,he.FINDER_PAT_B,he.FINDER_PAT_C,he.FINDER_PAT_D,he.FINDER_PAT_D,he.FINDER_PAT_E,he.FINDER_PAT_E,he.FINDER_PAT_F,he.FINDER_PAT_F]],he.MAX_PAIRS=11;class Bo extends wr{constructor(e,n,i){super(e,n),this.count=0,this.finderPattern=i}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Mt extends rn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,n,i){const l=this.decodePair(n,!1,e,i);Mt.addOrTally(this.possibleLeftPairs,l),n.reverse();let u=this.decodePair(n,!0,e,i);Mt.addOrTally(this.possibleRightPairs,u),n.reverse();for(let c of this.possibleLeftPairs)if(c.getCount()>1){for(let h of this.possibleRightPairs)if(h.getCount()>1&&Mt.checkChecksum(c,h))return Mt.constructResult(c,h)}throw new Z}static addOrTally(e,n){if(n==null)return;let i=!1;for(let l of e)if(l.getValue()===n.getValue()){l.incrementCount(),i=!0;break}i||e.push(n)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,n){let i=4537077*e.getValue()+n.getValue(),l=new String(i).toString(),u=new Re;for(let v=13-l.length;v>0;v--)u.append("0");u.append(l);let c=0;for(let v=0;v<13;v++){let N=u.charAt(v).charCodeAt(0)-48;c+=v&1?N:3*N}c=10-c%10,c===10&&(c=0),u.append(c.toString());let h=e.getFinderPattern().getResultPoints(),m=n.getFinderPattern().getResultPoints();return new We(u.toString(),null,0,[h[0],h[1],m[0],m[1]],Ee.RSS_14,new Date().getTime())}static checkChecksum(e,n){let i=(e.getChecksumPortion()+16*n.getChecksumPortion())%79,l=9*e.getFinderPattern().getValue()+n.getFinderPattern().getValue();return l>72&&l--,l>8&&l--,i===l}decodePair(e,n,i,l){try{let u=this.findFinderPattern(e,n),c=this.parseFoundFinderPattern(e,i,n,u),h=l==null?null:l.get(re.NEED_RESULT_POINT_CALLBACK);if(h!=null){let N=(u[0]+u[1])/2;n&&(N=e.getSize()-1-N),h.foundPossibleResultPoint(new _e(N,i))}let m=this.decodeDataCharacter(e,c,!0),v=this.decodeDataCharacter(e,c,!1);return new Bo(1597*m.getValue()+v.getValue(),m.getChecksumPortion()+4*v.getChecksumPortion(),c)}catch{return null}}decodeDataCharacter(e,n,i){let l=this.getDataCharacterCounters();for(let Q=0;Q<l.length;Q++)l[Q]=0;if(i)xt.recordPatternInReverse(e,n.getStartEnd()[0],l);else{xt.recordPattern(e,n.getStartEnd()[1]+1,l);for(let Q=0,oe=l.length-1;Q<oe;Q++,oe--){let Ce=l[Q];l[Q]=l[oe],l[oe]=Ce}}let u=i?16:15,c=ht.sum(new Int32Array(l))/u,h=this.getOddCounts(),m=this.getEvenCounts(),v=this.getOddRoundingErrors(),N=this.getEvenRoundingErrors();for(let Q=0;Q<l.length;Q++){let oe=l[Q]/c,Ce=Math.floor(oe+.5);Ce<1?Ce=1:Ce>8&&(Ce=8);let Ae=Math.floor(Q/2);Q&1?(m[Ae]=Ce,N[Ae]=oe-Ce):(h[Ae]=Ce,v[Ae]=oe-Ce)}this.adjustOddEvenCounts(i,u);let P=0,D=0;for(let Q=h.length-1;Q>=0;Q--)D*=9,D+=h[Q],P+=h[Q];let z=0,G=0;for(let Q=m.length-1;Q>=0;Q--)z*=9,z+=m[Q],G+=m[Q];let Y=D+3*z;if(i){if(P&1||P>12||P<4)throw new Z;let Q=(12-P)/2,oe=Mt.OUTSIDE_ODD_WIDEST[Q],Ce=9-oe,Ae=yn.getRSSvalue(h,oe,!1),xe=yn.getRSSvalue(m,Ce,!0),gt=Mt.OUTSIDE_EVEN_TOTAL_SUBSET[Q],ot=Mt.OUTSIDE_GSUM[Q];return new wr(Ae*gt+xe+ot,Y)}else{if(G&1||G>10||G<4)throw new Z;let Q=(10-G)/2,oe=Mt.INSIDE_ODD_WIDEST[Q],Ce=9-oe,Ae=yn.getRSSvalue(h,oe,!0),xe=yn.getRSSvalue(m,Ce,!1),gt=Mt.INSIDE_ODD_TOTAL_SUBSET[Q],ot=Mt.INSIDE_GSUM[Q];return new wr(xe*gt+Ae+ot,Y)}}findFinderPattern(e,n){let i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;let l=e.getSize(),u=!1,c=0;for(;c<l&&(u=!e.get(c),n!==u);)c++;let h=0,m=c;for(let v=c;v<l;v++)if(e.get(v)!==u)i[h]++;else{if(h===3){if(rn.isFinderPattern(i))return[m,v];m+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,h--}else h++;i[h]=1,u=!u}throw new Z}parseFoundFinderPattern(e,n,i,l){let u=e.get(l[0]),c=l[0]-1;for(;c>=0&&u!==e.get(c);)c--;c++;const h=l[0]-c,m=this.getDecodeFinderCounters(),v=new Int32Array(m.length);B.arraycopy(m,0,v,1,m.length-1),v[0]=h;const N=this.parseFinderValue(v,Mt.FINDER_PATTERNS);let P=c,D=l[1];return i&&(P=e.getSize()-1-P,D=e.getSize()-1-D),new Ci(N,[c,l[1]],P,D,n)}adjustOddEvenCounts(e,n){let i=ht.sum(new Int32Array(this.getOddCounts())),l=ht.sum(new Int32Array(this.getEvenCounts())),u=!1,c=!1,h=!1,m=!1;e?(i>12?c=!0:i<4&&(u=!0),l>12?m=!0:l<4&&(h=!0)):(i>11?c=!0:i<5&&(u=!0),l>10?m=!0:l<4&&(h=!0));let v=i+l-n,N=(i&1)===(e?1:0),P=(l&1)===1;if(v===1)if(N){if(P)throw new Z;c=!0}else{if(!P)throw new Z;m=!0}else if(v===-1)if(N){if(P)throw new Z;u=!0}else{if(!P)throw new Z;h=!0}else if(v===0){if(N){if(!P)throw new Z;i<l?(u=!0,m=!0):(c=!0,h=!0)}else if(P)throw new Z}else throw new Z;if(u){if(c)throw new Z;rn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&rn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(m)throw new Z;rn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&rn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Mt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Mt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Mt.OUTSIDE_GSUM=[0,161,961,2015,2715],Mt.INSIDE_GSUM=[0,336,1036,1516],Mt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Mt.INSIDE_ODD_WIDEST=[2,4,6,8],Mt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Wr extends xt{constructor(e,n){super(),this.readers=[],this.verbose=n===!0;const i=e?e.get(re.POSSIBLE_FORMATS):null,l=e&&e.get(re.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;i?((i.includes(Ee.EAN_13)||i.includes(Ee.UPC_A)||i.includes(Ee.EAN_8)||i.includes(Ee.UPC_E))&&this.readers.push(new vi(e)),i.includes(Ee.CODE_39)&&this.readers.push(new zt(l)),i.includes(Ee.CODE_128)&&this.readers.push(new we),i.includes(Ee.ITF)&&this.readers.push(new Nt),i.includes(Ee.RSS_14)&&this.readers.push(new Mt),i.includes(Ee.RSS_EXPANDED)&&this.readers.push(new he(this.verbose))):(this.readers.push(new vi(e)),this.readers.push(new zt),this.readers.push(new vi(e)),this.readers.push(new we),this.readers.push(new Nt),this.readers.push(new Mt),this.readers.push(new he(this.verbose)))}decodeRow(e,n,i){for(let l=0;l<this.readers.length;l++)try{return this.readers[l].decodeRow(e,n,i)}catch{}throw new Z}reset(){this.readers.forEach(e=>e.reset())}}class $a extends Ge{constructor(e=500,n){super(new Wr(n),e,n)}}class It{constructor(e,n,i){this.ecCodewords=e,this.ecBlocks=[n],i&&this.ecBlocks.push(i)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ft{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ct{constructor(e,n,i,l,u,c){this.versionNumber=e,this.symbolSizeRows=n,this.symbolSizeColumns=i,this.dataRegionSizeRows=l,this.dataRegionSizeColumns=u,this.ecBlocks=c;let h=0;const m=c.getECCodewords(),v=c.getECBlocks();for(let N of v)h+=N.getCount()*(N.getDataCodewords()+m);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,n){if(e&1||n&1)throw new q;for(let i of Ct.VERSIONS)if(i.symbolSizeRows===e&&i.symbolSizeColumns===n)return i;throw new q}toString(){return""+this.versionNumber}static buildVersions(){return[new Ct(1,10,10,8,8,new It(5,new ft(1,3))),new Ct(2,12,12,10,10,new It(7,new ft(1,5))),new Ct(3,14,14,12,12,new It(10,new ft(1,8))),new Ct(4,16,16,14,14,new It(12,new ft(1,12))),new Ct(5,18,18,16,16,new It(14,new ft(1,18))),new Ct(6,20,20,18,18,new It(18,new ft(1,22))),new Ct(7,22,22,20,20,new It(20,new ft(1,30))),new Ct(8,24,24,22,22,new It(24,new ft(1,36))),new Ct(9,26,26,24,24,new It(28,new ft(1,44))),new Ct(10,32,32,14,14,new It(36,new ft(1,62))),new Ct(11,36,36,16,16,new It(42,new ft(1,86))),new Ct(12,40,40,18,18,new It(48,new ft(1,114))),new Ct(13,44,44,20,20,new It(56,new ft(1,144))),new Ct(14,48,48,22,22,new It(68,new ft(1,174))),new Ct(15,52,52,24,24,new It(42,new ft(2,102))),new Ct(16,64,64,14,14,new It(56,new ft(2,140))),new Ct(17,72,72,16,16,new It(36,new ft(4,92))),new Ct(18,80,80,18,18,new It(48,new ft(4,114))),new Ct(19,88,88,20,20,new It(56,new ft(4,144))),new Ct(20,96,96,22,22,new It(68,new ft(4,174))),new Ct(21,104,104,24,24,new It(56,new ft(6,136))),new Ct(22,120,120,18,18,new It(68,new ft(6,175))),new Ct(23,132,132,20,20,new It(62,new ft(8,163))),new Ct(24,144,144,22,22,new It(62,new ft(8,156),new ft(2,155))),new Ct(25,8,18,6,16,new It(7,new ft(1,5))),new Ct(26,8,32,6,14,new It(11,new ft(1,10))),new Ct(27,12,26,10,24,new It(14,new ft(1,16))),new Ct(28,12,36,10,16,new It(18,new ft(1,22))),new Ct(29,16,36,14,16,new It(24,new ft(1,32))),new Ct(30,16,48,14,22,new It(28,new ft(1,49)))]}}Ct.VERSIONS=Ct.buildVersions();class ar{constructor(e){const n=e.getHeight();if(n<8||n>144||n&1)throw new q;this.version=ar.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new De(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const n=e.getHeight(),i=e.getWidth();return Ct.getVersionForDimensions(n,i)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let n=0,i=4,l=0;const u=this.mappingBitMatrix.getHeight(),c=this.mappingBitMatrix.getWidth();let h=!1,m=!1,v=!1,N=!1;do if(i===u&&l===0&&!h)e[n++]=this.readCorner1(u,c)&255,i-=2,l+=2,h=!0;else if(i===u-2&&l===0&&c&3&&!m)e[n++]=this.readCorner2(u,c)&255,i-=2,l+=2,m=!0;else if(i===u+4&&l===2&&!(c&7)&&!v)e[n++]=this.readCorner3(u,c)&255,i-=2,l+=2,v=!0;else if(i===u-2&&l===0&&(c&7)===4&&!N)e[n++]=this.readCorner4(u,c)&255,i-=2,l+=2,N=!0;else{do i<u&&l>=0&&!this.readMappingMatrix.get(l,i)&&(e[n++]=this.readUtah(i,l,u,c)&255),i-=2,l+=2;while(i>=0&&l<c);i+=1,l+=3;do i>=0&&l<c&&!this.readMappingMatrix.get(l,i)&&(e[n++]=this.readUtah(i,l,u,c)&255),i+=2,l-=2;while(i<u&&l>=0);i+=3,l+=1}while(i<u||l<c);if(n!==this.version.getTotalCodewords())throw new q;return e}readModule(e,n,i,l){return e<0&&(e+=i,n+=4-(i+4&7)),n<0&&(n+=l,e+=4-(l+4&7)),this.readMappingMatrix.set(n,e),this.mappingBitMatrix.get(n,e)}readUtah(e,n,i,l){let u=0;return this.readModule(e-2,n-2,i,l)&&(u|=1),u<<=1,this.readModule(e-2,n-1,i,l)&&(u|=1),u<<=1,this.readModule(e-1,n-2,i,l)&&(u|=1),u<<=1,this.readModule(e-1,n-1,i,l)&&(u|=1),u<<=1,this.readModule(e-1,n,i,l)&&(u|=1),u<<=1,this.readModule(e,n-2,i,l)&&(u|=1),u<<=1,this.readModule(e,n-1,i,l)&&(u|=1),u<<=1,this.readModule(e,n,i,l)&&(u|=1),u}readCorner1(e,n){let i=0;return this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,1,e,n)&&(i|=1),i<<=1,this.readModule(e-1,2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(2,n-1,e,n)&&(i|=1),i<<=1,this.readModule(3,n-1,e,n)&&(i|=1),i}readCorner2(e,n){let i=0;return this.readModule(e-3,0,e,n)&&(i|=1),i<<=1,this.readModule(e-2,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(0,n-4,e,n)&&(i|=1),i<<=1,this.readModule(0,n-3,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i}readCorner3(e,n){let i=0;return this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(0,n-3,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-3,e,n)&&(i|=1),i<<=1,this.readModule(1,n-2,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i}readCorner4(e,n){let i=0;return this.readModule(e-3,0,e,n)&&(i|=1),i<<=1,this.readModule(e-2,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(2,n-1,e,n)&&(i|=1),i<<=1,this.readModule(3,n-1,e,n)&&(i|=1),i}extractDataRegion(e){const n=this.version.getSymbolSizeRows(),i=this.version.getSymbolSizeColumns();if(e.getHeight()!==n)throw new I("Dimension of bitMatrix must match the version size");const l=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),c=n/l|0,h=i/u|0,m=c*l,v=h*u,N=new De(v,m);for(let P=0;P<c;++P){const D=P*l;for(let z=0;z<h;++z){const G=z*u;for(let Y=0;Y<l;++Y){const Q=P*(l+2)+1+Y,oe=D+Y;for(let Ce=0;Ce<u;++Ce){const Ae=z*(u+2)+1+Ce;if(e.get(Ae,Q)){const xe=G+Ce;N.set(xe,oe)}}}}}return N}}class Fo{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n){const i=n.getECBlocks();let l=0;const u=i.getECBlocks();for(let Y of u)l+=Y.getCount();const c=new Array(l);let h=0;for(let Y of u)for(let Q=0;Q<Y.getCount();Q++){const oe=Y.getDataCodewords(),Ce=i.getECCodewords()+oe;c[h++]=new Fo(oe,new Uint8Array(Ce))}const v=c[0].codewords.length-i.getECCodewords(),N=v-1;let P=0;for(let Y=0;Y<N;Y++)for(let Q=0;Q<h;Q++)c[Q].codewords[Y]=e[P++];const D=n.getVersionNumber()===24,z=D?8:h;for(let Y=0;Y<z;Y++)c[Y].codewords[v-1]=e[P++];const G=c[0].codewords.length;for(let Y=v;Y<G;Y++)for(let Q=0;Q<h;Q++){const oe=D?(Q+8)%h:Q,Ce=D&&oe>7?Y-1:Y;c[oe].codewords[Ce]=e[P++]}if(P!==e.length)throw new I;return c}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class jo{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new I(""+e);let n=0,i=this.bitOffset,l=this.byteOffset;const u=this.bytes;if(i>0){const c=8-i,h=e<c?e:c,m=c-h,v=255>>8-h<<m;n=(u[l]&v)>>m,e-=h,i+=h,i===8&&(i=0,l++)}if(e>0){for(;e>=8;)n=n<<8|u[l]&255,l++,e-=8;if(e>0){const c=8-e,h=255>>c<<c;n=n<<e|(u[l]&h)>>c,i+=e}}return this.bitOffset=i,this.byteOffset=l,n}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var wn;(function(_){_[_.PAD_ENCODE=0]="PAD_ENCODE",_[_.ASCII_ENCODE=1]="ASCII_ENCODE",_[_.C40_ENCODE=2]="C40_ENCODE",_[_.TEXT_ENCODE=3]="TEXT_ENCODE",_[_.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",_[_.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",_[_.BASE256_ENCODE=6]="BASE256_ENCODE"})(wn||(wn={}));class vr{static decode(e){const n=new jo(e),i=new Re,l=new Re,u=new Array;let c=wn.ASCII_ENCODE;do if(c===wn.ASCII_ENCODE)c=this.decodeAsciiSegment(n,i,l);else{switch(c){case wn.C40_ENCODE:this.decodeC40Segment(n,i);break;case wn.TEXT_ENCODE:this.decodeTextSegment(n,i);break;case wn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,i);break;case wn.EDIFACT_ENCODE:this.decodeEdifactSegment(n,i);break;case wn.BASE256_ENCODE:this.decodeBase256Segment(n,i,u);break;default:throw new q}c=wn.ASCII_ENCODE}while(c!==wn.PAD_ENCODE&&n.available()>0);return l.length()>0&&i.append(l.toString()),new rt(e,i.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(e,n,i){let l=!1;do{let u=e.readBits(8);if(u===0)throw new q;if(u<=128)return l&&(u+=128),n.append(String.fromCharCode(u-1)),wn.ASCII_ENCODE;if(u===129)return wn.PAD_ENCODE;if(u<=229){const c=u-130;c<10&&n.append("0"),n.append(""+c)}else switch(u){case 230:return wn.C40_ENCODE;case 231:return wn.BASE256_ENCODE;case 232:n.append("");break;case 233:case 234:break;case 235:l=!0;break;case 236:n.append("[)>05"),i.insert(0,"");break;case 237:n.append("[)>06"),i.insert(0,"");break;case 238:return wn.ANSIX12_ENCODE;case 239:return wn.TEXT_ENCODE;case 240:return wn.EDIFACT_ENCODE;case 241:break;default:if(u!==254||e.available()!==0)throw new q;break}}while(e.available()>0);return wn.ASCII_ENCODE}static decodeC40Segment(e,n){let i=!1;const l=[];let u=0;do{if(e.available()===8)return;const c=e.readBits(8);if(c===254)return;this.parseTwoBytes(c,e.readBits(8),l);for(let h=0;h<3;h++){const m=l[h];switch(u){case 0:if(m<3)u=m+1;else if(m<this.C40_BASIC_SET_CHARS.length){const v=this.C40_BASIC_SET_CHARS[m];i?(n.append(String.fromCharCode(v.charCodeAt(0)+128)),i=!1):n.append(v)}else throw new q;break;case 1:i?(n.append(String.fromCharCode(m+128)),i=!1):n.append(String.fromCharCode(m)),u=0;break;case 2:if(m<this.C40_SHIFT2_SET_CHARS.length){const v=this.C40_SHIFT2_SET_CHARS[m];i?(n.append(String.fromCharCode(v.charCodeAt(0)+128)),i=!1):n.append(v)}else switch(m){case 27:n.append("");break;case 30:i=!0;break;default:throw new q}u=0;break;case 3:i?(n.append(String.fromCharCode(m+224)),i=!1):n.append(String.fromCharCode(m+96)),u=0;break;default:throw new q}}}while(e.available()>0)}static decodeTextSegment(e,n){let i=!1,l=[],u=0;do{if(e.available()===8)return;const c=e.readBits(8);if(c===254)return;this.parseTwoBytes(c,e.readBits(8),l);for(let h=0;h<3;h++){const m=l[h];switch(u){case 0:if(m<3)u=m+1;else if(m<this.TEXT_BASIC_SET_CHARS.length){const v=this.TEXT_BASIC_SET_CHARS[m];i?(n.append(String.fromCharCode(v.charCodeAt(0)+128)),i=!1):n.append(v)}else throw new q;break;case 1:i?(n.append(String.fromCharCode(m+128)),i=!1):n.append(String.fromCharCode(m)),u=0;break;case 2:if(m<this.TEXT_SHIFT2_SET_CHARS.length){const v=this.TEXT_SHIFT2_SET_CHARS[m];i?(n.append(String.fromCharCode(v.charCodeAt(0)+128)),i=!1):n.append(v)}else switch(m){case 27:n.append("");break;case 30:i=!0;break;default:throw new q}u=0;break;case 3:if(m<this.TEXT_SHIFT3_SET_CHARS.length){const v=this.TEXT_SHIFT3_SET_CHARS[m];i?(n.append(String.fromCharCode(v.charCodeAt(0)+128)),i=!1):n.append(v),u=0}else throw new q;break;default:throw new q}}}while(e.available()>0)}static decodeAnsiX12Segment(e,n){const i=[];do{if(e.available()===8)return;const l=e.readBits(8);if(l===254)return;this.parseTwoBytes(l,e.readBits(8),i);for(let u=0;u<3;u++){const c=i[u];switch(c){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(c<14)n.append(String.fromCharCode(c+44));else if(c<40)n.append(String.fromCharCode(c+51));else throw new q;break}}}while(e.available()>0)}static parseTwoBytes(e,n,i){let l=(e<<8)+n-1,u=Math.floor(l/1600);i[0]=u,l-=u*1600,u=Math.floor(l/40),i[1]=u,i[2]=l-u*40}static decodeEdifactSegment(e,n){do{if(e.available()<=16)return;for(let i=0;i<4;i++){let l=e.readBits(6);if(l===31){const u=8-e.getBitOffset();u!==8&&e.readBits(u);return}l&32||(l|=64),n.append(String.fromCharCode(l))}}while(e.available()>0)}static decodeBase256Segment(e,n,i){let l=1+e.getByteOffset();const u=this.unrandomize255State(e.readBits(8),l++);let c;if(u===0?c=e.available()/8|0:u<250?c=u:c=250*(u-249)+this.unrandomize255State(e.readBits(8),l++),c<0)throw new q;const h=new Uint8Array(c);for(let m=0;m<c;m++){if(e.available()<8)throw new q;h[m]=this.unrandomize255State(e.readBits(8),l++)}i.push(h);try{n.append(ke.decode(h,be.ISO88591))}catch(m){throw new Ht("Platform does not support required encoding: "+m.message)}}static unrandomize255State(e,n){const i=149*n%255+1,l=e-i;return l>=0?l:l+256}}vr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],vr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],vr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],vr.TEXT_SHIFT2_SET_CHARS=vr.C40_SHIFT2_SET_CHARS,vr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Qs{constructor(){this.rsDecoder=new $t(Oe.DATA_MATRIX_FIELD_256)}decode(e){const n=new ar(e),i=n.getVersion(),l=n.readCodewords(),u=Fo.getDataBlocks(l,i);let c=0;for(let v of u)c+=v.getNumDataCodewords();const h=new Uint8Array(c),m=u.length;for(let v=0;v<m;v++){const N=u[v],P=N.getCodewords(),D=N.getNumDataCodewords();this.correctErrors(P,D);for(let z=0;z<D;z++)h[z*m+v]=P[z]}return vr.decode(h)}correctErrors(e,n){const i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-n)}catch{throw new k}for(let l=0;l<n;l++)e[l]=i[l]}}class Gt{constructor(e){this.image=e,this.rectangleDetector=new Fe(this.image)}detect(){const e=this.rectangleDetector.detect();let n=this.detectSolid1(e);if(n=this.detectSolid2(n),n[3]=this.correctTopRight(n),!n[3])throw new Z;n=this.shiftToModuleCenter(n);const i=n[0],l=n[1],u=n[2],c=n[3];let h=this.transitionsBetween(i,c)+1,m=this.transitionsBetween(u,c)+1;(h&1)===1&&(h+=1),(m&1)===1&&(m+=1),4*h<7*m&&4*m<7*h&&(h=m=Math.max(h,m));let v=Gt.sampleGrid(this.image,i,l,u,c,h,m);return new xn(v,[i,l,u,c])}static shiftPoint(e,n,i){let l=(n.getX()-e.getX())/(i+1),u=(n.getY()-e.getY())/(i+1);return new _e(e.getX()+l,e.getY()+u)}static moveAway(e,n,i){let l=e.getX(),u=e.getY();return l<n?l-=1:l+=1,u<i?u-=1:u+=1,new _e(l,u)}detectSolid1(e){let n=e[0],i=e[1],l=e[3],u=e[2],c=this.transitionsBetween(n,i),h=this.transitionsBetween(i,l),m=this.transitionsBetween(l,u),v=this.transitionsBetween(u,n),N=c,P=[u,n,i,l];return N>h&&(N=h,P[0]=n,P[1]=i,P[2]=l,P[3]=u),N>m&&(N=m,P[0]=i,P[1]=l,P[2]=u,P[3]=n),N>v&&(P[0]=l,P[1]=u,P[2]=n,P[3]=i),P}detectSolid2(e){let n=e[0],i=e[1],l=e[2],u=e[3],c=this.transitionsBetween(n,u),h=Gt.shiftPoint(i,l,(c+1)*4),m=Gt.shiftPoint(l,i,(c+1)*4),v=this.transitionsBetween(h,n),N=this.transitionsBetween(m,u);return v<N?(e[0]=n,e[1]=i,e[2]=l,e[3]=u):(e[0]=i,e[1]=l,e[2]=u,e[3]=n),e}correctTopRight(e){let n=e[0],i=e[1],l=e[2],u=e[3],c=this.transitionsBetween(n,u),h=this.transitionsBetween(i,u),m=Gt.shiftPoint(n,i,(h+1)*4),v=Gt.shiftPoint(l,i,(c+1)*4);c=this.transitionsBetween(m,u),h=this.transitionsBetween(v,u);let N=new _e(u.getX()+(l.getX()-i.getX())/(c+1),u.getY()+(l.getY()-i.getY())/(c+1)),P=new _e(u.getX()+(n.getX()-i.getX())/(h+1),u.getY()+(n.getY()-i.getY())/(h+1));if(!this.isValid(N))return this.isValid(P)?P:null;if(!this.isValid(P))return N;let D=this.transitionsBetween(m,N)+this.transitionsBetween(v,N),z=this.transitionsBetween(m,P)+this.transitionsBetween(v,P);return D>z?N:P}shiftToModuleCenter(e){let n=e[0],i=e[1],l=e[2],u=e[3],c=this.transitionsBetween(n,u)+1,h=this.transitionsBetween(l,u)+1,m=Gt.shiftPoint(n,i,h*4),v=Gt.shiftPoint(l,i,c*4);c=this.transitionsBetween(m,u)+1,h=this.transitionsBetween(v,u)+1,(c&1)===1&&(c+=1),(h&1)===1&&(h+=1);let N=(n.getX()+i.getX()+l.getX()+u.getX())/4,P=(n.getY()+i.getY()+l.getY()+u.getY())/4;n=Gt.moveAway(n,N,P),i=Gt.moveAway(i,N,P),l=Gt.moveAway(l,N,P),u=Gt.moveAway(u,N,P);let D,z;return m=Gt.shiftPoint(n,i,h*4),m=Gt.shiftPoint(m,u,c*4),D=Gt.shiftPoint(i,n,h*4),D=Gt.shiftPoint(D,l,c*4),v=Gt.shiftPoint(l,u,h*4),v=Gt.shiftPoint(v,i,c*4),z=Gt.shiftPoint(u,l,h*4),z=Gt.shiftPoint(z,n,c*4),[m,D,v,z]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,n,i,l,u,c,h){return vt.getInstance().sampleGrid(e,c,h,.5,.5,c-.5,.5,c-.5,h-.5,.5,h-.5,n.getX(),n.getY(),u.getX(),u.getY(),l.getX(),l.getY(),i.getX(),i.getY())}transitionsBetween(e,n){let i=Math.trunc(e.getX()),l=Math.trunc(e.getY()),u=Math.trunc(n.getX()),c=Math.trunc(n.getY()),h=Math.abs(c-l)>Math.abs(u-i);if(h){let Y=i;i=l,l=Y,Y=u,u=c,c=Y}let m=Math.abs(u-i),v=Math.abs(c-l),N=-m/2,P=l<c?1:-1,D=i<u?1:-1,z=0,G=this.image.get(h?l:i,h?i:l);for(let Y=i,Q=l;Y!==u;Y+=D){let oe=this.image.get(h?Q:Y,h?Y:Q);if(oe!==G&&(z++,G=oe),N+=v,N>0){if(Q===c)break;Q+=P,N-=m}}return z}}class Cr{constructor(){this.decoder=new Qs}decode(e,n=null){let i,l;if(n!=null&&n.has(re.PURE_BARCODE)){const v=Cr.extractPureBits(e.getBlackMatrix());i=this.decoder.decode(v),l=Cr.NO_POINTS}else{const v=new Gt(e.getBlackMatrix()).detect();i=this.decoder.decode(v.getBits()),l=v.getPoints()}const u=i.getRawBytes(),c=new We(i.getText(),u,8*u.length,l,Ee.DATA_MATRIX,B.currentTimeMillis()),h=i.getByteSegments();h!=null&&c.putMetadata(He.BYTE_SEGMENTS,h);const m=i.getECLevel();return m!=null&&c.putMetadata(He.ERROR_CORRECTION_LEVEL,m),c}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(n==null||i==null)throw new Z;const l=this.moduleSize(n,e);let u=n[1];const c=i[1];let h=n[0];const v=(i[0]-h+1)/l,N=(c-u+1)/l;if(v<=0||N<=0)throw new Z;const P=l/2;u+=P,h+=P;const D=new De(v,N);for(let z=0;z<N;z++){const G=u+z*l;for(let Y=0;Y<v;Y++)e.get(h+Y*l,G)&&D.set(Y,z)}return D}static moduleSize(e,n){const i=n.getWidth();let l=e[0];const u=e[1];for(;l<i&&n.get(l,u);)l++;if(l===i)throw new Z;const c=l-e[0];if(c===0)throw new Z;return c}}Cr.NO_POINTS=[];class Du extends Ge{constructor(e=500){super(new Cr,e)}}var zi;(function(_){_[_.L=0]="L",_[_.M=1]="M",_[_.Q=2]="Q",_[_.H=3]="H"})(zi||(zi={}));class Ft{constructor(e,n,i){this.value=e,this.stringValue=n,this.bits=i,Ft.FOR_BITS.set(i,this),Ft.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return Ft.L;case"M":return Ft.M;case"Q":return Ft.Q;case"H":return Ft.H;default:throw new S(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof Ft))return!1;const n=e;return this.value===n.value}static forBits(e){if(e<0||e>=Ft.FOR_BITS.size)throw new I;return Ft.FOR_BITS.get(e)}}Ft.FOR_BITS=new Map,Ft.FOR_VALUE=new Map,Ft.L=new Ft(zi.L,"L",1),Ft.M=new Ft(zi.M,"M",0),Ft.Q=new Ft(zi.Q,"Q",3),Ft.H=new Ft(zi.H,"H",2);class In{constructor(e){this.errorCorrectionLevel=Ft.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,n){return U.bitCount(e^n)}static decodeFormatInformation(e,n){const i=In.doDecodeFormatInformation(e,n);return i!==null?i:In.doDecodeFormatInformation(e^In.FORMAT_INFO_MASK_QR,n^In.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,n){let i=Number.MAX_SAFE_INTEGER,l=0;for(const u of In.FORMAT_INFO_DECODE_LOOKUP){const c=u[0];if(c===e||c===n)return new In(u[1]);let h=In.numBitsDiffering(e,c);h<i&&(l=u[1],i=h),e!==n&&(h=In.numBitsDiffering(n,c),h<i&&(l=u[1],i=h))}return i<=3?new In(l):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof In))return!1;const n=e;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask}}In.FORMAT_INFO_MASK_QR=21522,In.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ee{constructor(e,...n){this.ecCodewordsPerBlock=e,this.ecBlocks=n}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const n=this.ecBlocks;for(const i of n)e+=i.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class F{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ye{constructor(e,n,...i){this.versionNumber=e,this.alignmentPatternCenters=n,this.ecBlocks=i;let l=0;const u=i[0].getECCodewordsPerBlock(),c=i[0].getECBlocks();for(const h of c)l+=h.getCount()*(h.getDataCodewords()+u);this.totalCodewords=l}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new q;try{return this.getVersionForNumber((e-17)/4)}catch{throw new q}}static getVersionForNumber(e){if(e<1||e>40)throw new I;return Ye.VERSIONS[e-1]}static decodeVersionInformation(e){let n=Number.MAX_SAFE_INTEGER,i=0;for(let l=0;l<Ye.VERSION_DECODE_INFO.length;l++){const u=Ye.VERSION_DECODE_INFO[l];if(u===e)return Ye.getVersionForNumber(l+7);const c=In.numBitsDiffering(e,u);c<n&&(i=l+7,n=c)}return n<=3?Ye.getVersionForNumber(i):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),n=new De(e);n.setRegion(0,0,9,9),n.setRegion(e-8,0,8,9),n.setRegion(0,e-8,9,8);const i=this.alignmentPatternCenters.length;for(let l=0;l<i;l++){const u=this.alignmentPatternCenters[l]-2;for(let c=0;c<i;c++)l===0&&(c===0||c===i-1)||l===i-1&&c===0||n.setRegion(this.alignmentPatternCenters[c]-2,u,5,5)}return n.setRegion(6,9,1,e-17),n.setRegion(9,6,e-17,1),this.versionNumber>6&&(n.setRegion(e-11,0,3,6),n.setRegion(0,e-11,6,3)),n}toString(){return""+this.versionNumber}}Ye.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ye.VERSIONS=[new Ye(1,new Int32Array(0),new ee(7,new F(1,19)),new ee(10,new F(1,16)),new ee(13,new F(1,13)),new ee(17,new F(1,9))),new Ye(2,Int32Array.from([6,18]),new ee(10,new F(1,34)),new ee(16,new F(1,28)),new ee(22,new F(1,22)),new ee(28,new F(1,16))),new Ye(3,Int32Array.from([6,22]),new ee(15,new F(1,55)),new ee(26,new F(1,44)),new ee(18,new F(2,17)),new ee(22,new F(2,13))),new Ye(4,Int32Array.from([6,26]),new ee(20,new F(1,80)),new ee(18,new F(2,32)),new ee(26,new F(2,24)),new ee(16,new F(4,9))),new Ye(5,Int32Array.from([6,30]),new ee(26,new F(1,108)),new ee(24,new F(2,43)),new ee(18,new F(2,15),new F(2,16)),new ee(22,new F(2,11),new F(2,12))),new Ye(6,Int32Array.from([6,34]),new ee(18,new F(2,68)),new ee(16,new F(4,27)),new ee(24,new F(4,19)),new ee(28,new F(4,15))),new Ye(7,Int32Array.from([6,22,38]),new ee(20,new F(2,78)),new ee(18,new F(4,31)),new ee(18,new F(2,14),new F(4,15)),new ee(26,new F(4,13),new F(1,14))),new Ye(8,Int32Array.from([6,24,42]),new ee(24,new F(2,97)),new ee(22,new F(2,38),new F(2,39)),new ee(22,new F(4,18),new F(2,19)),new ee(26,new F(4,14),new F(2,15))),new Ye(9,Int32Array.from([6,26,46]),new ee(30,new F(2,116)),new ee(22,new F(3,36),new F(2,37)),new ee(20,new F(4,16),new F(4,17)),new ee(24,new F(4,12),new F(4,13))),new Ye(10,Int32Array.from([6,28,50]),new ee(18,new F(2,68),new F(2,69)),new ee(26,new F(4,43),new F(1,44)),new ee(24,new F(6,19),new F(2,20)),new ee(28,new F(6,15),new F(2,16))),new Ye(11,Int32Array.from([6,30,54]),new ee(20,new F(4,81)),new ee(30,new F(1,50),new F(4,51)),new ee(28,new F(4,22),new F(4,23)),new ee(24,new F(3,12),new F(8,13))),new Ye(12,Int32Array.from([6,32,58]),new ee(24,new F(2,92),new F(2,93)),new ee(22,new F(6,36),new F(2,37)),new ee(26,new F(4,20),new F(6,21)),new ee(28,new F(7,14),new F(4,15))),new Ye(13,Int32Array.from([6,34,62]),new ee(26,new F(4,107)),new ee(22,new F(8,37),new F(1,38)),new ee(24,new F(8,20),new F(4,21)),new ee(22,new F(12,11),new F(4,12))),new Ye(14,Int32Array.from([6,26,46,66]),new ee(30,new F(3,115),new F(1,116)),new ee(24,new F(4,40),new F(5,41)),new ee(20,new F(11,16),new F(5,17)),new ee(24,new F(11,12),new F(5,13))),new Ye(15,Int32Array.from([6,26,48,70]),new ee(22,new F(5,87),new F(1,88)),new ee(24,new F(5,41),new F(5,42)),new ee(30,new F(5,24),new F(7,25)),new ee(24,new F(11,12),new F(7,13))),new Ye(16,Int32Array.from([6,26,50,74]),new ee(24,new F(5,98),new F(1,99)),new ee(28,new F(7,45),new F(3,46)),new ee(24,new F(15,19),new F(2,20)),new ee(30,new F(3,15),new F(13,16))),new Ye(17,Int32Array.from([6,30,54,78]),new ee(28,new F(1,107),new F(5,108)),new ee(28,new F(10,46),new F(1,47)),new ee(28,new F(1,22),new F(15,23)),new ee(28,new F(2,14),new F(17,15))),new Ye(18,Int32Array.from([6,30,56,82]),new ee(30,new F(5,120),new F(1,121)),new ee(26,new F(9,43),new F(4,44)),new ee(28,new F(17,22),new F(1,23)),new ee(28,new F(2,14),new F(19,15))),new Ye(19,Int32Array.from([6,30,58,86]),new ee(28,new F(3,113),new F(4,114)),new ee(26,new F(3,44),new F(11,45)),new ee(26,new F(17,21),new F(4,22)),new ee(26,new F(9,13),new F(16,14))),new Ye(20,Int32Array.from([6,34,62,90]),new ee(28,new F(3,107),new F(5,108)),new ee(26,new F(3,41),new F(13,42)),new ee(30,new F(15,24),new F(5,25)),new ee(28,new F(15,15),new F(10,16))),new Ye(21,Int32Array.from([6,28,50,72,94]),new ee(28,new F(4,116),new F(4,117)),new ee(26,new F(17,42)),new ee(28,new F(17,22),new F(6,23)),new ee(30,new F(19,16),new F(6,17))),new Ye(22,Int32Array.from([6,26,50,74,98]),new ee(28,new F(2,111),new F(7,112)),new ee(28,new F(17,46)),new ee(30,new F(7,24),new F(16,25)),new ee(24,new F(34,13))),new Ye(23,Int32Array.from([6,30,54,78,102]),new ee(30,new F(4,121),new F(5,122)),new ee(28,new F(4,47),new F(14,48)),new ee(30,new F(11,24),new F(14,25)),new ee(30,new F(16,15),new F(14,16))),new Ye(24,Int32Array.from([6,28,54,80,106]),new ee(30,new F(6,117),new F(4,118)),new ee(28,new F(6,45),new F(14,46)),new ee(30,new F(11,24),new F(16,25)),new ee(30,new F(30,16),new F(2,17))),new Ye(25,Int32Array.from([6,32,58,84,110]),new ee(26,new F(8,106),new F(4,107)),new ee(28,new F(8,47),new F(13,48)),new ee(30,new F(7,24),new F(22,25)),new ee(30,new F(22,15),new F(13,16))),new Ye(26,Int32Array.from([6,30,58,86,114]),new ee(28,new F(10,114),new F(2,115)),new ee(28,new F(19,46),new F(4,47)),new ee(28,new F(28,22),new F(6,23)),new ee(30,new F(33,16),new F(4,17))),new Ye(27,Int32Array.from([6,34,62,90,118]),new ee(30,new F(8,122),new F(4,123)),new ee(28,new F(22,45),new F(3,46)),new ee(30,new F(8,23),new F(26,24)),new ee(30,new F(12,15),new F(28,16))),new Ye(28,Int32Array.from([6,26,50,74,98,122]),new ee(30,new F(3,117),new F(10,118)),new ee(28,new F(3,45),new F(23,46)),new ee(30,new F(4,24),new F(31,25)),new ee(30,new F(11,15),new F(31,16))),new Ye(29,Int32Array.from([6,30,54,78,102,126]),new ee(30,new F(7,116),new F(7,117)),new ee(28,new F(21,45),new F(7,46)),new ee(30,new F(1,23),new F(37,24)),new ee(30,new F(19,15),new F(26,16))),new Ye(30,Int32Array.from([6,26,52,78,104,130]),new ee(30,new F(5,115),new F(10,116)),new ee(28,new F(19,47),new F(10,48)),new ee(30,new F(15,24),new F(25,25)),new ee(30,new F(23,15),new F(25,16))),new Ye(31,Int32Array.from([6,30,56,82,108,134]),new ee(30,new F(13,115),new F(3,116)),new ee(28,new F(2,46),new F(29,47)),new ee(30,new F(42,24),new F(1,25)),new ee(30,new F(23,15),new F(28,16))),new Ye(32,Int32Array.from([6,34,60,86,112,138]),new ee(30,new F(17,115)),new ee(28,new F(10,46),new F(23,47)),new ee(30,new F(10,24),new F(35,25)),new ee(30,new F(19,15),new F(35,16))),new Ye(33,Int32Array.from([6,30,58,86,114,142]),new ee(30,new F(17,115),new F(1,116)),new ee(28,new F(14,46),new F(21,47)),new ee(30,new F(29,24),new F(19,25)),new ee(30,new F(11,15),new F(46,16))),new Ye(34,Int32Array.from([6,34,62,90,118,146]),new ee(30,new F(13,115),new F(6,116)),new ee(28,new F(14,46),new F(23,47)),new ee(30,new F(44,24),new F(7,25)),new ee(30,new F(59,16),new F(1,17))),new Ye(35,Int32Array.from([6,30,54,78,102,126,150]),new ee(30,new F(12,121),new F(7,122)),new ee(28,new F(12,47),new F(26,48)),new ee(30,new F(39,24),new F(14,25)),new ee(30,new F(22,15),new F(41,16))),new Ye(36,Int32Array.from([6,24,50,76,102,128,154]),new ee(30,new F(6,121),new F(14,122)),new ee(28,new F(6,47),new F(34,48)),new ee(30,new F(46,24),new F(10,25)),new ee(30,new F(2,15),new F(64,16))),new Ye(37,Int32Array.from([6,28,54,80,106,132,158]),new ee(30,new F(17,122),new F(4,123)),new ee(28,new F(29,46),new F(14,47)),new ee(30,new F(49,24),new F(10,25)),new ee(30,new F(24,15),new F(46,16))),new Ye(38,Int32Array.from([6,32,58,84,110,136,162]),new ee(30,new F(4,122),new F(18,123)),new ee(28,new F(13,46),new F(32,47)),new ee(30,new F(48,24),new F(14,25)),new ee(30,new F(42,15),new F(32,16))),new Ye(39,Int32Array.from([6,26,54,82,110,138,166]),new ee(30,new F(20,117),new F(4,118)),new ee(28,new F(40,47),new F(7,48)),new ee(30,new F(43,24),new F(22,25)),new ee(30,new F(10,15),new F(67,16))),new Ye(40,Int32Array.from([6,30,58,86,114,142,170]),new ee(30,new F(19,118),new F(6,119)),new ee(28,new F(18,47),new F(31,48)),new ee(30,new F(34,24),new F(34,25)),new ee(30,new F(20,15),new F(61,16)))];var dn;(function(_){_[_.DATA_MASK_000=0]="DATA_MASK_000",_[_.DATA_MASK_001=1]="DATA_MASK_001",_[_.DATA_MASK_010=2]="DATA_MASK_010",_[_.DATA_MASK_011=3]="DATA_MASK_011",_[_.DATA_MASK_100=4]="DATA_MASK_100",_[_.DATA_MASK_101=5]="DATA_MASK_101",_[_.DATA_MASK_110=6]="DATA_MASK_110",_[_.DATA_MASK_111=7]="DATA_MASK_111"})(dn||(dn={}));class dt{constructor(e,n){this.value=e,this.isMasked=n}unmaskBitMatrix(e,n){for(let i=0;i<n;i++)for(let l=0;l<n;l++)this.isMasked(i,l)&&e.flip(l,i)}}dt.values=new Map([[dn.DATA_MASK_000,new dt(dn.DATA_MASK_000,(_,e)=>(_+e&1)===0)],[dn.DATA_MASK_001,new dt(dn.DATA_MASK_001,(_,e)=>(_&1)===0)],[dn.DATA_MASK_010,new dt(dn.DATA_MASK_010,(_,e)=>e%3===0)],[dn.DATA_MASK_011,new dt(dn.DATA_MASK_011,(_,e)=>(_+e)%3===0)],[dn.DATA_MASK_100,new dt(dn.DATA_MASK_100,(_,e)=>(Math.floor(_/2)+Math.floor(e/3)&1)===0)],[dn.DATA_MASK_101,new dt(dn.DATA_MASK_101,(_,e)=>_*e%6===0)],[dn.DATA_MASK_110,new dt(dn.DATA_MASK_110,(_,e)=>_*e%6<3)],[dn.DATA_MASK_111,new dt(dn.DATA_MASK_111,(_,e)=>(_+e+_*e%3&1)===0)]]);class qa{constructor(e){const n=e.getHeight();if(n<21||(n&3)!==1)throw new q;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let u=0;u<6;u++)e=this.copyBit(u,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let u=5;u>=0;u--)e=this.copyBit(8,u,e);const n=this.bitMatrix.getHeight();let i=0;const l=n-7;for(let u=n-1;u>=l;u--)i=this.copyBit(8,u,i);for(let u=n-8;u<n;u++)i=this.copyBit(u,8,i);if(this.parsedFormatInfo=In.decodeFormatInformation(e,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new q}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),n=Math.floor((e-17)/4);if(n<=6)return Ye.getVersionForNumber(n);let i=0;const l=e-11;for(let c=5;c>=0;c--)for(let h=e-9;h>=l;h--)i=this.copyBit(h,c,i);let u=Ye.decodeVersionInformation(i);if(u!==null&&u.getDimensionForVersion()===e)return this.parsedVersion=u,u;i=0;for(let c=5;c>=0;c--)for(let h=e-9;h>=l;h--)i=this.copyBit(c,h,i);if(u=Ye.decodeVersionInformation(i),u!==null&&u.getDimensionForVersion()===e)return this.parsedVersion=u,u;throw new q}copyBit(e,n,i){return(this.isMirror?this.bitMatrix.get(n,e):this.bitMatrix.get(e,n))?i<<1|1:i<<1}readCodewords(){const e=this.readFormatInformation(),n=this.readVersion(),i=dt.values.get(e.getDataMask()),l=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,l);const u=n.buildFunctionPattern();let c=!0;const h=new Uint8Array(n.getTotalCodewords());let m=0,v=0,N=0;for(let P=l-1;P>0;P-=2){P===6&&P--;for(let D=0;D<l;D++){const z=c?l-1-D:D;for(let G=0;G<2;G++)u.get(P-G,z)||(N++,v<<=1,this.bitMatrix.get(P-G,z)&&(v|=1),N===8&&(h[m++]=v,N=0,v=0))}c=!c}if(m!==n.getTotalCodewords())throw new q;return h}remask(){if(this.parsedFormatInfo===null)return;const e=dt.values[this.parsedFormatInfo.getDataMask()],n=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,n)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let n=0,i=e.getWidth();n<i;n++)for(let l=n+1,u=e.getHeight();l<u;l++)e.get(n,l)!==e.get(l,n)&&(e.flip(l,n),e.flip(n,l))}}class Js{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n,i){if(e.length!==n.getTotalCodewords())throw new I;const l=n.getECBlocksForLevel(i);let u=0;const c=l.getECBlocks();for(const G of c)u+=G.getCount();const h=new Array(u);let m=0;for(const G of c)for(let Y=0;Y<G.getCount();Y++){const Q=G.getDataCodewords(),oe=l.getECCodewordsPerBlock()+Q;h[m++]=new Js(Q,new Uint8Array(oe))}const v=h[0].codewords.length;let N=h.length-1;for(;N>=0&&h[N].codewords.length!==v;)N--;N++;const P=v-l.getECCodewordsPerBlock();let D=0;for(let G=0;G<P;G++)for(let Y=0;Y<m;Y++)h[Y].codewords[G]=e[D++];for(let G=N;G<m;G++)h[G].codewords[P]=e[D++];const z=h[0].codewords.length;for(let G=P;G<z;G++)for(let Y=0;Y<m;Y++){const Q=Y<N?G:G+1;h[Y].codewords[Q]=e[D++]}return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var qn;(function(_){_[_.TERMINATOR=0]="TERMINATOR",_[_.NUMERIC=1]="NUMERIC",_[_.ALPHANUMERIC=2]="ALPHANUMERIC",_[_.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",_[_.BYTE=4]="BYTE",_[_.ECI=5]="ECI",_[_.KANJI=6]="KANJI",_[_.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",_[_.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",_[_.HANZI=9]="HANZI"})(qn||(qn={}));class Ke{constructor(e,n,i,l){this.value=e,this.stringValue=n,this.characterCountBitsForVersions=i,this.bits=l,Ke.FOR_BITS.set(l,this),Ke.FOR_VALUE.set(e,this)}static forBits(e){const n=Ke.FOR_BITS.get(e);if(n===void 0)throw new I;return n}getCharacterCountBits(e){const n=e.getVersionNumber();let i;return n<=9?i=0:n<=26?i=1:i=2,this.characterCountBitsForVersions[i]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof Ke))return!1;const n=e;return this.value===n.value}toString(){return this.stringValue}}Ke.FOR_BITS=new Map,Ke.FOR_VALUE=new Map,Ke.TERMINATOR=new Ke(qn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ke.NUMERIC=new Ke(qn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ke.ALPHANUMERIC=new Ke(qn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ke.STRUCTURED_APPEND=new Ke(qn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ke.BYTE=new Ke(qn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ke.ECI=new Ke(qn.ECI,"ECI",Int32Array.from([0,0,0]),7),Ke.KANJI=new Ke(qn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ke.FNC1_FIRST_POSITION=new Ke(qn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ke.FNC1_SECOND_POSITION=new Ke(qn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ke.HANZI=new Ke(qn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Xt{static decode(e,n,i,l){const u=new jo(e);let c=new Re;const h=new Array;let m=-1,v=-1;try{let N=null,P=!1,D;do{if(u.available()<4)D=Ke.TERMINATOR;else{const z=u.readBits(4);D=Ke.forBits(z)}switch(D){case Ke.TERMINATOR:break;case Ke.FNC1_FIRST_POSITION:case Ke.FNC1_SECOND_POSITION:P=!0;break;case Ke.STRUCTURED_APPEND:if(u.available()<16)throw new q;m=u.readBits(8),v=u.readBits(8);break;case Ke.ECI:const z=Xt.parseECIValue(u);if(N=J.getCharacterSetECIByValue(z),N===null)throw new q;break;case Ke.HANZI:const G=u.readBits(4),Y=u.readBits(D.getCharacterCountBits(n));G===Xt.GB2312_SUBSET&&Xt.decodeHanziSegment(u,c,Y);break;default:const Q=u.readBits(D.getCharacterCountBits(n));switch(D){case Ke.NUMERIC:Xt.decodeNumericSegment(u,c,Q);break;case Ke.ALPHANUMERIC:Xt.decodeAlphanumericSegment(u,c,Q,P);break;case Ke.BYTE:Xt.decodeByteSegment(u,c,Q,N,h,l);break;case Ke.KANJI:Xt.decodeKanjiSegment(u,c,Q);break;default:throw new q}break}}while(D!==Ke.TERMINATOR)}catch{throw new q}return new rt(e,c.toString(),h.length===0?null:h,i===null?null:i.toString(),m,v)}static decodeHanziSegment(e,n,i){if(i*13>e.available())throw new q;const l=new Uint8Array(2*i);let u=0;for(;i>0;){const c=e.readBits(13);let h=c/96<<8&4294967295|c%96;h<959?h+=41377:h+=42657,l[u]=h>>8&255,l[u+1]=h&255,u+=2,i--}try{n.append(ke.decode(l,be.GB2312))}catch(c){throw new q(c)}}static decodeKanjiSegment(e,n,i){if(i*13>e.available())throw new q;const l=new Uint8Array(2*i);let u=0;for(;i>0;){const c=e.readBits(13);let h=c/192<<8&4294967295|c%192;h<7936?h+=33088:h+=49472,l[u]=h>>8,l[u+1]=h,u+=2,i--}try{n.append(ke.decode(l,be.SHIFT_JIS))}catch(c){throw new q(c)}}static decodeByteSegment(e,n,i,l,u,c){if(8*i>e.available())throw new q;const h=new Uint8Array(i);for(let v=0;v<i;v++)h[v]=e.readBits(8);let m;l===null?m=be.guessEncoding(h,c):m=l.getName();try{n.append(ke.decode(h,m))}catch(v){throw new q(v)}u.push(h)}static toAlphaNumericChar(e){if(e>=Xt.ALPHANUMERIC_CHARS.length)throw new q;return Xt.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,n,i,l){const u=n.length();for(;i>1;){if(e.available()<11)throw new q;const c=e.readBits(11);n.append(Xt.toAlphaNumericChar(Math.floor(c/45))),n.append(Xt.toAlphaNumericChar(c%45)),i-=2}if(i===1){if(e.available()<6)throw new q;n.append(Xt.toAlphaNumericChar(e.readBits(6)))}if(l)for(let c=u;c<n.length();c++)n.charAt(c)==="%"&&(c<n.length()-1&&n.charAt(c+1)==="%"?n.deleteCharAt(c+1):n.setCharAt(c,""))}static decodeNumericSegment(e,n,i){for(;i>=3;){if(e.available()<10)throw new q;const l=e.readBits(10);if(l>=1e3)throw new q;n.append(Xt.toAlphaNumericChar(Math.floor(l/100))),n.append(Xt.toAlphaNumericChar(Math.floor(l/10)%10)),n.append(Xt.toAlphaNumericChar(l%10)),i-=3}if(i===2){if(e.available()<7)throw new q;const l=e.readBits(7);if(l>=100)throw new q;n.append(Xt.toAlphaNumericChar(Math.floor(l/10))),n.append(Xt.toAlphaNumericChar(l%10))}else if(i===1){if(e.available()<4)throw new q;const l=e.readBits(4);if(l>=10)throw new q;n.append(Xt.toAlphaNumericChar(l))}}static parseECIValue(e){const n=e.readBits(8);if(!(n&128))return n&127;if((n&192)===128){const i=e.readBits(8);return(n&63)<<8&4294967295|i}if((n&224)===192){const i=e.readBits(16);return(n&31)<<16&4294967295|i}throw new q}}Xt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Xt.GB2312_SUBSET=1;class Vo{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const n=e[0];e[0]=e[2],e[2]=n}}class zo{constructor(){this.rsDecoder=new $t(Oe.QR_CODE_FIELD_256)}decodeBooleanArray(e,n){return this.decodeBitMatrix(De.parseFromBooleanArray(e),n)}decodeBitMatrix(e,n){const i=new qa(e);let l=null;try{return this.decodeBitMatrixParser(i,n)}catch(u){l=u}try{i.remask(),i.setMirror(!0),i.readVersion(),i.readFormatInformation(),i.mirror();const u=this.decodeBitMatrixParser(i,n);return u.setOther(new Vo(!0)),u}catch(u){throw l!==null?l:u}}decodeBitMatrixParser(e,n){const i=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),c=Js.getDataBlocks(u,i,l);let h=0;for(const N of c)h+=N.getNumDataCodewords();const m=new Uint8Array(h);let v=0;for(const N of c){const P=N.getCodewords(),D=N.getNumDataCodewords();this.correctErrors(P,D);for(let z=0;z<D;z++)m[v++]=P[z]}return Xt.decode(m,i,l,n)}correctErrors(e,n){const i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-n)}catch{throw new k}for(let l=0;l<n;l++)e[l]=i[l]}}class Ui extends _e{constructor(e,n,i){super(e,n),this.estimatedModuleSize=i}aboutEquals(e,n,i){if(Math.abs(n-this.getY())<=e&&Math.abs(i-this.getX())<=e){const l=Math.abs(e-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(e,n,i){const l=(this.getX()+n)/2,u=(this.getY()+e)/2,c=(this.estimatedModuleSize+i)/2;return new Ui(l,u,c)}}class Er{constructor(e,n,i,l,u,c,h){this.image=e,this.startX=n,this.startY=i,this.width=l,this.height=u,this.moduleSize=c,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,n=this.height,i=this.width,l=e+i,u=this.startY+n/2,c=new Int32Array(3),h=this.image;for(let m=0;m<n;m++){const v=u+(m&1?-Math.floor((m+1)/2):Math.floor((m+1)/2));c[0]=0,c[1]=0,c[2]=0;let N=e;for(;N<l&&!h.get(N,v);)N++;let P=0;for(;N<l;){if(h.get(N,v))if(P===1)c[1]++;else if(P===2){if(this.foundPatternCross(c)){const D=this.handlePossibleCenter(c,v,N);if(D!==null)return D}c[0]=c[2],c[1]=1,c[2]=0,P=1}else c[++P]++;else P===1&&P++,c[P]++;N++}if(this.foundPatternCross(c)){const D=this.handlePossibleCenter(c,v,l);if(D!==null)return D}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Z}static centerFromEnd(e,n){return n-e[2]-e[1]/2}foundPatternCross(e){const n=this.moduleSize,i=n/2;for(let l=0;l<3;l++)if(Math.abs(n-e[l])>=i)return!1;return!0}crossCheckVertical(e,n,i,l){const u=this.image,c=u.getHeight(),h=this.crossCheckStateCount;h[0]=0,h[1]=0,h[2]=0;let m=e;for(;m>=0&&u.get(n,m)&&h[1]<=i;)h[1]++,m--;if(m<0||h[1]>i)return NaN;for(;m>=0&&!u.get(n,m)&&h[0]<=i;)h[0]++,m--;if(h[0]>i)return NaN;for(m=e+1;m<c&&u.get(n,m)&&h[1]<=i;)h[1]++,m++;if(m===c||h[1]>i)return NaN;for(;m<c&&!u.get(n,m)&&h[2]<=i;)h[2]++,m++;if(h[2]>i)return NaN;const v=h[0]+h[1]+h[2];return 5*Math.abs(v-l)>=2*l?NaN:this.foundPatternCross(h)?Er.centerFromEnd(h,m):NaN}handlePossibleCenter(e,n,i){const l=e[0]+e[1]+e[2],u=Er.centerFromEnd(e,i),c=this.crossCheckVertical(n,u,2*e[1],l);if(!isNaN(c)){const h=(e[0]+e[1]+e[2])/3;for(const v of this.possibleCenters)if(v.aboutEquals(h,c,u))return v.combineEstimate(c,u,h);const m=new Ui(u,c,h);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null}}class Rr extends _e{constructor(e,n,i,l){super(e,n),this.estimatedModuleSize=i,this.count=l,l===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,n,i){if(Math.abs(n-this.getY())<=e&&Math.abs(i-this.getX())<=e){const l=Math.abs(e-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(e,n,i){const l=this.count+1,u=(this.count*this.getX()+n)/l,c=(this.count*this.getY()+e)/l,h=(this.count*this.estimatedModuleSize+i)/l;return new Rr(u,c,h,l)}}class ri{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Jt{constructor(e,n){this.image=e,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const n=e!=null&&e.get(re.TRY_HARDER)!==void 0,i=e!=null&&e.get(re.PURE_BARCODE)!==void 0,l=this.image,u=l.getHeight(),c=l.getWidth();let h=Math.floor(3*u/(4*Jt.MAX_MODULES));(h<Jt.MIN_SKIP||n)&&(h=Jt.MIN_SKIP);let m=!1;const v=new Int32Array(5);for(let P=h-1;P<u&&!m;P+=h){v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0;let D=0;for(let z=0;z<c;z++)if(l.get(z,P))(D&1)===1&&D++,v[D]++;else if(D&1)v[D]++;else if(D===4)if(Jt.foundPatternCross(v)){if(this.handlePossibleCenter(v,P,z,i)===!0)if(h=2,this.hasSkipped===!0)m=this.haveMultiplyConfirmedCenters();else{const Y=this.findRowSkip();Y>v[2]&&(P+=Y-v[2]-h,z=c-1)}else{v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,D=3;continue}D=0,v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0}else v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,D=3;else v[++D]++;Jt.foundPatternCross(v)&&this.handlePossibleCenter(v,P,c,i)===!0&&(h=v[0],this.hasSkipped&&(m=this.haveMultiplyConfirmedCenters()))}const N=this.selectBestPatterns();return _e.orderBestPatterns(N),new ri(N)}static centerFromEnd(e,n){return n-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let n=0;for(let u=0;u<5;u++){const c=e[u];if(c===0)return!1;n+=c}if(n<7)return!1;const i=n/7,l=i/2;return Math.abs(i-e[0])<l&&Math.abs(i-e[1])<l&&Math.abs(3*i-e[2])<3*l&&Math.abs(i-e[3])<l&&Math.abs(i-e[4])<l}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,n,i,l){const u=this.getCrossCheckStateCount();let c=0;const h=this.image;for(;e>=c&&n>=c&&h.get(n-c,e-c);)u[2]++,c++;if(e<c||n<c)return!1;for(;e>=c&&n>=c&&!h.get(n-c,e-c)&&u[1]<=i;)u[1]++,c++;if(e<c||n<c||u[1]>i)return!1;for(;e>=c&&n>=c&&h.get(n-c,e-c)&&u[0]<=i;)u[0]++,c++;if(u[0]>i)return!1;const m=h.getHeight(),v=h.getWidth();for(c=1;e+c<m&&n+c<v&&h.get(n+c,e+c);)u[2]++,c++;if(e+c>=m||n+c>=v)return!1;for(;e+c<m&&n+c<v&&!h.get(n+c,e+c)&&u[3]<i;)u[3]++,c++;if(e+c>=m||n+c>=v||u[3]>=i)return!1;for(;e+c<m&&n+c<v&&h.get(n+c,e+c)&&u[4]<i;)u[4]++,c++;if(u[4]>=i)return!1;const N=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(N-l)<2*l&&Jt.foundPatternCross(u)}crossCheckVertical(e,n,i,l){const u=this.image,c=u.getHeight(),h=this.getCrossCheckStateCount();let m=e;for(;m>=0&&u.get(n,m);)h[2]++,m--;if(m<0)return NaN;for(;m>=0&&!u.get(n,m)&&h[1]<=i;)h[1]++,m--;if(m<0||h[1]>i)return NaN;for(;m>=0&&u.get(n,m)&&h[0]<=i;)h[0]++,m--;if(h[0]>i)return NaN;for(m=e+1;m<c&&u.get(n,m);)h[2]++,m++;if(m===c)return NaN;for(;m<c&&!u.get(n,m)&&h[3]<i;)h[3]++,m++;if(m===c||h[3]>=i)return NaN;for(;m<c&&u.get(n,m)&&h[4]<i;)h[4]++,m++;if(h[4]>=i)return NaN;const v=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(v-l)>=2*l?NaN:Jt.foundPatternCross(h)?Jt.centerFromEnd(h,m):NaN}crossCheckHorizontal(e,n,i,l){const u=this.image,c=u.getWidth(),h=this.getCrossCheckStateCount();let m=e;for(;m>=0&&u.get(m,n);)h[2]++,m--;if(m<0)return NaN;for(;m>=0&&!u.get(m,n)&&h[1]<=i;)h[1]++,m--;if(m<0||h[1]>i)return NaN;for(;m>=0&&u.get(m,n)&&h[0]<=i;)h[0]++,m--;if(h[0]>i)return NaN;for(m=e+1;m<c&&u.get(m,n);)h[2]++,m++;if(m===c)return NaN;for(;m<c&&!u.get(m,n)&&h[3]<i;)h[3]++,m++;if(m===c||h[3]>=i)return NaN;for(;m<c&&u.get(m,n)&&h[4]<i;)h[4]++,m++;if(h[4]>=i)return NaN;const v=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(v-l)>=l?NaN:Jt.foundPatternCross(h)?Jt.centerFromEnd(h,m):NaN}handlePossibleCenter(e,n,i,l){const u=e[0]+e[1]+e[2]+e[3]+e[4];let c=Jt.centerFromEnd(e,i),h=this.crossCheckVertical(n,Math.floor(c),e[2],u);if(!isNaN(h)&&(c=this.crossCheckHorizontal(Math.floor(c),Math.floor(h),e[2],u),!isNaN(c)&&(!l||this.crossCheckDiagonal(Math.floor(h),Math.floor(c),e[2],u)))){const m=u/7;let v=!1;const N=this.possibleCenters;for(let P=0,D=N.length;P<D;P++){const z=N[P];if(z.aboutEquals(m,h,c)){N[P]=z.combineEstimate(h,c,m),v=!0;break}}if(!v){const P=new Rr(c,h,m);N.push(P),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(P)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let n=null;for(const i of this.possibleCenters)if(i.getCount()>=Jt.CENTER_QUORUM)if(n==null)n=i;else return this.hasSkipped=!0,Math.floor((Math.abs(n.getX()-i.getX())-Math.abs(n.getY()-i.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,n=0;const i=this.possibleCenters.length;for(const c of this.possibleCenters)c.getCount()>=Jt.CENTER_QUORUM&&(e++,n+=c.getEstimatedModuleSize());if(e<3)return!1;const l=n/i;let u=0;for(const c of this.possibleCenters)u+=Math.abs(c.getEstimatedModuleSize()-l);return u<=.05*n}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new Z;const n=this.possibleCenters;let i;if(e>3){let l=0,u=0;for(const m of this.possibleCenters){const v=m.getEstimatedModuleSize();l+=v,u+=v*v}i=l/e;let c=Math.sqrt(u/e-i*i);n.sort((m,v)=>{const N=Math.abs(v.getEstimatedModuleSize()-i),P=Math.abs(m.getEstimatedModuleSize()-i);return N<P?-1:N>P?1:0});const h=Math.max(.2*i,c);for(let m=0;m<n.length&&n.length>3;m++){const v=n[m];Math.abs(v.getEstimatedModuleSize()-i)>h&&(n.splice(m,1),m--)}}if(n.length>3){let l=0;for(const u of n)l+=u.getEstimatedModuleSize();i=l/n.length,n.sort((u,c)=>{if(c.getCount()===u.getCount()){const h=Math.abs(c.getEstimatedModuleSize()-i),m=Math.abs(u.getEstimatedModuleSize()-i);return h<m?1:h>m?-1:0}else return c.getCount()-u.getCount()}),n.splice(3)}return[n[0],n[1],n[2]]}}Jt.CENTER_QUORUM=2,Jt.MIN_SKIP=3,Jt.MAX_MODULES=57;class Hr{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(re.NEED_RESULT_POINT_CALLBACK);const i=new Jt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(i)}processFinderPatternInfo(e){const n=e.getTopLeft(),i=e.getTopRight(),l=e.getBottomLeft(),u=this.calculateModuleSize(n,i,l);if(u<1)throw new Z("No pattern found in proccess finder.");const c=Hr.computeDimension(n,i,l,u),h=Ye.getProvisionalVersionForDimension(c),m=h.getDimensionForVersion()-7;let v=null;if(h.getAlignmentPatternCenters().length>0){const z=i.getX()-n.getX()+l.getX(),G=i.getY()-n.getY()+l.getY(),Y=1-3/m,Q=Math.floor(n.getX()+Y*(z-n.getX())),oe=Math.floor(n.getY()+Y*(G-n.getY()));for(let Ce=4;Ce<=16;Ce<<=1)try{v=this.findAlignmentInRegion(u,Q,oe,Ce);break}catch(Ae){if(!(Ae instanceof Z))throw Ae}}const N=Hr.createTransform(n,i,l,v,c),P=Hr.sampleGrid(this.image,N,c);let D;return v===null?D=[l,n,i]:D=[l,n,i,v],new xn(P,D)}static createTransform(e,n,i,l,u){const c=u-3.5;let h,m,v,N;return l!==null?(h=l.getX(),m=l.getY(),v=c-3,N=v):(h=n.getX()-e.getX()+i.getX(),m=n.getY()-e.getY()+i.getY(),v=c,N=c),it.quadrilateralToQuadrilateral(3.5,3.5,c,3.5,v,N,3.5,c,e.getX(),e.getY(),n.getX(),n.getY(),h,m,i.getX(),i.getY())}static sampleGrid(e,n,i){return vt.getInstance().sampleGridWithTransform(e,i,i,n)}static computeDimension(e,n,i,l){const u=ht.round(_e.distance(e,n)/l),c=ht.round(_e.distance(e,i)/l);let h=Math.floor((u+c)/2)+7;switch(h&3){case 0:h++;break;case 2:h--;break;case 3:throw new Z("Dimensions could be not found.")}return h}calculateModuleSize(e,n,i){return(this.calculateModuleSizeOneWay(e,n)+this.calculateModuleSizeOneWay(e,i))/2}calculateModuleSizeOneWay(e,n){const i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(n.getX()),Math.floor(n.getY())),l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(i)?l/7:isNaN(l)?i/7:(i+l)/14}sizeOfBlackWhiteBlackRunBothWays(e,n,i,l){let u=this.sizeOfBlackWhiteBlackRun(e,n,i,l),c=1,h=e-(i-e);h<0?(c=e/(e-h),h=0):h>=this.image.getWidth()&&(c=(this.image.getWidth()-1-e)/(h-e),h=this.image.getWidth()-1);let m=Math.floor(n-(l-n)*c);return c=1,m<0?(c=n/(n-m),m=0):m>=this.image.getHeight()&&(c=(this.image.getHeight()-1-n)/(m-n),m=this.image.getHeight()-1),h=Math.floor(e+(h-e)*c),u+=this.sizeOfBlackWhiteBlackRun(e,n,h,m),u-1}sizeOfBlackWhiteBlackRun(e,n,i,l){const u=Math.abs(l-n)>Math.abs(i-e);if(u){let z=e;e=n,n=z,z=i,i=l,l=z}const c=Math.abs(i-e),h=Math.abs(l-n);let m=-c/2;const v=e<i?1:-1,N=n<l?1:-1;let P=0;const D=i+v;for(let z=e,G=n;z!==D;z+=v){const Y=u?G:z,Q=u?z:G;if(P===1===this.image.get(Y,Q)){if(P===2)return ht.distance(z,G,e,n);P++}if(m+=h,m>0){if(G===l)break;G+=N,m-=c}}return P===2?ht.distance(i+v,l,e,n):NaN}findAlignmentInRegion(e,n,i,l){const u=Math.floor(l*e),c=Math.max(0,n-u),h=Math.min(this.image.getWidth()-1,n+u);if(h-c<e*3)throw new Z("Alignment top exceeds estimated module size.");const m=Math.max(0,i-u),v=Math.min(this.image.getHeight()-1,i+u);if(v-m<e*3)throw new Z("Alignment bottom exceeds estimated module size.");return new Er(this.image,c,m,h-c,v-m,e,this.resultPointCallback).find()}}class Fn{constructor(){this.decoder=new zo}getDecoder(){return this.decoder}decode(e,n){let i,l;if(n!=null&&n.get(re.PURE_BARCODE)!==void 0){const m=Fn.extractPureBits(e.getBlackMatrix());i=this.decoder.decodeBitMatrix(m,n),l=Fn.NO_POINTS}else{const m=new Hr(e.getBlackMatrix()).detect(n);i=this.decoder.decodeBitMatrix(m.getBits(),n),l=m.getPoints()}i.getOther()instanceof Vo&&i.getOther().applyMirroredCorrection(l);const u=new We(i.getText(),i.getRawBytes(),void 0,l,Ee.QR_CODE,void 0),c=i.getByteSegments();c!==null&&u.putMetadata(He.BYTE_SEGMENTS,c);const h=i.getECLevel();return h!==null&&u.putMetadata(He.ERROR_CORRECTION_LEVEL,h),i.hasStructuredAppend()&&(u.putMetadata(He.STRUCTURED_APPEND_SEQUENCE,i.getStructuredAppendSequenceNumber()),u.putMetadata(He.STRUCTURED_APPEND_PARITY,i.getStructuredAppendParity())),u}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(n===null||i===null)throw new Z;const l=this.moduleSize(n,e);let u=n[1],c=i[1],h=n[0],m=i[0];if(h>=m||u>=c)throw new Z;if(c-u!==m-h&&(m=h+(c-u),m>=e.getWidth()))throw new Z;const v=Math.round((m-h+1)/l),N=Math.round((c-u+1)/l);if(v<=0||N<=0)throw new Z;if(N!==v)throw new Z;const P=Math.floor(l/2);u+=P,h+=P;const D=h+Math.floor((v-1)*l)-m;if(D>0){if(D>P)throw new Z;h-=D}const z=u+Math.floor((N-1)*l)-c;if(z>0){if(z>P)throw new Z;u-=z}const G=new De(v,N);for(let Y=0;Y<N;Y++){const Q=u+Math.floor(Y*l);for(let oe=0;oe<v;oe++)e.get(h+Math.floor(oe*l),Q)&&G.set(oe,Y)}return G}static moduleSize(e,n){const i=n.getHeight(),l=n.getWidth();let u=e[0],c=e[1],h=!0,m=0;for(;u<l&&c<i;){if(h!==n.get(u,c)){if(++m===5)break;h=!h}u++,c++}if(u===l||c===i)throw new Z;return(u-e[0])/7}}Fn.NO_POINTS=new Array;class Je{PDF417Common(){}static getBitCountSum(e){return ht.sum(e)}static toIntArray(e){if(e==null||!e.length)return Je.EMPTY_INT_ARRAY;const n=new Int32Array(e.length);let i=0;for(const l of e)n[i++]=l;return n}static getCodeword(e){const n=H.binarySearch(Je.SYMBOL_TABLE,e&262143);return n<0?-1:(Je.CODEWORD_TABLE[n]-1)%Je.NUMBER_OF_CODEWORDS}}Je.NUMBER_OF_CODEWORDS=929,Je.MAX_CODEWORDS_IN_BARCODE=Je.NUMBER_OF_CODEWORDS-1,Je.MIN_ROWS_IN_BARCODE=3,Je.MAX_ROWS_IN_BARCODE=90,Je.MODULES_IN_CODEWORD=17,Je.MODULES_IN_STOP_PATTERN=18,Je.BARS_IN_MODULE=8,Je.EMPTY_INT_ARRAY=new Int32Array([]),Je.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Je.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Qa{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class st{static detectMultiple(e,n,i){let l=e.getBlackMatrix(),u=st.detect(i,l);return u.length||(l=l.clone(),l.rotate180(),u=st.detect(i,l)),new Qa(l,u)}static detect(e,n){const i=new Array;let l=0,u=0,c=!1;for(;l<n.getHeight();){const h=st.findVertices(n,l,u);if(h[0]==null&&h[3]==null){if(!c)break;c=!1,u=0;for(const m of i)m[1]!=null&&(l=Math.trunc(Math.max(l,m[1].getY()))),m[3]!=null&&(l=Math.max(l,Math.trunc(m[3].getY())));l+=st.ROW_STEP;continue}if(c=!0,i.push(h),!e)break;h[2]!=null?(u=Math.trunc(h[2].getX()),l=Math.trunc(h[2].getY())):(u=Math.trunc(h[4].getX()),l=Math.trunc(h[4].getY()))}return i}static findVertices(e,n,i){const l=e.getHeight(),u=e.getWidth(),c=new Array(8);return st.copyToResult(c,st.findRowsWithPattern(e,l,u,n,i,st.START_PATTERN),st.INDEXES_START_PATTERN),c[4]!=null&&(i=Math.trunc(c[4].getX()),n=Math.trunc(c[4].getY())),st.copyToResult(c,st.findRowsWithPattern(e,l,u,n,i,st.STOP_PATTERN),st.INDEXES_STOP_PATTERN),c}static copyToResult(e,n,i){for(let l=0;l<i.length;l++)e[i[l]]=n[l]}static findRowsWithPattern(e,n,i,l,u,c){const h=new Array(4);let m=!1;const v=new Int32Array(c.length);for(;l<n;l+=st.ROW_STEP){let P=st.findGuardPattern(e,u,l,i,!1,c,v);if(P!=null){for(;l>0;){const D=st.findGuardPattern(e,u,--l,i,!1,c,v);if(D!=null)P=D;else{l++;break}}h[0]=new _e(P[0],l),h[1]=new _e(P[1],l),m=!0;break}}let N=l+1;if(m){let P=0,D=Int32Array.from([Math.trunc(h[0].getX()),Math.trunc(h[1].getX())]);for(;N<n;N++){const z=st.findGuardPattern(e,D[0],N,i,!1,c,v);if(z!=null&&Math.abs(D[0]-z[0])<st.MAX_PATTERN_DRIFT&&Math.abs(D[1]-z[1])<st.MAX_PATTERN_DRIFT)D=z,P=0;else{if(P>st.SKIPPED_ROW_COUNT_MAX)break;P++}}N-=P+1,h[2]=new _e(D[0],N),h[3]=new _e(D[1],N)}return N-l<st.BARCODE_MIN_HEIGHT&&H.fill(h,null),h}static findGuardPattern(e,n,i,l,u,c,h){H.fillWithin(h,0,h.length,0);let m=n,v=0;for(;e.get(m,i)&&m>0&&v++<st.MAX_PIXEL_DRIFT;)m--;let N=m,P=0,D=c.length;for(let z=u;N<l;N++)if(e.get(N,i)!==z)h[P]++;else{if(P===D-1){if(st.patternMatchVariance(h,c,st.MAX_INDIVIDUAL_VARIANCE)<st.MAX_AVG_VARIANCE)return new Int32Array([m,N]);m+=h[0]+h[1],B.arraycopy(h,2,h,0,P-1),h[P-1]=0,h[P]=0,P--}else P++;h[P]=1,z=!z}return P===D-1&&st.patternMatchVariance(h,c,st.MAX_INDIVIDUAL_VARIANCE)<st.MAX_AVG_VARIANCE?new Int32Array([m,N-1]):null}static patternMatchVariance(e,n,i){let l=e.length,u=0,c=0;for(let v=0;v<l;v++)u+=e[v],c+=n[v];if(u<c)return 1/0;let h=u/c;i*=h;let m=0;for(let v=0;v<l;v++){let N=e[v],P=n[v]*h,D=N>P?N-P:P-N;if(D>i)return 1/0;m+=D}return m/u}}st.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),st.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),st.MAX_AVG_VARIANCE=.42,st.MAX_INDIVIDUAL_VARIANCE=.8,st.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),st.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),st.MAX_PIXEL_DRIFT=3,st.MAX_PATTERN_DRIFT=5,st.SKIPPED_ROW_COUNT_MAX=25,st.ROW_STEP=5,st.BARCODE_MIN_HEIGHT=10;class Nn{constructor(e,n){if(n.length===0)throw new I;this.field=e;let i=n.length;if(i>1&&n[0]===0){let l=1;for(;l<i&&n[l]===0;)l++;l===i?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(i-l),B.arraycopy(n,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let l=0;for(let u of this.coefficients)l=this.field.add(l,u);return l}let n=this.coefficients[0],i=this.coefficients.length;for(let l=1;l<i;l++)n=this.field.add(this.field.multiply(e,n),this.coefficients[l]);return n}add(e){if(!this.field.equals(e.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,i=e.coefficients;if(n.length>i.length){let c=n;n=i,i=c}let l=new Int32Array(i.length),u=i.length-n.length;B.arraycopy(i,0,l,0,u);for(let c=u;c<i.length;c++)l[c]=this.field.add(n[c-u],i[c]);return new Nn(this.field,l)}subtract(e){if(!this.field.equals(e.field))throw new I("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof Nn?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new Nn(this.field,new Int32Array([0]));let n=this.coefficients,i=n.length,l=e.coefficients,u=l.length,c=new Int32Array(i+u-1);for(let h=0;h<i;h++){let m=n[h];for(let v=0;v<u;v++)c[h+v]=this.field.add(c[h+v],this.field.multiply(m,l[v]))}return new Nn(this.field,c)}negative(){let e=this.coefficients.length,n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=this.field.subtract(0,this.coefficients[i]);return new Nn(this.field,n)}multiplyScalar(e){if(e===0)return new Nn(this.field,new Int32Array([0]));if(e===1)return this;let n=this.coefficients.length,i=new Int32Array(n);for(let l=0;l<n;l++)i[l]=this.field.multiply(this.coefficients[l],e);return new Nn(this.field,i)}multiplyByMonomial(e,n){if(e<0)throw new I;if(n===0)return new Nn(this.field,new Int32Array([0]));let i=this.coefficients.length,l=new Int32Array(i+e);for(let u=0;u<i;u++)l[u]=this.field.multiply(this.coefficients[u],n);return new Nn(this.field,l)}toString(){let e=new Re;for(let n=this.getDegree();n>=0;n--){let i=this.getCoefficient(n);i!==0&&(i<0?(e.append(" - "),i=-i):e.length()>0&&e.append(" + "),(n===0||i!==1)&&e.append(i),n!==0&&(n===1?e.append("x"):(e.append("x^"),e.append(n))))}return e.toString()}}class Ja{add(e,n){return(e+n)%this.modulus}subtract(e,n){return(this.modulus+e-n)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new I;return this.logTable[e]}inverse(e){if(e===0)throw new mt;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class Wi extends Ja{constructor(e,n){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let i=1;for(let l=0;l<e;l++)this.expTable[l]=i,i=i*n%e;for(let l=0;l<e-1;l++)this.logTable[this.expTable[l]]=l;this.zero=new Nn(this,new Int32Array([0])),this.one=new Nn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new I;if(n===0)return this.zero;let i=new Int32Array(e+1);return i[0]=n,new Nn(this,i)}}Wi.PDF417_GF=new Wi(Je.NUMBER_OF_CODEWORDS,3);class Uo{constructor(){this.field=Wi.PDF417_GF}decode(e,n,i){let l=new Nn(this.field,e),u=new Int32Array(n),c=!1;for(let G=n;G>0;G--){let Y=l.evaluateAt(this.field.exp(G));u[n-G]=Y,Y!==0&&(c=!0)}if(!c)return 0;let h=this.field.getOne();if(i!=null)for(const G of i){let Y=this.field.exp(e.length-1-G),Q=new Nn(this.field,new Int32Array([this.field.subtract(0,Y),1]));h=h.multiply(Q)}let m=new Nn(this.field,u),v=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),m,n),N=v[0],P=v[1],D=this.findErrorLocations(N),z=this.findErrorMagnitudes(P,N,D);for(let G=0;G<D.length;G++){let Y=e.length-1-this.field.log(D[G]);if(Y<0)throw k.getChecksumInstance();e[Y]=this.field.subtract(e[Y],z[G])}return D.length}runEuclideanAlgorithm(e,n,i){if(e.getDegree()<n.getDegree()){let D=e;e=n,n=D}let l=e,u=n,c=this.field.getZero(),h=this.field.getOne();for(;u.getDegree()>=Math.round(i/2);){let D=l,z=c;if(l=u,c=h,l.isZero())throw k.getChecksumInstance();u=D;let G=this.field.getZero(),Y=l.getCoefficient(l.getDegree()),Q=this.field.inverse(Y);for(;u.getDegree()>=l.getDegree()&&!u.isZero();){let oe=u.getDegree()-l.getDegree(),Ce=this.field.multiply(u.getCoefficient(u.getDegree()),Q);G=G.add(this.field.buildMonomial(oe,Ce)),u=u.subtract(l.multiplyByMonomial(oe,Ce))}h=G.multiply(c).subtract(z).negative()}let m=h.getCoefficient(0);if(m===0)throw k.getChecksumInstance();let v=this.field.inverse(m),N=h.multiply(v),P=u.multiply(v);return[N,P]}findErrorLocations(e){let n=e.getDegree(),i=new Int32Array(n),l=0;for(let u=1;u<this.field.getSize()&&l<n;u++)e.evaluateAt(u)===0&&(i[l]=this.field.inverse(u),l++);if(l!==n)throw k.getChecksumInstance();return i}findErrorMagnitudes(e,n,i){let l=n.getDegree(),u=new Int32Array(l);for(let v=1;v<=l;v++)u[l-v]=this.field.multiply(v,n.getCoefficient(v));let c=new Nn(this.field,u),h=i.length,m=new Int32Array(h);for(let v=0;v<h;v++){let N=this.field.inverse(i[v]),P=this.field.subtract(0,e.evaluateAt(N)),D=this.field.inverse(c.evaluateAt(N));m[v]=this.field.multiply(P,D)}return m}}class Ei{constructor(e,n,i,l,u){e instanceof Ei?this.constructor_2(e):this.constructor_1(e,n,i,l,u)}constructor_1(e,n,i,l,u){const c=n==null||i==null,h=l==null||u==null;if(c&&h)throw new Z;c?(n=new _e(0,l.getY()),i=new _e(0,u.getY())):h&&(l=new _e(e.getWidth()-1,n.getY()),u=new _e(e.getWidth()-1,i.getY())),this.image=e,this.topLeft=n,this.bottomLeft=i,this.topRight=l,this.bottomRight=u,this.minX=Math.trunc(Math.min(n.getX(),i.getX())),this.maxX=Math.trunc(Math.max(l.getX(),u.getX())),this.minY=Math.trunc(Math.min(n.getY(),l.getY())),this.maxY=Math.trunc(Math.max(i.getY(),u.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,n){return e==null?n:n==null?e:new Ei(e.image,e.topLeft,e.bottomLeft,n.topRight,n.bottomRight)}addMissingRows(e,n,i){let l=this.topLeft,u=this.bottomLeft,c=this.topRight,h=this.bottomRight;if(e>0){let m=i?this.topLeft:this.topRight,v=Math.trunc(m.getY()-e);v<0&&(v=0);let N=new _e(m.getX(),v);i?l=N:c=N}if(n>0){let m=i?this.bottomLeft:this.bottomRight,v=Math.trunc(m.getY()+n);v>=this.image.getHeight()&&(v=this.image.getHeight()-1);let N=new _e(m.getX(),v);i?u=N:h=N}return new Ei(this.image,l,u,c,h)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Cs{constructor(e,n,i,l){this.columnCount=e,this.errorCorrectionLevel=l,this.rowCountUpperPart=n,this.rowCountLowerPart=i,this.rowCount=n+i}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Gr{constructor(){this.buffer=""}static form(e,n){let i=-1;function l(c,h,m,v,N,P){if(c==="%%")return"%";if(n[++i]===void 0)return;c=v?parseInt(v.substr(1)):void 0;let D=N?parseInt(N.substr(1)):void 0,z;switch(P){case"s":z=n[i];break;case"c":z=n[i][0];break;case"f":z=parseFloat(n[i]).toFixed(c);break;case"p":z=parseFloat(n[i]).toPrecision(c);break;case"e":z=parseFloat(n[i]).toExponential(c);break;case"x":z=parseInt(n[i]).toString(D||16);break;case"d":z=parseFloat(parseInt(n[i],D||10).toPrecision(c)).toFixed(0);break}z=typeof z=="object"?JSON.stringify(z):(+z).toString(D);let G=parseInt(m),Y=m&&m[0]+""=="0"?"0":" ";for(;z.length<G;)z=h!==void 0?z+Y:Y+z;return z}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(u,l)}format(e,...n){this.buffer+=Gr.form(e,n)}toString(){return this.buffer}}class _r{constructor(e){this.boundingBox=new Ei(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let n=this.getCodeword(e);if(n!=null)return n;for(let i=1;i<_r.MAX_NEARBY_DISTANCE;i++){let l=this.imageRowToCodewordIndex(e)-i;if(l>=0&&(n=this.codewords[l],n!=null)||(l=this.imageRowToCodewordIndex(e)+i,l<this.codewords.length&&(n=this.codewords[l],n!=null)))return n}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,n){this.codewords[this.imageRowToCodewordIndex(e)]=n}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new Gr;let n=0;for(const i of this.codewords){if(i==null){e.format("%3d:    |   %n",n++);continue}e.format("%3d: %3d|%3d%n",n++,i.getRowNumber(),i.getValue())}return e.toString()}}_r.MAX_NEARBY_DISTANCE=5;class ii{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let n=this.values.get(e);n==null&&(n=0),n++,this.values.set(e,n)}getValue(){let e=-1,n=new Array;for(const[i,l]of this.values.entries()){const u={getKey:()=>i,getValue:()=>l};u.getValue()>e?(e=u.getValue(),n=[],n.push(u.getKey())):u.getValue()===e&&n.push(u.getKey())}return Je.toIntArray(n)}getConfidence(e){return this.values.get(e)}}class el extends _r{constructor(e,n){super(e),this._isLeft=n}setRowNumbers(){for(let e of this.getCodewords())e!=null&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,e);let i=this.getBoundingBox(),l=this._isLeft?i.getTopLeft():i.getTopRight(),u=this._isLeft?i.getBottomLeft():i.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(l.getY())),h=this.imageRowToCodewordIndex(Math.trunc(u.getY())),m=-1,v=1,N=0;for(let P=c;P<h;P++){if(n[P]==null)continue;let D=n[P],z=D.getRowNumber()-m;if(z===0)N++;else if(z===1)v=Math.max(v,N),N=1,m=D.getRowNumber();else if(z<0||D.getRowNumber()>=e.getRowCount()||z>P)n[P]=null;else{let G;v>2?G=(v-2)*z:G=z;let Y=G>=P;for(let Q=1;Q<=G&&!Y;Q++)Y=n[P-Q]!=null;Y?n[P]=null:(m=D.getRowNumber(),N=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let n=new Int32Array(e.getRowCount());for(let i of this.getCodewords())if(i!=null){let l=i.getRowNumber();if(l>=n.length)continue;n[l]++}return n}adjustIncompleteIndicatorColumnRowNumbers(e){let n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),l=this._isLeft?n.getBottomLeft():n.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.imageRowToCodewordIndex(Math.trunc(l.getY())),h=this.getCodewords(),m=-1;for(let v=u;v<c;v++){if(h[v]==null)continue;let N=h[v];N.setRowNumberAsRowIndicatorColumn();let P=N.getRowNumber()-m;P===0||(P===1?m=N.getRowNumber():N.getRowNumber()>=e.getRowCount()?h[v]=null:m=N.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),n=new ii,i=new ii,l=new ii,u=new ii;for(let h of e){if(h==null)continue;h.setRowNumberAsRowIndicatorColumn();let m=h.getValue()%30,v=h.getRowNumber();switch(this._isLeft||(v+=2),v%3){case 0:i.setValue(m*3+1);break;case 1:u.setValue(m/3),l.setValue(m%3);break;case 2:n.setValue(m+1);break}}if(n.getValue().length===0||i.getValue().length===0||l.getValue().length===0||u.getValue().length===0||n.getValue()[0]<1||i.getValue()[0]+l.getValue()[0]<Je.MIN_ROWS_IN_BARCODE||i.getValue()[0]+l.getValue()[0]>Je.MAX_ROWS_IN_BARCODE)return null;let c=new Cs(n.getValue()[0],i.getValue()[0],l.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(e,c),c}removeIncorrectCodewords(e,n){for(let i=0;i<e.length;i++){let l=e[i];if(e[i]==null)continue;let u=l.getValue()%30,c=l.getRowNumber();if(c>n.getRowCount()){e[i]=null;continue}switch(this._isLeft||(c+=2),c%3){case 0:u*3+1!==n.getRowCountUpperPart()&&(e[i]=null);break;case 1:(Math.trunc(u/3)!==n.getErrorCorrectionLevel()||u%3!==n.getRowCountLowerPart())&&(e[i]=null);break;case 2:u+1!==n.getColumnCount()&&(e[i]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Es{constructor(e,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=Je.MAX_CODEWORDS_IN_BARCODE,n;do n=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<n);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let n=1;n<this.barcodeColumnCount+1;n++){let i=this.detectionResultColumns[n].getCodewords();for(let l=0;l<i.length;l++)i[l]!=null&&(i[l].hasValidRowNumber()||this.adjustRowNumbers(n,l,i))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<e.length;i++)if(e[i]!=null&&n[i]!=null&&e[i].getRowNumber()===n[i].getRowNumber())for(let l=1;l<=this.barcodeColumnCount;l++){let u=this.detectionResultColumns[l].getCodewords()[i];u!=null&&(u.setRowNumber(e[i].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[l].getCodewords()[i]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<n.length;i++){if(n[i]==null)continue;let l=n[i].getRowNumber(),u=0;for(let c=this.barcodeColumnCount+1;c>0&&u<this.ADJUST_ROW_NUMBER_SKIP;c--){let h=this.detectionResultColumns[c].getCodewords()[i];h!=null&&(u=Es.adjustRowNumberIfValid(l,u,h),h.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,n=this.detectionResultColumns[0].getCodewords();for(let i=0;i<n.length;i++){if(n[i]==null)continue;let l=n[i].getRowNumber(),u=0;for(let c=1;c<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;c++){let h=this.detectionResultColumns[c].getCodewords()[i];h!=null&&(u=Es.adjustRowNumberIfValid(l,u,h),h.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,n,i){return i==null||i.hasValidRowNumber()||(i.isValidRowNumber(e)?(i.setRowNumber(e),n=0):++n),n}adjustRowNumbers(e,n,i){if(!this.detectionResultColumns[e-1])return;let l=i[n],u=this.detectionResultColumns[e-1].getCodewords(),c=u;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());let h=new Array(14);h[2]=u[n],h[3]=c[n],n>0&&(h[0]=i[n-1],h[4]=u[n-1],h[5]=c[n-1]),n>1&&(h[8]=i[n-2],h[10]=u[n-2],h[11]=c[n-2]),n<i.length-1&&(h[1]=i[n+1],h[6]=u[n+1],h[7]=c[n+1]),n<i.length-2&&(h[9]=i[n+2],h[12]=u[n+2],h[13]=c[n+2]);for(let m of h)if(Es.adjustRowNumber(l,m))return}static adjustRowNumber(e,n){return n==null?!1:n.hasValidRowNumber()&&n.getBucket()===e.getBucket()?(e.setRowNumber(n.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,n){this.detectionResultColumns[e]=n}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let n=new Gr;for(let i=0;i<e.getCodewords().length;i++){n.format("CW %3d:",i);for(let l=0;l<this.barcodeColumnCount+2;l++){if(this.detectionResultColumns[l]==null){n.format("    |   ");continue}let u=this.detectionResultColumns[l].getCodewords()[i];if(u==null){n.format("    |   ");continue}n.format(" %3d|%3d",u.getRowNumber(),u.getValue())}n.format("%n")}return n.toString()}}class Ai{constructor(e,n,i,l){this.rowNumber=Ai.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(n),this.bucket=Math.trunc(i),this.value=Math.trunc(l)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==Ai.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}Ai.BARCODE_ROW_UNKNOWN=-1;class Rn{static initialize(){for(let e=0;e<Je.SYMBOL_TABLE.length;e++){let n=Je.SYMBOL_TABLE[e],i=n&1;for(let l=0;l<Je.BARS_IN_MODULE;l++){let u=0;for(;(n&1)===i;)u+=1,n>>=1;i=n&1,Rn.RATIOS_TABLE[e]||(Rn.RATIOS_TABLE[e]=new Array(Je.BARS_IN_MODULE)),Rn.RATIOS_TABLE[e][Je.BARS_IN_MODULE-l-1]=Math.fround(u/Je.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let n=Rn.getDecodedCodewordValue(Rn.sampleBitCounts(e));return n!==-1?n:Rn.getClosestDecodedValue(e)}static sampleBitCounts(e){let n=ht.sum(e),i=new Int32Array(Je.BARS_IN_MODULE),l=0,u=0;for(let c=0;c<Je.MODULES_IN_CODEWORD;c++){let h=n/(2*Je.MODULES_IN_CODEWORD)+c*n/Je.MODULES_IN_CODEWORD;u+e[l]<=h&&(u+=e[l],l++),i[l]++}return i}static getDecodedCodewordValue(e){let n=Rn.getBitValue(e);return Je.getCodeword(n)===-1?-1:n}static getBitValue(e){let n=0;for(let i=0;i<e.length;i++)for(let l=0;l<e[i];l++)n=n<<1|(i%2===0?1:0);return Math.trunc(n)}static getClosestDecodedValue(e){let n=ht.sum(e),i=new Array(Je.BARS_IN_MODULE);if(n>1)for(let c=0;c<i.length;c++)i[c]=Math.fround(e[c]/n);let l=sr.MAX_VALUE,u=-1;this.bSymbolTableReady||Rn.initialize();for(let c=0;c<Rn.RATIOS_TABLE.length;c++){let h=0,m=Rn.RATIOS_TABLE[c];for(let v=0;v<Je.BARS_IN_MODULE;v++){let N=Math.fround(m[v]-i[v]);if(h+=Math.fround(N*N),h>=l)break}h<l&&(l=h,u=Je.SYMBOL_TABLE[c])}return u}}Rn.bSymbolTableReady=!1,Rn.RATIOS_TABLE=new Array(Je.SYMBOL_TABLE.length).map(_=>new Array(Je.BARS_IN_MODULE));class eo{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class Wo{static parseLong(e,n=void 0){return parseInt(e,n)}}class Xr extends E{}Xr.kind="NullPointerException";class Ho{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,n,i){if(e==null)throw new Xr;if(n<0||n>e.length||i<0||n+i>e.length||n+i<0)throw new j;if(i===0)return;for(let l=0;l<i;l++)this.write(e[n+l])}flush(){}close(){}}class to extends E{}class tl extends Ho{constructor(e=32){if(super(),this.count=0,e<0)throw new I("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let i=this.buf.length<<1;if(i-e<0&&(i=e),i<0){if(e<0)throw new to;i=U.MAX_VALUE}this.buf=H.copyOfUint8Array(this.buf,i)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,n,i){if(n<0||n>e.length||i<0||n+i-e.length>0)throw new j;this.ensureCapacity(this.count+i),B.arraycopy(e,n,this.buf,this.count,i),this.count+=i}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return H.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var Pt;(function(_){_[_.ALPHA=0]="ALPHA",_[_.LOWER=1]="LOWER",_[_.MIXED=2]="MIXED",_[_.PUNCT=3]="PUNCT",_[_.ALPHA_SHIFT=4]="ALPHA_SHIFT",_[_.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Pt||(Pt={}));function As(){if(typeof window<"u")return window.BigInt||null;if(typeof Ql<"u")return Ql.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ss;function hn(_){if(typeof Ss>"u"&&(Ss=As()),Ss===null)throw new Error("BigInt is not supported!");return Ss(_)}function Hi(){let _=[];_[0]=hn(1);let e=hn(900);_[1]=e;for(let n=2;n<16;n++)_[n]=_[n-1]*e;return _}class ae{static decode(e,n){let i=new Re(""),l=J.ISO8859_1;i.enableDecoding(l);let u=1,c=e[u++],h=new eo;for(;u<e[0];){switch(c){case ae.TEXT_COMPACTION_MODE_LATCH:u=ae.textCompaction(e,u,i);break;case ae.BYTE_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:u=ae.byteCompaction(c,e,l,u,i);break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[u++]);break;case ae.NUMERIC_COMPACTION_MODE_LATCH:u=ae.numericCompaction(e,u,i);break;case ae.ECI_CHARSET:J.getCharacterSetECIByValue(e[u++]);break;case ae.ECI_GENERAL_PURPOSE:u+=2;break;case ae.ECI_USER_DEFINED:u++;break;case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=ae.decodeMacroBlock(e,u,h);break;case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:throw new q;default:u--,u=ae.textCompaction(e,u,i);break}if(u<e.length)c=e[u++];else throw q.getFormatInstance()}if(i.length()===0)throw q.getFormatInstance();let m=new rt(null,i.toString(),null,n);return m.setOther(h),m}static decodeMacroBlock(e,n,i){if(n+ae.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw q.getFormatInstance();let l=new Int32Array(ae.NUMBER_OF_SEQUENCE_CODEWORDS);for(let h=0;h<ae.NUMBER_OF_SEQUENCE_CODEWORDS;h++,n++)l[h]=e[n];i.setSegmentIndex(U.parseInt(ae.decodeBase900toBase10(l,ae.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new Re;n=ae.textCompaction(e,n,u),i.setFileId(u.toString());let c=-1;for(e[n]===ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(c=n+1);n<e[0];)switch(e[n]){case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(n++,e[n]){case ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let h=new Re;n=ae.textCompaction(e,n+1,h),i.setFileName(h.toString());break;case ae.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let m=new Re;n=ae.textCompaction(e,n+1,m),i.setSender(m.toString());break;case ae.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let v=new Re;n=ae.textCompaction(e,n+1,v),i.setAddressee(v.toString());break;case ae.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let N=new Re;n=ae.numericCompaction(e,n+1,N),i.setSegmentCount(U.parseInt(N.toString()));break;case ae.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let P=new Re;n=ae.numericCompaction(e,n+1,P),i.setTimestamp(Wo.parseLong(P.toString()));break;case ae.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let D=new Re;n=ae.numericCompaction(e,n+1,D),i.setChecksum(U.parseInt(D.toString()));break;case ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let z=new Re;n=ae.numericCompaction(e,n+1,z),i.setFileSize(Wo.parseLong(z.toString()));break;default:throw q.getFormatInstance()}break;case ae.MACRO_PDF417_TERMINATOR:n++,i.setLastSegment(!0);break;default:throw q.getFormatInstance()}if(c!==-1){let h=n-c;i.isLastSegment()&&h--,i.setOptionalData(H.copyOfRange(e,c,c+h))}return n}static textCompaction(e,n,i){let l=new Int32Array((e[0]-n)*2),u=new Int32Array((e[0]-n)*2),c=0,h=!1;for(;n<e[0]&&!h;){let m=e[n++];if(m<ae.TEXT_COMPACTION_MODE_LATCH)l[c]=m/30,l[c+1]=m%30,c+=2;else switch(m){case ae.TEXT_COMPACTION_MODE_LATCH:l[c++]=ae.TEXT_COMPACTION_MODE_LATCH;break;case ae.BYTE_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.NUMERIC_COMPACTION_MODE_LATCH:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:n--,h=!0;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l[c]=ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,m=e[n++],u[c]=m,c++;break}}return ae.decodeTextCompaction(l,u,c,i),n}static decodeTextCompaction(e,n,i,l){let u=Pt.ALPHA,c=Pt.ALPHA,h=0;for(;h<i;){let m=e[h],v="";switch(u){case Pt.ALPHA:if(m<26)v=String.fromCharCode(65+m);else switch(m){case 26:v=" ";break;case ae.LL:u=Pt.LOWER;break;case ae.ML:u=Pt.MIXED;break;case ae.PS:c=u,u=Pt.PUNCT_SHIFT;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case ae.TEXT_COMPACTION_MODE_LATCH:u=Pt.ALPHA;break}break;case Pt.LOWER:if(m<26)v=String.fromCharCode(97+m);else switch(m){case 26:v=" ";break;case ae.AS:c=u,u=Pt.ALPHA_SHIFT;break;case ae.ML:u=Pt.MIXED;break;case ae.PS:c=u,u=Pt.PUNCT_SHIFT;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case ae.TEXT_COMPACTION_MODE_LATCH:u=Pt.ALPHA;break}break;case Pt.MIXED:if(m<ae.PL)v=ae.MIXED_CHARS[m];else switch(m){case ae.PL:u=Pt.PUNCT;break;case 26:v=" ";break;case ae.LL:u=Pt.LOWER;break;case ae.AL:u=Pt.ALPHA;break;case ae.PS:c=u,u=Pt.PUNCT_SHIFT;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case ae.TEXT_COMPACTION_MODE_LATCH:u=Pt.ALPHA;break}break;case Pt.PUNCT:if(m<ae.PAL)v=ae.PUNCT_CHARS[m];else switch(m){case ae.PAL:u=Pt.ALPHA;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case ae.TEXT_COMPACTION_MODE_LATCH:u=Pt.ALPHA;break}break;case Pt.ALPHA_SHIFT:if(u=c,m<26)v=String.fromCharCode(65+m);else switch(m){case 26:v=" ";break;case ae.TEXT_COMPACTION_MODE_LATCH:u=Pt.ALPHA;break}break;case Pt.PUNCT_SHIFT:if(u=c,m<ae.PAL)v=ae.PUNCT_CHARS[m];else switch(m){case ae.PAL:u=Pt.ALPHA;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case ae.TEXT_COMPACTION_MODE_LATCH:u=Pt.ALPHA;break}break}v!==""&&l.append(v),h++}}static byteCompaction(e,n,i,l,u){let c=new tl,h=0,m=0,v=!1;switch(e){case ae.BYTE_COMPACTION_MODE_LATCH:let N=new Int32Array(6),P=n[l++];for(;l<n[0]&&!v;)switch(N[h++]=P,m=900*m+P,P=n[l++],P){case ae.TEXT_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH:case ae.NUMERIC_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:l--,v=!0;break;default:if(h%5===0&&h>0){for(let D=0;D<6;++D)c.write(Number(hn(m)>>hn(8*(5-D))));m=0,h=0}break}l===n[0]&&P<ae.TEXT_COMPACTION_MODE_LATCH&&(N[h++]=P);for(let D=0;D<h;D++)c.write(N[D]);break;case ae.BYTE_COMPACTION_MODE_LATCH_6:for(;l<n[0]&&!v;){let D=n[l++];if(D<ae.TEXT_COMPACTION_MODE_LATCH)h++,m=900*m+D;else switch(D){case ae.TEXT_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH:case ae.NUMERIC_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:l--,v=!0;break}if(h%5===0&&h>0){for(let z=0;z<6;++z)c.write(Number(hn(m)>>hn(8*(5-z))));m=0,h=0}}break}return u.append(ke.decode(c.toByteArray(),i)),l}static numericCompaction(e,n,i){let l=0,u=!1,c=new Int32Array(ae.MAX_NUMERIC_CODEWORDS);for(;n<e[0]&&!u;){let h=e[n++];if(n===e[0]&&(u=!0),h<ae.TEXT_COMPACTION_MODE_LATCH)c[l]=h,l++;else switch(h){case ae.TEXT_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:n--,u=!0;break}(l%ae.MAX_NUMERIC_CODEWORDS===0||h===ae.NUMERIC_COMPACTION_MODE_LATCH||u)&&l>0&&(i.append(ae.decodeBase900toBase10(c,l)),l=0)}return n}static decodeBase900toBase10(e,n){let i=hn(0);for(let u=0;u<n;u++)i+=ae.EXP900[n-u-1]*hn(e[u]);let l=i.toString();if(l.charAt(0)!=="1")throw new q;return l.substring(1)}}ae.TEXT_COMPACTION_MODE_LATCH=900,ae.BYTE_COMPACTION_MODE_LATCH=901,ae.NUMERIC_COMPACTION_MODE_LATCH=902,ae.BYTE_COMPACTION_MODE_LATCH_6=924,ae.ECI_USER_DEFINED=925,ae.ECI_GENERAL_PURPOSE=926,ae.ECI_CHARSET=927,ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ae.MACRO_PDF417_TERMINATOR=922,ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ae.MAX_NUMERIC_CODEWORDS=15,ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ae.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ae.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ae.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ae.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ae.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ae.PL=25,ae.LL=27,ae.AS=27,ae.ML=28,ae.AL=28,ae.PS=29,ae.PAL=29,ae.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ae.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ae.EXP900=As()?Hi():[],ae.NUMBER_OF_SEQUENCE_CODEWORDS=2;class lt{constructor(){}static decode(e,n,i,l,u,c,h){let m=new Ei(e,n,i,l,u),v=null,N=null,P;for(let G=!0;;G=!1){if(n!=null&&(v=lt.getRowIndicatorColumn(e,m,n,!0,c,h)),l!=null&&(N=lt.getRowIndicatorColumn(e,m,l,!1,c,h)),P=lt.merge(v,N),P==null)throw Z.getNotFoundInstance();let Y=P.getBoundingBox();if(G&&Y!=null&&(Y.getMinY()<m.getMinY()||Y.getMaxY()>m.getMaxY()))m=Y;else break}P.setBoundingBox(m);let D=P.getBarcodeColumnCount()+1;P.setDetectionResultColumn(0,v),P.setDetectionResultColumn(D,N);let z=v!=null;for(let G=1;G<=D;G++){let Y=z?G:D-G;if(P.getDetectionResultColumn(Y)!==void 0)continue;let Q;Y===0||Y===D?Q=new el(m,Y===0):Q=new _r(m),P.setDetectionResultColumn(Y,Q);let oe=-1,Ce=oe;for(let Ae=m.getMinY();Ae<=m.getMaxY();Ae++){if(oe=lt.getStartColumn(P,Y,Ae,z),oe<0||oe>m.getMaxX()){if(Ce===-1)continue;oe=Ce}let xe=lt.detectCodeword(e,m.getMinX(),m.getMaxX(),z,oe,Ae,c,h);xe!=null&&(Q.setCodeword(Ae,xe),Ce=oe,c=Math.min(c,xe.getWidth()),h=Math.max(h,xe.getWidth()))}}return lt.createDecoderResult(P)}static merge(e,n){if(e==null&&n==null)return null;let i=lt.getBarcodeMetadata(e,n);if(i==null)return null;let l=Ei.merge(lt.adjustBoundingBox(e),lt.adjustBoundingBox(n));return new Es(i,l)}static adjustBoundingBox(e){if(e==null)return null;let n=e.getRowHeights();if(n==null)return null;let i=lt.getMax(n),l=0;for(let h of n)if(l+=i-h,h>0)break;let u=e.getCodewords();for(let h=0;l>0&&u[h]==null;h++)l--;let c=0;for(let h=n.length-1;h>=0&&(c+=i-n[h],!(n[h]>0));h--);for(let h=u.length-1;c>0&&u[h]==null;h--)c--;return e.getBoundingBox().addMissingRows(l,c,e.isLeft())}static getMax(e){let n=-1;for(let i of e)n=Math.max(n,i);return n}static getBarcodeMetadata(e,n){let i;if(e==null||(i=e.getBarcodeMetadata())==null)return n==null?null:n.getBarcodeMetadata();let l;return n==null||(l=n.getBarcodeMetadata())==null?i:i.getColumnCount()!==l.getColumnCount()&&i.getErrorCorrectionLevel()!==l.getErrorCorrectionLevel()&&i.getRowCount()!==l.getRowCount()?null:i}static getRowIndicatorColumn(e,n,i,l,u,c){let h=new el(n,l);for(let m=0;m<2;m++){let v=m===0?1:-1,N=Math.trunc(Math.trunc(i.getX()));for(let P=Math.trunc(Math.trunc(i.getY()));P<=n.getMaxY()&&P>=n.getMinY();P+=v){let D=lt.detectCodeword(e,0,e.getWidth(),l,N,P,u,c);D!=null&&(h.setCodeword(P,D),l?N=D.getStartX():N=D.getEndX())}}return h}static adjustCodewordCount(e,n){let i=n[0][1],l=i.getValue(),u=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-lt.getNumberOfECCodeWords(e.getBarcodeECLevel());if(l.length===0){if(u<1||u>Je.MAX_CODEWORDS_IN_BARCODE)throw Z.getNotFoundInstance();i.setValue(u)}else l[0]!==u&&i.setValue(u)}static createDecoderResult(e){let n=lt.createBarcodeMatrix(e);lt.adjustCodewordCount(e,n);let i=new Array,l=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),u=[],c=new Array;for(let m=0;m<e.getBarcodeRowCount();m++)for(let v=0;v<e.getBarcodeColumnCount();v++){let N=n[m][v+1].getValue(),P=m*e.getBarcodeColumnCount()+v;N.length===0?i.push(P):N.length===1?l[P]=N[0]:(c.push(P),u.push(N))}let h=new Array(u.length);for(let m=0;m<h.length;m++)h[m]=u[m];return lt.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),l,Je.toIntArray(i),Je.toIntArray(c),h)}static createDecoderResultFromAmbiguousValues(e,n,i,l,u){let c=new Int32Array(l.length),h=100;for(;h-- >0;){for(let m=0;m<c.length;m++)n[l[m]]=u[m][c[m]];try{return lt.decodeCodewords(n,e,i)}catch(m){if(!(m instanceof k))throw m}if(c.length===0)throw k.getChecksumInstance();for(let m=0;m<c.length;m++)if(c[m]<u[m].length-1){c[m]++;break}else if(c[m]=0,m===c.length-1)throw k.getChecksumInstance()}throw k.getChecksumInstance()}static createBarcodeMatrix(e){let n=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let l=0;l<n.length;l++)for(let u=0;u<n[l].length;u++)n[l][u]=new ii;let i=0;for(let l of e.getDetectionResultColumns()){if(l!=null){for(let u of l.getCodewords())if(u!=null){let c=u.getRowNumber();if(c>=0){if(c>=n.length)continue;n[c][i].setValue(u.getValue())}}}i++}return n}static isValidBarcodeColumn(e,n){return n>=0&&n<=e.getBarcodeColumnCount()+1}static getStartColumn(e,n,i,l){let u=l?1:-1,c=null;if(lt.isValidBarcodeColumn(e,n-u)&&(c=e.getDetectionResultColumn(n-u).getCodeword(i)),c!=null)return l?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(n).getCodewordNearby(i),c!=null)return l?c.getStartX():c.getEndX();if(lt.isValidBarcodeColumn(e,n-u)&&(c=e.getDetectionResultColumn(n-u).getCodewordNearby(i)),c!=null)return l?c.getEndX():c.getStartX();let h=0;for(;lt.isValidBarcodeColumn(e,n-u);){n-=u;for(let m of e.getDetectionResultColumn(n).getCodewords())if(m!=null)return(l?m.getEndX():m.getStartX())+u*h*(m.getEndX()-m.getStartX());h++}return l?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,n,i,l,u,c,h,m){u=lt.adjustCodewordStartColumn(e,n,i,l,u,c);let v=lt.getModuleBitCount(e,n,i,l,u,c);if(v==null)return null;let N,P=ht.sum(v);if(l)N=u+P;else{for(let G=0;G<v.length/2;G++){let Y=v[G];v[G]=v[v.length-1-G],v[v.length-1-G]=Y}N=u,u=N-P}if(!lt.checkCodewordSkew(P,h,m))return null;let D=Rn.getDecodedValue(v),z=Je.getCodeword(D);return z===-1?null:new Ai(u,N,lt.getCodewordBucketNumber(D),z)}static getModuleBitCount(e,n,i,l,u,c){let h=u,m=new Int32Array(8),v=0,N=l?1:-1,P=l;for(;(l?h<i:h>=n)&&v<m.length;)e.get(h,c)===P?(m[v]++,h+=N):(v++,P=!P);return v===m.length||h===(l?i:n)&&v===m.length-1?m:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,n,i,l,u,c){let h=u,m=l?-1:1;for(let v=0;v<2;v++){for(;(l?h>=n:h<i)&&l===e.get(h,c);){if(Math.abs(u-h)>lt.CODEWORD_SKEW_SIZE)return u;h+=m}m=-m,l=!l}return h}static checkCodewordSkew(e,n,i){return n-lt.CODEWORD_SKEW_SIZE<=e&&e<=i+lt.CODEWORD_SKEW_SIZE}static decodeCodewords(e,n,i){if(e.length===0)throw q.getFormatInstance();let l=1<<n+1,u=lt.correctErrors(e,i,l);lt.verifyCodewordCount(e,l);let c=ae.decode(e,""+n);return c.setErrorsCorrected(u),c.setErasures(i.length),c}static correctErrors(e,n,i){if(n!=null&&n.length>i/2+lt.MAX_ERRORS||i<0||i>lt.MAX_EC_CODEWORDS)throw k.getChecksumInstance();return lt.errorCorrection.decode(e,i,n)}static verifyCodewordCount(e,n){if(e.length<4)throw q.getFormatInstance();let i=e[0];if(i>e.length)throw q.getFormatInstance();if(i===0)if(n<e.length)e[0]=e.length-n;else throw q.getFormatInstance()}static getBitCountForCodeword(e){let n=new Int32Array(8),i=0,l=n.length-1;for(;!((e&1)!==i&&(i=e&1,l--,l<0));)n[l]++,e>>=1;return n}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return lt.getCodewordBucketNumber(lt.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let n=new Gr;for(let i=0;i<e.length;i++){n.format("Row %2d: ",i);for(let l=0;l<e[i].length;l++){let u=e[i][l];u.getValue().length===0?n.format("        ",null):n.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}n.format("%n")}return n.toString()}}lt.CODEWORD_SKEW_SIZE=2,lt.MAX_ERRORS=3,lt.MAX_EC_CODEWORDS=512,lt.errorCorrection=new Uo;class _n{decode(e,n=null){let i=_n.decode(e,n,!1);if(i==null||i.length===0||i[0]==null)throw Z.getNotFoundInstance();return i[0]}decodeMultiple(e,n=null){try{return _n.decode(e,n,!0)}catch(i){throw i instanceof q||i instanceof k?Z.getNotFoundInstance():i}}static decode(e,n,i){const l=new Array,u=st.detectMultiple(e,n,i);for(const c of u.getPoints()){const h=lt.decode(u.getBits(),c[4],c[5],c[6],c[7],_n.getMinCodewordWidth(c),_n.getMaxCodewordWidth(c)),m=new We(h.getText(),h.getRawBytes(),void 0,c,Ee.PDF_417);m.putMetadata(He.ERROR_CORRECTION_LEVEL,h.getECLevel());const v=h.getOther();v!=null&&m.putMetadata(He.PDF417_EXTRA_METADATA,v),l.push(m)}return l.map(c=>c)}static getMaxWidth(e,n){return e==null||n==null?0:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMinWidth(e,n){return e==null||n==null?U.MAX_VALUE:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(_n.getMaxWidth(e[0],e[4]),_n.getMaxWidth(e[6],e[2])*Je.MODULES_IN_CODEWORD/Je.MODULES_IN_STOP_PATTERN),Math.max(_n.getMaxWidth(e[1],e[5]),_n.getMaxWidth(e[7],e[3])*Je.MODULES_IN_CODEWORD/Je.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(_n.getMinWidth(e[0],e[4]),_n.getMinWidth(e[6],e[2])*Je.MODULES_IN_CODEWORD/Je.MODULES_IN_STOP_PATTERN),Math.min(_n.getMinWidth(e[1],e[5]),_n.getMinWidth(e[7],e[3])*Je.MODULES_IN_CODEWORD/Je.MODULES_IN_STOP_PATTERN)))}reset(){}}class Gi extends E{}Gi.kind="ReaderException";class no{constructor(e,n){this.verbose=e===!0,n&&this.setHints(n)}decode(e,n){return n&&this.setHints(n),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const n=!d(e)&&e.get(re.TRY_HARDER)===!0,i=d(e)?null:e.get(re.POSSIBLE_FORMATS),l=new Array;if(!d(i)){const u=i.some(c=>c===Ee.UPC_A||c===Ee.UPC_E||c===Ee.EAN_13||c===Ee.EAN_8||c===Ee.CODABAR||c===Ee.CODE_39||c===Ee.CODE_93||c===Ee.CODE_128||c===Ee.ITF||c===Ee.RSS_14||c===Ee.RSS_EXPANDED);u&&!n&&l.push(new Wr(e,this.verbose)),i.includes(Ee.QR_CODE)&&l.push(new Fn),i.includes(Ee.DATA_MATRIX)&&l.push(new Cr),i.includes(Ee.AZTEC)&&l.push(new nn),i.includes(Ee.PDF_417)&&l.push(new _n),u&&n&&l.push(new Wr(e,this.verbose))}l.length===0&&(n||l.push(new Wr(e,this.verbose)),l.push(new Fn),l.push(new Cr),l.push(new nn),l.push(new _n),n&&l.push(new Wr(e,this.verbose))),this.readers=l}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new Gi("No readers where selected, nothing can be read.");for(const n of this.readers)try{return n.decode(e,this.hints)}catch(i){if(i instanceof Gi)continue}throw new Z("No MultiFormat Readers were able to detect the code.")}}class bs extends Ge{constructor(e=null,n=500){const i=new no;i.setHints(e),super(i,n)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class ro extends Ge{constructor(e=500){super(new _n,e)}}class nl extends Ge{constructor(e=500){super(new Fn,e)}}var Go;(function(_){_[_.ERROR_CORRECTION=0]="ERROR_CORRECTION",_[_.CHARACTER_SET=1]="CHARACTER_SET",_[_.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",_[_.MIN_SIZE=3]="MIN_SIZE",_[_.MAX_SIZE=4]="MAX_SIZE",_[_.MARGIN=5]="MARGIN",_[_.PDF417_COMPACT=6]="PDF417_COMPACT",_[_.PDF417_COMPACTION=7]="PDF417_COMPACTION",_[_.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",_[_.AZTEC_LAYERS=9]="AZTEC_LAYERS",_[_.QR_VERSION=10]="QR_VERSION"})(Go||(Go={}));var vn=Go;class Xo{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Ne(e,Int32Array.from([1])))}buildGenerator(e){const n=this.cachedGenerators;if(e>=n.length){let i=n[n.length-1];const l=this.field;for(let u=n.length;u<=e;u++){const c=i.multiply(new Ne(l,Int32Array.from([1,l.exp(u-1+l.getGeneratorBase())])));n.push(c),i=c}}return n[e]}encode(e,n){if(n===0)throw new I("No error correction bytes");const i=e.length-n;if(i<=0)throw new I("No data bytes provided");const l=this.buildGenerator(n),u=new Int32Array(i);B.arraycopy(e,0,u,0,i);let c=new Ne(this.field,u);c=c.multiplyByMonomial(n,1);const m=c.divide(l)[1].getCoefficients(),v=n-m.length;for(let N=0;N<v;N++)e[i+N]=0;B.arraycopy(m,0,e,i+v,m.length)}}class Yt{constructor(){}static applyMaskPenaltyRule1(e){return Yt.applyMaskPenaltyRule1Internal(e,!0)+Yt.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let n=0;const i=e.getArray(),l=e.getWidth(),u=e.getHeight();for(let c=0;c<u-1;c++){const h=i[c];for(let m=0;m<l-1;m++){const v=h[m];v===h[m+1]&&v===i[c+1][m]&&v===i[c+1][m+1]&&n++}}return Yt.N2*n}static applyMaskPenaltyRule3(e){let n=0;const i=e.getArray(),l=e.getWidth(),u=e.getHeight();for(let c=0;c<u;c++)for(let h=0;h<l;h++){const m=i[c];h+6<l&&m[h]===1&&m[h+1]===0&&m[h+2]===1&&m[h+3]===1&&m[h+4]===1&&m[h+5]===0&&m[h+6]===1&&(Yt.isWhiteHorizontal(m,h-4,h)||Yt.isWhiteHorizontal(m,h+7,h+11))&&n++,c+6<u&&i[c][h]===1&&i[c+1][h]===0&&i[c+2][h]===1&&i[c+3][h]===1&&i[c+4][h]===1&&i[c+5][h]===0&&i[c+6][h]===1&&(Yt.isWhiteVertical(i,h,c-4,c)||Yt.isWhiteVertical(i,h,c+7,c+11))&&n++}return n*Yt.N3}static isWhiteHorizontal(e,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(let l=n;l<i;l++)if(e[l]===1)return!1;return!0}static isWhiteVertical(e,n,i,l){i=Math.max(i,0),l=Math.min(l,e.length);for(let u=i;u<l;u++)if(e[u][n]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let n=0;const i=e.getArray(),l=e.getWidth(),u=e.getHeight();for(let m=0;m<u;m++){const v=i[m];for(let N=0;N<l;N++)v[N]===1&&n++}const c=e.getHeight()*e.getWidth();return Math.floor(Math.abs(n*2-c)*10/c)*Yt.N4}static getDataMaskBit(e,n,i){let l,u;switch(e){case 0:l=i+n&1;break;case 1:l=i&1;break;case 2:l=n%3;break;case 3:l=(i+n)%3;break;case 4:l=Math.floor(i/2)+Math.floor(n/3)&1;break;case 5:u=i*n,l=(u&1)+u%3;break;case 6:u=i*n,l=(u&1)+u%3&1;break;case 7:u=i*n,l=u%3+(i+n&1)&1;break;default:throw new I("Invalid mask pattern: "+e)}return l===0}static applyMaskPenaltyRule1Internal(e,n){let i=0;const l=n?e.getHeight():e.getWidth(),u=n?e.getWidth():e.getHeight(),c=e.getArray();for(let h=0;h<l;h++){let m=0,v=-1;for(let N=0;N<u;N++){const P=n?c[h][N]:c[N][h];P===v?m++:(m>=5&&(i+=Yt.N1+(m-5)),m=1,v=P)}m>=5&&(i+=Yt.N1+(m-5))}return i}}Yt.N1=3,Yt.N2=3,Yt.N3=40,Yt.N4=10;class io{constructor(e,n){this.width=e,this.height=n;const i=new Array(n);for(let l=0;l!==n;l++)i[l]=new Uint8Array(e);this.bytes=i}getHeight(){return this.height}getWidth(){return this.width}get(e,n){return this.bytes[n][e]}getArray(){return this.bytes}setNumber(e,n,i){this.bytes[n][e]=i}setBoolean(e,n,i){this.bytes[n][e]=i?1:0}clear(e){for(const n of this.bytes)H.fill(n,e)}equals(e){if(!(e instanceof io))return!1;const n=e;if(this.width!==n.width||this.height!==n.height)return!1;for(let i=0,l=this.height;i<l;++i){const u=this.bytes[i],c=n.bytes[i];for(let h=0,m=this.width;h<m;++h)if(u[h]!==c[h])return!1}return!0}toString(){const e=new Re;for(let n=0,i=this.height;n<i;++n){const l=this.bytes[n];for(let u=0,c=this.width;u<c;++u)switch(l[u]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class Si{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new Re;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Si.NUM_MASK_PATTERNS}}Si.NUM_MASK_PATTERNS=8;class Vt extends E{}Vt.kind="WriterException";class Ze{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,n,i,l,u){Ze.clearMatrix(u),Ze.embedBasicPatterns(i,u),Ze.embedTypeInfo(n,l,u),Ze.maybeEmbedVersionInfo(i,u),Ze.embedDataBits(e,l,u)}static embedBasicPatterns(e,n){Ze.embedPositionDetectionPatternsAndSeparators(n),Ze.embedDarkDotAtLeftBottomCorner(n),Ze.maybeEmbedPositionAdjustmentPatterns(e,n),Ze.embedTimingPatterns(n)}static embedTypeInfo(e,n,i){const l=new ne;Ze.makeTypeInfoBits(e,n,l);for(let u=0,c=l.getSize();u<c;++u){const h=l.get(l.getSize()-1-u),m=Ze.TYPE_INFO_COORDINATES[u],v=m[0],N=m[1];if(i.setBoolean(v,N,h),u<8){const P=i.getWidth()-u-1;i.setBoolean(P,8,h)}else{const D=i.getHeight()-7+(u-8);i.setBoolean(8,D,h)}}}static maybeEmbedVersionInfo(e,n){if(e.getVersionNumber()<7)return;const i=new ne;Ze.makeVersionInfoBits(e,i);let l=6*3-1;for(let u=0;u<6;++u)for(let c=0;c<3;++c){const h=i.get(l);l--,n.setBoolean(u,n.getHeight()-11+c,h),n.setBoolean(n.getHeight()-11+c,u,h)}}static embedDataBits(e,n,i){let l=0,u=-1,c=i.getWidth()-1,h=i.getHeight()-1;for(;c>0;){for(c===6&&(c-=1);h>=0&&h<i.getHeight();){for(let m=0;m<2;++m){const v=c-m;if(!Ze.isEmpty(i.get(v,h)))continue;let N;l<e.getSize()?(N=e.get(l),++l):N=!1,n!==255&&Yt.getDataMaskBit(n,v,h)&&(N=!N),i.setBoolean(v,h,N)}h+=u}u=-u,h+=u,c-=2}if(l!==e.getSize())throw new Vt("Not all bits consumed: "+l+"/"+e.getSize())}static findMSBSet(e){return 32-U.numberOfLeadingZeros(e)}static calculateBCHCode(e,n){if(n===0)throw new I("0 polynomial");const i=Ze.findMSBSet(n);for(e<<=i-1;Ze.findMSBSet(e)>=i;)e^=n<<Ze.findMSBSet(e)-i;return e}static makeTypeInfoBits(e,n,i){if(!Si.isValidMaskPattern(n))throw new Vt("Invalid mask pattern");const l=e.getBits()<<3|n;i.appendBits(l,5);const u=Ze.calculateBCHCode(l,Ze.TYPE_INFO_POLY);i.appendBits(u,10);const c=new ne;if(c.appendBits(Ze.TYPE_INFO_MASK_PATTERN,15),i.xor(c),i.getSize()!==15)throw new Vt("should not happen but we got: "+i.getSize())}static makeVersionInfoBits(e,n){n.appendBits(e.getVersionNumber(),6);const i=Ze.calculateBCHCode(e.getVersionNumber(),Ze.VERSION_INFO_POLY);if(n.appendBits(i,12),n.getSize()!==18)throw new Vt("should not happen but we got: "+n.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let n=8;n<e.getWidth()-8;++n){const i=(n+1)%2;Ze.isEmpty(e.get(n,6))&&e.setNumber(n,6,i),Ze.isEmpty(e.get(6,n))&&e.setNumber(6,n,i)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new Vt;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,n,i){for(let l=0;l<8;++l){if(!Ze.isEmpty(i.get(e+l,n)))throw new Vt;i.setNumber(e+l,n,0)}}static embedVerticalSeparationPattern(e,n,i){for(let l=0;l<7;++l){if(!Ze.isEmpty(i.get(e,n+l)))throw new Vt;i.setNumber(e,n+l,0)}}static embedPositionAdjustmentPattern(e,n,i){for(let l=0;l<5;++l){const u=Ze.POSITION_ADJUSTMENT_PATTERN[l];for(let c=0;c<5;++c)i.setNumber(e+c,n+l,u[c])}}static embedPositionDetectionPattern(e,n,i){for(let l=0;l<7;++l){const u=Ze.POSITION_DETECTION_PATTERN[l];for(let c=0;c<7;++c)i.setNumber(e+c,n+l,u[c])}}static embedPositionDetectionPatternsAndSeparators(e){const n=Ze.POSITION_DETECTION_PATTERN[0].length;Ze.embedPositionDetectionPattern(0,0,e),Ze.embedPositionDetectionPattern(e.getWidth()-n,0,e),Ze.embedPositionDetectionPattern(0,e.getWidth()-n,e);const i=8;Ze.embedHorizontalSeparationPattern(0,i-1,e),Ze.embedHorizontalSeparationPattern(e.getWidth()-i,i-1,e),Ze.embedHorizontalSeparationPattern(0,e.getWidth()-i,e);const l=7;Ze.embedVerticalSeparationPattern(l,0,e),Ze.embedVerticalSeparationPattern(e.getHeight()-l-1,0,e),Ze.embedVerticalSeparationPattern(l,e.getHeight()-l,e)}static maybeEmbedPositionAdjustmentPatterns(e,n){if(e.getVersionNumber()<2)return;const i=e.getVersionNumber()-1,l=Ze.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[i];for(let u=0,c=l.length;u!==c;u++){const h=l[u];if(h>=0)for(let m=0;m!==c;m++){const v=l[m];v>=0&&Ze.isEmpty(n.get(v,h))&&Ze.embedPositionAdjustmentPattern(v-2,h-2,n)}}}}Ze.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ze.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ze.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ze.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ze.VERSION_INFO_POLY=7973,Ze.TYPE_INFO_POLY=1335,Ze.TYPE_INFO_MASK_PATTERN=21522;class Lu{constructor(e,n){this.dataBytes=e,this.errorCorrectionBytes=n}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Wt{constructor(){}static calculateMaskPenalty(e){return Yt.applyMaskPenaltyRule1(e)+Yt.applyMaskPenaltyRule2(e)+Yt.applyMaskPenaltyRule3(e)+Yt.applyMaskPenaltyRule4(e)}static encode(e,n,i=null){let l=Wt.DEFAULT_BYTE_MODE_ENCODING;const u=i!==null&&i.get(vn.CHARACTER_SET)!==void 0;u&&(l=i.get(vn.CHARACTER_SET).toString());const c=this.chooseMode(e,l),h=new ne;if(c===Ke.BYTE&&(u||Wt.DEFAULT_BYTE_MODE_ENCODING!==l)){const Ae=J.getCharacterSetECIByName(l);Ae!==void 0&&this.appendECI(Ae,h)}this.appendModeInfo(c,h);const m=new ne;this.appendBytes(e,c,m,l);let v;if(i!==null&&i.get(vn.QR_VERSION)!==void 0){const Ae=Number.parseInt(i.get(vn.QR_VERSION).toString(),10);v=Ye.getVersionForNumber(Ae);const xe=this.calculateBitsNeeded(c,h,m,v);if(!this.willFit(xe,v,n))throw new Vt("Data too big for requested version")}else v=this.recommendVersion(n,c,h,m);const N=new ne;N.appendBitArray(h);const P=c===Ke.BYTE?m.getSizeInBytes():e.length;this.appendLengthInfo(P,v,c,N),N.appendBitArray(m);const D=v.getECBlocksForLevel(n),z=v.getTotalCodewords()-D.getTotalECCodewords();this.terminateBits(z,N);const G=this.interleaveWithECBytes(N,v.getTotalCodewords(),z,D.getNumBlocks()),Y=new Si;Y.setECLevel(n),Y.setMode(c),Y.setVersion(v);const Q=v.getDimensionForVersion(),oe=new io(Q,Q),Ce=this.chooseMaskPattern(G,n,v,oe);return Y.setMaskPattern(Ce),Ze.buildMatrix(G,n,v,Ce,oe),Y.setMatrix(oe),Y}static recommendVersion(e,n,i,l){const u=this.calculateBitsNeeded(n,i,l,Ye.getVersionForNumber(1)),c=this.chooseVersion(u,e),h=this.calculateBitsNeeded(n,i,l,c);return this.chooseVersion(h,e)}static calculateBitsNeeded(e,n,i,l){return n.getSize()+e.getCharacterCountBits(l)+i.getSize()}static getAlphanumericCode(e){return e<Wt.ALPHANUMERIC_TABLE.length?Wt.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,n=null){if(J.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(e))return Ke.KANJI;let i=!1,l=!1;for(let u=0,c=e.length;u<c;++u){const h=e.charAt(u);if(Wt.isDigit(h))i=!0;else if(this.getAlphanumericCode(h.charCodeAt(0))!==-1)l=!0;else return Ke.BYTE}return l?Ke.ALPHANUMERIC:i?Ke.NUMERIC:Ke.BYTE}static isOnlyDoubleByteKanji(e){let n;try{n=ke.encode(e,J.SJIS)}catch{return!1}const i=n.length;if(i%2!==0)return!1;for(let l=0;l<i;l+=2){const u=n[l]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(e,n,i,l){let u=Number.MAX_SAFE_INTEGER,c=-1;for(let h=0;h<Si.NUM_MASK_PATTERNS;h++){Ze.buildMatrix(e,n,i,h,l);let m=this.calculateMaskPenalty(l);m<u&&(u=m,c=h)}return c}static chooseVersion(e,n){for(let i=1;i<=40;i++){const l=Ye.getVersionForNumber(i);if(Wt.willFit(e,l,n))return l}throw new Vt("Data too big")}static willFit(e,n,i){const l=n.getTotalCodewords(),c=n.getECBlocksForLevel(i).getTotalECCodewords(),h=l-c,m=(e+7)/8;return h>=m}static terminateBits(e,n){const i=e*8;if(n.getSize()>i)throw new Vt("data bits cannot fit in the QR Code"+n.getSize()+" > "+i);for(let c=0;c<4&&n.getSize()<i;++c)n.appendBit(!1);const l=n.getSize()&7;if(l>0)for(let c=l;c<8;c++)n.appendBit(!1);const u=e-n.getSizeInBytes();for(let c=0;c<u;++c)n.appendBits(c&1?17:236,8);if(n.getSize()!==i)throw new Vt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,n,i,l,u,c){if(l>=i)throw new Vt("Block ID too large");const h=e%i,m=i-h,v=Math.floor(e/i),N=v+1,P=Math.floor(n/i),D=P+1,z=v-P,G=N-D;if(z!==G)throw new Vt("EC bytes mismatch");if(i!==m+h)throw new Vt("RS blocks mismatch");if(e!==(P+z)*m+(D+G)*h)throw new Vt("Total bytes mismatch");l<m?(u[0]=P,c[0]=z):(u[0]=D,c[0]=G)}static interleaveWithECBytes(e,n,i,l){if(e.getSizeInBytes()!==i)throw new Vt("Number of bits and data bytes does not match");let u=0,c=0,h=0;const m=new Array;for(let N=0;N<l;++N){const P=new Int32Array(1),D=new Int32Array(1);Wt.getNumDataBytesAndNumECBytesForBlockID(n,i,l,N,P,D);const z=P[0],G=new Uint8Array(z);e.toBytes(8*u,G,0,z);const Y=Wt.generateECBytes(G,D[0]);m.push(new Lu(G,Y)),c=Math.max(c,z),h=Math.max(h,Y.length),u+=P[0]}if(i!==u)throw new Vt("Data bytes does not match offset");const v=new ne;for(let N=0;N<c;++N)for(const P of m){const D=P.getDataBytes();N<D.length&&v.appendBits(D[N],8)}for(let N=0;N<h;++N)for(const P of m){const D=P.getErrorCorrectionBytes();N<D.length&&v.appendBits(D[N],8)}if(n!==v.getSizeInBytes())throw new Vt("Interleaving error: "+n+" and "+v.getSizeInBytes()+" differ.");return v}static generateECBytes(e,n){const i=e.length,l=new Int32Array(i+n);for(let c=0;c<i;c++)l[c]=e[c]&255;new Xo(Oe.QR_CODE_FIELD_256).encode(l,n);const u=new Uint8Array(n);for(let c=0;c<n;c++)u[c]=l[i+c];return u}static appendModeInfo(e,n){n.appendBits(e.getBits(),4)}static appendLengthInfo(e,n,i,l){const u=i.getCharacterCountBits(n);if(e>=1<<u)throw new Vt(e+" is bigger than "+((1<<u)-1));l.appendBits(e,u)}static appendBytes(e,n,i,l){switch(n){case Ke.NUMERIC:Wt.appendNumericBytes(e,i);break;case Ke.ALPHANUMERIC:Wt.appendAlphanumericBytes(e,i);break;case Ke.BYTE:Wt.append8BitBytes(e,i,l);break;case Ke.KANJI:Wt.appendKanjiBytes(e,i);break;default:throw new Vt("Invalid mode: "+n)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const n=Wt.getDigit(e);return n>=0&&n<=9}static appendNumericBytes(e,n){const i=e.length;let l=0;for(;l<i;){const u=Wt.getDigit(e.charAt(l));if(l+2<i){const c=Wt.getDigit(e.charAt(l+1)),h=Wt.getDigit(e.charAt(l+2));n.appendBits(u*100+c*10+h,10),l+=3}else if(l+1<i){const c=Wt.getDigit(e.charAt(l+1));n.appendBits(u*10+c,7),l+=2}else n.appendBits(u,4),l++}}static appendAlphanumericBytes(e,n){const i=e.length;let l=0;for(;l<i;){const u=Wt.getAlphanumericCode(e.charCodeAt(l));if(u===-1)throw new Vt;if(l+1<i){const c=Wt.getAlphanumericCode(e.charCodeAt(l+1));if(c===-1)throw new Vt;n.appendBits(u*45+c,11),l+=2}else n.appendBits(u,6),l++}}static append8BitBytes(e,n,i){let l;try{l=ke.encode(e,i)}catch(u){throw new Vt(u)}for(let u=0,c=l.length;u!==c;u++){const h=l[u];n.appendBits(h,8)}}static appendKanjiBytes(e,n){let i;try{i=ke.encode(e,J.SJIS)}catch(u){throw new Vt(u)}const l=i.length;for(let u=0;u<l;u+=2){const c=i[u]&255,h=i[u+1]&255,m=c<<8&4294967295|h;let v=-1;if(m>=33088&&m<=40956?v=m-33088:m>=57408&&m<=60351&&(v=m-49472),v===-1)throw new Vt("Invalid byte sequence");const N=(v>>8)*192+(v&255);n.appendBits(N,13)}}static appendECI(e,n){n.appendBits(Ke.ECI.getBits(),4),n.appendBits(e.getValue(),8)}}Wt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Wt.DEFAULT_BYTE_MODE_ENCODING=J.UTF8.getName();class bi{write(e,n,i,l=null){if(e.length===0)throw new I("Found empty contents");if(n<0||i<0)throw new I("Requested dimensions are too small: "+n+"x"+i);let u=Ft.L,c=bi.QUIET_ZONE_SIZE;l!==null&&(l.get(vn.ERROR_CORRECTION)!==void 0&&(u=Ft.fromString(l.get(vn.ERROR_CORRECTION).toString())),l.get(vn.MARGIN)!==void 0&&(c=Number.parseInt(l.get(vn.MARGIN).toString(),10)));const h=Wt.encode(e,u,l);return this.renderResult(h,n,i,c)}writeToDom(e,n,i,l,u=null){typeof e=="string"&&(e=document.querySelector(e));const c=this.write(n,i,l,u);e&&e.appendChild(c)}renderResult(e,n,i,l){const u=e.getMatrix();if(u===null)throw new Ht;const c=u.getWidth(),h=u.getHeight(),m=c+l*2,v=h+l*2,N=Math.max(n,m),P=Math.max(i,v),D=Math.min(Math.floor(N/m),Math.floor(P/v)),z=Math.floor((N-c*D)/2),G=Math.floor((P-h*D)/2),Y=this.createSVGElement(N,P);for(let Q=0,oe=G;Q<h;Q++,oe+=D)for(let Ce=0,Ae=z;Ce<c;Ce++,Ae+=D)if(u.get(Ce,Q)===1){const xe=this.createSvgRectElement(Ae,oe,D,D);Y.appendChild(xe)}return Y}createSVGElement(e,n){const i=document.createElementNS(bi.SVG_NS,"svg");return i.setAttributeNS(null,"height",e.toString()),i.setAttributeNS(null,"width",n.toString()),i}createSvgRectElement(e,n,i,l){const u=document.createElementNS(bi.SVG_NS,"rect");return u.setAttributeNS(null,"x",e.toString()),u.setAttributeNS(null,"y",n.toString()),u.setAttributeNS(null,"height",i.toString()),u.setAttributeNS(null,"width",l.toString()),u.setAttributeNS(null,"fill","#000000"),u}}bi.QUIET_ZONE_SIZE=4,bi.SVG_NS="http://www.w3.org/2000/svg";class Xi{encode(e,n,i,l,u){if(e.length===0)throw new I("Found empty contents");if(n!==Ee.QR_CODE)throw new I("Can only encode QR_CODE, but got "+n);if(i<0||l<0)throw new I(`Requested dimensions are too small: ${i}x${l}`);let c=Ft.L,h=Xi.QUIET_ZONE_SIZE;u!==null&&(u.get(vn.ERROR_CORRECTION)!==void 0&&(c=Ft.fromString(u.get(vn.ERROR_CORRECTION).toString())),u.get(vn.MARGIN)!==void 0&&(h=Number.parseInt(u.get(vn.MARGIN).toString(),10)));const m=Wt.encode(e,c,u);return Xi.renderResult(m,i,l,h)}static renderResult(e,n,i,l){const u=e.getMatrix();if(u===null)throw new Ht;const c=u.getWidth(),h=u.getHeight(),m=c+l*2,v=h+l*2,N=Math.max(n,m),P=Math.max(i,v),D=Math.min(Math.floor(N/m),Math.floor(P/v)),z=Math.floor((N-c*D)/2),G=Math.floor((P-h*D)/2),Y=new De(N,P);for(let Q=0,oe=G;Q<h;Q++,oe+=D)for(let Ce=0,Ae=z;Ce<c;Ce++,Ae+=D)u.get(Ce,Q)===1&&Y.setRegion(Ae,oe,D,D);return Y}}Xi.QUIET_ZONE_SIZE=4;class Bu{encode(e,n,i,l,u){let c;switch(n){case Ee.QR_CODE:c=new Xi;break;default:throw new I("No encoder available for format "+n)}return c.encode(e,n,i,l,u)}}class Pr extends ce{constructor(e,n,i,l,u,c,h,m){if(super(c,h),this.yuvData=e,this.dataWidth=n,this.dataHeight=i,this.left=l,this.top=u,l+c>n||u+h>i)throw new I("Crop rectangle does not fit within image data.");m&&this.reverseHorizontal(c,h)}getRow(e,n){if(e<0||e>=this.getHeight())throw new I("Requested row is outside the image: "+e);const i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));const l=(e+this.top)*this.dataWidth+this.left;return B.arraycopy(this.yuvData,l,n,0,i),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.yuvData;const i=e*n,l=new Uint8ClampedArray(i);let u=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return B.arraycopy(this.yuvData,u,l,0,i),l;for(let c=0;c<n;c++){const h=c*e;B.arraycopy(this.yuvData,u,l,h,e),u+=this.dataWidth}return l}isCropSupported(){return!0}crop(e,n,i,l){return new Pr(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+n,i,l,!1)}renderThumbnail(){const e=this.getWidth()/Pr.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/Pr.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(e*n),l=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let c=0;c<n;c++){const h=c*e;for(let m=0;m<e;m++){const v=l[u+m*Pr.THUMBNAIL_SCALE_FACTOR]&255;i[h+m]=4278190080|v*65793}u+=this.dataWidth*Pr.THUMBNAIL_SCALE_FACTOR}return i}getThumbnailWidth(){return this.getWidth()/Pr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Pr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,n){const i=this.yuvData;for(let l=0,u=this.top*this.dataWidth+this.left;l<n;l++,u+=this.dataWidth){const c=u+e/2;for(let h=u,m=u+e-1;h<c;h++,m--){const v=i[h];i[h]=i[m],i[m]=v}}}invert(){return new ge(this)}}Pr.THUMBNAIL_SCALE_FACTOR=2;class Ts extends ce{constructor(e,n,i,l,u,c,h){if(super(n,i),this.dataWidth=l,this.dataHeight=u,this.left=c,this.top=h,e.BYTES_PER_ELEMENT===4){const m=n*i,v=new Uint8ClampedArray(m);for(let N=0;N<m;N++){const P=e[N],D=P>>16&255,z=P>>7&510,G=P&255;v[N]=(D+z+G)/4&255}this.luminances=v}else this.luminances=e;if(l===void 0&&(this.dataWidth=n),u===void 0&&(this.dataHeight=i),c===void 0&&(this.left=0),h===void 0&&(this.top=0),this.left+n>this.dataWidth||this.top+i>this.dataHeight)throw new I("Crop rectangle does not fit within image data.")}getRow(e,n){if(e<0||e>=this.getHeight())throw new I("Requested row is outside the image: "+e);const i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));const l=(e+this.top)*this.dataWidth+this.left;return B.arraycopy(this.luminances,l,n,0,i),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.luminances;const i=e*n,l=new Uint8ClampedArray(i);let u=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return B.arraycopy(this.luminances,u,l,0,i),l;for(let c=0;c<n;c++){const h=c*e;B.arraycopy(this.luminances,u,l,h,e),u+=this.dataWidth}return l}isCropSupported(){return!0}crop(e,n,i,l){return new Ts(this.luminances,i,l,this.dataWidth,this.dataHeight,this.left+e,this.top+n)}invert(){return new ge(this)}}class rl extends J{static forName(e){return this.getCharacterSetECIByName(e)}}class Yo{}Yo.ISO_8859_1=J.ISO8859_1;class il{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Ko{static singletonList(e){return[e]}static min(e,n){return e.sort(n)[0]}}class Fu{constructor(e){this.previous=e}getPrevious(){return this.previous}}class Yi extends Fu{constructor(e,n,i){super(e),this.value=n,this.bitCount=i}appendTo(e,n){e.appendBits(this.value,this.bitCount)}add(e,n){return new Yi(this,e,n)}addBinaryShift(e,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Yi(this,e,n)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+U.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Zo extends Yi{constructor(e,n,i){super(e,0,0),this.binaryShiftStart=n,this.binaryShiftByteCount=i}appendTo(e,n){for(let i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):i===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(n[this.binaryShiftStart+i],8)}addBinaryShift(e,n){return new Zo(this,e,n)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function ju(_,e,n){return new Zo(_,e,n)}function Is(_,e,n){return new Yi(_,e,n)}const Vu=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],si=0,Ki=1,Mn=2,sl=3,Ar=4,ol=new Yi(null,0,0),so=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function al(_){for(let e of _)H.fill(e,-1);return _[si][Ar]=0,_[Ki][Ar]=0,_[Ki][si]=28,_[sl][Ar]=0,_[Mn][Ar]=0,_[Mn][si]=15,_}const $o=al(H.createInt32Array(6,6));class jn{constructor(e,n,i,l){this.token=e,this.mode=n,this.binaryShiftByteCount=i,this.bitCount=l}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,n){let i=this.bitCount,l=this.token;if(e!==this.mode){let c=so[this.mode][e];l=Is(l,c&65535,c>>16),i+=c>>16}let u=e===Mn?4:5;return l=Is(l,n,u),new jn(l,e,0,i+u)}shiftAndAppend(e,n){let i=this.token,l=this.mode===Mn?4:5;return i=Is(i,$o[this.mode][e],l),i=Is(i,n,5),new jn(i,this.mode,0,this.bitCount+l+5)}addBinaryShiftChar(e){let n=this.token,i=this.mode,l=this.bitCount;if(this.mode===Ar||this.mode===Mn){let h=so[i][si];n=Is(n,h&65535,h>>16),l+=h>>16,i=si}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,c=new jn(n,i,this.binaryShiftByteCount+1,l+u);return c.binaryShiftByteCount===2078&&(c=c.endBinaryShift(e+1)),c}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let n=this.token;return n=ju(n,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new jn(n,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let n=this.bitCount+(so[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?n+=jn.calculateBinaryShiftCost(e)-jn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(n+=10),n<=e.bitCount}toBitArray(e){let n=[];for(let l=this.endBinaryShift(e.length).token;l!==null;l=l.getPrevious())n.unshift(l);let i=new ne;for(const l of n)l.appendTo(i,e);return i}toString(){return be.format("%s bits=%d bytes=%d",Vu[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}jn.INITIAL_STATE=new jn(ol,si,0,0);function zu(_){const e=be.getCharCode(" "),n=be.getCharCode("."),i=be.getCharCode(",");_[si][e]=1;const l=be.getCharCode("Z"),u=be.getCharCode("A");for(let D=u;D<=l;D++)_[si][D]=D-u+2;_[Ki][e]=1;const c=be.getCharCode("z"),h=be.getCharCode("a");for(let D=h;D<=c;D++)_[Ki][D]=D-h+2;_[Mn][e]=1;const m=be.getCharCode("9"),v=be.getCharCode("0");for(let D=v;D<=m;D++)_[Mn][D]=D-v+2;_[Mn][i]=12,_[Mn][n]=13;const N=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let D=0;D<N.length;D++)_[sl][be.getCharCode(N[D])]=D;const P=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let D=0;D<P.length;D++)be.getCharCode(P[D])>0&&(_[Ar][be.getCharCode(P[D])]=D);return _}const qo=zu(H.createInt32Array(5,256));class Ns{constructor(e){this.text=e}encode(){const e=be.getCharCode(" "),n=be.getCharCode(`
`);let i=Ko.singletonList(jn.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let c,h=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case be.getCharCode("\r"):c=h===n?2:0;break;case be.getCharCode("."):c=h===e?3:0;break;case be.getCharCode(","):c=h===e?4:0;break;case be.getCharCode(":"):c=h===e?5:0;break;default:c=0}c>0?(i=Ns.updateStateListForPair(i,u,c),u++):i=this.updateStateListForChar(i,u)}return Ko.min(i,(u,c)=>u.getBitCount()-c.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,n){const i=[];for(let l of e)this.updateStateForChar(l,n,i);return Ns.simplifyStates(i)}updateStateForChar(e,n,i){let l=this.text[n]&255,u=qo[e.getMode()][l]>0,c=null;for(let h=0;h<=Ar;h++){let m=qo[h][l];if(m>0){if(c==null&&(c=e.endBinaryShift(n)),!u||h===e.getMode()||h===Mn){const v=c.latchAndAppend(h,m);i.push(v)}if(!u&&$o[e.getMode()][h]>=0){const v=c.shiftAndAppend(h,m);i.push(v)}}}if(e.getBinaryShiftByteCount()>0||qo[e.getMode()][l]===0){let h=e.addBinaryShiftChar(n);i.push(h)}}static updateStateListForPair(e,n,i){const l=[];for(let u of e)this.updateStateForPair(u,n,i,l);return this.simplifyStates(l)}static updateStateForPair(e,n,i,l){let u=e.endBinaryShift(n);if(l.push(u.latchAndAppend(Ar,i)),e.getMode()!==Ar&&l.push(u.shiftAndAppend(Ar,i)),i===3||i===4){let c=u.latchAndAppend(Mn,16-i).latchAndAppend(Mn,1);l.push(c)}if(e.getBinaryShiftByteCount()>0){let c=e.addBinaryShiftChar(n).addBinaryShiftChar(n+1);l.push(c)}}static simplifyStates(e){let n=[];for(const i of e){let l=!0;for(const u of n){if(u.isBetterThanOrEqualTo(i)){l=!1;break}i.isBetterThanOrEqualTo(u)&&(n=n.filter(c=>c!==u))}l&&n.push(i)}return n}}class bt{constructor(){}static encodeBytes(e){return bt.encode(e,bt.DEFAULT_EC_PERCENT,bt.DEFAULT_AZTEC_LAYERS)}static encode(e,n,i){let l=new Ns(e).encode(),u=U.truncDivision(l.getSize()*n,100)+11,c=l.getSize()+u,h,m,v,N,P;if(i!==bt.DEFAULT_AZTEC_LAYERS){if(h=i<0,m=Math.abs(i),m>(h?bt.MAX_NB_BITS_COMPACT:bt.MAX_NB_BITS))throw new I(be.format("Illegal value %s for layers",i));v=bt.totalBitsInLayer(m,h),N=bt.WORD_SIZE[m];let xe=v-v%N;if(P=bt.stuffBits(l,N),P.getSize()+u>xe)throw new I("Data to large for user specified layer");if(h&&P.getSize()>N*64)throw new I("Data to large for user specified layer")}else{N=0,P=null;for(let xe=0;;xe++){if(xe>bt.MAX_NB_BITS)throw new I("Data too large for an Aztec code");if(h=xe<=3,m=h?xe+1:xe,v=bt.totalBitsInLayer(m,h),c>v)continue;(P==null||N!==bt.WORD_SIZE[m])&&(N=bt.WORD_SIZE[m],P=bt.stuffBits(l,N));let gt=v-v%N;if(!(h&&P.getSize()>N*64)&&P.getSize()+u<=gt)break}}let D=bt.generateCheckWords(P,v,N),z=P.getSize()/N,G=bt.generateModeMessage(h,m,z),Y=(h?11:14)+m*4,Q=new Int32Array(Y),oe;if(h){oe=Y;for(let xe=0;xe<Q.length;xe++)Q[xe]=xe}else{oe=Y+1+2*U.truncDivision(U.truncDivision(Y,2)-1,15);let xe=U.truncDivision(Y,2),gt=U.truncDivision(oe,2);for(let ot=0;ot<xe;ot++){let Qn=ot+U.truncDivision(ot,15);Q[xe-ot-1]=gt-Qn-1,Q[xe+ot]=gt+Qn+1}}let Ce=new De(oe);for(let xe=0,gt=0;xe<m;xe++){let ot=(m-xe)*4+(h?9:12);for(let Qn=0;Qn<ot;Qn++){let Sr=Qn*2;for(let Cn=0;Cn<2;Cn++)D.get(gt+Sr+Cn)&&Ce.set(Q[xe*2+Cn],Q[xe*2+Qn]),D.get(gt+ot*2+Sr+Cn)&&Ce.set(Q[xe*2+Qn],Q[Y-1-xe*2-Cn]),D.get(gt+ot*4+Sr+Cn)&&Ce.set(Q[Y-1-xe*2-Cn],Q[Y-1-xe*2-Qn]),D.get(gt+ot*6+Sr+Cn)&&Ce.set(Q[Y-1-xe*2-Qn],Q[xe*2+Cn])}gt+=ot*8}if(bt.drawModeMessage(Ce,h,oe,G),h)bt.drawBullsEye(Ce,U.truncDivision(oe,2),5);else{bt.drawBullsEye(Ce,U.truncDivision(oe,2),7);for(let xe=0,gt=0;xe<U.truncDivision(Y,2)-1;xe+=15,gt+=16)for(let ot=U.truncDivision(oe,2)&1;ot<oe;ot+=2)Ce.set(U.truncDivision(oe,2)-gt,ot),Ce.set(U.truncDivision(oe,2)+gt,ot),Ce.set(ot,U.truncDivision(oe,2)-gt),Ce.set(ot,U.truncDivision(oe,2)+gt)}let Ae=new il;return Ae.setCompact(h),Ae.setSize(oe),Ae.setLayers(m),Ae.setCodeWords(z),Ae.setMatrix(Ce),Ae}static drawBullsEye(e,n,i){for(let l=0;l<i;l+=2)for(let u=n-l;u<=n+l;u++)e.set(u,n-l),e.set(u,n+l),e.set(n-l,u),e.set(n+l,u);e.set(n-i,n-i),e.set(n-i+1,n-i),e.set(n-i,n-i+1),e.set(n+i,n-i),e.set(n+i,n-i+1),e.set(n+i,n+i-1)}static generateModeMessage(e,n,i){let l=new ne;return e?(l.appendBits(n-1,2),l.appendBits(i-1,6),l=bt.generateCheckWords(l,28,4)):(l.appendBits(n-1,5),l.appendBits(i-1,11),l=bt.generateCheckWords(l,40,4)),l}static drawModeMessage(e,n,i,l){let u=U.truncDivision(i,2);if(n)for(let c=0;c<7;c++){let h=u-3+c;l.get(c)&&e.set(h,u-5),l.get(c+7)&&e.set(u+5,h),l.get(20-c)&&e.set(h,u+5),l.get(27-c)&&e.set(u-5,h)}else for(let c=0;c<10;c++){let h=u-5+c+U.truncDivision(c,5);l.get(c)&&e.set(h,u-7),l.get(c+10)&&e.set(u+7,h),l.get(29-c)&&e.set(h,u+7),l.get(39-c)&&e.set(u-7,h)}}static generateCheckWords(e,n,i){let l=e.getSize()/i,u=new Xo(bt.getGF(i)),c=U.truncDivision(n,i),h=bt.bitsToWords(e,i,c);u.encode(h,c-l);let m=n%i,v=new ne;v.appendBits(0,m);for(const N of Array.from(h))v.appendBits(N,i);return v}static bitsToWords(e,n,i){let l=new Int32Array(i),u,c;for(u=0,c=e.getSize()/n;u<c;u++){let h=0;for(let m=0;m<n;m++)h|=e.get(u*n+m)?1<<n-m-1:0;l[u]=h}return l}static getGF(e){switch(e){case 4:return Oe.AZTEC_PARAM;case 6:return Oe.AZTEC_DATA_6;case 8:return Oe.AZTEC_DATA_8;case 10:return Oe.AZTEC_DATA_10;case 12:return Oe.AZTEC_DATA_12;default:throw new I("Unsupported word size "+e)}}static stuffBits(e,n){let i=new ne,l=e.getSize(),u=(1<<n)-2;for(let c=0;c<l;c+=n){let h=0;for(let m=0;m<n;m++)(c+m>=l||e.get(c+m))&&(h|=1<<n-1-m);(h&u)===u?(i.appendBits(h&u,n),c--):h&u?i.appendBits(h,n):(i.appendBits(h|1,n),c--)}return i}static totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}bt.DEFAULT_EC_PERCENT=33,bt.DEFAULT_AZTEC_LAYERS=0,bt.MAX_NB_BITS=32,bt.MAX_NB_BITS_COMPACT=4,bt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Rs{encode(e,n,i,l){return this.encodeWithHints(e,n,i,l,null)}encodeWithHints(e,n,i,l,u){let c=Yo.ISO_8859_1,h=bt.DEFAULT_EC_PERCENT,m=bt.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(vn.CHARACTER_SET)&&(c=rl.forName(u.get(vn.CHARACTER_SET).toString())),u.has(vn.ERROR_CORRECTION)&&(h=U.parseInt(u.get(vn.ERROR_CORRECTION).toString())),u.has(vn.AZTEC_LAYERS)&&(m=U.parseInt(u.get(vn.AZTEC_LAYERS).toString()))),Rs.encodeLayers(e,n,i,l,c,h,m)}static encodeLayers(e,n,i,l,u,c,h){if(n!==Ee.AZTEC)throw new I("Can only encode AZTEC, but got "+n);let m=bt.encode(be.getBytes(e,u),c,h);return Rs.renderResult(m,i,l)}static renderResult(e,n,i){let l=e.getMatrix();if(l==null)throw new Ht;let u=l.getWidth(),c=l.getHeight(),h=Math.max(n,u),m=Math.max(i,c),v=Math.min(h/u,m/c),N=(h-u*v)/2,P=(m-c*v)/2,D=new De(h,m);for(let z=0,G=P;z<c;z++,G+=v)for(let Y=0,Q=N;Y<u;Y++,Q+=v)l.get(Y,z)&&D.setRegion(Q,G,v,v);return D}}a.AbstractExpandedDecoder=vs,a.ArgumentException=S,a.ArithmeticException=mt,a.AztecCode=il,a.AztecCodeReader=nn,a.AztecCodeWriter=Rs,a.AztecDecoder=Tt,a.AztecDetector=cn,a.AztecDetectorResult=Lt,a.AztecEncoder=bt,a.AztecHighLevelEncoder=Ns,a.AztecPoint=At,a.BarcodeFormat=Ee,a.Binarizer=L,a.BinaryBitmap=R,a.BitArray=ne,a.BitMatrix=De,a.BitSource=jo,a.BrowserAztecCodeReader=Xn,a.BrowserBarcodeReader=$a,a.BrowserCodeReader=Ge,a.BrowserDatamatrixCodeReader=Du,a.BrowserMultiFormatReader=bs,a.BrowserPDF417Reader=ro,a.BrowserQRCodeReader=nl,a.BrowserQRCodeSvgWriter=bi,a.CharacterSetECI=J,a.ChecksumException=k,a.Code128Reader=we,a.Code39Reader=zt,a.DataMatrixDecodedBitStreamParser=vr,a.DataMatrixReader=Cr,a.DecodeHintType=re,a.DecoderResult=rt,a.DefaultGridSampler=Gn,a.DetectorResult=xn,a.EAN13Reader=Yn,a.EncodeHintType=vn,a.Exception=E,a.FormatException=q,a.GenericGF=Oe,a.GenericGFPoly=Ne,a.GlobalHistogramBinarizer=Te,a.GridSampler=ct,a.GridSamplerInstance=vt,a.HTMLCanvasElementLuminanceSource=pe,a.HybridBinarizer=fe,a.ITFReader=Nt,a.IllegalArgumentException=I,a.IllegalStateException=Ht,a.InvertedLuminanceSource=ge,a.LuminanceSource=ce,a.MathUtils=ht,a.MultiFormatOneDReader=Wr,a.MultiFormatReader=no,a.MultiFormatWriter=Bu,a.NotFoundException=Z,a.OneDReader=xt,a.PDF417DecodedBitStreamParser=ae,a.PDF417DecoderErrorCorrection=Uo,a.PDF417Reader=_n,a.PDF417ResultMetadata=eo,a.PerspectiveTransform=it,a.PlanarYUVLuminanceSource=Pr,a.QRCodeByteMatrix=io,a.QRCodeDataMask=dt,a.QRCodeDecodedBitStreamParser=Xt,a.QRCodeDecoderErrorCorrectionLevel=Ft,a.QRCodeDecoderFormatInformation=In,a.QRCodeEncoder=Wt,a.QRCodeEncoderQRCode=Si,a.QRCodeMaskUtil=Yt,a.QRCodeMatrixUtil=Ze,a.QRCodeMode=Ke,a.QRCodeReader=Fn,a.QRCodeVersion=Ye,a.QRCodeWriter=Xi,a.RGBLuminanceSource=Ts,a.RSS14Reader=Mt,a.RSSExpandedReader=he,a.ReaderException=Gi,a.ReedSolomonDecoder=$t,a.ReedSolomonEncoder=Xo,a.ReedSolomonException=wt,a.Result=We,a.ResultMetadataType=He,a.ResultPoint=_e,a.StringUtils=be,a.UnsupportedOperationException=Ie,a.VideoInputDevice=$,a.WhiteRectangleDetector=Fe,a.WriterException=Vt,a.ZXingArrays=H,a.ZXingCharset=rl,a.ZXingInteger=U,a.ZXingStandardCharsets=Yo,a.ZXingStringBuilder=Re,a.ZXingStringEncoding=ke,a.ZXingSystem=B,a.createAbstractExpandedDecoder=qs,Object.defineProperty(a,"__esModule",{value:!0})})}(Sa,Sa.exports)),Sa.exports}Wy();var id=function(){var r=function(o,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var x in p)Object.prototype.hasOwnProperty.call(p,x)&&(d[x]=p[x])},r(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(o,a);function d(){this.constructor=o}o.prototype=a===null?Object.create(a):(d.prototype=a.prototype,new d)}}(),eg=function(){function r(o,a){this.name=o,this.track=a}return r.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},r.prototype.apply=function(o){var a={};a[this.name]=o;var d={advanced:[a]};return this.track.applyConstraints(d)},r.prototype.value=function(){var o=this.track.getSettings();if(this.name in o){var a=o[this.name];return a}return null},r}(),Hy=function(r){id(o,r);function o(a,d){return r.call(this,a,d)||this}return o.prototype.min=function(){return this.getCapabilities().min},o.prototype.max=function(){return this.getCapabilities().max},o.prototype.step=function(){return this.getCapabilities().step},o.prototype.apply=function(a){var d={};d[this.name]=a;var p={advanced:[d]};return this.track.applyConstraints(p)},o.prototype.getCapabilities=function(){this.failIfNotSupported();var a=this.track.getCapabilities(),d=a[this.name];return{min:d.min,max:d.max,step:d.step}},o.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},o}(eg);(function(r){id(o,r);function o(a){return r.call(this,"zoom",a)||this}return o})(Hy);(function(r){id(o,r);function o(a){return r.call(this,"torch",a)||this}return o})(eg);var l1;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.NOT_STARTED=1]="NOT_STARTED",r[r.SCANNING=2]="SCANNING",r[r.PAUSED=3]="PAUSED"})(l1||(l1={}));var Gy=function(){var r=function(o,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var x in p)Object.prototype.hasOwnProperty.call(p,x)&&(d[x]=p[x])},r(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(o,a);function d(){this.constructor=o}o.prototype=a===null?Object.create(a):(d.prototype=a.prototype,new d)}}();(function(r){Gy(o,r);function o(){return r!==null&&r.apply(this,arguments)||this}return o.DEFAULT_WIDTH=300,o.DEFAULT_WIDTH_OFFSET=2,o.FILE_SCAN_MIN_HEIGHT=300,o.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,o.MIN_QR_BOX_SIZE=50,o.SHADED_LEFT=1,o.SHADED_RIGHT=2,o.SHADED_TOP=3,o.SHADED_BOTTOM=4,o.SHADED_REGION_ELEMENT_ID="qr-shaded-region",o.VERBOSE=!1,o.BORDER_SHADER_DEFAULT_COLOR="#ffffff",o.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",o})(zy);var u1;(function(r){r[r.STATUS_DEFAULT=0]="STATUS_DEFAULT",r[r.STATUS_SUCCESS=1]="STATUS_SUCCESS",r[r.STATUS_WARNING=2]="STATUS_WARNING",r[r.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(u1||(u1={}));const Xy=({user:r,onProfileClick:o})=>{const a=zr();return T.jsx("div",{children:T.jsx("div",{style:{position:"absolute",top:"45px",display:"flex",alignItems:"center",width:"94%",height:"10px",left:"3%"},children:r==null?T.jsxs("div",{style:{position:"absolute",width:"100%",display:"flex",justifyContent:"space-between"},children:[T.jsx("button",{className:"login-button",onClick:()=>a("/login"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:T.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Login"})}),T.jsx("button",{className:"login-button",onClick:()=>a("/signup"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:T.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Sign up"})})]}):T.jsxs("div",{style:{position:"absolute",width:"100%",display:"flex",justifyContent:"space-between"},children:[T.jsx("button",{className:"login-button",onClick:()=>a("/logout"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:T.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Logout"})}),T.jsx("button",{className:"login-button",onClick:o,style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:T.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Profile"})})]})})})},sd=O.createContext({});function od(r){const o=O.useRef(null);return o.current===null&&(o.current=r()),o.current}const ad=typeof window<"u",tg=ad?O.useLayoutEffect:O.useEffect,Ru=O.createContext(null),ld=O.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});class Yy extends O.Component{getSnapshotBeforeUpdate(o){const a=this.props.childRef.current;if(a&&o.isPresent&&!this.props.isPresent){const d=a.offsetParent,p=d instanceof HTMLElement&&d.offsetWidth||0,x=this.props.sizeRef.current;x.height=a.offsetHeight||0,x.width=a.offsetWidth||0,x.top=a.offsetTop,x.left=a.offsetLeft,x.right=p-x.width-x.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Ky({children:r,isPresent:o,anchorX:a}){const d=O.useId(),p=O.useRef(null),x=O.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:y}=O.useContext(ld);return O.useInsertionEffect(()=>{const{width:A,height:w,top:E,left:S,right:I}=x.current;if(o||!p.current||!A||!w)return;const R=a==="left"?`left: ${S}`:`right: ${I}`;p.current.dataset.motionPopId=d;const k=document.createElement("style");return y&&(k.nonce=y),document.head.appendChild(k),k.sheet&&k.sheet.insertRule(`
          [data-motion-pop-id="${d}"] {
            position: absolute !important;
            width: ${A}px !important;
            height: ${w}px !important;
            ${R}px !important;
            top: ${E}px !important;
          }
        `),()=>{document.head.removeChild(k)}},[o]),T.jsx(Yy,{isPresent:o,childRef:p,sizeRef:x,children:O.cloneElement(r,{ref:p})})}const Zy=({children:r,initial:o,isPresent:a,onExitComplete:d,custom:p,presenceAffectsLayout:x,mode:y,anchorX:A})=>{const w=od($y),E=O.useId(),S=O.useCallback(R=>{w.set(R,!0);for(const k of w.values())if(!k)return;d&&d()},[w,d]),I=O.useMemo(()=>({id:E,initial:o,isPresent:a,custom:p,onExitComplete:S,register:R=>(w.set(R,!1),()=>w.delete(R))}),x?[Math.random(),S]:[a,S]);return O.useMemo(()=>{w.forEach((R,k)=>w.set(k,!1))},[a]),O.useEffect(()=>{!a&&!w.size&&d&&d()},[a]),y==="popLayout"&&(r=T.jsx(Ky,{isPresent:a,anchorX:A,children:r})),T.jsx(Ru.Provider,{value:I,children:r})};function $y(){return new Map}function ng(r=!0){const o=O.useContext(Ru);if(o===null)return[!0,null];const{isPresent:a,onExitComplete:d,register:p}=o,x=O.useId();O.useEffect(()=>{if(r)return p(x)},[r]);const y=O.useCallback(()=>r&&d&&d(x),[x,d,r]);return!a&&d?[!1,y]:[!0]}const nu=r=>r.key||"";function c1(r){const o=[];return O.Children.forEach(r,a=>{O.isValidElement(a)&&o.push(a)}),o}const f1=({children:r,custom:o,initial:a=!0,onExitComplete:d,presenceAffectsLayout:p=!0,mode:x="sync",propagate:y=!1,anchorX:A="left"})=>{const[w,E]=ng(y),S=O.useMemo(()=>c1(r),[r]),I=y&&!w?[]:S.map(nu),R=O.useRef(!0),k=O.useRef(S),L=od(()=>new Map),[B,j]=O.useState(S),[V,H]=O.useState(S);tg(()=>{R.current=!1,k.current=S;for(let se=0;se<V.length;se++){const re=nu(V[se]);I.includes(re)?L.delete(re):L.get(re)!==!0&&L.set(re,!1)}},[V,I.length,I.join("-")]);const U=[];if(S!==B){let se=[...S];for(let re=0;re<V.length;re++){const q=V[re],ue=nu(q);I.includes(ue)||(se.splice(re,0,q),U.push(q))}return x==="wait"&&U.length&&(se=U),H(c1(se)),j(S),null}const{forceRender:ne}=O.useContext(sd);return T.jsx(T.Fragment,{children:V.map(se=>{const re=nu(se),q=y&&!w?!1:S===V||I.includes(re),ue=()=>{if(L.has(re))L.set(re,!0);else return;let J=!0;L.forEach(Ie=>{Ie||(J=!1)}),J&&(ne==null||ne(),H(k.current),y&&(E==null||E()),d&&d())};return T.jsx(Zy,{isPresent:q,initial:!R.current||a?void 0:!1,custom:o,presenceAffectsLayout:p,mode:x,onExitComplete:q?void 0:ue,anchorX:A,children:se},re)})})};function ud(r,o){r.indexOf(o)===-1&&r.push(o)}function cd(r,o){const a=r.indexOf(o);a>-1&&r.splice(a,1)}let rg=()=>{};const qy={useManualTiming:!1};function fd(r){let o;return()=>(o===void 0&&(o=r()),o)}const Vr=r=>r,ka=(r,o,a)=>{const d=o-r;return d===0?1:(a-r)/d};class dd{constructor(){this.subscriptions=[]}add(o){return ud(this.subscriptions,o),()=>cd(this.subscriptions,o)}notify(o,a,d){const p=this.subscriptions.length;if(p)if(p===1)this.subscriptions[0](o,a,d);else for(let x=0;x<p;x++){const y=this.subscriptions[x];y&&y(o,a,d)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ci=r=>r*1e3,fi=r=>r/1e3;function ig(r,o){return o?r*(1e3/o):0}const Qy=fd(()=>window.ScrollTimeline!==void 0);class Jy{constructor(o){this.stop=()=>this.runAll("stop"),this.animations=o.filter(Boolean)}get finished(){return Promise.all(this.animations.map(o=>o.finished))}getAll(o){return this.animations[0][o]}setAll(o,a){for(let d=0;d<this.animations.length;d++)this.animations[d][o]=a}attachTimeline(o,a){const d=this.animations.map(p=>{if(Qy()&&p.attachTimeline)return p.attachTimeline(o);if(typeof a=="function")return a(p)});return()=>{d.forEach((p,x)=>{p&&p(),this.animations[x].stop()})}}get time(){return this.getAll("time")}set time(o){this.setAll("time",o)}get speed(){return this.getAll("speed")}set speed(o){this.setAll("speed",o)}get startTime(){return this.getAll("startTime")}get duration(){let o=0;for(let a=0;a<this.animations.length;a++)o=Math.max(o,this.animations[a].duration);return o}runAll(o){this.animations.forEach(a=>a[o]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class ew extends Jy{then(o,a){return this.finished.finally(o).then(()=>{})}}const d1={value:null},hd=r=>Array.isArray(r)&&typeof r[0]=="number",tw={};function nw(r,o){const a=fd(r);return()=>tw[o]??a()}const Ma=nw(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),sg=(r,o,a=10)=>{let d="";const p=Math.max(Math.round(o/a),2);for(let x=0;x<p;x++)d+=r(x/(p-1))+", ";return`linear(${d.substring(0,d.length-2)})`},ba=([r,o,a,d])=>`cubic-bezier(${r}, ${o}, ${a}, ${d})`,_f={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ba([0,.65,.55,1]),circOut:ba([.55,0,1,.45]),backIn:ba([.31,.01,.66,-.59]),backOut:ba([.33,1.53,.69,.99])};function og(r,o){if(r)return typeof r=="function"&&Ma()?sg(r,o):hd(r)?ba(r):Array.isArray(r)?r.map(a=>og(a,o)||_f.easeOut):_f[r]}function rw(r,o,a,{delay:d=0,duration:p=300,repeat:x=0,repeatType:y="loop",ease:A="easeInOut",times:w}={},E=void 0){const S={[o]:a};w&&(S.offset=w);const I=og(A,p);return Array.isArray(I)&&(S.easing=I),r.animate(S,{delay:d,duration:p,easing:Array.isArray(I)?"linear":I,fill:"both",iterations:x+1,direction:y==="reverse"?"alternate":"normal",pseudoElement:E})}function pd(r){return typeof r=="function"&&"applyToOptions"in r}function gd(r,o){return(r==null?void 0:r[o])??(r==null?void 0:r.default)??r}const xu=2e4;function md(r){let o=0;const a=50;let d=r.next(o);for(;!d.done&&o<xu;)o+=a,d=r.next(o);return o>=xu?1/0:o}function iw(r,o=100,a){const d=a({...r,keyframes:[0,o]}),p=Math.min(md(d),xu);return{type:"keyframes",ease:x=>d.next(p*x).value/o,duration:fi(p)}}function ag(r){return!!(typeof r=="function"&&Ma()||!r||typeof r=="string"&&(r in _f||Ma())||hd(r)||Array.isArray(r)&&r.every(ag))}function h1(r,o){r.timeline=o,r.onfinish=null}const ru=["read","resolveKeyframes","update","preRender","render","postRender"];function sw(r,o){let a=new Set,d=new Set,p=!1,x=!1;const y=new WeakSet;let A={delta:0,timestamp:0,isProcessing:!1},w=0;function E(I){y.has(I)&&(S.schedule(I),r()),w++,I(A)}const S={schedule:(I,R=!1,k=!1)=>{const B=k&&p?a:d;return R&&y.add(I),B.has(I)||B.add(I),I},cancel:I=>{d.delete(I),y.delete(I)},process:I=>{if(A=I,p){x=!0;return}p=!0,[a,d]=[d,a],a.forEach(E),o&&d1.value&&d1.value.frameloop[o].push(w),w=0,a.clear(),p=!1,x&&(x=!1,S.process(I))}};return S}const ow=40;function lg(r,o){let a=!1,d=!0;const p={delta:0,timestamp:0,isProcessing:!1},x=()=>a=!0,y=ru.reduce((V,H)=>(V[H]=sw(x,o?H:void 0),V),{}),{read:A,resolveKeyframes:w,update:E,preRender:S,render:I,postRender:R}=y,k=()=>{const V=performance.now();a=!1,p.delta=d?1e3/60:Math.max(Math.min(V-p.timestamp,ow),1),p.timestamp=V,p.isProcessing=!0,A.process(p),w.process(p),E.process(p),S.process(p),I.process(p),R.process(p),p.isProcessing=!1,a&&o&&(d=!1,r(k))},L=()=>{a=!0,d=!0,p.isProcessing||r(k)};return{schedule:ru.reduce((V,H)=>{const U=y[H];return V[H]=(ne,se=!1,re=!1)=>(a||L(),U.schedule(ne,se,re)),V},{}),cancel:V=>{for(let H=0;H<ru.length;H++)y[ru[H]].cancel(V)},state:p,steps:y}}const{schedule:Zt,cancel:hs,state:Hn,steps:pf}=lg(typeof requestAnimationFrame<"u"?requestAnimationFrame:Vr,!0),{schedule:xd}=lg(queueMicrotask,!1);let cu;function aw(){cu=void 0}const di={now:()=>(cu===void 0&&di.set(Hn.isProcessing||qy.useManualTiming?Hn.timestamp:performance.now()),cu),set:r=>{cu=r,queueMicrotask(aw)}},ei={x:!1,y:!1};function ug(){return ei.x||ei.y}function lw(r){return r==="x"||r==="y"?ei[r]?null:(ei[r]=!0,()=>{ei[r]=!1}):ei.x||ei.y?null:(ei.x=ei.y=!0,()=>{ei.x=ei.y=!1})}function uw(r,o,a){if(r instanceof EventTarget)return[r];if(typeof r=="string"){const p=document.querySelectorAll(r);return p?Array.from(p):[]}return Array.from(r)}function cg(r,o){const a=uw(r),d=new AbortController,p={passive:!0,...o,signal:d.signal};return[a,p,()=>d.abort()]}function p1(r){return!(r.pointerType==="touch"||ug())}function cw(r,o,a={}){const[d,p,x]=cg(r,a),y=A=>{if(!p1(A))return;const{target:w}=A,E=o(w,A);if(typeof E!="function"||!w)return;const S=I=>{p1(I)&&(E(I),w.removeEventListener("pointerleave",S))};w.addEventListener("pointerleave",S,p)};return d.forEach(A=>{A.addEventListener("pointerenter",y,p)}),x}const fg=(r,o)=>o?r===o?!0:fg(r,o.parentElement):!1,yd=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,fw=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function dw(r){return fw.has(r.tagName)||r.tabIndex!==-1}const Ta=new WeakSet;function g1(r){return o=>{o.key==="Enter"&&r(o)}}function gf(r,o){r.dispatchEvent(new PointerEvent("pointer"+o,{isPrimary:!0,bubbles:!0}))}const hw=(r,o)=>{const a=r.currentTarget;if(!a)return;const d=g1(()=>{if(Ta.has(a))return;gf(a,"down");const p=g1(()=>{gf(a,"up")}),x=()=>gf(a,"cancel");a.addEventListener("keyup",p,o),a.addEventListener("blur",x,o)});a.addEventListener("keydown",d,o),a.addEventListener("blur",()=>a.removeEventListener("keydown",d),o)};function m1(r){return yd(r)&&!ug()}function pw(r,o,a={}){const[d,p,x]=cg(r,a),y=A=>{const w=A.currentTarget;if(!m1(A)||Ta.has(w))return;Ta.add(w);const E=o(w,A),S=(k,L)=>{window.removeEventListener("pointerup",I),window.removeEventListener("pointercancel",R),!(!m1(k)||!Ta.has(w))&&(Ta.delete(w),typeof E=="function"&&E(k,{success:L}))},I=k=>{S(k,w===window||w===document||a.useGlobalTarget||fg(w,k.target))},R=k=>{S(k,!1)};window.addEventListener("pointerup",I,p),window.addEventListener("pointercancel",R,p)};return d.forEach(A=>{(a.useGlobalTarget?window:A).addEventListener("pointerdown",y,p),A instanceof HTMLElement&&(A.addEventListener("focus",E=>hw(E,p)),!dw(A)&&!A.hasAttribute("tabindex")&&(A.tabIndex=0))}),x}const x1=30,gw=r=>!isNaN(parseFloat(r));class mw{constructor(o,a={}){this.version="12.6.3",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(d,p=!0)=>{const x=di.now();this.updatedAt!==x&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(d),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),p&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(o),this.owner=a.owner}setCurrent(o){this.current=o,this.updatedAt=di.now(),this.canTrackVelocity===null&&o!==void 0&&(this.canTrackVelocity=gw(this.current))}setPrevFrameValue(o=this.current){this.prevFrameValue=o,this.prevUpdatedAt=this.updatedAt}onChange(o){return this.on("change",o)}on(o,a){this.events[o]||(this.events[o]=new dd);const d=this.events[o].add(a);return o==="change"?()=>{d(),Zt.read(()=>{this.events.change.getSize()||this.stop()})}:d}clearListeners(){for(const o in this.events)this.events[o].clear()}attach(o,a){this.passiveEffect=o,this.stopPassiveEffect=a}set(o,a=!0){!a||!this.passiveEffect?this.updateAndNotify(o,a):this.passiveEffect(o,this.updateAndNotify)}setWithVelocity(o,a,d){this.set(a),this.prev=void 0,this.prevFrameValue=o,this.prevUpdatedAt=this.updatedAt-d}jump(o,a=!0){this.updateAndNotify(o),this.prev=o,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const o=di.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||o-this.updatedAt>x1)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,x1);return ig(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(o){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=o(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Da(r,o){return new mw(r,o)}const dg=O.createContext({strict:!1}),y1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Po={};for(const r in y1)Po[r]={isEnabled:o=>y1[r].some(a=>!!o[a])};function xw(r){for(const o in r)Po[o]={...Po[o],...r[o]}}const yw=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function yu(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||yw.has(r)}let hg=r=>!yu(r);function ww(r){r&&(hg=o=>o.startsWith("on")?!yu(o):r(o))}try{ww(require("@emotion/is-prop-valid").default)}catch{}function vw(r,o,a){const d={};for(const p in r)p==="values"&&typeof r.values=="object"||(hg(p)||a===!0&&yu(p)||!o&&!yu(p)||r.draggable&&p.startsWith("onDrag"))&&(d[p]=r[p]);return d}function Cw(r){if(typeof Proxy>"u")return r;const o=new Map,a=(...d)=>r(...d);return new Proxy(a,{get:(d,p)=>p==="create"?r:(o.has(p)||o.set(p,r(p)),o.get(p))})}const _u=O.createContext({});function Pu(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}function La(r){return typeof r=="string"||Array.isArray(r)}const wd=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],vd=["initial",...wd];function Ou(r){return Pu(r.animate)||vd.some(o=>La(r[o]))}function pg(r){return!!(Ou(r)||r.variants)}function Ew(r,o){if(Ou(r)){const{initial:a,animate:d}=r;return{initial:a===!1||La(a)?a:void 0,animate:La(d)?d:void 0}}return r.inherit!==!1?o:{}}function Aw(r){const{initial:o,animate:a}=Ew(r,O.useContext(_u));return O.useMemo(()=>({initial:o,animate:a}),[w1(o),w1(a)])}function w1(r){return Array.isArray(r)?r.join(" "):r}const Sw=Symbol.for("motionComponentSymbol");function So(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function bw(r,o,a){return O.useCallback(d=>{d&&r.onMount&&r.onMount(d),o&&(d?o.mount(d):o.unmount()),a&&(typeof a=="function"?a(d):So(a)&&(a.current=d))},[o])}const Cd=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Tw="framerAppearId",gg="data-"+Cd(Tw),mg=O.createContext({});function Iw(r,o,a,d,p){var B,j;const{visualElement:x}=O.useContext(_u),y=O.useContext(dg),A=O.useContext(Ru),w=O.useContext(ld).reducedMotion,E=O.useRef(null);d=d||y.renderer,!E.current&&d&&(E.current=d(r,{visualState:o,parent:x,props:a,presenceContext:A,blockInitialAnimation:A?A.initial===!1:!1,reducedMotionConfig:w}));const S=E.current,I=O.useContext(mg);S&&!S.projection&&p&&(S.type==="html"||S.type==="svg")&&Nw(E.current,a,p,I);const R=O.useRef(!1);O.useInsertionEffect(()=>{S&&R.current&&S.update(a,A)});const k=a[gg],L=O.useRef(!!k&&!((B=window.MotionHandoffIsComplete)!=null&&B.call(window,k))&&((j=window.MotionHasOptimisedAnimation)==null?void 0:j.call(window,k)));return tg(()=>{S&&(R.current=!0,window.MotionIsMounted=!0,S.updateFeatures(),xd.render(S.render),L.current&&S.animationState&&S.animationState.animateChanges())}),O.useEffect(()=>{S&&(!L.current&&S.animationState&&S.animationState.animateChanges(),L.current&&(queueMicrotask(()=>{var V;(V=window.MotionHandoffMarkAsComplete)==null||V.call(window,k)}),L.current=!1))}),S}function Nw(r,o,a,d){const{layoutId:p,layout:x,drag:y,dragConstraints:A,layoutScroll:w,layoutRoot:E}=o;r.projection=new a(r.latestValues,o["data-framer-portal-id"]?void 0:xg(r.parent)),r.projection.setOptions({layoutId:p,layout:x,alwaysMeasureLayout:!!y||A&&So(A),visualElement:r,animationType:typeof x=="string"?x:"both",initialPromotionConfig:d,layoutScroll:w,layoutRoot:E})}function xg(r){if(r)return r.options.allowProjection!==!1?r.projection:xg(r.parent)}function Rw({preloadedFeatures:r,createVisualElement:o,useRender:a,useVisualState:d,Component:p}){r&&xw(r);function x(A,w){let E;const S={...O.useContext(ld),...A,layoutId:_w(A)},{isStatic:I}=S,R=Aw(A),k=d(A,I);if(!I&&ad){Pw();const L=Ow(S);E=L.MeasureLayout,R.visualElement=Iw(p,k,S,o,L.ProjectionNode)}return T.jsxs(_u.Provider,{value:R,children:[E&&R.visualElement?T.jsx(E,{visualElement:R.visualElement,...S}):null,a(p,A,bw(k,R.visualElement,w),k,I,R.visualElement)]})}x.displayName=`motion.${typeof p=="string"?p:`create(${p.displayName??p.name??""})`}`;const y=O.forwardRef(x);return y[Sw]=p,y}function _w({layoutId:r}){const o=O.useContext(sd).id;return o&&r!==void 0?o+"-"+r:r}function Pw(r,o){O.useContext(dg).strict}function Ow(r){const{drag:o,layout:a}=Po;if(!o&&!a)return{};const d={...o,...a};return{MeasureLayout:o!=null&&o.isEnabled(r)||a!=null&&a.isEnabled(r)?d.MeasureLayout:void 0,ProjectionNode:d.ProjectionNode}}const yg=r=>o=>typeof o=="string"&&o.startsWith(r),Ed=yg("--"),kw=yg("var(--"),Ad=r=>kw(r)?Mw.test(r.split("/*")[0].trim()):!1,Mw=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ba={};function Dw(r){for(const o in r)Ba[o]=r[o],Ed(o)&&(Ba[o].isCSSVariable=!0)}const Do=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Zs=new Set(Do);function wg(r,{layout:o,layoutId:a}){return Zs.has(r)||r.startsWith("origin")||(o||a!==void 0)&&(!!Ba[r]||r==="opacity")}const ir=r=>!!(r&&r.getVelocity),vg=(r,o)=>o&&typeof r=="number"?o.transform(r):r,Fi=(r,o,a)=>a>o?o:a<r?r:a,Lo={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},Fa={...Lo,transform:r=>Fi(0,1,r)},iu={...Lo,default:1},Ga=r=>({test:o=>typeof o=="string"&&o.endsWith(r)&&o.split(" ").length===1,parse:parseFloat,transform:o=>`${o}${r}`}),cs=Ga("deg"),hi=Ga("%"),et=Ga("px"),Lw=Ga("vh"),Bw=Ga("vw"),v1={...hi,parse:r=>hi.parse(r)/100,transform:r=>hi.transform(r*100)},Fw={borderWidth:et,borderTopWidth:et,borderRightWidth:et,borderBottomWidth:et,borderLeftWidth:et,borderRadius:et,radius:et,borderTopLeftRadius:et,borderTopRightRadius:et,borderBottomRightRadius:et,borderBottomLeftRadius:et,width:et,maxWidth:et,height:et,maxHeight:et,top:et,right:et,bottom:et,left:et,padding:et,paddingTop:et,paddingRight:et,paddingBottom:et,paddingLeft:et,margin:et,marginTop:et,marginRight:et,marginBottom:et,marginLeft:et,backgroundPositionX:et,backgroundPositionY:et},jw={rotate:cs,rotateX:cs,rotateY:cs,rotateZ:cs,scale:iu,scaleX:iu,scaleY:iu,scaleZ:iu,skew:cs,skewX:cs,skewY:cs,distance:et,translateX:et,translateY:et,translateZ:et,x:et,y:et,z:et,perspective:et,transformPerspective:et,opacity:Fa,originX:v1,originY:v1,originZ:et},C1={...Lo,transform:Math.round},Sd={...Fw,...jw,zIndex:C1,size:et,fillOpacity:Fa,strokeOpacity:Fa,numOctaves:C1},Vw={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},zw=Do.length;function Uw(r,o,a){let d="",p=!0;for(let x=0;x<zw;x++){const y=Do[x],A=r[y];if(A===void 0)continue;let w=!0;if(typeof A=="number"?w=A===(y.startsWith("scale")?1:0):w=parseFloat(A)===0,!w||a){const E=vg(A,Sd[y]);if(!w){p=!1;const S=Vw[y]||y;d+=`${S}(${E}) `}a&&(o[y]=E)}}return d=d.trim(),a?d=a(o,p?"":d):p&&(d="none"),d}function bd(r,o,a){const{style:d,vars:p,transformOrigin:x}=r;let y=!1,A=!1;for(const w in o){const E=o[w];if(Zs.has(w)){y=!0;continue}else if(Ed(w)){p[w]=E;continue}else{const S=vg(E,Sd[w]);w.startsWith("origin")?(A=!0,x[w]=S):d[w]=S}}if(o.transform||(y||a?d.transform=Uw(o,r.transform,a):d.transform&&(d.transform="none")),A){const{originX:w="50%",originY:E="50%",originZ:S=0}=x;d.transformOrigin=`${w} ${E} ${S}`}}const Td=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Cg(r,o,a){for(const d in o)!ir(o[d])&&!wg(d,a)&&(r[d]=o[d])}function Ww({transformTemplate:r},o){return O.useMemo(()=>{const a=Td();return bd(a,o,r),Object.assign({},a.vars,a.style)},[o])}function Hw(r,o){const a=r.style||{},d={};return Cg(d,a,r),Object.assign(d,Ww(r,o)),d}function Gw(r,o){const a={},d=Hw(r,o);return r.drag&&r.dragListener!==!1&&(a.draggable=!1,d.userSelect=d.WebkitUserSelect=d.WebkitTouchCallout="none",d.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(a.tabIndex=0),a.style=d,a}const Xw=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Id(r){return typeof r!="string"||r.includes("-")?!1:!!(Xw.indexOf(r)>-1||/[A-Z]/u.test(r))}const Yw={offset:"stroke-dashoffset",array:"stroke-dasharray"},Kw={offset:"strokeDashoffset",array:"strokeDasharray"};function Zw(r,o,a=1,d=0,p=!0){r.pathLength=1;const x=p?Yw:Kw;r[x.offset]=et.transform(-d);const y=et.transform(o),A=et.transform(a);r[x.array]=`${y} ${A}`}function E1(r,o,a){return typeof r=="string"?r:et.transform(o+a*r)}function $w(r,o,a){const d=E1(o,r.x,r.width),p=E1(a,r.y,r.height);return`${d} ${p}`}function Nd(r,{attrX:o,attrY:a,attrScale:d,originX:p,originY:x,pathLength:y,pathSpacing:A=1,pathOffset:w=0,...E},S,I){if(bd(r,E,I),S){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:R,style:k,dimensions:L}=r;R.transform&&(L&&(k.transform=R.transform),delete R.transform),L&&(p!==void 0||x!==void 0||k.transform)&&(k.transformOrigin=$w(L,p!==void 0?p:.5,x!==void 0?x:.5)),o!==void 0&&(R.x=o),a!==void 0&&(R.y=a),d!==void 0&&(R.scale=d),y!==void 0&&Zw(R,y,A,w,!1)}const Eg=()=>({...Td(),attrs:{}}),Rd=r=>typeof r=="string"&&r.toLowerCase()==="svg";function qw(r,o,a,d){const p=O.useMemo(()=>{const x=Eg();return Nd(x,o,Rd(d),r.transformTemplate),{...x.attrs,style:{...x.style}}},[o]);if(r.style){const x={};Cg(x,r.style,r),p.style={...x,...p.style}}return p}function Qw(r=!1){return(a,d,p,{latestValues:x},y)=>{const w=(Id(a)?qw:Gw)(d,x,y,a),E=vw(d,typeof a=="string",r),S=a!==O.Fragment?{...E,...w,ref:p}:{},{children:I}=d,R=O.useMemo(()=>ir(I)?I.get():I,[I]);return O.createElement(a,{...S,children:R})}}function A1(r){const o=[{},{}];return r==null||r.values.forEach((a,d)=>{o[0][d]=a.get(),o[1][d]=a.getVelocity()}),o}function _d(r,o,a,d){if(typeof o=="function"){const[p,x]=A1(d);o=o(a!==void 0?a:r.custom,p,x)}if(typeof o=="string"&&(o=r.variants&&r.variants[o]),typeof o=="function"){const[p,x]=A1(d);o=o(a!==void 0?a:r.custom,p,x)}return o}const Pf=r=>Array.isArray(r),Jw=r=>!!(r&&typeof r=="object"&&r.mix&&r.toValue),e3=r=>Pf(r)?r[r.length-1]||0:r;function fu(r){const o=ir(r)?r.get():r;return Jw(o)?o.toValue():o}function t3({scrapeMotionValuesFromProps:r,createRenderState:o,onUpdate:a},d,p,x){const y={latestValues:n3(d,p,x,r),renderState:o()};return a&&(y.onMount=A=>a({props:d,current:A,...y}),y.onUpdate=A=>a(A)),y}const Ag=r=>(o,a)=>{const d=O.useContext(_u),p=O.useContext(Ru),x=()=>t3(r,o,d,p);return a?x():od(x)};function n3(r,o,a,d){const p={},x=d(r,{});for(const R in x)p[R]=fu(x[R]);let{initial:y,animate:A}=r;const w=Ou(r),E=pg(r);o&&E&&!w&&r.inherit!==!1&&(y===void 0&&(y=o.initial),A===void 0&&(A=o.animate));let S=a?a.initial===!1:!1;S=S||y===!1;const I=S?A:y;if(I&&typeof I!="boolean"&&!Pu(I)){const R=Array.isArray(I)?I:[I];for(let k=0;k<R.length;k++){const L=_d(r,R[k]);if(L){const{transitionEnd:B,transition:j,...V}=L;for(const H in V){let U=V[H];if(Array.isArray(U)){const ne=S?U.length-1:0;U=U[ne]}U!==null&&(p[H]=U)}for(const H in B)p[H]=B[H]}}}return p}function Pd(r,o,a){var x;const{style:d}=r,p={};for(const y in d)(ir(d[y])||o.style&&ir(o.style[y])||wg(y,r)||((x=a==null?void 0:a.getValue(y))==null?void 0:x.liveStyle)!==void 0)&&(p[y]=d[y]);return p}const r3={useVisualState:Ag({scrapeMotionValuesFromProps:Pd,createRenderState:Td})};function Sg(r,o){try{o.dimensions=typeof r.getBBox=="function"?r.getBBox():r.getBoundingClientRect()}catch{o.dimensions={x:0,y:0,width:0,height:0}}}function bg(r,{style:o,vars:a},d,p){Object.assign(r.style,o,p&&p.getProjectionStyles(d));for(const x in a)r.style.setProperty(x,a[x])}const Tg=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Ig(r,o,a,d){bg(r,o,void 0,d);for(const p in o.attrs)r.setAttribute(Tg.has(p)?p:Cd(p),o.attrs[p])}function Ng(r,o,a){const d=Pd(r,o,a);for(const p in r)if(ir(r[p])||ir(o[p])){const x=Do.indexOf(p)!==-1?"attr"+p.charAt(0).toUpperCase()+p.substring(1):p;d[x]=r[p]}return d}const S1=["x","y","width","height","cx","cy","r"],i3={useVisualState:Ag({scrapeMotionValuesFromProps:Ng,createRenderState:Eg,onUpdate:({props:r,prevProps:o,current:a,renderState:d,latestValues:p})=>{if(!a)return;let x=!!r.drag;if(!x){for(const A in p)if(Zs.has(A)){x=!0;break}}if(!x)return;let y=!o;if(o)for(let A=0;A<S1.length;A++){const w=S1[A];r[w]!==o[w]&&(y=!0)}y&&Zt.read(()=>{Sg(a,d),Zt.render(()=>{Nd(d,p,Rd(a.tagName),r.transformTemplate),Ig(a,d)})})}})};function s3(r,o){return function(d,{forwardMotionProps:p}={forwardMotionProps:!1}){const y={...Id(d)?i3:r3,preloadedFeatures:r,useRender:Qw(p),createVisualElement:o,Component:d};return Rw(y)}}function ja(r,o,a){const d=r.getProps();return _d(d,o,a!==void 0?a:d.custom,r)}const Rg=new Set(["width","height","top","left","right","bottom",...Do]);function o3(r,o,a){r.hasValue(o)?r.getValue(o).set(a):r.addValue(o,Da(a))}function a3(r,o){const a=ja(r,o);let{transitionEnd:d={},transition:p={},...x}=a||{};x={...x,...d};for(const y in x){const A=e3(x[y]);o3(r,y,A)}}function l3(r){return!!(ir(r)&&r.add)}function Of(r,o){const a=r.getValue("willChange");if(l3(a))return a.add(o)}function _g(r){return r.props[gg]}const Pg=(r,o,a)=>(((1-3*a+3*o)*r+(3*a-6*o))*r+3*o)*r,u3=1e-7,c3=12;function f3(r,o,a,d,p){let x,y,A=0;do y=o+(a-o)/2,x=Pg(y,d,p)-r,x>0?a=y:o=y;while(Math.abs(x)>u3&&++A<c3);return y}function Xa(r,o,a,d){if(r===o&&a===d)return Vr;const p=x=>f3(x,0,1,r,a);return x=>x===0||x===1?x:Pg(p(x),o,d)}const Og=r=>o=>o<=.5?r(2*o)/2:(2-r(2*(1-o)))/2,kg=r=>o=>1-r(1-o),Mg=Xa(.33,1.53,.69,.99),Od=kg(Mg),Dg=Og(Od),Lg=r=>(r*=2)<1?.5*Od(r):.5*(2-Math.pow(2,-10*(r-1))),kd=r=>1-Math.sin(Math.acos(r)),Bg=kg(kd),Fg=Og(kd),jg=r=>/^0[^.\s]+$/u.test(r);function d3(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||jg(r):!0}const Ia=r=>Math.round(r*1e5)/1e5,Md=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function h3(r){return r==null}const p3=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Dd=(r,o)=>a=>!!(typeof a=="string"&&p3.test(a)&&a.startsWith(r)||o&&!h3(a)&&Object.prototype.hasOwnProperty.call(a,o)),Vg=(r,o,a)=>d=>{if(typeof d!="string")return d;const[p,x,y,A]=d.match(Md);return{[r]:parseFloat(p),[o]:parseFloat(x),[a]:parseFloat(y),alpha:A!==void 0?parseFloat(A):1}},g3=r=>Fi(0,255,r),mf={...Lo,transform:r=>Math.round(g3(r))},Hs={test:Dd("rgb","red"),parse:Vg("red","green","blue"),transform:({red:r,green:o,blue:a,alpha:d=1})=>"rgba("+mf.transform(r)+", "+mf.transform(o)+", "+mf.transform(a)+", "+Ia(Fa.transform(d))+")"};function m3(r){let o="",a="",d="",p="";return r.length>5?(o=r.substring(1,3),a=r.substring(3,5),d=r.substring(5,7),p=r.substring(7,9)):(o=r.substring(1,2),a=r.substring(2,3),d=r.substring(3,4),p=r.substring(4,5),o+=o,a+=a,d+=d,p+=p),{red:parseInt(o,16),green:parseInt(a,16),blue:parseInt(d,16),alpha:p?parseInt(p,16)/255:1}}const kf={test:Dd("#"),parse:m3,transform:Hs.transform},bo={test:Dd("hsl","hue"),parse:Vg("hue","saturation","lightness"),transform:({hue:r,saturation:o,lightness:a,alpha:d=1})=>"hsla("+Math.round(r)+", "+hi.transform(Ia(o))+", "+hi.transform(Ia(a))+", "+Ia(Fa.transform(d))+")"},rr={test:r=>Hs.test(r)||kf.test(r)||bo.test(r),parse:r=>Hs.test(r)?Hs.parse(r):bo.test(r)?bo.parse(r):kf.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?Hs.transform(r):bo.transform(r)},x3=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function y3(r){var o,a;return isNaN(r)&&typeof r=="string"&&(((o=r.match(Md))==null?void 0:o.length)||0)+(((a=r.match(x3))==null?void 0:a.length)||0)>0}const zg="number",Ug="color",w3="var",v3="var(",b1="${}",C3=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Va(r){const o=r.toString(),a=[],d={color:[],number:[],var:[]},p=[];let x=0;const A=o.replace(C3,w=>(rr.test(w)?(d.color.push(x),p.push(Ug),a.push(rr.parse(w))):w.startsWith(v3)?(d.var.push(x),p.push(w3),a.push(w)):(d.number.push(x),p.push(zg),a.push(parseFloat(w))),++x,b1)).split(b1);return{values:a,split:A,indexes:d,types:p}}function Wg(r){return Va(r).values}function Hg(r){const{split:o,types:a}=Va(r),d=o.length;return p=>{let x="";for(let y=0;y<d;y++)if(x+=o[y],p[y]!==void 0){const A=a[y];A===zg?x+=Ia(p[y]):A===Ug?x+=rr.transform(p[y]):x+=p[y]}return x}}const E3=r=>typeof r=="number"?0:r;function A3(r){const o=Wg(r);return Hg(r)(o.map(E3))}const ps={test:y3,parse:Wg,createTransformer:Hg,getAnimatableNone:A3},S3=new Set(["brightness","contrast","saturate","opacity"]);function b3(r){const[o,a]=r.slice(0,-1).split("(");if(o==="drop-shadow")return r;const[d]=a.match(Md)||[];if(!d)return r;const p=a.replace(d,"");let x=S3.has(o)?1:0;return d!==a&&(x*=100),o+"("+x+p+")"}const T3=/\b([a-z-]*)\(.*?\)/gu,Mf={...ps,getAnimatableNone:r=>{const o=r.match(T3);return o?o.map(b3).join(" "):r}},I3={...Sd,color:rr,backgroundColor:rr,outlineColor:rr,fill:rr,stroke:rr,borderColor:rr,borderTopColor:rr,borderRightColor:rr,borderBottomColor:rr,borderLeftColor:rr,filter:Mf,WebkitFilter:Mf},Gg=r=>I3[r];function Xg(r,o){let a=Gg(r);return a!==Mf&&(a=ps),a.getAnimatableNone?a.getAnimatableNone(o):void 0}const N3=new Set(["auto","none","0"]);function R3(r,o,a){let d=0,p;for(;d<r.length&&!p;){const x=r[d];typeof x=="string"&&!N3.has(x)&&Va(x).values.length&&(p=r[d]),d++}if(p&&a)for(const x of o)r[x]=Xg(a,p)}const Gs=r=>r*180/Math.PI,Df=r=>{const o=Gs(Math.atan2(r[1],r[0]));return Lf(o)},_3={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:r=>(Math.abs(r[0])+Math.abs(r[3]))/2,rotate:Df,rotateZ:Df,skewX:r=>Gs(Math.atan(r[1])),skewY:r=>Gs(Math.atan(r[2])),skew:r=>(Math.abs(r[1])+Math.abs(r[2]))/2},Lf=r=>(r=r%360,r<0&&(r+=360),r),T1=Df,I1=r=>Math.sqrt(r[0]*r[0]+r[1]*r[1]),N1=r=>Math.sqrt(r[4]*r[4]+r[5]*r[5]),P3={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:I1,scaleY:N1,scale:r=>(I1(r)+N1(r))/2,rotateX:r=>Lf(Gs(Math.atan2(r[6],r[5]))),rotateY:r=>Lf(Gs(Math.atan2(-r[2],r[0]))),rotateZ:T1,rotate:T1,skewX:r=>Gs(Math.atan(r[4])),skewY:r=>Gs(Math.atan(r[1])),skew:r=>(Math.abs(r[1])+Math.abs(r[4]))/2};function R1(r){return r.includes("scale")?1:0}function Bf(r,o){if(!r||r==="none")return R1(o);const a=r.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let d,p;if(a)d=P3,p=a;else{const A=r.match(/^matrix\(([-\d.e\s,]+)\)$/u);d=_3,p=A}if(!p)return R1(o);const x=d[o],y=p[1].split(",").map(k3);return typeof x=="function"?x(y):y[x]}const O3=(r,o)=>{const{transform:a="none"}=getComputedStyle(r);return Bf(a,o)};function k3(r){return parseFloat(r.trim())}const _1=r=>r===Lo||r===et,M3=new Set(["x","y","z"]),D3=Do.filter(r=>!M3.has(r));function L3(r){const o=[];return D3.forEach(a=>{const d=r.getValue(a);d!==void 0&&(o.push([a,d.get()]),d.set(a.startsWith("scale")?1:0))}),o}const Oo={width:({x:r},{paddingLeft:o="0",paddingRight:a="0"})=>r.max-r.min-parseFloat(o)-parseFloat(a),height:({y:r},{paddingTop:o="0",paddingBottom:a="0"})=>r.max-r.min-parseFloat(o)-parseFloat(a),top:(r,{top:o})=>parseFloat(o),left:(r,{left:o})=>parseFloat(o),bottom:({y:r},{top:o})=>parseFloat(o)+(r.max-r.min),right:({x:r},{left:o})=>parseFloat(o)+(r.max-r.min),x:(r,{transform:o})=>Bf(o,"x"),y:(r,{transform:o})=>Bf(o,"y")};Oo.translateX=Oo.x;Oo.translateY=Oo.y;const Ys=new Set;let Ff=!1,jf=!1;function Yg(){if(jf){const r=Array.from(Ys).filter(d=>d.needsMeasurement),o=new Set(r.map(d=>d.element)),a=new Map;o.forEach(d=>{const p=L3(d);p.length&&(a.set(d,p),d.render())}),r.forEach(d=>d.measureInitialState()),o.forEach(d=>{d.render();const p=a.get(d);p&&p.forEach(([x,y])=>{var A;(A=d.getValue(x))==null||A.set(y)})}),r.forEach(d=>d.measureEndState()),r.forEach(d=>{d.suspendedScrollY!==void 0&&window.scrollTo(0,d.suspendedScrollY)})}jf=!1,Ff=!1,Ys.forEach(r=>r.complete()),Ys.clear()}function Kg(){Ys.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(jf=!0)})}function B3(){Kg(),Yg()}class Ld{constructor(o,a,d,p,x,y=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...o],this.onComplete=a,this.name=d,this.motionValue=p,this.element=x,this.isAsync=y}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ys.add(this),Ff||(Ff=!0,Zt.read(Kg),Zt.resolveKeyframes(Yg))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:o,name:a,element:d,motionValue:p}=this;for(let x=0;x<o.length;x++)if(o[x]===null)if(x===0){const y=p==null?void 0:p.get(),A=o[o.length-1];if(y!==void 0)o[0]=y;else if(d&&a){const w=d.readValue(a,A);w!=null&&(o[0]=w)}o[0]===void 0&&(o[0]=A),p&&y===void 0&&p.set(o[0])}else o[x]=o[x-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ys.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ys.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Zg=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r),F3=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function j3(r){const o=F3.exec(r);if(!o)return[,];const[,a,d,p]=o;return[`--${a??d}`,p]}function $g(r,o,a=1){const[d,p]=j3(r);if(!d)return;const x=window.getComputedStyle(o).getPropertyValue(d);if(x){const y=x.trim();return Zg(y)?parseFloat(y):y}return Ad(p)?$g(p,o,a+1):p}const qg=r=>o=>o.test(r),V3={test:r=>r==="auto",parse:r=>r},Qg=[Lo,et,hi,cs,Bw,Lw,V3],P1=r=>Qg.find(qg(r));class Jg extends Ld{constructor(o,a,d,p,x){super(o,a,d,p,x,!0)}readKeyframes(){const{unresolvedKeyframes:o,element:a,name:d}=this;if(!a||!a.current)return;super.readKeyframes();for(let w=0;w<o.length;w++){let E=o[w];if(typeof E=="string"&&(E=E.trim(),Ad(E))){const S=$g(E,a.current);S!==void 0&&(o[w]=S),w===o.length-1&&(this.finalKeyframe=E)}}if(this.resolveNoneKeyframes(),!Rg.has(d)||o.length!==2)return;const[p,x]=o,y=P1(p),A=P1(x);if(y!==A)if(_1(y)&&_1(A))for(let w=0;w<o.length;w++){const E=o[w];typeof E=="string"&&(o[w]=parseFloat(E))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:o,name:a}=this,d=[];for(let p=0;p<o.length;p++)d3(o[p])&&d.push(p);d.length&&R3(o,d,a)}measureInitialState(){const{element:o,unresolvedKeyframes:a,name:d}=this;if(!o||!o.current)return;d==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Oo[d](o.measureViewportBox(),window.getComputedStyle(o.current)),a[0]=this.measuredOrigin;const p=a[a.length-1];p!==void 0&&o.getValue(d,p).jump(p,!1)}measureEndState(){var A;const{element:o,name:a,unresolvedKeyframes:d}=this;if(!o||!o.current)return;const p=o.getValue(a);p&&p.jump(this.measuredOrigin,!1);const x=d.length-1,y=d[x];d[x]=Oo[a](o.measureViewportBox(),window.getComputedStyle(o.current)),y!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=y),(A=this.removedTransforms)!=null&&A.length&&this.removedTransforms.forEach(([w,E])=>{o.getValue(w).set(E)}),this.resolveNoneKeyframes()}}const O1=(r,o)=>o==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(ps.test(r)||r==="0")&&!r.startsWith("url("));function z3(r){const o=r[0];if(r.length===1)return!0;for(let a=0;a<r.length;a++)if(r[a]!==o)return!0}function U3(r,o,a,d){const p=r[0];if(p===null)return!1;if(o==="display"||o==="visibility")return!0;const x=r[r.length-1],y=O1(p,o),A=O1(x,o);return!y||!A?!1:z3(r)||(a==="spring"||pd(a))&&d}const W3=r=>r!==null;function ku(r,{repeat:o,repeatType:a="loop"},d){const p=r.filter(W3),x=o&&a!=="loop"&&o%2===1?0:p.length-1;return!x||d===void 0?p[x]:d}const H3=40;class em{constructor({autoplay:o=!0,delay:a=0,type:d="keyframes",repeat:p=0,repeatDelay:x=0,repeatType:y="loop",...A}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=di.now(),this.options={autoplay:o,delay:a,type:d,repeat:p,repeatDelay:x,repeatType:y,...A},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>H3?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&B3(),this._resolved}onKeyframesResolved(o,a){this.resolvedAt=di.now(),this.hasAttemptedResolve=!0;const{name:d,type:p,velocity:x,delay:y,onComplete:A,onUpdate:w,isGenerator:E}=this.options;if(!E&&!U3(o,d,p,x))if(y)this.options.duration=0;else{w&&w(ku(o,this.options,a)),A&&A(),this.resolveFinishedPromise();return}const S=this.initPlayback(o,a);S!==!1&&(this._resolved={keyframes:o,finalKeyframe:a,...S},this.onPostResolved())}onPostResolved(){}then(o,a){return this.currentFinishedPromise.then(o,a)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(o=>{this.resolveFinishedPromise=o})}}const ln=(r,o,a)=>r+(o-r)*a;function xf(r,o,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?r+(o-r)*6*a:a<1/2?o:a<2/3?r+(o-r)*(2/3-a)*6:r}function G3({hue:r,saturation:o,lightness:a,alpha:d}){r/=360,o/=100,a/=100;let p=0,x=0,y=0;if(!o)p=x=y=a;else{const A=a<.5?a*(1+o):a+o-a*o,w=2*a-A;p=xf(w,A,r+1/3),x=xf(w,A,r),y=xf(w,A,r-1/3)}return{red:Math.round(p*255),green:Math.round(x*255),blue:Math.round(y*255),alpha:d}}function wu(r,o){return a=>a>0?o:r}const yf=(r,o,a)=>{const d=r*r,p=a*(o*o-d)+d;return p<0?0:Math.sqrt(p)},X3=[kf,Hs,bo],Y3=r=>X3.find(o=>o.test(r));function k1(r){const o=Y3(r);if(!o)return!1;let a=o.parse(r);return o===bo&&(a=G3(a)),a}const M1=(r,o)=>{const a=k1(r),d=k1(o);if(!a||!d)return wu(r,o);const p={...a};return x=>(p.red=yf(a.red,d.red,x),p.green=yf(a.green,d.green,x),p.blue=yf(a.blue,d.blue,x),p.alpha=ln(a.alpha,d.alpha,x),Hs.transform(p))},K3=(r,o)=>a=>o(r(a)),Ya=(...r)=>r.reduce(K3),Vf=new Set(["none","hidden"]);function Z3(r,o){return Vf.has(r)?a=>a<=0?r:o:a=>a>=1?o:r}function $3(r,o){return a=>ln(r,o,a)}function Bd(r){return typeof r=="number"?$3:typeof r=="string"?Ad(r)?wu:rr.test(r)?M1:J3:Array.isArray(r)?tm:typeof r=="object"?rr.test(r)?M1:q3:wu}function tm(r,o){const a=[...r],d=a.length,p=r.map((x,y)=>Bd(x)(x,o[y]));return x=>{for(let y=0;y<d;y++)a[y]=p[y](x);return a}}function q3(r,o){const a={...r,...o},d={};for(const p in a)r[p]!==void 0&&o[p]!==void 0&&(d[p]=Bd(r[p])(r[p],o[p]));return p=>{for(const x in d)a[x]=d[x](p);return a}}function Q3(r,o){const a=[],d={color:0,var:0,number:0};for(let p=0;p<o.values.length;p++){const x=o.types[p],y=r.indexes[x][d[x]],A=r.values[y]??0;a[p]=A,d[x]++}return a}const J3=(r,o)=>{const a=ps.createTransformer(o),d=Va(r),p=Va(o);return d.indexes.var.length===p.indexes.var.length&&d.indexes.color.length===p.indexes.color.length&&d.indexes.number.length>=p.indexes.number.length?Vf.has(r)&&!p.values.length||Vf.has(o)&&!d.values.length?Z3(r,o):Ya(tm(Q3(d,p),p.values),a):wu(r,o)};function nm(r,o,a){return typeof r=="number"&&typeof o=="number"&&typeof a=="number"?ln(r,o,a):Bd(r)(r,o)}const ev=5;function rm(r,o,a){const d=Math.max(o-ev,0);return ig(a-r(d),o-d)}const mn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},D1=.001;function tv({duration:r=mn.duration,bounce:o=mn.bounce,velocity:a=mn.velocity,mass:d=mn.mass}){let p,x,y=1-o;y=Fi(mn.minDamping,mn.maxDamping,y),r=Fi(mn.minDuration,mn.maxDuration,fi(r)),y<1?(p=E=>{const S=E*y,I=S*r,R=S-a,k=zf(E,y),L=Math.exp(-I);return D1-R/k*L},x=E=>{const I=E*y*r,R=I*a+a,k=Math.pow(y,2)*Math.pow(E,2)*r,L=Math.exp(-I),B=zf(Math.pow(E,2),y);return(-p(E)+D1>0?-1:1)*((R-k)*L)/B}):(p=E=>{const S=Math.exp(-E*r),I=(E-a)*r+1;return-.001+S*I},x=E=>{const S=Math.exp(-E*r),I=(a-E)*(r*r);return S*I});const A=5/r,w=rv(p,x,A);if(r=ci(r),isNaN(w))return{stiffness:mn.stiffness,damping:mn.damping,duration:r};{const E=Math.pow(w,2)*d;return{stiffness:E,damping:y*2*Math.sqrt(d*E),duration:r}}}const nv=12;function rv(r,o,a){let d=a;for(let p=1;p<nv;p++)d=d-r(d)/o(d);return d}function zf(r,o){return r*Math.sqrt(1-o*o)}const iv=["duration","bounce"],sv=["stiffness","damping","mass"];function L1(r,o){return o.some(a=>r[a]!==void 0)}function ov(r){let o={velocity:mn.velocity,stiffness:mn.stiffness,damping:mn.damping,mass:mn.mass,isResolvedFromDuration:!1,...r};if(!L1(r,sv)&&L1(r,iv))if(r.visualDuration){const a=r.visualDuration,d=2*Math.PI/(a*1.2),p=d*d,x=2*Fi(.05,1,1-(r.bounce||0))*Math.sqrt(p);o={...o,mass:mn.mass,stiffness:p,damping:x}}else{const a=tv(r);o={...o,...a,mass:mn.mass},o.isResolvedFromDuration=!0}return o}function vu(r=mn.visualDuration,o=mn.bounce){const a=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:o}:r;let{restSpeed:d,restDelta:p}=a;const x=a.keyframes[0],y=a.keyframes[a.keyframes.length-1],A={done:!1,value:x},{stiffness:w,damping:E,mass:S,duration:I,velocity:R,isResolvedFromDuration:k}=ov({...a,velocity:-fi(a.velocity||0)}),L=R||0,B=E/(2*Math.sqrt(w*S)),j=y-x,V=fi(Math.sqrt(w/S)),H=Math.abs(j)<5;d||(d=H?mn.restSpeed.granular:mn.restSpeed.default),p||(p=H?mn.restDelta.granular:mn.restDelta.default);let U;if(B<1){const se=zf(V,B);U=re=>{const q=Math.exp(-B*V*re);return y-q*((L+B*V*j)/se*Math.sin(se*re)+j*Math.cos(se*re))}}else if(B===1)U=se=>y-Math.exp(-V*se)*(j+(L+V*j)*se);else{const se=V*Math.sqrt(B*B-1);U=re=>{const q=Math.exp(-B*V*re),ue=Math.min(se*re,300);return y-q*((L+B*V*j)*Math.sinh(ue)+se*j*Math.cosh(ue))/se}}const ne={calculatedDuration:k&&I||null,next:se=>{const re=U(se);if(k)A.done=se>=I;else{let q=0;B<1&&(q=se===0?ci(L):rm(U,se,re));const ue=Math.abs(q)<=d,J=Math.abs(y-re)<=p;A.done=ue&&J}return A.value=A.done?y:re,A},toString:()=>{const se=Math.min(md(ne),xu),re=sg(q=>ne.next(se*q).value,se,30);return se+"ms "+re},toTransition:()=>{}};return ne}vu.applyToOptions=r=>{const o=iw(r,100,vu);return r.ease=Ma()?o.ease:"easeOut",r.duration=ci(o.duration),r.type="keyframes",r};function B1({keyframes:r,velocity:o=0,power:a=.8,timeConstant:d=325,bounceDamping:p=10,bounceStiffness:x=500,modifyTarget:y,min:A,max:w,restDelta:E=.5,restSpeed:S}){const I=r[0],R={done:!1,value:I},k=ue=>A!==void 0&&ue<A||w!==void 0&&ue>w,L=ue=>A===void 0?w:w===void 0||Math.abs(A-ue)<Math.abs(w-ue)?A:w;let B=a*o;const j=I+B,V=y===void 0?j:y(j);V!==j&&(B=V-I);const H=ue=>-B*Math.exp(-ue/d),U=ue=>V+H(ue),ne=ue=>{const J=H(ue),Ie=U(ue);R.done=Math.abs(J)<=E,R.value=R.done?V:Ie};let se,re;const q=ue=>{k(R.value)&&(se=ue,re=vu({keyframes:[R.value,L(R.value)],velocity:rm(U,ue,R.value),damping:p,stiffness:x,restDelta:E,restSpeed:S}))};return q(0),{calculatedDuration:null,next:ue=>{let J=!1;return!re&&se===void 0&&(J=!0,ne(ue),q(ue)),se!==void 0&&ue>=se?re.next(ue-se):(!J&&ne(ue),R)}}}const av=Xa(.42,0,1,1),lv=Xa(0,0,.58,1),im=Xa(.42,0,.58,1),uv=r=>Array.isArray(r)&&typeof r[0]!="number",cv={linear:Vr,easeIn:av,easeInOut:im,easeOut:lv,circIn:kd,circInOut:Fg,circOut:Bg,backIn:Od,backInOut:Dg,backOut:Mg,anticipate:Lg},F1=r=>{if(hd(r)){rg(r.length===4);const[o,a,d,p]=r;return Xa(o,a,d,p)}else if(typeof r=="string")return cv[r];return r};function fv(r,o,a){const d=[],p=a||nm,x=r.length-1;for(let y=0;y<x;y++){let A=p(r[y],r[y+1]);if(o){const w=Array.isArray(o)?o[y]||Vr:o;A=Ya(w,A)}d.push(A)}return d}function dv(r,o,{clamp:a=!0,ease:d,mixer:p}={}){const x=r.length;if(rg(x===o.length),x===1)return()=>o[0];if(x===2&&o[0]===o[1])return()=>o[1];const y=r[0]===r[1];r[0]>r[x-1]&&(r=[...r].reverse(),o=[...o].reverse());const A=fv(o,d,p),w=A.length,E=S=>{if(y&&S<r[0])return o[0];let I=0;if(w>1)for(;I<r.length-2&&!(S<r[I+1]);I++);const R=ka(r[I],r[I+1],S);return A[I](R)};return a?S=>E(Fi(r[0],r[x-1],S)):E}function hv(r,o){const a=r[r.length-1];for(let d=1;d<=o;d++){const p=ka(0,o,d);r.push(ln(a,1,p))}}function pv(r){const o=[0];return hv(o,r.length-1),o}function gv(r,o){return r.map(a=>a*o)}function mv(r,o){return r.map(()=>o||im).splice(0,r.length-1)}function Cu({duration:r=300,keyframes:o,times:a,ease:d="easeInOut"}){const p=uv(d)?d.map(F1):F1(d),x={done:!1,value:o[0]},y=gv(a&&a.length===o.length?a:pv(o),r),A=dv(y,o,{ease:Array.isArray(p)?p:mv(o,p)});return{calculatedDuration:r,next:w=>(x.value=A(w),x.done=w>=r,x)}}const xv=r=>{const o=({timestamp:a})=>r(a);return{start:()=>Zt.update(o,!0),stop:()=>hs(o),now:()=>Hn.isProcessing?Hn.timestamp:di.now()}},yv={decay:B1,inertia:B1,tween:Cu,keyframes:Cu,spring:vu},wv=r=>r/100;class Fd extends em{constructor(o){super(o),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:w}=this.options;w&&w()};const{name:a,motionValue:d,element:p,keyframes:x}=this.options,y=(p==null?void 0:p.KeyframeResolver)||Ld,A=(w,E)=>this.onKeyframesResolved(w,E);this.resolver=new y(x,A,a,d,p),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(o){const{type:a="keyframes",repeat:d=0,repeatDelay:p=0,repeatType:x,velocity:y=0}=this.options,A=pd(a)?a:yv[a]||Cu;let w,E;A!==Cu&&typeof o[0]!="number"&&(w=Ya(wv,nm(o[0],o[1])),o=[0,100]);const S=A({...this.options,keyframes:o});x==="mirror"&&(E=A({...this.options,keyframes:[...o].reverse(),velocity:-y})),S.calculatedDuration===null&&(S.calculatedDuration=md(S));const{calculatedDuration:I}=S,R=I+p,k=R*(d+1)-p;return{generator:S,mirroredGenerator:E,mapPercentToKeyframes:w,calculatedDuration:I,resolvedDuration:R,totalDuration:k}}onPostResolved(){const{autoplay:o=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!o?this.pause():this.state=this.pendingPlayState}tick(o,a=!1){const{resolved:d}=this;if(!d){const{keyframes:ue}=this.options;return{done:!0,value:ue[ue.length-1]}}const{finalKeyframe:p,generator:x,mirroredGenerator:y,mapPercentToKeyframes:A,keyframes:w,calculatedDuration:E,totalDuration:S,resolvedDuration:I}=d;if(this.startTime===null)return x.next(0);const{delay:R,repeat:k,repeatType:L,repeatDelay:B,onUpdate:j}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,o):this.speed<0&&(this.startTime=Math.min(o-S/this.speed,this.startTime)),a?this.currentTime=o:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(o-this.startTime)*this.speed;const V=this.currentTime-R*(this.speed>=0?1:-1),H=this.speed>=0?V<0:V>S;this.currentTime=Math.max(V,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=S);let U=this.currentTime,ne=x;if(k){const ue=Math.min(this.currentTime,S)/I;let J=Math.floor(ue),Ie=ue%1;!Ie&&ue>=1&&(Ie=1),Ie===1&&J--,J=Math.min(J,k+1),!!(J%2)&&(L==="reverse"?(Ie=1-Ie,B&&(Ie-=B/I)):L==="mirror"&&(ne=y)),U=Fi(0,1,Ie)*I}const se=H?{done:!1,value:w[0]}:ne.next(U);A&&(se.value=A(se.value));let{done:re}=se;!H&&E!==null&&(re=this.speed>=0?this.currentTime>=S:this.currentTime<=0);const q=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&re);return q&&p!==void 0&&(se.value=ku(w,this.options,p)),j&&j(se.value),q&&this.finish(),se}get duration(){const{resolved:o}=this;return o?fi(o.calculatedDuration):0}get time(){return fi(this.currentTime)}set time(o){o=ci(o),this.currentTime=o,this.holdTime!==null||this.speed===0?this.holdTime=o:this.driver&&(this.startTime=this.driver.now()-o/this.speed)}get speed(){return this.playbackSpeed}set speed(o){const a=this.playbackSpeed!==o;this.playbackSpeed=o,a&&(this.time=fi(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:o=xv,onPlay:a,startTime:d}=this.options;this.driver||(this.driver=o(x=>this.tick(x))),a&&a();const p=this.driver.now();this.holdTime!==null?this.startTime=p-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=p):this.startTime=d??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=this.currentTime??0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:o}=this.options;o&&o()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(o){return this.startTime=0,this.tick(o,!0)}get finished(){return this.currentFinishedPromise}}const vv=new Set(["opacity","clipPath","filter","transform"]),Cv=fd(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Eu=10,Ev=2e4;function Av(r){return pd(r.type)||r.type==="spring"||!ag(r.ease)}function Sv(r,o){const a=new Fd({...o,keyframes:r,repeat:0,delay:0,isGenerator:!0});let d={done:!1,value:r[0]};const p=[];let x=0;for(;!d.done&&x<Ev;)d=a.sample(x),p.push(d.value),x+=Eu;return{times:void 0,keyframes:p,duration:x-Eu,ease:"linear"}}const sm={anticipate:Lg,backInOut:Dg,circInOut:Fg};function bv(r){return r in sm}class j1 extends em{constructor(o){super(o);const{name:a,motionValue:d,element:p,keyframes:x}=this.options;this.resolver=new Jg(x,(y,A)=>this.onKeyframesResolved(y,A),a,d,p),this.resolver.scheduleResolve()}initPlayback(o,a){let{duration:d=300,times:p,ease:x,type:y,motionValue:A,name:w,startTime:E}=this.options;if(!A.owner||!A.owner.current)return!1;if(typeof x=="string"&&Ma()&&bv(x)&&(x=sm[x]),Av(this.options)){const{onComplete:I,onUpdate:R,motionValue:k,element:L,...B}=this.options,j=Sv(o,B);o=j.keyframes,o.length===1&&(o[1]=o[0]),d=j.duration,p=j.times,x=j.ease,y="keyframes"}const S=rw(A.owner.current,w,o,{...this.options,duration:d,times:p,ease:x});return S.startTime=E??this.calcStartTime(),this.pendingTimeline?(h1(S,this.pendingTimeline),this.pendingTimeline=void 0):S.onfinish=()=>{const{onComplete:I}=this.options;A.set(ku(o,this.options,a)),I&&I(),this.cancel(),this.resolveFinishedPromise()},{animation:S,duration:d,times:p,type:y,ease:x,keyframes:o}}get duration(){const{resolved:o}=this;if(!o)return 0;const{duration:a}=o;return fi(a)}get time(){const{resolved:o}=this;if(!o)return 0;const{animation:a}=o;return fi(a.currentTime||0)}set time(o){const{resolved:a}=this;if(!a)return;const{animation:d}=a;d.currentTime=ci(o)}get speed(){const{resolved:o}=this;if(!o)return 1;const{animation:a}=o;return a.playbackRate}get finished(){return this.resolved.animation.finished}set speed(o){const{resolved:a}=this;if(!a)return;const{animation:d}=a;d.playbackRate=o}get state(){const{resolved:o}=this;if(!o)return"idle";const{animation:a}=o;return a.playState}get startTime(){const{resolved:o}=this;if(!o)return null;const{animation:a}=o;return a.startTime}attachTimeline(o){if(!this._resolved)this.pendingTimeline=o;else{const{resolved:a}=this;if(!a)return Vr;const{animation:d}=a;h1(d,o)}return Vr}play(){if(this.isStopped)return;const{resolved:o}=this;if(!o)return;const{animation:a}=o;a.playState==="finished"&&this.updateFinishedPromise(),a.play()}pause(){const{resolved:o}=this;if(!o)return;const{animation:a}=o;a.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:o}=this;if(!o)return;const{animation:a,keyframes:d,duration:p,type:x,ease:y,times:A}=o;if(a.playState==="idle"||a.playState==="finished")return;if(this.time){const{motionValue:E,onUpdate:S,onComplete:I,element:R,...k}=this.options,L=new Fd({...k,keyframes:d,duration:p,type:x,ease:y,times:A,isGenerator:!0}),B=ci(this.time);E.setWithVelocity(L.sample(B-Eu).value,L.sample(B).value,Eu)}const{onStop:w}=this.options;w&&w(),this.cancel()}complete(){const{resolved:o}=this;o&&o.animation.finish()}cancel(){const{resolved:o}=this;o&&o.animation.cancel()}static supports(o){const{motionValue:a,name:d,repeatDelay:p,repeatType:x,damping:y,type:A}=o;if(!a||!a.owner||!(a.owner.current instanceof HTMLElement))return!1;const{onUpdate:w,transformTemplate:E}=a.owner.getProps();return Cv()&&d&&vv.has(d)&&(d!=="transform"||!E)&&!w&&!p&&x!=="mirror"&&y!==0&&A!=="inertia"}}const Tv={type:"spring",stiffness:500,damping:25,restSpeed:10},Iv=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),Nv={type:"keyframes",duration:.8},Rv={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},_v=(r,{keyframes:o})=>o.length>2?Nv:Zs.has(r)?r.startsWith("scale")?Iv(o[1]):Tv:Rv;function Pv({when:r,delay:o,delayChildren:a,staggerChildren:d,staggerDirection:p,repeat:x,repeatType:y,repeatDelay:A,from:w,elapsed:E,...S}){return!!Object.keys(S).length}const jd=(r,o,a,d={},p,x)=>y=>{const A=gd(d,r)||{},w=A.delay||d.delay||0;let{elapsed:E=0}=d;E=E-ci(w);let S={keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:o.getVelocity(),...A,delay:-E,onUpdate:R=>{o.set(R),A.onUpdate&&A.onUpdate(R)},onComplete:()=>{y(),A.onComplete&&A.onComplete()},name:r,motionValue:o,element:x?void 0:p};Pv(A)||(S={...S,..._v(r,S)}),S.duration&&(S.duration=ci(S.duration)),S.repeatDelay&&(S.repeatDelay=ci(S.repeatDelay)),S.from!==void 0&&(S.keyframes[0]=S.from);let I=!1;if((S.type===!1||S.duration===0&&!S.repeatDelay)&&(S.duration=0,S.delay===0&&(I=!0)),S.allowFlatten=!A.type&&!A.ease,I&&!x&&o.get()!==void 0){const R=ku(S.keyframes,A);if(R!==void 0)return Zt.update(()=>{S.onUpdate(R),S.onComplete()}),new ew([])}return!x&&j1.supports(S)?new j1(S):new Fd(S)};function Ov({protectedKeys:r,needsAnimating:o},a){const d=r.hasOwnProperty(a)&&o[a]!==!0;return o[a]=!1,d}function om(r,o,{delay:a=0,transitionOverride:d,type:p}={}){let{transition:x=r.getDefaultTransition(),transitionEnd:y,...A}=o;d&&(x=d);const w=[],E=p&&r.animationState&&r.animationState.getState()[p];for(const S in A){const I=r.getValue(S,r.latestValues[S]??null),R=A[S];if(R===void 0||E&&Ov(E,S))continue;const k={delay:a,...gd(x||{},S)};let L=!1;if(window.MotionHandoffAnimation){const j=_g(r);if(j){const V=window.MotionHandoffAnimation(j,S,Zt);V!==null&&(k.startTime=V,L=!0)}}Of(r,S),I.start(jd(S,I,R,r.shouldReduceMotion&&Rg.has(S)?{type:!1}:k,r,L));const B=I.animation;B&&w.push(B)}return y&&Promise.all(w).then(()=>{Zt.update(()=>{y&&a3(r,y)})}),w}function Uf(r,o,a={}){var w;const d=ja(r,o,a.type==="exit"?(w=r.presenceContext)==null?void 0:w.custom:void 0);let{transition:p=r.getDefaultTransition()||{}}=d||{};a.transitionOverride&&(p=a.transitionOverride);const x=d?()=>Promise.all(om(r,d,a)):()=>Promise.resolve(),y=r.variantChildren&&r.variantChildren.size?(E=0)=>{const{delayChildren:S=0,staggerChildren:I,staggerDirection:R}=p;return kv(r,o,S+E,I,R,a)}:()=>Promise.resolve(),{when:A}=p;if(A){const[E,S]=A==="beforeChildren"?[x,y]:[y,x];return E().then(()=>S())}else return Promise.all([x(),y(a.delay)])}function kv(r,o,a=0,d=0,p=1,x){const y=[],A=(r.variantChildren.size-1)*d,w=p===1?(E=0)=>E*d:(E=0)=>A-E*d;return Array.from(r.variantChildren).sort(Mv).forEach((E,S)=>{E.notify("AnimationStart",o),y.push(Uf(E,o,{...x,delay:a+w(S)}).then(()=>E.notify("AnimationComplete",o)))}),Promise.all(y)}function Mv(r,o){return r.sortNodePosition(o)}function Dv(r,o,a={}){r.notify("AnimationStart",o);let d;if(Array.isArray(o)){const p=o.map(x=>Uf(r,x,a));d=Promise.all(p)}else if(typeof o=="string")d=Uf(r,o,a);else{const p=typeof o=="function"?ja(r,o,a.custom):o;d=Promise.all(om(r,p,a))}return d.then(()=>{r.notify("AnimationComplete",o)})}function am(r,o){if(!Array.isArray(o))return!1;const a=o.length;if(a!==r.length)return!1;for(let d=0;d<a;d++)if(o[d]!==r[d])return!1;return!0}const Lv=vd.length;function lm(r){if(!r)return;if(!r.isControllingVariants){const a=r.parent?lm(r.parent)||{}:{};return r.props.initial!==void 0&&(a.initial=r.props.initial),a}const o={};for(let a=0;a<Lv;a++){const d=vd[a],p=r.props[d];(La(p)||p===!1)&&(o[d]=p)}return o}const Bv=[...wd].reverse(),Fv=wd.length;function jv(r){return o=>Promise.all(o.map(({animation:a,options:d})=>Dv(r,a,d)))}function Vv(r){let o=jv(r),a=V1(),d=!0;const p=w=>(E,S)=>{var R;const I=ja(r,S,w==="exit"?(R=r.presenceContext)==null?void 0:R.custom:void 0);if(I){const{transition:k,transitionEnd:L,...B}=I;E={...E,...B,...L}}return E};function x(w){o=w(r)}function y(w){const{props:E}=r,S=lm(r.parent)||{},I=[],R=new Set;let k={},L=1/0;for(let j=0;j<Fv;j++){const V=Bv[j],H=a[V],U=E[V]!==void 0?E[V]:S[V],ne=La(U),se=V===w?H.isActive:null;se===!1&&(L=j);let re=U===S[V]&&U!==E[V]&&ne;if(re&&d&&r.manuallyAnimateOnMount&&(re=!1),H.protectedKeys={...k},!H.isActive&&se===null||!U&&!H.prevProp||Pu(U)||typeof U=="boolean")continue;const q=zv(H.prevProp,U);let ue=q||V===w&&H.isActive&&!re&&ne||j>L&&ne,J=!1;const Ie=Array.isArray(U)?U:[U];let ke=Ie.reduce(p(V),{});se===!1&&(ke={});const{prevResolvedValues:be={}}=H,Re={...be,...ke},De=fe=>{ue=!0,R.has(fe)&&(J=!0,R.delete(fe)),H.needsAnimating[fe]=!0;const ce=r.getValue(fe);ce&&(ce.liveStyle=!1)};for(const fe in Re){const ce=ke[fe],ge=be[fe];if(k.hasOwnProperty(fe))continue;let pe=!1;Pf(ce)&&Pf(ge)?pe=!am(ce,ge):pe=ce!==ge,pe?ce!=null?De(fe):R.add(fe):ce!==void 0&&R.has(fe)?De(fe):H.protectedKeys[fe]=!0}H.prevProp=U,H.prevResolvedValues=ke,H.isActive&&(k={...k,...ke}),d&&r.blockInitialAnimation&&(ue=!1),ue&&(!(re&&q)||J)&&I.push(...Ie.map(fe=>({animation:fe,options:{type:V}})))}if(R.size){const j={};if(typeof E.initial!="boolean"){const V=ja(r,Array.isArray(E.initial)?E.initial[0]:E.initial);V&&V.transition&&(j.transition=V.transition)}R.forEach(V=>{const H=r.getBaseTarget(V),U=r.getValue(V);U&&(U.liveStyle=!0),j[V]=H??null}),I.push({animation:j})}let B=!!I.length;return d&&(E.initial===!1||E.initial===E.animate)&&!r.manuallyAnimateOnMount&&(B=!1),d=!1,B?o(I):Promise.resolve()}function A(w,E){var I;if(a[w].isActive===E)return Promise.resolve();(I=r.variantChildren)==null||I.forEach(R=>{var k;return(k=R.animationState)==null?void 0:k.setActive(w,E)}),a[w].isActive=E;const S=y(w);for(const R in a)a[R].protectedKeys={};return S}return{animateChanges:y,setActive:A,setAnimateFunction:x,getState:()=>a,reset:()=>{a=V1(),d=!0}}}function zv(r,o){return typeof o=="string"?o!==r:Array.isArray(o)?!am(o,r):!1}function Us(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function V1(){return{animate:Us(!0),whileInView:Us(),whileHover:Us(),whileTap:Us(),whileDrag:Us(),whileFocus:Us(),exit:Us()}}class gs{constructor(o){this.isMounted=!1,this.node=o}update(){}}class Uv extends gs{constructor(o){super(o),o.animationState||(o.animationState=Vv(o))}updateAnimationControlsSubscription(){const{animate:o}=this.node.getProps();Pu(o)&&(this.unmountControls=o.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:o}=this.node.getProps(),{animate:a}=this.node.prevProps||{};o!==a&&this.updateAnimationControlsSubscription()}unmount(){var o;this.node.animationState.reset(),(o=this.unmountControls)==null||o.call(this)}}let Wv=0;class Hv extends gs{constructor(){super(...arguments),this.id=Wv++}update(){if(!this.node.presenceContext)return;const{isPresent:o,onExitComplete:a}=this.node.presenceContext,{isPresent:d}=this.node.prevPresenceContext||{};if(!this.node.animationState||o===d)return;const p=this.node.animationState.setActive("exit",!o);a&&!o&&p.then(()=>{a(this.id)})}mount(){const{register:o,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),o&&(this.unmount=o(this.id))}unmount(){}}const Gv={animation:{Feature:Uv},exit:{Feature:Hv}};function za(r,o,a,d={passive:!0}){return r.addEventListener(o,a,d),()=>r.removeEventListener(o,a)}function Ka(r){return{point:{x:r.pageX,y:r.pageY}}}const Xv=r=>o=>yd(o)&&r(o,Ka(o));function Na(r,o,a,d){return za(r,o,Xv(a),d)}function um({top:r,left:o,right:a,bottom:d}){return{x:{min:o,max:a},y:{min:r,max:d}}}function Yv({x:r,y:o}){return{top:o.min,right:r.max,bottom:o.max,left:r.min}}function Kv(r,o){if(!o)return r;const a=o({x:r.left,y:r.top}),d=o({x:r.right,y:r.bottom});return{top:a.y,left:a.x,bottom:d.y,right:d.x}}const cm=1e-4,Zv=1-cm,$v=1+cm,fm=.01,qv=0-fm,Qv=0+fm;function fr(r){return r.max-r.min}function Jv(r,o,a){return Math.abs(r-o)<=a}function z1(r,o,a,d=.5){r.origin=d,r.originPoint=ln(o.min,o.max,r.origin),r.scale=fr(a)/fr(o),r.translate=ln(a.min,a.max,r.origin)-r.originPoint,(r.scale>=Zv&&r.scale<=$v||isNaN(r.scale))&&(r.scale=1),(r.translate>=qv&&r.translate<=Qv||isNaN(r.translate))&&(r.translate=0)}function Ra(r,o,a,d){z1(r.x,o.x,a.x,d?d.originX:void 0),z1(r.y,o.y,a.y,d?d.originY:void 0)}function U1(r,o,a){r.min=a.min+o.min,r.max=r.min+fr(o)}function eC(r,o,a){U1(r.x,o.x,a.x),U1(r.y,o.y,a.y)}function W1(r,o,a){r.min=o.min-a.min,r.max=r.min+fr(o)}function _a(r,o,a){W1(r.x,o.x,a.x),W1(r.y,o.y,a.y)}const H1=()=>({translate:0,scale:1,origin:0,originPoint:0}),To=()=>({x:H1(),y:H1()}),G1=()=>({min:0,max:0}),An=()=>({x:G1(),y:G1()});function jr(r){return[r("x"),r("y")]}function wf(r){return r===void 0||r===1}function Wf({scale:r,scaleX:o,scaleY:a}){return!wf(r)||!wf(o)||!wf(a)}function Ws(r){return Wf(r)||dm(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function dm(r){return X1(r.x)||X1(r.y)}function X1(r){return r&&r!=="0%"}function Au(r,o,a){const d=r-a,p=o*d;return a+p}function Y1(r,o,a,d,p){return p!==void 0&&(r=Au(r,p,d)),Au(r,a,d)+o}function Hf(r,o=0,a=1,d,p){r.min=Y1(r.min,o,a,d,p),r.max=Y1(r.max,o,a,d,p)}function hm(r,{x:o,y:a}){Hf(r.x,o.translate,o.scale,o.originPoint),Hf(r.y,a.translate,a.scale,a.originPoint)}const K1=.999999999999,Z1=1.0000000000001;function tC(r,o,a,d=!1){const p=a.length;if(!p)return;o.x=o.y=1;let x,y;for(let A=0;A<p;A++){x=a[A],y=x.projectionDelta;const{visualElement:w}=x.options;w&&w.props.style&&w.props.style.display==="contents"||(d&&x.options.layoutScroll&&x.scroll&&x!==x.root&&No(r,{x:-x.scroll.offset.x,y:-x.scroll.offset.y}),y&&(o.x*=y.x.scale,o.y*=y.y.scale,hm(r,y)),d&&Ws(x.latestValues)&&No(r,x.latestValues))}o.x<Z1&&o.x>K1&&(o.x=1),o.y<Z1&&o.y>K1&&(o.y=1)}function Io(r,o){r.min=r.min+o,r.max=r.max+o}function $1(r,o,a,d,p=.5){const x=ln(r.min,r.max,p);Hf(r,o,a,x,d)}function No(r,o){$1(r.x,o.x,o.scaleX,o.scale,o.originX),$1(r.y,o.y,o.scaleY,o.scale,o.originY)}function pm(r,o){return um(Kv(r.getBoundingClientRect(),o))}function nC(r,o,a){const d=pm(r,a),{scroll:p}=o;return p&&(Io(d.x,p.offset.x),Io(d.y,p.offset.y)),d}const gm=({current:r})=>r?r.ownerDocument.defaultView:null,q1=(r,o)=>Math.abs(r-o);function rC(r,o){const a=q1(r.x,o.x),d=q1(r.y,o.y);return Math.sqrt(a**2+d**2)}class mm{constructor(o,a,{transformPagePoint:d,contextWindow:p,dragSnapToOrigin:x=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const I=Cf(this.lastMoveEventInfo,this.history),R=this.startEvent!==null,k=rC(I.offset,{x:0,y:0})>=3;if(!R&&!k)return;const{point:L}=I,{timestamp:B}=Hn;this.history.push({...L,timestamp:B});const{onStart:j,onMove:V}=this.handlers;R||(j&&j(this.lastMoveEvent,I),this.startEvent=this.lastMoveEvent),V&&V(this.lastMoveEvent,I)},this.handlePointerMove=(I,R)=>{this.lastMoveEvent=I,this.lastMoveEventInfo=vf(R,this.transformPagePoint),Zt.update(this.updatePoint,!0)},this.handlePointerUp=(I,R)=>{this.end();const{onEnd:k,onSessionEnd:L,resumeAnimation:B}=this.handlers;if(this.dragSnapToOrigin&&B&&B(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=Cf(I.type==="pointercancel"?this.lastMoveEventInfo:vf(R,this.transformPagePoint),this.history);this.startEvent&&k&&k(I,j),L&&L(I,j)},!yd(o))return;this.dragSnapToOrigin=x,this.handlers=a,this.transformPagePoint=d,this.contextWindow=p||window;const y=Ka(o),A=vf(y,this.transformPagePoint),{point:w}=A,{timestamp:E}=Hn;this.history=[{...w,timestamp:E}];const{onSessionStart:S}=a;S&&S(o,Cf(A,this.history)),this.removeListeners=Ya(Na(this.contextWindow,"pointermove",this.handlePointerMove),Na(this.contextWindow,"pointerup",this.handlePointerUp),Na(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(o){this.handlers=o}end(){this.removeListeners&&this.removeListeners(),hs(this.updatePoint)}}function vf(r,o){return o?{point:o(r.point)}:r}function Q1(r,o){return{x:r.x-o.x,y:r.y-o.y}}function Cf({point:r},o){return{point:r,delta:Q1(r,xm(o)),offset:Q1(r,iC(o)),velocity:sC(o,.1)}}function iC(r){return r[0]}function xm(r){return r[r.length-1]}function sC(r,o){if(r.length<2)return{x:0,y:0};let a=r.length-1,d=null;const p=xm(r);for(;a>=0&&(d=r[a],!(p.timestamp-d.timestamp>ci(o)));)a--;if(!d)return{x:0,y:0};const x=fi(p.timestamp-d.timestamp);if(x===0)return{x:0,y:0};const y={x:(p.x-d.x)/x,y:(p.y-d.y)/x};return y.x===1/0&&(y.x=0),y.y===1/0&&(y.y=0),y}function oC(r,{min:o,max:a},d){return o!==void 0&&r<o?r=d?ln(o,r,d.min):Math.max(r,o):a!==void 0&&r>a&&(r=d?ln(a,r,d.max):Math.min(r,a)),r}function J1(r,o,a){return{min:o!==void 0?r.min+o:void 0,max:a!==void 0?r.max+a-(r.max-r.min):void 0}}function aC(r,{top:o,left:a,bottom:d,right:p}){return{x:J1(r.x,a,p),y:J1(r.y,o,d)}}function ep(r,o){let a=o.min-r.min,d=o.max-r.max;return o.max-o.min<r.max-r.min&&([a,d]=[d,a]),{min:a,max:d}}function lC(r,o){return{x:ep(r.x,o.x),y:ep(r.y,o.y)}}function uC(r,o){let a=.5;const d=fr(r),p=fr(o);return p>d?a=ka(o.min,o.max-d,r.min):d>p&&(a=ka(r.min,r.max-p,o.min)),Fi(0,1,a)}function cC(r,o){const a={};return o.min!==void 0&&(a.min=o.min-r.min),o.max!==void 0&&(a.max=o.max-r.min),a}const Gf=.35;function fC(r=Gf){return r===!1?r=0:r===!0&&(r=Gf),{x:tp(r,"left","right"),y:tp(r,"top","bottom")}}function tp(r,o,a){return{min:np(r,o),max:np(r,a)}}function np(r,o){return typeof r=="number"?r:r[o]||0}const dC=new WeakMap;class hC{constructor(o){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=An(),this.visualElement=o}start(o,{snapToCursor:a=!1}={}){const{presenceContext:d}=this.visualElement;if(d&&d.isPresent===!1)return;const p=S=>{const{dragSnapToOrigin:I}=this.getProps();I?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(Ka(S).point)},x=(S,I)=>{const{drag:R,dragPropagation:k,onDragStart:L}=this.getProps();if(R&&!k&&(this.openDragLock&&this.openDragLock(),this.openDragLock=lw(R),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),jr(j=>{let V=this.getAxisMotionValue(j).get()||0;if(hi.test(V)){const{projection:H}=this.visualElement;if(H&&H.layout){const U=H.layout.layoutBox[j];U&&(V=fr(U)*(parseFloat(V)/100))}}this.originPoint[j]=V}),L&&Zt.postRender(()=>L(S,I)),Of(this.visualElement,"transform");const{animationState:B}=this.visualElement;B&&B.setActive("whileDrag",!0)},y=(S,I)=>{const{dragPropagation:R,dragDirectionLock:k,onDirectionLock:L,onDrag:B}=this.getProps();if(!R&&!this.openDragLock)return;const{offset:j}=I;if(k&&this.currentDirection===null){this.currentDirection=pC(j),this.currentDirection!==null&&L&&L(this.currentDirection);return}this.updateAxis("x",I.point,j),this.updateAxis("y",I.point,j),this.visualElement.render(),B&&B(S,I)},A=(S,I)=>this.stop(S,I),w=()=>jr(S=>{var I;return this.getAnimationState(S)==="paused"&&((I=this.getAxisMotionValue(S).animation)==null?void 0:I.play())}),{dragSnapToOrigin:E}=this.getProps();this.panSession=new mm(o,{onSessionStart:p,onStart:x,onMove:y,onSessionEnd:A,resumeAnimation:w},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:E,contextWindow:gm(this.visualElement)})}stop(o,a){const d=this.isDragging;if(this.cancel(),!d)return;const{velocity:p}=a;this.startAnimation(p);const{onDragEnd:x}=this.getProps();x&&Zt.postRender(()=>x(o,a))}cancel(){this.isDragging=!1;const{projection:o,animationState:a}=this.visualElement;o&&(o.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:d}=this.getProps();!d&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(o,a,d){const{drag:p}=this.getProps();if(!d||!su(o,p,this.currentDirection))return;const x=this.getAxisMotionValue(o);let y=this.originPoint[o]+d[o];this.constraints&&this.constraints[o]&&(y=oC(y,this.constraints[o],this.elastic[o])),x.set(y)}resolveConstraints(){var x;const{dragConstraints:o,dragElastic:a}=this.getProps(),d=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(x=this.visualElement.projection)==null?void 0:x.layout,p=this.constraints;o&&So(o)?this.constraints||(this.constraints=this.resolveRefConstraints()):o&&d?this.constraints=aC(d.layoutBox,o):this.constraints=!1,this.elastic=fC(a),p!==this.constraints&&d&&this.constraints&&!this.hasMutatedConstraints&&jr(y=>{this.constraints!==!1&&this.getAxisMotionValue(y)&&(this.constraints[y]=cC(d.layoutBox[y],this.constraints[y]))})}resolveRefConstraints(){const{dragConstraints:o,onMeasureDragConstraints:a}=this.getProps();if(!o||!So(o))return!1;const d=o.current,{projection:p}=this.visualElement;if(!p||!p.layout)return!1;const x=nC(d,p.root,this.visualElement.getTransformPagePoint());let y=lC(p.layout.layoutBox,x);if(a){const A=a(Yv(y));this.hasMutatedConstraints=!!A,A&&(y=um(A))}return y}startAnimation(o){const{drag:a,dragMomentum:d,dragElastic:p,dragTransition:x,dragSnapToOrigin:y,onDragTransitionEnd:A}=this.getProps(),w=this.constraints||{},E=jr(S=>{if(!su(S,a,this.currentDirection))return;let I=w&&w[S]||{};y&&(I={min:0,max:0});const R=p?200:1e6,k=p?40:1e7,L={type:"inertia",velocity:d?o[S]:0,bounceStiffness:R,bounceDamping:k,timeConstant:750,restDelta:1,restSpeed:10,...x,...I};return this.startAxisValueAnimation(S,L)});return Promise.all(E).then(A)}startAxisValueAnimation(o,a){const d=this.getAxisMotionValue(o);return Of(this.visualElement,o),d.start(jd(o,d,0,a,this.visualElement,!1))}stopAnimation(){jr(o=>this.getAxisMotionValue(o).stop())}pauseAnimation(){jr(o=>{var a;return(a=this.getAxisMotionValue(o).animation)==null?void 0:a.pause()})}getAnimationState(o){var a;return(a=this.getAxisMotionValue(o).animation)==null?void 0:a.state}getAxisMotionValue(o){const a=`_drag${o.toUpperCase()}`,d=this.visualElement.getProps(),p=d[a];return p||this.visualElement.getValue(o,(d.initial?d.initial[o]:void 0)||0)}snapToCursor(o){jr(a=>{const{drag:d}=this.getProps();if(!su(a,d,this.currentDirection))return;const{projection:p}=this.visualElement,x=this.getAxisMotionValue(a);if(p&&p.layout){const{min:y,max:A}=p.layout.layoutBox[a];x.set(o[a]-ln(y,A,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:o,dragConstraints:a}=this.getProps(),{projection:d}=this.visualElement;if(!So(a)||!d||!this.constraints)return;this.stopAnimation();const p={x:0,y:0};jr(y=>{const A=this.getAxisMotionValue(y);if(A&&this.constraints!==!1){const w=A.get();p[y]=uC({min:w,max:w},this.constraints[y])}});const{transformTemplate:x}=this.visualElement.getProps();this.visualElement.current.style.transform=x?x({},""):"none",d.root&&d.root.updateScroll(),d.updateLayout(),this.resolveConstraints(),jr(y=>{if(!su(y,o,null))return;const A=this.getAxisMotionValue(y),{min:w,max:E}=this.constraints[y];A.set(ln(w,E,p[y]))})}addListeners(){if(!this.visualElement.current)return;dC.set(this.visualElement,this);const o=this.visualElement.current,a=Na(o,"pointerdown",w=>{const{drag:E,dragListener:S=!0}=this.getProps();E&&S&&this.start(w)}),d=()=>{const{dragConstraints:w}=this.getProps();So(w)&&w.current&&(this.constraints=this.resolveRefConstraints())},{projection:p}=this.visualElement,x=p.addEventListener("measure",d);p&&!p.layout&&(p.root&&p.root.updateScroll(),p.updateLayout()),Zt.read(d);const y=za(window,"resize",()=>this.scalePositionWithinConstraints()),A=p.addEventListener("didUpdate",({delta:w,hasLayoutChanged:E})=>{this.isDragging&&E&&(jr(S=>{const I=this.getAxisMotionValue(S);I&&(this.originPoint[S]+=w[S].translate,I.set(I.get()+w[S].translate))}),this.visualElement.render())});return()=>{y(),a(),x(),A&&A()}}getProps(){const o=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:d=!1,dragPropagation:p=!1,dragConstraints:x=!1,dragElastic:y=Gf,dragMomentum:A=!0}=o;return{...o,drag:a,dragDirectionLock:d,dragPropagation:p,dragConstraints:x,dragElastic:y,dragMomentum:A}}}function su(r,o,a){return(o===!0||o===r)&&(a===null||a===r)}function pC(r,o=10){let a=null;return Math.abs(r.y)>o?a="y":Math.abs(r.x)>o&&(a="x"),a}class gC extends gs{constructor(o){super(o),this.removeGroupControls=Vr,this.removeListeners=Vr,this.controls=new hC(o)}mount(){const{dragControls:o}=this.node.getProps();o&&(this.removeGroupControls=o.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Vr}unmount(){this.removeGroupControls(),this.removeListeners()}}const rp=r=>(o,a)=>{r&&Zt.postRender(()=>r(o,a))};class mC extends gs{constructor(){super(...arguments),this.removePointerDownListener=Vr}onPointerDown(o){this.session=new mm(o,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:gm(this.node)})}createPanHandlers(){const{onPanSessionStart:o,onPanStart:a,onPan:d,onPanEnd:p}=this.node.getProps();return{onSessionStart:rp(o),onStart:rp(a),onMove:d,onEnd:(x,y)=>{delete this.session,p&&Zt.postRender(()=>p(x,y))}}}mount(){this.removePointerDownListener=Na(this.node.current,"pointerdown",o=>this.onPointerDown(o))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const du={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ip(r,o){return o.max===o.min?0:r/(o.max-o.min)*100}const Aa={correct:(r,o)=>{if(!o.target)return r;if(typeof r=="string")if(et.test(r))r=parseFloat(r);else return r;const a=ip(r,o.target.x),d=ip(r,o.target.y);return`${a}% ${d}%`}},xC={correct:(r,{treeScale:o,projectionDelta:a})=>{const d=r,p=ps.parse(r);if(p.length>5)return d;const x=ps.createTransformer(r),y=typeof p[0]!="number"?1:0,A=a.x.scale*o.x,w=a.y.scale*o.y;p[0+y]/=A,p[1+y]/=w;const E=ln(A,w,.5);return typeof p[2+y]=="number"&&(p[2+y]/=E),typeof p[3+y]=="number"&&(p[3+y]/=E),x(p)}};class yC extends O.Component{componentDidMount(){const{visualElement:o,layoutGroup:a,switchLayoutGroup:d,layoutId:p}=this.props,{projection:x}=o;Dw(wC),x&&(a.group&&a.group.add(x),d&&d.register&&p&&d.register(x),x.root.didUpdate(),x.addEventListener("animationComplete",()=>{this.safeToRemove()}),x.setOptions({...x.options,onExitComplete:()=>this.safeToRemove()})),du.hasEverUpdated=!0}getSnapshotBeforeUpdate(o){const{layoutDependency:a,visualElement:d,drag:p,isPresent:x}=this.props,y=d.projection;return y&&(y.isPresent=x,p||o.layoutDependency!==a||a===void 0||o.isPresent!==x?y.willUpdate():this.safeToRemove(),o.isPresent!==x&&(x?y.promote():y.relegate()||Zt.postRender(()=>{const A=y.getStack();(!A||!A.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:o}=this.props.visualElement;o&&(o.root.didUpdate(),xd.postRender(()=>{!o.currentAnimation&&o.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:o,layoutGroup:a,switchLayoutGroup:d}=this.props,{projection:p}=o;p&&(p.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(p),d&&d.deregister&&d.deregister(p))}safeToRemove(){const{safeToRemove:o}=this.props;o&&o()}render(){return null}}function ym(r){const[o,a]=ng(),d=O.useContext(sd);return T.jsx(yC,{...r,layoutGroup:d,switchLayoutGroup:O.useContext(mg),isPresent:o,safeToRemove:a})}const wC={borderRadius:{...Aa,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Aa,borderTopRightRadius:Aa,borderBottomLeftRadius:Aa,borderBottomRightRadius:Aa,boxShadow:xC};function vC(r,o,a){const d=ir(r)?r:Da(r);return d.start(jd("",d,o,a)),d.animation}function CC(r){return r instanceof SVGElement&&r.tagName!=="svg"}const EC=(r,o)=>r.depth-o.depth;class AC{constructor(){this.children=[],this.isDirty=!1}add(o){ud(this.children,o),this.isDirty=!0}remove(o){cd(this.children,o),this.isDirty=!0}forEach(o){this.isDirty&&this.children.sort(EC),this.isDirty=!1,this.children.forEach(o)}}function SC(r,o){const a=di.now(),d=({timestamp:p})=>{const x=p-a;x>=o&&(hs(d),r(x-o))};return Zt.read(d,!0),()=>hs(d)}const wm=["TopLeft","TopRight","BottomLeft","BottomRight"],bC=wm.length,sp=r=>typeof r=="string"?parseFloat(r):r,op=r=>typeof r=="number"||et.test(r);function TC(r,o,a,d,p,x){p?(r.opacity=ln(0,a.opacity!==void 0?a.opacity:1,IC(d)),r.opacityExit=ln(o.opacity!==void 0?o.opacity:1,0,NC(d))):x&&(r.opacity=ln(o.opacity!==void 0?o.opacity:1,a.opacity!==void 0?a.opacity:1,d));for(let y=0;y<bC;y++){const A=`border${wm[y]}Radius`;let w=ap(o,A),E=ap(a,A);if(w===void 0&&E===void 0)continue;w||(w=0),E||(E=0),w===0||E===0||op(w)===op(E)?(r[A]=Math.max(ln(sp(w),sp(E),d),0),(hi.test(E)||hi.test(w))&&(r[A]+="%")):r[A]=E}(o.rotate||a.rotate)&&(r.rotate=ln(o.rotate||0,a.rotate||0,d))}function ap(r,o){return r[o]!==void 0?r[o]:r.borderRadius}const IC=vm(0,.5,Bg),NC=vm(.5,.95,Vr);function vm(r,o,a){return d=>d<r?0:d>o?1:a(ka(r,o,d))}function lp(r,o){r.min=o.min,r.max=o.max}function Fr(r,o){lp(r.x,o.x),lp(r.y,o.y)}function up(r,o){r.translate=o.translate,r.scale=o.scale,r.originPoint=o.originPoint,r.origin=o.origin}function cp(r,o,a,d,p){return r-=o,r=Au(r,1/a,d),p!==void 0&&(r=Au(r,1/p,d)),r}function RC(r,o=0,a=1,d=.5,p,x=r,y=r){if(hi.test(o)&&(o=parseFloat(o),o=ln(y.min,y.max,o/100)-y.min),typeof o!="number")return;let A=ln(x.min,x.max,d);r===x&&(A-=o),r.min=cp(r.min,o,a,A,p),r.max=cp(r.max,o,a,A,p)}function fp(r,o,[a,d,p],x,y){RC(r,o[a],o[d],o[p],o.scale,x,y)}const _C=["x","scaleX","originX"],PC=["y","scaleY","originY"];function dp(r,o,a,d){fp(r.x,o,_C,a?a.x:void 0,d?d.x:void 0),fp(r.y,o,PC,a?a.y:void 0,d?d.y:void 0)}function hp(r){return r.translate===0&&r.scale===1}function Cm(r){return hp(r.x)&&hp(r.y)}function pp(r,o){return r.min===o.min&&r.max===o.max}function OC(r,o){return pp(r.x,o.x)&&pp(r.y,o.y)}function gp(r,o){return Math.round(r.min)===Math.round(o.min)&&Math.round(r.max)===Math.round(o.max)}function Em(r,o){return gp(r.x,o.x)&&gp(r.y,o.y)}function mp(r){return fr(r.x)/fr(r.y)}function xp(r,o){return r.translate===o.translate&&r.scale===o.scale&&r.originPoint===o.originPoint}class kC{constructor(){this.members=[]}add(o){ud(this.members,o),o.scheduleRender()}remove(o){if(cd(this.members,o),o===this.prevLead&&(this.prevLead=void 0),o===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(o){const a=this.members.findIndex(p=>o===p);if(a===0)return!1;let d;for(let p=a;p>=0;p--){const x=this.members[p];if(x.isPresent!==!1){d=x;break}}return d?(this.promote(d),!0):!1}promote(o,a){const d=this.lead;if(o!==d&&(this.prevLead=d,this.lead=o,o.show(),d)){d.instance&&d.scheduleRender(),o.scheduleRender(),o.resumeFrom=d,a&&(o.resumeFrom.preserveOpacity=!0),d.snapshot&&(o.snapshot=d.snapshot,o.snapshot.latestValues=d.animationValues||d.latestValues),o.root&&o.root.isUpdating&&(o.isLayoutDirty=!0);const{crossfade:p}=o.options;p===!1&&d.hide()}}exitAnimationComplete(){this.members.forEach(o=>{const{options:a,resumingFrom:d}=o;a.onExitComplete&&a.onExitComplete(),d&&d.options.onExitComplete&&d.options.onExitComplete()})}scheduleRender(){this.members.forEach(o=>{o.instance&&o.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function MC(r,o,a){let d="";const p=r.x.translate/o.x,x=r.y.translate/o.y,y=(a==null?void 0:a.z)||0;if((p||x||y)&&(d=`translate3d(${p}px, ${x}px, ${y}px) `),(o.x!==1||o.y!==1)&&(d+=`scale(${1/o.x}, ${1/o.y}) `),a){const{transformPerspective:E,rotate:S,rotateX:I,rotateY:R,skewX:k,skewY:L}=a;E&&(d=`perspective(${E}px) ${d}`),S&&(d+=`rotate(${S}deg) `),I&&(d+=`rotateX(${I}deg) `),R&&(d+=`rotateY(${R}deg) `),k&&(d+=`skewX(${k}deg) `),L&&(d+=`skewY(${L}deg) `)}const A=r.x.scale*o.x,w=r.y.scale*o.y;return(A!==1||w!==1)&&(d+=`scale(${A}, ${w})`),d||"none"}const Ef=["","X","Y","Z"],DC={visibility:"hidden"},yp=1e3;let LC=0;function Af(r,o,a,d){const{latestValues:p}=o;p[r]&&(a[r]=p[r],o.setStaticValue(r,0),d&&(d[r]=0))}function Am(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:o}=r.options;if(!o)return;const a=_g(o);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:p,layoutId:x}=r.options;window.MotionCancelOptimisedAnimation(a,"transform",Zt,!(p||x))}const{parent:d}=r;d&&!d.hasCheckedOptimisedAppear&&Am(d)}function Sm({attachResizeListener:r,defaultParent:o,measureScroll:a,checkIsScrollRoot:d,resetTransform:p}){return class{constructor(y={},A=o==null?void 0:o()){this.id=LC++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(jC),this.nodes.forEach(HC),this.nodes.forEach(GC),this.nodes.forEach(VC)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=y,this.root=A?A.root||A:this,this.path=A?[...A.path,A]:[],this.parent=A,this.depth=A?A.depth+1:0;for(let w=0;w<this.path.length;w++)this.path[w].shouldResetTransform=!0;this.root===this&&(this.nodes=new AC)}addEventListener(y,A){return this.eventHandlers.has(y)||this.eventHandlers.set(y,new dd),this.eventHandlers.get(y).add(A)}notifyListeners(y,...A){const w=this.eventHandlers.get(y);w&&w.notify(...A)}hasListeners(y){return this.eventHandlers.has(y)}mount(y,A=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=CC(y),this.instance=y;const{layoutId:w,layout:E,visualElement:S}=this.options;if(S&&!S.current&&S.mount(y),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),A&&(E||w)&&(this.isLayoutDirty=!0),r){let I;const R=()=>this.root.updateBlockedByResize=!1;r(y,()=>{this.root.updateBlockedByResize=!0,I&&I(),I=SC(R,250),du.hasAnimatedSinceResize&&(du.hasAnimatedSinceResize=!1,this.nodes.forEach(vp))})}w&&this.root.registerSharedNode(w,this),this.options.animate!==!1&&S&&(w||E)&&this.addEventListener("didUpdate",({delta:I,hasLayoutChanged:R,hasRelativeLayoutChanged:k,layout:L})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const B=this.options.transition||S.getDefaultTransition()||$C,{onLayoutAnimationStart:j,onLayoutAnimationComplete:V}=S.getProps(),H=!this.targetLayout||!Em(this.targetLayout,L),U=!R&&k;if(this.options.layoutRoot||this.resumeFrom||U||R&&(H||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(I,U);const ne={...gd(B,"layout"),onPlay:j,onComplete:V};(S.shouldReduceMotion||this.options.layoutRoot)&&(ne.delay=0,ne.type=!1),this.startAnimation(ne)}else R||vp(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=L})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const y=this.getStack();y&&y.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,hs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(XC),this.animationId++)}getTransformTemplate(){const{visualElement:y}=this.options;return y&&y.getProps().transformTemplate}willUpdate(y=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Am(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let S=0;S<this.path.length;S++){const I=this.path[S];I.shouldResetTransform=!0,I.updateScroll("snapshot"),I.options.layoutRoot&&I.willUpdate(!1)}const{layoutId:A,layout:w}=this.options;if(A===void 0&&!w)return;const E=this.getTransformTemplate();this.prevTransformTemplateValue=E?E(this.latestValues,""):void 0,this.updateSnapshot(),y&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(wp);return}this.isUpdating||this.nodes.forEach(UC),this.isUpdating=!1,this.nodes.forEach(WC),this.nodes.forEach(BC),this.nodes.forEach(FC),this.clearAllSnapshots();const A=di.now();Hn.delta=Fi(0,1e3/60,A-Hn.timestamp),Hn.timestamp=A,Hn.isProcessing=!0,pf.update.process(Hn),pf.preRender.process(Hn),pf.render.process(Hn),Hn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,xd.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(zC),this.sharedNodes.forEach(YC)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Zt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Zt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!fr(this.snapshot.measuredBox.x)&&!fr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let w=0;w<this.path.length;w++)this.path[w].updateScroll();const y=this.layout;this.layout=this.measure(!1),this.layoutCorrected=An(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:A}=this.options;A&&A.notify("LayoutMeasure",this.layout.layoutBox,y?y.layoutBox:void 0)}updateScroll(y="measure"){let A=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===y&&(A=!1),A){const w=d(this.instance);this.scroll={animationId:this.root.animationId,phase:y,isRoot:w,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:w}}}resetTransform(){if(!p)return;const y=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,A=this.projectionDelta&&!Cm(this.projectionDelta),w=this.getTransformTemplate(),E=w?w(this.latestValues,""):void 0,S=E!==this.prevTransformTemplateValue;y&&(A||Ws(this.latestValues)||S)&&(p(this.instance,E),this.shouldResetTransform=!1,this.scheduleRender())}measure(y=!0){const A=this.measurePageBox();let w=this.removeElementScroll(A);return y&&(w=this.removeTransform(w)),qC(w),{animationId:this.root.animationId,measuredBox:A,layoutBox:w,latestValues:{},source:this.id}}measurePageBox(){var E;const{visualElement:y}=this.options;if(!y)return An();const A=y.measureViewportBox();if(!(((E=this.scroll)==null?void 0:E.wasRoot)||this.path.some(QC))){const{scroll:S}=this.root;S&&(Io(A.x,S.offset.x),Io(A.y,S.offset.y))}return A}removeElementScroll(y){var w;const A=An();if(Fr(A,y),(w=this.scroll)!=null&&w.wasRoot)return A;for(let E=0;E<this.path.length;E++){const S=this.path[E],{scroll:I,options:R}=S;S!==this.root&&I&&R.layoutScroll&&(I.wasRoot&&Fr(A,y),Io(A.x,I.offset.x),Io(A.y,I.offset.y))}return A}applyTransform(y,A=!1){const w=An();Fr(w,y);for(let E=0;E<this.path.length;E++){const S=this.path[E];!A&&S.options.layoutScroll&&S.scroll&&S!==S.root&&No(w,{x:-S.scroll.offset.x,y:-S.scroll.offset.y}),Ws(S.latestValues)&&No(w,S.latestValues)}return Ws(this.latestValues)&&No(w,this.latestValues),w}removeTransform(y){const A=An();Fr(A,y);for(let w=0;w<this.path.length;w++){const E=this.path[w];if(!E.instance||!Ws(E.latestValues))continue;Wf(E.latestValues)&&E.updateSnapshot();const S=An(),I=E.measurePageBox();Fr(S,I),dp(A,E.latestValues,E.snapshot?E.snapshot.layoutBox:void 0,S)}return Ws(this.latestValues)&&dp(A,this.latestValues),A}setTargetDelta(y){this.targetDelta=y,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(y){this.options={...this.options,...y,crossfade:y.crossfade!==void 0?y.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Hn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(y=!1){var R;const A=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=A.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=A.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=A.isSharedProjectionDirty);const w=!!this.resumingFrom||this!==A;if(!(y||w&&this.isSharedProjectionDirty||this.isProjectionDirty||(R=this.parent)!=null&&R.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:S,layoutId:I}=this.options;if(!(!this.layout||!(S||I))){if(this.resolvedRelativeTargetAt=Hn.timestamp,!this.targetDelta&&!this.relativeTarget){const k=this.getClosestProjectingParent();k&&k.layout&&this.animationProgress!==1?(this.relativeParent=k,this.forceRelativeParentToResolveTarget(),this.relativeTarget=An(),this.relativeTargetOrigin=An(),_a(this.relativeTargetOrigin,this.layout.layoutBox,k.layout.layoutBox),Fr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=An(),this.targetWithTransforms=An()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),eC(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Fr(this.target,this.layout.layoutBox),hm(this.target,this.targetDelta)):Fr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const k=this.getClosestProjectingParent();k&&!!k.resumingFrom==!!this.resumingFrom&&!k.options.layoutScroll&&k.target&&this.animationProgress!==1?(this.relativeParent=k,this.forceRelativeParentToResolveTarget(),this.relativeTarget=An(),this.relativeTargetOrigin=An(),_a(this.relativeTargetOrigin,this.target,k.target),Fr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Wf(this.parent.latestValues)||dm(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var L;const y=this.getLead(),A=!!this.resumingFrom||this!==y;let w=!0;if((this.isProjectionDirty||(L=this.parent)!=null&&L.isProjectionDirty)&&(w=!1),A&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(w=!1),this.resolvedRelativeTargetAt===Hn.timestamp&&(w=!1),w)return;const{layout:E,layoutId:S}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(E||S))return;Fr(this.layoutCorrected,this.layout.layoutBox);const I=this.treeScale.x,R=this.treeScale.y;tC(this.layoutCorrected,this.treeScale,this.path,A),y.layout&&!y.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(y.target=y.layout.layoutBox,y.targetWithTransforms=An());const{target:k}=y;if(!k){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(up(this.prevProjectionDelta.x,this.projectionDelta.x),up(this.prevProjectionDelta.y,this.projectionDelta.y)),Ra(this.projectionDelta,this.layoutCorrected,k,this.latestValues),(this.treeScale.x!==I||this.treeScale.y!==R||!xp(this.projectionDelta.x,this.prevProjectionDelta.x)||!xp(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",k))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(y=!0){var A;if((A=this.options.visualElement)==null||A.scheduleRender(),y){const w=this.getStack();w&&w.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=To(),this.projectionDelta=To(),this.projectionDeltaWithTransform=To()}setAnimationOrigin(y,A=!1){const w=this.snapshot,E=w?w.latestValues:{},S={...this.latestValues},I=To();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!A;const R=An(),k=w?w.source:void 0,L=this.layout?this.layout.source:void 0,B=k!==L,j=this.getStack(),V=!j||j.members.length<=1,H=!!(B&&!V&&this.options.crossfade===!0&&!this.path.some(ZC));this.animationProgress=0;let U;this.mixTargetDelta=ne=>{const se=ne/1e3;Cp(I.x,y.x,se),Cp(I.y,y.y,se),this.setTargetDelta(I),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(_a(R,this.layout.layoutBox,this.relativeParent.layout.layoutBox),KC(this.relativeTarget,this.relativeTargetOrigin,R,se),U&&OC(this.relativeTarget,U)&&(this.isProjectionDirty=!1),U||(U=An()),Fr(U,this.relativeTarget)),B&&(this.animationValues=S,TC(S,E,this.latestValues,se,H,V)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=se},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(y){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(hs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Zt.update(()=>{du.hasAnimatedSinceResize=!0,this.currentAnimation=vC(0,yp,{...y,onUpdate:A=>{this.mixTargetDelta(A),y.onUpdate&&y.onUpdate(A)},onStop:()=>{},onComplete:()=>{y.onComplete&&y.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const y=this.getStack();y&&y.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(yp),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const y=this.getLead();let{targetWithTransforms:A,target:w,layout:E,latestValues:S}=y;if(!(!A||!w||!E)){if(this!==y&&this.layout&&E&&bm(this.options.animationType,this.layout.layoutBox,E.layoutBox)){w=this.target||An();const I=fr(this.layout.layoutBox.x);w.x.min=y.target.x.min,w.x.max=w.x.min+I;const R=fr(this.layout.layoutBox.y);w.y.min=y.target.y.min,w.y.max=w.y.min+R}Fr(A,w),No(A,S),Ra(this.projectionDeltaWithTransform,this.layoutCorrected,A,S)}}registerSharedNode(y,A){this.sharedNodes.has(y)||this.sharedNodes.set(y,new kC),this.sharedNodes.get(y).add(A);const E=A.options.initialPromotionConfig;A.promote({transition:E?E.transition:void 0,preserveFollowOpacity:E&&E.shouldPreserveFollowOpacity?E.shouldPreserveFollowOpacity(A):void 0})}isLead(){const y=this.getStack();return y?y.lead===this:!0}getLead(){var A;const{layoutId:y}=this.options;return y?((A=this.getStack())==null?void 0:A.lead)||this:this}getPrevLead(){var A;const{layoutId:y}=this.options;return y?(A=this.getStack())==null?void 0:A.prevLead:void 0}getStack(){const{layoutId:y}=this.options;if(y)return this.root.sharedNodes.get(y)}promote({needsReset:y,transition:A,preserveFollowOpacity:w}={}){const E=this.getStack();E&&E.promote(this,w),y&&(this.projectionDelta=void 0,this.needsReset=!0),A&&this.setOptions({transition:A})}relegate(){const y=this.getStack();return y?y.relegate(this):!1}resetSkewAndRotation(){const{visualElement:y}=this.options;if(!y)return;let A=!1;const{latestValues:w}=y;if((w.z||w.rotate||w.rotateX||w.rotateY||w.rotateZ||w.skewX||w.skewY)&&(A=!0),!A)return;const E={};w.z&&Af("z",y,E,this.animationValues);for(let S=0;S<Ef.length;S++)Af(`rotate${Ef[S]}`,y,E,this.animationValues),Af(`skew${Ef[S]}`,y,E,this.animationValues);y.render();for(const S in E)y.setStaticValue(S,E[S]),this.animationValues&&(this.animationValues[S]=E[S]);y.scheduleRender()}getProjectionStyles(y){if(!this.instance||this.isSVG)return;if(!this.isVisible)return DC;const A={visibility:""},w=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,A.opacity="",A.pointerEvents=fu(y==null?void 0:y.pointerEvents)||"",A.transform=w?w(this.latestValues,""):"none",A;const E=this.getLead();if(!this.projectionDelta||!this.layout||!E.target){const k={};return this.options.layoutId&&(k.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,k.pointerEvents=fu(y==null?void 0:y.pointerEvents)||""),this.hasProjected&&!Ws(this.latestValues)&&(k.transform=w?w({},""):"none",this.hasProjected=!1),k}const S=E.animationValues||E.latestValues;this.applyTransformsToTarget(),A.transform=MC(this.projectionDeltaWithTransform,this.treeScale,S),w&&(A.transform=w(S,A.transform));const{x:I,y:R}=this.projectionDelta;A.transformOrigin=`${I.origin*100}% ${R.origin*100}% 0`,E.animationValues?A.opacity=E===this?S.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:S.opacityExit:A.opacity=E===this?S.opacity!==void 0?S.opacity:"":S.opacityExit!==void 0?S.opacityExit:0;for(const k in Ba){if(S[k]===void 0)continue;const{correct:L,applyTo:B,isCSSVariable:j}=Ba[k],V=A.transform==="none"?S[k]:L(S[k],E);if(B){const H=B.length;for(let U=0;U<H;U++)A[B[U]]=V}else j?this.options.visualElement.renderState.vars[k]=V:A[k]=V}return this.options.layoutId&&(A.pointerEvents=E===this?fu(y==null?void 0:y.pointerEvents)||"":"none"),A}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(y=>{var A;return(A=y.currentAnimation)==null?void 0:A.stop()}),this.root.nodes.forEach(wp),this.root.sharedNodes.clear()}}}function BC(r){r.updateLayout()}function FC(r){var a;const o=((a=r.resumeFrom)==null?void 0:a.snapshot)||r.snapshot;if(r.isLead()&&r.layout&&o&&r.hasListeners("didUpdate")){const{layoutBox:d,measuredBox:p}=r.layout,{animationType:x}=r.options,y=o.source!==r.layout.source;x==="size"?jr(I=>{const R=y?o.measuredBox[I]:o.layoutBox[I],k=fr(R);R.min=d[I].min,R.max=R.min+k}):bm(x,o.layoutBox,d)&&jr(I=>{const R=y?o.measuredBox[I]:o.layoutBox[I],k=fr(d[I]);R.max=R.min+k,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[I].max=r.relativeTarget[I].min+k)});const A=To();Ra(A,d,o.layoutBox);const w=To();y?Ra(w,r.applyTransform(p,!0),o.measuredBox):Ra(w,d,o.layoutBox);const E=!Cm(A);let S=!1;if(!r.resumeFrom){const I=r.getClosestProjectingParent();if(I&&!I.resumeFrom){const{snapshot:R,layout:k}=I;if(R&&k){const L=An();_a(L,o.layoutBox,R.layoutBox);const B=An();_a(B,d,k.layoutBox),Em(L,B)||(S=!0),I.options.layoutRoot&&(r.relativeTarget=B,r.relativeTargetOrigin=L,r.relativeParent=I)}}}r.notifyListeners("didUpdate",{layout:d,snapshot:o,delta:w,layoutDelta:A,hasLayoutChanged:E,hasRelativeLayoutChanged:S})}else if(r.isLead()){const{onExitComplete:d}=r.options;d&&d()}r.options.transition=void 0}function jC(r){r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function VC(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function zC(r){r.clearSnapshot()}function wp(r){r.clearMeasurements()}function UC(r){r.isLayoutDirty=!1}function WC(r){const{visualElement:o}=r.options;o&&o.getProps().onBeforeLayoutMeasure&&o.notify("BeforeLayoutMeasure"),r.resetTransform()}function vp(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function HC(r){r.resolveTargetDelta()}function GC(r){r.calcProjection()}function XC(r){r.resetSkewAndRotation()}function YC(r){r.removeLeadSnapshot()}function Cp(r,o,a){r.translate=ln(o.translate,0,a),r.scale=ln(o.scale,1,a),r.origin=o.origin,r.originPoint=o.originPoint}function Ep(r,o,a,d){r.min=ln(o.min,a.min,d),r.max=ln(o.max,a.max,d)}function KC(r,o,a,d){Ep(r.x,o.x,a.x,d),Ep(r.y,o.y,a.y,d)}function ZC(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const $C={duration:.45,ease:[.4,0,.1,1]},Ap=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),Sp=Ap("applewebkit/")&&!Ap("chrome/")?Math.round:Vr;function bp(r){r.min=Sp(r.min),r.max=Sp(r.max)}function qC(r){bp(r.x),bp(r.y)}function bm(r,o,a){return r==="position"||r==="preserve-aspect"&&!Jv(mp(o),mp(a),.2)}function QC(r){var o;return r!==r.root&&((o=r.scroll)==null?void 0:o.wasRoot)}const JC=Sm({attachResizeListener:(r,o)=>za(r,"resize",o),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Sf={current:void 0},Tm=Sm({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!Sf.current){const r=new JC({});r.mount(window),r.setOptions({layoutScroll:!0}),Sf.current=r}return Sf.current},resetTransform:(r,o)=>{r.style.transform=o!==void 0?o:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),eE={pan:{Feature:mC},drag:{Feature:gC,ProjectionNode:Tm,MeasureLayout:ym}};function Tp(r,o,a){const{props:d}=r;r.animationState&&d.whileHover&&r.animationState.setActive("whileHover",a==="Start");const p="onHover"+a,x=d[p];x&&Zt.postRender(()=>x(o,Ka(o)))}class tE extends gs{mount(){const{current:o}=this.node;o&&(this.unmount=cw(o,(a,d)=>(Tp(this.node,d,"Start"),p=>Tp(this.node,p,"End"))))}unmount(){}}class nE extends gs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let o=!1;try{o=this.node.current.matches(":focus-visible")}catch{o=!0}!o||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ya(za(this.node.current,"focus",()=>this.onFocus()),za(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Ip(r,o,a){const{props:d}=r;if(r.current instanceof HTMLButtonElement&&r.current.disabled)return;r.animationState&&d.whileTap&&r.animationState.setActive("whileTap",a==="Start");const p="onTap"+(a==="End"?"":a),x=d[p];x&&Zt.postRender(()=>x(o,Ka(o)))}class rE extends gs{mount(){const{current:o}=this.node;o&&(this.unmount=pw(o,(a,d)=>(Ip(this.node,d,"Start"),(p,{success:x})=>Ip(this.node,p,x?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Xf=new WeakMap,bf=new WeakMap,iE=r=>{const o=Xf.get(r.target);o&&o(r)},sE=r=>{r.forEach(iE)};function oE({root:r,...o}){const a=r||document;bf.has(a)||bf.set(a,{});const d=bf.get(a),p=JSON.stringify(o);return d[p]||(d[p]=new IntersectionObserver(sE,{root:r,...o})),d[p]}function aE(r,o,a){const d=oE(o);return Xf.set(r,a),d.observe(r),()=>{Xf.delete(r),d.unobserve(r)}}const lE={some:0,all:1};class uE extends gs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:o={}}=this.node.getProps(),{root:a,margin:d,amount:p="some",once:x}=o,y={root:a?a.current:void 0,rootMargin:d,threshold:typeof p=="number"?p:lE[p]},A=w=>{const{isIntersecting:E}=w;if(this.isInView===E||(this.isInView=E,x&&!E&&this.hasEnteredView))return;E&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",E);const{onViewportEnter:S,onViewportLeave:I}=this.node.getProps(),R=E?S:I;R&&R(w)};return aE(this.node.current,y,A)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:o,prevProps:a}=this.node;["amount","margin","root"].some(cE(o,a))&&this.startObserver()}unmount(){}}function cE({viewport:r={}},{viewport:o={}}={}){return a=>r[a]!==o[a]}const fE={inView:{Feature:uE},tap:{Feature:rE},focus:{Feature:nE},hover:{Feature:tE}},dE={layout:{ProjectionNode:Tm,MeasureLayout:ym}},Yf={current:null},Im={current:!1};function hE(){if(Im.current=!0,!!ad)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),o=()=>Yf.current=r.matches;r.addListener(o),o()}else Yf.current=!1}const pE=[...Qg,rr,ps],gE=r=>pE.find(qg(r)),mE=new WeakMap;function xE(r,o,a){for(const d in o){const p=o[d],x=a[d];if(ir(p))r.addValue(d,p);else if(ir(x))r.addValue(d,Da(p,{owner:r}));else if(x!==p)if(r.hasValue(d)){const y=r.getValue(d);y.liveStyle===!0?y.jump(p):y.hasAnimated||y.set(p)}else{const y=r.getStaticValue(d);r.addValue(d,Da(y!==void 0?y:p,{owner:r}))}}for(const d in a)o[d]===void 0&&r.removeValue(d);return o}const Np=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class yE{scrapeMotionValuesFromProps(o,a,d){return{}}constructor({parent:o,props:a,presenceContext:d,reducedMotionConfig:p,blockInitialAnimation:x,visualState:y},A={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ld,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const k=di.now();this.renderScheduledAt<k&&(this.renderScheduledAt=k,Zt.render(this.render,!1,!0))};const{latestValues:w,renderState:E,onUpdate:S}=y;this.onUpdate=S,this.latestValues=w,this.baseTarget={...w},this.initialValues=a.initial?{...w}:{},this.renderState=E,this.parent=o,this.props=a,this.presenceContext=d,this.depth=o?o.depth+1:0,this.reducedMotionConfig=p,this.options=A,this.blockInitialAnimation=!!x,this.isControllingVariants=Ou(a),this.isVariantNode=pg(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(o&&o.current);const{willChange:I,...R}=this.scrapeMotionValuesFromProps(a,{},this);for(const k in R){const L=R[k];w[k]!==void 0&&ir(L)&&L.set(w[k],!1)}}mount(o){this.current=o,mE.set(o,this),this.projection&&!this.projection.instance&&this.projection.mount(o),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((a,d)=>this.bindToMotionValue(d,a)),Im.current||hE(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Yf.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),hs(this.notifyUpdate),hs(this.render),this.valueSubscriptions.forEach(o=>o()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const o in this.events)this.events[o].clear();for(const o in this.features){const a=this.features[o];a&&(a.unmount(),a.isMounted=!1)}this.current=null}bindToMotionValue(o,a){this.valueSubscriptions.has(o)&&this.valueSubscriptions.get(o)();const d=Zs.has(o);d&&this.onBindTransform&&this.onBindTransform();const p=a.on("change",A=>{this.latestValues[o]=A,this.props.onUpdate&&Zt.preRender(this.notifyUpdate),d&&this.projection&&(this.projection.isTransformDirty=!0)}),x=a.on("renderRequest",this.scheduleRender);let y;window.MotionCheckAppearSync&&(y=window.MotionCheckAppearSync(this,o,a)),this.valueSubscriptions.set(o,()=>{p(),x(),y&&y(),a.owner&&a.stop()})}sortNodePosition(o){return!this.current||!this.sortInstanceNodePosition||this.type!==o.type?0:this.sortInstanceNodePosition(this.current,o.current)}updateFeatures(){let o="animation";for(o in Po){const a=Po[o];if(!a)continue;const{isEnabled:d,Feature:p}=a;if(!this.features[o]&&p&&d(this.props)&&(this.features[o]=new p(this)),this.features[o]){const x=this.features[o];x.isMounted?x.update():(x.mount(),x.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):An()}getStaticValue(o){return this.latestValues[o]}setStaticValue(o,a){this.latestValues[o]=a}update(o,a){(o.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=o,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let d=0;d<Np.length;d++){const p=Np[d];this.propEventSubscriptions[p]&&(this.propEventSubscriptions[p](),delete this.propEventSubscriptions[p]);const x="on"+p,y=o[x];y&&(this.propEventSubscriptions[p]=this.on(p,y))}this.prevMotionValues=xE(this,this.scrapeMotionValuesFromProps(o,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(o){return this.props.variants?this.props.variants[o]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(o){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(o),()=>a.variantChildren.delete(o)}addValue(o,a){const d=this.values.get(o);a!==d&&(d&&this.removeValue(o),this.bindToMotionValue(o,a),this.values.set(o,a),this.latestValues[o]=a.get())}removeValue(o){this.values.delete(o);const a=this.valueSubscriptions.get(o);a&&(a(),this.valueSubscriptions.delete(o)),delete this.latestValues[o],this.removeValueFromRenderState(o,this.renderState)}hasValue(o){return this.values.has(o)}getValue(o,a){if(this.props.values&&this.props.values[o])return this.props.values[o];let d=this.values.get(o);return d===void 0&&a!==void 0&&(d=Da(a===null?void 0:a,{owner:this}),this.addValue(o,d)),d}readValue(o,a){let d=this.latestValues[o]!==void 0||!this.current?this.latestValues[o]:this.getBaseTargetFromProps(this.props,o)??this.readValueFromInstance(this.current,o,this.options);return d!=null&&(typeof d=="string"&&(Zg(d)||jg(d))?d=parseFloat(d):!gE(d)&&ps.test(a)&&(d=Xg(o,a)),this.setBaseTarget(o,ir(d)?d.get():d)),ir(d)?d.get():d}setBaseTarget(o,a){this.baseTarget[o]=a}getBaseTarget(o){var x;const{initial:a}=this.props;let d;if(typeof a=="string"||typeof a=="object"){const y=_d(this.props,a,(x=this.presenceContext)==null?void 0:x.custom);y&&(d=y[o])}if(a&&d!==void 0)return d;const p=this.getBaseTargetFromProps(this.props,o);return p!==void 0&&!ir(p)?p:this.initialValues[o]!==void 0&&d===void 0?void 0:this.baseTarget[o]}on(o,a){return this.events[o]||(this.events[o]=new dd),this.events[o].add(a)}notify(o,...a){this.events[o]&&this.events[o].notify(...a)}}class Nm extends yE{constructor(){super(...arguments),this.KeyframeResolver=Jg}sortInstanceNodePosition(o,a){return o.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(o,a){return o.style?o.style[a]:void 0}removeValueFromRenderState(o,{vars:a,style:d}){delete a[o],delete d[o]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:o}=this.props;ir(o)&&(this.childSubscription=o.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function wE(r){return window.getComputedStyle(r)}class vE extends Nm{constructor(){super(...arguments),this.type="html",this.renderInstance=bg}readValueFromInstance(o,a){if(Zs.has(a))return O3(o,a);{const d=wE(o),p=(Ed(a)?d.getPropertyValue(a):d[a])||0;return typeof p=="string"?p.trim():p}}measureInstanceViewportBox(o,{transformPagePoint:a}){return pm(o,a)}build(o,a,d){bd(o,a,d.transformTemplate)}scrapeMotionValuesFromProps(o,a,d){return Pd(o,a,d)}}class CE extends Nm{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=An,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&Sg(this.current,this.renderState)}}getBaseTargetFromProps(o,a){return o[a]}readValueFromInstance(o,a){if(Zs.has(a)){const d=Gg(a);return d&&d.default||0}return a=Tg.has(a)?a:Cd(a),o.getAttribute(a)}scrapeMotionValuesFromProps(o,a,d){return Ng(o,a,d)}onBindTransform(){this.current&&!this.renderState.dimensions&&Zt.postRender(this.updateDimensions)}build(o,a,d){Nd(o,a,this.isSVGTag,d.transformTemplate)}renderInstance(o,a,d,p){Ig(o,a,d,p)}mount(o){this.isSVGTag=Rd(o.tagName),super.mount(o)}}const EE=(r,o)=>Id(r)?new CE(o):new vE(o,{allowProjection:r!==O.Fragment}),AE=s3({...Gv,...fE,...eE,...dE},EE),Di=Cw(AE),SE=()=>{const{login:r,signup:o,user:a,logout:d,checkAuth:p}=O.useContext(Nr),[x,y]=O.useState(""),[A,w]=O.useState(""),[E,S]=O.useState(""),[I,R]=O.useState(null),[k,L]=O.useState(null),[B,j]=O.useState(""),[V,H]=O.useState(0),[U,ne]=O.useState({x:0,y:0}),[se,re]=O.useState(1),[q,ue]=O.useState(null),[J,Ie]=O.useState(!1),[ke,be]=O.useState(!1),[Re,De]=O.useState({}),[Z,Te]=O.useState({}),[fe,ce]=O.useState(!1),[ge,pe]=O.useState(!1),[$,de]=O.useState(null),Ge=zr(),We=xi(),ut=new URLSearchParams(We.search),Ee=ut.get("redirect"),at=ut.get("code"),He=Ee==="lobby",rt=()=>{const Fe="abcdefghijklmnopqrstuvwxyz0123456789";let ct="";for(let it=0;it<10;it++)ct+=Fe.charAt(Math.floor(Math.random()*Fe.length));return ct};O.useEffect(()=>{if(He&&!x&&!A){const Fe=rt(),ct=rt();y(Fe),w(ct),Te(it=>({...it,username:!0,password:!0})),De(it=>({...it,username:"",password:""})),H(2)}},[He,x,A,E]),O.useEffect(()=>{V===2&&E&&mt(E)&&(ce(!0),Te(Fe=>({...Fe,displayName:!0})),De(Fe=>({...Fe,displayName:""})))},[V,E]);const Be=Fe=>{const ct=/^[a-z0-9]+$/;return Fe.length>=2&&ct.test(Fe)},Ne=Fe=>Fe.length>=2,mt=Fe=>Fe.length>=2,Oe=()=>{V<Lt.length-1&&(V===0&&!E&&(S(x),Te(Fe=>({...Fe,displayName:!0})),De(Fe=>({...Fe,displayName:""}))),V===1&&E&&E.length>=2?ce(!0):ce(!1),H(Fe=>Fe+1))},wt=()=>{if(V>0){const Fe=V-1;H(Fe);const ct=Lt[Fe];if(ct.validate){const it=ct.value;ct.validate(it)&&ce(!0)}else ce(!0)}},Ht=(Fe,ct,it)=>{it(Fe.target.value);const Gn=Fe.target.value;ct(Gn)?(Te(vt=>({...vt,[Lt[V].id]:!0})),De(vt=>({...vt,[Lt[V].id]:""})),ce(!0)):(Te(vt=>({...vt,[Lt[V].id]:!1})),De(vt=>({...vt,[Lt[V].id]:"Must be at least 2 characters"})),ce(!1))},$t=Fe=>{const ct=Fe.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");y(ct),Be(ct)?(Te(it=>({...it,username:!0})),De(it=>({...it,username:""})),ce(!0)):(Te(it=>({...it,username:!1})),De(it=>({...it,username:"Must be at least 2 characters"})),ce(!1))},Rt=Fe=>{Ht(Fe,Ne,w)},Tt=Fe=>{Ht(Fe,mt,S)},ht=Fe=>{const ct=Fe.target.files[0];if(ct){const it=new FileReader;it.onload=Gn=>{const vt=new Image;vt.onload=()=>{let At=vt.width,cn=vt.height;const nn=1500;At>cn&&At>nn?(cn=cn*nn/At,At=nn):cn>At&&cn>nn&&(At=At*nn/cn,cn=nn);const Xn=document.createElement("canvas");Xn.width=At,Xn.height=cn,Xn.getContext("2d").drawImage(vt,0,0,At,cn);const we=Xn.toDataURL("image/jpeg",.75);R(ct),L(we),Ie(!0),Te(zt=>({...zt,image:!0})),De(zt=>({...zt,image:""})),ce(!0)},vt.src=Gn.target.result},it.readAsDataURL(ct)}},sr=(Fe,ct)=>{ue(ct)},_e=async()=>{try{const Fe=await Lp(k,q);L(Fe),Ie(!1)}catch(Fe){console.error("Error cropping the image:",Fe),j("Failed to crop image. Please try again.")}},xn=async Fe=>{if(Fe.preventDefault(),be(!0),j(""),console.log("Signup attempt - Username:",x,"Password:",A),!x||!A||!E){j("All fields are required"),be(!1);return}if(!I||!k){j("Your profile picture is required"),be(!1);return}try{const ct="/signup",it=await fetch(window.server_url+ct,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:x,password:A})}),Gn=await it.json();if(Gn.error==="Username already taken")if(He){const nn=rt(),Xn=rt();y(nn),w(Xn);const xt=await fetch(window.server_url+ct,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:nn,password:Xn})}),we=await xt.json();if(!xt.ok||we.error==="Username already taken"){j("Unable to create account. Please try again."),be(!1);return}r(we)}else{j("Username is taken"),be(!1);return}else{if(!it.ok){j(Gn.message||"Signup failed"),be(!1);return}r(Gn)}await p();const vt=localStorage.getItem("access_token");if(!vt)throw new Error("Authentication failed");let At=null;if(I)At=k,At=At.split(",")[1];else{const xt=await(await(await fetch("/assets/fakeprofile.png")).blob()).arrayBuffer();At=btoa(new Uint8Array(xt).reduce((we,zt)=>we+String.fromCharCode(zt),""))}if(!(await fetch(`${window.server_url}/update_profile`,{method:"POST",headers:{Authorization:`Bearer ${vt}`,"Content-Type":"application/json"},body:JSON.stringify({name:E,image_data:At})})).ok)throw new Error("Failed to update profile");await p(),Ge(Ee==="lobby"?at?`/lobby?code=${at}`:"/?showLobbyModal=true":Ee==="product-selection"?"/product-selection":"/")}catch(ct){console.error("Error:",ct),j("An error occurred. Please try again.")}be(!1)},Lt=[{id:"username",label:"Username",value:x,onChange:$t,type:"text",placeholder:"Enter a username",validate:Be},{id:"password",label:"Password",value:A,onChange:Rt,type:"text",placeholder:"Create a password",validate:Ne},{id:"displayName",label:at==="demolobby"?"Display Name (Type Any Name)":"Display Name (what people will see)",value:E,onChange:Tt,type:"text",placeholder:"Enter your preferred name",validate:mt},{id:"image",label:at==="demolobby"?"Profile Image (Upload Any Image)":"Upload a Selfie (so people can find you)",type:"file",onChange:ht,accept:"image/*"}];return T.jsxs("div",{className:"signup-container",children:[T.jsx("button",{onClick:()=>Ge("/"),className:"homescreen-button",children:"Home"}),T.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),T.jsx("h3",{className:"signup-header",children:at==="demolobby"?"Join the demo":"Sign Up to Join"}),at&&at!=="demolobby"&&T.jsxs("h2",{className:"signup-header",children:[at," lobby"]}),at==="demolobby"&&T.jsx("h2",{className:"signup-header",style:{fontSize:"0.9rem"},children:"Try Reuneo for Free!"}),T.jsxs("p",{className:"login-link-text",children:["Already have an account? ",T.jsx("a",{href:"#",onClick:Fe=>{Fe.preventDefault(),Ge("/login")},className:"login-link",children:"Login here"})]}),T.jsxs("div",{className:"step-form-container",children:[T.jsx("div",{className:"step-progress",children:(He?Lt.slice(2):Lt).map((Fe,ct)=>T.jsx("div",{className:`progress-dot ${He?(ct===V-2?"active":"")+(ct<V-2?" completed":""):(ct===V?"active":"")+(ct<V?" completed":"")}`},ct))}),T.jsxs("form",{onSubmit:xn,children:[T.jsx(f1,{mode:"wait",initial:!1,children:T.jsxs(Di.div,{initial:{opacity:0,x:8},animate:{opacity:1,x:0},exit:{opacity:0,x:-8},transition:{type:"spring",stiffness:500,damping:25,mass:.3},className:"step active",style:{willChange:"transform, opacity"},children:[T.jsx("div",{className:"step-content",children:T.jsxs(Di.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:[T.jsx("label",{className:"step-label",children:Lt[V].label}),T.jsx(Di.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},transition:{duration:.15,ease:"easeOut"},children:Lt[V].type==="file"?T.jsx("div",{className:"image-upload-container",children:J?T.jsxs("div",{className:"cropper-container",children:[T.jsx("div",{className:"cropper-wrapper",children:T.jsx(Dp,{image:k,crop:U,zoom:se,aspect:1,onCropComplete:sr,onCropChange:ne,onZoomChange:re})}),T.jsxs("div",{className:"cropper-controls",children:[T.jsx("button",{type:"button",onClick:()=>{Ie(!1),L(null),R(null)},className:"cancel-crop-button",children:"Cancel"}),T.jsx("button",{type:"button",onClick:_e,className:"save-crop-button",children:"Good"})]})]}):T.jsxs(T.Fragment,{children:[T.jsx("input",{type:"file",onChange:Lt[V].onChange,accept:Lt[V].accept,className:"step-input"}),k&&T.jsx("div",{children:T.jsx("img",{src:k,alt:"Profile preview",className:"profile-preview-image"})})]})}):T.jsx("input",{type:Lt[V].type,value:Lt[V].value,onChange:Lt[V].onChange,placeholder:Lt[V].placeholder,className:"step-input",autoFocus:!0})}),T.jsxs(f1,{mode:"wait",children:[Re[Lt[V].id]&&T.jsx(Di.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"step-error",children:Re[Lt[V].id]}),Z[Lt[V].id]&&T.jsx(Di.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},className:"step-success",children:" Valid"})]})]})}),!J&&T.jsxs("div",{className:"button-container",children:[V>0&&T.jsx(Di.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},type:"button",onClick:wt,className:"backz-button",children:" Back"}),fe&&V<Lt.length-1&&T.jsx(Di.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},type:"button",onClick:Oe,className:"nextz-button",children:"Next "})]})]},V)}),B&&T.jsx(Di.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"error-message",children:B}),V===Lt.length-1&&T.jsx(Di.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},type:"submit",className:"primary-button",disabled:ke,children:ke?"Loading...":"Complete Signup"})]})]})]})},bE=5e3,Rm=(r,o=null,a=null)=>{O.useEffect(()=>{const d=async()=>{try{const x=a?`${window.server_url}/display_lobby_metadata?lobby_code=${a}`:`${window.server_url}/display_lobby_metadata`,y=localStorage.getItem("access_token"),A=await fetch(x,{headers:{Authorization:`Bearer ${y}`,lobby_code:a}});if(!A.ok){console.error("Failed to fetch lobby metadata");return}const w=await A.json();r(w.player_count),o&&o(w.lobby_state)}catch(x){console.error("Error fetching lobby metadata:",x)}};d();const p=setInterval(d,bE);return()=>clearInterval(p)},[r,o,a])},TE=()=>{const[r,o]=O.useState(!1),[a,d]=O.useState(!1),[p,x]=O.useState(""),[y,A]=O.useState(""),[w,E]=O.useState(""),[S,I]=O.useState(null);Jp();const{user:R,userProfile:k,checkAuth:L,permissions:B}=O.useContext(Nr),[j,V]=O.useState(null),[H,U]=O.useState(null),[ne,se]=O.useState([]),[re,q]=O.useState(!1),ue=zr();Rm(V,U);const[J,Ie]=O.useState(!1);O.useRef(null);const ke=O.useRef(null),be=async()=>{if(R){q(!0);try{const fe=localStorage.getItem("access_token"),ce=await fetch(window.server_url+"/view_my_active_lobbies",{headers:{Authorization:`Bearer ${fe}`}});if(ce.ok){const ge=await ce.json();console.log("User's active lobbies:",ge),ge&&ge.lobbies&&Array.isArray(ge.lobbies)?se(ge.lobbies):se([])}else console.error("Failed to fetch user's active lobbies"),se([])}catch(fe){console.error("Error fetching user's active lobbies:",fe),se([])}finally{q(!1)}}};O.useEffect(()=>{R&&be()},[R]),O.useEffect(()=>{L()},[]),O.useEffect(()=>{if(new URLSearchParams(window.location.search).get("showLobbyModal")==="true"&&R){d(!0);const ge=window.location.pathname;window.history.replaceState({},"",ge)}},[R]);const Re=fe=>{(B==="admin"||B==="organizer")&&ue(`/admin_lobby_view?code=${fe}`)},De=fe=>{fe.preventDefault();const ge=new FormData(fe.target).get("name");if(!ge||ge.trim()===""){A("Please enter a lobby code");return}const pe=ge.toLowerCase().replace(/[^a-z0-9]/g,"");if(pe===""){A("Lobby code must contain only letters and numbers");return}E(pe),d(!1),console.log(pe),x(pe),ue(`/lobby?code=${pe}`),x(""),A("")},Z=()=>{Ie(!1),ke.current&&(ke.current.clear(),ke.current=null)},Te=()=>a?T.jsx("div",{className:"lobby-modal-overlay",children:T.jsxs("div",{className:"lobby-modal-container",children:[T.jsx("button",{onClick:()=>{d(!1),x(""),A(""),Z()},className:"lobby-modal-close",children:""}),T.jsx("h2",{className:"lobby-modal-title",children:"Join Lobby"}),T.jsxs("form",{onSubmit:De,className:"lobby-form",children:[T.jsxs("div",{className:"lobby-input-container",children:[T.jsx("input",{type:"text",name:"name",placeholder:"Enter Lobby Code",className:"lobby-input",pattern:"[a-zA-Z0-9]+",title:"Only letters and numbers are allowed",required:!0}),y&&T.jsx("div",{className:"lobby-error-message",children:y})]}),T.jsx("button",{type:"submit",className:"lobby-submit-button",children:"Join"})]})]})}):null;return T.jsxs("div",{style:{position:"relative",height:"var(--viewport-height)",overflow:"hidden"},children:[T.jsxs("video",{className:"background-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,poster:"/assets/demo_app_home_video_cover.jpg",children:[T.jsx("source",{src:"/assets/demo_app_home_video_X2_small.mp4",type:"video/mp4"}),T.jsx("source",{src:"/assets/app_home_video_2.webm",type:"video/webm"}),T.jsx("img",{src:"/assets/demo_app_home_video_cover.jpg",alt:"Background fallback",style:{width:"100%",height:"100%",objectFit:"cover"}}),"Your browser does not support the video tag."]}),T.jsxs("div",{style:{position:"relative",zIndex:1,color:"white",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[T.jsx("div",{style:{position:"absolute",top:"0",left:"50%",transform:"translateX(-50%)"},children:T.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Logo",style:{width:"110px",height:"110px",objectFit:"contain"}})}),T.jsx("div",{style:{marginTop:"10%",display:"flex",flexDirection:"column"},children:T.jsx(Xy,{user:R,onProfileClick:()=>o(!0)})}),r&&T.jsx(m2,{onSubmit:fe=>{o(!1)},onClose:()=>o(!1),existingProfile:k}),T.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",width:"90%",maxWidth:"1200px",textAlign:"center",marginLeft:"auto",marginRight:"auto",zIndex:1,top:"50%"},children:T.jsx("h2",{className:"welcome-header",style:{color:"#ffffff",fontSize:"1rem",textTransform:"uppercase",letterSpacing:"0.1em",textShadow:"4px 4px 8px rgba(0,0,0,0.9)",margin:0},children:R&&k&&(B==="admin"||B==="organizer")?(()=>{const fe="Create a Lobby",ce=k?k.name.slice(0,15):"";return T.jsxs(T.Fragment,{children:[fe.split("").map((ge,pe)=>T.jsx("span",{style:{"--i":pe+1,marginRight:ge===" "?"0.5em":"1px"},children:ge},`main-${pe}`)),T.jsx("br",{}),ce&&ce.split("").map((ge,pe)=>T.jsx("span",{style:{"--i":pe+1,marginRight:ge===" "?"0.5em":"1px"},children:ge},`name-${pe}`))]})})():(()=>{const fe="Join the Experience",ce=k?k.name.slice(0,15):"";return T.jsxs(T.Fragment,{children:[fe.split("").map((ge,pe)=>T.jsx("span",{style:{"--i":pe+1,marginRight:ge===" "?"0.5em":"1px"},children:ge},`main-${pe}`)),T.jsx("br",{}),ce&&ce.split("").map((ge,pe)=>T.jsx("span",{style:{"--i":pe+1,marginRight:ge===" "?"0.5em":"1px"},children:ge},`name-${pe}`))]})})()})}),T.jsx("div",{style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",width:"94%",display:"flex",flexDirection:"row",justifyContent:"center",gap:"1.5rem"},children:T.jsx("div",{className:"event-item",style:{width:"auto",maxWidth:"none",margin:"0",padding:"10px 20px",borderRadius:"16px",marginBottom:"20px",cursor:"pointer",opacity:1,display:"flex",flexDirection:"row",alignItems:"center",gap:"1.5rem",":hover":{transform:"translateY(-5px)"}},children:T.jsxs("div",{style:{display:"flex",gap:"1.5rem",flexDirection:"row",alignItems:"center"},children:[T.jsx("button",{className:`primary-button ${B!=="admin"&&B!=="organizer"?"join-lobby-button":""}`,onClick:()=>R?d(!0):ue("/signup?redirect=lobby"),disabled:j===null||H==="terminate",style:{opacity:1,cursor:j===null||H==="terminate"?"not-allowed":"pointer",padding:"16px 20px",backgroundColor:B!=="admin"&&B!=="organizer"?"transparent":"#144dff",color:"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0",display:"block",position:"relative",zIndex:1,textAlign:"center",outline:B!=="admin"&&B!=="organizer"?"none":"1px solid rgba(58, 53, 53, 0.7)",":hover":{backgroundColor:B!=="admin"&&B!=="organizer"?"transparent":"#535bf2",transform:"scale(1.02)"}},children:T.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Join Lobby"})}),B!=="admin"&&B!=="organizer"&&T.jsx("button",{className:"primary-button join-lobby-button",onClick:()=>window.location.href="https://reuneo.app/",style:{padding:"16px 20px",backgroundColor:"transparent",color:"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0",display:"block",position:"relative",zIndex:1,textAlign:"center",outline:"none",":hover":{transform:"scale(1.02)"}},children:T.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Get Started"})}),(B==="admin"||B==="organizer")&&T.jsx("button",{className:`primary-button ${B==="admin"||B==="organizer"?"create-lobby-button":""}`,onClick:ne.length>0?void 0:()=>ue("/create_lobby"),disabled:ne.length>0,title:ne.length>0?"You already have an active lobby. Close it before creating a new one.":"Create a new lobby",style:{padding:"16px 20px",backgroundColor:ne.length>0?"rgba(128, 128, 128, 0.3)":"transparent",color:ne.length>0?"rgba(255, 255, 255, 0.5)":"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:ne.length>0?"0 2px 3px rgba(0, 0, 0, 0.2)":"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0",position:"relative",zIndex:1,textAlign:"center",cursor:ne.length>0?"not-allowed":"pointer",opacity:ne.length>0?.6:1,":hover":{transform:ne.length>0?"none":"scale(1.02)"}},children:T.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Create Lobby"})})]})})}),(B==="admin"||B==="organizer")&&ne.length>0&&T.jsx("div",{className:"events-list",style:{position:"absolute",bottom:"calc(20px + 120px + 10px)",left:"50%",transform:"translateX(-50%)",width:"44%",height:"15%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.05), rgba(83, 91, 242, 0.05))",borderRadius:"30px",padding:"1rem",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",justifyContent:"center",alignItems:"center"},children:re?T.jsx("div",{style:{textAlign:"center",color:"white"},children:T.jsx("p",{children:"Loading your lobbies..."})}):ne.length>0?T.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",perspective:"1000px"},children:ne.map((fe,ce)=>T.jsxs("div",{className:"card",style:{width:"calc(100% - 2rem)",maxWidth:"200px",minWidth:"150px",background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",boxShadow:"0 10px 30px rgba(20, 77, 255, 0.15)",border:"1px solid rgba(20, 77, 255, 0.2)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",padding:"1rem 1rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",transformStyle:"preserve-3d","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(20, 77, 255, 0.1), rgba(83, 91, 242, 0.1))",opacity:0,transition:"opacity 0.4s ease"}},onClick:()=>Re(fe),onMouseEnter:ge=>{ge.currentTarget.style.transform="translateY(-10px) rotateX(5deg)",ge.currentTarget.style.boxShadow="0 20px 40px rgba(20, 77, 255, 0.25)",ge.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.4)",ge.currentTarget.style.background="rgba(255, 255, 255, 0.98)"},onMouseLeave:ge=>{ge.currentTarget.style.transform="translateY(0) rotateX(0)",ge.currentTarget.style.boxShadow="0 10px 30px rgba(20, 77, 255, 0.15)",ge.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.2)",ge.currentTarget.style.background="rgba(255, 255, 255, 0.95)"},children:[T.jsx("div",{className:"glow-button",style:{width:"30px",height:"30px",borderRadius:"50%",background:"linear-gradient(135deg, #144dff, #535bf2)",marginBottom:".5rem",marginTop:"-1rem",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:".8rem",boxShadow:"0 8px 20px rgba(20, 77, 255, 0.3)",transition:"all 0.4s ease",position:"relative","&::after":{content:'""',position:"absolute",top:"-5px",left:"-5px",right:"-5px",bottom:"-5px",borderRadius:"50%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.2), rgba(83, 91, 242, 0.2))",zIndex:-1,animation:"pulse 2s infinite"}},children:fe&&fe.length>0?fe.charAt(0).toUpperCase():"?"}),T.jsxs("h3",{style:{marginTop:"0.5rem",color:"#144dff",fontWeight:"700",fontSize:".9em",fontFamily:"Helvetica",textAlign:"center",textShadow:"0 2px 4px rgba(20, 77, 255, 0.1)",letterSpacing:"0.5px"},children:["Lobby ",fe||"Unknown"]})]},ce))}):T.jsx("div",{style:{}})})]}),T.jsx(Te,{})]})};function IE(){const{pathname:r}=xi();return O.useEffect(()=>{window.scrollTo(0,0)},[r]),null}const NE=()=>{const{login:r,signup:o,user:a,logout:d,checkAuth:p}=O.useContext(Nr),[x,y]=O.useState(""),[A,w]=O.useState(""),[E,S]=O.useState(""),[I,R]=O.useState(""),[k,L]=O.useState(!0),[B,j]=O.useState({}),[V,H]=O.useState(!1),U=zr(),ne=q=>{const ue=/^[a-z0-9]+$/;return q.length>=2&&ue.test(q)},se=q=>{const ue=q.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");y(ue),ue.length>0?H(!0):H(!1),ne(ue)?j(J=>({...J,username:""})):j(J=>({...J,username:" "}))},re=async q=>{if(q.preventDefault(),R(""),!ne(x)){R("Please enter a valid username");return}try{const ue=k?"/login":"/signup",J=await fetch(window.server_url+ue,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:x,password:A}),mode:"cors"});if(J.ok){const Ie=await J.json();r(Ie),p(),U("/")}else{const Ie=await J.json();R(Ie.message||`${k?"Login":"Signup"} failed`)}}catch(ue){R("Network error occurred. Please try again."),console.error("Error:",ue)}};return T.jsxs("div",{className:"login-container",children:[T.jsx("button",{onClick:()=>U("/"),className:"homescreen-button",children:"Home"}),T.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),T.jsx("h1",{className:"login-header",children:"Login"}),T.jsxs("div",{className:"login-signup-form",children:[I&&T.jsx("div",{className:"error-message",children:I}),T.jsxs("form",{onSubmit:re,children:[T.jsxs("div",{className:"form-group",children:[T.jsx("input",{type:"text",placeholder:"Username",className:"login-input",value:x,onChange:se,required:!0}),V&&T.jsx("div",{className:"step-success",children:"lowercase letters and numbers only"})]}),T.jsx("div",{className:"form-group",children:T.jsx("input",{type:"text",placeholder:"Password",className:"login-input",value:A,onChange:q=>w(q.target.value),required:!0})}),T.jsx("button",{type:"submit",className:"login-primary-button",children:"Login"})]})]})]})},RE=()=>{const r=zr(),{logout:o}=O.useContext(Nr);return localStorage.removeItem("access_token"),O.useEffect(()=>{console.log("LogoutPage useEffect"),setTimeout(()=>{o(),r("/")},100)},[]),T.jsx("div",{children:"Logged out redirecting to homescreen"})};var _E=Object.defineProperty,Su=Object.getOwnPropertySymbols,_m=Object.prototype.hasOwnProperty,Pm=Object.prototype.propertyIsEnumerable,Rp=(r,o,a)=>o in r?_E(r,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[o]=a,Kf=(r,o)=>{for(var a in o||(o={}))_m.call(o,a)&&Rp(r,a,o[a]);if(Su)for(var a of Su(o))Pm.call(o,a)&&Rp(r,a,o[a]);return r},Zf=(r,o)=>{var a={};for(var d in r)_m.call(r,d)&&o.indexOf(d)<0&&(a[d]=r[d]);if(r!=null&&Su)for(var d of Su(r))o.indexOf(d)<0&&Pm.call(r,d)&&(a[d]=r[d]);return a};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Ks;(r=>{const o=class Et{constructor(w,E,S,I){if(this.version=w,this.errorCorrectionLevel=E,this.modules=[],this.isFunction=[],w<Et.MIN_VERSION||w>Et.MAX_VERSION)throw new RangeError("Version value out of range");if(I<-1||I>7)throw new RangeError("Mask value out of range");this.size=w*4+17;let R=[];for(let L=0;L<this.size;L++)R.push(!1);for(let L=0;L<this.size;L++)this.modules.push(R.slice()),this.isFunction.push(R.slice());this.drawFunctionPatterns();const k=this.addEccAndInterleave(S);if(this.drawCodewords(k),I==-1){let L=1e9;for(let B=0;B<8;B++){this.applyMask(B),this.drawFormatBits(B);const j=this.getPenaltyScore();j<L&&(I=B,L=j),this.applyMask(B)}}p(0<=I&&I<=7),this.mask=I,this.applyMask(I),this.drawFormatBits(I),this.isFunction=[]}static encodeText(w,E){const S=r.QrSegment.makeSegments(w);return Et.encodeSegments(S,E)}static encodeBinary(w,E){const S=r.QrSegment.makeBytes(w);return Et.encodeSegments([S],E)}static encodeSegments(w,E,S=1,I=40,R=-1,k=!0){if(!(Et.MIN_VERSION<=S&&S<=I&&I<=Et.MAX_VERSION)||R<-1||R>7)throw new RangeError("Invalid value");let L,B;for(L=S;;L++){const U=Et.getNumDataCodewords(L,E)*8,ne=y.getTotalBits(w,L);if(ne<=U){B=ne;break}if(L>=I)throw new RangeError("Data too long")}for(const U of[Et.Ecc.MEDIUM,Et.Ecc.QUARTILE,Et.Ecc.HIGH])k&&B<=Et.getNumDataCodewords(L,U)*8&&(E=U);let j=[];for(const U of w){a(U.mode.modeBits,4,j),a(U.numChars,U.mode.numCharCountBits(L),j);for(const ne of U.getData())j.push(ne)}p(j.length==B);const V=Et.getNumDataCodewords(L,E)*8;p(j.length<=V),a(0,Math.min(4,V-j.length),j),a(0,(8-j.length%8)%8,j),p(j.length%8==0);for(let U=236;j.length<V;U^=253)a(U,8,j);let H=[];for(;H.length*8<j.length;)H.push(0);return j.forEach((U,ne)=>H[ne>>>3]|=U<<7-(ne&7)),new Et(L,E,H,R)}getModule(w,E){return 0<=w&&w<this.size&&0<=E&&E<this.size&&this.modules[E][w]}getModules(){return this.modules}drawFunctionPatterns(){for(let S=0;S<this.size;S++)this.setFunctionModule(6,S,S%2==0),this.setFunctionModule(S,6,S%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const w=this.getAlignmentPatternPositions(),E=w.length;for(let S=0;S<E;S++)for(let I=0;I<E;I++)S==0&&I==0||S==0&&I==E-1||S==E-1&&I==0||this.drawAlignmentPattern(w[S],w[I]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(w){const E=this.errorCorrectionLevel.formatBits<<3|w;let S=E;for(let R=0;R<10;R++)S=S<<1^(S>>>9)*1335;const I=(E<<10|S)^21522;p(I>>>15==0);for(let R=0;R<=5;R++)this.setFunctionModule(8,R,d(I,R));this.setFunctionModule(8,7,d(I,6)),this.setFunctionModule(8,8,d(I,7)),this.setFunctionModule(7,8,d(I,8));for(let R=9;R<15;R++)this.setFunctionModule(14-R,8,d(I,R));for(let R=0;R<8;R++)this.setFunctionModule(this.size-1-R,8,d(I,R));for(let R=8;R<15;R++)this.setFunctionModule(8,this.size-15+R,d(I,R));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let w=this.version;for(let S=0;S<12;S++)w=w<<1^(w>>>11)*7973;const E=this.version<<12|w;p(E>>>18==0);for(let S=0;S<18;S++){const I=d(E,S),R=this.size-11+S%3,k=Math.floor(S/3);this.setFunctionModule(R,k,I),this.setFunctionModule(k,R,I)}}drawFinderPattern(w,E){for(let S=-4;S<=4;S++)for(let I=-4;I<=4;I++){const R=Math.max(Math.abs(I),Math.abs(S)),k=w+I,L=E+S;0<=k&&k<this.size&&0<=L&&L<this.size&&this.setFunctionModule(k,L,R!=2&&R!=4)}}drawAlignmentPattern(w,E){for(let S=-2;S<=2;S++)for(let I=-2;I<=2;I++)this.setFunctionModule(w+I,E+S,Math.max(Math.abs(I),Math.abs(S))!=1)}setFunctionModule(w,E,S){this.modules[E][w]=S,this.isFunction[E][w]=!0}addEccAndInterleave(w){const E=this.version,S=this.errorCorrectionLevel;if(w.length!=Et.getNumDataCodewords(E,S))throw new RangeError("Invalid argument");const I=Et.NUM_ERROR_CORRECTION_BLOCKS[S.ordinal][E],R=Et.ECC_CODEWORDS_PER_BLOCK[S.ordinal][E],k=Math.floor(Et.getNumRawDataModules(E)/8),L=I-k%I,B=Math.floor(k/I);let j=[];const V=Et.reedSolomonComputeDivisor(R);for(let U=0,ne=0;U<I;U++){let se=w.slice(ne,ne+B-R+(U<L?0:1));ne+=se.length;const re=Et.reedSolomonComputeRemainder(se,V);U<L&&se.push(0),j.push(se.concat(re))}let H=[];for(let U=0;U<j[0].length;U++)j.forEach((ne,se)=>{(U!=B-R||se>=L)&&H.push(ne[U])});return p(H.length==k),H}drawCodewords(w){if(w.length!=Math.floor(Et.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let E=0;for(let S=this.size-1;S>=1;S-=2){S==6&&(S=5);for(let I=0;I<this.size;I++)for(let R=0;R<2;R++){const k=S-R,B=(S+1&2)==0?this.size-1-I:I;!this.isFunction[B][k]&&E<w.length*8&&(this.modules[B][k]=d(w[E>>>3],7-(E&7)),E++)}}p(E==w.length*8)}applyMask(w){if(w<0||w>7)throw new RangeError("Mask value out of range");for(let E=0;E<this.size;E++)for(let S=0;S<this.size;S++){let I;switch(w){case 0:I=(S+E)%2==0;break;case 1:I=E%2==0;break;case 2:I=S%3==0;break;case 3:I=(S+E)%3==0;break;case 4:I=(Math.floor(S/3)+Math.floor(E/2))%2==0;break;case 5:I=S*E%2+S*E%3==0;break;case 6:I=(S*E%2+S*E%3)%2==0;break;case 7:I=((S+E)%2+S*E%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[E][S]&&I&&(this.modules[E][S]=!this.modules[E][S])}}getPenaltyScore(){let w=0;for(let R=0;R<this.size;R++){let k=!1,L=0,B=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[R][j]==k?(L++,L==5?w+=Et.PENALTY_N1:L>5&&w++):(this.finderPenaltyAddHistory(L,B),k||(w+=this.finderPenaltyCountPatterns(B)*Et.PENALTY_N3),k=this.modules[R][j],L=1);w+=this.finderPenaltyTerminateAndCount(k,L,B)*Et.PENALTY_N3}for(let R=0;R<this.size;R++){let k=!1,L=0,B=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[j][R]==k?(L++,L==5?w+=Et.PENALTY_N1:L>5&&w++):(this.finderPenaltyAddHistory(L,B),k||(w+=this.finderPenaltyCountPatterns(B)*Et.PENALTY_N3),k=this.modules[j][R],L=1);w+=this.finderPenaltyTerminateAndCount(k,L,B)*Et.PENALTY_N3}for(let R=0;R<this.size-1;R++)for(let k=0;k<this.size-1;k++){const L=this.modules[R][k];L==this.modules[R][k+1]&&L==this.modules[R+1][k]&&L==this.modules[R+1][k+1]&&(w+=Et.PENALTY_N2)}let E=0;for(const R of this.modules)E=R.reduce((k,L)=>k+(L?1:0),E);const S=this.size*this.size,I=Math.ceil(Math.abs(E*20-S*10)/S)-1;return p(0<=I&&I<=9),w+=I*Et.PENALTY_N4,p(0<=w&&w<=2568888),w}getAlignmentPatternPositions(){if(this.version==1)return[];{const w=Math.floor(this.version/7)+2,E=this.version==32?26:Math.ceil((this.version*4+4)/(w*2-2))*2;let S=[6];for(let I=this.size-7;S.length<w;I-=E)S.splice(1,0,I);return S}}static getNumRawDataModules(w){if(w<Et.MIN_VERSION||w>Et.MAX_VERSION)throw new RangeError("Version number out of range");let E=(16*w+128)*w+64;if(w>=2){const S=Math.floor(w/7)+2;E-=(25*S-10)*S-55,w>=7&&(E-=36)}return p(208<=E&&E<=29648),E}static getNumDataCodewords(w,E){return Math.floor(Et.getNumRawDataModules(w)/8)-Et.ECC_CODEWORDS_PER_BLOCK[E.ordinal][w]*Et.NUM_ERROR_CORRECTION_BLOCKS[E.ordinal][w]}static reedSolomonComputeDivisor(w){if(w<1||w>255)throw new RangeError("Degree out of range");let E=[];for(let I=0;I<w-1;I++)E.push(0);E.push(1);let S=1;for(let I=0;I<w;I++){for(let R=0;R<E.length;R++)E[R]=Et.reedSolomonMultiply(E[R],S),R+1<E.length&&(E[R]^=E[R+1]);S=Et.reedSolomonMultiply(S,2)}return E}static reedSolomonComputeRemainder(w,E){let S=E.map(I=>0);for(const I of w){const R=I^S.shift();S.push(0),E.forEach((k,L)=>S[L]^=Et.reedSolomonMultiply(k,R))}return S}static reedSolomonMultiply(w,E){if(w>>>8||E>>>8)throw new RangeError("Byte out of range");let S=0;for(let I=7;I>=0;I--)S=S<<1^(S>>>7)*285,S^=(E>>>I&1)*w;return p(S>>>8==0),S}finderPenaltyCountPatterns(w){const E=w[1];p(E<=this.size*3);const S=E>0&&w[2]==E&&w[3]==E*3&&w[4]==E&&w[5]==E;return(S&&w[0]>=E*4&&w[6]>=E?1:0)+(S&&w[6]>=E*4&&w[0]>=E?1:0)}finderPenaltyTerminateAndCount(w,E,S){return w&&(this.finderPenaltyAddHistory(E,S),E=0),E+=this.size,this.finderPenaltyAddHistory(E,S),this.finderPenaltyCountPatterns(S)}finderPenaltyAddHistory(w,E){E[0]==0&&(w+=this.size),E.pop(),E.unshift(w)}};o.MIN_VERSION=1,o.MAX_VERSION=40,o.PENALTY_N1=3,o.PENALTY_N2=3,o.PENALTY_N3=40,o.PENALTY_N4=10,o.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],o.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],r.QrCode=o;function a(A,w,E){if(w<0||w>31||A>>>w)throw new RangeError("Value out of range");for(let S=w-1;S>=0;S--)E.push(A>>>S&1)}function d(A,w){return(A>>>w&1)!=0}function p(A){if(!A)throw new Error("Assertion error")}const x=class gn{constructor(w,E,S){if(this.mode=w,this.numChars=E,this.bitData=S,E<0)throw new RangeError("Invalid argument");this.bitData=S.slice()}static makeBytes(w){let E=[];for(const S of w)a(S,8,E);return new gn(gn.Mode.BYTE,w.length,E)}static makeNumeric(w){if(!gn.isNumeric(w))throw new RangeError("String contains non-numeric characters");let E=[];for(let S=0;S<w.length;){const I=Math.min(w.length-S,3);a(parseInt(w.substring(S,S+I),10),I*3+1,E),S+=I}return new gn(gn.Mode.NUMERIC,w.length,E)}static makeAlphanumeric(w){if(!gn.isAlphanumeric(w))throw new RangeError("String contains unencodable characters in alphanumeric mode");let E=[],S;for(S=0;S+2<=w.length;S+=2){let I=gn.ALPHANUMERIC_CHARSET.indexOf(w.charAt(S))*45;I+=gn.ALPHANUMERIC_CHARSET.indexOf(w.charAt(S+1)),a(I,11,E)}return S<w.length&&a(gn.ALPHANUMERIC_CHARSET.indexOf(w.charAt(S)),6,E),new gn(gn.Mode.ALPHANUMERIC,w.length,E)}static makeSegments(w){return w==""?[]:gn.isNumeric(w)?[gn.makeNumeric(w)]:gn.isAlphanumeric(w)?[gn.makeAlphanumeric(w)]:[gn.makeBytes(gn.toUtf8ByteArray(w))]}static makeEci(w){let E=[];if(w<0)throw new RangeError("ECI assignment value out of range");if(w<128)a(w,8,E);else if(w<16384)a(2,2,E),a(w,14,E);else if(w<1e6)a(6,3,E),a(w,21,E);else throw new RangeError("ECI assignment value out of range");return new gn(gn.Mode.ECI,0,E)}static isNumeric(w){return gn.NUMERIC_REGEX.test(w)}static isAlphanumeric(w){return gn.ALPHANUMERIC_REGEX.test(w)}getData(){return this.bitData.slice()}static getTotalBits(w,E){let S=0;for(const I of w){const R=I.mode.numCharCountBits(E);if(I.numChars>=1<<R)return 1/0;S+=4+R+I.bitData.length}return S}static toUtf8ByteArray(w){w=encodeURI(w);let E=[];for(let S=0;S<w.length;S++)w.charAt(S)!="%"?E.push(w.charCodeAt(S)):(E.push(parseInt(w.substring(S+1,S+3),16)),S+=2);return E}};x.NUMERIC_REGEX=/^[0-9]*$/,x.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,x.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let y=x;r.QrSegment=x})(Ks||(Ks={}));(r=>{(o=>{const a=class{constructor(p,x){this.ordinal=p,this.formatBits=x}};a.LOW=new a(0,1),a.MEDIUM=new a(1,0),a.QUARTILE=new a(2,3),a.HIGH=new a(3,2),o.Ecc=a})(r.QrCode||(r.QrCode={}))})(Ks||(Ks={}));(r=>{(o=>{const a=class{constructor(p,x){this.modeBits=p,this.numBitsCharCount=x}numCharCountBits(p){return this.numBitsCharCount[Math.floor((p+7)/17)]}};a.NUMERIC=new a(1,[10,12,14]),a.ALPHANUMERIC=new a(2,[9,11,13]),a.BYTE=new a(4,[8,16,16]),a.KANJI=new a(8,[8,10,12]),a.ECI=new a(7,[0,0,0]),o.Mode=a})(r.QrSegment||(r.QrSegment={}))})(Ks||(Ks={}));var Ro=Ks;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var PE={L:Ro.QrCode.Ecc.LOW,M:Ro.QrCode.Ecc.MEDIUM,Q:Ro.QrCode.Ecc.QUARTILE,H:Ro.QrCode.Ecc.HIGH},Om=128,km="L",Mm="#FFFFFF",Dm="#000000",Lm=!1,Bm=1,OE=4,kE=0,ME=.1;function Fm(r,o=0){const a=[];return r.forEach(function(d,p){let x=null;d.forEach(function(y,A){if(!y&&x!==null){a.push(`M${x+o} ${p+o}h${A-x}v1H${x+o}z`),x=null;return}if(A===d.length-1){if(!y)return;x===null?a.push(`M${A+o},${p+o} h1v1H${A+o}z`):a.push(`M${x+o},${p+o} h${A+1-x}v1H${x+o}z`);return}y&&x===null&&(x=A)})}),a.join("")}function jm(r,o){return r.slice().map((a,d)=>d<o.y||d>=o.y+o.h?a:a.map((p,x)=>x<o.x||x>=o.x+o.w?p:!1))}function DE(r,o,a,d){if(d==null)return null;const p=r.length+a*2,x=Math.floor(o*ME),y=p/o,A=(d.width||x)*y,w=(d.height||x)*y,E=d.x==null?r.length/2-A/2:d.x*y,S=d.y==null?r.length/2-w/2:d.y*y,I=d.opacity==null?1:d.opacity;let R=null;if(d.excavate){let L=Math.floor(E),B=Math.floor(S),j=Math.ceil(A+E-L),V=Math.ceil(w+S-B);R={x:L,y:B,w:j,h:V}}const k=d.crossOrigin;return{x:E,y:S,h:w,w:A,excavation:R,opacity:I,crossOrigin:k}}function LE(r,o){return o!=null?Math.max(Math.floor(o),0):r?OE:kE}function Vm({value:r,level:o,minVersion:a,includeMargin:d,marginSize:p,imageSettings:x,size:y,boostLevel:A}){let w=tn.useMemo(()=>{const L=(Array.isArray(r)?r:[r]).reduce((B,j)=>(B.push(...Ro.QrSegment.makeSegments(j)),B),[]);return Ro.QrCode.encodeSegments(L,PE[o],a,void 0,void 0,A)},[r,o,a,A]);const{cells:E,margin:S,numCells:I,calculatedImageSettings:R}=tn.useMemo(()=>{let k=w.getModules();const L=LE(d,p),B=k.length+L*2,j=DE(k,y,L,x);return{cells:k,margin:L,numCells:B,calculatedImageSettings:j}},[w,y,x,d,p]);return{qrcode:w,margin:S,cells:E,numCells:I,calculatedImageSettings:R}}var BE=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),FE=tn.forwardRef(function(o,a){const d=o,{value:p,size:x=Om,level:y=km,bgColor:A=Mm,fgColor:w=Dm,includeMargin:E=Lm,minVersion:S=Bm,boostLevel:I,marginSize:R,imageSettings:k}=d,B=Zf(d,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:j}=B,V=Zf(B,["style"]),H=k==null?void 0:k.src,U=tn.useRef(null),ne=tn.useRef(null),se=tn.useCallback(De=>{U.current=De,typeof a=="function"?a(De):a&&(a.current=De)},[a]),[re,q]=tn.useState(!1),{margin:ue,cells:J,numCells:Ie,calculatedImageSettings:ke}=Vm({value:p,level:y,minVersion:S,boostLevel:I,includeMargin:E,marginSize:R,imageSettings:k,size:x});tn.useEffect(()=>{if(U.current!=null){const De=U.current,Z=De.getContext("2d");if(!Z)return;let Te=J;const fe=ne.current,ce=ke!=null&&fe!==null&&fe.complete&&fe.naturalHeight!==0&&fe.naturalWidth!==0;ce&&ke.excavation!=null&&(Te=jm(J,ke.excavation));const ge=window.devicePixelRatio||1;De.height=De.width=x*ge;const pe=x/Ie*ge;Z.scale(pe,pe),Z.fillStyle=A,Z.fillRect(0,0,Ie,Ie),Z.fillStyle=w,BE?Z.fill(new Path2D(Fm(Te,ue))):J.forEach(function($,de){$.forEach(function(Ge,We){Ge&&Z.fillRect(We+ue,de+ue,1,1)})}),ke&&(Z.globalAlpha=ke.opacity),ce&&Z.drawImage(fe,ke.x+ue,ke.y+ue,ke.w,ke.h)}}),tn.useEffect(()=>{q(!1)},[H]);const be=Kf({height:x,width:x},j);let Re=null;return H!=null&&(Re=tn.createElement("img",{src:H,key:H,style:{display:"none"},onLoad:()=>{q(!0)},ref:ne,crossOrigin:ke==null?void 0:ke.crossOrigin})),tn.createElement(tn.Fragment,null,tn.createElement("canvas",Kf({style:be,height:x,width:x,ref:se,role:"img"},V)),Re)});FE.displayName="QRCodeCanvas";var Vd=tn.forwardRef(function(o,a){const d=o,{value:p,size:x=Om,level:y=km,bgColor:A=Mm,fgColor:w=Dm,includeMargin:E=Lm,minVersion:S=Bm,boostLevel:I,title:R,marginSize:k,imageSettings:L}=d,B=Zf(d,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:j,cells:V,numCells:H,calculatedImageSettings:U}=Vm({value:p,level:y,minVersion:S,boostLevel:I,includeMargin:E,marginSize:k,imageSettings:L,size:x});let ne=V,se=null;L!=null&&U!=null&&(U.excavation!=null&&(ne=jm(V,U.excavation)),se=tn.createElement("image",{href:L.src,height:U.h,width:U.w,x:U.x+j,y:U.y+j,preserveAspectRatio:"none",opacity:U.opacity,crossOrigin:U.crossOrigin}));const re=Fm(ne,j);return tn.createElement("svg",Kf({height:x,width:x,viewBox:`0 0 ${H} ${H}`,ref:a,role:"img"},B),!!R&&tn.createElement("title",null,R),tn.createElement("path",{fill:A,d:`M0,0 h${H}v${H}H0z`,shapeRendering:"crispEdges"}),tn.createElement("path",{fill:w,d:re,shapeRendering:"crispEdges"}),se)});Vd.displayName="QRCodeSVG";const jE=({player:r})=>T.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"350px",height:"500px",margin:"0 auto",position:"relative"},children:r!=null&&r.image_data?T.jsxs("div",{style:{position:"relative",width:"350px",height:"450px"},children:[T.jsx("img",{src:`data:image/jpeg;base64,${r.image_data}`,alt:r.name,style:{width:"350px",height:"450px",objectFit:"cover",borderRadius:"50px",boxShadow:"0 6px 12px rgba(0, 0, 0, 0.3)",margin:"auto",display:"block"},onError:o=>{console.error("Image failed to load:",o),o.target.style.display="none"}}),T.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",backgroundColor:"#144dff",color:"white",padding:"12px 0",borderBottomLeftRadius:"50px",borderBottomRightRadius:"50px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",fontFamily:"Helvetica, Arial, sans-serif",boxShadow:"0 -4px 10px rgba(0, 0, 0, 0.1)",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.2)"},children:r.name})]}):T.jsxs("div",{style:{width:"350px",height:"450px",backgroundColor:"#f0f0f0",borderRadius:"50px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"relative"},children:[T.jsx("p",{style:{marginBottom:"60px"},children:"No image available"}),T.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",backgroundColor:"#144dff",color:"white",padding:"12px 0",borderBottomLeftRadius:"50px",borderBottomRightRadius:"50px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",fontFamily:"Helvetica, Arial, sans-serif",boxShadow:"0 -4px 10px rgba(0, 0, 0, 0.1)",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.2)"},children:r.name})]})});var _p=typeof window>"u"?O.useEffect:O.useLayoutEffect,VE=({isPlaying:r,duration:o,startAt:a=0,updateInterval:d=0,onComplete:p,onUpdate:x})=>{let[y,A]=O.useState(a),w=O.useRef(0),E=O.useRef(a),S=O.useRef(a*-1e3),I=O.useRef(null),R=O.useRef(null),k=O.useRef(null),L=V=>{let H=V/1e3;if(R.current===null){R.current=H,I.current=requestAnimationFrame(L);return}let U=H-R.current,ne=w.current+U;R.current=H,w.current=ne;let se=E.current+(d===0?ne:(ne/d|0)*d),re=E.current+ne,q=typeof o=="number"&&re>=o;A(q?o:se),q||(I.current=requestAnimationFrame(L))},B=()=>{I.current&&cancelAnimationFrame(I.current),k.current&&clearTimeout(k.current),R.current=null},j=O.useCallback(V=>{B(),w.current=0;let H=typeof V=="number"?V:a;E.current=H,A(H),r&&(I.current=requestAnimationFrame(L))},[r,a]);return _p(()=>{if(x==null||x(y),o&&y>=o){S.current+=o*1e3;let{shouldRepeat:V=!1,delay:H=0,newStartAt:U}=(p==null?void 0:p(S.current/1e3))||{};V&&(k.current=setTimeout(()=>j(U),H*1e3))}},[y,o]),_p(()=>(r&&(I.current=requestAnimationFrame(L)),B),[r,o,d]),{elapsedTime:y,reset:j}},zE=(r,o,a)=>{let d=r/2,p=o/2,x=d-p,y=2*x,A=a==="clockwise"?"1,0":"0,1",w=2*Math.PI*x;return{path:`m ${d},${p} a ${x},${x} 0 ${A} 0,${y} a ${x},${x} 0 ${A} 0,-${y}`,pathLength:w}},Pp=(r,o)=>r===0||r===o?0:typeof o=="number"?r-o:0,UE=r=>({position:"relative",width:r,height:r}),WE={display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,top:0,width:"100%",height:"100%"},zm=(r,o,a,d,p)=>{if(d===0)return o;let x=(p?d-r:r)/d;return o+a*x},Op=r=>{var o,a;return(a=(o=r.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(d,p,x,y)=>`#${p}${p}${x}${x}${y}${y}`).substring(1).match(/.{2}/g))==null?void 0:o.map(d=>parseInt(d,16)))!=null?a:[]},HE=(r,o)=>{var a;let{colors:d,colorsTime:p,isSmoothColorTransition:x=!0}=r;if(typeof d=="string")return d;let y=(a=p==null?void 0:p.findIndex((R,k)=>R>=o&&o>=p[k+1]))!=null?a:-1;if(!p||y===-1)return d[0];if(!x)return d[y];let A=p[y]-o,w=p[y]-p[y+1],E=Op(d[y]),S=Op(d[y+1]),I=!!r.isGrowing;return`rgb(${E.map((R,k)=>zm(A,R,S[k]-R,w,I)|0).join(",")})`},GE=r=>{let{duration:o,initialRemainingTime:a,updateInterval:d,size:p=180,strokeWidth:x=12,trailStrokeWidth:y,isPlaying:A=!1,isGrowing:w=!1,rotation:E="clockwise",onComplete:S,onUpdate:I}=r,R=O.useRef(),k=Math.max(x,y??0),{path:L,pathLength:B}=zE(p,k,E),{elapsedTime:j}=VE({isPlaying:A,duration:o,startAt:Pp(o,a),updateInterval:d,onUpdate:typeof I=="function"?H=>{let U=Math.ceil(o-H);U!==R.current&&(R.current=U,I(U))}:void 0,onComplete:typeof S=="function"?H=>{var U;let{shouldRepeat:ne,delay:se,newInitialRemainingTime:re}=(U=S(H))!=null?U:{};if(ne)return{shouldRepeat:ne,delay:se,newStartAt:Pp(o,re)}}:void 0}),V=o-j;return{elapsedTime:j,path:L,pathLength:B,remainingTime:Math.ceil(V),rotation:E,size:p,stroke:HE(r,V),strokeDashoffset:zm(j,0,B,o,w),strokeWidth:x}},zd=r=>{let{children:o,strokeLinecap:a,trailColor:d,trailStrokeWidth:p}=r,{path:x,pathLength:y,stroke:A,strokeDashoffset:w,remainingTime:E,elapsedTime:S,size:I,strokeWidth:R}=GE(r);return tn.createElement("div",{style:UE(I)},tn.createElement("svg",{viewBox:`0 0 ${I} ${I}`,width:I,height:I,xmlns:"http://www.w3.org/2000/svg"},tn.createElement("path",{d:x,fill:"none",stroke:d??"#d9d9d9",strokeWidth:p??R}),tn.createElement("path",{d:x,fill:"none",stroke:A,strokeLinecap:a??"round",strokeWidth:R,strokeDasharray:y,strokeDashoffset:w})),typeof o=="function"&&tn.createElement("div",{style:WE},o({remainingTime:E,elapsedTime:S,color:A})))};zd.displayName="CountdownCircleTimer";const XE=({onComplete:r})=>{const[o,a]=O.useState(5),[d,p]=O.useState(!1),x=O.useRef(null),y=O.useRef(null);O.useEffect(()=>(x.current&&clearTimeout(x.current),y.current&&clearInterval(y.current),y.current=setInterval(()=>{p(!0),x.current=setTimeout(()=>{a(w=>w<=1?(y.current&&clearInterval(y.current),x.current&&clearTimeout(x.current),r&&r(),0):w-1),p(!1)},500)},1500),()=>{y.current&&clearInterval(y.current),x.current&&clearTimeout(x.current)}),[r]);const A=d?"pop-burst":"";return T.jsx("div",{className:"lobby-countdown-overlay",children:T.jsxs("div",{className:`lobby-countdown-container ${A}`,children:[T.jsx("div",{className:"lobby-countdown-number",children:o}),T.jsx("div",{className:"lobby-countdown-text",children:o>0?"Get ready!":"Starting..."})]})})},YE=({onComplete:r,lobbyCode:o="this"})=>{const{userProfile:a}=O.useContext(Nr),[d,p]=O.useState(0),[x,y]=O.useState(!1),[A,w]=O.useState(!1),[E,S]=O.useState([0]),[I,R]=O.useState(!1),k=O.useRef(null),L=O.useRef(null),B=[{image:a!=null&&a.image_data?`data:image/jpeg;base64,${a.image_data}`:"/assets/how_to_pt1_1.svg",duration:2e3,animatedText:"Find your match using their profile picture!"},{image:"/assets/how_to_pt2_2.svg",duration:4e3,animatedText:"Raise the volume, you need it to know whats going on!"},{image:"/assets/how_to_pt3_3.svg",duration:4e3,animatedText:"Tap this to stop or pause, you can rejoin anytime"}];return O.useEffect(()=>{const j=()=>{if(d>=B.length-1){clearInterval(k.current),r&&r();return}y(!0);const V=d+1;S([d,V]),L.current=setTimeout(()=>{R(!1),p(V),y(!1),setTimeout(()=>{S([V]),w(!0),B[V].animatedText&&R(!0)},500)},500)};return k.current=setInterval(j,B[d].duration),w(!0),d===0&&B[0].animatedText&&R(!0),()=>{k.current&&clearInterval(k.current),L.current&&clearTimeout(L.current)}},[d,B.length,r]),T.jsx("div",{className:"tutorial-overlay",children:T.jsxs("div",{className:"tutorial-container",children:[E.map(j=>T.jsxs("div",{className:`tutorial-slide ${j===d?"current":j<d?"previous":"next"}`,children:[j===d&&B[j].animatedText&&I&&T.jsx("div",{className:"animated-text pop-burst",children:B[j].animatedText}),j===1&&T.jsx("div",{className:"volume-arrow-container",children:T.jsx("svg",{className:"volume-arrow",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:T.jsx("path",{d:"M19 12H5M5 12L12 5M5 12L12 19",stroke:"#144dff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),T.jsx("div",{className:`tutorial-image-container ${j===0?"first-slide":""}`,children:T.jsx("img",{src:B[j].image,alt:`Tutorial step ${j+1}`,className:"tutorial-image"})}),T.jsx("div",{className:`tutorial-text ${A&&j===d?"text-animate":""}`,children:B[j].text})]},j)),T.jsx("div",{className:"tutorial-progress",children:B.map((j,V)=>T.jsx("div",{className:`progress-dot ${V===d?"active":""}`},V))})]})})},KE=({isVisible:r,onAnimationEnd:o})=>{const[a,d]=O.useState(!1),p=O.useRef(null);return O.useEffect(()=>(p.current&&clearTimeout(p.current),r?(d(!0),p.current=setTimeout(()=>{d(!1),o&&o()},3e3)):d(!1),()=>{p.current&&(clearTimeout(p.current),p.current=null)}),[r,o]),a?T.jsxs("div",{className:"match-overlay",children:[T.jsxs("div",{className:"confetti-container",children:[[...Array(50)].map((x,y)=>T.jsx("div",{className:`confetti confetti-${y%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":Math.random()*.2}},`first-${y}`)),[...Array(50)].map((x,y)=>T.jsx("div",{className:`confetti confetti-${y%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":`${.6+Math.random()*.2}s`}},`second-${y}`))]}),T.jsx("div",{className:"match-text",children:"It's a Match!"})]}):null},ZE=({isVisible:r,onAnimationEnd:o})=>{const[a,d]=O.useState(!1),p=O.useRef(null);return O.useEffect(()=>(p.current&&clearTimeout(p.current),r?(d(!0),p.current=setTimeout(()=>{d(!1),o&&o()},1800)):d(!1),()=>{p.current&&(clearTimeout(p.current),p.current=null)}),[r,o]),a?T.jsxs("div",{className:"ready-overlay",children:[T.jsxs("div",{className:"confetti-container",children:[[...Array(50)].map((x,y)=>T.jsx("div",{className:`confetti confetti-${y%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":Math.random()*.2}},`first-${y}`)),[...Array(50)].map((x,y)=>T.jsx("div",{className:`confetti confetti-${y%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":`${.6+Math.random()*.2}s`}},`second-${y}`))]}),T.jsx("div",{className:"ready-text",children:"You're ready!"})]}):null},ou=9,$E=5,qE=5e3,QE=()=>{const r=Math.floor(540),[o,a]=O.useState([]),[d,p]=O.useState("self"),[x,y]=O.useState(!1),[A,w]=O.useState(""),E=O.useRef(null),S=O.useRef(null),[I,R]=O.useState(!1),k=O.useRef(!1),[L,B]=O.useState(!1),{audioRef:j,loadSound:V,seekTo:H,cancelSound:U,checkSound:ne,soundEnabled:se,setSoundEnabled:re,isPlaying:q}=Jp(),[ue,J]=O.useState("yonder"),Ie=zr(),{code:ke}=X2(),[be,Re]=O.useState(null);Rm(Re,null,ue);const{user:De,userProfile:Z,checkAuth:Te,permissions:fe}=O.useContext(Nr);O.useEffect(()=>{(async()=>{if(localStorage.getItem("access_token"))try{De||await Te()}catch(tt){console.error("Authentication error:",tt);const je=new URLSearchParams(window.location.search).get("code")||ke;Ie(je?`/signup?redirect=lobby&code=${je}`:"/signup?redirect=lobby")}else{const Ut=new URLSearchParams(window.location.search).get("code")||ke;Ie(Ut?`/signup?redirect=lobby&code=${Ut}`:"/signup?redirect=lobby")}})()},[Ie,ke,Te,De]),O.useEffect(()=>{(()=>{const tt=new URLSearchParams(window.location.search).get("code")||ke;if(tt){J(tt);const Ut=`hasSeenTutorial_${tt}`,je=localStorage.getItem(Ut),St=!!localStorage.getItem("access_token");console.log("Tutorial check:",{codeParam:tt,lobbyTutorialKey:Ut,hasSeenLobbyTutorial:je,isAuthenticated:St}),!je&&St&&(Sn(!0),localStorage.setItem(Ut,"true"))}})()},[ke]);const[ce,ge]=O.useState(null),[pe,$]=O.useState(null),[de,Ge]=O.useState(null),[We,ut]=O.useState(null),[Ee,at]=O.useState(null),He=O.useRef(!1),rt=O.useRef(null),Be=O.useRef(null),[Ne,mt]=O.useState(null),[Oe,wt]=O.useState(null),[Ht,$t]=O.useState(null),[Rt,Tt]=O.useState(null),[ht,sr]=O.useState(!0),_e=O.useRef(0),[xn,Lt]=O.useState(null),[Fe,ct]=O.useState(null),[it,Gn]=O.useState([]),[vt,At]=O.useState([]),[cn,nn]=O.useState(!document.hidden),Xn=O.useRef("yonder"),xt=O.useRef({}),we=O.useRef([]),[zt,Nt]=O.useState(!1);O.useEffect(()=>{Xn.current=ue},[ue]);async function jt(Me,$e){const tt=localStorage.getItem("access_token"),je=await(await fetch(window.server_url+"/set_profile_info",{method:"POST",headers:{Authorization:`Bearer ${tt}`,"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},mode:"cors",body:JSON.stringify({tags_work:Me,tags_desiring_work:$e})})).json();console.log("SET PROFILE INFO:",je)}const Ur=async Me=>{if(Me.length!==0){Nt(!0);try{const $e=localStorage.getItem("access_token"),tt=await fetch(`${window.server_url}/load_batch_pfp_small_icons`,{method:"POST",headers:{Authorization:`Bearer ${$e}`,"Content-Type":"application/json",lobby_code:Xn.current},body:JSON.stringify({usernames:Me})});if(tt.ok){const Ut=await tt.json();xt.current={...xt.current,...Ut},console.log("Profile images fetched:",Object.keys(Ut))}else console.error("Failed to fetch profile images:",tt.status)}catch($e){console.error("Error fetching profile images:",$e)}finally{Nt(!1)}}};async function yi(){try{const Me=localStorage.getItem("access_token");U(),xt.current={},we.current=[],(await fetch(window.server_url+"/disconnect_lobby",{headers:{Authorization:`Bearer ${Me}`,lobby_code:ue}})).ok&&Ie("/")}catch(Me){console.error("Error disconnecting from lobby:",Me),Ie("/")}finally{U(),Ie("/"),console.log("finally")}}const[Vi,pt]=O.useState(!1),[Yn,xs]=O.useState(null),wi=O.useRef(!1),[Kn,vi]=O.useState(!1),[rn,wr]=O.useState(null),Ci=(Me,$e)=>{if(!Me||!$e)return null;for(const tt of Me.tags_work)if($e.desiring_tags_work.includes(tt)){for(const Ut of $e.tags_work)if(Me.desiring_tags_work.includes(Ut))return{playerTag:tt,opponentTag:Ut}}return null};async function yn(){try{_e.current+=1,_e.current>5&&(_e.current=0,He.current=!1);const Me=localStorage.getItem("access_token"),$e=!document.hidden,tt=Xn.current;if(console.log("lobby code fr:",tt),tt=="yonder"){console.log("lobby code is not set");return}const Ut=await fetch(`${window.server_url}/lobby?is_visible=${$e}`,{headers:{Authorization:`Bearer ${Me}`,is_visible_t_f:$e?"t":"f",lobby_code:tt}});if(Ut.ok){const je=await Ut.json();console.log("LOBBY PAIR DATA:",tt,je),je.status=="inactive"&&(U(),Ie("/")),Ge(je.opponent_name),je.opponent_name==null&&ge(null),a(je.custom_tags),mt(je.lobby_state),Tt(je.lobby_duration);const St=typeof je.round_time_left=="number"&&!isNaN(je.round_time_left)?je.round_time_left:0;console.log("Timer Debug:",{roundDuration:je.lobby_duration,timeLeft:St,lobbyState:je.lobby_state,usingDefaultDuration:!je.lobby_duration}),rt.current=St,Be.current=je.beat_go_off,wt(Math.floor(St));const Bt=Math.floor(St/60),qs=Math.floor(St%60);$t(`${Bt}:${qs.toString().padStart(2,"0")}`),at(je.table_number),je.player_tags!=null&&je.player_tags.tags_work!=null&&Gn(je.player_tags.tags_work),je.player_tags!=null&&je.player_tags.desiring_tags_work!=null&&At(je.player_tags.desiring_tags_work),rt.current!=null&&je.lobby_state=="active"&&rt.current!=0&&(H(r-rt.current),console.log("seeking to",r-rt.current));const _t=await fetch(`${window.server_url}/display_lobby_metadata?lobby_code=${tt}`,{headers:{Authorization:`Bearer ${Me}`,lobby_code:tt}});if(_t.ok){const or=await _t.json();Re(or.player_count);const he=or.usernames||[];if(JSON.stringify(we.current)!==JSON.stringify(he)){we.current=he;const Mt=he.filter(Wr=>!xt.current[Wr]&&Wr!==(De==null?void 0:De.username));Mt.length>0&&(console.log("Fetching images for new users:",Mt),Ur(Mt))}}if((de!=je.opponent_name||ce==null)&&!He.current&&je.opponent_name!=null){He.current=!0,console.log("fetching profile");const or=await fetch(window.server_url+"/paired_player_profile",{headers:{Authorization:`Bearer ${Me}`}});if(or.ok){const he=await or.json();ge(he),console.log("profile fetched:",he.name)}else console.log("profile fetch failed");He.current=!1}if(Yn==="interrim"&&je.lobby_state==="active"&&je.opponent_name&&!wi.current){console.log("Checking for matches...");const or=Ci(je.player_tags,je.opponent_tags);or&&(console.log("Match found! Setting animation and banner...",or),wr(or),vi(!0),wi.current=!0,pt(!0))}xs(je.lobby_state)}}catch(Me){console.error("Error fetching lobby data:",Me)}}O.useEffect(()=>{ne()?re(!0):re(!1);const Me=setInterval(async()=>{yn()},qE);return()=>clearInterval(Me)},[]),O.useEffect(()=>{const Me=setTimeout(yn,1e3);return()=>clearTimeout(Me)},[Ne,ue]),O.useEffect(()=>{const Me=()=>{const $e=!document.hidden;$e&&!cn&&(console.log("Page became visible - fetching latest data"),yn()),nn($e)};return document.addEventListener("visibilitychange",Me),()=>{document.removeEventListener("visibilitychange",Me)}},[cn]);const ys=()=>T.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.125)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},children:T.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",position:"relative",minWidth:"300px"},children:[T.jsx("button",{onClick:()=>sr(!1),style:{color:"#144fff",position:"absolute",right:"10px",top:"10px",border:"none",background:"none",fontSize:"2px",cursor:"pointer"},children:"X"}),T.jsx("h2",{style:{marginTop:"5px"},children:"The Sound is Important"}),T.jsx("h3",{style:{marginTop:"5px"},children:"Raise your volume also"}),T.jsx("p",{style:{color:"#144dff"},children:"You'll need this for the best experience."}),T.jsx("button",{onClick:()=>{V(),sr(!1)},style:{padding:"10px 20px",marginTop:"20px",backgroundColor:"#144dff",color:"#ffffff",border:"none",borderRadius:"14px",fontWeight:"bold",cursor:"pointer"},children:"Enable Sound"})]})}),Zn=(Me,$e)=>{xn==null&&Lt(it),Fe==null&&ct(vt);const tt=Me==="self"?xn:Fe;if(!(tt!=null&&tt.includes($e))&&(tt==null?void 0:tt.length)>=$E){w("Reached tag limit for this section"),setTimeout(()=>{var je;(je=S.current)==null||je.scrollIntoView({behavior:"smooth",block:"center"})},100),setTimeout(()=>{w("")},3e3);return}Me==="self"?Lt(je=>je.includes($e)?je.filter(St=>St!==$e):[...je,$e]):ct(je=>je.includes($e)?je.filter(St=>St!==$e):[...je,$e])},ws=()=>{xn!=null&&jt(xn,Fe||[]),p("desiring"),setTimeout(()=>{var Me;(Me=E.current)==null||Me.scrollIntoView({behavior:"smooth",block:"start"})},100)},fn=()=>{Fe!=null&&(jt(xn||[],Fe),setTimeout(()=>{k.current||(k.current=!0,R(!0),B(!0))},500)),window.scrollTo({top:0,behavior:"smooth"})},dr=()=>{p("self")},[Tn,Pe]=O.useState(!1);O.useEffect(()=>{if(Ne==="interrim")Pe(!0);else if(Ne==="active"){const Me=setTimeout(()=>{Pe(!1)},1e3);return()=>clearTimeout(Me)}},[Ne]);const ti=()=>{console.log("Lobby countdown animation completed")},[vs,Sn]=O.useState(!1),$n=()=>{Sn(!1)};O.useEffect(()=>{(Ne!=="active"||!ce)&&(vi(!1),wr(null))},[Ne,ce]),O.useEffect(()=>{Ne==="terminated"&&(xt.current={},we.current=[])},[Ne]);const ni=O.useRef(null);return O.useEffect(()=>{var Me;!x&&!(it!=null&&it.length)&&!(vt!=null&&vt.length)&&(o==null?void 0:o.length)>0&&((Me=ni.current)==null||Me.scrollIntoView({behavior:"smooth"}),y(!0))},[it,vt,o,x]),T.jsxs("div",{className:"lobby-container",children:[T.jsxs("div",{className:"lobby-content",children:[T.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0",marginTop:"-1.5rem"},children:T.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",style:{maxWidth:"85px",height:"auto",objectFit:"contain"}})}),T.jsxs("p",{style:{color:"#144dff",fontSize:"0.8rem",fontWeight:"600",textAlign:"center",marginTop:"0.5rem"},children:["TimeToSkip: ",rt.current,T.jsx("br",{}),"Lenth of Audio File: ",j.current.duration,T.jsx("br",{}),rt.current&&T.jsxs(T.Fragment,{children:["Time to Play: ",new Date(Date.now()-rt.current).toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3}),T.jsx("br",{}),"Time to Skip: ",Be.current,Be.current&&(()=>{const $e=new Date(Be.current).getTime()-Date.now(),tt=Math.abs($e),Ut=Math.floor(tt/(1e3*60*60)),je=Math.floor(tt%(1e3*60*60)/(1e3*60)),St=Math.floor(tt%(1e3*60)/1e3),Bt=tt%1e3;return T.jsxs("span",{children:[T.jsx("br",{}),"Time to Skip: ",$e<0?"-":"",Ut.toString().padStart(2,"0"),":",je.toString().padStart(2,"0"),":",St.toString().padStart(2,"0"),".",Bt.toString().padStart(3,"0")]})})()]})]}),(Ne==="checkin"||Ne==="active"&&!ce||Ne==="interrim")&&T.jsx("div",{className:"user-profile-container",children:T.jsxs("div",{className:"user-profile",children:[T.jsx("img",{src:Z!=null&&Z.image_data?`data:image/jpeg;base64,${Z.image_data}`:"/assets/avatar_3.png",alt:"Your Profile",className:"user-profile-picture"}),T.jsx("div",{className:"user-profile-glow"})]})}),T.jsx("div",{className:"lobby-header",style:{marginTop:"-50px"},children:T.jsx("h2",{children:Ne==="active"&&ce?T.jsxs("span",{className:"lobby-pop-burst",children:["Go find ",ce.name,"!"]}):Ne==="checkin"?T.jsxs(T.Fragment,{children:["Wait here ",Z.name.slice(0,15),".",T.jsx("br",{}),"Your host will start the experience."]}):Ne==="active"&&!ce?"You will be paired with someone in the next round.":Ne==="interrim"?"Get ready for the next round!":Ne==="terminated"?"This session has ended. Thank you for participating!":""})},Ne),Ne==="active"&&ce&&Ee&&T.jsx("div",{className:"table-number",children:T.jsxs("h3",{children:["at table: ",Ee]})}),Ne!=="checkin"&&T.jsx("div",{className:"time-left",style:{display:"flex",flexDirection:"column",alignItems:"center",background:"white",marginTop:"-2rem"},children:(Ne==="active"||Ne==="interrim")&&Oe?T.jsxs(T.Fragment,{children:[T.jsx(zd,{isPlaying:Ne==="active",duration:Rt||300,initialRemainingTime:Oe||0,colors:["#144dff"],size:90,strokeWidth:12,trailColor:"#f5f7ff",onComplete:()=>(yn(),{shouldRepeat:!1}),children:({remainingTime:Me})=>{const $e=typeof Me=="number"&&!isNaN(Me)?Me:0,tt=Math.floor($e/60),Ut=Math.floor($e%60);return T.jsxs("span",{style:{fontSize:".95rem",color:"#144dff",fontWeight:600},children:[tt,":",String(Ut).padStart(2,"0")]})}},`${Ne}-${Oe}`),T.jsx("span",{style:{fontWeight:700,fontSize:"0.7em",marginTop:"4px",opacity:"1",color:"#144dff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.1)"},children:"round time left"})]}):T.jsx("span",{className:"time-left-text"})}),Kn&&rn&&Ne==="active"&&ce&&T.jsxs("div",{className:"match-banner",children:[T.jsx("span",{className:"match-tag",children:rn.playerTag}),T.jsx("div",{className:"match-arrow"}),T.jsx("span",{className:"match-tag",children:rn.opponentTag})]}),T.jsx("div",{style:{display:"flex",justifyContent:"center",width:"100%",margin:"0 auto"},children:Ne==="active"||Ne==="interrim"?ce?T.jsx("div",{style:{marginTop:"-4.5rem",width:"100%",display:"flex",justifyContent:"center"},children:T.jsx(jE,{player:ce})}):T.jsx(T.Fragment,{}):Ne==="terminated"?T.jsx("div",{className:"status-message",children:T.jsxs("h2",{children:["This session has ended.",T.jsx("br",{}),"Thank you for participating!"]})}):null}),(Ne==="checkin"||Ne==="active"&&!ce)&&be!==null&&T.jsx("div",{className:"player-count-container",children:T.jsxs("div",{className:"player-count-bubble",children:[T.jsx("div",{className:"player-count-icon",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:T.jsx("img",{src:"/assets/players_display_icon.png",alt:"Players in lobby",className:"player-count-img",style:{width:"40px",height:"40px",objectFit:"contain"}})}),T.jsxs("div",{className:"player-count-text",children:[T.jsx("span",{className:"player-count-number",children:be}),T.jsxs("span",{className:"player-count-label",children:[""," in ",ue," lobby"]})]})]})}),(Ne==="checkin"||Ne==="active"&&!ce)&&T.jsx("div",{className:"lobby-profiles-container",children:T.jsx("div",{className:"lobby-profiles-grid",children:be>0?T.jsxs(T.Fragment,{children:[Array.from({length:Math.min(be,ou)}).map((Me,$e)=>{let tt;if($e===0)tt=Z!=null&&Z.image_data?`data:image/jpeg;base64,${Z.image_data}`:"/assets/avatar_8.png";else{const je=we.current.filter(St=>St!==(De==null?void 0:De.username)&&xt.current[St])[$e-1];je&&xt.current[je]?tt=`data:image/jpeg;base64,${xt.current[je]}`:tt="/assets/avatar_8.png"}return T.jsxs("div",{className:`profile-icon-wrapper ${$e===Math.min(be,ou)-1?"pop-in":""}`,children:[T.jsx("img",{src:tt,alt:$e===0?"Your Profile":`Profile ${$e+1}`,className:"profile-icon",loading:"lazy"}),T.jsx("div",{className:"profile-icon-glow"})]},`profile-${$e}`)}),be>ou&&T.jsx("div",{className:"profile-icon-wrapper more-profiles",children:T.jsxs("div",{className:"more-profiles-bubble",children:["+",be-ou]})})]}):T.jsx("div",{children:"No profiles to display"})})}),(Ne==="checkin"||Ne==="active")&&T.jsxs("div",{className:"selected-tags-container",children:[xn&&xn.length>0&&T.jsxs("div",{className:"tag-category",children:[T.jsx("h4",{children:"I am:"}),T.jsx("div",{className:"tag-list",children:xn.map(Me=>T.jsx("span",{className:"tag-item",children:Me},`self-${Me}`))})]}),Fe&&Fe.length>0&&T.jsxs("div",{className:"tag-category",children:[T.jsx("h4",{children:"Looking for:"}),T.jsx("div",{className:"tag-list",children:Fe.map(Me=>T.jsx("span",{className:"tag-item",children:Me},`desiring-${Me}`))})]})]}),T.jsx("button",{className:"leave-lobby-button",onClick:yi,children:"Leave"}),T.jsx("button",{className:"how-to-tutorial-button",onClick:()=>Sn(!0),children:"Tutorial"}),fe==="admin"&&T.jsx("button",{className:"admin-view-button",onClick:()=>Ie(`/admin_lobby_view?code=${ue}`),children:"Manage"}),Array.isArray(o)&&o.length>0&&T.jsx("form",{onSubmit:Me=>{Me.preventDefault(),d==="self"?ws():fn()},children:T.jsxs("div",{className:"tags-section",ref:ni,children:[T.jsx("div",{className:"progress-bar-container",children:T.jsx("div",{className:`progress-bar ${d==="desiring"?"progress-complete":""}`,onClick:dr})}),T.jsxs("div",{className:`tag-group ${d==="self"?"active":"hidden"}`,children:[T.jsx("div",{className:"bounce-wrapper",children:T.jsx("h2",{children:"Who are you?"})}),T.jsx("div",{className:"tag-labels-container",children:o.map(Me=>T.jsxs("label",{className:"tag-label",children:[T.jsx("input",{type:"checkbox",checked:xn!=null?xn.includes(Me):it.includes(Me),onChange:()=>Zn("self",Me)}),Me]},`self-${Me}`))})]}),T.jsxs("div",{className:`tag-group ${d==="desiring"?"active":"hidden"}`,ref:E,children:[T.jsx("div",{className:"bounce-wrapper",children:T.jsx("h2",{children:"Who do you want to meet?"})}),T.jsx("div",{className:"tag-labels-container",children:o.map(Me=>T.jsxs("label",{className:"tag-label",children:[T.jsx("input",{type:"checkbox",checked:Fe!=null?Fe.includes(Me):vt.includes(Me),onChange:()=>Zn("desiring",Me)}),Me]},`desiring-${Me}`))})]}),T.jsx("button",{type:"submit",className:"tag-selection-button",ref:S,children:d==="self"?"Continue":"Save"}),A&&T.jsx("div",{style:{color:"#144dff",textAlign:"center",marginTop:"1rem",fontSize:"0.9rem",fontWeight:"600"},children:A})]})})]}),se||!ht||Ne=="checkin"||Ne==null||q?null:T.jsx(ys,{}),Tn&&T.jsx(XE,{onComplete:ti}),vs&&T.jsx(YE,{onComplete:$n,lobbyCode:ue}),T.jsx(KE,{isVisible:Vi,onAnimationEnd:()=>{pt(!1),wi.current=!1}}),T.jsx(ZE,{isVisible:I,onAnimationEnd:()=>{R(!1),k.current=!1}})]})};let JE={data:""},eA=r=>typeof window=="object"?((r?r.querySelector("#_goober"):window._goober)||Object.assign((r||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:r||JE,tA=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,nA=/\/\*[^]*?\*\/|  +/g,kp=/\n+/g,fs=(r,o)=>{let a="",d="",p="";for(let x in r){let y=r[x];x[0]=="@"?x[1]=="i"?a=x+" "+y+";":d+=x[1]=="f"?fs(y,x):x+"{"+fs(y,x[1]=="k"?"":o)+"}":typeof y=="object"?d+=fs(y,o?o.replace(/([^,])+/g,A=>x.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,w=>/&/.test(w)?w.replace(/&/g,A):A?A+" "+w:w)):x):y!=null&&(x=/^--/.test(x)?x:x.replace(/[A-Z]/g,"-$&").toLowerCase(),p+=fs.p?fs.p(x,y):x+":"+y+";")}return a+(o&&p?o+"{"+p+"}":p)+d},Li={},Um=r=>{if(typeof r=="object"){let o="";for(let a in r)o+=a+Um(r[a]);return o}return r},rA=(r,o,a,d,p)=>{let x=Um(r),y=Li[x]||(Li[x]=(w=>{let E=0,S=11;for(;E<w.length;)S=101*S+w.charCodeAt(E++)>>>0;return"go"+S})(x));if(!Li[y]){let w=x!==r?r:(E=>{let S,I,R=[{}];for(;S=tA.exec(E.replace(nA,""));)S[4]?R.shift():S[3]?(I=S[3].replace(kp," ").trim(),R.unshift(R[0][I]=R[0][I]||{})):R[0][S[1]]=S[2].replace(kp," ").trim();return R[0]})(r);Li[y]=fs(p?{["@keyframes "+y]:w}:w,a?"":"."+y)}let A=a&&Li.g?Li.g:null;return a&&(Li.g=Li[y]),((w,E,S,I)=>{I?E.data=E.data.replace(I,w):E.data.indexOf(w)===-1&&(E.data=S?w+E.data:E.data+w)})(Li[y],o,d,A),y},iA=(r,o,a)=>r.reduce((d,p,x)=>{let y=o[x];if(y&&y.call){let A=y(a),w=A&&A.props&&A.props.className||/^go/.test(A)&&A;y=w?"."+w:A&&typeof A=="object"?A.props?"":fs(A,""):A===!1?"":A}return d+p+(y??"")},"");function Mu(r){let o=this||{},a=r.call?r(o.p):r;return rA(a.unshift?a.raw?iA(a,[].slice.call(arguments,1),o.p):a.reduce((d,p)=>Object.assign(d,p&&p.call?p(o.p):p),{}):a,eA(o.target),o.g,o.o,o.k)}let Wm,$f,qf;Mu.bind({g:1});let ji=Mu.bind({k:1});function sA(r,o,a,d){fs.p=o,Wm=r,$f=a,qf=d}function ms(r,o){let a=this||{};return function(){let d=arguments;function p(x,y){let A=Object.assign({},x),w=A.className||p.className;a.p=Object.assign({theme:$f&&$f()},A),a.o=/ *go\d+/.test(w),A.className=Mu.apply(a,d)+(w?" "+w:"");let E=r;return r[0]&&(E=A.as||r,delete A.as),qf&&E[0]&&qf(A),Wm(E,A)}return p}}var oA=r=>typeof r=="function",bu=(r,o)=>oA(r)?r(o):r,aA=(()=>{let r=0;return()=>(++r).toString()})(),Hm=(()=>{let r;return()=>{if(r===void 0&&typeof window<"u"){let o=matchMedia("(prefers-reduced-motion: reduce)");r=!o||o.matches}return r}})(),lA=20,Gm=(r,o)=>{switch(o.type){case 0:return{...r,toasts:[o.toast,...r.toasts].slice(0,lA)};case 1:return{...r,toasts:r.toasts.map(x=>x.id===o.toast.id?{...x,...o.toast}:x)};case 2:let{toast:a}=o;return Gm(r,{type:r.toasts.find(x=>x.id===a.id)?1:0,toast:a});case 3:let{toastId:d}=o;return{...r,toasts:r.toasts.map(x=>x.id===d||d===void 0?{...x,dismissed:!0,visible:!1}:x)};case 4:return o.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(x=>x.id!==o.toastId)};case 5:return{...r,pausedAt:o.time};case 6:let p=o.time-(r.pausedAt||0);return{...r,pausedAt:void 0,toasts:r.toasts.map(x=>({...x,pauseDuration:x.pauseDuration+p}))}}},hu=[],Xs={toasts:[],pausedAt:void 0},$s=r=>{Xs=Gm(Xs,r),hu.forEach(o=>{o(Xs)})},uA={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},cA=(r={})=>{let[o,a]=O.useState(Xs),d=O.useRef(Xs);O.useEffect(()=>(d.current!==Xs&&a(Xs),hu.push(a),()=>{let x=hu.indexOf(a);x>-1&&hu.splice(x,1)}),[]);let p=o.toasts.map(x=>{var y,A,w;return{...r,...r[x.type],...x,removeDelay:x.removeDelay||((y=r[x.type])==null?void 0:y.removeDelay)||(r==null?void 0:r.removeDelay),duration:x.duration||((A=r[x.type])==null?void 0:A.duration)||(r==null?void 0:r.duration)||uA[x.type],style:{...r.style,...(w=r[x.type])==null?void 0:w.style,...x.style}}});return{...o,toasts:p}},fA=(r,o="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:o,ariaProps:{role:"status","aria-live":"polite"},message:r,pauseDuration:0,...a,id:(a==null?void 0:a.id)||aA()}),Za=r=>(o,a)=>{let d=fA(o,r,a);return $s({type:2,toast:d}),d.id},cr=(r,o)=>Za("blank")(r,o);cr.error=Za("error");cr.success=Za("success");cr.loading=Za("loading");cr.custom=Za("custom");cr.dismiss=r=>{$s({type:3,toastId:r})};cr.remove=r=>$s({type:4,toastId:r});cr.promise=(r,o,a)=>{let d=cr.loading(o.loading,{...a,...a==null?void 0:a.loading});return typeof r=="function"&&(r=r()),r.then(p=>{let x=o.success?bu(o.success,p):void 0;return x?cr.success(x,{id:d,...a,...a==null?void 0:a.success}):cr.dismiss(d),p}).catch(p=>{let x=o.error?bu(o.error,p):void 0;x?cr.error(x,{id:d,...a,...a==null?void 0:a.error}):cr.dismiss(d)}),r};var dA=(r,o)=>{$s({type:1,toast:{id:r,height:o}})},hA=()=>{$s({type:5,time:Date.now()})},Pa=new Map,pA=1e3,gA=(r,o=pA)=>{if(Pa.has(r))return;let a=setTimeout(()=>{Pa.delete(r),$s({type:4,toastId:r})},o);Pa.set(r,a)},mA=r=>{let{toasts:o,pausedAt:a}=cA(r);O.useEffect(()=>{if(a)return;let x=Date.now(),y=o.map(A=>{if(A.duration===1/0)return;let w=(A.duration||0)+A.pauseDuration-(x-A.createdAt);if(w<0){A.visible&&cr.dismiss(A.id);return}return setTimeout(()=>cr.dismiss(A.id),w)});return()=>{y.forEach(A=>A&&clearTimeout(A))}},[o,a]);let d=O.useCallback(()=>{a&&$s({type:6,time:Date.now()})},[a]),p=O.useCallback((x,y)=>{let{reverseOrder:A=!1,gutter:w=8,defaultPosition:E}=y||{},S=o.filter(k=>(k.position||E)===(x.position||E)&&k.height),I=S.findIndex(k=>k.id===x.id),R=S.filter((k,L)=>L<I&&k.visible).length;return S.filter(k=>k.visible).slice(...A?[R+1]:[0,R]).reduce((k,L)=>k+(L.height||0)+w,0)},[o]);return O.useEffect(()=>{o.forEach(x=>{if(x.dismissed)gA(x.id,x.removeDelay);else{let y=Pa.get(x.id);y&&(clearTimeout(y),Pa.delete(x.id))}})},[o]),{toasts:o,handlers:{updateHeight:dA,startPause:hA,endPause:d,calculateOffset:p}}},xA=ji`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,yA=ji`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,wA=ji`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,vA=ms("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${xA} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${yA} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${r=>r.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${wA} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,CA=ji`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,EA=ms("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${r=>r.secondary||"#e0e0e0"};
  border-right-color: ${r=>r.primary||"#616161"};
  animation: ${CA} 1s linear infinite;
`,AA=ji`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,SA=ji`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,bA=ms("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${AA} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${SA} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${r=>r.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,TA=ms("div")`
  position: absolute;
`,IA=ms("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,NA=ji`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,RA=ms("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${NA} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,_A=({toast:r})=>{let{icon:o,type:a,iconTheme:d}=r;return o!==void 0?typeof o=="string"?O.createElement(RA,null,o):o:a==="blank"?null:O.createElement(IA,null,O.createElement(EA,{...d}),a!=="loading"&&O.createElement(TA,null,a==="error"?O.createElement(vA,{...d}):O.createElement(bA,{...d})))},PA=r=>`
0% {transform: translate3d(0,${r*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,OA=r=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${r*-150}%,-1px) scale(.6); opacity:0;}
`,kA="0%{opacity:0;} 100%{opacity:1;}",MA="0%{opacity:1;} 100%{opacity:0;}",DA=ms("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,LA=ms("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,BA=(r,o)=>{let a=r.includes("top")?1:-1,[d,p]=Hm()?[kA,MA]:[PA(a),OA(a)];return{animation:o?`${ji(d)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ji(p)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},FA=O.memo(({toast:r,position:o,style:a,children:d})=>{let p=r.height?BA(r.position||o||"top-center",r.visible):{opacity:0},x=O.createElement(_A,{toast:r}),y=O.createElement(LA,{...r.ariaProps},bu(r.message,r));return O.createElement(DA,{className:r.className,style:{...p,...a,...r.style}},typeof d=="function"?d({icon:x,message:y}):O.createElement(O.Fragment,null,x,y))});sA(O.createElement);var jA=({id:r,className:o,style:a,onHeightUpdate:d,children:p})=>{let x=O.useCallback(y=>{if(y){let A=()=>{let w=y.getBoundingClientRect().height;d(r,w)};A(),new MutationObserver(A).observe(y,{subtree:!0,childList:!0,characterData:!0})}},[r,d]);return O.createElement("div",{ref:x,className:o,style:a},p)},VA=(r,o)=>{let a=r.includes("top"),d=a?{top:0}:{bottom:0},p=r.includes("center")?{justifyContent:"center"}:r.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Hm()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${o*(a?1:-1)}px)`,...d,...p}},zA=Mu`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,au=16,UA=({reverseOrder:r,position:o="top-center",toastOptions:a,gutter:d,children:p,containerStyle:x,containerClassName:y})=>{let{toasts:A,handlers:w}=mA(a);return O.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:au,left:au,right:au,bottom:au,pointerEvents:"none",...x},className:y,onMouseEnter:w.startPause,onMouseLeave:w.endPause},A.map(E=>{let S=E.position||o,I=w.calculateOffset(E,{reverseOrder:r,gutter:d,defaultPosition:o}),R=VA(S,I);return O.createElement(jA,{id:E.id,key:E.id,onHeightUpdate:w.updateHeight,className:E.visible?zA:"",style:R},E.type==="custom"?bu(E.message,E):p?p(E):O.createElement(FA,{toast:E,position:S}))}))},pu=cr;const Tf=({direction:r="down",show:o=!0,className:a="",style:d={}})=>{if(!o)return null;const p=r==="down"?"rotate(180 16 16)":"";return T.jsxs("div",{className:`arrow-hint-container ${r} ${a}`,style:d,children:[T.jsx("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"arrow-hint-svg",children:T.jsxs("g",{transform:p,children:[T.jsx("path",{d:"M16 6v16M16 22l-7-7M16 22l7-7",stroke:"url(#arrow-gradient)",strokeWidth:"3.2",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#arrow-glow)"}),T.jsxs("defs",{children:[T.jsxs("linearGradient",{id:"arrow-gradient",x1:"16",y1:"6",x2:"16",y2:"22",gradientUnits:"userSpaceOnUse",children:[T.jsx("stop",{stopColor:"#7f5fff"}),T.jsx("stop",{offset:"0.5",stopColor:"#2e8bff"}),T.jsx("stop",{offset:"1",stopColor:"#00e0ff"})]}),T.jsx("filter",{id:"arrow-glow",x:"-10",y:"-10",width:"52",height:"52",filterUnits:"userSpaceOnUse",children:T.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"2.5",floodColor:"#7f5fff",floodOpacity:"0.5"})})]})]})}),T.jsx("div",{className:"arrow-hint-text",children:"Tap Here"})]})},WA=({isOpen:r,onClose:o,onConfirm:a,userName:d})=>r?T.jsx("div",{className:"kick-modal",children:T.jsxs("div",{className:"kick-modal-content",children:[T.jsx("h2",{className:"kick-modal-title",children:"Kick User"}),T.jsxs("p",{className:"kick-modal-message",children:["Are you sure you want to kick ",d," from the lobby?"]}),T.jsxs("div",{className:"kick-modal-actions",children:[T.jsx("button",{onClick:a,className:"admin-button admin-button-danger",children:"Yes, Kick User"}),T.jsx("button",{onClick:o,className:"admin-button admin-button-primary",children:"Cancel"})]})]})}):null,HA=({isOpen:r,onClose:o,onConfirm:a})=>r?T.jsx("div",{className:"join-modal",children:T.jsxs("div",{className:"join-modal-content",children:[T.jsx("h2",{className:"join-modal-title",children:"Join Lobby"}),T.jsx("p",{className:"join-modal-message",children:"Are you sure you want to join? You will be paired up with your attendees."}),T.jsxs("div",{className:"join-modal-actions",children:[T.jsx("button",{onClick:a,className:"admin-button admin-button-join",children:"Yes, Join Lobby"}),T.jsx("button",{onClick:o,className:"admin-button admin-button-primary",children:"Cancel"})]})]})}):null,GA=({lobbyState:r,playerCount:o,onStart:a,onEnd:d,lobbyCode:p,currentRound:x})=>{const y=r==="checkin",A=o>=2&&r==="checkin",w=r==="active",E=r==="active",S=r==="terminated",[I,R]=O.useState(null),[k,L]=O.useState({code:!1,qr:!1}),[B,j]=O.useState(!1),V=()=>{R("start")},H=()=>{R("end")},U=()=>{j(!0),R("checkin")},ne=()=>{I==="start"?(a(),pu.success("Rounds started!",{position:"top-center"})):I==="end"&&d(),R(null)},se=()=>R(null),re=(Re,De)=>Re?"progress-arrow active-shimmer":De?"progress-arrow available-shimmer":"progress-arrow inactive",q=y&&!B&&o<6,ue=r==="checkin"&&o>=6,J=r==="active"&&x+1>=12,Ie=()=>{const Re=document.getElementById("modal-qr-svg");if(!Re)return;const Z=new XMLSerializer().serializeToString(Re),Te=new window.Image,fe=512,ce=document.createElement("canvas");ce.width=fe,ce.height=fe;const ge=ce.getContext("2d");Te.onload=()=>{ge.clearRect(0,0,fe,fe),ge.drawImage(Te,0,0,fe,fe),ce.toBlob(pe=>{navigator.clipboard&&navigator.clipboard.write?navigator.clipboard.write([new window.ClipboardItem({"image/png":pe})]).then(()=>{L($=>({...$,qr:!0})),setTimeout(()=>L($=>({...$,qr:!1})),800)}).catch(()=>{ke(pe)}):ke(pe)},"image/png")},Te.onerror=()=>alert("Failed to render QR code image."),Te.src="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(Z)))};function ke(Re){const De=URL.createObjectURL(Re),Z=document.createElement("a");Z.href=De,Z.download=`reuneo-lobby-${p}.png`,document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),URL.revokeObjectURL(De),L(Te=>({...Te,qr:!0})),setTimeout(()=>L(Te=>({...Te,qr:!1})),800)}const be=()=>{navigator.clipboard.writeText(p),L(Re=>({...Re,code:!0})),setTimeout(()=>L(Re=>({...Re,code:!1})),800)};return T.jsxs("div",{className:"lobby-progress-bar",style:{marginTop:"-1rem",height:"40px"},children:[T.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[T.jsx("div",{className:re(y,!1),tabIndex:0,title:"Check-in phase",onClick:U,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"Start Checkin"}),T.jsx(Tf,{direction:"down",show:q})]}),T.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[T.jsx("div",{className:re(w,A&&!w),tabIndex:0,title:A?"Start rounds":"At least 2 players required",onClick:V,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"Start Rounds"}),T.jsx(Tf,{direction:"down",show:ue})]}),T.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[T.jsx("div",{className:re(S,E&&!S),tabIndex:0,title:E?"End rounds":"Cannot end yet",onClick:H,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"End Rounds"}),T.jsx(Tf,{direction:"down",show:J})]}),I&&T.jsx("div",{className:"progress-modal-overlay",children:T.jsx("div",{className:"progress-modal",children:I==="checkin"?T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"progress-modal-title",children:"Have your attendees scan the QR code to join your lobby"}),T.jsx("div",{className:"progress-modal-message",children:"You can start when you have 6-10 people, don't worry new people can join in the next rounds."}),T.jsxs("div",{className:"progress-modal-qr",onClick:Ie,style:{cursor:"pointer",position:"relative"},children:[T.jsx(Vd,{value:`${window.location.origin}/lobby?code=${p}`,size:200,level:"H",includeMargin:!1,bgColor:"#ffffff",fgColor:"#144dff",id:"modal-qr-svg"}),T.jsx("span",{className:"copy-icon modal-copy-icon","aria-label":"Copy",style:{position:"absolute",right:8,bottom:8,background:"#fff",borderRadius:"50%",padding:"2px"},children:T.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[T.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),T.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})}),k.qr&&T.jsx("span",{className:"modal-copied-feedback",style:{position:"absolute",left:"50%",bottom:"-1.5rem",transform:"translateX(-50%)",color:"#28a745",fontWeight:600,fontSize:"0.95rem"},children:"Copied!"})]}),T.jsxs("div",{className:`progress-modal-lobbycode${k.code?" copied":""}`,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[T.jsxs("b",{children:["lobby code: ",p]}),T.jsx("span",{className:"copy-icon modal-copy-icon","aria-label":"Copy",onClick:be,style:{cursor:"pointer"},children:T.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[T.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),T.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})}),k.code&&T.jsx("span",{className:"modal-copied-feedback",style:{color:"#28a745",fontWeight:600,fontSize:"0.95rem"},children:"Copied!"})]}),T.jsx("div",{className:"progress-modal-actions",children:T.jsx("button",{className:"progress-modal-btn confirm",onClick:se,children:"Got it"})})]}):T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"progress-modal-title",children:I==="start"?"Are you sure you want to start rounds?":"Are you sure you want to end the rounds?"}),T.jsx("div",{className:"progress-modal-actions",children:I==="start"?T.jsxs(T.Fragment,{children:[T.jsx("button",{className:"progress-modal-btn cancel",onClick:se,children:"Not Yet"}),T.jsx("button",{className:"progress-modal-btn confirm",onClick:ne,children:"Start"})]}):T.jsxs(T.Fragment,{children:[T.jsx("button",{className:"progress-modal-btn cancel",onClick:se,children:"Keep Going"}),T.jsx("button",{className:"progress-modal-btn confirm danger",onClick:ne,children:"End"})]})})]})})})]})},XA=({players:r})=>{const o=[...r.pairedPlayers?r.pairedPlayers.flat():[],...r.lobbyData?r.lobbyData:[]],a=10,d=o.slice(0,a),p=o.length-a,x=o.length;return T.jsxs("div",{className:"overlapping-profile-list-wrapper",style:{marginTop:"3rem"},children:[T.jsxs("div",{className:"overlapping-profile-list",children:[d.map((y,A)=>T.jsx("img",{src:y.pfp_data||"/assets/player_icon_trans.png",alt:y.name||"Player",className:"overlapping-profile-img",style:{zIndex:A+1}},y.username||y.name||A)),p>0&&T.jsxs("span",{className:"overlapping-profile-overflow",children:["+ ",p]})]}),T.jsxs("div",{className:"overlapping-profile-list-label",style:{marginTop:"0.5rem",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.1)"},children:["People joined: ",x]})]})},YA=()=>{const{user:r,userProfile:o,checkAuth:a,permissions:d}=O.useContext(Nr),p=zr(),x=xi(),A=new URLSearchParams(x.search).get("code"),[w,E]=O.useState(A||"test"),S=async()=>{await fetch(window.server_url+"/reset_lobby_timer",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,lobby_code:w}})};O.useEffect(()=>{A||(console.log("No lobby code found in URL, using default 'test' value"),(async()=>{try{const Ne=localStorage.getItem("access_token"),mt=await fetch(window.server_url+"/view_my_active_lobbies",{headers:{Authorization:`Bearer ${Ne}`}});if(mt.ok){const Oe=await mt.json();if(console.log("Active lobbies response:",Oe),Oe&&Oe.lobbies&&Oe.lobbies.length>0){const wt=Oe.lobbies[0];E(wt),window.history.replaceState({},"",`/admin_lobby_view?code=${wt}`)}}}catch(Ne){console.error("Error fetching active lobby:",Ne)}})())},[A]);const[I,R]=O.useState(!1),[k,L]=O.useState(null),[B,j]=O.useState(!1),[V,H]=O.useState(null),[U,ne]=O.useState(null),[se,re]=O.useState(null),[q,ue]=O.useState(null),[J,Ie]=O.useState(null),[ke,be]=O.useState({}),[Re,De]=O.useState([]),[Z,Te]=O.useState(0),fe=((U==null?void 0:U.length)||0)+((V==null?void 0:V.length)*2||0),[ce,ge]=O.useState(!1);O.useEffect(()=>{if(a(),d!=="admin"&&d!=="organizer"){p("/");return}const Be=async mt=>{if(ke[mt])return ke[mt];try{const Oe=await fetch(`${window.server_url}/pfp_small_icon?username=${encodeURIComponent(mt)}`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(Oe.ok){let wt=await Oe.text();wt.startsWith('"')&&wt.endsWith('"')&&(wt=wt.slice(1,-1));const Ht=wt.startsWith("data:image")?wt:`data:image/jpeg;base64,${wt}`;return be($t=>({...$t,[mt]:Ht})),Ht}return null}catch(Oe){return console.error(`Error fetching profile picture for ${mt}:`,Oe),null}},Ne=setInterval(async()=>{try{const mt=await fetch(window.server_url+"/admin_lobby_data",{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,lobby_code:w}});if(mt.ok){const Oe=await mt.json();if(console.log("Admin lobby data:",w,Oe),Oe.lobby_state==="active"&&Te(wt=>Oe.current_round>wt?Oe.current_round:wt),Oe.lobby_state==="terminated"&&Te(0),Oe&&Oe.unpaired_players){const wt=await Promise.all(Oe.unpaired_players.map(async $t=>{const Rt=await Be($t.username);return{...$t,pfp_data:Rt}})),Ht=await Promise.all((Oe.pairs_data||[]).map(async $t=>{const Rt=await Be($t[0].username),Tt=await Be($t[1].username);return[{...$t[0],pfp_data:Rt},{...$t[1],pfp_data:Tt}]}));ne(wt),H(Ht),re(Oe.round_time_left),ue(Oe.lobby_state),Ie(Oe.lobby_duration||300),De(Oe.custom_tags||[])}else console.error("Invalid lobby data structure:",Oe),ne([]),H([])}else console.error("Failed to fetch admin lobby data:",mt.status)}catch(mt){console.error("Error fetching admin lobby data:",mt)}},1e3);return()=>clearInterval(Ne)},[ke]);const pe=Be=>{L(Be),R(!0)},$=()=>{R(!1),L(null)},de=()=>{k&&fetch(window.server_url+"/kick_user",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"},body:JSON.stringify({username:k.username,lobby_code:w})}).then(Be=>{Be.ok?console.log(`User ${k.name} kicked successfully`):console.error(`Failed to kick user ${k.name}`)}).catch(Be=>{console.error("Error kicking user:",Be)}).finally(()=>{$()})},Ge=()=>{j(!0)},We=()=>{j(!1)},ut=()=>{p(`/lobby?code=${w}`),We()};async function Ee(){const Be=document.getElementById("admin-qr-svg");if(!Be)return;const mt=new XMLSerializer().serializeToString(Be),Oe=new window.Image,wt=512,Ht=document.createElement("canvas");Ht.width=wt,Ht.height=wt;const $t=Ht.getContext("2d");Oe.onload=()=>{$t.clearRect(0,0,wt,wt),$t.drawImage(Oe,0,0,wt,wt),Ht.toBlob(Rt=>{navigator.clipboard&&navigator.clipboard.write?navigator.clipboard.write([new window.ClipboardItem({"image/png":Rt})]).then(()=>{pu.success("QR code copied to clipboard!")}).catch(()=>{at(Rt)}):at(Rt)},"image/png")},Oe.onerror=()=>pu.error("Failed to generate QR code image."),Oe.src="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(mt)))}function at(Be){const Ne=URL.createObjectURL(Be),mt=document.createElement("a");mt.href=Ne,mt.download=`reuneo-lobby-${w}.png`,document.body.appendChild(mt),mt.click(),document.body.removeChild(mt),URL.revokeObjectURL(Ne),pu.success("QR code downloaded!")}const He=async()=>{await fetch(window.server_url+"/start_rounds",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,lobby_code:w}})},rt=async()=>{(await fetch(window.server_url+"/terminate_lobby",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,lobby_code:w}})).ok&&p("/")};return T.jsxs(T.Fragment,{children:[T.jsx(UA,{position:"top-center"}),T.jsxs("div",{className:"admin-lobby-container",children:[T.jsx("button",{onClick:S,children:"Reset Lobby Timer"}),T.jsx("div",{className:"admin-view-logo",style:{cursor:"pointer"},children:T.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Reuneo Logo",style:{maxWidth:"85px",height:"auto",objectFit:"contain",transition:"transform 0.3s ease"},onClick:()=>p("/")})}),T.jsx(GA,{lobbyState:q,playerCount:fe,onStart:He,onEnd:rt,lobbyCode:w,currentRound:Z}),T.jsx(XA,{players:{pairedPlayers:V,lobbyData:U}}),T.jsxs("div",{className:"admin-lobby-dropdown-toggle",onClick:()=>ge(Be=>!Be),style:{cursor:"pointer",background:"var(--primary-color)",color:"#f5f7ff",fontWeight:700,textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",fontSize:".75rem",borderRadius:ce?"14px 14px 0 0":"14px",padding:"0.5rem 1rem",margin:"0 auto",maxWidth:420,boxShadow:"0 2px 8px rgba(20,77,255,0.08)",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s",letterSpacing:"0.5px"},children:[ce?"Hide Controls":"More Controls",T.jsx("span",{style:{marginLeft:12,fontSize:"1.2em",transition:"transform 0.3s",display:"inline-block",transform:ce?"rotate(180deg)":"rotate(0deg)"},children:""})]}),T.jsxs("div",{className:"admin-lobby-body",style:{maxHeight:ce?1e3:0,overflow:"hidden",transition:"max-height 0.5s cubic-bezier(0.4,0,0.2,1)",opacity:ce?1:0,pointerEvents:ce?"auto":"none",marginBottom:ce?"2rem":0},children:[T.jsxs("div",{className:"admin-lobby-qr",onClick:Ee,style:{cursor:"pointer"},children:[T.jsxs("span",{className:"qr-label",style:{display:"flex",alignItems:"center",gap:"0.4rem",marginBottom:"0.5rem"},children:["People scan to join",T.jsx("span",{className:"copy-icon","aria-label":"Copy",children:T.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[T.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),T.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})})]}),T.jsx("div",{style:{position:"relative",display:"inline-block"},children:T.jsx(Vd,{value:`${window.location.origin}/lobby?code=${w}`,size:140,level:"H",includeMargin:!1,bgColor:"#ffffff",fgColor:"#144dff",id:"admin-qr-svg"})}),T.jsxs("div",{className:"lobby-code-display",onClick:()=>{navigator.clipboard.writeText(w);const Be=document.querySelector(".lobby-code-display");Be.classList.add("copied"),setTimeout(()=>Be.classList.remove("copied"),250)},children:[T.jsx("span",{className:"lobby-code-label",children:"lobby code:"}),T.jsx("span",{className:"lobby-code-value",children:w}),T.jsx("span",{className:"copy-icon","aria-label":"Copy",children:T.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[T.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),T.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})})]})]}),T.jsxs("div",{className:"admin-lobby-event-settings",children:[T.jsxs("div",{className:"admin-profile",children:[T.jsx("img",{src:o!=null&&o.image_data?`data:image/jpeg;base64,${o.image_data}`:"/assets/player_icon_trans.png",alt:"Your Profile",className:"admin-profile-picture"}),T.jsx("span",{className:"admin-profile-name",children:o!=null&&o.name?o.name.slice(0,20):r==null?void 0:r.slice(0,20)})]}),T.jsx("button",{onClick:Ge,className:"page-control-button page-control-join",style:{marginTop:".5rem"},children:"Join Rounds"}),T.jsxs("div",{className:"setting-item",style:{padding:"1rem"},children:[T.jsxs("span",{className:"setting-label",children:["Round Duration: ",T.jsxs("span",{className:"setting-value",children:[Math.floor(J/60)," min"]})]}),T.jsx("span",{className:"setting-label",style:{},children:"Tags:"}),Re&&Re.length>0&&T.jsx("div",{className:"setting-item",children:T.jsxs("div",{className:"tags-container",children:[Re.slice(0,3).map((Be,Ne)=>T.jsx("span",{className:"tag-pill",children:Be},Ne)),Re.length>3&&T.jsxs("span",{className:"tag-pill more-tags",children:["+",Re.length-3," more"]})]})})]})]}),T.jsx("div",{className:"admin-lobby-actions"})]}),(q==="active"||q==="interrim")&&se&&T.jsx("div",{className:"admin-lobby-timer-container",children:T.jsxs("div",{className:"admin-lobby-timer-glass",children:[T.jsx(zd,{isPlaying:q==="active",duration:J,initialRemainingTime:se,colors:["#144dff"],size:90,strokeWidth:12,trailColor:"url(#trailGradient)",onComplete:()=>({shouldRepeat:!1}),strokeLinecap:"round",children:({remainingTime:Be})=>{const Ne=Math.floor(Be/60),mt=Math.floor(Be%60);return T.jsxs("span",{className:`timer-text ${Be<=10?"timer-text-fadescale":""}`,children:[Ne,":",String(mt).padStart(2,"0")]})}},`${q}-${Math.floor(se)}`),T.jsx("span",{className:"timer-subtext",children:"round time left"}),T.jsx("svg",{width:"0",height:"0",children:T.jsx("defs",{children:T.jsxs("linearGradient",{id:"trailGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[T.jsx("stop",{offset:"0%",stopColor:"#e0e7ff"}),T.jsx("stop",{offset:"100%",stopColor:"#f5f7ff"})]})})})]})}),q!=="checkin"&&T.jsxs("div",{className:"admin-lobby-stats",children:[T.jsxs("div",{className:"stat-card",children:[T.jsx("div",{className:"stat-title",children:"Total Players"}),T.jsx("div",{className:"stat-value",children:((U==null?void 0:U.length)||0)+((V==null?void 0:V.length)*2||0)})]}),T.jsxs("div",{className:"stat-card",children:[T.jsx("div",{className:"stat-title",children:"Paired Players"}),T.jsx("div",{className:"stat-value",children:(V==null?void 0:V.length)*2||0})]}),T.jsxs("div",{className:"stat-card",children:[T.jsx("div",{className:"stat-title",children:"Unpaired Players"}),T.jsx("div",{className:"stat-value",children:(U==null?void 0:U.length)||0})]})]}),V&&q!=="checkin"&&T.jsx("div",{className:"admin-lobby-players",children:T.jsxs("div",{className:"player-section",children:[T.jsxs("div",{className:"section-header",children:["Paired Players: ",T.jsx("span",{className:"stat-value",style:{fontSize:"1.3rem"},children:(V==null?void 0:V.length)*2||0})]}),T.jsx("div",{className:"player-grid",children:V.map((Be,Ne)=>T.jsxs("div",{className:"paired-player-card",children:[T.jsxs("div",{className:"paired-player",onClick:()=>pe(Be[0]),children:[T.jsx("img",{src:Be[0].pfp_data,alt:Be[0].name,className:"paired-player-avatar"}),T.jsx("h3",{className:"paired-player-name",children:Be[0].name})]}),T.jsxs("div",{className:"paired-player",onClick:()=>pe(Be[1]),children:[T.jsx("img",{src:Be[1].pfp_data,alt:Be[1].name,className:"paired-player-avatar"}),T.jsx("h3",{className:"paired-player-name",children:Be[1].name})]})]},Ne))})]})}),U&&T.jsx("div",{className:"admin-lobby-players",children:T.jsxs("div",{className:"player-section",children:[T.jsxs("div",{className:"section-header",children:[q==="checkin"?"People Joined":"Unpaired Players",": ",T.jsx("span",{className:"stat-value",style:{fontSize:"1.3rem"},children:(U==null?void 0:U.length)||0})]}),T.jsx("div",{className:"player-grid",children:U.map((Be,Ne)=>T.jsxs("div",{className:"player-card",onClick:()=>pe(Be),children:[T.jsx("img",{src:Be.pfp_data,alt:Be.name,className:"player-avatar"}),T.jsx("h3",{className:"player-name",children:Be.name})]},Ne))})]})}),T.jsx(HA,{isOpen:B,onClose:We,onConfirm:ut}),T.jsx(WA,{isOpen:I,onClose:$,onConfirm:de,userName:(k==null?void 0:k.name)||"this user"})]})]})},KA=()=>{const r=zr(),{user:o}=O.useContext(Nr),a=()=>{window.location.href="https://reunio.app/become-an-organizer"};return T.jsxs("div",{className:"product-selection-container",children:[T.jsxs("video",{className:"background-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,children:[T.jsx("source",{src:"/assets/purchase_plan_video.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]}),T.jsxs("div",{className:"product-selection-content",children:[T.jsx("div",{className:"product-selection-header",children:T.jsx("h1",{children:"Product Selection"})}),T.jsxs("div",{className:"plans-section",children:[T.jsx("h2",{children:"Available Plans"}),T.jsxs("div",{className:"plan-card",children:[T.jsx("h3",{children:"Organizer Plan"}),T.jsxs("div",{className:"plan-description",children:[T.jsx("p",{children:"Create experiences for your community with our beta plan."}),T.jsxs("ul",{children:[T.jsx("li",{children:"Create unlimited experiences"}),T.jsx("li",{children:"Access to organizer dashboard"}),T.jsx("li",{children:"Priority customer support"})]})]}),T.jsx("button",{className:"purchase-button",onClick:a,children:"Contact Us"})]})]}),T.jsx("button",{className:"back-button",onClick:()=>r("/"),children:"Home"})]})]})},ZA=()=>{const{user:r,userProfile:o,checkAuth:a,permissions:d}=O.useContext(Nr),[p,x]=O.useState(""),[y,A]=O.useState(""),[w,E]=O.useState(!1),[S,I]=O.useState(""),[R,k]=O.useState(!1),[L,B]=O.useState([]),[j,V]=O.useState(""),[H,U]=O.useState("5"),[ne,se]=O.useState("0"),re=8,q=zr(),ue=O.useRef(null);O.useEffect(()=>{window.scrollTo(0,0),r&&(x(r),A(r)),ue.current&&ue.current.focus()},[r]);const J=Z=>{const Te=/^[a-z0-9]+$/;return Z.length>=2&&Te.test(Z)},Ie=Z=>{const Te=Z.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");A(Te),k(!0),setTimeout(()=>{k(!1)},500)},ke=()=>{j.trim()&&!L.includes(j.trim())&&(B([...L,j.trim()]),V(""))},be=Z=>{B(L.filter(Te=>Te!==Z))},Re=Z=>{Z.key==="Enter"&&j.trim()&&(Z.preventDefault(),ke())},De=async Z=>{if(Z.preventDefault(),!J(y)){I("Lobby code must be at least 2 characters long and contain only lowercase letters and numbers");return}E(!0),I("");const Te=parseInt(H)*60+parseInt(ne);try{const fe=await fetch(window.server_url+"/create_lobby",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"},body:JSON.stringify({lobby_code:y,custom_tags:L,lobby_duration:Te})});if(fe.ok)console.log("Lobby created successfully"),console.log(await fe.json()),q(`/admin_lobby_view?code=${y}`);else{const ce=await fe.json();I(ce.message||"Failed to create lobby"),console.error("Failed to create lobby")}}catch(fe){I("An error occurred while creating the lobby"),console.error("Error creating lobby:",fe)}finally{E(!1)}};return T.jsxs("div",{className:"create-lobby-background",children:[T.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Reunio Logo",className:"logo-image",onClick:()=>q(-1)}),T.jsxs("div",{className:"create-lobby-container",children:[T.jsx("h1",{className:"create-lobby-title",children:"Create a New Lobby"}),T.jsxs("form",{onSubmit:De,className:"create-lobby-form",children:[T.jsxs("div",{className:"form-group",children:[T.jsx("label",{htmlFor:"lobbyCode",children:"Lobby Code"}),T.jsx("input",{ref:ue,type:"text",id:"lobbyCode",value:y,onChange:Ie,placeholder:"Enter lobby code (lowercase letters and numbers only)",required:!0,className:`form-input ${R?"typing":""}`,autoComplete:"off"}),T.jsx("div",{className:"input-hint",children:"lowercase letters and numbers only"})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Round Duration"}),T.jsxs("div",{className:"duration-input-container",children:[T.jsxs("div",{className:"duration-input-group",children:[T.jsx("input",{type:"number",id:"minutes",value:H,onChange:Z=>{const Te=Z.target.value;(Te===""||parseInt(Te)>0&&parseInt(Te)<=re)&&(U(Te),parseInt(Te)===re&&se("0"))},min:"1",max:re,placeholder:`1-${re}`,className:"form-input duration-input",autoComplete:"off"}),T.jsx("label",{htmlFor:"minutes",className:"duration-label",children:"Minutes"})]}),T.jsxs("div",{className:"duration-input-group",children:[T.jsx("input",{type:"number",id:"seconds",value:ne,onChange:Z=>{const Te=Z.target.value;(Te===""||parseInt(Te)>=0&&parseInt(Te)<=59)&&se(Te)},min:"0",max:"59",placeholder:"0-59",className:"form-input duration-input",autoComplete:"off",disabled:parseInt(H)===re}),T.jsx("label",{htmlFor:"seconds",className:"duration-label",children:"Seconds"})]})]}),T.jsx("div",{className:"input-hint",children:"Maximum total duration is 5 minutes"})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{htmlFor:"tagInput",children:"Matchmaking Tags"}),T.jsxs("div",{className:"tag-input-container",children:[T.jsx("input",{type:"text",id:"tagInput",value:j,onChange:Z=>V(Z.target.value),onKeyDown:Re,placeholder:"Add tags (press + to add)",className:"form-input",autoComplete:"off"}),T.jsx("button",{type:"button",onClick:ke,className:"tag-add-button",children:"+"})]}),L.length>0&&T.jsx("div",{className:"tag-list",children:L.map((Z,Te)=>T.jsxs("div",{className:"tag-item",children:[Z,T.jsx("button",{type:"button",onClick:()=>be(Z),className:"tag-remove-button",children:""})]},Te))}),T.jsx("div",{className:"input-hint",children:"If you want to match people based on role/interests"})]}),S&&T.jsx("div",{className:"error-message",children:S}),T.jsx("button",{type:"submit",className:"submit-button",disabled:w,children:w?"Creating...":"Create Lobby"})]})]})]})},$A=5e3,qA=()=>{const{checkAuth:r,permissions:o,user:a}=O.useContext(Nr),d=zr(),[p,x]=O.useState([]),[y,A]=O.useState(!0),[w,E]=O.useState(null),[S,I]=O.useState(!1);return O.useEffect(()=>{r()},[r]),O.useEffect(()=>{a==="topaz"&&o==="admin"?I(!0):o!==null&&a!==null&&d("/")},[o,a,d]),O.useEffect(()=>{if(!S)return;let R=!0,k,L=!0;const B=async()=>{L&&A(!0),E(null);try{const j=localStorage.getItem("access_token");if(!j)return;const V=await fetch(window.server_url+"/admin_all_lobbies",{headers:{Authorization:`Bearer ${j}`}});if(!V.ok)throw new Error("Failed to fetch lobbies");const H=await V.json();if(H.status!=="success"||!Array.isArray(H.lobbies))throw new Error("Invalid response format");if(!R)return;x(H.lobbies),console.log("Received lobbies data:",H.lobbies)}catch(j){R&&E(j.message||"Error fetching lobbies")}finally{R&&L&&A(!1),L=!1,k=setTimeout(B,$A)}};return B(),()=>{R=!1,k&&clearTimeout(k)}},[S]),y?T.jsx("div",{className:"master-lobby-container",children:T.jsxs("div",{className:"loading-state",children:[T.jsx("div",{className:"loading-spinner"}),T.jsx("p",{children:"Loading lobbies..."})]})}):w&&p.length===0?T.jsx("div",{className:"master-lobby-container",children:T.jsx("div",{className:"error-state",children:T.jsx("p",{children:w})})}):p.length===0?T.jsx("div",{className:"master-lobby-container",children:T.jsx("div",{className:"empty-state",children:T.jsx("p",{children:"No active lobbies found"})})}):T.jsxs("div",{className:"master-lobby-container",children:[w&&T.jsxs("div",{className:"error-banner",style:{backgroundColor:"#f8d7da",color:"#721c24",padding:"0.75rem",marginBottom:"1rem",borderRadius:"0.25rem",border:"1px solid #f5c6cb"},children:[w," (showing last known data)"]}),T.jsx("div",{className:"master-lobby-grid",children:p.map(R=>T.jsx("div",{className:"lobby-tile",children:T.jsxs("div",{className:"lobby-tile-content",children:[T.jsx("h3",{className:"lobby-code",children:R.code}),T.jsxs("div",{className:"lobby-stats",children:[T.jsxs("span",{className:"player-count",children:[R.player_count," players"]}),T.jsx("span",{className:"lobby-state",children:R.lobby_state})]}),T.jsxs("div",{style:{fontSize:"0.7rem",color:"#666",marginTop:"0.5rem"},children:["Debug: player_count=",R.player_count,", lobby_state=",R.lobby_state]})]})},R.code))})]})},Xm=({profile:r})=>{var w,E,S,I;const o="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z",[a,d]=O.useState(!1),p={card:{backgroundColor:"#ffffff",borderRadius:"16px",boxShadow:"0 8px 24px rgba(0,0,0,0.12)",padding:"32px",margin:"24px",transition:"all 0.3s ease-in-out",cursor:"pointer",maxWidth:"400px",border:"1px solid rgba(234,234,234,0.5)","&:hover":{transform:"translateY(-8px)",boxShadow:"0 12px 32px rgba(0,0,0,0.18)"}},heading:{color:"#1a202c",fontSize:"1.75rem",marginBottom:"16px",fontWeight:"700",letterSpacing:"-0.5px"},image:{width:"120px",height:"120px",borderRadius:"60px",objectFit:"cover",border:"3px solid #edf2f7",boxShadow:"0 4px 12px rgba(0,0,0,0.08)"},description:{color:"#4a5568",fontSize:"1.1rem",lineHeight:"1.7",marginBottom:"16px",display:"-webkit-box",WebkitLineClamp:a?"unset":3,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:a?"unset":"ellipsis"},expandButton:{background:"none",border:"none",color:"#3182ce",cursor:"pointer",padding:"8px 0",fontSize:"0.95rem",fontWeight:"600",transition:"color 0.2s ease"},linksContainer:{marginTop:"24px",padding:"16px 0",borderTop:"1px solid #edf2f7"},linkItem:{display:"flex",alignItems:"center",gap:"12px",color:"#0077B5",textDecoration:"none",padding:"8px 0",transition:"transform 0.2s ease","&:hover":{transform:"translateX(4px)"}}},x=O.useRef(null),[y,A]=O.useState(!1);return O.useEffect(()=>{if(x.current){const R=x.current;A(R.scrollHeight>R.clientHeight)}},[r.description]),T.jsxs("div",{className:"profile-card",style:p.card,children:[T.jsx("h2",{style:p.heading,children:r.name}),T.jsx("img",{src:`data:image/jpeg;base64,${r.small_image_data}`,alt:`${r.name}'s profile`,style:p.image}),T.jsxs("div",{style:{marginTop:"24px"},children:[T.jsx("p",{ref:x,style:p.description,children:r.description}),y&&T.jsx("button",{style:p.expandButton,onClick:R=>{R.stopPropagation(),d(!a)},children:a?" Show less":" Read more"})]}),T.jsx("div",{style:p.linksContainer,children:(w=r.media_link)!=null&&w.startsWith("https://www.linkedin.com/")?T.jsxs(T.Fragment,{children:[T.jsxs("a",{href:r.media_link,target:"_blank",rel:"noopener noreferrer",style:p.linkItem,children:[T.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:T.jsx("path",{d:o})}),T.jsx("span",{style:{fontWeight:"600"},children:"LinkedIn Profile"})]}),r.other_link&&T.jsx("a",{href:r.other_link,target:"_blank",rel:"noopener noreferrer",style:p.linkItem,children:T.jsxs("span",{children:[" ",((E=r.other_link)==null?void 0:E.length)>35?r.other_link.substring(0,35)+"...":r.other_link]})})]}):T.jsxs(T.Fragment,{children:[r.media_link&&T.jsx("a",{href:r.media_link,target:"_blank",rel:"noopener noreferrer",style:p.linkItem,children:T.jsxs("span",{children:[" ",((S=r.media_link)==null?void 0:S.length)>35?r.media_link.substring(0,35)+"...":r.media_link]})}),r.other_link&&T.jsx("a",{href:r.other_link,target:"_blank",rel:"noopener noreferrer",style:p.linkItem,children:T.jsxs("span",{children:[" ",((I=r.other_link)==null?void 0:I.length)>35?r.other_link.substring(0,35)+"...":r.other_link]})})]})})]})};function QA(){const[r,o]=O.useState([]),[a,d]=O.useState(null),[p,x]=O.useState(!1),[y,A]=O.useState(!1),[w,E]=O.useState(!1),S=async()=>{try{const L=localStorage.getItem("access_token"),B=await fetch(`${window.server_url}/cofounder_data`,{headers:{Authorization:`Bearer ${L}`}});if(!B.ok)throw new Error("Failed to fetch profiles");const j=await B.json();o(j),console.log("PROFILE DATA",j)}catch(L){console.error("Error fetching profiles:",L),d(L.message)}},I=async()=>{const L=localStorage.getItem("access_token"),B=await fetch(`${window.server_url}/delete_community_profile`,{headers:{Authorization:`Bearer ${L}`,"Content-Type":"application/json"},method:"POST"});if(!B.ok)throw new Error("Failed to delete community profile");const j=await B.json();console.log(j),await S()},R=async()=>{E(!0);try{await I(),A(!1),setTimeout(()=>{E(!1)},1e3)}catch(L){console.error("Error deleting profile:",L),E(!1)}},k={deleteButton:{backgroundColor:"#ff4444",color:"white",border:"none",borderRadius:"8px",padding:"10px 20px",fontSize:"1rem",cursor:"pointer",marginLeft:"10px",transition:"background-color 0.2s ease",fontWeight:"600"},deletePopup:{overlay:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:2e3},popup:{backgroundColor:"#fff",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)",textAlign:"center",maxWidth:"400px",width:"90%"},title:{color:"#333",marginBottom:"1rem",fontSize:"1.5rem"},message:{color:"#666",marginBottom:"1.5rem",fontSize:"1rem"},buttonContainer:{display:"flex",gap:"1rem",justifyContent:"center"},cancelButton:{backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"8px",padding:"10px 20px",cursor:"pointer",fontSize:"1rem",transition:"background-color 0.2s ease"},confirmButton:{backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"8px",padding:"10px 20px",cursor:"pointer",fontSize:"1rem",transition:"background-color 0.2s ease"}},headerContainer:{display:"flex",alignItems:"center",marginBottom:"30px",flexDirection:"column",width:"100%",maxWidth:"1200px",margin:"0 auto",padding:"20px"},headerTitle:{fontSize:"2.5rem",color:"#333",marginBottom:"20px",fontWeight:"600"},buttonContainer:{display:"flex",alignItems:"center",gap:"15px"},createButton:{backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",cursor:"pointer",transition:"background-color 0.2s ease",fontWeight:"600",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}};return O.useEffect(()=>{S()},[]),a?T.jsxs("div",{children:["Error loading profiles: ",a]}):T.jsxs("div",{className:"profile-page",children:[T.jsxs("div",{style:k.headerContainer,children:[T.jsx("h1",{style:k.headerTitle,children:"Co-Founder Profiles"}),T.jsxs("div",{style:k.buttonContainer,children:[T.jsx("button",{style:k.createButton,onMouseOver:L=>L.target.style.backgroundColor="#45a049",onMouseOut:L=>L.target.style.backgroundColor="#4CAF50",onClick:()=>x(!0),children:"Create Profile"}),T.jsx("button",{style:k.deleteButton,onClick:()=>A(!0),onMouseOver:L=>L.target.style.backgroundColor="#ff0000",onMouseOut:L=>L.target.style.backgroundColor="#ff4444",children:"Delete Profile"})]})]}),p&&T.jsx(e4,{onClose:()=>x(!1)}),y&&T.jsx("div",{style:k.deletePopup.overlay,children:T.jsxs("div",{style:k.deletePopup.popup,children:[T.jsx("h3",{style:k.deletePopup.title,children:"Delete Profile"}),T.jsx("p",{style:k.deletePopup.message,children:"Are you sure you want to delete your community profile? This action cannot be undone."}),T.jsxs("div",{style:k.deletePopup.buttonContainer,children:[T.jsx("button",{style:k.deletePopup.cancelButton,onClick:()=>A(!1),disabled:w,children:"Cancel"}),T.jsx("button",{style:k.deletePopup.confirmButton,onClick:R,disabled:w,children:w?"Deleting...":"Delete"})]})]})}),T.jsx("div",{className:"profile-container",children:T.jsx("div",{className:"profile-content",children:r&&r.map(L=>T.jsx(Xm,{profile:L},L.id||`profile-${L.name}-${Math.random()}`))})})]})}const JA=({onClose:r})=>(O.useEffect(()=>{const o=setTimeout(()=>{r()},1e3);return()=>clearTimeout(o)},[]),T.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",padding:"20px",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",zIndex:1e3},children:T.jsx("h1",{children:"You need to login to create a community profile"})})),e4=({onClose:r})=>{const{user:o,userProfile:a,checkAuth:d,permissions:p}=O.useContext(Nr);if(!a)return T.jsx(JA,{onClose:r});const[x,y]=O.useState(""),[A,w]=O.useState(""),[E,S]=O.useState(""),[I,R]=O.useState(!1),[k,L]=O.useState(null),[B,j]=O.useState(null),[V,H]=O.useState(),U=async(re,q,ue,J)=>{localStorage.getItem("access_token");const Ie=await fetch(`${window.server_url}/create_community_profile`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"},body:JSON.stringify({name:re,description:q,small_image_data:a.small_image_data,media_link:ue,other_link:J})});if(Ie.ok)return await Ie.json(),!0;{const ke=await Ie.json();return console.log("ERROR DATA",ke),H(ke.detail),!1}},ne=async re=>{re.preventDefault(),R(!0),await U(k.name,k.description,k.media_link,k.other_link)&&(H(null),R(!1),setTimeout(()=>{r()},1e3))};O.useEffect(()=>{L({name:a.name,small_image_data:a.small_image_data,description:x,media_link:A,other_link:E})},[x,A,E,a]);const se={overlay:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,overflow:"auto",padding:"20px",boxSizing:"border-box"},popup:{backgroundColor:"#fff",padding:"1.5rem",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)",position:"relative",width:"95%",maxWidth:"500px",maxHeight:"90vh",overflow:"auto",margin:"0 auto",transform:"translateX(0)",left:"0",right:"0"},closeButton:{position:"absolute",top:"10px",right:"10px",border:"none",background:"none",fontSize:"1.8rem",cursor:"pointer",color:"#ff4444",transition:"color 0.2s ease",padding:"5px"},form:{display:"flex",flexDirection:"column",gap:"1rem",marginTop:"1rem"},textarea:{padding:"0.8rem",borderRadius:"8px",border:"1px solid #ddd",minHeight:"100px",fontSize:"16px",resize:"vertical",width:"100%",boxSizing:"border-box"},input:{padding:"0.8rem",borderRadius:"8px",border:"1px solid #ddd",fontSize:"16px",width:"100%",boxSizing:"border-box"},submitButton:{backgroundColor:"#4CAF50",color:"white",padding:"0.8rem",border:"none",borderRadius:"8px",fontSize:"1rem",cursor:"pointer",transition:"background-color 0.2s ease",marginTop:"0.5rem",width:"100%",boxSizing:"border-box"},title:{color:"#333",marginBottom:"1rem",fontSize:"1.5rem",textAlign:"center",wordWrap:"break-word"}};return T.jsx("div",{className:"popup-overlay",style:se.overlay,children:T.jsxs("div",{className:"create-profile-popup",style:se.popup,children:[V&&T.jsx("p",{style:{color:"red",textAlign:"center"},children:V}),T.jsxs("h2",{style:se.title,children:["Create Community Profile ",V]}),k&&T.jsx(Xm,{profile:k,edit:!0}),T.jsxs("form",{onSubmit:ne,style:se.form,children:[T.jsx("textarea",{name:"description",placeholder:"Tell us about yourself...",value:x,onChange:re=>y(re.target.value),style:se.textarea}),T.jsx("input",{type:"text",name:"media_link",placeholder:"Add your social media link (optional)",value:A,onChange:re=>w(re.target.value),style:se.input}),T.jsx("input",{type:"text",name:"other_link",placeholder:"Add your website or other link (optional)",value:E,onChange:re=>S(re.target.value),style:se.input}),T.jsx("button",{type:"submit",style:se.submitButton,onMouseOver:re=>re.target.style.backgroundColor="#45a049",onMouseOut:re=>re.target.style.backgroundColor="#4CAF50",children:I?"Creating...":"Create Profile"})]}),T.jsx("button",{onClick:r,style:se.closeButton,onMouseOver:re=>re.target.style.color="#ff0000",onMouseOut:re=>re.target.style.color="#ff4444",children:""})]})})};Xx.createRoot(document.getElementById("root")).render(T.jsx(O.StrictMode,{children:T.jsx(Yx,{children:T.jsxs(Py,{basename:"/",children:[T.jsx(IE,{}),T.jsxs(ay,{children:[T.jsx(Jr,{path:"/",element:T.jsx(TE,{})}),T.jsx(Jr,{path:"/login",element:T.jsx(NE,{})}),T.jsx(Jr,{path:"/signup",element:T.jsx(SE,{})}),T.jsx(Jr,{path:"/logout",element:T.jsx(RE,{})}),T.jsx(Jr,{path:"/lobby",element:T.jsx(QE,{})}),T.jsx(Jr,{path:"/admin_lobby_view",element:T.jsx(YA,{})}),T.jsx(Jr,{path:"/create_lobby",element:T.jsx(ZA,{})}),T.jsx(Jr,{path:"/product-selection",element:T.jsx(KA,{})}),T.jsx(Jr,{path:"/master_lobby_view",element:T.jsx(qA,{})}),T.jsx(Jr,{path:"/mycf",element:T.jsx(QA,{})})]})]})})}));
