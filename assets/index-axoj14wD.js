(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))d(p);new MutationObserver(p=>{for(const x of p)if(x.type==="childList")for(const y of x.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&d(y)}).observe(document,{childList:!0,subtree:!0});function a(p){const x={};return p.integrity&&(x.integrity=p.integrity),p.referrerPolicy&&(x.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?x.credentials="include":p.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function d(p){if(p.ep)return;p.ep=!0;const x=a(p);fetch(p.href,x)}})();var Ql=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dp(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var tf={exports:{}},ya={},nf={exports:{}},xt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D0;function Bx(){if(D0)return xt;D0=1;var r=Symbol.for("react.element"),o=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),y=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),T=Symbol.iterator;function R(Z){return Z===null||typeof Z!="object"?null:(Z=T&&Z[T]||Z["@@iterator"],typeof Z=="function"?Z:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,j={};function B(Z,de,We){this.props=Z,this.context=de,this.refs=j,this.updater=We||k}B.prototype.isReactComponent={},B.prototype.setState=function(Z,de){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,de,"setState")},B.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function U(){}U.prototype=B.prototype;function H(Z,de,We){this.props=Z,this.context=de,this.refs=j,this.updater=We||k}var W=H.prototype=new U;W.constructor=H,L(W,B.prototype),W.isPureReactComponent=!0;var ee=Array.isArray,ce=Object.prototype.hasOwnProperty,ie={current:null},Q={key:!0,ref:!0,__self:!0,__source:!0};function ue(Z,de,We){var Ue,ut={},ve=null,et=null;if(de!=null)for(Ue in de.ref!==void 0&&(et=de.ref),de.key!==void 0&&(ve=""+de.key),de)ce.call(de,Ue)&&!Q.hasOwnProperty(Ue)&&(ut[Ue]=de[Ue]);var Te=arguments.length-2;if(Te===1)ut.children=We;else if(1<Te){for(var Ne=Array(Te),at=0;at<Te;at++)Ne[at]=arguments[at+2];ut.children=Ne}if(Z&&Z.defaultProps)for(Ue in Te=Z.defaultProps,Te)ut[Ue]===void 0&&(ut[Ue]=Te[Ue]);return{$$typeof:r,type:Z,key:ve,ref:et,props:ut,_owner:ie.current}}function q(Z,de){return{$$typeof:r,type:Z.type,key:de,ref:Z.ref,props:Z.props,_owner:Z._owner}}function Re(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===r}function je(Z){var de={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(We){return de[We]})}var be=/\/+/g;function Oe(Z,de){return typeof Z=="object"&&Z!==null&&Z.key!=null?je(""+Z.key):de.toString(36)}function Le(Z,de,We,Ue,ut){var ve=typeof Z;(ve==="undefined"||ve==="boolean")&&(Z=null);var et=!1;if(Z===null)et=!0;else switch(ve){case"string":case"number":et=!0;break;case"object":switch(Z.$$typeof){case r:case o:et=!0}}if(et)return et=Z,ut=ut(et),Z=Ue===""?"."+Oe(et,0):Ue,ee(ut)?(We="",Z!=null&&(We=Z.replace(be,"$&/")+"/"),Le(ut,de,We,"",function(at){return at})):ut!=null&&(Re(ut)&&(ut=q(ut,We+(!ut.key||et&&et.key===ut.key?"":(""+ut.key).replace(be,"$&/")+"/")+Z)),de.push(ut)),1;if(et=0,Ue=Ue===""?".":Ue+":",ee(Z))for(var Te=0;Te<Z.length;Te++){ve=Z[Te];var Ne=Ue+Oe(ve,Te);et+=Le(ve,de,We,Ne,ut)}else if(Ne=R(Z),typeof Ne=="function")for(Z=Ne.call(Z),Te=0;!(ve=Z.next()).done;)ve=ve.value,Ne=Ue+Oe(ve,Te++),et+=Le(ve,de,We,Ne,ut);else if(ve==="object")throw de=String(Z),Error("Objects are not valid as a React child (found: "+(de==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":de)+"). If you meant to render a collection of children, use an array instead.");return et}function J(Z,de,We){if(Z==null)return Z;var Ue=[],ut=0;return Le(Z,Ue,"","",function(ve){return de.call(We,ve,ut++)}),Ue}function we(Z){if(Z._status===-1){var de=Z._result;de=de(),de.then(function(We){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=We)},function(We){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=We)}),Z._status===-1&&(Z._status=0,Z._result=de)}if(Z._status===1)return Z._result.default;throw Z._result}var oe={current:null},fe={transition:null},pe={ReactCurrentDispatcher:oe,ReactCurrentBatchConfig:fe,ReactCurrentOwner:ie};function ge(){throw Error("act(...) is not supported in production builds of React.")}return xt.Children={map:J,forEach:function(Z,de,We){J(Z,function(){de.apply(this,arguments)},We)},count:function(Z){var de=0;return J(Z,function(){de++}),de},toArray:function(Z){return J(Z,function(de){return de})||[]},only:function(Z){if(!Re(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}},xt.Component=B,xt.Fragment=a,xt.Profiler=p,xt.PureComponent=H,xt.StrictMode=d,xt.Suspense=w,xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,xt.act=ge,xt.cloneElement=function(Z,de,We){if(Z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Z+".");var Ue=L({},Z.props),ut=Z.key,ve=Z.ref,et=Z._owner;if(de!=null){if(de.ref!==void 0&&(ve=de.ref,et=ie.current),de.key!==void 0&&(ut=""+de.key),Z.type&&Z.type.defaultProps)var Te=Z.type.defaultProps;for(Ne in de)ce.call(de,Ne)&&!Q.hasOwnProperty(Ne)&&(Ue[Ne]=de[Ne]===void 0&&Te!==void 0?Te[Ne]:de[Ne])}var Ne=arguments.length-2;if(Ne===1)Ue.children=We;else if(1<Ne){Te=Array(Ne);for(var at=0;at<Ne;at++)Te[at]=arguments[at+2];Ue.children=Te}return{$$typeof:r,type:Z.type,key:ut,ref:ve,props:Ue,_owner:et}},xt.createContext=function(Z){return Z={$$typeof:y,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Z.Provider={$$typeof:x,_context:Z},Z.Consumer=Z},xt.createElement=ue,xt.createFactory=function(Z){var de=ue.bind(null,Z);return de.type=Z,de},xt.createRef=function(){return{current:null}},xt.forwardRef=function(Z){return{$$typeof:A,render:Z}},xt.isValidElement=Re,xt.lazy=function(Z){return{$$typeof:S,_payload:{_status:-1,_result:Z},_init:we}},xt.memo=function(Z,de){return{$$typeof:E,type:Z,compare:de===void 0?null:de}},xt.startTransition=function(Z){var de=fe.transition;fe.transition={};try{Z()}finally{fe.transition=de}},xt.unstable_act=ge,xt.useCallback=function(Z,de){return oe.current.useCallback(Z,de)},xt.useContext=function(Z){return oe.current.useContext(Z)},xt.useDebugValue=function(){},xt.useDeferredValue=function(Z){return oe.current.useDeferredValue(Z)},xt.useEffect=function(Z,de){return oe.current.useEffect(Z,de)},xt.useId=function(){return oe.current.useId()},xt.useImperativeHandle=function(Z,de,We){return oe.current.useImperativeHandle(Z,de,We)},xt.useInsertionEffect=function(Z,de){return oe.current.useInsertionEffect(Z,de)},xt.useLayoutEffect=function(Z,de){return oe.current.useLayoutEffect(Z,de)},xt.useMemo=function(Z,de){return oe.current.useMemo(Z,de)},xt.useReducer=function(Z,de,We){return oe.current.useReducer(Z,de,We)},xt.useRef=function(Z){return oe.current.useRef(Z)},xt.useState=function(Z){return oe.current.useState(Z)},xt.useSyncExternalStore=function(Z,de,We){return oe.current.useSyncExternalStore(Z,de,We)},xt.useTransition=function(){return oe.current.useTransition()},xt.version="18.3.1",xt}var k0;function Qf(){return k0||(k0=1,nf.exports=Bx()),nf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L0;function Fx(){if(L0)return ya;L0=1;var r=Qf(),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),d=Object.prototype.hasOwnProperty,p=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x={key:!0,ref:!0,__self:!0,__source:!0};function y(A,w,E){var S,T={},R=null,k=null;E!==void 0&&(R=""+E),w.key!==void 0&&(R=""+w.key),w.ref!==void 0&&(k=w.ref);for(S in w)d.call(w,S)&&!x.hasOwnProperty(S)&&(T[S]=w[S]);if(A&&A.defaultProps)for(S in w=A.defaultProps,w)T[S]===void 0&&(T[S]=w[S]);return{$$typeof:o,type:A,key:R,ref:k,props:T,_owner:p.current}}return ya.Fragment=a,ya.jsx=y,ya.jsxs=y,ya}var B0;function jx(){return B0||(B0=1,tf.exports=Fx()),tf.exports}var N=jx(),P=Qf();const en=Dp(P);var Jl={},rf={exports:{}},vr={},sf={exports:{}},of={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F0;function Vx(){return F0||(F0=1,function(r){function o(fe,pe){var ge=fe.length;fe.push(pe);e:for(;0<ge;){var Z=ge-1>>>1,de=fe[Z];if(0<p(de,pe))fe[Z]=pe,fe[ge]=de,ge=Z;else break e}}function a(fe){return fe.length===0?null:fe[0]}function d(fe){if(fe.length===0)return null;var pe=fe[0],ge=fe.pop();if(ge!==pe){fe[0]=ge;e:for(var Z=0,de=fe.length,We=de>>>1;Z<We;){var Ue=2*(Z+1)-1,ut=fe[Ue],ve=Ue+1,et=fe[ve];if(0>p(ut,ge))ve<de&&0>p(et,ut)?(fe[Z]=et,fe[ve]=ge,Z=ve):(fe[Z]=ut,fe[Ue]=ge,Z=Ue);else if(ve<de&&0>p(et,ge))fe[Z]=et,fe[ve]=ge,Z=ve;else break e}}return pe}function p(fe,pe){var ge=fe.sortIndex-pe.sortIndex;return ge!==0?ge:fe.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var x=performance;r.unstable_now=function(){return x.now()}}else{var y=Date,A=y.now();r.unstable_now=function(){return y.now()-A}}var w=[],E=[],S=1,T=null,R=3,k=!1,L=!1,j=!1,B=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function W(fe){for(var pe=a(E);pe!==null;){if(pe.callback===null)d(E);else if(pe.startTime<=fe)d(E),pe.sortIndex=pe.expirationTime,o(w,pe);else break;pe=a(E)}}function ee(fe){if(j=!1,W(fe),!L)if(a(w)!==null)L=!0,we(ce);else{var pe=a(E);pe!==null&&oe(ee,pe.startTime-fe)}}function ce(fe,pe){L=!1,j&&(j=!1,U(ue),ue=-1),k=!0;var ge=R;try{for(W(pe),T=a(w);T!==null&&(!(T.expirationTime>pe)||fe&&!je());){var Z=T.callback;if(typeof Z=="function"){T.callback=null,R=T.priorityLevel;var de=Z(T.expirationTime<=pe);pe=r.unstable_now(),typeof de=="function"?T.callback=de:T===a(w)&&d(w),W(pe)}else d(w);T=a(w)}if(T!==null)var We=!0;else{var Ue=a(E);Ue!==null&&oe(ee,Ue.startTime-pe),We=!1}return We}finally{T=null,R=ge,k=!1}}var ie=!1,Q=null,ue=-1,q=5,Re=-1;function je(){return!(r.unstable_now()-Re<q)}function be(){if(Q!==null){var fe=r.unstable_now();Re=fe;var pe=!0;try{pe=Q(!0,fe)}finally{pe?Oe():(ie=!1,Q=null)}}else ie=!1}var Oe;if(typeof H=="function")Oe=function(){H(be)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,J=Le.port2;Le.port1.onmessage=be,Oe=function(){J.postMessage(null)}}else Oe=function(){B(be,0)};function we(fe){Q=fe,ie||(ie=!0,Oe())}function oe(fe,pe){ue=B(function(){fe(r.unstable_now())},pe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(fe){fe.callback=null},r.unstable_continueExecution=function(){L||k||(L=!0,we(ce))},r.unstable_forceFrameRate=function(fe){0>fe||125<fe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<fe?Math.floor(1e3/fe):5},r.unstable_getCurrentPriorityLevel=function(){return R},r.unstable_getFirstCallbackNode=function(){return a(w)},r.unstable_next=function(fe){switch(R){case 1:case 2:case 3:var pe=3;break;default:pe=R}var ge=R;R=pe;try{return fe()}finally{R=ge}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(fe,pe){switch(fe){case 1:case 2:case 3:case 4:case 5:break;default:fe=3}var ge=R;R=fe;try{return pe()}finally{R=ge}},r.unstable_scheduleCallback=function(fe,pe,ge){var Z=r.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Z+ge:Z):ge=Z,fe){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=ge+de,fe={id:S++,callback:pe,priorityLevel:fe,startTime:ge,expirationTime:de,sortIndex:-1},ge>Z?(fe.sortIndex=ge,o(E,fe),a(w)===null&&fe===a(E)&&(j?(U(ue),ue=-1):j=!0,oe(ee,ge-Z))):(fe.sortIndex=de,o(w,fe),L||k||(L=!0,we(ce))),fe},r.unstable_shouldYield=je,r.unstable_wrapCallback=function(fe){var pe=R;return function(){var ge=R;R=pe;try{return fe.apply(this,arguments)}finally{R=ge}}}}(of)),of}var j0;function Ux(){return j0||(j0=1,sf.exports=Vx()),sf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V0;function zx(){if(V0)return vr;V0=1;var r=Qf(),o=Ux();function a(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,f=1;f<arguments.length;f++)s+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d=new Set,p={};function x(t,s){y(t,s),y(t+"Capture",s)}function y(t,s){for(p[t]=s,t=0;t<s.length;t++)d.add(s[t])}var A=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),w=Object.prototype.hasOwnProperty,E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S={},T={};function R(t){return w.call(T,t)?!0:w.call(S,t)?!1:E.test(t)?T[t]=!0:(S[t]=!0,!1)}function k(t,s,f,g){if(f!==null&&f.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return g?!1:f!==null?!f.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function L(t,s,f,g){if(s===null||typeof s>"u"||k(t,s,f,g))return!0;if(g)return!1;if(f!==null)switch(f.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function j(t,s,f,g,C,b,M){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=g,this.attributeNamespace=C,this.mustUseProperty=f,this.propertyName=t,this.type=s,this.sanitizeURL=b,this.removeEmptyString=M}var B={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){B[t]=new j(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];B[s]=new j(s,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){B[t]=new j(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){B[t]=new j(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){B[t]=new j(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){B[t]=new j(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){B[t]=new j(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){B[t]=new j(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){B[t]=new j(t,5,!1,t.toLowerCase(),null,!1,!1)});var U=/[\-:]([a-z])/g;function H(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(U,H);B[s]=new j(s,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(U,H);B[s]=new j(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(U,H);B[s]=new j(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){B[t]=new j(t,1,!1,t.toLowerCase(),null,!1,!1)}),B.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){B[t]=new j(t,1,!1,t.toLowerCase(),null,!0,!0)});function W(t,s,f,g){var C=B.hasOwnProperty(s)?B[s]:null;(C!==null?C.type!==0:g||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(L(s,f,C,g)&&(f=null),g||C===null?R(s)&&(f===null?t.removeAttribute(s):t.setAttribute(s,""+f)):C.mustUseProperty?t[C.propertyName]=f===null?C.type===3?!1:"":f:(s=C.attributeName,g=C.attributeNamespace,f===null?t.removeAttribute(s):(C=C.type,f=C===3||C===4&&f===!0?"":""+f,g?t.setAttributeNS(g,s,f):t.setAttribute(s,f))))}var ee=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ce=Symbol.for("react.element"),ie=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),ue=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),Re=Symbol.for("react.provider"),je=Symbol.for("react.context"),be=Symbol.for("react.forward_ref"),Oe=Symbol.for("react.suspense"),Le=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),we=Symbol.for("react.lazy"),oe=Symbol.for("react.offscreen"),fe=Symbol.iterator;function pe(t){return t===null||typeof t!="object"?null:(t=fe&&t[fe]||t["@@iterator"],typeof t=="function"?t:null)}var ge=Object.assign,Z;function de(t){if(Z===void 0)try{throw Error()}catch(f){var s=f.stack.trim().match(/\n( *(at )?)/);Z=s&&s[1]||""}return`
`+Z+t}var We=!1;function Ue(t,s){if(!t||We)return"";We=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(le){var g=le}Reflect.construct(t,[],s)}else{try{s.call()}catch(le){g=le}t.call(s.prototype)}else{try{throw Error()}catch(le){g=le}t()}}catch(le){if(le&&g&&typeof le.stack=="string"){for(var C=le.stack.split(`
`),b=g.stack.split(`
`),M=C.length-1,z=b.length-1;1<=M&&0<=z&&C[M]!==b[z];)z--;for(;1<=M&&0<=z;M--,z--)if(C[M]!==b[z]){if(M!==1||z!==1)do if(M--,z--,0>z||C[M]!==b[z]){var X=`
`+C[M].replace(" at new "," at ");return t.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",t.displayName)),X}while(1<=M&&0<=z);break}}}finally{We=!1,Error.prepareStackTrace=f}return(t=t?t.displayName||t.name:"")?de(t):""}function ut(t){switch(t.tag){case 5:return de(t.type);case 16:return de("Lazy");case 13:return de("Suspense");case 19:return de("SuspenseList");case 0:case 2:case 15:return t=Ue(t.type,!1),t;case 11:return t=Ue(t.type.render,!1),t;case 1:return t=Ue(t.type,!0),t;default:return""}}function ve(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Q:return"Fragment";case ie:return"Portal";case q:return"Profiler";case ue:return"StrictMode";case Oe:return"Suspense";case Le:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case je:return(t.displayName||"Context")+".Consumer";case Re:return(t._context.displayName||"Context")+".Provider";case be:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case J:return s=t.displayName||null,s!==null?s:ve(t.type)||"Memo";case we:s=t._payload,t=t._init;try{return ve(t(s))}catch{}}return null}function et(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(s);case 8:return s===ue?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Te(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ne(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function at(t){var s=Ne(t)?"checked":"value",f=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),g=""+t[s];if(!t.hasOwnProperty(s)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var C=f.get,b=f.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return C.call(this)},set:function(M){g=""+M,b.call(this,M)}}),Object.defineProperty(t,s,{enumerable:f.enumerable}),{getValue:function(){return g},setValue:function(M){g=""+M},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Je(t){t._valueTracker||(t._valueTracker=at(t))}function ct(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var f=s.getValue(),g="";return t&&(g=Ne(t)?t.checked?"true":"false":t.value),t=g,t!==f?(s.setValue(t),!0):!1}function Ve(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qt(t,s){var f=s.checked;return ge({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??t._wrapperState.initialChecked})}function Ot(t,s){var f=s.defaultValue==null?"":s.defaultValue,g=s.checked!=null?s.checked:s.defaultChecked;f=Te(s.value!=null?s.value:f),t._wrapperState={initialChecked:g,initialValue:f,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function En(t,s){s=s.checked,s!=null&&W(t,"checked",s,!1)}function Vt(t,s){En(t,s);var f=Te(s.value),g=s.type;if(f!=null)g==="number"?(f===0&&t.value===""||t.value!=f)&&(t.value=""+f):t.value!==""+f&&(t.value=""+f);else if(g==="submit"||g==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?ft(t,s.type,f):s.hasOwnProperty("defaultValue")&&ft(t,s.type,Te(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function St(t,s,f){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var g=s.type;if(!(g!=="submit"&&g!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,f||s===t.value||(t.value=s),t.defaultValue=s}f=t.name,f!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,f!==""&&(t.name=f)}function ft(t,s,f){(s!=="number"||Ve(t.ownerDocument)!==t)&&(f==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+f&&(t.defaultValue=""+f))}var tn=Array.isArray;function Pe(t,s,f,g){if(t=t.options,s){s={};for(var C=0;C<f.length;C++)s["$"+f[C]]=!0;for(f=0;f<t.length;f++)C=s.hasOwnProperty("$"+t[f].value),t[f].selected!==C&&(t[f].selected=C),C&&g&&(t[f].defaultSelected=!0)}else{for(f=""+Te(f),s=null,C=0;C<t.length;C++){if(t[C].value===f){t[C].selected=!0,g&&(t[C].defaultSelected=!0);return}s!==null||t[C].disabled||(s=t[C])}s!==null&&(s.selected=!0)}}function gn(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(a(91));return ge({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Mt(t,s){var f=s.value;if(f==null){if(f=s.children,s=s.defaultValue,f!=null){if(s!=null)throw Error(a(92));if(tn(f)){if(1<f.length)throw Error(a(93));f=f[0]}s=f}s==null&&(s=""),f=s}t._wrapperState={initialValue:Te(f)}}function Be(t,s){var f=Te(s.value),g=Te(s.defaultValue);f!=null&&(f=""+f,f!==t.value&&(t.value=f),s.defaultValue==null&&t.defaultValue!==f&&(t.defaultValue=f)),g!=null&&(t.defaultValue=""+g)}function pt(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function nt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $n(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?nt(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Tt,Ct=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,f,g,C){MSApp.execUnsafeLocalFunction(function(){return t(s,f,g,C)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(Tt=Tt||document.createElement("div"),Tt.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Tt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function nn(t,s){if(s){var f=t.firstChild;if(f&&f===t.lastChild&&f.nodeType===3){f.nodeValue=s;return}}t.textContent=s}var Dt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ln=["Webkit","ms","Moz","O"];Object.keys(Dt).forEach(function(t){Ln.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Dt[s]=Dt[t]})});function kt(t,s,f){return s==null||typeof s=="boolean"||s===""?"":f||typeof s!="number"||s===0||Dt.hasOwnProperty(t)&&Dt[t]?(""+s).trim():s+"px"}function Ae(t,s){t=t.style;for(var f in s)if(s.hasOwnProperty(f)){var g=f.indexOf("--")===0,C=kt(f,s[f],g);f==="float"&&(f="cssFloat"),g?t.setProperty(f,C):t[f]=C}}var Lt=ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function It(t,s){if(s){if(Lt[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(a(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(a(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(a(61))}if(s.style!=null&&typeof s.style!="object")throw Error(a(62))}}function Ut(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hr=null;function ti(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fi=null,gt=null,Bn=null;function xs(t){if(t=ra(t)){if(typeof Fi!="function")throw Error(a(280));var s=t.stateNode;s&&(s=hl(s),Fi(t.stateNode,t.type,s))}}function ji(t){gt?Bn?Bn.push(t):Bn=[t]:gt=t}function Fn(){if(gt){var t=gt,s=Bn;if(Bn=gt=null,xs(t),s)for(t=0;t<s.length;t++)xs(s[t])}}function yi(t,s){return t(s)}function mn(){}var sr=!1;function wi(t,s,f){if(sr)return t(s,f);sr=!0;try{return yi(t,s,f)}finally{sr=!1,(gt!==null||Bn!==null)&&(mn(),Fn())}}function Tn(t,s){var f=t.stateNode;if(f===null)return null;var g=hl(f);if(g===null)return null;f=g[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(t=t.type,g=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!g;break e;default:t=!1}if(t)return null;if(f&&typeof f!="function")throw Error(a(231,s,typeof f));return f}var ys=!1;if(A)try{var or={};Object.defineProperty(or,"passive",{get:function(){ys=!0}}),window.addEventListener("test",or,or),window.removeEventListener("test",or,or)}catch{ys=!1}function ws(t,s,f,g,C,b,M,z,X){var le=Array.prototype.slice.call(arguments,3);try{s.apply(f,le)}catch(ye){this.onError(ye)}}var un=!1,ar=null,In=!1,Me=null,Rr={onError:function(t){un=!0,ar=t}};function vs(t,s,f,g,C,b,M,z,X){un=!1,ar=null,ws.apply(Rr,arguments)}function Nn(t,s,f,g,C,b,M,z,X){if(vs.apply(this,arguments),un){if(un){var le=ar;un=!1,ar=null}else throw Error(a(198));In||(In=!0,Me=le)}}function _e(t){var s=t,f=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(f=s.return),t=s.return;while(t)}return s.tag===3?f:null}function lt(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function st(t){if(_e(t)!==t)throw Error(a(188))}function bt(t){var s=t.alternate;if(!s){if(s=_e(t),s===null)throw Error(a(188));return s!==t?null:t}for(var f=t,g=s;;){var C=f.return;if(C===null)break;var b=C.alternate;if(b===null){if(g=C.return,g!==null){f=g;continue}break}if(C.child===b.child){for(b=C.child;b;){if(b===f)return st(C),t;if(b===g)return st(C),s;b=b.sibling}throw Error(a(188))}if(f.return!==g.return)f=C,g=b;else{for(var M=!1,z=C.child;z;){if(z===f){M=!0,f=C,g=b;break}if(z===g){M=!0,g=C,f=b;break}z=z.sibling}if(!M){for(z=b.child;z;){if(z===f){M=!0,f=b,g=C;break}if(z===g){M=!0,g=b,f=C;break}z=z.sibling}if(!M)throw Error(a(189))}}if(f.alternate!==g)throw Error(a(190))}if(f.tag!==3)throw Error(a(188));return f.stateNode.current===f?t:s}function Xe(t){return t=bt(t),t!==null?An(t):null}function An(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=An(t);if(s!==null)return s;t=t.sibling}return null}var lr=o.unstable_scheduleCallback,Sn=o.unstable_cancelCallback,Ft=o.unstable_shouldYield,pr=o.unstable_requestPaint,yt=o.unstable_now,Qs=o.unstable_getCurrentPriorityLevel,he=o.unstable_ImmediatePriority,Cs=o.unstable_UserBlockingPriority,Wt=o.unstable_NormalPriority,Vi=o.unstable_LowPriority,$a=o.unstable_IdlePriority,At=null,dt=null;function wt(t){if(dt&&typeof dt.onCommitFiberRoot=="function")try{dt.onCommitFiberRoot(At,t,void 0,(t.current.flags&128)===128)}catch{}}var ur=Math.clz32?Math.clz32:xn,Fo=Math.log,jo=Math.LN2;function xn(t){return t>>>=0,t===0?32:31-(Fo(t)/jo|0)|0}var Cr=64,Js=4194304;function Ht(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Er(t,s){var f=t.pendingLanes;if(f===0)return 0;var g=0,C=t.suspendedLanes,b=t.pingedLanes,M=f&268435455;if(M!==0){var z=M&~C;z!==0?g=Ht(z):(b&=M,b!==0&&(g=Ht(b)))}else M=f&~C,M!==0?g=Ht(M):b!==0&&(g=Ht(b));if(g===0)return 0;if(s!==0&&s!==g&&!(s&C)&&(C=g&-g,b=s&-s,C>=b||C===16&&(b&4194240)!==0))return s;if(g&4&&(g|=f&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=g;0<s;)f=31-ur(s),C=1<<f,g|=t[f],s&=~C;return g}function ku(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ui(t,s){for(var f=t.suspendedLanes,g=t.pingedLanes,C=t.expirationTimes,b=t.pendingLanes;0<b;){var M=31-ur(b),z=1<<M,X=C[M];X===-1?(!(z&f)||z&g)&&(C[M]=ku(z,s)):X<=s&&(t.expiredLanes|=z),b&=~z}}function Bt(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Rn(){var t=Cr;return Cr<<=1,!(Cr&4194240)&&(Cr=64),t}function te(t){for(var s=[],f=0;31>f;f++)s.push(t);return s}function F(t,s,f){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-ur(s),t[s]=f}function Ge(t,s){var f=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var g=t.eventTimes;for(t=t.expirationTimes;0<f;){var C=31-ur(f),b=1<<C;s[C]=0,g[C]=-1,t[C]=-1,f&=~b}}function cn(t,s){var f=t.entangledLanes|=s;for(t=t.entanglements;f;){var g=31-ur(f),C=1<<g;C&s|t[g]&s&&(t[g]|=s),f&=~C}}var ht=0;function qa(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var eo,qn,Ye,Gt,Vo,Uo=!1,zi=[],Ar=null,_r=null,ni=null,Qt=new Map,Gr=new Map,Wn=[],qe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qa(t,s){switch(t){case"focusin":case"focusout":Ar=null;break;case"dragenter":case"dragleave":_r=null;break;case"mouseover":case"mouseout":ni=null;break;case"pointerover":case"pointerout":Qt.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gr.delete(s.pointerId)}}function rt(t,s,f,g,C,b){return t===null||t.nativeEvent!==b?(t={blockedOn:s,domEventName:f,eventSystemFlags:g,nativeEvent:b,targetContainers:[C]},s!==null&&(s=ra(s),s!==null&&qn(s)),t):(t.eventSystemFlags|=g,s=t.targetContainers,C!==null&&s.indexOf(C)===-1&&s.push(C),t)}function _n(t,s,f,g,C){switch(s){case"focusin":return Ar=rt(Ar,t,s,f,g,C),!0;case"dragenter":return _r=rt(_r,t,s,f,g,C),!0;case"mouseover":return ni=rt(ni,t,s,f,g,C),!0;case"pointerover":var b=C.pointerId;return Qt.set(b,rt(Qt.get(b)||null,t,s,f,g,C)),!0;case"gotpointercapture":return b=C.pointerId,Gr.set(b,rt(Gr.get(b)||null,t,s,f,g,C)),!0}return!1}function Ja(t){var s=Os(t.target);if(s!==null){var f=_e(s);if(f!==null){if(s=f.tag,s===13){if(s=lt(f),s!==null){t.blockedOn=s,Vo(t.priority,function(){Ye(f)});return}}else if(s===3&&f.stateNode.current.memoizedState.isDehydrated){t.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wi(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var f=to(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(f===null){f=t.nativeEvent;var g=new f.constructor(f.type,f);Hr=g,f.target.dispatchEvent(g),Hr=null}else return s=ra(f),s!==null&&qn(s),t.blockedOn=f,!1;s.shift()}return!0}function zo(t,s,f){Wi(t)&&f.delete(s)}function vi(){Uo=!1,Ar!==null&&Wi(Ar)&&(Ar=null),_r!==null&&Wi(_r)&&(_r=null),ni!==null&&Wi(ni)&&(ni=null),Qt.forEach(zo),Gr.forEach(zo)}function Es(t,s){t.blockedOn===s&&(t.blockedOn=null,Uo||(Uo=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,vi)))}function Xr(t){function s(C){return Es(C,t)}if(0<zi.length){Es(zi[0],t);for(var f=1;f<zi.length;f++){var g=zi[f];g.blockedOn===t&&(g.blockedOn=null)}}for(Ar!==null&&Es(Ar,t),_r!==null&&Es(_r,t),ni!==null&&Es(ni,t),Qt.forEach(s),Gr.forEach(s),f=0;f<Wn.length;f++)g=Wn[f],g.blockedOn===t&&(g.blockedOn=null);for(;0<Wn.length&&(f=Wn[0],f.blockedOn===null);)Ja(f),f.blockedOn===null&&Wn.shift()}var Or=ee.ReactCurrentBatchConfig,ri=!0;function el(t,s,f,g){var C=ht,b=Or.transition;Or.transition=null;try{ht=1,Ci(t,s,f,g)}finally{ht=C,Or.transition=b}}function As(t,s,f,g){var C=ht,b=Or.transition;Or.transition=null;try{ht=4,Ci(t,s,f,g)}finally{ht=C,Or.transition=b}}function Ci(t,s,f,g){if(ri){var C=to(t,s,f,g);if(C===null)Gu(t,s,g,On,f),Qa(t,g);else if(_n(C,t,s,f,g))g.stopPropagation();else if(Qa(t,g),s&4&&-1<qe.indexOf(t)){for(;C!==null;){var b=ra(C);if(b!==null&&eo(b),b=to(t,s,f,g),b===null&&Gu(t,s,g,On,f),b===C)break;C=b}C!==null&&g.stopPropagation()}else Gu(t,s,g,null,f)}}var On=null;function to(t,s,f,g){if(On=null,t=ti(g),t=Os(t),t!==null)if(s=_e(t),s===null)t=null;else if(f=s.tag,f===13){if(t=lt(s),t!==null)return t;t=null}else if(f===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return On=t,null}function Wo(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qs()){case he:return 1;case Cs:return 4;case Wt:case Vi:return 16;case $a:return 536870912;default:return 16}default:return 16}}var Yr=null,Ho=null,no=null;function tl(){if(no)return no;var t,s=Ho,f=s.length,g,C="value"in Yr?Yr.value:Yr.textContent,b=C.length;for(t=0;t<f&&s[t]===C[t];t++);var M=f-t;for(g=1;g<=M&&s[f-g]===C[b-g];g++);return no=C.slice(t,1<g?1-g:void 0)}function Nt(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Ss(){return!0}function bs(){return!1}function fn(t){function s(f,g,C,b,M){this._reactName=f,this._targetInst=C,this.type=g,this.nativeEvent=b,this.target=M,this.currentTarget=null;for(var z in t)t.hasOwnProperty(z)&&(f=t[z],this[z]=f?f(b):b[z]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Ss:bs,this.isPropagationStopped=bs,this}return ge(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Ss)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Ss)},persist:function(){},isPersistent:Ss}),s}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ae=fn(Hi),ot=ge({},Hi,{view:0,detail:0}),Pn=fn(ot),Gi,ro,Ts,io=ge({},ot,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Is,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ts&&(Ts&&t.type==="mousemove"?(Gi=t.screenX-Ts.screenX,ro=t.screenY-Ts.screenY):ro=Gi=0,Ts=t),Gi)},movementY:function(t){return"movementY"in t?t.movementY:ro}}),nl=fn(io),Go=ge({},io,{dataTransfer:0}),yn=fn(Go),Xo=ge({},ot,{relatedTarget:0}),Xt=fn(Xo),so=ge({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ei=fn(so),jt=ge({},Hi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ke=fn(jt),Lu=ge({},Hi,{data:0}),zt=fn(Lu),Ai={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pr(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Bu[t])?!!s[t]:!1}function Is(){return Pr}var rl=ge({},ot,{key:function(t){if(t.key){var s=Ai[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Nt(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Xi[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Is,charCode:function(t){return t.type==="keypress"?Nt(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Nt(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Yo=fn(rl),il=ge({},io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ko=fn(il),Fu=ge({},ot,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Is}),Yi=fn(Fu),Zo=ge({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),ju=fn(Zo),Ns=ge({},io,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Vu=fn(Ns),ii=[9,13,27,32],Ki=A&&"CompositionEvent"in window,jn=null;A&&"documentMode"in document&&(jn=document.documentMode);var sl=A&&"TextEvent"in window&&!jn,Sr=A&&(!Ki||jn&&8<jn&&11>=jn),ol=" ",oo=!1;function al(t,s){switch(t){case"keyup":return ii.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $o(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hn=!1;function Uu(t,s){switch(t){case"compositionend":return $o(s);case"keypress":return s.which!==32?null:(oo=!0,ol);case"textInput":return t=s.data,t===ol&&oo?null:t;default:return null}}function qo(t,s){if(Hn)return t==="compositionend"||!Ki&&al(t,s)?(t=tl(),no=Ho=Yr=null,Hn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Sr&&s.locale!=="ko"?null:s.data;default:return null}}var Rs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Et(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Rs[t.type]:s==="textarea"}function _s(t,s,f,g){ji(g),s=cl(s,"onChange"),0<s.length&&(f=new ae("onChange","change",null,f,g),t.push({event:f,listeners:s}))}var _=null,e=null;function n(t){$d(t,0)}function i(t){var s=uo(t);if(ct(s))return t}function l(t,s){if(t==="change")return s}var u=!1;if(A){var c;if(A){var h="oninput"in document;if(!h){var m=document.createElement("div");m.setAttribute("oninput","return;"),h=typeof m.oninput=="function"}c=h}else c=!1;u=c&&(!document.documentMode||9<document.documentMode)}function v(){_&&(_.detachEvent("onpropertychange",I),e=_=null)}function I(t){if(t.propertyName==="value"&&i(e)){var s=[];_s(s,e,t,ti(t)),wi(n,s)}}function O(t,s,f){t==="focusin"?(v(),_=s,e=f,_.attachEvent("onpropertychange",I)):t==="focusout"&&v()}function D(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return i(e)}function V(t,s){if(t==="click")return i(s)}function G(t,s){if(t==="input"||t==="change")return i(s)}function Y(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var $=typeof Object.is=="function"?Object.is:Y;function se(t,s){if($(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var f=Object.keys(t),g=Object.keys(s);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var C=f[g];if(!w.call(s,C)||!$(t[C],s[C]))return!1}return!0}function Ee(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Se(t,s){var f=Ee(t);t=0;for(var g;f;){if(f.nodeType===3){if(g=t+f.textContent.length,t<=s&&g>=s)return{node:f,offset:s-t};t=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Ee(f)}}function xe(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?xe(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function mt(){for(var t=window,s=Ve();s instanceof t.HTMLIFrameElement;){try{var f=typeof s.contentWindow.location.href=="string"}catch{f=!1}if(f)t=s.contentWindow;else break;s=Ve(t.document)}return s}function it(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function Qn(t){var s=mt(),f=t.focusedElem,g=t.selectionRange;if(s!==f&&f&&f.ownerDocument&&xe(f.ownerDocument.documentElement,f)){if(g!==null&&it(f)){if(s=g.start,t=g.end,t===void 0&&(t=s),"selectionStart"in f)f.selectionStart=s,f.selectionEnd=Math.min(t,f.value.length);else if(t=(s=f.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var C=f.textContent.length,b=Math.min(g.start,C);g=g.end===void 0?b:Math.min(g.end,C),!t.extend&&b>g&&(C=g,g=b,b=C),C=Se(f,b);var M=Se(f,g);C&&M&&(t.rangeCount!==1||t.anchorNode!==C.node||t.anchorOffset!==C.offset||t.focusNode!==M.node||t.focusOffset!==M.offset)&&(s=s.createRange(),s.setStart(C.node,C.offset),t.removeAllRanges(),b>g?(t.addRange(s),t.extend(M.node,M.offset)):(s.setEnd(M.node,M.offset),t.addRange(s)))}}for(s=[],t=f;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<s.length;f++)t=s[f],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var br=A&&"documentMode"in document&&11>=document.documentMode,wn=null,Pt=null,rn=null,Gn=!1;function Si(t,s,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Gn||wn==null||wn!==Ve(g)||(g=wn,"selectionStart"in g&&it(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),rn&&se(rn,g)||(rn=g,g=cl(Pt,"onSelect"),0<g.length&&(s=new ae("onSelect","select",null,s,f),t.push({event:s,listeners:g}),s.target=wn)))}function Kr(t,s){var f={};return f[t.toLowerCase()]=s.toLowerCase(),f["Webkit"+t]="webkit"+s,f["Moz"+t]="moz"+s,f}var Zi={animationend:Kr("Animation","AnimationEnd"),animationiteration:Kr("Animation","AnimationIteration"),animationstart:Kr("Animation","AnimationStart"),transitionend:Kr("Transition","TransitionEnd")},Qo={},zd={};A&&(zd=document.createElement("div").style,"AnimationEvent"in window||(delete Zi.animationend.animation,delete Zi.animationiteration.animation,delete Zi.animationstart.animation),"TransitionEvent"in window||delete Zi.transitionend.transition);function ll(t){if(Qo[t])return Qo[t];if(!Zi[t])return t;var s=Zi[t],f;for(f in s)if(s.hasOwnProperty(f)&&f in zd)return Qo[t]=s[f];return t}var Wd=ll("animationend"),Hd=ll("animationiteration"),Gd=ll("animationstart"),Xd=ll("transitionend"),Yd=new Map,Kd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $i(t,s){Yd.set(t,s),x(s,[t])}for(var zu=0;zu<Kd.length;zu++){var Wu=Kd[zu],Xm=Wu.toLowerCase(),Ym=Wu[0].toUpperCase()+Wu.slice(1);$i(Xm,"on"+Ym)}$i(Wd,"onAnimationEnd"),$i(Hd,"onAnimationIteration"),$i(Gd,"onAnimationStart"),$i("dblclick","onDoubleClick"),$i("focusin","onFocus"),$i("focusout","onBlur"),$i(Xd,"onTransitionEnd"),y("onMouseEnter",["mouseout","mouseover"]),y("onMouseLeave",["mouseout","mouseover"]),y("onPointerEnter",["pointerout","pointerover"]),y("onPointerLeave",["pointerout","pointerover"]),x("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),x("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),x("onBeforeInput",["compositionend","keypress","textInput","paste"]),x("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Km=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jo));function Zd(t,s,f){var g=t.type||"unknown-event";t.currentTarget=f,Nn(g,s,void 0,t),t.currentTarget=null}function $d(t,s){s=(s&4)!==0;for(var f=0;f<t.length;f++){var g=t[f],C=g.event;g=g.listeners;e:{var b=void 0;if(s)for(var M=g.length-1;0<=M;M--){var z=g[M],X=z.instance,le=z.currentTarget;if(z=z.listener,X!==b&&C.isPropagationStopped())break e;Zd(C,z,le),b=X}else for(M=0;M<g.length;M++){if(z=g[M],X=z.instance,le=z.currentTarget,z=z.listener,X!==b&&C.isPropagationStopped())break e;Zd(C,z,le),b=X}}}if(In)throw t=Me,In=!1,Me=null,t}function Zt(t,s){var f=s[qu];f===void 0&&(f=s[qu]=new Set);var g=t+"__bubble";f.has(g)||(qd(s,t,2,!1),f.add(g))}function Hu(t,s,f){var g=0;s&&(g|=4),qd(f,t,g,s)}var ul="_reactListening"+Math.random().toString(36).slice(2);function ea(t){if(!t[ul]){t[ul]=!0,d.forEach(function(f){f!=="selectionchange"&&(Km.has(f)||Hu(f,!1,t),Hu(f,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[ul]||(s[ul]=!0,Hu("selectionchange",!1,s))}}function qd(t,s,f,g){switch(Wo(s)){case 1:var C=el;break;case 4:C=As;break;default:C=Ci}f=C.bind(null,s,f,t),C=void 0,!ys||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(C=!0),g?C!==void 0?t.addEventListener(s,f,{capture:!0,passive:C}):t.addEventListener(s,f,!0):C!==void 0?t.addEventListener(s,f,{passive:C}):t.addEventListener(s,f,!1)}function Gu(t,s,f,g,C){var b=g;if(!(s&1)&&!(s&2)&&g!==null)e:for(;;){if(g===null)return;var M=g.tag;if(M===3||M===4){var z=g.stateNode.containerInfo;if(z===C||z.nodeType===8&&z.parentNode===C)break;if(M===4)for(M=g.return;M!==null;){var X=M.tag;if((X===3||X===4)&&(X=M.stateNode.containerInfo,X===C||X.nodeType===8&&X.parentNode===C))return;M=M.return}for(;z!==null;){if(M=Os(z),M===null)return;if(X=M.tag,X===5||X===6){g=b=M;continue e}z=z.parentNode}}g=g.return}wi(function(){var le=b,ye=ti(f),Ce=[];e:{var me=Yd.get(t);if(me!==void 0){var De=ae,Fe=t;switch(t){case"keypress":if(Nt(f)===0)break e;case"keydown":case"keyup":De=Yo;break;case"focusin":Fe="focus",De=Xt;break;case"focusout":Fe="blur",De=Xt;break;case"beforeblur":case"afterblur":De=Xt;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":De=nl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":De=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":De=Yi;break;case Wd:case Hd:case Gd:De=Ei;break;case Xd:De=ju;break;case"scroll":De=Pn;break;case"wheel":De=Vu;break;case"copy":case"cut":case"paste":De=Ke;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":De=Ko}var ze=(s&4)!==0,vn=!ze&&t==="scroll",ne=ze?me!==null?me+"Capture":null:me;ze=[];for(var K=le,re;K!==null;){re=K;var Ie=re.stateNode;if(re.tag===5&&Ie!==null&&(re=Ie,ne!==null&&(Ie=Tn(K,ne),Ie!=null&&ze.push(ta(K,Ie,re)))),vn)break;K=K.return}0<ze.length&&(me=new De(me,Fe,null,f,ye),Ce.push({event:me,listeners:ze}))}}if(!(s&7)){e:{if(me=t==="mouseover"||t==="pointerover",De=t==="mouseout"||t==="pointerout",me&&f!==Hr&&(Fe=f.relatedTarget||f.fromElement)&&(Os(Fe)||Fe[bi]))break e;if((De||me)&&(me=ye.window===ye?ye:(me=ye.ownerDocument)?me.defaultView||me.parentWindow:window,De?(Fe=f.relatedTarget||f.toElement,De=le,Fe=Fe?Os(Fe):null,Fe!==null&&(vn=_e(Fe),Fe!==vn||Fe.tag!==5&&Fe.tag!==6)&&(Fe=null)):(De=null,Fe=le),De!==Fe)){if(ze=nl,Ie="onMouseLeave",ne="onMouseEnter",K="mouse",(t==="pointerout"||t==="pointerover")&&(ze=Ko,Ie="onPointerLeave",ne="onPointerEnter",K="pointer"),vn=De==null?me:uo(De),re=Fe==null?me:uo(Fe),me=new ze(Ie,K+"leave",De,f,ye),me.target=vn,me.relatedTarget=re,Ie=null,Os(ye)===le&&(ze=new ze(ne,K+"enter",Fe,f,ye),ze.target=re,ze.relatedTarget=vn,Ie=ze),vn=Ie,De&&Fe)t:{for(ze=De,ne=Fe,K=0,re=ze;re;re=ao(re))K++;for(re=0,Ie=ne;Ie;Ie=ao(Ie))re++;for(;0<K-re;)ze=ao(ze),K--;for(;0<re-K;)ne=ao(ne),re--;for(;K--;){if(ze===ne||ne!==null&&ze===ne.alternate)break t;ze=ao(ze),ne=ao(ne)}ze=null}else ze=null;De!==null&&Qd(Ce,me,De,ze,!1),Fe!==null&&vn!==null&&Qd(Ce,vn,Fe,ze,!0)}}e:{if(me=le?uo(le):window,De=me.nodeName&&me.nodeName.toLowerCase(),De==="select"||De==="input"&&me.type==="file")var He=l;else if(Et(me))if(u)He=G;else{He=D;var Ze=O}else(De=me.nodeName)&&De.toLowerCase()==="input"&&(me.type==="checkbox"||me.type==="radio")&&(He=V);if(He&&(He=He(t,le))){_s(Ce,He,f,ye);break e}Ze&&Ze(t,me,le),t==="focusout"&&(Ze=me._wrapperState)&&Ze.controlled&&me.type==="number"&&ft(me,"number",me.value)}switch(Ze=le?uo(le):window,t){case"focusin":(Et(Ze)||Ze.contentEditable==="true")&&(wn=Ze,Pt=le,rn=null);break;case"focusout":rn=Pt=wn=null;break;case"mousedown":Gn=!0;break;case"contextmenu":case"mouseup":case"dragend":Gn=!1,Si(Ce,f,ye);break;case"selectionchange":if(br)break;case"keydown":case"keyup":Si(Ce,f,ye)}var $e;if(Ki)e:{switch(t){case"compositionstart":var tt="onCompositionStart";break e;case"compositionend":tt="onCompositionEnd";break e;case"compositionupdate":tt="onCompositionUpdate";break e}tt=void 0}else Hn?al(t,f)&&(tt="onCompositionEnd"):t==="keydown"&&f.keyCode===229&&(tt="onCompositionStart");tt&&(Sr&&f.locale!=="ko"&&(Hn||tt!=="onCompositionStart"?tt==="onCompositionEnd"&&Hn&&($e=tl()):(Yr=ye,Ho="value"in Yr?Yr.value:Yr.textContent,Hn=!0)),Ze=cl(le,tt),0<Ze.length&&(tt=new zt(tt,t,null,f,ye),Ce.push({event:tt,listeners:Ze}),$e?tt.data=$e:($e=$o(f),$e!==null&&(tt.data=$e)))),($e=sl?Uu(t,f):qo(t,f))&&(le=cl(le,"onBeforeInput"),0<le.length&&(ye=new zt("onBeforeInput","beforeinput",null,f,ye),Ce.push({event:ye,listeners:le}),ye.data=$e))}$d(Ce,s)})}function ta(t,s,f){return{instance:t,listener:s,currentTarget:f}}function cl(t,s){for(var f=s+"Capture",g=[];t!==null;){var C=t,b=C.stateNode;C.tag===5&&b!==null&&(C=b,b=Tn(t,f),b!=null&&g.unshift(ta(t,b,C)),b=Tn(t,s),b!=null&&g.push(ta(t,b,C))),t=t.return}return g}function ao(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Qd(t,s,f,g,C){for(var b=s._reactName,M=[];f!==null&&f!==g;){var z=f,X=z.alternate,le=z.stateNode;if(X!==null&&X===g)break;z.tag===5&&le!==null&&(z=le,C?(X=Tn(f,b),X!=null&&M.unshift(ta(f,X,z))):C||(X=Tn(f,b),X!=null&&M.push(ta(f,X,z)))),f=f.return}M.length!==0&&t.push({event:s,listeners:M})}var Zm=/\r\n?/g,$m=/\u0000|\uFFFD/g;function Jd(t){return(typeof t=="string"?t:""+t).replace(Zm,`
`).replace($m,"")}function fl(t,s,f){if(s=Jd(s),Jd(t)!==s&&f)throw Error(a(425))}function dl(){}var Xu=null,Yu=null;function Ku(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Zu=typeof setTimeout=="function"?setTimeout:void 0,qm=typeof clearTimeout=="function"?clearTimeout:void 0,eh=typeof Promise=="function"?Promise:void 0,Qm=typeof queueMicrotask=="function"?queueMicrotask:typeof eh<"u"?function(t){return eh.resolve(null).then(t).catch(Jm)}:Zu;function Jm(t){setTimeout(function(){throw t})}function $u(t,s){var f=s,g=0;do{var C=f.nextSibling;if(t.removeChild(f),C&&C.nodeType===8)if(f=C.data,f==="/$"){if(g===0){t.removeChild(C),Xr(s);return}g--}else f!=="$"&&f!=="$?"&&f!=="$!"||g++;f=C}while(f);Xr(s)}function qi(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function th(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var f=t.data;if(f==="$"||f==="$!"||f==="$?"){if(s===0)return t;s--}else f==="/$"&&s++}t=t.previousSibling}return null}var lo=Math.random().toString(36).slice(2),si="__reactFiber$"+lo,na="__reactProps$"+lo,bi="__reactContainer$"+lo,qu="__reactEvents$"+lo,ex="__reactListeners$"+lo,tx="__reactHandles$"+lo;function Os(t){var s=t[si];if(s)return s;for(var f=t.parentNode;f;){if(s=f[bi]||f[si]){if(f=s.alternate,s.child!==null||f!==null&&f.child!==null)for(t=th(t);t!==null;){if(f=t[si])return f;t=th(t)}return s}t=f,f=t.parentNode}return null}function ra(t){return t=t[si]||t[bi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function uo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(a(33))}function hl(t){return t[na]||null}var Qu=[],co=-1;function Qi(t){return{current:t}}function $t(t){0>co||(t.current=Qu[co],Qu[co]=null,co--)}function Yt(t,s){co++,Qu[co]=t.current,t.current=s}var Ji={},Jn=Qi(Ji),gr=Qi(!1),Ps=Ji;function fo(t,s){var f=t.type.contextTypes;if(!f)return Ji;var g=t.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===s)return g.__reactInternalMemoizedMaskedChildContext;var C={},b;for(b in f)C[b]=s[b];return g&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=C),C}function mr(t){return t=t.childContextTypes,t!=null}function pl(){$t(gr),$t(Jn)}function nh(t,s,f){if(Jn.current!==Ji)throw Error(a(168));Yt(Jn,s),Yt(gr,f)}function rh(t,s,f){var g=t.stateNode;if(s=s.childContextTypes,typeof g.getChildContext!="function")return f;g=g.getChildContext();for(var C in g)if(!(C in s))throw Error(a(108,et(t)||"Unknown",C));return ge({},f,g)}function gl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ji,Ps=Jn.current,Yt(Jn,t),Yt(gr,gr.current),!0}function ih(t,s,f){var g=t.stateNode;if(!g)throw Error(a(169));f?(t=rh(t,s,Ps),g.__reactInternalMemoizedMergedChildContext=t,$t(gr),$t(Jn),Yt(Jn,t)):$t(gr),Yt(gr,f)}var Ti=null,ml=!1,Ju=!1;function sh(t){Ti===null?Ti=[t]:Ti.push(t)}function nx(t){ml=!0,sh(t)}function es(){if(!Ju&&Ti!==null){Ju=!0;var t=0,s=ht;try{var f=Ti;for(ht=1;t<f.length;t++){var g=f[t];do g=g(!0);while(g!==null)}Ti=null,ml=!1}catch(C){throw Ti!==null&&(Ti=Ti.slice(t+1)),lr(he,es),C}finally{ht=s,Ju=!1}}return null}var ho=[],po=0,xl=null,yl=0,Mr=[],Dr=0,Ms=null,Ii=1,Ni="";function Ds(t,s){ho[po++]=yl,ho[po++]=xl,xl=t,yl=s}function oh(t,s,f){Mr[Dr++]=Ii,Mr[Dr++]=Ni,Mr[Dr++]=Ms,Ms=t;var g=Ii;t=Ni;var C=32-ur(g)-1;g&=~(1<<C),f+=1;var b=32-ur(s)+C;if(30<b){var M=C-C%5;b=(g&(1<<M)-1).toString(32),g>>=M,C-=M,Ii=1<<32-ur(s)+C|f<<C|g,Ni=b+t}else Ii=1<<b|f<<C|g,Ni=t}function ec(t){t.return!==null&&(Ds(t,1),oh(t,1,0))}function tc(t){for(;t===xl;)xl=ho[--po],ho[po]=null,yl=ho[--po],ho[po]=null;for(;t===Ms;)Ms=Mr[--Dr],Mr[Dr]=null,Ni=Mr[--Dr],Mr[Dr]=null,Ii=Mr[--Dr],Mr[Dr]=null}var Tr=null,Ir=null,Jt=!1,Zr=null;function ah(t,s){var f=Fr(5,null,null,0);f.elementType="DELETED",f.stateNode=s,f.return=t,s=t.deletions,s===null?(t.deletions=[f],t.flags|=16):s.push(f)}function lh(t,s){switch(t.tag){case 5:var f=t.type;return s=s.nodeType!==1||f.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,Tr=t,Ir=qi(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,Tr=t,Ir=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(f=Ms!==null?{id:Ii,overflow:Ni}:null,t.memoizedState={dehydrated:s,treeContext:f,retryLane:1073741824},f=Fr(18,null,null,0),f.stateNode=s,f.return=t,t.child=f,Tr=t,Ir=null,!0):!1;default:return!1}}function nc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rc(t){if(Jt){var s=Ir;if(s){var f=s;if(!lh(t,s)){if(nc(t))throw Error(a(418));s=qi(f.nextSibling);var g=Tr;s&&lh(t,s)?ah(g,f):(t.flags=t.flags&-4097|2,Jt=!1,Tr=t)}}else{if(nc(t))throw Error(a(418));t.flags=t.flags&-4097|2,Jt=!1,Tr=t}}}function uh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tr=t}function wl(t){if(t!==Tr)return!1;if(!Jt)return uh(t),Jt=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!Ku(t.type,t.memoizedProps)),s&&(s=Ir)){if(nc(t))throw ch(),Error(a(418));for(;s;)ah(t,s),s=qi(s.nextSibling)}if(uh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var f=t.data;if(f==="/$"){if(s===0){Ir=qi(t.nextSibling);break e}s--}else f!=="$"&&f!=="$!"&&f!=="$?"||s++}t=t.nextSibling}Ir=null}}else Ir=Tr?qi(t.stateNode.nextSibling):null;return!0}function ch(){for(var t=Ir;t;)t=qi(t.nextSibling)}function go(){Ir=Tr=null,Jt=!1}function ic(t){Zr===null?Zr=[t]:Zr.push(t)}var rx=ee.ReactCurrentBatchConfig;function ia(t,s,f){if(t=f.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(a(309));var g=f.stateNode}if(!g)throw Error(a(147,t));var C=g,b=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===b?s.ref:(s=function(M){var z=C.refs;M===null?delete z[b]:z[b]=M},s._stringRef=b,s)}if(typeof t!="string")throw Error(a(284));if(!f._owner)throw Error(a(290,t))}return t}function vl(t,s){throw t=Object.prototype.toString.call(s),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function fh(t){var s=t._init;return s(t._payload)}function dh(t){function s(ne,K){if(t){var re=ne.deletions;re===null?(ne.deletions=[K],ne.flags|=16):re.push(K)}}function f(ne,K){if(!t)return null;for(;K!==null;)s(ne,K),K=K.sibling;return null}function g(ne,K){for(ne=new Map;K!==null;)K.key!==null?ne.set(K.key,K):ne.set(K.index,K),K=K.sibling;return ne}function C(ne,K){return ne=ls(ne,K),ne.index=0,ne.sibling=null,ne}function b(ne,K,re){return ne.index=re,t?(re=ne.alternate,re!==null?(re=re.index,re<K?(ne.flags|=2,K):re):(ne.flags|=2,K)):(ne.flags|=1048576,K)}function M(ne){return t&&ne.alternate===null&&(ne.flags|=2),ne}function z(ne,K,re,Ie){return K===null||K.tag!==6?(K=Zc(re,ne.mode,Ie),K.return=ne,K):(K=C(K,re),K.return=ne,K)}function X(ne,K,re,Ie){var He=re.type;return He===Q?ye(ne,K,re.props.children,Ie,re.key):K!==null&&(K.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===we&&fh(He)===K.type)?(Ie=C(K,re.props),Ie.ref=ia(ne,K,re),Ie.return=ne,Ie):(Ie=Hl(re.type,re.key,re.props,null,ne.mode,Ie),Ie.ref=ia(ne,K,re),Ie.return=ne,Ie)}function le(ne,K,re,Ie){return K===null||K.tag!==4||K.stateNode.containerInfo!==re.containerInfo||K.stateNode.implementation!==re.implementation?(K=$c(re,ne.mode,Ie),K.return=ne,K):(K=C(K,re.children||[]),K.return=ne,K)}function ye(ne,K,re,Ie,He){return K===null||K.tag!==7?(K=zs(re,ne.mode,Ie,He),K.return=ne,K):(K=C(K,re),K.return=ne,K)}function Ce(ne,K,re){if(typeof K=="string"&&K!==""||typeof K=="number")return K=Zc(""+K,ne.mode,re),K.return=ne,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case ce:return re=Hl(K.type,K.key,K.props,null,ne.mode,re),re.ref=ia(ne,null,K),re.return=ne,re;case ie:return K=$c(K,ne.mode,re),K.return=ne,K;case we:var Ie=K._init;return Ce(ne,Ie(K._payload),re)}if(tn(K)||pe(K))return K=zs(K,ne.mode,re,null),K.return=ne,K;vl(ne,K)}return null}function me(ne,K,re,Ie){var He=K!==null?K.key:null;if(typeof re=="string"&&re!==""||typeof re=="number")return He!==null?null:z(ne,K,""+re,Ie);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case ce:return re.key===He?X(ne,K,re,Ie):null;case ie:return re.key===He?le(ne,K,re,Ie):null;case we:return He=re._init,me(ne,K,He(re._payload),Ie)}if(tn(re)||pe(re))return He!==null?null:ye(ne,K,re,Ie,null);vl(ne,re)}return null}function De(ne,K,re,Ie,He){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return ne=ne.get(re)||null,z(K,ne,""+Ie,He);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case ce:return ne=ne.get(Ie.key===null?re:Ie.key)||null,X(K,ne,Ie,He);case ie:return ne=ne.get(Ie.key===null?re:Ie.key)||null,le(K,ne,Ie,He);case we:var Ze=Ie._init;return De(ne,K,re,Ze(Ie._payload),He)}if(tn(Ie)||pe(Ie))return ne=ne.get(re)||null,ye(K,ne,Ie,He,null);vl(K,Ie)}return null}function Fe(ne,K,re,Ie){for(var He=null,Ze=null,$e=K,tt=K=0,zn=null;$e!==null&&tt<re.length;tt++){$e.index>tt?(zn=$e,$e=null):zn=$e.sibling;var _t=me(ne,$e,re[tt],Ie);if(_t===null){$e===null&&($e=zn);break}t&&$e&&_t.alternate===null&&s(ne,$e),K=b(_t,K,tt),Ze===null?He=_t:Ze.sibling=_t,Ze=_t,$e=zn}if(tt===re.length)return f(ne,$e),Jt&&Ds(ne,tt),He;if($e===null){for(;tt<re.length;tt++)$e=Ce(ne,re[tt],Ie),$e!==null&&(K=b($e,K,tt),Ze===null?He=$e:Ze.sibling=$e,Ze=$e);return Jt&&Ds(ne,tt),He}for($e=g(ne,$e);tt<re.length;tt++)zn=De($e,ne,tt,re[tt],Ie),zn!==null&&(t&&zn.alternate!==null&&$e.delete(zn.key===null?tt:zn.key),K=b(zn,K,tt),Ze===null?He=zn:Ze.sibling=zn,Ze=zn);return t&&$e.forEach(function(us){return s(ne,us)}),Jt&&Ds(ne,tt),He}function ze(ne,K,re,Ie){var He=pe(re);if(typeof He!="function")throw Error(a(150));if(re=He.call(re),re==null)throw Error(a(151));for(var Ze=He=null,$e=K,tt=K=0,zn=null,_t=re.next();$e!==null&&!_t.done;tt++,_t=re.next()){$e.index>tt?(zn=$e,$e=null):zn=$e.sibling;var us=me(ne,$e,_t.value,Ie);if(us===null){$e===null&&($e=zn);break}t&&$e&&us.alternate===null&&s(ne,$e),K=b(us,K,tt),Ze===null?He=us:Ze.sibling=us,Ze=us,$e=zn}if(_t.done)return f(ne,$e),Jt&&Ds(ne,tt),He;if($e===null){for(;!_t.done;tt++,_t=re.next())_t=Ce(ne,_t.value,Ie),_t!==null&&(K=b(_t,K,tt),Ze===null?He=_t:Ze.sibling=_t,Ze=_t);return Jt&&Ds(ne,tt),He}for($e=g(ne,$e);!_t.done;tt++,_t=re.next())_t=De($e,ne,tt,_t.value,Ie),_t!==null&&(t&&_t.alternate!==null&&$e.delete(_t.key===null?tt:_t.key),K=b(_t,K,tt),Ze===null?He=_t:Ze.sibling=_t,Ze=_t);return t&&$e.forEach(function(Lx){return s(ne,Lx)}),Jt&&Ds(ne,tt),He}function vn(ne,K,re,Ie){if(typeof re=="object"&&re!==null&&re.type===Q&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case ce:e:{for(var He=re.key,Ze=K;Ze!==null;){if(Ze.key===He){if(He=re.type,He===Q){if(Ze.tag===7){f(ne,Ze.sibling),K=C(Ze,re.props.children),K.return=ne,ne=K;break e}}else if(Ze.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===we&&fh(He)===Ze.type){f(ne,Ze.sibling),K=C(Ze,re.props),K.ref=ia(ne,Ze,re),K.return=ne,ne=K;break e}f(ne,Ze);break}else s(ne,Ze);Ze=Ze.sibling}re.type===Q?(K=zs(re.props.children,ne.mode,Ie,re.key),K.return=ne,ne=K):(Ie=Hl(re.type,re.key,re.props,null,ne.mode,Ie),Ie.ref=ia(ne,K,re),Ie.return=ne,ne=Ie)}return M(ne);case ie:e:{for(Ze=re.key;K!==null;){if(K.key===Ze)if(K.tag===4&&K.stateNode.containerInfo===re.containerInfo&&K.stateNode.implementation===re.implementation){f(ne,K.sibling),K=C(K,re.children||[]),K.return=ne,ne=K;break e}else{f(ne,K);break}else s(ne,K);K=K.sibling}K=$c(re,ne.mode,Ie),K.return=ne,ne=K}return M(ne);case we:return Ze=re._init,vn(ne,K,Ze(re._payload),Ie)}if(tn(re))return Fe(ne,K,re,Ie);if(pe(re))return ze(ne,K,re,Ie);vl(ne,re)}return typeof re=="string"&&re!==""||typeof re=="number"?(re=""+re,K!==null&&K.tag===6?(f(ne,K.sibling),K=C(K,re),K.return=ne,ne=K):(f(ne,K),K=Zc(re,ne.mode,Ie),K.return=ne,ne=K),M(ne)):f(ne,K)}return vn}var mo=dh(!0),hh=dh(!1),Cl=Qi(null),El=null,xo=null,sc=null;function oc(){sc=xo=El=null}function ac(t){var s=Cl.current;$t(Cl),t._currentValue=s}function lc(t,s,f){for(;t!==null;){var g=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,g!==null&&(g.childLanes|=s)):g!==null&&(g.childLanes&s)!==s&&(g.childLanes|=s),t===f)break;t=t.return}}function yo(t,s){El=t,sc=xo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(xr=!0),t.firstContext=null)}function kr(t){var s=t._currentValue;if(sc!==t)if(t={context:t,memoizedValue:s,next:null},xo===null){if(El===null)throw Error(a(308));xo=t,El.dependencies={lanes:0,firstContext:t}}else xo=xo.next=t;return s}var ks=null;function uc(t){ks===null?ks=[t]:ks.push(t)}function ph(t,s,f,g){var C=s.interleaved;return C===null?(f.next=f,uc(s)):(f.next=C.next,C.next=f),s.interleaved=f,Ri(t,g)}function Ri(t,s){t.lanes|=s;var f=t.alternate;for(f!==null&&(f.lanes|=s),f=t,t=t.return;t!==null;)t.childLanes|=s,f=t.alternate,f!==null&&(f.childLanes|=s),f=t,t=t.return;return f.tag===3?f.stateNode:null}var ts=!1;function cc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gh(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function _i(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function ns(t,s,f){var g=t.updateQueue;if(g===null)return null;if(g=g.shared,Rt&2){var C=g.pending;return C===null?s.next=s:(s.next=C.next,C.next=s),g.pending=s,Ri(t,f)}return C=g.interleaved,C===null?(s.next=s,uc(g)):(s.next=C.next,C.next=s),g.interleaved=s,Ri(t,f)}function Al(t,s,f){if(s=s.updateQueue,s!==null&&(s=s.shared,(f&4194240)!==0)){var g=s.lanes;g&=t.pendingLanes,f|=g,s.lanes=f,cn(t,f)}}function mh(t,s){var f=t.updateQueue,g=t.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var C=null,b=null;if(f=f.firstBaseUpdate,f!==null){do{var M={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};b===null?C=b=M:b=b.next=M,f=f.next}while(f!==null);b===null?C=b=s:b=b.next=s}else C=b=s;f={baseState:g.baseState,firstBaseUpdate:C,lastBaseUpdate:b,shared:g.shared,effects:g.effects},t.updateQueue=f;return}t=f.lastBaseUpdate,t===null?f.firstBaseUpdate=s:t.next=s,f.lastBaseUpdate=s}function Sl(t,s,f,g){var C=t.updateQueue;ts=!1;var b=C.firstBaseUpdate,M=C.lastBaseUpdate,z=C.shared.pending;if(z!==null){C.shared.pending=null;var X=z,le=X.next;X.next=null,M===null?b=le:M.next=le,M=X;var ye=t.alternate;ye!==null&&(ye=ye.updateQueue,z=ye.lastBaseUpdate,z!==M&&(z===null?ye.firstBaseUpdate=le:z.next=le,ye.lastBaseUpdate=X))}if(b!==null){var Ce=C.baseState;M=0,ye=le=X=null,z=b;do{var me=z.lane,De=z.eventTime;if((g&me)===me){ye!==null&&(ye=ye.next={eventTime:De,lane:0,tag:z.tag,payload:z.payload,callback:z.callback,next:null});e:{var Fe=t,ze=z;switch(me=s,De=f,ze.tag){case 1:if(Fe=ze.payload,typeof Fe=="function"){Ce=Fe.call(De,Ce,me);break e}Ce=Fe;break e;case 3:Fe.flags=Fe.flags&-65537|128;case 0:if(Fe=ze.payload,me=typeof Fe=="function"?Fe.call(De,Ce,me):Fe,me==null)break e;Ce=ge({},Ce,me);break e;case 2:ts=!0}}z.callback!==null&&z.lane!==0&&(t.flags|=64,me=C.effects,me===null?C.effects=[z]:me.push(z))}else De={eventTime:De,lane:me,tag:z.tag,payload:z.payload,callback:z.callback,next:null},ye===null?(le=ye=De,X=Ce):ye=ye.next=De,M|=me;if(z=z.next,z===null){if(z=C.shared.pending,z===null)break;me=z,z=me.next,me.next=null,C.lastBaseUpdate=me,C.shared.pending=null}}while(!0);if(ye===null&&(X=Ce),C.baseState=X,C.firstBaseUpdate=le,C.lastBaseUpdate=ye,s=C.shared.interleaved,s!==null){C=s;do M|=C.lane,C=C.next;while(C!==s)}else b===null&&(C.shared.lanes=0);Fs|=M,t.lanes=M,t.memoizedState=Ce}}function xh(t,s,f){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var g=t[s],C=g.callback;if(C!==null){if(g.callback=null,g=f,typeof C!="function")throw Error(a(191,C));C.call(g)}}}var sa={},oi=Qi(sa),oa=Qi(sa),aa=Qi(sa);function Ls(t){if(t===sa)throw Error(a(174));return t}function fc(t,s){switch(Yt(aa,s),Yt(oa,t),Yt(oi,sa),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:$n(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=$n(s,t)}$t(oi),Yt(oi,s)}function wo(){$t(oi),$t(oa),$t(aa)}function yh(t){Ls(aa.current);var s=Ls(oi.current),f=$n(s,t.type);s!==f&&(Yt(oa,t),Yt(oi,f))}function dc(t){oa.current===t&&($t(oi),$t(oa))}var sn=Qi(0);function bl(t){for(var s=t;s!==null;){if(s.tag===13){var f=s.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var hc=[];function pc(){for(var t=0;t<hc.length;t++)hc[t]._workInProgressVersionPrimary=null;hc.length=0}var Tl=ee.ReactCurrentDispatcher,gc=ee.ReactCurrentBatchConfig,Bs=0,on=null,Mn=null,Vn=null,Il=!1,la=!1,ua=0,ix=0;function er(){throw Error(a(321))}function mc(t,s){if(s===null)return!1;for(var f=0;f<s.length&&f<t.length;f++)if(!$(t[f],s[f]))return!1;return!0}function xc(t,s,f,g,C,b){if(Bs=b,on=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Tl.current=t===null||t.memoizedState===null?lx:ux,t=f(g,C),la){b=0;do{if(la=!1,ua=0,25<=b)throw Error(a(301));b+=1,Vn=Mn=null,s.updateQueue=null,Tl.current=cx,t=f(g,C)}while(la)}if(Tl.current=_l,s=Mn!==null&&Mn.next!==null,Bs=0,Vn=Mn=on=null,Il=!1,s)throw Error(a(300));return t}function yc(){var t=ua!==0;return ua=0,t}function ai(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vn===null?on.memoizedState=Vn=t:Vn=Vn.next=t,Vn}function Lr(){if(Mn===null){var t=on.alternate;t=t!==null?t.memoizedState:null}else t=Mn.next;var s=Vn===null?on.memoizedState:Vn.next;if(s!==null)Vn=s,Mn=t;else{if(t===null)throw Error(a(310));Mn=t,t={memoizedState:Mn.memoizedState,baseState:Mn.baseState,baseQueue:Mn.baseQueue,queue:Mn.queue,next:null},Vn===null?on.memoizedState=Vn=t:Vn=Vn.next=t}return Vn}function ca(t,s){return typeof s=="function"?s(t):s}function wc(t){var s=Lr(),f=s.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=t;var g=Mn,C=g.baseQueue,b=f.pending;if(b!==null){if(C!==null){var M=C.next;C.next=b.next,b.next=M}g.baseQueue=C=b,f.pending=null}if(C!==null){b=C.next,g=g.baseState;var z=M=null,X=null,le=b;do{var ye=le.lane;if((Bs&ye)===ye)X!==null&&(X=X.next={lane:0,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),g=le.hasEagerState?le.eagerState:t(g,le.action);else{var Ce={lane:ye,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null};X===null?(z=X=Ce,M=g):X=X.next=Ce,on.lanes|=ye,Fs|=ye}le=le.next}while(le!==null&&le!==b);X===null?M=g:X.next=z,$(g,s.memoizedState)||(xr=!0),s.memoizedState=g,s.baseState=M,s.baseQueue=X,f.lastRenderedState=g}if(t=f.interleaved,t!==null){C=t;do b=C.lane,on.lanes|=b,Fs|=b,C=C.next;while(C!==t)}else C===null&&(f.lanes=0);return[s.memoizedState,f.dispatch]}function vc(t){var s=Lr(),f=s.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=t;var g=f.dispatch,C=f.pending,b=s.memoizedState;if(C!==null){f.pending=null;var M=C=C.next;do b=t(b,M.action),M=M.next;while(M!==C);$(b,s.memoizedState)||(xr=!0),s.memoizedState=b,s.baseQueue===null&&(s.baseState=b),f.lastRenderedState=b}return[b,g]}function wh(){}function vh(t,s){var f=on,g=Lr(),C=s(),b=!$(g.memoizedState,C);if(b&&(g.memoizedState=C,xr=!0),g=g.queue,Cc(Ah.bind(null,f,g,t),[t]),g.getSnapshot!==s||b||Vn!==null&&Vn.memoizedState.tag&1){if(f.flags|=2048,fa(9,Eh.bind(null,f,g,C,s),void 0,null),Un===null)throw Error(a(349));Bs&30||Ch(f,s,C)}return C}function Ch(t,s,f){t.flags|=16384,t={getSnapshot:s,value:f},s=on.updateQueue,s===null?(s={lastEffect:null,stores:null},on.updateQueue=s,s.stores=[t]):(f=s.stores,f===null?s.stores=[t]:f.push(t))}function Eh(t,s,f,g){s.value=f,s.getSnapshot=g,Sh(s)&&bh(t)}function Ah(t,s,f){return f(function(){Sh(s)&&bh(t)})}function Sh(t){var s=t.getSnapshot;t=t.value;try{var f=s();return!$(t,f)}catch{return!0}}function bh(t){var s=Ri(t,1);s!==null&&Jr(s,t,1,-1)}function Th(t){var s=ai();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:t},s.queue=t,t=t.dispatch=ax.bind(null,on,t),[s.memoizedState,t]}function fa(t,s,f,g){return t={tag:t,create:s,destroy:f,deps:g,next:null},s=on.updateQueue,s===null?(s={lastEffect:null,stores:null},on.updateQueue=s,s.lastEffect=t.next=t):(f=s.lastEffect,f===null?s.lastEffect=t.next=t:(g=f.next,f.next=t,t.next=g,s.lastEffect=t)),t}function Ih(){return Lr().memoizedState}function Nl(t,s,f,g){var C=ai();on.flags|=t,C.memoizedState=fa(1|s,f,void 0,g===void 0?null:g)}function Rl(t,s,f,g){var C=Lr();g=g===void 0?null:g;var b=void 0;if(Mn!==null){var M=Mn.memoizedState;if(b=M.destroy,g!==null&&mc(g,M.deps)){C.memoizedState=fa(s,f,b,g);return}}on.flags|=t,C.memoizedState=fa(1|s,f,b,g)}function Nh(t,s){return Nl(8390656,8,t,s)}function Cc(t,s){return Rl(2048,8,t,s)}function Rh(t,s){return Rl(4,2,t,s)}function _h(t,s){return Rl(4,4,t,s)}function Oh(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Ph(t,s,f){return f=f!=null?f.concat([t]):null,Rl(4,4,Oh.bind(null,s,t),f)}function Ec(){}function Mh(t,s){var f=Lr();s=s===void 0?null:s;var g=f.memoizedState;return g!==null&&s!==null&&mc(s,g[1])?g[0]:(f.memoizedState=[t,s],t)}function Dh(t,s){var f=Lr();s=s===void 0?null:s;var g=f.memoizedState;return g!==null&&s!==null&&mc(s,g[1])?g[0]:(t=t(),f.memoizedState=[t,s],t)}function kh(t,s,f){return Bs&21?($(f,s)||(f=Rn(),on.lanes|=f,Fs|=f,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,xr=!0),t.memoizedState=f)}function sx(t,s){var f=ht;ht=f!==0&&4>f?f:4,t(!0);var g=gc.transition;gc.transition={};try{t(!1),s()}finally{ht=f,gc.transition=g}}function Lh(){return Lr().memoizedState}function ox(t,s,f){var g=os(t);if(f={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null},Bh(t))Fh(s,f);else if(f=ph(t,s,f,g),f!==null){var C=fr();Jr(f,t,g,C),jh(f,s,g)}}function ax(t,s,f){var g=os(t),C={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null};if(Bh(t))Fh(s,C);else{var b=t.alternate;if(t.lanes===0&&(b===null||b.lanes===0)&&(b=s.lastRenderedReducer,b!==null))try{var M=s.lastRenderedState,z=b(M,f);if(C.hasEagerState=!0,C.eagerState=z,$(z,M)){var X=s.interleaved;X===null?(C.next=C,uc(s)):(C.next=X.next,X.next=C),s.interleaved=C;return}}catch{}finally{}f=ph(t,s,C,g),f!==null&&(C=fr(),Jr(f,t,g,C),jh(f,s,g))}}function Bh(t){var s=t.alternate;return t===on||s!==null&&s===on}function Fh(t,s){la=Il=!0;var f=t.pending;f===null?s.next=s:(s.next=f.next,f.next=s),t.pending=s}function jh(t,s,f){if(f&4194240){var g=s.lanes;g&=t.pendingLanes,f|=g,s.lanes=f,cn(t,f)}}var _l={readContext:kr,useCallback:er,useContext:er,useEffect:er,useImperativeHandle:er,useInsertionEffect:er,useLayoutEffect:er,useMemo:er,useReducer:er,useRef:er,useState:er,useDebugValue:er,useDeferredValue:er,useTransition:er,useMutableSource:er,useSyncExternalStore:er,useId:er,unstable_isNewReconciler:!1},lx={readContext:kr,useCallback:function(t,s){return ai().memoizedState=[t,s===void 0?null:s],t},useContext:kr,useEffect:Nh,useImperativeHandle:function(t,s,f){return f=f!=null?f.concat([t]):null,Nl(4194308,4,Oh.bind(null,s,t),f)},useLayoutEffect:function(t,s){return Nl(4194308,4,t,s)},useInsertionEffect:function(t,s){return Nl(4,2,t,s)},useMemo:function(t,s){var f=ai();return s=s===void 0?null:s,t=t(),f.memoizedState=[t,s],t},useReducer:function(t,s,f){var g=ai();return s=f!==void 0?f(s):s,g.memoizedState=g.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},g.queue=t,t=t.dispatch=ox.bind(null,on,t),[g.memoizedState,t]},useRef:function(t){var s=ai();return t={current:t},s.memoizedState=t},useState:Th,useDebugValue:Ec,useDeferredValue:function(t){return ai().memoizedState=t},useTransition:function(){var t=Th(!1),s=t[0];return t=sx.bind(null,t[1]),ai().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,f){var g=on,C=ai();if(Jt){if(f===void 0)throw Error(a(407));f=f()}else{if(f=s(),Un===null)throw Error(a(349));Bs&30||Ch(g,s,f)}C.memoizedState=f;var b={value:f,getSnapshot:s};return C.queue=b,Nh(Ah.bind(null,g,b,t),[t]),g.flags|=2048,fa(9,Eh.bind(null,g,b,f,s),void 0,null),f},useId:function(){var t=ai(),s=Un.identifierPrefix;if(Jt){var f=Ni,g=Ii;f=(g&~(1<<32-ur(g)-1)).toString(32)+f,s=":"+s+"R"+f,f=ua++,0<f&&(s+="H"+f.toString(32)),s+=":"}else f=ix++,s=":"+s+"r"+f.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},ux={readContext:kr,useCallback:Mh,useContext:kr,useEffect:Cc,useImperativeHandle:Ph,useInsertionEffect:Rh,useLayoutEffect:_h,useMemo:Dh,useReducer:wc,useRef:Ih,useState:function(){return wc(ca)},useDebugValue:Ec,useDeferredValue:function(t){var s=Lr();return kh(s,Mn.memoizedState,t)},useTransition:function(){var t=wc(ca)[0],s=Lr().memoizedState;return[t,s]},useMutableSource:wh,useSyncExternalStore:vh,useId:Lh,unstable_isNewReconciler:!1},cx={readContext:kr,useCallback:Mh,useContext:kr,useEffect:Cc,useImperativeHandle:Ph,useInsertionEffect:Rh,useLayoutEffect:_h,useMemo:Dh,useReducer:vc,useRef:Ih,useState:function(){return vc(ca)},useDebugValue:Ec,useDeferredValue:function(t){var s=Lr();return Mn===null?s.memoizedState=t:kh(s,Mn.memoizedState,t)},useTransition:function(){var t=vc(ca)[0],s=Lr().memoizedState;return[t,s]},useMutableSource:wh,useSyncExternalStore:vh,useId:Lh,unstable_isNewReconciler:!1};function $r(t,s){if(t&&t.defaultProps){s=ge({},s),t=t.defaultProps;for(var f in t)s[f]===void 0&&(s[f]=t[f]);return s}return s}function Ac(t,s,f,g){s=t.memoizedState,f=f(g,s),f=f==null?s:ge({},s,f),t.memoizedState=f,t.lanes===0&&(t.updateQueue.baseState=f)}var Ol={isMounted:function(t){return(t=t._reactInternals)?_e(t)===t:!1},enqueueSetState:function(t,s,f){t=t._reactInternals;var g=fr(),C=os(t),b=_i(g,C);b.payload=s,f!=null&&(b.callback=f),s=ns(t,b,C),s!==null&&(Jr(s,t,C,g),Al(s,t,C))},enqueueReplaceState:function(t,s,f){t=t._reactInternals;var g=fr(),C=os(t),b=_i(g,C);b.tag=1,b.payload=s,f!=null&&(b.callback=f),s=ns(t,b,C),s!==null&&(Jr(s,t,C,g),Al(s,t,C))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var f=fr(),g=os(t),C=_i(f,g);C.tag=2,s!=null&&(C.callback=s),s=ns(t,C,g),s!==null&&(Jr(s,t,g,f),Al(s,t,g))}};function Vh(t,s,f,g,C,b,M){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(g,b,M):s.prototype&&s.prototype.isPureReactComponent?!se(f,g)||!se(C,b):!0}function Uh(t,s,f){var g=!1,C=Ji,b=s.contextType;return typeof b=="object"&&b!==null?b=kr(b):(C=mr(s)?Ps:Jn.current,g=s.contextTypes,b=(g=g!=null)?fo(t,C):Ji),s=new s(f,b),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ol,t.stateNode=s,s._reactInternals=t,g&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=C,t.__reactInternalMemoizedMaskedChildContext=b),s}function zh(t,s,f,g){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(f,g),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(f,g),s.state!==t&&Ol.enqueueReplaceState(s,s.state,null)}function Sc(t,s,f,g){var C=t.stateNode;C.props=f,C.state=t.memoizedState,C.refs={},cc(t);var b=s.contextType;typeof b=="object"&&b!==null?C.context=kr(b):(b=mr(s)?Ps:Jn.current,C.context=fo(t,b)),C.state=t.memoizedState,b=s.getDerivedStateFromProps,typeof b=="function"&&(Ac(t,s,b,f),C.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(s=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),s!==C.state&&Ol.enqueueReplaceState(C,C.state,null),Sl(t,f,C,g),C.state=t.memoizedState),typeof C.componentDidMount=="function"&&(t.flags|=4194308)}function vo(t,s){try{var f="",g=s;do f+=ut(g),g=g.return;while(g);var C=f}catch(b){C=`
Error generating stack: `+b.message+`
`+b.stack}return{value:t,source:s,stack:C,digest:null}}function bc(t,s,f){return{value:t,source:null,stack:f??null,digest:s??null}}function Tc(t,s){try{console.error(s.value)}catch(f){setTimeout(function(){throw f})}}var fx=typeof WeakMap=="function"?WeakMap:Map;function Wh(t,s,f){f=_i(-1,f),f.tag=3,f.payload={element:null};var g=s.value;return f.callback=function(){Fl||(Fl=!0,Uc=g),Tc(t,s)},f}function Hh(t,s,f){f=_i(-1,f),f.tag=3;var g=t.type.getDerivedStateFromError;if(typeof g=="function"){var C=s.value;f.payload=function(){return g(C)},f.callback=function(){Tc(t,s)}}var b=t.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(f.callback=function(){Tc(t,s),typeof g!="function"&&(is===null?is=new Set([this]):is.add(this));var M=s.stack;this.componentDidCatch(s.value,{componentStack:M!==null?M:""})}),f}function Gh(t,s,f){var g=t.pingCache;if(g===null){g=t.pingCache=new fx;var C=new Set;g.set(s,C)}else C=g.get(s),C===void 0&&(C=new Set,g.set(s,C));C.has(f)||(C.add(f),t=bx.bind(null,t,s,f),s.then(t,t))}function Xh(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function Yh(t,s,f,g,C){return t.mode&1?(t.flags|=65536,t.lanes=C,t):(t===s?t.flags|=65536:(t.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(s=_i(-1,1),s.tag=2,ns(f,s,1))),f.lanes|=1),t)}var dx=ee.ReactCurrentOwner,xr=!1;function cr(t,s,f,g){s.child=t===null?hh(s,null,f,g):mo(s,t.child,f,g)}function Kh(t,s,f,g,C){f=f.render;var b=s.ref;return yo(s,C),g=xc(t,s,f,g,b,C),f=yc(),t!==null&&!xr?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~C,Oi(t,s,C)):(Jt&&f&&ec(s),s.flags|=1,cr(t,s,g,C),s.child)}function Zh(t,s,f,g,C){if(t===null){var b=f.type;return typeof b=="function"&&!Kc(b)&&b.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(s.tag=15,s.type=b,$h(t,s,b,g,C)):(t=Hl(f.type,null,g,s,s.mode,C),t.ref=s.ref,t.return=s,s.child=t)}if(b=t.child,!(t.lanes&C)){var M=b.memoizedProps;if(f=f.compare,f=f!==null?f:se,f(M,g)&&t.ref===s.ref)return Oi(t,s,C)}return s.flags|=1,t=ls(b,g),t.ref=s.ref,t.return=s,s.child=t}function $h(t,s,f,g,C){if(t!==null){var b=t.memoizedProps;if(se(b,g)&&t.ref===s.ref)if(xr=!1,s.pendingProps=g=b,(t.lanes&C)!==0)t.flags&131072&&(xr=!0);else return s.lanes=t.lanes,Oi(t,s,C)}return Ic(t,s,f,g,C)}function qh(t,s,f){var g=s.pendingProps,C=g.children,b=t!==null?t.memoizedState:null;if(g.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yt(Eo,Nr),Nr|=f;else{if(!(f&1073741824))return t=b!==null?b.baseLanes|f:f,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Yt(Eo,Nr),Nr|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=b!==null?b.baseLanes:f,Yt(Eo,Nr),Nr|=g}else b!==null?(g=b.baseLanes|f,s.memoizedState=null):g=f,Yt(Eo,Nr),Nr|=g;return cr(t,s,C,f),s.child}function Qh(t,s){var f=s.ref;(t===null&&f!==null||t!==null&&t.ref!==f)&&(s.flags|=512,s.flags|=2097152)}function Ic(t,s,f,g,C){var b=mr(f)?Ps:Jn.current;return b=fo(s,b),yo(s,C),f=xc(t,s,f,g,b,C),g=yc(),t!==null&&!xr?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~C,Oi(t,s,C)):(Jt&&g&&ec(s),s.flags|=1,cr(t,s,f,C),s.child)}function Jh(t,s,f,g,C){if(mr(f)){var b=!0;gl(s)}else b=!1;if(yo(s,C),s.stateNode===null)Ml(t,s),Uh(s,f,g),Sc(s,f,g,C),g=!0;else if(t===null){var M=s.stateNode,z=s.memoizedProps;M.props=z;var X=M.context,le=f.contextType;typeof le=="object"&&le!==null?le=kr(le):(le=mr(f)?Ps:Jn.current,le=fo(s,le));var ye=f.getDerivedStateFromProps,Ce=typeof ye=="function"||typeof M.getSnapshotBeforeUpdate=="function";Ce||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(z!==g||X!==le)&&zh(s,M,g,le),ts=!1;var me=s.memoizedState;M.state=me,Sl(s,g,M,C),X=s.memoizedState,z!==g||me!==X||gr.current||ts?(typeof ye=="function"&&(Ac(s,f,ye,g),X=s.memoizedState),(z=ts||Vh(s,f,z,g,me,X,le))?(Ce||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(s.flags|=4194308)):(typeof M.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=g,s.memoizedState=X),M.props=g,M.state=X,M.context=le,g=z):(typeof M.componentDidMount=="function"&&(s.flags|=4194308),g=!1)}else{M=s.stateNode,gh(t,s),z=s.memoizedProps,le=s.type===s.elementType?z:$r(s.type,z),M.props=le,Ce=s.pendingProps,me=M.context,X=f.contextType,typeof X=="object"&&X!==null?X=kr(X):(X=mr(f)?Ps:Jn.current,X=fo(s,X));var De=f.getDerivedStateFromProps;(ye=typeof De=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(z!==Ce||me!==X)&&zh(s,M,g,X),ts=!1,me=s.memoizedState,M.state=me,Sl(s,g,M,C);var Fe=s.memoizedState;z!==Ce||me!==Fe||gr.current||ts?(typeof De=="function"&&(Ac(s,f,De,g),Fe=s.memoizedState),(le=ts||Vh(s,f,le,g,me,Fe,X)||!1)?(ye||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(g,Fe,X),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(g,Fe,X)),typeof M.componentDidUpdate=="function"&&(s.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof M.componentDidUpdate!="function"||z===t.memoizedProps&&me===t.memoizedState||(s.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||z===t.memoizedProps&&me===t.memoizedState||(s.flags|=1024),s.memoizedProps=g,s.memoizedState=Fe),M.props=g,M.state=Fe,M.context=X,g=le):(typeof M.componentDidUpdate!="function"||z===t.memoizedProps&&me===t.memoizedState||(s.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||z===t.memoizedProps&&me===t.memoizedState||(s.flags|=1024),g=!1)}return Nc(t,s,f,g,b,C)}function Nc(t,s,f,g,C,b){Qh(t,s);var M=(s.flags&128)!==0;if(!g&&!M)return C&&ih(s,f,!1),Oi(t,s,b);g=s.stateNode,dx.current=s;var z=M&&typeof f.getDerivedStateFromError!="function"?null:g.render();return s.flags|=1,t!==null&&M?(s.child=mo(s,t.child,null,b),s.child=mo(s,null,z,b)):cr(t,s,z,b),s.memoizedState=g.state,C&&ih(s,f,!0),s.child}function e0(t){var s=t.stateNode;s.pendingContext?nh(t,s.pendingContext,s.pendingContext!==s.context):s.context&&nh(t,s.context,!1),fc(t,s.containerInfo)}function t0(t,s,f,g,C){return go(),ic(C),s.flags|=256,cr(t,s,f,g),s.child}var Rc={dehydrated:null,treeContext:null,retryLane:0};function _c(t){return{baseLanes:t,cachePool:null,transitions:null}}function n0(t,s,f){var g=s.pendingProps,C=sn.current,b=!1,M=(s.flags&128)!==0,z;if((z=M)||(z=t!==null&&t.memoizedState===null?!1:(C&2)!==0),z?(b=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(C|=1),Yt(sn,C&1),t===null)return rc(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(M=g.children,t=g.fallback,b?(g=s.mode,b=s.child,M={mode:"hidden",children:M},!(g&1)&&b!==null?(b.childLanes=0,b.pendingProps=M):b=Gl(M,g,0,null),t=zs(t,g,f,null),b.return=s,t.return=s,b.sibling=t,s.child=b,s.child.memoizedState=_c(f),s.memoizedState=Rc,t):Oc(s,M));if(C=t.memoizedState,C!==null&&(z=C.dehydrated,z!==null))return hx(t,s,M,g,z,C,f);if(b){b=g.fallback,M=s.mode,C=t.child,z=C.sibling;var X={mode:"hidden",children:g.children};return!(M&1)&&s.child!==C?(g=s.child,g.childLanes=0,g.pendingProps=X,s.deletions=null):(g=ls(C,X),g.subtreeFlags=C.subtreeFlags&14680064),z!==null?b=ls(z,b):(b=zs(b,M,f,null),b.flags|=2),b.return=s,g.return=s,g.sibling=b,s.child=g,g=b,b=s.child,M=t.child.memoizedState,M=M===null?_c(f):{baseLanes:M.baseLanes|f,cachePool:null,transitions:M.transitions},b.memoizedState=M,b.childLanes=t.childLanes&~f,s.memoizedState=Rc,g}return b=t.child,t=b.sibling,g=ls(b,{mode:"visible",children:g.children}),!(s.mode&1)&&(g.lanes=f),g.return=s,g.sibling=null,t!==null&&(f=s.deletions,f===null?(s.deletions=[t],s.flags|=16):f.push(t)),s.child=g,s.memoizedState=null,g}function Oc(t,s){return s=Gl({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function Pl(t,s,f,g){return g!==null&&ic(g),mo(s,t.child,null,f),t=Oc(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function hx(t,s,f,g,C,b,M){if(f)return s.flags&256?(s.flags&=-257,g=bc(Error(a(422))),Pl(t,s,M,g)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(b=g.fallback,C=s.mode,g=Gl({mode:"visible",children:g.children},C,0,null),b=zs(b,C,M,null),b.flags|=2,g.return=s,b.return=s,g.sibling=b,s.child=g,s.mode&1&&mo(s,t.child,null,M),s.child.memoizedState=_c(M),s.memoizedState=Rc,b);if(!(s.mode&1))return Pl(t,s,M,null);if(C.data==="$!"){if(g=C.nextSibling&&C.nextSibling.dataset,g)var z=g.dgst;return g=z,b=Error(a(419)),g=bc(b,g,void 0),Pl(t,s,M,g)}if(z=(M&t.childLanes)!==0,xr||z){if(g=Un,g!==null){switch(M&-M){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}C=C&(g.suspendedLanes|M)?0:C,C!==0&&C!==b.retryLane&&(b.retryLane=C,Ri(t,C),Jr(g,t,C,-1))}return Yc(),g=bc(Error(a(421))),Pl(t,s,M,g)}return C.data==="$?"?(s.flags|=128,s.child=t.child,s=Tx.bind(null,t),C._reactRetry=s,null):(t=b.treeContext,Ir=qi(C.nextSibling),Tr=s,Jt=!0,Zr=null,t!==null&&(Mr[Dr++]=Ii,Mr[Dr++]=Ni,Mr[Dr++]=Ms,Ii=t.id,Ni=t.overflow,Ms=s),s=Oc(s,g.children),s.flags|=4096,s)}function r0(t,s,f){t.lanes|=s;var g=t.alternate;g!==null&&(g.lanes|=s),lc(t.return,s,f)}function Pc(t,s,f,g,C){var b=t.memoizedState;b===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:C}:(b.isBackwards=s,b.rendering=null,b.renderingStartTime=0,b.last=g,b.tail=f,b.tailMode=C)}function i0(t,s,f){var g=s.pendingProps,C=g.revealOrder,b=g.tail;if(cr(t,s,g.children,f),g=sn.current,g&2)g=g&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&r0(t,f,s);else if(t.tag===19)r0(t,f,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}g&=1}if(Yt(sn,g),!(s.mode&1))s.memoizedState=null;else switch(C){case"forwards":for(f=s.child,C=null;f!==null;)t=f.alternate,t!==null&&bl(t)===null&&(C=f),f=f.sibling;f=C,f===null?(C=s.child,s.child=null):(C=f.sibling,f.sibling=null),Pc(s,!1,C,f,b);break;case"backwards":for(f=null,C=s.child,s.child=null;C!==null;){if(t=C.alternate,t!==null&&bl(t)===null){s.child=C;break}t=C.sibling,C.sibling=f,f=C,C=t}Pc(s,!0,f,null,b);break;case"together":Pc(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ml(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function Oi(t,s,f){if(t!==null&&(s.dependencies=t.dependencies),Fs|=s.lanes,!(f&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(a(153));if(s.child!==null){for(t=s.child,f=ls(t,t.pendingProps),s.child=f,f.return=s;t.sibling!==null;)t=t.sibling,f=f.sibling=ls(t,t.pendingProps),f.return=s;f.sibling=null}return s.child}function px(t,s,f){switch(s.tag){case 3:e0(s),go();break;case 5:yh(s);break;case 1:mr(s.type)&&gl(s);break;case 4:fc(s,s.stateNode.containerInfo);break;case 10:var g=s.type._context,C=s.memoizedProps.value;Yt(Cl,g._currentValue),g._currentValue=C;break;case 13:if(g=s.memoizedState,g!==null)return g.dehydrated!==null?(Yt(sn,sn.current&1),s.flags|=128,null):f&s.child.childLanes?n0(t,s,f):(Yt(sn,sn.current&1),t=Oi(t,s,f),t!==null?t.sibling:null);Yt(sn,sn.current&1);break;case 19:if(g=(f&s.childLanes)!==0,t.flags&128){if(g)return i0(t,s,f);s.flags|=128}if(C=s.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),Yt(sn,sn.current),g)break;return null;case 22:case 23:return s.lanes=0,qh(t,s,f)}return Oi(t,s,f)}var s0,Mc,o0,a0;s0=function(t,s){for(var f=s.child;f!==null;){if(f.tag===5||f.tag===6)t.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break;for(;f.sibling===null;){if(f.return===null||f.return===s)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},Mc=function(){},o0=function(t,s,f,g){var C=t.memoizedProps;if(C!==g){t=s.stateNode,Ls(oi.current);var b=null;switch(f){case"input":C=qt(t,C),g=qt(t,g),b=[];break;case"select":C=ge({},C,{value:void 0}),g=ge({},g,{value:void 0}),b=[];break;case"textarea":C=gn(t,C),g=gn(t,g),b=[];break;default:typeof C.onClick!="function"&&typeof g.onClick=="function"&&(t.onclick=dl)}It(f,g);var M;f=null;for(le in C)if(!g.hasOwnProperty(le)&&C.hasOwnProperty(le)&&C[le]!=null)if(le==="style"){var z=C[le];for(M in z)z.hasOwnProperty(M)&&(f||(f={}),f[M]="")}else le!=="dangerouslySetInnerHTML"&&le!=="children"&&le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&le!=="autoFocus"&&(p.hasOwnProperty(le)?b||(b=[]):(b=b||[]).push(le,null));for(le in g){var X=g[le];if(z=C!=null?C[le]:void 0,g.hasOwnProperty(le)&&X!==z&&(X!=null||z!=null))if(le==="style")if(z){for(M in z)!z.hasOwnProperty(M)||X&&X.hasOwnProperty(M)||(f||(f={}),f[M]="");for(M in X)X.hasOwnProperty(M)&&z[M]!==X[M]&&(f||(f={}),f[M]=X[M])}else f||(b||(b=[]),b.push(le,f)),f=X;else le==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,z=z?z.__html:void 0,X!=null&&z!==X&&(b=b||[]).push(le,X)):le==="children"?typeof X!="string"&&typeof X!="number"||(b=b||[]).push(le,""+X):le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&(p.hasOwnProperty(le)?(X!=null&&le==="onScroll"&&Zt("scroll",t),b||z===X||(b=[])):(b=b||[]).push(le,X))}f&&(b=b||[]).push("style",f);var le=b;(s.updateQueue=le)&&(s.flags|=4)}},a0=function(t,s,f,g){f!==g&&(s.flags|=4)};function da(t,s){if(!Jt)switch(t.tailMode){case"hidden":s=t.tail;for(var f=null;s!==null;)s.alternate!==null&&(f=s),s=s.sibling;f===null?t.tail=null:f.sibling=null;break;case"collapsed":f=t.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:g.sibling=null}}function tr(t){var s=t.alternate!==null&&t.alternate.child===t.child,f=0,g=0;if(s)for(var C=t.child;C!==null;)f|=C.lanes|C.childLanes,g|=C.subtreeFlags&14680064,g|=C.flags&14680064,C.return=t,C=C.sibling;else for(C=t.child;C!==null;)f|=C.lanes|C.childLanes,g|=C.subtreeFlags,g|=C.flags,C.return=t,C=C.sibling;return t.subtreeFlags|=g,t.childLanes=f,s}function gx(t,s,f){var g=s.pendingProps;switch(tc(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tr(s),null;case 1:return mr(s.type)&&pl(),tr(s),null;case 3:return g=s.stateNode,wo(),$t(gr),$t(Jn),pc(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(t===null||t.child===null)&&(wl(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Zr!==null&&(Hc(Zr),Zr=null))),Mc(t,s),tr(s),null;case 5:dc(s);var C=Ls(aa.current);if(f=s.type,t!==null&&s.stateNode!=null)o0(t,s,f,g,C),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!g){if(s.stateNode===null)throw Error(a(166));return tr(s),null}if(t=Ls(oi.current),wl(s)){g=s.stateNode,f=s.type;var b=s.memoizedProps;switch(g[si]=s,g[na]=b,t=(s.mode&1)!==0,f){case"dialog":Zt("cancel",g),Zt("close",g);break;case"iframe":case"object":case"embed":Zt("load",g);break;case"video":case"audio":for(C=0;C<Jo.length;C++)Zt(Jo[C],g);break;case"source":Zt("error",g);break;case"img":case"image":case"link":Zt("error",g),Zt("load",g);break;case"details":Zt("toggle",g);break;case"input":Ot(g,b),Zt("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!b.multiple},Zt("invalid",g);break;case"textarea":Mt(g,b),Zt("invalid",g)}It(f,b),C=null;for(var M in b)if(b.hasOwnProperty(M)){var z=b[M];M==="children"?typeof z=="string"?g.textContent!==z&&(b.suppressHydrationWarning!==!0&&fl(g.textContent,z,t),C=["children",z]):typeof z=="number"&&g.textContent!==""+z&&(b.suppressHydrationWarning!==!0&&fl(g.textContent,z,t),C=["children",""+z]):p.hasOwnProperty(M)&&z!=null&&M==="onScroll"&&Zt("scroll",g)}switch(f){case"input":Je(g),St(g,b,!0);break;case"textarea":Je(g),pt(g);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(g.onclick=dl)}g=C,s.updateQueue=g,g!==null&&(s.flags|=4)}else{M=C.nodeType===9?C:C.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=nt(f)),t==="http://www.w3.org/1999/xhtml"?f==="script"?(t=M.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof g.is=="string"?t=M.createElement(f,{is:g.is}):(t=M.createElement(f),f==="select"&&(M=t,g.multiple?M.multiple=!0:g.size&&(M.size=g.size))):t=M.createElementNS(t,f),t[si]=s,t[na]=g,s0(t,s,!1,!1),s.stateNode=t;e:{switch(M=Ut(f,g),f){case"dialog":Zt("cancel",t),Zt("close",t),C=g;break;case"iframe":case"object":case"embed":Zt("load",t),C=g;break;case"video":case"audio":for(C=0;C<Jo.length;C++)Zt(Jo[C],t);C=g;break;case"source":Zt("error",t),C=g;break;case"img":case"image":case"link":Zt("error",t),Zt("load",t),C=g;break;case"details":Zt("toggle",t),C=g;break;case"input":Ot(t,g),C=qt(t,g),Zt("invalid",t);break;case"option":C=g;break;case"select":t._wrapperState={wasMultiple:!!g.multiple},C=ge({},g,{value:void 0}),Zt("invalid",t);break;case"textarea":Mt(t,g),C=gn(t,g),Zt("invalid",t);break;default:C=g}It(f,C),z=C;for(b in z)if(z.hasOwnProperty(b)){var X=z[b];b==="style"?Ae(t,X):b==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,X!=null&&Ct(t,X)):b==="children"?typeof X=="string"?(f!=="textarea"||X!=="")&&nn(t,X):typeof X=="number"&&nn(t,""+X):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(p.hasOwnProperty(b)?X!=null&&b==="onScroll"&&Zt("scroll",t):X!=null&&W(t,b,X,M))}switch(f){case"input":Je(t),St(t,g,!1);break;case"textarea":Je(t),pt(t);break;case"option":g.value!=null&&t.setAttribute("value",""+Te(g.value));break;case"select":t.multiple=!!g.multiple,b=g.value,b!=null?Pe(t,!!g.multiple,b,!1):g.defaultValue!=null&&Pe(t,!!g.multiple,g.defaultValue,!0);break;default:typeof C.onClick=="function"&&(t.onclick=dl)}switch(f){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return tr(s),null;case 6:if(t&&s.stateNode!=null)a0(t,s,t.memoizedProps,g);else{if(typeof g!="string"&&s.stateNode===null)throw Error(a(166));if(f=Ls(aa.current),Ls(oi.current),wl(s)){if(g=s.stateNode,f=s.memoizedProps,g[si]=s,(b=g.nodeValue!==f)&&(t=Tr,t!==null))switch(t.tag){case 3:fl(g.nodeValue,f,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fl(g.nodeValue,f,(t.mode&1)!==0)}b&&(s.flags|=4)}else g=(f.nodeType===9?f:f.ownerDocument).createTextNode(g),g[si]=s,s.stateNode=g}return tr(s),null;case 13:if($t(sn),g=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Jt&&Ir!==null&&s.mode&1&&!(s.flags&128))ch(),go(),s.flags|=98560,b=!1;else if(b=wl(s),g!==null&&g.dehydrated!==null){if(t===null){if(!b)throw Error(a(318));if(b=s.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(a(317));b[si]=s}else go(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;tr(s),b=!1}else Zr!==null&&(Hc(Zr),Zr=null),b=!0;if(!b)return s.flags&65536?s:null}return s.flags&128?(s.lanes=f,s):(g=g!==null,g!==(t!==null&&t.memoizedState!==null)&&g&&(s.child.flags|=8192,s.mode&1&&(t===null||sn.current&1?Dn===0&&(Dn=3):Yc())),s.updateQueue!==null&&(s.flags|=4),tr(s),null);case 4:return wo(),Mc(t,s),t===null&&ea(s.stateNode.containerInfo),tr(s),null;case 10:return ac(s.type._context),tr(s),null;case 17:return mr(s.type)&&pl(),tr(s),null;case 19:if($t(sn),b=s.memoizedState,b===null)return tr(s),null;if(g=(s.flags&128)!==0,M=b.rendering,M===null)if(g)da(b,!1);else{if(Dn!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(M=bl(t),M!==null){for(s.flags|=128,da(b,!1),g=M.updateQueue,g!==null&&(s.updateQueue=g,s.flags|=4),s.subtreeFlags=0,g=f,f=s.child;f!==null;)b=f,t=g,b.flags&=14680066,M=b.alternate,M===null?(b.childLanes=0,b.lanes=t,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=M.childLanes,b.lanes=M.lanes,b.child=M.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=M.memoizedProps,b.memoizedState=M.memoizedState,b.updateQueue=M.updateQueue,b.type=M.type,t=M.dependencies,b.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),f=f.sibling;return Yt(sn,sn.current&1|2),s.child}t=t.sibling}b.tail!==null&&yt()>Ao&&(s.flags|=128,g=!0,da(b,!1),s.lanes=4194304)}else{if(!g)if(t=bl(M),t!==null){if(s.flags|=128,g=!0,f=t.updateQueue,f!==null&&(s.updateQueue=f,s.flags|=4),da(b,!0),b.tail===null&&b.tailMode==="hidden"&&!M.alternate&&!Jt)return tr(s),null}else 2*yt()-b.renderingStartTime>Ao&&f!==1073741824&&(s.flags|=128,g=!0,da(b,!1),s.lanes=4194304);b.isBackwards?(M.sibling=s.child,s.child=M):(f=b.last,f!==null?f.sibling=M:s.child=M,b.last=M)}return b.tail!==null?(s=b.tail,b.rendering=s,b.tail=s.sibling,b.renderingStartTime=yt(),s.sibling=null,f=sn.current,Yt(sn,g?f&1|2:f&1),s):(tr(s),null);case 22:case 23:return Xc(),g=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==g&&(s.flags|=8192),g&&s.mode&1?Nr&1073741824&&(tr(s),s.subtreeFlags&6&&(s.flags|=8192)):tr(s),null;case 24:return null;case 25:return null}throw Error(a(156,s.tag))}function mx(t,s){switch(tc(s),s.tag){case 1:return mr(s.type)&&pl(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return wo(),$t(gr),$t(Jn),pc(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return dc(s),null;case 13:if($t(sn),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(a(340));go()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return $t(sn),null;case 4:return wo(),null;case 10:return ac(s.type._context),null;case 22:case 23:return Xc(),null;case 24:return null;default:return null}}var Dl=!1,nr=!1,xx=typeof WeakSet=="function"?WeakSet:Set,ke=null;function Co(t,s){var f=t.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(g){dn(t,s,g)}else f.current=null}function Dc(t,s,f){try{f()}catch(g){dn(t,s,g)}}var l0=!1;function yx(t,s){if(Xu=ri,t=mt(),it(t)){if("selectionStart"in t)var f={start:t.selectionStart,end:t.selectionEnd};else e:{f=(f=t.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var C=g.anchorOffset,b=g.focusNode;g=g.focusOffset;try{f.nodeType,b.nodeType}catch{f=null;break e}var M=0,z=-1,X=-1,le=0,ye=0,Ce=t,me=null;t:for(;;){for(var De;Ce!==f||C!==0&&Ce.nodeType!==3||(z=M+C),Ce!==b||g!==0&&Ce.nodeType!==3||(X=M+g),Ce.nodeType===3&&(M+=Ce.nodeValue.length),(De=Ce.firstChild)!==null;)me=Ce,Ce=De;for(;;){if(Ce===t)break t;if(me===f&&++le===C&&(z=M),me===b&&++ye===g&&(X=M),(De=Ce.nextSibling)!==null)break;Ce=me,me=Ce.parentNode}Ce=De}f=z===-1||X===-1?null:{start:z,end:X}}else f=null}f=f||{start:0,end:0}}else f=null;for(Yu={focusedElem:t,selectionRange:f},ri=!1,ke=s;ke!==null;)if(s=ke,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,ke=t;else for(;ke!==null;){s=ke;try{var Fe=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Fe!==null){var ze=Fe.memoizedProps,vn=Fe.memoizedState,ne=s.stateNode,K=ne.getSnapshotBeforeUpdate(s.elementType===s.type?ze:$r(s.type,ze),vn);ne.__reactInternalSnapshotBeforeUpdate=K}break;case 3:var re=s.stateNode.containerInfo;re.nodeType===1?re.textContent="":re.nodeType===9&&re.documentElement&&re.removeChild(re.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(Ie){dn(s,s.return,Ie)}if(t=s.sibling,t!==null){t.return=s.return,ke=t;break}ke=s.return}return Fe=l0,l0=!1,Fe}function ha(t,s,f){var g=s.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var C=g=g.next;do{if((C.tag&t)===t){var b=C.destroy;C.destroy=void 0,b!==void 0&&Dc(s,f,b)}C=C.next}while(C!==g)}}function kl(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var f=s=s.next;do{if((f.tag&t)===t){var g=f.create;f.destroy=g()}f=f.next}while(f!==s)}}function kc(t){var s=t.ref;if(s!==null){var f=t.stateNode;switch(t.tag){case 5:t=f;break;default:t=f}typeof s=="function"?s(t):s.current=t}}function u0(t){var s=t.alternate;s!==null&&(t.alternate=null,u0(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[si],delete s[na],delete s[qu],delete s[ex],delete s[tx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function c0(t){return t.tag===5||t.tag===3||t.tag===4}function f0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||c0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Lc(t,s,f){var g=t.tag;if(g===5||g===6)t=t.stateNode,s?f.nodeType===8?f.parentNode.insertBefore(t,s):f.insertBefore(t,s):(f.nodeType===8?(s=f.parentNode,s.insertBefore(t,f)):(s=f,s.appendChild(t)),f=f._reactRootContainer,f!=null||s.onclick!==null||(s.onclick=dl));else if(g!==4&&(t=t.child,t!==null))for(Lc(t,s,f),t=t.sibling;t!==null;)Lc(t,s,f),t=t.sibling}function Bc(t,s,f){var g=t.tag;if(g===5||g===6)t=t.stateNode,s?f.insertBefore(t,s):f.appendChild(t);else if(g!==4&&(t=t.child,t!==null))for(Bc(t,s,f),t=t.sibling;t!==null;)Bc(t,s,f),t=t.sibling}var Xn=null,qr=!1;function rs(t,s,f){for(f=f.child;f!==null;)d0(t,s,f),f=f.sibling}function d0(t,s,f){if(dt&&typeof dt.onCommitFiberUnmount=="function")try{dt.onCommitFiberUnmount(At,f)}catch{}switch(f.tag){case 5:nr||Co(f,s);case 6:var g=Xn,C=qr;Xn=null,rs(t,s,f),Xn=g,qr=C,Xn!==null&&(qr?(t=Xn,f=f.stateNode,t.nodeType===8?t.parentNode.removeChild(f):t.removeChild(f)):Xn.removeChild(f.stateNode));break;case 18:Xn!==null&&(qr?(t=Xn,f=f.stateNode,t.nodeType===8?$u(t.parentNode,f):t.nodeType===1&&$u(t,f),Xr(t)):$u(Xn,f.stateNode));break;case 4:g=Xn,C=qr,Xn=f.stateNode.containerInfo,qr=!0,rs(t,s,f),Xn=g,qr=C;break;case 0:case 11:case 14:case 15:if(!nr&&(g=f.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){C=g=g.next;do{var b=C,M=b.destroy;b=b.tag,M!==void 0&&(b&2||b&4)&&Dc(f,s,M),C=C.next}while(C!==g)}rs(t,s,f);break;case 1:if(!nr&&(Co(f,s),g=f.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=f.memoizedProps,g.state=f.memoizedState,g.componentWillUnmount()}catch(z){dn(f,s,z)}rs(t,s,f);break;case 21:rs(t,s,f);break;case 22:f.mode&1?(nr=(g=nr)||f.memoizedState!==null,rs(t,s,f),nr=g):rs(t,s,f);break;default:rs(t,s,f)}}function h0(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var f=t.stateNode;f===null&&(f=t.stateNode=new xx),s.forEach(function(g){var C=Ix.bind(null,t,g);f.has(g)||(f.add(g),g.then(C,C))})}}function Qr(t,s){var f=s.deletions;if(f!==null)for(var g=0;g<f.length;g++){var C=f[g];try{var b=t,M=s,z=M;e:for(;z!==null;){switch(z.tag){case 5:Xn=z.stateNode,qr=!1;break e;case 3:Xn=z.stateNode.containerInfo,qr=!0;break e;case 4:Xn=z.stateNode.containerInfo,qr=!0;break e}z=z.return}if(Xn===null)throw Error(a(160));d0(b,M,C),Xn=null,qr=!1;var X=C.alternate;X!==null&&(X.return=null),C.return=null}catch(le){dn(C,s,le)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)p0(s,t),s=s.sibling}function p0(t,s){var f=t.alternate,g=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qr(s,t),li(t),g&4){try{ha(3,t,t.return),kl(3,t)}catch(ze){dn(t,t.return,ze)}try{ha(5,t,t.return)}catch(ze){dn(t,t.return,ze)}}break;case 1:Qr(s,t),li(t),g&512&&f!==null&&Co(f,f.return);break;case 5:if(Qr(s,t),li(t),g&512&&f!==null&&Co(f,f.return),t.flags&32){var C=t.stateNode;try{nn(C,"")}catch(ze){dn(t,t.return,ze)}}if(g&4&&(C=t.stateNode,C!=null)){var b=t.memoizedProps,M=f!==null?f.memoizedProps:b,z=t.type,X=t.updateQueue;if(t.updateQueue=null,X!==null)try{z==="input"&&b.type==="radio"&&b.name!=null&&En(C,b),Ut(z,M);var le=Ut(z,b);for(M=0;M<X.length;M+=2){var ye=X[M],Ce=X[M+1];ye==="style"?Ae(C,Ce):ye==="dangerouslySetInnerHTML"?Ct(C,Ce):ye==="children"?nn(C,Ce):W(C,ye,Ce,le)}switch(z){case"input":Vt(C,b);break;case"textarea":Be(C,b);break;case"select":var me=C._wrapperState.wasMultiple;C._wrapperState.wasMultiple=!!b.multiple;var De=b.value;De!=null?Pe(C,!!b.multiple,De,!1):me!==!!b.multiple&&(b.defaultValue!=null?Pe(C,!!b.multiple,b.defaultValue,!0):Pe(C,!!b.multiple,b.multiple?[]:"",!1))}C[na]=b}catch(ze){dn(t,t.return,ze)}}break;case 6:if(Qr(s,t),li(t),g&4){if(t.stateNode===null)throw Error(a(162));C=t.stateNode,b=t.memoizedProps;try{C.nodeValue=b}catch(ze){dn(t,t.return,ze)}}break;case 3:if(Qr(s,t),li(t),g&4&&f!==null&&f.memoizedState.isDehydrated)try{Xr(s.containerInfo)}catch(ze){dn(t,t.return,ze)}break;case 4:Qr(s,t),li(t);break;case 13:Qr(s,t),li(t),C=t.child,C.flags&8192&&(b=C.memoizedState!==null,C.stateNode.isHidden=b,!b||C.alternate!==null&&C.alternate.memoizedState!==null||(Vc=yt())),g&4&&h0(t);break;case 22:if(ye=f!==null&&f.memoizedState!==null,t.mode&1?(nr=(le=nr)||ye,Qr(s,t),nr=le):Qr(s,t),li(t),g&8192){if(le=t.memoizedState!==null,(t.stateNode.isHidden=le)&&!ye&&t.mode&1)for(ke=t,ye=t.child;ye!==null;){for(Ce=ke=ye;ke!==null;){switch(me=ke,De=me.child,me.tag){case 0:case 11:case 14:case 15:ha(4,me,me.return);break;case 1:Co(me,me.return);var Fe=me.stateNode;if(typeof Fe.componentWillUnmount=="function"){g=me,f=me.return;try{s=g,Fe.props=s.memoizedProps,Fe.state=s.memoizedState,Fe.componentWillUnmount()}catch(ze){dn(g,f,ze)}}break;case 5:Co(me,me.return);break;case 22:if(me.memoizedState!==null){x0(Ce);continue}}De!==null?(De.return=me,ke=De):x0(Ce)}ye=ye.sibling}e:for(ye=null,Ce=t;;){if(Ce.tag===5){if(ye===null){ye=Ce;try{C=Ce.stateNode,le?(b=C.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(z=Ce.stateNode,X=Ce.memoizedProps.style,M=X!=null&&X.hasOwnProperty("display")?X.display:null,z.style.display=kt("display",M))}catch(ze){dn(t,t.return,ze)}}}else if(Ce.tag===6){if(ye===null)try{Ce.stateNode.nodeValue=le?"":Ce.memoizedProps}catch(ze){dn(t,t.return,ze)}}else if((Ce.tag!==22&&Ce.tag!==23||Ce.memoizedState===null||Ce===t)&&Ce.child!==null){Ce.child.return=Ce,Ce=Ce.child;continue}if(Ce===t)break e;for(;Ce.sibling===null;){if(Ce.return===null||Ce.return===t)break e;ye===Ce&&(ye=null),Ce=Ce.return}ye===Ce&&(ye=null),Ce.sibling.return=Ce.return,Ce=Ce.sibling}}break;case 19:Qr(s,t),li(t),g&4&&h0(t);break;case 21:break;default:Qr(s,t),li(t)}}function li(t){var s=t.flags;if(s&2){try{e:{for(var f=t.return;f!==null;){if(c0(f)){var g=f;break e}f=f.return}throw Error(a(160))}switch(g.tag){case 5:var C=g.stateNode;g.flags&32&&(nn(C,""),g.flags&=-33);var b=f0(t);Bc(t,b,C);break;case 3:case 4:var M=g.stateNode.containerInfo,z=f0(t);Lc(t,z,M);break;default:throw Error(a(161))}}catch(X){dn(t,t.return,X)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function wx(t,s,f){ke=t,g0(t)}function g0(t,s,f){for(var g=(t.mode&1)!==0;ke!==null;){var C=ke,b=C.child;if(C.tag===22&&g){var M=C.memoizedState!==null||Dl;if(!M){var z=C.alternate,X=z!==null&&z.memoizedState!==null||nr;z=Dl;var le=nr;if(Dl=M,(nr=X)&&!le)for(ke=C;ke!==null;)M=ke,X=M.child,M.tag===22&&M.memoizedState!==null?y0(C):X!==null?(X.return=M,ke=X):y0(C);for(;b!==null;)ke=b,g0(b),b=b.sibling;ke=C,Dl=z,nr=le}m0(t)}else C.subtreeFlags&8772&&b!==null?(b.return=C,ke=b):m0(t)}}function m0(t){for(;ke!==null;){var s=ke;if(s.flags&8772){var f=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:nr||kl(5,s);break;case 1:var g=s.stateNode;if(s.flags&4&&!nr)if(f===null)g.componentDidMount();else{var C=s.elementType===s.type?f.memoizedProps:$r(s.type,f.memoizedProps);g.componentDidUpdate(C,f.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var b=s.updateQueue;b!==null&&xh(s,b,g);break;case 3:var M=s.updateQueue;if(M!==null){if(f=null,s.child!==null)switch(s.child.tag){case 5:f=s.child.stateNode;break;case 1:f=s.child.stateNode}xh(s,M,f)}break;case 5:var z=s.stateNode;if(f===null&&s.flags&4){f=z;var X=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":X.autoFocus&&f.focus();break;case"img":X.src&&(f.src=X.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var le=s.alternate;if(le!==null){var ye=le.memoizedState;if(ye!==null){var Ce=ye.dehydrated;Ce!==null&&Xr(Ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}nr||s.flags&512&&kc(s)}catch(me){dn(s,s.return,me)}}if(s===t){ke=null;break}if(f=s.sibling,f!==null){f.return=s.return,ke=f;break}ke=s.return}}function x0(t){for(;ke!==null;){var s=ke;if(s===t){ke=null;break}var f=s.sibling;if(f!==null){f.return=s.return,ke=f;break}ke=s.return}}function y0(t){for(;ke!==null;){var s=ke;try{switch(s.tag){case 0:case 11:case 15:var f=s.return;try{kl(4,s)}catch(X){dn(s,f,X)}break;case 1:var g=s.stateNode;if(typeof g.componentDidMount=="function"){var C=s.return;try{g.componentDidMount()}catch(X){dn(s,C,X)}}var b=s.return;try{kc(s)}catch(X){dn(s,b,X)}break;case 5:var M=s.return;try{kc(s)}catch(X){dn(s,M,X)}}}catch(X){dn(s,s.return,X)}if(s===t){ke=null;break}var z=s.sibling;if(z!==null){z.return=s.return,ke=z;break}ke=s.return}}var vx=Math.ceil,Ll=ee.ReactCurrentDispatcher,Fc=ee.ReactCurrentOwner,Br=ee.ReactCurrentBatchConfig,Rt=0,Un=null,bn=null,Yn=0,Nr=0,Eo=Qi(0),Dn=0,pa=null,Fs=0,Bl=0,jc=0,ga=null,yr=null,Vc=0,Ao=1/0,Pi=null,Fl=!1,Uc=null,is=null,jl=!1,ss=null,Vl=0,ma=0,zc=null,Ul=-1,zl=0;function fr(){return Rt&6?yt():Ul!==-1?Ul:Ul=yt()}function os(t){return t.mode&1?Rt&2&&Yn!==0?Yn&-Yn:rx.transition!==null?(zl===0&&(zl=Rn()),zl):(t=ht,t!==0||(t=window.event,t=t===void 0?16:Wo(t.type)),t):1}function Jr(t,s,f,g){if(50<ma)throw ma=0,zc=null,Error(a(185));F(t,f,g),(!(Rt&2)||t!==Un)&&(t===Un&&(!(Rt&2)&&(Bl|=f),Dn===4&&as(t,Yn)),wr(t,g),f===1&&Rt===0&&!(s.mode&1)&&(Ao=yt()+500,ml&&es()))}function wr(t,s){var f=t.callbackNode;Ui(t,s);var g=Er(t,t===Un?Yn:0);if(g===0)f!==null&&Sn(f),t.callbackNode=null,t.callbackPriority=0;else if(s=g&-g,t.callbackPriority!==s){if(f!=null&&Sn(f),s===1)t.tag===0?nx(v0.bind(null,t)):sh(v0.bind(null,t)),Qm(function(){!(Rt&6)&&es()}),f=null;else{switch(qa(g)){case 1:f=he;break;case 4:f=Cs;break;case 16:f=Wt;break;case 536870912:f=$a;break;default:f=Wt}f=N0(f,w0.bind(null,t))}t.callbackPriority=s,t.callbackNode=f}}function w0(t,s){if(Ul=-1,zl=0,Rt&6)throw Error(a(327));var f=t.callbackNode;if(So()&&t.callbackNode!==f)return null;var g=Er(t,t===Un?Yn:0);if(g===0)return null;if(g&30||g&t.expiredLanes||s)s=Wl(t,g);else{s=g;var C=Rt;Rt|=2;var b=E0();(Un!==t||Yn!==s)&&(Pi=null,Ao=yt()+500,Vs(t,s));do try{Ax();break}catch(z){C0(t,z)}while(!0);oc(),Ll.current=b,Rt=C,bn!==null?s=0:(Un=null,Yn=0,s=Dn)}if(s!==0){if(s===2&&(C=Bt(t),C!==0&&(g=C,s=Wc(t,C))),s===1)throw f=pa,Vs(t,0),as(t,g),wr(t,yt()),f;if(s===6)as(t,g);else{if(C=t.current.alternate,!(g&30)&&!Cx(C)&&(s=Wl(t,g),s===2&&(b=Bt(t),b!==0&&(g=b,s=Wc(t,b))),s===1))throw f=pa,Vs(t,0),as(t,g),wr(t,yt()),f;switch(t.finishedWork=C,t.finishedLanes=g,s){case 0:case 1:throw Error(a(345));case 2:Us(t,yr,Pi);break;case 3:if(as(t,g),(g&130023424)===g&&(s=Vc+500-yt(),10<s)){if(Er(t,0)!==0)break;if(C=t.suspendedLanes,(C&g)!==g){fr(),t.pingedLanes|=t.suspendedLanes&C;break}t.timeoutHandle=Zu(Us.bind(null,t,yr,Pi),s);break}Us(t,yr,Pi);break;case 4:if(as(t,g),(g&4194240)===g)break;for(s=t.eventTimes,C=-1;0<g;){var M=31-ur(g);b=1<<M,M=s[M],M>C&&(C=M),g&=~b}if(g=C,g=yt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*vx(g/1960))-g,10<g){t.timeoutHandle=Zu(Us.bind(null,t,yr,Pi),g);break}Us(t,yr,Pi);break;case 5:Us(t,yr,Pi);break;default:throw Error(a(329))}}}return wr(t,yt()),t.callbackNode===f?w0.bind(null,t):null}function Wc(t,s){var f=ga;return t.current.memoizedState.isDehydrated&&(Vs(t,s).flags|=256),t=Wl(t,s),t!==2&&(s=yr,yr=f,s!==null&&Hc(s)),t}function Hc(t){yr===null?yr=t:yr.push.apply(yr,t)}function Cx(t){for(var s=t;;){if(s.flags&16384){var f=s.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var g=0;g<f.length;g++){var C=f[g],b=C.getSnapshot;C=C.value;try{if(!$(b(),C))return!1}catch{return!1}}}if(f=s.child,s.subtreeFlags&16384&&f!==null)f.return=s,s=f;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function as(t,s){for(s&=~jc,s&=~Bl,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var f=31-ur(s),g=1<<f;t[f]=-1,s&=~g}}function v0(t){if(Rt&6)throw Error(a(327));So();var s=Er(t,0);if(!(s&1))return wr(t,yt()),null;var f=Wl(t,s);if(t.tag!==0&&f===2){var g=Bt(t);g!==0&&(s=g,f=Wc(t,g))}if(f===1)throw f=pa,Vs(t,0),as(t,s),wr(t,yt()),f;if(f===6)throw Error(a(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,Us(t,yr,Pi),wr(t,yt()),null}function Gc(t,s){var f=Rt;Rt|=1;try{return t(s)}finally{Rt=f,Rt===0&&(Ao=yt()+500,ml&&es())}}function js(t){ss!==null&&ss.tag===0&&!(Rt&6)&&So();var s=Rt;Rt|=1;var f=Br.transition,g=ht;try{if(Br.transition=null,ht=1,t)return t()}finally{ht=g,Br.transition=f,Rt=s,!(Rt&6)&&es()}}function Xc(){Nr=Eo.current,$t(Eo)}function Vs(t,s){t.finishedWork=null,t.finishedLanes=0;var f=t.timeoutHandle;if(f!==-1&&(t.timeoutHandle=-1,qm(f)),bn!==null)for(f=bn.return;f!==null;){var g=f;switch(tc(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&pl();break;case 3:wo(),$t(gr),$t(Jn),pc();break;case 5:dc(g);break;case 4:wo();break;case 13:$t(sn);break;case 19:$t(sn);break;case 10:ac(g.type._context);break;case 22:case 23:Xc()}f=f.return}if(Un=t,bn=t=ls(t.current,null),Yn=Nr=s,Dn=0,pa=null,jc=Bl=Fs=0,yr=ga=null,ks!==null){for(s=0;s<ks.length;s++)if(f=ks[s],g=f.interleaved,g!==null){f.interleaved=null;var C=g.next,b=f.pending;if(b!==null){var M=b.next;b.next=C,g.next=M}f.pending=g}ks=null}return t}function C0(t,s){do{var f=bn;try{if(oc(),Tl.current=_l,Il){for(var g=on.memoizedState;g!==null;){var C=g.queue;C!==null&&(C.pending=null),g=g.next}Il=!1}if(Bs=0,Vn=Mn=on=null,la=!1,ua=0,Fc.current=null,f===null||f.return===null){Dn=1,pa=s,bn=null;break}e:{var b=t,M=f.return,z=f,X=s;if(s=Yn,z.flags|=32768,X!==null&&typeof X=="object"&&typeof X.then=="function"){var le=X,ye=z,Ce=ye.tag;if(!(ye.mode&1)&&(Ce===0||Ce===11||Ce===15)){var me=ye.alternate;me?(ye.updateQueue=me.updateQueue,ye.memoizedState=me.memoizedState,ye.lanes=me.lanes):(ye.updateQueue=null,ye.memoizedState=null)}var De=Xh(M);if(De!==null){De.flags&=-257,Yh(De,M,z,b,s),De.mode&1&&Gh(b,le,s),s=De,X=le;var Fe=s.updateQueue;if(Fe===null){var ze=new Set;ze.add(X),s.updateQueue=ze}else Fe.add(X);break e}else{if(!(s&1)){Gh(b,le,s),Yc();break e}X=Error(a(426))}}else if(Jt&&z.mode&1){var vn=Xh(M);if(vn!==null){!(vn.flags&65536)&&(vn.flags|=256),Yh(vn,M,z,b,s),ic(vo(X,z));break e}}b=X=vo(X,z),Dn!==4&&(Dn=2),ga===null?ga=[b]:ga.push(b),b=M;do{switch(b.tag){case 3:b.flags|=65536,s&=-s,b.lanes|=s;var ne=Wh(b,X,s);mh(b,ne);break e;case 1:z=X;var K=b.type,re=b.stateNode;if(!(b.flags&128)&&(typeof K.getDerivedStateFromError=="function"||re!==null&&typeof re.componentDidCatch=="function"&&(is===null||!is.has(re)))){b.flags|=65536,s&=-s,b.lanes|=s;var Ie=Hh(b,z,s);mh(b,Ie);break e}}b=b.return}while(b!==null)}S0(f)}catch(He){s=He,bn===f&&f!==null&&(bn=f=f.return);continue}break}while(!0)}function E0(){var t=Ll.current;return Ll.current=_l,t===null?_l:t}function Yc(){(Dn===0||Dn===3||Dn===2)&&(Dn=4),Un===null||!(Fs&268435455)&&!(Bl&268435455)||as(Un,Yn)}function Wl(t,s){var f=Rt;Rt|=2;var g=E0();(Un!==t||Yn!==s)&&(Pi=null,Vs(t,s));do try{Ex();break}catch(C){C0(t,C)}while(!0);if(oc(),Rt=f,Ll.current=g,bn!==null)throw Error(a(261));return Un=null,Yn=0,Dn}function Ex(){for(;bn!==null;)A0(bn)}function Ax(){for(;bn!==null&&!Ft();)A0(bn)}function A0(t){var s=I0(t.alternate,t,Nr);t.memoizedProps=t.pendingProps,s===null?S0(t):bn=s,Fc.current=null}function S0(t){var s=t;do{var f=s.alternate;if(t=s.return,s.flags&32768){if(f=mx(f,s),f!==null){f.flags&=32767,bn=f;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Dn=6,bn=null;return}}else if(f=gx(f,s,Nr),f!==null){bn=f;return}if(s=s.sibling,s!==null){bn=s;return}bn=s=t}while(s!==null);Dn===0&&(Dn=5)}function Us(t,s,f){var g=ht,C=Br.transition;try{Br.transition=null,ht=1,Sx(t,s,f,g)}finally{Br.transition=C,ht=g}return null}function Sx(t,s,f,g){do So();while(ss!==null);if(Rt&6)throw Error(a(327));f=t.finishedWork;var C=t.finishedLanes;if(f===null)return null;if(t.finishedWork=null,t.finishedLanes=0,f===t.current)throw Error(a(177));t.callbackNode=null,t.callbackPriority=0;var b=f.lanes|f.childLanes;if(Ge(t,b),t===Un&&(bn=Un=null,Yn=0),!(f.subtreeFlags&2064)&&!(f.flags&2064)||jl||(jl=!0,N0(Wt,function(){return So(),null})),b=(f.flags&15990)!==0,f.subtreeFlags&15990||b){b=Br.transition,Br.transition=null;var M=ht;ht=1;var z=Rt;Rt|=4,Fc.current=null,yx(t,f),p0(f,t),Qn(Yu),ri=!!Xu,Yu=Xu=null,t.current=f,wx(f),pr(),Rt=z,ht=M,Br.transition=b}else t.current=f;if(jl&&(jl=!1,ss=t,Vl=C),b=t.pendingLanes,b===0&&(is=null),wt(f.stateNode),wr(t,yt()),s!==null)for(g=t.onRecoverableError,f=0;f<s.length;f++)C=s[f],g(C.value,{componentStack:C.stack,digest:C.digest});if(Fl)throw Fl=!1,t=Uc,Uc=null,t;return Vl&1&&t.tag!==0&&So(),b=t.pendingLanes,b&1?t===zc?ma++:(ma=0,zc=t):ma=0,es(),null}function So(){if(ss!==null){var t=qa(Vl),s=Br.transition,f=ht;try{if(Br.transition=null,ht=16>t?16:t,ss===null)var g=!1;else{if(t=ss,ss=null,Vl=0,Rt&6)throw Error(a(331));var C=Rt;for(Rt|=4,ke=t.current;ke!==null;){var b=ke,M=b.child;if(ke.flags&16){var z=b.deletions;if(z!==null){for(var X=0;X<z.length;X++){var le=z[X];for(ke=le;ke!==null;){var ye=ke;switch(ye.tag){case 0:case 11:case 15:ha(8,ye,b)}var Ce=ye.child;if(Ce!==null)Ce.return=ye,ke=Ce;else for(;ke!==null;){ye=ke;var me=ye.sibling,De=ye.return;if(u0(ye),ye===le){ke=null;break}if(me!==null){me.return=De,ke=me;break}ke=De}}}var Fe=b.alternate;if(Fe!==null){var ze=Fe.child;if(ze!==null){Fe.child=null;do{var vn=ze.sibling;ze.sibling=null,ze=vn}while(ze!==null)}}ke=b}}if(b.subtreeFlags&2064&&M!==null)M.return=b,ke=M;else e:for(;ke!==null;){if(b=ke,b.flags&2048)switch(b.tag){case 0:case 11:case 15:ha(9,b,b.return)}var ne=b.sibling;if(ne!==null){ne.return=b.return,ke=ne;break e}ke=b.return}}var K=t.current;for(ke=K;ke!==null;){M=ke;var re=M.child;if(M.subtreeFlags&2064&&re!==null)re.return=M,ke=re;else e:for(M=K;ke!==null;){if(z=ke,z.flags&2048)try{switch(z.tag){case 0:case 11:case 15:kl(9,z)}}catch(He){dn(z,z.return,He)}if(z===M){ke=null;break e}var Ie=z.sibling;if(Ie!==null){Ie.return=z.return,ke=Ie;break e}ke=z.return}}if(Rt=C,es(),dt&&typeof dt.onPostCommitFiberRoot=="function")try{dt.onPostCommitFiberRoot(At,t)}catch{}g=!0}return g}finally{ht=f,Br.transition=s}}return!1}function b0(t,s,f){s=vo(f,s),s=Wh(t,s,1),t=ns(t,s,1),s=fr(),t!==null&&(F(t,1,s),wr(t,s))}function dn(t,s,f){if(t.tag===3)b0(t,t,f);else for(;s!==null;){if(s.tag===3){b0(s,t,f);break}else if(s.tag===1){var g=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(is===null||!is.has(g))){t=vo(f,t),t=Hh(s,t,1),s=ns(s,t,1),t=fr(),s!==null&&(F(s,1,t),wr(s,t));break}}s=s.return}}function bx(t,s,f){var g=t.pingCache;g!==null&&g.delete(s),s=fr(),t.pingedLanes|=t.suspendedLanes&f,Un===t&&(Yn&f)===f&&(Dn===4||Dn===3&&(Yn&130023424)===Yn&&500>yt()-Vc?Vs(t,0):jc|=f),wr(t,s)}function T0(t,s){s===0&&(t.mode&1?(s=Js,Js<<=1,!(Js&130023424)&&(Js=4194304)):s=1);var f=fr();t=Ri(t,s),t!==null&&(F(t,s,f),wr(t,f))}function Tx(t){var s=t.memoizedState,f=0;s!==null&&(f=s.retryLane),T0(t,f)}function Ix(t,s){var f=0;switch(t.tag){case 13:var g=t.stateNode,C=t.memoizedState;C!==null&&(f=C.retryLane);break;case 19:g=t.stateNode;break;default:throw Error(a(314))}g!==null&&g.delete(s),T0(t,f)}var I0;I0=function(t,s,f){if(t!==null)if(t.memoizedProps!==s.pendingProps||gr.current)xr=!0;else{if(!(t.lanes&f)&&!(s.flags&128))return xr=!1,px(t,s,f);xr=!!(t.flags&131072)}else xr=!1,Jt&&s.flags&1048576&&oh(s,yl,s.index);switch(s.lanes=0,s.tag){case 2:var g=s.type;Ml(t,s),t=s.pendingProps;var C=fo(s,Jn.current);yo(s,f),C=xc(null,s,g,t,C,f);var b=yc();return s.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,mr(g)?(b=!0,gl(s)):b=!1,s.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,cc(s),C.updater=Ol,s.stateNode=C,C._reactInternals=s,Sc(s,g,t,f),s=Nc(null,s,g,!0,b,f)):(s.tag=0,Jt&&b&&ec(s),cr(null,s,C,f),s=s.child),s;case 16:g=s.elementType;e:{switch(Ml(t,s),t=s.pendingProps,C=g._init,g=C(g._payload),s.type=g,C=s.tag=Rx(g),t=$r(g,t),C){case 0:s=Ic(null,s,g,t,f);break e;case 1:s=Jh(null,s,g,t,f);break e;case 11:s=Kh(null,s,g,t,f);break e;case 14:s=Zh(null,s,g,$r(g.type,t),f);break e}throw Error(a(306,g,""))}return s;case 0:return g=s.type,C=s.pendingProps,C=s.elementType===g?C:$r(g,C),Ic(t,s,g,C,f);case 1:return g=s.type,C=s.pendingProps,C=s.elementType===g?C:$r(g,C),Jh(t,s,g,C,f);case 3:e:{if(e0(s),t===null)throw Error(a(387));g=s.pendingProps,b=s.memoizedState,C=b.element,gh(t,s),Sl(s,g,null,f);var M=s.memoizedState;if(g=M.element,b.isDehydrated)if(b={element:g,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},s.updateQueue.baseState=b,s.memoizedState=b,s.flags&256){C=vo(Error(a(423)),s),s=t0(t,s,g,f,C);break e}else if(g!==C){C=vo(Error(a(424)),s),s=t0(t,s,g,f,C);break e}else for(Ir=qi(s.stateNode.containerInfo.firstChild),Tr=s,Jt=!0,Zr=null,f=hh(s,null,g,f),s.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(go(),g===C){s=Oi(t,s,f);break e}cr(t,s,g,f)}s=s.child}return s;case 5:return yh(s),t===null&&rc(s),g=s.type,C=s.pendingProps,b=t!==null?t.memoizedProps:null,M=C.children,Ku(g,C)?M=null:b!==null&&Ku(g,b)&&(s.flags|=32),Qh(t,s),cr(t,s,M,f),s.child;case 6:return t===null&&rc(s),null;case 13:return n0(t,s,f);case 4:return fc(s,s.stateNode.containerInfo),g=s.pendingProps,t===null?s.child=mo(s,null,g,f):cr(t,s,g,f),s.child;case 11:return g=s.type,C=s.pendingProps,C=s.elementType===g?C:$r(g,C),Kh(t,s,g,C,f);case 7:return cr(t,s,s.pendingProps,f),s.child;case 8:return cr(t,s,s.pendingProps.children,f),s.child;case 12:return cr(t,s,s.pendingProps.children,f),s.child;case 10:e:{if(g=s.type._context,C=s.pendingProps,b=s.memoizedProps,M=C.value,Yt(Cl,g._currentValue),g._currentValue=M,b!==null)if($(b.value,M)){if(b.children===C.children&&!gr.current){s=Oi(t,s,f);break e}}else for(b=s.child,b!==null&&(b.return=s);b!==null;){var z=b.dependencies;if(z!==null){M=b.child;for(var X=z.firstContext;X!==null;){if(X.context===g){if(b.tag===1){X=_i(-1,f&-f),X.tag=2;var le=b.updateQueue;if(le!==null){le=le.shared;var ye=le.pending;ye===null?X.next=X:(X.next=ye.next,ye.next=X),le.pending=X}}b.lanes|=f,X=b.alternate,X!==null&&(X.lanes|=f),lc(b.return,f,s),z.lanes|=f;break}X=X.next}}else if(b.tag===10)M=b.type===s.type?null:b.child;else if(b.tag===18){if(M=b.return,M===null)throw Error(a(341));M.lanes|=f,z=M.alternate,z!==null&&(z.lanes|=f),lc(M,f,s),M=b.sibling}else M=b.child;if(M!==null)M.return=b;else for(M=b;M!==null;){if(M===s){M=null;break}if(b=M.sibling,b!==null){b.return=M.return,M=b;break}M=M.return}b=M}cr(t,s,C.children,f),s=s.child}return s;case 9:return C=s.type,g=s.pendingProps.children,yo(s,f),C=kr(C),g=g(C),s.flags|=1,cr(t,s,g,f),s.child;case 14:return g=s.type,C=$r(g,s.pendingProps),C=$r(g.type,C),Zh(t,s,g,C,f);case 15:return $h(t,s,s.type,s.pendingProps,f);case 17:return g=s.type,C=s.pendingProps,C=s.elementType===g?C:$r(g,C),Ml(t,s),s.tag=1,mr(g)?(t=!0,gl(s)):t=!1,yo(s,f),Uh(s,g,C),Sc(s,g,C,f),Nc(null,s,g,!0,t,f);case 19:return i0(t,s,f);case 22:return qh(t,s,f)}throw Error(a(156,s.tag))};function N0(t,s){return lr(t,s)}function Nx(t,s,f,g){this.tag=t,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(t,s,f,g){return new Nx(t,s,f,g)}function Kc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Rx(t){if(typeof t=="function")return Kc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===be)return 11;if(t===J)return 14}return 2}function ls(t,s){var f=t.alternate;return f===null?(f=Fr(t.tag,s,t.key,t.mode),f.elementType=t.elementType,f.type=t.type,f.stateNode=t.stateNode,f.alternate=t,t.alternate=f):(f.pendingProps=s,f.type=t.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=t.flags&14680064,f.childLanes=t.childLanes,f.lanes=t.lanes,f.child=t.child,f.memoizedProps=t.memoizedProps,f.memoizedState=t.memoizedState,f.updateQueue=t.updateQueue,s=t.dependencies,f.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},f.sibling=t.sibling,f.index=t.index,f.ref=t.ref,f}function Hl(t,s,f,g,C,b){var M=2;if(g=t,typeof t=="function")Kc(t)&&(M=1);else if(typeof t=="string")M=5;else e:switch(t){case Q:return zs(f.children,C,b,s);case ue:M=8,C|=8;break;case q:return t=Fr(12,f,s,C|2),t.elementType=q,t.lanes=b,t;case Oe:return t=Fr(13,f,s,C),t.elementType=Oe,t.lanes=b,t;case Le:return t=Fr(19,f,s,C),t.elementType=Le,t.lanes=b,t;case oe:return Gl(f,C,b,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Re:M=10;break e;case je:M=9;break e;case be:M=11;break e;case J:M=14;break e;case we:M=16,g=null;break e}throw Error(a(130,t==null?t:typeof t,""))}return s=Fr(M,f,s,C),s.elementType=t,s.type=g,s.lanes=b,s}function zs(t,s,f,g){return t=Fr(7,t,g,s),t.lanes=f,t}function Gl(t,s,f,g){return t=Fr(22,t,g,s),t.elementType=oe,t.lanes=f,t.stateNode={isHidden:!1},t}function Zc(t,s,f){return t=Fr(6,t,null,s),t.lanes=f,t}function $c(t,s,f){return s=Fr(4,t.children!==null?t.children:[],t.key,s),s.lanes=f,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function _x(t,s,f,g,C){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=te(0),this.expirationTimes=te(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=te(0),this.identifierPrefix=g,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null}function qc(t,s,f,g,C,b,M,z,X){return t=new _x(t,s,f,z,X),s===1?(s=1,b===!0&&(s|=8)):s=0,b=Fr(3,null,null,s),t.current=b,b.stateNode=t,b.memoizedState={element:g,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},cc(b),t}function Ox(t,s,f){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ie,key:g==null?null:""+g,children:t,containerInfo:s,implementation:f}}function R0(t){if(!t)return Ji;t=t._reactInternals;e:{if(_e(t)!==t||t.tag!==1)throw Error(a(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(mr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(a(171))}if(t.tag===1){var f=t.type;if(mr(f))return rh(t,f,s)}return s}function _0(t,s,f,g,C,b,M,z,X){return t=qc(f,g,!0,t,C,b,M,z,X),t.context=R0(null),f=t.current,g=fr(),C=os(f),b=_i(g,C),b.callback=s??null,ns(f,b,C),t.current.lanes=C,F(t,C,g),wr(t,g),t}function Xl(t,s,f,g){var C=s.current,b=fr(),M=os(C);return f=R0(f),s.context===null?s.context=f:s.pendingContext=f,s=_i(b,M),s.payload={element:t},g=g===void 0?null:g,g!==null&&(s.callback=g),t=ns(C,s,M),t!==null&&(Jr(t,C,M,b),Al(t,C,M)),M}function Yl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function O0(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var f=t.retryLane;t.retryLane=f!==0&&f<s?f:s}}function Qc(t,s){O0(t,s),(t=t.alternate)&&O0(t,s)}function Px(){return null}var P0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Jc(t){this._internalRoot=t}Kl.prototype.render=Jc.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(a(409));Xl(t,s,null,null)},Kl.prototype.unmount=Jc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;js(function(){Xl(null,t,null,null)}),s[bi]=null}};function Kl(t){this._internalRoot=t}Kl.prototype.unstable_scheduleHydration=function(t){if(t){var s=Gt();t={blockedOn:null,target:t,priority:s};for(var f=0;f<Wn.length&&s!==0&&s<Wn[f].priority;f++);Wn.splice(f,0,t),f===0&&Ja(t)}};function ef(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function M0(){}function Mx(t,s,f,g,C){if(C){if(typeof g=="function"){var b=g;g=function(){var le=Yl(M);b.call(le)}}var M=_0(s,g,t,0,null,!1,!1,"",M0);return t._reactRootContainer=M,t[bi]=M.current,ea(t.nodeType===8?t.parentNode:t),js(),M}for(;C=t.lastChild;)t.removeChild(C);if(typeof g=="function"){var z=g;g=function(){var le=Yl(X);z.call(le)}}var X=qc(t,0,!1,null,null,!1,!1,"",M0);return t._reactRootContainer=X,t[bi]=X.current,ea(t.nodeType===8?t.parentNode:t),js(function(){Xl(s,X,f,g)}),X}function $l(t,s,f,g,C){var b=f._reactRootContainer;if(b){var M=b;if(typeof C=="function"){var z=C;C=function(){var X=Yl(M);z.call(X)}}Xl(s,M,t,C)}else M=Mx(f,s,t,C,g);return Yl(M)}eo=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var f=Ht(s.pendingLanes);f!==0&&(cn(s,f|1),wr(s,yt()),!(Rt&6)&&(Ao=yt()+500,es()))}break;case 13:js(function(){var g=Ri(t,1);if(g!==null){var C=fr();Jr(g,t,1,C)}}),Qc(t,1)}},qn=function(t){if(t.tag===13){var s=Ri(t,134217728);if(s!==null){var f=fr();Jr(s,t,134217728,f)}Qc(t,134217728)}},Ye=function(t){if(t.tag===13){var s=os(t),f=Ri(t,s);if(f!==null){var g=fr();Jr(f,t,s,g)}Qc(t,s)}},Gt=function(){return ht},Vo=function(t,s){var f=ht;try{return ht=t,s()}finally{ht=f}},Fi=function(t,s,f){switch(s){case"input":if(Vt(t,f),s=f.name,f.type==="radio"&&s!=null){for(f=t;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<f.length;s++){var g=f[s];if(g!==t&&g.form===t.form){var C=hl(g);if(!C)throw Error(a(90));ct(g),Vt(g,C)}}}break;case"textarea":Be(t,f);break;case"select":s=f.value,s!=null&&Pe(t,!!f.multiple,s,!1)}},yi=Gc,mn=js;var Dx={usingClientEntryPoint:!1,Events:[ra,uo,hl,ji,Fn,Gc]},xa={findFiberByHostInstance:Os,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kx={bundleType:xa.bundleType,version:xa.version,rendererPackageName:xa.rendererPackageName,rendererConfig:xa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ee.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Xe(t),t===null?null:t.stateNode},findFiberByHostInstance:xa.findFiberByHostInstance||Px,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ql.isDisabled&&ql.supportsFiber)try{At=ql.inject(kx),dt=ql}catch{}}return vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dx,vr.createPortal=function(t,s){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ef(s))throw Error(a(200));return Ox(t,s,null,f)},vr.createRoot=function(t,s){if(!ef(t))throw Error(a(299));var f=!1,g="",C=P0;return s!=null&&(s.unstable_strictMode===!0&&(f=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onRecoverableError!==void 0&&(C=s.onRecoverableError)),s=qc(t,1,!1,null,null,f,!1,g,C),t[bi]=s.current,ea(t.nodeType===8?t.parentNode:t),new Jc(s)},vr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=Xe(s),t=t===null?null:t.stateNode,t},vr.flushSync=function(t){return js(t)},vr.hydrate=function(t,s,f){if(!Zl(s))throw Error(a(200));return $l(null,t,s,!0,f)},vr.hydrateRoot=function(t,s,f){if(!ef(t))throw Error(a(405));var g=f!=null&&f.hydratedSources||null,C=!1,b="",M=P0;if(f!=null&&(f.unstable_strictMode===!0&&(C=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onRecoverableError!==void 0&&(M=f.onRecoverableError)),s=_0(s,null,t,1,f??null,C,!1,b,M),t[bi]=s.current,ea(t),g)for(t=0;t<g.length;t++)f=g[t],C=f._getVersion,C=C(f._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[f,C]:s.mutableSourceEagerHydrationData.push(f,C);return new Kl(s)},vr.render=function(t,s,f){if(!Zl(s))throw Error(a(200));return $l(null,t,s,!1,f)},vr.unmountComponentAtNode=function(t){if(!Zl(t))throw Error(a(40));return t._reactRootContainer?(js(function(){$l(null,null,t,!1,function(){t._reactRootContainer=null,t[bi]=null})}),!0):!1},vr.unstable_batchedUpdates=Gc,vr.unstable_renderSubtreeIntoContainer=function(t,s,f,g){if(!Zl(f))throw Error(a(200));if(t==null||t._reactInternals===void 0)throw Error(a(38));return $l(t,s,f,!1,g)},vr.version="18.3.1-next-f1338f8080-20240426",vr}var U0;function Wx(){if(U0)return rf.exports;U0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(o){console.error(o)}}return r(),rf.exports=zx(),rf.exports}var z0;function Hx(){if(z0)return Jl;z0=1;var r=Wx();return Jl.createRoot=r.createRoot,Jl.hydrateRoot=r.hydrateRoot,Jl}var Gx=Hx();const zr=P.createContext(null),Xx=({children:r})=>{const[o,a]=P.useState(null),[d,p]=P.useState(null),[x,y]=P.useState(null),[A,w]=P.useState(null),[E,S]=P.useState(!1),[T,R]=P.useState(null),k=async()=>{const U=localStorage.getItem("access_token");if(U)try{const H=await fetch(window.server_url+"/load_user",{headers:{Authorization:`Bearer ${U}`}});if(H.ok){S(!0);const W=await H.json();console.log("USER DATA:",W),a(W.username),p(W.profile),R(W.permissions),console.log("PERMISSIONS:",W.permissions)}else console.log("TOKEN INVALID"),localStorage.removeItem("access_token"),a(null),p(null),y(null),w(null),S(!1)}catch(H){console.log("ERROR:",H)}};P.useEffect(()=>{k()},[]);const L=U=>{a(U.username),y(U.access_token),w(U.refresh_token),R(U.permissions),console.log("PRE SAVE USERNAME:",U.username),localStorage.setItem("user",U.username),localStorage.setItem("access_token",U.access_token),localStorage.setItem("refresh_token",U.refresh_token)},j=async(U,H)=>{const W=await fetch(window.server_url+"/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:U,password:H})});if(W.ok){const ee=await W.json();console.log("SIGNED UP, userData:",ee)}},B=()=>{a(null),p(null),y(null),w(null),S(!1)};return N.jsx(zr.Provider,{value:{user:o,login:L,signup:j,logout:B,userProfile:d,checkAuth:k,permissions:T},children:r})};var If=function(r,o){return If=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var p in d)Object.prototype.hasOwnProperty.call(d,p)&&(a[p]=d[p])},If(r,o)};function Yx(r,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");If(r,o);function a(){this.constructor=r}r.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}var Kn=function(){return Kn=Object.assign||function(o){for(var a,d=1,p=arguments.length;d<p;d++){a=arguments[d];for(var x in a)Object.prototype.hasOwnProperty.call(a,x)&&(o[x]=a[x])}return o},Kn.apply(this,arguments)};var af,W0;function Kx(){if(W0)return af;W0=1;var r=!1,o,a,d,p,x,y,A,w,E,S,T,R,k,L,j;function B(){if(!r){r=!0;var H=navigator.userAgent,W=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(H),ee=/(Mac OS X)|(Windows)|(Linux)/.exec(H);if(R=/\b(iPhone|iP[ao]d)/.exec(H),k=/\b(iP[ao]d)/.exec(H),S=/Android/i.exec(H),L=/FBAN\/\w+;/i.exec(H),j=/Mobile/i.exec(H),T=!!/Win64/.exec(H),W){o=W[1]?parseFloat(W[1]):W[5]?parseFloat(W[5]):NaN,o&&document&&document.documentMode&&(o=document.documentMode);var ce=/(?:Trident\/(\d+.\d+))/.exec(H);y=ce?parseFloat(ce[1])+4:o,a=W[2]?parseFloat(W[2]):NaN,d=W[3]?parseFloat(W[3]):NaN,p=W[4]?parseFloat(W[4]):NaN,p?(W=/(?:Chrome\/(\d+\.\d+))/.exec(H),x=W&&W[1]?parseFloat(W[1]):NaN):x=NaN}else o=a=d=x=p=NaN;if(ee){if(ee[1]){var ie=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(H);A=ie?parseFloat(ie[1].replace("_",".")):!0}else A=!1;w=!!ee[2],E=!!ee[3]}else A=w=E=!1}}var U={ie:function(){return B()||o},ieCompatibilityMode:function(){return B()||y>o},ie64:function(){return U.ie()&&T},firefox:function(){return B()||a},opera:function(){return B()||d},webkit:function(){return B()||p},safari:function(){return U.webkit()},chrome:function(){return B()||x},windows:function(){return B()||w},osx:function(){return B()||A},linux:function(){return B()||E},iphone:function(){return B()||R},mobile:function(){return B()||R||k||S||j},nativeApp:function(){return B()||L},android:function(){return B()||S},ipad:function(){return B()||k}};return af=U,af}var lf,H0;function Zx(){if(H0)return lf;H0=1;var r=!!(typeof window<"u"&&window.document&&window.document.createElement),o={canUseDOM:r,canUseWorkers:typeof Worker<"u",canUseEventListeners:r&&!!(window.addEventListener||window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};return lf=o,lf}var uf,G0;function $x(){if(G0)return uf;G0=1;var r=Zx(),o;r.canUseDOM&&(o=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function a(d,p){if(!r.canUseDOM||p&&!("addEventListener"in document))return!1;var x="on"+d,y=x in document;if(!y){var A=document.createElement("div");A.setAttribute(x,"return;"),y=typeof A[x]=="function"}return!y&&o&&d==="wheel"&&(y=document.implementation.hasFeature("Events.wheel","3.0")),y}return uf=a,uf}var cf,X0;function qx(){if(X0)return cf;X0=1;var r=Kx(),o=$x(),a=10,d=40,p=800;function x(y){var A=0,w=0,E=0,S=0;return"detail"in y&&(w=y.detail),"wheelDelta"in y&&(w=-y.wheelDelta/120),"wheelDeltaY"in y&&(w=-y.wheelDeltaY/120),"wheelDeltaX"in y&&(A=-y.wheelDeltaX/120),"axis"in y&&y.axis===y.HORIZONTAL_AXIS&&(A=w,w=0),E=A*a,S=w*a,"deltaY"in y&&(S=y.deltaY),"deltaX"in y&&(E=y.deltaX),(E||S)&&y.deltaMode&&(y.deltaMode==1?(E*=d,S*=d):(E*=p,S*=p)),E&&!A&&(A=E<1?-1:1),S&&!w&&(w=S<1?-1:1),{spinX:A,spinY:w,pixelX:E,pixelY:S}}return x.getEventType=function(){return r.firefox()?"DOMMouseScroll":o("wheel")?"wheel":"mousewheel"},cf=x,cf}var ff,Y0;function Qx(){return Y0||(Y0=1,ff=qx()),ff}var Jx=Qx();const e2=Dp(Jx);function t2(r,o,a,d,p,x){x===void 0&&(x=0);var y=Oo(r,o,x),A=y.width,w=y.height,E=Math.min(A,a),S=Math.min(w,d);return E>S*p?{width:S*p,height:S}:{width:E,height:E/p}}function n2(r){return r.width>r.height?r.width/r.naturalWidth:r.height/r.naturalHeight}function wa(r,o,a,d,p){p===void 0&&(p=0);var x=Oo(o.width,o.height,p),y=x.width,A=x.height;return{x:K0(r.x,y,a.width,d),y:K0(r.y,A,a.height,d)}}function K0(r,o,a,d){var p=o*d/2-a/2;return Tu(r,-p,p)}function Z0(r,o){return Math.sqrt(Math.pow(r.y-o.y,2)+Math.pow(r.x-o.x,2))}function $0(r,o){return Math.atan2(o.y-r.y,o.x-r.x)*180/Math.PI}function r2(r,o,a,d,p,x,y){x===void 0&&(x=0),y===void 0&&(y=!0);var A=y?i2:s2,w=Oo(o.width,o.height,x),E=Oo(o.naturalWidth,o.naturalHeight,x),S={x:A(100,((w.width-a.width/p)/2-r.x/p)/w.width*100),y:A(100,((w.height-a.height/p)/2-r.y/p)/w.height*100),width:A(100,a.width/w.width*100/p),height:A(100,a.height/w.height*100/p)},T=Math.round(A(E.width,S.width*E.width/100)),R=Math.round(A(E.height,S.height*E.height/100)),k=E.width>=E.height*d,L=k?{width:Math.round(R*d),height:R}:{width:T,height:Math.round(T/d)},j=Kn(Kn({},L),{x:Math.round(A(E.width-L.width,S.x*E.width/100)),y:Math.round(A(E.height-L.height,S.y*E.height/100))});return{croppedAreaPercentages:S,croppedAreaPixels:j}}function i2(r,o){return Math.min(r,Math.max(0,o))}function s2(r,o){return o}function o2(r,o,a,d,p,x){var y=Oo(o.width,o.height,a),A=Tu(d.width/y.width*(100/r.width),p,x),w={x:A*y.width/2-d.width/2-y.width*A*(r.x/100),y:A*y.height/2-d.height/2-y.height*A*(r.y/100)};return{crop:w,zoom:A}}function a2(r,o,a){var d=n2(o);return a.height>a.width?a.height/(r.height*d):a.width/(r.width*d)}function l2(r,o,a,d,p,x){a===void 0&&(a=0);var y=Oo(o.naturalWidth,o.naturalHeight,a),A=Tu(a2(r,o,d),p,x),w=d.height>d.width?d.height/r.height:d.width/r.width,E={x:((y.width-r.width)/2-r.x)*w,y:((y.height-r.height)/2-r.y)*w};return{crop:E,zoom:A}}function q0(r,o){return{x:(o.x+r.x)/2,y:(o.y+r.y)/2}}function u2(r){return r*Math.PI/180}function Oo(r,o,a){var d=u2(a);return{width:Math.abs(Math.cos(d)*r)+Math.abs(Math.sin(d)*o),height:Math.abs(Math.sin(d)*r)+Math.abs(Math.cos(d)*o)}}function Tu(r,o,a){return Math.min(Math.max(r,o),a)}function eu(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return r.filter(function(a){return typeof a=="string"&&a.length>0}).join(" ").trim()}var c2=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,f2=1,d2=3,h2=1,kp=function(r){Yx(o,r);function o(){var a=r!==null&&r.apply(this,arguments)||this;return a.imageRef=P.createRef(),a.videoRef=P.createRef(),a.containerPosition={x:0,y:0},a.containerRef=null,a.styleRef=null,a.containerRect=null,a.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},a.dragStartPosition={x:0,y:0},a.dragStartCrop={x:0,y:0},a.gestureZoomStart=0,a.gestureRotationStart=0,a.isTouching=!1,a.lastPinchDistance=0,a.lastPinchRotation=0,a.rafDragTimeout=null,a.rafPinchTimeout=null,a.wheelTimer=null,a.currentDoc=typeof document<"u"?document:null,a.currentWindow=typeof window<"u"?window:null,a.resizeObserver=null,a.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},a.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!a.containerRef)){var d=!0;a.resizeObserver=new window.ResizeObserver(function(p){if(d){d=!1;return}a.computeSizes()}),a.resizeObserver.observe(a.containerRef)}},a.preventZoomSafari=function(d){return d.preventDefault()},a.cleanEvents=function(){a.currentDoc&&(a.currentDoc.removeEventListener("mousemove",a.onMouseMove),a.currentDoc.removeEventListener("mouseup",a.onDragStopped),a.currentDoc.removeEventListener("touchmove",a.onTouchMove),a.currentDoc.removeEventListener("touchend",a.onDragStopped),a.currentDoc.removeEventListener("gesturemove",a.onGestureMove),a.currentDoc.removeEventListener("gestureend",a.onGestureEnd),a.currentDoc.removeEventListener("scroll",a.onScroll))},a.clearScrollEvent=function(){a.containerRef&&a.containerRef.removeEventListener("wheel",a.onWheel),a.wheelTimer&&clearTimeout(a.wheelTimer)},a.onMediaLoad=function(){var d=a.computeSizes();d&&(a.emitCropData(),a.setInitialCrop(d)),a.props.onMediaLoaded&&a.props.onMediaLoaded(a.mediaSize)},a.setInitialCrop=function(d){if(a.props.initialCroppedAreaPercentages){var p=o2(a.props.initialCroppedAreaPercentages,a.mediaSize,a.props.rotation,d,a.props.minZoom,a.props.maxZoom),x=p.crop,y=p.zoom;a.props.onCropChange(x),a.props.onZoomChange&&a.props.onZoomChange(y)}else if(a.props.initialCroppedAreaPixels){var A=l2(a.props.initialCroppedAreaPixels,a.mediaSize,a.props.rotation,d,a.props.minZoom,a.props.maxZoom),x=A.crop,y=A.zoom;a.props.onCropChange(x),a.props.onZoomChange&&a.props.onZoomChange(y)}},a.computeSizes=function(){var d,p,x,y,A,w,E=a.imageRef.current||a.videoRef.current;if(E&&a.containerRef){a.containerRect=a.containerRef.getBoundingClientRect(),a.saveContainerPosition();var S=a.containerRect.width/a.containerRect.height,T=((d=a.imageRef.current)===null||d===void 0?void 0:d.naturalWidth)||((p=a.videoRef.current)===null||p===void 0?void 0:p.videoWidth)||0,R=((x=a.imageRef.current)===null||x===void 0?void 0:x.naturalHeight)||((y=a.videoRef.current)===null||y===void 0?void 0:y.videoHeight)||0,k=E.offsetWidth<T||E.offsetHeight<R,L=T/R,j=void 0;if(k)switch(a.state.mediaObjectFit){default:case"contain":j=S>L?{width:a.containerRect.height*L,height:a.containerRect.height}:{width:a.containerRect.width,height:a.containerRect.width/L};break;case"horizontal-cover":j={width:a.containerRect.width,height:a.containerRect.width/L};break;case"vertical-cover":j={width:a.containerRect.height*L,height:a.containerRect.height};break}else j={width:E.offsetWidth,height:E.offsetHeight};a.mediaSize=Kn(Kn({},j),{naturalWidth:T,naturalHeight:R}),a.props.setMediaSize&&a.props.setMediaSize(a.mediaSize);var B=a.props.cropSize?a.props.cropSize:t2(a.mediaSize.width,a.mediaSize.height,a.containerRect.width,a.containerRect.height,a.props.aspect,a.props.rotation);return(((A=a.state.cropSize)===null||A===void 0?void 0:A.height)!==B.height||((w=a.state.cropSize)===null||w===void 0?void 0:w.width)!==B.width)&&a.props.onCropSizeChange&&a.props.onCropSizeChange(B),a.setState({cropSize:B},a.recomputeCropPosition),a.props.setCropSize&&a.props.setCropSize(B),B}},a.saveContainerPosition=function(){if(a.containerRef){var d=a.containerRef.getBoundingClientRect();a.containerPosition={x:d.left,y:d.top}}},a.onMouseDown=function(d){a.currentDoc&&(d.preventDefault(),a.currentDoc.addEventListener("mousemove",a.onMouseMove),a.currentDoc.addEventListener("mouseup",a.onDragStopped),a.saveContainerPosition(),a.onDragStart(o.getMousePoint(d)))},a.onMouseMove=function(d){return a.onDrag(o.getMousePoint(d))},a.onScroll=function(d){a.currentDoc&&(d.preventDefault(),a.saveContainerPosition())},a.onTouchStart=function(d){a.currentDoc&&(a.isTouching=!0,!(a.props.onTouchRequest&&!a.props.onTouchRequest(d))&&(a.currentDoc.addEventListener("touchmove",a.onTouchMove,{passive:!1}),a.currentDoc.addEventListener("touchend",a.onDragStopped),a.saveContainerPosition(),d.touches.length===2?a.onPinchStart(d):d.touches.length===1&&a.onDragStart(o.getTouchPoint(d.touches[0]))))},a.onTouchMove=function(d){d.preventDefault(),d.touches.length===2?a.onPinchMove(d):d.touches.length===1&&a.onDrag(o.getTouchPoint(d.touches[0]))},a.onGestureStart=function(d){a.currentDoc&&(d.preventDefault(),a.currentDoc.addEventListener("gesturechange",a.onGestureMove),a.currentDoc.addEventListener("gestureend",a.onGestureEnd),a.gestureZoomStart=a.props.zoom,a.gestureRotationStart=a.props.rotation)},a.onGestureMove=function(d){if(d.preventDefault(),!a.isTouching){var p=o.getMousePoint(d),x=a.gestureZoomStart-1+d.scale;if(a.setNewZoom(x,p,{shouldUpdatePosition:!0}),a.props.onRotationChange){var y=a.gestureRotationStart+d.rotation;a.props.onRotationChange(y)}}},a.onGestureEnd=function(d){a.cleanEvents()},a.onDragStart=function(d){var p,x,y=d.x,A=d.y;a.dragStartPosition={x:y,y:A},a.dragStartCrop=Kn({},a.props.crop),(x=(p=a.props).onInteractionStart)===null||x===void 0||x.call(p)},a.onDrag=function(d){var p=d.x,x=d.y;a.currentWindow&&(a.rafDragTimeout&&a.currentWindow.cancelAnimationFrame(a.rafDragTimeout),a.rafDragTimeout=a.currentWindow.requestAnimationFrame(function(){if(a.state.cropSize&&!(p===void 0||x===void 0)){var y=p-a.dragStartPosition.x,A=x-a.dragStartPosition.y,w={x:a.dragStartCrop.x+y,y:a.dragStartCrop.y+A},E=a.props.restrictPosition?wa(w,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):w;a.props.onCropChange(E)}}))},a.onDragStopped=function(){var d,p;a.isTouching=!1,a.cleanEvents(),a.emitCropData(),(p=(d=a.props).onInteractionEnd)===null||p===void 0||p.call(d)},a.onWheel=function(d){if(a.currentWindow&&!(a.props.onWheelRequest&&!a.props.onWheelRequest(d))){d.preventDefault();var p=o.getMousePoint(d),x=e2(d).pixelY,y=a.props.zoom-x*a.props.zoomSpeed/200;a.setNewZoom(y,p,{shouldUpdatePosition:!0}),a.state.hasWheelJustStarted||a.setState({hasWheelJustStarted:!0},function(){var A,w;return(w=(A=a.props).onInteractionStart)===null||w===void 0?void 0:w.call(A)}),a.wheelTimer&&clearTimeout(a.wheelTimer),a.wheelTimer=a.currentWindow.setTimeout(function(){return a.setState({hasWheelJustStarted:!1},function(){var A,w;return(w=(A=a.props).onInteractionEnd)===null||w===void 0?void 0:w.call(A)})},250)}},a.getPointOnContainer=function(d,p){var x=d.x,y=d.y;if(!a.containerRect)throw new Error("The Cropper is not mounted");return{x:a.containerRect.width/2-(x-p.x),y:a.containerRect.height/2-(y-p.y)}},a.getPointOnMedia=function(d){var p=d.x,x=d.y,y=a.props,A=y.crop,w=y.zoom;return{x:(p+A.x)/w,y:(x+A.y)/w}},a.setNewZoom=function(d,p,x){var y=x===void 0?{}:x,A=y.shouldUpdatePosition,w=A===void 0?!0:A;if(!(!a.state.cropSize||!a.props.onZoomChange)){var E=Tu(d,a.props.minZoom,a.props.maxZoom);if(w){var S=a.getPointOnContainer(p,a.containerPosition),T=a.getPointOnMedia(S),R={x:T.x*E-S.x,y:T.y*E-S.y},k=a.props.restrictPosition?wa(R,a.mediaSize,a.state.cropSize,E,a.props.rotation):R;a.props.onCropChange(k)}a.props.onZoomChange(E)}},a.getCropData=function(){if(!a.state.cropSize)return null;var d=a.props.restrictPosition?wa(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;return r2(d,a.mediaSize,a.state.cropSize,a.getAspect(),a.props.zoom,a.props.rotation,a.props.restrictPosition)},a.emitCropData=function(){var d=a.getCropData();if(d){var p=d.croppedAreaPercentages,x=d.croppedAreaPixels;a.props.onCropComplete&&a.props.onCropComplete(p,x),a.props.onCropAreaChange&&a.props.onCropAreaChange(p,x)}},a.emitCropAreaChange=function(){var d=a.getCropData();if(d){var p=d.croppedAreaPercentages,x=d.croppedAreaPixels;a.props.onCropAreaChange&&a.props.onCropAreaChange(p,x)}},a.recomputeCropPosition=function(){if(a.state.cropSize){var d=a.props.restrictPosition?wa(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;a.props.onCropChange(d),a.emitCropData()}},a.onKeyDown=function(d){var p=a.props,x=p.crop,y=p.onCropChange,A=p.keyboardStep,w=p.zoom,E=p.rotation,S=A;if(a.state.cropSize){d.shiftKey&&(S*=.2);var T=Kn({},x);switch(d.key){case"ArrowUp":T.y-=S,d.preventDefault();break;case"ArrowDown":T.y+=S,d.preventDefault();break;case"ArrowLeft":T.x-=S,d.preventDefault();break;case"ArrowRight":T.x+=S,d.preventDefault();break;default:return}a.props.restrictPosition&&(T=wa(T,a.mediaSize,a.state.cropSize,w,E)),y(T)}},a}return o.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=c2,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef))},o.prototype.componentWillUnmount=function(){var a,d;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(a=this.resizeObserver)===null||a===void 0||a.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((d=this.styleRef.parentNode)===null||d===void 0||d.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},o.prototype.componentDidUpdate=function(a){var d,p,x,y,A,w,E,S,T;a.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):a.aspect!==this.props.aspect?this.computeSizes():a.objectFit!==this.props.objectFit?this.computeSizes():a.zoom!==this.props.zoom?this.recomputeCropPosition():((d=a.cropSize)===null||d===void 0?void 0:d.height)!==((p=this.props.cropSize)===null||p===void 0?void 0:p.height)||((x=a.cropSize)===null||x===void 0?void 0:x.width)!==((y=this.props.cropSize)===null||y===void 0?void 0:y.width)?this.computeSizes():(((A=a.crop)===null||A===void 0?void 0:A.x)!==((w=this.props.crop)===null||w===void 0?void 0:w.x)||((E=a.crop)===null||E===void 0?void 0:E.y)!==((S=this.props.crop)===null||S===void 0?void 0:S.y))&&this.emitCropAreaChange(),a.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),a.video!==this.props.video&&((T=this.videoRef.current)===null||T===void 0||T.load());var R=this.getObjectFit();R!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:R},this.computeSizes)},o.prototype.getAspect=function(){var a=this.props,d=a.cropSize,p=a.aspect;return d?d.width/d.height:p},o.prototype.getObjectFit=function(){var a,d,p,x;if(this.props.objectFit==="cover"){var y=this.imageRef.current||this.videoRef.current;if(y&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var A=this.containerRect.width/this.containerRect.height,w=((a=this.imageRef.current)===null||a===void 0?void 0:a.naturalWidth)||((d=this.videoRef.current)===null||d===void 0?void 0:d.videoWidth)||0,E=((p=this.imageRef.current)===null||p===void 0?void 0:p.naturalHeight)||((x=this.videoRef.current)===null||x===void 0?void 0:x.videoHeight)||0,S=w/E;return S<A?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},o.prototype.onPinchStart=function(a){var d=o.getTouchPoint(a.touches[0]),p=o.getTouchPoint(a.touches[1]);this.lastPinchDistance=Z0(d,p),this.lastPinchRotation=$0(d,p),this.onDragStart(q0(d,p))},o.prototype.onPinchMove=function(a){var d=this;if(!(!this.currentDoc||!this.currentWindow)){var p=o.getTouchPoint(a.touches[0]),x=o.getTouchPoint(a.touches[1]),y=q0(p,x);this.onDrag(y),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var A=Z0(p,x),w=d.props.zoom*(A/d.lastPinchDistance);d.setNewZoom(w,y,{shouldUpdatePosition:!1}),d.lastPinchDistance=A;var E=$0(p,x),S=d.props.rotation+(E-d.lastPinchRotation);d.props.onRotationChange&&d.props.onRotationChange(S),d.lastPinchRotation=E})}},o.prototype.render=function(){var a=this,d,p=this.props,x=p.image,y=p.video,A=p.mediaProps,w=p.transform,E=p.crop,S=E.x,T=E.y,R=p.rotation,k=p.zoom,L=p.cropShape,j=p.showGrid,B=p.style,U=B.containerStyle,H=B.cropAreaStyle,W=B.mediaStyle,ee=p.classes,ce=ee.containerClassName,ie=ee.cropAreaClassName,Q=ee.mediaClassName,ue=(d=this.state.mediaObjectFit)!==null&&d!==void 0?d:this.getObjectFit();return P.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(Re){return a.containerRef=Re},"data-testid":"container",style:U,className:eu("reactEasyCrop_Container",ce)},x?P.createElement("img",Kn({alt:"",className:eu("reactEasyCrop_Image",ue==="contain"&&"reactEasyCrop_Contain",ue==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",ue==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",Q)},A,{src:x,ref:this.imageRef,style:Kn(Kn({},W),{transform:w||"translate(".concat(S,"px, ").concat(T,"px) rotate(").concat(R,"deg) scale(").concat(k,")")}),onLoad:this.onMediaLoad})):y&&P.createElement("video",Kn({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:eu("reactEasyCrop_Video",ue==="contain"&&"reactEasyCrop_Contain",ue==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",ue==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",Q)},A,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:Kn(Kn({},W),{transform:w||"translate(".concat(S,"px, ").concat(T,"px) rotate(").concat(R,"deg) scale(").concat(k,")")}),controls:!1}),(Array.isArray(y)?y:[{src:y}]).map(function(q){return P.createElement("source",Kn({key:q.src},q))})),this.state.cropSize&&P.createElement("div",{style:Kn(Kn({},H),{width:this.state.cropSize.width,height:this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,"data-testid":"cropper",className:eu("reactEasyCrop_CropArea",L==="round"&&"reactEasyCrop_CropAreaRound",j&&"reactEasyCrop_CropAreaGrid",ie)}))},o.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:d2,minZoom:f2,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:h2},o.getMousePoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},o.getTouchPoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},o}(P.Component),va={},Q0;function p2(){return Q0||(Q0=1,va.createCanvas=function(r,o){return Object.assign(document.createElement("canvas"),{width:r,height:o})},va.createImageData=function(r,o,a){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(r);case 2:return new ImageData(r,o);default:return new ImageData(r,o,a)}},va.loadImage=function(r,o){return new Promise(function(a,d){const p=Object.assign(document.createElement("img"),o);function x(){p.onload=null,p.onerror=null}p.onload=function(){x(),a(p)},p.onerror=function(){x(),d(new Error('Failed to load the image "'+r+'"'))},p.src=r})}),va}p2();async function Lp(r,o){return console.log("Image source being cropped:",r),new Promise((a,d)=>{const p=new Image;p.onload=()=>{const x=document.createElement("canvas"),y=x.getContext("2d");x.width=o.width,x.height=o.height,y.drawImage(p,o.x,o.y,o.width,o.height,0,0,o.width,o.height);try{const A=x.toDataURL("image/jpeg");a(A)}catch{d(new Error("Error converting canvas to base64"))}},p.onerror=x=>d(new Error(`Image load error: ${x.message}`)),p.src=r})}const g2=({onSubmit:r,onClose:o,existingProfile:a})=>{const{user:d,userProfile:p,checkAuth:x}=P.useContext(zr),[y,A]=P.useState({name:(p==null?void 0:p.name)||"",image:null,imagePreview:p!=null&&p.image_data?`data:image/jpeg;base64,${p.image_data}`:"/assets/fakeprofile.png",croppedImage:null}),[w,E]=P.useState({x:0,y:0}),[S,T]=P.useState(1),[R,k]=P.useState(null),[L,j]=P.useState(!1),[B,U]=P.useState(!1),H=ce=>{const ie=ce.target.files[0];if(ie){const Q=new FileReader;Q.onload=ue=>{A(q=>({...q,image:ie,imagePreview:ue.target.result})),j(!0)},Q.readAsDataURL(ie)}},W=(ce,ie)=>{console.log("Cropped Area Pixels:",ie),k(ie)};async function ee(ce){ce.preventDefault();let ie;if(y.croppedImage)ie=y.croppedImage.split(",")[1];else if(y.image instanceof File){const q=await y.image.arrayBuffer();ie=btoa(new Uint8Array(q).reduce((Re,je)=>Re+String.fromCharCode(je),""))}else if(p!=null&&p.image_data)ie=p.image_data;else{console.error("No valid image provided");return}const Q={name:y.name,image_data:ie};console.log("Image data (first 100 chars):",ie.substring(0,100));const ue=localStorage.getItem("access_token");try{const q=await fetch(`${window.server_url}/update_profile`,{method:"POST",headers:{Authorization:`Bearer ${ue}`,"Content-Type":"application/json"},body:JSON.stringify(Q)});if(!q.ok)throw new Error("Failed to update profile");const Re=await q.json();await x(),console.log("Profile updated successfully:",Re),o()}catch(q){console.error("Error updating profile:",q)}}return N.jsx("div",{className:"profile-creation-overlay",style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:N.jsxs("div",{className:"profile-creation-modal",style:{width:"70%",maxWidth:"500px",backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",padding:"2rem",boxShadow:"0 10px 30px rgba(20,77,255,0.15)",position:"relative",border:"1px solid rgba(20,77,255,0.1)"},children:[N.jsx("button",{onClick:o,style:{position:"absolute",top:"1.2rem",right:"1.2rem",background:"none",border:"none",fontSize:"1.8rem",cursor:"pointer",color:"#144dff",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.1)"}},children:""}),N.jsx("h2",{style:{fontSize:"clamp(1.8rem, 6vw, 2.5rem)",color:"#144dff",textAlign:"center",marginBottom:"2rem",fontWeight:"600"},children:"Your Profile"}),N.jsxs("form",{onSubmit:ee,style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[N.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem"},children:[N.jsx("label",{style:{color:"#144dff",fontWeight:"500",fontSize:"1rem"},children:"Your Name"}),N.jsx("input",{type:"text",value:y.name,onChange:ce=>A({...y,name:ce.target.value}),style:{width:"100%",padding:"12px",borderRadius:"12px",border:"2px solid #e0e0e0",fontSize:"0.9rem",transition:"all 0.3s ease",backgroundColor:"rgba(255,255,255,0.9)","&:focus":{borderColor:"#144dff",outline:"none",boxShadow:"0 0 0 3px rgba(20,77,255,0.1)"}}})]}),!L&&N.jsx("div",{style:{width:"250px",height:"250px",margin:"0 auto",borderRadius:"20%",overflow:"hidden",border:"7px solid #144dff",boxShadow:"0 8px 25px rgba(20,77,255,0.2)",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.02)"}},children:N.jsx("img",{src:y.croppedImage?y.croppedImage:y.imagePreview?y.imagePreview:p!=null&&p.image_data?`data:image/jpeg;base64,${p.image_data}`:"/assets/fakeprofile.png",alt:"Profile preview",style:{width:"100%",height:"100%",objectFit:"cover"}})}),N.jsxs("div",{style:{textAlign:"center"},children:[N.jsx("input",{type:"file",id:"image-upload",accept:"image/*",onChange:H,style:{display:"none"}}),N.jsx("label",{htmlFor:"image-upload",style:{padding:"0.8rem 1.2rem",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",borderRadius:"25px",cursor:"pointer",display:"inline-block",fontSize:"0.9rem",fontWeight:"600",boxShadow:"0 4px 15px rgba(20,77,255,0.2)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Upload New Image"})]}),L&&N.jsxs("div",{style:{width:"100%",maxWidth:"300px",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",gap:"1.2rem"},children:[N.jsx("div",{style:{position:"relative",width:"250px",height:"250px",borderRadius:"20%",overflow:"hidden",border:"7px solid #144dff",boxShadow:"0 8px 25px rgba(20,77,255,0.2)"},children:N.jsx(kp,{image:y.imagePreview,crop:w,zoom:S,aspect:1,onCropComplete:W,onCropChange:E,onZoomChange:T})}),N.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[N.jsx("button",{type:"button",onClick:()=>{j(!1),y.croppedImage||A(ce=>({...ce,imagePreview:null}))},style:{padding:"0.8rem 1.2rem",borderRadius:"25px",border:"2px solid #144dff",background:"white",color:"#144dff",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease","&:hover":{background:"rgba(20,77,255,0.1)"}},children:"Cancel"}),N.jsx("button",{type:"button",onClick:async()=>{try{const ce=await Lp(y.imagePreview,R);A(ie=>({...ie,croppedImage:ce,imagePreview:ce})),j(!1),U(!0),setTimeout(()=>U(!1),1e4)}catch(ce){console.error("Error cropping image:",ce)}},className:`save-profile-button ${B?"glow-bounce":""}`,style:{padding:"0.8rem 1.2rem",borderRadius:"25px",border:"none",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(20,77,255,0.2)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Save Cropped Image"})]})]}),N.jsx("button",{type:"submit",className:`save-profile-button ${B?"glow-bounce":""}`,style:{padding:"1rem",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",border:"none",borderRadius:"25px",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",marginTop:"1rem",boxShadow:"0 4px 15px rgba(20,77,255,0.2)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Save Profile"})]})]})})};var Ca={},J0;function m2(){if(J0)return Ca;J0=1,Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.parse=y,Ca.serialize=E;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,o=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,d=/^[\u0020-\u003A\u003D-\u007E]*$/,p=Object.prototype.toString,x=(()=>{const R=function(){};return R.prototype=Object.create(null),R})();function y(R,k){const L=new x,j=R.length;if(j<2)return L;const B=(k==null?void 0:k.decode)||S;let U=0;do{const H=R.indexOf("=",U);if(H===-1)break;const W=R.indexOf(";",U),ee=W===-1?j:W;if(H>ee){U=R.lastIndexOf(";",H-1)+1;continue}const ce=A(R,U,H),ie=w(R,H,ce),Q=R.slice(ce,ie);if(L[Q]===void 0){let ue=A(R,H+1,ee),q=w(R,ee,ue);const Re=B(R.slice(ue,q));L[Q]=Re}U=ee+1}while(U<j);return L}function A(R,k,L){do{const j=R.charCodeAt(k);if(j!==32&&j!==9)return k}while(++k<L);return L}function w(R,k,L){for(;k>L;){const j=R.charCodeAt(--k);if(j!==32&&j!==9)return k+1}return L}function E(R,k,L){const j=(L==null?void 0:L.encode)||encodeURIComponent;if(!r.test(R))throw new TypeError(`argument name is invalid: ${R}`);const B=j(k);if(!o.test(B))throw new TypeError(`argument val is invalid: ${k}`);let U=R+"="+B;if(!L)return U;if(L.maxAge!==void 0){if(!Number.isInteger(L.maxAge))throw new TypeError(`option maxAge is invalid: ${L.maxAge}`);U+="; Max-Age="+L.maxAge}if(L.domain){if(!a.test(L.domain))throw new TypeError(`option domain is invalid: ${L.domain}`);U+="; Domain="+L.domain}if(L.path){if(!d.test(L.path))throw new TypeError(`option path is invalid: ${L.path}`);U+="; Path="+L.path}if(L.expires){if(!T(L.expires)||!Number.isFinite(L.expires.valueOf()))throw new TypeError(`option expires is invalid: ${L.expires}`);U+="; Expires="+L.expires.toUTCString()}if(L.httpOnly&&(U+="; HttpOnly"),L.secure&&(U+="; Secure"),L.partitioned&&(U+="; Partitioned"),L.priority)switch(typeof L.priority=="string"?L.priority.toLowerCase():void 0){case"low":U+="; Priority=Low";break;case"medium":U+="; Priority=Medium";break;case"high":U+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${L.priority}`)}if(L.sameSite)switch(typeof L.sameSite=="string"?L.sameSite.toLowerCase():L.sameSite){case!0:case"strict":U+="; SameSite=Strict";break;case"lax":U+="; SameSite=Lax";break;case"none":U+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${L.sameSite}`)}return U}function S(R){if(R.indexOf("%")===-1)return R;try{return decodeURIComponent(R)}catch{return R}}function T(R){return p.call(R)==="[object Date]"}return Ca}m2();/**
 * react-router v7.0.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var e1="popstate";function x2(r={}){function o(d,p){let{pathname:x,search:y,hash:A}=d.location;return Nf("",{pathname:x,search:y,hash:A},p.state&&p.state.usr||null,p.state&&p.state.key||"default")}function a(d,p){return typeof p=="string"?p:Pa(p)}return w2(o,a,null,r)}function ln(r,o){if(r===!1||r===null||typeof r>"u")throw new Error(o)}function pi(r,o){if(!r){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}function y2(){return Math.random().toString(36).substring(2,10)}function t1(r,o){return{usr:r.state,key:r.key,idx:o}}function Nf(r,o,a=null,d){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof o=="string"?Do(o):o,state:a,key:o&&o.key||d||y2()}}function Pa({pathname:r="/",search:o="",hash:a=""}){return o&&o!=="?"&&(r+=o.charAt(0)==="?"?o:"?"+o),a&&a!=="#"&&(r+=a.charAt(0)==="#"?a:"#"+a),r}function Do(r){let o={};if(r){let a=r.indexOf("#");a>=0&&(o.hash=r.substring(a),r=r.substring(0,a));let d=r.indexOf("?");d>=0&&(o.search=r.substring(d),r=r.substring(0,d)),r&&(o.pathname=r)}return o}function w2(r,o,a,d={}){let{window:p=document.defaultView,v5Compat:x=!1}=d,y=p.history,A="POP",w=null,E=S();E==null&&(E=0,y.replaceState({...y.state,idx:E},""));function S(){return(y.state||{idx:null}).idx}function T(){A="POP";let B=S(),U=B==null?null:B-E;E=B,w&&w({action:A,location:j.location,delta:U})}function R(B,U){A="PUSH";let H=Nf(j.location,B,U);E=S()+1;let W=t1(H,E),ee=j.createHref(H);try{y.pushState(W,"",ee)}catch(ce){if(ce instanceof DOMException&&ce.name==="DataCloneError")throw ce;p.location.assign(ee)}x&&w&&w({action:A,location:j.location,delta:1})}function k(B,U){A="REPLACE";let H=Nf(j.location,B,U);E=S();let W=t1(H,E),ee=j.createHref(H);y.replaceState(W,"",ee),x&&w&&w({action:A,location:j.location,delta:0})}function L(B){let U=p.location.origin!=="null"?p.location.origin:p.location.href,H=typeof B=="string"?B:Pa(B);return H=H.replace(/ $/,"%20"),ln(U,`No window.location.(origin|href) available to create URL for href: ${H}`),new URL(H,U)}let j={get action(){return A},get location(){return r(p,y)},listen(B){if(w)throw new Error("A history only accepts one active listener");return p.addEventListener(e1,T),w=B,()=>{p.removeEventListener(e1,T),w=null}},createHref(B){return o(p,B)},createURL:L,encodeLocation(B){let U=L(B);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:R,replace:k,go(B){return y.go(B)}};return j}function Bp(r,o,a="/"){return v2(r,o,a,!1)}function v2(r,o,a,d){let p=typeof o=="string"?Do(o):o,x=ds(p.pathname||"/",a);if(x==null)return null;let y=Fp(r);C2(y);let A=null;for(let w=0;A==null&&w<y.length;++w){let E=P2(x);A=_2(y[w],E,d)}return A}function Fp(r,o=[],a=[],d=""){let p=(x,y,A)=>{let w={relativePath:A===void 0?x.path||"":A,caseSensitive:x.caseSensitive===!0,childrenIndex:y,route:x};w.relativePath.startsWith("/")&&(ln(w.relativePath.startsWith(d),`Absolute route path "${w.relativePath}" nested under path "${d}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(d.length));let E=ki([d,w.relativePath]),S=a.concat(w);x.children&&x.children.length>0&&(ln(x.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),Fp(x.children,o,S,E)),!(x.path==null&&!x.index)&&o.push({path:E,score:N2(E,x.index),routesMeta:S})};return r.forEach((x,y)=>{var A;if(x.path===""||!((A=x.path)!=null&&A.includes("?")))p(x,y);else for(let w of jp(x.path))p(x,y,w)}),o}function jp(r){let o=r.split("/");if(o.length===0)return[];let[a,...d]=o,p=a.endsWith("?"),x=a.replace(/\?$/,"");if(d.length===0)return p?[x,""]:[x];let y=jp(d.join("/")),A=[];return A.push(...y.map(w=>w===""?x:[x,w].join("/"))),p&&A.push(...y),A.map(w=>r.startsWith("/")&&w===""?"/":w)}function C2(r){r.sort((o,a)=>o.score!==a.score?a.score-o.score:R2(o.routesMeta.map(d=>d.childrenIndex),a.routesMeta.map(d=>d.childrenIndex)))}var E2=/^:[\w-]+$/,A2=3,S2=2,b2=1,T2=10,I2=-2,n1=r=>r==="*";function N2(r,o){let a=r.split("/"),d=a.length;return a.some(n1)&&(d+=I2),o&&(d+=S2),a.filter(p=>!n1(p)).reduce((p,x)=>p+(E2.test(x)?A2:x===""?b2:T2),d)}function R2(r,o){return r.length===o.length&&r.slice(0,-1).every((d,p)=>d===o[p])?r[r.length-1]-o[o.length-1]:0}function _2(r,o,a=!1){let{routesMeta:d}=r,p={},x="/",y=[];for(let A=0;A<d.length;++A){let w=d[A],E=A===d.length-1,S=x==="/"?o:o.slice(x.length)||"/",T=gu({path:w.relativePath,caseSensitive:w.caseSensitive,end:E},S),R=w.route;if(!T&&E&&a&&!d[d.length-1].route.index&&(T=gu({path:w.relativePath,caseSensitive:w.caseSensitive,end:!1},S)),!T)return null;Object.assign(p,T.params),y.push({params:p,pathname:ki([x,T.pathname]),pathnameBase:L2(ki([x,T.pathnameBase])),route:R}),T.pathnameBase!=="/"&&(x=ki([x,T.pathnameBase]))}return y}function gu(r,o){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[a,d]=O2(r.path,r.caseSensitive,r.end),p=o.match(a);if(!p)return null;let x=p[0],y=x.replace(/(.)\/+$/,"$1"),A=p.slice(1);return{params:d.reduce((E,{paramName:S,isOptional:T},R)=>{if(S==="*"){let L=A[R]||"";y=x.slice(0,x.length-L.length).replace(/(.)\/+$/,"$1")}const k=A[R];return T&&!k?E[S]=void 0:E[S]=(k||"").replace(/%2F/g,"/"),E},{}),pathname:x,pathnameBase:y,pattern:r}}function O2(r,o=!1,a=!0){pi(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let d=[],p="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,A,w)=>(d.push({paramName:A,isOptional:w!=null}),w?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(d.push({paramName:"*"}),p+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?p+="\\/*$":r!==""&&r!=="/"&&(p+="(?:(?=\\/|$))"),[new RegExp(p,o?void 0:"i"),d]}function P2(r){try{return r.split("/").map(o=>decodeURIComponent(o).replace(/\//g,"%2F")).join("/")}catch(o){return pi(!1,`The URL path "${r}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${o}).`),r}}function ds(r,o){if(o==="/")return r;if(!r.toLowerCase().startsWith(o.toLowerCase()))return null;let a=o.endsWith("/")?o.length-1:o.length,d=r.charAt(a);return d&&d!=="/"?null:r.slice(a)||"/"}function M2(r,o="/"){let{pathname:a,search:d="",hash:p=""}=typeof r=="string"?Do(r):r;return{pathname:a?a.startsWith("/")?a:D2(a,o):o,search:B2(d),hash:F2(p)}}function D2(r,o){let a=o.replace(/\/+$/,"").split("/");return r.split("/").forEach(p=>{p===".."?a.length>1&&a.pop():p!=="."&&a.push(p)}),a.length>1?a.join("/"):"/"}function df(r,o,a,d){return`Cannot include a '${r}' character in a manually specified \`to.${o}\` field [${JSON.stringify(d)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function k2(r){return r.filter((o,a)=>a===0||o.route.path&&o.route.path.length>0)}function Vp(r){let o=k2(r);return o.map((a,d)=>d===o.length-1?a.pathname:a.pathnameBase)}function Up(r,o,a,d=!1){let p;typeof r=="string"?p=Do(r):(p={...r},ln(!p.pathname||!p.pathname.includes("?"),df("?","pathname","search",p)),ln(!p.pathname||!p.pathname.includes("#"),df("#","pathname","hash",p)),ln(!p.search||!p.search.includes("#"),df("#","search","hash",p)));let x=r===""||p.pathname==="",y=x?"/":p.pathname,A;if(y==null)A=a;else{let T=o.length-1;if(!d&&y.startsWith("..")){let R=y.split("/");for(;R[0]==="..";)R.shift(),T-=1;p.pathname=R.join("/")}A=T>=0?o[T]:"/"}let w=M2(p,A),E=y&&y!=="/"&&y.endsWith("/"),S=(x||y===".")&&a.endsWith("/");return!w.pathname.endsWith("/")&&(E||S)&&(w.pathname+="/"),w}var ki=r=>r.join("/").replace(/\/\/+/g,"/"),L2=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),B2=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,F2=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function j2(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var zp=["POST","PUT","PATCH","DELETE"];new Set(zp);var V2=["GET",...zp];new Set(V2);var ko=P.createContext(null);ko.displayName="DataRouter";var Iu=P.createContext(null);Iu.displayName="DataRouterState";var Wp=P.createContext({isTransitioning:!1});Wp.displayName="ViewTransition";var U2=P.createContext(new Map);U2.displayName="Fetchers";var z2=P.createContext(null);z2.displayName="Await";var gi=P.createContext(null);gi.displayName="Navigation";var za=P.createContext(null);za.displayName="Location";var mi=P.createContext({outlet:null,matches:[],isDataRoute:!1});mi.displayName="Route";var Jf=P.createContext(null);Jf.displayName="RouteError";function W2(r,{relative:o}={}){ln(Wa(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:d}=P.useContext(gi),{hash:p,pathname:x,search:y}=Ha(r,{relative:o}),A=x;return a!=="/"&&(A=x==="/"?a:ki([a,x])),d.createHref({pathname:A,search:y,hash:p})}function Wa(){return P.useContext(za)!=null}function xi(){return ln(Wa(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(za).location}var Hp="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Gp(r){P.useContext(gi).static||P.useLayoutEffect(r)}function Wr(){let{isDataRoute:r}=P.useContext(mi);return r?ry():H2()}function H2(){ln(Wa(),"useNavigate() may be used only in the context of a <Router> component.");let r=P.useContext(ko),{basename:o,navigator:a}=P.useContext(gi),{matches:d}=P.useContext(mi),{pathname:p}=xi(),x=JSON.stringify(Vp(d)),y=P.useRef(!1);return Gp(()=>{y.current=!0}),P.useCallback((w,E={})=>{if(pi(y.current,Hp),!y.current)return;if(typeof w=="number"){a.go(w);return}let S=Up(w,JSON.parse(x),p,E.relative==="path");r==null&&o!=="/"&&(S.pathname=S.pathname==="/"?o:ki([o,S.pathname])),(E.replace?a.replace:a.push)(S,E.state,E)},[o,a,x,p,r])}P.createContext(null);function G2(){let{matches:r}=P.useContext(mi),o=r[r.length-1];return o?o.params:{}}function Ha(r,{relative:o}={}){let{matches:a}=P.useContext(mi),{pathname:d}=xi(),p=JSON.stringify(Vp(a));return P.useMemo(()=>Up(r,JSON.parse(p),d,o==="path"),[r,p,d,o])}function X2(r,o){return Xp(r,o)}function Xp(r,o,a,d){var U;ln(Wa(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:p}=P.useContext(gi),{matches:x}=P.useContext(mi),y=x[x.length-1],A=y?y.params:{},w=y?y.pathname:"/",E=y?y.pathnameBase:"/",S=y&&y.route;{let H=S&&S.path||"";Yp(w,!S||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${w}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let T=xi(),R;if(o){let H=typeof o=="string"?Do(o):o;ln(E==="/"||((U=H.pathname)==null?void 0:U.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${H.pathname}" was given in the \`location\` prop.`),R=H}else R=T;let k=R.pathname||"/",L=k;if(E!=="/"){let H=E.replace(/^\//,"").split("/");L="/"+k.replace(/^\//,"").split("/").slice(H.length).join("/")}let j=Bp(r,{pathname:L});pi(S||j!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),pi(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let B=q2(j&&j.map(H=>Object.assign({},H,{params:Object.assign({},A,H.params),pathname:ki([E,p.encodeLocation?p.encodeLocation(H.pathname).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?E:ki([E,p.encodeLocation?p.encodeLocation(H.pathnameBase).pathname:H.pathnameBase])})),x,a,d);return o&&B?P.createElement(za.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},B):B}function Y2(){let r=ny(),o=j2(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),a=r instanceof Error?r.stack:null,d="rgba(200,200,200, 0.5)",p={padding:"0.5rem",backgroundColor:d},x={padding:"2px 4px",backgroundColor:d},y=null;return console.error("Error handled by React Router default ErrorBoundary:",r),y=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:x},"ErrorBoundary")," or"," ",P.createElement("code",{style:x},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},o),a?P.createElement("pre",{style:p},a):null,y)}var K2=P.createElement(Y2,null),Z2=class extends P.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,o){return o.location!==r.location||o.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:o.error,location:o.location,revalidation:r.revalidation||o.revalidation}}componentDidCatch(r,o){console.error("React Router caught the following error during render",r,o)}render(){return this.state.error!==void 0?P.createElement(mi.Provider,{value:this.props.routeContext},P.createElement(Jf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function $2({routeContext:r,match:o,children:a}){let d=P.useContext(ko);return d&&d.static&&d.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(d.staticContext._deepestRenderedBoundaryId=o.route.id),P.createElement(mi.Provider,{value:r},a)}function q2(r,o=[],a=null,d=null){if(r==null){if(!a)return null;if(a.errors)r=a.matches;else if(o.length===0&&!a.initialized&&a.matches.length>0)r=a.matches;else return null}let p=r,x=a==null?void 0:a.errors;if(x!=null){let w=p.findIndex(E=>E.route.id&&(x==null?void 0:x[E.route.id])!==void 0);ln(w>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(x).join(",")}`),p=p.slice(0,Math.min(p.length,w+1))}let y=!1,A=-1;if(a)for(let w=0;w<p.length;w++){let E=p[w];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(A=w),E.route.id){let{loaderData:S,errors:T}=a,R=E.route.loader&&!S.hasOwnProperty(E.route.id)&&(!T||T[E.route.id]===void 0);if(E.route.lazy||R){y=!0,A>=0?p=p.slice(0,A+1):p=[p[0]];break}}}return p.reduceRight((w,E,S)=>{let T,R=!1,k=null,L=null;a&&(T=x&&E.route.id?x[E.route.id]:void 0,k=E.route.errorElement||K2,y&&(A<0&&S===0?(Yp("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,L=null):A===S&&(R=!0,L=E.route.hydrateFallbackElement||null)));let j=o.concat(p.slice(0,S+1)),B=()=>{let U;return T?U=k:R?U=L:E.route.Component?U=P.createElement(E.route.Component,null):E.route.element?U=E.route.element:U=w,P.createElement($2,{match:E,routeContext:{outlet:w,matches:j,isDataRoute:a!=null},children:U})};return a&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?P.createElement(Z2,{location:a.location,revalidation:a.revalidation,component:k,error:T,children:B(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):B()},null)}function ed(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Q2(r){let o=P.useContext(ko);return ln(o,ed(r)),o}function J2(r){let o=P.useContext(Iu);return ln(o,ed(r)),o}function ey(r){let o=P.useContext(mi);return ln(o,ed(r)),o}function td(r){let o=ey(r),a=o.matches[o.matches.length-1];return ln(a.route.id,`${r} can only be used on routes that contain a unique "id"`),a.route.id}function ty(){return td("useRouteId")}function ny(){var d;let r=P.useContext(Jf),o=J2("useRouteError"),a=td("useRouteError");return r!==void 0?r:(d=o.errors)==null?void 0:d[a]}function ry(){let{router:r}=Q2("useNavigate"),o=td("useNavigate"),a=P.useRef(!1);return Gp(()=>{a.current=!0}),P.useCallback(async(p,x={})=>{pi(a.current,Hp),a.current&&(typeof p=="number"?r.navigate(p):await r.navigate(p,{fromRouteId:o,...x}))},[r,o])}var r1={};function Yp(r,o,a){!o&&!r1[r]&&(r1[r]=!0,pi(!1,a))}P.memo(iy);function iy({routes:r,future:o,state:a}){return Xp(r,void 0,a,o)}function ui(r){ln(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function sy({basename:r="/",children:o=null,location:a,navigationType:d="POP",navigator:p,static:x=!1}){ln(!Wa(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let y=r.replace(/^\/*/,"/"),A=P.useMemo(()=>({basename:y,navigator:p,static:x,future:{}}),[y,p,x]);typeof a=="string"&&(a=Do(a));let{pathname:w="/",search:E="",hash:S="",state:T=null,key:R="default"}=a,k=P.useMemo(()=>{let L=ds(w,y);return L==null?null:{location:{pathname:L,search:E,hash:S,state:T,key:R},navigationType:d}},[y,w,E,S,T,R,d]);return pi(k!=null,`<Router basename="${y}"> is not able to match the URL "${w}${E}${S}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:P.createElement(gi.Provider,{value:A},P.createElement(za.Provider,{children:o,value:k}))}function oy({children:r,location:o}){return X2(Rf(r),o)}function Rf(r,o=[]){let a=[];return P.Children.forEach(r,(d,p)=>{if(!P.isValidElement(d))return;let x=[...o,p];if(d.type===P.Fragment){a.push.apply(a,Rf(d.props.children,x));return}ln(d.type===ui,`[${typeof d.type=="string"?d.type:d.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ln(!d.props.index||!d.props.children,"An index route cannot have child routes.");let y={id:d.props.id||x.join("-"),caseSensitive:d.props.caseSensitive,element:d.props.element,Component:d.props.Component,index:d.props.index,path:d.props.path,loader:d.props.loader,action:d.props.action,hydrateFallbackElement:d.props.hydrateFallbackElement,HydrateFallback:d.props.HydrateFallback,errorElement:d.props.errorElement,ErrorBoundary:d.props.ErrorBoundary,hasErrorBoundary:d.props.hasErrorBoundary===!0||d.props.ErrorBoundary!=null||d.props.errorElement!=null,shouldRevalidate:d.props.shouldRevalidate,handle:d.props.handle,lazy:d.props.lazy};d.props.children&&(y.children=Rf(d.props.children,x)),a.push(y)}),a}var lu="get",uu="application/x-www-form-urlencoded";function Nu(r){return r!=null&&typeof r.tagName=="string"}function ay(r){return Nu(r)&&r.tagName.toLowerCase()==="button"}function ly(r){return Nu(r)&&r.tagName.toLowerCase()==="form"}function uy(r){return Nu(r)&&r.tagName.toLowerCase()==="input"}function cy(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function fy(r,o){return r.button===0&&(!o||o==="_self")&&!cy(r)}var tu=null;function dy(){if(tu===null)try{new FormData(document.createElement("form"),0),tu=!1}catch{tu=!0}return tu}var hy=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function hf(r){return r!=null&&!hy.has(r)?(pi(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${uu}"`),null):r}function py(r,o){let a,d,p,x,y;if(ly(r)){let A=r.getAttribute("action");d=A?ds(A,o):null,a=r.getAttribute("method")||lu,p=hf(r.getAttribute("enctype"))||uu,x=new FormData(r)}else if(ay(r)||uy(r)&&(r.type==="submit"||r.type==="image")){let A=r.form;if(A==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let w=r.getAttribute("formaction")||A.getAttribute("action");if(d=w?ds(w,o):null,a=r.getAttribute("formmethod")||A.getAttribute("method")||lu,p=hf(r.getAttribute("formenctype"))||hf(A.getAttribute("enctype"))||uu,x=new FormData(A,r),!dy()){let{name:E,type:S,value:T}=r;if(S==="image"){let R=E?`${E}.`:"";x.append(`${R}x`,"0"),x.append(`${R}y`,"0")}else E&&x.append(E,T)}}else{if(Nu(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=lu,d=null,p=uu,y=r}return x&&p==="text/plain"&&(y=x,x=void 0),{action:d,method:a.toLowerCase(),encType:p,formData:x,body:y}}function nd(r,o){if(r===!1||r===null||typeof r>"u")throw new Error(o)}async function gy(r,o){if(r.id in o)return o[r.id];try{let a=await import(r.module);return o[r.id]=a,a}catch(a){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function my(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function xy(r,o,a){let d=await Promise.all(r.map(async p=>{let x=o.routes[p.route.id];if(x){let y=await gy(x,a);return y.links?y.links():[]}return[]}));return Cy(d.flat(1).filter(my).filter(p=>p.rel==="stylesheet"||p.rel==="preload").map(p=>p.rel==="stylesheet"?{...p,rel:"prefetch",as:"style"}:{...p,rel:"prefetch"}))}function i1(r,o,a,d,p,x){let y=(w,E)=>a[E]?w.route.id!==a[E].route.id:!0,A=(w,E)=>{var S;return a[E].pathname!==w.pathname||((S=a[E].route.path)==null?void 0:S.endsWith("*"))&&a[E].params["*"]!==w.params["*"]};return x==="assets"?o.filter((w,E)=>y(w,E)||A(w,E)):x==="data"?o.filter((w,E)=>{var T;let S=d.routes[w.route.id];if(!S||!S.hasLoader)return!1;if(y(w,E)||A(w,E))return!0;if(w.route.shouldRevalidate){let R=w.route.shouldRevalidate({currentUrl:new URL(p.pathname+p.search+p.hash,window.origin),currentParams:((T=a[0])==null?void 0:T.params)||{},nextUrl:new URL(r,window.origin),nextParams:w.params,defaultShouldRevalidate:!0});if(typeof R=="boolean")return R}return!0}):[]}function yy(r,o){return wy(r.map(a=>{let d=o.routes[a.route.id];if(!d)return[];let p=[d.module];return d.imports&&(p=p.concat(d.imports)),p}).flat(1))}function wy(r){return[...new Set(r)]}function vy(r){let o={},a=Object.keys(r).sort();for(let d of a)o[d]=r[d];return o}function Cy(r,o){let a=new Set;return new Set(o),r.reduce((d,p)=>{let x=JSON.stringify(vy(p));return a.has(x)||(a.add(x),d.push({key:x,link:p})),d},[])}function Ey(r){let o=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return o.pathname==="/"?o.pathname="_root.data":o.pathname=`${o.pathname.replace(/\/$/,"")}.data`,o}function Ay(){let r=P.useContext(ko);return nd(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Sy(){let r=P.useContext(Iu);return nd(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var rd=P.createContext(void 0);rd.displayName="FrameworkContext";function Kp(){let r=P.useContext(rd);return nd(r,"You must render this element inside a <HydratedRouter> element"),r}function by(r,o){let a=P.useContext(rd),[d,p]=P.useState(!1),[x,y]=P.useState(!1),{onFocus:A,onBlur:w,onMouseEnter:E,onMouseLeave:S,onTouchStart:T}=o,R=P.useRef(null);P.useEffect(()=>{if(r==="render"&&y(!0),r==="viewport"){let j=U=>{U.forEach(H=>{y(H.isIntersecting)})},B=new IntersectionObserver(j,{threshold:.5});return R.current&&B.observe(R.current),()=>{B.disconnect()}}},[r]),P.useEffect(()=>{if(d){let j=setTimeout(()=>{y(!0)},100);return()=>{clearTimeout(j)}}},[d]);let k=()=>{p(!0)},L=()=>{p(!1),y(!1)};return a?r!=="intent"?[x,R,{}]:[x,R,{onFocus:Ea(A,k),onBlur:Ea(w,L),onMouseEnter:Ea(E,k),onMouseLeave:Ea(S,L),onTouchStart:Ea(T,k)}]:[!1,R,{}]}function Ea(r,o){return a=>{r&&r(a),a.defaultPrevented||o(a)}}function Ty({page:r,...o}){let{router:a}=Ay(),d=P.useMemo(()=>Bp(a.routes,r,a.basename),[a.routes,r,a.basename]);return d?P.createElement(Ny,{page:r,matches:d,...o}):(console.warn(`Tried to prefetch ${r} but no routes matched.`),null)}function Iy(r){let{manifest:o,routeModules:a}=Kp(),[d,p]=P.useState([]);return P.useEffect(()=>{let x=!1;return xy(r,o,a).then(y=>{x||p(y)}),()=>{x=!0}},[r,o,a]),d}function Ny({page:r,matches:o,...a}){let d=xi(),{manifest:p,routeModules:x}=Kp(),{loaderData:y,matches:A}=Sy(),w=P.useMemo(()=>i1(r,o,A,p,d,"data"),[r,o,A,p,d]),E=P.useMemo(()=>i1(r,o,A,p,d,"assets"),[r,o,A,p,d]),S=P.useMemo(()=>{if(r===d.pathname+d.search+d.hash)return[];let k=new Set,L=!1;if(o.forEach(B=>{var H;let U=p.routes[B.route.id];!U||!U.hasLoader||(!w.some(W=>W.route.id===B.route.id)&&B.route.id in y&&((H=x[B.route.id])!=null&&H.shouldRevalidate)||U.hasClientLoader?L=!0:k.add(B.route.id))}),k.size===0)return[];let j=Ey(r);return L&&k.size>0&&j.searchParams.set("_routes",o.filter(B=>k.has(B.route.id)).map(B=>B.route.id).join(",")),[j.pathname+j.search]},[y,d,p,w,o,r,x]),T=P.useMemo(()=>yy(E,p),[E,p]),R=Iy(E);return P.createElement(P.Fragment,null,S.map(k=>P.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...a})),T.map(k=>P.createElement("link",{key:k,rel:"modulepreload",href:k,...a})),R.map(({key:k,link:L})=>P.createElement("link",{key:k,...L})))}function Ry(...r){return o=>{r.forEach(a=>{typeof a=="function"?a(o):a!=null&&(a.current=o)})}}var Zp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Zp&&(window.__reactRouterVersion="7.0.2")}catch{}function _y({basename:r,children:o,window:a}){let d=P.useRef();d.current==null&&(d.current=x2({window:a,v5Compat:!0}));let p=d.current,[x,y]=P.useState({action:p.action,location:p.location}),A=P.useCallback(w=>{P.startTransition(()=>y(w))},[y]);return P.useLayoutEffect(()=>p.listen(A),[p,A]),P.createElement(sy,{basename:r,children:o,location:x.location,navigationType:x.action,navigator:p})}var $p=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qp=P.forwardRef(function({onClick:o,discover:a="render",prefetch:d="none",relative:p,reloadDocument:x,replace:y,state:A,target:w,to:E,preventScrollReset:S,viewTransition:T,...R},k){let{basename:L}=P.useContext(gi),j=typeof E=="string"&&$p.test(E),B,U=!1;if(typeof E=="string"&&j&&(B=E,Zp))try{let q=new URL(window.location.href),Re=E.startsWith("//")?new URL(q.protocol+E):new URL(E),je=ds(Re.pathname,L);Re.origin===q.origin&&je!=null?E=je+Re.search+Re.hash:U=!0}catch{pi(!1,`<Link to="${E}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let H=W2(E,{relative:p}),[W,ee,ce]=by(d,R),ie=Dy(E,{replace:y,state:A,target:w,preventScrollReset:S,relative:p,viewTransition:T});function Q(q){o&&o(q),q.defaultPrevented||ie(q)}let ue=P.createElement("a",{...R,...ce,href:B||H,onClick:U||x?o:Q,ref:Ry(k,ee),target:w,"data-discover":!j&&a==="render"?"true":void 0});return W&&!j?P.createElement(P.Fragment,null,ue,P.createElement(Ty,{page:H})):ue});qp.displayName="Link";var Oy=P.forwardRef(function({"aria-current":o="page",caseSensitive:a=!1,className:d="",end:p=!1,style:x,to:y,viewTransition:A,children:w,...E},S){let T=Ha(y,{relative:E.relative}),R=xi(),k=P.useContext(Iu),{navigator:L,basename:j}=P.useContext(gi),B=k!=null&&jy(T)&&A===!0,U=L.encodeLocation?L.encodeLocation(T).pathname:T.pathname,H=R.pathname,W=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;a||(H=H.toLowerCase(),W=W?W.toLowerCase():null,U=U.toLowerCase()),W&&j&&(W=ds(W,j)||W);const ee=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let ce=H===U||!p&&H.startsWith(U)&&H.charAt(ee)==="/",ie=W!=null&&(W===U||!p&&W.startsWith(U)&&W.charAt(U.length)==="/"),Q={isActive:ce,isPending:ie,isTransitioning:B},ue=ce?o:void 0,q;typeof d=="function"?q=d(Q):q=[d,ce?"active":null,ie?"pending":null,B?"transitioning":null].filter(Boolean).join(" ");let Re=typeof x=="function"?x(Q):x;return P.createElement(qp,{...E,"aria-current":ue,className:q,ref:S,style:Re,to:y,viewTransition:A},typeof w=="function"?w(Q):w)});Oy.displayName="NavLink";var Py=P.forwardRef(({discover:r="render",fetcherKey:o,navigate:a,reloadDocument:d,replace:p,state:x,method:y=lu,action:A,onSubmit:w,relative:E,preventScrollReset:S,viewTransition:T,...R},k)=>{let L=By(),j=Fy(A,{relative:E}),B=y.toLowerCase()==="get"?"get":"post",U=typeof A=="string"&&$p.test(A),H=W=>{if(w&&w(W),W.defaultPrevented)return;W.preventDefault();let ee=W.nativeEvent.submitter,ce=(ee==null?void 0:ee.getAttribute("formmethod"))||y;L(ee||W.currentTarget,{fetcherKey:o,method:ce,navigate:a,replace:p,state:x,relative:E,preventScrollReset:S,viewTransition:T})};return P.createElement("form",{ref:k,method:B,action:j,onSubmit:d?w:H,...R,"data-discover":!U&&r==="render"?"true":void 0})});Py.displayName="Form";function My(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Qp(r){let o=P.useContext(ko);return ln(o,My(r)),o}function Dy(r,{target:o,replace:a,state:d,preventScrollReset:p,relative:x,viewTransition:y}={}){let A=Wr(),w=xi(),E=Ha(r,{relative:x});return P.useCallback(S=>{if(fy(S,o)){S.preventDefault();let T=a!==void 0?a:Pa(w)===Pa(E);A(r,{replace:T,state:d,preventScrollReset:p,relative:x,viewTransition:y})}},[w,A,E,a,d,o,r,p,x,y])}var ky=0,Ly=()=>`__${String(++ky)}__`;function By(){let{router:r}=Qp("useSubmit"),{basename:o}=P.useContext(gi),a=ty();return P.useCallback(async(d,p={})=>{let{action:x,method:y,encType:A,formData:w,body:E}=py(d,o);if(p.navigate===!1){let S=p.fetcherKey||Ly();await r.fetch(S,a,p.action||x,{preventScrollReset:p.preventScrollReset,formData:w,body:E,formMethod:p.method||y,formEncType:p.encType||A,flushSync:p.flushSync})}else await r.navigate(p.action||x,{preventScrollReset:p.preventScrollReset,formData:w,body:E,formMethod:p.method||y,formEncType:p.encType||A,replace:p.replace,state:p.state,fromRouteId:a,flushSync:p.flushSync,viewTransition:p.viewTransition})},[r,o,a])}function Fy(r,{relative:o}={}){let{basename:a}=P.useContext(gi),d=P.useContext(mi);ln(d,"useFormAction must be used inside a RouteContext");let[p]=d.matches.slice(-1),x={...Ha(r||".",{relative:o})},y=xi();if(r==null){x.search=y.search;let A=new URLSearchParams(x.search),w=A.getAll("index");if(w.some(S=>S==="")){A.delete("index"),w.filter(T=>T).forEach(T=>A.append("index",T));let S=A.toString();x.search=S?`?${S}`:""}}return(!r||r===".")&&p.route.index&&(x.search=x.search?x.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(x.pathname=x.pathname==="/"?a:ki([a,x.pathname])),Pa(x)}function jy(r,o={}){let a=P.useContext(Wp);ln(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:d}=Qp("useViewTransitionState"),p=Ha(r,{relative:o.relative});if(!a.isTransitioning)return!1;let x=ds(a.currentLocation.pathname,d)||a.currentLocation.pathname,y=ds(a.nextLocation.pathname,d)||a.nextLocation.pathname;return gu(p.pathname,y)!=null||gu(p.pathname,x)!=null}new TextEncoder;function Jp(){const r="./assets",o="/sounds/banger.mp3",a=Wr(),d=P.useRef(new Audio(r+o)),[p,x]=P.useState(!1),[y,A]=P.useState(!1),[w,E]=P.useState(null),[S,T]=P.useState(!1),[R,k]=P.useState(!1);P.useEffect(()=>{const W=d.current,ee=()=>{W.pause(),W.currentTime=0,A(!1),U(),a("/")};return W.addEventListener("ended",ee),()=>W.removeEventListener("ended",ee)},[R]);function L(){E(null),d.current.load(),d.current.play().then(()=>{d.current.pause(),d.current.currentTime=0,x(!0),A(!0),T(!0),B()}).catch(W=>{console.error("Error loading audio:",W),E("Failed to load audio. Please check the file path and format."),T(!1)})}function j(){return!!(d.current&&!d.current.paused)}function B(){d.current.paused?d.current.play().catch(W=>{console.error("Error playing audio:",W),E("Failed to play audio. Please try again.")}):d.current.currentTime=0}function U(){d.current&&(d.current.pause(),d.current.currentTime=0,d.current.src="",d.current=null)}function H(W){d.current.currentTime=W}return{audioRef:d,error:w,playSound:B,loadSound:L,seekTo:H,cancelSound:U,checkSound:j,soundEnabled:S,setSoundEnabled:T,isPlaying:y}}var kn;(function(r){r[r.QR_CODE=0]="QR_CODE",r[r.AZTEC=1]="AZTEC",r[r.CODABAR=2]="CODABAR",r[r.CODE_39=3]="CODE_39",r[r.CODE_93=4]="CODE_93",r[r.CODE_128=5]="CODE_128",r[r.DATA_MATRIX=6]="DATA_MATRIX",r[r.MAXICODE=7]="MAXICODE",r[r.ITF=8]="ITF",r[r.EAN_13=9]="EAN_13",r[r.EAN_8=10]="EAN_8",r[r.PDF_417=11]="PDF_417",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(kn||(kn={}));kn.QR_CODE,kn.AZTEC,kn.CODABAR,kn.CODE_39,kn.CODE_93,kn.CODE_128,kn.DATA_MATRIX,kn.MAXICODE,kn.ITF,kn.EAN_13,kn.EAN_8,kn.PDF_417,kn.RSS_14,kn.RSS_EXPANDED,kn.UPC_A,kn.UPC_E,kn.UPC_EAN_EXTENSION;var s1;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.URL=1]="URL"})(s1||(s1={}));var mu;(function(r){r[r.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",r[r.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(mu||(mu={}));var Vy=function(){function r(){}return r.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",r.SCAN_DEFAULT_FPS=2,r.DEFAULT_DISABLE_FLIP=!1,r.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,r.DEFAULT_SUPPORTED_SCAN_TYPE=[mu.SCAN_TYPE_CAMERA,mu.SCAN_TYPE_FILE],r}(),o1;(function(r){r[r.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",r[r.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",r[r.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(o1||(o1={}));var Sa={exports:{}},Uy=Sa.exports,a1;function zy(){return a1||(a1=1,function(r,o){(function(a,d){d(o)})(Uy,function(a){function d(_){return _==null}var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,e){_.__proto__=e}||function(_,e){for(var n in e)e.hasOwnProperty(n)&&(_[n]=e[n])};function x(_,e){p(_,e);function n(){this.constructor=_}_.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function y(_,e){var n=Object.setPrototypeOf;n?n(_,e):_.__proto__=e}function A(_,e){e===void 0&&(e=_.constructor);var n=Error.captureStackTrace;n&&n(_,e)}var w=function(_){x(e,_);function e(n){var i=this.constructor,l=_.call(this,n)||this;return Object.defineProperty(l,"name",{value:i.name,enumerable:!1}),y(l,i.prototype),A(l),l}return e}(Error);class E extends w{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}E.kind="Exception";class S extends E{}S.kind="ArgumentException";class T extends E{}T.kind="IllegalArgumentException";class R{constructor(e){if(this.binarizer=e,e===null)throw new T("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,n){return this.binarizer.getBlackRow(e,n)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,n,i,l){const u=this.binarizer.getLuminanceSource().crop(e,n,i,l);return new R(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new R(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new R(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class k extends E{static getChecksumInstance(){return new k}}k.kind="ChecksumException";class L{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class j{static arraycopy(e,n,i,l,u){for(;u--;)i[l++]=e[n++]}static currentTimeMillis(){return Date.now()}}class B extends E{}B.kind="IndexOutOfBoundsException";class U extends B{constructor(e=void 0,n=void 0){super(n),this.index=e,this.message=n}}U.kind="ArrayIndexOutOfBoundsException";class H{static fill(e,n){for(let i=0,l=e.length;i<l;i++)e[i]=n}static fillWithin(e,n,i,l){H.rangeCheck(e.length,n,i);for(let u=n;u<i;u++)e[u]=l}static rangeCheck(e,n,i){if(n>i)throw new T("fromIndex("+n+") > toIndex("+i+")");if(n<0)throw new U(n);if(i>e)throw new U(i)}static asList(...e){return e}static create(e,n,i){return Array.from({length:e}).map(u=>Array.from({length:n}).fill(i))}static createInt32Array(e,n,i){return Array.from({length:e}).map(u=>Int32Array.from({length:n}).fill(i))}static equals(e,n){if(!e||!n||!e.length||!n.length||e.length!==n.length)return!1;for(let i=0,l=e.length;i<l;i++)if(e[i]!==n[i])return!1;return!0}static hashCode(e){if(e===null)return 0;let n=1;for(const i of e)n=31*n+i;return n}static fillUint8Array(e,n){for(let i=0;i!==e.length;i++)e[i]=n}static copyOf(e,n){return e.slice(0,n)}static copyOfUint8Array(e,n){if(e.length<=n){const i=new Uint8Array(n);return i.set(e),i}return e.slice(0,n)}static copyOfRange(e,n,i){const l=i-n,u=new Int32Array(l);return j.arraycopy(e,n,u,0,l),u}static binarySearch(e,n,i){i===void 0&&(i=H.numberComparator);let l=0,u=e.length-1;for(;l<=u;){const c=u+l>>1,h=i(n,e[c]);if(h>0)l=c+1;else if(h<0)u=c-1;else return c}return-l-1}static numberComparator(e,n){return e-n}}class W{static numberOfTrailingZeros(e){let n;if(e===0)return 32;let i=31;return n=e<<16,n!==0&&(i-=16,e=n),n=e<<8,n!==0&&(i-=8,e=n),n=e<<4,n!==0&&(i-=4,e=n),n=e<<2,n!==0&&(i-=2,e=n),i-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let n=1;return e>>>16||(n+=16,e<<=16),e>>>24||(n+=8,e<<=8),e>>>28||(n+=4,e<<=4),e>>>30||(n+=2,e<<=2),n-=e>>>31,n}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,n){return Math.trunc(e/n)}static parseInt(e,n=void 0){return parseInt(e,n)}}W.MIN_VALUE_32_BITS=-2147483648,W.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ee{constructor(e,n){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,n==null?this.bits=ee.makeArray(e):this.bits=n)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const n=ee.makeArray(e);j.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const n=this.size;if(e>=n)return n;const i=this.bits;let l=Math.floor(e/32),u=i[l];u&=~((1<<(e&31))-1);const c=i.length;for(;u===0;){if(++l===c)return n;u=i[l]}const h=l*32+W.numberOfTrailingZeros(u);return h>n?n:h}getNextUnset(e){const n=this.size;if(e>=n)return n;const i=this.bits;let l=Math.floor(e/32),u=~i[l];u&=~((1<<(e&31))-1);const c=i.length;for(;u===0;){if(++l===c)return n;u=~i[l]}const h=l*32+W.numberOfTrailingZeros(u);return h>n?n:h}setBulk(e,n){this.bits[Math.floor(e/32)]=n}setRange(e,n){if(n<e||e<0||n>this.size)throw new T;if(n===e)return;n--;const i=Math.floor(e/32),l=Math.floor(n/32),u=this.bits;for(let c=i;c<=l;c++){const h=c>i?0:e&31,v=(2<<(c<l?31:n&31))-(1<<h);u[c]|=v}}clear(){const e=this.bits.length,n=this.bits;for(let i=0;i<e;i++)n[i]=0}isRange(e,n,i){if(n<e||e<0||n>this.size)throw new T;if(n===e)return!0;n--;const l=Math.floor(e/32),u=Math.floor(n/32),c=this.bits;for(let h=l;h<=u;h++){const m=h>l?0:e&31,I=(2<<(h<u?31:n&31))-(1<<m)&4294967295;if((c[h]&I)!==(i?I:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,n){if(n<0||n>32)throw new T("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(let i=n;i>0;i--)this.appendBit((e>>i-1&1)===1)}appendBitArray(e){const n=e.size;this.ensureCapacity(this.size+n);for(let i=0;i<n;i++)this.appendBit(e.get(i))}xor(e){if(this.size!==e.size)throw new T("Sizes don't match");const n=this.bits;for(let i=0,l=n.length;i<l;i++)n[i]^=e.bits[i]}toBytes(e,n,i,l){for(let u=0;u<l;u++){let c=0;for(let h=0;h<8;h++)this.get(e)&&(c|=1<<7-h),e++;n[i+u]=c}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),i=n+1,l=this.bits;for(let u=0;u<i;u++){let c=l[u];c=c>>1&1431655765|(c&1431655765)<<1,c=c>>2&858993459|(c&858993459)<<2,c=c>>4&252645135|(c&252645135)<<4,c=c>>8&16711935|(c&16711935)<<8,c=c>>16&65535|(c&65535)<<16,e[n-u]=c}if(this.size!==i*32){const u=i*32-this.size;let c=e[0]>>>u;for(let h=1;h<i;h++){const m=e[h];c|=m<<32-u,e[h-1]=c,c=m>>>u}e[i-1]=c}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof ee))return!1;const n=e;return this.size===n.size&&H.equals(this.bits,n.bits)}hashCode(){return 31*this.size+H.hashCode(this.bits)}toString(){let e="";for(let n=0,i=this.size;n<i;n++)n&7||(e+=" "),e+=this.get(n)?"X":".";return e}clone(){return new ee(this.size,this.bits.slice())}}var ce;(function(_){_[_.OTHER=0]="OTHER",_[_.PURE_BARCODE=1]="PURE_BARCODE",_[_.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",_[_.TRY_HARDER=3]="TRY_HARDER",_[_.CHARACTER_SET=4]="CHARACTER_SET",_[_.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",_[_.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",_[_.ASSUME_GS1=7]="ASSUME_GS1",_[_.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",_[_.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",_[_.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(ce||(ce={}));var ie=ce;class Q extends E{static getFormatInstance(){return new Q}}Q.kind="FormatException";var ue;(function(_){_[_.Cp437=0]="Cp437",_[_.ISO8859_1=1]="ISO8859_1",_[_.ISO8859_2=2]="ISO8859_2",_[_.ISO8859_3=3]="ISO8859_3",_[_.ISO8859_4=4]="ISO8859_4",_[_.ISO8859_5=5]="ISO8859_5",_[_.ISO8859_6=6]="ISO8859_6",_[_.ISO8859_7=7]="ISO8859_7",_[_.ISO8859_8=8]="ISO8859_8",_[_.ISO8859_9=9]="ISO8859_9",_[_.ISO8859_10=10]="ISO8859_10",_[_.ISO8859_11=11]="ISO8859_11",_[_.ISO8859_13=12]="ISO8859_13",_[_.ISO8859_14=13]="ISO8859_14",_[_.ISO8859_15=14]="ISO8859_15",_[_.ISO8859_16=15]="ISO8859_16",_[_.SJIS=16]="SJIS",_[_.Cp1250=17]="Cp1250",_[_.Cp1251=18]="Cp1251",_[_.Cp1252=19]="Cp1252",_[_.Cp1256=20]="Cp1256",_[_.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",_[_.UTF8=22]="UTF8",_[_.ASCII=23]="ASCII",_[_.Big5=24]="Big5",_[_.GB18030=25]="GB18030",_[_.EUC_KR=26]="EUC_KR"})(ue||(ue={}));class q{constructor(e,n,i,...l){this.valueIdentifier=e,this.name=i,typeof n=="number"?this.values=Int32Array.from([n]):this.values=n,this.otherEncodingNames=l,q.VALUE_IDENTIFIER_TO_ECI.set(e,this),q.NAME_TO_ECI.set(i,this);const u=this.values;for(let c=0,h=u.length;c!==h;c++){const m=u[c];q.VALUES_TO_ECI.set(m,this)}for(const c of l)q.NAME_TO_ECI.set(c,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new Q("incorect value");const n=q.VALUES_TO_ECI.get(e);if(n===void 0)throw new Q("incorect value");return n}static getCharacterSetECIByName(e){const n=q.NAME_TO_ECI.get(e);if(n===void 0)throw new Q("incorect value");return n}equals(e){if(!(e instanceof q))return!1;const n=e;return this.getName()===n.getName()}}q.VALUE_IDENTIFIER_TO_ECI=new Map,q.VALUES_TO_ECI=new Map,q.NAME_TO_ECI=new Map,q.Cp437=new q(ue.Cp437,Int32Array.from([0,2]),"Cp437"),q.ISO8859_1=new q(ue.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),q.ISO8859_2=new q(ue.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),q.ISO8859_3=new q(ue.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),q.ISO8859_4=new q(ue.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),q.ISO8859_5=new q(ue.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),q.ISO8859_6=new q(ue.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),q.ISO8859_7=new q(ue.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),q.ISO8859_8=new q(ue.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),q.ISO8859_9=new q(ue.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),q.ISO8859_10=new q(ue.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),q.ISO8859_11=new q(ue.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),q.ISO8859_13=new q(ue.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),q.ISO8859_14=new q(ue.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),q.ISO8859_15=new q(ue.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),q.ISO8859_16=new q(ue.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),q.SJIS=new q(ue.SJIS,20,"SJIS","Shift_JIS"),q.Cp1250=new q(ue.Cp1250,21,"Cp1250","windows-1250"),q.Cp1251=new q(ue.Cp1251,22,"Cp1251","windows-1251"),q.Cp1252=new q(ue.Cp1252,23,"Cp1252","windows-1252"),q.Cp1256=new q(ue.Cp1256,24,"Cp1256","windows-1256"),q.UnicodeBigUnmarked=new q(ue.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),q.UTF8=new q(ue.UTF8,26,"UTF8","UTF-8"),q.ASCII=new q(ue.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),q.Big5=new q(ue.Big5,28,"Big5"),q.GB18030=new q(ue.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),q.EUC_KR=new q(ue.EUC_KR,30,"EUC_KR","EUC-KR");class Re extends E{}Re.kind="UnsupportedOperationException";class je{static decode(e,n){const i=this.encodingName(n);return this.customDecoder?this.customDecoder(e,i):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(i)?this.decodeFallback(e,i):new TextDecoder(i).decode(e)}static shouldDecodeOnFallback(e){return!je.isBrowser()&&e==="ISO-8859-1"}static encode(e,n){const i=this.encodingName(n);return this.customEncoder?this.customEncoder(e,i):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof q?e:q.getCharacterSetECIByName(e)}static decodeFallback(e,n){const i=this.encodingCharacterSet(n);if(je.isDecodeFallbackSupported(i)){let l="";for(let u=0,c=e.length;u<c;u++){let h=e[u].toString(16);h.length<2&&(h="0"+h),l+="%"+h}return decodeURIComponent(l)}if(i.equals(q.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Re(`Encoding ${this.encodingName(n)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(q.UTF8)||e.equals(q.ISO8859_1)||e.equals(q.ASCII)}static encodeFallback(e){const i=btoa(unescape(encodeURIComponent(e))).split(""),l=[];for(let u=0;u<i.length;u++)l.push(i[u].charCodeAt(0));return new Uint8Array(l)}}class be{static castAsNonUtf8Char(e,n=null){const i=n?n.getName():this.ISO88591;return je.decode(new Uint8Array([e]),i)}static guessEncoding(e,n){if(n!=null&&n.get(ie.CHARACTER_SET)!==void 0)return n.get(ie.CHARACTER_SET).toString();const i=e.length;let l=!0,u=!0,c=!0,h=0,m=0,v=0,I=0,O=0,D=0,V=0,G=0,Y=0,$=0,se=0;const Ee=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let Se=0;Se<i&&(l||u||c);Se++){const xe=e[Se]&255;c&&(h>0?xe&128?h--:c=!1:xe&128&&(xe&64?(h++,xe&32?(h++,xe&16?(h++,xe&8?c=!1:I++):v++):m++):c=!1)),l&&(xe>127&&xe<160?l=!1:xe>159&&(xe<192||xe===215||xe===247)&&se++),u&&(O>0?xe<64||xe===127||xe>252?u=!1:O--:xe===128||xe===160||xe>239?u=!1:xe>160&&xe<224?(D++,G=0,V++,V>Y&&(Y=V)):xe>127?(O++,V=0,G++,G>$&&($=G)):(V=0,G=0))}return c&&h>0&&(c=!1),u&&O>0&&(u=!1),c&&(Ee||m+v+I>0)?be.UTF8:u&&(be.ASSUME_SHIFT_JIS||Y>=3||$>=3)?be.SHIFT_JIS:l&&u?Y===2&&D===2||se*10>=i?be.SHIFT_JIS:be.ISO88591:l?be.ISO88591:u?be.SHIFT_JIS:c?be.UTF8:be.PLATFORM_DEFAULT_ENCODING}static format(e,...n){let i=-1;function l(c,h,m,v,I,O){if(c==="%%")return"%";if(n[++i]===void 0)return;c=v?parseInt(v.substr(1)):void 0;let D=I?parseInt(I.substr(1)):void 0,V;switch(O){case"s":V=n[i];break;case"c":V=n[i][0];break;case"f":V=parseFloat(n[i]).toFixed(c);break;case"p":V=parseFloat(n[i]).toPrecision(c);break;case"e":V=parseFloat(n[i]).toExponential(c);break;case"x":V=parseInt(n[i]).toString(D||16);break;case"d":V=parseFloat(parseInt(n[i],D||10).toPrecision(c)).toFixed(0);break}V=typeof V=="object"?JSON.stringify(V):(+V).toString(D);let G=parseInt(m),Y=m&&m[0]+""=="0"?"0":" ";for(;V.length<G;)V=h!==void 0?V+Y:Y+V;return V}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(u,l)}static getBytes(e,n){return je.encode(e,n)}static getCharCode(e,n=0){return e.charCodeAt(n)}static getCharAt(e){return String.fromCharCode(e)}}be.SHIFT_JIS=q.SJIS.getName(),be.GB2312="GB2312",be.ISO88591=q.ISO8859_1.getName(),be.EUC_JP="EUC_JP",be.UTF8=q.UTF8.getName(),be.PLATFORM_DEFAULT_ENCODING=be.UTF8,be.ASSUME_SHIFT_JIS=!1;class Oe{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=be.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,n,i){for(let l=n;n<n+i;l++)this.append(e[l]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+1)}substring(e,n){return this.value.substring(e,n)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+n.length)}}class Le{constructor(e,n,i,l){if(this.width=e,this.height=n,this.rowSize=i,this.bits=l,n==null&&(n=e),this.height=n,e<1||n<1)throw new T("Both dimensions must be greater than 0");i==null&&(i=Math.floor((e+31)/32)),this.rowSize=i,l==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const n=e.length,i=e[0].length,l=new Le(i,n);for(let u=0;u<n;u++){const c=e[u];for(let h=0;h<i;h++)c[h]&&l.set(h,u)}return l}static parseFromString(e,n,i){if(e===null)throw new T("stringRepresentation cannot be null");const l=new Array(e.length);let u=0,c=0,h=-1,m=0,v=0;for(;v<e.length;)if(e.charAt(v)===`
`||e.charAt(v)==="\r"){if(u>c){if(h===-1)h=u-c;else if(u-c!==h)throw new T("row lengths do not match");c=u,m++}v++}else if(e.substring(v,v+n.length)===n)v+=n.length,l[u]=!0,u++;else if(e.substring(v,v+i.length)===i)v+=i.length,l[u]=!1,u++;else throw new T("illegal character encountered: "+e.substring(v));if(u>c){if(h===-1)h=u-c;else if(u-c!==h)throw new T("row lengths do not match");m++}const I=new Le(h,m);for(let O=0;O<u;O++)l[O]&&I.set(Math.floor(O%h),Math.floor(O/h));return I}get(e,n){const i=n*this.rowSize+Math.floor(e/32);return(this.bits[i]>>>(e&31)&1)!==0}set(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]|=1<<(e&31)&4294967295}unset(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]&=~(1<<(e&31)&4294967295)}flip(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new T("input matrix dimensions do not match");const n=new ee(Math.floor(this.width/32)+1),i=this.rowSize,l=this.bits;for(let u=0,c=this.height;u<c;u++){const h=u*i,m=e.getRow(u,n).getBitArray();for(let v=0;v<i;v++)l[h+v]^=m[v]}}clear(){const e=this.bits,n=e.length;for(let i=0;i<n;i++)e[i]=0}setRegion(e,n,i,l){if(n<0||e<0)throw new T("Left and top must be nonnegative");if(l<1||i<1)throw new T("Height and width must be at least 1");const u=e+i,c=n+l;if(c>this.height||u>this.width)throw new T("The region must fit inside the matrix");const h=this.rowSize,m=this.bits;for(let v=n;v<c;v++){const I=v*h;for(let O=e;O<u;O++)m[I+Math.floor(O/32)]|=1<<(O&31)&4294967295}}getRow(e,n){n==null||n.getSize()<this.width?n=new ee(this.width):n.clear();const i=this.rowSize,l=this.bits,u=e*i;for(let c=0;c<i;c++)n.setBulk(c*32,l[u+c]);return n}setRow(e,n){j.arraycopy(n.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),n=this.getHeight();let i=new ee(e),l=new ee(e);for(let u=0,c=Math.floor((n+1)/2);u<c;u++)i=this.getRow(u,i),l=this.getRow(n-1-u,l),i.reverse(),l.reverse(),this.setRow(u,l),this.setRow(n-1-u,i)}getEnclosingRectangle(){const e=this.width,n=this.height,i=this.rowSize,l=this.bits;let u=e,c=n,h=-1,m=-1;for(let v=0;v<n;v++)for(let I=0;I<i;I++){const O=l[v*i+I];if(O!==0){if(v<c&&(c=v),v>m&&(m=v),I*32<u){let D=0;for(;!(O<<31-D&4294967295);)D++;I*32+D<u&&(u=I*32+D)}if(I*32+31>h){let D=31;for(;!(O>>>D);)D--;I*32+D>h&&(h=I*32+D)}}}return h<u||m<c?null:Int32Array.from([u,c,h-u+1,m-c+1])}getTopLeftOnBit(){const e=this.rowSize,n=this.bits;let i=0;for(;i<n.length&&n[i]===0;)i++;if(i===n.length)return null;const l=i/e;let u=i%e*32;const c=n[i];let h=0;for(;!(c<<31-h&4294967295);)h++;return u+=h,Int32Array.from([u,l])}getBottomRightOnBit(){const e=this.rowSize,n=this.bits;let i=n.length-1;for(;i>=0&&n[i]===0;)i--;if(i<0)return null;const l=Math.floor(i/e);let u=Math.floor(i%e)*32;const c=n[i];let h=31;for(;!(c>>>h);)h--;return u+=h,Int32Array.from([u,l])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof Le))return!1;const n=e;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&H.equals(this.bits,n.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+H.hashCode(this.bits),e}toString(e="X ",n="  ",i=`
`){return this.buildToString(e,n,i)}buildToString(e,n,i){let l=new Oe;for(let u=0,c=this.height;u<c;u++){for(let h=0,m=this.width;h<m;h++)l.append(this.get(h,u)?e:n);l.append(i)}return l.toString()}clone(){return new Le(this.width,this.height,this.rowSize,this.bits.slice())}}class J extends E{static getNotFoundInstance(){return new J}}J.kind="NotFoundException";class we extends L{constructor(e){super(e),this.luminances=we.EMPTY,this.buckets=new Int32Array(we.LUMINANCE_BUCKETS)}getBlackRow(e,n){const i=this.getLuminanceSource(),l=i.getWidth();n==null||n.getSize()<l?n=new ee(l):n.clear(),this.initArrays(l);const u=i.getRow(e,this.luminances),c=this.buckets;for(let m=0;m<l;m++)c[(u[m]&255)>>we.LUMINANCE_SHIFT]++;const h=we.estimateBlackPoint(c);if(l<3)for(let m=0;m<l;m++)(u[m]&255)<h&&n.set(m);else{let m=u[0]&255,v=u[1]&255;for(let I=1;I<l-1;I++){const O=u[I+1]&255;(v*4-m-O)/2<h&&n.set(I),m=v,v=O}}return n}getBlackMatrix(){const e=this.getLuminanceSource(),n=e.getWidth(),i=e.getHeight(),l=new Le(n,i);this.initArrays(n);const u=this.buckets;for(let m=1;m<5;m++){const v=Math.floor(i*m/5),I=e.getRow(v,this.luminances),O=Math.floor(n*4/5);for(let D=Math.floor(n/5);D<O;D++){const V=I[D]&255;u[V>>we.LUMINANCE_SHIFT]++}}const c=we.estimateBlackPoint(u),h=e.getMatrix();for(let m=0;m<i;m++){const v=m*n;for(let I=0;I<n;I++)(h[v+I]&255)<c&&l.set(I,m)}return l}createBinarizer(e){return new we(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const n=this.buckets;for(let i=0;i<we.LUMINANCE_BUCKETS;i++)n[i]=0}static estimateBlackPoint(e){const n=e.length;let i=0,l=0,u=0;for(let I=0;I<n;I++)e[I]>u&&(l=I,u=e[I]),e[I]>i&&(i=e[I]);let c=0,h=0;for(let I=0;I<n;I++){const O=I-l,D=e[I]*O*O;D>h&&(c=I,h=D)}if(l>c){const I=l;l=c,c=I}if(c-l<=n/16)throw new J;let m=c-1,v=-1;for(let I=c-1;I>l;I--){const O=I-l,D=O*O*(c-I)*(i-e[I]);D>v&&(m=I,v=D)}return m<<we.LUMINANCE_SHIFT}}we.LUMINANCE_BITS=5,we.LUMINANCE_SHIFT=8-we.LUMINANCE_BITS,we.LUMINANCE_BUCKETS=1<<we.LUMINANCE_BITS,we.EMPTY=Uint8ClampedArray.from([0]);class oe extends we{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),n=e.getWidth(),i=e.getHeight();if(n>=oe.MINIMUM_DIMENSION&&i>=oe.MINIMUM_DIMENSION){const l=e.getMatrix();let u=n>>oe.BLOCK_SIZE_POWER;n&oe.BLOCK_SIZE_MASK&&u++;let c=i>>oe.BLOCK_SIZE_POWER;i&oe.BLOCK_SIZE_MASK&&c++;const h=oe.calculateBlackPoints(l,u,c,n,i),m=new Le(n,i);oe.calculateThresholdForBlock(l,u,c,n,i,h,m),this.matrix=m}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new oe(e)}static calculateThresholdForBlock(e,n,i,l,u,c,h){const m=u-oe.BLOCK_SIZE,v=l-oe.BLOCK_SIZE;for(let I=0;I<i;I++){let O=I<<oe.BLOCK_SIZE_POWER;O>m&&(O=m);const D=oe.cap(I,2,i-3);for(let V=0;V<n;V++){let G=V<<oe.BLOCK_SIZE_POWER;G>v&&(G=v);const Y=oe.cap(V,2,n-3);let $=0;for(let Ee=-2;Ee<=2;Ee++){const Se=c[D+Ee];$+=Se[Y-2]+Se[Y-1]+Se[Y]+Se[Y+1]+Se[Y+2]}const se=$/25;oe.thresholdBlock(e,G,O,se,l,h)}}}static cap(e,n,i){return e<n?n:e>i?i:e}static thresholdBlock(e,n,i,l,u,c){for(let h=0,m=i*u+n;h<oe.BLOCK_SIZE;h++,m+=u)for(let v=0;v<oe.BLOCK_SIZE;v++)(e[m+v]&255)<=l&&c.set(n+v,i+h)}static calculateBlackPoints(e,n,i,l,u){const c=u-oe.BLOCK_SIZE,h=l-oe.BLOCK_SIZE,m=new Array(i);for(let v=0;v<i;v++){m[v]=new Int32Array(n);let I=v<<oe.BLOCK_SIZE_POWER;I>c&&(I=c);for(let O=0;O<n;O++){let D=O<<oe.BLOCK_SIZE_POWER;D>h&&(D=h);let V=0,G=255,Y=0;for(let se=0,Ee=I*l+D;se<oe.BLOCK_SIZE;se++,Ee+=l){for(let Se=0;Se<oe.BLOCK_SIZE;Se++){const xe=e[Ee+Se]&255;V+=xe,xe<G&&(G=xe),xe>Y&&(Y=xe)}if(Y-G>oe.MIN_DYNAMIC_RANGE)for(se++,Ee+=l;se<oe.BLOCK_SIZE;se++,Ee+=l)for(let Se=0;Se<oe.BLOCK_SIZE;Se++)V+=e[Ee+Se]&255}let $=V>>oe.BLOCK_SIZE_POWER*2;if(Y-G<=oe.MIN_DYNAMIC_RANGE&&($=G/2,v>0&&O>0)){const se=(m[v-1][O]+2*m[v][O-1]+m[v-1][O-1])/4;G<se&&($=se)}m[v][O]=$}}return m}}oe.BLOCK_SIZE_POWER=3,oe.BLOCK_SIZE=1<<oe.BLOCK_SIZE_POWER,oe.BLOCK_SIZE_MASK=oe.BLOCK_SIZE-1,oe.MINIMUM_DIMENSION=oe.BLOCK_SIZE*5,oe.MIN_DYNAMIC_RANGE=24;class fe{constructor(e,n){this.width=e,this.height=n}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,n,i,l){throw new Re("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Re("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Re("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let n=new Oe;for(let i=0;i<this.height;i++){const l=this.getRow(i,e);for(let u=0;u<this.width;u++){const c=l[u]&255;let h;c<64?h="#":c<128?h="+":c<192?h=".":h=" ",n.append(h)}n.append(`
`)}return n.toString()}}class pe extends fe{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,n){const i=this.delegate.getRow(e,n),l=this.getWidth();for(let u=0;u<l;u++)i[u]=255-(i[u]&255);return i}getMatrix(){const e=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n);for(let l=0;l<n;l++)i[l]=255-(e[l]&255);return i}isCropSupported(){return this.delegate.isCropSupported()}crop(e,n,i,l){return new pe(this.delegate.crop(e,n,i,l))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new pe(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new pe(this.delegate.rotateCounterClockwise45())}}class ge extends fe{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=ge.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const n=e.getContext("2d").getImageData(0,0,e.width,e.height);return ge.toGrayscaleBuffer(n.data,e.width,e.height)}static toGrayscaleBuffer(e,n,i){const l=new Uint8ClampedArray(n*i);for(let u=0,c=0,h=e.length;u<h;u+=4,c++){let m;if(e[u+3]===0)m=255;else{const I=e[u],O=e[u+1],D=e[u+2];m=306*I+601*O+117*D+512>>10}l[c]=m}return l}getRow(e,n){if(e<0||e>=this.getHeight())throw new T("Requested row is outside the image: "+e);const i=this.getWidth(),l=e*i;return n===null?n=this.buffer.slice(l,l+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(l,l+i))),n}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,n,i,l){return super.crop(e,n,i,l),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const n=this.getTempCanvasElement(),i=n.getContext("2d"),l=e*ge.DEGREE_TO_RADIANS,u=this.canvas.width,c=this.canvas.height,h=Math.ceil(Math.abs(Math.cos(l))*u+Math.abs(Math.sin(l))*c),m=Math.ceil(Math.abs(Math.sin(l))*u+Math.abs(Math.cos(l))*c);return n.width=h,n.height=m,i.translate(h/2,m/2),i.rotate(l),i.drawImage(this.canvas,u/-2,c/-2),this.buffer=ge.makeBufferFromCanvasImageData(n),this}invert(){return new pe(this)}}ge.DEGREE_TO_RADIANS=Math.PI/180;class Z{constructor(e,n,i){this.deviceId=e,this.label=n,this.kind="videoinput",this.groupId=i||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var de=(globalThis||Ql||self||window||void 0)&&(globalThis||Ql||self||window||void 0).__awaiter||function(_,e,n,i){function l(u){return u instanceof n?u:new n(function(c){c(u)})}return new(n||(n=Promise))(function(u,c){function h(I){try{v(i.next(I))}catch(O){c(O)}}function m(I){try{v(i.throw(I))}catch(O){c(O)}}function v(I){I.done?u(I.value):l(I.value).then(h,m)}v((i=i.apply(_,e||[])).next())})};class We{constructor(e,n=500,i){this.reader=e,this.timeBetweenScansMillis=n,this._hints=i,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return de(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),n=[];for(const i of e){const l=i.kind==="video"?"videoinput":i.kind;if(l!=="videoinput")continue;const u=i.deviceId||i.id,c=i.label||`Video device ${n.length+1}`,h=i.groupId,m={deviceId:u,label:c,kind:l,groupId:h};n.push(m)}return n})}getVideoInputDevices(){return de(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(n=>new Z(n.deviceId,n.label))})}findDeviceById(e){return de(this,void 0,void 0,function*(){const n=yield this.listVideoInputDevices();return n?n.find(i=>i.deviceId===e):null})}decodeFromInputVideoDevice(e,n){return de(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,n)})}decodeOnceFromVideoDevice(e,n){return de(this,void 0,void 0,function*(){this.reset();let i;e?i={deviceId:{exact:e}}:i={facingMode:"environment"};const l={video:i};return yield this.decodeOnceFromConstraints(l,n)})}decodeOnceFromConstraints(e,n){return de(this,void 0,void 0,function*(){const i=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(i,n)})}decodeOnceFromStream(e,n){return de(this,void 0,void 0,function*(){this.reset();const i=yield this.attachStreamToVideo(e,n);return yield this.decodeOnce(i)})}decodeFromInputVideoDeviceContinuously(e,n,i){return de(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,n,i)})}decodeFromVideoDevice(e,n,i){return de(this,void 0,void 0,function*(){let l;e?l={deviceId:{exact:e}}:l={facingMode:"environment"};const u={video:l};return yield this.decodeFromConstraints(u,n,i)})}decodeFromConstraints(e,n,i){return de(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(l,n,i)})}decodeFromStream(e,n,i){return de(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(e,n);return yield this.decodeContinuously(l,i)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,n){return de(this,void 0,void 0,function*(){const i=this.prepareVideoElement(n);return this.addVideoSource(i,e),this.videoElement=i,this.stream=e,yield this.playVideoOnLoadAsync(i),i})}playVideoOnLoadAsync(e){return new Promise((n,i)=>this.playVideoOnLoad(e,()=>n()))}playVideoOnLoad(e,n){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",n),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return de(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,n){const i=document.getElementById(e);if(!i)throw new S(`element with id '${e}' not found`);if(i.nodeName.toLowerCase()!==n.toLowerCase())throw new S(`element with id '${e}' must be an ${n} element`);return i}decodeFromImage(e,n){if(!e&&!n)throw new S("either imageElement with a src set or an url must be provided");return n&&!e?this.decodeFromImageUrl(n):this.decodeFromImageElement(e)}decodeFromVideo(e,n){if(!e&&!n)throw new S("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,n,i){if(e===void 0&&n===void 0)throw new S("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrlContinuously(n,i):this.decodeFromVideoElementContinuously(e,i)}decodeFromImageElement(e){if(!e)throw new S("An image element must be provided.");this.reset();const n=this.prepareImageElement(e);this.imageElement=n;let i;return this.isImageLoaded(n)?i=this.decodeOnce(n,!1,!0):i=this._decodeOnLoadImage(n),i}decodeFromVideoElement(e){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(n)}decodeFromVideoElementContinuously(e,n){const i=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(i,n)}_decodeFromVideoElementSetup(e){if(!e)throw new S("A video element must be provided.");this.reset();const n=this.prepareVideoElement(e);return this.videoElement=n,n}decodeFromImageUrl(e){if(!e)throw new S("An URL must be provided.");this.reset();const n=this.prepareImageElement();this.imageElement=n;const i=this._decodeOnLoadImage(n);return n.src=e,i}decodeFromVideoUrl(e){if(!e)throw new S("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),i=this.decodeFromVideoElement(n);return n.src=e,i}decodeFromVideoUrlContinuously(e,n){if(!e)throw new S("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),l=this.decodeFromVideoElementContinuously(i,n);return i.src=e,l}_decodeOnLoadImage(e){return new Promise((n,i)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(n,i),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return de(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,n){return de(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,n)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let n;return typeof e>"u"&&(n=document.createElement("img"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(n=e),n}prepareVideoElement(e){let n;return!e&&typeof document<"u"&&(n=document.createElement("video"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(n=e),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n}decodeOnce(e,n=!0,i=!0){this._stopAsyncDecode=!1;const l=(u,c)=>{if(this._stopAsyncDecode){c(new J("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const h=this.decode(e);u(h)}catch(h){const m=n&&h instanceof J,I=(h instanceof k||h instanceof Q)&&i;if(m||I)return setTimeout(l,this._timeBetweenDecodingAttempts,u,c);c(h)}};return new Promise((u,c)=>l(u,c))}decodeContinuously(e,n){this._stopContinuousDecode=!1;const i=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const l=this.decode(e);n(l,null),setTimeout(i,this.timeBetweenScansMillis)}catch(l){n(null,l);const u=l instanceof k||l instanceof Q,c=l instanceof J;(u||c)&&setTimeout(i,this._timeBetweenDecodingAttempts)}};i()}decode(e){const n=this.createBinaryBitmap(e);return this.decodeBitmap(n)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,n,i){n||(n={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),i||(i=this.captureCanvasContext),i.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}drawImageOnCanvas(e,n,i=this.captureCanvasContext){n||(n={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),i||(i=this.captureCanvasContext),i.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const n=this.getCaptureCanvas(e),i=new ge(n),l=new oe(i);return new R(l)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const i=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=i}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const n=this.createCaptureCanvas(e);this.captureCanvas=n}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const n=document.createElement("canvas");let i,l;return typeof e<"u"&&(e instanceof HTMLVideoElement?(i=e.videoWidth,l=e.videoHeight):e instanceof HTMLImageElement&&(i=e.naturalWidth||e.width,l=e.naturalHeight||e.height)),n.style.width=i+"px",n.style.height=l+"px",n.width=i,n.height=l,n}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,n){try{e.srcObject=n}catch{e.src=URL.createObjectURL(n)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class Ue{constructor(e,n,i=n==null?0:8*n.length,l,u,c=j.currentTimeMillis()){this.text=e,this.rawBytes=n,this.numBits=i,this.resultPoints=l,this.format=u,this.timestamp=c,this.text=e,this.rawBytes=n,i==null?this.numBits=n==null?0:8*n.length:this.numBits=i,this.resultPoints=l,this.format=u,this.resultMetadata=null,c==null?this.timestamp=j.currentTimeMillis():this.timestamp=c}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,n){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,n)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const n=this.resultPoints;if(n===null)this.resultPoints=e;else if(e!==null&&e.length>0){const i=new Array(n.length+e.length);j.arraycopy(n,0,i,0,n.length),j.arraycopy(e,0,i,n.length,e.length),this.resultPoints=i}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ut;(function(_){_[_.AZTEC=0]="AZTEC",_[_.CODABAR=1]="CODABAR",_[_.CODE_39=2]="CODE_39",_[_.CODE_93=3]="CODE_93",_[_.CODE_128=4]="CODE_128",_[_.DATA_MATRIX=5]="DATA_MATRIX",_[_.EAN_8=6]="EAN_8",_[_.EAN_13=7]="EAN_13",_[_.ITF=8]="ITF",_[_.MAXICODE=9]="MAXICODE",_[_.PDF_417=10]="PDF_417",_[_.QR_CODE=11]="QR_CODE",_[_.RSS_14=12]="RSS_14",_[_.RSS_EXPANDED=13]="RSS_EXPANDED",_[_.UPC_A=14]="UPC_A",_[_.UPC_E=15]="UPC_E",_[_.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ut||(ut={}));var ve=ut,et;(function(_){_[_.OTHER=0]="OTHER",_[_.ORIENTATION=1]="ORIENTATION",_[_.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",_[_.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",_[_.ISSUE_NUMBER=4]="ISSUE_NUMBER",_[_.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",_[_.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",_[_.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",_[_.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",_[_.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",_[_.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(et||(et={}));var Te=et;class Ne{constructor(e,n,i,l,u=-1,c=-1){this.rawBytes=e,this.text=n,this.byteSegments=i,this.ecLevel=l,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=c,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class at{exp(e){return this.expTable[e]}log(e){if(e===0)throw new T;return this.logTable[e]}static addOrSubtract(e,n){return e^n}}class Je{constructor(e,n){if(n.length===0)throw new T;this.field=e;const i=n.length;if(i>1&&n[0]===0){let l=1;for(;l<i&&n[l]===0;)l++;l===i?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(i-l),j.arraycopy(n,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const n=this.coefficients;let i;if(e===1){i=0;for(let c=0,h=n.length;c!==h;c++){const m=n[c];i=at.addOrSubtract(i,m)}return i}i=n[0];const l=n.length,u=this.field;for(let c=1;c<l;c++)i=at.addOrSubtract(u.multiply(e,i),n[c]);return i}addOrSubtract(e){if(!this.field.equals(e.field))throw new T("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,i=e.coefficients;if(n.length>i.length){const c=n;n=i,i=c}let l=new Int32Array(i.length);const u=i.length-n.length;j.arraycopy(i,0,l,0,u);for(let c=u;c<i.length;c++)l[c]=at.addOrSubtract(n[c-u],i[c]);return new Je(this.field,l)}multiply(e){if(!this.field.equals(e.field))throw new T("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const n=this.coefficients,i=n.length,l=e.coefficients,u=l.length,c=new Int32Array(i+u-1),h=this.field;for(let m=0;m<i;m++){const v=n[m];for(let I=0;I<u;I++)c[m+I]=at.addOrSubtract(c[m+I],h.multiply(v,l[I]))}return new Je(h,c)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const n=this.coefficients.length,i=this.field,l=new Int32Array(n),u=this.coefficients;for(let c=0;c<n;c++)l[c]=i.multiply(u[c],e);return new Je(i,l)}multiplyByMonomial(e,n){if(e<0)throw new T;if(n===0)return this.field.getZero();const i=this.coefficients,l=i.length,u=new Int32Array(l+e),c=this.field;for(let h=0;h<l;h++)u[h]=c.multiply(i[h],n);return new Je(c,u)}divide(e){if(!this.field.equals(e.field))throw new T("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new T("Divide by 0");const n=this.field;let i=n.getZero(),l=this;const u=e.getCoefficient(e.getDegree()),c=n.inverse(u);for(;l.getDegree()>=e.getDegree()&&!l.isZero();){const h=l.getDegree()-e.getDegree(),m=n.multiply(l.getCoefficient(l.getDegree()),c),v=e.multiplyByMonomial(h,m),I=n.buildMonomial(h,m);i=i.addOrSubtract(I),l=l.addOrSubtract(v)}return[i,l]}toString(){let e="";for(let n=this.getDegree();n>=0;n--){let i=this.getCoefficient(n);if(i!==0){if(i<0?(e+=" - ",i=-i):e.length>0&&(e+=" + "),n===0||i!==1){const l=this.field.log(i);l===0?e+="1":l===1?e+="a":(e+="a^",e+=l)}n!==0&&(n===1?e+="x":(e+="x^",e+=n))}}return e}}class ct extends E{}ct.kind="ArithmeticException";class Ve extends at{constructor(e,n,i){super(),this.primitive=e,this.size=n,this.generatorBase=i;const l=new Int32Array(n);let u=1;for(let h=0;h<n;h++)l[h]=u,u*=2,u>=n&&(u^=e,u&=n-1);this.expTable=l;const c=new Int32Array(n);for(let h=0;h<n-1;h++)c[l[h]]=h;this.logTable=c,this.zero=new Je(this,Int32Array.from([0])),this.one=new Je(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new T;if(n===0)return this.zero;const i=new Int32Array(e+1);return i[0]=n,new Je(this,i)}inverse(e){if(e===0)throw new ct;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+W.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}Ve.AZTEC_DATA_12=new Ve(4201,4096,1),Ve.AZTEC_DATA_10=new Ve(1033,1024,1),Ve.AZTEC_DATA_6=new Ve(67,64,1),Ve.AZTEC_PARAM=new Ve(19,16,1),Ve.QR_CODE_FIELD_256=new Ve(285,256,0),Ve.DATA_MATRIX_FIELD_256=new Ve(301,256,1),Ve.AZTEC_DATA_8=Ve.DATA_MATRIX_FIELD_256,Ve.MAXICODE_FIELD_64=Ve.AZTEC_DATA_6;class qt extends E{}qt.kind="ReedSolomonException";class Ot extends E{}Ot.kind="IllegalStateException";class En{constructor(e){this.field=e}decode(e,n){const i=this.field,l=new Je(i,e),u=new Int32Array(n);let c=!0;for(let V=0;V<n;V++){const G=l.evaluateAt(i.exp(V+i.getGeneratorBase()));u[u.length-1-V]=G,G!==0&&(c=!1)}if(c)return;const h=new Je(i,u),m=this.runEuclideanAlgorithm(i.buildMonomial(n,1),h,n),v=m[0],I=m[1],O=this.findErrorLocations(v),D=this.findErrorMagnitudes(I,O);for(let V=0;V<O.length;V++){const G=e.length-1-i.log(O[V]);if(G<0)throw new qt("Bad error location");e[G]=Ve.addOrSubtract(e[G],D[V])}}runEuclideanAlgorithm(e,n,i){if(e.getDegree()<n.getDegree()){const V=e;e=n,n=V}const l=this.field;let u=e,c=n,h=l.getZero(),m=l.getOne();for(;c.getDegree()>=(i/2|0);){let V=u,G=h;if(u=c,h=m,u.isZero())throw new qt("r_{i-1} was zero");c=V;let Y=l.getZero();const $=u.getCoefficient(u.getDegree()),se=l.inverse($);for(;c.getDegree()>=u.getDegree()&&!c.isZero();){const Ee=c.getDegree()-u.getDegree(),Se=l.multiply(c.getCoefficient(c.getDegree()),se);Y=Y.addOrSubtract(l.buildMonomial(Ee,Se)),c=c.addOrSubtract(u.multiplyByMonomial(Ee,Se))}if(m=Y.multiply(h).addOrSubtract(G),c.getDegree()>=u.getDegree())throw new Ot("Division algorithm failed to reduce polynomial?")}const v=m.getCoefficient(0);if(v===0)throw new qt("sigmaTilde(0) was zero");const I=l.inverse(v),O=m.multiplyScalar(I),D=c.multiplyScalar(I);return[O,D]}findErrorLocations(e){const n=e.getDegree();if(n===1)return Int32Array.from([e.getCoefficient(1)]);const i=new Int32Array(n);let l=0;const u=this.field;for(let c=1;c<u.getSize()&&l<n;c++)e.evaluateAt(c)===0&&(i[l]=u.inverse(c),l++);if(l!==n)throw new qt("Error locator degree does not match number of roots");return i}findErrorMagnitudes(e,n){const i=n.length,l=new Int32Array(i),u=this.field;for(let c=0;c<i;c++){const h=u.inverse(n[c]);let m=1;for(let v=0;v<i;v++)if(c!==v){const I=u.multiply(n[v],h),O=I&1?I&-2:I|1;m=u.multiply(m,O)}l[c]=u.multiply(e.evaluateAt(h),u.inverse(m)),u.getGeneratorBase()!==0&&(l[c]=u.multiply(l[c],h))}return l}}var Vt;(function(_){_[_.UPPER=0]="UPPER",_[_.LOWER=1]="LOWER",_[_.MIXED=2]="MIXED",_[_.DIGIT=3]="DIGIT",_[_.PUNCT=4]="PUNCT",_[_.BINARY=5]="BINARY"})(Vt||(Vt={}));class St{decode(e){this.ddata=e;let n=e.getBits(),i=this.extractBits(n),l=this.correctBits(i),u=St.convertBoolArrayToByteArray(l),c=St.getEncodedData(l),h=new Ne(u,c,null,null);return h.setNumBits(l.length),h}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let n=e.length,i=Vt.UPPER,l=Vt.UPPER,u="",c=0;for(;c<n;)if(l===Vt.BINARY){if(n-c<5)break;let h=St.readCode(e,c,5);if(c+=5,h===0){if(n-c<11)break;h=St.readCode(e,c,11)+31,c+=11}for(let m=0;m<h;m++){if(n-c<8){c=n;break}const v=St.readCode(e,c,8);u+=be.castAsNonUtf8Char(v),c+=8}l=i}else{let h=l===Vt.DIGIT?4:5;if(n-c<h)break;let m=St.readCode(e,c,h);c+=h;let v=St.getCharacter(l,m);v.startsWith("CTRL_")?(i=l,l=St.getTable(v.charAt(5)),v.charAt(6)==="L"&&(i=l)):(u+=v,l=i)}return u}static getTable(e){switch(e){case"L":return Vt.LOWER;case"P":return Vt.PUNCT;case"M":return Vt.MIXED;case"D":return Vt.DIGIT;case"B":return Vt.BINARY;case"U":default:return Vt.UPPER}}static getCharacter(e,n){switch(e){case Vt.UPPER:return St.UPPER_TABLE[n];case Vt.LOWER:return St.LOWER_TABLE[n];case Vt.MIXED:return St.MIXED_TABLE[n];case Vt.PUNCT:return St.PUNCT_TABLE[n];case Vt.DIGIT:return St.DIGIT_TABLE[n];default:throw new Ot("Bad table")}}correctBits(e){let n,i;this.ddata.getNbLayers()<=2?(i=6,n=Ve.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(i=8,n=Ve.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(i=10,n=Ve.AZTEC_DATA_10):(i=12,n=Ve.AZTEC_DATA_12);let l=this.ddata.getNbDatablocks(),u=e.length/i;if(u<l)throw new Q;let c=e.length%i,h=new Int32Array(u);for(let D=0;D<u;D++,c+=i)h[D]=St.readCode(e,c,i);try{new En(n).decode(h,u-l)}catch(D){throw new Q(D)}let m=(1<<i)-1,v=0;for(let D=0;D<l;D++){let V=h[D];if(V===0||V===m)throw new Q;(V===1||V===m-1)&&v++}let I=new Array(l*i-v),O=0;for(let D=0;D<l;D++){let V=h[D];if(V===1||V===m-1)I.fill(V>1,O,O+i-1),O+=i-1;else for(let G=i-1;G>=0;--G)I[O++]=(V&1<<G)!==0}return I}extractBits(e){let n=this.ddata.isCompact(),i=this.ddata.getNbLayers(),l=(n?11:14)+i*4,u=new Int32Array(l),c=new Array(this.totalBitsInLayer(i,n));if(n)for(let h=0;h<u.length;h++)u[h]=h;else{let h=l+1+2*W.truncDivision(W.truncDivision(l,2)-1,15),m=l/2,v=W.truncDivision(h,2);for(let I=0;I<m;I++){let O=I+W.truncDivision(I,15);u[m-I-1]=v-O-1,u[m+I]=v+O+1}}for(let h=0,m=0;h<i;h++){let v=(i-h)*4+(n?9:12),I=h*2,O=l-1-I;for(let D=0;D<v;D++){let V=D*2;for(let G=0;G<2;G++)c[m+V+G]=e.get(u[I+G],u[I+D]),c[m+2*v+V+G]=e.get(u[I+D],u[O-G]),c[m+4*v+V+G]=e.get(u[O-G],u[O-D]),c[m+6*v+V+G]=e.get(u[O-D],u[I+G])}m+=v*8}return c}static readCode(e,n,i){let l=0;for(let u=n;u<n+i;u++)l<<=1,e[u]&&(l|=1);return l}static readByte(e,n){let i=e.length-n;return i>=8?St.readCode(e,n,8):St.readCode(e,n,i)<<8-i}static convertBoolArrayToByteArray(e){let n=new Uint8Array((e.length+7)/8);for(let i=0;i<n.length;i++)n[i]=St.readByte(e,8*i);return n}totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}St.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],St.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],St.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],St.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],St.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ft{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,n,i,l){const u=e-i,c=n-l;return Math.sqrt(u*u+c*c)}static sum(e){let n=0;for(let i=0,l=e.length;i!==l;i++){const u=e[i];n+=u}return n}}class tn{static floatToIntBits(e){return e}}tn.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Pe{constructor(e,n){this.x=e,this.y=n}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof Pe){const n=e;return this.x===n.x&&this.y===n.y}return!1}hashCode(){return 31*tn.floatToIntBits(this.x)+tn.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const n=this.distance(e[0],e[1]),i=this.distance(e[1],e[2]),l=this.distance(e[0],e[2]);let u,c,h;if(i>=n&&i>=l?(c=e[0],u=e[1],h=e[2]):l>=i&&l>=n?(c=e[1],u=e[0],h=e[2]):(c=e[2],u=e[0],h=e[1]),this.crossProductZ(u,c,h)<0){const m=u;u=h,h=m}e[0]=u,e[1]=c,e[2]=h}static distance(e,n){return ft.distance(e.x,e.y,n.x,n.y)}static crossProductZ(e,n,i){const l=n.x,u=n.y;return(i.x-l)*(e.y-u)-(i.y-u)*(e.x-l)}}class gn{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class Mt extends gn{constructor(e,n,i,l,u){super(e,n),this.compact=i,this.nbDatablocks=l,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Be{constructor(e,n,i,l){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),n==null&&(n=Be.INIT_SIZE),i==null&&(i=e.getWidth()/2|0),l==null&&(l=e.getHeight()/2|0);const u=n/2|0;if(this.leftInit=i-u,this.rightInit=i+u,this.upInit=l-u,this.downInit=l+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new J}detect(){let e=this.leftInit,n=this.rightInit,i=this.upInit,l=this.downInit,u=!1,c=!0,h=!1,m=!1,v=!1,I=!1,O=!1;const D=this.width,V=this.height;for(;c;){c=!1;let G=!0;for(;(G||!m)&&n<D;)G=this.containsBlackPoint(i,l,n,!1),G?(n++,c=!0,m=!0):m||n++;if(n>=D){u=!0;break}let Y=!0;for(;(Y||!v)&&l<V;)Y=this.containsBlackPoint(e,n,l,!0),Y?(l++,c=!0,v=!0):v||l++;if(l>=V){u=!0;break}let $=!0;for(;($||!I)&&e>=0;)$=this.containsBlackPoint(i,l,e,!1),$?(e--,c=!0,I=!0):I||e--;if(e<0){u=!0;break}let se=!0;for(;(se||!O)&&i>=0;)se=this.containsBlackPoint(e,n,i,!0),se?(i--,c=!0,O=!0):O||i--;if(i<0){u=!0;break}c&&(h=!0)}if(!u&&h){const G=n-e;let Y=null;for(let Se=1;Y===null&&Se<G;Se++)Y=this.getBlackPointOnSegment(e,l-Se,e+Se,l);if(Y==null)throw new J;let $=null;for(let Se=1;$===null&&Se<G;Se++)$=this.getBlackPointOnSegment(e,i+Se,e+Se,i);if($==null)throw new J;let se=null;for(let Se=1;se===null&&Se<G;Se++)se=this.getBlackPointOnSegment(n,i+Se,n-Se,i);if(se==null)throw new J;let Ee=null;for(let Se=1;Ee===null&&Se<G;Se++)Ee=this.getBlackPointOnSegment(n,l-Se,n-Se,l);if(Ee==null)throw new J;return this.centerEdges(Ee,Y,se,$)}else throw new J}getBlackPointOnSegment(e,n,i,l){const u=ft.round(ft.distance(e,n,i,l)),c=(i-e)/u,h=(l-n)/u,m=this.image;for(let v=0;v<u;v++){const I=ft.round(e+v*c),O=ft.round(n+v*h);if(m.get(I,O))return new Pe(I,O)}return null}centerEdges(e,n,i,l){const u=e.getX(),c=e.getY(),h=n.getX(),m=n.getY(),v=i.getX(),I=i.getY(),O=l.getX(),D=l.getY(),V=Be.CORR;return u<this.width/2?[new Pe(O-V,D+V),new Pe(h+V,m+V),new Pe(v-V,I-V),new Pe(u+V,c-V)]:[new Pe(O+V,D+V),new Pe(h+V,m-V),new Pe(v-V,I+V),new Pe(u-V,c-V)]}containsBlackPoint(e,n,i,l){const u=this.image;if(l){for(let c=e;c<=n;c++)if(u.get(c,i))return!0}else for(let c=e;c<=n;c++)if(u.get(i,c))return!0;return!1}}Be.INIT_SIZE=10,Be.CORR=1;class pt{static checkAndNudgePoints(e,n){const i=e.getWidth(),l=e.getHeight();let u=!0;for(let c=0;c<n.length&&u;c+=2){const h=Math.floor(n[c]),m=Math.floor(n[c+1]);if(h<-1||h>i||m<-1||m>l)throw new J;u=!1,h===-1?(n[c]=0,u=!0):h===i&&(n[c]=i-1,u=!0),m===-1?(n[c+1]=0,u=!0):m===l&&(n[c+1]=l-1,u=!0)}u=!0;for(let c=n.length-2;c>=0&&u;c-=2){const h=Math.floor(n[c]),m=Math.floor(n[c+1]);if(h<-1||h>i||m<-1||m>l)throw new J;u=!1,h===-1?(n[c]=0,u=!0):h===i&&(n[c]=i-1,u=!0),m===-1?(n[c+1]=0,u=!0):m===l&&(n[c+1]=l-1,u=!0)}}}class nt{constructor(e,n,i,l,u,c,h,m,v){this.a11=e,this.a21=n,this.a31=i,this.a12=l,this.a22=u,this.a32=c,this.a13=h,this.a23=m,this.a33=v}static quadrilateralToQuadrilateral(e,n,i,l,u,c,h,m,v,I,O,D,V,G,Y,$){const se=nt.quadrilateralToSquare(e,n,i,l,u,c,h,m);return nt.squareToQuadrilateral(v,I,O,D,V,G,Y,$).times(se)}transformPoints(e){const n=e.length,i=this.a11,l=this.a12,u=this.a13,c=this.a21,h=this.a22,m=this.a23,v=this.a31,I=this.a32,O=this.a33;for(let D=0;D<n;D+=2){const V=e[D],G=e[D+1],Y=u*V+m*G+O;e[D]=(i*V+c*G+v)/Y,e[D+1]=(l*V+h*G+I)/Y}}transformPointsWithValues(e,n){const i=this.a11,l=this.a12,u=this.a13,c=this.a21,h=this.a22,m=this.a23,v=this.a31,I=this.a32,O=this.a33,D=e.length;for(let V=0;V<D;V++){const G=e[V],Y=n[V],$=u*G+m*Y+O;e[V]=(i*G+c*Y+v)/$,n[V]=(l*G+h*Y+I)/$}}static squareToQuadrilateral(e,n,i,l,u,c,h,m){const v=e-i+u-h,I=n-l+c-m;if(v===0&&I===0)return new nt(i-e,u-i,e,l-n,c-l,n,0,0,1);{const O=i-u,D=h-u,V=l-c,G=m-c,Y=O*G-D*V,$=(v*G-D*I)/Y,se=(O*I-v*V)/Y;return new nt(i-e+$*i,h-e+se*h,e,l-n+$*l,m-n+se*m,n,$,se,1)}}static quadrilateralToSquare(e,n,i,l,u,c,h,m){return nt.squareToQuadrilateral(e,n,i,l,u,c,h,m).buildAdjoint()}buildAdjoint(){return new nt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new nt(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class $n extends pt{sampleGrid(e,n,i,l,u,c,h,m,v,I,O,D,V,G,Y,$,se,Ee,Se){const xe=nt.quadrilateralToQuadrilateral(l,u,c,h,m,v,I,O,D,V,G,Y,$,se,Ee,Se);return this.sampleGridWithTransform(e,n,i,xe)}sampleGridWithTransform(e,n,i,l){if(n<=0||i<=0)throw new J;const u=new Le(n,i),c=new Float32Array(2*n);for(let h=0;h<i;h++){const m=c.length,v=h+.5;for(let I=0;I<m;I+=2)c[I]=I/2+.5,c[I+1]=v;l.transformPoints(c),pt.checkAndNudgePoints(e,c);try{for(let I=0;I<m;I+=2)e.get(Math.floor(c[I]),Math.floor(c[I+1]))&&u.set(I/2,h)}catch{throw new J}}return u}}class Tt{static setGridSampler(e){Tt.gridSampler=e}static getInstance(){return Tt.gridSampler}}Tt.gridSampler=new $n;class Ct{constructor(e,n){this.x=e,this.y=n}toResultPoint(){return new Pe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class nn{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let n=this.getMatrixCenter(),i=this.getBullsEyeCorners(n);if(e){let c=i[0];i[0]=i[2],i[2]=c}this.extractParameters(i);let l=this.sampleGrid(this.image,i[this.shift%4],i[(this.shift+1)%4],i[(this.shift+2)%4],i[(this.shift+3)%4]),u=this.getMatrixCornerPoints(i);return new Mt(l,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new J;let n=2*this.nbCenterLayers,i=new Int32Array([this.sampleLine(e[0],e[1],n),this.sampleLine(e[1],e[2],n),this.sampleLine(e[2],e[3],n),this.sampleLine(e[3],e[0],n)]);this.shift=this.getRotation(i,n);let l=0;for(let c=0;c<4;c++){let h=i[(this.shift+c)%4];this.compact?(l<<=7,l+=h>>1&127):(l<<=10,l+=(h>>2&992)+(h>>1&31))}let u=this.getCorrectedParameterData(l,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(e,n){let i=0;e.forEach((l,u,c)=>{let h=(l>>n-2<<1)+(l&1);i=(i<<3)+h}),i=((i&1)<<11)+(i>>1);for(let l=0;l<4;l++)if(W.bitCount(i^this.EXPECTED_CORNER_BITS[l])<=2)return l;throw new J}getCorrectedParameterData(e,n){let i,l;n?(i=7,l=2):(i=10,l=4);let u=i-l,c=new Int32Array(i);for(let m=i-1;m>=0;--m)c[m]=e&15,e>>=4;try{new En(Ve.AZTEC_PARAM).decode(c,u)}catch{throw new J}let h=0;for(let m=0;m<l;m++)h=(h<<4)+c[m];return h}getBullsEyeCorners(e){let n=e,i=e,l=e,u=e,c=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let O=this.getFirstDifferent(n,c,1,-1),D=this.getFirstDifferent(i,c,1,1),V=this.getFirstDifferent(l,c,-1,1),G=this.getFirstDifferent(u,c,-1,-1);if(this.nbCenterLayers>2){let Y=this.distancePoint(G,O)*this.nbCenterLayers/(this.distancePoint(u,n)*(this.nbCenterLayers+2));if(Y<.75||Y>1.25||!this.isWhiteOrBlackRectangle(O,D,V,G))break}n=O,i=D,l=V,u=G,c=!c}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new J;this.compact=this.nbCenterLayers===5;let h=new Pe(n.getX()+.5,n.getY()-.5),m=new Pe(i.getX()+.5,i.getY()+.5),v=new Pe(l.getX()-.5,l.getY()+.5),I=new Pe(u.getX()-.5,u.getY()-.5);return this.expandSquare([h,m,v,I],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,n,i,l;try{let h=new Be(this.image).detect();e=h[0],n=h[1],i=h[2],l=h[3]}catch{let m=this.image.getWidth()/2,v=this.image.getHeight()/2;e=this.getFirstDifferent(new Ct(m+7,v-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new Ct(m+7,v+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new Ct(m-7,v+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new Ct(m-7,v-7),!1,-1,-1).toResultPoint()}let u=ft.round((e.getX()+l.getX()+n.getX()+i.getX())/4),c=ft.round((e.getY()+l.getY()+n.getY()+i.getY())/4);try{let h=new Be(this.image,15,u,c).detect();e=h[0],n=h[1],i=h[2],l=h[3]}catch{e=this.getFirstDifferent(new Ct(u+7,c-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new Ct(u+7,c+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new Ct(u-7,c+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new Ct(u-7,c-7),!1,-1,-1).toResultPoint()}return u=ft.round((e.getX()+l.getX()+n.getX()+i.getX())/4),c=ft.round((e.getY()+l.getY()+n.getY()+i.getY())/4),new Ct(u,c)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,n,i,l,u){let c=Tt.getInstance(),h=this.getDimension(),m=h/2-this.nbCenterLayers,v=h/2+this.nbCenterLayers;return c.sampleGrid(e,h,h,m,m,v,m,v,v,m,v,n.getX(),n.getY(),i.getX(),i.getY(),l.getX(),l.getY(),u.getX(),u.getY())}sampleLine(e,n,i){let l=0,u=this.distanceResultPoint(e,n),c=u/i,h=e.getX(),m=e.getY(),v=c*(n.getX()-e.getX())/u,I=c*(n.getY()-e.getY())/u;for(let O=0;O<i;O++)this.image.get(ft.round(h+O*v),ft.round(m+O*I))&&(l|=1<<i-O-1);return l}isWhiteOrBlackRectangle(e,n,i,l){let u=3;e=new Ct(e.getX()-u,e.getY()+u),n=new Ct(n.getX()-u,n.getY()-u),i=new Ct(i.getX()+u,i.getY()-u),l=new Ct(l.getX()+u,l.getY()+u);let c=this.getColor(l,e);if(c===0)return!1;let h=this.getColor(e,n);return h!==c||(h=this.getColor(n,i),h!==c)?!1:(h=this.getColor(i,l),h===c)}getColor(e,n){let i=this.distancePoint(e,n),l=(n.getX()-e.getX())/i,u=(n.getY()-e.getY())/i,c=0,h=e.getX(),m=e.getY(),v=this.image.get(e.getX(),e.getY()),I=Math.ceil(i);for(let D=0;D<I;D++)h+=l,m+=u,this.image.get(ft.round(h),ft.round(m))!==v&&c++;let O=c/i;return O>.1&&O<.9?0:O<=.1===v?1:-1}getFirstDifferent(e,n,i,l){let u=e.getX()+i,c=e.getY()+l;for(;this.isValid(u,c)&&this.image.get(u,c)===n;)u+=i,c+=l;for(u-=i,c-=l;this.isValid(u,c)&&this.image.get(u,c)===n;)u+=i;for(u-=i;this.isValid(u,c)&&this.image.get(u,c)===n;)c+=l;return c-=l,new Ct(u,c)}expandSquare(e,n,i){let l=i/(2*n),u=e[0].getX()-e[2].getX(),c=e[0].getY()-e[2].getY(),h=(e[0].getX()+e[2].getX())/2,m=(e[0].getY()+e[2].getY())/2,v=new Pe(h+l*u,m+l*c),I=new Pe(h-l*u,m-l*c);u=e[1].getX()-e[3].getX(),c=e[1].getY()-e[3].getY(),h=(e[1].getX()+e[3].getX())/2,m=(e[1].getY()+e[3].getY())/2;let O=new Pe(h+l*u,m+l*c),D=new Pe(h-l*u,m-l*c);return[v,O,I,D]}isValid(e,n){return e>=0&&e<this.image.getWidth()&&n>0&&n<this.image.getHeight()}isValidPoint(e){let n=ft.round(e.getX()),i=ft.round(e.getY());return this.isValid(n,i)}distancePoint(e,n){return ft.distance(e.getX(),e.getY(),n.getX(),n.getY())}distanceResultPoint(e,n){return ft.distance(e.getX(),e.getY(),n.getX(),n.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(W.truncDivision(this.nbLayers-4,8)+1)+15}}class Dt{decode(e,n=null){let i=null,l=new nn(e.getBlackMatrix()),u=null,c=null;try{let I=l.detectMirror(!1);u=I.getPoints(),this.reportFoundResultPoints(n,u),c=new St().decode(I)}catch(I){i=I}if(c==null)try{let I=l.detectMirror(!0);u=I.getPoints(),this.reportFoundResultPoints(n,u),c=new St().decode(I)}catch(I){throw i??I}let h=new Ue(c.getText(),c.getRawBytes(),c.getNumBits(),u,ve.AZTEC,j.currentTimeMillis()),m=c.getByteSegments();m!=null&&h.putMetadata(Te.BYTE_SEGMENTS,m);let v=c.getECLevel();return v!=null&&h.putMetadata(Te.ERROR_CORRECTION_LEVEL,v),h}reportFoundResultPoints(e,n){if(e!=null){let i=e.get(ie.NEED_RESULT_POINT_CALLBACK);i!=null&&n.forEach((l,u,c)=>{i.foundPossibleResultPoint(l)})}}reset(){}}class Ln extends We{constructor(e=500){super(new Dt,e)}}class kt{decode(e,n){try{return this.doDecode(e,n)}catch{if(n&&n.get(ie.TRY_HARDER)===!0&&e.isRotateSupported()){const u=e.rotateCounterClockwise(),c=this.doDecode(u,n),h=c.getResultMetadata();let m=270;h!==null&&h.get(Te.ORIENTATION)===!0&&(m=m+h.get(Te.ORIENTATION)%360),c.putMetadata(Te.ORIENTATION,m);const v=c.getResultPoints();if(v!==null){const I=u.getHeight();for(let O=0;O<v.length;O++)v[O]=new Pe(I-v[O].getY()-1,v[O].getX())}return c}else throw new J}}reset(){}doDecode(e,n){const i=e.getWidth(),l=e.getHeight();let u=new ee(i);const c=n&&n.get(ie.TRY_HARDER)===!0,h=Math.max(1,l>>(c?8:5));let m;c?m=l:m=15;const v=Math.trunc(l/2);for(let I=0;I<m;I++){const O=Math.trunc((I+1)/2),D=(I&1)===0,V=v+h*(D?O:-O);if(V<0||V>=l)break;try{u=e.getBlackRow(V,u)}catch{continue}for(let G=0;G<2;G++){if(G===1&&(u.reverse(),n&&n.get(ie.NEED_RESULT_POINT_CALLBACK)===!0)){const Y=new Map;n.forEach(($,se)=>Y.set(se,$)),Y.delete(ie.NEED_RESULT_POINT_CALLBACK),n=Y}try{const Y=this.decodeRow(V,u,n);if(G===1){Y.putMetadata(Te.ORIENTATION,180);const $=Y.getResultPoints();$!==null&&($[0]=new Pe(i-$[0].getX()-1,$[0].getY()),$[1]=new Pe(i-$[1].getX()-1,$[1].getY()))}return Y}catch{}}}throw new J}static recordPattern(e,n,i){const l=i.length;for(let v=0;v<l;v++)i[v]=0;const u=e.getSize();if(n>=u)throw new J;let c=!e.get(n),h=0,m=n;for(;m<u;){if(e.get(m)!==c)i[h]++;else{if(++h===l)break;i[h]=1,c=!c}m++}if(!(h===l||h===l-1&&m===u))throw new J}static recordPatternInReverse(e,n,i){let l=i.length,u=e.get(n);for(;n>0&&l>=0;)e.get(--n)!==u&&(l--,u=!u);if(l>=0)throw new J;kt.recordPattern(e,n+1,i)}static patternMatchVariance(e,n,i){const l=e.length;let u=0,c=0;for(let v=0;v<l;v++)u+=e[v],c+=n[v];if(u<c)return Number.POSITIVE_INFINITY;const h=u/c;i*=h;let m=0;for(let v=0;v<l;v++){const I=e[v],O=n[v]*h,D=I>O?I-O:O-I;if(D>i)return Number.POSITIVE_INFINITY;m+=D}return m/u}}class Ae extends kt{static findStartPattern(e){const n=e.getSize(),i=e.getNextSet(0);let l=0,u=Int32Array.from([0,0,0,0,0,0]),c=i,h=!1;const m=6;for(let v=i;v<n;v++)if(e.get(v)!==h)u[l]++;else{if(l===m-1){let I=Ae.MAX_AVG_VARIANCE,O=-1;for(let D=Ae.CODE_START_A;D<=Ae.CODE_START_C;D++){const V=kt.patternMatchVariance(u,Ae.CODE_PATTERNS[D],Ae.MAX_INDIVIDUAL_VARIANCE);V<I&&(I=V,O=D)}if(O>=0&&e.isRange(Math.max(0,c-(v-c)/2),c,!1))return Int32Array.from([c,v,O]);c+=u[0]+u[1],u=u.slice(2,u.length-1),u[l-1]=0,u[l]=0,l--}else l++;u[l]=1,h=!h}throw new J}static decodeCode(e,n,i){kt.recordPattern(e,i,n);let l=Ae.MAX_AVG_VARIANCE,u=-1;for(let c=0;c<Ae.CODE_PATTERNS.length;c++){const h=Ae.CODE_PATTERNS[c],m=this.patternMatchVariance(n,h,Ae.MAX_INDIVIDUAL_VARIANCE);m<l&&(l=m,u=c)}if(u>=0)return u;throw new J}decodeRow(e,n,i){const l=i&&i.get(ie.ASSUME_GS1)===!0,u=Ae.findStartPattern(n),c=u[2];let h=0;const m=new Uint8Array(20);m[h++]=c;let v;switch(c){case Ae.CODE_START_A:v=Ae.CODE_CODE_A;break;case Ae.CODE_START_B:v=Ae.CODE_CODE_B;break;case Ae.CODE_START_C:v=Ae.CODE_CODE_C;break;default:throw new Q}let I=!1,O=!1,D="",V=u[0],G=u[1];const Y=Int32Array.from([0,0,0,0,0,0]);let $=0,se=0,Ee=c,Se=0,xe=!0,mt=!1,it=!1;for(;!I;){const Kr=O;switch(O=!1,$=se,se=Ae.decodeCode(n,Y,G),m[h++]=se,se!==Ae.CODE_STOP&&(xe=!0),se!==Ae.CODE_STOP&&(Se++,Ee+=Se*se),V=G,G+=Y.reduce((Zi,Qo)=>Zi+Qo,0),se){case Ae.CODE_START_A:case Ae.CODE_START_B:case Ae.CODE_START_C:throw new Q}switch(v){case Ae.CODE_CODE_A:if(se<64)it===mt?D+=String.fromCharCode(32+se):D+=String.fromCharCode(32+se+128),it=!1;else if(se<96)it===mt?D+=String.fromCharCode(se-64):D+=String.fromCharCode(se+64),it=!1;else switch(se!==Ae.CODE_STOP&&(xe=!1),se){case Ae.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case Ae.CODE_FNC_2:case Ae.CODE_FNC_3:break;case Ae.CODE_FNC_4_A:!mt&&it?(mt=!0,it=!1):mt&&it?(mt=!1,it=!1):it=!0;break;case Ae.CODE_SHIFT:O=!0,v=Ae.CODE_CODE_B;break;case Ae.CODE_CODE_B:v=Ae.CODE_CODE_B;break;case Ae.CODE_CODE_C:v=Ae.CODE_CODE_C;break;case Ae.CODE_STOP:I=!0;break}break;case Ae.CODE_CODE_B:if(se<96)it===mt?D+=String.fromCharCode(32+se):D+=String.fromCharCode(32+se+128),it=!1;else switch(se!==Ae.CODE_STOP&&(xe=!1),se){case Ae.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case Ae.CODE_FNC_2:case Ae.CODE_FNC_3:break;case Ae.CODE_FNC_4_B:!mt&&it?(mt=!0,it=!1):mt&&it?(mt=!1,it=!1):it=!0;break;case Ae.CODE_SHIFT:O=!0,v=Ae.CODE_CODE_A;break;case Ae.CODE_CODE_A:v=Ae.CODE_CODE_A;break;case Ae.CODE_CODE_C:v=Ae.CODE_CODE_C;break;case Ae.CODE_STOP:I=!0;break}break;case Ae.CODE_CODE_C:if(se<100)se<10&&(D+="0"),D+=se;else switch(se!==Ae.CODE_STOP&&(xe=!1),se){case Ae.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case Ae.CODE_CODE_A:v=Ae.CODE_CODE_A;break;case Ae.CODE_CODE_B:v=Ae.CODE_CODE_B;break;case Ae.CODE_STOP:I=!0;break}break}Kr&&(v=v===Ae.CODE_CODE_A?Ae.CODE_CODE_B:Ae.CODE_CODE_A)}const Qn=G-V;if(G=n.getNextUnset(G),!n.isRange(G,Math.min(n.getSize(),G+(G-V)/2),!1))throw new J;if(Ee-=Se*$,Ee%103!==$)throw new k;const br=D.length;if(br===0)throw new J;br>0&&xe&&(v===Ae.CODE_CODE_C?D=D.substring(0,br-2):D=D.substring(0,br-1));const wn=(u[1]+u[0])/2,Pt=V+Qn/2,rn=m.length,Gn=new Uint8Array(rn);for(let Kr=0;Kr<rn;Kr++)Gn[Kr]=m[Kr];const Si=[new Pe(wn,e),new Pe(Pt,e)];return new Ue(D,Gn,0,Si,ve.CODE_128,new Date().getTime())}}Ae.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ae.MAX_AVG_VARIANCE=.25,Ae.MAX_INDIVIDUAL_VARIANCE=.7,Ae.CODE_SHIFT=98,Ae.CODE_CODE_C=99,Ae.CODE_CODE_B=100,Ae.CODE_CODE_A=101,Ae.CODE_FNC_1=102,Ae.CODE_FNC_2=97,Ae.CODE_FNC_3=96,Ae.CODE_FNC_4_A=101,Ae.CODE_FNC_4_B=100,Ae.CODE_START_A=103,Ae.CODE_START_B=104,Ae.CODE_START_C=105,Ae.CODE_STOP=106;class Lt extends kt{constructor(e=!1,n=!1){super(),this.usingCheckDigit=e,this.extendedMode=n,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,n,i){let l=this.counters;l.fill(0),this.decodeRowResult="";let u=Lt.findAsteriskPattern(n,l),c=n.getNextSet(u[1]),h=n.getSize(),m,v;do{Lt.recordPattern(n,c,l);let Y=Lt.toNarrowWidePattern(l);if(Y<0)throw new J;m=Lt.patternToChar(Y),this.decodeRowResult+=m,v=c;for(let $ of l)c+=$;c=n.getNextSet(c)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let I=0;for(let Y of l)I+=Y;let O=c-v-I;if(c!==h&&O*2<I)throw new J;if(this.usingCheckDigit){let Y=this.decodeRowResult.length-1,$=0;for(let se=0;se<Y;se++)$+=Lt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(se));if(this.decodeRowResult.charAt(Y)!==Lt.ALPHABET_STRING.charAt($%43))throw new k;this.decodeRowResult=this.decodeRowResult.substring(0,Y)}if(this.decodeRowResult.length===0)throw new J;let D;this.extendedMode?D=Lt.decodeExtended(this.decodeRowResult):D=this.decodeRowResult;let V=(u[1]+u[0])/2,G=v+I/2;return new Ue(D,null,0,[new Pe(V,e),new Pe(G,e)],ve.CODE_39,new Date().getTime())}static findAsteriskPattern(e,n){let i=e.getSize(),l=e.getNextSet(0),u=0,c=l,h=!1,m=n.length;for(let v=l;v<i;v++)if(e.get(v)!==h)n[u]++;else{if(u===m-1){if(this.toNarrowWidePattern(n)===Lt.ASTERISK_ENCODING&&e.isRange(Math.max(0,c-Math.floor((v-c)/2)),c,!1))return[c,v];c+=n[0]+n[1],n.copyWithin(0,2,2+u-1),n[u-1]=0,n[u]=0,u--}else u++;n[u]=1,h=!h}throw new J}static toNarrowWidePattern(e){let n=e.length,i=0,l;do{let u=2147483647;for(let m of e)m<u&&m>i&&(u=m);i=u,l=0;let c=0,h=0;for(let m=0;m<n;m++){let v=e[m];v>i&&(h|=1<<n-1-m,l++,c+=v)}if(l===3){for(let m=0;m<n&&l>0;m++){let v=e[m];if(v>i&&(l--,v*2>=c))return-1}return h}}while(l>3);return-1}static patternToChar(e){for(let n=0;n<Lt.CHARACTER_ENCODINGS.length;n++)if(Lt.CHARACTER_ENCODINGS[n]===e)return Lt.ALPHABET_STRING.charAt(n);if(e===Lt.ASTERISK_ENCODING)return"*";throw new J}static decodeExtended(e){let n=e.length,i="";for(let l=0;l<n;l++){let u=e.charAt(l);if(u==="+"||u==="$"||u==="%"||u==="/"){let c=e.charAt(l+1),h="\0";switch(u){case"+":if(c>="A"&&c<="Z")h=String.fromCharCode(c.charCodeAt(0)+32);else throw new Q;break;case"$":if(c>="A"&&c<="Z")h=String.fromCharCode(c.charCodeAt(0)-64);else throw new Q;break;case"%":if(c>="A"&&c<="E")h=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")h=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")h=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")h=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")h="\0";else if(c==="V")h="@";else if(c==="W")h="`";else if(c==="X"||c==="Y"||c==="Z")h="";else throw new Q;break;case"/":if(c>="A"&&c<="O")h=String.fromCharCode(c.charCodeAt(0)-32);else if(c==="Z")h=":";else throw new Q;break}i+=h,l++}else i+=u}return i}}Lt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Lt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Lt.ASTERISK_ENCODING=148;class It extends kt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,n,i){let l=this.decodeStart(n),u=this.decodeEnd(n),c=new Oe;It.decodeMiddle(n,l[1],u[0],c);let h=c.toString(),m=null;i!=null&&(m=i.get(ie.ALLOWED_LENGTHS)),m==null&&(m=It.DEFAULT_ALLOWED_LENGTHS);let v=h.length,I=!1,O=0;for(let G of m){if(v===G){I=!0;break}G>O&&(O=G)}if(!I&&v>O&&(I=!0),!I)throw new Q;const D=[new Pe(l[1],e),new Pe(u[0],e)];return new Ue(h,null,0,D,ve.ITF,new Date().getTime())}static decodeMiddle(e,n,i,l){let u=new Int32Array(10),c=new Int32Array(5),h=new Int32Array(5);for(u.fill(0),c.fill(0),h.fill(0);n<i;){kt.recordPattern(e,n,u);for(let v=0;v<5;v++){let I=2*v;c[v]=u[I],h[v]=u[I+1]}let m=It.decodeDigit(c);l.append(m.toString()),m=this.decodeDigit(h),l.append(m.toString()),u.forEach(function(v){n+=v})}}decodeStart(e){let n=It.skipWhiteSpace(e),i=It.findGuardPattern(e,n,It.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(e,i[0]),i}validateQuietZone(e,n){let i=this.narrowLineWidth*10;i=i<n?i:n;for(let l=n-1;i>0&&l>=0&&!e.get(l);l--)i--;if(i!==0)throw new J}static skipWhiteSpace(e){const n=e.getSize(),i=e.getNextSet(0);if(i===n)throw new J;return i}decodeEnd(e){e.reverse();try{let n=It.skipWhiteSpace(e),i;try{i=It.findGuardPattern(e,n,It.END_PATTERN_REVERSED[0])}catch(u){u instanceof J&&(i=It.findGuardPattern(e,n,It.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,i[0]);let l=i[0];return i[0]=e.getSize()-i[1],i[1]=e.getSize()-l,i}finally{e.reverse()}}static findGuardPattern(e,n,i){let l=i.length,u=new Int32Array(l),c=e.getSize(),h=!1,m=0,v=n;u.fill(0);for(let I=n;I<c;I++)if(e.get(I)!==h)u[m]++;else{if(m===l-1){if(kt.patternMatchVariance(u,i,It.MAX_INDIVIDUAL_VARIANCE)<It.MAX_AVG_VARIANCE)return[v,I];v+=u[0]+u[1],j.arraycopy(u,2,u,0,m-1),u[m-1]=0,u[m]=0,m--}else m++;u[m]=1,h=!h}throw new J}static decodeDigit(e){let n=It.MAX_AVG_VARIANCE,i=-1,l=It.PATTERNS.length;for(let u=0;u<l;u++){let c=It.PATTERNS[u],h=kt.patternMatchVariance(e,c,It.MAX_INDIVIDUAL_VARIANCE);h<n?(n=h,i=u):h===n&&(i=-1)}if(i>=0)return i%10;throw new J}}It.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],It.MAX_AVG_VARIANCE=.38,It.MAX_INDIVIDUAL_VARIANCE=.5,It.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],It.START_PATTERN=Int32Array.from([1,1,1,1]),It.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ut extends kt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let n=!1,i,l=0,u=Int32Array.from([0,0,0]);for(;!n;){u=Int32Array.from([0,0,0]),i=Ut.findGuardPattern(e,l,!1,this.START_END_PATTERN,u);let c=i[0];l=i[1];let h=c-(l-c);h>=0&&(n=e.isRange(h,c,!1))}return i}static checkChecksum(e){return Ut.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let i=parseInt(e.charAt(n-1),10);return Ut.getStandardUPCEANChecksum(e.substring(0,n-1))===i}static getStandardUPCEANChecksum(e){let n=e.length,i=0;for(let l=n-1;l>=0;l-=2){let u=e.charAt(l).charCodeAt(0)-48;if(u<0||u>9)throw new Q;i+=u}i*=3;for(let l=n-2;l>=0;l-=2){let u=e.charAt(l).charCodeAt(0)-48;if(u<0||u>9)throw new Q;i+=u}return(1e3-i)%10}static decodeEnd(e,n){return Ut.findGuardPattern(e,n,!1,Ut.START_END_PATTERN,new Int32Array(Ut.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,n,i,l){return this.findGuardPattern(e,n,i,l,new Int32Array(l.length))}static findGuardPattern(e,n,i,l,u){let c=e.getSize();n=i?e.getNextUnset(n):e.getNextSet(n);let h=0,m=n,v=l.length,I=i;for(let O=n;O<c;O++)if(e.get(O)!==I)u[h]++;else{if(h===v-1){if(kt.patternMatchVariance(u,l,Ut.MAX_INDIVIDUAL_VARIANCE)<Ut.MAX_AVG_VARIANCE)return Int32Array.from([m,O]);m+=u[0]+u[1];let D=u.slice(2,u.length-1);for(let V=0;V<h-1;V++)u[V]=D[V];u[h-1]=0,u[h]=0,h--}else h++;u[h]=1,I=!I}throw new J}static decodeDigit(e,n,i,l){this.recordPattern(e,i,n);let u=this.MAX_AVG_VARIANCE,c=-1,h=l.length;for(let m=0;m<h;m++){let v=l[m],I=kt.patternMatchVariance(n,v,Ut.MAX_INDIVIDUAL_VARIANCE);I<u&&(u=I,c=m)}if(c>=0)return c;throw new J}}Ut.MAX_AVG_VARIANCE=.48,Ut.MAX_INDIVIDUAL_VARIANCE=.7,Ut.START_END_PATTERN=Int32Array.from([1,1,1]),Ut.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ut.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ut.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Hr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,i){let l=this.decodeRowStringBuffer,u=this.decodeMiddle(n,i,l),c=l.toString(),h=Hr.parseExtensionString(c),m=[new Pe((i[0]+i[1])/2,e),new Pe(u,e)],v=new Ue(c,null,0,m,ve.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&v.putAllMetadata(h),v}decodeMiddle(e,n,i){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=e.getSize(),c=n[1],h=0;for(let v=0;v<5&&c<u;v++){let I=Ut.decodeDigit(e,l,c,Ut.L_AND_G_PATTERNS);i+=String.fromCharCode(48+I%10);for(let O of l)c+=O;I>=10&&(h|=1<<4-v),v!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(i.length!==5)throw new J;let m=this.determineCheckDigit(h);if(Hr.extensionChecksum(i.toString())!==m)throw new J;return c}static extensionChecksum(e){let n=e.length,i=0;for(let l=n-2;l>=0;l-=2)i+=e.charAt(l).charCodeAt(0)-48;i*=3;for(let l=n-1;l>=0;l-=2)i+=e.charAt(l).charCodeAt(0)-48;return i*=3,i%10}determineCheckDigit(e){for(let n=0;n<10;n++)if(e===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new J}static parseExtensionString(e){if(e.length!==5)return null;let n=Hr.parseExtension5String(e);return n==null?null:new Map([[Te.SUGGESTED_PRICE,n]])}static parseExtension5String(e){let n;switch(e.charAt(0)){case"0":n="";break;case"5":n="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n="";break}let i=parseInt(e.substring(1)),l=(i/100).toString(),u=i%100,c=u<10?"0"+u:u.toString();return n+l+"."+c}}class ti{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,i){let l=this.decodeRowStringBuffer,u=this.decodeMiddle(n,i,l),c=l.toString(),h=ti.parseExtensionString(c),m=[new Pe((i[0]+i[1])/2,e),new Pe(u,e)],v=new Ue(c,null,0,m,ve.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&v.putAllMetadata(h),v}decodeMiddle(e,n,i){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=e.getSize(),c=n[1],h=0;for(let m=0;m<2&&c<u;m++){let v=Ut.decodeDigit(e,l,c,Ut.L_AND_G_PATTERNS);i+=String.fromCharCode(48+v%10);for(let I of l)c+=I;v>=10&&(h|=1<<1-m),m!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(i.length!==2)throw new J;if(parseInt(i.toString())%4!==h)throw new J;return c}static parseExtensionString(e){return e.length!==2?null:new Map([[Te.ISSUE_NUMBER,parseInt(e)]])}}class Fi{static decodeRow(e,n,i){let l=Ut.findGuardPattern(n,i,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Hr().decodeRow(e,n,l)}catch{return new ti().decodeRow(e,n,l)}}}Fi.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class gt extends Ut{constructor(){super(),this.decodeRowStringBuffer="",gt.L_AND_G_PATTERNS=gt.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let n=gt.L_PATTERNS[e-10],i=new Int32Array(n.length);for(let l=0;l<n.length;l++)i[l]=n[n.length-l-1];gt.L_AND_G_PATTERNS[e]=i}}decodeRow(e,n,i){let l=gt.findStartGuardPattern(n),u=i==null?null:i.get(ie.NEED_RESULT_POINT_CALLBACK);if(u!=null){const xe=new Pe((l[0]+l[1])/2,e);u.foundPossibleResultPoint(xe)}let c=this.decodeMiddle(n,l,this.decodeRowStringBuffer),h=c.rowOffset,m=c.resultString;if(u!=null){const xe=new Pe(h,e);u.foundPossibleResultPoint(xe)}let v=this.decodeEnd(n,h);if(u!=null){const xe=new Pe((v[0]+v[1])/2,e);u.foundPossibleResultPoint(xe)}let I=v[1],O=I+(I-v[0]);if(O>=n.getSize()||!n.isRange(I,O,!1))throw new J;let D=m.toString();if(D.length<8)throw new Q;if(!gt.checkChecksum(D))throw new k;let V=(l[1]+l[0])/2,G=(v[1]+v[0])/2,Y=this.getBarcodeFormat(),$=[new Pe(V,e),new Pe(G,e)],se=new Ue(D,null,0,$,Y,new Date().getTime()),Ee=0;try{let xe=Fi.decodeRow(e,n,v[1]);se.putMetadata(Te.UPC_EAN_EXTENSION,xe.getText()),se.putAllMetadata(xe.getResultMetadata()),se.addResultPoints(xe.getResultPoints()),Ee=xe.getText().length}catch{}let Se=i==null?null:i.get(ie.ALLOWED_EAN_EXTENSIONS);if(Se!=null){let xe=!1;for(let mt in Se)if(Ee.toString()===mt){xe=!0;break}if(!xe)throw new J}return se}decodeEnd(e,n){return gt.findGuardPattern(e,n,!1,gt.START_END_PATTERN,new Int32Array(gt.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return gt.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let i=parseInt(e.charAt(n-1),10);return gt.getStandardUPCEANChecksum(e.substring(0,n-1))===i}static getStandardUPCEANChecksum(e){let n=e.length,i=0;for(let l=n-1;l>=0;l-=2){let u=e.charAt(l).charCodeAt(0)-48;if(u<0||u>9)throw new Q;i+=u}i*=3;for(let l=n-2;l>=0;l-=2){let u=e.charAt(l).charCodeAt(0)-48;if(u<0||u>9)throw new Q;i+=u}return(1e3-i)%10}}class Bn extends gt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,i){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=e.getSize(),c=n[1],h=0;for(let v=0;v<6&&c<u;v++){let I=gt.decodeDigit(e,l,c,gt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+I%10);for(let O of l)c+=O;I>=10&&(h|=1<<5-v)}i=Bn.determineFirstDigit(i,h),c=gt.findGuardPattern(e,c,!0,gt.MIDDLE_PATTERN,new Int32Array(gt.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<6&&c<u;v++){let I=gt.decodeDigit(e,l,c,gt.L_PATTERNS);i+=String.fromCharCode(48+I);for(let O of l)c+=O}return{rowOffset:c,resultString:i}}getBarcodeFormat(){return ve.EAN_13}static determineFirstDigit(e,n){for(let i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return e=String.fromCharCode(48+i)+e,e;throw new J}}Bn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class xs extends gt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,i){const l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=e.getSize(),c=n[1];for(let m=0;m<4&&c<u;m++){let v=gt.decodeDigit(e,l,c,gt.L_PATTERNS);i+=String.fromCharCode(48+v);for(let I of l)c+=I}c=gt.findGuardPattern(e,c,!0,gt.MIDDLE_PATTERN,new Int32Array(gt.MIDDLE_PATTERN.length).fill(0))[1];for(let m=0;m<4&&c<u;m++){let v=gt.decodeDigit(e,l,c,gt.L_PATTERNS);i+=String.fromCharCode(48+v);for(let I of l)c+=I}return{rowOffset:c,resultString:i}}getBarcodeFormat(){return ve.EAN_8}}class ji extends gt{constructor(){super(...arguments),this.ean13Reader=new Bn}getBarcodeFormat(){return ve.UPC_A}decode(e,n){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,n,i))}decodeMiddle(e,n,i){return this.ean13Reader.decodeMiddle(e,n,i)}maybeReturnResult(e){let n=e.getText();if(n.charAt(0)==="0"){let i=new Ue(n.substring(1),null,null,e.getResultPoints(),ve.UPC_A);return e.getResultMetadata()!=null&&i.putAllMetadata(e.getResultMetadata()),i}else throw new J}reset(){this.ean13Reader.reset()}}class Fn extends gt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,n,i){const l=this.decodeMiddleCounters.map(v=>v);l[0]=0,l[1]=0,l[2]=0,l[3]=0;const u=e.getSize();let c=n[1],h=0;for(let v=0;v<6&&c<u;v++){const I=Fn.decodeDigit(e,l,c,Fn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+I%10);for(let O of l)c+=O;I>=10&&(h|=1<<5-v)}let m=Fn.determineNumSysAndCheckDigit(i,h);return{rowOffset:c,resultString:m}}decodeEnd(e,n){return Fn.findGuardPatternWithoutCounters(e,n,!0,Fn.MIDDLE_END_PATTERN)}checkChecksum(e){return gt.checkChecksum(Fn.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,n){for(let i=0;i<=1;i++)for(let l=0;l<10;l++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][l]){let u=String.fromCharCode(48+i),c=String.fromCharCode(48+l);return u+e+c}throw J.getNotFoundInstance()}getBarcodeFormat(){return ve.UPC_E}static convertUPCEtoUPCA(e){const n=e.slice(1,7).split("").map(u=>u.charCodeAt(0)),i=new Oe;i.append(e.charAt(0));let l=n[5];switch(l){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(l),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(l);break}return e.length>=8&&i.append(e.charAt(7)),i.toString()}}Fn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Fn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class yi extends kt{constructor(e){super();let n=e==null?null:e.get(ie.POSSIBLE_FORMATS),i=[];d(n)?(i.push(new Bn),i.push(new ji),i.push(new xs),i.push(new Fn)):(n.indexOf(ve.EAN_13)>-1&&i.push(new Bn),n.indexOf(ve.UPC_A)>-1&&i.push(new ji),n.indexOf(ve.EAN_8)>-1&&i.push(new xs),n.indexOf(ve.UPC_E)>-1&&i.push(new Fn)),this.readers=i}decodeRow(e,n,i){for(let l of this.readers)try{const u=l.decodeRow(e,n,i),c=u.getBarcodeFormat()===ve.EAN_13&&u.getText().charAt(0)==="0",h=i==null?null:i.get(ie.POSSIBLE_FORMATS),m=h==null||h.includes(ve.UPC_A);if(c&&m){const v=u.getRawBytes(),I=new Ue(u.getText().substring(1),v,v?v.length:null,u.getResultPoints(),ve.UPC_A);return I.putAllMetadata(u.getResultMetadata()),I}return u}catch{}throw new J}reset(){for(let e of this.readers)e.reset()}}class mn extends kt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,n){for(let i=0;i<n.length;i++)if(kt.patternMatchVariance(e,n[i],mn.MAX_INDIVIDUAL_VARIANCE)<mn.MAX_AVG_VARIANCE)return i;throw new J}static count(e){return ft.sum(new Int32Array(e))}static increment(e,n){let i=0,l=n[0];for(let u=1;u<e.length;u++)n[u]>l&&(l=n[u],i=u);e[i]++}static decrement(e,n){let i=0,l=n[0];for(let u=1;u<e.length;u++)n[u]<l&&(l=n[u],i=u);e[i]--}static isFinderPattern(e){let n=e[0]+e[1],i=n+e[2]+e[3],l=n/i;if(l>=mn.MIN_FINDER_PATTERN_RATIO&&l<=mn.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;for(let h of e)h>c&&(c=h),h<u&&(u=h);return c<10*u}return!1}}mn.MAX_AVG_VARIANCE=.2,mn.MAX_INDIVIDUAL_VARIANCE=.45,mn.MIN_FINDER_PATTERN_RATIO=9.5/12,mn.MAX_FINDER_PATTERN_RATIO=12.5/14;class sr{constructor(e,n){this.value=e,this.checksumPortion=n}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof sr))return!1;const n=e;return this.value===n.value&&this.checksumPortion===n.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class wi{constructor(e,n,i,l,u){this.value=e,this.startEnd=n,this.value=e,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new Pe(i,u)),this.resultPoints.push(new Pe(l,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof wi))return!1;const n=e;return this.value===n.value}hashCode(){return this.value}}class Tn{constructor(){}static getRSSvalue(e,n,i){let l=0;for(let m of e)l+=m;let u=0,c=0,h=e.length;for(let m=0;m<h-1;m++){let v;for(v=1,c|=1<<m;v<e[m];v++,c&=~(1<<m)){let I=Tn.combins(l-v-1,h-m-2);if(i&&c===0&&l-v-(h-m-1)>=h-m-1&&(I-=Tn.combins(l-v-(h-m),h-m-2)),h-m-1>1){let O=0;for(let D=l-v-(h-m-2);D>n;D--)O+=Tn.combins(l-v-D-1,h-m-3);I-=O*(h-1-m)}else l-v>n&&I--;u+=I}l-=v}return u}static combins(e,n){let i,l;e-n>n?(l=n,i=e-n):(l=e-n,i=n);let u=1,c=1;for(let h=e;h>i;h--)u*=h,c<=l&&(u/=c,c++);for(;c<=l;)u/=c,c++;return u}}class ys{static buildBitArray(e){let n=e.length*2-1;e[e.length-1].getRightChar()==null&&(n-=1);let i=12*n,l=new ee(i),u=0,h=e[0].getRightChar().getValue();for(let m=11;m>=0;--m)h&1<<m&&l.set(u),u++;for(let m=1;m<e.length;++m){let v=e[m],I=v.getLeftChar().getValue();for(let O=11;O>=0;--O)I&1<<O&&l.set(u),u++;if(v.getRightChar()!=null){let O=v.getRightChar().getValue();for(let D=11;D>=0;--D)O&1<<D&&l.set(u),u++}}return l}}class or{constructor(e,n){n?this.decodedInformation=null:(this.finished=e,this.decodedInformation=n)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ws{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class un extends ws{constructor(e,n){super(e),this.value=n}getValue(){return this.value}isFNC1(){return this.value===un.FNC1}}un.FNC1="$";class ar extends ws{constructor(e,n,i){super(e),i?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=n}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class In extends ws{constructor(e,n,i){if(super(e),n<0||n>10||i<0||i>10)throw new Q;this.firstDigit=n,this.secondDigit=i}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===In.FNC1}isSecondDigitFNC1(){return this.secondDigit===In.FNC1}isAnyFNC1(){return this.firstDigit===In.FNC1||this.secondDigit===In.FNC1}}In.FNC1=10;class Me{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new J;let n=e.substring(0,2);for(let u of Me.TWO_DIGIT_DATA_LENGTH)if(u[0]===n)return u[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(2,u[2],e):Me.processFixedAI(2,u[1],e);if(e.length<3)throw new J;let i=e.substring(0,3);for(let u of Me.THREE_DIGIT_DATA_LENGTH)if(u[0]===i)return u[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(3,u[2],e):Me.processFixedAI(3,u[1],e);for(let u of Me.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===i)return u[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(4,u[2],e):Me.processFixedAI(4,u[1],e);if(e.length<4)throw new J;let l=e.substring(0,4);for(let u of Me.FOUR_DIGIT_DATA_LENGTH)if(u[0]===l)return u[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(4,u[2],e):Me.processFixedAI(4,u[1],e);throw new J}static processFixedAI(e,n,i){if(i.length<e)throw new J;let l=i.substring(0,e);if(i.length<e+n)throw new J;let u=i.substring(e,e+n),c=i.substring(e+n),h="("+l+")"+u,m=Me.parseFieldsInGeneralPurpose(c);return m==null?h:h+m}static processVariableAI(e,n,i){let l=i.substring(0,e),u;i.length<e+n?u=i.length:u=e+n;let c=i.substring(e,u),h=i.substring(u),m="("+l+")"+c,v=Me.parseFieldsInGeneralPurpose(h);return v==null?m:m+v}}Me.VARIABLE_LENGTH=[],Me.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Me.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Me.VARIABLE_LENGTH,20],["22",Me.VARIABLE_LENGTH,29],["30",Me.VARIABLE_LENGTH,8],["37",Me.VARIABLE_LENGTH,8],["90",Me.VARIABLE_LENGTH,30],["91",Me.VARIABLE_LENGTH,30],["92",Me.VARIABLE_LENGTH,30],["93",Me.VARIABLE_LENGTH,30],["94",Me.VARIABLE_LENGTH,30],["95",Me.VARIABLE_LENGTH,30],["96",Me.VARIABLE_LENGTH,30],["97",Me.VARIABLE_LENGTH,3],["98",Me.VARIABLE_LENGTH,30],["99",Me.VARIABLE_LENGTH,30]],Me.THREE_DIGIT_DATA_LENGTH=[["240",Me.VARIABLE_LENGTH,30],["241",Me.VARIABLE_LENGTH,30],["242",Me.VARIABLE_LENGTH,6],["250",Me.VARIABLE_LENGTH,30],["251",Me.VARIABLE_LENGTH,30],["253",Me.VARIABLE_LENGTH,17],["254",Me.VARIABLE_LENGTH,20],["400",Me.VARIABLE_LENGTH,30],["401",Me.VARIABLE_LENGTH,30],["402",17],["403",Me.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Me.VARIABLE_LENGTH,20],["421",Me.VARIABLE_LENGTH,15],["422",3],["423",Me.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Me.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Me.VARIABLE_LENGTH,15],["391",Me.VARIABLE_LENGTH,18],["392",Me.VARIABLE_LENGTH,15],["393",Me.VARIABLE_LENGTH,18],["703",Me.VARIABLE_LENGTH,30]],Me.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Me.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Me.VARIABLE_LENGTH,20],["8003",Me.VARIABLE_LENGTH,30],["8004",Me.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Me.VARIABLE_LENGTH,30],["8008",Me.VARIABLE_LENGTH,12],["8018",18],["8020",Me.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Me.VARIABLE_LENGTH,70],["8200",Me.VARIABLE_LENGTH,70]];class Rr{constructor(e){this.buffer=new Oe,this.information=e}decodeAllCodes(e,n){let i=n,l=null;do{let u=this.decodeGeneralPurposeField(i,l),c=Me.parseFieldsInGeneralPurpose(u.getNewString());if(c!=null&&e.append(c),u.isRemaining()?l=""+u.getRemainingValue():l=null,i===u.getNewPosition())break;i=u.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let n=e;n<e+3;++n)if(this.information.get(n))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(e,4);return u===0?new In(this.information.getSize(),In.FNC1,In.FNC1):new In(this.information.getSize(),u-1,In.FNC1)}let n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,l=(n-8)%11;return new In(e+7,i,l)}extractNumericValueFromBitArray(e,n){return Rr.extractNumericValueFromBitArray(this.information,e,n)}static extractNumericValueFromBitArray(e,n,i){let l=0;for(let u=0;u<i;++u)e.get(n+u)&&(l|=1<<i-u-1);return l}decodeGeneralPurposeField(e,n){this.buffer.setLengthToZero(),n!=null&&this.buffer.append(n),this.current.setPosition(e);let i=this.parseBlocks();return i!=null&&i.isRemaining()?new ar(this.current.getPosition(),this.buffer.toString(),i.getRemainingValue()):new ar(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,n;do{let i=this.current.getPosition();if(this.current.isAlpha()?(n=this.parseAlphaBlock(),e=n.isFinished()):this.current.isIsoIec646()?(n=this.parseIsoIec646Block(),e=n.isFinished()):(n=this.parseNumericBlock(),e=n.isFinished()),!(i!==this.current.getPosition())&&!e)break}while(!e);return n.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let n;return e.isSecondDigitFNC1()?n=new ar(this.current.getPosition(),this.buffer.toString()):n=new ar(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new or(!0,n)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let n=new ar(this.current.getPosition(),this.buffer.toString());return new or(!0,n)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new or(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new ar(this.current.getPosition(),this.buffer.toString());return new or(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new or(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new ar(this.current.getPosition(),this.buffer.toString());return new or(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new or(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+7>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<116)return!0;if(e+8>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(e,8);return l>=232&&l<253}decodeIsoIec646(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new un(e+5,un.FNC1);if(n>=5&&n<15)return new un(e+5,"0"+(n-5));let i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<90)return new un(e+7,""+(i+1));if(i>=90&&i<116)return new un(e+7,""+(i+7));let l=this.extractNumericValueFromBitArray(e,8),u;switch(l){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new Q}return new un(e+8,u)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+6>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,6);return i>=16&&i<63}decodeAlphanumeric(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new un(e+5,un.FNC1);if(n>=5&&n<15)return new un(e+5,"0"+(n-5));let i=this.extractNumericValueFromBitArray(e,6);if(i>=32&&i<58)return new un(e+6,""+(i+33));let l;switch(i){case 58:l="*";break;case 59:l=",";break;case 60:l="-";break;case 61:l=".";break;case 62:l="/";break;default:throw new Ot("Decoding invalid alphanumeric value: "+i)}return new un(e+6,l)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<5&&n+e<this.information.getSize();++n)if(n===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+n))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let n=e;n<e+3;++n)if(this.information.get(n))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<4&&n+e<this.information.getSize();++n)if(this.information.get(e+n))return!1;return!0}}class vs{constructor(e){this.information=e,this.generalDecoder=new Rr(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Nn extends vs{constructor(e){super(e)}encodeCompressedGtin(e,n){e.append("(01)");let i=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,n,i)}encodeCompressedGtinWithoutAI(e,n,i){for(let l=0;l<4;++l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*l,10);u/100===0&&e.append("0"),u/10===0&&e.append("0"),e.append(u)}Nn.appendCheckDigit(e,i)}static appendCheckDigit(e,n){let i=0;for(let l=0;l<13;l++){let u=e.charAt(l+n).charCodeAt(0)-48;i+=l&1?u:3*u}i=10-i%10,i===10&&(i=0),e.append(i)}}Nn.GTIN_SIZE=40;class _e extends Nn{constructor(e){super(e)}parseInformation(){let e=new Oe;e.append("(01)");let n=e.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(_e.HEADER_SIZE,4);return e.append(i),this.encodeCompressedGtinWithoutAI(e,_e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(e,_e.HEADER_SIZE+44)}}_e.HEADER_SIZE=4;class lt extends vs{constructor(e){super(e)}parseInformation(){let e=new Oe;return this.getGeneralDecoder().decodeAllCodes(e,lt.HEADER_SIZE)}}lt.HEADER_SIZE=5;class st extends Nn{constructor(e){super(e)}encodeCompressedWeight(e,n,i){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(e,l);let u=this.checkWeight(l),c=1e5;for(let h=0;h<5;++h)u/c===0&&e.append("0"),c/=10;e.append(u)}}class bt extends st{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=bt.HEADER_SIZE+st.GTIN_SIZE+bt.WEIGHT_SIZE)throw new J;let e=new Oe;return this.encodeCompressedGtin(e,bt.HEADER_SIZE),this.encodeCompressedWeight(e,bt.HEADER_SIZE+st.GTIN_SIZE,bt.WEIGHT_SIZE),e.toString()}}bt.HEADER_SIZE=5,bt.WEIGHT_SIZE=15;class Xe extends bt{constructor(e){super(e)}addWeightCode(e,n){e.append("(3103)")}checkWeight(e){return e}}class An extends bt{constructor(e){super(e)}addWeightCode(e,n){n<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class lr extends Nn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<lr.HEADER_SIZE+Nn.GTIN_SIZE)throw new J;let e=new Oe;this.encodeCompressedGtin(e,lr.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(lr.HEADER_SIZE+Nn.GTIN_SIZE,lr.LAST_DIGIT_SIZE);e.append("(392"),e.append(n),e.append(")");let i=this.getGeneralDecoder().decodeGeneralPurposeField(lr.HEADER_SIZE+Nn.GTIN_SIZE+lr.LAST_DIGIT_SIZE,null);return e.append(i.getNewString()),e.toString()}}lr.HEADER_SIZE=8,lr.LAST_DIGIT_SIZE=2;class Sn extends Nn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Sn.HEADER_SIZE+Nn.GTIN_SIZE)throw new J;let e=new Oe;this.encodeCompressedGtin(e,Sn.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(Sn.HEADER_SIZE+Nn.GTIN_SIZE,Sn.LAST_DIGIT_SIZE);e.append("(393"),e.append(n),e.append(")");let i=this.getGeneralDecoder().extractNumericValueFromBitArray(Sn.HEADER_SIZE+Nn.GTIN_SIZE+Sn.LAST_DIGIT_SIZE,Sn.FIRST_THREE_DIGITS_SIZE);i/100==0&&e.append("0"),i/10==0&&e.append("0"),e.append(i);let l=this.getGeneralDecoder().decodeGeneralPurposeField(Sn.HEADER_SIZE+Nn.GTIN_SIZE+Sn.LAST_DIGIT_SIZE+Sn.FIRST_THREE_DIGITS_SIZE,null);return e.append(l.getNewString()),e.toString()}}Sn.HEADER_SIZE=8,Sn.LAST_DIGIT_SIZE=2,Sn.FIRST_THREE_DIGITS_SIZE=10;class Ft extends st{constructor(e,n,i){super(e),this.dateCode=i,this.firstAIdigits=n}parseInformation(){if(this.getInformation().getSize()!=Ft.HEADER_SIZE+Ft.GTIN_SIZE+Ft.WEIGHT_SIZE+Ft.DATE_SIZE)throw new J;let e=new Oe;return this.encodeCompressedGtin(e,Ft.HEADER_SIZE),this.encodeCompressedWeight(e,Ft.HEADER_SIZE+Ft.GTIN_SIZE,Ft.WEIGHT_SIZE),this.encodeCompressedDate(e,Ft.HEADER_SIZE+Ft.GTIN_SIZE+Ft.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,n){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,Ft.DATE_SIZE);if(i==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let l=i%32;i/=32;let u=i%12+1;i/=12;let c=i;c/10==0&&e.append("0"),e.append(c),u/10==0&&e.append("0"),e.append(u),l/10==0&&e.append("0"),e.append(l)}addWeightCode(e,n){e.append("("),e.append(this.firstAIdigits),e.append(n/1e5),e.append(")")}checkWeight(e){return e%1e5}}Ft.HEADER_SIZE=8,Ft.WEIGHT_SIZE=20,Ft.DATE_SIZE=16;function pr(_){try{if(_.get(1))return new _e(_);if(!_.get(2))return new lt(_);switch(Rr.extractNumericValueFromBitArray(_,1,4)){case 4:return new Xe(_);case 5:return new An(_)}switch(Rr.extractNumericValueFromBitArray(_,1,5)){case 12:return new lr(_);case 13:return new Sn(_)}switch(Rr.extractNumericValueFromBitArray(_,1,7)){case 56:return new Ft(_,"310","11");case 57:return new Ft(_,"320","11");case 58:return new Ft(_,"310","13");case 59:return new Ft(_,"320","13");case 60:return new Ft(_,"310","15");case 61:return new Ft(_,"320","15");case 62:return new Ft(_,"310","17");case 63:return new Ft(_,"320","17")}}catch(e){throw console.log(e),new Ot("unknown decoder: "+_)}}class yt{constructor(e,n,i,l){this.leftchar=e,this.rightchar=n,this.finderpattern=i,this.maybeLast=l}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,n){return e instanceof yt?yt.equalsOrNull(e.leftchar,n.leftchar)&&yt.equalsOrNull(e.rightchar,n.rightchar)&&yt.equalsOrNull(e.finderpattern,n.finderpattern):!1}static equalsOrNull(e,n){return e===null?n===null:yt.equals(e,n)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Qs{constructor(e,n,i){this.pairs=e,this.rowNumber=n,this.wasReversed=i}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,n){return e instanceof Qs?this.checkEqualitity(e,n)&&e.wasReversed===n.wasReversed:!1}checkEqualitity(e,n){if(!e||!n)return;let i;return e.forEach((l,u)=>{n.forEach(c=>{l.getLeftChar().getValue()===c.getLeftChar().getValue()&&l.getRightChar().getValue()===c.getRightChar().getValue()&&l.getFinderPatter().getValue()===c.getFinderPatter().getValue()&&(i=!0)})}),i}}class he extends mn{constructor(e){super(...arguments),this.pairs=new Array(he.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,n,i){this.pairs.length=0,this.startFromEven=!1;try{return he.constructResult(this.decodeRow2pairs(e,n))}catch(l){this.verbose&&console.log(l)}return this.pairs.length=0,this.startFromEven=!0,he.constructResult(this.decodeRow2pairs(e,n))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,n){let i=!1;for(;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,e))}catch(u){if(u instanceof J){if(!this.pairs.length)throw new J;i=!0}}if(this.checkChecksum())return this.pairs;let l;if(this.rows.length?l=!0:l=!1,this.storeRow(e,!1),l){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new J}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let n=null;try{n=this.checkRows(new Array,0)}catch(i){this.verbose&&console.log(i)}return e&&(this.rows=this.rows.reverse()),n}checkRows(e,n){for(let i=n;i<this.rows.length;i++){let l=this.rows[i];this.pairs.length=0;for(let c of e)this.pairs.push(c.getPairs());if(this.pairs.push(l.getPairs()),!he.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(e);u.push(l);try{return this.checkRows(u,i+1)}catch(c){this.verbose&&console.log(c)}}throw new J}static isValidSequence(e){for(let n of he.FINDER_PATTERN_SEQUENCES){if(e.length>n.length)continue;let i=!0;for(let l=0;l<e.length;l++)if(e[l].getFinderPattern().getValue()!=n[l]){i=!1;break}if(i)return!0}return!1}storeRow(e,n){let i=0,l=!1,u=!1;for(;i<this.rows.length;){let c=this.rows[i];if(c.getRowNumber()>e){u=c.isEquivalent(this.pairs);break}l=c.isEquivalent(this.pairs),i++}u||l||he.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new Qs(this.pairs,e,n)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,n){for(let i of n)if(i.getPairs().length!==e.length){for(let l of i.getPairs())for(let u of e)if(yt.equals(l,u))break}}static isPartialRow(e,n){for(let i of n){let l=!0;for(let u of e){let c=!1;for(let h of i.getPairs())if(u.equals(h)){c=!0;break}if(!c){l=!1;break}}if(l)return!0}return!1}getRows(){return this.rows}static constructResult(e){let n=ys.buildBitArray(e),l=pr(n).parseInformation(),u=e[0].getFinderPattern().getResultPoints(),c=e[e.length-1].getFinderPattern().getResultPoints(),h=[u[0],u[1],c[0],c[1]];return new Ue(l,null,null,h,ve.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),n=e.getLeftChar(),i=e.getRightChar();if(i==null)return!1;let l=i.getChecksumPortion(),u=2;for(let h=1;h<this.pairs.size();++h){let m=this.pairs.get(h);l+=m.getLeftChar().getChecksumPortion(),u++;let v=m.getRightChar();v!=null&&(l+=v.getChecksumPortion(),u++)}return l%=211,211*(u-4)+l==n.getValue()}static getNextSecondBar(e,n){let i;return e.get(n)?(i=e.getNextUnset(n),i=e.getNextSet(i)):(i=e.getNextSet(n),i=e.getNextUnset(i)),i}retrieveNextPair(e,n,i){let l=n.length%2==0;this.startFromEven&&(l=!l);let u,c=!0,h=-1;do this.findNextPair(e,n,h),u=this.parseFoundFinderPattern(e,i,l),u==null?h=he.getNextSecondBar(e,this.startEnd[0]):c=!1;while(c);let m=this.decodeDataCharacter(e,u,l,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new J;let v;try{v=this.decodeDataCharacter(e,u,l,!1)}catch(I){v=null,this.verbose&&console.log(I)}return new yt(m,v,u,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,n,i){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=e.getSize(),c;i>=0?c=i:this.isEmptyPair(n)?c=0:c=n[n.length-1].getFinderPattern().getStartEnd()[1];let h=n.length%2!=0;this.startFromEven&&(h=!h);let m=!1;for(;c<u&&(m=!e.get(c),!!m);)c++;let v=0,I=c;for(let O=c;O<u;O++)if(e.get(O)!=m)l[v]++;else{if(v==3){if(h&&he.reverseCounters(l),he.isFinderPattern(l)){this.startEnd[0]=I,this.startEnd[1]=O;return}h&&he.reverseCounters(l),I+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,v--}else v++;l[v]=1,m=!m}throw new J}static reverseCounters(e){let n=e.length;for(let i=0;i<n/2;++i){let l=e[i];e[i]=e[n-i-1],e[n-i-1]=l}}parseFoundFinderPattern(e,n,i){let l,u,c;if(i){let v=this.startEnd[0]-1;for(;v>=0&&!e.get(v);)v--;v++,l=this.startEnd[0]-v,u=v,c=this.startEnd[1]}else u=this.startEnd[0],c=e.getNextUnset(this.startEnd[1]+1),l=c-this.startEnd[1];let h=this.getDecodeFinderCounters();j.arraycopy(h,0,h,1,h.length-1),h[0]=l;let m;try{m=this.parseFinderValue(h,he.FINDER_PATTERNS)}catch{return null}return new wi(m,[u,c],u,c,n)}decodeDataCharacter(e,n,i,l){let u=this.getDataCharacterCounters();for(let Pt=0;Pt<u.length;Pt++)u[Pt]=0;if(l)he.recordPatternInReverse(e,n.getStartEnd()[0],u);else{he.recordPattern(e,n.getStartEnd()[1],u);for(let Pt=0,rn=u.length-1;Pt<rn;Pt++,rn--){let Gn=u[Pt];u[Pt]=u[rn],u[rn]=Gn}}let c=17,h=ft.sum(new Int32Array(u))/c,m=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(h-m)/m>.3)throw new J;let v=this.getOddCounts(),I=this.getEvenCounts(),O=this.getOddRoundingErrors(),D=this.getEvenRoundingErrors();for(let Pt=0;Pt<u.length;Pt++){let rn=1*u[Pt]/h,Gn=rn+.5;if(Gn<1){if(rn<.3)throw new J;Gn=1}else if(Gn>8){if(rn>8.7)throw new J;Gn=8}let Si=Pt/2;Pt&1?(I[Si]=Gn,D[Si]=rn-Gn):(v[Si]=Gn,O[Si]=rn-Gn)}this.adjustOddEvenCounts(c);let V=4*n.getValue()+(i?0:2)+(l?0:1)-1,G=0,Y=0;for(let Pt=v.length-1;Pt>=0;Pt--){if(he.isNotA1left(n,i,l)){let rn=he.WEIGHTS[V][2*Pt];Y+=v[Pt]*rn}G+=v[Pt]}let $=0;for(let Pt=I.length-1;Pt>=0;Pt--)if(he.isNotA1left(n,i,l)){let rn=he.WEIGHTS[V][2*Pt+1];$+=I[Pt]*rn}let se=Y+$;if(G&1||G>13||G<4)throw new J;let Ee=(13-G)/2,Se=he.SYMBOL_WIDEST[Ee],xe=9-Se,mt=Tn.getRSSvalue(v,Se,!0),it=Tn.getRSSvalue(I,xe,!1),Qn=he.EVEN_TOTAL_SUBSET[Ee],br=he.GSUM[Ee],wn=mt*Qn+it+br;return new sr(wn,se)}static isNotA1left(e,n,i){return!(e.getValue()==0&&n&&i)}adjustOddEvenCounts(e){let n=ft.sum(new Int32Array(this.getOddCounts())),i=ft.sum(new Int32Array(this.getEvenCounts())),l=!1,u=!1;n>13?u=!0:n<4&&(l=!0);let c=!1,h=!1;i>13?h=!0:i<4&&(c=!0);let m=n+i-e,v=(n&1)==1,I=(i&1)==0;if(m==1)if(v){if(I)throw new J;u=!0}else{if(!I)throw new J;h=!0}else if(m==-1)if(v){if(I)throw new J;l=!0}else{if(!I)throw new J;c=!0}else if(m==0){if(v){if(!I)throw new J;n<i?(l=!0,h=!0):(u=!0,c=!0)}else if(I)throw new J}else throw new J;if(l){if(u)throw new J;he.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&he.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(h)throw new J;he.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&he.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}he.SYMBOL_WIDEST=[7,5,4,3,1],he.EVEN_TOTAL_SUBSET=[4,20,52,104,204],he.GSUM=[0,348,1388,2948,3988],he.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],he.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],he.FINDER_PAT_A=0,he.FINDER_PAT_B=1,he.FINDER_PAT_C=2,he.FINDER_PAT_D=3,he.FINDER_PAT_E=4,he.FINDER_PAT_F=5,he.FINDER_PATTERN_SEQUENCES=[[he.FINDER_PAT_A,he.FINDER_PAT_A],[he.FINDER_PAT_A,he.FINDER_PAT_B,he.FINDER_PAT_B],[he.FINDER_PAT_A,he.FINDER_PAT_C,he.FINDER_PAT_B,he.FINDER_PAT_D],[he.FINDER_PAT_A,he.FINDER_PAT_E,he.FINDER_PAT_B,he.FINDER_PAT_D,he.FINDER_PAT_C],[he.FINDER_PAT_A,he.FINDER_PAT_E,he.FINDER_PAT_B,he.FINDER_PAT_D,he.FINDER_PAT_D,he.FINDER_PAT_F],[he.FINDER_PAT_A,he.FINDER_PAT_E,he.FINDER_PAT_B,he.FINDER_PAT_D,he.FINDER_PAT_E,he.FINDER_PAT_F,he.FINDER_PAT_F],[he.FINDER_PAT_A,he.FINDER_PAT_A,he.FINDER_PAT_B,he.FINDER_PAT_B,he.FINDER_PAT_C,he.FINDER_PAT_C,he.FINDER_PAT_D,he.FINDER_PAT_D],[he.FINDER_PAT_A,he.FINDER_PAT_A,he.FINDER_PAT_B,he.FINDER_PAT_B,he.FINDER_PAT_C,he.FINDER_PAT_C,he.FINDER_PAT_D,he.FINDER_PAT_E,he.FINDER_PAT_E],[he.FINDER_PAT_A,he.FINDER_PAT_A,he.FINDER_PAT_B,he.FINDER_PAT_B,he.FINDER_PAT_C,he.FINDER_PAT_C,he.FINDER_PAT_D,he.FINDER_PAT_E,he.FINDER_PAT_F,he.FINDER_PAT_F],[he.FINDER_PAT_A,he.FINDER_PAT_A,he.FINDER_PAT_B,he.FINDER_PAT_B,he.FINDER_PAT_C,he.FINDER_PAT_D,he.FINDER_PAT_D,he.FINDER_PAT_E,he.FINDER_PAT_E,he.FINDER_PAT_F,he.FINDER_PAT_F]],he.MAX_PAIRS=11;class Cs extends sr{constructor(e,n,i){super(e,n),this.count=0,this.finderPattern=i}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Wt extends mn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,n,i){const l=this.decodePair(n,!1,e,i);Wt.addOrTally(this.possibleLeftPairs,l),n.reverse();let u=this.decodePair(n,!0,e,i);Wt.addOrTally(this.possibleRightPairs,u),n.reverse();for(let c of this.possibleLeftPairs)if(c.getCount()>1){for(let h of this.possibleRightPairs)if(h.getCount()>1&&Wt.checkChecksum(c,h))return Wt.constructResult(c,h)}throw new J}static addOrTally(e,n){if(n==null)return;let i=!1;for(let l of e)if(l.getValue()===n.getValue()){l.incrementCount(),i=!0;break}i||e.push(n)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,n){let i=4537077*e.getValue()+n.getValue(),l=new String(i).toString(),u=new Oe;for(let v=13-l.length;v>0;v--)u.append("0");u.append(l);let c=0;for(let v=0;v<13;v++){let I=u.charAt(v).charCodeAt(0)-48;c+=v&1?I:3*I}c=10-c%10,c===10&&(c=0),u.append(c.toString());let h=e.getFinderPattern().getResultPoints(),m=n.getFinderPattern().getResultPoints();return new Ue(u.toString(),null,0,[h[0],h[1],m[0],m[1]],ve.RSS_14,new Date().getTime())}static checkChecksum(e,n){let i=(e.getChecksumPortion()+16*n.getChecksumPortion())%79,l=9*e.getFinderPattern().getValue()+n.getFinderPattern().getValue();return l>72&&l--,l>8&&l--,i===l}decodePair(e,n,i,l){try{let u=this.findFinderPattern(e,n),c=this.parseFoundFinderPattern(e,i,n,u),h=l==null?null:l.get(ie.NEED_RESULT_POINT_CALLBACK);if(h!=null){let I=(u[0]+u[1])/2;n&&(I=e.getSize()-1-I),h.foundPossibleResultPoint(new Pe(I,i))}let m=this.decodeDataCharacter(e,c,!0),v=this.decodeDataCharacter(e,c,!1);return new Cs(1597*m.getValue()+v.getValue(),m.getChecksumPortion()+4*v.getChecksumPortion(),c)}catch{return null}}decodeDataCharacter(e,n,i){let l=this.getDataCharacterCounters();for(let $=0;$<l.length;$++)l[$]=0;if(i)kt.recordPatternInReverse(e,n.getStartEnd()[0],l);else{kt.recordPattern(e,n.getStartEnd()[1]+1,l);for(let $=0,se=l.length-1;$<se;$++,se--){let Ee=l[$];l[$]=l[se],l[se]=Ee}}let u=i?16:15,c=ft.sum(new Int32Array(l))/u,h=this.getOddCounts(),m=this.getEvenCounts(),v=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors();for(let $=0;$<l.length;$++){let se=l[$]/c,Ee=Math.floor(se+.5);Ee<1?Ee=1:Ee>8&&(Ee=8);let Se=Math.floor($/2);$&1?(m[Se]=Ee,I[Se]=se-Ee):(h[Se]=Ee,v[Se]=se-Ee)}this.adjustOddEvenCounts(i,u);let O=0,D=0;for(let $=h.length-1;$>=0;$--)D*=9,D+=h[$],O+=h[$];let V=0,G=0;for(let $=m.length-1;$>=0;$--)V*=9,V+=m[$],G+=m[$];let Y=D+3*V;if(i){if(O&1||O>12||O<4)throw new J;let $=(12-O)/2,se=Wt.OUTSIDE_ODD_WIDEST[$],Ee=9-se,Se=Tn.getRSSvalue(h,se,!1),xe=Tn.getRSSvalue(m,Ee,!0),mt=Wt.OUTSIDE_EVEN_TOTAL_SUBSET[$],it=Wt.OUTSIDE_GSUM[$];return new sr(Se*mt+xe+it,Y)}else{if(G&1||G>10||G<4)throw new J;let $=(10-G)/2,se=Wt.INSIDE_ODD_WIDEST[$],Ee=9-se,Se=Tn.getRSSvalue(h,se,!0),xe=Tn.getRSSvalue(m,Ee,!1),mt=Wt.INSIDE_ODD_TOTAL_SUBSET[$],it=Wt.INSIDE_GSUM[$];return new sr(xe*mt+Se+it,Y)}}findFinderPattern(e,n){let i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;let l=e.getSize(),u=!1,c=0;for(;c<l&&(u=!e.get(c),n!==u);)c++;let h=0,m=c;for(let v=c;v<l;v++)if(e.get(v)!==u)i[h]++;else{if(h===3){if(mn.isFinderPattern(i))return[m,v];m+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,h--}else h++;i[h]=1,u=!u}throw new J}parseFoundFinderPattern(e,n,i,l){let u=e.get(l[0]),c=l[0]-1;for(;c>=0&&u!==e.get(c);)c--;c++;const h=l[0]-c,m=this.getDecodeFinderCounters(),v=new Int32Array(m.length);j.arraycopy(m,0,v,1,m.length-1),v[0]=h;const I=this.parseFinderValue(v,Wt.FINDER_PATTERNS);let O=c,D=l[1];return i&&(O=e.getSize()-1-O,D=e.getSize()-1-D),new wi(I,[c,l[1]],O,D,n)}adjustOddEvenCounts(e,n){let i=ft.sum(new Int32Array(this.getOddCounts())),l=ft.sum(new Int32Array(this.getEvenCounts())),u=!1,c=!1,h=!1,m=!1;e?(i>12?c=!0:i<4&&(u=!0),l>12?m=!0:l<4&&(h=!0)):(i>11?c=!0:i<5&&(u=!0),l>10?m=!0:l<4&&(h=!0));let v=i+l-n,I=(i&1)===(e?1:0),O=(l&1)===1;if(v===1)if(I){if(O)throw new J;c=!0}else{if(!O)throw new J;m=!0}else if(v===-1)if(I){if(O)throw new J;u=!0}else{if(!O)throw new J;h=!0}else if(v===0){if(I){if(!O)throw new J;i<l?(u=!0,m=!0):(c=!0,h=!0)}else if(O)throw new J}else throw new J;if(u){if(c)throw new J;mn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&mn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(m)throw new J;mn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&mn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Wt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Wt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Wt.OUTSIDE_GSUM=[0,161,961,2015,2715],Wt.INSIDE_GSUM=[0,336,1036,1516],Wt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Wt.INSIDE_ODD_WIDEST=[2,4,6,8],Wt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Vi extends kt{constructor(e,n){super(),this.readers=[],this.verbose=n===!0;const i=e?e.get(ie.POSSIBLE_FORMATS):null,l=e&&e.get(ie.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;i?((i.includes(ve.EAN_13)||i.includes(ve.UPC_A)||i.includes(ve.EAN_8)||i.includes(ve.UPC_E))&&this.readers.push(new yi(e)),i.includes(ve.CODE_39)&&this.readers.push(new Lt(l)),i.includes(ve.CODE_128)&&this.readers.push(new Ae),i.includes(ve.ITF)&&this.readers.push(new It),i.includes(ve.RSS_14)&&this.readers.push(new Wt),i.includes(ve.RSS_EXPANDED)&&this.readers.push(new he(this.verbose))):(this.readers.push(new yi(e)),this.readers.push(new Lt),this.readers.push(new yi(e)),this.readers.push(new Ae),this.readers.push(new It),this.readers.push(new Wt),this.readers.push(new he(this.verbose)))}decodeRow(e,n,i){for(let l=0;l<this.readers.length;l++)try{return this.readers[l].decodeRow(e,n,i)}catch{}throw new J}reset(){this.readers.forEach(e=>e.reset())}}class $a extends We{constructor(e=500,n){super(new Vi(n),e,n)}}class At{constructor(e,n,i){this.ecCodewords=e,this.ecBlocks=[n],i&&this.ecBlocks.push(i)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class dt{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class wt{constructor(e,n,i,l,u,c){this.versionNumber=e,this.symbolSizeRows=n,this.symbolSizeColumns=i,this.dataRegionSizeRows=l,this.dataRegionSizeColumns=u,this.ecBlocks=c;let h=0;const m=c.getECCodewords(),v=c.getECBlocks();for(let I of v)h+=I.getCount()*(I.getDataCodewords()+m);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,n){if(e&1||n&1)throw new Q;for(let i of wt.VERSIONS)if(i.symbolSizeRows===e&&i.symbolSizeColumns===n)return i;throw new Q}toString(){return""+this.versionNumber}static buildVersions(){return[new wt(1,10,10,8,8,new At(5,new dt(1,3))),new wt(2,12,12,10,10,new At(7,new dt(1,5))),new wt(3,14,14,12,12,new At(10,new dt(1,8))),new wt(4,16,16,14,14,new At(12,new dt(1,12))),new wt(5,18,18,16,16,new At(14,new dt(1,18))),new wt(6,20,20,18,18,new At(18,new dt(1,22))),new wt(7,22,22,20,20,new At(20,new dt(1,30))),new wt(8,24,24,22,22,new At(24,new dt(1,36))),new wt(9,26,26,24,24,new At(28,new dt(1,44))),new wt(10,32,32,14,14,new At(36,new dt(1,62))),new wt(11,36,36,16,16,new At(42,new dt(1,86))),new wt(12,40,40,18,18,new At(48,new dt(1,114))),new wt(13,44,44,20,20,new At(56,new dt(1,144))),new wt(14,48,48,22,22,new At(68,new dt(1,174))),new wt(15,52,52,24,24,new At(42,new dt(2,102))),new wt(16,64,64,14,14,new At(56,new dt(2,140))),new wt(17,72,72,16,16,new At(36,new dt(4,92))),new wt(18,80,80,18,18,new At(48,new dt(4,114))),new wt(19,88,88,20,20,new At(56,new dt(4,144))),new wt(20,96,96,22,22,new At(68,new dt(4,174))),new wt(21,104,104,24,24,new At(56,new dt(6,136))),new wt(22,120,120,18,18,new At(68,new dt(6,175))),new wt(23,132,132,20,20,new At(62,new dt(8,163))),new wt(24,144,144,22,22,new At(62,new dt(8,156),new dt(2,155))),new wt(25,8,18,6,16,new At(7,new dt(1,5))),new wt(26,8,32,6,14,new At(11,new dt(1,10))),new wt(27,12,26,10,24,new At(14,new dt(1,16))),new wt(28,12,36,10,16,new At(18,new dt(1,22))),new wt(29,16,36,14,16,new At(24,new dt(1,32))),new wt(30,16,48,14,22,new At(28,new dt(1,49)))]}}wt.VERSIONS=wt.buildVersions();class ur{constructor(e){const n=e.getHeight();if(n<8||n>144||n&1)throw new Q;this.version=ur.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Le(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const n=e.getHeight(),i=e.getWidth();return wt.getVersionForDimensions(n,i)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let n=0,i=4,l=0;const u=this.mappingBitMatrix.getHeight(),c=this.mappingBitMatrix.getWidth();let h=!1,m=!1,v=!1,I=!1;do if(i===u&&l===0&&!h)e[n++]=this.readCorner1(u,c)&255,i-=2,l+=2,h=!0;else if(i===u-2&&l===0&&c&3&&!m)e[n++]=this.readCorner2(u,c)&255,i-=2,l+=2,m=!0;else if(i===u+4&&l===2&&!(c&7)&&!v)e[n++]=this.readCorner3(u,c)&255,i-=2,l+=2,v=!0;else if(i===u-2&&l===0&&(c&7)===4&&!I)e[n++]=this.readCorner4(u,c)&255,i-=2,l+=2,I=!0;else{do i<u&&l>=0&&!this.readMappingMatrix.get(l,i)&&(e[n++]=this.readUtah(i,l,u,c)&255),i-=2,l+=2;while(i>=0&&l<c);i+=1,l+=3;do i>=0&&l<c&&!this.readMappingMatrix.get(l,i)&&(e[n++]=this.readUtah(i,l,u,c)&255),i+=2,l-=2;while(i<u&&l>=0);i+=3,l+=1}while(i<u||l<c);if(n!==this.version.getTotalCodewords())throw new Q;return e}readModule(e,n,i,l){return e<0&&(e+=i,n+=4-(i+4&7)),n<0&&(n+=l,e+=4-(l+4&7)),this.readMappingMatrix.set(n,e),this.mappingBitMatrix.get(n,e)}readUtah(e,n,i,l){let u=0;return this.readModule(e-2,n-2,i,l)&&(u|=1),u<<=1,this.readModule(e-2,n-1,i,l)&&(u|=1),u<<=1,this.readModule(e-1,n-2,i,l)&&(u|=1),u<<=1,this.readModule(e-1,n-1,i,l)&&(u|=1),u<<=1,this.readModule(e-1,n,i,l)&&(u|=1),u<<=1,this.readModule(e,n-2,i,l)&&(u|=1),u<<=1,this.readModule(e,n-1,i,l)&&(u|=1),u<<=1,this.readModule(e,n,i,l)&&(u|=1),u}readCorner1(e,n){let i=0;return this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,1,e,n)&&(i|=1),i<<=1,this.readModule(e-1,2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(2,n-1,e,n)&&(i|=1),i<<=1,this.readModule(3,n-1,e,n)&&(i|=1),i}readCorner2(e,n){let i=0;return this.readModule(e-3,0,e,n)&&(i|=1),i<<=1,this.readModule(e-2,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(0,n-4,e,n)&&(i|=1),i<<=1,this.readModule(0,n-3,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i}readCorner3(e,n){let i=0;return this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(0,n-3,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-3,e,n)&&(i|=1),i<<=1,this.readModule(1,n-2,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i}readCorner4(e,n){let i=0;return this.readModule(e-3,0,e,n)&&(i|=1),i<<=1,this.readModule(e-2,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(2,n-1,e,n)&&(i|=1),i<<=1,this.readModule(3,n-1,e,n)&&(i|=1),i}extractDataRegion(e){const n=this.version.getSymbolSizeRows(),i=this.version.getSymbolSizeColumns();if(e.getHeight()!==n)throw new T("Dimension of bitMatrix must match the version size");const l=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),c=n/l|0,h=i/u|0,m=c*l,v=h*u,I=new Le(v,m);for(let O=0;O<c;++O){const D=O*l;for(let V=0;V<h;++V){const G=V*u;for(let Y=0;Y<l;++Y){const $=O*(l+2)+1+Y,se=D+Y;for(let Ee=0;Ee<u;++Ee){const Se=V*(u+2)+1+Ee;if(e.get(Se,$)){const xe=G+Ee;I.set(xe,se)}}}}}return I}}class Fo{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n){const i=n.getECBlocks();let l=0;const u=i.getECBlocks();for(let Y of u)l+=Y.getCount();const c=new Array(l);let h=0;for(let Y of u)for(let $=0;$<Y.getCount();$++){const se=Y.getDataCodewords(),Ee=i.getECCodewords()+se;c[h++]=new Fo(se,new Uint8Array(Ee))}const v=c[0].codewords.length-i.getECCodewords(),I=v-1;let O=0;for(let Y=0;Y<I;Y++)for(let $=0;$<h;$++)c[$].codewords[Y]=e[O++];const D=n.getVersionNumber()===24,V=D?8:h;for(let Y=0;Y<V;Y++)c[Y].codewords[v-1]=e[O++];const G=c[0].codewords.length;for(let Y=v;Y<G;Y++)for(let $=0;$<h;$++){const se=D?($+8)%h:$,Ee=D&&se>7?Y-1:Y;c[se].codewords[Ee]=e[O++]}if(O!==e.length)throw new T;return c}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class jo{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new T(""+e);let n=0,i=this.bitOffset,l=this.byteOffset;const u=this.bytes;if(i>0){const c=8-i,h=e<c?e:c,m=c-h,v=255>>8-h<<m;n=(u[l]&v)>>m,e-=h,i+=h,i===8&&(i=0,l++)}if(e>0){for(;e>=8;)n=n<<8|u[l]&255,l++,e-=8;if(e>0){const c=8-e,h=255>>c<<c;n=n<<e|(u[l]&h)>>c,i+=e}}return this.bitOffset=i,this.byteOffset=l,n}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var xn;(function(_){_[_.PAD_ENCODE=0]="PAD_ENCODE",_[_.ASCII_ENCODE=1]="ASCII_ENCODE",_[_.C40_ENCODE=2]="C40_ENCODE",_[_.TEXT_ENCODE=3]="TEXT_ENCODE",_[_.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",_[_.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",_[_.BASE256_ENCODE=6]="BASE256_ENCODE"})(xn||(xn={}));class Cr{static decode(e){const n=new jo(e),i=new Oe,l=new Oe,u=new Array;let c=xn.ASCII_ENCODE;do if(c===xn.ASCII_ENCODE)c=this.decodeAsciiSegment(n,i,l);else{switch(c){case xn.C40_ENCODE:this.decodeC40Segment(n,i);break;case xn.TEXT_ENCODE:this.decodeTextSegment(n,i);break;case xn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,i);break;case xn.EDIFACT_ENCODE:this.decodeEdifactSegment(n,i);break;case xn.BASE256_ENCODE:this.decodeBase256Segment(n,i,u);break;default:throw new Q}c=xn.ASCII_ENCODE}while(c!==xn.PAD_ENCODE&&n.available()>0);return l.length()>0&&i.append(l.toString()),new Ne(e,i.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(e,n,i){let l=!1;do{let u=e.readBits(8);if(u===0)throw new Q;if(u<=128)return l&&(u+=128),n.append(String.fromCharCode(u-1)),xn.ASCII_ENCODE;if(u===129)return xn.PAD_ENCODE;if(u<=229){const c=u-130;c<10&&n.append("0"),n.append(""+c)}else switch(u){case 230:return xn.C40_ENCODE;case 231:return xn.BASE256_ENCODE;case 232:n.append("");break;case 233:case 234:break;case 235:l=!0;break;case 236:n.append("[)>05"),i.insert(0,"");break;case 237:n.append("[)>06"),i.insert(0,"");break;case 238:return xn.ANSIX12_ENCODE;case 239:return xn.TEXT_ENCODE;case 240:return xn.EDIFACT_ENCODE;case 241:break;default:if(u!==254||e.available()!==0)throw new Q;break}}while(e.available()>0);return xn.ASCII_ENCODE}static decodeC40Segment(e,n){let i=!1;const l=[];let u=0;do{if(e.available()===8)return;const c=e.readBits(8);if(c===254)return;this.parseTwoBytes(c,e.readBits(8),l);for(let h=0;h<3;h++){const m=l[h];switch(u){case 0:if(m<3)u=m+1;else if(m<this.C40_BASIC_SET_CHARS.length){const v=this.C40_BASIC_SET_CHARS[m];i?(n.append(String.fromCharCode(v.charCodeAt(0)+128)),i=!1):n.append(v)}else throw new Q;break;case 1:i?(n.append(String.fromCharCode(m+128)),i=!1):n.append(String.fromCharCode(m)),u=0;break;case 2:if(m<this.C40_SHIFT2_SET_CHARS.length){const v=this.C40_SHIFT2_SET_CHARS[m];i?(n.append(String.fromCharCode(v.charCodeAt(0)+128)),i=!1):n.append(v)}else switch(m){case 27:n.append("");break;case 30:i=!0;break;default:throw new Q}u=0;break;case 3:i?(n.append(String.fromCharCode(m+224)),i=!1):n.append(String.fromCharCode(m+96)),u=0;break;default:throw new Q}}}while(e.available()>0)}static decodeTextSegment(e,n){let i=!1,l=[],u=0;do{if(e.available()===8)return;const c=e.readBits(8);if(c===254)return;this.parseTwoBytes(c,e.readBits(8),l);for(let h=0;h<3;h++){const m=l[h];switch(u){case 0:if(m<3)u=m+1;else if(m<this.TEXT_BASIC_SET_CHARS.length){const v=this.TEXT_BASIC_SET_CHARS[m];i?(n.append(String.fromCharCode(v.charCodeAt(0)+128)),i=!1):n.append(v)}else throw new Q;break;case 1:i?(n.append(String.fromCharCode(m+128)),i=!1):n.append(String.fromCharCode(m)),u=0;break;case 2:if(m<this.TEXT_SHIFT2_SET_CHARS.length){const v=this.TEXT_SHIFT2_SET_CHARS[m];i?(n.append(String.fromCharCode(v.charCodeAt(0)+128)),i=!1):n.append(v)}else switch(m){case 27:n.append("");break;case 30:i=!0;break;default:throw new Q}u=0;break;case 3:if(m<this.TEXT_SHIFT3_SET_CHARS.length){const v=this.TEXT_SHIFT3_SET_CHARS[m];i?(n.append(String.fromCharCode(v.charCodeAt(0)+128)),i=!1):n.append(v),u=0}else throw new Q;break;default:throw new Q}}}while(e.available()>0)}static decodeAnsiX12Segment(e,n){const i=[];do{if(e.available()===8)return;const l=e.readBits(8);if(l===254)return;this.parseTwoBytes(l,e.readBits(8),i);for(let u=0;u<3;u++){const c=i[u];switch(c){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(c<14)n.append(String.fromCharCode(c+44));else if(c<40)n.append(String.fromCharCode(c+51));else throw new Q;break}}}while(e.available()>0)}static parseTwoBytes(e,n,i){let l=(e<<8)+n-1,u=Math.floor(l/1600);i[0]=u,l-=u*1600,u=Math.floor(l/40),i[1]=u,i[2]=l-u*40}static decodeEdifactSegment(e,n){do{if(e.available()<=16)return;for(let i=0;i<4;i++){let l=e.readBits(6);if(l===31){const u=8-e.getBitOffset();u!==8&&e.readBits(u);return}l&32||(l|=64),n.append(String.fromCharCode(l))}}while(e.available()>0)}static decodeBase256Segment(e,n,i){let l=1+e.getByteOffset();const u=this.unrandomize255State(e.readBits(8),l++);let c;if(u===0?c=e.available()/8|0:u<250?c=u:c=250*(u-249)+this.unrandomize255State(e.readBits(8),l++),c<0)throw new Q;const h=new Uint8Array(c);for(let m=0;m<c;m++){if(e.available()<8)throw new Q;h[m]=this.unrandomize255State(e.readBits(8),l++)}i.push(h);try{n.append(je.decode(h,be.ISO88591))}catch(m){throw new Ot("Platform does not support required encoding: "+m.message)}}static unrandomize255State(e,n){const i=149*n%255+1,l=e-i;return l>=0?l:l+256}}Cr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Cr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Cr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Cr.TEXT_SHIFT2_SET_CHARS=Cr.C40_SHIFT2_SET_CHARS,Cr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Js{constructor(){this.rsDecoder=new En(Ve.DATA_MATRIX_FIELD_256)}decode(e){const n=new ur(e),i=n.getVersion(),l=n.readCodewords(),u=Fo.getDataBlocks(l,i);let c=0;for(let v of u)c+=v.getNumDataCodewords();const h=new Uint8Array(c),m=u.length;for(let v=0;v<m;v++){const I=u[v],O=I.getCodewords(),D=I.getNumDataCodewords();this.correctErrors(O,D);for(let V=0;V<D;V++)h[V*m+v]=O[V]}return Cr.decode(h)}correctErrors(e,n){const i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-n)}catch{throw new k}for(let l=0;l<n;l++)e[l]=i[l]}}class Ht{constructor(e){this.image=e,this.rectangleDetector=new Be(this.image)}detect(){const e=this.rectangleDetector.detect();let n=this.detectSolid1(e);if(n=this.detectSolid2(n),n[3]=this.correctTopRight(n),!n[3])throw new J;n=this.shiftToModuleCenter(n);const i=n[0],l=n[1],u=n[2],c=n[3];let h=this.transitionsBetween(i,c)+1,m=this.transitionsBetween(u,c)+1;(h&1)===1&&(h+=1),(m&1)===1&&(m+=1),4*h<7*m&&4*m<7*h&&(h=m=Math.max(h,m));let v=Ht.sampleGrid(this.image,i,l,u,c,h,m);return new gn(v,[i,l,u,c])}static shiftPoint(e,n,i){let l=(n.getX()-e.getX())/(i+1),u=(n.getY()-e.getY())/(i+1);return new Pe(e.getX()+l,e.getY()+u)}static moveAway(e,n,i){let l=e.getX(),u=e.getY();return l<n?l-=1:l+=1,u<i?u-=1:u+=1,new Pe(l,u)}detectSolid1(e){let n=e[0],i=e[1],l=e[3],u=e[2],c=this.transitionsBetween(n,i),h=this.transitionsBetween(i,l),m=this.transitionsBetween(l,u),v=this.transitionsBetween(u,n),I=c,O=[u,n,i,l];return I>h&&(I=h,O[0]=n,O[1]=i,O[2]=l,O[3]=u),I>m&&(I=m,O[0]=i,O[1]=l,O[2]=u,O[3]=n),I>v&&(O[0]=l,O[1]=u,O[2]=n,O[3]=i),O}detectSolid2(e){let n=e[0],i=e[1],l=e[2],u=e[3],c=this.transitionsBetween(n,u),h=Ht.shiftPoint(i,l,(c+1)*4),m=Ht.shiftPoint(l,i,(c+1)*4),v=this.transitionsBetween(h,n),I=this.transitionsBetween(m,u);return v<I?(e[0]=n,e[1]=i,e[2]=l,e[3]=u):(e[0]=i,e[1]=l,e[2]=u,e[3]=n),e}correctTopRight(e){let n=e[0],i=e[1],l=e[2],u=e[3],c=this.transitionsBetween(n,u),h=this.transitionsBetween(i,u),m=Ht.shiftPoint(n,i,(h+1)*4),v=Ht.shiftPoint(l,i,(c+1)*4);c=this.transitionsBetween(m,u),h=this.transitionsBetween(v,u);let I=new Pe(u.getX()+(l.getX()-i.getX())/(c+1),u.getY()+(l.getY()-i.getY())/(c+1)),O=new Pe(u.getX()+(n.getX()-i.getX())/(h+1),u.getY()+(n.getY()-i.getY())/(h+1));if(!this.isValid(I))return this.isValid(O)?O:null;if(!this.isValid(O))return I;let D=this.transitionsBetween(m,I)+this.transitionsBetween(v,I),V=this.transitionsBetween(m,O)+this.transitionsBetween(v,O);return D>V?I:O}shiftToModuleCenter(e){let n=e[0],i=e[1],l=e[2],u=e[3],c=this.transitionsBetween(n,u)+1,h=this.transitionsBetween(l,u)+1,m=Ht.shiftPoint(n,i,h*4),v=Ht.shiftPoint(l,i,c*4);c=this.transitionsBetween(m,u)+1,h=this.transitionsBetween(v,u)+1,(c&1)===1&&(c+=1),(h&1)===1&&(h+=1);let I=(n.getX()+i.getX()+l.getX()+u.getX())/4,O=(n.getY()+i.getY()+l.getY()+u.getY())/4;n=Ht.moveAway(n,I,O),i=Ht.moveAway(i,I,O),l=Ht.moveAway(l,I,O),u=Ht.moveAway(u,I,O);let D,V;return m=Ht.shiftPoint(n,i,h*4),m=Ht.shiftPoint(m,u,c*4),D=Ht.shiftPoint(i,n,h*4),D=Ht.shiftPoint(D,l,c*4),v=Ht.shiftPoint(l,u,h*4),v=Ht.shiftPoint(v,i,c*4),V=Ht.shiftPoint(u,l,h*4),V=Ht.shiftPoint(V,n,c*4),[m,D,v,V]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,n,i,l,u,c,h){return Tt.getInstance().sampleGrid(e,c,h,.5,.5,c-.5,.5,c-.5,h-.5,.5,h-.5,n.getX(),n.getY(),u.getX(),u.getY(),l.getX(),l.getY(),i.getX(),i.getY())}transitionsBetween(e,n){let i=Math.trunc(e.getX()),l=Math.trunc(e.getY()),u=Math.trunc(n.getX()),c=Math.trunc(n.getY()),h=Math.abs(c-l)>Math.abs(u-i);if(h){let Y=i;i=l,l=Y,Y=u,u=c,c=Y}let m=Math.abs(u-i),v=Math.abs(c-l),I=-m/2,O=l<c?1:-1,D=i<u?1:-1,V=0,G=this.image.get(h?l:i,h?i:l);for(let Y=i,$=l;Y!==u;Y+=D){let se=this.image.get(h?$:Y,h?Y:$);if(se!==G&&(V++,G=se),I+=v,I>0){if($===c)break;$+=O,I-=m}}return V}}class Er{constructor(){this.decoder=new Js}decode(e,n=null){let i,l;if(n!=null&&n.has(ie.PURE_BARCODE)){const v=Er.extractPureBits(e.getBlackMatrix());i=this.decoder.decode(v),l=Er.NO_POINTS}else{const v=new Ht(e.getBlackMatrix()).detect();i=this.decoder.decode(v.getBits()),l=v.getPoints()}const u=i.getRawBytes(),c=new Ue(i.getText(),u,8*u.length,l,ve.DATA_MATRIX,j.currentTimeMillis()),h=i.getByteSegments();h!=null&&c.putMetadata(Te.BYTE_SEGMENTS,h);const m=i.getECLevel();return m!=null&&c.putMetadata(Te.ERROR_CORRECTION_LEVEL,m),c}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(n==null||i==null)throw new J;const l=this.moduleSize(n,e);let u=n[1];const c=i[1];let h=n[0];const v=(i[0]-h+1)/l,I=(c-u+1)/l;if(v<=0||I<=0)throw new J;const O=l/2;u+=O,h+=O;const D=new Le(v,I);for(let V=0;V<I;V++){const G=u+V*l;for(let Y=0;Y<v;Y++)e.get(h+Y*l,G)&&D.set(Y,V)}return D}static moduleSize(e,n){const i=n.getWidth();let l=e[0];const u=e[1];for(;l<i&&n.get(l,u);)l++;if(l===i)throw new J;const c=l-e[0];if(c===0)throw new J;return c}}Er.NO_POINTS=[];class ku extends We{constructor(e=500){super(new Er,e)}}var Ui;(function(_){_[_.L=0]="L",_[_.M=1]="M",_[_.Q=2]="Q",_[_.H=3]="H"})(Ui||(Ui={}));class Bt{constructor(e,n,i){this.value=e,this.stringValue=n,this.bits=i,Bt.FOR_BITS.set(i,this),Bt.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return Bt.L;case"M":return Bt.M;case"Q":return Bt.Q;case"H":return Bt.H;default:throw new S(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof Bt))return!1;const n=e;return this.value===n.value}static forBits(e){if(e<0||e>=Bt.FOR_BITS.size)throw new T;return Bt.FOR_BITS.get(e)}}Bt.FOR_BITS=new Map,Bt.FOR_VALUE=new Map,Bt.L=new Bt(Ui.L,"L",1),Bt.M=new Bt(Ui.M,"M",0),Bt.Q=new Bt(Ui.Q,"Q",3),Bt.H=new Bt(Ui.H,"H",2);class Rn{constructor(e){this.errorCorrectionLevel=Bt.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,n){return W.bitCount(e^n)}static decodeFormatInformation(e,n){const i=Rn.doDecodeFormatInformation(e,n);return i!==null?i:Rn.doDecodeFormatInformation(e^Rn.FORMAT_INFO_MASK_QR,n^Rn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,n){let i=Number.MAX_SAFE_INTEGER,l=0;for(const u of Rn.FORMAT_INFO_DECODE_LOOKUP){const c=u[0];if(c===e||c===n)return new Rn(u[1]);let h=Rn.numBitsDiffering(e,c);h<i&&(l=u[1],i=h),e!==n&&(h=Rn.numBitsDiffering(n,c),h<i&&(l=u[1],i=h))}return i<=3?new Rn(l):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof Rn))return!1;const n=e;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask}}Rn.FORMAT_INFO_MASK_QR=21522,Rn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class te{constructor(e,...n){this.ecCodewordsPerBlock=e,this.ecBlocks=n}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const n=this.ecBlocks;for(const i of n)e+=i.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class F{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ge{constructor(e,n,...i){this.versionNumber=e,this.alignmentPatternCenters=n,this.ecBlocks=i;let l=0;const u=i[0].getECCodewordsPerBlock(),c=i[0].getECBlocks();for(const h of c)l+=h.getCount()*(h.getDataCodewords()+u);this.totalCodewords=l}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new Q;try{return this.getVersionForNumber((e-17)/4)}catch{throw new Q}}static getVersionForNumber(e){if(e<1||e>40)throw new T;return Ge.VERSIONS[e-1]}static decodeVersionInformation(e){let n=Number.MAX_SAFE_INTEGER,i=0;for(let l=0;l<Ge.VERSION_DECODE_INFO.length;l++){const u=Ge.VERSION_DECODE_INFO[l];if(u===e)return Ge.getVersionForNumber(l+7);const c=Rn.numBitsDiffering(e,u);c<n&&(i=l+7,n=c)}return n<=3?Ge.getVersionForNumber(i):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),n=new Le(e);n.setRegion(0,0,9,9),n.setRegion(e-8,0,8,9),n.setRegion(0,e-8,9,8);const i=this.alignmentPatternCenters.length;for(let l=0;l<i;l++){const u=this.alignmentPatternCenters[l]-2;for(let c=0;c<i;c++)l===0&&(c===0||c===i-1)||l===i-1&&c===0||n.setRegion(this.alignmentPatternCenters[c]-2,u,5,5)}return n.setRegion(6,9,1,e-17),n.setRegion(9,6,e-17,1),this.versionNumber>6&&(n.setRegion(e-11,0,3,6),n.setRegion(0,e-11,6,3)),n}toString(){return""+this.versionNumber}}Ge.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ge.VERSIONS=[new Ge(1,new Int32Array(0),new te(7,new F(1,19)),new te(10,new F(1,16)),new te(13,new F(1,13)),new te(17,new F(1,9))),new Ge(2,Int32Array.from([6,18]),new te(10,new F(1,34)),new te(16,new F(1,28)),new te(22,new F(1,22)),new te(28,new F(1,16))),new Ge(3,Int32Array.from([6,22]),new te(15,new F(1,55)),new te(26,new F(1,44)),new te(18,new F(2,17)),new te(22,new F(2,13))),new Ge(4,Int32Array.from([6,26]),new te(20,new F(1,80)),new te(18,new F(2,32)),new te(26,new F(2,24)),new te(16,new F(4,9))),new Ge(5,Int32Array.from([6,30]),new te(26,new F(1,108)),new te(24,new F(2,43)),new te(18,new F(2,15),new F(2,16)),new te(22,new F(2,11),new F(2,12))),new Ge(6,Int32Array.from([6,34]),new te(18,new F(2,68)),new te(16,new F(4,27)),new te(24,new F(4,19)),new te(28,new F(4,15))),new Ge(7,Int32Array.from([6,22,38]),new te(20,new F(2,78)),new te(18,new F(4,31)),new te(18,new F(2,14),new F(4,15)),new te(26,new F(4,13),new F(1,14))),new Ge(8,Int32Array.from([6,24,42]),new te(24,new F(2,97)),new te(22,new F(2,38),new F(2,39)),new te(22,new F(4,18),new F(2,19)),new te(26,new F(4,14),new F(2,15))),new Ge(9,Int32Array.from([6,26,46]),new te(30,new F(2,116)),new te(22,new F(3,36),new F(2,37)),new te(20,new F(4,16),new F(4,17)),new te(24,new F(4,12),new F(4,13))),new Ge(10,Int32Array.from([6,28,50]),new te(18,new F(2,68),new F(2,69)),new te(26,new F(4,43),new F(1,44)),new te(24,new F(6,19),new F(2,20)),new te(28,new F(6,15),new F(2,16))),new Ge(11,Int32Array.from([6,30,54]),new te(20,new F(4,81)),new te(30,new F(1,50),new F(4,51)),new te(28,new F(4,22),new F(4,23)),new te(24,new F(3,12),new F(8,13))),new Ge(12,Int32Array.from([6,32,58]),new te(24,new F(2,92),new F(2,93)),new te(22,new F(6,36),new F(2,37)),new te(26,new F(4,20),new F(6,21)),new te(28,new F(7,14),new F(4,15))),new Ge(13,Int32Array.from([6,34,62]),new te(26,new F(4,107)),new te(22,new F(8,37),new F(1,38)),new te(24,new F(8,20),new F(4,21)),new te(22,new F(12,11),new F(4,12))),new Ge(14,Int32Array.from([6,26,46,66]),new te(30,new F(3,115),new F(1,116)),new te(24,new F(4,40),new F(5,41)),new te(20,new F(11,16),new F(5,17)),new te(24,new F(11,12),new F(5,13))),new Ge(15,Int32Array.from([6,26,48,70]),new te(22,new F(5,87),new F(1,88)),new te(24,new F(5,41),new F(5,42)),new te(30,new F(5,24),new F(7,25)),new te(24,new F(11,12),new F(7,13))),new Ge(16,Int32Array.from([6,26,50,74]),new te(24,new F(5,98),new F(1,99)),new te(28,new F(7,45),new F(3,46)),new te(24,new F(15,19),new F(2,20)),new te(30,new F(3,15),new F(13,16))),new Ge(17,Int32Array.from([6,30,54,78]),new te(28,new F(1,107),new F(5,108)),new te(28,new F(10,46),new F(1,47)),new te(28,new F(1,22),new F(15,23)),new te(28,new F(2,14),new F(17,15))),new Ge(18,Int32Array.from([6,30,56,82]),new te(30,new F(5,120),new F(1,121)),new te(26,new F(9,43),new F(4,44)),new te(28,new F(17,22),new F(1,23)),new te(28,new F(2,14),new F(19,15))),new Ge(19,Int32Array.from([6,30,58,86]),new te(28,new F(3,113),new F(4,114)),new te(26,new F(3,44),new F(11,45)),new te(26,new F(17,21),new F(4,22)),new te(26,new F(9,13),new F(16,14))),new Ge(20,Int32Array.from([6,34,62,90]),new te(28,new F(3,107),new F(5,108)),new te(26,new F(3,41),new F(13,42)),new te(30,new F(15,24),new F(5,25)),new te(28,new F(15,15),new F(10,16))),new Ge(21,Int32Array.from([6,28,50,72,94]),new te(28,new F(4,116),new F(4,117)),new te(26,new F(17,42)),new te(28,new F(17,22),new F(6,23)),new te(30,new F(19,16),new F(6,17))),new Ge(22,Int32Array.from([6,26,50,74,98]),new te(28,new F(2,111),new F(7,112)),new te(28,new F(17,46)),new te(30,new F(7,24),new F(16,25)),new te(24,new F(34,13))),new Ge(23,Int32Array.from([6,30,54,78,102]),new te(30,new F(4,121),new F(5,122)),new te(28,new F(4,47),new F(14,48)),new te(30,new F(11,24),new F(14,25)),new te(30,new F(16,15),new F(14,16))),new Ge(24,Int32Array.from([6,28,54,80,106]),new te(30,new F(6,117),new F(4,118)),new te(28,new F(6,45),new F(14,46)),new te(30,new F(11,24),new F(16,25)),new te(30,new F(30,16),new F(2,17))),new Ge(25,Int32Array.from([6,32,58,84,110]),new te(26,new F(8,106),new F(4,107)),new te(28,new F(8,47),new F(13,48)),new te(30,new F(7,24),new F(22,25)),new te(30,new F(22,15),new F(13,16))),new Ge(26,Int32Array.from([6,30,58,86,114]),new te(28,new F(10,114),new F(2,115)),new te(28,new F(19,46),new F(4,47)),new te(28,new F(28,22),new F(6,23)),new te(30,new F(33,16),new F(4,17))),new Ge(27,Int32Array.from([6,34,62,90,118]),new te(30,new F(8,122),new F(4,123)),new te(28,new F(22,45),new F(3,46)),new te(30,new F(8,23),new F(26,24)),new te(30,new F(12,15),new F(28,16))),new Ge(28,Int32Array.from([6,26,50,74,98,122]),new te(30,new F(3,117),new F(10,118)),new te(28,new F(3,45),new F(23,46)),new te(30,new F(4,24),new F(31,25)),new te(30,new F(11,15),new F(31,16))),new Ge(29,Int32Array.from([6,30,54,78,102,126]),new te(30,new F(7,116),new F(7,117)),new te(28,new F(21,45),new F(7,46)),new te(30,new F(1,23),new F(37,24)),new te(30,new F(19,15),new F(26,16))),new Ge(30,Int32Array.from([6,26,52,78,104,130]),new te(30,new F(5,115),new F(10,116)),new te(28,new F(19,47),new F(10,48)),new te(30,new F(15,24),new F(25,25)),new te(30,new F(23,15),new F(25,16))),new Ge(31,Int32Array.from([6,30,56,82,108,134]),new te(30,new F(13,115),new F(3,116)),new te(28,new F(2,46),new F(29,47)),new te(30,new F(42,24),new F(1,25)),new te(30,new F(23,15),new F(28,16))),new Ge(32,Int32Array.from([6,34,60,86,112,138]),new te(30,new F(17,115)),new te(28,new F(10,46),new F(23,47)),new te(30,new F(10,24),new F(35,25)),new te(30,new F(19,15),new F(35,16))),new Ge(33,Int32Array.from([6,30,58,86,114,142]),new te(30,new F(17,115),new F(1,116)),new te(28,new F(14,46),new F(21,47)),new te(30,new F(29,24),new F(19,25)),new te(30,new F(11,15),new F(46,16))),new Ge(34,Int32Array.from([6,34,62,90,118,146]),new te(30,new F(13,115),new F(6,116)),new te(28,new F(14,46),new F(23,47)),new te(30,new F(44,24),new F(7,25)),new te(30,new F(59,16),new F(1,17))),new Ge(35,Int32Array.from([6,30,54,78,102,126,150]),new te(30,new F(12,121),new F(7,122)),new te(28,new F(12,47),new F(26,48)),new te(30,new F(39,24),new F(14,25)),new te(30,new F(22,15),new F(41,16))),new Ge(36,Int32Array.from([6,24,50,76,102,128,154]),new te(30,new F(6,121),new F(14,122)),new te(28,new F(6,47),new F(34,48)),new te(30,new F(46,24),new F(10,25)),new te(30,new F(2,15),new F(64,16))),new Ge(37,Int32Array.from([6,28,54,80,106,132,158]),new te(30,new F(17,122),new F(4,123)),new te(28,new F(29,46),new F(14,47)),new te(30,new F(49,24),new F(10,25)),new te(30,new F(24,15),new F(46,16))),new Ge(38,Int32Array.from([6,32,58,84,110,136,162]),new te(30,new F(4,122),new F(18,123)),new te(28,new F(13,46),new F(32,47)),new te(30,new F(48,24),new F(14,25)),new te(30,new F(42,15),new F(32,16))),new Ge(39,Int32Array.from([6,26,54,82,110,138,166]),new te(30,new F(20,117),new F(4,118)),new te(28,new F(40,47),new F(7,48)),new te(30,new F(43,24),new F(22,25)),new te(30,new F(10,15),new F(67,16))),new Ge(40,Int32Array.from([6,30,58,86,114,142,170]),new te(30,new F(19,118),new F(6,119)),new te(28,new F(18,47),new F(31,48)),new te(30,new F(34,24),new F(34,25)),new te(30,new F(20,15),new F(61,16)))];var cn;(function(_){_[_.DATA_MASK_000=0]="DATA_MASK_000",_[_.DATA_MASK_001=1]="DATA_MASK_001",_[_.DATA_MASK_010=2]="DATA_MASK_010",_[_.DATA_MASK_011=3]="DATA_MASK_011",_[_.DATA_MASK_100=4]="DATA_MASK_100",_[_.DATA_MASK_101=5]="DATA_MASK_101",_[_.DATA_MASK_110=6]="DATA_MASK_110",_[_.DATA_MASK_111=7]="DATA_MASK_111"})(cn||(cn={}));class ht{constructor(e,n){this.value=e,this.isMasked=n}unmaskBitMatrix(e,n){for(let i=0;i<n;i++)for(let l=0;l<n;l++)this.isMasked(i,l)&&e.flip(l,i)}}ht.values=new Map([[cn.DATA_MASK_000,new ht(cn.DATA_MASK_000,(_,e)=>(_+e&1)===0)],[cn.DATA_MASK_001,new ht(cn.DATA_MASK_001,(_,e)=>(_&1)===0)],[cn.DATA_MASK_010,new ht(cn.DATA_MASK_010,(_,e)=>e%3===0)],[cn.DATA_MASK_011,new ht(cn.DATA_MASK_011,(_,e)=>(_+e)%3===0)],[cn.DATA_MASK_100,new ht(cn.DATA_MASK_100,(_,e)=>(Math.floor(_/2)+Math.floor(e/3)&1)===0)],[cn.DATA_MASK_101,new ht(cn.DATA_MASK_101,(_,e)=>_*e%6===0)],[cn.DATA_MASK_110,new ht(cn.DATA_MASK_110,(_,e)=>_*e%6<3)],[cn.DATA_MASK_111,new ht(cn.DATA_MASK_111,(_,e)=>(_+e+_*e%3&1)===0)]]);class qa{constructor(e){const n=e.getHeight();if(n<21||(n&3)!==1)throw new Q;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let u=0;u<6;u++)e=this.copyBit(u,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let u=5;u>=0;u--)e=this.copyBit(8,u,e);const n=this.bitMatrix.getHeight();let i=0;const l=n-7;for(let u=n-1;u>=l;u--)i=this.copyBit(8,u,i);for(let u=n-8;u<n;u++)i=this.copyBit(u,8,i);if(this.parsedFormatInfo=Rn.decodeFormatInformation(e,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Q}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),n=Math.floor((e-17)/4);if(n<=6)return Ge.getVersionForNumber(n);let i=0;const l=e-11;for(let c=5;c>=0;c--)for(let h=e-9;h>=l;h--)i=this.copyBit(h,c,i);let u=Ge.decodeVersionInformation(i);if(u!==null&&u.getDimensionForVersion()===e)return this.parsedVersion=u,u;i=0;for(let c=5;c>=0;c--)for(let h=e-9;h>=l;h--)i=this.copyBit(c,h,i);if(u=Ge.decodeVersionInformation(i),u!==null&&u.getDimensionForVersion()===e)return this.parsedVersion=u,u;throw new Q}copyBit(e,n,i){return(this.isMirror?this.bitMatrix.get(n,e):this.bitMatrix.get(e,n))?i<<1|1:i<<1}readCodewords(){const e=this.readFormatInformation(),n=this.readVersion(),i=ht.values.get(e.getDataMask()),l=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,l);const u=n.buildFunctionPattern();let c=!0;const h=new Uint8Array(n.getTotalCodewords());let m=0,v=0,I=0;for(let O=l-1;O>0;O-=2){O===6&&O--;for(let D=0;D<l;D++){const V=c?l-1-D:D;for(let G=0;G<2;G++)u.get(O-G,V)||(I++,v<<=1,this.bitMatrix.get(O-G,V)&&(v|=1),I===8&&(h[m++]=v,I=0,v=0))}c=!c}if(m!==n.getTotalCodewords())throw new Q;return h}remask(){if(this.parsedFormatInfo===null)return;const e=ht.values[this.parsedFormatInfo.getDataMask()],n=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,n)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let n=0,i=e.getWidth();n<i;n++)for(let l=n+1,u=e.getHeight();l<u;l++)e.get(n,l)!==e.get(l,n)&&(e.flip(l,n),e.flip(n,l))}}class eo{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n,i){if(e.length!==n.getTotalCodewords())throw new T;const l=n.getECBlocksForLevel(i);let u=0;const c=l.getECBlocks();for(const G of c)u+=G.getCount();const h=new Array(u);let m=0;for(const G of c)for(let Y=0;Y<G.getCount();Y++){const $=G.getDataCodewords(),se=l.getECCodewordsPerBlock()+$;h[m++]=new eo($,new Uint8Array(se))}const v=h[0].codewords.length;let I=h.length-1;for(;I>=0&&h[I].codewords.length!==v;)I--;I++;const O=v-l.getECCodewordsPerBlock();let D=0;for(let G=0;G<O;G++)for(let Y=0;Y<m;Y++)h[Y].codewords[G]=e[D++];for(let G=I;G<m;G++)h[G].codewords[O]=e[D++];const V=h[0].codewords.length;for(let G=O;G<V;G++)for(let Y=0;Y<m;Y++){const $=Y<I?G:G+1;h[Y].codewords[$]=e[D++]}return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var qn;(function(_){_[_.TERMINATOR=0]="TERMINATOR",_[_.NUMERIC=1]="NUMERIC",_[_.ALPHANUMERIC=2]="ALPHANUMERIC",_[_.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",_[_.BYTE=4]="BYTE",_[_.ECI=5]="ECI",_[_.KANJI=6]="KANJI",_[_.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",_[_.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",_[_.HANZI=9]="HANZI"})(qn||(qn={}));class Ye{constructor(e,n,i,l){this.value=e,this.stringValue=n,this.characterCountBitsForVersions=i,this.bits=l,Ye.FOR_BITS.set(l,this),Ye.FOR_VALUE.set(e,this)}static forBits(e){const n=Ye.FOR_BITS.get(e);if(n===void 0)throw new T;return n}getCharacterCountBits(e){const n=e.getVersionNumber();let i;return n<=9?i=0:n<=26?i=1:i=2,this.characterCountBitsForVersions[i]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof Ye))return!1;const n=e;return this.value===n.value}toString(){return this.stringValue}}Ye.FOR_BITS=new Map,Ye.FOR_VALUE=new Map,Ye.TERMINATOR=new Ye(qn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ye.NUMERIC=new Ye(qn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ye.ALPHANUMERIC=new Ye(qn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ye.STRUCTURED_APPEND=new Ye(qn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ye.BYTE=new Ye(qn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ye.ECI=new Ye(qn.ECI,"ECI",Int32Array.from([0,0,0]),7),Ye.KANJI=new Ye(qn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ye.FNC1_FIRST_POSITION=new Ye(qn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ye.FNC1_SECOND_POSITION=new Ye(qn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ye.HANZI=new Ye(qn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Gt{static decode(e,n,i,l){const u=new jo(e);let c=new Oe;const h=new Array;let m=-1,v=-1;try{let I=null,O=!1,D;do{if(u.available()<4)D=Ye.TERMINATOR;else{const V=u.readBits(4);D=Ye.forBits(V)}switch(D){case Ye.TERMINATOR:break;case Ye.FNC1_FIRST_POSITION:case Ye.FNC1_SECOND_POSITION:O=!0;break;case Ye.STRUCTURED_APPEND:if(u.available()<16)throw new Q;m=u.readBits(8),v=u.readBits(8);break;case Ye.ECI:const V=Gt.parseECIValue(u);if(I=q.getCharacterSetECIByValue(V),I===null)throw new Q;break;case Ye.HANZI:const G=u.readBits(4),Y=u.readBits(D.getCharacterCountBits(n));G===Gt.GB2312_SUBSET&&Gt.decodeHanziSegment(u,c,Y);break;default:const $=u.readBits(D.getCharacterCountBits(n));switch(D){case Ye.NUMERIC:Gt.decodeNumericSegment(u,c,$);break;case Ye.ALPHANUMERIC:Gt.decodeAlphanumericSegment(u,c,$,O);break;case Ye.BYTE:Gt.decodeByteSegment(u,c,$,I,h,l);break;case Ye.KANJI:Gt.decodeKanjiSegment(u,c,$);break;default:throw new Q}break}}while(D!==Ye.TERMINATOR)}catch{throw new Q}return new Ne(e,c.toString(),h.length===0?null:h,i===null?null:i.toString(),m,v)}static decodeHanziSegment(e,n,i){if(i*13>e.available())throw new Q;const l=new Uint8Array(2*i);let u=0;for(;i>0;){const c=e.readBits(13);let h=c/96<<8&4294967295|c%96;h<959?h+=41377:h+=42657,l[u]=h>>8&255,l[u+1]=h&255,u+=2,i--}try{n.append(je.decode(l,be.GB2312))}catch(c){throw new Q(c)}}static decodeKanjiSegment(e,n,i){if(i*13>e.available())throw new Q;const l=new Uint8Array(2*i);let u=0;for(;i>0;){const c=e.readBits(13);let h=c/192<<8&4294967295|c%192;h<7936?h+=33088:h+=49472,l[u]=h>>8,l[u+1]=h,u+=2,i--}try{n.append(je.decode(l,be.SHIFT_JIS))}catch(c){throw new Q(c)}}static decodeByteSegment(e,n,i,l,u,c){if(8*i>e.available())throw new Q;const h=new Uint8Array(i);for(let v=0;v<i;v++)h[v]=e.readBits(8);let m;l===null?m=be.guessEncoding(h,c):m=l.getName();try{n.append(je.decode(h,m))}catch(v){throw new Q(v)}u.push(h)}static toAlphaNumericChar(e){if(e>=Gt.ALPHANUMERIC_CHARS.length)throw new Q;return Gt.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,n,i,l){const u=n.length();for(;i>1;){if(e.available()<11)throw new Q;const c=e.readBits(11);n.append(Gt.toAlphaNumericChar(Math.floor(c/45))),n.append(Gt.toAlphaNumericChar(c%45)),i-=2}if(i===1){if(e.available()<6)throw new Q;n.append(Gt.toAlphaNumericChar(e.readBits(6)))}if(l)for(let c=u;c<n.length();c++)n.charAt(c)==="%"&&(c<n.length()-1&&n.charAt(c+1)==="%"?n.deleteCharAt(c+1):n.setCharAt(c,""))}static decodeNumericSegment(e,n,i){for(;i>=3;){if(e.available()<10)throw new Q;const l=e.readBits(10);if(l>=1e3)throw new Q;n.append(Gt.toAlphaNumericChar(Math.floor(l/100))),n.append(Gt.toAlphaNumericChar(Math.floor(l/10)%10)),n.append(Gt.toAlphaNumericChar(l%10)),i-=3}if(i===2){if(e.available()<7)throw new Q;const l=e.readBits(7);if(l>=100)throw new Q;n.append(Gt.toAlphaNumericChar(Math.floor(l/10))),n.append(Gt.toAlphaNumericChar(l%10))}else if(i===1){if(e.available()<4)throw new Q;const l=e.readBits(4);if(l>=10)throw new Q;n.append(Gt.toAlphaNumericChar(l))}}static parseECIValue(e){const n=e.readBits(8);if(!(n&128))return n&127;if((n&192)===128){const i=e.readBits(8);return(n&63)<<8&4294967295|i}if((n&224)===192){const i=e.readBits(16);return(n&31)<<16&4294967295|i}throw new Q}}Gt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Gt.GB2312_SUBSET=1;class Vo{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const n=e[0];e[0]=e[2],e[2]=n}}class Uo{constructor(){this.rsDecoder=new En(Ve.QR_CODE_FIELD_256)}decodeBooleanArray(e,n){return this.decodeBitMatrix(Le.parseFromBooleanArray(e),n)}decodeBitMatrix(e,n){const i=new qa(e);let l=null;try{return this.decodeBitMatrixParser(i,n)}catch(u){l=u}try{i.remask(),i.setMirror(!0),i.readVersion(),i.readFormatInformation(),i.mirror();const u=this.decodeBitMatrixParser(i,n);return u.setOther(new Vo(!0)),u}catch(u){throw l!==null?l:u}}decodeBitMatrixParser(e,n){const i=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),c=eo.getDataBlocks(u,i,l);let h=0;for(const I of c)h+=I.getNumDataCodewords();const m=new Uint8Array(h);let v=0;for(const I of c){const O=I.getCodewords(),D=I.getNumDataCodewords();this.correctErrors(O,D);for(let V=0;V<D;V++)m[v++]=O[V]}return Gt.decode(m,i,l,n)}correctErrors(e,n){const i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-n)}catch{throw new k}for(let l=0;l<n;l++)e[l]=i[l]}}class zi extends Pe{constructor(e,n,i){super(e,n),this.estimatedModuleSize=i}aboutEquals(e,n,i){if(Math.abs(n-this.getY())<=e&&Math.abs(i-this.getX())<=e){const l=Math.abs(e-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(e,n,i){const l=(this.getX()+n)/2,u=(this.getY()+e)/2,c=(this.estimatedModuleSize+i)/2;return new zi(l,u,c)}}class Ar{constructor(e,n,i,l,u,c,h){this.image=e,this.startX=n,this.startY=i,this.width=l,this.height=u,this.moduleSize=c,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,n=this.height,i=this.width,l=e+i,u=this.startY+n/2,c=new Int32Array(3),h=this.image;for(let m=0;m<n;m++){const v=u+(m&1?-Math.floor((m+1)/2):Math.floor((m+1)/2));c[0]=0,c[1]=0,c[2]=0;let I=e;for(;I<l&&!h.get(I,v);)I++;let O=0;for(;I<l;){if(h.get(I,v))if(O===1)c[1]++;else if(O===2){if(this.foundPatternCross(c)){const D=this.handlePossibleCenter(c,v,I);if(D!==null)return D}c[0]=c[2],c[1]=1,c[2]=0,O=1}else c[++O]++;else O===1&&O++,c[O]++;I++}if(this.foundPatternCross(c)){const D=this.handlePossibleCenter(c,v,l);if(D!==null)return D}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new J}static centerFromEnd(e,n){return n-e[2]-e[1]/2}foundPatternCross(e){const n=this.moduleSize,i=n/2;for(let l=0;l<3;l++)if(Math.abs(n-e[l])>=i)return!1;return!0}crossCheckVertical(e,n,i,l){const u=this.image,c=u.getHeight(),h=this.crossCheckStateCount;h[0]=0,h[1]=0,h[2]=0;let m=e;for(;m>=0&&u.get(n,m)&&h[1]<=i;)h[1]++,m--;if(m<0||h[1]>i)return NaN;for(;m>=0&&!u.get(n,m)&&h[0]<=i;)h[0]++,m--;if(h[0]>i)return NaN;for(m=e+1;m<c&&u.get(n,m)&&h[1]<=i;)h[1]++,m++;if(m===c||h[1]>i)return NaN;for(;m<c&&!u.get(n,m)&&h[2]<=i;)h[2]++,m++;if(h[2]>i)return NaN;const v=h[0]+h[1]+h[2];return 5*Math.abs(v-l)>=2*l?NaN:this.foundPatternCross(h)?Ar.centerFromEnd(h,m):NaN}handlePossibleCenter(e,n,i){const l=e[0]+e[1]+e[2],u=Ar.centerFromEnd(e,i),c=this.crossCheckVertical(n,u,2*e[1],l);if(!isNaN(c)){const h=(e[0]+e[1]+e[2])/3;for(const v of this.possibleCenters)if(v.aboutEquals(h,c,u))return v.combineEstimate(c,u,h);const m=new zi(u,c,h);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null}}class _r extends Pe{constructor(e,n,i,l){super(e,n),this.estimatedModuleSize=i,this.count=l,l===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,n,i){if(Math.abs(n-this.getY())<=e&&Math.abs(i-this.getX())<=e){const l=Math.abs(e-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(e,n,i){const l=this.count+1,u=(this.count*this.getX()+n)/l,c=(this.count*this.getY()+e)/l,h=(this.count*this.estimatedModuleSize+i)/l;return new _r(u,c,h,l)}}class ni{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Qt{constructor(e,n){this.image=e,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const n=e!=null&&e.get(ie.TRY_HARDER)!==void 0,i=e!=null&&e.get(ie.PURE_BARCODE)!==void 0,l=this.image,u=l.getHeight(),c=l.getWidth();let h=Math.floor(3*u/(4*Qt.MAX_MODULES));(h<Qt.MIN_SKIP||n)&&(h=Qt.MIN_SKIP);let m=!1;const v=new Int32Array(5);for(let O=h-1;O<u&&!m;O+=h){v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0;let D=0;for(let V=0;V<c;V++)if(l.get(V,O))(D&1)===1&&D++,v[D]++;else if(D&1)v[D]++;else if(D===4)if(Qt.foundPatternCross(v)){if(this.handlePossibleCenter(v,O,V,i)===!0)if(h=2,this.hasSkipped===!0)m=this.haveMultiplyConfirmedCenters();else{const Y=this.findRowSkip();Y>v[2]&&(O+=Y-v[2]-h,V=c-1)}else{v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,D=3;continue}D=0,v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0}else v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,D=3;else v[++D]++;Qt.foundPatternCross(v)&&this.handlePossibleCenter(v,O,c,i)===!0&&(h=v[0],this.hasSkipped&&(m=this.haveMultiplyConfirmedCenters()))}const I=this.selectBestPatterns();return Pe.orderBestPatterns(I),new ni(I)}static centerFromEnd(e,n){return n-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let n=0;for(let u=0;u<5;u++){const c=e[u];if(c===0)return!1;n+=c}if(n<7)return!1;const i=n/7,l=i/2;return Math.abs(i-e[0])<l&&Math.abs(i-e[1])<l&&Math.abs(3*i-e[2])<3*l&&Math.abs(i-e[3])<l&&Math.abs(i-e[4])<l}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,n,i,l){const u=this.getCrossCheckStateCount();let c=0;const h=this.image;for(;e>=c&&n>=c&&h.get(n-c,e-c);)u[2]++,c++;if(e<c||n<c)return!1;for(;e>=c&&n>=c&&!h.get(n-c,e-c)&&u[1]<=i;)u[1]++,c++;if(e<c||n<c||u[1]>i)return!1;for(;e>=c&&n>=c&&h.get(n-c,e-c)&&u[0]<=i;)u[0]++,c++;if(u[0]>i)return!1;const m=h.getHeight(),v=h.getWidth();for(c=1;e+c<m&&n+c<v&&h.get(n+c,e+c);)u[2]++,c++;if(e+c>=m||n+c>=v)return!1;for(;e+c<m&&n+c<v&&!h.get(n+c,e+c)&&u[3]<i;)u[3]++,c++;if(e+c>=m||n+c>=v||u[3]>=i)return!1;for(;e+c<m&&n+c<v&&h.get(n+c,e+c)&&u[4]<i;)u[4]++,c++;if(u[4]>=i)return!1;const I=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(I-l)<2*l&&Qt.foundPatternCross(u)}crossCheckVertical(e,n,i,l){const u=this.image,c=u.getHeight(),h=this.getCrossCheckStateCount();let m=e;for(;m>=0&&u.get(n,m);)h[2]++,m--;if(m<0)return NaN;for(;m>=0&&!u.get(n,m)&&h[1]<=i;)h[1]++,m--;if(m<0||h[1]>i)return NaN;for(;m>=0&&u.get(n,m)&&h[0]<=i;)h[0]++,m--;if(h[0]>i)return NaN;for(m=e+1;m<c&&u.get(n,m);)h[2]++,m++;if(m===c)return NaN;for(;m<c&&!u.get(n,m)&&h[3]<i;)h[3]++,m++;if(m===c||h[3]>=i)return NaN;for(;m<c&&u.get(n,m)&&h[4]<i;)h[4]++,m++;if(h[4]>=i)return NaN;const v=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(v-l)>=2*l?NaN:Qt.foundPatternCross(h)?Qt.centerFromEnd(h,m):NaN}crossCheckHorizontal(e,n,i,l){const u=this.image,c=u.getWidth(),h=this.getCrossCheckStateCount();let m=e;for(;m>=0&&u.get(m,n);)h[2]++,m--;if(m<0)return NaN;for(;m>=0&&!u.get(m,n)&&h[1]<=i;)h[1]++,m--;if(m<0||h[1]>i)return NaN;for(;m>=0&&u.get(m,n)&&h[0]<=i;)h[0]++,m--;if(h[0]>i)return NaN;for(m=e+1;m<c&&u.get(m,n);)h[2]++,m++;if(m===c)return NaN;for(;m<c&&!u.get(m,n)&&h[3]<i;)h[3]++,m++;if(m===c||h[3]>=i)return NaN;for(;m<c&&u.get(m,n)&&h[4]<i;)h[4]++,m++;if(h[4]>=i)return NaN;const v=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(v-l)>=l?NaN:Qt.foundPatternCross(h)?Qt.centerFromEnd(h,m):NaN}handlePossibleCenter(e,n,i,l){const u=e[0]+e[1]+e[2]+e[3]+e[4];let c=Qt.centerFromEnd(e,i),h=this.crossCheckVertical(n,Math.floor(c),e[2],u);if(!isNaN(h)&&(c=this.crossCheckHorizontal(Math.floor(c),Math.floor(h),e[2],u),!isNaN(c)&&(!l||this.crossCheckDiagonal(Math.floor(h),Math.floor(c),e[2],u)))){const m=u/7;let v=!1;const I=this.possibleCenters;for(let O=0,D=I.length;O<D;O++){const V=I[O];if(V.aboutEquals(m,h,c)){I[O]=V.combineEstimate(h,c,m),v=!0;break}}if(!v){const O=new _r(c,h,m);I.push(O),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(O)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let n=null;for(const i of this.possibleCenters)if(i.getCount()>=Qt.CENTER_QUORUM)if(n==null)n=i;else return this.hasSkipped=!0,Math.floor((Math.abs(n.getX()-i.getX())-Math.abs(n.getY()-i.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,n=0;const i=this.possibleCenters.length;for(const c of this.possibleCenters)c.getCount()>=Qt.CENTER_QUORUM&&(e++,n+=c.getEstimatedModuleSize());if(e<3)return!1;const l=n/i;let u=0;for(const c of this.possibleCenters)u+=Math.abs(c.getEstimatedModuleSize()-l);return u<=.05*n}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new J;const n=this.possibleCenters;let i;if(e>3){let l=0,u=0;for(const m of this.possibleCenters){const v=m.getEstimatedModuleSize();l+=v,u+=v*v}i=l/e;let c=Math.sqrt(u/e-i*i);n.sort((m,v)=>{const I=Math.abs(v.getEstimatedModuleSize()-i),O=Math.abs(m.getEstimatedModuleSize()-i);return I<O?-1:I>O?1:0});const h=Math.max(.2*i,c);for(let m=0;m<n.length&&n.length>3;m++){const v=n[m];Math.abs(v.getEstimatedModuleSize()-i)>h&&(n.splice(m,1),m--)}}if(n.length>3){let l=0;for(const u of n)l+=u.getEstimatedModuleSize();i=l/n.length,n.sort((u,c)=>{if(c.getCount()===u.getCount()){const h=Math.abs(c.getEstimatedModuleSize()-i),m=Math.abs(u.getEstimatedModuleSize()-i);return h<m?1:h>m?-1:0}else return c.getCount()-u.getCount()}),n.splice(3)}return[n[0],n[1],n[2]]}}Qt.CENTER_QUORUM=2,Qt.MIN_SKIP=3,Qt.MAX_MODULES=57;class Gr{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(ie.NEED_RESULT_POINT_CALLBACK);const i=new Qt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(i)}processFinderPatternInfo(e){const n=e.getTopLeft(),i=e.getTopRight(),l=e.getBottomLeft(),u=this.calculateModuleSize(n,i,l);if(u<1)throw new J("No pattern found in proccess finder.");const c=Gr.computeDimension(n,i,l,u),h=Ge.getProvisionalVersionForDimension(c),m=h.getDimensionForVersion()-7;let v=null;if(h.getAlignmentPatternCenters().length>0){const V=i.getX()-n.getX()+l.getX(),G=i.getY()-n.getY()+l.getY(),Y=1-3/m,$=Math.floor(n.getX()+Y*(V-n.getX())),se=Math.floor(n.getY()+Y*(G-n.getY()));for(let Ee=4;Ee<=16;Ee<<=1)try{v=this.findAlignmentInRegion(u,$,se,Ee);break}catch(Se){if(!(Se instanceof J))throw Se}}const I=Gr.createTransform(n,i,l,v,c),O=Gr.sampleGrid(this.image,I,c);let D;return v===null?D=[l,n,i]:D=[l,n,i,v],new gn(O,D)}static createTransform(e,n,i,l,u){const c=u-3.5;let h,m,v,I;return l!==null?(h=l.getX(),m=l.getY(),v=c-3,I=v):(h=n.getX()-e.getX()+i.getX(),m=n.getY()-e.getY()+i.getY(),v=c,I=c),nt.quadrilateralToQuadrilateral(3.5,3.5,c,3.5,v,I,3.5,c,e.getX(),e.getY(),n.getX(),n.getY(),h,m,i.getX(),i.getY())}static sampleGrid(e,n,i){return Tt.getInstance().sampleGridWithTransform(e,i,i,n)}static computeDimension(e,n,i,l){const u=ft.round(Pe.distance(e,n)/l),c=ft.round(Pe.distance(e,i)/l);let h=Math.floor((u+c)/2)+7;switch(h&3){case 0:h++;break;case 2:h--;break;case 3:throw new J("Dimensions could be not found.")}return h}calculateModuleSize(e,n,i){return(this.calculateModuleSizeOneWay(e,n)+this.calculateModuleSizeOneWay(e,i))/2}calculateModuleSizeOneWay(e,n){const i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(n.getX()),Math.floor(n.getY())),l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(i)?l/7:isNaN(l)?i/7:(i+l)/14}sizeOfBlackWhiteBlackRunBothWays(e,n,i,l){let u=this.sizeOfBlackWhiteBlackRun(e,n,i,l),c=1,h=e-(i-e);h<0?(c=e/(e-h),h=0):h>=this.image.getWidth()&&(c=(this.image.getWidth()-1-e)/(h-e),h=this.image.getWidth()-1);let m=Math.floor(n-(l-n)*c);return c=1,m<0?(c=n/(n-m),m=0):m>=this.image.getHeight()&&(c=(this.image.getHeight()-1-n)/(m-n),m=this.image.getHeight()-1),h=Math.floor(e+(h-e)*c),u+=this.sizeOfBlackWhiteBlackRun(e,n,h,m),u-1}sizeOfBlackWhiteBlackRun(e,n,i,l){const u=Math.abs(l-n)>Math.abs(i-e);if(u){let V=e;e=n,n=V,V=i,i=l,l=V}const c=Math.abs(i-e),h=Math.abs(l-n);let m=-c/2;const v=e<i?1:-1,I=n<l?1:-1;let O=0;const D=i+v;for(let V=e,G=n;V!==D;V+=v){const Y=u?G:V,$=u?V:G;if(O===1===this.image.get(Y,$)){if(O===2)return ft.distance(V,G,e,n);O++}if(m+=h,m>0){if(G===l)break;G+=I,m-=c}}return O===2?ft.distance(i+v,l,e,n):NaN}findAlignmentInRegion(e,n,i,l){const u=Math.floor(l*e),c=Math.max(0,n-u),h=Math.min(this.image.getWidth()-1,n+u);if(h-c<e*3)throw new J("Alignment top exceeds estimated module size.");const m=Math.max(0,i-u),v=Math.min(this.image.getHeight()-1,i+u);if(v-m<e*3)throw new J("Alignment bottom exceeds estimated module size.");return new Ar(this.image,c,m,h-c,v-m,e,this.resultPointCallback).find()}}class Wn{constructor(){this.decoder=new Uo}getDecoder(){return this.decoder}decode(e,n){let i,l;if(n!=null&&n.get(ie.PURE_BARCODE)!==void 0){const m=Wn.extractPureBits(e.getBlackMatrix());i=this.decoder.decodeBitMatrix(m,n),l=Wn.NO_POINTS}else{const m=new Gr(e.getBlackMatrix()).detect(n);i=this.decoder.decodeBitMatrix(m.getBits(),n),l=m.getPoints()}i.getOther()instanceof Vo&&i.getOther().applyMirroredCorrection(l);const u=new Ue(i.getText(),i.getRawBytes(),void 0,l,ve.QR_CODE,void 0),c=i.getByteSegments();c!==null&&u.putMetadata(Te.BYTE_SEGMENTS,c);const h=i.getECLevel();return h!==null&&u.putMetadata(Te.ERROR_CORRECTION_LEVEL,h),i.hasStructuredAppend()&&(u.putMetadata(Te.STRUCTURED_APPEND_SEQUENCE,i.getStructuredAppendSequenceNumber()),u.putMetadata(Te.STRUCTURED_APPEND_PARITY,i.getStructuredAppendParity())),u}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(n===null||i===null)throw new J;const l=this.moduleSize(n,e);let u=n[1],c=i[1],h=n[0],m=i[0];if(h>=m||u>=c)throw new J;if(c-u!==m-h&&(m=h+(c-u),m>=e.getWidth()))throw new J;const v=Math.round((m-h+1)/l),I=Math.round((c-u+1)/l);if(v<=0||I<=0)throw new J;if(I!==v)throw new J;const O=Math.floor(l/2);u+=O,h+=O;const D=h+Math.floor((v-1)*l)-m;if(D>0){if(D>O)throw new J;h-=D}const V=u+Math.floor((I-1)*l)-c;if(V>0){if(V>O)throw new J;u-=V}const G=new Le(v,I);for(let Y=0;Y<I;Y++){const $=u+Math.floor(Y*l);for(let se=0;se<v;se++)e.get(h+Math.floor(se*l),$)&&G.set(se,Y)}return G}static moduleSize(e,n){const i=n.getHeight(),l=n.getWidth();let u=e[0],c=e[1],h=!0,m=0;for(;u<l&&c<i;){if(h!==n.get(u,c)){if(++m===5)break;h=!h}u++,c++}if(u===l||c===i)throw new J;return(u-e[0])/7}}Wn.NO_POINTS=new Array;class qe{PDF417Common(){}static getBitCountSum(e){return ft.sum(e)}static toIntArray(e){if(e==null||!e.length)return qe.EMPTY_INT_ARRAY;const n=new Int32Array(e.length);let i=0;for(const l of e)n[i++]=l;return n}static getCodeword(e){const n=H.binarySearch(qe.SYMBOL_TABLE,e&262143);return n<0?-1:(qe.CODEWORD_TABLE[n]-1)%qe.NUMBER_OF_CODEWORDS}}qe.NUMBER_OF_CODEWORDS=929,qe.MAX_CODEWORDS_IN_BARCODE=qe.NUMBER_OF_CODEWORDS-1,qe.MIN_ROWS_IN_BARCODE=3,qe.MAX_ROWS_IN_BARCODE=90,qe.MODULES_IN_CODEWORD=17,qe.MODULES_IN_STOP_PATTERN=18,qe.BARS_IN_MODULE=8,qe.EMPTY_INT_ARRAY=new Int32Array([]),qe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),qe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Qa{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class rt{static detectMultiple(e,n,i){let l=e.getBlackMatrix(),u=rt.detect(i,l);return u.length||(l=l.clone(),l.rotate180(),u=rt.detect(i,l)),new Qa(l,u)}static detect(e,n){const i=new Array;let l=0,u=0,c=!1;for(;l<n.getHeight();){const h=rt.findVertices(n,l,u);if(h[0]==null&&h[3]==null){if(!c)break;c=!1,u=0;for(const m of i)m[1]!=null&&(l=Math.trunc(Math.max(l,m[1].getY()))),m[3]!=null&&(l=Math.max(l,Math.trunc(m[3].getY())));l+=rt.ROW_STEP;continue}if(c=!0,i.push(h),!e)break;h[2]!=null?(u=Math.trunc(h[2].getX()),l=Math.trunc(h[2].getY())):(u=Math.trunc(h[4].getX()),l=Math.trunc(h[4].getY()))}return i}static findVertices(e,n,i){const l=e.getHeight(),u=e.getWidth(),c=new Array(8);return rt.copyToResult(c,rt.findRowsWithPattern(e,l,u,n,i,rt.START_PATTERN),rt.INDEXES_START_PATTERN),c[4]!=null&&(i=Math.trunc(c[4].getX()),n=Math.trunc(c[4].getY())),rt.copyToResult(c,rt.findRowsWithPattern(e,l,u,n,i,rt.STOP_PATTERN),rt.INDEXES_STOP_PATTERN),c}static copyToResult(e,n,i){for(let l=0;l<i.length;l++)e[i[l]]=n[l]}static findRowsWithPattern(e,n,i,l,u,c){const h=new Array(4);let m=!1;const v=new Int32Array(c.length);for(;l<n;l+=rt.ROW_STEP){let O=rt.findGuardPattern(e,u,l,i,!1,c,v);if(O!=null){for(;l>0;){const D=rt.findGuardPattern(e,u,--l,i,!1,c,v);if(D!=null)O=D;else{l++;break}}h[0]=new Pe(O[0],l),h[1]=new Pe(O[1],l),m=!0;break}}let I=l+1;if(m){let O=0,D=Int32Array.from([Math.trunc(h[0].getX()),Math.trunc(h[1].getX())]);for(;I<n;I++){const V=rt.findGuardPattern(e,D[0],I,i,!1,c,v);if(V!=null&&Math.abs(D[0]-V[0])<rt.MAX_PATTERN_DRIFT&&Math.abs(D[1]-V[1])<rt.MAX_PATTERN_DRIFT)D=V,O=0;else{if(O>rt.SKIPPED_ROW_COUNT_MAX)break;O++}}I-=O+1,h[2]=new Pe(D[0],I),h[3]=new Pe(D[1],I)}return I-l<rt.BARCODE_MIN_HEIGHT&&H.fill(h,null),h}static findGuardPattern(e,n,i,l,u,c,h){H.fillWithin(h,0,h.length,0);let m=n,v=0;for(;e.get(m,i)&&m>0&&v++<rt.MAX_PIXEL_DRIFT;)m--;let I=m,O=0,D=c.length;for(let V=u;I<l;I++)if(e.get(I,i)!==V)h[O]++;else{if(O===D-1){if(rt.patternMatchVariance(h,c,rt.MAX_INDIVIDUAL_VARIANCE)<rt.MAX_AVG_VARIANCE)return new Int32Array([m,I]);m+=h[0]+h[1],j.arraycopy(h,2,h,0,O-1),h[O-1]=0,h[O]=0,O--}else O++;h[O]=1,V=!V}return O===D-1&&rt.patternMatchVariance(h,c,rt.MAX_INDIVIDUAL_VARIANCE)<rt.MAX_AVG_VARIANCE?new Int32Array([m,I-1]):null}static patternMatchVariance(e,n,i){let l=e.length,u=0,c=0;for(let v=0;v<l;v++)u+=e[v],c+=n[v];if(u<c)return 1/0;let h=u/c;i*=h;let m=0;for(let v=0;v<l;v++){let I=e[v],O=n[v]*h,D=I>O?I-O:O-I;if(D>i)return 1/0;m+=D}return m/u}}rt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),rt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),rt.MAX_AVG_VARIANCE=.42,rt.MAX_INDIVIDUAL_VARIANCE=.8,rt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),rt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),rt.MAX_PIXEL_DRIFT=3,rt.MAX_PATTERN_DRIFT=5,rt.SKIPPED_ROW_COUNT_MAX=25,rt.ROW_STEP=5,rt.BARCODE_MIN_HEIGHT=10;class _n{constructor(e,n){if(n.length===0)throw new T;this.field=e;let i=n.length;if(i>1&&n[0]===0){let l=1;for(;l<i&&n[l]===0;)l++;l===i?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(i-l),j.arraycopy(n,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let l=0;for(let u of this.coefficients)l=this.field.add(l,u);return l}let n=this.coefficients[0],i=this.coefficients.length;for(let l=1;l<i;l++)n=this.field.add(this.field.multiply(e,n),this.coefficients[l]);return n}add(e){if(!this.field.equals(e.field))throw new T("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,i=e.coefficients;if(n.length>i.length){let c=n;n=i,i=c}let l=new Int32Array(i.length),u=i.length-n.length;j.arraycopy(i,0,l,0,u);for(let c=u;c<i.length;c++)l[c]=this.field.add(n[c-u],i[c]);return new _n(this.field,l)}subtract(e){if(!this.field.equals(e.field))throw new T("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof _n?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new T("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new _n(this.field,new Int32Array([0]));let n=this.coefficients,i=n.length,l=e.coefficients,u=l.length,c=new Int32Array(i+u-1);for(let h=0;h<i;h++){let m=n[h];for(let v=0;v<u;v++)c[h+v]=this.field.add(c[h+v],this.field.multiply(m,l[v]))}return new _n(this.field,c)}negative(){let e=this.coefficients.length,n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=this.field.subtract(0,this.coefficients[i]);return new _n(this.field,n)}multiplyScalar(e){if(e===0)return new _n(this.field,new Int32Array([0]));if(e===1)return this;let n=this.coefficients.length,i=new Int32Array(n);for(let l=0;l<n;l++)i[l]=this.field.multiply(this.coefficients[l],e);return new _n(this.field,i)}multiplyByMonomial(e,n){if(e<0)throw new T;if(n===0)return new _n(this.field,new Int32Array([0]));let i=this.coefficients.length,l=new Int32Array(i+e);for(let u=0;u<i;u++)l[u]=this.field.multiply(this.coefficients[u],n);return new _n(this.field,l)}toString(){let e=new Oe;for(let n=this.getDegree();n>=0;n--){let i=this.getCoefficient(n);i!==0&&(i<0?(e.append(" - "),i=-i):e.length()>0&&e.append(" + "),(n===0||i!==1)&&e.append(i),n!==0&&(n===1?e.append("x"):(e.append("x^"),e.append(n))))}return e.toString()}}class Ja{add(e,n){return(e+n)%this.modulus}subtract(e,n){return(this.modulus+e-n)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new T;return this.logTable[e]}inverse(e){if(e===0)throw new ct;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class Wi extends Ja{constructor(e,n){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let i=1;for(let l=0;l<e;l++)this.expTable[l]=i,i=i*n%e;for(let l=0;l<e-1;l++)this.logTable[this.expTable[l]]=l;this.zero=new _n(this,new Int32Array([0])),this.one=new _n(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new T;if(n===0)return this.zero;let i=new Int32Array(e+1);return i[0]=n,new _n(this,i)}}Wi.PDF417_GF=new Wi(qe.NUMBER_OF_CODEWORDS,3);class zo{constructor(){this.field=Wi.PDF417_GF}decode(e,n,i){let l=new _n(this.field,e),u=new Int32Array(n),c=!1;for(let G=n;G>0;G--){let Y=l.evaluateAt(this.field.exp(G));u[n-G]=Y,Y!==0&&(c=!0)}if(!c)return 0;let h=this.field.getOne();if(i!=null)for(const G of i){let Y=this.field.exp(e.length-1-G),$=new _n(this.field,new Int32Array([this.field.subtract(0,Y),1]));h=h.multiply($)}let m=new _n(this.field,u),v=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),m,n),I=v[0],O=v[1],D=this.findErrorLocations(I),V=this.findErrorMagnitudes(O,I,D);for(let G=0;G<D.length;G++){let Y=e.length-1-this.field.log(D[G]);if(Y<0)throw k.getChecksumInstance();e[Y]=this.field.subtract(e[Y],V[G])}return D.length}runEuclideanAlgorithm(e,n,i){if(e.getDegree()<n.getDegree()){let D=e;e=n,n=D}let l=e,u=n,c=this.field.getZero(),h=this.field.getOne();for(;u.getDegree()>=Math.round(i/2);){let D=l,V=c;if(l=u,c=h,l.isZero())throw k.getChecksumInstance();u=D;let G=this.field.getZero(),Y=l.getCoefficient(l.getDegree()),$=this.field.inverse(Y);for(;u.getDegree()>=l.getDegree()&&!u.isZero();){let se=u.getDegree()-l.getDegree(),Ee=this.field.multiply(u.getCoefficient(u.getDegree()),$);G=G.add(this.field.buildMonomial(se,Ee)),u=u.subtract(l.multiplyByMonomial(se,Ee))}h=G.multiply(c).subtract(V).negative()}let m=h.getCoefficient(0);if(m===0)throw k.getChecksumInstance();let v=this.field.inverse(m),I=h.multiply(v),O=u.multiply(v);return[I,O]}findErrorLocations(e){let n=e.getDegree(),i=new Int32Array(n),l=0;for(let u=1;u<this.field.getSize()&&l<n;u++)e.evaluateAt(u)===0&&(i[l]=this.field.inverse(u),l++);if(l!==n)throw k.getChecksumInstance();return i}findErrorMagnitudes(e,n,i){let l=n.getDegree(),u=new Int32Array(l);for(let v=1;v<=l;v++)u[l-v]=this.field.multiply(v,n.getCoefficient(v));let c=new _n(this.field,u),h=i.length,m=new Int32Array(h);for(let v=0;v<h;v++){let I=this.field.inverse(i[v]),O=this.field.subtract(0,e.evaluateAt(I)),D=this.field.inverse(c.evaluateAt(I));m[v]=this.field.multiply(O,D)}return m}}class vi{constructor(e,n,i,l,u){e instanceof vi?this.constructor_2(e):this.constructor_1(e,n,i,l,u)}constructor_1(e,n,i,l,u){const c=n==null||i==null,h=l==null||u==null;if(c&&h)throw new J;c?(n=new Pe(0,l.getY()),i=new Pe(0,u.getY())):h&&(l=new Pe(e.getWidth()-1,n.getY()),u=new Pe(e.getWidth()-1,i.getY())),this.image=e,this.topLeft=n,this.bottomLeft=i,this.topRight=l,this.bottomRight=u,this.minX=Math.trunc(Math.min(n.getX(),i.getX())),this.maxX=Math.trunc(Math.max(l.getX(),u.getX())),this.minY=Math.trunc(Math.min(n.getY(),l.getY())),this.maxY=Math.trunc(Math.max(i.getY(),u.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,n){return e==null?n:n==null?e:new vi(e.image,e.topLeft,e.bottomLeft,n.topRight,n.bottomRight)}addMissingRows(e,n,i){let l=this.topLeft,u=this.bottomLeft,c=this.topRight,h=this.bottomRight;if(e>0){let m=i?this.topLeft:this.topRight,v=Math.trunc(m.getY()-e);v<0&&(v=0);let I=new Pe(m.getX(),v);i?l=I:c=I}if(n>0){let m=i?this.bottomLeft:this.bottomRight,v=Math.trunc(m.getY()+n);v>=this.image.getHeight()&&(v=this.image.getHeight()-1);let I=new Pe(m.getX(),v);i?u=I:h=I}return new vi(this.image,l,u,c,h)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Es{constructor(e,n,i,l){this.columnCount=e,this.errorCorrectionLevel=l,this.rowCountUpperPart=n,this.rowCountLowerPart=i,this.rowCount=n+i}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Xr{constructor(){this.buffer=""}static form(e,n){let i=-1;function l(c,h,m,v,I,O){if(c==="%%")return"%";if(n[++i]===void 0)return;c=v?parseInt(v.substr(1)):void 0;let D=I?parseInt(I.substr(1)):void 0,V;switch(O){case"s":V=n[i];break;case"c":V=n[i][0];break;case"f":V=parseFloat(n[i]).toFixed(c);break;case"p":V=parseFloat(n[i]).toPrecision(c);break;case"e":V=parseFloat(n[i]).toExponential(c);break;case"x":V=parseInt(n[i]).toString(D||16);break;case"d":V=parseFloat(parseInt(n[i],D||10).toPrecision(c)).toFixed(0);break}V=typeof V=="object"?JSON.stringify(V):(+V).toString(D);let G=parseInt(m),Y=m&&m[0]+""=="0"?"0":" ";for(;V.length<G;)V=h!==void 0?V+Y:Y+V;return V}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(u,l)}format(e,...n){this.buffer+=Xr.form(e,n)}toString(){return this.buffer}}class Or{constructor(e){this.boundingBox=new vi(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let n=this.getCodeword(e);if(n!=null)return n;for(let i=1;i<Or.MAX_NEARBY_DISTANCE;i++){let l=this.imageRowToCodewordIndex(e)-i;if(l>=0&&(n=this.codewords[l],n!=null)||(l=this.imageRowToCodewordIndex(e)+i,l<this.codewords.length&&(n=this.codewords[l],n!=null)))return n}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,n){this.codewords[this.imageRowToCodewordIndex(e)]=n}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new Xr;let n=0;for(const i of this.codewords){if(i==null){e.format("%3d:    |   %n",n++);continue}e.format("%3d: %3d|%3d%n",n++,i.getRowNumber(),i.getValue())}return e.toString()}}Or.MAX_NEARBY_DISTANCE=5;class ri{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let n=this.values.get(e);n==null&&(n=0),n++,this.values.set(e,n)}getValue(){let e=-1,n=new Array;for(const[i,l]of this.values.entries()){const u={getKey:()=>i,getValue:()=>l};u.getValue()>e?(e=u.getValue(),n=[],n.push(u.getKey())):u.getValue()===e&&n.push(u.getKey())}return qe.toIntArray(n)}getConfidence(e){return this.values.get(e)}}class el extends Or{constructor(e,n){super(e),this._isLeft=n}setRowNumbers(){for(let e of this.getCodewords())e!=null&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,e);let i=this.getBoundingBox(),l=this._isLeft?i.getTopLeft():i.getTopRight(),u=this._isLeft?i.getBottomLeft():i.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(l.getY())),h=this.imageRowToCodewordIndex(Math.trunc(u.getY())),m=-1,v=1,I=0;for(let O=c;O<h;O++){if(n[O]==null)continue;let D=n[O],V=D.getRowNumber()-m;if(V===0)I++;else if(V===1)v=Math.max(v,I),I=1,m=D.getRowNumber();else if(V<0||D.getRowNumber()>=e.getRowCount()||V>O)n[O]=null;else{let G;v>2?G=(v-2)*V:G=V;let Y=G>=O;for(let $=1;$<=G&&!Y;$++)Y=n[O-$]!=null;Y?n[O]=null:(m=D.getRowNumber(),I=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let n=new Int32Array(e.getRowCount());for(let i of this.getCodewords())if(i!=null){let l=i.getRowNumber();if(l>=n.length)continue;n[l]++}return n}adjustIncompleteIndicatorColumnRowNumbers(e){let n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),l=this._isLeft?n.getBottomLeft():n.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.imageRowToCodewordIndex(Math.trunc(l.getY())),h=this.getCodewords(),m=-1;for(let v=u;v<c;v++){if(h[v]==null)continue;let I=h[v];I.setRowNumberAsRowIndicatorColumn();let O=I.getRowNumber()-m;O===0||(O===1?m=I.getRowNumber():I.getRowNumber()>=e.getRowCount()?h[v]=null:m=I.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),n=new ri,i=new ri,l=new ri,u=new ri;for(let h of e){if(h==null)continue;h.setRowNumberAsRowIndicatorColumn();let m=h.getValue()%30,v=h.getRowNumber();switch(this._isLeft||(v+=2),v%3){case 0:i.setValue(m*3+1);break;case 1:u.setValue(m/3),l.setValue(m%3);break;case 2:n.setValue(m+1);break}}if(n.getValue().length===0||i.getValue().length===0||l.getValue().length===0||u.getValue().length===0||n.getValue()[0]<1||i.getValue()[0]+l.getValue()[0]<qe.MIN_ROWS_IN_BARCODE||i.getValue()[0]+l.getValue()[0]>qe.MAX_ROWS_IN_BARCODE)return null;let c=new Es(n.getValue()[0],i.getValue()[0],l.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(e,c),c}removeIncorrectCodewords(e,n){for(let i=0;i<e.length;i++){let l=e[i];if(e[i]==null)continue;let u=l.getValue()%30,c=l.getRowNumber();if(c>n.getRowCount()){e[i]=null;continue}switch(this._isLeft||(c+=2),c%3){case 0:u*3+1!==n.getRowCountUpperPart()&&(e[i]=null);break;case 1:(Math.trunc(u/3)!==n.getErrorCorrectionLevel()||u%3!==n.getRowCountLowerPart())&&(e[i]=null);break;case 2:u+1!==n.getColumnCount()&&(e[i]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class As{constructor(e,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=qe.MAX_CODEWORDS_IN_BARCODE,n;do n=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<n);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let n=1;n<this.barcodeColumnCount+1;n++){let i=this.detectionResultColumns[n].getCodewords();for(let l=0;l<i.length;l++)i[l]!=null&&(i[l].hasValidRowNumber()||this.adjustRowNumbers(n,l,i))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<e.length;i++)if(e[i]!=null&&n[i]!=null&&e[i].getRowNumber()===n[i].getRowNumber())for(let l=1;l<=this.barcodeColumnCount;l++){let u=this.detectionResultColumns[l].getCodewords()[i];u!=null&&(u.setRowNumber(e[i].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[l].getCodewords()[i]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<n.length;i++){if(n[i]==null)continue;let l=n[i].getRowNumber(),u=0;for(let c=this.barcodeColumnCount+1;c>0&&u<this.ADJUST_ROW_NUMBER_SKIP;c--){let h=this.detectionResultColumns[c].getCodewords()[i];h!=null&&(u=As.adjustRowNumberIfValid(l,u,h),h.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,n=this.detectionResultColumns[0].getCodewords();for(let i=0;i<n.length;i++){if(n[i]==null)continue;let l=n[i].getRowNumber(),u=0;for(let c=1;c<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;c++){let h=this.detectionResultColumns[c].getCodewords()[i];h!=null&&(u=As.adjustRowNumberIfValid(l,u,h),h.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,n,i){return i==null||i.hasValidRowNumber()||(i.isValidRowNumber(e)?(i.setRowNumber(e),n=0):++n),n}adjustRowNumbers(e,n,i){if(!this.detectionResultColumns[e-1])return;let l=i[n],u=this.detectionResultColumns[e-1].getCodewords(),c=u;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());let h=new Array(14);h[2]=u[n],h[3]=c[n],n>0&&(h[0]=i[n-1],h[4]=u[n-1],h[5]=c[n-1]),n>1&&(h[8]=i[n-2],h[10]=u[n-2],h[11]=c[n-2]),n<i.length-1&&(h[1]=i[n+1],h[6]=u[n+1],h[7]=c[n+1]),n<i.length-2&&(h[9]=i[n+2],h[12]=u[n+2],h[13]=c[n+2]);for(let m of h)if(As.adjustRowNumber(l,m))return}static adjustRowNumber(e,n){return n==null?!1:n.hasValidRowNumber()&&n.getBucket()===e.getBucket()?(e.setRowNumber(n.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,n){this.detectionResultColumns[e]=n}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let n=new Xr;for(let i=0;i<e.getCodewords().length;i++){n.format("CW %3d:",i);for(let l=0;l<this.barcodeColumnCount+2;l++){if(this.detectionResultColumns[l]==null){n.format("    |   ");continue}let u=this.detectionResultColumns[l].getCodewords()[i];if(u==null){n.format("    |   ");continue}n.format(" %3d|%3d",u.getRowNumber(),u.getValue())}n.format("%n")}return n.toString()}}class Ci{constructor(e,n,i,l){this.rowNumber=Ci.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(n),this.bucket=Math.trunc(i),this.value=Math.trunc(l)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==Ci.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}Ci.BARCODE_ROW_UNKNOWN=-1;class On{static initialize(){for(let e=0;e<qe.SYMBOL_TABLE.length;e++){let n=qe.SYMBOL_TABLE[e],i=n&1;for(let l=0;l<qe.BARS_IN_MODULE;l++){let u=0;for(;(n&1)===i;)u+=1,n>>=1;i=n&1,On.RATIOS_TABLE[e]||(On.RATIOS_TABLE[e]=new Array(qe.BARS_IN_MODULE)),On.RATIOS_TABLE[e][qe.BARS_IN_MODULE-l-1]=Math.fround(u/qe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let n=On.getDecodedCodewordValue(On.sampleBitCounts(e));return n!==-1?n:On.getClosestDecodedValue(e)}static sampleBitCounts(e){let n=ft.sum(e),i=new Int32Array(qe.BARS_IN_MODULE),l=0,u=0;for(let c=0;c<qe.MODULES_IN_CODEWORD;c++){let h=n/(2*qe.MODULES_IN_CODEWORD)+c*n/qe.MODULES_IN_CODEWORD;u+e[l]<=h&&(u+=e[l],l++),i[l]++}return i}static getDecodedCodewordValue(e){let n=On.getBitValue(e);return qe.getCodeword(n)===-1?-1:n}static getBitValue(e){let n=0;for(let i=0;i<e.length;i++)for(let l=0;l<e[i];l++)n=n<<1|(i%2===0?1:0);return Math.trunc(n)}static getClosestDecodedValue(e){let n=ft.sum(e),i=new Array(qe.BARS_IN_MODULE);if(n>1)for(let c=0;c<i.length;c++)i[c]=Math.fround(e[c]/n);let l=tn.MAX_VALUE,u=-1;this.bSymbolTableReady||On.initialize();for(let c=0;c<On.RATIOS_TABLE.length;c++){let h=0,m=On.RATIOS_TABLE[c];for(let v=0;v<qe.BARS_IN_MODULE;v++){let I=Math.fround(m[v]-i[v]);if(h+=Math.fround(I*I),h>=l)break}h<l&&(l=h,u=qe.SYMBOL_TABLE[c])}return u}}On.bSymbolTableReady=!1,On.RATIOS_TABLE=new Array(qe.SYMBOL_TABLE.length).map(_=>new Array(qe.BARS_IN_MODULE));class to{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class Wo{static parseLong(e,n=void 0){return parseInt(e,n)}}class Yr extends E{}Yr.kind="NullPointerException";class Ho{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,n,i){if(e==null)throw new Yr;if(n<0||n>e.length||i<0||n+i>e.length||n+i<0)throw new B;if(i===0)return;for(let l=0;l<i;l++)this.write(e[n+l])}flush(){}close(){}}class no extends E{}class tl extends Ho{constructor(e=32){if(super(),this.count=0,e<0)throw new T("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let i=this.buf.length<<1;if(i-e<0&&(i=e),i<0){if(e<0)throw new no;i=W.MAX_VALUE}this.buf=H.copyOfUint8Array(this.buf,i)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,n,i){if(n<0||n>e.length||i<0||n+i-e.length>0)throw new B;this.ensureCapacity(this.count+i),j.arraycopy(e,n,this.buf,this.count,i),this.count+=i}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return H.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var Nt;(function(_){_[_.ALPHA=0]="ALPHA",_[_.LOWER=1]="LOWER",_[_.MIXED=2]="MIXED",_[_.PUNCT=3]="PUNCT",_[_.ALPHA_SHIFT=4]="ALPHA_SHIFT",_[_.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Nt||(Nt={}));function Ss(){if(typeof window<"u")return window.BigInt||null;if(typeof Ql<"u")return Ql.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let bs;function fn(_){if(typeof bs>"u"&&(bs=Ss()),bs===null)throw new Error("BigInt is not supported!");return bs(_)}function Hi(){let _=[];_[0]=fn(1);let e=fn(900);_[1]=e;for(let n=2;n<16;n++)_[n]=_[n-1]*e;return _}class ae{static decode(e,n){let i=new Oe(""),l=q.ISO8859_1;i.enableDecoding(l);let u=1,c=e[u++],h=new to;for(;u<e[0];){switch(c){case ae.TEXT_COMPACTION_MODE_LATCH:u=ae.textCompaction(e,u,i);break;case ae.BYTE_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:u=ae.byteCompaction(c,e,l,u,i);break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[u++]);break;case ae.NUMERIC_COMPACTION_MODE_LATCH:u=ae.numericCompaction(e,u,i);break;case ae.ECI_CHARSET:q.getCharacterSetECIByValue(e[u++]);break;case ae.ECI_GENERAL_PURPOSE:u+=2;break;case ae.ECI_USER_DEFINED:u++;break;case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=ae.decodeMacroBlock(e,u,h);break;case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:throw new Q;default:u--,u=ae.textCompaction(e,u,i);break}if(u<e.length)c=e[u++];else throw Q.getFormatInstance()}if(i.length()===0)throw Q.getFormatInstance();let m=new Ne(null,i.toString(),null,n);return m.setOther(h),m}static decodeMacroBlock(e,n,i){if(n+ae.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw Q.getFormatInstance();let l=new Int32Array(ae.NUMBER_OF_SEQUENCE_CODEWORDS);for(let h=0;h<ae.NUMBER_OF_SEQUENCE_CODEWORDS;h++,n++)l[h]=e[n];i.setSegmentIndex(W.parseInt(ae.decodeBase900toBase10(l,ae.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new Oe;n=ae.textCompaction(e,n,u),i.setFileId(u.toString());let c=-1;for(e[n]===ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(c=n+1);n<e[0];)switch(e[n]){case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(n++,e[n]){case ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let h=new Oe;n=ae.textCompaction(e,n+1,h),i.setFileName(h.toString());break;case ae.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let m=new Oe;n=ae.textCompaction(e,n+1,m),i.setSender(m.toString());break;case ae.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let v=new Oe;n=ae.textCompaction(e,n+1,v),i.setAddressee(v.toString());break;case ae.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let I=new Oe;n=ae.numericCompaction(e,n+1,I),i.setSegmentCount(W.parseInt(I.toString()));break;case ae.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let O=new Oe;n=ae.numericCompaction(e,n+1,O),i.setTimestamp(Wo.parseLong(O.toString()));break;case ae.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let D=new Oe;n=ae.numericCompaction(e,n+1,D),i.setChecksum(W.parseInt(D.toString()));break;case ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let V=new Oe;n=ae.numericCompaction(e,n+1,V),i.setFileSize(Wo.parseLong(V.toString()));break;default:throw Q.getFormatInstance()}break;case ae.MACRO_PDF417_TERMINATOR:n++,i.setLastSegment(!0);break;default:throw Q.getFormatInstance()}if(c!==-1){let h=n-c;i.isLastSegment()&&h--,i.setOptionalData(H.copyOfRange(e,c,c+h))}return n}static textCompaction(e,n,i){let l=new Int32Array((e[0]-n)*2),u=new Int32Array((e[0]-n)*2),c=0,h=!1;for(;n<e[0]&&!h;){let m=e[n++];if(m<ae.TEXT_COMPACTION_MODE_LATCH)l[c]=m/30,l[c+1]=m%30,c+=2;else switch(m){case ae.TEXT_COMPACTION_MODE_LATCH:l[c++]=ae.TEXT_COMPACTION_MODE_LATCH;break;case ae.BYTE_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.NUMERIC_COMPACTION_MODE_LATCH:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:n--,h=!0;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l[c]=ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,m=e[n++],u[c]=m,c++;break}}return ae.decodeTextCompaction(l,u,c,i),n}static decodeTextCompaction(e,n,i,l){let u=Nt.ALPHA,c=Nt.ALPHA,h=0;for(;h<i;){let m=e[h],v="";switch(u){case Nt.ALPHA:if(m<26)v=String.fromCharCode(65+m);else switch(m){case 26:v=" ";break;case ae.LL:u=Nt.LOWER;break;case ae.ML:u=Nt.MIXED;break;case ae.PS:c=u,u=Nt.PUNCT_SHIFT;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case ae.TEXT_COMPACTION_MODE_LATCH:u=Nt.ALPHA;break}break;case Nt.LOWER:if(m<26)v=String.fromCharCode(97+m);else switch(m){case 26:v=" ";break;case ae.AS:c=u,u=Nt.ALPHA_SHIFT;break;case ae.ML:u=Nt.MIXED;break;case ae.PS:c=u,u=Nt.PUNCT_SHIFT;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case ae.TEXT_COMPACTION_MODE_LATCH:u=Nt.ALPHA;break}break;case Nt.MIXED:if(m<ae.PL)v=ae.MIXED_CHARS[m];else switch(m){case ae.PL:u=Nt.PUNCT;break;case 26:v=" ";break;case ae.LL:u=Nt.LOWER;break;case ae.AL:u=Nt.ALPHA;break;case ae.PS:c=u,u=Nt.PUNCT_SHIFT;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case ae.TEXT_COMPACTION_MODE_LATCH:u=Nt.ALPHA;break}break;case Nt.PUNCT:if(m<ae.PAL)v=ae.PUNCT_CHARS[m];else switch(m){case ae.PAL:u=Nt.ALPHA;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case ae.TEXT_COMPACTION_MODE_LATCH:u=Nt.ALPHA;break}break;case Nt.ALPHA_SHIFT:if(u=c,m<26)v=String.fromCharCode(65+m);else switch(m){case 26:v=" ";break;case ae.TEXT_COMPACTION_MODE_LATCH:u=Nt.ALPHA;break}break;case Nt.PUNCT_SHIFT:if(u=c,m<ae.PAL)v=ae.PUNCT_CHARS[m];else switch(m){case ae.PAL:u=Nt.ALPHA;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case ae.TEXT_COMPACTION_MODE_LATCH:u=Nt.ALPHA;break}break}v!==""&&l.append(v),h++}}static byteCompaction(e,n,i,l,u){let c=new tl,h=0,m=0,v=!1;switch(e){case ae.BYTE_COMPACTION_MODE_LATCH:let I=new Int32Array(6),O=n[l++];for(;l<n[0]&&!v;)switch(I[h++]=O,m=900*m+O,O=n[l++],O){case ae.TEXT_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH:case ae.NUMERIC_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:l--,v=!0;break;default:if(h%5===0&&h>0){for(let D=0;D<6;++D)c.write(Number(fn(m)>>fn(8*(5-D))));m=0,h=0}break}l===n[0]&&O<ae.TEXT_COMPACTION_MODE_LATCH&&(I[h++]=O);for(let D=0;D<h;D++)c.write(I[D]);break;case ae.BYTE_COMPACTION_MODE_LATCH_6:for(;l<n[0]&&!v;){let D=n[l++];if(D<ae.TEXT_COMPACTION_MODE_LATCH)h++,m=900*m+D;else switch(D){case ae.TEXT_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH:case ae.NUMERIC_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:l--,v=!0;break}if(h%5===0&&h>0){for(let V=0;V<6;++V)c.write(Number(fn(m)>>fn(8*(5-V))));m=0,h=0}}break}return u.append(je.decode(c.toByteArray(),i)),l}static numericCompaction(e,n,i){let l=0,u=!1,c=new Int32Array(ae.MAX_NUMERIC_CODEWORDS);for(;n<e[0]&&!u;){let h=e[n++];if(n===e[0]&&(u=!0),h<ae.TEXT_COMPACTION_MODE_LATCH)c[l]=h,l++;else switch(h){case ae.TEXT_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:n--,u=!0;break}(l%ae.MAX_NUMERIC_CODEWORDS===0||h===ae.NUMERIC_COMPACTION_MODE_LATCH||u)&&l>0&&(i.append(ae.decodeBase900toBase10(c,l)),l=0)}return n}static decodeBase900toBase10(e,n){let i=fn(0);for(let u=0;u<n;u++)i+=ae.EXP900[n-u-1]*fn(e[u]);let l=i.toString();if(l.charAt(0)!=="1")throw new Q;return l.substring(1)}}ae.TEXT_COMPACTION_MODE_LATCH=900,ae.BYTE_COMPACTION_MODE_LATCH=901,ae.NUMERIC_COMPACTION_MODE_LATCH=902,ae.BYTE_COMPACTION_MODE_LATCH_6=924,ae.ECI_USER_DEFINED=925,ae.ECI_GENERAL_PURPOSE=926,ae.ECI_CHARSET=927,ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ae.MACRO_PDF417_TERMINATOR=922,ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ae.MAX_NUMERIC_CODEWORDS=15,ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ae.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ae.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ae.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ae.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ae.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ae.PL=25,ae.LL=27,ae.AS=27,ae.ML=28,ae.AL=28,ae.PS=29,ae.PAL=29,ae.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ae.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ae.EXP900=Ss()?Hi():[],ae.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ot{constructor(){}static decode(e,n,i,l,u,c,h){let m=new vi(e,n,i,l,u),v=null,I=null,O;for(let G=!0;;G=!1){if(n!=null&&(v=ot.getRowIndicatorColumn(e,m,n,!0,c,h)),l!=null&&(I=ot.getRowIndicatorColumn(e,m,l,!1,c,h)),O=ot.merge(v,I),O==null)throw J.getNotFoundInstance();let Y=O.getBoundingBox();if(G&&Y!=null&&(Y.getMinY()<m.getMinY()||Y.getMaxY()>m.getMaxY()))m=Y;else break}O.setBoundingBox(m);let D=O.getBarcodeColumnCount()+1;O.setDetectionResultColumn(0,v),O.setDetectionResultColumn(D,I);let V=v!=null;for(let G=1;G<=D;G++){let Y=V?G:D-G;if(O.getDetectionResultColumn(Y)!==void 0)continue;let $;Y===0||Y===D?$=new el(m,Y===0):$=new Or(m),O.setDetectionResultColumn(Y,$);let se=-1,Ee=se;for(let Se=m.getMinY();Se<=m.getMaxY();Se++){if(se=ot.getStartColumn(O,Y,Se,V),se<0||se>m.getMaxX()){if(Ee===-1)continue;se=Ee}let xe=ot.detectCodeword(e,m.getMinX(),m.getMaxX(),V,se,Se,c,h);xe!=null&&($.setCodeword(Se,xe),Ee=se,c=Math.min(c,xe.getWidth()),h=Math.max(h,xe.getWidth()))}}return ot.createDecoderResult(O)}static merge(e,n){if(e==null&&n==null)return null;let i=ot.getBarcodeMetadata(e,n);if(i==null)return null;let l=vi.merge(ot.adjustBoundingBox(e),ot.adjustBoundingBox(n));return new As(i,l)}static adjustBoundingBox(e){if(e==null)return null;let n=e.getRowHeights();if(n==null)return null;let i=ot.getMax(n),l=0;for(let h of n)if(l+=i-h,h>0)break;let u=e.getCodewords();for(let h=0;l>0&&u[h]==null;h++)l--;let c=0;for(let h=n.length-1;h>=0&&(c+=i-n[h],!(n[h]>0));h--);for(let h=u.length-1;c>0&&u[h]==null;h--)c--;return e.getBoundingBox().addMissingRows(l,c,e.isLeft())}static getMax(e){let n=-1;for(let i of e)n=Math.max(n,i);return n}static getBarcodeMetadata(e,n){let i;if(e==null||(i=e.getBarcodeMetadata())==null)return n==null?null:n.getBarcodeMetadata();let l;return n==null||(l=n.getBarcodeMetadata())==null?i:i.getColumnCount()!==l.getColumnCount()&&i.getErrorCorrectionLevel()!==l.getErrorCorrectionLevel()&&i.getRowCount()!==l.getRowCount()?null:i}static getRowIndicatorColumn(e,n,i,l,u,c){let h=new el(n,l);for(let m=0;m<2;m++){let v=m===0?1:-1,I=Math.trunc(Math.trunc(i.getX()));for(let O=Math.trunc(Math.trunc(i.getY()));O<=n.getMaxY()&&O>=n.getMinY();O+=v){let D=ot.detectCodeword(e,0,e.getWidth(),l,I,O,u,c);D!=null&&(h.setCodeword(O,D),l?I=D.getStartX():I=D.getEndX())}}return h}static adjustCodewordCount(e,n){let i=n[0][1],l=i.getValue(),u=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-ot.getNumberOfECCodeWords(e.getBarcodeECLevel());if(l.length===0){if(u<1||u>qe.MAX_CODEWORDS_IN_BARCODE)throw J.getNotFoundInstance();i.setValue(u)}else l[0]!==u&&i.setValue(u)}static createDecoderResult(e){let n=ot.createBarcodeMatrix(e);ot.adjustCodewordCount(e,n);let i=new Array,l=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),u=[],c=new Array;for(let m=0;m<e.getBarcodeRowCount();m++)for(let v=0;v<e.getBarcodeColumnCount();v++){let I=n[m][v+1].getValue(),O=m*e.getBarcodeColumnCount()+v;I.length===0?i.push(O):I.length===1?l[O]=I[0]:(c.push(O),u.push(I))}let h=new Array(u.length);for(let m=0;m<h.length;m++)h[m]=u[m];return ot.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),l,qe.toIntArray(i),qe.toIntArray(c),h)}static createDecoderResultFromAmbiguousValues(e,n,i,l,u){let c=new Int32Array(l.length),h=100;for(;h-- >0;){for(let m=0;m<c.length;m++)n[l[m]]=u[m][c[m]];try{return ot.decodeCodewords(n,e,i)}catch(m){if(!(m instanceof k))throw m}if(c.length===0)throw k.getChecksumInstance();for(let m=0;m<c.length;m++)if(c[m]<u[m].length-1){c[m]++;break}else if(c[m]=0,m===c.length-1)throw k.getChecksumInstance()}throw k.getChecksumInstance()}static createBarcodeMatrix(e){let n=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let l=0;l<n.length;l++)for(let u=0;u<n[l].length;u++)n[l][u]=new ri;let i=0;for(let l of e.getDetectionResultColumns()){if(l!=null){for(let u of l.getCodewords())if(u!=null){let c=u.getRowNumber();if(c>=0){if(c>=n.length)continue;n[c][i].setValue(u.getValue())}}}i++}return n}static isValidBarcodeColumn(e,n){return n>=0&&n<=e.getBarcodeColumnCount()+1}static getStartColumn(e,n,i,l){let u=l?1:-1,c=null;if(ot.isValidBarcodeColumn(e,n-u)&&(c=e.getDetectionResultColumn(n-u).getCodeword(i)),c!=null)return l?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(n).getCodewordNearby(i),c!=null)return l?c.getStartX():c.getEndX();if(ot.isValidBarcodeColumn(e,n-u)&&(c=e.getDetectionResultColumn(n-u).getCodewordNearby(i)),c!=null)return l?c.getEndX():c.getStartX();let h=0;for(;ot.isValidBarcodeColumn(e,n-u);){n-=u;for(let m of e.getDetectionResultColumn(n).getCodewords())if(m!=null)return(l?m.getEndX():m.getStartX())+u*h*(m.getEndX()-m.getStartX());h++}return l?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,n,i,l,u,c,h,m){u=ot.adjustCodewordStartColumn(e,n,i,l,u,c);let v=ot.getModuleBitCount(e,n,i,l,u,c);if(v==null)return null;let I,O=ft.sum(v);if(l)I=u+O;else{for(let G=0;G<v.length/2;G++){let Y=v[G];v[G]=v[v.length-1-G],v[v.length-1-G]=Y}I=u,u=I-O}if(!ot.checkCodewordSkew(O,h,m))return null;let D=On.getDecodedValue(v),V=qe.getCodeword(D);return V===-1?null:new Ci(u,I,ot.getCodewordBucketNumber(D),V)}static getModuleBitCount(e,n,i,l,u,c){let h=u,m=new Int32Array(8),v=0,I=l?1:-1,O=l;for(;(l?h<i:h>=n)&&v<m.length;)e.get(h,c)===O?(m[v]++,h+=I):(v++,O=!O);return v===m.length||h===(l?i:n)&&v===m.length-1?m:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,n,i,l,u,c){let h=u,m=l?-1:1;for(let v=0;v<2;v++){for(;(l?h>=n:h<i)&&l===e.get(h,c);){if(Math.abs(u-h)>ot.CODEWORD_SKEW_SIZE)return u;h+=m}m=-m,l=!l}return h}static checkCodewordSkew(e,n,i){return n-ot.CODEWORD_SKEW_SIZE<=e&&e<=i+ot.CODEWORD_SKEW_SIZE}static decodeCodewords(e,n,i){if(e.length===0)throw Q.getFormatInstance();let l=1<<n+1,u=ot.correctErrors(e,i,l);ot.verifyCodewordCount(e,l);let c=ae.decode(e,""+n);return c.setErrorsCorrected(u),c.setErasures(i.length),c}static correctErrors(e,n,i){if(n!=null&&n.length>i/2+ot.MAX_ERRORS||i<0||i>ot.MAX_EC_CODEWORDS)throw k.getChecksumInstance();return ot.errorCorrection.decode(e,i,n)}static verifyCodewordCount(e,n){if(e.length<4)throw Q.getFormatInstance();let i=e[0];if(i>e.length)throw Q.getFormatInstance();if(i===0)if(n<e.length)e[0]=e.length-n;else throw Q.getFormatInstance()}static getBitCountForCodeword(e){let n=new Int32Array(8),i=0,l=n.length-1;for(;!((e&1)!==i&&(i=e&1,l--,l<0));)n[l]++,e>>=1;return n}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return ot.getCodewordBucketNumber(ot.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let n=new Xr;for(let i=0;i<e.length;i++){n.format("Row %2d: ",i);for(let l=0;l<e[i].length;l++){let u=e[i][l];u.getValue().length===0?n.format("        ",null):n.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}n.format("%n")}return n.toString()}}ot.CODEWORD_SKEW_SIZE=2,ot.MAX_ERRORS=3,ot.MAX_EC_CODEWORDS=512,ot.errorCorrection=new zo;class Pn{decode(e,n=null){let i=Pn.decode(e,n,!1);if(i==null||i.length===0||i[0]==null)throw J.getNotFoundInstance();return i[0]}decodeMultiple(e,n=null){try{return Pn.decode(e,n,!0)}catch(i){throw i instanceof Q||i instanceof k?J.getNotFoundInstance():i}}static decode(e,n,i){const l=new Array,u=rt.detectMultiple(e,n,i);for(const c of u.getPoints()){const h=ot.decode(u.getBits(),c[4],c[5],c[6],c[7],Pn.getMinCodewordWidth(c),Pn.getMaxCodewordWidth(c)),m=new Ue(h.getText(),h.getRawBytes(),void 0,c,ve.PDF_417);m.putMetadata(Te.ERROR_CORRECTION_LEVEL,h.getECLevel());const v=h.getOther();v!=null&&m.putMetadata(Te.PDF417_EXTRA_METADATA,v),l.push(m)}return l.map(c=>c)}static getMaxWidth(e,n){return e==null||n==null?0:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMinWidth(e,n){return e==null||n==null?W.MAX_VALUE:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(Pn.getMaxWidth(e[0],e[4]),Pn.getMaxWidth(e[6],e[2])*qe.MODULES_IN_CODEWORD/qe.MODULES_IN_STOP_PATTERN),Math.max(Pn.getMaxWidth(e[1],e[5]),Pn.getMaxWidth(e[7],e[3])*qe.MODULES_IN_CODEWORD/qe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(Pn.getMinWidth(e[0],e[4]),Pn.getMinWidth(e[6],e[2])*qe.MODULES_IN_CODEWORD/qe.MODULES_IN_STOP_PATTERN),Math.min(Pn.getMinWidth(e[1],e[5]),Pn.getMinWidth(e[7],e[3])*qe.MODULES_IN_CODEWORD/qe.MODULES_IN_STOP_PATTERN)))}reset(){}}class Gi extends E{}Gi.kind="ReaderException";class ro{constructor(e,n){this.verbose=e===!0,n&&this.setHints(n)}decode(e,n){return n&&this.setHints(n),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const n=!d(e)&&e.get(ie.TRY_HARDER)===!0,i=d(e)?null:e.get(ie.POSSIBLE_FORMATS),l=new Array;if(!d(i)){const u=i.some(c=>c===ve.UPC_A||c===ve.UPC_E||c===ve.EAN_13||c===ve.EAN_8||c===ve.CODABAR||c===ve.CODE_39||c===ve.CODE_93||c===ve.CODE_128||c===ve.ITF||c===ve.RSS_14||c===ve.RSS_EXPANDED);u&&!n&&l.push(new Vi(e,this.verbose)),i.includes(ve.QR_CODE)&&l.push(new Wn),i.includes(ve.DATA_MATRIX)&&l.push(new Er),i.includes(ve.AZTEC)&&l.push(new Dt),i.includes(ve.PDF_417)&&l.push(new Pn),u&&n&&l.push(new Vi(e,this.verbose))}l.length===0&&(n||l.push(new Vi(e,this.verbose)),l.push(new Wn),l.push(new Er),l.push(new Dt),l.push(new Pn),n&&l.push(new Vi(e,this.verbose))),this.readers=l}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new Gi("No readers where selected, nothing can be read.");for(const n of this.readers)try{return n.decode(e,this.hints)}catch(i){if(i instanceof Gi)continue}throw new J("No MultiFormat Readers were able to detect the code.")}}class Ts extends We{constructor(e=null,n=500){const i=new ro;i.setHints(e),super(i,n)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class io extends We{constructor(e=500){super(new Pn,e)}}class nl extends We{constructor(e=500){super(new Wn,e)}}var Go;(function(_){_[_.ERROR_CORRECTION=0]="ERROR_CORRECTION",_[_.CHARACTER_SET=1]="CHARACTER_SET",_[_.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",_[_.MIN_SIZE=3]="MIN_SIZE",_[_.MAX_SIZE=4]="MAX_SIZE",_[_.MARGIN=5]="MARGIN",_[_.PDF417_COMPACT=6]="PDF417_COMPACT",_[_.PDF417_COMPACTION=7]="PDF417_COMPACTION",_[_.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",_[_.AZTEC_LAYERS=9]="AZTEC_LAYERS",_[_.QR_VERSION=10]="QR_VERSION"})(Go||(Go={}));var yn=Go;class Xo{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Je(e,Int32Array.from([1])))}buildGenerator(e){const n=this.cachedGenerators;if(e>=n.length){let i=n[n.length-1];const l=this.field;for(let u=n.length;u<=e;u++){const c=i.multiply(new Je(l,Int32Array.from([1,l.exp(u-1+l.getGeneratorBase())])));n.push(c),i=c}}return n[e]}encode(e,n){if(n===0)throw new T("No error correction bytes");const i=e.length-n;if(i<=0)throw new T("No data bytes provided");const l=this.buildGenerator(n),u=new Int32Array(i);j.arraycopy(e,0,u,0,i);let c=new Je(this.field,u);c=c.multiplyByMonomial(n,1);const m=c.divide(l)[1].getCoefficients(),v=n-m.length;for(let I=0;I<v;I++)e[i+I]=0;j.arraycopy(m,0,e,i+v,m.length)}}class Xt{constructor(){}static applyMaskPenaltyRule1(e){return Xt.applyMaskPenaltyRule1Internal(e,!0)+Xt.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let n=0;const i=e.getArray(),l=e.getWidth(),u=e.getHeight();for(let c=0;c<u-1;c++){const h=i[c];for(let m=0;m<l-1;m++){const v=h[m];v===h[m+1]&&v===i[c+1][m]&&v===i[c+1][m+1]&&n++}}return Xt.N2*n}static applyMaskPenaltyRule3(e){let n=0;const i=e.getArray(),l=e.getWidth(),u=e.getHeight();for(let c=0;c<u;c++)for(let h=0;h<l;h++){const m=i[c];h+6<l&&m[h]===1&&m[h+1]===0&&m[h+2]===1&&m[h+3]===1&&m[h+4]===1&&m[h+5]===0&&m[h+6]===1&&(Xt.isWhiteHorizontal(m,h-4,h)||Xt.isWhiteHorizontal(m,h+7,h+11))&&n++,c+6<u&&i[c][h]===1&&i[c+1][h]===0&&i[c+2][h]===1&&i[c+3][h]===1&&i[c+4][h]===1&&i[c+5][h]===0&&i[c+6][h]===1&&(Xt.isWhiteVertical(i,h,c-4,c)||Xt.isWhiteVertical(i,h,c+7,c+11))&&n++}return n*Xt.N3}static isWhiteHorizontal(e,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(let l=n;l<i;l++)if(e[l]===1)return!1;return!0}static isWhiteVertical(e,n,i,l){i=Math.max(i,0),l=Math.min(l,e.length);for(let u=i;u<l;u++)if(e[u][n]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let n=0;const i=e.getArray(),l=e.getWidth(),u=e.getHeight();for(let m=0;m<u;m++){const v=i[m];for(let I=0;I<l;I++)v[I]===1&&n++}const c=e.getHeight()*e.getWidth();return Math.floor(Math.abs(n*2-c)*10/c)*Xt.N4}static getDataMaskBit(e,n,i){let l,u;switch(e){case 0:l=i+n&1;break;case 1:l=i&1;break;case 2:l=n%3;break;case 3:l=(i+n)%3;break;case 4:l=Math.floor(i/2)+Math.floor(n/3)&1;break;case 5:u=i*n,l=(u&1)+u%3;break;case 6:u=i*n,l=(u&1)+u%3&1;break;case 7:u=i*n,l=u%3+(i+n&1)&1;break;default:throw new T("Invalid mask pattern: "+e)}return l===0}static applyMaskPenaltyRule1Internal(e,n){let i=0;const l=n?e.getHeight():e.getWidth(),u=n?e.getWidth():e.getHeight(),c=e.getArray();for(let h=0;h<l;h++){let m=0,v=-1;for(let I=0;I<u;I++){const O=n?c[h][I]:c[I][h];O===v?m++:(m>=5&&(i+=Xt.N1+(m-5)),m=1,v=O)}m>=5&&(i+=Xt.N1+(m-5))}return i}}Xt.N1=3,Xt.N2=3,Xt.N3=40,Xt.N4=10;class so{constructor(e,n){this.width=e,this.height=n;const i=new Array(n);for(let l=0;l!==n;l++)i[l]=new Uint8Array(e);this.bytes=i}getHeight(){return this.height}getWidth(){return this.width}get(e,n){return this.bytes[n][e]}getArray(){return this.bytes}setNumber(e,n,i){this.bytes[n][e]=i}setBoolean(e,n,i){this.bytes[n][e]=i?1:0}clear(e){for(const n of this.bytes)H.fill(n,e)}equals(e){if(!(e instanceof so))return!1;const n=e;if(this.width!==n.width||this.height!==n.height)return!1;for(let i=0,l=this.height;i<l;++i){const u=this.bytes[i],c=n.bytes[i];for(let h=0,m=this.width;h<m;++h)if(u[h]!==c[h])return!1}return!0}toString(){const e=new Oe;for(let n=0,i=this.height;n<i;++n){const l=this.bytes[n];for(let u=0,c=this.width;u<c;++u)switch(l[u]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class Ei{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new Oe;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Ei.NUM_MASK_PATTERNS}}Ei.NUM_MASK_PATTERNS=8;class jt extends E{}jt.kind="WriterException";class Ke{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,n,i,l,u){Ke.clearMatrix(u),Ke.embedBasicPatterns(i,u),Ke.embedTypeInfo(n,l,u),Ke.maybeEmbedVersionInfo(i,u),Ke.embedDataBits(e,l,u)}static embedBasicPatterns(e,n){Ke.embedPositionDetectionPatternsAndSeparators(n),Ke.embedDarkDotAtLeftBottomCorner(n),Ke.maybeEmbedPositionAdjustmentPatterns(e,n),Ke.embedTimingPatterns(n)}static embedTypeInfo(e,n,i){const l=new ee;Ke.makeTypeInfoBits(e,n,l);for(let u=0,c=l.getSize();u<c;++u){const h=l.get(l.getSize()-1-u),m=Ke.TYPE_INFO_COORDINATES[u],v=m[0],I=m[1];if(i.setBoolean(v,I,h),u<8){const O=i.getWidth()-u-1;i.setBoolean(O,8,h)}else{const D=i.getHeight()-7+(u-8);i.setBoolean(8,D,h)}}}static maybeEmbedVersionInfo(e,n){if(e.getVersionNumber()<7)return;const i=new ee;Ke.makeVersionInfoBits(e,i);let l=6*3-1;for(let u=0;u<6;++u)for(let c=0;c<3;++c){const h=i.get(l);l--,n.setBoolean(u,n.getHeight()-11+c,h),n.setBoolean(n.getHeight()-11+c,u,h)}}static embedDataBits(e,n,i){let l=0,u=-1,c=i.getWidth()-1,h=i.getHeight()-1;for(;c>0;){for(c===6&&(c-=1);h>=0&&h<i.getHeight();){for(let m=0;m<2;++m){const v=c-m;if(!Ke.isEmpty(i.get(v,h)))continue;let I;l<e.getSize()?(I=e.get(l),++l):I=!1,n!==255&&Xt.getDataMaskBit(n,v,h)&&(I=!I),i.setBoolean(v,h,I)}h+=u}u=-u,h+=u,c-=2}if(l!==e.getSize())throw new jt("Not all bits consumed: "+l+"/"+e.getSize())}static findMSBSet(e){return 32-W.numberOfLeadingZeros(e)}static calculateBCHCode(e,n){if(n===0)throw new T("0 polynomial");const i=Ke.findMSBSet(n);for(e<<=i-1;Ke.findMSBSet(e)>=i;)e^=n<<Ke.findMSBSet(e)-i;return e}static makeTypeInfoBits(e,n,i){if(!Ei.isValidMaskPattern(n))throw new jt("Invalid mask pattern");const l=e.getBits()<<3|n;i.appendBits(l,5);const u=Ke.calculateBCHCode(l,Ke.TYPE_INFO_POLY);i.appendBits(u,10);const c=new ee;if(c.appendBits(Ke.TYPE_INFO_MASK_PATTERN,15),i.xor(c),i.getSize()!==15)throw new jt("should not happen but we got: "+i.getSize())}static makeVersionInfoBits(e,n){n.appendBits(e.getVersionNumber(),6);const i=Ke.calculateBCHCode(e.getVersionNumber(),Ke.VERSION_INFO_POLY);if(n.appendBits(i,12),n.getSize()!==18)throw new jt("should not happen but we got: "+n.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let n=8;n<e.getWidth()-8;++n){const i=(n+1)%2;Ke.isEmpty(e.get(n,6))&&e.setNumber(n,6,i),Ke.isEmpty(e.get(6,n))&&e.setNumber(6,n,i)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new jt;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,n,i){for(let l=0;l<8;++l){if(!Ke.isEmpty(i.get(e+l,n)))throw new jt;i.setNumber(e+l,n,0)}}static embedVerticalSeparationPattern(e,n,i){for(let l=0;l<7;++l){if(!Ke.isEmpty(i.get(e,n+l)))throw new jt;i.setNumber(e,n+l,0)}}static embedPositionAdjustmentPattern(e,n,i){for(let l=0;l<5;++l){const u=Ke.POSITION_ADJUSTMENT_PATTERN[l];for(let c=0;c<5;++c)i.setNumber(e+c,n+l,u[c])}}static embedPositionDetectionPattern(e,n,i){for(let l=0;l<7;++l){const u=Ke.POSITION_DETECTION_PATTERN[l];for(let c=0;c<7;++c)i.setNumber(e+c,n+l,u[c])}}static embedPositionDetectionPatternsAndSeparators(e){const n=Ke.POSITION_DETECTION_PATTERN[0].length;Ke.embedPositionDetectionPattern(0,0,e),Ke.embedPositionDetectionPattern(e.getWidth()-n,0,e),Ke.embedPositionDetectionPattern(0,e.getWidth()-n,e);const i=8;Ke.embedHorizontalSeparationPattern(0,i-1,e),Ke.embedHorizontalSeparationPattern(e.getWidth()-i,i-1,e),Ke.embedHorizontalSeparationPattern(0,e.getWidth()-i,e);const l=7;Ke.embedVerticalSeparationPattern(l,0,e),Ke.embedVerticalSeparationPattern(e.getHeight()-l-1,0,e),Ke.embedVerticalSeparationPattern(l,e.getHeight()-l,e)}static maybeEmbedPositionAdjustmentPatterns(e,n){if(e.getVersionNumber()<2)return;const i=e.getVersionNumber()-1,l=Ke.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[i];for(let u=0,c=l.length;u!==c;u++){const h=l[u];if(h>=0)for(let m=0;m!==c;m++){const v=l[m];v>=0&&Ke.isEmpty(n.get(v,h))&&Ke.embedPositionAdjustmentPattern(v-2,h-2,n)}}}}Ke.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ke.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ke.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ke.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ke.VERSION_INFO_POLY=7973,Ke.TYPE_INFO_POLY=1335,Ke.TYPE_INFO_MASK_PATTERN=21522;class Lu{constructor(e,n){this.dataBytes=e,this.errorCorrectionBytes=n}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class zt{constructor(){}static calculateMaskPenalty(e){return Xt.applyMaskPenaltyRule1(e)+Xt.applyMaskPenaltyRule2(e)+Xt.applyMaskPenaltyRule3(e)+Xt.applyMaskPenaltyRule4(e)}static encode(e,n,i=null){let l=zt.DEFAULT_BYTE_MODE_ENCODING;const u=i!==null&&i.get(yn.CHARACTER_SET)!==void 0;u&&(l=i.get(yn.CHARACTER_SET).toString());const c=this.chooseMode(e,l),h=new ee;if(c===Ye.BYTE&&(u||zt.DEFAULT_BYTE_MODE_ENCODING!==l)){const Se=q.getCharacterSetECIByName(l);Se!==void 0&&this.appendECI(Se,h)}this.appendModeInfo(c,h);const m=new ee;this.appendBytes(e,c,m,l);let v;if(i!==null&&i.get(yn.QR_VERSION)!==void 0){const Se=Number.parseInt(i.get(yn.QR_VERSION).toString(),10);v=Ge.getVersionForNumber(Se);const xe=this.calculateBitsNeeded(c,h,m,v);if(!this.willFit(xe,v,n))throw new jt("Data too big for requested version")}else v=this.recommendVersion(n,c,h,m);const I=new ee;I.appendBitArray(h);const O=c===Ye.BYTE?m.getSizeInBytes():e.length;this.appendLengthInfo(O,v,c,I),I.appendBitArray(m);const D=v.getECBlocksForLevel(n),V=v.getTotalCodewords()-D.getTotalECCodewords();this.terminateBits(V,I);const G=this.interleaveWithECBytes(I,v.getTotalCodewords(),V,D.getNumBlocks()),Y=new Ei;Y.setECLevel(n),Y.setMode(c),Y.setVersion(v);const $=v.getDimensionForVersion(),se=new so($,$),Ee=this.chooseMaskPattern(G,n,v,se);return Y.setMaskPattern(Ee),Ke.buildMatrix(G,n,v,Ee,se),Y.setMatrix(se),Y}static recommendVersion(e,n,i,l){const u=this.calculateBitsNeeded(n,i,l,Ge.getVersionForNumber(1)),c=this.chooseVersion(u,e),h=this.calculateBitsNeeded(n,i,l,c);return this.chooseVersion(h,e)}static calculateBitsNeeded(e,n,i,l){return n.getSize()+e.getCharacterCountBits(l)+i.getSize()}static getAlphanumericCode(e){return e<zt.ALPHANUMERIC_TABLE.length?zt.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,n=null){if(q.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(e))return Ye.KANJI;let i=!1,l=!1;for(let u=0,c=e.length;u<c;++u){const h=e.charAt(u);if(zt.isDigit(h))i=!0;else if(this.getAlphanumericCode(h.charCodeAt(0))!==-1)l=!0;else return Ye.BYTE}return l?Ye.ALPHANUMERIC:i?Ye.NUMERIC:Ye.BYTE}static isOnlyDoubleByteKanji(e){let n;try{n=je.encode(e,q.SJIS)}catch{return!1}const i=n.length;if(i%2!==0)return!1;for(let l=0;l<i;l+=2){const u=n[l]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(e,n,i,l){let u=Number.MAX_SAFE_INTEGER,c=-1;for(let h=0;h<Ei.NUM_MASK_PATTERNS;h++){Ke.buildMatrix(e,n,i,h,l);let m=this.calculateMaskPenalty(l);m<u&&(u=m,c=h)}return c}static chooseVersion(e,n){for(let i=1;i<=40;i++){const l=Ge.getVersionForNumber(i);if(zt.willFit(e,l,n))return l}throw new jt("Data too big")}static willFit(e,n,i){const l=n.getTotalCodewords(),c=n.getECBlocksForLevel(i).getTotalECCodewords(),h=l-c,m=(e+7)/8;return h>=m}static terminateBits(e,n){const i=e*8;if(n.getSize()>i)throw new jt("data bits cannot fit in the QR Code"+n.getSize()+" > "+i);for(let c=0;c<4&&n.getSize()<i;++c)n.appendBit(!1);const l=n.getSize()&7;if(l>0)for(let c=l;c<8;c++)n.appendBit(!1);const u=e-n.getSizeInBytes();for(let c=0;c<u;++c)n.appendBits(c&1?17:236,8);if(n.getSize()!==i)throw new jt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,n,i,l,u,c){if(l>=i)throw new jt("Block ID too large");const h=e%i,m=i-h,v=Math.floor(e/i),I=v+1,O=Math.floor(n/i),D=O+1,V=v-O,G=I-D;if(V!==G)throw new jt("EC bytes mismatch");if(i!==m+h)throw new jt("RS blocks mismatch");if(e!==(O+V)*m+(D+G)*h)throw new jt("Total bytes mismatch");l<m?(u[0]=O,c[0]=V):(u[0]=D,c[0]=G)}static interleaveWithECBytes(e,n,i,l){if(e.getSizeInBytes()!==i)throw new jt("Number of bits and data bytes does not match");let u=0,c=0,h=0;const m=new Array;for(let I=0;I<l;++I){const O=new Int32Array(1),D=new Int32Array(1);zt.getNumDataBytesAndNumECBytesForBlockID(n,i,l,I,O,D);const V=O[0],G=new Uint8Array(V);e.toBytes(8*u,G,0,V);const Y=zt.generateECBytes(G,D[0]);m.push(new Lu(G,Y)),c=Math.max(c,V),h=Math.max(h,Y.length),u+=O[0]}if(i!==u)throw new jt("Data bytes does not match offset");const v=new ee;for(let I=0;I<c;++I)for(const O of m){const D=O.getDataBytes();I<D.length&&v.appendBits(D[I],8)}for(let I=0;I<h;++I)for(const O of m){const D=O.getErrorCorrectionBytes();I<D.length&&v.appendBits(D[I],8)}if(n!==v.getSizeInBytes())throw new jt("Interleaving error: "+n+" and "+v.getSizeInBytes()+" differ.");return v}static generateECBytes(e,n){const i=e.length,l=new Int32Array(i+n);for(let c=0;c<i;c++)l[c]=e[c]&255;new Xo(Ve.QR_CODE_FIELD_256).encode(l,n);const u=new Uint8Array(n);for(let c=0;c<n;c++)u[c]=l[i+c];return u}static appendModeInfo(e,n){n.appendBits(e.getBits(),4)}static appendLengthInfo(e,n,i,l){const u=i.getCharacterCountBits(n);if(e>=1<<u)throw new jt(e+" is bigger than "+((1<<u)-1));l.appendBits(e,u)}static appendBytes(e,n,i,l){switch(n){case Ye.NUMERIC:zt.appendNumericBytes(e,i);break;case Ye.ALPHANUMERIC:zt.appendAlphanumericBytes(e,i);break;case Ye.BYTE:zt.append8BitBytes(e,i,l);break;case Ye.KANJI:zt.appendKanjiBytes(e,i);break;default:throw new jt("Invalid mode: "+n)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const n=zt.getDigit(e);return n>=0&&n<=9}static appendNumericBytes(e,n){const i=e.length;let l=0;for(;l<i;){const u=zt.getDigit(e.charAt(l));if(l+2<i){const c=zt.getDigit(e.charAt(l+1)),h=zt.getDigit(e.charAt(l+2));n.appendBits(u*100+c*10+h,10),l+=3}else if(l+1<i){const c=zt.getDigit(e.charAt(l+1));n.appendBits(u*10+c,7),l+=2}else n.appendBits(u,4),l++}}static appendAlphanumericBytes(e,n){const i=e.length;let l=0;for(;l<i;){const u=zt.getAlphanumericCode(e.charCodeAt(l));if(u===-1)throw new jt;if(l+1<i){const c=zt.getAlphanumericCode(e.charCodeAt(l+1));if(c===-1)throw new jt;n.appendBits(u*45+c,11),l+=2}else n.appendBits(u,6),l++}}static append8BitBytes(e,n,i){let l;try{l=je.encode(e,i)}catch(u){throw new jt(u)}for(let u=0,c=l.length;u!==c;u++){const h=l[u];n.appendBits(h,8)}}static appendKanjiBytes(e,n){let i;try{i=je.encode(e,q.SJIS)}catch(u){throw new jt(u)}const l=i.length;for(let u=0;u<l;u+=2){const c=i[u]&255,h=i[u+1]&255,m=c<<8&4294967295|h;let v=-1;if(m>=33088&&m<=40956?v=m-33088:m>=57408&&m<=60351&&(v=m-49472),v===-1)throw new jt("Invalid byte sequence");const I=(v>>8)*192+(v&255);n.appendBits(I,13)}}static appendECI(e,n){n.appendBits(Ye.ECI.getBits(),4),n.appendBits(e.getValue(),8)}}zt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),zt.DEFAULT_BYTE_MODE_ENCODING=q.UTF8.getName();class Ai{write(e,n,i,l=null){if(e.length===0)throw new T("Found empty contents");if(n<0||i<0)throw new T("Requested dimensions are too small: "+n+"x"+i);let u=Bt.L,c=Ai.QUIET_ZONE_SIZE;l!==null&&(l.get(yn.ERROR_CORRECTION)!==void 0&&(u=Bt.fromString(l.get(yn.ERROR_CORRECTION).toString())),l.get(yn.MARGIN)!==void 0&&(c=Number.parseInt(l.get(yn.MARGIN).toString(),10)));const h=zt.encode(e,u,l);return this.renderResult(h,n,i,c)}writeToDom(e,n,i,l,u=null){typeof e=="string"&&(e=document.querySelector(e));const c=this.write(n,i,l,u);e&&e.appendChild(c)}renderResult(e,n,i,l){const u=e.getMatrix();if(u===null)throw new Ot;const c=u.getWidth(),h=u.getHeight(),m=c+l*2,v=h+l*2,I=Math.max(n,m),O=Math.max(i,v),D=Math.min(Math.floor(I/m),Math.floor(O/v)),V=Math.floor((I-c*D)/2),G=Math.floor((O-h*D)/2),Y=this.createSVGElement(I,O);for(let $=0,se=G;$<h;$++,se+=D)for(let Ee=0,Se=V;Ee<c;Ee++,Se+=D)if(u.get(Ee,$)===1){const xe=this.createSvgRectElement(Se,se,D,D);Y.appendChild(xe)}return Y}createSVGElement(e,n){const i=document.createElementNS(Ai.SVG_NS,"svg");return i.setAttributeNS(null,"height",e.toString()),i.setAttributeNS(null,"width",n.toString()),i}createSvgRectElement(e,n,i,l){const u=document.createElementNS(Ai.SVG_NS,"rect");return u.setAttributeNS(null,"x",e.toString()),u.setAttributeNS(null,"y",n.toString()),u.setAttributeNS(null,"height",i.toString()),u.setAttributeNS(null,"width",l.toString()),u.setAttributeNS(null,"fill","#000000"),u}}Ai.QUIET_ZONE_SIZE=4,Ai.SVG_NS="http://www.w3.org/2000/svg";class Xi{encode(e,n,i,l,u){if(e.length===0)throw new T("Found empty contents");if(n!==ve.QR_CODE)throw new T("Can only encode QR_CODE, but got "+n);if(i<0||l<0)throw new T(`Requested dimensions are too small: ${i}x${l}`);let c=Bt.L,h=Xi.QUIET_ZONE_SIZE;u!==null&&(u.get(yn.ERROR_CORRECTION)!==void 0&&(c=Bt.fromString(u.get(yn.ERROR_CORRECTION).toString())),u.get(yn.MARGIN)!==void 0&&(h=Number.parseInt(u.get(yn.MARGIN).toString(),10)));const m=zt.encode(e,c,u);return Xi.renderResult(m,i,l,h)}static renderResult(e,n,i,l){const u=e.getMatrix();if(u===null)throw new Ot;const c=u.getWidth(),h=u.getHeight(),m=c+l*2,v=h+l*2,I=Math.max(n,m),O=Math.max(i,v),D=Math.min(Math.floor(I/m),Math.floor(O/v)),V=Math.floor((I-c*D)/2),G=Math.floor((O-h*D)/2),Y=new Le(I,O);for(let $=0,se=G;$<h;$++,se+=D)for(let Ee=0,Se=V;Ee<c;Ee++,Se+=D)u.get(Ee,$)===1&&Y.setRegion(Se,se,D,D);return Y}}Xi.QUIET_ZONE_SIZE=4;class Bu{encode(e,n,i,l,u){let c;switch(n){case ve.QR_CODE:c=new Xi;break;default:throw new T("No encoder available for format "+n)}return c.encode(e,n,i,l,u)}}class Pr extends fe{constructor(e,n,i,l,u,c,h,m){if(super(c,h),this.yuvData=e,this.dataWidth=n,this.dataHeight=i,this.left=l,this.top=u,l+c>n||u+h>i)throw new T("Crop rectangle does not fit within image data.");m&&this.reverseHorizontal(c,h)}getRow(e,n){if(e<0||e>=this.getHeight())throw new T("Requested row is outside the image: "+e);const i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));const l=(e+this.top)*this.dataWidth+this.left;return j.arraycopy(this.yuvData,l,n,0,i),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.yuvData;const i=e*n,l=new Uint8ClampedArray(i);let u=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return j.arraycopy(this.yuvData,u,l,0,i),l;for(let c=0;c<n;c++){const h=c*e;j.arraycopy(this.yuvData,u,l,h,e),u+=this.dataWidth}return l}isCropSupported(){return!0}crop(e,n,i,l){return new Pr(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+n,i,l,!1)}renderThumbnail(){const e=this.getWidth()/Pr.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/Pr.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(e*n),l=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let c=0;c<n;c++){const h=c*e;for(let m=0;m<e;m++){const v=l[u+m*Pr.THUMBNAIL_SCALE_FACTOR]&255;i[h+m]=4278190080|v*65793}u+=this.dataWidth*Pr.THUMBNAIL_SCALE_FACTOR}return i}getThumbnailWidth(){return this.getWidth()/Pr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Pr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,n){const i=this.yuvData;for(let l=0,u=this.top*this.dataWidth+this.left;l<n;l++,u+=this.dataWidth){const c=u+e/2;for(let h=u,m=u+e-1;h<c;h++,m--){const v=i[h];i[h]=i[m],i[m]=v}}}invert(){return new pe(this)}}Pr.THUMBNAIL_SCALE_FACTOR=2;class Is extends fe{constructor(e,n,i,l,u,c,h){if(super(n,i),this.dataWidth=l,this.dataHeight=u,this.left=c,this.top=h,e.BYTES_PER_ELEMENT===4){const m=n*i,v=new Uint8ClampedArray(m);for(let I=0;I<m;I++){const O=e[I],D=O>>16&255,V=O>>7&510,G=O&255;v[I]=(D+V+G)/4&255}this.luminances=v}else this.luminances=e;if(l===void 0&&(this.dataWidth=n),u===void 0&&(this.dataHeight=i),c===void 0&&(this.left=0),h===void 0&&(this.top=0),this.left+n>this.dataWidth||this.top+i>this.dataHeight)throw new T("Crop rectangle does not fit within image data.")}getRow(e,n){if(e<0||e>=this.getHeight())throw new T("Requested row is outside the image: "+e);const i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));const l=(e+this.top)*this.dataWidth+this.left;return j.arraycopy(this.luminances,l,n,0,i),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.luminances;const i=e*n,l=new Uint8ClampedArray(i);let u=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return j.arraycopy(this.luminances,u,l,0,i),l;for(let c=0;c<n;c++){const h=c*e;j.arraycopy(this.luminances,u,l,h,e),u+=this.dataWidth}return l}isCropSupported(){return!0}crop(e,n,i,l){return new Is(this.luminances,i,l,this.dataWidth,this.dataHeight,this.left+e,this.top+n)}invert(){return new pe(this)}}class rl extends q{static forName(e){return this.getCharacterSetECIByName(e)}}class Yo{}Yo.ISO_8859_1=q.ISO8859_1;class il{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Ko{static singletonList(e){return[e]}static min(e,n){return e.sort(n)[0]}}class Fu{constructor(e){this.previous=e}getPrevious(){return this.previous}}class Yi extends Fu{constructor(e,n,i){super(e),this.value=n,this.bitCount=i}appendTo(e,n){e.appendBits(this.value,this.bitCount)}add(e,n){return new Yi(this,e,n)}addBinaryShift(e,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Yi(this,e,n)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+W.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Zo extends Yi{constructor(e,n,i){super(e,0,0),this.binaryShiftStart=n,this.binaryShiftByteCount=i}appendTo(e,n){for(let i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):i===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(n[this.binaryShiftStart+i],8)}addBinaryShift(e,n){return new Zo(this,e,n)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function ju(_,e,n){return new Zo(_,e,n)}function Ns(_,e,n){return new Yi(_,e,n)}const Vu=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ii=0,Ki=1,jn=2,sl=3,Sr=4,ol=new Yi(null,0,0),oo=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function al(_){for(let e of _)H.fill(e,-1);return _[ii][Sr]=0,_[Ki][Sr]=0,_[Ki][ii]=28,_[sl][Sr]=0,_[jn][Sr]=0,_[jn][ii]=15,_}const $o=al(H.createInt32Array(6,6));class Hn{constructor(e,n,i,l){this.token=e,this.mode=n,this.binaryShiftByteCount=i,this.bitCount=l}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,n){let i=this.bitCount,l=this.token;if(e!==this.mode){let c=oo[this.mode][e];l=Ns(l,c&65535,c>>16),i+=c>>16}let u=e===jn?4:5;return l=Ns(l,n,u),new Hn(l,e,0,i+u)}shiftAndAppend(e,n){let i=this.token,l=this.mode===jn?4:5;return i=Ns(i,$o[this.mode][e],l),i=Ns(i,n,5),new Hn(i,this.mode,0,this.bitCount+l+5)}addBinaryShiftChar(e){let n=this.token,i=this.mode,l=this.bitCount;if(this.mode===Sr||this.mode===jn){let h=oo[i][ii];n=Ns(n,h&65535,h>>16),l+=h>>16,i=ii}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,c=new Hn(n,i,this.binaryShiftByteCount+1,l+u);return c.binaryShiftByteCount===2078&&(c=c.endBinaryShift(e+1)),c}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let n=this.token;return n=ju(n,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new Hn(n,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let n=this.bitCount+(oo[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?n+=Hn.calculateBinaryShiftCost(e)-Hn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(n+=10),n<=e.bitCount}toBitArray(e){let n=[];for(let l=this.endBinaryShift(e.length).token;l!==null;l=l.getPrevious())n.unshift(l);let i=new ee;for(const l of n)l.appendTo(i,e);return i}toString(){return be.format("%s bits=%d bytes=%d",Vu[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}Hn.INITIAL_STATE=new Hn(ol,ii,0,0);function Uu(_){const e=be.getCharCode(" "),n=be.getCharCode("."),i=be.getCharCode(",");_[ii][e]=1;const l=be.getCharCode("Z"),u=be.getCharCode("A");for(let D=u;D<=l;D++)_[ii][D]=D-u+2;_[Ki][e]=1;const c=be.getCharCode("z"),h=be.getCharCode("a");for(let D=h;D<=c;D++)_[Ki][D]=D-h+2;_[jn][e]=1;const m=be.getCharCode("9"),v=be.getCharCode("0");for(let D=v;D<=m;D++)_[jn][D]=D-v+2;_[jn][i]=12,_[jn][n]=13;const I=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let D=0;D<I.length;D++)_[sl][be.getCharCode(I[D])]=D;const O=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let D=0;D<O.length;D++)be.getCharCode(O[D])>0&&(_[Sr][be.getCharCode(O[D])]=D);return _}const qo=Uu(H.createInt32Array(5,256));class Rs{constructor(e){this.text=e}encode(){const e=be.getCharCode(" "),n=be.getCharCode(`
`);let i=Ko.singletonList(Hn.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let c,h=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case be.getCharCode("\r"):c=h===n?2:0;break;case be.getCharCode("."):c=h===e?3:0;break;case be.getCharCode(","):c=h===e?4:0;break;case be.getCharCode(":"):c=h===e?5:0;break;default:c=0}c>0?(i=Rs.updateStateListForPair(i,u,c),u++):i=this.updateStateListForChar(i,u)}return Ko.min(i,(u,c)=>u.getBitCount()-c.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,n){const i=[];for(let l of e)this.updateStateForChar(l,n,i);return Rs.simplifyStates(i)}updateStateForChar(e,n,i){let l=this.text[n]&255,u=qo[e.getMode()][l]>0,c=null;for(let h=0;h<=Sr;h++){let m=qo[h][l];if(m>0){if(c==null&&(c=e.endBinaryShift(n)),!u||h===e.getMode()||h===jn){const v=c.latchAndAppend(h,m);i.push(v)}if(!u&&$o[e.getMode()][h]>=0){const v=c.shiftAndAppend(h,m);i.push(v)}}}if(e.getBinaryShiftByteCount()>0||qo[e.getMode()][l]===0){let h=e.addBinaryShiftChar(n);i.push(h)}}static updateStateListForPair(e,n,i){const l=[];for(let u of e)this.updateStateForPair(u,n,i,l);return this.simplifyStates(l)}static updateStateForPair(e,n,i,l){let u=e.endBinaryShift(n);if(l.push(u.latchAndAppend(Sr,i)),e.getMode()!==Sr&&l.push(u.shiftAndAppend(Sr,i)),i===3||i===4){let c=u.latchAndAppend(jn,16-i).latchAndAppend(jn,1);l.push(c)}if(e.getBinaryShiftByteCount()>0){let c=e.addBinaryShiftChar(n).addBinaryShiftChar(n+1);l.push(c)}}static simplifyStates(e){let n=[];for(const i of e){let l=!0;for(const u of n){if(u.isBetterThanOrEqualTo(i)){l=!1;break}i.isBetterThanOrEqualTo(u)&&(n=n.filter(c=>c!==u))}l&&n.push(i)}return n}}class Et{constructor(){}static encodeBytes(e){return Et.encode(e,Et.DEFAULT_EC_PERCENT,Et.DEFAULT_AZTEC_LAYERS)}static encode(e,n,i){let l=new Rs(e).encode(),u=W.truncDivision(l.getSize()*n,100)+11,c=l.getSize()+u,h,m,v,I,O;if(i!==Et.DEFAULT_AZTEC_LAYERS){if(h=i<0,m=Math.abs(i),m>(h?Et.MAX_NB_BITS_COMPACT:Et.MAX_NB_BITS))throw new T(be.format("Illegal value %s for layers",i));v=Et.totalBitsInLayer(m,h),I=Et.WORD_SIZE[m];let xe=v-v%I;if(O=Et.stuffBits(l,I),O.getSize()+u>xe)throw new T("Data to large for user specified layer");if(h&&O.getSize()>I*64)throw new T("Data to large for user specified layer")}else{I=0,O=null;for(let xe=0;;xe++){if(xe>Et.MAX_NB_BITS)throw new T("Data too large for an Aztec code");if(h=xe<=3,m=h?xe+1:xe,v=Et.totalBitsInLayer(m,h),c>v)continue;(O==null||I!==Et.WORD_SIZE[m])&&(I=Et.WORD_SIZE[m],O=Et.stuffBits(l,I));let mt=v-v%I;if(!(h&&O.getSize()>I*64)&&O.getSize()+u<=mt)break}}let D=Et.generateCheckWords(O,v,I),V=O.getSize()/I,G=Et.generateModeMessage(h,m,V),Y=(h?11:14)+m*4,$=new Int32Array(Y),se;if(h){se=Y;for(let xe=0;xe<$.length;xe++)$[xe]=xe}else{se=Y+1+2*W.truncDivision(W.truncDivision(Y,2)-1,15);let xe=W.truncDivision(Y,2),mt=W.truncDivision(se,2);for(let it=0;it<xe;it++){let Qn=it+W.truncDivision(it,15);$[xe-it-1]=mt-Qn-1,$[xe+it]=mt+Qn+1}}let Ee=new Le(se);for(let xe=0,mt=0;xe<m;xe++){let it=(m-xe)*4+(h?9:12);for(let Qn=0;Qn<it;Qn++){let br=Qn*2;for(let wn=0;wn<2;wn++)D.get(mt+br+wn)&&Ee.set($[xe*2+wn],$[xe*2+Qn]),D.get(mt+it*2+br+wn)&&Ee.set($[xe*2+Qn],$[Y-1-xe*2-wn]),D.get(mt+it*4+br+wn)&&Ee.set($[Y-1-xe*2-wn],$[Y-1-xe*2-Qn]),D.get(mt+it*6+br+wn)&&Ee.set($[Y-1-xe*2-Qn],$[xe*2+wn])}mt+=it*8}if(Et.drawModeMessage(Ee,h,se,G),h)Et.drawBullsEye(Ee,W.truncDivision(se,2),5);else{Et.drawBullsEye(Ee,W.truncDivision(se,2),7);for(let xe=0,mt=0;xe<W.truncDivision(Y,2)-1;xe+=15,mt+=16)for(let it=W.truncDivision(se,2)&1;it<se;it+=2)Ee.set(W.truncDivision(se,2)-mt,it),Ee.set(W.truncDivision(se,2)+mt,it),Ee.set(it,W.truncDivision(se,2)-mt),Ee.set(it,W.truncDivision(se,2)+mt)}let Se=new il;return Se.setCompact(h),Se.setSize(se),Se.setLayers(m),Se.setCodeWords(V),Se.setMatrix(Ee),Se}static drawBullsEye(e,n,i){for(let l=0;l<i;l+=2)for(let u=n-l;u<=n+l;u++)e.set(u,n-l),e.set(u,n+l),e.set(n-l,u),e.set(n+l,u);e.set(n-i,n-i),e.set(n-i+1,n-i),e.set(n-i,n-i+1),e.set(n+i,n-i),e.set(n+i,n-i+1),e.set(n+i,n+i-1)}static generateModeMessage(e,n,i){let l=new ee;return e?(l.appendBits(n-1,2),l.appendBits(i-1,6),l=Et.generateCheckWords(l,28,4)):(l.appendBits(n-1,5),l.appendBits(i-1,11),l=Et.generateCheckWords(l,40,4)),l}static drawModeMessage(e,n,i,l){let u=W.truncDivision(i,2);if(n)for(let c=0;c<7;c++){let h=u-3+c;l.get(c)&&e.set(h,u-5),l.get(c+7)&&e.set(u+5,h),l.get(20-c)&&e.set(h,u+5),l.get(27-c)&&e.set(u-5,h)}else for(let c=0;c<10;c++){let h=u-5+c+W.truncDivision(c,5);l.get(c)&&e.set(h,u-7),l.get(c+10)&&e.set(u+7,h),l.get(29-c)&&e.set(h,u+7),l.get(39-c)&&e.set(u-7,h)}}static generateCheckWords(e,n,i){let l=e.getSize()/i,u=new Xo(Et.getGF(i)),c=W.truncDivision(n,i),h=Et.bitsToWords(e,i,c);u.encode(h,c-l);let m=n%i,v=new ee;v.appendBits(0,m);for(const I of Array.from(h))v.appendBits(I,i);return v}static bitsToWords(e,n,i){let l=new Int32Array(i),u,c;for(u=0,c=e.getSize()/n;u<c;u++){let h=0;for(let m=0;m<n;m++)h|=e.get(u*n+m)?1<<n-m-1:0;l[u]=h}return l}static getGF(e){switch(e){case 4:return Ve.AZTEC_PARAM;case 6:return Ve.AZTEC_DATA_6;case 8:return Ve.AZTEC_DATA_8;case 10:return Ve.AZTEC_DATA_10;case 12:return Ve.AZTEC_DATA_12;default:throw new T("Unsupported word size "+e)}}static stuffBits(e,n){let i=new ee,l=e.getSize(),u=(1<<n)-2;for(let c=0;c<l;c+=n){let h=0;for(let m=0;m<n;m++)(c+m>=l||e.get(c+m))&&(h|=1<<n-1-m);(h&u)===u?(i.appendBits(h&u,n),c--):h&u?i.appendBits(h,n):(i.appendBits(h|1,n),c--)}return i}static totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}Et.DEFAULT_EC_PERCENT=33,Et.DEFAULT_AZTEC_LAYERS=0,Et.MAX_NB_BITS=32,Et.MAX_NB_BITS_COMPACT=4,Et.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class _s{encode(e,n,i,l){return this.encodeWithHints(e,n,i,l,null)}encodeWithHints(e,n,i,l,u){let c=Yo.ISO_8859_1,h=Et.DEFAULT_EC_PERCENT,m=Et.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(yn.CHARACTER_SET)&&(c=rl.forName(u.get(yn.CHARACTER_SET).toString())),u.has(yn.ERROR_CORRECTION)&&(h=W.parseInt(u.get(yn.ERROR_CORRECTION).toString())),u.has(yn.AZTEC_LAYERS)&&(m=W.parseInt(u.get(yn.AZTEC_LAYERS).toString()))),_s.encodeLayers(e,n,i,l,c,h,m)}static encodeLayers(e,n,i,l,u,c,h){if(n!==ve.AZTEC)throw new T("Can only encode AZTEC, but got "+n);let m=Et.encode(be.getBytes(e,u),c,h);return _s.renderResult(m,i,l)}static renderResult(e,n,i){let l=e.getMatrix();if(l==null)throw new Ot;let u=l.getWidth(),c=l.getHeight(),h=Math.max(n,u),m=Math.max(i,c),v=Math.min(h/u,m/c),I=(h-u*v)/2,O=(m-c*v)/2,D=new Le(h,m);for(let V=0,G=O;V<c;V++,G+=v)for(let Y=0,$=I;Y<u;Y++,$+=v)l.get(Y,V)&&D.setRegion($,G,v,v);return D}}a.AbstractExpandedDecoder=vs,a.ArgumentException=S,a.ArithmeticException=ct,a.AztecCode=il,a.AztecCodeReader=Dt,a.AztecCodeWriter=_s,a.AztecDecoder=St,a.AztecDetector=nn,a.AztecDetectorResult=Mt,a.AztecEncoder=Et,a.AztecHighLevelEncoder=Rs,a.AztecPoint=Ct,a.BarcodeFormat=ve,a.Binarizer=L,a.BinaryBitmap=R,a.BitArray=ee,a.BitMatrix=Le,a.BitSource=jo,a.BrowserAztecCodeReader=Ln,a.BrowserBarcodeReader=$a,a.BrowserCodeReader=We,a.BrowserDatamatrixCodeReader=ku,a.BrowserMultiFormatReader=Ts,a.BrowserPDF417Reader=io,a.BrowserQRCodeReader=nl,a.BrowserQRCodeSvgWriter=Ai,a.CharacterSetECI=q,a.ChecksumException=k,a.Code128Reader=Ae,a.Code39Reader=Lt,a.DataMatrixDecodedBitStreamParser=Cr,a.DataMatrixReader=Er,a.DecodeHintType=ie,a.DecoderResult=Ne,a.DefaultGridSampler=$n,a.DetectorResult=gn,a.EAN13Reader=Bn,a.EncodeHintType=yn,a.Exception=E,a.FormatException=Q,a.GenericGF=Ve,a.GenericGFPoly=Je,a.GlobalHistogramBinarizer=we,a.GridSampler=pt,a.GridSamplerInstance=Tt,a.HTMLCanvasElementLuminanceSource=ge,a.HybridBinarizer=oe,a.ITFReader=It,a.IllegalArgumentException=T,a.IllegalStateException=Ot,a.InvertedLuminanceSource=pe,a.LuminanceSource=fe,a.MathUtils=ft,a.MultiFormatOneDReader=Vi,a.MultiFormatReader=ro,a.MultiFormatWriter=Bu,a.NotFoundException=J,a.OneDReader=kt,a.PDF417DecodedBitStreamParser=ae,a.PDF417DecoderErrorCorrection=zo,a.PDF417Reader=Pn,a.PDF417ResultMetadata=to,a.PerspectiveTransform=nt,a.PlanarYUVLuminanceSource=Pr,a.QRCodeByteMatrix=so,a.QRCodeDataMask=ht,a.QRCodeDecodedBitStreamParser=Gt,a.QRCodeDecoderErrorCorrectionLevel=Bt,a.QRCodeDecoderFormatInformation=Rn,a.QRCodeEncoder=zt,a.QRCodeEncoderQRCode=Ei,a.QRCodeMaskUtil=Xt,a.QRCodeMatrixUtil=Ke,a.QRCodeMode=Ye,a.QRCodeReader=Wn,a.QRCodeVersion=Ge,a.QRCodeWriter=Xi,a.RGBLuminanceSource=Is,a.RSS14Reader=Wt,a.RSSExpandedReader=he,a.ReaderException=Gi,a.ReedSolomonDecoder=En,a.ReedSolomonEncoder=Xo,a.ReedSolomonException=qt,a.Result=Ue,a.ResultMetadataType=Te,a.ResultPoint=Pe,a.StringUtils=be,a.UnsupportedOperationException=Re,a.VideoInputDevice=Z,a.WhiteRectangleDetector=Be,a.WriterException=jt,a.ZXingArrays=H,a.ZXingCharset=rl,a.ZXingInteger=W,a.ZXingStandardCharsets=Yo,a.ZXingStringBuilder=Oe,a.ZXingStringEncoding=je,a.ZXingSystem=j,a.createAbstractExpandedDecoder=pr,Object.defineProperty(a,"__esModule",{value:!0})})}(Sa,Sa.exports)),Sa.exports}zy();var id=function(){var r=function(o,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var x in p)Object.prototype.hasOwnProperty.call(p,x)&&(d[x]=p[x])},r(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(o,a);function d(){this.constructor=o}o.prototype=a===null?Object.create(a):(d.prototype=a.prototype,new d)}}(),eg=function(){function r(o,a){this.name=o,this.track=a}return r.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},r.prototype.apply=function(o){var a={};a[this.name]=o;var d={advanced:[a]};return this.track.applyConstraints(d)},r.prototype.value=function(){var o=this.track.getSettings();if(this.name in o){var a=o[this.name];return a}return null},r}(),Wy=function(r){id(o,r);function o(a,d){return r.call(this,a,d)||this}return o.prototype.min=function(){return this.getCapabilities().min},o.prototype.max=function(){return this.getCapabilities().max},o.prototype.step=function(){return this.getCapabilities().step},o.prototype.apply=function(a){var d={};d[this.name]=a;var p={advanced:[d]};return this.track.applyConstraints(p)},o.prototype.getCapabilities=function(){this.failIfNotSupported();var a=this.track.getCapabilities(),d=a[this.name];return{min:d.min,max:d.max,step:d.step}},o.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},o}(eg);(function(r){id(o,r);function o(a){return r.call(this,"zoom",a)||this}return o})(Wy);(function(r){id(o,r);function o(a){return r.call(this,"torch",a)||this}return o})(eg);var l1;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.NOT_STARTED=1]="NOT_STARTED",r[r.SCANNING=2]="SCANNING",r[r.PAUSED=3]="PAUSED"})(l1||(l1={}));var Hy=function(){var r=function(o,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var x in p)Object.prototype.hasOwnProperty.call(p,x)&&(d[x]=p[x])},r(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(o,a);function d(){this.constructor=o}o.prototype=a===null?Object.create(a):(d.prototype=a.prototype,new d)}}();(function(r){Hy(o,r);function o(){return r!==null&&r.apply(this,arguments)||this}return o.DEFAULT_WIDTH=300,o.DEFAULT_WIDTH_OFFSET=2,o.FILE_SCAN_MIN_HEIGHT=300,o.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,o.MIN_QR_BOX_SIZE=50,o.SHADED_LEFT=1,o.SHADED_RIGHT=2,o.SHADED_TOP=3,o.SHADED_BOTTOM=4,o.SHADED_REGION_ELEMENT_ID="qr-shaded-region",o.VERBOSE=!1,o.BORDER_SHADER_DEFAULT_COLOR="#ffffff",o.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",o})(Vy);var u1;(function(r){r[r.STATUS_DEFAULT=0]="STATUS_DEFAULT",r[r.STATUS_SUCCESS=1]="STATUS_SUCCESS",r[r.STATUS_WARNING=2]="STATUS_WARNING",r[r.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(u1||(u1={}));const Gy=({user:r,onProfileClick:o})=>{const a=Wr();return N.jsx("div",{children:N.jsx("div",{style:{position:"absolute",top:"45px",display:"flex",alignItems:"center",width:"94%",height:"10px",left:"3%"},children:r==null?N.jsxs("div",{style:{position:"absolute",width:"100%",display:"flex",justifyContent:"space-between"},children:[N.jsx("button",{className:"login-button",onClick:()=>a("/login"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:N.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Login"})}),N.jsx("button",{className:"login-button",onClick:()=>a("/signup"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:N.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Sign up"})})]}):N.jsxs("div",{style:{position:"absolute",width:"100%",display:"flex",justifyContent:"space-between"},children:[N.jsx("button",{className:"login-button",onClick:()=>a("/logout"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:N.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Logout"})}),N.jsx("button",{className:"login-button",onClick:o,style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:N.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Profile"})})]})})})},sd=P.createContext({});function od(r){const o=P.useRef(null);return o.current===null&&(o.current=r()),o.current}const ad=typeof window<"u",tg=ad?P.useLayoutEffect:P.useEffect,Ru=P.createContext(null),ld=P.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});class Xy extends P.Component{getSnapshotBeforeUpdate(o){const a=this.props.childRef.current;if(a&&o.isPresent&&!this.props.isPresent){const d=a.offsetParent,p=d instanceof HTMLElement&&d.offsetWidth||0,x=this.props.sizeRef.current;x.height=a.offsetHeight||0,x.width=a.offsetWidth||0,x.top=a.offsetTop,x.left=a.offsetLeft,x.right=p-x.width-x.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Yy({children:r,isPresent:o,anchorX:a}){const d=P.useId(),p=P.useRef(null),x=P.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:y}=P.useContext(ld);return P.useInsertionEffect(()=>{const{width:A,height:w,top:E,left:S,right:T}=x.current;if(o||!p.current||!A||!w)return;const R=a==="left"?`left: ${S}`:`right: ${T}`;p.current.dataset.motionPopId=d;const k=document.createElement("style");return y&&(k.nonce=y),document.head.appendChild(k),k.sheet&&k.sheet.insertRule(`
          [data-motion-pop-id="${d}"] {
            position: absolute !important;
            width: ${A}px !important;
            height: ${w}px !important;
            ${R}px !important;
            top: ${E}px !important;
          }
        `),()=>{document.head.removeChild(k)}},[o]),N.jsx(Xy,{isPresent:o,childRef:p,sizeRef:x,children:P.cloneElement(r,{ref:p})})}const Ky=({children:r,initial:o,isPresent:a,onExitComplete:d,custom:p,presenceAffectsLayout:x,mode:y,anchorX:A})=>{const w=od(Zy),E=P.useId(),S=P.useCallback(R=>{w.set(R,!0);for(const k of w.values())if(!k)return;d&&d()},[w,d]),T=P.useMemo(()=>({id:E,initial:o,isPresent:a,custom:p,onExitComplete:S,register:R=>(w.set(R,!1),()=>w.delete(R))}),x?[Math.random(),S]:[a,S]);return P.useMemo(()=>{w.forEach((R,k)=>w.set(k,!1))},[a]),P.useEffect(()=>{!a&&!w.size&&d&&d()},[a]),y==="popLayout"&&(r=N.jsx(Yy,{isPresent:a,anchorX:A,children:r})),N.jsx(Ru.Provider,{value:T,children:r})};function Zy(){return new Map}function ng(r=!0){const o=P.useContext(Ru);if(o===null)return[!0,null];const{isPresent:a,onExitComplete:d,register:p}=o,x=P.useId();P.useEffect(()=>{if(r)return p(x)},[r]);const y=P.useCallback(()=>r&&d&&d(x),[x,d,r]);return!a&&d?[!1,y]:[!0]}const nu=r=>r.key||"";function c1(r){const o=[];return P.Children.forEach(r,a=>{P.isValidElement(a)&&o.push(a)}),o}const f1=({children:r,custom:o,initial:a=!0,onExitComplete:d,presenceAffectsLayout:p=!0,mode:x="sync",propagate:y=!1,anchorX:A="left"})=>{const[w,E]=ng(y),S=P.useMemo(()=>c1(r),[r]),T=y&&!w?[]:S.map(nu),R=P.useRef(!0),k=P.useRef(S),L=od(()=>new Map),[j,B]=P.useState(S),[U,H]=P.useState(S);tg(()=>{R.current=!1,k.current=S;for(let ce=0;ce<U.length;ce++){const ie=nu(U[ce]);T.includes(ie)?L.delete(ie):L.get(ie)!==!0&&L.set(ie,!1)}},[U,T.length,T.join("-")]);const W=[];if(S!==j){let ce=[...S];for(let ie=0;ie<U.length;ie++){const Q=U[ie],ue=nu(Q);T.includes(ue)||(ce.splice(ie,0,Q),W.push(Q))}return x==="wait"&&W.length&&(ce=W),H(c1(ce)),B(S),null}const{forceRender:ee}=P.useContext(sd);return N.jsx(N.Fragment,{children:U.map(ce=>{const ie=nu(ce),Q=y&&!w?!1:S===U||T.includes(ie),ue=()=>{if(L.has(ie))L.set(ie,!0);else return;let q=!0;L.forEach(Re=>{Re||(q=!1)}),q&&(ee==null||ee(),H(k.current),y&&(E==null||E()),d&&d())};return N.jsx(Ky,{isPresent:Q,initial:!R.current||a?void 0:!1,custom:o,presenceAffectsLayout:p,mode:x,onExitComplete:Q?void 0:ue,anchorX:A,children:ce},ie)})})};function ud(r,o){r.indexOf(o)===-1&&r.push(o)}function cd(r,o){const a=r.indexOf(o);a>-1&&r.splice(a,1)}let rg=()=>{};const $y={useManualTiming:!1};function fd(r){let o;return()=>(o===void 0&&(o=r()),o)}const Ur=r=>r,Ma=(r,o,a)=>{const d=o-r;return d===0?1:(a-r)/d};class dd{constructor(){this.subscriptions=[]}add(o){return ud(this.subscriptions,o),()=>cd(this.subscriptions,o)}notify(o,a,d){const p=this.subscriptions.length;if(p)if(p===1)this.subscriptions[0](o,a,d);else for(let x=0;x<p;x++){const y=this.subscriptions[x];y&&y(o,a,d)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ci=r=>r*1e3,fi=r=>r/1e3;function ig(r,o){return o?r*(1e3/o):0}const qy=fd(()=>window.ScrollTimeline!==void 0);class Qy{constructor(o){this.stop=()=>this.runAll("stop"),this.animations=o.filter(Boolean)}get finished(){return Promise.all(this.animations.map(o=>o.finished))}getAll(o){return this.animations[0][o]}setAll(o,a){for(let d=0;d<this.animations.length;d++)this.animations[d][o]=a}attachTimeline(o,a){const d=this.animations.map(p=>{if(qy()&&p.attachTimeline)return p.attachTimeline(o);if(typeof a=="function")return a(p)});return()=>{d.forEach((p,x)=>{p&&p(),this.animations[x].stop()})}}get time(){return this.getAll("time")}set time(o){this.setAll("time",o)}get speed(){return this.getAll("speed")}set speed(o){this.setAll("speed",o)}get startTime(){return this.getAll("startTime")}get duration(){let o=0;for(let a=0;a<this.animations.length;a++)o=Math.max(o,this.animations[a].duration);return o}runAll(o){this.animations.forEach(a=>a[o]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Jy extends Qy{then(o,a){return this.finished.finally(o).then(()=>{})}}const d1={value:null},hd=r=>Array.isArray(r)&&typeof r[0]=="number",ew={};function tw(r,o){const a=fd(r);return()=>ew[o]??a()}const Da=tw(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),sg=(r,o,a=10)=>{let d="";const p=Math.max(Math.round(o/a),2);for(let x=0;x<p;x++)d+=r(x/(p-1))+", ";return`linear(${d.substring(0,d.length-2)})`},ba=([r,o,a,d])=>`cubic-bezier(${r}, ${o}, ${a}, ${d})`,_f={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ba([0,.65,.55,1]),circOut:ba([.55,0,1,.45]),backIn:ba([.31,.01,.66,-.59]),backOut:ba([.33,1.53,.69,.99])};function og(r,o){if(r)return typeof r=="function"&&Da()?sg(r,o):hd(r)?ba(r):Array.isArray(r)?r.map(a=>og(a,o)||_f.easeOut):_f[r]}function nw(r,o,a,{delay:d=0,duration:p=300,repeat:x=0,repeatType:y="loop",ease:A="easeInOut",times:w}={},E=void 0){const S={[o]:a};w&&(S.offset=w);const T=og(A,p);return Array.isArray(T)&&(S.easing=T),r.animate(S,{delay:d,duration:p,easing:Array.isArray(T)?"linear":T,fill:"both",iterations:x+1,direction:y==="reverse"?"alternate":"normal",pseudoElement:E})}function pd(r){return typeof r=="function"&&"applyToOptions"in r}function gd(r,o){return(r==null?void 0:r[o])??(r==null?void 0:r.default)??r}const xu=2e4;function md(r){let o=0;const a=50;let d=r.next(o);for(;!d.done&&o<xu;)o+=a,d=r.next(o);return o>=xu?1/0:o}function rw(r,o=100,a){const d=a({...r,keyframes:[0,o]}),p=Math.min(md(d),xu);return{type:"keyframes",ease:x=>d.next(p*x).value/o,duration:fi(p)}}function ag(r){return!!(typeof r=="function"&&Da()||!r||typeof r=="string"&&(r in _f||Da())||hd(r)||Array.isArray(r)&&r.every(ag))}function h1(r,o){r.timeline=o,r.onfinish=null}const ru=["read","resolveKeyframes","update","preRender","render","postRender"];function iw(r,o){let a=new Set,d=new Set,p=!1,x=!1;const y=new WeakSet;let A={delta:0,timestamp:0,isProcessing:!1},w=0;function E(T){y.has(T)&&(S.schedule(T),r()),w++,T(A)}const S={schedule:(T,R=!1,k=!1)=>{const j=k&&p?a:d;return R&&y.add(T),j.has(T)||j.add(T),T},cancel:T=>{d.delete(T),y.delete(T)},process:T=>{if(A=T,p){x=!0;return}p=!0,[a,d]=[d,a],a.forEach(E),o&&d1.value&&d1.value.frameloop[o].push(w),w=0,a.clear(),p=!1,x&&(x=!1,S.process(T))}};return S}const sw=40;function lg(r,o){let a=!1,d=!0;const p={delta:0,timestamp:0,isProcessing:!1},x=()=>a=!0,y=ru.reduce((U,H)=>(U[H]=iw(x,o?H:void 0),U),{}),{read:A,resolveKeyframes:w,update:E,preRender:S,render:T,postRender:R}=y,k=()=>{const U=performance.now();a=!1,p.delta=d?1e3/60:Math.max(Math.min(U-p.timestamp,sw),1),p.timestamp=U,p.isProcessing=!0,A.process(p),w.process(p),E.process(p),S.process(p),T.process(p),R.process(p),p.isProcessing=!1,a&&o&&(d=!1,r(k))},L=()=>{a=!0,d=!0,p.isProcessing||r(k)};return{schedule:ru.reduce((U,H)=>{const W=y[H];return U[H]=(ee,ce=!1,ie=!1)=>(a||L(),W.schedule(ee,ce,ie)),U},{}),cancel:U=>{for(let H=0;H<ru.length;H++)y[ru[H]].cancel(U)},state:p,steps:y}}const{schedule:Kt,cancel:hs,state:Zn,steps:pf}=lg(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ur,!0),{schedule:xd}=lg(queueMicrotask,!1);let cu;function ow(){cu=void 0}const di={now:()=>(cu===void 0&&di.set(Zn.isProcessing||$y.useManualTiming?Zn.timestamp:performance.now()),cu),set:r=>{cu=r,queueMicrotask(ow)}},ei={x:!1,y:!1};function ug(){return ei.x||ei.y}function aw(r){return r==="x"||r==="y"?ei[r]?null:(ei[r]=!0,()=>{ei[r]=!1}):ei.x||ei.y?null:(ei.x=ei.y=!0,()=>{ei.x=ei.y=!1})}function lw(r,o,a){if(r instanceof EventTarget)return[r];if(typeof r=="string"){const p=document.querySelectorAll(r);return p?Array.from(p):[]}return Array.from(r)}function cg(r,o){const a=lw(r),d=new AbortController,p={passive:!0,...o,signal:d.signal};return[a,p,()=>d.abort()]}function p1(r){return!(r.pointerType==="touch"||ug())}function uw(r,o,a={}){const[d,p,x]=cg(r,a),y=A=>{if(!p1(A))return;const{target:w}=A,E=o(w,A);if(typeof E!="function"||!w)return;const S=T=>{p1(T)&&(E(T),w.removeEventListener("pointerleave",S))};w.addEventListener("pointerleave",S,p)};return d.forEach(A=>{A.addEventListener("pointerenter",y,p)}),x}const fg=(r,o)=>o?r===o?!0:fg(r,o.parentElement):!1,yd=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,cw=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function fw(r){return cw.has(r.tagName)||r.tabIndex!==-1}const Ta=new WeakSet;function g1(r){return o=>{o.key==="Enter"&&r(o)}}function gf(r,o){r.dispatchEvent(new PointerEvent("pointer"+o,{isPrimary:!0,bubbles:!0}))}const dw=(r,o)=>{const a=r.currentTarget;if(!a)return;const d=g1(()=>{if(Ta.has(a))return;gf(a,"down");const p=g1(()=>{gf(a,"up")}),x=()=>gf(a,"cancel");a.addEventListener("keyup",p,o),a.addEventListener("blur",x,o)});a.addEventListener("keydown",d,o),a.addEventListener("blur",()=>a.removeEventListener("keydown",d),o)};function m1(r){return yd(r)&&!ug()}function hw(r,o,a={}){const[d,p,x]=cg(r,a),y=A=>{const w=A.currentTarget;if(!m1(A)||Ta.has(w))return;Ta.add(w);const E=o(w,A),S=(k,L)=>{window.removeEventListener("pointerup",T),window.removeEventListener("pointercancel",R),!(!m1(k)||!Ta.has(w))&&(Ta.delete(w),typeof E=="function"&&E(k,{success:L}))},T=k=>{S(k,w===window||w===document||a.useGlobalTarget||fg(w,k.target))},R=k=>{S(k,!1)};window.addEventListener("pointerup",T,p),window.addEventListener("pointercancel",R,p)};return d.forEach(A=>{(a.useGlobalTarget?window:A).addEventListener("pointerdown",y,p),A instanceof HTMLElement&&(A.addEventListener("focus",E=>dw(E,p)),!fw(A)&&!A.hasAttribute("tabindex")&&(A.tabIndex=0))}),x}const x1=30,pw=r=>!isNaN(parseFloat(r));class gw{constructor(o,a={}){this.version="12.6.3",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(d,p=!0)=>{const x=di.now();this.updatedAt!==x&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(d),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),p&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(o),this.owner=a.owner}setCurrent(o){this.current=o,this.updatedAt=di.now(),this.canTrackVelocity===null&&o!==void 0&&(this.canTrackVelocity=pw(this.current))}setPrevFrameValue(o=this.current){this.prevFrameValue=o,this.prevUpdatedAt=this.updatedAt}onChange(o){return this.on("change",o)}on(o,a){this.events[o]||(this.events[o]=new dd);const d=this.events[o].add(a);return o==="change"?()=>{d(),Kt.read(()=>{this.events.change.getSize()||this.stop()})}:d}clearListeners(){for(const o in this.events)this.events[o].clear()}attach(o,a){this.passiveEffect=o,this.stopPassiveEffect=a}set(o,a=!0){!a||!this.passiveEffect?this.updateAndNotify(o,a):this.passiveEffect(o,this.updateAndNotify)}setWithVelocity(o,a,d){this.set(a),this.prev=void 0,this.prevFrameValue=o,this.prevUpdatedAt=this.updatedAt-d}jump(o,a=!0){this.updateAndNotify(o),this.prev=o,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const o=di.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||o-this.updatedAt>x1)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,x1);return ig(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(o){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=o(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ka(r,o){return new gw(r,o)}const dg=P.createContext({strict:!1}),y1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Po={};for(const r in y1)Po[r]={isEnabled:o=>y1[r].some(a=>!!o[a])};function mw(r){for(const o in r)Po[o]={...Po[o],...r[o]}}const xw=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function yu(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||xw.has(r)}let hg=r=>!yu(r);function yw(r){r&&(hg=o=>o.startsWith("on")?!yu(o):r(o))}try{yw(require("@emotion/is-prop-valid").default)}catch{}function ww(r,o,a){const d={};for(const p in r)p==="values"&&typeof r.values=="object"||(hg(p)||a===!0&&yu(p)||!o&&!yu(p)||r.draggable&&p.startsWith("onDrag"))&&(d[p]=r[p]);return d}function vw(r){if(typeof Proxy>"u")return r;const o=new Map,a=(...d)=>r(...d);return new Proxy(a,{get:(d,p)=>p==="create"?r:(o.has(p)||o.set(p,r(p)),o.get(p))})}const _u=P.createContext({});function Ou(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}function La(r){return typeof r=="string"||Array.isArray(r)}const wd=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],vd=["initial",...wd];function Pu(r){return Ou(r.animate)||vd.some(o=>La(r[o]))}function pg(r){return!!(Pu(r)||r.variants)}function Cw(r,o){if(Pu(r)){const{initial:a,animate:d}=r;return{initial:a===!1||La(a)?a:void 0,animate:La(d)?d:void 0}}return r.inherit!==!1?o:{}}function Ew(r){const{initial:o,animate:a}=Cw(r,P.useContext(_u));return P.useMemo(()=>({initial:o,animate:a}),[w1(o),w1(a)])}function w1(r){return Array.isArray(r)?r.join(" "):r}const Aw=Symbol.for("motionComponentSymbol");function bo(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function Sw(r,o,a){return P.useCallback(d=>{d&&r.onMount&&r.onMount(d),o&&(d?o.mount(d):o.unmount()),a&&(typeof a=="function"?a(d):bo(a)&&(a.current=d))},[o])}const Cd=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),bw="framerAppearId",gg="data-"+Cd(bw),mg=P.createContext({});function Tw(r,o,a,d,p){var j,B;const{visualElement:x}=P.useContext(_u),y=P.useContext(dg),A=P.useContext(Ru),w=P.useContext(ld).reducedMotion,E=P.useRef(null);d=d||y.renderer,!E.current&&d&&(E.current=d(r,{visualState:o,parent:x,props:a,presenceContext:A,blockInitialAnimation:A?A.initial===!1:!1,reducedMotionConfig:w}));const S=E.current,T=P.useContext(mg);S&&!S.projection&&p&&(S.type==="html"||S.type==="svg")&&Iw(E.current,a,p,T);const R=P.useRef(!1);P.useInsertionEffect(()=>{S&&R.current&&S.update(a,A)});const k=a[gg],L=P.useRef(!!k&&!((j=window.MotionHandoffIsComplete)!=null&&j.call(window,k))&&((B=window.MotionHasOptimisedAnimation)==null?void 0:B.call(window,k)));return tg(()=>{S&&(R.current=!0,window.MotionIsMounted=!0,S.updateFeatures(),xd.render(S.render),L.current&&S.animationState&&S.animationState.animateChanges())}),P.useEffect(()=>{S&&(!L.current&&S.animationState&&S.animationState.animateChanges(),L.current&&(queueMicrotask(()=>{var U;(U=window.MotionHandoffMarkAsComplete)==null||U.call(window,k)}),L.current=!1))}),S}function Iw(r,o,a,d){const{layoutId:p,layout:x,drag:y,dragConstraints:A,layoutScroll:w,layoutRoot:E}=o;r.projection=new a(r.latestValues,o["data-framer-portal-id"]?void 0:xg(r.parent)),r.projection.setOptions({layoutId:p,layout:x,alwaysMeasureLayout:!!y||A&&bo(A),visualElement:r,animationType:typeof x=="string"?x:"both",initialPromotionConfig:d,layoutScroll:w,layoutRoot:E})}function xg(r){if(r)return r.options.allowProjection!==!1?r.projection:xg(r.parent)}function Nw({preloadedFeatures:r,createVisualElement:o,useRender:a,useVisualState:d,Component:p}){r&&mw(r);function x(A,w){let E;const S={...P.useContext(ld),...A,layoutId:Rw(A)},{isStatic:T}=S,R=Ew(A),k=d(A,T);if(!T&&ad){_w();const L=Ow(S);E=L.MeasureLayout,R.visualElement=Tw(p,k,S,o,L.ProjectionNode)}return N.jsxs(_u.Provider,{value:R,children:[E&&R.visualElement?N.jsx(E,{visualElement:R.visualElement,...S}):null,a(p,A,Sw(k,R.visualElement,w),k,T,R.visualElement)]})}x.displayName=`motion.${typeof p=="string"?p:`create(${p.displayName??p.name??""})`}`;const y=P.forwardRef(x);return y[Aw]=p,y}function Rw({layoutId:r}){const o=P.useContext(sd).id;return o&&r!==void 0?o+"-"+r:r}function _w(r,o){P.useContext(dg).strict}function Ow(r){const{drag:o,layout:a}=Po;if(!o&&!a)return{};const d={...o,...a};return{MeasureLayout:o!=null&&o.isEnabled(r)||a!=null&&a.isEnabled(r)?d.MeasureLayout:void 0,ProjectionNode:d.ProjectionNode}}const yg=r=>o=>typeof o=="string"&&o.startsWith(r),Ed=yg("--"),Pw=yg("var(--"),Ad=r=>Pw(r)?Mw.test(r.split("/*")[0].trim()):!1,Mw=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ba={};function Dw(r){for(const o in r)Ba[o]=r[o],Ed(o)&&(Ba[o].isCSSVariable=!0)}const Lo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],$s=new Set(Lo);function wg(r,{layout:o,layoutId:a}){return $s.has(r)||r.startsWith("origin")||(o||a!==void 0)&&(!!Ba[r]||r==="opacity")}const ir=r=>!!(r&&r.getVelocity),vg=(r,o)=>o&&typeof r=="number"?o.transform(r):r,Li=(r,o,a)=>a>o?o:a<r?r:a,Bo={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},Fa={...Bo,transform:r=>Li(0,1,r)},iu={...Bo,default:1},Ga=r=>({test:o=>typeof o=="string"&&o.endsWith(r)&&o.split(" ").length===1,parse:parseFloat,transform:o=>`${o}${r}`}),cs=Ga("deg"),hi=Ga("%"),Qe=Ga("px"),kw=Ga("vh"),Lw=Ga("vw"),v1={...hi,parse:r=>hi.parse(r)/100,transform:r=>hi.transform(r*100)},Bw={borderWidth:Qe,borderTopWidth:Qe,borderRightWidth:Qe,borderBottomWidth:Qe,borderLeftWidth:Qe,borderRadius:Qe,radius:Qe,borderTopLeftRadius:Qe,borderTopRightRadius:Qe,borderBottomRightRadius:Qe,borderBottomLeftRadius:Qe,width:Qe,maxWidth:Qe,height:Qe,maxHeight:Qe,top:Qe,right:Qe,bottom:Qe,left:Qe,padding:Qe,paddingTop:Qe,paddingRight:Qe,paddingBottom:Qe,paddingLeft:Qe,margin:Qe,marginTop:Qe,marginRight:Qe,marginBottom:Qe,marginLeft:Qe,backgroundPositionX:Qe,backgroundPositionY:Qe},Fw={rotate:cs,rotateX:cs,rotateY:cs,rotateZ:cs,scale:iu,scaleX:iu,scaleY:iu,scaleZ:iu,skew:cs,skewX:cs,skewY:cs,distance:Qe,translateX:Qe,translateY:Qe,translateZ:Qe,x:Qe,y:Qe,z:Qe,perspective:Qe,transformPerspective:Qe,opacity:Fa,originX:v1,originY:v1,originZ:Qe},C1={...Bo,transform:Math.round},Sd={...Bw,...Fw,zIndex:C1,size:Qe,fillOpacity:Fa,strokeOpacity:Fa,numOctaves:C1},jw={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Vw=Lo.length;function Uw(r,o,a){let d="",p=!0;for(let x=0;x<Vw;x++){const y=Lo[x],A=r[y];if(A===void 0)continue;let w=!0;if(typeof A=="number"?w=A===(y.startsWith("scale")?1:0):w=parseFloat(A)===0,!w||a){const E=vg(A,Sd[y]);if(!w){p=!1;const S=jw[y]||y;d+=`${S}(${E}) `}a&&(o[y]=E)}}return d=d.trim(),a?d=a(o,p?"":d):p&&(d="none"),d}function bd(r,o,a){const{style:d,vars:p,transformOrigin:x}=r;let y=!1,A=!1;for(const w in o){const E=o[w];if($s.has(w)){y=!0;continue}else if(Ed(w)){p[w]=E;continue}else{const S=vg(E,Sd[w]);w.startsWith("origin")?(A=!0,x[w]=S):d[w]=S}}if(o.transform||(y||a?d.transform=Uw(o,r.transform,a):d.transform&&(d.transform="none")),A){const{originX:w="50%",originY:E="50%",originZ:S=0}=x;d.transformOrigin=`${w} ${E} ${S}`}}const Td=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Cg(r,o,a){for(const d in o)!ir(o[d])&&!wg(d,a)&&(r[d]=o[d])}function zw({transformTemplate:r},o){return P.useMemo(()=>{const a=Td();return bd(a,o,r),Object.assign({},a.vars,a.style)},[o])}function Ww(r,o){const a=r.style||{},d={};return Cg(d,a,r),Object.assign(d,zw(r,o)),d}function Hw(r,o){const a={},d=Ww(r,o);return r.drag&&r.dragListener!==!1&&(a.draggable=!1,d.userSelect=d.WebkitUserSelect=d.WebkitTouchCallout="none",d.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(a.tabIndex=0),a.style=d,a}const Gw=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Id(r){return typeof r!="string"||r.includes("-")?!1:!!(Gw.indexOf(r)>-1||/[A-Z]/u.test(r))}const Xw={offset:"stroke-dashoffset",array:"stroke-dasharray"},Yw={offset:"strokeDashoffset",array:"strokeDasharray"};function Kw(r,o,a=1,d=0,p=!0){r.pathLength=1;const x=p?Xw:Yw;r[x.offset]=Qe.transform(-d);const y=Qe.transform(o),A=Qe.transform(a);r[x.array]=`${y} ${A}`}function E1(r,o,a){return typeof r=="string"?r:Qe.transform(o+a*r)}function Zw(r,o,a){const d=E1(o,r.x,r.width),p=E1(a,r.y,r.height);return`${d} ${p}`}function Nd(r,{attrX:o,attrY:a,attrScale:d,originX:p,originY:x,pathLength:y,pathSpacing:A=1,pathOffset:w=0,...E},S,T){if(bd(r,E,T),S){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:R,style:k,dimensions:L}=r;R.transform&&(L&&(k.transform=R.transform),delete R.transform),L&&(p!==void 0||x!==void 0||k.transform)&&(k.transformOrigin=Zw(L,p!==void 0?p:.5,x!==void 0?x:.5)),o!==void 0&&(R.x=o),a!==void 0&&(R.y=a),d!==void 0&&(R.scale=d),y!==void 0&&Kw(R,y,A,w,!1)}const Eg=()=>({...Td(),attrs:{}}),Rd=r=>typeof r=="string"&&r.toLowerCase()==="svg";function $w(r,o,a,d){const p=P.useMemo(()=>{const x=Eg();return Nd(x,o,Rd(d),r.transformTemplate),{...x.attrs,style:{...x.style}}},[o]);if(r.style){const x={};Cg(x,r.style,r),p.style={...x,...p.style}}return p}function qw(r=!1){return(a,d,p,{latestValues:x},y)=>{const w=(Id(a)?$w:Hw)(d,x,y,a),E=ww(d,typeof a=="string",r),S=a!==P.Fragment?{...E,...w,ref:p}:{},{children:T}=d,R=P.useMemo(()=>ir(T)?T.get():T,[T]);return P.createElement(a,{...S,children:R})}}function A1(r){const o=[{},{}];return r==null||r.values.forEach((a,d)=>{o[0][d]=a.get(),o[1][d]=a.getVelocity()}),o}function _d(r,o,a,d){if(typeof o=="function"){const[p,x]=A1(d);o=o(a!==void 0?a:r.custom,p,x)}if(typeof o=="string"&&(o=r.variants&&r.variants[o]),typeof o=="function"){const[p,x]=A1(d);o=o(a!==void 0?a:r.custom,p,x)}return o}const Of=r=>Array.isArray(r),Qw=r=>!!(r&&typeof r=="object"&&r.mix&&r.toValue),Jw=r=>Of(r)?r[r.length-1]||0:r;function fu(r){const o=ir(r)?r.get():r;return Qw(o)?o.toValue():o}function e3({scrapeMotionValuesFromProps:r,createRenderState:o,onUpdate:a},d,p,x){const y={latestValues:t3(d,p,x,r),renderState:o()};return a&&(y.onMount=A=>a({props:d,current:A,...y}),y.onUpdate=A=>a(A)),y}const Ag=r=>(o,a)=>{const d=P.useContext(_u),p=P.useContext(Ru),x=()=>e3(r,o,d,p);return a?x():od(x)};function t3(r,o,a,d){const p={},x=d(r,{});for(const R in x)p[R]=fu(x[R]);let{initial:y,animate:A}=r;const w=Pu(r),E=pg(r);o&&E&&!w&&r.inherit!==!1&&(y===void 0&&(y=o.initial),A===void 0&&(A=o.animate));let S=a?a.initial===!1:!1;S=S||y===!1;const T=S?A:y;if(T&&typeof T!="boolean"&&!Ou(T)){const R=Array.isArray(T)?T:[T];for(let k=0;k<R.length;k++){const L=_d(r,R[k]);if(L){const{transitionEnd:j,transition:B,...U}=L;for(const H in U){let W=U[H];if(Array.isArray(W)){const ee=S?W.length-1:0;W=W[ee]}W!==null&&(p[H]=W)}for(const H in j)p[H]=j[H]}}}return p}function Od(r,o,a){var x;const{style:d}=r,p={};for(const y in d)(ir(d[y])||o.style&&ir(o.style[y])||wg(y,r)||((x=a==null?void 0:a.getValue(y))==null?void 0:x.liveStyle)!==void 0)&&(p[y]=d[y]);return p}const n3={useVisualState:Ag({scrapeMotionValuesFromProps:Od,createRenderState:Td})};function Sg(r,o){try{o.dimensions=typeof r.getBBox=="function"?r.getBBox():r.getBoundingClientRect()}catch{o.dimensions={x:0,y:0,width:0,height:0}}}function bg(r,{style:o,vars:a},d,p){Object.assign(r.style,o,p&&p.getProjectionStyles(d));for(const x in a)r.style.setProperty(x,a[x])}const Tg=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Ig(r,o,a,d){bg(r,o,void 0,d);for(const p in o.attrs)r.setAttribute(Tg.has(p)?p:Cd(p),o.attrs[p])}function Ng(r,o,a){const d=Od(r,o,a);for(const p in r)if(ir(r[p])||ir(o[p])){const x=Lo.indexOf(p)!==-1?"attr"+p.charAt(0).toUpperCase()+p.substring(1):p;d[x]=r[p]}return d}const S1=["x","y","width","height","cx","cy","r"],r3={useVisualState:Ag({scrapeMotionValuesFromProps:Ng,createRenderState:Eg,onUpdate:({props:r,prevProps:o,current:a,renderState:d,latestValues:p})=>{if(!a)return;let x=!!r.drag;if(!x){for(const A in p)if($s.has(A)){x=!0;break}}if(!x)return;let y=!o;if(o)for(let A=0;A<S1.length;A++){const w=S1[A];r[w]!==o[w]&&(y=!0)}y&&Kt.read(()=>{Sg(a,d),Kt.render(()=>{Nd(d,p,Rd(a.tagName),r.transformTemplate),Ig(a,d)})})}})};function i3(r,o){return function(d,{forwardMotionProps:p}={forwardMotionProps:!1}){const y={...Id(d)?r3:n3,preloadedFeatures:r,useRender:qw(p),createVisualElement:o,Component:d};return Nw(y)}}function ja(r,o,a){const d=r.getProps();return _d(d,o,a!==void 0?a:d.custom,r)}const Rg=new Set(["width","height","top","left","right","bottom",...Lo]);function s3(r,o,a){r.hasValue(o)?r.getValue(o).set(a):r.addValue(o,ka(a))}function o3(r,o){const a=ja(r,o);let{transitionEnd:d={},transition:p={},...x}=a||{};x={...x,...d};for(const y in x){const A=Jw(x[y]);s3(r,y,A)}}function a3(r){return!!(ir(r)&&r.add)}function Pf(r,o){const a=r.getValue("willChange");if(a3(a))return a.add(o)}function _g(r){return r.props[gg]}const Og=(r,o,a)=>(((1-3*a+3*o)*r+(3*a-6*o))*r+3*o)*r,l3=1e-7,u3=12;function c3(r,o,a,d,p){let x,y,A=0;do y=o+(a-o)/2,x=Og(y,d,p)-r,x>0?a=y:o=y;while(Math.abs(x)>l3&&++A<u3);return y}function Xa(r,o,a,d){if(r===o&&a===d)return Ur;const p=x=>c3(x,0,1,r,a);return x=>x===0||x===1?x:Og(p(x),o,d)}const Pg=r=>o=>o<=.5?r(2*o)/2:(2-r(2*(1-o)))/2,Mg=r=>o=>1-r(1-o),Dg=Xa(.33,1.53,.69,.99),Pd=Mg(Dg),kg=Pg(Pd),Lg=r=>(r*=2)<1?.5*Pd(r):.5*(2-Math.pow(2,-10*(r-1))),Md=r=>1-Math.sin(Math.acos(r)),Bg=Mg(Md),Fg=Pg(Md),jg=r=>/^0[^.\s]+$/u.test(r);function f3(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||jg(r):!0}const Ia=r=>Math.round(r*1e5)/1e5,Dd=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function d3(r){return r==null}const h3=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,kd=(r,o)=>a=>!!(typeof a=="string"&&h3.test(a)&&a.startsWith(r)||o&&!d3(a)&&Object.prototype.hasOwnProperty.call(a,o)),Vg=(r,o,a)=>d=>{if(typeof d!="string")return d;const[p,x,y,A]=d.match(Dd);return{[r]:parseFloat(p),[o]:parseFloat(x),[a]:parseFloat(y),alpha:A!==void 0?parseFloat(A):1}},p3=r=>Li(0,255,r),mf={...Bo,transform:r=>Math.round(p3(r))},Gs={test:kd("rgb","red"),parse:Vg("red","green","blue"),transform:({red:r,green:o,blue:a,alpha:d=1})=>"rgba("+mf.transform(r)+", "+mf.transform(o)+", "+mf.transform(a)+", "+Ia(Fa.transform(d))+")"};function g3(r){let o="",a="",d="",p="";return r.length>5?(o=r.substring(1,3),a=r.substring(3,5),d=r.substring(5,7),p=r.substring(7,9)):(o=r.substring(1,2),a=r.substring(2,3),d=r.substring(3,4),p=r.substring(4,5),o+=o,a+=a,d+=d,p+=p),{red:parseInt(o,16),green:parseInt(a,16),blue:parseInt(d,16),alpha:p?parseInt(p,16)/255:1}}const Mf={test:kd("#"),parse:g3,transform:Gs.transform},To={test:kd("hsl","hue"),parse:Vg("hue","saturation","lightness"),transform:({hue:r,saturation:o,lightness:a,alpha:d=1})=>"hsla("+Math.round(r)+", "+hi.transform(Ia(o))+", "+hi.transform(Ia(a))+", "+Ia(Fa.transform(d))+")"},rr={test:r=>Gs.test(r)||Mf.test(r)||To.test(r),parse:r=>Gs.test(r)?Gs.parse(r):To.test(r)?To.parse(r):Mf.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?Gs.transform(r):To.transform(r)},m3=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function x3(r){var o,a;return isNaN(r)&&typeof r=="string"&&(((o=r.match(Dd))==null?void 0:o.length)||0)+(((a=r.match(m3))==null?void 0:a.length)||0)>0}const Ug="number",zg="color",y3="var",w3="var(",b1="${}",v3=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Va(r){const o=r.toString(),a=[],d={color:[],number:[],var:[]},p=[];let x=0;const A=o.replace(v3,w=>(rr.test(w)?(d.color.push(x),p.push(zg),a.push(rr.parse(w))):w.startsWith(w3)?(d.var.push(x),p.push(y3),a.push(w)):(d.number.push(x),p.push(Ug),a.push(parseFloat(w))),++x,b1)).split(b1);return{values:a,split:A,indexes:d,types:p}}function Wg(r){return Va(r).values}function Hg(r){const{split:o,types:a}=Va(r),d=o.length;return p=>{let x="";for(let y=0;y<d;y++)if(x+=o[y],p[y]!==void 0){const A=a[y];A===Ug?x+=Ia(p[y]):A===zg?x+=rr.transform(p[y]):x+=p[y]}return x}}const C3=r=>typeof r=="number"?0:r;function E3(r){const o=Wg(r);return Hg(r)(o.map(C3))}const ps={test:x3,parse:Wg,createTransformer:Hg,getAnimatableNone:E3},A3=new Set(["brightness","contrast","saturate","opacity"]);function S3(r){const[o,a]=r.slice(0,-1).split("(");if(o==="drop-shadow")return r;const[d]=a.match(Dd)||[];if(!d)return r;const p=a.replace(d,"");let x=A3.has(o)?1:0;return d!==a&&(x*=100),o+"("+x+p+")"}const b3=/\b([a-z-]*)\(.*?\)/gu,Df={...ps,getAnimatableNone:r=>{const o=r.match(b3);return o?o.map(S3).join(" "):r}},T3={...Sd,color:rr,backgroundColor:rr,outlineColor:rr,fill:rr,stroke:rr,borderColor:rr,borderTopColor:rr,borderRightColor:rr,borderBottomColor:rr,borderLeftColor:rr,filter:Df,WebkitFilter:Df},Gg=r=>T3[r];function Xg(r,o){let a=Gg(r);return a!==Df&&(a=ps),a.getAnimatableNone?a.getAnimatableNone(o):void 0}const I3=new Set(["auto","none","0"]);function N3(r,o,a){let d=0,p;for(;d<r.length&&!p;){const x=r[d];typeof x=="string"&&!I3.has(x)&&Va(x).values.length&&(p=r[d]),d++}if(p&&a)for(const x of o)r[x]=Xg(a,p)}const Xs=r=>r*180/Math.PI,kf=r=>{const o=Xs(Math.atan2(r[1],r[0]));return Lf(o)},R3={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:r=>(Math.abs(r[0])+Math.abs(r[3]))/2,rotate:kf,rotateZ:kf,skewX:r=>Xs(Math.atan(r[1])),skewY:r=>Xs(Math.atan(r[2])),skew:r=>(Math.abs(r[1])+Math.abs(r[2]))/2},Lf=r=>(r=r%360,r<0&&(r+=360),r),T1=kf,I1=r=>Math.sqrt(r[0]*r[0]+r[1]*r[1]),N1=r=>Math.sqrt(r[4]*r[4]+r[5]*r[5]),_3={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:I1,scaleY:N1,scale:r=>(I1(r)+N1(r))/2,rotateX:r=>Lf(Xs(Math.atan2(r[6],r[5]))),rotateY:r=>Lf(Xs(Math.atan2(-r[2],r[0]))),rotateZ:T1,rotate:T1,skewX:r=>Xs(Math.atan(r[4])),skewY:r=>Xs(Math.atan(r[1])),skew:r=>(Math.abs(r[1])+Math.abs(r[4]))/2};function R1(r){return r.includes("scale")?1:0}function Bf(r,o){if(!r||r==="none")return R1(o);const a=r.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let d,p;if(a)d=_3,p=a;else{const A=r.match(/^matrix\(([-\d.e\s,]+)\)$/u);d=R3,p=A}if(!p)return R1(o);const x=d[o],y=p[1].split(",").map(P3);return typeof x=="function"?x(y):y[x]}const O3=(r,o)=>{const{transform:a="none"}=getComputedStyle(r);return Bf(a,o)};function P3(r){return parseFloat(r.trim())}const _1=r=>r===Bo||r===Qe,M3=new Set(["x","y","z"]),D3=Lo.filter(r=>!M3.has(r));function k3(r){const o=[];return D3.forEach(a=>{const d=r.getValue(a);d!==void 0&&(o.push([a,d.get()]),d.set(a.startsWith("scale")?1:0))}),o}const Mo={width:({x:r},{paddingLeft:o="0",paddingRight:a="0"})=>r.max-r.min-parseFloat(o)-parseFloat(a),height:({y:r},{paddingTop:o="0",paddingBottom:a="0"})=>r.max-r.min-parseFloat(o)-parseFloat(a),top:(r,{top:o})=>parseFloat(o),left:(r,{left:o})=>parseFloat(o),bottom:({y:r},{top:o})=>parseFloat(o)+(r.max-r.min),right:({x:r},{left:o})=>parseFloat(o)+(r.max-r.min),x:(r,{transform:o})=>Bf(o,"x"),y:(r,{transform:o})=>Bf(o,"y")};Mo.translateX=Mo.x;Mo.translateY=Mo.y;const Ks=new Set;let Ff=!1,jf=!1;function Yg(){if(jf){const r=Array.from(Ks).filter(d=>d.needsMeasurement),o=new Set(r.map(d=>d.element)),a=new Map;o.forEach(d=>{const p=k3(d);p.length&&(a.set(d,p),d.render())}),r.forEach(d=>d.measureInitialState()),o.forEach(d=>{d.render();const p=a.get(d);p&&p.forEach(([x,y])=>{var A;(A=d.getValue(x))==null||A.set(y)})}),r.forEach(d=>d.measureEndState()),r.forEach(d=>{d.suspendedScrollY!==void 0&&window.scrollTo(0,d.suspendedScrollY)})}jf=!1,Ff=!1,Ks.forEach(r=>r.complete()),Ks.clear()}function Kg(){Ks.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(jf=!0)})}function L3(){Kg(),Yg()}class Ld{constructor(o,a,d,p,x,y=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...o],this.onComplete=a,this.name=d,this.motionValue=p,this.element=x,this.isAsync=y}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ks.add(this),Ff||(Ff=!0,Kt.read(Kg),Kt.resolveKeyframes(Yg))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:o,name:a,element:d,motionValue:p}=this;for(let x=0;x<o.length;x++)if(o[x]===null)if(x===0){const y=p==null?void 0:p.get(),A=o[o.length-1];if(y!==void 0)o[0]=y;else if(d&&a){const w=d.readValue(a,A);w!=null&&(o[0]=w)}o[0]===void 0&&(o[0]=A),p&&y===void 0&&p.set(o[0])}else o[x]=o[x-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ks.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ks.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Zg=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r),B3=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function F3(r){const o=B3.exec(r);if(!o)return[,];const[,a,d,p]=o;return[`--${a??d}`,p]}function $g(r,o,a=1){const[d,p]=F3(r);if(!d)return;const x=window.getComputedStyle(o).getPropertyValue(d);if(x){const y=x.trim();return Zg(y)?parseFloat(y):y}return Ad(p)?$g(p,o,a+1):p}const qg=r=>o=>o.test(r),j3={test:r=>r==="auto",parse:r=>r},Qg=[Bo,Qe,hi,cs,Lw,kw,j3],O1=r=>Qg.find(qg(r));class Jg extends Ld{constructor(o,a,d,p,x){super(o,a,d,p,x,!0)}readKeyframes(){const{unresolvedKeyframes:o,element:a,name:d}=this;if(!a||!a.current)return;super.readKeyframes();for(let w=0;w<o.length;w++){let E=o[w];if(typeof E=="string"&&(E=E.trim(),Ad(E))){const S=$g(E,a.current);S!==void 0&&(o[w]=S),w===o.length-1&&(this.finalKeyframe=E)}}if(this.resolveNoneKeyframes(),!Rg.has(d)||o.length!==2)return;const[p,x]=o,y=O1(p),A=O1(x);if(y!==A)if(_1(y)&&_1(A))for(let w=0;w<o.length;w++){const E=o[w];typeof E=="string"&&(o[w]=parseFloat(E))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:o,name:a}=this,d=[];for(let p=0;p<o.length;p++)f3(o[p])&&d.push(p);d.length&&N3(o,d,a)}measureInitialState(){const{element:o,unresolvedKeyframes:a,name:d}=this;if(!o||!o.current)return;d==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Mo[d](o.measureViewportBox(),window.getComputedStyle(o.current)),a[0]=this.measuredOrigin;const p=a[a.length-1];p!==void 0&&o.getValue(d,p).jump(p,!1)}measureEndState(){var A;const{element:o,name:a,unresolvedKeyframes:d}=this;if(!o||!o.current)return;const p=o.getValue(a);p&&p.jump(this.measuredOrigin,!1);const x=d.length-1,y=d[x];d[x]=Mo[a](o.measureViewportBox(),window.getComputedStyle(o.current)),y!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=y),(A=this.removedTransforms)!=null&&A.length&&this.removedTransforms.forEach(([w,E])=>{o.getValue(w).set(E)}),this.resolveNoneKeyframes()}}const P1=(r,o)=>o==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(ps.test(r)||r==="0")&&!r.startsWith("url("));function V3(r){const o=r[0];if(r.length===1)return!0;for(let a=0;a<r.length;a++)if(r[a]!==o)return!0}function U3(r,o,a,d){const p=r[0];if(p===null)return!1;if(o==="display"||o==="visibility")return!0;const x=r[r.length-1],y=P1(p,o),A=P1(x,o);return!y||!A?!1:V3(r)||(a==="spring"||pd(a))&&d}const z3=r=>r!==null;function Mu(r,{repeat:o,repeatType:a="loop"},d){const p=r.filter(z3),x=o&&a!=="loop"&&o%2===1?0:p.length-1;return!x||d===void 0?p[x]:d}const W3=40;class em{constructor({autoplay:o=!0,delay:a=0,type:d="keyframes",repeat:p=0,repeatDelay:x=0,repeatType:y="loop",...A}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=di.now(),this.options={autoplay:o,delay:a,type:d,repeat:p,repeatDelay:x,repeatType:y,...A},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>W3?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&L3(),this._resolved}onKeyframesResolved(o,a){this.resolvedAt=di.now(),this.hasAttemptedResolve=!0;const{name:d,type:p,velocity:x,delay:y,onComplete:A,onUpdate:w,isGenerator:E}=this.options;if(!E&&!U3(o,d,p,x))if(y)this.options.duration=0;else{w&&w(Mu(o,this.options,a)),A&&A(),this.resolveFinishedPromise();return}const S=this.initPlayback(o,a);S!==!1&&(this._resolved={keyframes:o,finalKeyframe:a,...S},this.onPostResolved())}onPostResolved(){}then(o,a){return this.currentFinishedPromise.then(o,a)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(o=>{this.resolveFinishedPromise=o})}}const an=(r,o,a)=>r+(o-r)*a;function xf(r,o,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?r+(o-r)*6*a:a<1/2?o:a<2/3?r+(o-r)*(2/3-a)*6:r}function H3({hue:r,saturation:o,lightness:a,alpha:d}){r/=360,o/=100,a/=100;let p=0,x=0,y=0;if(!o)p=x=y=a;else{const A=a<.5?a*(1+o):a+o-a*o,w=2*a-A;p=xf(w,A,r+1/3),x=xf(w,A,r),y=xf(w,A,r-1/3)}return{red:Math.round(p*255),green:Math.round(x*255),blue:Math.round(y*255),alpha:d}}function wu(r,o){return a=>a>0?o:r}const yf=(r,o,a)=>{const d=r*r,p=a*(o*o-d)+d;return p<0?0:Math.sqrt(p)},G3=[Mf,Gs,To],X3=r=>G3.find(o=>o.test(r));function M1(r){const o=X3(r);if(!o)return!1;let a=o.parse(r);return o===To&&(a=H3(a)),a}const D1=(r,o)=>{const a=M1(r),d=M1(o);if(!a||!d)return wu(r,o);const p={...a};return x=>(p.red=yf(a.red,d.red,x),p.green=yf(a.green,d.green,x),p.blue=yf(a.blue,d.blue,x),p.alpha=an(a.alpha,d.alpha,x),Gs.transform(p))},Y3=(r,o)=>a=>o(r(a)),Ya=(...r)=>r.reduce(Y3),Vf=new Set(["none","hidden"]);function K3(r,o){return Vf.has(r)?a=>a<=0?r:o:a=>a>=1?o:r}function Z3(r,o){return a=>an(r,o,a)}function Bd(r){return typeof r=="number"?Z3:typeof r=="string"?Ad(r)?wu:rr.test(r)?D1:Q3:Array.isArray(r)?tm:typeof r=="object"?rr.test(r)?D1:$3:wu}function tm(r,o){const a=[...r],d=a.length,p=r.map((x,y)=>Bd(x)(x,o[y]));return x=>{for(let y=0;y<d;y++)a[y]=p[y](x);return a}}function $3(r,o){const a={...r,...o},d={};for(const p in a)r[p]!==void 0&&o[p]!==void 0&&(d[p]=Bd(r[p])(r[p],o[p]));return p=>{for(const x in d)a[x]=d[x](p);return a}}function q3(r,o){const a=[],d={color:0,var:0,number:0};for(let p=0;p<o.values.length;p++){const x=o.types[p],y=r.indexes[x][d[x]],A=r.values[y]??0;a[p]=A,d[x]++}return a}const Q3=(r,o)=>{const a=ps.createTransformer(o),d=Va(r),p=Va(o);return d.indexes.var.length===p.indexes.var.length&&d.indexes.color.length===p.indexes.color.length&&d.indexes.number.length>=p.indexes.number.length?Vf.has(r)&&!p.values.length||Vf.has(o)&&!d.values.length?K3(r,o):Ya(tm(q3(d,p),p.values),a):wu(r,o)};function nm(r,o,a){return typeof r=="number"&&typeof o=="number"&&typeof a=="number"?an(r,o,a):Bd(r)(r,o)}const J3=5;function rm(r,o,a){const d=Math.max(o-J3,0);return ig(a-r(d),o-d)}const pn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},k1=.001;function ev({duration:r=pn.duration,bounce:o=pn.bounce,velocity:a=pn.velocity,mass:d=pn.mass}){let p,x,y=1-o;y=Li(pn.minDamping,pn.maxDamping,y),r=Li(pn.minDuration,pn.maxDuration,fi(r)),y<1?(p=E=>{const S=E*y,T=S*r,R=S-a,k=Uf(E,y),L=Math.exp(-T);return k1-R/k*L},x=E=>{const T=E*y*r,R=T*a+a,k=Math.pow(y,2)*Math.pow(E,2)*r,L=Math.exp(-T),j=Uf(Math.pow(E,2),y);return(-p(E)+k1>0?-1:1)*((R-k)*L)/j}):(p=E=>{const S=Math.exp(-E*r),T=(E-a)*r+1;return-.001+S*T},x=E=>{const S=Math.exp(-E*r),T=(a-E)*(r*r);return S*T});const A=5/r,w=nv(p,x,A);if(r=ci(r),isNaN(w))return{stiffness:pn.stiffness,damping:pn.damping,duration:r};{const E=Math.pow(w,2)*d;return{stiffness:E,damping:y*2*Math.sqrt(d*E),duration:r}}}const tv=12;function nv(r,o,a){let d=a;for(let p=1;p<tv;p++)d=d-r(d)/o(d);return d}function Uf(r,o){return r*Math.sqrt(1-o*o)}const rv=["duration","bounce"],iv=["stiffness","damping","mass"];function L1(r,o){return o.some(a=>r[a]!==void 0)}function sv(r){let o={velocity:pn.velocity,stiffness:pn.stiffness,damping:pn.damping,mass:pn.mass,isResolvedFromDuration:!1,...r};if(!L1(r,iv)&&L1(r,rv))if(r.visualDuration){const a=r.visualDuration,d=2*Math.PI/(a*1.2),p=d*d,x=2*Li(.05,1,1-(r.bounce||0))*Math.sqrt(p);o={...o,mass:pn.mass,stiffness:p,damping:x}}else{const a=ev(r);o={...o,...a,mass:pn.mass},o.isResolvedFromDuration=!0}return o}function vu(r=pn.visualDuration,o=pn.bounce){const a=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:o}:r;let{restSpeed:d,restDelta:p}=a;const x=a.keyframes[0],y=a.keyframes[a.keyframes.length-1],A={done:!1,value:x},{stiffness:w,damping:E,mass:S,duration:T,velocity:R,isResolvedFromDuration:k}=sv({...a,velocity:-fi(a.velocity||0)}),L=R||0,j=E/(2*Math.sqrt(w*S)),B=y-x,U=fi(Math.sqrt(w/S)),H=Math.abs(B)<5;d||(d=H?pn.restSpeed.granular:pn.restSpeed.default),p||(p=H?pn.restDelta.granular:pn.restDelta.default);let W;if(j<1){const ce=Uf(U,j);W=ie=>{const Q=Math.exp(-j*U*ie);return y-Q*((L+j*U*B)/ce*Math.sin(ce*ie)+B*Math.cos(ce*ie))}}else if(j===1)W=ce=>y-Math.exp(-U*ce)*(B+(L+U*B)*ce);else{const ce=U*Math.sqrt(j*j-1);W=ie=>{const Q=Math.exp(-j*U*ie),ue=Math.min(ce*ie,300);return y-Q*((L+j*U*B)*Math.sinh(ue)+ce*B*Math.cosh(ue))/ce}}const ee={calculatedDuration:k&&T||null,next:ce=>{const ie=W(ce);if(k)A.done=ce>=T;else{let Q=0;j<1&&(Q=ce===0?ci(L):rm(W,ce,ie));const ue=Math.abs(Q)<=d,q=Math.abs(y-ie)<=p;A.done=ue&&q}return A.value=A.done?y:ie,A},toString:()=>{const ce=Math.min(md(ee),xu),ie=sg(Q=>ee.next(ce*Q).value,ce,30);return ce+"ms "+ie},toTransition:()=>{}};return ee}vu.applyToOptions=r=>{const o=rw(r,100,vu);return r.ease=Da()?o.ease:"easeOut",r.duration=ci(o.duration),r.type="keyframes",r};function B1({keyframes:r,velocity:o=0,power:a=.8,timeConstant:d=325,bounceDamping:p=10,bounceStiffness:x=500,modifyTarget:y,min:A,max:w,restDelta:E=.5,restSpeed:S}){const T=r[0],R={done:!1,value:T},k=ue=>A!==void 0&&ue<A||w!==void 0&&ue>w,L=ue=>A===void 0?w:w===void 0||Math.abs(A-ue)<Math.abs(w-ue)?A:w;let j=a*o;const B=T+j,U=y===void 0?B:y(B);U!==B&&(j=U-T);const H=ue=>-j*Math.exp(-ue/d),W=ue=>U+H(ue),ee=ue=>{const q=H(ue),Re=W(ue);R.done=Math.abs(q)<=E,R.value=R.done?U:Re};let ce,ie;const Q=ue=>{k(R.value)&&(ce=ue,ie=vu({keyframes:[R.value,L(R.value)],velocity:rm(W,ue,R.value),damping:p,stiffness:x,restDelta:E,restSpeed:S}))};return Q(0),{calculatedDuration:null,next:ue=>{let q=!1;return!ie&&ce===void 0&&(q=!0,ee(ue),Q(ue)),ce!==void 0&&ue>=ce?ie.next(ue-ce):(!q&&ee(ue),R)}}}const ov=Xa(.42,0,1,1),av=Xa(0,0,.58,1),im=Xa(.42,0,.58,1),lv=r=>Array.isArray(r)&&typeof r[0]!="number",uv={linear:Ur,easeIn:ov,easeInOut:im,easeOut:av,circIn:Md,circInOut:Fg,circOut:Bg,backIn:Pd,backInOut:kg,backOut:Dg,anticipate:Lg},F1=r=>{if(hd(r)){rg(r.length===4);const[o,a,d,p]=r;return Xa(o,a,d,p)}else if(typeof r=="string")return uv[r];return r};function cv(r,o,a){const d=[],p=a||nm,x=r.length-1;for(let y=0;y<x;y++){let A=p(r[y],r[y+1]);if(o){const w=Array.isArray(o)?o[y]||Ur:o;A=Ya(w,A)}d.push(A)}return d}function fv(r,o,{clamp:a=!0,ease:d,mixer:p}={}){const x=r.length;if(rg(x===o.length),x===1)return()=>o[0];if(x===2&&o[0]===o[1])return()=>o[1];const y=r[0]===r[1];r[0]>r[x-1]&&(r=[...r].reverse(),o=[...o].reverse());const A=cv(o,d,p),w=A.length,E=S=>{if(y&&S<r[0])return o[0];let T=0;if(w>1)for(;T<r.length-2&&!(S<r[T+1]);T++);const R=Ma(r[T],r[T+1],S);return A[T](R)};return a?S=>E(Li(r[0],r[x-1],S)):E}function dv(r,o){const a=r[r.length-1];for(let d=1;d<=o;d++){const p=Ma(0,o,d);r.push(an(a,1,p))}}function hv(r){const o=[0];return dv(o,r.length-1),o}function pv(r,o){return r.map(a=>a*o)}function gv(r,o){return r.map(()=>o||im).splice(0,r.length-1)}function Cu({duration:r=300,keyframes:o,times:a,ease:d="easeInOut"}){const p=lv(d)?d.map(F1):F1(d),x={done:!1,value:o[0]},y=pv(a&&a.length===o.length?a:hv(o),r),A=fv(y,o,{ease:Array.isArray(p)?p:gv(o,p)});return{calculatedDuration:r,next:w=>(x.value=A(w),x.done=w>=r,x)}}const mv=r=>{const o=({timestamp:a})=>r(a);return{start:()=>Kt.update(o,!0),stop:()=>hs(o),now:()=>Zn.isProcessing?Zn.timestamp:di.now()}},xv={decay:B1,inertia:B1,tween:Cu,keyframes:Cu,spring:vu},yv=r=>r/100;class Fd extends em{constructor(o){super(o),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:w}=this.options;w&&w()};const{name:a,motionValue:d,element:p,keyframes:x}=this.options,y=(p==null?void 0:p.KeyframeResolver)||Ld,A=(w,E)=>this.onKeyframesResolved(w,E);this.resolver=new y(x,A,a,d,p),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(o){const{type:a="keyframes",repeat:d=0,repeatDelay:p=0,repeatType:x,velocity:y=0}=this.options,A=pd(a)?a:xv[a]||Cu;let w,E;A!==Cu&&typeof o[0]!="number"&&(w=Ya(yv,nm(o[0],o[1])),o=[0,100]);const S=A({...this.options,keyframes:o});x==="mirror"&&(E=A({...this.options,keyframes:[...o].reverse(),velocity:-y})),S.calculatedDuration===null&&(S.calculatedDuration=md(S));const{calculatedDuration:T}=S,R=T+p,k=R*(d+1)-p;return{generator:S,mirroredGenerator:E,mapPercentToKeyframes:w,calculatedDuration:T,resolvedDuration:R,totalDuration:k}}onPostResolved(){const{autoplay:o=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!o?this.pause():this.state=this.pendingPlayState}tick(o,a=!1){const{resolved:d}=this;if(!d){const{keyframes:ue}=this.options;return{done:!0,value:ue[ue.length-1]}}const{finalKeyframe:p,generator:x,mirroredGenerator:y,mapPercentToKeyframes:A,keyframes:w,calculatedDuration:E,totalDuration:S,resolvedDuration:T}=d;if(this.startTime===null)return x.next(0);const{delay:R,repeat:k,repeatType:L,repeatDelay:j,onUpdate:B}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,o):this.speed<0&&(this.startTime=Math.min(o-S/this.speed,this.startTime)),a?this.currentTime=o:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(o-this.startTime)*this.speed;const U=this.currentTime-R*(this.speed>=0?1:-1),H=this.speed>=0?U<0:U>S;this.currentTime=Math.max(U,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=S);let W=this.currentTime,ee=x;if(k){const ue=Math.min(this.currentTime,S)/T;let q=Math.floor(ue),Re=ue%1;!Re&&ue>=1&&(Re=1),Re===1&&q--,q=Math.min(q,k+1),!!(q%2)&&(L==="reverse"?(Re=1-Re,j&&(Re-=j/T)):L==="mirror"&&(ee=y)),W=Li(0,1,Re)*T}const ce=H?{done:!1,value:w[0]}:ee.next(W);A&&(ce.value=A(ce.value));let{done:ie}=ce;!H&&E!==null&&(ie=this.speed>=0?this.currentTime>=S:this.currentTime<=0);const Q=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ie);return Q&&p!==void 0&&(ce.value=Mu(w,this.options,p)),B&&B(ce.value),Q&&this.finish(),ce}get duration(){const{resolved:o}=this;return o?fi(o.calculatedDuration):0}get time(){return fi(this.currentTime)}set time(o){o=ci(o),this.currentTime=o,this.holdTime!==null||this.speed===0?this.holdTime=o:this.driver&&(this.startTime=this.driver.now()-o/this.speed)}get speed(){return this.playbackSpeed}set speed(o){const a=this.playbackSpeed!==o;this.playbackSpeed=o,a&&(this.time=fi(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:o=mv,onPlay:a,startTime:d}=this.options;this.driver||(this.driver=o(x=>this.tick(x))),a&&a();const p=this.driver.now();this.holdTime!==null?this.startTime=p-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=p):this.startTime=d??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=this.currentTime??0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:o}=this.options;o&&o()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(o){return this.startTime=0,this.tick(o,!0)}get finished(){return this.currentFinishedPromise}}const wv=new Set(["opacity","clipPath","filter","transform"]),vv=fd(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Eu=10,Cv=2e4;function Ev(r){return pd(r.type)||r.type==="spring"||!ag(r.ease)}function Av(r,o){const a=new Fd({...o,keyframes:r,repeat:0,delay:0,isGenerator:!0});let d={done:!1,value:r[0]};const p=[];let x=0;for(;!d.done&&x<Cv;)d=a.sample(x),p.push(d.value),x+=Eu;return{times:void 0,keyframes:p,duration:x-Eu,ease:"linear"}}const sm={anticipate:Lg,backInOut:kg,circInOut:Fg};function Sv(r){return r in sm}class j1 extends em{constructor(o){super(o);const{name:a,motionValue:d,element:p,keyframes:x}=this.options;this.resolver=new Jg(x,(y,A)=>this.onKeyframesResolved(y,A),a,d,p),this.resolver.scheduleResolve()}initPlayback(o,a){let{duration:d=300,times:p,ease:x,type:y,motionValue:A,name:w,startTime:E}=this.options;if(!A.owner||!A.owner.current)return!1;if(typeof x=="string"&&Da()&&Sv(x)&&(x=sm[x]),Ev(this.options)){const{onComplete:T,onUpdate:R,motionValue:k,element:L,...j}=this.options,B=Av(o,j);o=B.keyframes,o.length===1&&(o[1]=o[0]),d=B.duration,p=B.times,x=B.ease,y="keyframes"}const S=nw(A.owner.current,w,o,{...this.options,duration:d,times:p,ease:x});return S.startTime=E??this.calcStartTime(),this.pendingTimeline?(h1(S,this.pendingTimeline),this.pendingTimeline=void 0):S.onfinish=()=>{const{onComplete:T}=this.options;A.set(Mu(o,this.options,a)),T&&T(),this.cancel(),this.resolveFinishedPromise()},{animation:S,duration:d,times:p,type:y,ease:x,keyframes:o}}get duration(){const{resolved:o}=this;if(!o)return 0;const{duration:a}=o;return fi(a)}get time(){const{resolved:o}=this;if(!o)return 0;const{animation:a}=o;return fi(a.currentTime||0)}set time(o){const{resolved:a}=this;if(!a)return;const{animation:d}=a;d.currentTime=ci(o)}get speed(){const{resolved:o}=this;if(!o)return 1;const{animation:a}=o;return a.playbackRate}get finished(){return this.resolved.animation.finished}set speed(o){const{resolved:a}=this;if(!a)return;const{animation:d}=a;d.playbackRate=o}get state(){const{resolved:o}=this;if(!o)return"idle";const{animation:a}=o;return a.playState}get startTime(){const{resolved:o}=this;if(!o)return null;const{animation:a}=o;return a.startTime}attachTimeline(o){if(!this._resolved)this.pendingTimeline=o;else{const{resolved:a}=this;if(!a)return Ur;const{animation:d}=a;h1(d,o)}return Ur}play(){if(this.isStopped)return;const{resolved:o}=this;if(!o)return;const{animation:a}=o;a.playState==="finished"&&this.updateFinishedPromise(),a.play()}pause(){const{resolved:o}=this;if(!o)return;const{animation:a}=o;a.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:o}=this;if(!o)return;const{animation:a,keyframes:d,duration:p,type:x,ease:y,times:A}=o;if(a.playState==="idle"||a.playState==="finished")return;if(this.time){const{motionValue:E,onUpdate:S,onComplete:T,element:R,...k}=this.options,L=new Fd({...k,keyframes:d,duration:p,type:x,ease:y,times:A,isGenerator:!0}),j=ci(this.time);E.setWithVelocity(L.sample(j-Eu).value,L.sample(j).value,Eu)}const{onStop:w}=this.options;w&&w(),this.cancel()}complete(){const{resolved:o}=this;o&&o.animation.finish()}cancel(){const{resolved:o}=this;o&&o.animation.cancel()}static supports(o){const{motionValue:a,name:d,repeatDelay:p,repeatType:x,damping:y,type:A}=o;if(!a||!a.owner||!(a.owner.current instanceof HTMLElement))return!1;const{onUpdate:w,transformTemplate:E}=a.owner.getProps();return vv()&&d&&wv.has(d)&&(d!=="transform"||!E)&&!w&&!p&&x!=="mirror"&&y!==0&&A!=="inertia"}}const bv={type:"spring",stiffness:500,damping:25,restSpeed:10},Tv=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),Iv={type:"keyframes",duration:.8},Nv={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Rv=(r,{keyframes:o})=>o.length>2?Iv:$s.has(r)?r.startsWith("scale")?Tv(o[1]):bv:Nv;function _v({when:r,delay:o,delayChildren:a,staggerChildren:d,staggerDirection:p,repeat:x,repeatType:y,repeatDelay:A,from:w,elapsed:E,...S}){return!!Object.keys(S).length}const jd=(r,o,a,d={},p,x)=>y=>{const A=gd(d,r)||{},w=A.delay||d.delay||0;let{elapsed:E=0}=d;E=E-ci(w);let S={keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:o.getVelocity(),...A,delay:-E,onUpdate:R=>{o.set(R),A.onUpdate&&A.onUpdate(R)},onComplete:()=>{y(),A.onComplete&&A.onComplete()},name:r,motionValue:o,element:x?void 0:p};_v(A)||(S={...S,...Rv(r,S)}),S.duration&&(S.duration=ci(S.duration)),S.repeatDelay&&(S.repeatDelay=ci(S.repeatDelay)),S.from!==void 0&&(S.keyframes[0]=S.from);let T=!1;if((S.type===!1||S.duration===0&&!S.repeatDelay)&&(S.duration=0,S.delay===0&&(T=!0)),S.allowFlatten=!A.type&&!A.ease,T&&!x&&o.get()!==void 0){const R=Mu(S.keyframes,A);if(R!==void 0)return Kt.update(()=>{S.onUpdate(R),S.onComplete()}),new Jy([])}return!x&&j1.supports(S)?new j1(S):new Fd(S)};function Ov({protectedKeys:r,needsAnimating:o},a){const d=r.hasOwnProperty(a)&&o[a]!==!0;return o[a]=!1,d}function om(r,o,{delay:a=0,transitionOverride:d,type:p}={}){let{transition:x=r.getDefaultTransition(),transitionEnd:y,...A}=o;d&&(x=d);const w=[],E=p&&r.animationState&&r.animationState.getState()[p];for(const S in A){const T=r.getValue(S,r.latestValues[S]??null),R=A[S];if(R===void 0||E&&Ov(E,S))continue;const k={delay:a,...gd(x||{},S)};let L=!1;if(window.MotionHandoffAnimation){const B=_g(r);if(B){const U=window.MotionHandoffAnimation(B,S,Kt);U!==null&&(k.startTime=U,L=!0)}}Pf(r,S),T.start(jd(S,T,R,r.shouldReduceMotion&&Rg.has(S)?{type:!1}:k,r,L));const j=T.animation;j&&w.push(j)}return y&&Promise.all(w).then(()=>{Kt.update(()=>{y&&o3(r,y)})}),w}function zf(r,o,a={}){var w;const d=ja(r,o,a.type==="exit"?(w=r.presenceContext)==null?void 0:w.custom:void 0);let{transition:p=r.getDefaultTransition()||{}}=d||{};a.transitionOverride&&(p=a.transitionOverride);const x=d?()=>Promise.all(om(r,d,a)):()=>Promise.resolve(),y=r.variantChildren&&r.variantChildren.size?(E=0)=>{const{delayChildren:S=0,staggerChildren:T,staggerDirection:R}=p;return Pv(r,o,S+E,T,R,a)}:()=>Promise.resolve(),{when:A}=p;if(A){const[E,S]=A==="beforeChildren"?[x,y]:[y,x];return E().then(()=>S())}else return Promise.all([x(),y(a.delay)])}function Pv(r,o,a=0,d=0,p=1,x){const y=[],A=(r.variantChildren.size-1)*d,w=p===1?(E=0)=>E*d:(E=0)=>A-E*d;return Array.from(r.variantChildren).sort(Mv).forEach((E,S)=>{E.notify("AnimationStart",o),y.push(zf(E,o,{...x,delay:a+w(S)}).then(()=>E.notify("AnimationComplete",o)))}),Promise.all(y)}function Mv(r,o){return r.sortNodePosition(o)}function Dv(r,o,a={}){r.notify("AnimationStart",o);let d;if(Array.isArray(o)){const p=o.map(x=>zf(r,x,a));d=Promise.all(p)}else if(typeof o=="string")d=zf(r,o,a);else{const p=typeof o=="function"?ja(r,o,a.custom):o;d=Promise.all(om(r,p,a))}return d.then(()=>{r.notify("AnimationComplete",o)})}function am(r,o){if(!Array.isArray(o))return!1;const a=o.length;if(a!==r.length)return!1;for(let d=0;d<a;d++)if(o[d]!==r[d])return!1;return!0}const kv=vd.length;function lm(r){if(!r)return;if(!r.isControllingVariants){const a=r.parent?lm(r.parent)||{}:{};return r.props.initial!==void 0&&(a.initial=r.props.initial),a}const o={};for(let a=0;a<kv;a++){const d=vd[a],p=r.props[d];(La(p)||p===!1)&&(o[d]=p)}return o}const Lv=[...wd].reverse(),Bv=wd.length;function Fv(r){return o=>Promise.all(o.map(({animation:a,options:d})=>Dv(r,a,d)))}function jv(r){let o=Fv(r),a=V1(),d=!0;const p=w=>(E,S)=>{var R;const T=ja(r,S,w==="exit"?(R=r.presenceContext)==null?void 0:R.custom:void 0);if(T){const{transition:k,transitionEnd:L,...j}=T;E={...E,...j,...L}}return E};function x(w){o=w(r)}function y(w){const{props:E}=r,S=lm(r.parent)||{},T=[],R=new Set;let k={},L=1/0;for(let B=0;B<Bv;B++){const U=Lv[B],H=a[U],W=E[U]!==void 0?E[U]:S[U],ee=La(W),ce=U===w?H.isActive:null;ce===!1&&(L=B);let ie=W===S[U]&&W!==E[U]&&ee;if(ie&&d&&r.manuallyAnimateOnMount&&(ie=!1),H.protectedKeys={...k},!H.isActive&&ce===null||!W&&!H.prevProp||Ou(W)||typeof W=="boolean")continue;const Q=Vv(H.prevProp,W);let ue=Q||U===w&&H.isActive&&!ie&&ee||B>L&&ee,q=!1;const Re=Array.isArray(W)?W:[W];let je=Re.reduce(p(U),{});ce===!1&&(je={});const{prevResolvedValues:be={}}=H,Oe={...be,...je},Le=oe=>{ue=!0,R.has(oe)&&(q=!0,R.delete(oe)),H.needsAnimating[oe]=!0;const fe=r.getValue(oe);fe&&(fe.liveStyle=!1)};for(const oe in Oe){const fe=je[oe],pe=be[oe];if(k.hasOwnProperty(oe))continue;let ge=!1;Of(fe)&&Of(pe)?ge=!am(fe,pe):ge=fe!==pe,ge?fe!=null?Le(oe):R.add(oe):fe!==void 0&&R.has(oe)?Le(oe):H.protectedKeys[oe]=!0}H.prevProp=W,H.prevResolvedValues=je,H.isActive&&(k={...k,...je}),d&&r.blockInitialAnimation&&(ue=!1),ue&&(!(ie&&Q)||q)&&T.push(...Re.map(oe=>({animation:oe,options:{type:U}})))}if(R.size){const B={};if(typeof E.initial!="boolean"){const U=ja(r,Array.isArray(E.initial)?E.initial[0]:E.initial);U&&U.transition&&(B.transition=U.transition)}R.forEach(U=>{const H=r.getBaseTarget(U),W=r.getValue(U);W&&(W.liveStyle=!0),B[U]=H??null}),T.push({animation:B})}let j=!!T.length;return d&&(E.initial===!1||E.initial===E.animate)&&!r.manuallyAnimateOnMount&&(j=!1),d=!1,j?o(T):Promise.resolve()}function A(w,E){var T;if(a[w].isActive===E)return Promise.resolve();(T=r.variantChildren)==null||T.forEach(R=>{var k;return(k=R.animationState)==null?void 0:k.setActive(w,E)}),a[w].isActive=E;const S=y(w);for(const R in a)a[R].protectedKeys={};return S}return{animateChanges:y,setActive:A,setAnimateFunction:x,getState:()=>a,reset:()=>{a=V1(),d=!0}}}function Vv(r,o){return typeof o=="string"?o!==r:Array.isArray(o)?!am(o,r):!1}function Ws(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function V1(){return{animate:Ws(!0),whileInView:Ws(),whileHover:Ws(),whileTap:Ws(),whileDrag:Ws(),whileFocus:Ws(),exit:Ws()}}class gs{constructor(o){this.isMounted=!1,this.node=o}update(){}}class Uv extends gs{constructor(o){super(o),o.animationState||(o.animationState=jv(o))}updateAnimationControlsSubscription(){const{animate:o}=this.node.getProps();Ou(o)&&(this.unmountControls=o.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:o}=this.node.getProps(),{animate:a}=this.node.prevProps||{};o!==a&&this.updateAnimationControlsSubscription()}unmount(){var o;this.node.animationState.reset(),(o=this.unmountControls)==null||o.call(this)}}let zv=0;class Wv extends gs{constructor(){super(...arguments),this.id=zv++}update(){if(!this.node.presenceContext)return;const{isPresent:o,onExitComplete:a}=this.node.presenceContext,{isPresent:d}=this.node.prevPresenceContext||{};if(!this.node.animationState||o===d)return;const p=this.node.animationState.setActive("exit",!o);a&&!o&&p.then(()=>{a(this.id)})}mount(){const{register:o,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),o&&(this.unmount=o(this.id))}unmount(){}}const Hv={animation:{Feature:Uv},exit:{Feature:Wv}};function Ua(r,o,a,d={passive:!0}){return r.addEventListener(o,a,d),()=>r.removeEventListener(o,a)}function Ka(r){return{point:{x:r.pageX,y:r.pageY}}}const Gv=r=>o=>yd(o)&&r(o,Ka(o));function Na(r,o,a,d){return Ua(r,o,Gv(a),d)}function um({top:r,left:o,right:a,bottom:d}){return{x:{min:o,max:a},y:{min:r,max:d}}}function Xv({x:r,y:o}){return{top:o.min,right:r.max,bottom:o.max,left:r.min}}function Yv(r,o){if(!o)return r;const a=o({x:r.left,y:r.top}),d=o({x:r.right,y:r.bottom});return{top:a.y,left:a.x,bottom:d.y,right:d.x}}const cm=1e-4,Kv=1-cm,Zv=1+cm,fm=.01,$v=0-fm,qv=0+fm;function hr(r){return r.max-r.min}function Qv(r,o,a){return Math.abs(r-o)<=a}function U1(r,o,a,d=.5){r.origin=d,r.originPoint=an(o.min,o.max,r.origin),r.scale=hr(a)/hr(o),r.translate=an(a.min,a.max,r.origin)-r.originPoint,(r.scale>=Kv&&r.scale<=Zv||isNaN(r.scale))&&(r.scale=1),(r.translate>=$v&&r.translate<=qv||isNaN(r.translate))&&(r.translate=0)}function Ra(r,o,a,d){U1(r.x,o.x,a.x,d?d.originX:void 0),U1(r.y,o.y,a.y,d?d.originY:void 0)}function z1(r,o,a){r.min=a.min+o.min,r.max=r.min+hr(o)}function Jv(r,o,a){z1(r.x,o.x,a.x),z1(r.y,o.y,a.y)}function W1(r,o,a){r.min=o.min-a.min,r.max=r.min+hr(o)}function _a(r,o,a){W1(r.x,o.x,a.x),W1(r.y,o.y,a.y)}const H1=()=>({translate:0,scale:1,origin:0,originPoint:0}),Io=()=>({x:H1(),y:H1()}),G1=()=>({min:0,max:0}),Cn=()=>({x:G1(),y:G1()});function Vr(r){return[r("x"),r("y")]}function wf(r){return r===void 0||r===1}function Wf({scale:r,scaleX:o,scaleY:a}){return!wf(r)||!wf(o)||!wf(a)}function Hs(r){return Wf(r)||dm(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function dm(r){return X1(r.x)||X1(r.y)}function X1(r){return r&&r!=="0%"}function Au(r,o,a){const d=r-a,p=o*d;return a+p}function Y1(r,o,a,d,p){return p!==void 0&&(r=Au(r,p,d)),Au(r,a,d)+o}function Hf(r,o=0,a=1,d,p){r.min=Y1(r.min,o,a,d,p),r.max=Y1(r.max,o,a,d,p)}function hm(r,{x:o,y:a}){Hf(r.x,o.translate,o.scale,o.originPoint),Hf(r.y,a.translate,a.scale,a.originPoint)}const K1=.999999999999,Z1=1.0000000000001;function eC(r,o,a,d=!1){const p=a.length;if(!p)return;o.x=o.y=1;let x,y;for(let A=0;A<p;A++){x=a[A],y=x.projectionDelta;const{visualElement:w}=x.options;w&&w.props.style&&w.props.style.display==="contents"||(d&&x.options.layoutScroll&&x.scroll&&x!==x.root&&Ro(r,{x:-x.scroll.offset.x,y:-x.scroll.offset.y}),y&&(o.x*=y.x.scale,o.y*=y.y.scale,hm(r,y)),d&&Hs(x.latestValues)&&Ro(r,x.latestValues))}o.x<Z1&&o.x>K1&&(o.x=1),o.y<Z1&&o.y>K1&&(o.y=1)}function No(r,o){r.min=r.min+o,r.max=r.max+o}function $1(r,o,a,d,p=.5){const x=an(r.min,r.max,p);Hf(r,o,a,x,d)}function Ro(r,o){$1(r.x,o.x,o.scaleX,o.scale,o.originX),$1(r.y,o.y,o.scaleY,o.scale,o.originY)}function pm(r,o){return um(Yv(r.getBoundingClientRect(),o))}function tC(r,o,a){const d=pm(r,a),{scroll:p}=o;return p&&(No(d.x,p.offset.x),No(d.y,p.offset.y)),d}const gm=({current:r})=>r?r.ownerDocument.defaultView:null,q1=(r,o)=>Math.abs(r-o);function nC(r,o){const a=q1(r.x,o.x),d=q1(r.y,o.y);return Math.sqrt(a**2+d**2)}class mm{constructor(o,a,{transformPagePoint:d,contextWindow:p,dragSnapToOrigin:x=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=Cf(this.lastMoveEventInfo,this.history),R=this.startEvent!==null,k=nC(T.offset,{x:0,y:0})>=3;if(!R&&!k)return;const{point:L}=T,{timestamp:j}=Zn;this.history.push({...L,timestamp:j});const{onStart:B,onMove:U}=this.handlers;R||(B&&B(this.lastMoveEvent,T),this.startEvent=this.lastMoveEvent),U&&U(this.lastMoveEvent,T)},this.handlePointerMove=(T,R)=>{this.lastMoveEvent=T,this.lastMoveEventInfo=vf(R,this.transformPagePoint),Kt.update(this.updatePoint,!0)},this.handlePointerUp=(T,R)=>{this.end();const{onEnd:k,onSessionEnd:L,resumeAnimation:j}=this.handlers;if(this.dragSnapToOrigin&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const B=Cf(T.type==="pointercancel"?this.lastMoveEventInfo:vf(R,this.transformPagePoint),this.history);this.startEvent&&k&&k(T,B),L&&L(T,B)},!yd(o))return;this.dragSnapToOrigin=x,this.handlers=a,this.transformPagePoint=d,this.contextWindow=p||window;const y=Ka(o),A=vf(y,this.transformPagePoint),{point:w}=A,{timestamp:E}=Zn;this.history=[{...w,timestamp:E}];const{onSessionStart:S}=a;S&&S(o,Cf(A,this.history)),this.removeListeners=Ya(Na(this.contextWindow,"pointermove",this.handlePointerMove),Na(this.contextWindow,"pointerup",this.handlePointerUp),Na(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(o){this.handlers=o}end(){this.removeListeners&&this.removeListeners(),hs(this.updatePoint)}}function vf(r,o){return o?{point:o(r.point)}:r}function Q1(r,o){return{x:r.x-o.x,y:r.y-o.y}}function Cf({point:r},o){return{point:r,delta:Q1(r,xm(o)),offset:Q1(r,rC(o)),velocity:iC(o,.1)}}function rC(r){return r[0]}function xm(r){return r[r.length-1]}function iC(r,o){if(r.length<2)return{x:0,y:0};let a=r.length-1,d=null;const p=xm(r);for(;a>=0&&(d=r[a],!(p.timestamp-d.timestamp>ci(o)));)a--;if(!d)return{x:0,y:0};const x=fi(p.timestamp-d.timestamp);if(x===0)return{x:0,y:0};const y={x:(p.x-d.x)/x,y:(p.y-d.y)/x};return y.x===1/0&&(y.x=0),y.y===1/0&&(y.y=0),y}function sC(r,{min:o,max:a},d){return o!==void 0&&r<o?r=d?an(o,r,d.min):Math.max(r,o):a!==void 0&&r>a&&(r=d?an(a,r,d.max):Math.min(r,a)),r}function J1(r,o,a){return{min:o!==void 0?r.min+o:void 0,max:a!==void 0?r.max+a-(r.max-r.min):void 0}}function oC(r,{top:o,left:a,bottom:d,right:p}){return{x:J1(r.x,a,p),y:J1(r.y,o,d)}}function ep(r,o){let a=o.min-r.min,d=o.max-r.max;return o.max-o.min<r.max-r.min&&([a,d]=[d,a]),{min:a,max:d}}function aC(r,o){return{x:ep(r.x,o.x),y:ep(r.y,o.y)}}function lC(r,o){let a=.5;const d=hr(r),p=hr(o);return p>d?a=Ma(o.min,o.max-d,r.min):d>p&&(a=Ma(r.min,r.max-p,o.min)),Li(0,1,a)}function uC(r,o){const a={};return o.min!==void 0&&(a.min=o.min-r.min),o.max!==void 0&&(a.max=o.max-r.min),a}const Gf=.35;function cC(r=Gf){return r===!1?r=0:r===!0&&(r=Gf),{x:tp(r,"left","right"),y:tp(r,"top","bottom")}}function tp(r,o,a){return{min:np(r,o),max:np(r,a)}}function np(r,o){return typeof r=="number"?r:r[o]||0}const fC=new WeakMap;class dC{constructor(o){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Cn(),this.visualElement=o}start(o,{snapToCursor:a=!1}={}){const{presenceContext:d}=this.visualElement;if(d&&d.isPresent===!1)return;const p=S=>{const{dragSnapToOrigin:T}=this.getProps();T?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(Ka(S).point)},x=(S,T)=>{const{drag:R,dragPropagation:k,onDragStart:L}=this.getProps();if(R&&!k&&(this.openDragLock&&this.openDragLock(),this.openDragLock=aw(R),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Vr(B=>{let U=this.getAxisMotionValue(B).get()||0;if(hi.test(U)){const{projection:H}=this.visualElement;if(H&&H.layout){const W=H.layout.layoutBox[B];W&&(U=hr(W)*(parseFloat(U)/100))}}this.originPoint[B]=U}),L&&Kt.postRender(()=>L(S,T)),Pf(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},y=(S,T)=>{const{dragPropagation:R,dragDirectionLock:k,onDirectionLock:L,onDrag:j}=this.getProps();if(!R&&!this.openDragLock)return;const{offset:B}=T;if(k&&this.currentDirection===null){this.currentDirection=hC(B),this.currentDirection!==null&&L&&L(this.currentDirection);return}this.updateAxis("x",T.point,B),this.updateAxis("y",T.point,B),this.visualElement.render(),j&&j(S,T)},A=(S,T)=>this.stop(S,T),w=()=>Vr(S=>{var T;return this.getAnimationState(S)==="paused"&&((T=this.getAxisMotionValue(S).animation)==null?void 0:T.play())}),{dragSnapToOrigin:E}=this.getProps();this.panSession=new mm(o,{onSessionStart:p,onStart:x,onMove:y,onSessionEnd:A,resumeAnimation:w},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:E,contextWindow:gm(this.visualElement)})}stop(o,a){const d=this.isDragging;if(this.cancel(),!d)return;const{velocity:p}=a;this.startAnimation(p);const{onDragEnd:x}=this.getProps();x&&Kt.postRender(()=>x(o,a))}cancel(){this.isDragging=!1;const{projection:o,animationState:a}=this.visualElement;o&&(o.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:d}=this.getProps();!d&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(o,a,d){const{drag:p}=this.getProps();if(!d||!su(o,p,this.currentDirection))return;const x=this.getAxisMotionValue(o);let y=this.originPoint[o]+d[o];this.constraints&&this.constraints[o]&&(y=sC(y,this.constraints[o],this.elastic[o])),x.set(y)}resolveConstraints(){var x;const{dragConstraints:o,dragElastic:a}=this.getProps(),d=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(x=this.visualElement.projection)==null?void 0:x.layout,p=this.constraints;o&&bo(o)?this.constraints||(this.constraints=this.resolveRefConstraints()):o&&d?this.constraints=oC(d.layoutBox,o):this.constraints=!1,this.elastic=cC(a),p!==this.constraints&&d&&this.constraints&&!this.hasMutatedConstraints&&Vr(y=>{this.constraints!==!1&&this.getAxisMotionValue(y)&&(this.constraints[y]=uC(d.layoutBox[y],this.constraints[y]))})}resolveRefConstraints(){const{dragConstraints:o,onMeasureDragConstraints:a}=this.getProps();if(!o||!bo(o))return!1;const d=o.current,{projection:p}=this.visualElement;if(!p||!p.layout)return!1;const x=tC(d,p.root,this.visualElement.getTransformPagePoint());let y=aC(p.layout.layoutBox,x);if(a){const A=a(Xv(y));this.hasMutatedConstraints=!!A,A&&(y=um(A))}return y}startAnimation(o){const{drag:a,dragMomentum:d,dragElastic:p,dragTransition:x,dragSnapToOrigin:y,onDragTransitionEnd:A}=this.getProps(),w=this.constraints||{},E=Vr(S=>{if(!su(S,a,this.currentDirection))return;let T=w&&w[S]||{};y&&(T={min:0,max:0});const R=p?200:1e6,k=p?40:1e7,L={type:"inertia",velocity:d?o[S]:0,bounceStiffness:R,bounceDamping:k,timeConstant:750,restDelta:1,restSpeed:10,...x,...T};return this.startAxisValueAnimation(S,L)});return Promise.all(E).then(A)}startAxisValueAnimation(o,a){const d=this.getAxisMotionValue(o);return Pf(this.visualElement,o),d.start(jd(o,d,0,a,this.visualElement,!1))}stopAnimation(){Vr(o=>this.getAxisMotionValue(o).stop())}pauseAnimation(){Vr(o=>{var a;return(a=this.getAxisMotionValue(o).animation)==null?void 0:a.pause()})}getAnimationState(o){var a;return(a=this.getAxisMotionValue(o).animation)==null?void 0:a.state}getAxisMotionValue(o){const a=`_drag${o.toUpperCase()}`,d=this.visualElement.getProps(),p=d[a];return p||this.visualElement.getValue(o,(d.initial?d.initial[o]:void 0)||0)}snapToCursor(o){Vr(a=>{const{drag:d}=this.getProps();if(!su(a,d,this.currentDirection))return;const{projection:p}=this.visualElement,x=this.getAxisMotionValue(a);if(p&&p.layout){const{min:y,max:A}=p.layout.layoutBox[a];x.set(o[a]-an(y,A,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:o,dragConstraints:a}=this.getProps(),{projection:d}=this.visualElement;if(!bo(a)||!d||!this.constraints)return;this.stopAnimation();const p={x:0,y:0};Vr(y=>{const A=this.getAxisMotionValue(y);if(A&&this.constraints!==!1){const w=A.get();p[y]=lC({min:w,max:w},this.constraints[y])}});const{transformTemplate:x}=this.visualElement.getProps();this.visualElement.current.style.transform=x?x({},""):"none",d.root&&d.root.updateScroll(),d.updateLayout(),this.resolveConstraints(),Vr(y=>{if(!su(y,o,null))return;const A=this.getAxisMotionValue(y),{min:w,max:E}=this.constraints[y];A.set(an(w,E,p[y]))})}addListeners(){if(!this.visualElement.current)return;fC.set(this.visualElement,this);const o=this.visualElement.current,a=Na(o,"pointerdown",w=>{const{drag:E,dragListener:S=!0}=this.getProps();E&&S&&this.start(w)}),d=()=>{const{dragConstraints:w}=this.getProps();bo(w)&&w.current&&(this.constraints=this.resolveRefConstraints())},{projection:p}=this.visualElement,x=p.addEventListener("measure",d);p&&!p.layout&&(p.root&&p.root.updateScroll(),p.updateLayout()),Kt.read(d);const y=Ua(window,"resize",()=>this.scalePositionWithinConstraints()),A=p.addEventListener("didUpdate",({delta:w,hasLayoutChanged:E})=>{this.isDragging&&E&&(Vr(S=>{const T=this.getAxisMotionValue(S);T&&(this.originPoint[S]+=w[S].translate,T.set(T.get()+w[S].translate))}),this.visualElement.render())});return()=>{y(),a(),x(),A&&A()}}getProps(){const o=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:d=!1,dragPropagation:p=!1,dragConstraints:x=!1,dragElastic:y=Gf,dragMomentum:A=!0}=o;return{...o,drag:a,dragDirectionLock:d,dragPropagation:p,dragConstraints:x,dragElastic:y,dragMomentum:A}}}function su(r,o,a){return(o===!0||o===r)&&(a===null||a===r)}function hC(r,o=10){let a=null;return Math.abs(r.y)>o?a="y":Math.abs(r.x)>o&&(a="x"),a}class pC extends gs{constructor(o){super(o),this.removeGroupControls=Ur,this.removeListeners=Ur,this.controls=new dC(o)}mount(){const{dragControls:o}=this.node.getProps();o&&(this.removeGroupControls=o.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ur}unmount(){this.removeGroupControls(),this.removeListeners()}}const rp=r=>(o,a)=>{r&&Kt.postRender(()=>r(o,a))};class gC extends gs{constructor(){super(...arguments),this.removePointerDownListener=Ur}onPointerDown(o){this.session=new mm(o,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:gm(this.node)})}createPanHandlers(){const{onPanSessionStart:o,onPanStart:a,onPan:d,onPanEnd:p}=this.node.getProps();return{onSessionStart:rp(o),onStart:rp(a),onMove:d,onEnd:(x,y)=>{delete this.session,p&&Kt.postRender(()=>p(x,y))}}}mount(){this.removePointerDownListener=Na(this.node.current,"pointerdown",o=>this.onPointerDown(o))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const du={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ip(r,o){return o.max===o.min?0:r/(o.max-o.min)*100}const Aa={correct:(r,o)=>{if(!o.target)return r;if(typeof r=="string")if(Qe.test(r))r=parseFloat(r);else return r;const a=ip(r,o.target.x),d=ip(r,o.target.y);return`${a}% ${d}%`}},mC={correct:(r,{treeScale:o,projectionDelta:a})=>{const d=r,p=ps.parse(r);if(p.length>5)return d;const x=ps.createTransformer(r),y=typeof p[0]!="number"?1:0,A=a.x.scale*o.x,w=a.y.scale*o.y;p[0+y]/=A,p[1+y]/=w;const E=an(A,w,.5);return typeof p[2+y]=="number"&&(p[2+y]/=E),typeof p[3+y]=="number"&&(p[3+y]/=E),x(p)}};class xC extends P.Component{componentDidMount(){const{visualElement:o,layoutGroup:a,switchLayoutGroup:d,layoutId:p}=this.props,{projection:x}=o;Dw(yC),x&&(a.group&&a.group.add(x),d&&d.register&&p&&d.register(x),x.root.didUpdate(),x.addEventListener("animationComplete",()=>{this.safeToRemove()}),x.setOptions({...x.options,onExitComplete:()=>this.safeToRemove()})),du.hasEverUpdated=!0}getSnapshotBeforeUpdate(o){const{layoutDependency:a,visualElement:d,drag:p,isPresent:x}=this.props,y=d.projection;return y&&(y.isPresent=x,p||o.layoutDependency!==a||a===void 0||o.isPresent!==x?y.willUpdate():this.safeToRemove(),o.isPresent!==x&&(x?y.promote():y.relegate()||Kt.postRender(()=>{const A=y.getStack();(!A||!A.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:o}=this.props.visualElement;o&&(o.root.didUpdate(),xd.postRender(()=>{!o.currentAnimation&&o.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:o,layoutGroup:a,switchLayoutGroup:d}=this.props,{projection:p}=o;p&&(p.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(p),d&&d.deregister&&d.deregister(p))}safeToRemove(){const{safeToRemove:o}=this.props;o&&o()}render(){return null}}function ym(r){const[o,a]=ng(),d=P.useContext(sd);return N.jsx(xC,{...r,layoutGroup:d,switchLayoutGroup:P.useContext(mg),isPresent:o,safeToRemove:a})}const yC={borderRadius:{...Aa,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Aa,borderTopRightRadius:Aa,borderBottomLeftRadius:Aa,borderBottomRightRadius:Aa,boxShadow:mC};function wC(r,o,a){const d=ir(r)?r:ka(r);return d.start(jd("",d,o,a)),d.animation}function vC(r){return r instanceof SVGElement&&r.tagName!=="svg"}const CC=(r,o)=>r.depth-o.depth;class EC{constructor(){this.children=[],this.isDirty=!1}add(o){ud(this.children,o),this.isDirty=!0}remove(o){cd(this.children,o),this.isDirty=!0}forEach(o){this.isDirty&&this.children.sort(CC),this.isDirty=!1,this.children.forEach(o)}}function AC(r,o){const a=di.now(),d=({timestamp:p})=>{const x=p-a;x>=o&&(hs(d),r(x-o))};return Kt.read(d,!0),()=>hs(d)}const wm=["TopLeft","TopRight","BottomLeft","BottomRight"],SC=wm.length,sp=r=>typeof r=="string"?parseFloat(r):r,op=r=>typeof r=="number"||Qe.test(r);function bC(r,o,a,d,p,x){p?(r.opacity=an(0,a.opacity!==void 0?a.opacity:1,TC(d)),r.opacityExit=an(o.opacity!==void 0?o.opacity:1,0,IC(d))):x&&(r.opacity=an(o.opacity!==void 0?o.opacity:1,a.opacity!==void 0?a.opacity:1,d));for(let y=0;y<SC;y++){const A=`border${wm[y]}Radius`;let w=ap(o,A),E=ap(a,A);if(w===void 0&&E===void 0)continue;w||(w=0),E||(E=0),w===0||E===0||op(w)===op(E)?(r[A]=Math.max(an(sp(w),sp(E),d),0),(hi.test(E)||hi.test(w))&&(r[A]+="%")):r[A]=E}(o.rotate||a.rotate)&&(r.rotate=an(o.rotate||0,a.rotate||0,d))}function ap(r,o){return r[o]!==void 0?r[o]:r.borderRadius}const TC=vm(0,.5,Bg),IC=vm(.5,.95,Ur);function vm(r,o,a){return d=>d<r?0:d>o?1:a(Ma(r,o,d))}function lp(r,o){r.min=o.min,r.max=o.max}function jr(r,o){lp(r.x,o.x),lp(r.y,o.y)}function up(r,o){r.translate=o.translate,r.scale=o.scale,r.originPoint=o.originPoint,r.origin=o.origin}function cp(r,o,a,d,p){return r-=o,r=Au(r,1/a,d),p!==void 0&&(r=Au(r,1/p,d)),r}function NC(r,o=0,a=1,d=.5,p,x=r,y=r){if(hi.test(o)&&(o=parseFloat(o),o=an(y.min,y.max,o/100)-y.min),typeof o!="number")return;let A=an(x.min,x.max,d);r===x&&(A-=o),r.min=cp(r.min,o,a,A,p),r.max=cp(r.max,o,a,A,p)}function fp(r,o,[a,d,p],x,y){NC(r,o[a],o[d],o[p],o.scale,x,y)}const RC=["x","scaleX","originX"],_C=["y","scaleY","originY"];function dp(r,o,a,d){fp(r.x,o,RC,a?a.x:void 0,d?d.x:void 0),fp(r.y,o,_C,a?a.y:void 0,d?d.y:void 0)}function hp(r){return r.translate===0&&r.scale===1}function Cm(r){return hp(r.x)&&hp(r.y)}function pp(r,o){return r.min===o.min&&r.max===o.max}function OC(r,o){return pp(r.x,o.x)&&pp(r.y,o.y)}function gp(r,o){return Math.round(r.min)===Math.round(o.min)&&Math.round(r.max)===Math.round(o.max)}function Em(r,o){return gp(r.x,o.x)&&gp(r.y,o.y)}function mp(r){return hr(r.x)/hr(r.y)}function xp(r,o){return r.translate===o.translate&&r.scale===o.scale&&r.originPoint===o.originPoint}class PC{constructor(){this.members=[]}add(o){ud(this.members,o),o.scheduleRender()}remove(o){if(cd(this.members,o),o===this.prevLead&&(this.prevLead=void 0),o===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(o){const a=this.members.findIndex(p=>o===p);if(a===0)return!1;let d;for(let p=a;p>=0;p--){const x=this.members[p];if(x.isPresent!==!1){d=x;break}}return d?(this.promote(d),!0):!1}promote(o,a){const d=this.lead;if(o!==d&&(this.prevLead=d,this.lead=o,o.show(),d)){d.instance&&d.scheduleRender(),o.scheduleRender(),o.resumeFrom=d,a&&(o.resumeFrom.preserveOpacity=!0),d.snapshot&&(o.snapshot=d.snapshot,o.snapshot.latestValues=d.animationValues||d.latestValues),o.root&&o.root.isUpdating&&(o.isLayoutDirty=!0);const{crossfade:p}=o.options;p===!1&&d.hide()}}exitAnimationComplete(){this.members.forEach(o=>{const{options:a,resumingFrom:d}=o;a.onExitComplete&&a.onExitComplete(),d&&d.options.onExitComplete&&d.options.onExitComplete()})}scheduleRender(){this.members.forEach(o=>{o.instance&&o.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function MC(r,o,a){let d="";const p=r.x.translate/o.x,x=r.y.translate/o.y,y=(a==null?void 0:a.z)||0;if((p||x||y)&&(d=`translate3d(${p}px, ${x}px, ${y}px) `),(o.x!==1||o.y!==1)&&(d+=`scale(${1/o.x}, ${1/o.y}) `),a){const{transformPerspective:E,rotate:S,rotateX:T,rotateY:R,skewX:k,skewY:L}=a;E&&(d=`perspective(${E}px) ${d}`),S&&(d+=`rotate(${S}deg) `),T&&(d+=`rotateX(${T}deg) `),R&&(d+=`rotateY(${R}deg) `),k&&(d+=`skewX(${k}deg) `),L&&(d+=`skewY(${L}deg) `)}const A=r.x.scale*o.x,w=r.y.scale*o.y;return(A!==1||w!==1)&&(d+=`scale(${A}, ${w})`),d||"none"}const Ef=["","X","Y","Z"],DC={visibility:"hidden"},yp=1e3;let kC=0;function Af(r,o,a,d){const{latestValues:p}=o;p[r]&&(a[r]=p[r],o.setStaticValue(r,0),d&&(d[r]=0))}function Am(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:o}=r.options;if(!o)return;const a=_g(o);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:p,layoutId:x}=r.options;window.MotionCancelOptimisedAnimation(a,"transform",Kt,!(p||x))}const{parent:d}=r;d&&!d.hasCheckedOptimisedAppear&&Am(d)}function Sm({attachResizeListener:r,defaultParent:o,measureScroll:a,checkIsScrollRoot:d,resetTransform:p}){return class{constructor(y={},A=o==null?void 0:o()){this.id=kC++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(FC),this.nodes.forEach(WC),this.nodes.forEach(HC),this.nodes.forEach(jC)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=y,this.root=A?A.root||A:this,this.path=A?[...A.path,A]:[],this.parent=A,this.depth=A?A.depth+1:0;for(let w=0;w<this.path.length;w++)this.path[w].shouldResetTransform=!0;this.root===this&&(this.nodes=new EC)}addEventListener(y,A){return this.eventHandlers.has(y)||this.eventHandlers.set(y,new dd),this.eventHandlers.get(y).add(A)}notifyListeners(y,...A){const w=this.eventHandlers.get(y);w&&w.notify(...A)}hasListeners(y){return this.eventHandlers.has(y)}mount(y,A=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=vC(y),this.instance=y;const{layoutId:w,layout:E,visualElement:S}=this.options;if(S&&!S.current&&S.mount(y),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),A&&(E||w)&&(this.isLayoutDirty=!0),r){let T;const R=()=>this.root.updateBlockedByResize=!1;r(y,()=>{this.root.updateBlockedByResize=!0,T&&T(),T=AC(R,250),du.hasAnimatedSinceResize&&(du.hasAnimatedSinceResize=!1,this.nodes.forEach(vp))})}w&&this.root.registerSharedNode(w,this),this.options.animate!==!1&&S&&(w||E)&&this.addEventListener("didUpdate",({delta:T,hasLayoutChanged:R,hasRelativeLayoutChanged:k,layout:L})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const j=this.options.transition||S.getDefaultTransition()||ZC,{onLayoutAnimationStart:B,onLayoutAnimationComplete:U}=S.getProps(),H=!this.targetLayout||!Em(this.targetLayout,L),W=!R&&k;if(this.options.layoutRoot||this.resumeFrom||W||R&&(H||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(T,W);const ee={...gd(j,"layout"),onPlay:B,onComplete:U};(S.shouldReduceMotion||this.options.layoutRoot)&&(ee.delay=0,ee.type=!1),this.startAnimation(ee)}else R||vp(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=L})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const y=this.getStack();y&&y.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,hs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(GC),this.animationId++)}getTransformTemplate(){const{visualElement:y}=this.options;return y&&y.getProps().transformTemplate}willUpdate(y=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Am(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let S=0;S<this.path.length;S++){const T=this.path[S];T.shouldResetTransform=!0,T.updateScroll("snapshot"),T.options.layoutRoot&&T.willUpdate(!1)}const{layoutId:A,layout:w}=this.options;if(A===void 0&&!w)return;const E=this.getTransformTemplate();this.prevTransformTemplateValue=E?E(this.latestValues,""):void 0,this.updateSnapshot(),y&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(wp);return}this.isUpdating||this.nodes.forEach(UC),this.isUpdating=!1,this.nodes.forEach(zC),this.nodes.forEach(LC),this.nodes.forEach(BC),this.clearAllSnapshots();const A=di.now();Zn.delta=Li(0,1e3/60,A-Zn.timestamp),Zn.timestamp=A,Zn.isProcessing=!0,pf.update.process(Zn),pf.preRender.process(Zn),pf.render.process(Zn),Zn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,xd.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(VC),this.sharedNodes.forEach(XC)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Kt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Kt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!hr(this.snapshot.measuredBox.x)&&!hr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let w=0;w<this.path.length;w++)this.path[w].updateScroll();const y=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Cn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:A}=this.options;A&&A.notify("LayoutMeasure",this.layout.layoutBox,y?y.layoutBox:void 0)}updateScroll(y="measure"){let A=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===y&&(A=!1),A){const w=d(this.instance);this.scroll={animationId:this.root.animationId,phase:y,isRoot:w,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:w}}}resetTransform(){if(!p)return;const y=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,A=this.projectionDelta&&!Cm(this.projectionDelta),w=this.getTransformTemplate(),E=w?w(this.latestValues,""):void 0,S=E!==this.prevTransformTemplateValue;y&&(A||Hs(this.latestValues)||S)&&(p(this.instance,E),this.shouldResetTransform=!1,this.scheduleRender())}measure(y=!0){const A=this.measurePageBox();let w=this.removeElementScroll(A);return y&&(w=this.removeTransform(w)),$C(w),{animationId:this.root.animationId,measuredBox:A,layoutBox:w,latestValues:{},source:this.id}}measurePageBox(){var E;const{visualElement:y}=this.options;if(!y)return Cn();const A=y.measureViewportBox();if(!(((E=this.scroll)==null?void 0:E.wasRoot)||this.path.some(qC))){const{scroll:S}=this.root;S&&(No(A.x,S.offset.x),No(A.y,S.offset.y))}return A}removeElementScroll(y){var w;const A=Cn();if(jr(A,y),(w=this.scroll)!=null&&w.wasRoot)return A;for(let E=0;E<this.path.length;E++){const S=this.path[E],{scroll:T,options:R}=S;S!==this.root&&T&&R.layoutScroll&&(T.wasRoot&&jr(A,y),No(A.x,T.offset.x),No(A.y,T.offset.y))}return A}applyTransform(y,A=!1){const w=Cn();jr(w,y);for(let E=0;E<this.path.length;E++){const S=this.path[E];!A&&S.options.layoutScroll&&S.scroll&&S!==S.root&&Ro(w,{x:-S.scroll.offset.x,y:-S.scroll.offset.y}),Hs(S.latestValues)&&Ro(w,S.latestValues)}return Hs(this.latestValues)&&Ro(w,this.latestValues),w}removeTransform(y){const A=Cn();jr(A,y);for(let w=0;w<this.path.length;w++){const E=this.path[w];if(!E.instance||!Hs(E.latestValues))continue;Wf(E.latestValues)&&E.updateSnapshot();const S=Cn(),T=E.measurePageBox();jr(S,T),dp(A,E.latestValues,E.snapshot?E.snapshot.layoutBox:void 0,S)}return Hs(this.latestValues)&&dp(A,this.latestValues),A}setTargetDelta(y){this.targetDelta=y,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(y){this.options={...this.options,...y,crossfade:y.crossfade!==void 0?y.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Zn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(y=!1){var R;const A=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=A.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=A.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=A.isSharedProjectionDirty);const w=!!this.resumingFrom||this!==A;if(!(y||w&&this.isSharedProjectionDirty||this.isProjectionDirty||(R=this.parent)!=null&&R.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:S,layoutId:T}=this.options;if(!(!this.layout||!(S||T))){if(this.resolvedRelativeTargetAt=Zn.timestamp,!this.targetDelta&&!this.relativeTarget){const k=this.getClosestProjectingParent();k&&k.layout&&this.animationProgress!==1?(this.relativeParent=k,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Cn(),this.relativeTargetOrigin=Cn(),_a(this.relativeTargetOrigin,this.layout.layoutBox,k.layout.layoutBox),jr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Cn(),this.targetWithTransforms=Cn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Jv(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):jr(this.target,this.layout.layoutBox),hm(this.target,this.targetDelta)):jr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const k=this.getClosestProjectingParent();k&&!!k.resumingFrom==!!this.resumingFrom&&!k.options.layoutScroll&&k.target&&this.animationProgress!==1?(this.relativeParent=k,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Cn(),this.relativeTargetOrigin=Cn(),_a(this.relativeTargetOrigin,this.target,k.target),jr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Wf(this.parent.latestValues)||dm(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var L;const y=this.getLead(),A=!!this.resumingFrom||this!==y;let w=!0;if((this.isProjectionDirty||(L=this.parent)!=null&&L.isProjectionDirty)&&(w=!1),A&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(w=!1),this.resolvedRelativeTargetAt===Zn.timestamp&&(w=!1),w)return;const{layout:E,layoutId:S}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(E||S))return;jr(this.layoutCorrected,this.layout.layoutBox);const T=this.treeScale.x,R=this.treeScale.y;eC(this.layoutCorrected,this.treeScale,this.path,A),y.layout&&!y.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(y.target=y.layout.layoutBox,y.targetWithTransforms=Cn());const{target:k}=y;if(!k){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(up(this.prevProjectionDelta.x,this.projectionDelta.x),up(this.prevProjectionDelta.y,this.projectionDelta.y)),Ra(this.projectionDelta,this.layoutCorrected,k,this.latestValues),(this.treeScale.x!==T||this.treeScale.y!==R||!xp(this.projectionDelta.x,this.prevProjectionDelta.x)||!xp(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",k))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(y=!0){var A;if((A=this.options.visualElement)==null||A.scheduleRender(),y){const w=this.getStack();w&&w.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Io(),this.projectionDelta=Io(),this.projectionDeltaWithTransform=Io()}setAnimationOrigin(y,A=!1){const w=this.snapshot,E=w?w.latestValues:{},S={...this.latestValues},T=Io();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!A;const R=Cn(),k=w?w.source:void 0,L=this.layout?this.layout.source:void 0,j=k!==L,B=this.getStack(),U=!B||B.members.length<=1,H=!!(j&&!U&&this.options.crossfade===!0&&!this.path.some(KC));this.animationProgress=0;let W;this.mixTargetDelta=ee=>{const ce=ee/1e3;Cp(T.x,y.x,ce),Cp(T.y,y.y,ce),this.setTargetDelta(T),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(_a(R,this.layout.layoutBox,this.relativeParent.layout.layoutBox),YC(this.relativeTarget,this.relativeTargetOrigin,R,ce),W&&OC(this.relativeTarget,W)&&(this.isProjectionDirty=!1),W||(W=Cn()),jr(W,this.relativeTarget)),j&&(this.animationValues=S,bC(S,E,this.latestValues,ce,H,U)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ce},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(y){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(hs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Kt.update(()=>{du.hasAnimatedSinceResize=!0,this.currentAnimation=wC(0,yp,{...y,onUpdate:A=>{this.mixTargetDelta(A),y.onUpdate&&y.onUpdate(A)},onStop:()=>{},onComplete:()=>{y.onComplete&&y.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const y=this.getStack();y&&y.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(yp),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const y=this.getLead();let{targetWithTransforms:A,target:w,layout:E,latestValues:S}=y;if(!(!A||!w||!E)){if(this!==y&&this.layout&&E&&bm(this.options.animationType,this.layout.layoutBox,E.layoutBox)){w=this.target||Cn();const T=hr(this.layout.layoutBox.x);w.x.min=y.target.x.min,w.x.max=w.x.min+T;const R=hr(this.layout.layoutBox.y);w.y.min=y.target.y.min,w.y.max=w.y.min+R}jr(A,w),Ro(A,S),Ra(this.projectionDeltaWithTransform,this.layoutCorrected,A,S)}}registerSharedNode(y,A){this.sharedNodes.has(y)||this.sharedNodes.set(y,new PC),this.sharedNodes.get(y).add(A);const E=A.options.initialPromotionConfig;A.promote({transition:E?E.transition:void 0,preserveFollowOpacity:E&&E.shouldPreserveFollowOpacity?E.shouldPreserveFollowOpacity(A):void 0})}isLead(){const y=this.getStack();return y?y.lead===this:!0}getLead(){var A;const{layoutId:y}=this.options;return y?((A=this.getStack())==null?void 0:A.lead)||this:this}getPrevLead(){var A;const{layoutId:y}=this.options;return y?(A=this.getStack())==null?void 0:A.prevLead:void 0}getStack(){const{layoutId:y}=this.options;if(y)return this.root.sharedNodes.get(y)}promote({needsReset:y,transition:A,preserveFollowOpacity:w}={}){const E=this.getStack();E&&E.promote(this,w),y&&(this.projectionDelta=void 0,this.needsReset=!0),A&&this.setOptions({transition:A})}relegate(){const y=this.getStack();return y?y.relegate(this):!1}resetSkewAndRotation(){const{visualElement:y}=this.options;if(!y)return;let A=!1;const{latestValues:w}=y;if((w.z||w.rotate||w.rotateX||w.rotateY||w.rotateZ||w.skewX||w.skewY)&&(A=!0),!A)return;const E={};w.z&&Af("z",y,E,this.animationValues);for(let S=0;S<Ef.length;S++)Af(`rotate${Ef[S]}`,y,E,this.animationValues),Af(`skew${Ef[S]}`,y,E,this.animationValues);y.render();for(const S in E)y.setStaticValue(S,E[S]),this.animationValues&&(this.animationValues[S]=E[S]);y.scheduleRender()}getProjectionStyles(y){if(!this.instance||this.isSVG)return;if(!this.isVisible)return DC;const A={visibility:""},w=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,A.opacity="",A.pointerEvents=fu(y==null?void 0:y.pointerEvents)||"",A.transform=w?w(this.latestValues,""):"none",A;const E=this.getLead();if(!this.projectionDelta||!this.layout||!E.target){const k={};return this.options.layoutId&&(k.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,k.pointerEvents=fu(y==null?void 0:y.pointerEvents)||""),this.hasProjected&&!Hs(this.latestValues)&&(k.transform=w?w({},""):"none",this.hasProjected=!1),k}const S=E.animationValues||E.latestValues;this.applyTransformsToTarget(),A.transform=MC(this.projectionDeltaWithTransform,this.treeScale,S),w&&(A.transform=w(S,A.transform));const{x:T,y:R}=this.projectionDelta;A.transformOrigin=`${T.origin*100}% ${R.origin*100}% 0`,E.animationValues?A.opacity=E===this?S.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:S.opacityExit:A.opacity=E===this?S.opacity!==void 0?S.opacity:"":S.opacityExit!==void 0?S.opacityExit:0;for(const k in Ba){if(S[k]===void 0)continue;const{correct:L,applyTo:j,isCSSVariable:B}=Ba[k],U=A.transform==="none"?S[k]:L(S[k],E);if(j){const H=j.length;for(let W=0;W<H;W++)A[j[W]]=U}else B?this.options.visualElement.renderState.vars[k]=U:A[k]=U}return this.options.layoutId&&(A.pointerEvents=E===this?fu(y==null?void 0:y.pointerEvents)||"":"none"),A}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(y=>{var A;return(A=y.currentAnimation)==null?void 0:A.stop()}),this.root.nodes.forEach(wp),this.root.sharedNodes.clear()}}}function LC(r){r.updateLayout()}function BC(r){var a;const o=((a=r.resumeFrom)==null?void 0:a.snapshot)||r.snapshot;if(r.isLead()&&r.layout&&o&&r.hasListeners("didUpdate")){const{layoutBox:d,measuredBox:p}=r.layout,{animationType:x}=r.options,y=o.source!==r.layout.source;x==="size"?Vr(T=>{const R=y?o.measuredBox[T]:o.layoutBox[T],k=hr(R);R.min=d[T].min,R.max=R.min+k}):bm(x,o.layoutBox,d)&&Vr(T=>{const R=y?o.measuredBox[T]:o.layoutBox[T],k=hr(d[T]);R.max=R.min+k,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[T].max=r.relativeTarget[T].min+k)});const A=Io();Ra(A,d,o.layoutBox);const w=Io();y?Ra(w,r.applyTransform(p,!0),o.measuredBox):Ra(w,d,o.layoutBox);const E=!Cm(A);let S=!1;if(!r.resumeFrom){const T=r.getClosestProjectingParent();if(T&&!T.resumeFrom){const{snapshot:R,layout:k}=T;if(R&&k){const L=Cn();_a(L,o.layoutBox,R.layoutBox);const j=Cn();_a(j,d,k.layoutBox),Em(L,j)||(S=!0),T.options.layoutRoot&&(r.relativeTarget=j,r.relativeTargetOrigin=L,r.relativeParent=T)}}}r.notifyListeners("didUpdate",{layout:d,snapshot:o,delta:w,layoutDelta:A,hasLayoutChanged:E,hasRelativeLayoutChanged:S})}else if(r.isLead()){const{onExitComplete:d}=r.options;d&&d()}r.options.transition=void 0}function FC(r){r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function jC(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function VC(r){r.clearSnapshot()}function wp(r){r.clearMeasurements()}function UC(r){r.isLayoutDirty=!1}function zC(r){const{visualElement:o}=r.options;o&&o.getProps().onBeforeLayoutMeasure&&o.notify("BeforeLayoutMeasure"),r.resetTransform()}function vp(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function WC(r){r.resolveTargetDelta()}function HC(r){r.calcProjection()}function GC(r){r.resetSkewAndRotation()}function XC(r){r.removeLeadSnapshot()}function Cp(r,o,a){r.translate=an(o.translate,0,a),r.scale=an(o.scale,1,a),r.origin=o.origin,r.originPoint=o.originPoint}function Ep(r,o,a,d){r.min=an(o.min,a.min,d),r.max=an(o.max,a.max,d)}function YC(r,o,a,d){Ep(r.x,o.x,a.x,d),Ep(r.y,o.y,a.y,d)}function KC(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const ZC={duration:.45,ease:[.4,0,.1,1]},Ap=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),Sp=Ap("applewebkit/")&&!Ap("chrome/")?Math.round:Ur;function bp(r){r.min=Sp(r.min),r.max=Sp(r.max)}function $C(r){bp(r.x),bp(r.y)}function bm(r,o,a){return r==="position"||r==="preserve-aspect"&&!Qv(mp(o),mp(a),.2)}function qC(r){var o;return r!==r.root&&((o=r.scroll)==null?void 0:o.wasRoot)}const QC=Sm({attachResizeListener:(r,o)=>Ua(r,"resize",o),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Sf={current:void 0},Tm=Sm({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!Sf.current){const r=new QC({});r.mount(window),r.setOptions({layoutScroll:!0}),Sf.current=r}return Sf.current},resetTransform:(r,o)=>{r.style.transform=o!==void 0?o:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),JC={pan:{Feature:gC},drag:{Feature:pC,ProjectionNode:Tm,MeasureLayout:ym}};function Tp(r,o,a){const{props:d}=r;r.animationState&&d.whileHover&&r.animationState.setActive("whileHover",a==="Start");const p="onHover"+a,x=d[p];x&&Kt.postRender(()=>x(o,Ka(o)))}class eE extends gs{mount(){const{current:o}=this.node;o&&(this.unmount=uw(o,(a,d)=>(Tp(this.node,d,"Start"),p=>Tp(this.node,p,"End"))))}unmount(){}}class tE extends gs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let o=!1;try{o=this.node.current.matches(":focus-visible")}catch{o=!0}!o||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ya(Ua(this.node.current,"focus",()=>this.onFocus()),Ua(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Ip(r,o,a){const{props:d}=r;if(r.current instanceof HTMLButtonElement&&r.current.disabled)return;r.animationState&&d.whileTap&&r.animationState.setActive("whileTap",a==="Start");const p="onTap"+(a==="End"?"":a),x=d[p];x&&Kt.postRender(()=>x(o,Ka(o)))}class nE extends gs{mount(){const{current:o}=this.node;o&&(this.unmount=hw(o,(a,d)=>(Ip(this.node,d,"Start"),(p,{success:x})=>Ip(this.node,p,x?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Xf=new WeakMap,bf=new WeakMap,rE=r=>{const o=Xf.get(r.target);o&&o(r)},iE=r=>{r.forEach(rE)};function sE({root:r,...o}){const a=r||document;bf.has(a)||bf.set(a,{});const d=bf.get(a),p=JSON.stringify(o);return d[p]||(d[p]=new IntersectionObserver(iE,{root:r,...o})),d[p]}function oE(r,o,a){const d=sE(o);return Xf.set(r,a),d.observe(r),()=>{Xf.delete(r),d.unobserve(r)}}const aE={some:0,all:1};class lE extends gs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:o={}}=this.node.getProps(),{root:a,margin:d,amount:p="some",once:x}=o,y={root:a?a.current:void 0,rootMargin:d,threshold:typeof p=="number"?p:aE[p]},A=w=>{const{isIntersecting:E}=w;if(this.isInView===E||(this.isInView=E,x&&!E&&this.hasEnteredView))return;E&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",E);const{onViewportEnter:S,onViewportLeave:T}=this.node.getProps(),R=E?S:T;R&&R(w)};return oE(this.node.current,y,A)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:o,prevProps:a}=this.node;["amount","margin","root"].some(uE(o,a))&&this.startObserver()}unmount(){}}function uE({viewport:r={}},{viewport:o={}}={}){return a=>r[a]!==o[a]}const cE={inView:{Feature:lE},tap:{Feature:nE},focus:{Feature:tE},hover:{Feature:eE}},fE={layout:{ProjectionNode:Tm,MeasureLayout:ym}},Yf={current:null},Im={current:!1};function dE(){if(Im.current=!0,!!ad)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),o=()=>Yf.current=r.matches;r.addListener(o),o()}else Yf.current=!1}const hE=[...Qg,rr,ps],pE=r=>hE.find(qg(r)),gE=new WeakMap;function mE(r,o,a){for(const d in o){const p=o[d],x=a[d];if(ir(p))r.addValue(d,p);else if(ir(x))r.addValue(d,ka(p,{owner:r}));else if(x!==p)if(r.hasValue(d)){const y=r.getValue(d);y.liveStyle===!0?y.jump(p):y.hasAnimated||y.set(p)}else{const y=r.getStaticValue(d);r.addValue(d,ka(y!==void 0?y:p,{owner:r}))}}for(const d in a)o[d]===void 0&&r.removeValue(d);return o}const Np=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class xE{scrapeMotionValuesFromProps(o,a,d){return{}}constructor({parent:o,props:a,presenceContext:d,reducedMotionConfig:p,blockInitialAnimation:x,visualState:y},A={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ld,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const k=di.now();this.renderScheduledAt<k&&(this.renderScheduledAt=k,Kt.render(this.render,!1,!0))};const{latestValues:w,renderState:E,onUpdate:S}=y;this.onUpdate=S,this.latestValues=w,this.baseTarget={...w},this.initialValues=a.initial?{...w}:{},this.renderState=E,this.parent=o,this.props=a,this.presenceContext=d,this.depth=o?o.depth+1:0,this.reducedMotionConfig=p,this.options=A,this.blockInitialAnimation=!!x,this.isControllingVariants=Pu(a),this.isVariantNode=pg(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(o&&o.current);const{willChange:T,...R}=this.scrapeMotionValuesFromProps(a,{},this);for(const k in R){const L=R[k];w[k]!==void 0&&ir(L)&&L.set(w[k],!1)}}mount(o){this.current=o,gE.set(o,this),this.projection&&!this.projection.instance&&this.projection.mount(o),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((a,d)=>this.bindToMotionValue(d,a)),Im.current||dE(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Yf.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),hs(this.notifyUpdate),hs(this.render),this.valueSubscriptions.forEach(o=>o()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const o in this.events)this.events[o].clear();for(const o in this.features){const a=this.features[o];a&&(a.unmount(),a.isMounted=!1)}this.current=null}bindToMotionValue(o,a){this.valueSubscriptions.has(o)&&this.valueSubscriptions.get(o)();const d=$s.has(o);d&&this.onBindTransform&&this.onBindTransform();const p=a.on("change",A=>{this.latestValues[o]=A,this.props.onUpdate&&Kt.preRender(this.notifyUpdate),d&&this.projection&&(this.projection.isTransformDirty=!0)}),x=a.on("renderRequest",this.scheduleRender);let y;window.MotionCheckAppearSync&&(y=window.MotionCheckAppearSync(this,o,a)),this.valueSubscriptions.set(o,()=>{p(),x(),y&&y(),a.owner&&a.stop()})}sortNodePosition(o){return!this.current||!this.sortInstanceNodePosition||this.type!==o.type?0:this.sortInstanceNodePosition(this.current,o.current)}updateFeatures(){let o="animation";for(o in Po){const a=Po[o];if(!a)continue;const{isEnabled:d,Feature:p}=a;if(!this.features[o]&&p&&d(this.props)&&(this.features[o]=new p(this)),this.features[o]){const x=this.features[o];x.isMounted?x.update():(x.mount(),x.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Cn()}getStaticValue(o){return this.latestValues[o]}setStaticValue(o,a){this.latestValues[o]=a}update(o,a){(o.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=o,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let d=0;d<Np.length;d++){const p=Np[d];this.propEventSubscriptions[p]&&(this.propEventSubscriptions[p](),delete this.propEventSubscriptions[p]);const x="on"+p,y=o[x];y&&(this.propEventSubscriptions[p]=this.on(p,y))}this.prevMotionValues=mE(this,this.scrapeMotionValuesFromProps(o,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(o){return this.props.variants?this.props.variants[o]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(o){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(o),()=>a.variantChildren.delete(o)}addValue(o,a){const d=this.values.get(o);a!==d&&(d&&this.removeValue(o),this.bindToMotionValue(o,a),this.values.set(o,a),this.latestValues[o]=a.get())}removeValue(o){this.values.delete(o);const a=this.valueSubscriptions.get(o);a&&(a(),this.valueSubscriptions.delete(o)),delete this.latestValues[o],this.removeValueFromRenderState(o,this.renderState)}hasValue(o){return this.values.has(o)}getValue(o,a){if(this.props.values&&this.props.values[o])return this.props.values[o];let d=this.values.get(o);return d===void 0&&a!==void 0&&(d=ka(a===null?void 0:a,{owner:this}),this.addValue(o,d)),d}readValue(o,a){let d=this.latestValues[o]!==void 0||!this.current?this.latestValues[o]:this.getBaseTargetFromProps(this.props,o)??this.readValueFromInstance(this.current,o,this.options);return d!=null&&(typeof d=="string"&&(Zg(d)||jg(d))?d=parseFloat(d):!pE(d)&&ps.test(a)&&(d=Xg(o,a)),this.setBaseTarget(o,ir(d)?d.get():d)),ir(d)?d.get():d}setBaseTarget(o,a){this.baseTarget[o]=a}getBaseTarget(o){var x;const{initial:a}=this.props;let d;if(typeof a=="string"||typeof a=="object"){const y=_d(this.props,a,(x=this.presenceContext)==null?void 0:x.custom);y&&(d=y[o])}if(a&&d!==void 0)return d;const p=this.getBaseTargetFromProps(this.props,o);return p!==void 0&&!ir(p)?p:this.initialValues[o]!==void 0&&d===void 0?void 0:this.baseTarget[o]}on(o,a){return this.events[o]||(this.events[o]=new dd),this.events[o].add(a)}notify(o,...a){this.events[o]&&this.events[o].notify(...a)}}class Nm extends xE{constructor(){super(...arguments),this.KeyframeResolver=Jg}sortInstanceNodePosition(o,a){return o.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(o,a){return o.style?o.style[a]:void 0}removeValueFromRenderState(o,{vars:a,style:d}){delete a[o],delete d[o]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:o}=this.props;ir(o)&&(this.childSubscription=o.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function yE(r){return window.getComputedStyle(r)}class wE extends Nm{constructor(){super(...arguments),this.type="html",this.renderInstance=bg}readValueFromInstance(o,a){if($s.has(a))return O3(o,a);{const d=yE(o),p=(Ed(a)?d.getPropertyValue(a):d[a])||0;return typeof p=="string"?p.trim():p}}measureInstanceViewportBox(o,{transformPagePoint:a}){return pm(o,a)}build(o,a,d){bd(o,a,d.transformTemplate)}scrapeMotionValuesFromProps(o,a,d){return Od(o,a,d)}}class vE extends Nm{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Cn,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&Sg(this.current,this.renderState)}}getBaseTargetFromProps(o,a){return o[a]}readValueFromInstance(o,a){if($s.has(a)){const d=Gg(a);return d&&d.default||0}return a=Tg.has(a)?a:Cd(a),o.getAttribute(a)}scrapeMotionValuesFromProps(o,a,d){return Ng(o,a,d)}onBindTransform(){this.current&&!this.renderState.dimensions&&Kt.postRender(this.updateDimensions)}build(o,a,d){Nd(o,a,this.isSVGTag,d.transformTemplate)}renderInstance(o,a,d,p){Ig(o,a,d,p)}mount(o){this.isSVGTag=Rd(o.tagName),super.mount(o)}}const CE=(r,o)=>Id(r)?new vE(o):new wE(o,{allowProjection:r!==P.Fragment}),EE=i3({...Hv,...cE,...JC,...fE},CE),Mi=vw(EE),AE=()=>{const{login:r,signup:o,user:a,logout:d,checkAuth:p}=P.useContext(zr),[x,y]=P.useState(""),[A,w]=P.useState(""),[E,S]=P.useState(""),[T,R]=P.useState(null),[k,L]=P.useState(null),[j,B]=P.useState(""),[U,H]=P.useState(0),[W,ee]=P.useState({x:0,y:0}),[ce,ie]=P.useState(1),[Q,ue]=P.useState(null),[q,Re]=P.useState(!1),[je,be]=P.useState(!1),[Oe,Le]=P.useState({}),[J,we]=P.useState({}),[oe,fe]=P.useState(!1),[pe,ge]=P.useState(!1),[Z,de]=P.useState(null),We=Wr(),Ue=xi(),ut=new URLSearchParams(Ue.search),ve=ut.get("redirect"),et=ut.get("code"),Te=ve==="lobby",Ne=()=>{const Be="abcdefghijklmnopqrstuvwxyz0123456789";let pt="";for(let nt=0;nt<10;nt++)pt+=Be.charAt(Math.floor(Math.random()*Be.length));return pt};P.useEffect(()=>{if(Te&&!x&&!A){const Be=Ne(),pt=Ne();y(Be),w(pt),we(nt=>({...nt,username:!0,password:!0})),Le(nt=>({...nt,username:"",password:""})),H(2)}},[Te,x,A,E]),P.useEffect(()=>{U===2&&E&&ct(E)&&(fe(!0),we(Be=>({...Be,displayName:!0})),Le(Be=>({...Be,displayName:""})))},[U,E]);const at=Be=>{const pt=/^[a-z0-9]+$/;return Be.length>=2&&pt.test(Be)},Je=Be=>Be.length>=2,ct=Be=>Be.length>=2,Ve=()=>{U<Mt.length-1&&(U===0&&!E&&(S(x),we(Be=>({...Be,displayName:!0})),Le(Be=>({...Be,displayName:""}))),U===1&&E&&E.length>=2?fe(!0):fe(!1),H(Be=>Be+1))},qt=()=>{if(U>0){const Be=U-1;H(Be);const pt=Mt[Be];if(pt.validate){const nt=pt.value;pt.validate(nt)&&fe(!0)}else fe(!0)}},Ot=(Be,pt,nt)=>{nt(Be.target.value);const $n=Be.target.value;pt($n)?(we(Tt=>({...Tt,[Mt[U].id]:!0})),Le(Tt=>({...Tt,[Mt[U].id]:""})),fe(!0)):(we(Tt=>({...Tt,[Mt[U].id]:!1})),Le(Tt=>({...Tt,[Mt[U].id]:"Must be at least 2 characters"})),fe(!1))},En=Be=>{const pt=Be.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");y(pt),at(pt)?(we(nt=>({...nt,username:!0})),Le(nt=>({...nt,username:""})),fe(!0)):(we(nt=>({...nt,username:!1})),Le(nt=>({...nt,username:"Must be at least 2 characters"})),fe(!1))},Vt=Be=>{Ot(Be,Je,w)},St=Be=>{Ot(Be,ct,S)},ft=Be=>{const pt=Be.target.files[0];if(pt){const nt=new FileReader;nt.onload=$n=>{const Tt=new Image;Tt.onload=()=>{let Ct=Tt.width,nn=Tt.height;const Dt=1500;Ct>nn&&Ct>Dt?(nn=nn*Dt/Ct,Ct=Dt):nn>Ct&&nn>Dt&&(Ct=Ct*Dt/nn,nn=Dt);const Ln=document.createElement("canvas");Ln.width=Ct,Ln.height=nn,Ln.getContext("2d").drawImage(Tt,0,0,Ct,nn);const Ae=Ln.toDataURL("image/jpeg",.75);R(pt),L(Ae),Re(!0),we(Lt=>({...Lt,image:!0})),Le(Lt=>({...Lt,image:""})),fe(!0)},Tt.src=$n.target.result},nt.readAsDataURL(pt)}},tn=(Be,pt)=>{ue(pt)},Pe=async()=>{try{const Be=await Lp(k,Q);L(Be),Re(!1)}catch(Be){console.error("Error cropping the image:",Be),B("Failed to crop image. Please try again.")}},gn=async Be=>{if(Be.preventDefault(),be(!0),B(""),console.log("Signup attempt - Username:",x,"Password:",A),!x||!A||!E){B("All fields are required"),be(!1);return}if(!T||!k){B("Your profile picture is required"),be(!1);return}try{const pt="/signup",nt=await fetch(window.server_url+pt,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:x,password:A})}),$n=await nt.json();if($n.error==="Username already taken")if(Te){const Dt=Ne(),Ln=Ne();y(Dt),w(Ln);const kt=await fetch(window.server_url+pt,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:Dt,password:Ln})}),Ae=await kt.json();if(!kt.ok||Ae.error==="Username already taken"){B("Unable to create account. Please try again."),be(!1);return}r(Ae)}else{B("Username is taken"),be(!1);return}else{if(!nt.ok){B($n.message||"Signup failed"),be(!1);return}r($n)}await p();const Tt=localStorage.getItem("access_token");if(!Tt)throw new Error("Authentication failed");let Ct=null;if(T)Ct=k,Ct=Ct.split(",")[1];else{const kt=await(await(await fetch("/assets/fakeprofile.png")).blob()).arrayBuffer();Ct=btoa(new Uint8Array(kt).reduce((Ae,Lt)=>Ae+String.fromCharCode(Lt),""))}if(!(await fetch(`${window.server_url}/update_profile`,{method:"POST",headers:{Authorization:`Bearer ${Tt}`,"Content-Type":"application/json"},body:JSON.stringify({name:E,image_data:Ct})})).ok)throw new Error("Failed to update profile");await p(),We(ve==="lobby"?et?`/lobby?code=${et}`:"/?showLobbyModal=true":ve==="product-selection"?"/product-selection":"/")}catch(pt){console.error("Error:",pt),B("An error occurred. Please try again.")}be(!1)},Mt=[{id:"username",label:"Username",value:x,onChange:En,type:"text",placeholder:"Enter a username",validate:at},{id:"password",label:"Password",value:A,onChange:Vt,type:"text",placeholder:"Create a password",validate:Je},{id:"displayName",label:et==="demolobby"?"Display Name (Type Any Name)":"Display Name (what people will see)",value:E,onChange:St,type:"text",placeholder:"Enter your preferred name",validate:ct},{id:"image",label:et==="demolobby"?"Profile Image (Upload Any Image)":"Upload a Selfie (so people can find you)",type:"file",onChange:ft,accept:"image/*"}];return N.jsxs("div",{className:"signup-container",children:[N.jsx("button",{onClick:()=>We("/"),className:"homescreen-button",children:"Home"}),N.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),N.jsx("h3",{className:"signup-header",children:et==="demolobby"?"Join the demo":"Sign Up to Join"}),et&&et!=="demolobby"&&N.jsxs("h2",{className:"signup-header",children:[et," lobby"]}),et==="demolobby"&&N.jsx("h2",{className:"signup-header",style:{fontSize:"0.9rem"},children:"Try Reuneo for Free!"}),N.jsxs("p",{className:"login-link-text",children:["Already have an account? ",N.jsx("a",{href:"#",onClick:Be=>{Be.preventDefault(),We("/login")},className:"login-link",children:"Login here"})]}),N.jsxs("div",{className:"step-form-container",children:[N.jsx("div",{className:"step-progress",children:(Te?Mt.slice(2):Mt).map((Be,pt)=>N.jsx("div",{className:`progress-dot ${Te?(pt===U-2?"active":"")+(pt<U-2?" completed":""):(pt===U?"active":"")+(pt<U?" completed":"")}`},pt))}),N.jsxs("form",{onSubmit:gn,children:[N.jsx(f1,{mode:"wait",initial:!1,children:N.jsxs(Mi.div,{initial:{opacity:0,x:8},animate:{opacity:1,x:0},exit:{opacity:0,x:-8},transition:{type:"spring",stiffness:500,damping:25,mass:.3},className:"step active",style:{willChange:"transform, opacity"},children:[N.jsx("div",{className:"step-content",children:N.jsxs(Mi.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:[N.jsx("label",{className:"step-label",children:Mt[U].label}),N.jsx(Mi.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},transition:{duration:.15,ease:"easeOut"},children:Mt[U].type==="file"?N.jsx("div",{className:"image-upload-container",children:q?N.jsxs("div",{className:"cropper-container",children:[N.jsx("div",{className:"cropper-wrapper",children:N.jsx(kp,{image:k,crop:W,zoom:ce,aspect:1,onCropComplete:tn,onCropChange:ee,onZoomChange:ie})}),N.jsxs("div",{className:"cropper-controls",children:[N.jsx("button",{type:"button",onClick:()=>{Re(!1),L(null),R(null)},className:"cancel-crop-button",children:"Cancel"}),N.jsx("button",{type:"button",onClick:Pe,className:"save-crop-button",children:"Good"})]})]}):N.jsxs(N.Fragment,{children:[N.jsx("input",{type:"file",onChange:Mt[U].onChange,accept:Mt[U].accept,className:"step-input"}),k&&N.jsx("div",{children:N.jsx("img",{src:k,alt:"Profile preview",className:"profile-preview-image"})})]})}):N.jsx("input",{type:Mt[U].type,value:Mt[U].value,onChange:Mt[U].onChange,placeholder:Mt[U].placeholder,className:"step-input",autoFocus:!0})}),N.jsxs(f1,{mode:"wait",children:[Oe[Mt[U].id]&&N.jsx(Mi.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"step-error",children:Oe[Mt[U].id]}),J[Mt[U].id]&&N.jsx(Mi.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},className:"step-success",children:" Valid"})]})]})}),!q&&N.jsxs("div",{className:"button-container",children:[U>0&&N.jsx(Mi.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},type:"button",onClick:qt,className:"backz-button",children:" Back"}),oe&&U<Mt.length-1&&N.jsx(Mi.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},type:"button",onClick:Ve,className:"nextz-button",children:"Next "})]})]},U)}),j&&N.jsx(Mi.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"error-message",children:j}),U===Mt.length-1&&N.jsx(Mi.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},type:"submit",className:"primary-button",disabled:je,children:je?"Loading...":"Complete Signup"})]})]})]})},SE=5e3,Rm=(r,o=null,a=null)=>{P.useEffect(()=>{const d=async()=>{try{const x=a?`${window.server_url}/display_lobby_metadata?lobby_code=${a}`:`${window.server_url}/display_lobby_metadata`,y=localStorage.getItem("access_token"),A=await fetch(x,{headers:{Authorization:`Bearer ${y}`,lobby_code:a}});if(!A.ok){console.error("Failed to fetch lobby metadata");return}const w=await A.json();r(w.player_count),o&&o(w.lobby_state)}catch(x){console.error("Error fetching lobby metadata:",x)}};d();const p=setInterval(d,SE);return()=>clearInterval(p)},[r,o,a])},bE=()=>{const[r,o]=P.useState(!1),[a,d]=P.useState(!1),[p,x]=P.useState(""),[y,A]=P.useState(""),[w,E]=P.useState(""),[S,T]=P.useState(null);Jp();const{user:R,userProfile:k,checkAuth:L,permissions:j}=P.useContext(zr),[B,U]=P.useState(null),[H,W]=P.useState(null),[ee,ce]=P.useState([]),[ie,Q]=P.useState(!1),ue=Wr();Rm(U,W);const[q,Re]=P.useState(!1);P.useRef(null);const je=P.useRef(null),be=async()=>{if(R){Q(!0);try{const oe=localStorage.getItem("access_token"),fe=await fetch(window.server_url+"/view_my_active_lobbies",{headers:{Authorization:`Bearer ${oe}`}});if(fe.ok){const pe=await fe.json();console.log("User's active lobbies:",pe),pe&&pe.lobbies&&Array.isArray(pe.lobbies)?ce(pe.lobbies):ce([])}else console.error("Failed to fetch user's active lobbies"),ce([])}catch(oe){console.error("Error fetching user's active lobbies:",oe),ce([])}finally{Q(!1)}}};P.useEffect(()=>{R&&be()},[R]),P.useEffect(()=>{L()},[]),P.useEffect(()=>{if(new URLSearchParams(window.location.search).get("showLobbyModal")==="true"&&R){d(!0);const pe=window.location.pathname;window.history.replaceState({},"",pe)}},[R]);const Oe=oe=>{(j==="admin"||j==="organizer")&&ue(`/admin_lobby_view?code=${oe}`)},Le=oe=>{oe.preventDefault();const pe=new FormData(oe.target).get("name");if(!pe||pe.trim()===""){A("Please enter a lobby code");return}const ge=pe.toLowerCase().replace(/[^a-z0-9]/g,"");if(ge===""){A("Lobby code must contain only letters and numbers");return}E(ge),d(!1),console.log(ge),x(ge),ue(`/lobby?code=${ge}`),x(""),A("")},J=()=>{Re(!1),je.current&&(je.current.clear(),je.current=null)},we=()=>a?N.jsx("div",{className:"lobby-modal-overlay",children:N.jsxs("div",{className:"lobby-modal-container",children:[N.jsx("button",{onClick:()=>{d(!1),x(""),A(""),J()},className:"lobby-modal-close",children:""}),N.jsx("h2",{className:"lobby-modal-title",children:"Join Lobby"}),N.jsxs("form",{onSubmit:Le,className:"lobby-form",children:[N.jsxs("div",{className:"lobby-input-container",children:[N.jsx("input",{type:"text",name:"name",placeholder:"Enter Lobby Code",className:"lobby-input",pattern:"[a-zA-Z0-9]+",title:"Only letters and numbers are allowed",required:!0}),y&&N.jsx("div",{className:"lobby-error-message",children:y})]}),N.jsx("button",{type:"submit",className:"lobby-submit-button",children:"Join"})]})]})}):null;return N.jsxs("div",{style:{position:"relative",height:"var(--viewport-height)",overflow:"hidden"},children:[N.jsxs("video",{className:"background-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,poster:"/assets/demo_app_home_video_cover.jpg",children:[N.jsx("source",{src:"/assets/demo_app_home_video_X2_small.mp4",type:"video/mp4"}),N.jsx("source",{src:"/assets/app_home_video_2.webm",type:"video/webm"}),N.jsx("img",{src:"/assets/demo_app_home_video_cover.jpg",alt:"Background fallback",style:{width:"100%",height:"100%",objectFit:"cover"}}),"Your browser does not support the video tag."]}),N.jsxs("div",{style:{position:"relative",zIndex:1,color:"white",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[N.jsx("div",{style:{position:"absolute",top:"0",left:"50%",transform:"translateX(-50%)"},children:N.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Logo",style:{width:"110px",height:"110px",objectFit:"contain"}})}),N.jsx("div",{style:{marginTop:"10%",display:"flex",flexDirection:"column"},children:N.jsx(Gy,{user:R,onProfileClick:()=>o(!0)})}),r&&N.jsx(g2,{onSubmit:oe=>{o(!1)},onClose:()=>o(!1),existingProfile:k}),N.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",width:"90%",maxWidth:"1200px",textAlign:"center",marginLeft:"auto",marginRight:"auto",zIndex:1,top:"50%"},children:N.jsx("h2",{className:"welcome-header",style:{color:"#ffffff",fontSize:"1rem",textTransform:"uppercase",letterSpacing:"0.1em",textShadow:"4px 4px 8px rgba(0,0,0,0.9)",margin:0},children:R&&k&&(j==="admin"||j==="organizer")?(()=>{const oe="Create a Lobby",fe=k?k.name.slice(0,15):"";return N.jsxs(N.Fragment,{children:[oe.split("").map((pe,ge)=>N.jsx("span",{style:{"--i":ge+1,marginRight:pe===" "?"0.5em":"1px"},children:pe},`main-${ge}`)),N.jsx("br",{}),fe&&fe.split("").map((pe,ge)=>N.jsx("span",{style:{"--i":ge+1,marginRight:pe===" "?"0.5em":"1px"},children:pe},`name-${ge}`))]})})():(()=>{const oe="Join the Experience",fe=k?k.name.slice(0,15):"";return N.jsxs(N.Fragment,{children:[oe.split("").map((pe,ge)=>N.jsx("span",{style:{"--i":ge+1,marginRight:pe===" "?"0.5em":"1px"},children:pe},`main-${ge}`)),N.jsx("br",{}),fe&&fe.split("").map((pe,ge)=>N.jsx("span",{style:{"--i":ge+1,marginRight:pe===" "?"0.5em":"1px"},children:pe},`name-${ge}`))]})})()})}),N.jsx("div",{style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",width:"94%",display:"flex",flexDirection:"row",justifyContent:"center",gap:"1.5rem"},children:N.jsx("div",{className:"event-item",style:{width:"auto",maxWidth:"none",margin:"0",padding:"10px 20px",borderRadius:"16px",marginBottom:"20px",cursor:"pointer",opacity:1,display:"flex",flexDirection:"row",alignItems:"center",gap:"1.5rem",":hover":{transform:"translateY(-5px)"}},children:N.jsxs("div",{style:{display:"flex",gap:"1.5rem",flexDirection:"row",alignItems:"center"},children:[N.jsx("button",{className:`primary-button ${j!=="admin"&&j!=="organizer"?"join-lobby-button":""}`,onClick:()=>R?d(!0):ue("/signup?redirect=lobby"),disabled:B===null||H==="terminate",style:{opacity:1,cursor:B===null||H==="terminate"?"not-allowed":"pointer",padding:"16px 20px",backgroundColor:j!=="admin"&&j!=="organizer"?"transparent":"#144dff",color:"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0",display:"block",position:"relative",zIndex:1,textAlign:"center",outline:j!=="admin"&&j!=="organizer"?"none":"1px solid rgba(58, 53, 53, 0.7)",":hover":{backgroundColor:j!=="admin"&&j!=="organizer"?"transparent":"#535bf2",transform:"scale(1.02)"}},children:N.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Join Lobby"})}),j!=="admin"&&j!=="organizer"&&N.jsx("button",{className:"primary-button join-lobby-button",onClick:()=>window.location.href="https://reuneo.app/",style:{padding:"16px 20px",backgroundColor:"transparent",color:"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0",display:"block",position:"relative",zIndex:1,textAlign:"center",outline:"none",":hover":{transform:"scale(1.02)"}},children:N.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Get Started"})}),(j==="admin"||j==="organizer")&&N.jsx("button",{className:`primary-button ${j==="admin"||j==="organizer"?"create-lobby-button":""}`,onClick:ee.length>0?void 0:()=>ue("/create_lobby"),disabled:ee.length>0,title:ee.length>0?"You already have an active lobby. Close it before creating a new one.":"Create a new lobby",style:{padding:"16px 20px",backgroundColor:ee.length>0?"rgba(128, 128, 128, 0.3)":"transparent",color:ee.length>0?"rgba(255, 255, 255, 0.5)":"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:ee.length>0?"0 2px 3px rgba(0, 0, 0, 0.2)":"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0",position:"relative",zIndex:1,textAlign:"center",cursor:ee.length>0?"not-allowed":"pointer",opacity:ee.length>0?.6:1,":hover":{transform:ee.length>0?"none":"scale(1.02)"}},children:N.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Create Lobby"})})]})})}),(j==="admin"||j==="organizer")&&ee.length>0&&N.jsx("div",{className:"events-list",style:{position:"absolute",bottom:"calc(20px + 120px + 10px)",left:"50%",transform:"translateX(-50%)",width:"44%",height:"15%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.05), rgba(83, 91, 242, 0.05))",borderRadius:"30px",padding:"1rem",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",justifyContent:"center",alignItems:"center"},children:ie?N.jsx("div",{style:{textAlign:"center",color:"white"},children:N.jsx("p",{children:"Loading your lobbies..."})}):ee.length>0?N.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",perspective:"1000px"},children:ee.map((oe,fe)=>N.jsxs("div",{className:"card",style:{width:"calc(100% - 2rem)",maxWidth:"200px",minWidth:"150px",background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",boxShadow:"0 10px 30px rgba(20, 77, 255, 0.15)",border:"1px solid rgba(20, 77, 255, 0.2)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",padding:"1rem 1rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",transformStyle:"preserve-3d","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(20, 77, 255, 0.1), rgba(83, 91, 242, 0.1))",opacity:0,transition:"opacity 0.4s ease"}},onClick:()=>Oe(oe),onMouseEnter:pe=>{pe.currentTarget.style.transform="translateY(-10px) rotateX(5deg)",pe.currentTarget.style.boxShadow="0 20px 40px rgba(20, 77, 255, 0.25)",pe.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.4)",pe.currentTarget.style.background="rgba(255, 255, 255, 0.98)"},onMouseLeave:pe=>{pe.currentTarget.style.transform="translateY(0) rotateX(0)",pe.currentTarget.style.boxShadow="0 10px 30px rgba(20, 77, 255, 0.15)",pe.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.2)",pe.currentTarget.style.background="rgba(255, 255, 255, 0.95)"},children:[N.jsx("div",{className:"glow-button",style:{width:"30px",height:"30px",borderRadius:"50%",background:"linear-gradient(135deg, #144dff, #535bf2)",marginBottom:".5rem",marginTop:"-1rem",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:".8rem",boxShadow:"0 8px 20px rgba(20, 77, 255, 0.3)",transition:"all 0.4s ease",position:"relative","&::after":{content:'""',position:"absolute",top:"-5px",left:"-5px",right:"-5px",bottom:"-5px",borderRadius:"50%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.2), rgba(83, 91, 242, 0.2))",zIndex:-1,animation:"pulse 2s infinite"}},children:oe&&oe.length>0?oe.charAt(0).toUpperCase():"?"}),N.jsxs("h3",{style:{marginTop:"0.5rem",color:"#144dff",fontWeight:"700",fontSize:".9em",fontFamily:"Helvetica",textAlign:"center",textShadow:"0 2px 4px rgba(20, 77, 255, 0.1)",letterSpacing:"0.5px"},children:["Lobby ",oe||"Unknown"]})]},fe))}):N.jsx("div",{style:{}})})]}),N.jsx(we,{})]})};function TE(){const{pathname:r}=xi();return P.useEffect(()=>{window.scrollTo(0,0)},[r]),null}const IE=()=>{const{login:r,signup:o,user:a,logout:d,checkAuth:p}=P.useContext(zr),[x,y]=P.useState(""),[A,w]=P.useState(""),[E,S]=P.useState(""),[T,R]=P.useState(""),[k,L]=P.useState(!0),[j,B]=P.useState({}),[U,H]=P.useState(!1),W=Wr(),ee=Q=>{const ue=/^[a-z0-9]+$/;return Q.length>=2&&ue.test(Q)},ce=Q=>{const ue=Q.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");y(ue),ue.length>0?H(!0):H(!1),ee(ue)?B(q=>({...q,username:""})):B(q=>({...q,username:" "}))},ie=async Q=>{if(Q.preventDefault(),R(""),!ee(x)){R("Please enter a valid username");return}try{const ue=k?"/login":"/signup",q=await fetch(window.server_url+ue,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:x,password:A}),mode:"cors"});if(q.ok){const Re=await q.json();r(Re),p(),W("/")}else{const Re=await q.json();R(Re.message||`${k?"Login":"Signup"} failed`)}}catch(ue){R("Network error occurred. Please try again."),console.error("Error:",ue)}};return N.jsxs("div",{className:"login-container",children:[N.jsx("button",{onClick:()=>W("/"),className:"homescreen-button",children:"Home"}),N.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),N.jsx("h1",{className:"login-header",children:"Login"}),N.jsxs("div",{className:"login-signup-form",children:[T&&N.jsx("div",{className:"error-message",children:T}),N.jsxs("form",{onSubmit:ie,children:[N.jsxs("div",{className:"form-group",children:[N.jsx("input",{type:"text",placeholder:"Username",className:"login-input",value:x,onChange:ce,required:!0}),U&&N.jsx("div",{className:"step-success",children:"lowercase letters and numbers only"})]}),N.jsx("div",{className:"form-group",children:N.jsx("input",{type:"text",placeholder:"Password",className:"login-input",value:A,onChange:Q=>w(Q.target.value),required:!0})}),N.jsx("button",{type:"submit",className:"login-primary-button",children:"Login"})]})]})]})},NE=()=>{const r=Wr(),{logout:o}=P.useContext(zr);return localStorage.removeItem("access_token"),P.useEffect(()=>{console.log("LogoutPage useEffect"),setTimeout(()=>{o(),r("/")},100)},[]),N.jsx("div",{children:"Logged out redirecting to homescreen"})};var RE=Object.defineProperty,Su=Object.getOwnPropertySymbols,_m=Object.prototype.hasOwnProperty,Om=Object.prototype.propertyIsEnumerable,Rp=(r,o,a)=>o in r?RE(r,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[o]=a,Kf=(r,o)=>{for(var a in o||(o={}))_m.call(o,a)&&Rp(r,a,o[a]);if(Su)for(var a of Su(o))Om.call(o,a)&&Rp(r,a,o[a]);return r},Zf=(r,o)=>{var a={};for(var d in r)_m.call(r,d)&&o.indexOf(d)<0&&(a[d]=r[d]);if(r!=null&&Su)for(var d of Su(r))o.indexOf(d)<0&&Om.call(r,d)&&(a[d]=r[d]);return a};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Zs;(r=>{const o=class vt{constructor(w,E,S,T){if(this.version=w,this.errorCorrectionLevel=E,this.modules=[],this.isFunction=[],w<vt.MIN_VERSION||w>vt.MAX_VERSION)throw new RangeError("Version value out of range");if(T<-1||T>7)throw new RangeError("Mask value out of range");this.size=w*4+17;let R=[];for(let L=0;L<this.size;L++)R.push(!1);for(let L=0;L<this.size;L++)this.modules.push(R.slice()),this.isFunction.push(R.slice());this.drawFunctionPatterns();const k=this.addEccAndInterleave(S);if(this.drawCodewords(k),T==-1){let L=1e9;for(let j=0;j<8;j++){this.applyMask(j),this.drawFormatBits(j);const B=this.getPenaltyScore();B<L&&(T=j,L=B),this.applyMask(j)}}p(0<=T&&T<=7),this.mask=T,this.applyMask(T),this.drawFormatBits(T),this.isFunction=[]}static encodeText(w,E){const S=r.QrSegment.makeSegments(w);return vt.encodeSegments(S,E)}static encodeBinary(w,E){const S=r.QrSegment.makeBytes(w);return vt.encodeSegments([S],E)}static encodeSegments(w,E,S=1,T=40,R=-1,k=!0){if(!(vt.MIN_VERSION<=S&&S<=T&&T<=vt.MAX_VERSION)||R<-1||R>7)throw new RangeError("Invalid value");let L,j;for(L=S;;L++){const W=vt.getNumDataCodewords(L,E)*8,ee=y.getTotalBits(w,L);if(ee<=W){j=ee;break}if(L>=T)throw new RangeError("Data too long")}for(const W of[vt.Ecc.MEDIUM,vt.Ecc.QUARTILE,vt.Ecc.HIGH])k&&j<=vt.getNumDataCodewords(L,W)*8&&(E=W);let B=[];for(const W of w){a(W.mode.modeBits,4,B),a(W.numChars,W.mode.numCharCountBits(L),B);for(const ee of W.getData())B.push(ee)}p(B.length==j);const U=vt.getNumDataCodewords(L,E)*8;p(B.length<=U),a(0,Math.min(4,U-B.length),B),a(0,(8-B.length%8)%8,B),p(B.length%8==0);for(let W=236;B.length<U;W^=253)a(W,8,B);let H=[];for(;H.length*8<B.length;)H.push(0);return B.forEach((W,ee)=>H[ee>>>3]|=W<<7-(ee&7)),new vt(L,E,H,R)}getModule(w,E){return 0<=w&&w<this.size&&0<=E&&E<this.size&&this.modules[E][w]}getModules(){return this.modules}drawFunctionPatterns(){for(let S=0;S<this.size;S++)this.setFunctionModule(6,S,S%2==0),this.setFunctionModule(S,6,S%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const w=this.getAlignmentPatternPositions(),E=w.length;for(let S=0;S<E;S++)for(let T=0;T<E;T++)S==0&&T==0||S==0&&T==E-1||S==E-1&&T==0||this.drawAlignmentPattern(w[S],w[T]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(w){const E=this.errorCorrectionLevel.formatBits<<3|w;let S=E;for(let R=0;R<10;R++)S=S<<1^(S>>>9)*1335;const T=(E<<10|S)^21522;p(T>>>15==0);for(let R=0;R<=5;R++)this.setFunctionModule(8,R,d(T,R));this.setFunctionModule(8,7,d(T,6)),this.setFunctionModule(8,8,d(T,7)),this.setFunctionModule(7,8,d(T,8));for(let R=9;R<15;R++)this.setFunctionModule(14-R,8,d(T,R));for(let R=0;R<8;R++)this.setFunctionModule(this.size-1-R,8,d(T,R));for(let R=8;R<15;R++)this.setFunctionModule(8,this.size-15+R,d(T,R));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let w=this.version;for(let S=0;S<12;S++)w=w<<1^(w>>>11)*7973;const E=this.version<<12|w;p(E>>>18==0);for(let S=0;S<18;S++){const T=d(E,S),R=this.size-11+S%3,k=Math.floor(S/3);this.setFunctionModule(R,k,T),this.setFunctionModule(k,R,T)}}drawFinderPattern(w,E){for(let S=-4;S<=4;S++)for(let T=-4;T<=4;T++){const R=Math.max(Math.abs(T),Math.abs(S)),k=w+T,L=E+S;0<=k&&k<this.size&&0<=L&&L<this.size&&this.setFunctionModule(k,L,R!=2&&R!=4)}}drawAlignmentPattern(w,E){for(let S=-2;S<=2;S++)for(let T=-2;T<=2;T++)this.setFunctionModule(w+T,E+S,Math.max(Math.abs(T),Math.abs(S))!=1)}setFunctionModule(w,E,S){this.modules[E][w]=S,this.isFunction[E][w]=!0}addEccAndInterleave(w){const E=this.version,S=this.errorCorrectionLevel;if(w.length!=vt.getNumDataCodewords(E,S))throw new RangeError("Invalid argument");const T=vt.NUM_ERROR_CORRECTION_BLOCKS[S.ordinal][E],R=vt.ECC_CODEWORDS_PER_BLOCK[S.ordinal][E],k=Math.floor(vt.getNumRawDataModules(E)/8),L=T-k%T,j=Math.floor(k/T);let B=[];const U=vt.reedSolomonComputeDivisor(R);for(let W=0,ee=0;W<T;W++){let ce=w.slice(ee,ee+j-R+(W<L?0:1));ee+=ce.length;const ie=vt.reedSolomonComputeRemainder(ce,U);W<L&&ce.push(0),B.push(ce.concat(ie))}let H=[];for(let W=0;W<B[0].length;W++)B.forEach((ee,ce)=>{(W!=j-R||ce>=L)&&H.push(ee[W])});return p(H.length==k),H}drawCodewords(w){if(w.length!=Math.floor(vt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let E=0;for(let S=this.size-1;S>=1;S-=2){S==6&&(S=5);for(let T=0;T<this.size;T++)for(let R=0;R<2;R++){const k=S-R,j=(S+1&2)==0?this.size-1-T:T;!this.isFunction[j][k]&&E<w.length*8&&(this.modules[j][k]=d(w[E>>>3],7-(E&7)),E++)}}p(E==w.length*8)}applyMask(w){if(w<0||w>7)throw new RangeError("Mask value out of range");for(let E=0;E<this.size;E++)for(let S=0;S<this.size;S++){let T;switch(w){case 0:T=(S+E)%2==0;break;case 1:T=E%2==0;break;case 2:T=S%3==0;break;case 3:T=(S+E)%3==0;break;case 4:T=(Math.floor(S/3)+Math.floor(E/2))%2==0;break;case 5:T=S*E%2+S*E%3==0;break;case 6:T=(S*E%2+S*E%3)%2==0;break;case 7:T=((S+E)%2+S*E%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[E][S]&&T&&(this.modules[E][S]=!this.modules[E][S])}}getPenaltyScore(){let w=0;for(let R=0;R<this.size;R++){let k=!1,L=0,j=[0,0,0,0,0,0,0];for(let B=0;B<this.size;B++)this.modules[R][B]==k?(L++,L==5?w+=vt.PENALTY_N1:L>5&&w++):(this.finderPenaltyAddHistory(L,j),k||(w+=this.finderPenaltyCountPatterns(j)*vt.PENALTY_N3),k=this.modules[R][B],L=1);w+=this.finderPenaltyTerminateAndCount(k,L,j)*vt.PENALTY_N3}for(let R=0;R<this.size;R++){let k=!1,L=0,j=[0,0,0,0,0,0,0];for(let B=0;B<this.size;B++)this.modules[B][R]==k?(L++,L==5?w+=vt.PENALTY_N1:L>5&&w++):(this.finderPenaltyAddHistory(L,j),k||(w+=this.finderPenaltyCountPatterns(j)*vt.PENALTY_N3),k=this.modules[B][R],L=1);w+=this.finderPenaltyTerminateAndCount(k,L,j)*vt.PENALTY_N3}for(let R=0;R<this.size-1;R++)for(let k=0;k<this.size-1;k++){const L=this.modules[R][k];L==this.modules[R][k+1]&&L==this.modules[R+1][k]&&L==this.modules[R+1][k+1]&&(w+=vt.PENALTY_N2)}let E=0;for(const R of this.modules)E=R.reduce((k,L)=>k+(L?1:0),E);const S=this.size*this.size,T=Math.ceil(Math.abs(E*20-S*10)/S)-1;return p(0<=T&&T<=9),w+=T*vt.PENALTY_N4,p(0<=w&&w<=2568888),w}getAlignmentPatternPositions(){if(this.version==1)return[];{const w=Math.floor(this.version/7)+2,E=this.version==32?26:Math.ceil((this.version*4+4)/(w*2-2))*2;let S=[6];for(let T=this.size-7;S.length<w;T-=E)S.splice(1,0,T);return S}}static getNumRawDataModules(w){if(w<vt.MIN_VERSION||w>vt.MAX_VERSION)throw new RangeError("Version number out of range");let E=(16*w+128)*w+64;if(w>=2){const S=Math.floor(w/7)+2;E-=(25*S-10)*S-55,w>=7&&(E-=36)}return p(208<=E&&E<=29648),E}static getNumDataCodewords(w,E){return Math.floor(vt.getNumRawDataModules(w)/8)-vt.ECC_CODEWORDS_PER_BLOCK[E.ordinal][w]*vt.NUM_ERROR_CORRECTION_BLOCKS[E.ordinal][w]}static reedSolomonComputeDivisor(w){if(w<1||w>255)throw new RangeError("Degree out of range");let E=[];for(let T=0;T<w-1;T++)E.push(0);E.push(1);let S=1;for(let T=0;T<w;T++){for(let R=0;R<E.length;R++)E[R]=vt.reedSolomonMultiply(E[R],S),R+1<E.length&&(E[R]^=E[R+1]);S=vt.reedSolomonMultiply(S,2)}return E}static reedSolomonComputeRemainder(w,E){let S=E.map(T=>0);for(const T of w){const R=T^S.shift();S.push(0),E.forEach((k,L)=>S[L]^=vt.reedSolomonMultiply(k,R))}return S}static reedSolomonMultiply(w,E){if(w>>>8||E>>>8)throw new RangeError("Byte out of range");let S=0;for(let T=7;T>=0;T--)S=S<<1^(S>>>7)*285,S^=(E>>>T&1)*w;return p(S>>>8==0),S}finderPenaltyCountPatterns(w){const E=w[1];p(E<=this.size*3);const S=E>0&&w[2]==E&&w[3]==E*3&&w[4]==E&&w[5]==E;return(S&&w[0]>=E*4&&w[6]>=E?1:0)+(S&&w[6]>=E*4&&w[0]>=E?1:0)}finderPenaltyTerminateAndCount(w,E,S){return w&&(this.finderPenaltyAddHistory(E,S),E=0),E+=this.size,this.finderPenaltyAddHistory(E,S),this.finderPenaltyCountPatterns(S)}finderPenaltyAddHistory(w,E){E[0]==0&&(w+=this.size),E.pop(),E.unshift(w)}};o.MIN_VERSION=1,o.MAX_VERSION=40,o.PENALTY_N1=3,o.PENALTY_N2=3,o.PENALTY_N3=40,o.PENALTY_N4=10,o.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],o.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],r.QrCode=o;function a(A,w,E){if(w<0||w>31||A>>>w)throw new RangeError("Value out of range");for(let S=w-1;S>=0;S--)E.push(A>>>S&1)}function d(A,w){return(A>>>w&1)!=0}function p(A){if(!A)throw new Error("Assertion error")}const x=class hn{constructor(w,E,S){if(this.mode=w,this.numChars=E,this.bitData=S,E<0)throw new RangeError("Invalid argument");this.bitData=S.slice()}static makeBytes(w){let E=[];for(const S of w)a(S,8,E);return new hn(hn.Mode.BYTE,w.length,E)}static makeNumeric(w){if(!hn.isNumeric(w))throw new RangeError("String contains non-numeric characters");let E=[];for(let S=0;S<w.length;){const T=Math.min(w.length-S,3);a(parseInt(w.substring(S,S+T),10),T*3+1,E),S+=T}return new hn(hn.Mode.NUMERIC,w.length,E)}static makeAlphanumeric(w){if(!hn.isAlphanumeric(w))throw new RangeError("String contains unencodable characters in alphanumeric mode");let E=[],S;for(S=0;S+2<=w.length;S+=2){let T=hn.ALPHANUMERIC_CHARSET.indexOf(w.charAt(S))*45;T+=hn.ALPHANUMERIC_CHARSET.indexOf(w.charAt(S+1)),a(T,11,E)}return S<w.length&&a(hn.ALPHANUMERIC_CHARSET.indexOf(w.charAt(S)),6,E),new hn(hn.Mode.ALPHANUMERIC,w.length,E)}static makeSegments(w){return w==""?[]:hn.isNumeric(w)?[hn.makeNumeric(w)]:hn.isAlphanumeric(w)?[hn.makeAlphanumeric(w)]:[hn.makeBytes(hn.toUtf8ByteArray(w))]}static makeEci(w){let E=[];if(w<0)throw new RangeError("ECI assignment value out of range");if(w<128)a(w,8,E);else if(w<16384)a(2,2,E),a(w,14,E);else if(w<1e6)a(6,3,E),a(w,21,E);else throw new RangeError("ECI assignment value out of range");return new hn(hn.Mode.ECI,0,E)}static isNumeric(w){return hn.NUMERIC_REGEX.test(w)}static isAlphanumeric(w){return hn.ALPHANUMERIC_REGEX.test(w)}getData(){return this.bitData.slice()}static getTotalBits(w,E){let S=0;for(const T of w){const R=T.mode.numCharCountBits(E);if(T.numChars>=1<<R)return 1/0;S+=4+R+T.bitData.length}return S}static toUtf8ByteArray(w){w=encodeURI(w);let E=[];for(let S=0;S<w.length;S++)w.charAt(S)!="%"?E.push(w.charCodeAt(S)):(E.push(parseInt(w.substring(S+1,S+3),16)),S+=2);return E}};x.NUMERIC_REGEX=/^[0-9]*$/,x.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,x.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let y=x;r.QrSegment=x})(Zs||(Zs={}));(r=>{(o=>{const a=class{constructor(p,x){this.ordinal=p,this.formatBits=x}};a.LOW=new a(0,1),a.MEDIUM=new a(1,0),a.QUARTILE=new a(2,3),a.HIGH=new a(3,2),o.Ecc=a})(r.QrCode||(r.QrCode={}))})(Zs||(Zs={}));(r=>{(o=>{const a=class{constructor(p,x){this.modeBits=p,this.numBitsCharCount=x}numCharCountBits(p){return this.numBitsCharCount[Math.floor((p+7)/17)]}};a.NUMERIC=new a(1,[10,12,14]),a.ALPHANUMERIC=new a(2,[9,11,13]),a.BYTE=new a(4,[8,16,16]),a.KANJI=new a(8,[8,10,12]),a.ECI=new a(7,[0,0,0]),o.Mode=a})(r.QrSegment||(r.QrSegment={}))})(Zs||(Zs={}));var _o=Zs;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var _E={L:_o.QrCode.Ecc.LOW,M:_o.QrCode.Ecc.MEDIUM,Q:_o.QrCode.Ecc.QUARTILE,H:_o.QrCode.Ecc.HIGH},Pm=128,Mm="L",Dm="#FFFFFF",km="#000000",Lm=!1,Bm=1,OE=4,PE=0,ME=.1;function Fm(r,o=0){const a=[];return r.forEach(function(d,p){let x=null;d.forEach(function(y,A){if(!y&&x!==null){a.push(`M${x+o} ${p+o}h${A-x}v1H${x+o}z`),x=null;return}if(A===d.length-1){if(!y)return;x===null?a.push(`M${A+o},${p+o} h1v1H${A+o}z`):a.push(`M${x+o},${p+o} h${A+1-x}v1H${x+o}z`);return}y&&x===null&&(x=A)})}),a.join("")}function jm(r,o){return r.slice().map((a,d)=>d<o.y||d>=o.y+o.h?a:a.map((p,x)=>x<o.x||x>=o.x+o.w?p:!1))}function DE(r,o,a,d){if(d==null)return null;const p=r.length+a*2,x=Math.floor(o*ME),y=p/o,A=(d.width||x)*y,w=(d.height||x)*y,E=d.x==null?r.length/2-A/2:d.x*y,S=d.y==null?r.length/2-w/2:d.y*y,T=d.opacity==null?1:d.opacity;let R=null;if(d.excavate){let L=Math.floor(E),j=Math.floor(S),B=Math.ceil(A+E-L),U=Math.ceil(w+S-j);R={x:L,y:j,w:B,h:U}}const k=d.crossOrigin;return{x:E,y:S,h:w,w:A,excavation:R,opacity:T,crossOrigin:k}}function kE(r,o){return o!=null?Math.max(Math.floor(o),0):r?OE:PE}function Vm({value:r,level:o,minVersion:a,includeMargin:d,marginSize:p,imageSettings:x,size:y,boostLevel:A}){let w=en.useMemo(()=>{const L=(Array.isArray(r)?r:[r]).reduce((j,B)=>(j.push(..._o.QrSegment.makeSegments(B)),j),[]);return _o.QrCode.encodeSegments(L,_E[o],a,void 0,void 0,A)},[r,o,a,A]);const{cells:E,margin:S,numCells:T,calculatedImageSettings:R}=en.useMemo(()=>{let k=w.getModules();const L=kE(d,p),j=k.length+L*2,B=DE(k,y,L,x);return{cells:k,margin:L,numCells:j,calculatedImageSettings:B}},[w,y,x,d,p]);return{qrcode:w,margin:S,cells:E,numCells:T,calculatedImageSettings:R}}var LE=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),BE=en.forwardRef(function(o,a){const d=o,{value:p,size:x=Pm,level:y=Mm,bgColor:A=Dm,fgColor:w=km,includeMargin:E=Lm,minVersion:S=Bm,boostLevel:T,marginSize:R,imageSettings:k}=d,j=Zf(d,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:B}=j,U=Zf(j,["style"]),H=k==null?void 0:k.src,W=en.useRef(null),ee=en.useRef(null),ce=en.useCallback(Le=>{W.current=Le,typeof a=="function"?a(Le):a&&(a.current=Le)},[a]),[ie,Q]=en.useState(!1),{margin:ue,cells:q,numCells:Re,calculatedImageSettings:je}=Vm({value:p,level:y,minVersion:S,boostLevel:T,includeMargin:E,marginSize:R,imageSettings:k,size:x});en.useEffect(()=>{if(W.current!=null){const Le=W.current,J=Le.getContext("2d");if(!J)return;let we=q;const oe=ee.current,fe=je!=null&&oe!==null&&oe.complete&&oe.naturalHeight!==0&&oe.naturalWidth!==0;fe&&je.excavation!=null&&(we=jm(q,je.excavation));const pe=window.devicePixelRatio||1;Le.height=Le.width=x*pe;const ge=x/Re*pe;J.scale(ge,ge),J.fillStyle=A,J.fillRect(0,0,Re,Re),J.fillStyle=w,LE?J.fill(new Path2D(Fm(we,ue))):q.forEach(function(Z,de){Z.forEach(function(We,Ue){We&&J.fillRect(Ue+ue,de+ue,1,1)})}),je&&(J.globalAlpha=je.opacity),fe&&J.drawImage(oe,je.x+ue,je.y+ue,je.w,je.h)}}),en.useEffect(()=>{Q(!1)},[H]);const be=Kf({height:x,width:x},B);let Oe=null;return H!=null&&(Oe=en.createElement("img",{src:H,key:H,style:{display:"none"},onLoad:()=>{Q(!0)},ref:ee,crossOrigin:je==null?void 0:je.crossOrigin})),en.createElement(en.Fragment,null,en.createElement("canvas",Kf({style:be,height:x,width:x,ref:ce,role:"img"},U)),Oe)});BE.displayName="QRCodeCanvas";var Vd=en.forwardRef(function(o,a){const d=o,{value:p,size:x=Pm,level:y=Mm,bgColor:A=Dm,fgColor:w=km,includeMargin:E=Lm,minVersion:S=Bm,boostLevel:T,title:R,marginSize:k,imageSettings:L}=d,j=Zf(d,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:B,cells:U,numCells:H,calculatedImageSettings:W}=Vm({value:p,level:y,minVersion:S,boostLevel:T,includeMargin:E,marginSize:k,imageSettings:L,size:x});let ee=U,ce=null;L!=null&&W!=null&&(W.excavation!=null&&(ee=jm(U,W.excavation)),ce=en.createElement("image",{href:L.src,height:W.h,width:W.w,x:W.x+B,y:W.y+B,preserveAspectRatio:"none",opacity:W.opacity,crossOrigin:W.crossOrigin}));const ie=Fm(ee,B);return en.createElement("svg",Kf({height:x,width:x,viewBox:`0 0 ${H} ${H}`,ref:a,role:"img"},j),!!R&&en.createElement("title",null,R),en.createElement("path",{fill:A,d:`M0,0 h${H}v${H}H0z`,shapeRendering:"crispEdges"}),en.createElement("path",{fill:w,d:ie,shapeRendering:"crispEdges"}),ce)});Vd.displayName="QRCodeSVG";const FE=({player:r})=>N.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"350px",height:"500px",margin:"0 auto",position:"relative"},children:r!=null&&r.image_data?N.jsxs("div",{style:{position:"relative",width:"350px",height:"450px"},children:[N.jsx("img",{src:`data:image/jpeg;base64,${r.image_data}`,alt:r.name,style:{width:"350px",height:"450px",objectFit:"cover",borderRadius:"50px",boxShadow:"0 6px 12px rgba(0, 0, 0, 0.3)",margin:"auto",display:"block"},onError:o=>{console.error("Image failed to load:",o),o.target.style.display="none"}}),N.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",backgroundColor:"#144dff",color:"white",padding:"12px 0",borderBottomLeftRadius:"50px",borderBottomRightRadius:"50px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",fontFamily:"Helvetica, Arial, sans-serif",boxShadow:"0 -4px 10px rgba(0, 0, 0, 0.1)",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.2)"},children:r.name})]}):N.jsxs("div",{style:{width:"350px",height:"450px",backgroundColor:"#f0f0f0",borderRadius:"50px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"relative"},children:[N.jsx("p",{style:{marginBottom:"60px"},children:"No image available"}),N.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",backgroundColor:"#144dff",color:"white",padding:"12px 0",borderBottomLeftRadius:"50px",borderBottomRightRadius:"50px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",fontFamily:"Helvetica, Arial, sans-serif",boxShadow:"0 -4px 10px rgba(0, 0, 0, 0.1)",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.2)"},children:r.name})]})});var _p=typeof window>"u"?P.useEffect:P.useLayoutEffect,jE=({isPlaying:r,duration:o,startAt:a=0,updateInterval:d=0,onComplete:p,onUpdate:x})=>{let[y,A]=P.useState(a),w=P.useRef(0),E=P.useRef(a),S=P.useRef(a*-1e3),T=P.useRef(null),R=P.useRef(null),k=P.useRef(null),L=U=>{let H=U/1e3;if(R.current===null){R.current=H,T.current=requestAnimationFrame(L);return}let W=H-R.current,ee=w.current+W;R.current=H,w.current=ee;let ce=E.current+(d===0?ee:(ee/d|0)*d),ie=E.current+ee,Q=typeof o=="number"&&ie>=o;A(Q?o:ce),Q||(T.current=requestAnimationFrame(L))},j=()=>{T.current&&cancelAnimationFrame(T.current),k.current&&clearTimeout(k.current),R.current=null},B=P.useCallback(U=>{j(),w.current=0;let H=typeof U=="number"?U:a;E.current=H,A(H),r&&(T.current=requestAnimationFrame(L))},[r,a]);return _p(()=>{if(x==null||x(y),o&&y>=o){S.current+=o*1e3;let{shouldRepeat:U=!1,delay:H=0,newStartAt:W}=(p==null?void 0:p(S.current/1e3))||{};U&&(k.current=setTimeout(()=>B(W),H*1e3))}},[y,o]),_p(()=>(r&&(T.current=requestAnimationFrame(L)),j),[r,o,d]),{elapsedTime:y,reset:B}},VE=(r,o,a)=>{let d=r/2,p=o/2,x=d-p,y=2*x,A=a==="clockwise"?"1,0":"0,1",w=2*Math.PI*x;return{path:`m ${d},${p} a ${x},${x} 0 ${A} 0,${y} a ${x},${x} 0 ${A} 0,-${y}`,pathLength:w}},Op=(r,o)=>r===0||r===o?0:typeof o=="number"?r-o:0,UE=r=>({position:"relative",width:r,height:r}),zE={display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,top:0,width:"100%",height:"100%"},Um=(r,o,a,d,p)=>{if(d===0)return o;let x=(p?d-r:r)/d;return o+a*x},Pp=r=>{var o,a;return(a=(o=r.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(d,p,x,y)=>`#${p}${p}${x}${x}${y}${y}`).substring(1).match(/.{2}/g))==null?void 0:o.map(d=>parseInt(d,16)))!=null?a:[]},WE=(r,o)=>{var a;let{colors:d,colorsTime:p,isSmoothColorTransition:x=!0}=r;if(typeof d=="string")return d;let y=(a=p==null?void 0:p.findIndex((R,k)=>R>=o&&o>=p[k+1]))!=null?a:-1;if(!p||y===-1)return d[0];if(!x)return d[y];let A=p[y]-o,w=p[y]-p[y+1],E=Pp(d[y]),S=Pp(d[y+1]),T=!!r.isGrowing;return`rgb(${E.map((R,k)=>Um(A,R,S[k]-R,w,T)|0).join(",")})`},HE=r=>{let{duration:o,initialRemainingTime:a,updateInterval:d,size:p=180,strokeWidth:x=12,trailStrokeWidth:y,isPlaying:A=!1,isGrowing:w=!1,rotation:E="clockwise",onComplete:S,onUpdate:T}=r,R=P.useRef(),k=Math.max(x,y??0),{path:L,pathLength:j}=VE(p,k,E),{elapsedTime:B}=jE({isPlaying:A,duration:o,startAt:Op(o,a),updateInterval:d,onUpdate:typeof T=="function"?H=>{let W=Math.ceil(o-H);W!==R.current&&(R.current=W,T(W))}:void 0,onComplete:typeof S=="function"?H=>{var W;let{shouldRepeat:ee,delay:ce,newInitialRemainingTime:ie}=(W=S(H))!=null?W:{};if(ee)return{shouldRepeat:ee,delay:ce,newStartAt:Op(o,ie)}}:void 0}),U=o-B;return{elapsedTime:B,path:L,pathLength:j,remainingTime:Math.ceil(U),rotation:E,size:p,stroke:WE(r,U),strokeDashoffset:Um(B,0,j,o,w),strokeWidth:x}},Ud=r=>{let{children:o,strokeLinecap:a,trailColor:d,trailStrokeWidth:p}=r,{path:x,pathLength:y,stroke:A,strokeDashoffset:w,remainingTime:E,elapsedTime:S,size:T,strokeWidth:R}=HE(r);return en.createElement("div",{style:UE(T)},en.createElement("svg",{viewBox:`0 0 ${T} ${T}`,width:T,height:T,xmlns:"http://www.w3.org/2000/svg"},en.createElement("path",{d:x,fill:"none",stroke:d??"#d9d9d9",strokeWidth:p??R}),en.createElement("path",{d:x,fill:"none",stroke:A,strokeLinecap:a??"round",strokeWidth:R,strokeDasharray:y,strokeDashoffset:w})),typeof o=="function"&&en.createElement("div",{style:zE},o({remainingTime:E,elapsedTime:S,color:A})))};Ud.displayName="CountdownCircleTimer";const GE=({onComplete:r})=>{const[o,a]=P.useState(5),[d,p]=P.useState(!1),x=P.useRef(null),y=P.useRef(null);P.useEffect(()=>(x.current&&clearTimeout(x.current),y.current&&clearInterval(y.current),y.current=setInterval(()=>{p(!0),x.current=setTimeout(()=>{a(w=>w<=1?(y.current&&clearInterval(y.current),x.current&&clearTimeout(x.current),r&&r(),0):w-1),p(!1)},500)},1500),()=>{y.current&&clearInterval(y.current),x.current&&clearTimeout(x.current)}),[r]);const A=d?"pop-burst":"";return N.jsx("div",{className:"lobby-countdown-overlay",children:N.jsxs("div",{className:`lobby-countdown-container ${A}`,children:[N.jsx("div",{className:"lobby-countdown-number",children:o}),N.jsx("div",{className:"lobby-countdown-text",children:o>0?"Get ready!":"Starting..."})]})})},XE=({onComplete:r,lobbyCode:o="this"})=>{const{userProfile:a}=P.useContext(zr),[d,p]=P.useState(0),[x,y]=P.useState(!1),[A,w]=P.useState(!1),[E,S]=P.useState([0]),[T,R]=P.useState(!1),k=P.useRef(null),L=P.useRef(null),j=[{image:a!=null&&a.image_data?`data:image/jpeg;base64,${a.image_data}`:"/assets/how_to_pt1_1.svg",duration:2e3,animatedText:"Find your match using their profile picture!"},{image:"/assets/how_to_pt2_2.svg",duration:4e3,animatedText:"Raise the volume, you need it to know whats going on!"},{image:"/assets/how_to_pt3_3.svg",duration:4e3,animatedText:"Tap this to stop or pause, you can rejoin anytime"}];return P.useEffect(()=>{const B=()=>{if(d>=j.length-1){clearInterval(k.current),r&&r();return}y(!0);const U=d+1;S([d,U]),L.current=setTimeout(()=>{R(!1),p(U),y(!1),setTimeout(()=>{S([U]),w(!0),j[U].animatedText&&R(!0)},500)},500)};return k.current=setInterval(B,j[d].duration),w(!0),d===0&&j[0].animatedText&&R(!0),()=>{k.current&&clearInterval(k.current),L.current&&clearTimeout(L.current)}},[d,j.length,r]),N.jsx("div",{className:"tutorial-overlay",children:N.jsxs("div",{className:"tutorial-container",children:[E.map(B=>N.jsxs("div",{className:`tutorial-slide ${B===d?"current":B<d?"previous":"next"}`,children:[B===d&&j[B].animatedText&&T&&N.jsx("div",{className:"animated-text pop-burst",children:j[B].animatedText}),B===1&&N.jsx("div",{className:"volume-arrow-container",children:N.jsx("svg",{className:"volume-arrow",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:N.jsx("path",{d:"M19 12H5M5 12L12 5M5 12L12 19",stroke:"#144dff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),N.jsx("div",{className:`tutorial-image-container ${B===0?"first-slide":""}`,children:N.jsx("img",{src:j[B].image,alt:`Tutorial step ${B+1}`,className:"tutorial-image"})}),N.jsx("div",{className:`tutorial-text ${A&&B===d?"text-animate":""}`,children:j[B].text})]},B)),N.jsx("div",{className:"tutorial-progress",children:j.map((B,U)=>N.jsx("div",{className:`progress-dot ${U===d?"active":""}`},U))})]})})},YE=({isVisible:r,onAnimationEnd:o})=>{const[a,d]=P.useState(!1),p=P.useRef(null);return P.useEffect(()=>(p.current&&clearTimeout(p.current),r?(d(!0),p.current=setTimeout(()=>{d(!1),o&&o()},3e3)):d(!1),()=>{p.current&&(clearTimeout(p.current),p.current=null)}),[r,o]),a?N.jsxs("div",{className:"match-overlay",children:[N.jsxs("div",{className:"confetti-container",children:[[...Array(50)].map((x,y)=>N.jsx("div",{className:`confetti confetti-${y%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":Math.random()*.2}},`first-${y}`)),[...Array(50)].map((x,y)=>N.jsx("div",{className:`confetti confetti-${y%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":`${.6+Math.random()*.2}s`}},`second-${y}`))]}),N.jsx("div",{className:"match-text",children:"It's a Match!"})]}):null},KE=({isVisible:r,onAnimationEnd:o})=>{const[a,d]=P.useState(!1),p=P.useRef(null);return P.useEffect(()=>(p.current&&clearTimeout(p.current),r?(d(!0),p.current=setTimeout(()=>{d(!1),o&&o()},1800)):d(!1),()=>{p.current&&(clearTimeout(p.current),p.current=null)}),[r,o]),a?N.jsxs("div",{className:"ready-overlay",children:[N.jsxs("div",{className:"confetti-container",children:[[...Array(50)].map((x,y)=>N.jsx("div",{className:`confetti confetti-${y%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":Math.random()*.2}},`first-${y}`)),[...Array(50)].map((x,y)=>N.jsx("div",{className:`confetti confetti-${y%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":`${.6+Math.random()*.2}s`}},`second-${y}`))]}),N.jsx("div",{className:"ready-text",children:"You're ready!"})]}):null},ou=9,ZE=5,$E=5e3,qE=()=>{const[r,o]=P.useState([]),[a,d]=P.useState("self"),[p,x]=P.useState(!1),[y,A]=P.useState(""),w=P.useRef(null),E=P.useRef(null),[S,T]=P.useState(!1),R=P.useRef(!1),[k,L]=P.useState(!1),{loadSound:j,seekTo:B,cancelSound:U,checkSound:H,soundEnabled:W,setSoundEnabled:ee,isPlaying:ce}=Jp(),[ie,Q]=P.useState("yonder"),ue=Wr(),{code:q}=G2(),[Re,je]=P.useState(null);Rm(je,null,ie);const{user:be,userProfile:Oe,checkAuth:Le,permissions:J}=P.useContext(zr);P.useEffect(()=>{(async()=>{if(localStorage.getItem("access_token"))try{be||await Le()}catch(st){console.error("Authentication error:",st);const Xe=new URLSearchParams(window.location.search).get("code")||q;ue(Xe?`/signup?redirect=lobby&code=${Xe}`:"/signup?redirect=lobby")}else{const bt=new URLSearchParams(window.location.search).get("code")||q;ue(bt?`/signup?redirect=lobby&code=${bt}`:"/signup?redirect=lobby")}})()},[ue,q,Le,be]),P.useEffect(()=>{(()=>{const st=new URLSearchParams(window.location.search).get("code")||q;if(st){Q(st);const bt=`hasSeenTutorial_${st}`,Xe=localStorage.getItem(bt),An=!!localStorage.getItem("access_token");console.log("Tutorial check:",{codeParam:st,lobbyTutorialKey:bt,hasSeenLobbyTutorial:Xe,isAuthenticated:An}),!Xe&&An&&(Rr(!0),localStorage.setItem(bt,"true"))}})()},[q]);const[we,oe]=P.useState(null),[fe,pe]=P.useState(null),[ge,Z]=P.useState(null),[de,We]=P.useState(null),[Ue,ut]=P.useState(null),ve=P.useRef(!1),et=P.useRef(null),[Te,Ne]=P.useState(null),[at,Je]=P.useState(null),[ct,Ve]=P.useState(null),[qt,Ot]=P.useState(null),[En,Vt]=P.useState(!0),St=300,ft=P.useRef(0),[tn,Pe]=P.useState(null),[gn,Mt]=P.useState(null),[Be,pt]=P.useState([]),[nt,$n]=P.useState([]),[Tt,Ct]=P.useState(!document.hidden),nn=P.useRef("yonder"),Dt=P.useRef({}),Ln=P.useRef([]),[kt,Ae]=P.useState(!1);P.useEffect(()=>{nn.current=ie},[ie]);async function Lt(_e,lt){const st=localStorage.getItem("access_token"),Xe=await(await fetch(window.server_url+"/set_profile_info",{method:"POST",headers:{Authorization:`Bearer ${st}`,"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},mode:"cors",body:JSON.stringify({tags_work:_e,tags_desiring_work:lt})})).json();console.log("SET PROFILE INFO:",Xe)}const It=async _e=>{if(_e.length!==0){Ae(!0);try{const lt=localStorage.getItem("access_token"),st=await fetch(`${window.server_url}/load_batch_pfp_small_icons`,{method:"POST",headers:{Authorization:`Bearer ${lt}`,"Content-Type":"application/json",lobby_code:nn.current},body:JSON.stringify({usernames:_e})});if(st.ok){const bt=await st.json();Dt.current={...Dt.current,...bt},console.log("Profile images fetched:",Object.keys(bt))}else console.error("Failed to fetch profile images:",st.status)}catch(lt){console.error("Error fetching profile images:",lt)}finally{Ae(!1)}}};async function Ut(){try{const _e=localStorage.getItem("access_token");U(),Dt.current={},Ln.current=[],(await fetch(window.server_url+"/disconnect_lobby",{headers:{Authorization:`Bearer ${_e}`,lobby_code:ie}})).ok&&ue("/")}catch(_e){console.error("Error disconnecting from lobby:",_e),ue("/")}finally{U(),ue("/"),console.log("finally")}}const[Hr,ti]=P.useState(!1),[Fi,gt]=P.useState(null),Bn=P.useRef(!1),[xs,ji]=P.useState(!1),[Fn,yi]=P.useState(null),mn=(_e,lt)=>{if(!_e||!lt)return null;for(const st of _e.tags_work)if(lt.desiring_tags_work.includes(st)){for(const bt of lt.tags_work)if(_e.desiring_tags_work.includes(bt))return{playerTag:st,opponentTag:bt}}return null};async function sr(){try{ft.current+=1,ft.current>5&&(ft.current=0,ve.current=!1);const _e=localStorage.getItem("access_token"),lt=!document.hidden,st=nn.current;if(console.log("lobby code fr:",st),st=="yonder"){console.log("lobby code is not set");return}const bt=await fetch(`${window.server_url}/lobby?is_visible=${lt}`,{headers:{Authorization:`Bearer ${_e}`,is_visible_t_f:lt?"t":"f",lobby_code:st}});if(bt.ok){const Xe=await bt.json();console.log("LOBBY PAIR DATA:",st,Xe),Xe.status=="inactive"&&(U(),ue("/")),Z(Xe.opponent_name),Xe.opponent_name==null&&oe(null),o(Xe.custom_tags),Ne(Xe.lobby_state),Ot(Xe.lobby_duration);const An=typeof Xe.round_time_left=="number"&&!isNaN(Xe.round_time_left)?Xe.round_time_left:0;console.log("Timer Debug:",{roundDuration:Xe.lobby_duration,timeLeft:An,lobbyState:Xe.lobby_state,usingDefaultDuration:!Xe.lobby_duration}),et.current=An,Je(Math.floor(An));const lr=Math.floor(An/60),Sn=Math.floor(An%60);Ve(`${lr}:${Sn.toString().padStart(2,"0")}`),ut(Xe.table_number),Xe.player_tags!=null&&Xe.player_tags.tags_work!=null&&pt(Xe.player_tags.tags_work),Xe.player_tags!=null&&Xe.player_tags.desiring_tags_work!=null&&$n(Xe.player_tags.desiring_tags_work),et.current!=null&&Xe.lobby_state=="active"&&et.current!=0&&(B(St-et.current),console.log("seeking to",St-et.current));const Ft=await fetch(`${window.server_url}/display_lobby_metadata?lobby_code=${st}`,{headers:{Authorization:`Bearer ${_e}`,lobby_code:st}});if(Ft.ok){const pr=await Ft.json();je(pr.player_count);const yt=pr.usernames||[];if(JSON.stringify(Ln.current)!==JSON.stringify(yt)){Ln.current=yt;const he=yt.filter(Cs=>!Dt.current[Cs]&&Cs!==(be==null?void 0:be.username));he.length>0&&(console.log("Fetching images for new users:",he),It(he))}}if((ge!=Xe.opponent_name||we==null)&&!ve.current&&Xe.opponent_name!=null){ve.current=!0,console.log("fetching profile");const pr=await fetch(window.server_url+"/paired_player_profile",{headers:{Authorization:`Bearer ${_e}`}});if(pr.ok){const yt=await pr.json();oe(yt),console.log("profile fetched:",yt.name)}else console.log("profile fetch failed");ve.current=!1}if(Fi==="interrim"&&Xe.lobby_state==="active"&&Xe.opponent_name&&!Bn.current){console.log("Checking for matches...");const pr=mn(Xe.player_tags,Xe.opponent_tags);pr&&(console.log("Match found! Setting animation and banner...",pr),yi(pr),ji(!0),Bn.current=!0,ti(!0))}gt(Xe.lobby_state)}}catch(_e){console.error("Error fetching lobby data:",_e)}}P.useEffect(()=>{H()?ee(!0):ee(!1);const _e=setInterval(async()=>{sr()},$E);return()=>clearInterval(_e)},[]),P.useEffect(()=>{const _e=setTimeout(sr,1e3);return()=>clearTimeout(_e)},[Te,ie]),P.useEffect(()=>{const _e=()=>{const lt=!document.hidden;lt&&!Tt&&(console.log("Page became visible - fetching latest data"),sr()),Ct(lt)};return document.addEventListener("visibilitychange",_e),()=>{document.removeEventListener("visibilitychange",_e)}},[Tt]);const wi=()=>N.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.125)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},children:N.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",position:"relative",minWidth:"300px"},children:[N.jsx("button",{onClick:()=>Vt(!1),style:{color:"#144fff",position:"absolute",right:"10px",top:"10px",border:"none",background:"none",fontSize:"2px",cursor:"pointer"},children:"X"}),N.jsx("h2",{style:{marginTop:"5px"},children:"The Sound is Important"}),N.jsx("h3",{style:{marginTop:"5px"},children:"Raise your volume also"}),N.jsx("p",{style:{color:"#144dff"},children:"You'll need this for the best experience."}),N.jsx("button",{onClick:()=>{j(),Vt(!1)},style:{padding:"10px 20px",marginTop:"20px",backgroundColor:"#144dff",color:"#ffffff",border:"none",borderRadius:"14px",fontWeight:"bold",cursor:"pointer"},children:"Enable Sound"})]})}),Tn=(_e,lt)=>{tn==null&&Pe(Be),gn==null&&Mt(nt);const st=_e==="self"?tn:gn;if(!(st!=null&&st.includes(lt))&&(st==null?void 0:st.length)>=ZE){A("Reached tag limit for this section"),setTimeout(()=>{var Xe;(Xe=E.current)==null||Xe.scrollIntoView({behavior:"smooth",block:"center"})},100),setTimeout(()=>{A("")},3e3);return}_e==="self"?Pe(Xe=>Xe.includes(lt)?Xe.filter(An=>An!==lt):[...Xe,lt]):Mt(Xe=>Xe.includes(lt)?Xe.filter(An=>An!==lt):[...Xe,lt])},ys=()=>{tn!=null&&Lt(tn,gn||[]),d("desiring"),setTimeout(()=>{var _e;(_e=w.current)==null||_e.scrollIntoView({behavior:"smooth",block:"start"})},100)},or=()=>{gn!=null&&(Lt(tn||[],gn),setTimeout(()=>{R.current||(R.current=!0,T(!0),L(!0))},500)),window.scrollTo({top:0,behavior:"smooth"})},ws=()=>{d("self")},[un,ar]=P.useState(!1);P.useEffect(()=>{if(Te==="interrim")ar(!0);else if(Te==="active"){const _e=setTimeout(()=>{ar(!1)},1e3);return()=>clearTimeout(_e)}},[Te]);const In=()=>{console.log("Lobby countdown animation completed")},[Me,Rr]=P.useState(!1),vs=()=>{Rr(!1)};P.useEffect(()=>{(Te!=="active"||!we)&&(ji(!1),yi(null))},[Te,we]),P.useEffect(()=>{Te==="terminated"&&(Dt.current={},Ln.current=[])},[Te]);const Nn=P.useRef(null);return P.useEffect(()=>{var _e;!p&&!(Be!=null&&Be.length)&&!(nt!=null&&nt.length)&&(r==null?void 0:r.length)>0&&((_e=Nn.current)==null||_e.scrollIntoView({behavior:"smooth"}),x(!0))},[Be,nt,r,p]),N.jsxs("div",{className:"lobby-container",children:[N.jsxs("div",{className:"lobby-content",children:[N.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0",marginTop:"-1.5rem"},children:N.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",style:{maxWidth:"85px",height:"auto",objectFit:"contain"}})}),(Te==="checkin"||Te==="active"&&!we||Te==="interrim")&&N.jsx("div",{className:"user-profile-container",children:N.jsxs("div",{className:"user-profile",children:[N.jsx("img",{src:Oe!=null&&Oe.image_data?`data:image/jpeg;base64,${Oe.image_data}`:"/assets/avatar_3.png",alt:"Your Profile",className:"user-profile-picture"}),N.jsx("div",{className:"user-profile-glow"})]})}),N.jsx("div",{className:"lobby-header",style:{marginTop:"-50px"},children:N.jsx("h2",{children:Te==="active"&&we?N.jsxs("span",{className:"lobby-pop-burst",children:["Go find ",we.name,"!"]}):Te==="checkin"?N.jsxs(N.Fragment,{children:["Wait here ",Oe.name.slice(0,15),".",N.jsx("br",{}),"Your host will start the experience."]}):Te==="active"&&!we?"You will be paired with someone in the next round.":Te==="interrim"?"Get ready for the next round!":Te==="terminated"?"This session has ended. Thank you for participating!":""})},Te),Te==="active"&&we&&Ue&&N.jsx("div",{className:"table-number",children:N.jsxs("h3",{children:["at table: ",Ue]})}),Te!=="checkin"&&N.jsx("div",{className:"time-left",style:{display:"flex",flexDirection:"column",alignItems:"center",background:"white",marginTop:"-2rem"},children:(Te==="active"||Te==="interrim")&&at?N.jsxs(N.Fragment,{children:[N.jsx(Ud,{isPlaying:Te==="active",duration:qt||300,initialRemainingTime:at||0,colors:["#144dff"],size:90,strokeWidth:12,trailColor:"#f5f7ff",onComplete:()=>(sr(),{shouldRepeat:!1}),children:({remainingTime:_e})=>{const lt=typeof _e=="number"&&!isNaN(_e)?_e:0,st=Math.floor(lt/60),bt=Math.floor(lt%60);return N.jsxs("span",{style:{fontSize:".95rem",color:"#144dff",fontWeight:600},children:[st,":",String(bt).padStart(2,"0")]})}},`${Te}-${at}`),N.jsx("span",{style:{fontWeight:700,fontSize:"0.7em",marginTop:"4px",opacity:"1",color:"#144dff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.1)"},children:"round time left"})]}):N.jsx("span",{className:"time-left-text"})}),xs&&Fn&&Te==="active"&&we&&N.jsxs("div",{className:"match-banner",children:[N.jsx("span",{className:"match-tag",children:Fn.playerTag}),N.jsx("div",{className:"match-arrow"}),N.jsx("span",{className:"match-tag",children:Fn.opponentTag})]}),N.jsx("div",{style:{display:"flex",justifyContent:"center",width:"100%",margin:"0 auto"},children:Te==="active"||Te==="interrim"?we?N.jsx("div",{style:{marginTop:"-4.5rem",width:"100%",display:"flex",justifyContent:"center"},children:N.jsx(FE,{player:we})}):N.jsx(N.Fragment,{}):Te==="terminated"?N.jsx("div",{className:"status-message",children:N.jsxs("h2",{children:["This session has ended.",N.jsx("br",{}),"Thank you for participating!"]})}):null}),(Te==="checkin"||Te==="active"&&!we)&&Re!==null&&N.jsx("div",{className:"player-count-container",children:N.jsxs("div",{className:"player-count-bubble",children:[N.jsx("div",{className:"player-count-icon",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:N.jsx("img",{src:"/assets/players_display_icon.png",alt:"Players in lobby",className:"player-count-img",style:{width:"40px",height:"40px",objectFit:"contain"}})}),N.jsxs("div",{className:"player-count-text",children:[N.jsx("span",{className:"player-count-number",children:Re}),N.jsxs("span",{className:"player-count-label",children:[""," in ",ie," lobby"]})]})]})}),(Te==="checkin"||Te==="active"&&!we)&&N.jsx("div",{className:"lobby-profiles-container",children:N.jsx("div",{className:"lobby-profiles-grid",children:Re>0?N.jsxs(N.Fragment,{children:[Array.from({length:Math.min(Re,ou)}).map((_e,lt)=>{let st;if(lt===0)st=Oe!=null&&Oe.image_data?`data:image/jpeg;base64,${Oe.image_data}`:"/assets/avatar_8.png";else{const Xe=Ln.current.filter(An=>An!==(be==null?void 0:be.username)&&Dt.current[An])[lt-1];Xe&&Dt.current[Xe]?st=`data:image/jpeg;base64,${Dt.current[Xe]}`:st="/assets/avatar_8.png"}return N.jsxs("div",{className:`profile-icon-wrapper ${lt===Math.min(Re,ou)-1?"pop-in":""}`,children:[N.jsx("img",{src:st,alt:lt===0?"Your Profile":`Profile ${lt+1}`,className:"profile-icon",loading:"lazy"}),N.jsx("div",{className:"profile-icon-glow"})]},`profile-${lt}`)}),Re>ou&&N.jsx("div",{className:"profile-icon-wrapper more-profiles",children:N.jsxs("div",{className:"more-profiles-bubble",children:["+",Re-ou]})})]}):N.jsx("div",{children:"No profiles to display"})})}),(Te==="checkin"||Te==="active")&&N.jsxs("div",{className:"selected-tags-container",children:[tn&&tn.length>0&&N.jsxs("div",{className:"tag-category",children:[N.jsx("h4",{children:"I am:"}),N.jsx("div",{className:"tag-list",children:tn.map(_e=>N.jsx("span",{className:"tag-item",children:_e},`self-${_e}`))})]}),gn&&gn.length>0&&N.jsxs("div",{className:"tag-category",children:[N.jsx("h4",{children:"Looking for:"}),N.jsx("div",{className:"tag-list",children:gn.map(_e=>N.jsx("span",{className:"tag-item",children:_e},`desiring-${_e}`))})]})]}),N.jsx("button",{className:"leave-lobby-button",onClick:Ut,children:"Leave"}),N.jsx("button",{className:"how-to-tutorial-button",onClick:()=>Rr(!0),children:"Tutorial"}),J==="admin"&&N.jsx("button",{className:"admin-view-button",onClick:()=>ue(`/admin_lobby_view?code=${ie}`),children:"Manage"}),Array.isArray(r)&&r.length>0&&N.jsx("form",{onSubmit:_e=>{_e.preventDefault(),a==="self"?ys():or()},children:N.jsxs("div",{className:"tags-section",ref:Nn,children:[N.jsx("div",{className:"progress-bar-container",children:N.jsx("div",{className:`progress-bar ${a==="desiring"?"progress-complete":""}`,onClick:ws})}),N.jsxs("div",{className:`tag-group ${a==="self"?"active":"hidden"}`,children:[N.jsx("div",{className:"bounce-wrapper",children:N.jsx("h2",{children:"Who are you?"})}),N.jsx("div",{className:"tag-labels-container",children:r.map(_e=>N.jsxs("label",{className:"tag-label",children:[N.jsx("input",{type:"checkbox",checked:tn!=null?tn.includes(_e):Be.includes(_e),onChange:()=>Tn("self",_e)}),_e]},`self-${_e}`))})]}),N.jsxs("div",{className:`tag-group ${a==="desiring"?"active":"hidden"}`,ref:w,children:[N.jsx("div",{className:"bounce-wrapper",children:N.jsx("h2",{children:"Who do you want to meet?"})}),N.jsx("div",{className:"tag-labels-container",children:r.map(_e=>N.jsxs("label",{className:"tag-label",children:[N.jsx("input",{type:"checkbox",checked:gn!=null?gn.includes(_e):nt.includes(_e),onChange:()=>Tn("desiring",_e)}),_e]},`desiring-${_e}`))})]}),N.jsx("button",{type:"submit",className:"tag-selection-button",ref:E,children:a==="self"?"Continue":"Save"}),y&&N.jsx("div",{style:{color:"#144dff",textAlign:"center",marginTop:"1rem",fontSize:"0.9rem",fontWeight:"600"},children:y})]})})]}),W||!En||Te=="checkin"||Te==null||ce?null:N.jsx(wi,{}),un&&N.jsx(GE,{onComplete:In}),Me&&N.jsx(XE,{onComplete:vs,lobbyCode:ie}),N.jsx(YE,{isVisible:Hr,onAnimationEnd:()=>{ti(!1),Bn.current=!1}}),N.jsx(KE,{isVisible:S,onAnimationEnd:()=>{T(!1),R.current=!1}})]})};let QE={data:""},JE=r=>typeof window=="object"?((r?r.querySelector("#_goober"):window._goober)||Object.assign((r||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:r||QE,eA=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,tA=/\/\*[^]*?\*\/|  +/g,Mp=/\n+/g,fs=(r,o)=>{let a="",d="",p="";for(let x in r){let y=r[x];x[0]=="@"?x[1]=="i"?a=x+" "+y+";":d+=x[1]=="f"?fs(y,x):x+"{"+fs(y,x[1]=="k"?"":o)+"}":typeof y=="object"?d+=fs(y,o?o.replace(/([^,])+/g,A=>x.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,w=>/&/.test(w)?w.replace(/&/g,A):A?A+" "+w:w)):x):y!=null&&(x=/^--/.test(x)?x:x.replace(/[A-Z]/g,"-$&").toLowerCase(),p+=fs.p?fs.p(x,y):x+":"+y+";")}return a+(o&&p?o+"{"+p+"}":p)+d},Di={},zm=r=>{if(typeof r=="object"){let o="";for(let a in r)o+=a+zm(r[a]);return o}return r},nA=(r,o,a,d,p)=>{let x=zm(r),y=Di[x]||(Di[x]=(w=>{let E=0,S=11;for(;E<w.length;)S=101*S+w.charCodeAt(E++)>>>0;return"go"+S})(x));if(!Di[y]){let w=x!==r?r:(E=>{let S,T,R=[{}];for(;S=eA.exec(E.replace(tA,""));)S[4]?R.shift():S[3]?(T=S[3].replace(Mp," ").trim(),R.unshift(R[0][T]=R[0][T]||{})):R[0][S[1]]=S[2].replace(Mp," ").trim();return R[0]})(r);Di[y]=fs(p?{["@keyframes "+y]:w}:w,a?"":"."+y)}let A=a&&Di.g?Di.g:null;return a&&(Di.g=Di[y]),((w,E,S,T)=>{T?E.data=E.data.replace(T,w):E.data.indexOf(w)===-1&&(E.data=S?w+E.data:E.data+w)})(Di[y],o,d,A),y},rA=(r,o,a)=>r.reduce((d,p,x)=>{let y=o[x];if(y&&y.call){let A=y(a),w=A&&A.props&&A.props.className||/^go/.test(A)&&A;y=w?"."+w:A&&typeof A=="object"?A.props?"":fs(A,""):A===!1?"":A}return d+p+(y??"")},"");function Du(r){let o=this||{},a=r.call?r(o.p):r;return nA(a.unshift?a.raw?rA(a,[].slice.call(arguments,1),o.p):a.reduce((d,p)=>Object.assign(d,p&&p.call?p(o.p):p),{}):a,JE(o.target),o.g,o.o,o.k)}let Wm,$f,qf;Du.bind({g:1});let Bi=Du.bind({k:1});function iA(r,o,a,d){fs.p=o,Wm=r,$f=a,qf=d}function ms(r,o){let a=this||{};return function(){let d=arguments;function p(x,y){let A=Object.assign({},x),w=A.className||p.className;a.p=Object.assign({theme:$f&&$f()},A),a.o=/ *go\d+/.test(w),A.className=Du.apply(a,d)+(w?" "+w:"");let E=r;return r[0]&&(E=A.as||r,delete A.as),qf&&E[0]&&qf(A),Wm(E,A)}return p}}var sA=r=>typeof r=="function",bu=(r,o)=>sA(r)?r(o):r,oA=(()=>{let r=0;return()=>(++r).toString()})(),Hm=(()=>{let r;return()=>{if(r===void 0&&typeof window<"u"){let o=matchMedia("(prefers-reduced-motion: reduce)");r=!o||o.matches}return r}})(),aA=20,Gm=(r,o)=>{switch(o.type){case 0:return{...r,toasts:[o.toast,...r.toasts].slice(0,aA)};case 1:return{...r,toasts:r.toasts.map(x=>x.id===o.toast.id?{...x,...o.toast}:x)};case 2:let{toast:a}=o;return Gm(r,{type:r.toasts.find(x=>x.id===a.id)?1:0,toast:a});case 3:let{toastId:d}=o;return{...r,toasts:r.toasts.map(x=>x.id===d||d===void 0?{...x,dismissed:!0,visible:!1}:x)};case 4:return o.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(x=>x.id!==o.toastId)};case 5:return{...r,pausedAt:o.time};case 6:let p=o.time-(r.pausedAt||0);return{...r,pausedAt:void 0,toasts:r.toasts.map(x=>({...x,pauseDuration:x.pauseDuration+p}))}}},hu=[],Ys={toasts:[],pausedAt:void 0},qs=r=>{Ys=Gm(Ys,r),hu.forEach(o=>{o(Ys)})},lA={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},uA=(r={})=>{let[o,a]=P.useState(Ys),d=P.useRef(Ys);P.useEffect(()=>(d.current!==Ys&&a(Ys),hu.push(a),()=>{let x=hu.indexOf(a);x>-1&&hu.splice(x,1)}),[]);let p=o.toasts.map(x=>{var y,A,w;return{...r,...r[x.type],...x,removeDelay:x.removeDelay||((y=r[x.type])==null?void 0:y.removeDelay)||(r==null?void 0:r.removeDelay),duration:x.duration||((A=r[x.type])==null?void 0:A.duration)||(r==null?void 0:r.duration)||lA[x.type],style:{...r.style,...(w=r[x.type])==null?void 0:w.style,...x.style}}});return{...o,toasts:p}},cA=(r,o="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:o,ariaProps:{role:"status","aria-live":"polite"},message:r,pauseDuration:0,...a,id:(a==null?void 0:a.id)||oA()}),Za=r=>(o,a)=>{let d=cA(o,r,a);return qs({type:2,toast:d}),d.id},dr=(r,o)=>Za("blank")(r,o);dr.error=Za("error");dr.success=Za("success");dr.loading=Za("loading");dr.custom=Za("custom");dr.dismiss=r=>{qs({type:3,toastId:r})};dr.remove=r=>qs({type:4,toastId:r});dr.promise=(r,o,a)=>{let d=dr.loading(o.loading,{...a,...a==null?void 0:a.loading});return typeof r=="function"&&(r=r()),r.then(p=>{let x=o.success?bu(o.success,p):void 0;return x?dr.success(x,{id:d,...a,...a==null?void 0:a.success}):dr.dismiss(d),p}).catch(p=>{let x=o.error?bu(o.error,p):void 0;x?dr.error(x,{id:d,...a,...a==null?void 0:a.error}):dr.dismiss(d)}),r};var fA=(r,o)=>{qs({type:1,toast:{id:r,height:o}})},dA=()=>{qs({type:5,time:Date.now()})},Oa=new Map,hA=1e3,pA=(r,o=hA)=>{if(Oa.has(r))return;let a=setTimeout(()=>{Oa.delete(r),qs({type:4,toastId:r})},o);Oa.set(r,a)},gA=r=>{let{toasts:o,pausedAt:a}=uA(r);P.useEffect(()=>{if(a)return;let x=Date.now(),y=o.map(A=>{if(A.duration===1/0)return;let w=(A.duration||0)+A.pauseDuration-(x-A.createdAt);if(w<0){A.visible&&dr.dismiss(A.id);return}return setTimeout(()=>dr.dismiss(A.id),w)});return()=>{y.forEach(A=>A&&clearTimeout(A))}},[o,a]);let d=P.useCallback(()=>{a&&qs({type:6,time:Date.now()})},[a]),p=P.useCallback((x,y)=>{let{reverseOrder:A=!1,gutter:w=8,defaultPosition:E}=y||{},S=o.filter(k=>(k.position||E)===(x.position||E)&&k.height),T=S.findIndex(k=>k.id===x.id),R=S.filter((k,L)=>L<T&&k.visible).length;return S.filter(k=>k.visible).slice(...A?[R+1]:[0,R]).reduce((k,L)=>k+(L.height||0)+w,0)},[o]);return P.useEffect(()=>{o.forEach(x=>{if(x.dismissed)pA(x.id,x.removeDelay);else{let y=Oa.get(x.id);y&&(clearTimeout(y),Oa.delete(x.id))}})},[o]),{toasts:o,handlers:{updateHeight:fA,startPause:dA,endPause:d,calculateOffset:p}}},mA=Bi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,xA=Bi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,yA=Bi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,wA=ms("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${mA} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${xA} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${r=>r.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${yA} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,vA=Bi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,CA=ms("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${r=>r.secondary||"#e0e0e0"};
  border-right-color: ${r=>r.primary||"#616161"};
  animation: ${vA} 1s linear infinite;
`,EA=Bi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,AA=Bi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,SA=ms("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${EA} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${AA} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${r=>r.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,bA=ms("div")`
  position: absolute;
`,TA=ms("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,IA=Bi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,NA=ms("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${IA} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,RA=({toast:r})=>{let{icon:o,type:a,iconTheme:d}=r;return o!==void 0?typeof o=="string"?P.createElement(NA,null,o):o:a==="blank"?null:P.createElement(TA,null,P.createElement(CA,{...d}),a!=="loading"&&P.createElement(bA,null,a==="error"?P.createElement(wA,{...d}):P.createElement(SA,{...d})))},_A=r=>`
0% {transform: translate3d(0,${r*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,OA=r=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${r*-150}%,-1px) scale(.6); opacity:0;}
`,PA="0%{opacity:0;} 100%{opacity:1;}",MA="0%{opacity:1;} 100%{opacity:0;}",DA=ms("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,kA=ms("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,LA=(r,o)=>{let a=r.includes("top")?1:-1,[d,p]=Hm()?[PA,MA]:[_A(a),OA(a)];return{animation:o?`${Bi(d)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Bi(p)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},BA=P.memo(({toast:r,position:o,style:a,children:d})=>{let p=r.height?LA(r.position||o||"top-center",r.visible):{opacity:0},x=P.createElement(RA,{toast:r}),y=P.createElement(kA,{...r.ariaProps},bu(r.message,r));return P.createElement(DA,{className:r.className,style:{...p,...a,...r.style}},typeof d=="function"?d({icon:x,message:y}):P.createElement(P.Fragment,null,x,y))});iA(P.createElement);var FA=({id:r,className:o,style:a,onHeightUpdate:d,children:p})=>{let x=P.useCallback(y=>{if(y){let A=()=>{let w=y.getBoundingClientRect().height;d(r,w)};A(),new MutationObserver(A).observe(y,{subtree:!0,childList:!0,characterData:!0})}},[r,d]);return P.createElement("div",{ref:x,className:o,style:a},p)},jA=(r,o)=>{let a=r.includes("top"),d=a?{top:0}:{bottom:0},p=r.includes("center")?{justifyContent:"center"}:r.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Hm()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${o*(a?1:-1)}px)`,...d,...p}},VA=Du`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,au=16,UA=({reverseOrder:r,position:o="top-center",toastOptions:a,gutter:d,children:p,containerStyle:x,containerClassName:y})=>{let{toasts:A,handlers:w}=gA(a);return P.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:au,left:au,right:au,bottom:au,pointerEvents:"none",...x},className:y,onMouseEnter:w.startPause,onMouseLeave:w.endPause},A.map(E=>{let S=E.position||o,T=w.calculateOffset(E,{reverseOrder:r,gutter:d,defaultPosition:o}),R=jA(S,T);return P.createElement(FA,{id:E.id,key:E.id,onHeightUpdate:w.updateHeight,className:E.visible?VA:"",style:R},E.type==="custom"?bu(E.message,E):p?p(E):P.createElement(BA,{toast:E,position:S}))}))},pu=dr;const Tf=({direction:r="down",show:o=!0,className:a="",style:d={}})=>{if(!o)return null;const p=r==="down"?"rotate(180 16 16)":"";return N.jsxs("div",{className:`arrow-hint-container ${r} ${a}`,style:d,children:[N.jsx("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"arrow-hint-svg",children:N.jsxs("g",{transform:p,children:[N.jsx("path",{d:"M16 6v16M16 22l-7-7M16 22l7-7",stroke:"url(#arrow-gradient)",strokeWidth:"3.2",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#arrow-glow)"}),N.jsxs("defs",{children:[N.jsxs("linearGradient",{id:"arrow-gradient",x1:"16",y1:"6",x2:"16",y2:"22",gradientUnits:"userSpaceOnUse",children:[N.jsx("stop",{stopColor:"#7f5fff"}),N.jsx("stop",{offset:"0.5",stopColor:"#2e8bff"}),N.jsx("stop",{offset:"1",stopColor:"#00e0ff"})]}),N.jsx("filter",{id:"arrow-glow",x:"-10",y:"-10",width:"52",height:"52",filterUnits:"userSpaceOnUse",children:N.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"2.5",floodColor:"#7f5fff",floodOpacity:"0.5"})})]})]})}),N.jsx("div",{className:"arrow-hint-text",children:"Tap Here"})]})},zA=({isOpen:r,onClose:o,onConfirm:a,userName:d})=>r?N.jsx("div",{className:"kick-modal",children:N.jsxs("div",{className:"kick-modal-content",children:[N.jsx("h2",{className:"kick-modal-title",children:"Kick User"}),N.jsxs("p",{className:"kick-modal-message",children:["Are you sure you want to kick ",d," from the lobby?"]}),N.jsxs("div",{className:"kick-modal-actions",children:[N.jsx("button",{onClick:a,className:"admin-button admin-button-danger",children:"Yes, Kick User"}),N.jsx("button",{onClick:o,className:"admin-button admin-button-primary",children:"Cancel"})]})]})}):null,WA=({isOpen:r,onClose:o,onConfirm:a})=>r?N.jsx("div",{className:"join-modal",children:N.jsxs("div",{className:"join-modal-content",children:[N.jsx("h2",{className:"join-modal-title",children:"Join Lobby"}),N.jsx("p",{className:"join-modal-message",children:"Are you sure you want to join? You will be paired up with your attendees."}),N.jsxs("div",{className:"join-modal-actions",children:[N.jsx("button",{onClick:a,className:"admin-button admin-button-join",children:"Yes, Join Lobby"}),N.jsx("button",{onClick:o,className:"admin-button admin-button-primary",children:"Cancel"})]})]})}):null,HA=({lobbyState:r,playerCount:o,onStart:a,onEnd:d,lobbyCode:p,currentRound:x})=>{const y=r==="checkin",A=o>=2&&r==="checkin",w=r==="active",E=r==="active",S=r==="terminated",[T,R]=P.useState(null),[k,L]=P.useState({code:!1,qr:!1}),[j,B]=P.useState(!1),U=()=>{R("start")},H=()=>{R("end")},W=()=>{B(!0),R("checkin")},ee=()=>{T==="start"?(a(),pu.success("Rounds started!",{position:"top-center"})):T==="end"&&d(),R(null)},ce=()=>R(null),ie=(Oe,Le)=>Oe?"progress-arrow active-shimmer":Le?"progress-arrow available-shimmer":"progress-arrow inactive",Q=y&&!j&&o<6,ue=r==="checkin"&&o>=6,q=r==="active"&&x+1>=12,Re=()=>{const Oe=document.getElementById("modal-qr-svg");if(!Oe)return;const J=new XMLSerializer().serializeToString(Oe),we=new window.Image,oe=512,fe=document.createElement("canvas");fe.width=oe,fe.height=oe;const pe=fe.getContext("2d");we.onload=()=>{pe.clearRect(0,0,oe,oe),pe.drawImage(we,0,0,oe,oe),fe.toBlob(ge=>{navigator.clipboard&&navigator.clipboard.write?navigator.clipboard.write([new window.ClipboardItem({"image/png":ge})]).then(()=>{L(Z=>({...Z,qr:!0})),setTimeout(()=>L(Z=>({...Z,qr:!1})),800)}).catch(()=>{je(ge)}):je(ge)},"image/png")},we.onerror=()=>alert("Failed to render QR code image."),we.src="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(J)))};function je(Oe){const Le=URL.createObjectURL(Oe),J=document.createElement("a");J.href=Le,J.download=`reuneo-lobby-${p}.png`,document.body.appendChild(J),J.click(),document.body.removeChild(J),URL.revokeObjectURL(Le),L(we=>({...we,qr:!0})),setTimeout(()=>L(we=>({...we,qr:!1})),800)}const be=()=>{navigator.clipboard.writeText(p),L(Oe=>({...Oe,code:!0})),setTimeout(()=>L(Oe=>({...Oe,code:!1})),800)};return N.jsxs("div",{className:"lobby-progress-bar",style:{marginTop:"-1rem",height:"40px"},children:[N.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[N.jsx("div",{className:ie(y,!1),tabIndex:0,title:"Check-in phase",onClick:W,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"Start Checkin"}),N.jsx(Tf,{direction:"down",show:Q})]}),N.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[N.jsx("div",{className:ie(w,A&&!w),tabIndex:0,title:A?"Start rounds":"At least 2 players required",onClick:U,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"Start Rounds"}),N.jsx(Tf,{direction:"down",show:ue})]}),N.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[N.jsx("div",{className:ie(S,E&&!S),tabIndex:0,title:E?"End rounds":"Cannot end yet",onClick:H,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"End Rounds"}),N.jsx(Tf,{direction:"down",show:q})]}),T&&N.jsx("div",{className:"progress-modal-overlay",children:N.jsx("div",{className:"progress-modal",children:T==="checkin"?N.jsxs(N.Fragment,{children:[N.jsx("div",{className:"progress-modal-title",children:"Have your attendees scan the QR code to join your lobby"}),N.jsx("div",{className:"progress-modal-message",children:"You can start when you have 6-10 people, don't worry new people can join in the next rounds."}),N.jsxs("div",{className:"progress-modal-qr",onClick:Re,style:{cursor:"pointer",position:"relative"},children:[N.jsx(Vd,{value:`${window.location.origin}/lobby?code=${p}`,size:200,level:"H",includeMargin:!1,bgColor:"#ffffff",fgColor:"#144dff",id:"modal-qr-svg"}),N.jsx("span",{className:"copy-icon modal-copy-icon","aria-label":"Copy",style:{position:"absolute",right:8,bottom:8,background:"#fff",borderRadius:"50%",padding:"2px"},children:N.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[N.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),N.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})}),k.qr&&N.jsx("span",{className:"modal-copied-feedback",style:{position:"absolute",left:"50%",bottom:"-1.5rem",transform:"translateX(-50%)",color:"#28a745",fontWeight:600,fontSize:"0.95rem"},children:"Copied!"})]}),N.jsxs("div",{className:`progress-modal-lobbycode${k.code?" copied":""}`,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[N.jsxs("b",{children:["lobby code: ",p]}),N.jsx("span",{className:"copy-icon modal-copy-icon","aria-label":"Copy",onClick:be,style:{cursor:"pointer"},children:N.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[N.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),N.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})}),k.code&&N.jsx("span",{className:"modal-copied-feedback",style:{color:"#28a745",fontWeight:600,fontSize:"0.95rem"},children:"Copied!"})]}),N.jsx("div",{className:"progress-modal-actions",children:N.jsx("button",{className:"progress-modal-btn confirm",onClick:ce,children:"Got it"})})]}):N.jsxs(N.Fragment,{children:[N.jsx("div",{className:"progress-modal-title",children:T==="start"?"Are you sure you want to start rounds?":"Are you sure you want to end the rounds?"}),N.jsx("div",{className:"progress-modal-actions",children:T==="start"?N.jsxs(N.Fragment,{children:[N.jsx("button",{className:"progress-modal-btn cancel",onClick:ce,children:"Not Yet"}),N.jsx("button",{className:"progress-modal-btn confirm",onClick:ee,children:"Start"})]}):N.jsxs(N.Fragment,{children:[N.jsx("button",{className:"progress-modal-btn cancel",onClick:ce,children:"Keep Going"}),N.jsx("button",{className:"progress-modal-btn confirm danger",onClick:ee,children:"End"})]})})]})})})]})},GA=({players:r})=>{const o=[...r.pairedPlayers?r.pairedPlayers.flat():[],...r.lobbyData?r.lobbyData:[]],a=10,d=o.slice(0,a),p=o.length-a,x=o.length;return N.jsxs("div",{className:"overlapping-profile-list-wrapper",style:{marginTop:"3rem"},children:[N.jsxs("div",{className:"overlapping-profile-list",children:[d.map((y,A)=>N.jsx("img",{src:y.pfp_data||"/assets/player_icon_trans.png",alt:y.name||"Player",className:"overlapping-profile-img",style:{zIndex:A+1}},y.username||y.name||A)),p>0&&N.jsxs("span",{className:"overlapping-profile-overflow",children:["+ ",p]})]}),N.jsxs("div",{className:"overlapping-profile-list-label",style:{marginTop:"0.5rem",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.1)"},children:["People joined: ",x]})]})},XA=()=>{const{user:r,userProfile:o,checkAuth:a,permissions:d}=P.useContext(zr),p=Wr(),x=xi(),A=new URLSearchParams(x.search).get("code"),[w,E]=P.useState(A||"test");P.useEffect(()=>{A||(console.log("No lobby code found in URL, using default 'test' value"),(async()=>{try{const at=localStorage.getItem("access_token"),Je=await fetch(window.server_url+"/view_my_active_lobbies",{headers:{Authorization:`Bearer ${at}`}});if(Je.ok){const ct=await Je.json();if(console.log("Active lobbies response:",ct),ct&&ct.lobbies&&ct.lobbies.length>0){const Ve=ct.lobbies[0];E(Ve),window.history.replaceState({},"",`/admin_lobby_view?code=${Ve}`)}}}catch(at){console.error("Error fetching active lobby:",at)}})())},[A]);const[S,T]=P.useState(!1),[R,k]=P.useState(null),[L,j]=P.useState(!1),[B,U]=P.useState(null),[H,W]=P.useState(null),[ee,ce]=P.useState(null),[ie,Q]=P.useState(null),[ue,q]=P.useState(null),[Re,je]=P.useState({}),[be,Oe]=P.useState([]),[Le,J]=P.useState(0),we=((H==null?void 0:H.length)||0)+((B==null?void 0:B.length)*2||0),[oe,fe]=P.useState(!1);P.useEffect(()=>{if(a(),d!=="admin"&&d!=="organizer"){p("/");return}const Ne=async Je=>{if(Re[Je])return Re[Je];try{const ct=await fetch(`${window.server_url}/pfp_small_icon?username=${encodeURIComponent(Je)}`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(ct.ok){let Ve=await ct.text();Ve.startsWith('"')&&Ve.endsWith('"')&&(Ve=Ve.slice(1,-1));const qt=Ve.startsWith("data:image")?Ve:`data:image/jpeg;base64,${Ve}`;return je(Ot=>({...Ot,[Je]:qt})),qt}return null}catch(ct){return console.error(`Error fetching profile picture for ${Je}:`,ct),null}},at=setInterval(async()=>{try{const Je=await fetch(window.server_url+"/admin_lobby_data",{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,lobby_code:w}});if(Je.ok){const ct=await Je.json();if(console.log("Admin lobby data:",w,ct),ct.lobby_state==="active"&&J(Ve=>ct.current_round>Ve?ct.current_round:Ve),ct.lobby_state==="terminated"&&J(0),ct&&ct.unpaired_players){const Ve=await Promise.all(ct.unpaired_players.map(async Ot=>{const En=await Ne(Ot.username);return{...Ot,pfp_data:En}})),qt=await Promise.all((ct.pairs_data||[]).map(async Ot=>{const En=await Ne(Ot[0].username),Vt=await Ne(Ot[1].username);return[{...Ot[0],pfp_data:En},{...Ot[1],pfp_data:Vt}]}));W(Ve),U(qt),ce(ct.round_time_left),Q(ct.lobby_state),q(ct.lobby_duration||300),Oe(ct.custom_tags||[])}else console.error("Invalid lobby data structure:",ct),W([]),U([])}else console.error("Failed to fetch admin lobby data:",Je.status)}catch(Je){console.error("Error fetching admin lobby data:",Je)}},1e3);return()=>clearInterval(at)},[Re]);const pe=Ne=>{k(Ne),T(!0)},ge=()=>{T(!1),k(null)},Z=()=>{R&&fetch(window.server_url+"/kick_user",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"},body:JSON.stringify({username:R.username,lobby_code:w})}).then(Ne=>{Ne.ok?console.log(`User ${R.name} kicked successfully`):console.error(`Failed to kick user ${R.name}`)}).catch(Ne=>{console.error("Error kicking user:",Ne)}).finally(()=>{ge()})},de=()=>{j(!0)},We=()=>{j(!1)},Ue=()=>{p(`/lobby?code=${w}`),We()};async function ut(){const Ne=document.getElementById("admin-qr-svg");if(!Ne)return;const Je=new XMLSerializer().serializeToString(Ne),ct=new window.Image,Ve=512,qt=document.createElement("canvas");qt.width=Ve,qt.height=Ve;const Ot=qt.getContext("2d");ct.onload=()=>{Ot.clearRect(0,0,Ve,Ve),Ot.drawImage(ct,0,0,Ve,Ve),qt.toBlob(En=>{navigator.clipboard&&navigator.clipboard.write?navigator.clipboard.write([new window.ClipboardItem({"image/png":En})]).then(()=>{pu.success("QR code copied to clipboard!")}).catch(()=>{ve(En)}):ve(En)},"image/png")},ct.onerror=()=>pu.error("Failed to generate QR code image."),ct.src="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(Je)))}function ve(Ne){const at=URL.createObjectURL(Ne),Je=document.createElement("a");Je.href=at,Je.download=`reuneo-lobby-${w}.png`,document.body.appendChild(Je),Je.click(),document.body.removeChild(Je),URL.revokeObjectURL(at),pu.success("QR code downloaded!")}const et=async()=>{await fetch(window.server_url+"/start_rounds",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,lobby_code:w}})},Te=async()=>{(await fetch(window.server_url+"/terminate_lobby",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,lobby_code:w}})).ok&&p("/")};return N.jsxs(N.Fragment,{children:[N.jsx(UA,{position:"top-center"}),N.jsxs("div",{className:"admin-lobby-container",children:[N.jsx("div",{className:"admin-view-logo",style:{cursor:"pointer"},children:N.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Reuneo Logo",style:{maxWidth:"85px",height:"auto",objectFit:"contain",transition:"transform 0.3s ease"},onClick:()=>p("/")})}),N.jsx(HA,{lobbyState:ie,playerCount:we,onStart:et,onEnd:Te,lobbyCode:w,currentRound:Le}),N.jsx(GA,{players:{pairedPlayers:B,lobbyData:H}}),N.jsxs("div",{className:"admin-lobby-dropdown-toggle",onClick:()=>fe(Ne=>!Ne),style:{cursor:"pointer",background:"var(--primary-color)",color:"#f5f7ff",fontWeight:700,textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",fontSize:".75rem",borderRadius:oe?"14px 14px 0 0":"14px",padding:"0.5rem 1rem",margin:"0 auto",maxWidth:420,boxShadow:"0 2px 8px rgba(20,77,255,0.08)",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s",letterSpacing:"0.5px"},children:[oe?"Hide Controls":"More Controls",N.jsx("span",{style:{marginLeft:12,fontSize:"1.2em",transition:"transform 0.3s",display:"inline-block",transform:oe?"rotate(180deg)":"rotate(0deg)"},children:""})]}),N.jsxs("div",{className:"admin-lobby-body",style:{maxHeight:oe?1e3:0,overflow:"hidden",transition:"max-height 0.5s cubic-bezier(0.4,0,0.2,1)",opacity:oe?1:0,pointerEvents:oe?"auto":"none",marginBottom:oe?"2rem":0},children:[N.jsxs("div",{className:"admin-lobby-qr",onClick:ut,style:{cursor:"pointer"},children:[N.jsxs("span",{className:"qr-label",style:{display:"flex",alignItems:"center",gap:"0.4rem",marginBottom:"0.5rem"},children:["People scan to join",N.jsx("span",{className:"copy-icon","aria-label":"Copy",children:N.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[N.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),N.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})})]}),N.jsx("div",{style:{position:"relative",display:"inline-block"},children:N.jsx(Vd,{value:`${window.location.origin}/lobby?code=${w}`,size:140,level:"H",includeMargin:!1,bgColor:"#ffffff",fgColor:"#144dff",id:"admin-qr-svg"})}),N.jsxs("div",{className:"lobby-code-display",onClick:()=>{navigator.clipboard.writeText(w);const Ne=document.querySelector(".lobby-code-display");Ne.classList.add("copied"),setTimeout(()=>Ne.classList.remove("copied"),250)},children:[N.jsx("span",{className:"lobby-code-label",children:"lobby code:"}),N.jsx("span",{className:"lobby-code-value",children:w}),N.jsx("span",{className:"copy-icon","aria-label":"Copy",children:N.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[N.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),N.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})})]})]}),N.jsxs("div",{className:"admin-lobby-event-settings",children:[N.jsxs("div",{className:"admin-profile",children:[N.jsx("img",{src:o!=null&&o.image_data?`data:image/jpeg;base64,${o.image_data}`:"/assets/player_icon_trans.png",alt:"Your Profile",className:"admin-profile-picture"}),N.jsx("span",{className:"admin-profile-name",children:o!=null&&o.name?o.name.slice(0,20):r==null?void 0:r.slice(0,20)})]}),N.jsx("button",{onClick:de,className:"page-control-button page-control-join",style:{marginTop:".5rem"},children:"Join Rounds"}),N.jsxs("div",{className:"setting-item",style:{padding:"1rem"},children:[N.jsxs("span",{className:"setting-label",children:["Round Duration: ",N.jsxs("span",{className:"setting-value",children:[Math.floor(ue/60)," min"]})]}),N.jsx("span",{className:"setting-label",style:{},children:"Tags:"}),be&&be.length>0&&N.jsx("div",{className:"setting-item",children:N.jsxs("div",{className:"tags-container",children:[be.slice(0,3).map((Ne,at)=>N.jsx("span",{className:"tag-pill",children:Ne},at)),be.length>3&&N.jsxs("span",{className:"tag-pill more-tags",children:["+",be.length-3," more"]})]})})]})]}),N.jsx("div",{className:"admin-lobby-actions"})]}),(ie==="active"||ie==="interrim")&&ee&&N.jsx("div",{className:"admin-lobby-timer-container",children:N.jsxs("div",{className:"admin-lobby-timer-glass",children:[N.jsx(Ud,{isPlaying:ie==="active",duration:ue,initialRemainingTime:ee,colors:["#144dff"],size:90,strokeWidth:12,trailColor:"url(#trailGradient)",onComplete:()=>({shouldRepeat:!1}),strokeLinecap:"round",children:({remainingTime:Ne})=>{const at=Math.floor(Ne/60),Je=Math.floor(Ne%60);return N.jsxs("span",{className:`timer-text ${Ne<=10?"timer-text-fadescale":""}`,children:[at,":",String(Je).padStart(2,"0")]})}},`${ie}-${Math.floor(ee)}`),N.jsx("span",{className:"timer-subtext",children:"round time left"}),N.jsx("svg",{width:"0",height:"0",children:N.jsx("defs",{children:N.jsxs("linearGradient",{id:"trailGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[N.jsx("stop",{offset:"0%",stopColor:"#e0e7ff"}),N.jsx("stop",{offset:"100%",stopColor:"#f5f7ff"})]})})})]})}),ie!=="checkin"&&N.jsxs("div",{className:"admin-lobby-stats",children:[N.jsxs("div",{className:"stat-card",children:[N.jsx("div",{className:"stat-title",children:"Total Players"}),N.jsx("div",{className:"stat-value",children:((H==null?void 0:H.length)||0)+((B==null?void 0:B.length)*2||0)})]}),N.jsxs("div",{className:"stat-card",children:[N.jsx("div",{className:"stat-title",children:"Paired Players"}),N.jsx("div",{className:"stat-value",children:(B==null?void 0:B.length)*2||0})]}),N.jsxs("div",{className:"stat-card",children:[N.jsx("div",{className:"stat-title",children:"Unpaired Players"}),N.jsx("div",{className:"stat-value",children:(H==null?void 0:H.length)||0})]})]}),B&&ie!=="checkin"&&N.jsx("div",{className:"admin-lobby-players",children:N.jsxs("div",{className:"player-section",children:[N.jsxs("div",{className:"section-header",children:["Paired Players: ",N.jsx("span",{className:"stat-value",style:{fontSize:"1.3rem"},children:(B==null?void 0:B.length)*2||0})]}),N.jsx("div",{className:"player-grid",children:B.map((Ne,at)=>N.jsxs("div",{className:"paired-player-card",children:[N.jsxs("div",{className:"paired-player",onClick:()=>pe(Ne[0]),children:[N.jsx("img",{src:Ne[0].pfp_data,alt:Ne[0].name,className:"paired-player-avatar"}),N.jsx("h3",{className:"paired-player-name",children:Ne[0].name})]}),N.jsxs("div",{className:"paired-player",onClick:()=>pe(Ne[1]),children:[N.jsx("img",{src:Ne[1].pfp_data,alt:Ne[1].name,className:"paired-player-avatar"}),N.jsx("h3",{className:"paired-player-name",children:Ne[1].name})]})]},at))})]})}),H&&N.jsx("div",{className:"admin-lobby-players",children:N.jsxs("div",{className:"player-section",children:[N.jsxs("div",{className:"section-header",children:[ie==="checkin"?"People Joined":"Unpaired Players",": ",N.jsx("span",{className:"stat-value",style:{fontSize:"1.3rem"},children:(H==null?void 0:H.length)||0})]}),N.jsx("div",{className:"player-grid",children:H.map((Ne,at)=>N.jsxs("div",{className:"player-card",onClick:()=>pe(Ne),children:[N.jsx("img",{src:Ne.pfp_data,alt:Ne.name,className:"player-avatar"}),N.jsx("h3",{className:"player-name",children:Ne.name})]},at))})]})}),N.jsx(WA,{isOpen:L,onClose:We,onConfirm:Ue}),N.jsx(zA,{isOpen:S,onClose:ge,onConfirm:Z,userName:(R==null?void 0:R.name)||"this user"})]})]})},YA=()=>{const r=Wr(),{user:o}=P.useContext(zr),a=()=>{window.location.href="https://reunio.app/become-an-organizer"};return N.jsxs("div",{className:"product-selection-container",children:[N.jsxs("video",{className:"background-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,children:[N.jsx("source",{src:"/assets/purchase_plan_video.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]}),N.jsxs("div",{className:"product-selection-content",children:[N.jsx("div",{className:"product-selection-header",children:N.jsx("h1",{children:"Product Selection"})}),N.jsxs("div",{className:"plans-section",children:[N.jsx("h2",{children:"Available Plans"}),N.jsxs("div",{className:"plan-card",children:[N.jsx("h3",{children:"Organizer Plan"}),N.jsxs("div",{className:"plan-description",children:[N.jsx("p",{children:"Create experiences for your community with our beta plan."}),N.jsxs("ul",{children:[N.jsx("li",{children:"Create unlimited experiences"}),N.jsx("li",{children:"Access to organizer dashboard"}),N.jsx("li",{children:"Priority customer support"})]})]}),N.jsx("button",{className:"purchase-button",onClick:a,children:"Contact Us"})]})]}),N.jsx("button",{className:"back-button",onClick:()=>r("/"),children:"Home"})]})]})},KA=()=>{const{user:r,userProfile:o,checkAuth:a,permissions:d}=P.useContext(zr),[p,x]=P.useState(""),[y,A]=P.useState(""),[w,E]=P.useState(!1),[S,T]=P.useState(""),[R,k]=P.useState(!1),[L,j]=P.useState([]),[B,U]=P.useState(""),[H,W]=P.useState("5"),[ee,ce]=P.useState("0"),[ie,Q]=P.useState(!1),ue=Wr(),q=P.useRef(null);P.useEffect(()=>{window.scrollTo(0,0),r&&(x(r),A(r)),q.current&&q.current.focus()},[r]);const Re=we=>{const oe=/^[a-z0-9]+$/;return we.length>=2&&oe.test(we)},je=we=>{const oe=we.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");A(oe),k(!0),setTimeout(()=>{k(!1)},500)},be=()=>{B.trim()&&!L.includes(B.trim())&&(j([...L,B.trim()]),U(""))},Oe=we=>{j(L.filter(oe=>oe!==we))},Le=we=>{we.key==="Enter"&&B.trim()&&(we.preventDefault(),be())},J=async we=>{if(we.preventDefault(),!Re(y)){T("Lobby code must be at least 2 characters long and contain only lowercase letters and numbers");return}E(!0),T("");const oe=parseInt(H)*60+parseInt(ee);try{const fe=await fetch(window.server_url+"/create_lobby",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"},body:JSON.stringify({lobby_code:y,custom_tags:L,lobby_duration:oe,show_table_numbers:ie})});if(fe.ok)console.log("Lobby created successfully"),console.log(await fe.json()),ue(`/admin_lobby_view?code=${y}`);else{const pe=await fe.json();T(pe.message||"Failed to create lobby"),console.error("Failed to create lobby")}}catch(fe){T("An error occurred while creating the lobby"),console.error("Error creating lobby:",fe)}finally{E(!1)}};return N.jsxs("div",{className:"create-lobby-background",children:[N.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Reunio Logo",className:"logo-image",onClick:()=>ue(-1)}),N.jsxs("div",{className:"create-lobby-container",children:[N.jsx("h1",{className:"create-lobby-title",children:"Create a New Lobby"}),N.jsxs("form",{onSubmit:J,className:"create-lobby-form",children:[N.jsxs("div",{className:"form-group",children:[N.jsx("label",{htmlFor:"lobbyCode",children:"Lobby Code"}),N.jsx("input",{ref:q,type:"text",id:"lobbyCode",value:y,onChange:je,placeholder:"Enter lobby code (lowercase letters and numbers only)",required:!0,className:`form-input ${R?"typing":""}`,autoComplete:"off"}),N.jsx("div",{className:"input-hint",children:"lowercase letters and numbers only"})]}),N.jsxs("div",{className:"form-group",children:[N.jsx("label",{children:"Round Duration"}),N.jsxs("div",{className:"duration-input-container",children:[N.jsxs("div",{className:"duration-input-group",children:[N.jsx("input",{type:"number",id:"minutes",value:H,onChange:we=>{const oe=we.target.value;(oe===""||parseInt(oe)>0&&parseInt(oe)<=5)&&(W(oe),parseInt(oe)===5&&ce("0"))},min:"1",max:"5",placeholder:"1-5",className:"form-input duration-input",autoComplete:"off"}),N.jsx("label",{htmlFor:"minutes",className:"duration-label",children:"Minutes"})]}),N.jsxs("div",{className:"duration-input-group",children:[N.jsx("input",{type:"number",id:"seconds",value:ee,onChange:we=>{const oe=we.target.value;(oe===""||parseInt(oe)>=0&&parseInt(oe)<=59)&&ce(oe)},min:"0",max:"59",placeholder:"0-59",className:"form-input duration-input",autoComplete:"off",disabled:parseInt(H)===5}),N.jsx("label",{htmlFor:"seconds",className:"duration-label",children:"Seconds"})]})]}),N.jsx("div",{className:"input-hint",children:"Maximum total duration is 5 minutes"})]}),N.jsxs("div",{className:"form-group",children:[N.jsx("label",{htmlFor:"showTableNumbers",children:"Table Numbers"}),N.jsx("input",{type:"checkbox",id:"showTableNumbers",checked:ie,onChange:we=>Q(we.target.checked),className:"form-input checkbox-input"}),N.jsx("div",{className:"input-hint",children:"Recommended for events with 50+ people"})]}),N.jsxs("div",{className:"form-group",children:[N.jsx("label",{htmlFor:"tagInput",children:"Matchmaking Tags"}),N.jsxs("div",{className:"tag-input-container",children:[N.jsx("input",{type:"text",id:"tagInput",value:B,onChange:we=>U(we.target.value),onKeyDown:Le,placeholder:"Add tags (press + to add)",className:"form-input",autoComplete:"off"}),N.jsx("button",{type:"button",onClick:be,className:"tag-add-button",children:"+"})]}),L.length>0&&N.jsx("div",{className:"tag-list",children:L.map((we,oe)=>N.jsxs("div",{className:"tag-item",children:[we,N.jsx("button",{type:"button",onClick:()=>Oe(we),className:"tag-remove-button",children:""})]},oe))}),N.jsx("div",{className:"input-hint",children:"If you want to match people based on role/interests"})]}),S&&N.jsx("div",{className:"error-message",children:S}),N.jsx("button",{type:"submit",className:"submit-button",disabled:w,children:w?"Creating...":"Create Lobby"})]})]})]})},ZA=5e3,$A=()=>{const{checkAuth:r,permissions:o,user:a}=P.useContext(zr),d=Wr(),[p,x]=P.useState([]),[y,A]=P.useState(!0),[w,E]=P.useState(null),[S,T]=P.useState(!1);return P.useEffect(()=>{r()},[r]),P.useEffect(()=>{a==="topaz"&&o==="admin"?T(!0):o!==null&&a!==null&&d("/")},[o,a,d]),P.useEffect(()=>{if(!S)return;let R=!0,k,L=!0;const j=async()=>{L&&A(!0),E(null);try{const B=localStorage.getItem("access_token");if(!B)return;const U=await fetch(window.server_url+"/admin_all_lobbies",{headers:{Authorization:`Bearer ${B}`}});if(!U.ok)throw new Error("Failed to fetch lobbies");const H=await U.json();if(H.status!=="success"||!Array.isArray(H.lobbies))throw new Error("Invalid response format");if(!R)return;x(H.lobbies),console.log("Received lobbies data:",H.lobbies)}catch(B){R&&E(B.message||"Error fetching lobbies")}finally{R&&L&&A(!1),L=!1,k=setTimeout(j,ZA)}};return j(),()=>{R=!1,k&&clearTimeout(k)}},[S]),y?N.jsx("div",{className:"master-lobby-container",children:N.jsxs("div",{className:"loading-state",children:[N.jsx("div",{className:"loading-spinner"}),N.jsx("p",{children:"Loading lobbies..."})]})}):w&&p.length===0?N.jsx("div",{className:"master-lobby-container",children:N.jsx("div",{className:"error-state",children:N.jsx("p",{children:w})})}):p.length===0?N.jsx("div",{className:"master-lobby-container",children:N.jsx("div",{className:"empty-state",children:N.jsx("p",{children:"No active lobbies found"})})}):N.jsxs("div",{className:"master-lobby-container",children:[w&&N.jsxs("div",{className:"error-banner",style:{backgroundColor:"#f8d7da",color:"#721c24",padding:"0.75rem",marginBottom:"1rem",borderRadius:"0.25rem",border:"1px solid #f5c6cb"},children:[w," (showing last known data)"]}),N.jsx("div",{className:"master-lobby-grid",children:p.map(R=>N.jsx("div",{className:"lobby-tile",children:N.jsxs("div",{className:"lobby-tile-content",children:[N.jsx("h3",{className:"lobby-code",children:R.code}),N.jsxs("div",{className:"lobby-stats",children:[N.jsxs("span",{className:"player-count",children:[R.player_count," players"]}),N.jsx("span",{className:"lobby-state",children:R.lobby_state})]}),N.jsxs("div",{style:{fontSize:"0.7rem",color:"#666",marginTop:"0.5rem"},children:["Debug: player_count=",R.player_count,", lobby_state=",R.lobby_state]})]})},R.code))})]})};Gx.createRoot(document.getElementById("root")).render(N.jsx(P.StrictMode,{children:N.jsx(Xx,{children:N.jsxs(_y,{basename:"/",children:[N.jsx(TE,{}),N.jsxs(oy,{children:[N.jsx(ui,{path:"/",element:N.jsx(bE,{})}),N.jsx(ui,{path:"/login",element:N.jsx(IE,{})}),N.jsx(ui,{path:"/signup",element:N.jsx(AE,{})}),N.jsx(ui,{path:"/logout",element:N.jsx(NE,{})}),N.jsx(ui,{path:"/lobby",element:N.jsx(qE,{})}),N.jsx(ui,{path:"/admin_lobby_view",element:N.jsx(XA,{})}),N.jsx(ui,{path:"/create_lobby",element:N.jsx(KA,{})}),N.jsx(ui,{path:"/product-selection",element:N.jsx(YA,{})}),N.jsx(ui,{path:"/master_lobby_view",element:N.jsx($A,{})})]})]})})}));
