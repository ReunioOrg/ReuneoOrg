(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))f(p);new MutationObserver(p=>{for(const y of p)if(y.type==="childList")for(const w of y.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&f(w)}).observe(document,{childList:!0,subtree:!0});function a(p){const y={};return p.integrity&&(y.integrity=p.integrity),p.referrerPolicy&&(y.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?y.credentials="include":p.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function f(p){if(p.ep)return;p.ep=!0;const y=a(p);fetch(p.href,y)}})();var ec=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $p(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var od={exports:{}},Sa={},ad={exports:{}},Ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e1;function t2(){if(e1)return Ot;e1=1;var r=Symbol.for("react.element"),o=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),w=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),N=Symbol.iterator;function R(Z){return Z===null||typeof Z!="object"?null:(Z=N&&Z[N]||Z["@@iterator"],typeof Z=="function"?Z:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,B={};function j(Z,G,we){this.props=Z,this.context=G,this.refs=B,this.updater=we||M}j.prototype.isReactComponent={},j.prototype.setState=function(Z,G){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,G,"setState")},j.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function U(){}U.prototype=j.prototype;function W(Z,G,we){this.props=Z,this.context=G,this.refs=B,this.updater=we||M}var F=W.prototype=new U;F.constructor=W,L(F,j.prototype),F.isPureReactComponent=!0;var q=Array.isArray,ee=Object.prototype.hasOwnProperty,re={current:null},X={key:!0,ref:!0,__self:!0,__source:!0};function le(Z,G,we){var be,ge={},ie=null,ze=null;if(G!=null)for(be in G.ref!==void 0&&(ze=G.ref),G.key!==void 0&&(ie=""+G.key),G)ee.call(G,be)&&!X.hasOwnProperty(be)&&(ge[be]=G[be]);var ve=arguments.length-2;if(ve===1)ge.children=we;else if(1<ve){for(var Be=Array(ve),nt=0;nt<ve;nt++)Be[nt]=arguments[nt+2];ge.children=Be}if(Z&&Z.defaultProps)for(be in ve=Z.defaultProps,ve)ge[be]===void 0&&(ge[be]=ve[be]);return{$$typeof:r,type:Z,key:ie,ref:ze,props:ge,_owner:re.current}}function te(Z,G){return{$$typeof:r,type:Z.type,key:G,ref:Z.ref,props:Z.props,_owner:Z._owner}}function ke(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===r}function Le(Z){var G={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(we){return G[we]})}var Se=/\/+/g;function Ne(Z,G){return typeof Z=="object"&&Z!==null&&Z.key!=null?Le(""+Z.key):G.toString(36)}function Ee(Z,G,we,be,ge){var ie=typeof Z;(ie==="undefined"||ie==="boolean")&&(Z=null);var ze=!1;if(Z===null)ze=!0;else switch(ie){case"string":case"number":ze=!0;break;case"object":switch(Z.$$typeof){case r:case o:ze=!0}}if(ze)return ze=Z,ge=ge(ze),Z=be===""?"."+Ne(ze,0):be,q(ge)?(we="",Z!=null&&(we=Z.replace(Se,"$&/")+"/"),Ee(ge,G,we,"",function(nt){return nt})):ge!=null&&(ke(ge)&&(ge=te(ge,we+(!ge.key||ze&&ze.key===ge.key?"":(""+ge.key).replace(Se,"$&/")+"/")+Z)),G.push(ge)),1;if(ze=0,be=be===""?".":be+":",q(Z))for(var ve=0;ve<Z.length;ve++){ie=Z[ve];var Be=be+Ne(ie,ve);ze+=Ee(ie,G,we,Be,ge)}else if(Be=R(Z),typeof Be=="function")for(Z=Be.call(Z),ve=0;!(ie=Z.next()).done;)ie=ie.value,Be=be+Ne(ie,ve++),ze+=Ee(ie,G,we,Be,ge);else if(ie==="object")throw G=String(Z),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return ze}function J(Z,G,we){if(Z==null)return Z;var be=[],ge=0;return Ee(Z,be,"","",function(ie){return G.call(we,ie,ge++)}),be}function Ve(Z){if(Z._status===-1){var G=Z._result;G=G(),G.then(function(we){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=we)},function(we){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=we)}),Z._status===-1&&(Z._status=0,Z._result=G)}if(Z._status===1)return Z._result.default;throw Z._result}var ye={current:null},he={transition:null},De={ReactCurrentDispatcher:ye,ReactCurrentBatchConfig:he,ReactCurrentOwner:re};function ce(){throw Error("act(...) is not supported in production builds of React.")}return Ot.Children={map:J,forEach:function(Z,G,we){J(Z,function(){G.apply(this,arguments)},we)},count:function(Z){var G=0;return J(Z,function(){G++}),G},toArray:function(Z){return J(Z,function(G){return G})||[]},only:function(Z){if(!ke(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}},Ot.Component=j,Ot.Fragment=a,Ot.Profiler=p,Ot.PureComponent=W,Ot.StrictMode=f,Ot.Suspense=v,Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=De,Ot.act=ce,Ot.cloneElement=function(Z,G,we){if(Z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Z+".");var be=L({},Z.props),ge=Z.key,ie=Z.ref,ze=Z._owner;if(G!=null){if(G.ref!==void 0&&(ie=G.ref,ze=re.current),G.key!==void 0&&(ge=""+G.key),Z.type&&Z.type.defaultProps)var ve=Z.type.defaultProps;for(Be in G)ee.call(G,Be)&&!X.hasOwnProperty(Be)&&(be[Be]=G[Be]===void 0&&ve!==void 0?ve[Be]:G[Be])}var Be=arguments.length-2;if(Be===1)be.children=we;else if(1<Be){ve=Array(Be);for(var nt=0;nt<Be;nt++)ve[nt]=arguments[nt+2];be.children=ve}return{$$typeof:r,type:Z.type,key:ge,ref:ie,props:be,_owner:ze}},Ot.createContext=function(Z){return Z={$$typeof:w,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Z.Provider={$$typeof:y,_context:Z},Z.Consumer=Z},Ot.createElement=le,Ot.createFactory=function(Z){var G=le.bind(null,Z);return G.type=Z,G},Ot.createRef=function(){return{current:null}},Ot.forwardRef=function(Z){return{$$typeof:S,render:Z}},Ot.isValidElement=ke,Ot.lazy=function(Z){return{$$typeof:A,_payload:{_status:-1,_result:Z},_init:Ve}},Ot.memo=function(Z,G){return{$$typeof:E,type:Z,compare:G===void 0?null:G}},Ot.startTransition=function(Z){var G=he.transition;he.transition={};try{Z()}finally{he.transition=G}},Ot.unstable_act=ce,Ot.useCallback=function(Z,G){return ye.current.useCallback(Z,G)},Ot.useContext=function(Z){return ye.current.useContext(Z)},Ot.useDebugValue=function(){},Ot.useDeferredValue=function(Z){return ye.current.useDeferredValue(Z)},Ot.useEffect=function(Z,G){return ye.current.useEffect(Z,G)},Ot.useId=function(){return ye.current.useId()},Ot.useImperativeHandle=function(Z,G,we){return ye.current.useImperativeHandle(Z,G,we)},Ot.useInsertionEffect=function(Z,G){return ye.current.useInsertionEffect(Z,G)},Ot.useLayoutEffect=function(Z,G){return ye.current.useLayoutEffect(Z,G)},Ot.useMemo=function(Z,G){return ye.current.useMemo(Z,G)},Ot.useReducer=function(Z,G,we){return ye.current.useReducer(Z,G,we)},Ot.useRef=function(Z){return ye.current.useRef(Z)},Ot.useState=function(Z){return ye.current.useState(Z)},Ot.useSyncExternalStore=function(Z,G,we){return ye.current.useSyncExternalStore(Z,G,we)},Ot.useTransition=function(){return ye.current.useTransition()},Ot.version="18.3.1",Ot}var t1;function pf(){return t1||(t1=1,ad.exports=t2()),ad.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n1;function n2(){if(n1)return Sa;n1=1;var r=pf(),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),f=Object.prototype.hasOwnProperty,p=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y={key:!0,ref:!0,__self:!0,__source:!0};function w(S,v,E){var A,N={},R=null,M=null;E!==void 0&&(R=""+E),v.key!==void 0&&(R=""+v.key),v.ref!==void 0&&(M=v.ref);for(A in v)f.call(v,A)&&!y.hasOwnProperty(A)&&(N[A]=v[A]);if(S&&S.defaultProps)for(A in v=S.defaultProps,v)N[A]===void 0&&(N[A]=v[A]);return{$$typeof:o,type:S,key:R,ref:M,props:N,_owner:p.current}}return Sa.Fragment=a,Sa.jsx=w,Sa.jsxs=w,Sa}var r1;function r2(){return r1||(r1=1,od.exports=n2()),od.exports}var x=r2(),I=pf();const sn=$p(I);var tc={},ld={exports:{}},Tr={},cd={exports:{}},ud={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i1;function i2(){return i1||(i1=1,function(r){function o(he,De){var ce=he.length;he.push(De);e:for(;0<ce;){var Z=ce-1>>>1,G=he[Z];if(0<p(G,De))he[Z]=De,he[ce]=G,ce=Z;else break e}}function a(he){return he.length===0?null:he[0]}function f(he){if(he.length===0)return null;var De=he[0],ce=he.pop();if(ce!==De){he[0]=ce;e:for(var Z=0,G=he.length,we=G>>>1;Z<we;){var be=2*(Z+1)-1,ge=he[be],ie=be+1,ze=he[ie];if(0>p(ge,ce))ie<G&&0>p(ze,ge)?(he[Z]=ze,he[ie]=ce,Z=ie):(he[Z]=ge,he[be]=ce,Z=be);else if(ie<G&&0>p(ze,ce))he[Z]=ze,he[ie]=ce,Z=ie;else break e}}return De}function p(he,De){var ce=he.sortIndex-De.sortIndex;return ce!==0?ce:he.id-De.id}if(typeof performance=="object"&&typeof performance.now=="function"){var y=performance;r.unstable_now=function(){return y.now()}}else{var w=Date,S=w.now();r.unstable_now=function(){return w.now()-S}}var v=[],E=[],A=1,N=null,R=3,M=!1,L=!1,B=!1,j=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(he){for(var De=a(E);De!==null;){if(De.callback===null)f(E);else if(De.startTime<=he)f(E),De.sortIndex=De.expirationTime,o(v,De);else break;De=a(E)}}function q(he){if(B=!1,F(he),!L)if(a(v)!==null)L=!0,Ve(ee);else{var De=a(E);De!==null&&ye(q,De.startTime-he)}}function ee(he,De){L=!1,B&&(B=!1,U(le),le=-1),M=!0;var ce=R;try{for(F(De),N=a(v);N!==null&&(!(N.expirationTime>De)||he&&!Le());){var Z=N.callback;if(typeof Z=="function"){N.callback=null,R=N.priorityLevel;var G=Z(N.expirationTime<=De);De=r.unstable_now(),typeof G=="function"?N.callback=G:N===a(v)&&f(v),F(De)}else f(v);N=a(v)}if(N!==null)var we=!0;else{var be=a(E);be!==null&&ye(q,be.startTime-De),we=!1}return we}finally{N=null,R=ce,M=!1}}var re=!1,X=null,le=-1,te=5,ke=-1;function Le(){return!(r.unstable_now()-ke<te)}function Se(){if(X!==null){var he=r.unstable_now();ke=he;var De=!0;try{De=X(!0,he)}finally{De?Ne():(re=!1,X=null)}}else re=!1}var Ne;if(typeof W=="function")Ne=function(){W(Se)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,J=Ee.port2;Ee.port1.onmessage=Se,Ne=function(){J.postMessage(null)}}else Ne=function(){j(Se,0)};function Ve(he){X=he,re||(re=!0,Ne())}function ye(he,De){le=j(function(){he(r.unstable_now())},De)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(he){he.callback=null},r.unstable_continueExecution=function(){L||M||(L=!0,Ve(ee))},r.unstable_forceFrameRate=function(he){0>he||125<he?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<he?Math.floor(1e3/he):5},r.unstable_getCurrentPriorityLevel=function(){return R},r.unstable_getFirstCallbackNode=function(){return a(v)},r.unstable_next=function(he){switch(R){case 1:case 2:case 3:var De=3;break;default:De=R}var ce=R;R=De;try{return he()}finally{R=ce}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(he,De){switch(he){case 1:case 2:case 3:case 4:case 5:break;default:he=3}var ce=R;R=he;try{return De()}finally{R=ce}},r.unstable_scheduleCallback=function(he,De,ce){var Z=r.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?Z+ce:Z):ce=Z,he){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ce+G,he={id:A++,callback:De,priorityLevel:he,startTime:ce,expirationTime:G,sortIndex:-1},ce>Z?(he.sortIndex=ce,o(E,he),a(v)===null&&he===a(E)&&(B?(U(le),le=-1):B=!0,ye(q,ce-Z))):(he.sortIndex=G,o(v,he),L||M||(L=!0,Ve(ee))),he},r.unstable_shouldYield=Le,r.unstable_wrapCallback=function(he){var De=R;return function(){var ce=R;R=De;try{return he.apply(this,arguments)}finally{R=ce}}}}(ud)),ud}var s1;function s2(){return s1||(s1=1,cd.exports=i2()),cd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o1;function o2(){if(o1)return Tr;o1=1;var r=pf(),o=s2();function a(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,d=1;d<arguments.length;d++)s+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f=new Set,p={};function y(t,s){w(t,s),w(t+"Capture",s)}function w(t,s){for(p[t]=s,t=0;t<s.length;t++)f.add(s[t])}var S=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v=Object.prototype.hasOwnProperty,E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A={},N={};function R(t){return v.call(N,t)?!0:v.call(A,t)?!1:E.test(t)?N[t]=!0:(A[t]=!0,!1)}function M(t,s,d,m){if(d!==null&&d.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return m?!1:d!==null?!d.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function L(t,s,d,m){if(s===null||typeof s>"u"||M(t,s,d,m))return!0;if(m)return!1;if(d!==null)switch(d.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function B(t,s,d,m,b,T,O){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=m,this.attributeNamespace=b,this.mustUseProperty=d,this.propertyName=t,this.type=s,this.sanitizeURL=T,this.removeEmptyString=O}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){j[t]=new B(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];j[s]=new B(s,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){j[t]=new B(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){j[t]=new B(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){j[t]=new B(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){j[t]=new B(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){j[t]=new B(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){j[t]=new B(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){j[t]=new B(t,5,!1,t.toLowerCase(),null,!1,!1)});var U=/[\-:]([a-z])/g;function W(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(U,W);j[s]=new B(s,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(U,W);j[s]=new B(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(U,W);j[s]=new B(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){j[t]=new B(t,1,!1,t.toLowerCase(),null,!1,!1)}),j.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){j[t]=new B(t,1,!1,t.toLowerCase(),null,!0,!0)});function F(t,s,d,m){var b=j.hasOwnProperty(s)?j[s]:null;(b!==null?b.type!==0:m||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(L(s,d,b,m)&&(d=null),m||b===null?R(s)&&(d===null?t.removeAttribute(s):t.setAttribute(s,""+d)):b.mustUseProperty?t[b.propertyName]=d===null?b.type===3?!1:"":d:(s=b.attributeName,m=b.attributeNamespace,d===null?t.removeAttribute(s):(b=b.type,d=b===3||b===4&&d===!0?"":""+d,m?t.setAttributeNS(m,s,d):t.setAttribute(s,d))))}var q=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ee=Symbol.for("react.element"),re=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),le=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),ke=Symbol.for("react.provider"),Le=Symbol.for("react.context"),Se=Symbol.for("react.forward_ref"),Ne=Symbol.for("react.suspense"),Ee=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),Ve=Symbol.for("react.lazy"),ye=Symbol.for("react.offscreen"),he=Symbol.iterator;function De(t){return t===null||typeof t!="object"?null:(t=he&&t[he]||t["@@iterator"],typeof t=="function"?t:null)}var ce=Object.assign,Z;function G(t){if(Z===void 0)try{throw Error()}catch(d){var s=d.stack.trim().match(/\n( *(at )?)/);Z=s&&s[1]||""}return`
`+Z+t}var we=!1;function be(t,s){if(!t||we)return"";we=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(fe){var m=fe}Reflect.construct(t,[],s)}else{try{s.call()}catch(fe){m=fe}t.call(s.prototype)}else{try{throw Error()}catch(fe){m=fe}t()}}catch(fe){if(fe&&m&&typeof fe.stack=="string"){for(var b=fe.stack.split(`
`),T=m.stack.split(`
`),O=b.length-1,H=T.length-1;1<=O&&0<=H&&b[O]!==T[H];)H--;for(;1<=O&&0<=H;O--,H--)if(b[O]!==T[H]){if(O!==1||H!==1)do if(O--,H--,0>H||b[O]!==T[H]){var K=`
`+b[O].replace(" at new "," at ");return t.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",t.displayName)),K}while(1<=O&&0<=H);break}}}finally{we=!1,Error.prepareStackTrace=d}return(t=t?t.displayName||t.name:"")?G(t):""}function ge(t){switch(t.tag){case 5:return G(t.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return t=be(t.type,!1),t;case 11:return t=be(t.type.render,!1),t;case 1:return t=be(t.type,!0),t;default:return""}}function ie(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case X:return"Fragment";case re:return"Portal";case te:return"Profiler";case le:return"StrictMode";case Ne:return"Suspense";case Ee:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Le:return(t.displayName||"Context")+".Consumer";case ke:return(t._context.displayName||"Context")+".Provider";case Se:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case J:return s=t.displayName||null,s!==null?s:ie(t.type)||"Memo";case Ve:s=t._payload,t=t._init;try{return ie(t(s))}catch{}}return null}function ze(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ie(s);case 8:return s===le?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function ve(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Be(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function nt(t){var s=Be(t)?"checked":"value",d=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),m=""+t[s];if(!t.hasOwnProperty(s)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var b=d.get,T=d.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return b.call(this)},set:function(O){m=""+O,T.call(this,O)}}),Object.defineProperty(t,s,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(O){m=""+O},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Ae(t){t._valueTracker||(t._valueTracker=nt(t))}function pe(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var d=s.getValue(),m="";return t&&(m=Be(t)?t.checked?"true":"false":t.value),t=m,t!==d?(s.setValue(t),!0):!1}function xe(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function He(t,s){var d=s.checked;return ce({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??t._wrapperState.initialChecked})}function Ze(t,s){var d=s.defaultValue==null?"":s.defaultValue,m=s.checked!=null?s.checked:s.defaultChecked;d=ve(s.value!=null?s.value:d),t._wrapperState={initialChecked:m,initialValue:d,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Rt(t,s){s=s.checked,s!=null&&F(t,"checked",s,!1)}function wt(t,s){Rt(t,s);var d=ve(s.value),m=s.type;if(d!=null)m==="number"?(d===0&&t.value===""||t.value!=d)&&(t.value=""+d):t.value!==""+d&&(t.value=""+d);else if(m==="submit"||m==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?Je(t,s.type,d):s.hasOwnProperty("defaultValue")&&Je(t,s.type,ve(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function $e(t,s,d){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var m=s.type;if(!(m!=="submit"&&m!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,d||s===t.value||(t.value=s),t.defaultValue=s}d=t.name,d!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,d!==""&&(t.name=d)}function Je(t,s,d){(s!=="number"||xe(t.ownerDocument)!==t)&&(d==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+d&&(t.defaultValue=""+d))}var qt=Array.isArray;function je(t,s,d,m){if(t=t.options,s){s={};for(var b=0;b<d.length;b++)s["$"+d[b]]=!0;for(d=0;d<t.length;d++)b=s.hasOwnProperty("$"+t[d].value),t[d].selected!==b&&(t[d].selected=b),b&&m&&(t[d].defaultSelected=!0)}else{for(d=""+ve(d),s=null,b=0;b<t.length;b++){if(t[b].value===d){t[b].selected=!0,m&&(t[b].defaultSelected=!0);return}s!==null||t[b].disabled||(s=t[b])}s!==null&&(s.selected=!0)}}function Wt(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(a(91));return ce({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function nr(t,s){var d=s.value;if(d==null){if(d=s.children,s=s.defaultValue,d!=null){if(s!=null)throw Error(a(92));if(qt(d)){if(1<d.length)throw Error(a(93));d=d[0]}s=d}s==null&&(s=""),d=s}t._wrapperState={initialValue:ve(d)}}function Ue(t,s){var d=ve(s.value),m=ve(s.defaultValue);d!=null&&(d=""+d,d!==t.value&&(t.value=d),s.defaultValue==null&&t.defaultValue!==d&&(t.defaultValue=d)),m!=null&&(t.defaultValue=""+m)}function kt(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function ut(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jt(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?ut(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ke,Ht=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,d,m,b){MSApp.execUnsafeLocalFunction(function(){return t(s,d,m,b)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(Ke=Ke||document.createElement("div"),Ke.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Ke.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function St(t,s){if(s){var d=t.firstChild;if(d&&d===t.lastChild&&d.nodeType===3){d.nodeValue=s;return}}t.textContent=s}var qe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mt=["Webkit","ms","Moz","O"];Object.keys(qe).forEach(function(t){mt.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),qe[s]=qe[t]})});function _e(t,s,d){return s==null||typeof s=="boolean"||s===""?"":d||typeof s!="number"||s===0||qe.hasOwnProperty(t)&&qe[t]?(""+s).trim():s+"px"}function me(t,s){t=t.style;for(var d in s)if(s.hasOwnProperty(d)){var m=d.indexOf("--")===0,b=_e(d,s[d],m);d==="float"&&(d="cssFloat"),m?t.setProperty(d,b):t[d]=b}}var ct=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function et(t,s){if(s){if(ct[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(a(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(a(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(a(61))}if(s.style!=null&&typeof s.style!="object")throw Error(a(62))}}function ft(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yt=null;function In(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var on=null,at=null,an=null;function Es(t){if(t=ca(t)){if(typeof on!="function")throw Error(a(280));var s=t.stateNode;s&&(s=ml(s),on(t.stateNode,t.type,s))}}function bs(t){at?an?an.push(t):an=[t]:at=t}function Yn(){if(at){var t=at,s=an;if(an=at=null,Es(t),s)for(t=0;t<s.length;t++)Es(s[t])}}function Wi(t,s){return t(s)}function Cn(){}var xr=!1;function Ci(t,s,d){if(xr)return t(s,d);xr=!0;try{return Wi(t,s,d)}finally{xr=!1,(at!==null||an!==null)&&(Cn(),Yn())}}function On(t,s){var d=t.stateNode;if(d===null)return null;var m=ml(d);if(m===null)return null;d=m[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(t=t.type,m=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!m;break e;default:t=!1}if(t)return null;if(d&&typeof d!="function")throw Error(a(231,s,typeof d));return d}var Ei=!1;if(S)try{var rr={};Object.defineProperty(rr,"passive",{get:function(){Ei=!0}}),window.addEventListener("test",rr,rr),window.removeEventListener("test",rr,rr)}catch{Ei=!1}function Ss(t,s,d,m,b,T,O,H,K){var fe=Array.prototype.slice.call(arguments,3);try{s.apply(d,fe)}catch(Re){this.onError(Re)}}var tn=!1,yr=null,Nn=!1,We=null,li={onError:function(t){tn=!0,yr=t}};function As(t,s,d,m,b,T,O,H,K){tn=!1,yr=null,Ss.apply(li,arguments)}function Mn(t,s,d,m,b,T,O,H,K){if(As.apply(this,arguments),tn){if(tn){var fe=yr;tn=!1,yr=null}else throw Error(a(198));Nn||(Nn=!0,We=fe)}}function ir(t){var s=t,d=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(d=s.return),t=s.return;while(t)}return s.tag===3?d:null}function bi(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function Kr(t){if(ir(t)!==t)throw Error(a(188))}function wr(t){var s=t.alternate;if(!s){if(s=ir(t),s===null)throw Error(a(188));return s!==t?null:t}for(var d=t,m=s;;){var b=d.return;if(b===null)break;var T=b.alternate;if(T===null){if(m=b.return,m!==null){d=m;continue}break}if(b.child===T.child){for(T=b.child;T;){if(T===d)return Kr(b),t;if(T===m)return Kr(b),s;T=T.sibling}throw Error(a(188))}if(d.return!==m.return)d=b,m=T;else{for(var O=!1,H=b.child;H;){if(H===d){O=!0,d=b,m=T;break}if(H===m){O=!0,m=b,d=T;break}H=H.sibling}if(!O){for(H=T.child;H;){if(H===d){O=!0,d=T,m=b;break}if(H===m){O=!0,m=T,d=b;break}H=H.sibling}if(!O)throw Error(a(189))}}if(d.alternate!==m)throw Error(a(190))}if(d.tag!==3)throw Error(a(188));return d.stateNode.current===d?t:s}function Hi(t){return t=wr(t),t!==null?Ge(t):null}function Ge(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=Ge(t);if(s!==null)return s;t=t.sibling}return null}var it=o.unstable_scheduleCallback,gt=o.unstable_cancelCallback,Xe=o.unstable_shouldYield,Zt=o.unstable_requestPaint,Nt=o.unstable_now,Ts=o.unstable_getCurrentPriorityLevel,Ce=o.unstable_ImmediatePriority,vr=o.unstable_UserBlockingPriority,Bt=o.unstable_NormalPriority,Si=o.unstable_LowPriority,Gi=o.unstable_IdlePriority,Pt=null,At=null;function Mt(t){if(At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(Pt,t,void 0,(t.current.flags&128)===128)}catch{}}var fr=Math.clz32?Math.clz32:En,Ho=Math.log,Go=Math.LN2;function En(t){return t>>>=0,t===0?32:31-(Ho(t)/Go|0)|0}var _r=64,ro=4194304;function $t(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Rr(t,s){var d=t.pendingLanes;if(d===0)return 0;var m=0,b=t.suspendedLanes,T=t.pingedLanes,O=d&268435455;if(O!==0){var H=O&~b;H!==0?m=$t(H):(T&=O,T!==0&&(m=$t(T)))}else O=d&~b,O!==0?m=$t(O):T!==0&&(m=$t(T));if(m===0)return 0;if(s!==0&&s!==m&&!(s&b)&&(b=m&-m,T=s&-s,b>=T||b===16&&(T&4194240)!==0))return s;if(m&4&&(m|=d&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=m;0<s;)d=31-fr(s),b=1<<d,m|=t[d],s&=~b;return m}function Vc(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xi(t,s){for(var d=t.suspendedLanes,m=t.pingedLanes,b=t.expirationTimes,T=t.pendingLanes;0<T;){var O=31-fr(T),H=1<<O,K=b[O];K===-1?(!(H&d)||H&m)&&(b[O]=Vc(H,s)):K<=s&&(t.expiredLanes|=H),T&=~H}}function Gt(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Dn(){var t=_r;return _r<<=1,!(_r&4194240)&&(_r=64),t}function se(t){for(var s=[],d=0;31>d;d++)s.push(t);return s}function V(t,s,d){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-fr(s),t[s]=d}function ot(t,s){var d=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var m=t.eventTimes;for(t=t.expirationTimes;0<d;){var b=31-fr(d),T=1<<b;s[b]=0,m[b]=-1,t[b]=-1,d&=~T}}function gn(t,s){var d=t.entangledLanes|=s;for(t=t.entanglements;d;){var m=31-fr(d),b=1<<m;b&s|t[m]&s&&(t[m]|=s),d&=~b}}var Tt=0;function Ja(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var io,sr,lt,Qt,Xo,Yo=!1,Yi=[],kr=null,Br=null,ci=null,ln=new Map,$r=new Map,Zn=[],xt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function el(t,s){switch(t){case"focusin":case"focusout":kr=null;break;case"dragenter":case"dragleave":Br=null;break;case"mouseover":case"mouseout":ci=null;break;case"pointerover":case"pointerout":ln.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":$r.delete(s.pointerId)}}function Ct(t,s,d,m,b,T){return t===null||t.nativeEvent!==T?(t={blockedOn:s,domEventName:d,eventSystemFlags:m,nativeEvent:T,targetContainers:[b]},s!==null&&(s=ca(s),s!==null&&sr(s)),t):(t.eventSystemFlags|=m,s=t.targetContainers,b!==null&&s.indexOf(b)===-1&&s.push(b),t)}function Ln(t,s,d,m,b){switch(s){case"focusin":return kr=Ct(kr,t,s,d,m,b),!0;case"dragenter":return Br=Ct(Br,t,s,d,m,b),!0;case"mouseover":return ci=Ct(ci,t,s,d,m,b),!0;case"pointerover":var T=b.pointerId;return ln.set(T,Ct(ln.get(T)||null,t,s,d,m,b)),!0;case"gotpointercapture":return T=b.pointerId,$r.set(T,Ct($r.get(T)||null,t,s,d,m,b)),!0}return!1}function tl(t){var s=Ls(t.target);if(s!==null){var d=ir(s);if(d!==null){if(s=d.tag,s===13){if(s=bi(d),s!==null){t.blockedOn=s,Xo(t.priority,function(){lt(d)});return}}else if(s===3&&d.stateNode.current.memoizedState.isDehydrated){t.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zi(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var d=so(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(d===null){d=t.nativeEvent;var m=new d.constructor(d.type,d);Yt=m,d.target.dispatchEvent(m),Yt=null}else return s=ca(d),s!==null&&sr(s),t.blockedOn=d,!1;s.shift()}return!0}function Zo(t,s,d){Zi(t)&&d.delete(s)}function Ai(){Yo=!1,kr!==null&&Zi(kr)&&(kr=null),Br!==null&&Zi(Br)&&(Br=null),ci!==null&&Zi(ci)&&(ci=null),ln.forEach(Zo),$r.forEach(Zo)}function Is(t,s){t.blockedOn===s&&(t.blockedOn=null,Yo||(Yo=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ai)))}function qr(t){function s(b){return Is(b,t)}if(0<Yi.length){Is(Yi[0],t);for(var d=1;d<Yi.length;d++){var m=Yi[d];m.blockedOn===t&&(m.blockedOn=null)}}for(kr!==null&&Is(kr,t),Br!==null&&Is(Br,t),ci!==null&&Is(ci,t),ln.forEach(s),$r.forEach(s),d=0;d<Zn.length;d++)m=Zn[d],m.blockedOn===t&&(m.blockedOn=null);for(;0<Zn.length&&(d=Zn[0],d.blockedOn===null);)tl(d),d.blockedOn===null&&Zn.shift()}var jr=q.ReactCurrentBatchConfig,ui=!0;function nl(t,s,d,m){var b=Tt,T=jr.transition;jr.transition=null;try{Tt=1,Ti(t,s,d,m)}finally{Tt=b,jr.transition=T}}function Ns(t,s,d,m){var b=Tt,T=jr.transition;jr.transition=null;try{Tt=4,Ti(t,s,d,m)}finally{Tt=b,jr.transition=T}}function Ti(t,s,d,m){if(ui){var b=so(t,s,d,m);if(b===null)$c(t,s,m,Bn,d),el(t,m);else if(Ln(b,t,s,d,m))m.stopPropagation();else if(el(t,m),s&4&&-1<xt.indexOf(t)){for(;b!==null;){var T=ca(b);if(T!==null&&io(T),T=so(t,s,d,m),T===null&&$c(t,s,m,Bn,d),T===b)break;b=T}b!==null&&m.stopPropagation()}else $c(t,s,m,null,d)}}var Bn=null;function so(t,s,d,m){if(Bn=null,t=In(m),t=Ls(t),t!==null)if(s=ir(t),s===null)t=null;else if(d=s.tag,d===13){if(t=bi(s),t!==null)return t;t=null}else if(d===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return Bn=t,null}function Ko(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ts()){case Ce:return 1;case vr:return 4;case Bt:case Si:return 16;case Gi:return 536870912;default:return 16}default:return 16}}var Qr=null,$o=null,oo=null;function rl(){if(oo)return oo;var t,s=$o,d=s.length,m,b="value"in Qr?Qr.value:Qr.textContent,T=b.length;for(t=0;t<d&&s[t]===b[t];t++);var O=d-t;for(m=1;m<=O&&s[d-m]===b[T-m];m++);return oo=b.slice(t,1<m?1-m:void 0)}function Ft(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function _s(){return!0}function Rs(){return!1}function xn(t){function s(d,m,b,T,O){this._reactName=d,this._targetInst=b,this.type=m,this.nativeEvent=T,this.target=O,this.currentTarget=null;for(var H in t)t.hasOwnProperty(H)&&(d=t[H],this[H]=d?d(T):T[H]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?_s:Rs,this.isPropagationStopped=Rs,this}return ce(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=_s)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=_s)},persist:function(){},isPersistent:_s}),s}var Ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},de=xn(Ki),bt=ce({},Ki,{view:0,detail:0}),jn=xn(bt),$i,ao,ks,lo=ce({},bt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ps,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ks&&(ks&&t.type==="mousemove"?($i=t.screenX-ks.screenX,ao=t.screenY-ks.screenY):ao=$i=0,ks=t),$i)},movementY:function(t){return"movementY"in t?t.movementY:ao}}),il=xn(lo),qo=ce({},lo,{dataTransfer:0}),bn=xn(qo),Qo=ce({},bt,{relatedTarget:0}),Jt=xn(Qo),co=ce({},Ki,{animationName:0,elapsedTime:0,pseudoElement:0}),Ii=xn(co),Xt=ce({},Ki,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),dt=xn(Xt),Uc=ce({},Ki,{data:0}),Kt=xn(Uc),Ni={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fr(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=zc[t])?!!s[t]:!1}function Ps(){return Fr}var sl=ce({},bt,{key:function(t){if(t.key){var s=Ni[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Ft(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qi[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ps,charCode:function(t){return t.type==="keypress"?Ft(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ft(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Jo=xn(sl),ol=ce({},lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ea=xn(ol),Wc=ce({},bt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ps}),Qi=xn(Wc),ta=ce({},Ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hc=xn(ta),Os=ce({},lo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Gc=xn(Os),di=[9,13,27,32],Ji=S&&"CompositionEvent"in window,zn=null;S&&"documentMode"in document&&(zn=document.documentMode);var al=S&&"TextEvent"in window&&!zn,Pr=S&&(!Ji||zn&&8<zn&&11>=zn),ll=" ",uo=!1;function cl(t,s){switch(t){case"keyup":return di.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function na(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Kn=!1;function Xc(t,s){switch(t){case"compositionend":return na(s);case"keypress":return s.which!==32?null:(uo=!0,ll);case"textInput":return t=s.data,t===ll&&uo?null:t;default:return null}}function ra(t,s){if(Kn)return t==="compositionend"||!Ji&&cl(t,s)?(t=rl(),oo=$o=Qr=null,Kn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Pr&&s.locale!=="ko"?null:s.data;default:return null}}var Ms={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lt(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Ms[t.type]:s==="textarea"}function Ds(t,s,d,m){bs(m),s=fl(s,"onChange"),0<s.length&&(d=new de("onChange","change",null,d,m),t.push({event:d,listeners:s}))}var k=null,e=null;function n(t){gh(t,0)}function i(t){var s=po(t);if(pe(s))return t}function l(t,s){if(t==="change")return s}var c=!1;if(S){var u;if(S){var h="oninput"in document;if(!h){var g=document.createElement("div");g.setAttribute("oninput","return;"),h=typeof g.oninput=="function"}u=h}else u=!1;c=u&&(!document.documentMode||9<document.documentMode)}function C(){k&&(k.detachEvent("onpropertychange",_),e=k=null)}function _(t){if(t.propertyName==="value"&&i(e)){var s=[];Ds(s,e,t,In(t)),Ci(n,s)}}function P(t,s,d){t==="focusin"?(C(),k=s,e=d,k.attachEvent("onpropertychange",_)):t==="focusout"&&C()}function D(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return i(e)}function z(t,s){if(t==="click")return i(s)}function Y(t,s){if(t==="input"||t==="change")return i(s)}function $(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var ne=typeof Object.is=="function"?Object.is:$;function ue(t,s){if(ne(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var d=Object.keys(t),m=Object.keys(s);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var b=d[m];if(!v.call(s,b)||!ne(t[b],s[b]))return!1}return!0}function Oe(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Me(t,s){var d=Oe(t);t=0;for(var m;d;){if(d.nodeType===3){if(m=t+d.textContent.length,t<=s&&m>=s)return{node:d,offset:s-t};t=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Oe(d)}}function Ie(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Ie(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function _t(){for(var t=window,s=xe();s instanceof t.HTMLIFrameElement;){try{var d=typeof s.contentWindow.location.href=="string"}catch{d=!1}if(d)t=s.contentWindow;else break;s=xe(t.document)}return s}function Et(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function or(t){var s=_t(),d=t.focusedElem,m=t.selectionRange;if(s!==d&&d&&d.ownerDocument&&Ie(d.ownerDocument.documentElement,d)){if(m!==null&&Et(d)){if(s=m.start,t=m.end,t===void 0&&(t=s),"selectionStart"in d)d.selectionStart=s,d.selectionEnd=Math.min(t,d.value.length);else if(t=(s=d.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var b=d.textContent.length,T=Math.min(m.start,b);m=m.end===void 0?T:Math.min(m.end,b),!t.extend&&T>m&&(b=m,m=T,T=b),b=Me(d,T);var O=Me(d,m);b&&O&&(t.rangeCount!==1||t.anchorNode!==b.node||t.anchorOffset!==b.offset||t.focusNode!==O.node||t.focusOffset!==O.offset)&&(s=s.createRange(),s.setStart(b.node,b.offset),t.removeAllRanges(),T>m?(t.addRange(s),t.extend(O.node,O.offset)):(s.setEnd(O.node,O.offset),t.addRange(s)))}}for(s=[],t=d;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<s.length;d++)t=s[d],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Or=S&&"documentMode"in document&&11>=document.documentMode,Sn=null,zt=null,dn=null,$n=!1;function _i(t,s,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;$n||Sn==null||Sn!==xe(m)||(m=Sn,"selectionStart"in m&&Et(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),dn&&ue(dn,m)||(dn=m,m=fl(zt,"onSelect"),0<m.length&&(s=new de("onSelect","select",null,s,d),t.push({event:s,listeners:m}),s.target=Sn)))}function Jr(t,s){var d={};return d[t.toLowerCase()]=s.toLowerCase(),d["Webkit"+t]="webkit"+s,d["Moz"+t]="moz"+s,d}var es={animationend:Jr("Animation","AnimationEnd"),animationiteration:Jr("Animation","AnimationIteration"),animationstart:Jr("Animation","AnimationStart"),transitionend:Jr("Transition","TransitionEnd")},ia={},lh={};S&&(lh=document.createElement("div").style,"AnimationEvent"in window||(delete es.animationend.animation,delete es.animationiteration.animation,delete es.animationstart.animation),"TransitionEvent"in window||delete es.transitionend.transition);function ul(t){if(ia[t])return ia[t];if(!es[t])return t;var s=es[t],d;for(d in s)if(s.hasOwnProperty(d)&&d in lh)return ia[t]=s[d];return t}var ch=ul("animationend"),uh=ul("animationiteration"),dh=ul("animationstart"),fh=ul("transitionend"),hh=new Map,ph="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ts(t,s){hh.set(t,s),y(s,[t])}for(var Yc=0;Yc<ph.length;Yc++){var Zc=ph[Yc],ux=Zc.toLowerCase(),dx=Zc[0].toUpperCase()+Zc.slice(1);ts(ux,"on"+dx)}ts(ch,"onAnimationEnd"),ts(uh,"onAnimationIteration"),ts(dh,"onAnimationStart"),ts("dblclick","onDoubleClick"),ts("focusin","onFocus"),ts("focusout","onBlur"),ts(fh,"onTransitionEnd"),w("onMouseEnter",["mouseout","mouseover"]),w("onMouseLeave",["mouseout","mouseover"]),w("onPointerEnter",["pointerout","pointerover"]),w("onPointerLeave",["pointerout","pointerover"]),y("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),y("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),y("onBeforeInput",["compositionend","keypress","textInput","paste"]),y("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),y("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),y("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fx=new Set("cancel close invalid load scroll toggle".split(" ").concat(sa));function mh(t,s,d){var m=t.type||"unknown-event";t.currentTarget=d,Mn(m,s,void 0,t),t.currentTarget=null}function gh(t,s){s=(s&4)!==0;for(var d=0;d<t.length;d++){var m=t[d],b=m.event;m=m.listeners;e:{var T=void 0;if(s)for(var O=m.length-1;0<=O;O--){var H=m[O],K=H.instance,fe=H.currentTarget;if(H=H.listener,K!==T&&b.isPropagationStopped())break e;mh(b,H,fe),T=K}else for(O=0;O<m.length;O++){if(H=m[O],K=H.instance,fe=H.currentTarget,H=H.listener,K!==T&&b.isPropagationStopped())break e;mh(b,H,fe),T=K}}}if(Nn)throw t=We,Nn=!1,We=null,t}function nn(t,s){var d=s[nu];d===void 0&&(d=s[nu]=new Set);var m=t+"__bubble";d.has(m)||(xh(s,t,2,!1),d.add(m))}function Kc(t,s,d){var m=0;s&&(m|=4),xh(d,t,m,s)}var dl="_reactListening"+Math.random().toString(36).slice(2);function oa(t){if(!t[dl]){t[dl]=!0,f.forEach(function(d){d!=="selectionchange"&&(fx.has(d)||Kc(d,!1,t),Kc(d,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[dl]||(s[dl]=!0,Kc("selectionchange",!1,s))}}function xh(t,s,d,m){switch(Ko(s)){case 1:var b=nl;break;case 4:b=Ns;break;default:b=Ti}d=b.bind(null,s,d,t),b=void 0,!Ei||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(b=!0),m?b!==void 0?t.addEventListener(s,d,{capture:!0,passive:b}):t.addEventListener(s,d,!0):b!==void 0?t.addEventListener(s,d,{passive:b}):t.addEventListener(s,d,!1)}function $c(t,s,d,m,b){var T=m;if(!(s&1)&&!(s&2)&&m!==null)e:for(;;){if(m===null)return;var O=m.tag;if(O===3||O===4){var H=m.stateNode.containerInfo;if(H===b||H.nodeType===8&&H.parentNode===b)break;if(O===4)for(O=m.return;O!==null;){var K=O.tag;if((K===3||K===4)&&(K=O.stateNode.containerInfo,K===b||K.nodeType===8&&K.parentNode===b))return;O=O.return}for(;H!==null;){if(O=Ls(H),O===null)return;if(K=O.tag,K===5||K===6){m=T=O;continue e}H=H.parentNode}}m=m.return}Ci(function(){var fe=T,Re=In(d),Pe=[];e:{var Te=hh.get(t);if(Te!==void 0){var Ye=de,tt=t;switch(t){case"keypress":if(Ft(d)===0)break e;case"keydown":case"keyup":Ye=Jo;break;case"focusin":tt="focus",Ye=Jt;break;case"focusout":tt="blur",Ye=Jt;break;case"beforeblur":case"afterblur":Ye=Jt;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ye=il;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ye=bn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ye=Qi;break;case ch:case uh:case dh:Ye=Ii;break;case fh:Ye=Hc;break;case"scroll":Ye=jn;break;case"wheel":Ye=Gc;break;case"copy":case"cut":case"paste":Ye=dt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ye=ea}var rt=(s&4)!==0,An=!rt&&t==="scroll",oe=rt?Te!==null?Te+"Capture":null:Te;rt=[];for(var Q=fe,ae;Q!==null;){ae=Q;var Fe=ae.stateNode;if(ae.tag===5&&Fe!==null&&(ae=Fe,oe!==null&&(Fe=On(Q,oe),Fe!=null&&rt.push(aa(Q,Fe,ae)))),An)break;Q=Q.return}0<rt.length&&(Te=new Ye(Te,tt,null,d,Re),Pe.push({event:Te,listeners:rt}))}}if(!(s&7)){e:{if(Te=t==="mouseover"||t==="pointerover",Ye=t==="mouseout"||t==="pointerout",Te&&d!==Yt&&(tt=d.relatedTarget||d.fromElement)&&(Ls(tt)||tt[Ri]))break e;if((Ye||Te)&&(Te=Re.window===Re?Re:(Te=Re.ownerDocument)?Te.defaultView||Te.parentWindow:window,Ye?(tt=d.relatedTarget||d.toElement,Ye=fe,tt=tt?Ls(tt):null,tt!==null&&(An=ir(tt),tt!==An||tt.tag!==5&&tt.tag!==6)&&(tt=null)):(Ye=null,tt=fe),Ye!==tt)){if(rt=il,Fe="onMouseLeave",oe="onMouseEnter",Q="mouse",(t==="pointerout"||t==="pointerover")&&(rt=ea,Fe="onPointerLeave",oe="onPointerEnter",Q="pointer"),An=Ye==null?Te:po(Ye),ae=tt==null?Te:po(tt),Te=new rt(Fe,Q+"leave",Ye,d,Re),Te.target=An,Te.relatedTarget=ae,Fe=null,Ls(Re)===fe&&(rt=new rt(oe,Q+"enter",tt,d,Re),rt.target=ae,rt.relatedTarget=An,Fe=rt),An=Fe,Ye&&tt)t:{for(rt=Ye,oe=tt,Q=0,ae=rt;ae;ae=fo(ae))Q++;for(ae=0,Fe=oe;Fe;Fe=fo(Fe))ae++;for(;0<Q-ae;)rt=fo(rt),Q--;for(;0<ae-Q;)oe=fo(oe),ae--;for(;Q--;){if(rt===oe||oe!==null&&rt===oe.alternate)break t;rt=fo(rt),oe=fo(oe)}rt=null}else rt=null;Ye!==null&&yh(Pe,Te,Ye,rt,!1),tt!==null&&An!==null&&yh(Pe,An,tt,rt,!0)}}e:{if(Te=fe?po(fe):window,Ye=Te.nodeName&&Te.nodeName.toLowerCase(),Ye==="select"||Ye==="input"&&Te.type==="file")var st=l;else if(Lt(Te))if(c)st=Y;else{st=D;var ht=P}else(Ye=Te.nodeName)&&Ye.toLowerCase()==="input"&&(Te.type==="checkbox"||Te.type==="radio")&&(st=z);if(st&&(st=st(t,fe))){Ds(Pe,st,d,Re);break e}ht&&ht(t,Te,fe),t==="focusout"&&(ht=Te._wrapperState)&&ht.controlled&&Te.type==="number"&&Je(Te,"number",Te.value)}switch(ht=fe?po(fe):window,t){case"focusin":(Lt(ht)||ht.contentEditable==="true")&&(Sn=ht,zt=fe,dn=null);break;case"focusout":dn=zt=Sn=null;break;case"mousedown":$n=!0;break;case"contextmenu":case"mouseup":case"dragend":$n=!1,_i(Pe,d,Re);break;case"selectionchange":if(Or)break;case"keydown":case"keyup":_i(Pe,d,Re)}var pt;if(Ji)e:{switch(t){case"compositionstart":var vt="onCompositionStart";break e;case"compositionend":vt="onCompositionEnd";break e;case"compositionupdate":vt="onCompositionUpdate";break e}vt=void 0}else Kn?cl(t,d)&&(vt="onCompositionEnd"):t==="keydown"&&d.keyCode===229&&(vt="onCompositionStart");vt&&(Pr&&d.locale!=="ko"&&(Kn||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&Kn&&(pt=rl()):(Qr=Re,$o="value"in Qr?Qr.value:Qr.textContent,Kn=!0)),ht=fl(fe,vt),0<ht.length&&(vt=new Kt(vt,t,null,d,Re),Pe.push({event:vt,listeners:ht}),pt?vt.data=pt:(pt=na(d),pt!==null&&(vt.data=pt)))),(pt=al?Xc(t,d):ra(t,d))&&(fe=fl(fe,"onBeforeInput"),0<fe.length&&(Re=new Kt("onBeforeInput","beforeinput",null,d,Re),Pe.push({event:Re,listeners:fe}),Re.data=pt))}gh(Pe,s)})}function aa(t,s,d){return{instance:t,listener:s,currentTarget:d}}function fl(t,s){for(var d=s+"Capture",m=[];t!==null;){var b=t,T=b.stateNode;b.tag===5&&T!==null&&(b=T,T=On(t,d),T!=null&&m.unshift(aa(t,T,b)),T=On(t,s),T!=null&&m.push(aa(t,T,b))),t=t.return}return m}function fo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function yh(t,s,d,m,b){for(var T=s._reactName,O=[];d!==null&&d!==m;){var H=d,K=H.alternate,fe=H.stateNode;if(K!==null&&K===m)break;H.tag===5&&fe!==null&&(H=fe,b?(K=On(d,T),K!=null&&O.unshift(aa(d,K,H))):b||(K=On(d,T),K!=null&&O.push(aa(d,K,H)))),d=d.return}O.length!==0&&t.push({event:s,listeners:O})}var hx=/\r\n?/g,px=/\u0000|\uFFFD/g;function wh(t){return(typeof t=="string"?t:""+t).replace(hx,`
`).replace(px,"")}function hl(t,s,d){if(s=wh(s),wh(t)!==s&&d)throw Error(a(425))}function pl(){}var qc=null,Qc=null;function Jc(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var eu=typeof setTimeout=="function"?setTimeout:void 0,mx=typeof clearTimeout=="function"?clearTimeout:void 0,vh=typeof Promise=="function"?Promise:void 0,gx=typeof queueMicrotask=="function"?queueMicrotask:typeof vh<"u"?function(t){return vh.resolve(null).then(t).catch(xx)}:eu;function xx(t){setTimeout(function(){throw t})}function tu(t,s){var d=s,m=0;do{var b=d.nextSibling;if(t.removeChild(d),b&&b.nodeType===8)if(d=b.data,d==="/$"){if(m===0){t.removeChild(b),qr(s);return}m--}else d!=="$"&&d!=="$?"&&d!=="$!"||m++;d=b}while(d);qr(s)}function ns(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function Ch(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var d=t.data;if(d==="$"||d==="$!"||d==="$?"){if(s===0)return t;s--}else d==="/$"&&s++}t=t.previousSibling}return null}var ho=Math.random().toString(36).slice(2),fi="__reactFiber$"+ho,la="__reactProps$"+ho,Ri="__reactContainer$"+ho,nu="__reactEvents$"+ho,yx="__reactListeners$"+ho,wx="__reactHandles$"+ho;function Ls(t){var s=t[fi];if(s)return s;for(var d=t.parentNode;d;){if(s=d[Ri]||d[fi]){if(d=s.alternate,s.child!==null||d!==null&&d.child!==null)for(t=Ch(t);t!==null;){if(d=t[fi])return d;t=Ch(t)}return s}t=d,d=t.parentNode}return null}function ca(t){return t=t[fi]||t[Ri],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function po(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(a(33))}function ml(t){return t[la]||null}var ru=[],mo=-1;function rs(t){return{current:t}}function rn(t){0>mo||(t.current=ru[mo],ru[mo]=null,mo--)}function en(t,s){mo++,ru[mo]=t.current,t.current=s}var is={},ar=rs(is),Cr=rs(!1),Bs=is;function go(t,s){var d=t.type.contextTypes;if(!d)return is;var m=t.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===s)return m.__reactInternalMemoizedMaskedChildContext;var b={},T;for(T in d)b[T]=s[T];return m&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=b),b}function Er(t){return t=t.childContextTypes,t!=null}function gl(){rn(Cr),rn(ar)}function Eh(t,s,d){if(ar.current!==is)throw Error(a(168));en(ar,s),en(Cr,d)}function bh(t,s,d){var m=t.stateNode;if(s=s.childContextTypes,typeof m.getChildContext!="function")return d;m=m.getChildContext();for(var b in m)if(!(b in s))throw Error(a(108,ze(t)||"Unknown",b));return ce({},d,m)}function xl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||is,Bs=ar.current,en(ar,t),en(Cr,Cr.current),!0}function Sh(t,s,d){var m=t.stateNode;if(!m)throw Error(a(169));d?(t=bh(t,s,Bs),m.__reactInternalMemoizedMergedChildContext=t,rn(Cr),rn(ar),en(ar,t)):rn(Cr),en(Cr,d)}var ki=null,yl=!1,iu=!1;function Ah(t){ki===null?ki=[t]:ki.push(t)}function vx(t){yl=!0,Ah(t)}function ss(){if(!iu&&ki!==null){iu=!0;var t=0,s=Tt;try{var d=ki;for(Tt=1;t<d.length;t++){var m=d[t];do m=m(!0);while(m!==null)}ki=null,yl=!1}catch(b){throw ki!==null&&(ki=ki.slice(t+1)),it(Ce,ss),b}finally{Tt=s,iu=!1}}return null}var xo=[],yo=0,wl=null,vl=0,Vr=[],Ur=0,js=null,Pi=1,Oi="";function Fs(t,s){xo[yo++]=vl,xo[yo++]=wl,wl=t,vl=s}function Th(t,s,d){Vr[Ur++]=Pi,Vr[Ur++]=Oi,Vr[Ur++]=js,js=t;var m=Pi;t=Oi;var b=32-fr(m)-1;m&=~(1<<b),d+=1;var T=32-fr(s)+b;if(30<T){var O=b-b%5;T=(m&(1<<O)-1).toString(32),m>>=O,b-=O,Pi=1<<32-fr(s)+b|d<<b|m,Oi=T+t}else Pi=1<<T|d<<b|m,Oi=t}function su(t){t.return!==null&&(Fs(t,1),Th(t,1,0))}function ou(t){for(;t===wl;)wl=xo[--yo],xo[yo]=null,vl=xo[--yo],xo[yo]=null;for(;t===js;)js=Vr[--Ur],Vr[Ur]=null,Oi=Vr[--Ur],Vr[Ur]=null,Pi=Vr[--Ur],Vr[Ur]=null}var Mr=null,Dr=null,cn=!1,ei=null;function Ih(t,s){var d=Gr(5,null,null,0);d.elementType="DELETED",d.stateNode=s,d.return=t,s=t.deletions,s===null?(t.deletions=[d],t.flags|=16):s.push(d)}function Nh(t,s){switch(t.tag){case 5:var d=t.type;return s=s.nodeType!==1||d.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,Mr=t,Dr=ns(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,Mr=t,Dr=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(d=js!==null?{id:Pi,overflow:Oi}:null,t.memoizedState={dehydrated:s,treeContext:d,retryLane:1073741824},d=Gr(18,null,null,0),d.stateNode=s,d.return=t,t.child=d,Mr=t,Dr=null,!0):!1;default:return!1}}function au(t){return(t.mode&1)!==0&&(t.flags&128)===0}function lu(t){if(cn){var s=Dr;if(s){var d=s;if(!Nh(t,s)){if(au(t))throw Error(a(418));s=ns(d.nextSibling);var m=Mr;s&&Nh(t,s)?Ih(m,d):(t.flags=t.flags&-4097|2,cn=!1,Mr=t)}}else{if(au(t))throw Error(a(418));t.flags=t.flags&-4097|2,cn=!1,Mr=t}}}function _h(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mr=t}function Cl(t){if(t!==Mr)return!1;if(!cn)return _h(t),cn=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!Jc(t.type,t.memoizedProps)),s&&(s=Dr)){if(au(t))throw Rh(),Error(a(418));for(;s;)Ih(t,s),s=ns(s.nextSibling)}if(_h(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var d=t.data;if(d==="/$"){if(s===0){Dr=ns(t.nextSibling);break e}s--}else d!=="$"&&d!=="$!"&&d!=="$?"||s++}t=t.nextSibling}Dr=null}}else Dr=Mr?ns(t.stateNode.nextSibling):null;return!0}function Rh(){for(var t=Dr;t;)t=ns(t.nextSibling)}function wo(){Dr=Mr=null,cn=!1}function cu(t){ei===null?ei=[t]:ei.push(t)}var Cx=q.ReactCurrentBatchConfig;function ua(t,s,d){if(t=d.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(a(309));var m=d.stateNode}if(!m)throw Error(a(147,t));var b=m,T=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===T?s.ref:(s=function(O){var H=b.refs;O===null?delete H[T]:H[T]=O},s._stringRef=T,s)}if(typeof t!="string")throw Error(a(284));if(!d._owner)throw Error(a(290,t))}return t}function El(t,s){throw t=Object.prototype.toString.call(s),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function kh(t){var s=t._init;return s(t._payload)}function Ph(t){function s(oe,Q){if(t){var ae=oe.deletions;ae===null?(oe.deletions=[Q],oe.flags|=16):ae.push(Q)}}function d(oe,Q){if(!t)return null;for(;Q!==null;)s(oe,Q),Q=Q.sibling;return null}function m(oe,Q){for(oe=new Map;Q!==null;)Q.key!==null?oe.set(Q.key,Q):oe.set(Q.index,Q),Q=Q.sibling;return oe}function b(oe,Q){return oe=hs(oe,Q),oe.index=0,oe.sibling=null,oe}function T(oe,Q,ae){return oe.index=ae,t?(ae=oe.alternate,ae!==null?(ae=ae.index,ae<Q?(oe.flags|=2,Q):ae):(oe.flags|=2,Q)):(oe.flags|=1048576,Q)}function O(oe){return t&&oe.alternate===null&&(oe.flags|=2),oe}function H(oe,Q,ae,Fe){return Q===null||Q.tag!==6?(Q=ed(ae,oe.mode,Fe),Q.return=oe,Q):(Q=b(Q,ae),Q.return=oe,Q)}function K(oe,Q,ae,Fe){var st=ae.type;return st===X?Re(oe,Q,ae.props.children,Fe,ae.key):Q!==null&&(Q.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===Ve&&kh(st)===Q.type)?(Fe=b(Q,ae.props),Fe.ref=ua(oe,Q,ae),Fe.return=oe,Fe):(Fe=Xl(ae.type,ae.key,ae.props,null,oe.mode,Fe),Fe.ref=ua(oe,Q,ae),Fe.return=oe,Fe)}function fe(oe,Q,ae,Fe){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==ae.containerInfo||Q.stateNode.implementation!==ae.implementation?(Q=td(ae,oe.mode,Fe),Q.return=oe,Q):(Q=b(Q,ae.children||[]),Q.return=oe,Q)}function Re(oe,Q,ae,Fe,st){return Q===null||Q.tag!==7?(Q=Ys(ae,oe.mode,Fe,st),Q.return=oe,Q):(Q=b(Q,ae),Q.return=oe,Q)}function Pe(oe,Q,ae){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=ed(""+Q,oe.mode,ae),Q.return=oe,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case ee:return ae=Xl(Q.type,Q.key,Q.props,null,oe.mode,ae),ae.ref=ua(oe,null,Q),ae.return=oe,ae;case re:return Q=td(Q,oe.mode,ae),Q.return=oe,Q;case Ve:var Fe=Q._init;return Pe(oe,Fe(Q._payload),ae)}if(qt(Q)||De(Q))return Q=Ys(Q,oe.mode,ae,null),Q.return=oe,Q;El(oe,Q)}return null}function Te(oe,Q,ae,Fe){var st=Q!==null?Q.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number")return st!==null?null:H(oe,Q,""+ae,Fe);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case ee:return ae.key===st?K(oe,Q,ae,Fe):null;case re:return ae.key===st?fe(oe,Q,ae,Fe):null;case Ve:return st=ae._init,Te(oe,Q,st(ae._payload),Fe)}if(qt(ae)||De(ae))return st!==null?null:Re(oe,Q,ae,Fe,null);El(oe,ae)}return null}function Ye(oe,Q,ae,Fe,st){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return oe=oe.get(ae)||null,H(Q,oe,""+Fe,st);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case ee:return oe=oe.get(Fe.key===null?ae:Fe.key)||null,K(Q,oe,Fe,st);case re:return oe=oe.get(Fe.key===null?ae:Fe.key)||null,fe(Q,oe,Fe,st);case Ve:var ht=Fe._init;return Ye(oe,Q,ae,ht(Fe._payload),st)}if(qt(Fe)||De(Fe))return oe=oe.get(ae)||null,Re(Q,oe,Fe,st,null);El(Q,Fe)}return null}function tt(oe,Q,ae,Fe){for(var st=null,ht=null,pt=Q,vt=Q=0,Gn=null;pt!==null&&vt<ae.length;vt++){pt.index>vt?(Gn=pt,pt=null):Gn=pt.sibling;var Ut=Te(oe,pt,ae[vt],Fe);if(Ut===null){pt===null&&(pt=Gn);break}t&&pt&&Ut.alternate===null&&s(oe,pt),Q=T(Ut,Q,vt),ht===null?st=Ut:ht.sibling=Ut,ht=Ut,pt=Gn}if(vt===ae.length)return d(oe,pt),cn&&Fs(oe,vt),st;if(pt===null){for(;vt<ae.length;vt++)pt=Pe(oe,ae[vt],Fe),pt!==null&&(Q=T(pt,Q,vt),ht===null?st=pt:ht.sibling=pt,ht=pt);return cn&&Fs(oe,vt),st}for(pt=m(oe,pt);vt<ae.length;vt++)Gn=Ye(pt,oe,vt,ae[vt],Fe),Gn!==null&&(t&&Gn.alternate!==null&&pt.delete(Gn.key===null?vt:Gn.key),Q=T(Gn,Q,vt),ht===null?st=Gn:ht.sibling=Gn,ht=Gn);return t&&pt.forEach(function(ps){return s(oe,ps)}),cn&&Fs(oe,vt),st}function rt(oe,Q,ae,Fe){var st=De(ae);if(typeof st!="function")throw Error(a(150));if(ae=st.call(ae),ae==null)throw Error(a(151));for(var ht=st=null,pt=Q,vt=Q=0,Gn=null,Ut=ae.next();pt!==null&&!Ut.done;vt++,Ut=ae.next()){pt.index>vt?(Gn=pt,pt=null):Gn=pt.sibling;var ps=Te(oe,pt,Ut.value,Fe);if(ps===null){pt===null&&(pt=Gn);break}t&&pt&&ps.alternate===null&&s(oe,pt),Q=T(ps,Q,vt),ht===null?st=ps:ht.sibling=ps,ht=ps,pt=Gn}if(Ut.done)return d(oe,pt),cn&&Fs(oe,vt),st;if(pt===null){for(;!Ut.done;vt++,Ut=ae.next())Ut=Pe(oe,Ut.value,Fe),Ut!==null&&(Q=T(Ut,Q,vt),ht===null?st=Ut:ht.sibling=Ut,ht=Ut);return cn&&Fs(oe,vt),st}for(pt=m(oe,pt);!Ut.done;vt++,Ut=ae.next())Ut=Ye(pt,oe,vt,Ut.value,Fe),Ut!==null&&(t&&Ut.alternate!==null&&pt.delete(Ut.key===null?vt:Ut.key),Q=T(Ut,Q,vt),ht===null?st=Ut:ht.sibling=Ut,ht=Ut);return t&&pt.forEach(function(e2){return s(oe,e2)}),cn&&Fs(oe,vt),st}function An(oe,Q,ae,Fe){if(typeof ae=="object"&&ae!==null&&ae.type===X&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case ee:e:{for(var st=ae.key,ht=Q;ht!==null;){if(ht.key===st){if(st=ae.type,st===X){if(ht.tag===7){d(oe,ht.sibling),Q=b(ht,ae.props.children),Q.return=oe,oe=Q;break e}}else if(ht.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===Ve&&kh(st)===ht.type){d(oe,ht.sibling),Q=b(ht,ae.props),Q.ref=ua(oe,ht,ae),Q.return=oe,oe=Q;break e}d(oe,ht);break}else s(oe,ht);ht=ht.sibling}ae.type===X?(Q=Ys(ae.props.children,oe.mode,Fe,ae.key),Q.return=oe,oe=Q):(Fe=Xl(ae.type,ae.key,ae.props,null,oe.mode,Fe),Fe.ref=ua(oe,Q,ae),Fe.return=oe,oe=Fe)}return O(oe);case re:e:{for(ht=ae.key;Q!==null;){if(Q.key===ht)if(Q.tag===4&&Q.stateNode.containerInfo===ae.containerInfo&&Q.stateNode.implementation===ae.implementation){d(oe,Q.sibling),Q=b(Q,ae.children||[]),Q.return=oe,oe=Q;break e}else{d(oe,Q);break}else s(oe,Q);Q=Q.sibling}Q=td(ae,oe.mode,Fe),Q.return=oe,oe=Q}return O(oe);case Ve:return ht=ae._init,An(oe,Q,ht(ae._payload),Fe)}if(qt(ae))return tt(oe,Q,ae,Fe);if(De(ae))return rt(oe,Q,ae,Fe);El(oe,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"?(ae=""+ae,Q!==null&&Q.tag===6?(d(oe,Q.sibling),Q=b(Q,ae),Q.return=oe,oe=Q):(d(oe,Q),Q=ed(ae,oe.mode,Fe),Q.return=oe,oe=Q),O(oe)):d(oe,Q)}return An}var vo=Ph(!0),Oh=Ph(!1),bl=rs(null),Sl=null,Co=null,uu=null;function du(){uu=Co=Sl=null}function fu(t){var s=bl.current;rn(bl),t._currentValue=s}function hu(t,s,d){for(;t!==null;){var m=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,m!==null&&(m.childLanes|=s)):m!==null&&(m.childLanes&s)!==s&&(m.childLanes|=s),t===d)break;t=t.return}}function Eo(t,s){Sl=t,uu=Co=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(br=!0),t.firstContext=null)}function zr(t){var s=t._currentValue;if(uu!==t)if(t={context:t,memoizedValue:s,next:null},Co===null){if(Sl===null)throw Error(a(308));Co=t,Sl.dependencies={lanes:0,firstContext:t}}else Co=Co.next=t;return s}var Vs=null;function pu(t){Vs===null?Vs=[t]:Vs.push(t)}function Mh(t,s,d,m){var b=s.interleaved;return b===null?(d.next=d,pu(s)):(d.next=b.next,b.next=d),s.interleaved=d,Mi(t,m)}function Mi(t,s){t.lanes|=s;var d=t.alternate;for(d!==null&&(d.lanes|=s),d=t,t=t.return;t!==null;)t.childLanes|=s,d=t.alternate,d!==null&&(d.childLanes|=s),d=t,t=t.return;return d.tag===3?d.stateNode:null}var os=!1;function mu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dh(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Di(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function as(t,s,d){var m=t.updateQueue;if(m===null)return null;if(m=m.shared,Vt&2){var b=m.pending;return b===null?s.next=s:(s.next=b.next,b.next=s),m.pending=s,Mi(t,d)}return b=m.interleaved,b===null?(s.next=s,pu(m)):(s.next=b.next,b.next=s),m.interleaved=s,Mi(t,d)}function Al(t,s,d){if(s=s.updateQueue,s!==null&&(s=s.shared,(d&4194240)!==0)){var m=s.lanes;m&=t.pendingLanes,d|=m,s.lanes=d,gn(t,d)}}function Lh(t,s){var d=t.updateQueue,m=t.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var b=null,T=null;if(d=d.firstBaseUpdate,d!==null){do{var O={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};T===null?b=T=O:T=T.next=O,d=d.next}while(d!==null);T===null?b=T=s:T=T.next=s}else b=T=s;d={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:T,shared:m.shared,effects:m.effects},t.updateQueue=d;return}t=d.lastBaseUpdate,t===null?d.firstBaseUpdate=s:t.next=s,d.lastBaseUpdate=s}function Tl(t,s,d,m){var b=t.updateQueue;os=!1;var T=b.firstBaseUpdate,O=b.lastBaseUpdate,H=b.shared.pending;if(H!==null){b.shared.pending=null;var K=H,fe=K.next;K.next=null,O===null?T=fe:O.next=fe,O=K;var Re=t.alternate;Re!==null&&(Re=Re.updateQueue,H=Re.lastBaseUpdate,H!==O&&(H===null?Re.firstBaseUpdate=fe:H.next=fe,Re.lastBaseUpdate=K))}if(T!==null){var Pe=b.baseState;O=0,Re=fe=K=null,H=T;do{var Te=H.lane,Ye=H.eventTime;if((m&Te)===Te){Re!==null&&(Re=Re.next={eventTime:Ye,lane:0,tag:H.tag,payload:H.payload,callback:H.callback,next:null});e:{var tt=t,rt=H;switch(Te=s,Ye=d,rt.tag){case 1:if(tt=rt.payload,typeof tt=="function"){Pe=tt.call(Ye,Pe,Te);break e}Pe=tt;break e;case 3:tt.flags=tt.flags&-65537|128;case 0:if(tt=rt.payload,Te=typeof tt=="function"?tt.call(Ye,Pe,Te):tt,Te==null)break e;Pe=ce({},Pe,Te);break e;case 2:os=!0}}H.callback!==null&&H.lane!==0&&(t.flags|=64,Te=b.effects,Te===null?b.effects=[H]:Te.push(H))}else Ye={eventTime:Ye,lane:Te,tag:H.tag,payload:H.payload,callback:H.callback,next:null},Re===null?(fe=Re=Ye,K=Pe):Re=Re.next=Ye,O|=Te;if(H=H.next,H===null){if(H=b.shared.pending,H===null)break;Te=H,H=Te.next,Te.next=null,b.lastBaseUpdate=Te,b.shared.pending=null}}while(!0);if(Re===null&&(K=Pe),b.baseState=K,b.firstBaseUpdate=fe,b.lastBaseUpdate=Re,s=b.shared.interleaved,s!==null){b=s;do O|=b.lane,b=b.next;while(b!==s)}else T===null&&(b.shared.lanes=0);Ws|=O,t.lanes=O,t.memoizedState=Pe}}function Bh(t,s,d){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var m=t[s],b=m.callback;if(b!==null){if(m.callback=null,m=d,typeof b!="function")throw Error(a(191,b));b.call(m)}}}var da={},hi=rs(da),fa=rs(da),ha=rs(da);function Us(t){if(t===da)throw Error(a(174));return t}function gu(t,s){switch(en(ha,s),en(fa,t),en(hi,da),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:jt(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=jt(s,t)}rn(hi),en(hi,s)}function bo(){rn(hi),rn(fa),rn(ha)}function jh(t){Us(ha.current);var s=Us(hi.current),d=jt(s,t.type);s!==d&&(en(fa,t),en(hi,d))}function xu(t){fa.current===t&&(rn(hi),rn(fa))}var fn=rs(0);function Il(t){for(var s=t;s!==null;){if(s.tag===13){var d=s.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var yu=[];function wu(){for(var t=0;t<yu.length;t++)yu[t]._workInProgressVersionPrimary=null;yu.length=0}var Nl=q.ReactCurrentDispatcher,vu=q.ReactCurrentBatchConfig,zs=0,hn=null,Fn=null,Wn=null,_l=!1,pa=!1,ma=0,Ex=0;function lr(){throw Error(a(321))}function Cu(t,s){if(s===null)return!1;for(var d=0;d<s.length&&d<t.length;d++)if(!ne(t[d],s[d]))return!1;return!0}function Eu(t,s,d,m,b,T){if(zs=T,hn=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Nl.current=t===null||t.memoizedState===null?Tx:Ix,t=d(m,b),pa){T=0;do{if(pa=!1,ma=0,25<=T)throw Error(a(301));T+=1,Wn=Fn=null,s.updateQueue=null,Nl.current=Nx,t=d(m,b)}while(pa)}if(Nl.current=Pl,s=Fn!==null&&Fn.next!==null,zs=0,Wn=Fn=hn=null,_l=!1,s)throw Error(a(300));return t}function bu(){var t=ma!==0;return ma=0,t}function pi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wn===null?hn.memoizedState=Wn=t:Wn=Wn.next=t,Wn}function Wr(){if(Fn===null){var t=hn.alternate;t=t!==null?t.memoizedState:null}else t=Fn.next;var s=Wn===null?hn.memoizedState:Wn.next;if(s!==null)Wn=s,Fn=t;else{if(t===null)throw Error(a(310));Fn=t,t={memoizedState:Fn.memoizedState,baseState:Fn.baseState,baseQueue:Fn.baseQueue,queue:Fn.queue,next:null},Wn===null?hn.memoizedState=Wn=t:Wn=Wn.next=t}return Wn}function ga(t,s){return typeof s=="function"?s(t):s}function Su(t){var s=Wr(),d=s.queue;if(d===null)throw Error(a(311));d.lastRenderedReducer=t;var m=Fn,b=m.baseQueue,T=d.pending;if(T!==null){if(b!==null){var O=b.next;b.next=T.next,T.next=O}m.baseQueue=b=T,d.pending=null}if(b!==null){T=b.next,m=m.baseState;var H=O=null,K=null,fe=T;do{var Re=fe.lane;if((zs&Re)===Re)K!==null&&(K=K.next={lane:0,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),m=fe.hasEagerState?fe.eagerState:t(m,fe.action);else{var Pe={lane:Re,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null};K===null?(H=K=Pe,O=m):K=K.next=Pe,hn.lanes|=Re,Ws|=Re}fe=fe.next}while(fe!==null&&fe!==T);K===null?O=m:K.next=H,ne(m,s.memoizedState)||(br=!0),s.memoizedState=m,s.baseState=O,s.baseQueue=K,d.lastRenderedState=m}if(t=d.interleaved,t!==null){b=t;do T=b.lane,hn.lanes|=T,Ws|=T,b=b.next;while(b!==t)}else b===null&&(d.lanes=0);return[s.memoizedState,d.dispatch]}function Au(t){var s=Wr(),d=s.queue;if(d===null)throw Error(a(311));d.lastRenderedReducer=t;var m=d.dispatch,b=d.pending,T=s.memoizedState;if(b!==null){d.pending=null;var O=b=b.next;do T=t(T,O.action),O=O.next;while(O!==b);ne(T,s.memoizedState)||(br=!0),s.memoizedState=T,s.baseQueue===null&&(s.baseState=T),d.lastRenderedState=T}return[T,m]}function Fh(){}function Vh(t,s){var d=hn,m=Wr(),b=s(),T=!ne(m.memoizedState,b);if(T&&(m.memoizedState=b,br=!0),m=m.queue,Tu(Wh.bind(null,d,m,t),[t]),m.getSnapshot!==s||T||Wn!==null&&Wn.memoizedState.tag&1){if(d.flags|=2048,xa(9,zh.bind(null,d,m,b,s),void 0,null),Hn===null)throw Error(a(349));zs&30||Uh(d,s,b)}return b}function Uh(t,s,d){t.flags|=16384,t={getSnapshot:s,value:d},s=hn.updateQueue,s===null?(s={lastEffect:null,stores:null},hn.updateQueue=s,s.stores=[t]):(d=s.stores,d===null?s.stores=[t]:d.push(t))}function zh(t,s,d,m){s.value=d,s.getSnapshot=m,Hh(s)&&Gh(t)}function Wh(t,s,d){return d(function(){Hh(s)&&Gh(t)})}function Hh(t){var s=t.getSnapshot;t=t.value;try{var d=s();return!ne(t,d)}catch{return!0}}function Gh(t){var s=Mi(t,1);s!==null&&ii(s,t,1,-1)}function Xh(t){var s=pi();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:t},s.queue=t,t=t.dispatch=Ax.bind(null,hn,t),[s.memoizedState,t]}function xa(t,s,d,m){return t={tag:t,create:s,destroy:d,deps:m,next:null},s=hn.updateQueue,s===null?(s={lastEffect:null,stores:null},hn.updateQueue=s,s.lastEffect=t.next=t):(d=s.lastEffect,d===null?s.lastEffect=t.next=t:(m=d.next,d.next=t,t.next=m,s.lastEffect=t)),t}function Yh(){return Wr().memoizedState}function Rl(t,s,d,m){var b=pi();hn.flags|=t,b.memoizedState=xa(1|s,d,void 0,m===void 0?null:m)}function kl(t,s,d,m){var b=Wr();m=m===void 0?null:m;var T=void 0;if(Fn!==null){var O=Fn.memoizedState;if(T=O.destroy,m!==null&&Cu(m,O.deps)){b.memoizedState=xa(s,d,T,m);return}}hn.flags|=t,b.memoizedState=xa(1|s,d,T,m)}function Zh(t,s){return Rl(8390656,8,t,s)}function Tu(t,s){return kl(2048,8,t,s)}function Kh(t,s){return kl(4,2,t,s)}function $h(t,s){return kl(4,4,t,s)}function qh(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Qh(t,s,d){return d=d!=null?d.concat([t]):null,kl(4,4,qh.bind(null,s,t),d)}function Iu(){}function Jh(t,s){var d=Wr();s=s===void 0?null:s;var m=d.memoizedState;return m!==null&&s!==null&&Cu(s,m[1])?m[0]:(d.memoizedState=[t,s],t)}function e0(t,s){var d=Wr();s=s===void 0?null:s;var m=d.memoizedState;return m!==null&&s!==null&&Cu(s,m[1])?m[0]:(t=t(),d.memoizedState=[t,s],t)}function t0(t,s,d){return zs&21?(ne(d,s)||(d=Dn(),hn.lanes|=d,Ws|=d,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,br=!0),t.memoizedState=d)}function bx(t,s){var d=Tt;Tt=d!==0&&4>d?d:4,t(!0);var m=vu.transition;vu.transition={};try{t(!1),s()}finally{Tt=d,vu.transition=m}}function n0(){return Wr().memoizedState}function Sx(t,s,d){var m=ds(t);if(d={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null},r0(t))i0(s,d);else if(d=Mh(t,s,d,m),d!==null){var b=pr();ii(d,t,m,b),s0(d,s,m)}}function Ax(t,s,d){var m=ds(t),b={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null};if(r0(t))i0(s,b);else{var T=t.alternate;if(t.lanes===0&&(T===null||T.lanes===0)&&(T=s.lastRenderedReducer,T!==null))try{var O=s.lastRenderedState,H=T(O,d);if(b.hasEagerState=!0,b.eagerState=H,ne(H,O)){var K=s.interleaved;K===null?(b.next=b,pu(s)):(b.next=K.next,K.next=b),s.interleaved=b;return}}catch{}finally{}d=Mh(t,s,b,m),d!==null&&(b=pr(),ii(d,t,m,b),s0(d,s,m))}}function r0(t){var s=t.alternate;return t===hn||s!==null&&s===hn}function i0(t,s){pa=_l=!0;var d=t.pending;d===null?s.next=s:(s.next=d.next,d.next=s),t.pending=s}function s0(t,s,d){if(d&4194240){var m=s.lanes;m&=t.pendingLanes,d|=m,s.lanes=d,gn(t,d)}}var Pl={readContext:zr,useCallback:lr,useContext:lr,useEffect:lr,useImperativeHandle:lr,useInsertionEffect:lr,useLayoutEffect:lr,useMemo:lr,useReducer:lr,useRef:lr,useState:lr,useDebugValue:lr,useDeferredValue:lr,useTransition:lr,useMutableSource:lr,useSyncExternalStore:lr,useId:lr,unstable_isNewReconciler:!1},Tx={readContext:zr,useCallback:function(t,s){return pi().memoizedState=[t,s===void 0?null:s],t},useContext:zr,useEffect:Zh,useImperativeHandle:function(t,s,d){return d=d!=null?d.concat([t]):null,Rl(4194308,4,qh.bind(null,s,t),d)},useLayoutEffect:function(t,s){return Rl(4194308,4,t,s)},useInsertionEffect:function(t,s){return Rl(4,2,t,s)},useMemo:function(t,s){var d=pi();return s=s===void 0?null:s,t=t(),d.memoizedState=[t,s],t},useReducer:function(t,s,d){var m=pi();return s=d!==void 0?d(s):s,m.memoizedState=m.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},m.queue=t,t=t.dispatch=Sx.bind(null,hn,t),[m.memoizedState,t]},useRef:function(t){var s=pi();return t={current:t},s.memoizedState=t},useState:Xh,useDebugValue:Iu,useDeferredValue:function(t){return pi().memoizedState=t},useTransition:function(){var t=Xh(!1),s=t[0];return t=bx.bind(null,t[1]),pi().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,d){var m=hn,b=pi();if(cn){if(d===void 0)throw Error(a(407));d=d()}else{if(d=s(),Hn===null)throw Error(a(349));zs&30||Uh(m,s,d)}b.memoizedState=d;var T={value:d,getSnapshot:s};return b.queue=T,Zh(Wh.bind(null,m,T,t),[t]),m.flags|=2048,xa(9,zh.bind(null,m,T,d,s),void 0,null),d},useId:function(){var t=pi(),s=Hn.identifierPrefix;if(cn){var d=Oi,m=Pi;d=(m&~(1<<32-fr(m)-1)).toString(32)+d,s=":"+s+"R"+d,d=ma++,0<d&&(s+="H"+d.toString(32)),s+=":"}else d=Ex++,s=":"+s+"r"+d.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},Ix={readContext:zr,useCallback:Jh,useContext:zr,useEffect:Tu,useImperativeHandle:Qh,useInsertionEffect:Kh,useLayoutEffect:$h,useMemo:e0,useReducer:Su,useRef:Yh,useState:function(){return Su(ga)},useDebugValue:Iu,useDeferredValue:function(t){var s=Wr();return t0(s,Fn.memoizedState,t)},useTransition:function(){var t=Su(ga)[0],s=Wr().memoizedState;return[t,s]},useMutableSource:Fh,useSyncExternalStore:Vh,useId:n0,unstable_isNewReconciler:!1},Nx={readContext:zr,useCallback:Jh,useContext:zr,useEffect:Tu,useImperativeHandle:Qh,useInsertionEffect:Kh,useLayoutEffect:$h,useMemo:e0,useReducer:Au,useRef:Yh,useState:function(){return Au(ga)},useDebugValue:Iu,useDeferredValue:function(t){var s=Wr();return Fn===null?s.memoizedState=t:t0(s,Fn.memoizedState,t)},useTransition:function(){var t=Au(ga)[0],s=Wr().memoizedState;return[t,s]},useMutableSource:Fh,useSyncExternalStore:Vh,useId:n0,unstable_isNewReconciler:!1};function ti(t,s){if(t&&t.defaultProps){s=ce({},s),t=t.defaultProps;for(var d in t)s[d]===void 0&&(s[d]=t[d]);return s}return s}function Nu(t,s,d,m){s=t.memoizedState,d=d(m,s),d=d==null?s:ce({},s,d),t.memoizedState=d,t.lanes===0&&(t.updateQueue.baseState=d)}var Ol={isMounted:function(t){return(t=t._reactInternals)?ir(t)===t:!1},enqueueSetState:function(t,s,d){t=t._reactInternals;var m=pr(),b=ds(t),T=Di(m,b);T.payload=s,d!=null&&(T.callback=d),s=as(t,T,b),s!==null&&(ii(s,t,b,m),Al(s,t,b))},enqueueReplaceState:function(t,s,d){t=t._reactInternals;var m=pr(),b=ds(t),T=Di(m,b);T.tag=1,T.payload=s,d!=null&&(T.callback=d),s=as(t,T,b),s!==null&&(ii(s,t,b,m),Al(s,t,b))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var d=pr(),m=ds(t),b=Di(d,m);b.tag=2,s!=null&&(b.callback=s),s=as(t,b,m),s!==null&&(ii(s,t,m,d),Al(s,t,m))}};function o0(t,s,d,m,b,T,O){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(m,T,O):s.prototype&&s.prototype.isPureReactComponent?!ue(d,m)||!ue(b,T):!0}function a0(t,s,d){var m=!1,b=is,T=s.contextType;return typeof T=="object"&&T!==null?T=zr(T):(b=Er(s)?Bs:ar.current,m=s.contextTypes,T=(m=m!=null)?go(t,b):is),s=new s(d,T),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ol,t.stateNode=s,s._reactInternals=t,m&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=b,t.__reactInternalMemoizedMaskedChildContext=T),s}function l0(t,s,d,m){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(d,m),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(d,m),s.state!==t&&Ol.enqueueReplaceState(s,s.state,null)}function _u(t,s,d,m){var b=t.stateNode;b.props=d,b.state=t.memoizedState,b.refs={},mu(t);var T=s.contextType;typeof T=="object"&&T!==null?b.context=zr(T):(T=Er(s)?Bs:ar.current,b.context=go(t,T)),b.state=t.memoizedState,T=s.getDerivedStateFromProps,typeof T=="function"&&(Nu(t,s,T,d),b.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(s=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),s!==b.state&&Ol.enqueueReplaceState(b,b.state,null),Tl(t,d,b,m),b.state=t.memoizedState),typeof b.componentDidMount=="function"&&(t.flags|=4194308)}function So(t,s){try{var d="",m=s;do d+=ge(m),m=m.return;while(m);var b=d}catch(T){b=`
Error generating stack: `+T.message+`
`+T.stack}return{value:t,source:s,stack:b,digest:null}}function Ru(t,s,d){return{value:t,source:null,stack:d??null,digest:s??null}}function ku(t,s){try{console.error(s.value)}catch(d){setTimeout(function(){throw d})}}var _x=typeof WeakMap=="function"?WeakMap:Map;function c0(t,s,d){d=Di(-1,d),d.tag=3,d.payload={element:null};var m=s.value;return d.callback=function(){Vl||(Vl=!0,Xu=m),ku(t,s)},d}function u0(t,s,d){d=Di(-1,d),d.tag=3;var m=t.type.getDerivedStateFromError;if(typeof m=="function"){var b=s.value;d.payload=function(){return m(b)},d.callback=function(){ku(t,s)}}var T=t.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(d.callback=function(){ku(t,s),typeof m!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var O=s.stack;this.componentDidCatch(s.value,{componentStack:O!==null?O:""})}),d}function d0(t,s,d){var m=t.pingCache;if(m===null){m=t.pingCache=new _x;var b=new Set;m.set(s,b)}else b=m.get(s),b===void 0&&(b=new Set,m.set(s,b));b.has(d)||(b.add(d),t=Wx.bind(null,t,s,d),s.then(t,t))}function f0(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function h0(t,s,d,m,b){return t.mode&1?(t.flags|=65536,t.lanes=b,t):(t===s?t.flags|=65536:(t.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(s=Di(-1,1),s.tag=2,as(d,s,1))),d.lanes|=1),t)}var Rx=q.ReactCurrentOwner,br=!1;function hr(t,s,d,m){s.child=t===null?Oh(s,null,d,m):vo(s,t.child,d,m)}function p0(t,s,d,m,b){d=d.render;var T=s.ref;return Eo(s,b),m=Eu(t,s,d,m,T,b),d=bu(),t!==null&&!br?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~b,Li(t,s,b)):(cn&&d&&su(s),s.flags|=1,hr(t,s,m,b),s.child)}function m0(t,s,d,m,b){if(t===null){var T=d.type;return typeof T=="function"&&!Ju(T)&&T.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(s.tag=15,s.type=T,g0(t,s,T,m,b)):(t=Xl(d.type,null,m,s,s.mode,b),t.ref=s.ref,t.return=s,s.child=t)}if(T=t.child,!(t.lanes&b)){var O=T.memoizedProps;if(d=d.compare,d=d!==null?d:ue,d(O,m)&&t.ref===s.ref)return Li(t,s,b)}return s.flags|=1,t=hs(T,m),t.ref=s.ref,t.return=s,s.child=t}function g0(t,s,d,m,b){if(t!==null){var T=t.memoizedProps;if(ue(T,m)&&t.ref===s.ref)if(br=!1,s.pendingProps=m=T,(t.lanes&b)!==0)t.flags&131072&&(br=!0);else return s.lanes=t.lanes,Li(t,s,b)}return Pu(t,s,d,m,b)}function x0(t,s,d){var m=s.pendingProps,b=m.children,T=t!==null?t.memoizedState:null;if(m.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},en(To,Lr),Lr|=d;else{if(!(d&1073741824))return t=T!==null?T.baseLanes|d:d,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,en(To,Lr),Lr|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=T!==null?T.baseLanes:d,en(To,Lr),Lr|=m}else T!==null?(m=T.baseLanes|d,s.memoizedState=null):m=d,en(To,Lr),Lr|=m;return hr(t,s,b,d),s.child}function y0(t,s){var d=s.ref;(t===null&&d!==null||t!==null&&t.ref!==d)&&(s.flags|=512,s.flags|=2097152)}function Pu(t,s,d,m,b){var T=Er(d)?Bs:ar.current;return T=go(s,T),Eo(s,b),d=Eu(t,s,d,m,T,b),m=bu(),t!==null&&!br?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~b,Li(t,s,b)):(cn&&m&&su(s),s.flags|=1,hr(t,s,d,b),s.child)}function w0(t,s,d,m,b){if(Er(d)){var T=!0;xl(s)}else T=!1;if(Eo(s,b),s.stateNode===null)Dl(t,s),a0(s,d,m),_u(s,d,m,b),m=!0;else if(t===null){var O=s.stateNode,H=s.memoizedProps;O.props=H;var K=O.context,fe=d.contextType;typeof fe=="object"&&fe!==null?fe=zr(fe):(fe=Er(d)?Bs:ar.current,fe=go(s,fe));var Re=d.getDerivedStateFromProps,Pe=typeof Re=="function"||typeof O.getSnapshotBeforeUpdate=="function";Pe||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(H!==m||K!==fe)&&l0(s,O,m,fe),os=!1;var Te=s.memoizedState;O.state=Te,Tl(s,m,O,b),K=s.memoizedState,H!==m||Te!==K||Cr.current||os?(typeof Re=="function"&&(Nu(s,d,Re,m),K=s.memoizedState),(H=os||o0(s,d,H,m,Te,K,fe))?(Pe||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(s.flags|=4194308)):(typeof O.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=m,s.memoizedState=K),O.props=m,O.state=K,O.context=fe,m=H):(typeof O.componentDidMount=="function"&&(s.flags|=4194308),m=!1)}else{O=s.stateNode,Dh(t,s),H=s.memoizedProps,fe=s.type===s.elementType?H:ti(s.type,H),O.props=fe,Pe=s.pendingProps,Te=O.context,K=d.contextType,typeof K=="object"&&K!==null?K=zr(K):(K=Er(d)?Bs:ar.current,K=go(s,K));var Ye=d.getDerivedStateFromProps;(Re=typeof Ye=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(H!==Pe||Te!==K)&&l0(s,O,m,K),os=!1,Te=s.memoizedState,O.state=Te,Tl(s,m,O,b);var tt=s.memoizedState;H!==Pe||Te!==tt||Cr.current||os?(typeof Ye=="function"&&(Nu(s,d,Ye,m),tt=s.memoizedState),(fe=os||o0(s,d,fe,m,Te,tt,K)||!1)?(Re||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(m,tt,K),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(m,tt,K)),typeof O.componentDidUpdate=="function"&&(s.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof O.componentDidUpdate!="function"||H===t.memoizedProps&&Te===t.memoizedState||(s.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||H===t.memoizedProps&&Te===t.memoizedState||(s.flags|=1024),s.memoizedProps=m,s.memoizedState=tt),O.props=m,O.state=tt,O.context=K,m=fe):(typeof O.componentDidUpdate!="function"||H===t.memoizedProps&&Te===t.memoizedState||(s.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||H===t.memoizedProps&&Te===t.memoizedState||(s.flags|=1024),m=!1)}return Ou(t,s,d,m,T,b)}function Ou(t,s,d,m,b,T){y0(t,s);var O=(s.flags&128)!==0;if(!m&&!O)return b&&Sh(s,d,!1),Li(t,s,T);m=s.stateNode,Rx.current=s;var H=O&&typeof d.getDerivedStateFromError!="function"?null:m.render();return s.flags|=1,t!==null&&O?(s.child=vo(s,t.child,null,T),s.child=vo(s,null,H,T)):hr(t,s,H,T),s.memoizedState=m.state,b&&Sh(s,d,!0),s.child}function v0(t){var s=t.stateNode;s.pendingContext?Eh(t,s.pendingContext,s.pendingContext!==s.context):s.context&&Eh(t,s.context,!1),gu(t,s.containerInfo)}function C0(t,s,d,m,b){return wo(),cu(b),s.flags|=256,hr(t,s,d,m),s.child}var Mu={dehydrated:null,treeContext:null,retryLane:0};function Du(t){return{baseLanes:t,cachePool:null,transitions:null}}function E0(t,s,d){var m=s.pendingProps,b=fn.current,T=!1,O=(s.flags&128)!==0,H;if((H=O)||(H=t!==null&&t.memoizedState===null?!1:(b&2)!==0),H?(T=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(b|=1),en(fn,b&1),t===null)return lu(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(O=m.children,t=m.fallback,T?(m=s.mode,T=s.child,O={mode:"hidden",children:O},!(m&1)&&T!==null?(T.childLanes=0,T.pendingProps=O):T=Yl(O,m,0,null),t=Ys(t,m,d,null),T.return=s,t.return=s,T.sibling=t,s.child=T,s.child.memoizedState=Du(d),s.memoizedState=Mu,t):Lu(s,O));if(b=t.memoizedState,b!==null&&(H=b.dehydrated,H!==null))return kx(t,s,O,m,H,b,d);if(T){T=m.fallback,O=s.mode,b=t.child,H=b.sibling;var K={mode:"hidden",children:m.children};return!(O&1)&&s.child!==b?(m=s.child,m.childLanes=0,m.pendingProps=K,s.deletions=null):(m=hs(b,K),m.subtreeFlags=b.subtreeFlags&14680064),H!==null?T=hs(H,T):(T=Ys(T,O,d,null),T.flags|=2),T.return=s,m.return=s,m.sibling=T,s.child=m,m=T,T=s.child,O=t.child.memoizedState,O=O===null?Du(d):{baseLanes:O.baseLanes|d,cachePool:null,transitions:O.transitions},T.memoizedState=O,T.childLanes=t.childLanes&~d,s.memoizedState=Mu,m}return T=t.child,t=T.sibling,m=hs(T,{mode:"visible",children:m.children}),!(s.mode&1)&&(m.lanes=d),m.return=s,m.sibling=null,t!==null&&(d=s.deletions,d===null?(s.deletions=[t],s.flags|=16):d.push(t)),s.child=m,s.memoizedState=null,m}function Lu(t,s){return s=Yl({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function Ml(t,s,d,m){return m!==null&&cu(m),vo(s,t.child,null,d),t=Lu(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function kx(t,s,d,m,b,T,O){if(d)return s.flags&256?(s.flags&=-257,m=Ru(Error(a(422))),Ml(t,s,O,m)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(T=m.fallback,b=s.mode,m=Yl({mode:"visible",children:m.children},b,0,null),T=Ys(T,b,O,null),T.flags|=2,m.return=s,T.return=s,m.sibling=T,s.child=m,s.mode&1&&vo(s,t.child,null,O),s.child.memoizedState=Du(O),s.memoizedState=Mu,T);if(!(s.mode&1))return Ml(t,s,O,null);if(b.data==="$!"){if(m=b.nextSibling&&b.nextSibling.dataset,m)var H=m.dgst;return m=H,T=Error(a(419)),m=Ru(T,m,void 0),Ml(t,s,O,m)}if(H=(O&t.childLanes)!==0,br||H){if(m=Hn,m!==null){switch(O&-O){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=b&(m.suspendedLanes|O)?0:b,b!==0&&b!==T.retryLane&&(T.retryLane=b,Mi(t,b),ii(m,t,b,-1))}return Qu(),m=Ru(Error(a(421))),Ml(t,s,O,m)}return b.data==="$?"?(s.flags|=128,s.child=t.child,s=Hx.bind(null,t),b._reactRetry=s,null):(t=T.treeContext,Dr=ns(b.nextSibling),Mr=s,cn=!0,ei=null,t!==null&&(Vr[Ur++]=Pi,Vr[Ur++]=Oi,Vr[Ur++]=js,Pi=t.id,Oi=t.overflow,js=s),s=Lu(s,m.children),s.flags|=4096,s)}function b0(t,s,d){t.lanes|=s;var m=t.alternate;m!==null&&(m.lanes|=s),hu(t.return,s,d)}function Bu(t,s,d,m,b){var T=t.memoizedState;T===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:b}:(T.isBackwards=s,T.rendering=null,T.renderingStartTime=0,T.last=m,T.tail=d,T.tailMode=b)}function S0(t,s,d){var m=s.pendingProps,b=m.revealOrder,T=m.tail;if(hr(t,s,m.children,d),m=fn.current,m&2)m=m&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&b0(t,d,s);else if(t.tag===19)b0(t,d,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}m&=1}if(en(fn,m),!(s.mode&1))s.memoizedState=null;else switch(b){case"forwards":for(d=s.child,b=null;d!==null;)t=d.alternate,t!==null&&Il(t)===null&&(b=d),d=d.sibling;d=b,d===null?(b=s.child,s.child=null):(b=d.sibling,d.sibling=null),Bu(s,!1,b,d,T);break;case"backwards":for(d=null,b=s.child,s.child=null;b!==null;){if(t=b.alternate,t!==null&&Il(t)===null){s.child=b;break}t=b.sibling,b.sibling=d,d=b,b=t}Bu(s,!0,d,null,T);break;case"together":Bu(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Dl(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function Li(t,s,d){if(t!==null&&(s.dependencies=t.dependencies),Ws|=s.lanes,!(d&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(a(153));if(s.child!==null){for(t=s.child,d=hs(t,t.pendingProps),s.child=d,d.return=s;t.sibling!==null;)t=t.sibling,d=d.sibling=hs(t,t.pendingProps),d.return=s;d.sibling=null}return s.child}function Px(t,s,d){switch(s.tag){case 3:v0(s),wo();break;case 5:jh(s);break;case 1:Er(s.type)&&xl(s);break;case 4:gu(s,s.stateNode.containerInfo);break;case 10:var m=s.type._context,b=s.memoizedProps.value;en(bl,m._currentValue),m._currentValue=b;break;case 13:if(m=s.memoizedState,m!==null)return m.dehydrated!==null?(en(fn,fn.current&1),s.flags|=128,null):d&s.child.childLanes?E0(t,s,d):(en(fn,fn.current&1),t=Li(t,s,d),t!==null?t.sibling:null);en(fn,fn.current&1);break;case 19:if(m=(d&s.childLanes)!==0,t.flags&128){if(m)return S0(t,s,d);s.flags|=128}if(b=s.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),en(fn,fn.current),m)break;return null;case 22:case 23:return s.lanes=0,x0(t,s,d)}return Li(t,s,d)}var A0,ju,T0,I0;A0=function(t,s){for(var d=s.child;d!==null;){if(d.tag===5||d.tag===6)t.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break;for(;d.sibling===null;){if(d.return===null||d.return===s)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},ju=function(){},T0=function(t,s,d,m){var b=t.memoizedProps;if(b!==m){t=s.stateNode,Us(hi.current);var T=null;switch(d){case"input":b=He(t,b),m=He(t,m),T=[];break;case"select":b=ce({},b,{value:void 0}),m=ce({},m,{value:void 0}),T=[];break;case"textarea":b=Wt(t,b),m=Wt(t,m),T=[];break;default:typeof b.onClick!="function"&&typeof m.onClick=="function"&&(t.onclick=pl)}et(d,m);var O;d=null;for(fe in b)if(!m.hasOwnProperty(fe)&&b.hasOwnProperty(fe)&&b[fe]!=null)if(fe==="style"){var H=b[fe];for(O in H)H.hasOwnProperty(O)&&(d||(d={}),d[O]="")}else fe!=="dangerouslySetInnerHTML"&&fe!=="children"&&fe!=="suppressContentEditableWarning"&&fe!=="suppressHydrationWarning"&&fe!=="autoFocus"&&(p.hasOwnProperty(fe)?T||(T=[]):(T=T||[]).push(fe,null));for(fe in m){var K=m[fe];if(H=b!=null?b[fe]:void 0,m.hasOwnProperty(fe)&&K!==H&&(K!=null||H!=null))if(fe==="style")if(H){for(O in H)!H.hasOwnProperty(O)||K&&K.hasOwnProperty(O)||(d||(d={}),d[O]="");for(O in K)K.hasOwnProperty(O)&&H[O]!==K[O]&&(d||(d={}),d[O]=K[O])}else d||(T||(T=[]),T.push(fe,d)),d=K;else fe==="dangerouslySetInnerHTML"?(K=K?K.__html:void 0,H=H?H.__html:void 0,K!=null&&H!==K&&(T=T||[]).push(fe,K)):fe==="children"?typeof K!="string"&&typeof K!="number"||(T=T||[]).push(fe,""+K):fe!=="suppressContentEditableWarning"&&fe!=="suppressHydrationWarning"&&(p.hasOwnProperty(fe)?(K!=null&&fe==="onScroll"&&nn("scroll",t),T||H===K||(T=[])):(T=T||[]).push(fe,K))}d&&(T=T||[]).push("style",d);var fe=T;(s.updateQueue=fe)&&(s.flags|=4)}},I0=function(t,s,d,m){d!==m&&(s.flags|=4)};function ya(t,s){if(!cn)switch(t.tailMode){case"hidden":s=t.tail;for(var d=null;s!==null;)s.alternate!==null&&(d=s),s=s.sibling;d===null?t.tail=null:d.sibling=null;break;case"collapsed":d=t.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:m.sibling=null}}function cr(t){var s=t.alternate!==null&&t.alternate.child===t.child,d=0,m=0;if(s)for(var b=t.child;b!==null;)d|=b.lanes|b.childLanes,m|=b.subtreeFlags&14680064,m|=b.flags&14680064,b.return=t,b=b.sibling;else for(b=t.child;b!==null;)d|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=t,b=b.sibling;return t.subtreeFlags|=m,t.childLanes=d,s}function Ox(t,s,d){var m=s.pendingProps;switch(ou(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cr(s),null;case 1:return Er(s.type)&&gl(),cr(s),null;case 3:return m=s.stateNode,bo(),rn(Cr),rn(ar),wu(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(t===null||t.child===null)&&(Cl(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,ei!==null&&(Ku(ei),ei=null))),ju(t,s),cr(s),null;case 5:xu(s);var b=Us(ha.current);if(d=s.type,t!==null&&s.stateNode!=null)T0(t,s,d,m,b),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!m){if(s.stateNode===null)throw Error(a(166));return cr(s),null}if(t=Us(hi.current),Cl(s)){m=s.stateNode,d=s.type;var T=s.memoizedProps;switch(m[fi]=s,m[la]=T,t=(s.mode&1)!==0,d){case"dialog":nn("cancel",m),nn("close",m);break;case"iframe":case"object":case"embed":nn("load",m);break;case"video":case"audio":for(b=0;b<sa.length;b++)nn(sa[b],m);break;case"source":nn("error",m);break;case"img":case"image":case"link":nn("error",m),nn("load",m);break;case"details":nn("toggle",m);break;case"input":Ze(m,T),nn("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!T.multiple},nn("invalid",m);break;case"textarea":nr(m,T),nn("invalid",m)}et(d,T),b=null;for(var O in T)if(T.hasOwnProperty(O)){var H=T[O];O==="children"?typeof H=="string"?m.textContent!==H&&(T.suppressHydrationWarning!==!0&&hl(m.textContent,H,t),b=["children",H]):typeof H=="number"&&m.textContent!==""+H&&(T.suppressHydrationWarning!==!0&&hl(m.textContent,H,t),b=["children",""+H]):p.hasOwnProperty(O)&&H!=null&&O==="onScroll"&&nn("scroll",m)}switch(d){case"input":Ae(m),$e(m,T,!0);break;case"textarea":Ae(m),kt(m);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(m.onclick=pl)}m=b,s.updateQueue=m,m!==null&&(s.flags|=4)}else{O=b.nodeType===9?b:b.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ut(d)),t==="http://www.w3.org/1999/xhtml"?d==="script"?(t=O.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof m.is=="string"?t=O.createElement(d,{is:m.is}):(t=O.createElement(d),d==="select"&&(O=t,m.multiple?O.multiple=!0:m.size&&(O.size=m.size))):t=O.createElementNS(t,d),t[fi]=s,t[la]=m,A0(t,s,!1,!1),s.stateNode=t;e:{switch(O=ft(d,m),d){case"dialog":nn("cancel",t),nn("close",t),b=m;break;case"iframe":case"object":case"embed":nn("load",t),b=m;break;case"video":case"audio":for(b=0;b<sa.length;b++)nn(sa[b],t);b=m;break;case"source":nn("error",t),b=m;break;case"img":case"image":case"link":nn("error",t),nn("load",t),b=m;break;case"details":nn("toggle",t),b=m;break;case"input":Ze(t,m),b=He(t,m),nn("invalid",t);break;case"option":b=m;break;case"select":t._wrapperState={wasMultiple:!!m.multiple},b=ce({},m,{value:void 0}),nn("invalid",t);break;case"textarea":nr(t,m),b=Wt(t,m),nn("invalid",t);break;default:b=m}et(d,b),H=b;for(T in H)if(H.hasOwnProperty(T)){var K=H[T];T==="style"?me(t,K):T==="dangerouslySetInnerHTML"?(K=K?K.__html:void 0,K!=null&&Ht(t,K)):T==="children"?typeof K=="string"?(d!=="textarea"||K!=="")&&St(t,K):typeof K=="number"&&St(t,""+K):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(p.hasOwnProperty(T)?K!=null&&T==="onScroll"&&nn("scroll",t):K!=null&&F(t,T,K,O))}switch(d){case"input":Ae(t),$e(t,m,!1);break;case"textarea":Ae(t),kt(t);break;case"option":m.value!=null&&t.setAttribute("value",""+ve(m.value));break;case"select":t.multiple=!!m.multiple,T=m.value,T!=null?je(t,!!m.multiple,T,!1):m.defaultValue!=null&&je(t,!!m.multiple,m.defaultValue,!0);break;default:typeof b.onClick=="function"&&(t.onclick=pl)}switch(d){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return cr(s),null;case 6:if(t&&s.stateNode!=null)I0(t,s,t.memoizedProps,m);else{if(typeof m!="string"&&s.stateNode===null)throw Error(a(166));if(d=Us(ha.current),Us(hi.current),Cl(s)){if(m=s.stateNode,d=s.memoizedProps,m[fi]=s,(T=m.nodeValue!==d)&&(t=Mr,t!==null))switch(t.tag){case 3:hl(m.nodeValue,d,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&hl(m.nodeValue,d,(t.mode&1)!==0)}T&&(s.flags|=4)}else m=(d.nodeType===9?d:d.ownerDocument).createTextNode(m),m[fi]=s,s.stateNode=m}return cr(s),null;case 13:if(rn(fn),m=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(cn&&Dr!==null&&s.mode&1&&!(s.flags&128))Rh(),wo(),s.flags|=98560,T=!1;else if(T=Cl(s),m!==null&&m.dehydrated!==null){if(t===null){if(!T)throw Error(a(318));if(T=s.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(a(317));T[fi]=s}else wo(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;cr(s),T=!1}else ei!==null&&(Ku(ei),ei=null),T=!0;if(!T)return s.flags&65536?s:null}return s.flags&128?(s.lanes=d,s):(m=m!==null,m!==(t!==null&&t.memoizedState!==null)&&m&&(s.child.flags|=8192,s.mode&1&&(t===null||fn.current&1?Vn===0&&(Vn=3):Qu())),s.updateQueue!==null&&(s.flags|=4),cr(s),null);case 4:return bo(),ju(t,s),t===null&&oa(s.stateNode.containerInfo),cr(s),null;case 10:return fu(s.type._context),cr(s),null;case 17:return Er(s.type)&&gl(),cr(s),null;case 19:if(rn(fn),T=s.memoizedState,T===null)return cr(s),null;if(m=(s.flags&128)!==0,O=T.rendering,O===null)if(m)ya(T,!1);else{if(Vn!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(O=Il(t),O!==null){for(s.flags|=128,ya(T,!1),m=O.updateQueue,m!==null&&(s.updateQueue=m,s.flags|=4),s.subtreeFlags=0,m=d,d=s.child;d!==null;)T=d,t=m,T.flags&=14680066,O=T.alternate,O===null?(T.childLanes=0,T.lanes=t,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=O.childLanes,T.lanes=O.lanes,T.child=O.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=O.memoizedProps,T.memoizedState=O.memoizedState,T.updateQueue=O.updateQueue,T.type=O.type,t=O.dependencies,T.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),d=d.sibling;return en(fn,fn.current&1|2),s.child}t=t.sibling}T.tail!==null&&Nt()>Io&&(s.flags|=128,m=!0,ya(T,!1),s.lanes=4194304)}else{if(!m)if(t=Il(O),t!==null){if(s.flags|=128,m=!0,d=t.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),ya(T,!0),T.tail===null&&T.tailMode==="hidden"&&!O.alternate&&!cn)return cr(s),null}else 2*Nt()-T.renderingStartTime>Io&&d!==1073741824&&(s.flags|=128,m=!0,ya(T,!1),s.lanes=4194304);T.isBackwards?(O.sibling=s.child,s.child=O):(d=T.last,d!==null?d.sibling=O:s.child=O,T.last=O)}return T.tail!==null?(s=T.tail,T.rendering=s,T.tail=s.sibling,T.renderingStartTime=Nt(),s.sibling=null,d=fn.current,en(fn,m?d&1|2:d&1),s):(cr(s),null);case 22:case 23:return qu(),m=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==m&&(s.flags|=8192),m&&s.mode&1?Lr&1073741824&&(cr(s),s.subtreeFlags&6&&(s.flags|=8192)):cr(s),null;case 24:return null;case 25:return null}throw Error(a(156,s.tag))}function Mx(t,s){switch(ou(s),s.tag){case 1:return Er(s.type)&&gl(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return bo(),rn(Cr),rn(ar),wu(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return xu(s),null;case 13:if(rn(fn),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(a(340));wo()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return rn(fn),null;case 4:return bo(),null;case 10:return fu(s.type._context),null;case 22:case 23:return qu(),null;case 24:return null;default:return null}}var Ll=!1,ur=!1,Dx=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function Ao(t,s){var d=t.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(m){yn(t,s,m)}else d.current=null}function Fu(t,s,d){try{d()}catch(m){yn(t,s,m)}}var N0=!1;function Lx(t,s){if(qc=ui,t=_t(),Et(t)){if("selectionStart"in t)var d={start:t.selectionStart,end:t.selectionEnd};else e:{d=(d=t.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var b=m.anchorOffset,T=m.focusNode;m=m.focusOffset;try{d.nodeType,T.nodeType}catch{d=null;break e}var O=0,H=-1,K=-1,fe=0,Re=0,Pe=t,Te=null;t:for(;;){for(var Ye;Pe!==d||b!==0&&Pe.nodeType!==3||(H=O+b),Pe!==T||m!==0&&Pe.nodeType!==3||(K=O+m),Pe.nodeType===3&&(O+=Pe.nodeValue.length),(Ye=Pe.firstChild)!==null;)Te=Pe,Pe=Ye;for(;;){if(Pe===t)break t;if(Te===d&&++fe===b&&(H=O),Te===T&&++Re===m&&(K=O),(Ye=Pe.nextSibling)!==null)break;Pe=Te,Te=Pe.parentNode}Pe=Ye}d=H===-1||K===-1?null:{start:H,end:K}}else d=null}d=d||{start:0,end:0}}else d=null;for(Qc={focusedElem:t,selectionRange:d},ui=!1,Qe=s;Qe!==null;)if(s=Qe,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Qe=t;else for(;Qe!==null;){s=Qe;try{var tt=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(tt!==null){var rt=tt.memoizedProps,An=tt.memoizedState,oe=s.stateNode,Q=oe.getSnapshotBeforeUpdate(s.elementType===s.type?rt:ti(s.type,rt),An);oe.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:var ae=s.stateNode.containerInfo;ae.nodeType===1?ae.textContent="":ae.nodeType===9&&ae.documentElement&&ae.removeChild(ae.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(Fe){yn(s,s.return,Fe)}if(t=s.sibling,t!==null){t.return=s.return,Qe=t;break}Qe=s.return}return tt=N0,N0=!1,tt}function wa(t,s,d){var m=s.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var b=m=m.next;do{if((b.tag&t)===t){var T=b.destroy;b.destroy=void 0,T!==void 0&&Fu(s,d,T)}b=b.next}while(b!==m)}}function Bl(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var d=s=s.next;do{if((d.tag&t)===t){var m=d.create;d.destroy=m()}d=d.next}while(d!==s)}}function Vu(t){var s=t.ref;if(s!==null){var d=t.stateNode;switch(t.tag){case 5:t=d;break;default:t=d}typeof s=="function"?s(t):s.current=t}}function _0(t){var s=t.alternate;s!==null&&(t.alternate=null,_0(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[fi],delete s[la],delete s[nu],delete s[yx],delete s[wx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function R0(t){return t.tag===5||t.tag===3||t.tag===4}function k0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||R0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Uu(t,s,d){var m=t.tag;if(m===5||m===6)t=t.stateNode,s?d.nodeType===8?d.parentNode.insertBefore(t,s):d.insertBefore(t,s):(d.nodeType===8?(s=d.parentNode,s.insertBefore(t,d)):(s=d,s.appendChild(t)),d=d._reactRootContainer,d!=null||s.onclick!==null||(s.onclick=pl));else if(m!==4&&(t=t.child,t!==null))for(Uu(t,s,d),t=t.sibling;t!==null;)Uu(t,s,d),t=t.sibling}function zu(t,s,d){var m=t.tag;if(m===5||m===6)t=t.stateNode,s?d.insertBefore(t,s):d.appendChild(t);else if(m!==4&&(t=t.child,t!==null))for(zu(t,s,d),t=t.sibling;t!==null;)zu(t,s,d),t=t.sibling}var qn=null,ni=!1;function ls(t,s,d){for(d=d.child;d!==null;)P0(t,s,d),d=d.sibling}function P0(t,s,d){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(Pt,d)}catch{}switch(d.tag){case 5:ur||Ao(d,s);case 6:var m=qn,b=ni;qn=null,ls(t,s,d),qn=m,ni=b,qn!==null&&(ni?(t=qn,d=d.stateNode,t.nodeType===8?t.parentNode.removeChild(d):t.removeChild(d)):qn.removeChild(d.stateNode));break;case 18:qn!==null&&(ni?(t=qn,d=d.stateNode,t.nodeType===8?tu(t.parentNode,d):t.nodeType===1&&tu(t,d),qr(t)):tu(qn,d.stateNode));break;case 4:m=qn,b=ni,qn=d.stateNode.containerInfo,ni=!0,ls(t,s,d),qn=m,ni=b;break;case 0:case 11:case 14:case 15:if(!ur&&(m=d.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){b=m=m.next;do{var T=b,O=T.destroy;T=T.tag,O!==void 0&&(T&2||T&4)&&Fu(d,s,O),b=b.next}while(b!==m)}ls(t,s,d);break;case 1:if(!ur&&(Ao(d,s),m=d.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=d.memoizedProps,m.state=d.memoizedState,m.componentWillUnmount()}catch(H){yn(d,s,H)}ls(t,s,d);break;case 21:ls(t,s,d);break;case 22:d.mode&1?(ur=(m=ur)||d.memoizedState!==null,ls(t,s,d),ur=m):ls(t,s,d);break;default:ls(t,s,d)}}function O0(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var d=t.stateNode;d===null&&(d=t.stateNode=new Dx),s.forEach(function(m){var b=Gx.bind(null,t,m);d.has(m)||(d.add(m),m.then(b,b))})}}function ri(t,s){var d=s.deletions;if(d!==null)for(var m=0;m<d.length;m++){var b=d[m];try{var T=t,O=s,H=O;e:for(;H!==null;){switch(H.tag){case 5:qn=H.stateNode,ni=!1;break e;case 3:qn=H.stateNode.containerInfo,ni=!0;break e;case 4:qn=H.stateNode.containerInfo,ni=!0;break e}H=H.return}if(qn===null)throw Error(a(160));P0(T,O,b),qn=null,ni=!1;var K=b.alternate;K!==null&&(K.return=null),b.return=null}catch(fe){yn(b,s,fe)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)M0(s,t),s=s.sibling}function M0(t,s){var d=t.alternate,m=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ri(s,t),mi(t),m&4){try{wa(3,t,t.return),Bl(3,t)}catch(rt){yn(t,t.return,rt)}try{wa(5,t,t.return)}catch(rt){yn(t,t.return,rt)}}break;case 1:ri(s,t),mi(t),m&512&&d!==null&&Ao(d,d.return);break;case 5:if(ri(s,t),mi(t),m&512&&d!==null&&Ao(d,d.return),t.flags&32){var b=t.stateNode;try{St(b,"")}catch(rt){yn(t,t.return,rt)}}if(m&4&&(b=t.stateNode,b!=null)){var T=t.memoizedProps,O=d!==null?d.memoizedProps:T,H=t.type,K=t.updateQueue;if(t.updateQueue=null,K!==null)try{H==="input"&&T.type==="radio"&&T.name!=null&&Rt(b,T),ft(H,O);var fe=ft(H,T);for(O=0;O<K.length;O+=2){var Re=K[O],Pe=K[O+1];Re==="style"?me(b,Pe):Re==="dangerouslySetInnerHTML"?Ht(b,Pe):Re==="children"?St(b,Pe):F(b,Re,Pe,fe)}switch(H){case"input":wt(b,T);break;case"textarea":Ue(b,T);break;case"select":var Te=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!T.multiple;var Ye=T.value;Ye!=null?je(b,!!T.multiple,Ye,!1):Te!==!!T.multiple&&(T.defaultValue!=null?je(b,!!T.multiple,T.defaultValue,!0):je(b,!!T.multiple,T.multiple?[]:"",!1))}b[la]=T}catch(rt){yn(t,t.return,rt)}}break;case 6:if(ri(s,t),mi(t),m&4){if(t.stateNode===null)throw Error(a(162));b=t.stateNode,T=t.memoizedProps;try{b.nodeValue=T}catch(rt){yn(t,t.return,rt)}}break;case 3:if(ri(s,t),mi(t),m&4&&d!==null&&d.memoizedState.isDehydrated)try{qr(s.containerInfo)}catch(rt){yn(t,t.return,rt)}break;case 4:ri(s,t),mi(t);break;case 13:ri(s,t),mi(t),b=t.child,b.flags&8192&&(T=b.memoizedState!==null,b.stateNode.isHidden=T,!T||b.alternate!==null&&b.alternate.memoizedState!==null||(Gu=Nt())),m&4&&O0(t);break;case 22:if(Re=d!==null&&d.memoizedState!==null,t.mode&1?(ur=(fe=ur)||Re,ri(s,t),ur=fe):ri(s,t),mi(t),m&8192){if(fe=t.memoizedState!==null,(t.stateNode.isHidden=fe)&&!Re&&t.mode&1)for(Qe=t,Re=t.child;Re!==null;){for(Pe=Qe=Re;Qe!==null;){switch(Te=Qe,Ye=Te.child,Te.tag){case 0:case 11:case 14:case 15:wa(4,Te,Te.return);break;case 1:Ao(Te,Te.return);var tt=Te.stateNode;if(typeof tt.componentWillUnmount=="function"){m=Te,d=Te.return;try{s=m,tt.props=s.memoizedProps,tt.state=s.memoizedState,tt.componentWillUnmount()}catch(rt){yn(m,d,rt)}}break;case 5:Ao(Te,Te.return);break;case 22:if(Te.memoizedState!==null){B0(Pe);continue}}Ye!==null?(Ye.return=Te,Qe=Ye):B0(Pe)}Re=Re.sibling}e:for(Re=null,Pe=t;;){if(Pe.tag===5){if(Re===null){Re=Pe;try{b=Pe.stateNode,fe?(T=b.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(H=Pe.stateNode,K=Pe.memoizedProps.style,O=K!=null&&K.hasOwnProperty("display")?K.display:null,H.style.display=_e("display",O))}catch(rt){yn(t,t.return,rt)}}}else if(Pe.tag===6){if(Re===null)try{Pe.stateNode.nodeValue=fe?"":Pe.memoizedProps}catch(rt){yn(t,t.return,rt)}}else if((Pe.tag!==22&&Pe.tag!==23||Pe.memoizedState===null||Pe===t)&&Pe.child!==null){Pe.child.return=Pe,Pe=Pe.child;continue}if(Pe===t)break e;for(;Pe.sibling===null;){if(Pe.return===null||Pe.return===t)break e;Re===Pe&&(Re=null),Pe=Pe.return}Re===Pe&&(Re=null),Pe.sibling.return=Pe.return,Pe=Pe.sibling}}break;case 19:ri(s,t),mi(t),m&4&&O0(t);break;case 21:break;default:ri(s,t),mi(t)}}function mi(t){var s=t.flags;if(s&2){try{e:{for(var d=t.return;d!==null;){if(R0(d)){var m=d;break e}d=d.return}throw Error(a(160))}switch(m.tag){case 5:var b=m.stateNode;m.flags&32&&(St(b,""),m.flags&=-33);var T=k0(t);zu(t,T,b);break;case 3:case 4:var O=m.stateNode.containerInfo,H=k0(t);Uu(t,H,O);break;default:throw Error(a(161))}}catch(K){yn(t,t.return,K)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Bx(t,s,d){Qe=t,D0(t)}function D0(t,s,d){for(var m=(t.mode&1)!==0;Qe!==null;){var b=Qe,T=b.child;if(b.tag===22&&m){var O=b.memoizedState!==null||Ll;if(!O){var H=b.alternate,K=H!==null&&H.memoizedState!==null||ur;H=Ll;var fe=ur;if(Ll=O,(ur=K)&&!fe)for(Qe=b;Qe!==null;)O=Qe,K=O.child,O.tag===22&&O.memoizedState!==null?j0(b):K!==null?(K.return=O,Qe=K):j0(b);for(;T!==null;)Qe=T,D0(T),T=T.sibling;Qe=b,Ll=H,ur=fe}L0(t)}else b.subtreeFlags&8772&&T!==null?(T.return=b,Qe=T):L0(t)}}function L0(t){for(;Qe!==null;){var s=Qe;if(s.flags&8772){var d=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:ur||Bl(5,s);break;case 1:var m=s.stateNode;if(s.flags&4&&!ur)if(d===null)m.componentDidMount();else{var b=s.elementType===s.type?d.memoizedProps:ti(s.type,d.memoizedProps);m.componentDidUpdate(b,d.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var T=s.updateQueue;T!==null&&Bh(s,T,m);break;case 3:var O=s.updateQueue;if(O!==null){if(d=null,s.child!==null)switch(s.child.tag){case 5:d=s.child.stateNode;break;case 1:d=s.child.stateNode}Bh(s,O,d)}break;case 5:var H=s.stateNode;if(d===null&&s.flags&4){d=H;var K=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":K.autoFocus&&d.focus();break;case"img":K.src&&(d.src=K.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var fe=s.alternate;if(fe!==null){var Re=fe.memoizedState;if(Re!==null){var Pe=Re.dehydrated;Pe!==null&&qr(Pe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}ur||s.flags&512&&Vu(s)}catch(Te){yn(s,s.return,Te)}}if(s===t){Qe=null;break}if(d=s.sibling,d!==null){d.return=s.return,Qe=d;break}Qe=s.return}}function B0(t){for(;Qe!==null;){var s=Qe;if(s===t){Qe=null;break}var d=s.sibling;if(d!==null){d.return=s.return,Qe=d;break}Qe=s.return}}function j0(t){for(;Qe!==null;){var s=Qe;try{switch(s.tag){case 0:case 11:case 15:var d=s.return;try{Bl(4,s)}catch(K){yn(s,d,K)}break;case 1:var m=s.stateNode;if(typeof m.componentDidMount=="function"){var b=s.return;try{m.componentDidMount()}catch(K){yn(s,b,K)}}var T=s.return;try{Vu(s)}catch(K){yn(s,T,K)}break;case 5:var O=s.return;try{Vu(s)}catch(K){yn(s,O,K)}}}catch(K){yn(s,s.return,K)}if(s===t){Qe=null;break}var H=s.sibling;if(H!==null){H.return=s.return,Qe=H;break}Qe=s.return}}var jx=Math.ceil,jl=q.ReactCurrentDispatcher,Wu=q.ReactCurrentOwner,Hr=q.ReactCurrentBatchConfig,Vt=0,Hn=null,_n=null,Qn=0,Lr=0,To=rs(0),Vn=0,va=null,Ws=0,Fl=0,Hu=0,Ca=null,Sr=null,Gu=0,Io=1/0,Bi=null,Vl=!1,Xu=null,cs=null,Ul=!1,us=null,zl=0,Ea=0,Yu=null,Wl=-1,Hl=0;function pr(){return Vt&6?Nt():Wl!==-1?Wl:Wl=Nt()}function ds(t){return t.mode&1?Vt&2&&Qn!==0?Qn&-Qn:Cx.transition!==null?(Hl===0&&(Hl=Dn()),Hl):(t=Tt,t!==0||(t=window.event,t=t===void 0?16:Ko(t.type)),t):1}function ii(t,s,d,m){if(50<Ea)throw Ea=0,Yu=null,Error(a(185));V(t,d,m),(!(Vt&2)||t!==Hn)&&(t===Hn&&(!(Vt&2)&&(Fl|=d),Vn===4&&fs(t,Qn)),Ar(t,m),d===1&&Vt===0&&!(s.mode&1)&&(Io=Nt()+500,yl&&ss()))}function Ar(t,s){var d=t.callbackNode;Xi(t,s);var m=Rr(t,t===Hn?Qn:0);if(m===0)d!==null&&gt(d),t.callbackNode=null,t.callbackPriority=0;else if(s=m&-m,t.callbackPriority!==s){if(d!=null&&gt(d),s===1)t.tag===0?vx(V0.bind(null,t)):Ah(V0.bind(null,t)),gx(function(){!(Vt&6)&&ss()}),d=null;else{switch(Ja(m)){case 1:d=Ce;break;case 4:d=vr;break;case 16:d=Bt;break;case 536870912:d=Gi;break;default:d=Bt}d=Z0(d,F0.bind(null,t))}t.callbackPriority=s,t.callbackNode=d}}function F0(t,s){if(Wl=-1,Hl=0,Vt&6)throw Error(a(327));var d=t.callbackNode;if(No()&&t.callbackNode!==d)return null;var m=Rr(t,t===Hn?Qn:0);if(m===0)return null;if(m&30||m&t.expiredLanes||s)s=Gl(t,m);else{s=m;var b=Vt;Vt|=2;var T=z0();(Hn!==t||Qn!==s)&&(Bi=null,Io=Nt()+500,Gs(t,s));do try{Ux();break}catch(H){U0(t,H)}while(!0);du(),jl.current=T,Vt=b,_n!==null?s=0:(Hn=null,Qn=0,s=Vn)}if(s!==0){if(s===2&&(b=Gt(t),b!==0&&(m=b,s=Zu(t,b))),s===1)throw d=va,Gs(t,0),fs(t,m),Ar(t,Nt()),d;if(s===6)fs(t,m);else{if(b=t.current.alternate,!(m&30)&&!Fx(b)&&(s=Gl(t,m),s===2&&(T=Gt(t),T!==0&&(m=T,s=Zu(t,T))),s===1))throw d=va,Gs(t,0),fs(t,m),Ar(t,Nt()),d;switch(t.finishedWork=b,t.finishedLanes=m,s){case 0:case 1:throw Error(a(345));case 2:Xs(t,Sr,Bi);break;case 3:if(fs(t,m),(m&130023424)===m&&(s=Gu+500-Nt(),10<s)){if(Rr(t,0)!==0)break;if(b=t.suspendedLanes,(b&m)!==m){pr(),t.pingedLanes|=t.suspendedLanes&b;break}t.timeoutHandle=eu(Xs.bind(null,t,Sr,Bi),s);break}Xs(t,Sr,Bi);break;case 4:if(fs(t,m),(m&4194240)===m)break;for(s=t.eventTimes,b=-1;0<m;){var O=31-fr(m);T=1<<O,O=s[O],O>b&&(b=O),m&=~T}if(m=b,m=Nt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*jx(m/1960))-m,10<m){t.timeoutHandle=eu(Xs.bind(null,t,Sr,Bi),m);break}Xs(t,Sr,Bi);break;case 5:Xs(t,Sr,Bi);break;default:throw Error(a(329))}}}return Ar(t,Nt()),t.callbackNode===d?F0.bind(null,t):null}function Zu(t,s){var d=Ca;return t.current.memoizedState.isDehydrated&&(Gs(t,s).flags|=256),t=Gl(t,s),t!==2&&(s=Sr,Sr=d,s!==null&&Ku(s)),t}function Ku(t){Sr===null?Sr=t:Sr.push.apply(Sr,t)}function Fx(t){for(var s=t;;){if(s.flags&16384){var d=s.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var m=0;m<d.length;m++){var b=d[m],T=b.getSnapshot;b=b.value;try{if(!ne(T(),b))return!1}catch{return!1}}}if(d=s.child,s.subtreeFlags&16384&&d!==null)d.return=s,s=d;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function fs(t,s){for(s&=~Hu,s&=~Fl,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var d=31-fr(s),m=1<<d;t[d]=-1,s&=~m}}function V0(t){if(Vt&6)throw Error(a(327));No();var s=Rr(t,0);if(!(s&1))return Ar(t,Nt()),null;var d=Gl(t,s);if(t.tag!==0&&d===2){var m=Gt(t);m!==0&&(s=m,d=Zu(t,m))}if(d===1)throw d=va,Gs(t,0),fs(t,s),Ar(t,Nt()),d;if(d===6)throw Error(a(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,Xs(t,Sr,Bi),Ar(t,Nt()),null}function $u(t,s){var d=Vt;Vt|=1;try{return t(s)}finally{Vt=d,Vt===0&&(Io=Nt()+500,yl&&ss())}}function Hs(t){us!==null&&us.tag===0&&!(Vt&6)&&No();var s=Vt;Vt|=1;var d=Hr.transition,m=Tt;try{if(Hr.transition=null,Tt=1,t)return t()}finally{Tt=m,Hr.transition=d,Vt=s,!(Vt&6)&&ss()}}function qu(){Lr=To.current,rn(To)}function Gs(t,s){t.finishedWork=null,t.finishedLanes=0;var d=t.timeoutHandle;if(d!==-1&&(t.timeoutHandle=-1,mx(d)),_n!==null)for(d=_n.return;d!==null;){var m=d;switch(ou(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&gl();break;case 3:bo(),rn(Cr),rn(ar),wu();break;case 5:xu(m);break;case 4:bo();break;case 13:rn(fn);break;case 19:rn(fn);break;case 10:fu(m.type._context);break;case 22:case 23:qu()}d=d.return}if(Hn=t,_n=t=hs(t.current,null),Qn=Lr=s,Vn=0,va=null,Hu=Fl=Ws=0,Sr=Ca=null,Vs!==null){for(s=0;s<Vs.length;s++)if(d=Vs[s],m=d.interleaved,m!==null){d.interleaved=null;var b=m.next,T=d.pending;if(T!==null){var O=T.next;T.next=b,m.next=O}d.pending=m}Vs=null}return t}function U0(t,s){do{var d=_n;try{if(du(),Nl.current=Pl,_l){for(var m=hn.memoizedState;m!==null;){var b=m.queue;b!==null&&(b.pending=null),m=m.next}_l=!1}if(zs=0,Wn=Fn=hn=null,pa=!1,ma=0,Wu.current=null,d===null||d.return===null){Vn=1,va=s,_n=null;break}e:{var T=t,O=d.return,H=d,K=s;if(s=Qn,H.flags|=32768,K!==null&&typeof K=="object"&&typeof K.then=="function"){var fe=K,Re=H,Pe=Re.tag;if(!(Re.mode&1)&&(Pe===0||Pe===11||Pe===15)){var Te=Re.alternate;Te?(Re.updateQueue=Te.updateQueue,Re.memoizedState=Te.memoizedState,Re.lanes=Te.lanes):(Re.updateQueue=null,Re.memoizedState=null)}var Ye=f0(O);if(Ye!==null){Ye.flags&=-257,h0(Ye,O,H,T,s),Ye.mode&1&&d0(T,fe,s),s=Ye,K=fe;var tt=s.updateQueue;if(tt===null){var rt=new Set;rt.add(K),s.updateQueue=rt}else tt.add(K);break e}else{if(!(s&1)){d0(T,fe,s),Qu();break e}K=Error(a(426))}}else if(cn&&H.mode&1){var An=f0(O);if(An!==null){!(An.flags&65536)&&(An.flags|=256),h0(An,O,H,T,s),cu(So(K,H));break e}}T=K=So(K,H),Vn!==4&&(Vn=2),Ca===null?Ca=[T]:Ca.push(T),T=O;do{switch(T.tag){case 3:T.flags|=65536,s&=-s,T.lanes|=s;var oe=c0(T,K,s);Lh(T,oe);break e;case 1:H=K;var Q=T.type,ae=T.stateNode;if(!(T.flags&128)&&(typeof Q.getDerivedStateFromError=="function"||ae!==null&&typeof ae.componentDidCatch=="function"&&(cs===null||!cs.has(ae)))){T.flags|=65536,s&=-s,T.lanes|=s;var Fe=u0(T,H,s);Lh(T,Fe);break e}}T=T.return}while(T!==null)}H0(d)}catch(st){s=st,_n===d&&d!==null&&(_n=d=d.return);continue}break}while(!0)}function z0(){var t=jl.current;return jl.current=Pl,t===null?Pl:t}function Qu(){(Vn===0||Vn===3||Vn===2)&&(Vn=4),Hn===null||!(Ws&268435455)&&!(Fl&268435455)||fs(Hn,Qn)}function Gl(t,s){var d=Vt;Vt|=2;var m=z0();(Hn!==t||Qn!==s)&&(Bi=null,Gs(t,s));do try{Vx();break}catch(b){U0(t,b)}while(!0);if(du(),Vt=d,jl.current=m,_n!==null)throw Error(a(261));return Hn=null,Qn=0,Vn}function Vx(){for(;_n!==null;)W0(_n)}function Ux(){for(;_n!==null&&!Xe();)W0(_n)}function W0(t){var s=Y0(t.alternate,t,Lr);t.memoizedProps=t.pendingProps,s===null?H0(t):_n=s,Wu.current=null}function H0(t){var s=t;do{var d=s.alternate;if(t=s.return,s.flags&32768){if(d=Mx(d,s),d!==null){d.flags&=32767,_n=d;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Vn=6,_n=null;return}}else if(d=Ox(d,s,Lr),d!==null){_n=d;return}if(s=s.sibling,s!==null){_n=s;return}_n=s=t}while(s!==null);Vn===0&&(Vn=5)}function Xs(t,s,d){var m=Tt,b=Hr.transition;try{Hr.transition=null,Tt=1,zx(t,s,d,m)}finally{Hr.transition=b,Tt=m}return null}function zx(t,s,d,m){do No();while(us!==null);if(Vt&6)throw Error(a(327));d=t.finishedWork;var b=t.finishedLanes;if(d===null)return null;if(t.finishedWork=null,t.finishedLanes=0,d===t.current)throw Error(a(177));t.callbackNode=null,t.callbackPriority=0;var T=d.lanes|d.childLanes;if(ot(t,T),t===Hn&&(_n=Hn=null,Qn=0),!(d.subtreeFlags&2064)&&!(d.flags&2064)||Ul||(Ul=!0,Z0(Bt,function(){return No(),null})),T=(d.flags&15990)!==0,d.subtreeFlags&15990||T){T=Hr.transition,Hr.transition=null;var O=Tt;Tt=1;var H=Vt;Vt|=4,Wu.current=null,Lx(t,d),M0(d,t),or(Qc),ui=!!qc,Qc=qc=null,t.current=d,Bx(d),Zt(),Vt=H,Tt=O,Hr.transition=T}else t.current=d;if(Ul&&(Ul=!1,us=t,zl=b),T=t.pendingLanes,T===0&&(cs=null),Mt(d.stateNode),Ar(t,Nt()),s!==null)for(m=t.onRecoverableError,d=0;d<s.length;d++)b=s[d],m(b.value,{componentStack:b.stack,digest:b.digest});if(Vl)throw Vl=!1,t=Xu,Xu=null,t;return zl&1&&t.tag!==0&&No(),T=t.pendingLanes,T&1?t===Yu?Ea++:(Ea=0,Yu=t):Ea=0,ss(),null}function No(){if(us!==null){var t=Ja(zl),s=Hr.transition,d=Tt;try{if(Hr.transition=null,Tt=16>t?16:t,us===null)var m=!1;else{if(t=us,us=null,zl=0,Vt&6)throw Error(a(331));var b=Vt;for(Vt|=4,Qe=t.current;Qe!==null;){var T=Qe,O=T.child;if(Qe.flags&16){var H=T.deletions;if(H!==null){for(var K=0;K<H.length;K++){var fe=H[K];for(Qe=fe;Qe!==null;){var Re=Qe;switch(Re.tag){case 0:case 11:case 15:wa(8,Re,T)}var Pe=Re.child;if(Pe!==null)Pe.return=Re,Qe=Pe;else for(;Qe!==null;){Re=Qe;var Te=Re.sibling,Ye=Re.return;if(_0(Re),Re===fe){Qe=null;break}if(Te!==null){Te.return=Ye,Qe=Te;break}Qe=Ye}}}var tt=T.alternate;if(tt!==null){var rt=tt.child;if(rt!==null){tt.child=null;do{var An=rt.sibling;rt.sibling=null,rt=An}while(rt!==null)}}Qe=T}}if(T.subtreeFlags&2064&&O!==null)O.return=T,Qe=O;else e:for(;Qe!==null;){if(T=Qe,T.flags&2048)switch(T.tag){case 0:case 11:case 15:wa(9,T,T.return)}var oe=T.sibling;if(oe!==null){oe.return=T.return,Qe=oe;break e}Qe=T.return}}var Q=t.current;for(Qe=Q;Qe!==null;){O=Qe;var ae=O.child;if(O.subtreeFlags&2064&&ae!==null)ae.return=O,Qe=ae;else e:for(O=Q;Qe!==null;){if(H=Qe,H.flags&2048)try{switch(H.tag){case 0:case 11:case 15:Bl(9,H)}}catch(st){yn(H,H.return,st)}if(H===O){Qe=null;break e}var Fe=H.sibling;if(Fe!==null){Fe.return=H.return,Qe=Fe;break e}Qe=H.return}}if(Vt=b,ss(),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(Pt,t)}catch{}m=!0}return m}finally{Tt=d,Hr.transition=s}}return!1}function G0(t,s,d){s=So(d,s),s=c0(t,s,1),t=as(t,s,1),s=pr(),t!==null&&(V(t,1,s),Ar(t,s))}function yn(t,s,d){if(t.tag===3)G0(t,t,d);else for(;s!==null;){if(s.tag===3){G0(s,t,d);break}else if(s.tag===1){var m=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(cs===null||!cs.has(m))){t=So(d,t),t=u0(s,t,1),s=as(s,t,1),t=pr(),s!==null&&(V(s,1,t),Ar(s,t));break}}s=s.return}}function Wx(t,s,d){var m=t.pingCache;m!==null&&m.delete(s),s=pr(),t.pingedLanes|=t.suspendedLanes&d,Hn===t&&(Qn&d)===d&&(Vn===4||Vn===3&&(Qn&130023424)===Qn&&500>Nt()-Gu?Gs(t,0):Hu|=d),Ar(t,s)}function X0(t,s){s===0&&(t.mode&1?(s=ro,ro<<=1,!(ro&130023424)&&(ro=4194304)):s=1);var d=pr();t=Mi(t,s),t!==null&&(V(t,s,d),Ar(t,d))}function Hx(t){var s=t.memoizedState,d=0;s!==null&&(d=s.retryLane),X0(t,d)}function Gx(t,s){var d=0;switch(t.tag){case 13:var m=t.stateNode,b=t.memoizedState;b!==null&&(d=b.retryLane);break;case 19:m=t.stateNode;break;default:throw Error(a(314))}m!==null&&m.delete(s),X0(t,d)}var Y0;Y0=function(t,s,d){if(t!==null)if(t.memoizedProps!==s.pendingProps||Cr.current)br=!0;else{if(!(t.lanes&d)&&!(s.flags&128))return br=!1,Px(t,s,d);br=!!(t.flags&131072)}else br=!1,cn&&s.flags&1048576&&Th(s,vl,s.index);switch(s.lanes=0,s.tag){case 2:var m=s.type;Dl(t,s),t=s.pendingProps;var b=go(s,ar.current);Eo(s,d),b=Eu(null,s,m,t,b,d);var T=bu();return s.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Er(m)?(T=!0,xl(s)):T=!1,s.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,mu(s),b.updater=Ol,s.stateNode=b,b._reactInternals=s,_u(s,m,t,d),s=Ou(null,s,m,!0,T,d)):(s.tag=0,cn&&T&&su(s),hr(null,s,b,d),s=s.child),s;case 16:m=s.elementType;e:{switch(Dl(t,s),t=s.pendingProps,b=m._init,m=b(m._payload),s.type=m,b=s.tag=Yx(m),t=ti(m,t),b){case 0:s=Pu(null,s,m,t,d);break e;case 1:s=w0(null,s,m,t,d);break e;case 11:s=p0(null,s,m,t,d);break e;case 14:s=m0(null,s,m,ti(m.type,t),d);break e}throw Error(a(306,m,""))}return s;case 0:return m=s.type,b=s.pendingProps,b=s.elementType===m?b:ti(m,b),Pu(t,s,m,b,d);case 1:return m=s.type,b=s.pendingProps,b=s.elementType===m?b:ti(m,b),w0(t,s,m,b,d);case 3:e:{if(v0(s),t===null)throw Error(a(387));m=s.pendingProps,T=s.memoizedState,b=T.element,Dh(t,s),Tl(s,m,null,d);var O=s.memoizedState;if(m=O.element,T.isDehydrated)if(T={element:m,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},s.updateQueue.baseState=T,s.memoizedState=T,s.flags&256){b=So(Error(a(423)),s),s=C0(t,s,m,d,b);break e}else if(m!==b){b=So(Error(a(424)),s),s=C0(t,s,m,d,b);break e}else for(Dr=ns(s.stateNode.containerInfo.firstChild),Mr=s,cn=!0,ei=null,d=Oh(s,null,m,d),s.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(wo(),m===b){s=Li(t,s,d);break e}hr(t,s,m,d)}s=s.child}return s;case 5:return jh(s),t===null&&lu(s),m=s.type,b=s.pendingProps,T=t!==null?t.memoizedProps:null,O=b.children,Jc(m,b)?O=null:T!==null&&Jc(m,T)&&(s.flags|=32),y0(t,s),hr(t,s,O,d),s.child;case 6:return t===null&&lu(s),null;case 13:return E0(t,s,d);case 4:return gu(s,s.stateNode.containerInfo),m=s.pendingProps,t===null?s.child=vo(s,null,m,d):hr(t,s,m,d),s.child;case 11:return m=s.type,b=s.pendingProps,b=s.elementType===m?b:ti(m,b),p0(t,s,m,b,d);case 7:return hr(t,s,s.pendingProps,d),s.child;case 8:return hr(t,s,s.pendingProps.children,d),s.child;case 12:return hr(t,s,s.pendingProps.children,d),s.child;case 10:e:{if(m=s.type._context,b=s.pendingProps,T=s.memoizedProps,O=b.value,en(bl,m._currentValue),m._currentValue=O,T!==null)if(ne(T.value,O)){if(T.children===b.children&&!Cr.current){s=Li(t,s,d);break e}}else for(T=s.child,T!==null&&(T.return=s);T!==null;){var H=T.dependencies;if(H!==null){O=T.child;for(var K=H.firstContext;K!==null;){if(K.context===m){if(T.tag===1){K=Di(-1,d&-d),K.tag=2;var fe=T.updateQueue;if(fe!==null){fe=fe.shared;var Re=fe.pending;Re===null?K.next=K:(K.next=Re.next,Re.next=K),fe.pending=K}}T.lanes|=d,K=T.alternate,K!==null&&(K.lanes|=d),hu(T.return,d,s),H.lanes|=d;break}K=K.next}}else if(T.tag===10)O=T.type===s.type?null:T.child;else if(T.tag===18){if(O=T.return,O===null)throw Error(a(341));O.lanes|=d,H=O.alternate,H!==null&&(H.lanes|=d),hu(O,d,s),O=T.sibling}else O=T.child;if(O!==null)O.return=T;else for(O=T;O!==null;){if(O===s){O=null;break}if(T=O.sibling,T!==null){T.return=O.return,O=T;break}O=O.return}T=O}hr(t,s,b.children,d),s=s.child}return s;case 9:return b=s.type,m=s.pendingProps.children,Eo(s,d),b=zr(b),m=m(b),s.flags|=1,hr(t,s,m,d),s.child;case 14:return m=s.type,b=ti(m,s.pendingProps),b=ti(m.type,b),m0(t,s,m,b,d);case 15:return g0(t,s,s.type,s.pendingProps,d);case 17:return m=s.type,b=s.pendingProps,b=s.elementType===m?b:ti(m,b),Dl(t,s),s.tag=1,Er(m)?(t=!0,xl(s)):t=!1,Eo(s,d),a0(s,m,b),_u(s,m,b,d),Ou(null,s,m,!0,t,d);case 19:return S0(t,s,d);case 22:return x0(t,s,d)}throw Error(a(156,s.tag))};function Z0(t,s){return it(t,s)}function Xx(t,s,d,m){this.tag=t,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gr(t,s,d,m){return new Xx(t,s,d,m)}function Ju(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Yx(t){if(typeof t=="function")return Ju(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Se)return 11;if(t===J)return 14}return 2}function hs(t,s){var d=t.alternate;return d===null?(d=Gr(t.tag,s,t.key,t.mode),d.elementType=t.elementType,d.type=t.type,d.stateNode=t.stateNode,d.alternate=t,t.alternate=d):(d.pendingProps=s,d.type=t.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=t.flags&14680064,d.childLanes=t.childLanes,d.lanes=t.lanes,d.child=t.child,d.memoizedProps=t.memoizedProps,d.memoizedState=t.memoizedState,d.updateQueue=t.updateQueue,s=t.dependencies,d.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},d.sibling=t.sibling,d.index=t.index,d.ref=t.ref,d}function Xl(t,s,d,m,b,T){var O=2;if(m=t,typeof t=="function")Ju(t)&&(O=1);else if(typeof t=="string")O=5;else e:switch(t){case X:return Ys(d.children,b,T,s);case le:O=8,b|=8;break;case te:return t=Gr(12,d,s,b|2),t.elementType=te,t.lanes=T,t;case Ne:return t=Gr(13,d,s,b),t.elementType=Ne,t.lanes=T,t;case Ee:return t=Gr(19,d,s,b),t.elementType=Ee,t.lanes=T,t;case ye:return Yl(d,b,T,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ke:O=10;break e;case Le:O=9;break e;case Se:O=11;break e;case J:O=14;break e;case Ve:O=16,m=null;break e}throw Error(a(130,t==null?t:typeof t,""))}return s=Gr(O,d,s,b),s.elementType=t,s.type=m,s.lanes=T,s}function Ys(t,s,d,m){return t=Gr(7,t,m,s),t.lanes=d,t}function Yl(t,s,d,m){return t=Gr(22,t,m,s),t.elementType=ye,t.lanes=d,t.stateNode={isHidden:!1},t}function ed(t,s,d){return t=Gr(6,t,null,s),t.lanes=d,t}function td(t,s,d){return s=Gr(4,t.children!==null?t.children:[],t.key,s),s.lanes=d,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function Zx(t,s,d,m,b){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=se(0),this.expirationTimes=se(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=se(0),this.identifierPrefix=m,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function nd(t,s,d,m,b,T,O,H,K){return t=new Zx(t,s,d,H,K),s===1?(s=1,T===!0&&(s|=8)):s=0,T=Gr(3,null,null,s),t.current=T,T.stateNode=t,T.memoizedState={element:m,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},mu(T),t}function Kx(t,s,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:re,key:m==null?null:""+m,children:t,containerInfo:s,implementation:d}}function K0(t){if(!t)return is;t=t._reactInternals;e:{if(ir(t)!==t||t.tag!==1)throw Error(a(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Er(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(a(171))}if(t.tag===1){var d=t.type;if(Er(d))return bh(t,d,s)}return s}function $0(t,s,d,m,b,T,O,H,K){return t=nd(d,m,!0,t,b,T,O,H,K),t.context=K0(null),d=t.current,m=pr(),b=ds(d),T=Di(m,b),T.callback=s??null,as(d,T,b),t.current.lanes=b,V(t,b,m),Ar(t,m),t}function Zl(t,s,d,m){var b=s.current,T=pr(),O=ds(b);return d=K0(d),s.context===null?s.context=d:s.pendingContext=d,s=Di(T,O),s.payload={element:t},m=m===void 0?null:m,m!==null&&(s.callback=m),t=as(b,s,O),t!==null&&(ii(t,b,O,T),Al(t,b,O)),O}function Kl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function q0(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var d=t.retryLane;t.retryLane=d!==0&&d<s?d:s}}function rd(t,s){q0(t,s),(t=t.alternate)&&q0(t,s)}function $x(){return null}var Q0=typeof reportError=="function"?reportError:function(t){console.error(t)};function id(t){this._internalRoot=t}$l.prototype.render=id.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(a(409));Zl(t,s,null,null)},$l.prototype.unmount=id.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Hs(function(){Zl(null,t,null,null)}),s[Ri]=null}};function $l(t){this._internalRoot=t}$l.prototype.unstable_scheduleHydration=function(t){if(t){var s=Qt();t={blockedOn:null,target:t,priority:s};for(var d=0;d<Zn.length&&s!==0&&s<Zn[d].priority;d++);Zn.splice(d,0,t),d===0&&tl(t)}};function sd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ql(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function J0(){}function qx(t,s,d,m,b){if(b){if(typeof m=="function"){var T=m;m=function(){var fe=Kl(O);T.call(fe)}}var O=$0(s,m,t,0,null,!1,!1,"",J0);return t._reactRootContainer=O,t[Ri]=O.current,oa(t.nodeType===8?t.parentNode:t),Hs(),O}for(;b=t.lastChild;)t.removeChild(b);if(typeof m=="function"){var H=m;m=function(){var fe=Kl(K);H.call(fe)}}var K=nd(t,0,!1,null,null,!1,!1,"",J0);return t._reactRootContainer=K,t[Ri]=K.current,oa(t.nodeType===8?t.parentNode:t),Hs(function(){Zl(s,K,d,m)}),K}function Ql(t,s,d,m,b){var T=d._reactRootContainer;if(T){var O=T;if(typeof b=="function"){var H=b;b=function(){var K=Kl(O);H.call(K)}}Zl(s,O,t,b)}else O=qx(d,s,t,b,m);return Kl(O)}io=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var d=$t(s.pendingLanes);d!==0&&(gn(s,d|1),Ar(s,Nt()),!(Vt&6)&&(Io=Nt()+500,ss()))}break;case 13:Hs(function(){var m=Mi(t,1);if(m!==null){var b=pr();ii(m,t,1,b)}}),rd(t,1)}},sr=function(t){if(t.tag===13){var s=Mi(t,134217728);if(s!==null){var d=pr();ii(s,t,134217728,d)}rd(t,134217728)}},lt=function(t){if(t.tag===13){var s=ds(t),d=Mi(t,s);if(d!==null){var m=pr();ii(d,t,s,m)}rd(t,s)}},Qt=function(){return Tt},Xo=function(t,s){var d=Tt;try{return Tt=t,s()}finally{Tt=d}},on=function(t,s,d){switch(s){case"input":if(wt(t,d),s=d.name,d.type==="radio"&&s!=null){for(d=t;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<d.length;s++){var m=d[s];if(m!==t&&m.form===t.form){var b=ml(m);if(!b)throw Error(a(90));pe(m),wt(m,b)}}}break;case"textarea":Ue(t,d);break;case"select":s=d.value,s!=null&&je(t,!!d.multiple,s,!1)}},Wi=$u,Cn=Hs;var Qx={usingClientEntryPoint:!1,Events:[ca,po,ml,bs,Yn,$u]},ba={findFiberByHostInstance:Ls,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Jx={bundleType:ba.bundleType,version:ba.version,rendererPackageName:ba.rendererPackageName,rendererConfig:ba.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Hi(t),t===null?null:t.stateNode},findFiberByHostInstance:ba.findFiberByHostInstance||$x,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jl.isDisabled&&Jl.supportsFiber)try{Pt=Jl.inject(Jx),At=Jl}catch{}}return Tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qx,Tr.createPortal=function(t,s){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sd(s))throw Error(a(200));return Kx(t,s,null,d)},Tr.createRoot=function(t,s){if(!sd(t))throw Error(a(299));var d=!1,m="",b=Q0;return s!=null&&(s.unstable_strictMode===!0&&(d=!0),s.identifierPrefix!==void 0&&(m=s.identifierPrefix),s.onRecoverableError!==void 0&&(b=s.onRecoverableError)),s=nd(t,1,!1,null,null,d,!1,m,b),t[Ri]=s.current,oa(t.nodeType===8?t.parentNode:t),new id(s)},Tr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=Hi(s),t=t===null?null:t.stateNode,t},Tr.flushSync=function(t){return Hs(t)},Tr.hydrate=function(t,s,d){if(!ql(s))throw Error(a(200));return Ql(null,t,s,!0,d)},Tr.hydrateRoot=function(t,s,d){if(!sd(t))throw Error(a(405));var m=d!=null&&d.hydratedSources||null,b=!1,T="",O=Q0;if(d!=null&&(d.unstable_strictMode===!0&&(b=!0),d.identifierPrefix!==void 0&&(T=d.identifierPrefix),d.onRecoverableError!==void 0&&(O=d.onRecoverableError)),s=$0(s,null,t,1,d??null,b,!1,T,O),t[Ri]=s.current,oa(t),m)for(t=0;t<m.length;t++)d=m[t],b=d._getVersion,b=b(d._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[d,b]:s.mutableSourceEagerHydrationData.push(d,b);return new $l(s)},Tr.render=function(t,s,d){if(!ql(s))throw Error(a(200));return Ql(null,t,s,!1,d)},Tr.unmountComponentAtNode=function(t){if(!ql(t))throw Error(a(40));return t._reactRootContainer?(Hs(function(){Ql(null,null,t,!1,function(){t._reactRootContainer=null,t[Ri]=null})}),!0):!1},Tr.unstable_batchedUpdates=$u,Tr.unstable_renderSubtreeIntoContainer=function(t,s,d,m){if(!ql(d))throw Error(a(200));if(t==null||t._reactInternals===void 0)throw Error(a(38));return Ql(t,s,d,!1,m)},Tr.version="18.3.1-next-f1338f8080-20240426",Tr}var a1;function a2(){if(a1)return ld.exports;a1=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(o){console.error(o)}}return r(),ld.exports=o2(),ld.exports}var l1;function l2(){if(l1)return tc;l1=1;var r=a2();return tc.createRoot=r.createRoot,tc.hydrateRoot=r.hydrateRoot,tc}var c2=l2();const Xn=I.createContext(null),u2=({children:r})=>{const[o,a]=I.useState(null),[f,p]=I.useState(null),[y,w]=I.useState(null),[S,v]=I.useState(null),[E,A]=I.useState(!1),[N,R]=I.useState(null),[M,L]=I.useState(!0),B=async()=>{L(!0);try{try{const q=await fetch(window.server_url+"/auth/session",{method:"GET",credentials:"include"});if(q.ok){const ee=await q.json();if(ee.authenticated){console.log("SESSION AUTH SUCCESS:",ee),A(!0),a(ee.user.username),p(ee.user.profile||null),R(ee.user.permissions||null);return}}}catch(q){console.log("Session auth check failed (this is ok if using JWT):",q)}const F=localStorage.getItem("access_token");if(F)try{const q=await fetch(window.server_url+"/load_user",{headers:{Authorization:`Bearer ${F}`},credentials:"include"});if(q.ok){A(!0);const ee=await q.json();console.log("JWT AUTH SUCCESS:",ee),a(ee.username),p(ee.profile),R(ee.permissions),console.log("PERMISSIONS:",ee.permissions)}else console.log("TOKEN INVALID"),localStorage.removeItem("access_token"),a(null),p(null),w(null),v(null),A(!1)}catch(q){console.log("JWT auth error:",q)}}finally{L(!1)}};I.useEffect(()=>{B()},[]);const j=F=>{a(F.username),w(F.access_token),v(F.refresh_token),R(F.permissions),console.log("PRE SAVE USERNAME:",F.username),localStorage.setItem("user",F.username),localStorage.setItem("access_token",F.access_token),localStorage.setItem("refresh_token",F.refresh_token)},U=async(F,q)=>{const ee=await fetch(window.server_url+"/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:F,password:q})});if(ee.ok){const re=await ee.json();console.log("SIGNED UP, userData:",re)}},W=async()=>{try{await fetch(window.server_url+"/auth/logout",{method:"POST",credentials:"include"})}catch(F){console.log("Logout request failed (session may already be cleared):",F)}localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),a(null),p(null),w(null),v(null),A(!1),R(null)};return x.jsx(Xn.Provider,{value:{user:o,login:j,signup:U,logout:W,userProfile:f,checkAuth:B,permissions:N,isAuthLoading:M},children:r})};var Ld=function(r,o){return Ld=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,f){a.__proto__=f}||function(a,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(a[p]=f[p])},Ld(r,o)};function d2(r,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");Ld(r,o);function a(){this.constructor=r}r.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}var er=function(){return er=Object.assign||function(o){for(var a,f=1,p=arguments.length;f<p;f++){a=arguments[f];for(var y in a)Object.prototype.hasOwnProperty.call(a,y)&&(o[y]=a[y])}return o},er.apply(this,arguments)};var dd,c1;function f2(){if(c1)return dd;c1=1;var r=!1,o,a,f,p,y,w,S,v,E,A,N,R,M,L,B;function j(){if(!r){r=!0;var W=navigator.userAgent,F=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(W),q=/(Mac OS X)|(Windows)|(Linux)/.exec(W);if(R=/\b(iPhone|iP[ao]d)/.exec(W),M=/\b(iP[ao]d)/.exec(W),A=/Android/i.exec(W),L=/FBAN\/\w+;/i.exec(W),B=/Mobile/i.exec(W),N=!!/Win64/.exec(W),F){o=F[1]?parseFloat(F[1]):F[5]?parseFloat(F[5]):NaN,o&&document&&document.documentMode&&(o=document.documentMode);var ee=/(?:Trident\/(\d+.\d+))/.exec(W);w=ee?parseFloat(ee[1])+4:o,a=F[2]?parseFloat(F[2]):NaN,f=F[3]?parseFloat(F[3]):NaN,p=F[4]?parseFloat(F[4]):NaN,p?(F=/(?:Chrome\/(\d+\.\d+))/.exec(W),y=F&&F[1]?parseFloat(F[1]):NaN):y=NaN}else o=a=f=y=p=NaN;if(q){if(q[1]){var re=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(W);S=re?parseFloat(re[1].replace("_",".")):!0}else S=!1;v=!!q[2],E=!!q[3]}else S=v=E=!1}}var U={ie:function(){return j()||o},ieCompatibilityMode:function(){return j()||w>o},ie64:function(){return U.ie()&&N},firefox:function(){return j()||a},opera:function(){return j()||f},webkit:function(){return j()||p},safari:function(){return U.webkit()},chrome:function(){return j()||y},windows:function(){return j()||v},osx:function(){return j()||S},linux:function(){return j()||E},iphone:function(){return j()||R},mobile:function(){return j()||R||M||A||B},nativeApp:function(){return j()||L},android:function(){return j()||A},ipad:function(){return j()||M}};return dd=U,dd}var fd,u1;function h2(){if(u1)return fd;u1=1;var r=!!(typeof window<"u"&&window.document&&window.document.createElement),o={canUseDOM:r,canUseWorkers:typeof Worker<"u",canUseEventListeners:r&&!!(window.addEventListener||window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};return fd=o,fd}var hd,d1;function p2(){if(d1)return hd;d1=1;var r=h2(),o;r.canUseDOM&&(o=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function a(f,p){if(!r.canUseDOM||p&&!("addEventListener"in document))return!1;var y="on"+f,w=y in document;if(!w){var S=document.createElement("div");S.setAttribute(y,"return;"),w=typeof S[y]=="function"}return!w&&o&&f==="wheel"&&(w=document.implementation.hasFeature("Events.wheel","3.0")),w}return hd=a,hd}var pd,f1;function m2(){if(f1)return pd;f1=1;var r=f2(),o=p2(),a=10,f=40,p=800;function y(w){var S=0,v=0,E=0,A=0;return"detail"in w&&(v=w.detail),"wheelDelta"in w&&(v=-w.wheelDelta/120),"wheelDeltaY"in w&&(v=-w.wheelDeltaY/120),"wheelDeltaX"in w&&(S=-w.wheelDeltaX/120),"axis"in w&&w.axis===w.HORIZONTAL_AXIS&&(S=v,v=0),E=S*a,A=v*a,"deltaY"in w&&(A=w.deltaY),"deltaX"in w&&(E=w.deltaX),(E||A)&&w.deltaMode&&(w.deltaMode==1?(E*=f,A*=f):(E*=p,A*=p)),E&&!S&&(S=E<1?-1:1),A&&!v&&(v=A<1?-1:1),{spinX:S,spinY:v,pixelX:E,pixelY:A}}return y.getEventType=function(){return r.firefox()?"DOMMouseScroll":o("wheel")?"wheel":"mousewheel"},pd=y,pd}var md,h1;function g2(){return h1||(h1=1,md=m2()),md}var x2=g2();const y2=$p(x2);function w2(r,o,a,f,p,y){y===void 0&&(y=0);var w=Lo(r,o,y),S=w.width,v=w.height,E=Math.min(S,a),A=Math.min(v,f);return E>A*p?{width:A*p,height:A}:{width:E,height:E/p}}function v2(r){return r.width>r.height?r.width/r.naturalWidth:r.height/r.naturalHeight}function Aa(r,o,a,f,p){p===void 0&&(p=0);var y=Lo(o.width,o.height,p),w=y.width,S=y.height;return{x:p1(r.x,w,a.width,f),y:p1(r.y,S,a.height,f)}}function p1(r,o,a,f){var p=o*f/2-a/2;return Rc(r,-p,p)}function m1(r,o){return Math.sqrt(Math.pow(r.y-o.y,2)+Math.pow(r.x-o.x,2))}function g1(r,o){return Math.atan2(o.y-r.y,o.x-r.x)*180/Math.PI}function C2(r,o,a,f,p,y,w){y===void 0&&(y=0),w===void 0&&(w=!0);var S=w?E2:b2,v=Lo(o.width,o.height,y),E=Lo(o.naturalWidth,o.naturalHeight,y),A={x:S(100,((v.width-a.width/p)/2-r.x/p)/v.width*100),y:S(100,((v.height-a.height/p)/2-r.y/p)/v.height*100),width:S(100,a.width/v.width*100/p),height:S(100,a.height/v.height*100/p)},N=Math.round(S(E.width,A.width*E.width/100)),R=Math.round(S(E.height,A.height*E.height/100)),M=E.width>=E.height*f,L=M?{width:Math.round(R*f),height:R}:{width:N,height:Math.round(N/f)},B=er(er({},L),{x:Math.round(S(E.width-L.width,A.x*E.width/100)),y:Math.round(S(E.height-L.height,A.y*E.height/100))});return{croppedAreaPercentages:A,croppedAreaPixels:B}}function E2(r,o){return Math.min(r,Math.max(0,o))}function b2(r,o){return o}function S2(r,o,a,f,p,y){var w=Lo(o.width,o.height,a),S=Rc(f.width/w.width*(100/r.width),p,y),v={x:S*w.width/2-f.width/2-w.width*S*(r.x/100),y:S*w.height/2-f.height/2-w.height*S*(r.y/100)};return{crop:v,zoom:S}}function A2(r,o,a){var f=v2(o);return a.height>a.width?a.height/(r.height*f):a.width/(r.width*f)}function T2(r,o,a,f,p,y){a===void 0&&(a=0);var w=Lo(o.naturalWidth,o.naturalHeight,a),S=Rc(A2(r,o,f),p,y),v=f.height>f.width?f.height/r.height:f.width/r.width,E={x:((w.width-r.width)/2-r.x)*v,y:((w.height-r.height)/2-r.y)*v};return{crop:E,zoom:S}}function x1(r,o){return{x:(o.x+r.x)/2,y:(o.y+r.y)/2}}function I2(r){return r*Math.PI/180}function Lo(r,o,a){var f=I2(a);return{width:Math.abs(Math.cos(f)*r)+Math.abs(Math.sin(f)*o),height:Math.abs(Math.sin(f)*r)+Math.abs(Math.cos(f)*o)}}function Rc(r,o,a){return Math.min(Math.max(r,o),a)}function nc(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return r.filter(function(a){return typeof a=="string"&&a.length>0}).join(" ").trim()}var N2=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,_2=1,R2=3,k2=1,mf=function(r){d2(o,r);function o(){var a=r!==null&&r.apply(this,arguments)||this;return a.imageRef=I.createRef(),a.videoRef=I.createRef(),a.containerPosition={x:0,y:0},a.containerRef=null,a.styleRef=null,a.containerRect=null,a.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},a.dragStartPosition={x:0,y:0},a.dragStartCrop={x:0,y:0},a.gestureZoomStart=0,a.gestureRotationStart=0,a.isTouching=!1,a.lastPinchDistance=0,a.lastPinchRotation=0,a.rafDragTimeout=null,a.rafPinchTimeout=null,a.wheelTimer=null,a.currentDoc=typeof document<"u"?document:null,a.currentWindow=typeof window<"u"?window:null,a.resizeObserver=null,a.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},a.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!a.containerRef)){var f=!0;a.resizeObserver=new window.ResizeObserver(function(p){if(f){f=!1;return}a.computeSizes()}),a.resizeObserver.observe(a.containerRef)}},a.preventZoomSafari=function(f){return f.preventDefault()},a.cleanEvents=function(){a.currentDoc&&(a.currentDoc.removeEventListener("mousemove",a.onMouseMove),a.currentDoc.removeEventListener("mouseup",a.onDragStopped),a.currentDoc.removeEventListener("touchmove",a.onTouchMove),a.currentDoc.removeEventListener("touchend",a.onDragStopped),a.currentDoc.removeEventListener("gesturemove",a.onGestureMove),a.currentDoc.removeEventListener("gestureend",a.onGestureEnd),a.currentDoc.removeEventListener("scroll",a.onScroll))},a.clearScrollEvent=function(){a.containerRef&&a.containerRef.removeEventListener("wheel",a.onWheel),a.wheelTimer&&clearTimeout(a.wheelTimer)},a.onMediaLoad=function(){var f=a.computeSizes();f&&(a.emitCropData(),a.setInitialCrop(f)),a.props.onMediaLoaded&&a.props.onMediaLoaded(a.mediaSize)},a.setInitialCrop=function(f){if(a.props.initialCroppedAreaPercentages){var p=S2(a.props.initialCroppedAreaPercentages,a.mediaSize,a.props.rotation,f,a.props.minZoom,a.props.maxZoom),y=p.crop,w=p.zoom;a.props.onCropChange(y),a.props.onZoomChange&&a.props.onZoomChange(w)}else if(a.props.initialCroppedAreaPixels){var S=T2(a.props.initialCroppedAreaPixels,a.mediaSize,a.props.rotation,f,a.props.minZoom,a.props.maxZoom),y=S.crop,w=S.zoom;a.props.onCropChange(y),a.props.onZoomChange&&a.props.onZoomChange(w)}},a.computeSizes=function(){var f,p,y,w,S,v,E=a.imageRef.current||a.videoRef.current;if(E&&a.containerRef){a.containerRect=a.containerRef.getBoundingClientRect(),a.saveContainerPosition();var A=a.containerRect.width/a.containerRect.height,N=((f=a.imageRef.current)===null||f===void 0?void 0:f.naturalWidth)||((p=a.videoRef.current)===null||p===void 0?void 0:p.videoWidth)||0,R=((y=a.imageRef.current)===null||y===void 0?void 0:y.naturalHeight)||((w=a.videoRef.current)===null||w===void 0?void 0:w.videoHeight)||0,M=E.offsetWidth<N||E.offsetHeight<R,L=N/R,B=void 0;if(M)switch(a.state.mediaObjectFit){default:case"contain":B=A>L?{width:a.containerRect.height*L,height:a.containerRect.height}:{width:a.containerRect.width,height:a.containerRect.width/L};break;case"horizontal-cover":B={width:a.containerRect.width,height:a.containerRect.width/L};break;case"vertical-cover":B={width:a.containerRect.height*L,height:a.containerRect.height};break}else B={width:E.offsetWidth,height:E.offsetHeight};a.mediaSize=er(er({},B),{naturalWidth:N,naturalHeight:R}),a.props.setMediaSize&&a.props.setMediaSize(a.mediaSize);var j=a.props.cropSize?a.props.cropSize:w2(a.mediaSize.width,a.mediaSize.height,a.containerRect.width,a.containerRect.height,a.props.aspect,a.props.rotation);return(((S=a.state.cropSize)===null||S===void 0?void 0:S.height)!==j.height||((v=a.state.cropSize)===null||v===void 0?void 0:v.width)!==j.width)&&a.props.onCropSizeChange&&a.props.onCropSizeChange(j),a.setState({cropSize:j},a.recomputeCropPosition),a.props.setCropSize&&a.props.setCropSize(j),j}},a.saveContainerPosition=function(){if(a.containerRef){var f=a.containerRef.getBoundingClientRect();a.containerPosition={x:f.left,y:f.top}}},a.onMouseDown=function(f){a.currentDoc&&(f.preventDefault(),a.currentDoc.addEventListener("mousemove",a.onMouseMove),a.currentDoc.addEventListener("mouseup",a.onDragStopped),a.saveContainerPosition(),a.onDragStart(o.getMousePoint(f)))},a.onMouseMove=function(f){return a.onDrag(o.getMousePoint(f))},a.onScroll=function(f){a.currentDoc&&(f.preventDefault(),a.saveContainerPosition())},a.onTouchStart=function(f){a.currentDoc&&(a.isTouching=!0,!(a.props.onTouchRequest&&!a.props.onTouchRequest(f))&&(a.currentDoc.addEventListener("touchmove",a.onTouchMove,{passive:!1}),a.currentDoc.addEventListener("touchend",a.onDragStopped),a.saveContainerPosition(),f.touches.length===2?a.onPinchStart(f):f.touches.length===1&&a.onDragStart(o.getTouchPoint(f.touches[0]))))},a.onTouchMove=function(f){f.preventDefault(),f.touches.length===2?a.onPinchMove(f):f.touches.length===1&&a.onDrag(o.getTouchPoint(f.touches[0]))},a.onGestureStart=function(f){a.currentDoc&&(f.preventDefault(),a.currentDoc.addEventListener("gesturechange",a.onGestureMove),a.currentDoc.addEventListener("gestureend",a.onGestureEnd),a.gestureZoomStart=a.props.zoom,a.gestureRotationStart=a.props.rotation)},a.onGestureMove=function(f){if(f.preventDefault(),!a.isTouching){var p=o.getMousePoint(f),y=a.gestureZoomStart-1+f.scale;if(a.setNewZoom(y,p,{shouldUpdatePosition:!0}),a.props.onRotationChange){var w=a.gestureRotationStart+f.rotation;a.props.onRotationChange(w)}}},a.onGestureEnd=function(f){a.cleanEvents()},a.onDragStart=function(f){var p,y,w=f.x,S=f.y;a.dragStartPosition={x:w,y:S},a.dragStartCrop=er({},a.props.crop),(y=(p=a.props).onInteractionStart)===null||y===void 0||y.call(p)},a.onDrag=function(f){var p=f.x,y=f.y;a.currentWindow&&(a.rafDragTimeout&&a.currentWindow.cancelAnimationFrame(a.rafDragTimeout),a.rafDragTimeout=a.currentWindow.requestAnimationFrame(function(){if(a.state.cropSize&&!(p===void 0||y===void 0)){var w=p-a.dragStartPosition.x,S=y-a.dragStartPosition.y,v={x:a.dragStartCrop.x+w,y:a.dragStartCrop.y+S},E=a.props.restrictPosition?Aa(v,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):v;a.props.onCropChange(E)}}))},a.onDragStopped=function(){var f,p;a.isTouching=!1,a.cleanEvents(),a.emitCropData(),(p=(f=a.props).onInteractionEnd)===null||p===void 0||p.call(f)},a.onWheel=function(f){if(a.currentWindow&&!(a.props.onWheelRequest&&!a.props.onWheelRequest(f))){f.preventDefault();var p=o.getMousePoint(f),y=y2(f).pixelY,w=a.props.zoom-y*a.props.zoomSpeed/200;a.setNewZoom(w,p,{shouldUpdatePosition:!0}),a.state.hasWheelJustStarted||a.setState({hasWheelJustStarted:!0},function(){var S,v;return(v=(S=a.props).onInteractionStart)===null||v===void 0?void 0:v.call(S)}),a.wheelTimer&&clearTimeout(a.wheelTimer),a.wheelTimer=a.currentWindow.setTimeout(function(){return a.setState({hasWheelJustStarted:!1},function(){var S,v;return(v=(S=a.props).onInteractionEnd)===null||v===void 0?void 0:v.call(S)})},250)}},a.getPointOnContainer=function(f,p){var y=f.x,w=f.y;if(!a.containerRect)throw new Error("The Cropper is not mounted");return{x:a.containerRect.width/2-(y-p.x),y:a.containerRect.height/2-(w-p.y)}},a.getPointOnMedia=function(f){var p=f.x,y=f.y,w=a.props,S=w.crop,v=w.zoom;return{x:(p+S.x)/v,y:(y+S.y)/v}},a.setNewZoom=function(f,p,y){var w=y===void 0?{}:y,S=w.shouldUpdatePosition,v=S===void 0?!0:S;if(!(!a.state.cropSize||!a.props.onZoomChange)){var E=Rc(f,a.props.minZoom,a.props.maxZoom);if(v){var A=a.getPointOnContainer(p,a.containerPosition),N=a.getPointOnMedia(A),R={x:N.x*E-A.x,y:N.y*E-A.y},M=a.props.restrictPosition?Aa(R,a.mediaSize,a.state.cropSize,E,a.props.rotation):R;a.props.onCropChange(M)}a.props.onZoomChange(E)}},a.getCropData=function(){if(!a.state.cropSize)return null;var f=a.props.restrictPosition?Aa(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;return C2(f,a.mediaSize,a.state.cropSize,a.getAspect(),a.props.zoom,a.props.rotation,a.props.restrictPosition)},a.emitCropData=function(){var f=a.getCropData();if(f){var p=f.croppedAreaPercentages,y=f.croppedAreaPixels;a.props.onCropComplete&&a.props.onCropComplete(p,y),a.props.onCropAreaChange&&a.props.onCropAreaChange(p,y)}},a.emitCropAreaChange=function(){var f=a.getCropData();if(f){var p=f.croppedAreaPercentages,y=f.croppedAreaPixels;a.props.onCropAreaChange&&a.props.onCropAreaChange(p,y)}},a.recomputeCropPosition=function(){if(a.state.cropSize){var f=a.props.restrictPosition?Aa(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;a.props.onCropChange(f),a.emitCropData()}},a.onKeyDown=function(f){var p=a.props,y=p.crop,w=p.onCropChange,S=p.keyboardStep,v=p.zoom,E=p.rotation,A=S;if(a.state.cropSize){f.shiftKey&&(A*=.2);var N=er({},y);switch(f.key){case"ArrowUp":N.y-=A,f.preventDefault();break;case"ArrowDown":N.y+=A,f.preventDefault();break;case"ArrowLeft":N.x-=A,f.preventDefault();break;case"ArrowRight":N.x+=A,f.preventDefault();break;default:return}a.props.restrictPosition&&(N=Aa(N,a.mediaSize,a.state.cropSize,v,E)),w(N)}},a}return o.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=N2,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef))},o.prototype.componentWillUnmount=function(){var a,f;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(a=this.resizeObserver)===null||a===void 0||a.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((f=this.styleRef.parentNode)===null||f===void 0||f.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},o.prototype.componentDidUpdate=function(a){var f,p,y,w,S,v,E,A,N;a.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):a.aspect!==this.props.aspect?this.computeSizes():a.objectFit!==this.props.objectFit?this.computeSizes():a.zoom!==this.props.zoom?this.recomputeCropPosition():((f=a.cropSize)===null||f===void 0?void 0:f.height)!==((p=this.props.cropSize)===null||p===void 0?void 0:p.height)||((y=a.cropSize)===null||y===void 0?void 0:y.width)!==((w=this.props.cropSize)===null||w===void 0?void 0:w.width)?this.computeSizes():(((S=a.crop)===null||S===void 0?void 0:S.x)!==((v=this.props.crop)===null||v===void 0?void 0:v.x)||((E=a.crop)===null||E===void 0?void 0:E.y)!==((A=this.props.crop)===null||A===void 0?void 0:A.y))&&this.emitCropAreaChange(),a.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),a.video!==this.props.video&&((N=this.videoRef.current)===null||N===void 0||N.load());var R=this.getObjectFit();R!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:R},this.computeSizes)},o.prototype.getAspect=function(){var a=this.props,f=a.cropSize,p=a.aspect;return f?f.width/f.height:p},o.prototype.getObjectFit=function(){var a,f,p,y;if(this.props.objectFit==="cover"){var w=this.imageRef.current||this.videoRef.current;if(w&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var S=this.containerRect.width/this.containerRect.height,v=((a=this.imageRef.current)===null||a===void 0?void 0:a.naturalWidth)||((f=this.videoRef.current)===null||f===void 0?void 0:f.videoWidth)||0,E=((p=this.imageRef.current)===null||p===void 0?void 0:p.naturalHeight)||((y=this.videoRef.current)===null||y===void 0?void 0:y.videoHeight)||0,A=v/E;return A<S?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},o.prototype.onPinchStart=function(a){var f=o.getTouchPoint(a.touches[0]),p=o.getTouchPoint(a.touches[1]);this.lastPinchDistance=m1(f,p),this.lastPinchRotation=g1(f,p),this.onDragStart(x1(f,p))},o.prototype.onPinchMove=function(a){var f=this;if(!(!this.currentDoc||!this.currentWindow)){var p=o.getTouchPoint(a.touches[0]),y=o.getTouchPoint(a.touches[1]),w=x1(p,y);this.onDrag(w),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var S=m1(p,y),v=f.props.zoom*(S/f.lastPinchDistance);f.setNewZoom(v,w,{shouldUpdatePosition:!1}),f.lastPinchDistance=S;var E=g1(p,y),A=f.props.rotation+(E-f.lastPinchRotation);f.props.onRotationChange&&f.props.onRotationChange(A),f.lastPinchRotation=E})}},o.prototype.render=function(){var a=this,f,p=this.props,y=p.image,w=p.video,S=p.mediaProps,v=p.transform,E=p.crop,A=E.x,N=E.y,R=p.rotation,M=p.zoom,L=p.cropShape,B=p.showGrid,j=p.style,U=j.containerStyle,W=j.cropAreaStyle,F=j.mediaStyle,q=p.classes,ee=q.containerClassName,re=q.cropAreaClassName,X=q.mediaClassName,le=(f=this.state.mediaObjectFit)!==null&&f!==void 0?f:this.getObjectFit();return I.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(ke){return a.containerRef=ke},"data-testid":"container",style:U,className:nc("reactEasyCrop_Container",ee)},y?I.createElement("img",er({alt:"",className:nc("reactEasyCrop_Image",le==="contain"&&"reactEasyCrop_Contain",le==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",le==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",X)},S,{src:y,ref:this.imageRef,style:er(er({},F),{transform:v||"translate(".concat(A,"px, ").concat(N,"px) rotate(").concat(R,"deg) scale(").concat(M,")")}),onLoad:this.onMediaLoad})):w&&I.createElement("video",er({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:nc("reactEasyCrop_Video",le==="contain"&&"reactEasyCrop_Contain",le==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",le==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",X)},S,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:er(er({},F),{transform:v||"translate(".concat(A,"px, ").concat(N,"px) rotate(").concat(R,"deg) scale(").concat(M,")")}),controls:!1}),(Array.isArray(w)?w:[{src:w}]).map(function(te){return I.createElement("source",er({key:te.src},te))})),this.state.cropSize&&I.createElement("div",{style:er(er({},W),{width:this.state.cropSize.width,height:this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,"data-testid":"cropper",className:nc("reactEasyCrop_CropArea",L==="round"&&"reactEasyCrop_CropAreaRound",B&&"reactEasyCrop_CropAreaGrid",re)}))},o.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:R2,minZoom:_2,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:k2},o.getMousePoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},o.getTouchPoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},o}(I.Component),Ta={},y1;function P2(){return y1||(y1=1,Ta.createCanvas=function(r,o){return Object.assign(document.createElement("canvas"),{width:r,height:o})},Ta.createImageData=function(r,o,a){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(r);case 2:return new ImageData(r,o);default:return new ImageData(r,o,a)}},Ta.loadImage=function(r,o){return new Promise(function(a,f){const p=Object.assign(document.createElement("img"),o);function y(){p.onload=null,p.onerror=null}p.onload=function(){y(),a(p)},p.onerror=function(){y(),f(new Error('Failed to load the image "'+r+'"'))},p.src=r})}),Ta}P2();async function gf(r,o){return console.log("Image source being cropped:",r),new Promise((a,f)=>{const p=new Image;p.onload=()=>{const y=document.createElement("canvas"),w=y.getContext("2d");y.width=o.width,y.height=o.height,w.drawImage(p,o.x,o.y,o.width,o.height,0,0,o.width,o.height);try{const S=y.toDataURL("image/jpeg");a(S)}catch{f(new Error("Error converting canvas to base64"))}},p.onerror=y=>f(new Error(`Image load error: ${y.message}`)),p.src=r})}async function It(r,o={}){const a=localStorage.getItem("access_token"),f={...o,credentials:"include",headers:{...a&&{Authorization:`Bearer ${a}`},...o.headers}};return fetch(`${window.server_url}${r}`,f)}const O2=({onSubmit:r,onClose:o,existingProfile:a})=>{const{user:f,userProfile:p,checkAuth:y}=I.useContext(Xn),[w,S]=I.useState({name:(p==null?void 0:p.name)||"",image:null,imagePreview:p!=null&&p.image_data?`data:image/jpeg;base64,${p.image_data}`:"/assets/fakeprofile.png",croppedImage:null}),[v,E]=I.useState({x:0,y:0}),[A,N]=I.useState(1),[R,M]=I.useState(null),[L,B]=I.useState(!1),[j,U]=I.useState(!1),W=ee=>{const re=ee.target.files[0];if(re){const X=new FileReader;X.onload=le=>{S(te=>({...te,image:re,imagePreview:le.target.result})),B(!0)},X.readAsDataURL(re)}},F=(ee,re)=>{console.log("Cropped Area Pixels:",re),M(re)};async function q(ee){ee.preventDefault();let re;if(w.croppedImage)re=w.croppedImage.split(",")[1];else if(w.image instanceof File){const le=await w.image.arrayBuffer();re=btoa(new Uint8Array(le).reduce((te,ke)=>te+String.fromCharCode(ke),""))}else if(p!=null&&p.image_data)re=p.image_data;else{console.error("No valid image provided");return}const X={name:w.name,image_data:re};console.log("Image data (first 100 chars):",re.substring(0,100));try{const le=await It("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)});if(!le.ok)throw new Error("Failed to update profile");const te=await le.json();await y(),console.log("Profile updated successfully:",te),o()}catch(le){console.error("Error updating profile:",le)}}return x.jsx("div",{className:"profile-creation-overlay",style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:x.jsxs("div",{className:"profile-creation-modal",style:{width:"70%",maxWidth:"500px",backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",padding:"2rem",boxShadow:"0 10px 30px rgba(20,77,255,0.15)",position:"relative",border:"1px solid rgba(20,77,255,0.1)"},children:[x.jsx("button",{onClick:o,style:{position:"absolute",top:"1.2rem",right:"1.2rem",background:"none",border:"none",fontSize:"1.8rem",cursor:"pointer",color:"#144dff",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.1)"}},children:""}),x.jsx("h2",{style:{fontSize:"clamp(1.8rem, 6vw, 2.5rem)",color:"#144dff",textAlign:"center",marginBottom:"2rem",fontWeight:"600"},children:"Your Profile"}),x.jsxs("form",{onSubmit:q,style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[x.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem"},children:[x.jsx("label",{style:{color:"#144dff",fontWeight:"500",fontSize:"1rem"},children:"Your Name"}),x.jsx("input",{type:"text",value:w.name,onChange:ee=>S({...w,name:ee.target.value}),style:{width:"100%",padding:"12px",borderRadius:"12px",border:"2px solid #e0e0e0",fontSize:"0.9rem",transition:"all 0.3s ease",backgroundColor:"rgba(255,255,255,0.9)","&:focus":{borderColor:"#144dff",outline:"none",boxShadow:"0 0 0 3px rgba(20,77,255,0.1)"}}})]}),!L&&x.jsx("div",{style:{width:"250px",height:"250px",margin:"0 auto",borderRadius:"20%",overflow:"hidden",border:"7px solid #144dff",boxShadow:"0 8px 25px rgba(20,77,255,0.2)",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.02)"}},children:x.jsx("img",{src:w.croppedImage?w.croppedImage:w.imagePreview?w.imagePreview:p!=null&&p.image_data?`data:image/jpeg;base64,${p.image_data}`:"/assets/fakeprofile.png",alt:"Profile preview",style:{width:"100%",height:"100%",objectFit:"cover"}})}),x.jsxs("div",{style:{textAlign:"center"},children:[x.jsx("input",{type:"file",id:"image-upload",accept:"image/*",onChange:W,style:{display:"none"}}),x.jsx("label",{htmlFor:"image-upload",style:{padding:"0.8rem 1.2rem",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",borderRadius:"25px",cursor:"pointer",display:"inline-block",fontSize:"0.9rem",fontWeight:"600",boxShadow:"0 4px 15px rgba(20,77,255,0.2)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Upload New Image"})]}),L&&x.jsxs("div",{style:{width:"100%",maxWidth:"300px",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",gap:"1.2rem"},children:[x.jsx("div",{style:{position:"relative",width:"250px",height:"250px",borderRadius:"20%",overflow:"hidden",border:"7px solid #144dff",boxShadow:"0 8px 25px rgba(20,77,255,0.2)"},children:x.jsx(mf,{image:w.imagePreview,crop:v,zoom:A,aspect:1,onCropComplete:F,onCropChange:E,onZoomChange:N})}),x.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[x.jsx("button",{type:"button",onClick:()=>{B(!1),w.croppedImage||S(ee=>({...ee,imagePreview:null}))},style:{padding:"0.8rem 1.2rem",borderRadius:"25px",border:"2px solid #144dff",background:"white",color:"#144dff",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease","&:hover":{background:"rgba(20,77,255,0.1)"}},children:"Cancel"}),x.jsx("button",{type:"button",onClick:async()=>{try{const ee=await gf(w.imagePreview,R);S(re=>({...re,croppedImage:ee,imagePreview:ee})),B(!1),U(!0),setTimeout(()=>U(!1),1e4)}catch(ee){console.error("Error cropping image:",ee)}},className:`save-profile-button ${j?"glow-bounce":""}`,style:{padding:"0.8rem 1.2rem",borderRadius:"25px",border:"none",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(20,77,255,0.2)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Save Cropped Image"})]})]}),x.jsx("button",{type:"submit",className:`save-profile-button ${j?"glow-bounce":""}`,style:{padding:"1rem",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",border:"none",borderRadius:"25px",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",marginTop:"1rem",boxShadow:"0 4px 15px rgba(20,77,255,0.2)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Save Profile"})]})]})})};var Ia={},w1;function M2(){if(w1)return Ia;w1=1,Object.defineProperty(Ia,"__esModule",{value:!0}),Ia.parse=w,Ia.serialize=E;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,o=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,f=/^[\u0020-\u003A\u003D-\u007E]*$/,p=Object.prototype.toString,y=(()=>{const R=function(){};return R.prototype=Object.create(null),R})();function w(R,M){const L=new y,B=R.length;if(B<2)return L;const j=(M==null?void 0:M.decode)||A;let U=0;do{const W=R.indexOf("=",U);if(W===-1)break;const F=R.indexOf(";",U),q=F===-1?B:F;if(W>q){U=R.lastIndexOf(";",W-1)+1;continue}const ee=S(R,U,W),re=v(R,W,ee),X=R.slice(ee,re);if(L[X]===void 0){let le=S(R,W+1,q),te=v(R,q,le);const ke=j(R.slice(le,te));L[X]=ke}U=q+1}while(U<B);return L}function S(R,M,L){do{const B=R.charCodeAt(M);if(B!==32&&B!==9)return M}while(++M<L);return L}function v(R,M,L){for(;M>L;){const B=R.charCodeAt(--M);if(B!==32&&B!==9)return M+1}return L}function E(R,M,L){const B=(L==null?void 0:L.encode)||encodeURIComponent;if(!r.test(R))throw new TypeError(`argument name is invalid: ${R}`);const j=B(M);if(!o.test(j))throw new TypeError(`argument val is invalid: ${M}`);let U=R+"="+j;if(!L)return U;if(L.maxAge!==void 0){if(!Number.isInteger(L.maxAge))throw new TypeError(`option maxAge is invalid: ${L.maxAge}`);U+="; Max-Age="+L.maxAge}if(L.domain){if(!a.test(L.domain))throw new TypeError(`option domain is invalid: ${L.domain}`);U+="; Domain="+L.domain}if(L.path){if(!f.test(L.path))throw new TypeError(`option path is invalid: ${L.path}`);U+="; Path="+L.path}if(L.expires){if(!N(L.expires)||!Number.isFinite(L.expires.valueOf()))throw new TypeError(`option expires is invalid: ${L.expires}`);U+="; Expires="+L.expires.toUTCString()}if(L.httpOnly&&(U+="; HttpOnly"),L.secure&&(U+="; Secure"),L.partitioned&&(U+="; Partitioned"),L.priority)switch(typeof L.priority=="string"?L.priority.toLowerCase():void 0){case"low":U+="; Priority=Low";break;case"medium":U+="; Priority=Medium";break;case"high":U+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${L.priority}`)}if(L.sameSite)switch(typeof L.sameSite=="string"?L.sameSite.toLowerCase():L.sameSite){case!0:case"strict":U+="; SameSite=Strict";break;case"lax":U+="; SameSite=Lax";break;case"none":U+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${L.sameSite}`)}return U}function A(R){if(R.indexOf("%")===-1)return R;try{return decodeURIComponent(R)}catch{return R}}function N(R){return p.call(R)==="[object Date]"}return Ia}M2();/**
 * react-router v7.0.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var v1="popstate";function D2(r={}){function o(f,p){let{pathname:y,search:w,hash:S}=f.location;return Bd("",{pathname:y,search:w,hash:S},p.state&&p.state.usr||null,p.state&&p.state.key||"default")}function a(f,p){return typeof p=="string"?p:ja(p)}return B2(o,a,null,r)}function mn(r,o){if(r===!1||r===null||typeof r>"u")throw new Error(o)}function ai(r,o){if(!r){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}function L2(){return Math.random().toString(36).substring(2,10)}function C1(r,o){return{usr:r.state,key:r.key,idx:o}}function Bd(r,o,a=null,f){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof o=="string"?Fo(o):o,state:a,key:o&&o.key||f||L2()}}function ja({pathname:r="/",search:o="",hash:a=""}){return o&&o!=="?"&&(r+=o.charAt(0)==="?"?o:"?"+o),a&&a!=="#"&&(r+=a.charAt(0)==="#"?a:"#"+a),r}function Fo(r){let o={};if(r){let a=r.indexOf("#");a>=0&&(o.hash=r.substring(a),r=r.substring(0,a));let f=r.indexOf("?");f>=0&&(o.search=r.substring(f),r=r.substring(0,f)),r&&(o.pathname=r)}return o}function B2(r,o,a,f={}){let{window:p=document.defaultView,v5Compat:y=!1}=f,w=p.history,S="POP",v=null,E=A();E==null&&(E=0,w.replaceState({...w.state,idx:E},""));function A(){return(w.state||{idx:null}).idx}function N(){S="POP";let j=A(),U=j==null?null:j-E;E=j,v&&v({action:S,location:B.location,delta:U})}function R(j,U){S="PUSH";let W=Bd(B.location,j,U);E=A()+1;let F=C1(W,E),q=B.createHref(W);try{w.pushState(F,"",q)}catch(ee){if(ee instanceof DOMException&&ee.name==="DataCloneError")throw ee;p.location.assign(q)}y&&v&&v({action:S,location:B.location,delta:1})}function M(j,U){S="REPLACE";let W=Bd(B.location,j,U);E=A();let F=C1(W,E),q=B.createHref(W);w.replaceState(F,"",q),y&&v&&v({action:S,location:B.location,delta:0})}function L(j){let U=p.location.origin!=="null"?p.location.origin:p.location.href,W=typeof j=="string"?j:ja(j);return W=W.replace(/ $/,"%20"),mn(U,`No window.location.(origin|href) available to create URL for href: ${W}`),new URL(W,U)}let B={get action(){return S},get location(){return r(p,w)},listen(j){if(v)throw new Error("A history only accepts one active listener");return p.addEventListener(v1,N),v=j,()=>{p.removeEventListener(v1,N),v=null}},createHref(j){return o(p,j)},createURL:L,encodeLocation(j){let U=L(j);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:R,replace:M,go(j){return w.go(j)}};return B}function qp(r,o,a="/"){return j2(r,o,a,!1)}function j2(r,o,a,f){let p=typeof o=="string"?Fo(o):o,y=xs(p.pathname||"/",a);if(y==null)return null;let w=Qp(r);F2(w);let S=null;for(let v=0;S==null&&v<w.length;++v){let E=$2(y);S=Z2(w[v],E,f)}return S}function Qp(r,o=[],a=[],f=""){let p=(y,w,S)=>{let v={relativePath:S===void 0?y.path||"":S,caseSensitive:y.caseSensitive===!0,childrenIndex:w,route:y};v.relativePath.startsWith("/")&&(mn(v.relativePath.startsWith(f),`Absolute route path "${v.relativePath}" nested under path "${f}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(f.length));let E=Fi([f,v.relativePath]),A=a.concat(v);y.children&&y.children.length>0&&(mn(y.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),Qp(y.children,o,A,E)),!(y.path==null&&!y.index)&&o.push({path:E,score:X2(E,y.index),routesMeta:A})};return r.forEach((y,w)=>{var S;if(y.path===""||!((S=y.path)!=null&&S.includes("?")))p(y,w);else for(let v of Jp(y.path))p(y,w,v)}),o}function Jp(r){let o=r.split("/");if(o.length===0)return[];let[a,...f]=o,p=a.endsWith("?"),y=a.replace(/\?$/,"");if(f.length===0)return p?[y,""]:[y];let w=Jp(f.join("/")),S=[];return S.push(...w.map(v=>v===""?y:[y,v].join("/"))),p&&S.push(...w),S.map(v=>r.startsWith("/")&&v===""?"/":v)}function F2(r){r.sort((o,a)=>o.score!==a.score?a.score-o.score:Y2(o.routesMeta.map(f=>f.childrenIndex),a.routesMeta.map(f=>f.childrenIndex)))}var V2=/^:[\w-]+$/,U2=3,z2=2,W2=1,H2=10,G2=-2,E1=r=>r==="*";function X2(r,o){let a=r.split("/"),f=a.length;return a.some(E1)&&(f+=G2),o&&(f+=z2),a.filter(p=>!E1(p)).reduce((p,y)=>p+(V2.test(y)?U2:y===""?W2:H2),f)}function Y2(r,o){return r.length===o.length&&r.slice(0,-1).every((f,p)=>f===o[p])?r[r.length-1]-o[o.length-1]:0}function Z2(r,o,a=!1){let{routesMeta:f}=r,p={},y="/",w=[];for(let S=0;S<f.length;++S){let v=f[S],E=S===f.length-1,A=y==="/"?o:o.slice(y.length)||"/",N=wc({path:v.relativePath,caseSensitive:v.caseSensitive,end:E},A),R=v.route;if(!N&&E&&a&&!f[f.length-1].route.index&&(N=wc({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},A)),!N)return null;Object.assign(p,N.params),w.push({params:p,pathname:Fi([y,N.pathname]),pathnameBase:ey(Fi([y,N.pathnameBase])),route:R}),N.pathnameBase!=="/"&&(y=Fi([y,N.pathnameBase]))}return w}function wc(r,o){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[a,f]=K2(r.path,r.caseSensitive,r.end),p=o.match(a);if(!p)return null;let y=p[0],w=y.replace(/(.)\/+$/,"$1"),S=p.slice(1);return{params:f.reduce((E,{paramName:A,isOptional:N},R)=>{if(A==="*"){let L=S[R]||"";w=y.slice(0,y.length-L.length).replace(/(.)\/+$/,"$1")}const M=S[R];return N&&!M?E[A]=void 0:E[A]=(M||"").replace(/%2F/g,"/"),E},{}),pathname:y,pathnameBase:w,pattern:r}}function K2(r,o=!1,a=!0){ai(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let f=[],p="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(w,S,v)=>(f.push({paramName:S,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(f.push({paramName:"*"}),p+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?p+="\\/*$":r!==""&&r!=="/"&&(p+="(?:(?=\\/|$))"),[new RegExp(p,o?void 0:"i"),f]}function $2(r){try{return r.split("/").map(o=>decodeURIComponent(o).replace(/\//g,"%2F")).join("/")}catch(o){return ai(!1,`The URL path "${r}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${o}).`),r}}function xs(r,o){if(o==="/")return r;if(!r.toLowerCase().startsWith(o.toLowerCase()))return null;let a=o.endsWith("/")?o.length-1:o.length,f=r.charAt(a);return f&&f!=="/"?null:r.slice(a)||"/"}function q2(r,o="/"){let{pathname:a,search:f="",hash:p=""}=typeof r=="string"?Fo(r):r;return{pathname:a?a.startsWith("/")?a:Q2(a,o):o,search:ty(f),hash:ny(p)}}function Q2(r,o){let a=o.replace(/\/+$/,"").split("/");return r.split("/").forEach(p=>{p===".."?a.length>1&&a.pop():p!=="."&&a.push(p)}),a.length>1?a.join("/"):"/"}function gd(r,o,a,f){return`Cannot include a '${r}' character in a manually specified \`to.${o}\` field [${JSON.stringify(f)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function J2(r){return r.filter((o,a)=>a===0||o.route.path&&o.route.path.length>0)}function em(r){let o=J2(r);return o.map((a,f)=>f===o.length-1?a.pathname:a.pathnameBase)}function tm(r,o,a,f=!1){let p;typeof r=="string"?p=Fo(r):(p={...r},mn(!p.pathname||!p.pathname.includes("?"),gd("?","pathname","search",p)),mn(!p.pathname||!p.pathname.includes("#"),gd("#","pathname","hash",p)),mn(!p.search||!p.search.includes("#"),gd("#","search","hash",p)));let y=r===""||p.pathname==="",w=y?"/":p.pathname,S;if(w==null)S=a;else{let N=o.length-1;if(!f&&w.startsWith("..")){let R=w.split("/");for(;R[0]==="..";)R.shift(),N-=1;p.pathname=R.join("/")}S=N>=0?o[N]:"/"}let v=q2(p,S),E=w&&w!=="/"&&w.endsWith("/"),A=(y||w===".")&&a.endsWith("/");return!v.pathname.endsWith("/")&&(E||A)&&(v.pathname+="/"),v}var Fi=r=>r.join("/").replace(/\/\/+/g,"/"),ey=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),ty=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,ny=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function ry(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var nm=["POST","PUT","PATCH","DELETE"];new Set(nm);var iy=["GET",...nm];new Set(iy);var Vo=I.createContext(null);Vo.displayName="DataRouter";var kc=I.createContext(null);kc.displayName="DataRouterState";var rm=I.createContext({isTransitioning:!1});rm.displayName="ViewTransition";var sy=I.createContext(new Map);sy.displayName="Fetchers";var oy=I.createContext(null);oy.displayName="Await";var wi=I.createContext(null);wi.displayName="Navigation";var Ga=I.createContext(null);Ga.displayName="Location";var vi=I.createContext({outlet:null,matches:[],isDataRoute:!1});vi.displayName="Route";var xf=I.createContext(null);xf.displayName="RouteError";function ay(r,{relative:o}={}){mn(Xa(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:f}=I.useContext(wi),{hash:p,pathname:y,search:w}=Ya(r,{relative:o}),S=y;return a!=="/"&&(S=y==="/"?a:Fi([a,y])),f.createHref({pathname:S,search:w,hash:p})}function Xa(){return I.useContext(Ga)!=null}function Nr(){return mn(Xa(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(Ga).location}var im="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function sm(r){I.useContext(wi).static||I.useLayoutEffect(r)}function Pn(){let{isDataRoute:r}=I.useContext(vi);return r?Cy():ly()}function ly(){mn(Xa(),"useNavigate() may be used only in the context of a <Router> component.");let r=I.useContext(Vo),{basename:o,navigator:a}=I.useContext(wi),{matches:f}=I.useContext(vi),{pathname:p}=Nr(),y=JSON.stringify(em(f)),w=I.useRef(!1);return sm(()=>{w.current=!0}),I.useCallback((v,E={})=>{if(ai(w.current,im),!w.current)return;if(typeof v=="number"){a.go(v);return}let A=tm(v,JSON.parse(y),p,E.relative==="path");r==null&&o!=="/"&&(A.pathname=A.pathname==="/"?o:Fi([o,A.pathname])),(E.replace?a.replace:a.push)(A,E.state,E)},[o,a,y,p,r])}I.createContext(null);function cy(){let{matches:r}=I.useContext(vi),o=r[r.length-1];return o?o.params:{}}function Ya(r,{relative:o}={}){let{matches:a}=I.useContext(vi),{pathname:f}=Nr(),p=JSON.stringify(em(a));return I.useMemo(()=>tm(r,JSON.parse(p),f,o==="path"),[r,p,f,o])}function uy(r,o){return om(r,o)}function om(r,o,a,f){var U;mn(Xa(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:p}=I.useContext(wi),{matches:y}=I.useContext(vi),w=y[y.length-1],S=w?w.params:{},v=w?w.pathname:"/",E=w?w.pathnameBase:"/",A=w&&w.route;{let W=A&&A.path||"";am(v,!A||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${v}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let N=Nr(),R;if(o){let W=typeof o=="string"?Fo(o):o;mn(E==="/"||((U=W.pathname)==null?void 0:U.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${W.pathname}" was given in the \`location\` prop.`),R=W}else R=N;let M=R.pathname||"/",L=M;if(E!=="/"){let W=E.replace(/^\//,"").split("/");L="/"+M.replace(/^\//,"").split("/").slice(W.length).join("/")}let B=qp(r,{pathname:L});ai(A||B!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),ai(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=my(B&&B.map(W=>Object.assign({},W,{params:Object.assign({},S,W.params),pathname:Fi([E,p.encodeLocation?p.encodeLocation(W.pathname).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?E:Fi([E,p.encodeLocation?p.encodeLocation(W.pathnameBase).pathname:W.pathnameBase])})),y,a,f);return o&&j?I.createElement(Ga.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},j):j}function dy(){let r=vy(),o=ry(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),a=r instanceof Error?r.stack:null,f="rgba(200,200,200, 0.5)",p={padding:"0.5rem",backgroundColor:f},y={padding:"2px 4px",backgroundColor:f},w=null;return console.error("Error handled by React Router default ErrorBoundary:",r),w=I.createElement(I.Fragment,null,I.createElement("p",null," Hey developer "),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:y},"ErrorBoundary")," or"," ",I.createElement("code",{style:y},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},o),a?I.createElement("pre",{style:p},a):null,w)}var fy=I.createElement(dy,null),hy=class extends I.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,o){return o.location!==r.location||o.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:o.error,location:o.location,revalidation:r.revalidation||o.revalidation}}componentDidCatch(r,o){console.error("React Router caught the following error during render",r,o)}render(){return this.state.error!==void 0?I.createElement(vi.Provider,{value:this.props.routeContext},I.createElement(xf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function py({routeContext:r,match:o,children:a}){let f=I.useContext(Vo);return f&&f.static&&f.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(f.staticContext._deepestRenderedBoundaryId=o.route.id),I.createElement(vi.Provider,{value:r},a)}function my(r,o=[],a=null,f=null){if(r==null){if(!a)return null;if(a.errors)r=a.matches;else if(o.length===0&&!a.initialized&&a.matches.length>0)r=a.matches;else return null}let p=r,y=a==null?void 0:a.errors;if(y!=null){let v=p.findIndex(E=>E.route.id&&(y==null?void 0:y[E.route.id])!==void 0);mn(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(y).join(",")}`),p=p.slice(0,Math.min(p.length,v+1))}let w=!1,S=-1;if(a)for(let v=0;v<p.length;v++){let E=p[v];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(S=v),E.route.id){let{loaderData:A,errors:N}=a,R=E.route.loader&&!A.hasOwnProperty(E.route.id)&&(!N||N[E.route.id]===void 0);if(E.route.lazy||R){w=!0,S>=0?p=p.slice(0,S+1):p=[p[0]];break}}}return p.reduceRight((v,E,A)=>{let N,R=!1,M=null,L=null;a&&(N=y&&E.route.id?y[E.route.id]:void 0,M=E.route.errorElement||fy,w&&(S<0&&A===0?(am("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,L=null):S===A&&(R=!0,L=E.route.hydrateFallbackElement||null)));let B=o.concat(p.slice(0,A+1)),j=()=>{let U;return N?U=M:R?U=L:E.route.Component?U=I.createElement(E.route.Component,null):E.route.element?U=E.route.element:U=v,I.createElement(py,{match:E,routeContext:{outlet:v,matches:B,isDataRoute:a!=null},children:U})};return a&&(E.route.ErrorBoundary||E.route.errorElement||A===0)?I.createElement(hy,{location:a.location,revalidation:a.revalidation,component:M,error:N,children:j(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):j()},null)}function yf(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gy(r){let o=I.useContext(Vo);return mn(o,yf(r)),o}function xy(r){let o=I.useContext(kc);return mn(o,yf(r)),o}function yy(r){let o=I.useContext(vi);return mn(o,yf(r)),o}function wf(r){let o=yy(r),a=o.matches[o.matches.length-1];return mn(a.route.id,`${r} can only be used on routes that contain a unique "id"`),a.route.id}function wy(){return wf("useRouteId")}function vy(){var f;let r=I.useContext(xf),o=xy("useRouteError"),a=wf("useRouteError");return r!==void 0?r:(f=o.errors)==null?void 0:f[a]}function Cy(){let{router:r}=gy("useNavigate"),o=wf("useNavigate"),a=I.useRef(!1);return sm(()=>{a.current=!0}),I.useCallback(async(p,y={})=>{ai(a.current,im),a.current&&(typeof p=="number"?r.navigate(p):await r.navigate(p,{fromRouteId:o,...y}))},[r,o])}var b1={};function am(r,o,a){!o&&!b1[r]&&(b1[r]=!0,ai(!1,a))}I.memo(Ey);function Ey({routes:r,future:o,state:a}){return om(r,void 0,a,o)}function Jn(r){mn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function by({basename:r="/",children:o=null,location:a,navigationType:f="POP",navigator:p,static:y=!1}){mn(!Xa(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let w=r.replace(/^\/*/,"/"),S=I.useMemo(()=>({basename:w,navigator:p,static:y,future:{}}),[w,p,y]);typeof a=="string"&&(a=Fo(a));let{pathname:v="/",search:E="",hash:A="",state:N=null,key:R="default"}=a,M=I.useMemo(()=>{let L=xs(v,w);return L==null?null:{location:{pathname:L,search:E,hash:A,state:N,key:R},navigationType:f}},[w,v,E,A,N,R,f]);return ai(M!=null,`<Router basename="${w}"> is not able to match the URL "${v}${E}${A}" because it does not start with the basename, so the <Router> won't render anything.`),M==null?null:I.createElement(wi.Provider,{value:S},I.createElement(Ga.Provider,{children:o,value:M}))}function Sy({children:r,location:o}){return uy(jd(r),o)}function jd(r,o=[]){let a=[];return I.Children.forEach(r,(f,p)=>{if(!I.isValidElement(f))return;let y=[...o,p];if(f.type===I.Fragment){a.push.apply(a,jd(f.props.children,y));return}mn(f.type===Jn,`[${typeof f.type=="string"?f.type:f.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mn(!f.props.index||!f.props.children,"An index route cannot have child routes.");let w={id:f.props.id||y.join("-"),caseSensitive:f.props.caseSensitive,element:f.props.element,Component:f.props.Component,index:f.props.index,path:f.props.path,loader:f.props.loader,action:f.props.action,hydrateFallbackElement:f.props.hydrateFallbackElement,HydrateFallback:f.props.HydrateFallback,errorElement:f.props.errorElement,ErrorBoundary:f.props.ErrorBoundary,hasErrorBoundary:f.props.hasErrorBoundary===!0||f.props.ErrorBoundary!=null||f.props.errorElement!=null,shouldRevalidate:f.props.shouldRevalidate,handle:f.props.handle,lazy:f.props.lazy};f.props.children&&(w.children=jd(f.props.children,y)),a.push(w)}),a}var dc="get",fc="application/x-www-form-urlencoded";function Pc(r){return r!=null&&typeof r.tagName=="string"}function Ay(r){return Pc(r)&&r.tagName.toLowerCase()==="button"}function Ty(r){return Pc(r)&&r.tagName.toLowerCase()==="form"}function Iy(r){return Pc(r)&&r.tagName.toLowerCase()==="input"}function Ny(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function _y(r,o){return r.button===0&&(!o||o==="_self")&&!Ny(r)}function Fd(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((o,a)=>{let f=r[a];return o.concat(Array.isArray(f)?f.map(p=>[a,p]):[[a,f]])},[]))}function Ry(r,o){let a=Fd(r);return o&&o.forEach((f,p)=>{a.has(p)||o.getAll(p).forEach(y=>{a.append(p,y)})}),a}var rc=null;function ky(){if(rc===null)try{new FormData(document.createElement("form"),0),rc=!1}catch{rc=!0}return rc}var Py=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xd(r){return r!=null&&!Py.has(r)?(ai(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${fc}"`),null):r}function Oy(r,o){let a,f,p,y,w;if(Ty(r)){let S=r.getAttribute("action");f=S?xs(S,o):null,a=r.getAttribute("method")||dc,p=xd(r.getAttribute("enctype"))||fc,y=new FormData(r)}else if(Ay(r)||Iy(r)&&(r.type==="submit"||r.type==="image")){let S=r.form;if(S==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=r.getAttribute("formaction")||S.getAttribute("action");if(f=v?xs(v,o):null,a=r.getAttribute("formmethod")||S.getAttribute("method")||dc,p=xd(r.getAttribute("formenctype"))||xd(S.getAttribute("enctype"))||fc,y=new FormData(S,r),!ky()){let{name:E,type:A,value:N}=r;if(A==="image"){let R=E?`${E}.`:"";y.append(`${R}x`,"0"),y.append(`${R}y`,"0")}else E&&y.append(E,N)}}else{if(Pc(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=dc,f=null,p=fc,w=r}return y&&p==="text/plain"&&(w=y,y=void 0),{action:f,method:a.toLowerCase(),encType:p,formData:y,body:w}}function vf(r,o){if(r===!1||r===null||typeof r>"u")throw new Error(o)}async function My(r,o){if(r.id in o)return o[r.id];try{let a=await import(r.module);return o[r.id]=a,a}catch(a){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Dy(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function Ly(r,o,a){let f=await Promise.all(r.map(async p=>{let y=o.routes[p.route.id];if(y){let w=await My(y,a);return w.links?w.links():[]}return[]}));return Vy(f.flat(1).filter(Dy).filter(p=>p.rel==="stylesheet"||p.rel==="preload").map(p=>p.rel==="stylesheet"?{...p,rel:"prefetch",as:"style"}:{...p,rel:"prefetch"}))}function S1(r,o,a,f,p,y){let w=(v,E)=>a[E]?v.route.id!==a[E].route.id:!0,S=(v,E)=>{var A;return a[E].pathname!==v.pathname||((A=a[E].route.path)==null?void 0:A.endsWith("*"))&&a[E].params["*"]!==v.params["*"]};return y==="assets"?o.filter((v,E)=>w(v,E)||S(v,E)):y==="data"?o.filter((v,E)=>{var N;let A=f.routes[v.route.id];if(!A||!A.hasLoader)return!1;if(w(v,E)||S(v,E))return!0;if(v.route.shouldRevalidate){let R=v.route.shouldRevalidate({currentUrl:new URL(p.pathname+p.search+p.hash,window.origin),currentParams:((N=a[0])==null?void 0:N.params)||{},nextUrl:new URL(r,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof R=="boolean")return R}return!0}):[]}function By(r,o){return jy(r.map(a=>{let f=o.routes[a.route.id];if(!f)return[];let p=[f.module];return f.imports&&(p=p.concat(f.imports)),p}).flat(1))}function jy(r){return[...new Set(r)]}function Fy(r){let o={},a=Object.keys(r).sort();for(let f of a)o[f]=r[f];return o}function Vy(r,o){let a=new Set;return new Set(o),r.reduce((f,p)=>{let y=JSON.stringify(Fy(p));return a.has(y)||(a.add(y),f.push({key:y,link:p})),f},[])}function Uy(r){let o=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return o.pathname==="/"?o.pathname="_root.data":o.pathname=`${o.pathname.replace(/\/$/,"")}.data`,o}function zy(){let r=I.useContext(Vo);return vf(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Wy(){let r=I.useContext(kc);return vf(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Cf=I.createContext(void 0);Cf.displayName="FrameworkContext";function lm(){let r=I.useContext(Cf);return vf(r,"You must render this element inside a <HydratedRouter> element"),r}function Hy(r,o){let a=I.useContext(Cf),[f,p]=I.useState(!1),[y,w]=I.useState(!1),{onFocus:S,onBlur:v,onMouseEnter:E,onMouseLeave:A,onTouchStart:N}=o,R=I.useRef(null);I.useEffect(()=>{if(r==="render"&&w(!0),r==="viewport"){let B=U=>{U.forEach(W=>{w(W.isIntersecting)})},j=new IntersectionObserver(B,{threshold:.5});return R.current&&j.observe(R.current),()=>{j.disconnect()}}},[r]),I.useEffect(()=>{if(f){let B=setTimeout(()=>{w(!0)},100);return()=>{clearTimeout(B)}}},[f]);let M=()=>{p(!0)},L=()=>{p(!1),w(!1)};return a?r!=="intent"?[y,R,{}]:[y,R,{onFocus:Na(S,M),onBlur:Na(v,L),onMouseEnter:Na(E,M),onMouseLeave:Na(A,L),onTouchStart:Na(N,M)}]:[!1,R,{}]}function Na(r,o){return a=>{r&&r(a),a.defaultPrevented||o(a)}}function Gy({page:r,...o}){let{router:a}=zy(),f=I.useMemo(()=>qp(a.routes,r,a.basename),[a.routes,r,a.basename]);return f?I.createElement(Yy,{page:r,matches:f,...o}):(console.warn(`Tried to prefetch ${r} but no routes matched.`),null)}function Xy(r){let{manifest:o,routeModules:a}=lm(),[f,p]=I.useState([]);return I.useEffect(()=>{let y=!1;return Ly(r,o,a).then(w=>{y||p(w)}),()=>{y=!0}},[r,o,a]),f}function Yy({page:r,matches:o,...a}){let f=Nr(),{manifest:p,routeModules:y}=lm(),{loaderData:w,matches:S}=Wy(),v=I.useMemo(()=>S1(r,o,S,p,f,"data"),[r,o,S,p,f]),E=I.useMemo(()=>S1(r,o,S,p,f,"assets"),[r,o,S,p,f]),A=I.useMemo(()=>{if(r===f.pathname+f.search+f.hash)return[];let M=new Set,L=!1;if(o.forEach(j=>{var W;let U=p.routes[j.route.id];!U||!U.hasLoader||(!v.some(F=>F.route.id===j.route.id)&&j.route.id in w&&((W=y[j.route.id])!=null&&W.shouldRevalidate)||U.hasClientLoader?L=!0:M.add(j.route.id))}),M.size===0)return[];let B=Uy(r);return L&&M.size>0&&B.searchParams.set("_routes",o.filter(j=>M.has(j.route.id)).map(j=>j.route.id).join(",")),[B.pathname+B.search]},[w,f,p,v,o,r,y]),N=I.useMemo(()=>By(E,p),[E,p]),R=Xy(E);return I.createElement(I.Fragment,null,A.map(M=>I.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...a})),N.map(M=>I.createElement("link",{key:M,rel:"modulepreload",href:M,...a})),R.map(({key:M,link:L})=>I.createElement("link",{key:M,...L})))}function Zy(...r){return o=>{r.forEach(a=>{typeof a=="function"?a(o):a!=null&&(a.current=o)})}}var cm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{cm&&(window.__reactRouterVersion="7.0.2")}catch{}function Ky({basename:r,children:o,window:a}){let f=I.useRef();f.current==null&&(f.current=D2({window:a,v5Compat:!0}));let p=f.current,[y,w]=I.useState({action:p.action,location:p.location}),S=I.useCallback(v=>{I.startTransition(()=>w(v))},[w]);return I.useLayoutEffect(()=>p.listen(S),[p,S]),I.createElement(by,{basename:r,children:o,location:y.location,navigationType:y.action,navigator:p})}var um=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dm=I.forwardRef(function({onClick:o,discover:a="render",prefetch:f="none",relative:p,reloadDocument:y,replace:w,state:S,target:v,to:E,preventScrollReset:A,viewTransition:N,...R},M){let{basename:L}=I.useContext(wi),B=typeof E=="string"&&um.test(E),j,U=!1;if(typeof E=="string"&&B&&(j=E,cm))try{let te=new URL(window.location.href),ke=E.startsWith("//")?new URL(te.protocol+E):new URL(E),Le=xs(ke.pathname,L);ke.origin===te.origin&&Le!=null?E=Le+ke.search+ke.hash:U=!0}catch{ai(!1,`<Link to="${E}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let W=ay(E,{relative:p}),[F,q,ee]=Hy(f,R),re=Jy(E,{replace:w,state:S,target:v,preventScrollReset:A,relative:p,viewTransition:N});function X(te){o&&o(te),te.defaultPrevented||re(te)}let le=I.createElement("a",{...R,...ee,href:j||W,onClick:U||y?o:X,ref:Zy(M,q),target:v,"data-discover":!B&&a==="render"?"true":void 0});return F&&!B?I.createElement(I.Fragment,null,le,I.createElement(Gy,{page:W})):le});dm.displayName="Link";var $y=I.forwardRef(function({"aria-current":o="page",caseSensitive:a=!1,className:f="",end:p=!1,style:y,to:w,viewTransition:S,children:v,...E},A){let N=Ya(w,{relative:E.relative}),R=Nr(),M=I.useContext(kc),{navigator:L,basename:B}=I.useContext(wi),j=M!=null&&sw(N)&&S===!0,U=L.encodeLocation?L.encodeLocation(N).pathname:N.pathname,W=R.pathname,F=M&&M.navigation&&M.navigation.location?M.navigation.location.pathname:null;a||(W=W.toLowerCase(),F=F?F.toLowerCase():null,U=U.toLowerCase()),F&&B&&(F=xs(F,B)||F);const q=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let ee=W===U||!p&&W.startsWith(U)&&W.charAt(q)==="/",re=F!=null&&(F===U||!p&&F.startsWith(U)&&F.charAt(U.length)==="/"),X={isActive:ee,isPending:re,isTransitioning:j},le=ee?o:void 0,te;typeof f=="function"?te=f(X):te=[f,ee?"active":null,re?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let ke=typeof y=="function"?y(X):y;return I.createElement(dm,{...E,"aria-current":le,className:te,ref:A,style:ke,to:w,viewTransition:S},typeof v=="function"?v(X):v)});$y.displayName="NavLink";var qy=I.forwardRef(({discover:r="render",fetcherKey:o,navigate:a,reloadDocument:f,replace:p,state:y,method:w=dc,action:S,onSubmit:v,relative:E,preventScrollReset:A,viewTransition:N,...R},M)=>{let L=rw(),B=iw(S,{relative:E}),j=w.toLowerCase()==="get"?"get":"post",U=typeof S=="string"&&um.test(S),W=F=>{if(v&&v(F),F.defaultPrevented)return;F.preventDefault();let q=F.nativeEvent.submitter,ee=(q==null?void 0:q.getAttribute("formmethod"))||w;L(q||F.currentTarget,{fetcherKey:o,method:ee,navigate:a,replace:p,state:y,relative:E,preventScrollReset:A,viewTransition:N})};return I.createElement("form",{ref:M,method:j,action:B,onSubmit:f?v:W,...R,"data-discover":!U&&r==="render"?"true":void 0})});qy.displayName="Form";function Qy(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fm(r){let o=I.useContext(Vo);return mn(o,Qy(r)),o}function Jy(r,{target:o,replace:a,state:f,preventScrollReset:p,relative:y,viewTransition:w}={}){let S=Pn(),v=Nr(),E=Ya(r,{relative:y});return I.useCallback(A=>{if(_y(A,o)){A.preventDefault();let N=a!==void 0?a:ja(v)===ja(E);S(r,{replace:N,state:f,preventScrollReset:p,relative:y,viewTransition:w})}},[v,S,E,a,f,o,r,p,y,w])}function ew(r){ai(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let o=I.useRef(Fd(r)),a=I.useRef(!1),f=Nr(),p=I.useMemo(()=>Ry(f.search,a.current?null:o.current),[f.search]),y=Pn(),w=I.useCallback((S,v)=>{const E=Fd(typeof S=="function"?S(p):S);a.current=!0,y("?"+E,v)},[y,p]);return[p,w]}var tw=0,nw=()=>`__${String(++tw)}__`;function rw(){let{router:r}=fm("useSubmit"),{basename:o}=I.useContext(wi),a=wy();return I.useCallback(async(f,p={})=>{let{action:y,method:w,encType:S,formData:v,body:E}=Oy(f,o);if(p.navigate===!1){let A=p.fetcherKey||nw();await r.fetch(A,a,p.action||y,{preventScrollReset:p.preventScrollReset,formData:v,body:E,formMethod:p.method||w,formEncType:p.encType||S,flushSync:p.flushSync})}else await r.navigate(p.action||y,{preventScrollReset:p.preventScrollReset,formData:v,body:E,formMethod:p.method||w,formEncType:p.encType||S,replace:p.replace,state:p.state,fromRouteId:a,flushSync:p.flushSync,viewTransition:p.viewTransition})},[r,o,a])}function iw(r,{relative:o}={}){let{basename:a}=I.useContext(wi),f=I.useContext(vi);mn(f,"useFormAction must be used inside a RouteContext");let[p]=f.matches.slice(-1),y={...Ya(r||".",{relative:o})},w=Nr();if(r==null){y.search=w.search;let S=new URLSearchParams(y.search),v=S.getAll("index");if(v.some(A=>A==="")){S.delete("index"),v.filter(N=>N).forEach(N=>S.append("index",N));let A=S.toString();y.search=A?`?${A}`:""}}return(!r||r===".")&&p.route.index&&(y.search=y.search?y.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(y.pathname=y.pathname==="/"?a:Fi([a,y.pathname])),ja(y)}function sw(r,o={}){let a=I.useContext(rm);mn(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:f}=fm("useViewTransitionState"),p=Ya(r,{relative:o.relative});if(!a.isTransitioning)return!1;let y=xs(a.currentLocation.pathname,f)||a.currentLocation.pathname,w=xs(a.nextLocation.pathname,f)||a.nextLocation.pathname;return wc(p.pathname,w)!=null||wc(p.pathname,y)!=null}new TextEncoder;function Ef(){const r="./assets",o="/sounds/new_elevator_combined.mp3";Pn();const a=I.useRef(new Audio(r+o)),[f,p]=I.useState(!1),[y,w]=I.useState(!1),[S,v]=I.useState(null),[E,A]=I.useState(!1),[N,R]=I.useState(!1);I.useEffect(()=>{const W=a.current,F=()=>{W.pause(),W.currentTime=0,w(!1),j()};return W.addEventListener("ended",F),()=>W.removeEventListener("ended",F)},[N]);function M(){v(null),a.current.load(),a.current.play().then(()=>{a.current.pause(),a.current.currentTime=0,p(!0),w(!0),A(!0),B()}).catch(W=>{console.error("Error loading audio:",W),v("Failed to load audio. Please check the file path and format."),A(!1)})}function L(){return!!(a.current&&!a.current.paused)}function B(){a.current.paused?a.current.play().catch(W=>{console.error("Error playing audio:",W),v("Failed to play audio. Please try again.")}):a.current.currentTime=0}function j(){a.current&&(a.current.pause(),a.current.currentTime=0,a.current.src="",a.current=null)}function U(W){a.current.currentTime=W,console.log(a.current.duration)}return{audioRef:a,error:S,playSound:B,loadSound:M,seekTo:U,cancelSound:j,checkSound:L,soundEnabled:E,setSoundEnabled:A,isPlaying:y}}var Un;(function(r){r[r.QR_CODE=0]="QR_CODE",r[r.AZTEC=1]="AZTEC",r[r.CODABAR=2]="CODABAR",r[r.CODE_39=3]="CODE_39",r[r.CODE_93=4]="CODE_93",r[r.CODE_128=5]="CODE_128",r[r.DATA_MATRIX=6]="DATA_MATRIX",r[r.MAXICODE=7]="MAXICODE",r[r.ITF=8]="ITF",r[r.EAN_13=9]="EAN_13",r[r.EAN_8=10]="EAN_8",r[r.PDF_417=11]="PDF_417",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Un||(Un={}));Un.QR_CODE,Un.AZTEC,Un.CODABAR,Un.CODE_39,Un.CODE_93,Un.CODE_128,Un.DATA_MATRIX,Un.MAXICODE,Un.ITF,Un.EAN_13,Un.EAN_8,Un.PDF_417,Un.RSS_14,Un.RSS_EXPANDED,Un.UPC_A,Un.UPC_E,Un.UPC_EAN_EXTENSION;var A1;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.URL=1]="URL"})(A1||(A1={}));var vc;(function(r){r[r.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",r[r.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(vc||(vc={}));var ow=function(){function r(){}return r.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",r.SCAN_DEFAULT_FPS=2,r.DEFAULT_DISABLE_FLIP=!1,r.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,r.DEFAULT_SUPPORTED_SCAN_TYPE=[vc.SCAN_TYPE_CAMERA,vc.SCAN_TYPE_FILE],r}(),T1;(function(r){r[r.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",r[r.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",r[r.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(T1||(T1={}));var Ra={exports:{}},aw=Ra.exports,I1;function lw(){return I1||(I1=1,function(r,o){(function(a,f){f(o)})(aw,function(a){function f(k){return k==null}var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,e){k.__proto__=e}||function(k,e){for(var n in e)e.hasOwnProperty(n)&&(k[n]=e[n])};function y(k,e){p(k,e);function n(){this.constructor=k}k.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function w(k,e){var n=Object.setPrototypeOf;n?n(k,e):k.__proto__=e}function S(k,e){e===void 0&&(e=k.constructor);var n=Error.captureStackTrace;n&&n(k,e)}var v=function(k){y(e,k);function e(n){var i=this.constructor,l=k.call(this,n)||this;return Object.defineProperty(l,"name",{value:i.name,enumerable:!1}),w(l,i.prototype),S(l),l}return e}(Error);class E extends v{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}E.kind="Exception";class A extends E{}A.kind="ArgumentException";class N extends E{}N.kind="IllegalArgumentException";class R{constructor(e){if(this.binarizer=e,e===null)throw new N("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,n){return this.binarizer.getBlackRow(e,n)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,n,i,l){const c=this.binarizer.getLuminanceSource().crop(e,n,i,l);return new R(this.binarizer.createBinarizer(c))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new R(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new R(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class M extends E{static getChecksumInstance(){return new M}}M.kind="ChecksumException";class L{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class B{static arraycopy(e,n,i,l,c){for(;c--;)i[l++]=e[n++]}static currentTimeMillis(){return Date.now()}}class j extends E{}j.kind="IndexOutOfBoundsException";class U extends j{constructor(e=void 0,n=void 0){super(n),this.index=e,this.message=n}}U.kind="ArrayIndexOutOfBoundsException";class W{static fill(e,n){for(let i=0,l=e.length;i<l;i++)e[i]=n}static fillWithin(e,n,i,l){W.rangeCheck(e.length,n,i);for(let c=n;c<i;c++)e[c]=l}static rangeCheck(e,n,i){if(n>i)throw new N("fromIndex("+n+") > toIndex("+i+")");if(n<0)throw new U(n);if(i>e)throw new U(i)}static asList(...e){return e}static create(e,n,i){return Array.from({length:e}).map(c=>Array.from({length:n}).fill(i))}static createInt32Array(e,n,i){return Array.from({length:e}).map(c=>Int32Array.from({length:n}).fill(i))}static equals(e,n){if(!e||!n||!e.length||!n.length||e.length!==n.length)return!1;for(let i=0,l=e.length;i<l;i++)if(e[i]!==n[i])return!1;return!0}static hashCode(e){if(e===null)return 0;let n=1;for(const i of e)n=31*n+i;return n}static fillUint8Array(e,n){for(let i=0;i!==e.length;i++)e[i]=n}static copyOf(e,n){return e.slice(0,n)}static copyOfUint8Array(e,n){if(e.length<=n){const i=new Uint8Array(n);return i.set(e),i}return e.slice(0,n)}static copyOfRange(e,n,i){const l=i-n,c=new Int32Array(l);return B.arraycopy(e,n,c,0,l),c}static binarySearch(e,n,i){i===void 0&&(i=W.numberComparator);let l=0,c=e.length-1;for(;l<=c;){const u=c+l>>1,h=i(n,e[u]);if(h>0)l=u+1;else if(h<0)c=u-1;else return u}return-l-1}static numberComparator(e,n){return e-n}}class F{static numberOfTrailingZeros(e){let n;if(e===0)return 32;let i=31;return n=e<<16,n!==0&&(i-=16,e=n),n=e<<8,n!==0&&(i-=8,e=n),n=e<<4,n!==0&&(i-=4,e=n),n=e<<2,n!==0&&(i-=2,e=n),i-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let n=1;return e>>>16||(n+=16,e<<=16),e>>>24||(n+=8,e<<=8),e>>>28||(n+=4,e<<=4),e>>>30||(n+=2,e<<=2),n-=e>>>31,n}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,n){return Math.trunc(e/n)}static parseInt(e,n=void 0){return parseInt(e,n)}}F.MIN_VALUE_32_BITS=-2147483648,F.MAX_VALUE=Number.MAX_SAFE_INTEGER;class q{constructor(e,n){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,n==null?this.bits=q.makeArray(e):this.bits=n)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const n=q.makeArray(e);B.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const n=this.size;if(e>=n)return n;const i=this.bits;let l=Math.floor(e/32),c=i[l];c&=~((1<<(e&31))-1);const u=i.length;for(;c===0;){if(++l===u)return n;c=i[l]}const h=l*32+F.numberOfTrailingZeros(c);return h>n?n:h}getNextUnset(e){const n=this.size;if(e>=n)return n;const i=this.bits;let l=Math.floor(e/32),c=~i[l];c&=~((1<<(e&31))-1);const u=i.length;for(;c===0;){if(++l===u)return n;c=~i[l]}const h=l*32+F.numberOfTrailingZeros(c);return h>n?n:h}setBulk(e,n){this.bits[Math.floor(e/32)]=n}setRange(e,n){if(n<e||e<0||n>this.size)throw new N;if(n===e)return;n--;const i=Math.floor(e/32),l=Math.floor(n/32),c=this.bits;for(let u=i;u<=l;u++){const h=u>i?0:e&31,C=(2<<(u<l?31:n&31))-(1<<h);c[u]|=C}}clear(){const e=this.bits.length,n=this.bits;for(let i=0;i<e;i++)n[i]=0}isRange(e,n,i){if(n<e||e<0||n>this.size)throw new N;if(n===e)return!0;n--;const l=Math.floor(e/32),c=Math.floor(n/32),u=this.bits;for(let h=l;h<=c;h++){const g=h>l?0:e&31,_=(2<<(h<c?31:n&31))-(1<<g)&4294967295;if((u[h]&_)!==(i?_:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,n){if(n<0||n>32)throw new N("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(let i=n;i>0;i--)this.appendBit((e>>i-1&1)===1)}appendBitArray(e){const n=e.size;this.ensureCapacity(this.size+n);for(let i=0;i<n;i++)this.appendBit(e.get(i))}xor(e){if(this.size!==e.size)throw new N("Sizes don't match");const n=this.bits;for(let i=0,l=n.length;i<l;i++)n[i]^=e.bits[i]}toBytes(e,n,i,l){for(let c=0;c<l;c++){let u=0;for(let h=0;h<8;h++)this.get(e)&&(u|=1<<7-h),e++;n[i+c]=u}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),i=n+1,l=this.bits;for(let c=0;c<i;c++){let u=l[c];u=u>>1&1431655765|(u&1431655765)<<1,u=u>>2&858993459|(u&858993459)<<2,u=u>>4&252645135|(u&252645135)<<4,u=u>>8&16711935|(u&16711935)<<8,u=u>>16&65535|(u&65535)<<16,e[n-c]=u}if(this.size!==i*32){const c=i*32-this.size;let u=e[0]>>>c;for(let h=1;h<i;h++){const g=e[h];u|=g<<32-c,e[h-1]=u,u=g>>>c}e[i-1]=u}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof q))return!1;const n=e;return this.size===n.size&&W.equals(this.bits,n.bits)}hashCode(){return 31*this.size+W.hashCode(this.bits)}toString(){let e="";for(let n=0,i=this.size;n<i;n++)n&7||(e+=" "),e+=this.get(n)?"X":".";return e}clone(){return new q(this.size,this.bits.slice())}}var ee;(function(k){k[k.OTHER=0]="OTHER",k[k.PURE_BARCODE=1]="PURE_BARCODE",k[k.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",k[k.TRY_HARDER=3]="TRY_HARDER",k[k.CHARACTER_SET=4]="CHARACTER_SET",k[k.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",k[k.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",k[k.ASSUME_GS1=7]="ASSUME_GS1",k[k.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",k[k.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",k[k.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(ee||(ee={}));var re=ee;class X extends E{static getFormatInstance(){return new X}}X.kind="FormatException";var le;(function(k){k[k.Cp437=0]="Cp437",k[k.ISO8859_1=1]="ISO8859_1",k[k.ISO8859_2=2]="ISO8859_2",k[k.ISO8859_3=3]="ISO8859_3",k[k.ISO8859_4=4]="ISO8859_4",k[k.ISO8859_5=5]="ISO8859_5",k[k.ISO8859_6=6]="ISO8859_6",k[k.ISO8859_7=7]="ISO8859_7",k[k.ISO8859_8=8]="ISO8859_8",k[k.ISO8859_9=9]="ISO8859_9",k[k.ISO8859_10=10]="ISO8859_10",k[k.ISO8859_11=11]="ISO8859_11",k[k.ISO8859_13=12]="ISO8859_13",k[k.ISO8859_14=13]="ISO8859_14",k[k.ISO8859_15=14]="ISO8859_15",k[k.ISO8859_16=15]="ISO8859_16",k[k.SJIS=16]="SJIS",k[k.Cp1250=17]="Cp1250",k[k.Cp1251=18]="Cp1251",k[k.Cp1252=19]="Cp1252",k[k.Cp1256=20]="Cp1256",k[k.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",k[k.UTF8=22]="UTF8",k[k.ASCII=23]="ASCII",k[k.Big5=24]="Big5",k[k.GB18030=25]="GB18030",k[k.EUC_KR=26]="EUC_KR"})(le||(le={}));class te{constructor(e,n,i,...l){this.valueIdentifier=e,this.name=i,typeof n=="number"?this.values=Int32Array.from([n]):this.values=n,this.otherEncodingNames=l,te.VALUE_IDENTIFIER_TO_ECI.set(e,this),te.NAME_TO_ECI.set(i,this);const c=this.values;for(let u=0,h=c.length;u!==h;u++){const g=c[u];te.VALUES_TO_ECI.set(g,this)}for(const u of l)te.NAME_TO_ECI.set(u,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new X("incorect value");const n=te.VALUES_TO_ECI.get(e);if(n===void 0)throw new X("incorect value");return n}static getCharacterSetECIByName(e){const n=te.NAME_TO_ECI.get(e);if(n===void 0)throw new X("incorect value");return n}equals(e){if(!(e instanceof te))return!1;const n=e;return this.getName()===n.getName()}}te.VALUE_IDENTIFIER_TO_ECI=new Map,te.VALUES_TO_ECI=new Map,te.NAME_TO_ECI=new Map,te.Cp437=new te(le.Cp437,Int32Array.from([0,2]),"Cp437"),te.ISO8859_1=new te(le.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),te.ISO8859_2=new te(le.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),te.ISO8859_3=new te(le.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),te.ISO8859_4=new te(le.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),te.ISO8859_5=new te(le.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),te.ISO8859_6=new te(le.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),te.ISO8859_7=new te(le.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),te.ISO8859_8=new te(le.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),te.ISO8859_9=new te(le.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),te.ISO8859_10=new te(le.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),te.ISO8859_11=new te(le.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),te.ISO8859_13=new te(le.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),te.ISO8859_14=new te(le.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),te.ISO8859_15=new te(le.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),te.ISO8859_16=new te(le.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),te.SJIS=new te(le.SJIS,20,"SJIS","Shift_JIS"),te.Cp1250=new te(le.Cp1250,21,"Cp1250","windows-1250"),te.Cp1251=new te(le.Cp1251,22,"Cp1251","windows-1251"),te.Cp1252=new te(le.Cp1252,23,"Cp1252","windows-1252"),te.Cp1256=new te(le.Cp1256,24,"Cp1256","windows-1256"),te.UnicodeBigUnmarked=new te(le.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),te.UTF8=new te(le.UTF8,26,"UTF8","UTF-8"),te.ASCII=new te(le.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),te.Big5=new te(le.Big5,28,"Big5"),te.GB18030=new te(le.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),te.EUC_KR=new te(le.EUC_KR,30,"EUC_KR","EUC-KR");class ke extends E{}ke.kind="UnsupportedOperationException";class Le{static decode(e,n){const i=this.encodingName(n);return this.customDecoder?this.customDecoder(e,i):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(i)?this.decodeFallback(e,i):new TextDecoder(i).decode(e)}static shouldDecodeOnFallback(e){return!Le.isBrowser()&&e==="ISO-8859-1"}static encode(e,n){const i=this.encodingName(n);return this.customEncoder?this.customEncoder(e,i):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof te?e:te.getCharacterSetECIByName(e)}static decodeFallback(e,n){const i=this.encodingCharacterSet(n);if(Le.isDecodeFallbackSupported(i)){let l="";for(let c=0,u=e.length;c<u;c++){let h=e[c].toString(16);h.length<2&&(h="0"+h),l+="%"+h}return decodeURIComponent(l)}if(i.equals(te.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new ke(`Encoding ${this.encodingName(n)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(te.UTF8)||e.equals(te.ISO8859_1)||e.equals(te.ASCII)}static encodeFallback(e){const i=btoa(unescape(encodeURIComponent(e))).split(""),l=[];for(let c=0;c<i.length;c++)l.push(i[c].charCodeAt(0));return new Uint8Array(l)}}class Se{static castAsNonUtf8Char(e,n=null){const i=n?n.getName():this.ISO88591;return Le.decode(new Uint8Array([e]),i)}static guessEncoding(e,n){if(n!=null&&n.get(re.CHARACTER_SET)!==void 0)return n.get(re.CHARACTER_SET).toString();const i=e.length;let l=!0,c=!0,u=!0,h=0,g=0,C=0,_=0,P=0,D=0,z=0,Y=0,$=0,ne=0,ue=0;const Oe=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let Me=0;Me<i&&(l||c||u);Me++){const Ie=e[Me]&255;u&&(h>0?Ie&128?h--:u=!1:Ie&128&&(Ie&64?(h++,Ie&32?(h++,Ie&16?(h++,Ie&8?u=!1:_++):C++):g++):u=!1)),l&&(Ie>127&&Ie<160?l=!1:Ie>159&&(Ie<192||Ie===215||Ie===247)&&ue++),c&&(P>0?Ie<64||Ie===127||Ie>252?c=!1:P--:Ie===128||Ie===160||Ie>239?c=!1:Ie>160&&Ie<224?(D++,Y=0,z++,z>$&&($=z)):Ie>127?(P++,z=0,Y++,Y>ne&&(ne=Y)):(z=0,Y=0))}return u&&h>0&&(u=!1),c&&P>0&&(c=!1),u&&(Oe||g+C+_>0)?Se.UTF8:c&&(Se.ASSUME_SHIFT_JIS||$>=3||ne>=3)?Se.SHIFT_JIS:l&&c?$===2&&D===2||ue*10>=i?Se.SHIFT_JIS:Se.ISO88591:l?Se.ISO88591:c?Se.SHIFT_JIS:u?Se.UTF8:Se.PLATFORM_DEFAULT_ENCODING}static format(e,...n){let i=-1;function l(u,h,g,C,_,P){if(u==="%%")return"%";if(n[++i]===void 0)return;u=C?parseInt(C.substr(1)):void 0;let D=_?parseInt(_.substr(1)):void 0,z;switch(P){case"s":z=n[i];break;case"c":z=n[i][0];break;case"f":z=parseFloat(n[i]).toFixed(u);break;case"p":z=parseFloat(n[i]).toPrecision(u);break;case"e":z=parseFloat(n[i]).toExponential(u);break;case"x":z=parseInt(n[i]).toString(D||16);break;case"d":z=parseFloat(parseInt(n[i],D||10).toPrecision(u)).toFixed(0);break}z=typeof z=="object"?JSON.stringify(z):(+z).toString(D);let Y=parseInt(g),$=g&&g[0]+""=="0"?"0":" ";for(;z.length<Y;)z=h!==void 0?z+$:$+z;return z}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(c,l)}static getBytes(e,n){return Le.encode(e,n)}static getCharCode(e,n=0){return e.charCodeAt(n)}static getCharAt(e){return String.fromCharCode(e)}}Se.SHIFT_JIS=te.SJIS.getName(),Se.GB2312="GB2312",Se.ISO88591=te.ISO8859_1.getName(),Se.EUC_JP="EUC_JP",Se.UTF8=te.UTF8.getName(),Se.PLATFORM_DEFAULT_ENCODING=Se.UTF8,Se.ASSUME_SHIFT_JIS=!1;class Ne{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Se.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,n,i){for(let l=n;n<n+i;l++)this.append(e[l]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+1)}substring(e,n){return this.value.substring(e,n)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+n.length)}}class Ee{constructor(e,n,i,l){if(this.width=e,this.height=n,this.rowSize=i,this.bits=l,n==null&&(n=e),this.height=n,e<1||n<1)throw new N("Both dimensions must be greater than 0");i==null&&(i=Math.floor((e+31)/32)),this.rowSize=i,l==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const n=e.length,i=e[0].length,l=new Ee(i,n);for(let c=0;c<n;c++){const u=e[c];for(let h=0;h<i;h++)u[h]&&l.set(h,c)}return l}static parseFromString(e,n,i){if(e===null)throw new N("stringRepresentation cannot be null");const l=new Array(e.length);let c=0,u=0,h=-1,g=0,C=0;for(;C<e.length;)if(e.charAt(C)===`
`||e.charAt(C)==="\r"){if(c>u){if(h===-1)h=c-u;else if(c-u!==h)throw new N("row lengths do not match");u=c,g++}C++}else if(e.substring(C,C+n.length)===n)C+=n.length,l[c]=!0,c++;else if(e.substring(C,C+i.length)===i)C+=i.length,l[c]=!1,c++;else throw new N("illegal character encountered: "+e.substring(C));if(c>u){if(h===-1)h=c-u;else if(c-u!==h)throw new N("row lengths do not match");g++}const _=new Ee(h,g);for(let P=0;P<c;P++)l[P]&&_.set(Math.floor(P%h),Math.floor(P/h));return _}get(e,n){const i=n*this.rowSize+Math.floor(e/32);return(this.bits[i]>>>(e&31)&1)!==0}set(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]|=1<<(e&31)&4294967295}unset(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]&=~(1<<(e&31)&4294967295)}flip(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new N("input matrix dimensions do not match");const n=new q(Math.floor(this.width/32)+1),i=this.rowSize,l=this.bits;for(let c=0,u=this.height;c<u;c++){const h=c*i,g=e.getRow(c,n).getBitArray();for(let C=0;C<i;C++)l[h+C]^=g[C]}}clear(){const e=this.bits,n=e.length;for(let i=0;i<n;i++)e[i]=0}setRegion(e,n,i,l){if(n<0||e<0)throw new N("Left and top must be nonnegative");if(l<1||i<1)throw new N("Height and width must be at least 1");const c=e+i,u=n+l;if(u>this.height||c>this.width)throw new N("The region must fit inside the matrix");const h=this.rowSize,g=this.bits;for(let C=n;C<u;C++){const _=C*h;for(let P=e;P<c;P++)g[_+Math.floor(P/32)]|=1<<(P&31)&4294967295}}getRow(e,n){n==null||n.getSize()<this.width?n=new q(this.width):n.clear();const i=this.rowSize,l=this.bits,c=e*i;for(let u=0;u<i;u++)n.setBulk(u*32,l[c+u]);return n}setRow(e,n){B.arraycopy(n.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),n=this.getHeight();let i=new q(e),l=new q(e);for(let c=0,u=Math.floor((n+1)/2);c<u;c++)i=this.getRow(c,i),l=this.getRow(n-1-c,l),i.reverse(),l.reverse(),this.setRow(c,l),this.setRow(n-1-c,i)}getEnclosingRectangle(){const e=this.width,n=this.height,i=this.rowSize,l=this.bits;let c=e,u=n,h=-1,g=-1;for(let C=0;C<n;C++)for(let _=0;_<i;_++){const P=l[C*i+_];if(P!==0){if(C<u&&(u=C),C>g&&(g=C),_*32<c){let D=0;for(;!(P<<31-D&4294967295);)D++;_*32+D<c&&(c=_*32+D)}if(_*32+31>h){let D=31;for(;!(P>>>D);)D--;_*32+D>h&&(h=_*32+D)}}}return h<c||g<u?null:Int32Array.from([c,u,h-c+1,g-u+1])}getTopLeftOnBit(){const e=this.rowSize,n=this.bits;let i=0;for(;i<n.length&&n[i]===0;)i++;if(i===n.length)return null;const l=i/e;let c=i%e*32;const u=n[i];let h=0;for(;!(u<<31-h&4294967295);)h++;return c+=h,Int32Array.from([c,l])}getBottomRightOnBit(){const e=this.rowSize,n=this.bits;let i=n.length-1;for(;i>=0&&n[i]===0;)i--;if(i<0)return null;const l=Math.floor(i/e);let c=Math.floor(i%e)*32;const u=n[i];let h=31;for(;!(u>>>h);)h--;return c+=h,Int32Array.from([c,l])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof Ee))return!1;const n=e;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&W.equals(this.bits,n.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+W.hashCode(this.bits),e}toString(e="X ",n="  ",i=`
`){return this.buildToString(e,n,i)}buildToString(e,n,i){let l=new Ne;for(let c=0,u=this.height;c<u;c++){for(let h=0,g=this.width;h<g;h++)l.append(this.get(h,c)?e:n);l.append(i)}return l.toString()}clone(){return new Ee(this.width,this.height,this.rowSize,this.bits.slice())}}class J extends E{static getNotFoundInstance(){return new J}}J.kind="NotFoundException";class Ve extends L{constructor(e){super(e),this.luminances=Ve.EMPTY,this.buckets=new Int32Array(Ve.LUMINANCE_BUCKETS)}getBlackRow(e,n){const i=this.getLuminanceSource(),l=i.getWidth();n==null||n.getSize()<l?n=new q(l):n.clear(),this.initArrays(l);const c=i.getRow(e,this.luminances),u=this.buckets;for(let g=0;g<l;g++)u[(c[g]&255)>>Ve.LUMINANCE_SHIFT]++;const h=Ve.estimateBlackPoint(u);if(l<3)for(let g=0;g<l;g++)(c[g]&255)<h&&n.set(g);else{let g=c[0]&255,C=c[1]&255;for(let _=1;_<l-1;_++){const P=c[_+1]&255;(C*4-g-P)/2<h&&n.set(_),g=C,C=P}}return n}getBlackMatrix(){const e=this.getLuminanceSource(),n=e.getWidth(),i=e.getHeight(),l=new Ee(n,i);this.initArrays(n);const c=this.buckets;for(let g=1;g<5;g++){const C=Math.floor(i*g/5),_=e.getRow(C,this.luminances),P=Math.floor(n*4/5);for(let D=Math.floor(n/5);D<P;D++){const z=_[D]&255;c[z>>Ve.LUMINANCE_SHIFT]++}}const u=Ve.estimateBlackPoint(c),h=e.getMatrix();for(let g=0;g<i;g++){const C=g*n;for(let _=0;_<n;_++)(h[C+_]&255)<u&&l.set(_,g)}return l}createBinarizer(e){return new Ve(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const n=this.buckets;for(let i=0;i<Ve.LUMINANCE_BUCKETS;i++)n[i]=0}static estimateBlackPoint(e){const n=e.length;let i=0,l=0,c=0;for(let _=0;_<n;_++)e[_]>c&&(l=_,c=e[_]),e[_]>i&&(i=e[_]);let u=0,h=0;for(let _=0;_<n;_++){const P=_-l,D=e[_]*P*P;D>h&&(u=_,h=D)}if(l>u){const _=l;l=u,u=_}if(u-l<=n/16)throw new J;let g=u-1,C=-1;for(let _=u-1;_>l;_--){const P=_-l,D=P*P*(u-_)*(i-e[_]);D>C&&(g=_,C=D)}return g<<Ve.LUMINANCE_SHIFT}}Ve.LUMINANCE_BITS=5,Ve.LUMINANCE_SHIFT=8-Ve.LUMINANCE_BITS,Ve.LUMINANCE_BUCKETS=1<<Ve.LUMINANCE_BITS,Ve.EMPTY=Uint8ClampedArray.from([0]);class ye extends Ve{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),n=e.getWidth(),i=e.getHeight();if(n>=ye.MINIMUM_DIMENSION&&i>=ye.MINIMUM_DIMENSION){const l=e.getMatrix();let c=n>>ye.BLOCK_SIZE_POWER;n&ye.BLOCK_SIZE_MASK&&c++;let u=i>>ye.BLOCK_SIZE_POWER;i&ye.BLOCK_SIZE_MASK&&u++;const h=ye.calculateBlackPoints(l,c,u,n,i),g=new Ee(n,i);ye.calculateThresholdForBlock(l,c,u,n,i,h,g),this.matrix=g}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new ye(e)}static calculateThresholdForBlock(e,n,i,l,c,u,h){const g=c-ye.BLOCK_SIZE,C=l-ye.BLOCK_SIZE;for(let _=0;_<i;_++){let P=_<<ye.BLOCK_SIZE_POWER;P>g&&(P=g);const D=ye.cap(_,2,i-3);for(let z=0;z<n;z++){let Y=z<<ye.BLOCK_SIZE_POWER;Y>C&&(Y=C);const $=ye.cap(z,2,n-3);let ne=0;for(let Oe=-2;Oe<=2;Oe++){const Me=u[D+Oe];ne+=Me[$-2]+Me[$-1]+Me[$]+Me[$+1]+Me[$+2]}const ue=ne/25;ye.thresholdBlock(e,Y,P,ue,l,h)}}}static cap(e,n,i){return e<n?n:e>i?i:e}static thresholdBlock(e,n,i,l,c,u){for(let h=0,g=i*c+n;h<ye.BLOCK_SIZE;h++,g+=c)for(let C=0;C<ye.BLOCK_SIZE;C++)(e[g+C]&255)<=l&&u.set(n+C,i+h)}static calculateBlackPoints(e,n,i,l,c){const u=c-ye.BLOCK_SIZE,h=l-ye.BLOCK_SIZE,g=new Array(i);for(let C=0;C<i;C++){g[C]=new Int32Array(n);let _=C<<ye.BLOCK_SIZE_POWER;_>u&&(_=u);for(let P=0;P<n;P++){let D=P<<ye.BLOCK_SIZE_POWER;D>h&&(D=h);let z=0,Y=255,$=0;for(let ue=0,Oe=_*l+D;ue<ye.BLOCK_SIZE;ue++,Oe+=l){for(let Me=0;Me<ye.BLOCK_SIZE;Me++){const Ie=e[Oe+Me]&255;z+=Ie,Ie<Y&&(Y=Ie),Ie>$&&($=Ie)}if($-Y>ye.MIN_DYNAMIC_RANGE)for(ue++,Oe+=l;ue<ye.BLOCK_SIZE;ue++,Oe+=l)for(let Me=0;Me<ye.BLOCK_SIZE;Me++)z+=e[Oe+Me]&255}let ne=z>>ye.BLOCK_SIZE_POWER*2;if($-Y<=ye.MIN_DYNAMIC_RANGE&&(ne=Y/2,C>0&&P>0)){const ue=(g[C-1][P]+2*g[C][P-1]+g[C-1][P-1])/4;Y<ue&&(ne=ue)}g[C][P]=ne}}return g}}ye.BLOCK_SIZE_POWER=3,ye.BLOCK_SIZE=1<<ye.BLOCK_SIZE_POWER,ye.BLOCK_SIZE_MASK=ye.BLOCK_SIZE-1,ye.MINIMUM_DIMENSION=ye.BLOCK_SIZE*5,ye.MIN_DYNAMIC_RANGE=24;class he{constructor(e,n){this.width=e,this.height=n}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,n,i,l){throw new ke("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ke("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ke("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let n=new Ne;for(let i=0;i<this.height;i++){const l=this.getRow(i,e);for(let c=0;c<this.width;c++){const u=l[c]&255;let h;u<64?h="#":u<128?h="+":u<192?h=".":h=" ",n.append(h)}n.append(`
`)}return n.toString()}}class De extends he{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,n){const i=this.delegate.getRow(e,n),l=this.getWidth();for(let c=0;c<l;c++)i[c]=255-(i[c]&255);return i}getMatrix(){const e=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n);for(let l=0;l<n;l++)i[l]=255-(e[l]&255);return i}isCropSupported(){return this.delegate.isCropSupported()}crop(e,n,i,l){return new De(this.delegate.crop(e,n,i,l))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new De(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new De(this.delegate.rotateCounterClockwise45())}}class ce extends he{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=ce.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const n=e.getContext("2d").getImageData(0,0,e.width,e.height);return ce.toGrayscaleBuffer(n.data,e.width,e.height)}static toGrayscaleBuffer(e,n,i){const l=new Uint8ClampedArray(n*i);for(let c=0,u=0,h=e.length;c<h;c+=4,u++){let g;if(e[c+3]===0)g=255;else{const _=e[c],P=e[c+1],D=e[c+2];g=306*_+601*P+117*D+512>>10}l[u]=g}return l}getRow(e,n){if(e<0||e>=this.getHeight())throw new N("Requested row is outside the image: "+e);const i=this.getWidth(),l=e*i;return n===null?n=this.buffer.slice(l,l+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(l,l+i))),n}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,n,i,l){return super.crop(e,n,i,l),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const n=this.getTempCanvasElement(),i=n.getContext("2d"),l=e*ce.DEGREE_TO_RADIANS,c=this.canvas.width,u=this.canvas.height,h=Math.ceil(Math.abs(Math.cos(l))*c+Math.abs(Math.sin(l))*u),g=Math.ceil(Math.abs(Math.sin(l))*c+Math.abs(Math.cos(l))*u);return n.width=h,n.height=g,i.translate(h/2,g/2),i.rotate(l),i.drawImage(this.canvas,c/-2,u/-2),this.buffer=ce.makeBufferFromCanvasImageData(n),this}invert(){return new De(this)}}ce.DEGREE_TO_RADIANS=Math.PI/180;class Z{constructor(e,n,i){this.deviceId=e,this.label=n,this.kind="videoinput",this.groupId=i||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var G=(globalThis||ec||self||window||void 0)&&(globalThis||ec||self||window||void 0).__awaiter||function(k,e,n,i){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(_){try{C(i.next(_))}catch(P){u(P)}}function g(_){try{C(i.throw(_))}catch(P){u(P)}}function C(_){_.done?c(_.value):l(_.value).then(h,g)}C((i=i.apply(k,e||[])).next())})};class we{constructor(e,n=500,i){this.reader=e,this.timeBetweenScansMillis=n,this._hints=i,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return G(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),n=[];for(const i of e){const l=i.kind==="video"?"videoinput":i.kind;if(l!=="videoinput")continue;const c=i.deviceId||i.id,u=i.label||`Video device ${n.length+1}`,h=i.groupId,g={deviceId:c,label:u,kind:l,groupId:h};n.push(g)}return n})}getVideoInputDevices(){return G(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(n=>new Z(n.deviceId,n.label))})}findDeviceById(e){return G(this,void 0,void 0,function*(){const n=yield this.listVideoInputDevices();return n?n.find(i=>i.deviceId===e):null})}decodeFromInputVideoDevice(e,n){return G(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,n)})}decodeOnceFromVideoDevice(e,n){return G(this,void 0,void 0,function*(){this.reset();let i;e?i={deviceId:{exact:e}}:i={facingMode:"environment"};const l={video:i};return yield this.decodeOnceFromConstraints(l,n)})}decodeOnceFromConstraints(e,n){return G(this,void 0,void 0,function*(){const i=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(i,n)})}decodeOnceFromStream(e,n){return G(this,void 0,void 0,function*(){this.reset();const i=yield this.attachStreamToVideo(e,n);return yield this.decodeOnce(i)})}decodeFromInputVideoDeviceContinuously(e,n,i){return G(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,n,i)})}decodeFromVideoDevice(e,n,i){return G(this,void 0,void 0,function*(){let l;e?l={deviceId:{exact:e}}:l={facingMode:"environment"};const c={video:l};return yield this.decodeFromConstraints(c,n,i)})}decodeFromConstraints(e,n,i){return G(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(l,n,i)})}decodeFromStream(e,n,i){return G(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(e,n);return yield this.decodeContinuously(l,i)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,n){return G(this,void 0,void 0,function*(){const i=this.prepareVideoElement(n);return this.addVideoSource(i,e),this.videoElement=i,this.stream=e,yield this.playVideoOnLoadAsync(i),i})}playVideoOnLoadAsync(e){return new Promise((n,i)=>this.playVideoOnLoad(e,()=>n()))}playVideoOnLoad(e,n){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",n),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return G(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,n){const i=document.getElementById(e);if(!i)throw new A(`element with id '${e}' not found`);if(i.nodeName.toLowerCase()!==n.toLowerCase())throw new A(`element with id '${e}' must be an ${n} element`);return i}decodeFromImage(e,n){if(!e&&!n)throw new A("either imageElement with a src set or an url must be provided");return n&&!e?this.decodeFromImageUrl(n):this.decodeFromImageElement(e)}decodeFromVideo(e,n){if(!e&&!n)throw new A("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,n,i){if(e===void 0&&n===void 0)throw new A("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrlContinuously(n,i):this.decodeFromVideoElementContinuously(e,i)}decodeFromImageElement(e){if(!e)throw new A("An image element must be provided.");this.reset();const n=this.prepareImageElement(e);this.imageElement=n;let i;return this.isImageLoaded(n)?i=this.decodeOnce(n,!1,!0):i=this._decodeOnLoadImage(n),i}decodeFromVideoElement(e){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(n)}decodeFromVideoElementContinuously(e,n){const i=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(i,n)}_decodeFromVideoElementSetup(e){if(!e)throw new A("A video element must be provided.");this.reset();const n=this.prepareVideoElement(e);return this.videoElement=n,n}decodeFromImageUrl(e){if(!e)throw new A("An URL must be provided.");this.reset();const n=this.prepareImageElement();this.imageElement=n;const i=this._decodeOnLoadImage(n);return n.src=e,i}decodeFromVideoUrl(e){if(!e)throw new A("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),i=this.decodeFromVideoElement(n);return n.src=e,i}decodeFromVideoUrlContinuously(e,n){if(!e)throw new A("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),l=this.decodeFromVideoElementContinuously(i,n);return i.src=e,l}_decodeOnLoadImage(e){return new Promise((n,i)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(n,i),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return G(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,n){return G(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,n)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let n;return typeof e>"u"&&(n=document.createElement("img"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(n=e),n}prepareVideoElement(e){let n;return!e&&typeof document<"u"&&(n=document.createElement("video"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(n=e),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n}decodeOnce(e,n=!0,i=!0){this._stopAsyncDecode=!1;const l=(c,u)=>{if(this._stopAsyncDecode){u(new J("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const h=this.decode(e);c(h)}catch(h){const g=n&&h instanceof J,_=(h instanceof M||h instanceof X)&&i;if(g||_)return setTimeout(l,this._timeBetweenDecodingAttempts,c,u);u(h)}};return new Promise((c,u)=>l(c,u))}decodeContinuously(e,n){this._stopContinuousDecode=!1;const i=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const l=this.decode(e);n(l,null),setTimeout(i,this.timeBetweenScansMillis)}catch(l){n(null,l);const c=l instanceof M||l instanceof X,u=l instanceof J;(c||u)&&setTimeout(i,this._timeBetweenDecodingAttempts)}};i()}decode(e){const n=this.createBinaryBitmap(e);return this.decodeBitmap(n)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,n,i){n||(n={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),i||(i=this.captureCanvasContext),i.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}drawImageOnCanvas(e,n,i=this.captureCanvasContext){n||(n={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),i||(i=this.captureCanvasContext),i.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const n=this.getCaptureCanvas(e),i=new ce(n),l=new ye(i);return new R(l)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const i=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=i}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const n=this.createCaptureCanvas(e);this.captureCanvas=n}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const n=document.createElement("canvas");let i,l;return typeof e<"u"&&(e instanceof HTMLVideoElement?(i=e.videoWidth,l=e.videoHeight):e instanceof HTMLImageElement&&(i=e.naturalWidth||e.width,l=e.naturalHeight||e.height)),n.style.width=i+"px",n.style.height=l+"px",n.width=i,n.height=l,n}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,n){try{e.srcObject=n}catch{e.src=URL.createObjectURL(n)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class be{constructor(e,n,i=n==null?0:8*n.length,l,c,u=B.currentTimeMillis()){this.text=e,this.rawBytes=n,this.numBits=i,this.resultPoints=l,this.format=c,this.timestamp=u,this.text=e,this.rawBytes=n,i==null?this.numBits=n==null?0:8*n.length:this.numBits=i,this.resultPoints=l,this.format=c,this.resultMetadata=null,u==null?this.timestamp=B.currentTimeMillis():this.timestamp=u}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,n){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,n)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const n=this.resultPoints;if(n===null)this.resultPoints=e;else if(e!==null&&e.length>0){const i=new Array(n.length+e.length);B.arraycopy(n,0,i,0,n.length),B.arraycopy(e,0,i,n.length,e.length),this.resultPoints=i}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ge;(function(k){k[k.AZTEC=0]="AZTEC",k[k.CODABAR=1]="CODABAR",k[k.CODE_39=2]="CODE_39",k[k.CODE_93=3]="CODE_93",k[k.CODE_128=4]="CODE_128",k[k.DATA_MATRIX=5]="DATA_MATRIX",k[k.EAN_8=6]="EAN_8",k[k.EAN_13=7]="EAN_13",k[k.ITF=8]="ITF",k[k.MAXICODE=9]="MAXICODE",k[k.PDF_417=10]="PDF_417",k[k.QR_CODE=11]="QR_CODE",k[k.RSS_14=12]="RSS_14",k[k.RSS_EXPANDED=13]="RSS_EXPANDED",k[k.UPC_A=14]="UPC_A",k[k.UPC_E=15]="UPC_E",k[k.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ge||(ge={}));var ie=ge,ze;(function(k){k[k.OTHER=0]="OTHER",k[k.ORIENTATION=1]="ORIENTATION",k[k.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",k[k.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",k[k.ISSUE_NUMBER=4]="ISSUE_NUMBER",k[k.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",k[k.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",k[k.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",k[k.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",k[k.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",k[k.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ze||(ze={}));var ve=ze;class Be{constructor(e,n,i,l,c=-1,u=-1){this.rawBytes=e,this.text=n,this.byteSegments=i,this.ecLevel=l,this.structuredAppendSequenceNumber=c,this.structuredAppendParity=u,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class nt{exp(e){return this.expTable[e]}log(e){if(e===0)throw new N;return this.logTable[e]}static addOrSubtract(e,n){return e^n}}class Ae{constructor(e,n){if(n.length===0)throw new N;this.field=e;const i=n.length;if(i>1&&n[0]===0){let l=1;for(;l<i&&n[l]===0;)l++;l===i?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(i-l),B.arraycopy(n,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const n=this.coefficients;let i;if(e===1){i=0;for(let u=0,h=n.length;u!==h;u++){const g=n[u];i=nt.addOrSubtract(i,g)}return i}i=n[0];const l=n.length,c=this.field;for(let u=1;u<l;u++)i=nt.addOrSubtract(c.multiply(e,i),n[u]);return i}addOrSubtract(e){if(!this.field.equals(e.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,i=e.coefficients;if(n.length>i.length){const u=n;n=i,i=u}let l=new Int32Array(i.length);const c=i.length-n.length;B.arraycopy(i,0,l,0,c);for(let u=c;u<i.length;u++)l[u]=nt.addOrSubtract(n[u-c],i[u]);return new Ae(this.field,l)}multiply(e){if(!this.field.equals(e.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const n=this.coefficients,i=n.length,l=e.coefficients,c=l.length,u=new Int32Array(i+c-1),h=this.field;for(let g=0;g<i;g++){const C=n[g];for(let _=0;_<c;_++)u[g+_]=nt.addOrSubtract(u[g+_],h.multiply(C,l[_]))}return new Ae(h,u)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const n=this.coefficients.length,i=this.field,l=new Int32Array(n),c=this.coefficients;for(let u=0;u<n;u++)l[u]=i.multiply(c[u],e);return new Ae(i,l)}multiplyByMonomial(e,n){if(e<0)throw new N;if(n===0)return this.field.getZero();const i=this.coefficients,l=i.length,c=new Int32Array(l+e),u=this.field;for(let h=0;h<l;h++)c[h]=u.multiply(i[h],n);return new Ae(u,c)}divide(e){if(!this.field.equals(e.field))throw new N("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new N("Divide by 0");const n=this.field;let i=n.getZero(),l=this;const c=e.getCoefficient(e.getDegree()),u=n.inverse(c);for(;l.getDegree()>=e.getDegree()&&!l.isZero();){const h=l.getDegree()-e.getDegree(),g=n.multiply(l.getCoefficient(l.getDegree()),u),C=e.multiplyByMonomial(h,g),_=n.buildMonomial(h,g);i=i.addOrSubtract(_),l=l.addOrSubtract(C)}return[i,l]}toString(){let e="";for(let n=this.getDegree();n>=0;n--){let i=this.getCoefficient(n);if(i!==0){if(i<0?(e+=" - ",i=-i):e.length>0&&(e+=" + "),n===0||i!==1){const l=this.field.log(i);l===0?e+="1":l===1?e+="a":(e+="a^",e+=l)}n!==0&&(n===1?e+="x":(e+="x^",e+=n))}}return e}}class pe extends E{}pe.kind="ArithmeticException";class xe extends nt{constructor(e,n,i){super(),this.primitive=e,this.size=n,this.generatorBase=i;const l=new Int32Array(n);let c=1;for(let h=0;h<n;h++)l[h]=c,c*=2,c>=n&&(c^=e,c&=n-1);this.expTable=l;const u=new Int32Array(n);for(let h=0;h<n-1;h++)u[l[h]]=h;this.logTable=u,this.zero=new Ae(this,Int32Array.from([0])),this.one=new Ae(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new N;if(n===0)return this.zero;const i=new Int32Array(e+1);return i[0]=n,new Ae(this,i)}inverse(e){if(e===0)throw new pe;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+F.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}xe.AZTEC_DATA_12=new xe(4201,4096,1),xe.AZTEC_DATA_10=new xe(1033,1024,1),xe.AZTEC_DATA_6=new xe(67,64,1),xe.AZTEC_PARAM=new xe(19,16,1),xe.QR_CODE_FIELD_256=new xe(285,256,0),xe.DATA_MATRIX_FIELD_256=new xe(301,256,1),xe.AZTEC_DATA_8=xe.DATA_MATRIX_FIELD_256,xe.MAXICODE_FIELD_64=xe.AZTEC_DATA_6;class He extends E{}He.kind="ReedSolomonException";class Ze extends E{}Ze.kind="IllegalStateException";class Rt{constructor(e){this.field=e}decode(e,n){const i=this.field,l=new Ae(i,e),c=new Int32Array(n);let u=!0;for(let z=0;z<n;z++){const Y=l.evaluateAt(i.exp(z+i.getGeneratorBase()));c[c.length-1-z]=Y,Y!==0&&(u=!1)}if(u)return;const h=new Ae(i,c),g=this.runEuclideanAlgorithm(i.buildMonomial(n,1),h,n),C=g[0],_=g[1],P=this.findErrorLocations(C),D=this.findErrorMagnitudes(_,P);for(let z=0;z<P.length;z++){const Y=e.length-1-i.log(P[z]);if(Y<0)throw new He("Bad error location");e[Y]=xe.addOrSubtract(e[Y],D[z])}}runEuclideanAlgorithm(e,n,i){if(e.getDegree()<n.getDegree()){const z=e;e=n,n=z}const l=this.field;let c=e,u=n,h=l.getZero(),g=l.getOne();for(;u.getDegree()>=(i/2|0);){let z=c,Y=h;if(c=u,h=g,c.isZero())throw new He("r_{i-1} was zero");u=z;let $=l.getZero();const ne=c.getCoefficient(c.getDegree()),ue=l.inverse(ne);for(;u.getDegree()>=c.getDegree()&&!u.isZero();){const Oe=u.getDegree()-c.getDegree(),Me=l.multiply(u.getCoefficient(u.getDegree()),ue);$=$.addOrSubtract(l.buildMonomial(Oe,Me)),u=u.addOrSubtract(c.multiplyByMonomial(Oe,Me))}if(g=$.multiply(h).addOrSubtract(Y),u.getDegree()>=c.getDegree())throw new Ze("Division algorithm failed to reduce polynomial?")}const C=g.getCoefficient(0);if(C===0)throw new He("sigmaTilde(0) was zero");const _=l.inverse(C),P=g.multiplyScalar(_),D=u.multiplyScalar(_);return[P,D]}findErrorLocations(e){const n=e.getDegree();if(n===1)return Int32Array.from([e.getCoefficient(1)]);const i=new Int32Array(n);let l=0;const c=this.field;for(let u=1;u<c.getSize()&&l<n;u++)e.evaluateAt(u)===0&&(i[l]=c.inverse(u),l++);if(l!==n)throw new He("Error locator degree does not match number of roots");return i}findErrorMagnitudes(e,n){const i=n.length,l=new Int32Array(i),c=this.field;for(let u=0;u<i;u++){const h=c.inverse(n[u]);let g=1;for(let C=0;C<i;C++)if(u!==C){const _=c.multiply(n[C],h),P=_&1?_&-2:_|1;g=c.multiply(g,P)}l[u]=c.multiply(e.evaluateAt(h),c.inverse(g)),c.getGeneratorBase()!==0&&(l[u]=c.multiply(l[u],h))}return l}}var wt;(function(k){k[k.UPPER=0]="UPPER",k[k.LOWER=1]="LOWER",k[k.MIXED=2]="MIXED",k[k.DIGIT=3]="DIGIT",k[k.PUNCT=4]="PUNCT",k[k.BINARY=5]="BINARY"})(wt||(wt={}));class $e{decode(e){this.ddata=e;let n=e.getBits(),i=this.extractBits(n),l=this.correctBits(i),c=$e.convertBoolArrayToByteArray(l),u=$e.getEncodedData(l),h=new Be(c,u,null,null);return h.setNumBits(l.length),h}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let n=e.length,i=wt.UPPER,l=wt.UPPER,c="",u=0;for(;u<n;)if(l===wt.BINARY){if(n-u<5)break;let h=$e.readCode(e,u,5);if(u+=5,h===0){if(n-u<11)break;h=$e.readCode(e,u,11)+31,u+=11}for(let g=0;g<h;g++){if(n-u<8){u=n;break}const C=$e.readCode(e,u,8);c+=Se.castAsNonUtf8Char(C),u+=8}l=i}else{let h=l===wt.DIGIT?4:5;if(n-u<h)break;let g=$e.readCode(e,u,h);u+=h;let C=$e.getCharacter(l,g);C.startsWith("CTRL_")?(i=l,l=$e.getTable(C.charAt(5)),C.charAt(6)==="L"&&(i=l)):(c+=C,l=i)}return c}static getTable(e){switch(e){case"L":return wt.LOWER;case"P":return wt.PUNCT;case"M":return wt.MIXED;case"D":return wt.DIGIT;case"B":return wt.BINARY;case"U":default:return wt.UPPER}}static getCharacter(e,n){switch(e){case wt.UPPER:return $e.UPPER_TABLE[n];case wt.LOWER:return $e.LOWER_TABLE[n];case wt.MIXED:return $e.MIXED_TABLE[n];case wt.PUNCT:return $e.PUNCT_TABLE[n];case wt.DIGIT:return $e.DIGIT_TABLE[n];default:throw new Ze("Bad table")}}correctBits(e){let n,i;this.ddata.getNbLayers()<=2?(i=6,n=xe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(i=8,n=xe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(i=10,n=xe.AZTEC_DATA_10):(i=12,n=xe.AZTEC_DATA_12);let l=this.ddata.getNbDatablocks(),c=e.length/i;if(c<l)throw new X;let u=e.length%i,h=new Int32Array(c);for(let D=0;D<c;D++,u+=i)h[D]=$e.readCode(e,u,i);try{new Rt(n).decode(h,c-l)}catch(D){throw new X(D)}let g=(1<<i)-1,C=0;for(let D=0;D<l;D++){let z=h[D];if(z===0||z===g)throw new X;(z===1||z===g-1)&&C++}let _=new Array(l*i-C),P=0;for(let D=0;D<l;D++){let z=h[D];if(z===1||z===g-1)_.fill(z>1,P,P+i-1),P+=i-1;else for(let Y=i-1;Y>=0;--Y)_[P++]=(z&1<<Y)!==0}return _}extractBits(e){let n=this.ddata.isCompact(),i=this.ddata.getNbLayers(),l=(n?11:14)+i*4,c=new Int32Array(l),u=new Array(this.totalBitsInLayer(i,n));if(n)for(let h=0;h<c.length;h++)c[h]=h;else{let h=l+1+2*F.truncDivision(F.truncDivision(l,2)-1,15),g=l/2,C=F.truncDivision(h,2);for(let _=0;_<g;_++){let P=_+F.truncDivision(_,15);c[g-_-1]=C-P-1,c[g+_]=C+P+1}}for(let h=0,g=0;h<i;h++){let C=(i-h)*4+(n?9:12),_=h*2,P=l-1-_;for(let D=0;D<C;D++){let z=D*2;for(let Y=0;Y<2;Y++)u[g+z+Y]=e.get(c[_+Y],c[_+D]),u[g+2*C+z+Y]=e.get(c[_+D],c[P-Y]),u[g+4*C+z+Y]=e.get(c[P-Y],c[P-D]),u[g+6*C+z+Y]=e.get(c[P-D],c[_+Y])}g+=C*8}return u}static readCode(e,n,i){let l=0;for(let c=n;c<n+i;c++)l<<=1,e[c]&&(l|=1);return l}static readByte(e,n){let i=e.length-n;return i>=8?$e.readCode(e,n,8):$e.readCode(e,n,i)<<8-i}static convertBoolArrayToByteArray(e){let n=new Uint8Array((e.length+7)/8);for(let i=0;i<n.length;i++)n[i]=$e.readByte(e,8*i);return n}totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}$e.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],$e.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],$e.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],$e.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],$e.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Je{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,n,i,l){const c=e-i,u=n-l;return Math.sqrt(c*c+u*u)}static sum(e){let n=0;for(let i=0,l=e.length;i!==l;i++){const c=e[i];n+=c}return n}}class qt{static floatToIntBits(e){return e}}qt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class je{constructor(e,n){this.x=e,this.y=n}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof je){const n=e;return this.x===n.x&&this.y===n.y}return!1}hashCode(){return 31*qt.floatToIntBits(this.x)+qt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const n=this.distance(e[0],e[1]),i=this.distance(e[1],e[2]),l=this.distance(e[0],e[2]);let c,u,h;if(i>=n&&i>=l?(u=e[0],c=e[1],h=e[2]):l>=i&&l>=n?(u=e[1],c=e[0],h=e[2]):(u=e[2],c=e[0],h=e[1]),this.crossProductZ(c,u,h)<0){const g=c;c=h,h=g}e[0]=c,e[1]=u,e[2]=h}static distance(e,n){return Je.distance(e.x,e.y,n.x,n.y)}static crossProductZ(e,n,i){const l=n.x,c=n.y;return(i.x-l)*(e.y-c)-(i.y-c)*(e.x-l)}}class Wt{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class nr extends Wt{constructor(e,n,i,l,c){super(e,n),this.compact=i,this.nbDatablocks=l,this.nbLayers=c}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Ue{constructor(e,n,i,l){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),n==null&&(n=Ue.INIT_SIZE),i==null&&(i=e.getWidth()/2|0),l==null&&(l=e.getHeight()/2|0);const c=n/2|0;if(this.leftInit=i-c,this.rightInit=i+c,this.upInit=l-c,this.downInit=l+c,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new J}detect(){let e=this.leftInit,n=this.rightInit,i=this.upInit,l=this.downInit,c=!1,u=!0,h=!1,g=!1,C=!1,_=!1,P=!1;const D=this.width,z=this.height;for(;u;){u=!1;let Y=!0;for(;(Y||!g)&&n<D;)Y=this.containsBlackPoint(i,l,n,!1),Y?(n++,u=!0,g=!0):g||n++;if(n>=D){c=!0;break}let $=!0;for(;($||!C)&&l<z;)$=this.containsBlackPoint(e,n,l,!0),$?(l++,u=!0,C=!0):C||l++;if(l>=z){c=!0;break}let ne=!0;for(;(ne||!_)&&e>=0;)ne=this.containsBlackPoint(i,l,e,!1),ne?(e--,u=!0,_=!0):_||e--;if(e<0){c=!0;break}let ue=!0;for(;(ue||!P)&&i>=0;)ue=this.containsBlackPoint(e,n,i,!0),ue?(i--,u=!0,P=!0):P||i--;if(i<0){c=!0;break}u&&(h=!0)}if(!c&&h){const Y=n-e;let $=null;for(let Me=1;$===null&&Me<Y;Me++)$=this.getBlackPointOnSegment(e,l-Me,e+Me,l);if($==null)throw new J;let ne=null;for(let Me=1;ne===null&&Me<Y;Me++)ne=this.getBlackPointOnSegment(e,i+Me,e+Me,i);if(ne==null)throw new J;let ue=null;for(let Me=1;ue===null&&Me<Y;Me++)ue=this.getBlackPointOnSegment(n,i+Me,n-Me,i);if(ue==null)throw new J;let Oe=null;for(let Me=1;Oe===null&&Me<Y;Me++)Oe=this.getBlackPointOnSegment(n,l-Me,n-Me,l);if(Oe==null)throw new J;return this.centerEdges(Oe,$,ue,ne)}else throw new J}getBlackPointOnSegment(e,n,i,l){const c=Je.round(Je.distance(e,n,i,l)),u=(i-e)/c,h=(l-n)/c,g=this.image;for(let C=0;C<c;C++){const _=Je.round(e+C*u),P=Je.round(n+C*h);if(g.get(_,P))return new je(_,P)}return null}centerEdges(e,n,i,l){const c=e.getX(),u=e.getY(),h=n.getX(),g=n.getY(),C=i.getX(),_=i.getY(),P=l.getX(),D=l.getY(),z=Ue.CORR;return c<this.width/2?[new je(P-z,D+z),new je(h+z,g+z),new je(C-z,_-z),new je(c+z,u-z)]:[new je(P+z,D+z),new je(h+z,g-z),new je(C-z,_+z),new je(c-z,u-z)]}containsBlackPoint(e,n,i,l){const c=this.image;if(l){for(let u=e;u<=n;u++)if(c.get(u,i))return!0}else for(let u=e;u<=n;u++)if(c.get(i,u))return!0;return!1}}Ue.INIT_SIZE=10,Ue.CORR=1;class kt{static checkAndNudgePoints(e,n){const i=e.getWidth(),l=e.getHeight();let c=!0;for(let u=0;u<n.length&&c;u+=2){const h=Math.floor(n[u]),g=Math.floor(n[u+1]);if(h<-1||h>i||g<-1||g>l)throw new J;c=!1,h===-1?(n[u]=0,c=!0):h===i&&(n[u]=i-1,c=!0),g===-1?(n[u+1]=0,c=!0):g===l&&(n[u+1]=l-1,c=!0)}c=!0;for(let u=n.length-2;u>=0&&c;u-=2){const h=Math.floor(n[u]),g=Math.floor(n[u+1]);if(h<-1||h>i||g<-1||g>l)throw new J;c=!1,h===-1?(n[u]=0,c=!0):h===i&&(n[u]=i-1,c=!0),g===-1?(n[u+1]=0,c=!0):g===l&&(n[u+1]=l-1,c=!0)}}}class ut{constructor(e,n,i,l,c,u,h,g,C){this.a11=e,this.a21=n,this.a31=i,this.a12=l,this.a22=c,this.a32=u,this.a13=h,this.a23=g,this.a33=C}static quadrilateralToQuadrilateral(e,n,i,l,c,u,h,g,C,_,P,D,z,Y,$,ne){const ue=ut.quadrilateralToSquare(e,n,i,l,c,u,h,g);return ut.squareToQuadrilateral(C,_,P,D,z,Y,$,ne).times(ue)}transformPoints(e){const n=e.length,i=this.a11,l=this.a12,c=this.a13,u=this.a21,h=this.a22,g=this.a23,C=this.a31,_=this.a32,P=this.a33;for(let D=0;D<n;D+=2){const z=e[D],Y=e[D+1],$=c*z+g*Y+P;e[D]=(i*z+u*Y+C)/$,e[D+1]=(l*z+h*Y+_)/$}}transformPointsWithValues(e,n){const i=this.a11,l=this.a12,c=this.a13,u=this.a21,h=this.a22,g=this.a23,C=this.a31,_=this.a32,P=this.a33,D=e.length;for(let z=0;z<D;z++){const Y=e[z],$=n[z],ne=c*Y+g*$+P;e[z]=(i*Y+u*$+C)/ne,n[z]=(l*Y+h*$+_)/ne}}static squareToQuadrilateral(e,n,i,l,c,u,h,g){const C=e-i+c-h,_=n-l+u-g;if(C===0&&_===0)return new ut(i-e,c-i,e,l-n,u-l,n,0,0,1);{const P=i-c,D=h-c,z=l-u,Y=g-u,$=P*Y-D*z,ne=(C*Y-D*_)/$,ue=(P*_-C*z)/$;return new ut(i-e+ne*i,h-e+ue*h,e,l-n+ne*l,g-n+ue*g,n,ne,ue,1)}}static quadrilateralToSquare(e,n,i,l,c,u,h,g){return ut.squareToQuadrilateral(e,n,i,l,c,u,h,g).buildAdjoint()}buildAdjoint(){return new ut(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new ut(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class jt extends kt{sampleGrid(e,n,i,l,c,u,h,g,C,_,P,D,z,Y,$,ne,ue,Oe,Me){const Ie=ut.quadrilateralToQuadrilateral(l,c,u,h,g,C,_,P,D,z,Y,$,ne,ue,Oe,Me);return this.sampleGridWithTransform(e,n,i,Ie)}sampleGridWithTransform(e,n,i,l){if(n<=0||i<=0)throw new J;const c=new Ee(n,i),u=new Float32Array(2*n);for(let h=0;h<i;h++){const g=u.length,C=h+.5;for(let _=0;_<g;_+=2)u[_]=_/2+.5,u[_+1]=C;l.transformPoints(u),kt.checkAndNudgePoints(e,u);try{for(let _=0;_<g;_+=2)e.get(Math.floor(u[_]),Math.floor(u[_+1]))&&c.set(_/2,h)}catch{throw new J}}return c}}class Ke{static setGridSampler(e){Ke.gridSampler=e}static getInstance(){return Ke.gridSampler}}Ke.gridSampler=new jt;class Ht{constructor(e,n){this.x=e,this.y=n}toResultPoint(){return new je(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class St{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let n=this.getMatrixCenter(),i=this.getBullsEyeCorners(n);if(e){let u=i[0];i[0]=i[2],i[2]=u}this.extractParameters(i);let l=this.sampleGrid(this.image,i[this.shift%4],i[(this.shift+1)%4],i[(this.shift+2)%4],i[(this.shift+3)%4]),c=this.getMatrixCornerPoints(i);return new nr(l,c,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new J;let n=2*this.nbCenterLayers,i=new Int32Array([this.sampleLine(e[0],e[1],n),this.sampleLine(e[1],e[2],n),this.sampleLine(e[2],e[3],n),this.sampleLine(e[3],e[0],n)]);this.shift=this.getRotation(i,n);let l=0;for(let u=0;u<4;u++){let h=i[(this.shift+u)%4];this.compact?(l<<=7,l+=h>>1&127):(l<<=10,l+=(h>>2&992)+(h>>1&31))}let c=this.getCorrectedParameterData(l,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)}getRotation(e,n){let i=0;e.forEach((l,c,u)=>{let h=(l>>n-2<<1)+(l&1);i=(i<<3)+h}),i=((i&1)<<11)+(i>>1);for(let l=0;l<4;l++)if(F.bitCount(i^this.EXPECTED_CORNER_BITS[l])<=2)return l;throw new J}getCorrectedParameterData(e,n){let i,l;n?(i=7,l=2):(i=10,l=4);let c=i-l,u=new Int32Array(i);for(let g=i-1;g>=0;--g)u[g]=e&15,e>>=4;try{new Rt(xe.AZTEC_PARAM).decode(u,c)}catch{throw new J}let h=0;for(let g=0;g<l;g++)h=(h<<4)+u[g];return h}getBullsEyeCorners(e){let n=e,i=e,l=e,c=e,u=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let P=this.getFirstDifferent(n,u,1,-1),D=this.getFirstDifferent(i,u,1,1),z=this.getFirstDifferent(l,u,-1,1),Y=this.getFirstDifferent(c,u,-1,-1);if(this.nbCenterLayers>2){let $=this.distancePoint(Y,P)*this.nbCenterLayers/(this.distancePoint(c,n)*(this.nbCenterLayers+2));if($<.75||$>1.25||!this.isWhiteOrBlackRectangle(P,D,z,Y))break}n=P,i=D,l=z,c=Y,u=!u}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new J;this.compact=this.nbCenterLayers===5;let h=new je(n.getX()+.5,n.getY()-.5),g=new je(i.getX()+.5,i.getY()+.5),C=new je(l.getX()-.5,l.getY()+.5),_=new je(c.getX()-.5,c.getY()-.5);return this.expandSquare([h,g,C,_],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,n,i,l;try{let h=new Ue(this.image).detect();e=h[0],n=h[1],i=h[2],l=h[3]}catch{let g=this.image.getWidth()/2,C=this.image.getHeight()/2;e=this.getFirstDifferent(new Ht(g+7,C-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new Ht(g+7,C+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new Ht(g-7,C+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new Ht(g-7,C-7),!1,-1,-1).toResultPoint()}let c=Je.round((e.getX()+l.getX()+n.getX()+i.getX())/4),u=Je.round((e.getY()+l.getY()+n.getY()+i.getY())/4);try{let h=new Ue(this.image,15,c,u).detect();e=h[0],n=h[1],i=h[2],l=h[3]}catch{e=this.getFirstDifferent(new Ht(c+7,u-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new Ht(c+7,u+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new Ht(c-7,u+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new Ht(c-7,u-7),!1,-1,-1).toResultPoint()}return c=Je.round((e.getX()+l.getX()+n.getX()+i.getX())/4),u=Je.round((e.getY()+l.getY()+n.getY()+i.getY())/4),new Ht(c,u)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,n,i,l,c){let u=Ke.getInstance(),h=this.getDimension(),g=h/2-this.nbCenterLayers,C=h/2+this.nbCenterLayers;return u.sampleGrid(e,h,h,g,g,C,g,C,C,g,C,n.getX(),n.getY(),i.getX(),i.getY(),l.getX(),l.getY(),c.getX(),c.getY())}sampleLine(e,n,i){let l=0,c=this.distanceResultPoint(e,n),u=c/i,h=e.getX(),g=e.getY(),C=u*(n.getX()-e.getX())/c,_=u*(n.getY()-e.getY())/c;for(let P=0;P<i;P++)this.image.get(Je.round(h+P*C),Je.round(g+P*_))&&(l|=1<<i-P-1);return l}isWhiteOrBlackRectangle(e,n,i,l){let c=3;e=new Ht(e.getX()-c,e.getY()+c),n=new Ht(n.getX()-c,n.getY()-c),i=new Ht(i.getX()+c,i.getY()-c),l=new Ht(l.getX()+c,l.getY()+c);let u=this.getColor(l,e);if(u===0)return!1;let h=this.getColor(e,n);return h!==u||(h=this.getColor(n,i),h!==u)?!1:(h=this.getColor(i,l),h===u)}getColor(e,n){let i=this.distancePoint(e,n),l=(n.getX()-e.getX())/i,c=(n.getY()-e.getY())/i,u=0,h=e.getX(),g=e.getY(),C=this.image.get(e.getX(),e.getY()),_=Math.ceil(i);for(let D=0;D<_;D++)h+=l,g+=c,this.image.get(Je.round(h),Je.round(g))!==C&&u++;let P=u/i;return P>.1&&P<.9?0:P<=.1===C?1:-1}getFirstDifferent(e,n,i,l){let c=e.getX()+i,u=e.getY()+l;for(;this.isValid(c,u)&&this.image.get(c,u)===n;)c+=i,u+=l;for(c-=i,u-=l;this.isValid(c,u)&&this.image.get(c,u)===n;)c+=i;for(c-=i;this.isValid(c,u)&&this.image.get(c,u)===n;)u+=l;return u-=l,new Ht(c,u)}expandSquare(e,n,i){let l=i/(2*n),c=e[0].getX()-e[2].getX(),u=e[0].getY()-e[2].getY(),h=(e[0].getX()+e[2].getX())/2,g=(e[0].getY()+e[2].getY())/2,C=new je(h+l*c,g+l*u),_=new je(h-l*c,g-l*u);c=e[1].getX()-e[3].getX(),u=e[1].getY()-e[3].getY(),h=(e[1].getX()+e[3].getX())/2,g=(e[1].getY()+e[3].getY())/2;let P=new je(h+l*c,g+l*u),D=new je(h-l*c,g-l*u);return[C,P,_,D]}isValid(e,n){return e>=0&&e<this.image.getWidth()&&n>0&&n<this.image.getHeight()}isValidPoint(e){let n=Je.round(e.getX()),i=Je.round(e.getY());return this.isValid(n,i)}distancePoint(e,n){return Je.distance(e.getX(),e.getY(),n.getX(),n.getY())}distanceResultPoint(e,n){return Je.distance(e.getX(),e.getY(),n.getX(),n.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(F.truncDivision(this.nbLayers-4,8)+1)+15}}class qe{decode(e,n=null){let i=null,l=new St(e.getBlackMatrix()),c=null,u=null;try{let _=l.detectMirror(!1);c=_.getPoints(),this.reportFoundResultPoints(n,c),u=new $e().decode(_)}catch(_){i=_}if(u==null)try{let _=l.detectMirror(!0);c=_.getPoints(),this.reportFoundResultPoints(n,c),u=new $e().decode(_)}catch(_){throw i??_}let h=new be(u.getText(),u.getRawBytes(),u.getNumBits(),c,ie.AZTEC,B.currentTimeMillis()),g=u.getByteSegments();g!=null&&h.putMetadata(ve.BYTE_SEGMENTS,g);let C=u.getECLevel();return C!=null&&h.putMetadata(ve.ERROR_CORRECTION_LEVEL,C),h}reportFoundResultPoints(e,n){if(e!=null){let i=e.get(re.NEED_RESULT_POINT_CALLBACK);i!=null&&n.forEach((l,c,u)=>{i.foundPossibleResultPoint(l)})}}reset(){}}class mt extends we{constructor(e=500){super(new qe,e)}}class _e{decode(e,n){try{return this.doDecode(e,n)}catch{if(n&&n.get(re.TRY_HARDER)===!0&&e.isRotateSupported()){const c=e.rotateCounterClockwise(),u=this.doDecode(c,n),h=u.getResultMetadata();let g=270;h!==null&&h.get(ve.ORIENTATION)===!0&&(g=g+h.get(ve.ORIENTATION)%360),u.putMetadata(ve.ORIENTATION,g);const C=u.getResultPoints();if(C!==null){const _=c.getHeight();for(let P=0;P<C.length;P++)C[P]=new je(_-C[P].getY()-1,C[P].getX())}return u}else throw new J}}reset(){}doDecode(e,n){const i=e.getWidth(),l=e.getHeight();let c=new q(i);const u=n&&n.get(re.TRY_HARDER)===!0,h=Math.max(1,l>>(u?8:5));let g;u?g=l:g=15;const C=Math.trunc(l/2);for(let _=0;_<g;_++){const P=Math.trunc((_+1)/2),D=(_&1)===0,z=C+h*(D?P:-P);if(z<0||z>=l)break;try{c=e.getBlackRow(z,c)}catch{continue}for(let Y=0;Y<2;Y++){if(Y===1&&(c.reverse(),n&&n.get(re.NEED_RESULT_POINT_CALLBACK)===!0)){const $=new Map;n.forEach((ne,ue)=>$.set(ue,ne)),$.delete(re.NEED_RESULT_POINT_CALLBACK),n=$}try{const $=this.decodeRow(z,c,n);if(Y===1){$.putMetadata(ve.ORIENTATION,180);const ne=$.getResultPoints();ne!==null&&(ne[0]=new je(i-ne[0].getX()-1,ne[0].getY()),ne[1]=new je(i-ne[1].getX()-1,ne[1].getY()))}return $}catch{}}}throw new J}static recordPattern(e,n,i){const l=i.length;for(let C=0;C<l;C++)i[C]=0;const c=e.getSize();if(n>=c)throw new J;let u=!e.get(n),h=0,g=n;for(;g<c;){if(e.get(g)!==u)i[h]++;else{if(++h===l)break;i[h]=1,u=!u}g++}if(!(h===l||h===l-1&&g===c))throw new J}static recordPatternInReverse(e,n,i){let l=i.length,c=e.get(n);for(;n>0&&l>=0;)e.get(--n)!==c&&(l--,c=!c);if(l>=0)throw new J;_e.recordPattern(e,n+1,i)}static patternMatchVariance(e,n,i){const l=e.length;let c=0,u=0;for(let C=0;C<l;C++)c+=e[C],u+=n[C];if(c<u)return Number.POSITIVE_INFINITY;const h=c/u;i*=h;let g=0;for(let C=0;C<l;C++){const _=e[C],P=n[C]*h,D=_>P?_-P:P-_;if(D>i)return Number.POSITIVE_INFINITY;g+=D}return g/c}}class me extends _e{static findStartPattern(e){const n=e.getSize(),i=e.getNextSet(0);let l=0,c=Int32Array.from([0,0,0,0,0,0]),u=i,h=!1;const g=6;for(let C=i;C<n;C++)if(e.get(C)!==h)c[l]++;else{if(l===g-1){let _=me.MAX_AVG_VARIANCE,P=-1;for(let D=me.CODE_START_A;D<=me.CODE_START_C;D++){const z=_e.patternMatchVariance(c,me.CODE_PATTERNS[D],me.MAX_INDIVIDUAL_VARIANCE);z<_&&(_=z,P=D)}if(P>=0&&e.isRange(Math.max(0,u-(C-u)/2),u,!1))return Int32Array.from([u,C,P]);u+=c[0]+c[1],c=c.slice(2,c.length-1),c[l-1]=0,c[l]=0,l--}else l++;c[l]=1,h=!h}throw new J}static decodeCode(e,n,i){_e.recordPattern(e,i,n);let l=me.MAX_AVG_VARIANCE,c=-1;for(let u=0;u<me.CODE_PATTERNS.length;u++){const h=me.CODE_PATTERNS[u],g=this.patternMatchVariance(n,h,me.MAX_INDIVIDUAL_VARIANCE);g<l&&(l=g,c=u)}if(c>=0)return c;throw new J}decodeRow(e,n,i){const l=i&&i.get(re.ASSUME_GS1)===!0,c=me.findStartPattern(n),u=c[2];let h=0;const g=new Uint8Array(20);g[h++]=u;let C;switch(u){case me.CODE_START_A:C=me.CODE_CODE_A;break;case me.CODE_START_B:C=me.CODE_CODE_B;break;case me.CODE_START_C:C=me.CODE_CODE_C;break;default:throw new X}let _=!1,P=!1,D="",z=c[0],Y=c[1];const $=Int32Array.from([0,0,0,0,0,0]);let ne=0,ue=0,Oe=u,Me=0,Ie=!0,_t=!1,Et=!1;for(;!_;){const Jr=P;switch(P=!1,ne=ue,ue=me.decodeCode(n,$,Y),g[h++]=ue,ue!==me.CODE_STOP&&(Ie=!0),ue!==me.CODE_STOP&&(Me++,Oe+=Me*ue),z=Y,Y+=$.reduce((es,ia)=>es+ia,0),ue){case me.CODE_START_A:case me.CODE_START_B:case me.CODE_START_C:throw new X}switch(C){case me.CODE_CODE_A:if(ue<64)Et===_t?D+=String.fromCharCode(32+ue):D+=String.fromCharCode(32+ue+128),Et=!1;else if(ue<96)Et===_t?D+=String.fromCharCode(ue-64):D+=String.fromCharCode(ue+64),Et=!1;else switch(ue!==me.CODE_STOP&&(Ie=!1),ue){case me.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case me.CODE_FNC_2:case me.CODE_FNC_3:break;case me.CODE_FNC_4_A:!_t&&Et?(_t=!0,Et=!1):_t&&Et?(_t=!1,Et=!1):Et=!0;break;case me.CODE_SHIFT:P=!0,C=me.CODE_CODE_B;break;case me.CODE_CODE_B:C=me.CODE_CODE_B;break;case me.CODE_CODE_C:C=me.CODE_CODE_C;break;case me.CODE_STOP:_=!0;break}break;case me.CODE_CODE_B:if(ue<96)Et===_t?D+=String.fromCharCode(32+ue):D+=String.fromCharCode(32+ue+128),Et=!1;else switch(ue!==me.CODE_STOP&&(Ie=!1),ue){case me.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case me.CODE_FNC_2:case me.CODE_FNC_3:break;case me.CODE_FNC_4_B:!_t&&Et?(_t=!0,Et=!1):_t&&Et?(_t=!1,Et=!1):Et=!0;break;case me.CODE_SHIFT:P=!0,C=me.CODE_CODE_A;break;case me.CODE_CODE_A:C=me.CODE_CODE_A;break;case me.CODE_CODE_C:C=me.CODE_CODE_C;break;case me.CODE_STOP:_=!0;break}break;case me.CODE_CODE_C:if(ue<100)ue<10&&(D+="0"),D+=ue;else switch(ue!==me.CODE_STOP&&(Ie=!1),ue){case me.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case me.CODE_CODE_A:C=me.CODE_CODE_A;break;case me.CODE_CODE_B:C=me.CODE_CODE_B;break;case me.CODE_STOP:_=!0;break}break}Jr&&(C=C===me.CODE_CODE_A?me.CODE_CODE_B:me.CODE_CODE_A)}const or=Y-z;if(Y=n.getNextUnset(Y),!n.isRange(Y,Math.min(n.getSize(),Y+(Y-z)/2),!1))throw new J;if(Oe-=Me*ne,Oe%103!==ne)throw new M;const Or=D.length;if(Or===0)throw new J;Or>0&&Ie&&(C===me.CODE_CODE_C?D=D.substring(0,Or-2):D=D.substring(0,Or-1));const Sn=(c[1]+c[0])/2,zt=z+or/2,dn=g.length,$n=new Uint8Array(dn);for(let Jr=0;Jr<dn;Jr++)$n[Jr]=g[Jr];const _i=[new je(Sn,e),new je(zt,e)];return new be(D,$n,0,_i,ie.CODE_128,new Date().getTime())}}me.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],me.MAX_AVG_VARIANCE=.25,me.MAX_INDIVIDUAL_VARIANCE=.7,me.CODE_SHIFT=98,me.CODE_CODE_C=99,me.CODE_CODE_B=100,me.CODE_CODE_A=101,me.CODE_FNC_1=102,me.CODE_FNC_2=97,me.CODE_FNC_3=96,me.CODE_FNC_4_A=101,me.CODE_FNC_4_B=100,me.CODE_START_A=103,me.CODE_START_B=104,me.CODE_START_C=105,me.CODE_STOP=106;class ct extends _e{constructor(e=!1,n=!1){super(),this.usingCheckDigit=e,this.extendedMode=n,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,n,i){let l=this.counters;l.fill(0),this.decodeRowResult="";let c=ct.findAsteriskPattern(n,l),u=n.getNextSet(c[1]),h=n.getSize(),g,C;do{ct.recordPattern(n,u,l);let $=ct.toNarrowWidePattern(l);if($<0)throw new J;g=ct.patternToChar($),this.decodeRowResult+=g,C=u;for(let ne of l)u+=ne;u=n.getNextSet(u)}while(g!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let _=0;for(let $ of l)_+=$;let P=u-C-_;if(u!==h&&P*2<_)throw new J;if(this.usingCheckDigit){let $=this.decodeRowResult.length-1,ne=0;for(let ue=0;ue<$;ue++)ne+=ct.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ue));if(this.decodeRowResult.charAt($)!==ct.ALPHABET_STRING.charAt(ne%43))throw new M;this.decodeRowResult=this.decodeRowResult.substring(0,$)}if(this.decodeRowResult.length===0)throw new J;let D;this.extendedMode?D=ct.decodeExtended(this.decodeRowResult):D=this.decodeRowResult;let z=(c[1]+c[0])/2,Y=C+_/2;return new be(D,null,0,[new je(z,e),new je(Y,e)],ie.CODE_39,new Date().getTime())}static findAsteriskPattern(e,n){let i=e.getSize(),l=e.getNextSet(0),c=0,u=l,h=!1,g=n.length;for(let C=l;C<i;C++)if(e.get(C)!==h)n[c]++;else{if(c===g-1){if(this.toNarrowWidePattern(n)===ct.ASTERISK_ENCODING&&e.isRange(Math.max(0,u-Math.floor((C-u)/2)),u,!1))return[u,C];u+=n[0]+n[1],n.copyWithin(0,2,2+c-1),n[c-1]=0,n[c]=0,c--}else c++;n[c]=1,h=!h}throw new J}static toNarrowWidePattern(e){let n=e.length,i=0,l;do{let c=2147483647;for(let g of e)g<c&&g>i&&(c=g);i=c,l=0;let u=0,h=0;for(let g=0;g<n;g++){let C=e[g];C>i&&(h|=1<<n-1-g,l++,u+=C)}if(l===3){for(let g=0;g<n&&l>0;g++){let C=e[g];if(C>i&&(l--,C*2>=u))return-1}return h}}while(l>3);return-1}static patternToChar(e){for(let n=0;n<ct.CHARACTER_ENCODINGS.length;n++)if(ct.CHARACTER_ENCODINGS[n]===e)return ct.ALPHABET_STRING.charAt(n);if(e===ct.ASTERISK_ENCODING)return"*";throw new J}static decodeExtended(e){let n=e.length,i="";for(let l=0;l<n;l++){let c=e.charAt(l);if(c==="+"||c==="$"||c==="%"||c==="/"){let u=e.charAt(l+1),h="\0";switch(c){case"+":if(u>="A"&&u<="Z")h=String.fromCharCode(u.charCodeAt(0)+32);else throw new X;break;case"$":if(u>="A"&&u<="Z")h=String.fromCharCode(u.charCodeAt(0)-64);else throw new X;break;case"%":if(u>="A"&&u<="E")h=String.fromCharCode(u.charCodeAt(0)-38);else if(u>="F"&&u<="J")h=String.fromCharCode(u.charCodeAt(0)-11);else if(u>="K"&&u<="O")h=String.fromCharCode(u.charCodeAt(0)+16);else if(u>="P"&&u<="T")h=String.fromCharCode(u.charCodeAt(0)+43);else if(u==="U")h="\0";else if(u==="V")h="@";else if(u==="W")h="`";else if(u==="X"||u==="Y"||u==="Z")h="";else throw new X;break;case"/":if(u>="A"&&u<="O")h=String.fromCharCode(u.charCodeAt(0)-32);else if(u==="Z")h=":";else throw new X;break}i+=h,l++}else i+=c}return i}}ct.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",ct.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],ct.ASTERISK_ENCODING=148;class et extends _e{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,n,i){let l=this.decodeStart(n),c=this.decodeEnd(n),u=new Ne;et.decodeMiddle(n,l[1],c[0],u);let h=u.toString(),g=null;i!=null&&(g=i.get(re.ALLOWED_LENGTHS)),g==null&&(g=et.DEFAULT_ALLOWED_LENGTHS);let C=h.length,_=!1,P=0;for(let Y of g){if(C===Y){_=!0;break}Y>P&&(P=Y)}if(!_&&C>P&&(_=!0),!_)throw new X;const D=[new je(l[1],e),new je(c[0],e)];return new be(h,null,0,D,ie.ITF,new Date().getTime())}static decodeMiddle(e,n,i,l){let c=new Int32Array(10),u=new Int32Array(5),h=new Int32Array(5);for(c.fill(0),u.fill(0),h.fill(0);n<i;){_e.recordPattern(e,n,c);for(let C=0;C<5;C++){let _=2*C;u[C]=c[_],h[C]=c[_+1]}let g=et.decodeDigit(u);l.append(g.toString()),g=this.decodeDigit(h),l.append(g.toString()),c.forEach(function(C){n+=C})}}decodeStart(e){let n=et.skipWhiteSpace(e),i=et.findGuardPattern(e,n,et.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(e,i[0]),i}validateQuietZone(e,n){let i=this.narrowLineWidth*10;i=i<n?i:n;for(let l=n-1;i>0&&l>=0&&!e.get(l);l--)i--;if(i!==0)throw new J}static skipWhiteSpace(e){const n=e.getSize(),i=e.getNextSet(0);if(i===n)throw new J;return i}decodeEnd(e){e.reverse();try{let n=et.skipWhiteSpace(e),i;try{i=et.findGuardPattern(e,n,et.END_PATTERN_REVERSED[0])}catch(c){c instanceof J&&(i=et.findGuardPattern(e,n,et.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,i[0]);let l=i[0];return i[0]=e.getSize()-i[1],i[1]=e.getSize()-l,i}finally{e.reverse()}}static findGuardPattern(e,n,i){let l=i.length,c=new Int32Array(l),u=e.getSize(),h=!1,g=0,C=n;c.fill(0);for(let _=n;_<u;_++)if(e.get(_)!==h)c[g]++;else{if(g===l-1){if(_e.patternMatchVariance(c,i,et.MAX_INDIVIDUAL_VARIANCE)<et.MAX_AVG_VARIANCE)return[C,_];C+=c[0]+c[1],B.arraycopy(c,2,c,0,g-1),c[g-1]=0,c[g]=0,g--}else g++;c[g]=1,h=!h}throw new J}static decodeDigit(e){let n=et.MAX_AVG_VARIANCE,i=-1,l=et.PATTERNS.length;for(let c=0;c<l;c++){let u=et.PATTERNS[c],h=_e.patternMatchVariance(e,u,et.MAX_INDIVIDUAL_VARIANCE);h<n?(n=h,i=c):h===n&&(i=-1)}if(i>=0)return i%10;throw new J}}et.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],et.MAX_AVG_VARIANCE=.38,et.MAX_INDIVIDUAL_VARIANCE=.5,et.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],et.START_PATTERN=Int32Array.from([1,1,1,1]),et.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class ft extends _e{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let n=!1,i,l=0,c=Int32Array.from([0,0,0]);for(;!n;){c=Int32Array.from([0,0,0]),i=ft.findGuardPattern(e,l,!1,this.START_END_PATTERN,c);let u=i[0];l=i[1];let h=u-(l-u);h>=0&&(n=e.isRange(h,u,!1))}return i}static checkChecksum(e){return ft.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let i=parseInt(e.charAt(n-1),10);return ft.getStandardUPCEANChecksum(e.substring(0,n-1))===i}static getStandardUPCEANChecksum(e){let n=e.length,i=0;for(let l=n-1;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new X;i+=c}i*=3;for(let l=n-2;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new X;i+=c}return(1e3-i)%10}static decodeEnd(e,n){return ft.findGuardPattern(e,n,!1,ft.START_END_PATTERN,new Int32Array(ft.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,n,i,l){return this.findGuardPattern(e,n,i,l,new Int32Array(l.length))}static findGuardPattern(e,n,i,l,c){let u=e.getSize();n=i?e.getNextUnset(n):e.getNextSet(n);let h=0,g=n,C=l.length,_=i;for(let P=n;P<u;P++)if(e.get(P)!==_)c[h]++;else{if(h===C-1){if(_e.patternMatchVariance(c,l,ft.MAX_INDIVIDUAL_VARIANCE)<ft.MAX_AVG_VARIANCE)return Int32Array.from([g,P]);g+=c[0]+c[1];let D=c.slice(2,c.length-1);for(let z=0;z<h-1;z++)c[z]=D[z];c[h-1]=0,c[h]=0,h--}else h++;c[h]=1,_=!_}throw new J}static decodeDigit(e,n,i,l){this.recordPattern(e,i,n);let c=this.MAX_AVG_VARIANCE,u=-1,h=l.length;for(let g=0;g<h;g++){let C=l[g],_=_e.patternMatchVariance(n,C,ft.MAX_INDIVIDUAL_VARIANCE);_<c&&(c=_,u=g)}if(u>=0)return u;throw new J}}ft.MAX_AVG_VARIANCE=.48,ft.MAX_INDIVIDUAL_VARIANCE=.7,ft.START_END_PATTERN=Int32Array.from([1,1,1]),ft.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),ft.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ft.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Yt{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,i){let l=this.decodeRowStringBuffer,c=this.decodeMiddle(n,i,l),u=l.toString(),h=Yt.parseExtensionString(u),g=[new je((i[0]+i[1])/2,e),new je(c,e)],C=new be(u,null,0,g,ie.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&C.putAllMetadata(h),C}decodeMiddle(e,n,i){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u=n[1],h=0;for(let C=0;C<5&&u<c;C++){let _=ft.decodeDigit(e,l,u,ft.L_AND_G_PATTERNS);i+=String.fromCharCode(48+_%10);for(let P of l)u+=P;_>=10&&(h|=1<<4-C),C!==4&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(i.length!==5)throw new J;let g=this.determineCheckDigit(h);if(Yt.extensionChecksum(i.toString())!==g)throw new J;return u}static extensionChecksum(e){let n=e.length,i=0;for(let l=n-2;l>=0;l-=2)i+=e.charAt(l).charCodeAt(0)-48;i*=3;for(let l=n-1;l>=0;l-=2)i+=e.charAt(l).charCodeAt(0)-48;return i*=3,i%10}determineCheckDigit(e){for(let n=0;n<10;n++)if(e===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new J}static parseExtensionString(e){if(e.length!==5)return null;let n=Yt.parseExtension5String(e);return n==null?null:new Map([[ve.SUGGESTED_PRICE,n]])}static parseExtension5String(e){let n;switch(e.charAt(0)){case"0":n="";break;case"5":n="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n="";break}let i=parseInt(e.substring(1)),l=(i/100).toString(),c=i%100,u=c<10?"0"+c:c.toString();return n+l+"."+u}}class In{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,i){let l=this.decodeRowStringBuffer,c=this.decodeMiddle(n,i,l),u=l.toString(),h=In.parseExtensionString(u),g=[new je((i[0]+i[1])/2,e),new je(c,e)],C=new be(u,null,0,g,ie.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&C.putAllMetadata(h),C}decodeMiddle(e,n,i){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u=n[1],h=0;for(let g=0;g<2&&u<c;g++){let C=ft.decodeDigit(e,l,u,ft.L_AND_G_PATTERNS);i+=String.fromCharCode(48+C%10);for(let _ of l)u+=_;C>=10&&(h|=1<<1-g),g!==1&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(i.length!==2)throw new J;if(parseInt(i.toString())%4!==h)throw new J;return u}static parseExtensionString(e){return e.length!==2?null:new Map([[ve.ISSUE_NUMBER,parseInt(e)]])}}class on{static decodeRow(e,n,i){let l=ft.findGuardPattern(n,i,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Yt().decodeRow(e,n,l)}catch{return new In().decodeRow(e,n,l)}}}on.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class at extends ft{constructor(){super(),this.decodeRowStringBuffer="",at.L_AND_G_PATTERNS=at.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let n=at.L_PATTERNS[e-10],i=new Int32Array(n.length);for(let l=0;l<n.length;l++)i[l]=n[n.length-l-1];at.L_AND_G_PATTERNS[e]=i}}decodeRow(e,n,i){let l=at.findStartGuardPattern(n),c=i==null?null:i.get(re.NEED_RESULT_POINT_CALLBACK);if(c!=null){const Ie=new je((l[0]+l[1])/2,e);c.foundPossibleResultPoint(Ie)}let u=this.decodeMiddle(n,l,this.decodeRowStringBuffer),h=u.rowOffset,g=u.resultString;if(c!=null){const Ie=new je(h,e);c.foundPossibleResultPoint(Ie)}let C=this.decodeEnd(n,h);if(c!=null){const Ie=new je((C[0]+C[1])/2,e);c.foundPossibleResultPoint(Ie)}let _=C[1],P=_+(_-C[0]);if(P>=n.getSize()||!n.isRange(_,P,!1))throw new J;let D=g.toString();if(D.length<8)throw new X;if(!at.checkChecksum(D))throw new M;let z=(l[1]+l[0])/2,Y=(C[1]+C[0])/2,$=this.getBarcodeFormat(),ne=[new je(z,e),new je(Y,e)],ue=new be(D,null,0,ne,$,new Date().getTime()),Oe=0;try{let Ie=on.decodeRow(e,n,C[1]);ue.putMetadata(ve.UPC_EAN_EXTENSION,Ie.getText()),ue.putAllMetadata(Ie.getResultMetadata()),ue.addResultPoints(Ie.getResultPoints()),Oe=Ie.getText().length}catch{}let Me=i==null?null:i.get(re.ALLOWED_EAN_EXTENSIONS);if(Me!=null){let Ie=!1;for(let _t in Me)if(Oe.toString()===_t){Ie=!0;break}if(!Ie)throw new J}return ue}decodeEnd(e,n){return at.findGuardPattern(e,n,!1,at.START_END_PATTERN,new Int32Array(at.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return at.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let i=parseInt(e.charAt(n-1),10);return at.getStandardUPCEANChecksum(e.substring(0,n-1))===i}static getStandardUPCEANChecksum(e){let n=e.length,i=0;for(let l=n-1;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new X;i+=c}i*=3;for(let l=n-2;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new X;i+=c}return(1e3-i)%10}}class an extends at{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,i){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u=n[1],h=0;for(let C=0;C<6&&u<c;C++){let _=at.decodeDigit(e,l,u,at.L_AND_G_PATTERNS);i+=String.fromCharCode(48+_%10);for(let P of l)u+=P;_>=10&&(h|=1<<5-C)}i=an.determineFirstDigit(i,h),u=at.findGuardPattern(e,u,!0,at.MIDDLE_PATTERN,new Int32Array(at.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<6&&u<c;C++){let _=at.decodeDigit(e,l,u,at.L_PATTERNS);i+=String.fromCharCode(48+_);for(let P of l)u+=P}return{rowOffset:u,resultString:i}}getBarcodeFormat(){return ie.EAN_13}static determineFirstDigit(e,n){for(let i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return e=String.fromCharCode(48+i)+e,e;throw new J}}an.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Es extends at{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,i){const l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u=n[1];for(let g=0;g<4&&u<c;g++){let C=at.decodeDigit(e,l,u,at.L_PATTERNS);i+=String.fromCharCode(48+C);for(let _ of l)u+=_}u=at.findGuardPattern(e,u,!0,at.MIDDLE_PATTERN,new Int32Array(at.MIDDLE_PATTERN.length).fill(0))[1];for(let g=0;g<4&&u<c;g++){let C=at.decodeDigit(e,l,u,at.L_PATTERNS);i+=String.fromCharCode(48+C);for(let _ of l)u+=_}return{rowOffset:u,resultString:i}}getBarcodeFormat(){return ie.EAN_8}}class bs extends at{constructor(){super(...arguments),this.ean13Reader=new an}getBarcodeFormat(){return ie.UPC_A}decode(e,n){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,n,i))}decodeMiddle(e,n,i){return this.ean13Reader.decodeMiddle(e,n,i)}maybeReturnResult(e){let n=e.getText();if(n.charAt(0)==="0"){let i=new be(n.substring(1),null,null,e.getResultPoints(),ie.UPC_A);return e.getResultMetadata()!=null&&i.putAllMetadata(e.getResultMetadata()),i}else throw new J}reset(){this.ean13Reader.reset()}}class Yn extends at{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,n,i){const l=this.decodeMiddleCounters.map(C=>C);l[0]=0,l[1]=0,l[2]=0,l[3]=0;const c=e.getSize();let u=n[1],h=0;for(let C=0;C<6&&u<c;C++){const _=Yn.decodeDigit(e,l,u,Yn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+_%10);for(let P of l)u+=P;_>=10&&(h|=1<<5-C)}let g=Yn.determineNumSysAndCheckDigit(i,h);return{rowOffset:u,resultString:g}}decodeEnd(e,n){return Yn.findGuardPatternWithoutCounters(e,n,!0,Yn.MIDDLE_END_PATTERN)}checkChecksum(e){return at.checkChecksum(Yn.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,n){for(let i=0;i<=1;i++)for(let l=0;l<10;l++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][l]){let c=String.fromCharCode(48+i),u=String.fromCharCode(48+l);return c+e+u}throw J.getNotFoundInstance()}getBarcodeFormat(){return ie.UPC_E}static convertUPCEtoUPCA(e){const n=e.slice(1,7).split("").map(c=>c.charCodeAt(0)),i=new Ne;i.append(e.charAt(0));let l=n[5];switch(l){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(l),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(l);break}return e.length>=8&&i.append(e.charAt(7)),i.toString()}}Yn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Yn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Wi extends _e{constructor(e){super();let n=e==null?null:e.get(re.POSSIBLE_FORMATS),i=[];f(n)?(i.push(new an),i.push(new bs),i.push(new Es),i.push(new Yn)):(n.indexOf(ie.EAN_13)>-1&&i.push(new an),n.indexOf(ie.UPC_A)>-1&&i.push(new bs),n.indexOf(ie.EAN_8)>-1&&i.push(new Es),n.indexOf(ie.UPC_E)>-1&&i.push(new Yn)),this.readers=i}decodeRow(e,n,i){for(let l of this.readers)try{const c=l.decodeRow(e,n,i),u=c.getBarcodeFormat()===ie.EAN_13&&c.getText().charAt(0)==="0",h=i==null?null:i.get(re.POSSIBLE_FORMATS),g=h==null||h.includes(ie.UPC_A);if(u&&g){const C=c.getRawBytes(),_=new be(c.getText().substring(1),C,C?C.length:null,c.getResultPoints(),ie.UPC_A);return _.putAllMetadata(c.getResultMetadata()),_}return c}catch{}throw new J}reset(){for(let e of this.readers)e.reset()}}class Cn extends _e{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,n){for(let i=0;i<n.length;i++)if(_e.patternMatchVariance(e,n[i],Cn.MAX_INDIVIDUAL_VARIANCE)<Cn.MAX_AVG_VARIANCE)return i;throw new J}static count(e){return Je.sum(new Int32Array(e))}static increment(e,n){let i=0,l=n[0];for(let c=1;c<e.length;c++)n[c]>l&&(l=n[c],i=c);e[i]++}static decrement(e,n){let i=0,l=n[0];for(let c=1;c<e.length;c++)n[c]<l&&(l=n[c],i=c);e[i]--}static isFinderPattern(e){let n=e[0]+e[1],i=n+e[2]+e[3],l=n/i;if(l>=Cn.MIN_FINDER_PATTERN_RATIO&&l<=Cn.MAX_FINDER_PATTERN_RATIO){let c=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;for(let h of e)h>u&&(u=h),h<c&&(c=h);return u<10*c}return!1}}Cn.MAX_AVG_VARIANCE=.2,Cn.MAX_INDIVIDUAL_VARIANCE=.45,Cn.MIN_FINDER_PATTERN_RATIO=9.5/12,Cn.MAX_FINDER_PATTERN_RATIO=12.5/14;class xr{constructor(e,n){this.value=e,this.checksumPortion=n}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof xr))return!1;const n=e;return this.value===n.value&&this.checksumPortion===n.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ci{constructor(e,n,i,l,c){this.value=e,this.startEnd=n,this.value=e,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new je(i,c)),this.resultPoints.push(new je(l,c))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof Ci))return!1;const n=e;return this.value===n.value}hashCode(){return this.value}}class On{constructor(){}static getRSSvalue(e,n,i){let l=0;for(let g of e)l+=g;let c=0,u=0,h=e.length;for(let g=0;g<h-1;g++){let C;for(C=1,u|=1<<g;C<e[g];C++,u&=~(1<<g)){let _=On.combins(l-C-1,h-g-2);if(i&&u===0&&l-C-(h-g-1)>=h-g-1&&(_-=On.combins(l-C-(h-g),h-g-2)),h-g-1>1){let P=0;for(let D=l-C-(h-g-2);D>n;D--)P+=On.combins(l-C-D-1,h-g-3);_-=P*(h-1-g)}else l-C>n&&_--;c+=_}l-=C}return c}static combins(e,n){let i,l;e-n>n?(l=n,i=e-n):(l=e-n,i=n);let c=1,u=1;for(let h=e;h>i;h--)c*=h,u<=l&&(c/=u,u++);for(;u<=l;)c/=u,u++;return c}}class Ei{static buildBitArray(e){let n=e.length*2-1;e[e.length-1].getRightChar()==null&&(n-=1);let i=12*n,l=new q(i),c=0,h=e[0].getRightChar().getValue();for(let g=11;g>=0;--g)h&1<<g&&l.set(c),c++;for(let g=1;g<e.length;++g){let C=e[g],_=C.getLeftChar().getValue();for(let P=11;P>=0;--P)_&1<<P&&l.set(c),c++;if(C.getRightChar()!=null){let P=C.getRightChar().getValue();for(let D=11;D>=0;--D)P&1<<D&&l.set(c),c++}}return l}}class rr{constructor(e,n){n?this.decodedInformation=null:(this.finished=e,this.decodedInformation=n)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Ss{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class tn extends Ss{constructor(e,n){super(e),this.value=n}getValue(){return this.value}isFNC1(){return this.value===tn.FNC1}}tn.FNC1="$";class yr extends Ss{constructor(e,n,i){super(e),i?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=n}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Nn extends Ss{constructor(e,n,i){if(super(e),n<0||n>10||i<0||i>10)throw new X;this.firstDigit=n,this.secondDigit=i}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Nn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Nn.FNC1}isAnyFNC1(){return this.firstDigit===Nn.FNC1||this.secondDigit===Nn.FNC1}}Nn.FNC1=10;class We{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new J;let n=e.substring(0,2);for(let c of We.TWO_DIGIT_DATA_LENGTH)if(c[0]===n)return c[1]===We.VARIABLE_LENGTH?We.processVariableAI(2,c[2],e):We.processFixedAI(2,c[1],e);if(e.length<3)throw new J;let i=e.substring(0,3);for(let c of We.THREE_DIGIT_DATA_LENGTH)if(c[0]===i)return c[1]===We.VARIABLE_LENGTH?We.processVariableAI(3,c[2],e):We.processFixedAI(3,c[1],e);for(let c of We.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(c[0]===i)return c[1]===We.VARIABLE_LENGTH?We.processVariableAI(4,c[2],e):We.processFixedAI(4,c[1],e);if(e.length<4)throw new J;let l=e.substring(0,4);for(let c of We.FOUR_DIGIT_DATA_LENGTH)if(c[0]===l)return c[1]===We.VARIABLE_LENGTH?We.processVariableAI(4,c[2],e):We.processFixedAI(4,c[1],e);throw new J}static processFixedAI(e,n,i){if(i.length<e)throw new J;let l=i.substring(0,e);if(i.length<e+n)throw new J;let c=i.substring(e,e+n),u=i.substring(e+n),h="("+l+")"+c,g=We.parseFieldsInGeneralPurpose(u);return g==null?h:h+g}static processVariableAI(e,n,i){let l=i.substring(0,e),c;i.length<e+n?c=i.length:c=e+n;let u=i.substring(e,c),h=i.substring(c),g="("+l+")"+u,C=We.parseFieldsInGeneralPurpose(h);return C==null?g:g+C}}We.VARIABLE_LENGTH=[],We.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",We.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",We.VARIABLE_LENGTH,20],["22",We.VARIABLE_LENGTH,29],["30",We.VARIABLE_LENGTH,8],["37",We.VARIABLE_LENGTH,8],["90",We.VARIABLE_LENGTH,30],["91",We.VARIABLE_LENGTH,30],["92",We.VARIABLE_LENGTH,30],["93",We.VARIABLE_LENGTH,30],["94",We.VARIABLE_LENGTH,30],["95",We.VARIABLE_LENGTH,30],["96",We.VARIABLE_LENGTH,30],["97",We.VARIABLE_LENGTH,3],["98",We.VARIABLE_LENGTH,30],["99",We.VARIABLE_LENGTH,30]],We.THREE_DIGIT_DATA_LENGTH=[["240",We.VARIABLE_LENGTH,30],["241",We.VARIABLE_LENGTH,30],["242",We.VARIABLE_LENGTH,6],["250",We.VARIABLE_LENGTH,30],["251",We.VARIABLE_LENGTH,30],["253",We.VARIABLE_LENGTH,17],["254",We.VARIABLE_LENGTH,20],["400",We.VARIABLE_LENGTH,30],["401",We.VARIABLE_LENGTH,30],["402",17],["403",We.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",We.VARIABLE_LENGTH,20],["421",We.VARIABLE_LENGTH,15],["422",3],["423",We.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],We.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",We.VARIABLE_LENGTH,15],["391",We.VARIABLE_LENGTH,18],["392",We.VARIABLE_LENGTH,15],["393",We.VARIABLE_LENGTH,18],["703",We.VARIABLE_LENGTH,30]],We.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",We.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",We.VARIABLE_LENGTH,20],["8003",We.VARIABLE_LENGTH,30],["8004",We.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",We.VARIABLE_LENGTH,30],["8008",We.VARIABLE_LENGTH,12],["8018",18],["8020",We.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",We.VARIABLE_LENGTH,70],["8200",We.VARIABLE_LENGTH,70]];class li{constructor(e){this.buffer=new Ne,this.information=e}decodeAllCodes(e,n){let i=n,l=null;do{let c=this.decodeGeneralPurposeField(i,l),u=We.parseFieldsInGeneralPurpose(c.getNewString());if(u!=null&&e.append(u),c.isRemaining()?l=""+c.getRemainingValue():l=null,i===c.getNewPosition())break;i=c.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let n=e;n<e+3;++n)if(this.information.get(n))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let c=this.extractNumericValueFromBitArray(e,4);return c===0?new Nn(this.information.getSize(),Nn.FNC1,Nn.FNC1):new Nn(this.information.getSize(),c-1,Nn.FNC1)}let n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,l=(n-8)%11;return new Nn(e+7,i,l)}extractNumericValueFromBitArray(e,n){return li.extractNumericValueFromBitArray(this.information,e,n)}static extractNumericValueFromBitArray(e,n,i){let l=0;for(let c=0;c<i;++c)e.get(n+c)&&(l|=1<<i-c-1);return l}decodeGeneralPurposeField(e,n){this.buffer.setLengthToZero(),n!=null&&this.buffer.append(n),this.current.setPosition(e);let i=this.parseBlocks();return i!=null&&i.isRemaining()?new yr(this.current.getPosition(),this.buffer.toString(),i.getRemainingValue()):new yr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,n;do{let i=this.current.getPosition();if(this.current.isAlpha()?(n=this.parseAlphaBlock(),e=n.isFinished()):this.current.isIsoIec646()?(n=this.parseIsoIec646Block(),e=n.isFinished()):(n=this.parseNumericBlock(),e=n.isFinished()),!(i!==this.current.getPosition())&&!e)break}while(!e);return n.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let n;return e.isSecondDigitFNC1()?n=new yr(this.current.getPosition(),this.buffer.toString()):n=new yr(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new rr(!0,n)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let n=new yr(this.current.getPosition(),this.buffer.toString());return new rr(!0,n)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new rr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new yr(this.current.getPosition(),this.buffer.toString());return new rr(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new rr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new yr(this.current.getPosition(),this.buffer.toString());return new rr(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new rr(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+7>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<116)return!0;if(e+8>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(e,8);return l>=232&&l<253}decodeIsoIec646(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new tn(e+5,tn.FNC1);if(n>=5&&n<15)return new tn(e+5,"0"+(n-5));let i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<90)return new tn(e+7,""+(i+1));if(i>=90&&i<116)return new tn(e+7,""+(i+7));let l=this.extractNumericValueFromBitArray(e,8),c;switch(l){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new X}return new tn(e+8,c)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+6>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,6);return i>=16&&i<63}decodeAlphanumeric(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new tn(e+5,tn.FNC1);if(n>=5&&n<15)return new tn(e+5,"0"+(n-5));let i=this.extractNumericValueFromBitArray(e,6);if(i>=32&&i<58)return new tn(e+6,""+(i+33));let l;switch(i){case 58:l="*";break;case 59:l=",";break;case 60:l="-";break;case 61:l=".";break;case 62:l="/";break;default:throw new Ze("Decoding invalid alphanumeric value: "+i)}return new tn(e+6,l)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<5&&n+e<this.information.getSize();++n)if(n===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+n))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let n=e;n<e+3;++n)if(this.information.get(n))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<4&&n+e<this.information.getSize();++n)if(this.information.get(e+n))return!1;return!0}}class As{constructor(e){this.information=e,this.generalDecoder=new li(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Mn extends As{constructor(e){super(e)}encodeCompressedGtin(e,n){e.append("(01)");let i=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,n,i)}encodeCompressedGtinWithoutAI(e,n,i){for(let l=0;l<4;++l){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*l,10);c/100===0&&e.append("0"),c/10===0&&e.append("0"),e.append(c)}Mn.appendCheckDigit(e,i)}static appendCheckDigit(e,n){let i=0;for(let l=0;l<13;l++){let c=e.charAt(l+n).charCodeAt(0)-48;i+=l&1?c:3*c}i=10-i%10,i===10&&(i=0),e.append(i)}}Mn.GTIN_SIZE=40;class ir extends Mn{constructor(e){super(e)}parseInformation(){let e=new Ne;e.append("(01)");let n=e.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(ir.HEADER_SIZE,4);return e.append(i),this.encodeCompressedGtinWithoutAI(e,ir.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(e,ir.HEADER_SIZE+44)}}ir.HEADER_SIZE=4;class bi extends As{constructor(e){super(e)}parseInformation(){let e=new Ne;return this.getGeneralDecoder().decodeAllCodes(e,bi.HEADER_SIZE)}}bi.HEADER_SIZE=5;class Kr extends Mn{constructor(e){super(e)}encodeCompressedWeight(e,n,i){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(e,l);let c=this.checkWeight(l),u=1e5;for(let h=0;h<5;++h)c/u===0&&e.append("0"),u/=10;e.append(c)}}class wr extends Kr{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=wr.HEADER_SIZE+Kr.GTIN_SIZE+wr.WEIGHT_SIZE)throw new J;let e=new Ne;return this.encodeCompressedGtin(e,wr.HEADER_SIZE),this.encodeCompressedWeight(e,wr.HEADER_SIZE+Kr.GTIN_SIZE,wr.WEIGHT_SIZE),e.toString()}}wr.HEADER_SIZE=5,wr.WEIGHT_SIZE=15;class Hi extends wr{constructor(e){super(e)}addWeightCode(e,n){e.append("(3103)")}checkWeight(e){return e}}class Ge extends wr{constructor(e){super(e)}addWeightCode(e,n){n<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class it extends Mn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<it.HEADER_SIZE+Mn.GTIN_SIZE)throw new J;let e=new Ne;this.encodeCompressedGtin(e,it.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(it.HEADER_SIZE+Mn.GTIN_SIZE,it.LAST_DIGIT_SIZE);e.append("(392"),e.append(n),e.append(")");let i=this.getGeneralDecoder().decodeGeneralPurposeField(it.HEADER_SIZE+Mn.GTIN_SIZE+it.LAST_DIGIT_SIZE,null);return e.append(i.getNewString()),e.toString()}}it.HEADER_SIZE=8,it.LAST_DIGIT_SIZE=2;class gt extends Mn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<gt.HEADER_SIZE+Mn.GTIN_SIZE)throw new J;let e=new Ne;this.encodeCompressedGtin(e,gt.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(gt.HEADER_SIZE+Mn.GTIN_SIZE,gt.LAST_DIGIT_SIZE);e.append("(393"),e.append(n),e.append(")");let i=this.getGeneralDecoder().extractNumericValueFromBitArray(gt.HEADER_SIZE+Mn.GTIN_SIZE+gt.LAST_DIGIT_SIZE,gt.FIRST_THREE_DIGITS_SIZE);i/100==0&&e.append("0"),i/10==0&&e.append("0"),e.append(i);let l=this.getGeneralDecoder().decodeGeneralPurposeField(gt.HEADER_SIZE+Mn.GTIN_SIZE+gt.LAST_DIGIT_SIZE+gt.FIRST_THREE_DIGITS_SIZE,null);return e.append(l.getNewString()),e.toString()}}gt.HEADER_SIZE=8,gt.LAST_DIGIT_SIZE=2,gt.FIRST_THREE_DIGITS_SIZE=10;class Xe extends Kr{constructor(e,n,i){super(e),this.dateCode=i,this.firstAIdigits=n}parseInformation(){if(this.getInformation().getSize()!=Xe.HEADER_SIZE+Xe.GTIN_SIZE+Xe.WEIGHT_SIZE+Xe.DATE_SIZE)throw new J;let e=new Ne;return this.encodeCompressedGtin(e,Xe.HEADER_SIZE),this.encodeCompressedWeight(e,Xe.HEADER_SIZE+Xe.GTIN_SIZE,Xe.WEIGHT_SIZE),this.encodeCompressedDate(e,Xe.HEADER_SIZE+Xe.GTIN_SIZE+Xe.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,n){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,Xe.DATE_SIZE);if(i==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let l=i%32;i/=32;let c=i%12+1;i/=12;let u=i;u/10==0&&e.append("0"),e.append(u),c/10==0&&e.append("0"),e.append(c),l/10==0&&e.append("0"),e.append(l)}addWeightCode(e,n){e.append("("),e.append(this.firstAIdigits),e.append(n/1e5),e.append(")")}checkWeight(e){return e%1e5}}Xe.HEADER_SIZE=8,Xe.WEIGHT_SIZE=20,Xe.DATE_SIZE=16;function Zt(k){try{if(k.get(1))return new ir(k);if(!k.get(2))return new bi(k);switch(li.extractNumericValueFromBitArray(k,1,4)){case 4:return new Hi(k);case 5:return new Ge(k)}switch(li.extractNumericValueFromBitArray(k,1,5)){case 12:return new it(k);case 13:return new gt(k)}switch(li.extractNumericValueFromBitArray(k,1,7)){case 56:return new Xe(k,"310","11");case 57:return new Xe(k,"320","11");case 58:return new Xe(k,"310","13");case 59:return new Xe(k,"320","13");case 60:return new Xe(k,"310","15");case 61:return new Xe(k,"320","15");case 62:return new Xe(k,"310","17");case 63:return new Xe(k,"320","17")}}catch(e){throw console.log(e),new Ze("unknown decoder: "+k)}}class Nt{constructor(e,n,i,l){this.leftchar=e,this.rightchar=n,this.finderpattern=i,this.maybeLast=l}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,n){return e instanceof Nt?Nt.equalsOrNull(e.leftchar,n.leftchar)&&Nt.equalsOrNull(e.rightchar,n.rightchar)&&Nt.equalsOrNull(e.finderpattern,n.finderpattern):!1}static equalsOrNull(e,n){return e===null?n===null:Nt.equals(e,n)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ts{constructor(e,n,i){this.pairs=e,this.rowNumber=n,this.wasReversed=i}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,n){return e instanceof Ts?this.checkEqualitity(e,n)&&e.wasReversed===n.wasReversed:!1}checkEqualitity(e,n){if(!e||!n)return;let i;return e.forEach((l,c)=>{n.forEach(u=>{l.getLeftChar().getValue()===u.getLeftChar().getValue()&&l.getRightChar().getValue()===u.getRightChar().getValue()&&l.getFinderPatter().getValue()===u.getFinderPatter().getValue()&&(i=!0)})}),i}}class Ce extends Cn{constructor(e){super(...arguments),this.pairs=new Array(Ce.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,n,i){this.pairs.length=0,this.startFromEven=!1;try{return Ce.constructResult(this.decodeRow2pairs(e,n))}catch(l){this.verbose&&console.log(l)}return this.pairs.length=0,this.startFromEven=!0,Ce.constructResult(this.decodeRow2pairs(e,n))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,n){let i=!1;for(;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,e))}catch(c){if(c instanceof J){if(!this.pairs.length)throw new J;i=!0}}if(this.checkChecksum())return this.pairs;let l;if(this.rows.length?l=!0:l=!1,this.storeRow(e,!1),l){let c=this.checkRowsBoolean(!1);if(c!=null||(c=this.checkRowsBoolean(!0),c!=null))return c}throw new J}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let n=null;try{n=this.checkRows(new Array,0)}catch(i){this.verbose&&console.log(i)}return e&&(this.rows=this.rows.reverse()),n}checkRows(e,n){for(let i=n;i<this.rows.length;i++){let l=this.rows[i];this.pairs.length=0;for(let u of e)this.pairs.push(u.getPairs());if(this.pairs.push(l.getPairs()),!Ce.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let c=new Array(e);c.push(l);try{return this.checkRows(c,i+1)}catch(u){this.verbose&&console.log(u)}}throw new J}static isValidSequence(e){for(let n of Ce.FINDER_PATTERN_SEQUENCES){if(e.length>n.length)continue;let i=!0;for(let l=0;l<e.length;l++)if(e[l].getFinderPattern().getValue()!=n[l]){i=!1;break}if(i)return!0}return!1}storeRow(e,n){let i=0,l=!1,c=!1;for(;i<this.rows.length;){let u=this.rows[i];if(u.getRowNumber()>e){c=u.isEquivalent(this.pairs);break}l=u.isEquivalent(this.pairs),i++}c||l||Ce.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new Ts(this.pairs,e,n)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,n){for(let i of n)if(i.getPairs().length!==e.length){for(let l of i.getPairs())for(let c of e)if(Nt.equals(l,c))break}}static isPartialRow(e,n){for(let i of n){let l=!0;for(let c of e){let u=!1;for(let h of i.getPairs())if(c.equals(h)){u=!0;break}if(!u){l=!1;break}}if(l)return!0}return!1}getRows(){return this.rows}static constructResult(e){let n=Ei.buildBitArray(e),l=Zt(n).parseInformation(),c=e[0].getFinderPattern().getResultPoints(),u=e[e.length-1].getFinderPattern().getResultPoints(),h=[c[0],c[1],u[0],u[1]];return new be(l,null,null,h,ie.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),n=e.getLeftChar(),i=e.getRightChar();if(i==null)return!1;let l=i.getChecksumPortion(),c=2;for(let h=1;h<this.pairs.size();++h){let g=this.pairs.get(h);l+=g.getLeftChar().getChecksumPortion(),c++;let C=g.getRightChar();C!=null&&(l+=C.getChecksumPortion(),c++)}return l%=211,211*(c-4)+l==n.getValue()}static getNextSecondBar(e,n){let i;return e.get(n)?(i=e.getNextUnset(n),i=e.getNextSet(i)):(i=e.getNextSet(n),i=e.getNextUnset(i)),i}retrieveNextPair(e,n,i){let l=n.length%2==0;this.startFromEven&&(l=!l);let c,u=!0,h=-1;do this.findNextPair(e,n,h),c=this.parseFoundFinderPattern(e,i,l),c==null?h=Ce.getNextSecondBar(e,this.startEnd[0]):u=!1;while(u);let g=this.decodeDataCharacter(e,c,l,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new J;let C;try{C=this.decodeDataCharacter(e,c,l,!1)}catch(_){C=null,this.verbose&&console.log(_)}return new Nt(g,C,c,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,n,i){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u;i>=0?u=i:this.isEmptyPair(n)?u=0:u=n[n.length-1].getFinderPattern().getStartEnd()[1];let h=n.length%2!=0;this.startFromEven&&(h=!h);let g=!1;for(;u<c&&(g=!e.get(u),!!g);)u++;let C=0,_=u;for(let P=u;P<c;P++)if(e.get(P)!=g)l[C]++;else{if(C==3){if(h&&Ce.reverseCounters(l),Ce.isFinderPattern(l)){this.startEnd[0]=_,this.startEnd[1]=P;return}h&&Ce.reverseCounters(l),_+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,C--}else C++;l[C]=1,g=!g}throw new J}static reverseCounters(e){let n=e.length;for(let i=0;i<n/2;++i){let l=e[i];e[i]=e[n-i-1],e[n-i-1]=l}}parseFoundFinderPattern(e,n,i){let l,c,u;if(i){let C=this.startEnd[0]-1;for(;C>=0&&!e.get(C);)C--;C++,l=this.startEnd[0]-C,c=C,u=this.startEnd[1]}else c=this.startEnd[0],u=e.getNextUnset(this.startEnd[1]+1),l=u-this.startEnd[1];let h=this.getDecodeFinderCounters();B.arraycopy(h,0,h,1,h.length-1),h[0]=l;let g;try{g=this.parseFinderValue(h,Ce.FINDER_PATTERNS)}catch{return null}return new Ci(g,[c,u],c,u,n)}decodeDataCharacter(e,n,i,l){let c=this.getDataCharacterCounters();for(let zt=0;zt<c.length;zt++)c[zt]=0;if(l)Ce.recordPatternInReverse(e,n.getStartEnd()[0],c);else{Ce.recordPattern(e,n.getStartEnd()[1],c);for(let zt=0,dn=c.length-1;zt<dn;zt++,dn--){let $n=c[zt];c[zt]=c[dn],c[dn]=$n}}let u=17,h=Je.sum(new Int32Array(c))/u,g=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(h-g)/g>.3)throw new J;let C=this.getOddCounts(),_=this.getEvenCounts(),P=this.getOddRoundingErrors(),D=this.getEvenRoundingErrors();for(let zt=0;zt<c.length;zt++){let dn=1*c[zt]/h,$n=dn+.5;if($n<1){if(dn<.3)throw new J;$n=1}else if($n>8){if(dn>8.7)throw new J;$n=8}let _i=zt/2;zt&1?(_[_i]=$n,D[_i]=dn-$n):(C[_i]=$n,P[_i]=dn-$n)}this.adjustOddEvenCounts(u);let z=4*n.getValue()+(i?0:2)+(l?0:1)-1,Y=0,$=0;for(let zt=C.length-1;zt>=0;zt--){if(Ce.isNotA1left(n,i,l)){let dn=Ce.WEIGHTS[z][2*zt];$+=C[zt]*dn}Y+=C[zt]}let ne=0;for(let zt=_.length-1;zt>=0;zt--)if(Ce.isNotA1left(n,i,l)){let dn=Ce.WEIGHTS[z][2*zt+1];ne+=_[zt]*dn}let ue=$+ne;if(Y&1||Y>13||Y<4)throw new J;let Oe=(13-Y)/2,Me=Ce.SYMBOL_WIDEST[Oe],Ie=9-Me,_t=On.getRSSvalue(C,Me,!0),Et=On.getRSSvalue(_,Ie,!1),or=Ce.EVEN_TOTAL_SUBSET[Oe],Or=Ce.GSUM[Oe],Sn=_t*or+Et+Or;return new xr(Sn,ue)}static isNotA1left(e,n,i){return!(e.getValue()==0&&n&&i)}adjustOddEvenCounts(e){let n=Je.sum(new Int32Array(this.getOddCounts())),i=Je.sum(new Int32Array(this.getEvenCounts())),l=!1,c=!1;n>13?c=!0:n<4&&(l=!0);let u=!1,h=!1;i>13?h=!0:i<4&&(u=!0);let g=n+i-e,C=(n&1)==1,_=(i&1)==0;if(g==1)if(C){if(_)throw new J;c=!0}else{if(!_)throw new J;h=!0}else if(g==-1)if(C){if(_)throw new J;l=!0}else{if(!_)throw new J;u=!0}else if(g==0){if(C){if(!_)throw new J;n<i?(l=!0,h=!0):(c=!0,u=!0)}else if(_)throw new J}else throw new J;if(l){if(c)throw new J;Ce.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&Ce.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(h)throw new J;Ce.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&Ce.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ce.SYMBOL_WIDEST=[7,5,4,3,1],Ce.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ce.GSUM=[0,348,1388,2948,3988],Ce.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ce.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ce.FINDER_PAT_A=0,Ce.FINDER_PAT_B=1,Ce.FINDER_PAT_C=2,Ce.FINDER_PAT_D=3,Ce.FINDER_PAT_E=4,Ce.FINDER_PAT_F=5,Ce.FINDER_PATTERN_SEQUENCES=[[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_C,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_E,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D,Ce.FINDER_PAT_C],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_E,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D,Ce.FINDER_PAT_D,Ce.FINDER_PAT_F],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_E,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_F,Ce.FINDER_PAT_F],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_D],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_E],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_F,Ce.FINDER_PAT_F],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_E,Ce.FINDER_PAT_F,Ce.FINDER_PAT_F]],Ce.MAX_PAIRS=11;class vr extends xr{constructor(e,n,i){super(e,n),this.count=0,this.finderPattern=i}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Bt extends Cn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,n,i){const l=this.decodePair(n,!1,e,i);Bt.addOrTally(this.possibleLeftPairs,l),n.reverse();let c=this.decodePair(n,!0,e,i);Bt.addOrTally(this.possibleRightPairs,c),n.reverse();for(let u of this.possibleLeftPairs)if(u.getCount()>1){for(let h of this.possibleRightPairs)if(h.getCount()>1&&Bt.checkChecksum(u,h))return Bt.constructResult(u,h)}throw new J}static addOrTally(e,n){if(n==null)return;let i=!1;for(let l of e)if(l.getValue()===n.getValue()){l.incrementCount(),i=!0;break}i||e.push(n)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,n){let i=4537077*e.getValue()+n.getValue(),l=new String(i).toString(),c=new Ne;for(let C=13-l.length;C>0;C--)c.append("0");c.append(l);let u=0;for(let C=0;C<13;C++){let _=c.charAt(C).charCodeAt(0)-48;u+=C&1?_:3*_}u=10-u%10,u===10&&(u=0),c.append(u.toString());let h=e.getFinderPattern().getResultPoints(),g=n.getFinderPattern().getResultPoints();return new be(c.toString(),null,0,[h[0],h[1],g[0],g[1]],ie.RSS_14,new Date().getTime())}static checkChecksum(e,n){let i=(e.getChecksumPortion()+16*n.getChecksumPortion())%79,l=9*e.getFinderPattern().getValue()+n.getFinderPattern().getValue();return l>72&&l--,l>8&&l--,i===l}decodePair(e,n,i,l){try{let c=this.findFinderPattern(e,n),u=this.parseFoundFinderPattern(e,i,n,c),h=l==null?null:l.get(re.NEED_RESULT_POINT_CALLBACK);if(h!=null){let _=(c[0]+c[1])/2;n&&(_=e.getSize()-1-_),h.foundPossibleResultPoint(new je(_,i))}let g=this.decodeDataCharacter(e,u,!0),C=this.decodeDataCharacter(e,u,!1);return new vr(1597*g.getValue()+C.getValue(),g.getChecksumPortion()+4*C.getChecksumPortion(),u)}catch{return null}}decodeDataCharacter(e,n,i){let l=this.getDataCharacterCounters();for(let ne=0;ne<l.length;ne++)l[ne]=0;if(i)_e.recordPatternInReverse(e,n.getStartEnd()[0],l);else{_e.recordPattern(e,n.getStartEnd()[1]+1,l);for(let ne=0,ue=l.length-1;ne<ue;ne++,ue--){let Oe=l[ne];l[ne]=l[ue],l[ue]=Oe}}let c=i?16:15,u=Je.sum(new Int32Array(l))/c,h=this.getOddCounts(),g=this.getEvenCounts(),C=this.getOddRoundingErrors(),_=this.getEvenRoundingErrors();for(let ne=0;ne<l.length;ne++){let ue=l[ne]/u,Oe=Math.floor(ue+.5);Oe<1?Oe=1:Oe>8&&(Oe=8);let Me=Math.floor(ne/2);ne&1?(g[Me]=Oe,_[Me]=ue-Oe):(h[Me]=Oe,C[Me]=ue-Oe)}this.adjustOddEvenCounts(i,c);let P=0,D=0;for(let ne=h.length-1;ne>=0;ne--)D*=9,D+=h[ne],P+=h[ne];let z=0,Y=0;for(let ne=g.length-1;ne>=0;ne--)z*=9,z+=g[ne],Y+=g[ne];let $=D+3*z;if(i){if(P&1||P>12||P<4)throw new J;let ne=(12-P)/2,ue=Bt.OUTSIDE_ODD_WIDEST[ne],Oe=9-ue,Me=On.getRSSvalue(h,ue,!1),Ie=On.getRSSvalue(g,Oe,!0),_t=Bt.OUTSIDE_EVEN_TOTAL_SUBSET[ne],Et=Bt.OUTSIDE_GSUM[ne];return new xr(Me*_t+Ie+Et,$)}else{if(Y&1||Y>10||Y<4)throw new J;let ne=(10-Y)/2,ue=Bt.INSIDE_ODD_WIDEST[ne],Oe=9-ue,Me=On.getRSSvalue(h,ue,!0),Ie=On.getRSSvalue(g,Oe,!1),_t=Bt.INSIDE_ODD_TOTAL_SUBSET[ne],Et=Bt.INSIDE_GSUM[ne];return new xr(Ie*_t+Me+Et,$)}}findFinderPattern(e,n){let i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;let l=e.getSize(),c=!1,u=0;for(;u<l&&(c=!e.get(u),n!==c);)u++;let h=0,g=u;for(let C=u;C<l;C++)if(e.get(C)!==c)i[h]++;else{if(h===3){if(Cn.isFinderPattern(i))return[g,C];g+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,h--}else h++;i[h]=1,c=!c}throw new J}parseFoundFinderPattern(e,n,i,l){let c=e.get(l[0]),u=l[0]-1;for(;u>=0&&c!==e.get(u);)u--;u++;const h=l[0]-u,g=this.getDecodeFinderCounters(),C=new Int32Array(g.length);B.arraycopy(g,0,C,1,g.length-1),C[0]=h;const _=this.parseFinderValue(C,Bt.FINDER_PATTERNS);let P=u,D=l[1];return i&&(P=e.getSize()-1-P,D=e.getSize()-1-D),new Ci(_,[u,l[1]],P,D,n)}adjustOddEvenCounts(e,n){let i=Je.sum(new Int32Array(this.getOddCounts())),l=Je.sum(new Int32Array(this.getEvenCounts())),c=!1,u=!1,h=!1,g=!1;e?(i>12?u=!0:i<4&&(c=!0),l>12?g=!0:l<4&&(h=!0)):(i>11?u=!0:i<5&&(c=!0),l>10?g=!0:l<4&&(h=!0));let C=i+l-n,_=(i&1)===(e?1:0),P=(l&1)===1;if(C===1)if(_){if(P)throw new J;u=!0}else{if(!P)throw new J;g=!0}else if(C===-1)if(_){if(P)throw new J;c=!0}else{if(!P)throw new J;h=!0}else if(C===0){if(_){if(!P)throw new J;i<l?(c=!0,g=!0):(u=!0,h=!0)}else if(P)throw new J}else throw new J;if(c){if(u)throw new J;Cn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&Cn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(g)throw new J;Cn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}g&&Cn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Bt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Bt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Bt.OUTSIDE_GSUM=[0,161,961,2015,2715],Bt.INSIDE_GSUM=[0,336,1036,1516],Bt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Bt.INSIDE_ODD_WIDEST=[2,4,6,8],Bt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Si extends _e{constructor(e,n){super(),this.readers=[],this.verbose=n===!0;const i=e?e.get(re.POSSIBLE_FORMATS):null,l=e&&e.get(re.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;i?((i.includes(ie.EAN_13)||i.includes(ie.UPC_A)||i.includes(ie.EAN_8)||i.includes(ie.UPC_E))&&this.readers.push(new Wi(e)),i.includes(ie.CODE_39)&&this.readers.push(new ct(l)),i.includes(ie.CODE_128)&&this.readers.push(new me),i.includes(ie.ITF)&&this.readers.push(new et),i.includes(ie.RSS_14)&&this.readers.push(new Bt),i.includes(ie.RSS_EXPANDED)&&this.readers.push(new Ce(this.verbose))):(this.readers.push(new Wi(e)),this.readers.push(new ct),this.readers.push(new Wi(e)),this.readers.push(new me),this.readers.push(new et),this.readers.push(new Bt),this.readers.push(new Ce(this.verbose)))}decodeRow(e,n,i){for(let l=0;l<this.readers.length;l++)try{return this.readers[l].decodeRow(e,n,i)}catch{}throw new J}reset(){this.readers.forEach(e=>e.reset())}}class Gi extends we{constructor(e=500,n){super(new Si(n),e,n)}}class Pt{constructor(e,n,i){this.ecCodewords=e,this.ecBlocks=[n],i&&this.ecBlocks.push(i)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class At{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Mt{constructor(e,n,i,l,c,u){this.versionNumber=e,this.symbolSizeRows=n,this.symbolSizeColumns=i,this.dataRegionSizeRows=l,this.dataRegionSizeColumns=c,this.ecBlocks=u;let h=0;const g=u.getECCodewords(),C=u.getECBlocks();for(let _ of C)h+=_.getCount()*(_.getDataCodewords()+g);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,n){if(e&1||n&1)throw new X;for(let i of Mt.VERSIONS)if(i.symbolSizeRows===e&&i.symbolSizeColumns===n)return i;throw new X}toString(){return""+this.versionNumber}static buildVersions(){return[new Mt(1,10,10,8,8,new Pt(5,new At(1,3))),new Mt(2,12,12,10,10,new Pt(7,new At(1,5))),new Mt(3,14,14,12,12,new Pt(10,new At(1,8))),new Mt(4,16,16,14,14,new Pt(12,new At(1,12))),new Mt(5,18,18,16,16,new Pt(14,new At(1,18))),new Mt(6,20,20,18,18,new Pt(18,new At(1,22))),new Mt(7,22,22,20,20,new Pt(20,new At(1,30))),new Mt(8,24,24,22,22,new Pt(24,new At(1,36))),new Mt(9,26,26,24,24,new Pt(28,new At(1,44))),new Mt(10,32,32,14,14,new Pt(36,new At(1,62))),new Mt(11,36,36,16,16,new Pt(42,new At(1,86))),new Mt(12,40,40,18,18,new Pt(48,new At(1,114))),new Mt(13,44,44,20,20,new Pt(56,new At(1,144))),new Mt(14,48,48,22,22,new Pt(68,new At(1,174))),new Mt(15,52,52,24,24,new Pt(42,new At(2,102))),new Mt(16,64,64,14,14,new Pt(56,new At(2,140))),new Mt(17,72,72,16,16,new Pt(36,new At(4,92))),new Mt(18,80,80,18,18,new Pt(48,new At(4,114))),new Mt(19,88,88,20,20,new Pt(56,new At(4,144))),new Mt(20,96,96,22,22,new Pt(68,new At(4,174))),new Mt(21,104,104,24,24,new Pt(56,new At(6,136))),new Mt(22,120,120,18,18,new Pt(68,new At(6,175))),new Mt(23,132,132,20,20,new Pt(62,new At(8,163))),new Mt(24,144,144,22,22,new Pt(62,new At(8,156),new At(2,155))),new Mt(25,8,18,6,16,new Pt(7,new At(1,5))),new Mt(26,8,32,6,14,new Pt(11,new At(1,10))),new Mt(27,12,26,10,24,new Pt(14,new At(1,16))),new Mt(28,12,36,10,16,new Pt(18,new At(1,22))),new Mt(29,16,36,14,16,new Pt(24,new At(1,32))),new Mt(30,16,48,14,22,new Pt(28,new At(1,49)))]}}Mt.VERSIONS=Mt.buildVersions();class fr{constructor(e){const n=e.getHeight();if(n<8||n>144||n&1)throw new X;this.version=fr.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Ee(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const n=e.getHeight(),i=e.getWidth();return Mt.getVersionForDimensions(n,i)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let n=0,i=4,l=0;const c=this.mappingBitMatrix.getHeight(),u=this.mappingBitMatrix.getWidth();let h=!1,g=!1,C=!1,_=!1;do if(i===c&&l===0&&!h)e[n++]=this.readCorner1(c,u)&255,i-=2,l+=2,h=!0;else if(i===c-2&&l===0&&u&3&&!g)e[n++]=this.readCorner2(c,u)&255,i-=2,l+=2,g=!0;else if(i===c+4&&l===2&&!(u&7)&&!C)e[n++]=this.readCorner3(c,u)&255,i-=2,l+=2,C=!0;else if(i===c-2&&l===0&&(u&7)===4&&!_)e[n++]=this.readCorner4(c,u)&255,i-=2,l+=2,_=!0;else{do i<c&&l>=0&&!this.readMappingMatrix.get(l,i)&&(e[n++]=this.readUtah(i,l,c,u)&255),i-=2,l+=2;while(i>=0&&l<u);i+=1,l+=3;do i>=0&&l<u&&!this.readMappingMatrix.get(l,i)&&(e[n++]=this.readUtah(i,l,c,u)&255),i+=2,l-=2;while(i<c&&l>=0);i+=3,l+=1}while(i<c||l<u);if(n!==this.version.getTotalCodewords())throw new X;return e}readModule(e,n,i,l){return e<0&&(e+=i,n+=4-(i+4&7)),n<0&&(n+=l,e+=4-(l+4&7)),this.readMappingMatrix.set(n,e),this.mappingBitMatrix.get(n,e)}readUtah(e,n,i,l){let c=0;return this.readModule(e-2,n-2,i,l)&&(c|=1),c<<=1,this.readModule(e-2,n-1,i,l)&&(c|=1),c<<=1,this.readModule(e-1,n-2,i,l)&&(c|=1),c<<=1,this.readModule(e-1,n-1,i,l)&&(c|=1),c<<=1,this.readModule(e-1,n,i,l)&&(c|=1),c<<=1,this.readModule(e,n-2,i,l)&&(c|=1),c<<=1,this.readModule(e,n-1,i,l)&&(c|=1),c<<=1,this.readModule(e,n,i,l)&&(c|=1),c}readCorner1(e,n){let i=0;return this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,1,e,n)&&(i|=1),i<<=1,this.readModule(e-1,2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(2,n-1,e,n)&&(i|=1),i<<=1,this.readModule(3,n-1,e,n)&&(i|=1),i}readCorner2(e,n){let i=0;return this.readModule(e-3,0,e,n)&&(i|=1),i<<=1,this.readModule(e-2,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(0,n-4,e,n)&&(i|=1),i<<=1,this.readModule(0,n-3,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i}readCorner3(e,n){let i=0;return this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(0,n-3,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-3,e,n)&&(i|=1),i<<=1,this.readModule(1,n-2,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i}readCorner4(e,n){let i=0;return this.readModule(e-3,0,e,n)&&(i|=1),i<<=1,this.readModule(e-2,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(2,n-1,e,n)&&(i|=1),i<<=1,this.readModule(3,n-1,e,n)&&(i|=1),i}extractDataRegion(e){const n=this.version.getSymbolSizeRows(),i=this.version.getSymbolSizeColumns();if(e.getHeight()!==n)throw new N("Dimension of bitMatrix must match the version size");const l=this.version.getDataRegionSizeRows(),c=this.version.getDataRegionSizeColumns(),u=n/l|0,h=i/c|0,g=u*l,C=h*c,_=new Ee(C,g);for(let P=0;P<u;++P){const D=P*l;for(let z=0;z<h;++z){const Y=z*c;for(let $=0;$<l;++$){const ne=P*(l+2)+1+$,ue=D+$;for(let Oe=0;Oe<c;++Oe){const Me=z*(c+2)+1+Oe;if(e.get(Me,ne)){const Ie=Y+Oe;_.set(Ie,ue)}}}}}return _}}class Ho{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n){const i=n.getECBlocks();let l=0;const c=i.getECBlocks();for(let $ of c)l+=$.getCount();const u=new Array(l);let h=0;for(let $ of c)for(let ne=0;ne<$.getCount();ne++){const ue=$.getDataCodewords(),Oe=i.getECCodewords()+ue;u[h++]=new Ho(ue,new Uint8Array(Oe))}const C=u[0].codewords.length-i.getECCodewords(),_=C-1;let P=0;for(let $=0;$<_;$++)for(let ne=0;ne<h;ne++)u[ne].codewords[$]=e[P++];const D=n.getVersionNumber()===24,z=D?8:h;for(let $=0;$<z;$++)u[$].codewords[C-1]=e[P++];const Y=u[0].codewords.length;for(let $=C;$<Y;$++)for(let ne=0;ne<h;ne++){const ue=D?(ne+8)%h:ne,Oe=D&&ue>7?$-1:$;u[ue].codewords[Oe]=e[P++]}if(P!==e.length)throw new N;return u}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Go{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new N(""+e);let n=0,i=this.bitOffset,l=this.byteOffset;const c=this.bytes;if(i>0){const u=8-i,h=e<u?e:u,g=u-h,C=255>>8-h<<g;n=(c[l]&C)>>g,e-=h,i+=h,i===8&&(i=0,l++)}if(e>0){for(;e>=8;)n=n<<8|c[l]&255,l++,e-=8;if(e>0){const u=8-e,h=255>>u<<u;n=n<<e|(c[l]&h)>>u,i+=e}}return this.bitOffset=i,this.byteOffset=l,n}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var En;(function(k){k[k.PAD_ENCODE=0]="PAD_ENCODE",k[k.ASCII_ENCODE=1]="ASCII_ENCODE",k[k.C40_ENCODE=2]="C40_ENCODE",k[k.TEXT_ENCODE=3]="TEXT_ENCODE",k[k.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",k[k.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",k[k.BASE256_ENCODE=6]="BASE256_ENCODE"})(En||(En={}));class _r{static decode(e){const n=new Go(e),i=new Ne,l=new Ne,c=new Array;let u=En.ASCII_ENCODE;do if(u===En.ASCII_ENCODE)u=this.decodeAsciiSegment(n,i,l);else{switch(u){case En.C40_ENCODE:this.decodeC40Segment(n,i);break;case En.TEXT_ENCODE:this.decodeTextSegment(n,i);break;case En.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,i);break;case En.EDIFACT_ENCODE:this.decodeEdifactSegment(n,i);break;case En.BASE256_ENCODE:this.decodeBase256Segment(n,i,c);break;default:throw new X}u=En.ASCII_ENCODE}while(u!==En.PAD_ENCODE&&n.available()>0);return l.length()>0&&i.append(l.toString()),new Be(e,i.toString(),c.length===0?null:c,null)}static decodeAsciiSegment(e,n,i){let l=!1;do{let c=e.readBits(8);if(c===0)throw new X;if(c<=128)return l&&(c+=128),n.append(String.fromCharCode(c-1)),En.ASCII_ENCODE;if(c===129)return En.PAD_ENCODE;if(c<=229){const u=c-130;u<10&&n.append("0"),n.append(""+u)}else switch(c){case 230:return En.C40_ENCODE;case 231:return En.BASE256_ENCODE;case 232:n.append("");break;case 233:case 234:break;case 235:l=!0;break;case 236:n.append("[)>05"),i.insert(0,"");break;case 237:n.append("[)>06"),i.insert(0,"");break;case 238:return En.ANSIX12_ENCODE;case 239:return En.TEXT_ENCODE;case 240:return En.EDIFACT_ENCODE;case 241:break;default:if(c!==254||e.available()!==0)throw new X;break}}while(e.available()>0);return En.ASCII_ENCODE}static decodeC40Segment(e,n){let i=!1;const l=[];let c=0;do{if(e.available()===8)return;const u=e.readBits(8);if(u===254)return;this.parseTwoBytes(u,e.readBits(8),l);for(let h=0;h<3;h++){const g=l[h];switch(c){case 0:if(g<3)c=g+1;else if(g<this.C40_BASIC_SET_CHARS.length){const C=this.C40_BASIC_SET_CHARS[g];i?(n.append(String.fromCharCode(C.charCodeAt(0)+128)),i=!1):n.append(C)}else throw new X;break;case 1:i?(n.append(String.fromCharCode(g+128)),i=!1):n.append(String.fromCharCode(g)),c=0;break;case 2:if(g<this.C40_SHIFT2_SET_CHARS.length){const C=this.C40_SHIFT2_SET_CHARS[g];i?(n.append(String.fromCharCode(C.charCodeAt(0)+128)),i=!1):n.append(C)}else switch(g){case 27:n.append("");break;case 30:i=!0;break;default:throw new X}c=0;break;case 3:i?(n.append(String.fromCharCode(g+224)),i=!1):n.append(String.fromCharCode(g+96)),c=0;break;default:throw new X}}}while(e.available()>0)}static decodeTextSegment(e,n){let i=!1,l=[],c=0;do{if(e.available()===8)return;const u=e.readBits(8);if(u===254)return;this.parseTwoBytes(u,e.readBits(8),l);for(let h=0;h<3;h++){const g=l[h];switch(c){case 0:if(g<3)c=g+1;else if(g<this.TEXT_BASIC_SET_CHARS.length){const C=this.TEXT_BASIC_SET_CHARS[g];i?(n.append(String.fromCharCode(C.charCodeAt(0)+128)),i=!1):n.append(C)}else throw new X;break;case 1:i?(n.append(String.fromCharCode(g+128)),i=!1):n.append(String.fromCharCode(g)),c=0;break;case 2:if(g<this.TEXT_SHIFT2_SET_CHARS.length){const C=this.TEXT_SHIFT2_SET_CHARS[g];i?(n.append(String.fromCharCode(C.charCodeAt(0)+128)),i=!1):n.append(C)}else switch(g){case 27:n.append("");break;case 30:i=!0;break;default:throw new X}c=0;break;case 3:if(g<this.TEXT_SHIFT3_SET_CHARS.length){const C=this.TEXT_SHIFT3_SET_CHARS[g];i?(n.append(String.fromCharCode(C.charCodeAt(0)+128)),i=!1):n.append(C),c=0}else throw new X;break;default:throw new X}}}while(e.available()>0)}static decodeAnsiX12Segment(e,n){const i=[];do{if(e.available()===8)return;const l=e.readBits(8);if(l===254)return;this.parseTwoBytes(l,e.readBits(8),i);for(let c=0;c<3;c++){const u=i[c];switch(u){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(u<14)n.append(String.fromCharCode(u+44));else if(u<40)n.append(String.fromCharCode(u+51));else throw new X;break}}}while(e.available()>0)}static parseTwoBytes(e,n,i){let l=(e<<8)+n-1,c=Math.floor(l/1600);i[0]=c,l-=c*1600,c=Math.floor(l/40),i[1]=c,i[2]=l-c*40}static decodeEdifactSegment(e,n){do{if(e.available()<=16)return;for(let i=0;i<4;i++){let l=e.readBits(6);if(l===31){const c=8-e.getBitOffset();c!==8&&e.readBits(c);return}l&32||(l|=64),n.append(String.fromCharCode(l))}}while(e.available()>0)}static decodeBase256Segment(e,n,i){let l=1+e.getByteOffset();const c=this.unrandomize255State(e.readBits(8),l++);let u;if(c===0?u=e.available()/8|0:c<250?u=c:u=250*(c-249)+this.unrandomize255State(e.readBits(8),l++),u<0)throw new X;const h=new Uint8Array(u);for(let g=0;g<u;g++){if(e.available()<8)throw new X;h[g]=this.unrandomize255State(e.readBits(8),l++)}i.push(h);try{n.append(Le.decode(h,Se.ISO88591))}catch(g){throw new Ze("Platform does not support required encoding: "+g.message)}}static unrandomize255State(e,n){const i=149*n%255+1,l=e-i;return l>=0?l:l+256}}_r.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],_r.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],_r.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],_r.TEXT_SHIFT2_SET_CHARS=_r.C40_SHIFT2_SET_CHARS,_r.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class ro{constructor(){this.rsDecoder=new Rt(xe.DATA_MATRIX_FIELD_256)}decode(e){const n=new fr(e),i=n.getVersion(),l=n.readCodewords(),c=Ho.getDataBlocks(l,i);let u=0;for(let C of c)u+=C.getNumDataCodewords();const h=new Uint8Array(u),g=c.length;for(let C=0;C<g;C++){const _=c[C],P=_.getCodewords(),D=_.getNumDataCodewords();this.correctErrors(P,D);for(let z=0;z<D;z++)h[z*g+C]=P[z]}return _r.decode(h)}correctErrors(e,n){const i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-n)}catch{throw new M}for(let l=0;l<n;l++)e[l]=i[l]}}class $t{constructor(e){this.image=e,this.rectangleDetector=new Ue(this.image)}detect(){const e=this.rectangleDetector.detect();let n=this.detectSolid1(e);if(n=this.detectSolid2(n),n[3]=this.correctTopRight(n),!n[3])throw new J;n=this.shiftToModuleCenter(n);const i=n[0],l=n[1],c=n[2],u=n[3];let h=this.transitionsBetween(i,u)+1,g=this.transitionsBetween(c,u)+1;(h&1)===1&&(h+=1),(g&1)===1&&(g+=1),4*h<7*g&&4*g<7*h&&(h=g=Math.max(h,g));let C=$t.sampleGrid(this.image,i,l,c,u,h,g);return new Wt(C,[i,l,c,u])}static shiftPoint(e,n,i){let l=(n.getX()-e.getX())/(i+1),c=(n.getY()-e.getY())/(i+1);return new je(e.getX()+l,e.getY()+c)}static moveAway(e,n,i){let l=e.getX(),c=e.getY();return l<n?l-=1:l+=1,c<i?c-=1:c+=1,new je(l,c)}detectSolid1(e){let n=e[0],i=e[1],l=e[3],c=e[2],u=this.transitionsBetween(n,i),h=this.transitionsBetween(i,l),g=this.transitionsBetween(l,c),C=this.transitionsBetween(c,n),_=u,P=[c,n,i,l];return _>h&&(_=h,P[0]=n,P[1]=i,P[2]=l,P[3]=c),_>g&&(_=g,P[0]=i,P[1]=l,P[2]=c,P[3]=n),_>C&&(P[0]=l,P[1]=c,P[2]=n,P[3]=i),P}detectSolid2(e){let n=e[0],i=e[1],l=e[2],c=e[3],u=this.transitionsBetween(n,c),h=$t.shiftPoint(i,l,(u+1)*4),g=$t.shiftPoint(l,i,(u+1)*4),C=this.transitionsBetween(h,n),_=this.transitionsBetween(g,c);return C<_?(e[0]=n,e[1]=i,e[2]=l,e[3]=c):(e[0]=i,e[1]=l,e[2]=c,e[3]=n),e}correctTopRight(e){let n=e[0],i=e[1],l=e[2],c=e[3],u=this.transitionsBetween(n,c),h=this.transitionsBetween(i,c),g=$t.shiftPoint(n,i,(h+1)*4),C=$t.shiftPoint(l,i,(u+1)*4);u=this.transitionsBetween(g,c),h=this.transitionsBetween(C,c);let _=new je(c.getX()+(l.getX()-i.getX())/(u+1),c.getY()+(l.getY()-i.getY())/(u+1)),P=new je(c.getX()+(n.getX()-i.getX())/(h+1),c.getY()+(n.getY()-i.getY())/(h+1));if(!this.isValid(_))return this.isValid(P)?P:null;if(!this.isValid(P))return _;let D=this.transitionsBetween(g,_)+this.transitionsBetween(C,_),z=this.transitionsBetween(g,P)+this.transitionsBetween(C,P);return D>z?_:P}shiftToModuleCenter(e){let n=e[0],i=e[1],l=e[2],c=e[3],u=this.transitionsBetween(n,c)+1,h=this.transitionsBetween(l,c)+1,g=$t.shiftPoint(n,i,h*4),C=$t.shiftPoint(l,i,u*4);u=this.transitionsBetween(g,c)+1,h=this.transitionsBetween(C,c)+1,(u&1)===1&&(u+=1),(h&1)===1&&(h+=1);let _=(n.getX()+i.getX()+l.getX()+c.getX())/4,P=(n.getY()+i.getY()+l.getY()+c.getY())/4;n=$t.moveAway(n,_,P),i=$t.moveAway(i,_,P),l=$t.moveAway(l,_,P),c=$t.moveAway(c,_,P);let D,z;return g=$t.shiftPoint(n,i,h*4),g=$t.shiftPoint(g,c,u*4),D=$t.shiftPoint(i,n,h*4),D=$t.shiftPoint(D,l,u*4),C=$t.shiftPoint(l,c,h*4),C=$t.shiftPoint(C,i,u*4),z=$t.shiftPoint(c,l,h*4),z=$t.shiftPoint(z,n,u*4),[g,D,C,z]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,n,i,l,c,u,h){return Ke.getInstance().sampleGrid(e,u,h,.5,.5,u-.5,.5,u-.5,h-.5,.5,h-.5,n.getX(),n.getY(),c.getX(),c.getY(),l.getX(),l.getY(),i.getX(),i.getY())}transitionsBetween(e,n){let i=Math.trunc(e.getX()),l=Math.trunc(e.getY()),c=Math.trunc(n.getX()),u=Math.trunc(n.getY()),h=Math.abs(u-l)>Math.abs(c-i);if(h){let $=i;i=l,l=$,$=c,c=u,u=$}let g=Math.abs(c-i),C=Math.abs(u-l),_=-g/2,P=l<u?1:-1,D=i<c?1:-1,z=0,Y=this.image.get(h?l:i,h?i:l);for(let $=i,ne=l;$!==c;$+=D){let ue=this.image.get(h?ne:$,h?$:ne);if(ue!==Y&&(z++,Y=ue),_+=C,_>0){if(ne===u)break;ne+=P,_-=g}}return z}}class Rr{constructor(){this.decoder=new ro}decode(e,n=null){let i,l;if(n!=null&&n.has(re.PURE_BARCODE)){const C=Rr.extractPureBits(e.getBlackMatrix());i=this.decoder.decode(C),l=Rr.NO_POINTS}else{const C=new $t(e.getBlackMatrix()).detect();i=this.decoder.decode(C.getBits()),l=C.getPoints()}const c=i.getRawBytes(),u=new be(i.getText(),c,8*c.length,l,ie.DATA_MATRIX,B.currentTimeMillis()),h=i.getByteSegments();h!=null&&u.putMetadata(ve.BYTE_SEGMENTS,h);const g=i.getECLevel();return g!=null&&u.putMetadata(ve.ERROR_CORRECTION_LEVEL,g),u}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(n==null||i==null)throw new J;const l=this.moduleSize(n,e);let c=n[1];const u=i[1];let h=n[0];const C=(i[0]-h+1)/l,_=(u-c+1)/l;if(C<=0||_<=0)throw new J;const P=l/2;c+=P,h+=P;const D=new Ee(C,_);for(let z=0;z<_;z++){const Y=c+z*l;for(let $=0;$<C;$++)e.get(h+$*l,Y)&&D.set($,z)}return D}static moduleSize(e,n){const i=n.getWidth();let l=e[0];const c=e[1];for(;l<i&&n.get(l,c);)l++;if(l===i)throw new J;const u=l-e[0];if(u===0)throw new J;return u}}Rr.NO_POINTS=[];class Vc extends we{constructor(e=500){super(new Rr,e)}}var Xi;(function(k){k[k.L=0]="L",k[k.M=1]="M",k[k.Q=2]="Q",k[k.H=3]="H"})(Xi||(Xi={}));class Gt{constructor(e,n,i){this.value=e,this.stringValue=n,this.bits=i,Gt.FOR_BITS.set(i,this),Gt.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return Gt.L;case"M":return Gt.M;case"Q":return Gt.Q;case"H":return Gt.H;default:throw new A(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof Gt))return!1;const n=e;return this.value===n.value}static forBits(e){if(e<0||e>=Gt.FOR_BITS.size)throw new N;return Gt.FOR_BITS.get(e)}}Gt.FOR_BITS=new Map,Gt.FOR_VALUE=new Map,Gt.L=new Gt(Xi.L,"L",1),Gt.M=new Gt(Xi.M,"M",0),Gt.Q=new Gt(Xi.Q,"Q",3),Gt.H=new Gt(Xi.H,"H",2);class Dn{constructor(e){this.errorCorrectionLevel=Gt.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,n){return F.bitCount(e^n)}static decodeFormatInformation(e,n){const i=Dn.doDecodeFormatInformation(e,n);return i!==null?i:Dn.doDecodeFormatInformation(e^Dn.FORMAT_INFO_MASK_QR,n^Dn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,n){let i=Number.MAX_SAFE_INTEGER,l=0;for(const c of Dn.FORMAT_INFO_DECODE_LOOKUP){const u=c[0];if(u===e||u===n)return new Dn(c[1]);let h=Dn.numBitsDiffering(e,u);h<i&&(l=c[1],i=h),e!==n&&(h=Dn.numBitsDiffering(n,u),h<i&&(l=c[1],i=h))}return i<=3?new Dn(l):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof Dn))return!1;const n=e;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask}}Dn.FORMAT_INFO_MASK_QR=21522,Dn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class se{constructor(e,...n){this.ecCodewordsPerBlock=e,this.ecBlocks=n}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const n=this.ecBlocks;for(const i of n)e+=i.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class V{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ot{constructor(e,n,...i){this.versionNumber=e,this.alignmentPatternCenters=n,this.ecBlocks=i;let l=0;const c=i[0].getECCodewordsPerBlock(),u=i[0].getECBlocks();for(const h of u)l+=h.getCount()*(h.getDataCodewords()+c);this.totalCodewords=l}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new X;try{return this.getVersionForNumber((e-17)/4)}catch{throw new X}}static getVersionForNumber(e){if(e<1||e>40)throw new N;return ot.VERSIONS[e-1]}static decodeVersionInformation(e){let n=Number.MAX_SAFE_INTEGER,i=0;for(let l=0;l<ot.VERSION_DECODE_INFO.length;l++){const c=ot.VERSION_DECODE_INFO[l];if(c===e)return ot.getVersionForNumber(l+7);const u=Dn.numBitsDiffering(e,c);u<n&&(i=l+7,n=u)}return n<=3?ot.getVersionForNumber(i):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),n=new Ee(e);n.setRegion(0,0,9,9),n.setRegion(e-8,0,8,9),n.setRegion(0,e-8,9,8);const i=this.alignmentPatternCenters.length;for(let l=0;l<i;l++){const c=this.alignmentPatternCenters[l]-2;for(let u=0;u<i;u++)l===0&&(u===0||u===i-1)||l===i-1&&u===0||n.setRegion(this.alignmentPatternCenters[u]-2,c,5,5)}return n.setRegion(6,9,1,e-17),n.setRegion(9,6,e-17,1),this.versionNumber>6&&(n.setRegion(e-11,0,3,6),n.setRegion(0,e-11,6,3)),n}toString(){return""+this.versionNumber}}ot.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ot.VERSIONS=[new ot(1,new Int32Array(0),new se(7,new V(1,19)),new se(10,new V(1,16)),new se(13,new V(1,13)),new se(17,new V(1,9))),new ot(2,Int32Array.from([6,18]),new se(10,new V(1,34)),new se(16,new V(1,28)),new se(22,new V(1,22)),new se(28,new V(1,16))),new ot(3,Int32Array.from([6,22]),new se(15,new V(1,55)),new se(26,new V(1,44)),new se(18,new V(2,17)),new se(22,new V(2,13))),new ot(4,Int32Array.from([6,26]),new se(20,new V(1,80)),new se(18,new V(2,32)),new se(26,new V(2,24)),new se(16,new V(4,9))),new ot(5,Int32Array.from([6,30]),new se(26,new V(1,108)),new se(24,new V(2,43)),new se(18,new V(2,15),new V(2,16)),new se(22,new V(2,11),new V(2,12))),new ot(6,Int32Array.from([6,34]),new se(18,new V(2,68)),new se(16,new V(4,27)),new se(24,new V(4,19)),new se(28,new V(4,15))),new ot(7,Int32Array.from([6,22,38]),new se(20,new V(2,78)),new se(18,new V(4,31)),new se(18,new V(2,14),new V(4,15)),new se(26,new V(4,13),new V(1,14))),new ot(8,Int32Array.from([6,24,42]),new se(24,new V(2,97)),new se(22,new V(2,38),new V(2,39)),new se(22,new V(4,18),new V(2,19)),new se(26,new V(4,14),new V(2,15))),new ot(9,Int32Array.from([6,26,46]),new se(30,new V(2,116)),new se(22,new V(3,36),new V(2,37)),new se(20,new V(4,16),new V(4,17)),new se(24,new V(4,12),new V(4,13))),new ot(10,Int32Array.from([6,28,50]),new se(18,new V(2,68),new V(2,69)),new se(26,new V(4,43),new V(1,44)),new se(24,new V(6,19),new V(2,20)),new se(28,new V(6,15),new V(2,16))),new ot(11,Int32Array.from([6,30,54]),new se(20,new V(4,81)),new se(30,new V(1,50),new V(4,51)),new se(28,new V(4,22),new V(4,23)),new se(24,new V(3,12),new V(8,13))),new ot(12,Int32Array.from([6,32,58]),new se(24,new V(2,92),new V(2,93)),new se(22,new V(6,36),new V(2,37)),new se(26,new V(4,20),new V(6,21)),new se(28,new V(7,14),new V(4,15))),new ot(13,Int32Array.from([6,34,62]),new se(26,new V(4,107)),new se(22,new V(8,37),new V(1,38)),new se(24,new V(8,20),new V(4,21)),new se(22,new V(12,11),new V(4,12))),new ot(14,Int32Array.from([6,26,46,66]),new se(30,new V(3,115),new V(1,116)),new se(24,new V(4,40),new V(5,41)),new se(20,new V(11,16),new V(5,17)),new se(24,new V(11,12),new V(5,13))),new ot(15,Int32Array.from([6,26,48,70]),new se(22,new V(5,87),new V(1,88)),new se(24,new V(5,41),new V(5,42)),new se(30,new V(5,24),new V(7,25)),new se(24,new V(11,12),new V(7,13))),new ot(16,Int32Array.from([6,26,50,74]),new se(24,new V(5,98),new V(1,99)),new se(28,new V(7,45),new V(3,46)),new se(24,new V(15,19),new V(2,20)),new se(30,new V(3,15),new V(13,16))),new ot(17,Int32Array.from([6,30,54,78]),new se(28,new V(1,107),new V(5,108)),new se(28,new V(10,46),new V(1,47)),new se(28,new V(1,22),new V(15,23)),new se(28,new V(2,14),new V(17,15))),new ot(18,Int32Array.from([6,30,56,82]),new se(30,new V(5,120),new V(1,121)),new se(26,new V(9,43),new V(4,44)),new se(28,new V(17,22),new V(1,23)),new se(28,new V(2,14),new V(19,15))),new ot(19,Int32Array.from([6,30,58,86]),new se(28,new V(3,113),new V(4,114)),new se(26,new V(3,44),new V(11,45)),new se(26,new V(17,21),new V(4,22)),new se(26,new V(9,13),new V(16,14))),new ot(20,Int32Array.from([6,34,62,90]),new se(28,new V(3,107),new V(5,108)),new se(26,new V(3,41),new V(13,42)),new se(30,new V(15,24),new V(5,25)),new se(28,new V(15,15),new V(10,16))),new ot(21,Int32Array.from([6,28,50,72,94]),new se(28,new V(4,116),new V(4,117)),new se(26,new V(17,42)),new se(28,new V(17,22),new V(6,23)),new se(30,new V(19,16),new V(6,17))),new ot(22,Int32Array.from([6,26,50,74,98]),new se(28,new V(2,111),new V(7,112)),new se(28,new V(17,46)),new se(30,new V(7,24),new V(16,25)),new se(24,new V(34,13))),new ot(23,Int32Array.from([6,30,54,78,102]),new se(30,new V(4,121),new V(5,122)),new se(28,new V(4,47),new V(14,48)),new se(30,new V(11,24),new V(14,25)),new se(30,new V(16,15),new V(14,16))),new ot(24,Int32Array.from([6,28,54,80,106]),new se(30,new V(6,117),new V(4,118)),new se(28,new V(6,45),new V(14,46)),new se(30,new V(11,24),new V(16,25)),new se(30,new V(30,16),new V(2,17))),new ot(25,Int32Array.from([6,32,58,84,110]),new se(26,new V(8,106),new V(4,107)),new se(28,new V(8,47),new V(13,48)),new se(30,new V(7,24),new V(22,25)),new se(30,new V(22,15),new V(13,16))),new ot(26,Int32Array.from([6,30,58,86,114]),new se(28,new V(10,114),new V(2,115)),new se(28,new V(19,46),new V(4,47)),new se(28,new V(28,22),new V(6,23)),new se(30,new V(33,16),new V(4,17))),new ot(27,Int32Array.from([6,34,62,90,118]),new se(30,new V(8,122),new V(4,123)),new se(28,new V(22,45),new V(3,46)),new se(30,new V(8,23),new V(26,24)),new se(30,new V(12,15),new V(28,16))),new ot(28,Int32Array.from([6,26,50,74,98,122]),new se(30,new V(3,117),new V(10,118)),new se(28,new V(3,45),new V(23,46)),new se(30,new V(4,24),new V(31,25)),new se(30,new V(11,15),new V(31,16))),new ot(29,Int32Array.from([6,30,54,78,102,126]),new se(30,new V(7,116),new V(7,117)),new se(28,new V(21,45),new V(7,46)),new se(30,new V(1,23),new V(37,24)),new se(30,new V(19,15),new V(26,16))),new ot(30,Int32Array.from([6,26,52,78,104,130]),new se(30,new V(5,115),new V(10,116)),new se(28,new V(19,47),new V(10,48)),new se(30,new V(15,24),new V(25,25)),new se(30,new V(23,15),new V(25,16))),new ot(31,Int32Array.from([6,30,56,82,108,134]),new se(30,new V(13,115),new V(3,116)),new se(28,new V(2,46),new V(29,47)),new se(30,new V(42,24),new V(1,25)),new se(30,new V(23,15),new V(28,16))),new ot(32,Int32Array.from([6,34,60,86,112,138]),new se(30,new V(17,115)),new se(28,new V(10,46),new V(23,47)),new se(30,new V(10,24),new V(35,25)),new se(30,new V(19,15),new V(35,16))),new ot(33,Int32Array.from([6,30,58,86,114,142]),new se(30,new V(17,115),new V(1,116)),new se(28,new V(14,46),new V(21,47)),new se(30,new V(29,24),new V(19,25)),new se(30,new V(11,15),new V(46,16))),new ot(34,Int32Array.from([6,34,62,90,118,146]),new se(30,new V(13,115),new V(6,116)),new se(28,new V(14,46),new V(23,47)),new se(30,new V(44,24),new V(7,25)),new se(30,new V(59,16),new V(1,17))),new ot(35,Int32Array.from([6,30,54,78,102,126,150]),new se(30,new V(12,121),new V(7,122)),new se(28,new V(12,47),new V(26,48)),new se(30,new V(39,24),new V(14,25)),new se(30,new V(22,15),new V(41,16))),new ot(36,Int32Array.from([6,24,50,76,102,128,154]),new se(30,new V(6,121),new V(14,122)),new se(28,new V(6,47),new V(34,48)),new se(30,new V(46,24),new V(10,25)),new se(30,new V(2,15),new V(64,16))),new ot(37,Int32Array.from([6,28,54,80,106,132,158]),new se(30,new V(17,122),new V(4,123)),new se(28,new V(29,46),new V(14,47)),new se(30,new V(49,24),new V(10,25)),new se(30,new V(24,15),new V(46,16))),new ot(38,Int32Array.from([6,32,58,84,110,136,162]),new se(30,new V(4,122),new V(18,123)),new se(28,new V(13,46),new V(32,47)),new se(30,new V(48,24),new V(14,25)),new se(30,new V(42,15),new V(32,16))),new ot(39,Int32Array.from([6,26,54,82,110,138,166]),new se(30,new V(20,117),new V(4,118)),new se(28,new V(40,47),new V(7,48)),new se(30,new V(43,24),new V(22,25)),new se(30,new V(10,15),new V(67,16))),new ot(40,Int32Array.from([6,30,58,86,114,142,170]),new se(30,new V(19,118),new V(6,119)),new se(28,new V(18,47),new V(31,48)),new se(30,new V(34,24),new V(34,25)),new se(30,new V(20,15),new V(61,16)))];var gn;(function(k){k[k.DATA_MASK_000=0]="DATA_MASK_000",k[k.DATA_MASK_001=1]="DATA_MASK_001",k[k.DATA_MASK_010=2]="DATA_MASK_010",k[k.DATA_MASK_011=3]="DATA_MASK_011",k[k.DATA_MASK_100=4]="DATA_MASK_100",k[k.DATA_MASK_101=5]="DATA_MASK_101",k[k.DATA_MASK_110=6]="DATA_MASK_110",k[k.DATA_MASK_111=7]="DATA_MASK_111"})(gn||(gn={}));class Tt{constructor(e,n){this.value=e,this.isMasked=n}unmaskBitMatrix(e,n){for(let i=0;i<n;i++)for(let l=0;l<n;l++)this.isMasked(i,l)&&e.flip(l,i)}}Tt.values=new Map([[gn.DATA_MASK_000,new Tt(gn.DATA_MASK_000,(k,e)=>(k+e&1)===0)],[gn.DATA_MASK_001,new Tt(gn.DATA_MASK_001,(k,e)=>(k&1)===0)],[gn.DATA_MASK_010,new Tt(gn.DATA_MASK_010,(k,e)=>e%3===0)],[gn.DATA_MASK_011,new Tt(gn.DATA_MASK_011,(k,e)=>(k+e)%3===0)],[gn.DATA_MASK_100,new Tt(gn.DATA_MASK_100,(k,e)=>(Math.floor(k/2)+Math.floor(e/3)&1)===0)],[gn.DATA_MASK_101,new Tt(gn.DATA_MASK_101,(k,e)=>k*e%6===0)],[gn.DATA_MASK_110,new Tt(gn.DATA_MASK_110,(k,e)=>k*e%6<3)],[gn.DATA_MASK_111,new Tt(gn.DATA_MASK_111,(k,e)=>(k+e+k*e%3&1)===0)]]);class Ja{constructor(e){const n=e.getHeight();if(n<21||(n&3)!==1)throw new X;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let c=0;c<6;c++)e=this.copyBit(c,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let c=5;c>=0;c--)e=this.copyBit(8,c,e);const n=this.bitMatrix.getHeight();let i=0;const l=n-7;for(let c=n-1;c>=l;c--)i=this.copyBit(8,c,i);for(let c=n-8;c<n;c++)i=this.copyBit(c,8,i);if(this.parsedFormatInfo=Dn.decodeFormatInformation(e,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new X}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),n=Math.floor((e-17)/4);if(n<=6)return ot.getVersionForNumber(n);let i=0;const l=e-11;for(let u=5;u>=0;u--)for(let h=e-9;h>=l;h--)i=this.copyBit(h,u,i);let c=ot.decodeVersionInformation(i);if(c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;i=0;for(let u=5;u>=0;u--)for(let h=e-9;h>=l;h--)i=this.copyBit(u,h,i);if(c=ot.decodeVersionInformation(i),c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;throw new X}copyBit(e,n,i){return(this.isMirror?this.bitMatrix.get(n,e):this.bitMatrix.get(e,n))?i<<1|1:i<<1}readCodewords(){const e=this.readFormatInformation(),n=this.readVersion(),i=Tt.values.get(e.getDataMask()),l=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,l);const c=n.buildFunctionPattern();let u=!0;const h=new Uint8Array(n.getTotalCodewords());let g=0,C=0,_=0;for(let P=l-1;P>0;P-=2){P===6&&P--;for(let D=0;D<l;D++){const z=u?l-1-D:D;for(let Y=0;Y<2;Y++)c.get(P-Y,z)||(_++,C<<=1,this.bitMatrix.get(P-Y,z)&&(C|=1),_===8&&(h[g++]=C,_=0,C=0))}u=!u}if(g!==n.getTotalCodewords())throw new X;return h}remask(){if(this.parsedFormatInfo===null)return;const e=Tt.values[this.parsedFormatInfo.getDataMask()],n=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,n)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let n=0,i=e.getWidth();n<i;n++)for(let l=n+1,c=e.getHeight();l<c;l++)e.get(n,l)!==e.get(l,n)&&(e.flip(l,n),e.flip(n,l))}}class io{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n,i){if(e.length!==n.getTotalCodewords())throw new N;const l=n.getECBlocksForLevel(i);let c=0;const u=l.getECBlocks();for(const Y of u)c+=Y.getCount();const h=new Array(c);let g=0;for(const Y of u)for(let $=0;$<Y.getCount();$++){const ne=Y.getDataCodewords(),ue=l.getECCodewordsPerBlock()+ne;h[g++]=new io(ne,new Uint8Array(ue))}const C=h[0].codewords.length;let _=h.length-1;for(;_>=0&&h[_].codewords.length!==C;)_--;_++;const P=C-l.getECCodewordsPerBlock();let D=0;for(let Y=0;Y<P;Y++)for(let $=0;$<g;$++)h[$].codewords[Y]=e[D++];for(let Y=_;Y<g;Y++)h[Y].codewords[P]=e[D++];const z=h[0].codewords.length;for(let Y=P;Y<z;Y++)for(let $=0;$<g;$++){const ne=$<_?Y:Y+1;h[$].codewords[ne]=e[D++]}return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var sr;(function(k){k[k.TERMINATOR=0]="TERMINATOR",k[k.NUMERIC=1]="NUMERIC",k[k.ALPHANUMERIC=2]="ALPHANUMERIC",k[k.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",k[k.BYTE=4]="BYTE",k[k.ECI=5]="ECI",k[k.KANJI=6]="KANJI",k[k.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",k[k.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",k[k.HANZI=9]="HANZI"})(sr||(sr={}));class lt{constructor(e,n,i,l){this.value=e,this.stringValue=n,this.characterCountBitsForVersions=i,this.bits=l,lt.FOR_BITS.set(l,this),lt.FOR_VALUE.set(e,this)}static forBits(e){const n=lt.FOR_BITS.get(e);if(n===void 0)throw new N;return n}getCharacterCountBits(e){const n=e.getVersionNumber();let i;return n<=9?i=0:n<=26?i=1:i=2,this.characterCountBitsForVersions[i]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof lt))return!1;const n=e;return this.value===n.value}toString(){return this.stringValue}}lt.FOR_BITS=new Map,lt.FOR_VALUE=new Map,lt.TERMINATOR=new lt(sr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),lt.NUMERIC=new lt(sr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),lt.ALPHANUMERIC=new lt(sr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),lt.STRUCTURED_APPEND=new lt(sr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),lt.BYTE=new lt(sr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),lt.ECI=new lt(sr.ECI,"ECI",Int32Array.from([0,0,0]),7),lt.KANJI=new lt(sr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),lt.FNC1_FIRST_POSITION=new lt(sr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),lt.FNC1_SECOND_POSITION=new lt(sr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),lt.HANZI=new lt(sr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Qt{static decode(e,n,i,l){const c=new Go(e);let u=new Ne;const h=new Array;let g=-1,C=-1;try{let _=null,P=!1,D;do{if(c.available()<4)D=lt.TERMINATOR;else{const z=c.readBits(4);D=lt.forBits(z)}switch(D){case lt.TERMINATOR:break;case lt.FNC1_FIRST_POSITION:case lt.FNC1_SECOND_POSITION:P=!0;break;case lt.STRUCTURED_APPEND:if(c.available()<16)throw new X;g=c.readBits(8),C=c.readBits(8);break;case lt.ECI:const z=Qt.parseECIValue(c);if(_=te.getCharacterSetECIByValue(z),_===null)throw new X;break;case lt.HANZI:const Y=c.readBits(4),$=c.readBits(D.getCharacterCountBits(n));Y===Qt.GB2312_SUBSET&&Qt.decodeHanziSegment(c,u,$);break;default:const ne=c.readBits(D.getCharacterCountBits(n));switch(D){case lt.NUMERIC:Qt.decodeNumericSegment(c,u,ne);break;case lt.ALPHANUMERIC:Qt.decodeAlphanumericSegment(c,u,ne,P);break;case lt.BYTE:Qt.decodeByteSegment(c,u,ne,_,h,l);break;case lt.KANJI:Qt.decodeKanjiSegment(c,u,ne);break;default:throw new X}break}}while(D!==lt.TERMINATOR)}catch{throw new X}return new Be(e,u.toString(),h.length===0?null:h,i===null?null:i.toString(),g,C)}static decodeHanziSegment(e,n,i){if(i*13>e.available())throw new X;const l=new Uint8Array(2*i);let c=0;for(;i>0;){const u=e.readBits(13);let h=u/96<<8&4294967295|u%96;h<959?h+=41377:h+=42657,l[c]=h>>8&255,l[c+1]=h&255,c+=2,i--}try{n.append(Le.decode(l,Se.GB2312))}catch(u){throw new X(u)}}static decodeKanjiSegment(e,n,i){if(i*13>e.available())throw new X;const l=new Uint8Array(2*i);let c=0;for(;i>0;){const u=e.readBits(13);let h=u/192<<8&4294967295|u%192;h<7936?h+=33088:h+=49472,l[c]=h>>8,l[c+1]=h,c+=2,i--}try{n.append(Le.decode(l,Se.SHIFT_JIS))}catch(u){throw new X(u)}}static decodeByteSegment(e,n,i,l,c,u){if(8*i>e.available())throw new X;const h=new Uint8Array(i);for(let C=0;C<i;C++)h[C]=e.readBits(8);let g;l===null?g=Se.guessEncoding(h,u):g=l.getName();try{n.append(Le.decode(h,g))}catch(C){throw new X(C)}c.push(h)}static toAlphaNumericChar(e){if(e>=Qt.ALPHANUMERIC_CHARS.length)throw new X;return Qt.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,n,i,l){const c=n.length();for(;i>1;){if(e.available()<11)throw new X;const u=e.readBits(11);n.append(Qt.toAlphaNumericChar(Math.floor(u/45))),n.append(Qt.toAlphaNumericChar(u%45)),i-=2}if(i===1){if(e.available()<6)throw new X;n.append(Qt.toAlphaNumericChar(e.readBits(6)))}if(l)for(let u=c;u<n.length();u++)n.charAt(u)==="%"&&(u<n.length()-1&&n.charAt(u+1)==="%"?n.deleteCharAt(u+1):n.setCharAt(u,""))}static decodeNumericSegment(e,n,i){for(;i>=3;){if(e.available()<10)throw new X;const l=e.readBits(10);if(l>=1e3)throw new X;n.append(Qt.toAlphaNumericChar(Math.floor(l/100))),n.append(Qt.toAlphaNumericChar(Math.floor(l/10)%10)),n.append(Qt.toAlphaNumericChar(l%10)),i-=3}if(i===2){if(e.available()<7)throw new X;const l=e.readBits(7);if(l>=100)throw new X;n.append(Qt.toAlphaNumericChar(Math.floor(l/10))),n.append(Qt.toAlphaNumericChar(l%10))}else if(i===1){if(e.available()<4)throw new X;const l=e.readBits(4);if(l>=10)throw new X;n.append(Qt.toAlphaNumericChar(l))}}static parseECIValue(e){const n=e.readBits(8);if(!(n&128))return n&127;if((n&192)===128){const i=e.readBits(8);return(n&63)<<8&4294967295|i}if((n&224)===192){const i=e.readBits(16);return(n&31)<<16&4294967295|i}throw new X}}Qt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Qt.GB2312_SUBSET=1;class Xo{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const n=e[0];e[0]=e[2],e[2]=n}}class Yo{constructor(){this.rsDecoder=new Rt(xe.QR_CODE_FIELD_256)}decodeBooleanArray(e,n){return this.decodeBitMatrix(Ee.parseFromBooleanArray(e),n)}decodeBitMatrix(e,n){const i=new Ja(e);let l=null;try{return this.decodeBitMatrixParser(i,n)}catch(c){l=c}try{i.remask(),i.setMirror(!0),i.readVersion(),i.readFormatInformation(),i.mirror();const c=this.decodeBitMatrixParser(i,n);return c.setOther(new Xo(!0)),c}catch(c){throw l!==null?l:c}}decodeBitMatrixParser(e,n){const i=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),c=e.readCodewords(),u=io.getDataBlocks(c,i,l);let h=0;for(const _ of u)h+=_.getNumDataCodewords();const g=new Uint8Array(h);let C=0;for(const _ of u){const P=_.getCodewords(),D=_.getNumDataCodewords();this.correctErrors(P,D);for(let z=0;z<D;z++)g[C++]=P[z]}return Qt.decode(g,i,l,n)}correctErrors(e,n){const i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-n)}catch{throw new M}for(let l=0;l<n;l++)e[l]=i[l]}}class Yi extends je{constructor(e,n,i){super(e,n),this.estimatedModuleSize=i}aboutEquals(e,n,i){if(Math.abs(n-this.getY())<=e&&Math.abs(i-this.getX())<=e){const l=Math.abs(e-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(e,n,i){const l=(this.getX()+n)/2,c=(this.getY()+e)/2,u=(this.estimatedModuleSize+i)/2;return new Yi(l,c,u)}}class kr{constructor(e,n,i,l,c,u,h){this.image=e,this.startX=n,this.startY=i,this.width=l,this.height=c,this.moduleSize=u,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,n=this.height,i=this.width,l=e+i,c=this.startY+n/2,u=new Int32Array(3),h=this.image;for(let g=0;g<n;g++){const C=c+(g&1?-Math.floor((g+1)/2):Math.floor((g+1)/2));u[0]=0,u[1]=0,u[2]=0;let _=e;for(;_<l&&!h.get(_,C);)_++;let P=0;for(;_<l;){if(h.get(_,C))if(P===1)u[1]++;else if(P===2){if(this.foundPatternCross(u)){const D=this.handlePossibleCenter(u,C,_);if(D!==null)return D}u[0]=u[2],u[1]=1,u[2]=0,P=1}else u[++P]++;else P===1&&P++,u[P]++;_++}if(this.foundPatternCross(u)){const D=this.handlePossibleCenter(u,C,l);if(D!==null)return D}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new J}static centerFromEnd(e,n){return n-e[2]-e[1]/2}foundPatternCross(e){const n=this.moduleSize,i=n/2;for(let l=0;l<3;l++)if(Math.abs(n-e[l])>=i)return!1;return!0}crossCheckVertical(e,n,i,l){const c=this.image,u=c.getHeight(),h=this.crossCheckStateCount;h[0]=0,h[1]=0,h[2]=0;let g=e;for(;g>=0&&c.get(n,g)&&h[1]<=i;)h[1]++,g--;if(g<0||h[1]>i)return NaN;for(;g>=0&&!c.get(n,g)&&h[0]<=i;)h[0]++,g--;if(h[0]>i)return NaN;for(g=e+1;g<u&&c.get(n,g)&&h[1]<=i;)h[1]++,g++;if(g===u||h[1]>i)return NaN;for(;g<u&&!c.get(n,g)&&h[2]<=i;)h[2]++,g++;if(h[2]>i)return NaN;const C=h[0]+h[1]+h[2];return 5*Math.abs(C-l)>=2*l?NaN:this.foundPatternCross(h)?kr.centerFromEnd(h,g):NaN}handlePossibleCenter(e,n,i){const l=e[0]+e[1]+e[2],c=kr.centerFromEnd(e,i),u=this.crossCheckVertical(n,c,2*e[1],l);if(!isNaN(u)){const h=(e[0]+e[1]+e[2])/3;for(const C of this.possibleCenters)if(C.aboutEquals(h,u,c))return C.combineEstimate(u,c,h);const g=new Yi(c,u,h);this.possibleCenters.push(g),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(g)}return null}}class Br extends je{constructor(e,n,i,l){super(e,n),this.estimatedModuleSize=i,this.count=l,l===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,n,i){if(Math.abs(n-this.getY())<=e&&Math.abs(i-this.getX())<=e){const l=Math.abs(e-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(e,n,i){const l=this.count+1,c=(this.count*this.getX()+n)/l,u=(this.count*this.getY()+e)/l,h=(this.count*this.estimatedModuleSize+i)/l;return new Br(c,u,h,l)}}class ci{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class ln{constructor(e,n){this.image=e,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const n=e!=null&&e.get(re.TRY_HARDER)!==void 0,i=e!=null&&e.get(re.PURE_BARCODE)!==void 0,l=this.image,c=l.getHeight(),u=l.getWidth();let h=Math.floor(3*c/(4*ln.MAX_MODULES));(h<ln.MIN_SKIP||n)&&(h=ln.MIN_SKIP);let g=!1;const C=new Int32Array(5);for(let P=h-1;P<c&&!g;P+=h){C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0;let D=0;for(let z=0;z<u;z++)if(l.get(z,P))(D&1)===1&&D++,C[D]++;else if(D&1)C[D]++;else if(D===4)if(ln.foundPatternCross(C)){if(this.handlePossibleCenter(C,P,z,i)===!0)if(h=2,this.hasSkipped===!0)g=this.haveMultiplyConfirmedCenters();else{const $=this.findRowSkip();$>C[2]&&(P+=$-C[2]-h,z=u-1)}else{C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,D=3;continue}D=0,C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0}else C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,D=3;else C[++D]++;ln.foundPatternCross(C)&&this.handlePossibleCenter(C,P,u,i)===!0&&(h=C[0],this.hasSkipped&&(g=this.haveMultiplyConfirmedCenters()))}const _=this.selectBestPatterns();return je.orderBestPatterns(_),new ci(_)}static centerFromEnd(e,n){return n-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let n=0;for(let c=0;c<5;c++){const u=e[c];if(u===0)return!1;n+=u}if(n<7)return!1;const i=n/7,l=i/2;return Math.abs(i-e[0])<l&&Math.abs(i-e[1])<l&&Math.abs(3*i-e[2])<3*l&&Math.abs(i-e[3])<l&&Math.abs(i-e[4])<l}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,n,i,l){const c=this.getCrossCheckStateCount();let u=0;const h=this.image;for(;e>=u&&n>=u&&h.get(n-u,e-u);)c[2]++,u++;if(e<u||n<u)return!1;for(;e>=u&&n>=u&&!h.get(n-u,e-u)&&c[1]<=i;)c[1]++,u++;if(e<u||n<u||c[1]>i)return!1;for(;e>=u&&n>=u&&h.get(n-u,e-u)&&c[0]<=i;)c[0]++,u++;if(c[0]>i)return!1;const g=h.getHeight(),C=h.getWidth();for(u=1;e+u<g&&n+u<C&&h.get(n+u,e+u);)c[2]++,u++;if(e+u>=g||n+u>=C)return!1;for(;e+u<g&&n+u<C&&!h.get(n+u,e+u)&&c[3]<i;)c[3]++,u++;if(e+u>=g||n+u>=C||c[3]>=i)return!1;for(;e+u<g&&n+u<C&&h.get(n+u,e+u)&&c[4]<i;)c[4]++,u++;if(c[4]>=i)return!1;const _=c[0]+c[1]+c[2]+c[3]+c[4];return Math.abs(_-l)<2*l&&ln.foundPatternCross(c)}crossCheckVertical(e,n,i,l){const c=this.image,u=c.getHeight(),h=this.getCrossCheckStateCount();let g=e;for(;g>=0&&c.get(n,g);)h[2]++,g--;if(g<0)return NaN;for(;g>=0&&!c.get(n,g)&&h[1]<=i;)h[1]++,g--;if(g<0||h[1]>i)return NaN;for(;g>=0&&c.get(n,g)&&h[0]<=i;)h[0]++,g--;if(h[0]>i)return NaN;for(g=e+1;g<u&&c.get(n,g);)h[2]++,g++;if(g===u)return NaN;for(;g<u&&!c.get(n,g)&&h[3]<i;)h[3]++,g++;if(g===u||h[3]>=i)return NaN;for(;g<u&&c.get(n,g)&&h[4]<i;)h[4]++,g++;if(h[4]>=i)return NaN;const C=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(C-l)>=2*l?NaN:ln.foundPatternCross(h)?ln.centerFromEnd(h,g):NaN}crossCheckHorizontal(e,n,i,l){const c=this.image,u=c.getWidth(),h=this.getCrossCheckStateCount();let g=e;for(;g>=0&&c.get(g,n);)h[2]++,g--;if(g<0)return NaN;for(;g>=0&&!c.get(g,n)&&h[1]<=i;)h[1]++,g--;if(g<0||h[1]>i)return NaN;for(;g>=0&&c.get(g,n)&&h[0]<=i;)h[0]++,g--;if(h[0]>i)return NaN;for(g=e+1;g<u&&c.get(g,n);)h[2]++,g++;if(g===u)return NaN;for(;g<u&&!c.get(g,n)&&h[3]<i;)h[3]++,g++;if(g===u||h[3]>=i)return NaN;for(;g<u&&c.get(g,n)&&h[4]<i;)h[4]++,g++;if(h[4]>=i)return NaN;const C=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(C-l)>=l?NaN:ln.foundPatternCross(h)?ln.centerFromEnd(h,g):NaN}handlePossibleCenter(e,n,i,l){const c=e[0]+e[1]+e[2]+e[3]+e[4];let u=ln.centerFromEnd(e,i),h=this.crossCheckVertical(n,Math.floor(u),e[2],c);if(!isNaN(h)&&(u=this.crossCheckHorizontal(Math.floor(u),Math.floor(h),e[2],c),!isNaN(u)&&(!l||this.crossCheckDiagonal(Math.floor(h),Math.floor(u),e[2],c)))){const g=c/7;let C=!1;const _=this.possibleCenters;for(let P=0,D=_.length;P<D;P++){const z=_[P];if(z.aboutEquals(g,h,u)){_[P]=z.combineEstimate(h,u,g),C=!0;break}}if(!C){const P=new Br(u,h,g);_.push(P),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(P)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let n=null;for(const i of this.possibleCenters)if(i.getCount()>=ln.CENTER_QUORUM)if(n==null)n=i;else return this.hasSkipped=!0,Math.floor((Math.abs(n.getX()-i.getX())-Math.abs(n.getY()-i.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,n=0;const i=this.possibleCenters.length;for(const u of this.possibleCenters)u.getCount()>=ln.CENTER_QUORUM&&(e++,n+=u.getEstimatedModuleSize());if(e<3)return!1;const l=n/i;let c=0;for(const u of this.possibleCenters)c+=Math.abs(u.getEstimatedModuleSize()-l);return c<=.05*n}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new J;const n=this.possibleCenters;let i;if(e>3){let l=0,c=0;for(const g of this.possibleCenters){const C=g.getEstimatedModuleSize();l+=C,c+=C*C}i=l/e;let u=Math.sqrt(c/e-i*i);n.sort((g,C)=>{const _=Math.abs(C.getEstimatedModuleSize()-i),P=Math.abs(g.getEstimatedModuleSize()-i);return _<P?-1:_>P?1:0});const h=Math.max(.2*i,u);for(let g=0;g<n.length&&n.length>3;g++){const C=n[g];Math.abs(C.getEstimatedModuleSize()-i)>h&&(n.splice(g,1),g--)}}if(n.length>3){let l=0;for(const c of n)l+=c.getEstimatedModuleSize();i=l/n.length,n.sort((c,u)=>{if(u.getCount()===c.getCount()){const h=Math.abs(u.getEstimatedModuleSize()-i),g=Math.abs(c.getEstimatedModuleSize()-i);return h<g?1:h>g?-1:0}else return u.getCount()-c.getCount()}),n.splice(3)}return[n[0],n[1],n[2]]}}ln.CENTER_QUORUM=2,ln.MIN_SKIP=3,ln.MAX_MODULES=57;class $r{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(re.NEED_RESULT_POINT_CALLBACK);const i=new ln(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(i)}processFinderPatternInfo(e){const n=e.getTopLeft(),i=e.getTopRight(),l=e.getBottomLeft(),c=this.calculateModuleSize(n,i,l);if(c<1)throw new J("No pattern found in proccess finder.");const u=$r.computeDimension(n,i,l,c),h=ot.getProvisionalVersionForDimension(u),g=h.getDimensionForVersion()-7;let C=null;if(h.getAlignmentPatternCenters().length>0){const z=i.getX()-n.getX()+l.getX(),Y=i.getY()-n.getY()+l.getY(),$=1-3/g,ne=Math.floor(n.getX()+$*(z-n.getX())),ue=Math.floor(n.getY()+$*(Y-n.getY()));for(let Oe=4;Oe<=16;Oe<<=1)try{C=this.findAlignmentInRegion(c,ne,ue,Oe);break}catch(Me){if(!(Me instanceof J))throw Me}}const _=$r.createTransform(n,i,l,C,u),P=$r.sampleGrid(this.image,_,u);let D;return C===null?D=[l,n,i]:D=[l,n,i,C],new Wt(P,D)}static createTransform(e,n,i,l,c){const u=c-3.5;let h,g,C,_;return l!==null?(h=l.getX(),g=l.getY(),C=u-3,_=C):(h=n.getX()-e.getX()+i.getX(),g=n.getY()-e.getY()+i.getY(),C=u,_=u),ut.quadrilateralToQuadrilateral(3.5,3.5,u,3.5,C,_,3.5,u,e.getX(),e.getY(),n.getX(),n.getY(),h,g,i.getX(),i.getY())}static sampleGrid(e,n,i){return Ke.getInstance().sampleGridWithTransform(e,i,i,n)}static computeDimension(e,n,i,l){const c=Je.round(je.distance(e,n)/l),u=Je.round(je.distance(e,i)/l);let h=Math.floor((c+u)/2)+7;switch(h&3){case 0:h++;break;case 2:h--;break;case 3:throw new J("Dimensions could be not found.")}return h}calculateModuleSize(e,n,i){return(this.calculateModuleSizeOneWay(e,n)+this.calculateModuleSizeOneWay(e,i))/2}calculateModuleSizeOneWay(e,n){const i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(n.getX()),Math.floor(n.getY())),l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(i)?l/7:isNaN(l)?i/7:(i+l)/14}sizeOfBlackWhiteBlackRunBothWays(e,n,i,l){let c=this.sizeOfBlackWhiteBlackRun(e,n,i,l),u=1,h=e-(i-e);h<0?(u=e/(e-h),h=0):h>=this.image.getWidth()&&(u=(this.image.getWidth()-1-e)/(h-e),h=this.image.getWidth()-1);let g=Math.floor(n-(l-n)*u);return u=1,g<0?(u=n/(n-g),g=0):g>=this.image.getHeight()&&(u=(this.image.getHeight()-1-n)/(g-n),g=this.image.getHeight()-1),h=Math.floor(e+(h-e)*u),c+=this.sizeOfBlackWhiteBlackRun(e,n,h,g),c-1}sizeOfBlackWhiteBlackRun(e,n,i,l){const c=Math.abs(l-n)>Math.abs(i-e);if(c){let z=e;e=n,n=z,z=i,i=l,l=z}const u=Math.abs(i-e),h=Math.abs(l-n);let g=-u/2;const C=e<i?1:-1,_=n<l?1:-1;let P=0;const D=i+C;for(let z=e,Y=n;z!==D;z+=C){const $=c?Y:z,ne=c?z:Y;if(P===1===this.image.get($,ne)){if(P===2)return Je.distance(z,Y,e,n);P++}if(g+=h,g>0){if(Y===l)break;Y+=_,g-=u}}return P===2?Je.distance(i+C,l,e,n):NaN}findAlignmentInRegion(e,n,i,l){const c=Math.floor(l*e),u=Math.max(0,n-c),h=Math.min(this.image.getWidth()-1,n+c);if(h-u<e*3)throw new J("Alignment top exceeds estimated module size.");const g=Math.max(0,i-c),C=Math.min(this.image.getHeight()-1,i+c);if(C-g<e*3)throw new J("Alignment bottom exceeds estimated module size.");return new kr(this.image,u,g,h-u,C-g,e,this.resultPointCallback).find()}}class Zn{constructor(){this.decoder=new Yo}getDecoder(){return this.decoder}decode(e,n){let i,l;if(n!=null&&n.get(re.PURE_BARCODE)!==void 0){const g=Zn.extractPureBits(e.getBlackMatrix());i=this.decoder.decodeBitMatrix(g,n),l=Zn.NO_POINTS}else{const g=new $r(e.getBlackMatrix()).detect(n);i=this.decoder.decodeBitMatrix(g.getBits(),n),l=g.getPoints()}i.getOther()instanceof Xo&&i.getOther().applyMirroredCorrection(l);const c=new be(i.getText(),i.getRawBytes(),void 0,l,ie.QR_CODE,void 0),u=i.getByteSegments();u!==null&&c.putMetadata(ve.BYTE_SEGMENTS,u);const h=i.getECLevel();return h!==null&&c.putMetadata(ve.ERROR_CORRECTION_LEVEL,h),i.hasStructuredAppend()&&(c.putMetadata(ve.STRUCTURED_APPEND_SEQUENCE,i.getStructuredAppendSequenceNumber()),c.putMetadata(ve.STRUCTURED_APPEND_PARITY,i.getStructuredAppendParity())),c}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(n===null||i===null)throw new J;const l=this.moduleSize(n,e);let c=n[1],u=i[1],h=n[0],g=i[0];if(h>=g||c>=u)throw new J;if(u-c!==g-h&&(g=h+(u-c),g>=e.getWidth()))throw new J;const C=Math.round((g-h+1)/l),_=Math.round((u-c+1)/l);if(C<=0||_<=0)throw new J;if(_!==C)throw new J;const P=Math.floor(l/2);c+=P,h+=P;const D=h+Math.floor((C-1)*l)-g;if(D>0){if(D>P)throw new J;h-=D}const z=c+Math.floor((_-1)*l)-u;if(z>0){if(z>P)throw new J;c-=z}const Y=new Ee(C,_);for(let $=0;$<_;$++){const ne=c+Math.floor($*l);for(let ue=0;ue<C;ue++)e.get(h+Math.floor(ue*l),ne)&&Y.set(ue,$)}return Y}static moduleSize(e,n){const i=n.getHeight(),l=n.getWidth();let c=e[0],u=e[1],h=!0,g=0;for(;c<l&&u<i;){if(h!==n.get(c,u)){if(++g===5)break;h=!h}c++,u++}if(c===l||u===i)throw new J;return(c-e[0])/7}}Zn.NO_POINTS=new Array;class xt{PDF417Common(){}static getBitCountSum(e){return Je.sum(e)}static toIntArray(e){if(e==null||!e.length)return xt.EMPTY_INT_ARRAY;const n=new Int32Array(e.length);let i=0;for(const l of e)n[i++]=l;return n}static getCodeword(e){const n=W.binarySearch(xt.SYMBOL_TABLE,e&262143);return n<0?-1:(xt.CODEWORD_TABLE[n]-1)%xt.NUMBER_OF_CODEWORDS}}xt.NUMBER_OF_CODEWORDS=929,xt.MAX_CODEWORDS_IN_BARCODE=xt.NUMBER_OF_CODEWORDS-1,xt.MIN_ROWS_IN_BARCODE=3,xt.MAX_ROWS_IN_BARCODE=90,xt.MODULES_IN_CODEWORD=17,xt.MODULES_IN_STOP_PATTERN=18,xt.BARS_IN_MODULE=8,xt.EMPTY_INT_ARRAY=new Int32Array([]),xt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),xt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class el{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class Ct{static detectMultiple(e,n,i){let l=e.getBlackMatrix(),c=Ct.detect(i,l);return c.length||(l=l.clone(),l.rotate180(),c=Ct.detect(i,l)),new el(l,c)}static detect(e,n){const i=new Array;let l=0,c=0,u=!1;for(;l<n.getHeight();){const h=Ct.findVertices(n,l,c);if(h[0]==null&&h[3]==null){if(!u)break;u=!1,c=0;for(const g of i)g[1]!=null&&(l=Math.trunc(Math.max(l,g[1].getY()))),g[3]!=null&&(l=Math.max(l,Math.trunc(g[3].getY())));l+=Ct.ROW_STEP;continue}if(u=!0,i.push(h),!e)break;h[2]!=null?(c=Math.trunc(h[2].getX()),l=Math.trunc(h[2].getY())):(c=Math.trunc(h[4].getX()),l=Math.trunc(h[4].getY()))}return i}static findVertices(e,n,i){const l=e.getHeight(),c=e.getWidth(),u=new Array(8);return Ct.copyToResult(u,Ct.findRowsWithPattern(e,l,c,n,i,Ct.START_PATTERN),Ct.INDEXES_START_PATTERN),u[4]!=null&&(i=Math.trunc(u[4].getX()),n=Math.trunc(u[4].getY())),Ct.copyToResult(u,Ct.findRowsWithPattern(e,l,c,n,i,Ct.STOP_PATTERN),Ct.INDEXES_STOP_PATTERN),u}static copyToResult(e,n,i){for(let l=0;l<i.length;l++)e[i[l]]=n[l]}static findRowsWithPattern(e,n,i,l,c,u){const h=new Array(4);let g=!1;const C=new Int32Array(u.length);for(;l<n;l+=Ct.ROW_STEP){let P=Ct.findGuardPattern(e,c,l,i,!1,u,C);if(P!=null){for(;l>0;){const D=Ct.findGuardPattern(e,c,--l,i,!1,u,C);if(D!=null)P=D;else{l++;break}}h[0]=new je(P[0],l),h[1]=new je(P[1],l),g=!0;break}}let _=l+1;if(g){let P=0,D=Int32Array.from([Math.trunc(h[0].getX()),Math.trunc(h[1].getX())]);for(;_<n;_++){const z=Ct.findGuardPattern(e,D[0],_,i,!1,u,C);if(z!=null&&Math.abs(D[0]-z[0])<Ct.MAX_PATTERN_DRIFT&&Math.abs(D[1]-z[1])<Ct.MAX_PATTERN_DRIFT)D=z,P=0;else{if(P>Ct.SKIPPED_ROW_COUNT_MAX)break;P++}}_-=P+1,h[2]=new je(D[0],_),h[3]=new je(D[1],_)}return _-l<Ct.BARCODE_MIN_HEIGHT&&W.fill(h,null),h}static findGuardPattern(e,n,i,l,c,u,h){W.fillWithin(h,0,h.length,0);let g=n,C=0;for(;e.get(g,i)&&g>0&&C++<Ct.MAX_PIXEL_DRIFT;)g--;let _=g,P=0,D=u.length;for(let z=c;_<l;_++)if(e.get(_,i)!==z)h[P]++;else{if(P===D-1){if(Ct.patternMatchVariance(h,u,Ct.MAX_INDIVIDUAL_VARIANCE)<Ct.MAX_AVG_VARIANCE)return new Int32Array([g,_]);g+=h[0]+h[1],B.arraycopy(h,2,h,0,P-1),h[P-1]=0,h[P]=0,P--}else P++;h[P]=1,z=!z}return P===D-1&&Ct.patternMatchVariance(h,u,Ct.MAX_INDIVIDUAL_VARIANCE)<Ct.MAX_AVG_VARIANCE?new Int32Array([g,_-1]):null}static patternMatchVariance(e,n,i){let l=e.length,c=0,u=0;for(let C=0;C<l;C++)c+=e[C],u+=n[C];if(c<u)return 1/0;let h=c/u;i*=h;let g=0;for(let C=0;C<l;C++){let _=e[C],P=n[C]*h,D=_>P?_-P:P-_;if(D>i)return 1/0;g+=D}return g/c}}Ct.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ct.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ct.MAX_AVG_VARIANCE=.42,Ct.MAX_INDIVIDUAL_VARIANCE=.8,Ct.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ct.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ct.MAX_PIXEL_DRIFT=3,Ct.MAX_PATTERN_DRIFT=5,Ct.SKIPPED_ROW_COUNT_MAX=25,Ct.ROW_STEP=5,Ct.BARCODE_MIN_HEIGHT=10;class Ln{constructor(e,n){if(n.length===0)throw new N;this.field=e;let i=n.length;if(i>1&&n[0]===0){let l=1;for(;l<i&&n[l]===0;)l++;l===i?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(i-l),B.arraycopy(n,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let l=0;for(let c of this.coefficients)l=this.field.add(l,c);return l}let n=this.coefficients[0],i=this.coefficients.length;for(let l=1;l<i;l++)n=this.field.add(this.field.multiply(e,n),this.coefficients[l]);return n}add(e){if(!this.field.equals(e.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,i=e.coefficients;if(n.length>i.length){let u=n;n=i,i=u}let l=new Int32Array(i.length),c=i.length-n.length;B.arraycopy(i,0,l,0,c);for(let u=c;u<i.length;u++)l[u]=this.field.add(n[u-c],i[u]);return new Ln(this.field,l)}subtract(e){if(!this.field.equals(e.field))throw new N("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof Ln?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new Ln(this.field,new Int32Array([0]));let n=this.coefficients,i=n.length,l=e.coefficients,c=l.length,u=new Int32Array(i+c-1);for(let h=0;h<i;h++){let g=n[h];for(let C=0;C<c;C++)u[h+C]=this.field.add(u[h+C],this.field.multiply(g,l[C]))}return new Ln(this.field,u)}negative(){let e=this.coefficients.length,n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=this.field.subtract(0,this.coefficients[i]);return new Ln(this.field,n)}multiplyScalar(e){if(e===0)return new Ln(this.field,new Int32Array([0]));if(e===1)return this;let n=this.coefficients.length,i=new Int32Array(n);for(let l=0;l<n;l++)i[l]=this.field.multiply(this.coefficients[l],e);return new Ln(this.field,i)}multiplyByMonomial(e,n){if(e<0)throw new N;if(n===0)return new Ln(this.field,new Int32Array([0]));let i=this.coefficients.length,l=new Int32Array(i+e);for(let c=0;c<i;c++)l[c]=this.field.multiply(this.coefficients[c],n);return new Ln(this.field,l)}toString(){let e=new Ne;for(let n=this.getDegree();n>=0;n--){let i=this.getCoefficient(n);i!==0&&(i<0?(e.append(" - "),i=-i):e.length()>0&&e.append(" + "),(n===0||i!==1)&&e.append(i),n!==0&&(n===1?e.append("x"):(e.append("x^"),e.append(n))))}return e.toString()}}class tl{add(e,n){return(e+n)%this.modulus}subtract(e,n){return(this.modulus+e-n)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new N;return this.logTable[e]}inverse(e){if(e===0)throw new pe;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class Zi extends tl{constructor(e,n){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let i=1;for(let l=0;l<e;l++)this.expTable[l]=i,i=i*n%e;for(let l=0;l<e-1;l++)this.logTable[this.expTable[l]]=l;this.zero=new Ln(this,new Int32Array([0])),this.one=new Ln(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new N;if(n===0)return this.zero;let i=new Int32Array(e+1);return i[0]=n,new Ln(this,i)}}Zi.PDF417_GF=new Zi(xt.NUMBER_OF_CODEWORDS,3);class Zo{constructor(){this.field=Zi.PDF417_GF}decode(e,n,i){let l=new Ln(this.field,e),c=new Int32Array(n),u=!1;for(let Y=n;Y>0;Y--){let $=l.evaluateAt(this.field.exp(Y));c[n-Y]=$,$!==0&&(u=!0)}if(!u)return 0;let h=this.field.getOne();if(i!=null)for(const Y of i){let $=this.field.exp(e.length-1-Y),ne=new Ln(this.field,new Int32Array([this.field.subtract(0,$),1]));h=h.multiply(ne)}let g=new Ln(this.field,c),C=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),g,n),_=C[0],P=C[1],D=this.findErrorLocations(_),z=this.findErrorMagnitudes(P,_,D);for(let Y=0;Y<D.length;Y++){let $=e.length-1-this.field.log(D[Y]);if($<0)throw M.getChecksumInstance();e[$]=this.field.subtract(e[$],z[Y])}return D.length}runEuclideanAlgorithm(e,n,i){if(e.getDegree()<n.getDegree()){let D=e;e=n,n=D}let l=e,c=n,u=this.field.getZero(),h=this.field.getOne();for(;c.getDegree()>=Math.round(i/2);){let D=l,z=u;if(l=c,u=h,l.isZero())throw M.getChecksumInstance();c=D;let Y=this.field.getZero(),$=l.getCoefficient(l.getDegree()),ne=this.field.inverse($);for(;c.getDegree()>=l.getDegree()&&!c.isZero();){let ue=c.getDegree()-l.getDegree(),Oe=this.field.multiply(c.getCoefficient(c.getDegree()),ne);Y=Y.add(this.field.buildMonomial(ue,Oe)),c=c.subtract(l.multiplyByMonomial(ue,Oe))}h=Y.multiply(u).subtract(z).negative()}let g=h.getCoefficient(0);if(g===0)throw M.getChecksumInstance();let C=this.field.inverse(g),_=h.multiply(C),P=c.multiply(C);return[_,P]}findErrorLocations(e){let n=e.getDegree(),i=new Int32Array(n),l=0;for(let c=1;c<this.field.getSize()&&l<n;c++)e.evaluateAt(c)===0&&(i[l]=this.field.inverse(c),l++);if(l!==n)throw M.getChecksumInstance();return i}findErrorMagnitudes(e,n,i){let l=n.getDegree(),c=new Int32Array(l);for(let C=1;C<=l;C++)c[l-C]=this.field.multiply(C,n.getCoefficient(C));let u=new Ln(this.field,c),h=i.length,g=new Int32Array(h);for(let C=0;C<h;C++){let _=this.field.inverse(i[C]),P=this.field.subtract(0,e.evaluateAt(_)),D=this.field.inverse(u.evaluateAt(_));g[C]=this.field.multiply(P,D)}return g}}class Ai{constructor(e,n,i,l,c){e instanceof Ai?this.constructor_2(e):this.constructor_1(e,n,i,l,c)}constructor_1(e,n,i,l,c){const u=n==null||i==null,h=l==null||c==null;if(u&&h)throw new J;u?(n=new je(0,l.getY()),i=new je(0,c.getY())):h&&(l=new je(e.getWidth()-1,n.getY()),c=new je(e.getWidth()-1,i.getY())),this.image=e,this.topLeft=n,this.bottomLeft=i,this.topRight=l,this.bottomRight=c,this.minX=Math.trunc(Math.min(n.getX(),i.getX())),this.maxX=Math.trunc(Math.max(l.getX(),c.getX())),this.minY=Math.trunc(Math.min(n.getY(),l.getY())),this.maxY=Math.trunc(Math.max(i.getY(),c.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,n){return e==null?n:n==null?e:new Ai(e.image,e.topLeft,e.bottomLeft,n.topRight,n.bottomRight)}addMissingRows(e,n,i){let l=this.topLeft,c=this.bottomLeft,u=this.topRight,h=this.bottomRight;if(e>0){let g=i?this.topLeft:this.topRight,C=Math.trunc(g.getY()-e);C<0&&(C=0);let _=new je(g.getX(),C);i?l=_:u=_}if(n>0){let g=i?this.bottomLeft:this.bottomRight,C=Math.trunc(g.getY()+n);C>=this.image.getHeight()&&(C=this.image.getHeight()-1);let _=new je(g.getX(),C);i?c=_:h=_}return new Ai(this.image,l,c,u,h)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Is{constructor(e,n,i,l){this.columnCount=e,this.errorCorrectionLevel=l,this.rowCountUpperPart=n,this.rowCountLowerPart=i,this.rowCount=n+i}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class qr{constructor(){this.buffer=""}static form(e,n){let i=-1;function l(u,h,g,C,_,P){if(u==="%%")return"%";if(n[++i]===void 0)return;u=C?parseInt(C.substr(1)):void 0;let D=_?parseInt(_.substr(1)):void 0,z;switch(P){case"s":z=n[i];break;case"c":z=n[i][0];break;case"f":z=parseFloat(n[i]).toFixed(u);break;case"p":z=parseFloat(n[i]).toPrecision(u);break;case"e":z=parseFloat(n[i]).toExponential(u);break;case"x":z=parseInt(n[i]).toString(D||16);break;case"d":z=parseFloat(parseInt(n[i],D||10).toPrecision(u)).toFixed(0);break}z=typeof z=="object"?JSON.stringify(z):(+z).toString(D);let Y=parseInt(g),$=g&&g[0]+""=="0"?"0":" ";for(;z.length<Y;)z=h!==void 0?z+$:$+z;return z}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(c,l)}format(e,...n){this.buffer+=qr.form(e,n)}toString(){return this.buffer}}class jr{constructor(e){this.boundingBox=new Ai(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let n=this.getCodeword(e);if(n!=null)return n;for(let i=1;i<jr.MAX_NEARBY_DISTANCE;i++){let l=this.imageRowToCodewordIndex(e)-i;if(l>=0&&(n=this.codewords[l],n!=null)||(l=this.imageRowToCodewordIndex(e)+i,l<this.codewords.length&&(n=this.codewords[l],n!=null)))return n}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,n){this.codewords[this.imageRowToCodewordIndex(e)]=n}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new qr;let n=0;for(const i of this.codewords){if(i==null){e.format("%3d:    |   %n",n++);continue}e.format("%3d: %3d|%3d%n",n++,i.getRowNumber(),i.getValue())}return e.toString()}}jr.MAX_NEARBY_DISTANCE=5;class ui{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let n=this.values.get(e);n==null&&(n=0),n++,this.values.set(e,n)}getValue(){let e=-1,n=new Array;for(const[i,l]of this.values.entries()){const c={getKey:()=>i,getValue:()=>l};c.getValue()>e?(e=c.getValue(),n=[],n.push(c.getKey())):c.getValue()===e&&n.push(c.getKey())}return xt.toIntArray(n)}getConfidence(e){return this.values.get(e)}}class nl extends jr{constructor(e,n){super(e),this._isLeft=n}setRowNumbers(){for(let e of this.getCodewords())e!=null&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,e);let i=this.getBoundingBox(),l=this._isLeft?i.getTopLeft():i.getTopRight(),c=this._isLeft?i.getBottomLeft():i.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(l.getY())),h=this.imageRowToCodewordIndex(Math.trunc(c.getY())),g=-1,C=1,_=0;for(let P=u;P<h;P++){if(n[P]==null)continue;let D=n[P],z=D.getRowNumber()-g;if(z===0)_++;else if(z===1)C=Math.max(C,_),_=1,g=D.getRowNumber();else if(z<0||D.getRowNumber()>=e.getRowCount()||z>P)n[P]=null;else{let Y;C>2?Y=(C-2)*z:Y=z;let $=Y>=P;for(let ne=1;ne<=Y&&!$;ne++)$=n[P-ne]!=null;$?n[P]=null:(g=D.getRowNumber(),_=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let n=new Int32Array(e.getRowCount());for(let i of this.getCodewords())if(i!=null){let l=i.getRowNumber();if(l>=n.length)continue;n[l]++}return n}adjustIncompleteIndicatorColumnRowNumbers(e){let n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),l=this._isLeft?n.getBottomLeft():n.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=this.imageRowToCodewordIndex(Math.trunc(l.getY())),h=this.getCodewords(),g=-1;for(let C=c;C<u;C++){if(h[C]==null)continue;let _=h[C];_.setRowNumberAsRowIndicatorColumn();let P=_.getRowNumber()-g;P===0||(P===1?g=_.getRowNumber():_.getRowNumber()>=e.getRowCount()?h[C]=null:g=_.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),n=new ui,i=new ui,l=new ui,c=new ui;for(let h of e){if(h==null)continue;h.setRowNumberAsRowIndicatorColumn();let g=h.getValue()%30,C=h.getRowNumber();switch(this._isLeft||(C+=2),C%3){case 0:i.setValue(g*3+1);break;case 1:c.setValue(g/3),l.setValue(g%3);break;case 2:n.setValue(g+1);break}}if(n.getValue().length===0||i.getValue().length===0||l.getValue().length===0||c.getValue().length===0||n.getValue()[0]<1||i.getValue()[0]+l.getValue()[0]<xt.MIN_ROWS_IN_BARCODE||i.getValue()[0]+l.getValue()[0]>xt.MAX_ROWS_IN_BARCODE)return null;let u=new Is(n.getValue()[0],i.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(e,u),u}removeIncorrectCodewords(e,n){for(let i=0;i<e.length;i++){let l=e[i];if(e[i]==null)continue;let c=l.getValue()%30,u=l.getRowNumber();if(u>n.getRowCount()){e[i]=null;continue}switch(this._isLeft||(u+=2),u%3){case 0:c*3+1!==n.getRowCountUpperPart()&&(e[i]=null);break;case 1:(Math.trunc(c/3)!==n.getErrorCorrectionLevel()||c%3!==n.getRowCountLowerPart())&&(e[i]=null);break;case 2:c+1!==n.getColumnCount()&&(e[i]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ns{constructor(e,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=xt.MAX_CODEWORDS_IN_BARCODE,n;do n=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<n);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let n=1;n<this.barcodeColumnCount+1;n++){let i=this.detectionResultColumns[n].getCodewords();for(let l=0;l<i.length;l++)i[l]!=null&&(i[l].hasValidRowNumber()||this.adjustRowNumbers(n,l,i))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<e.length;i++)if(e[i]!=null&&n[i]!=null&&e[i].getRowNumber()===n[i].getRowNumber())for(let l=1;l<=this.barcodeColumnCount;l++){let c=this.detectionResultColumns[l].getCodewords()[i];c!=null&&(c.setRowNumber(e[i].getRowNumber()),c.hasValidRowNumber()||(this.detectionResultColumns[l].getCodewords()[i]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<n.length;i++){if(n[i]==null)continue;let l=n[i].getRowNumber(),c=0;for(let u=this.barcodeColumnCount+1;u>0&&c<this.ADJUST_ROW_NUMBER_SKIP;u--){let h=this.detectionResultColumns[u].getCodewords()[i];h!=null&&(c=Ns.adjustRowNumberIfValid(l,c,h),h.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,n=this.detectionResultColumns[0].getCodewords();for(let i=0;i<n.length;i++){if(n[i]==null)continue;let l=n[i].getRowNumber(),c=0;for(let u=1;u<this.barcodeColumnCount+1&&c<this.ADJUST_ROW_NUMBER_SKIP;u++){let h=this.detectionResultColumns[u].getCodewords()[i];h!=null&&(c=Ns.adjustRowNumberIfValid(l,c,h),h.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,n,i){return i==null||i.hasValidRowNumber()||(i.isValidRowNumber(e)?(i.setRowNumber(e),n=0):++n),n}adjustRowNumbers(e,n,i){if(!this.detectionResultColumns[e-1])return;let l=i[n],c=this.detectionResultColumns[e-1].getCodewords(),u=c;this.detectionResultColumns[e+1]!=null&&(u=this.detectionResultColumns[e+1].getCodewords());let h=new Array(14);h[2]=c[n],h[3]=u[n],n>0&&(h[0]=i[n-1],h[4]=c[n-1],h[5]=u[n-1]),n>1&&(h[8]=i[n-2],h[10]=c[n-2],h[11]=u[n-2]),n<i.length-1&&(h[1]=i[n+1],h[6]=c[n+1],h[7]=u[n+1]),n<i.length-2&&(h[9]=i[n+2],h[12]=c[n+2],h[13]=u[n+2]);for(let g of h)if(Ns.adjustRowNumber(l,g))return}static adjustRowNumber(e,n){return n==null?!1:n.hasValidRowNumber()&&n.getBucket()===e.getBucket()?(e.setRowNumber(n.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,n){this.detectionResultColumns[e]=n}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let n=new qr;for(let i=0;i<e.getCodewords().length;i++){n.format("CW %3d:",i);for(let l=0;l<this.barcodeColumnCount+2;l++){if(this.detectionResultColumns[l]==null){n.format("    |   ");continue}let c=this.detectionResultColumns[l].getCodewords()[i];if(c==null){n.format("    |   ");continue}n.format(" %3d|%3d",c.getRowNumber(),c.getValue())}n.format("%n")}return n.toString()}}class Ti{constructor(e,n,i,l){this.rowNumber=Ti.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(n),this.bucket=Math.trunc(i),this.value=Math.trunc(l)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==Ti.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}Ti.BARCODE_ROW_UNKNOWN=-1;class Bn{static initialize(){for(let e=0;e<xt.SYMBOL_TABLE.length;e++){let n=xt.SYMBOL_TABLE[e],i=n&1;for(let l=0;l<xt.BARS_IN_MODULE;l++){let c=0;for(;(n&1)===i;)c+=1,n>>=1;i=n&1,Bn.RATIOS_TABLE[e]||(Bn.RATIOS_TABLE[e]=new Array(xt.BARS_IN_MODULE)),Bn.RATIOS_TABLE[e][xt.BARS_IN_MODULE-l-1]=Math.fround(c/xt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let n=Bn.getDecodedCodewordValue(Bn.sampleBitCounts(e));return n!==-1?n:Bn.getClosestDecodedValue(e)}static sampleBitCounts(e){let n=Je.sum(e),i=new Int32Array(xt.BARS_IN_MODULE),l=0,c=0;for(let u=0;u<xt.MODULES_IN_CODEWORD;u++){let h=n/(2*xt.MODULES_IN_CODEWORD)+u*n/xt.MODULES_IN_CODEWORD;c+e[l]<=h&&(c+=e[l],l++),i[l]++}return i}static getDecodedCodewordValue(e){let n=Bn.getBitValue(e);return xt.getCodeword(n)===-1?-1:n}static getBitValue(e){let n=0;for(let i=0;i<e.length;i++)for(let l=0;l<e[i];l++)n=n<<1|(i%2===0?1:0);return Math.trunc(n)}static getClosestDecodedValue(e){let n=Je.sum(e),i=new Array(xt.BARS_IN_MODULE);if(n>1)for(let u=0;u<i.length;u++)i[u]=Math.fround(e[u]/n);let l=qt.MAX_VALUE,c=-1;this.bSymbolTableReady||Bn.initialize();for(let u=0;u<Bn.RATIOS_TABLE.length;u++){let h=0,g=Bn.RATIOS_TABLE[u];for(let C=0;C<xt.BARS_IN_MODULE;C++){let _=Math.fround(g[C]-i[C]);if(h+=Math.fround(_*_),h>=l)break}h<l&&(l=h,c=xt.SYMBOL_TABLE[u])}return c}}Bn.bSymbolTableReady=!1,Bn.RATIOS_TABLE=new Array(xt.SYMBOL_TABLE.length).map(k=>new Array(xt.BARS_IN_MODULE));class so{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class Ko{static parseLong(e,n=void 0){return parseInt(e,n)}}class Qr extends E{}Qr.kind="NullPointerException";class $o{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,n,i){if(e==null)throw new Qr;if(n<0||n>e.length||i<0||n+i>e.length||n+i<0)throw new j;if(i===0)return;for(let l=0;l<i;l++)this.write(e[n+l])}flush(){}close(){}}class oo extends E{}class rl extends $o{constructor(e=32){if(super(),this.count=0,e<0)throw new N("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let i=this.buf.length<<1;if(i-e<0&&(i=e),i<0){if(e<0)throw new oo;i=F.MAX_VALUE}this.buf=W.copyOfUint8Array(this.buf,i)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,n,i){if(n<0||n>e.length||i<0||n+i-e.length>0)throw new j;this.ensureCapacity(this.count+i),B.arraycopy(e,n,this.buf,this.count,i),this.count+=i}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return W.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var Ft;(function(k){k[k.ALPHA=0]="ALPHA",k[k.LOWER=1]="LOWER",k[k.MIXED=2]="MIXED",k[k.PUNCT=3]="PUNCT",k[k.ALPHA_SHIFT=4]="ALPHA_SHIFT",k[k.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ft||(Ft={}));function _s(){if(typeof window<"u")return window.BigInt||null;if(typeof ec<"u")return ec.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Rs;function xn(k){if(typeof Rs>"u"&&(Rs=_s()),Rs===null)throw new Error("BigInt is not supported!");return Rs(k)}function Ki(){let k=[];k[0]=xn(1);let e=xn(900);k[1]=e;for(let n=2;n<16;n++)k[n]=k[n-1]*e;return k}class de{static decode(e,n){let i=new Ne(""),l=te.ISO8859_1;i.enableDecoding(l);let c=1,u=e[c++],h=new so;for(;c<e[0];){switch(u){case de.TEXT_COMPACTION_MODE_LATCH:c=de.textCompaction(e,c,i);break;case de.BYTE_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:c=de.byteCompaction(u,e,l,c,i);break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[c++]);break;case de.NUMERIC_COMPACTION_MODE_LATCH:c=de.numericCompaction(e,c,i);break;case de.ECI_CHARSET:te.getCharacterSetECIByValue(e[c++]);break;case de.ECI_GENERAL_PURPOSE:c+=2;break;case de.ECI_USER_DEFINED:c++;break;case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:c=de.decodeMacroBlock(e,c,h);break;case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:throw new X;default:c--,c=de.textCompaction(e,c,i);break}if(c<e.length)u=e[c++];else throw X.getFormatInstance()}if(i.length()===0)throw X.getFormatInstance();let g=new Be(null,i.toString(),null,n);return g.setOther(h),g}static decodeMacroBlock(e,n,i){if(n+de.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw X.getFormatInstance();let l=new Int32Array(de.NUMBER_OF_SEQUENCE_CODEWORDS);for(let h=0;h<de.NUMBER_OF_SEQUENCE_CODEWORDS;h++,n++)l[h]=e[n];i.setSegmentIndex(F.parseInt(de.decodeBase900toBase10(l,de.NUMBER_OF_SEQUENCE_CODEWORDS)));let c=new Ne;n=de.textCompaction(e,n,c),i.setFileId(c.toString());let u=-1;for(e[n]===de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(u=n+1);n<e[0];)switch(e[n]){case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(n++,e[n]){case de.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let h=new Ne;n=de.textCompaction(e,n+1,h),i.setFileName(h.toString());break;case de.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let g=new Ne;n=de.textCompaction(e,n+1,g),i.setSender(g.toString());break;case de.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let C=new Ne;n=de.textCompaction(e,n+1,C),i.setAddressee(C.toString());break;case de.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let _=new Ne;n=de.numericCompaction(e,n+1,_),i.setSegmentCount(F.parseInt(_.toString()));break;case de.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let P=new Ne;n=de.numericCompaction(e,n+1,P),i.setTimestamp(Ko.parseLong(P.toString()));break;case de.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let D=new Ne;n=de.numericCompaction(e,n+1,D),i.setChecksum(F.parseInt(D.toString()));break;case de.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let z=new Ne;n=de.numericCompaction(e,n+1,z),i.setFileSize(Ko.parseLong(z.toString()));break;default:throw X.getFormatInstance()}break;case de.MACRO_PDF417_TERMINATOR:n++,i.setLastSegment(!0);break;default:throw X.getFormatInstance()}if(u!==-1){let h=n-u;i.isLastSegment()&&h--,i.setOptionalData(W.copyOfRange(e,u,u+h))}return n}static textCompaction(e,n,i){let l=new Int32Array((e[0]-n)*2),c=new Int32Array((e[0]-n)*2),u=0,h=!1;for(;n<e[0]&&!h;){let g=e[n++];if(g<de.TEXT_COMPACTION_MODE_LATCH)l[u]=g/30,l[u+1]=g%30,u+=2;else switch(g){case de.TEXT_COMPACTION_MODE_LATCH:l[u++]=de.TEXT_COMPACTION_MODE_LATCH;break;case de.BYTE_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:case de.NUMERIC_COMPACTION_MODE_LATCH:case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:n--,h=!0;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l[u]=de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,g=e[n++],c[u]=g,u++;break}}return de.decodeTextCompaction(l,c,u,i),n}static decodeTextCompaction(e,n,i,l){let c=Ft.ALPHA,u=Ft.ALPHA,h=0;for(;h<i;){let g=e[h],C="";switch(c){case Ft.ALPHA:if(g<26)C=String.fromCharCode(65+g);else switch(g){case 26:C=" ";break;case de.LL:c=Ft.LOWER;break;case de.ML:c=Ft.MIXED;break;case de.PS:u=c,c=Ft.PUNCT_SHIFT;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case de.TEXT_COMPACTION_MODE_LATCH:c=Ft.ALPHA;break}break;case Ft.LOWER:if(g<26)C=String.fromCharCode(97+g);else switch(g){case 26:C=" ";break;case de.AS:u=c,c=Ft.ALPHA_SHIFT;break;case de.ML:c=Ft.MIXED;break;case de.PS:u=c,c=Ft.PUNCT_SHIFT;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case de.TEXT_COMPACTION_MODE_LATCH:c=Ft.ALPHA;break}break;case Ft.MIXED:if(g<de.PL)C=de.MIXED_CHARS[g];else switch(g){case de.PL:c=Ft.PUNCT;break;case 26:C=" ";break;case de.LL:c=Ft.LOWER;break;case de.AL:c=Ft.ALPHA;break;case de.PS:u=c,c=Ft.PUNCT_SHIFT;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case de.TEXT_COMPACTION_MODE_LATCH:c=Ft.ALPHA;break}break;case Ft.PUNCT:if(g<de.PAL)C=de.PUNCT_CHARS[g];else switch(g){case de.PAL:c=Ft.ALPHA;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case de.TEXT_COMPACTION_MODE_LATCH:c=Ft.ALPHA;break}break;case Ft.ALPHA_SHIFT:if(c=u,g<26)C=String.fromCharCode(65+g);else switch(g){case 26:C=" ";break;case de.TEXT_COMPACTION_MODE_LATCH:c=Ft.ALPHA;break}break;case Ft.PUNCT_SHIFT:if(c=u,g<de.PAL)C=de.PUNCT_CHARS[g];else switch(g){case de.PAL:c=Ft.ALPHA;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case de.TEXT_COMPACTION_MODE_LATCH:c=Ft.ALPHA;break}break}C!==""&&l.append(C),h++}}static byteCompaction(e,n,i,l,c){let u=new rl,h=0,g=0,C=!1;switch(e){case de.BYTE_COMPACTION_MODE_LATCH:let _=new Int32Array(6),P=n[l++];for(;l<n[0]&&!C;)switch(_[h++]=P,g=900*g+P,P=n[l++],P){case de.TEXT_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH:case de.NUMERIC_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:l--,C=!0;break;default:if(h%5===0&&h>0){for(let D=0;D<6;++D)u.write(Number(xn(g)>>xn(8*(5-D))));g=0,h=0}break}l===n[0]&&P<de.TEXT_COMPACTION_MODE_LATCH&&(_[h++]=P);for(let D=0;D<h;D++)u.write(_[D]);break;case de.BYTE_COMPACTION_MODE_LATCH_6:for(;l<n[0]&&!C;){let D=n[l++];if(D<de.TEXT_COMPACTION_MODE_LATCH)h++,g=900*g+D;else switch(D){case de.TEXT_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH:case de.NUMERIC_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:l--,C=!0;break}if(h%5===0&&h>0){for(let z=0;z<6;++z)u.write(Number(xn(g)>>xn(8*(5-z))));g=0,h=0}}break}return c.append(Le.decode(u.toByteArray(),i)),l}static numericCompaction(e,n,i){let l=0,c=!1,u=new Int32Array(de.MAX_NUMERIC_CODEWORDS);for(;n<e[0]&&!c;){let h=e[n++];if(n===e[0]&&(c=!0),h<de.TEXT_COMPACTION_MODE_LATCH)u[l]=h,l++;else switch(h){case de.TEXT_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:n--,c=!0;break}(l%de.MAX_NUMERIC_CODEWORDS===0||h===de.NUMERIC_COMPACTION_MODE_LATCH||c)&&l>0&&(i.append(de.decodeBase900toBase10(u,l)),l=0)}return n}static decodeBase900toBase10(e,n){let i=xn(0);for(let c=0;c<n;c++)i+=de.EXP900[n-c-1]*xn(e[c]);let l=i.toString();if(l.charAt(0)!=="1")throw new X;return l.substring(1)}}de.TEXT_COMPACTION_MODE_LATCH=900,de.BYTE_COMPACTION_MODE_LATCH=901,de.NUMERIC_COMPACTION_MODE_LATCH=902,de.BYTE_COMPACTION_MODE_LATCH_6=924,de.ECI_USER_DEFINED=925,de.ECI_GENERAL_PURPOSE=926,de.ECI_CHARSET=927,de.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,de.MACRO_PDF417_TERMINATOR=922,de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,de.MAX_NUMERIC_CODEWORDS=15,de.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,de.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,de.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,de.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,de.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,de.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,de.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,de.PL=25,de.LL=27,de.AS=27,de.ML=28,de.AL=28,de.PS=29,de.PAL=29,de.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,de.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",de.EXP900=_s()?Ki():[],de.NUMBER_OF_SEQUENCE_CODEWORDS=2;class bt{constructor(){}static decode(e,n,i,l,c,u,h){let g=new Ai(e,n,i,l,c),C=null,_=null,P;for(let Y=!0;;Y=!1){if(n!=null&&(C=bt.getRowIndicatorColumn(e,g,n,!0,u,h)),l!=null&&(_=bt.getRowIndicatorColumn(e,g,l,!1,u,h)),P=bt.merge(C,_),P==null)throw J.getNotFoundInstance();let $=P.getBoundingBox();if(Y&&$!=null&&($.getMinY()<g.getMinY()||$.getMaxY()>g.getMaxY()))g=$;else break}P.setBoundingBox(g);let D=P.getBarcodeColumnCount()+1;P.setDetectionResultColumn(0,C),P.setDetectionResultColumn(D,_);let z=C!=null;for(let Y=1;Y<=D;Y++){let $=z?Y:D-Y;if(P.getDetectionResultColumn($)!==void 0)continue;let ne;$===0||$===D?ne=new nl(g,$===0):ne=new jr(g),P.setDetectionResultColumn($,ne);let ue=-1,Oe=ue;for(let Me=g.getMinY();Me<=g.getMaxY();Me++){if(ue=bt.getStartColumn(P,$,Me,z),ue<0||ue>g.getMaxX()){if(Oe===-1)continue;ue=Oe}let Ie=bt.detectCodeword(e,g.getMinX(),g.getMaxX(),z,ue,Me,u,h);Ie!=null&&(ne.setCodeword(Me,Ie),Oe=ue,u=Math.min(u,Ie.getWidth()),h=Math.max(h,Ie.getWidth()))}}return bt.createDecoderResult(P)}static merge(e,n){if(e==null&&n==null)return null;let i=bt.getBarcodeMetadata(e,n);if(i==null)return null;let l=Ai.merge(bt.adjustBoundingBox(e),bt.adjustBoundingBox(n));return new Ns(i,l)}static adjustBoundingBox(e){if(e==null)return null;let n=e.getRowHeights();if(n==null)return null;let i=bt.getMax(n),l=0;for(let h of n)if(l+=i-h,h>0)break;let c=e.getCodewords();for(let h=0;l>0&&c[h]==null;h++)l--;let u=0;for(let h=n.length-1;h>=0&&(u+=i-n[h],!(n[h]>0));h--);for(let h=c.length-1;u>0&&c[h]==null;h--)u--;return e.getBoundingBox().addMissingRows(l,u,e.isLeft())}static getMax(e){let n=-1;for(let i of e)n=Math.max(n,i);return n}static getBarcodeMetadata(e,n){let i;if(e==null||(i=e.getBarcodeMetadata())==null)return n==null?null:n.getBarcodeMetadata();let l;return n==null||(l=n.getBarcodeMetadata())==null?i:i.getColumnCount()!==l.getColumnCount()&&i.getErrorCorrectionLevel()!==l.getErrorCorrectionLevel()&&i.getRowCount()!==l.getRowCount()?null:i}static getRowIndicatorColumn(e,n,i,l,c,u){let h=new nl(n,l);for(let g=0;g<2;g++){let C=g===0?1:-1,_=Math.trunc(Math.trunc(i.getX()));for(let P=Math.trunc(Math.trunc(i.getY()));P<=n.getMaxY()&&P>=n.getMinY();P+=C){let D=bt.detectCodeword(e,0,e.getWidth(),l,_,P,c,u);D!=null&&(h.setCodeword(P,D),l?_=D.getStartX():_=D.getEndX())}}return h}static adjustCodewordCount(e,n){let i=n[0][1],l=i.getValue(),c=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-bt.getNumberOfECCodeWords(e.getBarcodeECLevel());if(l.length===0){if(c<1||c>xt.MAX_CODEWORDS_IN_BARCODE)throw J.getNotFoundInstance();i.setValue(c)}else l[0]!==c&&i.setValue(c)}static createDecoderResult(e){let n=bt.createBarcodeMatrix(e);bt.adjustCodewordCount(e,n);let i=new Array,l=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),c=[],u=new Array;for(let g=0;g<e.getBarcodeRowCount();g++)for(let C=0;C<e.getBarcodeColumnCount();C++){let _=n[g][C+1].getValue(),P=g*e.getBarcodeColumnCount()+C;_.length===0?i.push(P):_.length===1?l[P]=_[0]:(u.push(P),c.push(_))}let h=new Array(c.length);for(let g=0;g<h.length;g++)h[g]=c[g];return bt.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),l,xt.toIntArray(i),xt.toIntArray(u),h)}static createDecoderResultFromAmbiguousValues(e,n,i,l,c){let u=new Int32Array(l.length),h=100;for(;h-- >0;){for(let g=0;g<u.length;g++)n[l[g]]=c[g][u[g]];try{return bt.decodeCodewords(n,e,i)}catch(g){if(!(g instanceof M))throw g}if(u.length===0)throw M.getChecksumInstance();for(let g=0;g<u.length;g++)if(u[g]<c[g].length-1){u[g]++;break}else if(u[g]=0,g===u.length-1)throw M.getChecksumInstance()}throw M.getChecksumInstance()}static createBarcodeMatrix(e){let n=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let l=0;l<n.length;l++)for(let c=0;c<n[l].length;c++)n[l][c]=new ui;let i=0;for(let l of e.getDetectionResultColumns()){if(l!=null){for(let c of l.getCodewords())if(c!=null){let u=c.getRowNumber();if(u>=0){if(u>=n.length)continue;n[u][i].setValue(c.getValue())}}}i++}return n}static isValidBarcodeColumn(e,n){return n>=0&&n<=e.getBarcodeColumnCount()+1}static getStartColumn(e,n,i,l){let c=l?1:-1,u=null;if(bt.isValidBarcodeColumn(e,n-c)&&(u=e.getDetectionResultColumn(n-c).getCodeword(i)),u!=null)return l?u.getEndX():u.getStartX();if(u=e.getDetectionResultColumn(n).getCodewordNearby(i),u!=null)return l?u.getStartX():u.getEndX();if(bt.isValidBarcodeColumn(e,n-c)&&(u=e.getDetectionResultColumn(n-c).getCodewordNearby(i)),u!=null)return l?u.getEndX():u.getStartX();let h=0;for(;bt.isValidBarcodeColumn(e,n-c);){n-=c;for(let g of e.getDetectionResultColumn(n).getCodewords())if(g!=null)return(l?g.getEndX():g.getStartX())+c*h*(g.getEndX()-g.getStartX());h++}return l?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,n,i,l,c,u,h,g){c=bt.adjustCodewordStartColumn(e,n,i,l,c,u);let C=bt.getModuleBitCount(e,n,i,l,c,u);if(C==null)return null;let _,P=Je.sum(C);if(l)_=c+P;else{for(let Y=0;Y<C.length/2;Y++){let $=C[Y];C[Y]=C[C.length-1-Y],C[C.length-1-Y]=$}_=c,c=_-P}if(!bt.checkCodewordSkew(P,h,g))return null;let D=Bn.getDecodedValue(C),z=xt.getCodeword(D);return z===-1?null:new Ti(c,_,bt.getCodewordBucketNumber(D),z)}static getModuleBitCount(e,n,i,l,c,u){let h=c,g=new Int32Array(8),C=0,_=l?1:-1,P=l;for(;(l?h<i:h>=n)&&C<g.length;)e.get(h,u)===P?(g[C]++,h+=_):(C++,P=!P);return C===g.length||h===(l?i:n)&&C===g.length-1?g:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,n,i,l,c,u){let h=c,g=l?-1:1;for(let C=0;C<2;C++){for(;(l?h>=n:h<i)&&l===e.get(h,u);){if(Math.abs(c-h)>bt.CODEWORD_SKEW_SIZE)return c;h+=g}g=-g,l=!l}return h}static checkCodewordSkew(e,n,i){return n-bt.CODEWORD_SKEW_SIZE<=e&&e<=i+bt.CODEWORD_SKEW_SIZE}static decodeCodewords(e,n,i){if(e.length===0)throw X.getFormatInstance();let l=1<<n+1,c=bt.correctErrors(e,i,l);bt.verifyCodewordCount(e,l);let u=de.decode(e,""+n);return u.setErrorsCorrected(c),u.setErasures(i.length),u}static correctErrors(e,n,i){if(n!=null&&n.length>i/2+bt.MAX_ERRORS||i<0||i>bt.MAX_EC_CODEWORDS)throw M.getChecksumInstance();return bt.errorCorrection.decode(e,i,n)}static verifyCodewordCount(e,n){if(e.length<4)throw X.getFormatInstance();let i=e[0];if(i>e.length)throw X.getFormatInstance();if(i===0)if(n<e.length)e[0]=e.length-n;else throw X.getFormatInstance()}static getBitCountForCodeword(e){let n=new Int32Array(8),i=0,l=n.length-1;for(;!((e&1)!==i&&(i=e&1,l--,l<0));)n[l]++,e>>=1;return n}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return bt.getCodewordBucketNumber(bt.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let n=new qr;for(let i=0;i<e.length;i++){n.format("Row %2d: ",i);for(let l=0;l<e[i].length;l++){let c=e[i][l];c.getValue().length===0?n.format("        ",null):n.format("%4d(%2d)",c.getValue()[0],c.getConfidence(c.getValue()[0]))}n.format("%n")}return n.toString()}}bt.CODEWORD_SKEW_SIZE=2,bt.MAX_ERRORS=3,bt.MAX_EC_CODEWORDS=512,bt.errorCorrection=new Zo;class jn{decode(e,n=null){let i=jn.decode(e,n,!1);if(i==null||i.length===0||i[0]==null)throw J.getNotFoundInstance();return i[0]}decodeMultiple(e,n=null){try{return jn.decode(e,n,!0)}catch(i){throw i instanceof X||i instanceof M?J.getNotFoundInstance():i}}static decode(e,n,i){const l=new Array,c=Ct.detectMultiple(e,n,i);for(const u of c.getPoints()){const h=bt.decode(c.getBits(),u[4],u[5],u[6],u[7],jn.getMinCodewordWidth(u),jn.getMaxCodewordWidth(u)),g=new be(h.getText(),h.getRawBytes(),void 0,u,ie.PDF_417);g.putMetadata(ve.ERROR_CORRECTION_LEVEL,h.getECLevel());const C=h.getOther();C!=null&&g.putMetadata(ve.PDF417_EXTRA_METADATA,C),l.push(g)}return l.map(u=>u)}static getMaxWidth(e,n){return e==null||n==null?0:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMinWidth(e,n){return e==null||n==null?F.MAX_VALUE:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(jn.getMaxWidth(e[0],e[4]),jn.getMaxWidth(e[6],e[2])*xt.MODULES_IN_CODEWORD/xt.MODULES_IN_STOP_PATTERN),Math.max(jn.getMaxWidth(e[1],e[5]),jn.getMaxWidth(e[7],e[3])*xt.MODULES_IN_CODEWORD/xt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(jn.getMinWidth(e[0],e[4]),jn.getMinWidth(e[6],e[2])*xt.MODULES_IN_CODEWORD/xt.MODULES_IN_STOP_PATTERN),Math.min(jn.getMinWidth(e[1],e[5]),jn.getMinWidth(e[7],e[3])*xt.MODULES_IN_CODEWORD/xt.MODULES_IN_STOP_PATTERN)))}reset(){}}class $i extends E{}$i.kind="ReaderException";class ao{constructor(e,n){this.verbose=e===!0,n&&this.setHints(n)}decode(e,n){return n&&this.setHints(n),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const n=!f(e)&&e.get(re.TRY_HARDER)===!0,i=f(e)?null:e.get(re.POSSIBLE_FORMATS),l=new Array;if(!f(i)){const c=i.some(u=>u===ie.UPC_A||u===ie.UPC_E||u===ie.EAN_13||u===ie.EAN_8||u===ie.CODABAR||u===ie.CODE_39||u===ie.CODE_93||u===ie.CODE_128||u===ie.ITF||u===ie.RSS_14||u===ie.RSS_EXPANDED);c&&!n&&l.push(new Si(e,this.verbose)),i.includes(ie.QR_CODE)&&l.push(new Zn),i.includes(ie.DATA_MATRIX)&&l.push(new Rr),i.includes(ie.AZTEC)&&l.push(new qe),i.includes(ie.PDF_417)&&l.push(new jn),c&&n&&l.push(new Si(e,this.verbose))}l.length===0&&(n||l.push(new Si(e,this.verbose)),l.push(new Zn),l.push(new Rr),l.push(new qe),l.push(new jn),n&&l.push(new Si(e,this.verbose))),this.readers=l}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new $i("No readers where selected, nothing can be read.");for(const n of this.readers)try{return n.decode(e,this.hints)}catch(i){if(i instanceof $i)continue}throw new J("No MultiFormat Readers were able to detect the code.")}}class ks extends we{constructor(e=null,n=500){const i=new ao;i.setHints(e),super(i,n)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class lo extends we{constructor(e=500){super(new jn,e)}}class il extends we{constructor(e=500){super(new Zn,e)}}var qo;(function(k){k[k.ERROR_CORRECTION=0]="ERROR_CORRECTION",k[k.CHARACTER_SET=1]="CHARACTER_SET",k[k.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",k[k.MIN_SIZE=3]="MIN_SIZE",k[k.MAX_SIZE=4]="MAX_SIZE",k[k.MARGIN=5]="MARGIN",k[k.PDF417_COMPACT=6]="PDF417_COMPACT",k[k.PDF417_COMPACTION=7]="PDF417_COMPACTION",k[k.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",k[k.AZTEC_LAYERS=9]="AZTEC_LAYERS",k[k.QR_VERSION=10]="QR_VERSION"})(qo||(qo={}));var bn=qo;class Qo{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Ae(e,Int32Array.from([1])))}buildGenerator(e){const n=this.cachedGenerators;if(e>=n.length){let i=n[n.length-1];const l=this.field;for(let c=n.length;c<=e;c++){const u=i.multiply(new Ae(l,Int32Array.from([1,l.exp(c-1+l.getGeneratorBase())])));n.push(u),i=u}}return n[e]}encode(e,n){if(n===0)throw new N("No error correction bytes");const i=e.length-n;if(i<=0)throw new N("No data bytes provided");const l=this.buildGenerator(n),c=new Int32Array(i);B.arraycopy(e,0,c,0,i);let u=new Ae(this.field,c);u=u.multiplyByMonomial(n,1);const g=u.divide(l)[1].getCoefficients(),C=n-g.length;for(let _=0;_<C;_++)e[i+_]=0;B.arraycopy(g,0,e,i+C,g.length)}}class Jt{constructor(){}static applyMaskPenaltyRule1(e){return Jt.applyMaskPenaltyRule1Internal(e,!0)+Jt.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let n=0;const i=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let u=0;u<c-1;u++){const h=i[u];for(let g=0;g<l-1;g++){const C=h[g];C===h[g+1]&&C===i[u+1][g]&&C===i[u+1][g+1]&&n++}}return Jt.N2*n}static applyMaskPenaltyRule3(e){let n=0;const i=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let u=0;u<c;u++)for(let h=0;h<l;h++){const g=i[u];h+6<l&&g[h]===1&&g[h+1]===0&&g[h+2]===1&&g[h+3]===1&&g[h+4]===1&&g[h+5]===0&&g[h+6]===1&&(Jt.isWhiteHorizontal(g,h-4,h)||Jt.isWhiteHorizontal(g,h+7,h+11))&&n++,u+6<c&&i[u][h]===1&&i[u+1][h]===0&&i[u+2][h]===1&&i[u+3][h]===1&&i[u+4][h]===1&&i[u+5][h]===0&&i[u+6][h]===1&&(Jt.isWhiteVertical(i,h,u-4,u)||Jt.isWhiteVertical(i,h,u+7,u+11))&&n++}return n*Jt.N3}static isWhiteHorizontal(e,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(let l=n;l<i;l++)if(e[l]===1)return!1;return!0}static isWhiteVertical(e,n,i,l){i=Math.max(i,0),l=Math.min(l,e.length);for(let c=i;c<l;c++)if(e[c][n]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let n=0;const i=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let g=0;g<c;g++){const C=i[g];for(let _=0;_<l;_++)C[_]===1&&n++}const u=e.getHeight()*e.getWidth();return Math.floor(Math.abs(n*2-u)*10/u)*Jt.N4}static getDataMaskBit(e,n,i){let l,c;switch(e){case 0:l=i+n&1;break;case 1:l=i&1;break;case 2:l=n%3;break;case 3:l=(i+n)%3;break;case 4:l=Math.floor(i/2)+Math.floor(n/3)&1;break;case 5:c=i*n,l=(c&1)+c%3;break;case 6:c=i*n,l=(c&1)+c%3&1;break;case 7:c=i*n,l=c%3+(i+n&1)&1;break;default:throw new N("Invalid mask pattern: "+e)}return l===0}static applyMaskPenaltyRule1Internal(e,n){let i=0;const l=n?e.getHeight():e.getWidth(),c=n?e.getWidth():e.getHeight(),u=e.getArray();for(let h=0;h<l;h++){let g=0,C=-1;for(let _=0;_<c;_++){const P=n?u[h][_]:u[_][h];P===C?g++:(g>=5&&(i+=Jt.N1+(g-5)),g=1,C=P)}g>=5&&(i+=Jt.N1+(g-5))}return i}}Jt.N1=3,Jt.N2=3,Jt.N3=40,Jt.N4=10;class co{constructor(e,n){this.width=e,this.height=n;const i=new Array(n);for(let l=0;l!==n;l++)i[l]=new Uint8Array(e);this.bytes=i}getHeight(){return this.height}getWidth(){return this.width}get(e,n){return this.bytes[n][e]}getArray(){return this.bytes}setNumber(e,n,i){this.bytes[n][e]=i}setBoolean(e,n,i){this.bytes[n][e]=i?1:0}clear(e){for(const n of this.bytes)W.fill(n,e)}equals(e){if(!(e instanceof co))return!1;const n=e;if(this.width!==n.width||this.height!==n.height)return!1;for(let i=0,l=this.height;i<l;++i){const c=this.bytes[i],u=n.bytes[i];for(let h=0,g=this.width;h<g;++h)if(c[h]!==u[h])return!1}return!0}toString(){const e=new Ne;for(let n=0,i=this.height;n<i;++n){const l=this.bytes[n];for(let c=0,u=this.width;c<u;++c)switch(l[c]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class Ii{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new Ne;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Ii.NUM_MASK_PATTERNS}}Ii.NUM_MASK_PATTERNS=8;class Xt extends E{}Xt.kind="WriterException";class dt{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,n,i,l,c){dt.clearMatrix(c),dt.embedBasicPatterns(i,c),dt.embedTypeInfo(n,l,c),dt.maybeEmbedVersionInfo(i,c),dt.embedDataBits(e,l,c)}static embedBasicPatterns(e,n){dt.embedPositionDetectionPatternsAndSeparators(n),dt.embedDarkDotAtLeftBottomCorner(n),dt.maybeEmbedPositionAdjustmentPatterns(e,n),dt.embedTimingPatterns(n)}static embedTypeInfo(e,n,i){const l=new q;dt.makeTypeInfoBits(e,n,l);for(let c=0,u=l.getSize();c<u;++c){const h=l.get(l.getSize()-1-c),g=dt.TYPE_INFO_COORDINATES[c],C=g[0],_=g[1];if(i.setBoolean(C,_,h),c<8){const P=i.getWidth()-c-1;i.setBoolean(P,8,h)}else{const D=i.getHeight()-7+(c-8);i.setBoolean(8,D,h)}}}static maybeEmbedVersionInfo(e,n){if(e.getVersionNumber()<7)return;const i=new q;dt.makeVersionInfoBits(e,i);let l=6*3-1;for(let c=0;c<6;++c)for(let u=0;u<3;++u){const h=i.get(l);l--,n.setBoolean(c,n.getHeight()-11+u,h),n.setBoolean(n.getHeight()-11+u,c,h)}}static embedDataBits(e,n,i){let l=0,c=-1,u=i.getWidth()-1,h=i.getHeight()-1;for(;u>0;){for(u===6&&(u-=1);h>=0&&h<i.getHeight();){for(let g=0;g<2;++g){const C=u-g;if(!dt.isEmpty(i.get(C,h)))continue;let _;l<e.getSize()?(_=e.get(l),++l):_=!1,n!==255&&Jt.getDataMaskBit(n,C,h)&&(_=!_),i.setBoolean(C,h,_)}h+=c}c=-c,h+=c,u-=2}if(l!==e.getSize())throw new Xt("Not all bits consumed: "+l+"/"+e.getSize())}static findMSBSet(e){return 32-F.numberOfLeadingZeros(e)}static calculateBCHCode(e,n){if(n===0)throw new N("0 polynomial");const i=dt.findMSBSet(n);for(e<<=i-1;dt.findMSBSet(e)>=i;)e^=n<<dt.findMSBSet(e)-i;return e}static makeTypeInfoBits(e,n,i){if(!Ii.isValidMaskPattern(n))throw new Xt("Invalid mask pattern");const l=e.getBits()<<3|n;i.appendBits(l,5);const c=dt.calculateBCHCode(l,dt.TYPE_INFO_POLY);i.appendBits(c,10);const u=new q;if(u.appendBits(dt.TYPE_INFO_MASK_PATTERN,15),i.xor(u),i.getSize()!==15)throw new Xt("should not happen but we got: "+i.getSize())}static makeVersionInfoBits(e,n){n.appendBits(e.getVersionNumber(),6);const i=dt.calculateBCHCode(e.getVersionNumber(),dt.VERSION_INFO_POLY);if(n.appendBits(i,12),n.getSize()!==18)throw new Xt("should not happen but we got: "+n.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let n=8;n<e.getWidth()-8;++n){const i=(n+1)%2;dt.isEmpty(e.get(n,6))&&e.setNumber(n,6,i),dt.isEmpty(e.get(6,n))&&e.setNumber(6,n,i)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new Xt;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,n,i){for(let l=0;l<8;++l){if(!dt.isEmpty(i.get(e+l,n)))throw new Xt;i.setNumber(e+l,n,0)}}static embedVerticalSeparationPattern(e,n,i){for(let l=0;l<7;++l){if(!dt.isEmpty(i.get(e,n+l)))throw new Xt;i.setNumber(e,n+l,0)}}static embedPositionAdjustmentPattern(e,n,i){for(let l=0;l<5;++l){const c=dt.POSITION_ADJUSTMENT_PATTERN[l];for(let u=0;u<5;++u)i.setNumber(e+u,n+l,c[u])}}static embedPositionDetectionPattern(e,n,i){for(let l=0;l<7;++l){const c=dt.POSITION_DETECTION_PATTERN[l];for(let u=0;u<7;++u)i.setNumber(e+u,n+l,c[u])}}static embedPositionDetectionPatternsAndSeparators(e){const n=dt.POSITION_DETECTION_PATTERN[0].length;dt.embedPositionDetectionPattern(0,0,e),dt.embedPositionDetectionPattern(e.getWidth()-n,0,e),dt.embedPositionDetectionPattern(0,e.getWidth()-n,e);const i=8;dt.embedHorizontalSeparationPattern(0,i-1,e),dt.embedHorizontalSeparationPattern(e.getWidth()-i,i-1,e),dt.embedHorizontalSeparationPattern(0,e.getWidth()-i,e);const l=7;dt.embedVerticalSeparationPattern(l,0,e),dt.embedVerticalSeparationPattern(e.getHeight()-l-1,0,e),dt.embedVerticalSeparationPattern(l,e.getHeight()-l,e)}static maybeEmbedPositionAdjustmentPatterns(e,n){if(e.getVersionNumber()<2)return;const i=e.getVersionNumber()-1,l=dt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[i];for(let c=0,u=l.length;c!==u;c++){const h=l[c];if(h>=0)for(let g=0;g!==u;g++){const C=l[g];C>=0&&dt.isEmpty(n.get(C,h))&&dt.embedPositionAdjustmentPattern(C-2,h-2,n)}}}}dt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),dt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),dt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),dt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),dt.VERSION_INFO_POLY=7973,dt.TYPE_INFO_POLY=1335,dt.TYPE_INFO_MASK_PATTERN=21522;class Uc{constructor(e,n){this.dataBytes=e,this.errorCorrectionBytes=n}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Kt{constructor(){}static calculateMaskPenalty(e){return Jt.applyMaskPenaltyRule1(e)+Jt.applyMaskPenaltyRule2(e)+Jt.applyMaskPenaltyRule3(e)+Jt.applyMaskPenaltyRule4(e)}static encode(e,n,i=null){let l=Kt.DEFAULT_BYTE_MODE_ENCODING;const c=i!==null&&i.get(bn.CHARACTER_SET)!==void 0;c&&(l=i.get(bn.CHARACTER_SET).toString());const u=this.chooseMode(e,l),h=new q;if(u===lt.BYTE&&(c||Kt.DEFAULT_BYTE_MODE_ENCODING!==l)){const Me=te.getCharacterSetECIByName(l);Me!==void 0&&this.appendECI(Me,h)}this.appendModeInfo(u,h);const g=new q;this.appendBytes(e,u,g,l);let C;if(i!==null&&i.get(bn.QR_VERSION)!==void 0){const Me=Number.parseInt(i.get(bn.QR_VERSION).toString(),10);C=ot.getVersionForNumber(Me);const Ie=this.calculateBitsNeeded(u,h,g,C);if(!this.willFit(Ie,C,n))throw new Xt("Data too big for requested version")}else C=this.recommendVersion(n,u,h,g);const _=new q;_.appendBitArray(h);const P=u===lt.BYTE?g.getSizeInBytes():e.length;this.appendLengthInfo(P,C,u,_),_.appendBitArray(g);const D=C.getECBlocksForLevel(n),z=C.getTotalCodewords()-D.getTotalECCodewords();this.terminateBits(z,_);const Y=this.interleaveWithECBytes(_,C.getTotalCodewords(),z,D.getNumBlocks()),$=new Ii;$.setECLevel(n),$.setMode(u),$.setVersion(C);const ne=C.getDimensionForVersion(),ue=new co(ne,ne),Oe=this.chooseMaskPattern(Y,n,C,ue);return $.setMaskPattern(Oe),dt.buildMatrix(Y,n,C,Oe,ue),$.setMatrix(ue),$}static recommendVersion(e,n,i,l){const c=this.calculateBitsNeeded(n,i,l,ot.getVersionForNumber(1)),u=this.chooseVersion(c,e),h=this.calculateBitsNeeded(n,i,l,u);return this.chooseVersion(h,e)}static calculateBitsNeeded(e,n,i,l){return n.getSize()+e.getCharacterCountBits(l)+i.getSize()}static getAlphanumericCode(e){return e<Kt.ALPHANUMERIC_TABLE.length?Kt.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,n=null){if(te.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(e))return lt.KANJI;let i=!1,l=!1;for(let c=0,u=e.length;c<u;++c){const h=e.charAt(c);if(Kt.isDigit(h))i=!0;else if(this.getAlphanumericCode(h.charCodeAt(0))!==-1)l=!0;else return lt.BYTE}return l?lt.ALPHANUMERIC:i?lt.NUMERIC:lt.BYTE}static isOnlyDoubleByteKanji(e){let n;try{n=Le.encode(e,te.SJIS)}catch{return!1}const i=n.length;if(i%2!==0)return!1;for(let l=0;l<i;l+=2){const c=n[l]&255;if((c<129||c>159)&&(c<224||c>235))return!1}return!0}static chooseMaskPattern(e,n,i,l){let c=Number.MAX_SAFE_INTEGER,u=-1;for(let h=0;h<Ii.NUM_MASK_PATTERNS;h++){dt.buildMatrix(e,n,i,h,l);let g=this.calculateMaskPenalty(l);g<c&&(c=g,u=h)}return u}static chooseVersion(e,n){for(let i=1;i<=40;i++){const l=ot.getVersionForNumber(i);if(Kt.willFit(e,l,n))return l}throw new Xt("Data too big")}static willFit(e,n,i){const l=n.getTotalCodewords(),u=n.getECBlocksForLevel(i).getTotalECCodewords(),h=l-u,g=(e+7)/8;return h>=g}static terminateBits(e,n){const i=e*8;if(n.getSize()>i)throw new Xt("data bits cannot fit in the QR Code"+n.getSize()+" > "+i);for(let u=0;u<4&&n.getSize()<i;++u)n.appendBit(!1);const l=n.getSize()&7;if(l>0)for(let u=l;u<8;u++)n.appendBit(!1);const c=e-n.getSizeInBytes();for(let u=0;u<c;++u)n.appendBits(u&1?17:236,8);if(n.getSize()!==i)throw new Xt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,n,i,l,c,u){if(l>=i)throw new Xt("Block ID too large");const h=e%i,g=i-h,C=Math.floor(e/i),_=C+1,P=Math.floor(n/i),D=P+1,z=C-P,Y=_-D;if(z!==Y)throw new Xt("EC bytes mismatch");if(i!==g+h)throw new Xt("RS blocks mismatch");if(e!==(P+z)*g+(D+Y)*h)throw new Xt("Total bytes mismatch");l<g?(c[0]=P,u[0]=z):(c[0]=D,u[0]=Y)}static interleaveWithECBytes(e,n,i,l){if(e.getSizeInBytes()!==i)throw new Xt("Number of bits and data bytes does not match");let c=0,u=0,h=0;const g=new Array;for(let _=0;_<l;++_){const P=new Int32Array(1),D=new Int32Array(1);Kt.getNumDataBytesAndNumECBytesForBlockID(n,i,l,_,P,D);const z=P[0],Y=new Uint8Array(z);e.toBytes(8*c,Y,0,z);const $=Kt.generateECBytes(Y,D[0]);g.push(new Uc(Y,$)),u=Math.max(u,z),h=Math.max(h,$.length),c+=P[0]}if(i!==c)throw new Xt("Data bytes does not match offset");const C=new q;for(let _=0;_<u;++_)for(const P of g){const D=P.getDataBytes();_<D.length&&C.appendBits(D[_],8)}for(let _=0;_<h;++_)for(const P of g){const D=P.getErrorCorrectionBytes();_<D.length&&C.appendBits(D[_],8)}if(n!==C.getSizeInBytes())throw new Xt("Interleaving error: "+n+" and "+C.getSizeInBytes()+" differ.");return C}static generateECBytes(e,n){const i=e.length,l=new Int32Array(i+n);for(let u=0;u<i;u++)l[u]=e[u]&255;new Qo(xe.QR_CODE_FIELD_256).encode(l,n);const c=new Uint8Array(n);for(let u=0;u<n;u++)c[u]=l[i+u];return c}static appendModeInfo(e,n){n.appendBits(e.getBits(),4)}static appendLengthInfo(e,n,i,l){const c=i.getCharacterCountBits(n);if(e>=1<<c)throw new Xt(e+" is bigger than "+((1<<c)-1));l.appendBits(e,c)}static appendBytes(e,n,i,l){switch(n){case lt.NUMERIC:Kt.appendNumericBytes(e,i);break;case lt.ALPHANUMERIC:Kt.appendAlphanumericBytes(e,i);break;case lt.BYTE:Kt.append8BitBytes(e,i,l);break;case lt.KANJI:Kt.appendKanjiBytes(e,i);break;default:throw new Xt("Invalid mode: "+n)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const n=Kt.getDigit(e);return n>=0&&n<=9}static appendNumericBytes(e,n){const i=e.length;let l=0;for(;l<i;){const c=Kt.getDigit(e.charAt(l));if(l+2<i){const u=Kt.getDigit(e.charAt(l+1)),h=Kt.getDigit(e.charAt(l+2));n.appendBits(c*100+u*10+h,10),l+=3}else if(l+1<i){const u=Kt.getDigit(e.charAt(l+1));n.appendBits(c*10+u,7),l+=2}else n.appendBits(c,4),l++}}static appendAlphanumericBytes(e,n){const i=e.length;let l=0;for(;l<i;){const c=Kt.getAlphanumericCode(e.charCodeAt(l));if(c===-1)throw new Xt;if(l+1<i){const u=Kt.getAlphanumericCode(e.charCodeAt(l+1));if(u===-1)throw new Xt;n.appendBits(c*45+u,11),l+=2}else n.appendBits(c,6),l++}}static append8BitBytes(e,n,i){let l;try{l=Le.encode(e,i)}catch(c){throw new Xt(c)}for(let c=0,u=l.length;c!==u;c++){const h=l[c];n.appendBits(h,8)}}static appendKanjiBytes(e,n){let i;try{i=Le.encode(e,te.SJIS)}catch(c){throw new Xt(c)}const l=i.length;for(let c=0;c<l;c+=2){const u=i[c]&255,h=i[c+1]&255,g=u<<8&4294967295|h;let C=-1;if(g>=33088&&g<=40956?C=g-33088:g>=57408&&g<=60351&&(C=g-49472),C===-1)throw new Xt("Invalid byte sequence");const _=(C>>8)*192+(C&255);n.appendBits(_,13)}}static appendECI(e,n){n.appendBits(lt.ECI.getBits(),4),n.appendBits(e.getValue(),8)}}Kt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Kt.DEFAULT_BYTE_MODE_ENCODING=te.UTF8.getName();class Ni{write(e,n,i,l=null){if(e.length===0)throw new N("Found empty contents");if(n<0||i<0)throw new N("Requested dimensions are too small: "+n+"x"+i);let c=Gt.L,u=Ni.QUIET_ZONE_SIZE;l!==null&&(l.get(bn.ERROR_CORRECTION)!==void 0&&(c=Gt.fromString(l.get(bn.ERROR_CORRECTION).toString())),l.get(bn.MARGIN)!==void 0&&(u=Number.parseInt(l.get(bn.MARGIN).toString(),10)));const h=Kt.encode(e,c,l);return this.renderResult(h,n,i,u)}writeToDom(e,n,i,l,c=null){typeof e=="string"&&(e=document.querySelector(e));const u=this.write(n,i,l,c);e&&e.appendChild(u)}renderResult(e,n,i,l){const c=e.getMatrix();if(c===null)throw new Ze;const u=c.getWidth(),h=c.getHeight(),g=u+l*2,C=h+l*2,_=Math.max(n,g),P=Math.max(i,C),D=Math.min(Math.floor(_/g),Math.floor(P/C)),z=Math.floor((_-u*D)/2),Y=Math.floor((P-h*D)/2),$=this.createSVGElement(_,P);for(let ne=0,ue=Y;ne<h;ne++,ue+=D)for(let Oe=0,Me=z;Oe<u;Oe++,Me+=D)if(c.get(Oe,ne)===1){const Ie=this.createSvgRectElement(Me,ue,D,D);$.appendChild(Ie)}return $}createSVGElement(e,n){const i=document.createElementNS(Ni.SVG_NS,"svg");return i.setAttributeNS(null,"height",e.toString()),i.setAttributeNS(null,"width",n.toString()),i}createSvgRectElement(e,n,i,l){const c=document.createElementNS(Ni.SVG_NS,"rect");return c.setAttributeNS(null,"x",e.toString()),c.setAttributeNS(null,"y",n.toString()),c.setAttributeNS(null,"height",i.toString()),c.setAttributeNS(null,"width",l.toString()),c.setAttributeNS(null,"fill","#000000"),c}}Ni.QUIET_ZONE_SIZE=4,Ni.SVG_NS="http://www.w3.org/2000/svg";class qi{encode(e,n,i,l,c){if(e.length===0)throw new N("Found empty contents");if(n!==ie.QR_CODE)throw new N("Can only encode QR_CODE, but got "+n);if(i<0||l<0)throw new N(`Requested dimensions are too small: ${i}x${l}`);let u=Gt.L,h=qi.QUIET_ZONE_SIZE;c!==null&&(c.get(bn.ERROR_CORRECTION)!==void 0&&(u=Gt.fromString(c.get(bn.ERROR_CORRECTION).toString())),c.get(bn.MARGIN)!==void 0&&(h=Number.parseInt(c.get(bn.MARGIN).toString(),10)));const g=Kt.encode(e,u,c);return qi.renderResult(g,i,l,h)}static renderResult(e,n,i,l){const c=e.getMatrix();if(c===null)throw new Ze;const u=c.getWidth(),h=c.getHeight(),g=u+l*2,C=h+l*2,_=Math.max(n,g),P=Math.max(i,C),D=Math.min(Math.floor(_/g),Math.floor(P/C)),z=Math.floor((_-u*D)/2),Y=Math.floor((P-h*D)/2),$=new Ee(_,P);for(let ne=0,ue=Y;ne<h;ne++,ue+=D)for(let Oe=0,Me=z;Oe<u;Oe++,Me+=D)c.get(Oe,ne)===1&&$.setRegion(Me,ue,D,D);return $}}qi.QUIET_ZONE_SIZE=4;class zc{encode(e,n,i,l,c){let u;switch(n){case ie.QR_CODE:u=new qi;break;default:throw new N("No encoder available for format "+n)}return u.encode(e,n,i,l,c)}}class Fr extends he{constructor(e,n,i,l,c,u,h,g){if(super(u,h),this.yuvData=e,this.dataWidth=n,this.dataHeight=i,this.left=l,this.top=c,l+u>n||c+h>i)throw new N("Crop rectangle does not fit within image data.");g&&this.reverseHorizontal(u,h)}getRow(e,n){if(e<0||e>=this.getHeight())throw new N("Requested row is outside the image: "+e);const i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));const l=(e+this.top)*this.dataWidth+this.left;return B.arraycopy(this.yuvData,l,n,0,i),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.yuvData;const i=e*n,l=new Uint8ClampedArray(i);let c=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return B.arraycopy(this.yuvData,c,l,0,i),l;for(let u=0;u<n;u++){const h=u*e;B.arraycopy(this.yuvData,c,l,h,e),c+=this.dataWidth}return l}isCropSupported(){return!0}crop(e,n,i,l){return new Fr(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+n,i,l,!1)}renderThumbnail(){const e=this.getWidth()/Fr.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/Fr.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(e*n),l=this.yuvData;let c=this.top*this.dataWidth+this.left;for(let u=0;u<n;u++){const h=u*e;for(let g=0;g<e;g++){const C=l[c+g*Fr.THUMBNAIL_SCALE_FACTOR]&255;i[h+g]=4278190080|C*65793}c+=this.dataWidth*Fr.THUMBNAIL_SCALE_FACTOR}return i}getThumbnailWidth(){return this.getWidth()/Fr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Fr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,n){const i=this.yuvData;for(let l=0,c=this.top*this.dataWidth+this.left;l<n;l++,c+=this.dataWidth){const u=c+e/2;for(let h=c,g=c+e-1;h<u;h++,g--){const C=i[h];i[h]=i[g],i[g]=C}}}invert(){return new De(this)}}Fr.THUMBNAIL_SCALE_FACTOR=2;class Ps extends he{constructor(e,n,i,l,c,u,h){if(super(n,i),this.dataWidth=l,this.dataHeight=c,this.left=u,this.top=h,e.BYTES_PER_ELEMENT===4){const g=n*i,C=new Uint8ClampedArray(g);for(let _=0;_<g;_++){const P=e[_],D=P>>16&255,z=P>>7&510,Y=P&255;C[_]=(D+z+Y)/4&255}this.luminances=C}else this.luminances=e;if(l===void 0&&(this.dataWidth=n),c===void 0&&(this.dataHeight=i),u===void 0&&(this.left=0),h===void 0&&(this.top=0),this.left+n>this.dataWidth||this.top+i>this.dataHeight)throw new N("Crop rectangle does not fit within image data.")}getRow(e,n){if(e<0||e>=this.getHeight())throw new N("Requested row is outside the image: "+e);const i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));const l=(e+this.top)*this.dataWidth+this.left;return B.arraycopy(this.luminances,l,n,0,i),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.luminances;const i=e*n,l=new Uint8ClampedArray(i);let c=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return B.arraycopy(this.luminances,c,l,0,i),l;for(let u=0;u<n;u++){const h=u*e;B.arraycopy(this.luminances,c,l,h,e),c+=this.dataWidth}return l}isCropSupported(){return!0}crop(e,n,i,l){return new Ps(this.luminances,i,l,this.dataWidth,this.dataHeight,this.left+e,this.top+n)}invert(){return new De(this)}}class sl extends te{static forName(e){return this.getCharacterSetECIByName(e)}}class Jo{}Jo.ISO_8859_1=te.ISO8859_1;class ol{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class ea{static singletonList(e){return[e]}static min(e,n){return e.sort(n)[0]}}class Wc{constructor(e){this.previous=e}getPrevious(){return this.previous}}class Qi extends Wc{constructor(e,n,i){super(e),this.value=n,this.bitCount=i}appendTo(e,n){e.appendBits(this.value,this.bitCount)}add(e,n){return new Qi(this,e,n)}addBinaryShift(e,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Qi(this,e,n)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+F.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class ta extends Qi{constructor(e,n,i){super(e,0,0),this.binaryShiftStart=n,this.binaryShiftByteCount=i}appendTo(e,n){for(let i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):i===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(n[this.binaryShiftStart+i],8)}addBinaryShift(e,n){return new ta(this,e,n)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Hc(k,e,n){return new ta(k,e,n)}function Os(k,e,n){return new Qi(k,e,n)}const Gc=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],di=0,Ji=1,zn=2,al=3,Pr=4,ll=new Qi(null,0,0),uo=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function cl(k){for(let e of k)W.fill(e,-1);return k[di][Pr]=0,k[Ji][Pr]=0,k[Ji][di]=28,k[al][Pr]=0,k[zn][Pr]=0,k[zn][di]=15,k}const na=cl(W.createInt32Array(6,6));class Kn{constructor(e,n,i,l){this.token=e,this.mode=n,this.binaryShiftByteCount=i,this.bitCount=l}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,n){let i=this.bitCount,l=this.token;if(e!==this.mode){let u=uo[this.mode][e];l=Os(l,u&65535,u>>16),i+=u>>16}let c=e===zn?4:5;return l=Os(l,n,c),new Kn(l,e,0,i+c)}shiftAndAppend(e,n){let i=this.token,l=this.mode===zn?4:5;return i=Os(i,na[this.mode][e],l),i=Os(i,n,5),new Kn(i,this.mode,0,this.bitCount+l+5)}addBinaryShiftChar(e){let n=this.token,i=this.mode,l=this.bitCount;if(this.mode===Pr||this.mode===zn){let h=uo[i][di];n=Os(n,h&65535,h>>16),l+=h>>16,i=di}let c=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,u=new Kn(n,i,this.binaryShiftByteCount+1,l+c);return u.binaryShiftByteCount===2078&&(u=u.endBinaryShift(e+1)),u}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let n=this.token;return n=Hc(n,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new Kn(n,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let n=this.bitCount+(uo[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?n+=Kn.calculateBinaryShiftCost(e)-Kn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(n+=10),n<=e.bitCount}toBitArray(e){let n=[];for(let l=this.endBinaryShift(e.length).token;l!==null;l=l.getPrevious())n.unshift(l);let i=new q;for(const l of n)l.appendTo(i,e);return i}toString(){return Se.format("%s bits=%d bytes=%d",Gc[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}Kn.INITIAL_STATE=new Kn(ll,di,0,0);function Xc(k){const e=Se.getCharCode(" "),n=Se.getCharCode("."),i=Se.getCharCode(",");k[di][e]=1;const l=Se.getCharCode("Z"),c=Se.getCharCode("A");for(let D=c;D<=l;D++)k[di][D]=D-c+2;k[Ji][e]=1;const u=Se.getCharCode("z"),h=Se.getCharCode("a");for(let D=h;D<=u;D++)k[Ji][D]=D-h+2;k[zn][e]=1;const g=Se.getCharCode("9"),C=Se.getCharCode("0");for(let D=C;D<=g;D++)k[zn][D]=D-C+2;k[zn][i]=12,k[zn][n]=13;const _=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let D=0;D<_.length;D++)k[al][Se.getCharCode(_[D])]=D;const P=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let D=0;D<P.length;D++)Se.getCharCode(P[D])>0&&(k[Pr][Se.getCharCode(P[D])]=D);return k}const ra=Xc(W.createInt32Array(5,256));class Ms{constructor(e){this.text=e}encode(){const e=Se.getCharCode(" "),n=Se.getCharCode(`
`);let i=ea.singletonList(Kn.INITIAL_STATE);for(let c=0;c<this.text.length;c++){let u,h=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case Se.getCharCode("\r"):u=h===n?2:0;break;case Se.getCharCode("."):u=h===e?3:0;break;case Se.getCharCode(","):u=h===e?4:0;break;case Se.getCharCode(":"):u=h===e?5:0;break;default:u=0}u>0?(i=Ms.updateStateListForPair(i,c,u),c++):i=this.updateStateListForChar(i,c)}return ea.min(i,(c,u)=>c.getBitCount()-u.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,n){const i=[];for(let l of e)this.updateStateForChar(l,n,i);return Ms.simplifyStates(i)}updateStateForChar(e,n,i){let l=this.text[n]&255,c=ra[e.getMode()][l]>0,u=null;for(let h=0;h<=Pr;h++){let g=ra[h][l];if(g>0){if(u==null&&(u=e.endBinaryShift(n)),!c||h===e.getMode()||h===zn){const C=u.latchAndAppend(h,g);i.push(C)}if(!c&&na[e.getMode()][h]>=0){const C=u.shiftAndAppend(h,g);i.push(C)}}}if(e.getBinaryShiftByteCount()>0||ra[e.getMode()][l]===0){let h=e.addBinaryShiftChar(n);i.push(h)}}static updateStateListForPair(e,n,i){const l=[];for(let c of e)this.updateStateForPair(c,n,i,l);return this.simplifyStates(l)}static updateStateForPair(e,n,i,l){let c=e.endBinaryShift(n);if(l.push(c.latchAndAppend(Pr,i)),e.getMode()!==Pr&&l.push(c.shiftAndAppend(Pr,i)),i===3||i===4){let u=c.latchAndAppend(zn,16-i).latchAndAppend(zn,1);l.push(u)}if(e.getBinaryShiftByteCount()>0){let u=e.addBinaryShiftChar(n).addBinaryShiftChar(n+1);l.push(u)}}static simplifyStates(e){let n=[];for(const i of e){let l=!0;for(const c of n){if(c.isBetterThanOrEqualTo(i)){l=!1;break}i.isBetterThanOrEqualTo(c)&&(n=n.filter(u=>u!==c))}l&&n.push(i)}return n}}class Lt{constructor(){}static encodeBytes(e){return Lt.encode(e,Lt.DEFAULT_EC_PERCENT,Lt.DEFAULT_AZTEC_LAYERS)}static encode(e,n,i){let l=new Ms(e).encode(),c=F.truncDivision(l.getSize()*n,100)+11,u=l.getSize()+c,h,g,C,_,P;if(i!==Lt.DEFAULT_AZTEC_LAYERS){if(h=i<0,g=Math.abs(i),g>(h?Lt.MAX_NB_BITS_COMPACT:Lt.MAX_NB_BITS))throw new N(Se.format("Illegal value %s for layers",i));C=Lt.totalBitsInLayer(g,h),_=Lt.WORD_SIZE[g];let Ie=C-C%_;if(P=Lt.stuffBits(l,_),P.getSize()+c>Ie)throw new N("Data to large for user specified layer");if(h&&P.getSize()>_*64)throw new N("Data to large for user specified layer")}else{_=0,P=null;for(let Ie=0;;Ie++){if(Ie>Lt.MAX_NB_BITS)throw new N("Data too large for an Aztec code");if(h=Ie<=3,g=h?Ie+1:Ie,C=Lt.totalBitsInLayer(g,h),u>C)continue;(P==null||_!==Lt.WORD_SIZE[g])&&(_=Lt.WORD_SIZE[g],P=Lt.stuffBits(l,_));let _t=C-C%_;if(!(h&&P.getSize()>_*64)&&P.getSize()+c<=_t)break}}let D=Lt.generateCheckWords(P,C,_),z=P.getSize()/_,Y=Lt.generateModeMessage(h,g,z),$=(h?11:14)+g*4,ne=new Int32Array($),ue;if(h){ue=$;for(let Ie=0;Ie<ne.length;Ie++)ne[Ie]=Ie}else{ue=$+1+2*F.truncDivision(F.truncDivision($,2)-1,15);let Ie=F.truncDivision($,2),_t=F.truncDivision(ue,2);for(let Et=0;Et<Ie;Et++){let or=Et+F.truncDivision(Et,15);ne[Ie-Et-1]=_t-or-1,ne[Ie+Et]=_t+or+1}}let Oe=new Ee(ue);for(let Ie=0,_t=0;Ie<g;Ie++){let Et=(g-Ie)*4+(h?9:12);for(let or=0;or<Et;or++){let Or=or*2;for(let Sn=0;Sn<2;Sn++)D.get(_t+Or+Sn)&&Oe.set(ne[Ie*2+Sn],ne[Ie*2+or]),D.get(_t+Et*2+Or+Sn)&&Oe.set(ne[Ie*2+or],ne[$-1-Ie*2-Sn]),D.get(_t+Et*4+Or+Sn)&&Oe.set(ne[$-1-Ie*2-Sn],ne[$-1-Ie*2-or]),D.get(_t+Et*6+Or+Sn)&&Oe.set(ne[$-1-Ie*2-or],ne[Ie*2+Sn])}_t+=Et*8}if(Lt.drawModeMessage(Oe,h,ue,Y),h)Lt.drawBullsEye(Oe,F.truncDivision(ue,2),5);else{Lt.drawBullsEye(Oe,F.truncDivision(ue,2),7);for(let Ie=0,_t=0;Ie<F.truncDivision($,2)-1;Ie+=15,_t+=16)for(let Et=F.truncDivision(ue,2)&1;Et<ue;Et+=2)Oe.set(F.truncDivision(ue,2)-_t,Et),Oe.set(F.truncDivision(ue,2)+_t,Et),Oe.set(Et,F.truncDivision(ue,2)-_t),Oe.set(Et,F.truncDivision(ue,2)+_t)}let Me=new ol;return Me.setCompact(h),Me.setSize(ue),Me.setLayers(g),Me.setCodeWords(z),Me.setMatrix(Oe),Me}static drawBullsEye(e,n,i){for(let l=0;l<i;l+=2)for(let c=n-l;c<=n+l;c++)e.set(c,n-l),e.set(c,n+l),e.set(n-l,c),e.set(n+l,c);e.set(n-i,n-i),e.set(n-i+1,n-i),e.set(n-i,n-i+1),e.set(n+i,n-i),e.set(n+i,n-i+1),e.set(n+i,n+i-1)}static generateModeMessage(e,n,i){let l=new q;return e?(l.appendBits(n-1,2),l.appendBits(i-1,6),l=Lt.generateCheckWords(l,28,4)):(l.appendBits(n-1,5),l.appendBits(i-1,11),l=Lt.generateCheckWords(l,40,4)),l}static drawModeMessage(e,n,i,l){let c=F.truncDivision(i,2);if(n)for(let u=0;u<7;u++){let h=c-3+u;l.get(u)&&e.set(h,c-5),l.get(u+7)&&e.set(c+5,h),l.get(20-u)&&e.set(h,c+5),l.get(27-u)&&e.set(c-5,h)}else for(let u=0;u<10;u++){let h=c-5+u+F.truncDivision(u,5);l.get(u)&&e.set(h,c-7),l.get(u+10)&&e.set(c+7,h),l.get(29-u)&&e.set(h,c+7),l.get(39-u)&&e.set(c-7,h)}}static generateCheckWords(e,n,i){let l=e.getSize()/i,c=new Qo(Lt.getGF(i)),u=F.truncDivision(n,i),h=Lt.bitsToWords(e,i,u);c.encode(h,u-l);let g=n%i,C=new q;C.appendBits(0,g);for(const _ of Array.from(h))C.appendBits(_,i);return C}static bitsToWords(e,n,i){let l=new Int32Array(i),c,u;for(c=0,u=e.getSize()/n;c<u;c++){let h=0;for(let g=0;g<n;g++)h|=e.get(c*n+g)?1<<n-g-1:0;l[c]=h}return l}static getGF(e){switch(e){case 4:return xe.AZTEC_PARAM;case 6:return xe.AZTEC_DATA_6;case 8:return xe.AZTEC_DATA_8;case 10:return xe.AZTEC_DATA_10;case 12:return xe.AZTEC_DATA_12;default:throw new N("Unsupported word size "+e)}}static stuffBits(e,n){let i=new q,l=e.getSize(),c=(1<<n)-2;for(let u=0;u<l;u+=n){let h=0;for(let g=0;g<n;g++)(u+g>=l||e.get(u+g))&&(h|=1<<n-1-g);(h&c)===c?(i.appendBits(h&c,n),u--):h&c?i.appendBits(h,n):(i.appendBits(h|1,n),u--)}return i}static totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}Lt.DEFAULT_EC_PERCENT=33,Lt.DEFAULT_AZTEC_LAYERS=0,Lt.MAX_NB_BITS=32,Lt.MAX_NB_BITS_COMPACT=4,Lt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ds{encode(e,n,i,l){return this.encodeWithHints(e,n,i,l,null)}encodeWithHints(e,n,i,l,c){let u=Jo.ISO_8859_1,h=Lt.DEFAULT_EC_PERCENT,g=Lt.DEFAULT_AZTEC_LAYERS;return c!=null&&(c.has(bn.CHARACTER_SET)&&(u=sl.forName(c.get(bn.CHARACTER_SET).toString())),c.has(bn.ERROR_CORRECTION)&&(h=F.parseInt(c.get(bn.ERROR_CORRECTION).toString())),c.has(bn.AZTEC_LAYERS)&&(g=F.parseInt(c.get(bn.AZTEC_LAYERS).toString()))),Ds.encodeLayers(e,n,i,l,u,h,g)}static encodeLayers(e,n,i,l,c,u,h){if(n!==ie.AZTEC)throw new N("Can only encode AZTEC, but got "+n);let g=Lt.encode(Se.getBytes(e,c),u,h);return Ds.renderResult(g,i,l)}static renderResult(e,n,i){let l=e.getMatrix();if(l==null)throw new Ze;let c=l.getWidth(),u=l.getHeight(),h=Math.max(n,c),g=Math.max(i,u),C=Math.min(h/c,g/u),_=(h-c*C)/2,P=(g-u*C)/2,D=new Ee(h,g);for(let z=0,Y=P;z<u;z++,Y+=C)for(let $=0,ne=_;$<c;$++,ne+=C)l.get($,z)&&D.setRegion(ne,Y,C,C);return D}}a.AbstractExpandedDecoder=As,a.ArgumentException=A,a.ArithmeticException=pe,a.AztecCode=ol,a.AztecCodeReader=qe,a.AztecCodeWriter=Ds,a.AztecDecoder=$e,a.AztecDetector=St,a.AztecDetectorResult=nr,a.AztecEncoder=Lt,a.AztecHighLevelEncoder=Ms,a.AztecPoint=Ht,a.BarcodeFormat=ie,a.Binarizer=L,a.BinaryBitmap=R,a.BitArray=q,a.BitMatrix=Ee,a.BitSource=Go,a.BrowserAztecCodeReader=mt,a.BrowserBarcodeReader=Gi,a.BrowserCodeReader=we,a.BrowserDatamatrixCodeReader=Vc,a.BrowserMultiFormatReader=ks,a.BrowserPDF417Reader=lo,a.BrowserQRCodeReader=il,a.BrowserQRCodeSvgWriter=Ni,a.CharacterSetECI=te,a.ChecksumException=M,a.Code128Reader=me,a.Code39Reader=ct,a.DataMatrixDecodedBitStreamParser=_r,a.DataMatrixReader=Rr,a.DecodeHintType=re,a.DecoderResult=Be,a.DefaultGridSampler=jt,a.DetectorResult=Wt,a.EAN13Reader=an,a.EncodeHintType=bn,a.Exception=E,a.FormatException=X,a.GenericGF=xe,a.GenericGFPoly=Ae,a.GlobalHistogramBinarizer=Ve,a.GridSampler=kt,a.GridSamplerInstance=Ke,a.HTMLCanvasElementLuminanceSource=ce,a.HybridBinarizer=ye,a.ITFReader=et,a.IllegalArgumentException=N,a.IllegalStateException=Ze,a.InvertedLuminanceSource=De,a.LuminanceSource=he,a.MathUtils=Je,a.MultiFormatOneDReader=Si,a.MultiFormatReader=ao,a.MultiFormatWriter=zc,a.NotFoundException=J,a.OneDReader=_e,a.PDF417DecodedBitStreamParser=de,a.PDF417DecoderErrorCorrection=Zo,a.PDF417Reader=jn,a.PDF417ResultMetadata=so,a.PerspectiveTransform=ut,a.PlanarYUVLuminanceSource=Fr,a.QRCodeByteMatrix=co,a.QRCodeDataMask=Tt,a.QRCodeDecodedBitStreamParser=Qt,a.QRCodeDecoderErrorCorrectionLevel=Gt,a.QRCodeDecoderFormatInformation=Dn,a.QRCodeEncoder=Kt,a.QRCodeEncoderQRCode=Ii,a.QRCodeMaskUtil=Jt,a.QRCodeMatrixUtil=dt,a.QRCodeMode=lt,a.QRCodeReader=Zn,a.QRCodeVersion=ot,a.QRCodeWriter=qi,a.RGBLuminanceSource=Ps,a.RSS14Reader=Bt,a.RSSExpandedReader=Ce,a.ReaderException=$i,a.ReedSolomonDecoder=Rt,a.ReedSolomonEncoder=Qo,a.ReedSolomonException=He,a.Result=be,a.ResultMetadataType=ve,a.ResultPoint=je,a.StringUtils=Se,a.UnsupportedOperationException=ke,a.VideoInputDevice=Z,a.WhiteRectangleDetector=Ue,a.WriterException=Xt,a.ZXingArrays=W,a.ZXingCharset=sl,a.ZXingInteger=F,a.ZXingStandardCharsets=Jo,a.ZXingStringBuilder=Ne,a.ZXingStringEncoding=Le,a.ZXingSystem=B,a.createAbstractExpandedDecoder=Zt,Object.defineProperty(a,"__esModule",{value:!0})})}(Ra,Ra.exports)),Ra.exports}lw();var bf=function(){var r=function(o,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&(f[y]=p[y])},r(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(o,a);function f(){this.constructor=o}o.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),hm=function(){function r(o,a){this.name=o,this.track=a}return r.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},r.prototype.apply=function(o){var a={};a[this.name]=o;var f={advanced:[a]};return this.track.applyConstraints(f)},r.prototype.value=function(){var o=this.track.getSettings();if(this.name in o){var a=o[this.name];return a}return null},r}(),cw=function(r){bf(o,r);function o(a,f){return r.call(this,a,f)||this}return o.prototype.min=function(){return this.getCapabilities().min},o.prototype.max=function(){return this.getCapabilities().max},o.prototype.step=function(){return this.getCapabilities().step},o.prototype.apply=function(a){var f={};f[this.name]=a;var p={advanced:[f]};return this.track.applyConstraints(p)},o.prototype.getCapabilities=function(){this.failIfNotSupported();var a=this.track.getCapabilities(),f=a[this.name];return{min:f.min,max:f.max,step:f.step}},o.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},o}(hm);(function(r){bf(o,r);function o(a){return r.call(this,"zoom",a)||this}return o})(cw);(function(r){bf(o,r);function o(a){return r.call(this,"torch",a)||this}return o})(hm);var N1;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.NOT_STARTED=1]="NOT_STARTED",r[r.SCANNING=2]="SCANNING",r[r.PAUSED=3]="PAUSED"})(N1||(N1={}));var uw=function(){var r=function(o,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&(f[y]=p[y])},r(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(o,a);function f(){this.constructor=o}o.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}();(function(r){uw(o,r);function o(){return r!==null&&r.apply(this,arguments)||this}return o.DEFAULT_WIDTH=300,o.DEFAULT_WIDTH_OFFSET=2,o.FILE_SCAN_MIN_HEIGHT=300,o.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,o.MIN_QR_BOX_SIZE=50,o.SHADED_LEFT=1,o.SHADED_RIGHT=2,o.SHADED_TOP=3,o.SHADED_BOTTOM=4,o.SHADED_REGION_ELEMENT_ID="qr-shaded-region",o.VERBOSE=!1,o.BORDER_SHADER_DEFAULT_COLOR="#ffffff",o.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",o})(ow);var _1;(function(r){r[r.STATUS_DEFAULT=0]="STATUS_DEFAULT",r[r.STATUS_SUCCESS=1]="STATUS_SUCCESS",r[r.STATUS_WARNING=2]="STATUS_WARNING",r[r.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(_1||(_1={}));const dw=({user:r,onProfileClick:o})=>{const a=Pn();return x.jsx("div",{children:x.jsx("div",{style:{position:"absolute",top:"45px",display:"flex",alignItems:"center",width:"94%",height:"10px",left:"3%"},children:r==null?x.jsxs("div",{style:{position:"absolute",width:"100%",display:"flex",justifyContent:"space-between"},children:[x.jsx("button",{className:"login-button",onClick:()=>a("/login"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:x.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Login"})}),x.jsx("button",{className:"login-button",onClick:()=>a("/signup"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:x.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Sign up"})})]}):x.jsxs("div",{style:{position:"absolute",width:"100%",display:"flex",justifyContent:"space-between"},children:[x.jsx("button",{className:"login-button",onClick:()=>a("/logout"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:x.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Logout"})}),x.jsx("button",{className:"login-button",onClick:o,style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:x.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Profile"})})]})})})},Sf=I.createContext({});function Af(r){const o=I.useRef(null);return o.current===null&&(o.current=r()),o.current}const Tf=typeof window<"u",pm=Tf?I.useLayoutEffect:I.useEffect,Oc=I.createContext(null);function If(r,o){r.indexOf(o)===-1&&r.push(o)}function Nf(r,o){const a=r.indexOf(o);a>-1&&r.splice(a,1)}const Vi=(r,o,a)=>a>o?o:a<r?r:a;let _f=()=>{};const Ui={},mm=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r);function gm(r){return typeof r=="object"&&r!==null}const xm=r=>/^0[^.\s]+$/u.test(r);function Rf(r){let o;return()=>(o===void 0&&(o=r()),o)}const Zr=r=>r,fw=(r,o)=>a=>o(r(a)),Za=(...r)=>r.reduce(fw),Fa=(r,o,a)=>{const f=o-r;return f===0?1:(a-r)/f};class kf{constructor(){this.subscriptions=[]}add(o){return If(this.subscriptions,o),()=>Nf(this.subscriptions,o)}notify(o,a,f){const p=this.subscriptions.length;if(p)if(p===1)this.subscriptions[0](o,a,f);else for(let y=0;y<p;y++){const w=this.subscriptions[y];w&&w(o,a,f)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const gi=r=>r*1e3,xi=r=>r/1e3;function ym(r,o){return o?r*(1e3/o):0}const wm=(r,o,a)=>(((1-3*a+3*o)*r+(3*a-6*o))*r+3*o)*r,hw=1e-7,pw=12;function mw(r,o,a,f,p){let y,w,S=0;do w=o+(a-o)/2,y=wm(w,f,p)-r,y>0?a=w:o=w;while(Math.abs(y)>hw&&++S<pw);return w}function Ka(r,o,a,f){if(r===o&&a===f)return Zr;const p=y=>mw(y,0,1,r,a);return y=>y===0||y===1?y:wm(p(y),o,f)}const vm=r=>o=>o<=.5?r(2*o)/2:(2-r(2*(1-o)))/2,Cm=r=>o=>1-r(1-o),Em=Ka(.33,1.53,.69,.99),Pf=Cm(Em),bm=vm(Pf),Sm=r=>(r*=2)<1?.5*Pf(r):.5*(2-Math.pow(2,-10*(r-1))),Of=r=>1-Math.sin(Math.acos(r)),Am=Cm(Of),Tm=vm(Of),gw=Ka(.42,0,1,1),xw=Ka(0,0,.58,1),Im=Ka(.42,0,.58,1),yw=r=>Array.isArray(r)&&typeof r[0]!="number",Nm=r=>Array.isArray(r)&&typeof r[0]=="number",ww={linear:Zr,easeIn:gw,easeInOut:Im,easeOut:xw,circIn:Of,circInOut:Tm,circOut:Am,backIn:Pf,backInOut:bm,backOut:Em,anticipate:Sm},vw=r=>typeof r=="string",R1=r=>{if(Nm(r)){_f(r.length===4);const[o,a,f,p]=r;return Ka(o,a,f,p)}else if(vw(r))return ww[r];return r},ic=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Cw(r,o){let a=new Set,f=new Set,p=!1,y=!1;const w=new WeakSet;let S={delta:0,timestamp:0,isProcessing:!1};function v(A){w.has(A)&&(E.schedule(A),r()),A(S)}const E={schedule:(A,N=!1,R=!1)=>{const L=R&&p?a:f;return N&&w.add(A),L.has(A)||L.add(A),A},cancel:A=>{f.delete(A),w.delete(A)},process:A=>{if(S=A,p){y=!0;return}p=!0,[a,f]=[f,a],a.forEach(v),a.clear(),p=!1,y&&(y=!1,E.process(A))}};return E}const Ew=40;function _m(r,o){let a=!1,f=!0;const p={delta:0,timestamp:0,isProcessing:!1},y=()=>a=!0,w=ic.reduce((F,q)=>(F[q]=Cw(y),F),{}),{setup:S,read:v,resolveKeyframes:E,preUpdate:A,update:N,preRender:R,render:M,postRender:L}=w,B=()=>{const F=Ui.useManualTiming?p.timestamp:performance.now();a=!1,Ui.useManualTiming||(p.delta=f?1e3/60:Math.max(Math.min(F-p.timestamp,Ew),1)),p.timestamp=F,p.isProcessing=!0,S.process(p),v.process(p),E.process(p),A.process(p),N.process(p),R.process(p),M.process(p),L.process(p),p.isProcessing=!1,a&&o&&(f=!1,r(B))},j=()=>{a=!0,f=!0,p.isProcessing||r(B)};return{schedule:ic.reduce((F,q)=>{const ee=w[q];return F[q]=(re,X=!1,le=!1)=>(a||j(),ee.schedule(re,X,le)),F},{}),cancel:F=>{for(let q=0;q<ic.length;q++)w[ic[q]].cancel(F)},state:p,steps:w}}const{schedule:un,cancel:ys,state:tr,steps:yd}=_m(typeof requestAnimationFrame<"u"?requestAnimationFrame:Zr,!0);let hc;function bw(){hc=void 0}const Ir={now:()=>(hc===void 0&&Ir.set(tr.isProcessing||Ui.useManualTiming?tr.timestamp:performance.now()),hc),set:r=>{hc=r,queueMicrotask(bw)}},Rm=r=>o=>typeof o=="string"&&o.startsWith(r),Mf=Rm("--"),Sw=Rm("var(--"),Df=r=>Sw(r)?Aw.test(r.split("/*")[0].trim()):!1,Aw=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Uo={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},Va={...Uo,transform:r=>Vi(0,1,r)},sc={...Uo,default:1},Pa=r=>Math.round(r*1e5)/1e5,Lf=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Tw(r){return r==null}const Iw=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Bf=(r,o)=>a=>!!(typeof a=="string"&&Iw.test(a)&&a.startsWith(r)||o&&!Tw(a)&&Object.prototype.hasOwnProperty.call(a,o)),km=(r,o,a)=>f=>{if(typeof f!="string")return f;const[p,y,w,S]=f.match(Lf);return{[r]:parseFloat(p),[o]:parseFloat(y),[a]:parseFloat(w),alpha:S!==void 0?parseFloat(S):1}},Nw=r=>Vi(0,255,r),wd={...Uo,transform:r=>Math.round(Nw(r))},$s={test:Bf("rgb","red"),parse:km("red","green","blue"),transform:({red:r,green:o,blue:a,alpha:f=1})=>"rgba("+wd.transform(r)+", "+wd.transform(o)+", "+wd.transform(a)+", "+Pa(Va.transform(f))+")"};function _w(r){let o="",a="",f="",p="";return r.length>5?(o=r.substring(1,3),a=r.substring(3,5),f=r.substring(5,7),p=r.substring(7,9)):(o=r.substring(1,2),a=r.substring(2,3),f=r.substring(3,4),p=r.substring(4,5),o+=o,a+=a,f+=f,p+=p),{red:parseInt(o,16),green:parseInt(a,16),blue:parseInt(f,16),alpha:p?parseInt(p,16)/255:1}}const Vd={test:Bf("#"),parse:_w,transform:$s.transform},$a=r=>({test:o=>typeof o=="string"&&o.endsWith(r)&&o.split(" ").length===1,parse:parseFloat,transform:o=>`${o}${r}`}),ms=$a("deg"),yi=$a("%"),yt=$a("px"),Rw=$a("vh"),kw=$a("vw"),k1={...yi,parse:r=>yi.parse(r)/100,transform:r=>yi.transform(r*100)},_o={test:Bf("hsl","hue"),parse:km("hue","saturation","lightness"),transform:({hue:r,saturation:o,lightness:a,alpha:f=1})=>"hsla("+Math.round(r)+", "+yi.transform(Pa(o))+", "+yi.transform(Pa(a))+", "+Pa(Va.transform(f))+")"},kn={test:r=>$s.test(r)||Vd.test(r)||_o.test(r),parse:r=>$s.test(r)?$s.parse(r):_o.test(r)?_o.parse(r):Vd.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?$s.transform(r):_o.transform(r),getAnimatableNone:r=>{const o=kn.parse(r);return o.alpha=0,kn.transform(o)}},Pw=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Ow(r){var o,a;return isNaN(r)&&typeof r=="string"&&(((o=r.match(Lf))==null?void 0:o.length)||0)+(((a=r.match(Pw))==null?void 0:a.length)||0)>0}const Pm="number",Om="color",Mw="var",Dw="var(",P1="${}",Lw=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ua(r){const o=r.toString(),a=[],f={color:[],number:[],var:[]},p=[];let y=0;const S=o.replace(Lw,v=>(kn.test(v)?(f.color.push(y),p.push(Om),a.push(kn.parse(v))):v.startsWith(Dw)?(f.var.push(y),p.push(Mw),a.push(v)):(f.number.push(y),p.push(Pm),a.push(parseFloat(v))),++y,P1)).split(P1);return{values:a,split:S,indexes:f,types:p}}function Mm(r){return Ua(r).values}function Dm(r){const{split:o,types:a}=Ua(r),f=o.length;return p=>{let y="";for(let w=0;w<f;w++)if(y+=o[w],p[w]!==void 0){const S=a[w];S===Pm?y+=Pa(p[w]):S===Om?y+=kn.transform(p[w]):y+=p[w]}return y}}const Bw=r=>typeof r=="number"?0:kn.test(r)?kn.getAnimatableNone(r):r;function jw(r){const o=Mm(r);return Dm(r)(o.map(Bw))}const ws={test:Ow,parse:Mm,createTransformer:Dm,getAnimatableNone:jw};function vd(r,o,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?r+(o-r)*6*a:a<1/2?o:a<2/3?r+(o-r)*(2/3-a)*6:r}function Fw({hue:r,saturation:o,lightness:a,alpha:f}){r/=360,o/=100,a/=100;let p=0,y=0,w=0;if(!o)p=y=w=a;else{const S=a<.5?a*(1+o):a+o-a*o,v=2*a-S;p=vd(v,S,r+1/3),y=vd(v,S,r),w=vd(v,S,r-1/3)}return{red:Math.round(p*255),green:Math.round(y*255),blue:Math.round(w*255),alpha:f}}function Cc(r,o){return a=>a>0?o:r}const pn=(r,o,a)=>r+(o-r)*a,Cd=(r,o,a)=>{const f=r*r,p=a*(o*o-f)+f;return p<0?0:Math.sqrt(p)},Vw=[Vd,$s,_o],Uw=r=>Vw.find(o=>o.test(r));function O1(r){const o=Uw(r);if(!o)return!1;let a=o.parse(r);return o===_o&&(a=Fw(a)),a}const M1=(r,o)=>{const a=O1(r),f=O1(o);if(!a||!f)return Cc(r,o);const p={...a};return y=>(p.red=Cd(a.red,f.red,y),p.green=Cd(a.green,f.green,y),p.blue=Cd(a.blue,f.blue,y),p.alpha=pn(a.alpha,f.alpha,y),$s.transform(p))},Ud=new Set(["none","hidden"]);function zw(r,o){return Ud.has(r)?a=>a<=0?r:o:a=>a>=1?o:r}function Ww(r,o){return a=>pn(r,o,a)}function jf(r){return typeof r=="number"?Ww:typeof r=="string"?Df(r)?Cc:kn.test(r)?M1:Xw:Array.isArray(r)?Lm:typeof r=="object"?kn.test(r)?M1:Hw:Cc}function Lm(r,o){const a=[...r],f=a.length,p=r.map((y,w)=>jf(y)(y,o[w]));return y=>{for(let w=0;w<f;w++)a[w]=p[w](y);return a}}function Hw(r,o){const a={...r,...o},f={};for(const p in a)r[p]!==void 0&&o[p]!==void 0&&(f[p]=jf(r[p])(r[p],o[p]));return p=>{for(const y in f)a[y]=f[y](p);return a}}function Gw(r,o){const a=[],f={color:0,var:0,number:0};for(let p=0;p<o.values.length;p++){const y=o.types[p],w=r.indexes[y][f[y]],S=r.values[w]??0;a[p]=S,f[y]++}return a}const Xw=(r,o)=>{const a=ws.createTransformer(o),f=Ua(r),p=Ua(o);return f.indexes.var.length===p.indexes.var.length&&f.indexes.color.length===p.indexes.color.length&&f.indexes.number.length>=p.indexes.number.length?Ud.has(r)&&!p.values.length||Ud.has(o)&&!f.values.length?zw(r,o):Za(Lm(Gw(f,p),p.values),a):Cc(r,o)};function Bm(r,o,a){return typeof r=="number"&&typeof o=="number"&&typeof a=="number"?pn(r,o,a):jf(r)(r,o)}const Yw=r=>{const o=({timestamp:a})=>r(a);return{start:(a=!0)=>un.update(o,a),stop:()=>ys(o),now:()=>tr.isProcessing?tr.timestamp:Ir.now()}},jm=(r,o,a=10)=>{let f="";const p=Math.max(Math.round(o/a),2);for(let y=0;y<p;y++)f+=Math.round(r(y/(p-1))*1e4)/1e4+", ";return`linear(${f.substring(0,f.length-2)})`},Ec=2e4;function Ff(r){let o=0;const a=50;let f=r.next(o);for(;!f.done&&o<Ec;)o+=a,f=r.next(o);return o>=Ec?1/0:o}function Zw(r,o=100,a){const f=a({...r,keyframes:[0,o]}),p=Math.min(Ff(f),Ec);return{type:"keyframes",ease:y=>f.next(p*y).value/o,duration:xi(p)}}const Kw=5;function Fm(r,o,a){const f=Math.max(o-Kw,0);return ym(a-r(f),o-f)}const vn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},D1=.001;function $w({duration:r=vn.duration,bounce:o=vn.bounce,velocity:a=vn.velocity,mass:f=vn.mass}){let p,y,w=1-o;w=Vi(vn.minDamping,vn.maxDamping,w),r=Vi(vn.minDuration,vn.maxDuration,xi(r)),w<1?(p=E=>{const A=E*w,N=A*r,R=A-a,M=zd(E,w),L=Math.exp(-N);return D1-R/M*L},y=E=>{const N=E*w*r,R=N*a+a,M=Math.pow(w,2)*Math.pow(E,2)*r,L=Math.exp(-N),B=zd(Math.pow(E,2),w);return(-p(E)+D1>0?-1:1)*((R-M)*L)/B}):(p=E=>{const A=Math.exp(-E*r),N=(E-a)*r+1;return-.001+A*N},y=E=>{const A=Math.exp(-E*r),N=(a-E)*(r*r);return A*N});const S=5/r,v=Qw(p,y,S);if(r=gi(r),isNaN(v))return{stiffness:vn.stiffness,damping:vn.damping,duration:r};{const E=Math.pow(v,2)*f;return{stiffness:E,damping:w*2*Math.sqrt(f*E),duration:r}}}const qw=12;function Qw(r,o,a){let f=a;for(let p=1;p<qw;p++)f=f-r(f)/o(f);return f}function zd(r,o){return r*Math.sqrt(1-o*o)}const Jw=["duration","bounce"],ev=["stiffness","damping","mass"];function L1(r,o){return o.some(a=>r[a]!==void 0)}function tv(r){let o={velocity:vn.velocity,stiffness:vn.stiffness,damping:vn.damping,mass:vn.mass,isResolvedFromDuration:!1,...r};if(!L1(r,ev)&&L1(r,Jw))if(r.visualDuration){const a=r.visualDuration,f=2*Math.PI/(a*1.2),p=f*f,y=2*Vi(.05,1,1-(r.bounce||0))*Math.sqrt(p);o={...o,mass:vn.mass,stiffness:p,damping:y}}else{const a=$w(r);o={...o,...a,mass:vn.mass},o.isResolvedFromDuration=!0}return o}function bc(r=vn.visualDuration,o=vn.bounce){const a=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:o}:r;let{restSpeed:f,restDelta:p}=a;const y=a.keyframes[0],w=a.keyframes[a.keyframes.length-1],S={done:!1,value:y},{stiffness:v,damping:E,mass:A,duration:N,velocity:R,isResolvedFromDuration:M}=tv({...a,velocity:-xi(a.velocity||0)}),L=R||0,B=E/(2*Math.sqrt(v*A)),j=w-y,U=xi(Math.sqrt(v/A)),W=Math.abs(j)<5;f||(f=W?vn.restSpeed.granular:vn.restSpeed.default),p||(p=W?vn.restDelta.granular:vn.restDelta.default);let F;if(B<1){const ee=zd(U,B);F=re=>{const X=Math.exp(-B*U*re);return w-X*((L+B*U*j)/ee*Math.sin(ee*re)+j*Math.cos(ee*re))}}else if(B===1)F=ee=>w-Math.exp(-U*ee)*(j+(L+U*j)*ee);else{const ee=U*Math.sqrt(B*B-1);F=re=>{const X=Math.exp(-B*U*re),le=Math.min(ee*re,300);return w-X*((L+B*U*j)*Math.sinh(le)+ee*j*Math.cosh(le))/ee}}const q={calculatedDuration:M&&N||null,next:ee=>{const re=F(ee);if(M)S.done=ee>=N;else{let X=ee===0?L:0;B<1&&(X=ee===0?gi(L):Fm(F,ee,re));const le=Math.abs(X)<=f,te=Math.abs(w-re)<=p;S.done=le&&te}return S.value=S.done?w:re,S},toString:()=>{const ee=Math.min(Ff(q),Ec),re=jm(X=>q.next(ee*X).value,ee,30);return ee+"ms "+re},toTransition:()=>{}};return q}bc.applyToOptions=r=>{const o=Zw(r,100,bc);return r.ease=o.ease,r.duration=gi(o.duration),r.type="keyframes",r};function Wd({keyframes:r,velocity:o=0,power:a=.8,timeConstant:f=325,bounceDamping:p=10,bounceStiffness:y=500,modifyTarget:w,min:S,max:v,restDelta:E=.5,restSpeed:A}){const N=r[0],R={done:!1,value:N},M=le=>S!==void 0&&le<S||v!==void 0&&le>v,L=le=>S===void 0?v:v===void 0||Math.abs(S-le)<Math.abs(v-le)?S:v;let B=a*o;const j=N+B,U=w===void 0?j:w(j);U!==j&&(B=U-N);const W=le=>-B*Math.exp(-le/f),F=le=>U+W(le),q=le=>{const te=W(le),ke=F(le);R.done=Math.abs(te)<=E,R.value=R.done?U:ke};let ee,re;const X=le=>{M(R.value)&&(ee=le,re=bc({keyframes:[R.value,L(R.value)],velocity:Fm(F,le,R.value),damping:p,stiffness:y,restDelta:E,restSpeed:A}))};return X(0),{calculatedDuration:null,next:le=>{let te=!1;return!re&&ee===void 0&&(te=!0,q(le),X(le)),ee!==void 0&&le>=ee?re.next(le-ee):(!te&&q(le),R)}}}function nv(r,o,a){const f=[],p=a||Ui.mix||Bm,y=r.length-1;for(let w=0;w<y;w++){let S=p(r[w],r[w+1]);if(o){const v=Array.isArray(o)?o[w]||Zr:o;S=Za(v,S)}f.push(S)}return f}function rv(r,o,{clamp:a=!0,ease:f,mixer:p}={}){const y=r.length;if(_f(y===o.length),y===1)return()=>o[0];if(y===2&&o[0]===o[1])return()=>o[1];const w=r[0]===r[1];r[0]>r[y-1]&&(r=[...r].reverse(),o=[...o].reverse());const S=nv(o,f,p),v=S.length,E=A=>{if(w&&A<r[0])return o[0];let N=0;if(v>1)for(;N<r.length-2&&!(A<r[N+1]);N++);const R=Fa(r[N],r[N+1],A);return S[N](R)};return a?A=>E(Vi(r[0],r[y-1],A)):E}function iv(r,o){const a=r[r.length-1];for(let f=1;f<=o;f++){const p=Fa(0,o,f);r.push(pn(a,1,p))}}function sv(r){const o=[0];return iv(o,r.length-1),o}function ov(r,o){return r.map(a=>a*o)}function av(r,o){return r.map(()=>o||Im).splice(0,r.length-1)}function Oa({duration:r=300,keyframes:o,times:a,ease:f="easeInOut"}){const p=yw(f)?f.map(R1):R1(f),y={done:!1,value:o[0]},w=ov(a&&a.length===o.length?a:sv(o),r),S=rv(w,o,{ease:Array.isArray(p)?p:av(o,p)});return{calculatedDuration:r,next:v=>(y.value=S(v),y.done=v>=r,y)}}const lv=r=>r!==null;function Vf(r,{repeat:o,repeatType:a="loop"},f,p=1){const y=r.filter(lv),S=p<0||o&&a!=="loop"&&o%2===1?0:y.length-1;return!S||f===void 0?y[S]:f}const cv={decay:Wd,inertia:Wd,tween:Oa,keyframes:Oa,spring:bc};function Vm(r){typeof r.type=="string"&&(r.type=cv[r.type])}class Uf{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(o=>{this.resolve=o})}notifyFinished(){this.resolve()}then(o,a){return this.finished.then(o,a)}}const uv=r=>r/100;class zf extends Uf{constructor(o){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var f,p;const{motionValue:a}=this.options;a&&a.updatedAt!==Ir.now()&&this.tick(Ir.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(p=(f=this.options).onStop)==null||p.call(f))},this.options=o,this.initAnimation(),this.play(),o.autoplay===!1&&this.pause()}initAnimation(){const{options:o}=this;Vm(o);const{type:a=Oa,repeat:f=0,repeatDelay:p=0,repeatType:y,velocity:w=0}=o;let{keyframes:S}=o;const v=a||Oa;v!==Oa&&typeof S[0]!="number"&&(this.mixKeyframes=Za(uv,Bm(S[0],S[1])),S=[0,100]);const E=v({...o,keyframes:S});y==="mirror"&&(this.mirroredGenerator=v({...o,keyframes:[...S].reverse(),velocity:-w})),E.calculatedDuration===null&&(E.calculatedDuration=Ff(E));const{calculatedDuration:A}=E;this.calculatedDuration=A,this.resolvedDuration=A+p,this.totalDuration=this.resolvedDuration*(f+1)-p,this.generator=E}updateTime(o){const a=Math.round(o-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=a}tick(o,a=!1){const{generator:f,totalDuration:p,mixKeyframes:y,mirroredGenerator:w,resolvedDuration:S,calculatedDuration:v}=this;if(this.startTime===null)return f.next(0);const{delay:E=0,keyframes:A,repeat:N,repeatType:R,repeatDelay:M,type:L,onUpdate:B,finalKeyframe:j}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,o):this.speed<0&&(this.startTime=Math.min(o-p/this.speed,this.startTime)),a?this.currentTime=o:this.updateTime(o);const U=this.currentTime-E*(this.playbackSpeed>=0?1:-1),W=this.playbackSpeed>=0?U<0:U>p;this.currentTime=Math.max(U,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let F=this.currentTime,q=f;if(N){const le=Math.min(this.currentTime,p)/S;let te=Math.floor(le),ke=le%1;!ke&&le>=1&&(ke=1),ke===1&&te--,te=Math.min(te,N+1),!!(te%2)&&(R==="reverse"?(ke=1-ke,M&&(ke-=M/S)):R==="mirror"&&(q=w)),F=Vi(0,1,ke)*S}const ee=W?{done:!1,value:A[0]}:q.next(F);y&&(ee.value=y(ee.value));let{done:re}=ee;!W&&v!==null&&(re=this.playbackSpeed>=0?this.currentTime>=p:this.currentTime<=0);const X=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&re);return X&&L!==Wd&&(ee.value=Vf(A,this.options,j,this.speed)),B&&B(ee.value),X&&this.finish(),ee}then(o,a){return this.finished.then(o,a)}get duration(){return xi(this.calculatedDuration)}get time(){return xi(this.currentTime)}set time(o){var a;o=gi(o),this.currentTime=o,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=o:this.driver&&(this.startTime=this.driver.now()-o/this.playbackSpeed),(a=this.driver)==null||a.start(!1)}get speed(){return this.playbackSpeed}set speed(o){this.updateTime(Ir.now());const a=this.playbackSpeed!==o;this.playbackSpeed=o,a&&(this.time=xi(this.currentTime))}play(){var p,y;if(this.isStopped)return;const{driver:o=Yw,startTime:a}=this.options;this.driver||(this.driver=o(w=>this.tick(w))),(y=(p=this.options).onPlay)==null||y.call(p);const f=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=f):this.holdTime!==null?this.startTime=f-this.holdTime:this.startTime||(this.startTime=a??f),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ir.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var o,a;this.notifyFinished(),this.teardown(),this.state="finished",(a=(o=this.options).onComplete)==null||a.call(o)}cancel(){var o,a;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(a=(o=this.options).onCancel)==null||a.call(o)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(o){return this.startTime=0,this.tick(o,!0)}attachTimeline(o){var a;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(a=this.driver)==null||a.stop(),o.observe(this)}}function dv(r){for(let o=1;o<r.length;o++)r[o]??(r[o]=r[o-1])}const qs=r=>r*180/Math.PI,Hd=r=>{const o=qs(Math.atan2(r[1],r[0]));return Gd(o)},fv={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:r=>(Math.abs(r[0])+Math.abs(r[3]))/2,rotate:Hd,rotateZ:Hd,skewX:r=>qs(Math.atan(r[1])),skewY:r=>qs(Math.atan(r[2])),skew:r=>(Math.abs(r[1])+Math.abs(r[2]))/2},Gd=r=>(r=r%360,r<0&&(r+=360),r),B1=Hd,j1=r=>Math.sqrt(r[0]*r[0]+r[1]*r[1]),F1=r=>Math.sqrt(r[4]*r[4]+r[5]*r[5]),hv={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:j1,scaleY:F1,scale:r=>(j1(r)+F1(r))/2,rotateX:r=>Gd(qs(Math.atan2(r[6],r[5]))),rotateY:r=>Gd(qs(Math.atan2(-r[2],r[0]))),rotateZ:B1,rotate:B1,skewX:r=>qs(Math.atan(r[4])),skewY:r=>qs(Math.atan(r[1])),skew:r=>(Math.abs(r[1])+Math.abs(r[4]))/2};function Xd(r){return r.includes("scale")?1:0}function Yd(r,o){if(!r||r==="none")return Xd(o);const a=r.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let f,p;if(a)f=hv,p=a;else{const S=r.match(/^matrix\(([-\d.e\s,]+)\)$/u);f=fv,p=S}if(!p)return Xd(o);const y=f[o],w=p[1].split(",").map(mv);return typeof y=="function"?y(w):w[y]}const pv=(r,o)=>{const{transform:a="none"}=getComputedStyle(r);return Yd(a,o)};function mv(r){return parseFloat(r.trim())}const zo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Wo=new Set(zo),V1=r=>r===Uo||r===yt,gv=new Set(["x","y","z"]),xv=zo.filter(r=>!gv.has(r));function yv(r){const o=[];return xv.forEach(a=>{const f=r.getValue(a);f!==void 0&&(o.push([a,f.get()]),f.set(a.startsWith("scale")?1:0))}),o}const Js={width:({x:r},{paddingLeft:o="0",paddingRight:a="0"})=>r.max-r.min-parseFloat(o)-parseFloat(a),height:({y:r},{paddingTop:o="0",paddingBottom:a="0"})=>r.max-r.min-parseFloat(o)-parseFloat(a),top:(r,{top:o})=>parseFloat(o),left:(r,{left:o})=>parseFloat(o),bottom:({y:r},{top:o})=>parseFloat(o)+(r.max-r.min),right:({x:r},{left:o})=>parseFloat(o)+(r.max-r.min),x:(r,{transform:o})=>Yd(o,"x"),y:(r,{transform:o})=>Yd(o,"y")};Js.translateX=Js.x;Js.translateY=Js.y;const eo=new Set;let Zd=!1,Kd=!1,$d=!1;function Um(){if(Kd){const r=Array.from(eo).filter(f=>f.needsMeasurement),o=new Set(r.map(f=>f.element)),a=new Map;o.forEach(f=>{const p=yv(f);p.length&&(a.set(f,p),f.render())}),r.forEach(f=>f.measureInitialState()),o.forEach(f=>{f.render();const p=a.get(f);p&&p.forEach(([y,w])=>{var S;(S=f.getValue(y))==null||S.set(w)})}),r.forEach(f=>f.measureEndState()),r.forEach(f=>{f.suspendedScrollY!==void 0&&window.scrollTo(0,f.suspendedScrollY)})}Kd=!1,Zd=!1,eo.forEach(r=>r.complete($d)),eo.clear()}function zm(){eo.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(Kd=!0)})}function wv(){$d=!0,zm(),Um(),$d=!1}class Wf{constructor(o,a,f,p,y,w=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...o],this.onComplete=a,this.name=f,this.motionValue=p,this.element=y,this.isAsync=w}scheduleResolve(){this.state="scheduled",this.isAsync?(eo.add(this),Zd||(Zd=!0,un.read(zm),un.resolveKeyframes(Um))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:o,name:a,element:f,motionValue:p}=this;if(o[0]===null){const y=p==null?void 0:p.get(),w=o[o.length-1];if(y!==void 0)o[0]=y;else if(f&&a){const S=f.readValue(a,w);S!=null&&(o[0]=S)}o[0]===void 0&&(o[0]=w),p&&y===void 0&&p.set(o[0])}dv(o)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(o=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,o),eo.delete(this)}cancel(){this.state==="scheduled"&&(eo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const vv=r=>r.startsWith("--");function Cv(r,o,a){vv(o)?r.style.setProperty(o,a):r.style[o]=a}const Ev=Rf(()=>window.ScrollTimeline!==void 0),bv={};function Sv(r,o){const a=Rf(r);return()=>bv[o]??a()}const Wm=Sv(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ka=([r,o,a,f])=>`cubic-bezier(${r}, ${o}, ${a}, ${f})`,U1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ka([0,.65,.55,1]),circOut:ka([.55,0,1,.45]),backIn:ka([.31,.01,.66,-.59]),backOut:ka([.33,1.53,.69,.99])};function Hm(r,o){if(r)return typeof r=="function"?Wm()?jm(r,o):"ease-out":Nm(r)?ka(r):Array.isArray(r)?r.map(a=>Hm(a,o)||U1.easeOut):U1[r]}function Av(r,o,a,{delay:f=0,duration:p=300,repeat:y=0,repeatType:w="loop",ease:S="easeOut",times:v}={},E=void 0){const A={[o]:a};v&&(A.offset=v);const N=Hm(S,p);Array.isArray(N)&&(A.easing=N);const R={delay:f,duration:p,easing:Array.isArray(N)?"linear":N,fill:"both",iterations:y+1,direction:w==="reverse"?"alternate":"normal"};return E&&(R.pseudoElement=E),r.animate(A,R)}function Gm(r){return typeof r=="function"&&"applyToOptions"in r}function Tv({type:r,...o}){return Gm(r)&&Wm()?r.applyToOptions(o):(o.duration??(o.duration=300),o.ease??(o.ease="easeOut"),o)}class Iv extends Uf{constructor(o){if(super(),this.finishedTime=null,this.isStopped=!1,!o)return;const{element:a,name:f,keyframes:p,pseudoElement:y,allowFlatten:w=!1,finalKeyframe:S,onComplete:v}=o;this.isPseudoElement=!!y,this.allowFlatten=w,this.options=o,_f(typeof o.type!="string");const E=Tv(o);this.animation=Av(a,f,p,E,y),E.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!y){const A=Vf(p,this.options,S,this.speed);this.updateMotionValue?this.updateMotionValue(A):Cv(a,f,A),this.animation.cancel()}v==null||v(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var o,a;(a=(o=this.animation).finish)==null||a.call(o)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:o}=this;o==="idle"||o==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var o,a;this.isPseudoElement||(a=(o=this.animation).commitStyles)==null||a.call(o)}get duration(){var a,f;const o=((f=(a=this.animation.effect)==null?void 0:a.getComputedTiming)==null?void 0:f.call(a).duration)||0;return xi(Number(o))}get time(){return xi(Number(this.animation.currentTime)||0)}set time(o){this.finishedTime=null,this.animation.currentTime=gi(o)}get speed(){return this.animation.playbackRate}set speed(o){o<0&&(this.finishedTime=null),this.animation.playbackRate=o}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(o){this.animation.startTime=o}attachTimeline({timeline:o,observe:a}){var f;return this.allowFlatten&&((f=this.animation.effect)==null||f.updateTiming({easing:"linear"})),this.animation.onfinish=null,o&&Ev()?(this.animation.timeline=o,Zr):a(this)}}const Xm={anticipate:Sm,backInOut:bm,circInOut:Tm};function Nv(r){return r in Xm}function _v(r){typeof r.ease=="string"&&Nv(r.ease)&&(r.ease=Xm[r.ease])}const z1=10;class Rv extends Iv{constructor(o){_v(o),Vm(o),super(o),o.startTime&&(this.startTime=o.startTime),this.options=o}updateMotionValue(o){const{motionValue:a,onUpdate:f,onComplete:p,element:y,...w}=this.options;if(!a)return;if(o!==void 0){a.set(o);return}const S=new zf({...w,autoplay:!1}),v=gi(this.finishedTime??this.time);a.setWithVelocity(S.sample(v-z1).value,S.sample(v).value,z1),S.stop()}}const W1=(r,o)=>o==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(ws.test(r)||r==="0")&&!r.startsWith("url("));function kv(r){const o=r[0];if(r.length===1)return!0;for(let a=0;a<r.length;a++)if(r[a]!==o)return!0}function Pv(r,o,a,f){const p=r[0];if(p===null)return!1;if(o==="display"||o==="visibility")return!0;const y=r[r.length-1],w=W1(p,o),S=W1(y,o);return!w||!S?!1:kv(r)||(a==="spring"||Gm(a))&&f}function qd(r){r.duration=0,r.type}const Ov=new Set(["opacity","clipPath","filter","transform"]),Mv=Rf(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Dv(r){var A;const{motionValue:o,name:a,repeatDelay:f,repeatType:p,damping:y,type:w}=r;if(!(((A=o==null?void 0:o.owner)==null?void 0:A.current)instanceof HTMLElement))return!1;const{onUpdate:v,transformTemplate:E}=o.owner.getProps();return Mv()&&a&&Ov.has(a)&&(a!=="transform"||!E)&&!v&&!f&&p!=="mirror"&&y!==0&&w!=="inertia"}const Lv=40;class Bv extends Uf{constructor({autoplay:o=!0,delay:a=0,type:f="keyframes",repeat:p=0,repeatDelay:y=0,repeatType:w="loop",keyframes:S,name:v,motionValue:E,element:A,...N}){var L;super(),this.stop=()=>{var B,j;this._animation&&(this._animation.stop(),(B=this.stopTimeline)==null||B.call(this)),(j=this.keyframeResolver)==null||j.cancel()},this.createdAt=Ir.now();const R={autoplay:o,delay:a,type:f,repeat:p,repeatDelay:y,repeatType:w,name:v,motionValue:E,element:A,...N},M=(A==null?void 0:A.KeyframeResolver)||Wf;this.keyframeResolver=new M(S,(B,j,U)=>this.onKeyframesResolved(B,j,R,!U),v,E,A),(L=this.keyframeResolver)==null||L.scheduleResolve()}onKeyframesResolved(o,a,f,p){this.keyframeResolver=void 0;const{name:y,type:w,velocity:S,delay:v,isHandoff:E,onUpdate:A}=f;this.resolvedAt=Ir.now(),Pv(o,y,w,S)||((Ui.instantAnimations||!v)&&(A==null||A(Vf(o,f,a))),o[0]=o[o.length-1],qd(f),f.repeat=0);const R={startTime:p?this.resolvedAt?this.resolvedAt-this.createdAt>Lv?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:a,...f,keyframes:o},M=!E&&Dv(R)?new Rv({...R,element:R.motionValue.owner.current}):new zf(R);M.finished.then(()=>this.notifyFinished()).catch(Zr),this.pendingTimeline&&(this.stopTimeline=M.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=M}get finished(){return this._animation?this.animation.finished:this._finished}then(o,a){return this.finished.finally(o).then(()=>{})}get animation(){var o;return this._animation||((o=this.keyframeResolver)==null||o.resume(),wv()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(o){this.animation.time=o}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(o){this.animation.speed=o}get startTime(){return this.animation.startTime}attachTimeline(o){return this._animation?this.stopTimeline=this.animation.attachTimeline(o):this.pendingTimeline=o,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var o;this._animation&&this.animation.cancel(),(o=this.keyframeResolver)==null||o.cancel()}}const jv=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Fv(r){const o=jv.exec(r);if(!o)return[,];const[,a,f,p]=o;return[`--${a??f}`,p]}function Ym(r,o,a=1){const[f,p]=Fv(r);if(!f)return;const y=window.getComputedStyle(o).getPropertyValue(f);if(y){const w=y.trim();return mm(w)?parseFloat(w):w}return Df(p)?Ym(p,o,a+1):p}function Hf(r,o){return(r==null?void 0:r[o])??(r==null?void 0:r.default)??r}const Zm=new Set(["width","height","top","left","right","bottom",...zo]),Vv={test:r=>r==="auto",parse:r=>r},Km=r=>o=>o.test(r),$m=[Uo,yt,yi,ms,kw,Rw,Vv],H1=r=>$m.find(Km(r));function Uv(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||xm(r):!0}const zv=new Set(["brightness","contrast","saturate","opacity"]);function Wv(r){const[o,a]=r.slice(0,-1).split("(");if(o==="drop-shadow")return r;const[f]=a.match(Lf)||[];if(!f)return r;const p=a.replace(f,"");let y=zv.has(o)?1:0;return f!==a&&(y*=100),o+"("+y+p+")"}const Hv=/\b([a-z-]*)\(.*?\)/gu,Qd={...ws,getAnimatableNone:r=>{const o=r.match(Hv);return o?o.map(Wv).join(" "):r}},G1={...Uo,transform:Math.round},Gv={rotate:ms,rotateX:ms,rotateY:ms,rotateZ:ms,scale:sc,scaleX:sc,scaleY:sc,scaleZ:sc,skew:ms,skewX:ms,skewY:ms,distance:yt,translateX:yt,translateY:yt,translateZ:yt,x:yt,y:yt,z:yt,perspective:yt,transformPerspective:yt,opacity:Va,originX:k1,originY:k1,originZ:yt},Gf={borderWidth:yt,borderTopWidth:yt,borderRightWidth:yt,borderBottomWidth:yt,borderLeftWidth:yt,borderRadius:yt,radius:yt,borderTopLeftRadius:yt,borderTopRightRadius:yt,borderBottomRightRadius:yt,borderBottomLeftRadius:yt,width:yt,maxWidth:yt,height:yt,maxHeight:yt,top:yt,right:yt,bottom:yt,left:yt,padding:yt,paddingTop:yt,paddingRight:yt,paddingBottom:yt,paddingLeft:yt,margin:yt,marginTop:yt,marginRight:yt,marginBottom:yt,marginLeft:yt,backgroundPositionX:yt,backgroundPositionY:yt,...Gv,zIndex:G1,fillOpacity:Va,strokeOpacity:Va,numOctaves:G1},Xv={...Gf,color:kn,backgroundColor:kn,outlineColor:kn,fill:kn,stroke:kn,borderColor:kn,borderTopColor:kn,borderRightColor:kn,borderBottomColor:kn,borderLeftColor:kn,filter:Qd,WebkitFilter:Qd},qm=r=>Xv[r];function Qm(r,o){let a=qm(r);return a!==Qd&&(a=ws),a.getAnimatableNone?a.getAnimatableNone(o):void 0}const Yv=new Set(["auto","none","0"]);function Zv(r,o,a){let f=0,p;for(;f<r.length&&!p;){const y=r[f];typeof y=="string"&&!Yv.has(y)&&Ua(y).values.length&&(p=r[f]),f++}if(p&&a)for(const y of o)r[y]=Qm(a,p)}class Kv extends Wf{constructor(o,a,f,p,y){super(o,a,f,p,y,!0)}readKeyframes(){const{unresolvedKeyframes:o,element:a,name:f}=this;if(!a||!a.current)return;super.readKeyframes();for(let v=0;v<o.length;v++){let E=o[v];if(typeof E=="string"&&(E=E.trim(),Df(E))){const A=Ym(E,a.current);A!==void 0&&(o[v]=A),v===o.length-1&&(this.finalKeyframe=E)}}if(this.resolveNoneKeyframes(),!Zm.has(f)||o.length!==2)return;const[p,y]=o,w=H1(p),S=H1(y);if(w!==S)if(V1(w)&&V1(S))for(let v=0;v<o.length;v++){const E=o[v];typeof E=="string"&&(o[v]=parseFloat(E))}else Js[f]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:o,name:a}=this,f=[];for(let p=0;p<o.length;p++)(o[p]===null||Uv(o[p]))&&f.push(p);f.length&&Zv(o,f,a)}measureInitialState(){const{element:o,unresolvedKeyframes:a,name:f}=this;if(!o||!o.current)return;f==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Js[f](o.measureViewportBox(),window.getComputedStyle(o.current)),a[0]=this.measuredOrigin;const p=a[a.length-1];p!==void 0&&o.getValue(f,p).jump(p,!1)}measureEndState(){var S;const{element:o,name:a,unresolvedKeyframes:f}=this;if(!o||!o.current)return;const p=o.getValue(a);p&&p.jump(this.measuredOrigin,!1);const y=f.length-1,w=f[y];f[y]=Js[a](o.measureViewportBox(),window.getComputedStyle(o.current)),w!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=w),(S=this.removedTransforms)!=null&&S.length&&this.removedTransforms.forEach(([v,E])=>{o.getValue(v).set(E)}),this.resolveNoneKeyframes()}}function $v(r,o,a){if(r instanceof EventTarget)return[r];if(typeof r=="string"){let f=document;const p=(a==null?void 0:a[r])??f.querySelectorAll(r);return p?Array.from(p):[]}return Array.from(r)}const Jm=(r,o)=>o&&typeof r=="number"?o.transform(r):r;function eg(r){return gm(r)&&"offsetHeight"in r}const X1=30,qv=r=>!isNaN(parseFloat(r));class Qv{constructor(o,a={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=f=>{var y;const p=Ir.now();if(this.updatedAt!==p&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(f),this.current!==this.prev&&((y=this.events.change)==null||y.notify(this.current),this.dependents))for(const w of this.dependents)w.dirty()},this.hasAnimated=!1,this.setCurrent(o),this.owner=a.owner}setCurrent(o){this.current=o,this.updatedAt=Ir.now(),this.canTrackVelocity===null&&o!==void 0&&(this.canTrackVelocity=qv(this.current))}setPrevFrameValue(o=this.current){this.prevFrameValue=o,this.prevUpdatedAt=this.updatedAt}onChange(o){return this.on("change",o)}on(o,a){this.events[o]||(this.events[o]=new kf);const f=this.events[o].add(a);return o==="change"?()=>{f(),un.read(()=>{this.events.change.getSize()||this.stop()})}:f}clearListeners(){for(const o in this.events)this.events[o].clear()}attach(o,a){this.passiveEffect=o,this.stopPassiveEffect=a}set(o){this.passiveEffect?this.passiveEffect(o,this.updateAndNotify):this.updateAndNotify(o)}setWithVelocity(o,a,f){this.set(a),this.prev=void 0,this.prevFrameValue=o,this.prevUpdatedAt=this.updatedAt-f}jump(o,a=!0){this.updateAndNotify(o),this.prev=o,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var o;(o=this.events.change)==null||o.notify(this.current)}addDependent(o){this.dependents||(this.dependents=new Set),this.dependents.add(o)}removeDependent(o){this.dependents&&this.dependents.delete(o)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const o=Ir.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||o-this.updatedAt>X1)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,X1);return ym(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(o){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=o(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var o,a;(o=this.dependents)==null||o.clear(),(a=this.events.destroy)==null||a.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Bo(r,o){return new Qv(r,o)}const{schedule:Xf}=_m(queueMicrotask,!1),oi={x:!1,y:!1};function tg(){return oi.x||oi.y}function Jv(r){return r==="x"||r==="y"?oi[r]?null:(oi[r]=!0,()=>{oi[r]=!1}):oi.x||oi.y?null:(oi.x=oi.y=!0,()=>{oi.x=oi.y=!1})}function ng(r,o){const a=$v(r),f=new AbortController,p={passive:!0,...o,signal:f.signal};return[a,p,()=>f.abort()]}function Y1(r){return!(r.pointerType==="touch"||tg())}function e3(r,o,a={}){const[f,p,y]=ng(r,a),w=S=>{if(!Y1(S))return;const{target:v}=S,E=o(v,S);if(typeof E!="function"||!v)return;const A=N=>{Y1(N)&&(E(N),v.removeEventListener("pointerleave",A))};v.addEventListener("pointerleave",A,p)};return f.forEach(S=>{S.addEventListener("pointerenter",w,p)}),y}const rg=(r,o)=>o?r===o?!0:rg(r,o.parentElement):!1,Yf=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,t3=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function n3(r){return t3.has(r.tagName)||r.tabIndex!==-1}const pc=new WeakSet;function Z1(r){return o=>{o.key==="Enter"&&r(o)}}function Ed(r,o){r.dispatchEvent(new PointerEvent("pointer"+o,{isPrimary:!0,bubbles:!0}))}const r3=(r,o)=>{const a=r.currentTarget;if(!a)return;const f=Z1(()=>{if(pc.has(a))return;Ed(a,"down");const p=Z1(()=>{Ed(a,"up")}),y=()=>Ed(a,"cancel");a.addEventListener("keyup",p,o),a.addEventListener("blur",y,o)});a.addEventListener("keydown",f,o),a.addEventListener("blur",()=>a.removeEventListener("keydown",f),o)};function K1(r){return Yf(r)&&!tg()}function i3(r,o,a={}){const[f,p,y]=ng(r,a),w=S=>{const v=S.currentTarget;if(!K1(S))return;pc.add(v);const E=o(v,S),A=(M,L)=>{window.removeEventListener("pointerup",N),window.removeEventListener("pointercancel",R),pc.has(v)&&pc.delete(v),K1(M)&&typeof E=="function"&&E(M,{success:L})},N=M=>{A(M,v===window||v===document||a.useGlobalTarget||rg(v,M.target))},R=M=>{A(M,!1)};window.addEventListener("pointerup",N,p),window.addEventListener("pointercancel",R,p)};return f.forEach(S=>{(a.useGlobalTarget?window:S).addEventListener("pointerdown",w,p),eg(S)&&(S.addEventListener("focus",E=>r3(E,p)),!n3(S)&&!S.hasAttribute("tabindex")&&(S.tabIndex=0))}),y}function ig(r){return gm(r)&&"ownerSVGElement"in r}function s3(r){return ig(r)&&r.tagName==="svg"}const dr=r=>!!(r&&r.getVelocity),o3=[...$m,kn,ws],a3=r=>o3.find(Km(r)),Zf=I.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});class l3 extends I.Component{getSnapshotBeforeUpdate(o){const a=this.props.childRef.current;if(a&&o.isPresent&&!this.props.isPresent){const f=a.offsetParent,p=eg(f)&&f.offsetWidth||0,y=this.props.sizeRef.current;y.height=a.offsetHeight||0,y.width=a.offsetWidth||0,y.top=a.offsetTop,y.left=a.offsetLeft,y.right=p-y.width-y.left}return null}componentDidUpdate(){}render(){return this.props.children}}function c3({children:r,isPresent:o,anchorX:a,root:f}){const p=I.useId(),y=I.useRef(null),w=I.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:S}=I.useContext(Zf);return I.useInsertionEffect(()=>{const{width:v,height:E,top:A,left:N,right:R}=w.current;if(o||!y.current||!v||!E)return;const M=a==="left"?`left: ${N}`:`right: ${R}`;y.current.dataset.motionPopId=p;const L=document.createElement("style");S&&(L.nonce=S);const B=f??document.head;return B.appendChild(L),L.sheet&&L.sheet.insertRule(`
          [data-motion-pop-id="${p}"] {
            position: absolute !important;
            width: ${v}px !important;
            height: ${E}px !important;
            ${M}px !important;
            top: ${A}px !important;
          }
        `),()=>{B.contains(L)&&B.removeChild(L)}},[o]),x.jsx(l3,{isPresent:o,childRef:y,sizeRef:w,children:I.cloneElement(r,{ref:y})})}const u3=({children:r,initial:o,isPresent:a,onExitComplete:f,custom:p,presenceAffectsLayout:y,mode:w,anchorX:S,root:v})=>{const E=Af(d3),A=I.useId();let N=!0,R=I.useMemo(()=>(N=!1,{id:A,initial:o,isPresent:a,custom:p,onExitComplete:M=>{E.set(M,!0);for(const L of E.values())if(!L)return;f&&f()},register:M=>(E.set(M,!1),()=>E.delete(M))}),[a,E,f]);return y&&N&&(R={...R}),I.useMemo(()=>{E.forEach((M,L)=>E.set(L,!1))},[a]),I.useEffect(()=>{!a&&!E.size&&f&&f()},[a]),w==="popLayout"&&(r=x.jsx(c3,{isPresent:a,anchorX:S,root:v,children:r})),x.jsx(Oc.Provider,{value:R,children:r})};function d3(){return new Map}function sg(r=!0){const o=I.useContext(Oc);if(o===null)return[!0,null];const{isPresent:a,onExitComplete:f,register:p}=o,y=I.useId();I.useEffect(()=>{if(r)return p(y)},[r]);const w=I.useCallback(()=>r&&f&&f(y),[y,f,r]);return!a&&f?[!1,w]:[!0]}const oc=r=>r.key||"";function $1(r){const o=[];return I.Children.forEach(r,a=>{I.isValidElement(a)&&o.push(a)}),o}const bd=({children:r,custom:o,initial:a=!0,onExitComplete:f,presenceAffectsLayout:p=!0,mode:y="sync",propagate:w=!1,anchorX:S="left",root:v})=>{const[E,A]=sg(w),N=I.useMemo(()=>$1(r),[r]),R=w&&!E?[]:N.map(oc),M=I.useRef(!0),L=I.useRef(N),B=Af(()=>new Map),[j,U]=I.useState(N),[W,F]=I.useState(N);pm(()=>{M.current=!1,L.current=N;for(let re=0;re<W.length;re++){const X=oc(W[re]);R.includes(X)?B.delete(X):B.get(X)!==!0&&B.set(X,!1)}},[W,R.length,R.join("-")]);const q=[];if(N!==j){let re=[...N];for(let X=0;X<W.length;X++){const le=W[X],te=oc(le);R.includes(te)||(re.splice(X,0,le),q.push(le))}return y==="wait"&&q.length&&(re=q),F($1(re)),U(N),null}const{forceRender:ee}=I.useContext(Sf);return x.jsx(x.Fragment,{children:W.map(re=>{const X=oc(re),le=w&&!E?!1:N===W||R.includes(X),te=()=>{if(B.has(X))B.set(X,!0);else return;let ke=!0;B.forEach(Le=>{Le||(ke=!1)}),ke&&(ee==null||ee(),F(L.current),w&&(A==null||A()),f&&f())};return x.jsx(u3,{isPresent:le,initial:!M.current||a?void 0:!1,custom:o,presenceAffectsLayout:p,mode:y,root:v,onExitComplete:le?void 0:te,anchorX:S,children:re},X)})})},og=I.createContext({strict:!1}),q1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},jo={};for(const r in q1)jo[r]={isEnabled:o=>q1[r].some(a=>!!o[a])};function f3(r){for(const o in r)jo[o]={...jo[o],...r[o]}}const h3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Sc(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||h3.has(r)}let ag=r=>!Sc(r);function p3(r){typeof r=="function"&&(ag=o=>o.startsWith("on")?!Sc(o):r(o))}try{p3(require("@emotion/is-prop-valid").default)}catch{}function m3(r,o,a){const f={};for(const p in r)p==="values"&&typeof r.values=="object"||(ag(p)||a===!0&&Sc(p)||!o&&!Sc(p)||r.draggable&&p.startsWith("onDrag"))&&(f[p]=r[p]);return f}const Mc=I.createContext({});function Dc(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}function za(r){return typeof r=="string"||Array.isArray(r)}const Kf=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],$f=["initial",...Kf];function Lc(r){return Dc(r.animate)||$f.some(o=>za(r[o]))}function lg(r){return!!(Lc(r)||r.variants)}function g3(r,o){if(Lc(r)){const{initial:a,animate:f}=r;return{initial:a===!1||za(a)?a:void 0,animate:za(f)?f:void 0}}return r.inherit!==!1?o:{}}function x3(r){const{initial:o,animate:a}=g3(r,I.useContext(Mc));return I.useMemo(()=>({initial:o,animate:a}),[Q1(o),Q1(a)])}function Q1(r){return Array.isArray(r)?r.join(" "):r}const Wa={};function y3(r){for(const o in r)Wa[o]=r[o],Mf(o)&&(Wa[o].isCSSVariable=!0)}function cg(r,{layout:o,layoutId:a}){return Wo.has(r)||r.startsWith("origin")||(o||a!==void 0)&&(!!Wa[r]||r==="opacity")}const w3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},v3=zo.length;function C3(r,o,a){let f="",p=!0;for(let y=0;y<v3;y++){const w=zo[y],S=r[w];if(S===void 0)continue;let v=!0;if(typeof S=="number"?v=S===(w.startsWith("scale")?1:0):v=parseFloat(S)===0,!v||a){const E=Jm(S,Gf[w]);if(!v){p=!1;const A=w3[w]||w;f+=`${A}(${E}) `}a&&(o[w]=E)}}return f=f.trim(),a?f=a(o,p?"":f):p&&(f="none"),f}function qf(r,o,a){const{style:f,vars:p,transformOrigin:y}=r;let w=!1,S=!1;for(const v in o){const E=o[v];if(Wo.has(v)){w=!0;continue}else if(Mf(v)){p[v]=E;continue}else{const A=Jm(E,Gf[v]);v.startsWith("origin")?(S=!0,y[v]=A):f[v]=A}}if(o.transform||(w||a?f.transform=C3(o,r.transform,a):f.transform&&(f.transform="none")),S){const{originX:v="50%",originY:E="50%",originZ:A=0}=y;f.transformOrigin=`${v} ${E} ${A}`}}const Qf=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ug(r,o,a){for(const f in o)!dr(o[f])&&!cg(f,a)&&(r[f]=o[f])}function E3({transformTemplate:r},o){return I.useMemo(()=>{const a=Qf();return qf(a,o,r),Object.assign({},a.vars,a.style)},[o])}function b3(r,o){const a=r.style||{},f={};return ug(f,a,r),Object.assign(f,E3(r,o)),f}function S3(r,o){const a={},f=b3(r,o);return r.drag&&r.dragListener!==!1&&(a.draggable=!1,f.userSelect=f.WebkitUserSelect=f.WebkitTouchCallout="none",f.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(a.tabIndex=0),a.style=f,a}const A3={offset:"stroke-dashoffset",array:"stroke-dasharray"},T3={offset:"strokeDashoffset",array:"strokeDasharray"};function I3(r,o,a=1,f=0,p=!0){r.pathLength=1;const y=p?A3:T3;r[y.offset]=yt.transform(-f);const w=yt.transform(o),S=yt.transform(a);r[y.array]=`${w} ${S}`}function dg(r,{attrX:o,attrY:a,attrScale:f,pathLength:p,pathSpacing:y=1,pathOffset:w=0,...S},v,E,A){if(qf(r,S,E),v){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:N,style:R}=r;N.transform&&(R.transform=N.transform,delete N.transform),(R.transform||N.transformOrigin)&&(R.transformOrigin=N.transformOrigin??"50% 50%",delete N.transformOrigin),R.transform&&(R.transformBox=(A==null?void 0:A.transformBox)??"fill-box",delete N.transformBox),o!==void 0&&(N.x=o),a!==void 0&&(N.y=a),f!==void 0&&(N.scale=f),p!==void 0&&I3(N,p,y,w,!1)}const fg=()=>({...Qf(),attrs:{}}),hg=r=>typeof r=="string"&&r.toLowerCase()==="svg";function N3(r,o,a,f){const p=I.useMemo(()=>{const y=fg();return dg(y,o,hg(f),r.transformTemplate,r.style),{...y.attrs,style:{...y.style}}},[o]);if(r.style){const y={};ug(y,r.style,r),p.style={...y,...p.style}}return p}const _3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Jf(r){return typeof r!="string"||r.includes("-")?!1:!!(_3.indexOf(r)>-1||/[A-Z]/u.test(r))}function R3(r,o,a,{latestValues:f},p,y=!1){const S=(Jf(r)?N3:S3)(o,f,p,r),v=m3(o,typeof r=="string",y),E=r!==I.Fragment?{...v,...S,ref:a}:{},{children:A}=o,N=I.useMemo(()=>dr(A)?A.get():A,[A]);return I.createElement(r,{...E,children:N})}function J1(r){const o=[{},{}];return r==null||r.values.forEach((a,f)=>{o[0][f]=a.get(),o[1][f]=a.getVelocity()}),o}function eh(r,o,a,f){if(typeof o=="function"){const[p,y]=J1(f);o=o(a!==void 0?a:r.custom,p,y)}if(typeof o=="string"&&(o=r.variants&&r.variants[o]),typeof o=="function"){const[p,y]=J1(f);o=o(a!==void 0?a:r.custom,p,y)}return o}function mc(r){return dr(r)?r.get():r}function k3({scrapeMotionValuesFromProps:r,createRenderState:o},a,f,p){return{latestValues:P3(a,f,p,r),renderState:o()}}function P3(r,o,a,f){const p={},y=f(r,{});for(const R in y)p[R]=mc(y[R]);let{initial:w,animate:S}=r;const v=Lc(r),E=lg(r);o&&E&&!v&&r.inherit!==!1&&(w===void 0&&(w=o.initial),S===void 0&&(S=o.animate));let A=a?a.initial===!1:!1;A=A||w===!1;const N=A?S:w;if(N&&typeof N!="boolean"&&!Dc(N)){const R=Array.isArray(N)?N:[N];for(let M=0;M<R.length;M++){const L=eh(r,R[M]);if(L){const{transitionEnd:B,transition:j,...U}=L;for(const W in U){let F=U[W];if(Array.isArray(F)){const q=A?F.length-1:0;F=F[q]}F!==null&&(p[W]=F)}for(const W in B)p[W]=B[W]}}}return p}const pg=r=>(o,a)=>{const f=I.useContext(Mc),p=I.useContext(Oc),y=()=>k3(r,o,f,p);return a?y():Af(y)};function th(r,o,a){var y;const{style:f}=r,p={};for(const w in f)(dr(f[w])||o.style&&dr(o.style[w])||cg(w,r)||((y=a==null?void 0:a.getValue(w))==null?void 0:y.liveStyle)!==void 0)&&(p[w]=f[w]);return p}const O3=pg({scrapeMotionValuesFromProps:th,createRenderState:Qf});function mg(r,o,a){const f=th(r,o,a);for(const p in r)if(dr(r[p])||dr(o[p])){const y=zo.indexOf(p)!==-1?"attr"+p.charAt(0).toUpperCase()+p.substring(1):p;f[y]=r[p]}return f}const M3=pg({scrapeMotionValuesFromProps:mg,createRenderState:fg}),D3=Symbol.for("motionComponentSymbol");function Ro(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function L3(r,o,a){return I.useCallback(f=>{f&&r.onMount&&r.onMount(f),o&&(f?o.mount(f):o.unmount()),a&&(typeof a=="function"?a(f):Ro(a)&&(a.current=f))},[o])}const nh=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),B3="framerAppearId",gg="data-"+nh(B3),xg=I.createContext({});function j3(r,o,a,f,p){var B,j;const{visualElement:y}=I.useContext(Mc),w=I.useContext(og),S=I.useContext(Oc),v=I.useContext(Zf).reducedMotion,E=I.useRef(null);f=f||w.renderer,!E.current&&f&&(E.current=f(r,{visualState:o,parent:y,props:a,presenceContext:S,blockInitialAnimation:S?S.initial===!1:!1,reducedMotionConfig:v}));const A=E.current,N=I.useContext(xg);A&&!A.projection&&p&&(A.type==="html"||A.type==="svg")&&F3(E.current,a,p,N);const R=I.useRef(!1);I.useInsertionEffect(()=>{A&&R.current&&A.update(a,S)});const M=a[gg],L=I.useRef(!!M&&!((B=window.MotionHandoffIsComplete)!=null&&B.call(window,M))&&((j=window.MotionHasOptimisedAnimation)==null?void 0:j.call(window,M)));return pm(()=>{A&&(R.current=!0,window.MotionIsMounted=!0,A.updateFeatures(),A.scheduleRenderMicrotask(),L.current&&A.animationState&&A.animationState.animateChanges())}),I.useEffect(()=>{A&&(!L.current&&A.animationState&&A.animationState.animateChanges(),L.current&&(queueMicrotask(()=>{var U;(U=window.MotionHandoffMarkAsComplete)==null||U.call(window,M)}),L.current=!1),A.enteringChildren=void 0)}),A}function F3(r,o,a,f){const{layoutId:p,layout:y,drag:w,dragConstraints:S,layoutScroll:v,layoutRoot:E,layoutCrossfade:A}=o;r.projection=new a(r.latestValues,o["data-framer-portal-id"]?void 0:yg(r.parent)),r.projection.setOptions({layoutId:p,layout:y,alwaysMeasureLayout:!!w||S&&Ro(S),visualElement:r,animationType:typeof y=="string"?y:"both",initialPromotionConfig:f,crossfade:A,layoutScroll:v,layoutRoot:E})}function yg(r){if(r)return r.options.allowProjection!==!1?r.projection:yg(r.parent)}function Sd(r,{forwardMotionProps:o=!1}={},a,f){a&&f3(a);const p=Jf(r)?M3:O3;function y(S,v){let E;const A={...I.useContext(Zf),...S,layoutId:V3(S)},{isStatic:N}=A,R=x3(S),M=p(S,N);if(!N&&Tf){U3();const L=z3(A);E=L.MeasureLayout,R.visualElement=j3(r,M,A,f,L.ProjectionNode)}return x.jsxs(Mc.Provider,{value:R,children:[E&&R.visualElement?x.jsx(E,{visualElement:R.visualElement,...A}):null,R3(r,S,L3(M,R.visualElement,v),M,N,o)]})}y.displayName=`motion.${typeof r=="string"?r:`create(${r.displayName??r.name??""})`}`;const w=I.forwardRef(y);return w[D3]=r,w}function V3({layoutId:r}){const o=I.useContext(Sf).id;return o&&r!==void 0?o+"-"+r:r}function U3(r,o){I.useContext(og).strict}function z3(r){const{drag:o,layout:a}=jo;if(!o&&!a)return{};const f={...o,...a};return{MeasureLayout:o!=null&&o.isEnabled(r)||a!=null&&a.isEnabled(r)?f.MeasureLayout:void 0,ProjectionNode:f.ProjectionNode}}function W3(r,o){if(typeof Proxy>"u")return Sd;const a=new Map,f=(y,w)=>Sd(y,w,r,o),p=(y,w)=>f(y,w);return new Proxy(p,{get:(y,w)=>w==="create"?f:(a.has(w)||a.set(w,Sd(w,void 0,r,o)),a.get(w))})}function wg({top:r,left:o,right:a,bottom:f}){return{x:{min:o,max:a},y:{min:r,max:f}}}function H3({x:r,y:o}){return{top:o.min,right:r.max,bottom:o.max,left:r.min}}function G3(r,o){if(!o)return r;const a=o({x:r.left,y:r.top}),f=o({x:r.right,y:r.bottom});return{top:a.y,left:a.x,bottom:f.y,right:f.x}}function Ad(r){return r===void 0||r===1}function Jd({scale:r,scaleX:o,scaleY:a}){return!Ad(r)||!Ad(o)||!Ad(a)}function Ks(r){return Jd(r)||vg(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function vg(r){return ep(r.x)||ep(r.y)}function ep(r){return r&&r!=="0%"}function Ac(r,o,a){const f=r-a,p=o*f;return a+p}function tp(r,o,a,f,p){return p!==void 0&&(r=Ac(r,p,f)),Ac(r,a,f)+o}function ef(r,o=0,a=1,f,p){r.min=tp(r.min,o,a,f,p),r.max=tp(r.max,o,a,f,p)}function Cg(r,{x:o,y:a}){ef(r.x,o.translate,o.scale,o.originPoint),ef(r.y,a.translate,a.scale,a.originPoint)}const np=.999999999999,rp=1.0000000000001;function X3(r,o,a,f=!1){const p=a.length;if(!p)return;o.x=o.y=1;let y,w;for(let S=0;S<p;S++){y=a[S],w=y.projectionDelta;const{visualElement:v}=y.options;v&&v.props.style&&v.props.style.display==="contents"||(f&&y.options.layoutScroll&&y.scroll&&y!==y.root&&Po(r,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),w&&(o.x*=w.x.scale,o.y*=w.y.scale,Cg(r,w)),f&&Ks(y.latestValues)&&Po(r,y.latestValues))}o.x<rp&&o.x>np&&(o.x=1),o.y<rp&&o.y>np&&(o.y=1)}function ko(r,o){r.min=r.min+o,r.max=r.max+o}function ip(r,o,a,f,p=.5){const y=pn(r.min,r.max,p);ef(r,o,a,y,f)}function Po(r,o){ip(r.x,o.x,o.scaleX,o.scale,o.originX),ip(r.y,o.y,o.scaleY,o.scale,o.originY)}function Eg(r,o){return wg(G3(r.getBoundingClientRect(),o))}function Y3(r,o,a){const f=Eg(r,a),{scroll:p}=o;return p&&(ko(f.x,p.offset.x),ko(f.y,p.offset.y)),f}const sp=()=>({translate:0,scale:1,origin:0,originPoint:0}),Oo=()=>({x:sp(),y:sp()}),op=()=>({min:0,max:0}),Tn=()=>({x:op(),y:op()}),tf={current:null},bg={current:!1};function Z3(){if(bg.current=!0,!!Tf)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),o=()=>tf.current=r.matches;r.addEventListener("change",o),o()}else tf.current=!1}const K3=new WeakMap;function $3(r,o,a){for(const f in o){const p=o[f],y=a[f];if(dr(p))r.addValue(f,p);else if(dr(y))r.addValue(f,Bo(p,{owner:r}));else if(y!==p)if(r.hasValue(f)){const w=r.getValue(f);w.liveStyle===!0?w.jump(p):w.hasAnimated||w.set(p)}else{const w=r.getStaticValue(f);r.addValue(f,Bo(w!==void 0?w:p,{owner:r}))}}for(const f in a)o[f]===void 0&&r.removeValue(f);return o}const ap=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class q3{scrapeMotionValuesFromProps(o,a,f){return{}}constructor({parent:o,props:a,presenceContext:f,reducedMotionConfig:p,blockInitialAnimation:y,visualState:w},S={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Wf,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const R=Ir.now();this.renderScheduledAt<R&&(this.renderScheduledAt=R,un.render(this.render,!1,!0))};const{latestValues:v,renderState:E}=w;this.latestValues=v,this.baseTarget={...v},this.initialValues=a.initial?{...v}:{},this.renderState=E,this.parent=o,this.props=a,this.presenceContext=f,this.depth=o?o.depth+1:0,this.reducedMotionConfig=p,this.options=S,this.blockInitialAnimation=!!y,this.isControllingVariants=Lc(a),this.isVariantNode=lg(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(o&&o.current);const{willChange:A,...N}=this.scrapeMotionValuesFromProps(a,{},this);for(const R in N){const M=N[R];v[R]!==void 0&&dr(M)&&M.set(v[R])}}mount(o){var a;this.current=o,K3.set(o,this),this.projection&&!this.projection.instance&&this.projection.mount(o),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((f,p)=>this.bindToMotionValue(p,f)),bg.current||Z3(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:tf.current,(a=this.parent)==null||a.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var o;this.projection&&this.projection.unmount(),ys(this.notifyUpdate),ys(this.render),this.valueSubscriptions.forEach(a=>a()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(o=this.parent)==null||o.removeChild(this);for(const a in this.events)this.events[a].clear();for(const a in this.features){const f=this.features[a];f&&(f.unmount(),f.isMounted=!1)}this.current=null}addChild(o){this.children.add(o),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(o)}removeChild(o){this.children.delete(o),this.enteringChildren&&this.enteringChildren.delete(o)}bindToMotionValue(o,a){this.valueSubscriptions.has(o)&&this.valueSubscriptions.get(o)();const f=Wo.has(o);f&&this.onBindTransform&&this.onBindTransform();const p=a.on("change",w=>{this.latestValues[o]=w,this.props.onUpdate&&un.preRender(this.notifyUpdate),f&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let y;window.MotionCheckAppearSync&&(y=window.MotionCheckAppearSync(this,o,a)),this.valueSubscriptions.set(o,()=>{p(),y&&y(),a.owner&&a.stop()})}sortNodePosition(o){return!this.current||!this.sortInstanceNodePosition||this.type!==o.type?0:this.sortInstanceNodePosition(this.current,o.current)}updateFeatures(){let o="animation";for(o in jo){const a=jo[o];if(!a)continue;const{isEnabled:f,Feature:p}=a;if(!this.features[o]&&p&&f(this.props)&&(this.features[o]=new p(this)),this.features[o]){const y=this.features[o];y.isMounted?y.update():(y.mount(),y.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Tn()}getStaticValue(o){return this.latestValues[o]}setStaticValue(o,a){this.latestValues[o]=a}update(o,a){(o.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=o,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let f=0;f<ap.length;f++){const p=ap[f];this.propEventSubscriptions[p]&&(this.propEventSubscriptions[p](),delete this.propEventSubscriptions[p]);const y="on"+p,w=o[y];w&&(this.propEventSubscriptions[p]=this.on(p,w))}this.prevMotionValues=$3(this,this.scrapeMotionValuesFromProps(o,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(o){return this.props.variants?this.props.variants[o]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(o){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(o),()=>a.variantChildren.delete(o)}addValue(o,a){const f=this.values.get(o);a!==f&&(f&&this.removeValue(o),this.bindToMotionValue(o,a),this.values.set(o,a),this.latestValues[o]=a.get())}removeValue(o){this.values.delete(o);const a=this.valueSubscriptions.get(o);a&&(a(),this.valueSubscriptions.delete(o)),delete this.latestValues[o],this.removeValueFromRenderState(o,this.renderState)}hasValue(o){return this.values.has(o)}getValue(o,a){if(this.props.values&&this.props.values[o])return this.props.values[o];let f=this.values.get(o);return f===void 0&&a!==void 0&&(f=Bo(a===null?void 0:a,{owner:this}),this.addValue(o,f)),f}readValue(o,a){let f=this.latestValues[o]!==void 0||!this.current?this.latestValues[o]:this.getBaseTargetFromProps(this.props,o)??this.readValueFromInstance(this.current,o,this.options);return f!=null&&(typeof f=="string"&&(mm(f)||xm(f))?f=parseFloat(f):!a3(f)&&ws.test(a)&&(f=Qm(o,a)),this.setBaseTarget(o,dr(f)?f.get():f)),dr(f)?f.get():f}setBaseTarget(o,a){this.baseTarget[o]=a}getBaseTarget(o){var y;const{initial:a}=this.props;let f;if(typeof a=="string"||typeof a=="object"){const w=eh(this.props,a,(y=this.presenceContext)==null?void 0:y.custom);w&&(f=w[o])}if(a&&f!==void 0)return f;const p=this.getBaseTargetFromProps(this.props,o);return p!==void 0&&!dr(p)?p:this.initialValues[o]!==void 0&&f===void 0?void 0:this.baseTarget[o]}on(o,a){return this.events[o]||(this.events[o]=new kf),this.events[o].add(a)}notify(o,...a){this.events[o]&&this.events[o].notify(...a)}scheduleRenderMicrotask(){Xf.render(this.render)}}class Sg extends q3{constructor(){super(...arguments),this.KeyframeResolver=Kv}sortInstanceNodePosition(o,a){return o.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(o,a){return o.style?o.style[a]:void 0}removeValueFromRenderState(o,{vars:a,style:f}){delete a[o],delete f[o]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:o}=this.props;dr(o)&&(this.childSubscription=o.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function Ag(r,{style:o,vars:a},f,p){const y=r.style;let w;for(w in o)y[w]=o[w];p==null||p.applyProjectionStyles(y,f);for(w in a)y.setProperty(w,a[w])}function Q3(r){return window.getComputedStyle(r)}class J3 extends Sg{constructor(){super(...arguments),this.type="html",this.renderInstance=Ag}readValueFromInstance(o,a){var f;if(Wo.has(a))return(f=this.projection)!=null&&f.isProjecting?Xd(a):pv(o,a);{const p=Q3(o),y=(Mf(a)?p.getPropertyValue(a):p[a])||0;return typeof y=="string"?y.trim():y}}measureInstanceViewportBox(o,{transformPagePoint:a}){return Eg(o,a)}build(o,a,f){qf(o,a,f.transformTemplate)}scrapeMotionValuesFromProps(o,a,f){return th(o,a,f)}}const Tg=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function eC(r,o,a,f){Ag(r,o,void 0,f);for(const p in o.attrs)r.setAttribute(Tg.has(p)?p:nh(p),o.attrs[p])}class tC extends Sg{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Tn}getBaseTargetFromProps(o,a){return o[a]}readValueFromInstance(o,a){if(Wo.has(a)){const f=qm(a);return f&&f.default||0}return a=Tg.has(a)?a:nh(a),o.getAttribute(a)}scrapeMotionValuesFromProps(o,a,f){return mg(o,a,f)}build(o,a,f){dg(o,a,this.isSVGTag,f.transformTemplate,f.style)}renderInstance(o,a,f,p){eC(o,a,f,p)}mount(o){this.isSVGTag=hg(o.tagName),super.mount(o)}}const nC=(r,o)=>Jf(r)?new tC(o):new J3(o,{allowProjection:r!==I.Fragment});function Do(r,o,a){const f=r.getProps();return eh(f,o,a!==void 0?a:f.custom,r)}const nf=r=>Array.isArray(r);function rC(r,o,a){r.hasValue(o)?r.getValue(o).set(a):r.addValue(o,Bo(a))}function iC(r){return nf(r)?r[r.length-1]||0:r}function sC(r,o){const a=Do(r,o);let{transitionEnd:f={},transition:p={},...y}=a||{};y={...y,...f};for(const w in y){const S=iC(y[w]);rC(r,w,S)}}function oC(r){return!!(dr(r)&&r.add)}function rf(r,o){const a=r.getValue("willChange");if(oC(a))return a.add(o);if(!a&&Ui.WillChange){const f=new Ui.WillChange("auto");r.addValue("willChange",f),f.add(o)}}function Ig(r){return r.props[gg]}const aC=r=>r!==null;function lC(r,{repeat:o,repeatType:a="loop"},f){const p=r.filter(aC),y=o&&a!=="loop"&&o%2===1?0:p.length-1;return p[y]}const cC={type:"spring",stiffness:500,damping:25,restSpeed:10},uC=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),dC={type:"keyframes",duration:.8},fC={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},hC=(r,{keyframes:o})=>o.length>2?dC:Wo.has(r)?r.startsWith("scale")?uC(o[1]):cC:fC;function pC({when:r,delay:o,delayChildren:a,staggerChildren:f,staggerDirection:p,repeat:y,repeatType:w,repeatDelay:S,from:v,elapsed:E,...A}){return!!Object.keys(A).length}const rh=(r,o,a,f={},p,y)=>w=>{const S=Hf(f,r)||{},v=S.delay||f.delay||0;let{elapsed:E=0}=f;E=E-gi(v);const A={keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:o.getVelocity(),...S,delay:-E,onUpdate:R=>{o.set(R),S.onUpdate&&S.onUpdate(R)},onComplete:()=>{w(),S.onComplete&&S.onComplete()},name:r,motionValue:o,element:y?void 0:p};pC(S)||Object.assign(A,hC(r,A)),A.duration&&(A.duration=gi(A.duration)),A.repeatDelay&&(A.repeatDelay=gi(A.repeatDelay)),A.from!==void 0&&(A.keyframes[0]=A.from);let N=!1;if((A.type===!1||A.duration===0&&!A.repeatDelay)&&(qd(A),A.delay===0&&(N=!0)),(Ui.instantAnimations||Ui.skipAnimations)&&(N=!0,qd(A),A.delay=0),A.allowFlatten=!S.type&&!S.ease,N&&!y&&o.get()!==void 0){const R=lC(A.keyframes,S);if(R!==void 0){un.update(()=>{A.onUpdate(R),A.onComplete()});return}}return S.isSync?new zf(A):new Bv(A)};function mC({protectedKeys:r,needsAnimating:o},a){const f=r.hasOwnProperty(a)&&o[a]!==!0;return o[a]=!1,f}function Ng(r,o,{delay:a=0,transitionOverride:f,type:p}={}){let{transition:y=r.getDefaultTransition(),transitionEnd:w,...S}=o;f&&(y=f);const v=[],E=p&&r.animationState&&r.animationState.getState()[p];for(const A in S){const N=r.getValue(A,r.latestValues[A]??null),R=S[A];if(R===void 0||E&&mC(E,A))continue;const M={delay:a,...Hf(y||{},A)},L=N.get();if(L!==void 0&&!N.isAnimating&&!Array.isArray(R)&&R===L&&!M.velocity)continue;let B=!1;if(window.MotionHandoffAnimation){const U=Ig(r);if(U){const W=window.MotionHandoffAnimation(U,A,un);W!==null&&(M.startTime=W,B=!0)}}rf(r,A),N.start(rh(A,N,R,r.shouldReduceMotion&&Zm.has(A)?{type:!1}:M,r,B));const j=N.animation;j&&v.push(j)}return w&&Promise.all(v).then(()=>{un.update(()=>{w&&sC(r,w)})}),v}function _g(r,o,a,f=0,p=1){const y=Array.from(r).sort((E,A)=>E.sortNodePosition(A)).indexOf(o),w=r.size,S=(w-1)*f;return typeof a=="function"?a(y,w):p===1?y*f:S-y*f}function sf(r,o,a={}){var v;const f=Do(r,o,a.type==="exit"?(v=r.presenceContext)==null?void 0:v.custom:void 0);let{transition:p=r.getDefaultTransition()||{}}=f||{};a.transitionOverride&&(p=a.transitionOverride);const y=f?()=>Promise.all(Ng(r,f,a)):()=>Promise.resolve(),w=r.variantChildren&&r.variantChildren.size?(E=0)=>{const{delayChildren:A=0,staggerChildren:N,staggerDirection:R}=p;return gC(r,o,E,A,N,R,a)}:()=>Promise.resolve(),{when:S}=p;if(S){const[E,A]=S==="beforeChildren"?[y,w]:[w,y];return E().then(()=>A())}else return Promise.all([y(),w(a.delay)])}function gC(r,o,a=0,f=0,p=0,y=1,w){const S=[];for(const v of r.variantChildren)v.notify("AnimationStart",o),S.push(sf(v,o,{...w,delay:a+(typeof f=="function"?0:f)+_g(r.variantChildren,v,f,p,y)}).then(()=>v.notify("AnimationComplete",o)));return Promise.all(S)}function xC(r,o,a={}){r.notify("AnimationStart",o);let f;if(Array.isArray(o)){const p=o.map(y=>sf(r,y,a));f=Promise.all(p)}else if(typeof o=="string")f=sf(r,o,a);else{const p=typeof o=="function"?Do(r,o,a.custom):o;f=Promise.all(Ng(r,p,a))}return f.then(()=>{r.notify("AnimationComplete",o)})}function Rg(r,o){if(!Array.isArray(o))return!1;const a=o.length;if(a!==r.length)return!1;for(let f=0;f<a;f++)if(o[f]!==r[f])return!1;return!0}const yC=$f.length;function kg(r){if(!r)return;if(!r.isControllingVariants){const a=r.parent?kg(r.parent)||{}:{};return r.props.initial!==void 0&&(a.initial=r.props.initial),a}const o={};for(let a=0;a<yC;a++){const f=$f[a],p=r.props[f];(za(p)||p===!1)&&(o[f]=p)}return o}const wC=[...Kf].reverse(),vC=Kf.length;function CC(r){return o=>Promise.all(o.map(({animation:a,options:f})=>xC(r,a,f)))}function EC(r){let o=CC(r),a=lp(),f=!0;const p=v=>(E,A)=>{var R;const N=Do(r,A,v==="exit"?(R=r.presenceContext)==null?void 0:R.custom:void 0);if(N){const{transition:M,transitionEnd:L,...B}=N;E={...E,...B,...L}}return E};function y(v){o=v(r)}function w(v){const{props:E}=r,A=kg(r.parent)||{},N=[],R=new Set;let M={},L=1/0;for(let j=0;j<vC;j++){const U=wC[j],W=a[U],F=E[U]!==void 0?E[U]:A[U],q=za(F),ee=U===v?W.isActive:null;ee===!1&&(L=j);let re=F===A[U]&&F!==E[U]&&q;if(re&&f&&r.manuallyAnimateOnMount&&(re=!1),W.protectedKeys={...M},!W.isActive&&ee===null||!F&&!W.prevProp||Dc(F)||typeof F=="boolean")continue;const X=bC(W.prevProp,F);let le=X||U===v&&W.isActive&&!re&&q||j>L&&q,te=!1;const ke=Array.isArray(F)?F:[F];let Le=ke.reduce(p(U),{});ee===!1&&(Le={});const{prevResolvedValues:Se={}}=W,Ne={...Se,...Le},Ee=ye=>{le=!0,R.has(ye)&&(te=!0,R.delete(ye)),W.needsAnimating[ye]=!0;const he=r.getValue(ye);he&&(he.liveStyle=!1)};for(const ye in Ne){const he=Le[ye],De=Se[ye];if(M.hasOwnProperty(ye))continue;let ce=!1;nf(he)&&nf(De)?ce=!Rg(he,De):ce=he!==De,ce?he!=null?Ee(ye):R.add(ye):he!==void 0&&R.has(ye)?Ee(ye):W.protectedKeys[ye]=!0}W.prevProp=F,W.prevResolvedValues=Le,W.isActive&&(M={...M,...Le}),f&&r.blockInitialAnimation&&(le=!1);const J=re&&X;le&&(!J||te)&&N.push(...ke.map(ye=>{const he={type:U};if(typeof ye=="string"&&f&&!J&&r.manuallyAnimateOnMount&&r.parent){const{parent:De}=r,ce=Do(De,ye);if(De.enteringChildren&&ce){const{delayChildren:Z}=ce.transition||{};he.delay=_g(De.enteringChildren,r,Z)}}return{animation:ye,options:he}}))}if(R.size){const j={};if(typeof E.initial!="boolean"){const U=Do(r,Array.isArray(E.initial)?E.initial[0]:E.initial);U&&U.transition&&(j.transition=U.transition)}R.forEach(U=>{const W=r.getBaseTarget(U),F=r.getValue(U);F&&(F.liveStyle=!0),j[U]=W??null}),N.push({animation:j})}let B=!!N.length;return f&&(E.initial===!1||E.initial===E.animate)&&!r.manuallyAnimateOnMount&&(B=!1),f=!1,B?o(N):Promise.resolve()}function S(v,E){var N;if(a[v].isActive===E)return Promise.resolve();(N=r.variantChildren)==null||N.forEach(R=>{var M;return(M=R.animationState)==null?void 0:M.setActive(v,E)}),a[v].isActive=E;const A=w(v);for(const R in a)a[R].protectedKeys={};return A}return{animateChanges:w,setActive:S,setAnimateFunction:y,getState:()=>a,reset:()=>{a=lp(),f=!0}}}function bC(r,o){return typeof o=="string"?o!==r:Array.isArray(o)?!Rg(o,r):!1}function Zs(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function lp(){return{animate:Zs(!0),whileInView:Zs(),whileHover:Zs(),whileTap:Zs(),whileDrag:Zs(),whileFocus:Zs(),exit:Zs()}}class vs{constructor(o){this.isMounted=!1,this.node=o}update(){}}class SC extends vs{constructor(o){super(o),o.animationState||(o.animationState=EC(o))}updateAnimationControlsSubscription(){const{animate:o}=this.node.getProps();Dc(o)&&(this.unmountControls=o.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:o}=this.node.getProps(),{animate:a}=this.node.prevProps||{};o!==a&&this.updateAnimationControlsSubscription()}unmount(){var o;this.node.animationState.reset(),(o=this.unmountControls)==null||o.call(this)}}let AC=0;class TC extends vs{constructor(){super(...arguments),this.id=AC++}update(){if(!this.node.presenceContext)return;const{isPresent:o,onExitComplete:a}=this.node.presenceContext,{isPresent:f}=this.node.prevPresenceContext||{};if(!this.node.animationState||o===f)return;const p=this.node.animationState.setActive("exit",!o);a&&!o&&p.then(()=>{a(this.id)})}mount(){const{register:o,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),o&&(this.unmount=o(this.id))}unmount(){}}const IC={animation:{Feature:SC},exit:{Feature:TC}};function Ha(r,o,a,f={passive:!0}){return r.addEventListener(o,a,f),()=>r.removeEventListener(o,a)}function qa(r){return{point:{x:r.pageX,y:r.pageY}}}const NC=r=>o=>Yf(o)&&r(o,qa(o));function Ma(r,o,a,f){return Ha(r,o,NC(a),f)}const Pg=1e-4,_C=1-Pg,RC=1+Pg,Og=.01,kC=0-Og,PC=0+Og;function gr(r){return r.max-r.min}function OC(r,o,a){return Math.abs(r-o)<=a}function cp(r,o,a,f=.5){r.origin=f,r.originPoint=pn(o.min,o.max,r.origin),r.scale=gr(a)/gr(o),r.translate=pn(a.min,a.max,r.origin)-r.originPoint,(r.scale>=_C&&r.scale<=RC||isNaN(r.scale))&&(r.scale=1),(r.translate>=kC&&r.translate<=PC||isNaN(r.translate))&&(r.translate=0)}function Da(r,o,a,f){cp(r.x,o.x,a.x,f?f.originX:void 0),cp(r.y,o.y,a.y,f?f.originY:void 0)}function up(r,o,a){r.min=a.min+o.min,r.max=r.min+gr(o)}function MC(r,o,a){up(r.x,o.x,a.x),up(r.y,o.y,a.y)}function dp(r,o,a){r.min=o.min-a.min,r.max=r.min+gr(o)}function La(r,o,a){dp(r.x,o.x,a.x),dp(r.y,o.y,a.y)}function Yr(r){return[r("x"),r("y")]}const Mg=({current:r})=>r?r.ownerDocument.defaultView:null,fp=(r,o)=>Math.abs(r-o);function DC(r,o){const a=fp(r.x,o.x),f=fp(r.y,o.y);return Math.sqrt(a**2+f**2)}class Dg{constructor(o,a,{transformPagePoint:f,contextWindow:p=window,dragSnapToOrigin:y=!1,distanceThreshold:w=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const R=Id(this.lastMoveEventInfo,this.history),M=this.startEvent!==null,L=DC(R.offset,{x:0,y:0})>=this.distanceThreshold;if(!M&&!L)return;const{point:B}=R,{timestamp:j}=tr;this.history.push({...B,timestamp:j});const{onStart:U,onMove:W}=this.handlers;M||(U&&U(this.lastMoveEvent,R),this.startEvent=this.lastMoveEvent),W&&W(this.lastMoveEvent,R)},this.handlePointerMove=(R,M)=>{this.lastMoveEvent=R,this.lastMoveEventInfo=Td(M,this.transformPagePoint),un.update(this.updatePoint,!0)},this.handlePointerUp=(R,M)=>{this.end();const{onEnd:L,onSessionEnd:B,resumeAnimation:j}=this.handlers;if(this.dragSnapToOrigin&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const U=Id(R.type==="pointercancel"?this.lastMoveEventInfo:Td(M,this.transformPagePoint),this.history);this.startEvent&&L&&L(R,U),B&&B(R,U)},!Yf(o))return;this.dragSnapToOrigin=y,this.handlers=a,this.transformPagePoint=f,this.distanceThreshold=w,this.contextWindow=p||window;const S=qa(o),v=Td(S,this.transformPagePoint),{point:E}=v,{timestamp:A}=tr;this.history=[{...E,timestamp:A}];const{onSessionStart:N}=a;N&&N(o,Id(v,this.history)),this.removeListeners=Za(Ma(this.contextWindow,"pointermove",this.handlePointerMove),Ma(this.contextWindow,"pointerup",this.handlePointerUp),Ma(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(o){this.handlers=o}end(){this.removeListeners&&this.removeListeners(),ys(this.updatePoint)}}function Td(r,o){return o?{point:o(r.point)}:r}function hp(r,o){return{x:r.x-o.x,y:r.y-o.y}}function Id({point:r},o){return{point:r,delta:hp(r,Lg(o)),offset:hp(r,LC(o)),velocity:BC(o,.1)}}function LC(r){return r[0]}function Lg(r){return r[r.length-1]}function BC(r,o){if(r.length<2)return{x:0,y:0};let a=r.length-1,f=null;const p=Lg(r);for(;a>=0&&(f=r[a],!(p.timestamp-f.timestamp>gi(o)));)a--;if(!f)return{x:0,y:0};const y=xi(p.timestamp-f.timestamp);if(y===0)return{x:0,y:0};const w={x:(p.x-f.x)/y,y:(p.y-f.y)/y};return w.x===1/0&&(w.x=0),w.y===1/0&&(w.y=0),w}function jC(r,{min:o,max:a},f){return o!==void 0&&r<o?r=f?pn(o,r,f.min):Math.max(r,o):a!==void 0&&r>a&&(r=f?pn(a,r,f.max):Math.min(r,a)),r}function pp(r,o,a){return{min:o!==void 0?r.min+o:void 0,max:a!==void 0?r.max+a-(r.max-r.min):void 0}}function FC(r,{top:o,left:a,bottom:f,right:p}){return{x:pp(r.x,a,p),y:pp(r.y,o,f)}}function mp(r,o){let a=o.min-r.min,f=o.max-r.max;return o.max-o.min<r.max-r.min&&([a,f]=[f,a]),{min:a,max:f}}function VC(r,o){return{x:mp(r.x,o.x),y:mp(r.y,o.y)}}function UC(r,o){let a=.5;const f=gr(r),p=gr(o);return p>f?a=Fa(o.min,o.max-f,r.min):f>p&&(a=Fa(r.min,r.max-p,o.min)),Vi(0,1,a)}function zC(r,o){const a={};return o.min!==void 0&&(a.min=o.min-r.min),o.max!==void 0&&(a.max=o.max-r.min),a}const of=.35;function WC(r=of){return r===!1?r=0:r===!0&&(r=of),{x:gp(r,"left","right"),y:gp(r,"top","bottom")}}function gp(r,o,a){return{min:xp(r,o),max:xp(r,a)}}function xp(r,o){return typeof r=="number"?r:r[o]||0}const HC=new WeakMap;class GC{constructor(o){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Tn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=o}start(o,{snapToCursor:a=!1,distanceThreshold:f}={}){const{presenceContext:p}=this.visualElement;if(p&&p.isPresent===!1)return;const y=N=>{const{dragSnapToOrigin:R}=this.getProps();R?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(qa(N).point)},w=(N,R)=>{const{drag:M,dragPropagation:L,onDragStart:B}=this.getProps();if(M&&!L&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Jv(M),!this.openDragLock))return;this.latestPointerEvent=N,this.latestPanInfo=R,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Yr(U=>{let W=this.getAxisMotionValue(U).get()||0;if(yi.test(W)){const{projection:F}=this.visualElement;if(F&&F.layout){const q=F.layout.layoutBox[U];q&&(W=gr(q)*(parseFloat(W)/100))}}this.originPoint[U]=W}),B&&un.postRender(()=>B(N,R)),rf(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},S=(N,R)=>{this.latestPointerEvent=N,this.latestPanInfo=R;const{dragPropagation:M,dragDirectionLock:L,onDirectionLock:B,onDrag:j}=this.getProps();if(!M&&!this.openDragLock)return;const{offset:U}=R;if(L&&this.currentDirection===null){this.currentDirection=XC(U),this.currentDirection!==null&&B&&B(this.currentDirection);return}this.updateAxis("x",R.point,U),this.updateAxis("y",R.point,U),this.visualElement.render(),j&&j(N,R)},v=(N,R)=>{this.latestPointerEvent=N,this.latestPanInfo=R,this.stop(N,R),this.latestPointerEvent=null,this.latestPanInfo=null},E=()=>Yr(N=>{var R;return this.getAnimationState(N)==="paused"&&((R=this.getAxisMotionValue(N).animation)==null?void 0:R.play())}),{dragSnapToOrigin:A}=this.getProps();this.panSession=new Dg(o,{onSessionStart:y,onStart:w,onMove:S,onSessionEnd:v,resumeAnimation:E},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:A,distanceThreshold:f,contextWindow:Mg(this.visualElement)})}stop(o,a){const f=o||this.latestPointerEvent,p=a||this.latestPanInfo,y=this.isDragging;if(this.cancel(),!y||!p||!f)return;const{velocity:w}=p;this.startAnimation(w);const{onDragEnd:S}=this.getProps();S&&un.postRender(()=>S(f,p))}cancel(){this.isDragging=!1;const{projection:o,animationState:a}=this.visualElement;o&&(o.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:f}=this.getProps();!f&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(o,a,f){const{drag:p}=this.getProps();if(!f||!ac(o,p,this.currentDirection))return;const y=this.getAxisMotionValue(o);let w=this.originPoint[o]+f[o];this.constraints&&this.constraints[o]&&(w=jC(w,this.constraints[o],this.elastic[o])),y.set(w)}resolveConstraints(){var y;const{dragConstraints:o,dragElastic:a}=this.getProps(),f=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(y=this.visualElement.projection)==null?void 0:y.layout,p=this.constraints;o&&Ro(o)?this.constraints||(this.constraints=this.resolveRefConstraints()):o&&f?this.constraints=FC(f.layoutBox,o):this.constraints=!1,this.elastic=WC(a),p!==this.constraints&&f&&this.constraints&&!this.hasMutatedConstraints&&Yr(w=>{this.constraints!==!1&&this.getAxisMotionValue(w)&&(this.constraints[w]=zC(f.layoutBox[w],this.constraints[w]))})}resolveRefConstraints(){const{dragConstraints:o,onMeasureDragConstraints:a}=this.getProps();if(!o||!Ro(o))return!1;const f=o.current,{projection:p}=this.visualElement;if(!p||!p.layout)return!1;const y=Y3(f,p.root,this.visualElement.getTransformPagePoint());let w=VC(p.layout.layoutBox,y);if(a){const S=a(H3(w));this.hasMutatedConstraints=!!S,S&&(w=wg(S))}return w}startAnimation(o){const{drag:a,dragMomentum:f,dragElastic:p,dragTransition:y,dragSnapToOrigin:w,onDragTransitionEnd:S}=this.getProps(),v=this.constraints||{},E=Yr(A=>{if(!ac(A,a,this.currentDirection))return;let N=v&&v[A]||{};w&&(N={min:0,max:0});const R=p?200:1e6,M=p?40:1e7,L={type:"inertia",velocity:f?o[A]:0,bounceStiffness:R,bounceDamping:M,timeConstant:750,restDelta:1,restSpeed:10,...y,...N};return this.startAxisValueAnimation(A,L)});return Promise.all(E).then(S)}startAxisValueAnimation(o,a){const f=this.getAxisMotionValue(o);return rf(this.visualElement,o),f.start(rh(o,f,0,a,this.visualElement,!1))}stopAnimation(){Yr(o=>this.getAxisMotionValue(o).stop())}pauseAnimation(){Yr(o=>{var a;return(a=this.getAxisMotionValue(o).animation)==null?void 0:a.pause()})}getAnimationState(o){var a;return(a=this.getAxisMotionValue(o).animation)==null?void 0:a.state}getAxisMotionValue(o){const a=`_drag${o.toUpperCase()}`,f=this.visualElement.getProps(),p=f[a];return p||this.visualElement.getValue(o,(f.initial?f.initial[o]:void 0)||0)}snapToCursor(o){Yr(a=>{const{drag:f}=this.getProps();if(!ac(a,f,this.currentDirection))return;const{projection:p}=this.visualElement,y=this.getAxisMotionValue(a);if(p&&p.layout){const{min:w,max:S}=p.layout.layoutBox[a];y.set(o[a]-pn(w,S,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:o,dragConstraints:a}=this.getProps(),{projection:f}=this.visualElement;if(!Ro(a)||!f||!this.constraints)return;this.stopAnimation();const p={x:0,y:0};Yr(w=>{const S=this.getAxisMotionValue(w);if(S&&this.constraints!==!1){const v=S.get();p[w]=UC({min:v,max:v},this.constraints[w])}});const{transformTemplate:y}=this.visualElement.getProps();this.visualElement.current.style.transform=y?y({},""):"none",f.root&&f.root.updateScroll(),f.updateLayout(),this.resolveConstraints(),Yr(w=>{if(!ac(w,o,null))return;const S=this.getAxisMotionValue(w),{min:v,max:E}=this.constraints[w];S.set(pn(v,E,p[w]))})}addListeners(){if(!this.visualElement.current)return;HC.set(this.visualElement,this);const o=this.visualElement.current,a=Ma(o,"pointerdown",v=>{const{drag:E,dragListener:A=!0}=this.getProps();E&&A&&this.start(v)}),f=()=>{const{dragConstraints:v}=this.getProps();Ro(v)&&v.current&&(this.constraints=this.resolveRefConstraints())},{projection:p}=this.visualElement,y=p.addEventListener("measure",f);p&&!p.layout&&(p.root&&p.root.updateScroll(),p.updateLayout()),un.read(f);const w=Ha(window,"resize",()=>this.scalePositionWithinConstraints()),S=p.addEventListener("didUpdate",({delta:v,hasLayoutChanged:E})=>{this.isDragging&&E&&(Yr(A=>{const N=this.getAxisMotionValue(A);N&&(this.originPoint[A]+=v[A].translate,N.set(N.get()+v[A].translate))}),this.visualElement.render())});return()=>{w(),a(),y(),S&&S()}}getProps(){const o=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:f=!1,dragPropagation:p=!1,dragConstraints:y=!1,dragElastic:w=of,dragMomentum:S=!0}=o;return{...o,drag:a,dragDirectionLock:f,dragPropagation:p,dragConstraints:y,dragElastic:w,dragMomentum:S}}}function ac(r,o,a){return(o===!0||o===r)&&(a===null||a===r)}function XC(r,o=10){let a=null;return Math.abs(r.y)>o?a="y":Math.abs(r.x)>o&&(a="x"),a}class YC extends vs{constructor(o){super(o),this.removeGroupControls=Zr,this.removeListeners=Zr,this.controls=new GC(o)}mount(){const{dragControls:o}=this.node.getProps();o&&(this.removeGroupControls=o.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Zr}unmount(){this.removeGroupControls(),this.removeListeners()}}const yp=r=>(o,a)=>{r&&un.postRender(()=>r(o,a))};class ZC extends vs{constructor(){super(...arguments),this.removePointerDownListener=Zr}onPointerDown(o){this.session=new Dg(o,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Mg(this.node)})}createPanHandlers(){const{onPanSessionStart:o,onPanStart:a,onPan:f,onPanEnd:p}=this.node.getProps();return{onSessionStart:yp(o),onStart:yp(a),onMove:f,onEnd:(y,w)=>{delete this.session,p&&un.postRender(()=>p(y,w))}}}mount(){this.removePointerDownListener=Ma(this.node.current,"pointerdown",o=>this.onPointerDown(o))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const gc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function wp(r,o){return o.max===o.min?0:r/(o.max-o.min)*100}const _a={correct:(r,o)=>{if(!o.target)return r;if(typeof r=="string")if(yt.test(r))r=parseFloat(r);else return r;const a=wp(r,o.target.x),f=wp(r,o.target.y);return`${a}% ${f}%`}},KC={correct:(r,{treeScale:o,projectionDelta:a})=>{const f=r,p=ws.parse(r);if(p.length>5)return f;const y=ws.createTransformer(r),w=typeof p[0]!="number"?1:0,S=a.x.scale*o.x,v=a.y.scale*o.y;p[0+w]/=S,p[1+w]/=v;const E=pn(S,v,.5);return typeof p[2+w]=="number"&&(p[2+w]/=E),typeof p[3+w]=="number"&&(p[3+w]/=E),y(p)}};let Nd=!1;class $C extends I.Component{componentDidMount(){const{visualElement:o,layoutGroup:a,switchLayoutGroup:f,layoutId:p}=this.props,{projection:y}=o;y3(qC),y&&(a.group&&a.group.add(y),f&&f.register&&p&&f.register(y),Nd&&y.root.didUpdate(),y.addEventListener("animationComplete",()=>{this.safeToRemove()}),y.setOptions({...y.options,onExitComplete:()=>this.safeToRemove()})),gc.hasEverUpdated=!0}getSnapshotBeforeUpdate(o){const{layoutDependency:a,visualElement:f,drag:p,isPresent:y}=this.props,{projection:w}=f;return w&&(w.isPresent=y,Nd=!0,p||o.layoutDependency!==a||a===void 0||o.isPresent!==y?w.willUpdate():this.safeToRemove(),o.isPresent!==y&&(y?w.promote():w.relegate()||un.postRender(()=>{const S=w.getStack();(!S||!S.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:o}=this.props.visualElement;o&&(o.root.didUpdate(),Xf.postRender(()=>{!o.currentAnimation&&o.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:o,layoutGroup:a,switchLayoutGroup:f}=this.props,{projection:p}=o;Nd=!0,p&&(p.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(p),f&&f.deregister&&f.deregister(p))}safeToRemove(){const{safeToRemove:o}=this.props;o&&o()}render(){return null}}function Bg(r){const[o,a]=sg(),f=I.useContext(Sf);return x.jsx($C,{...r,layoutGroup:f,switchLayoutGroup:I.useContext(xg),isPresent:o,safeToRemove:a})}const qC={borderRadius:{..._a,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:_a,borderTopRightRadius:_a,borderBottomLeftRadius:_a,borderBottomRightRadius:_a,boxShadow:KC};function QC(r,o,a){const f=dr(r)?r:Bo(r);return f.start(rh("",f,o,a)),f.animation}const JC=(r,o)=>r.depth-o.depth;class eE{constructor(){this.children=[],this.isDirty=!1}add(o){If(this.children,o),this.isDirty=!0}remove(o){Nf(this.children,o),this.isDirty=!0}forEach(o){this.isDirty&&this.children.sort(JC),this.isDirty=!1,this.children.forEach(o)}}function tE(r,o){const a=Ir.now(),f=({timestamp:p})=>{const y=p-a;y>=o&&(ys(f),r(y-o))};return un.setup(f,!0),()=>ys(f)}const jg=["TopLeft","TopRight","BottomLeft","BottomRight"],nE=jg.length,vp=r=>typeof r=="string"?parseFloat(r):r,Cp=r=>typeof r=="number"||yt.test(r);function rE(r,o,a,f,p,y){p?(r.opacity=pn(0,a.opacity??1,iE(f)),r.opacityExit=pn(o.opacity??1,0,sE(f))):y&&(r.opacity=pn(o.opacity??1,a.opacity??1,f));for(let w=0;w<nE;w++){const S=`border${jg[w]}Radius`;let v=Ep(o,S),E=Ep(a,S);if(v===void 0&&E===void 0)continue;v||(v=0),E||(E=0),v===0||E===0||Cp(v)===Cp(E)?(r[S]=Math.max(pn(vp(v),vp(E),f),0),(yi.test(E)||yi.test(v))&&(r[S]+="%")):r[S]=E}(o.rotate||a.rotate)&&(r.rotate=pn(o.rotate||0,a.rotate||0,f))}function Ep(r,o){return r[o]!==void 0?r[o]:r.borderRadius}const iE=Fg(0,.5,Am),sE=Fg(.5,.95,Zr);function Fg(r,o,a){return f=>f<r?0:f>o?1:a(Fa(r,o,f))}function bp(r,o){r.min=o.min,r.max=o.max}function Xr(r,o){bp(r.x,o.x),bp(r.y,o.y)}function Sp(r,o){r.translate=o.translate,r.scale=o.scale,r.originPoint=o.originPoint,r.origin=o.origin}function Ap(r,o,a,f,p){return r-=o,r=Ac(r,1/a,f),p!==void 0&&(r=Ac(r,1/p,f)),r}function oE(r,o=0,a=1,f=.5,p,y=r,w=r){if(yi.test(o)&&(o=parseFloat(o),o=pn(w.min,w.max,o/100)-w.min),typeof o!="number")return;let S=pn(y.min,y.max,f);r===y&&(S-=o),r.min=Ap(r.min,o,a,S,p),r.max=Ap(r.max,o,a,S,p)}function Tp(r,o,[a,f,p],y,w){oE(r,o[a],o[f],o[p],o.scale,y,w)}const aE=["x","scaleX","originX"],lE=["y","scaleY","originY"];function Ip(r,o,a,f){Tp(r.x,o,aE,a?a.x:void 0,f?f.x:void 0),Tp(r.y,o,lE,a?a.y:void 0,f?f.y:void 0)}function Np(r){return r.translate===0&&r.scale===1}function Vg(r){return Np(r.x)&&Np(r.y)}function _p(r,o){return r.min===o.min&&r.max===o.max}function cE(r,o){return _p(r.x,o.x)&&_p(r.y,o.y)}function Rp(r,o){return Math.round(r.min)===Math.round(o.min)&&Math.round(r.max)===Math.round(o.max)}function Ug(r,o){return Rp(r.x,o.x)&&Rp(r.y,o.y)}function kp(r){return gr(r.x)/gr(r.y)}function Pp(r,o){return r.translate===o.translate&&r.scale===o.scale&&r.originPoint===o.originPoint}class uE{constructor(){this.members=[]}add(o){If(this.members,o),o.scheduleRender()}remove(o){if(Nf(this.members,o),o===this.prevLead&&(this.prevLead=void 0),o===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(o){const a=this.members.findIndex(p=>o===p);if(a===0)return!1;let f;for(let p=a;p>=0;p--){const y=this.members[p];if(y.isPresent!==!1){f=y;break}}return f?(this.promote(f),!0):!1}promote(o,a){const f=this.lead;if(o!==f&&(this.prevLead=f,this.lead=o,o.show(),f)){f.instance&&f.scheduleRender(),o.scheduleRender(),o.resumeFrom=f,a&&(o.resumeFrom.preserveOpacity=!0),f.snapshot&&(o.snapshot=f.snapshot,o.snapshot.latestValues=f.animationValues||f.latestValues),o.root&&o.root.isUpdating&&(o.isLayoutDirty=!0);const{crossfade:p}=o.options;p===!1&&f.hide()}}exitAnimationComplete(){this.members.forEach(o=>{const{options:a,resumingFrom:f}=o;a.onExitComplete&&a.onExitComplete(),f&&f.options.onExitComplete&&f.options.onExitComplete()})}scheduleRender(){this.members.forEach(o=>{o.instance&&o.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function dE(r,o,a){let f="";const p=r.x.translate/o.x,y=r.y.translate/o.y,w=(a==null?void 0:a.z)||0;if((p||y||w)&&(f=`translate3d(${p}px, ${y}px, ${w}px) `),(o.x!==1||o.y!==1)&&(f+=`scale(${1/o.x}, ${1/o.y}) `),a){const{transformPerspective:E,rotate:A,rotateX:N,rotateY:R,skewX:M,skewY:L}=a;E&&(f=`perspective(${E}px) ${f}`),A&&(f+=`rotate(${A}deg) `),N&&(f+=`rotateX(${N}deg) `),R&&(f+=`rotateY(${R}deg) `),M&&(f+=`skewX(${M}deg) `),L&&(f+=`skewY(${L}deg) `)}const S=r.x.scale*o.x,v=r.y.scale*o.y;return(S!==1||v!==1)&&(f+=`scale(${S}, ${v})`),f||"none"}const _d=["","X","Y","Z"],fE=1e3;let hE=0;function Rd(r,o,a,f){const{latestValues:p}=o;p[r]&&(a[r]=p[r],o.setStaticValue(r,0),f&&(f[r]=0))}function zg(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:o}=r.options;if(!o)return;const a=Ig(o);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:p,layoutId:y}=r.options;window.MotionCancelOptimisedAnimation(a,"transform",un,!(p||y))}const{parent:f}=r;f&&!f.hasCheckedOptimisedAppear&&zg(f)}function Wg({attachResizeListener:r,defaultParent:o,measureScroll:a,checkIsScrollRoot:f,resetTransform:p}){return class{constructor(w={},S=o==null?void 0:o()){this.id=hE++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(gE),this.nodes.forEach(vE),this.nodes.forEach(CE),this.nodes.forEach(xE)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=w,this.root=S?S.root||S:this,this.path=S?[...S.path,S]:[],this.parent=S,this.depth=S?S.depth+1:0;for(let v=0;v<this.path.length;v++)this.path[v].shouldResetTransform=!0;this.root===this&&(this.nodes=new eE)}addEventListener(w,S){return this.eventHandlers.has(w)||this.eventHandlers.set(w,new kf),this.eventHandlers.get(w).add(S)}notifyListeners(w,...S){const v=this.eventHandlers.get(w);v&&v.notify(...S)}hasListeners(w){return this.eventHandlers.has(w)}mount(w){if(this.instance)return;this.isSVG=ig(w)&&!s3(w),this.instance=w;const{layoutId:S,layout:v,visualElement:E}=this.options;if(E&&!E.current&&E.mount(w),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(v||S)&&(this.isLayoutDirty=!0),r){let A,N=0;const R=()=>this.root.updateBlockedByResize=!1;un.read(()=>{N=window.innerWidth}),r(w,()=>{const M=window.innerWidth;M!==N&&(N=M,this.root.updateBlockedByResize=!0,A&&A(),A=tE(R,250),gc.hasAnimatedSinceResize&&(gc.hasAnimatedSinceResize=!1,this.nodes.forEach(Dp)))})}S&&this.root.registerSharedNode(S,this),this.options.animate!==!1&&E&&(S||v)&&this.addEventListener("didUpdate",({delta:A,hasLayoutChanged:N,hasRelativeLayoutChanged:R,layout:M})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const L=this.options.transition||E.getDefaultTransition()||TE,{onLayoutAnimationStart:B,onLayoutAnimationComplete:j}=E.getProps(),U=!this.targetLayout||!Ug(this.targetLayout,M),W=!N&&R;if(this.options.layoutRoot||this.resumeFrom||W||N&&(U||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const F={...Hf(L,"layout"),onPlay:B,onComplete:j};(E.shouldReduceMotion||this.options.layoutRoot)&&(F.delay=0,F.type=!1),this.startAnimation(F),this.setAnimationOrigin(A,W)}else N||Dp(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=M})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const w=this.getStack();w&&w.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ys(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(EE),this.animationId++)}getTransformTemplate(){const{visualElement:w}=this.options;return w&&w.getProps().transformTemplate}willUpdate(w=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&zg(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let A=0;A<this.path.length;A++){const N=this.path[A];N.shouldResetTransform=!0,N.updateScroll("snapshot"),N.options.layoutRoot&&N.willUpdate(!1)}const{layoutId:S,layout:v}=this.options;if(S===void 0&&!v)return;const E=this.getTransformTemplate();this.prevTransformTemplateValue=E?E(this.latestValues,""):void 0,this.updateSnapshot(),w&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Op);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Mp);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(wE),this.nodes.forEach(pE),this.nodes.forEach(mE)):this.nodes.forEach(Mp),this.clearAllSnapshots();const S=Ir.now();tr.delta=Vi(0,1e3/60,S-tr.timestamp),tr.timestamp=S,tr.isProcessing=!0,yd.update.process(tr),yd.preRender.process(tr),yd.render.process(tr),tr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Xf.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(yE),this.sharedNodes.forEach(bE)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,un.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){un.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!gr(this.snapshot.measuredBox.x)&&!gr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let v=0;v<this.path.length;v++)this.path[v].updateScroll();const w=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Tn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:S}=this.options;S&&S.notify("LayoutMeasure",this.layout.layoutBox,w?w.layoutBox:void 0)}updateScroll(w="measure"){let S=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===w&&(S=!1),S&&this.instance){const v=f(this.instance);this.scroll={animationId:this.root.animationId,phase:w,isRoot:v,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:v}}}resetTransform(){if(!p)return;const w=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,S=this.projectionDelta&&!Vg(this.projectionDelta),v=this.getTransformTemplate(),E=v?v(this.latestValues,""):void 0,A=E!==this.prevTransformTemplateValue;w&&this.instance&&(S||Ks(this.latestValues)||A)&&(p(this.instance,E),this.shouldResetTransform=!1,this.scheduleRender())}measure(w=!0){const S=this.measurePageBox();let v=this.removeElementScroll(S);return w&&(v=this.removeTransform(v)),IE(v),{animationId:this.root.animationId,measuredBox:S,layoutBox:v,latestValues:{},source:this.id}}measurePageBox(){var E;const{visualElement:w}=this.options;if(!w)return Tn();const S=w.measureViewportBox();if(!(((E=this.scroll)==null?void 0:E.wasRoot)||this.path.some(NE))){const{scroll:A}=this.root;A&&(ko(S.x,A.offset.x),ko(S.y,A.offset.y))}return S}removeElementScroll(w){var v;const S=Tn();if(Xr(S,w),(v=this.scroll)!=null&&v.wasRoot)return S;for(let E=0;E<this.path.length;E++){const A=this.path[E],{scroll:N,options:R}=A;A!==this.root&&N&&R.layoutScroll&&(N.wasRoot&&Xr(S,w),ko(S.x,N.offset.x),ko(S.y,N.offset.y))}return S}applyTransform(w,S=!1){const v=Tn();Xr(v,w);for(let E=0;E<this.path.length;E++){const A=this.path[E];!S&&A.options.layoutScroll&&A.scroll&&A!==A.root&&Po(v,{x:-A.scroll.offset.x,y:-A.scroll.offset.y}),Ks(A.latestValues)&&Po(v,A.latestValues)}return Ks(this.latestValues)&&Po(v,this.latestValues),v}removeTransform(w){const S=Tn();Xr(S,w);for(let v=0;v<this.path.length;v++){const E=this.path[v];if(!E.instance||!Ks(E.latestValues))continue;Jd(E.latestValues)&&E.updateSnapshot();const A=Tn(),N=E.measurePageBox();Xr(A,N),Ip(S,E.latestValues,E.snapshot?E.snapshot.layoutBox:void 0,A)}return Ks(this.latestValues)&&Ip(S,this.latestValues),S}setTargetDelta(w){this.targetDelta=w,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(w){this.options={...this.options,...w,crossfade:w.crossfade!==void 0?w.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==tr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(w=!1){var R;const S=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=S.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=S.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=S.isSharedProjectionDirty);const v=!!this.resumingFrom||this!==S;if(!(w||v&&this.isSharedProjectionDirty||this.isProjectionDirty||(R=this.parent)!=null&&R.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:A,layoutId:N}=this.options;if(!(!this.layout||!(A||N))){if(this.resolvedRelativeTargetAt=tr.timestamp,!this.targetDelta&&!this.relativeTarget){const M=this.getClosestProjectingParent();M&&M.layout&&this.animationProgress!==1?(this.relativeParent=M,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tn(),this.relativeTargetOrigin=Tn(),La(this.relativeTargetOrigin,this.layout.layoutBox,M.layout.layoutBox),Xr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Tn(),this.targetWithTransforms=Tn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),MC(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Xr(this.target,this.layout.layoutBox),Cg(this.target,this.targetDelta)):Xr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const M=this.getClosestProjectingParent();M&&!!M.resumingFrom==!!this.resumingFrom&&!M.options.layoutScroll&&M.target&&this.animationProgress!==1?(this.relativeParent=M,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tn(),this.relativeTargetOrigin=Tn(),La(this.relativeTargetOrigin,this.target,M.target),Xr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Jd(this.parent.latestValues)||vg(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var L;const w=this.getLead(),S=!!this.resumingFrom||this!==w;let v=!0;if((this.isProjectionDirty||(L=this.parent)!=null&&L.isProjectionDirty)&&(v=!1),S&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(v=!1),this.resolvedRelativeTargetAt===tr.timestamp&&(v=!1),v)return;const{layout:E,layoutId:A}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(E||A))return;Xr(this.layoutCorrected,this.layout.layoutBox);const N=this.treeScale.x,R=this.treeScale.y;X3(this.layoutCorrected,this.treeScale,this.path,S),w.layout&&!w.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(w.target=w.layout.layoutBox,w.targetWithTransforms=Tn());const{target:M}=w;if(!M){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Sp(this.prevProjectionDelta.x,this.projectionDelta.x),Sp(this.prevProjectionDelta.y,this.projectionDelta.y)),Da(this.projectionDelta,this.layoutCorrected,M,this.latestValues),(this.treeScale.x!==N||this.treeScale.y!==R||!Pp(this.projectionDelta.x,this.prevProjectionDelta.x)||!Pp(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",M))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(w=!0){var S;if((S=this.options.visualElement)==null||S.scheduleRender(),w){const v=this.getStack();v&&v.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Oo(),this.projectionDelta=Oo(),this.projectionDeltaWithTransform=Oo()}setAnimationOrigin(w,S=!1){const v=this.snapshot,E=v?v.latestValues:{},A={...this.latestValues},N=Oo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!S;const R=Tn(),M=v?v.source:void 0,L=this.layout?this.layout.source:void 0,B=M!==L,j=this.getStack(),U=!j||j.members.length<=1,W=!!(B&&!U&&this.options.crossfade===!0&&!this.path.some(AE));this.animationProgress=0;let F;this.mixTargetDelta=q=>{const ee=q/1e3;Lp(N.x,w.x,ee),Lp(N.y,w.y,ee),this.setTargetDelta(N),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(La(R,this.layout.layoutBox,this.relativeParent.layout.layoutBox),SE(this.relativeTarget,this.relativeTargetOrigin,R,ee),F&&cE(this.relativeTarget,F)&&(this.isProjectionDirty=!1),F||(F=Tn()),Xr(F,this.relativeTarget)),B&&(this.animationValues=A,rE(A,E,this.latestValues,ee,W,U)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ee},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(w){var S,v,E;this.notifyListeners("animationStart"),(S=this.currentAnimation)==null||S.stop(),(E=(v=this.resumingFrom)==null?void 0:v.currentAnimation)==null||E.stop(),this.pendingAnimation&&(ys(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=un.update(()=>{gc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Bo(0)),this.currentAnimation=QC(this.motionValue,[0,1e3],{...w,velocity:0,isSync:!0,onUpdate:A=>{this.mixTargetDelta(A),w.onUpdate&&w.onUpdate(A)},onStop:()=>{},onComplete:()=>{w.onComplete&&w.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const w=this.getStack();w&&w.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(fE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const w=this.getLead();let{targetWithTransforms:S,target:v,layout:E,latestValues:A}=w;if(!(!S||!v||!E)){if(this!==w&&this.layout&&E&&Hg(this.options.animationType,this.layout.layoutBox,E.layoutBox)){v=this.target||Tn();const N=gr(this.layout.layoutBox.x);v.x.min=w.target.x.min,v.x.max=v.x.min+N;const R=gr(this.layout.layoutBox.y);v.y.min=w.target.y.min,v.y.max=v.y.min+R}Xr(S,v),Po(S,A),Da(this.projectionDeltaWithTransform,this.layoutCorrected,S,A)}}registerSharedNode(w,S){this.sharedNodes.has(w)||this.sharedNodes.set(w,new uE),this.sharedNodes.get(w).add(S);const E=S.options.initialPromotionConfig;S.promote({transition:E?E.transition:void 0,preserveFollowOpacity:E&&E.shouldPreserveFollowOpacity?E.shouldPreserveFollowOpacity(S):void 0})}isLead(){const w=this.getStack();return w?w.lead===this:!0}getLead(){var S;const{layoutId:w}=this.options;return w?((S=this.getStack())==null?void 0:S.lead)||this:this}getPrevLead(){var S;const{layoutId:w}=this.options;return w?(S=this.getStack())==null?void 0:S.prevLead:void 0}getStack(){const{layoutId:w}=this.options;if(w)return this.root.sharedNodes.get(w)}promote({needsReset:w,transition:S,preserveFollowOpacity:v}={}){const E=this.getStack();E&&E.promote(this,v),w&&(this.projectionDelta=void 0,this.needsReset=!0),S&&this.setOptions({transition:S})}relegate(){const w=this.getStack();return w?w.relegate(this):!1}resetSkewAndRotation(){const{visualElement:w}=this.options;if(!w)return;let S=!1;const{latestValues:v}=w;if((v.z||v.rotate||v.rotateX||v.rotateY||v.rotateZ||v.skewX||v.skewY)&&(S=!0),!S)return;const E={};v.z&&Rd("z",w,E,this.animationValues);for(let A=0;A<_d.length;A++)Rd(`rotate${_d[A]}`,w,E,this.animationValues),Rd(`skew${_d[A]}`,w,E,this.animationValues);w.render();for(const A in E)w.setStaticValue(A,E[A]),this.animationValues&&(this.animationValues[A]=E[A]);w.scheduleRender()}applyProjectionStyles(w,S){if(!this.instance||this.isSVG)return;if(!this.isVisible){w.visibility="hidden";return}const v=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,w.visibility="",w.opacity="",w.pointerEvents=mc(S==null?void 0:S.pointerEvents)||"",w.transform=v?v(this.latestValues,""):"none";return}const E=this.getLead();if(!this.projectionDelta||!this.layout||!E.target){this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=mc(S==null?void 0:S.pointerEvents)||""),this.hasProjected&&!Ks(this.latestValues)&&(w.transform=v?v({},""):"none",this.hasProjected=!1);return}w.visibility="";const A=E.animationValues||E.latestValues;this.applyTransformsToTarget();let N=dE(this.projectionDeltaWithTransform,this.treeScale,A);v&&(N=v(A,N)),w.transform=N;const{x:R,y:M}=this.projectionDelta;w.transformOrigin=`${R.origin*100}% ${M.origin*100}% 0`,E.animationValues?w.opacity=E===this?A.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:A.opacityExit:w.opacity=E===this?A.opacity!==void 0?A.opacity:"":A.opacityExit!==void 0?A.opacityExit:0;for(const L in Wa){if(A[L]===void 0)continue;const{correct:B,applyTo:j,isCSSVariable:U}=Wa[L],W=N==="none"?A[L]:B(A[L],E);if(j){const F=j.length;for(let q=0;q<F;q++)w[j[q]]=W}else U?this.options.visualElement.renderState.vars[L]=W:w[L]=W}this.options.layoutId&&(w.pointerEvents=E===this?mc(S==null?void 0:S.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(w=>{var S;return(S=w.currentAnimation)==null?void 0:S.stop()}),this.root.nodes.forEach(Op),this.root.sharedNodes.clear()}}}function pE(r){r.updateLayout()}function mE(r){var a;const o=((a=r.resumeFrom)==null?void 0:a.snapshot)||r.snapshot;if(r.isLead()&&r.layout&&o&&r.hasListeners("didUpdate")){const{layoutBox:f,measuredBox:p}=r.layout,{animationType:y}=r.options,w=o.source!==r.layout.source;y==="size"?Yr(N=>{const R=w?o.measuredBox[N]:o.layoutBox[N],M=gr(R);R.min=f[N].min,R.max=R.min+M}):Hg(y,o.layoutBox,f)&&Yr(N=>{const R=w?o.measuredBox[N]:o.layoutBox[N],M=gr(f[N]);R.max=R.min+M,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[N].max=r.relativeTarget[N].min+M)});const S=Oo();Da(S,f,o.layoutBox);const v=Oo();w?Da(v,r.applyTransform(p,!0),o.measuredBox):Da(v,f,o.layoutBox);const E=!Vg(S);let A=!1;if(!r.resumeFrom){const N=r.getClosestProjectingParent();if(N&&!N.resumeFrom){const{snapshot:R,layout:M}=N;if(R&&M){const L=Tn();La(L,o.layoutBox,R.layoutBox);const B=Tn();La(B,f,M.layoutBox),Ug(L,B)||(A=!0),N.options.layoutRoot&&(r.relativeTarget=B,r.relativeTargetOrigin=L,r.relativeParent=N)}}}r.notifyListeners("didUpdate",{layout:f,snapshot:o,delta:v,layoutDelta:S,hasLayoutChanged:E,hasRelativeLayoutChanged:A})}else if(r.isLead()){const{onExitComplete:f}=r.options;f&&f()}r.options.transition=void 0}function gE(r){r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function xE(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function yE(r){r.clearSnapshot()}function Op(r){r.clearMeasurements()}function Mp(r){r.isLayoutDirty=!1}function wE(r){const{visualElement:o}=r.options;o&&o.getProps().onBeforeLayoutMeasure&&o.notify("BeforeLayoutMeasure"),r.resetTransform()}function Dp(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function vE(r){r.resolveTargetDelta()}function CE(r){r.calcProjection()}function EE(r){r.resetSkewAndRotation()}function bE(r){r.removeLeadSnapshot()}function Lp(r,o,a){r.translate=pn(o.translate,0,a),r.scale=pn(o.scale,1,a),r.origin=o.origin,r.originPoint=o.originPoint}function Bp(r,o,a,f){r.min=pn(o.min,a.min,f),r.max=pn(o.max,a.max,f)}function SE(r,o,a,f){Bp(r.x,o.x,a.x,f),Bp(r.y,o.y,a.y,f)}function AE(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const TE={duration:.45,ease:[.4,0,.1,1]},jp=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),Fp=jp("applewebkit/")&&!jp("chrome/")?Math.round:Zr;function Vp(r){r.min=Fp(r.min),r.max=Fp(r.max)}function IE(r){Vp(r.x),Vp(r.y)}function Hg(r,o,a){return r==="position"||r==="preserve-aspect"&&!OC(kp(o),kp(a),.2)}function NE(r){var o;return r!==r.root&&((o=r.scroll)==null?void 0:o.wasRoot)}const _E=Wg({attachResizeListener:(r,o)=>Ha(r,"resize",o),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),kd={current:void 0},Gg=Wg({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!kd.current){const r=new _E({});r.mount(window),r.setOptions({layoutScroll:!0}),kd.current=r}return kd.current},resetTransform:(r,o)=>{r.style.transform=o!==void 0?o:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),RE={pan:{Feature:ZC},drag:{Feature:YC,ProjectionNode:Gg,MeasureLayout:Bg}};function Up(r,o,a){const{props:f}=r;r.animationState&&f.whileHover&&r.animationState.setActive("whileHover",a==="Start");const p="onHover"+a,y=f[p];y&&un.postRender(()=>y(o,qa(o)))}class kE extends vs{mount(){const{current:o}=this.node;o&&(this.unmount=e3(o,(a,f)=>(Up(this.node,f,"Start"),p=>Up(this.node,p,"End"))))}unmount(){}}class PE extends vs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let o=!1;try{o=this.node.current.matches(":focus-visible")}catch{o=!0}!o||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Za(Ha(this.node.current,"focus",()=>this.onFocus()),Ha(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function zp(r,o,a){const{props:f}=r;if(r.current instanceof HTMLButtonElement&&r.current.disabled)return;r.animationState&&f.whileTap&&r.animationState.setActive("whileTap",a==="Start");const p="onTap"+(a==="End"?"":a),y=f[p];y&&un.postRender(()=>y(o,qa(o)))}class OE extends vs{mount(){const{current:o}=this.node;o&&(this.unmount=i3(o,(a,f)=>(zp(this.node,f,"Start"),(p,{success:y})=>zp(this.node,p,y?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const af=new WeakMap,Pd=new WeakMap,ME=r=>{const o=af.get(r.target);o&&o(r)},DE=r=>{r.forEach(ME)};function LE({root:r,...o}){const a=r||document;Pd.has(a)||Pd.set(a,{});const f=Pd.get(a),p=JSON.stringify(o);return f[p]||(f[p]=new IntersectionObserver(DE,{root:r,...o})),f[p]}function BE(r,o,a){const f=LE(o);return af.set(r,a),f.observe(r),()=>{af.delete(r),f.unobserve(r)}}const jE={some:0,all:1};class FE extends vs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:o={}}=this.node.getProps(),{root:a,margin:f,amount:p="some",once:y}=o,w={root:a?a.current:void 0,rootMargin:f,threshold:typeof p=="number"?p:jE[p]},S=v=>{const{isIntersecting:E}=v;if(this.isInView===E||(this.isInView=E,y&&!E&&this.hasEnteredView))return;E&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",E);const{onViewportEnter:A,onViewportLeave:N}=this.node.getProps(),R=E?A:N;R&&R(v)};return BE(this.node.current,w,S)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:o,prevProps:a}=this.node;["amount","margin","root"].some(VE(o,a))&&this.startObserver()}unmount(){}}function VE({viewport:r={}},{viewport:o={}}={}){return a=>r[a]!==o[a]}const UE={inView:{Feature:FE},tap:{Feature:OE},focus:{Feature:PE},hover:{Feature:kE}},zE={layout:{ProjectionNode:Gg,MeasureLayout:Bg}},WE={...IC,...UE,...RE,...zE},si=W3(WE,nC),HE=()=>{const{login:r,signup:o,user:a,logout:f,checkAuth:p}=I.useContext(Xn),[y,w]=I.useState(""),[S,v]=I.useState(""),[E,A]=I.useState(""),[N,R]=I.useState(null),[M,L]=I.useState(null),[B,j]=I.useState(""),[U,W]=I.useState(0),[F,q]=I.useState({x:0,y:0}),[ee,re]=I.useState(1),[X,le]=I.useState(null),[te,ke]=I.useState(!1),[Le,Se]=I.useState(!1),[Ne,Ee]=I.useState({}),[J,Ve]=I.useState({}),[ye,he]=I.useState(!1),[De,ce]=I.useState(!1),[Z,G]=I.useState(null),[we,be]=I.useState(!1),[ge,ie]=I.useState(!1),ze=I.useRef(null),ve=Pn(),Be=Nr(),nt=new URLSearchParams(Be.search),Ae=nt.get("redirect"),pe=nt.get("code"),xe=Ae==="lobby",He=()=>{const qe="abcdefghijklmnopqrstuvwxyz0123456789";let mt="";for(let _e=0;_e<10;_e++)mt+=qe.charAt(Math.floor(Math.random()*qe.length));return mt};I.useEffect(()=>{if(xe&&!y&&!S){const qe=He(),mt=He();w(qe),v(mt),Ve(_e=>({..._e,username:!0,password:!0})),Ee(_e=>({..._e,username:"",password:""})),W(2)}},[xe,y,S,E]),I.useEffect(()=>{localStorage.getItem("access_token")&&ve(Ae==="lobby"?pe?`/lobby?code=${pe}`:"/?showLobbyModal=true":Ae==="product-selection"?"/product-selection":"/")},[Ae,pe,ve]),I.useEffect(()=>{U===2&&E&&Je(E)&&(he(!0),Ve(qe=>({...qe,displayName:!0})),Ee(qe=>({...qe,displayName:""})))},[U,E]),I.useEffect(()=>{U===3&&pe!=="demolobby"&&(y&&S&&E)&&!ge&&(be(!0),ie(!0))},[U,pe,y,S,E,ge]);const Ze=()=>{be(!1),setTimeout(()=>{ze.current&&ze.current.click()},150)},Rt=()=>{be(!1)},wt=qe=>{const mt=/^[a-z0-9]+$/;return qe.length>=2&&mt.test(qe)},$e=qe=>qe.length>=2,Je=qe=>qe.length>=2,qt=()=>{U<St.length-1&&(U===0&&!E&&(A(y),Ve(qe=>({...qe,displayName:!0})),Ee(qe=>({...qe,displayName:""}))),U===1&&E&&E.length>=2?he(!0):he(!1),W(qe=>qe+1))},je=()=>{if(U>0){const qe=U-1;W(qe);const mt=St[qe];if(mt.validate){const _e=mt.value;mt.validate(_e)&&he(!0)}else he(!0)}},Wt=(qe,mt,_e)=>{_e(qe.target.value);const me=qe.target.value;mt(me)?(Ve(ct=>({...ct,[St[U].id]:!0})),Ee(ct=>({...ct,[St[U].id]:""})),he(!0)):(Ve(ct=>({...ct,[St[U].id]:!1})),Ee(ct=>({...ct,[St[U].id]:"Must be at least 2 characters"})),he(!1))},nr=qe=>{const mt=qe.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");w(mt),wt(mt)?(Ve(_e=>({..._e,username:!0})),Ee(_e=>({..._e,username:""})),he(!0)):(Ve(_e=>({..._e,username:!1})),Ee(_e=>({..._e,username:"Must be at least 2 characters"})),he(!1))},Ue=qe=>{Wt(qe,$e,v)},kt=qe=>{Wt(qe,Je,A)},ut=qe=>{const mt=qe.target.files[0];if(mt){const _e=new FileReader;_e.onload=me=>{const ct=new Image;ct.onload=()=>{let et=ct.width,ft=ct.height;const Yt=1500;et>ft&&et>Yt?(ft=ft*Yt/et,et=Yt):ft>et&&ft>Yt&&(et=et*Yt/ft,ft=Yt);const In=document.createElement("canvas");In.width=et,In.height=ft,In.getContext("2d").drawImage(ct,0,0,et,ft);const at=In.toDataURL("image/jpeg",.75);R(mt),L(at),ke(!0),Ve(an=>({...an,image:!0})),Ee(an=>({...an,image:""})),he(!0)},ct.src=me.target.result},_e.readAsDataURL(mt)}},jt=(qe,mt)=>{le(mt)},Ke=async()=>{try{const qe=await gf(M,X);L(qe),ke(!1)}catch(qe){console.error("Error cropping the image:",qe),j("Failed to crop image. Please try again.")}},Ht=async qe=>{if(qe.preventDefault(),Se(!0),j(""),console.log("Signup attempt - Username:",y,"Password:",S),!y||!S||!E){j("All fields are required"),Se(!1);return}if(!N||!M){j("Your profile picture is required"),Se(!1);return}try{const mt="/signup",_e=await It(mt,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:y,password:S})}),me=await _e.json();if(me.error==="Username already taken")if(xe){const Yt=He(),In=He();w(Yt),v(In);const on=await It(mt,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:Yt,password:In})}),at=await on.json();if(!on.ok||at.error==="Username already taken"){j("Unable to create account. Please try again."),Se(!1);return}r(at)}else{j("Username is taken"),Se(!1);return}else{if(!_e.ok){j(me.message||"Signup failed"),Se(!1);return}r(me)}if(await p(),!localStorage.getItem("access_token"))throw new Error("Authentication failed");let et=null;if(N)et=M,et=et.split(",")[1];else{const on=await(await(await fetch("/assets/fakeprofile.png")).blob()).arrayBuffer();et=btoa(new Uint8Array(on).reduce((at,an)=>at+String.fromCharCode(an),""))}if(!(await It("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:E,image_data:et})})).ok)throw new Error("Failed to update profile");await p(),ve(Ae==="lobby"?pe?`/lobby?code=${pe}`:"/?showLobbyModal=true":Ae==="product-selection"?"/product-selection":"/")}catch(mt){console.error("Error:",mt),j("An error occurred. Please try again.")}Se(!1)},St=[{id:"username",label:"Username",value:y,onChange:nr,type:"text",placeholder:"Enter a username",validate:wt},{id:"password",label:"Password",value:S,onChange:Ue,type:"text",placeholder:"Create a password",validate:$e},{id:"displayName",label:pe==="demolobby"?"Display Name (Type Any Name)":"Display Name (what people will see)",value:E,onChange:kt,type:"text",placeholder:"Enter your preferred name",validate:Je},{id:"image",label:pe==="demolobby"?"Profile Image (Upload Any Image)":"Take a Selfie (so people can find you)",type:"file",onChange:ut,accept:"image/*"}];return x.jsxs("div",{className:"signup-container",children:[x.jsx("button",{onClick:()=>ve("/"),className:"homescreen-button",children:"Home"}),x.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),x.jsx("h3",{className:"signup-header",children:pe==="demolobby"?"Join the demo":"Sign Up to Join"}),pe&&pe!=="demolobby"&&x.jsxs("h2",{className:"signup-header",children:[pe," lobby"]}),pe==="demolobby"&&x.jsx("h2",{className:"signup-header",style:{fontSize:"0.9rem"},children:"Try Reuneo for Free!"}),x.jsxs("p",{className:"login-link-text",children:["Already have an account? ",x.jsx("a",{href:"#",onClick:qe=>{qe.preventDefault(),ve("/login")},className:"login-link",children:"Login here"})]}),x.jsxs("div",{className:"step-form-container",children:[x.jsx("div",{className:"step-progress",children:(xe?St.slice(2):St).map((qe,mt)=>x.jsx("div",{className:`progress-dot ${xe?(mt===U-2?"active":"")+(mt<U-2?" completed":""):(mt===U?"active":"")+(mt<U?" completed":"")}`},mt))}),x.jsxs("form",{onSubmit:Ht,children:[x.jsx(bd,{mode:"wait",initial:!1,children:x.jsxs(si.div,{initial:{opacity:0,x:8},animate:{opacity:1,x:0},exit:{opacity:0,x:-8},transition:{type:"spring",stiffness:500,damping:25,mass:.3},className:"step active",style:{willChange:"transform, opacity"},children:[x.jsx("div",{className:"step-content",children:x.jsxs(si.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:[x.jsx("label",{className:"step-label",children:St[U].label}),x.jsx(si.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},transition:{duration:.15,ease:"easeOut"},children:St[U].type==="file"?x.jsx("div",{className:"image-upload-container",children:te?x.jsxs("div",{className:"cropper-container",children:[x.jsx("div",{className:"cropper-wrapper",children:x.jsx(mf,{image:M,crop:F,zoom:ee,aspect:1,onCropComplete:jt,onCropChange:q,onZoomChange:re})}),x.jsxs("div",{className:"cropper-controls",children:[x.jsx("button",{type:"button",onClick:()=>{ke(!1),L(null),R(null)},className:"cancel-crop-button",children:"Cancel"}),x.jsx("button",{type:"button",onClick:Ke,className:"save-crop-button",children:"Good"})]})]}):x.jsxs(x.Fragment,{children:[x.jsx("input",{ref:ze,type:"file",onChange:St[U].onChange,accept:St[U].accept,className:"step-input"}),M&&x.jsx("div",{children:x.jsx("img",{src:M,alt:"Profile preview",className:"profile-preview-image"})})]})}):x.jsx("input",{type:St[U].type,value:St[U].value,onChange:St[U].onChange,placeholder:St[U].placeholder,className:"step-input",autoFocus:!0})}),x.jsxs(bd,{mode:"wait",children:[Ne[St[U].id]&&x.jsx(si.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"step-error",children:Ne[St[U].id]}),J[St[U].id]&&x.jsx(si.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},className:"step-success",children:" Valid"})]})]})}),!te&&x.jsxs("div",{className:"button-container",children:[U>0&&x.jsx(si.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},type:"button",onClick:je,className:"backz-button",children:" Back"}),ye&&U<St.length-1&&x.jsx(si.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},type:"button",onClick:qt,className:"nextz-button",children:"Next "})]})]},U)}),B&&x.jsx(si.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"error-message",children:B}),U===St.length-1&&x.jsx(si.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},type:"submit",className:"primary-button",disabled:Le,children:Le?"Loading...":"Complete Signup"})]})]}),x.jsx(bd,{children:we&&x.jsx(si.div,{className:"selfie-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:Rt,children:x.jsxs(si.div,{className:"selfie-modal-content",initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},transition:{type:"spring",stiffness:400,damping:25},onClick:qe=>qe.stopPropagation(),children:[x.jsx("h2",{className:"selfie-modal-header",children:" You Must Take a Selfie"}),x.jsx("p",{className:"selfie-modal-subtext",children:"Don't use old photos, people need to know how you look in order to find you in the room - trust us."}),x.jsx("button",{type:"button",className:"selfie-modal-button",onClick:Ze,children:"Understood"})]})})})]})},GE=5e3,Xg=(r,o=null,a=null)=>{I.useEffect(()=>{const f=async()=>{try{const y=a?`/display_lobby_metadata?lobby_code=${a}`:"/display_lobby_metadata",w=await It(y,{headers:{lobby_code:a}});if(!w.ok){console.error("Failed to fetch lobby metadata");return}const S=await w.json();r(S.player_count),o&&o(S.lobby_state)}catch(y){console.error("Error fetching lobby metadata:",y)}};f();const p=setInterval(f,GE);return()=>clearInterval(p)},[r,o,a])},Bc="currentLobbyCode",jc="currentLobbyTimestamp",ih="currentLobbyLastValidated",XE=30*60*1e3,YE=3*60*1e3,ZE=r=>{localStorage.setItem(Bc,r),localStorage.setItem(jc,Date.now().toString()),console.log(`Stored lobby code: ${r}`)},KE=()=>{const r=localStorage.getItem(Bc),o=localStorage.getItem(jc);return!r||!o?null:Date.now()-parseInt(o)>XE?(Tc(),console.log("Lobby code expired, cleared from storage"),null):r},$E=()=>{const r=localStorage.getItem(ih);return r?Date.now()-parseInt(r)>YE:!0},qE=()=>{localStorage.setItem(ih,Date.now().toString())},Tc=()=>{localStorage.removeItem(Bc),localStorage.removeItem(jc),localStorage.removeItem(ih),console.log("Cleared lobby storage")},QE=()=>{localStorage.getItem(Bc)&&localStorage.setItem(jc,Date.now().toString())},JE=()=>{const[r,o]=I.useState(!1),[a,f]=I.useState(!1),[p,y]=I.useState(""),[w,S]=I.useState(""),[v,E]=I.useState(""),[A,N]=I.useState(null);Ef();const{user:R,userProfile:M,checkAuth:L,permissions:B}=I.useContext(Xn),[j,U]=I.useState(null),[W,F]=I.useState(null),[q,ee]=I.useState([]),[re,X]=I.useState(!1),[le,te]=I.useState(null),ke=Pn();Xg(U,F);const[Le,Se]=I.useState(!1);I.useRef(null);const Ne=I.useRef(null),Ee=async(ce=!1)=>{const Z=KE();if(!Z||!R){te(null);return}if(te(Z),ce||$E())try{const G=await It(`/display_lobby_metadata?lobby_code=${Z}`,{headers:{lobby_code:Z}});if(G.ok){const we=await G.json();we.status==="error"||we.lobby_state==="terminated"?(Tc(),te(null)):qE()}else G.status===404&&(Tc(),te(null))}catch(G){console.error("Error validating current lobby:",G)}},J=async()=>{if(R){X(!0);try{const ce=await It("/view_my_active_lobbies");if(ce.ok){const Z=await ce.json();console.log("User's active lobbies:",Z),Z&&Z.lobbies&&Array.isArray(Z.lobbies)?ee(Z.lobbies):ee([])}else console.error("Failed to fetch user's active lobbies"),ee([])}catch(ce){console.error("Error fetching user's active lobbies:",ce),ee([])}finally{X(!1)}}};I.useEffect(()=>{R?(J(),Ee(!0)):te(null)},[R]),I.useEffect(()=>{L()},[]),I.useEffect(()=>{if(new URLSearchParams(window.location.search).get("showLobbyModal")==="true"&&R){f(!0);const G=window.location.pathname;window.history.replaceState({},"",G)}},[R]);const Ve=ce=>{(B==="admin"||B==="organizer")&&ke(`/admin_lobby_view?code=${ce}`)},ye=ce=>{ce.preventDefault();const G=new FormData(ce.target).get("name");if(!G||G.trim()===""){S("Please enter a lobby code");return}const we=G.toLowerCase().replace(/[^a-z0-9]/g,"");if(we===""){S("Lobby code must contain only letters and numbers");return}E(we),f(!1),console.log(we),y(we),ke(`/lobby?code=${we}`),y(""),S("")},he=()=>{Se(!1),Ne.current&&(Ne.current.clear(),Ne.current=null)},De=()=>a?x.jsx("div",{className:"lobby-modal-overlay",children:x.jsxs("div",{className:"lobby-modal-container",children:[x.jsx("button",{onClick:()=>{f(!1),y(""),S(""),he()},className:"lobby-modal-close",children:""}),x.jsx("h2",{className:"lobby-modal-title",children:"Join Lobby"}),x.jsxs("form",{onSubmit:ye,className:"lobby-form",children:[x.jsxs("div",{className:"lobby-input-container",children:[x.jsx("input",{type:"text",name:"name",placeholder:"Enter Lobby Code",className:"lobby-input",pattern:"[a-zA-Z0-9]+",title:"Only letters and numbers are allowed",required:!0}),w&&x.jsx("div",{className:"lobby-error-message",children:w})]}),x.jsx("button",{type:"submit",className:"lobby-submit-button",children:"Join"})]})]})}):null;return x.jsxs("div",{style:{position:"relative",height:"var(--viewport-height)",overflow:"hidden"},children:[x.jsxs("video",{className:"background-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,poster:"/assets/demo_app_home_video_cover.jpg",children:[x.jsx("source",{src:"/assets/demo_app_home_video_X2_small.mp4",type:"video/mp4"}),x.jsx("source",{src:"/assets/app_home_video_2.webm",type:"video/webm"}),x.jsx("img",{src:"/assets/demo_app_home_video_cover.jpg",alt:"Background fallback",style:{width:"100%",height:"100%",objectFit:"cover"}}),"Your browser does not support the video tag."]}),x.jsxs("div",{style:{position:"relative",zIndex:1,color:"white",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[x.jsx("div",{style:{position:"absolute",top:"0",left:"50%",transform:"translateX(-50%)"},children:x.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Logo",style:{width:"110px",height:"110px",objectFit:"contain"}})}),x.jsx("div",{style:{marginTop:"10%",display:"flex",flexDirection:"column"},children:x.jsx(dw,{user:R,onProfileClick:()=>o(!0)})}),x.jsx("div",{style:{position:"absolute",top:"85px",display:B==="admin"||B==="organizer"?"flex":"none",justifyContent:"flex-end",width:"94%",left:"3%",alignItems:"center"},children:(B==="admin"||B==="organizer")&&x.jsx("button",{className:"login-button",onClick:()=>ke("/organizer-account-details"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:ce=>{ce.currentTarget.style.transform="translateY(-2px)",ce.currentTarget.style.boxShadow="0 2px 8px rgba(74, 58, 58, 0.7)"},onMouseLeave:ce=>{ce.currentTarget.style.transform="translateY(0)",ce.currentTarget.style.boxShadow="0 0 4px rgba(74, 58, 58, 0.5)"},children:x.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Settings"})})}),(B==="admin"||B==="organizer")&&R==="topaz"&&x.jsx("div",{style:{position:"absolute",top:"120px",right:"20px",zIndex:10},children:x.jsx("button",{className:"master-lobbies-button",onClick:()=>ke("/master_lobby_view"),children:"Lobbies"})}),r&&x.jsx(O2,{onSubmit:ce=>{o(!1)},onClose:()=>o(!1),existingProfile:M}),x.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",width:"90%",maxWidth:"1200px",textAlign:"center",marginLeft:"auto",marginRight:"auto",zIndex:1,top:"50%"},children:R?x.jsx("h2",{className:"welcome-header",style:{color:"#ffffff",fontSize:"1rem",textTransform:"uppercase",letterSpacing:"0.1em",textShadow:"4px 4px 8px rgba(0,0,0,0.9)",margin:0},children:R&&M&&(B==="admin"||B==="organizer")?(()=>{const ce="Create a Lobby",Z=M?M.name.slice(0,15):"";return x.jsxs(x.Fragment,{children:[ce.split("").map((G,we)=>x.jsx("span",{style:{"--i":we+1,marginRight:G===" "?"0.5em":"1px"},children:G},`main-${we}`)),x.jsx("br",{}),Z&&Z.split("").map((G,we)=>x.jsx("span",{style:{"--i":we+1,marginRight:G===" "?"0.5em":"1px"},children:G},`name-${we}`))]})})():(()=>{const ce="Join the Experience",Z=M?M.name.slice(0,15):"";return x.jsxs(x.Fragment,{children:[ce.split("").map((G,we)=>x.jsx("span",{style:{"--i":we+1,marginRight:G===" "?"0.5em":"1px"},children:G},`main-${we}`)),x.jsx("br",{}),Z&&Z.split("").map((G,we)=>x.jsx("span",{style:{"--i":we+1,marginRight:G===" "?"0.5em":"1px"},children:G},`name-${we}`))]})})()}):x.jsx("button",{className:"primary-button join-lobby-button",onClick:()=>window.location.href="https://reuneo.app/access",style:{padding:"16px 20px",backgroundColor:"transparent",color:"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0 auto",display:"block",position:"relative",zIndex:1,textAlign:"center",outline:"none",":hover":{transform:"scale(1.02)"}},children:x.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Become Organizer"})})}),R&&B!=="admin"&&B!=="organizer"&&x.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",width:"90%",maxWidth:"1200px",textAlign:"center",marginLeft:"auto",marginRight:"auto",zIndex:1,top:"calc(50% + 100px)"},children:x.jsx("button",{className:"primary-button join-lobby-button",onClick:()=>ke("/post-event-auth"),style:{padding:"16px 20px",backgroundColor:"transparent",color:"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0 auto",display:"block",position:"relative",zIndex:1,textAlign:"center",outline:"none",cursor:"pointer",":hover":{transform:"scale(1.02)"}},children:x.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"View Matches"})})}),R&&x.jsx("div",{style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",width:"94%",display:"flex",flexDirection:"row",justifyContent:"center",gap:"1.5rem"},children:x.jsx("div",{className:"event-item",style:{width:"auto",maxWidth:"none",margin:"0",padding:"10px 20px",borderRadius:"16px",marginBottom:"20px",cursor:"pointer",opacity:1,display:"flex",flexDirection:"row",alignItems:"center",gap:"1.5rem",":hover":{transform:"translateY(-5px)"}},children:x.jsxs("div",{style:{display:"flex",gap:"1.5rem",flexDirection:"row",alignItems:"center"},children:[x.jsx("button",{className:`primary-button ${B!=="admin"&&B!=="organizer"?"join-lobby-button":""}`,onClick:()=>R?f(!0):ke("/signup?redirect=lobby"),disabled:j===null||W==="terminate",style:{opacity:1,cursor:j===null||W==="terminate"?"not-allowed":"pointer",padding:"16px 20px",backgroundColor:B!=="admin"&&B!=="organizer"?"transparent":"#144dff",color:"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0",display:"block",position:"relative",zIndex:1,textAlign:"center",outline:B!=="admin"&&B!=="organizer"?"none":"1px solid rgba(58, 53, 53, 0.7)",":hover":{backgroundColor:B!=="admin"&&B!=="organizer"?"transparent":"#535bf2",transform:"scale(1.02)"}},children:x.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Join Lobby"})}),R&&B!=="admin"&&B!=="organizer"&&x.jsx("button",{className:"primary-button join-lobby-button",onClick:()=>window.location.href="https://reuneo.com/organizer-signup",style:{padding:"16px 20px",backgroundColor:"transparent",color:"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0",display:"block",position:"relative",zIndex:1,textAlign:"center",outline:"none",":hover":{transform:"scale(1.02)"}},children:x.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Become Organizer"})}),(B==="admin"||B==="organizer")&&x.jsx("button",{className:`primary-button ${B==="admin"||B==="organizer"?"create-lobby-button":""}`,onClick:q.length>0?void 0:()=>ke("/create_lobby"),disabled:q.length>0,title:q.length>0?"You already have an active lobby. Close it before creating a new one.":"Create a new lobby",style:{padding:"16px 20px",backgroundColor:q.length>0?"rgba(128, 128, 128, 0.3)":"transparent",color:q.length>0?"rgba(255, 255, 255, 0.5)":"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:q.length>0?"0 2px 3px rgba(0, 0, 0, 0.2)":"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0",position:"relative",zIndex:1,textAlign:"center",cursor:q.length>0?"not-allowed":"pointer",opacity:q.length>0?.6:1,":hover":{transform:q.length>0?"none":"scale(1.02)"}},children:x.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Create Lobby"})})]})})}),le&&!((B==="admin"||B==="organizer")&&q.length>0)&&x.jsx("div",{className:"events-list",style:{position:"absolute",bottom:"calc(20px + 120px + 10px)",left:"50%",transform:"translateX(-50%)",width:"44%",height:"15%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.05), rgba(83, 91, 242, 0.05))",borderRadius:"30px",padding:"1rem",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",justifyContent:"center",alignItems:"center"},children:x.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",perspective:"1000px"},children:x.jsxs("div",{className:"card",style:{width:"calc(100% - 2rem)",maxWidth:"200px",minWidth:"150px",background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",boxShadow:"0 10px 30px rgba(20, 77, 255, 0.15)",border:"1px solid rgba(20, 77, 255, 0.2)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",padding:"1rem 1rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",transformStyle:"preserve-3d","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(20, 77, 255, 0.1), rgba(83, 91, 242, 0.1))",opacity:0,transition:"opacity 0.4s ease"}},onClick:()=>ke(`/lobby?code=${le}`),onMouseEnter:ce=>{ce.currentTarget.style.transform="translateY(-10px) rotateX(5deg)",ce.currentTarget.style.boxShadow="0 20px 40px rgba(20, 77, 255, 0.25)",ce.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.4)",ce.currentTarget.style.background="rgba(255, 255, 255, 0.98)"},onMouseLeave:ce=>{ce.currentTarget.style.transform="translateY(0) rotateX(0)",ce.currentTarget.style.boxShadow="0 10px 30px rgba(20, 77, 255, 0.15)",ce.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.2)",ce.currentTarget.style.background="rgba(255, 255, 255, 0.95)"},children:[x.jsx("div",{className:"glow-button",style:{width:"30px",height:"30px",borderRadius:"50%",background:"linear-gradient(135deg, #144dff, #535bf2)",marginBottom:".5rem",marginTop:"-1rem",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:".8rem",boxShadow:"0 8px 20px rgba(20, 77, 255, 0.3)",transition:"all 0.4s ease",position:"relative","&::after":{content:'""',position:"absolute",top:"-5px",left:"-5px",right:"-5px",bottom:"-5px",borderRadius:"50%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.2), rgba(83, 91, 242, 0.2))",zIndex:-1,animation:"pulse 2s infinite"}},children:le.charAt(0).toUpperCase()}),x.jsxs("h3",{style:{marginTop:"0.5rem",color:"#144dff",fontWeight:"700",fontSize:".9em",fontFamily:"Helvetica",textAlign:"center",textShadow:"0 2px 4px rgba(20, 77, 255, 0.1)",letterSpacing:"0.5px"},children:["Return to ",le]})]})})}),(B==="admin"||B==="organizer")&&q.length>0&&x.jsx("div",{className:"events-list",style:{position:"absolute",bottom:le&&!((B==="admin"||B==="organizer")&&q.length>0)?"calc(20px + 120px + 10px + 15% + 10px)":"calc(20px + 120px + 10px)",left:"50%",transform:"translateX(-50%)",width:"44%",height:"15%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.05), rgba(83, 91, 242, 0.05))",borderRadius:"30px",padding:"1rem",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",justifyContent:"center",alignItems:"center"},children:re?x.jsx("div",{style:{textAlign:"center",color:"white"},children:x.jsx("p",{children:"Loading your lobbies..."})}):q.length>0?x.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",perspective:"1000px"},children:q.map((ce,Z)=>x.jsxs("div",{className:"card",style:{width:"calc(100% - 2rem)",maxWidth:"200px",minWidth:"150px",background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",boxShadow:"0 10px 30px rgba(20, 77, 255, 0.15)",border:"1px solid rgba(20, 77, 255, 0.2)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",padding:"1rem 1rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",transformStyle:"preserve-3d","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(20, 77, 255, 0.1), rgba(83, 91, 242, 0.1))",opacity:0,transition:"opacity 0.4s ease"}},onClick:()=>Ve(ce),onMouseEnter:G=>{G.currentTarget.style.transform="translateY(-10px) rotateX(5deg)",G.currentTarget.style.boxShadow="0 20px 40px rgba(20, 77, 255, 0.25)",G.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.4)",G.currentTarget.style.background="rgba(255, 255, 255, 0.98)"},onMouseLeave:G=>{G.currentTarget.style.transform="translateY(0) rotateX(0)",G.currentTarget.style.boxShadow="0 10px 30px rgba(20, 77, 255, 0.15)",G.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.2)",G.currentTarget.style.background="rgba(255, 255, 255, 0.95)"},children:[x.jsx("div",{className:"glow-button",style:{width:"30px",height:"30px",borderRadius:"50%",background:"linear-gradient(135deg, #144dff, #535bf2)",marginBottom:".5rem",marginTop:"-1rem",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:".8rem",boxShadow:"0 8px 20px rgba(20, 77, 255, 0.3)",transition:"all 0.4s ease",position:"relative","&::after":{content:'""',position:"absolute",top:"-5px",left:"-5px",right:"-5px",bottom:"-5px",borderRadius:"50%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.2), rgba(83, 91, 242, 0.2))",zIndex:-1,animation:"pulse 2s infinite"}},children:ce&&ce.length>0?ce.charAt(0).toUpperCase():"?"}),x.jsxs("h3",{style:{marginTop:"0.5rem",color:"#144dff",fontWeight:"700",fontSize:".9em",fontFamily:"Helvetica",textAlign:"center",textShadow:"0 2px 4px rgba(20, 77, 255, 0.1)",letterSpacing:"0.5px"},children:["Lobby ",ce||"Unknown"]})]},Z))}):x.jsx("div",{style:{}})})]}),x.jsx(De,{})]})};function eb(){const{pathname:r}=Nr();return I.useEffect(()=>{window.scrollTo(0,0)},[r]),null}function tb(){const{pathname:r}=Nr(),o=r.startsWith("/organizer-dashboard");return I.useEffect(()=>{const a=document.getElementById("root"),f=document.body;return o?(a==null||a.classList.add("dashboard-view"),f==null||f.classList.add("dashboard-view")):(a==null||a.classList.remove("dashboard-view"),f==null||f.classList.remove("dashboard-view")),()=>{a==null||a.classList.remove("dashboard-view"),f==null||f.classList.remove("dashboard-view")}},[r,o]),null}const nb=()=>{const{login:r,signup:o,user:a,logout:f,checkAuth:p}=I.useContext(Xn),[y,w]=I.useState(""),[S,v]=I.useState(""),[E,A]=I.useState(""),[N,R]=I.useState(""),[M,L]=I.useState(!0),[B,j]=I.useState({}),[U,W]=I.useState(!1),[F,q]=I.useState(""),ee=Pn(),[re]=ew();I.useEffect(()=>{re.get("error")==="invalid_or_expired_link"&&(q("Your login link has expired or is invalid. Please request a new one."),window.history.replaceState({},"","/login"))},[re]);const X=Le=>{const Se=/^[a-z0-9]+$/;return Le.length>=2&&Se.test(Le)},le=Le=>{const Se=Le.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");w(Se),Se.length>0?W(!0):W(!1),X(Se)?j(Ne=>({...Ne,username:""})):j(Ne=>({...Ne,username:" "}))},te=Le=>{const Se=Le.target.value.toLowerCase();v(Se)},ke=async Le=>{if(Le.preventDefault(),R(""),!X(y)){R("Please enter a valid username");return}try{const Ne=await It(M?"/login":"/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:y,password:S})});if(Ne.ok){const Ee=await Ne.json();r(Ee),p(),ee("/")}else{const Ee=await Ne.json();R(Ee.message||`${M?"Login":"Signup"} failed`)}}catch(Se){R("Network error occurred. Please try again."),console.error("Error:",Se)}};return x.jsxs("div",{className:"login-container",children:[x.jsx("button",{onClick:()=>ee("/"),className:"homescreen-button",children:"Home"}),x.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),x.jsx("h1",{className:"login-header",children:"Login"}),x.jsxs("div",{className:"login-signup-form",children:[F&&x.jsx("div",{className:"error-message",style:{backgroundColor:"rgba(255, 107, 107, 0.1)",border:"1px solid rgba(255, 107, 107, 0.3)",padding:"12px 16px",borderRadius:"8px",marginBottom:"16px"},children:F}),N&&x.jsx("div",{className:"error-message",children:N}),x.jsxs("form",{onSubmit:ke,children:[x.jsxs("div",{className:"form-group",children:[x.jsx("input",{type:"text",placeholder:"Username",className:"login-input",value:y,onChange:le,required:!0}),U&&x.jsx("div",{className:"step-success",children:"lowercase letters and numbers only"})]}),x.jsx("div",{className:"form-group",children:x.jsx("input",{type:"text",placeholder:"Password",className:"login-input",value:S,onChange:te,required:!0})}),x.jsx("button",{type:"submit",className:"login-primary-button",children:"Login"})]})]})]})},rb=()=>{const r=Pn(),{logout:o}=I.useContext(Xn);return localStorage.removeItem("access_token"),I.useEffect(()=>{console.log("LogoutPage useEffect"),setTimeout(()=>{o(),r("/")},100)},[]),x.jsx("div",{children:"Logged out redirecting to homescreen"})};var ib=Object.defineProperty,Ic=Object.getOwnPropertySymbols,Yg=Object.prototype.hasOwnProperty,Zg=Object.prototype.propertyIsEnumerable,Wp=(r,o,a)=>o in r?ib(r,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[o]=a,lf=(r,o)=>{for(var a in o||(o={}))Yg.call(o,a)&&Wp(r,a,o[a]);if(Ic)for(var a of Ic(o))Zg.call(o,a)&&Wp(r,a,o[a]);return r},cf=(r,o)=>{var a={};for(var f in r)Yg.call(r,f)&&o.indexOf(f)<0&&(a[f]=r[f]);if(r!=null&&Ic)for(var f of Ic(r))o.indexOf(f)<0&&Zg.call(r,f)&&(a[f]=r[f]);return a};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var to;(r=>{const o=class Dt{constructor(v,E,A,N){if(this.version=v,this.errorCorrectionLevel=E,this.modules=[],this.isFunction=[],v<Dt.MIN_VERSION||v>Dt.MAX_VERSION)throw new RangeError("Version value out of range");if(N<-1||N>7)throw new RangeError("Mask value out of range");this.size=v*4+17;let R=[];for(let L=0;L<this.size;L++)R.push(!1);for(let L=0;L<this.size;L++)this.modules.push(R.slice()),this.isFunction.push(R.slice());this.drawFunctionPatterns();const M=this.addEccAndInterleave(A);if(this.drawCodewords(M),N==-1){let L=1e9;for(let B=0;B<8;B++){this.applyMask(B),this.drawFormatBits(B);const j=this.getPenaltyScore();j<L&&(N=B,L=j),this.applyMask(B)}}p(0<=N&&N<=7),this.mask=N,this.applyMask(N),this.drawFormatBits(N),this.isFunction=[]}static encodeText(v,E){const A=r.QrSegment.makeSegments(v);return Dt.encodeSegments(A,E)}static encodeBinary(v,E){const A=r.QrSegment.makeBytes(v);return Dt.encodeSegments([A],E)}static encodeSegments(v,E,A=1,N=40,R=-1,M=!0){if(!(Dt.MIN_VERSION<=A&&A<=N&&N<=Dt.MAX_VERSION)||R<-1||R>7)throw new RangeError("Invalid value");let L,B;for(L=A;;L++){const F=Dt.getNumDataCodewords(L,E)*8,q=w.getTotalBits(v,L);if(q<=F){B=q;break}if(L>=N)throw new RangeError("Data too long")}for(const F of[Dt.Ecc.MEDIUM,Dt.Ecc.QUARTILE,Dt.Ecc.HIGH])M&&B<=Dt.getNumDataCodewords(L,F)*8&&(E=F);let j=[];for(const F of v){a(F.mode.modeBits,4,j),a(F.numChars,F.mode.numCharCountBits(L),j);for(const q of F.getData())j.push(q)}p(j.length==B);const U=Dt.getNumDataCodewords(L,E)*8;p(j.length<=U),a(0,Math.min(4,U-j.length),j),a(0,(8-j.length%8)%8,j),p(j.length%8==0);for(let F=236;j.length<U;F^=253)a(F,8,j);let W=[];for(;W.length*8<j.length;)W.push(0);return j.forEach((F,q)=>W[q>>>3]|=F<<7-(q&7)),new Dt(L,E,W,R)}getModule(v,E){return 0<=v&&v<this.size&&0<=E&&E<this.size&&this.modules[E][v]}getModules(){return this.modules}drawFunctionPatterns(){for(let A=0;A<this.size;A++)this.setFunctionModule(6,A,A%2==0),this.setFunctionModule(A,6,A%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const v=this.getAlignmentPatternPositions(),E=v.length;for(let A=0;A<E;A++)for(let N=0;N<E;N++)A==0&&N==0||A==0&&N==E-1||A==E-1&&N==0||this.drawAlignmentPattern(v[A],v[N]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(v){const E=this.errorCorrectionLevel.formatBits<<3|v;let A=E;for(let R=0;R<10;R++)A=A<<1^(A>>>9)*1335;const N=(E<<10|A)^21522;p(N>>>15==0);for(let R=0;R<=5;R++)this.setFunctionModule(8,R,f(N,R));this.setFunctionModule(8,7,f(N,6)),this.setFunctionModule(8,8,f(N,7)),this.setFunctionModule(7,8,f(N,8));for(let R=9;R<15;R++)this.setFunctionModule(14-R,8,f(N,R));for(let R=0;R<8;R++)this.setFunctionModule(this.size-1-R,8,f(N,R));for(let R=8;R<15;R++)this.setFunctionModule(8,this.size-15+R,f(N,R));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let v=this.version;for(let A=0;A<12;A++)v=v<<1^(v>>>11)*7973;const E=this.version<<12|v;p(E>>>18==0);for(let A=0;A<18;A++){const N=f(E,A),R=this.size-11+A%3,M=Math.floor(A/3);this.setFunctionModule(R,M,N),this.setFunctionModule(M,R,N)}}drawFinderPattern(v,E){for(let A=-4;A<=4;A++)for(let N=-4;N<=4;N++){const R=Math.max(Math.abs(N),Math.abs(A)),M=v+N,L=E+A;0<=M&&M<this.size&&0<=L&&L<this.size&&this.setFunctionModule(M,L,R!=2&&R!=4)}}drawAlignmentPattern(v,E){for(let A=-2;A<=2;A++)for(let N=-2;N<=2;N++)this.setFunctionModule(v+N,E+A,Math.max(Math.abs(N),Math.abs(A))!=1)}setFunctionModule(v,E,A){this.modules[E][v]=A,this.isFunction[E][v]=!0}addEccAndInterleave(v){const E=this.version,A=this.errorCorrectionLevel;if(v.length!=Dt.getNumDataCodewords(E,A))throw new RangeError("Invalid argument");const N=Dt.NUM_ERROR_CORRECTION_BLOCKS[A.ordinal][E],R=Dt.ECC_CODEWORDS_PER_BLOCK[A.ordinal][E],M=Math.floor(Dt.getNumRawDataModules(E)/8),L=N-M%N,B=Math.floor(M/N);let j=[];const U=Dt.reedSolomonComputeDivisor(R);for(let F=0,q=0;F<N;F++){let ee=v.slice(q,q+B-R+(F<L?0:1));q+=ee.length;const re=Dt.reedSolomonComputeRemainder(ee,U);F<L&&ee.push(0),j.push(ee.concat(re))}let W=[];for(let F=0;F<j[0].length;F++)j.forEach((q,ee)=>{(F!=B-R||ee>=L)&&W.push(q[F])});return p(W.length==M),W}drawCodewords(v){if(v.length!=Math.floor(Dt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let E=0;for(let A=this.size-1;A>=1;A-=2){A==6&&(A=5);for(let N=0;N<this.size;N++)for(let R=0;R<2;R++){const M=A-R,B=(A+1&2)==0?this.size-1-N:N;!this.isFunction[B][M]&&E<v.length*8&&(this.modules[B][M]=f(v[E>>>3],7-(E&7)),E++)}}p(E==v.length*8)}applyMask(v){if(v<0||v>7)throw new RangeError("Mask value out of range");for(let E=0;E<this.size;E++)for(let A=0;A<this.size;A++){let N;switch(v){case 0:N=(A+E)%2==0;break;case 1:N=E%2==0;break;case 2:N=A%3==0;break;case 3:N=(A+E)%3==0;break;case 4:N=(Math.floor(A/3)+Math.floor(E/2))%2==0;break;case 5:N=A*E%2+A*E%3==0;break;case 6:N=(A*E%2+A*E%3)%2==0;break;case 7:N=((A+E)%2+A*E%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[E][A]&&N&&(this.modules[E][A]=!this.modules[E][A])}}getPenaltyScore(){let v=0;for(let R=0;R<this.size;R++){let M=!1,L=0,B=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[R][j]==M?(L++,L==5?v+=Dt.PENALTY_N1:L>5&&v++):(this.finderPenaltyAddHistory(L,B),M||(v+=this.finderPenaltyCountPatterns(B)*Dt.PENALTY_N3),M=this.modules[R][j],L=1);v+=this.finderPenaltyTerminateAndCount(M,L,B)*Dt.PENALTY_N3}for(let R=0;R<this.size;R++){let M=!1,L=0,B=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[j][R]==M?(L++,L==5?v+=Dt.PENALTY_N1:L>5&&v++):(this.finderPenaltyAddHistory(L,B),M||(v+=this.finderPenaltyCountPatterns(B)*Dt.PENALTY_N3),M=this.modules[j][R],L=1);v+=this.finderPenaltyTerminateAndCount(M,L,B)*Dt.PENALTY_N3}for(let R=0;R<this.size-1;R++)for(let M=0;M<this.size-1;M++){const L=this.modules[R][M];L==this.modules[R][M+1]&&L==this.modules[R+1][M]&&L==this.modules[R+1][M+1]&&(v+=Dt.PENALTY_N2)}let E=0;for(const R of this.modules)E=R.reduce((M,L)=>M+(L?1:0),E);const A=this.size*this.size,N=Math.ceil(Math.abs(E*20-A*10)/A)-1;return p(0<=N&&N<=9),v+=N*Dt.PENALTY_N4,p(0<=v&&v<=2568888),v}getAlignmentPatternPositions(){if(this.version==1)return[];{const v=Math.floor(this.version/7)+2,E=this.version==32?26:Math.ceil((this.version*4+4)/(v*2-2))*2;let A=[6];for(let N=this.size-7;A.length<v;N-=E)A.splice(1,0,N);return A}}static getNumRawDataModules(v){if(v<Dt.MIN_VERSION||v>Dt.MAX_VERSION)throw new RangeError("Version number out of range");let E=(16*v+128)*v+64;if(v>=2){const A=Math.floor(v/7)+2;E-=(25*A-10)*A-55,v>=7&&(E-=36)}return p(208<=E&&E<=29648),E}static getNumDataCodewords(v,E){return Math.floor(Dt.getNumRawDataModules(v)/8)-Dt.ECC_CODEWORDS_PER_BLOCK[E.ordinal][v]*Dt.NUM_ERROR_CORRECTION_BLOCKS[E.ordinal][v]}static reedSolomonComputeDivisor(v){if(v<1||v>255)throw new RangeError("Degree out of range");let E=[];for(let N=0;N<v-1;N++)E.push(0);E.push(1);let A=1;for(let N=0;N<v;N++){for(let R=0;R<E.length;R++)E[R]=Dt.reedSolomonMultiply(E[R],A),R+1<E.length&&(E[R]^=E[R+1]);A=Dt.reedSolomonMultiply(A,2)}return E}static reedSolomonComputeRemainder(v,E){let A=E.map(N=>0);for(const N of v){const R=N^A.shift();A.push(0),E.forEach((M,L)=>A[L]^=Dt.reedSolomonMultiply(M,R))}return A}static reedSolomonMultiply(v,E){if(v>>>8||E>>>8)throw new RangeError("Byte out of range");let A=0;for(let N=7;N>=0;N--)A=A<<1^(A>>>7)*285,A^=(E>>>N&1)*v;return p(A>>>8==0),A}finderPenaltyCountPatterns(v){const E=v[1];p(E<=this.size*3);const A=E>0&&v[2]==E&&v[3]==E*3&&v[4]==E&&v[5]==E;return(A&&v[0]>=E*4&&v[6]>=E?1:0)+(A&&v[6]>=E*4&&v[0]>=E?1:0)}finderPenaltyTerminateAndCount(v,E,A){return v&&(this.finderPenaltyAddHistory(E,A),E=0),E+=this.size,this.finderPenaltyAddHistory(E,A),this.finderPenaltyCountPatterns(A)}finderPenaltyAddHistory(v,E){E[0]==0&&(v+=this.size),E.pop(),E.unshift(v)}};o.MIN_VERSION=1,o.MAX_VERSION=40,o.PENALTY_N1=3,o.PENALTY_N2=3,o.PENALTY_N3=40,o.PENALTY_N4=10,o.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],o.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],r.QrCode=o;function a(S,v,E){if(v<0||v>31||S>>>v)throw new RangeError("Value out of range");for(let A=v-1;A>=0;A--)E.push(S>>>A&1)}function f(S,v){return(S>>>v&1)!=0}function p(S){if(!S)throw new Error("Assertion error")}const y=class wn{constructor(v,E,A){if(this.mode=v,this.numChars=E,this.bitData=A,E<0)throw new RangeError("Invalid argument");this.bitData=A.slice()}static makeBytes(v){let E=[];for(const A of v)a(A,8,E);return new wn(wn.Mode.BYTE,v.length,E)}static makeNumeric(v){if(!wn.isNumeric(v))throw new RangeError("String contains non-numeric characters");let E=[];for(let A=0;A<v.length;){const N=Math.min(v.length-A,3);a(parseInt(v.substring(A,A+N),10),N*3+1,E),A+=N}return new wn(wn.Mode.NUMERIC,v.length,E)}static makeAlphanumeric(v){if(!wn.isAlphanumeric(v))throw new RangeError("String contains unencodable characters in alphanumeric mode");let E=[],A;for(A=0;A+2<=v.length;A+=2){let N=wn.ALPHANUMERIC_CHARSET.indexOf(v.charAt(A))*45;N+=wn.ALPHANUMERIC_CHARSET.indexOf(v.charAt(A+1)),a(N,11,E)}return A<v.length&&a(wn.ALPHANUMERIC_CHARSET.indexOf(v.charAt(A)),6,E),new wn(wn.Mode.ALPHANUMERIC,v.length,E)}static makeSegments(v){return v==""?[]:wn.isNumeric(v)?[wn.makeNumeric(v)]:wn.isAlphanumeric(v)?[wn.makeAlphanumeric(v)]:[wn.makeBytes(wn.toUtf8ByteArray(v))]}static makeEci(v){let E=[];if(v<0)throw new RangeError("ECI assignment value out of range");if(v<128)a(v,8,E);else if(v<16384)a(2,2,E),a(v,14,E);else if(v<1e6)a(6,3,E),a(v,21,E);else throw new RangeError("ECI assignment value out of range");return new wn(wn.Mode.ECI,0,E)}static isNumeric(v){return wn.NUMERIC_REGEX.test(v)}static isAlphanumeric(v){return wn.ALPHANUMERIC_REGEX.test(v)}getData(){return this.bitData.slice()}static getTotalBits(v,E){let A=0;for(const N of v){const R=N.mode.numCharCountBits(E);if(N.numChars>=1<<R)return 1/0;A+=4+R+N.bitData.length}return A}static toUtf8ByteArray(v){v=encodeURI(v);let E=[];for(let A=0;A<v.length;A++)v.charAt(A)!="%"?E.push(v.charCodeAt(A)):(E.push(parseInt(v.substring(A+1,A+3),16)),A+=2);return E}};y.NUMERIC_REGEX=/^[0-9]*$/,y.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,y.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let w=y;r.QrSegment=y})(to||(to={}));(r=>{(o=>{const a=class{constructor(p,y){this.ordinal=p,this.formatBits=y}};a.LOW=new a(0,1),a.MEDIUM=new a(1,0),a.QUARTILE=new a(2,3),a.HIGH=new a(3,2),o.Ecc=a})(r.QrCode||(r.QrCode={}))})(to||(to={}));(r=>{(o=>{const a=class{constructor(p,y){this.modeBits=p,this.numBitsCharCount=y}numCharCountBits(p){return this.numBitsCharCount[Math.floor((p+7)/17)]}};a.NUMERIC=new a(1,[10,12,14]),a.ALPHANUMERIC=new a(2,[9,11,13]),a.BYTE=new a(4,[8,16,16]),a.KANJI=new a(8,[8,10,12]),a.ECI=new a(7,[0,0,0]),o.Mode=a})(r.QrSegment||(r.QrSegment={}))})(to||(to={}));var Mo=to;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var sb={L:Mo.QrCode.Ecc.LOW,M:Mo.QrCode.Ecc.MEDIUM,Q:Mo.QrCode.Ecc.QUARTILE,H:Mo.QrCode.Ecc.HIGH},Kg=128,$g="L",qg="#FFFFFF",Qg="#000000",Jg=!1,ex=1,ob=4,ab=0,lb=.1;function tx(r,o=0){const a=[];return r.forEach(function(f,p){let y=null;f.forEach(function(w,S){if(!w&&y!==null){a.push(`M${y+o} ${p+o}h${S-y}v1H${y+o}z`),y=null;return}if(S===f.length-1){if(!w)return;y===null?a.push(`M${S+o},${p+o} h1v1H${S+o}z`):a.push(`M${y+o},${p+o} h${S+1-y}v1H${y+o}z`);return}w&&y===null&&(y=S)})}),a.join("")}function nx(r,o){return r.slice().map((a,f)=>f<o.y||f>=o.y+o.h?a:a.map((p,y)=>y<o.x||y>=o.x+o.w?p:!1))}function cb(r,o,a,f){if(f==null)return null;const p=r.length+a*2,y=Math.floor(o*lb),w=p/o,S=(f.width||y)*w,v=(f.height||y)*w,E=f.x==null?r.length/2-S/2:f.x*w,A=f.y==null?r.length/2-v/2:f.y*w,N=f.opacity==null?1:f.opacity;let R=null;if(f.excavate){let L=Math.floor(E),B=Math.floor(A),j=Math.ceil(S+E-L),U=Math.ceil(v+A-B);R={x:L,y:B,w:j,h:U}}const M=f.crossOrigin;return{x:E,y:A,h:v,w:S,excavation:R,opacity:N,crossOrigin:M}}function ub(r,o){return o!=null?Math.max(Math.floor(o),0):r?ob:ab}function rx({value:r,level:o,minVersion:a,includeMargin:f,marginSize:p,imageSettings:y,size:w,boostLevel:S}){let v=sn.useMemo(()=>{const L=(Array.isArray(r)?r:[r]).reduce((B,j)=>(B.push(...Mo.QrSegment.makeSegments(j)),B),[]);return Mo.QrCode.encodeSegments(L,sb[o],a,void 0,void 0,S)},[r,o,a,S]);const{cells:E,margin:A,numCells:N,calculatedImageSettings:R}=sn.useMemo(()=>{let M=v.getModules();const L=ub(f,p),B=M.length+L*2,j=cb(M,w,L,y);return{cells:M,margin:L,numCells:B,calculatedImageSettings:j}},[v,w,y,f,p]);return{qrcode:v,margin:A,cells:E,numCells:N,calculatedImageSettings:R}}var db=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),fb=sn.forwardRef(function(o,a){const f=o,{value:p,size:y=Kg,level:w=$g,bgColor:S=qg,fgColor:v=Qg,includeMargin:E=Jg,minVersion:A=ex,boostLevel:N,marginSize:R,imageSettings:M}=f,B=cf(f,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:j}=B,U=cf(B,["style"]),W=M==null?void 0:M.src,F=sn.useRef(null),q=sn.useRef(null),ee=sn.useCallback(Ee=>{F.current=Ee,typeof a=="function"?a(Ee):a&&(a.current=Ee)},[a]),[re,X]=sn.useState(!1),{margin:le,cells:te,numCells:ke,calculatedImageSettings:Le}=rx({value:p,level:w,minVersion:A,boostLevel:N,includeMargin:E,marginSize:R,imageSettings:M,size:y});sn.useEffect(()=>{if(F.current!=null){const Ee=F.current,J=Ee.getContext("2d");if(!J)return;let Ve=te;const ye=q.current,he=Le!=null&&ye!==null&&ye.complete&&ye.naturalHeight!==0&&ye.naturalWidth!==0;he&&Le.excavation!=null&&(Ve=nx(te,Le.excavation));const De=window.devicePixelRatio||1;Ee.height=Ee.width=y*De;const ce=y/ke*De;J.scale(ce,ce),J.fillStyle=S,J.fillRect(0,0,ke,ke),J.fillStyle=v,db?J.fill(new Path2D(tx(Ve,le))):te.forEach(function(Z,G){Z.forEach(function(we,be){we&&J.fillRect(be+le,G+le,1,1)})}),Le&&(J.globalAlpha=Le.opacity),he&&J.drawImage(ye,Le.x+le,Le.y+le,Le.w,Le.h)}}),sn.useEffect(()=>{X(!1)},[W]);const Se=lf({height:y,width:y},j);let Ne=null;return W!=null&&(Ne=sn.createElement("img",{src:W,key:W,style:{display:"none"},onLoad:()=>{X(!0)},ref:q,crossOrigin:Le==null?void 0:Le.crossOrigin})),sn.createElement(sn.Fragment,null,sn.createElement("canvas",lf({style:Se,height:y,width:y,ref:ee,role:"img"},U)),Ne)});fb.displayName="QRCodeCanvas";var sh=sn.forwardRef(function(o,a){const f=o,{value:p,size:y=Kg,level:w=$g,bgColor:S=qg,fgColor:v=Qg,includeMargin:E=Jg,minVersion:A=ex,boostLevel:N,title:R,marginSize:M,imageSettings:L}=f,B=cf(f,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:j,cells:U,numCells:W,calculatedImageSettings:F}=rx({value:p,level:w,minVersion:A,boostLevel:N,includeMargin:E,marginSize:M,imageSettings:L,size:y});let q=U,ee=null;L!=null&&F!=null&&(F.excavation!=null&&(q=nx(U,F.excavation)),ee=sn.createElement("image",{href:L.src,height:F.h,width:F.w,x:F.x+j,y:F.y+j,preserveAspectRatio:"none",opacity:F.opacity,crossOrigin:F.crossOrigin}));const re=tx(q,j);return sn.createElement("svg",lf({height:y,width:y,viewBox:`0 0 ${W} ${W}`,ref:a,role:"img"},B),!!R&&sn.createElement("title",null,R),sn.createElement("path",{fill:S,d:`M0,0 h${W}v${W}H0z`,shapeRendering:"crispEdges"}),sn.createElement("path",{fill:v,d:re,shapeRendering:"crispEdges"}),ee)});sh.displayName="QRCodeSVG";const hb=({player:r})=>x.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"350px",height:"500px",margin:"0 auto",position:"relative"},children:r!=null&&r.image_data?x.jsxs("div",{style:{position:"relative",width:"350px",height:"450px"},children:[x.jsx("img",{src:`data:image/jpeg;base64,${r.image_data}`,alt:r.name,style:{width:"350px",height:"450px",objectFit:"cover",borderRadius:"50px",boxShadow:"0 6px 12px rgba(0, 0, 0, 0.3)",margin:"auto",display:"block"},onError:o=>{console.error("Image failed to load:",o),o.target.style.display="none"}}),x.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",backgroundColor:"#144dff",color:"white",padding:"12px 0",borderBottomLeftRadius:"50px",borderBottomRightRadius:"50px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",fontFamily:"Helvetica, Arial, sans-serif",boxShadow:"0 -4px 10px rgba(0, 0, 0, 0.1)",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.2)"},children:r.name})]}):x.jsxs("div",{style:{width:"350px",height:"450px",backgroundColor:"#f0f0f0",borderRadius:"50px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"relative"},children:[x.jsx("p",{style:{marginBottom:"60px"},children:"No image available"}),x.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",backgroundColor:"#144dff",color:"white",padding:"12px 0",borderBottomLeftRadius:"50px",borderBottomRightRadius:"50px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",fontFamily:"Helvetica, Arial, sans-serif",boxShadow:"0 -4px 10px rgba(0, 0, 0, 0.1)",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.2)"},children:r.name})]})});var Hp=typeof window>"u"?I.useEffect:I.useLayoutEffect,pb=({isPlaying:r,duration:o,startAt:a=0,updateInterval:f=0,onComplete:p,onUpdate:y})=>{let[w,S]=I.useState(a),v=I.useRef(0),E=I.useRef(a),A=I.useRef(a*-1e3),N=I.useRef(null),R=I.useRef(null),M=I.useRef(null),L=U=>{let W=U/1e3;if(R.current===null){R.current=W,N.current=requestAnimationFrame(L);return}let F=W-R.current,q=v.current+F;R.current=W,v.current=q;let ee=E.current+(f===0?q:(q/f|0)*f),re=E.current+q,X=typeof o=="number"&&re>=o;S(X?o:ee),X||(N.current=requestAnimationFrame(L))},B=()=>{N.current&&cancelAnimationFrame(N.current),M.current&&clearTimeout(M.current),R.current=null},j=I.useCallback(U=>{B(),v.current=0;let W=typeof U=="number"?U:a;E.current=W,S(W),r&&(N.current=requestAnimationFrame(L))},[r,a]);return Hp(()=>{if(y==null||y(w),o&&w>=o){A.current+=o*1e3;let{shouldRepeat:U=!1,delay:W=0,newStartAt:F}=(p==null?void 0:p(A.current/1e3))||{};U&&(M.current=setTimeout(()=>j(F),W*1e3))}},[w,o]),Hp(()=>(r&&(N.current=requestAnimationFrame(L)),B),[r,o,f]),{elapsedTime:w,reset:j}},mb=(r,o,a)=>{let f=r/2,p=o/2,y=f-p,w=2*y,S=a==="clockwise"?"1,0":"0,1",v=2*Math.PI*y;return{path:`m ${f},${p} a ${y},${y} 0 ${S} 0,${w} a ${y},${y} 0 ${S} 0,-${w}`,pathLength:v}},Gp=(r,o)=>r===0||r===o?0:typeof o=="number"?r-o:0,gb=r=>({position:"relative",width:r,height:r}),xb={display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,top:0,width:"100%",height:"100%"},ix=(r,o,a,f,p)=>{if(f===0)return o;let y=(p?f-r:r)/f;return o+a*y},Xp=r=>{var o,a;return(a=(o=r.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(f,p,y,w)=>`#${p}${p}${y}${y}${w}${w}`).substring(1).match(/.{2}/g))==null?void 0:o.map(f=>parseInt(f,16)))!=null?a:[]},yb=(r,o)=>{var a;let{colors:f,colorsTime:p,isSmoothColorTransition:y=!0}=r;if(typeof f=="string")return f;let w=(a=p==null?void 0:p.findIndex((R,M)=>R>=o&&o>=p[M+1]))!=null?a:-1;if(!p||w===-1)return f[0];if(!y)return f[w];let S=p[w]-o,v=p[w]-p[w+1],E=Xp(f[w]),A=Xp(f[w+1]),N=!!r.isGrowing;return`rgb(${E.map((R,M)=>ix(S,R,A[M]-R,v,N)|0).join(",")})`},wb=r=>{let{duration:o,initialRemainingTime:a,updateInterval:f,size:p=180,strokeWidth:y=12,trailStrokeWidth:w,isPlaying:S=!1,isGrowing:v=!1,rotation:E="clockwise",onComplete:A,onUpdate:N}=r,R=I.useRef(),M=Math.max(y,w??0),{path:L,pathLength:B}=mb(p,M,E),{elapsedTime:j}=pb({isPlaying:S,duration:o,startAt:Gp(o,a),updateInterval:f,onUpdate:typeof N=="function"?W=>{let F=Math.ceil(o-W);F!==R.current&&(R.current=F,N(F))}:void 0,onComplete:typeof A=="function"?W=>{var F;let{shouldRepeat:q,delay:ee,newInitialRemainingTime:re}=(F=A(W))!=null?F:{};if(q)return{shouldRepeat:q,delay:ee,newStartAt:Gp(o,re)}}:void 0}),U=o-j;return{elapsedTime:j,path:L,pathLength:B,remainingTime:Math.ceil(U),rotation:E,size:p,stroke:yb(r,U),strokeDashoffset:ix(j,0,B,o,v),strokeWidth:y}},oh=r=>{let{children:o,strokeLinecap:a,trailColor:f,trailStrokeWidth:p}=r,{path:y,pathLength:w,stroke:S,strokeDashoffset:v,remainingTime:E,elapsedTime:A,size:N,strokeWidth:R}=wb(r);return sn.createElement("div",{style:gb(N)},sn.createElement("svg",{viewBox:`0 0 ${N} ${N}`,width:N,height:N,xmlns:"http://www.w3.org/2000/svg"},sn.createElement("path",{d:y,fill:"none",stroke:f??"#d9d9d9",strokeWidth:p??R}),sn.createElement("path",{d:y,fill:"none",stroke:S,strokeLinecap:a??"round",strokeWidth:R,strokeDasharray:w,strokeDashoffset:v})),typeof o=="function"&&sn.createElement("div",{style:xb},o({remainingTime:E,elapsedTime:A,color:S})))};oh.displayName="CountdownCircleTimer";const vb=({onComplete:r})=>{const[o,a]=I.useState(7),[f,p]=I.useState(!1),y=I.useRef(null),w=I.useRef(null);I.useEffect(()=>(y.current&&clearTimeout(y.current),w.current&&clearInterval(w.current),w.current=setInterval(()=>{p(!0),y.current=setTimeout(()=>{a(v=>v<=1?(w.current&&clearInterval(w.current),y.current&&clearTimeout(y.current),r&&r(),0):v-1),p(!1)},500)},1e3),()=>{w.current&&clearInterval(w.current),y.current&&clearTimeout(y.current)}),[r]);const S=f?"pop-burst":"";return x.jsx("div",{className:"lobby-countdown-overlay",children:x.jsxs("div",{className:`lobby-countdown-container ${S}`,children:[x.jsx("div",{className:"lobby-countdown-number",children:o}),x.jsx("div",{className:"lobby-countdown-text",children:o>0?"Get ready!":"Starting..."})]})})},Cb=({onComplete:r,lobbyCode:o="this"})=>{const{userProfile:a}=I.useContext(Xn),[f,p]=I.useState(0),[y,w]=I.useState(!1),[S,v]=I.useState(!1),[E,A]=I.useState([0]),[N,R]=I.useState(!1),M=I.useRef(null),L=I.useRef(null),B=[{image:"/assets/how_to_tutorial_updated_slide1.svg",duration:2e3,animatedText:"Find your match using their profile picture!"},{image:"/assets/how_to_pt2_2.svg",duration:4e3,animatedText:"Raise volume to the max, to know when you have a match!"},{image:"/assets/how_to_tutorial_updated_slide3.svg",duration:4e3,animatedText:"Tap leave to stop being paired/take a break"}];return I.useEffect(()=>{const j=()=>{if(f>=B.length-1){clearInterval(M.current),r&&r();return}w(!0);const U=f+1;A([f,U]),L.current=setTimeout(()=>{R(!1),p(U),w(!1),setTimeout(()=>{A([U]),v(!0),B[U].animatedText&&R(!0)},500)},500)};return M.current=setInterval(j,B[f].duration),v(!0),f===0&&B[0].animatedText&&R(!0),()=>{M.current&&clearInterval(M.current),L.current&&clearTimeout(L.current)}},[f,B.length,r]),x.jsx("div",{className:"tutorial-overlay",children:x.jsxs("div",{className:"tutorial-container",children:[E.map(j=>x.jsxs("div",{className:`tutorial-slide ${j===f?"current":j<f?"previous":"next"}`,children:[j===f&&B[j].animatedText&&N&&x.jsx("div",{className:"animated-text pop-burst",children:B[j].animatedText}),j===1&&x.jsx("div",{className:"volume-arrow-container",children:x.jsx("svg",{className:"volume-arrow",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:x.jsx("path",{d:"M19 12H5M5 12L12 5M5 12L12 19",stroke:"#144dff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),x.jsx("div",{className:`tutorial-image-container ${j===0?"first-slide":""}`,children:x.jsx("img",{src:B[j].image,alt:`Tutorial step ${j+1}`,className:"tutorial-image"})}),x.jsx("div",{className:`tutorial-text ${S&&j===f?"text-animate":""}`,children:B[j].text})]},j)),x.jsx("div",{className:"tutorial-progress-bar-container",children:x.jsx("div",{className:"tutorial-progress-bar",children:x.jsx("div",{className:"tutorial-progress-bar-fill"})})})]})})},Eb=({isVisible:r,onAnimationEnd:o})=>{const[a,f]=I.useState(!1),p=I.useRef(null);return I.useEffect(()=>(p.current&&clearTimeout(p.current),r?(f(!0),p.current=setTimeout(()=>{f(!1),o&&o()},3e3)):f(!1),()=>{p.current&&(clearTimeout(p.current),p.current=null)}),[r,o]),a?x.jsxs("div",{className:"match-overlay",children:[x.jsxs("div",{className:"confetti-container",children:[[...Array(50)].map((y,w)=>x.jsx("div",{className:`confetti confetti-${w%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":Math.random()*.2}},`first-${w}`)),[...Array(50)].map((y,w)=>x.jsx("div",{className:`confetti confetti-${w%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":`${.6+Math.random()*.2}s`}},`second-${w}`))]}),x.jsx("div",{className:"match-text",children:"It's a Match!"})]}):null},bb=({isVisible:r,onAnimationEnd:o})=>{const[a,f]=I.useState(!1),p=I.useRef(null);return I.useEffect(()=>(p.current&&clearTimeout(p.current),r?(f(!0),p.current=setTimeout(()=>{f(!1),o&&o()},1800)):f(!1),()=>{p.current&&(clearTimeout(p.current),p.current=null)}),[r,o]),a?x.jsxs("div",{className:"ready-overlay",children:[x.jsxs("div",{className:"confetti-container",children:[[...Array(50)].map((y,w)=>x.jsx("div",{className:`confetti confetti-${w%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":Math.random()*.2}},`first-${w}`)),[...Array(50)].map((y,w)=>x.jsx("div",{className:`confetti confetti-${w%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":`${.6+Math.random()*.2}s`}},`second-${w}`))]}),x.jsx("div",{className:"ready-text",children:"You're ready!"})]}):null},ah=({size:r=60,fullScreen:o=!1})=>o?x.jsx("div",{className:"loading-spinner-fullscreen",children:x.jsx("div",{className:"loading-spinner",style:{width:r,height:r},children:x.jsx("div",{className:"loading-spinner-inner"})})}):x.jsx("div",{className:"loading-spinner",style:{width:r,height:r},children:x.jsx("div",{className:"loading-spinner-inner"})}),lc=9,Sb=5,Ab=5e3,Tb=!1,Ib=()=>{const r=Math.floor(540),[o,a]=I.useState([]),[f,p]=I.useState("self"),[y,w]=I.useState(!1),[S,v]=I.useState(""),E=I.useRef(null),A=I.useRef(null),[N,R]=I.useState(!1),M=I.useRef(!1),[L,B]=I.useState(!1),{loadSound:j,seekTo:U,cancelSound:W,checkSound:F,soundEnabled:q,setSoundEnabled:ee,isPlaying:re}=Ef(),[X,le]=I.useState("yonder"),te=Pn(),{code:ke}=cy(),[Le,Se]=I.useState(null);Xg(Se,null,X);const{user:Ne,userProfile:Ee,checkAuth:J,permissions:Ve,isAuthLoading:ye}=I.useContext(Xn);I.useEffect(()=>{if(!ye&&!Ne){const it=new URLSearchParams(window.location.search).get("code")||ke;te(it?`/signup?redirect=lobby&code=${it}`:"/signup?redirect=lobby")}},[ye,Ne,te,ke]),I.useEffect(()=>{(()=>{const gt=new URLSearchParams(window.location.search).get("code")||ke;if(gt){le(gt),ZE(gt),an(gt);const Xe=`hasSeenTutorial_${gt}`,Zt=localStorage.getItem(Xe),Nt=!!localStorage.getItem("access_token");console.log("Tutorial check:",{codeParam:gt,lobbyTutorialKey:Xe,hasSeenLobbyTutorial:Zt,isAuthenticated:Nt}),!Zt&&Nt&&(Kr(!0),localStorage.setItem(Xe,"true"))}})()},[ke]);const[he,De]=I.useState(null),[ce,Z]=I.useState(null),[G,we]=I.useState(null),[be,ge]=I.useState(null),[ie,ze]=I.useState(null),ve=I.useRef(!1),Be=I.useRef(null),nt=I.useRef(null),[Ae,pe]=I.useState(null),[xe,He]=I.useState(null),[Ze,Rt]=I.useState(null),[wt,$e]=I.useState(null),[Je,qt]=I.useState(!0),je=I.useRef(0),[Wt,nr]=I.useState(null),[Ue,kt]=I.useState(null),[ut,jt]=I.useState([]),[Ke,Ht]=I.useState([]),[St,qe]=I.useState(!document.hidden),mt=I.useRef("yonder"),_e=I.useRef({}),me=I.useRef([]),[ct,et]=I.useState(!1),ft=I.useRef(null),[Yt,In]=I.useState(!1);I.useEffect(()=>{mt.current=X},[X]);async function on(Ge,it){const Xe=await(await It("/set_profile_info",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tags_work:Ge,tags_desiring_work:it})})).json();console.log("SET PROFILE INFO:",Xe)}const at=async Ge=>{if(Ge.length!==0){et(!0);try{const it=await It("/load_batch_pfp_small_icons",{method:"POST",headers:{"Content-Type":"application/json",lobby_code:mt.current},body:JSON.stringify({usernames:Ge})});if(it.ok){const gt=await it.json();_e.current={..._e.current,...gt},console.log("Profile images fetched:",Object.keys(gt))}else console.error("Failed to fetch profile images:",it.status)}catch(it){console.error("Error fetching profile images:",it)}finally{et(!1)}}},an=async Ge=>{try{const it=await It("/lobby_setup_data",{headers:{lobby_code:Ge}});if(it.ok){const gt=await it.json();gt.logo_icon?(ft.current=gt.logo_icon,In(!0),console.log("Sponsor logo loaded successfully")):console.log("No sponsor logo available for this lobby")}else console.error("Failed to fetch lobby setup data:",it.status)}catch(it){console.error("Error fetching lobby setup data:",it)}};async function Es(){try{W(),_e.current={},me.current=[],(await It("/disconnect_lobby",{headers:{lobby_code:X}})).ok&&te("/")}catch(Ge){console.error("Error disconnecting from lobby:",Ge),te("/")}finally{W(),te("/"),console.log("finally")}}const[bs,Yn]=I.useState(!1),[Wi,Cn]=I.useState(null),xr=I.useRef(!1),[Ci,On]=I.useState(!1),[Ei,rr]=I.useState(null),Ss=(Ge,it)=>{if(!Ge||!it)return null;for(const gt of Ge.tags_work)if(it.desiring_tags_work.includes(gt)){for(const Xe of it.tags_work)if(Ge.desiring_tags_work.includes(Xe))return{playerTag:gt,opponentTag:Xe}}return null};async function tn(){try{je.current+=1,je.current>5&&(je.current=0,ve.current=!1);const Ge=!document.hidden,it=mt.current;if(console.log("lobby code fr:",it),it=="yonder"){console.log("lobby code is not set");return}const gt=await It(`/lobby?is_visible=${Ge}`,{headers:{is_visible_t_f:Ge?"t":"f",lobby_code:it}});if(gt.ok){const Xe=await gt.json();if(console.log("LOBBY PAIR DATA:",it,Xe),Xe.status=="inactive"){W(),te("/post-event-auth");return}Xe.lobby_state!=="terminated"&&QE(),we(Xe.opponent_name),Xe.opponent_name==null&&De(null),a(Xe.custom_tags),pe(Xe.lobby_state),$e(Xe.lobby_duration);const Zt=typeof Xe.round_time_left=="number"&&!isNaN(Xe.round_time_left)?Xe.round_time_left:0;console.log("Timer Debug:",{roundDuration:Xe.lobby_duration,timeLeft:Zt,lobbyState:Xe.lobby_state,usingDefaultDuration:!Xe.lobby_duration}),Be.current=Zt,nt.current=Xe.beat_go_off,He(Math.floor(Zt));const Nt=Math.floor(Zt/60),Ts=Math.floor(Zt%60);Rt(`${Nt}:${Ts.toString().padStart(2,"0")}`),ze(Xe.table_number),Xe.player_tags!=null&&Xe.player_tags.tags_work!=null&&jt(Xe.player_tags.tags_work),Xe.player_tags!=null&&Xe.player_tags.desiring_tags_work!=null&&Ht(Xe.player_tags.desiring_tags_work),Be.current!=null&&Xe.lobby_state=="active"&&Be.current!=0&&(U(r-Be.current),console.log("seeking to",r-Be.current));const Ce=await It(`/display_lobby_metadata?lobby_code=${it}`,{headers:{lobby_code:it}});if(Ce.ok){const vr=await Ce.json();Se(vr.player_count);const Bt=vr.usernames||[];if(JSON.stringify(me.current)!==JSON.stringify(Bt)){me.current=Bt;const Gi=Bt.filter(Pt=>!_e.current[Pt]&&Pt!==(Ne==null?void 0:Ne.username));Gi.length>0&&(Tb||(console.log("Fetching images for new users:",Gi),at(Gi)))}}if((G!=Xe.opponent_name||he==null)&&!ve.current&&Xe.opponent_name!=null){ve.current=!0,console.log("fetching profile");const vr=await It("/paired_player_profile");if(vr.ok){const Bt=await vr.json();De(Bt),console.log("profile fetched:",Bt.name)}else console.log("profile fetch failed");ve.current=!1}if(Wi==="interrim"&&Xe.lobby_state==="active"&&Xe.opponent_name&&!xr.current){console.log("Checking for matches...");const vr=Ss(Xe.player_tags,Xe.opponent_tags);vr&&(console.log("Match found! Setting animation and banner...",vr),rr(vr),On(!0),xr.current=!0,Yn(!0))}Cn(Xe.lobby_state)}}catch(Ge){console.error("Error fetching lobby data:",Ge)}}I.useEffect(()=>{F()?ee(!0):ee(!1);const Ge=setInterval(async()=>{tn()},Ab);return()=>clearInterval(Ge)},[]),I.useEffect(()=>{const Ge=setTimeout(tn,1e3);return()=>clearTimeout(Ge)},[Ae,X]),I.useEffect(()=>{const Ge=()=>{const it=!document.hidden;it&&!St&&(console.log("Page became visible - fetching latest data"),tn()),qe(it)};return document.addEventListener("visibilitychange",Ge),()=>{document.removeEventListener("visibilitychange",Ge)}},[St]);const yr=()=>x.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.125)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},children:x.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",position:"relative",minWidth:"300px"},children:[x.jsx("button",{onClick:()=>qt(!1),style:{color:"#144fff",position:"absolute",right:"10px",top:"10px",border:"none",background:"none",fontSize:"2px",cursor:"pointer"},children:"X"}),x.jsx("h2",{style:{marginTop:"5px"},children:"The Sound is Important"}),x.jsx("h3",{style:{marginTop:"5px"},children:"Raise your volume also"}),x.jsx("p",{style:{color:"#144dff"},children:"You'll need this for the best experience."}),x.jsx("button",{onClick:()=>{j(),qt(!1)},style:{padding:"10px 20px",marginTop:"20px",backgroundColor:"#144dff",color:"#ffffff",border:"none",borderRadius:"14px",fontWeight:"bold",cursor:"pointer"},children:"Enable Sound"})]})}),Nn=(Ge,it)=>{Wt==null&&nr(ut),Ue==null&&kt(Ke);const gt=Ge==="self"?Wt:Ue;if(!(gt!=null&&gt.includes(it))&&(gt==null?void 0:gt.length)>=Sb){v("Reached tag limit for this section"),setTimeout(()=>{var Zt;(Zt=A.current)==null||Zt.scrollIntoView({behavior:"smooth",block:"center"})},100),setTimeout(()=>{v("")},3e3);return}Ge==="self"?nr(Zt=>Zt.includes(it)?Zt.filter(Nt=>Nt!==it):[...Zt,it]):kt(Zt=>Zt.includes(it)?Zt.filter(Nt=>Nt!==it):[...Zt,it])},We=()=>{Wt!=null&&(on(Wt,Ue||[]),setTimeout(()=>{jt(Wt||[])},800)),p("desiring"),setTimeout(()=>{var Ge;(Ge=E.current)==null||Ge.scrollIntoView({behavior:"smooth",block:"start"})},100)},li=()=>{Ue!=null&&(on(Wt||[],Ue),setTimeout(()=>{jt(Wt||[]),Ht(Ue)},800),setTimeout(()=>{M.current||(M.current=!0,R(!0),B(!0))},500)),window.scrollTo({top:0,behavior:"smooth"})},[As,Mn]=I.useState(!1);I.useEffect(()=>{if(Ae==="interrim")Mn(!0);else if(Ae==="active"){const Ge=setTimeout(()=>{Mn(!1)},1e3);return()=>clearTimeout(Ge)}},[Ae]);const ir=()=>{console.log("Lobby countdown animation completed")},[bi,Kr]=I.useState(!1),wr=()=>{Kr(!1)};I.useEffect(()=>{(Ae!=="active"||!he)&&(On(!1),rr(null))},[Ae,he]),I.useEffect(()=>{Ae==="terminated"&&(_e.current={},me.current=[],Tc())},[Ae]);const Hi=I.useRef(null);return I.useEffect(()=>{var Ge;!y&&!(ut!=null&&ut.length)&&!(Ke!=null&&Ke.length)&&(o==null?void 0:o.length)>0&&((Ge=Hi.current)==null||Ge.scrollIntoView({behavior:"smooth"}),w(!0))},[ut,Ke,o,y]),ye?x.jsx(ah,{fullScreen:!0}):x.jsxs("div",{className:"lobby-container",children:[x.jsxs("div",{className:"lobby-content",children:[x.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0",marginTop:"-1.5rem"},children:x.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",style:{maxWidth:"85px",height:"auto",objectFit:"contain"}})}),(Ae==="checkin"||Ae==="active"&&!he||Ae==="interrim")&&x.jsx("div",{className:"user-profile-container",children:x.jsxs("div",{className:"user-profile",children:[x.jsx("img",{src:Ee!=null&&Ee.image_data?`data:image/jpeg;base64,${Ee.image_data}`:"/assets/avatar_3.png",alt:"Your Profile",className:"user-profile-picture"}),x.jsx("div",{className:"user-profile-glow"})]})}),x.jsx("div",{className:"lobby-header",style:{marginTop:"-50px"},children:x.jsx("h2",{children:o.length>0&&(ut.length==0||Ke.length==0)?x.jsxs(x.Fragment,{children:["You're not ready, complete your profile to get matched up.",x.jsx("button",{className:"missing-tags-button",onClick:()=>{var Ge;return(Ge=Hi.current)==null?void 0:Ge.scrollIntoView({behavior:"smooth"})},children:"Complete Profile"})]}):Ae==="active"&&he?x.jsxs("span",{className:"lobby-pop-burst",children:["Go find ",he.name,"!"]}):Ae==="checkin"?x.jsxs(x.Fragment,{children:["Wait here ",Ee.name.slice(0,15),".",x.jsx("br",{}),"Your host will start the experience."]}):Ae==="active"&&!he?"You will be paired with someone in the next round.":Ae==="interrim"?"Get ready for the next round!":Ae==="terminated"?"This session has ended. Thank you for participating!":""})},Ae),Ae==="active"&&he&&ie&&x.jsx("div",{className:"table-number",children:x.jsxs("h3",{children:["at table: ",ie]})}),(ft.current||Ae!=="checkin")&&x.jsxs("div",{className:`timer-sponsor-container ${ft.current&&Ae!=="checkin"?"has-timer":""}`,children:[ft.current&&x.jsx("div",{className:"sponsor-logo",children:x.jsx("img",{src:`data:image/jpeg;base64,${ft.current}`,alt:"Sponsor Logo",style:{width:"100px",height:"100px",objectFit:"contain"}})}),Ae!=="checkin"&&x.jsx("div",{className:"time-left",style:{display:"flex",flexDirection:"column",alignItems:"center",background:"white"},children:(Ae==="active"||Ae==="interrim")&&xe?x.jsxs(x.Fragment,{children:[x.jsx(oh,{isPlaying:Ae==="active",duration:wt||300,initialRemainingTime:xe||0,colors:["#144dff"],size:90,strokeWidth:12,trailColor:"#f5f7ff",onComplete:()=>(tn(),{shouldRepeat:!1}),children:({remainingTime:Ge})=>{const it=typeof Ge=="number"&&!isNaN(Ge)?Ge:0,gt=Math.floor(it/60),Xe=Math.floor(it%60);return x.jsxs("span",{style:{fontSize:".95rem",color:"#144dff",fontWeight:600},children:[gt,":",String(Xe).padStart(2,"0")]})}},`${Ae}-${xe}`),x.jsx("span",{style:{fontWeight:700,fontSize:"0.7em",marginTop:"4px",opacity:"1",color:"#144dff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.1)"},children:"round time left"})]}):x.jsx("span",{className:"time-left-text"})})]}),Ci&&Ei&&Ae==="active"&&he&&x.jsxs("div",{className:"match-banner",children:[x.jsx("span",{className:"match-tag",children:Ei.playerTag}),x.jsx("div",{className:"match-arrow"}),x.jsx("span",{className:"match-tag",children:Ei.opponentTag})]}),x.jsx("div",{style:{display:"flex",justifyContent:"center",width:"100%",margin:"0 auto"},children:Ae==="active"||Ae==="interrim"?he?x.jsx("div",{style:{marginTop:"-3rem",width:"100%",display:"flex",justifyContent:"center"},children:x.jsx(hb,{player:he})}):x.jsx(x.Fragment,{}):Ae==="terminated"?x.jsx("div",{className:"status-message",children:x.jsxs("h2",{children:["This session has ended.",x.jsx("br",{}),"Thank you for participating!"]})}):null}),(Ae==="checkin"||Ae==="active"&&!he)&&Le!==null&&x.jsx("div",{className:"player-count-container",children:x.jsxs("div",{className:"player-count-widget",children:[x.jsxs("div",{className:"player-count-icon",children:[x.jsx("div",{className:"icon-pulse"}),x.jsx("img",{src:"/assets/players_display_icon2.png",alt:"Players in lobby",className:"player-count-img"})]}),x.jsxs("div",{className:"player-count-info",children:[x.jsx("span",{className:"player-count-number",children:Le}),x.jsx("span",{className:"player-count-label",children:"joined"})]}),x.jsx("div",{className:"player-count-lobby",children:X})]})}),(Ae==="checkin"||Ae==="active"&&!he)&&x.jsx("div",{className:"lobby-profiles-container",children:x.jsx("div",{className:"lobby-profiles-grid",children:Le>0?x.jsxs(x.Fragment,{children:[Array.from({length:Math.min(Le,lc)}).map((Ge,it)=>{let gt;{const Zt=me.current[it];Zt&&_e.current[Zt]?gt=`data:image/jpeg;base64,${_e.current[Zt]}`:gt="/assets/avatar_8.png"}return x.jsxs("div",{className:`profile-icon-wrapper ${it===Math.min(Le,lc)-1?"pop-in":""}`,children:[x.jsx("img",{src:gt,alt:`Profile ${it+1}`,className:"profile-icon",loading:"lazy"}),x.jsx("div",{className:"profile-icon-glow"})]},`profile-${it}`)}),Le>lc&&x.jsx("div",{className:"profile-icon-wrapper more-profiles",children:x.jsxs("div",{className:"more-profiles-bubble",children:["+",Le-lc]})})]}):x.jsx("div",{children:"No profiles to display"})})}),(Ae==="checkin"||Ae==="active")&&x.jsxs("div",{className:"selected-tags-container",children:[ut&&ut.length>0&&x.jsxs("div",{className:"tag-category",children:[x.jsx("h4",{children:"I am:"}),x.jsx("div",{className:"tag-list",children:ut.map(Ge=>x.jsx("span",{className:"tag-item",children:Ge},`self-${Ge}`))})]}),Ke&&Ke.length>0&&x.jsxs("div",{className:"tag-category",children:[x.jsx("h4",{children:"Looking for:"}),x.jsx("div",{className:"tag-list",children:Ke.map(Ge=>x.jsx("span",{className:"tag-item",children:Ge},`desiring-${Ge}`))})]})]}),x.jsx("button",{className:"leave-lobby-button",onClick:Es,children:"Take a Break"}),x.jsx("button",{className:"how-to-tutorial-button",onClick:()=>Kr(!0),children:"Tutorial"}),(Ve==="admin"||Ve==="organizer")&&x.jsx("button",{className:"admin-view-button",onClick:()=>te(`/admin_lobby_view?code=${X}`),children:"Manage"}),Array.isArray(o)&&o.length>0&&x.jsx("form",{onSubmit:Ge=>{Ge.preventDefault(),f==="self"?We():li()},children:x.jsxs("div",{className:"tags-section",ref:Hi,children:[x.jsxs("div",{className:"progress-bar-container",children:[x.jsx("div",{className:`self-progress-bar-tab ${f==="self"?"active":""} ${ut.length>0?"complete":""}`,onClick:()=>p("self"),children:" Who are you?"}),x.jsx("div",{className:`desiring-progress-bar-tab ${f==="desiring"?"active":""} ${Ke.length>0?"complete":""}`,onClick:()=>ut.length>0?p("desiring"):null,children:" Who do you want to meet?"})]}),x.jsxs("div",{className:`tag-group ${f==="self"?"active":"hidden"}`,children:[x.jsx("div",{className:"bounce-wrapper",children:x.jsx("h2",{children:"Who are you?"})}),x.jsx("div",{className:"tag-labels-container",children:o.map(Ge=>x.jsxs("label",{className:"tag-label",children:[x.jsx("input",{type:"checkbox",checked:Wt!=null?Wt.includes(Ge):ut.includes(Ge),onChange:()=>Nn("self",Ge)}),Ge]},`self-${Ge}`))})]}),x.jsxs("div",{className:`tag-group ${f==="desiring"?"active":"hidden"}`,ref:E,children:[x.jsx("div",{className:"bounce-wrapper",children:x.jsx("h2",{children:"Who do you want to meet?"})}),x.jsx("div",{className:"tag-labels-container",children:o.map(Ge=>x.jsxs("label",{className:"tag-label",children:[x.jsx("input",{type:"checkbox",checked:Ue!=null?Ue.includes(Ge):Ke.includes(Ge),onChange:()=>Nn("desiring",Ge)}),Ge]},`desiring-${Ge}`))})]}),x.jsx("button",{type:"submit",className:"tag-selection-button",ref:A,children:f==="self"?"Continue":"Save"}),S&&x.jsx("div",{style:{color:"#144dff",textAlign:"center",marginTop:"1rem",fontSize:"0.9rem",fontWeight:"600"},children:S})]})})]}),q||!Je||Ae=="checkin"||Ae==null||re?null:x.jsx(yr,{}),As&&!(o.length>0&&Ke.length===0)&&x.jsx(vb,{onComplete:ir}),bi&&x.jsx(Cb,{onComplete:wr,lobbyCode:X}),x.jsx(Eb,{isVisible:bs,onAnimationEnd:()=>{Yn(!1),xr.current=!1}}),x.jsx(bb,{isVisible:N,onAnimationEnd:()=>{R(!1),M.current=!1}})]})};let Nb={data:""},_b=r=>typeof window=="object"?((r?r.querySelector("#_goober"):window._goober)||Object.assign((r||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:r||Nb,Rb=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,kb=/\/\*[^]*?\*\/|  +/g,Yp=/\n+/g,gs=(r,o)=>{let a="",f="",p="";for(let y in r){let w=r[y];y[0]=="@"?y[1]=="i"?a=y+" "+w+";":f+=y[1]=="f"?gs(w,y):y+"{"+gs(w,y[1]=="k"?"":o)+"}":typeof w=="object"?f+=gs(w,o?o.replace(/([^,])+/g,S=>y.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,v=>/&/.test(v)?v.replace(/&/g,S):S?S+" "+v:v)):y):w!=null&&(y=/^--/.test(y)?y:y.replace(/[A-Z]/g,"-$&").toLowerCase(),p+=gs.p?gs.p(y,w):y+":"+w+";")}return a+(o&&p?o+"{"+p+"}":p)+f},ji={},sx=r=>{if(typeof r=="object"){let o="";for(let a in r)o+=a+sx(r[a]);return o}return r},Pb=(r,o,a,f,p)=>{let y=sx(r),w=ji[y]||(ji[y]=(v=>{let E=0,A=11;for(;E<v.length;)A=101*A+v.charCodeAt(E++)>>>0;return"go"+A})(y));if(!ji[w]){let v=y!==r?r:(E=>{let A,N,R=[{}];for(;A=Rb.exec(E.replace(kb,""));)A[4]?R.shift():A[3]?(N=A[3].replace(Yp," ").trim(),R.unshift(R[0][N]=R[0][N]||{})):R[0][A[1]]=A[2].replace(Yp," ").trim();return R[0]})(r);ji[w]=gs(p?{["@keyframes "+w]:v}:v,a?"":"."+w)}let S=a&&ji.g?ji.g:null;return a&&(ji.g=ji[w]),((v,E,A,N)=>{N?E.data=E.data.replace(N,v):E.data.indexOf(v)===-1&&(E.data=A?v+E.data:E.data+v)})(ji[w],o,f,S),w},Ob=(r,o,a)=>r.reduce((f,p,y)=>{let w=o[y];if(w&&w.call){let S=w(a),v=S&&S.props&&S.props.className||/^go/.test(S)&&S;w=v?"."+v:S&&typeof S=="object"?S.props?"":gs(S,""):S===!1?"":S}return f+p+(w??"")},"");function Fc(r){let o=this||{},a=r.call?r(o.p):r;return Pb(a.unshift?a.raw?Ob(a,[].slice.call(arguments,1),o.p):a.reduce((f,p)=>Object.assign(f,p&&p.call?p(o.p):p),{}):a,_b(o.target),o.g,o.o,o.k)}let ox,uf,df;Fc.bind({g:1});let zi=Fc.bind({k:1});function Mb(r,o,a,f){gs.p=o,ox=r,uf=a,df=f}function Cs(r,o){let a=this||{};return function(){let f=arguments;function p(y,w){let S=Object.assign({},y),v=S.className||p.className;a.p=Object.assign({theme:uf&&uf()},S),a.o=/ *go\d+/.test(v),S.className=Fc.apply(a,f)+(v?" "+v:"");let E=r;return r[0]&&(E=S.as||r,delete S.as),df&&E[0]&&df(S),ox(E,S)}return p}}var Db=r=>typeof r=="function",Nc=(r,o)=>Db(r)?r(o):r,Lb=(()=>{let r=0;return()=>(++r).toString()})(),ax=(()=>{let r;return()=>{if(r===void 0&&typeof window<"u"){let o=matchMedia("(prefers-reduced-motion: reduce)");r=!o||o.matches}return r}})(),Bb=20,lx=(r,o)=>{switch(o.type){case 0:return{...r,toasts:[o.toast,...r.toasts].slice(0,Bb)};case 1:return{...r,toasts:r.toasts.map(y=>y.id===o.toast.id?{...y,...o.toast}:y)};case 2:let{toast:a}=o;return lx(r,{type:r.toasts.find(y=>y.id===a.id)?1:0,toast:a});case 3:let{toastId:f}=o;return{...r,toasts:r.toasts.map(y=>y.id===f||f===void 0?{...y,dismissed:!0,visible:!1}:y)};case 4:return o.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(y=>y.id!==o.toastId)};case 5:return{...r,pausedAt:o.time};case 6:let p=o.time-(r.pausedAt||0);return{...r,pausedAt:void 0,toasts:r.toasts.map(y=>({...y,pauseDuration:y.pauseDuration+p}))}}},xc=[],Qs={toasts:[],pausedAt:void 0},no=r=>{Qs=lx(Qs,r),xc.forEach(o=>{o(Qs)})},jb={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Fb=(r={})=>{let[o,a]=I.useState(Qs),f=I.useRef(Qs);I.useEffect(()=>(f.current!==Qs&&a(Qs),xc.push(a),()=>{let y=xc.indexOf(a);y>-1&&xc.splice(y,1)}),[]);let p=o.toasts.map(y=>{var w,S,v;return{...r,...r[y.type],...y,removeDelay:y.removeDelay||((w=r[y.type])==null?void 0:w.removeDelay)||(r==null?void 0:r.removeDelay),duration:y.duration||((S=r[y.type])==null?void 0:S.duration)||(r==null?void 0:r.duration)||jb[y.type],style:{...r.style,...(v=r[y.type])==null?void 0:v.style,...y.style}}});return{...o,toasts:p}},Vb=(r,o="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:o,ariaProps:{role:"status","aria-live":"polite"},message:r,pauseDuration:0,...a,id:(a==null?void 0:a.id)||Lb()}),Qa=r=>(o,a)=>{let f=Vb(o,r,a);return no({type:2,toast:f}),f.id},mr=(r,o)=>Qa("blank")(r,o);mr.error=Qa("error");mr.success=Qa("success");mr.loading=Qa("loading");mr.custom=Qa("custom");mr.dismiss=r=>{no({type:3,toastId:r})};mr.remove=r=>no({type:4,toastId:r});mr.promise=(r,o,a)=>{let f=mr.loading(o.loading,{...a,...a==null?void 0:a.loading});return typeof r=="function"&&(r=r()),r.then(p=>{let y=o.success?Nc(o.success,p):void 0;return y?mr.success(y,{id:f,...a,...a==null?void 0:a.success}):mr.dismiss(f),p}).catch(p=>{let y=o.error?Nc(o.error,p):void 0;y?mr.error(y,{id:f,...a,...a==null?void 0:a.error}):mr.dismiss(f)}),r};var Ub=(r,o)=>{no({type:1,toast:{id:r,height:o}})},zb=()=>{no({type:5,time:Date.now()})},Ba=new Map,Wb=1e3,Hb=(r,o=Wb)=>{if(Ba.has(r))return;let a=setTimeout(()=>{Ba.delete(r),no({type:4,toastId:r})},o);Ba.set(r,a)},Gb=r=>{let{toasts:o,pausedAt:a}=Fb(r);I.useEffect(()=>{if(a)return;let y=Date.now(),w=o.map(S=>{if(S.duration===1/0)return;let v=(S.duration||0)+S.pauseDuration-(y-S.createdAt);if(v<0){S.visible&&mr.dismiss(S.id);return}return setTimeout(()=>mr.dismiss(S.id),v)});return()=>{w.forEach(S=>S&&clearTimeout(S))}},[o,a]);let f=I.useCallback(()=>{a&&no({type:6,time:Date.now()})},[a]),p=I.useCallback((y,w)=>{let{reverseOrder:S=!1,gutter:v=8,defaultPosition:E}=w||{},A=o.filter(M=>(M.position||E)===(y.position||E)&&M.height),N=A.findIndex(M=>M.id===y.id),R=A.filter((M,L)=>L<N&&M.visible).length;return A.filter(M=>M.visible).slice(...S?[R+1]:[0,R]).reduce((M,L)=>M+(L.height||0)+v,0)},[o]);return I.useEffect(()=>{o.forEach(y=>{if(y.dismissed)Hb(y.id,y.removeDelay);else{let w=Ba.get(y.id);w&&(clearTimeout(w),Ba.delete(y.id))}})},[o]),{toasts:o,handlers:{updateHeight:Ub,startPause:zb,endPause:f,calculateOffset:p}}},Xb=zi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Yb=zi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Zb=zi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Kb=Cs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Xb} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Yb} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${r=>r.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Zb} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,$b=zi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,qb=Cs("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${r=>r.secondary||"#e0e0e0"};
  border-right-color: ${r=>r.primary||"#616161"};
  animation: ${$b} 1s linear infinite;
`,Qb=zi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Jb=zi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,eS=Cs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Qb} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Jb} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${r=>r.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,tS=Cs("div")`
  position: absolute;
`,nS=Cs("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,rS=zi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,iS=Cs("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${rS} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,sS=({toast:r})=>{let{icon:o,type:a,iconTheme:f}=r;return o!==void 0?typeof o=="string"?I.createElement(iS,null,o):o:a==="blank"?null:I.createElement(nS,null,I.createElement(qb,{...f}),a!=="loading"&&I.createElement(tS,null,a==="error"?I.createElement(Kb,{...f}):I.createElement(eS,{...f})))},oS=r=>`
0% {transform: translate3d(0,${r*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,aS=r=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${r*-150}%,-1px) scale(.6); opacity:0;}
`,lS="0%{opacity:0;} 100%{opacity:1;}",cS="0%{opacity:1;} 100%{opacity:0;}",uS=Cs("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,dS=Cs("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,fS=(r,o)=>{let a=r.includes("top")?1:-1,[f,p]=ax()?[lS,cS]:[oS(a),aS(a)];return{animation:o?`${zi(f)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${zi(p)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},hS=I.memo(({toast:r,position:o,style:a,children:f})=>{let p=r.height?fS(r.position||o||"top-center",r.visible):{opacity:0},y=I.createElement(sS,{toast:r}),w=I.createElement(dS,{...r.ariaProps},Nc(r.message,r));return I.createElement(uS,{className:r.className,style:{...p,...a,...r.style}},typeof f=="function"?f({icon:y,message:w}):I.createElement(I.Fragment,null,y,w))});Mb(I.createElement);var pS=({id:r,className:o,style:a,onHeightUpdate:f,children:p})=>{let y=I.useCallback(w=>{if(w){let S=()=>{let v=w.getBoundingClientRect().height;f(r,v)};S(),new MutationObserver(S).observe(w,{subtree:!0,childList:!0,characterData:!0})}},[r,f]);return I.createElement("div",{ref:y,className:o,style:a},p)},mS=(r,o)=>{let a=r.includes("top"),f=a?{top:0}:{bottom:0},p=r.includes("center")?{justifyContent:"center"}:r.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:ax()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${o*(a?1:-1)}px)`,...f,...p}},gS=Fc`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,cc=16,_c=({reverseOrder:r,position:o="top-center",toastOptions:a,gutter:f,children:p,containerStyle:y,containerClassName:w})=>{let{toasts:S,handlers:v}=Gb(a);return I.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:cc,left:cc,right:cc,bottom:cc,pointerEvents:"none",...y},className:w,onMouseEnter:v.startPause,onMouseLeave:v.endPause},S.map(E=>{let A=E.position||o,N=v.calculateOffset(E,{reverseOrder:r,gutter:f,defaultPosition:o}),R=mS(A,N);return I.createElement(pS,{id:E.id,key:E.id,onHeightUpdate:v.updateHeight,className:E.visible?gS:"",style:R},E.type==="custom"?Nc(E.message,E):p?p(E):I.createElement(hS,{toast:E,position:A}))}))},Rn=mr;const Od=({direction:r="down",show:o=!0,className:a="",style:f={}})=>{if(!o)return null;const p=r==="down"?"rotate(180 16 16)":"";return x.jsxs("div",{className:`arrow-hint-container ${r} ${a}`,style:f,children:[x.jsx("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"arrow-hint-svg",children:x.jsxs("g",{transform:p,children:[x.jsx("path",{d:"M16 6v16M16 22l-7-7M16 22l7-7",stroke:"url(#arrow-gradient)",strokeWidth:"3.2",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#arrow-glow)"}),x.jsxs("defs",{children:[x.jsxs("linearGradient",{id:"arrow-gradient",x1:"16",y1:"6",x2:"16",y2:"22",gradientUnits:"userSpaceOnUse",children:[x.jsx("stop",{stopColor:"#7f5fff"}),x.jsx("stop",{offset:"0.5",stopColor:"#2e8bff"}),x.jsx("stop",{offset:"1",stopColor:"#00e0ff"})]}),x.jsx("filter",{id:"arrow-glow",x:"-10",y:"-10",width:"52",height:"52",filterUnits:"userSpaceOnUse",children:x.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"2.5",floodColor:"#7f5fff",floodOpacity:"0.5"})})]})]})}),x.jsx("div",{className:"arrow-hint-text",children:"Tap Here"})]})},xS=({isOpen:r,onClose:o,onConfirm:a,userName:f})=>r?x.jsx("div",{className:"kick-modal",children:x.jsxs("div",{className:"kick-modal-content",children:[x.jsx("h2",{className:"kick-modal-title",children:"Kick User"}),x.jsxs("p",{className:"kick-modal-message",children:["Are you sure you want to kick ",f," from the lobby?"]}),x.jsxs("div",{className:"kick-modal-actions",children:[x.jsx("button",{onClick:a,className:"admin-button admin-button-danger",children:"Yes, Kick User"}),x.jsx("button",{onClick:o,className:"admin-button admin-button-primary",children:"Cancel"})]})]})}):null,yS=({isOpen:r,onClose:o,onConfirm:a})=>r?x.jsx("div",{className:"join-modal",children:x.jsxs("div",{className:"join-modal-content",children:[x.jsx("h2",{className:"join-modal-title",children:"Join Lobby"}),x.jsx("p",{className:"join-modal-message",children:"Are you sure you want to join? You will be paired up with your attendees."}),x.jsxs("div",{className:"join-modal-actions",children:[x.jsx("button",{onClick:a,className:"admin-button admin-button-join",children:"Yes, Join Lobby"}),x.jsx("button",{onClick:o,className:"admin-button admin-button-primary",children:"Cancel"})]})]})}):null,cx=(r,o)=>new Promise((a,f)=>{const y=new XMLSerializer().serializeToString(r),w=800,S=1e3,v=document.createElement("canvas");v.width=w,v.height=S;const E=v.getContext("2d");E.fillStyle="#ffffff",E.fillRect(0,0,w,S);const A=new window.Image;A.crossOrigin="anonymous",A.onload=()=>{const N=new window.Image;N.onload=()=>{const B=A.width/A.height*180,j=36,U=28,W=550,F=22,q=182+F,ee=j+F*1.2,re=U+32,X=q+ee,le=re,te=S-X-le,ke=X+(te-W)/2-35,Le=(w-W)/2;let Se=2;const Ne=(w-B)/2;E.drawImage(A,Ne,Se,B,180),Se+=180+F,E.fillStyle="#000000",E.font=`600 ${j}px Helvetica, Arial, sans-serif`,E.textAlign="center",E.textBaseline="top",E.fillText("Scan to join the ice-breaking session!",w/2,Se),Se+=j+F*1.2,E.drawImage(N,Le,ke,W,W);const J=S-32-U;E.font=`${U}px Helvetica, Arial, sans-serif`,E.fillStyle="#000000",E.textBaseline="top";const Ve=`code (optional): ${o}`;E.fillText(Ve,w/2,J),v.toBlob(ye=>{ye?a(ye):f(new Error("Failed to create blob"))},"image/png")},N.onerror=()=>f(new Error("Failed to load QR code image")),N.src="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(y)))},A.onerror=()=>f(new Error("Failed to load logo image")),A.src="/assets/reuneo_test_9.png"}),wS=({lobbyState:r,playerCount:o,onStart:a,onEnd:f,lobbyCode:p,currentRound:y})=>{const w=r==="checkin",S=o>=2&&r==="checkin",v=r==="active",E=r==="active",A=r==="terminated",[N,R]=I.useState(null),[M,L]=I.useState({qr:!1}),[B,j]=I.useState(!1),U=I.useRef(!1),W=()=>{R("start")},F=()=>{R("end")},q=()=>{j(!0),R("checkin")},ee=()=>{N==="start"?(a(),Rn.success("Rounds started!",{position:"top-center"})):N==="end"&&f(),R(null)},re=()=>R(null);I.useEffect(()=>{U.current||r==="checkin"&&o===0&&(U.current=!0,j(!0),R("checkin"))},[r,o]);const X=(Ne,Ee)=>Ne?"progress-arrow active-shimmer":Ee?"progress-arrow available-shimmer":"progress-arrow inactive",le=w&&!B&&o<6,te=r==="checkin"&&o>=6,ke=r==="active"&&y+1>=12;function Le(Ne,Ee={}){const{silent:J=!1}=Ee,Ve=URL.createObjectURL(Ne),ye=document.createElement("a");ye.href=Ve,ye.download=`reuneo-lobby-${p}.png`,document.body.appendChild(ye),ye.click(),document.body.removeChild(ye),URL.revokeObjectURL(Ve),J||(L(he=>({...he,qr:!0})),setTimeout(()=>L(he=>({...he,qr:!1})),800))}const Se=()=>{const Ne=document.getElementById("modal-qr-svg");Ne&&cx(Ne,p).then(Ee=>{Le(Ee,{silent:!0}),navigator.clipboard&&navigator.clipboard.write?navigator.clipboard.write([new window.ClipboardItem({"image/png":Ee})]).then(()=>{L(J=>({...J,qr:!0})),setTimeout(()=>L(J=>({...J,qr:!1})),800)}).catch(()=>{L(J=>({...J,qr:!0})),setTimeout(()=>L(J=>({...J,qr:!1})),800)}):(L(J=>({...J,qr:!0})),setTimeout(()=>L(J=>({...J,qr:!1})),800))}).catch(Ee=>{console.error("Error generating QR code image:",Ee),alert("Failed to generate QR code image.")})};return x.jsxs("div",{className:"lobby-progress-bar",style:{marginTop:"-1rem",height:"40px"},children:[x.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[x.jsx("div",{className:X(w,!1),tabIndex:0,title:"Check-in phase",onClick:q,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"Start Checkin"}),x.jsx(Od,{direction:"down",show:le})]}),x.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[x.jsx("div",{className:X(v,S&&!v),tabIndex:0,title:S?"Start rounds":"At least 2 players required",onClick:W,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"Start Rounds"}),x.jsx(Od,{direction:"down",show:te})]}),x.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[x.jsx("div",{className:X(A,E&&!A),tabIndex:0,title:E?"End rounds":"Cannot end yet",onClick:F,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"End Rounds"}),x.jsx(Od,{direction:"down",show:ke})]}),N&&x.jsx("div",{className:"progress-modal-overlay",children:x.jsx("div",{className:"progress-modal",children:N==="checkin"?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"progress-modal-title",children:"Check-in: Print or Display this QR code to your attendees"}),x.jsx("div",{className:"progress-modal-message",children:"They scan to join. Once you have 6-10 people ready, click 'Start Rounds' - New arrivals will get paired up in the next rounds."}),x.jsxs("div",{className:"progress-modal-qr",onClick:Se,style:{cursor:"pointer",position:"relative"},children:[x.jsx(sh,{value:`${window.location.origin}/lobby?code=${p}`,size:200,level:"H",includeMargin:!1,bgColor:"#ffffff",fgColor:"#000000",id:"modal-qr-svg"}),x.jsx("span",{className:"copy-icon modal-copy-icon","aria-label":"Copy",style:{position:"absolute",right:8,bottom:8,background:"#fff",borderRadius:"50%",padding:"2px"},children:x.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[x.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),x.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})}),M.qr&&x.jsx("span",{className:"modal-copied-feedback",style:{position:"absolute",left:"50%",bottom:"-1.5rem",transform:"translateX(-50%)",color:"#28a745",fontWeight:600,fontSize:"0.95rem"},children:"Copied!"})]}),x.jsxs("div",{style:{textAlign:"center",marginTop:"1rem",marginBottom:"0.5rem",fontSize:"1rem",color:"#3b3b3b",fontFamily:"Helvetica, Arial, sans-serif"},children:["code (optional): ",p]}),x.jsx("div",{className:"progress-modal-actions",children:x.jsx("button",{className:"progress-modal-btn confirm",onClick:re,children:"Got it"})})]}):x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"progress-modal-title",children:N==="start"?"Are you sure you want to start rounds? - Dont worry new people can join in the next rounds.":"Are you sure you want to end the rounds?"}),x.jsx("div",{className:"progress-modal-actions",children:N==="start"?x.jsxs(x.Fragment,{children:[x.jsx("button",{className:"progress-modal-btn cancel",onClick:re,children:"Not Yet"}),x.jsx("button",{className:"progress-modal-btn confirm",onClick:ee,children:"Start"})]}):x.jsxs(x.Fragment,{children:[x.jsx("button",{className:"progress-modal-btn cancel",onClick:re,children:"Keep Going"}),x.jsx("button",{className:"progress-modal-btn confirm danger",onClick:ee,children:"End"})]})})]})})})]})},vS=({players:r})=>{const o=[...r.pairedPlayers?r.pairedPlayers.flat():[],...r.lobbyData?r.lobbyData:[]],a=10,f=o.slice(0,a),p=o.length-a,y=o.length;return x.jsxs("div",{className:"overlapping-profile-list-wrapper",style:{marginTop:"3rem"},children:[x.jsxs("div",{className:"overlapping-profile-list",children:[f.map((w,S)=>x.jsx("img",{src:w.pfp_data||"/assets/player_icon_trans.png",alt:w.name||"Player",className:"overlapping-profile-img",style:{zIndex:S+1}},w.username||w.name||S)),p>0&&x.jsxs("span",{className:"overlapping-profile-overflow",children:["+ ",p]})]}),x.jsxs("div",{className:"overlapping-profile-list-label",style:{marginTop:"0.5rem",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.1)"},children:["People joined: ",y]})]})},CS=()=>{const{user:r,userProfile:o,checkAuth:a,permissions:f}=I.useContext(Xn),p=Pn(),y=Nr(),w=!1,S=Math.floor(9*60),{loadSound:v,seekTo:E,cancelSound:A,checkSound:N,soundEnabled:R,setSoundEnabled:M,isPlaying:L}=Ef(),[B,j]=I.useState(!0),[U,W]=I.useState(!document.hidden),F=I.useRef(null),ee=new URLSearchParams(y.search).get("code"),[re,X]=I.useState(ee||"test");I.useEffect(()=>{ee||(console.log("No lobby code found in URL, using default 'test' value"),(async()=>{try{const kt=await It("/view_my_active_lobbies");if(kt.ok){const ut=await kt.json();if(console.log("Active lobbies response:",ut),ut&&ut.lobbies&&ut.lobbies.length>0){const jt=ut.lobbies[0];X(jt),window.history.replaceState({},"",`/admin_lobby_view?code=${jt}`)}}}catch(kt){console.error("Error fetching active lobby:",kt)}})())},[ee]);const[le,te]=I.useState(!1),[ke,Le]=I.useState(null),[Se,Ne]=I.useState(!1),[Ee,J]=I.useState(null),[Ve,ye]=I.useState(null),[he,De]=I.useState(null),[ce,Z]=I.useState(null),[G,we]=I.useState(null),[be,ge]=I.useState({}),[ie,ze]=I.useState([]),[ve,Be]=I.useState(0),nt=((Ve==null?void 0:Ve.length)||0)+((Ee==null?void 0:Ee.length)*2||0),[Ae,pe]=I.useState(!1);I.useEffect(()=>{N()?M(!0):M(!1)},[]),I.useEffect(()=>{const Ue=()=>{const kt=!document.hidden;kt&&!U&&console.log("Page became visible - next poll will fetch latest data"),W(kt)};return document.addEventListener("visibilitychange",Ue),()=>{document.removeEventListener("visibilitychange",Ue)}},[U]),I.useEffect(()=>{(ce==="terminated"||ce==="inactive")&&A()},[ce]),I.useEffect(()=>{if(a(),f!=="admin"&&f!=="organizer"){p("/");return}const Ue=async ut=>{if(be[ut])return be[ut];try{const jt=await It(`/pfp_small_icon?username=${encodeURIComponent(ut)}`);if(jt.ok){let Ke=await jt.text();Ke.startsWith('"')&&Ke.endsWith('"')&&(Ke=Ke.slice(1,-1));const Ht=Ke.startsWith("data:image")?Ke:`data:image/jpeg;base64,${Ke}`;return ge(St=>({...St,[ut]:Ht})),Ht}return null}catch(jt){return console.error(`Error fetching profile picture for ${ut}:`,jt),null}},kt=setInterval(async()=>{try{const ut=!document.hidden,jt=await It(`/admin_lobby_data?is_visible=${ut}`,{headers:{is_visible_t_f:ut?"t":"f",lobby_code:re}});if(jt.ok){const Ke=await jt.json();console.log("Admin lobby data:",re,Ke),(Ke.lobby_state==="inactive"||Ke.status==="inactive")&&A();const Ht=typeof Ke.round_time_left=="number"&&!isNaN(Ke.round_time_left)?Ke.round_time_left:0;if(F.current=Ht,F.current!=null&&Ke.lobby_state==="active"&&F.current!=0&&(E(S-F.current),console.log("seeking to",S-F.current)),Ke.lobby_state==="active"&&Be(St=>Ke.current_round>St?Ke.current_round:St),Ke.lobby_state==="terminated"&&(Be(0),A()),Ke&&Ke.unpaired_players){const St=await Promise.all(Ke.unpaired_players.map(async mt=>{const _e=await Ue(mt.username);return{...mt,pfp_data:_e}})),qe=await Promise.all((Ke.pairs_data||[]).map(async mt=>{const _e=await Ue(mt[0].username),me=await Ue(mt[1].username);return[{...mt[0],pfp_data:_e},{...mt[1],pfp_data:me}]}));ye(St),J(qe),De(Ke.round_time_left),Z(Ke.lobby_state),we(Ke.lobby_duration||300),ze(Ke.custom_tags||[])}else console.error("Invalid lobby data structure:",Ke),ye([]),J([])}else console.error("Failed to fetch admin lobby data:",jt.status)}catch(ut){console.error("Error fetching admin lobby data:",ut)}},1e3);return()=>clearInterval(kt)},[be]);const xe=Ue=>{Le(Ue),te(!0)},He=()=>{te(!1),Le(null)},Ze=()=>{ke&&fetch(window.server_url+"/kick_user",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"},body:JSON.stringify({username:ke.username,lobby_code:re})}).then(Ue=>{Ue.ok?console.log(`User ${ke.name} kicked successfully`):console.error(`Failed to kick user ${ke.name}`)}).catch(Ue=>{console.error("Error kicking user:",Ue)}).finally(()=>{He()})},Rt=()=>{Ne(!0)},wt=()=>{Ne(!1)},$e=()=>{p(`/lobby?code=${re}`),wt()};function Je(Ue,kt={}){const{silent:ut=!1}=kt,jt=URL.createObjectURL(Ue),Ke=document.createElement("a");Ke.href=jt,Ke.download=`reuneo-lobby-${re}.png`,document.body.appendChild(Ke),Ke.click(),document.body.removeChild(Ke),URL.revokeObjectURL(jt),ut||Rn.success("QR code downloaded!")}async function qt(){const Ue=document.getElementById("admin-qr-svg");Ue&&cx(Ue,re).then(kt=>{Je(kt,{silent:!0}),navigator.clipboard&&navigator.clipboard.write?navigator.clipboard.write([new window.ClipboardItem({"image/png":kt})]).then(()=>{Rn.success("Downloaded and copied to clipboard!")}).catch(()=>{Rn.success("QR code downloaded!")}):Rn.success("QR code downloaded!")}).catch(kt=>{console.error("Error generating QR code image:",kt),Rn.error("Failed to generate QR code image.")})}const je=()=>x.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.125)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},children:x.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",position:"relative",minWidth:"300px"},children:[x.jsx("button",{onClick:()=>j(!1),style:{color:"#144fff",position:"absolute",right:"10px",top:"10px",border:"none",background:"none",fontSize:"16px",cursor:"pointer",fontWeight:"bold",padding:"4px 8px"},children:"X"}),x.jsx("h2",{style:{marginTop:"5px"},children:"The Sound is Important"}),x.jsx("h3",{style:{marginTop:"5px"},children:"Raise your volume also"}),x.jsx("p",{style:{color:"#144dff"},children:"You'll need this for the best experience."}),x.jsx("button",{onClick:()=>{v(),j(!1)},style:{padding:"10px 20px",marginTop:"20px",backgroundColor:"#144dff",color:"#ffffff",border:"none",borderRadius:"14px",fontWeight:"bold",cursor:"pointer"},children:"Enable Sound"})]})}),Wt=async()=>{await It("/start_rounds",{method:"GET",headers:{lobby_code:re}})},nr=async()=>{A(),(await It("/terminate_lobby",{method:"GET",headers:{lobby_code:re}})).ok&&p("/")};return x.jsxs(x.Fragment,{children:[x.jsx(_c,{position:"top-center"}),x.jsxs("div",{className:"admin-lobby-container",children:[w,x.jsx("div",{className:"admin-view-logo",style:{cursor:"pointer"},children:x.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Reuneo Logo",style:{maxWidth:"85px",height:"auto",objectFit:"contain",transition:"transform 0.3s ease"},onClick:()=>p("/")})}),x.jsx(wS,{lobbyState:ce,playerCount:nt,onStart:Wt,onEnd:nr,lobbyCode:re,currentRound:ve}),x.jsx(vS,{players:{pairedPlayers:Ee,lobbyData:Ve}}),x.jsxs("div",{className:"admin-lobby-dropdown-toggle",onClick:()=>pe(Ue=>!Ue),style:{cursor:"pointer",background:"var(--primary-color)",color:"#f5f7ff",fontWeight:700,textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",fontSize:".75rem",borderRadius:Ae?"14px 14px 0 0":"14px",padding:"0.5rem 1rem",margin:"0 auto",maxWidth:420,boxShadow:"0 2px 8px rgba(20,77,255,0.08)",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s",letterSpacing:"0.5px"},children:[Ae?"Hide Controls":"More Controls",x.jsx("span",{style:{marginLeft:12,fontSize:"1.2em",transition:"transform 0.3s",display:"inline-block",transform:Ae?"rotate(180deg)":"rotate(0deg)"},children:""})]}),x.jsxs("div",{className:"admin-lobby-body",style:{maxHeight:Ae?1e3:0,overflow:"hidden",transition:"max-height 0.5s cubic-bezier(0.4,0,0.2,1)",opacity:Ae?1:0,pointerEvents:Ae?"auto":"none",marginBottom:Ae?"2rem":0},children:[x.jsxs("div",{className:"admin-lobby-qr",onClick:qt,style:{cursor:"pointer"},children:[x.jsxs("span",{className:"qr-label",style:{display:"flex",alignItems:"center",gap:"0.4rem",marginBottom:"0.5rem"},children:["People scan to join",x.jsx("span",{className:"copy-icon","aria-label":"Copy",children:x.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[x.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),x.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})})]}),x.jsx("div",{style:{position:"relative",display:"inline-block"},children:x.jsx(sh,{value:`${window.location.origin}/lobby?code=${re}`,size:140,level:"H",includeMargin:!1,bgColor:"#ffffff",fgColor:"#000000",id:"admin-qr-svg"})}),x.jsxs("div",{className:"lobby-code-display",onClick:()=>{navigator.clipboard.writeText(re);const Ue=document.querySelector(".lobby-code-display");Ue.classList.add("copied"),setTimeout(()=>Ue.classList.remove("copied"),250)},children:[x.jsx("span",{className:"lobby-code-label",children:"lobby code:"}),x.jsx("span",{className:"lobby-code-value",children:re}),x.jsx("span",{className:"copy-icon","aria-label":"Copy",children:x.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[x.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),x.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})})]})]}),x.jsxs("div",{className:"admin-lobby-event-settings",children:[x.jsxs("div",{className:"admin-profile",children:[x.jsx("img",{src:o!=null&&o.image_data?`data:image/jpeg;base64,${o.image_data}`:"/assets/player_icon_trans.png",alt:"Your Profile",className:"admin-profile-picture"}),x.jsx("span",{className:"admin-profile-name",children:o!=null&&o.name?o.name.slice(0,20):r==null?void 0:r.slice(0,20)})]}),x.jsx("button",{onClick:Rt,className:"page-control-button page-control-join",style:{marginTop:".5rem"},children:"Join Rounds"}),x.jsxs("div",{className:"setting-item",style:{padding:"1rem"},children:[x.jsxs("span",{className:"setting-label",children:["Round Duration: ",x.jsxs("span",{className:"setting-value",children:[Math.floor(G/60)," min"]})]}),x.jsx("span",{className:"setting-label",style:{},children:"Tags:"}),ie&&ie.length>0&&x.jsx("div",{className:"setting-item",children:x.jsxs("div",{className:"tags-container",children:[ie.slice(0,3).map((Ue,kt)=>x.jsx("span",{className:"tag-pill",children:Ue},kt)),ie.length>3&&x.jsxs("span",{className:"tag-pill more-tags",children:["+",ie.length-3," more"]})]})})]})]}),x.jsx("div",{className:"admin-lobby-actions"})]}),(ce==="active"||ce==="interrim")&&he&&x.jsx("div",{className:"admin-lobby-timer-container",children:x.jsxs("div",{className:"admin-lobby-timer-glass",children:[x.jsx(oh,{isPlaying:ce==="active",duration:G,initialRemainingTime:he,colors:["#144dff"],size:90,strokeWidth:12,trailColor:"url(#trailGradient)",onComplete:()=>({shouldRepeat:!1}),strokeLinecap:"round",children:({remainingTime:Ue})=>{const kt=Math.floor(Ue/60),ut=Math.floor(Ue%60);return x.jsxs("span",{className:`timer-text ${Ue<=10?"timer-text-fadescale":""}`,children:[kt,":",String(ut).padStart(2,"0")]})}},`${ce}-${Math.floor(he)}`),x.jsx("span",{className:"timer-subtext",children:"round time left"}),x.jsx("svg",{width:"0",height:"0",children:x.jsx("defs",{children:x.jsxs("linearGradient",{id:"trailGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[x.jsx("stop",{offset:"0%",stopColor:"#e0e7ff"}),x.jsx("stop",{offset:"100%",stopColor:"#f5f7ff"})]})})})]})}),ce!=="checkin"&&x.jsxs("div",{className:"admin-lobby-stats",children:[x.jsxs("div",{className:"stat-card",children:[x.jsx("div",{className:"stat-title",children:"Total Players"}),x.jsx("div",{className:"stat-value",children:((Ve==null?void 0:Ve.length)||0)+((Ee==null?void 0:Ee.length)*2||0)})]}),x.jsxs("div",{className:"stat-card",children:[x.jsx("div",{className:"stat-title",children:"Paired Players"}),x.jsx("div",{className:"stat-value",children:(Ee==null?void 0:Ee.length)*2||0})]}),x.jsxs("div",{className:"stat-card",children:[x.jsx("div",{className:"stat-title",children:"Unpaired Players"}),x.jsx("div",{className:"stat-value",children:(Ve==null?void 0:Ve.length)||0})]})]}),Ee&&ce!=="checkin"&&x.jsx("div",{className:"admin-lobby-players",children:x.jsxs("div",{className:"player-section",children:[x.jsxs("div",{className:"section-header",children:["Paired Players: ",x.jsx("span",{className:"stat-value",style:{fontSize:"1.3rem"},children:(Ee==null?void 0:Ee.length)*2||0})]}),x.jsx("div",{className:"player-grid",children:Ee.map((Ue,kt)=>{const ut=Ue[0].match_details&&Ue[0].match_details.opponent_matched_tags&&Ue[0].match_details.opponent_matched_tags.length>0||Ue[1].match_details&&Ue[1].match_details.opponent_matched_tags&&Ue[1].match_details.opponent_matched_tags.length>0;return x.jsxs("div",{className:"paired-player-card",children:[ut&&x.jsx("div",{className:"matched-pair-badge",children:"Matched"}),x.jsxs("div",{className:"paired-player",onClick:()=>xe(Ue[0]),children:[x.jsx("img",{src:Ue[0].pfp_data,alt:Ue[0].name,className:"paired-player-avatar"}),x.jsx("h3",{className:"paired-player-name",children:Ue[0].name}),Ue[0].match_details&&Ue[0].match_details.opponent_matched_tags&&Ue[0].match_details.opponent_matched_tags.length>0&&x.jsx("div",{className:"matching-tag-container",children:x.jsx("div",{className:"matched-player-tag",children:Ue[0].match_details.opponent_matched_tags.map((jt,Ke)=>x.jsx("span",{className:"matching-tag-pill",children:jt},Ke))})})]}),x.jsxs("div",{className:"paired-player",onClick:()=>xe(Ue[1]),children:[x.jsx("img",{src:Ue[1].pfp_data,alt:Ue[1].name,className:"paired-player-avatar"}),x.jsx("h3",{className:"paired-player-name",children:Ue[1].name}),Ue[1].match_details&&Ue[1].match_details.opponent_matched_tags&&Ue[1].match_details.opponent_matched_tags.length>0&&x.jsx("div",{className:"matching-tag-container",children:x.jsx("div",{className:"matched-player-tag",children:Ue[1].match_details.opponent_matched_tags.map((jt,Ke)=>x.jsx("span",{className:"matching-tag-pill",children:jt},Ke))})})]})]},kt)})})]})}),Ve&&x.jsx("div",{className:"admin-lobby-players",children:x.jsxs("div",{className:"player-section",children:[x.jsxs("div",{className:"section-header",children:[ce==="checkin"?"People Joined":"Unpaired Players",": ",x.jsx("span",{className:"stat-value",style:{fontSize:"1.3rem"},children:(Ve==null?void 0:Ve.length)||0})]}),x.jsx("div",{className:"player-grid",children:Ve.map((Ue,kt)=>x.jsxs("div",{className:"player-card",onClick:()=>xe(Ue),children:[x.jsx("img",{src:Ue.pfp_data,alt:Ue.name,className:"player-avatar"}),x.jsx("h3",{className:"player-name",children:Ue.name})]},kt))})]})}),x.jsx(yS,{isOpen:Se,onClose:wt,onConfirm:$e}),x.jsx(xS,{isOpen:le,onClose:He,onConfirm:Ze,userName:(ke==null?void 0:ke.name)||"this user"})]}),R||!B||ce=="checkin"||ce==null||L?null:x.jsx(je,{})]})},ES=()=>{const r=Pn(),{user:o}=I.useContext(Xn),a=()=>{window.location.href="https://reunio.app/become-an-organizer"};return x.jsxs("div",{className:"product-selection-container",children:[x.jsxs("video",{className:"background-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,children:[x.jsx("source",{src:"/assets/purchase_plan_video.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]}),x.jsxs("div",{className:"product-selection-content",children:[x.jsx("div",{className:"product-selection-header",children:x.jsx("h1",{children:"Product Selection"})}),x.jsxs("div",{className:"plans-section",children:[x.jsx("h2",{children:"Available Plans"}),x.jsxs("div",{className:"plan-card",children:[x.jsx("h3",{children:"Organizer Plan"}),x.jsxs("div",{className:"plan-description",children:[x.jsx("p",{children:"Create experiences for your community with our beta plan."}),x.jsxs("ul",{children:[x.jsx("li",{children:"Create unlimited experiences"}),x.jsx("li",{children:"Access to organizer dashboard"}),x.jsx("li",{children:"Priority customer support"})]})]}),x.jsx("button",{className:"purchase-button",onClick:a,children:"Contact Us"})]})]}),x.jsx("button",{className:"back-button",onClick:()=>r("/"),children:"Home"})]})]})},bS=()=>{const{user:r,userProfile:o,checkAuth:a,permissions:f}=I.useContext(Xn),[p,y]=I.useState(""),[w,S]=I.useState(""),[v,E]=I.useState(!1),[A,N]=I.useState(""),[R,M]=I.useState(!1),[L,B]=I.useState([]),[j,U]=I.useState(""),[W,F]=I.useState("5"),[q,ee]=I.useState("0"),[re,X]=I.useState(!1),[le,te]=I.useState(null),[ke,Le]=I.useState(!1),[Se,Ne]=I.useState(null),[Ee,J]=I.useState(null),[Ve,ye]=I.useState(""),[he,De]=I.useState(""),[ce,Z]=I.useState(null),[G,we]=I.useState(null),[be,ge]=I.useState(""),[ie,ze]=I.useState(!1),[ve,Be]=I.useState(!1),[nt,Ae]=I.useState({x:0,y:0}),[pe,xe]=I.useState(1),[He,Ze]=I.useState(null),Rt=8,wt=Pn(),$e=I.useRef(null);I.useEffect(()=>{window.scrollTo(0,0),r&&(y(r),S(r)),$e.current&&$e.current.focus()},[r]);const Je=_e=>{const me=/^[a-z0-9]+$/;return _e.length>=2&&me.test(_e)},qt=_e=>{const me=_e.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");S(me),M(!0),setTimeout(()=>{M(!1)},500)},je=()=>{if(j.includes(",")){const _e=j.split(",").map(ct=>ct.startsWith(" ")?ct.substring(1):ct),me=[];_e.forEach(ct=>{const et=ct.trim();et&&!L.includes(et)&&!me.includes(et)&&me.push(et)}),me.length>0&&B([...L,...me]),U("")}else j.trim()&&!L.includes(j.trim())&&(B([...L,j.trim()]),U(""))},Wt=_e=>{B(L.filter(me=>me!==_e))},nr=_e=>{_e.key==="Enter"&&j.trim()&&(_e.preventDefault(),je())},Ue=_e=>{_e==="icebreaker"?L.length>0||j.trim()?(Ne("icebreaker"),Le(!0)):(te("icebreaker"),B([]),U("")):_e==="custom"&&te("custom")},kt=()=>{te(Se),B([]),U(""),Le(!1),Ne(null)},ut=()=>{Le(!1),Ne(null)},jt=(_e,me,ct)=>new Promise(et=>{const ft=new Image;ft.onload=()=>{const Yt=document.createElement("canvas"),In=Yt.getContext("2d");let{width:on,height:at}=ft;on>at?on>me&&(at=at*me/on,on=me):at>ct&&(on=on*ct/at,at=ct),Yt.width=on,Yt.height=at,In.drawImage(ft,0,0,on,at);const an=Yt.toDataURL("image/jpeg",.7);et(an)},ft.src=URL.createObjectURL(_e)}),Ke=async _e=>{const me=_e.target.files[0];if(me){if(ge(""),Be(!0),!["image/jpeg","image/jpg","image/png"].includes(me.type)){ge("Invalid format. Please upload a JPG or PNG image."),Be(!1);return}if(me.size>2*1024*1024){ge("File too large. Please choose an image under 2MB."),Be(!1);return}try{const ct=await jt(me,400,400);J(me),Z(ct),ze(!0),Be(!1)}catch(ct){console.error("Error processing image:",ct),ge("Error processing image. Please try again."),Be(!1)}}},Ht=(_e,me)=>{Ze(me)},St=async()=>{try{Be(!0);const _e=await gf(ce,He);we(_e),ze(!1),Be(!1)}catch(_e){console.error("Error cropping logo:",_e),ge("Error processing image. Please try again."),ze(!1),Be(!1)}},qe=()=>{J(null),Z(null),we(null),ze(!1),Be(!1),Ae({x:0,y:0}),xe(1),Ze(null),ge("");const _e=document.getElementById("logoUpload");_e&&(_e.value="")},mt=async _e=>{if(_e.preventDefault(),!Je(w)){N("Lobby code must be at least 2 characters long and contain only lowercase letters and numbers");return}E(!0),N("");const me=parseInt(W)*60+parseInt(q);let ct=null;G&&(ct=G.split(",")[1]);try{const et={lobby_code:w,custom_tags:le==="custom"?L:[],lobby_duration:me,show_table_numbers:re};ct&&(et.logo_icon=ct),Ve.trim()&&(et.logo_name=Ve.trim()),he.trim()&&(et.logo_hyperlink=he.trim());const ft=await It("/create_lobby",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(et)});if(ft.ok)console.log("Lobby created successfully"),console.log(await ft.json()),wt(`/admin_lobby_view?code=${w}`);else{const Yt=await ft.json();N(Yt.message||"Failed to create lobby"),console.error("Failed to create lobby")}}catch(et){N("An error occurred while creating the lobby"),console.error("Error creating lobby:",et)}finally{E(!1)}};return x.jsxs("div",{className:"create-lobby-background",children:[x.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Reunio Logo",className:"logo-image",onClick:()=>wt(-1)}),x.jsxs("div",{className:"create-lobby-container",children:[x.jsx("h1",{className:"create-lobby-title",children:"Create a New Lobby"}),x.jsxs("form",{onSubmit:mt,className:"create-lobby-form",children:[x.jsxs("div",{className:"form-group",children:[x.jsx("label",{htmlFor:"lobbyCode",children:"Lobby Code"}),x.jsx("input",{ref:$e,type:"text",id:"lobbyCode",value:w,onChange:qt,placeholder:"Enter lobby code (lowercase letters and numbers only)",required:!0,className:`form-input ${R?"typing":""}`,autoComplete:"off"}),x.jsx("div",{className:"input-hint",children:"lowercase letters and numbers only"})]}),x.jsxs("div",{className:"form-group",children:[x.jsx("label",{children:"Round Duration"}),x.jsxs("div",{className:"duration-input-container",children:[x.jsxs("div",{className:"duration-input-group",children:[x.jsx("input",{type:"number",id:"minutes",value:W,onChange:_e=>{const me=_e.target.value;(me===""||parseInt(me)>0&&parseInt(me)<=Rt)&&(F(me),parseInt(me)===Rt&&ee("0"))},min:"1",max:Rt,placeholder:`1-${Rt}`,className:"form-input duration-input",autoComplete:"off"}),x.jsx("label",{htmlFor:"minutes",className:"duration-label",children:"Minutes"})]}),x.jsxs("div",{className:"duration-input-group",children:[x.jsx("input",{type:"number",id:"seconds",value:q,onChange:_e=>{const me=_e.target.value;(me===""||parseInt(me)>=0&&parseInt(me)<=59)&&ee(me)},min:"0",max:"59",placeholder:"0-59",className:"form-input duration-input",autoComplete:"off",disabled:parseInt(W)===Rt}),x.jsx("label",{htmlFor:"seconds",className:"duration-label",children:"Seconds"})]})]}),x.jsxs("div",{className:"input-hint",children:["Maximum total duration is ",Rt," minutes"]})]}),x.jsxs("div",{className:"form-group",children:[x.jsx("label",{htmlFor:"showTableNumbers",children:"Table Numbers"}),x.jsx("input",{type:"checkbox",id:"showTableNumbers",checked:re,onChange:_e=>X(_e.target.checked),className:"form-input checkbox-input"}),x.jsx("div",{className:"input-hint",children:"Recommended for events with 50+ people"}),x.jsx("div",{className:"input-hint",children:"Make sure to provide table numbers"})]}),x.jsxs("div",{className:"form-group",children:[x.jsx("label",{children:"Matchmaking Categories"}),x.jsxs("div",{className:"matchmaking-tabs",children:[x.jsx("button",{type:"button",className:`tab-button ${le==="icebreaker"?"tab-selected":""}`,onClick:()=>Ue("icebreaker"),children:"Community Ice Breaker"}),x.jsx("button",{type:"button",className:`tab-button ${le==="custom"?"tab-selected":""}`,onClick:()=>Ue("custom"),children:"Custom Matching"})]}),le==="custom"&&x.jsxs("div",{className:"custom-matching-section",children:[x.jsxs("div",{className:"tag-input-container",children:[x.jsx("input",{type:"text",id:"tagInput",value:j,onChange:_e=>U(_e.target.value),onKeyDown:nr,placeholder:"Add categories (press + to add)",className:"form-input",autoComplete:"off"}),x.jsx("button",{type:"button",onClick:je,className:"tag-add-button",children:"+"})]}),L.length>0&&x.jsx("div",{className:"tag-list",children:L.map((_e,me)=>x.jsxs("div",{className:"tag-item",children:[_e,x.jsx("button",{type:"button",onClick:()=>Wt(_e),className:"tag-remove-button",children:""})]},me))}),x.jsx("div",{className:"input-hint",children:"If you want to match people based on categories"})]})]}),x.jsxs("div",{className:"form-group logo-upload-section",children:[x.jsx("label",{children:"Sponsor Logo"}),!G&&!ie&&x.jsxs(x.Fragment,{children:[ve?x.jsx("div",{className:"logo-processing",children:"Processing..."}):x.jsxs(x.Fragment,{children:[x.jsx("input",{type:"file",id:"logoUpload",accept:"image/jpeg,image/jpg,image/png",onChange:Ke,style:{display:"none"}}),x.jsx("button",{type:"button",onClick:()=>document.getElementById("logoUpload").click(),className:"logo-upload-button",children:"Upload Logo"})]}),be&&x.jsx("div",{className:"logo-error-message",children:be})]}),ie&&ce&&x.jsxs("div",{className:"logo-crop-container",children:[x.jsx("div",{className:"logo-crop-area",children:x.jsx(mf,{image:ce,crop:nt,zoom:pe,aspect:1,onCropChange:Ae,onZoomChange:xe,onCropComplete:Ht})}),x.jsxs("div",{className:"logo-crop-controls",children:[x.jsx("button",{type:"button",onClick:St,className:"logo-save-button",disabled:ve,children:ve?"Processing...":"Save Crop"}),x.jsx("button",{type:"button",onClick:qe,className:"logo-cancel-button",children:"Cancel"})]})]}),G&&!ie&&x.jsx("div",{className:"logo-preview-container",children:x.jsxs("div",{className:"logo-preview",children:[x.jsx("img",{src:G,alt:"Logo preview",className:"logo-preview-image"}),x.jsx("button",{type:"button",onClick:qe,className:"logo-remove-button",children:""})]})}),!1]}),A&&x.jsx("div",{className:"error-message",children:A}),x.jsx("button",{type:"submit",className:"submit-button",disabled:v,children:v?"Creating...":"Create Lobby"})]})]}),ke&&x.jsx("div",{className:"modal-overlay",children:x.jsxs("div",{className:"modal-content",children:[x.jsx("h3",{children:"Switch to Community Ice Breaker?"}),x.jsx("p",{children:"This will clear your current matching categories."}),x.jsxs("div",{className:"modal-buttons",children:[x.jsx("button",{type:"button",onClick:ut,className:"modal-button modal-cancel",children:"Cancel"}),x.jsx("button",{type:"button",onClick:kt,className:"modal-button modal-confirm",children:"Confirm"})]})]})})]})},SS=r=>{try{const o=new URLSearchParams(r||window.location.search),a=o.get("via")||"",f=o.get("rewardful")||o.get("rewardful_referral")||"",p=typeof window<"u"&&window.Rewardful&&window.Rewardful.referral||"",y=typeof window<"u"&&window.localStorage&&window.localStorage.getItem("rewardful_referral")||"",w=p||f||a||y||"";return w&&typeof window<"u"&&window.localStorage&&window.localStorage.setItem("rewardful_referral",w),w}catch{return""}},AS=()=>{const{login:r,user:o,checkAuth:a,permissions:f}=I.useContext(Xn),[p,y]=I.useState(""),[w,S]=I.useState(""),[v,E]=I.useState(""),[A,N]=I.useState(""),[R,M]=I.useState(""),[L,B]=I.useState(""),[j,U]=I.useState({}),[W,F]=I.useState(""),[q,ee]=I.useState(!1),re=Pn(),X=Nr();I.useEffect(()=>{localStorage.getItem("access_token")&&!o&&a()},[]),I.useEffect(()=>{f!==null&&(f==="admin"||f==="organizer")&&re("/")},[f,re]),I.useEffect(()=>{(async()=>{if(o!==null&&f!==null&&f!=="admin"&&f!=="organizer")try{if(!localStorage.getItem("access_token"))return;const ze=await It("/check-subscription-status");ze.ok&&(await ze.json()).has_access===!0&&re("/organizer-account-details")}catch(ie){console.error("Error checking subscription status:",ie)}})()},[o,f,re]);const le=ge=>{const ie=/^[a-z0-9]+$/;return ge.length>=2&&ie.test(ge)},te=ge=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ge)&&ge.trim()!=="",ke=ge=>ge.replace(/\D/g,"").length===10,Le=ge=>ge.trim().length>=2,Se=ge=>{const ie=ge.replace(/\D/g,"");return ie.length===0?"":ie.length<=3?`(${ie}`:ie.length<=6?`(${ie.slice(0,3)}) ${ie.slice(3)}`:`(${ie.slice(0,3)}) ${ie.slice(3,6)}-${ie.slice(6,10)}`},Ne=ge=>ge.replace(/\D/g,""),Ee=ge=>{const ie=ge.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");y(ie),W&&F("")},J=ge=>{S(ge.target.value),W&&F(""),j.email&&U(ie=>({...ie,email:""}))},Ve=ge=>{const ie=ge.target.value;E(ie),W&&F(""),j.phone&&U(ze=>({...ze,phone:""}))},ye=()=>{const ge=Se(v);E(ge),ge&&!ke(ge)?U(ie=>({...ie,phone:"Invalid phone number"})):U(ie=>({...ie,phone:""}))},he=ge=>{const ie=ge.target.value;N(ie),W&&F(""),j.cityState&&U(ze=>({...ze,cityState:""}))},De=()=>{A&&!Le(A)?U(ge=>({...ge,cityState:"City/State must be at least 2 characters"})):U(ge=>({...ge,cityState:""}))},ce=ge=>{M(ge.target.value),j.eventType&&U(ie=>({...ie,eventType:""}))},Z=ge=>{B(ge.target.value),j.avgAttendees&&U(ie=>({...ie,avgAttendees:""}))},G=async ge=>{ge.preventDefault(),F(""),ee(!0);const ie=o!==null;if(!ie&&(!p||!le(p))){F("Username must be at least 2 characters and contain only lowercase letters and numbers"),ee(!1);return}if(!w||!te(w)){U(Ae=>({...Ae,email:"Please enter a valid email address"})),F("Please enter a valid email address"),ee(!1);return}const ze=Ne(v);if(!v||!ke(v)){U(Ae=>({...Ae,phone:"Please enter a valid phone number"})),F("Please enter a valid phone number"),ee(!1);return}if(!A||!Le(A)){U(Ae=>({...Ae,cityState:"City/State is required (minimum 2 characters)"})),F("City/State is required (minimum 2 characters)"),ee(!1);return}const ve=new URLSearchParams(X.search),Be=SS(X.search),nt=ve.get("ref")||ve.get("affiliate_code")||"";if(ie){if(!localStorage.getItem("access_token")){F("Authentication required. Please log in again."),ee(!1);return}try{if(!(await It("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone_number:ze,city_state:A,event_type:R||"",avg_attendees:L||""})})).ok)throw new Error("Failed to update profile");const xe=await It("/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w,rewardful_referral:Be,affiliate_code:nt})}),He=await xe.json();if(!xe.ok||He.error){if(He.error&&He.error.includes("already have an active subscription")){re("/organizer-account-details");return}F(He.error||"Failed to create checkout session. Please try again."),ee(!1);return}window.location.href=He.checkout_url;return}catch(pe){console.error("Error creating checkout session:",pe),F("An error occurred. Please try again."),ee(!1);return}}try{const pe=await It("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:p,password:p})}),xe=await pe.json();if(xe.error==="Username already taken"){F("Username is taken"),ee(!1);return}if(!pe.ok){F(xe.message||"Signup failed"),ee(!1);return}if(r(xe),await a(),!localStorage.getItem("access_token"))throw new Error("Authentication failed");const Ze=await fetch("/assets/fakeprofile.png");if(!Ze.ok)throw new Error("Failed to fetch profile image");const wt=await(await Ze.blob()).arrayBuffer(),$e=btoa(new Uint8Array(wt).reduce((Wt,nr)=>Wt+String.fromCharCode(nr),""));if(!(await It("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:p,image_data:$e,phone_number:ze,city_state:A,event_type:R||"",avg_attendees:L||""})})).ok)throw new Error("Failed to update profile");await a();const qt=await It("/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w,rewardful_referral:Be,affiliate_code:nt})}),je=await qt.json();if(!qt.ok||je.error){if(je.error&&je.error.includes("already have an active subscription")){re("/organizer-account-details");return}throw new Error(je.error||"Failed to create checkout session")}window.location.href=je.checkout_url}catch(Ae){console.error("Error:",Ae),F("An error occurred. Please try again."),ee(!1)}},we=o===null,be=q||f==="admin"||f==="organizer";return x.jsxs("div",{className:"signup-container",children:[x.jsx("button",{onClick:()=>re("/"),className:"homescreen-button",children:"Home"}),x.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),x.jsx("h3",{className:"signup-header",children:"Become an Organizer"}),x.jsx("div",{className:"step-form-container",children:x.jsxs("form",{onSubmit:G,children:[x.jsxs("div",{style:{display:we?"block":"none"},children:[x.jsx("label",{className:"step-label",children:"Username"}),x.jsx("input",{type:"text",value:p,onChange:Ee,placeholder:"Enter a username",className:"step-input",autoFocus:we}),p.length>0&&x.jsxs("div",{className:"username-info-message",children:[x.jsxs("svg",{className:"info-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[x.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),x.jsx("path",{d:"M8 5V7M8 11V9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),x.jsx("circle",{cx:"8",cy:"5",r:"0.5",fill:"currentColor"})]}),x.jsx("span",{children:"This will be your temporary password"})]})]}),x.jsxs("div",{style:{marginTop:we?"20px":"0"},children:[x.jsxs("label",{className:"step-label",children:["Email",j.email&&x.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[x.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),x.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),x.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),x.jsx("input",{type:"email",value:w,onChange:J,placeholder:"Enter your email",className:`step-input ${j.email?"input-error":""}`,autoFocus:!we})]}),x.jsxs("div",{style:{marginTop:"20px"},children:[x.jsxs("label",{className:"step-label",children:["Phone Number",j.phone&&x.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[x.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),x.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),x.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),x.jsx("input",{type:"tel",value:v,onChange:Ve,onBlur:ye,placeholder:"(123) 456-7890",className:`step-input ${j.phone?"input-error":""}`})]}),x.jsxs("div",{style:{marginTop:"20px"},children:[x.jsxs("label",{className:"step-label",children:["City / State",j.cityState&&x.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[x.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),x.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),x.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),x.jsx("input",{type:"text",value:A,onChange:he,onBlur:De,placeholder:"City / State",className:`step-input ${j.cityState?"input-error":""}`})]}),x.jsxs("div",{style:{marginTop:"20px"},children:[x.jsx("label",{className:"step-label",children:"What events do you host?"}),x.jsxs("select",{value:R,onChange:ce,className:"step-select",children:[x.jsx("option",{value:"",children:"Select an option..."}),x.jsx("option",{value:"Hospitality-Restaurants",children:"Hospitality-Restaurants"}),x.jsx("option",{value:"Social",children:"Social"}),x.jsx("option",{value:"Residential",children:"Residential"}),x.jsx("option",{value:"Business Networking",children:"Business Networking"}),x.jsx("option",{value:"Event Specialist",children:"Event Specialist"}),x.jsx("option",{value:"Education",children:"Education"}),x.jsx("option",{value:"HR-Team Building",children:"HR-Team Building"}),x.jsx("option",{value:"Corporate",children:"Corporate"}),x.jsx("option",{value:"Co-working",children:"Co-working"}),x.jsx("option",{value:"Dating",children:"Dating"}),x.jsx("option",{value:"Other",children:"Other"})]})]}),x.jsxs("div",{style:{marginTop:"20px"},children:[x.jsx("label",{className:"step-label",children:"Avg # of attendees"}),x.jsxs("select",{value:L,onChange:Z,className:"step-select",children:[x.jsx("option",{value:"",children:"Select an option..."}),x.jsx("option",{value:"5-15",children:"5-15"}),x.jsx("option",{value:"15-30",children:"15-30"}),x.jsx("option",{value:"30-50",children:"30-50"}),x.jsx("option",{value:"50-75",children:"50-75"}),x.jsx("option",{value:"75-100",children:"75-100"}),x.jsx("option",{value:"100-150",children:"100-150"}),x.jsx("option",{value:"150-200",children:"150-200"}),x.jsx("option",{value:"200+",children:"200+"})]})]}),W&&x.jsx("div",{className:"error-message",style:{marginTop:"15px",marginBottom:"10px"},children:W}),x.jsx("button",{type:"submit",className:"primary-button",disabled:be,style:{marginTop:"20px"},children:q?"Loading...":"Submit"})]})})]})},TS=()=>{const[r,o]=I.useState(!1),[a,f]=I.useState(""),p=I.useRef(null),y=Pn(),w=Nr();return I.useEffect(()=>{const v=new URLSearchParams(w.search).get("session_id");return(async()=>{let A="/";if(!v){f("Missing session ID"),o(!0),p.current=setTimeout(()=>{o(!1),y(A)},2e3);return}try{if(!localStorage.getItem("access_token")){f("Authentication required"),o(!0),p.current=setTimeout(()=>{o(!1),y(A)},2e3);return}const R=await It(`/organizer-signup-success?session_id=${v}`),M=await R.json();if(!R.ok||M.error)console.error("Payment verification failed:",M.error),f(M.error||"Payment verification failed");else try{const L=await It("/view_my_active_lobbies");if(L.ok){const B=await L.json();A=!!(B&&Array.isArray(B.lobbies)&&B.lobbies.length>0)?"/":"/create_lobby"}else A="/"}catch(L){console.error("Error checking active lobbies:",L),A="/"}}catch(N){console.error("Error verifying payment:",N),f("Failed to verify payment")}o(!0),p.current=setTimeout(()=>{o(!1),y(A)},2e3)})(),()=>{p.current&&(clearTimeout(p.current),p.current=null)}},[w.search,y]),r?x.jsxs("div",{className:"success-overlay",children:[x.jsx("div",{className:"success-text",children:"Success! You're now an organizer!"}),a&&x.jsx("div",{className:"success-error",style:{marginTop:"20px"},children:a})]}):x.jsx("div",{className:"signup-container",children:x.jsx("div",{className:"loading-message",children:"Processing..."})})},IS=()=>{const{user:r,checkAuth:o,permissions:a}=I.useContext(Xn),f=Pn(),[p,y]=I.useState(null),[w,S]=I.useState(!0),[v,E]=I.useState(!1),[A,N]=I.useState(""),[R,M]=I.useState(!1),[L,B]=I.useState(!1);I.useEffect(()=>{a!==null&&a!=="admin"&&a!=="organizer"&&f("/organizer-signup")},[a,f]),I.useEffect(()=>{r&&(async()=>{try{const F=await It("/organizer-account-details"),q=await F.json();if(!F.ok||q.error){if((a==="admin"||a==="organizer")&&q.has_subscription!==!1){N(q.error||"Some subscription details may be incomplete"),y(q),S(!1);return}if(q.has_subscription===!1){f("/organizer-signup");return}N(q.error||"Failed to load account details"),q.has_subscription!==!1&&y(q),S(!1);return}if(q.has_subscription===!1){f("/organizer-signup");return}y(q)}catch(F){console.error("Error fetching account details:",F),N("Failed to load account details. Please try again.")}finally{S(!1)}})()},[r,a,f]),I.useEffect(()=>(R?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[R]);const j=W=>W?new Date(W*1e3).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):null,U=async()=>{E(!0),N("");try{const W=await It("/cancel-subscription",{method:"POST",headers:{"Content-Type":"application/json"}}),F=await W.json();if(!W.ok||F.error){N(F.error||"Failed to cancel subscription"),E(!1),M(!1);return}B(!0),M(!1),setTimeout(()=>{f("/")},1500)}catch(W){console.error("Error canceling subscription:",W),N("An error occurred. Please try again."),E(!1),M(!1)}};return w?x.jsx("div",{className:"signup-container",children:x.jsx("div",{className:"loading-message",children:"Loading account details..."})}):!p&&!w?x.jsxs("div",{className:"signup-container",children:[x.jsx("button",{onClick:()=>f("/"),className:"homescreen-button",children:"Home"}),x.jsx("div",{className:"error-message",children:A||"No account details found"})]}):p?x.jsxs("div",{className:"signup-container",children:[x.jsx("button",{onClick:()=>f("/"),className:"homescreen-button",children:"Home"}),x.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),x.jsx("h3",{className:"signup-header",children:"Organizer Account Details"}),x.jsx("div",{className:"step-form-container",children:x.jsxs("div",{className:"account-details-content",children:[A&&x.jsx("div",{className:"error-message",style:{marginBottom:"20px"},children:A}),p.subscription_status&&x.jsxs("div",{className:"detail-row",children:[x.jsx("span",{className:"detail-label",children:"Subscription Status:"}),x.jsx("span",{className:`detail-value status-${p.subscription_status}`,children:p.subscription_status})]}),p.email&&x.jsxs("div",{className:"detail-row",children:[x.jsx("span",{className:"detail-label",children:"Email:"}),x.jsx("span",{className:"detail-value",children:p.email})]}),p.billing_period&&x.jsxs("div",{className:"detail-row",children:[x.jsx("span",{className:"detail-label",children:"Billing Period:"}),x.jsx("span",{className:"detail-value",children:p.billing_period})]}),p.amount!==null&&p.amount!==void 0&&x.jsxs("div",{className:"detail-row",children:[x.jsx("span",{className:"detail-label",children:"Amount:"}),x.jsxs("span",{className:"detail-value",children:["$",p.amount," ",p.currency||""]})]}),p.current_period_start&&j(p.current_period_start)&&x.jsxs("div",{className:"detail-row",children:[x.jsx("span",{className:"detail-label",children:"Current Period Start:"}),x.jsx("span",{className:"detail-value",children:j(p.current_period_start)})]}),p.current_period_end&&j(p.current_period_end)&&x.jsxs("div",{className:"detail-row",children:[x.jsx("span",{className:"detail-label",children:"Current Period End:"}),x.jsx("span",{className:"detail-value",children:j(p.current_period_end)})]}),p.cancel_at_period_end&&x.jsxs("div",{className:"detail-row",children:[x.jsx("span",{className:"detail-label",children:"Cancellation:"}),x.jsx("span",{className:"detail-value",children:"Will cancel at period end"})]}),x.jsx("button",{onClick:()=>M(!0),className:"primary-button cancel-button",style:{marginTop:"30px"},children:"Cancel Subscription"})]})}),R&&x.jsx("div",{className:"modal-overlay",onClick:W=>W.stopPropagation(),children:x.jsxs("div",{className:"modal-content",onClick:W=>W.stopPropagation(),children:[x.jsx("h3",{children:"Cancel Subscription"}),x.jsx("p",{children:"Are you sure you want to cancel your subscription?"}),x.jsxs("div",{className:"modal-buttons",children:[x.jsx("button",{className:"modal-button modal-cancel",onClick:()=>M(!1),disabled:v,children:"Cancel"}),x.jsx("button",{className:"modal-button modal-confirm",onClick:U,disabled:v,children:v?"Processing...":"Confirm"})]})]})}),L&&x.jsx("div",{className:"toast-container",children:x.jsx("div",{className:"toast-message",children:"Subscription canceled successfully"})})]}):null},ff=({size:r=60,className:o=""})=>x.jsx("div",{className:`attendees-spinner ${o}`,style:{width:r,height:r},children:x.jsx("div",{className:"attendees-spinner-inner"})}),Md=["#6366f1","#8b5cf6","#ec4899","#f59e0b","#10b981","#3b82f6","#ef4444","#14b8a6","#f97316","#a855f7","#06b6d4","#84cc16"],NS=r=>{if(!r)return Md[0];let o=0;for(let f=0;f<r.length;f++)o=r.charCodeAt(f)+((o<<5)-o);const a=Math.abs(o)%Md.length;return Md[a]},hf=sn.memo(({tag:r})=>{const o=NS(r);return x.jsx("span",{className:"attendee-modal-tag-pill",style:{background:o},children:r})});hf.displayName="TagPill";const _S=r=>{if(!r)return"Date not available";let o;if(typeof r=="number")o=r<1e10?new Date(r*1e3):new Date(r);else if(typeof r=="string")o=new Date(r);else return"Date not available";return isNaN(o.getTime())?"Date not available":o.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},RS=({attendees:r=[]})=>{const o=I.useRef(null),a=I.useRef(null),f=I.useRef(null),[p,y]=I.useState(null),[w,S]=I.useState(!1),[v,E]=I.useState({}),[A,N]=I.useState(!1),[R,M]=I.useState({}),L=I.useRef(-1),B=I.useRef(null),[j,U]=I.useState(!1),[W,F]=I.useState(null),[q,ee]=I.useState({}),[re,X]=I.useState(!1),[le,te]=I.useState(null),[ke,Le]=I.useState(null),[Se,Ne]=I.useState(!1),Ee=I.useRef(null),J=I.useRef(null),Ve=I.useRef({}),ye=I.useRef(null);I.useEffect(()=>{const pe=window.matchMedia("(pointer: coarse)"),xe=()=>S(!!pe.matches);return xe(),pe.addEventListener?pe.addEventListener("change",xe):pe.addListener(xe),()=>{pe.removeEventListener?pe.removeEventListener("change",xe):pe.removeListener(xe)}},[]),I.useEffect(()=>{const pe=xe=>{a.current&&(a.current.contains(xe.target)||y(null))};return document.addEventListener("pointerdown",pe,{capture:!0}),()=>{document.removeEventListener("pointerdown",pe,{capture:!0})}},[]);const he=I.useCallback((pe=1)=>{const xe=o.current;if(!xe)return;const He=Math.round(xe.clientWidth*.75)*pe;xe.scrollBy({left:He,behavior:"smooth"})},[]),De=I.useCallback(()=>{const pe=o.current;return pe?pe.scrollLeft>0:!1},[]),ce=I.useCallback(()=>{const pe=o.current;return pe?pe.scrollLeft<pe.scrollWidth-pe.clientWidth-1:!1},[]),[Z,G]=I.useState({left:!1,right:!0});I.useEffect(()=>{const pe=()=>{G({left:De(),right:ce()})},xe=o.current;return xe&&(pe(),xe.addEventListener("scroll",pe),window.addEventListener("resize",pe)),()=>{xe&&(xe.removeEventListener("scroll",pe),window.removeEventListener("resize",pe))}},[r.length,De,ce]);const we=I.useCallback(async pe=>{if(A||pe.length===0)return;const xe=pe.filter(Ze=>!v[Ze]&&!R[Ze]);if(xe.length===0)return;N(!0);const He={...R};xe.forEach(Ze=>{He[Ze]=!0}),M(He);try{const Ze=await It("/organizer_attendees/images",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({usernames:xe})});if(!Ze.ok)throw Ze.status===401?new Error("Unauthorized"):new Error("Failed to load images");const Rt=await Ze.json();if(Rt.status==="success"&&Rt.images){const wt={...v};xe.forEach($e=>{Rt.images[$e]?wt[$e]=`data:image/jpeg;base64,${Rt.images[$e]}`:wt[$e]=null}),E(wt)}}catch(Ze){console.error("Error loading images:",Ze)}finally{N(!1);const Ze={...R};xe.forEach(Rt=>{delete Ze[Rt]}),M(Ze)}},[A,v,R]);I.useEffect(()=>{if(r.length===0||L.current>=0)return;const pe=r.slice(0,30).map(xe=>xe.username);pe.length>0&&(we(pe),L.current=Math.min(29,r.length-1))},[r.length,we]),I.useEffect(()=>{if(r.length===0||!o.current)return;const pe=new IntersectionObserver(He=>{B.current&&clearTimeout(B.current),B.current=setTimeout(()=>{He.forEach(Ze=>{if(Ze.isIntersecting){const Rt=parseInt(Ze.target.dataset.index),wt=L.current;if(Rt>=wt-5&&Rt<r.length&&wt<r.length-1){const $e=wt+1,Je=Math.min($e+30,r.length);if($e<r.length){const qt=r.slice($e,Je).map(je=>je.username);we(qt),L.current=Je-1}}}})},150)},{root:o.current,rootMargin:"200px",threshold:.5});return o.current.querySelectorAll("[data-index]").forEach(He=>pe.observe(He)),f.current=pe,()=>{B.current&&clearTimeout(B.current),f.current&&f.current.disconnect()}},[r.length,we]);const be=I.useCallback(()=>!W||r.length===0?-1:r.findIndex(pe=>pe.username===W),[W,r]),ge=I.useCallback(pe=>{var Ze;const xe=be();if(xe===-1||r.length===0)return null;let He;return pe==="next"?He=(xe+1)%r.length:He=xe===0?r.length-1:xe-1,((Ze=r[He])==null?void 0:Ze.username)||null},[be,r]),ie=I.useCallback(async pe=>{const xe=ge(pe);xe&&(Le(pe==="next"?"left":"right"),ye.current&&clearTimeout(ye.current),ye.current=setTimeout(()=>{Le(null),ye.current=null},400),await Be(xe,!1))},[ge]),ze=I.useMemo(()=>!(r.length<=1),[r.length]),ve=I.useMemo(()=>!(r.length<=1),[r.length]),Be=I.useCallback(async(pe,xe=!0)=>{var He,Ze,Rt,wt;if(Ve.current[pe]){F(pe),U(!0),te(null),Ne(xe);return}Ee.current&&Ee.current,Ee.current=pe,X(!0),te(null),U(!0),F(pe),Ne(xe);try{const $e=await It(`/organizer_attendees/${pe}/details`);if(Ee.current!==pe)return;if($e.status===401)throw localStorage.removeItem("access_token"),new Error("Session expired. Please log in again.");if($e.status===403)throw new Error("Access denied. Organizer permissions required.");if($e.status===404)throw new Error("Attendee details not found.");if(!$e.ok)throw new Error("Failed to load attendee details");const Je=await $e.json();if(Je.status==="success"&&Je.attendee){const qt={username:Je.attendee.username,name:Je.attendee.name||Je.attendee.username,image_data:Je.attendee.image_data?`data:image/jpeg;base64,${Je.attendee.image_data}`:null,last_joined_date:Je.attendee.last_joined_date,self_tags:((He=Je.attendee.tags)==null?void 0:He.tags_work)||[],desiring_tags:((Ze=Je.attendee.tags)==null?void 0:Ze.desiring_tags_work)||[],lobbies_attended:((Rt=Je.attendee.stats)==null?void 0:Rt.lobbies_attended)||0,rounds_paired:((wt=Je.attendee.stats)==null?void 0:wt.rounds_paired)||0};ee(je=>{const Wt={...je,[pe]:qt};return Ve.current=Wt,Wt}),Ee.current===pe&&F(pe)}else throw new Error(Je.error||"Failed to load attendee details")}catch($e){Ee.current===pe&&(console.error("Error fetching attendee details:",$e),te($e.message||"An error occurred while loading details."))}finally{Ee.current===pe&&(X(!1),Ee.current=null)}},[]),nt=I.useCallback(()=>{J.current&&clearTimeout(J.current),ye.current&&clearTimeout(ye.current),U(!1),te(null),Le(null),Ne(!1),J.current=setTimeout(()=>{F(null),J.current=null},300)},[]);I.useEffect(()=>()=>{J.current&&clearTimeout(J.current)},[]),I.useEffect(()=>{const pe=xe=>{xe.key==="Escape"&&j&&(xe.stopPropagation(),nt())};return document.addEventListener("keydown",pe,!0),()=>document.removeEventListener("keydown",pe,!0)},[j,nt]),I.useEffect(()=>{if(j){const pe=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=pe}}},[j]),I.useEffect(()=>()=>{ye.current&&clearTimeout(ye.current)},[]);const Ae=I.useMemo(()=>r.map((pe,xe)=>({username:pe.username||`temp-${xe}`,name:pe.name||pe.username||`User ${xe+1}`,small_image_data:pe.small_image_data||null})),[r]);return x.jsxs("section",{className:`attendees-root ${j&&Se?"attendees-root-modal-open":""}`,ref:a,"aria-label":"Your Community",children:[x.jsxs("div",{className:"attendees-card",children:[x.jsx("header",{className:"attendees-header",children:x.jsx("h2",{className:"attendees-title",children:"Your Community"})}),x.jsxs("div",{className:"attendees-carouselWrap",children:[x.jsx("button",{type:"button",className:"attendees-arrow attendees-arrowLeft","aria-label":"Scroll left",onClick:()=>he(-1),disabled:!Z.left||w,children:""}),x.jsx("div",{ref:o,className:"attendees-scroller",role:"list","aria-label":"Community attendees list",onMouseLeave:()=>{w||y(null)},children:Ae.map((pe,xe)=>{const He=p===pe.username,Ze=p!==null,Rt=v[pe.username],wt=R[pe.username];return x.jsxs("div",{"data-index":xe,className:["attendees-item",He?"is-active":"",Ze&&!He?"is-dimmed":"",w?"is-touch":"is-mouse"].join(" "),role:"listitem",tabIndex:0,onMouseEnter:()=>{w||y(pe.username)},onFocus:()=>y(pe.username),onClick:()=>{w&&y(pe.username),Be(pe.username,!0)},onKeyDown:$e=>{($e.key==="Enter"||$e.key===" ")&&($e.preventDefault(),y(pe.username)),$e.key==="Escape"&&y(null)},children:[x.jsx("div",{className:"attendees-avatarWrap","aria-hidden":"true",children:wt?x.jsx(ff,{size:30,className:"attendees-tile-spinner"}):Rt?x.jsx("img",{className:"attendees-avatarImg",src:Rt,alt:"",onError:$e=>{$e.target.src="/assets/fakeprofile.png"}}):x.jsx("img",{className:"attendees-avatarImg",src:"/assets/fakeprofile.png",alt:""})}),x.jsx("div",{className:"attendees-name",title:pe.name,children:pe.name})]},pe.username)})}),x.jsx("button",{type:"button",className:"attendees-arrow attendees-arrowRight","aria-label":"Scroll right",onClick:()=>he(1),disabled:!Z.right||w,children:""})]}),x.jsxs("div",{className:"attendees-dots","aria-hidden":"true",children:[x.jsx("span",{className:"attendees-dot is-on"}),x.jsx("span",{className:"attendees-dot"}),x.jsx("span",{className:"attendees-dot"}),x.jsx("span",{className:"attendees-dot"})]})]}),j&&x.jsxs(x.Fragment,{children:[r.length>1&&x.jsxs(x.Fragment,{children:[x.jsx("button",{type:"button",className:"attendee-modal-nav-arrow attendee-modal-nav-left",onClick:pe=>{pe.stopPropagation(),ie("prev")},disabled:!ze,children:""}),x.jsx("button",{type:"button",className:"attendee-modal-nav-arrow attendee-modal-nav-right",onClick:pe=>{pe.stopPropagation(),ie("next")},disabled:!ve,children:""})]}),x.jsx("div",{className:"attendee-modal-overlay",onClick:nt,children:x.jsx("div",{className:`attendee-modal-content ${ke?`swipe-${ke}`:""}`,onClick:pe=>pe.stopPropagation(),children:re?x.jsxs("div",{className:"attendee-modal-loading",children:[x.jsx(ff,{size:60}),x.jsx("p",{children:"Loading attendee details..."})]}):le?x.jsx("div",{className:"attendee-modal-error",children:x.jsx("p",{className:"attendee-modal-error-message",children:le})}):W&&q[W]?x.jsx("div",{className:"attendee-modal-inner",children:(()=>{const pe=q[W];return x.jsxs(x.Fragment,{children:[x.jsx("h2",{className:"attendee-modal-header",id:"attendee-modal-title",children:pe.name}),x.jsxs("div",{className:"attendee-modal-grid",children:[x.jsxs("div",{className:"attendee-modal-left",children:[x.jsx("div",{className:"attendee-modal-date",children:_S(pe.last_joined_date)}),x.jsxs("div",{className:"attendee-modal-profile-card",children:[x.jsx("div",{className:"attendee-modal-profile-img-wrapper",children:pe.image_data?x.jsx("img",{className:"attendee-modal-profile-img",src:pe.image_data,alt:pe.name,onError:xe=>{xe.target.src="/assets/fakeprofile.png"}}):x.jsx("img",{className:"attendee-modal-profile-img",src:"/assets/fakeprofile.png",alt:pe.name})}),x.jsx("div",{className:"attendee-modal-profile-footer",children:pe.name})]})]}),x.jsxs("div",{className:"attendee-modal-right",children:[x.jsxs("div",{className:"attendee-modal-stat",children:[x.jsx("span",{className:"attendee-modal-stat-label",children:"events attended"}),x.jsx("span",{className:"attendee-modal-stat-value",children:pe.lobbies_attended})]}),x.jsxs("div",{className:"attendee-modal-stat",children:[x.jsx("span",{className:"attendee-modal-stat-label",children:"real connections"}),x.jsxs("div",{className:"attendee-modal-stat-value-with-icons",children:[x.jsx("span",{className:"attendee-modal-stat-value",children:pe.rounds_paired}),x.jsx("div",{className:"attendee-modal-staggered-icons",children:[...Array(4)].map((xe,He)=>x.jsx("img",{className:"attendee-modal-staggered-icon",src:"/assets/fakeprofile.png",alt:""},He))})]})]}),x.jsxs("div",{className:"attendee-modal-tags-section",children:[x.jsx("h3",{className:"attendee-modal-tags-label",children:"who I am:"}),x.jsx("div",{className:"attendee-modal-tags-container",children:pe.self_tags&&pe.self_tags.length>0?pe.self_tags.map((xe,He)=>x.jsx(hf,{tag:xe},`self-${He}-${xe}`)):x.jsx("span",{className:"attendee-modal-empty-state",children:"No tags"})})]}),x.jsxs("div",{className:"attendee-modal-tags-section",children:[x.jsx("h3",{className:"attendee-modal-tags-label",children:"looking for:"}),x.jsx("div",{className:"attendee-modal-tags-container",children:pe.desiring_tags&&pe.desiring_tags.length>0?pe.desiring_tags.map((xe,He)=>x.jsx(hf,{tag:xe},`desiring-${He}-${xe}`)):x.jsx("span",{className:"attendee-modal-empty-state",children:"No tags"})})]})]})]})]})})()}):null})})]})]})},kS=()=>{const{user:r,permissions:o,checkAuth:a}=I.useContext(Xn),f=Pn(),[p,y]=I.useState([]),[w,S]=I.useState(!0),[v,E]=I.useState(null);I.useEffect(()=>{o!==null&&o!=="admin"&&o!=="organizer"&&f("/organizer-signup")},[o,f]),I.useEffect(()=>{a()},[a]);const A=I.useCallback(async()=>{S(!0),E(null);try{const N=await It("/organizer_attendees");if(N.status===401){localStorage.removeItem("access_token"),f("/organizer-signup");return}if(N.status===403){E("Access denied. Organizer permissions required."),S(!1);return}if(!N.ok)throw new Error("Failed to load attendees");const R=await N.json();if(R.status==="success")y(R.attendees||[]);else throw new Error(R.error||"Failed to load attendees")}catch(N){console.error("Error fetching attendees:",N),N.message==="Failed to fetch"||N.message.includes("network")?E("Network error. Please check your connection and try again."):E(N.message||"An error occurred. Please try again.")}finally{S(!1)}},[f]);return I.useEffect(()=>{(o==="organizer"||o==="admin")&&A()},[o,A]),x.jsxs("div",{className:"organizer-dashboard",children:[x.jsxs("div",{className:"dashboard-header",children:[x.jsx("h1",{children:"Organizer Dashboard"}),x.jsx("button",{onClick:()=>f("/"),className:"dashboard-home-button",children:"Home"})]}),w?x.jsx("div",{className:"attendees-loading-container",children:x.jsx(ff,{size:60})}):v?x.jsxs("div",{className:"attendees-error-container",children:[x.jsx("div",{className:"attendees-error-message",children:v}),x.jsx("button",{className:"attendees-retry-button",onClick:A,children:"Retry"})]}):p.length===0?x.jsx("div",{className:"attendees-empty-container",children:x.jsx("div",{className:"attendees-empty-message",children:"No attendees yet"})}):x.jsx(RS,{attendees:p})]})},PS=5e3,OS=()=>{const{checkAuth:r,permissions:o,user:a}=I.useContext(Xn),f=Pn(),[p,y]=I.useState([]),[w,S]=I.useState(!0),[v,E]=I.useState(null),[A,N]=I.useState(!1);return I.useEffect(()=>{r()},[r]),I.useEffect(()=>{a==="topaz"&&o==="admin"?N(!0):o!==null&&a!==null&&f("/")},[o,a,f]),I.useEffect(()=>{if(!A)return;let R=!0,M,L=!0;const B=async()=>{L&&S(!0),E(null);try{const j=await It("/admin_all_lobbies");if(!j.ok)throw new Error("Failed to fetch lobbies");const U=await j.json();if(U.status!=="success"||!Array.isArray(U.lobbies))throw new Error("Invalid response format");if(!R)return;y(U.lobbies),console.log("Received lobbies data:",U.lobbies)}catch(j){R&&E(j.message||"Error fetching lobbies")}finally{R&&L&&S(!1),L=!1,M=setTimeout(B,PS)}};return B(),()=>{R=!1,M&&clearTimeout(M)}},[A]),w?x.jsx("div",{className:"master-lobby-container",children:x.jsxs("div",{className:"loading-state",children:[x.jsx("div",{className:"loading-spinner"}),x.jsx("p",{children:"Loading lobbies..."})]})}):v&&p.length===0?x.jsx("div",{className:"master-lobby-container",children:x.jsx("div",{className:"error-state",children:x.jsx("p",{children:v})})}):p.length===0?x.jsx("div",{className:"master-lobby-container",children:x.jsx("div",{className:"empty-state",children:x.jsx("p",{children:"No active lobbies found"})})}):x.jsxs("div",{className:"master-lobby-container",children:[x.jsx("button",{className:"back-button",onClick:()=>f(-1),children:"Back"}),v&&x.jsxs("div",{className:"error-banner",style:{backgroundColor:"#f8d7da",color:"#721c24",padding:"0.75rem",marginBottom:"1rem",borderRadius:"0.25rem",border:"1px solid #f5c6cb"},children:[v," (showing last known data)"]}),x.jsx("div",{className:"master-lobby-grid",children:p.map(R=>x.jsx("div",{className:"lobby-tile",children:x.jsxs("div",{className:"lobby-tile-content",children:[x.jsx("h3",{className:"lobby-code",children:R.code}),x.jsxs("div",{className:"lobby-stats",children:[x.jsxs("span",{className:"player-count",children:[R.player_count," players"]}),x.jsx("span",{className:"lobby-state",children:R.lobby_state})]}),x.jsxs("div",{style:{fontSize:"0.7rem",color:"#666",marginTop:"0.5rem"},children:["Debug: player_count=",R.player_count,", lobby_state=",R.lobby_state]})]})},R.code))})]})},Zp=({size:r=60,className:o=""})=>x.jsx("div",{className:`attendees-spinner ${o}`,style:{width:r,height:r},children:x.jsx("div",{className:"attendees-spinner-inner"})}),MS=r=>r?`data:image/jpeg;base64,${r}`:"/assets/fakeprofile.png",Dd=r=>[...r].sort((o,a)=>{var S,v,E,A;const f=o.lobby_date?new Date(o.lobby_date).getTime():0,p=a.lobby_date?new Date(a.lobby_date).getTime():0;if(f!==p)return p-f;const y=(((S=o.paired_with)==null?void 0:S.name)||((v=o.paired_with)==null?void 0:v.username)||"").toLowerCase(),w=(((E=a.paired_with)==null?void 0:E.name)||((A=a.paired_with)==null?void 0:A.username)||"").toLowerCase();return y<w?-1:y>w?1:0}),DS=(r,o)=>{var w;if(!r||r.length===0)return{hasNew:o.length>0,hasUpdated:!1};const a=new Set(r.map(S=>{var v;return(v=S.paired_with)==null?void 0:v.username})),f=o.some(S=>{var v;return((v=S.paired_with)==null?void 0:v.username)&&!a.has(S.paired_with.username)});let p=!1;const y=new Map(r.map(S=>{var v;return[(v=S.paired_with)==null?void 0:v.username,S]}));for(const S of o){const v=(w=S.paired_with)==null?void 0:w.username;if(!v)continue;const E=y.get(v);if(E&&JSON.stringify(E)!==JSON.stringify(S)){p=!0;break}}return{hasNew:f,hasUpdated:p}},LS=(r,o,a)=>{var y;if(!r||r.length===0)return o;const f=[...r],p=[];for(const w of o){const S=(y=w.paired_with)==null?void 0:y.username;if(!S)continue;const v=f.findIndex(E=>{var A;return((A=E.paired_with)==null?void 0:A.username)===S});v>=0?f[v]=w:p.push(w)}return[...p,...f]},yc=(r,o)=>{var p;const a=(p=r.paired_with)==null?void 0:p.username;if(a)return a;const f=`${r.lobby_date||""}-${r.interaction_date||""}`;return f!=="-"?f:`interaction-${o}`},uc=(r,o)=>r.find((a,f)=>yc(a,f)===o)||null,Kp=async(r,o,a,f)=>{try{const p=await It("/update-paired-interaction",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({lobby_id:r,paired_with_username:o,...a}),signal:f});if(!p.ok){const w=await p.text();throw new Error(w||`HTTP ${p.status}`)}return{success:!0,data:await p.json()}}catch(p){if(p.name==="AbortError")throw p;return{success:!1,error:p.message}}},BS=({rating:r,onRatingChange:o,interactionKey:a})=>{const f=r||0,p=y=>{o(y)};return x.jsxs("div",{className:"star-rating-container",children:[x.jsx("div",{className:"star-rating-question",children:"How was the chat?"}),x.jsx("div",{className:"star-rating-stars",children:[1,2,3,4,5].map(y=>x.jsx("button",{type:"button",className:`star-button ${y<=f?"star-filled":"star-empty"}`,onClick:()=>p(y),"aria-label":`Rate ${y} star${y!==1?"s":""}`,children:""},y))}),x.jsx("div",{className:"star-rating-disclaimer",children:"(Don't worry, your response is hidden)"})]})},jS=({value:r,onChange:o,interactionKey:a})=>{const f=p=>{o(p)};return x.jsxs("div",{className:"share-contact-container",children:[x.jsx("div",{className:"share-contact-question",children:"Share Your Contact?"}),x.jsxs("div",{className:"share-contact-buttons",children:[x.jsx("button",{type:"button",className:`share-contact-button ${r===!1?"selected":""}`,onClick:()=>f(!1),children:"No"}),x.jsx("button",{type:"button",className:`share-contact-button ${r===!0?"selected":""}`,onClick:()=>f(!0),children:"Yes"})]})]})},FS=()=>{const r=Pn(),{checkAuth:o,user:a,isAuthLoading:f}=I.useContext(Xn),[p,y]=I.useState([]),[w,S]=I.useState(!0),[v,E]=I.useState(!1),[A,N]=I.useState(!0),[R,M]=I.useState(0),[L,B]=I.useState(null),[j,U]=I.useState(!1),[W,F]=I.useState(new Map),[q,ee]=I.useState(new Map),re=I.useRef(!1),X=I.useRef(!0),le=I.useRef(null),te=I.useRef(null),ke=I.useRef([]),Le=I.useRef(!1),Se=I.useRef(new Map),Ne=I.useRef(new Map),Ee=I.useRef(new Map),J=I.useRef(new Map),Ve=I.useRef(new Map),ye=I.useRef(new Map),he=I.useCallback(G=>{const we=Se.current.get(G);we&&(clearTimeout(we),Se.current.delete(G));const be=Ne.current.get(G);be&&(be.abort(),Ne.current.delete(G))},[]),De=I.useCallback(async(G,we,be)=>{if(!re.current){re.current=!0;try{const ge=await It(`/paired-player-history?offset=${G}&limit=30`);if(!ge.ok){if(ge.status===401){X.current&&r("/");return}const ve=await ge.text();throw new Error(`HTTP ${ge.status}: ${ve}`)}const ie=await ge.json();if(!X.current)return;if(ie.status!=="success"||!Array.isArray(ie.interactions))throw new Error("Invalid response format");const ze=Dd(ie.interactions);if(be){const ve=ke.current,Be=DS(ve,ze),nt=LS(ve,ze,!0);console.log("[PairedHistory] Poll update:",{count:ze.length,hasNew:Be.hasNew,hasUpdated:Be.hasUpdated});const Ae=Dd(nt);y(Ae),ke.current=Ae,N(ie.has_more),M(ie.next_offset||0),(Be.hasNew||Be.hasUpdated)&&U(!0)}else we?(console.log("[PairedHistory] Initial load:",{count:ze.length}),y(ze),ke.current=ze,N(ie.has_more),M(ie.next_offset||0),S(!1)):(y(ve=>{const Be=[...ve,...ze],nt=Dd(Be);return ke.current=nt,nt}),N(ie.has_more),M(ie.next_offset||0),E(!1));B(null)}catch(ge){if(console.error("[PairedHistory] Error:",{message:ge.message,type:be?"polling":we?"initial":"infinite-scroll"}),!X.current)return;B(ge.message),Rn.error(`Error: ${ge.message}`),we?S(!1):be||E(!1)}finally{X.current&&(re.current=!1)}}},[r]);I.useEffect(()=>{if(X.current=!0,!f){if(!a){r("/");return}if(!Le.current)return Le.current=!0,De(0,!0,!1),()=>{X.current=!1}}},[f,a,r,De]),I.useEffect(()=>{const G=()=>{document.hidden||re.current||!X.current||De(0,!1,!0)};if(document.hidden)return;const we=setInterval(G,5e3),be=()=>{};return document.addEventListener("visibilitychange",be),()=>{clearInterval(we),document.removeEventListener("visibilitychange",be)}},[De]),I.useEffect(()=>(j&&(le.current&&clearTimeout(le.current),le.current=setTimeout(()=>{X.current&&U(!1)},4e3)),()=>{le.current&&clearTimeout(le.current)}),[j]),I.useEffect(()=>{if(!A||v||re.current)return;const G=new IntersectionObserver(we=>{we[0].isIntersecting&&A&&!v&&!re.current&&X.current&&(E(!0),De(R,!1,!1))},{root:null,rootMargin:"300px",threshold:.1});return te.current&&G.observe(te.current),()=>{G.disconnect()}},[A,v,R,De]),I.useEffect(()=>{ke.current=p},[p]),I.useEffect(()=>{Ve.current=W},[W]),I.useEffect(()=>{ye.current=q},[q]),I.useEffect(()=>{p.length!==0&&(F(G=>{const we=new Map(G);let be=!1;return p.forEach((ge,ie)=>{const ze=yc(ge,ie);if(!we.has(ze)){const ve=ge.partner_star_rating;ve!==null&&ve>=1&&ve<=5&&(we.set(ze,ve),be=!0)}}),be?we:G}),ee(G=>{const we=new Map(G);let be=!1;return p.forEach((ge,ie)=>{const ze=yc(ge,ie);if(!we.has(ze)){const ve=ge.user_show_contact;ve!==null&&typeof ve=="boolean"&&(we.set(ze,ve),be=!0)}}),be?we:G}))},[p]);const ce=I.useCallback((G,we)=>{var ze;const be=uc(ke.current,G);if(!(be!=null&&be.lobby_id)||!((ze=be.paired_with)!=null&&ze.username)){Rn.error("Unable to save: interaction not found");return}let ge=Ee.current.get(G);if(ge===void 0){const ve=Ve.current.get(G),Be=be.partner_star_rating;ge=ve??(Be!==null&&Be>=1&&Be<=5?Be:null),Ee.current.set(G,ge)}he(G),F(ve=>{const Be=new Map(ve);return Be.set(G,we),Ve.current=Be,Be});const ie=setTimeout(async()=>{var pe;if(!X.current)return;const ve=uc(ke.current,G);if(!(ve!=null&&ve.lobby_id)||!((pe=ve.paired_with)!=null&&pe.username)){if(!X.current)return;F(xe=>{const He=new Map(xe);return ge!=null?He.set(G,ge):He.delete(G),Ve.current=He,He}),Ee.current.delete(G),Rn.error("Unable to save: interaction not found");return}const Be=new AbortController;Ne.current.set(G,Be);const nt=ve.paired_with.username,Ae=ve.lobby_id;console.log("[PairedHistory] Updating rating:",{partner_username:nt,lobby_id:Ae,rating:we,previous_rating:ge});try{const xe=await Kp(Ae,nt,{partner_star_rating:we},Be.signal);if(!X.current)return;Ne.current.delete(G),xe.success?(Ee.current.delete(G),console.log("[PairedHistory] Rating update successful:",{partner_username:nt,lobby_id:Ae,rating:we,response:xe.data}),Rn.success("Saved",{duration:1e3,style:{background:"#144dff",color:"white",borderRadius:"8px",padding:"12px 20px",fontSize:"0.9rem",fontWeight:"500"}})):(console.error("[PairedHistory] Rating update failed:",{partner_username:nt,lobby_id:Ae,rating:we,error:xe.error}),F(He=>{const Ze=new Map(He);return ge!=null?Ze.set(G,ge):Ze.delete(G),Ve.current=Ze,Ze}),Ee.current.delete(G),Rn.error(xe.error||"Failed to save. Please try again."))}catch(xe){if(!X.current)return;if(Ne.current.delete(G),xe.name==="AbortError"){console.log("[PairedHistory] Rating update aborted:",{partner_username:nt,lobby_id:Ae});return}console.error("[PairedHistory] Rating update error:",{partner_username:nt,lobby_id:Ae,rating:we,error:xe.message}),F(He=>{const Ze=new Map(He);return ge!=null?Ze.set(G,ge):Ze.delete(G),Ve.current=Ze,Ze}),Ee.current.delete(G),Rn.error(xe.message||"Failed to save. Please try again.")}},500);Se.current.set(G,ie)},[he]),Z=I.useCallback((G,we)=>{var ze;const be=uc(ke.current,G);if(!(be!=null&&be.lobby_id)||!((ze=be.paired_with)!=null&&ze.username)){Rn.error("Unable to save: interaction not found");return}let ge=J.current.get(G);if(ge===void 0){const ve=ye.current.get(G),Be=be.user_show_contact;ge=ve??(Be!==null&&typeof Be=="boolean"?Be:null),J.current.set(G,ge)}he(G),ee(ve=>{const Be=new Map(ve);return Be.set(G,we),ye.current=Be,Be});const ie=setTimeout(async()=>{var pe;if(!X.current)return;const ve=uc(ke.current,G);if(!(ve!=null&&ve.lobby_id)||!((pe=ve.paired_with)!=null&&pe.username)){if(!X.current)return;ee(xe=>{const He=new Map(xe);return ge!=null?He.set(G,ge):He.delete(G),ye.current=He,He}),J.current.delete(G),Rn.error("Unable to save: interaction not found");return}const Be=new AbortController;Ne.current.set(G,Be);const nt=ve.paired_with.username,Ae=ve.lobby_id;console.log("[PairedHistory] Updating share contact:",{partner_username:nt,lobby_id:Ae,user_show_contact:we,previous_value:ge});try{const xe=await Kp(Ae,nt,{user_show_contact:we},Be.signal);if(!X.current)return;Ne.current.delete(G),xe.success?(J.current.delete(G),console.log("[PairedHistory] Share contact update successful:",{partner_username:nt,lobby_id:Ae,user_show_contact:we,response:xe.data}),Rn.success("Saved",{duration:1e3,style:{background:"#144dff",color:"white",borderRadius:"8px",padding:"12px 20px",fontSize:"0.9rem",fontWeight:"500"}})):(console.error("[PairedHistory] Share contact update failed:",{partner_username:nt,lobby_id:Ae,user_show_contact:we,error:xe.error}),ee(He=>{const Ze=new Map(He);return ge!=null?Ze.set(G,ge):Ze.delete(G),ye.current=Ze,Ze}),J.current.delete(G),Rn.error(xe.error||"Failed to save. Please try again."))}catch(xe){if(!X.current)return;if(Ne.current.delete(G),xe.name==="AbortError"){console.log("[PairedHistory] Share contact update aborted:",{partner_username:nt,lobby_id:Ae});return}console.error("[PairedHistory] Share contact update error:",{partner_username:nt,lobby_id:Ae,user_show_contact:we,error:xe.message}),ee(He=>{const Ze=new Map(He);return ge!=null?Ze.set(G,ge):Ze.delete(G),ye.current=Ze,Ze}),J.current.delete(G),Rn.error(xe.message||"Failed to save. Please try again.")}},300);Se.current.set(G,ie)},[he]);return I.useEffect(()=>()=>{X.current=!1,le.current&&clearTimeout(le.current),Ne.current.forEach(G=>{G.abort()}),Se.current.forEach(G=>{clearTimeout(G)}),Se.current.clear(),Ne.current.clear(),Ee.current.clear(),J.current.clear()},[]),f?x.jsx(ah,{fullScreen:!0}):x.jsxs("div",{className:"paired-player-history-container",children:[x.jsx(_c,{position:"top-center"}),j&&x.jsx("div",{className:"new-info-indicator",children:"New Notifications"}),x.jsxs("div",{className:"paired-player-history-content",children:[x.jsx("h1",{className:"paired-player-history-title",children:"Paired Player History"}),w&&x.jsx("div",{className:"loading-grid",children:Array.from({length:30}).map((G,we)=>x.jsx(Zp,{size:60},we))}),!w&&p.length===0&&x.jsx("div",{className:"empty-state",children:x.jsx("p",{children:"No Past History Available"})}),!w&&p.length>0&&x.jsxs("div",{className:"interactions-list",children:[p.map((G,we)=>{const be=G.paired_with||{},ge=MS(be.image_data),ie=yc(G,we),ze=W.get(ie)??(G.partner_star_rating!==null&&G.partner_star_rating>=1&&G.partner_star_rating<=5?G.partner_star_rating:null),ve=q.has(ie)?q.get(ie):G.user_show_contact!==null&&typeof G.user_show_contact=="boolean"?G.user_show_contact:null,Be=be.contact_url&&G.partner_show_contact===!0;return x.jsxs("div",{className:"interaction-card",children:[x.jsxs("div",{className:"interaction-card-main",children:[x.jsxs("div",{className:"interaction-card-left",children:[x.jsx("div",{className:"interaction-card-image",children:x.jsx("img",{src:ge,alt:be.name||"Partner",onError:nt=>{nt.target.src="/assets/fakeprofile.png"}})}),x.jsx("div",{className:"interaction-card-name",children:be.name||be.username||"Unknown"})]}),x.jsxs("div",{className:"interaction-card-right",children:[x.jsx(BS,{rating:ze,onRatingChange:nt=>ce(ie,nt),interactionKey:ie}),x.jsx(jS,{value:ve,onChange:nt=>Z(ie,nt),interactionKey:ie})]})]}),Be&&x.jsxs("div",{className:"interaction-card-contact-row",children:[x.jsx("img",{src:"/assets/contact_url_asset.png",alt:"Contact",className:"contact-url-icon"}),x.jsx("a",{href:be.contact_url,target:"_blank",rel:"noopener noreferrer",className:"contact-url-link",title:be.contact_url,children:be.contact_url})]})]},ie)}),A&&x.jsx("div",{ref:te,"data-sentinel":"true",className:"infinite-scroll-sentinel",children:v&&x.jsx(Zp,{size:40})}),!A&&x.jsx("div",{className:"no-more-interactions",children:"No more interactions"})]})]})]})},VS=!0,US=()=>{const r=Pn(),{checkAuth:o,user:a,isAuthLoading:f}=I.useContext(Xn),[p,y]=I.useState(""),[w,S]=I.useState(""),[v,E]=I.useState(""),[A,N]=I.useState(!0),[R,M]=I.useState(!1),[L,B]=I.useState(""),[j,U]=I.useState(!1);I.useEffect(()=>{if(f)return;if(!a){r("/login");return}(async()=>{var q,ee;try{const re=await It("/load_user");if(re.status===401){r("/login");return}if(!re.ok)throw new Error("Failed to load user data");const X=await re.json();y(((q=X.profile)==null?void 0:q.name)||""),S(X.email||""),E(((ee=X.profile)==null?void 0:ee.contact_url)||"")}catch(re){console.error("Error fetching user data:",re),B("Failed to load user data. Please try again.")}finally{N(!1)}})()},[f,a,r]);const W=async F=>{if(F.preventDefault(),M(!0),B(""),!w||!w.trim()){B("Email is required to access your matches."),M(!1);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w.trim())){B("Please enter a valid email address."),M(!1);return}try{const re=await It("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:p||"",email:w||"",contact_url:v||""})});if(re.status===401){r("/login");return}if(!re.ok){const X=await re.json();throw new Error(X.detail||X.message||"Failed to update profile")}if(VS)try{const le=await(await It("/auth/send-magic-link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w.trim()})})).json();le.success?(U(!0),Rn.success("Check your email for the magic link!",{duration:4e3,style:{background:"#4b73ef",color:"white",borderRadius:"8px",padding:"12px 20px",fontSize:"0.9rem",fontWeight:"500"}})):(console.error("Magic link failed:",le.error),Rn.success("Profile saved! (Email verification unavailable)",{duration:3e3}),await o(),setTimeout(()=>r("/paired-player-history"),1500))}catch(X){console.error("Magic link request error:",X),Rn.success("Profile saved!",{duration:2e3}),await o(),setTimeout(()=>r("/paired-player-history"),1500)}}catch(ee){console.error("Error updating profile:",ee),B(ee.message||"An error occurred. Please try again.")}finally{M(!1)}};return f||A?x.jsx(ah,{fullScreen:!0}):j?x.jsxs("div",{className:"post-event-auth-container",children:[x.jsx(_c,{position:"top-center"}),x.jsxs("div",{className:"step-form-container",style:{textAlign:"center",padding:"40px 20px"},children:[x.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:""}),x.jsx("h2",{style:{color:"#ffffff",marginBottom:"16px",fontSize:"1.5rem"},children:"Check Your Email!"}),x.jsxs("p",{style:{color:"rgba(255,255,255,0.8)",marginBottom:"24px",lineHeight:"1.6"},children:["We sent a magic link to ",x.jsx("strong",{children:w}),x.jsx("br",{}),x.jsx("br",{}),"Click the link in your email to access your matches."]}),x.jsxs("p",{style:{color:"rgba(255,255,255,0.6)",fontSize:"0.85rem",marginBottom:"24px"},children:["The link expires in 15 minutes.",x.jsx("br",{}),"Don't see it? Check your spam folder."]}),x.jsx("button",{onClick:()=>U(!1),className:"primary-button",style:{backgroundColor:"transparent",border:"1px solid rgba(255,255,255,0.3)",marginTop:"10px"},children:" Back to Form"})]})]}):x.jsxs("div",{className:"post-event-auth-container",children:[x.jsx(_c,{position:"top-center"}),x.jsx("button",{onClick:()=>r("/"),className:"homescreen-button",children:"Home"}),x.jsx("h3",{className:"post-event-auth-header",children:"Gain Access to Your Matches"}),x.jsx("div",{className:"step-form-container",children:x.jsxs("form",{onSubmit:W,children:[L&&x.jsx("div",{className:"error-message",style:{marginBottom:"20px"},children:L}),x.jsxs("div",{style:{marginTop:"0"},children:[x.jsx("label",{className:"step-label",children:"Name"}),x.jsx("input",{type:"text",value:p,onChange:F=>y(F.target.value),placeholder:"Enter your name",className:"step-input"})]}),x.jsxs("div",{style:{marginTop:"20px"},children:[x.jsxs("label",{className:"step-label",children:["Email ",x.jsx("span",{style:{color:"#ff6b6b"},children:"*"})]}),x.jsx("input",{type:"email",value:w,onChange:F=>S(F.target.value),placeholder:"Enter your email",className:"step-input",required:!0})]}),x.jsxs("div",{style:{marginTop:"20px"},children:[x.jsx("label",{className:"step-label",children:"Contact URL"}),x.jsx("input",{type:"text",value:v,onChange:F=>E(F.target.value),placeholder:"Enter your contact URL (e.g., https://linkedin.com/...)",className:"step-input"})]}),x.jsx("button",{type:"submit",className:"primary-button",disabled:R,style:{marginTop:"30px"},children:R?"Submitting...":"Submit"})]})})]})},zS=()=>{const r=Pn(),{checkAuth:o}=I.useContext(Xn),[a,f]=I.useState("verifying"),[p,y]=I.useState("");return I.useEffect(()=>{(async()=>{try{const S=await It("/auth/session",{method:"GET"});S.ok?(await S.json()).authenticated?(f("success"),await o(),setTimeout(()=>{r("/")},2e3)):(f("error"),y("Session not found. Please try logging in again.")):(f("error"),y("Could not verify your session. Please try again."))}catch(S){console.error("Session verification error:",S),f("error"),y("Network error. Please check your connection and try again.")}})()},[o,r]),x.jsx("div",{className:"auth-success-container",children:x.jsxs("div",{className:"auth-success-card",children:[a==="verifying"&&x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"auth-success-spinner"}),x.jsx("h2",{children:"Signing you in..."}),x.jsx("p",{children:"Please wait while we verify your session."})]}),a==="success"&&x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"auth-success-checkmark",children:""}),x.jsx("h2",{children:"Welcome to Reuneo!"}),x.jsx("p",{children:"You're now signed in. Redirecting you..."})]}),a==="error"&&x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"auth-success-error",children:""}),x.jsx("h2",{children:"Something went wrong"}),x.jsx("p",{children:p}),x.jsx("button",{className:"auth-success-button",onClick:()=>r("/login"),children:"Back to Login"})]})]})})};c2.createRoot(document.getElementById("root")).render(x.jsx(I.StrictMode,{children:x.jsx(u2,{children:x.jsxs(Ky,{basename:"/",children:[x.jsx(eb,{}),x.jsx(tb,{}),x.jsxs(Sy,{children:[x.jsx(Jn,{path:"/",element:x.jsx(JE,{})}),x.jsx(Jn,{path:"/login",element:x.jsx(nb,{})}),x.jsx(Jn,{path:"/signup",element:x.jsx(HE,{})}),x.jsx(Jn,{path:"/logout",element:x.jsx(rb,{})}),x.jsx(Jn,{path:"/lobby",element:x.jsx(Ib,{})}),x.jsx(Jn,{path:"/admin_lobby_view",element:x.jsx(CS,{})}),x.jsx(Jn,{path:"/create_lobby",element:x.jsx(bS,{})}),x.jsx(Jn,{path:"/product-selection",element:x.jsx(ES,{})}),x.jsx(Jn,{path:"/organizer-signup",element:x.jsx(AS,{})}),x.jsx(Jn,{path:"/organizer-signup-success",element:x.jsx(TS,{})}),x.jsx(Jn,{path:"/organizer-account-details",element:x.jsx(IS,{})}),x.jsx(Jn,{path:"/organizer-dashboard",element:x.jsx(kS,{})}),x.jsx(Jn,{path:"/master_lobby_view",element:x.jsx(OS,{})}),x.jsx(Jn,{path:"/paired-player-history",element:x.jsx(FS,{})}),x.jsx(Jn,{path:"/post-event-auth",element:x.jsx(US,{})}),x.jsx(Jn,{path:"/auth/success",element:x.jsx(zS,{})})]})]})})}));
