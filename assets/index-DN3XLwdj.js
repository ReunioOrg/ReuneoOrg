(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))u(p);new MutationObserver(p=>{for(const x of p)if(x.type==="childList")for(const w of x.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&u(w)}).observe(document,{childList:!0,subtree:!0});function a(p){const x={};return p.integrity&&(x.integrity=p.integrity),p.referrerPolicy&&(x.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?x.credentials="include":p.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function u(p){if(p.ep)return;p.ep=!0;const x=a(p);fetch(p.href,x)}})();var sc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rm(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var hd={exports:{}},Ia={},pd={exports:{}},kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r1;function f2(){if(r1)return kt;r1=1;var r=Symbol.for("react.element"),s=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),w=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),C=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),I=Symbol.iterator;function R(X){return X===null||typeof X!="object"?null:(X=I&&X[I]||X["@@iterator"],typeof X=="function"?X:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,j={};function B(X,G,Ce){this.props=X,this.context=G,this.refs=j,this.updater=Ce||O}B.prototype.isReactComponent={},B.prototype.setState=function(X,G){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,G,"setState")},B.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function W(){}W.prototype=B.prototype;function z(X,G,Ce){this.props=X,this.context=G,this.refs=j,this.updater=Ce||O}var F=z.prototype=new W;F.constructor=z,L(F,B.prototype),F.isPureReactComponent=!0;var Y=Array.isArray,K=Object.prototype.hasOwnProperty,ne={current:null},q={key:!0,ref:!0,__self:!0,__source:!0};function ie(X,G,Ce){var ae,se={},ee=null,Me=null;if(G!=null)for(ae in G.ref!==void 0&&(Me=G.ref),G.key!==void 0&&(ee=""+G.key),G)K.call(G,ae)&&!q.hasOwnProperty(ae)&&(se[ae]=G[ae]);var Se=arguments.length-2;if(Se===1)se.children=Ce;else if(1<Se){for(var Le=Array(Se),et=0;et<Se;et++)Le[et]=arguments[et+2];se.children=Le}if(X&&X.defaultProps)for(ae in Se=X.defaultProps,Se)se[ae]===void 0&&(se[ae]=Se[ae]);return{$$typeof:r,type:X,key:ee,ref:Me,props:se,_owner:ne.current}}function J(X,G){return{$$typeof:r,type:X.type,key:G,ref:X.ref,props:X.props,_owner:X._owner}}function we(X){return typeof X=="object"&&X!==null&&X.$$typeof===r}function Re(X){var G={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(Ce){return G[Ce]})}var Ae=/\/+/g;function Ee(X,G){return typeof X=="object"&&X!==null&&X.key!=null?Re(""+X.key):G.toString(36)}function Te(X,G,Ce,ae,se){var ee=typeof X;(ee==="undefined"||ee==="boolean")&&(X=null);var Me=!1;if(X===null)Me=!0;else switch(ee){case"string":case"number":Me=!0;break;case"object":switch(X.$$typeof){case r:case s:Me=!0}}if(Me)return Me=X,se=se(Me),X=ae===""?"."+Ee(Me,0):ae,Y(se)?(Ce="",X!=null&&(Ce=X.replace(Ae,"$&/")+"/"),Te(se,G,Ce,"",function(et){return et})):se!=null&&(we(se)&&(se=J(se,Ce+(!se.key||Me&&Me.key===se.key?"":(""+se.key).replace(Ae,"$&/")+"/")+X)),G.push(se)),1;if(Me=0,ae=ae===""?".":ae+":",Y(X))for(var Se=0;Se<X.length;Se++){ee=X[Se];var Le=ae+Ee(ee,Se);Me+=Te(ee,G,Ce,Le,se)}else if(Le=R(X),typeof Le=="function")for(X=Le.call(X),Se=0;!(ee=X.next()).done;)ee=ee.value,Le=ae+Ee(ee,Se++),Me+=Te(ee,G,Ce,Le,se);else if(ee==="object")throw G=String(X),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Me}function Z(X,G,Ce){if(X==null)return X;var ae=[],se=0;return Te(X,ae,"","",function(ee){return G.call(Ce,ee,se++)}),ae}function ke(X){if(X._status===-1){var G=X._result;G=G(),G.then(function(Ce){(X._status===0||X._status===-1)&&(X._status=1,X._result=Ce)},function(Ce){(X._status===0||X._status===-1)&&(X._status=2,X._result=Ce)}),X._status===-1&&(X._status=0,X._result=G)}if(X._status===1)return X._result.default;throw X._result}var ve={current:null},ye={transition:null},De={ReactCurrentDispatcher:ve,ReactCurrentBatchConfig:ye,ReactCurrentOwner:ne};function be(){throw Error("act(...) is not supported in production builds of React.")}return kt.Children={map:Z,forEach:function(X,G,Ce){Z(X,function(){G.apply(this,arguments)},Ce)},count:function(X){var G=0;return Z(X,function(){G++}),G},toArray:function(X){return Z(X,function(G){return G})||[]},only:function(X){if(!we(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},kt.Component=B,kt.Fragment=a,kt.Profiler=p,kt.PureComponent=z,kt.StrictMode=u,kt.Suspense=v,kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=De,kt.act=be,kt.cloneElement=function(X,G,Ce){if(X==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+X+".");var ae=L({},X.props),se=X.key,ee=X.ref,Me=X._owner;if(G!=null){if(G.ref!==void 0&&(ee=G.ref,Me=ne.current),G.key!==void 0&&(se=""+G.key),X.type&&X.type.defaultProps)var Se=X.type.defaultProps;for(Le in G)K.call(G,Le)&&!q.hasOwnProperty(Le)&&(ae[Le]=G[Le]===void 0&&Se!==void 0?Se[Le]:G[Le])}var Le=arguments.length-2;if(Le===1)ae.children=Ce;else if(1<Le){Se=Array(Le);for(var et=0;et<Le;et++)Se[et]=arguments[et+2];ae.children=Se}return{$$typeof:r,type:X.type,key:se,ref:ee,props:ae,_owner:Me}},kt.createContext=function(X){return X={$$typeof:w,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},X.Provider={$$typeof:x,_context:X},X.Consumer=X},kt.createElement=ie,kt.createFactory=function(X){var G=ie.bind(null,X);return G.type=X,G},kt.createRef=function(){return{current:null}},kt.forwardRef=function(X){return{$$typeof:E,render:X}},kt.isValidElement=we,kt.lazy=function(X){return{$$typeof:A,_payload:{_status:-1,_result:X},_init:ke}},kt.memo=function(X,G){return{$$typeof:C,type:X,compare:G===void 0?null:G}},kt.startTransition=function(X){var G=ye.transition;ye.transition={};try{X()}finally{ye.transition=G}},kt.unstable_act=be,kt.useCallback=function(X,G){return ve.current.useCallback(X,G)},kt.useContext=function(X){return ve.current.useContext(X)},kt.useDebugValue=function(){},kt.useDeferredValue=function(X){return ve.current.useDeferredValue(X)},kt.useEffect=function(X,G){return ve.current.useEffect(X,G)},kt.useId=function(){return ve.current.useId()},kt.useImperativeHandle=function(X,G,Ce){return ve.current.useImperativeHandle(X,G,Ce)},kt.useInsertionEffect=function(X,G){return ve.current.useInsertionEffect(X,G)},kt.useLayoutEffect=function(X,G){return ve.current.useLayoutEffect(X,G)},kt.useMemo=function(X,G){return ve.current.useMemo(X,G)},kt.useReducer=function(X,G,Ce){return ve.current.useReducer(X,G,Ce)},kt.useRef=function(X){return ve.current.useRef(X)},kt.useState=function(X){return ve.current.useState(X)},kt.useSyncExternalStore=function(X,G,Ce){return ve.current.useSyncExternalStore(X,G,Ce)},kt.useTransition=function(){return ve.current.useTransition()},kt.version="18.3.1",kt}var i1;function vf(){return i1||(i1=1,pd.exports=f2()),pd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s1;function h2(){if(s1)return Ia;s1=1;var r=vf(),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),u=Object.prototype.hasOwnProperty,p=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x={key:!0,ref:!0,__self:!0,__source:!0};function w(E,v,C){var A,I={},R=null,O=null;C!==void 0&&(R=""+C),v.key!==void 0&&(R=""+v.key),v.ref!==void 0&&(O=v.ref);for(A in v)u.call(v,A)&&!x.hasOwnProperty(A)&&(I[A]=v[A]);if(E&&E.defaultProps)for(A in v=E.defaultProps,v)I[A]===void 0&&(I[A]=v[A]);return{$$typeof:s,type:E,key:R,ref:O,props:I,_owner:p.current}}return Ia.Fragment=a,Ia.jsx=w,Ia.jsxs=w,Ia}var o1;function p2(){return o1||(o1=1,hd.exports=h2()),hd.exports}var h=p2(),N=vf();const Gt=rm(N);var oc={},md={exports:{}},Dr={},gd={exports:{}},xd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a1;function m2(){return a1||(a1=1,function(r){function s(ye,De){var be=ye.length;ye.push(De);e:for(;0<be;){var X=be-1>>>1,G=ye[X];if(0<p(G,De))ye[X]=De,ye[be]=G,be=X;else break e}}function a(ye){return ye.length===0?null:ye[0]}function u(ye){if(ye.length===0)return null;var De=ye[0],be=ye.pop();if(be!==De){ye[0]=be;e:for(var X=0,G=ye.length,Ce=G>>>1;X<Ce;){var ae=2*(X+1)-1,se=ye[ae],ee=ae+1,Me=ye[ee];if(0>p(se,be))ee<G&&0>p(Me,se)?(ye[X]=Me,ye[ee]=be,X=ee):(ye[X]=se,ye[ae]=be,X=ae);else if(ee<G&&0>p(Me,be))ye[X]=Me,ye[ee]=be,X=ee;else break e}}return De}function p(ye,De){var be=ye.sortIndex-De.sortIndex;return be!==0?be:ye.id-De.id}if(typeof performance=="object"&&typeof performance.now=="function"){var x=performance;r.unstable_now=function(){return x.now()}}else{var w=Date,E=w.now();r.unstable_now=function(){return w.now()-E}}var v=[],C=[],A=1,I=null,R=3,O=!1,L=!1,j=!1,B=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(ye){for(var De=a(C);De!==null;){if(De.callback===null)u(C);else if(De.startTime<=ye)u(C),De.sortIndex=De.expirationTime,s(v,De);else break;De=a(C)}}function Y(ye){if(j=!1,F(ye),!L)if(a(v)!==null)L=!0,ke(K);else{var De=a(C);De!==null&&ve(Y,De.startTime-ye)}}function K(ye,De){L=!1,j&&(j=!1,W(ie),ie=-1),O=!0;var be=R;try{for(F(De),I=a(v);I!==null&&(!(I.expirationTime>De)||ye&&!Re());){var X=I.callback;if(typeof X=="function"){I.callback=null,R=I.priorityLevel;var G=X(I.expirationTime<=De);De=r.unstable_now(),typeof G=="function"?I.callback=G:I===a(v)&&u(v),F(De)}else u(v);I=a(v)}if(I!==null)var Ce=!0;else{var ae=a(C);ae!==null&&ve(Y,ae.startTime-De),Ce=!1}return Ce}finally{I=null,R=be,O=!1}}var ne=!1,q=null,ie=-1,J=5,we=-1;function Re(){return!(r.unstable_now()-we<J)}function Ae(){if(q!==null){var ye=r.unstable_now();we=ye;var De=!0;try{De=q(!0,ye)}finally{De?Ee():(ne=!1,q=null)}}else ne=!1}var Ee;if(typeof z=="function")Ee=function(){z(Ae)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,Z=Te.port2;Te.port1.onmessage=Ae,Ee=function(){Z.postMessage(null)}}else Ee=function(){B(Ae,0)};function ke(ye){q=ye,ne||(ne=!0,Ee())}function ve(ye,De){ie=B(function(){ye(r.unstable_now())},De)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ye){ye.callback=null},r.unstable_continueExecution=function(){L||O||(L=!0,ke(K))},r.unstable_forceFrameRate=function(ye){0>ye||125<ye?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<ye?Math.floor(1e3/ye):5},r.unstable_getCurrentPriorityLevel=function(){return R},r.unstable_getFirstCallbackNode=function(){return a(v)},r.unstable_next=function(ye){switch(R){case 1:case 2:case 3:var De=3;break;default:De=R}var be=R;R=De;try{return ye()}finally{R=be}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ye,De){switch(ye){case 1:case 2:case 3:case 4:case 5:break;default:ye=3}var be=R;R=ye;try{return De()}finally{R=be}},r.unstable_scheduleCallback=function(ye,De,be){var X=r.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?X+be:X):be=X,ye){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=be+G,ye={id:A++,callback:De,priorityLevel:ye,startTime:be,expirationTime:G,sortIndex:-1},be>X?(ye.sortIndex=be,s(C,ye),a(v)===null&&ye===a(C)&&(j?(W(ie),ie=-1):j=!0,ve(Y,be-X))):(ye.sortIndex=G,s(v,ye),L||O||(L=!0,ke(K))),ye},r.unstable_shouldYield=Re,r.unstable_wrapCallback=function(ye){var De=R;return function(){var be=R;R=De;try{return ye.apply(this,arguments)}finally{R=be}}}}(xd)),xd}var l1;function g2(){return l1||(l1=1,gd.exports=m2()),gd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c1;function x2(){if(c1)return Dr;c1=1;var r=vf(),s=g2();function a(t){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+t,f=1;f<arguments.length;f++)o+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+t+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=new Set,p={};function x(t,o){w(t,o),w(t+"Capture",o)}function w(t,o){for(p[t]=o,t=0;t<o.length;t++)u.add(o[t])}var E=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v=Object.prototype.hasOwnProperty,C=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A={},I={};function R(t){return v.call(I,t)?!0:v.call(A,t)?!1:C.test(t)?I[t]=!0:(A[t]=!0,!1)}function O(t,o,f,g){if(f!==null&&f.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return g?!1:f!==null?!f.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function L(t,o,f,g){if(o===null||typeof o>"u"||O(t,o,f,g))return!0;if(g)return!1;if(f!==null)switch(f.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function j(t,o,f,g,S,T,M){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=g,this.attributeNamespace=S,this.mustUseProperty=f,this.propertyName=t,this.type=o,this.sanitizeURL=T,this.removeEmptyString=M}var B={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){B[t]=new j(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var o=t[0];B[o]=new j(o,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){B[t]=new j(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){B[t]=new j(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){B[t]=new j(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){B[t]=new j(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){B[t]=new j(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){B[t]=new j(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){B[t]=new j(t,5,!1,t.toLowerCase(),null,!1,!1)});var W=/[\-:]([a-z])/g;function z(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var o=t.replace(W,z);B[o]=new j(o,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var o=t.replace(W,z);B[o]=new j(o,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var o=t.replace(W,z);B[o]=new j(o,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){B[t]=new j(t,1,!1,t.toLowerCase(),null,!1,!1)}),B.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){B[t]=new j(t,1,!1,t.toLowerCase(),null,!0,!0)});function F(t,o,f,g){var S=B.hasOwnProperty(o)?B[o]:null;(S!==null?S.type!==0:g||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(L(o,f,S,g)&&(f=null),g||S===null?R(o)&&(f===null?t.removeAttribute(o):t.setAttribute(o,""+f)):S.mustUseProperty?t[S.propertyName]=f===null?S.type===3?!1:"":f:(o=S.attributeName,g=S.attributeNamespace,f===null?t.removeAttribute(o):(S=S.type,f=S===3||S===4&&f===!0?"":""+f,g?t.setAttributeNS(g,o,f):t.setAttribute(o,f))))}var Y=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,K=Symbol.for("react.element"),ne=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),ie=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),we=Symbol.for("react.provider"),Re=Symbol.for("react.context"),Ae=Symbol.for("react.forward_ref"),Ee=Symbol.for("react.suspense"),Te=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),ke=Symbol.for("react.lazy"),ve=Symbol.for("react.offscreen"),ye=Symbol.iterator;function De(t){return t===null||typeof t!="object"?null:(t=ye&&t[ye]||t["@@iterator"],typeof t=="function"?t:null)}var be=Object.assign,X;function G(t){if(X===void 0)try{throw Error()}catch(f){var o=f.stack.trim().match(/\n( *(at )?)/);X=o&&o[1]||""}return`
`+X+t}var Ce=!1;function ae(t,o){if(!t||Ce)return"";Ce=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(me){var g=me}Reflect.construct(t,[],o)}else{try{o.call()}catch(me){g=me}t.call(o.prototype)}else{try{throw Error()}catch(me){g=me}t()}}catch(me){if(me&&g&&typeof me.stack=="string"){for(var S=me.stack.split(`
`),T=g.stack.split(`
`),M=S.length-1,H=T.length-1;1<=M&&0<=H&&S[M]!==T[H];)H--;for(;1<=M&&0<=H;M--,H--)if(S[M]!==T[H]){if(M!==1||H!==1)do if(M--,H--,0>H||S[M]!==T[H]){var Q=`
`+S[M].replace(" at new "," at ");return t.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",t.displayName)),Q}while(1<=M&&0<=H);break}}}finally{Ce=!1,Error.prepareStackTrace=f}return(t=t?t.displayName||t.name:"")?G(t):""}function se(t){switch(t.tag){case 5:return G(t.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return t=ae(t.type,!1),t;case 11:return t=ae(t.type.render,!1),t;case 1:return t=ae(t.type,!0),t;default:return""}}function ee(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case q:return"Fragment";case ne:return"Portal";case J:return"Profiler";case ie:return"StrictMode";case Ee:return"Suspense";case Te:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Re:return(t.displayName||"Context")+".Consumer";case we:return(t._context.displayName||"Context")+".Provider";case Ae:var o=t.render;return t=t.displayName,t||(t=o.displayName||o.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Z:return o=t.displayName||null,o!==null?o:ee(t.type)||"Memo";case ke:o=t._payload,t=t._init;try{return ee(t(o))}catch{}}return null}function Me(t){var o=t.type;switch(t.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=o.render,t=t.displayName||t.name||"",o.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ee(o);case 8:return o===ie?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Se(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Le(t){var o=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function et(t){var o=Le(t)?"checked":"value",f=Object.getOwnPropertyDescriptor(t.constructor.prototype,o),g=""+t[o];if(!t.hasOwnProperty(o)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var S=f.get,T=f.set;return Object.defineProperty(t,o,{configurable:!0,get:function(){return S.call(this)},set:function(M){g=""+M,T.call(this,M)}}),Object.defineProperty(t,o,{enumerable:f.enumerable}),{getValue:function(){return g},setValue:function(M){g=""+M},stopTracking:function(){t._valueTracker=null,delete t[o]}}}}function Xe(t){t._valueTracker||(t._valueTracker=et(t))}function de(t){if(!t)return!1;var o=t._valueTracker;if(!o)return!0;var f=o.getValue(),g="";return t&&(g=Le(t)?t.checked?"true":"false":t.value),t=g,t!==f?(o.setValue(t),!0):!1}function xe(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ze(t,o){var f=o.checked;return be({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??t._wrapperState.initialChecked})}function $e(t,o){var f=o.defaultValue==null?"":o.defaultValue,g=o.checked!=null?o.checked:o.defaultChecked;f=Se(o.value!=null?o.value:f),t._wrapperState={initialChecked:g,initialValue:f,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Tt(t,o){o=o.checked,o!=null&&F(t,"checked",o,!1)}function it(t,o){Tt(t,o);var f=Se(o.value),g=o.type;if(f!=null)g==="number"?(f===0&&t.value===""||t.value!=f)&&(t.value=""+f):t.value!==""+f&&(t.value=""+f);else if(g==="submit"||g==="reset"){t.removeAttribute("value");return}o.hasOwnProperty("value")?tt(t,o.type,f):o.hasOwnProperty("defaultValue")&&tt(t,o.type,Se(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(t.defaultChecked=!!o.defaultChecked)}function qe(t,o,f){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var g=o.type;if(!(g!=="submit"&&g!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+t._wrapperState.initialValue,f||o===t.value||(t.value=o),t.defaultValue=o}f=t.name,f!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,f!==""&&(t.name=f)}function tt(t,o,f){(o!=="number"||xe(t.ownerDocument)!==t)&&(f==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+f&&(t.defaultValue=""+f))}var jt=Array.isArray;function ze(t,o,f,g){if(t=t.options,o){o={};for(var S=0;S<f.length;S++)o["$"+f[S]]=!0;for(f=0;f<t.length;f++)S=o.hasOwnProperty("$"+t[f].value),t[f].selected!==S&&(t[f].selected=S),S&&g&&(t[f].defaultSelected=!0)}else{for(f=""+Se(f),o=null,S=0;S<t.length;S++){if(t[S].value===f){t[S].selected=!0,g&&(t[S].defaultSelected=!0);return}o!==null||t[S].disabled||(o=t[S])}o!==null&&(o.selected=!0)}}function gn(t,o){if(o.dangerouslySetInnerHTML!=null)throw Error(a(91));return be({},o,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rr(t,o){var f=o.value;if(f==null){if(f=o.children,o=o.defaultValue,f!=null){if(o!=null)throw Error(a(92));if(jt(f)){if(1<f.length)throw Error(a(93));f=f[0]}o=f}o==null&&(o=""),f=o}t._wrapperState={initialValue:Se(f)}}function Ge(t,o){var f=Se(o.value),g=Se(o.defaultValue);f!=null&&(f=""+f,f!==t.value&&(t.value=f),o.defaultValue==null&&t.defaultValue!==f&&(t.defaultValue=f)),g!=null&&(t.defaultValue=""+g)}function It(t){var o=t.textContent;o===t._wrapperState.initialValue&&o!==""&&o!==null&&(t.value=o)}function Ue(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ct(t,o){return t==null||t==="http://www.w3.org/1999/xhtml"?Ue(o):t==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Je,wt=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,f,g,S){MSApp.execUnsafeLocalFunction(function(){return t(o,f,g,S)})}:t}(function(t,o){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=o;else{for(Je=Je||document.createElement("div"),Je.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Je.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;o.firstChild;)t.appendChild(o.firstChild)}});function Bt(t,o){if(o){var f=t.firstChild;if(f&&f===t.lastChild&&f.nodeType===3){f.nodeValue=o;return}}t.textContent=o}var Xt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Be=["Webkit","ms","Moz","O"];Object.keys(Xt).forEach(function(t){Be.forEach(function(o){o=o+t.charAt(0).toUpperCase()+t.substring(1),Xt[o]=Xt[t]})});function Ie(t,o,f){return o==null||typeof o=="boolean"||o===""?"":f||typeof o!="number"||o===0||Xt.hasOwnProperty(t)&&Xt[t]?(""+o).trim():o+"px"}function ce(t,o){t=t.style;for(var f in o)if(o.hasOwnProperty(f)){var g=f.indexOf("--")===0,S=Ie(f,o[f],g);f==="float"&&(f="cssFloat"),g?t.setProperty(f,S):t[f]=S}}var ft=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ut(t,o){if(o){if(ft[t]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(a(137,t));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(a(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(a(61))}if(o.style!=null&&typeof o.style!="object")throw Error(a(62))}}function xt(t,o){if(t.indexOf("-")===-1)return typeof o.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yt=null;function hn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ln=null,dt=null,rn=null;function cn(t){if(t=ha(t)){if(typeof ln!="function")throw Error(a(280));var o=t.stateNode;o&&(o=vl(o),ln(t.stateNode,t.type,o))}}function Fr(t){dt?rn?rn.push(t):rn=[t]:dt=t}function en(){if(dt){var t=dt,o=rn;if(rn=dt=null,cn(t),o)for(t=0;t<o.length;t++)cn(o[t])}}function Ni(t,o){return t(o)}function Wt(){}var Nr=!1;function Dn(t,o,f){if(Nr)return t(o,f);Nr=!0;try{return Ni(t,o,f)}finally{Nr=!1,(dt!==null||rn!==null)&&(Wt(),en())}}function Vn(t,o){var f=t.stateNode;if(f===null)return null;var g=vl(f);if(g===null)return null;f=g[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(t=t.type,g=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!g;break e;default:t=!1}if(t)return null;if(f&&typeof f!="function")throw Error(a(231,o,typeof f));return f}var Qi=!1;if(E)try{var wr={};Object.defineProperty(wr,"passive",{get:function(){Qi=!0}}),window.addEventListener("test",wr,wr),window.removeEventListener("test",wr,wr)}catch{Qi=!1}function Ti(t,o,f,g,S,T,M,H,Q){var me=Array.prototype.slice.call(arguments,3);try{o.apply(f,me)}catch(Oe){this.onError(Oe)}}var tn=!1,Kn=null,qn=!1,Ke=null,Tr={onError:function(t){tn=!0,Kn=t}};function co(t,o,f,g,S,T,M,H,Q){tn=!1,Kn=null,Ti.apply(Tr,arguments)}function Qn(t,o,f,g,S,T,M,H,Q){if(co.apply(this,arguments),tn){if(tn){var me=Kn;tn=!1,Kn=null}else throw Error(a(198));qn||(qn=!0,Ke=me)}}function ir(t){var o=t,f=t;if(t.alternate)for(;o.return;)o=o.return;else{t=o;do o=t,o.flags&4098&&(f=o.return),t=o.return;while(t)}return o.tag===3?f:null}function Ii(t){if(t.tag===13){var o=t.memoizedState;if(o===null&&(t=t.alternate,t!==null&&(o=t.memoizedState)),o!==null)return o.dehydrated}return null}function _i(t){if(ir(t)!==t)throw Error(a(188))}function Ir(t){var o=t.alternate;if(!o){if(o=ir(t),o===null)throw Error(a(188));return o!==t?null:t}for(var f=t,g=o;;){var S=f.return;if(S===null)break;var T=S.alternate;if(T===null){if(g=S.return,g!==null){f=g;continue}break}if(S.child===T.child){for(T=S.child;T;){if(T===f)return _i(S),t;if(T===g)return _i(S),o;T=T.sibling}throw Error(a(188))}if(f.return!==g.return)f=S,g=T;else{for(var M=!1,H=S.child;H;){if(H===f){M=!0,f=S,g=T;break}if(H===g){M=!0,g=S,f=T;break}H=H.sibling}if(!M){for(H=T.child;H;){if(H===f){M=!0,f=T,g=S;break}if(H===g){M=!0,g=T,f=S;break}H=H.sibling}if(!M)throw Error(a(189))}}if(f.alternate!==g)throw Error(a(190))}if(f.tag!==3)throw Error(a(188));return f.stateNode.current===f?t:o}function uo(t){return t=Ir(t),t!==null?Ji(t):null}function Ji(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var o=Ji(t);if(o!==null)return o;t=t.sibling}return null}var vr=s.unstable_scheduleCallback,Ln=s.unstable_cancelCallback,Zt=s.unstable_shouldYield,fo=s.unstable_requestPaint,Lt=s.unstable_now,Ri=s.unstable_getCurrentPriorityLevel,Ne=s.unstable_ImmediatePriority,Rs=s.unstable_UserBlockingPriority,Kt=s.unstable_NormalPriority,hi=s.unstable_LowPriority,ki=s.unstable_IdlePriority,Pt=null,St=null;function _t(t){if(St&&typeof St.onCommitFiberRoot=="function")try{St.onCommitFiberRoot(Pt,t,void 0,(t.current.flags&128)===128)}catch{}}var sr=Math.clz32?Math.clz32:xn,ks=Math.log,es=Math.LN2;function xn(t){return t>>>=0,t===0?32:31-(ks(t)/es|0)|0}var Cr=64,pi=4194304;function qt(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fr(t,o){var f=t.pendingLanes;if(f===0)return 0;var g=0,S=t.suspendedLanes,T=t.pingedLanes,M=f&268435455;if(M!==0){var H=M&~S;H!==0?g=qt(H):(T&=M,T!==0&&(g=qt(T)))}else M=f&~S,M!==0?g=qt(M):T!==0&&(g=qt(T));if(g===0)return 0;if(o!==0&&o!==g&&!(o&S)&&(S=g&-g,T=o&-o,S>=T||S===16&&(T&4194240)!==0))return o;if(g&4&&(g|=f&16),o=t.entangledLanes,o!==0)for(t=t.entanglements,o&=g;0<o;)f=31-sr(o),S=1<<f,g|=t[f],o&=~S;return g}function qo(t,o){switch(t){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gr(t,o){for(var f=t.suspendedLanes,g=t.pingedLanes,S=t.expirationTimes,T=t.pendingLanes;0<T;){var M=31-sr(T),H=1<<M,Q=S[M];Q===-1?(!(H&f)||H&g)&&(S[M]=qo(H,o)):Q<=o&&(t.expiredLanes|=H),T&=~H}}function Ft(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function En(){var t=Cr;return Cr<<=1,!(Cr&4194240)&&(Cr=64),t}function le(t){for(var o=[],f=0;31>f;f++)o.push(t);return o}function V(t,o,f){t.pendingLanes|=o,o!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,o=31-sr(o),t[o]=f}function ge(t,o){var f=t.pendingLanes&~o;t.pendingLanes=o,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=o,t.mutableReadLanes&=o,t.entangledLanes&=o,o=t.entanglements;var g=t.eventTimes;for(t=t.expirationTimes;0<f;){var S=31-sr(f),T=1<<S;o[S]=0,g[S]=-1,t[S]=-1,f&=~T}}function He(t,o){var f=t.entangledLanes|=o;for(t=t.entanglements;f;){var g=31-sr(f),S=1<<g;S&o|t[g]&o&&(t[g]|=o),f&=~S}}var Ye=0;function at(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Dt,un,lt,Qt,ts,Pi=!1,Mi=[],sn=null,Sn=null,_r=null,Vt=new Map,zn=new Map,Un=[],gt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sl(t,o){switch(t){case"focusin":case"focusout":sn=null;break;case"dragenter":case"dragleave":Sn=null;break;case"mouseover":case"mouseout":_r=null;break;case"pointerover":case"pointerout":Vt.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":zn.delete(o.pointerId)}}function bt(t,o,f,g,S,T){return t===null||t.nativeEvent!==T?(t={blockedOn:o,domEventName:f,eventSystemFlags:g,nativeEvent:T,targetContainers:[S]},o!==null&&(o=ha(o),o!==null&&un(o)),t):(t.eventSystemFlags|=g,o=t.targetContainers,S!==null&&o.indexOf(S)===-1&&o.push(S),t)}function Wn(t,o,f,g,S){switch(o){case"focusin":return sn=bt(sn,t,o,f,g,S),!0;case"dragenter":return Sn=bt(Sn,t,o,f,g,S),!0;case"mouseover":return _r=bt(_r,t,o,f,g,S),!0;case"pointerover":var T=S.pointerId;return Vt.set(T,bt(Vt.get(T)||null,t,o,f,g,S)),!0;case"gotpointercapture":return T=S.pointerId,zn.set(T,bt(zn.get(T)||null,t,o,f,g,S)),!0}return!1}function ol(t){var o=zs(t.target);if(o!==null){var f=ir(o);if(f!==null){if(o=f.tag,o===13){if(o=Ii(f),o!==null){t.blockedOn=o,ts(t.priority,function(){lt(f)});return}}else if(o===3&&f.stateNode.current.memoizedState.isDehydrated){t.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ns(t){if(t.blockedOn!==null)return!1;for(var o=t.targetContainers;0<o.length;){var f=ho(t.domEventName,t.eventSystemFlags,o[0],t.nativeEvent);if(f===null){f=t.nativeEvent;var g=new f.constructor(f.type,f);Yt=g,f.target.dispatchEvent(g),Yt=null}else return o=ha(f),o!==null&&un(o),t.blockedOn=f,!1;o.shift()}return!0}function Qo(t,o,f){ns(t)&&f.delete(o)}function Oi(){Pi=!1,sn!==null&&ns(sn)&&(sn=null),Sn!==null&&ns(Sn)&&(Sn=null),_r!==null&&ns(_r)&&(_r=null),Vt.forEach(Qo),zn.forEach(Qo)}function Ps(t,o){t.blockedOn===o&&(t.blockedOn=null,Pi||(Pi=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Oi)))}function ri(t){function o(S){return Ps(S,t)}if(0<Mi.length){Ps(Mi[0],t);for(var f=1;f<Mi.length;f++){var g=Mi[f];g.blockedOn===t&&(g.blockedOn=null)}}for(sn!==null&&Ps(sn,t),Sn!==null&&Ps(Sn,t),_r!==null&&Ps(_r,t),Vt.forEach(o),zn.forEach(o),f=0;f<Un.length;f++)g=Un[f],g.blockedOn===t&&(g.blockedOn=null);for(;0<Un.length&&(f=Un[0],f.blockedOn===null);)ol(f),f.blockedOn===null&&Un.shift()}var Xr=Y.ReactCurrentBatchConfig,mi=!0;function al(t,o,f,g){var S=Ye,T=Xr.transition;Xr.transition=null;try{Ye=1,Di(t,o,f,g)}finally{Ye=S,Xr.transition=T}}function Ms(t,o,f,g){var S=Ye,T=Xr.transition;Xr.transition=null;try{Ye=4,Di(t,o,f,g)}finally{Ye=S,Xr.transition=T}}function Di(t,o,f,g){if(mi){var S=ho(t,o,f,g);if(S===null)ru(t,o,g,Hn,f),sl(t,g);else if(Wn(S,t,o,f,g))g.stopPropagation();else if(sl(t,g),o&4&&-1<gt.indexOf(t)){for(;S!==null;){var T=ha(S);if(T!==null&&Dt(T),T=ho(t,o,f,g),T===null&&ru(t,o,g,Hn,f),T===S)break;S=T}S!==null&&g.stopPropagation()}else ru(t,o,g,null,f)}}var Hn=null;function ho(t,o,f,g){if(Hn=null,t=hn(g),t=zs(t),t!==null)if(o=ir(t),o===null)t=null;else if(f=o.tag,f===13){if(t=Ii(o),t!==null)return t;t=null}else if(f===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;t=null}else o!==t&&(t=null);return Hn=t,null}function Jo(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ri()){case Ne:return 1;case Rs:return 4;case Kt:case hi:return 16;case ki:return 536870912;default:return 16}default:return 16}}var ii=null,ea=null,po=null;function ll(){if(po)return po;var t,o=ea,f=o.length,g,S="value"in ii?ii.value:ii.textContent,T=S.length;for(t=0;t<f&&o[t]===S[t];t++);var M=f-t;for(g=1;g<=M&&o[f-g]===S[T-g];g++);return po=S.slice(t,1<g?1-g:void 0)}function zt(t){var o=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&o===13&&(t=13)):t=o,t===10&&(t=13),32<=t||t===13?t:0}function Os(){return!0}function Ds(){return!1}function An(t){function o(f,g,S,T,M){this._reactName=f,this._targetInst=S,this.type=g,this.nativeEvent=T,this.target=M,this.currentTarget=null;for(var H in t)t.hasOwnProperty(H)&&(f=t[H],this[H]=f?f(T):T[H]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Os:Ds,this.isPropagationStopped=Ds,this}return be(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Os)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Os)},persist:function(){},isPersistent:Os}),o}var rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pe=An(rs),At=be({},rs,{view:0,detail:0}),Gn=An(At),is,mo,Ls,go=be({},At,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:js,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ls&&(Ls&&t.type==="mousemove"?(is=t.screenX-Ls.screenX,mo=t.screenY-Ls.screenY):mo=is=0,Ls=t),is)},movementY:function(t){return"movementY"in t?t.movementY:mo}}),cl=An(go),ta=be({},go,{dataTransfer:0}),kn=An(ta),na=be({},At,{relatedTarget:0}),on=An(na),xo=be({},rs,{animationName:0,elapsedTime:0,pseudoElement:0}),Li=An(xo),Jt=be({},rs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ht=An(Jt),Zc=be({},rs,{data:0}),nn=An(Zc),ji={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ss={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$c={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yr(t){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(t):(t=$c[t])?!!o[t]:!1}function js(){return Yr}var ul=be({},At,{key:function(t){if(t.key){var o=ji[t.key]||t.key;if(o!=="Unidentified")return o}return t.type==="keypress"?(t=zt(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ss[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:js,charCode:function(t){return t.type==="keypress"?zt(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zt(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ra=An(ul),dl=be({},go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ia=An(dl),Kc=be({},At,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:js}),os=An(Kc),sa=be({},rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),qc=An(sa),Bs=be({},go,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Qc=An(Bs),gi=[9,13,27,32],as=E&&"CompositionEvent"in window,Jn=null;E&&"documentMode"in document&&(Jn=document.documentMode);var fl=E&&"TextEvent"in window&&!Jn,Vr=E&&(!as||Jn&&8<Jn&&11>=Jn),hl=" ",yo=!1;function pl(t,o){switch(t){case"keyup":return gi.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oa(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var or=!1;function Jc(t,o){switch(t){case"compositionend":return oa(o);case"keypress":return o.which!==32?null:(yo=!0,hl);case"textInput":return t=o.data,t===hl&&yo?null:t;default:return null}}function aa(t,o){if(or)return t==="compositionend"||!as&&pl(t,o)?(t=ll(),po=ea=ii=null,or=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Vr&&o.locale!=="ko"?null:o.data;default:return null}}var Fs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ot(t){var o=t&&t.nodeName&&t.nodeName.toLowerCase();return o==="input"?!!Fs[t.type]:o==="textarea"}function Vs(t,o,f,g){Fr(g),o=xl(o,"onChange"),0<o.length&&(f=new pe("onChange","change",null,f,g),t.push({event:f,listeners:o}))}var k=null,e=null;function n(t){wh(t,0)}function i(t){var o=Co(t);if(de(o))return t}function l(t,o){if(t==="change")return o}var c=!1;if(E){var d;if(E){var m="oninput"in document;if(!m){var y=document.createElement("div");y.setAttribute("oninput","return;"),m=typeof y.oninput=="function"}d=m}else d=!1;c=d&&(!document.documentMode||9<document.documentMode)}function b(){k&&(k.detachEvent("onpropertychange",_),e=k=null)}function _(t){if(t.propertyName==="value"&&i(e)){var o=[];Vs(o,e,t,hn(t)),Dn(n,o)}}function P(t,o,f){t==="focusin"?(b(),k=o,e=f,k.attachEvent("onpropertychange",_)):t==="focusout"&&b()}function D(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return i(e)}function U(t,o){if(t==="click")return i(o)}function $(t,o){if(t==="input"||t==="change")return i(o)}function te(t,o){return t===o&&(t!==0||1/t===1/o)||t!==t&&o!==o}var oe=typeof Object.is=="function"?Object.is:te;function he(t,o){if(oe(t,o))return!0;if(typeof t!="object"||t===null||typeof o!="object"||o===null)return!1;var f=Object.keys(t),g=Object.keys(o);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var S=f[g];if(!v.call(o,S)||!oe(t[S],o[S]))return!1}return!0}function Fe(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ve(t,o){var f=Fe(t);t=0;for(var g;f;){if(f.nodeType===3){if(g=t+f.textContent.length,t<=o&&g>=o)return{node:f,offset:o-t};t=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Fe(f)}}function Pe(t,o){return t&&o?t===o?!0:t&&t.nodeType===3?!1:o&&o.nodeType===3?Pe(t,o.parentNode):"contains"in t?t.contains(o):t.compareDocumentPosition?!!(t.compareDocumentPosition(o)&16):!1:!1}function Rt(){for(var t=window,o=xe();o instanceof t.HTMLIFrameElement;){try{var f=typeof o.contentWindow.location.href=="string"}catch{f=!1}if(f)t=o.contentWindow;else break;o=xe(t.document)}return o}function Et(t){var o=t&&t.nodeName&&t.nodeName.toLowerCase();return o&&(o==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||o==="textarea"||t.contentEditable==="true")}function hr(t){var o=Rt(),f=t.focusedElem,g=t.selectionRange;if(o!==f&&f&&f.ownerDocument&&Pe(f.ownerDocument.documentElement,f)){if(g!==null&&Et(f)){if(o=g.start,t=g.end,t===void 0&&(t=o),"selectionStart"in f)f.selectionStart=o,f.selectionEnd=Math.min(t,f.value.length);else if(t=(o=f.ownerDocument||document)&&o.defaultView||window,t.getSelection){t=t.getSelection();var S=f.textContent.length,T=Math.min(g.start,S);g=g.end===void 0?T:Math.min(g.end,S),!t.extend&&T>g&&(S=g,g=T,T=S),S=Ve(f,T);var M=Ve(f,g);S&&M&&(t.rangeCount!==1||t.anchorNode!==S.node||t.anchorOffset!==S.offset||t.focusNode!==M.node||t.focusOffset!==M.offset)&&(o=o.createRange(),o.setStart(S.node,S.offset),t.removeAllRanges(),T>g?(t.addRange(o),t.extend(M.node,M.offset)):(o.setEnd(M.node,M.offset),t.addRange(o)))}}for(o=[],t=f;t=t.parentNode;)t.nodeType===1&&o.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<o.length;f++)t=o[f],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var zr=E&&"documentMode"in document&&11>=document.documentMode,Pn=null,$t=null,yn=null,ar=!1;function Bi(t,o,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;ar||Pn==null||Pn!==xe(g)||(g=Pn,"selectionStart"in g&&Et(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),yn&&he(yn,g)||(yn=g,g=xl($t,"onSelect"),0<g.length&&(o=new pe("onSelect","select",null,o,f),t.push({event:o,listeners:g}),o.target=Pn)))}function si(t,o){var f={};return f[t.toLowerCase()]=o.toLowerCase(),f["Webkit"+t]="webkit"+o,f["Moz"+t]="moz"+o,f}var ls={animationend:si("Animation","AnimationEnd"),animationiteration:si("Animation","AnimationIteration"),animationstart:si("Animation","AnimationStart"),transitionend:si("Transition","TransitionEnd")},la={},dh={};E&&(dh=document.createElement("div").style,"AnimationEvent"in window||(delete ls.animationend.animation,delete ls.animationiteration.animation,delete ls.animationstart.animation),"TransitionEvent"in window||delete ls.transitionend.transition);function ml(t){if(la[t])return la[t];if(!ls[t])return t;var o=ls[t],f;for(f in o)if(o.hasOwnProperty(f)&&f in dh)return la[t]=o[f];return t}var fh=ml("animationend"),hh=ml("animationiteration"),ph=ml("animationstart"),mh=ml("transitionend"),gh=new Map,xh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cs(t,o){gh.set(t,o),x(o,[t])}for(var eu=0;eu<xh.length;eu++){var tu=xh[eu],Cx=tu.toLowerCase(),bx=tu[0].toUpperCase()+tu.slice(1);cs(Cx,"on"+bx)}cs(fh,"onAnimationEnd"),cs(hh,"onAnimationIteration"),cs(ph,"onAnimationStart"),cs("dblclick","onDoubleClick"),cs("focusin","onFocus"),cs("focusout","onBlur"),cs(mh,"onTransitionEnd"),w("onMouseEnter",["mouseout","mouseover"]),w("onMouseLeave",["mouseout","mouseover"]),w("onPointerEnter",["pointerout","pointerover"]),w("onPointerLeave",["pointerout","pointerover"]),x("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),x("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),x("onBeforeInput",["compositionend","keypress","textInput","paste"]),x("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ex=new Set("cancel close invalid load scroll toggle".split(" ").concat(ca));function yh(t,o,f){var g=t.type||"unknown-event";t.currentTarget=f,Qn(g,o,void 0,t),t.currentTarget=null}function wh(t,o){o=(o&4)!==0;for(var f=0;f<t.length;f++){var g=t[f],S=g.event;g=g.listeners;e:{var T=void 0;if(o)for(var M=g.length-1;0<=M;M--){var H=g[M],Q=H.instance,me=H.currentTarget;if(H=H.listener,Q!==T&&S.isPropagationStopped())break e;yh(S,H,me),T=Q}else for(M=0;M<g.length;M++){if(H=g[M],Q=H.instance,me=H.currentTarget,H=H.listener,Q!==T&&S.isPropagationStopped())break e;yh(S,H,me),T=Q}}}if(qn)throw t=Ke,qn=!1,Ke=null,t}function dn(t,o){var f=o[cu];f===void 0&&(f=o[cu]=new Set);var g=t+"__bubble";f.has(g)||(vh(o,t,2,!1),f.add(g))}function nu(t,o,f){var g=0;o&&(g|=4),vh(f,t,g,o)}var gl="_reactListening"+Math.random().toString(36).slice(2);function ua(t){if(!t[gl]){t[gl]=!0,u.forEach(function(f){f!=="selectionchange"&&(Ex.has(f)||nu(f,!1,t),nu(f,!0,t))});var o=t.nodeType===9?t:t.ownerDocument;o===null||o[gl]||(o[gl]=!0,nu("selectionchange",!1,o))}}function vh(t,o,f,g){switch(Jo(o)){case 1:var S=al;break;case 4:S=Ms;break;default:S=Di}f=S.bind(null,o,f,t),S=void 0,!Qi||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(S=!0),g?S!==void 0?t.addEventListener(o,f,{capture:!0,passive:S}):t.addEventListener(o,f,!0):S!==void 0?t.addEventListener(o,f,{passive:S}):t.addEventListener(o,f,!1)}function ru(t,o,f,g,S){var T=g;if(!(o&1)&&!(o&2)&&g!==null)e:for(;;){if(g===null)return;var M=g.tag;if(M===3||M===4){var H=g.stateNode.containerInfo;if(H===S||H.nodeType===8&&H.parentNode===S)break;if(M===4)for(M=g.return;M!==null;){var Q=M.tag;if((Q===3||Q===4)&&(Q=M.stateNode.containerInfo,Q===S||Q.nodeType===8&&Q.parentNode===S))return;M=M.return}for(;H!==null;){if(M=zs(H),M===null)return;if(Q=M.tag,Q===5||Q===6){g=T=M;continue e}H=H.parentNode}}g=g.return}Dn(function(){var me=T,Oe=hn(f),je=[];e:{var _e=gh.get(t);if(_e!==void 0){var Qe=pe,rt=t;switch(t){case"keypress":if(zt(f)===0)break e;case"keydown":case"keyup":Qe=ra;break;case"focusin":rt="focus",Qe=on;break;case"focusout":rt="blur",Qe=on;break;case"beforeblur":case"afterblur":Qe=on;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Qe=cl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Qe=kn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Qe=os;break;case fh:case hh:case ph:Qe=Li;break;case mh:Qe=qc;break;case"scroll":Qe=Gn;break;case"wheel":Qe=Qc;break;case"copy":case"cut":case"paste":Qe=ht;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Qe=ia}var st=(o&4)!==0,Mn=!st&&t==="scroll",ue=st?_e!==null?_e+"Capture":null:_e;st=[];for(var re=me,fe;re!==null;){fe=re;var We=fe.stateNode;if(fe.tag===5&&We!==null&&(fe=We,ue!==null&&(We=Vn(re,ue),We!=null&&st.push(da(re,We,fe)))),Mn)break;re=re.return}0<st.length&&(_e=new Qe(_e,rt,null,f,Oe),je.push({event:_e,listeners:st}))}}if(!(o&7)){e:{if(_e=t==="mouseover"||t==="pointerover",Qe=t==="mouseout"||t==="pointerout",_e&&f!==Yt&&(rt=f.relatedTarget||f.fromElement)&&(zs(rt)||rt[Fi]))break e;if((Qe||_e)&&(_e=Oe.window===Oe?Oe:(_e=Oe.ownerDocument)?_e.defaultView||_e.parentWindow:window,Qe?(rt=f.relatedTarget||f.toElement,Qe=me,rt=rt?zs(rt):null,rt!==null&&(Mn=ir(rt),rt!==Mn||rt.tag!==5&&rt.tag!==6)&&(rt=null)):(Qe=null,rt=me),Qe!==rt)){if(st=cl,We="onMouseLeave",ue="onMouseEnter",re="mouse",(t==="pointerout"||t==="pointerover")&&(st=ia,We="onPointerLeave",ue="onPointerEnter",re="pointer"),Mn=Qe==null?_e:Co(Qe),fe=rt==null?_e:Co(rt),_e=new st(We,re+"leave",Qe,f,Oe),_e.target=Mn,_e.relatedTarget=fe,We=null,zs(Oe)===me&&(st=new st(ue,re+"enter",rt,f,Oe),st.target=fe,st.relatedTarget=Mn,We=st),Mn=We,Qe&&rt)t:{for(st=Qe,ue=rt,re=0,fe=st;fe;fe=wo(fe))re++;for(fe=0,We=ue;We;We=wo(We))fe++;for(;0<re-fe;)st=wo(st),re--;for(;0<fe-re;)ue=wo(ue),fe--;for(;re--;){if(st===ue||ue!==null&&st===ue.alternate)break t;st=wo(st),ue=wo(ue)}st=null}else st=null;Qe!==null&&Ch(je,_e,Qe,st,!1),rt!==null&&Mn!==null&&Ch(je,Mn,rt,st,!0)}}e:{if(_e=me?Co(me):window,Qe=_e.nodeName&&_e.nodeName.toLowerCase(),Qe==="select"||Qe==="input"&&_e.type==="file")var ot=l;else if(Ot(_e))if(c)ot=$;else{ot=D;var pt=P}else(Qe=_e.nodeName)&&Qe.toLowerCase()==="input"&&(_e.type==="checkbox"||_e.type==="radio")&&(ot=U);if(ot&&(ot=ot(t,me))){Vs(je,ot,f,Oe);break e}pt&&pt(t,_e,me),t==="focusout"&&(pt=_e._wrapperState)&&pt.controlled&&_e.type==="number"&&tt(_e,"number",_e.value)}switch(pt=me?Co(me):window,t){case"focusin":(Ot(pt)||pt.contentEditable==="true")&&(Pn=pt,$t=me,yn=null);break;case"focusout":yn=$t=Pn=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,Bi(je,f,Oe);break;case"selectionchange":if(zr)break;case"keydown":case"keyup":Bi(je,f,Oe)}var mt;if(as)e:{switch(t){case"compositionstart":var Ct="onCompositionStart";break e;case"compositionend":Ct="onCompositionEnd";break e;case"compositionupdate":Ct="onCompositionUpdate";break e}Ct=void 0}else or?pl(t,f)&&(Ct="onCompositionEnd"):t==="keydown"&&f.keyCode===229&&(Ct="onCompositionStart");Ct&&(Vr&&f.locale!=="ko"&&(or||Ct!=="onCompositionStart"?Ct==="onCompositionEnd"&&or&&(mt=ll()):(ii=Oe,ea="value"in ii?ii.value:ii.textContent,or=!0)),pt=xl(me,Ct),0<pt.length&&(Ct=new nn(Ct,t,null,f,Oe),je.push({event:Ct,listeners:pt}),mt?Ct.data=mt:(mt=oa(f),mt!==null&&(Ct.data=mt)))),(mt=fl?Jc(t,f):aa(t,f))&&(me=xl(me,"onBeforeInput"),0<me.length&&(Oe=new nn("onBeforeInput","beforeinput",null,f,Oe),je.push({event:Oe,listeners:me}),Oe.data=mt))}wh(je,o)})}function da(t,o,f){return{instance:t,listener:o,currentTarget:f}}function xl(t,o){for(var f=o+"Capture",g=[];t!==null;){var S=t,T=S.stateNode;S.tag===5&&T!==null&&(S=T,T=Vn(t,f),T!=null&&g.unshift(da(t,T,S)),T=Vn(t,o),T!=null&&g.push(da(t,T,S))),t=t.return}return g}function wo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ch(t,o,f,g,S){for(var T=o._reactName,M=[];f!==null&&f!==g;){var H=f,Q=H.alternate,me=H.stateNode;if(Q!==null&&Q===g)break;H.tag===5&&me!==null&&(H=me,S?(Q=Vn(f,T),Q!=null&&M.unshift(da(f,Q,H))):S||(Q=Vn(f,T),Q!=null&&M.push(da(f,Q,H)))),f=f.return}M.length!==0&&t.push({event:o,listeners:M})}var Sx=/\r\n?/g,Ax=/\u0000|\uFFFD/g;function bh(t){return(typeof t=="string"?t:""+t).replace(Sx,`
`).replace(Ax,"")}function yl(t,o,f){if(o=bh(o),bh(t)!==o&&f)throw Error(a(425))}function wl(){}var iu=null,su=null;function ou(t,o){return t==="textarea"||t==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var au=typeof setTimeout=="function"?setTimeout:void 0,Nx=typeof clearTimeout=="function"?clearTimeout:void 0,Eh=typeof Promise=="function"?Promise:void 0,Tx=typeof queueMicrotask=="function"?queueMicrotask:typeof Eh<"u"?function(t){return Eh.resolve(null).then(t).catch(Ix)}:au;function Ix(t){setTimeout(function(){throw t})}function lu(t,o){var f=o,g=0;do{var S=f.nextSibling;if(t.removeChild(f),S&&S.nodeType===8)if(f=S.data,f==="/$"){if(g===0){t.removeChild(S),ri(o);return}g--}else f!=="$"&&f!=="$?"&&f!=="$!"||g++;f=S}while(f);ri(o)}function us(t){for(;t!=null;t=t.nextSibling){var o=t.nodeType;if(o===1||o===3)break;if(o===8){if(o=t.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return t}function Sh(t){t=t.previousSibling;for(var o=0;t;){if(t.nodeType===8){var f=t.data;if(f==="$"||f==="$!"||f==="$?"){if(o===0)return t;o--}else f==="/$"&&o++}t=t.previousSibling}return null}var vo=Math.random().toString(36).slice(2),xi="__reactFiber$"+vo,fa="__reactProps$"+vo,Fi="__reactContainer$"+vo,cu="__reactEvents$"+vo,_x="__reactListeners$"+vo,Rx="__reactHandles$"+vo;function zs(t){var o=t[xi];if(o)return o;for(var f=t.parentNode;f;){if(o=f[Fi]||f[xi]){if(f=o.alternate,o.child!==null||f!==null&&f.child!==null)for(t=Sh(t);t!==null;){if(f=t[xi])return f;t=Sh(t)}return o}t=f,f=t.parentNode}return null}function ha(t){return t=t[xi]||t[Fi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Co(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(a(33))}function vl(t){return t[fa]||null}var uu=[],bo=-1;function ds(t){return{current:t}}function fn(t){0>bo||(t.current=uu[bo],uu[bo]=null,bo--)}function an(t,o){bo++,uu[bo]=t.current,t.current=o}var fs={},pr=ds(fs),Rr=ds(!1),Us=fs;function Eo(t,o){var f=t.type.contextTypes;if(!f)return fs;var g=t.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===o)return g.__reactInternalMemoizedMaskedChildContext;var S={},T;for(T in f)S[T]=o[T];return g&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=S),S}function kr(t){return t=t.childContextTypes,t!=null}function Cl(){fn(Rr),fn(pr)}function Ah(t,o,f){if(pr.current!==fs)throw Error(a(168));an(pr,o),an(Rr,f)}function Nh(t,o,f){var g=t.stateNode;if(o=o.childContextTypes,typeof g.getChildContext!="function")return f;g=g.getChildContext();for(var S in g)if(!(S in o))throw Error(a(108,Me(t)||"Unknown",S));return be({},f,g)}function bl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fs,Us=pr.current,an(pr,t),an(Rr,Rr.current),!0}function Th(t,o,f){var g=t.stateNode;if(!g)throw Error(a(169));f?(t=Nh(t,o,Us),g.__reactInternalMemoizedMergedChildContext=t,fn(Rr),fn(pr),an(pr,t)):fn(Rr),an(Rr,f)}var Vi=null,El=!1,du=!1;function Ih(t){Vi===null?Vi=[t]:Vi.push(t)}function kx(t){El=!0,Ih(t)}function hs(){if(!du&&Vi!==null){du=!0;var t=0,o=Ye;try{var f=Vi;for(Ye=1;t<f.length;t++){var g=f[t];do g=g(!0);while(g!==null)}Vi=null,El=!1}catch(S){throw Vi!==null&&(Vi=Vi.slice(t+1)),vr(Ne,hs),S}finally{Ye=o,du=!1}}return null}var So=[],Ao=0,Sl=null,Al=0,Zr=[],$r=0,Ws=null,zi=1,Ui="";function Hs(t,o){So[Ao++]=Al,So[Ao++]=Sl,Sl=t,Al=o}function _h(t,o,f){Zr[$r++]=zi,Zr[$r++]=Ui,Zr[$r++]=Ws,Ws=t;var g=zi;t=Ui;var S=32-sr(g)-1;g&=~(1<<S),f+=1;var T=32-sr(o)+S;if(30<T){var M=S-S%5;T=(g&(1<<M)-1).toString(32),g>>=M,S-=M,zi=1<<32-sr(o)+S|f<<S|g,Ui=T+t}else zi=1<<T|f<<S|g,Ui=t}function fu(t){t.return!==null&&(Hs(t,1),_h(t,1,0))}function hu(t){for(;t===Sl;)Sl=So[--Ao],So[Ao]=null,Al=So[--Ao],So[Ao]=null;for(;t===Ws;)Ws=Zr[--$r],Zr[$r]=null,Ui=Zr[--$r],Zr[$r]=null,zi=Zr[--$r],Zr[$r]=null}var Ur=null,Wr=null,pn=!1,oi=null;function Rh(t,o){var f=Jr(5,null,null,0);f.elementType="DELETED",f.stateNode=o,f.return=t,o=t.deletions,o===null?(t.deletions=[f],t.flags|=16):o.push(f)}function kh(t,o){switch(t.tag){case 5:var f=t.type;return o=o.nodeType!==1||f.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(t.stateNode=o,Ur=t,Wr=us(o.firstChild),!0):!1;case 6:return o=t.pendingProps===""||o.nodeType!==3?null:o,o!==null?(t.stateNode=o,Ur=t,Wr=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(f=Ws!==null?{id:zi,overflow:Ui}:null,t.memoizedState={dehydrated:o,treeContext:f,retryLane:1073741824},f=Jr(18,null,null,0),f.stateNode=o,f.return=t,t.child=f,Ur=t,Wr=null,!0):!1;default:return!1}}function pu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function mu(t){if(pn){var o=Wr;if(o){var f=o;if(!kh(t,o)){if(pu(t))throw Error(a(418));o=us(f.nextSibling);var g=Ur;o&&kh(t,o)?Rh(g,f):(t.flags=t.flags&-4097|2,pn=!1,Ur=t)}}else{if(pu(t))throw Error(a(418));t.flags=t.flags&-4097|2,pn=!1,Ur=t}}}function Ph(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ur=t}function Nl(t){if(t!==Ur)return!1;if(!pn)return Ph(t),pn=!0,!1;var o;if((o=t.tag!==3)&&!(o=t.tag!==5)&&(o=t.type,o=o!=="head"&&o!=="body"&&!ou(t.type,t.memoizedProps)),o&&(o=Wr)){if(pu(t))throw Mh(),Error(a(418));for(;o;)Rh(t,o),o=us(o.nextSibling)}if(Ph(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));e:{for(t=t.nextSibling,o=0;t;){if(t.nodeType===8){var f=t.data;if(f==="/$"){if(o===0){Wr=us(t.nextSibling);break e}o--}else f!=="$"&&f!=="$!"&&f!=="$?"||o++}t=t.nextSibling}Wr=null}}else Wr=Ur?us(t.stateNode.nextSibling):null;return!0}function Mh(){for(var t=Wr;t;)t=us(t.nextSibling)}function No(){Wr=Ur=null,pn=!1}function gu(t){oi===null?oi=[t]:oi.push(t)}var Px=Y.ReactCurrentBatchConfig;function pa(t,o,f){if(t=f.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(a(309));var g=f.stateNode}if(!g)throw Error(a(147,t));var S=g,T=""+t;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===T?o.ref:(o=function(M){var H=S.refs;M===null?delete H[T]:H[T]=M},o._stringRef=T,o)}if(typeof t!="string")throw Error(a(284));if(!f._owner)throw Error(a(290,t))}return t}function Tl(t,o){throw t=Object.prototype.toString.call(o),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":t))}function Oh(t){var o=t._init;return o(t._payload)}function Dh(t){function o(ue,re){if(t){var fe=ue.deletions;fe===null?(ue.deletions=[re],ue.flags|=16):fe.push(re)}}function f(ue,re){if(!t)return null;for(;re!==null;)o(ue,re),re=re.sibling;return null}function g(ue,re){for(ue=new Map;re!==null;)re.key!==null?ue.set(re.key,re):ue.set(re.index,re),re=re.sibling;return ue}function S(ue,re){return ue=Cs(ue,re),ue.index=0,ue.sibling=null,ue}function T(ue,re,fe){return ue.index=fe,t?(fe=ue.alternate,fe!==null?(fe=fe.index,fe<re?(ue.flags|=2,re):fe):(ue.flags|=2,re)):(ue.flags|=1048576,re)}function M(ue){return t&&ue.alternate===null&&(ue.flags|=2),ue}function H(ue,re,fe,We){return re===null||re.tag!==6?(re=ad(fe,ue.mode,We),re.return=ue,re):(re=S(re,fe),re.return=ue,re)}function Q(ue,re,fe,We){var ot=fe.type;return ot===q?Oe(ue,re,fe.props.children,We,fe.key):re!==null&&(re.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===ke&&Oh(ot)===re.type)?(We=S(re,fe.props),We.ref=pa(ue,re,fe),We.return=ue,We):(We=ql(fe.type,fe.key,fe.props,null,ue.mode,We),We.ref=pa(ue,re,fe),We.return=ue,We)}function me(ue,re,fe,We){return re===null||re.tag!==4||re.stateNode.containerInfo!==fe.containerInfo||re.stateNode.implementation!==fe.implementation?(re=ld(fe,ue.mode,We),re.return=ue,re):(re=S(re,fe.children||[]),re.return=ue,re)}function Oe(ue,re,fe,We,ot){return re===null||re.tag!==7?(re=Qs(fe,ue.mode,We,ot),re.return=ue,re):(re=S(re,fe),re.return=ue,re)}function je(ue,re,fe){if(typeof re=="string"&&re!==""||typeof re=="number")return re=ad(""+re,ue.mode,fe),re.return=ue,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case K:return fe=ql(re.type,re.key,re.props,null,ue.mode,fe),fe.ref=pa(ue,null,re),fe.return=ue,fe;case ne:return re=ld(re,ue.mode,fe),re.return=ue,re;case ke:var We=re._init;return je(ue,We(re._payload),fe)}if(jt(re)||De(re))return re=Qs(re,ue.mode,fe,null),re.return=ue,re;Tl(ue,re)}return null}function _e(ue,re,fe,We){var ot=re!==null?re.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number")return ot!==null?null:H(ue,re,""+fe,We);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case K:return fe.key===ot?Q(ue,re,fe,We):null;case ne:return fe.key===ot?me(ue,re,fe,We):null;case ke:return ot=fe._init,_e(ue,re,ot(fe._payload),We)}if(jt(fe)||De(fe))return ot!==null?null:Oe(ue,re,fe,We,null);Tl(ue,fe)}return null}function Qe(ue,re,fe,We,ot){if(typeof We=="string"&&We!==""||typeof We=="number")return ue=ue.get(fe)||null,H(re,ue,""+We,ot);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case K:return ue=ue.get(We.key===null?fe:We.key)||null,Q(re,ue,We,ot);case ne:return ue=ue.get(We.key===null?fe:We.key)||null,me(re,ue,We,ot);case ke:var pt=We._init;return Qe(ue,re,fe,pt(We._payload),ot)}if(jt(We)||De(We))return ue=ue.get(fe)||null,Oe(re,ue,We,ot,null);Tl(re,We)}return null}function rt(ue,re,fe,We){for(var ot=null,pt=null,mt=re,Ct=re=0,nr=null;mt!==null&&Ct<fe.length;Ct++){mt.index>Ct?(nr=mt,mt=null):nr=mt.sibling;var Ht=_e(ue,mt,fe[Ct],We);if(Ht===null){mt===null&&(mt=nr);break}t&&mt&&Ht.alternate===null&&o(ue,mt),re=T(Ht,re,Ct),pt===null?ot=Ht:pt.sibling=Ht,pt=Ht,mt=nr}if(Ct===fe.length)return f(ue,mt),pn&&Hs(ue,Ct),ot;if(mt===null){for(;Ct<fe.length;Ct++)mt=je(ue,fe[Ct],We),mt!==null&&(re=T(mt,re,Ct),pt===null?ot=mt:pt.sibling=mt,pt=mt);return pn&&Hs(ue,Ct),ot}for(mt=g(ue,mt);Ct<fe.length;Ct++)nr=Qe(mt,ue,Ct,fe[Ct],We),nr!==null&&(t&&nr.alternate!==null&&mt.delete(nr.key===null?Ct:nr.key),re=T(nr,re,Ct),pt===null?ot=nr:pt.sibling=nr,pt=nr);return t&&mt.forEach(function(bs){return o(ue,bs)}),pn&&Hs(ue,Ct),ot}function st(ue,re,fe,We){var ot=De(fe);if(typeof ot!="function")throw Error(a(150));if(fe=ot.call(fe),fe==null)throw Error(a(151));for(var pt=ot=null,mt=re,Ct=re=0,nr=null,Ht=fe.next();mt!==null&&!Ht.done;Ct++,Ht=fe.next()){mt.index>Ct?(nr=mt,mt=null):nr=mt.sibling;var bs=_e(ue,mt,Ht.value,We);if(bs===null){mt===null&&(mt=nr);break}t&&mt&&bs.alternate===null&&o(ue,mt),re=T(bs,re,Ct),pt===null?ot=bs:pt.sibling=bs,pt=bs,mt=nr}if(Ht.done)return f(ue,mt),pn&&Hs(ue,Ct),ot;if(mt===null){for(;!Ht.done;Ct++,Ht=fe.next())Ht=je(ue,Ht.value,We),Ht!==null&&(re=T(Ht,re,Ct),pt===null?ot=Ht:pt.sibling=Ht,pt=Ht);return pn&&Hs(ue,Ct),ot}for(mt=g(ue,mt);!Ht.done;Ct++,Ht=fe.next())Ht=Qe(mt,ue,Ct,Ht.value,We),Ht!==null&&(t&&Ht.alternate!==null&&mt.delete(Ht.key===null?Ct:Ht.key),re=T(Ht,re,Ct),pt===null?ot=Ht:pt.sibling=Ht,pt=Ht);return t&&mt.forEach(function(d2){return o(ue,d2)}),pn&&Hs(ue,Ct),ot}function Mn(ue,re,fe,We){if(typeof fe=="object"&&fe!==null&&fe.type===q&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case K:e:{for(var ot=fe.key,pt=re;pt!==null;){if(pt.key===ot){if(ot=fe.type,ot===q){if(pt.tag===7){f(ue,pt.sibling),re=S(pt,fe.props.children),re.return=ue,ue=re;break e}}else if(pt.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===ke&&Oh(ot)===pt.type){f(ue,pt.sibling),re=S(pt,fe.props),re.ref=pa(ue,pt,fe),re.return=ue,ue=re;break e}f(ue,pt);break}else o(ue,pt);pt=pt.sibling}fe.type===q?(re=Qs(fe.props.children,ue.mode,We,fe.key),re.return=ue,ue=re):(We=ql(fe.type,fe.key,fe.props,null,ue.mode,We),We.ref=pa(ue,re,fe),We.return=ue,ue=We)}return M(ue);case ne:e:{for(pt=fe.key;re!==null;){if(re.key===pt)if(re.tag===4&&re.stateNode.containerInfo===fe.containerInfo&&re.stateNode.implementation===fe.implementation){f(ue,re.sibling),re=S(re,fe.children||[]),re.return=ue,ue=re;break e}else{f(ue,re);break}else o(ue,re);re=re.sibling}re=ld(fe,ue.mode,We),re.return=ue,ue=re}return M(ue);case ke:return pt=fe._init,Mn(ue,re,pt(fe._payload),We)}if(jt(fe))return rt(ue,re,fe,We);if(De(fe))return st(ue,re,fe,We);Tl(ue,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"?(fe=""+fe,re!==null&&re.tag===6?(f(ue,re.sibling),re=S(re,fe),re.return=ue,ue=re):(f(ue,re),re=ad(fe,ue.mode,We),re.return=ue,ue=re),M(ue)):f(ue,re)}return Mn}var To=Dh(!0),Lh=Dh(!1),Il=ds(null),_l=null,Io=null,xu=null;function yu(){xu=Io=_l=null}function wu(t){var o=Il.current;fn(Il),t._currentValue=o}function vu(t,o,f){for(;t!==null;){var g=t.alternate;if((t.childLanes&o)!==o?(t.childLanes|=o,g!==null&&(g.childLanes|=o)):g!==null&&(g.childLanes&o)!==o&&(g.childLanes|=o),t===f)break;t=t.return}}function _o(t,o){_l=t,xu=Io=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&o&&(Pr=!0),t.firstContext=null)}function Kr(t){var o=t._currentValue;if(xu!==t)if(t={context:t,memoizedValue:o,next:null},Io===null){if(_l===null)throw Error(a(308));Io=t,_l.dependencies={lanes:0,firstContext:t}}else Io=Io.next=t;return o}var Gs=null;function Cu(t){Gs===null?Gs=[t]:Gs.push(t)}function jh(t,o,f,g){var S=o.interleaved;return S===null?(f.next=f,Cu(o)):(f.next=S.next,S.next=f),o.interleaved=f,Wi(t,g)}function Wi(t,o){t.lanes|=o;var f=t.alternate;for(f!==null&&(f.lanes|=o),f=t,t=t.return;t!==null;)t.childLanes|=o,f=t.alternate,f!==null&&(f.childLanes|=o),f=t,t=t.return;return f.tag===3?f.stateNode:null}var ps=!1;function bu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bh(t,o){t=t.updateQueue,o.updateQueue===t&&(o.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Hi(t,o){return{eventTime:t,lane:o,tag:0,payload:null,callback:null,next:null}}function ms(t,o,f){var g=t.updateQueue;if(g===null)return null;if(g=g.shared,Ut&2){var S=g.pending;return S===null?o.next=o:(o.next=S.next,S.next=o),g.pending=o,Wi(t,f)}return S=g.interleaved,S===null?(o.next=o,Cu(g)):(o.next=S.next,S.next=o),g.interleaved=o,Wi(t,f)}function Rl(t,o,f){if(o=o.updateQueue,o!==null&&(o=o.shared,(f&4194240)!==0)){var g=o.lanes;g&=t.pendingLanes,f|=g,o.lanes=f,He(t,f)}}function Fh(t,o){var f=t.updateQueue,g=t.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var S=null,T=null;if(f=f.firstBaseUpdate,f!==null){do{var M={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};T===null?S=T=M:T=T.next=M,f=f.next}while(f!==null);T===null?S=T=o:T=T.next=o}else S=T=o;f={baseState:g.baseState,firstBaseUpdate:S,lastBaseUpdate:T,shared:g.shared,effects:g.effects},t.updateQueue=f;return}t=f.lastBaseUpdate,t===null?f.firstBaseUpdate=o:t.next=o,f.lastBaseUpdate=o}function kl(t,o,f,g){var S=t.updateQueue;ps=!1;var T=S.firstBaseUpdate,M=S.lastBaseUpdate,H=S.shared.pending;if(H!==null){S.shared.pending=null;var Q=H,me=Q.next;Q.next=null,M===null?T=me:M.next=me,M=Q;var Oe=t.alternate;Oe!==null&&(Oe=Oe.updateQueue,H=Oe.lastBaseUpdate,H!==M&&(H===null?Oe.firstBaseUpdate=me:H.next=me,Oe.lastBaseUpdate=Q))}if(T!==null){var je=S.baseState;M=0,Oe=me=Q=null,H=T;do{var _e=H.lane,Qe=H.eventTime;if((g&_e)===_e){Oe!==null&&(Oe=Oe.next={eventTime:Qe,lane:0,tag:H.tag,payload:H.payload,callback:H.callback,next:null});e:{var rt=t,st=H;switch(_e=o,Qe=f,st.tag){case 1:if(rt=st.payload,typeof rt=="function"){je=rt.call(Qe,je,_e);break e}je=rt;break e;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=st.payload,_e=typeof rt=="function"?rt.call(Qe,je,_e):rt,_e==null)break e;je=be({},je,_e);break e;case 2:ps=!0}}H.callback!==null&&H.lane!==0&&(t.flags|=64,_e=S.effects,_e===null?S.effects=[H]:_e.push(H))}else Qe={eventTime:Qe,lane:_e,tag:H.tag,payload:H.payload,callback:H.callback,next:null},Oe===null?(me=Oe=Qe,Q=je):Oe=Oe.next=Qe,M|=_e;if(H=H.next,H===null){if(H=S.shared.pending,H===null)break;_e=H,H=_e.next,_e.next=null,S.lastBaseUpdate=_e,S.shared.pending=null}}while(!0);if(Oe===null&&(Q=je),S.baseState=Q,S.firstBaseUpdate=me,S.lastBaseUpdate=Oe,o=S.shared.interleaved,o!==null){S=o;do M|=S.lane,S=S.next;while(S!==o)}else T===null&&(S.shared.lanes=0);Zs|=M,t.lanes=M,t.memoizedState=je}}function Vh(t,o,f){if(t=o.effects,o.effects=null,t!==null)for(o=0;o<t.length;o++){var g=t[o],S=g.callback;if(S!==null){if(g.callback=null,g=f,typeof S!="function")throw Error(a(191,S));S.call(g)}}}var ma={},yi=ds(ma),ga=ds(ma),xa=ds(ma);function Xs(t){if(t===ma)throw Error(a(174));return t}function Eu(t,o){switch(an(xa,o),an(ga,t),an(yi,ma),t=o.nodeType,t){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:ct(null,"");break;default:t=t===8?o.parentNode:o,o=t.namespaceURI||null,t=t.tagName,o=ct(o,t)}fn(yi),an(yi,o)}function Ro(){fn(yi),fn(ga),fn(xa)}function zh(t){Xs(xa.current);var o=Xs(yi.current),f=ct(o,t.type);o!==f&&(an(ga,t),an(yi,f))}function Su(t){ga.current===t&&(fn(yi),fn(ga))}var wn=ds(0);function Pl(t){for(var o=t;o!==null;){if(o.tag===13){var f=o.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Au=[];function Nu(){for(var t=0;t<Au.length;t++)Au[t]._workInProgressVersionPrimary=null;Au.length=0}var Ml=Y.ReactCurrentDispatcher,Tu=Y.ReactCurrentBatchConfig,Ys=0,vn=null,Xn=null,er=null,Ol=!1,ya=!1,wa=0,Mx=0;function mr(){throw Error(a(321))}function Iu(t,o){if(o===null)return!1;for(var f=0;f<o.length&&f<t.length;f++)if(!oe(t[f],o[f]))return!1;return!0}function _u(t,o,f,g,S,T){if(Ys=T,vn=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Ml.current=t===null||t.memoizedState===null?jx:Bx,t=f(g,S),ya){T=0;do{if(ya=!1,wa=0,25<=T)throw Error(a(301));T+=1,er=Xn=null,o.updateQueue=null,Ml.current=Fx,t=f(g,S)}while(ya)}if(Ml.current=jl,o=Xn!==null&&Xn.next!==null,Ys=0,er=Xn=vn=null,Ol=!1,o)throw Error(a(300));return t}function Ru(){var t=wa!==0;return wa=0,t}function wi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return er===null?vn.memoizedState=er=t:er=er.next=t,er}function qr(){if(Xn===null){var t=vn.alternate;t=t!==null?t.memoizedState:null}else t=Xn.next;var o=er===null?vn.memoizedState:er.next;if(o!==null)er=o,Xn=t;else{if(t===null)throw Error(a(310));Xn=t,t={memoizedState:Xn.memoizedState,baseState:Xn.baseState,baseQueue:Xn.baseQueue,queue:Xn.queue,next:null},er===null?vn.memoizedState=er=t:er=er.next=t}return er}function va(t,o){return typeof o=="function"?o(t):o}function ku(t){var o=qr(),f=o.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=t;var g=Xn,S=g.baseQueue,T=f.pending;if(T!==null){if(S!==null){var M=S.next;S.next=T.next,T.next=M}g.baseQueue=S=T,f.pending=null}if(S!==null){T=S.next,g=g.baseState;var H=M=null,Q=null,me=T;do{var Oe=me.lane;if((Ys&Oe)===Oe)Q!==null&&(Q=Q.next={lane:0,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),g=me.hasEagerState?me.eagerState:t(g,me.action);else{var je={lane:Oe,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null};Q===null?(H=Q=je,M=g):Q=Q.next=je,vn.lanes|=Oe,Zs|=Oe}me=me.next}while(me!==null&&me!==T);Q===null?M=g:Q.next=H,oe(g,o.memoizedState)||(Pr=!0),o.memoizedState=g,o.baseState=M,o.baseQueue=Q,f.lastRenderedState=g}if(t=f.interleaved,t!==null){S=t;do T=S.lane,vn.lanes|=T,Zs|=T,S=S.next;while(S!==t)}else S===null&&(f.lanes=0);return[o.memoizedState,f.dispatch]}function Pu(t){var o=qr(),f=o.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=t;var g=f.dispatch,S=f.pending,T=o.memoizedState;if(S!==null){f.pending=null;var M=S=S.next;do T=t(T,M.action),M=M.next;while(M!==S);oe(T,o.memoizedState)||(Pr=!0),o.memoizedState=T,o.baseQueue===null&&(o.baseState=T),f.lastRenderedState=T}return[T,g]}function Uh(){}function Wh(t,o){var f=vn,g=qr(),S=o(),T=!oe(g.memoizedState,S);if(T&&(g.memoizedState=S,Pr=!0),g=g.queue,Mu(Xh.bind(null,f,g,t),[t]),g.getSnapshot!==o||T||er!==null&&er.memoizedState.tag&1){if(f.flags|=2048,Ca(9,Gh.bind(null,f,g,S,o),void 0,null),tr===null)throw Error(a(349));Ys&30||Hh(f,o,S)}return S}function Hh(t,o,f){t.flags|=16384,t={getSnapshot:o,value:f},o=vn.updateQueue,o===null?(o={lastEffect:null,stores:null},vn.updateQueue=o,o.stores=[t]):(f=o.stores,f===null?o.stores=[t]:f.push(t))}function Gh(t,o,f,g){o.value=f,o.getSnapshot=g,Yh(o)&&Zh(t)}function Xh(t,o,f){return f(function(){Yh(o)&&Zh(t)})}function Yh(t){var o=t.getSnapshot;t=t.value;try{var f=o();return!oe(t,f)}catch{return!0}}function Zh(t){var o=Wi(t,1);o!==null&&ui(o,t,1,-1)}function $h(t){var o=wi();return typeof t=="function"&&(t=t()),o.memoizedState=o.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:t},o.queue=t,t=t.dispatch=Lx.bind(null,vn,t),[o.memoizedState,t]}function Ca(t,o,f,g){return t={tag:t,create:o,destroy:f,deps:g,next:null},o=vn.updateQueue,o===null?(o={lastEffect:null,stores:null},vn.updateQueue=o,o.lastEffect=t.next=t):(f=o.lastEffect,f===null?o.lastEffect=t.next=t:(g=f.next,f.next=t,t.next=g,o.lastEffect=t)),t}function Kh(){return qr().memoizedState}function Dl(t,o,f,g){var S=wi();vn.flags|=t,S.memoizedState=Ca(1|o,f,void 0,g===void 0?null:g)}function Ll(t,o,f,g){var S=qr();g=g===void 0?null:g;var T=void 0;if(Xn!==null){var M=Xn.memoizedState;if(T=M.destroy,g!==null&&Iu(g,M.deps)){S.memoizedState=Ca(o,f,T,g);return}}vn.flags|=t,S.memoizedState=Ca(1|o,f,T,g)}function qh(t,o){return Dl(8390656,8,t,o)}function Mu(t,o){return Ll(2048,8,t,o)}function Qh(t,o){return Ll(4,2,t,o)}function Jh(t,o){return Ll(4,4,t,o)}function e0(t,o){if(typeof o=="function")return t=t(),o(t),function(){o(null)};if(o!=null)return t=t(),o.current=t,function(){o.current=null}}function t0(t,o,f){return f=f!=null?f.concat([t]):null,Ll(4,4,e0.bind(null,o,t),f)}function Ou(){}function n0(t,o){var f=qr();o=o===void 0?null:o;var g=f.memoizedState;return g!==null&&o!==null&&Iu(o,g[1])?g[0]:(f.memoizedState=[t,o],t)}function r0(t,o){var f=qr();o=o===void 0?null:o;var g=f.memoizedState;return g!==null&&o!==null&&Iu(o,g[1])?g[0]:(t=t(),f.memoizedState=[t,o],t)}function i0(t,o,f){return Ys&21?(oe(f,o)||(f=En(),vn.lanes|=f,Zs|=f,t.baseState=!0),o):(t.baseState&&(t.baseState=!1,Pr=!0),t.memoizedState=f)}function Ox(t,o){var f=Ye;Ye=f!==0&&4>f?f:4,t(!0);var g=Tu.transition;Tu.transition={};try{t(!1),o()}finally{Ye=f,Tu.transition=g}}function s0(){return qr().memoizedState}function Dx(t,o,f){var g=ws(t);if(f={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null},o0(t))a0(o,f);else if(f=jh(t,o,f,g),f!==null){var S=Er();ui(f,t,g,S),l0(f,o,g)}}function Lx(t,o,f){var g=ws(t),S={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null};if(o0(t))a0(o,S);else{var T=t.alternate;if(t.lanes===0&&(T===null||T.lanes===0)&&(T=o.lastRenderedReducer,T!==null))try{var M=o.lastRenderedState,H=T(M,f);if(S.hasEagerState=!0,S.eagerState=H,oe(H,M)){var Q=o.interleaved;Q===null?(S.next=S,Cu(o)):(S.next=Q.next,Q.next=S),o.interleaved=S;return}}catch{}finally{}f=jh(t,o,S,g),f!==null&&(S=Er(),ui(f,t,g,S),l0(f,o,g))}}function o0(t){var o=t.alternate;return t===vn||o!==null&&o===vn}function a0(t,o){ya=Ol=!0;var f=t.pending;f===null?o.next=o:(o.next=f.next,f.next=o),t.pending=o}function l0(t,o,f){if(f&4194240){var g=o.lanes;g&=t.pendingLanes,f|=g,o.lanes=f,He(t,f)}}var jl={readContext:Kr,useCallback:mr,useContext:mr,useEffect:mr,useImperativeHandle:mr,useInsertionEffect:mr,useLayoutEffect:mr,useMemo:mr,useReducer:mr,useRef:mr,useState:mr,useDebugValue:mr,useDeferredValue:mr,useTransition:mr,useMutableSource:mr,useSyncExternalStore:mr,useId:mr,unstable_isNewReconciler:!1},jx={readContext:Kr,useCallback:function(t,o){return wi().memoizedState=[t,o===void 0?null:o],t},useContext:Kr,useEffect:qh,useImperativeHandle:function(t,o,f){return f=f!=null?f.concat([t]):null,Dl(4194308,4,e0.bind(null,o,t),f)},useLayoutEffect:function(t,o){return Dl(4194308,4,t,o)},useInsertionEffect:function(t,o){return Dl(4,2,t,o)},useMemo:function(t,o){var f=wi();return o=o===void 0?null:o,t=t(),f.memoizedState=[t,o],t},useReducer:function(t,o,f){var g=wi();return o=f!==void 0?f(o):o,g.memoizedState=g.baseState=o,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:o},g.queue=t,t=t.dispatch=Dx.bind(null,vn,t),[g.memoizedState,t]},useRef:function(t){var o=wi();return t={current:t},o.memoizedState=t},useState:$h,useDebugValue:Ou,useDeferredValue:function(t){return wi().memoizedState=t},useTransition:function(){var t=$h(!1),o=t[0];return t=Ox.bind(null,t[1]),wi().memoizedState=t,[o,t]},useMutableSource:function(){},useSyncExternalStore:function(t,o,f){var g=vn,S=wi();if(pn){if(f===void 0)throw Error(a(407));f=f()}else{if(f=o(),tr===null)throw Error(a(349));Ys&30||Hh(g,o,f)}S.memoizedState=f;var T={value:f,getSnapshot:o};return S.queue=T,qh(Xh.bind(null,g,T,t),[t]),g.flags|=2048,Ca(9,Gh.bind(null,g,T,f,o),void 0,null),f},useId:function(){var t=wi(),o=tr.identifierPrefix;if(pn){var f=Ui,g=zi;f=(g&~(1<<32-sr(g)-1)).toString(32)+f,o=":"+o+"R"+f,f=wa++,0<f&&(o+="H"+f.toString(32)),o+=":"}else f=Mx++,o=":"+o+"r"+f.toString(32)+":";return t.memoizedState=o},unstable_isNewReconciler:!1},Bx={readContext:Kr,useCallback:n0,useContext:Kr,useEffect:Mu,useImperativeHandle:t0,useInsertionEffect:Qh,useLayoutEffect:Jh,useMemo:r0,useReducer:ku,useRef:Kh,useState:function(){return ku(va)},useDebugValue:Ou,useDeferredValue:function(t){var o=qr();return i0(o,Xn.memoizedState,t)},useTransition:function(){var t=ku(va)[0],o=qr().memoizedState;return[t,o]},useMutableSource:Uh,useSyncExternalStore:Wh,useId:s0,unstable_isNewReconciler:!1},Fx={readContext:Kr,useCallback:n0,useContext:Kr,useEffect:Mu,useImperativeHandle:t0,useInsertionEffect:Qh,useLayoutEffect:Jh,useMemo:r0,useReducer:Pu,useRef:Kh,useState:function(){return Pu(va)},useDebugValue:Ou,useDeferredValue:function(t){var o=qr();return Xn===null?o.memoizedState=t:i0(o,Xn.memoizedState,t)},useTransition:function(){var t=Pu(va)[0],o=qr().memoizedState;return[t,o]},useMutableSource:Uh,useSyncExternalStore:Wh,useId:s0,unstable_isNewReconciler:!1};function ai(t,o){if(t&&t.defaultProps){o=be({},o),t=t.defaultProps;for(var f in t)o[f]===void 0&&(o[f]=t[f]);return o}return o}function Du(t,o,f,g){o=t.memoizedState,f=f(g,o),f=f==null?o:be({},o,f),t.memoizedState=f,t.lanes===0&&(t.updateQueue.baseState=f)}var Bl={isMounted:function(t){return(t=t._reactInternals)?ir(t)===t:!1},enqueueSetState:function(t,o,f){t=t._reactInternals;var g=Er(),S=ws(t),T=Hi(g,S);T.payload=o,f!=null&&(T.callback=f),o=ms(t,T,S),o!==null&&(ui(o,t,S,g),Rl(o,t,S))},enqueueReplaceState:function(t,o,f){t=t._reactInternals;var g=Er(),S=ws(t),T=Hi(g,S);T.tag=1,T.payload=o,f!=null&&(T.callback=f),o=ms(t,T,S),o!==null&&(ui(o,t,S,g),Rl(o,t,S))},enqueueForceUpdate:function(t,o){t=t._reactInternals;var f=Er(),g=ws(t),S=Hi(f,g);S.tag=2,o!=null&&(S.callback=o),o=ms(t,S,g),o!==null&&(ui(o,t,g,f),Rl(o,t,g))}};function c0(t,o,f,g,S,T,M){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(g,T,M):o.prototype&&o.prototype.isPureReactComponent?!he(f,g)||!he(S,T):!0}function u0(t,o,f){var g=!1,S=fs,T=o.contextType;return typeof T=="object"&&T!==null?T=Kr(T):(S=kr(o)?Us:pr.current,g=o.contextTypes,T=(g=g!=null)?Eo(t,S):fs),o=new o(f,T),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Bl,t.stateNode=o,o._reactInternals=t,g&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=S,t.__reactInternalMemoizedMaskedChildContext=T),o}function d0(t,o,f,g){t=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(f,g),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(f,g),o.state!==t&&Bl.enqueueReplaceState(o,o.state,null)}function Lu(t,o,f,g){var S=t.stateNode;S.props=f,S.state=t.memoizedState,S.refs={},bu(t);var T=o.contextType;typeof T=="object"&&T!==null?S.context=Kr(T):(T=kr(o)?Us:pr.current,S.context=Eo(t,T)),S.state=t.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(Du(t,o,T,f),S.state=t.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(o=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),o!==S.state&&Bl.enqueueReplaceState(S,S.state,null),kl(t,f,S,g),S.state=t.memoizedState),typeof S.componentDidMount=="function"&&(t.flags|=4194308)}function ko(t,o){try{var f="",g=o;do f+=se(g),g=g.return;while(g);var S=f}catch(T){S=`
Error generating stack: `+T.message+`
`+T.stack}return{value:t,source:o,stack:S,digest:null}}function ju(t,o,f){return{value:t,source:null,stack:f??null,digest:o??null}}function Bu(t,o){try{console.error(o.value)}catch(f){setTimeout(function(){throw f})}}var Vx=typeof WeakMap=="function"?WeakMap:Map;function f0(t,o,f){f=Hi(-1,f),f.tag=3,f.payload={element:null};var g=o.value;return f.callback=function(){Gl||(Gl=!0,Ju=g),Bu(t,o)},f}function h0(t,o,f){f=Hi(-1,f),f.tag=3;var g=t.type.getDerivedStateFromError;if(typeof g=="function"){var S=o.value;f.payload=function(){return g(S)},f.callback=function(){Bu(t,o)}}var T=t.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(f.callback=function(){Bu(t,o),typeof g!="function"&&(xs===null?xs=new Set([this]):xs.add(this));var M=o.stack;this.componentDidCatch(o.value,{componentStack:M!==null?M:""})}),f}function p0(t,o,f){var g=t.pingCache;if(g===null){g=t.pingCache=new Vx;var S=new Set;g.set(o,S)}else S=g.get(o),S===void 0&&(S=new Set,g.set(o,S));S.has(f)||(S.add(f),t=e2.bind(null,t,o,f),o.then(t,t))}function m0(t){do{var o;if((o=t.tag===13)&&(o=t.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return t;t=t.return}while(t!==null);return null}function g0(t,o,f,g,S){return t.mode&1?(t.flags|=65536,t.lanes=S,t):(t===o?t.flags|=65536:(t.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(o=Hi(-1,1),o.tag=2,ms(f,o,1))),f.lanes|=1),t)}var zx=Y.ReactCurrentOwner,Pr=!1;function br(t,o,f,g){o.child=t===null?Lh(o,null,f,g):To(o,t.child,f,g)}function x0(t,o,f,g,S){f=f.render;var T=o.ref;return _o(o,S),g=_u(t,o,f,g,T,S),f=Ru(),t!==null&&!Pr?(o.updateQueue=t.updateQueue,o.flags&=-2053,t.lanes&=~S,Gi(t,o,S)):(pn&&f&&fu(o),o.flags|=1,br(t,o,g,S),o.child)}function y0(t,o,f,g,S){if(t===null){var T=f.type;return typeof T=="function"&&!od(T)&&T.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(o.tag=15,o.type=T,w0(t,o,T,g,S)):(t=ql(f.type,null,g,o,o.mode,S),t.ref=o.ref,t.return=o,o.child=t)}if(T=t.child,!(t.lanes&S)){var M=T.memoizedProps;if(f=f.compare,f=f!==null?f:he,f(M,g)&&t.ref===o.ref)return Gi(t,o,S)}return o.flags|=1,t=Cs(T,g),t.ref=o.ref,t.return=o,o.child=t}function w0(t,o,f,g,S){if(t!==null){var T=t.memoizedProps;if(he(T,g)&&t.ref===o.ref)if(Pr=!1,o.pendingProps=g=T,(t.lanes&S)!==0)t.flags&131072&&(Pr=!0);else return o.lanes=t.lanes,Gi(t,o,S)}return Fu(t,o,f,g,S)}function v0(t,o,f){var g=o.pendingProps,S=g.children,T=t!==null?t.memoizedState:null;if(g.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},an(Mo,Hr),Hr|=f;else{if(!(f&1073741824))return t=T!==null?T.baseLanes|f:f,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:t,cachePool:null,transitions:null},o.updateQueue=null,an(Mo,Hr),Hr|=t,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=T!==null?T.baseLanes:f,an(Mo,Hr),Hr|=g}else T!==null?(g=T.baseLanes|f,o.memoizedState=null):g=f,an(Mo,Hr),Hr|=g;return br(t,o,S,f),o.child}function C0(t,o){var f=o.ref;(t===null&&f!==null||t!==null&&t.ref!==f)&&(o.flags|=512,o.flags|=2097152)}function Fu(t,o,f,g,S){var T=kr(f)?Us:pr.current;return T=Eo(o,T),_o(o,S),f=_u(t,o,f,g,T,S),g=Ru(),t!==null&&!Pr?(o.updateQueue=t.updateQueue,o.flags&=-2053,t.lanes&=~S,Gi(t,o,S)):(pn&&g&&fu(o),o.flags|=1,br(t,o,f,S),o.child)}function b0(t,o,f,g,S){if(kr(f)){var T=!0;bl(o)}else T=!1;if(_o(o,S),o.stateNode===null)Vl(t,o),u0(o,f,g),Lu(o,f,g,S),g=!0;else if(t===null){var M=o.stateNode,H=o.memoizedProps;M.props=H;var Q=M.context,me=f.contextType;typeof me=="object"&&me!==null?me=Kr(me):(me=kr(f)?Us:pr.current,me=Eo(o,me));var Oe=f.getDerivedStateFromProps,je=typeof Oe=="function"||typeof M.getSnapshotBeforeUpdate=="function";je||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(H!==g||Q!==me)&&d0(o,M,g,me),ps=!1;var _e=o.memoizedState;M.state=_e,kl(o,g,M,S),Q=o.memoizedState,H!==g||_e!==Q||Rr.current||ps?(typeof Oe=="function"&&(Du(o,f,Oe,g),Q=o.memoizedState),(H=ps||c0(o,f,H,g,_e,Q,me))?(je||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(o.flags|=4194308)):(typeof M.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=g,o.memoizedState=Q),M.props=g,M.state=Q,M.context=me,g=H):(typeof M.componentDidMount=="function"&&(o.flags|=4194308),g=!1)}else{M=o.stateNode,Bh(t,o),H=o.memoizedProps,me=o.type===o.elementType?H:ai(o.type,H),M.props=me,je=o.pendingProps,_e=M.context,Q=f.contextType,typeof Q=="object"&&Q!==null?Q=Kr(Q):(Q=kr(f)?Us:pr.current,Q=Eo(o,Q));var Qe=f.getDerivedStateFromProps;(Oe=typeof Qe=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(H!==je||_e!==Q)&&d0(o,M,g,Q),ps=!1,_e=o.memoizedState,M.state=_e,kl(o,g,M,S);var rt=o.memoizedState;H!==je||_e!==rt||Rr.current||ps?(typeof Qe=="function"&&(Du(o,f,Qe,g),rt=o.memoizedState),(me=ps||c0(o,f,me,g,_e,rt,Q)||!1)?(Oe||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(g,rt,Q),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(g,rt,Q)),typeof M.componentDidUpdate=="function"&&(o.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof M.componentDidUpdate!="function"||H===t.memoizedProps&&_e===t.memoizedState||(o.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||H===t.memoizedProps&&_e===t.memoizedState||(o.flags|=1024),o.memoizedProps=g,o.memoizedState=rt),M.props=g,M.state=rt,M.context=Q,g=me):(typeof M.componentDidUpdate!="function"||H===t.memoizedProps&&_e===t.memoizedState||(o.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||H===t.memoizedProps&&_e===t.memoizedState||(o.flags|=1024),g=!1)}return Vu(t,o,f,g,T,S)}function Vu(t,o,f,g,S,T){C0(t,o);var M=(o.flags&128)!==0;if(!g&&!M)return S&&Th(o,f,!1),Gi(t,o,T);g=o.stateNode,zx.current=o;var H=M&&typeof f.getDerivedStateFromError!="function"?null:g.render();return o.flags|=1,t!==null&&M?(o.child=To(o,t.child,null,T),o.child=To(o,null,H,T)):br(t,o,H,T),o.memoizedState=g.state,S&&Th(o,f,!0),o.child}function E0(t){var o=t.stateNode;o.pendingContext?Ah(t,o.pendingContext,o.pendingContext!==o.context):o.context&&Ah(t,o.context,!1),Eu(t,o.containerInfo)}function S0(t,o,f,g,S){return No(),gu(S),o.flags|=256,br(t,o,f,g),o.child}var zu={dehydrated:null,treeContext:null,retryLane:0};function Uu(t){return{baseLanes:t,cachePool:null,transitions:null}}function A0(t,o,f){var g=o.pendingProps,S=wn.current,T=!1,M=(o.flags&128)!==0,H;if((H=M)||(H=t!==null&&t.memoizedState===null?!1:(S&2)!==0),H?(T=!0,o.flags&=-129):(t===null||t.memoizedState!==null)&&(S|=1),an(wn,S&1),t===null)return mu(o),t=o.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(o.mode&1?t.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(M=g.children,t=g.fallback,T?(g=o.mode,T=o.child,M={mode:"hidden",children:M},!(g&1)&&T!==null?(T.childLanes=0,T.pendingProps=M):T=Ql(M,g,0,null),t=Qs(t,g,f,null),T.return=o,t.return=o,T.sibling=t,o.child=T,o.child.memoizedState=Uu(f),o.memoizedState=zu,t):Wu(o,M));if(S=t.memoizedState,S!==null&&(H=S.dehydrated,H!==null))return Ux(t,o,M,g,H,S,f);if(T){T=g.fallback,M=o.mode,S=t.child,H=S.sibling;var Q={mode:"hidden",children:g.children};return!(M&1)&&o.child!==S?(g=o.child,g.childLanes=0,g.pendingProps=Q,o.deletions=null):(g=Cs(S,Q),g.subtreeFlags=S.subtreeFlags&14680064),H!==null?T=Cs(H,T):(T=Qs(T,M,f,null),T.flags|=2),T.return=o,g.return=o,g.sibling=T,o.child=g,g=T,T=o.child,M=t.child.memoizedState,M=M===null?Uu(f):{baseLanes:M.baseLanes|f,cachePool:null,transitions:M.transitions},T.memoizedState=M,T.childLanes=t.childLanes&~f,o.memoizedState=zu,g}return T=t.child,t=T.sibling,g=Cs(T,{mode:"visible",children:g.children}),!(o.mode&1)&&(g.lanes=f),g.return=o,g.sibling=null,t!==null&&(f=o.deletions,f===null?(o.deletions=[t],o.flags|=16):f.push(t)),o.child=g,o.memoizedState=null,g}function Wu(t,o){return o=Ql({mode:"visible",children:o},t.mode,0,null),o.return=t,t.child=o}function Fl(t,o,f,g){return g!==null&&gu(g),To(o,t.child,null,f),t=Wu(o,o.pendingProps.children),t.flags|=2,o.memoizedState=null,t}function Ux(t,o,f,g,S,T,M){if(f)return o.flags&256?(o.flags&=-257,g=ju(Error(a(422))),Fl(t,o,M,g)):o.memoizedState!==null?(o.child=t.child,o.flags|=128,null):(T=g.fallback,S=o.mode,g=Ql({mode:"visible",children:g.children},S,0,null),T=Qs(T,S,M,null),T.flags|=2,g.return=o,T.return=o,g.sibling=T,o.child=g,o.mode&1&&To(o,t.child,null,M),o.child.memoizedState=Uu(M),o.memoizedState=zu,T);if(!(o.mode&1))return Fl(t,o,M,null);if(S.data==="$!"){if(g=S.nextSibling&&S.nextSibling.dataset,g)var H=g.dgst;return g=H,T=Error(a(419)),g=ju(T,g,void 0),Fl(t,o,M,g)}if(H=(M&t.childLanes)!==0,Pr||H){if(g=tr,g!==null){switch(M&-M){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=S&(g.suspendedLanes|M)?0:S,S!==0&&S!==T.retryLane&&(T.retryLane=S,Wi(t,S),ui(g,t,S,-1))}return sd(),g=ju(Error(a(421))),Fl(t,o,M,g)}return S.data==="$?"?(o.flags|=128,o.child=t.child,o=t2.bind(null,t),S._reactRetry=o,null):(t=T.treeContext,Wr=us(S.nextSibling),Ur=o,pn=!0,oi=null,t!==null&&(Zr[$r++]=zi,Zr[$r++]=Ui,Zr[$r++]=Ws,zi=t.id,Ui=t.overflow,Ws=o),o=Wu(o,g.children),o.flags|=4096,o)}function N0(t,o,f){t.lanes|=o;var g=t.alternate;g!==null&&(g.lanes|=o),vu(t.return,o,f)}function Hu(t,o,f,g,S){var T=t.memoizedState;T===null?t.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:S}:(T.isBackwards=o,T.rendering=null,T.renderingStartTime=0,T.last=g,T.tail=f,T.tailMode=S)}function T0(t,o,f){var g=o.pendingProps,S=g.revealOrder,T=g.tail;if(br(t,o,g.children,f),g=wn.current,g&2)g=g&1|2,o.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=o.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&N0(t,f,o);else if(t.tag===19)N0(t,f,o);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===o)break e;for(;t.sibling===null;){if(t.return===null||t.return===o)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}g&=1}if(an(wn,g),!(o.mode&1))o.memoizedState=null;else switch(S){case"forwards":for(f=o.child,S=null;f!==null;)t=f.alternate,t!==null&&Pl(t)===null&&(S=f),f=f.sibling;f=S,f===null?(S=o.child,o.child=null):(S=f.sibling,f.sibling=null),Hu(o,!1,S,f,T);break;case"backwards":for(f=null,S=o.child,o.child=null;S!==null;){if(t=S.alternate,t!==null&&Pl(t)===null){o.child=S;break}t=S.sibling,S.sibling=f,f=S,S=t}Hu(o,!0,f,null,T);break;case"together":Hu(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Vl(t,o){!(o.mode&1)&&t!==null&&(t.alternate=null,o.alternate=null,o.flags|=2)}function Gi(t,o,f){if(t!==null&&(o.dependencies=t.dependencies),Zs|=o.lanes,!(f&o.childLanes))return null;if(t!==null&&o.child!==t.child)throw Error(a(153));if(o.child!==null){for(t=o.child,f=Cs(t,t.pendingProps),o.child=f,f.return=o;t.sibling!==null;)t=t.sibling,f=f.sibling=Cs(t,t.pendingProps),f.return=o;f.sibling=null}return o.child}function Wx(t,o,f){switch(o.tag){case 3:E0(o),No();break;case 5:zh(o);break;case 1:kr(o.type)&&bl(o);break;case 4:Eu(o,o.stateNode.containerInfo);break;case 10:var g=o.type._context,S=o.memoizedProps.value;an(Il,g._currentValue),g._currentValue=S;break;case 13:if(g=o.memoizedState,g!==null)return g.dehydrated!==null?(an(wn,wn.current&1),o.flags|=128,null):f&o.child.childLanes?A0(t,o,f):(an(wn,wn.current&1),t=Gi(t,o,f),t!==null?t.sibling:null);an(wn,wn.current&1);break;case 19:if(g=(f&o.childLanes)!==0,t.flags&128){if(g)return T0(t,o,f);o.flags|=128}if(S=o.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),an(wn,wn.current),g)break;return null;case 22:case 23:return o.lanes=0,v0(t,o,f)}return Gi(t,o,f)}var I0,Gu,_0,R0;I0=function(t,o){for(var f=o.child;f!==null;){if(f.tag===5||f.tag===6)t.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===o)break;for(;f.sibling===null;){if(f.return===null||f.return===o)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},Gu=function(){},_0=function(t,o,f,g){var S=t.memoizedProps;if(S!==g){t=o.stateNode,Xs(yi.current);var T=null;switch(f){case"input":S=Ze(t,S),g=Ze(t,g),T=[];break;case"select":S=be({},S,{value:void 0}),g=be({},g,{value:void 0}),T=[];break;case"textarea":S=gn(t,S),g=gn(t,g),T=[];break;default:typeof S.onClick!="function"&&typeof g.onClick=="function"&&(t.onclick=wl)}ut(f,g);var M;f=null;for(me in S)if(!g.hasOwnProperty(me)&&S.hasOwnProperty(me)&&S[me]!=null)if(me==="style"){var H=S[me];for(M in H)H.hasOwnProperty(M)&&(f||(f={}),f[M]="")}else me!=="dangerouslySetInnerHTML"&&me!=="children"&&me!=="suppressContentEditableWarning"&&me!=="suppressHydrationWarning"&&me!=="autoFocus"&&(p.hasOwnProperty(me)?T||(T=[]):(T=T||[]).push(me,null));for(me in g){var Q=g[me];if(H=S!=null?S[me]:void 0,g.hasOwnProperty(me)&&Q!==H&&(Q!=null||H!=null))if(me==="style")if(H){for(M in H)!H.hasOwnProperty(M)||Q&&Q.hasOwnProperty(M)||(f||(f={}),f[M]="");for(M in Q)Q.hasOwnProperty(M)&&H[M]!==Q[M]&&(f||(f={}),f[M]=Q[M])}else f||(T||(T=[]),T.push(me,f)),f=Q;else me==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,H=H?H.__html:void 0,Q!=null&&H!==Q&&(T=T||[]).push(me,Q)):me==="children"?typeof Q!="string"&&typeof Q!="number"||(T=T||[]).push(me,""+Q):me!=="suppressContentEditableWarning"&&me!=="suppressHydrationWarning"&&(p.hasOwnProperty(me)?(Q!=null&&me==="onScroll"&&dn("scroll",t),T||H===Q||(T=[])):(T=T||[]).push(me,Q))}f&&(T=T||[]).push("style",f);var me=T;(o.updateQueue=me)&&(o.flags|=4)}},R0=function(t,o,f,g){f!==g&&(o.flags|=4)};function ba(t,o){if(!pn)switch(t.tailMode){case"hidden":o=t.tail;for(var f=null;o!==null;)o.alternate!==null&&(f=o),o=o.sibling;f===null?t.tail=null:f.sibling=null;break;case"collapsed":f=t.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?o||t.tail===null?t.tail=null:t.tail.sibling=null:g.sibling=null}}function gr(t){var o=t.alternate!==null&&t.alternate.child===t.child,f=0,g=0;if(o)for(var S=t.child;S!==null;)f|=S.lanes|S.childLanes,g|=S.subtreeFlags&14680064,g|=S.flags&14680064,S.return=t,S=S.sibling;else for(S=t.child;S!==null;)f|=S.lanes|S.childLanes,g|=S.subtreeFlags,g|=S.flags,S.return=t,S=S.sibling;return t.subtreeFlags|=g,t.childLanes=f,o}function Hx(t,o,f){var g=o.pendingProps;switch(hu(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gr(o),null;case 1:return kr(o.type)&&Cl(),gr(o),null;case 3:return g=o.stateNode,Ro(),fn(Rr),fn(pr),Nu(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(t===null||t.child===null)&&(Nl(o)?o.flags|=4:t===null||t.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,oi!==null&&(nd(oi),oi=null))),Gu(t,o),gr(o),null;case 5:Su(o);var S=Xs(xa.current);if(f=o.type,t!==null&&o.stateNode!=null)_0(t,o,f,g,S),t.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!g){if(o.stateNode===null)throw Error(a(166));return gr(o),null}if(t=Xs(yi.current),Nl(o)){g=o.stateNode,f=o.type;var T=o.memoizedProps;switch(g[xi]=o,g[fa]=T,t=(o.mode&1)!==0,f){case"dialog":dn("cancel",g),dn("close",g);break;case"iframe":case"object":case"embed":dn("load",g);break;case"video":case"audio":for(S=0;S<ca.length;S++)dn(ca[S],g);break;case"source":dn("error",g);break;case"img":case"image":case"link":dn("error",g),dn("load",g);break;case"details":dn("toggle",g);break;case"input":$e(g,T),dn("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!T.multiple},dn("invalid",g);break;case"textarea":rr(g,T),dn("invalid",g)}ut(f,T),S=null;for(var M in T)if(T.hasOwnProperty(M)){var H=T[M];M==="children"?typeof H=="string"?g.textContent!==H&&(T.suppressHydrationWarning!==!0&&yl(g.textContent,H,t),S=["children",H]):typeof H=="number"&&g.textContent!==""+H&&(T.suppressHydrationWarning!==!0&&yl(g.textContent,H,t),S=["children",""+H]):p.hasOwnProperty(M)&&H!=null&&M==="onScroll"&&dn("scroll",g)}switch(f){case"input":Xe(g),qe(g,T,!0);break;case"textarea":Xe(g),It(g);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(g.onclick=wl)}g=S,o.updateQueue=g,g!==null&&(o.flags|=4)}else{M=S.nodeType===9?S:S.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ue(f)),t==="http://www.w3.org/1999/xhtml"?f==="script"?(t=M.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof g.is=="string"?t=M.createElement(f,{is:g.is}):(t=M.createElement(f),f==="select"&&(M=t,g.multiple?M.multiple=!0:g.size&&(M.size=g.size))):t=M.createElementNS(t,f),t[xi]=o,t[fa]=g,I0(t,o,!1,!1),o.stateNode=t;e:{switch(M=xt(f,g),f){case"dialog":dn("cancel",t),dn("close",t),S=g;break;case"iframe":case"object":case"embed":dn("load",t),S=g;break;case"video":case"audio":for(S=0;S<ca.length;S++)dn(ca[S],t);S=g;break;case"source":dn("error",t),S=g;break;case"img":case"image":case"link":dn("error",t),dn("load",t),S=g;break;case"details":dn("toggle",t),S=g;break;case"input":$e(t,g),S=Ze(t,g),dn("invalid",t);break;case"option":S=g;break;case"select":t._wrapperState={wasMultiple:!!g.multiple},S=be({},g,{value:void 0}),dn("invalid",t);break;case"textarea":rr(t,g),S=gn(t,g),dn("invalid",t);break;default:S=g}ut(f,S),H=S;for(T in H)if(H.hasOwnProperty(T)){var Q=H[T];T==="style"?ce(t,Q):T==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,Q!=null&&wt(t,Q)):T==="children"?typeof Q=="string"?(f!=="textarea"||Q!=="")&&Bt(t,Q):typeof Q=="number"&&Bt(t,""+Q):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(p.hasOwnProperty(T)?Q!=null&&T==="onScroll"&&dn("scroll",t):Q!=null&&F(t,T,Q,M))}switch(f){case"input":Xe(t),qe(t,g,!1);break;case"textarea":Xe(t),It(t);break;case"option":g.value!=null&&t.setAttribute("value",""+Se(g.value));break;case"select":t.multiple=!!g.multiple,T=g.value,T!=null?ze(t,!!g.multiple,T,!1):g.defaultValue!=null&&ze(t,!!g.multiple,g.defaultValue,!0);break;default:typeof S.onClick=="function"&&(t.onclick=wl)}switch(f){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return gr(o),null;case 6:if(t&&o.stateNode!=null)R0(t,o,t.memoizedProps,g);else{if(typeof g!="string"&&o.stateNode===null)throw Error(a(166));if(f=Xs(xa.current),Xs(yi.current),Nl(o)){if(g=o.stateNode,f=o.memoizedProps,g[xi]=o,(T=g.nodeValue!==f)&&(t=Ur,t!==null))switch(t.tag){case 3:yl(g.nodeValue,f,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&yl(g.nodeValue,f,(t.mode&1)!==0)}T&&(o.flags|=4)}else g=(f.nodeType===9?f:f.ownerDocument).createTextNode(g),g[xi]=o,o.stateNode=g}return gr(o),null;case 13:if(fn(wn),g=o.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pn&&Wr!==null&&o.mode&1&&!(o.flags&128))Mh(),No(),o.flags|=98560,T=!1;else if(T=Nl(o),g!==null&&g.dehydrated!==null){if(t===null){if(!T)throw Error(a(318));if(T=o.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(a(317));T[xi]=o}else No(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;gr(o),T=!1}else oi!==null&&(nd(oi),oi=null),T=!0;if(!T)return o.flags&65536?o:null}return o.flags&128?(o.lanes=f,o):(g=g!==null,g!==(t!==null&&t.memoizedState!==null)&&g&&(o.child.flags|=8192,o.mode&1&&(t===null||wn.current&1?Yn===0&&(Yn=3):sd())),o.updateQueue!==null&&(o.flags|=4),gr(o),null);case 4:return Ro(),Gu(t,o),t===null&&ua(o.stateNode.containerInfo),gr(o),null;case 10:return wu(o.type._context),gr(o),null;case 17:return kr(o.type)&&Cl(),gr(o),null;case 19:if(fn(wn),T=o.memoizedState,T===null)return gr(o),null;if(g=(o.flags&128)!==0,M=T.rendering,M===null)if(g)ba(T,!1);else{if(Yn!==0||t!==null&&t.flags&128)for(t=o.child;t!==null;){if(M=Pl(t),M!==null){for(o.flags|=128,ba(T,!1),g=M.updateQueue,g!==null&&(o.updateQueue=g,o.flags|=4),o.subtreeFlags=0,g=f,f=o.child;f!==null;)T=f,t=g,T.flags&=14680066,M=T.alternate,M===null?(T.childLanes=0,T.lanes=t,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=M.childLanes,T.lanes=M.lanes,T.child=M.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=M.memoizedProps,T.memoizedState=M.memoizedState,T.updateQueue=M.updateQueue,T.type=M.type,t=M.dependencies,T.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),f=f.sibling;return an(wn,wn.current&1|2),o.child}t=t.sibling}T.tail!==null&&Lt()>Oo&&(o.flags|=128,g=!0,ba(T,!1),o.lanes=4194304)}else{if(!g)if(t=Pl(M),t!==null){if(o.flags|=128,g=!0,f=t.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),ba(T,!0),T.tail===null&&T.tailMode==="hidden"&&!M.alternate&&!pn)return gr(o),null}else 2*Lt()-T.renderingStartTime>Oo&&f!==1073741824&&(o.flags|=128,g=!0,ba(T,!1),o.lanes=4194304);T.isBackwards?(M.sibling=o.child,o.child=M):(f=T.last,f!==null?f.sibling=M:o.child=M,T.last=M)}return T.tail!==null?(o=T.tail,T.rendering=o,T.tail=o.sibling,T.renderingStartTime=Lt(),o.sibling=null,f=wn.current,an(wn,g?f&1|2:f&1),o):(gr(o),null);case 22:case 23:return id(),g=o.memoizedState!==null,t!==null&&t.memoizedState!==null!==g&&(o.flags|=8192),g&&o.mode&1?Hr&1073741824&&(gr(o),o.subtreeFlags&6&&(o.flags|=8192)):gr(o),null;case 24:return null;case 25:return null}throw Error(a(156,o.tag))}function Gx(t,o){switch(hu(o),o.tag){case 1:return kr(o.type)&&Cl(),t=o.flags,t&65536?(o.flags=t&-65537|128,o):null;case 3:return Ro(),fn(Rr),fn(pr),Nu(),t=o.flags,t&65536&&!(t&128)?(o.flags=t&-65537|128,o):null;case 5:return Su(o),null;case 13:if(fn(wn),t=o.memoizedState,t!==null&&t.dehydrated!==null){if(o.alternate===null)throw Error(a(340));No()}return t=o.flags,t&65536?(o.flags=t&-65537|128,o):null;case 19:return fn(wn),null;case 4:return Ro(),null;case 10:return wu(o.type._context),null;case 22:case 23:return id(),null;case 24:return null;default:return null}}var zl=!1,xr=!1,Xx=typeof WeakSet=="function"?WeakSet:Set,nt=null;function Po(t,o){var f=t.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(g){Nn(t,o,g)}else f.current=null}function Xu(t,o,f){try{f()}catch(g){Nn(t,o,g)}}var k0=!1;function Yx(t,o){if(iu=mi,t=Rt(),Et(t)){if("selectionStart"in t)var f={start:t.selectionStart,end:t.selectionEnd};else e:{f=(f=t.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var S=g.anchorOffset,T=g.focusNode;g=g.focusOffset;try{f.nodeType,T.nodeType}catch{f=null;break e}var M=0,H=-1,Q=-1,me=0,Oe=0,je=t,_e=null;t:for(;;){for(var Qe;je!==f||S!==0&&je.nodeType!==3||(H=M+S),je!==T||g!==0&&je.nodeType!==3||(Q=M+g),je.nodeType===3&&(M+=je.nodeValue.length),(Qe=je.firstChild)!==null;)_e=je,je=Qe;for(;;){if(je===t)break t;if(_e===f&&++me===S&&(H=M),_e===T&&++Oe===g&&(Q=M),(Qe=je.nextSibling)!==null)break;je=_e,_e=je.parentNode}je=Qe}f=H===-1||Q===-1?null:{start:H,end:Q}}else f=null}f=f||{start:0,end:0}}else f=null;for(su={focusedElem:t,selectionRange:f},mi=!1,nt=o;nt!==null;)if(o=nt,t=o.child,(o.subtreeFlags&1028)!==0&&t!==null)t.return=o,nt=t;else for(;nt!==null;){o=nt;try{var rt=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(rt!==null){var st=rt.memoizedProps,Mn=rt.memoizedState,ue=o.stateNode,re=ue.getSnapshotBeforeUpdate(o.elementType===o.type?st:ai(o.type,st),Mn);ue.__reactInternalSnapshotBeforeUpdate=re}break;case 3:var fe=o.stateNode.containerInfo;fe.nodeType===1?fe.textContent="":fe.nodeType===9&&fe.documentElement&&fe.removeChild(fe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(We){Nn(o,o.return,We)}if(t=o.sibling,t!==null){t.return=o.return,nt=t;break}nt=o.return}return rt=k0,k0=!1,rt}function Ea(t,o,f){var g=o.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var S=g=g.next;do{if((S.tag&t)===t){var T=S.destroy;S.destroy=void 0,T!==void 0&&Xu(o,f,T)}S=S.next}while(S!==g)}}function Ul(t,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var f=o=o.next;do{if((f.tag&t)===t){var g=f.create;f.destroy=g()}f=f.next}while(f!==o)}}function Yu(t){var o=t.ref;if(o!==null){var f=t.stateNode;switch(t.tag){case 5:t=f;break;default:t=f}typeof o=="function"?o(t):o.current=t}}function P0(t){var o=t.alternate;o!==null&&(t.alternate=null,P0(o)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(o=t.stateNode,o!==null&&(delete o[xi],delete o[fa],delete o[cu],delete o[_x],delete o[Rx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function M0(t){return t.tag===5||t.tag===3||t.tag===4}function O0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||M0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zu(t,o,f){var g=t.tag;if(g===5||g===6)t=t.stateNode,o?f.nodeType===8?f.parentNode.insertBefore(t,o):f.insertBefore(t,o):(f.nodeType===8?(o=f.parentNode,o.insertBefore(t,f)):(o=f,o.appendChild(t)),f=f._reactRootContainer,f!=null||o.onclick!==null||(o.onclick=wl));else if(g!==4&&(t=t.child,t!==null))for(Zu(t,o,f),t=t.sibling;t!==null;)Zu(t,o,f),t=t.sibling}function $u(t,o,f){var g=t.tag;if(g===5||g===6)t=t.stateNode,o?f.insertBefore(t,o):f.appendChild(t);else if(g!==4&&(t=t.child,t!==null))for($u(t,o,f),t=t.sibling;t!==null;)$u(t,o,f),t=t.sibling}var lr=null,li=!1;function gs(t,o,f){for(f=f.child;f!==null;)D0(t,o,f),f=f.sibling}function D0(t,o,f){if(St&&typeof St.onCommitFiberUnmount=="function")try{St.onCommitFiberUnmount(Pt,f)}catch{}switch(f.tag){case 5:xr||Po(f,o);case 6:var g=lr,S=li;lr=null,gs(t,o,f),lr=g,li=S,lr!==null&&(li?(t=lr,f=f.stateNode,t.nodeType===8?t.parentNode.removeChild(f):t.removeChild(f)):lr.removeChild(f.stateNode));break;case 18:lr!==null&&(li?(t=lr,f=f.stateNode,t.nodeType===8?lu(t.parentNode,f):t.nodeType===1&&lu(t,f),ri(t)):lu(lr,f.stateNode));break;case 4:g=lr,S=li,lr=f.stateNode.containerInfo,li=!0,gs(t,o,f),lr=g,li=S;break;case 0:case 11:case 14:case 15:if(!xr&&(g=f.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){S=g=g.next;do{var T=S,M=T.destroy;T=T.tag,M!==void 0&&(T&2||T&4)&&Xu(f,o,M),S=S.next}while(S!==g)}gs(t,o,f);break;case 1:if(!xr&&(Po(f,o),g=f.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=f.memoizedProps,g.state=f.memoizedState,g.componentWillUnmount()}catch(H){Nn(f,o,H)}gs(t,o,f);break;case 21:gs(t,o,f);break;case 22:f.mode&1?(xr=(g=xr)||f.memoizedState!==null,gs(t,o,f),xr=g):gs(t,o,f);break;default:gs(t,o,f)}}function L0(t){var o=t.updateQueue;if(o!==null){t.updateQueue=null;var f=t.stateNode;f===null&&(f=t.stateNode=new Xx),o.forEach(function(g){var S=n2.bind(null,t,g);f.has(g)||(f.add(g),g.then(S,S))})}}function ci(t,o){var f=o.deletions;if(f!==null)for(var g=0;g<f.length;g++){var S=f[g];try{var T=t,M=o,H=M;e:for(;H!==null;){switch(H.tag){case 5:lr=H.stateNode,li=!1;break e;case 3:lr=H.stateNode.containerInfo,li=!0;break e;case 4:lr=H.stateNode.containerInfo,li=!0;break e}H=H.return}if(lr===null)throw Error(a(160));D0(T,M,S),lr=null,li=!1;var Q=S.alternate;Q!==null&&(Q.return=null),S.return=null}catch(me){Nn(S,o,me)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)j0(o,t),o=o.sibling}function j0(t,o){var f=t.alternate,g=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ci(o,t),vi(t),g&4){try{Ea(3,t,t.return),Ul(3,t)}catch(st){Nn(t,t.return,st)}try{Ea(5,t,t.return)}catch(st){Nn(t,t.return,st)}}break;case 1:ci(o,t),vi(t),g&512&&f!==null&&Po(f,f.return);break;case 5:if(ci(o,t),vi(t),g&512&&f!==null&&Po(f,f.return),t.flags&32){var S=t.stateNode;try{Bt(S,"")}catch(st){Nn(t,t.return,st)}}if(g&4&&(S=t.stateNode,S!=null)){var T=t.memoizedProps,M=f!==null?f.memoizedProps:T,H=t.type,Q=t.updateQueue;if(t.updateQueue=null,Q!==null)try{H==="input"&&T.type==="radio"&&T.name!=null&&Tt(S,T),xt(H,M);var me=xt(H,T);for(M=0;M<Q.length;M+=2){var Oe=Q[M],je=Q[M+1];Oe==="style"?ce(S,je):Oe==="dangerouslySetInnerHTML"?wt(S,je):Oe==="children"?Bt(S,je):F(S,Oe,je,me)}switch(H){case"input":it(S,T);break;case"textarea":Ge(S,T);break;case"select":var _e=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!T.multiple;var Qe=T.value;Qe!=null?ze(S,!!T.multiple,Qe,!1):_e!==!!T.multiple&&(T.defaultValue!=null?ze(S,!!T.multiple,T.defaultValue,!0):ze(S,!!T.multiple,T.multiple?[]:"",!1))}S[fa]=T}catch(st){Nn(t,t.return,st)}}break;case 6:if(ci(o,t),vi(t),g&4){if(t.stateNode===null)throw Error(a(162));S=t.stateNode,T=t.memoizedProps;try{S.nodeValue=T}catch(st){Nn(t,t.return,st)}}break;case 3:if(ci(o,t),vi(t),g&4&&f!==null&&f.memoizedState.isDehydrated)try{ri(o.containerInfo)}catch(st){Nn(t,t.return,st)}break;case 4:ci(o,t),vi(t);break;case 13:ci(o,t),vi(t),S=t.child,S.flags&8192&&(T=S.memoizedState!==null,S.stateNode.isHidden=T,!T||S.alternate!==null&&S.alternate.memoizedState!==null||(Qu=Lt())),g&4&&L0(t);break;case 22:if(Oe=f!==null&&f.memoizedState!==null,t.mode&1?(xr=(me=xr)||Oe,ci(o,t),xr=me):ci(o,t),vi(t),g&8192){if(me=t.memoizedState!==null,(t.stateNode.isHidden=me)&&!Oe&&t.mode&1)for(nt=t,Oe=t.child;Oe!==null;){for(je=nt=Oe;nt!==null;){switch(_e=nt,Qe=_e.child,_e.tag){case 0:case 11:case 14:case 15:Ea(4,_e,_e.return);break;case 1:Po(_e,_e.return);var rt=_e.stateNode;if(typeof rt.componentWillUnmount=="function"){g=_e,f=_e.return;try{o=g,rt.props=o.memoizedProps,rt.state=o.memoizedState,rt.componentWillUnmount()}catch(st){Nn(g,f,st)}}break;case 5:Po(_e,_e.return);break;case 22:if(_e.memoizedState!==null){V0(je);continue}}Qe!==null?(Qe.return=_e,nt=Qe):V0(je)}Oe=Oe.sibling}e:for(Oe=null,je=t;;){if(je.tag===5){if(Oe===null){Oe=je;try{S=je.stateNode,me?(T=S.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(H=je.stateNode,Q=je.memoizedProps.style,M=Q!=null&&Q.hasOwnProperty("display")?Q.display:null,H.style.display=Ie("display",M))}catch(st){Nn(t,t.return,st)}}}else if(je.tag===6){if(Oe===null)try{je.stateNode.nodeValue=me?"":je.memoizedProps}catch(st){Nn(t,t.return,st)}}else if((je.tag!==22&&je.tag!==23||je.memoizedState===null||je===t)&&je.child!==null){je.child.return=je,je=je.child;continue}if(je===t)break e;for(;je.sibling===null;){if(je.return===null||je.return===t)break e;Oe===je&&(Oe=null),je=je.return}Oe===je&&(Oe=null),je.sibling.return=je.return,je=je.sibling}}break;case 19:ci(o,t),vi(t),g&4&&L0(t);break;case 21:break;default:ci(o,t),vi(t)}}function vi(t){var o=t.flags;if(o&2){try{e:{for(var f=t.return;f!==null;){if(M0(f)){var g=f;break e}f=f.return}throw Error(a(160))}switch(g.tag){case 5:var S=g.stateNode;g.flags&32&&(Bt(S,""),g.flags&=-33);var T=O0(t);$u(t,T,S);break;case 3:case 4:var M=g.stateNode.containerInfo,H=O0(t);Zu(t,H,M);break;default:throw Error(a(161))}}catch(Q){Nn(t,t.return,Q)}t.flags&=-3}o&4096&&(t.flags&=-4097)}function Zx(t,o,f){nt=t,B0(t)}function B0(t,o,f){for(var g=(t.mode&1)!==0;nt!==null;){var S=nt,T=S.child;if(S.tag===22&&g){var M=S.memoizedState!==null||zl;if(!M){var H=S.alternate,Q=H!==null&&H.memoizedState!==null||xr;H=zl;var me=xr;if(zl=M,(xr=Q)&&!me)for(nt=S;nt!==null;)M=nt,Q=M.child,M.tag===22&&M.memoizedState!==null?z0(S):Q!==null?(Q.return=M,nt=Q):z0(S);for(;T!==null;)nt=T,B0(T),T=T.sibling;nt=S,zl=H,xr=me}F0(t)}else S.subtreeFlags&8772&&T!==null?(T.return=S,nt=T):F0(t)}}function F0(t){for(;nt!==null;){var o=nt;if(o.flags&8772){var f=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:xr||Ul(5,o);break;case 1:var g=o.stateNode;if(o.flags&4&&!xr)if(f===null)g.componentDidMount();else{var S=o.elementType===o.type?f.memoizedProps:ai(o.type,f.memoizedProps);g.componentDidUpdate(S,f.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var T=o.updateQueue;T!==null&&Vh(o,T,g);break;case 3:var M=o.updateQueue;if(M!==null){if(f=null,o.child!==null)switch(o.child.tag){case 5:f=o.child.stateNode;break;case 1:f=o.child.stateNode}Vh(o,M,f)}break;case 5:var H=o.stateNode;if(f===null&&o.flags&4){f=H;var Q=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":Q.autoFocus&&f.focus();break;case"img":Q.src&&(f.src=Q.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var me=o.alternate;if(me!==null){var Oe=me.memoizedState;if(Oe!==null){var je=Oe.dehydrated;je!==null&&ri(je)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}xr||o.flags&512&&Yu(o)}catch(_e){Nn(o,o.return,_e)}}if(o===t){nt=null;break}if(f=o.sibling,f!==null){f.return=o.return,nt=f;break}nt=o.return}}function V0(t){for(;nt!==null;){var o=nt;if(o===t){nt=null;break}var f=o.sibling;if(f!==null){f.return=o.return,nt=f;break}nt=o.return}}function z0(t){for(;nt!==null;){var o=nt;try{switch(o.tag){case 0:case 11:case 15:var f=o.return;try{Ul(4,o)}catch(Q){Nn(o,f,Q)}break;case 1:var g=o.stateNode;if(typeof g.componentDidMount=="function"){var S=o.return;try{g.componentDidMount()}catch(Q){Nn(o,S,Q)}}var T=o.return;try{Yu(o)}catch(Q){Nn(o,T,Q)}break;case 5:var M=o.return;try{Yu(o)}catch(Q){Nn(o,M,Q)}}}catch(Q){Nn(o,o.return,Q)}if(o===t){nt=null;break}var H=o.sibling;if(H!==null){H.return=o.return,nt=H;break}nt=o.return}}var $x=Math.ceil,Wl=Y.ReactCurrentDispatcher,Ku=Y.ReactCurrentOwner,Qr=Y.ReactCurrentBatchConfig,Ut=0,tr=null,jn=null,cr=0,Hr=0,Mo=ds(0),Yn=0,Sa=null,Zs=0,Hl=0,qu=0,Aa=null,Mr=null,Qu=0,Oo=1/0,Xi=null,Gl=!1,Ju=null,xs=null,Xl=!1,ys=null,Yl=0,Na=0,ed=null,Zl=-1,$l=0;function Er(){return Ut&6?Lt():Zl!==-1?Zl:Zl=Lt()}function ws(t){return t.mode&1?Ut&2&&cr!==0?cr&-cr:Px.transition!==null?($l===0&&($l=En()),$l):(t=Ye,t!==0||(t=window.event,t=t===void 0?16:Jo(t.type)),t):1}function ui(t,o,f,g){if(50<Na)throw Na=0,ed=null,Error(a(185));V(t,f,g),(!(Ut&2)||t!==tr)&&(t===tr&&(!(Ut&2)&&(Hl|=f),Yn===4&&vs(t,cr)),Or(t,g),f===1&&Ut===0&&!(o.mode&1)&&(Oo=Lt()+500,El&&hs()))}function Or(t,o){var f=t.callbackNode;Gr(t,o);var g=fr(t,t===tr?cr:0);if(g===0)f!==null&&Ln(f),t.callbackNode=null,t.callbackPriority=0;else if(o=g&-g,t.callbackPriority!==o){if(f!=null&&Ln(f),o===1)t.tag===0?kx(W0.bind(null,t)):Ih(W0.bind(null,t)),Tx(function(){!(Ut&6)&&hs()}),f=null;else{switch(at(g)){case 1:f=Ne;break;case 4:f=Rs;break;case 16:f=Kt;break;case 536870912:f=ki;break;default:f=Kt}f=q0(f,U0.bind(null,t))}t.callbackPriority=o,t.callbackNode=f}}function U0(t,o){if(Zl=-1,$l=0,Ut&6)throw Error(a(327));var f=t.callbackNode;if(Do()&&t.callbackNode!==f)return null;var g=fr(t,t===tr?cr:0);if(g===0)return null;if(g&30||g&t.expiredLanes||o)o=Kl(t,g);else{o=g;var S=Ut;Ut|=2;var T=G0();(tr!==t||cr!==o)&&(Xi=null,Oo=Lt()+500,Ks(t,o));do try{Qx();break}catch(H){H0(t,H)}while(!0);yu(),Wl.current=T,Ut=S,jn!==null?o=0:(tr=null,cr=0,o=Yn)}if(o!==0){if(o===2&&(S=Ft(t),S!==0&&(g=S,o=td(t,S))),o===1)throw f=Sa,Ks(t,0),vs(t,g),Or(t,Lt()),f;if(o===6)vs(t,g);else{if(S=t.current.alternate,!(g&30)&&!Kx(S)&&(o=Kl(t,g),o===2&&(T=Ft(t),T!==0&&(g=T,o=td(t,T))),o===1))throw f=Sa,Ks(t,0),vs(t,g),Or(t,Lt()),f;switch(t.finishedWork=S,t.finishedLanes=g,o){case 0:case 1:throw Error(a(345));case 2:qs(t,Mr,Xi);break;case 3:if(vs(t,g),(g&130023424)===g&&(o=Qu+500-Lt(),10<o)){if(fr(t,0)!==0)break;if(S=t.suspendedLanes,(S&g)!==g){Er(),t.pingedLanes|=t.suspendedLanes&S;break}t.timeoutHandle=au(qs.bind(null,t,Mr,Xi),o);break}qs(t,Mr,Xi);break;case 4:if(vs(t,g),(g&4194240)===g)break;for(o=t.eventTimes,S=-1;0<g;){var M=31-sr(g);T=1<<M,M=o[M],M>S&&(S=M),g&=~T}if(g=S,g=Lt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*$x(g/1960))-g,10<g){t.timeoutHandle=au(qs.bind(null,t,Mr,Xi),g);break}qs(t,Mr,Xi);break;case 5:qs(t,Mr,Xi);break;default:throw Error(a(329))}}}return Or(t,Lt()),t.callbackNode===f?U0.bind(null,t):null}function td(t,o){var f=Aa;return t.current.memoizedState.isDehydrated&&(Ks(t,o).flags|=256),t=Kl(t,o),t!==2&&(o=Mr,Mr=f,o!==null&&nd(o)),t}function nd(t){Mr===null?Mr=t:Mr.push.apply(Mr,t)}function Kx(t){for(var o=t;;){if(o.flags&16384){var f=o.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var g=0;g<f.length;g++){var S=f[g],T=S.getSnapshot;S=S.value;try{if(!oe(T(),S))return!1}catch{return!1}}}if(f=o.child,o.subtreeFlags&16384&&f!==null)f.return=o,o=f;else{if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function vs(t,o){for(o&=~qu,o&=~Hl,t.suspendedLanes|=o,t.pingedLanes&=~o,t=t.expirationTimes;0<o;){var f=31-sr(o),g=1<<f;t[f]=-1,o&=~g}}function W0(t){if(Ut&6)throw Error(a(327));Do();var o=fr(t,0);if(!(o&1))return Or(t,Lt()),null;var f=Kl(t,o);if(t.tag!==0&&f===2){var g=Ft(t);g!==0&&(o=g,f=td(t,g))}if(f===1)throw f=Sa,Ks(t,0),vs(t,o),Or(t,Lt()),f;if(f===6)throw Error(a(345));return t.finishedWork=t.current.alternate,t.finishedLanes=o,qs(t,Mr,Xi),Or(t,Lt()),null}function rd(t,o){var f=Ut;Ut|=1;try{return t(o)}finally{Ut=f,Ut===0&&(Oo=Lt()+500,El&&hs())}}function $s(t){ys!==null&&ys.tag===0&&!(Ut&6)&&Do();var o=Ut;Ut|=1;var f=Qr.transition,g=Ye;try{if(Qr.transition=null,Ye=1,t)return t()}finally{Ye=g,Qr.transition=f,Ut=o,!(Ut&6)&&hs()}}function id(){Hr=Mo.current,fn(Mo)}function Ks(t,o){t.finishedWork=null,t.finishedLanes=0;var f=t.timeoutHandle;if(f!==-1&&(t.timeoutHandle=-1,Nx(f)),jn!==null)for(f=jn.return;f!==null;){var g=f;switch(hu(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Cl();break;case 3:Ro(),fn(Rr),fn(pr),Nu();break;case 5:Su(g);break;case 4:Ro();break;case 13:fn(wn);break;case 19:fn(wn);break;case 10:wu(g.type._context);break;case 22:case 23:id()}f=f.return}if(tr=t,jn=t=Cs(t.current,null),cr=Hr=o,Yn=0,Sa=null,qu=Hl=Zs=0,Mr=Aa=null,Gs!==null){for(o=0;o<Gs.length;o++)if(f=Gs[o],g=f.interleaved,g!==null){f.interleaved=null;var S=g.next,T=f.pending;if(T!==null){var M=T.next;T.next=S,g.next=M}f.pending=g}Gs=null}return t}function H0(t,o){do{var f=jn;try{if(yu(),Ml.current=jl,Ol){for(var g=vn.memoizedState;g!==null;){var S=g.queue;S!==null&&(S.pending=null),g=g.next}Ol=!1}if(Ys=0,er=Xn=vn=null,ya=!1,wa=0,Ku.current=null,f===null||f.return===null){Yn=1,Sa=o,jn=null;break}e:{var T=t,M=f.return,H=f,Q=o;if(o=cr,H.flags|=32768,Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var me=Q,Oe=H,je=Oe.tag;if(!(Oe.mode&1)&&(je===0||je===11||je===15)){var _e=Oe.alternate;_e?(Oe.updateQueue=_e.updateQueue,Oe.memoizedState=_e.memoizedState,Oe.lanes=_e.lanes):(Oe.updateQueue=null,Oe.memoizedState=null)}var Qe=m0(M);if(Qe!==null){Qe.flags&=-257,g0(Qe,M,H,T,o),Qe.mode&1&&p0(T,me,o),o=Qe,Q=me;var rt=o.updateQueue;if(rt===null){var st=new Set;st.add(Q),o.updateQueue=st}else rt.add(Q);break e}else{if(!(o&1)){p0(T,me,o),sd();break e}Q=Error(a(426))}}else if(pn&&H.mode&1){var Mn=m0(M);if(Mn!==null){!(Mn.flags&65536)&&(Mn.flags|=256),g0(Mn,M,H,T,o),gu(ko(Q,H));break e}}T=Q=ko(Q,H),Yn!==4&&(Yn=2),Aa===null?Aa=[T]:Aa.push(T),T=M;do{switch(T.tag){case 3:T.flags|=65536,o&=-o,T.lanes|=o;var ue=f0(T,Q,o);Fh(T,ue);break e;case 1:H=Q;var re=T.type,fe=T.stateNode;if(!(T.flags&128)&&(typeof re.getDerivedStateFromError=="function"||fe!==null&&typeof fe.componentDidCatch=="function"&&(xs===null||!xs.has(fe)))){T.flags|=65536,o&=-o,T.lanes|=o;var We=h0(T,H,o);Fh(T,We);break e}}T=T.return}while(T!==null)}Y0(f)}catch(ot){o=ot,jn===f&&f!==null&&(jn=f=f.return);continue}break}while(!0)}function G0(){var t=Wl.current;return Wl.current=jl,t===null?jl:t}function sd(){(Yn===0||Yn===3||Yn===2)&&(Yn=4),tr===null||!(Zs&268435455)&&!(Hl&268435455)||vs(tr,cr)}function Kl(t,o){var f=Ut;Ut|=2;var g=G0();(tr!==t||cr!==o)&&(Xi=null,Ks(t,o));do try{qx();break}catch(S){H0(t,S)}while(!0);if(yu(),Ut=f,Wl.current=g,jn!==null)throw Error(a(261));return tr=null,cr=0,Yn}function qx(){for(;jn!==null;)X0(jn)}function Qx(){for(;jn!==null&&!Zt();)X0(jn)}function X0(t){var o=K0(t.alternate,t,Hr);t.memoizedProps=t.pendingProps,o===null?Y0(t):jn=o,Ku.current=null}function Y0(t){var o=t;do{var f=o.alternate;if(t=o.return,o.flags&32768){if(f=Gx(f,o),f!==null){f.flags&=32767,jn=f;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Yn=6,jn=null;return}}else if(f=Hx(f,o,Hr),f!==null){jn=f;return}if(o=o.sibling,o!==null){jn=o;return}jn=o=t}while(o!==null);Yn===0&&(Yn=5)}function qs(t,o,f){var g=Ye,S=Qr.transition;try{Qr.transition=null,Ye=1,Jx(t,o,f,g)}finally{Qr.transition=S,Ye=g}return null}function Jx(t,o,f,g){do Do();while(ys!==null);if(Ut&6)throw Error(a(327));f=t.finishedWork;var S=t.finishedLanes;if(f===null)return null;if(t.finishedWork=null,t.finishedLanes=0,f===t.current)throw Error(a(177));t.callbackNode=null,t.callbackPriority=0;var T=f.lanes|f.childLanes;if(ge(t,T),t===tr&&(jn=tr=null,cr=0),!(f.subtreeFlags&2064)&&!(f.flags&2064)||Xl||(Xl=!0,q0(Kt,function(){return Do(),null})),T=(f.flags&15990)!==0,f.subtreeFlags&15990||T){T=Qr.transition,Qr.transition=null;var M=Ye;Ye=1;var H=Ut;Ut|=4,Ku.current=null,Yx(t,f),j0(f,t),hr(su),mi=!!iu,su=iu=null,t.current=f,Zx(f),fo(),Ut=H,Ye=M,Qr.transition=T}else t.current=f;if(Xl&&(Xl=!1,ys=t,Yl=S),T=t.pendingLanes,T===0&&(xs=null),_t(f.stateNode),Or(t,Lt()),o!==null)for(g=t.onRecoverableError,f=0;f<o.length;f++)S=o[f],g(S.value,{componentStack:S.stack,digest:S.digest});if(Gl)throw Gl=!1,t=Ju,Ju=null,t;return Yl&1&&t.tag!==0&&Do(),T=t.pendingLanes,T&1?t===ed?Na++:(Na=0,ed=t):Na=0,hs(),null}function Do(){if(ys!==null){var t=at(Yl),o=Qr.transition,f=Ye;try{if(Qr.transition=null,Ye=16>t?16:t,ys===null)var g=!1;else{if(t=ys,ys=null,Yl=0,Ut&6)throw Error(a(331));var S=Ut;for(Ut|=4,nt=t.current;nt!==null;){var T=nt,M=T.child;if(nt.flags&16){var H=T.deletions;if(H!==null){for(var Q=0;Q<H.length;Q++){var me=H[Q];for(nt=me;nt!==null;){var Oe=nt;switch(Oe.tag){case 0:case 11:case 15:Ea(8,Oe,T)}var je=Oe.child;if(je!==null)je.return=Oe,nt=je;else for(;nt!==null;){Oe=nt;var _e=Oe.sibling,Qe=Oe.return;if(P0(Oe),Oe===me){nt=null;break}if(_e!==null){_e.return=Qe,nt=_e;break}nt=Qe}}}var rt=T.alternate;if(rt!==null){var st=rt.child;if(st!==null){rt.child=null;do{var Mn=st.sibling;st.sibling=null,st=Mn}while(st!==null)}}nt=T}}if(T.subtreeFlags&2064&&M!==null)M.return=T,nt=M;else e:for(;nt!==null;){if(T=nt,T.flags&2048)switch(T.tag){case 0:case 11:case 15:Ea(9,T,T.return)}var ue=T.sibling;if(ue!==null){ue.return=T.return,nt=ue;break e}nt=T.return}}var re=t.current;for(nt=re;nt!==null;){M=nt;var fe=M.child;if(M.subtreeFlags&2064&&fe!==null)fe.return=M,nt=fe;else e:for(M=re;nt!==null;){if(H=nt,H.flags&2048)try{switch(H.tag){case 0:case 11:case 15:Ul(9,H)}}catch(ot){Nn(H,H.return,ot)}if(H===M){nt=null;break e}var We=H.sibling;if(We!==null){We.return=H.return,nt=We;break e}nt=H.return}}if(Ut=S,hs(),St&&typeof St.onPostCommitFiberRoot=="function")try{St.onPostCommitFiberRoot(Pt,t)}catch{}g=!0}return g}finally{Ye=f,Qr.transition=o}}return!1}function Z0(t,o,f){o=ko(f,o),o=f0(t,o,1),t=ms(t,o,1),o=Er(),t!==null&&(V(t,1,o),Or(t,o))}function Nn(t,o,f){if(t.tag===3)Z0(t,t,f);else for(;o!==null;){if(o.tag===3){Z0(o,t,f);break}else if(o.tag===1){var g=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(xs===null||!xs.has(g))){t=ko(f,t),t=h0(o,t,1),o=ms(o,t,1),t=Er(),o!==null&&(V(o,1,t),Or(o,t));break}}o=o.return}}function e2(t,o,f){var g=t.pingCache;g!==null&&g.delete(o),o=Er(),t.pingedLanes|=t.suspendedLanes&f,tr===t&&(cr&f)===f&&(Yn===4||Yn===3&&(cr&130023424)===cr&&500>Lt()-Qu?Ks(t,0):qu|=f),Or(t,o)}function $0(t,o){o===0&&(t.mode&1?(o=pi,pi<<=1,!(pi&130023424)&&(pi=4194304)):o=1);var f=Er();t=Wi(t,o),t!==null&&(V(t,o,f),Or(t,f))}function t2(t){var o=t.memoizedState,f=0;o!==null&&(f=o.retryLane),$0(t,f)}function n2(t,o){var f=0;switch(t.tag){case 13:var g=t.stateNode,S=t.memoizedState;S!==null&&(f=S.retryLane);break;case 19:g=t.stateNode;break;default:throw Error(a(314))}g!==null&&g.delete(o),$0(t,f)}var K0;K0=function(t,o,f){if(t!==null)if(t.memoizedProps!==o.pendingProps||Rr.current)Pr=!0;else{if(!(t.lanes&f)&&!(o.flags&128))return Pr=!1,Wx(t,o,f);Pr=!!(t.flags&131072)}else Pr=!1,pn&&o.flags&1048576&&_h(o,Al,o.index);switch(o.lanes=0,o.tag){case 2:var g=o.type;Vl(t,o),t=o.pendingProps;var S=Eo(o,pr.current);_o(o,f),S=_u(null,o,g,t,S,f);var T=Ru();return o.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,kr(g)?(T=!0,bl(o)):T=!1,o.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,bu(o),S.updater=Bl,o.stateNode=S,S._reactInternals=o,Lu(o,g,t,f),o=Vu(null,o,g,!0,T,f)):(o.tag=0,pn&&T&&fu(o),br(null,o,S,f),o=o.child),o;case 16:g=o.elementType;e:{switch(Vl(t,o),t=o.pendingProps,S=g._init,g=S(g._payload),o.type=g,S=o.tag=i2(g),t=ai(g,t),S){case 0:o=Fu(null,o,g,t,f);break e;case 1:o=b0(null,o,g,t,f);break e;case 11:o=x0(null,o,g,t,f);break e;case 14:o=y0(null,o,g,ai(g.type,t),f);break e}throw Error(a(306,g,""))}return o;case 0:return g=o.type,S=o.pendingProps,S=o.elementType===g?S:ai(g,S),Fu(t,o,g,S,f);case 1:return g=o.type,S=o.pendingProps,S=o.elementType===g?S:ai(g,S),b0(t,o,g,S,f);case 3:e:{if(E0(o),t===null)throw Error(a(387));g=o.pendingProps,T=o.memoizedState,S=T.element,Bh(t,o),kl(o,g,null,f);var M=o.memoizedState;if(g=M.element,T.isDehydrated)if(T={element:g,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},o.updateQueue.baseState=T,o.memoizedState=T,o.flags&256){S=ko(Error(a(423)),o),o=S0(t,o,g,f,S);break e}else if(g!==S){S=ko(Error(a(424)),o),o=S0(t,o,g,f,S);break e}else for(Wr=us(o.stateNode.containerInfo.firstChild),Ur=o,pn=!0,oi=null,f=Lh(o,null,g,f),o.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(No(),g===S){o=Gi(t,o,f);break e}br(t,o,g,f)}o=o.child}return o;case 5:return zh(o),t===null&&mu(o),g=o.type,S=o.pendingProps,T=t!==null?t.memoizedProps:null,M=S.children,ou(g,S)?M=null:T!==null&&ou(g,T)&&(o.flags|=32),C0(t,o),br(t,o,M,f),o.child;case 6:return t===null&&mu(o),null;case 13:return A0(t,o,f);case 4:return Eu(o,o.stateNode.containerInfo),g=o.pendingProps,t===null?o.child=To(o,null,g,f):br(t,o,g,f),o.child;case 11:return g=o.type,S=o.pendingProps,S=o.elementType===g?S:ai(g,S),x0(t,o,g,S,f);case 7:return br(t,o,o.pendingProps,f),o.child;case 8:return br(t,o,o.pendingProps.children,f),o.child;case 12:return br(t,o,o.pendingProps.children,f),o.child;case 10:e:{if(g=o.type._context,S=o.pendingProps,T=o.memoizedProps,M=S.value,an(Il,g._currentValue),g._currentValue=M,T!==null)if(oe(T.value,M)){if(T.children===S.children&&!Rr.current){o=Gi(t,o,f);break e}}else for(T=o.child,T!==null&&(T.return=o);T!==null;){var H=T.dependencies;if(H!==null){M=T.child;for(var Q=H.firstContext;Q!==null;){if(Q.context===g){if(T.tag===1){Q=Hi(-1,f&-f),Q.tag=2;var me=T.updateQueue;if(me!==null){me=me.shared;var Oe=me.pending;Oe===null?Q.next=Q:(Q.next=Oe.next,Oe.next=Q),me.pending=Q}}T.lanes|=f,Q=T.alternate,Q!==null&&(Q.lanes|=f),vu(T.return,f,o),H.lanes|=f;break}Q=Q.next}}else if(T.tag===10)M=T.type===o.type?null:T.child;else if(T.tag===18){if(M=T.return,M===null)throw Error(a(341));M.lanes|=f,H=M.alternate,H!==null&&(H.lanes|=f),vu(M,f,o),M=T.sibling}else M=T.child;if(M!==null)M.return=T;else for(M=T;M!==null;){if(M===o){M=null;break}if(T=M.sibling,T!==null){T.return=M.return,M=T;break}M=M.return}T=M}br(t,o,S.children,f),o=o.child}return o;case 9:return S=o.type,g=o.pendingProps.children,_o(o,f),S=Kr(S),g=g(S),o.flags|=1,br(t,o,g,f),o.child;case 14:return g=o.type,S=ai(g,o.pendingProps),S=ai(g.type,S),y0(t,o,g,S,f);case 15:return w0(t,o,o.type,o.pendingProps,f);case 17:return g=o.type,S=o.pendingProps,S=o.elementType===g?S:ai(g,S),Vl(t,o),o.tag=1,kr(g)?(t=!0,bl(o)):t=!1,_o(o,f),u0(o,g,S),Lu(o,g,S,f),Vu(null,o,g,!0,t,f);case 19:return T0(t,o,f);case 22:return v0(t,o,f)}throw Error(a(156,o.tag))};function q0(t,o){return vr(t,o)}function r2(t,o,f,g){this.tag=t,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jr(t,o,f,g){return new r2(t,o,f,g)}function od(t){return t=t.prototype,!(!t||!t.isReactComponent)}function i2(t){if(typeof t=="function")return od(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ae)return 11;if(t===Z)return 14}return 2}function Cs(t,o){var f=t.alternate;return f===null?(f=Jr(t.tag,o,t.key,t.mode),f.elementType=t.elementType,f.type=t.type,f.stateNode=t.stateNode,f.alternate=t,t.alternate=f):(f.pendingProps=o,f.type=t.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=t.flags&14680064,f.childLanes=t.childLanes,f.lanes=t.lanes,f.child=t.child,f.memoizedProps=t.memoizedProps,f.memoizedState=t.memoizedState,f.updateQueue=t.updateQueue,o=t.dependencies,f.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},f.sibling=t.sibling,f.index=t.index,f.ref=t.ref,f}function ql(t,o,f,g,S,T){var M=2;if(g=t,typeof t=="function")od(t)&&(M=1);else if(typeof t=="string")M=5;else e:switch(t){case q:return Qs(f.children,S,T,o);case ie:M=8,S|=8;break;case J:return t=Jr(12,f,o,S|2),t.elementType=J,t.lanes=T,t;case Ee:return t=Jr(13,f,o,S),t.elementType=Ee,t.lanes=T,t;case Te:return t=Jr(19,f,o,S),t.elementType=Te,t.lanes=T,t;case ve:return Ql(f,S,T,o);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case we:M=10;break e;case Re:M=9;break e;case Ae:M=11;break e;case Z:M=14;break e;case ke:M=16,g=null;break e}throw Error(a(130,t==null?t:typeof t,""))}return o=Jr(M,f,o,S),o.elementType=t,o.type=g,o.lanes=T,o}function Qs(t,o,f,g){return t=Jr(7,t,g,o),t.lanes=f,t}function Ql(t,o,f,g){return t=Jr(22,t,g,o),t.elementType=ve,t.lanes=f,t.stateNode={isHidden:!1},t}function ad(t,o,f){return t=Jr(6,t,null,o),t.lanes=f,t}function ld(t,o,f){return o=Jr(4,t.children!==null?t.children:[],t.key,o),o.lanes=f,o.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},o}function s2(t,o,f,g,S){this.tag=o,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=le(0),this.expirationTimes=le(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=le(0),this.identifierPrefix=g,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function cd(t,o,f,g,S,T,M,H,Q){return t=new s2(t,o,f,H,Q),o===1?(o=1,T===!0&&(o|=8)):o=0,T=Jr(3,null,null,o),t.current=T,T.stateNode=t,T.memoizedState={element:g,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},bu(T),t}function o2(t,o,f){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ne,key:g==null?null:""+g,children:t,containerInfo:o,implementation:f}}function Q0(t){if(!t)return fs;t=t._reactInternals;e:{if(ir(t)!==t||t.tag!==1)throw Error(a(170));var o=t;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(kr(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(a(171))}if(t.tag===1){var f=t.type;if(kr(f))return Nh(t,f,o)}return o}function J0(t,o,f,g,S,T,M,H,Q){return t=cd(f,g,!0,t,S,T,M,H,Q),t.context=Q0(null),f=t.current,g=Er(),S=ws(f),T=Hi(g,S),T.callback=o??null,ms(f,T,S),t.current.lanes=S,V(t,S,g),Or(t,g),t}function Jl(t,o,f,g){var S=o.current,T=Er(),M=ws(S);return f=Q0(f),o.context===null?o.context=f:o.pendingContext=f,o=Hi(T,M),o.payload={element:t},g=g===void 0?null:g,g!==null&&(o.callback=g),t=ms(S,o,M),t!==null&&(ui(t,S,M,T),Rl(t,S,M)),M}function ec(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function e1(t,o){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var f=t.retryLane;t.retryLane=f!==0&&f<o?f:o}}function ud(t,o){e1(t,o),(t=t.alternate)&&e1(t,o)}function a2(){return null}var t1=typeof reportError=="function"?reportError:function(t){console.error(t)};function dd(t){this._internalRoot=t}tc.prototype.render=dd.prototype.render=function(t){var o=this._internalRoot;if(o===null)throw Error(a(409));Jl(t,o,null,null)},tc.prototype.unmount=dd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var o=t.containerInfo;$s(function(){Jl(null,t,null,null)}),o[Fi]=null}};function tc(t){this._internalRoot=t}tc.prototype.unstable_scheduleHydration=function(t){if(t){var o=Qt();t={blockedOn:null,target:t,priority:o};for(var f=0;f<Un.length&&o!==0&&o<Un[f].priority;f++);Un.splice(f,0,t),f===0&&ol(t)}};function fd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function nc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function n1(){}function l2(t,o,f,g,S){if(S){if(typeof g=="function"){var T=g;g=function(){var me=ec(M);T.call(me)}}var M=J0(o,g,t,0,null,!1,!1,"",n1);return t._reactRootContainer=M,t[Fi]=M.current,ua(t.nodeType===8?t.parentNode:t),$s(),M}for(;S=t.lastChild;)t.removeChild(S);if(typeof g=="function"){var H=g;g=function(){var me=ec(Q);H.call(me)}}var Q=cd(t,0,!1,null,null,!1,!1,"",n1);return t._reactRootContainer=Q,t[Fi]=Q.current,ua(t.nodeType===8?t.parentNode:t),$s(function(){Jl(o,Q,f,g)}),Q}function rc(t,o,f,g,S){var T=f._reactRootContainer;if(T){var M=T;if(typeof S=="function"){var H=S;S=function(){var Q=ec(M);H.call(Q)}}Jl(o,M,t,S)}else M=l2(f,o,t,S,g);return ec(M)}Dt=function(t){switch(t.tag){case 3:var o=t.stateNode;if(o.current.memoizedState.isDehydrated){var f=qt(o.pendingLanes);f!==0&&(He(o,f|1),Or(o,Lt()),!(Ut&6)&&(Oo=Lt()+500,hs()))}break;case 13:$s(function(){var g=Wi(t,1);if(g!==null){var S=Er();ui(g,t,1,S)}}),ud(t,1)}},un=function(t){if(t.tag===13){var o=Wi(t,134217728);if(o!==null){var f=Er();ui(o,t,134217728,f)}ud(t,134217728)}},lt=function(t){if(t.tag===13){var o=ws(t),f=Wi(t,o);if(f!==null){var g=Er();ui(f,t,o,g)}ud(t,o)}},Qt=function(){return Ye},ts=function(t,o){var f=Ye;try{return Ye=t,o()}finally{Ye=f}},ln=function(t,o,f){switch(o){case"input":if(it(t,f),o=f.name,f.type==="radio"&&o!=null){for(f=t;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<f.length;o++){var g=f[o];if(g!==t&&g.form===t.form){var S=vl(g);if(!S)throw Error(a(90));de(g),it(g,S)}}}break;case"textarea":Ge(t,f);break;case"select":o=f.value,o!=null&&ze(t,!!f.multiple,o,!1)}},Ni=rd,Wt=$s;var c2={usingClientEntryPoint:!1,Events:[ha,Co,vl,Fr,en,rd]},Ta={findFiberByHostInstance:zs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},u2={bundleType:Ta.bundleType,version:Ta.version,rendererPackageName:Ta.rendererPackageName,rendererConfig:Ta.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Y.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=uo(t),t===null?null:t.stateNode},findFiberByHostInstance:Ta.findFiberByHostInstance||a2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{Pt=ic.inject(u2),St=ic}catch{}}return Dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=c2,Dr.createPortal=function(t,o){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fd(o))throw Error(a(200));return o2(t,o,null,f)},Dr.createRoot=function(t,o){if(!fd(t))throw Error(a(299));var f=!1,g="",S=t1;return o!=null&&(o.unstable_strictMode===!0&&(f=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onRecoverableError!==void 0&&(S=o.onRecoverableError)),o=cd(t,1,!1,null,null,f,!1,g,S),t[Fi]=o.current,ua(t.nodeType===8?t.parentNode:t),new dd(o)},Dr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var o=t._reactInternals;if(o===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=uo(o),t=t===null?null:t.stateNode,t},Dr.flushSync=function(t){return $s(t)},Dr.hydrate=function(t,o,f){if(!nc(o))throw Error(a(200));return rc(null,t,o,!0,f)},Dr.hydrateRoot=function(t,o,f){if(!fd(t))throw Error(a(405));var g=f!=null&&f.hydratedSources||null,S=!1,T="",M=t1;if(f!=null&&(f.unstable_strictMode===!0&&(S=!0),f.identifierPrefix!==void 0&&(T=f.identifierPrefix),f.onRecoverableError!==void 0&&(M=f.onRecoverableError)),o=J0(o,null,t,1,f??null,S,!1,T,M),t[Fi]=o.current,ua(t),g)for(t=0;t<g.length;t++)f=g[t],S=f._getVersion,S=S(f._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[f,S]:o.mutableSourceEagerHydrationData.push(f,S);return new tc(o)},Dr.render=function(t,o,f){if(!nc(o))throw Error(a(200));return rc(null,t,o,!1,f)},Dr.unmountComponentAtNode=function(t){if(!nc(t))throw Error(a(40));return t._reactRootContainer?($s(function(){rc(null,null,t,!1,function(){t._reactRootContainer=null,t[Fi]=null})}),!0):!1},Dr.unstable_batchedUpdates=rd,Dr.unstable_renderSubtreeIntoContainer=function(t,o,f,g){if(!nc(f))throw Error(a(200));if(t==null||t._reactInternals===void 0)throw Error(a(38));return rc(t,o,f,!1,g)},Dr.version="18.3.1-next-f1338f8080-20240426",Dr}var u1;function y2(){if(u1)return md.exports;u1=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(s){console.error(s)}}return r(),md.exports=x2(),md.exports}var d1;function w2(){if(d1)return oc;d1=1;var r=y2();return oc.createRoot=r.createRoot,oc.hydrateRoot=r.hydrateRoot,oc}var v2=w2();const Fn=N.createContext(null),C2=({children:r})=>{const[s,a]=N.useState(null),[u,p]=N.useState(null),[x,w]=N.useState(null),[E,v]=N.useState(null),[C,A]=N.useState(!1),[I,R]=N.useState(null),[O,L]=N.useState(!1),[j,B]=N.useState(!0),[W,z]=N.useState("Connecting..."),F=N.useRef(null),Y=async()=>{B(!0),z("Connecting..."),F.current&&clearTimeout(F.current),F.current=setTimeout(()=>{z("Taking longer than expected. Check your connection.")},1e4);try{try{const J=await fetch(window.server_url+"/auth/session",{method:"GET",credentials:"include"});if(J.ok){const we=await J.json();if(we.authenticated){console.log("SESSION AUTH SUCCESS:",we);const Re=localStorage.getItem("user");Re&&Re!==we.user.username&&(console.log("Session user differs from cached user, clearing stale credentials"),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user")),we.access_token&&(console.log("Session includes JWT, storing in localStorage"),localStorage.setItem("access_token",we.access_token),localStorage.setItem("user",we.user.username),we.refresh_token&&localStorage.setItem("refresh_token",we.refresh_token)),A(!0),a(we.user.username),p(we.user.profile||null),R(we.user.permissions||null),L(we.user.email_verified===!0);return}}}catch(J){console.log("Session auth check failed (this is ok if using JWT):",J)}const ie=localStorage.getItem("access_token");if(ie)try{const J=await fetch(window.server_url+"/load_user",{headers:{Authorization:`Bearer ${ie}`},credentials:"include"});if(J.ok){A(!0);const we=await J.json();console.log("JWT AUTH SUCCESS:",we),a(we.username),p(we.profile),R(we.permissions),L(we.email_verified===!0),console.log("PERMISSIONS:",we.permissions)}else console.log("TOKEN INVALID"),localStorage.removeItem("access_token"),a(null),p(null),w(null),v(null),A(!1)}catch(J){console.log("JWT auth error (network issue):",J);const we=localStorage.getItem("user");ie&&we&&(console.log("Using optimistic auth with cached user:",we),a(we),A(!0))}}finally{F.current&&(clearTimeout(F.current),F.current=null),B(!1)}};N.useEffect(()=>{Y()},[]);const K=ie=>{a(ie.username),w(ie.access_token),v(ie.refresh_token),R(ie.permissions),console.log("PRE SAVE USERNAME:",ie.username),localStorage.setItem("user",ie.username),localStorage.setItem("access_token",ie.access_token),localStorage.setItem("refresh_token",ie.refresh_token)},ne=async(ie,J)=>{const we=await fetch(window.server_url+"/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:ie,password:J})});if(we.ok){const Re=await we.json();console.log("SIGNED UP, userData:",Re)}},q=async()=>{try{await fetch(window.server_url+"/auth/logout",{method:"POST",credentials:"include"})}catch(ie){console.log("Logout request failed (session may already be cleared):",ie)}localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),a(null),p(null),w(null),v(null),A(!1),R(null),L(!1)};return h.jsx(Fn.Provider,{value:{user:s,login:K,signup:ne,logout:q,userProfile:u,checkAuth:Y,permissions:I,emailVerified:O,isAuthLoading:j,authLoadingMessage:W},children:r})};var Ud=function(r,s){return Ud=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(a[p]=u[p])},Ud(r,s)};function b2(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");Ud(r,s);function a(){this.constructor=r}r.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}var ur=function(){return ur=Object.assign||function(s){for(var a,u=1,p=arguments.length;u<p;u++){a=arguments[u];for(var x in a)Object.prototype.hasOwnProperty.call(a,x)&&(s[x]=a[x])}return s},ur.apply(this,arguments)};var yd,f1;function E2(){if(f1)return yd;f1=1;var r=!1,s,a,u,p,x,w,E,v,C,A,I,R,O,L,j;function B(){if(!r){r=!0;var z=navigator.userAgent,F=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(z),Y=/(Mac OS X)|(Windows)|(Linux)/.exec(z);if(R=/\b(iPhone|iP[ao]d)/.exec(z),O=/\b(iP[ao]d)/.exec(z),A=/Android/i.exec(z),L=/FBAN\/\w+;/i.exec(z),j=/Mobile/i.exec(z),I=!!/Win64/.exec(z),F){s=F[1]?parseFloat(F[1]):F[5]?parseFloat(F[5]):NaN,s&&document&&document.documentMode&&(s=document.documentMode);var K=/(?:Trident\/(\d+.\d+))/.exec(z);w=K?parseFloat(K[1])+4:s,a=F[2]?parseFloat(F[2]):NaN,u=F[3]?parseFloat(F[3]):NaN,p=F[4]?parseFloat(F[4]):NaN,p?(F=/(?:Chrome\/(\d+\.\d+))/.exec(z),x=F&&F[1]?parseFloat(F[1]):NaN):x=NaN}else s=a=u=x=p=NaN;if(Y){if(Y[1]){var ne=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(z);E=ne?parseFloat(ne[1].replace("_",".")):!0}else E=!1;v=!!Y[2],C=!!Y[3]}else E=v=C=!1}}var W={ie:function(){return B()||s},ieCompatibilityMode:function(){return B()||w>s},ie64:function(){return W.ie()&&I},firefox:function(){return B()||a},opera:function(){return B()||u},webkit:function(){return B()||p},safari:function(){return W.webkit()},chrome:function(){return B()||x},windows:function(){return B()||v},osx:function(){return B()||E},linux:function(){return B()||C},iphone:function(){return B()||R},mobile:function(){return B()||R||O||A||j},nativeApp:function(){return B()||L},android:function(){return B()||A},ipad:function(){return B()||O}};return yd=W,yd}var wd,h1;function S2(){if(h1)return wd;h1=1;var r=!!(typeof window<"u"&&window.document&&window.document.createElement),s={canUseDOM:r,canUseWorkers:typeof Worker<"u",canUseEventListeners:r&&!!(window.addEventListener||window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};return wd=s,wd}var vd,p1;function A2(){if(p1)return vd;p1=1;var r=S2(),s;r.canUseDOM&&(s=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function a(u,p){if(!r.canUseDOM||p&&!("addEventListener"in document))return!1;var x="on"+u,w=x in document;if(!w){var E=document.createElement("div");E.setAttribute(x,"return;"),w=typeof E[x]=="function"}return!w&&s&&u==="wheel"&&(w=document.implementation.hasFeature("Events.wheel","3.0")),w}return vd=a,vd}var Cd,m1;function N2(){if(m1)return Cd;m1=1;var r=E2(),s=A2(),a=10,u=40,p=800;function x(w){var E=0,v=0,C=0,A=0;return"detail"in w&&(v=w.detail),"wheelDelta"in w&&(v=-w.wheelDelta/120),"wheelDeltaY"in w&&(v=-w.wheelDeltaY/120),"wheelDeltaX"in w&&(E=-w.wheelDeltaX/120),"axis"in w&&w.axis===w.HORIZONTAL_AXIS&&(E=v,v=0),C=E*a,A=v*a,"deltaY"in w&&(A=w.deltaY),"deltaX"in w&&(C=w.deltaX),(C||A)&&w.deltaMode&&(w.deltaMode==1?(C*=u,A*=u):(C*=p,A*=p)),C&&!E&&(E=C<1?-1:1),A&&!v&&(v=A<1?-1:1),{spinX:E,spinY:v,pixelX:C,pixelY:A}}return x.getEventType=function(){return r.firefox()?"DOMMouseScroll":s("wheel")?"wheel":"mousewheel"},Cd=x,Cd}var bd,g1;function T2(){return g1||(g1=1,bd=N2()),bd}var I2=T2();const _2=rm(I2);function R2(r,s,a,u,p,x){x===void 0&&(x=0);var w=Wo(r,s,x),E=w.width,v=w.height,C=Math.min(E,a),A=Math.min(v,u);return C>A*p?{width:A*p,height:A}:{width:C,height:C/p}}function k2(r){return r.width>r.height?r.width/r.naturalWidth:r.height/r.naturalHeight}function _a(r,s,a,u,p){p===void 0&&(p=0);var x=Wo(s.width,s.height,p),w=x.width,E=x.height;return{x:x1(r.x,w,a.width,u),y:x1(r.y,E,a.height,u)}}function x1(r,s,a,u){var p=s*u/2-a/2;return Lc(r,-p,p)}function y1(r,s){return Math.sqrt(Math.pow(r.y-s.y,2)+Math.pow(r.x-s.x,2))}function w1(r,s){return Math.atan2(s.y-r.y,s.x-r.x)*180/Math.PI}function P2(r,s,a,u,p,x,w){x===void 0&&(x=0),w===void 0&&(w=!0);var E=w?M2:O2,v=Wo(s.width,s.height,x),C=Wo(s.naturalWidth,s.naturalHeight,x),A={x:E(100,((v.width-a.width/p)/2-r.x/p)/v.width*100),y:E(100,((v.height-a.height/p)/2-r.y/p)/v.height*100),width:E(100,a.width/v.width*100/p),height:E(100,a.height/v.height*100/p)},I=Math.round(E(C.width,A.width*C.width/100)),R=Math.round(E(C.height,A.height*C.height/100)),O=C.width>=C.height*u,L=O?{width:Math.round(R*u),height:R}:{width:I,height:Math.round(I/u)},j=ur(ur({},L),{x:Math.round(E(C.width-L.width,A.x*C.width/100)),y:Math.round(E(C.height-L.height,A.y*C.height/100))});return{croppedAreaPercentages:A,croppedAreaPixels:j}}function M2(r,s){return Math.min(r,Math.max(0,s))}function O2(r,s){return s}function D2(r,s,a,u,p,x){var w=Wo(s.width,s.height,a),E=Lc(u.width/w.width*(100/r.width),p,x),v={x:E*w.width/2-u.width/2-w.width*E*(r.x/100),y:E*w.height/2-u.height/2-w.height*E*(r.y/100)};return{crop:v,zoom:E}}function L2(r,s,a){var u=k2(s);return a.height>a.width?a.height/(r.height*u):a.width/(r.width*u)}function j2(r,s,a,u,p,x){a===void 0&&(a=0);var w=Wo(s.naturalWidth,s.naturalHeight,a),E=Lc(L2(r,s,u),p,x),v=u.height>u.width?u.height/r.height:u.width/r.width,C={x:((w.width-r.width)/2-r.x)*v,y:((w.height-r.height)/2-r.y)*v};return{crop:C,zoom:E}}function v1(r,s){return{x:(s.x+r.x)/2,y:(s.y+r.y)/2}}function B2(r){return r*Math.PI/180}function Wo(r,s,a){var u=B2(a);return{width:Math.abs(Math.cos(u)*r)+Math.abs(Math.sin(u)*s),height:Math.abs(Math.sin(u)*r)+Math.abs(Math.cos(u)*s)}}function Lc(r,s,a){return Math.min(Math.max(r,s),a)}function ac(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];return r.filter(function(a){return typeof a=="string"&&a.length>0}).join(" ").trim()}var F2=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,V2=1,z2=3,U2=1,jc=function(r){b2(s,r);function s(){var a=r!==null&&r.apply(this,arguments)||this;return a.imageRef=N.createRef(),a.videoRef=N.createRef(),a.containerPosition={x:0,y:0},a.containerRef=null,a.styleRef=null,a.containerRect=null,a.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},a.dragStartPosition={x:0,y:0},a.dragStartCrop={x:0,y:0},a.gestureZoomStart=0,a.gestureRotationStart=0,a.isTouching=!1,a.lastPinchDistance=0,a.lastPinchRotation=0,a.rafDragTimeout=null,a.rafPinchTimeout=null,a.wheelTimer=null,a.currentDoc=typeof document<"u"?document:null,a.currentWindow=typeof window<"u"?window:null,a.resizeObserver=null,a.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},a.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!a.containerRef)){var u=!0;a.resizeObserver=new window.ResizeObserver(function(p){if(u){u=!1;return}a.computeSizes()}),a.resizeObserver.observe(a.containerRef)}},a.preventZoomSafari=function(u){return u.preventDefault()},a.cleanEvents=function(){a.currentDoc&&(a.currentDoc.removeEventListener("mousemove",a.onMouseMove),a.currentDoc.removeEventListener("mouseup",a.onDragStopped),a.currentDoc.removeEventListener("touchmove",a.onTouchMove),a.currentDoc.removeEventListener("touchend",a.onDragStopped),a.currentDoc.removeEventListener("gesturemove",a.onGestureMove),a.currentDoc.removeEventListener("gestureend",a.onGestureEnd),a.currentDoc.removeEventListener("scroll",a.onScroll))},a.clearScrollEvent=function(){a.containerRef&&a.containerRef.removeEventListener("wheel",a.onWheel),a.wheelTimer&&clearTimeout(a.wheelTimer)},a.onMediaLoad=function(){var u=a.computeSizes();u&&(a.emitCropData(),a.setInitialCrop(u)),a.props.onMediaLoaded&&a.props.onMediaLoaded(a.mediaSize)},a.setInitialCrop=function(u){if(a.props.initialCroppedAreaPercentages){var p=D2(a.props.initialCroppedAreaPercentages,a.mediaSize,a.props.rotation,u,a.props.minZoom,a.props.maxZoom),x=p.crop,w=p.zoom;a.props.onCropChange(x),a.props.onZoomChange&&a.props.onZoomChange(w)}else if(a.props.initialCroppedAreaPixels){var E=j2(a.props.initialCroppedAreaPixels,a.mediaSize,a.props.rotation,u,a.props.minZoom,a.props.maxZoom),x=E.crop,w=E.zoom;a.props.onCropChange(x),a.props.onZoomChange&&a.props.onZoomChange(w)}},a.computeSizes=function(){var u,p,x,w,E,v,C=a.imageRef.current||a.videoRef.current;if(C&&a.containerRef){a.containerRect=a.containerRef.getBoundingClientRect(),a.saveContainerPosition();var A=a.containerRect.width/a.containerRect.height,I=((u=a.imageRef.current)===null||u===void 0?void 0:u.naturalWidth)||((p=a.videoRef.current)===null||p===void 0?void 0:p.videoWidth)||0,R=((x=a.imageRef.current)===null||x===void 0?void 0:x.naturalHeight)||((w=a.videoRef.current)===null||w===void 0?void 0:w.videoHeight)||0,O=C.offsetWidth<I||C.offsetHeight<R,L=I/R,j=void 0;if(O)switch(a.state.mediaObjectFit){default:case"contain":j=A>L?{width:a.containerRect.height*L,height:a.containerRect.height}:{width:a.containerRect.width,height:a.containerRect.width/L};break;case"horizontal-cover":j={width:a.containerRect.width,height:a.containerRect.width/L};break;case"vertical-cover":j={width:a.containerRect.height*L,height:a.containerRect.height};break}else j={width:C.offsetWidth,height:C.offsetHeight};a.mediaSize=ur(ur({},j),{naturalWidth:I,naturalHeight:R}),a.props.setMediaSize&&a.props.setMediaSize(a.mediaSize);var B=a.props.cropSize?a.props.cropSize:R2(a.mediaSize.width,a.mediaSize.height,a.containerRect.width,a.containerRect.height,a.props.aspect,a.props.rotation);return(((E=a.state.cropSize)===null||E===void 0?void 0:E.height)!==B.height||((v=a.state.cropSize)===null||v===void 0?void 0:v.width)!==B.width)&&a.props.onCropSizeChange&&a.props.onCropSizeChange(B),a.setState({cropSize:B},a.recomputeCropPosition),a.props.setCropSize&&a.props.setCropSize(B),B}},a.saveContainerPosition=function(){if(a.containerRef){var u=a.containerRef.getBoundingClientRect();a.containerPosition={x:u.left,y:u.top}}},a.onMouseDown=function(u){a.currentDoc&&(u.preventDefault(),a.currentDoc.addEventListener("mousemove",a.onMouseMove),a.currentDoc.addEventListener("mouseup",a.onDragStopped),a.saveContainerPosition(),a.onDragStart(s.getMousePoint(u)))},a.onMouseMove=function(u){return a.onDrag(s.getMousePoint(u))},a.onScroll=function(u){a.currentDoc&&(u.preventDefault(),a.saveContainerPosition())},a.onTouchStart=function(u){a.currentDoc&&(a.isTouching=!0,!(a.props.onTouchRequest&&!a.props.onTouchRequest(u))&&(a.currentDoc.addEventListener("touchmove",a.onTouchMove,{passive:!1}),a.currentDoc.addEventListener("touchend",a.onDragStopped),a.saveContainerPosition(),u.touches.length===2?a.onPinchStart(u):u.touches.length===1&&a.onDragStart(s.getTouchPoint(u.touches[0]))))},a.onTouchMove=function(u){u.preventDefault(),u.touches.length===2?a.onPinchMove(u):u.touches.length===1&&a.onDrag(s.getTouchPoint(u.touches[0]))},a.onGestureStart=function(u){a.currentDoc&&(u.preventDefault(),a.currentDoc.addEventListener("gesturechange",a.onGestureMove),a.currentDoc.addEventListener("gestureend",a.onGestureEnd),a.gestureZoomStart=a.props.zoom,a.gestureRotationStart=a.props.rotation)},a.onGestureMove=function(u){if(u.preventDefault(),!a.isTouching){var p=s.getMousePoint(u),x=a.gestureZoomStart-1+u.scale;if(a.setNewZoom(x,p,{shouldUpdatePosition:!0}),a.props.onRotationChange){var w=a.gestureRotationStart+u.rotation;a.props.onRotationChange(w)}}},a.onGestureEnd=function(u){a.cleanEvents()},a.onDragStart=function(u){var p,x,w=u.x,E=u.y;a.dragStartPosition={x:w,y:E},a.dragStartCrop=ur({},a.props.crop),(x=(p=a.props).onInteractionStart)===null||x===void 0||x.call(p)},a.onDrag=function(u){var p=u.x,x=u.y;a.currentWindow&&(a.rafDragTimeout&&a.currentWindow.cancelAnimationFrame(a.rafDragTimeout),a.rafDragTimeout=a.currentWindow.requestAnimationFrame(function(){if(a.state.cropSize&&!(p===void 0||x===void 0)){var w=p-a.dragStartPosition.x,E=x-a.dragStartPosition.y,v={x:a.dragStartCrop.x+w,y:a.dragStartCrop.y+E},C=a.props.restrictPosition?_a(v,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):v;a.props.onCropChange(C)}}))},a.onDragStopped=function(){var u,p;a.isTouching=!1,a.cleanEvents(),a.emitCropData(),(p=(u=a.props).onInteractionEnd)===null||p===void 0||p.call(u)},a.onWheel=function(u){if(a.currentWindow&&!(a.props.onWheelRequest&&!a.props.onWheelRequest(u))){u.preventDefault();var p=s.getMousePoint(u),x=_2(u).pixelY,w=a.props.zoom-x*a.props.zoomSpeed/200;a.setNewZoom(w,p,{shouldUpdatePosition:!0}),a.state.hasWheelJustStarted||a.setState({hasWheelJustStarted:!0},function(){var E,v;return(v=(E=a.props).onInteractionStart)===null||v===void 0?void 0:v.call(E)}),a.wheelTimer&&clearTimeout(a.wheelTimer),a.wheelTimer=a.currentWindow.setTimeout(function(){return a.setState({hasWheelJustStarted:!1},function(){var E,v;return(v=(E=a.props).onInteractionEnd)===null||v===void 0?void 0:v.call(E)})},250)}},a.getPointOnContainer=function(u,p){var x=u.x,w=u.y;if(!a.containerRect)throw new Error("The Cropper is not mounted");return{x:a.containerRect.width/2-(x-p.x),y:a.containerRect.height/2-(w-p.y)}},a.getPointOnMedia=function(u){var p=u.x,x=u.y,w=a.props,E=w.crop,v=w.zoom;return{x:(p+E.x)/v,y:(x+E.y)/v}},a.setNewZoom=function(u,p,x){var w=x===void 0?{}:x,E=w.shouldUpdatePosition,v=E===void 0?!0:E;if(!(!a.state.cropSize||!a.props.onZoomChange)){var C=Lc(u,a.props.minZoom,a.props.maxZoom);if(v){var A=a.getPointOnContainer(p,a.containerPosition),I=a.getPointOnMedia(A),R={x:I.x*C-A.x,y:I.y*C-A.y},O=a.props.restrictPosition?_a(R,a.mediaSize,a.state.cropSize,C,a.props.rotation):R;a.props.onCropChange(O)}a.props.onZoomChange(C)}},a.getCropData=function(){if(!a.state.cropSize)return null;var u=a.props.restrictPosition?_a(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;return P2(u,a.mediaSize,a.state.cropSize,a.getAspect(),a.props.zoom,a.props.rotation,a.props.restrictPosition)},a.emitCropData=function(){var u=a.getCropData();if(u){var p=u.croppedAreaPercentages,x=u.croppedAreaPixels;a.props.onCropComplete&&a.props.onCropComplete(p,x),a.props.onCropAreaChange&&a.props.onCropAreaChange(p,x)}},a.emitCropAreaChange=function(){var u=a.getCropData();if(u){var p=u.croppedAreaPercentages,x=u.croppedAreaPixels;a.props.onCropAreaChange&&a.props.onCropAreaChange(p,x)}},a.recomputeCropPosition=function(){if(a.state.cropSize){var u=a.props.restrictPosition?_a(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;a.props.onCropChange(u),a.emitCropData()}},a.onKeyDown=function(u){var p=a.props,x=p.crop,w=p.onCropChange,E=p.keyboardStep,v=p.zoom,C=p.rotation,A=E;if(a.state.cropSize){u.shiftKey&&(A*=.2);var I=ur({},x);switch(u.key){case"ArrowUp":I.y-=A,u.preventDefault();break;case"ArrowDown":I.y+=A,u.preventDefault();break;case"ArrowLeft":I.x-=A,u.preventDefault();break;case"ArrowRight":I.x+=A,u.preventDefault();break;default:return}a.props.restrictPosition&&(I=_a(I,a.mediaSize,a.state.cropSize,v,C)),w(I)}},a}return s.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=F2,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef))},s.prototype.componentWillUnmount=function(){var a,u;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(a=this.resizeObserver)===null||a===void 0||a.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((u=this.styleRef.parentNode)===null||u===void 0||u.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},s.prototype.componentDidUpdate=function(a){var u,p,x,w,E,v,C,A,I;a.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):a.aspect!==this.props.aspect?this.computeSizes():a.objectFit!==this.props.objectFit?this.computeSizes():a.zoom!==this.props.zoom?this.recomputeCropPosition():((u=a.cropSize)===null||u===void 0?void 0:u.height)!==((p=this.props.cropSize)===null||p===void 0?void 0:p.height)||((x=a.cropSize)===null||x===void 0?void 0:x.width)!==((w=this.props.cropSize)===null||w===void 0?void 0:w.width)?this.computeSizes():(((E=a.crop)===null||E===void 0?void 0:E.x)!==((v=this.props.crop)===null||v===void 0?void 0:v.x)||((C=a.crop)===null||C===void 0?void 0:C.y)!==((A=this.props.crop)===null||A===void 0?void 0:A.y))&&this.emitCropAreaChange(),a.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),a.video!==this.props.video&&((I=this.videoRef.current)===null||I===void 0||I.load());var R=this.getObjectFit();R!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:R},this.computeSizes)},s.prototype.getAspect=function(){var a=this.props,u=a.cropSize,p=a.aspect;return u?u.width/u.height:p},s.prototype.getObjectFit=function(){var a,u,p,x;if(this.props.objectFit==="cover"){var w=this.imageRef.current||this.videoRef.current;if(w&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var E=this.containerRect.width/this.containerRect.height,v=((a=this.imageRef.current)===null||a===void 0?void 0:a.naturalWidth)||((u=this.videoRef.current)===null||u===void 0?void 0:u.videoWidth)||0,C=((p=this.imageRef.current)===null||p===void 0?void 0:p.naturalHeight)||((x=this.videoRef.current)===null||x===void 0?void 0:x.videoHeight)||0,A=v/C;return A<E?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},s.prototype.onPinchStart=function(a){var u=s.getTouchPoint(a.touches[0]),p=s.getTouchPoint(a.touches[1]);this.lastPinchDistance=y1(u,p),this.lastPinchRotation=w1(u,p),this.onDragStart(v1(u,p))},s.prototype.onPinchMove=function(a){var u=this;if(!(!this.currentDoc||!this.currentWindow)){var p=s.getTouchPoint(a.touches[0]),x=s.getTouchPoint(a.touches[1]),w=v1(p,x);this.onDrag(w),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var E=y1(p,x),v=u.props.zoom*(E/u.lastPinchDistance);u.setNewZoom(v,w,{shouldUpdatePosition:!1}),u.lastPinchDistance=E;var C=w1(p,x),A=u.props.rotation+(C-u.lastPinchRotation);u.props.onRotationChange&&u.props.onRotationChange(A),u.lastPinchRotation=C})}},s.prototype.render=function(){var a=this,u,p=this.props,x=p.image,w=p.video,E=p.mediaProps,v=p.transform,C=p.crop,A=C.x,I=C.y,R=p.rotation,O=p.zoom,L=p.cropShape,j=p.showGrid,B=p.style,W=B.containerStyle,z=B.cropAreaStyle,F=B.mediaStyle,Y=p.classes,K=Y.containerClassName,ne=Y.cropAreaClassName,q=Y.mediaClassName,ie=(u=this.state.mediaObjectFit)!==null&&u!==void 0?u:this.getObjectFit();return N.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(we){return a.containerRef=we},"data-testid":"container",style:W,className:ac("reactEasyCrop_Container",K)},x?N.createElement("img",ur({alt:"",className:ac("reactEasyCrop_Image",ie==="contain"&&"reactEasyCrop_Contain",ie==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",ie==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",q)},E,{src:x,ref:this.imageRef,style:ur(ur({},F),{transform:v||"translate(".concat(A,"px, ").concat(I,"px) rotate(").concat(R,"deg) scale(").concat(O,")")}),onLoad:this.onMediaLoad})):w&&N.createElement("video",ur({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:ac("reactEasyCrop_Video",ie==="contain"&&"reactEasyCrop_Contain",ie==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",ie==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",q)},E,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:ur(ur({},F),{transform:v||"translate(".concat(A,"px, ").concat(I,"px) rotate(").concat(R,"deg) scale(").concat(O,")")}),controls:!1}),(Array.isArray(w)?w:[{src:w}]).map(function(J){return N.createElement("source",ur({key:J.src},J))})),this.state.cropSize&&N.createElement("div",{style:ur(ur({},z),{width:this.state.cropSize.width,height:this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,"data-testid":"cropper",className:ac("reactEasyCrop_CropArea",L==="round"&&"reactEasyCrop_CropAreaRound",j&&"reactEasyCrop_CropAreaGrid",ne)}))},s.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:z2,minZoom:V2,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:U2},s.getMousePoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},s.getTouchPoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},s}(N.Component),Ra={},C1;function W2(){return C1||(C1=1,Ra.createCanvas=function(r,s){return Object.assign(document.createElement("canvas"),{width:r,height:s})},Ra.createImageData=function(r,s,a){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(r);case 2:return new ImageData(r,s);default:return new ImageData(r,s,a)}},Ra.loadImage=function(r,s){return new Promise(function(a,u){const p=Object.assign(document.createElement("img"),s);function x(){p.onload=null,p.onerror=null}p.onload=function(){x(),a(p)},p.onerror=function(){x(),u(new Error('Failed to load the image "'+r+'"'))},p.src=r})}),Ra}W2();async function Bc(r,s){return console.log("Image source being cropped:",r),new Promise((a,u)=>{const p=new Image;p.onload=()=>{const x=document.createElement("canvas"),w=x.getContext("2d");x.width=s.width,x.height=s.height,w.drawImage(p,s.x,s.y,s.width,s.height,0,0,s.width,s.height);try{const E=x.toDataURL("image/jpeg");a(E)}catch{u(new Error("Error converting canvas to base64"))}},p.onerror=x=>u(new Error(`Image load error: ${x.message}`)),p.src=r})}async function yt(r,s={}){const a=localStorage.getItem("access_token"),u={...s,credentials:"include",headers:{...a&&{Authorization:`Bearer ${a}`},...s.headers}};return fetch(`${window.server_url}${r}`,u)}const H2=({onSubmit:r,onClose:s,existingProfile:a})=>{const{user:u,userProfile:p,checkAuth:x}=N.useContext(Fn),[w,E]=N.useState({name:(p==null?void 0:p.name)||"",image:null,imagePreview:p!=null&&p.image_data?`data:image/jpeg;base64,${p.image_data}`:"/assets/fakeprofile.png",croppedImage:null}),[v,C]=N.useState({x:0,y:0}),[A,I]=N.useState(1),[R,O]=N.useState(null),[L,j]=N.useState(!1),[B,W]=N.useState(!1),z=K=>{const ne=K.target.files[0];if(ne){const q=new FileReader;q.onload=ie=>{E(J=>({...J,image:ne,imagePreview:ie.target.result})),j(!0)},q.readAsDataURL(ne)}},F=(K,ne)=>{console.log("Cropped Area Pixels:",ne),O(ne)};async function Y(K){K.preventDefault();let ne;if(w.croppedImage)ne=w.croppedImage.split(",")[1];else if(w.image instanceof File){const ie=await w.image.arrayBuffer();ne=btoa(new Uint8Array(ie).reduce((J,we)=>J+String.fromCharCode(we),""))}else if(p!=null&&p.image_data)ne=p.image_data;else{console.error("No valid image provided");return}const q={name:w.name,image_data:ne};console.log("Image data (first 100 chars):",ne.substring(0,100));try{const ie=await yt("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(q)});if(!ie.ok)throw new Error("Failed to update profile");const J=await ie.json();await x(),console.log("Profile updated successfully:",J),s()}catch(ie){console.error("Error updating profile:",ie)}}return h.jsx("div",{className:"profile-creation-overlay",style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:h.jsxs("div",{className:"profile-creation-modal",style:{width:"70%",maxWidth:"500px",backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",padding:"2rem",boxShadow:"0 10px 30px rgba(20,77,255,0.15)",position:"relative",border:"1px solid rgba(20,77,255,0.1)"},children:[h.jsx("button",{onClick:s,style:{position:"absolute",top:"1.2rem",right:"1.2rem",background:"none",border:"none",fontSize:"1.8rem",cursor:"pointer",color:"#144dff",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.1)"}},children:""}),h.jsx("h2",{style:{fontSize:"clamp(1.8rem, 6vw, 2.5rem)",color:"#144dff",textAlign:"center",marginBottom:"2rem",fontWeight:"600"},children:"Your Profile"}),h.jsxs("form",{onSubmit:Y,style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[h.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem"},children:[h.jsx("label",{style:{color:"#144dff",fontWeight:"500",fontSize:"1rem"},children:"Your Name"}),h.jsx("input",{type:"text",value:w.name,onChange:K=>E({...w,name:K.target.value}),style:{width:"100%",padding:"12px",borderRadius:"12px",border:"2px solid #e0e0e0",fontSize:"0.9rem",transition:"all 0.3s ease",backgroundColor:"rgba(255,255,255,0.9)","&:focus":{borderColor:"#144dff",outline:"none",boxShadow:"0 0 0 3px rgba(20,77,255,0.1)"}}})]}),!L&&h.jsx("div",{style:{width:"250px",height:"250px",margin:"0 auto",borderRadius:"20%",overflow:"hidden",border:"7px solid #144dff",boxShadow:"0 8px 25px rgba(20,77,255,0.2)",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.02)"}},children:h.jsx("img",{src:w.croppedImage?w.croppedImage:w.imagePreview?w.imagePreview:p!=null&&p.image_data?`data:image/jpeg;base64,${p.image_data}`:"/assets/fakeprofile.png",alt:"Profile preview",style:{width:"100%",height:"100%",objectFit:"cover"}})}),h.jsxs("div",{style:{textAlign:"center"},children:[h.jsx("input",{type:"file",id:"image-upload",accept:"image/*",onChange:z,style:{display:"none"}}),h.jsx("label",{htmlFor:"image-upload",style:{padding:"0.8rem 1.2rem",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",borderRadius:"25px",cursor:"pointer",display:"inline-block",fontSize:"0.9rem",fontWeight:"600",boxShadow:"0 4px 15px rgba(20,77,255,0.2)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Upload New Image"})]}),L&&h.jsxs("div",{style:{width:"100%",maxWidth:"300px",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",gap:"1.2rem"},children:[h.jsx("div",{style:{position:"relative",width:"250px",height:"250px",borderRadius:"20%",overflow:"hidden",border:"7px solid #144dff",boxShadow:"0 8px 25px rgba(20,77,255,0.2)"},children:h.jsx(jc,{image:w.imagePreview,crop:v,zoom:A,aspect:1,onCropComplete:F,onCropChange:C,onZoomChange:I})}),h.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[h.jsx("button",{type:"button",onClick:()=>{j(!1),w.croppedImage||E(K=>({...K,imagePreview:null}))},style:{padding:"0.8rem 1.2rem",borderRadius:"25px",border:"2px solid #144dff",background:"white",color:"#144dff",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease","&:hover":{background:"rgba(20,77,255,0.1)"}},children:"Cancel"}),h.jsx("button",{type:"button",onClick:async()=>{try{const K=await Bc(w.imagePreview,R);E(ne=>({...ne,croppedImage:K,imagePreview:K})),j(!1),W(!0),setTimeout(()=>W(!1),1e4)}catch(K){console.error("Error cropping image:",K)}},className:`save-profile-button ${B?"glow-bounce":""}`,style:{padding:"0.8rem 1.2rem",borderRadius:"25px",border:"none",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(20,77,255,0.2)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Save Cropped Image"})]})]}),h.jsx("button",{type:"submit",className:`save-profile-button ${B?"glow-bounce":""}`,style:{padding:"1rem",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",border:"none",borderRadius:"25px",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",marginTop:"1rem",boxShadow:"0 4px 15px rgba(20,77,255,0.2)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Save Profile"})]})]})})};var ka={},b1;function G2(){if(b1)return ka;b1=1,Object.defineProperty(ka,"__esModule",{value:!0}),ka.parse=w,ka.serialize=C;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,s=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,u=/^[\u0020-\u003A\u003D-\u007E]*$/,p=Object.prototype.toString,x=(()=>{const R=function(){};return R.prototype=Object.create(null),R})();function w(R,O){const L=new x,j=R.length;if(j<2)return L;const B=(O==null?void 0:O.decode)||A;let W=0;do{const z=R.indexOf("=",W);if(z===-1)break;const F=R.indexOf(";",W),Y=F===-1?j:F;if(z>Y){W=R.lastIndexOf(";",z-1)+1;continue}const K=E(R,W,z),ne=v(R,z,K),q=R.slice(K,ne);if(L[q]===void 0){let ie=E(R,z+1,Y),J=v(R,Y,ie);const we=B(R.slice(ie,J));L[q]=we}W=Y+1}while(W<j);return L}function E(R,O,L){do{const j=R.charCodeAt(O);if(j!==32&&j!==9)return O}while(++O<L);return L}function v(R,O,L){for(;O>L;){const j=R.charCodeAt(--O);if(j!==32&&j!==9)return O+1}return L}function C(R,O,L){const j=(L==null?void 0:L.encode)||encodeURIComponent;if(!r.test(R))throw new TypeError(`argument name is invalid: ${R}`);const B=j(O);if(!s.test(B))throw new TypeError(`argument val is invalid: ${O}`);let W=R+"="+B;if(!L)return W;if(L.maxAge!==void 0){if(!Number.isInteger(L.maxAge))throw new TypeError(`option maxAge is invalid: ${L.maxAge}`);W+="; Max-Age="+L.maxAge}if(L.domain){if(!a.test(L.domain))throw new TypeError(`option domain is invalid: ${L.domain}`);W+="; Domain="+L.domain}if(L.path){if(!u.test(L.path))throw new TypeError(`option path is invalid: ${L.path}`);W+="; Path="+L.path}if(L.expires){if(!I(L.expires)||!Number.isFinite(L.expires.valueOf()))throw new TypeError(`option expires is invalid: ${L.expires}`);W+="; Expires="+L.expires.toUTCString()}if(L.httpOnly&&(W+="; HttpOnly"),L.secure&&(W+="; Secure"),L.partitioned&&(W+="; Partitioned"),L.priority)switch(typeof L.priority=="string"?L.priority.toLowerCase():void 0){case"low":W+="; Priority=Low";break;case"medium":W+="; Priority=Medium";break;case"high":W+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${L.priority}`)}if(L.sameSite)switch(typeof L.sameSite=="string"?L.sameSite.toLowerCase():L.sameSite){case!0:case"strict":W+="; SameSite=Strict";break;case"lax":W+="; SameSite=Lax";break;case"none":W+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${L.sameSite}`)}return W}function A(R){if(R.indexOf("%")===-1)return R;try{return decodeURIComponent(R)}catch{return R}}function I(R){return p.call(R)==="[object Date]"}return ka}G2();/**
 * react-router v7.0.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var E1="popstate";function X2(r={}){function s(u,p){let{pathname:x,search:w,hash:E}=u.location;return Wd("",{pathname:x,search:w,hash:E},p.state&&p.state.usr||null,p.state&&p.state.key||"default")}function a(u,p){return typeof p=="string"?p:Wa(p)}return Z2(s,a,null,r)}function bn(r,s){if(r===!1||r===null||typeof r>"u")throw new Error(s)}function fi(r,s){if(!r){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function Y2(){return Math.random().toString(36).substring(2,10)}function S1(r,s){return{usr:r.state,key:r.key,idx:s}}function Wd(r,s,a=null,u){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof s=="string"?Xo(s):s,state:a,key:s&&s.key||u||Y2()}}function Wa({pathname:r="/",search:s="",hash:a=""}){return s&&s!=="?"&&(r+=s.charAt(0)==="?"?s:"?"+s),a&&a!=="#"&&(r+=a.charAt(0)==="#"?a:"#"+a),r}function Xo(r){let s={};if(r){let a=r.indexOf("#");a>=0&&(s.hash=r.substring(a),r=r.substring(0,a));let u=r.indexOf("?");u>=0&&(s.search=r.substring(u),r=r.substring(0,u)),r&&(s.pathname=r)}return s}function Z2(r,s,a,u={}){let{window:p=document.defaultView,v5Compat:x=!1}=u,w=p.history,E="POP",v=null,C=A();C==null&&(C=0,w.replaceState({...w.state,idx:C},""));function A(){return(w.state||{idx:null}).idx}function I(){E="POP";let B=A(),W=B==null?null:B-C;C=B,v&&v({action:E,location:j.location,delta:W})}function R(B,W){E="PUSH";let z=Wd(j.location,B,W);C=A()+1;let F=S1(z,C),Y=j.createHref(z);try{w.pushState(F,"",Y)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;p.location.assign(Y)}x&&v&&v({action:E,location:j.location,delta:1})}function O(B,W){E="REPLACE";let z=Wd(j.location,B,W);C=A();let F=S1(z,C),Y=j.createHref(z);w.replaceState(F,"",Y),x&&v&&v({action:E,location:j.location,delta:0})}function L(B){let W=p.location.origin!=="null"?p.location.origin:p.location.href,z=typeof B=="string"?B:Wa(B);return z=z.replace(/ $/,"%20"),bn(W,`No window.location.(origin|href) available to create URL for href: ${z}`),new URL(z,W)}let j={get action(){return E},get location(){return r(p,w)},listen(B){if(v)throw new Error("A history only accepts one active listener");return p.addEventListener(E1,I),v=B,()=>{p.removeEventListener(E1,I),v=null}},createHref(B){return s(p,B)},createURL:L,encodeLocation(B){let W=L(B);return{pathname:W.pathname,search:W.search,hash:W.hash}},push:R,replace:O,go(B){return w.go(B)}};return j}function im(r,s,a="/"){return $2(r,s,a,!1)}function $2(r,s,a,u){let p=typeof s=="string"?Xo(s):s,x=As(p.pathname||"/",a);if(x==null)return null;let w=sm(r);K2(w);let E=null;for(let v=0;E==null&&v<w.length;++v){let C=ay(x);E=sy(w[v],C,u)}return E}function sm(r,s=[],a=[],u=""){let p=(x,w,E)=>{let v={relativePath:E===void 0?x.path||"":E,caseSensitive:x.caseSensitive===!0,childrenIndex:w,route:x};v.relativePath.startsWith("/")&&(bn(v.relativePath.startsWith(u),`Absolute route path "${v.relativePath}" nested under path "${u}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(u.length));let C=Zi([u,v.relativePath]),A=a.concat(v);x.children&&x.children.length>0&&(bn(x.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${C}".`),sm(x.children,s,A,C)),!(x.path==null&&!x.index)&&s.push({path:C,score:ry(C,x.index),routesMeta:A})};return r.forEach((x,w)=>{var E;if(x.path===""||!((E=x.path)!=null&&E.includes("?")))p(x,w);else for(let v of om(x.path))p(x,w,v)}),s}function om(r){let s=r.split("/");if(s.length===0)return[];let[a,...u]=s,p=a.endsWith("?"),x=a.replace(/\?$/,"");if(u.length===0)return p?[x,""]:[x];let w=om(u.join("/")),E=[];return E.push(...w.map(v=>v===""?x:[x,v].join("/"))),p&&E.push(...w),E.map(v=>r.startsWith("/")&&v===""?"/":v)}function K2(r){r.sort((s,a)=>s.score!==a.score?a.score-s.score:iy(s.routesMeta.map(u=>u.childrenIndex),a.routesMeta.map(u=>u.childrenIndex)))}var q2=/^:[\w-]+$/,Q2=3,J2=2,ey=1,ty=10,ny=-2,A1=r=>r==="*";function ry(r,s){let a=r.split("/"),u=a.length;return a.some(A1)&&(u+=ny),s&&(u+=J2),a.filter(p=>!A1(p)).reduce((p,x)=>p+(q2.test(x)?Q2:x===""?ey:ty),u)}function iy(r,s){return r.length===s.length&&r.slice(0,-1).every((u,p)=>u===s[p])?r[r.length-1]-s[s.length-1]:0}function sy(r,s,a=!1){let{routesMeta:u}=r,p={},x="/",w=[];for(let E=0;E<u.length;++E){let v=u[E],C=E===u.length-1,A=x==="/"?s:s.slice(x.length)||"/",I=Sc({path:v.relativePath,caseSensitive:v.caseSensitive,end:C},A),R=v.route;if(!I&&C&&a&&!u[u.length-1].route.index&&(I=Sc({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},A)),!I)return null;Object.assign(p,I.params),w.push({params:p,pathname:Zi([x,I.pathname]),pathnameBase:dy(Zi([x,I.pathnameBase])),route:R}),I.pathnameBase!=="/"&&(x=Zi([x,I.pathnameBase]))}return w}function Sc(r,s){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[a,u]=oy(r.path,r.caseSensitive,r.end),p=s.match(a);if(!p)return null;let x=p[0],w=x.replace(/(.)\/+$/,"$1"),E=p.slice(1);return{params:u.reduce((C,{paramName:A,isOptional:I},R)=>{if(A==="*"){let L=E[R]||"";w=x.slice(0,x.length-L.length).replace(/(.)\/+$/,"$1")}const O=E[R];return I&&!O?C[A]=void 0:C[A]=(O||"").replace(/%2F/g,"/"),C},{}),pathname:x,pathnameBase:w,pattern:r}}function oy(r,s=!1,a=!0){fi(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let u=[],p="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(w,E,v)=>(u.push({paramName:E,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(u.push({paramName:"*"}),p+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?p+="\\/*$":r!==""&&r!=="/"&&(p+="(?:(?=\\/|$))"),[new RegExp(p,s?void 0:"i"),u]}function ay(r){try{return r.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return fi(!1,`The URL path "${r}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${s}).`),r}}function As(r,s){if(s==="/")return r;if(!r.toLowerCase().startsWith(s.toLowerCase()))return null;let a=s.endsWith("/")?s.length-1:s.length,u=r.charAt(a);return u&&u!=="/"?null:r.slice(a)||"/"}function ly(r,s="/"){let{pathname:a,search:u="",hash:p=""}=typeof r=="string"?Xo(r):r;return{pathname:a?a.startsWith("/")?a:cy(a,s):s,search:fy(u),hash:hy(p)}}function cy(r,s){let a=s.replace(/\/+$/,"").split("/");return r.split("/").forEach(p=>{p===".."?a.length>1&&a.pop():p!=="."&&a.push(p)}),a.length>1?a.join("/"):"/"}function Ed(r,s,a,u){return`Cannot include a '${r}' character in a manually specified \`to.${s}\` field [${JSON.stringify(u)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function uy(r){return r.filter((s,a)=>a===0||s.route.path&&s.route.path.length>0)}function am(r){let s=uy(r);return s.map((a,u)=>u===s.length-1?a.pathname:a.pathnameBase)}function lm(r,s,a,u=!1){let p;typeof r=="string"?p=Xo(r):(p={...r},bn(!p.pathname||!p.pathname.includes("?"),Ed("?","pathname","search",p)),bn(!p.pathname||!p.pathname.includes("#"),Ed("#","pathname","hash",p)),bn(!p.search||!p.search.includes("#"),Ed("#","search","hash",p)));let x=r===""||p.pathname==="",w=x?"/":p.pathname,E;if(w==null)E=a;else{let I=s.length-1;if(!u&&w.startsWith("..")){let R=w.split("/");for(;R[0]==="..";)R.shift(),I-=1;p.pathname=R.join("/")}E=I>=0?s[I]:"/"}let v=ly(p,E),C=w&&w!=="/"&&w.endsWith("/"),A=(x||w===".")&&a.endsWith("/");return!v.pathname.endsWith("/")&&(C||A)&&(v.pathname+="/"),v}var Zi=r=>r.join("/").replace(/\/\/+/g,"/"),dy=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),fy=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,hy=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function py(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var cm=["POST","PUT","PATCH","DELETE"];new Set(cm);var my=["GET",...cm];new Set(my);var Yo=N.createContext(null);Yo.displayName="DataRouter";var Fc=N.createContext(null);Fc.displayName="DataRouterState";var um=N.createContext({isTransitioning:!1});um.displayName="ViewTransition";var gy=N.createContext(new Map);gy.displayName="Fetchers";var xy=N.createContext(null);xy.displayName="Await";var Si=N.createContext(null);Si.displayName="Navigation";var Ka=N.createContext(null);Ka.displayName="Location";var Ai=N.createContext({outlet:null,matches:[],isDataRoute:!1});Ai.displayName="Route";var Cf=N.createContext(null);Cf.displayName="RouteError";function yy(r,{relative:s}={}){bn(qa(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:u}=N.useContext(Si),{hash:p,pathname:x,search:w}=Qa(r,{relative:s}),E=x;return a!=="/"&&(E=x==="/"?a:Zi([a,x])),u.createHref({pathname:E,search:w,hash:p})}function qa(){return N.useContext(Ka)!=null}function Br(){return bn(qa(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(Ka).location}var dm="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fm(r){N.useContext(Si).static||N.useLayoutEffect(r)}function Rn(){let{isDataRoute:r}=N.useContext(Ai);return r?Py():wy()}function wy(){bn(qa(),"useNavigate() may be used only in the context of a <Router> component.");let r=N.useContext(Yo),{basename:s,navigator:a}=N.useContext(Si),{matches:u}=N.useContext(Ai),{pathname:p}=Br(),x=JSON.stringify(am(u)),w=N.useRef(!1);return fm(()=>{w.current=!0}),N.useCallback((v,C={})=>{if(fi(w.current,dm),!w.current)return;if(typeof v=="number"){a.go(v);return}let A=lm(v,JSON.parse(x),p,C.relative==="path");r==null&&s!=="/"&&(A.pathname=A.pathname==="/"?s:Zi([s,A.pathname])),(C.replace?a.replace:a.push)(A,C.state,C)},[s,a,x,p,r])}N.createContext(null);function vy(){let{matches:r}=N.useContext(Ai),s=r[r.length-1];return s?s.params:{}}function Qa(r,{relative:s}={}){let{matches:a}=N.useContext(Ai),{pathname:u}=Br(),p=JSON.stringify(am(a));return N.useMemo(()=>lm(r,JSON.parse(p),u,s==="path"),[r,p,u,s])}function Cy(r,s){return hm(r,s)}function hm(r,s,a,u){var W;bn(qa(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:p}=N.useContext(Si),{matches:x}=N.useContext(Ai),w=x[x.length-1],E=w?w.params:{},v=w?w.pathname:"/",C=w?w.pathnameBase:"/",A=w&&w.route;{let z=A&&A.path||"";pm(v,!A||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${v}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let I=Br(),R;if(s){let z=typeof s=="string"?Xo(s):s;bn(C==="/"||((W=z.pathname)==null?void 0:W.startsWith(C)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${C}" but pathname "${z.pathname}" was given in the \`location\` prop.`),R=z}else R=I;let O=R.pathname||"/",L=O;if(C!=="/"){let z=C.replace(/^\//,"").split("/");L="/"+O.replace(/^\//,"").split("/").slice(z.length).join("/")}let j=im(r,{pathname:L});fi(A||j!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),fi(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let B=Ny(j&&j.map(z=>Object.assign({},z,{params:Object.assign({},E,z.params),pathname:Zi([C,p.encodeLocation?p.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?C:Zi([C,p.encodeLocation?p.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),x,a,u);return s&&B?N.createElement(Ka.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},B):B}function by(){let r=ky(),s=py(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),a=r instanceof Error?r.stack:null,u="rgba(200,200,200, 0.5)",p={padding:"0.5rem",backgroundColor:u},x={padding:"2px 4px",backgroundColor:u},w=null;return console.error("Error handled by React Router default ErrorBoundary:",r),w=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:x},"ErrorBoundary")," or"," ",N.createElement("code",{style:x},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},s),a?N.createElement("pre",{style:p},a):null,w)}var Ey=N.createElement(by,null),Sy=class extends N.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,s){return s.location!==r.location||s.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:s.error,location:s.location,revalidation:r.revalidation||s.revalidation}}componentDidCatch(r,s){console.error("React Router caught the following error during render",r,s)}render(){return this.state.error!==void 0?N.createElement(Ai.Provider,{value:this.props.routeContext},N.createElement(Cf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ay({routeContext:r,match:s,children:a}){let u=N.useContext(Yo);return u&&u.static&&u.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=s.route.id),N.createElement(Ai.Provider,{value:r},a)}function Ny(r,s=[],a=null,u=null){if(r==null){if(!a)return null;if(a.errors)r=a.matches;else if(s.length===0&&!a.initialized&&a.matches.length>0)r=a.matches;else return null}let p=r,x=a==null?void 0:a.errors;if(x!=null){let v=p.findIndex(C=>C.route.id&&(x==null?void 0:x[C.route.id])!==void 0);bn(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(x).join(",")}`),p=p.slice(0,Math.min(p.length,v+1))}let w=!1,E=-1;if(a)for(let v=0;v<p.length;v++){let C=p[v];if((C.route.HydrateFallback||C.route.hydrateFallbackElement)&&(E=v),C.route.id){let{loaderData:A,errors:I}=a,R=C.route.loader&&!A.hasOwnProperty(C.route.id)&&(!I||I[C.route.id]===void 0);if(C.route.lazy||R){w=!0,E>=0?p=p.slice(0,E+1):p=[p[0]];break}}}return p.reduceRight((v,C,A)=>{let I,R=!1,O=null,L=null;a&&(I=x&&C.route.id?x[C.route.id]:void 0,O=C.route.errorElement||Ey,w&&(E<0&&A===0?(pm("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,L=null):E===A&&(R=!0,L=C.route.hydrateFallbackElement||null)));let j=s.concat(p.slice(0,A+1)),B=()=>{let W;return I?W=O:R?W=L:C.route.Component?W=N.createElement(C.route.Component,null):C.route.element?W=C.route.element:W=v,N.createElement(Ay,{match:C,routeContext:{outlet:v,matches:j,isDataRoute:a!=null},children:W})};return a&&(C.route.ErrorBoundary||C.route.errorElement||A===0)?N.createElement(Sy,{location:a.location,revalidation:a.revalidation,component:O,error:I,children:B(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):B()},null)}function bf(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ty(r){let s=N.useContext(Yo);return bn(s,bf(r)),s}function Iy(r){let s=N.useContext(Fc);return bn(s,bf(r)),s}function _y(r){let s=N.useContext(Ai);return bn(s,bf(r)),s}function Ef(r){let s=_y(r),a=s.matches[s.matches.length-1];return bn(a.route.id,`${r} can only be used on routes that contain a unique "id"`),a.route.id}function Ry(){return Ef("useRouteId")}function ky(){var u;let r=N.useContext(Cf),s=Iy("useRouteError"),a=Ef("useRouteError");return r!==void 0?r:(u=s.errors)==null?void 0:u[a]}function Py(){let{router:r}=Ty("useNavigate"),s=Ef("useNavigate"),a=N.useRef(!1);return fm(()=>{a.current=!0}),N.useCallback(async(p,x={})=>{fi(a.current,dm),a.current&&(typeof p=="number"?r.navigate(p):await r.navigate(p,{fromRouteId:s,...x}))},[r,s])}var N1={};function pm(r,s,a){!s&&!N1[r]&&(N1[r]=!0,fi(!1,a))}N.memo(My);function My({routes:r,future:s,state:a}){return hm(r,void 0,a,s)}function Zn(r){bn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Oy({basename:r="/",children:s=null,location:a,navigationType:u="POP",navigator:p,static:x=!1}){bn(!qa(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let w=r.replace(/^\/*/,"/"),E=N.useMemo(()=>({basename:w,navigator:p,static:x,future:{}}),[w,p,x]);typeof a=="string"&&(a=Xo(a));let{pathname:v="/",search:C="",hash:A="",state:I=null,key:R="default"}=a,O=N.useMemo(()=>{let L=As(v,w);return L==null?null:{location:{pathname:L,search:C,hash:A,state:I,key:R},navigationType:u}},[w,v,C,A,I,R,u]);return fi(O!=null,`<Router basename="${w}"> is not able to match the URL "${v}${C}${A}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:N.createElement(Si.Provider,{value:E},N.createElement(Ka.Provider,{children:s,value:O}))}function Dy({children:r,location:s}){return Cy(Hd(r),s)}function Hd(r,s=[]){let a=[];return N.Children.forEach(r,(u,p)=>{if(!N.isValidElement(u))return;let x=[...s,p];if(u.type===N.Fragment){a.push.apply(a,Hd(u.props.children,x));return}bn(u.type===Zn,`[${typeof u.type=="string"?u.type:u.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),bn(!u.props.index||!u.props.children,"An index route cannot have child routes.");let w={id:u.props.id||x.join("-"),caseSensitive:u.props.caseSensitive,element:u.props.element,Component:u.props.Component,index:u.props.index,path:u.props.path,loader:u.props.loader,action:u.props.action,hydrateFallbackElement:u.props.hydrateFallbackElement,HydrateFallback:u.props.HydrateFallback,errorElement:u.props.errorElement,ErrorBoundary:u.props.ErrorBoundary,hasErrorBoundary:u.props.hasErrorBoundary===!0||u.props.ErrorBoundary!=null||u.props.errorElement!=null,shouldRevalidate:u.props.shouldRevalidate,handle:u.props.handle,lazy:u.props.lazy};u.props.children&&(w.children=Hd(u.props.children,x)),a.push(w)}),a}var gc="get",xc="application/x-www-form-urlencoded";function Vc(r){return r!=null&&typeof r.tagName=="string"}function Ly(r){return Vc(r)&&r.tagName.toLowerCase()==="button"}function jy(r){return Vc(r)&&r.tagName.toLowerCase()==="form"}function By(r){return Vc(r)&&r.tagName.toLowerCase()==="input"}function Fy(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Vy(r,s){return r.button===0&&(!s||s==="_self")&&!Fy(r)}function Gd(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((s,a)=>{let u=r[a];return s.concat(Array.isArray(u)?u.map(p=>[a,p]):[[a,u]])},[]))}function zy(r,s){let a=Gd(r);return s&&s.forEach((u,p)=>{a.has(p)||s.getAll(p).forEach(x=>{a.append(p,x)})}),a}var lc=null;function Uy(){if(lc===null)try{new FormData(document.createElement("form"),0),lc=!1}catch{lc=!0}return lc}var Wy=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Sd(r){return r!=null&&!Wy.has(r)?(fi(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${xc}"`),null):r}function Hy(r,s){let a,u,p,x,w;if(jy(r)){let E=r.getAttribute("action");u=E?As(E,s):null,a=r.getAttribute("method")||gc,p=Sd(r.getAttribute("enctype"))||xc,x=new FormData(r)}else if(Ly(r)||By(r)&&(r.type==="submit"||r.type==="image")){let E=r.form;if(E==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=r.getAttribute("formaction")||E.getAttribute("action");if(u=v?As(v,s):null,a=r.getAttribute("formmethod")||E.getAttribute("method")||gc,p=Sd(r.getAttribute("formenctype"))||Sd(E.getAttribute("enctype"))||xc,x=new FormData(E,r),!Uy()){let{name:C,type:A,value:I}=r;if(A==="image"){let R=C?`${C}.`:"";x.append(`${R}x`,"0"),x.append(`${R}y`,"0")}else C&&x.append(C,I)}}else{if(Vc(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=gc,u=null,p=xc,w=r}return x&&p==="text/plain"&&(w=x,x=void 0),{action:u,method:a.toLowerCase(),encType:p,formData:x,body:w}}function Sf(r,s){if(r===!1||r===null||typeof r>"u")throw new Error(s)}async function Gy(r,s){if(r.id in s)return s[r.id];try{let a=await import(r.module);return s[r.id]=a,a}catch(a){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Xy(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function Yy(r,s,a){let u=await Promise.all(r.map(async p=>{let x=s.routes[p.route.id];if(x){let w=await Gy(x,a);return w.links?w.links():[]}return[]}));return qy(u.flat(1).filter(Xy).filter(p=>p.rel==="stylesheet"||p.rel==="preload").map(p=>p.rel==="stylesheet"?{...p,rel:"prefetch",as:"style"}:{...p,rel:"prefetch"}))}function T1(r,s,a,u,p,x){let w=(v,C)=>a[C]?v.route.id!==a[C].route.id:!0,E=(v,C)=>{var A;return a[C].pathname!==v.pathname||((A=a[C].route.path)==null?void 0:A.endsWith("*"))&&a[C].params["*"]!==v.params["*"]};return x==="assets"?s.filter((v,C)=>w(v,C)||E(v,C)):x==="data"?s.filter((v,C)=>{var I;let A=u.routes[v.route.id];if(!A||!A.hasLoader)return!1;if(w(v,C)||E(v,C))return!0;if(v.route.shouldRevalidate){let R=v.route.shouldRevalidate({currentUrl:new URL(p.pathname+p.search+p.hash,window.origin),currentParams:((I=a[0])==null?void 0:I.params)||{},nextUrl:new URL(r,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof R=="boolean")return R}return!0}):[]}function Zy(r,s){return $y(r.map(a=>{let u=s.routes[a.route.id];if(!u)return[];let p=[u.module];return u.imports&&(p=p.concat(u.imports)),p}).flat(1))}function $y(r){return[...new Set(r)]}function Ky(r){let s={},a=Object.keys(r).sort();for(let u of a)s[u]=r[u];return s}function qy(r,s){let a=new Set;return new Set(s),r.reduce((u,p)=>{let x=JSON.stringify(Ky(p));return a.has(x)||(a.add(x),u.push({key:x,link:p})),u},[])}function Qy(r){let s=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return s.pathname==="/"?s.pathname="_root.data":s.pathname=`${s.pathname.replace(/\/$/,"")}.data`,s}function Jy(){let r=N.useContext(Yo);return Sf(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function ew(){let r=N.useContext(Fc);return Sf(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Af=N.createContext(void 0);Af.displayName="FrameworkContext";function mm(){let r=N.useContext(Af);return Sf(r,"You must render this element inside a <HydratedRouter> element"),r}function tw(r,s){let a=N.useContext(Af),[u,p]=N.useState(!1),[x,w]=N.useState(!1),{onFocus:E,onBlur:v,onMouseEnter:C,onMouseLeave:A,onTouchStart:I}=s,R=N.useRef(null);N.useEffect(()=>{if(r==="render"&&w(!0),r==="viewport"){let j=W=>{W.forEach(z=>{w(z.isIntersecting)})},B=new IntersectionObserver(j,{threshold:.5});return R.current&&B.observe(R.current),()=>{B.disconnect()}}},[r]),N.useEffect(()=>{if(u){let j=setTimeout(()=>{w(!0)},100);return()=>{clearTimeout(j)}}},[u]);let O=()=>{p(!0)},L=()=>{p(!1),w(!1)};return a?r!=="intent"?[x,R,{}]:[x,R,{onFocus:Pa(E,O),onBlur:Pa(v,L),onMouseEnter:Pa(C,O),onMouseLeave:Pa(A,L),onTouchStart:Pa(I,O)}]:[!1,R,{}]}function Pa(r,s){return a=>{r&&r(a),a.defaultPrevented||s(a)}}function nw({page:r,...s}){let{router:a}=Jy(),u=N.useMemo(()=>im(a.routes,r,a.basename),[a.routes,r,a.basename]);return u?N.createElement(iw,{page:r,matches:u,...s}):(console.warn(`Tried to prefetch ${r} but no routes matched.`),null)}function rw(r){let{manifest:s,routeModules:a}=mm(),[u,p]=N.useState([]);return N.useEffect(()=>{let x=!1;return Yy(r,s,a).then(w=>{x||p(w)}),()=>{x=!0}},[r,s,a]),u}function iw({page:r,matches:s,...a}){let u=Br(),{manifest:p,routeModules:x}=mm(),{loaderData:w,matches:E}=ew(),v=N.useMemo(()=>T1(r,s,E,p,u,"data"),[r,s,E,p,u]),C=N.useMemo(()=>T1(r,s,E,p,u,"assets"),[r,s,E,p,u]),A=N.useMemo(()=>{if(r===u.pathname+u.search+u.hash)return[];let O=new Set,L=!1;if(s.forEach(B=>{var z;let W=p.routes[B.route.id];!W||!W.hasLoader||(!v.some(F=>F.route.id===B.route.id)&&B.route.id in w&&((z=x[B.route.id])!=null&&z.shouldRevalidate)||W.hasClientLoader?L=!0:O.add(B.route.id))}),O.size===0)return[];let j=Qy(r);return L&&O.size>0&&j.searchParams.set("_routes",s.filter(B=>O.has(B.route.id)).map(B=>B.route.id).join(",")),[j.pathname+j.search]},[w,u,p,v,s,r,x]),I=N.useMemo(()=>Zy(C,p),[C,p]),R=rw(C);return N.createElement(N.Fragment,null,A.map(O=>N.createElement("link",{key:O,rel:"prefetch",as:"fetch",href:O,...a})),I.map(O=>N.createElement("link",{key:O,rel:"modulepreload",href:O,...a})),R.map(({key:O,link:L})=>N.createElement("link",{key:O,...L})))}function sw(...r){return s=>{r.forEach(a=>{typeof a=="function"?a(s):a!=null&&(a.current=s)})}}var gm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{gm&&(window.__reactRouterVersion="7.0.2")}catch{}function ow({basename:r,children:s,window:a}){let u=N.useRef();u.current==null&&(u.current=X2({window:a,v5Compat:!0}));let p=u.current,[x,w]=N.useState({action:p.action,location:p.location}),E=N.useCallback(v=>{N.startTransition(()=>w(v))},[w]);return N.useLayoutEffect(()=>p.listen(E),[p,E]),N.createElement(Oy,{basename:r,children:s,location:x.location,navigationType:x.action,navigator:p})}var xm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ym=N.forwardRef(function({onClick:s,discover:a="render",prefetch:u="none",relative:p,reloadDocument:x,replace:w,state:E,target:v,to:C,preventScrollReset:A,viewTransition:I,...R},O){let{basename:L}=N.useContext(Si),j=typeof C=="string"&&xm.test(C),B,W=!1;if(typeof C=="string"&&j&&(B=C,gm))try{let J=new URL(window.location.href),we=C.startsWith("//")?new URL(J.protocol+C):new URL(C),Re=As(we.pathname,L);we.origin===J.origin&&Re!=null?C=Re+we.search+we.hash:W=!0}catch{fi(!1,`<Link to="${C}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=yy(C,{relative:p}),[F,Y,K]=tw(u,R),ne=uw(C,{replace:w,state:E,target:v,preventScrollReset:A,relative:p,viewTransition:I});function q(J){s&&s(J),J.defaultPrevented||ne(J)}let ie=N.createElement("a",{...R,...K,href:B||z,onClick:W||x?s:q,ref:sw(O,Y),target:v,"data-discover":!j&&a==="render"?"true":void 0});return F&&!j?N.createElement(N.Fragment,null,ie,N.createElement(nw,{page:z})):ie});ym.displayName="Link";var aw=N.forwardRef(function({"aria-current":s="page",caseSensitive:a=!1,className:u="",end:p=!1,style:x,to:w,viewTransition:E,children:v,...C},A){let I=Qa(w,{relative:C.relative}),R=Br(),O=N.useContext(Fc),{navigator:L,basename:j}=N.useContext(Si),B=O!=null&&mw(I)&&E===!0,W=L.encodeLocation?L.encodeLocation(I).pathname:I.pathname,z=R.pathname,F=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;a||(z=z.toLowerCase(),F=F?F.toLowerCase():null,W=W.toLowerCase()),F&&j&&(F=As(F,j)||F);const Y=W!=="/"&&W.endsWith("/")?W.length-1:W.length;let K=z===W||!p&&z.startsWith(W)&&z.charAt(Y)==="/",ne=F!=null&&(F===W||!p&&F.startsWith(W)&&F.charAt(W.length)==="/"),q={isActive:K,isPending:ne,isTransitioning:B},ie=K?s:void 0,J;typeof u=="function"?J=u(q):J=[u,K?"active":null,ne?"pending":null,B?"transitioning":null].filter(Boolean).join(" ");let we=typeof x=="function"?x(q):x;return N.createElement(ym,{...C,"aria-current":ie,className:J,ref:A,style:we,to:w,viewTransition:E},typeof v=="function"?v(q):v)});aw.displayName="NavLink";var lw=N.forwardRef(({discover:r="render",fetcherKey:s,navigate:a,reloadDocument:u,replace:p,state:x,method:w=gc,action:E,onSubmit:v,relative:C,preventScrollReset:A,viewTransition:I,...R},O)=>{let L=hw(),j=pw(E,{relative:C}),B=w.toLowerCase()==="get"?"get":"post",W=typeof E=="string"&&xm.test(E),z=F=>{if(v&&v(F),F.defaultPrevented)return;F.preventDefault();let Y=F.nativeEvent.submitter,K=(Y==null?void 0:Y.getAttribute("formmethod"))||w;L(Y||F.currentTarget,{fetcherKey:s,method:K,navigate:a,replace:p,state:x,relative:C,preventScrollReset:A,viewTransition:I})};return N.createElement("form",{ref:O,method:B,action:j,onSubmit:u?v:z,...R,"data-discover":!W&&r==="render"?"true":void 0})});lw.displayName="Form";function cw(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wm(r){let s=N.useContext(Yo);return bn(s,cw(r)),s}function uw(r,{target:s,replace:a,state:u,preventScrollReset:p,relative:x,viewTransition:w}={}){let E=Rn(),v=Br(),C=Qa(r,{relative:x});return N.useCallback(A=>{if(Vy(A,s)){A.preventDefault();let I=a!==void 0?a:Wa(v)===Wa(C);E(r,{replace:I,state:u,preventScrollReset:p,relative:x,viewTransition:w})}},[v,E,C,a,u,s,r,p,x,w])}function vm(r){fi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let s=N.useRef(Gd(r)),a=N.useRef(!1),u=Br(),p=N.useMemo(()=>zy(u.search,a.current?null:s.current),[u.search]),x=Rn(),w=N.useCallback((E,v)=>{const C=Gd(typeof E=="function"?E(p):E);a.current=!0,x("?"+C,v)},[x,p]);return[p,w]}var dw=0,fw=()=>`__${String(++dw)}__`;function hw(){let{router:r}=wm("useSubmit"),{basename:s}=N.useContext(Si),a=Ry();return N.useCallback(async(u,p={})=>{let{action:x,method:w,encType:E,formData:v,body:C}=Hy(u,s);if(p.navigate===!1){let A=p.fetcherKey||fw();await r.fetch(A,a,p.action||x,{preventScrollReset:p.preventScrollReset,formData:v,body:C,formMethod:p.method||w,formEncType:p.encType||E,flushSync:p.flushSync})}else await r.navigate(p.action||x,{preventScrollReset:p.preventScrollReset,formData:v,body:C,formMethod:p.method||w,formEncType:p.encType||E,replace:p.replace,state:p.state,fromRouteId:a,flushSync:p.flushSync,viewTransition:p.viewTransition})},[r,s,a])}function pw(r,{relative:s}={}){let{basename:a}=N.useContext(Si),u=N.useContext(Ai);bn(u,"useFormAction must be used inside a RouteContext");let[p]=u.matches.slice(-1),x={...Qa(r||".",{relative:s})},w=Br();if(r==null){x.search=w.search;let E=new URLSearchParams(x.search),v=E.getAll("index");if(v.some(A=>A==="")){E.delete("index"),v.filter(I=>I).forEach(I=>E.append("index",I));let A=E.toString();x.search=A?`?${A}`:""}}return(!r||r===".")&&p.route.index&&(x.search=x.search?x.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(x.pathname=x.pathname==="/"?a:Zi([a,x.pathname])),Wa(x)}function mw(r,s={}){let a=N.useContext(um);bn(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:u}=wm("useViewTransitionState"),p=Qa(r,{relative:s.relative});if(!a.isTransitioning)return!1;let x=As(a.currentLocation.pathname,u)||a.currentLocation.pathname,w=As(a.nextLocation.pathname,u)||a.nextLocation.pathname;return Sc(p.pathname,w)!=null||Sc(p.pathname,x)!=null}new TextEncoder;function Nf(){const r="./assets",s="/sounds/new_elevator_combined.mp3";Rn();const a=N.useRef(new Audio(r+s)),[u,p]=N.useState(!1),[x,w]=N.useState(!1),[E,v]=N.useState(null),[C,A]=N.useState(!1),[I,R]=N.useState(!1);N.useEffect(()=>{const z=a.current,F=()=>{z.pause(),z.currentTime=0,w(!1),B()};return z.addEventListener("ended",F),()=>z.removeEventListener("ended",F)},[I]);function O(){v(null),a.current.load(),a.current.play().then(()=>{a.current.pause(),a.current.currentTime=0,p(!0),w(!0),A(!0),j()}).catch(z=>{console.error("Error loading audio:",z),v("Failed to load audio. Please check the file path and format."),A(!1)})}function L(){return!!(a.current&&!a.current.paused)}function j(){a.current.paused?a.current.play().catch(z=>{console.error("Error playing audio:",z),v("Failed to play audio. Please try again.")}):a.current.currentTime=0}function B(){a.current&&(a.current.pause(),a.current.currentTime=0,a.current.src="",a.current=null)}function W(z){a.current.currentTime=z,console.log(a.current.duration)}return{audioRef:a,error:E,playSound:j,loadSound:O,seekTo:W,cancelSound:B,checkSound:L,soundEnabled:C,setSoundEnabled:A,isPlaying:x}}var $n;(function(r){r[r.QR_CODE=0]="QR_CODE",r[r.AZTEC=1]="AZTEC",r[r.CODABAR=2]="CODABAR",r[r.CODE_39=3]="CODE_39",r[r.CODE_93=4]="CODE_93",r[r.CODE_128=5]="CODE_128",r[r.DATA_MATRIX=6]="DATA_MATRIX",r[r.MAXICODE=7]="MAXICODE",r[r.ITF=8]="ITF",r[r.EAN_13=9]="EAN_13",r[r.EAN_8=10]="EAN_8",r[r.PDF_417=11]="PDF_417",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})($n||($n={}));$n.QR_CODE,$n.AZTEC,$n.CODABAR,$n.CODE_39,$n.CODE_93,$n.CODE_128,$n.DATA_MATRIX,$n.MAXICODE,$n.ITF,$n.EAN_13,$n.EAN_8,$n.PDF_417,$n.RSS_14,$n.RSS_EXPANDED,$n.UPC_A,$n.UPC_E,$n.UPC_EAN_EXTENSION;var I1;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.URL=1]="URL"})(I1||(I1={}));var Ac;(function(r){r[r.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",r[r.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Ac||(Ac={}));var gw=function(){function r(){}return r.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",r.SCAN_DEFAULT_FPS=2,r.DEFAULT_DISABLE_FLIP=!1,r.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,r.DEFAULT_SUPPORTED_SCAN_TYPE=[Ac.SCAN_TYPE_CAMERA,Ac.SCAN_TYPE_FILE],r}(),_1;(function(r){r[r.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",r[r.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",r[r.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(_1||(_1={}));var Oa={exports:{}},xw=Oa.exports,R1;function yw(){return R1||(R1=1,function(r,s){(function(a,u){u(s)})(xw,function(a){function u(k){return k==null}var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,e){k.__proto__=e}||function(k,e){for(var n in e)e.hasOwnProperty(n)&&(k[n]=e[n])};function x(k,e){p(k,e);function n(){this.constructor=k}k.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function w(k,e){var n=Object.setPrototypeOf;n?n(k,e):k.__proto__=e}function E(k,e){e===void 0&&(e=k.constructor);var n=Error.captureStackTrace;n&&n(k,e)}var v=function(k){x(e,k);function e(n){var i=this.constructor,l=k.call(this,n)||this;return Object.defineProperty(l,"name",{value:i.name,enumerable:!1}),w(l,i.prototype),E(l),l}return e}(Error);class C extends v{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}C.kind="Exception";class A extends C{}A.kind="ArgumentException";class I extends C{}I.kind="IllegalArgumentException";class R{constructor(e){if(this.binarizer=e,e===null)throw new I("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,n){return this.binarizer.getBlackRow(e,n)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,n,i,l){const c=this.binarizer.getLuminanceSource().crop(e,n,i,l);return new R(this.binarizer.createBinarizer(c))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new R(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new R(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class O extends C{static getChecksumInstance(){return new O}}O.kind="ChecksumException";class L{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class j{static arraycopy(e,n,i,l,c){for(;c--;)i[l++]=e[n++]}static currentTimeMillis(){return Date.now()}}class B extends C{}B.kind="IndexOutOfBoundsException";class W extends B{constructor(e=void 0,n=void 0){super(n),this.index=e,this.message=n}}W.kind="ArrayIndexOutOfBoundsException";class z{static fill(e,n){for(let i=0,l=e.length;i<l;i++)e[i]=n}static fillWithin(e,n,i,l){z.rangeCheck(e.length,n,i);for(let c=n;c<i;c++)e[c]=l}static rangeCheck(e,n,i){if(n>i)throw new I("fromIndex("+n+") > toIndex("+i+")");if(n<0)throw new W(n);if(i>e)throw new W(i)}static asList(...e){return e}static create(e,n,i){return Array.from({length:e}).map(c=>Array.from({length:n}).fill(i))}static createInt32Array(e,n,i){return Array.from({length:e}).map(c=>Int32Array.from({length:n}).fill(i))}static equals(e,n){if(!e||!n||!e.length||!n.length||e.length!==n.length)return!1;for(let i=0,l=e.length;i<l;i++)if(e[i]!==n[i])return!1;return!0}static hashCode(e){if(e===null)return 0;let n=1;for(const i of e)n=31*n+i;return n}static fillUint8Array(e,n){for(let i=0;i!==e.length;i++)e[i]=n}static copyOf(e,n){return e.slice(0,n)}static copyOfUint8Array(e,n){if(e.length<=n){const i=new Uint8Array(n);return i.set(e),i}return e.slice(0,n)}static copyOfRange(e,n,i){const l=i-n,c=new Int32Array(l);return j.arraycopy(e,n,c,0,l),c}static binarySearch(e,n,i){i===void 0&&(i=z.numberComparator);let l=0,c=e.length-1;for(;l<=c;){const d=c+l>>1,m=i(n,e[d]);if(m>0)l=d+1;else if(m<0)c=d-1;else return d}return-l-1}static numberComparator(e,n){return e-n}}class F{static numberOfTrailingZeros(e){let n;if(e===0)return 32;let i=31;return n=e<<16,n!==0&&(i-=16,e=n),n=e<<8,n!==0&&(i-=8,e=n),n=e<<4,n!==0&&(i-=4,e=n),n=e<<2,n!==0&&(i-=2,e=n),i-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let n=1;return e>>>16||(n+=16,e<<=16),e>>>24||(n+=8,e<<=8),e>>>28||(n+=4,e<<=4),e>>>30||(n+=2,e<<=2),n-=e>>>31,n}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,n){return Math.trunc(e/n)}static parseInt(e,n=void 0){return parseInt(e,n)}}F.MIN_VALUE_32_BITS=-2147483648,F.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Y{constructor(e,n){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,n==null?this.bits=Y.makeArray(e):this.bits=n)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const n=Y.makeArray(e);j.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const n=this.size;if(e>=n)return n;const i=this.bits;let l=Math.floor(e/32),c=i[l];c&=~((1<<(e&31))-1);const d=i.length;for(;c===0;){if(++l===d)return n;c=i[l]}const m=l*32+F.numberOfTrailingZeros(c);return m>n?n:m}getNextUnset(e){const n=this.size;if(e>=n)return n;const i=this.bits;let l=Math.floor(e/32),c=~i[l];c&=~((1<<(e&31))-1);const d=i.length;for(;c===0;){if(++l===d)return n;c=~i[l]}const m=l*32+F.numberOfTrailingZeros(c);return m>n?n:m}setBulk(e,n){this.bits[Math.floor(e/32)]=n}setRange(e,n){if(n<e||e<0||n>this.size)throw new I;if(n===e)return;n--;const i=Math.floor(e/32),l=Math.floor(n/32),c=this.bits;for(let d=i;d<=l;d++){const m=d>i?0:e&31,b=(2<<(d<l?31:n&31))-(1<<m);c[d]|=b}}clear(){const e=this.bits.length,n=this.bits;for(let i=0;i<e;i++)n[i]=0}isRange(e,n,i){if(n<e||e<0||n>this.size)throw new I;if(n===e)return!0;n--;const l=Math.floor(e/32),c=Math.floor(n/32),d=this.bits;for(let m=l;m<=c;m++){const y=m>l?0:e&31,_=(2<<(m<c?31:n&31))-(1<<y)&4294967295;if((d[m]&_)!==(i?_:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,n){if(n<0||n>32)throw new I("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(let i=n;i>0;i--)this.appendBit((e>>i-1&1)===1)}appendBitArray(e){const n=e.size;this.ensureCapacity(this.size+n);for(let i=0;i<n;i++)this.appendBit(e.get(i))}xor(e){if(this.size!==e.size)throw new I("Sizes don't match");const n=this.bits;for(let i=0,l=n.length;i<l;i++)n[i]^=e.bits[i]}toBytes(e,n,i,l){for(let c=0;c<l;c++){let d=0;for(let m=0;m<8;m++)this.get(e)&&(d|=1<<7-m),e++;n[i+c]=d}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),i=n+1,l=this.bits;for(let c=0;c<i;c++){let d=l[c];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,e[n-c]=d}if(this.size!==i*32){const c=i*32-this.size;let d=e[0]>>>c;for(let m=1;m<i;m++){const y=e[m];d|=y<<32-c,e[m-1]=d,d=y>>>c}e[i-1]=d}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof Y))return!1;const n=e;return this.size===n.size&&z.equals(this.bits,n.bits)}hashCode(){return 31*this.size+z.hashCode(this.bits)}toString(){let e="";for(let n=0,i=this.size;n<i;n++)n&7||(e+=" "),e+=this.get(n)?"X":".";return e}clone(){return new Y(this.size,this.bits.slice())}}var K;(function(k){k[k.OTHER=0]="OTHER",k[k.PURE_BARCODE=1]="PURE_BARCODE",k[k.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",k[k.TRY_HARDER=3]="TRY_HARDER",k[k.CHARACTER_SET=4]="CHARACTER_SET",k[k.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",k[k.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",k[k.ASSUME_GS1=7]="ASSUME_GS1",k[k.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",k[k.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",k[k.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(K||(K={}));var ne=K;class q extends C{static getFormatInstance(){return new q}}q.kind="FormatException";var ie;(function(k){k[k.Cp437=0]="Cp437",k[k.ISO8859_1=1]="ISO8859_1",k[k.ISO8859_2=2]="ISO8859_2",k[k.ISO8859_3=3]="ISO8859_3",k[k.ISO8859_4=4]="ISO8859_4",k[k.ISO8859_5=5]="ISO8859_5",k[k.ISO8859_6=6]="ISO8859_6",k[k.ISO8859_7=7]="ISO8859_7",k[k.ISO8859_8=8]="ISO8859_8",k[k.ISO8859_9=9]="ISO8859_9",k[k.ISO8859_10=10]="ISO8859_10",k[k.ISO8859_11=11]="ISO8859_11",k[k.ISO8859_13=12]="ISO8859_13",k[k.ISO8859_14=13]="ISO8859_14",k[k.ISO8859_15=14]="ISO8859_15",k[k.ISO8859_16=15]="ISO8859_16",k[k.SJIS=16]="SJIS",k[k.Cp1250=17]="Cp1250",k[k.Cp1251=18]="Cp1251",k[k.Cp1252=19]="Cp1252",k[k.Cp1256=20]="Cp1256",k[k.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",k[k.UTF8=22]="UTF8",k[k.ASCII=23]="ASCII",k[k.Big5=24]="Big5",k[k.GB18030=25]="GB18030",k[k.EUC_KR=26]="EUC_KR"})(ie||(ie={}));class J{constructor(e,n,i,...l){this.valueIdentifier=e,this.name=i,typeof n=="number"?this.values=Int32Array.from([n]):this.values=n,this.otherEncodingNames=l,J.VALUE_IDENTIFIER_TO_ECI.set(e,this),J.NAME_TO_ECI.set(i,this);const c=this.values;for(let d=0,m=c.length;d!==m;d++){const y=c[d];J.VALUES_TO_ECI.set(y,this)}for(const d of l)J.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new q("incorect value");const n=J.VALUES_TO_ECI.get(e);if(n===void 0)throw new q("incorect value");return n}static getCharacterSetECIByName(e){const n=J.NAME_TO_ECI.get(e);if(n===void 0)throw new q("incorect value");return n}equals(e){if(!(e instanceof J))return!1;const n=e;return this.getName()===n.getName()}}J.VALUE_IDENTIFIER_TO_ECI=new Map,J.VALUES_TO_ECI=new Map,J.NAME_TO_ECI=new Map,J.Cp437=new J(ie.Cp437,Int32Array.from([0,2]),"Cp437"),J.ISO8859_1=new J(ie.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),J.ISO8859_2=new J(ie.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),J.ISO8859_3=new J(ie.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),J.ISO8859_4=new J(ie.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),J.ISO8859_5=new J(ie.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),J.ISO8859_6=new J(ie.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),J.ISO8859_7=new J(ie.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),J.ISO8859_8=new J(ie.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),J.ISO8859_9=new J(ie.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),J.ISO8859_10=new J(ie.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),J.ISO8859_11=new J(ie.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),J.ISO8859_13=new J(ie.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),J.ISO8859_14=new J(ie.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),J.ISO8859_15=new J(ie.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),J.ISO8859_16=new J(ie.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),J.SJIS=new J(ie.SJIS,20,"SJIS","Shift_JIS"),J.Cp1250=new J(ie.Cp1250,21,"Cp1250","windows-1250"),J.Cp1251=new J(ie.Cp1251,22,"Cp1251","windows-1251"),J.Cp1252=new J(ie.Cp1252,23,"Cp1252","windows-1252"),J.Cp1256=new J(ie.Cp1256,24,"Cp1256","windows-1256"),J.UnicodeBigUnmarked=new J(ie.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),J.UTF8=new J(ie.UTF8,26,"UTF8","UTF-8"),J.ASCII=new J(ie.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),J.Big5=new J(ie.Big5,28,"Big5"),J.GB18030=new J(ie.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),J.EUC_KR=new J(ie.EUC_KR,30,"EUC_KR","EUC-KR");class we extends C{}we.kind="UnsupportedOperationException";class Re{static decode(e,n){const i=this.encodingName(n);return this.customDecoder?this.customDecoder(e,i):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(i)?this.decodeFallback(e,i):new TextDecoder(i).decode(e)}static shouldDecodeOnFallback(e){return!Re.isBrowser()&&e==="ISO-8859-1"}static encode(e,n){const i=this.encodingName(n);return this.customEncoder?this.customEncoder(e,i):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof J?e:J.getCharacterSetECIByName(e)}static decodeFallback(e,n){const i=this.encodingCharacterSet(n);if(Re.isDecodeFallbackSupported(i)){let l="";for(let c=0,d=e.length;c<d;c++){let m=e[c].toString(16);m.length<2&&(m="0"+m),l+="%"+m}return decodeURIComponent(l)}if(i.equals(J.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new we(`Encoding ${this.encodingName(n)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(J.UTF8)||e.equals(J.ISO8859_1)||e.equals(J.ASCII)}static encodeFallback(e){const i=btoa(unescape(encodeURIComponent(e))).split(""),l=[];for(let c=0;c<i.length;c++)l.push(i[c].charCodeAt(0));return new Uint8Array(l)}}class Ae{static castAsNonUtf8Char(e,n=null){const i=n?n.getName():this.ISO88591;return Re.decode(new Uint8Array([e]),i)}static guessEncoding(e,n){if(n!=null&&n.get(ne.CHARACTER_SET)!==void 0)return n.get(ne.CHARACTER_SET).toString();const i=e.length;let l=!0,c=!0,d=!0,m=0,y=0,b=0,_=0,P=0,D=0,U=0,$=0,te=0,oe=0,he=0;const Fe=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let Ve=0;Ve<i&&(l||c||d);Ve++){const Pe=e[Ve]&255;d&&(m>0?Pe&128?m--:d=!1:Pe&128&&(Pe&64?(m++,Pe&32?(m++,Pe&16?(m++,Pe&8?d=!1:_++):b++):y++):d=!1)),l&&(Pe>127&&Pe<160?l=!1:Pe>159&&(Pe<192||Pe===215||Pe===247)&&he++),c&&(P>0?Pe<64||Pe===127||Pe>252?c=!1:P--:Pe===128||Pe===160||Pe>239?c=!1:Pe>160&&Pe<224?(D++,$=0,U++,U>te&&(te=U)):Pe>127?(P++,U=0,$++,$>oe&&(oe=$)):(U=0,$=0))}return d&&m>0&&(d=!1),c&&P>0&&(c=!1),d&&(Fe||y+b+_>0)?Ae.UTF8:c&&(Ae.ASSUME_SHIFT_JIS||te>=3||oe>=3)?Ae.SHIFT_JIS:l&&c?te===2&&D===2||he*10>=i?Ae.SHIFT_JIS:Ae.ISO88591:l?Ae.ISO88591:c?Ae.SHIFT_JIS:d?Ae.UTF8:Ae.PLATFORM_DEFAULT_ENCODING}static format(e,...n){let i=-1;function l(d,m,y,b,_,P){if(d==="%%")return"%";if(n[++i]===void 0)return;d=b?parseInt(b.substr(1)):void 0;let D=_?parseInt(_.substr(1)):void 0,U;switch(P){case"s":U=n[i];break;case"c":U=n[i][0];break;case"f":U=parseFloat(n[i]).toFixed(d);break;case"p":U=parseFloat(n[i]).toPrecision(d);break;case"e":U=parseFloat(n[i]).toExponential(d);break;case"x":U=parseInt(n[i]).toString(D||16);break;case"d":U=parseFloat(parseInt(n[i],D||10).toPrecision(d)).toFixed(0);break}U=typeof U=="object"?JSON.stringify(U):(+U).toString(D);let $=parseInt(y),te=y&&y[0]+""=="0"?"0":" ";for(;U.length<$;)U=m!==void 0?U+te:te+U;return U}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(c,l)}static getBytes(e,n){return Re.encode(e,n)}static getCharCode(e,n=0){return e.charCodeAt(n)}static getCharAt(e){return String.fromCharCode(e)}}Ae.SHIFT_JIS=J.SJIS.getName(),Ae.GB2312="GB2312",Ae.ISO88591=J.ISO8859_1.getName(),Ae.EUC_JP="EUC_JP",Ae.UTF8=J.UTF8.getName(),Ae.PLATFORM_DEFAULT_ENCODING=Ae.UTF8,Ae.ASSUME_SHIFT_JIS=!1;class Ee{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Ae.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,n,i){for(let l=n;n<n+i;l++)this.append(e[l]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+1)}substring(e,n){return this.value.substring(e,n)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+n.length)}}class Te{constructor(e,n,i,l){if(this.width=e,this.height=n,this.rowSize=i,this.bits=l,n==null&&(n=e),this.height=n,e<1||n<1)throw new I("Both dimensions must be greater than 0");i==null&&(i=Math.floor((e+31)/32)),this.rowSize=i,l==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const n=e.length,i=e[0].length,l=new Te(i,n);for(let c=0;c<n;c++){const d=e[c];for(let m=0;m<i;m++)d[m]&&l.set(m,c)}return l}static parseFromString(e,n,i){if(e===null)throw new I("stringRepresentation cannot be null");const l=new Array(e.length);let c=0,d=0,m=-1,y=0,b=0;for(;b<e.length;)if(e.charAt(b)===`
`||e.charAt(b)==="\r"){if(c>d){if(m===-1)m=c-d;else if(c-d!==m)throw new I("row lengths do not match");d=c,y++}b++}else if(e.substring(b,b+n.length)===n)b+=n.length,l[c]=!0,c++;else if(e.substring(b,b+i.length)===i)b+=i.length,l[c]=!1,c++;else throw new I("illegal character encountered: "+e.substring(b));if(c>d){if(m===-1)m=c-d;else if(c-d!==m)throw new I("row lengths do not match");y++}const _=new Te(m,y);for(let P=0;P<c;P++)l[P]&&_.set(Math.floor(P%m),Math.floor(P/m));return _}get(e,n){const i=n*this.rowSize+Math.floor(e/32);return(this.bits[i]>>>(e&31)&1)!==0}set(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]|=1<<(e&31)&4294967295}unset(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]&=~(1<<(e&31)&4294967295)}flip(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new I("input matrix dimensions do not match");const n=new Y(Math.floor(this.width/32)+1),i=this.rowSize,l=this.bits;for(let c=0,d=this.height;c<d;c++){const m=c*i,y=e.getRow(c,n).getBitArray();for(let b=0;b<i;b++)l[m+b]^=y[b]}}clear(){const e=this.bits,n=e.length;for(let i=0;i<n;i++)e[i]=0}setRegion(e,n,i,l){if(n<0||e<0)throw new I("Left and top must be nonnegative");if(l<1||i<1)throw new I("Height and width must be at least 1");const c=e+i,d=n+l;if(d>this.height||c>this.width)throw new I("The region must fit inside the matrix");const m=this.rowSize,y=this.bits;for(let b=n;b<d;b++){const _=b*m;for(let P=e;P<c;P++)y[_+Math.floor(P/32)]|=1<<(P&31)&4294967295}}getRow(e,n){n==null||n.getSize()<this.width?n=new Y(this.width):n.clear();const i=this.rowSize,l=this.bits,c=e*i;for(let d=0;d<i;d++)n.setBulk(d*32,l[c+d]);return n}setRow(e,n){j.arraycopy(n.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),n=this.getHeight();let i=new Y(e),l=new Y(e);for(let c=0,d=Math.floor((n+1)/2);c<d;c++)i=this.getRow(c,i),l=this.getRow(n-1-c,l),i.reverse(),l.reverse(),this.setRow(c,l),this.setRow(n-1-c,i)}getEnclosingRectangle(){const e=this.width,n=this.height,i=this.rowSize,l=this.bits;let c=e,d=n,m=-1,y=-1;for(let b=0;b<n;b++)for(let _=0;_<i;_++){const P=l[b*i+_];if(P!==0){if(b<d&&(d=b),b>y&&(y=b),_*32<c){let D=0;for(;!(P<<31-D&4294967295);)D++;_*32+D<c&&(c=_*32+D)}if(_*32+31>m){let D=31;for(;!(P>>>D);)D--;_*32+D>m&&(m=_*32+D)}}}return m<c||y<d?null:Int32Array.from([c,d,m-c+1,y-d+1])}getTopLeftOnBit(){const e=this.rowSize,n=this.bits;let i=0;for(;i<n.length&&n[i]===0;)i++;if(i===n.length)return null;const l=i/e;let c=i%e*32;const d=n[i];let m=0;for(;!(d<<31-m&4294967295);)m++;return c+=m,Int32Array.from([c,l])}getBottomRightOnBit(){const e=this.rowSize,n=this.bits;let i=n.length-1;for(;i>=0&&n[i]===0;)i--;if(i<0)return null;const l=Math.floor(i/e);let c=Math.floor(i%e)*32;const d=n[i];let m=31;for(;!(d>>>m);)m--;return c+=m,Int32Array.from([c,l])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof Te))return!1;const n=e;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&z.equals(this.bits,n.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+z.hashCode(this.bits),e}toString(e="X ",n="  ",i=`
`){return this.buildToString(e,n,i)}buildToString(e,n,i){let l=new Ee;for(let c=0,d=this.height;c<d;c++){for(let m=0,y=this.width;m<y;m++)l.append(this.get(m,c)?e:n);l.append(i)}return l.toString()}clone(){return new Te(this.width,this.height,this.rowSize,this.bits.slice())}}class Z extends C{static getNotFoundInstance(){return new Z}}Z.kind="NotFoundException";class ke extends L{constructor(e){super(e),this.luminances=ke.EMPTY,this.buckets=new Int32Array(ke.LUMINANCE_BUCKETS)}getBlackRow(e,n){const i=this.getLuminanceSource(),l=i.getWidth();n==null||n.getSize()<l?n=new Y(l):n.clear(),this.initArrays(l);const c=i.getRow(e,this.luminances),d=this.buckets;for(let y=0;y<l;y++)d[(c[y]&255)>>ke.LUMINANCE_SHIFT]++;const m=ke.estimateBlackPoint(d);if(l<3)for(let y=0;y<l;y++)(c[y]&255)<m&&n.set(y);else{let y=c[0]&255,b=c[1]&255;for(let _=1;_<l-1;_++){const P=c[_+1]&255;(b*4-y-P)/2<m&&n.set(_),y=b,b=P}}return n}getBlackMatrix(){const e=this.getLuminanceSource(),n=e.getWidth(),i=e.getHeight(),l=new Te(n,i);this.initArrays(n);const c=this.buckets;for(let y=1;y<5;y++){const b=Math.floor(i*y/5),_=e.getRow(b,this.luminances),P=Math.floor(n*4/5);for(let D=Math.floor(n/5);D<P;D++){const U=_[D]&255;c[U>>ke.LUMINANCE_SHIFT]++}}const d=ke.estimateBlackPoint(c),m=e.getMatrix();for(let y=0;y<i;y++){const b=y*n;for(let _=0;_<n;_++)(m[b+_]&255)<d&&l.set(_,y)}return l}createBinarizer(e){return new ke(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const n=this.buckets;for(let i=0;i<ke.LUMINANCE_BUCKETS;i++)n[i]=0}static estimateBlackPoint(e){const n=e.length;let i=0,l=0,c=0;for(let _=0;_<n;_++)e[_]>c&&(l=_,c=e[_]),e[_]>i&&(i=e[_]);let d=0,m=0;for(let _=0;_<n;_++){const P=_-l,D=e[_]*P*P;D>m&&(d=_,m=D)}if(l>d){const _=l;l=d,d=_}if(d-l<=n/16)throw new Z;let y=d-1,b=-1;for(let _=d-1;_>l;_--){const P=_-l,D=P*P*(d-_)*(i-e[_]);D>b&&(y=_,b=D)}return y<<ke.LUMINANCE_SHIFT}}ke.LUMINANCE_BITS=5,ke.LUMINANCE_SHIFT=8-ke.LUMINANCE_BITS,ke.LUMINANCE_BUCKETS=1<<ke.LUMINANCE_BITS,ke.EMPTY=Uint8ClampedArray.from([0]);class ve extends ke{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),n=e.getWidth(),i=e.getHeight();if(n>=ve.MINIMUM_DIMENSION&&i>=ve.MINIMUM_DIMENSION){const l=e.getMatrix();let c=n>>ve.BLOCK_SIZE_POWER;n&ve.BLOCK_SIZE_MASK&&c++;let d=i>>ve.BLOCK_SIZE_POWER;i&ve.BLOCK_SIZE_MASK&&d++;const m=ve.calculateBlackPoints(l,c,d,n,i),y=new Te(n,i);ve.calculateThresholdForBlock(l,c,d,n,i,m,y),this.matrix=y}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new ve(e)}static calculateThresholdForBlock(e,n,i,l,c,d,m){const y=c-ve.BLOCK_SIZE,b=l-ve.BLOCK_SIZE;for(let _=0;_<i;_++){let P=_<<ve.BLOCK_SIZE_POWER;P>y&&(P=y);const D=ve.cap(_,2,i-3);for(let U=0;U<n;U++){let $=U<<ve.BLOCK_SIZE_POWER;$>b&&($=b);const te=ve.cap(U,2,n-3);let oe=0;for(let Fe=-2;Fe<=2;Fe++){const Ve=d[D+Fe];oe+=Ve[te-2]+Ve[te-1]+Ve[te]+Ve[te+1]+Ve[te+2]}const he=oe/25;ve.thresholdBlock(e,$,P,he,l,m)}}}static cap(e,n,i){return e<n?n:e>i?i:e}static thresholdBlock(e,n,i,l,c,d){for(let m=0,y=i*c+n;m<ve.BLOCK_SIZE;m++,y+=c)for(let b=0;b<ve.BLOCK_SIZE;b++)(e[y+b]&255)<=l&&d.set(n+b,i+m)}static calculateBlackPoints(e,n,i,l,c){const d=c-ve.BLOCK_SIZE,m=l-ve.BLOCK_SIZE,y=new Array(i);for(let b=0;b<i;b++){y[b]=new Int32Array(n);let _=b<<ve.BLOCK_SIZE_POWER;_>d&&(_=d);for(let P=0;P<n;P++){let D=P<<ve.BLOCK_SIZE_POWER;D>m&&(D=m);let U=0,$=255,te=0;for(let he=0,Fe=_*l+D;he<ve.BLOCK_SIZE;he++,Fe+=l){for(let Ve=0;Ve<ve.BLOCK_SIZE;Ve++){const Pe=e[Fe+Ve]&255;U+=Pe,Pe<$&&($=Pe),Pe>te&&(te=Pe)}if(te-$>ve.MIN_DYNAMIC_RANGE)for(he++,Fe+=l;he<ve.BLOCK_SIZE;he++,Fe+=l)for(let Ve=0;Ve<ve.BLOCK_SIZE;Ve++)U+=e[Fe+Ve]&255}let oe=U>>ve.BLOCK_SIZE_POWER*2;if(te-$<=ve.MIN_DYNAMIC_RANGE&&(oe=$/2,b>0&&P>0)){const he=(y[b-1][P]+2*y[b][P-1]+y[b-1][P-1])/4;$<he&&(oe=he)}y[b][P]=oe}}return y}}ve.BLOCK_SIZE_POWER=3,ve.BLOCK_SIZE=1<<ve.BLOCK_SIZE_POWER,ve.BLOCK_SIZE_MASK=ve.BLOCK_SIZE-1,ve.MINIMUM_DIMENSION=ve.BLOCK_SIZE*5,ve.MIN_DYNAMIC_RANGE=24;class ye{constructor(e,n){this.width=e,this.height=n}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,n,i,l){throw new we("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new we("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new we("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let n=new Ee;for(let i=0;i<this.height;i++){const l=this.getRow(i,e);for(let c=0;c<this.width;c++){const d=l[c]&255;let m;d<64?m="#":d<128?m="+":d<192?m=".":m=" ",n.append(m)}n.append(`
`)}return n.toString()}}class De extends ye{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,n){const i=this.delegate.getRow(e,n),l=this.getWidth();for(let c=0;c<l;c++)i[c]=255-(i[c]&255);return i}getMatrix(){const e=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n);for(let l=0;l<n;l++)i[l]=255-(e[l]&255);return i}isCropSupported(){return this.delegate.isCropSupported()}crop(e,n,i,l){return new De(this.delegate.crop(e,n,i,l))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new De(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new De(this.delegate.rotateCounterClockwise45())}}class be extends ye{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=be.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const n=e.getContext("2d").getImageData(0,0,e.width,e.height);return be.toGrayscaleBuffer(n.data,e.width,e.height)}static toGrayscaleBuffer(e,n,i){const l=new Uint8ClampedArray(n*i);for(let c=0,d=0,m=e.length;c<m;c+=4,d++){let y;if(e[c+3]===0)y=255;else{const _=e[c],P=e[c+1],D=e[c+2];y=306*_+601*P+117*D+512>>10}l[d]=y}return l}getRow(e,n){if(e<0||e>=this.getHeight())throw new I("Requested row is outside the image: "+e);const i=this.getWidth(),l=e*i;return n===null?n=this.buffer.slice(l,l+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(l,l+i))),n}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,n,i,l){return super.crop(e,n,i,l),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const n=this.getTempCanvasElement(),i=n.getContext("2d"),l=e*be.DEGREE_TO_RADIANS,c=this.canvas.width,d=this.canvas.height,m=Math.ceil(Math.abs(Math.cos(l))*c+Math.abs(Math.sin(l))*d),y=Math.ceil(Math.abs(Math.sin(l))*c+Math.abs(Math.cos(l))*d);return n.width=m,n.height=y,i.translate(m/2,y/2),i.rotate(l),i.drawImage(this.canvas,c/-2,d/-2),this.buffer=be.makeBufferFromCanvasImageData(n),this}invert(){return new De(this)}}be.DEGREE_TO_RADIANS=Math.PI/180;class X{constructor(e,n,i){this.deviceId=e,this.label=n,this.kind="videoinput",this.groupId=i||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var G=(globalThis||sc||self||window||void 0)&&(globalThis||sc||self||window||void 0).__awaiter||function(k,e,n,i){function l(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function m(_){try{b(i.next(_))}catch(P){d(P)}}function y(_){try{b(i.throw(_))}catch(P){d(P)}}function b(_){_.done?c(_.value):l(_.value).then(m,y)}b((i=i.apply(k,e||[])).next())})};class Ce{constructor(e,n=500,i){this.reader=e,this.timeBetweenScansMillis=n,this._hints=i,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return G(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),n=[];for(const i of e){const l=i.kind==="video"?"videoinput":i.kind;if(l!=="videoinput")continue;const c=i.deviceId||i.id,d=i.label||`Video device ${n.length+1}`,m=i.groupId,y={deviceId:c,label:d,kind:l,groupId:m};n.push(y)}return n})}getVideoInputDevices(){return G(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(n=>new X(n.deviceId,n.label))})}findDeviceById(e){return G(this,void 0,void 0,function*(){const n=yield this.listVideoInputDevices();return n?n.find(i=>i.deviceId===e):null})}decodeFromInputVideoDevice(e,n){return G(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,n)})}decodeOnceFromVideoDevice(e,n){return G(this,void 0,void 0,function*(){this.reset();let i;e?i={deviceId:{exact:e}}:i={facingMode:"environment"};const l={video:i};return yield this.decodeOnceFromConstraints(l,n)})}decodeOnceFromConstraints(e,n){return G(this,void 0,void 0,function*(){const i=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(i,n)})}decodeOnceFromStream(e,n){return G(this,void 0,void 0,function*(){this.reset();const i=yield this.attachStreamToVideo(e,n);return yield this.decodeOnce(i)})}decodeFromInputVideoDeviceContinuously(e,n,i){return G(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,n,i)})}decodeFromVideoDevice(e,n,i){return G(this,void 0,void 0,function*(){let l;e?l={deviceId:{exact:e}}:l={facingMode:"environment"};const c={video:l};return yield this.decodeFromConstraints(c,n,i)})}decodeFromConstraints(e,n,i){return G(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(l,n,i)})}decodeFromStream(e,n,i){return G(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(e,n);return yield this.decodeContinuously(l,i)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,n){return G(this,void 0,void 0,function*(){const i=this.prepareVideoElement(n);return this.addVideoSource(i,e),this.videoElement=i,this.stream=e,yield this.playVideoOnLoadAsync(i),i})}playVideoOnLoadAsync(e){return new Promise((n,i)=>this.playVideoOnLoad(e,()=>n()))}playVideoOnLoad(e,n){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",n),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return G(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,n){const i=document.getElementById(e);if(!i)throw new A(`element with id '${e}' not found`);if(i.nodeName.toLowerCase()!==n.toLowerCase())throw new A(`element with id '${e}' must be an ${n} element`);return i}decodeFromImage(e,n){if(!e&&!n)throw new A("either imageElement with a src set or an url must be provided");return n&&!e?this.decodeFromImageUrl(n):this.decodeFromImageElement(e)}decodeFromVideo(e,n){if(!e&&!n)throw new A("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,n,i){if(e===void 0&&n===void 0)throw new A("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrlContinuously(n,i):this.decodeFromVideoElementContinuously(e,i)}decodeFromImageElement(e){if(!e)throw new A("An image element must be provided.");this.reset();const n=this.prepareImageElement(e);this.imageElement=n;let i;return this.isImageLoaded(n)?i=this.decodeOnce(n,!1,!0):i=this._decodeOnLoadImage(n),i}decodeFromVideoElement(e){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(n)}decodeFromVideoElementContinuously(e,n){const i=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(i,n)}_decodeFromVideoElementSetup(e){if(!e)throw new A("A video element must be provided.");this.reset();const n=this.prepareVideoElement(e);return this.videoElement=n,n}decodeFromImageUrl(e){if(!e)throw new A("An URL must be provided.");this.reset();const n=this.prepareImageElement();this.imageElement=n;const i=this._decodeOnLoadImage(n);return n.src=e,i}decodeFromVideoUrl(e){if(!e)throw new A("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),i=this.decodeFromVideoElement(n);return n.src=e,i}decodeFromVideoUrlContinuously(e,n){if(!e)throw new A("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),l=this.decodeFromVideoElementContinuously(i,n);return i.src=e,l}_decodeOnLoadImage(e){return new Promise((n,i)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(n,i),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return G(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,n){return G(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,n)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let n;return typeof e>"u"&&(n=document.createElement("img"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(n=e),n}prepareVideoElement(e){let n;return!e&&typeof document<"u"&&(n=document.createElement("video"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(n=e),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n}decodeOnce(e,n=!0,i=!0){this._stopAsyncDecode=!1;const l=(c,d)=>{if(this._stopAsyncDecode){d(new Z("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const m=this.decode(e);c(m)}catch(m){const y=n&&m instanceof Z,_=(m instanceof O||m instanceof q)&&i;if(y||_)return setTimeout(l,this._timeBetweenDecodingAttempts,c,d);d(m)}};return new Promise((c,d)=>l(c,d))}decodeContinuously(e,n){this._stopContinuousDecode=!1;const i=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const l=this.decode(e);n(l,null),setTimeout(i,this.timeBetweenScansMillis)}catch(l){n(null,l);const c=l instanceof O||l instanceof q,d=l instanceof Z;(c||d)&&setTimeout(i,this._timeBetweenDecodingAttempts)}};i()}decode(e){const n=this.createBinaryBitmap(e);return this.decodeBitmap(n)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,n,i){n||(n={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),i||(i=this.captureCanvasContext),i.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}drawImageOnCanvas(e,n,i=this.captureCanvasContext){n||(n={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),i||(i=this.captureCanvasContext),i.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const n=this.getCaptureCanvas(e),i=new be(n),l=new ve(i);return new R(l)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const i=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=i}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const n=this.createCaptureCanvas(e);this.captureCanvas=n}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const n=document.createElement("canvas");let i,l;return typeof e<"u"&&(e instanceof HTMLVideoElement?(i=e.videoWidth,l=e.videoHeight):e instanceof HTMLImageElement&&(i=e.naturalWidth||e.width,l=e.naturalHeight||e.height)),n.style.width=i+"px",n.style.height=l+"px",n.width=i,n.height=l,n}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,n){try{e.srcObject=n}catch{e.src=URL.createObjectURL(n)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class ae{constructor(e,n,i=n==null?0:8*n.length,l,c,d=j.currentTimeMillis()){this.text=e,this.rawBytes=n,this.numBits=i,this.resultPoints=l,this.format=c,this.timestamp=d,this.text=e,this.rawBytes=n,i==null?this.numBits=n==null?0:8*n.length:this.numBits=i,this.resultPoints=l,this.format=c,this.resultMetadata=null,d==null?this.timestamp=j.currentTimeMillis():this.timestamp=d}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,n){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,n)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const n=this.resultPoints;if(n===null)this.resultPoints=e;else if(e!==null&&e.length>0){const i=new Array(n.length+e.length);j.arraycopy(n,0,i,0,n.length),j.arraycopy(e,0,i,n.length,e.length),this.resultPoints=i}}getTimestamp(){return this.timestamp}toString(){return this.text}}var se;(function(k){k[k.AZTEC=0]="AZTEC",k[k.CODABAR=1]="CODABAR",k[k.CODE_39=2]="CODE_39",k[k.CODE_93=3]="CODE_93",k[k.CODE_128=4]="CODE_128",k[k.DATA_MATRIX=5]="DATA_MATRIX",k[k.EAN_8=6]="EAN_8",k[k.EAN_13=7]="EAN_13",k[k.ITF=8]="ITF",k[k.MAXICODE=9]="MAXICODE",k[k.PDF_417=10]="PDF_417",k[k.QR_CODE=11]="QR_CODE",k[k.RSS_14=12]="RSS_14",k[k.RSS_EXPANDED=13]="RSS_EXPANDED",k[k.UPC_A=14]="UPC_A",k[k.UPC_E=15]="UPC_E",k[k.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(se||(se={}));var ee=se,Me;(function(k){k[k.OTHER=0]="OTHER",k[k.ORIENTATION=1]="ORIENTATION",k[k.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",k[k.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",k[k.ISSUE_NUMBER=4]="ISSUE_NUMBER",k[k.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",k[k.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",k[k.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",k[k.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",k[k.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",k[k.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Me||(Me={}));var Se=Me;class Le{constructor(e,n,i,l,c=-1,d=-1){this.rawBytes=e,this.text=n,this.byteSegments=i,this.ecLevel=l,this.structuredAppendSequenceNumber=c,this.structuredAppendParity=d,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class et{exp(e){return this.expTable[e]}log(e){if(e===0)throw new I;return this.logTable[e]}static addOrSubtract(e,n){return e^n}}class Xe{constructor(e,n){if(n.length===0)throw new I;this.field=e;const i=n.length;if(i>1&&n[0]===0){let l=1;for(;l<i&&n[l]===0;)l++;l===i?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(i-l),j.arraycopy(n,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const n=this.coefficients;let i;if(e===1){i=0;for(let d=0,m=n.length;d!==m;d++){const y=n[d];i=et.addOrSubtract(i,y)}return i}i=n[0];const l=n.length,c=this.field;for(let d=1;d<l;d++)i=et.addOrSubtract(c.multiply(e,i),n[d]);return i}addOrSubtract(e){if(!this.field.equals(e.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,i=e.coefficients;if(n.length>i.length){const d=n;n=i,i=d}let l=new Int32Array(i.length);const c=i.length-n.length;j.arraycopy(i,0,l,0,c);for(let d=c;d<i.length;d++)l[d]=et.addOrSubtract(n[d-c],i[d]);return new Xe(this.field,l)}multiply(e){if(!this.field.equals(e.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const n=this.coefficients,i=n.length,l=e.coefficients,c=l.length,d=new Int32Array(i+c-1),m=this.field;for(let y=0;y<i;y++){const b=n[y];for(let _=0;_<c;_++)d[y+_]=et.addOrSubtract(d[y+_],m.multiply(b,l[_]))}return new Xe(m,d)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const n=this.coefficients.length,i=this.field,l=new Int32Array(n),c=this.coefficients;for(let d=0;d<n;d++)l[d]=i.multiply(c[d],e);return new Xe(i,l)}multiplyByMonomial(e,n){if(e<0)throw new I;if(n===0)return this.field.getZero();const i=this.coefficients,l=i.length,c=new Int32Array(l+e),d=this.field;for(let m=0;m<l;m++)c[m]=d.multiply(i[m],n);return new Xe(d,c)}divide(e){if(!this.field.equals(e.field))throw new I("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new I("Divide by 0");const n=this.field;let i=n.getZero(),l=this;const c=e.getCoefficient(e.getDegree()),d=n.inverse(c);for(;l.getDegree()>=e.getDegree()&&!l.isZero();){const m=l.getDegree()-e.getDegree(),y=n.multiply(l.getCoefficient(l.getDegree()),d),b=e.multiplyByMonomial(m,y),_=n.buildMonomial(m,y);i=i.addOrSubtract(_),l=l.addOrSubtract(b)}return[i,l]}toString(){let e="";for(let n=this.getDegree();n>=0;n--){let i=this.getCoefficient(n);if(i!==0){if(i<0?(e+=" - ",i=-i):e.length>0&&(e+=" + "),n===0||i!==1){const l=this.field.log(i);l===0?e+="1":l===1?e+="a":(e+="a^",e+=l)}n!==0&&(n===1?e+="x":(e+="x^",e+=n))}}return e}}class de extends C{}de.kind="ArithmeticException";class xe extends et{constructor(e,n,i){super(),this.primitive=e,this.size=n,this.generatorBase=i;const l=new Int32Array(n);let c=1;for(let m=0;m<n;m++)l[m]=c,c*=2,c>=n&&(c^=e,c&=n-1);this.expTable=l;const d=new Int32Array(n);for(let m=0;m<n-1;m++)d[l[m]]=m;this.logTable=d,this.zero=new Xe(this,Int32Array.from([0])),this.one=new Xe(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new I;if(n===0)return this.zero;const i=new Int32Array(e+1);return i[0]=n,new Xe(this,i)}inverse(e){if(e===0)throw new de;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+F.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}xe.AZTEC_DATA_12=new xe(4201,4096,1),xe.AZTEC_DATA_10=new xe(1033,1024,1),xe.AZTEC_DATA_6=new xe(67,64,1),xe.AZTEC_PARAM=new xe(19,16,1),xe.QR_CODE_FIELD_256=new xe(285,256,0),xe.DATA_MATRIX_FIELD_256=new xe(301,256,1),xe.AZTEC_DATA_8=xe.DATA_MATRIX_FIELD_256,xe.MAXICODE_FIELD_64=xe.AZTEC_DATA_6;class Ze extends C{}Ze.kind="ReedSolomonException";class $e extends C{}$e.kind="IllegalStateException";class Tt{constructor(e){this.field=e}decode(e,n){const i=this.field,l=new Xe(i,e),c=new Int32Array(n);let d=!0;for(let U=0;U<n;U++){const $=l.evaluateAt(i.exp(U+i.getGeneratorBase()));c[c.length-1-U]=$,$!==0&&(d=!1)}if(d)return;const m=new Xe(i,c),y=this.runEuclideanAlgorithm(i.buildMonomial(n,1),m,n),b=y[0],_=y[1],P=this.findErrorLocations(b),D=this.findErrorMagnitudes(_,P);for(let U=0;U<P.length;U++){const $=e.length-1-i.log(P[U]);if($<0)throw new Ze("Bad error location");e[$]=xe.addOrSubtract(e[$],D[U])}}runEuclideanAlgorithm(e,n,i){if(e.getDegree()<n.getDegree()){const U=e;e=n,n=U}const l=this.field;let c=e,d=n,m=l.getZero(),y=l.getOne();for(;d.getDegree()>=(i/2|0);){let U=c,$=m;if(c=d,m=y,c.isZero())throw new Ze("r_{i-1} was zero");d=U;let te=l.getZero();const oe=c.getCoefficient(c.getDegree()),he=l.inverse(oe);for(;d.getDegree()>=c.getDegree()&&!d.isZero();){const Fe=d.getDegree()-c.getDegree(),Ve=l.multiply(d.getCoefficient(d.getDegree()),he);te=te.addOrSubtract(l.buildMonomial(Fe,Ve)),d=d.addOrSubtract(c.multiplyByMonomial(Fe,Ve))}if(y=te.multiply(m).addOrSubtract($),d.getDegree()>=c.getDegree())throw new $e("Division algorithm failed to reduce polynomial?")}const b=y.getCoefficient(0);if(b===0)throw new Ze("sigmaTilde(0) was zero");const _=l.inverse(b),P=y.multiplyScalar(_),D=d.multiplyScalar(_);return[P,D]}findErrorLocations(e){const n=e.getDegree();if(n===1)return Int32Array.from([e.getCoefficient(1)]);const i=new Int32Array(n);let l=0;const c=this.field;for(let d=1;d<c.getSize()&&l<n;d++)e.evaluateAt(d)===0&&(i[l]=c.inverse(d),l++);if(l!==n)throw new Ze("Error locator degree does not match number of roots");return i}findErrorMagnitudes(e,n){const i=n.length,l=new Int32Array(i),c=this.field;for(let d=0;d<i;d++){const m=c.inverse(n[d]);let y=1;for(let b=0;b<i;b++)if(d!==b){const _=c.multiply(n[b],m),P=_&1?_&-2:_|1;y=c.multiply(y,P)}l[d]=c.multiply(e.evaluateAt(m),c.inverse(y)),c.getGeneratorBase()!==0&&(l[d]=c.multiply(l[d],m))}return l}}var it;(function(k){k[k.UPPER=0]="UPPER",k[k.LOWER=1]="LOWER",k[k.MIXED=2]="MIXED",k[k.DIGIT=3]="DIGIT",k[k.PUNCT=4]="PUNCT",k[k.BINARY=5]="BINARY"})(it||(it={}));class qe{decode(e){this.ddata=e;let n=e.getBits(),i=this.extractBits(n),l=this.correctBits(i),c=qe.convertBoolArrayToByteArray(l),d=qe.getEncodedData(l),m=new Le(c,d,null,null);return m.setNumBits(l.length),m}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let n=e.length,i=it.UPPER,l=it.UPPER,c="",d=0;for(;d<n;)if(l===it.BINARY){if(n-d<5)break;let m=qe.readCode(e,d,5);if(d+=5,m===0){if(n-d<11)break;m=qe.readCode(e,d,11)+31,d+=11}for(let y=0;y<m;y++){if(n-d<8){d=n;break}const b=qe.readCode(e,d,8);c+=Ae.castAsNonUtf8Char(b),d+=8}l=i}else{let m=l===it.DIGIT?4:5;if(n-d<m)break;let y=qe.readCode(e,d,m);d+=m;let b=qe.getCharacter(l,y);b.startsWith("CTRL_")?(i=l,l=qe.getTable(b.charAt(5)),b.charAt(6)==="L"&&(i=l)):(c+=b,l=i)}return c}static getTable(e){switch(e){case"L":return it.LOWER;case"P":return it.PUNCT;case"M":return it.MIXED;case"D":return it.DIGIT;case"B":return it.BINARY;case"U":default:return it.UPPER}}static getCharacter(e,n){switch(e){case it.UPPER:return qe.UPPER_TABLE[n];case it.LOWER:return qe.LOWER_TABLE[n];case it.MIXED:return qe.MIXED_TABLE[n];case it.PUNCT:return qe.PUNCT_TABLE[n];case it.DIGIT:return qe.DIGIT_TABLE[n];default:throw new $e("Bad table")}}correctBits(e){let n,i;this.ddata.getNbLayers()<=2?(i=6,n=xe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(i=8,n=xe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(i=10,n=xe.AZTEC_DATA_10):(i=12,n=xe.AZTEC_DATA_12);let l=this.ddata.getNbDatablocks(),c=e.length/i;if(c<l)throw new q;let d=e.length%i,m=new Int32Array(c);for(let D=0;D<c;D++,d+=i)m[D]=qe.readCode(e,d,i);try{new Tt(n).decode(m,c-l)}catch(D){throw new q(D)}let y=(1<<i)-1,b=0;for(let D=0;D<l;D++){let U=m[D];if(U===0||U===y)throw new q;(U===1||U===y-1)&&b++}let _=new Array(l*i-b),P=0;for(let D=0;D<l;D++){let U=m[D];if(U===1||U===y-1)_.fill(U>1,P,P+i-1),P+=i-1;else for(let $=i-1;$>=0;--$)_[P++]=(U&1<<$)!==0}return _}extractBits(e){let n=this.ddata.isCompact(),i=this.ddata.getNbLayers(),l=(n?11:14)+i*4,c=new Int32Array(l),d=new Array(this.totalBitsInLayer(i,n));if(n)for(let m=0;m<c.length;m++)c[m]=m;else{let m=l+1+2*F.truncDivision(F.truncDivision(l,2)-1,15),y=l/2,b=F.truncDivision(m,2);for(let _=0;_<y;_++){let P=_+F.truncDivision(_,15);c[y-_-1]=b-P-1,c[y+_]=b+P+1}}for(let m=0,y=0;m<i;m++){let b=(i-m)*4+(n?9:12),_=m*2,P=l-1-_;for(let D=0;D<b;D++){let U=D*2;for(let $=0;$<2;$++)d[y+U+$]=e.get(c[_+$],c[_+D]),d[y+2*b+U+$]=e.get(c[_+D],c[P-$]),d[y+4*b+U+$]=e.get(c[P-$],c[P-D]),d[y+6*b+U+$]=e.get(c[P-D],c[_+$])}y+=b*8}return d}static readCode(e,n,i){let l=0;for(let c=n;c<n+i;c++)l<<=1,e[c]&&(l|=1);return l}static readByte(e,n){let i=e.length-n;return i>=8?qe.readCode(e,n,8):qe.readCode(e,n,i)<<8-i}static convertBoolArrayToByteArray(e){let n=new Uint8Array((e.length+7)/8);for(let i=0;i<n.length;i++)n[i]=qe.readByte(e,8*i);return n}totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}qe.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],qe.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],qe.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],qe.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],qe.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class tt{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,n,i,l){const c=e-i,d=n-l;return Math.sqrt(c*c+d*d)}static sum(e){let n=0;for(let i=0,l=e.length;i!==l;i++){const c=e[i];n+=c}return n}}class jt{static floatToIntBits(e){return e}}jt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ze{constructor(e,n){this.x=e,this.y=n}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof ze){const n=e;return this.x===n.x&&this.y===n.y}return!1}hashCode(){return 31*jt.floatToIntBits(this.x)+jt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const n=this.distance(e[0],e[1]),i=this.distance(e[1],e[2]),l=this.distance(e[0],e[2]);let c,d,m;if(i>=n&&i>=l?(d=e[0],c=e[1],m=e[2]):l>=i&&l>=n?(d=e[1],c=e[0],m=e[2]):(d=e[2],c=e[0],m=e[1]),this.crossProductZ(c,d,m)<0){const y=c;c=m,m=y}e[0]=c,e[1]=d,e[2]=m}static distance(e,n){return tt.distance(e.x,e.y,n.x,n.y)}static crossProductZ(e,n,i){const l=n.x,c=n.y;return(i.x-l)*(e.y-c)-(i.y-c)*(e.x-l)}}class gn{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class rr extends gn{constructor(e,n,i,l,c){super(e,n),this.compact=i,this.nbDatablocks=l,this.nbLayers=c}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Ge{constructor(e,n,i,l){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),n==null&&(n=Ge.INIT_SIZE),i==null&&(i=e.getWidth()/2|0),l==null&&(l=e.getHeight()/2|0);const c=n/2|0;if(this.leftInit=i-c,this.rightInit=i+c,this.upInit=l-c,this.downInit=l+c,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Z}detect(){let e=this.leftInit,n=this.rightInit,i=this.upInit,l=this.downInit,c=!1,d=!0,m=!1,y=!1,b=!1,_=!1,P=!1;const D=this.width,U=this.height;for(;d;){d=!1;let $=!0;for(;($||!y)&&n<D;)$=this.containsBlackPoint(i,l,n,!1),$?(n++,d=!0,y=!0):y||n++;if(n>=D){c=!0;break}let te=!0;for(;(te||!b)&&l<U;)te=this.containsBlackPoint(e,n,l,!0),te?(l++,d=!0,b=!0):b||l++;if(l>=U){c=!0;break}let oe=!0;for(;(oe||!_)&&e>=0;)oe=this.containsBlackPoint(i,l,e,!1),oe?(e--,d=!0,_=!0):_||e--;if(e<0){c=!0;break}let he=!0;for(;(he||!P)&&i>=0;)he=this.containsBlackPoint(e,n,i,!0),he?(i--,d=!0,P=!0):P||i--;if(i<0){c=!0;break}d&&(m=!0)}if(!c&&m){const $=n-e;let te=null;for(let Ve=1;te===null&&Ve<$;Ve++)te=this.getBlackPointOnSegment(e,l-Ve,e+Ve,l);if(te==null)throw new Z;let oe=null;for(let Ve=1;oe===null&&Ve<$;Ve++)oe=this.getBlackPointOnSegment(e,i+Ve,e+Ve,i);if(oe==null)throw new Z;let he=null;for(let Ve=1;he===null&&Ve<$;Ve++)he=this.getBlackPointOnSegment(n,i+Ve,n-Ve,i);if(he==null)throw new Z;let Fe=null;for(let Ve=1;Fe===null&&Ve<$;Ve++)Fe=this.getBlackPointOnSegment(n,l-Ve,n-Ve,l);if(Fe==null)throw new Z;return this.centerEdges(Fe,te,he,oe)}else throw new Z}getBlackPointOnSegment(e,n,i,l){const c=tt.round(tt.distance(e,n,i,l)),d=(i-e)/c,m=(l-n)/c,y=this.image;for(let b=0;b<c;b++){const _=tt.round(e+b*d),P=tt.round(n+b*m);if(y.get(_,P))return new ze(_,P)}return null}centerEdges(e,n,i,l){const c=e.getX(),d=e.getY(),m=n.getX(),y=n.getY(),b=i.getX(),_=i.getY(),P=l.getX(),D=l.getY(),U=Ge.CORR;return c<this.width/2?[new ze(P-U,D+U),new ze(m+U,y+U),new ze(b-U,_-U),new ze(c+U,d-U)]:[new ze(P+U,D+U),new ze(m+U,y-U),new ze(b-U,_+U),new ze(c-U,d-U)]}containsBlackPoint(e,n,i,l){const c=this.image;if(l){for(let d=e;d<=n;d++)if(c.get(d,i))return!0}else for(let d=e;d<=n;d++)if(c.get(i,d))return!0;return!1}}Ge.INIT_SIZE=10,Ge.CORR=1;class It{static checkAndNudgePoints(e,n){const i=e.getWidth(),l=e.getHeight();let c=!0;for(let d=0;d<n.length&&c;d+=2){const m=Math.floor(n[d]),y=Math.floor(n[d+1]);if(m<-1||m>i||y<-1||y>l)throw new Z;c=!1,m===-1?(n[d]=0,c=!0):m===i&&(n[d]=i-1,c=!0),y===-1?(n[d+1]=0,c=!0):y===l&&(n[d+1]=l-1,c=!0)}c=!0;for(let d=n.length-2;d>=0&&c;d-=2){const m=Math.floor(n[d]),y=Math.floor(n[d+1]);if(m<-1||m>i||y<-1||y>l)throw new Z;c=!1,m===-1?(n[d]=0,c=!0):m===i&&(n[d]=i-1,c=!0),y===-1?(n[d+1]=0,c=!0):y===l&&(n[d+1]=l-1,c=!0)}}}class Ue{constructor(e,n,i,l,c,d,m,y,b){this.a11=e,this.a21=n,this.a31=i,this.a12=l,this.a22=c,this.a32=d,this.a13=m,this.a23=y,this.a33=b}static quadrilateralToQuadrilateral(e,n,i,l,c,d,m,y,b,_,P,D,U,$,te,oe){const he=Ue.quadrilateralToSquare(e,n,i,l,c,d,m,y);return Ue.squareToQuadrilateral(b,_,P,D,U,$,te,oe).times(he)}transformPoints(e){const n=e.length,i=this.a11,l=this.a12,c=this.a13,d=this.a21,m=this.a22,y=this.a23,b=this.a31,_=this.a32,P=this.a33;for(let D=0;D<n;D+=2){const U=e[D],$=e[D+1],te=c*U+y*$+P;e[D]=(i*U+d*$+b)/te,e[D+1]=(l*U+m*$+_)/te}}transformPointsWithValues(e,n){const i=this.a11,l=this.a12,c=this.a13,d=this.a21,m=this.a22,y=this.a23,b=this.a31,_=this.a32,P=this.a33,D=e.length;for(let U=0;U<D;U++){const $=e[U],te=n[U],oe=c*$+y*te+P;e[U]=(i*$+d*te+b)/oe,n[U]=(l*$+m*te+_)/oe}}static squareToQuadrilateral(e,n,i,l,c,d,m,y){const b=e-i+c-m,_=n-l+d-y;if(b===0&&_===0)return new Ue(i-e,c-i,e,l-n,d-l,n,0,0,1);{const P=i-c,D=m-c,U=l-d,$=y-d,te=P*$-D*U,oe=(b*$-D*_)/te,he=(P*_-b*U)/te;return new Ue(i-e+oe*i,m-e+he*m,e,l-n+oe*l,y-n+he*y,n,oe,he,1)}}static quadrilateralToSquare(e,n,i,l,c,d,m,y){return Ue.squareToQuadrilateral(e,n,i,l,c,d,m,y).buildAdjoint()}buildAdjoint(){return new Ue(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new Ue(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class ct extends It{sampleGrid(e,n,i,l,c,d,m,y,b,_,P,D,U,$,te,oe,he,Fe,Ve){const Pe=Ue.quadrilateralToQuadrilateral(l,c,d,m,y,b,_,P,D,U,$,te,oe,he,Fe,Ve);return this.sampleGridWithTransform(e,n,i,Pe)}sampleGridWithTransform(e,n,i,l){if(n<=0||i<=0)throw new Z;const c=new Te(n,i),d=new Float32Array(2*n);for(let m=0;m<i;m++){const y=d.length,b=m+.5;for(let _=0;_<y;_+=2)d[_]=_/2+.5,d[_+1]=b;l.transformPoints(d),It.checkAndNudgePoints(e,d);try{for(let _=0;_<y;_+=2)e.get(Math.floor(d[_]),Math.floor(d[_+1]))&&c.set(_/2,m)}catch{throw new Z}}return c}}class Je{static setGridSampler(e){Je.gridSampler=e}static getInstance(){return Je.gridSampler}}Je.gridSampler=new ct;class wt{constructor(e,n){this.x=e,this.y=n}toResultPoint(){return new ze(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Bt{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let n=this.getMatrixCenter(),i=this.getBullsEyeCorners(n);if(e){let d=i[0];i[0]=i[2],i[2]=d}this.extractParameters(i);let l=this.sampleGrid(this.image,i[this.shift%4],i[(this.shift+1)%4],i[(this.shift+2)%4],i[(this.shift+3)%4]),c=this.getMatrixCornerPoints(i);return new rr(l,c,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new Z;let n=2*this.nbCenterLayers,i=new Int32Array([this.sampleLine(e[0],e[1],n),this.sampleLine(e[1],e[2],n),this.sampleLine(e[2],e[3],n),this.sampleLine(e[3],e[0],n)]);this.shift=this.getRotation(i,n);let l=0;for(let d=0;d<4;d++){let m=i[(this.shift+d)%4];this.compact?(l<<=7,l+=m>>1&127):(l<<=10,l+=(m>>2&992)+(m>>1&31))}let c=this.getCorrectedParameterData(l,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)}getRotation(e,n){let i=0;e.forEach((l,c,d)=>{let m=(l>>n-2<<1)+(l&1);i=(i<<3)+m}),i=((i&1)<<11)+(i>>1);for(let l=0;l<4;l++)if(F.bitCount(i^this.EXPECTED_CORNER_BITS[l])<=2)return l;throw new Z}getCorrectedParameterData(e,n){let i,l;n?(i=7,l=2):(i=10,l=4);let c=i-l,d=new Int32Array(i);for(let y=i-1;y>=0;--y)d[y]=e&15,e>>=4;try{new Tt(xe.AZTEC_PARAM).decode(d,c)}catch{throw new Z}let m=0;for(let y=0;y<l;y++)m=(m<<4)+d[y];return m}getBullsEyeCorners(e){let n=e,i=e,l=e,c=e,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let P=this.getFirstDifferent(n,d,1,-1),D=this.getFirstDifferent(i,d,1,1),U=this.getFirstDifferent(l,d,-1,1),$=this.getFirstDifferent(c,d,-1,-1);if(this.nbCenterLayers>2){let te=this.distancePoint($,P)*this.nbCenterLayers/(this.distancePoint(c,n)*(this.nbCenterLayers+2));if(te<.75||te>1.25||!this.isWhiteOrBlackRectangle(P,D,U,$))break}n=P,i=D,l=U,c=$,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Z;this.compact=this.nbCenterLayers===5;let m=new ze(n.getX()+.5,n.getY()-.5),y=new ze(i.getX()+.5,i.getY()+.5),b=new ze(l.getX()-.5,l.getY()+.5),_=new ze(c.getX()-.5,c.getY()-.5);return this.expandSquare([m,y,b,_],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,n,i,l;try{let m=new Ge(this.image).detect();e=m[0],n=m[1],i=m[2],l=m[3]}catch{let y=this.image.getWidth()/2,b=this.image.getHeight()/2;e=this.getFirstDifferent(new wt(y+7,b-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new wt(y+7,b+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new wt(y-7,b+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new wt(y-7,b-7),!1,-1,-1).toResultPoint()}let c=tt.round((e.getX()+l.getX()+n.getX()+i.getX())/4),d=tt.round((e.getY()+l.getY()+n.getY()+i.getY())/4);try{let m=new Ge(this.image,15,c,d).detect();e=m[0],n=m[1],i=m[2],l=m[3]}catch{e=this.getFirstDifferent(new wt(c+7,d-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new wt(c+7,d+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new wt(c-7,d+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new wt(c-7,d-7),!1,-1,-1).toResultPoint()}return c=tt.round((e.getX()+l.getX()+n.getX()+i.getX())/4),d=tt.round((e.getY()+l.getY()+n.getY()+i.getY())/4),new wt(c,d)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,n,i,l,c){let d=Je.getInstance(),m=this.getDimension(),y=m/2-this.nbCenterLayers,b=m/2+this.nbCenterLayers;return d.sampleGrid(e,m,m,y,y,b,y,b,b,y,b,n.getX(),n.getY(),i.getX(),i.getY(),l.getX(),l.getY(),c.getX(),c.getY())}sampleLine(e,n,i){let l=0,c=this.distanceResultPoint(e,n),d=c/i,m=e.getX(),y=e.getY(),b=d*(n.getX()-e.getX())/c,_=d*(n.getY()-e.getY())/c;for(let P=0;P<i;P++)this.image.get(tt.round(m+P*b),tt.round(y+P*_))&&(l|=1<<i-P-1);return l}isWhiteOrBlackRectangle(e,n,i,l){let c=3;e=new wt(e.getX()-c,e.getY()+c),n=new wt(n.getX()-c,n.getY()-c),i=new wt(i.getX()+c,i.getY()-c),l=new wt(l.getX()+c,l.getY()+c);let d=this.getColor(l,e);if(d===0)return!1;let m=this.getColor(e,n);return m!==d||(m=this.getColor(n,i),m!==d)?!1:(m=this.getColor(i,l),m===d)}getColor(e,n){let i=this.distancePoint(e,n),l=(n.getX()-e.getX())/i,c=(n.getY()-e.getY())/i,d=0,m=e.getX(),y=e.getY(),b=this.image.get(e.getX(),e.getY()),_=Math.ceil(i);for(let D=0;D<_;D++)m+=l,y+=c,this.image.get(tt.round(m),tt.round(y))!==b&&d++;let P=d/i;return P>.1&&P<.9?0:P<=.1===b?1:-1}getFirstDifferent(e,n,i,l){let c=e.getX()+i,d=e.getY()+l;for(;this.isValid(c,d)&&this.image.get(c,d)===n;)c+=i,d+=l;for(c-=i,d-=l;this.isValid(c,d)&&this.image.get(c,d)===n;)c+=i;for(c-=i;this.isValid(c,d)&&this.image.get(c,d)===n;)d+=l;return d-=l,new wt(c,d)}expandSquare(e,n,i){let l=i/(2*n),c=e[0].getX()-e[2].getX(),d=e[0].getY()-e[2].getY(),m=(e[0].getX()+e[2].getX())/2,y=(e[0].getY()+e[2].getY())/2,b=new ze(m+l*c,y+l*d),_=new ze(m-l*c,y-l*d);c=e[1].getX()-e[3].getX(),d=e[1].getY()-e[3].getY(),m=(e[1].getX()+e[3].getX())/2,y=(e[1].getY()+e[3].getY())/2;let P=new ze(m+l*c,y+l*d),D=new ze(m-l*c,y-l*d);return[b,P,_,D]}isValid(e,n){return e>=0&&e<this.image.getWidth()&&n>0&&n<this.image.getHeight()}isValidPoint(e){let n=tt.round(e.getX()),i=tt.round(e.getY());return this.isValid(n,i)}distancePoint(e,n){return tt.distance(e.getX(),e.getY(),n.getX(),n.getY())}distanceResultPoint(e,n){return tt.distance(e.getX(),e.getY(),n.getX(),n.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(F.truncDivision(this.nbLayers-4,8)+1)+15}}class Xt{decode(e,n=null){let i=null,l=new Bt(e.getBlackMatrix()),c=null,d=null;try{let _=l.detectMirror(!1);c=_.getPoints(),this.reportFoundResultPoints(n,c),d=new qe().decode(_)}catch(_){i=_}if(d==null)try{let _=l.detectMirror(!0);c=_.getPoints(),this.reportFoundResultPoints(n,c),d=new qe().decode(_)}catch(_){throw i??_}let m=new ae(d.getText(),d.getRawBytes(),d.getNumBits(),c,ee.AZTEC,j.currentTimeMillis()),y=d.getByteSegments();y!=null&&m.putMetadata(Se.BYTE_SEGMENTS,y);let b=d.getECLevel();return b!=null&&m.putMetadata(Se.ERROR_CORRECTION_LEVEL,b),m}reportFoundResultPoints(e,n){if(e!=null){let i=e.get(ne.NEED_RESULT_POINT_CALLBACK);i!=null&&n.forEach((l,c,d)=>{i.foundPossibleResultPoint(l)})}}reset(){}}class Be extends Ce{constructor(e=500){super(new Xt,e)}}class Ie{decode(e,n){try{return this.doDecode(e,n)}catch{if(n&&n.get(ne.TRY_HARDER)===!0&&e.isRotateSupported()){const c=e.rotateCounterClockwise(),d=this.doDecode(c,n),m=d.getResultMetadata();let y=270;m!==null&&m.get(Se.ORIENTATION)===!0&&(y=y+m.get(Se.ORIENTATION)%360),d.putMetadata(Se.ORIENTATION,y);const b=d.getResultPoints();if(b!==null){const _=c.getHeight();for(let P=0;P<b.length;P++)b[P]=new ze(_-b[P].getY()-1,b[P].getX())}return d}else throw new Z}}reset(){}doDecode(e,n){const i=e.getWidth(),l=e.getHeight();let c=new Y(i);const d=n&&n.get(ne.TRY_HARDER)===!0,m=Math.max(1,l>>(d?8:5));let y;d?y=l:y=15;const b=Math.trunc(l/2);for(let _=0;_<y;_++){const P=Math.trunc((_+1)/2),D=(_&1)===0,U=b+m*(D?P:-P);if(U<0||U>=l)break;try{c=e.getBlackRow(U,c)}catch{continue}for(let $=0;$<2;$++){if($===1&&(c.reverse(),n&&n.get(ne.NEED_RESULT_POINT_CALLBACK)===!0)){const te=new Map;n.forEach((oe,he)=>te.set(he,oe)),te.delete(ne.NEED_RESULT_POINT_CALLBACK),n=te}try{const te=this.decodeRow(U,c,n);if($===1){te.putMetadata(Se.ORIENTATION,180);const oe=te.getResultPoints();oe!==null&&(oe[0]=new ze(i-oe[0].getX()-1,oe[0].getY()),oe[1]=new ze(i-oe[1].getX()-1,oe[1].getY()))}return te}catch{}}}throw new Z}static recordPattern(e,n,i){const l=i.length;for(let b=0;b<l;b++)i[b]=0;const c=e.getSize();if(n>=c)throw new Z;let d=!e.get(n),m=0,y=n;for(;y<c;){if(e.get(y)!==d)i[m]++;else{if(++m===l)break;i[m]=1,d=!d}y++}if(!(m===l||m===l-1&&y===c))throw new Z}static recordPatternInReverse(e,n,i){let l=i.length,c=e.get(n);for(;n>0&&l>=0;)e.get(--n)!==c&&(l--,c=!c);if(l>=0)throw new Z;Ie.recordPattern(e,n+1,i)}static patternMatchVariance(e,n,i){const l=e.length;let c=0,d=0;for(let b=0;b<l;b++)c+=e[b],d+=n[b];if(c<d)return Number.POSITIVE_INFINITY;const m=c/d;i*=m;let y=0;for(let b=0;b<l;b++){const _=e[b],P=n[b]*m,D=_>P?_-P:P-_;if(D>i)return Number.POSITIVE_INFINITY;y+=D}return y/c}}class ce extends Ie{static findStartPattern(e){const n=e.getSize(),i=e.getNextSet(0);let l=0,c=Int32Array.from([0,0,0,0,0,0]),d=i,m=!1;const y=6;for(let b=i;b<n;b++)if(e.get(b)!==m)c[l]++;else{if(l===y-1){let _=ce.MAX_AVG_VARIANCE,P=-1;for(let D=ce.CODE_START_A;D<=ce.CODE_START_C;D++){const U=Ie.patternMatchVariance(c,ce.CODE_PATTERNS[D],ce.MAX_INDIVIDUAL_VARIANCE);U<_&&(_=U,P=D)}if(P>=0&&e.isRange(Math.max(0,d-(b-d)/2),d,!1))return Int32Array.from([d,b,P]);d+=c[0]+c[1],c=c.slice(2,c.length-1),c[l-1]=0,c[l]=0,l--}else l++;c[l]=1,m=!m}throw new Z}static decodeCode(e,n,i){Ie.recordPattern(e,i,n);let l=ce.MAX_AVG_VARIANCE,c=-1;for(let d=0;d<ce.CODE_PATTERNS.length;d++){const m=ce.CODE_PATTERNS[d],y=this.patternMatchVariance(n,m,ce.MAX_INDIVIDUAL_VARIANCE);y<l&&(l=y,c=d)}if(c>=0)return c;throw new Z}decodeRow(e,n,i){const l=i&&i.get(ne.ASSUME_GS1)===!0,c=ce.findStartPattern(n),d=c[2];let m=0;const y=new Uint8Array(20);y[m++]=d;let b;switch(d){case ce.CODE_START_A:b=ce.CODE_CODE_A;break;case ce.CODE_START_B:b=ce.CODE_CODE_B;break;case ce.CODE_START_C:b=ce.CODE_CODE_C;break;default:throw new q}let _=!1,P=!1,D="",U=c[0],$=c[1];const te=Int32Array.from([0,0,0,0,0,0]);let oe=0,he=0,Fe=d,Ve=0,Pe=!0,Rt=!1,Et=!1;for(;!_;){const si=P;switch(P=!1,oe=he,he=ce.decodeCode(n,te,$),y[m++]=he,he!==ce.CODE_STOP&&(Pe=!0),he!==ce.CODE_STOP&&(Ve++,Fe+=Ve*he),U=$,$+=te.reduce((ls,la)=>ls+la,0),he){case ce.CODE_START_A:case ce.CODE_START_B:case ce.CODE_START_C:throw new q}switch(b){case ce.CODE_CODE_A:if(he<64)Et===Rt?D+=String.fromCharCode(32+he):D+=String.fromCharCode(32+he+128),Et=!1;else if(he<96)Et===Rt?D+=String.fromCharCode(he-64):D+=String.fromCharCode(he+64),Et=!1;else switch(he!==ce.CODE_STOP&&(Pe=!1),he){case ce.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case ce.CODE_FNC_2:case ce.CODE_FNC_3:break;case ce.CODE_FNC_4_A:!Rt&&Et?(Rt=!0,Et=!1):Rt&&Et?(Rt=!1,Et=!1):Et=!0;break;case ce.CODE_SHIFT:P=!0,b=ce.CODE_CODE_B;break;case ce.CODE_CODE_B:b=ce.CODE_CODE_B;break;case ce.CODE_CODE_C:b=ce.CODE_CODE_C;break;case ce.CODE_STOP:_=!0;break}break;case ce.CODE_CODE_B:if(he<96)Et===Rt?D+=String.fromCharCode(32+he):D+=String.fromCharCode(32+he+128),Et=!1;else switch(he!==ce.CODE_STOP&&(Pe=!1),he){case ce.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case ce.CODE_FNC_2:case ce.CODE_FNC_3:break;case ce.CODE_FNC_4_B:!Rt&&Et?(Rt=!0,Et=!1):Rt&&Et?(Rt=!1,Et=!1):Et=!0;break;case ce.CODE_SHIFT:P=!0,b=ce.CODE_CODE_A;break;case ce.CODE_CODE_A:b=ce.CODE_CODE_A;break;case ce.CODE_CODE_C:b=ce.CODE_CODE_C;break;case ce.CODE_STOP:_=!0;break}break;case ce.CODE_CODE_C:if(he<100)he<10&&(D+="0"),D+=he;else switch(he!==ce.CODE_STOP&&(Pe=!1),he){case ce.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case ce.CODE_CODE_A:b=ce.CODE_CODE_A;break;case ce.CODE_CODE_B:b=ce.CODE_CODE_B;break;case ce.CODE_STOP:_=!0;break}break}si&&(b=b===ce.CODE_CODE_A?ce.CODE_CODE_B:ce.CODE_CODE_A)}const hr=$-U;if($=n.getNextUnset($),!n.isRange($,Math.min(n.getSize(),$+($-U)/2),!1))throw new Z;if(Fe-=Ve*oe,Fe%103!==oe)throw new O;const zr=D.length;if(zr===0)throw new Z;zr>0&&Pe&&(b===ce.CODE_CODE_C?D=D.substring(0,zr-2):D=D.substring(0,zr-1));const Pn=(c[1]+c[0])/2,$t=U+hr/2,yn=y.length,ar=new Uint8Array(yn);for(let si=0;si<yn;si++)ar[si]=y[si];const Bi=[new ze(Pn,e),new ze($t,e)];return new ae(D,ar,0,Bi,ee.CODE_128,new Date().getTime())}}ce.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ce.MAX_AVG_VARIANCE=.25,ce.MAX_INDIVIDUAL_VARIANCE=.7,ce.CODE_SHIFT=98,ce.CODE_CODE_C=99,ce.CODE_CODE_B=100,ce.CODE_CODE_A=101,ce.CODE_FNC_1=102,ce.CODE_FNC_2=97,ce.CODE_FNC_3=96,ce.CODE_FNC_4_A=101,ce.CODE_FNC_4_B=100,ce.CODE_START_A=103,ce.CODE_START_B=104,ce.CODE_START_C=105,ce.CODE_STOP=106;class ft extends Ie{constructor(e=!1,n=!1){super(),this.usingCheckDigit=e,this.extendedMode=n,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,n,i){let l=this.counters;l.fill(0),this.decodeRowResult="";let c=ft.findAsteriskPattern(n,l),d=n.getNextSet(c[1]),m=n.getSize(),y,b;do{ft.recordPattern(n,d,l);let te=ft.toNarrowWidePattern(l);if(te<0)throw new Z;y=ft.patternToChar(te),this.decodeRowResult+=y,b=d;for(let oe of l)d+=oe;d=n.getNextSet(d)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let _=0;for(let te of l)_+=te;let P=d-b-_;if(d!==m&&P*2<_)throw new Z;if(this.usingCheckDigit){let te=this.decodeRowResult.length-1,oe=0;for(let he=0;he<te;he++)oe+=ft.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(he));if(this.decodeRowResult.charAt(te)!==ft.ALPHABET_STRING.charAt(oe%43))throw new O;this.decodeRowResult=this.decodeRowResult.substring(0,te)}if(this.decodeRowResult.length===0)throw new Z;let D;this.extendedMode?D=ft.decodeExtended(this.decodeRowResult):D=this.decodeRowResult;let U=(c[1]+c[0])/2,$=b+_/2;return new ae(D,null,0,[new ze(U,e),new ze($,e)],ee.CODE_39,new Date().getTime())}static findAsteriskPattern(e,n){let i=e.getSize(),l=e.getNextSet(0),c=0,d=l,m=!1,y=n.length;for(let b=l;b<i;b++)if(e.get(b)!==m)n[c]++;else{if(c===y-1){if(this.toNarrowWidePattern(n)===ft.ASTERISK_ENCODING&&e.isRange(Math.max(0,d-Math.floor((b-d)/2)),d,!1))return[d,b];d+=n[0]+n[1],n.copyWithin(0,2,2+c-1),n[c-1]=0,n[c]=0,c--}else c++;n[c]=1,m=!m}throw new Z}static toNarrowWidePattern(e){let n=e.length,i=0,l;do{let c=2147483647;for(let y of e)y<c&&y>i&&(c=y);i=c,l=0;let d=0,m=0;for(let y=0;y<n;y++){let b=e[y];b>i&&(m|=1<<n-1-y,l++,d+=b)}if(l===3){for(let y=0;y<n&&l>0;y++){let b=e[y];if(b>i&&(l--,b*2>=d))return-1}return m}}while(l>3);return-1}static patternToChar(e){for(let n=0;n<ft.CHARACTER_ENCODINGS.length;n++)if(ft.CHARACTER_ENCODINGS[n]===e)return ft.ALPHABET_STRING.charAt(n);if(e===ft.ASTERISK_ENCODING)return"*";throw new Z}static decodeExtended(e){let n=e.length,i="";for(let l=0;l<n;l++){let c=e.charAt(l);if(c==="+"||c==="$"||c==="%"||c==="/"){let d=e.charAt(l+1),m="\0";switch(c){case"+":if(d>="A"&&d<="Z")m=String.fromCharCode(d.charCodeAt(0)+32);else throw new q;break;case"$":if(d>="A"&&d<="Z")m=String.fromCharCode(d.charCodeAt(0)-64);else throw new q;break;case"%":if(d>="A"&&d<="E")m=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")m=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")m=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")m=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")m="\0";else if(d==="V")m="@";else if(d==="W")m="`";else if(d==="X"||d==="Y"||d==="Z")m="";else throw new q;break;case"/":if(d>="A"&&d<="O")m=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")m=":";else throw new q;break}i+=m,l++}else i+=c}return i}}ft.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",ft.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],ft.ASTERISK_ENCODING=148;class ut extends Ie{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,n,i){let l=this.decodeStart(n),c=this.decodeEnd(n),d=new Ee;ut.decodeMiddle(n,l[1],c[0],d);let m=d.toString(),y=null;i!=null&&(y=i.get(ne.ALLOWED_LENGTHS)),y==null&&(y=ut.DEFAULT_ALLOWED_LENGTHS);let b=m.length,_=!1,P=0;for(let $ of y){if(b===$){_=!0;break}$>P&&(P=$)}if(!_&&b>P&&(_=!0),!_)throw new q;const D=[new ze(l[1],e),new ze(c[0],e)];return new ae(m,null,0,D,ee.ITF,new Date().getTime())}static decodeMiddle(e,n,i,l){let c=new Int32Array(10),d=new Int32Array(5),m=new Int32Array(5);for(c.fill(0),d.fill(0),m.fill(0);n<i;){Ie.recordPattern(e,n,c);for(let b=0;b<5;b++){let _=2*b;d[b]=c[_],m[b]=c[_+1]}let y=ut.decodeDigit(d);l.append(y.toString()),y=this.decodeDigit(m),l.append(y.toString()),c.forEach(function(b){n+=b})}}decodeStart(e){let n=ut.skipWhiteSpace(e),i=ut.findGuardPattern(e,n,ut.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(e,i[0]),i}validateQuietZone(e,n){let i=this.narrowLineWidth*10;i=i<n?i:n;for(let l=n-1;i>0&&l>=0&&!e.get(l);l--)i--;if(i!==0)throw new Z}static skipWhiteSpace(e){const n=e.getSize(),i=e.getNextSet(0);if(i===n)throw new Z;return i}decodeEnd(e){e.reverse();try{let n=ut.skipWhiteSpace(e),i;try{i=ut.findGuardPattern(e,n,ut.END_PATTERN_REVERSED[0])}catch(c){c instanceof Z&&(i=ut.findGuardPattern(e,n,ut.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,i[0]);let l=i[0];return i[0]=e.getSize()-i[1],i[1]=e.getSize()-l,i}finally{e.reverse()}}static findGuardPattern(e,n,i){let l=i.length,c=new Int32Array(l),d=e.getSize(),m=!1,y=0,b=n;c.fill(0);for(let _=n;_<d;_++)if(e.get(_)!==m)c[y]++;else{if(y===l-1){if(Ie.patternMatchVariance(c,i,ut.MAX_INDIVIDUAL_VARIANCE)<ut.MAX_AVG_VARIANCE)return[b,_];b+=c[0]+c[1],j.arraycopy(c,2,c,0,y-1),c[y-1]=0,c[y]=0,y--}else y++;c[y]=1,m=!m}throw new Z}static decodeDigit(e){let n=ut.MAX_AVG_VARIANCE,i=-1,l=ut.PATTERNS.length;for(let c=0;c<l;c++){let d=ut.PATTERNS[c],m=Ie.patternMatchVariance(e,d,ut.MAX_INDIVIDUAL_VARIANCE);m<n?(n=m,i=c):m===n&&(i=-1)}if(i>=0)return i%10;throw new Z}}ut.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ut.MAX_AVG_VARIANCE=.38,ut.MAX_INDIVIDUAL_VARIANCE=.5,ut.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ut.START_PATTERN=Int32Array.from([1,1,1,1]),ut.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class xt extends Ie{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let n=!1,i,l=0,c=Int32Array.from([0,0,0]);for(;!n;){c=Int32Array.from([0,0,0]),i=xt.findGuardPattern(e,l,!1,this.START_END_PATTERN,c);let d=i[0];l=i[1];let m=d-(l-d);m>=0&&(n=e.isRange(m,d,!1))}return i}static checkChecksum(e){return xt.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let i=parseInt(e.charAt(n-1),10);return xt.getStandardUPCEANChecksum(e.substring(0,n-1))===i}static getStandardUPCEANChecksum(e){let n=e.length,i=0;for(let l=n-1;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;i+=c}i*=3;for(let l=n-2;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;i+=c}return(1e3-i)%10}static decodeEnd(e,n){return xt.findGuardPattern(e,n,!1,xt.START_END_PATTERN,new Int32Array(xt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,n,i,l){return this.findGuardPattern(e,n,i,l,new Int32Array(l.length))}static findGuardPattern(e,n,i,l,c){let d=e.getSize();n=i?e.getNextUnset(n):e.getNextSet(n);let m=0,y=n,b=l.length,_=i;for(let P=n;P<d;P++)if(e.get(P)!==_)c[m]++;else{if(m===b-1){if(Ie.patternMatchVariance(c,l,xt.MAX_INDIVIDUAL_VARIANCE)<xt.MAX_AVG_VARIANCE)return Int32Array.from([y,P]);y+=c[0]+c[1];let D=c.slice(2,c.length-1);for(let U=0;U<m-1;U++)c[U]=D[U];c[m-1]=0,c[m]=0,m--}else m++;c[m]=1,_=!_}throw new Z}static decodeDigit(e,n,i,l){this.recordPattern(e,i,n);let c=this.MAX_AVG_VARIANCE,d=-1,m=l.length;for(let y=0;y<m;y++){let b=l[y],_=Ie.patternMatchVariance(n,b,xt.MAX_INDIVIDUAL_VARIANCE);_<c&&(c=_,d=y)}if(d>=0)return d;throw new Z}}xt.MAX_AVG_VARIANCE=.48,xt.MAX_INDIVIDUAL_VARIANCE=.7,xt.START_END_PATTERN=Int32Array.from([1,1,1]),xt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),xt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),xt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Yt{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,i){let l=this.decodeRowStringBuffer,c=this.decodeMiddle(n,i,l),d=l.toString(),m=Yt.parseExtensionString(d),y=[new ze((i[0]+i[1])/2,e),new ze(c,e)],b=new ae(d,null,0,y,ee.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&b.putAllMetadata(m),b}decodeMiddle(e,n,i){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),d=n[1],m=0;for(let b=0;b<5&&d<c;b++){let _=xt.decodeDigit(e,l,d,xt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+_%10);for(let P of l)d+=P;_>=10&&(m|=1<<4-b),b!==4&&(d=e.getNextSet(d),d=e.getNextUnset(d))}if(i.length!==5)throw new Z;let y=this.determineCheckDigit(m);if(Yt.extensionChecksum(i.toString())!==y)throw new Z;return d}static extensionChecksum(e){let n=e.length,i=0;for(let l=n-2;l>=0;l-=2)i+=e.charAt(l).charCodeAt(0)-48;i*=3;for(let l=n-1;l>=0;l-=2)i+=e.charAt(l).charCodeAt(0)-48;return i*=3,i%10}determineCheckDigit(e){for(let n=0;n<10;n++)if(e===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new Z}static parseExtensionString(e){if(e.length!==5)return null;let n=Yt.parseExtension5String(e);return n==null?null:new Map([[Se.SUGGESTED_PRICE,n]])}static parseExtension5String(e){let n;switch(e.charAt(0)){case"0":n="";break;case"5":n="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n="";break}let i=parseInt(e.substring(1)),l=(i/100).toString(),c=i%100,d=c<10?"0"+c:c.toString();return n+l+"."+d}}class hn{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,i){let l=this.decodeRowStringBuffer,c=this.decodeMiddle(n,i,l),d=l.toString(),m=hn.parseExtensionString(d),y=[new ze((i[0]+i[1])/2,e),new ze(c,e)],b=new ae(d,null,0,y,ee.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&b.putAllMetadata(m),b}decodeMiddle(e,n,i){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),d=n[1],m=0;for(let y=0;y<2&&d<c;y++){let b=xt.decodeDigit(e,l,d,xt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+b%10);for(let _ of l)d+=_;b>=10&&(m|=1<<1-y),y!==1&&(d=e.getNextSet(d),d=e.getNextUnset(d))}if(i.length!==2)throw new Z;if(parseInt(i.toString())%4!==m)throw new Z;return d}static parseExtensionString(e){return e.length!==2?null:new Map([[Se.ISSUE_NUMBER,parseInt(e)]])}}class ln{static decodeRow(e,n,i){let l=xt.findGuardPattern(n,i,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Yt().decodeRow(e,n,l)}catch{return new hn().decodeRow(e,n,l)}}}ln.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class dt extends xt{constructor(){super(),this.decodeRowStringBuffer="",dt.L_AND_G_PATTERNS=dt.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let n=dt.L_PATTERNS[e-10],i=new Int32Array(n.length);for(let l=0;l<n.length;l++)i[l]=n[n.length-l-1];dt.L_AND_G_PATTERNS[e]=i}}decodeRow(e,n,i){let l=dt.findStartGuardPattern(n),c=i==null?null:i.get(ne.NEED_RESULT_POINT_CALLBACK);if(c!=null){const Pe=new ze((l[0]+l[1])/2,e);c.foundPossibleResultPoint(Pe)}let d=this.decodeMiddle(n,l,this.decodeRowStringBuffer),m=d.rowOffset,y=d.resultString;if(c!=null){const Pe=new ze(m,e);c.foundPossibleResultPoint(Pe)}let b=this.decodeEnd(n,m);if(c!=null){const Pe=new ze((b[0]+b[1])/2,e);c.foundPossibleResultPoint(Pe)}let _=b[1],P=_+(_-b[0]);if(P>=n.getSize()||!n.isRange(_,P,!1))throw new Z;let D=y.toString();if(D.length<8)throw new q;if(!dt.checkChecksum(D))throw new O;let U=(l[1]+l[0])/2,$=(b[1]+b[0])/2,te=this.getBarcodeFormat(),oe=[new ze(U,e),new ze($,e)],he=new ae(D,null,0,oe,te,new Date().getTime()),Fe=0;try{let Pe=ln.decodeRow(e,n,b[1]);he.putMetadata(Se.UPC_EAN_EXTENSION,Pe.getText()),he.putAllMetadata(Pe.getResultMetadata()),he.addResultPoints(Pe.getResultPoints()),Fe=Pe.getText().length}catch{}let Ve=i==null?null:i.get(ne.ALLOWED_EAN_EXTENSIONS);if(Ve!=null){let Pe=!1;for(let Rt in Ve)if(Fe.toString()===Rt){Pe=!0;break}if(!Pe)throw new Z}return he}decodeEnd(e,n){return dt.findGuardPattern(e,n,!1,dt.START_END_PATTERN,new Int32Array(dt.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return dt.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let i=parseInt(e.charAt(n-1),10);return dt.getStandardUPCEANChecksum(e.substring(0,n-1))===i}static getStandardUPCEANChecksum(e){let n=e.length,i=0;for(let l=n-1;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;i+=c}i*=3;for(let l=n-2;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;i+=c}return(1e3-i)%10}}class rn extends dt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,i){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),d=n[1],m=0;for(let b=0;b<6&&d<c;b++){let _=dt.decodeDigit(e,l,d,dt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+_%10);for(let P of l)d+=P;_>=10&&(m|=1<<5-b)}i=rn.determineFirstDigit(i,m),d=dt.findGuardPattern(e,d,!0,dt.MIDDLE_PATTERN,new Int32Array(dt.MIDDLE_PATTERN.length).fill(0))[1];for(let b=0;b<6&&d<c;b++){let _=dt.decodeDigit(e,l,d,dt.L_PATTERNS);i+=String.fromCharCode(48+_);for(let P of l)d+=P}return{rowOffset:d,resultString:i}}getBarcodeFormat(){return ee.EAN_13}static determineFirstDigit(e,n){for(let i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return e=String.fromCharCode(48+i)+e,e;throw new Z}}rn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class cn extends dt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,i){const l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),d=n[1];for(let y=0;y<4&&d<c;y++){let b=dt.decodeDigit(e,l,d,dt.L_PATTERNS);i+=String.fromCharCode(48+b);for(let _ of l)d+=_}d=dt.findGuardPattern(e,d,!0,dt.MIDDLE_PATTERN,new Int32Array(dt.MIDDLE_PATTERN.length).fill(0))[1];for(let y=0;y<4&&d<c;y++){let b=dt.decodeDigit(e,l,d,dt.L_PATTERNS);i+=String.fromCharCode(48+b);for(let _ of l)d+=_}return{rowOffset:d,resultString:i}}getBarcodeFormat(){return ee.EAN_8}}class Fr extends dt{constructor(){super(...arguments),this.ean13Reader=new rn}getBarcodeFormat(){return ee.UPC_A}decode(e,n){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,n,i))}decodeMiddle(e,n,i){return this.ean13Reader.decodeMiddle(e,n,i)}maybeReturnResult(e){let n=e.getText();if(n.charAt(0)==="0"){let i=new ae(n.substring(1),null,null,e.getResultPoints(),ee.UPC_A);return e.getResultMetadata()!=null&&i.putAllMetadata(e.getResultMetadata()),i}else throw new Z}reset(){this.ean13Reader.reset()}}class en extends dt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,n,i){const l=this.decodeMiddleCounters.map(b=>b);l[0]=0,l[1]=0,l[2]=0,l[3]=0;const c=e.getSize();let d=n[1],m=0;for(let b=0;b<6&&d<c;b++){const _=en.decodeDigit(e,l,d,en.L_AND_G_PATTERNS);i+=String.fromCharCode(48+_%10);for(let P of l)d+=P;_>=10&&(m|=1<<5-b)}let y=en.determineNumSysAndCheckDigit(i,m);return{rowOffset:d,resultString:y}}decodeEnd(e,n){return en.findGuardPatternWithoutCounters(e,n,!0,en.MIDDLE_END_PATTERN)}checkChecksum(e){return dt.checkChecksum(en.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,n){for(let i=0;i<=1;i++)for(let l=0;l<10;l++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][l]){let c=String.fromCharCode(48+i),d=String.fromCharCode(48+l);return c+e+d}throw Z.getNotFoundInstance()}getBarcodeFormat(){return ee.UPC_E}static convertUPCEtoUPCA(e){const n=e.slice(1,7).split("").map(c=>c.charCodeAt(0)),i=new Ee;i.append(e.charAt(0));let l=n[5];switch(l){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(l),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(l);break}return e.length>=8&&i.append(e.charAt(7)),i.toString()}}en.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),en.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ni extends Ie{constructor(e){super();let n=e==null?null:e.get(ne.POSSIBLE_FORMATS),i=[];u(n)?(i.push(new rn),i.push(new Fr),i.push(new cn),i.push(new en)):(n.indexOf(ee.EAN_13)>-1&&i.push(new rn),n.indexOf(ee.UPC_A)>-1&&i.push(new Fr),n.indexOf(ee.EAN_8)>-1&&i.push(new cn),n.indexOf(ee.UPC_E)>-1&&i.push(new en)),this.readers=i}decodeRow(e,n,i){for(let l of this.readers)try{const c=l.decodeRow(e,n,i),d=c.getBarcodeFormat()===ee.EAN_13&&c.getText().charAt(0)==="0",m=i==null?null:i.get(ne.POSSIBLE_FORMATS),y=m==null||m.includes(ee.UPC_A);if(d&&y){const b=c.getRawBytes(),_=new ae(c.getText().substring(1),b,b?b.length:null,c.getResultPoints(),ee.UPC_A);return _.putAllMetadata(c.getResultMetadata()),_}return c}catch{}throw new Z}reset(){for(let e of this.readers)e.reset()}}class Wt extends Ie{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,n){for(let i=0;i<n.length;i++)if(Ie.patternMatchVariance(e,n[i],Wt.MAX_INDIVIDUAL_VARIANCE)<Wt.MAX_AVG_VARIANCE)return i;throw new Z}static count(e){return tt.sum(new Int32Array(e))}static increment(e,n){let i=0,l=n[0];for(let c=1;c<e.length;c++)n[c]>l&&(l=n[c],i=c);e[i]++}static decrement(e,n){let i=0,l=n[0];for(let c=1;c<e.length;c++)n[c]<l&&(l=n[c],i=c);e[i]--}static isFinderPattern(e){let n=e[0]+e[1],i=n+e[2]+e[3],l=n/i;if(l>=Wt.MIN_FINDER_PATTERN_RATIO&&l<=Wt.MAX_FINDER_PATTERN_RATIO){let c=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;for(let m of e)m>d&&(d=m),m<c&&(c=m);return d<10*c}return!1}}Wt.MAX_AVG_VARIANCE=.2,Wt.MAX_INDIVIDUAL_VARIANCE=.45,Wt.MIN_FINDER_PATTERN_RATIO=9.5/12,Wt.MAX_FINDER_PATTERN_RATIO=12.5/14;class Nr{constructor(e,n){this.value=e,this.checksumPortion=n}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Nr))return!1;const n=e;return this.value===n.value&&this.checksumPortion===n.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Dn{constructor(e,n,i,l,c){this.value=e,this.startEnd=n,this.value=e,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new ze(i,c)),this.resultPoints.push(new ze(l,c))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof Dn))return!1;const n=e;return this.value===n.value}hashCode(){return this.value}}class Vn{constructor(){}static getRSSvalue(e,n,i){let l=0;for(let y of e)l+=y;let c=0,d=0,m=e.length;for(let y=0;y<m-1;y++){let b;for(b=1,d|=1<<y;b<e[y];b++,d&=~(1<<y)){let _=Vn.combins(l-b-1,m-y-2);if(i&&d===0&&l-b-(m-y-1)>=m-y-1&&(_-=Vn.combins(l-b-(m-y),m-y-2)),m-y-1>1){let P=0;for(let D=l-b-(m-y-2);D>n;D--)P+=Vn.combins(l-b-D-1,m-y-3);_-=P*(m-1-y)}else l-b>n&&_--;c+=_}l-=b}return c}static combins(e,n){let i,l;e-n>n?(l=n,i=e-n):(l=e-n,i=n);let c=1,d=1;for(let m=e;m>i;m--)c*=m,d<=l&&(c/=d,d++);for(;d<=l;)c/=d,d++;return c}}class Qi{static buildBitArray(e){let n=e.length*2-1;e[e.length-1].getRightChar()==null&&(n-=1);let i=12*n,l=new Y(i),c=0,m=e[0].getRightChar().getValue();for(let y=11;y>=0;--y)m&1<<y&&l.set(c),c++;for(let y=1;y<e.length;++y){let b=e[y],_=b.getLeftChar().getValue();for(let P=11;P>=0;--P)_&1<<P&&l.set(c),c++;if(b.getRightChar()!=null){let P=b.getRightChar().getValue();for(let D=11;D>=0;--D)P&1<<D&&l.set(c),c++}}return l}}class wr{constructor(e,n){n?this.decodedInformation=null:(this.finished=e,this.decodedInformation=n)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Ti{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class tn extends Ti{constructor(e,n){super(e),this.value=n}getValue(){return this.value}isFNC1(){return this.value===tn.FNC1}}tn.FNC1="$";class Kn extends Ti{constructor(e,n,i){super(e),i?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=n}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class qn extends Ti{constructor(e,n,i){if(super(e),n<0||n>10||i<0||i>10)throw new q;this.firstDigit=n,this.secondDigit=i}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===qn.FNC1}isSecondDigitFNC1(){return this.secondDigit===qn.FNC1}isAnyFNC1(){return this.firstDigit===qn.FNC1||this.secondDigit===qn.FNC1}}qn.FNC1=10;class Ke{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new Z;let n=e.substring(0,2);for(let c of Ke.TWO_DIGIT_DATA_LENGTH)if(c[0]===n)return c[1]===Ke.VARIABLE_LENGTH?Ke.processVariableAI(2,c[2],e):Ke.processFixedAI(2,c[1],e);if(e.length<3)throw new Z;let i=e.substring(0,3);for(let c of Ke.THREE_DIGIT_DATA_LENGTH)if(c[0]===i)return c[1]===Ke.VARIABLE_LENGTH?Ke.processVariableAI(3,c[2],e):Ke.processFixedAI(3,c[1],e);for(let c of Ke.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(c[0]===i)return c[1]===Ke.VARIABLE_LENGTH?Ke.processVariableAI(4,c[2],e):Ke.processFixedAI(4,c[1],e);if(e.length<4)throw new Z;let l=e.substring(0,4);for(let c of Ke.FOUR_DIGIT_DATA_LENGTH)if(c[0]===l)return c[1]===Ke.VARIABLE_LENGTH?Ke.processVariableAI(4,c[2],e):Ke.processFixedAI(4,c[1],e);throw new Z}static processFixedAI(e,n,i){if(i.length<e)throw new Z;let l=i.substring(0,e);if(i.length<e+n)throw new Z;let c=i.substring(e,e+n),d=i.substring(e+n),m="("+l+")"+c,y=Ke.parseFieldsInGeneralPurpose(d);return y==null?m:m+y}static processVariableAI(e,n,i){let l=i.substring(0,e),c;i.length<e+n?c=i.length:c=e+n;let d=i.substring(e,c),m=i.substring(c),y="("+l+")"+d,b=Ke.parseFieldsInGeneralPurpose(m);return b==null?y:y+b}}Ke.VARIABLE_LENGTH=[],Ke.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ke.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ke.VARIABLE_LENGTH,20],["22",Ke.VARIABLE_LENGTH,29],["30",Ke.VARIABLE_LENGTH,8],["37",Ke.VARIABLE_LENGTH,8],["90",Ke.VARIABLE_LENGTH,30],["91",Ke.VARIABLE_LENGTH,30],["92",Ke.VARIABLE_LENGTH,30],["93",Ke.VARIABLE_LENGTH,30],["94",Ke.VARIABLE_LENGTH,30],["95",Ke.VARIABLE_LENGTH,30],["96",Ke.VARIABLE_LENGTH,30],["97",Ke.VARIABLE_LENGTH,3],["98",Ke.VARIABLE_LENGTH,30],["99",Ke.VARIABLE_LENGTH,30]],Ke.THREE_DIGIT_DATA_LENGTH=[["240",Ke.VARIABLE_LENGTH,30],["241",Ke.VARIABLE_LENGTH,30],["242",Ke.VARIABLE_LENGTH,6],["250",Ke.VARIABLE_LENGTH,30],["251",Ke.VARIABLE_LENGTH,30],["253",Ke.VARIABLE_LENGTH,17],["254",Ke.VARIABLE_LENGTH,20],["400",Ke.VARIABLE_LENGTH,30],["401",Ke.VARIABLE_LENGTH,30],["402",17],["403",Ke.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ke.VARIABLE_LENGTH,20],["421",Ke.VARIABLE_LENGTH,15],["422",3],["423",Ke.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ke.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ke.VARIABLE_LENGTH,15],["391",Ke.VARIABLE_LENGTH,18],["392",Ke.VARIABLE_LENGTH,15],["393",Ke.VARIABLE_LENGTH,18],["703",Ke.VARIABLE_LENGTH,30]],Ke.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ke.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ke.VARIABLE_LENGTH,20],["8003",Ke.VARIABLE_LENGTH,30],["8004",Ke.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ke.VARIABLE_LENGTH,30],["8008",Ke.VARIABLE_LENGTH,12],["8018",18],["8020",Ke.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ke.VARIABLE_LENGTH,70],["8200",Ke.VARIABLE_LENGTH,70]];class Tr{constructor(e){this.buffer=new Ee,this.information=e}decodeAllCodes(e,n){let i=n,l=null;do{let c=this.decodeGeneralPurposeField(i,l),d=Ke.parseFieldsInGeneralPurpose(c.getNewString());if(d!=null&&e.append(d),c.isRemaining()?l=""+c.getRemainingValue():l=null,i===c.getNewPosition())break;i=c.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let n=e;n<e+3;++n)if(this.information.get(n))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let c=this.extractNumericValueFromBitArray(e,4);return c===0?new qn(this.information.getSize(),qn.FNC1,qn.FNC1):new qn(this.information.getSize(),c-1,qn.FNC1)}let n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,l=(n-8)%11;return new qn(e+7,i,l)}extractNumericValueFromBitArray(e,n){return Tr.extractNumericValueFromBitArray(this.information,e,n)}static extractNumericValueFromBitArray(e,n,i){let l=0;for(let c=0;c<i;++c)e.get(n+c)&&(l|=1<<i-c-1);return l}decodeGeneralPurposeField(e,n){this.buffer.setLengthToZero(),n!=null&&this.buffer.append(n),this.current.setPosition(e);let i=this.parseBlocks();return i!=null&&i.isRemaining()?new Kn(this.current.getPosition(),this.buffer.toString(),i.getRemainingValue()):new Kn(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,n;do{let i=this.current.getPosition();if(this.current.isAlpha()?(n=this.parseAlphaBlock(),e=n.isFinished()):this.current.isIsoIec646()?(n=this.parseIsoIec646Block(),e=n.isFinished()):(n=this.parseNumericBlock(),e=n.isFinished()),!(i!==this.current.getPosition())&&!e)break}while(!e);return n.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let n;return e.isSecondDigitFNC1()?n=new Kn(this.current.getPosition(),this.buffer.toString()):n=new Kn(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new wr(!0,n)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let n=new Kn(this.current.getPosition(),this.buffer.toString());return new wr(!0,n)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new wr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new Kn(this.current.getPosition(),this.buffer.toString());return new wr(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new wr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new Kn(this.current.getPosition(),this.buffer.toString());return new wr(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new wr(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+7>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<116)return!0;if(e+8>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(e,8);return l>=232&&l<253}decodeIsoIec646(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new tn(e+5,tn.FNC1);if(n>=5&&n<15)return new tn(e+5,"0"+(n-5));let i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<90)return new tn(e+7,""+(i+1));if(i>=90&&i<116)return new tn(e+7,""+(i+7));let l=this.extractNumericValueFromBitArray(e,8),c;switch(l){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new q}return new tn(e+8,c)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+6>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,6);return i>=16&&i<63}decodeAlphanumeric(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new tn(e+5,tn.FNC1);if(n>=5&&n<15)return new tn(e+5,"0"+(n-5));let i=this.extractNumericValueFromBitArray(e,6);if(i>=32&&i<58)return new tn(e+6,""+(i+33));let l;switch(i){case 58:l="*";break;case 59:l=",";break;case 60:l="-";break;case 61:l=".";break;case 62:l="/";break;default:throw new $e("Decoding invalid alphanumeric value: "+i)}return new tn(e+6,l)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<5&&n+e<this.information.getSize();++n)if(n===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+n))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let n=e;n<e+3;++n)if(this.information.get(n))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<4&&n+e<this.information.getSize();++n)if(this.information.get(e+n))return!1;return!0}}class co{constructor(e){this.information=e,this.generalDecoder=new Tr(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Qn extends co{constructor(e){super(e)}encodeCompressedGtin(e,n){e.append("(01)");let i=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,n,i)}encodeCompressedGtinWithoutAI(e,n,i){for(let l=0;l<4;++l){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*l,10);c/100===0&&e.append("0"),c/10===0&&e.append("0"),e.append(c)}Qn.appendCheckDigit(e,i)}static appendCheckDigit(e,n){let i=0;for(let l=0;l<13;l++){let c=e.charAt(l+n).charCodeAt(0)-48;i+=l&1?c:3*c}i=10-i%10,i===10&&(i=0),e.append(i)}}Qn.GTIN_SIZE=40;class ir extends Qn{constructor(e){super(e)}parseInformation(){let e=new Ee;e.append("(01)");let n=e.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(ir.HEADER_SIZE,4);return e.append(i),this.encodeCompressedGtinWithoutAI(e,ir.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(e,ir.HEADER_SIZE+44)}}ir.HEADER_SIZE=4;class Ii extends co{constructor(e){super(e)}parseInformation(){let e=new Ee;return this.getGeneralDecoder().decodeAllCodes(e,Ii.HEADER_SIZE)}}Ii.HEADER_SIZE=5;class _i extends Qn{constructor(e){super(e)}encodeCompressedWeight(e,n,i){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(e,l);let c=this.checkWeight(l),d=1e5;for(let m=0;m<5;++m)c/d===0&&e.append("0"),d/=10;e.append(c)}}class Ir extends _i{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=Ir.HEADER_SIZE+_i.GTIN_SIZE+Ir.WEIGHT_SIZE)throw new Z;let e=new Ee;return this.encodeCompressedGtin(e,Ir.HEADER_SIZE),this.encodeCompressedWeight(e,Ir.HEADER_SIZE+_i.GTIN_SIZE,Ir.WEIGHT_SIZE),e.toString()}}Ir.HEADER_SIZE=5,Ir.WEIGHT_SIZE=15;class uo extends Ir{constructor(e){super(e)}addWeightCode(e,n){e.append("(3103)")}checkWeight(e){return e}}class Ji extends Ir{constructor(e){super(e)}addWeightCode(e,n){n<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class vr extends Qn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<vr.HEADER_SIZE+Qn.GTIN_SIZE)throw new Z;let e=new Ee;this.encodeCompressedGtin(e,vr.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(vr.HEADER_SIZE+Qn.GTIN_SIZE,vr.LAST_DIGIT_SIZE);e.append("(392"),e.append(n),e.append(")");let i=this.getGeneralDecoder().decodeGeneralPurposeField(vr.HEADER_SIZE+Qn.GTIN_SIZE+vr.LAST_DIGIT_SIZE,null);return e.append(i.getNewString()),e.toString()}}vr.HEADER_SIZE=8,vr.LAST_DIGIT_SIZE=2;class Ln extends Qn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Ln.HEADER_SIZE+Qn.GTIN_SIZE)throw new Z;let e=new Ee;this.encodeCompressedGtin(e,Ln.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(Ln.HEADER_SIZE+Qn.GTIN_SIZE,Ln.LAST_DIGIT_SIZE);e.append("(393"),e.append(n),e.append(")");let i=this.getGeneralDecoder().extractNumericValueFromBitArray(Ln.HEADER_SIZE+Qn.GTIN_SIZE+Ln.LAST_DIGIT_SIZE,Ln.FIRST_THREE_DIGITS_SIZE);i/100==0&&e.append("0"),i/10==0&&e.append("0"),e.append(i);let l=this.getGeneralDecoder().decodeGeneralPurposeField(Ln.HEADER_SIZE+Qn.GTIN_SIZE+Ln.LAST_DIGIT_SIZE+Ln.FIRST_THREE_DIGITS_SIZE,null);return e.append(l.getNewString()),e.toString()}}Ln.HEADER_SIZE=8,Ln.LAST_DIGIT_SIZE=2,Ln.FIRST_THREE_DIGITS_SIZE=10;class Zt extends _i{constructor(e,n,i){super(e),this.dateCode=i,this.firstAIdigits=n}parseInformation(){if(this.getInformation().getSize()!=Zt.HEADER_SIZE+Zt.GTIN_SIZE+Zt.WEIGHT_SIZE+Zt.DATE_SIZE)throw new Z;let e=new Ee;return this.encodeCompressedGtin(e,Zt.HEADER_SIZE),this.encodeCompressedWeight(e,Zt.HEADER_SIZE+Zt.GTIN_SIZE,Zt.WEIGHT_SIZE),this.encodeCompressedDate(e,Zt.HEADER_SIZE+Zt.GTIN_SIZE+Zt.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,n){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,Zt.DATE_SIZE);if(i==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let l=i%32;i/=32;let c=i%12+1;i/=12;let d=i;d/10==0&&e.append("0"),e.append(d),c/10==0&&e.append("0"),e.append(c),l/10==0&&e.append("0"),e.append(l)}addWeightCode(e,n){e.append("("),e.append(this.firstAIdigits),e.append(n/1e5),e.append(")")}checkWeight(e){return e%1e5}}Zt.HEADER_SIZE=8,Zt.WEIGHT_SIZE=20,Zt.DATE_SIZE=16;function fo(k){try{if(k.get(1))return new ir(k);if(!k.get(2))return new Ii(k);switch(Tr.extractNumericValueFromBitArray(k,1,4)){case 4:return new uo(k);case 5:return new Ji(k)}switch(Tr.extractNumericValueFromBitArray(k,1,5)){case 12:return new vr(k);case 13:return new Ln(k)}switch(Tr.extractNumericValueFromBitArray(k,1,7)){case 56:return new Zt(k,"310","11");case 57:return new Zt(k,"320","11");case 58:return new Zt(k,"310","13");case 59:return new Zt(k,"320","13");case 60:return new Zt(k,"310","15");case 61:return new Zt(k,"320","15");case 62:return new Zt(k,"310","17");case 63:return new Zt(k,"320","17")}}catch(e){throw console.log(e),new $e("unknown decoder: "+k)}}class Lt{constructor(e,n,i,l){this.leftchar=e,this.rightchar=n,this.finderpattern=i,this.maybeLast=l}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,n){return e instanceof Lt?Lt.equalsOrNull(e.leftchar,n.leftchar)&&Lt.equalsOrNull(e.rightchar,n.rightchar)&&Lt.equalsOrNull(e.finderpattern,n.finderpattern):!1}static equalsOrNull(e,n){return e===null?n===null:Lt.equals(e,n)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ri{constructor(e,n,i){this.pairs=e,this.rowNumber=n,this.wasReversed=i}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,n){return e instanceof Ri?this.checkEqualitity(e,n)&&e.wasReversed===n.wasReversed:!1}checkEqualitity(e,n){if(!e||!n)return;let i;return e.forEach((l,c)=>{n.forEach(d=>{l.getLeftChar().getValue()===d.getLeftChar().getValue()&&l.getRightChar().getValue()===d.getRightChar().getValue()&&l.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(i=!0)})}),i}}class Ne extends Wt{constructor(e){super(...arguments),this.pairs=new Array(Ne.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,n,i){this.pairs.length=0,this.startFromEven=!1;try{return Ne.constructResult(this.decodeRow2pairs(e,n))}catch(l){this.verbose&&console.log(l)}return this.pairs.length=0,this.startFromEven=!0,Ne.constructResult(this.decodeRow2pairs(e,n))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,n){let i=!1;for(;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,e))}catch(c){if(c instanceof Z){if(!this.pairs.length)throw new Z;i=!0}}if(this.checkChecksum())return this.pairs;let l;if(this.rows.length?l=!0:l=!1,this.storeRow(e,!1),l){let c=this.checkRowsBoolean(!1);if(c!=null||(c=this.checkRowsBoolean(!0),c!=null))return c}throw new Z}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let n=null;try{n=this.checkRows(new Array,0)}catch(i){this.verbose&&console.log(i)}return e&&(this.rows=this.rows.reverse()),n}checkRows(e,n){for(let i=n;i<this.rows.length;i++){let l=this.rows[i];this.pairs.length=0;for(let d of e)this.pairs.push(d.getPairs());if(this.pairs.push(l.getPairs()),!Ne.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let c=new Array(e);c.push(l);try{return this.checkRows(c,i+1)}catch(d){this.verbose&&console.log(d)}}throw new Z}static isValidSequence(e){for(let n of Ne.FINDER_PATTERN_SEQUENCES){if(e.length>n.length)continue;let i=!0;for(let l=0;l<e.length;l++)if(e[l].getFinderPattern().getValue()!=n[l]){i=!1;break}if(i)return!0}return!1}storeRow(e,n){let i=0,l=!1,c=!1;for(;i<this.rows.length;){let d=this.rows[i];if(d.getRowNumber()>e){c=d.isEquivalent(this.pairs);break}l=d.isEquivalent(this.pairs),i++}c||l||Ne.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new Ri(this.pairs,e,n)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,n){for(let i of n)if(i.getPairs().length!==e.length){for(let l of i.getPairs())for(let c of e)if(Lt.equals(l,c))break}}static isPartialRow(e,n){for(let i of n){let l=!0;for(let c of e){let d=!1;for(let m of i.getPairs())if(c.equals(m)){d=!0;break}if(!d){l=!1;break}}if(l)return!0}return!1}getRows(){return this.rows}static constructResult(e){let n=Qi.buildBitArray(e),l=fo(n).parseInformation(),c=e[0].getFinderPattern().getResultPoints(),d=e[e.length-1].getFinderPattern().getResultPoints(),m=[c[0],c[1],d[0],d[1]];return new ae(l,null,null,m,ee.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),n=e.getLeftChar(),i=e.getRightChar();if(i==null)return!1;let l=i.getChecksumPortion(),c=2;for(let m=1;m<this.pairs.size();++m){let y=this.pairs.get(m);l+=y.getLeftChar().getChecksumPortion(),c++;let b=y.getRightChar();b!=null&&(l+=b.getChecksumPortion(),c++)}return l%=211,211*(c-4)+l==n.getValue()}static getNextSecondBar(e,n){let i;return e.get(n)?(i=e.getNextUnset(n),i=e.getNextSet(i)):(i=e.getNextSet(n),i=e.getNextUnset(i)),i}retrieveNextPair(e,n,i){let l=n.length%2==0;this.startFromEven&&(l=!l);let c,d=!0,m=-1;do this.findNextPair(e,n,m),c=this.parseFoundFinderPattern(e,i,l),c==null?m=Ne.getNextSecondBar(e,this.startEnd[0]):d=!1;while(d);let y=this.decodeDataCharacter(e,c,l,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new Z;let b;try{b=this.decodeDataCharacter(e,c,l,!1)}catch(_){b=null,this.verbose&&console.log(_)}return new Lt(y,b,c,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,n,i){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),d;i>=0?d=i:this.isEmptyPair(n)?d=0:d=n[n.length-1].getFinderPattern().getStartEnd()[1];let m=n.length%2!=0;this.startFromEven&&(m=!m);let y=!1;for(;d<c&&(y=!e.get(d),!!y);)d++;let b=0,_=d;for(let P=d;P<c;P++)if(e.get(P)!=y)l[b]++;else{if(b==3){if(m&&Ne.reverseCounters(l),Ne.isFinderPattern(l)){this.startEnd[0]=_,this.startEnd[1]=P;return}m&&Ne.reverseCounters(l),_+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,b--}else b++;l[b]=1,y=!y}throw new Z}static reverseCounters(e){let n=e.length;for(let i=0;i<n/2;++i){let l=e[i];e[i]=e[n-i-1],e[n-i-1]=l}}parseFoundFinderPattern(e,n,i){let l,c,d;if(i){let b=this.startEnd[0]-1;for(;b>=0&&!e.get(b);)b--;b++,l=this.startEnd[0]-b,c=b,d=this.startEnd[1]}else c=this.startEnd[0],d=e.getNextUnset(this.startEnd[1]+1),l=d-this.startEnd[1];let m=this.getDecodeFinderCounters();j.arraycopy(m,0,m,1,m.length-1),m[0]=l;let y;try{y=this.parseFinderValue(m,Ne.FINDER_PATTERNS)}catch{return null}return new Dn(y,[c,d],c,d,n)}decodeDataCharacter(e,n,i,l){let c=this.getDataCharacterCounters();for(let $t=0;$t<c.length;$t++)c[$t]=0;if(l)Ne.recordPatternInReverse(e,n.getStartEnd()[0],c);else{Ne.recordPattern(e,n.getStartEnd()[1],c);for(let $t=0,yn=c.length-1;$t<yn;$t++,yn--){let ar=c[$t];c[$t]=c[yn],c[yn]=ar}}let d=17,m=tt.sum(new Int32Array(c))/d,y=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(m-y)/y>.3)throw new Z;let b=this.getOddCounts(),_=this.getEvenCounts(),P=this.getOddRoundingErrors(),D=this.getEvenRoundingErrors();for(let $t=0;$t<c.length;$t++){let yn=1*c[$t]/m,ar=yn+.5;if(ar<1){if(yn<.3)throw new Z;ar=1}else if(ar>8){if(yn>8.7)throw new Z;ar=8}let Bi=$t/2;$t&1?(_[Bi]=ar,D[Bi]=yn-ar):(b[Bi]=ar,P[Bi]=yn-ar)}this.adjustOddEvenCounts(d);let U=4*n.getValue()+(i?0:2)+(l?0:1)-1,$=0,te=0;for(let $t=b.length-1;$t>=0;$t--){if(Ne.isNotA1left(n,i,l)){let yn=Ne.WEIGHTS[U][2*$t];te+=b[$t]*yn}$+=b[$t]}let oe=0;for(let $t=_.length-1;$t>=0;$t--)if(Ne.isNotA1left(n,i,l)){let yn=Ne.WEIGHTS[U][2*$t+1];oe+=_[$t]*yn}let he=te+oe;if($&1||$>13||$<4)throw new Z;let Fe=(13-$)/2,Ve=Ne.SYMBOL_WIDEST[Fe],Pe=9-Ve,Rt=Vn.getRSSvalue(b,Ve,!0),Et=Vn.getRSSvalue(_,Pe,!1),hr=Ne.EVEN_TOTAL_SUBSET[Fe],zr=Ne.GSUM[Fe],Pn=Rt*hr+Et+zr;return new Nr(Pn,he)}static isNotA1left(e,n,i){return!(e.getValue()==0&&n&&i)}adjustOddEvenCounts(e){let n=tt.sum(new Int32Array(this.getOddCounts())),i=tt.sum(new Int32Array(this.getEvenCounts())),l=!1,c=!1;n>13?c=!0:n<4&&(l=!0);let d=!1,m=!1;i>13?m=!0:i<4&&(d=!0);let y=n+i-e,b=(n&1)==1,_=(i&1)==0;if(y==1)if(b){if(_)throw new Z;c=!0}else{if(!_)throw new Z;m=!0}else if(y==-1)if(b){if(_)throw new Z;l=!0}else{if(!_)throw new Z;d=!0}else if(y==0){if(b){if(!_)throw new Z;n<i?(l=!0,m=!0):(c=!0,d=!0)}else if(_)throw new Z}else throw new Z;if(l){if(c)throw new Z;Ne.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&Ne.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(m)throw new Z;Ne.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&Ne.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ne.SYMBOL_WIDEST=[7,5,4,3,1],Ne.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ne.GSUM=[0,348,1388,2948,3988],Ne.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ne.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ne.FINDER_PAT_A=0,Ne.FINDER_PAT_B=1,Ne.FINDER_PAT_C=2,Ne.FINDER_PAT_D=3,Ne.FINDER_PAT_E=4,Ne.FINDER_PAT_F=5,Ne.FINDER_PATTERN_SEQUENCES=[[Ne.FINDER_PAT_A,Ne.FINDER_PAT_A],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_B,Ne.FINDER_PAT_B],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_C,Ne.FINDER_PAT_B,Ne.FINDER_PAT_D],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_E,Ne.FINDER_PAT_B,Ne.FINDER_PAT_D,Ne.FINDER_PAT_C],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_E,Ne.FINDER_PAT_B,Ne.FINDER_PAT_D,Ne.FINDER_PAT_D,Ne.FINDER_PAT_F],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_E,Ne.FINDER_PAT_B,Ne.FINDER_PAT_D,Ne.FINDER_PAT_E,Ne.FINDER_PAT_F,Ne.FINDER_PAT_F],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_A,Ne.FINDER_PAT_B,Ne.FINDER_PAT_B,Ne.FINDER_PAT_C,Ne.FINDER_PAT_C,Ne.FINDER_PAT_D,Ne.FINDER_PAT_D],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_A,Ne.FINDER_PAT_B,Ne.FINDER_PAT_B,Ne.FINDER_PAT_C,Ne.FINDER_PAT_C,Ne.FINDER_PAT_D,Ne.FINDER_PAT_E,Ne.FINDER_PAT_E],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_A,Ne.FINDER_PAT_B,Ne.FINDER_PAT_B,Ne.FINDER_PAT_C,Ne.FINDER_PAT_C,Ne.FINDER_PAT_D,Ne.FINDER_PAT_E,Ne.FINDER_PAT_F,Ne.FINDER_PAT_F],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_A,Ne.FINDER_PAT_B,Ne.FINDER_PAT_B,Ne.FINDER_PAT_C,Ne.FINDER_PAT_D,Ne.FINDER_PAT_D,Ne.FINDER_PAT_E,Ne.FINDER_PAT_E,Ne.FINDER_PAT_F,Ne.FINDER_PAT_F]],Ne.MAX_PAIRS=11;class Rs extends Nr{constructor(e,n,i){super(e,n),this.count=0,this.finderPattern=i}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Kt extends Wt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,n,i){const l=this.decodePair(n,!1,e,i);Kt.addOrTally(this.possibleLeftPairs,l),n.reverse();let c=this.decodePair(n,!0,e,i);Kt.addOrTally(this.possibleRightPairs,c),n.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1){for(let m of this.possibleRightPairs)if(m.getCount()>1&&Kt.checkChecksum(d,m))return Kt.constructResult(d,m)}throw new Z}static addOrTally(e,n){if(n==null)return;let i=!1;for(let l of e)if(l.getValue()===n.getValue()){l.incrementCount(),i=!0;break}i||e.push(n)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,n){let i=4537077*e.getValue()+n.getValue(),l=new String(i).toString(),c=new Ee;for(let b=13-l.length;b>0;b--)c.append("0");c.append(l);let d=0;for(let b=0;b<13;b++){let _=c.charAt(b).charCodeAt(0)-48;d+=b&1?_:3*_}d=10-d%10,d===10&&(d=0),c.append(d.toString());let m=e.getFinderPattern().getResultPoints(),y=n.getFinderPattern().getResultPoints();return new ae(c.toString(),null,0,[m[0],m[1],y[0],y[1]],ee.RSS_14,new Date().getTime())}static checkChecksum(e,n){let i=(e.getChecksumPortion()+16*n.getChecksumPortion())%79,l=9*e.getFinderPattern().getValue()+n.getFinderPattern().getValue();return l>72&&l--,l>8&&l--,i===l}decodePair(e,n,i,l){try{let c=this.findFinderPattern(e,n),d=this.parseFoundFinderPattern(e,i,n,c),m=l==null?null:l.get(ne.NEED_RESULT_POINT_CALLBACK);if(m!=null){let _=(c[0]+c[1])/2;n&&(_=e.getSize()-1-_),m.foundPossibleResultPoint(new ze(_,i))}let y=this.decodeDataCharacter(e,d,!0),b=this.decodeDataCharacter(e,d,!1);return new Rs(1597*y.getValue()+b.getValue(),y.getChecksumPortion()+4*b.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(e,n,i){let l=this.getDataCharacterCounters();for(let oe=0;oe<l.length;oe++)l[oe]=0;if(i)Ie.recordPatternInReverse(e,n.getStartEnd()[0],l);else{Ie.recordPattern(e,n.getStartEnd()[1]+1,l);for(let oe=0,he=l.length-1;oe<he;oe++,he--){let Fe=l[oe];l[oe]=l[he],l[he]=Fe}}let c=i?16:15,d=tt.sum(new Int32Array(l))/c,m=this.getOddCounts(),y=this.getEvenCounts(),b=this.getOddRoundingErrors(),_=this.getEvenRoundingErrors();for(let oe=0;oe<l.length;oe++){let he=l[oe]/d,Fe=Math.floor(he+.5);Fe<1?Fe=1:Fe>8&&(Fe=8);let Ve=Math.floor(oe/2);oe&1?(y[Ve]=Fe,_[Ve]=he-Fe):(m[Ve]=Fe,b[Ve]=he-Fe)}this.adjustOddEvenCounts(i,c);let P=0,D=0;for(let oe=m.length-1;oe>=0;oe--)D*=9,D+=m[oe],P+=m[oe];let U=0,$=0;for(let oe=y.length-1;oe>=0;oe--)U*=9,U+=y[oe],$+=y[oe];let te=D+3*U;if(i){if(P&1||P>12||P<4)throw new Z;let oe=(12-P)/2,he=Kt.OUTSIDE_ODD_WIDEST[oe],Fe=9-he,Ve=Vn.getRSSvalue(m,he,!1),Pe=Vn.getRSSvalue(y,Fe,!0),Rt=Kt.OUTSIDE_EVEN_TOTAL_SUBSET[oe],Et=Kt.OUTSIDE_GSUM[oe];return new Nr(Ve*Rt+Pe+Et,te)}else{if($&1||$>10||$<4)throw new Z;let oe=(10-$)/2,he=Kt.INSIDE_ODD_WIDEST[oe],Fe=9-he,Ve=Vn.getRSSvalue(m,he,!0),Pe=Vn.getRSSvalue(y,Fe,!1),Rt=Kt.INSIDE_ODD_TOTAL_SUBSET[oe],Et=Kt.INSIDE_GSUM[oe];return new Nr(Pe*Rt+Ve+Et,te)}}findFinderPattern(e,n){let i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;let l=e.getSize(),c=!1,d=0;for(;d<l&&(c=!e.get(d),n!==c);)d++;let m=0,y=d;for(let b=d;b<l;b++)if(e.get(b)!==c)i[m]++;else{if(m===3){if(Wt.isFinderPattern(i))return[y,b];y+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,m--}else m++;i[m]=1,c=!c}throw new Z}parseFoundFinderPattern(e,n,i,l){let c=e.get(l[0]),d=l[0]-1;for(;d>=0&&c!==e.get(d);)d--;d++;const m=l[0]-d,y=this.getDecodeFinderCounters(),b=new Int32Array(y.length);j.arraycopy(y,0,b,1,y.length-1),b[0]=m;const _=this.parseFinderValue(b,Kt.FINDER_PATTERNS);let P=d,D=l[1];return i&&(P=e.getSize()-1-P,D=e.getSize()-1-D),new Dn(_,[d,l[1]],P,D,n)}adjustOddEvenCounts(e,n){let i=tt.sum(new Int32Array(this.getOddCounts())),l=tt.sum(new Int32Array(this.getEvenCounts())),c=!1,d=!1,m=!1,y=!1;e?(i>12?d=!0:i<4&&(c=!0),l>12?y=!0:l<4&&(m=!0)):(i>11?d=!0:i<5&&(c=!0),l>10?y=!0:l<4&&(m=!0));let b=i+l-n,_=(i&1)===(e?1:0),P=(l&1)===1;if(b===1)if(_){if(P)throw new Z;d=!0}else{if(!P)throw new Z;y=!0}else if(b===-1)if(_){if(P)throw new Z;c=!0}else{if(!P)throw new Z;m=!0}else if(b===0){if(_){if(!P)throw new Z;i<l?(c=!0,y=!0):(d=!0,m=!0)}else if(P)throw new Z}else throw new Z;if(c){if(d)throw new Z;Wt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&Wt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(y)throw new Z;Wt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&Wt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Kt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Kt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Kt.OUTSIDE_GSUM=[0,161,961,2015,2715],Kt.INSIDE_GSUM=[0,336,1036,1516],Kt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Kt.INSIDE_ODD_WIDEST=[2,4,6,8],Kt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class hi extends Ie{constructor(e,n){super(),this.readers=[],this.verbose=n===!0;const i=e?e.get(ne.POSSIBLE_FORMATS):null,l=e&&e.get(ne.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;i?((i.includes(ee.EAN_13)||i.includes(ee.UPC_A)||i.includes(ee.EAN_8)||i.includes(ee.UPC_E))&&this.readers.push(new Ni(e)),i.includes(ee.CODE_39)&&this.readers.push(new ft(l)),i.includes(ee.CODE_128)&&this.readers.push(new ce),i.includes(ee.ITF)&&this.readers.push(new ut),i.includes(ee.RSS_14)&&this.readers.push(new Kt),i.includes(ee.RSS_EXPANDED)&&this.readers.push(new Ne(this.verbose))):(this.readers.push(new Ni(e)),this.readers.push(new ft),this.readers.push(new Ni(e)),this.readers.push(new ce),this.readers.push(new ut),this.readers.push(new Kt),this.readers.push(new Ne(this.verbose)))}decodeRow(e,n,i){for(let l=0;l<this.readers.length;l++)try{return this.readers[l].decodeRow(e,n,i)}catch{}throw new Z}reset(){this.readers.forEach(e=>e.reset())}}class ki extends Ce{constructor(e=500,n){super(new hi(n),e,n)}}class Pt{constructor(e,n,i){this.ecCodewords=e,this.ecBlocks=[n],i&&this.ecBlocks.push(i)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class St{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class _t{constructor(e,n,i,l,c,d){this.versionNumber=e,this.symbolSizeRows=n,this.symbolSizeColumns=i,this.dataRegionSizeRows=l,this.dataRegionSizeColumns=c,this.ecBlocks=d;let m=0;const y=d.getECCodewords(),b=d.getECBlocks();for(let _ of b)m+=_.getCount()*(_.getDataCodewords()+y);this.totalCodewords=m}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,n){if(e&1||n&1)throw new q;for(let i of _t.VERSIONS)if(i.symbolSizeRows===e&&i.symbolSizeColumns===n)return i;throw new q}toString(){return""+this.versionNumber}static buildVersions(){return[new _t(1,10,10,8,8,new Pt(5,new St(1,3))),new _t(2,12,12,10,10,new Pt(7,new St(1,5))),new _t(3,14,14,12,12,new Pt(10,new St(1,8))),new _t(4,16,16,14,14,new Pt(12,new St(1,12))),new _t(5,18,18,16,16,new Pt(14,new St(1,18))),new _t(6,20,20,18,18,new Pt(18,new St(1,22))),new _t(7,22,22,20,20,new Pt(20,new St(1,30))),new _t(8,24,24,22,22,new Pt(24,new St(1,36))),new _t(9,26,26,24,24,new Pt(28,new St(1,44))),new _t(10,32,32,14,14,new Pt(36,new St(1,62))),new _t(11,36,36,16,16,new Pt(42,new St(1,86))),new _t(12,40,40,18,18,new Pt(48,new St(1,114))),new _t(13,44,44,20,20,new Pt(56,new St(1,144))),new _t(14,48,48,22,22,new Pt(68,new St(1,174))),new _t(15,52,52,24,24,new Pt(42,new St(2,102))),new _t(16,64,64,14,14,new Pt(56,new St(2,140))),new _t(17,72,72,16,16,new Pt(36,new St(4,92))),new _t(18,80,80,18,18,new Pt(48,new St(4,114))),new _t(19,88,88,20,20,new Pt(56,new St(4,144))),new _t(20,96,96,22,22,new Pt(68,new St(4,174))),new _t(21,104,104,24,24,new Pt(56,new St(6,136))),new _t(22,120,120,18,18,new Pt(68,new St(6,175))),new _t(23,132,132,20,20,new Pt(62,new St(8,163))),new _t(24,144,144,22,22,new Pt(62,new St(8,156),new St(2,155))),new _t(25,8,18,6,16,new Pt(7,new St(1,5))),new _t(26,8,32,6,14,new Pt(11,new St(1,10))),new _t(27,12,26,10,24,new Pt(14,new St(1,16))),new _t(28,12,36,10,16,new Pt(18,new St(1,22))),new _t(29,16,36,14,16,new Pt(24,new St(1,32))),new _t(30,16,48,14,22,new Pt(28,new St(1,49)))]}}_t.VERSIONS=_t.buildVersions();class sr{constructor(e){const n=e.getHeight();if(n<8||n>144||n&1)throw new q;this.version=sr.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Te(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const n=e.getHeight(),i=e.getWidth();return _t.getVersionForDimensions(n,i)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let n=0,i=4,l=0;const c=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth();let m=!1,y=!1,b=!1,_=!1;do if(i===c&&l===0&&!m)e[n++]=this.readCorner1(c,d)&255,i-=2,l+=2,m=!0;else if(i===c-2&&l===0&&d&3&&!y)e[n++]=this.readCorner2(c,d)&255,i-=2,l+=2,y=!0;else if(i===c+4&&l===2&&!(d&7)&&!b)e[n++]=this.readCorner3(c,d)&255,i-=2,l+=2,b=!0;else if(i===c-2&&l===0&&(d&7)===4&&!_)e[n++]=this.readCorner4(c,d)&255,i-=2,l+=2,_=!0;else{do i<c&&l>=0&&!this.readMappingMatrix.get(l,i)&&(e[n++]=this.readUtah(i,l,c,d)&255),i-=2,l+=2;while(i>=0&&l<d);i+=1,l+=3;do i>=0&&l<d&&!this.readMappingMatrix.get(l,i)&&(e[n++]=this.readUtah(i,l,c,d)&255),i+=2,l-=2;while(i<c&&l>=0);i+=3,l+=1}while(i<c||l<d);if(n!==this.version.getTotalCodewords())throw new q;return e}readModule(e,n,i,l){return e<0&&(e+=i,n+=4-(i+4&7)),n<0&&(n+=l,e+=4-(l+4&7)),this.readMappingMatrix.set(n,e),this.mappingBitMatrix.get(n,e)}readUtah(e,n,i,l){let c=0;return this.readModule(e-2,n-2,i,l)&&(c|=1),c<<=1,this.readModule(e-2,n-1,i,l)&&(c|=1),c<<=1,this.readModule(e-1,n-2,i,l)&&(c|=1),c<<=1,this.readModule(e-1,n-1,i,l)&&(c|=1),c<<=1,this.readModule(e-1,n,i,l)&&(c|=1),c<<=1,this.readModule(e,n-2,i,l)&&(c|=1),c<<=1,this.readModule(e,n-1,i,l)&&(c|=1),c<<=1,this.readModule(e,n,i,l)&&(c|=1),c}readCorner1(e,n){let i=0;return this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,1,e,n)&&(i|=1),i<<=1,this.readModule(e-1,2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(2,n-1,e,n)&&(i|=1),i<<=1,this.readModule(3,n-1,e,n)&&(i|=1),i}readCorner2(e,n){let i=0;return this.readModule(e-3,0,e,n)&&(i|=1),i<<=1,this.readModule(e-2,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(0,n-4,e,n)&&(i|=1),i<<=1,this.readModule(0,n-3,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i}readCorner3(e,n){let i=0;return this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(0,n-3,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-3,e,n)&&(i|=1),i<<=1,this.readModule(1,n-2,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i}readCorner4(e,n){let i=0;return this.readModule(e-3,0,e,n)&&(i|=1),i<<=1,this.readModule(e-2,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(2,n-1,e,n)&&(i|=1),i<<=1,this.readModule(3,n-1,e,n)&&(i|=1),i}extractDataRegion(e){const n=this.version.getSymbolSizeRows(),i=this.version.getSymbolSizeColumns();if(e.getHeight()!==n)throw new I("Dimension of bitMatrix must match the version size");const l=this.version.getDataRegionSizeRows(),c=this.version.getDataRegionSizeColumns(),d=n/l|0,m=i/c|0,y=d*l,b=m*c,_=new Te(b,y);for(let P=0;P<d;++P){const D=P*l;for(let U=0;U<m;++U){const $=U*c;for(let te=0;te<l;++te){const oe=P*(l+2)+1+te,he=D+te;for(let Fe=0;Fe<c;++Fe){const Ve=U*(c+2)+1+Fe;if(e.get(Ve,oe)){const Pe=$+Fe;_.set(Pe,he)}}}}}return _}}class ks{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n){const i=n.getECBlocks();let l=0;const c=i.getECBlocks();for(let te of c)l+=te.getCount();const d=new Array(l);let m=0;for(let te of c)for(let oe=0;oe<te.getCount();oe++){const he=te.getDataCodewords(),Fe=i.getECCodewords()+he;d[m++]=new ks(he,new Uint8Array(Fe))}const b=d[0].codewords.length-i.getECCodewords(),_=b-1;let P=0;for(let te=0;te<_;te++)for(let oe=0;oe<m;oe++)d[oe].codewords[te]=e[P++];const D=n.getVersionNumber()===24,U=D?8:m;for(let te=0;te<U;te++)d[te].codewords[b-1]=e[P++];const $=d[0].codewords.length;for(let te=b;te<$;te++)for(let oe=0;oe<m;oe++){const he=D?(oe+8)%m:oe,Fe=D&&he>7?te-1:te;d[he].codewords[Fe]=e[P++]}if(P!==e.length)throw new I;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class es{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new I(""+e);let n=0,i=this.bitOffset,l=this.byteOffset;const c=this.bytes;if(i>0){const d=8-i,m=e<d?e:d,y=d-m,b=255>>8-m<<y;n=(c[l]&b)>>y,e-=m,i+=m,i===8&&(i=0,l++)}if(e>0){for(;e>=8;)n=n<<8|c[l]&255,l++,e-=8;if(e>0){const d=8-e,m=255>>d<<d;n=n<<e|(c[l]&m)>>d,i+=e}}return this.bitOffset=i,this.byteOffset=l,n}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var xn;(function(k){k[k.PAD_ENCODE=0]="PAD_ENCODE",k[k.ASCII_ENCODE=1]="ASCII_ENCODE",k[k.C40_ENCODE=2]="C40_ENCODE",k[k.TEXT_ENCODE=3]="TEXT_ENCODE",k[k.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",k[k.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",k[k.BASE256_ENCODE=6]="BASE256_ENCODE"})(xn||(xn={}));class Cr{static decode(e){const n=new es(e),i=new Ee,l=new Ee,c=new Array;let d=xn.ASCII_ENCODE;do if(d===xn.ASCII_ENCODE)d=this.decodeAsciiSegment(n,i,l);else{switch(d){case xn.C40_ENCODE:this.decodeC40Segment(n,i);break;case xn.TEXT_ENCODE:this.decodeTextSegment(n,i);break;case xn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,i);break;case xn.EDIFACT_ENCODE:this.decodeEdifactSegment(n,i);break;case xn.BASE256_ENCODE:this.decodeBase256Segment(n,i,c);break;default:throw new q}d=xn.ASCII_ENCODE}while(d!==xn.PAD_ENCODE&&n.available()>0);return l.length()>0&&i.append(l.toString()),new Le(e,i.toString(),c.length===0?null:c,null)}static decodeAsciiSegment(e,n,i){let l=!1;do{let c=e.readBits(8);if(c===0)throw new q;if(c<=128)return l&&(c+=128),n.append(String.fromCharCode(c-1)),xn.ASCII_ENCODE;if(c===129)return xn.PAD_ENCODE;if(c<=229){const d=c-130;d<10&&n.append("0"),n.append(""+d)}else switch(c){case 230:return xn.C40_ENCODE;case 231:return xn.BASE256_ENCODE;case 232:n.append("");break;case 233:case 234:break;case 235:l=!0;break;case 236:n.append("[)>05"),i.insert(0,"");break;case 237:n.append("[)>06"),i.insert(0,"");break;case 238:return xn.ANSIX12_ENCODE;case 239:return xn.TEXT_ENCODE;case 240:return xn.EDIFACT_ENCODE;case 241:break;default:if(c!==254||e.available()!==0)throw new q;break}}while(e.available()>0);return xn.ASCII_ENCODE}static decodeC40Segment(e,n){let i=!1;const l=[];let c=0;do{if(e.available()===8)return;const d=e.readBits(8);if(d===254)return;this.parseTwoBytes(d,e.readBits(8),l);for(let m=0;m<3;m++){const y=l[m];switch(c){case 0:if(y<3)c=y+1;else if(y<this.C40_BASIC_SET_CHARS.length){const b=this.C40_BASIC_SET_CHARS[y];i?(n.append(String.fromCharCode(b.charCodeAt(0)+128)),i=!1):n.append(b)}else throw new q;break;case 1:i?(n.append(String.fromCharCode(y+128)),i=!1):n.append(String.fromCharCode(y)),c=0;break;case 2:if(y<this.C40_SHIFT2_SET_CHARS.length){const b=this.C40_SHIFT2_SET_CHARS[y];i?(n.append(String.fromCharCode(b.charCodeAt(0)+128)),i=!1):n.append(b)}else switch(y){case 27:n.append("");break;case 30:i=!0;break;default:throw new q}c=0;break;case 3:i?(n.append(String.fromCharCode(y+224)),i=!1):n.append(String.fromCharCode(y+96)),c=0;break;default:throw new q}}}while(e.available()>0)}static decodeTextSegment(e,n){let i=!1,l=[],c=0;do{if(e.available()===8)return;const d=e.readBits(8);if(d===254)return;this.parseTwoBytes(d,e.readBits(8),l);for(let m=0;m<3;m++){const y=l[m];switch(c){case 0:if(y<3)c=y+1;else if(y<this.TEXT_BASIC_SET_CHARS.length){const b=this.TEXT_BASIC_SET_CHARS[y];i?(n.append(String.fromCharCode(b.charCodeAt(0)+128)),i=!1):n.append(b)}else throw new q;break;case 1:i?(n.append(String.fromCharCode(y+128)),i=!1):n.append(String.fromCharCode(y)),c=0;break;case 2:if(y<this.TEXT_SHIFT2_SET_CHARS.length){const b=this.TEXT_SHIFT2_SET_CHARS[y];i?(n.append(String.fromCharCode(b.charCodeAt(0)+128)),i=!1):n.append(b)}else switch(y){case 27:n.append("");break;case 30:i=!0;break;default:throw new q}c=0;break;case 3:if(y<this.TEXT_SHIFT3_SET_CHARS.length){const b=this.TEXT_SHIFT3_SET_CHARS[y];i?(n.append(String.fromCharCode(b.charCodeAt(0)+128)),i=!1):n.append(b),c=0}else throw new q;break;default:throw new q}}}while(e.available()>0)}static decodeAnsiX12Segment(e,n){const i=[];do{if(e.available()===8)return;const l=e.readBits(8);if(l===254)return;this.parseTwoBytes(l,e.readBits(8),i);for(let c=0;c<3;c++){const d=i[c];switch(d){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(d<14)n.append(String.fromCharCode(d+44));else if(d<40)n.append(String.fromCharCode(d+51));else throw new q;break}}}while(e.available()>0)}static parseTwoBytes(e,n,i){let l=(e<<8)+n-1,c=Math.floor(l/1600);i[0]=c,l-=c*1600,c=Math.floor(l/40),i[1]=c,i[2]=l-c*40}static decodeEdifactSegment(e,n){do{if(e.available()<=16)return;for(let i=0;i<4;i++){let l=e.readBits(6);if(l===31){const c=8-e.getBitOffset();c!==8&&e.readBits(c);return}l&32||(l|=64),n.append(String.fromCharCode(l))}}while(e.available()>0)}static decodeBase256Segment(e,n,i){let l=1+e.getByteOffset();const c=this.unrandomize255State(e.readBits(8),l++);let d;if(c===0?d=e.available()/8|0:c<250?d=c:d=250*(c-249)+this.unrandomize255State(e.readBits(8),l++),d<0)throw new q;const m=new Uint8Array(d);for(let y=0;y<d;y++){if(e.available()<8)throw new q;m[y]=this.unrandomize255State(e.readBits(8),l++)}i.push(m);try{n.append(Re.decode(m,Ae.ISO88591))}catch(y){throw new $e("Platform does not support required encoding: "+y.message)}}static unrandomize255State(e,n){const i=149*n%255+1,l=e-i;return l>=0?l:l+256}}Cr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Cr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Cr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Cr.TEXT_SHIFT2_SET_CHARS=Cr.C40_SHIFT2_SET_CHARS,Cr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class pi{constructor(){this.rsDecoder=new Tt(xe.DATA_MATRIX_FIELD_256)}decode(e){const n=new sr(e),i=n.getVersion(),l=n.readCodewords(),c=ks.getDataBlocks(l,i);let d=0;for(let b of c)d+=b.getNumDataCodewords();const m=new Uint8Array(d),y=c.length;for(let b=0;b<y;b++){const _=c[b],P=_.getCodewords(),D=_.getNumDataCodewords();this.correctErrors(P,D);for(let U=0;U<D;U++)m[U*y+b]=P[U]}return Cr.decode(m)}correctErrors(e,n){const i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-n)}catch{throw new O}for(let l=0;l<n;l++)e[l]=i[l]}}class qt{constructor(e){this.image=e,this.rectangleDetector=new Ge(this.image)}detect(){const e=this.rectangleDetector.detect();let n=this.detectSolid1(e);if(n=this.detectSolid2(n),n[3]=this.correctTopRight(n),!n[3])throw new Z;n=this.shiftToModuleCenter(n);const i=n[0],l=n[1],c=n[2],d=n[3];let m=this.transitionsBetween(i,d)+1,y=this.transitionsBetween(c,d)+1;(m&1)===1&&(m+=1),(y&1)===1&&(y+=1),4*m<7*y&&4*y<7*m&&(m=y=Math.max(m,y));let b=qt.sampleGrid(this.image,i,l,c,d,m,y);return new gn(b,[i,l,c,d])}static shiftPoint(e,n,i){let l=(n.getX()-e.getX())/(i+1),c=(n.getY()-e.getY())/(i+1);return new ze(e.getX()+l,e.getY()+c)}static moveAway(e,n,i){let l=e.getX(),c=e.getY();return l<n?l-=1:l+=1,c<i?c-=1:c+=1,new ze(l,c)}detectSolid1(e){let n=e[0],i=e[1],l=e[3],c=e[2],d=this.transitionsBetween(n,i),m=this.transitionsBetween(i,l),y=this.transitionsBetween(l,c),b=this.transitionsBetween(c,n),_=d,P=[c,n,i,l];return _>m&&(_=m,P[0]=n,P[1]=i,P[2]=l,P[3]=c),_>y&&(_=y,P[0]=i,P[1]=l,P[2]=c,P[3]=n),_>b&&(P[0]=l,P[1]=c,P[2]=n,P[3]=i),P}detectSolid2(e){let n=e[0],i=e[1],l=e[2],c=e[3],d=this.transitionsBetween(n,c),m=qt.shiftPoint(i,l,(d+1)*4),y=qt.shiftPoint(l,i,(d+1)*4),b=this.transitionsBetween(m,n),_=this.transitionsBetween(y,c);return b<_?(e[0]=n,e[1]=i,e[2]=l,e[3]=c):(e[0]=i,e[1]=l,e[2]=c,e[3]=n),e}correctTopRight(e){let n=e[0],i=e[1],l=e[2],c=e[3],d=this.transitionsBetween(n,c),m=this.transitionsBetween(i,c),y=qt.shiftPoint(n,i,(m+1)*4),b=qt.shiftPoint(l,i,(d+1)*4);d=this.transitionsBetween(y,c),m=this.transitionsBetween(b,c);let _=new ze(c.getX()+(l.getX()-i.getX())/(d+1),c.getY()+(l.getY()-i.getY())/(d+1)),P=new ze(c.getX()+(n.getX()-i.getX())/(m+1),c.getY()+(n.getY()-i.getY())/(m+1));if(!this.isValid(_))return this.isValid(P)?P:null;if(!this.isValid(P))return _;let D=this.transitionsBetween(y,_)+this.transitionsBetween(b,_),U=this.transitionsBetween(y,P)+this.transitionsBetween(b,P);return D>U?_:P}shiftToModuleCenter(e){let n=e[0],i=e[1],l=e[2],c=e[3],d=this.transitionsBetween(n,c)+1,m=this.transitionsBetween(l,c)+1,y=qt.shiftPoint(n,i,m*4),b=qt.shiftPoint(l,i,d*4);d=this.transitionsBetween(y,c)+1,m=this.transitionsBetween(b,c)+1,(d&1)===1&&(d+=1),(m&1)===1&&(m+=1);let _=(n.getX()+i.getX()+l.getX()+c.getX())/4,P=(n.getY()+i.getY()+l.getY()+c.getY())/4;n=qt.moveAway(n,_,P),i=qt.moveAway(i,_,P),l=qt.moveAway(l,_,P),c=qt.moveAway(c,_,P);let D,U;return y=qt.shiftPoint(n,i,m*4),y=qt.shiftPoint(y,c,d*4),D=qt.shiftPoint(i,n,m*4),D=qt.shiftPoint(D,l,d*4),b=qt.shiftPoint(l,c,m*4),b=qt.shiftPoint(b,i,d*4),U=qt.shiftPoint(c,l,m*4),U=qt.shiftPoint(U,n,d*4),[y,D,b,U]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,n,i,l,c,d,m){return Je.getInstance().sampleGrid(e,d,m,.5,.5,d-.5,.5,d-.5,m-.5,.5,m-.5,n.getX(),n.getY(),c.getX(),c.getY(),l.getX(),l.getY(),i.getX(),i.getY())}transitionsBetween(e,n){let i=Math.trunc(e.getX()),l=Math.trunc(e.getY()),c=Math.trunc(n.getX()),d=Math.trunc(n.getY()),m=Math.abs(d-l)>Math.abs(c-i);if(m){let te=i;i=l,l=te,te=c,c=d,d=te}let y=Math.abs(c-i),b=Math.abs(d-l),_=-y/2,P=l<d?1:-1,D=i<c?1:-1,U=0,$=this.image.get(m?l:i,m?i:l);for(let te=i,oe=l;te!==c;te+=D){let he=this.image.get(m?oe:te,m?te:oe);if(he!==$&&(U++,$=he),_+=b,_>0){if(oe===d)break;oe+=P,_-=y}}return U}}class fr{constructor(){this.decoder=new pi}decode(e,n=null){let i,l;if(n!=null&&n.has(ne.PURE_BARCODE)){const b=fr.extractPureBits(e.getBlackMatrix());i=this.decoder.decode(b),l=fr.NO_POINTS}else{const b=new qt(e.getBlackMatrix()).detect();i=this.decoder.decode(b.getBits()),l=b.getPoints()}const c=i.getRawBytes(),d=new ae(i.getText(),c,8*c.length,l,ee.DATA_MATRIX,j.currentTimeMillis()),m=i.getByteSegments();m!=null&&d.putMetadata(Se.BYTE_SEGMENTS,m);const y=i.getECLevel();return y!=null&&d.putMetadata(Se.ERROR_CORRECTION_LEVEL,y),d}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(n==null||i==null)throw new Z;const l=this.moduleSize(n,e);let c=n[1];const d=i[1];let m=n[0];const b=(i[0]-m+1)/l,_=(d-c+1)/l;if(b<=0||_<=0)throw new Z;const P=l/2;c+=P,m+=P;const D=new Te(b,_);for(let U=0;U<_;U++){const $=c+U*l;for(let te=0;te<b;te++)e.get(m+te*l,$)&&D.set(te,U)}return D}static moduleSize(e,n){const i=n.getWidth();let l=e[0];const c=e[1];for(;l<i&&n.get(l,c);)l++;if(l===i)throw new Z;const d=l-e[0];if(d===0)throw new Z;return d}}fr.NO_POINTS=[];class qo extends Ce{constructor(e=500){super(new fr,e)}}var Gr;(function(k){k[k.L=0]="L",k[k.M=1]="M",k[k.Q=2]="Q",k[k.H=3]="H"})(Gr||(Gr={}));class Ft{constructor(e,n,i){this.value=e,this.stringValue=n,this.bits=i,Ft.FOR_BITS.set(i,this),Ft.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return Ft.L;case"M":return Ft.M;case"Q":return Ft.Q;case"H":return Ft.H;default:throw new A(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof Ft))return!1;const n=e;return this.value===n.value}static forBits(e){if(e<0||e>=Ft.FOR_BITS.size)throw new I;return Ft.FOR_BITS.get(e)}}Ft.FOR_BITS=new Map,Ft.FOR_VALUE=new Map,Ft.L=new Ft(Gr.L,"L",1),Ft.M=new Ft(Gr.M,"M",0),Ft.Q=new Ft(Gr.Q,"Q",3),Ft.H=new Ft(Gr.H,"H",2);class En{constructor(e){this.errorCorrectionLevel=Ft.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,n){return F.bitCount(e^n)}static decodeFormatInformation(e,n){const i=En.doDecodeFormatInformation(e,n);return i!==null?i:En.doDecodeFormatInformation(e^En.FORMAT_INFO_MASK_QR,n^En.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,n){let i=Number.MAX_SAFE_INTEGER,l=0;for(const c of En.FORMAT_INFO_DECODE_LOOKUP){const d=c[0];if(d===e||d===n)return new En(c[1]);let m=En.numBitsDiffering(e,d);m<i&&(l=c[1],i=m),e!==n&&(m=En.numBitsDiffering(n,d),m<i&&(l=c[1],i=m))}return i<=3?new En(l):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof En))return!1;const n=e;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask}}En.FORMAT_INFO_MASK_QR=21522,En.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class le{constructor(e,...n){this.ecCodewordsPerBlock=e,this.ecBlocks=n}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const n=this.ecBlocks;for(const i of n)e+=i.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class V{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ge{constructor(e,n,...i){this.versionNumber=e,this.alignmentPatternCenters=n,this.ecBlocks=i;let l=0;const c=i[0].getECCodewordsPerBlock(),d=i[0].getECBlocks();for(const m of d)l+=m.getCount()*(m.getDataCodewords()+c);this.totalCodewords=l}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new q;try{return this.getVersionForNumber((e-17)/4)}catch{throw new q}}static getVersionForNumber(e){if(e<1||e>40)throw new I;return ge.VERSIONS[e-1]}static decodeVersionInformation(e){let n=Number.MAX_SAFE_INTEGER,i=0;for(let l=0;l<ge.VERSION_DECODE_INFO.length;l++){const c=ge.VERSION_DECODE_INFO[l];if(c===e)return ge.getVersionForNumber(l+7);const d=En.numBitsDiffering(e,c);d<n&&(i=l+7,n=d)}return n<=3?ge.getVersionForNumber(i):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),n=new Te(e);n.setRegion(0,0,9,9),n.setRegion(e-8,0,8,9),n.setRegion(0,e-8,9,8);const i=this.alignmentPatternCenters.length;for(let l=0;l<i;l++){const c=this.alignmentPatternCenters[l]-2;for(let d=0;d<i;d++)l===0&&(d===0||d===i-1)||l===i-1&&d===0||n.setRegion(this.alignmentPatternCenters[d]-2,c,5,5)}return n.setRegion(6,9,1,e-17),n.setRegion(9,6,e-17,1),this.versionNumber>6&&(n.setRegion(e-11,0,3,6),n.setRegion(0,e-11,6,3)),n}toString(){return""+this.versionNumber}}ge.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ge.VERSIONS=[new ge(1,new Int32Array(0),new le(7,new V(1,19)),new le(10,new V(1,16)),new le(13,new V(1,13)),new le(17,new V(1,9))),new ge(2,Int32Array.from([6,18]),new le(10,new V(1,34)),new le(16,new V(1,28)),new le(22,new V(1,22)),new le(28,new V(1,16))),new ge(3,Int32Array.from([6,22]),new le(15,new V(1,55)),new le(26,new V(1,44)),new le(18,new V(2,17)),new le(22,new V(2,13))),new ge(4,Int32Array.from([6,26]),new le(20,new V(1,80)),new le(18,new V(2,32)),new le(26,new V(2,24)),new le(16,new V(4,9))),new ge(5,Int32Array.from([6,30]),new le(26,new V(1,108)),new le(24,new V(2,43)),new le(18,new V(2,15),new V(2,16)),new le(22,new V(2,11),new V(2,12))),new ge(6,Int32Array.from([6,34]),new le(18,new V(2,68)),new le(16,new V(4,27)),new le(24,new V(4,19)),new le(28,new V(4,15))),new ge(7,Int32Array.from([6,22,38]),new le(20,new V(2,78)),new le(18,new V(4,31)),new le(18,new V(2,14),new V(4,15)),new le(26,new V(4,13),new V(1,14))),new ge(8,Int32Array.from([6,24,42]),new le(24,new V(2,97)),new le(22,new V(2,38),new V(2,39)),new le(22,new V(4,18),new V(2,19)),new le(26,new V(4,14),new V(2,15))),new ge(9,Int32Array.from([6,26,46]),new le(30,new V(2,116)),new le(22,new V(3,36),new V(2,37)),new le(20,new V(4,16),new V(4,17)),new le(24,new V(4,12),new V(4,13))),new ge(10,Int32Array.from([6,28,50]),new le(18,new V(2,68),new V(2,69)),new le(26,new V(4,43),new V(1,44)),new le(24,new V(6,19),new V(2,20)),new le(28,new V(6,15),new V(2,16))),new ge(11,Int32Array.from([6,30,54]),new le(20,new V(4,81)),new le(30,new V(1,50),new V(4,51)),new le(28,new V(4,22),new V(4,23)),new le(24,new V(3,12),new V(8,13))),new ge(12,Int32Array.from([6,32,58]),new le(24,new V(2,92),new V(2,93)),new le(22,new V(6,36),new V(2,37)),new le(26,new V(4,20),new V(6,21)),new le(28,new V(7,14),new V(4,15))),new ge(13,Int32Array.from([6,34,62]),new le(26,new V(4,107)),new le(22,new V(8,37),new V(1,38)),new le(24,new V(8,20),new V(4,21)),new le(22,new V(12,11),new V(4,12))),new ge(14,Int32Array.from([6,26,46,66]),new le(30,new V(3,115),new V(1,116)),new le(24,new V(4,40),new V(5,41)),new le(20,new V(11,16),new V(5,17)),new le(24,new V(11,12),new V(5,13))),new ge(15,Int32Array.from([6,26,48,70]),new le(22,new V(5,87),new V(1,88)),new le(24,new V(5,41),new V(5,42)),new le(30,new V(5,24),new V(7,25)),new le(24,new V(11,12),new V(7,13))),new ge(16,Int32Array.from([6,26,50,74]),new le(24,new V(5,98),new V(1,99)),new le(28,new V(7,45),new V(3,46)),new le(24,new V(15,19),new V(2,20)),new le(30,new V(3,15),new V(13,16))),new ge(17,Int32Array.from([6,30,54,78]),new le(28,new V(1,107),new V(5,108)),new le(28,new V(10,46),new V(1,47)),new le(28,new V(1,22),new V(15,23)),new le(28,new V(2,14),new V(17,15))),new ge(18,Int32Array.from([6,30,56,82]),new le(30,new V(5,120),new V(1,121)),new le(26,new V(9,43),new V(4,44)),new le(28,new V(17,22),new V(1,23)),new le(28,new V(2,14),new V(19,15))),new ge(19,Int32Array.from([6,30,58,86]),new le(28,new V(3,113),new V(4,114)),new le(26,new V(3,44),new V(11,45)),new le(26,new V(17,21),new V(4,22)),new le(26,new V(9,13),new V(16,14))),new ge(20,Int32Array.from([6,34,62,90]),new le(28,new V(3,107),new V(5,108)),new le(26,new V(3,41),new V(13,42)),new le(30,new V(15,24),new V(5,25)),new le(28,new V(15,15),new V(10,16))),new ge(21,Int32Array.from([6,28,50,72,94]),new le(28,new V(4,116),new V(4,117)),new le(26,new V(17,42)),new le(28,new V(17,22),new V(6,23)),new le(30,new V(19,16),new V(6,17))),new ge(22,Int32Array.from([6,26,50,74,98]),new le(28,new V(2,111),new V(7,112)),new le(28,new V(17,46)),new le(30,new V(7,24),new V(16,25)),new le(24,new V(34,13))),new ge(23,Int32Array.from([6,30,54,78,102]),new le(30,new V(4,121),new V(5,122)),new le(28,new V(4,47),new V(14,48)),new le(30,new V(11,24),new V(14,25)),new le(30,new V(16,15),new V(14,16))),new ge(24,Int32Array.from([6,28,54,80,106]),new le(30,new V(6,117),new V(4,118)),new le(28,new V(6,45),new V(14,46)),new le(30,new V(11,24),new V(16,25)),new le(30,new V(30,16),new V(2,17))),new ge(25,Int32Array.from([6,32,58,84,110]),new le(26,new V(8,106),new V(4,107)),new le(28,new V(8,47),new V(13,48)),new le(30,new V(7,24),new V(22,25)),new le(30,new V(22,15),new V(13,16))),new ge(26,Int32Array.from([6,30,58,86,114]),new le(28,new V(10,114),new V(2,115)),new le(28,new V(19,46),new V(4,47)),new le(28,new V(28,22),new V(6,23)),new le(30,new V(33,16),new V(4,17))),new ge(27,Int32Array.from([6,34,62,90,118]),new le(30,new V(8,122),new V(4,123)),new le(28,new V(22,45),new V(3,46)),new le(30,new V(8,23),new V(26,24)),new le(30,new V(12,15),new V(28,16))),new ge(28,Int32Array.from([6,26,50,74,98,122]),new le(30,new V(3,117),new V(10,118)),new le(28,new V(3,45),new V(23,46)),new le(30,new V(4,24),new V(31,25)),new le(30,new V(11,15),new V(31,16))),new ge(29,Int32Array.from([6,30,54,78,102,126]),new le(30,new V(7,116),new V(7,117)),new le(28,new V(21,45),new V(7,46)),new le(30,new V(1,23),new V(37,24)),new le(30,new V(19,15),new V(26,16))),new ge(30,Int32Array.from([6,26,52,78,104,130]),new le(30,new V(5,115),new V(10,116)),new le(28,new V(19,47),new V(10,48)),new le(30,new V(15,24),new V(25,25)),new le(30,new V(23,15),new V(25,16))),new ge(31,Int32Array.from([6,30,56,82,108,134]),new le(30,new V(13,115),new V(3,116)),new le(28,new V(2,46),new V(29,47)),new le(30,new V(42,24),new V(1,25)),new le(30,new V(23,15),new V(28,16))),new ge(32,Int32Array.from([6,34,60,86,112,138]),new le(30,new V(17,115)),new le(28,new V(10,46),new V(23,47)),new le(30,new V(10,24),new V(35,25)),new le(30,new V(19,15),new V(35,16))),new ge(33,Int32Array.from([6,30,58,86,114,142]),new le(30,new V(17,115),new V(1,116)),new le(28,new V(14,46),new V(21,47)),new le(30,new V(29,24),new V(19,25)),new le(30,new V(11,15),new V(46,16))),new ge(34,Int32Array.from([6,34,62,90,118,146]),new le(30,new V(13,115),new V(6,116)),new le(28,new V(14,46),new V(23,47)),new le(30,new V(44,24),new V(7,25)),new le(30,new V(59,16),new V(1,17))),new ge(35,Int32Array.from([6,30,54,78,102,126,150]),new le(30,new V(12,121),new V(7,122)),new le(28,new V(12,47),new V(26,48)),new le(30,new V(39,24),new V(14,25)),new le(30,new V(22,15),new V(41,16))),new ge(36,Int32Array.from([6,24,50,76,102,128,154]),new le(30,new V(6,121),new V(14,122)),new le(28,new V(6,47),new V(34,48)),new le(30,new V(46,24),new V(10,25)),new le(30,new V(2,15),new V(64,16))),new ge(37,Int32Array.from([6,28,54,80,106,132,158]),new le(30,new V(17,122),new V(4,123)),new le(28,new V(29,46),new V(14,47)),new le(30,new V(49,24),new V(10,25)),new le(30,new V(24,15),new V(46,16))),new ge(38,Int32Array.from([6,32,58,84,110,136,162]),new le(30,new V(4,122),new V(18,123)),new le(28,new V(13,46),new V(32,47)),new le(30,new V(48,24),new V(14,25)),new le(30,new V(42,15),new V(32,16))),new ge(39,Int32Array.from([6,26,54,82,110,138,166]),new le(30,new V(20,117),new V(4,118)),new le(28,new V(40,47),new V(7,48)),new le(30,new V(43,24),new V(22,25)),new le(30,new V(10,15),new V(67,16))),new ge(40,Int32Array.from([6,30,58,86,114,142,170]),new le(30,new V(19,118),new V(6,119)),new le(28,new V(18,47),new V(31,48)),new le(30,new V(34,24),new V(34,25)),new le(30,new V(20,15),new V(61,16)))];var He;(function(k){k[k.DATA_MASK_000=0]="DATA_MASK_000",k[k.DATA_MASK_001=1]="DATA_MASK_001",k[k.DATA_MASK_010=2]="DATA_MASK_010",k[k.DATA_MASK_011=3]="DATA_MASK_011",k[k.DATA_MASK_100=4]="DATA_MASK_100",k[k.DATA_MASK_101=5]="DATA_MASK_101",k[k.DATA_MASK_110=6]="DATA_MASK_110",k[k.DATA_MASK_111=7]="DATA_MASK_111"})(He||(He={}));class Ye{constructor(e,n){this.value=e,this.isMasked=n}unmaskBitMatrix(e,n){for(let i=0;i<n;i++)for(let l=0;l<n;l++)this.isMasked(i,l)&&e.flip(l,i)}}Ye.values=new Map([[He.DATA_MASK_000,new Ye(He.DATA_MASK_000,(k,e)=>(k+e&1)===0)],[He.DATA_MASK_001,new Ye(He.DATA_MASK_001,(k,e)=>(k&1)===0)],[He.DATA_MASK_010,new Ye(He.DATA_MASK_010,(k,e)=>e%3===0)],[He.DATA_MASK_011,new Ye(He.DATA_MASK_011,(k,e)=>(k+e)%3===0)],[He.DATA_MASK_100,new Ye(He.DATA_MASK_100,(k,e)=>(Math.floor(k/2)+Math.floor(e/3)&1)===0)],[He.DATA_MASK_101,new Ye(He.DATA_MASK_101,(k,e)=>k*e%6===0)],[He.DATA_MASK_110,new Ye(He.DATA_MASK_110,(k,e)=>k*e%6<3)],[He.DATA_MASK_111,new Ye(He.DATA_MASK_111,(k,e)=>(k+e+k*e%3&1)===0)]]);class at{constructor(e){const n=e.getHeight();if(n<21||(n&3)!==1)throw new q;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let c=0;c<6;c++)e=this.copyBit(c,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let c=5;c>=0;c--)e=this.copyBit(8,c,e);const n=this.bitMatrix.getHeight();let i=0;const l=n-7;for(let c=n-1;c>=l;c--)i=this.copyBit(8,c,i);for(let c=n-8;c<n;c++)i=this.copyBit(c,8,i);if(this.parsedFormatInfo=En.decodeFormatInformation(e,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new q}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),n=Math.floor((e-17)/4);if(n<=6)return ge.getVersionForNumber(n);let i=0;const l=e-11;for(let d=5;d>=0;d--)for(let m=e-9;m>=l;m--)i=this.copyBit(m,d,i);let c=ge.decodeVersionInformation(i);if(c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;i=0;for(let d=5;d>=0;d--)for(let m=e-9;m>=l;m--)i=this.copyBit(d,m,i);if(c=ge.decodeVersionInformation(i),c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;throw new q}copyBit(e,n,i){return(this.isMirror?this.bitMatrix.get(n,e):this.bitMatrix.get(e,n))?i<<1|1:i<<1}readCodewords(){const e=this.readFormatInformation(),n=this.readVersion(),i=Ye.values.get(e.getDataMask()),l=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,l);const c=n.buildFunctionPattern();let d=!0;const m=new Uint8Array(n.getTotalCodewords());let y=0,b=0,_=0;for(let P=l-1;P>0;P-=2){P===6&&P--;for(let D=0;D<l;D++){const U=d?l-1-D:D;for(let $=0;$<2;$++)c.get(P-$,U)||(_++,b<<=1,this.bitMatrix.get(P-$,U)&&(b|=1),_===8&&(m[y++]=b,_=0,b=0))}d=!d}if(y!==n.getTotalCodewords())throw new q;return m}remask(){if(this.parsedFormatInfo===null)return;const e=Ye.values[this.parsedFormatInfo.getDataMask()],n=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,n)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let n=0,i=e.getWidth();n<i;n++)for(let l=n+1,c=e.getHeight();l<c;l++)e.get(n,l)!==e.get(l,n)&&(e.flip(l,n),e.flip(n,l))}}class Dt{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n,i){if(e.length!==n.getTotalCodewords())throw new I;const l=n.getECBlocksForLevel(i);let c=0;const d=l.getECBlocks();for(const $ of d)c+=$.getCount();const m=new Array(c);let y=0;for(const $ of d)for(let te=0;te<$.getCount();te++){const oe=$.getDataCodewords(),he=l.getECCodewordsPerBlock()+oe;m[y++]=new Dt(oe,new Uint8Array(he))}const b=m[0].codewords.length;let _=m.length-1;for(;_>=0&&m[_].codewords.length!==b;)_--;_++;const P=b-l.getECCodewordsPerBlock();let D=0;for(let $=0;$<P;$++)for(let te=0;te<y;te++)m[te].codewords[$]=e[D++];for(let $=_;$<y;$++)m[$].codewords[P]=e[D++];const U=m[0].codewords.length;for(let $=P;$<U;$++)for(let te=0;te<y;te++){const oe=te<_?$:$+1;m[te].codewords[oe]=e[D++]}return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var un;(function(k){k[k.TERMINATOR=0]="TERMINATOR",k[k.NUMERIC=1]="NUMERIC",k[k.ALPHANUMERIC=2]="ALPHANUMERIC",k[k.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",k[k.BYTE=4]="BYTE",k[k.ECI=5]="ECI",k[k.KANJI=6]="KANJI",k[k.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",k[k.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",k[k.HANZI=9]="HANZI"})(un||(un={}));class lt{constructor(e,n,i,l){this.value=e,this.stringValue=n,this.characterCountBitsForVersions=i,this.bits=l,lt.FOR_BITS.set(l,this),lt.FOR_VALUE.set(e,this)}static forBits(e){const n=lt.FOR_BITS.get(e);if(n===void 0)throw new I;return n}getCharacterCountBits(e){const n=e.getVersionNumber();let i;return n<=9?i=0:n<=26?i=1:i=2,this.characterCountBitsForVersions[i]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof lt))return!1;const n=e;return this.value===n.value}toString(){return this.stringValue}}lt.FOR_BITS=new Map,lt.FOR_VALUE=new Map,lt.TERMINATOR=new lt(un.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),lt.NUMERIC=new lt(un.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),lt.ALPHANUMERIC=new lt(un.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),lt.STRUCTURED_APPEND=new lt(un.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),lt.BYTE=new lt(un.BYTE,"BYTE",Int32Array.from([8,16,16]),4),lt.ECI=new lt(un.ECI,"ECI",Int32Array.from([0,0,0]),7),lt.KANJI=new lt(un.KANJI,"KANJI",Int32Array.from([8,10,12]),8),lt.FNC1_FIRST_POSITION=new lt(un.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),lt.FNC1_SECOND_POSITION=new lt(un.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),lt.HANZI=new lt(un.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Qt{static decode(e,n,i,l){const c=new es(e);let d=new Ee;const m=new Array;let y=-1,b=-1;try{let _=null,P=!1,D;do{if(c.available()<4)D=lt.TERMINATOR;else{const U=c.readBits(4);D=lt.forBits(U)}switch(D){case lt.TERMINATOR:break;case lt.FNC1_FIRST_POSITION:case lt.FNC1_SECOND_POSITION:P=!0;break;case lt.STRUCTURED_APPEND:if(c.available()<16)throw new q;y=c.readBits(8),b=c.readBits(8);break;case lt.ECI:const U=Qt.parseECIValue(c);if(_=J.getCharacterSetECIByValue(U),_===null)throw new q;break;case lt.HANZI:const $=c.readBits(4),te=c.readBits(D.getCharacterCountBits(n));$===Qt.GB2312_SUBSET&&Qt.decodeHanziSegment(c,d,te);break;default:const oe=c.readBits(D.getCharacterCountBits(n));switch(D){case lt.NUMERIC:Qt.decodeNumericSegment(c,d,oe);break;case lt.ALPHANUMERIC:Qt.decodeAlphanumericSegment(c,d,oe,P);break;case lt.BYTE:Qt.decodeByteSegment(c,d,oe,_,m,l);break;case lt.KANJI:Qt.decodeKanjiSegment(c,d,oe);break;default:throw new q}break}}while(D!==lt.TERMINATOR)}catch{throw new q}return new Le(e,d.toString(),m.length===0?null:m,i===null?null:i.toString(),y,b)}static decodeHanziSegment(e,n,i){if(i*13>e.available())throw new q;const l=new Uint8Array(2*i);let c=0;for(;i>0;){const d=e.readBits(13);let m=d/96<<8&4294967295|d%96;m<959?m+=41377:m+=42657,l[c]=m>>8&255,l[c+1]=m&255,c+=2,i--}try{n.append(Re.decode(l,Ae.GB2312))}catch(d){throw new q(d)}}static decodeKanjiSegment(e,n,i){if(i*13>e.available())throw new q;const l=new Uint8Array(2*i);let c=0;for(;i>0;){const d=e.readBits(13);let m=d/192<<8&4294967295|d%192;m<7936?m+=33088:m+=49472,l[c]=m>>8,l[c+1]=m,c+=2,i--}try{n.append(Re.decode(l,Ae.SHIFT_JIS))}catch(d){throw new q(d)}}static decodeByteSegment(e,n,i,l,c,d){if(8*i>e.available())throw new q;const m=new Uint8Array(i);for(let b=0;b<i;b++)m[b]=e.readBits(8);let y;l===null?y=Ae.guessEncoding(m,d):y=l.getName();try{n.append(Re.decode(m,y))}catch(b){throw new q(b)}c.push(m)}static toAlphaNumericChar(e){if(e>=Qt.ALPHANUMERIC_CHARS.length)throw new q;return Qt.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,n,i,l){const c=n.length();for(;i>1;){if(e.available()<11)throw new q;const d=e.readBits(11);n.append(Qt.toAlphaNumericChar(Math.floor(d/45))),n.append(Qt.toAlphaNumericChar(d%45)),i-=2}if(i===1){if(e.available()<6)throw new q;n.append(Qt.toAlphaNumericChar(e.readBits(6)))}if(l)for(let d=c;d<n.length();d++)n.charAt(d)==="%"&&(d<n.length()-1&&n.charAt(d+1)==="%"?n.deleteCharAt(d+1):n.setCharAt(d,""))}static decodeNumericSegment(e,n,i){for(;i>=3;){if(e.available()<10)throw new q;const l=e.readBits(10);if(l>=1e3)throw new q;n.append(Qt.toAlphaNumericChar(Math.floor(l/100))),n.append(Qt.toAlphaNumericChar(Math.floor(l/10)%10)),n.append(Qt.toAlphaNumericChar(l%10)),i-=3}if(i===2){if(e.available()<7)throw new q;const l=e.readBits(7);if(l>=100)throw new q;n.append(Qt.toAlphaNumericChar(Math.floor(l/10))),n.append(Qt.toAlphaNumericChar(l%10))}else if(i===1){if(e.available()<4)throw new q;const l=e.readBits(4);if(l>=10)throw new q;n.append(Qt.toAlphaNumericChar(l))}}static parseECIValue(e){const n=e.readBits(8);if(!(n&128))return n&127;if((n&192)===128){const i=e.readBits(8);return(n&63)<<8&4294967295|i}if((n&224)===192){const i=e.readBits(16);return(n&31)<<16&4294967295|i}throw new q}}Qt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Qt.GB2312_SUBSET=1;class ts{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const n=e[0];e[0]=e[2],e[2]=n}}class Pi{constructor(){this.rsDecoder=new Tt(xe.QR_CODE_FIELD_256)}decodeBooleanArray(e,n){return this.decodeBitMatrix(Te.parseFromBooleanArray(e),n)}decodeBitMatrix(e,n){const i=new at(e);let l=null;try{return this.decodeBitMatrixParser(i,n)}catch(c){l=c}try{i.remask(),i.setMirror(!0),i.readVersion(),i.readFormatInformation(),i.mirror();const c=this.decodeBitMatrixParser(i,n);return c.setOther(new ts(!0)),c}catch(c){throw l!==null?l:c}}decodeBitMatrixParser(e,n){const i=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),c=e.readCodewords(),d=Dt.getDataBlocks(c,i,l);let m=0;for(const _ of d)m+=_.getNumDataCodewords();const y=new Uint8Array(m);let b=0;for(const _ of d){const P=_.getCodewords(),D=_.getNumDataCodewords();this.correctErrors(P,D);for(let U=0;U<D;U++)y[b++]=P[U]}return Qt.decode(y,i,l,n)}correctErrors(e,n){const i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-n)}catch{throw new O}for(let l=0;l<n;l++)e[l]=i[l]}}class Mi extends ze{constructor(e,n,i){super(e,n),this.estimatedModuleSize=i}aboutEquals(e,n,i){if(Math.abs(n-this.getY())<=e&&Math.abs(i-this.getX())<=e){const l=Math.abs(e-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(e,n,i){const l=(this.getX()+n)/2,c=(this.getY()+e)/2,d=(this.estimatedModuleSize+i)/2;return new Mi(l,c,d)}}class sn{constructor(e,n,i,l,c,d,m){this.image=e,this.startX=n,this.startY=i,this.width=l,this.height=c,this.moduleSize=d,this.resultPointCallback=m,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,n=this.height,i=this.width,l=e+i,c=this.startY+n/2,d=new Int32Array(3),m=this.image;for(let y=0;y<n;y++){const b=c+(y&1?-Math.floor((y+1)/2):Math.floor((y+1)/2));d[0]=0,d[1]=0,d[2]=0;let _=e;for(;_<l&&!m.get(_,b);)_++;let P=0;for(;_<l;){if(m.get(_,b))if(P===1)d[1]++;else if(P===2){if(this.foundPatternCross(d)){const D=this.handlePossibleCenter(d,b,_);if(D!==null)return D}d[0]=d[2],d[1]=1,d[2]=0,P=1}else d[++P]++;else P===1&&P++,d[P]++;_++}if(this.foundPatternCross(d)){const D=this.handlePossibleCenter(d,b,l);if(D!==null)return D}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Z}static centerFromEnd(e,n){return n-e[2]-e[1]/2}foundPatternCross(e){const n=this.moduleSize,i=n/2;for(let l=0;l<3;l++)if(Math.abs(n-e[l])>=i)return!1;return!0}crossCheckVertical(e,n,i,l){const c=this.image,d=c.getHeight(),m=this.crossCheckStateCount;m[0]=0,m[1]=0,m[2]=0;let y=e;for(;y>=0&&c.get(n,y)&&m[1]<=i;)m[1]++,y--;if(y<0||m[1]>i)return NaN;for(;y>=0&&!c.get(n,y)&&m[0]<=i;)m[0]++,y--;if(m[0]>i)return NaN;for(y=e+1;y<d&&c.get(n,y)&&m[1]<=i;)m[1]++,y++;if(y===d||m[1]>i)return NaN;for(;y<d&&!c.get(n,y)&&m[2]<=i;)m[2]++,y++;if(m[2]>i)return NaN;const b=m[0]+m[1]+m[2];return 5*Math.abs(b-l)>=2*l?NaN:this.foundPatternCross(m)?sn.centerFromEnd(m,y):NaN}handlePossibleCenter(e,n,i){const l=e[0]+e[1]+e[2],c=sn.centerFromEnd(e,i),d=this.crossCheckVertical(n,c,2*e[1],l);if(!isNaN(d)){const m=(e[0]+e[1]+e[2])/3;for(const b of this.possibleCenters)if(b.aboutEquals(m,d,c))return b.combineEstimate(d,c,m);const y=new Mi(c,d,m);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null}}class Sn extends ze{constructor(e,n,i,l){super(e,n),this.estimatedModuleSize=i,this.count=l,l===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,n,i){if(Math.abs(n-this.getY())<=e&&Math.abs(i-this.getX())<=e){const l=Math.abs(e-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(e,n,i){const l=this.count+1,c=(this.count*this.getX()+n)/l,d=(this.count*this.getY()+e)/l,m=(this.count*this.estimatedModuleSize+i)/l;return new Sn(c,d,m,l)}}class _r{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Vt{constructor(e,n){this.image=e,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const n=e!=null&&e.get(ne.TRY_HARDER)!==void 0,i=e!=null&&e.get(ne.PURE_BARCODE)!==void 0,l=this.image,c=l.getHeight(),d=l.getWidth();let m=Math.floor(3*c/(4*Vt.MAX_MODULES));(m<Vt.MIN_SKIP||n)&&(m=Vt.MIN_SKIP);let y=!1;const b=new Int32Array(5);for(let P=m-1;P<c&&!y;P+=m){b[0]=0,b[1]=0,b[2]=0,b[3]=0,b[4]=0;let D=0;for(let U=0;U<d;U++)if(l.get(U,P))(D&1)===1&&D++,b[D]++;else if(D&1)b[D]++;else if(D===4)if(Vt.foundPatternCross(b)){if(this.handlePossibleCenter(b,P,U,i)===!0)if(m=2,this.hasSkipped===!0)y=this.haveMultiplyConfirmedCenters();else{const te=this.findRowSkip();te>b[2]&&(P+=te-b[2]-m,U=d-1)}else{b[0]=b[2],b[1]=b[3],b[2]=b[4],b[3]=1,b[4]=0,D=3;continue}D=0,b[0]=0,b[1]=0,b[2]=0,b[3]=0,b[4]=0}else b[0]=b[2],b[1]=b[3],b[2]=b[4],b[3]=1,b[4]=0,D=3;else b[++D]++;Vt.foundPatternCross(b)&&this.handlePossibleCenter(b,P,d,i)===!0&&(m=b[0],this.hasSkipped&&(y=this.haveMultiplyConfirmedCenters()))}const _=this.selectBestPatterns();return ze.orderBestPatterns(_),new _r(_)}static centerFromEnd(e,n){return n-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let n=0;for(let c=0;c<5;c++){const d=e[c];if(d===0)return!1;n+=d}if(n<7)return!1;const i=n/7,l=i/2;return Math.abs(i-e[0])<l&&Math.abs(i-e[1])<l&&Math.abs(3*i-e[2])<3*l&&Math.abs(i-e[3])<l&&Math.abs(i-e[4])<l}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,n,i,l){const c=this.getCrossCheckStateCount();let d=0;const m=this.image;for(;e>=d&&n>=d&&m.get(n-d,e-d);)c[2]++,d++;if(e<d||n<d)return!1;for(;e>=d&&n>=d&&!m.get(n-d,e-d)&&c[1]<=i;)c[1]++,d++;if(e<d||n<d||c[1]>i)return!1;for(;e>=d&&n>=d&&m.get(n-d,e-d)&&c[0]<=i;)c[0]++,d++;if(c[0]>i)return!1;const y=m.getHeight(),b=m.getWidth();for(d=1;e+d<y&&n+d<b&&m.get(n+d,e+d);)c[2]++,d++;if(e+d>=y||n+d>=b)return!1;for(;e+d<y&&n+d<b&&!m.get(n+d,e+d)&&c[3]<i;)c[3]++,d++;if(e+d>=y||n+d>=b||c[3]>=i)return!1;for(;e+d<y&&n+d<b&&m.get(n+d,e+d)&&c[4]<i;)c[4]++,d++;if(c[4]>=i)return!1;const _=c[0]+c[1]+c[2]+c[3]+c[4];return Math.abs(_-l)<2*l&&Vt.foundPatternCross(c)}crossCheckVertical(e,n,i,l){const c=this.image,d=c.getHeight(),m=this.getCrossCheckStateCount();let y=e;for(;y>=0&&c.get(n,y);)m[2]++,y--;if(y<0)return NaN;for(;y>=0&&!c.get(n,y)&&m[1]<=i;)m[1]++,y--;if(y<0||m[1]>i)return NaN;for(;y>=0&&c.get(n,y)&&m[0]<=i;)m[0]++,y--;if(m[0]>i)return NaN;for(y=e+1;y<d&&c.get(n,y);)m[2]++,y++;if(y===d)return NaN;for(;y<d&&!c.get(n,y)&&m[3]<i;)m[3]++,y++;if(y===d||m[3]>=i)return NaN;for(;y<d&&c.get(n,y)&&m[4]<i;)m[4]++,y++;if(m[4]>=i)return NaN;const b=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(b-l)>=2*l?NaN:Vt.foundPatternCross(m)?Vt.centerFromEnd(m,y):NaN}crossCheckHorizontal(e,n,i,l){const c=this.image,d=c.getWidth(),m=this.getCrossCheckStateCount();let y=e;for(;y>=0&&c.get(y,n);)m[2]++,y--;if(y<0)return NaN;for(;y>=0&&!c.get(y,n)&&m[1]<=i;)m[1]++,y--;if(y<0||m[1]>i)return NaN;for(;y>=0&&c.get(y,n)&&m[0]<=i;)m[0]++,y--;if(m[0]>i)return NaN;for(y=e+1;y<d&&c.get(y,n);)m[2]++,y++;if(y===d)return NaN;for(;y<d&&!c.get(y,n)&&m[3]<i;)m[3]++,y++;if(y===d||m[3]>=i)return NaN;for(;y<d&&c.get(y,n)&&m[4]<i;)m[4]++,y++;if(m[4]>=i)return NaN;const b=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(b-l)>=l?NaN:Vt.foundPatternCross(m)?Vt.centerFromEnd(m,y):NaN}handlePossibleCenter(e,n,i,l){const c=e[0]+e[1]+e[2]+e[3]+e[4];let d=Vt.centerFromEnd(e,i),m=this.crossCheckVertical(n,Math.floor(d),e[2],c);if(!isNaN(m)&&(d=this.crossCheckHorizontal(Math.floor(d),Math.floor(m),e[2],c),!isNaN(d)&&(!l||this.crossCheckDiagonal(Math.floor(m),Math.floor(d),e[2],c)))){const y=c/7;let b=!1;const _=this.possibleCenters;for(let P=0,D=_.length;P<D;P++){const U=_[P];if(U.aboutEquals(y,m,d)){_[P]=U.combineEstimate(m,d,y),b=!0;break}}if(!b){const P=new Sn(d,m,y);_.push(P),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(P)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let n=null;for(const i of this.possibleCenters)if(i.getCount()>=Vt.CENTER_QUORUM)if(n==null)n=i;else return this.hasSkipped=!0,Math.floor((Math.abs(n.getX()-i.getX())-Math.abs(n.getY()-i.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,n=0;const i=this.possibleCenters.length;for(const d of this.possibleCenters)d.getCount()>=Vt.CENTER_QUORUM&&(e++,n+=d.getEstimatedModuleSize());if(e<3)return!1;const l=n/i;let c=0;for(const d of this.possibleCenters)c+=Math.abs(d.getEstimatedModuleSize()-l);return c<=.05*n}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new Z;const n=this.possibleCenters;let i;if(e>3){let l=0,c=0;for(const y of this.possibleCenters){const b=y.getEstimatedModuleSize();l+=b,c+=b*b}i=l/e;let d=Math.sqrt(c/e-i*i);n.sort((y,b)=>{const _=Math.abs(b.getEstimatedModuleSize()-i),P=Math.abs(y.getEstimatedModuleSize()-i);return _<P?-1:_>P?1:0});const m=Math.max(.2*i,d);for(let y=0;y<n.length&&n.length>3;y++){const b=n[y];Math.abs(b.getEstimatedModuleSize()-i)>m&&(n.splice(y,1),y--)}}if(n.length>3){let l=0;for(const c of n)l+=c.getEstimatedModuleSize();i=l/n.length,n.sort((c,d)=>{if(d.getCount()===c.getCount()){const m=Math.abs(d.getEstimatedModuleSize()-i),y=Math.abs(c.getEstimatedModuleSize()-i);return m<y?1:m>y?-1:0}else return d.getCount()-c.getCount()}),n.splice(3)}return[n[0],n[1],n[2]]}}Vt.CENTER_QUORUM=2,Vt.MIN_SKIP=3,Vt.MAX_MODULES=57;class zn{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(ne.NEED_RESULT_POINT_CALLBACK);const i=new Vt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(i)}processFinderPatternInfo(e){const n=e.getTopLeft(),i=e.getTopRight(),l=e.getBottomLeft(),c=this.calculateModuleSize(n,i,l);if(c<1)throw new Z("No pattern found in proccess finder.");const d=zn.computeDimension(n,i,l,c),m=ge.getProvisionalVersionForDimension(d),y=m.getDimensionForVersion()-7;let b=null;if(m.getAlignmentPatternCenters().length>0){const U=i.getX()-n.getX()+l.getX(),$=i.getY()-n.getY()+l.getY(),te=1-3/y,oe=Math.floor(n.getX()+te*(U-n.getX())),he=Math.floor(n.getY()+te*($-n.getY()));for(let Fe=4;Fe<=16;Fe<<=1)try{b=this.findAlignmentInRegion(c,oe,he,Fe);break}catch(Ve){if(!(Ve instanceof Z))throw Ve}}const _=zn.createTransform(n,i,l,b,d),P=zn.sampleGrid(this.image,_,d);let D;return b===null?D=[l,n,i]:D=[l,n,i,b],new gn(P,D)}static createTransform(e,n,i,l,c){const d=c-3.5;let m,y,b,_;return l!==null?(m=l.getX(),y=l.getY(),b=d-3,_=b):(m=n.getX()-e.getX()+i.getX(),y=n.getY()-e.getY()+i.getY(),b=d,_=d),Ue.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,b,_,3.5,d,e.getX(),e.getY(),n.getX(),n.getY(),m,y,i.getX(),i.getY())}static sampleGrid(e,n,i){return Je.getInstance().sampleGridWithTransform(e,i,i,n)}static computeDimension(e,n,i,l){const c=tt.round(ze.distance(e,n)/l),d=tt.round(ze.distance(e,i)/l);let m=Math.floor((c+d)/2)+7;switch(m&3){case 0:m++;break;case 2:m--;break;case 3:throw new Z("Dimensions could be not found.")}return m}calculateModuleSize(e,n,i){return(this.calculateModuleSizeOneWay(e,n)+this.calculateModuleSizeOneWay(e,i))/2}calculateModuleSizeOneWay(e,n){const i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(n.getX()),Math.floor(n.getY())),l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(i)?l/7:isNaN(l)?i/7:(i+l)/14}sizeOfBlackWhiteBlackRunBothWays(e,n,i,l){let c=this.sizeOfBlackWhiteBlackRun(e,n,i,l),d=1,m=e-(i-e);m<0?(d=e/(e-m),m=0):m>=this.image.getWidth()&&(d=(this.image.getWidth()-1-e)/(m-e),m=this.image.getWidth()-1);let y=Math.floor(n-(l-n)*d);return d=1,y<0?(d=n/(n-y),y=0):y>=this.image.getHeight()&&(d=(this.image.getHeight()-1-n)/(y-n),y=this.image.getHeight()-1),m=Math.floor(e+(m-e)*d),c+=this.sizeOfBlackWhiteBlackRun(e,n,m,y),c-1}sizeOfBlackWhiteBlackRun(e,n,i,l){const c=Math.abs(l-n)>Math.abs(i-e);if(c){let U=e;e=n,n=U,U=i,i=l,l=U}const d=Math.abs(i-e),m=Math.abs(l-n);let y=-d/2;const b=e<i?1:-1,_=n<l?1:-1;let P=0;const D=i+b;for(let U=e,$=n;U!==D;U+=b){const te=c?$:U,oe=c?U:$;if(P===1===this.image.get(te,oe)){if(P===2)return tt.distance(U,$,e,n);P++}if(y+=m,y>0){if($===l)break;$+=_,y-=d}}return P===2?tt.distance(i+b,l,e,n):NaN}findAlignmentInRegion(e,n,i,l){const c=Math.floor(l*e),d=Math.max(0,n-c),m=Math.min(this.image.getWidth()-1,n+c);if(m-d<e*3)throw new Z("Alignment top exceeds estimated module size.");const y=Math.max(0,i-c),b=Math.min(this.image.getHeight()-1,i+c);if(b-y<e*3)throw new Z("Alignment bottom exceeds estimated module size.");return new sn(this.image,d,y,m-d,b-y,e,this.resultPointCallback).find()}}class Un{constructor(){this.decoder=new Pi}getDecoder(){return this.decoder}decode(e,n){let i,l;if(n!=null&&n.get(ne.PURE_BARCODE)!==void 0){const y=Un.extractPureBits(e.getBlackMatrix());i=this.decoder.decodeBitMatrix(y,n),l=Un.NO_POINTS}else{const y=new zn(e.getBlackMatrix()).detect(n);i=this.decoder.decodeBitMatrix(y.getBits(),n),l=y.getPoints()}i.getOther()instanceof ts&&i.getOther().applyMirroredCorrection(l);const c=new ae(i.getText(),i.getRawBytes(),void 0,l,ee.QR_CODE,void 0),d=i.getByteSegments();d!==null&&c.putMetadata(Se.BYTE_SEGMENTS,d);const m=i.getECLevel();return m!==null&&c.putMetadata(Se.ERROR_CORRECTION_LEVEL,m),i.hasStructuredAppend()&&(c.putMetadata(Se.STRUCTURED_APPEND_SEQUENCE,i.getStructuredAppendSequenceNumber()),c.putMetadata(Se.STRUCTURED_APPEND_PARITY,i.getStructuredAppendParity())),c}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(n===null||i===null)throw new Z;const l=this.moduleSize(n,e);let c=n[1],d=i[1],m=n[0],y=i[0];if(m>=y||c>=d)throw new Z;if(d-c!==y-m&&(y=m+(d-c),y>=e.getWidth()))throw new Z;const b=Math.round((y-m+1)/l),_=Math.round((d-c+1)/l);if(b<=0||_<=0)throw new Z;if(_!==b)throw new Z;const P=Math.floor(l/2);c+=P,m+=P;const D=m+Math.floor((b-1)*l)-y;if(D>0){if(D>P)throw new Z;m-=D}const U=c+Math.floor((_-1)*l)-d;if(U>0){if(U>P)throw new Z;c-=U}const $=new Te(b,_);for(let te=0;te<_;te++){const oe=c+Math.floor(te*l);for(let he=0;he<b;he++)e.get(m+Math.floor(he*l),oe)&&$.set(he,te)}return $}static moduleSize(e,n){const i=n.getHeight(),l=n.getWidth();let c=e[0],d=e[1],m=!0,y=0;for(;c<l&&d<i;){if(m!==n.get(c,d)){if(++y===5)break;m=!m}c++,d++}if(c===l||d===i)throw new Z;return(c-e[0])/7}}Un.NO_POINTS=new Array;class gt{PDF417Common(){}static getBitCountSum(e){return tt.sum(e)}static toIntArray(e){if(e==null||!e.length)return gt.EMPTY_INT_ARRAY;const n=new Int32Array(e.length);let i=0;for(const l of e)n[i++]=l;return n}static getCodeword(e){const n=z.binarySearch(gt.SYMBOL_TABLE,e&262143);return n<0?-1:(gt.CODEWORD_TABLE[n]-1)%gt.NUMBER_OF_CODEWORDS}}gt.NUMBER_OF_CODEWORDS=929,gt.MAX_CODEWORDS_IN_BARCODE=gt.NUMBER_OF_CODEWORDS-1,gt.MIN_ROWS_IN_BARCODE=3,gt.MAX_ROWS_IN_BARCODE=90,gt.MODULES_IN_CODEWORD=17,gt.MODULES_IN_STOP_PATTERN=18,gt.BARS_IN_MODULE=8,gt.EMPTY_INT_ARRAY=new Int32Array([]),gt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),gt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class sl{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class bt{static detectMultiple(e,n,i){let l=e.getBlackMatrix(),c=bt.detect(i,l);return c.length||(l=l.clone(),l.rotate180(),c=bt.detect(i,l)),new sl(l,c)}static detect(e,n){const i=new Array;let l=0,c=0,d=!1;for(;l<n.getHeight();){const m=bt.findVertices(n,l,c);if(m[0]==null&&m[3]==null){if(!d)break;d=!1,c=0;for(const y of i)y[1]!=null&&(l=Math.trunc(Math.max(l,y[1].getY()))),y[3]!=null&&(l=Math.max(l,Math.trunc(y[3].getY())));l+=bt.ROW_STEP;continue}if(d=!0,i.push(m),!e)break;m[2]!=null?(c=Math.trunc(m[2].getX()),l=Math.trunc(m[2].getY())):(c=Math.trunc(m[4].getX()),l=Math.trunc(m[4].getY()))}return i}static findVertices(e,n,i){const l=e.getHeight(),c=e.getWidth(),d=new Array(8);return bt.copyToResult(d,bt.findRowsWithPattern(e,l,c,n,i,bt.START_PATTERN),bt.INDEXES_START_PATTERN),d[4]!=null&&(i=Math.trunc(d[4].getX()),n=Math.trunc(d[4].getY())),bt.copyToResult(d,bt.findRowsWithPattern(e,l,c,n,i,bt.STOP_PATTERN),bt.INDEXES_STOP_PATTERN),d}static copyToResult(e,n,i){for(let l=0;l<i.length;l++)e[i[l]]=n[l]}static findRowsWithPattern(e,n,i,l,c,d){const m=new Array(4);let y=!1;const b=new Int32Array(d.length);for(;l<n;l+=bt.ROW_STEP){let P=bt.findGuardPattern(e,c,l,i,!1,d,b);if(P!=null){for(;l>0;){const D=bt.findGuardPattern(e,c,--l,i,!1,d,b);if(D!=null)P=D;else{l++;break}}m[0]=new ze(P[0],l),m[1]=new ze(P[1],l),y=!0;break}}let _=l+1;if(y){let P=0,D=Int32Array.from([Math.trunc(m[0].getX()),Math.trunc(m[1].getX())]);for(;_<n;_++){const U=bt.findGuardPattern(e,D[0],_,i,!1,d,b);if(U!=null&&Math.abs(D[0]-U[0])<bt.MAX_PATTERN_DRIFT&&Math.abs(D[1]-U[1])<bt.MAX_PATTERN_DRIFT)D=U,P=0;else{if(P>bt.SKIPPED_ROW_COUNT_MAX)break;P++}}_-=P+1,m[2]=new ze(D[0],_),m[3]=new ze(D[1],_)}return _-l<bt.BARCODE_MIN_HEIGHT&&z.fill(m,null),m}static findGuardPattern(e,n,i,l,c,d,m){z.fillWithin(m,0,m.length,0);let y=n,b=0;for(;e.get(y,i)&&y>0&&b++<bt.MAX_PIXEL_DRIFT;)y--;let _=y,P=0,D=d.length;for(let U=c;_<l;_++)if(e.get(_,i)!==U)m[P]++;else{if(P===D-1){if(bt.patternMatchVariance(m,d,bt.MAX_INDIVIDUAL_VARIANCE)<bt.MAX_AVG_VARIANCE)return new Int32Array([y,_]);y+=m[0]+m[1],j.arraycopy(m,2,m,0,P-1),m[P-1]=0,m[P]=0,P--}else P++;m[P]=1,U=!U}return P===D-1&&bt.patternMatchVariance(m,d,bt.MAX_INDIVIDUAL_VARIANCE)<bt.MAX_AVG_VARIANCE?new Int32Array([y,_-1]):null}static patternMatchVariance(e,n,i){let l=e.length,c=0,d=0;for(let b=0;b<l;b++)c+=e[b],d+=n[b];if(c<d)return 1/0;let m=c/d;i*=m;let y=0;for(let b=0;b<l;b++){let _=e[b],P=n[b]*m,D=_>P?_-P:P-_;if(D>i)return 1/0;y+=D}return y/c}}bt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),bt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),bt.MAX_AVG_VARIANCE=.42,bt.MAX_INDIVIDUAL_VARIANCE=.8,bt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),bt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),bt.MAX_PIXEL_DRIFT=3,bt.MAX_PATTERN_DRIFT=5,bt.SKIPPED_ROW_COUNT_MAX=25,bt.ROW_STEP=5,bt.BARCODE_MIN_HEIGHT=10;class Wn{constructor(e,n){if(n.length===0)throw new I;this.field=e;let i=n.length;if(i>1&&n[0]===0){let l=1;for(;l<i&&n[l]===0;)l++;l===i?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(i-l),j.arraycopy(n,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let l=0;for(let c of this.coefficients)l=this.field.add(l,c);return l}let n=this.coefficients[0],i=this.coefficients.length;for(let l=1;l<i;l++)n=this.field.add(this.field.multiply(e,n),this.coefficients[l]);return n}add(e){if(!this.field.equals(e.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,i=e.coefficients;if(n.length>i.length){let d=n;n=i,i=d}let l=new Int32Array(i.length),c=i.length-n.length;j.arraycopy(i,0,l,0,c);for(let d=c;d<i.length;d++)l[d]=this.field.add(n[d-c],i[d]);return new Wn(this.field,l)}subtract(e){if(!this.field.equals(e.field))throw new I("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof Wn?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new Wn(this.field,new Int32Array([0]));let n=this.coefficients,i=n.length,l=e.coefficients,c=l.length,d=new Int32Array(i+c-1);for(let m=0;m<i;m++){let y=n[m];for(let b=0;b<c;b++)d[m+b]=this.field.add(d[m+b],this.field.multiply(y,l[b]))}return new Wn(this.field,d)}negative(){let e=this.coefficients.length,n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=this.field.subtract(0,this.coefficients[i]);return new Wn(this.field,n)}multiplyScalar(e){if(e===0)return new Wn(this.field,new Int32Array([0]));if(e===1)return this;let n=this.coefficients.length,i=new Int32Array(n);for(let l=0;l<n;l++)i[l]=this.field.multiply(this.coefficients[l],e);return new Wn(this.field,i)}multiplyByMonomial(e,n){if(e<0)throw new I;if(n===0)return new Wn(this.field,new Int32Array([0]));let i=this.coefficients.length,l=new Int32Array(i+e);for(let c=0;c<i;c++)l[c]=this.field.multiply(this.coefficients[c],n);return new Wn(this.field,l)}toString(){let e=new Ee;for(let n=this.getDegree();n>=0;n--){let i=this.getCoefficient(n);i!==0&&(i<0?(e.append(" - "),i=-i):e.length()>0&&e.append(" + "),(n===0||i!==1)&&e.append(i),n!==0&&(n===1?e.append("x"):(e.append("x^"),e.append(n))))}return e.toString()}}class ol{add(e,n){return(e+n)%this.modulus}subtract(e,n){return(this.modulus+e-n)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new I;return this.logTable[e]}inverse(e){if(e===0)throw new de;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class ns extends ol{constructor(e,n){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let i=1;for(let l=0;l<e;l++)this.expTable[l]=i,i=i*n%e;for(let l=0;l<e-1;l++)this.logTable[this.expTable[l]]=l;this.zero=new Wn(this,new Int32Array([0])),this.one=new Wn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new I;if(n===0)return this.zero;let i=new Int32Array(e+1);return i[0]=n,new Wn(this,i)}}ns.PDF417_GF=new ns(gt.NUMBER_OF_CODEWORDS,3);class Qo{constructor(){this.field=ns.PDF417_GF}decode(e,n,i){let l=new Wn(this.field,e),c=new Int32Array(n),d=!1;for(let $=n;$>0;$--){let te=l.evaluateAt(this.field.exp($));c[n-$]=te,te!==0&&(d=!0)}if(!d)return 0;let m=this.field.getOne();if(i!=null)for(const $ of i){let te=this.field.exp(e.length-1-$),oe=new Wn(this.field,new Int32Array([this.field.subtract(0,te),1]));m=m.multiply(oe)}let y=new Wn(this.field,c),b=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),y,n),_=b[0],P=b[1],D=this.findErrorLocations(_),U=this.findErrorMagnitudes(P,_,D);for(let $=0;$<D.length;$++){let te=e.length-1-this.field.log(D[$]);if(te<0)throw O.getChecksumInstance();e[te]=this.field.subtract(e[te],U[$])}return D.length}runEuclideanAlgorithm(e,n,i){if(e.getDegree()<n.getDegree()){let D=e;e=n,n=D}let l=e,c=n,d=this.field.getZero(),m=this.field.getOne();for(;c.getDegree()>=Math.round(i/2);){let D=l,U=d;if(l=c,d=m,l.isZero())throw O.getChecksumInstance();c=D;let $=this.field.getZero(),te=l.getCoefficient(l.getDegree()),oe=this.field.inverse(te);for(;c.getDegree()>=l.getDegree()&&!c.isZero();){let he=c.getDegree()-l.getDegree(),Fe=this.field.multiply(c.getCoefficient(c.getDegree()),oe);$=$.add(this.field.buildMonomial(he,Fe)),c=c.subtract(l.multiplyByMonomial(he,Fe))}m=$.multiply(d).subtract(U).negative()}let y=m.getCoefficient(0);if(y===0)throw O.getChecksumInstance();let b=this.field.inverse(y),_=m.multiply(b),P=c.multiply(b);return[_,P]}findErrorLocations(e){let n=e.getDegree(),i=new Int32Array(n),l=0;for(let c=1;c<this.field.getSize()&&l<n;c++)e.evaluateAt(c)===0&&(i[l]=this.field.inverse(c),l++);if(l!==n)throw O.getChecksumInstance();return i}findErrorMagnitudes(e,n,i){let l=n.getDegree(),c=new Int32Array(l);for(let b=1;b<=l;b++)c[l-b]=this.field.multiply(b,n.getCoefficient(b));let d=new Wn(this.field,c),m=i.length,y=new Int32Array(m);for(let b=0;b<m;b++){let _=this.field.inverse(i[b]),P=this.field.subtract(0,e.evaluateAt(_)),D=this.field.inverse(d.evaluateAt(_));y[b]=this.field.multiply(P,D)}return y}}class Oi{constructor(e,n,i,l,c){e instanceof Oi?this.constructor_2(e):this.constructor_1(e,n,i,l,c)}constructor_1(e,n,i,l,c){const d=n==null||i==null,m=l==null||c==null;if(d&&m)throw new Z;d?(n=new ze(0,l.getY()),i=new ze(0,c.getY())):m&&(l=new ze(e.getWidth()-1,n.getY()),c=new ze(e.getWidth()-1,i.getY())),this.image=e,this.topLeft=n,this.bottomLeft=i,this.topRight=l,this.bottomRight=c,this.minX=Math.trunc(Math.min(n.getX(),i.getX())),this.maxX=Math.trunc(Math.max(l.getX(),c.getX())),this.minY=Math.trunc(Math.min(n.getY(),l.getY())),this.maxY=Math.trunc(Math.max(i.getY(),c.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,n){return e==null?n:n==null?e:new Oi(e.image,e.topLeft,e.bottomLeft,n.topRight,n.bottomRight)}addMissingRows(e,n,i){let l=this.topLeft,c=this.bottomLeft,d=this.topRight,m=this.bottomRight;if(e>0){let y=i?this.topLeft:this.topRight,b=Math.trunc(y.getY()-e);b<0&&(b=0);let _=new ze(y.getX(),b);i?l=_:d=_}if(n>0){let y=i?this.bottomLeft:this.bottomRight,b=Math.trunc(y.getY()+n);b>=this.image.getHeight()&&(b=this.image.getHeight()-1);let _=new ze(y.getX(),b);i?c=_:m=_}return new Oi(this.image,l,c,d,m)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ps{constructor(e,n,i,l){this.columnCount=e,this.errorCorrectionLevel=l,this.rowCountUpperPart=n,this.rowCountLowerPart=i,this.rowCount=n+i}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ri{constructor(){this.buffer=""}static form(e,n){let i=-1;function l(d,m,y,b,_,P){if(d==="%%")return"%";if(n[++i]===void 0)return;d=b?parseInt(b.substr(1)):void 0;let D=_?parseInt(_.substr(1)):void 0,U;switch(P){case"s":U=n[i];break;case"c":U=n[i][0];break;case"f":U=parseFloat(n[i]).toFixed(d);break;case"p":U=parseFloat(n[i]).toPrecision(d);break;case"e":U=parseFloat(n[i]).toExponential(d);break;case"x":U=parseInt(n[i]).toString(D||16);break;case"d":U=parseFloat(parseInt(n[i],D||10).toPrecision(d)).toFixed(0);break}U=typeof U=="object"?JSON.stringify(U):(+U).toString(D);let $=parseInt(y),te=y&&y[0]+""=="0"?"0":" ";for(;U.length<$;)U=m!==void 0?U+te:te+U;return U}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(c,l)}format(e,...n){this.buffer+=ri.form(e,n)}toString(){return this.buffer}}class Xr{constructor(e){this.boundingBox=new Oi(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let n=this.getCodeword(e);if(n!=null)return n;for(let i=1;i<Xr.MAX_NEARBY_DISTANCE;i++){let l=this.imageRowToCodewordIndex(e)-i;if(l>=0&&(n=this.codewords[l],n!=null)||(l=this.imageRowToCodewordIndex(e)+i,l<this.codewords.length&&(n=this.codewords[l],n!=null)))return n}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,n){this.codewords[this.imageRowToCodewordIndex(e)]=n}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new ri;let n=0;for(const i of this.codewords){if(i==null){e.format("%3d:    |   %n",n++);continue}e.format("%3d: %3d|%3d%n",n++,i.getRowNumber(),i.getValue())}return e.toString()}}Xr.MAX_NEARBY_DISTANCE=5;class mi{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let n=this.values.get(e);n==null&&(n=0),n++,this.values.set(e,n)}getValue(){let e=-1,n=new Array;for(const[i,l]of this.values.entries()){const c={getKey:()=>i,getValue:()=>l};c.getValue()>e?(e=c.getValue(),n=[],n.push(c.getKey())):c.getValue()===e&&n.push(c.getKey())}return gt.toIntArray(n)}getConfidence(e){return this.values.get(e)}}class al extends Xr{constructor(e,n){super(e),this._isLeft=n}setRowNumbers(){for(let e of this.getCodewords())e!=null&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,e);let i=this.getBoundingBox(),l=this._isLeft?i.getTopLeft():i.getTopRight(),c=this._isLeft?i.getBottomLeft():i.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),m=this.imageRowToCodewordIndex(Math.trunc(c.getY())),y=-1,b=1,_=0;for(let P=d;P<m;P++){if(n[P]==null)continue;let D=n[P],U=D.getRowNumber()-y;if(U===0)_++;else if(U===1)b=Math.max(b,_),_=1,y=D.getRowNumber();else if(U<0||D.getRowNumber()>=e.getRowCount()||U>P)n[P]=null;else{let $;b>2?$=(b-2)*U:$=U;let te=$>=P;for(let oe=1;oe<=$&&!te;oe++)te=n[P-oe]!=null;te?n[P]=null:(y=D.getRowNumber(),_=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let n=new Int32Array(e.getRowCount());for(let i of this.getCodewords())if(i!=null){let l=i.getRowNumber();if(l>=n.length)continue;n[l]++}return n}adjustIncompleteIndicatorColumnRowNumbers(e){let n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),l=this._isLeft?n.getBottomLeft():n.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(i.getY())),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),m=this.getCodewords(),y=-1;for(let b=c;b<d;b++){if(m[b]==null)continue;let _=m[b];_.setRowNumberAsRowIndicatorColumn();let P=_.getRowNumber()-y;P===0||(P===1?y=_.getRowNumber():_.getRowNumber()>=e.getRowCount()?m[b]=null:y=_.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),n=new mi,i=new mi,l=new mi,c=new mi;for(let m of e){if(m==null)continue;m.setRowNumberAsRowIndicatorColumn();let y=m.getValue()%30,b=m.getRowNumber();switch(this._isLeft||(b+=2),b%3){case 0:i.setValue(y*3+1);break;case 1:c.setValue(y/3),l.setValue(y%3);break;case 2:n.setValue(y+1);break}}if(n.getValue().length===0||i.getValue().length===0||l.getValue().length===0||c.getValue().length===0||n.getValue()[0]<1||i.getValue()[0]+l.getValue()[0]<gt.MIN_ROWS_IN_BARCODE||i.getValue()[0]+l.getValue()[0]>gt.MAX_ROWS_IN_BARCODE)return null;let d=new Ps(n.getValue()[0],i.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(e,d),d}removeIncorrectCodewords(e,n){for(let i=0;i<e.length;i++){let l=e[i];if(e[i]==null)continue;let c=l.getValue()%30,d=l.getRowNumber();if(d>n.getRowCount()){e[i]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:c*3+1!==n.getRowCountUpperPart()&&(e[i]=null);break;case 1:(Math.trunc(c/3)!==n.getErrorCorrectionLevel()||c%3!==n.getRowCountLowerPart())&&(e[i]=null);break;case 2:c+1!==n.getColumnCount()&&(e[i]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ms{constructor(e,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=gt.MAX_CODEWORDS_IN_BARCODE,n;do n=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<n);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let n=1;n<this.barcodeColumnCount+1;n++){let i=this.detectionResultColumns[n].getCodewords();for(let l=0;l<i.length;l++)i[l]!=null&&(i[l].hasValidRowNumber()||this.adjustRowNumbers(n,l,i))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<e.length;i++)if(e[i]!=null&&n[i]!=null&&e[i].getRowNumber()===n[i].getRowNumber())for(let l=1;l<=this.barcodeColumnCount;l++){let c=this.detectionResultColumns[l].getCodewords()[i];c!=null&&(c.setRowNumber(e[i].getRowNumber()),c.hasValidRowNumber()||(this.detectionResultColumns[l].getCodewords()[i]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<n.length;i++){if(n[i]==null)continue;let l=n[i].getRowNumber(),c=0;for(let d=this.barcodeColumnCount+1;d>0&&c<this.ADJUST_ROW_NUMBER_SKIP;d--){let m=this.detectionResultColumns[d].getCodewords()[i];m!=null&&(c=Ms.adjustRowNumberIfValid(l,c,m),m.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,n=this.detectionResultColumns[0].getCodewords();for(let i=0;i<n.length;i++){if(n[i]==null)continue;let l=n[i].getRowNumber(),c=0;for(let d=1;d<this.barcodeColumnCount+1&&c<this.ADJUST_ROW_NUMBER_SKIP;d++){let m=this.detectionResultColumns[d].getCodewords()[i];m!=null&&(c=Ms.adjustRowNumberIfValid(l,c,m),m.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,n,i){return i==null||i.hasValidRowNumber()||(i.isValidRowNumber(e)?(i.setRowNumber(e),n=0):++n),n}adjustRowNumbers(e,n,i){if(!this.detectionResultColumns[e-1])return;let l=i[n],c=this.detectionResultColumns[e-1].getCodewords(),d=c;this.detectionResultColumns[e+1]!=null&&(d=this.detectionResultColumns[e+1].getCodewords());let m=new Array(14);m[2]=c[n],m[3]=d[n],n>0&&(m[0]=i[n-1],m[4]=c[n-1],m[5]=d[n-1]),n>1&&(m[8]=i[n-2],m[10]=c[n-2],m[11]=d[n-2]),n<i.length-1&&(m[1]=i[n+1],m[6]=c[n+1],m[7]=d[n+1]),n<i.length-2&&(m[9]=i[n+2],m[12]=c[n+2],m[13]=d[n+2]);for(let y of m)if(Ms.adjustRowNumber(l,y))return}static adjustRowNumber(e,n){return n==null?!1:n.hasValidRowNumber()&&n.getBucket()===e.getBucket()?(e.setRowNumber(n.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,n){this.detectionResultColumns[e]=n}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let n=new ri;for(let i=0;i<e.getCodewords().length;i++){n.format("CW %3d:",i);for(let l=0;l<this.barcodeColumnCount+2;l++){if(this.detectionResultColumns[l]==null){n.format("    |   ");continue}let c=this.detectionResultColumns[l].getCodewords()[i];if(c==null){n.format("    |   ");continue}n.format(" %3d|%3d",c.getRowNumber(),c.getValue())}n.format("%n")}return n.toString()}}class Di{constructor(e,n,i,l){this.rowNumber=Di.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(n),this.bucket=Math.trunc(i),this.value=Math.trunc(l)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==Di.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}Di.BARCODE_ROW_UNKNOWN=-1;class Hn{static initialize(){for(let e=0;e<gt.SYMBOL_TABLE.length;e++){let n=gt.SYMBOL_TABLE[e],i=n&1;for(let l=0;l<gt.BARS_IN_MODULE;l++){let c=0;for(;(n&1)===i;)c+=1,n>>=1;i=n&1,Hn.RATIOS_TABLE[e]||(Hn.RATIOS_TABLE[e]=new Array(gt.BARS_IN_MODULE)),Hn.RATIOS_TABLE[e][gt.BARS_IN_MODULE-l-1]=Math.fround(c/gt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let n=Hn.getDecodedCodewordValue(Hn.sampleBitCounts(e));return n!==-1?n:Hn.getClosestDecodedValue(e)}static sampleBitCounts(e){let n=tt.sum(e),i=new Int32Array(gt.BARS_IN_MODULE),l=0,c=0;for(let d=0;d<gt.MODULES_IN_CODEWORD;d++){let m=n/(2*gt.MODULES_IN_CODEWORD)+d*n/gt.MODULES_IN_CODEWORD;c+e[l]<=m&&(c+=e[l],l++),i[l]++}return i}static getDecodedCodewordValue(e){let n=Hn.getBitValue(e);return gt.getCodeword(n)===-1?-1:n}static getBitValue(e){let n=0;for(let i=0;i<e.length;i++)for(let l=0;l<e[i];l++)n=n<<1|(i%2===0?1:0);return Math.trunc(n)}static getClosestDecodedValue(e){let n=tt.sum(e),i=new Array(gt.BARS_IN_MODULE);if(n>1)for(let d=0;d<i.length;d++)i[d]=Math.fround(e[d]/n);let l=jt.MAX_VALUE,c=-1;this.bSymbolTableReady||Hn.initialize();for(let d=0;d<Hn.RATIOS_TABLE.length;d++){let m=0,y=Hn.RATIOS_TABLE[d];for(let b=0;b<gt.BARS_IN_MODULE;b++){let _=Math.fround(y[b]-i[b]);if(m+=Math.fround(_*_),m>=l)break}m<l&&(l=m,c=gt.SYMBOL_TABLE[d])}return c}}Hn.bSymbolTableReady=!1,Hn.RATIOS_TABLE=new Array(gt.SYMBOL_TABLE.length).map(k=>new Array(gt.BARS_IN_MODULE));class ho{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class Jo{static parseLong(e,n=void 0){return parseInt(e,n)}}class ii extends C{}ii.kind="NullPointerException";class ea{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,n,i){if(e==null)throw new ii;if(n<0||n>e.length||i<0||n+i>e.length||n+i<0)throw new B;if(i===0)return;for(let l=0;l<i;l++)this.write(e[n+l])}flush(){}close(){}}class po extends C{}class ll extends ea{constructor(e=32){if(super(),this.count=0,e<0)throw new I("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let i=this.buf.length<<1;if(i-e<0&&(i=e),i<0){if(e<0)throw new po;i=F.MAX_VALUE}this.buf=z.copyOfUint8Array(this.buf,i)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,n,i){if(n<0||n>e.length||i<0||n+i-e.length>0)throw new B;this.ensureCapacity(this.count+i),j.arraycopy(e,n,this.buf,this.count,i),this.count+=i}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return z.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var zt;(function(k){k[k.ALPHA=0]="ALPHA",k[k.LOWER=1]="LOWER",k[k.MIXED=2]="MIXED",k[k.PUNCT=3]="PUNCT",k[k.ALPHA_SHIFT=4]="ALPHA_SHIFT",k[k.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(zt||(zt={}));function Os(){if(typeof window<"u")return window.BigInt||null;if(typeof sc<"u")return sc.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ds;function An(k){if(typeof Ds>"u"&&(Ds=Os()),Ds===null)throw new Error("BigInt is not supported!");return Ds(k)}function rs(){let k=[];k[0]=An(1);let e=An(900);k[1]=e;for(let n=2;n<16;n++)k[n]=k[n-1]*e;return k}class pe{static decode(e,n){let i=new Ee(""),l=J.ISO8859_1;i.enableDecoding(l);let c=1,d=e[c++],m=new ho;for(;c<e[0];){switch(d){case pe.TEXT_COMPACTION_MODE_LATCH:c=pe.textCompaction(e,c,i);break;case pe.BYTE_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:c=pe.byteCompaction(d,e,l,c,i);break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[c++]);break;case pe.NUMERIC_COMPACTION_MODE_LATCH:c=pe.numericCompaction(e,c,i);break;case pe.ECI_CHARSET:J.getCharacterSetECIByValue(e[c++]);break;case pe.ECI_GENERAL_PURPOSE:c+=2;break;case pe.ECI_USER_DEFINED:c++;break;case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:c=pe.decodeMacroBlock(e,c,m);break;case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:throw new q;default:c--,c=pe.textCompaction(e,c,i);break}if(c<e.length)d=e[c++];else throw q.getFormatInstance()}if(i.length()===0)throw q.getFormatInstance();let y=new Le(null,i.toString(),null,n);return y.setOther(m),y}static decodeMacroBlock(e,n,i){if(n+pe.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw q.getFormatInstance();let l=new Int32Array(pe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let m=0;m<pe.NUMBER_OF_SEQUENCE_CODEWORDS;m++,n++)l[m]=e[n];i.setSegmentIndex(F.parseInt(pe.decodeBase900toBase10(l,pe.NUMBER_OF_SEQUENCE_CODEWORDS)));let c=new Ee;n=pe.textCompaction(e,n,c),i.setFileId(c.toString());let d=-1;for(e[n]===pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=n+1);n<e[0];)switch(e[n]){case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(n++,e[n]){case pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let m=new Ee;n=pe.textCompaction(e,n+1,m),i.setFileName(m.toString());break;case pe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let y=new Ee;n=pe.textCompaction(e,n+1,y),i.setSender(y.toString());break;case pe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let b=new Ee;n=pe.textCompaction(e,n+1,b),i.setAddressee(b.toString());break;case pe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let _=new Ee;n=pe.numericCompaction(e,n+1,_),i.setSegmentCount(F.parseInt(_.toString()));break;case pe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let P=new Ee;n=pe.numericCompaction(e,n+1,P),i.setTimestamp(Jo.parseLong(P.toString()));break;case pe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let D=new Ee;n=pe.numericCompaction(e,n+1,D),i.setChecksum(F.parseInt(D.toString()));break;case pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let U=new Ee;n=pe.numericCompaction(e,n+1,U),i.setFileSize(Jo.parseLong(U.toString()));break;default:throw q.getFormatInstance()}break;case pe.MACRO_PDF417_TERMINATOR:n++,i.setLastSegment(!0);break;default:throw q.getFormatInstance()}if(d!==-1){let m=n-d;i.isLastSegment()&&m--,i.setOptionalData(z.copyOfRange(e,d,d+m))}return n}static textCompaction(e,n,i){let l=new Int32Array((e[0]-n)*2),c=new Int32Array((e[0]-n)*2),d=0,m=!1;for(;n<e[0]&&!m;){let y=e[n++];if(y<pe.TEXT_COMPACTION_MODE_LATCH)l[d]=y/30,l[d+1]=y%30,d+=2;else switch(y){case pe.TEXT_COMPACTION_MODE_LATCH:l[d++]=pe.TEXT_COMPACTION_MODE_LATCH;break;case pe.BYTE_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:case pe.NUMERIC_COMPACTION_MODE_LATCH:case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:n--,m=!0;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l[d]=pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,y=e[n++],c[d]=y,d++;break}}return pe.decodeTextCompaction(l,c,d,i),n}static decodeTextCompaction(e,n,i,l){let c=zt.ALPHA,d=zt.ALPHA,m=0;for(;m<i;){let y=e[m],b="";switch(c){case zt.ALPHA:if(y<26)b=String.fromCharCode(65+y);else switch(y){case 26:b=" ";break;case pe.LL:c=zt.LOWER;break;case pe.ML:c=zt.MIXED;break;case pe.PS:d=c,c=zt.PUNCT_SHIFT;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[m]);break;case pe.TEXT_COMPACTION_MODE_LATCH:c=zt.ALPHA;break}break;case zt.LOWER:if(y<26)b=String.fromCharCode(97+y);else switch(y){case 26:b=" ";break;case pe.AS:d=c,c=zt.ALPHA_SHIFT;break;case pe.ML:c=zt.MIXED;break;case pe.PS:d=c,c=zt.PUNCT_SHIFT;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[m]);break;case pe.TEXT_COMPACTION_MODE_LATCH:c=zt.ALPHA;break}break;case zt.MIXED:if(y<pe.PL)b=pe.MIXED_CHARS[y];else switch(y){case pe.PL:c=zt.PUNCT;break;case 26:b=" ";break;case pe.LL:c=zt.LOWER;break;case pe.AL:c=zt.ALPHA;break;case pe.PS:d=c,c=zt.PUNCT_SHIFT;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[m]);break;case pe.TEXT_COMPACTION_MODE_LATCH:c=zt.ALPHA;break}break;case zt.PUNCT:if(y<pe.PAL)b=pe.PUNCT_CHARS[y];else switch(y){case pe.PAL:c=zt.ALPHA;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[m]);break;case pe.TEXT_COMPACTION_MODE_LATCH:c=zt.ALPHA;break}break;case zt.ALPHA_SHIFT:if(c=d,y<26)b=String.fromCharCode(65+y);else switch(y){case 26:b=" ";break;case pe.TEXT_COMPACTION_MODE_LATCH:c=zt.ALPHA;break}break;case zt.PUNCT_SHIFT:if(c=d,y<pe.PAL)b=pe.PUNCT_CHARS[y];else switch(y){case pe.PAL:c=zt.ALPHA;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[m]);break;case pe.TEXT_COMPACTION_MODE_LATCH:c=zt.ALPHA;break}break}b!==""&&l.append(b),m++}}static byteCompaction(e,n,i,l,c){let d=new ll,m=0,y=0,b=!1;switch(e){case pe.BYTE_COMPACTION_MODE_LATCH:let _=new Int32Array(6),P=n[l++];for(;l<n[0]&&!b;)switch(_[m++]=P,y=900*y+P,P=n[l++],P){case pe.TEXT_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH:case pe.NUMERIC_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:l--,b=!0;break;default:if(m%5===0&&m>0){for(let D=0;D<6;++D)d.write(Number(An(y)>>An(8*(5-D))));y=0,m=0}break}l===n[0]&&P<pe.TEXT_COMPACTION_MODE_LATCH&&(_[m++]=P);for(let D=0;D<m;D++)d.write(_[D]);break;case pe.BYTE_COMPACTION_MODE_LATCH_6:for(;l<n[0]&&!b;){let D=n[l++];if(D<pe.TEXT_COMPACTION_MODE_LATCH)m++,y=900*y+D;else switch(D){case pe.TEXT_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH:case pe.NUMERIC_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:l--,b=!0;break}if(m%5===0&&m>0){for(let U=0;U<6;++U)d.write(Number(An(y)>>An(8*(5-U))));y=0,m=0}}break}return c.append(Re.decode(d.toByteArray(),i)),l}static numericCompaction(e,n,i){let l=0,c=!1,d=new Int32Array(pe.MAX_NUMERIC_CODEWORDS);for(;n<e[0]&&!c;){let m=e[n++];if(n===e[0]&&(c=!0),m<pe.TEXT_COMPACTION_MODE_LATCH)d[l]=m,l++;else switch(m){case pe.TEXT_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:n--,c=!0;break}(l%pe.MAX_NUMERIC_CODEWORDS===0||m===pe.NUMERIC_COMPACTION_MODE_LATCH||c)&&l>0&&(i.append(pe.decodeBase900toBase10(d,l)),l=0)}return n}static decodeBase900toBase10(e,n){let i=An(0);for(let c=0;c<n;c++)i+=pe.EXP900[n-c-1]*An(e[c]);let l=i.toString();if(l.charAt(0)!=="1")throw new q;return l.substring(1)}}pe.TEXT_COMPACTION_MODE_LATCH=900,pe.BYTE_COMPACTION_MODE_LATCH=901,pe.NUMERIC_COMPACTION_MODE_LATCH=902,pe.BYTE_COMPACTION_MODE_LATCH_6=924,pe.ECI_USER_DEFINED=925,pe.ECI_GENERAL_PURPOSE=926,pe.ECI_CHARSET=927,pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,pe.MACRO_PDF417_TERMINATOR=922,pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,pe.MAX_NUMERIC_CODEWORDS=15,pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,pe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,pe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,pe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,pe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,pe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,pe.PL=25,pe.LL=27,pe.AS=27,pe.ML=28,pe.AL=28,pe.PS=29,pe.PAL=29,pe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,pe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",pe.EXP900=Os()?rs():[],pe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class At{constructor(){}static decode(e,n,i,l,c,d,m){let y=new Oi(e,n,i,l,c),b=null,_=null,P;for(let $=!0;;$=!1){if(n!=null&&(b=At.getRowIndicatorColumn(e,y,n,!0,d,m)),l!=null&&(_=At.getRowIndicatorColumn(e,y,l,!1,d,m)),P=At.merge(b,_),P==null)throw Z.getNotFoundInstance();let te=P.getBoundingBox();if($&&te!=null&&(te.getMinY()<y.getMinY()||te.getMaxY()>y.getMaxY()))y=te;else break}P.setBoundingBox(y);let D=P.getBarcodeColumnCount()+1;P.setDetectionResultColumn(0,b),P.setDetectionResultColumn(D,_);let U=b!=null;for(let $=1;$<=D;$++){let te=U?$:D-$;if(P.getDetectionResultColumn(te)!==void 0)continue;let oe;te===0||te===D?oe=new al(y,te===0):oe=new Xr(y),P.setDetectionResultColumn(te,oe);let he=-1,Fe=he;for(let Ve=y.getMinY();Ve<=y.getMaxY();Ve++){if(he=At.getStartColumn(P,te,Ve,U),he<0||he>y.getMaxX()){if(Fe===-1)continue;he=Fe}let Pe=At.detectCodeword(e,y.getMinX(),y.getMaxX(),U,he,Ve,d,m);Pe!=null&&(oe.setCodeword(Ve,Pe),Fe=he,d=Math.min(d,Pe.getWidth()),m=Math.max(m,Pe.getWidth()))}}return At.createDecoderResult(P)}static merge(e,n){if(e==null&&n==null)return null;let i=At.getBarcodeMetadata(e,n);if(i==null)return null;let l=Oi.merge(At.adjustBoundingBox(e),At.adjustBoundingBox(n));return new Ms(i,l)}static adjustBoundingBox(e){if(e==null)return null;let n=e.getRowHeights();if(n==null)return null;let i=At.getMax(n),l=0;for(let m of n)if(l+=i-m,m>0)break;let c=e.getCodewords();for(let m=0;l>0&&c[m]==null;m++)l--;let d=0;for(let m=n.length-1;m>=0&&(d+=i-n[m],!(n[m]>0));m--);for(let m=c.length-1;d>0&&c[m]==null;m--)d--;return e.getBoundingBox().addMissingRows(l,d,e.isLeft())}static getMax(e){let n=-1;for(let i of e)n=Math.max(n,i);return n}static getBarcodeMetadata(e,n){let i;if(e==null||(i=e.getBarcodeMetadata())==null)return n==null?null:n.getBarcodeMetadata();let l;return n==null||(l=n.getBarcodeMetadata())==null?i:i.getColumnCount()!==l.getColumnCount()&&i.getErrorCorrectionLevel()!==l.getErrorCorrectionLevel()&&i.getRowCount()!==l.getRowCount()?null:i}static getRowIndicatorColumn(e,n,i,l,c,d){let m=new al(n,l);for(let y=0;y<2;y++){let b=y===0?1:-1,_=Math.trunc(Math.trunc(i.getX()));for(let P=Math.trunc(Math.trunc(i.getY()));P<=n.getMaxY()&&P>=n.getMinY();P+=b){let D=At.detectCodeword(e,0,e.getWidth(),l,_,P,c,d);D!=null&&(m.setCodeword(P,D),l?_=D.getStartX():_=D.getEndX())}}return m}static adjustCodewordCount(e,n){let i=n[0][1],l=i.getValue(),c=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-At.getNumberOfECCodeWords(e.getBarcodeECLevel());if(l.length===0){if(c<1||c>gt.MAX_CODEWORDS_IN_BARCODE)throw Z.getNotFoundInstance();i.setValue(c)}else l[0]!==c&&i.setValue(c)}static createDecoderResult(e){let n=At.createBarcodeMatrix(e);At.adjustCodewordCount(e,n);let i=new Array,l=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),c=[],d=new Array;for(let y=0;y<e.getBarcodeRowCount();y++)for(let b=0;b<e.getBarcodeColumnCount();b++){let _=n[y][b+1].getValue(),P=y*e.getBarcodeColumnCount()+b;_.length===0?i.push(P):_.length===1?l[P]=_[0]:(d.push(P),c.push(_))}let m=new Array(c.length);for(let y=0;y<m.length;y++)m[y]=c[y];return At.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),l,gt.toIntArray(i),gt.toIntArray(d),m)}static createDecoderResultFromAmbiguousValues(e,n,i,l,c){let d=new Int32Array(l.length),m=100;for(;m-- >0;){for(let y=0;y<d.length;y++)n[l[y]]=c[y][d[y]];try{return At.decodeCodewords(n,e,i)}catch(y){if(!(y instanceof O))throw y}if(d.length===0)throw O.getChecksumInstance();for(let y=0;y<d.length;y++)if(d[y]<c[y].length-1){d[y]++;break}else if(d[y]=0,y===d.length-1)throw O.getChecksumInstance()}throw O.getChecksumInstance()}static createBarcodeMatrix(e){let n=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let l=0;l<n.length;l++)for(let c=0;c<n[l].length;c++)n[l][c]=new mi;let i=0;for(let l of e.getDetectionResultColumns()){if(l!=null){for(let c of l.getCodewords())if(c!=null){let d=c.getRowNumber();if(d>=0){if(d>=n.length)continue;n[d][i].setValue(c.getValue())}}}i++}return n}static isValidBarcodeColumn(e,n){return n>=0&&n<=e.getBarcodeColumnCount()+1}static getStartColumn(e,n,i,l){let c=l?1:-1,d=null;if(At.isValidBarcodeColumn(e,n-c)&&(d=e.getDetectionResultColumn(n-c).getCodeword(i)),d!=null)return l?d.getEndX():d.getStartX();if(d=e.getDetectionResultColumn(n).getCodewordNearby(i),d!=null)return l?d.getStartX():d.getEndX();if(At.isValidBarcodeColumn(e,n-c)&&(d=e.getDetectionResultColumn(n-c).getCodewordNearby(i)),d!=null)return l?d.getEndX():d.getStartX();let m=0;for(;At.isValidBarcodeColumn(e,n-c);){n-=c;for(let y of e.getDetectionResultColumn(n).getCodewords())if(y!=null)return(l?y.getEndX():y.getStartX())+c*m*(y.getEndX()-y.getStartX());m++}return l?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,n,i,l,c,d,m,y){c=At.adjustCodewordStartColumn(e,n,i,l,c,d);let b=At.getModuleBitCount(e,n,i,l,c,d);if(b==null)return null;let _,P=tt.sum(b);if(l)_=c+P;else{for(let $=0;$<b.length/2;$++){let te=b[$];b[$]=b[b.length-1-$],b[b.length-1-$]=te}_=c,c=_-P}if(!At.checkCodewordSkew(P,m,y))return null;let D=Hn.getDecodedValue(b),U=gt.getCodeword(D);return U===-1?null:new Di(c,_,At.getCodewordBucketNumber(D),U)}static getModuleBitCount(e,n,i,l,c,d){let m=c,y=new Int32Array(8),b=0,_=l?1:-1,P=l;for(;(l?m<i:m>=n)&&b<y.length;)e.get(m,d)===P?(y[b]++,m+=_):(b++,P=!P);return b===y.length||m===(l?i:n)&&b===y.length-1?y:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,n,i,l,c,d){let m=c,y=l?-1:1;for(let b=0;b<2;b++){for(;(l?m>=n:m<i)&&l===e.get(m,d);){if(Math.abs(c-m)>At.CODEWORD_SKEW_SIZE)return c;m+=y}y=-y,l=!l}return m}static checkCodewordSkew(e,n,i){return n-At.CODEWORD_SKEW_SIZE<=e&&e<=i+At.CODEWORD_SKEW_SIZE}static decodeCodewords(e,n,i){if(e.length===0)throw q.getFormatInstance();let l=1<<n+1,c=At.correctErrors(e,i,l);At.verifyCodewordCount(e,l);let d=pe.decode(e,""+n);return d.setErrorsCorrected(c),d.setErasures(i.length),d}static correctErrors(e,n,i){if(n!=null&&n.length>i/2+At.MAX_ERRORS||i<0||i>At.MAX_EC_CODEWORDS)throw O.getChecksumInstance();return At.errorCorrection.decode(e,i,n)}static verifyCodewordCount(e,n){if(e.length<4)throw q.getFormatInstance();let i=e[0];if(i>e.length)throw q.getFormatInstance();if(i===0)if(n<e.length)e[0]=e.length-n;else throw q.getFormatInstance()}static getBitCountForCodeword(e){let n=new Int32Array(8),i=0,l=n.length-1;for(;!((e&1)!==i&&(i=e&1,l--,l<0));)n[l]++,e>>=1;return n}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return At.getCodewordBucketNumber(At.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let n=new ri;for(let i=0;i<e.length;i++){n.format("Row %2d: ",i);for(let l=0;l<e[i].length;l++){let c=e[i][l];c.getValue().length===0?n.format("        ",null):n.format("%4d(%2d)",c.getValue()[0],c.getConfidence(c.getValue()[0]))}n.format("%n")}return n.toString()}}At.CODEWORD_SKEW_SIZE=2,At.MAX_ERRORS=3,At.MAX_EC_CODEWORDS=512,At.errorCorrection=new Qo;class Gn{decode(e,n=null){let i=Gn.decode(e,n,!1);if(i==null||i.length===0||i[0]==null)throw Z.getNotFoundInstance();return i[0]}decodeMultiple(e,n=null){try{return Gn.decode(e,n,!0)}catch(i){throw i instanceof q||i instanceof O?Z.getNotFoundInstance():i}}static decode(e,n,i){const l=new Array,c=bt.detectMultiple(e,n,i);for(const d of c.getPoints()){const m=At.decode(c.getBits(),d[4],d[5],d[6],d[7],Gn.getMinCodewordWidth(d),Gn.getMaxCodewordWidth(d)),y=new ae(m.getText(),m.getRawBytes(),void 0,d,ee.PDF_417);y.putMetadata(Se.ERROR_CORRECTION_LEVEL,m.getECLevel());const b=m.getOther();b!=null&&y.putMetadata(Se.PDF417_EXTRA_METADATA,b),l.push(y)}return l.map(d=>d)}static getMaxWidth(e,n){return e==null||n==null?0:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMinWidth(e,n){return e==null||n==null?F.MAX_VALUE:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(Gn.getMaxWidth(e[0],e[4]),Gn.getMaxWidth(e[6],e[2])*gt.MODULES_IN_CODEWORD/gt.MODULES_IN_STOP_PATTERN),Math.max(Gn.getMaxWidth(e[1],e[5]),Gn.getMaxWidth(e[7],e[3])*gt.MODULES_IN_CODEWORD/gt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(Gn.getMinWidth(e[0],e[4]),Gn.getMinWidth(e[6],e[2])*gt.MODULES_IN_CODEWORD/gt.MODULES_IN_STOP_PATTERN),Math.min(Gn.getMinWidth(e[1],e[5]),Gn.getMinWidth(e[7],e[3])*gt.MODULES_IN_CODEWORD/gt.MODULES_IN_STOP_PATTERN)))}reset(){}}class is extends C{}is.kind="ReaderException";class mo{constructor(e,n){this.verbose=e===!0,n&&this.setHints(n)}decode(e,n){return n&&this.setHints(n),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const n=!u(e)&&e.get(ne.TRY_HARDER)===!0,i=u(e)?null:e.get(ne.POSSIBLE_FORMATS),l=new Array;if(!u(i)){const c=i.some(d=>d===ee.UPC_A||d===ee.UPC_E||d===ee.EAN_13||d===ee.EAN_8||d===ee.CODABAR||d===ee.CODE_39||d===ee.CODE_93||d===ee.CODE_128||d===ee.ITF||d===ee.RSS_14||d===ee.RSS_EXPANDED);c&&!n&&l.push(new hi(e,this.verbose)),i.includes(ee.QR_CODE)&&l.push(new Un),i.includes(ee.DATA_MATRIX)&&l.push(new fr),i.includes(ee.AZTEC)&&l.push(new Xt),i.includes(ee.PDF_417)&&l.push(new Gn),c&&n&&l.push(new hi(e,this.verbose))}l.length===0&&(n||l.push(new hi(e,this.verbose)),l.push(new Un),l.push(new fr),l.push(new Xt),l.push(new Gn),n&&l.push(new hi(e,this.verbose))),this.readers=l}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new is("No readers where selected, nothing can be read.");for(const n of this.readers)try{return n.decode(e,this.hints)}catch(i){if(i instanceof is)continue}throw new Z("No MultiFormat Readers were able to detect the code.")}}class Ls extends Ce{constructor(e=null,n=500){const i=new mo;i.setHints(e),super(i,n)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class go extends Ce{constructor(e=500){super(new Gn,e)}}class cl extends Ce{constructor(e=500){super(new Un,e)}}var ta;(function(k){k[k.ERROR_CORRECTION=0]="ERROR_CORRECTION",k[k.CHARACTER_SET=1]="CHARACTER_SET",k[k.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",k[k.MIN_SIZE=3]="MIN_SIZE",k[k.MAX_SIZE=4]="MAX_SIZE",k[k.MARGIN=5]="MARGIN",k[k.PDF417_COMPACT=6]="PDF417_COMPACT",k[k.PDF417_COMPACTION=7]="PDF417_COMPACTION",k[k.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",k[k.AZTEC_LAYERS=9]="AZTEC_LAYERS",k[k.QR_VERSION=10]="QR_VERSION"})(ta||(ta={}));var kn=ta;class na{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Xe(e,Int32Array.from([1])))}buildGenerator(e){const n=this.cachedGenerators;if(e>=n.length){let i=n[n.length-1];const l=this.field;for(let c=n.length;c<=e;c++){const d=i.multiply(new Xe(l,Int32Array.from([1,l.exp(c-1+l.getGeneratorBase())])));n.push(d),i=d}}return n[e]}encode(e,n){if(n===0)throw new I("No error correction bytes");const i=e.length-n;if(i<=0)throw new I("No data bytes provided");const l=this.buildGenerator(n),c=new Int32Array(i);j.arraycopy(e,0,c,0,i);let d=new Xe(this.field,c);d=d.multiplyByMonomial(n,1);const y=d.divide(l)[1].getCoefficients(),b=n-y.length;for(let _=0;_<b;_++)e[i+_]=0;j.arraycopy(y,0,e,i+b,y.length)}}class on{constructor(){}static applyMaskPenaltyRule1(e){return on.applyMaskPenaltyRule1Internal(e,!0)+on.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let n=0;const i=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let d=0;d<c-1;d++){const m=i[d];for(let y=0;y<l-1;y++){const b=m[y];b===m[y+1]&&b===i[d+1][y]&&b===i[d+1][y+1]&&n++}}return on.N2*n}static applyMaskPenaltyRule3(e){let n=0;const i=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let d=0;d<c;d++)for(let m=0;m<l;m++){const y=i[d];m+6<l&&y[m]===1&&y[m+1]===0&&y[m+2]===1&&y[m+3]===1&&y[m+4]===1&&y[m+5]===0&&y[m+6]===1&&(on.isWhiteHorizontal(y,m-4,m)||on.isWhiteHorizontal(y,m+7,m+11))&&n++,d+6<c&&i[d][m]===1&&i[d+1][m]===0&&i[d+2][m]===1&&i[d+3][m]===1&&i[d+4][m]===1&&i[d+5][m]===0&&i[d+6][m]===1&&(on.isWhiteVertical(i,m,d-4,d)||on.isWhiteVertical(i,m,d+7,d+11))&&n++}return n*on.N3}static isWhiteHorizontal(e,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(let l=n;l<i;l++)if(e[l]===1)return!1;return!0}static isWhiteVertical(e,n,i,l){i=Math.max(i,0),l=Math.min(l,e.length);for(let c=i;c<l;c++)if(e[c][n]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let n=0;const i=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let y=0;y<c;y++){const b=i[y];for(let _=0;_<l;_++)b[_]===1&&n++}const d=e.getHeight()*e.getWidth();return Math.floor(Math.abs(n*2-d)*10/d)*on.N4}static getDataMaskBit(e,n,i){let l,c;switch(e){case 0:l=i+n&1;break;case 1:l=i&1;break;case 2:l=n%3;break;case 3:l=(i+n)%3;break;case 4:l=Math.floor(i/2)+Math.floor(n/3)&1;break;case 5:c=i*n,l=(c&1)+c%3;break;case 6:c=i*n,l=(c&1)+c%3&1;break;case 7:c=i*n,l=c%3+(i+n&1)&1;break;default:throw new I("Invalid mask pattern: "+e)}return l===0}static applyMaskPenaltyRule1Internal(e,n){let i=0;const l=n?e.getHeight():e.getWidth(),c=n?e.getWidth():e.getHeight(),d=e.getArray();for(let m=0;m<l;m++){let y=0,b=-1;for(let _=0;_<c;_++){const P=n?d[m][_]:d[_][m];P===b?y++:(y>=5&&(i+=on.N1+(y-5)),y=1,b=P)}y>=5&&(i+=on.N1+(y-5))}return i}}on.N1=3,on.N2=3,on.N3=40,on.N4=10;class xo{constructor(e,n){this.width=e,this.height=n;const i=new Array(n);for(let l=0;l!==n;l++)i[l]=new Uint8Array(e);this.bytes=i}getHeight(){return this.height}getWidth(){return this.width}get(e,n){return this.bytes[n][e]}getArray(){return this.bytes}setNumber(e,n,i){this.bytes[n][e]=i}setBoolean(e,n,i){this.bytes[n][e]=i?1:0}clear(e){for(const n of this.bytes)z.fill(n,e)}equals(e){if(!(e instanceof xo))return!1;const n=e;if(this.width!==n.width||this.height!==n.height)return!1;for(let i=0,l=this.height;i<l;++i){const c=this.bytes[i],d=n.bytes[i];for(let m=0,y=this.width;m<y;++m)if(c[m]!==d[m])return!1}return!0}toString(){const e=new Ee;for(let n=0,i=this.height;n<i;++n){const l=this.bytes[n];for(let c=0,d=this.width;c<d;++c)switch(l[c]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class Li{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new Ee;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Li.NUM_MASK_PATTERNS}}Li.NUM_MASK_PATTERNS=8;class Jt extends C{}Jt.kind="WriterException";class ht{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,n,i,l,c){ht.clearMatrix(c),ht.embedBasicPatterns(i,c),ht.embedTypeInfo(n,l,c),ht.maybeEmbedVersionInfo(i,c),ht.embedDataBits(e,l,c)}static embedBasicPatterns(e,n){ht.embedPositionDetectionPatternsAndSeparators(n),ht.embedDarkDotAtLeftBottomCorner(n),ht.maybeEmbedPositionAdjustmentPatterns(e,n),ht.embedTimingPatterns(n)}static embedTypeInfo(e,n,i){const l=new Y;ht.makeTypeInfoBits(e,n,l);for(let c=0,d=l.getSize();c<d;++c){const m=l.get(l.getSize()-1-c),y=ht.TYPE_INFO_COORDINATES[c],b=y[0],_=y[1];if(i.setBoolean(b,_,m),c<8){const P=i.getWidth()-c-1;i.setBoolean(P,8,m)}else{const D=i.getHeight()-7+(c-8);i.setBoolean(8,D,m)}}}static maybeEmbedVersionInfo(e,n){if(e.getVersionNumber()<7)return;const i=new Y;ht.makeVersionInfoBits(e,i);let l=6*3-1;for(let c=0;c<6;++c)for(let d=0;d<3;++d){const m=i.get(l);l--,n.setBoolean(c,n.getHeight()-11+d,m),n.setBoolean(n.getHeight()-11+d,c,m)}}static embedDataBits(e,n,i){let l=0,c=-1,d=i.getWidth()-1,m=i.getHeight()-1;for(;d>0;){for(d===6&&(d-=1);m>=0&&m<i.getHeight();){for(let y=0;y<2;++y){const b=d-y;if(!ht.isEmpty(i.get(b,m)))continue;let _;l<e.getSize()?(_=e.get(l),++l):_=!1,n!==255&&on.getDataMaskBit(n,b,m)&&(_=!_),i.setBoolean(b,m,_)}m+=c}c=-c,m+=c,d-=2}if(l!==e.getSize())throw new Jt("Not all bits consumed: "+l+"/"+e.getSize())}static findMSBSet(e){return 32-F.numberOfLeadingZeros(e)}static calculateBCHCode(e,n){if(n===0)throw new I("0 polynomial");const i=ht.findMSBSet(n);for(e<<=i-1;ht.findMSBSet(e)>=i;)e^=n<<ht.findMSBSet(e)-i;return e}static makeTypeInfoBits(e,n,i){if(!Li.isValidMaskPattern(n))throw new Jt("Invalid mask pattern");const l=e.getBits()<<3|n;i.appendBits(l,5);const c=ht.calculateBCHCode(l,ht.TYPE_INFO_POLY);i.appendBits(c,10);const d=new Y;if(d.appendBits(ht.TYPE_INFO_MASK_PATTERN,15),i.xor(d),i.getSize()!==15)throw new Jt("should not happen but we got: "+i.getSize())}static makeVersionInfoBits(e,n){n.appendBits(e.getVersionNumber(),6);const i=ht.calculateBCHCode(e.getVersionNumber(),ht.VERSION_INFO_POLY);if(n.appendBits(i,12),n.getSize()!==18)throw new Jt("should not happen but we got: "+n.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let n=8;n<e.getWidth()-8;++n){const i=(n+1)%2;ht.isEmpty(e.get(n,6))&&e.setNumber(n,6,i),ht.isEmpty(e.get(6,n))&&e.setNumber(6,n,i)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new Jt;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,n,i){for(let l=0;l<8;++l){if(!ht.isEmpty(i.get(e+l,n)))throw new Jt;i.setNumber(e+l,n,0)}}static embedVerticalSeparationPattern(e,n,i){for(let l=0;l<7;++l){if(!ht.isEmpty(i.get(e,n+l)))throw new Jt;i.setNumber(e,n+l,0)}}static embedPositionAdjustmentPattern(e,n,i){for(let l=0;l<5;++l){const c=ht.POSITION_ADJUSTMENT_PATTERN[l];for(let d=0;d<5;++d)i.setNumber(e+d,n+l,c[d])}}static embedPositionDetectionPattern(e,n,i){for(let l=0;l<7;++l){const c=ht.POSITION_DETECTION_PATTERN[l];for(let d=0;d<7;++d)i.setNumber(e+d,n+l,c[d])}}static embedPositionDetectionPatternsAndSeparators(e){const n=ht.POSITION_DETECTION_PATTERN[0].length;ht.embedPositionDetectionPattern(0,0,e),ht.embedPositionDetectionPattern(e.getWidth()-n,0,e),ht.embedPositionDetectionPattern(0,e.getWidth()-n,e);const i=8;ht.embedHorizontalSeparationPattern(0,i-1,e),ht.embedHorizontalSeparationPattern(e.getWidth()-i,i-1,e),ht.embedHorizontalSeparationPattern(0,e.getWidth()-i,e);const l=7;ht.embedVerticalSeparationPattern(l,0,e),ht.embedVerticalSeparationPattern(e.getHeight()-l-1,0,e),ht.embedVerticalSeparationPattern(l,e.getHeight()-l,e)}static maybeEmbedPositionAdjustmentPatterns(e,n){if(e.getVersionNumber()<2)return;const i=e.getVersionNumber()-1,l=ht.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[i];for(let c=0,d=l.length;c!==d;c++){const m=l[c];if(m>=0)for(let y=0;y!==d;y++){const b=l[y];b>=0&&ht.isEmpty(n.get(b,m))&&ht.embedPositionAdjustmentPattern(b-2,m-2,n)}}}}ht.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ht.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ht.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ht.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ht.VERSION_INFO_POLY=7973,ht.TYPE_INFO_POLY=1335,ht.TYPE_INFO_MASK_PATTERN=21522;class Zc{constructor(e,n){this.dataBytes=e,this.errorCorrectionBytes=n}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class nn{constructor(){}static calculateMaskPenalty(e){return on.applyMaskPenaltyRule1(e)+on.applyMaskPenaltyRule2(e)+on.applyMaskPenaltyRule3(e)+on.applyMaskPenaltyRule4(e)}static encode(e,n,i=null){let l=nn.DEFAULT_BYTE_MODE_ENCODING;const c=i!==null&&i.get(kn.CHARACTER_SET)!==void 0;c&&(l=i.get(kn.CHARACTER_SET).toString());const d=this.chooseMode(e,l),m=new Y;if(d===lt.BYTE&&(c||nn.DEFAULT_BYTE_MODE_ENCODING!==l)){const Ve=J.getCharacterSetECIByName(l);Ve!==void 0&&this.appendECI(Ve,m)}this.appendModeInfo(d,m);const y=new Y;this.appendBytes(e,d,y,l);let b;if(i!==null&&i.get(kn.QR_VERSION)!==void 0){const Ve=Number.parseInt(i.get(kn.QR_VERSION).toString(),10);b=ge.getVersionForNumber(Ve);const Pe=this.calculateBitsNeeded(d,m,y,b);if(!this.willFit(Pe,b,n))throw new Jt("Data too big for requested version")}else b=this.recommendVersion(n,d,m,y);const _=new Y;_.appendBitArray(m);const P=d===lt.BYTE?y.getSizeInBytes():e.length;this.appendLengthInfo(P,b,d,_),_.appendBitArray(y);const D=b.getECBlocksForLevel(n),U=b.getTotalCodewords()-D.getTotalECCodewords();this.terminateBits(U,_);const $=this.interleaveWithECBytes(_,b.getTotalCodewords(),U,D.getNumBlocks()),te=new Li;te.setECLevel(n),te.setMode(d),te.setVersion(b);const oe=b.getDimensionForVersion(),he=new xo(oe,oe),Fe=this.chooseMaskPattern($,n,b,he);return te.setMaskPattern(Fe),ht.buildMatrix($,n,b,Fe,he),te.setMatrix(he),te}static recommendVersion(e,n,i,l){const c=this.calculateBitsNeeded(n,i,l,ge.getVersionForNumber(1)),d=this.chooseVersion(c,e),m=this.calculateBitsNeeded(n,i,l,d);return this.chooseVersion(m,e)}static calculateBitsNeeded(e,n,i,l){return n.getSize()+e.getCharacterCountBits(l)+i.getSize()}static getAlphanumericCode(e){return e<nn.ALPHANUMERIC_TABLE.length?nn.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,n=null){if(J.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(e))return lt.KANJI;let i=!1,l=!1;for(let c=0,d=e.length;c<d;++c){const m=e.charAt(c);if(nn.isDigit(m))i=!0;else if(this.getAlphanumericCode(m.charCodeAt(0))!==-1)l=!0;else return lt.BYTE}return l?lt.ALPHANUMERIC:i?lt.NUMERIC:lt.BYTE}static isOnlyDoubleByteKanji(e){let n;try{n=Re.encode(e,J.SJIS)}catch{return!1}const i=n.length;if(i%2!==0)return!1;for(let l=0;l<i;l+=2){const c=n[l]&255;if((c<129||c>159)&&(c<224||c>235))return!1}return!0}static chooseMaskPattern(e,n,i,l){let c=Number.MAX_SAFE_INTEGER,d=-1;for(let m=0;m<Li.NUM_MASK_PATTERNS;m++){ht.buildMatrix(e,n,i,m,l);let y=this.calculateMaskPenalty(l);y<c&&(c=y,d=m)}return d}static chooseVersion(e,n){for(let i=1;i<=40;i++){const l=ge.getVersionForNumber(i);if(nn.willFit(e,l,n))return l}throw new Jt("Data too big")}static willFit(e,n,i){const l=n.getTotalCodewords(),d=n.getECBlocksForLevel(i).getTotalECCodewords(),m=l-d,y=(e+7)/8;return m>=y}static terminateBits(e,n){const i=e*8;if(n.getSize()>i)throw new Jt("data bits cannot fit in the QR Code"+n.getSize()+" > "+i);for(let d=0;d<4&&n.getSize()<i;++d)n.appendBit(!1);const l=n.getSize()&7;if(l>0)for(let d=l;d<8;d++)n.appendBit(!1);const c=e-n.getSizeInBytes();for(let d=0;d<c;++d)n.appendBits(d&1?17:236,8);if(n.getSize()!==i)throw new Jt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,n,i,l,c,d){if(l>=i)throw new Jt("Block ID too large");const m=e%i,y=i-m,b=Math.floor(e/i),_=b+1,P=Math.floor(n/i),D=P+1,U=b-P,$=_-D;if(U!==$)throw new Jt("EC bytes mismatch");if(i!==y+m)throw new Jt("RS blocks mismatch");if(e!==(P+U)*y+(D+$)*m)throw new Jt("Total bytes mismatch");l<y?(c[0]=P,d[0]=U):(c[0]=D,d[0]=$)}static interleaveWithECBytes(e,n,i,l){if(e.getSizeInBytes()!==i)throw new Jt("Number of bits and data bytes does not match");let c=0,d=0,m=0;const y=new Array;for(let _=0;_<l;++_){const P=new Int32Array(1),D=new Int32Array(1);nn.getNumDataBytesAndNumECBytesForBlockID(n,i,l,_,P,D);const U=P[0],$=new Uint8Array(U);e.toBytes(8*c,$,0,U);const te=nn.generateECBytes($,D[0]);y.push(new Zc($,te)),d=Math.max(d,U),m=Math.max(m,te.length),c+=P[0]}if(i!==c)throw new Jt("Data bytes does not match offset");const b=new Y;for(let _=0;_<d;++_)for(const P of y){const D=P.getDataBytes();_<D.length&&b.appendBits(D[_],8)}for(let _=0;_<m;++_)for(const P of y){const D=P.getErrorCorrectionBytes();_<D.length&&b.appendBits(D[_],8)}if(n!==b.getSizeInBytes())throw new Jt("Interleaving error: "+n+" and "+b.getSizeInBytes()+" differ.");return b}static generateECBytes(e,n){const i=e.length,l=new Int32Array(i+n);for(let d=0;d<i;d++)l[d]=e[d]&255;new na(xe.QR_CODE_FIELD_256).encode(l,n);const c=new Uint8Array(n);for(let d=0;d<n;d++)c[d]=l[i+d];return c}static appendModeInfo(e,n){n.appendBits(e.getBits(),4)}static appendLengthInfo(e,n,i,l){const c=i.getCharacterCountBits(n);if(e>=1<<c)throw new Jt(e+" is bigger than "+((1<<c)-1));l.appendBits(e,c)}static appendBytes(e,n,i,l){switch(n){case lt.NUMERIC:nn.appendNumericBytes(e,i);break;case lt.ALPHANUMERIC:nn.appendAlphanumericBytes(e,i);break;case lt.BYTE:nn.append8BitBytes(e,i,l);break;case lt.KANJI:nn.appendKanjiBytes(e,i);break;default:throw new Jt("Invalid mode: "+n)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const n=nn.getDigit(e);return n>=0&&n<=9}static appendNumericBytes(e,n){const i=e.length;let l=0;for(;l<i;){const c=nn.getDigit(e.charAt(l));if(l+2<i){const d=nn.getDigit(e.charAt(l+1)),m=nn.getDigit(e.charAt(l+2));n.appendBits(c*100+d*10+m,10),l+=3}else if(l+1<i){const d=nn.getDigit(e.charAt(l+1));n.appendBits(c*10+d,7),l+=2}else n.appendBits(c,4),l++}}static appendAlphanumericBytes(e,n){const i=e.length;let l=0;for(;l<i;){const c=nn.getAlphanumericCode(e.charCodeAt(l));if(c===-1)throw new Jt;if(l+1<i){const d=nn.getAlphanumericCode(e.charCodeAt(l+1));if(d===-1)throw new Jt;n.appendBits(c*45+d,11),l+=2}else n.appendBits(c,6),l++}}static append8BitBytes(e,n,i){let l;try{l=Re.encode(e,i)}catch(c){throw new Jt(c)}for(let c=0,d=l.length;c!==d;c++){const m=l[c];n.appendBits(m,8)}}static appendKanjiBytes(e,n){let i;try{i=Re.encode(e,J.SJIS)}catch(c){throw new Jt(c)}const l=i.length;for(let c=0;c<l;c+=2){const d=i[c]&255,m=i[c+1]&255,y=d<<8&4294967295|m;let b=-1;if(y>=33088&&y<=40956?b=y-33088:y>=57408&&y<=60351&&(b=y-49472),b===-1)throw new Jt("Invalid byte sequence");const _=(b>>8)*192+(b&255);n.appendBits(_,13)}}static appendECI(e,n){n.appendBits(lt.ECI.getBits(),4),n.appendBits(e.getValue(),8)}}nn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),nn.DEFAULT_BYTE_MODE_ENCODING=J.UTF8.getName();class ji{write(e,n,i,l=null){if(e.length===0)throw new I("Found empty contents");if(n<0||i<0)throw new I("Requested dimensions are too small: "+n+"x"+i);let c=Ft.L,d=ji.QUIET_ZONE_SIZE;l!==null&&(l.get(kn.ERROR_CORRECTION)!==void 0&&(c=Ft.fromString(l.get(kn.ERROR_CORRECTION).toString())),l.get(kn.MARGIN)!==void 0&&(d=Number.parseInt(l.get(kn.MARGIN).toString(),10)));const m=nn.encode(e,c,l);return this.renderResult(m,n,i,d)}writeToDom(e,n,i,l,c=null){typeof e=="string"&&(e=document.querySelector(e));const d=this.write(n,i,l,c);e&&e.appendChild(d)}renderResult(e,n,i,l){const c=e.getMatrix();if(c===null)throw new $e;const d=c.getWidth(),m=c.getHeight(),y=d+l*2,b=m+l*2,_=Math.max(n,y),P=Math.max(i,b),D=Math.min(Math.floor(_/y),Math.floor(P/b)),U=Math.floor((_-d*D)/2),$=Math.floor((P-m*D)/2),te=this.createSVGElement(_,P);for(let oe=0,he=$;oe<m;oe++,he+=D)for(let Fe=0,Ve=U;Fe<d;Fe++,Ve+=D)if(c.get(Fe,oe)===1){const Pe=this.createSvgRectElement(Ve,he,D,D);te.appendChild(Pe)}return te}createSVGElement(e,n){const i=document.createElementNS(ji.SVG_NS,"svg");return i.setAttributeNS(null,"height",e.toString()),i.setAttributeNS(null,"width",n.toString()),i}createSvgRectElement(e,n,i,l){const c=document.createElementNS(ji.SVG_NS,"rect");return c.setAttributeNS(null,"x",e.toString()),c.setAttributeNS(null,"y",n.toString()),c.setAttributeNS(null,"height",i.toString()),c.setAttributeNS(null,"width",l.toString()),c.setAttributeNS(null,"fill","#000000"),c}}ji.QUIET_ZONE_SIZE=4,ji.SVG_NS="http://www.w3.org/2000/svg";class ss{encode(e,n,i,l,c){if(e.length===0)throw new I("Found empty contents");if(n!==ee.QR_CODE)throw new I("Can only encode QR_CODE, but got "+n);if(i<0||l<0)throw new I(`Requested dimensions are too small: ${i}x${l}`);let d=Ft.L,m=ss.QUIET_ZONE_SIZE;c!==null&&(c.get(kn.ERROR_CORRECTION)!==void 0&&(d=Ft.fromString(c.get(kn.ERROR_CORRECTION).toString())),c.get(kn.MARGIN)!==void 0&&(m=Number.parseInt(c.get(kn.MARGIN).toString(),10)));const y=nn.encode(e,d,c);return ss.renderResult(y,i,l,m)}static renderResult(e,n,i,l){const c=e.getMatrix();if(c===null)throw new $e;const d=c.getWidth(),m=c.getHeight(),y=d+l*2,b=m+l*2,_=Math.max(n,y),P=Math.max(i,b),D=Math.min(Math.floor(_/y),Math.floor(P/b)),U=Math.floor((_-d*D)/2),$=Math.floor((P-m*D)/2),te=new Te(_,P);for(let oe=0,he=$;oe<m;oe++,he+=D)for(let Fe=0,Ve=U;Fe<d;Fe++,Ve+=D)c.get(Fe,oe)===1&&te.setRegion(Ve,he,D,D);return te}}ss.QUIET_ZONE_SIZE=4;class $c{encode(e,n,i,l,c){let d;switch(n){case ee.QR_CODE:d=new ss;break;default:throw new I("No encoder available for format "+n)}return d.encode(e,n,i,l,c)}}class Yr extends ye{constructor(e,n,i,l,c,d,m,y){if(super(d,m),this.yuvData=e,this.dataWidth=n,this.dataHeight=i,this.left=l,this.top=c,l+d>n||c+m>i)throw new I("Crop rectangle does not fit within image data.");y&&this.reverseHorizontal(d,m)}getRow(e,n){if(e<0||e>=this.getHeight())throw new I("Requested row is outside the image: "+e);const i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));const l=(e+this.top)*this.dataWidth+this.left;return j.arraycopy(this.yuvData,l,n,0,i),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.yuvData;const i=e*n,l=new Uint8ClampedArray(i);let c=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return j.arraycopy(this.yuvData,c,l,0,i),l;for(let d=0;d<n;d++){const m=d*e;j.arraycopy(this.yuvData,c,l,m,e),c+=this.dataWidth}return l}isCropSupported(){return!0}crop(e,n,i,l){return new Yr(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+n,i,l,!1)}renderThumbnail(){const e=this.getWidth()/Yr.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/Yr.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(e*n),l=this.yuvData;let c=this.top*this.dataWidth+this.left;for(let d=0;d<n;d++){const m=d*e;for(let y=0;y<e;y++){const b=l[c+y*Yr.THUMBNAIL_SCALE_FACTOR]&255;i[m+y]=4278190080|b*65793}c+=this.dataWidth*Yr.THUMBNAIL_SCALE_FACTOR}return i}getThumbnailWidth(){return this.getWidth()/Yr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Yr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,n){const i=this.yuvData;for(let l=0,c=this.top*this.dataWidth+this.left;l<n;l++,c+=this.dataWidth){const d=c+e/2;for(let m=c,y=c+e-1;m<d;m++,y--){const b=i[m];i[m]=i[y],i[y]=b}}}invert(){return new De(this)}}Yr.THUMBNAIL_SCALE_FACTOR=2;class js extends ye{constructor(e,n,i,l,c,d,m){if(super(n,i),this.dataWidth=l,this.dataHeight=c,this.left=d,this.top=m,e.BYTES_PER_ELEMENT===4){const y=n*i,b=new Uint8ClampedArray(y);for(let _=0;_<y;_++){const P=e[_],D=P>>16&255,U=P>>7&510,$=P&255;b[_]=(D+U+$)/4&255}this.luminances=b}else this.luminances=e;if(l===void 0&&(this.dataWidth=n),c===void 0&&(this.dataHeight=i),d===void 0&&(this.left=0),m===void 0&&(this.top=0),this.left+n>this.dataWidth||this.top+i>this.dataHeight)throw new I("Crop rectangle does not fit within image data.")}getRow(e,n){if(e<0||e>=this.getHeight())throw new I("Requested row is outside the image: "+e);const i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));const l=(e+this.top)*this.dataWidth+this.left;return j.arraycopy(this.luminances,l,n,0,i),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.luminances;const i=e*n,l=new Uint8ClampedArray(i);let c=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return j.arraycopy(this.luminances,c,l,0,i),l;for(let d=0;d<n;d++){const m=d*e;j.arraycopy(this.luminances,c,l,m,e),c+=this.dataWidth}return l}isCropSupported(){return!0}crop(e,n,i,l){return new js(this.luminances,i,l,this.dataWidth,this.dataHeight,this.left+e,this.top+n)}invert(){return new De(this)}}class ul extends J{static forName(e){return this.getCharacterSetECIByName(e)}}class ra{}ra.ISO_8859_1=J.ISO8859_1;class dl{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class ia{static singletonList(e){return[e]}static min(e,n){return e.sort(n)[0]}}class Kc{constructor(e){this.previous=e}getPrevious(){return this.previous}}class os extends Kc{constructor(e,n,i){super(e),this.value=n,this.bitCount=i}appendTo(e,n){e.appendBits(this.value,this.bitCount)}add(e,n){return new os(this,e,n)}addBinaryShift(e,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new os(this,e,n)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+F.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class sa extends os{constructor(e,n,i){super(e,0,0),this.binaryShiftStart=n,this.binaryShiftByteCount=i}appendTo(e,n){for(let i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):i===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(n[this.binaryShiftStart+i],8)}addBinaryShift(e,n){return new sa(this,e,n)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function qc(k,e,n){return new sa(k,e,n)}function Bs(k,e,n){return new os(k,e,n)}const Qc=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],gi=0,as=1,Jn=2,fl=3,Vr=4,hl=new os(null,0,0),yo=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function pl(k){for(let e of k)z.fill(e,-1);return k[gi][Vr]=0,k[as][Vr]=0,k[as][gi]=28,k[fl][Vr]=0,k[Jn][Vr]=0,k[Jn][gi]=15,k}const oa=pl(z.createInt32Array(6,6));class or{constructor(e,n,i,l){this.token=e,this.mode=n,this.binaryShiftByteCount=i,this.bitCount=l}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,n){let i=this.bitCount,l=this.token;if(e!==this.mode){let d=yo[this.mode][e];l=Bs(l,d&65535,d>>16),i+=d>>16}let c=e===Jn?4:5;return l=Bs(l,n,c),new or(l,e,0,i+c)}shiftAndAppend(e,n){let i=this.token,l=this.mode===Jn?4:5;return i=Bs(i,oa[this.mode][e],l),i=Bs(i,n,5),new or(i,this.mode,0,this.bitCount+l+5)}addBinaryShiftChar(e){let n=this.token,i=this.mode,l=this.bitCount;if(this.mode===Vr||this.mode===Jn){let m=yo[i][gi];n=Bs(n,m&65535,m>>16),l+=m>>16,i=gi}let c=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new or(n,i,this.binaryShiftByteCount+1,l+c);return d.binaryShiftByteCount===2078&&(d=d.endBinaryShift(e+1)),d}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let n=this.token;return n=qc(n,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new or(n,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let n=this.bitCount+(yo[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?n+=or.calculateBinaryShiftCost(e)-or.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(n+=10),n<=e.bitCount}toBitArray(e){let n=[];for(let l=this.endBinaryShift(e.length).token;l!==null;l=l.getPrevious())n.unshift(l);let i=new Y;for(const l of n)l.appendTo(i,e);return i}toString(){return Ae.format("%s bits=%d bytes=%d",Qc[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}or.INITIAL_STATE=new or(hl,gi,0,0);function Jc(k){const e=Ae.getCharCode(" "),n=Ae.getCharCode("."),i=Ae.getCharCode(",");k[gi][e]=1;const l=Ae.getCharCode("Z"),c=Ae.getCharCode("A");for(let D=c;D<=l;D++)k[gi][D]=D-c+2;k[as][e]=1;const d=Ae.getCharCode("z"),m=Ae.getCharCode("a");for(let D=m;D<=d;D++)k[as][D]=D-m+2;k[Jn][e]=1;const y=Ae.getCharCode("9"),b=Ae.getCharCode("0");for(let D=b;D<=y;D++)k[Jn][D]=D-b+2;k[Jn][i]=12,k[Jn][n]=13;const _=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let D=0;D<_.length;D++)k[fl][Ae.getCharCode(_[D])]=D;const P=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let D=0;D<P.length;D++)Ae.getCharCode(P[D])>0&&(k[Vr][Ae.getCharCode(P[D])]=D);return k}const aa=Jc(z.createInt32Array(5,256));class Fs{constructor(e){this.text=e}encode(){const e=Ae.getCharCode(" "),n=Ae.getCharCode(`
`);let i=ia.singletonList(or.INITIAL_STATE);for(let c=0;c<this.text.length;c++){let d,m=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case Ae.getCharCode("\r"):d=m===n?2:0;break;case Ae.getCharCode("."):d=m===e?3:0;break;case Ae.getCharCode(","):d=m===e?4:0;break;case Ae.getCharCode(":"):d=m===e?5:0;break;default:d=0}d>0?(i=Fs.updateStateListForPair(i,c,d),c++):i=this.updateStateListForChar(i,c)}return ia.min(i,(c,d)=>c.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,n){const i=[];for(let l of e)this.updateStateForChar(l,n,i);return Fs.simplifyStates(i)}updateStateForChar(e,n,i){let l=this.text[n]&255,c=aa[e.getMode()][l]>0,d=null;for(let m=0;m<=Vr;m++){let y=aa[m][l];if(y>0){if(d==null&&(d=e.endBinaryShift(n)),!c||m===e.getMode()||m===Jn){const b=d.latchAndAppend(m,y);i.push(b)}if(!c&&oa[e.getMode()][m]>=0){const b=d.shiftAndAppend(m,y);i.push(b)}}}if(e.getBinaryShiftByteCount()>0||aa[e.getMode()][l]===0){let m=e.addBinaryShiftChar(n);i.push(m)}}static updateStateListForPair(e,n,i){const l=[];for(let c of e)this.updateStateForPair(c,n,i,l);return this.simplifyStates(l)}static updateStateForPair(e,n,i,l){let c=e.endBinaryShift(n);if(l.push(c.latchAndAppend(Vr,i)),e.getMode()!==Vr&&l.push(c.shiftAndAppend(Vr,i)),i===3||i===4){let d=c.latchAndAppend(Jn,16-i).latchAndAppend(Jn,1);l.push(d)}if(e.getBinaryShiftByteCount()>0){let d=e.addBinaryShiftChar(n).addBinaryShiftChar(n+1);l.push(d)}}static simplifyStates(e){let n=[];for(const i of e){let l=!0;for(const c of n){if(c.isBetterThanOrEqualTo(i)){l=!1;break}i.isBetterThanOrEqualTo(c)&&(n=n.filter(d=>d!==c))}l&&n.push(i)}return n}}class Ot{constructor(){}static encodeBytes(e){return Ot.encode(e,Ot.DEFAULT_EC_PERCENT,Ot.DEFAULT_AZTEC_LAYERS)}static encode(e,n,i){let l=new Fs(e).encode(),c=F.truncDivision(l.getSize()*n,100)+11,d=l.getSize()+c,m,y,b,_,P;if(i!==Ot.DEFAULT_AZTEC_LAYERS){if(m=i<0,y=Math.abs(i),y>(m?Ot.MAX_NB_BITS_COMPACT:Ot.MAX_NB_BITS))throw new I(Ae.format("Illegal value %s for layers",i));b=Ot.totalBitsInLayer(y,m),_=Ot.WORD_SIZE[y];let Pe=b-b%_;if(P=Ot.stuffBits(l,_),P.getSize()+c>Pe)throw new I("Data to large for user specified layer");if(m&&P.getSize()>_*64)throw new I("Data to large for user specified layer")}else{_=0,P=null;for(let Pe=0;;Pe++){if(Pe>Ot.MAX_NB_BITS)throw new I("Data too large for an Aztec code");if(m=Pe<=3,y=m?Pe+1:Pe,b=Ot.totalBitsInLayer(y,m),d>b)continue;(P==null||_!==Ot.WORD_SIZE[y])&&(_=Ot.WORD_SIZE[y],P=Ot.stuffBits(l,_));let Rt=b-b%_;if(!(m&&P.getSize()>_*64)&&P.getSize()+c<=Rt)break}}let D=Ot.generateCheckWords(P,b,_),U=P.getSize()/_,$=Ot.generateModeMessage(m,y,U),te=(m?11:14)+y*4,oe=new Int32Array(te),he;if(m){he=te;for(let Pe=0;Pe<oe.length;Pe++)oe[Pe]=Pe}else{he=te+1+2*F.truncDivision(F.truncDivision(te,2)-1,15);let Pe=F.truncDivision(te,2),Rt=F.truncDivision(he,2);for(let Et=0;Et<Pe;Et++){let hr=Et+F.truncDivision(Et,15);oe[Pe-Et-1]=Rt-hr-1,oe[Pe+Et]=Rt+hr+1}}let Fe=new Te(he);for(let Pe=0,Rt=0;Pe<y;Pe++){let Et=(y-Pe)*4+(m?9:12);for(let hr=0;hr<Et;hr++){let zr=hr*2;for(let Pn=0;Pn<2;Pn++)D.get(Rt+zr+Pn)&&Fe.set(oe[Pe*2+Pn],oe[Pe*2+hr]),D.get(Rt+Et*2+zr+Pn)&&Fe.set(oe[Pe*2+hr],oe[te-1-Pe*2-Pn]),D.get(Rt+Et*4+zr+Pn)&&Fe.set(oe[te-1-Pe*2-Pn],oe[te-1-Pe*2-hr]),D.get(Rt+Et*6+zr+Pn)&&Fe.set(oe[te-1-Pe*2-hr],oe[Pe*2+Pn])}Rt+=Et*8}if(Ot.drawModeMessage(Fe,m,he,$),m)Ot.drawBullsEye(Fe,F.truncDivision(he,2),5);else{Ot.drawBullsEye(Fe,F.truncDivision(he,2),7);for(let Pe=0,Rt=0;Pe<F.truncDivision(te,2)-1;Pe+=15,Rt+=16)for(let Et=F.truncDivision(he,2)&1;Et<he;Et+=2)Fe.set(F.truncDivision(he,2)-Rt,Et),Fe.set(F.truncDivision(he,2)+Rt,Et),Fe.set(Et,F.truncDivision(he,2)-Rt),Fe.set(Et,F.truncDivision(he,2)+Rt)}let Ve=new dl;return Ve.setCompact(m),Ve.setSize(he),Ve.setLayers(y),Ve.setCodeWords(U),Ve.setMatrix(Fe),Ve}static drawBullsEye(e,n,i){for(let l=0;l<i;l+=2)for(let c=n-l;c<=n+l;c++)e.set(c,n-l),e.set(c,n+l),e.set(n-l,c),e.set(n+l,c);e.set(n-i,n-i),e.set(n-i+1,n-i),e.set(n-i,n-i+1),e.set(n+i,n-i),e.set(n+i,n-i+1),e.set(n+i,n+i-1)}static generateModeMessage(e,n,i){let l=new Y;return e?(l.appendBits(n-1,2),l.appendBits(i-1,6),l=Ot.generateCheckWords(l,28,4)):(l.appendBits(n-1,5),l.appendBits(i-1,11),l=Ot.generateCheckWords(l,40,4)),l}static drawModeMessage(e,n,i,l){let c=F.truncDivision(i,2);if(n)for(let d=0;d<7;d++){let m=c-3+d;l.get(d)&&e.set(m,c-5),l.get(d+7)&&e.set(c+5,m),l.get(20-d)&&e.set(m,c+5),l.get(27-d)&&e.set(c-5,m)}else for(let d=0;d<10;d++){let m=c-5+d+F.truncDivision(d,5);l.get(d)&&e.set(m,c-7),l.get(d+10)&&e.set(c+7,m),l.get(29-d)&&e.set(m,c+7),l.get(39-d)&&e.set(c-7,m)}}static generateCheckWords(e,n,i){let l=e.getSize()/i,c=new na(Ot.getGF(i)),d=F.truncDivision(n,i),m=Ot.bitsToWords(e,i,d);c.encode(m,d-l);let y=n%i,b=new Y;b.appendBits(0,y);for(const _ of Array.from(m))b.appendBits(_,i);return b}static bitsToWords(e,n,i){let l=new Int32Array(i),c,d;for(c=0,d=e.getSize()/n;c<d;c++){let m=0;for(let y=0;y<n;y++)m|=e.get(c*n+y)?1<<n-y-1:0;l[c]=m}return l}static getGF(e){switch(e){case 4:return xe.AZTEC_PARAM;case 6:return xe.AZTEC_DATA_6;case 8:return xe.AZTEC_DATA_8;case 10:return xe.AZTEC_DATA_10;case 12:return xe.AZTEC_DATA_12;default:throw new I("Unsupported word size "+e)}}static stuffBits(e,n){let i=new Y,l=e.getSize(),c=(1<<n)-2;for(let d=0;d<l;d+=n){let m=0;for(let y=0;y<n;y++)(d+y>=l||e.get(d+y))&&(m|=1<<n-1-y);(m&c)===c?(i.appendBits(m&c,n),d--):m&c?i.appendBits(m,n):(i.appendBits(m|1,n),d--)}return i}static totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}Ot.DEFAULT_EC_PERCENT=33,Ot.DEFAULT_AZTEC_LAYERS=0,Ot.MAX_NB_BITS=32,Ot.MAX_NB_BITS_COMPACT=4,Ot.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Vs{encode(e,n,i,l){return this.encodeWithHints(e,n,i,l,null)}encodeWithHints(e,n,i,l,c){let d=ra.ISO_8859_1,m=Ot.DEFAULT_EC_PERCENT,y=Ot.DEFAULT_AZTEC_LAYERS;return c!=null&&(c.has(kn.CHARACTER_SET)&&(d=ul.forName(c.get(kn.CHARACTER_SET).toString())),c.has(kn.ERROR_CORRECTION)&&(m=F.parseInt(c.get(kn.ERROR_CORRECTION).toString())),c.has(kn.AZTEC_LAYERS)&&(y=F.parseInt(c.get(kn.AZTEC_LAYERS).toString()))),Vs.encodeLayers(e,n,i,l,d,m,y)}static encodeLayers(e,n,i,l,c,d,m){if(n!==ee.AZTEC)throw new I("Can only encode AZTEC, but got "+n);let y=Ot.encode(Ae.getBytes(e,c),d,m);return Vs.renderResult(y,i,l)}static renderResult(e,n,i){let l=e.getMatrix();if(l==null)throw new $e;let c=l.getWidth(),d=l.getHeight(),m=Math.max(n,c),y=Math.max(i,d),b=Math.min(m/c,y/d),_=(m-c*b)/2,P=(y-d*b)/2,D=new Te(m,y);for(let U=0,$=P;U<d;U++,$+=b)for(let te=0,oe=_;te<c;te++,oe+=b)l.get(te,U)&&D.setRegion(oe,$,b,b);return D}}a.AbstractExpandedDecoder=co,a.ArgumentException=A,a.ArithmeticException=de,a.AztecCode=dl,a.AztecCodeReader=Xt,a.AztecCodeWriter=Vs,a.AztecDecoder=qe,a.AztecDetector=Bt,a.AztecDetectorResult=rr,a.AztecEncoder=Ot,a.AztecHighLevelEncoder=Fs,a.AztecPoint=wt,a.BarcodeFormat=ee,a.Binarizer=L,a.BinaryBitmap=R,a.BitArray=Y,a.BitMatrix=Te,a.BitSource=es,a.BrowserAztecCodeReader=Be,a.BrowserBarcodeReader=ki,a.BrowserCodeReader=Ce,a.BrowserDatamatrixCodeReader=qo,a.BrowserMultiFormatReader=Ls,a.BrowserPDF417Reader=go,a.BrowserQRCodeReader=cl,a.BrowserQRCodeSvgWriter=ji,a.CharacterSetECI=J,a.ChecksumException=O,a.Code128Reader=ce,a.Code39Reader=ft,a.DataMatrixDecodedBitStreamParser=Cr,a.DataMatrixReader=fr,a.DecodeHintType=ne,a.DecoderResult=Le,a.DefaultGridSampler=ct,a.DetectorResult=gn,a.EAN13Reader=rn,a.EncodeHintType=kn,a.Exception=C,a.FormatException=q,a.GenericGF=xe,a.GenericGFPoly=Xe,a.GlobalHistogramBinarizer=ke,a.GridSampler=It,a.GridSamplerInstance=Je,a.HTMLCanvasElementLuminanceSource=be,a.HybridBinarizer=ve,a.ITFReader=ut,a.IllegalArgumentException=I,a.IllegalStateException=$e,a.InvertedLuminanceSource=De,a.LuminanceSource=ye,a.MathUtils=tt,a.MultiFormatOneDReader=hi,a.MultiFormatReader=mo,a.MultiFormatWriter=$c,a.NotFoundException=Z,a.OneDReader=Ie,a.PDF417DecodedBitStreamParser=pe,a.PDF417DecoderErrorCorrection=Qo,a.PDF417Reader=Gn,a.PDF417ResultMetadata=ho,a.PerspectiveTransform=Ue,a.PlanarYUVLuminanceSource=Yr,a.QRCodeByteMatrix=xo,a.QRCodeDataMask=Ye,a.QRCodeDecodedBitStreamParser=Qt,a.QRCodeDecoderErrorCorrectionLevel=Ft,a.QRCodeDecoderFormatInformation=En,a.QRCodeEncoder=nn,a.QRCodeEncoderQRCode=Li,a.QRCodeMaskUtil=on,a.QRCodeMatrixUtil=ht,a.QRCodeMode=lt,a.QRCodeReader=Un,a.QRCodeVersion=ge,a.QRCodeWriter=ss,a.RGBLuminanceSource=js,a.RSS14Reader=Kt,a.RSSExpandedReader=Ne,a.ReaderException=is,a.ReedSolomonDecoder=Tt,a.ReedSolomonEncoder=na,a.ReedSolomonException=Ze,a.Result=ae,a.ResultMetadataType=Se,a.ResultPoint=ze,a.StringUtils=Ae,a.UnsupportedOperationException=we,a.VideoInputDevice=X,a.WhiteRectangleDetector=Ge,a.WriterException=Jt,a.ZXingArrays=z,a.ZXingCharset=ul,a.ZXingInteger=F,a.ZXingStandardCharsets=ra,a.ZXingStringBuilder=Ee,a.ZXingStringEncoding=Re,a.ZXingSystem=j,a.createAbstractExpandedDecoder=fo,Object.defineProperty(a,"__esModule",{value:!0})})}(Oa,Oa.exports)),Oa.exports}yw();var Tf=function(){var r=function(s,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,p){u.__proto__=p}||function(u,p){for(var x in p)Object.prototype.hasOwnProperty.call(p,x)&&(u[x]=p[x])},r(s,a)};return function(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(s,a);function u(){this.constructor=s}s.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}}(),Cm=function(){function r(s,a){this.name=s,this.track=a}return r.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},r.prototype.apply=function(s){var a={};a[this.name]=s;var u={advanced:[a]};return this.track.applyConstraints(u)},r.prototype.value=function(){var s=this.track.getSettings();if(this.name in s){var a=s[this.name];return a}return null},r}(),ww=function(r){Tf(s,r);function s(a,u){return r.call(this,a,u)||this}return s.prototype.min=function(){return this.getCapabilities().min},s.prototype.max=function(){return this.getCapabilities().max},s.prototype.step=function(){return this.getCapabilities().step},s.prototype.apply=function(a){var u={};u[this.name]=a;var p={advanced:[u]};return this.track.applyConstraints(p)},s.prototype.getCapabilities=function(){this.failIfNotSupported();var a=this.track.getCapabilities(),u=a[this.name];return{min:u.min,max:u.max,step:u.step}},s.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},s}(Cm);(function(r){Tf(s,r);function s(a){return r.call(this,"zoom",a)||this}return s})(ww);(function(r){Tf(s,r);function s(a){return r.call(this,"torch",a)||this}return s})(Cm);var k1;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.NOT_STARTED=1]="NOT_STARTED",r[r.SCANNING=2]="SCANNING",r[r.PAUSED=3]="PAUSED"})(k1||(k1={}));var vw=function(){var r=function(s,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,p){u.__proto__=p}||function(u,p){for(var x in p)Object.prototype.hasOwnProperty.call(p,x)&&(u[x]=p[x])},r(s,a)};return function(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(s,a);function u(){this.constructor=s}s.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}}();(function(r){vw(s,r);function s(){return r!==null&&r.apply(this,arguments)||this}return s.DEFAULT_WIDTH=300,s.DEFAULT_WIDTH_OFFSET=2,s.FILE_SCAN_MIN_HEIGHT=300,s.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,s.MIN_QR_BOX_SIZE=50,s.SHADED_LEFT=1,s.SHADED_RIGHT=2,s.SHADED_TOP=3,s.SHADED_BOTTOM=4,s.SHADED_REGION_ELEMENT_ID="qr-shaded-region",s.VERBOSE=!1,s.BORDER_SHADER_DEFAULT_COLOR="#ffffff",s.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",s})(gw);var P1;(function(r){r[r.STATUS_DEFAULT=0]="STATUS_DEFAULT",r[r.STATUS_SUCCESS=1]="STATUS_SUCCESS",r[r.STATUS_WARNING=2]="STATUS_WARNING",r[r.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(P1||(P1={}));const Cw=({user:r,onProfileClick:s})=>{const a=Rn();return h.jsx("div",{children:h.jsx("div",{style:{position:"absolute",top:"45px",display:"flex",alignItems:"center",width:"94%",height:"10px",left:"3%"},children:r==null?h.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:10},children:h.jsx("button",{className:"login-button",onClick:()=>a("/login"),style:{width:"160px",height:"50px",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05))",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",color:"rgba(255, 255, 255, 0.85)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"14px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.2)",fontWeight:"900",fontSize:"1rem",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',padding:"10px 20px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",transition:"all 0.2s ease"},children:h.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Login"})})}):h.jsxs("div",{style:{position:"absolute",width:"100%",display:"flex",justifyContent:"space-between"},children:[h.jsx("button",{className:"login-button",onClick:()=>a("/logout"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:h.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Logout"})}),h.jsx("button",{className:"login-button",onClick:s,style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:h.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Profile"})})]})})})},If=N.createContext({});function _f(r){const s=N.useRef(null);return s.current===null&&(s.current=r()),s.current}const Rf=typeof window<"u",bm=Rf?N.useLayoutEffect:N.useEffect,zc=N.createContext(null);function kf(r,s){r.indexOf(s)===-1&&r.push(s)}function Pf(r,s){const a=r.indexOf(s);a>-1&&r.splice(a,1)}const $i=(r,s,a)=>a>s?s:a<r?r:a;let Mf=()=>{};const Ki={},Em=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r);function Sm(r){return typeof r=="object"&&r!==null}const Am=r=>/^0[^.\s]+$/u.test(r);function Of(r){let s;return()=>(s===void 0&&(s=r()),s)}const ni=r=>r,bw=(r,s)=>a=>s(r(a)),Ja=(...r)=>r.reduce(bw),Ha=(r,s,a)=>{const u=s-r;return u===0?1:(a-r)/u};class Df{constructor(){this.subscriptions=[]}add(s){return kf(this.subscriptions,s),()=>Pf(this.subscriptions,s)}notify(s,a,u){const p=this.subscriptions.length;if(p)if(p===1)this.subscriptions[0](s,a,u);else for(let x=0;x<p;x++){const w=this.subscriptions[x];w&&w(s,a,u)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ci=r=>r*1e3,bi=r=>r/1e3;function Nm(r,s){return s?r*(1e3/s):0}const Tm=(r,s,a)=>(((1-3*a+3*s)*r+(3*a-6*s))*r+3*s)*r,Ew=1e-7,Sw=12;function Aw(r,s,a,u,p){let x,w,E=0;do w=s+(a-s)/2,x=Tm(w,u,p)-r,x>0?a=w:s=w;while(Math.abs(x)>Ew&&++E<Sw);return w}function el(r,s,a,u){if(r===s&&a===u)return ni;const p=x=>Aw(x,0,1,r,a);return x=>x===0||x===1?x:Tm(p(x),s,u)}const Im=r=>s=>s<=.5?r(2*s)/2:(2-r(2*(1-s)))/2,_m=r=>s=>1-r(1-s),Rm=el(.33,1.53,.69,.99),Lf=_m(Rm),km=Im(Lf),Pm=r=>(r*=2)<1?.5*Lf(r):.5*(2-Math.pow(2,-10*(r-1))),jf=r=>1-Math.sin(Math.acos(r)),Mm=_m(jf),Om=Im(jf),Nw=el(.42,0,1,1),Tw=el(0,0,.58,1),Dm=el(.42,0,.58,1),Iw=r=>Array.isArray(r)&&typeof r[0]!="number",Lm=r=>Array.isArray(r)&&typeof r[0]=="number",_w={linear:ni,easeIn:Nw,easeInOut:Dm,easeOut:Tw,circIn:jf,circInOut:Om,circOut:Mm,backIn:Lf,backInOut:km,backOut:Rm,anticipate:Pm},Rw=r=>typeof r=="string",M1=r=>{if(Lm(r)){Mf(r.length===4);const[s,a,u,p]=r;return el(s,a,u,p)}else if(Rw(r))return _w[r];return r},cc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function kw(r,s){let a=new Set,u=new Set,p=!1,x=!1;const w=new WeakSet;let E={delta:0,timestamp:0,isProcessing:!1};function v(A){w.has(A)&&(C.schedule(A),r()),A(E)}const C={schedule:(A,I=!1,R=!1)=>{const L=R&&p?a:u;return I&&w.add(A),L.has(A)||L.add(A),A},cancel:A=>{u.delete(A),w.delete(A)},process:A=>{if(E=A,p){x=!0;return}p=!0,[a,u]=[u,a],a.forEach(v),a.clear(),p=!1,x&&(x=!1,C.process(A))}};return C}const Pw=40;function jm(r,s){let a=!1,u=!0;const p={delta:0,timestamp:0,isProcessing:!1},x=()=>a=!0,w=cc.reduce((F,Y)=>(F[Y]=kw(x),F),{}),{setup:E,read:v,resolveKeyframes:C,preUpdate:A,update:I,preRender:R,render:O,postRender:L}=w,j=()=>{const F=Ki.useManualTiming?p.timestamp:performance.now();a=!1,Ki.useManualTiming||(p.delta=u?1e3/60:Math.max(Math.min(F-p.timestamp,Pw),1)),p.timestamp=F,p.isProcessing=!0,E.process(p),v.process(p),C.process(p),A.process(p),I.process(p),R.process(p),O.process(p),L.process(p),p.isProcessing=!1,a&&s&&(u=!1,r(j))},B=()=>{a=!0,u=!0,p.isProcessing||r(j)};return{schedule:cc.reduce((F,Y)=>{const K=w[Y];return F[Y]=(ne,q=!1,ie=!1)=>(a||B(),K.schedule(ne,q,ie)),F},{}),cancel:F=>{for(let Y=0;Y<cc.length;Y++)w[cc[Y]].cancel(F)},state:p,steps:w}}const{schedule:mn,cancel:Ns,state:dr,steps:Ad}=jm(typeof requestAnimationFrame<"u"?requestAnimationFrame:ni,!0);let yc;function Mw(){yc=void 0}const Lr={now:()=>(yc===void 0&&Lr.set(dr.isProcessing||Ki.useManualTiming?dr.timestamp:performance.now()),yc),set:r=>{yc=r,queueMicrotask(Mw)}},Bm=r=>s=>typeof s=="string"&&s.startsWith(r),Bf=Bm("--"),Ow=Bm("var(--"),Ff=r=>Ow(r)?Dw.test(r.split("/*")[0].trim()):!1,Dw=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Zo={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},Ga={...Zo,transform:r=>$i(0,1,r)},uc={...Zo,default:1},La=r=>Math.round(r*1e5)/1e5,Vf=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Lw(r){return r==null}const jw=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,zf=(r,s)=>a=>!!(typeof a=="string"&&jw.test(a)&&a.startsWith(r)||s&&!Lw(a)&&Object.prototype.hasOwnProperty.call(a,s)),Fm=(r,s,a)=>u=>{if(typeof u!="string")return u;const[p,x,w,E]=u.match(Vf);return{[r]:parseFloat(p),[s]:parseFloat(x),[a]:parseFloat(w),alpha:E!==void 0?parseFloat(E):1}},Bw=r=>$i(0,255,r),Nd={...Zo,transform:r=>Math.round(Bw(r))},to={test:zf("rgb","red"),parse:Fm("red","green","blue"),transform:({red:r,green:s,blue:a,alpha:u=1})=>"rgba("+Nd.transform(r)+", "+Nd.transform(s)+", "+Nd.transform(a)+", "+La(Ga.transform(u))+")"};function Fw(r){let s="",a="",u="",p="";return r.length>5?(s=r.substring(1,3),a=r.substring(3,5),u=r.substring(5,7),p=r.substring(7,9)):(s=r.substring(1,2),a=r.substring(2,3),u=r.substring(3,4),p=r.substring(4,5),s+=s,a+=a,u+=u,p+=p),{red:parseInt(s,16),green:parseInt(a,16),blue:parseInt(u,16),alpha:p?parseInt(p,16)/255:1}}const Xd={test:zf("#"),parse:Fw,transform:to.transform},tl=r=>({test:s=>typeof s=="string"&&s.endsWith(r)&&s.split(" ").length===1,parse:parseFloat,transform:s=>`${s}${r}`}),Es=tl("deg"),Ei=tl("%"),vt=tl("px"),Vw=tl("vh"),zw=tl("vw"),O1={...Ei,parse:r=>Ei.parse(r)/100,transform:r=>Ei.transform(r*100)},Lo={test:zf("hsl","hue"),parse:Fm("hue","saturation","lightness"),transform:({hue:r,saturation:s,lightness:a,alpha:u=1})=>"hsla("+Math.round(r)+", "+Ei.transform(La(s))+", "+Ei.transform(La(a))+", "+La(Ga.transform(u))+")"},Bn={test:r=>to.test(r)||Xd.test(r)||Lo.test(r),parse:r=>to.test(r)?to.parse(r):Lo.test(r)?Lo.parse(r):Xd.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?to.transform(r):Lo.transform(r),getAnimatableNone:r=>{const s=Bn.parse(r);return s.alpha=0,Bn.transform(s)}},Uw=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Ww(r){var s,a;return isNaN(r)&&typeof r=="string"&&(((s=r.match(Vf))==null?void 0:s.length)||0)+(((a=r.match(Uw))==null?void 0:a.length)||0)>0}const Vm="number",zm="color",Hw="var",Gw="var(",D1="${}",Xw=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Xa(r){const s=r.toString(),a=[],u={color:[],number:[],var:[]},p=[];let x=0;const E=s.replace(Xw,v=>(Bn.test(v)?(u.color.push(x),p.push(zm),a.push(Bn.parse(v))):v.startsWith(Gw)?(u.var.push(x),p.push(Hw),a.push(v)):(u.number.push(x),p.push(Vm),a.push(parseFloat(v))),++x,D1)).split(D1);return{values:a,split:E,indexes:u,types:p}}function Um(r){return Xa(r).values}function Wm(r){const{split:s,types:a}=Xa(r),u=s.length;return p=>{let x="";for(let w=0;w<u;w++)if(x+=s[w],p[w]!==void 0){const E=a[w];E===Vm?x+=La(p[w]):E===zm?x+=Bn.transform(p[w]):x+=p[w]}return x}}const Yw=r=>typeof r=="number"?0:Bn.test(r)?Bn.getAnimatableNone(r):r;function Zw(r){const s=Um(r);return Wm(r)(s.map(Yw))}const Ts={test:Ww,parse:Um,createTransformer:Wm,getAnimatableNone:Zw};function Td(r,s,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?r+(s-r)*6*a:a<1/2?s:a<2/3?r+(s-r)*(2/3-a)*6:r}function $w({hue:r,saturation:s,lightness:a,alpha:u}){r/=360,s/=100,a/=100;let p=0,x=0,w=0;if(!s)p=x=w=a;else{const E=a<.5?a*(1+s):a+s-a*s,v=2*a-E;p=Td(v,E,r+1/3),x=Td(v,E,r),w=Td(v,E,r-1/3)}return{red:Math.round(p*255),green:Math.round(x*255),blue:Math.round(w*255),alpha:u}}function Nc(r,s){return a=>a>0?s:r}const Cn=(r,s,a)=>r+(s-r)*a,Id=(r,s,a)=>{const u=r*r,p=a*(s*s-u)+u;return p<0?0:Math.sqrt(p)},Kw=[Xd,to,Lo],qw=r=>Kw.find(s=>s.test(r));function L1(r){const s=qw(r);if(!s)return!1;let a=s.parse(r);return s===Lo&&(a=$w(a)),a}const j1=(r,s)=>{const a=L1(r),u=L1(s);if(!a||!u)return Nc(r,s);const p={...a};return x=>(p.red=Id(a.red,u.red,x),p.green=Id(a.green,u.green,x),p.blue=Id(a.blue,u.blue,x),p.alpha=Cn(a.alpha,u.alpha,x),to.transform(p))},Yd=new Set(["none","hidden"]);function Qw(r,s){return Yd.has(r)?a=>a<=0?r:s:a=>a>=1?s:r}function Jw(r,s){return a=>Cn(r,s,a)}function Uf(r){return typeof r=="number"?Jw:typeof r=="string"?Ff(r)?Nc:Bn.test(r)?j1:nv:Array.isArray(r)?Hm:typeof r=="object"?Bn.test(r)?j1:ev:Nc}function Hm(r,s){const a=[...r],u=a.length,p=r.map((x,w)=>Uf(x)(x,s[w]));return x=>{for(let w=0;w<u;w++)a[w]=p[w](x);return a}}function ev(r,s){const a={...r,...s},u={};for(const p in a)r[p]!==void 0&&s[p]!==void 0&&(u[p]=Uf(r[p])(r[p],s[p]));return p=>{for(const x in u)a[x]=u[x](p);return a}}function tv(r,s){const a=[],u={color:0,var:0,number:0};for(let p=0;p<s.values.length;p++){const x=s.types[p],w=r.indexes[x][u[x]],E=r.values[w]??0;a[p]=E,u[x]++}return a}const nv=(r,s)=>{const a=Ts.createTransformer(s),u=Xa(r),p=Xa(s);return u.indexes.var.length===p.indexes.var.length&&u.indexes.color.length===p.indexes.color.length&&u.indexes.number.length>=p.indexes.number.length?Yd.has(r)&&!p.values.length||Yd.has(s)&&!u.values.length?Qw(r,s):Ja(Hm(tv(u,p),p.values),a):Nc(r,s)};function Gm(r,s,a){return typeof r=="number"&&typeof s=="number"&&typeof a=="number"?Cn(r,s,a):Uf(r)(r,s)}const rv=r=>{const s=({timestamp:a})=>r(a);return{start:(a=!0)=>mn.update(s,a),stop:()=>Ns(s),now:()=>dr.isProcessing?dr.timestamp:Lr.now()}},Xm=(r,s,a=10)=>{let u="";const p=Math.max(Math.round(s/a),2);for(let x=0;x<p;x++)u+=Math.round(r(x/(p-1))*1e4)/1e4+", ";return`linear(${u.substring(0,u.length-2)})`},Tc=2e4;function Wf(r){let s=0;const a=50;let u=r.next(s);for(;!u.done&&s<Tc;)s+=a,u=r.next(s);return s>=Tc?1/0:s}function iv(r,s=100,a){const u=a({...r,keyframes:[0,s]}),p=Math.min(Wf(u),Tc);return{type:"keyframes",ease:x=>u.next(p*x).value/s,duration:bi(p)}}const sv=5;function Ym(r,s,a){const u=Math.max(s-sv,0);return Nm(a-r(u),s-u)}const _n={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},B1=.001;function ov({duration:r=_n.duration,bounce:s=_n.bounce,velocity:a=_n.velocity,mass:u=_n.mass}){let p,x,w=1-s;w=$i(_n.minDamping,_n.maxDamping,w),r=$i(_n.minDuration,_n.maxDuration,bi(r)),w<1?(p=C=>{const A=C*w,I=A*r,R=A-a,O=Zd(C,w),L=Math.exp(-I);return B1-R/O*L},x=C=>{const I=C*w*r,R=I*a+a,O=Math.pow(w,2)*Math.pow(C,2)*r,L=Math.exp(-I),j=Zd(Math.pow(C,2),w);return(-p(C)+B1>0?-1:1)*((R-O)*L)/j}):(p=C=>{const A=Math.exp(-C*r),I=(C-a)*r+1;return-.001+A*I},x=C=>{const A=Math.exp(-C*r),I=(a-C)*(r*r);return A*I});const E=5/r,v=lv(p,x,E);if(r=Ci(r),isNaN(v))return{stiffness:_n.stiffness,damping:_n.damping,duration:r};{const C=Math.pow(v,2)*u;return{stiffness:C,damping:w*2*Math.sqrt(u*C),duration:r}}}const av=12;function lv(r,s,a){let u=a;for(let p=1;p<av;p++)u=u-r(u)/s(u);return u}function Zd(r,s){return r*Math.sqrt(1-s*s)}const cv=["duration","bounce"],uv=["stiffness","damping","mass"];function F1(r,s){return s.some(a=>r[a]!==void 0)}function dv(r){let s={velocity:_n.velocity,stiffness:_n.stiffness,damping:_n.damping,mass:_n.mass,isResolvedFromDuration:!1,...r};if(!F1(r,uv)&&F1(r,cv))if(r.visualDuration){const a=r.visualDuration,u=2*Math.PI/(a*1.2),p=u*u,x=2*$i(.05,1,1-(r.bounce||0))*Math.sqrt(p);s={...s,mass:_n.mass,stiffness:p,damping:x}}else{const a=ov(r);s={...s,...a,mass:_n.mass},s.isResolvedFromDuration=!0}return s}function Ic(r=_n.visualDuration,s=_n.bounce){const a=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:s}:r;let{restSpeed:u,restDelta:p}=a;const x=a.keyframes[0],w=a.keyframes[a.keyframes.length-1],E={done:!1,value:x},{stiffness:v,damping:C,mass:A,duration:I,velocity:R,isResolvedFromDuration:O}=dv({...a,velocity:-bi(a.velocity||0)}),L=R||0,j=C/(2*Math.sqrt(v*A)),B=w-x,W=bi(Math.sqrt(v/A)),z=Math.abs(B)<5;u||(u=z?_n.restSpeed.granular:_n.restSpeed.default),p||(p=z?_n.restDelta.granular:_n.restDelta.default);let F;if(j<1){const K=Zd(W,j);F=ne=>{const q=Math.exp(-j*W*ne);return w-q*((L+j*W*B)/K*Math.sin(K*ne)+B*Math.cos(K*ne))}}else if(j===1)F=K=>w-Math.exp(-W*K)*(B+(L+W*B)*K);else{const K=W*Math.sqrt(j*j-1);F=ne=>{const q=Math.exp(-j*W*ne),ie=Math.min(K*ne,300);return w-q*((L+j*W*B)*Math.sinh(ie)+K*B*Math.cosh(ie))/K}}const Y={calculatedDuration:O&&I||null,next:K=>{const ne=F(K);if(O)E.done=K>=I;else{let q=K===0?L:0;j<1&&(q=K===0?Ci(L):Ym(F,K,ne));const ie=Math.abs(q)<=u,J=Math.abs(w-ne)<=p;E.done=ie&&J}return E.value=E.done?w:ne,E},toString:()=>{const K=Math.min(Wf(Y),Tc),ne=Xm(q=>Y.next(K*q).value,K,30);return K+"ms "+ne},toTransition:()=>{}};return Y}Ic.applyToOptions=r=>{const s=iv(r,100,Ic);return r.ease=s.ease,r.duration=Ci(s.duration),r.type="keyframes",r};function $d({keyframes:r,velocity:s=0,power:a=.8,timeConstant:u=325,bounceDamping:p=10,bounceStiffness:x=500,modifyTarget:w,min:E,max:v,restDelta:C=.5,restSpeed:A}){const I=r[0],R={done:!1,value:I},O=ie=>E!==void 0&&ie<E||v!==void 0&&ie>v,L=ie=>E===void 0?v:v===void 0||Math.abs(E-ie)<Math.abs(v-ie)?E:v;let j=a*s;const B=I+j,W=w===void 0?B:w(B);W!==B&&(j=W-I);const z=ie=>-j*Math.exp(-ie/u),F=ie=>W+z(ie),Y=ie=>{const J=z(ie),we=F(ie);R.done=Math.abs(J)<=C,R.value=R.done?W:we};let K,ne;const q=ie=>{O(R.value)&&(K=ie,ne=Ic({keyframes:[R.value,L(R.value)],velocity:Ym(F,ie,R.value),damping:p,stiffness:x,restDelta:C,restSpeed:A}))};return q(0),{calculatedDuration:null,next:ie=>{let J=!1;return!ne&&K===void 0&&(J=!0,Y(ie),q(ie)),K!==void 0&&ie>=K?ne.next(ie-K):(!J&&Y(ie),R)}}}function fv(r,s,a){const u=[],p=a||Ki.mix||Gm,x=r.length-1;for(let w=0;w<x;w++){let E=p(r[w],r[w+1]);if(s){const v=Array.isArray(s)?s[w]||ni:s;E=Ja(v,E)}u.push(E)}return u}function hv(r,s,{clamp:a=!0,ease:u,mixer:p}={}){const x=r.length;if(Mf(x===s.length),x===1)return()=>s[0];if(x===2&&s[0]===s[1])return()=>s[1];const w=r[0]===r[1];r[0]>r[x-1]&&(r=[...r].reverse(),s=[...s].reverse());const E=fv(s,u,p),v=E.length,C=A=>{if(w&&A<r[0])return s[0];let I=0;if(v>1)for(;I<r.length-2&&!(A<r[I+1]);I++);const R=Ha(r[I],r[I+1],A);return E[I](R)};return a?A=>C($i(r[0],r[x-1],A)):C}function pv(r,s){const a=r[r.length-1];for(let u=1;u<=s;u++){const p=Ha(0,s,u);r.push(Cn(a,1,p))}}function mv(r){const s=[0];return pv(s,r.length-1),s}function gv(r,s){return r.map(a=>a*s)}function xv(r,s){return r.map(()=>s||Dm).splice(0,r.length-1)}function ja({duration:r=300,keyframes:s,times:a,ease:u="easeInOut"}){const p=Iw(u)?u.map(M1):M1(u),x={done:!1,value:s[0]},w=gv(a&&a.length===s.length?a:mv(s),r),E=hv(w,s,{ease:Array.isArray(p)?p:xv(s,p)});return{calculatedDuration:r,next:v=>(x.value=E(v),x.done=v>=r,x)}}const yv=r=>r!==null;function Hf(r,{repeat:s,repeatType:a="loop"},u,p=1){const x=r.filter(yv),E=p<0||s&&a!=="loop"&&s%2===1?0:x.length-1;return!E||u===void 0?x[E]:u}const wv={decay:$d,inertia:$d,tween:ja,keyframes:ja,spring:Ic};function Zm(r){typeof r.type=="string"&&(r.type=wv[r.type])}class Gf{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(s=>{this.resolve=s})}notifyFinished(){this.resolve()}then(s,a){return this.finished.then(s,a)}}const vv=r=>r/100;class Xf extends Gf{constructor(s){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var u,p;const{motionValue:a}=this.options;a&&a.updatedAt!==Lr.now()&&this.tick(Lr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(p=(u=this.options).onStop)==null||p.call(u))},this.options=s,this.initAnimation(),this.play(),s.autoplay===!1&&this.pause()}initAnimation(){const{options:s}=this;Zm(s);const{type:a=ja,repeat:u=0,repeatDelay:p=0,repeatType:x,velocity:w=0}=s;let{keyframes:E}=s;const v=a||ja;v!==ja&&typeof E[0]!="number"&&(this.mixKeyframes=Ja(vv,Gm(E[0],E[1])),E=[0,100]);const C=v({...s,keyframes:E});x==="mirror"&&(this.mirroredGenerator=v({...s,keyframes:[...E].reverse(),velocity:-w})),C.calculatedDuration===null&&(C.calculatedDuration=Wf(C));const{calculatedDuration:A}=C;this.calculatedDuration=A,this.resolvedDuration=A+p,this.totalDuration=this.resolvedDuration*(u+1)-p,this.generator=C}updateTime(s){const a=Math.round(s-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=a}tick(s,a=!1){const{generator:u,totalDuration:p,mixKeyframes:x,mirroredGenerator:w,resolvedDuration:E,calculatedDuration:v}=this;if(this.startTime===null)return u.next(0);const{delay:C=0,keyframes:A,repeat:I,repeatType:R,repeatDelay:O,type:L,onUpdate:j,finalKeyframe:B}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,s):this.speed<0&&(this.startTime=Math.min(s-p/this.speed,this.startTime)),a?this.currentTime=s:this.updateTime(s);const W=this.currentTime-C*(this.playbackSpeed>=0?1:-1),z=this.playbackSpeed>=0?W<0:W>p;this.currentTime=Math.max(W,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let F=this.currentTime,Y=u;if(I){const ie=Math.min(this.currentTime,p)/E;let J=Math.floor(ie),we=ie%1;!we&&ie>=1&&(we=1),we===1&&J--,J=Math.min(J,I+1),!!(J%2)&&(R==="reverse"?(we=1-we,O&&(we-=O/E)):R==="mirror"&&(Y=w)),F=$i(0,1,we)*E}const K=z?{done:!1,value:A[0]}:Y.next(F);x&&(K.value=x(K.value));let{done:ne}=K;!z&&v!==null&&(ne=this.playbackSpeed>=0?this.currentTime>=p:this.currentTime<=0);const q=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ne);return q&&L!==$d&&(K.value=Hf(A,this.options,B,this.speed)),j&&j(K.value),q&&this.finish(),K}then(s,a){return this.finished.then(s,a)}get duration(){return bi(this.calculatedDuration)}get time(){return bi(this.currentTime)}set time(s){var a;s=Ci(s),this.currentTime=s,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=s:this.driver&&(this.startTime=this.driver.now()-s/this.playbackSpeed),(a=this.driver)==null||a.start(!1)}get speed(){return this.playbackSpeed}set speed(s){this.updateTime(Lr.now());const a=this.playbackSpeed!==s;this.playbackSpeed=s,a&&(this.time=bi(this.currentTime))}play(){var p,x;if(this.isStopped)return;const{driver:s=rv,startTime:a}=this.options;this.driver||(this.driver=s(w=>this.tick(w))),(x=(p=this.options).onPlay)==null||x.call(p);const u=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=u):this.holdTime!==null?this.startTime=u-this.holdTime:this.startTime||(this.startTime=a??u),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Lr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var s,a;this.notifyFinished(),this.teardown(),this.state="finished",(a=(s=this.options).onComplete)==null||a.call(s)}cancel(){var s,a;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(a=(s=this.options).onCancel)==null||a.call(s)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(s){return this.startTime=0,this.tick(s,!0)}attachTimeline(s){var a;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(a=this.driver)==null||a.stop(),s.observe(this)}}function Cv(r){for(let s=1;s<r.length;s++)r[s]??(r[s]=r[s-1])}const no=r=>r*180/Math.PI,Kd=r=>{const s=no(Math.atan2(r[1],r[0]));return qd(s)},bv={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:r=>(Math.abs(r[0])+Math.abs(r[3]))/2,rotate:Kd,rotateZ:Kd,skewX:r=>no(Math.atan(r[1])),skewY:r=>no(Math.atan(r[2])),skew:r=>(Math.abs(r[1])+Math.abs(r[2]))/2},qd=r=>(r=r%360,r<0&&(r+=360),r),V1=Kd,z1=r=>Math.sqrt(r[0]*r[0]+r[1]*r[1]),U1=r=>Math.sqrt(r[4]*r[4]+r[5]*r[5]),Ev={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:z1,scaleY:U1,scale:r=>(z1(r)+U1(r))/2,rotateX:r=>qd(no(Math.atan2(r[6],r[5]))),rotateY:r=>qd(no(Math.atan2(-r[2],r[0]))),rotateZ:V1,rotate:V1,skewX:r=>no(Math.atan(r[4])),skewY:r=>no(Math.atan(r[1])),skew:r=>(Math.abs(r[1])+Math.abs(r[4]))/2};function Qd(r){return r.includes("scale")?1:0}function Jd(r,s){if(!r||r==="none")return Qd(s);const a=r.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let u,p;if(a)u=Ev,p=a;else{const E=r.match(/^matrix\(([-\d.e\s,]+)\)$/u);u=bv,p=E}if(!p)return Qd(s);const x=u[s],w=p[1].split(",").map(Av);return typeof x=="function"?x(w):w[x]}const Sv=(r,s)=>{const{transform:a="none"}=getComputedStyle(r);return Jd(a,s)};function Av(r){return parseFloat(r.trim())}const $o=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ko=new Set($o),W1=r=>r===Zo||r===vt,Nv=new Set(["x","y","z"]),Tv=$o.filter(r=>!Nv.has(r));function Iv(r){const s=[];return Tv.forEach(a=>{const u=r.getValue(a);u!==void 0&&(s.push([a,u.get()]),u.set(a.startsWith("scale")?1:0))}),s}const io={width:({x:r},{paddingLeft:s="0",paddingRight:a="0"})=>r.max-r.min-parseFloat(s)-parseFloat(a),height:({y:r},{paddingTop:s="0",paddingBottom:a="0"})=>r.max-r.min-parseFloat(s)-parseFloat(a),top:(r,{top:s})=>parseFloat(s),left:(r,{left:s})=>parseFloat(s),bottom:({y:r},{top:s})=>parseFloat(s)+(r.max-r.min),right:({x:r},{left:s})=>parseFloat(s)+(r.max-r.min),x:(r,{transform:s})=>Jd(s,"x"),y:(r,{transform:s})=>Jd(s,"y")};io.translateX=io.x;io.translateY=io.y;const so=new Set;let ef=!1,tf=!1,nf=!1;function $m(){if(tf){const r=Array.from(so).filter(u=>u.needsMeasurement),s=new Set(r.map(u=>u.element)),a=new Map;s.forEach(u=>{const p=Iv(u);p.length&&(a.set(u,p),u.render())}),r.forEach(u=>u.measureInitialState()),s.forEach(u=>{u.render();const p=a.get(u);p&&p.forEach(([x,w])=>{var E;(E=u.getValue(x))==null||E.set(w)})}),r.forEach(u=>u.measureEndState()),r.forEach(u=>{u.suspendedScrollY!==void 0&&window.scrollTo(0,u.suspendedScrollY)})}tf=!1,ef=!1,so.forEach(r=>r.complete(nf)),so.clear()}function Km(){so.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(tf=!0)})}function _v(){nf=!0,Km(),$m(),nf=!1}class Yf{constructor(s,a,u,p,x,w=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...s],this.onComplete=a,this.name=u,this.motionValue=p,this.element=x,this.isAsync=w}scheduleResolve(){this.state="scheduled",this.isAsync?(so.add(this),ef||(ef=!0,mn.read(Km),mn.resolveKeyframes($m))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:s,name:a,element:u,motionValue:p}=this;if(s[0]===null){const x=p==null?void 0:p.get(),w=s[s.length-1];if(x!==void 0)s[0]=x;else if(u&&a){const E=u.readValue(a,w);E!=null&&(s[0]=E)}s[0]===void 0&&(s[0]=w),p&&x===void 0&&p.set(s[0])}Cv(s)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(s=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,s),so.delete(this)}cancel(){this.state==="scheduled"&&(so.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Rv=r=>r.startsWith("--");function kv(r,s,a){Rv(s)?r.style.setProperty(s,a):r.style[s]=a}const Pv=Of(()=>window.ScrollTimeline!==void 0),Mv={};function Ov(r,s){const a=Of(r);return()=>Mv[s]??a()}const qm=Ov(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Da=([r,s,a,u])=>`cubic-bezier(${r}, ${s}, ${a}, ${u})`,H1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Da([0,.65,.55,1]),circOut:Da([.55,0,1,.45]),backIn:Da([.31,.01,.66,-.59]),backOut:Da([.33,1.53,.69,.99])};function Qm(r,s){if(r)return typeof r=="function"?qm()?Xm(r,s):"ease-out":Lm(r)?Da(r):Array.isArray(r)?r.map(a=>Qm(a,s)||H1.easeOut):H1[r]}function Dv(r,s,a,{delay:u=0,duration:p=300,repeat:x=0,repeatType:w="loop",ease:E="easeOut",times:v}={},C=void 0){const A={[s]:a};v&&(A.offset=v);const I=Qm(E,p);Array.isArray(I)&&(A.easing=I);const R={delay:u,duration:p,easing:Array.isArray(I)?"linear":I,fill:"both",iterations:x+1,direction:w==="reverse"?"alternate":"normal"};return C&&(R.pseudoElement=C),r.animate(A,R)}function Jm(r){return typeof r=="function"&&"applyToOptions"in r}function Lv({type:r,...s}){return Jm(r)&&qm()?r.applyToOptions(s):(s.duration??(s.duration=300),s.ease??(s.ease="easeOut"),s)}class jv extends Gf{constructor(s){if(super(),this.finishedTime=null,this.isStopped=!1,!s)return;const{element:a,name:u,keyframes:p,pseudoElement:x,allowFlatten:w=!1,finalKeyframe:E,onComplete:v}=s;this.isPseudoElement=!!x,this.allowFlatten=w,this.options=s,Mf(typeof s.type!="string");const C=Lv(s);this.animation=Dv(a,u,p,C,x),C.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!x){const A=Hf(p,this.options,E,this.speed);this.updateMotionValue?this.updateMotionValue(A):kv(a,u,A),this.animation.cancel()}v==null||v(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var s,a;(a=(s=this.animation).finish)==null||a.call(s)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:s}=this;s==="idle"||s==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var s,a;this.isPseudoElement||(a=(s=this.animation).commitStyles)==null||a.call(s)}get duration(){var a,u;const s=((u=(a=this.animation.effect)==null?void 0:a.getComputedTiming)==null?void 0:u.call(a).duration)||0;return bi(Number(s))}get time(){return bi(Number(this.animation.currentTime)||0)}set time(s){this.finishedTime=null,this.animation.currentTime=Ci(s)}get speed(){return this.animation.playbackRate}set speed(s){s<0&&(this.finishedTime=null),this.animation.playbackRate=s}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(s){this.animation.startTime=s}attachTimeline({timeline:s,observe:a}){var u;return this.allowFlatten&&((u=this.animation.effect)==null||u.updateTiming({easing:"linear"})),this.animation.onfinish=null,s&&Pv()?(this.animation.timeline=s,ni):a(this)}}const eg={anticipate:Pm,backInOut:km,circInOut:Om};function Bv(r){return r in eg}function Fv(r){typeof r.ease=="string"&&Bv(r.ease)&&(r.ease=eg[r.ease])}const G1=10;class Vv extends jv{constructor(s){Fv(s),Zm(s),super(s),s.startTime&&(this.startTime=s.startTime),this.options=s}updateMotionValue(s){const{motionValue:a,onUpdate:u,onComplete:p,element:x,...w}=this.options;if(!a)return;if(s!==void 0){a.set(s);return}const E=new Xf({...w,autoplay:!1}),v=Ci(this.finishedTime??this.time);a.setWithVelocity(E.sample(v-G1).value,E.sample(v).value,G1),E.stop()}}const X1=(r,s)=>s==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(Ts.test(r)||r==="0")&&!r.startsWith("url("));function zv(r){const s=r[0];if(r.length===1)return!0;for(let a=0;a<r.length;a++)if(r[a]!==s)return!0}function Uv(r,s,a,u){const p=r[0];if(p===null)return!1;if(s==="display"||s==="visibility")return!0;const x=r[r.length-1],w=X1(p,s),E=X1(x,s);return!w||!E?!1:zv(r)||(a==="spring"||Jm(a))&&u}function rf(r){r.duration=0,r.type}const Wv=new Set(["opacity","clipPath","filter","transform"]),Hv=Of(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Gv(r){var A;const{motionValue:s,name:a,repeatDelay:u,repeatType:p,damping:x,type:w}=r;if(!(((A=s==null?void 0:s.owner)==null?void 0:A.current)instanceof HTMLElement))return!1;const{onUpdate:v,transformTemplate:C}=s.owner.getProps();return Hv()&&a&&Wv.has(a)&&(a!=="transform"||!C)&&!v&&!u&&p!=="mirror"&&x!==0&&w!=="inertia"}const Xv=40;class Yv extends Gf{constructor({autoplay:s=!0,delay:a=0,type:u="keyframes",repeat:p=0,repeatDelay:x=0,repeatType:w="loop",keyframes:E,name:v,motionValue:C,element:A,...I}){var L;super(),this.stop=()=>{var j,B;this._animation&&(this._animation.stop(),(j=this.stopTimeline)==null||j.call(this)),(B=this.keyframeResolver)==null||B.cancel()},this.createdAt=Lr.now();const R={autoplay:s,delay:a,type:u,repeat:p,repeatDelay:x,repeatType:w,name:v,motionValue:C,element:A,...I},O=(A==null?void 0:A.KeyframeResolver)||Yf;this.keyframeResolver=new O(E,(j,B,W)=>this.onKeyframesResolved(j,B,R,!W),v,C,A),(L=this.keyframeResolver)==null||L.scheduleResolve()}onKeyframesResolved(s,a,u,p){this.keyframeResolver=void 0;const{name:x,type:w,velocity:E,delay:v,isHandoff:C,onUpdate:A}=u;this.resolvedAt=Lr.now(),Uv(s,x,w,E)||((Ki.instantAnimations||!v)&&(A==null||A(Hf(s,u,a))),s[0]=s[s.length-1],rf(u),u.repeat=0);const R={startTime:p?this.resolvedAt?this.resolvedAt-this.createdAt>Xv?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:a,...u,keyframes:s},O=!C&&Gv(R)?new Vv({...R,element:R.motionValue.owner.current}):new Xf(R);O.finished.then(()=>this.notifyFinished()).catch(ni),this.pendingTimeline&&(this.stopTimeline=O.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=O}get finished(){return this._animation?this.animation.finished:this._finished}then(s,a){return this.finished.finally(s).then(()=>{})}get animation(){var s;return this._animation||((s=this.keyframeResolver)==null||s.resume(),_v()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(s){this.animation.time=s}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(s){this.animation.speed=s}get startTime(){return this.animation.startTime}attachTimeline(s){return this._animation?this.stopTimeline=this.animation.attachTimeline(s):this.pendingTimeline=s,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var s;this._animation&&this.animation.cancel(),(s=this.keyframeResolver)==null||s.cancel()}}const Zv=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function $v(r){const s=Zv.exec(r);if(!s)return[,];const[,a,u,p]=s;return[`--${a??u}`,p]}function tg(r,s,a=1){const[u,p]=$v(r);if(!u)return;const x=window.getComputedStyle(s).getPropertyValue(u);if(x){const w=x.trim();return Em(w)?parseFloat(w):w}return Ff(p)?tg(p,s,a+1):p}function Zf(r,s){return(r==null?void 0:r[s])??(r==null?void 0:r.default)??r}const ng=new Set(["width","height","top","left","right","bottom",...$o]),Kv={test:r=>r==="auto",parse:r=>r},rg=r=>s=>s.test(r),ig=[Zo,vt,Ei,Es,zw,Vw,Kv],Y1=r=>ig.find(rg(r));function qv(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||Am(r):!0}const Qv=new Set(["brightness","contrast","saturate","opacity"]);function Jv(r){const[s,a]=r.slice(0,-1).split("(");if(s==="drop-shadow")return r;const[u]=a.match(Vf)||[];if(!u)return r;const p=a.replace(u,"");let x=Qv.has(s)?1:0;return u!==a&&(x*=100),s+"("+x+p+")"}const e3=/\b([a-z-]*)\(.*?\)/gu,sf={...Ts,getAnimatableNone:r=>{const s=r.match(e3);return s?s.map(Jv).join(" "):r}},Z1={...Zo,transform:Math.round},t3={rotate:Es,rotateX:Es,rotateY:Es,rotateZ:Es,scale:uc,scaleX:uc,scaleY:uc,scaleZ:uc,skew:Es,skewX:Es,skewY:Es,distance:vt,translateX:vt,translateY:vt,translateZ:vt,x:vt,y:vt,z:vt,perspective:vt,transformPerspective:vt,opacity:Ga,originX:O1,originY:O1,originZ:vt},$f={borderWidth:vt,borderTopWidth:vt,borderRightWidth:vt,borderBottomWidth:vt,borderLeftWidth:vt,borderRadius:vt,radius:vt,borderTopLeftRadius:vt,borderTopRightRadius:vt,borderBottomRightRadius:vt,borderBottomLeftRadius:vt,width:vt,maxWidth:vt,height:vt,maxHeight:vt,top:vt,right:vt,bottom:vt,left:vt,padding:vt,paddingTop:vt,paddingRight:vt,paddingBottom:vt,paddingLeft:vt,margin:vt,marginTop:vt,marginRight:vt,marginBottom:vt,marginLeft:vt,backgroundPositionX:vt,backgroundPositionY:vt,...t3,zIndex:Z1,fillOpacity:Ga,strokeOpacity:Ga,numOctaves:Z1},n3={...$f,color:Bn,backgroundColor:Bn,outlineColor:Bn,fill:Bn,stroke:Bn,borderColor:Bn,borderTopColor:Bn,borderRightColor:Bn,borderBottomColor:Bn,borderLeftColor:Bn,filter:sf,WebkitFilter:sf},sg=r=>n3[r];function og(r,s){let a=sg(r);return a!==sf&&(a=Ts),a.getAnimatableNone?a.getAnimatableNone(s):void 0}const r3=new Set(["auto","none","0"]);function i3(r,s,a){let u=0,p;for(;u<r.length&&!p;){const x=r[u];typeof x=="string"&&!r3.has(x)&&Xa(x).values.length&&(p=r[u]),u++}if(p&&a)for(const x of s)r[x]=og(a,p)}class s3 extends Yf{constructor(s,a,u,p,x){super(s,a,u,p,x,!0)}readKeyframes(){const{unresolvedKeyframes:s,element:a,name:u}=this;if(!a||!a.current)return;super.readKeyframes();for(let v=0;v<s.length;v++){let C=s[v];if(typeof C=="string"&&(C=C.trim(),Ff(C))){const A=tg(C,a.current);A!==void 0&&(s[v]=A),v===s.length-1&&(this.finalKeyframe=C)}}if(this.resolveNoneKeyframes(),!ng.has(u)||s.length!==2)return;const[p,x]=s,w=Y1(p),E=Y1(x);if(w!==E)if(W1(w)&&W1(E))for(let v=0;v<s.length;v++){const C=s[v];typeof C=="string"&&(s[v]=parseFloat(C))}else io[u]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:s,name:a}=this,u=[];for(let p=0;p<s.length;p++)(s[p]===null||qv(s[p]))&&u.push(p);u.length&&i3(s,u,a)}measureInitialState(){const{element:s,unresolvedKeyframes:a,name:u}=this;if(!s||!s.current)return;u==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=io[u](s.measureViewportBox(),window.getComputedStyle(s.current)),a[0]=this.measuredOrigin;const p=a[a.length-1];p!==void 0&&s.getValue(u,p).jump(p,!1)}measureEndState(){var E;const{element:s,name:a,unresolvedKeyframes:u}=this;if(!s||!s.current)return;const p=s.getValue(a);p&&p.jump(this.measuredOrigin,!1);const x=u.length-1,w=u[x];u[x]=io[a](s.measureViewportBox(),window.getComputedStyle(s.current)),w!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=w),(E=this.removedTransforms)!=null&&E.length&&this.removedTransforms.forEach(([v,C])=>{s.getValue(v).set(C)}),this.resolveNoneKeyframes()}}function ag(r,s,a){if(r instanceof EventTarget)return[r];if(typeof r=="string"){const p=document.querySelectorAll(r);return p?Array.from(p):[]}return Array.from(r)}const lg=(r,s)=>s&&typeof r=="number"?s.transform(r):r;function cg(r){return Sm(r)&&"offsetHeight"in r}const $1=30,o3=r=>!isNaN(parseFloat(r));class a3{constructor(s,a={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=u=>{var x;const p=Lr.now();if(this.updatedAt!==p&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(u),this.current!==this.prev&&((x=this.events.change)==null||x.notify(this.current),this.dependents))for(const w of this.dependents)w.dirty()},this.hasAnimated=!1,this.setCurrent(s),this.owner=a.owner}setCurrent(s){this.current=s,this.updatedAt=Lr.now(),this.canTrackVelocity===null&&s!==void 0&&(this.canTrackVelocity=o3(this.current))}setPrevFrameValue(s=this.current){this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt}onChange(s){return this.on("change",s)}on(s,a){this.events[s]||(this.events[s]=new Df);const u=this.events[s].add(a);return s==="change"?()=>{u(),mn.read(()=>{this.events.change.getSize()||this.stop()})}:u}clearListeners(){for(const s in this.events)this.events[s].clear()}attach(s,a){this.passiveEffect=s,this.stopPassiveEffect=a}set(s){this.passiveEffect?this.passiveEffect(s,this.updateAndNotify):this.updateAndNotify(s)}setWithVelocity(s,a,u){this.set(a),this.prev=void 0,this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt-u}jump(s,a=!0){this.updateAndNotify(s),this.prev=s,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var s;(s=this.events.change)==null||s.notify(this.current)}addDependent(s){this.dependents||(this.dependents=new Set),this.dependents.add(s)}removeDependent(s){this.dependents&&this.dependents.delete(s)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const s=Lr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||s-this.updatedAt>$1)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,$1);return Nm(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(s){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=s(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var s,a;(s=this.dependents)==null||s.clear(),(a=this.events.destroy)==null||a.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ho(r,s){return new a3(r,s)}const{schedule:Kf}=jm(queueMicrotask,!1),di={x:!1,y:!1};function ug(){return di.x||di.y}function l3(r){return r==="x"||r==="y"?di[r]?null:(di[r]=!0,()=>{di[r]=!1}):di.x||di.y?null:(di.x=di.y=!0,()=>{di.x=di.y=!1})}function dg(r,s){const a=ag(r),u=new AbortController,p={passive:!0,...s,signal:u.signal};return[a,p,()=>u.abort()]}function K1(r){return!(r.pointerType==="touch"||ug())}function c3(r,s,a={}){const[u,p,x]=dg(r,a),w=E=>{if(!K1(E))return;const{target:v}=E,C=s(v,E);if(typeof C!="function"||!v)return;const A=I=>{K1(I)&&(C(I),v.removeEventListener("pointerleave",A))};v.addEventListener("pointerleave",A,p)};return u.forEach(E=>{E.addEventListener("pointerenter",w,p)}),x}const fg=(r,s)=>s?r===s?!0:fg(r,s.parentElement):!1,qf=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,u3=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function d3(r){return u3.has(r.tagName)||r.tabIndex!==-1}const wc=new WeakSet;function q1(r){return s=>{s.key==="Enter"&&r(s)}}function _d(r,s){r.dispatchEvent(new PointerEvent("pointer"+s,{isPrimary:!0,bubbles:!0}))}const f3=(r,s)=>{const a=r.currentTarget;if(!a)return;const u=q1(()=>{if(wc.has(a))return;_d(a,"down");const p=q1(()=>{_d(a,"up")}),x=()=>_d(a,"cancel");a.addEventListener("keyup",p,s),a.addEventListener("blur",x,s)});a.addEventListener("keydown",u,s),a.addEventListener("blur",()=>a.removeEventListener("keydown",u),s)};function Q1(r){return qf(r)&&!ug()}function h3(r,s,a={}){const[u,p,x]=dg(r,a),w=E=>{const v=E.currentTarget;if(!Q1(E))return;wc.add(v);const C=s(v,E),A=(O,L)=>{window.removeEventListener("pointerup",I),window.removeEventListener("pointercancel",R),wc.has(v)&&wc.delete(v),Q1(O)&&typeof C=="function"&&C(O,{success:L})},I=O=>{A(O,v===window||v===document||a.useGlobalTarget||fg(v,O.target))},R=O=>{A(O,!1)};window.addEventListener("pointerup",I,p),window.addEventListener("pointercancel",R,p)};return u.forEach(E=>{(a.useGlobalTarget?window:E).addEventListener("pointerdown",w,p),cg(E)&&(E.addEventListener("focus",C=>f3(C,p)),!d3(E)&&!E.hasAttribute("tabindex")&&(E.tabIndex=0))}),x}function hg(r){return Sm(r)&&"ownerSVGElement"in r}function p3(r){return hg(r)&&r.tagName==="svg"}const yr=r=>!!(r&&r.getVelocity),m3=[...ig,Bn,Ts],g3=r=>m3.find(rg(r)),Qf=N.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});class x3 extends N.Component{getSnapshotBeforeUpdate(s){const a=this.props.childRef.current;if(a&&s.isPresent&&!this.props.isPresent){const u=a.offsetParent,p=cg(u)&&u.offsetWidth||0,x=this.props.sizeRef.current;x.height=a.offsetHeight||0,x.width=a.offsetWidth||0,x.top=a.offsetTop,x.left=a.offsetLeft,x.right=p-x.width-x.left}return null}componentDidUpdate(){}render(){return this.props.children}}function y3({children:r,isPresent:s,anchorX:a,root:u}){const p=N.useId(),x=N.useRef(null),w=N.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:E}=N.useContext(Qf);return N.useInsertionEffect(()=>{const{width:v,height:C,top:A,left:I,right:R}=w.current;if(s||!x.current||!v||!C)return;const O=a==="left"?`left: ${I}`:`right: ${R}`;x.current.dataset.motionPopId=p;const L=document.createElement("style");E&&(L.nonce=E);const j=u??document.head;return j.appendChild(L),L.sheet&&L.sheet.insertRule(`
          [data-motion-pop-id="${p}"] {
            position: absolute !important;
            width: ${v}px !important;
            height: ${C}px !important;
            ${O}px !important;
            top: ${A}px !important;
          }
        `),()=>{j.contains(L)&&j.removeChild(L)}},[s]),h.jsx(x3,{isPresent:s,childRef:x,sizeRef:w,children:N.cloneElement(r,{ref:x})})}const w3=({children:r,initial:s,isPresent:a,onExitComplete:u,custom:p,presenceAffectsLayout:x,mode:w,anchorX:E,root:v})=>{const C=_f(v3),A=N.useId();let I=!0,R=N.useMemo(()=>(I=!1,{id:A,initial:s,isPresent:a,custom:p,onExitComplete:O=>{C.set(O,!0);for(const L of C.values())if(!L)return;u&&u()},register:O=>(C.set(O,!1),()=>C.delete(O))}),[a,C,u]);return x&&I&&(R={...R}),N.useMemo(()=>{C.forEach((O,L)=>C.set(L,!1))},[a]),N.useEffect(()=>{!a&&!C.size&&u&&u()},[a]),w==="popLayout"&&(r=h.jsx(y3,{isPresent:a,anchorX:E,root:v,children:r})),h.jsx(zc.Provider,{value:R,children:r})};function v3(){return new Map}function pg(r=!0){const s=N.useContext(zc);if(s===null)return[!0,null];const{isPresent:a,onExitComplete:u,register:p}=s,x=N.useId();N.useEffect(()=>{if(r)return p(x)},[r]);const w=N.useCallback(()=>r&&u&&u(x),[x,u,r]);return!a&&u?[!1,w]:[!0]}const dc=r=>r.key||"";function J1(r){const s=[];return N.Children.forEach(r,a=>{N.isValidElement(a)&&s.push(a)}),s}const jr=({children:r,custom:s,initial:a=!0,onExitComplete:u,presenceAffectsLayout:p=!0,mode:x="sync",propagate:w=!1,anchorX:E="left",root:v})=>{const[C,A]=pg(w),I=N.useMemo(()=>J1(r),[r]),R=w&&!C?[]:I.map(dc),O=N.useRef(!0),L=N.useRef(I),j=_f(()=>new Map),[B,W]=N.useState(I),[z,F]=N.useState(I);bm(()=>{O.current=!1,L.current=I;for(let ne=0;ne<z.length;ne++){const q=dc(z[ne]);R.includes(q)?j.delete(q):j.get(q)!==!0&&j.set(q,!1)}},[z,R.length,R.join("-")]);const Y=[];if(I!==B){let ne=[...I];for(let q=0;q<z.length;q++){const ie=z[q],J=dc(ie);R.includes(J)||(ne.splice(q,0,ie),Y.push(ie))}return x==="wait"&&Y.length&&(ne=Y),F(J1(ne)),W(I),null}const{forceRender:K}=N.useContext(If);return h.jsx(h.Fragment,{children:z.map(ne=>{const q=dc(ne),ie=w&&!C?!1:I===z||R.includes(q),J=()=>{if(j.has(q))j.set(q,!0);else return;let we=!0;j.forEach(Re=>{Re||(we=!1)}),we&&(K==null||K(),F(L.current),w&&(A==null||A()),u&&u())};return h.jsx(w3,{isPresent:ie,initial:!O.current||a?void 0:!1,custom:s,presenceAffectsLayout:p,mode:x,root:v,onExitComplete:ie?void 0:J,anchorX:E,children:ne},q)})})},mg=N.createContext({strict:!1}),ep={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Go={};for(const r in ep)Go[r]={isEnabled:s=>ep[r].some(a=>!!s[a])};function C3(r){for(const s in r)Go[s]={...Go[s],...r[s]}}const b3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function _c(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||b3.has(r)}let gg=r=>!_c(r);function E3(r){typeof r=="function"&&(gg=s=>s.startsWith("on")?!_c(s):r(s))}try{E3(require("@emotion/is-prop-valid").default)}catch{}function S3(r,s,a){const u={};for(const p in r)p==="values"&&typeof r.values=="object"||(gg(p)||a===!0&&_c(p)||!s&&!_c(p)||r.draggable&&p.startsWith("onDrag"))&&(u[p]=r[p]);return u}const Uc=N.createContext({});function Wc(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}function Ya(r){return typeof r=="string"||Array.isArray(r)}const Jf=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],eh=["initial",...Jf];function Hc(r){return Wc(r.animate)||eh.some(s=>Ya(r[s]))}function xg(r){return!!(Hc(r)||r.variants)}function A3(r,s){if(Hc(r)){const{initial:a,animate:u}=r;return{initial:a===!1||Ya(a)?a:void 0,animate:Ya(u)?u:void 0}}return r.inherit!==!1?s:{}}function N3(r){const{initial:s,animate:a}=A3(r,N.useContext(Uc));return N.useMemo(()=>({initial:s,animate:a}),[tp(s),tp(a)])}function tp(r){return Array.isArray(r)?r.join(" "):r}const Za={};function T3(r){for(const s in r)Za[s]=r[s],Bf(s)&&(Za[s].isCSSVariable=!0)}function yg(r,{layout:s,layoutId:a}){return Ko.has(r)||r.startsWith("origin")||(s||a!==void 0)&&(!!Za[r]||r==="opacity")}const I3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},_3=$o.length;function R3(r,s,a){let u="",p=!0;for(let x=0;x<_3;x++){const w=$o[x],E=r[w];if(E===void 0)continue;let v=!0;if(typeof E=="number"?v=E===(w.startsWith("scale")?1:0):v=parseFloat(E)===0,!v||a){const C=lg(E,$f[w]);if(!v){p=!1;const A=I3[w]||w;u+=`${A}(${C}) `}a&&(s[w]=C)}}return u=u.trim(),a?u=a(s,p?"":u):p&&(u="none"),u}function th(r,s,a){const{style:u,vars:p,transformOrigin:x}=r;let w=!1,E=!1;for(const v in s){const C=s[v];if(Ko.has(v)){w=!0;continue}else if(Bf(v)){p[v]=C;continue}else{const A=lg(C,$f[v]);v.startsWith("origin")?(E=!0,x[v]=A):u[v]=A}}if(s.transform||(w||a?u.transform=R3(s,r.transform,a):u.transform&&(u.transform="none")),E){const{originX:v="50%",originY:C="50%",originZ:A=0}=x;u.transformOrigin=`${v} ${C} ${A}`}}const nh=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function wg(r,s,a){for(const u in s)!yr(s[u])&&!yg(u,a)&&(r[u]=s[u])}function k3({transformTemplate:r},s){return N.useMemo(()=>{const a=nh();return th(a,s,r),Object.assign({},a.vars,a.style)},[s])}function P3(r,s){const a=r.style||{},u={};return wg(u,a,r),Object.assign(u,k3(r,s)),u}function M3(r,s){const a={},u=P3(r,s);return r.drag&&r.dragListener!==!1&&(a.draggable=!1,u.userSelect=u.WebkitUserSelect=u.WebkitTouchCallout="none",u.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(a.tabIndex=0),a.style=u,a}const O3={offset:"stroke-dashoffset",array:"stroke-dasharray"},D3={offset:"strokeDashoffset",array:"strokeDasharray"};function L3(r,s,a=1,u=0,p=!0){r.pathLength=1;const x=p?O3:D3;r[x.offset]=vt.transform(-u);const w=vt.transform(s),E=vt.transform(a);r[x.array]=`${w} ${E}`}function vg(r,{attrX:s,attrY:a,attrScale:u,pathLength:p,pathSpacing:x=1,pathOffset:w=0,...E},v,C,A){if(th(r,E,C),v){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:I,style:R}=r;I.transform&&(R.transform=I.transform,delete I.transform),(R.transform||I.transformOrigin)&&(R.transformOrigin=I.transformOrigin??"50% 50%",delete I.transformOrigin),R.transform&&(R.transformBox=(A==null?void 0:A.transformBox)??"fill-box",delete I.transformBox),s!==void 0&&(I.x=s),a!==void 0&&(I.y=a),u!==void 0&&(I.scale=u),p!==void 0&&L3(I,p,x,w,!1)}const Cg=()=>({...nh(),attrs:{}}),bg=r=>typeof r=="string"&&r.toLowerCase()==="svg";function j3(r,s,a,u){const p=N.useMemo(()=>{const x=Cg();return vg(x,s,bg(u),r.transformTemplate,r.style),{...x.attrs,style:{...x.style}}},[s]);if(r.style){const x={};wg(x,r.style,r),p.style={...x,...p.style}}return p}const B3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function rh(r){return typeof r!="string"||r.includes("-")?!1:!!(B3.indexOf(r)>-1||/[A-Z]/u.test(r))}function F3(r,s,a,{latestValues:u},p,x=!1){const E=(rh(r)?j3:M3)(s,u,p,r),v=S3(s,typeof r=="string",x),C=r!==N.Fragment?{...v,...E,ref:a}:{},{children:A}=s,I=N.useMemo(()=>yr(A)?A.get():A,[A]);return N.createElement(r,{...C,children:I})}function np(r){const s=[{},{}];return r==null||r.values.forEach((a,u)=>{s[0][u]=a.get(),s[1][u]=a.getVelocity()}),s}function ih(r,s,a,u){if(typeof s=="function"){const[p,x]=np(u);s=s(a!==void 0?a:r.custom,p,x)}if(typeof s=="string"&&(s=r.variants&&r.variants[s]),typeof s=="function"){const[p,x]=np(u);s=s(a!==void 0?a:r.custom,p,x)}return s}function vc(r){return yr(r)?r.get():r}function V3({scrapeMotionValuesFromProps:r,createRenderState:s},a,u,p){return{latestValues:z3(a,u,p,r),renderState:s()}}function z3(r,s,a,u){const p={},x=u(r,{});for(const R in x)p[R]=vc(x[R]);let{initial:w,animate:E}=r;const v=Hc(r),C=xg(r);s&&C&&!v&&r.inherit!==!1&&(w===void 0&&(w=s.initial),E===void 0&&(E=s.animate));let A=a?a.initial===!1:!1;A=A||w===!1;const I=A?E:w;if(I&&typeof I!="boolean"&&!Wc(I)){const R=Array.isArray(I)?I:[I];for(let O=0;O<R.length;O++){const L=ih(r,R[O]);if(L){const{transitionEnd:j,transition:B,...W}=L;for(const z in W){let F=W[z];if(Array.isArray(F)){const Y=A?F.length-1:0;F=F[Y]}F!==null&&(p[z]=F)}for(const z in j)p[z]=j[z]}}}return p}const Eg=r=>(s,a)=>{const u=N.useContext(Uc),p=N.useContext(zc),x=()=>V3(r,s,u,p);return a?x():_f(x)};function sh(r,s,a){var x;const{style:u}=r,p={};for(const w in u)(yr(u[w])||s.style&&yr(s.style[w])||yg(w,r)||((x=a==null?void 0:a.getValue(w))==null?void 0:x.liveStyle)!==void 0)&&(p[w]=u[w]);return p}const U3=Eg({scrapeMotionValuesFromProps:sh,createRenderState:nh});function Sg(r,s,a){const u=sh(r,s,a);for(const p in r)if(yr(r[p])||yr(s[p])){const x=$o.indexOf(p)!==-1?"attr"+p.charAt(0).toUpperCase()+p.substring(1):p;u[x]=r[p]}return u}const W3=Eg({scrapeMotionValuesFromProps:Sg,createRenderState:Cg}),H3=Symbol.for("motionComponentSymbol");function jo(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function G3(r,s,a){return N.useCallback(u=>{u&&r.onMount&&r.onMount(u),s&&(u?s.mount(u):s.unmount()),a&&(typeof a=="function"?a(u):jo(a)&&(a.current=u))},[s])}const oh=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),X3="framerAppearId",Ag="data-"+oh(X3),Ng=N.createContext({});function Y3(r,s,a,u,p){var j,B;const{visualElement:x}=N.useContext(Uc),w=N.useContext(mg),E=N.useContext(zc),v=N.useContext(Qf).reducedMotion,C=N.useRef(null);u=u||w.renderer,!C.current&&u&&(C.current=u(r,{visualState:s,parent:x,props:a,presenceContext:E,blockInitialAnimation:E?E.initial===!1:!1,reducedMotionConfig:v}));const A=C.current,I=N.useContext(Ng);A&&!A.projection&&p&&(A.type==="html"||A.type==="svg")&&Z3(C.current,a,p,I);const R=N.useRef(!1);N.useInsertionEffect(()=>{A&&R.current&&A.update(a,E)});const O=a[Ag],L=N.useRef(!!O&&!((j=window.MotionHandoffIsComplete)!=null&&j.call(window,O))&&((B=window.MotionHasOptimisedAnimation)==null?void 0:B.call(window,O)));return bm(()=>{A&&(R.current=!0,window.MotionIsMounted=!0,A.updateFeatures(),A.scheduleRenderMicrotask(),L.current&&A.animationState&&A.animationState.animateChanges())}),N.useEffect(()=>{A&&(!L.current&&A.animationState&&A.animationState.animateChanges(),L.current&&(queueMicrotask(()=>{var W;(W=window.MotionHandoffMarkAsComplete)==null||W.call(window,O)}),L.current=!1),A.enteringChildren=void 0)}),A}function Z3(r,s,a,u){const{layoutId:p,layout:x,drag:w,dragConstraints:E,layoutScroll:v,layoutRoot:C,layoutCrossfade:A}=s;r.projection=new a(r.latestValues,s["data-framer-portal-id"]?void 0:Tg(r.parent)),r.projection.setOptions({layoutId:p,layout:x,alwaysMeasureLayout:!!w||E&&jo(E),visualElement:r,animationType:typeof x=="string"?x:"both",initialPromotionConfig:u,crossfade:A,layoutScroll:v,layoutRoot:C})}function Tg(r){if(r)return r.options.allowProjection!==!1?r.projection:Tg(r.parent)}function Rd(r,{forwardMotionProps:s=!1}={},a,u){a&&C3(a);const p=rh(r)?W3:U3;function x(E,v){let C;const A={...N.useContext(Qf),...E,layoutId:$3(E)},{isStatic:I}=A,R=N3(E),O=p(E,I);if(!I&&Rf){K3();const L=q3(A);C=L.MeasureLayout,R.visualElement=Y3(r,O,A,u,L.ProjectionNode)}return h.jsxs(Uc.Provider,{value:R,children:[C&&R.visualElement?h.jsx(C,{visualElement:R.visualElement,...A}):null,F3(r,E,G3(O,R.visualElement,v),O,I,s)]})}x.displayName=`motion.${typeof r=="string"?r:`create(${r.displayName??r.name??""})`}`;const w=N.forwardRef(x);return w[H3]=r,w}function $3({layoutId:r}){const s=N.useContext(If).id;return s&&r!==void 0?s+"-"+r:r}function K3(r,s){N.useContext(mg).strict}function q3(r){const{drag:s,layout:a}=Go;if(!s&&!a)return{};const u={...s,...a};return{MeasureLayout:s!=null&&s.isEnabled(r)||a!=null&&a.isEnabled(r)?u.MeasureLayout:void 0,ProjectionNode:u.ProjectionNode}}function Q3(r,s){if(typeof Proxy>"u")return Rd;const a=new Map,u=(x,w)=>Rd(x,w,r,s),p=(x,w)=>u(x,w);return new Proxy(p,{get:(x,w)=>w==="create"?u:(a.has(w)||a.set(w,Rd(w,void 0,r,s)),a.get(w))})}function Ig({top:r,left:s,right:a,bottom:u}){return{x:{min:s,max:a},y:{min:r,max:u}}}function J3({x:r,y:s}){return{top:s.min,right:r.max,bottom:s.max,left:r.min}}function eC(r,s){if(!s)return r;const a=s({x:r.left,y:r.top}),u=s({x:r.right,y:r.bottom});return{top:a.y,left:a.x,bottom:u.y,right:u.x}}function kd(r){return r===void 0||r===1}function of({scale:r,scaleX:s,scaleY:a}){return!kd(r)||!kd(s)||!kd(a)}function eo(r){return of(r)||_g(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function _g(r){return rp(r.x)||rp(r.y)}function rp(r){return r&&r!=="0%"}function Rc(r,s,a){const u=r-a,p=s*u;return a+p}function ip(r,s,a,u,p){return p!==void 0&&(r=Rc(r,p,u)),Rc(r,a,u)+s}function af(r,s=0,a=1,u,p){r.min=ip(r.min,s,a,u,p),r.max=ip(r.max,s,a,u,p)}function Rg(r,{x:s,y:a}){af(r.x,s.translate,s.scale,s.originPoint),af(r.y,a.translate,a.scale,a.originPoint)}const sp=.999999999999,op=1.0000000000001;function tC(r,s,a,u=!1){const p=a.length;if(!p)return;s.x=s.y=1;let x,w;for(let E=0;E<p;E++){x=a[E],w=x.projectionDelta;const{visualElement:v}=x.options;v&&v.props.style&&v.props.style.display==="contents"||(u&&x.options.layoutScroll&&x.scroll&&x!==x.root&&Fo(r,{x:-x.scroll.offset.x,y:-x.scroll.offset.y}),w&&(s.x*=w.x.scale,s.y*=w.y.scale,Rg(r,w)),u&&eo(x.latestValues)&&Fo(r,x.latestValues))}s.x<op&&s.x>sp&&(s.x=1),s.y<op&&s.y>sp&&(s.y=1)}function Bo(r,s){r.min=r.min+s,r.max=r.max+s}function ap(r,s,a,u,p=.5){const x=Cn(r.min,r.max,p);af(r,s,a,x,u)}function Fo(r,s){ap(r.x,s.x,s.scaleX,s.scale,s.originX),ap(r.y,s.y,s.scaleY,s.scale,s.originY)}function kg(r,s){return Ig(eC(r.getBoundingClientRect(),s))}function nC(r,s,a){const u=kg(r,a),{scroll:p}=s;return p&&(Bo(u.x,p.offset.x),Bo(u.y,p.offset.y)),u}const lp=()=>({translate:0,scale:1,origin:0,originPoint:0}),Vo=()=>({x:lp(),y:lp()}),cp=()=>({min:0,max:0}),On=()=>({x:cp(),y:cp()}),lf={current:null},Pg={current:!1};function rC(){if(Pg.current=!0,!!Rf)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),s=()=>lf.current=r.matches;r.addEventListener("change",s),s()}else lf.current=!1}const iC=new WeakMap;function sC(r,s,a){for(const u in s){const p=s[u],x=a[u];if(yr(p))r.addValue(u,p);else if(yr(x))r.addValue(u,Ho(p,{owner:r}));else if(x!==p)if(r.hasValue(u)){const w=r.getValue(u);w.liveStyle===!0?w.jump(p):w.hasAnimated||w.set(p)}else{const w=r.getStaticValue(u);r.addValue(u,Ho(w!==void 0?w:p,{owner:r}))}}for(const u in a)s[u]===void 0&&r.removeValue(u);return s}const up=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class oC{scrapeMotionValuesFromProps(s,a,u){return{}}constructor({parent:s,props:a,presenceContext:u,reducedMotionConfig:p,blockInitialAnimation:x,visualState:w},E={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Yf,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const R=Lr.now();this.renderScheduledAt<R&&(this.renderScheduledAt=R,mn.render(this.render,!1,!0))};const{latestValues:v,renderState:C}=w;this.latestValues=v,this.baseTarget={...v},this.initialValues=a.initial?{...v}:{},this.renderState=C,this.parent=s,this.props=a,this.presenceContext=u,this.depth=s?s.depth+1:0,this.reducedMotionConfig=p,this.options=E,this.blockInitialAnimation=!!x,this.isControllingVariants=Hc(a),this.isVariantNode=xg(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(s&&s.current);const{willChange:A,...I}=this.scrapeMotionValuesFromProps(a,{},this);for(const R in I){const O=I[R];v[R]!==void 0&&yr(O)&&O.set(v[R])}}mount(s){var a;this.current=s,iC.set(s,this),this.projection&&!this.projection.instance&&this.projection.mount(s),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((u,p)=>this.bindToMotionValue(p,u)),Pg.current||rC(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:lf.current,(a=this.parent)==null||a.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var s;this.projection&&this.projection.unmount(),Ns(this.notifyUpdate),Ns(this.render),this.valueSubscriptions.forEach(a=>a()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(s=this.parent)==null||s.removeChild(this);for(const a in this.events)this.events[a].clear();for(const a in this.features){const u=this.features[a];u&&(u.unmount(),u.isMounted=!1)}this.current=null}addChild(s){this.children.add(s),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(s)}removeChild(s){this.children.delete(s),this.enteringChildren&&this.enteringChildren.delete(s)}bindToMotionValue(s,a){this.valueSubscriptions.has(s)&&this.valueSubscriptions.get(s)();const u=Ko.has(s);u&&this.onBindTransform&&this.onBindTransform();const p=a.on("change",w=>{this.latestValues[s]=w,this.props.onUpdate&&mn.preRender(this.notifyUpdate),u&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let x;window.MotionCheckAppearSync&&(x=window.MotionCheckAppearSync(this,s,a)),this.valueSubscriptions.set(s,()=>{p(),x&&x(),a.owner&&a.stop()})}sortNodePosition(s){return!this.current||!this.sortInstanceNodePosition||this.type!==s.type?0:this.sortInstanceNodePosition(this.current,s.current)}updateFeatures(){let s="animation";for(s in Go){const a=Go[s];if(!a)continue;const{isEnabled:u,Feature:p}=a;if(!this.features[s]&&p&&u(this.props)&&(this.features[s]=new p(this)),this.features[s]){const x=this.features[s];x.isMounted?x.update():(x.mount(),x.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):On()}getStaticValue(s){return this.latestValues[s]}setStaticValue(s,a){this.latestValues[s]=a}update(s,a){(s.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=s,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let u=0;u<up.length;u++){const p=up[u];this.propEventSubscriptions[p]&&(this.propEventSubscriptions[p](),delete this.propEventSubscriptions[p]);const x="on"+p,w=s[x];w&&(this.propEventSubscriptions[p]=this.on(p,w))}this.prevMotionValues=sC(this,this.scrapeMotionValuesFromProps(s,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(s){return this.props.variants?this.props.variants[s]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(s){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(s),()=>a.variantChildren.delete(s)}addValue(s,a){const u=this.values.get(s);a!==u&&(u&&this.removeValue(s),this.bindToMotionValue(s,a),this.values.set(s,a),this.latestValues[s]=a.get())}removeValue(s){this.values.delete(s);const a=this.valueSubscriptions.get(s);a&&(a(),this.valueSubscriptions.delete(s)),delete this.latestValues[s],this.removeValueFromRenderState(s,this.renderState)}hasValue(s){return this.values.has(s)}getValue(s,a){if(this.props.values&&this.props.values[s])return this.props.values[s];let u=this.values.get(s);return u===void 0&&a!==void 0&&(u=Ho(a===null?void 0:a,{owner:this}),this.addValue(s,u)),u}readValue(s,a){let u=this.latestValues[s]!==void 0||!this.current?this.latestValues[s]:this.getBaseTargetFromProps(this.props,s)??this.readValueFromInstance(this.current,s,this.options);return u!=null&&(typeof u=="string"&&(Em(u)||Am(u))?u=parseFloat(u):!g3(u)&&Ts.test(a)&&(u=og(s,a)),this.setBaseTarget(s,yr(u)?u.get():u)),yr(u)?u.get():u}setBaseTarget(s,a){this.baseTarget[s]=a}getBaseTarget(s){var x;const{initial:a}=this.props;let u;if(typeof a=="string"||typeof a=="object"){const w=ih(this.props,a,(x=this.presenceContext)==null?void 0:x.custom);w&&(u=w[s])}if(a&&u!==void 0)return u;const p=this.getBaseTargetFromProps(this.props,s);return p!==void 0&&!yr(p)?p:this.initialValues[s]!==void 0&&u===void 0?void 0:this.baseTarget[s]}on(s,a){return this.events[s]||(this.events[s]=new Df),this.events[s].add(a)}notify(s,...a){this.events[s]&&this.events[s].notify(...a)}scheduleRenderMicrotask(){Kf.render(this.render)}}class Mg extends oC{constructor(){super(...arguments),this.KeyframeResolver=s3}sortInstanceNodePosition(s,a){return s.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(s,a){return s.style?s.style[a]:void 0}removeValueFromRenderState(s,{vars:a,style:u}){delete a[s],delete u[s]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:s}=this.props;yr(s)&&(this.childSubscription=s.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function Og(r,{style:s,vars:a},u,p){const x=r.style;let w;for(w in s)x[w]=s[w];p==null||p.applyProjectionStyles(x,u);for(w in a)x.setProperty(w,a[w])}function aC(r){return window.getComputedStyle(r)}class lC extends Mg{constructor(){super(...arguments),this.type="html",this.renderInstance=Og}readValueFromInstance(s,a){var u;if(Ko.has(a))return(u=this.projection)!=null&&u.isProjecting?Qd(a):Sv(s,a);{const p=aC(s),x=(Bf(a)?p.getPropertyValue(a):p[a])||0;return typeof x=="string"?x.trim():x}}measureInstanceViewportBox(s,{transformPagePoint:a}){return kg(s,a)}build(s,a,u){th(s,a,u.transformTemplate)}scrapeMotionValuesFromProps(s,a,u){return sh(s,a,u)}}const Dg=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function cC(r,s,a,u){Og(r,s,void 0,u);for(const p in s.attrs)r.setAttribute(Dg.has(p)?p:oh(p),s.attrs[p])}class uC extends Mg{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=On}getBaseTargetFromProps(s,a){return s[a]}readValueFromInstance(s,a){if(Ko.has(a)){const u=sg(a);return u&&u.default||0}return a=Dg.has(a)?a:oh(a),s.getAttribute(a)}scrapeMotionValuesFromProps(s,a,u){return Sg(s,a,u)}build(s,a,u){vg(s,a,this.isSVGTag,u.transformTemplate,u.style)}renderInstance(s,a,u,p){cC(s,a,u,p)}mount(s){this.isSVGTag=bg(s.tagName),super.mount(s)}}const dC=(r,s)=>rh(r)?new uC(s):new lC(s,{allowProjection:r!==N.Fragment});function Uo(r,s,a){const u=r.getProps();return ih(u,s,a!==void 0?a:u.custom,r)}const cf=r=>Array.isArray(r);function fC(r,s,a){r.hasValue(s)?r.getValue(s).set(a):r.addValue(s,Ho(a))}function hC(r){return cf(r)?r[r.length-1]||0:r}function pC(r,s){const a=Uo(r,s);let{transitionEnd:u={},transition:p={},...x}=a||{};x={...x,...u};for(const w in x){const E=hC(x[w]);fC(r,w,E)}}function mC(r){return!!(yr(r)&&r.add)}function uf(r,s){const a=r.getValue("willChange");if(mC(a))return a.add(s);if(!a&&Ki.WillChange){const u=new Ki.WillChange("auto");r.addValue("willChange",u),u.add(s)}}function Lg(r){return r.props[Ag]}const gC=r=>r!==null;function xC(r,{repeat:s,repeatType:a="loop"},u){const p=r.filter(gC),x=s&&a!=="loop"&&s%2===1?0:p.length-1;return p[x]}const yC={type:"spring",stiffness:500,damping:25,restSpeed:10},wC=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),vC={type:"keyframes",duration:.8},CC={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},bC=(r,{keyframes:s})=>s.length>2?vC:Ko.has(r)?r.startsWith("scale")?wC(s[1]):yC:CC;function EC({when:r,delay:s,delayChildren:a,staggerChildren:u,staggerDirection:p,repeat:x,repeatType:w,repeatDelay:E,from:v,elapsed:C,...A}){return!!Object.keys(A).length}const ah=(r,s,a,u={},p,x)=>w=>{const E=Zf(u,r)||{},v=E.delay||u.delay||0;let{elapsed:C=0}=u;C=C-Ci(v);const A={keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:s.getVelocity(),...E,delay:-C,onUpdate:R=>{s.set(R),E.onUpdate&&E.onUpdate(R)},onComplete:()=>{w(),E.onComplete&&E.onComplete()},name:r,motionValue:s,element:x?void 0:p};EC(E)||Object.assign(A,bC(r,A)),A.duration&&(A.duration=Ci(A.duration)),A.repeatDelay&&(A.repeatDelay=Ci(A.repeatDelay)),A.from!==void 0&&(A.keyframes[0]=A.from);let I=!1;if((A.type===!1||A.duration===0&&!A.repeatDelay)&&(rf(A),A.delay===0&&(I=!0)),(Ki.instantAnimations||Ki.skipAnimations)&&(I=!0,rf(A),A.delay=0),A.allowFlatten=!E.type&&!E.ease,I&&!x&&s.get()!==void 0){const R=xC(A.keyframes,E);if(R!==void 0){mn.update(()=>{A.onUpdate(R),A.onComplete()});return}}return E.isSync?new Xf(A):new Yv(A)};function SC({protectedKeys:r,needsAnimating:s},a){const u=r.hasOwnProperty(a)&&s[a]!==!0;return s[a]=!1,u}function jg(r,s,{delay:a=0,transitionOverride:u,type:p}={}){let{transition:x=r.getDefaultTransition(),transitionEnd:w,...E}=s;u&&(x=u);const v=[],C=p&&r.animationState&&r.animationState.getState()[p];for(const A in E){const I=r.getValue(A,r.latestValues[A]??null),R=E[A];if(R===void 0||C&&SC(C,A))continue;const O={delay:a,...Zf(x||{},A)},L=I.get();if(L!==void 0&&!I.isAnimating&&!Array.isArray(R)&&R===L&&!O.velocity)continue;let j=!1;if(window.MotionHandoffAnimation){const W=Lg(r);if(W){const z=window.MotionHandoffAnimation(W,A,mn);z!==null&&(O.startTime=z,j=!0)}}uf(r,A),I.start(ah(A,I,R,r.shouldReduceMotion&&ng.has(A)?{type:!1}:O,r,j));const B=I.animation;B&&v.push(B)}return w&&Promise.all(v).then(()=>{mn.update(()=>{w&&pC(r,w)})}),v}function Bg(r,s,a,u=0,p=1){const x=Array.from(r).sort((C,A)=>C.sortNodePosition(A)).indexOf(s),w=r.size,E=(w-1)*u;return typeof a=="function"?a(x,w):p===1?x*u:E-x*u}function df(r,s,a={}){var v;const u=Uo(r,s,a.type==="exit"?(v=r.presenceContext)==null?void 0:v.custom:void 0);let{transition:p=r.getDefaultTransition()||{}}=u||{};a.transitionOverride&&(p=a.transitionOverride);const x=u?()=>Promise.all(jg(r,u,a)):()=>Promise.resolve(),w=r.variantChildren&&r.variantChildren.size?(C=0)=>{const{delayChildren:A=0,staggerChildren:I,staggerDirection:R}=p;return AC(r,s,C,A,I,R,a)}:()=>Promise.resolve(),{when:E}=p;if(E){const[C,A]=E==="beforeChildren"?[x,w]:[w,x];return C().then(()=>A())}else return Promise.all([x(),w(a.delay)])}function AC(r,s,a=0,u=0,p=0,x=1,w){const E=[];for(const v of r.variantChildren)v.notify("AnimationStart",s),E.push(df(v,s,{...w,delay:a+(typeof u=="function"?0:u)+Bg(r.variantChildren,v,u,p,x)}).then(()=>v.notify("AnimationComplete",s)));return Promise.all(E)}function NC(r,s,a={}){r.notify("AnimationStart",s);let u;if(Array.isArray(s)){const p=s.map(x=>df(r,x,a));u=Promise.all(p)}else if(typeof s=="string")u=df(r,s,a);else{const p=typeof s=="function"?Uo(r,s,a.custom):s;u=Promise.all(jg(r,p,a))}return u.then(()=>{r.notify("AnimationComplete",s)})}function Fg(r,s){if(!Array.isArray(s))return!1;const a=s.length;if(a!==r.length)return!1;for(let u=0;u<a;u++)if(s[u]!==r[u])return!1;return!0}const TC=eh.length;function Vg(r){if(!r)return;if(!r.isControllingVariants){const a=r.parent?Vg(r.parent)||{}:{};return r.props.initial!==void 0&&(a.initial=r.props.initial),a}const s={};for(let a=0;a<TC;a++){const u=eh[a],p=r.props[u];(Ya(p)||p===!1)&&(s[u]=p)}return s}const IC=[...Jf].reverse(),_C=Jf.length;function RC(r){return s=>Promise.all(s.map(({animation:a,options:u})=>NC(r,a,u)))}function kC(r){let s=RC(r),a=dp(),u=!0;const p=v=>(C,A)=>{var R;const I=Uo(r,A,v==="exit"?(R=r.presenceContext)==null?void 0:R.custom:void 0);if(I){const{transition:O,transitionEnd:L,...j}=I;C={...C,...j,...L}}return C};function x(v){s=v(r)}function w(v){const{props:C}=r,A=Vg(r.parent)||{},I=[],R=new Set;let O={},L=1/0;for(let B=0;B<_C;B++){const W=IC[B],z=a[W],F=C[W]!==void 0?C[W]:A[W],Y=Ya(F),K=W===v?z.isActive:null;K===!1&&(L=B);let ne=F===A[W]&&F!==C[W]&&Y;if(ne&&u&&r.manuallyAnimateOnMount&&(ne=!1),z.protectedKeys={...O},!z.isActive&&K===null||!F&&!z.prevProp||Wc(F)||typeof F=="boolean")continue;const q=PC(z.prevProp,F);let ie=q||W===v&&z.isActive&&!ne&&Y||B>L&&Y,J=!1;const we=Array.isArray(F)?F:[F];let Re=we.reduce(p(W),{});K===!1&&(Re={});const{prevResolvedValues:Ae={}}=z,Ee={...Ae,...Re},Te=ve=>{ie=!0,R.has(ve)&&(J=!0,R.delete(ve)),z.needsAnimating[ve]=!0;const ye=r.getValue(ve);ye&&(ye.liveStyle=!1)};for(const ve in Ee){const ye=Re[ve],De=Ae[ve];if(O.hasOwnProperty(ve))continue;let be=!1;cf(ye)&&cf(De)?be=!Fg(ye,De):be=ye!==De,be?ye!=null?Te(ve):R.add(ve):ye!==void 0&&R.has(ve)?Te(ve):z.protectedKeys[ve]=!0}z.prevProp=F,z.prevResolvedValues=Re,z.isActive&&(O={...O,...Re}),u&&r.blockInitialAnimation&&(ie=!1);const Z=ne&&q;ie&&(!Z||J)&&I.push(...we.map(ve=>{const ye={type:W};if(typeof ve=="string"&&u&&!Z&&r.manuallyAnimateOnMount&&r.parent){const{parent:De}=r,be=Uo(De,ve);if(De.enteringChildren&&be){const{delayChildren:X}=be.transition||{};ye.delay=Bg(De.enteringChildren,r,X)}}return{animation:ve,options:ye}}))}if(R.size){const B={};if(typeof C.initial!="boolean"){const W=Uo(r,Array.isArray(C.initial)?C.initial[0]:C.initial);W&&W.transition&&(B.transition=W.transition)}R.forEach(W=>{const z=r.getBaseTarget(W),F=r.getValue(W);F&&(F.liveStyle=!0),B[W]=z??null}),I.push({animation:B})}let j=!!I.length;return u&&(C.initial===!1||C.initial===C.animate)&&!r.manuallyAnimateOnMount&&(j=!1),u=!1,j?s(I):Promise.resolve()}function E(v,C){var I;if(a[v].isActive===C)return Promise.resolve();(I=r.variantChildren)==null||I.forEach(R=>{var O;return(O=R.animationState)==null?void 0:O.setActive(v,C)}),a[v].isActive=C;const A=w(v);for(const R in a)a[R].protectedKeys={};return A}return{animateChanges:w,setActive:E,setAnimateFunction:x,getState:()=>a,reset:()=>{a=dp(),u=!0}}}function PC(r,s){return typeof s=="string"?s!==r:Array.isArray(s)?!Fg(s,r):!1}function Js(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function dp(){return{animate:Js(!0),whileInView:Js(),whileHover:Js(),whileTap:Js(),whileDrag:Js(),whileFocus:Js(),exit:Js()}}class Is{constructor(s){this.isMounted=!1,this.node=s}update(){}}class MC extends Is{constructor(s){super(s),s.animationState||(s.animationState=kC(s))}updateAnimationControlsSubscription(){const{animate:s}=this.node.getProps();Wc(s)&&(this.unmountControls=s.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:s}=this.node.getProps(),{animate:a}=this.node.prevProps||{};s!==a&&this.updateAnimationControlsSubscription()}unmount(){var s;this.node.animationState.reset(),(s=this.unmountControls)==null||s.call(this)}}let OC=0;class DC extends Is{constructor(){super(...arguments),this.id=OC++}update(){if(!this.node.presenceContext)return;const{isPresent:s,onExitComplete:a}=this.node.presenceContext,{isPresent:u}=this.node.prevPresenceContext||{};if(!this.node.animationState||s===u)return;const p=this.node.animationState.setActive("exit",!s);a&&!s&&p.then(()=>{a(this.id)})}mount(){const{register:s,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),s&&(this.unmount=s(this.id))}unmount(){}}const LC={animation:{Feature:MC},exit:{Feature:DC}};function $a(r,s,a,u={passive:!0}){return r.addEventListener(s,a,u),()=>r.removeEventListener(s,a)}function nl(r){return{point:{x:r.pageX,y:r.pageY}}}const jC=r=>s=>qf(s)&&r(s,nl(s));function Ba(r,s,a,u){return $a(r,s,jC(a),u)}const zg=1e-4,BC=1-zg,FC=1+zg,Ug=.01,VC=0-Ug,zC=0+Ug;function Ar(r){return r.max-r.min}function UC(r,s,a){return Math.abs(r-s)<=a}function fp(r,s,a,u=.5){r.origin=u,r.originPoint=Cn(s.min,s.max,r.origin),r.scale=Ar(a)/Ar(s),r.translate=Cn(a.min,a.max,r.origin)-r.originPoint,(r.scale>=BC&&r.scale<=FC||isNaN(r.scale))&&(r.scale=1),(r.translate>=VC&&r.translate<=zC||isNaN(r.translate))&&(r.translate=0)}function Fa(r,s,a,u){fp(r.x,s.x,a.x,u?u.originX:void 0),fp(r.y,s.y,a.y,u?u.originY:void 0)}function hp(r,s,a){r.min=a.min+s.min,r.max=r.min+Ar(s)}function WC(r,s,a){hp(r.x,s.x,a.x),hp(r.y,s.y,a.y)}function pp(r,s,a){r.min=s.min-a.min,r.max=r.min+Ar(s)}function Va(r,s,a){pp(r.x,s.x,a.x),pp(r.y,s.y,a.y)}function ti(r){return[r("x"),r("y")]}const Wg=({current:r})=>r?r.ownerDocument.defaultView:null,mp=(r,s)=>Math.abs(r-s);function HC(r,s){const a=mp(r.x,s.x),u=mp(r.y,s.y);return Math.sqrt(a**2+u**2)}class Hg{constructor(s,a,{transformPagePoint:u,contextWindow:p=window,dragSnapToOrigin:x=!1,distanceThreshold:w=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const R=Md(this.lastMoveEventInfo,this.history),O=this.startEvent!==null,L=HC(R.offset,{x:0,y:0})>=this.distanceThreshold;if(!O&&!L)return;const{point:j}=R,{timestamp:B}=dr;this.history.push({...j,timestamp:B});const{onStart:W,onMove:z}=this.handlers;O||(W&&W(this.lastMoveEvent,R),this.startEvent=this.lastMoveEvent),z&&z(this.lastMoveEvent,R)},this.handlePointerMove=(R,O)=>{this.lastMoveEvent=R,this.lastMoveEventInfo=Pd(O,this.transformPagePoint),mn.update(this.updatePoint,!0)},this.handlePointerUp=(R,O)=>{this.end();const{onEnd:L,onSessionEnd:j,resumeAnimation:B}=this.handlers;if(this.dragSnapToOrigin&&B&&B(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const W=Md(R.type==="pointercancel"?this.lastMoveEventInfo:Pd(O,this.transformPagePoint),this.history);this.startEvent&&L&&L(R,W),j&&j(R,W)},!qf(s))return;this.dragSnapToOrigin=x,this.handlers=a,this.transformPagePoint=u,this.distanceThreshold=w,this.contextWindow=p||window;const E=nl(s),v=Pd(E,this.transformPagePoint),{point:C}=v,{timestamp:A}=dr;this.history=[{...C,timestamp:A}];const{onSessionStart:I}=a;I&&I(s,Md(v,this.history)),this.removeListeners=Ja(Ba(this.contextWindow,"pointermove",this.handlePointerMove),Ba(this.contextWindow,"pointerup",this.handlePointerUp),Ba(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(s){this.handlers=s}end(){this.removeListeners&&this.removeListeners(),Ns(this.updatePoint)}}function Pd(r,s){return s?{point:s(r.point)}:r}function gp(r,s){return{x:r.x-s.x,y:r.y-s.y}}function Md({point:r},s){return{point:r,delta:gp(r,Gg(s)),offset:gp(r,GC(s)),velocity:XC(s,.1)}}function GC(r){return r[0]}function Gg(r){return r[r.length-1]}function XC(r,s){if(r.length<2)return{x:0,y:0};let a=r.length-1,u=null;const p=Gg(r);for(;a>=0&&(u=r[a],!(p.timestamp-u.timestamp>Ci(s)));)a--;if(!u)return{x:0,y:0};const x=bi(p.timestamp-u.timestamp);if(x===0)return{x:0,y:0};const w={x:(p.x-u.x)/x,y:(p.y-u.y)/x};return w.x===1/0&&(w.x=0),w.y===1/0&&(w.y=0),w}function YC(r,{min:s,max:a},u){return s!==void 0&&r<s?r=u?Cn(s,r,u.min):Math.max(r,s):a!==void 0&&r>a&&(r=u?Cn(a,r,u.max):Math.min(r,a)),r}function xp(r,s,a){return{min:s!==void 0?r.min+s:void 0,max:a!==void 0?r.max+a-(r.max-r.min):void 0}}function ZC(r,{top:s,left:a,bottom:u,right:p}){return{x:xp(r.x,a,p),y:xp(r.y,s,u)}}function yp(r,s){let a=s.min-r.min,u=s.max-r.max;return s.max-s.min<r.max-r.min&&([a,u]=[u,a]),{min:a,max:u}}function $C(r,s){return{x:yp(r.x,s.x),y:yp(r.y,s.y)}}function KC(r,s){let a=.5;const u=Ar(r),p=Ar(s);return p>u?a=Ha(s.min,s.max-u,r.min):u>p&&(a=Ha(r.min,r.max-p,s.min)),$i(0,1,a)}function qC(r,s){const a={};return s.min!==void 0&&(a.min=s.min-r.min),s.max!==void 0&&(a.max=s.max-r.min),a}const ff=.35;function QC(r=ff){return r===!1?r=0:r===!0&&(r=ff),{x:wp(r,"left","right"),y:wp(r,"top","bottom")}}function wp(r,s,a){return{min:vp(r,s),max:vp(r,a)}}function vp(r,s){return typeof r=="number"?r:r[s]||0}const JC=new WeakMap;class eb{constructor(s){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=On(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=s}start(s,{snapToCursor:a=!1,distanceThreshold:u}={}){const{presenceContext:p}=this.visualElement;if(p&&p.isPresent===!1)return;const x=I=>{const{dragSnapToOrigin:R}=this.getProps();R?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(nl(I).point)},w=(I,R)=>{const{drag:O,dragPropagation:L,onDragStart:j}=this.getProps();if(O&&!L&&(this.openDragLock&&this.openDragLock(),this.openDragLock=l3(O),!this.openDragLock))return;this.latestPointerEvent=I,this.latestPanInfo=R,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ti(W=>{let z=this.getAxisMotionValue(W).get()||0;if(Ei.test(z)){const{projection:F}=this.visualElement;if(F&&F.layout){const Y=F.layout.layoutBox[W];Y&&(z=Ar(Y)*(parseFloat(z)/100))}}this.originPoint[W]=z}),j&&mn.postRender(()=>j(I,R)),uf(this.visualElement,"transform");const{animationState:B}=this.visualElement;B&&B.setActive("whileDrag",!0)},E=(I,R)=>{this.latestPointerEvent=I,this.latestPanInfo=R;const{dragPropagation:O,dragDirectionLock:L,onDirectionLock:j,onDrag:B}=this.getProps();if(!O&&!this.openDragLock)return;const{offset:W}=R;if(L&&this.currentDirection===null){this.currentDirection=tb(W),this.currentDirection!==null&&j&&j(this.currentDirection);return}this.updateAxis("x",R.point,W),this.updateAxis("y",R.point,W),this.visualElement.render(),B&&B(I,R)},v=(I,R)=>{this.latestPointerEvent=I,this.latestPanInfo=R,this.stop(I,R),this.latestPointerEvent=null,this.latestPanInfo=null},C=()=>ti(I=>{var R;return this.getAnimationState(I)==="paused"&&((R=this.getAxisMotionValue(I).animation)==null?void 0:R.play())}),{dragSnapToOrigin:A}=this.getProps();this.panSession=new Hg(s,{onSessionStart:x,onStart:w,onMove:E,onSessionEnd:v,resumeAnimation:C},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:A,distanceThreshold:u,contextWindow:Wg(this.visualElement)})}stop(s,a){const u=s||this.latestPointerEvent,p=a||this.latestPanInfo,x=this.isDragging;if(this.cancel(),!x||!p||!u)return;const{velocity:w}=p;this.startAnimation(w);const{onDragEnd:E}=this.getProps();E&&mn.postRender(()=>E(u,p))}cancel(){this.isDragging=!1;const{projection:s,animationState:a}=this.visualElement;s&&(s.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:u}=this.getProps();!u&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(s,a,u){const{drag:p}=this.getProps();if(!u||!fc(s,p,this.currentDirection))return;const x=this.getAxisMotionValue(s);let w=this.originPoint[s]+u[s];this.constraints&&this.constraints[s]&&(w=YC(w,this.constraints[s],this.elastic[s])),x.set(w)}resolveConstraints(){var x;const{dragConstraints:s,dragElastic:a}=this.getProps(),u=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(x=this.visualElement.projection)==null?void 0:x.layout,p=this.constraints;s&&jo(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&u?this.constraints=ZC(u.layoutBox,s):this.constraints=!1,this.elastic=QC(a),p!==this.constraints&&u&&this.constraints&&!this.hasMutatedConstraints&&ti(w=>{this.constraints!==!1&&this.getAxisMotionValue(w)&&(this.constraints[w]=qC(u.layoutBox[w],this.constraints[w]))})}resolveRefConstraints(){const{dragConstraints:s,onMeasureDragConstraints:a}=this.getProps();if(!s||!jo(s))return!1;const u=s.current,{projection:p}=this.visualElement;if(!p||!p.layout)return!1;const x=nC(u,p.root,this.visualElement.getTransformPagePoint());let w=$C(p.layout.layoutBox,x);if(a){const E=a(J3(w));this.hasMutatedConstraints=!!E,E&&(w=Ig(E))}return w}startAnimation(s){const{drag:a,dragMomentum:u,dragElastic:p,dragTransition:x,dragSnapToOrigin:w,onDragTransitionEnd:E}=this.getProps(),v=this.constraints||{},C=ti(A=>{if(!fc(A,a,this.currentDirection))return;let I=v&&v[A]||{};w&&(I={min:0,max:0});const R=p?200:1e6,O=p?40:1e7,L={type:"inertia",velocity:u?s[A]:0,bounceStiffness:R,bounceDamping:O,timeConstant:750,restDelta:1,restSpeed:10,...x,...I};return this.startAxisValueAnimation(A,L)});return Promise.all(C).then(E)}startAxisValueAnimation(s,a){const u=this.getAxisMotionValue(s);return uf(this.visualElement,s),u.start(ah(s,u,0,a,this.visualElement,!1))}stopAnimation(){ti(s=>this.getAxisMotionValue(s).stop())}pauseAnimation(){ti(s=>{var a;return(a=this.getAxisMotionValue(s).animation)==null?void 0:a.pause()})}getAnimationState(s){var a;return(a=this.getAxisMotionValue(s).animation)==null?void 0:a.state}getAxisMotionValue(s){const a=`_drag${s.toUpperCase()}`,u=this.visualElement.getProps(),p=u[a];return p||this.visualElement.getValue(s,(u.initial?u.initial[s]:void 0)||0)}snapToCursor(s){ti(a=>{const{drag:u}=this.getProps();if(!fc(a,u,this.currentDirection))return;const{projection:p}=this.visualElement,x=this.getAxisMotionValue(a);if(p&&p.layout){const{min:w,max:E}=p.layout.layoutBox[a];x.set(s[a]-Cn(w,E,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:s,dragConstraints:a}=this.getProps(),{projection:u}=this.visualElement;if(!jo(a)||!u||!this.constraints)return;this.stopAnimation();const p={x:0,y:0};ti(w=>{const E=this.getAxisMotionValue(w);if(E&&this.constraints!==!1){const v=E.get();p[w]=KC({min:v,max:v},this.constraints[w])}});const{transformTemplate:x}=this.visualElement.getProps();this.visualElement.current.style.transform=x?x({},""):"none",u.root&&u.root.updateScroll(),u.updateLayout(),this.resolveConstraints(),ti(w=>{if(!fc(w,s,null))return;const E=this.getAxisMotionValue(w),{min:v,max:C}=this.constraints[w];E.set(Cn(v,C,p[w]))})}addListeners(){if(!this.visualElement.current)return;JC.set(this.visualElement,this);const s=this.visualElement.current,a=Ba(s,"pointerdown",v=>{const{drag:C,dragListener:A=!0}=this.getProps();C&&A&&this.start(v)}),u=()=>{const{dragConstraints:v}=this.getProps();jo(v)&&v.current&&(this.constraints=this.resolveRefConstraints())},{projection:p}=this.visualElement,x=p.addEventListener("measure",u);p&&!p.layout&&(p.root&&p.root.updateScroll(),p.updateLayout()),mn.read(u);const w=$a(window,"resize",()=>this.scalePositionWithinConstraints()),E=p.addEventListener("didUpdate",({delta:v,hasLayoutChanged:C})=>{this.isDragging&&C&&(ti(A=>{const I=this.getAxisMotionValue(A);I&&(this.originPoint[A]+=v[A].translate,I.set(I.get()+v[A].translate))}),this.visualElement.render())});return()=>{w(),a(),x(),E&&E()}}getProps(){const s=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:u=!1,dragPropagation:p=!1,dragConstraints:x=!1,dragElastic:w=ff,dragMomentum:E=!0}=s;return{...s,drag:a,dragDirectionLock:u,dragPropagation:p,dragConstraints:x,dragElastic:w,dragMomentum:E}}}function fc(r,s,a){return(s===!0||s===r)&&(a===null||a===r)}function tb(r,s=10){let a=null;return Math.abs(r.y)>s?a="y":Math.abs(r.x)>s&&(a="x"),a}class nb extends Is{constructor(s){super(s),this.removeGroupControls=ni,this.removeListeners=ni,this.controls=new eb(s)}mount(){const{dragControls:s}=this.node.getProps();s&&(this.removeGroupControls=s.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ni}unmount(){this.removeGroupControls(),this.removeListeners()}}const Cp=r=>(s,a)=>{r&&mn.postRender(()=>r(s,a))};class rb extends Is{constructor(){super(...arguments),this.removePointerDownListener=ni}onPointerDown(s){this.session=new Hg(s,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Wg(this.node)})}createPanHandlers(){const{onPanSessionStart:s,onPanStart:a,onPan:u,onPanEnd:p}=this.node.getProps();return{onSessionStart:Cp(s),onStart:Cp(a),onMove:u,onEnd:(x,w)=>{delete this.session,p&&mn.postRender(()=>p(x,w))}}}mount(){this.removePointerDownListener=Ba(this.node.current,"pointerdown",s=>this.onPointerDown(s))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Cc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function bp(r,s){return s.max===s.min?0:r/(s.max-s.min)*100}const Ma={correct:(r,s)=>{if(!s.target)return r;if(typeof r=="string")if(vt.test(r))r=parseFloat(r);else return r;const a=bp(r,s.target.x),u=bp(r,s.target.y);return`${a}% ${u}%`}},ib={correct:(r,{treeScale:s,projectionDelta:a})=>{const u=r,p=Ts.parse(r);if(p.length>5)return u;const x=Ts.createTransformer(r),w=typeof p[0]!="number"?1:0,E=a.x.scale*s.x,v=a.y.scale*s.y;p[0+w]/=E,p[1+w]/=v;const C=Cn(E,v,.5);return typeof p[2+w]=="number"&&(p[2+w]/=C),typeof p[3+w]=="number"&&(p[3+w]/=C),x(p)}};let Od=!1;class sb extends N.Component{componentDidMount(){const{visualElement:s,layoutGroup:a,switchLayoutGroup:u,layoutId:p}=this.props,{projection:x}=s;T3(ob),x&&(a.group&&a.group.add(x),u&&u.register&&p&&u.register(x),Od&&x.root.didUpdate(),x.addEventListener("animationComplete",()=>{this.safeToRemove()}),x.setOptions({...x.options,onExitComplete:()=>this.safeToRemove()})),Cc.hasEverUpdated=!0}getSnapshotBeforeUpdate(s){const{layoutDependency:a,visualElement:u,drag:p,isPresent:x}=this.props,{projection:w}=u;return w&&(w.isPresent=x,Od=!0,p||s.layoutDependency!==a||a===void 0||s.isPresent!==x?w.willUpdate():this.safeToRemove(),s.isPresent!==x&&(x?w.promote():w.relegate()||mn.postRender(()=>{const E=w.getStack();(!E||!E.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:s}=this.props.visualElement;s&&(s.root.didUpdate(),Kf.postRender(()=>{!s.currentAnimation&&s.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:s,layoutGroup:a,switchLayoutGroup:u}=this.props,{projection:p}=s;Od=!0,p&&(p.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(p),u&&u.deregister&&u.deregister(p))}safeToRemove(){const{safeToRemove:s}=this.props;s&&s()}render(){return null}}function Xg(r){const[s,a]=pg(),u=N.useContext(If);return h.jsx(sb,{...r,layoutGroup:u,switchLayoutGroup:N.useContext(Ng),isPresent:s,safeToRemove:a})}const ob={borderRadius:{...Ma,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ma,borderTopRightRadius:Ma,borderBottomLeftRadius:Ma,borderBottomRightRadius:Ma,boxShadow:ib};function ab(r,s,a){const u=yr(r)?r:Ho(r);return u.start(ah("",u,s,a)),u.animation}const lb=(r,s)=>r.depth-s.depth;class cb{constructor(){this.children=[],this.isDirty=!1}add(s){kf(this.children,s),this.isDirty=!0}remove(s){Pf(this.children,s),this.isDirty=!0}forEach(s){this.isDirty&&this.children.sort(lb),this.isDirty=!1,this.children.forEach(s)}}function ub(r,s){const a=Lr.now(),u=({timestamp:p})=>{const x=p-a;x>=s&&(Ns(u),r(x-s))};return mn.setup(u,!0),()=>Ns(u)}const Yg=["TopLeft","TopRight","BottomLeft","BottomRight"],db=Yg.length,Ep=r=>typeof r=="string"?parseFloat(r):r,Sp=r=>typeof r=="number"||vt.test(r);function fb(r,s,a,u,p,x){p?(r.opacity=Cn(0,a.opacity??1,hb(u)),r.opacityExit=Cn(s.opacity??1,0,pb(u))):x&&(r.opacity=Cn(s.opacity??1,a.opacity??1,u));for(let w=0;w<db;w++){const E=`border${Yg[w]}Radius`;let v=Ap(s,E),C=Ap(a,E);if(v===void 0&&C===void 0)continue;v||(v=0),C||(C=0),v===0||C===0||Sp(v)===Sp(C)?(r[E]=Math.max(Cn(Ep(v),Ep(C),u),0),(Ei.test(C)||Ei.test(v))&&(r[E]+="%")):r[E]=C}(s.rotate||a.rotate)&&(r.rotate=Cn(s.rotate||0,a.rotate||0,u))}function Ap(r,s){return r[s]!==void 0?r[s]:r.borderRadius}const hb=Zg(0,.5,Mm),pb=Zg(.5,.95,ni);function Zg(r,s,a){return u=>u<r?0:u>s?1:a(Ha(r,s,u))}function Np(r,s){r.min=s.min,r.max=s.max}function ei(r,s){Np(r.x,s.x),Np(r.y,s.y)}function Tp(r,s){r.translate=s.translate,r.scale=s.scale,r.originPoint=s.originPoint,r.origin=s.origin}function Ip(r,s,a,u,p){return r-=s,r=Rc(r,1/a,u),p!==void 0&&(r=Rc(r,1/p,u)),r}function mb(r,s=0,a=1,u=.5,p,x=r,w=r){if(Ei.test(s)&&(s=parseFloat(s),s=Cn(w.min,w.max,s/100)-w.min),typeof s!="number")return;let E=Cn(x.min,x.max,u);r===x&&(E-=s),r.min=Ip(r.min,s,a,E,p),r.max=Ip(r.max,s,a,E,p)}function _p(r,s,[a,u,p],x,w){mb(r,s[a],s[u],s[p],s.scale,x,w)}const gb=["x","scaleX","originX"],xb=["y","scaleY","originY"];function Rp(r,s,a,u){_p(r.x,s,gb,a?a.x:void 0,u?u.x:void 0),_p(r.y,s,xb,a?a.y:void 0,u?u.y:void 0)}function kp(r){return r.translate===0&&r.scale===1}function $g(r){return kp(r.x)&&kp(r.y)}function Pp(r,s){return r.min===s.min&&r.max===s.max}function yb(r,s){return Pp(r.x,s.x)&&Pp(r.y,s.y)}function Mp(r,s){return Math.round(r.min)===Math.round(s.min)&&Math.round(r.max)===Math.round(s.max)}function Kg(r,s){return Mp(r.x,s.x)&&Mp(r.y,s.y)}function Op(r){return Ar(r.x)/Ar(r.y)}function Dp(r,s){return r.translate===s.translate&&r.scale===s.scale&&r.originPoint===s.originPoint}class wb{constructor(){this.members=[]}add(s){kf(this.members,s),s.scheduleRender()}remove(s){if(Pf(this.members,s),s===this.prevLead&&(this.prevLead=void 0),s===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(s){const a=this.members.findIndex(p=>s===p);if(a===0)return!1;let u;for(let p=a;p>=0;p--){const x=this.members[p];if(x.isPresent!==!1){u=x;break}}return u?(this.promote(u),!0):!1}promote(s,a){const u=this.lead;if(s!==u&&(this.prevLead=u,this.lead=s,s.show(),u)){u.instance&&u.scheduleRender(),s.scheduleRender(),s.resumeFrom=u,a&&(s.resumeFrom.preserveOpacity=!0),u.snapshot&&(s.snapshot=u.snapshot,s.snapshot.latestValues=u.animationValues||u.latestValues),s.root&&s.root.isUpdating&&(s.isLayoutDirty=!0);const{crossfade:p}=s.options;p===!1&&u.hide()}}exitAnimationComplete(){this.members.forEach(s=>{const{options:a,resumingFrom:u}=s;a.onExitComplete&&a.onExitComplete(),u&&u.options.onExitComplete&&u.options.onExitComplete()})}scheduleRender(){this.members.forEach(s=>{s.instance&&s.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function vb(r,s,a){let u="";const p=r.x.translate/s.x,x=r.y.translate/s.y,w=(a==null?void 0:a.z)||0;if((p||x||w)&&(u=`translate3d(${p}px, ${x}px, ${w}px) `),(s.x!==1||s.y!==1)&&(u+=`scale(${1/s.x}, ${1/s.y}) `),a){const{transformPerspective:C,rotate:A,rotateX:I,rotateY:R,skewX:O,skewY:L}=a;C&&(u=`perspective(${C}px) ${u}`),A&&(u+=`rotate(${A}deg) `),I&&(u+=`rotateX(${I}deg) `),R&&(u+=`rotateY(${R}deg) `),O&&(u+=`skewX(${O}deg) `),L&&(u+=`skewY(${L}deg) `)}const E=r.x.scale*s.x,v=r.y.scale*s.y;return(E!==1||v!==1)&&(u+=`scale(${E}, ${v})`),u||"none"}const Dd=["","X","Y","Z"],Cb=1e3;let bb=0;function Ld(r,s,a,u){const{latestValues:p}=s;p[r]&&(a[r]=p[r],s.setStaticValue(r,0),u&&(u[r]=0))}function qg(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:s}=r.options;if(!s)return;const a=Lg(s);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:p,layoutId:x}=r.options;window.MotionCancelOptimisedAnimation(a,"transform",mn,!(p||x))}const{parent:u}=r;u&&!u.hasCheckedOptimisedAppear&&qg(u)}function Qg({attachResizeListener:r,defaultParent:s,measureScroll:a,checkIsScrollRoot:u,resetTransform:p}){return class{constructor(w={},E=s==null?void 0:s()){this.id=bb++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Ab),this.nodes.forEach(_b),this.nodes.forEach(Rb),this.nodes.forEach(Nb)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=w,this.root=E?E.root||E:this,this.path=E?[...E.path,E]:[],this.parent=E,this.depth=E?E.depth+1:0;for(let v=0;v<this.path.length;v++)this.path[v].shouldResetTransform=!0;this.root===this&&(this.nodes=new cb)}addEventListener(w,E){return this.eventHandlers.has(w)||this.eventHandlers.set(w,new Df),this.eventHandlers.get(w).add(E)}notifyListeners(w,...E){const v=this.eventHandlers.get(w);v&&v.notify(...E)}hasListeners(w){return this.eventHandlers.has(w)}mount(w){if(this.instance)return;this.isSVG=hg(w)&&!p3(w),this.instance=w;const{layoutId:E,layout:v,visualElement:C}=this.options;if(C&&!C.current&&C.mount(w),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(v||E)&&(this.isLayoutDirty=!0),r){let A,I=0;const R=()=>this.root.updateBlockedByResize=!1;mn.read(()=>{I=window.innerWidth}),r(w,()=>{const O=window.innerWidth;O!==I&&(I=O,this.root.updateBlockedByResize=!0,A&&A(),A=ub(R,250),Cc.hasAnimatedSinceResize&&(Cc.hasAnimatedSinceResize=!1,this.nodes.forEach(Bp)))})}E&&this.root.registerSharedNode(E,this),this.options.animate!==!1&&C&&(E||v)&&this.addEventListener("didUpdate",({delta:A,hasLayoutChanged:I,hasRelativeLayoutChanged:R,layout:O})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const L=this.options.transition||C.getDefaultTransition()||Db,{onLayoutAnimationStart:j,onLayoutAnimationComplete:B}=C.getProps(),W=!this.targetLayout||!Kg(this.targetLayout,O),z=!I&&R;if(this.options.layoutRoot||this.resumeFrom||z||I&&(W||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const F={...Zf(L,"layout"),onPlay:j,onComplete:B};(C.shouldReduceMotion||this.options.layoutRoot)&&(F.delay=0,F.type=!1),this.startAnimation(F),this.setAnimationOrigin(A,z)}else I||Bp(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=O})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const w=this.getStack();w&&w.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ns(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(kb),this.animationId++)}getTransformTemplate(){const{visualElement:w}=this.options;return w&&w.getProps().transformTemplate}willUpdate(w=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&qg(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let A=0;A<this.path.length;A++){const I=this.path[A];I.shouldResetTransform=!0,I.updateScroll("snapshot"),I.options.layoutRoot&&I.willUpdate(!1)}const{layoutId:E,layout:v}=this.options;if(E===void 0&&!v)return;const C=this.getTransformTemplate();this.prevTransformTemplateValue=C?C(this.latestValues,""):void 0,this.updateSnapshot(),w&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Lp);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(jp);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Ib),this.nodes.forEach(Eb),this.nodes.forEach(Sb)):this.nodes.forEach(jp),this.clearAllSnapshots();const E=Lr.now();dr.delta=$i(0,1e3/60,E-dr.timestamp),dr.timestamp=E,dr.isProcessing=!0,Ad.update.process(dr),Ad.preRender.process(dr),Ad.render.process(dr),dr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Kf.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Tb),this.sharedNodes.forEach(Pb)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,mn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){mn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ar(this.snapshot.measuredBox.x)&&!Ar(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let v=0;v<this.path.length;v++)this.path[v].updateScroll();const w=this.layout;this.layout=this.measure(!1),this.layoutCorrected=On(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:E}=this.options;E&&E.notify("LayoutMeasure",this.layout.layoutBox,w?w.layoutBox:void 0)}updateScroll(w="measure"){let E=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===w&&(E=!1),E&&this.instance){const v=u(this.instance);this.scroll={animationId:this.root.animationId,phase:w,isRoot:v,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:v}}}resetTransform(){if(!p)return;const w=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,E=this.projectionDelta&&!$g(this.projectionDelta),v=this.getTransformTemplate(),C=v?v(this.latestValues,""):void 0,A=C!==this.prevTransformTemplateValue;w&&this.instance&&(E||eo(this.latestValues)||A)&&(p(this.instance,C),this.shouldResetTransform=!1,this.scheduleRender())}measure(w=!0){const E=this.measurePageBox();let v=this.removeElementScroll(E);return w&&(v=this.removeTransform(v)),Lb(v),{animationId:this.root.animationId,measuredBox:E,layoutBox:v,latestValues:{},source:this.id}}measurePageBox(){var C;const{visualElement:w}=this.options;if(!w)return On();const E=w.measureViewportBox();if(!(((C=this.scroll)==null?void 0:C.wasRoot)||this.path.some(jb))){const{scroll:A}=this.root;A&&(Bo(E.x,A.offset.x),Bo(E.y,A.offset.y))}return E}removeElementScroll(w){var v;const E=On();if(ei(E,w),(v=this.scroll)!=null&&v.wasRoot)return E;for(let C=0;C<this.path.length;C++){const A=this.path[C],{scroll:I,options:R}=A;A!==this.root&&I&&R.layoutScroll&&(I.wasRoot&&ei(E,w),Bo(E.x,I.offset.x),Bo(E.y,I.offset.y))}return E}applyTransform(w,E=!1){const v=On();ei(v,w);for(let C=0;C<this.path.length;C++){const A=this.path[C];!E&&A.options.layoutScroll&&A.scroll&&A!==A.root&&Fo(v,{x:-A.scroll.offset.x,y:-A.scroll.offset.y}),eo(A.latestValues)&&Fo(v,A.latestValues)}return eo(this.latestValues)&&Fo(v,this.latestValues),v}removeTransform(w){const E=On();ei(E,w);for(let v=0;v<this.path.length;v++){const C=this.path[v];if(!C.instance||!eo(C.latestValues))continue;of(C.latestValues)&&C.updateSnapshot();const A=On(),I=C.measurePageBox();ei(A,I),Rp(E,C.latestValues,C.snapshot?C.snapshot.layoutBox:void 0,A)}return eo(this.latestValues)&&Rp(E,this.latestValues),E}setTargetDelta(w){this.targetDelta=w,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(w){this.options={...this.options,...w,crossfade:w.crossfade!==void 0?w.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==dr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(w=!1){var R;const E=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=E.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=E.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=E.isSharedProjectionDirty);const v=!!this.resumingFrom||this!==E;if(!(w||v&&this.isSharedProjectionDirty||this.isProjectionDirty||(R=this.parent)!=null&&R.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:A,layoutId:I}=this.options;if(!(!this.layout||!(A||I))){if(this.resolvedRelativeTargetAt=dr.timestamp,!this.targetDelta&&!this.relativeTarget){const O=this.getClosestProjectingParent();O&&O.layout&&this.animationProgress!==1?(this.relativeParent=O,this.forceRelativeParentToResolveTarget(),this.relativeTarget=On(),this.relativeTargetOrigin=On(),Va(this.relativeTargetOrigin,this.layout.layoutBox,O.layout.layoutBox),ei(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=On(),this.targetWithTransforms=On()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),WC(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ei(this.target,this.layout.layoutBox),Rg(this.target,this.targetDelta)):ei(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const O=this.getClosestProjectingParent();O&&!!O.resumingFrom==!!this.resumingFrom&&!O.options.layoutScroll&&O.target&&this.animationProgress!==1?(this.relativeParent=O,this.forceRelativeParentToResolveTarget(),this.relativeTarget=On(),this.relativeTargetOrigin=On(),Va(this.relativeTargetOrigin,this.target,O.target),ei(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||of(this.parent.latestValues)||_g(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var L;const w=this.getLead(),E=!!this.resumingFrom||this!==w;let v=!0;if((this.isProjectionDirty||(L=this.parent)!=null&&L.isProjectionDirty)&&(v=!1),E&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(v=!1),this.resolvedRelativeTargetAt===dr.timestamp&&(v=!1),v)return;const{layout:C,layoutId:A}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(C||A))return;ei(this.layoutCorrected,this.layout.layoutBox);const I=this.treeScale.x,R=this.treeScale.y;tC(this.layoutCorrected,this.treeScale,this.path,E),w.layout&&!w.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(w.target=w.layout.layoutBox,w.targetWithTransforms=On());const{target:O}=w;if(!O){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Tp(this.prevProjectionDelta.x,this.projectionDelta.x),Tp(this.prevProjectionDelta.y,this.projectionDelta.y)),Fa(this.projectionDelta,this.layoutCorrected,O,this.latestValues),(this.treeScale.x!==I||this.treeScale.y!==R||!Dp(this.projectionDelta.x,this.prevProjectionDelta.x)||!Dp(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",O))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(w=!0){var E;if((E=this.options.visualElement)==null||E.scheduleRender(),w){const v=this.getStack();v&&v.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Vo(),this.projectionDelta=Vo(),this.projectionDeltaWithTransform=Vo()}setAnimationOrigin(w,E=!1){const v=this.snapshot,C=v?v.latestValues:{},A={...this.latestValues},I=Vo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!E;const R=On(),O=v?v.source:void 0,L=this.layout?this.layout.source:void 0,j=O!==L,B=this.getStack(),W=!B||B.members.length<=1,z=!!(j&&!W&&this.options.crossfade===!0&&!this.path.some(Ob));this.animationProgress=0;let F;this.mixTargetDelta=Y=>{const K=Y/1e3;Fp(I.x,w.x,K),Fp(I.y,w.y,K),this.setTargetDelta(I),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Va(R,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Mb(this.relativeTarget,this.relativeTargetOrigin,R,K),F&&yb(this.relativeTarget,F)&&(this.isProjectionDirty=!1),F||(F=On()),ei(F,this.relativeTarget)),j&&(this.animationValues=A,fb(A,C,this.latestValues,K,z,W)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=K},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(w){var E,v,C;this.notifyListeners("animationStart"),(E=this.currentAnimation)==null||E.stop(),(C=(v=this.resumingFrom)==null?void 0:v.currentAnimation)==null||C.stop(),this.pendingAnimation&&(Ns(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=mn.update(()=>{Cc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ho(0)),this.currentAnimation=ab(this.motionValue,[0,1e3],{...w,velocity:0,isSync:!0,onUpdate:A=>{this.mixTargetDelta(A),w.onUpdate&&w.onUpdate(A)},onStop:()=>{},onComplete:()=>{w.onComplete&&w.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const w=this.getStack();w&&w.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Cb),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const w=this.getLead();let{targetWithTransforms:E,target:v,layout:C,latestValues:A}=w;if(!(!E||!v||!C)){if(this!==w&&this.layout&&C&&Jg(this.options.animationType,this.layout.layoutBox,C.layoutBox)){v=this.target||On();const I=Ar(this.layout.layoutBox.x);v.x.min=w.target.x.min,v.x.max=v.x.min+I;const R=Ar(this.layout.layoutBox.y);v.y.min=w.target.y.min,v.y.max=v.y.min+R}ei(E,v),Fo(E,A),Fa(this.projectionDeltaWithTransform,this.layoutCorrected,E,A)}}registerSharedNode(w,E){this.sharedNodes.has(w)||this.sharedNodes.set(w,new wb),this.sharedNodes.get(w).add(E);const C=E.options.initialPromotionConfig;E.promote({transition:C?C.transition:void 0,preserveFollowOpacity:C&&C.shouldPreserveFollowOpacity?C.shouldPreserveFollowOpacity(E):void 0})}isLead(){const w=this.getStack();return w?w.lead===this:!0}getLead(){var E;const{layoutId:w}=this.options;return w?((E=this.getStack())==null?void 0:E.lead)||this:this}getPrevLead(){var E;const{layoutId:w}=this.options;return w?(E=this.getStack())==null?void 0:E.prevLead:void 0}getStack(){const{layoutId:w}=this.options;if(w)return this.root.sharedNodes.get(w)}promote({needsReset:w,transition:E,preserveFollowOpacity:v}={}){const C=this.getStack();C&&C.promote(this,v),w&&(this.projectionDelta=void 0,this.needsReset=!0),E&&this.setOptions({transition:E})}relegate(){const w=this.getStack();return w?w.relegate(this):!1}resetSkewAndRotation(){const{visualElement:w}=this.options;if(!w)return;let E=!1;const{latestValues:v}=w;if((v.z||v.rotate||v.rotateX||v.rotateY||v.rotateZ||v.skewX||v.skewY)&&(E=!0),!E)return;const C={};v.z&&Ld("z",w,C,this.animationValues);for(let A=0;A<Dd.length;A++)Ld(`rotate${Dd[A]}`,w,C,this.animationValues),Ld(`skew${Dd[A]}`,w,C,this.animationValues);w.render();for(const A in C)w.setStaticValue(A,C[A]),this.animationValues&&(this.animationValues[A]=C[A]);w.scheduleRender()}applyProjectionStyles(w,E){if(!this.instance||this.isSVG)return;if(!this.isVisible){w.visibility="hidden";return}const v=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,w.visibility="",w.opacity="",w.pointerEvents=vc(E==null?void 0:E.pointerEvents)||"",w.transform=v?v(this.latestValues,""):"none";return}const C=this.getLead();if(!this.projectionDelta||!this.layout||!C.target){this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=vc(E==null?void 0:E.pointerEvents)||""),this.hasProjected&&!eo(this.latestValues)&&(w.transform=v?v({},""):"none",this.hasProjected=!1);return}w.visibility="";const A=C.animationValues||C.latestValues;this.applyTransformsToTarget();let I=vb(this.projectionDeltaWithTransform,this.treeScale,A);v&&(I=v(A,I)),w.transform=I;const{x:R,y:O}=this.projectionDelta;w.transformOrigin=`${R.origin*100}% ${O.origin*100}% 0`,C.animationValues?w.opacity=C===this?A.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:A.opacityExit:w.opacity=C===this?A.opacity!==void 0?A.opacity:"":A.opacityExit!==void 0?A.opacityExit:0;for(const L in Za){if(A[L]===void 0)continue;const{correct:j,applyTo:B,isCSSVariable:W}=Za[L],z=I==="none"?A[L]:j(A[L],C);if(B){const F=B.length;for(let Y=0;Y<F;Y++)w[B[Y]]=z}else W?this.options.visualElement.renderState.vars[L]=z:w[L]=z}this.options.layoutId&&(w.pointerEvents=C===this?vc(E==null?void 0:E.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(w=>{var E;return(E=w.currentAnimation)==null?void 0:E.stop()}),this.root.nodes.forEach(Lp),this.root.sharedNodes.clear()}}}function Eb(r){r.updateLayout()}function Sb(r){var a;const s=((a=r.resumeFrom)==null?void 0:a.snapshot)||r.snapshot;if(r.isLead()&&r.layout&&s&&r.hasListeners("didUpdate")){const{layoutBox:u,measuredBox:p}=r.layout,{animationType:x}=r.options,w=s.source!==r.layout.source;x==="size"?ti(I=>{const R=w?s.measuredBox[I]:s.layoutBox[I],O=Ar(R);R.min=u[I].min,R.max=R.min+O}):Jg(x,s.layoutBox,u)&&ti(I=>{const R=w?s.measuredBox[I]:s.layoutBox[I],O=Ar(u[I]);R.max=R.min+O,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[I].max=r.relativeTarget[I].min+O)});const E=Vo();Fa(E,u,s.layoutBox);const v=Vo();w?Fa(v,r.applyTransform(p,!0),s.measuredBox):Fa(v,u,s.layoutBox);const C=!$g(E);let A=!1;if(!r.resumeFrom){const I=r.getClosestProjectingParent();if(I&&!I.resumeFrom){const{snapshot:R,layout:O}=I;if(R&&O){const L=On();Va(L,s.layoutBox,R.layoutBox);const j=On();Va(j,u,O.layoutBox),Kg(L,j)||(A=!0),I.options.layoutRoot&&(r.relativeTarget=j,r.relativeTargetOrigin=L,r.relativeParent=I)}}}r.notifyListeners("didUpdate",{layout:u,snapshot:s,delta:v,layoutDelta:E,hasLayoutChanged:C,hasRelativeLayoutChanged:A})}else if(r.isLead()){const{onExitComplete:u}=r.options;u&&u()}r.options.transition=void 0}function Ab(r){r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function Nb(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function Tb(r){r.clearSnapshot()}function Lp(r){r.clearMeasurements()}function jp(r){r.isLayoutDirty=!1}function Ib(r){const{visualElement:s}=r.options;s&&s.getProps().onBeforeLayoutMeasure&&s.notify("BeforeLayoutMeasure"),r.resetTransform()}function Bp(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function _b(r){r.resolveTargetDelta()}function Rb(r){r.calcProjection()}function kb(r){r.resetSkewAndRotation()}function Pb(r){r.removeLeadSnapshot()}function Fp(r,s,a){r.translate=Cn(s.translate,0,a),r.scale=Cn(s.scale,1,a),r.origin=s.origin,r.originPoint=s.originPoint}function Vp(r,s,a,u){r.min=Cn(s.min,a.min,u),r.max=Cn(s.max,a.max,u)}function Mb(r,s,a,u){Vp(r.x,s.x,a.x,u),Vp(r.y,s.y,a.y,u)}function Ob(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const Db={duration:.45,ease:[.4,0,.1,1]},zp=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),Up=zp("applewebkit/")&&!zp("chrome/")?Math.round:ni;function Wp(r){r.min=Up(r.min),r.max=Up(r.max)}function Lb(r){Wp(r.x),Wp(r.y)}function Jg(r,s,a){return r==="position"||r==="preserve-aspect"&&!UC(Op(s),Op(a),.2)}function jb(r){var s;return r!==r.root&&((s=r.scroll)==null?void 0:s.wasRoot)}const Bb=Qg({attachResizeListener:(r,s)=>$a(r,"resize",s),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),jd={current:void 0},ex=Qg({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!jd.current){const r=new Bb({});r.mount(window),r.setOptions({layoutScroll:!0}),jd.current=r}return jd.current},resetTransform:(r,s)=>{r.style.transform=s!==void 0?s:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),Fb={pan:{Feature:rb},drag:{Feature:nb,ProjectionNode:ex,MeasureLayout:Xg}};function Hp(r,s,a){const{props:u}=r;r.animationState&&u.whileHover&&r.animationState.setActive("whileHover",a==="Start");const p="onHover"+a,x=u[p];x&&mn.postRender(()=>x(s,nl(s)))}class Vb extends Is{mount(){const{current:s}=this.node;s&&(this.unmount=c3(s,(a,u)=>(Hp(this.node,u,"Start"),p=>Hp(this.node,p,"End"))))}unmount(){}}class zb extends Is{constructor(){super(...arguments),this.isActive=!1}onFocus(){let s=!1;try{s=this.node.current.matches(":focus-visible")}catch{s=!0}!s||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ja($a(this.node.current,"focus",()=>this.onFocus()),$a(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Gp(r,s,a){const{props:u}=r;if(r.current instanceof HTMLButtonElement&&r.current.disabled)return;r.animationState&&u.whileTap&&r.animationState.setActive("whileTap",a==="Start");const p="onTap"+(a==="End"?"":a),x=u[p];x&&mn.postRender(()=>x(s,nl(s)))}class Ub extends Is{mount(){const{current:s}=this.node;s&&(this.unmount=h3(s,(a,u)=>(Gp(this.node,u,"Start"),(p,{success:x})=>Gp(this.node,p,x?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const hf=new WeakMap,Bd=new WeakMap,Wb=r=>{const s=hf.get(r.target);s&&s(r)},Hb=r=>{r.forEach(Wb)};function Gb({root:r,...s}){const a=r||document;Bd.has(a)||Bd.set(a,{});const u=Bd.get(a),p=JSON.stringify(s);return u[p]||(u[p]=new IntersectionObserver(Hb,{root:r,...s})),u[p]}function Xb(r,s,a){const u=Gb(s);return hf.set(r,a),u.observe(r),()=>{hf.delete(r),u.unobserve(r)}}const Yb={some:0,all:1};class Zb extends Is{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:s={}}=this.node.getProps(),{root:a,margin:u,amount:p="some",once:x}=s,w={root:a?a.current:void 0,rootMargin:u,threshold:typeof p=="number"?p:Yb[p]},E=v=>{const{isIntersecting:C}=v;if(this.isInView===C||(this.isInView=C,x&&!C&&this.hasEnteredView))return;C&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",C);const{onViewportEnter:A,onViewportLeave:I}=this.node.getProps(),R=C?A:I;R&&R(v)};return Xb(this.node.current,w,E)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:s,prevProps:a}=this.node;["amount","margin","root"].some($b(s,a))&&this.startObserver()}unmount(){}}function $b({viewport:r={}},{viewport:s={}}={}){return a=>r[a]!==s[a]}const Kb={inView:{Feature:Zb},tap:{Feature:Ub},focus:{Feature:zb},hover:{Feature:Vb}},qb={layout:{ProjectionNode:ex,MeasureLayout:Xg}},Qb={...LC,...Kb,...Fb,...qb},Nt=Q3(Qb,dC),Jb={some:0,all:1};function eE(r,s,{root:a,margin:u,amount:p="some"}={}){const x=ag(r),w=new WeakMap,E=C=>{C.forEach(A=>{const I=w.get(A.target);if(A.isIntersecting!==!!I)if(A.isIntersecting){const R=s(A.target,A);typeof R=="function"?w.set(A.target,R):v.unobserve(A.target)}else typeof I=="function"&&(I(A),w.delete(A.target))})},v=new IntersectionObserver(E,{root:a,rootMargin:u,threshold:typeof p=="number"?p:Jb[p]});return x.forEach(C=>v.observe(C)),()=>v.disconnect()}function tE(r,{root:s,margin:a,amount:u,once:p=!1,initial:x=!1}={}){const[w,E]=N.useState(x);return N.useEffect(()=>{if(!r.current||p&&w)return;const v=()=>(E(!0),p?void 0:()=>E(!1)),C={root:s&&s.current||void 0,margin:a,amount:u};return eE(r.current,v,C)},[s,r,a,p,u]),w}const rl=({size:r=60,fullScreen:s=!1,message:a=null})=>s?h.jsx("div",{className:"loading-spinner-fullscreen",children:h.jsxs("div",{className:"loading-spinner-content",children:[h.jsx("div",{className:"loading-spinner",style:{width:r,height:r},children:h.jsx("div",{className:"loading-spinner-inner"})}),a&&h.jsx("p",{className:"loading-spinner-message",children:a})]})}):h.jsxs("div",{className:"loading-spinner-wrapper",children:[h.jsx("div",{className:"loading-spinner",style:{width:r,height:r},children:h.jsx("div",{className:"loading-spinner-inner"})}),a&&h.jsx("p",{className:"loading-spinner-message",children:a})]}),nE=()=>{const{login:r,signup:s,user:a,logout:u,checkAuth:p,isAuthLoading:x,authLoadingMessage:w}=N.useContext(Fn),[E,v]=N.useState(""),[C,A]=N.useState(""),[I,R]=N.useState(""),[O,L]=N.useState(null),[j,B]=N.useState(null),[W,z]=N.useState(""),[F,Y]=N.useState(0),[K,ne]=N.useState({x:0,y:0}),[q,ie]=N.useState(1),[J,we]=N.useState(null),[Re,Ae]=N.useState(!1),[Ee,Te]=N.useState(!1),[Z,ke]=N.useState({}),[ve,ye]=N.useState({}),[De,be]=N.useState(!1),[X,G]=N.useState(!1),[Ce,ae]=N.useState(!1),se=N.useRef(null),[ee,Me]=N.useState(!1),Se=Rn(),Le=Br(),et=new URLSearchParams(Le.search),Xe=et.get("redirect"),de=et.get("code"),xe=Xe==="lobby",Ze=()=>{const Be="abcdefghijklmnopqrstuvwxyz0123456789";let Ie="";for(let ce=0;ce<10;ce++)Ie+=Be.charAt(Math.floor(Math.random()*Be.length));return Ie};N.useEffect(()=>{if(xe&&!E&&!C){const Be=Ze();v(Be),A(Be),ye(Ie=>({...Ie,username:!0,password:!0})),ke(Ie=>({...Ie,username:"",password:""}))}},[xe]),N.useEffect(()=>{x||a&&Se(Xe==="lobby"?de?`/lobby?code=${de}`:"/?showLobbyModal=true":Xe==="product-selection"?"/product-selection":"/")},[x,a,Xe,de,Se]),N.useEffect(()=>{F===1&&de!=="demolobby"&&(E&&C&&I)&&!Ce&&(G(!0),ae(!0))},[F,de,E,C,I,Ce]);const $e=()=>{G(!1),setTimeout(()=>{se.current&&se.current.click()},150)},Tt=()=>{G(!1)},it=Be=>{const Ie=/^[a-z0-9]+$/;return Be.length>=2&&Ie.test(Be)},qe=Be=>Be.length>=2,tt=Be=>Be.length>=2,jt=(Be,Ie,ce)=>{const ft=tt(Be)&&it(Ie)&&qe(ce);be(ft)},ze=()=>{F<Xt.length-1&&(be(!1),Y(Be=>Be+1))},gn=()=>{F>0&&(Y(Be=>Be-1),F===1&&jt(I,E,C))},rr=Be=>{const Ie=Be.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");v(Ie),it(Ie)?(ye(ce=>({...ce,username:!0})),ke(ce=>({...ce,username:""}))):(ye(ce=>({...ce,username:!1})),ke(ce=>({...ce,username:"Must be at least 2 characters (letters and numbers only)"}))),jt(I,Ie,C)},Ge=Be=>{const Ie=Be.target.value;A(Ie),qe(Ie)?(ye(ce=>({...ce,password:!0})),ke(ce=>({...ce,password:""}))):(ye(ce=>({...ce,password:!1})),ke(ce=>({...ce,password:"Must be at least 2 characters"}))),jt(I,E,Ie)},It=Be=>{const Ie=Be.target.value;R(Ie),tt(Ie)?(ye(ce=>({...ce,displayName:!0})),ke(ce=>({...ce,displayName:""}))):(ye(ce=>({...ce,displayName:!1})),ke(ce=>({...ce,displayName:"Must be at least 2 characters"}))),jt(Ie,E,C)},Ue=Be=>{const Ie=Be.target.files[0];if(Ie){const ce=new FileReader;ce.onload=ft=>{const ut=new Image;ut.onload=()=>{let xt=ut.width,Yt=ut.height;const hn=1500;xt>Yt&&xt>hn?(Yt=Yt*hn/xt,xt=hn):Yt>xt&&Yt>hn&&(xt=xt*hn/Yt,Yt=hn);const ln=document.createElement("canvas");ln.width=xt,ln.height=Yt,ln.getContext("2d").drawImage(ut,0,0,xt,Yt);const rn=ln.toDataURL("image/jpeg",.75);L(Ie),B(rn),Ae(!0),ye(cn=>({...cn,image:!0})),ke(cn=>({...cn,image:""})),be(!0)},ut.src=ft.target.result},ce.readAsDataURL(Ie)}},ct=(Be,Ie)=>{we(Ie)},Je=async()=>{try{const Be=await Bc(j,J);B(Be),Ae(!1)}catch(Be){console.error("Error cropping the image:",Be),z("Failed to crop image. Please try again.")}},wt=async(Be,Ie,ce)=>{if("credentials"in navigator&&window.PasswordCredential)try{const ft=new PasswordCredential({id:Be,password:Ie,name:ce});await navigator.credentials.store(ft),console.log("Credentials saved to password manager")}catch(ft){console.warn("Could not save credentials:",ft)}},Bt=async Be=>{if(Be.preventDefault(),Te(!0),z(""),console.log("Signup attempt - Username:",E,"Password:",C),!E||!C||!I){z("All fields are required"),Te(!1);return}if(!O||!j){z("Your profile picture is required"),Te(!1);return}try{const Ie="/signup",ce=await yt(Ie,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:E,password:C,is_lobby_signup:xe})}),ft=await ce.json();let ut=E,xt=C;if(ft.error==="Username already taken")if(xe){const dt=Ze(),rn=dt,cn=dt;v(rn),A(cn);const Fr=await yt(Ie,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:rn,password:cn,is_lobby_signup:!0})}),en=await Fr.json();if(!Fr.ok||en.error==="Username already taken"){z("Unable to create account. Please try again."),Te(!1);return}r(en),ut=rn,xt=cn}else{z("Username is taken"),Te(!1);return}else{if(!ce.ok){z(ft.message||"Signup failed"),Te(!1);return}r(ft)}if(await p(),!localStorage.getItem("access_token"))throw new Error("Authentication failed");let hn=null;if(O)hn=j,hn=hn.split(",")[1];else{const cn=await(await(await fetch("/assets/fakeprofile.png")).blob()).arrayBuffer();hn=btoa(new Uint8Array(cn).reduce((Fr,en)=>Fr+String.fromCharCode(en),""))}if(!(await yt("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:I,image_data:hn})})).ok)throw new Error("Failed to update profile");await p(),await wt(ut,xt,I),Se(Xe==="lobby"?de?`/lobby?code=${de}`:"/?showLobbyModal=true":Xe==="product-selection"?"/product-selection":"/")}catch(Ie){console.error("Error:",Ie),z("An error occurred. Please try again.")}Te(!1)},Xt=[{id:"credentials",type:"combined"},{id:"image",label:de==="demolobby"?"Profile Image (Upload Any Image)":"Take a Selfie (so people can find you)",type:"file",onChange:Ue,accept:"image/*"}];return x?h.jsx(rl,{fullScreen:!0,message:w}):h.jsxs("div",{className:"signup-container",children:[h.jsx("button",{onClick:()=>Se("/"),className:"homescreen-button",children:"Home"}),h.jsx("img",{src:"/assets/reuneo_test_11.png",alt:"Reunio Logo",className:"logo-image",style:{marginTop:"-1.5rem"}}),h.jsx("h3",{className:"signup-header",children:de==="demolobby"?"Join the demo":"Sign Up to Join"}),de&&de!=="demolobby"&&h.jsxs("h2",{className:"signup-header",children:[de," lobby"]}),de==="demolobby"&&h.jsx("h2",{className:"signup-header",style:{fontSize:"0.9rem"},children:"Try Reuneo for Free!"}),h.jsx("p",{className:"login-link-text",children:"Already have an account?"}),h.jsx("button",{type:"button",onClick:()=>Se("/login"),className:"login-cta-button",children:"Yes, I saved my email before"}),h.jsxs("div",{className:"step-form-container",children:[h.jsx("div",{className:"step-progress",children:Xt.map((Be,Ie)=>h.jsx("div",{className:`progress-dot ${Ie===F?"active":""} ${Ie<F?"completed":""}`},Ie))}),h.jsxs("form",{onSubmit:Bt,autoComplete:"on",children:[h.jsx(jr,{mode:"wait",initial:!1,children:h.jsxs(Nt.div,{initial:{opacity:0,x:8},animate:{opacity:1,x:0},exit:{opacity:0,x:-8},transition:{type:"spring",stiffness:500,damping:25,mass:.3},className:"step active",style:{willChange:"transform, opacity"},children:[h.jsxs("div",{className:"step-content",children:[F===0&&h.jsxs(Nt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"credentials-step",children:[h.jsxs("div",{className:"name-field-container",children:[h.jsx("label",{className:"step-label",children:de==="demolobby"?"Your Name (Type Any Name)":"Your Name"}),h.jsx("input",{type:"text",name:"displayName",autoComplete:"name",value:I,onChange:It,placeholder:"Enter your name",className:"step-input",autoFocus:!0}),h.jsxs(jr,{mode:"wait",children:[Z.displayName&&h.jsx(Nt.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},className:"step-error",children:Z.displayName}),ve.displayName&&!Z.displayName&&h.jsx(Nt.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"step-success",children:" Valid"})]})]}),De&&h.jsx("div",{className:"inline-next-button-container",children:h.jsx(Nt.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},type:"button",onClick:ze,className:"inline-next-button",children:"Continue "})}),xe?h.jsxs("div",{className:"credentials-collapsible",children:[h.jsx("p",{className:"credentials-hint",children:"Auto-generated login (edit if you want)"}),h.jsx("button",{type:"button",className:"see-more-toggle",onClick:()=>Me(!ee),children:ee?"Hide ":"See More "}),ee&&h.jsxs(Nt.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"credentials-fields-expanded",children:[h.jsxs("div",{className:"field-row",children:[h.jsx("label",{className:"step-label small-label",children:"Username"}),h.jsx("input",{type:"text",name:"username",autoComplete:"username",value:E,onChange:rr,placeholder:"Choose a username",className:"step-input"}),Z.username&&h.jsx("div",{className:"step-error small-feedback",children:Z.username}),ve.username&&!Z.username&&h.jsx("div",{className:"step-success small-feedback",children:" Valid"})]}),h.jsxs("div",{className:"field-row",children:[h.jsx("label",{className:"step-label small-label",children:"Password"}),h.jsx("input",{type:"password",name:"password",autoComplete:"new-password",value:C,onChange:Ge,placeholder:"Create a password",className:"step-input"}),Z.password&&h.jsx("div",{className:"step-error small-feedback",children:Z.password}),ve.password&&!Z.password&&h.jsx("div",{className:"step-success small-feedback",children:" Valid"})]})]})]}):h.jsxs("div",{className:"credentials-fields",children:[h.jsxs("div",{className:"field-row",children:[h.jsx("label",{className:"step-label small-label",children:"Username"}),h.jsx("input",{type:"text",name:"username",autoComplete:"username",value:E,onChange:rr,placeholder:"Choose a username",className:"step-input"}),Z.username&&h.jsx("div",{className:"step-error small-feedback",children:Z.username}),ve.username&&!Z.username&&h.jsx("div",{className:"step-success small-feedback",children:" Valid"})]}),h.jsxs("div",{className:"field-row",children:[h.jsx("label",{className:"step-label small-label",children:"Password"}),h.jsx("input",{type:"password",name:"password",autoComplete:"new-password",value:C,onChange:Ge,placeholder:"Create a password",className:"step-input"}),Z.password&&h.jsx("div",{className:"step-error small-feedback",children:Z.password}),ve.password&&!Z.password&&h.jsx("div",{className:"step-success small-feedback",children:" Valid"})]})]})]}),F===1&&h.jsxs(Nt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:[h.jsx("div",{className:"inline-back-button-container",children:h.jsx(Nt.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},type:"button",onClick:gn,className:"inline-back-button",children:" Back"})}),h.jsx("label",{className:"step-label",children:Xt[1].label}),h.jsx("div",{className:"image-upload-container",children:Re?h.jsxs("div",{className:"cropper-container",children:[h.jsx("div",{className:"cropper-wrapper",children:h.jsx(jc,{image:j,crop:K,zoom:q,aspect:1,onCropComplete:ct,onCropChange:ne,onZoomChange:ie})}),h.jsxs("div",{className:"cropper-controls",children:[h.jsx("button",{type:"button",onClick:()=>{Ae(!1),B(null),L(null)},className:"cancel-crop-button",children:"Cancel"}),h.jsx("button",{type:"button",onClick:Je,className:"save-crop-button",children:"Good"})]})]}):h.jsxs(h.Fragment,{children:[h.jsx("input",{ref:se,type:"file",onChange:Ue,accept:"image/*",className:"step-input"}),j&&h.jsx("div",{children:h.jsx("img",{src:j,alt:"Profile preview",className:"profile-preview-image"})})]})})]})]}),!Re&&h.jsx("div",{className:`button-container ${F===0?"combined-step-buttons":""}`,children:De&&F>0&&F<Xt.length-1&&h.jsx(Nt.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},type:"button",onClick:ze,className:"nextz-button",children:"Next "})})]},F)}),W&&h.jsx(Nt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"error-message",children:W}),F===Xt.length-1&&h.jsx(Nt.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},type:"submit",className:"primary-button",disabled:Ee,children:Ee?"Loading...":"Complete Signup"})]})]}),h.jsx(jr,{children:X&&h.jsx(Nt.div,{className:"selfie-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:Tt,children:h.jsxs(Nt.div,{className:"selfie-modal-content",initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},transition:{type:"spring",stiffness:400,damping:25},onClick:Be=>Be.stopPropagation(),children:[h.jsx("h2",{className:"selfie-modal-header",children:"You Must Take a Selfie"}),h.jsx("p",{className:"selfie-modal-subtext",children:"Don't use old photos, people need to know how you look in order to find you in the room - trust us."}),h.jsx("button",{type:"button",className:"selfie-modal-button",onClick:$e,children:"Understood"})]})})})]})},rE=5e3,tx=(r,s=null,a=null)=>{N.useEffect(()=>{const u=async()=>{try{const x=a?`/display_lobby_metadata?lobby_code=${a}`:"/display_lobby_metadata",w=await yt(x,{headers:{lobby_code:a}});if(!w.ok){console.error("Failed to fetch lobby metadata");return}const E=await w.json();r(E.player_count),s&&s(E.lobby_state)}catch(x){console.error("Error fetching lobby metadata:",x)}};u();const p=setInterval(u,rE);return()=>clearInterval(p)},[r,s,a])},Gc="currentLobbyCode",Xc="currentLobbyTimestamp",lh="currentLobbyLastValidated",iE=30*60*1e3,sE=3*60*1e3,oE=r=>{localStorage.setItem(Gc,r),localStorage.setItem(Xc,Date.now().toString()),console.log(`Stored lobby code: ${r}`)},aE=()=>{const r=localStorage.getItem(Gc),s=localStorage.getItem(Xc);return!r||!s?null:Date.now()-parseInt(s)>iE?(kc(),console.log("Lobby code expired, cleared from storage"),null):r},lE=()=>{const r=localStorage.getItem(lh);return r?Date.now()-parseInt(r)>sE:!0},cE=()=>{localStorage.setItem(lh,Date.now().toString())},kc=()=>{localStorage.removeItem(Gc),localStorage.removeItem(Xc),localStorage.removeItem(lh),console.log("Cleared lobby storage")},uE=()=>{localStorage.getItem(Gc)&&localStorage.setItem(Xc,Date.now().toString())},dE=()=>{const[r,s]=N.useState(!1),[a,u]=N.useState(!1),[p,x]=N.useState(""),[w,E]=N.useState(""),[v,C]=N.useState(""),[A,I]=N.useState(null);Nf();const{user:R,userProfile:O,checkAuth:L,permissions:j,emailVerified:B}=N.useContext(Fn),[W,z]=N.useState(null),[F,Y]=N.useState(null),[K,ne]=N.useState([]),[q,ie]=N.useState(!1),[J,we]=N.useState(null),[Re,Ae]=N.useState(!1),Ee=Rn();tx(z,Y);const[Te,Z]=N.useState(!1);N.useRef(null);const ke=N.useRef(null),ve=async(ae=!1)=>{const se=aE();if(!se||!R){we(null);return}if(we(se),ae||lE())try{const ee=await yt(`/display_lobby_metadata?lobby_code=${se}`,{headers:{lobby_code:se}});if(ee.ok){const Me=await ee.json();Me.status==="error"||Me.lobby_state==="terminated"?(kc(),we(null)):cE()}else ee.status===404&&(kc(),we(null))}catch(ee){console.error("Error validating current lobby:",ee)}},ye=async()=>{if(R){ie(!0);try{const ae=await yt("/view_my_active_lobbies");if(ae.ok){const se=await ae.json();console.log("User's active lobbies:",se),se&&se.lobbies&&Array.isArray(se.lobbies)?ne(se.lobbies):ne([])}else console.error("Failed to fetch user's active lobbies"),ne([])}catch(ae){console.error("Error fetching user's active lobbies:",ae),ne([])}finally{ie(!1)}}};N.useEffect(()=>{R?(ye(),ve(!0)):we(null)},[R]),N.useEffect(()=>{L()},[]),N.useEffect(()=>{if(new URLSearchParams(window.location.search).get("showLobbyModal")==="true"&&R){u(!0);const ee=window.location.pathname;window.history.replaceState({},"",ee)}},[R]);const De=ae=>{(j==="admin"||j==="organizer")&&Ee(`/admin_lobby_view?code=${ae}`)},be=ae=>{ae.preventDefault();const ee=new FormData(ae.target).get("name");if(!ee||ee.trim()===""){E("Please enter a lobby code");return}const Me=ee.toLowerCase().replace(/[^a-z0-9]/g,"");if(Me===""){E("Lobby code must contain only letters and numbers");return}C(Me),u(!1),console.log(Me),x(Me),Ee(`/lobby?code=${Me}`),x(""),E("")},X=()=>{Z(!1),ke.current&&(ke.current.clear(),ke.current=null)},G=()=>{if(!a)return null;const ae=()=>{u(!1),x(""),E(""),X()};return h.jsx("div",{className:"qr-instruction-overlay",onClick:ae,children:h.jsxs("div",{className:"qr-instruction-container",onClick:se=>se.stopPropagation(),children:[h.jsx("button",{onClick:ae,className:"qr-modal-close","aria-label":"Close",children:""}),h.jsx("h2",{className:"qr-instruction-title",children:"Enter Lobby Code"}),h.jsx("p",{className:"qr-instruction-text",children:"Ask your host for the lobby code if you don't have it."}),h.jsxs("form",{onSubmit:be,className:"qr-code-form",children:[h.jsxs("div",{className:"qr-input-container",children:[h.jsx("input",{type:"text",name:"name",placeholder:"Lobby code",className:"qr-code-input",pattern:"[a-zA-Z0-9]+",title:"Only letters and numbers are allowed",autoComplete:"off",autoCapitalize:"none",required:!0}),w&&h.jsx("div",{className:"qr-error-message",children:w})]}),h.jsx("button",{type:"submit",className:"qr-instruction-primary qr-submit-button",children:"Join"})]})]})})},Ce=()=>{if(!Re)return null;const ae=()=>{Ae(!1),u(!0)};return h.jsx("div",{className:"qr-instruction-overlay",onClick:()=>Ae(!1),children:h.jsxs("div",{className:"qr-instruction-container",onClick:se=>se.stopPropagation(),children:[h.jsx("button",{onClick:()=>Ae(!1),className:"qr-modal-close","aria-label":"Close",children:""}),h.jsx("div",{className:"qr-instruction-icon",children:h.jsxs("svg",{width:"56",height:"56",viewBox:"0 0 24 24",fill:"none",children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"qrIconGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[h.jsx("stop",{offset:"0%",stopColor:"#144dff"}),h.jsx("stop",{offset:"100%",stopColor:"#8b5cf6"})]})}),h.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1",fill:"url(#qrIconGradient)"}),h.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"1",fill:"url(#qrIconGradient)"}),h.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",fill:"url(#qrIconGradient)"}),h.jsx("rect",{x:"14",y:"14",width:"3",height:"3",rx:"0.5",fill:"url(#qrIconGradient)"}),h.jsx("rect",{x:"18",y:"14",width:"3",height:"3",rx:"0.5",fill:"url(#qrIconGradient)"}),h.jsx("rect",{x:"14",y:"18",width:"3",height:"3",rx:"0.5",fill:"url(#qrIconGradient)"}),h.jsx("rect",{x:"18",y:"18",width:"3",height:"3",rx:"0.5",fill:"url(#qrIconGradient)"})]})}),h.jsx("h2",{className:"qr-instruction-title",children:"Open your camera app and scan the QR code provided by your host"}),h.jsx("p",{className:"qr-instruction-text",children:"Don't worry, the app will remember your matches if you are still logged in."}),h.jsxs("div",{className:"qr-instruction-buttons",children:[h.jsx("button",{className:"qr-instruction-secondary",onClick:ae,children:"Can't find QR"}),h.jsx("button",{className:"qr-instruction-primary",onClick:()=>Ae(!1),children:"Got it"})]})]})})};return h.jsxs("div",{style:{position:"relative",height:"var(--viewport-height)",overflow:"hidden"},children:[h.jsxs("video",{className:"background-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,poster:"/assets/demo_app_home_video_cover.jpg",children:[h.jsx("source",{src:"/assets/demo_app_home_video_X2_small.mp4",type:"video/mp4"}),h.jsx("source",{src:"/assets/app_home_video_2.webm",type:"video/webm"}),h.jsx("img",{src:"/assets/demo_app_home_video_cover.jpg",alt:"Background fallback",style:{width:"100%",height:"100%",objectFit:"cover"}}),"Your browser does not support the video tag."]}),h.jsxs("div",{style:{position:"relative",zIndex:1,color:"white",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[h.jsx("div",{style:{position:"absolute",top:"0",left:"50%",transform:"translateX(-50%)"},children:h.jsx("img",{src:"/assets/reuneo_test_11.png",alt:"Logo",style:{width:"100px",height:"100px",objectFit:"contain"}})}),h.jsx("div",{style:{marginTop:"10%",display:"flex",flexDirection:"column"},children:h.jsx(Cw,{user:R,onProfileClick:()=>s(!0)})}),h.jsx("div",{style:{position:"absolute",top:"85px",display:"none",justifyContent:"flex-end",width:"94%",left:"3%",alignItems:"center"},children:(j==="admin"||j==="organizer")&&h.jsx("button",{className:"login-button",onClick:()=>Ee("/organizer-account-details"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:ae=>{ae.currentTarget.style.transform="translateY(-2px)",ae.currentTarget.style.boxShadow="0 2px 8px rgba(74, 58, 58, 0.7)"},onMouseLeave:ae=>{ae.currentTarget.style.transform="translateY(0)",ae.currentTarget.style.boxShadow="0 0 4px rgba(74, 58, 58, 0.5)"},children:h.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Settings"})})}),(j==="admin"||j==="organizer")&&R==="topaz"&&h.jsx("div",{style:{position:"absolute",top:"120px",right:"20px",zIndex:10},children:h.jsx("button",{className:"master-lobbies-button",onClick:()=>Ee("/master_lobby_view"),children:"Lobbies"})}),r&&h.jsx(H2,{onSubmit:ae=>{s(!1)},onClose:()=>s(!1),existingProfile:O}),h.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",width:"90%",maxWidth:"1200px",textAlign:"center",marginLeft:"auto",marginRight:"auto",zIndex:1,top:J&&R&&j!=="admin"&&j!=="organizer"?"32%":"50%",transition:"top 0.3s ease"},children:R?h.jsx("h2",{className:"welcome-header",style:{color:"#ffffff",fontSize:"1rem",textTransform:"uppercase",letterSpacing:"0.1em",textShadow:"4px 4px 8px rgba(0,0,0,0.9)",margin:0},children:R&&O&&(j==="admin"||j==="organizer")?(()=>{const ae="Create a Lobby",se=O?O.name.slice(0,15):"";return h.jsxs(h.Fragment,{children:[ae.split("").map((ee,Me)=>h.jsx("span",{style:{"--i":Me+1,marginRight:ee===" "?"0.5em":"1px"},children:ee},`main-${Me}`)),h.jsx("br",{}),se&&se.split("").map((ee,Me)=>h.jsx("span",{style:{"--i":Me+1,marginRight:ee===" "?"0.5em":"1px"},children:ee},`name-${Me}`))]})})():(()=>{const ae="Join the Experience",se=O?O.name.slice(0,15):"";return h.jsxs(h.Fragment,{children:[ae.split("").map((ee,Me)=>h.jsx("span",{style:{"--i":Me+1,marginRight:ee===" "?"0.5em":"1px"},children:ee},`main-${Me}`)),h.jsx("br",{}),se&&se.split("").map((ee,Me)=>h.jsx("span",{style:{"--i":Me+1,marginRight:ee===" "?"0.5em":"1px"},children:ee},`name-${Me}`))]})})()}):null}),R&&j!=="admin"&&j!=="organizer"&&h.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",width:"90%",maxWidth:"1200px",textAlign:"center",marginLeft:"auto",marginRight:"auto",zIndex:1,top:J?"calc(32% + 210px)":"calc(50% + 140px)",transition:"top 0.3s ease"},children:h.jsx("button",{className:"primary-button join-lobby-button",onClick:()=>Ee(B?"/paired-player-history":"/post-event-auth"),style:{padding:"16px 20px",backgroundColor:"transparent",color:"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0 auto",display:"block",position:"relative",zIndex:1,textAlign:"center",outline:"none",cursor:"pointer",":hover":{transform:"scale(1.02)"}},children:h.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Matches"})})}),h.jsx("div",{style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",width:"94%",display:"flex",flexDirection:"row",justifyContent:"center",gap:"1.5rem"},children:h.jsx("div",{className:"event-item",style:{width:"auto",maxWidth:"none",margin:"0",padding:"10px 20px",borderRadius:"16px",marginBottom:"20px",cursor:"pointer",opacity:1,display:"flex",flexDirection:"row",alignItems:"center",gap:"1.5rem",":hover":{transform:"translateY(-5px)"}},children:h.jsxs("div",{style:{display:"flex",gap:"1.5rem",flexDirection:"row",alignItems:"center"},children:[h.jsx("button",{className:`primary-button ${j!=="admin"&&j!=="organizer"?"join-lobby-button":""}`,onClick:()=>Ae(!0),disabled:W===null||F==="terminate",style:{opacity:1,cursor:W===null||F==="terminate"?"not-allowed":"pointer",padding:"16px 20px",backgroundColor:j!=="admin"&&j!=="organizer"?"transparent":"#144dff",color:"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0",display:"block",position:"relative",zIndex:1,textAlign:"center",outline:j!=="admin"&&j!=="organizer"?"none":"1px solid rgba(58, 53, 53, 0.7)",":hover":{backgroundColor:j!=="admin"&&j!=="organizer"?"transparent":"#535bf2",transform:"scale(1.02)"}},children:h.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Connect"})}),j!=="admin"&&j!=="organizer"&&h.jsx("button",{className:"primary-button join-lobby-button",onClick:()=>window.location.href="https://reuneo.com/organizer-signup",style:{padding:"16px 20px",backgroundColor:"transparent",color:"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0",display:"block",position:"relative",zIndex:1,textAlign:"center",outline:"none",":hover":{transform:"scale(1.02)"}},children:h.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Organize"})}),(j==="admin"||j==="organizer")&&h.jsx("button",{className:`primary-button ${j==="admin"||j==="organizer"?"create-lobby-button":""}`,onClick:K.length>0?void 0:()=>Ee("/create_lobby"),disabled:K.length>0,title:K.length>0?"You already have an active lobby. Close it before creating a new one.":"Create a new lobby",style:{padding:"16px 20px",backgroundColor:K.length>0?"rgba(128, 128, 128, 0.3)":"transparent",color:K.length>0?"rgba(255, 255, 255, 0.5)":"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:K.length>0?"0 2px 3px rgba(0, 0, 0, 0.2)":"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0",position:"relative",zIndex:1,textAlign:"center",cursor:K.length>0?"not-allowed":"pointer",opacity:K.length>0?.6:1,":hover":{transform:K.length>0?"none":"scale(1.02)"}},children:h.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Create Lobby"})})]})})}),J&&!((j==="admin"||j==="organizer")&&K.length>0)&&h.jsx("div",{style:{position:"absolute",top:"calc(32% + 80px)",left:"50%",transform:"translateX(-50%)",width:"85%",maxWidth:"280px",display:"flex",justifyContent:"center",alignItems:"center",zIndex:10,transition:"all 0.3s ease"},children:h.jsxs("div",{onClick:()=>Ee(`/lobby?code=${J}`),style:{width:"100%",background:"linear-gradient(145deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05))",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRadius:"24px",border:"1px solid rgba(255, 255, 255, 0.25)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2)",padding:"16px 20px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",flexDirection:"row",alignItems:"center",gap:"14px",overflow:"hidden"},onMouseEnter:ae=>{ae.currentTarget.style.transform="scale(1.02)",ae.currentTarget.style.boxShadow="0 12px 40px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.3)",ae.currentTarget.style.border="1px solid rgba(255, 255, 255, 0.4)"},onMouseLeave:ae=>{ae.currentTarget.style.transform="scale(1)",ae.currentTarget.style.boxShadow="0 8px 32px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2)",ae.currentTarget.style.border="1px solid rgba(255, 255, 255, 0.25)"},children:[h.jsxs("div",{style:{position:"relative",flexShrink:0},children:[h.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"50%",background:"linear-gradient(135deg, #144dff 0%, #8b5cf6 50%, #ec4899 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 15px rgba(20, 77, 255, 0.4)",animation:"pulse-glow 2s ease-in-out infinite"},children:h.jsx("span",{style:{color:"white",fontWeight:"800",fontSize:"1.1rem",textTransform:"uppercase"},children:J.charAt(0).toUpperCase()})}),h.jsx("div",{style:{position:"absolute",top:"-2px",right:"-2px",width:"14px",height:"14px",borderRadius:"50%",background:"#22c55e",border:"2px solid rgba(255, 255, 255, 0.9)",boxShadow:"0 0 8px rgba(34, 197, 94, 0.6)",animation:"pulse-dot 1.5s ease-in-out infinite"}})]}),h.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",gap:"2px"},children:[h.jsx("span",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.65rem",fontWeight:"600",letterSpacing:"0.02em"},children:"Return to your active lobby"}),h.jsx("span",{style:{color:"white",fontWeight:"700",fontSize:"1rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",textShadow:"0 2px 4px rgba(0, 0, 0, 0.3)"},children:J.length>15?J.slice(0,15)+"...":J})]}),h.jsx("div",{style:{flexShrink:0,width:"32px",height:"32px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},children:h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})})]})}),(j==="admin"||j==="organizer")&&K.length>0&&h.jsx("div",{className:"events-list",style:{position:"absolute",bottom:J&&!((j==="admin"||j==="organizer")&&K.length>0)?"calc(20px + 120px + 10px + 15% + 10px)":"calc(20px + 120px + 10px)",left:"50%",transform:"translateX(-50%)",width:"44%",height:"15%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.05), rgba(83, 91, 242, 0.05))",borderRadius:"30px",padding:"1rem",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",justifyContent:"center",alignItems:"center"},children:q?h.jsx("div",{style:{textAlign:"center",color:"white"},children:h.jsx("p",{children:"Loading your lobbies..."})}):K.length>0?h.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",perspective:"1000px"},children:K.map((ae,se)=>h.jsxs("div",{className:"card",style:{width:"calc(100% - 2rem)",maxWidth:"200px",minWidth:"150px",background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",boxShadow:"0 10px 30px rgba(20, 77, 255, 0.15)",border:"1px solid rgba(20, 77, 255, 0.2)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",padding:"1rem 1rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",transformStyle:"preserve-3d","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(20, 77, 255, 0.1), rgba(83, 91, 242, 0.1))",opacity:0,transition:"opacity 0.4s ease"}},onClick:()=>De(ae),onMouseEnter:ee=>{ee.currentTarget.style.transform="translateY(-10px) rotateX(5deg)",ee.currentTarget.style.boxShadow="0 20px 40px rgba(20, 77, 255, 0.25)",ee.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.4)",ee.currentTarget.style.background="rgba(255, 255, 255, 0.98)"},onMouseLeave:ee=>{ee.currentTarget.style.transform="translateY(0) rotateX(0)",ee.currentTarget.style.boxShadow="0 10px 30px rgba(20, 77, 255, 0.15)",ee.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.2)",ee.currentTarget.style.background="rgba(255, 255, 255, 0.95)"},children:[h.jsx("div",{className:"glow-button",style:{width:"30px",height:"30px",borderRadius:"50%",background:"linear-gradient(135deg, #144dff, #535bf2)",marginBottom:".5rem",marginTop:"-1rem",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:".8rem",boxShadow:"0 8px 20px rgba(20, 77, 255, 0.3)",transition:"all 0.4s ease",position:"relative","&::after":{content:'""',position:"absolute",top:"-5px",left:"-5px",right:"-5px",bottom:"-5px",borderRadius:"50%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.2), rgba(83, 91, 242, 0.2))",zIndex:-1,animation:"pulse 2s infinite"}},children:ae&&ae.length>0?ae.charAt(0).toUpperCase():"?"}),h.jsxs("h3",{style:{marginTop:"0.5rem",color:"#144dff",fontWeight:"700",fontSize:".9em",fontFamily:"Helvetica",textAlign:"center",textShadow:"0 2px 4px rgba(20, 77, 255, 0.1)",letterSpacing:"0.5px"},children:["Lobby ",ae||"Unknown"]})]},se))}):h.jsx("div",{style:{}})})]}),h.jsx(G,{}),h.jsx(Ce,{})]})};function fE(){const{pathname:r}=Br();return N.useEffect(()=>{window.scrollTo(0,0)},[r]),null}function hE(){const{pathname:r}=Br(),s=r.startsWith("/organizer-dashboard");return N.useEffect(()=>{const a=document.getElementById("root"),u=document.body;return s?(a==null||a.classList.add("dashboard-view"),u==null||u.classList.add("dashboard-view")):(a==null||a.classList.remove("dashboard-view"),u==null||u.classList.remove("dashboard-view")),()=>{a==null||a.classList.remove("dashboard-view"),u==null||u.classList.remove("dashboard-view")}},[r,s]),null}const pE=()=>{const{login:r,signup:s,user:a,logout:u,checkAuth:p}=N.useContext(Fn),[x,w]=N.useState(""),[E,v]=N.useState(""),[C,A]=N.useState(""),[I,R]=N.useState(""),[O,L]=N.useState(!0),[j,B]=N.useState({}),[W,z]=N.useState(!1),[F,Y]=N.useState(""),K=Rn(),[ne]=vm();N.useEffect(()=>{ne.get("error")==="invalid_or_expired_link"&&(Y("Your login link has expired or is invalid. Please request a new one."),window.history.replaceState({},"","/login"))},[ne]);const q=Re=>{const Ae=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,Ee=/^[a-z0-9]+$/;return Re.length>=2&&(Ae.test(Re)||Ee.test(Re))},ie=Re=>{const Ae=Re.target.value.toLowerCase().replace(/[^a-z0-9@._\-]/g,"");w(Ae);const Ee=Ae.includes("@");Ae.length>0&&!Ee?z(!0):z(!1),q(Ae)?B(Te=>({...Te,username:""})):B(Te=>({...Te,username:" "}))},J=Re=>{v(Re.target.value)},we=async Re=>{if(Re.preventDefault(),R(""),!q(x)){R("Please enter a valid email or username");return}try{const Ee=await yt(O?"/login":"/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:x,password:E})});if(Ee.ok){const Te=await Ee.json();r(Te),p(),K("/")}else{const Te=await Ee.json();R(Te.message||`${O?"Login":"Signup"} failed`)}}catch(Ae){R("Network error occurred. Please try again."),console.error("Error:",Ae)}};return h.jsxs("div",{className:"login-container",children:[h.jsx("button",{onClick:()=>K("/"),className:"homescreen-button",children:"Home"}),h.jsx("img",{src:"/assets/reuneo_test_11.png",alt:"Reunio Logo",className:"logo-image"}),h.jsx("h1",{className:"login-header",children:"Login"}),h.jsxs("div",{className:"login-signup-form",children:[F&&h.jsx("div",{className:"error-message",style:{backgroundColor:"rgba(255, 107, 107, 0.1)",border:"1px solid rgba(255, 107, 107, 0.3)",padding:"12px 16px",borderRadius:"8px",marginBottom:"16px"},children:F}),I&&h.jsx("div",{className:"error-message",children:I}),h.jsxs("form",{onSubmit:we,children:[h.jsxs("div",{className:"form-group",children:[h.jsx("input",{type:"text",placeholder:"email or username",className:"login-input",value:x,onChange:ie,required:!0,autoComplete:"email"}),W&&h.jsx("div",{className:"step-success",children:"or username (lowercase letters and numbers)"})]}),h.jsx("div",{className:"form-group",children:h.jsx("input",{type:"password",placeholder:"password",className:"login-input",value:E,onChange:J,required:!0,autoComplete:"current-password"})}),h.jsx("button",{type:"submit",className:"login-primary-button",children:"Login"})]}),h.jsx("button",{type:"button",onClick:()=>K("/forgot-password"),className:"forgot-password-link",children:"Forgot password?"})]})]})},mE=()=>{const r=Rn(),{logout:s}=N.useContext(Fn);return localStorage.removeItem("access_token"),N.useEffect(()=>{console.log("LogoutPage useEffect"),setTimeout(()=>{s(),r("/")},100)},[]),h.jsx("div",{children:"Logged out redirecting to homescreen"})};var gE=Object.defineProperty,Pc=Object.getOwnPropertySymbols,nx=Object.prototype.hasOwnProperty,rx=Object.prototype.propertyIsEnumerable,Xp=(r,s,a)=>s in r?gE(r,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[s]=a,pf=(r,s)=>{for(var a in s||(s={}))nx.call(s,a)&&Xp(r,a,s[a]);if(Pc)for(var a of Pc(s))rx.call(s,a)&&Xp(r,a,s[a]);return r},mf=(r,s)=>{var a={};for(var u in r)nx.call(r,u)&&s.indexOf(u)<0&&(a[u]=r[u]);if(r!=null&&Pc)for(var u of Pc(r))s.indexOf(u)<0&&rx.call(r,u)&&(a[u]=r[u]);return a};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var oo;(r=>{const s=class Mt{constructor(v,C,A,I){if(this.version=v,this.errorCorrectionLevel=C,this.modules=[],this.isFunction=[],v<Mt.MIN_VERSION||v>Mt.MAX_VERSION)throw new RangeError("Version value out of range");if(I<-1||I>7)throw new RangeError("Mask value out of range");this.size=v*4+17;let R=[];for(let L=0;L<this.size;L++)R.push(!1);for(let L=0;L<this.size;L++)this.modules.push(R.slice()),this.isFunction.push(R.slice());this.drawFunctionPatterns();const O=this.addEccAndInterleave(A);if(this.drawCodewords(O),I==-1){let L=1e9;for(let j=0;j<8;j++){this.applyMask(j),this.drawFormatBits(j);const B=this.getPenaltyScore();B<L&&(I=j,L=B),this.applyMask(j)}}p(0<=I&&I<=7),this.mask=I,this.applyMask(I),this.drawFormatBits(I),this.isFunction=[]}static encodeText(v,C){const A=r.QrSegment.makeSegments(v);return Mt.encodeSegments(A,C)}static encodeBinary(v,C){const A=r.QrSegment.makeBytes(v);return Mt.encodeSegments([A],C)}static encodeSegments(v,C,A=1,I=40,R=-1,O=!0){if(!(Mt.MIN_VERSION<=A&&A<=I&&I<=Mt.MAX_VERSION)||R<-1||R>7)throw new RangeError("Invalid value");let L,j;for(L=A;;L++){const F=Mt.getNumDataCodewords(L,C)*8,Y=w.getTotalBits(v,L);if(Y<=F){j=Y;break}if(L>=I)throw new RangeError("Data too long")}for(const F of[Mt.Ecc.MEDIUM,Mt.Ecc.QUARTILE,Mt.Ecc.HIGH])O&&j<=Mt.getNumDataCodewords(L,F)*8&&(C=F);let B=[];for(const F of v){a(F.mode.modeBits,4,B),a(F.numChars,F.mode.numCharCountBits(L),B);for(const Y of F.getData())B.push(Y)}p(B.length==j);const W=Mt.getNumDataCodewords(L,C)*8;p(B.length<=W),a(0,Math.min(4,W-B.length),B),a(0,(8-B.length%8)%8,B),p(B.length%8==0);for(let F=236;B.length<W;F^=253)a(F,8,B);let z=[];for(;z.length*8<B.length;)z.push(0);return B.forEach((F,Y)=>z[Y>>>3]|=F<<7-(Y&7)),new Mt(L,C,z,R)}getModule(v,C){return 0<=v&&v<this.size&&0<=C&&C<this.size&&this.modules[C][v]}getModules(){return this.modules}drawFunctionPatterns(){for(let A=0;A<this.size;A++)this.setFunctionModule(6,A,A%2==0),this.setFunctionModule(A,6,A%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const v=this.getAlignmentPatternPositions(),C=v.length;for(let A=0;A<C;A++)for(let I=0;I<C;I++)A==0&&I==0||A==0&&I==C-1||A==C-1&&I==0||this.drawAlignmentPattern(v[A],v[I]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(v){const C=this.errorCorrectionLevel.formatBits<<3|v;let A=C;for(let R=0;R<10;R++)A=A<<1^(A>>>9)*1335;const I=(C<<10|A)^21522;p(I>>>15==0);for(let R=0;R<=5;R++)this.setFunctionModule(8,R,u(I,R));this.setFunctionModule(8,7,u(I,6)),this.setFunctionModule(8,8,u(I,7)),this.setFunctionModule(7,8,u(I,8));for(let R=9;R<15;R++)this.setFunctionModule(14-R,8,u(I,R));for(let R=0;R<8;R++)this.setFunctionModule(this.size-1-R,8,u(I,R));for(let R=8;R<15;R++)this.setFunctionModule(8,this.size-15+R,u(I,R));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let v=this.version;for(let A=0;A<12;A++)v=v<<1^(v>>>11)*7973;const C=this.version<<12|v;p(C>>>18==0);for(let A=0;A<18;A++){const I=u(C,A),R=this.size-11+A%3,O=Math.floor(A/3);this.setFunctionModule(R,O,I),this.setFunctionModule(O,R,I)}}drawFinderPattern(v,C){for(let A=-4;A<=4;A++)for(let I=-4;I<=4;I++){const R=Math.max(Math.abs(I),Math.abs(A)),O=v+I,L=C+A;0<=O&&O<this.size&&0<=L&&L<this.size&&this.setFunctionModule(O,L,R!=2&&R!=4)}}drawAlignmentPattern(v,C){for(let A=-2;A<=2;A++)for(let I=-2;I<=2;I++)this.setFunctionModule(v+I,C+A,Math.max(Math.abs(I),Math.abs(A))!=1)}setFunctionModule(v,C,A){this.modules[C][v]=A,this.isFunction[C][v]=!0}addEccAndInterleave(v){const C=this.version,A=this.errorCorrectionLevel;if(v.length!=Mt.getNumDataCodewords(C,A))throw new RangeError("Invalid argument");const I=Mt.NUM_ERROR_CORRECTION_BLOCKS[A.ordinal][C],R=Mt.ECC_CODEWORDS_PER_BLOCK[A.ordinal][C],O=Math.floor(Mt.getNumRawDataModules(C)/8),L=I-O%I,j=Math.floor(O/I);let B=[];const W=Mt.reedSolomonComputeDivisor(R);for(let F=0,Y=0;F<I;F++){let K=v.slice(Y,Y+j-R+(F<L?0:1));Y+=K.length;const ne=Mt.reedSolomonComputeRemainder(K,W);F<L&&K.push(0),B.push(K.concat(ne))}let z=[];for(let F=0;F<B[0].length;F++)B.forEach((Y,K)=>{(F!=j-R||K>=L)&&z.push(Y[F])});return p(z.length==O),z}drawCodewords(v){if(v.length!=Math.floor(Mt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let C=0;for(let A=this.size-1;A>=1;A-=2){A==6&&(A=5);for(let I=0;I<this.size;I++)for(let R=0;R<2;R++){const O=A-R,j=(A+1&2)==0?this.size-1-I:I;!this.isFunction[j][O]&&C<v.length*8&&(this.modules[j][O]=u(v[C>>>3],7-(C&7)),C++)}}p(C==v.length*8)}applyMask(v){if(v<0||v>7)throw new RangeError("Mask value out of range");for(let C=0;C<this.size;C++)for(let A=0;A<this.size;A++){let I;switch(v){case 0:I=(A+C)%2==0;break;case 1:I=C%2==0;break;case 2:I=A%3==0;break;case 3:I=(A+C)%3==0;break;case 4:I=(Math.floor(A/3)+Math.floor(C/2))%2==0;break;case 5:I=A*C%2+A*C%3==0;break;case 6:I=(A*C%2+A*C%3)%2==0;break;case 7:I=((A+C)%2+A*C%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[C][A]&&I&&(this.modules[C][A]=!this.modules[C][A])}}getPenaltyScore(){let v=0;for(let R=0;R<this.size;R++){let O=!1,L=0,j=[0,0,0,0,0,0,0];for(let B=0;B<this.size;B++)this.modules[R][B]==O?(L++,L==5?v+=Mt.PENALTY_N1:L>5&&v++):(this.finderPenaltyAddHistory(L,j),O||(v+=this.finderPenaltyCountPatterns(j)*Mt.PENALTY_N3),O=this.modules[R][B],L=1);v+=this.finderPenaltyTerminateAndCount(O,L,j)*Mt.PENALTY_N3}for(let R=0;R<this.size;R++){let O=!1,L=0,j=[0,0,0,0,0,0,0];for(let B=0;B<this.size;B++)this.modules[B][R]==O?(L++,L==5?v+=Mt.PENALTY_N1:L>5&&v++):(this.finderPenaltyAddHistory(L,j),O||(v+=this.finderPenaltyCountPatterns(j)*Mt.PENALTY_N3),O=this.modules[B][R],L=1);v+=this.finderPenaltyTerminateAndCount(O,L,j)*Mt.PENALTY_N3}for(let R=0;R<this.size-1;R++)for(let O=0;O<this.size-1;O++){const L=this.modules[R][O];L==this.modules[R][O+1]&&L==this.modules[R+1][O]&&L==this.modules[R+1][O+1]&&(v+=Mt.PENALTY_N2)}let C=0;for(const R of this.modules)C=R.reduce((O,L)=>O+(L?1:0),C);const A=this.size*this.size,I=Math.ceil(Math.abs(C*20-A*10)/A)-1;return p(0<=I&&I<=9),v+=I*Mt.PENALTY_N4,p(0<=v&&v<=2568888),v}getAlignmentPatternPositions(){if(this.version==1)return[];{const v=Math.floor(this.version/7)+2,C=this.version==32?26:Math.ceil((this.version*4+4)/(v*2-2))*2;let A=[6];for(let I=this.size-7;A.length<v;I-=C)A.splice(1,0,I);return A}}static getNumRawDataModules(v){if(v<Mt.MIN_VERSION||v>Mt.MAX_VERSION)throw new RangeError("Version number out of range");let C=(16*v+128)*v+64;if(v>=2){const A=Math.floor(v/7)+2;C-=(25*A-10)*A-55,v>=7&&(C-=36)}return p(208<=C&&C<=29648),C}static getNumDataCodewords(v,C){return Math.floor(Mt.getNumRawDataModules(v)/8)-Mt.ECC_CODEWORDS_PER_BLOCK[C.ordinal][v]*Mt.NUM_ERROR_CORRECTION_BLOCKS[C.ordinal][v]}static reedSolomonComputeDivisor(v){if(v<1||v>255)throw new RangeError("Degree out of range");let C=[];for(let I=0;I<v-1;I++)C.push(0);C.push(1);let A=1;for(let I=0;I<v;I++){for(let R=0;R<C.length;R++)C[R]=Mt.reedSolomonMultiply(C[R],A),R+1<C.length&&(C[R]^=C[R+1]);A=Mt.reedSolomonMultiply(A,2)}return C}static reedSolomonComputeRemainder(v,C){let A=C.map(I=>0);for(const I of v){const R=I^A.shift();A.push(0),C.forEach((O,L)=>A[L]^=Mt.reedSolomonMultiply(O,R))}return A}static reedSolomonMultiply(v,C){if(v>>>8||C>>>8)throw new RangeError("Byte out of range");let A=0;for(let I=7;I>=0;I--)A=A<<1^(A>>>7)*285,A^=(C>>>I&1)*v;return p(A>>>8==0),A}finderPenaltyCountPatterns(v){const C=v[1];p(C<=this.size*3);const A=C>0&&v[2]==C&&v[3]==C*3&&v[4]==C&&v[5]==C;return(A&&v[0]>=C*4&&v[6]>=C?1:0)+(A&&v[6]>=C*4&&v[0]>=C?1:0)}finderPenaltyTerminateAndCount(v,C,A){return v&&(this.finderPenaltyAddHistory(C,A),C=0),C+=this.size,this.finderPenaltyAddHistory(C,A),this.finderPenaltyCountPatterns(A)}finderPenaltyAddHistory(v,C){C[0]==0&&(v+=this.size),C.pop(),C.unshift(v)}};s.MIN_VERSION=1,s.MAX_VERSION=40,s.PENALTY_N1=3,s.PENALTY_N2=3,s.PENALTY_N3=40,s.PENALTY_N4=10,s.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],s.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],r.QrCode=s;function a(E,v,C){if(v<0||v>31||E>>>v)throw new RangeError("Value out of range");for(let A=v-1;A>=0;A--)C.push(E>>>A&1)}function u(E,v){return(E>>>v&1)!=0}function p(E){if(!E)throw new Error("Assertion error")}const x=class Tn{constructor(v,C,A){if(this.mode=v,this.numChars=C,this.bitData=A,C<0)throw new RangeError("Invalid argument");this.bitData=A.slice()}static makeBytes(v){let C=[];for(const A of v)a(A,8,C);return new Tn(Tn.Mode.BYTE,v.length,C)}static makeNumeric(v){if(!Tn.isNumeric(v))throw new RangeError("String contains non-numeric characters");let C=[];for(let A=0;A<v.length;){const I=Math.min(v.length-A,3);a(parseInt(v.substring(A,A+I),10),I*3+1,C),A+=I}return new Tn(Tn.Mode.NUMERIC,v.length,C)}static makeAlphanumeric(v){if(!Tn.isAlphanumeric(v))throw new RangeError("String contains unencodable characters in alphanumeric mode");let C=[],A;for(A=0;A+2<=v.length;A+=2){let I=Tn.ALPHANUMERIC_CHARSET.indexOf(v.charAt(A))*45;I+=Tn.ALPHANUMERIC_CHARSET.indexOf(v.charAt(A+1)),a(I,11,C)}return A<v.length&&a(Tn.ALPHANUMERIC_CHARSET.indexOf(v.charAt(A)),6,C),new Tn(Tn.Mode.ALPHANUMERIC,v.length,C)}static makeSegments(v){return v==""?[]:Tn.isNumeric(v)?[Tn.makeNumeric(v)]:Tn.isAlphanumeric(v)?[Tn.makeAlphanumeric(v)]:[Tn.makeBytes(Tn.toUtf8ByteArray(v))]}static makeEci(v){let C=[];if(v<0)throw new RangeError("ECI assignment value out of range");if(v<128)a(v,8,C);else if(v<16384)a(2,2,C),a(v,14,C);else if(v<1e6)a(6,3,C),a(v,21,C);else throw new RangeError("ECI assignment value out of range");return new Tn(Tn.Mode.ECI,0,C)}static isNumeric(v){return Tn.NUMERIC_REGEX.test(v)}static isAlphanumeric(v){return Tn.ALPHANUMERIC_REGEX.test(v)}getData(){return this.bitData.slice()}static getTotalBits(v,C){let A=0;for(const I of v){const R=I.mode.numCharCountBits(C);if(I.numChars>=1<<R)return 1/0;A+=4+R+I.bitData.length}return A}static toUtf8ByteArray(v){v=encodeURI(v);let C=[];for(let A=0;A<v.length;A++)v.charAt(A)!="%"?C.push(v.charCodeAt(A)):(C.push(parseInt(v.substring(A+1,A+3),16)),A+=2);return C}};x.NUMERIC_REGEX=/^[0-9]*$/,x.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,x.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let w=x;r.QrSegment=x})(oo||(oo={}));(r=>{(s=>{const a=class{constructor(p,x){this.ordinal=p,this.formatBits=x}};a.LOW=new a(0,1),a.MEDIUM=new a(1,0),a.QUARTILE=new a(2,3),a.HIGH=new a(3,2),s.Ecc=a})(r.QrCode||(r.QrCode={}))})(oo||(oo={}));(r=>{(s=>{const a=class{constructor(p,x){this.modeBits=p,this.numBitsCharCount=x}numCharCountBits(p){return this.numBitsCharCount[Math.floor((p+7)/17)]}};a.NUMERIC=new a(1,[10,12,14]),a.ALPHANUMERIC=new a(2,[9,11,13]),a.BYTE=new a(4,[8,16,16]),a.KANJI=new a(8,[8,10,12]),a.ECI=new a(7,[0,0,0]),s.Mode=a})(r.QrSegment||(r.QrSegment={}))})(oo||(oo={}));var zo=oo;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var xE={L:zo.QrCode.Ecc.LOW,M:zo.QrCode.Ecc.MEDIUM,Q:zo.QrCode.Ecc.QUARTILE,H:zo.QrCode.Ecc.HIGH},ix=128,sx="L",ox="#FFFFFF",ax="#000000",lx=!1,cx=1,yE=4,wE=0,vE=.1;function ux(r,s=0){const a=[];return r.forEach(function(u,p){let x=null;u.forEach(function(w,E){if(!w&&x!==null){a.push(`M${x+s} ${p+s}h${E-x}v1H${x+s}z`),x=null;return}if(E===u.length-1){if(!w)return;x===null?a.push(`M${E+s},${p+s} h1v1H${E+s}z`):a.push(`M${x+s},${p+s} h${E+1-x}v1H${x+s}z`);return}w&&x===null&&(x=E)})}),a.join("")}function dx(r,s){return r.slice().map((a,u)=>u<s.y||u>=s.y+s.h?a:a.map((p,x)=>x<s.x||x>=s.x+s.w?p:!1))}function CE(r,s,a,u){if(u==null)return null;const p=r.length+a*2,x=Math.floor(s*vE),w=p/s,E=(u.width||x)*w,v=(u.height||x)*w,C=u.x==null?r.length/2-E/2:u.x*w,A=u.y==null?r.length/2-v/2:u.y*w,I=u.opacity==null?1:u.opacity;let R=null;if(u.excavate){let L=Math.floor(C),j=Math.floor(A),B=Math.ceil(E+C-L),W=Math.ceil(v+A-j);R={x:L,y:j,w:B,h:W}}const O=u.crossOrigin;return{x:C,y:A,h:v,w:E,excavation:R,opacity:I,crossOrigin:O}}function bE(r,s){return s!=null?Math.max(Math.floor(s),0):r?yE:wE}function fx({value:r,level:s,minVersion:a,includeMargin:u,marginSize:p,imageSettings:x,size:w,boostLevel:E}){let v=Gt.useMemo(()=>{const L=(Array.isArray(r)?r:[r]).reduce((j,B)=>(j.push(...zo.QrSegment.makeSegments(B)),j),[]);return zo.QrCode.encodeSegments(L,xE[s],a,void 0,void 0,E)},[r,s,a,E]);const{cells:C,margin:A,numCells:I,calculatedImageSettings:R}=Gt.useMemo(()=>{let O=v.getModules();const L=bE(u,p),j=O.length+L*2,B=CE(O,w,L,x);return{cells:O,margin:L,numCells:j,calculatedImageSettings:B}},[v,w,x,u,p]);return{qrcode:v,margin:A,cells:C,numCells:I,calculatedImageSettings:R}}var EE=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),SE=Gt.forwardRef(function(s,a){const u=s,{value:p,size:x=ix,level:w=sx,bgColor:E=ox,fgColor:v=ax,includeMargin:C=lx,minVersion:A=cx,boostLevel:I,marginSize:R,imageSettings:O}=u,j=mf(u,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:B}=j,W=mf(j,["style"]),z=O==null?void 0:O.src,F=Gt.useRef(null),Y=Gt.useRef(null),K=Gt.useCallback(Te=>{F.current=Te,typeof a=="function"?a(Te):a&&(a.current=Te)},[a]),[ne,q]=Gt.useState(!1),{margin:ie,cells:J,numCells:we,calculatedImageSettings:Re}=fx({value:p,level:w,minVersion:A,boostLevel:I,includeMargin:C,marginSize:R,imageSettings:O,size:x});Gt.useEffect(()=>{if(F.current!=null){const Te=F.current,Z=Te.getContext("2d");if(!Z)return;let ke=J;const ve=Y.current,ye=Re!=null&&ve!==null&&ve.complete&&ve.naturalHeight!==0&&ve.naturalWidth!==0;ye&&Re.excavation!=null&&(ke=dx(J,Re.excavation));const De=window.devicePixelRatio||1;Te.height=Te.width=x*De;const be=x/we*De;Z.scale(be,be),Z.fillStyle=E,Z.fillRect(0,0,we,we),Z.fillStyle=v,EE?Z.fill(new Path2D(ux(ke,ie))):J.forEach(function(X,G){X.forEach(function(Ce,ae){Ce&&Z.fillRect(ae+ie,G+ie,1,1)})}),Re&&(Z.globalAlpha=Re.opacity),ye&&Z.drawImage(ve,Re.x+ie,Re.y+ie,Re.w,Re.h)}}),Gt.useEffect(()=>{q(!1)},[z]);const Ae=pf({height:x,width:x},B);let Ee=null;return z!=null&&(Ee=Gt.createElement("img",{src:z,key:z,style:{display:"none"},onLoad:()=>{q(!0)},ref:Y,crossOrigin:Re==null?void 0:Re.crossOrigin})),Gt.createElement(Gt.Fragment,null,Gt.createElement("canvas",pf({style:Ae,height:x,width:x,ref:K,role:"img"},W)),Ee)});SE.displayName="QRCodeCanvas";var ch=Gt.forwardRef(function(s,a){const u=s,{value:p,size:x=ix,level:w=sx,bgColor:E=ox,fgColor:v=ax,includeMargin:C=lx,minVersion:A=cx,boostLevel:I,title:R,marginSize:O,imageSettings:L}=u,j=mf(u,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:B,cells:W,numCells:z,calculatedImageSettings:F}=fx({value:p,level:w,minVersion:A,boostLevel:I,includeMargin:C,marginSize:O,imageSettings:L,size:x});let Y=W,K=null;L!=null&&F!=null&&(F.excavation!=null&&(Y=dx(W,F.excavation)),K=Gt.createElement("image",{href:L.src,height:F.h,width:F.w,x:F.x+B,y:F.y+B,preserveAspectRatio:"none",opacity:F.opacity,crossOrigin:F.crossOrigin}));const ne=ux(Y,B);return Gt.createElement("svg",pf({height:x,width:x,viewBox:`0 0 ${z} ${z}`,ref:a,role:"img"},j),!!R&&Gt.createElement("title",null,R),Gt.createElement("path",{fill:E,d:`M0,0 h${z}v${z}H0z`,shapeRendering:"crispEdges"}),Gt.createElement("path",{fill:v,d:ne,shapeRendering:"crispEdges"}),K)});ch.displayName="QRCodeSVG";const AE=({player:r})=>h.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"350px",height:"500px",margin:"0 auto",position:"relative"},children:r!=null&&r.image_data?h.jsxs("div",{style:{position:"relative",width:"350px",height:"450px"},children:[h.jsx("img",{src:`data:image/jpeg;base64,${r.image_data}`,alt:r.name,style:{width:"350px",height:"450px",objectFit:"cover",borderRadius:"28px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.15)",margin:"auto",display:"block"},onError:s=>{console.error("Image failed to load:",s),s.target.style.display="none"}}),h.jsx("div",{style:{position:"absolute",bottom:"-6px",left:"1px",right:"1px",background:"linear-gradient(135deg, #42A5F5 0%, #2196F3 30%, #1976D2 70%, #1565C0 100%)",color:"white",padding:"14px 28px",borderRadius:"50px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',boxShadow:"0 4px 12px rgba(33, 150, 243, 0.25)",letterSpacing:"0.02em"},children:r.name})]}):h.jsxs("div",{style:{width:"350px",height:"450px",backgroundColor:"#f0f1f4",borderRadius:"28px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"relative",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[h.jsx("p",{style:{marginBottom:"60px",color:"#6b7280"},children:"No image available"}),h.jsx("div",{style:{position:"absolute",bottom:"-6px",left:"1px",right:"1px",background:"linear-gradient(135deg, #42A5F5 0%, #2196F3 30%, #1976D2 70%, #1565C0 100%)",color:"white",padding:"14px 28px",borderRadius:"50px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',boxShadow:"0 4px 12px rgba(33, 150, 243, 0.25)",letterSpacing:"0.02em"},children:r.name})]})});var Yp=typeof window>"u"?N.useEffect:N.useLayoutEffect,NE=({isPlaying:r,duration:s,startAt:a=0,updateInterval:u=0,onComplete:p,onUpdate:x})=>{let[w,E]=N.useState(a),v=N.useRef(0),C=N.useRef(a),A=N.useRef(a*-1e3),I=N.useRef(null),R=N.useRef(null),O=N.useRef(null),L=W=>{let z=W/1e3;if(R.current===null){R.current=z,I.current=requestAnimationFrame(L);return}let F=z-R.current,Y=v.current+F;R.current=z,v.current=Y;let K=C.current+(u===0?Y:(Y/u|0)*u),ne=C.current+Y,q=typeof s=="number"&&ne>=s;E(q?s:K),q||(I.current=requestAnimationFrame(L))},j=()=>{I.current&&cancelAnimationFrame(I.current),O.current&&clearTimeout(O.current),R.current=null},B=N.useCallback(W=>{j(),v.current=0;let z=typeof W=="number"?W:a;C.current=z,E(z),r&&(I.current=requestAnimationFrame(L))},[r,a]);return Yp(()=>{if(x==null||x(w),s&&w>=s){A.current+=s*1e3;let{shouldRepeat:W=!1,delay:z=0,newStartAt:F}=(p==null?void 0:p(A.current/1e3))||{};W&&(O.current=setTimeout(()=>B(F),z*1e3))}},[w,s]),Yp(()=>(r&&(I.current=requestAnimationFrame(L)),j),[r,s,u]),{elapsedTime:w,reset:B}},TE=(r,s,a)=>{let u=r/2,p=s/2,x=u-p,w=2*x,E=a==="clockwise"?"1,0":"0,1",v=2*Math.PI*x;return{path:`m ${u},${p} a ${x},${x} 0 ${E} 0,${w} a ${x},${x} 0 ${E} 0,-${w}`,pathLength:v}},Zp=(r,s)=>r===0||r===s?0:typeof s=="number"?r-s:0,IE=r=>({position:"relative",width:r,height:r}),_E={display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,top:0,width:"100%",height:"100%"},hx=(r,s,a,u,p)=>{if(u===0)return s;let x=(p?u-r:r)/u;return s+a*x},$p=r=>{var s,a;return(a=(s=r.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(u,p,x,w)=>`#${p}${p}${x}${x}${w}${w}`).substring(1).match(/.{2}/g))==null?void 0:s.map(u=>parseInt(u,16)))!=null?a:[]},RE=(r,s)=>{var a;let{colors:u,colorsTime:p,isSmoothColorTransition:x=!0}=r;if(typeof u=="string")return u;let w=(a=p==null?void 0:p.findIndex((R,O)=>R>=s&&s>=p[O+1]))!=null?a:-1;if(!p||w===-1)return u[0];if(!x)return u[w];let E=p[w]-s,v=p[w]-p[w+1],C=$p(u[w]),A=$p(u[w+1]),I=!!r.isGrowing;return`rgb(${C.map((R,O)=>hx(E,R,A[O]-R,v,I)|0).join(",")})`},kE=r=>{let{duration:s,initialRemainingTime:a,updateInterval:u,size:p=180,strokeWidth:x=12,trailStrokeWidth:w,isPlaying:E=!1,isGrowing:v=!1,rotation:C="clockwise",onComplete:A,onUpdate:I}=r,R=N.useRef(),O=Math.max(x,w??0),{path:L,pathLength:j}=TE(p,O,C),{elapsedTime:B}=NE({isPlaying:E,duration:s,startAt:Zp(s,a),updateInterval:u,onUpdate:typeof I=="function"?z=>{let F=Math.ceil(s-z);F!==R.current&&(R.current=F,I(F))}:void 0,onComplete:typeof A=="function"?z=>{var F;let{shouldRepeat:Y,delay:K,newInitialRemainingTime:ne}=(F=A(z))!=null?F:{};if(Y)return{shouldRepeat:Y,delay:K,newStartAt:Zp(s,ne)}}:void 0}),W=s-B;return{elapsedTime:B,path:L,pathLength:j,remainingTime:Math.ceil(W),rotation:C,size:p,stroke:RE(r,W),strokeDashoffset:hx(B,0,j,s,v),strokeWidth:x}},uh=r=>{let{children:s,strokeLinecap:a,trailColor:u,trailStrokeWidth:p}=r,{path:x,pathLength:w,stroke:E,strokeDashoffset:v,remainingTime:C,elapsedTime:A,size:I,strokeWidth:R}=kE(r);return Gt.createElement("div",{style:IE(I)},Gt.createElement("svg",{viewBox:`0 0 ${I} ${I}`,width:I,height:I,xmlns:"http://www.w3.org/2000/svg"},Gt.createElement("path",{d:x,fill:"none",stroke:u??"#d9d9d9",strokeWidth:p??R}),Gt.createElement("path",{d:x,fill:"none",stroke:E,strokeLinecap:a??"round",strokeWidth:R,strokeDasharray:w,strokeDashoffset:v})),typeof s=="function"&&Gt.createElement("div",{style:_E},s({remainingTime:C,elapsedTime:A,color:E})))};uh.displayName="CountdownCircleTimer";const PE=({onComplete:r})=>{const[s,a]=N.useState(7),u=N.useRef(null);N.useEffect(()=>(u.current&&clearInterval(u.current),u.current=setInterval(()=>{a(E=>E<=1?(clearInterval(u.current),r&&setTimeout(r,400),0):E-1)},1e3),()=>{u.current&&clearInterval(u.current)}),[r]);const p=s/7,x=2*Math.PI*120,w=x*(1-p);return h.jsxs("div",{className:"lobby-countdown-overlay",children:[h.jsx("div",{className:"countdown-bg-gradient"}),h.jsxs("div",{className:"countdown-floating-orbs",children:[h.jsx("div",{className:"orb orb-1"}),h.jsx("div",{className:"orb orb-2"}),h.jsx("div",{className:"orb orb-3"}),h.jsx("div",{className:"orb orb-4"})]}),h.jsxs("div",{className:"lobby-countdown-content",children:[h.jsxs("svg",{className:"countdown-ring",viewBox:"0 0 260 260",children:[h.jsx("circle",{className:"countdown-ring-bg",cx:"130",cy:"130",r:"120",fill:"none",strokeWidth:"6"}),h.jsx(Nt.circle,{className:"countdown-ring-progress",cx:"130",cy:"130",r:"120",fill:"none",strokeWidth:"6",strokeLinecap:"round",strokeDasharray:x,initial:{strokeDashoffset:0},animate:{strokeDashoffset:w},transition:{duration:.8,ease:"easeInOut"}})]}),h.jsx("div",{className:"countdown-number-container",children:h.jsx(jr,{mode:"popLayout",children:h.jsx(Nt.div,{className:"lobby-countdown-number",initial:{scale:.5,opacity:0,filter:"blur(10px)",y:40},animate:{scale:1,opacity:1,filter:"blur(0px)",y:0},exit:{scale:1.5,opacity:0,filter:"blur(8px)",y:-30},transition:{duration:.5,ease:[.16,1,.3,1]},children:s},s)})}),h.jsx(Nt.div,{className:"lobby-countdown-text",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.5},children:s>0?"Get ready!":"Starting..."})]}),h.jsx(jr,{children:h.jsx(Nt.div,{className:"countdown-pulse",initial:{scale:.8,opacity:.5},animate:{scale:2.5,opacity:0},transition:{duration:1,ease:"easeOut"}},s)})]})},ME=({onComplete:r,lobbyCode:s="this"})=>{const{userProfile:a}=N.useContext(Fn),[u,p]=N.useState(0),[x,w]=N.useState(!1),[E,v]=N.useState(!1),[C,A]=N.useState([0]),[I,R]=N.useState(!1),O=N.useRef(null),L=N.useRef(null),j=[{image:"/assets/how_to_tutorial_updated_slide1.svg",duration:2e3,animatedText:"Find your match using their profile picture!"},{image:"/assets/how_to_pt2_2.svg",duration:4e3,animatedText:"Raise volume to the max, to know when you have a match!"},{image:"/assets/how_to_tutorial_updated_slide3.svg",duration:4e3,animatedText:"Tap leave to stop being paired/take a break"}];return N.useEffect(()=>{const B=()=>{if(u>=j.length-1){clearInterval(O.current),r&&r();return}w(!0);const W=u+1;A([u,W]),L.current=setTimeout(()=>{R(!1),p(W),w(!1),setTimeout(()=>{A([W]),v(!0),j[W].animatedText&&R(!0)},500)},500)};return O.current=setInterval(B,j[u].duration),v(!0),u===0&&j[0].animatedText&&R(!0),()=>{O.current&&clearInterval(O.current),L.current&&clearTimeout(L.current)}},[u,j.length,r]),h.jsx("div",{className:"tutorial-overlay",children:h.jsxs("div",{className:"tutorial-container",children:[C.map(B=>h.jsxs("div",{className:`tutorial-slide ${B===u?"current":B<u?"previous":"next"}`,children:[B===u&&j[B].animatedText&&I&&h.jsx("div",{className:"animated-text pop-burst",children:j[B].animatedText}),B===1&&h.jsx("div",{className:"volume-arrow-container",children:h.jsx("svg",{className:"volume-arrow",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M19 12H5M5 12L12 5M5 12L12 19",stroke:"#144dff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),h.jsx("div",{className:`tutorial-image-container ${B===0?"first-slide":""}`,children:h.jsx("img",{src:j[B].image,alt:`Tutorial step ${B+1}`,className:"tutorial-image"})}),h.jsx("div",{className:`tutorial-text ${E&&B===u?"text-animate":""}`,children:j[B].text})]},B)),h.jsx("div",{className:"tutorial-progress-bar-container",children:h.jsx("div",{className:"tutorial-progress-bar",children:h.jsx("div",{className:"tutorial-progress-bar-fill"})})})]})})},OE=r=>Array.from({length:r},(s,a)=>{const u=a/r*Math.PI*2,p=300+Math.random()*200;return{id:a,startX:Math.cos(u)*p,startY:Math.sin(u)*p,delay:Math.random()*.5,duration:.8+Math.random()*.4,size:4+Math.random()*6}}),DE=r=>Array.from({length:r},(s,a)=>({id:a,left:Math.random()*100,delay:Math.random()*2,duration:1+Math.random()*1,size:2+Math.random()*3})),LE=({isVisible:r,onAnimationEnd:s})=>{const[a,u]=N.useState(!1),[p,x]=N.useState(!1),w=N.useRef(null),E=N.useMemo(()=>OE(30),[]),v=N.useMemo(()=>DE(20),[]);return N.useEffect(()=>(w.current&&clearTimeout(w.current),r?(u(!0),x(!1),setTimeout(()=>x(!0),600),w.current=setTimeout(()=>{u(!1),x(!1),s&&s()},3500)):(u(!1),x(!1)),()=>{w.current&&(clearTimeout(w.current),w.current=null)}),[r,s]),h.jsx(jr,{children:a&&h.jsxs(Nt.div,{className:"match-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[h.jsx("div",{className:"match-spotlight-bg"}),h.jsx("div",{className:"spotlight-rays",children:[...Array(8)].map((C,A)=>h.jsx(Nt.div,{className:"ray",style:{transform:`rotate(${A*45}deg)`},initial:{opacity:0,scaleY:0},animate:{opacity:.15,scaleY:1},transition:{delay:.3+A*.05,duration:.6,ease:"easeOut"}},A))}),h.jsx("div",{className:"particles-container",children:E.map(C=>h.jsx(Nt.div,{className:"converge-particle",style:{width:C.size,height:C.size},initial:{x:C.startX,y:C.startY,opacity:0,scale:0},animate:{x:0,y:0,opacity:[0,1,1,0],scale:[0,1.5,1,0]},transition:{duration:C.duration,delay:C.delay,ease:[.25,.1,.25,1]}},C.id))}),h.jsx(Nt.div,{className:"central-burst",initial:{scale:0,opacity:0},animate:{scale:[0,1.5,1],opacity:[0,1,.8]},transition:{delay:.5,duration:.6,ease:"easeOut"}}),h.jsx("div",{className:"falling-stars",children:v.map(C=>h.jsx(Nt.div,{className:"falling-star",style:{left:`${C.left}%`,width:C.size,height:C.size},initial:{y:-20,opacity:0},animate:{y:[null,window.innerHeight+20],opacity:[0,1,1,0]},transition:{duration:C.duration,delay:C.delay,repeat:1,ease:"linear"}},C.id))}),h.jsx(jr,{children:p&&h.jsxs(Nt.div,{className:"match-text-container",initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:1.2,opacity:0},transition:{type:"spring",stiffness:300,damping:20},children:[h.jsx(Nt.div,{className:"match-text-glow",animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:"It's a Match!"}),h.jsx("div",{className:"match-text",children:"It's a Match!"}),h.jsx(Nt.div,{className:"match-subtext",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:.3,duration:.4},children:"Get ready to connect"})]})}),p&&h.jsx(Nt.div,{className:"ring-pulse",initial:{scale:.2,opacity:1},animate:{scale:3,opacity:0},transition:{duration:1,ease:"easeOut"}})]})})},jE=({isVisible:r,onAnimationEnd:s})=>{const[a,u]=N.useState(!1),p=N.useRef(null);return N.useEffect(()=>(p.current&&clearTimeout(p.current),r?(u(!0),p.current=setTimeout(()=>{u(!1),s&&s()},2200)):u(!1),()=>{p.current&&(clearTimeout(p.current),p.current=null)}),[r,s]),h.jsx(jr,{children:a&&h.jsxs(Nt.div,{className:"ready-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[h.jsx("div",{className:"ready-backdrop"}),h.jsxs(Nt.div,{className:"ready-card",initial:{scale:.8,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},transition:{type:"spring",stiffness:300,damping:25,delay:.1},children:[h.jsxs("div",{className:"checkmark-container",children:[h.jsxs("svg",{className:"checkmark-svg",viewBox:"0 0 100 100",children:[h.jsx(Nt.circle,{className:"checkmark-circle",cx:"50",cy:"50",r:"45",fill:"none",strokeWidth:"4",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.5,delay:.2,ease:"easeOut"}}),h.jsx(Nt.path,{className:"checkmark-check",d:"M30 50 L45 65 L70 35",fill:"none",strokeWidth:"5",strokeLinecap:"round",strokeLinejoin:"round",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.4,delay:.6,ease:"easeOut"}})]}),h.jsx(Nt.div,{className:"success-pulse",initial:{scale:.8,opacity:.6},animate:{scale:1.8,opacity:0},transition:{duration:.8,delay:.9,ease:"easeOut"}})]}),h.jsx(Nt.div,{className:"ready-text",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.8,duration:.3},children:"You're ready!"}),h.jsx(Nt.div,{className:"ready-subtext",initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:.3},children:"Waiting for the next round"})]})]})})},BE=({children:r,delay:s=0,index:a,onMouseEnter:u})=>{const p=N.useRef(null),x=tE(p,{amount:.5,once:!1});return h.jsx(Nt.div,{ref:p,"data-index":a,onMouseEnter:u,initial:{scale:.7,opacity:0},animate:x?{scale:1,opacity:1}:{scale:.7,opacity:0},transition:{duration:.2,delay:s},className:"animated-tag-item-wrapper",children:r})},Kp=({tags:r=[],selectedTags:s=[],onTagChange:a,showGradients:u=!0,enableArrowNavigation:p=!0,displayScrollbar:x=!0,className:w="",maxHeight:E=400})=>{const v=N.useRef(null),[C,A]=N.useState(-1),[I,R]=N.useState(!1),[O,L]=N.useState(0),[j,B]=N.useState(1),W=N.useCallback(Y=>{A(Y)},[]),z=N.useCallback((Y,K)=>{A(K),a&&a(Y)},[a]),F=N.useCallback(Y=>{const{scrollTop:K,scrollHeight:ne,clientHeight:q}=Y.target;L(Math.min(K/50,1));const ie=ne-(K+q);B(ne<=q?0:Math.min(ie/50,1))},[]);return N.useEffect(()=>{if(v.current){const{scrollHeight:Y,clientHeight:K}=v.current;Y<=K?B(0):B(1)}},[r]),N.useEffect(()=>{if(!p)return;const Y=K=>{K.key==="ArrowDown"||K.key==="Tab"&&!K.shiftKey?(K.preventDefault(),R(!0),A(ne=>Math.min(ne+1,r.length-1))):K.key==="ArrowUp"||K.key==="Tab"&&K.shiftKey?(K.preventDefault(),R(!0),A(ne=>Math.max(ne-1,0))):(K.key==="Enter"||K.key===" ")&&C>=0&&C<r.length&&(K.preventDefault(),a&&a(r[C]))};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[r,C,a,p]),N.useEffect(()=>{if(!I||C<0||!v.current)return;const Y=v.current,K=Y.querySelector(`[data-index="${C}"]`);if(K){const q=Y.scrollTop,ie=Y.clientHeight,J=K.offsetTop,we=J+K.offsetHeight;J<q+50?Y.scrollTo({top:J-50,behavior:"smooth"}):we>q+ie-50&&Y.scrollTo({top:we-ie+50,behavior:"smooth"})}R(!1)},[C,I]),h.jsxs("div",{className:`animated-tag-list-container ${w}`,children:[h.jsx("div",{ref:v,className:`animated-tag-list ${x?"":"no-scrollbar"}`,onScroll:F,style:{maxHeight:`${E}px`},children:r.map((Y,K)=>h.jsx(BE,{delay:.05,index:K,onMouseEnter:()=>W(K),children:h.jsxs("label",{className:`animated-tag-label ${C===K?"focused":""} ${s.includes(Y)?"selected":""}`,onClick:ne=>{ne.preventDefault(),z(Y,K)},children:[h.jsx("input",{type:"checkbox",checked:s.includes(Y),onChange:()=>{},tabIndex:-1}),h.jsx("span",{className:"tag-text",children:Y})]})},`tag-${Y}`))}),u&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"animated-tag-top-gradient",style:{opacity:O}}),h.jsx("div",{className:"animated-tag-bottom-gradient",style:{opacity:j}})]})]})},FE=({onProfileClick:r,onTutorialClick:s,userImage:a})=>{const[u,p]=N.useState(!1),x=N.useRef(null);N.useEffect(()=>{const v=C=>{x.current&&!x.current.contains(C.target)&&p(!1)};return document.addEventListener("mousedown",v),document.addEventListener("touchstart",v),()=>{document.removeEventListener("mousedown",v),document.removeEventListener("touchstart",v)}},[]);const w=()=>{p(!1),r()},E=()=>{p(!1),s()};return h.jsxs("div",{className:"profile-dropdown-container",ref:x,children:[h.jsxs("button",{className:`profile-dropdown-button ${u?"active":""}`,onClick:()=>p(!u),children:[h.jsx("div",{className:"profile-dropdown-avatar",children:h.jsx("img",{src:a||"/assets/avatar_3.png",alt:"Profile"})}),h.jsx("span",{className:"profile-dropdown-text",children:"            "}),h.jsx("svg",{className:`profile-dropdown-chevron ${u?"rotated":""}`,width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:h.jsx("path",{d:"M2.5 4.5L6 8L9.5 4.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]}),h.jsx(jr,{children:u&&h.jsxs(Nt.div,{className:"profile-dropdown-menu",initial:{opacity:0,y:-8,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-8,scale:.95},transition:{duration:.15,ease:[.4,0,.2,1]},children:[h.jsxs("button",{className:"profile-dropdown-item profile-dropdown-item--primary",onClick:w,children:[h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[h.jsx("circle",{cx:"12",cy:"8",r:"4",stroke:"currentColor",strokeWidth:"2"}),h.jsx("path",{d:"M4 20C4 16.6863 7.58172 14 12 14C16.4183 14 20 16.6863 20 20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),h.jsx("span",{children:"Edit Profile"})]}),h.jsx("div",{className:"profile-dropdown-divider"}),h.jsxs("button",{className:"profile-dropdown-item",onClick:E,children:[h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[h.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:"currentColor",strokeWidth:"2"}),h.jsx("path",{d:"M12 8V12L15 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),h.jsx("span",{children:"Tutorial"})]})]})})]})},VE=({isOpen:r,onClose:s})=>{const{userProfile:a}=N.useContext(Fn),[u,p]=N.useState(""),[x,w]=N.useState(""),[E,v]=N.useState(""),[C,A]=N.useState(null),[I,R]=N.useState(null),[O,L]=N.useState(!1),[j,B]=N.useState({x:0,y:0}),[W,z]=N.useState(1),[F,Y]=N.useState(null),[K,ne]=N.useState(!1),[q,ie]=N.useState(!1),[J,we]=N.useState(""),[Re,Ae]=N.useState(!0),Ee=N.useRef(null);N.useEffect(()=>{r&&(we(""),R(null),ne(!1),B({x:0,y:0}),z(1),Te())},[r]);const Te=async()=>{var X,G,Ce;Ae(!0),we("");try{const ae=await yt("/load_user");if(ae.ok){const se=await ae.json();p(((X=se.profile)==null?void 0:X.name)||""),w(se.email||""),v(((G=se.profile)==null?void 0:G.contact_url)||""),L(se.email_verified===!0),(Ce=se.profile)!=null&&Ce.image_data?A(`data:image/jpeg;base64,${se.profile.image_data}`):a!=null&&a.image_data&&A(`data:image/jpeg;base64,${a.image_data}`)}}catch(ae){console.error("Error loading user data:",ae),p((a==null?void 0:a.name)||""),w((user==null?void 0:user.email)||""),a!=null&&a.image_data&&A(`data:image/jpeg;base64,${a.image_data}`)}finally{Ae(!1)}},Z=X=>{const G=X.target.files[0];if(G){const Ce=new FileReader;Ce.onload=ae=>{A(ae.target.result),ne(!0)},Ce.readAsDataURL(G)}},ke=(X,G)=>{Y(G)},ve=async()=>{try{const X=await Bc(C,F);R(X),A(X),ne(!1)}catch(X){console.error("Error cropping image:",X),we("Failed to crop image. Please try again.")}},ye=()=>{ne(!1),a!=null&&a.image_data&&A(`data:image/jpeg;base64,${a.image_data}`)},De=async X=>{var G;X.preventDefault(),ie(!0),we("");try{const Ce={name:u.trim()||void 0,contact_url:E.trim()||void 0};if(!O&&x.trim()){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(x.trim())){we("Please enter a valid email address."),ie(!1);return}Ce.email=x.trim()}I&&(Ce.image_data=I.split(",")[1]);const ae=await yt("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ce)});if(!ae.ok){const se=await ae.json();throw new Error(se.detail||"Failed to update profile")}ie(!1),s()}catch(Ce){console.error("Error updating profile:",Ce),(G=Ce.message)!=null&&G.toLowerCase().includes("already associated")?we("This email is already in use by another account."):we(Ce.message||"Failed to update profile. Please try again.")}finally{ie(!1)}},be=I||C||"/assets/avatar_3.png";return h.jsx(jr,{children:r&&h.jsx(Nt.div,{className:"lobby-profile-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:s,children:h.jsxs(Nt.div,{className:"lobby-profile-modal",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",stiffness:400,damping:30},onClick:X=>X.stopPropagation(),children:[h.jsx("button",{className:"lobby-profile-modal-close",onClick:s,"aria-label":"Close",children:h.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:h.jsx("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}),h.jsx("h2",{className:"lobby-profile-modal-title",children:"Edit Profile"}),Re?h.jsxs("div",{className:"lobby-profile-modal-loading",children:[h.jsx("div",{className:"lobby-profile-spinner"}),h.jsx("span",{children:"Loading..."})]}):h.jsxs("form",{onSubmit:De,className:"lobby-profile-form",children:[J&&h.jsx("div",{className:"lobby-profile-error",children:J}),K?h.jsxs("div",{className:"lobby-profile-crop-section",children:[h.jsx("div",{className:"lobby-profile-crop-container",children:h.jsx(jc,{image:C,crop:j,zoom:W,aspect:1,onCropComplete:ke,onCropChange:B,onZoomChange:z,cropShape:"round"})}),h.jsxs("div",{className:"lobby-profile-crop-actions",children:[h.jsx("button",{type:"button",className:"lobby-profile-btn-secondary",onClick:ye,children:"Cancel"}),h.jsx("button",{type:"button",className:"lobby-profile-btn-primary",onClick:ve,children:"Save Crop"})]})]}):h.jsxs("div",{className:"lobby-profile-image-section",children:[h.jsxs("div",{className:"lobby-profile-image-container",children:[h.jsx("img",{src:be,alt:"Profile",className:"lobby-profile-image"}),h.jsx("button",{type:"button",className:"lobby-profile-image-edit",onClick:()=>{var X;return(X=Ee.current)==null?void 0:X.click()},children:h.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#144dff"}),h.jsx("path",{d:"M14.5 7.5L16.5 9.5M8 16L8.5 13.5L14.5 7.5L16.5 9.5L10.5 15.5L8 16Z",fill:"white",stroke:"white",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]}),h.jsx("input",{ref:Ee,type:"file",accept:"image/*",onChange:Z,style:{display:"none"}}),h.jsx("span",{className:"lobby-profile-image-hint",children:"Tap to change photo"})]}),h.jsxs("div",{className:"lobby-profile-field",children:[h.jsx("label",{className:"lobby-profile-label",children:"Name"}),h.jsx("input",{type:"text",value:u,onChange:X=>p(X.target.value),placeholder:"Your name",className:"lobby-profile-input"})]}),h.jsxs("div",{className:"lobby-profile-field",children:[h.jsxs("label",{className:"lobby-profile-label",children:["Email",O&&h.jsxs("span",{className:"lobby-profile-verified-badge",children:[h.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",children:h.jsx("path",{d:"M5 13L9 17L19 7",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),"Verified"]})]}),h.jsx("input",{type:"email",value:x,onChange:X=>w(X.target.value),placeholder:"you@example.com",className:`lobby-profile-input ${O?"lobby-profile-input--readonly":""}`,disabled:O}),O&&h.jsx("span",{className:"lobby-profile-field-hint",children:"Verified emails cannot be changed"})]}),h.jsxs("div",{className:"lobby-profile-field",children:[h.jsx("label",{className:"lobby-profile-label",children:"Contact URL"}),h.jsx("input",{type:"text",value:E,onChange:X=>v(X.target.value),placeholder:"linkedin.com/in/yourprofile",className:"lobby-profile-input"}),h.jsx("span",{className:"lobby-profile-field-hint",children:"LinkedIn, Twitter, or any way to connect"})]}),h.jsx("button",{type:"submit",className:"lobby-profile-submit",disabled:q||K,children:q?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"lobby-profile-spinner-small"}),"Saving..."]}):"Save Changes"})]})]})})})},hc=9,zE=5,UE=5e3,WE=!1,HE=()=>{var V;const r=Math.floor(540),[s,a]=N.useState([]),[u,p]=N.useState("self"),[x,w]=N.useState(!1),[E,v]=N.useState(""),C=N.useRef(null),A=N.useRef(null),[I,R]=N.useState(!1),O=N.useRef(!1),[L,j]=N.useState(!1),[B,W]=N.useState(!1),{loadSound:z,seekTo:F,cancelSound:Y,checkSound:K,soundEnabled:ne,setSoundEnabled:q,isPlaying:ie}=Nf(),[J,we]=N.useState("yonder"),Re=Rn(),{code:Ae}=vy(),[Ee,Te]=N.useState(null);tx(Te,null,J);const{user:Z,userProfile:ke,checkAuth:ve,permissions:ye,isAuthLoading:De,authLoadingMessage:be,emailVerified:X}=N.useContext(Fn),[G,Ce]=N.useState(!1),[ae,se]=N.useState([]),[ee,Me]=N.useState(""),[Se,Le]=N.useState(""),[et,Xe]=N.useState(!1),de=N.useRef(null),xe=N.useRef(localStorage.getItem("hasShownEmailBackupModal")==="true"),[Ze,$e]=N.useState(!1),Tt=N.useRef(localStorage.getItem("hasShownPauseInfoModal")==="true");N.useEffect(()=>{if(!De&&!Z){const He=new URLSearchParams(window.location.search).get("code")||Ae;Re(He?`/signup?redirect=lobby&code=${He}`:"/signup?redirect=lobby")}},[De,Z,Re,Ae]),N.useEffect(()=>{(()=>{const Ye=new URLSearchParams(window.location.search).get("code")||Ae;if(Ye){we(Ye),oE(Ye),_i(Ye);const at=`hasSeenTutorial_${Ye}`,Dt=localStorage.getItem(at),un=!!localStorage.getItem("access_token");console.log("Tutorial check:",{codeParam:Ye,lobbyTutorialKey:at,hasSeenLobbyTutorial:Dt,isAuthenticated:un}),!Dt&&un&&(pi(!0),localStorage.setItem(at,"true"))}})()},[Ae]);const[it,qe]=N.useState(null),[tt,jt]=N.useState(null),[ze,gn]=N.useState(null),[rr,Ge]=N.useState(null),[It,Ue]=N.useState(null),ct=N.useRef(!1),Je=N.useRef(null),wt=N.useRef(null),Bt=N.useRef(null),Xt=N.useRef(null),[Be,Ie]=N.useState(null),[ce,ft]=N.useState(null),[ut,xt]=N.useState(null),[Yt,hn]=N.useState(null),[ln,dt]=N.useState(!0),rn=N.useRef(0),[cn,Fr]=N.useState(null),[en,Ni]=N.useState(null),[Wt,Nr]=N.useState([]),[Dn,Vn]=N.useState([]),[Qi,wr]=N.useState(!document.hidden),Ti=N.useRef("yonder"),tn=N.useRef({}),Kn=N.useRef([]),[qn,Ke]=N.useState(!1),Tr=N.useRef(null),[co,Qn]=N.useState(!1);N.useEffect(()=>{Ti.current=J},[J]);async function ir(ge,He){const at=await(await yt("/set_profile_info",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tags_work:ge,tags_desiring_work:He})})).json();console.log("SET PROFILE INFO:",at)}const Ii=async ge=>{if(ge.length!==0){Ke(!0);try{const He=await yt("/load_batch_pfp_small_icons",{method:"POST",headers:{"Content-Type":"application/json",lobby_code:Ti.current},body:JSON.stringify({usernames:ge})});if(He.ok){const Ye=await He.json();tn.current={...tn.current,...Ye},console.log("Profile images fetched:",Object.keys(Ye))}else console.error("Failed to fetch profile images:",He.status)}catch(He){console.error("Error fetching profile images:",He)}finally{Ke(!1)}}},_i=async ge=>{try{const He=await yt("/lobby_setup_data",{headers:{lobby_code:ge}});if(He.ok){const Ye=await He.json();Ye.logo_icon?(Tr.current=Ye.logo_icon,Qn(!0),console.log("Sponsor logo loaded successfully")):console.log("No sponsor logo available for this lobby")}else console.error("Failed to fetch lobby setup data:",He.status)}catch(He){console.error("Error fetching lobby setup data:",He)}};async function Ir(){try{Y(),tn.current={},Kn.current=[],(await yt("/disconnect_lobby",{headers:{lobby_code:J}})).ok&&Re("/")}catch(ge){console.error("Error disconnecting from lobby:",ge),Re("/")}finally{Y(),Re("/"),console.log("finally")}}const[uo,Ji]=N.useState(!1),[vr,Ln]=N.useState(null),Zt=N.useRef(!1),[fo,Lt]=N.useState(!1),[Ri,Ne]=N.useState(null),[Rs,Kt]=N.useState(!1),hi=(ge,He)=>{if(!ge||!He)return null;for(const Ye of ge.tags_work)if(He.desiring_tags_work.includes(Ye)){for(const at of He.tags_work)if(ge.desiring_tags_work.includes(at))return{playerTag:Ye,opponentTag:at}}return null};async function ki(){try{rn.current+=1,rn.current>5&&(rn.current=0,ct.current=!1);const ge=!document.hidden,He=Ti.current;if(console.log("lobby code fr:",He),He=="yonder"){console.log("lobby code is not set");return}const Ye=await yt(`/lobby?is_visible=${ge}`,{headers:{is_visible_t_f:ge?"t":"f",lobby_code:He}});if(Ye.ok){const at=await Ye.json();if(console.log("LOBBY PAIR DATA:",He,at),at.status=="inactive"){Y(),Re("/post-event-auth");return}at.lobby_state!=="terminated"&&uE(),gn(at.opponent_name),at.opponent_name==null&&qe(null),a(at.custom_tags),Ie(at.lobby_state),hn(at.lobby_duration);const Dt=typeof at.round_time_left=="number"&&!isNaN(at.round_time_left)?at.round_time_left:0;console.log("Timer Debug:",{roundDuration:at.lobby_duration,timeLeft:Dt,lobbyState:at.lobby_state,usingDefaultDuration:!at.lobby_duration}),Bt.current=Dt,Xt.current=at.beat_go_off,ft(Math.floor(Dt));const un=Math.floor(Dt/60),lt=Math.floor(Dt%60);xt(`${un}:${lt.toString().padStart(2,"0")}`),Ue(at.table_number),at.player_tags!=null&&at.player_tags.tags_work!=null&&Nr(at.player_tags.tags_work),at.player_tags!=null&&at.player_tags.desiring_tags_work!=null&&Vn(at.player_tags.desiring_tags_work),Bt.current!=null&&at.lobby_state=="active"&&Bt.current!=0&&(F(r-Bt.current),console.log("seeking to",r-Bt.current));const Qt=await yt(`/display_lobby_metadata?lobby_code=${He}`,{headers:{lobby_code:He}});if(Qt.ok){const sn=await Qt.json();Te(sn.player_count);const Sn=sn.usernames||[];if(JSON.stringify(Kn.current)!==JSON.stringify(Sn)){Kn.current=Sn;const Vt=Sn.filter(zn=>!tn.current[zn]&&zn!==(Z==null?void 0:Z.username));Vt.length>0&&(WE||(console.log("Fetching images for new users:",Vt),Ii(Vt)))}}if((ze!=at.opponent_name||it==null)&&!ct.current&&at.opponent_name!=null){ct.current=!0,console.log("fetching profile");const sn=await yt("/paired_player_profile");if(sn.ok){const Sn=await sn.json();qe(Sn),console.log("profile fetched:",Sn.name)}else console.log("profile fetch failed");ct.current=!1}const ts=vr==="interrim"&&at.lobby_state==="active"&&at.opponent_name,Pi=at.lobby_state==="active"&&at.opponent_name&&at.is_purgatory_pair&&Je.current!==at.opponent_name;if((ts||Pi)&&!Zt.current){console.log("New pairing detected:",{isNormalPairingStart:ts,isPurgatoryPairing:Pi}),Je.current=at.opponent_name;const sn=hi(at.player_tags,at.opponent_tags);Pi?(console.log("Purgatory pairing - triggering animation"),Zt.current=!0,Ji(!0),wt.current&&(wt.current.currentTime=0,wt.current.play().catch(Vt=>console.log("Purgatory notification sound blocked:",Vt))),sn&&(console.log("Purgatory pairing also has interest match:",sn),Ne(sn),Lt(!0))):sn&&(console.log("Normal pairing with interest match:",sn),Ne(sn),Lt(!0),Zt.current=!0,Ji(!0));const Sn=!X&&!xe.current,_r=!Tt.current;if(Sn||_r)try{const zn=await(await yt("/lobby/previous_match_profiles",{headers:{lobby_code:He}})).json(),Un=zn.total_match_count||0;Sn&&zn.profiles&&zn.profiles.length>=2?(se(zn.profiles),Ce(!0),xe.current=!0,localStorage.setItem("hasShownEmailBackupModal","true")):_r&&Un>=4&&!G&&($e(!0),Tt.current=!0,localStorage.setItem("hasShownPauseInfoModal","true"))}catch(Vt){console.error("Error fetching previous match profiles:",Vt)}}Ln(at.lobby_state)}}catch(ge){console.error("Error fetching lobby data:",ge)}}N.useEffect(()=>{K()?q(!0):q(!1);const ge=setInterval(async()=>{ki()},UE);return()=>clearInterval(ge)},[]),N.useEffect(()=>{const ge=()=>{wt.current||(wt.current=new Audio("./assets/sounds/new_banger_chorus.mp3"),wt.current.load(),console.log("Purgatory notification sound unlocked")),document.removeEventListener("click",ge),document.removeEventListener("touchstart",ge)};return document.addEventListener("click",ge),document.addEventListener("touchstart",ge),()=>{document.removeEventListener("click",ge),document.removeEventListener("touchstart",ge)}},[]),N.useEffect(()=>{const ge=setTimeout(ki,1e3);return()=>clearTimeout(ge)},[Be,J]),N.useEffect(()=>{const ge=()=>{const He=!document.hidden;He&&!Qi&&(console.log("Page became visible - fetching latest data"),ki()),wr(He)};return document.addEventListener("visibilitychange",ge),()=>{document.removeEventListener("visibilitychange",ge)}},[Qi]);const Pt=()=>h.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(4px)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},children:h.jsxs("div",{style:{backgroundColor:"#ffffff",padding:"32px 28px",borderRadius:"24px",position:"relative",minWidth:"300px",maxWidth:"340px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.2)",textAlign:"center"},children:[h.jsx("button",{onClick:()=>dt(!1),style:{color:"#ffffff",position:"absolute",right:"12px",top:"12px",border:"none",background:"transparent",fontSize:"10px",cursor:"pointer",width:"10px",height:"10px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:""}),h.jsx("h2",{style:{marginTop:"8px",marginBottom:"8px",color:"#1a1a2e",fontWeight:700,fontSize:"1.25rem",fontFamily:"-apple-system, BlinkMacSystemFont, sans-serif"},children:"Sound is Important"}),h.jsx("p",{style:{color:"#6b7280",fontSize:"0.9rem",marginBottom:"4px"},children:"Raise your volume for the best experience"}),h.jsx("button",{onClick:()=>{z(),dt(!1)},style:{padding:"14px 32px",marginTop:"20px",backgroundColor:"#1a1a2e",color:"#ffffff",border:"none",borderRadius:"16px",fontWeight:600,cursor:"pointer",fontSize:"1rem",fontFamily:"-apple-system, BlinkMacSystemFont, sans-serif",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",transition:"all 0.2s ease"},children:"Enable Sound"})]})}),St=(ge,He)=>{cn==null&&Fr(Wt),en==null&&Ni(Dn);const Ye=ge==="self"?cn:en;if(!(Ye!=null&&Ye.includes(He))&&(Ye==null?void 0:Ye.length)>=zE){v("Reached tag limit for this section"),setTimeout(()=>{var Dt;(Dt=A.current)==null||Dt.scrollIntoView({behavior:"smooth",block:"center"})},100),setTimeout(()=>{v("")},3e3);return}ge==="self"?Fr(Dt=>Dt.includes(He)?Dt.filter(un=>un!==He):[...Dt,He]):Ni(Dt=>Dt.includes(He)?Dt.filter(un=>un!==He):[...Dt,He])},_t=()=>{cn!=null&&(ir(cn,en||[]),setTimeout(()=>{Nr(cn||[])},800)),p("desiring"),setTimeout(()=>{var ge;(ge=C.current)==null||ge.scrollIntoView({behavior:"smooth",block:"start"})},100)},sr=()=>{en!=null&&(ir(cn||[],en),setTimeout(()=>{Nr(cn||[]),Vn(en)},800),setTimeout(()=>{O.current||(O.current=!0,R(!0),j(!0))},500)),W(!1),window.scrollTo({top:0,behavior:"smooth"})},[ks,es]=N.useState(!1);N.useEffect(()=>{if(Be==="interrim")es(!0);else if(Be==="active"){const ge=setTimeout(()=>{es(!1)},1e3);return()=>clearTimeout(ge)}},[Be]);const xn=()=>{console.log("Lobby countdown animation completed")},[Cr,pi]=N.useState(!1),[qt,fr]=N.useState(!1),qo=()=>{pi(!1)};N.useEffect(()=>{(Be!=="active"||!it)&&(Lt(!1),Ne(null),Je.current=null)},[Be,it]),N.useEffect(()=>{Be==="terminated"&&(tn.current={},Kn.current=[],kc(),localStorage.removeItem("hasShownEmailBackupModal"),localStorage.removeItem("hasShownPauseInfoModal"))},[Be]);const Gr=N.useRef(null);N.useEffect(()=>{var He;!x&&!(!ne&&ln&&Be!=="checkin"&&Be!==null&&!ie)&&!(Wt!=null&&Wt.length)&&!(Dn!=null&&Dn.length)&&(s==null?void 0:s.length)>0&&((He=Gr.current)==null||He.scrollIntoView({behavior:"smooth"}),w(!0),W(!0))},[Wt,Dn,s,x,ne,ln,Be,ie]);const Ft=()=>{et||(Ce(!1),Me(""),Le(""),se([]))},En=()=>{$e(!1)},le=async ge=>{var Ye;if(ge.preventDefault(),Le(""),!ee||!ee.trim()){Le("Email is required.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ee.trim())){Le("Please enter a valid email.");return}Xe(!0);try{const at=await yt("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:ee.trim()})});if(!at.ok){const Dt=await at.json();(Ye=Dt.detail)!=null&&Ye.toLowerCase().includes("already associated")?Le("This email is already in use. Try a different one or skip."):Le(Dt.detail||"Failed to save email."),Xe(!1);return}try{await yt("/auth/send-magic-link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:ee.trim()})})}catch(Dt){console.error("Magic link send failed:",Dt)}Ce(!1),Me(""),Le("")}catch(at){console.error("Email backup error:",at),Le("Something went wrong. Try again.")}finally{Xe(!1)}};return N.useEffect(()=>{G&&de.current&&setTimeout(()=>{var ge;return(ge=de.current)==null?void 0:ge.focus()},100)},[G]),De?h.jsx(rl,{fullScreen:!0,message:be}):h.jsxs("div",{className:"lobby-container",children:[h.jsxs("div",{className:"lobby-content",children:[h.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0",marginTop:"-1.85rem"},children:h.jsx("img",{src:"/assets/reuneo_test_11.png",alt:"Reuneo Logo",style:{maxWidth:"90px",height:"auto",objectFit:"contain"}})}),(Be==="checkin"||Be==="active"&&!it||Be==="interrim")&&h.jsx("div",{className:"user-profile-container",children:h.jsxs("div",{className:"user-profile",children:[h.jsx("img",{src:ke!=null&&ke.image_data?`data:image/jpeg;base64,${ke.image_data}`:"/assets/avatar_3.png",alt:"Your Profile",className:"user-profile-picture"}),h.jsx("div",{className:"user-profile-glow"})]})}),h.jsx("div",{className:"lobby-header",style:{marginTop:"-30px"},children:h.jsx("h2",{children:s.length>0&&(Wt.length==0||Dn.length==0)?h.jsxs(h.Fragment,{children:["You're not ready, complete your interests.",h.jsx("button",{className:"missing-tags-button",onClick:()=>{var ge;return(ge=Gr.current)==null?void 0:ge.scrollIntoView({behavior:"smooth"})},children:"Complete Interests"})]}):Be==="active"&&it?h.jsxs("span",{className:"lobby-pop-burst",children:["Go find ",it.name,"!"]}):Be==="checkin"?h.jsxs(h.Fragment,{children:["Wait here ",((V=ke==null?void 0:ke.name)==null?void 0:V.slice(0,15))||Z||"Guest",".",h.jsx("br",{}),"Your host will start the experience."]}):Be==="active"&&!it?"You'll be paired up when the timer ends.":Be==="interrim"?"Get ready for the next round!":Be==="terminated"?"This session has ended. Thank you for participating!":Be===null?"Connecting to lobby...":""})},Be),Be==="active"&&it&&It&&h.jsx("div",{className:"table-number",children:h.jsxs("h3",{style:{color:"#4b73ef"},children:["at table: ",It]})}),(Tr.current||Be!=="checkin")&&h.jsxs("div",{className:`timer-sponsor-container ${Tr.current&&Be!=="checkin"?"has-timer":""}`,children:[Tr.current&&h.jsx("div",{className:"sponsor-logo",children:h.jsx("img",{src:`data:image/jpeg;base64,${Tr.current}`,alt:"Sponsor Logo",style:{width:"100px",height:"100px",objectFit:"contain"}})}),Be!=="checkin"&&h.jsx("div",{className:"time-left",style:{display:"flex",flexDirection:"column",alignItems:"center",background:"transparent",padding:"8px"},children:(Be==="active"||Be==="interrim")&&ce?h.jsx(h.Fragment,{children:h.jsx(uh,{isPlaying:Be==="active",duration:Yt||300,initialRemainingTime:ce||0,colors:["#64B5F6","#2196F3","#1976D2"],colorsTime:[Yt||300,(Yt||300)/2,0],size:100,strokeWidth:8,trailColor:"#f0f1f4",strokeLinecap:"round",onComplete:()=>(ki(),{shouldRepeat:!1}),children:({remainingTime:ge})=>{const He=typeof ge=="number"&&!isNaN(ge)?ge:0,Ye=Math.floor(He/60),at=Math.floor(He%60);return h.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[h.jsxs("span",{style:{fontSize:"1.5rem",color:"#1a1a2e",fontWeight:700,fontFamily:"-apple-system, BlinkMacSystemFont, sans-serif"},children:[Ye,":",String(at).padStart(2,"0")]}),h.jsx("span",{style:{fontSize:"0.65rem",color:"#6b7280",fontWeight:500,marginTop:"2px"},children:"time left"})]})}},`${Be}-${ce}`)}):h.jsx("span",{className:"time-left-text"})})]}),fo&&Ri&&Be==="active"&&it&&h.jsxs("div",{className:`match-banner ${Rs?"sparkling":""}`,children:[Rs&&h.jsx("div",{className:"banner-sparkles",children:[...Array(8)].map((ge,He)=>h.jsx("span",{className:"banner-sparkle",style:{left:`${10+He*12}%`,animationDelay:`${He*.15}s`}},He))}),h.jsx("span",{className:"match-tag",children:h.jsx("span",{className:"match-tag-text",children:Ri.playerTag.split(" ").map(ge=>ge.charAt(0).toUpperCase()+ge.slice(1).toLowerCase()).join(" ")})}),h.jsx("div",{className:"match-arrow"}),h.jsx("span",{className:"match-tag",children:h.jsx("span",{className:"match-tag-text",children:Ri.opponentTag.split(" ").map(ge=>ge.charAt(0).toUpperCase()+ge.slice(1).toLowerCase()).join(" ")})})]}),h.jsx("div",{style:{display:"flex",justifyContent:"center",width:"100%",margin:"0 auto",marginTop:"-2rem"},children:Be==="active"||Be==="interrim"?it?h.jsx("div",{style:{marginTop:"-1rem",width:"100%",display:"flex",justifyContent:"center"},children:h.jsx(AE,{player:it})}):h.jsx(h.Fragment,{}):Be==="terminated"?h.jsx("div",{className:"status-message",children:h.jsxs("h2",{children:["This session has ended.",h.jsx("br",{}),"Thank you for participating!"]})}):null}),(Be==="checkin"||Be==="active"&&!it)&&Ee!==null&&h.jsx("div",{className:"player-count-container",children:h.jsxs("div",{className:"player-count-widget",children:[h.jsxs("div",{className:"player-count-icon",children:[h.jsx("div",{className:"icon-pulse"}),h.jsx("img",{src:"/assets/players_display_icon2.png",alt:"Players in lobby",className:"player-count-img"})]}),h.jsxs("div",{className:"player-count-info",children:[h.jsx("span",{className:"player-count-number",children:Ee}),h.jsx("span",{className:"player-count-label",children:"joined"})]}),h.jsx("div",{className:"player-count-lobby",children:J})]})}),(Be==="checkin"||Be==="active"&&!it)&&h.jsx("div",{className:"lobby-profiles-container",children:h.jsx("div",{className:"lobby-profiles-grid",children:Ee>0?h.jsxs(h.Fragment,{children:[Array.from({length:Math.min(Ee,hc)}).map((ge,He)=>{let Ye;{const Dt=Kn.current[He];Dt&&tn.current[Dt]?Ye=`data:image/jpeg;base64,${tn.current[Dt]}`:Ye="/assets/avatar_8.png"}return h.jsxs("div",{className:`profile-icon-wrapper ${He===Math.min(Ee,hc)-1?"pop-in":""}`,children:[h.jsx("img",{src:Ye,alt:`Profile ${He+1}`,className:"profile-icon",loading:"lazy"}),h.jsx("div",{className:"profile-icon-glow"})]},`profile-${He}`)}),Ee>hc&&h.jsx("div",{className:"profile-icon-wrapper more-profiles",children:h.jsxs("div",{className:"more-profiles-bubble",children:["+",Ee-hc]})})]}):h.jsx("div",{children:"No profiles to display"})})}),(Be==="checkin"||Be==="active")&&h.jsxs("div",{className:"selected-tags-container",children:[Wt&&Wt.length>0&&h.jsxs("div",{className:"tag-category",children:[h.jsx("h4",{children:"I am:"}),h.jsx("div",{className:"tag-list",children:Wt.map(ge=>h.jsx("span",{className:"tag-item",style:{color:"#1a1a2e"},children:ge},`self-${ge}`))})]}),Dn&&Dn.length>0&&h.jsxs("div",{className:"tag-category",children:[h.jsx("h4",{children:"Looking for:"}),h.jsx("div",{className:"tag-list",children:Dn.map(ge=>h.jsx("span",{className:"tag-item",style:{color:"#1a1a2e"},children:ge},`desiring-${ge}`))})]})]}),h.jsx("button",{className:`leave-lobby-button ${Ze?"pause-button-elevated":""}`,onClick:Ir,children:"Pause"}),h.jsx(FE,{onProfileClick:()=>fr(!0),onTutorialClick:()=>pi(!0),userImage:ke!=null&&ke.image_data?`data:image/jpeg;base64,${ke.image_data}`:null}),(ye==="admin"||ye==="organizer")&&h.jsx("button",{className:"admin-view-button",onClick:()=>Re(`/admin_lobby_view?code=${J}`),children:"Manage"}),B&&h.jsx("div",{className:"tags-focus-overlay"}),Array.isArray(s)&&s.length>0&&h.jsx("form",{onSubmit:ge=>{ge.preventDefault(),u==="self"?_t():sr()},children:h.jsxs("div",{className:`tags-section ${B?"focused":""}`,ref:Gr,children:[h.jsxs("div",{className:"progress-bar-container",children:[h.jsx("div",{className:`self-progress-bar-tab ${u==="self"?"active":""} ${Wt.length>0?"complete":""}`,onClick:()=>p("self"),children:"Who are you?"}),h.jsx("div",{className:`desiring-progress-bar-tab ${u==="desiring"?"active":""} ${Dn.length>0?"complete":""}`,onClick:()=>Wt.length>0?p("desiring"):null,children:"Who do you want to meet?"})]}),h.jsxs("div",{className:`tag-group ${u==="self"?"active":"hidden"}`,children:[h.jsx("h2",{style:{fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif",color:"#1a1a2e"},children:"Who are you?"}),h.jsx(Kp,{tags:s,selectedTags:cn??Wt,onTagChange:ge=>St("self",ge),showGradients:!0,enableArrowNavigation:u==="self",displayScrollbar:!0,maxHeight:350})]}),h.jsxs("div",{className:`tag-group ${u==="desiring"?"active":"hidden"}`,ref:C,children:[h.jsx("h2",{style:{fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif",color:"#1a1a2e"},children:"Who do you want to meet?"}),h.jsx(Kp,{tags:s,selectedTags:en??Dn,onTagChange:ge=>St("desiring",ge),showGradients:!0,enableArrowNavigation:u==="desiring",displayScrollbar:!0,maxHeight:350})]}),h.jsx("button",{type:"submit",className:"tag-selection-button",ref:A,children:u==="self"?"Continue":"Save"}),E&&h.jsx("div",{style:{color:"#144dff",textAlign:"center",marginTop:"1rem",fontSize:"0.9rem",fontWeight:"600"},children:E})]})})]}),ne||!ln||Be=="checkin"||Be==null||ie?null:h.jsx(Pt,{}),ks&&!(s.length>0&&Dn.length===0)&&h.jsx(PE,{onComplete:xn}),Cr&&h.jsx(ME,{onComplete:qo,lobbyCode:J}),h.jsx(VE,{isOpen:qt,onClose:()=>fr(!1)}),h.jsx(LE,{isVisible:uo,onAnimationEnd:()=>{Ji(!1),Zt.current=!1,Kt(!0),setTimeout(()=>Kt(!1),3e3)}}),h.jsx(jE,{isVisible:I,onAnimationEnd:()=>{R(!1),O.current=!1}}),h.jsx(jr,{children:G&&h.jsx(Nt.div,{className:"email-backup-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:Ft,children:h.jsxs(Nt.div,{className:"email-backup-modal-content",initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},transition:{type:"spring",stiffness:400,damping:25},onClick:ge=>ge.stopPropagation(),children:[ae.length>0&&h.jsx("div",{className:"previous-matches-row",children:ae.slice(0,2).map((ge,He)=>h.jsx("img",{src:ge.small_image_data?`data:image/jpeg;base64,${ge.small_image_data}`:"/assets/avatar_3.png",alt:ge.name,className:"match-avatar"},He))}),h.jsx("h2",{className:"email-backup-modal-header",children:"Save Your Match History"}),h.jsx("p",{className:"email-backup-modal-subtext",children:"We'll send you a sign-in link in case you get logged out."}),h.jsxs("form",{onSubmit:le,className:"email-backup-form",children:[h.jsx("input",{ref:de,type:"email",value:ee,onChange:ge=>Me(ge.target.value),placeholder:"you@example.com",className:"email-backup-input",disabled:et}),Se&&h.jsx("div",{className:"email-backup-error",children:Se}),h.jsx("button",{type:"submit",className:"email-backup-submit-button",disabled:et,children:et?"Sending...":"Save Matches"})]}),h.jsx("button",{type:"button",className:"email-backup-skip-button",onClick:Ft,disabled:et,children:"Don't back up matches"})]})})}),h.jsx(jr,{children:Ze&&h.jsx(Nt.div,{className:"pause-info-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:En,children:h.jsxs(Nt.div,{className:"pause-info-modal-content",initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},transition:{type:"spring",stiffness:400,damping:25},onClick:ge=>ge.stopPropagation(),children:[h.jsx("h2",{className:"pause-info-modal-header",children:"Need a Break?"}),h.jsxs("p",{className:"pause-info-modal-body",children:["Tap ",h.jsx("strong",{children:'"Pause"'})," anytime to stop being paired. This way no one's left looking for you"]}),h.jsx("p",{className:"pause-info-modal-subtext",children:"Your matches are saved and you can rejoin whenever you're ready"}),h.jsx("button",{type:"button",className:"pause-info-modal-button",onClick:En,children:"Got it"})]})})})]})};let GE={data:""},XE=r=>typeof window=="object"?((r?r.querySelector("#_goober"):window._goober)||Object.assign((r||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:r||GE,YE=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ZE=/\/\*[^]*?\*\/|  +/g,qp=/\n+/g,Ss=(r,s)=>{let a="",u="",p="";for(let x in r){let w=r[x];x[0]=="@"?x[1]=="i"?a=x+" "+w+";":u+=x[1]=="f"?Ss(w,x):x+"{"+Ss(w,x[1]=="k"?"":s)+"}":typeof w=="object"?u+=Ss(w,s?s.replace(/([^,])+/g,E=>x.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,v=>/&/.test(v)?v.replace(/&/g,E):E?E+" "+v:v)):x):w!=null&&(x=/^--/.test(x)?x:x.replace(/[A-Z]/g,"-$&").toLowerCase(),p+=Ss.p?Ss.p(x,w):x+":"+w+";")}return a+(s&&p?s+"{"+p+"}":p)+u},Yi={},px=r=>{if(typeof r=="object"){let s="";for(let a in r)s+=a+px(r[a]);return s}return r},$E=(r,s,a,u,p)=>{let x=px(r),w=Yi[x]||(Yi[x]=(v=>{let C=0,A=11;for(;C<v.length;)A=101*A+v.charCodeAt(C++)>>>0;return"go"+A})(x));if(!Yi[w]){let v=x!==r?r:(C=>{let A,I,R=[{}];for(;A=YE.exec(C.replace(ZE,""));)A[4]?R.shift():A[3]?(I=A[3].replace(qp," ").trim(),R.unshift(R[0][I]=R[0][I]||{})):R[0][A[1]]=A[2].replace(qp," ").trim();return R[0]})(r);Yi[w]=Ss(p?{["@keyframes "+w]:v}:v,a?"":"."+w)}let E=a&&Yi.g?Yi.g:null;return a&&(Yi.g=Yi[w]),((v,C,A,I)=>{I?C.data=C.data.replace(I,v):C.data.indexOf(v)===-1&&(C.data=A?v+C.data:C.data+v)})(Yi[w],s,u,E),w},KE=(r,s,a)=>r.reduce((u,p,x)=>{let w=s[x];if(w&&w.call){let E=w(a),v=E&&E.props&&E.props.className||/^go/.test(E)&&E;w=v?"."+v:E&&typeof E=="object"?E.props?"":Ss(E,""):E===!1?"":E}return u+p+(w??"")},"");function Yc(r){let s=this||{},a=r.call?r(s.p):r;return $E(a.unshift?a.raw?KE(a,[].slice.call(arguments,1),s.p):a.reduce((u,p)=>Object.assign(u,p&&p.call?p(s.p):p),{}):a,XE(s.target),s.g,s.o,s.k)}let mx,gf,xf;Yc.bind({g:1});let qi=Yc.bind({k:1});function qE(r,s,a,u){Ss.p=s,mx=r,gf=a,xf=u}function _s(r,s){let a=this||{};return function(){let u=arguments;function p(x,w){let E=Object.assign({},x),v=E.className||p.className;a.p=Object.assign({theme:gf&&gf()},E),a.o=/ *go\d+/.test(v),E.className=Yc.apply(a,u)+(v?" "+v:"");let C=r;return r[0]&&(C=E.as||r,delete E.as),xf&&C[0]&&xf(E),mx(C,E)}return p}}var QE=r=>typeof r=="function",Mc=(r,s)=>QE(r)?r(s):r,JE=(()=>{let r=0;return()=>(++r).toString()})(),gx=(()=>{let r;return()=>{if(r===void 0&&typeof window<"u"){let s=matchMedia("(prefers-reduced-motion: reduce)");r=!s||s.matches}return r}})(),eS=20,xx=(r,s)=>{switch(s.type){case 0:return{...r,toasts:[s.toast,...r.toasts].slice(0,eS)};case 1:return{...r,toasts:r.toasts.map(x=>x.id===s.toast.id?{...x,...s.toast}:x)};case 2:let{toast:a}=s;return xx(r,{type:r.toasts.find(x=>x.id===a.id)?1:0,toast:a});case 3:let{toastId:u}=s;return{...r,toasts:r.toasts.map(x=>x.id===u||u===void 0?{...x,dismissed:!0,visible:!1}:x)};case 4:return s.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(x=>x.id!==s.toastId)};case 5:return{...r,pausedAt:s.time};case 6:let p=s.time-(r.pausedAt||0);return{...r,pausedAt:void 0,toasts:r.toasts.map(x=>({...x,pauseDuration:x.pauseDuration+p}))}}},bc=[],ro={toasts:[],pausedAt:void 0},ao=r=>{ro=xx(ro,r),bc.forEach(s=>{s(ro)})},tS={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},nS=(r={})=>{let[s,a]=N.useState(ro),u=N.useRef(ro);N.useEffect(()=>(u.current!==ro&&a(ro),bc.push(a),()=>{let x=bc.indexOf(a);x>-1&&bc.splice(x,1)}),[]);let p=s.toasts.map(x=>{var w,E,v;return{...r,...r[x.type],...x,removeDelay:x.removeDelay||((w=r[x.type])==null?void 0:w.removeDelay)||(r==null?void 0:r.removeDelay),duration:x.duration||((E=r[x.type])==null?void 0:E.duration)||(r==null?void 0:r.duration)||tS[x.type],style:{...r.style,...(v=r[x.type])==null?void 0:v.style,...x.style}}});return{...s,toasts:p}},rS=(r,s="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:s,ariaProps:{role:"status","aria-live":"polite"},message:r,pauseDuration:0,...a,id:(a==null?void 0:a.id)||JE()}),il=r=>(s,a)=>{let u=rS(s,r,a);return ao({type:2,toast:u}),u.id},Sr=(r,s)=>il("blank")(r,s);Sr.error=il("error");Sr.success=il("success");Sr.loading=il("loading");Sr.custom=il("custom");Sr.dismiss=r=>{ao({type:3,toastId:r})};Sr.remove=r=>ao({type:4,toastId:r});Sr.promise=(r,s,a)=>{let u=Sr.loading(s.loading,{...a,...a==null?void 0:a.loading});return typeof r=="function"&&(r=r()),r.then(p=>{let x=s.success?Mc(s.success,p):void 0;return x?Sr.success(x,{id:u,...a,...a==null?void 0:a.success}):Sr.dismiss(u),p}).catch(p=>{let x=s.error?Mc(s.error,p):void 0;x?Sr.error(x,{id:u,...a,...a==null?void 0:a.error}):Sr.dismiss(u)}),r};var iS=(r,s)=>{ao({type:1,toast:{id:r,height:s}})},sS=()=>{ao({type:5,time:Date.now()})},za=new Map,oS=1e3,aS=(r,s=oS)=>{if(za.has(r))return;let a=setTimeout(()=>{za.delete(r),ao({type:4,toastId:r})},s);za.set(r,a)},lS=r=>{let{toasts:s,pausedAt:a}=nS(r);N.useEffect(()=>{if(a)return;let x=Date.now(),w=s.map(E=>{if(E.duration===1/0)return;let v=(E.duration||0)+E.pauseDuration-(x-E.createdAt);if(v<0){E.visible&&Sr.dismiss(E.id);return}return setTimeout(()=>Sr.dismiss(E.id),v)});return()=>{w.forEach(E=>E&&clearTimeout(E))}},[s,a]);let u=N.useCallback(()=>{a&&ao({type:6,time:Date.now()})},[a]),p=N.useCallback((x,w)=>{let{reverseOrder:E=!1,gutter:v=8,defaultPosition:C}=w||{},A=s.filter(O=>(O.position||C)===(x.position||C)&&O.height),I=A.findIndex(O=>O.id===x.id),R=A.filter((O,L)=>L<I&&O.visible).length;return A.filter(O=>O.visible).slice(...E?[R+1]:[0,R]).reduce((O,L)=>O+(L.height||0)+v,0)},[s]);return N.useEffect(()=>{s.forEach(x=>{if(x.dismissed)aS(x.id,x.removeDelay);else{let w=za.get(x.id);w&&(clearTimeout(w),za.delete(x.id))}})},[s]),{toasts:s,handlers:{updateHeight:iS,startPause:sS,endPause:u,calculateOffset:p}}},cS=qi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,uS=qi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,dS=qi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,fS=_s("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${cS} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${uS} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${r=>r.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${dS} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,hS=qi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,pS=_s("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${r=>r.secondary||"#e0e0e0"};
  border-right-color: ${r=>r.primary||"#616161"};
  animation: ${hS} 1s linear infinite;
`,mS=qi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,gS=qi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,xS=_s("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${mS} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${gS} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${r=>r.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,yS=_s("div")`
  position: absolute;
`,wS=_s("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,vS=qi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,CS=_s("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${vS} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,bS=({toast:r})=>{let{icon:s,type:a,iconTheme:u}=r;return s!==void 0?typeof s=="string"?N.createElement(CS,null,s):s:a==="blank"?null:N.createElement(wS,null,N.createElement(pS,{...u}),a!=="loading"&&N.createElement(yS,null,a==="error"?N.createElement(fS,{...u}):N.createElement(xS,{...u})))},ES=r=>`
0% {transform: translate3d(0,${r*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,SS=r=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${r*-150}%,-1px) scale(.6); opacity:0;}
`,AS="0%{opacity:0;} 100%{opacity:1;}",NS="0%{opacity:1;} 100%{opacity:0;}",TS=_s("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,IS=_s("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,_S=(r,s)=>{let a=r.includes("top")?1:-1,[u,p]=gx()?[AS,NS]:[ES(a),SS(a)];return{animation:s?`${qi(u)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${qi(p)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},RS=N.memo(({toast:r,position:s,style:a,children:u})=>{let p=r.height?_S(r.position||s||"top-center",r.visible):{opacity:0},x=N.createElement(bS,{toast:r}),w=N.createElement(IS,{...r.ariaProps},Mc(r.message,r));return N.createElement(TS,{className:r.className,style:{...p,...a,...r.style}},typeof u=="function"?u({icon:x,message:w}):N.createElement(N.Fragment,null,x,w))});qE(N.createElement);var kS=({id:r,className:s,style:a,onHeightUpdate:u,children:p})=>{let x=N.useCallback(w=>{if(w){let E=()=>{let v=w.getBoundingClientRect().height;u(r,v)};E(),new MutationObserver(E).observe(w,{subtree:!0,childList:!0,characterData:!0})}},[r,u]);return N.createElement("div",{ref:x,className:s,style:a},p)},PS=(r,s)=>{let a=r.includes("top"),u=a?{top:0}:{bottom:0},p=r.includes("center")?{justifyContent:"center"}:r.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:gx()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${s*(a?1:-1)}px)`,...u,...p}},MS=Yc`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,pc=16,Ua=({reverseOrder:r,position:s="top-center",toastOptions:a,gutter:u,children:p,containerStyle:x,containerClassName:w})=>{let{toasts:E,handlers:v}=lS(a);return N.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:pc,left:pc,right:pc,bottom:pc,pointerEvents:"none",...x},className:w,onMouseEnter:v.startPause,onMouseLeave:v.endPause},E.map(C=>{let A=C.position||s,I=v.calculateOffset(C,{reverseOrder:r,gutter:u,defaultPosition:s}),R=PS(A,I);return N.createElement(kS,{id:C.id,key:C.id,onHeightUpdate:v.updateHeight,className:C.visible?MS:"",style:R},C.type==="custom"?Mc(C.message,C):p?p(C):N.createElement(RS,{toast:C,position:A}))}))},In=Sr;const Fd=({direction:r="down",show:s=!0,className:a="",style:u={}})=>{if(!s)return null;const p=r==="down"?"rotate(180 16 16)":"";return h.jsxs("div",{className:`arrow-hint-container ${r} ${a}`,style:u,children:[h.jsx("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"arrow-hint-svg",children:h.jsxs("g",{transform:p,children:[h.jsx("path",{d:"M16 6v16M16 22l-7-7M16 22l7-7",stroke:"url(#arrow-gradient)",strokeWidth:"3.2",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#arrow-glow)"}),h.jsxs("defs",{children:[h.jsxs("linearGradient",{id:"arrow-gradient",x1:"16",y1:"6",x2:"16",y2:"22",gradientUnits:"userSpaceOnUse",children:[h.jsx("stop",{stopColor:"#7f5fff"}),h.jsx("stop",{offset:"0.5",stopColor:"#2e8bff"}),h.jsx("stop",{offset:"1",stopColor:"#00e0ff"})]}),h.jsx("filter",{id:"arrow-glow",x:"-10",y:"-10",width:"52",height:"52",filterUnits:"userSpaceOnUse",children:h.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"2.5",floodColor:"#7f5fff",floodOpacity:"0.5"})})]})]})}),h.jsx("div",{className:"arrow-hint-text",children:"Tap Here"})]})},OS=({isOpen:r,onClose:s,onConfirm:a,userName:u})=>r?h.jsx("div",{className:"kick-modal",children:h.jsxs("div",{className:"kick-modal-content",children:[h.jsx("h2",{className:"kick-modal-title",children:"Kick User"}),h.jsxs("p",{className:"kick-modal-message",children:["Are you sure you want to kick ",u," from the lobby?"]}),h.jsxs("div",{className:"kick-modal-actions",children:[h.jsx("button",{onClick:a,className:"admin-button admin-button-danger",children:"Yes, Kick User"}),h.jsx("button",{onClick:s,className:"admin-button admin-button-primary",children:"Cancel"})]})]})}):null,DS=({isOpen:r,onClose:s,onConfirm:a})=>r?h.jsx("div",{className:"join-modal",children:h.jsxs("div",{className:"join-modal-content",children:[h.jsx("h2",{className:"join-modal-title",children:"Join Lobby"}),h.jsx("p",{className:"join-modal-message",children:"Are you sure you want to join? You will be paired up with your attendees."}),h.jsxs("div",{className:"join-modal-actions",children:[h.jsx("button",{onClick:a,className:"admin-button admin-button-join",children:"Yes, Join Lobby"}),h.jsx("button",{onClick:s,className:"admin-button admin-button-primary",children:"Cancel"})]})]})}):null,yx=(r,s)=>new Promise((a,u)=>{const x=new XMLSerializer().serializeToString(r),w=800,E=1e3,v=document.createElement("canvas");v.width=w,v.height=E;const C=v.getContext("2d");C.fillStyle="#ffffff",C.fillRect(0,0,w,E);const A=new window.Image;A.crossOrigin="anonymous",A.onload=()=>{const I=new window.Image;I.onload=()=>{const j=A.width/A.height*180,B=36,W=28,z=550,F=22,Y=182+F,K=B+F*1.2,ne=W+32,q=Y+K,ie=ne,J=E-q-ie,we=q+(J-z)/2-35,Re=(w-z)/2;let Ae=2;const Ee=(w-j)/2;C.drawImage(A,Ee,Ae,j,180),Ae+=180+F,C.fillStyle="#000000",C.font=`600 ${B}px Helvetica, Arial, sans-serif`,C.textAlign="center",C.textBaseline="top",C.fillText("Scan to join the ice-breaking session!",w/2,Ae),Ae+=B+F*1.2,C.drawImage(I,Re,we,z,z);const Z=E-32-W;C.font=`${W}px Helvetica, Arial, sans-serif`,C.fillStyle="#000000",C.textBaseline="top";const ke=`code (optional): ${s}`;C.fillText(ke,w/2,Z),v.toBlob(ve=>{ve?a(ve):u(new Error("Failed to create blob"))},"image/png")},I.onerror=()=>u(new Error("Failed to load QR code image")),I.src="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(x)))},A.onerror=()=>u(new Error("Failed to load logo image")),A.src="/assets/reuneo_test_9.png"}),LS=({lobbyState:r,playerCount:s,onStart:a,onEnd:u,lobbyCode:p,currentRound:x})=>{const w=r==="checkin",E=s>=2&&r==="checkin",v=r==="active",C=r==="active",A=r==="terminated",[I,R]=N.useState(null),[O,L]=N.useState({qr:!1}),[j,B]=N.useState(!1),W=N.useRef(!1),z=()=>{R("start")},F=()=>{R("end")},Y=()=>{B(!0),R("checkin")},K=()=>{I==="start"?(a(),In.success("Rounds started!",{position:"top-center"})):I==="end"&&u(),R(null)},ne=()=>R(null);N.useEffect(()=>{W.current||r==="checkin"&&s===0&&(W.current=!0,B(!0),R("checkin"))},[r,s]);const q=(Ee,Te)=>Ee?"progress-arrow active-shimmer":Te?"progress-arrow available-shimmer":"progress-arrow inactive",ie=w&&!j&&s<6,J=r==="checkin"&&s>=6,we=r==="active"&&x+1>=12;function Re(Ee,Te={}){const{silent:Z=!1}=Te,ke=URL.createObjectURL(Ee),ve=document.createElement("a");ve.href=ke,ve.download=`reuneo-lobby-${p}.png`,document.body.appendChild(ve),ve.click(),document.body.removeChild(ve),URL.revokeObjectURL(ke),Z||(L(ye=>({...ye,qr:!0})),setTimeout(()=>L(ye=>({...ye,qr:!1})),800))}const Ae=()=>{const Ee=document.getElementById("modal-qr-svg");Ee&&yx(Ee,p).then(Te=>{Re(Te,{silent:!0}),navigator.clipboard&&navigator.clipboard.write?navigator.clipboard.write([new window.ClipboardItem({"image/png":Te})]).then(()=>{L(Z=>({...Z,qr:!0})),setTimeout(()=>L(Z=>({...Z,qr:!1})),800)}).catch(()=>{L(Z=>({...Z,qr:!0})),setTimeout(()=>L(Z=>({...Z,qr:!1})),800)}):(L(Z=>({...Z,qr:!0})),setTimeout(()=>L(Z=>({...Z,qr:!1})),800))}).catch(Te=>{console.error("Error generating QR code image:",Te),alert("Failed to generate QR code image.")})};return h.jsxs("div",{className:"lobby-progress-bar",style:{marginTop:"-1rem",height:"40px"},children:[h.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[h.jsx("div",{className:q(w,!1),tabIndex:0,title:"Check-in phase",onClick:Y,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"Start Checkin"}),h.jsx(Fd,{direction:"down",show:ie})]}),h.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[h.jsx("div",{className:q(v,E&&!v),tabIndex:0,title:E?"Start rounds":"At least 2 players required",onClick:z,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"Start Rounds"}),h.jsx(Fd,{direction:"down",show:J})]}),h.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[h.jsx("div",{className:q(A,C&&!A),tabIndex:0,title:C?"End rounds":"Cannot end yet",onClick:F,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"End Rounds"}),h.jsx(Fd,{direction:"down",show:we})]}),I&&h.jsx("div",{className:"progress-modal-overlay",children:h.jsx("div",{className:"progress-modal",children:I==="checkin"?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"progress-modal-title",children:"Check-in: Print or Display this QR code to your attendees"}),h.jsx("div",{className:"progress-modal-message",children:"They scan to join. Once you have 6-10 people ready, click 'Start Rounds' - New arrivals will get paired up in the next rounds."}),h.jsxs("div",{className:"progress-modal-qr",onClick:Ae,style:{cursor:"pointer",position:"relative"},children:[h.jsx(ch,{value:`${window.location.origin}/lobby?code=${p}`,size:200,level:"H",includeMargin:!1,bgColor:"#ffffff",fgColor:"#000000",id:"modal-qr-svg"}),h.jsx("span",{className:"copy-icon modal-copy-icon","aria-label":"Copy",style:{position:"absolute",right:8,bottom:8,background:"#fff",borderRadius:"50%",padding:"2px"},children:h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[h.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),h.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})}),O.qr&&h.jsx("span",{className:"modal-copied-feedback",style:{position:"absolute",left:"50%",bottom:"-1.5rem",transform:"translateX(-50%)",color:"#28a745",fontWeight:600,fontSize:"0.95rem"},children:"Copied!"})]}),h.jsxs("div",{style:{textAlign:"center",marginTop:"1rem",marginBottom:"0.5rem",fontSize:"1rem",color:"#3b3b3b",fontFamily:"Helvetica, Arial, sans-serif"},children:["code (optional): ",p]}),h.jsx("div",{className:"progress-modal-actions",children:h.jsx("button",{className:"progress-modal-btn confirm",onClick:ne,children:"Got it"})})]}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"progress-modal-title",children:I==="start"?"Are you sure you want to start rounds? - Dont worry new people can join in the next rounds.":"Are you sure you want to end the rounds?"}),h.jsx("div",{className:"progress-modal-actions",children:I==="start"?h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"progress-modal-btn cancel",onClick:ne,children:"Not Yet"}),h.jsx("button",{className:"progress-modal-btn confirm",onClick:K,children:"Start"})]}):h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"progress-modal-btn cancel",onClick:ne,children:"Keep Going"}),h.jsx("button",{className:"progress-modal-btn confirm danger",onClick:K,children:"End"})]})})]})})})]})},jS=({players:r})=>{const s=[...r.pairedPlayers?r.pairedPlayers.flat():[],...r.lobbyData?r.lobbyData:[]],a=10,u=s.slice(0,a),p=s.length-a,x=s.length;return h.jsxs("div",{className:"overlapping-profile-list-wrapper",style:{marginTop:"3rem"},children:[h.jsxs("div",{className:"overlapping-profile-list",children:[u.map((w,E)=>h.jsx("img",{src:w.pfp_data||"/assets/player_icon_trans.png",alt:w.name||"Player",className:"overlapping-profile-img",style:{zIndex:E+1}},w.username||w.name||E)),p>0&&h.jsxs("span",{className:"overlapping-profile-overflow",children:["+ ",p]})]}),h.jsxs("div",{className:"overlapping-profile-list-label",style:{marginTop:"0.5rem",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.1)"},children:["People joined: ",x]})]})},BS=()=>{const{user:r,userProfile:s,checkAuth:a,permissions:u}=N.useContext(Fn),p=Rn(),x=Br(),w=!1,E=Math.floor(9*60),{loadSound:v,seekTo:C,cancelSound:A,checkSound:I,soundEnabled:R,setSoundEnabled:O,isPlaying:L}=Nf(),[j,B]=N.useState(!0),[W,z]=N.useState(!document.hidden),F=N.useRef(null),K=new URLSearchParams(x.search).get("code"),[ne,q]=N.useState(K||"test");N.useEffect(()=>{K||(console.log("No lobby code found in URL, using default 'test' value"),(async()=>{try{const It=await yt("/view_my_active_lobbies");if(It.ok){const Ue=await It.json();if(console.log("Active lobbies response:",Ue),Ue&&Ue.lobbies&&Ue.lobbies.length>0){const ct=Ue.lobbies[0];q(ct),window.history.replaceState({},"",`/admin_lobby_view?code=${ct}`)}}}catch(It){console.error("Error fetching active lobby:",It)}})())},[K]);const[ie,J]=N.useState(!1),[we,Re]=N.useState(null),[Ae,Ee]=N.useState(!1),[Te,Z]=N.useState(null),[ke,ve]=N.useState(null),[ye,De]=N.useState(null),[be,X]=N.useState(null),[G,Ce]=N.useState(null),[ae,se]=N.useState({}),[ee,Me]=N.useState([]),[Se,Le]=N.useState(0),et=((ke==null?void 0:ke.length)||0)+((Te==null?void 0:Te.length)*2||0),[Xe,de]=N.useState(!1);N.useEffect(()=>{I()?O(!0):O(!1)},[]),N.useEffect(()=>{const Ge=()=>{const It=!document.hidden;It&&!W&&console.log("Page became visible - next poll will fetch latest data"),z(It)};return document.addEventListener("visibilitychange",Ge),()=>{document.removeEventListener("visibilitychange",Ge)}},[W]),N.useEffect(()=>{(be==="terminated"||be==="inactive")&&A()},[be]),N.useEffect(()=>{if(a(),u!=="admin"&&u!=="organizer"){p("/");return}const Ge=async Ue=>{if(ae[Ue])return ae[Ue];try{const ct=await yt(`/pfp_small_icon?username=${encodeURIComponent(Ue)}`);if(ct.ok){let Je=await ct.text();Je.startsWith('"')&&Je.endsWith('"')&&(Je=Je.slice(1,-1));const wt=Je.startsWith("data:image")?Je:`data:image/jpeg;base64,${Je}`;return se(Bt=>({...Bt,[Ue]:wt})),wt}return null}catch(ct){return console.error(`Error fetching profile picture for ${Ue}:`,ct),null}},It=setInterval(async()=>{try{const Ue=!document.hidden,ct=await yt(`/admin_lobby_data?is_visible=${Ue}`,{headers:{is_visible_t_f:Ue?"t":"f",lobby_code:ne}});if(ct.ok){const Je=await ct.json();console.log("Admin lobby data:",ne,Je),(Je.lobby_state==="inactive"||Je.status==="inactive")&&A();const wt=typeof Je.round_time_left=="number"&&!isNaN(Je.round_time_left)?Je.round_time_left:0;if(F.current=wt,F.current!=null&&Je.lobby_state==="active"&&F.current!=0&&(C(E-F.current),console.log("seeking to",E-F.current)),Je.lobby_state==="active"&&Le(Bt=>Je.current_round>Bt?Je.current_round:Bt),Je.lobby_state==="terminated"&&(Le(0),A()),Je&&Je.unpaired_players){const Bt=await Promise.all(Je.unpaired_players.map(async Be=>{const Ie=await Ge(Be.username);return{...Be,pfp_data:Ie}})),Xt=await Promise.all((Je.pairs_data||[]).map(async Be=>{const Ie=await Ge(Be[0].username),ce=await Ge(Be[1].username);return[{...Be[0],pfp_data:Ie},{...Be[1],pfp_data:ce}]}));ve(Bt),Z(Xt),De(Je.round_time_left),X(Je.lobby_state),Ce(Je.lobby_duration||300),Me(Je.custom_tags||[])}else console.error("Invalid lobby data structure:",Je),ve([]),Z([])}else console.error("Failed to fetch admin lobby data:",ct.status)}catch(Ue){console.error("Error fetching admin lobby data:",Ue)}},1e3);return()=>clearInterval(It)},[ae]);const xe=Ge=>{Re(Ge),J(!0)},Ze=()=>{J(!1),Re(null)},$e=()=>{we&&fetch(window.server_url+"/kick_user",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"},body:JSON.stringify({username:we.username,lobby_code:ne})}).then(Ge=>{Ge.ok?console.log(`User ${we.name} kicked successfully`):console.error(`Failed to kick user ${we.name}`)}).catch(Ge=>{console.error("Error kicking user:",Ge)}).finally(()=>{Ze()})},Tt=()=>{Ee(!0)},it=()=>{Ee(!1)},qe=()=>{p(`/lobby?code=${ne}`),it()};function tt(Ge,It={}){const{silent:Ue=!1}=It,ct=URL.createObjectURL(Ge),Je=document.createElement("a");Je.href=ct,Je.download=`reuneo-lobby-${ne}.png`,document.body.appendChild(Je),Je.click(),document.body.removeChild(Je),URL.revokeObjectURL(ct),Ue||In.success("QR code downloaded!")}async function jt(){const Ge=document.getElementById("admin-qr-svg");Ge&&yx(Ge,ne).then(It=>{tt(It,{silent:!0}),navigator.clipboard&&navigator.clipboard.write?navigator.clipboard.write([new window.ClipboardItem({"image/png":It})]).then(()=>{In.success("Downloaded and copied to clipboard!")}).catch(()=>{In.success("QR code downloaded!")}):In.success("QR code downloaded!")}).catch(It=>{console.error("Error generating QR code image:",It),In.error("Failed to generate QR code image.")})}const ze=()=>h.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.125)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},children:h.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",position:"relative",minWidth:"300px"},children:[h.jsx("button",{onClick:()=>B(!1),style:{color:"#144fff",position:"absolute",right:"10px",top:"10px",border:"none",background:"none",fontSize:"16px",cursor:"pointer",fontWeight:"bold",padding:"4px 8px"},children:"X"}),h.jsx("h2",{style:{marginTop:"5px"},children:"The Sound is Important"}),h.jsx("h3",{style:{marginTop:"5px"},children:"Raise your volume also"}),h.jsx("p",{style:{color:"#144dff"},children:"You'll need this for the best experience."}),h.jsx("button",{onClick:()=>{v(),B(!1)},style:{padding:"10px 20px",marginTop:"20px",backgroundColor:"#144dff",color:"#ffffff",border:"none",borderRadius:"14px",fontWeight:"bold",cursor:"pointer"},children:"Enable Sound"})]})}),gn=async()=>{await yt("/start_rounds",{method:"GET",headers:{lobby_code:ne}})},rr=async()=>{A(),(await yt("/terminate_lobby",{method:"GET",headers:{lobby_code:ne}})).ok&&p("/")};return h.jsxs(h.Fragment,{children:[h.jsx(Ua,{position:"top-center"}),h.jsxs("div",{className:"admin-lobby-container",children:[w,h.jsx("div",{className:"admin-view-logo",style:{cursor:"pointer"},children:h.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Reuneo Logo",style:{maxWidth:"85px",height:"auto",objectFit:"contain",transition:"transform 0.3s ease"},onClick:()=>p("/")})}),h.jsx(LS,{lobbyState:be,playerCount:et,onStart:gn,onEnd:rr,lobbyCode:ne,currentRound:Se}),h.jsx(jS,{players:{pairedPlayers:Te,lobbyData:ke}}),h.jsxs("div",{className:"admin-lobby-dropdown-toggle",onClick:()=>de(Ge=>!Ge),style:{cursor:"pointer",background:"var(--primary-color)",color:"#f5f7ff",fontWeight:700,textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",fontSize:".75rem",borderRadius:Xe?"14px 14px 0 0":"14px",padding:"0.5rem 1rem",margin:"0 auto",maxWidth:420,boxShadow:"0 2px 8px rgba(20,77,255,0.08)",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s",letterSpacing:"0.5px"},children:[Xe?"Hide Controls":"More Controls",h.jsx("span",{style:{marginLeft:12,fontSize:"1.2em",transition:"transform 0.3s",display:"inline-block",transform:Xe?"rotate(180deg)":"rotate(0deg)"},children:""})]}),h.jsxs("div",{className:"admin-lobby-body",style:{maxHeight:Xe?1e3:0,overflow:"hidden",transition:"max-height 0.5s cubic-bezier(0.4,0,0.2,1)",opacity:Xe?1:0,pointerEvents:Xe?"auto":"none",marginBottom:Xe?"2rem":0},children:[h.jsxs("div",{className:"admin-lobby-qr",onClick:jt,style:{cursor:"pointer"},children:[h.jsxs("span",{className:"qr-label",style:{display:"flex",alignItems:"center",gap:"0.4rem",marginBottom:"0.5rem"},children:["People scan to join",h.jsx("span",{className:"copy-icon","aria-label":"Copy",children:h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[h.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),h.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})})]}),h.jsx("div",{style:{position:"relative",display:"inline-block"},children:h.jsx(ch,{value:`${window.location.origin}/lobby?code=${ne}`,size:140,level:"H",includeMargin:!1,bgColor:"#ffffff",fgColor:"#000000",id:"admin-qr-svg"})}),h.jsxs("div",{className:"lobby-code-display",onClick:()=>{navigator.clipboard.writeText(ne);const Ge=document.querySelector(".lobby-code-display");Ge.classList.add("copied"),setTimeout(()=>Ge.classList.remove("copied"),250)},children:[h.jsx("span",{className:"lobby-code-label",children:"lobby code:"}),h.jsx("span",{className:"lobby-code-value",children:ne}),h.jsx("span",{className:"copy-icon","aria-label":"Copy",children:h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[h.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),h.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})})]})]}),h.jsxs("div",{className:"admin-lobby-event-settings",children:[h.jsxs("div",{className:"admin-profile",children:[h.jsx("img",{src:s!=null&&s.image_data?`data:image/jpeg;base64,${s.image_data}`:"/assets/player_icon_trans.png",alt:"Your Profile",className:"admin-profile-picture"}),h.jsx("span",{className:"admin-profile-name",children:s!=null&&s.name?s.name.slice(0,20):r==null?void 0:r.slice(0,20)})]}),h.jsx("button",{onClick:Tt,className:"page-control-button page-control-join",style:{marginTop:".5rem"},children:"Join Rounds"}),h.jsxs("div",{className:"setting-item",style:{padding:"1rem"},children:[h.jsxs("span",{className:"setting-label",children:["Round Duration: ",h.jsxs("span",{className:"setting-value",children:[Math.floor(G/60)," min"]})]}),h.jsx("span",{className:"setting-label",style:{},children:"Tags:"}),ee&&ee.length>0&&h.jsx("div",{className:"setting-item",children:h.jsxs("div",{className:"tags-container",children:[ee.slice(0,3).map((Ge,It)=>h.jsx("span",{className:"tag-pill",children:Ge},It)),ee.length>3&&h.jsxs("span",{className:"tag-pill more-tags",children:["+",ee.length-3," more"]})]})})]})]}),h.jsx("div",{className:"admin-lobby-actions"})]}),(be==="active"||be==="interrim")&&ye&&h.jsx("div",{className:"admin-lobby-timer-container",children:h.jsxs("div",{className:"admin-lobby-timer-glass",children:[h.jsx(uh,{isPlaying:be==="active",duration:G,initialRemainingTime:ye,colors:["#144dff"],size:90,strokeWidth:12,trailColor:"url(#trailGradient)",onComplete:()=>({shouldRepeat:!1}),strokeLinecap:"round",children:({remainingTime:Ge})=>{const It=Math.floor(Ge/60),Ue=Math.floor(Ge%60);return h.jsxs("span",{className:`timer-text ${Ge<=10?"timer-text-fadescale":""}`,children:[It,":",String(Ue).padStart(2,"0")]})}},`${be}-${Math.floor(ye)}`),h.jsx("span",{className:"timer-subtext",children:"round time left"}),h.jsx("svg",{width:"0",height:"0",children:h.jsx("defs",{children:h.jsxs("linearGradient",{id:"trailGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[h.jsx("stop",{offset:"0%",stopColor:"#e0e7ff"}),h.jsx("stop",{offset:"100%",stopColor:"#f5f7ff"})]})})})]})}),be!=="checkin"&&h.jsxs("div",{className:"admin-lobby-stats",children:[h.jsxs("div",{className:"stat-card",children:[h.jsx("div",{className:"stat-title",children:"Total Players"}),h.jsx("div",{className:"stat-value",children:((ke==null?void 0:ke.length)||0)+((Te==null?void 0:Te.length)*2||0)})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("div",{className:"stat-title",children:"Paired Players"}),h.jsx("div",{className:"stat-value",children:(Te==null?void 0:Te.length)*2||0})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("div",{className:"stat-title",children:"Unpaired Players"}),h.jsx("div",{className:"stat-value",children:(ke==null?void 0:ke.length)||0})]})]}),Te&&be!=="checkin"&&h.jsx("div",{className:"admin-lobby-players",children:h.jsxs("div",{className:"player-section",children:[h.jsxs("div",{className:"section-header",children:["Paired Players: ",h.jsx("span",{className:"stat-value",style:{fontSize:"1.3rem"},children:(Te==null?void 0:Te.length)*2||0})]}),h.jsx("div",{className:"player-grid",children:Te.map((Ge,It)=>{const Ue=Ge[0].match_details&&Ge[0].match_details.opponent_matched_tags&&Ge[0].match_details.opponent_matched_tags.length>0||Ge[1].match_details&&Ge[1].match_details.opponent_matched_tags&&Ge[1].match_details.opponent_matched_tags.length>0;return h.jsxs("div",{className:"paired-player-card",children:[Ue&&h.jsx("div",{className:"matched-pair-badge",children:"Matched"}),h.jsxs("div",{className:"paired-player",onClick:()=>xe(Ge[0]),children:[h.jsx("img",{src:Ge[0].pfp_data,alt:Ge[0].name,className:"paired-player-avatar"}),h.jsx("h3",{className:"paired-player-name",children:Ge[0].name}),Ge[0].match_details&&Ge[0].match_details.opponent_matched_tags&&Ge[0].match_details.opponent_matched_tags.length>0&&h.jsx("div",{className:"matching-tag-container",children:h.jsx("div",{className:"matched-player-tag",children:Ge[0].match_details.opponent_matched_tags.map((ct,Je)=>h.jsx("span",{className:"matching-tag-pill",children:ct},Je))})})]}),h.jsxs("div",{className:"paired-player",onClick:()=>xe(Ge[1]),children:[h.jsx("img",{src:Ge[1].pfp_data,alt:Ge[1].name,className:"paired-player-avatar"}),h.jsx("h3",{className:"paired-player-name",children:Ge[1].name}),Ge[1].match_details&&Ge[1].match_details.opponent_matched_tags&&Ge[1].match_details.opponent_matched_tags.length>0&&h.jsx("div",{className:"matching-tag-container",children:h.jsx("div",{className:"matched-player-tag",children:Ge[1].match_details.opponent_matched_tags.map((ct,Je)=>h.jsx("span",{className:"matching-tag-pill",children:ct},Je))})})]})]},It)})})]})}),ke&&h.jsx("div",{className:"admin-lobby-players",children:h.jsxs("div",{className:"player-section",children:[h.jsxs("div",{className:"section-header",children:[be==="checkin"?"People Joined":"Unpaired Players",": ",h.jsx("span",{className:"stat-value",style:{fontSize:"1.3rem"},children:(ke==null?void 0:ke.length)||0})]}),h.jsx("div",{className:"player-grid",children:ke.map((Ge,It)=>h.jsxs("div",{className:"player-card",onClick:()=>xe(Ge),children:[h.jsx("img",{src:Ge.pfp_data,alt:Ge.name,className:"player-avatar"}),h.jsx("h3",{className:"player-name",children:Ge.name})]},It))})]})}),h.jsx(DS,{isOpen:Ae,onClose:it,onConfirm:qe}),h.jsx(OS,{isOpen:ie,onClose:Ze,onConfirm:$e,userName:(we==null?void 0:we.name)||"this user"})]}),R||!j||be=="checkin"||be==null||L?null:h.jsx(ze,{})]})},FS=()=>{const r=Rn(),{user:s}=N.useContext(Fn),a=()=>{window.location.href="https://reunio.app/become-an-organizer"};return h.jsxs("div",{className:"product-selection-container",children:[h.jsxs("video",{className:"background-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,children:[h.jsx("source",{src:"/assets/purchase_plan_video.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]}),h.jsxs("div",{className:"product-selection-content",children:[h.jsx("div",{className:"product-selection-header",children:h.jsx("h1",{children:"Product Selection"})}),h.jsxs("div",{className:"plans-section",children:[h.jsx("h2",{children:"Available Plans"}),h.jsxs("div",{className:"plan-card",children:[h.jsx("h3",{children:"Organizer Plan"}),h.jsxs("div",{className:"plan-description",children:[h.jsx("p",{children:"Create experiences for your community with our beta plan."}),h.jsxs("ul",{children:[h.jsx("li",{children:"Create unlimited experiences"}),h.jsx("li",{children:"Access to organizer dashboard"}),h.jsx("li",{children:"Priority customer support"})]})]}),h.jsx("button",{className:"purchase-button",onClick:a,children:"Contact Us"})]})]}),h.jsx("button",{className:"back-button",onClick:()=>r("/"),children:"Home"})]})]})},VS=()=>{const{user:r,userProfile:s,checkAuth:a,permissions:u}=N.useContext(Fn),[p,x]=N.useState(""),[w,E]=N.useState(""),[v,C]=N.useState(!1),[A,I]=N.useState(""),[R,O]=N.useState(!1),[L,j]=N.useState([]),[B,W]=N.useState(""),[z,F]=N.useState("5"),[Y,K]=N.useState("0"),[ne,q]=N.useState(!1),[ie,J]=N.useState(null),[we,Re]=N.useState(!1),[Ae,Ee]=N.useState(null),[Te,Z]=N.useState(null),[ke,ve]=N.useState(""),[ye,De]=N.useState(""),[be,X]=N.useState(null),[G,Ce]=N.useState(null),[ae,se]=N.useState(""),[ee,Me]=N.useState(!1),[Se,Le]=N.useState(!1),[et,Xe]=N.useState({x:0,y:0}),[de,xe]=N.useState(1),[Ze,$e]=N.useState(null),Tt=8,it=Rn(),qe=N.useRef(null);N.useEffect(()=>{window.scrollTo(0,0),r&&(x(r),E(r)),qe.current&&qe.current.focus()},[r]);const tt=Ie=>{const ce=/^[a-z0-9]+$/;return Ie.length>=2&&ce.test(Ie)},jt=Ie=>{const ce=Ie.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");E(ce),O(!0),setTimeout(()=>{O(!1)},500)},ze=()=>{if(B.includes(",")){const Ie=B.split(",").map(ft=>ft.startsWith(" ")?ft.substring(1):ft),ce=[];Ie.forEach(ft=>{const ut=ft.trim();ut&&!L.includes(ut)&&!ce.includes(ut)&&ce.push(ut)}),ce.length>0&&j([...L,...ce]),W("")}else B.trim()&&!L.includes(B.trim())&&(j([...L,B.trim()]),W(""))},gn=Ie=>{j(L.filter(ce=>ce!==Ie))},rr=Ie=>{Ie.key==="Enter"&&B.trim()&&(Ie.preventDefault(),ze())},Ge=Ie=>{Ie==="icebreaker"?L.length>0||B.trim()?(Ee("icebreaker"),Re(!0)):(J("icebreaker"),j([]),W("")):Ie==="custom"&&J("custom")},It=()=>{J(Ae),j([]),W(""),Re(!1),Ee(null)},Ue=()=>{Re(!1),Ee(null)},ct=(Ie,ce,ft)=>new Promise(ut=>{const xt=new Image;xt.onload=()=>{const Yt=document.createElement("canvas"),hn=Yt.getContext("2d");let{width:ln,height:dt}=xt;ln>dt?ln>ce&&(dt=dt*ce/ln,ln=ce):dt>ft&&(ln=ln*ft/dt,dt=ft),Yt.width=ln,Yt.height=dt,hn.drawImage(xt,0,0,ln,dt);const rn=Yt.toDataURL("image/jpeg",.7);ut(rn)},xt.src=URL.createObjectURL(Ie)}),Je=async Ie=>{const ce=Ie.target.files[0];if(ce){if(se(""),Le(!0),!["image/jpeg","image/jpg","image/png"].includes(ce.type)){se("Invalid format. Please upload a JPG or PNG image."),Le(!1);return}if(ce.size>2*1024*1024){se("File too large. Please choose an image under 2MB."),Le(!1);return}try{const ft=await ct(ce,400,400);Z(ce),X(ft),Me(!0),Le(!1)}catch(ft){console.error("Error processing image:",ft),se("Error processing image. Please try again."),Le(!1)}}},wt=(Ie,ce)=>{$e(ce)},Bt=async()=>{try{Le(!0);const Ie=await Bc(be,Ze);Ce(Ie),Me(!1),Le(!1)}catch(Ie){console.error("Error cropping logo:",Ie),se("Error processing image. Please try again."),Me(!1),Le(!1)}},Xt=()=>{Z(null),X(null),Ce(null),Me(!1),Le(!1),Xe({x:0,y:0}),xe(1),$e(null),se("");const Ie=document.getElementById("logoUpload");Ie&&(Ie.value="")},Be=async Ie=>{if(Ie.preventDefault(),!tt(w)){I("Lobby code must be at least 2 characters long and contain only lowercase letters and numbers");return}C(!0),I("");const ce=parseInt(z)*60+parseInt(Y);let ft=null;G&&(ft=G.split(",")[1]);try{const ut={lobby_code:w,custom_tags:ie==="custom"?L:[],lobby_duration:ce,show_table_numbers:ne};ft&&(ut.logo_icon=ft),ke.trim()&&(ut.logo_name=ke.trim()),ye.trim()&&(ut.logo_hyperlink=ye.trim());const xt=await yt("/create_lobby",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ut)});if(xt.ok)console.log("Lobby created successfully"),console.log(await xt.json()),it(`/admin_lobby_view?code=${w}`);else{const Yt=await xt.json();I(Yt.message||"Failed to create lobby"),console.error("Failed to create lobby")}}catch(ut){I("An error occurred while creating the lobby"),console.error("Error creating lobby:",ut)}finally{C(!1)}};return h.jsxs("div",{className:"create-lobby-background",children:[h.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Reunio Logo",className:"logo-image",onClick:()=>it(-1)}),h.jsxs("div",{className:"create-lobby-container",children:[h.jsx("h1",{className:"create-lobby-title",children:"Create a New Lobby"}),h.jsxs("form",{onSubmit:Be,className:"create-lobby-form",children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"lobbyCode",children:"Lobby Code"}),h.jsx("input",{ref:qe,type:"text",id:"lobbyCode",value:w,onChange:jt,placeholder:"Enter lobby code (lowercase letters and numbers only)",required:!0,className:`form-input ${R?"typing":""}`,autoComplete:"off"}),h.jsx("div",{className:"input-hint",children:"lowercase letters and numbers only"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{children:"Round Duration"}),h.jsxs("div",{className:"duration-input-container",children:[h.jsxs("div",{className:"duration-input-group",children:[h.jsx("input",{type:"number",id:"minutes",value:z,onChange:Ie=>{const ce=Ie.target.value;(ce===""||parseInt(ce)>0&&parseInt(ce)<=Tt)&&(F(ce),parseInt(ce)===Tt&&K("0"))},min:"1",max:Tt,placeholder:`1-${Tt}`,className:"form-input duration-input",autoComplete:"off"}),h.jsx("label",{htmlFor:"minutes",className:"duration-label",children:"Minutes"})]}),h.jsxs("div",{className:"duration-input-group",children:[h.jsx("input",{type:"number",id:"seconds",value:Y,onChange:Ie=>{const ce=Ie.target.value;(ce===""||parseInt(ce)>=0&&parseInt(ce)<=59)&&K(ce)},min:"0",max:"59",placeholder:"0-59",className:"form-input duration-input",autoComplete:"off",disabled:parseInt(z)===Tt}),h.jsx("label",{htmlFor:"seconds",className:"duration-label",children:"Seconds"})]})]}),h.jsxs("div",{className:"input-hint",children:["Maximum total duration is ",Tt," minutes"]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"showTableNumbers",children:"Table Numbers"}),h.jsx("input",{type:"checkbox",id:"showTableNumbers",checked:ne,onChange:Ie=>q(Ie.target.checked),className:"form-input checkbox-input"}),h.jsx("div",{className:"input-hint",children:"Recommended for events with 50+ people"}),h.jsx("div",{className:"input-hint",children:"Make sure to provide table numbers"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{children:"Matchmaking Categories"}),h.jsxs("div",{className:"matchmaking-tabs",children:[h.jsx("button",{type:"button",className:`tab-button ${ie==="icebreaker"?"tab-selected":""}`,onClick:()=>Ge("icebreaker"),children:"Community Ice Breaker"}),h.jsx("button",{type:"button",className:`tab-button ${ie==="custom"?"tab-selected":""}`,onClick:()=>Ge("custom"),children:"Custom Matching"})]}),ie==="custom"&&h.jsxs("div",{className:"custom-matching-section",children:[h.jsxs("div",{className:"tag-input-container",children:[h.jsx("input",{type:"text",id:"tagInput",value:B,onChange:Ie=>W(Ie.target.value),onKeyDown:rr,placeholder:"Add categories (press + to add)",className:"form-input",autoComplete:"off"}),h.jsx("button",{type:"button",onClick:ze,className:"tag-add-button",children:"+"})]}),L.length>0&&h.jsx("div",{className:"tag-list",children:L.map((Ie,ce)=>h.jsxs("div",{className:"tag-item",children:[Ie,h.jsx("button",{type:"button",onClick:()=>gn(Ie),className:"tag-remove-button",children:""})]},ce))}),h.jsx("div",{className:"input-hint",children:"If you want to match people based on categories"})]})]}),h.jsxs("div",{className:"form-group logo-upload-section",children:[h.jsx("label",{children:"Sponsor Logo"}),!G&&!ee&&h.jsxs(h.Fragment,{children:[Se?h.jsx("div",{className:"logo-processing",children:"Processing..."}):h.jsxs(h.Fragment,{children:[h.jsx("input",{type:"file",id:"logoUpload",accept:"image/jpeg,image/jpg,image/png",onChange:Je,style:{display:"none"}}),h.jsx("button",{type:"button",onClick:()=>document.getElementById("logoUpload").click(),className:"logo-upload-button",children:"Upload Logo"})]}),ae&&h.jsx("div",{className:"logo-error-message",children:ae})]}),ee&&be&&h.jsxs("div",{className:"logo-crop-container",children:[h.jsx("div",{className:"logo-crop-area",children:h.jsx(jc,{image:be,crop:et,zoom:de,aspect:1,onCropChange:Xe,onZoomChange:xe,onCropComplete:wt})}),h.jsxs("div",{className:"logo-crop-controls",children:[h.jsx("button",{type:"button",onClick:Bt,className:"logo-save-button",disabled:Se,children:Se?"Processing...":"Save Crop"}),h.jsx("button",{type:"button",onClick:Xt,className:"logo-cancel-button",children:"Cancel"})]})]}),G&&!ee&&h.jsx("div",{className:"logo-preview-container",children:h.jsxs("div",{className:"logo-preview",children:[h.jsx("img",{src:G,alt:"Logo preview",className:"logo-preview-image"}),h.jsx("button",{type:"button",onClick:Xt,className:"logo-remove-button",children:""})]})}),!1]}),A&&h.jsx("div",{className:"error-message",children:A}),h.jsx("button",{type:"submit",className:"submit-button",disabled:v,children:v?"Creating...":"Create Lobby"})]})]}),we&&h.jsx("div",{className:"modal-overlay",children:h.jsxs("div",{className:"modal-content",children:[h.jsx("h3",{children:"Switch to Community Ice Breaker?"}),h.jsx("p",{children:"This will clear your current matching categories."}),h.jsxs("div",{className:"modal-buttons",children:[h.jsx("button",{type:"button",onClick:Ue,className:"modal-button modal-cancel",children:"Cancel"}),h.jsx("button",{type:"button",onClick:It,className:"modal-button modal-confirm",children:"Confirm"})]})]})})]})},zS=r=>{try{const s=new URLSearchParams(r||window.location.search),a=s.get("via")||"",u=s.get("rewardful")||s.get("rewardful_referral")||"",p=typeof window<"u"&&window.Rewardful&&window.Rewardful.referral||"",x=typeof window<"u"&&window.localStorage&&window.localStorage.getItem("rewardful_referral")||"",w=p||u||a||x||"";return w&&typeof window<"u"&&window.localStorage&&window.localStorage.setItem("rewardful_referral",w),w}catch{return""}},US=()=>{const{login:r,user:s,checkAuth:a,permissions:u}=N.useContext(Fn),[p,x]=N.useState(""),[w,E]=N.useState(""),[v,C]=N.useState(""),[A,I]=N.useState(""),[R,O]=N.useState(""),[L,j]=N.useState(""),[B,W]=N.useState({}),[z,F]=N.useState(""),[Y,K]=N.useState(!1),ne=Rn(),q=Br();N.useEffect(()=>{localStorage.getItem("access_token")&&!s&&a()},[]),N.useEffect(()=>{u!==null&&(u==="admin"||u==="organizer")&&ne("/")},[u,ne]),N.useEffect(()=>{(async()=>{if(s!==null&&u!==null&&u!=="admin"&&u!=="organizer")try{if(!localStorage.getItem("access_token"))return;const Me=await yt("/check-subscription-status");Me.ok&&(await Me.json()).has_access===!0&&ne("/organizer-account-details")}catch(ee){console.error("Error checking subscription status:",ee)}})()},[s,u,ne]);const ie=se=>{const ee=/^[a-z0-9]+$/;return se.length>=2&&ee.test(se)},J=se=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(se)&&se.trim()!=="",we=se=>se.replace(/\D/g,"").length===10,Re=se=>se.trim().length>=2,Ae=se=>{const ee=se.replace(/\D/g,"");return ee.length===0?"":ee.length<=3?`(${ee}`:ee.length<=6?`(${ee.slice(0,3)}) ${ee.slice(3)}`:`(${ee.slice(0,3)}) ${ee.slice(3,6)}-${ee.slice(6,10)}`},Ee=se=>se.replace(/\D/g,""),Te=se=>{const ee=se.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");x(ee),z&&F("")},Z=se=>{E(se.target.value),z&&F(""),B.email&&W(ee=>({...ee,email:""}))},ke=se=>{const ee=se.target.value;C(ee),z&&F(""),B.phone&&W(Me=>({...Me,phone:""}))},ve=()=>{const se=Ae(v);C(se),se&&!we(se)?W(ee=>({...ee,phone:"Invalid phone number"})):W(ee=>({...ee,phone:""}))},ye=se=>{const ee=se.target.value;I(ee),z&&F(""),B.cityState&&W(Me=>({...Me,cityState:""}))},De=()=>{A&&!Re(A)?W(se=>({...se,cityState:"City/State must be at least 2 characters"})):W(se=>({...se,cityState:""}))},be=se=>{O(se.target.value),B.eventType&&W(ee=>({...ee,eventType:""}))},X=se=>{j(se.target.value),B.avgAttendees&&W(ee=>({...ee,avgAttendees:""}))},G=async se=>{se.preventDefault(),F(""),K(!0);const ee=s!==null;if(!ee&&(!p||!ie(p))){F("Username must be at least 2 characters and contain only lowercase letters and numbers"),K(!1);return}if(!w||!J(w)){W(Xe=>({...Xe,email:"Please enter a valid email address"})),F("Please enter a valid email address"),K(!1);return}const Me=Ee(v);if(!v||!we(v)){W(Xe=>({...Xe,phone:"Please enter a valid phone number"})),F("Please enter a valid phone number"),K(!1);return}if(!A||!Re(A)){W(Xe=>({...Xe,cityState:"City/State is required (minimum 2 characters)"})),F("City/State is required (minimum 2 characters)"),K(!1);return}const Se=new URLSearchParams(q.search),Le=zS(q.search),et=Se.get("ref")||Se.get("affiliate_code")||"";if(ee){if(!localStorage.getItem("access_token")){F("Authentication required. Please log in again."),K(!1);return}try{if(!(await yt("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone_number:Me,city_state:A,event_type:R||"",avg_attendees:L||""})})).ok)throw new Error("Failed to update profile");const xe=await yt("/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w,rewardful_referral:Le,affiliate_code:et})}),Ze=await xe.json();if(!xe.ok||Ze.error){if(Ze.error&&Ze.error.includes("already have an active subscription")){ne("/organizer-account-details");return}F(Ze.error||"Failed to create checkout session. Please try again."),K(!1);return}window.location.href=Ze.checkout_url;return}catch(de){console.error("Error creating checkout session:",de),F("An error occurred. Please try again."),K(!1);return}}try{const de=await yt("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:p,password:p})}),xe=await de.json();if(xe.error==="Username already taken"){F("Username is taken"),K(!1);return}if(!de.ok){F(xe.message||"Signup failed"),K(!1);return}if(r(xe),await a(),!localStorage.getItem("access_token"))throw new Error("Authentication failed");const $e=await fetch("/assets/fakeprofile.png");if(!$e.ok)throw new Error("Failed to fetch profile image");const it=await(await $e.blob()).arrayBuffer(),qe=btoa(new Uint8Array(it).reduce((gn,rr)=>gn+String.fromCharCode(rr),""));if(!(await yt("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:p,image_data:qe,phone_number:Me,city_state:A,event_type:R||"",avg_attendees:L||""})})).ok)throw new Error("Failed to update profile");await a();const jt=await yt("/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w,rewardful_referral:Le,affiliate_code:et})}),ze=await jt.json();if(!jt.ok||ze.error){if(ze.error&&ze.error.includes("already have an active subscription")){ne("/organizer-account-details");return}throw new Error(ze.error||"Failed to create checkout session")}window.location.href=ze.checkout_url}catch(Xe){console.error("Error:",Xe),F("An error occurred. Please try again."),K(!1)}},Ce=s===null,ae=Y||u==="admin"||u==="organizer";return h.jsxs("div",{className:"signup-container",children:[h.jsx("button",{onClick:()=>ne("/"),className:"homescreen-button",children:"Home"}),h.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),h.jsx("h3",{className:"signup-header",children:"Become an Organizer"}),h.jsx("div",{className:"step-form-container",children:h.jsxs("form",{onSubmit:G,children:[h.jsxs("div",{style:{display:Ce?"block":"none"},children:[h.jsx("label",{className:"step-label",children:"Username"}),h.jsx("input",{type:"text",value:p,onChange:Te,placeholder:"Enter a username",className:"step-input",autoFocus:Ce}),p.length>0&&h.jsxs("div",{className:"username-info-message",children:[h.jsxs("svg",{className:"info-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[h.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),h.jsx("path",{d:"M8 5V7M8 11V9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),h.jsx("circle",{cx:"8",cy:"5",r:"0.5",fill:"currentColor"})]}),h.jsx("span",{children:"This will be your temporary password"})]})]}),h.jsxs("div",{style:{marginTop:Ce?"20px":"0"},children:[h.jsxs("label",{className:"step-label",children:["Email",B.email&&h.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[h.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),h.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),h.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),h.jsx("input",{type:"email",value:w,onChange:Z,placeholder:"Enter your email",className:`step-input ${B.email?"input-error":""}`,autoFocus:!Ce})]}),h.jsxs("div",{style:{marginTop:"20px"},children:[h.jsxs("label",{className:"step-label",children:["Phone Number",B.phone&&h.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[h.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),h.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),h.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),h.jsx("input",{type:"tel",value:v,onChange:ke,onBlur:ve,placeholder:"(123) 456-7890",className:`step-input ${B.phone?"input-error":""}`})]}),h.jsxs("div",{style:{marginTop:"20px"},children:[h.jsxs("label",{className:"step-label",children:["City / State",B.cityState&&h.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[h.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),h.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),h.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),h.jsx("input",{type:"text",value:A,onChange:ye,onBlur:De,placeholder:"City / State",className:`step-input ${B.cityState?"input-error":""}`})]}),h.jsxs("div",{style:{marginTop:"20px"},children:[h.jsx("label",{className:"step-label",children:"What events do you host?"}),h.jsxs("select",{value:R,onChange:be,className:"step-select",children:[h.jsx("option",{value:"",children:"Select an option..."}),h.jsx("option",{value:"Hospitality-Restaurants",children:"Hospitality-Restaurants"}),h.jsx("option",{value:"Social",children:"Social"}),h.jsx("option",{value:"Residential",children:"Residential"}),h.jsx("option",{value:"Business Networking",children:"Business Networking"}),h.jsx("option",{value:"Event Specialist",children:"Event Specialist"}),h.jsx("option",{value:"Education",children:"Education"}),h.jsx("option",{value:"HR-Team Building",children:"HR-Team Building"}),h.jsx("option",{value:"Corporate",children:"Corporate"}),h.jsx("option",{value:"Co-working",children:"Co-working"}),h.jsx("option",{value:"Dating",children:"Dating"}),h.jsx("option",{value:"Other",children:"Other"})]})]}),h.jsxs("div",{style:{marginTop:"20px"},children:[h.jsx("label",{className:"step-label",children:"Avg # of attendees"}),h.jsxs("select",{value:L,onChange:X,className:"step-select",children:[h.jsx("option",{value:"",children:"Select an option..."}),h.jsx("option",{value:"5-15",children:"5-15"}),h.jsx("option",{value:"15-30",children:"15-30"}),h.jsx("option",{value:"30-50",children:"30-50"}),h.jsx("option",{value:"50-75",children:"50-75"}),h.jsx("option",{value:"75-100",children:"75-100"}),h.jsx("option",{value:"100-150",children:"100-150"}),h.jsx("option",{value:"150-200",children:"150-200"}),h.jsx("option",{value:"200+",children:"200+"})]})]}),z&&h.jsx("div",{className:"error-message",style:{marginTop:"15px",marginBottom:"10px"},children:z}),h.jsx("button",{type:"submit",className:"primary-button",disabled:ae,style:{marginTop:"20px"},children:Y?"Loading...":"Submit"})]})})]})},WS=()=>{const[r,s]=N.useState(!1),[a,u]=N.useState(""),p=N.useRef(null),x=Rn(),w=Br();return N.useEffect(()=>{const v=new URLSearchParams(w.search).get("session_id");return(async()=>{let A="/";if(!v){u("Missing session ID"),s(!0),p.current=setTimeout(()=>{s(!1),x(A)},2e3);return}try{if(!localStorage.getItem("access_token")){u("Authentication required"),s(!0),p.current=setTimeout(()=>{s(!1),x(A)},2e3);return}const R=await yt(`/organizer-signup-success?session_id=${v}`),O=await R.json();if(!R.ok||O.error)console.error("Payment verification failed:",O.error),u(O.error||"Payment verification failed");else try{const L=await yt("/view_my_active_lobbies");if(L.ok){const j=await L.json();A=!!(j&&Array.isArray(j.lobbies)&&j.lobbies.length>0)?"/":"/create_lobby"}else A="/"}catch(L){console.error("Error checking active lobbies:",L),A="/"}}catch(I){console.error("Error verifying payment:",I),u("Failed to verify payment")}s(!0),p.current=setTimeout(()=>{s(!1),x(A)},2e3)})(),()=>{p.current&&(clearTimeout(p.current),p.current=null)}},[w.search,x]),r?h.jsxs("div",{className:"success-overlay",children:[h.jsx("div",{className:"success-text",children:"Success! You're now an organizer!"}),a&&h.jsx("div",{className:"success-error",style:{marginTop:"20px"},children:a})]}):h.jsx("div",{className:"signup-container",children:h.jsx("div",{className:"loading-message",children:"Processing..."})})},HS=()=>{const{user:r,checkAuth:s,permissions:a}=N.useContext(Fn),u=Rn(),[p,x]=N.useState(null),[w,E]=N.useState(!0),[v,C]=N.useState(!1),[A,I]=N.useState(""),[R,O]=N.useState(!1),[L,j]=N.useState(!1);N.useEffect(()=>{a!==null&&a!=="admin"&&a!=="organizer"&&u("/organizer-signup")},[a,u]),N.useEffect(()=>{r&&(async()=>{try{const F=await yt("/organizer-account-details"),Y=await F.json();if(!F.ok||Y.error){if((a==="admin"||a==="organizer")&&Y.has_subscription!==!1){I(Y.error||"Some subscription details may be incomplete"),x(Y),E(!1);return}if(Y.has_subscription===!1){u("/organizer-signup");return}I(Y.error||"Failed to load account details"),Y.has_subscription!==!1&&x(Y),E(!1);return}if(Y.has_subscription===!1){u("/organizer-signup");return}x(Y)}catch(F){console.error("Error fetching account details:",F),I("Failed to load account details. Please try again.")}finally{E(!1)}})()},[r,a,u]),N.useEffect(()=>(R?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[R]);const B=z=>z?new Date(z*1e3).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):null,W=async()=>{C(!0),I("");try{const z=await yt("/cancel-subscription",{method:"POST",headers:{"Content-Type":"application/json"}}),F=await z.json();if(!z.ok||F.error){I(F.error||"Failed to cancel subscription"),C(!1),O(!1);return}j(!0),O(!1),setTimeout(()=>{u("/")},1500)}catch(z){console.error("Error canceling subscription:",z),I("An error occurred. Please try again."),C(!1),O(!1)}};return w?h.jsx("div",{className:"signup-container",children:h.jsx("div",{className:"loading-message",children:"Loading account details..."})}):!p&&!w?h.jsxs("div",{className:"signup-container",children:[h.jsx("button",{onClick:()=>u("/"),className:"homescreen-button",children:"Home"}),h.jsx("div",{className:"error-message",children:A||"No account details found"})]}):p?h.jsxs("div",{className:"signup-container",children:[h.jsx("button",{onClick:()=>u("/"),className:"homescreen-button",children:"Home"}),h.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),h.jsx("h3",{className:"signup-header",children:"Organizer Account Details"}),h.jsx("div",{className:"step-form-container",children:h.jsxs("div",{className:"account-details-content",children:[A&&h.jsx("div",{className:"error-message",style:{marginBottom:"20px"},children:A}),p.subscription_status&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Subscription Status:"}),h.jsx("span",{className:`detail-value status-${p.subscription_status}`,children:p.subscription_status})]}),p.email&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Email:"}),h.jsx("span",{className:"detail-value",children:p.email})]}),p.billing_period&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Billing Period:"}),h.jsx("span",{className:"detail-value",children:p.billing_period})]}),p.amount!==null&&p.amount!==void 0&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Amount:"}),h.jsxs("span",{className:"detail-value",children:["$",p.amount," ",p.currency||""]})]}),p.current_period_start&&B(p.current_period_start)&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Current Period Start:"}),h.jsx("span",{className:"detail-value",children:B(p.current_period_start)})]}),p.current_period_end&&B(p.current_period_end)&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Current Period End:"}),h.jsx("span",{className:"detail-value",children:B(p.current_period_end)})]}),p.cancel_at_period_end&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Cancellation:"}),h.jsx("span",{className:"detail-value",children:"Will cancel at period end"})]}),h.jsx("button",{onClick:()=>O(!0),className:"primary-button cancel-button",style:{marginTop:"30px"},children:"Cancel Subscription"})]})}),R&&h.jsx("div",{className:"modal-overlay",onClick:z=>z.stopPropagation(),children:h.jsxs("div",{className:"modal-content",onClick:z=>z.stopPropagation(),children:[h.jsx("h3",{children:"Cancel Subscription"}),h.jsx("p",{children:"Are you sure you want to cancel your subscription?"}),h.jsxs("div",{className:"modal-buttons",children:[h.jsx("button",{className:"modal-button modal-cancel",onClick:()=>O(!1),disabled:v,children:"Cancel"}),h.jsx("button",{className:"modal-button modal-confirm",onClick:W,disabled:v,children:v?"Processing...":"Confirm"})]})]})}),L&&h.jsx("div",{className:"toast-container",children:h.jsx("div",{className:"toast-message",children:"Subscription canceled successfully"})})]}):null},yf=({size:r=60,className:s=""})=>h.jsx("div",{className:`attendees-spinner ${s}`,style:{width:r,height:r},children:h.jsx("div",{className:"attendees-spinner-inner"})}),Vd=["#6366f1","#8b5cf6","#ec4899","#f59e0b","#10b981","#3b82f6","#ef4444","#14b8a6","#f97316","#a855f7","#06b6d4","#84cc16"],GS=r=>{if(!r)return Vd[0];let s=0;for(let u=0;u<r.length;u++)s=r.charCodeAt(u)+((s<<5)-s);const a=Math.abs(s)%Vd.length;return Vd[a]},wf=Gt.memo(({tag:r})=>{const s=GS(r);return h.jsx("span",{className:"attendee-modal-tag-pill",style:{background:s},children:r})});wf.displayName="TagPill";const XS=r=>{if(!r)return"Date not available";let s;if(typeof r=="number")s=r<1e10?new Date(r*1e3):new Date(r);else if(typeof r=="string")s=new Date(r);else return"Date not available";return isNaN(s.getTime())?"Date not available":s.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},YS=({attendees:r=[]})=>{const s=N.useRef(null),a=N.useRef(null),u=N.useRef(null),[p,x]=N.useState(null),[w,E]=N.useState(!1),[v,C]=N.useState({}),[A,I]=N.useState(!1),[R,O]=N.useState({}),L=N.useRef(-1),j=N.useRef(null),[B,W]=N.useState(!1),[z,F]=N.useState(null),[Y,K]=N.useState({}),[ne,q]=N.useState(!1),[ie,J]=N.useState(null),[we,Re]=N.useState(null),[Ae,Ee]=N.useState(!1),Te=N.useRef(null),Z=N.useRef(null),ke=N.useRef({}),ve=N.useRef(null);N.useEffect(()=>{const de=window.matchMedia("(pointer: coarse)"),xe=()=>E(!!de.matches);return xe(),de.addEventListener?de.addEventListener("change",xe):de.addListener(xe),()=>{de.removeEventListener?de.removeEventListener("change",xe):de.removeListener(xe)}},[]),N.useEffect(()=>{const de=xe=>{a.current&&(a.current.contains(xe.target)||x(null))};return document.addEventListener("pointerdown",de,{capture:!0}),()=>{document.removeEventListener("pointerdown",de,{capture:!0})}},[]);const ye=N.useCallback((de=1)=>{const xe=s.current;if(!xe)return;const Ze=Math.round(xe.clientWidth*.75)*de;xe.scrollBy({left:Ze,behavior:"smooth"})},[]),De=N.useCallback(()=>{const de=s.current;return de?de.scrollLeft>0:!1},[]),be=N.useCallback(()=>{const de=s.current;return de?de.scrollLeft<de.scrollWidth-de.clientWidth-1:!1},[]),[X,G]=N.useState({left:!1,right:!0});N.useEffect(()=>{const de=()=>{G({left:De(),right:be()})},xe=s.current;return xe&&(de(),xe.addEventListener("scroll",de),window.addEventListener("resize",de)),()=>{xe&&(xe.removeEventListener("scroll",de),window.removeEventListener("resize",de))}},[r.length,De,be]);const Ce=N.useCallback(async de=>{if(A||de.length===0)return;const xe=de.filter($e=>!v[$e]&&!R[$e]);if(xe.length===0)return;I(!0);const Ze={...R};xe.forEach($e=>{Ze[$e]=!0}),O(Ze);try{const $e=await yt("/organizer_attendees/images",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({usernames:xe})});if(!$e.ok)throw $e.status===401?new Error("Unauthorized"):new Error("Failed to load images");const Tt=await $e.json();if(Tt.status==="success"&&Tt.images){const it={...v};xe.forEach(qe=>{Tt.images[qe]?it[qe]=`data:image/jpeg;base64,${Tt.images[qe]}`:it[qe]=null}),C(it)}}catch($e){console.error("Error loading images:",$e)}finally{I(!1);const $e={...R};xe.forEach(Tt=>{delete $e[Tt]}),O($e)}},[A,v,R]);N.useEffect(()=>{if(r.length===0||L.current>=0)return;const de=r.slice(0,30).map(xe=>xe.username);de.length>0&&(Ce(de),L.current=Math.min(29,r.length-1))},[r.length,Ce]),N.useEffect(()=>{if(r.length===0||!s.current)return;const de=new IntersectionObserver(Ze=>{j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{Ze.forEach($e=>{if($e.isIntersecting){const Tt=parseInt($e.target.dataset.index),it=L.current;if(Tt>=it-5&&Tt<r.length&&it<r.length-1){const qe=it+1,tt=Math.min(qe+30,r.length);if(qe<r.length){const jt=r.slice(qe,tt).map(ze=>ze.username);Ce(jt),L.current=tt-1}}}})},150)},{root:s.current,rootMargin:"200px",threshold:.5});return s.current.querySelectorAll("[data-index]").forEach(Ze=>de.observe(Ze)),u.current=de,()=>{j.current&&clearTimeout(j.current),u.current&&u.current.disconnect()}},[r.length,Ce]);const ae=N.useCallback(()=>!z||r.length===0?-1:r.findIndex(de=>de.username===z),[z,r]),se=N.useCallback(de=>{var $e;const xe=ae();if(xe===-1||r.length===0)return null;let Ze;return de==="next"?Ze=(xe+1)%r.length:Ze=xe===0?r.length-1:xe-1,(($e=r[Ze])==null?void 0:$e.username)||null},[ae,r]),ee=N.useCallback(async de=>{const xe=se(de);xe&&(Re(de==="next"?"left":"right"),ve.current&&clearTimeout(ve.current),ve.current=setTimeout(()=>{Re(null),ve.current=null},400),await Le(xe,!1))},[se]),Me=N.useMemo(()=>!(r.length<=1),[r.length]),Se=N.useMemo(()=>!(r.length<=1),[r.length]),Le=N.useCallback(async(de,xe=!0)=>{var Ze,$e,Tt,it;if(ke.current[de]){F(de),W(!0),J(null),Ee(xe);return}Te.current&&Te.current,Te.current=de,q(!0),J(null),W(!0),F(de),Ee(xe);try{const qe=await yt(`/organizer_attendees/${de}/details`);if(Te.current!==de)return;if(qe.status===401)throw localStorage.removeItem("access_token"),new Error("Session expired. Please log in again.");if(qe.status===403)throw new Error("Access denied. Organizer permissions required.");if(qe.status===404)throw new Error("Attendee details not found.");if(!qe.ok)throw new Error("Failed to load attendee details");const tt=await qe.json();if(tt.status==="success"&&tt.attendee){const jt={username:tt.attendee.username,name:tt.attendee.name||tt.attendee.username,image_data:tt.attendee.image_data?`data:image/jpeg;base64,${tt.attendee.image_data}`:null,last_joined_date:tt.attendee.last_joined_date,self_tags:((Ze=tt.attendee.tags)==null?void 0:Ze.tags_work)||[],desiring_tags:(($e=tt.attendee.tags)==null?void 0:$e.desiring_tags_work)||[],lobbies_attended:((Tt=tt.attendee.stats)==null?void 0:Tt.lobbies_attended)||0,rounds_paired:((it=tt.attendee.stats)==null?void 0:it.rounds_paired)||0};K(ze=>{const gn={...ze,[de]:jt};return ke.current=gn,gn}),Te.current===de&&F(de)}else throw new Error(tt.error||"Failed to load attendee details")}catch(qe){Te.current===de&&(console.error("Error fetching attendee details:",qe),J(qe.message||"An error occurred while loading details."))}finally{Te.current===de&&(q(!1),Te.current=null)}},[]),et=N.useCallback(()=>{Z.current&&clearTimeout(Z.current),ve.current&&clearTimeout(ve.current),W(!1),J(null),Re(null),Ee(!1),Z.current=setTimeout(()=>{F(null),Z.current=null},300)},[]);N.useEffect(()=>()=>{Z.current&&clearTimeout(Z.current)},[]),N.useEffect(()=>{const de=xe=>{xe.key==="Escape"&&B&&(xe.stopPropagation(),et())};return document.addEventListener("keydown",de,!0),()=>document.removeEventListener("keydown",de,!0)},[B,et]),N.useEffect(()=>{if(B){const de=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=de}}},[B]),N.useEffect(()=>()=>{ve.current&&clearTimeout(ve.current)},[]);const Xe=N.useMemo(()=>r.map((de,xe)=>({username:de.username||`temp-${xe}`,name:de.name||de.username||`User ${xe+1}`,small_image_data:de.small_image_data||null})),[r]);return h.jsxs("section",{className:`attendees-root ${B&&Ae?"attendees-root-modal-open":""}`,ref:a,"aria-label":"Your Community",children:[h.jsxs("div",{className:"attendees-card",children:[h.jsx("header",{className:"attendees-header",children:h.jsx("h2",{className:"attendees-title",children:"Your Community"})}),h.jsxs("div",{className:"attendees-carouselWrap",children:[h.jsx("button",{type:"button",className:"attendees-arrow attendees-arrowLeft","aria-label":"Scroll left",onClick:()=>ye(-1),disabled:!X.left||w,children:""}),h.jsx("div",{ref:s,className:"attendees-scroller",role:"list","aria-label":"Community attendees list",onMouseLeave:()=>{w||x(null)},children:Xe.map((de,xe)=>{const Ze=p===de.username,$e=p!==null,Tt=v[de.username],it=R[de.username];return h.jsxs("div",{"data-index":xe,className:["attendees-item",Ze?"is-active":"",$e&&!Ze?"is-dimmed":"",w?"is-touch":"is-mouse"].join(" "),role:"listitem",tabIndex:0,onMouseEnter:()=>{w||x(de.username)},onFocus:()=>x(de.username),onClick:()=>{w&&x(de.username),Le(de.username,!0)},onKeyDown:qe=>{(qe.key==="Enter"||qe.key===" ")&&(qe.preventDefault(),x(de.username)),qe.key==="Escape"&&x(null)},children:[h.jsx("div",{className:"attendees-avatarWrap","aria-hidden":"true",children:it?h.jsx(yf,{size:30,className:"attendees-tile-spinner"}):Tt?h.jsx("img",{className:"attendees-avatarImg",src:Tt,alt:"",onError:qe=>{qe.target.src="/assets/fakeprofile.png"}}):h.jsx("img",{className:"attendees-avatarImg",src:"/assets/fakeprofile.png",alt:""})}),h.jsx("div",{className:"attendees-name",title:de.name,children:de.name})]},de.username)})}),h.jsx("button",{type:"button",className:"attendees-arrow attendees-arrowRight","aria-label":"Scroll right",onClick:()=>ye(1),disabled:!X.right||w,children:""})]}),h.jsxs("div",{className:"attendees-dots","aria-hidden":"true",children:[h.jsx("span",{className:"attendees-dot is-on"}),h.jsx("span",{className:"attendees-dot"}),h.jsx("span",{className:"attendees-dot"}),h.jsx("span",{className:"attendees-dot"})]})]}),B&&h.jsxs(h.Fragment,{children:[r.length>1&&h.jsxs(h.Fragment,{children:[h.jsx("button",{type:"button",className:"attendee-modal-nav-arrow attendee-modal-nav-left",onClick:de=>{de.stopPropagation(),ee("prev")},disabled:!Me,children:""}),h.jsx("button",{type:"button",className:"attendee-modal-nav-arrow attendee-modal-nav-right",onClick:de=>{de.stopPropagation(),ee("next")},disabled:!Se,children:""})]}),h.jsx("div",{className:"attendee-modal-overlay",onClick:et,children:h.jsx("div",{className:`attendee-modal-content ${we?`swipe-${we}`:""}`,onClick:de=>de.stopPropagation(),children:ne?h.jsxs("div",{className:"attendee-modal-loading",children:[h.jsx(yf,{size:60}),h.jsx("p",{children:"Loading attendee details..."})]}):ie?h.jsx("div",{className:"attendee-modal-error",children:h.jsx("p",{className:"attendee-modal-error-message",children:ie})}):z&&Y[z]?h.jsx("div",{className:"attendee-modal-inner",children:(()=>{const de=Y[z];return h.jsxs(h.Fragment,{children:[h.jsx("h2",{className:"attendee-modal-header",id:"attendee-modal-title",children:de.name}),h.jsxs("div",{className:"attendee-modal-grid",children:[h.jsxs("div",{className:"attendee-modal-left",children:[h.jsx("div",{className:"attendee-modal-date",children:XS(de.last_joined_date)}),h.jsxs("div",{className:"attendee-modal-profile-card",children:[h.jsx("div",{className:"attendee-modal-profile-img-wrapper",children:de.image_data?h.jsx("img",{className:"attendee-modal-profile-img",src:de.image_data,alt:de.name,onError:xe=>{xe.target.src="/assets/fakeprofile.png"}}):h.jsx("img",{className:"attendee-modal-profile-img",src:"/assets/fakeprofile.png",alt:de.name})}),h.jsx("div",{className:"attendee-modal-profile-footer",children:de.name})]})]}),h.jsxs("div",{className:"attendee-modal-right",children:[h.jsxs("div",{className:"attendee-modal-stat",children:[h.jsx("span",{className:"attendee-modal-stat-label",children:"events attended"}),h.jsx("span",{className:"attendee-modal-stat-value",children:de.lobbies_attended})]}),h.jsxs("div",{className:"attendee-modal-stat",children:[h.jsx("span",{className:"attendee-modal-stat-label",children:"real connections"}),h.jsxs("div",{className:"attendee-modal-stat-value-with-icons",children:[h.jsx("span",{className:"attendee-modal-stat-value",children:de.rounds_paired}),h.jsx("div",{className:"attendee-modal-staggered-icons",children:[...Array(4)].map((xe,Ze)=>h.jsx("img",{className:"attendee-modal-staggered-icon",src:"/assets/fakeprofile.png",alt:""},Ze))})]})]}),h.jsxs("div",{className:"attendee-modal-tags-section",children:[h.jsx("h3",{className:"attendee-modal-tags-label",children:"who I am:"}),h.jsx("div",{className:"attendee-modal-tags-container",children:de.self_tags&&de.self_tags.length>0?de.self_tags.map((xe,Ze)=>h.jsx(wf,{tag:xe},`self-${Ze}-${xe}`)):h.jsx("span",{className:"attendee-modal-empty-state",children:"No tags"})})]}),h.jsxs("div",{className:"attendee-modal-tags-section",children:[h.jsx("h3",{className:"attendee-modal-tags-label",children:"looking for:"}),h.jsx("div",{className:"attendee-modal-tags-container",children:de.desiring_tags&&de.desiring_tags.length>0?de.desiring_tags.map((xe,Ze)=>h.jsx(wf,{tag:xe},`desiring-${Ze}-${xe}`)):h.jsx("span",{className:"attendee-modal-empty-state",children:"No tags"})})]})]})]})]})})()}):null})})]})]})},ZS=()=>{const{user:r,permissions:s,checkAuth:a}=N.useContext(Fn),u=Rn(),[p,x]=N.useState([]),[w,E]=N.useState(!0),[v,C]=N.useState(null);N.useEffect(()=>{s!==null&&s!=="admin"&&s!=="organizer"&&u("/organizer-signup")},[s,u]),N.useEffect(()=>{a()},[a]);const A=N.useCallback(async()=>{E(!0),C(null);try{const I=await yt("/organizer_attendees");if(I.status===401){localStorage.removeItem("access_token"),u("/organizer-signup");return}if(I.status===403){C("Access denied. Organizer permissions required."),E(!1);return}if(!I.ok)throw new Error("Failed to load attendees");const R=await I.json();if(R.status==="success")x(R.attendees||[]);else throw new Error(R.error||"Failed to load attendees")}catch(I){console.error("Error fetching attendees:",I),I.message==="Failed to fetch"||I.message.includes("network")?C("Network error. Please check your connection and try again."):C(I.message||"An error occurred. Please try again.")}finally{E(!1)}},[u]);return N.useEffect(()=>{(s==="organizer"||s==="admin")&&A()},[s,A]),h.jsxs("div",{className:"organizer-dashboard",children:[h.jsxs("div",{className:"dashboard-header",children:[h.jsx("h1",{children:"Organizer Dashboard"}),h.jsx("button",{onClick:()=>u("/"),className:"dashboard-home-button",children:"Home"})]}),w?h.jsx("div",{className:"attendees-loading-container",children:h.jsx(yf,{size:60})}):v?h.jsxs("div",{className:"attendees-error-container",children:[h.jsx("div",{className:"attendees-error-message",children:v}),h.jsx("button",{className:"attendees-retry-button",onClick:A,children:"Retry"})]}):p.length===0?h.jsx("div",{className:"attendees-empty-container",children:h.jsx("div",{className:"attendees-empty-message",children:"No attendees yet"})}):h.jsx(YS,{attendees:p})]})},$S=5e3,KS=()=>{const{checkAuth:r,permissions:s,user:a}=N.useContext(Fn),u=Rn(),[p,x]=N.useState([]),[w,E]=N.useState(!0),[v,C]=N.useState(null),[A,I]=N.useState(!1);return N.useEffect(()=>{r()},[r]),N.useEffect(()=>{a==="topaz"&&s==="admin"?I(!0):s!==null&&a!==null&&u("/")},[s,a,u]),N.useEffect(()=>{if(!A)return;let R=!0,O,L=!0;const j=async()=>{L&&E(!0),C(null);try{const B=await yt("/admin_all_lobbies");if(!B.ok)throw new Error("Failed to fetch lobbies");const W=await B.json();if(W.status!=="success"||!Array.isArray(W.lobbies))throw new Error("Invalid response format");if(!R)return;x(W.lobbies),console.log("Received lobbies data:",W.lobbies)}catch(B){R&&C(B.message||"Error fetching lobbies")}finally{R&&L&&E(!1),L=!1,O=setTimeout(j,$S)}};return j(),()=>{R=!1,O&&clearTimeout(O)}},[A]),w?h.jsx("div",{className:"master-lobby-container",children:h.jsxs("div",{className:"loading-state",children:[h.jsx("div",{className:"loading-spinner"}),h.jsx("p",{children:"Loading lobbies..."})]})}):v&&p.length===0?h.jsx("div",{className:"master-lobby-container",children:h.jsx("div",{className:"error-state",children:h.jsx("p",{children:v})})}):p.length===0?h.jsx("div",{className:"master-lobby-container",children:h.jsx("div",{className:"empty-state",children:h.jsx("p",{children:"No active lobbies found"})})}):h.jsxs("div",{className:"master-lobby-container",children:[h.jsx("button",{className:"back-button",onClick:()=>u(-1),children:"Back"}),v&&h.jsxs("div",{className:"error-banner",style:{backgroundColor:"#f8d7da",color:"#721c24",padding:"0.75rem",marginBottom:"1rem",borderRadius:"0.25rem",border:"1px solid #f5c6cb"},children:[v," (showing last known data)"]}),h.jsx("div",{className:"master-lobby-grid",children:p.map(R=>h.jsx("div",{className:"lobby-tile",children:h.jsxs("div",{className:"lobby-tile-content",children:[h.jsx("h3",{className:"lobby-code",children:R.code}),h.jsxs("div",{className:"lobby-stats",children:[h.jsxs("span",{className:"player-count",children:[R.player_count," players"]}),h.jsx("span",{className:"lobby-state",children:R.lobby_state})]}),h.jsxs("div",{style:{fontSize:"0.7rem",color:"#666",marginTop:"0.5rem"},children:["Debug: player_count=",R.player_count,", lobby_state=",R.lobby_state]})]})},R.code))})]})};var wx={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Qp=Gt.createContext&&Gt.createContext(wx),qS=["attr","size","title"];function QS(r,s){if(r==null)return{};var a=JS(r,s),u,p;if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(r);for(p=0;p<x.length;p++)u=x[p],!(s.indexOf(u)>=0)&&Object.prototype.propertyIsEnumerable.call(r,u)&&(a[u]=r[u])}return a}function JS(r,s){if(r==null)return{};var a={};for(var u in r)if(Object.prototype.hasOwnProperty.call(r,u)){if(s.indexOf(u)>=0)continue;a[u]=r[u]}return a}function Oc(){return Oc=Object.assign?Object.assign.bind():function(r){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(r[u]=a[u])}return r},Oc.apply(this,arguments)}function Jp(r,s){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(r);s&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,u)}return a}function Dc(r){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Jp(Object(a),!0).forEach(function(u){e4(r,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):Jp(Object(a)).forEach(function(u){Object.defineProperty(r,u,Object.getOwnPropertyDescriptor(a,u))})}return r}function e4(r,s,a){return s=t4(s),s in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a,r}function t4(r){var s=n4(r,"string");return typeof s=="symbol"?s:s+""}function n4(r,s){if(typeof r!="object"||!r)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var u=a.call(r,s);if(typeof u!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(r)}function vx(r){return r&&r.map((s,a)=>Gt.createElement(s.tag,Dc({key:a},s.attr),vx(s.child)))}function lo(r){return s=>Gt.createElement(r4,Oc({attr:Dc({},r.attr)},s),vx(r.child))}function r4(r){var s=a=>{var{attr:u,size:p,title:x}=r,w=QS(r,qS),E=p||a.size||"1em",v;return a.className&&(v=a.className),r.className&&(v=(v?v+" ":"")+r.className),Gt.createElement("svg",Oc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,u,w,{className:v,style:Dc(Dc({color:r.color||a.color},a.style),r.style),height:E,width:E,xmlns:"http://www.w3.org/2000/svg"}),x&&Gt.createElement("title",null,x),r.children)};return Qp!==void 0?Gt.createElement(Qp.Consumer,null,a=>s(a)):s(wx)}function i4(r){return lo({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"},child:[]}]})(r)}function s4(r){return lo({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(r)}function o4(r){return lo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M510.846 392.673c-5.211 12.157-27.239 21.089-67.36 27.318-2.064 2.786-3.775 14.686-6.507 23.956-1.625 5.566-5.623 8.869-12.128 8.869l-.297-.005c-9.395 0-19.203-4.323-38.852-4.323-26.521 0-35.662 6.043-56.254 20.588-21.832 15.438-42.771 28.764-74.027 27.399-31.646 2.334-58.025-16.908-72.871-27.404-20.714-14.643-29.828-20.582-56.241-20.582-18.864 0-30.736 4.72-38.852 4.72-8.073 0-11.213-4.922-12.422-9.04-2.703-9.189-4.404-21.263-6.523-24.13-20.679-3.209-67.31-11.344-68.498-32.15a10.627 10.627 0 0 1 8.877-11.069c69.583-11.455 100.924-82.901 102.227-85.934.074-.176.155-.344.237-.515 3.713-7.537 4.544-13.849 2.463-18.753-5.05-11.896-26.872-16.164-36.053-19.796-23.715-9.366-27.015-20.128-25.612-27.504 2.437-12.836 21.725-20.735 33.002-15.453 8.919 4.181 16.843 6.297 23.547 6.297 5.022 0 8.212-1.204 9.96-2.171-2.043-35.936-7.101-87.29 5.687-115.969C158.122 21.304 229.705 15.42 250.826 15.42c.944 0 9.141-.089 10.11-.089 52.148 0 102.254 26.78 126.723 81.643 12.777 28.65 7.749 79.792 5.695 116.009 1.582.872 4.357 1.942 8.599 2.139 6.397-.286 13.815-2.389 22.069-6.257 6.085-2.846 14.406-2.461 20.48.058l.029.01c9.476 3.385 15.439 10.215 15.589 17.87.184 9.747-8.522 18.165-25.878 25.018-2.118.835-4.694 1.655-7.434 2.525-9.797 3.106-24.6 7.805-28.616 17.271-2.079 4.904-1.256 11.211 2.46 18.748.087.168.166.342.239.515 1.301 3.03 32.615 74.46 102.23 85.934 6.427 1.058 11.163 7.877 7.725 15.859z"},child:[]}]})(r)}function a4(r){return lo({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448,209.91a210.06,210.06,0,0,1-122.77-39.25V349.38A162.55,162.55,0,1,1,185,188.31V278.2a74.62,74.62,0,1,0,52.23,71.18V0l88,0a121.18,121.18,0,0,0,1.86,22.17h0A122.18,122.18,0,0,0,381,102.39a121.43,121.43,0,0,0,67,20.14Z"},child:[]}]})(r)}function l4(r){return lo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(r)}function em(r){return lo({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"},child:[]}]})(r)}function c4(r){return lo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(r)}const tm=({size:r=60,className:s=""})=>h.jsx("div",{className:`attendees-spinner ${s}`,style:{width:r,height:r},children:h.jsx("div",{className:"attendees-spinner-inner"})}),u4=r=>r?`data:image/jpeg;base64,${r}`:"/assets/fakeprofile.png",d4=["instagram","facebook","email","phone","website","tiktok","snapchat"],f4=r=>({instagram:{label:"Instagram",Icon:s4,color:"#E4405F",displayPrefix:"@"},facebook:{label:"Facebook",Icon:i4,color:"#1877F2",displayPrefix:"@"},email:{label:"Email",Icon:l4,color:"#4b7ef0",displayPrefix:""},phone:{label:"Phone",Icon:c4,color:"#25D366",displayPrefix:""},website:{label:"Website",Icon:em,color:"#4b7ef0",displayPrefix:""},tiktok:{label:"TikTok",Icon:a4,color:"#000000",displayPrefix:"@"},snapchat:{label:"Snapchat",Icon:o4,color:"#FFFC00",displayPrefix:"@"}})[r]||{label:r,Icon:em,color:"#4b7ef0",displayPrefix:""},h4=(r,s)=>{if(!s)return null;switch(r){case"instagram":return`https://instagram.com/${s}`;case"facebook":return`https://facebook.com/${s}`;case"tiktok":return`https://tiktok.com/@${s}`;case"snapchat":return`https://snapchat.com/add/${s}`;case"email":return`mailto:${s}`;case"phone":return`tel:${s.replace(/[^\d+]/g,"")}`;case"website":return s;default:return s}},p4=r=>!r||typeof r!="object"?!1:Object.values(r).some(s=>s&&typeof s=="string"&&s.trim()),zd=r=>[...r].sort((s,a)=>{var E,v,C,A;const u=s.lobby_date?new Date(s.lobby_date).getTime():0,p=a.lobby_date?new Date(a.lobby_date).getTime():0;if(u!==p)return p-u;const x=(((E=s.paired_with)==null?void 0:E.name)||((v=s.paired_with)==null?void 0:v.username)||"").toLowerCase(),w=(((C=a.paired_with)==null?void 0:C.name)||((A=a.paired_with)==null?void 0:A.username)||"").toLowerCase();return x<w?-1:x>w?1:0}),m4=(r,s)=>{var w;if(!r||r.length===0)return{hasNew:s.length>0,hasUpdated:!1};const a=new Set(r.map(E=>{var v;return(v=E.paired_with)==null?void 0:v.username})),u=s.some(E=>{var v;return((v=E.paired_with)==null?void 0:v.username)&&!a.has(E.paired_with.username)});let p=!1;const x=new Map(r.map(E=>{var v;return[(v=E.paired_with)==null?void 0:v.username,E]}));for(const E of s){const v=(w=E.paired_with)==null?void 0:w.username;if(!v)continue;const C=x.get(v);if(C&&JSON.stringify(C)!==JSON.stringify(E)){p=!0;break}}return{hasNew:u,hasUpdated:p}},g4=(r,s,a)=>{var x;if(!r||r.length===0)return s;const u=[...r],p=[];for(const w of s){const E=(x=w.paired_with)==null?void 0:x.username;if(!E)continue;const v=u.findIndex(C=>{var A;return((A=C.paired_with)==null?void 0:A.username)===E});v>=0?u[v]=w:p.push(w)}return[...p,...u]},Ec=(r,s)=>{var p;const a=(p=r.paired_with)==null?void 0:p.username;if(a)return a;const u=`${r.lobby_date||""}-${r.interaction_date||""}`;return u!=="-"?u:`interaction-${s}`},mc=(r,s)=>r.find((a,u)=>Ec(a,u)===s)||null,nm=async(r,s,a,u)=>{try{const p=await yt("/update-paired-interaction",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({lobby_id:r,paired_with_username:s,...a}),signal:u});if(!p.ok){const w=await p.text();throw new Error(w||`HTTP ${p.status}`)}return{success:!0,data:await p.json()}}catch(p){if(p.name==="AbortError")throw p;return{success:!1,error:p.message}}},x4=({rating:r,onRatingChange:s,interactionKey:a})=>{const u=r||0,p=x=>{s(x)};return h.jsxs("div",{className:"star-rating-container",children:[h.jsx("div",{className:"star-rating-question",children:"How was the chat?"}),h.jsx("div",{className:"star-rating-stars",children:[1,2,3,4,5].map(x=>h.jsx("button",{type:"button",className:`star-button ${x<=u?"star-filled":"star-empty"}`,onClick:()=>p(x),"aria-label":`Rate ${x} star${x!==1?"s":""}`,children:""},x))}),h.jsx("div",{className:"star-rating-disclaimer",children:"(Don't worry, your response is hidden)"})]})},y4=({value:r,onChange:s,interactionKey:a})=>{const u=p=>{s(p)};return h.jsxs("div",{className:"share-contact-container",children:[h.jsx("div",{className:"share-contact-question",children:"Share Your Contact?"}),h.jsxs("div",{className:"share-contact-buttons",children:[h.jsx("button",{type:"button",className:`share-contact-button ${r===!1?"selected":""}`,onClick:()=>u(!1),children:"No"}),h.jsx("button",{type:"button",className:`share-contact-button ${r===!0?"selected":""}`,onClick:()=>u(!0),children:"Yes"})]})]})},w4=()=>{const r=Rn(),{checkAuth:s,user:a,isAuthLoading:u}=N.useContext(Fn),[p,x]=N.useState([]),[w,E]=N.useState(!0),[v,C]=N.useState(!1),[A,I]=N.useState(!0),[R,O]=N.useState(0),[L,j]=N.useState(null),[B,W]=N.useState(!1),[z,F]=N.useState(new Map),[Y,K]=N.useState(new Map),ne=N.useRef(!1),q=N.useRef(!0),ie=N.useRef(null),J=N.useRef(null),we=N.useRef([]),Re=N.useRef(!1),Ae=N.useRef(new Map),Ee=N.useRef(new Map),Te=N.useRef(new Map),Z=N.useRef(new Map),ke=N.useRef(new Map),ve=N.useRef(new Map),ye=N.useCallback(G=>{const Ce=Ae.current.get(G);Ce&&(clearTimeout(Ce),Ae.current.delete(G));const ae=Ee.current.get(G);ae&&(ae.abort(),Ee.current.delete(G))},[]),De=N.useCallback(async(G,Ce,ae)=>{if(!ne.current){ne.current=!0;try{const se=await yt(`/paired-player-history?offset=${G}&limit=30`);if(!se.ok){if(se.status===401){q.current&&r("/");return}const Se=await se.text();throw new Error(`HTTP ${se.status}: ${Se}`)}const ee=await se.json();if(!q.current)return;if(ee.status!=="success"||!Array.isArray(ee.interactions))throw new Error("Invalid response format");const Me=zd(ee.interactions);if(ae){const Se=we.current,Le=m4(Se,Me),et=g4(Se,Me,!0);console.log("[PairedHistory] Poll update:",{count:Me.length,hasNew:Le.hasNew,hasUpdated:Le.hasUpdated});const Xe=zd(et);x(Xe),we.current=Xe,I(ee.has_more),O(ee.next_offset||0),(Le.hasNew||Le.hasUpdated)&&W(!0)}else Ce?(console.log("[PairedHistory] Initial load:",{count:Me.length}),x(Me),we.current=Me,I(ee.has_more),O(ee.next_offset||0),E(!1)):(x(Se=>{const Le=[...Se,...Me],et=zd(Le);return we.current=et,et}),I(ee.has_more),O(ee.next_offset||0),C(!1));j(null)}catch(se){if(console.error("[PairedHistory] Error:",{message:se.message,type:ae?"polling":Ce?"initial":"infinite-scroll"}),!q.current)return;j(se.message),In.error(`Error: ${se.message}`),Ce?E(!1):ae||C(!1)}finally{q.current&&(ne.current=!1)}}},[r]);N.useEffect(()=>{if(q.current=!0,!u){if(!a){r("/");return}if(!Re.current)return Re.current=!0,De(0,!0,!1),()=>{q.current=!1}}},[u,a,r,De]),N.useEffect(()=>{const G=()=>{document.hidden||ne.current||!q.current||De(0,!1,!0)};if(document.hidden)return;const Ce=setInterval(G,5e3),ae=()=>{};return document.addEventListener("visibilitychange",ae),()=>{clearInterval(Ce),document.removeEventListener("visibilitychange",ae)}},[De]),N.useEffect(()=>(B&&(ie.current&&clearTimeout(ie.current),ie.current=setTimeout(()=>{q.current&&W(!1)},4e3)),()=>{ie.current&&clearTimeout(ie.current)}),[B]),N.useEffect(()=>{if(!A||v||ne.current)return;const G=new IntersectionObserver(Ce=>{Ce[0].isIntersecting&&A&&!v&&!ne.current&&q.current&&(C(!0),De(R,!1,!1))},{root:null,rootMargin:"300px",threshold:.1});return J.current&&G.observe(J.current),()=>{G.disconnect()}},[A,v,R,De]),N.useEffect(()=>{we.current=p},[p]),N.useEffect(()=>{ke.current=z},[z]),N.useEffect(()=>{ve.current=Y},[Y]),N.useEffect(()=>{p.length!==0&&(F(G=>{const Ce=new Map(G);let ae=!1;return p.forEach((se,ee)=>{const Me=Ec(se,ee);if(!Ce.has(Me)){const Se=se.partner_star_rating;Se!==null&&Se>=1&&Se<=5&&(Ce.set(Me,Se),ae=!0)}}),ae?Ce:G}),K(G=>{const Ce=new Map(G);let ae=!1;return p.forEach((se,ee)=>{const Me=Ec(se,ee);if(!Ce.has(Me)){const Se=se.user_show_contact;Se!==null&&typeof Se=="boolean"&&(Ce.set(Me,Se),ae=!0)}}),ae?Ce:G}))},[p]);const be=N.useCallback((G,Ce)=>{var Me;const ae=mc(we.current,G);if(!(ae!=null&&ae.lobby_id)||!((Me=ae.paired_with)!=null&&Me.username)){In.error("Unable to save: interaction not found");return}let se=Te.current.get(G);if(se===void 0){const Se=ke.current.get(G),Le=ae.partner_star_rating;se=Se??(Le!==null&&Le>=1&&Le<=5?Le:null),Te.current.set(G,se)}ye(G),F(Se=>{const Le=new Map(Se);return Le.set(G,Ce),ke.current=Le,Le});const ee=setTimeout(async()=>{var de;if(!q.current)return;const Se=mc(we.current,G);if(!(Se!=null&&Se.lobby_id)||!((de=Se.paired_with)!=null&&de.username)){if(!q.current)return;F(xe=>{const Ze=new Map(xe);return se!=null?Ze.set(G,se):Ze.delete(G),ke.current=Ze,Ze}),Te.current.delete(G),In.error("Unable to save: interaction not found");return}const Le=new AbortController;Ee.current.set(G,Le);const et=Se.paired_with.username,Xe=Se.lobby_id;console.log("[PairedHistory] Updating rating:",{partner_username:et,lobby_id:Xe,rating:Ce,previous_rating:se});try{const xe=await nm(Xe,et,{partner_star_rating:Ce},Le.signal);if(!q.current)return;Ee.current.delete(G),xe.success?(Te.current.delete(G),console.log("[PairedHistory] Rating update successful:",{partner_username:et,lobby_id:Xe,rating:Ce,response:xe.data}),In.success("Saved",{duration:1e3,style:{background:"#144dff",color:"white",borderRadius:"8px",padding:"12px 20px",fontSize:"0.9rem",fontWeight:"500"}})):(console.error("[PairedHistory] Rating update failed:",{partner_username:et,lobby_id:Xe,rating:Ce,error:xe.error}),F(Ze=>{const $e=new Map(Ze);return se!=null?$e.set(G,se):$e.delete(G),ke.current=$e,$e}),Te.current.delete(G),In.error(xe.error||"Failed to save. Please try again."))}catch(xe){if(!q.current)return;if(Ee.current.delete(G),xe.name==="AbortError"){console.log("[PairedHistory] Rating update aborted:",{partner_username:et,lobby_id:Xe});return}console.error("[PairedHistory] Rating update error:",{partner_username:et,lobby_id:Xe,rating:Ce,error:xe.message}),F(Ze=>{const $e=new Map(Ze);return se!=null?$e.set(G,se):$e.delete(G),ke.current=$e,$e}),Te.current.delete(G),In.error(xe.message||"Failed to save. Please try again.")}},500);Ae.current.set(G,ee)},[ye]),X=N.useCallback((G,Ce)=>{var Me;const ae=mc(we.current,G);if(!(ae!=null&&ae.lobby_id)||!((Me=ae.paired_with)!=null&&Me.username)){In.error("Unable to save: interaction not found");return}let se=Z.current.get(G);if(se===void 0){const Se=ve.current.get(G),Le=ae.user_show_contact;se=Se??(Le!==null&&typeof Le=="boolean"?Le:null),Z.current.set(G,se)}ye(G),K(Se=>{const Le=new Map(Se);return Le.set(G,Ce),ve.current=Le,Le});const ee=setTimeout(async()=>{var de;if(!q.current)return;const Se=mc(we.current,G);if(!(Se!=null&&Se.lobby_id)||!((de=Se.paired_with)!=null&&de.username)){if(!q.current)return;K(xe=>{const Ze=new Map(xe);return se!=null?Ze.set(G,se):Ze.delete(G),ve.current=Ze,Ze}),Z.current.delete(G),In.error("Unable to save: interaction not found");return}const Le=new AbortController;Ee.current.set(G,Le);const et=Se.paired_with.username,Xe=Se.lobby_id;console.log("[PairedHistory] Updating share contact:",{partner_username:et,lobby_id:Xe,user_show_contact:Ce,previous_value:se});try{const xe=await nm(Xe,et,{user_show_contact:Ce},Le.signal);if(!q.current)return;Ee.current.delete(G),xe.success?(Z.current.delete(G),console.log("[PairedHistory] Share contact update successful:",{partner_username:et,lobby_id:Xe,user_show_contact:Ce,response:xe.data}),In.success("Saved",{duration:1e3,style:{background:"#144dff",color:"white",borderRadius:"8px",padding:"12px 20px",fontSize:"0.9rem",fontWeight:"500"}})):(console.error("[PairedHistory] Share contact update failed:",{partner_username:et,lobby_id:Xe,user_show_contact:Ce,error:xe.error}),K(Ze=>{const $e=new Map(Ze);return se!=null?$e.set(G,se):$e.delete(G),ve.current=$e,$e}),Z.current.delete(G),In.error(xe.error||"Failed to save. Please try again."))}catch(xe){if(!q.current)return;if(Ee.current.delete(G),xe.name==="AbortError"){console.log("[PairedHistory] Share contact update aborted:",{partner_username:et,lobby_id:Xe});return}console.error("[PairedHistory] Share contact update error:",{partner_username:et,lobby_id:Xe,user_show_contact:Ce,error:xe.message}),K(Ze=>{const $e=new Map(Ze);return se!=null?$e.set(G,se):$e.delete(G),ve.current=$e,$e}),Z.current.delete(G),In.error(xe.message||"Failed to save. Please try again.")}},300);Ae.current.set(G,ee)},[ye]);return N.useEffect(()=>()=>{q.current=!1,ie.current&&clearTimeout(ie.current),Ee.current.forEach(G=>{G.abort()}),Ae.current.forEach(G=>{clearTimeout(G)}),Ae.current.clear(),Ee.current.clear(),Te.current.clear(),Z.current.clear()},[]),u?h.jsx(rl,{fullScreen:!0}):h.jsxs("div",{className:"paired-player-history-container",children:[h.jsx(Ua,{position:"top-center"}),h.jsx("button",{onClick:()=>r("/"),className:"homescreen-button",children:"Home"}),h.jsx("button",{onClick:()=>r("/post-event-auth"),className:"update-profile-button",children:"Update Profile"}),B&&h.jsx("div",{className:"new-info-indicator",children:"New Notifications"}),h.jsxs("div",{className:"paired-player-history-content",children:[h.jsx("h1",{className:"paired-player-history-title",children:"View Your Matches"}),w&&h.jsx("div",{className:"loading-grid",children:Array.from({length:30}).map((G,Ce)=>h.jsx(tm,{size:60},Ce))}),!w&&p.length===0&&h.jsx("div",{className:"empty-state",children:h.jsx("p",{children:"No Past History Available"})}),!w&&p.length>0&&h.jsxs("div",{className:"interactions-list",children:[p.map((G,Ce)=>{const ae=G.paired_with||{},se=u4(ae.image_data),ee=Ec(G,Ce),Me=z.get(ee)??(G.partner_star_rating!==null&&G.partner_star_rating>=1&&G.partner_star_rating<=5?G.partner_star_rating:null),Se=Y.has(ee)?Y.get(ee):G.user_show_contact!==null&&typeof G.user_show_contact=="boolean"?G.user_show_contact:null,Le=G.partner_show_contact===!0,et=Le&&p4(ae.social_links),Xe=Le&&ae.contact_url&&!et;return h.jsxs("div",{className:"interaction-card",children:[h.jsxs("div",{className:"interaction-card-main",children:[h.jsxs("div",{className:"interaction-card-left",children:[h.jsx("div",{className:"interaction-card-image",children:h.jsx("img",{src:se,alt:ae.name||"Partner",onError:de=>{de.target.src="/assets/fakeprofile.png"}})}),h.jsx("div",{className:"interaction-card-name",children:ae.name||ae.username||"Unknown"})]}),h.jsxs("div",{className:"interaction-card-right",children:[h.jsx(x4,{rating:Me,onRatingChange:de=>be(ee,de),interactionKey:ee}),h.jsx(y4,{value:Se,onChange:de=>X(ee,de),interactionKey:ee})]})]}),(et||Xe)&&h.jsxs("div",{className:"contact-info-section",children:[h.jsx("div",{className:"social-links-header",children:ae.name?`${ae.name}'s contact info`:"Contact info"}),et&&h.jsx("div",{className:"social-links-display",children:d4.map(de=>{var jt;const xe=(jt=ae.social_links)==null?void 0:jt[de];if(!xe||!xe.trim())return null;const{label:Ze,Icon:$e,color:Tt,displayPrefix:it}=f4(de),qe=h4(de,xe),tt=it+xe;return h.jsxs("a",{href:qe,target:"_blank",rel:"noopener noreferrer",className:"social-link-item",title:Ze,children:[h.jsx("span",{className:"social-link-icon",children:h.jsx($e,{size:16,color:Tt})}),h.jsx("span",{className:"social-link-value",children:tt})]},de)})}),Xe&&h.jsxs("div",{className:"interaction-card-contact-row",children:[h.jsx("img",{src:"/assets/contact_url_asset.png",alt:"Contact",className:"contact-url-icon"}),h.jsx("a",{href:ae.contact_url,target:"_blank",rel:"noopener noreferrer",className:"contact-url-link",title:ae.contact_url,children:ae.contact_url})]})]})]},ee)}),A&&h.jsx("div",{ref:J,"data-sentinel":"true",className:"infinite-scroll-sentinel",children:v&&h.jsx(tm,{size:40})}),!A&&h.jsx("div",{className:"no-more-interactions",children:"No more interactions"})]})]})]})},v4=!0,C4=()=>{const r=Rn(),{checkAuth:s,user:a,isAuthLoading:u}=N.useContext(Fn),[p,x]=N.useState(""),[w,E]=N.useState(""),[v,C]=N.useState(""),[A,I]=N.useState(""),[R,O]=N.useState(""),[L,j]=N.useState(""),[B,W]=N.useState(""),[z,F]=N.useState(""),[Y,K]=N.useState(""),[ne,q]=N.useState(!1),[ie,J]=N.useState(!0),[we,Re]=N.useState(!1),[Ae,Ee]=N.useState(""),[Te,Z]=N.useState(!1),[ke,ve]=N.useState(!1),[ye,De]=N.useState(!1),[be,X]=N.useState(!1),[G,Ce]=N.useState(!1),[ae,se]=N.useState(!1),[ee,Me]=N.useState(!1),[Se,Le]=N.useState(!1),[et,Xe]=N.useState(""),de=N.useRef(null);N.useEffect(()=>{const ct=new URLSearchParams(window.location.search).get("error");if(ct){const wt={claim_expired:"Your verification link has expired. Please try again.",claim_invalid:"Invalid verification link. Please try again.",claim_failed:"Account linking failed. Please try again.",claim_blocked:"This account is an organizer account and cannot be linked this way. Please contact support."}[ct]||"An error occurred. Please try again.";Ee(wt),window.history.replaceState({},"","/post-event-auth")}},[]),N.useEffect(()=>{if(u)return;if(!a){r("/login");return}(async()=>{var ct,Je;try{const wt=await yt("/load_user");if(wt.status===401){r("/login");return}if(!wt.ok)throw new Error("Failed to load user data");const Bt=await wt.json();x(((ct=Bt.profile)==null?void 0:ct.name)||""),E(Bt.email||"");const Xt=((Je=Bt.profile)==null?void 0:Je.social_links)||{};C(Xt.instagram||""),I(Xt.facebook||""),O(Xt.email||""),j(Xt.phone||""),W(Xt.website||""),F(Xt.tiktok||""),K(Xt.snapchat||""),q(Bt.email_verified===!0)}catch(wt){console.error("Error fetching user data:",wt),Ee("Failed to load user data. Please try again.")}finally{J(!1)}})()},[u,a,r]),N.useEffect(()=>{if(G){const Ue=setTimeout(()=>{Ce(!1)},4e3);return()=>clearTimeout(Ue)}},[G]);const xe=()=>{!ne&&!ke&&(ve(!0),Ce(!0))},Ze=Ue=>{C(Ue.target.value.replace(/@/g,""))},$e=Ue=>{I(Ue.target.value.replace(/@/g,""))},Tt=Ue=>{F(Ue.target.value.replace(/@/g,""))},it=Ue=>{K(Ue.target.value.replace(/@/g,""))},qe=()=>{const Ue={};if(v.trim()&&(Ue.instagram=v.trim()),A.trim()&&(Ue.facebook=A.trim()),R.trim()&&(Ue.email=R.trim()),L.trim()&&(Ue.phone=L.trim()),B.trim()){let ct=B.trim();ct&&!ct.match(/^https?:\/\//i)&&(ct="https://"+ct),Ue.website=ct}return z.trim()&&(Ue.tiktok=z.trim()),Y.trim()&&(Ue.snapchat=Y.trim()),Object.keys(Ue).length>0?Ue:null},tt=()=>!!(v.trim()||A.trim()||R.trim()||L.trim()||B.trim()||z.trim()||Y.trim()),jt=async()=>{var Ue;Re(!0),Ee("");try{const ct={name:p||"",social_links:qe()};ne||(ct.email=w||"");const Je=await yt("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ct)});if(Je.status===401){r("/login");return}if(!Je.ok){const wt=await Je.json();throw new Error(wt.detail||wt.message||"Failed to update profile")}if(v4&&!ne)try{const Bt=await(await yt("/auth/send-magic-link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w.trim()})})).json();Bt.success?(Z(!0),In.success("Check your email for the magic link!",{duration:4e3})):(console.error("Magic link failed:",Bt.error),In.success("Profile saved! (Email verification unavailable)",{duration:3e3}),await s(),setTimeout(()=>r("/paired-player-history"),1500))}catch(wt){console.error("Magic link request error:",wt),In.success("Profile saved!",{duration:2e3}),await s(),setTimeout(()=>r("/paired-player-history"),1500)}else In.success("Profile saved! Redirecting to your matches...",{duration:2e3}),await s(),setTimeout(()=>r("/paired-player-history"),1500)}catch(ct){console.error("Error updating profile:",ct),(Ue=ct.message)!=null&&Ue.toLowerCase().includes("already associated with another account")?(se(!0),Ee("")):Ee(ct.message||"An error occurred. Please try again.")}finally{Re(!1)}},ze=async()=>{Le(!0),Xe("");try{const ct=await(await yt("/auth/claim-existing-account",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w.trim()})})).json();ct.success?(se(!1),Me(!0),In.success("Verification email sent!",{duration:4e3})):Xe(ct.error||"Failed to send verification email. Please try again.")}catch(Ue){console.error("Error sending claim email:",Ue),Xe("Network error. Please try again.")}finally{Le(!1)}},gn=()=>{se(!1),Xe(""),setTimeout(()=>{var Ue;(Ue=de.current)==null||Ue.focus()},100)},rr=()=>{X(!1),jt()},Ge=()=>{X(!1),setTimeout(()=>{var Ue;(Ue=de.current)==null||Ue.focus()},100)},It=async Ue=>{if(Ue.preventDefault(),Ee(""),!w||!w.trim()){Ee("Email is required to access your matches."),window.scrollTo({top:0,behavior:"smooth"});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w.trim())){Ee("Please enter a valid email address."),window.scrollTo({top:0,behavior:"smooth"});return}if(!tt()){Ee("Please provide at least one way to contact you."),window.scrollTo({top:0,behavior:"smooth"});return}if(!ne&&!ye){De(!0),X(!0);return}jt()};return u||ie?h.jsx(rl,{fullScreen:!0}):Te?h.jsxs("div",{className:"post-event-auth-container",children:[h.jsx(Ua,{position:"top-center"}),h.jsxs("div",{className:"step-form-container",style:{textAlign:"center",padding:"40px 28px"},children:[h.jsx("div",{style:{fontSize:"56px",marginBottom:"24px"},children:""}),h.jsx("h2",{style:{color:"#1a1a2e",marginBottom:"12px",fontSize:"1.4rem",fontWeight:"700",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:"Check Your Email!"}),h.jsx("p",{style:{color:"#1a1a2e",marginBottom:"20px",lineHeight:"1.6",fontSize:"0.95rem",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:"We sent a magic link to"}),h.jsx("div",{style:{background:"#f9fafb",border:"1.5px solid #e5e7eb",borderRadius:"12px",padding:"14px 18px",marginBottom:"20px",fontWeight:"600",color:"#1a1a2e",wordBreak:"break-all",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:w}),h.jsx("p",{style:{color:"#1a1a2e",marginBottom:"24px",lineHeight:"1.6",fontSize:"0.95rem",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:"Click the link in your email to access your matches."}),h.jsxs("p",{style:{color:"#6b7280",fontSize:"0.85rem",marginBottom:"28px",lineHeight:"1.5",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:["The link expires in 15 minutes.",h.jsx("br",{}),"Don't see it? Check your spam folder."]}),h.jsx("button",{onClick:()=>Z(!1),className:"primary-button",children:" Back to Form"})]})]}):ee?h.jsxs("div",{className:"post-event-auth-container",children:[h.jsx(Ua,{position:"top-center"}),h.jsxs("div",{className:"step-form-container",style:{textAlign:"center",padding:"40px 28px"},children:[h.jsx("div",{style:{fontSize:"56px",marginBottom:"24px"},children:""}),h.jsx("h2",{style:{color:"#1a1a2e",marginBottom:"12px",fontSize:"1.4rem",fontWeight:"700",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:"Check Your Email!"}),h.jsx("p",{style:{color:"#1a1a2e",marginBottom:"20px",lineHeight:"1.6",fontSize:"0.95rem",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:"We sent a verification link to"}),h.jsx("div",{style:{background:"#f9fafb",border:"1.5px solid #e5e7eb",borderRadius:"12px",padding:"14px 18px",marginBottom:"20px",fontWeight:"600",color:"#1a1a2e",wordBreak:"break-all",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:w}),h.jsx("p",{style:{color:"#1a1a2e",marginBottom:"24px",lineHeight:"1.6",fontSize:"0.95rem",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:"Click the link to link your matches to your existing account."}),h.jsxs("p",{style:{color:"#6b7280",fontSize:"0.85rem",marginBottom:"28px",lineHeight:"1.5",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:["The link expires in 24 hours.",h.jsx("br",{}),"Don't see it? Check your spam folder."]}),h.jsx("button",{onClick:()=>Me(!1),className:"primary-button",children:" Back to Form"})]})]}):h.jsxs("div",{className:"post-event-auth-container",children:[h.jsx(Ua,{position:"top-center",toastOptions:{style:{background:"#1a1a2e",color:"white",borderRadius:"12px",padding:"12px 20px",fontSize:"0.9rem",fontWeight:"500",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},success:{iconTheme:{primary:"#10b981",secondary:"white"}},error:{iconTheme:{primary:"#ef4444",secondary:"white"}}}}),h.jsx("button",{onClick:()=>r("/"),className:"homescreen-button",children:"Home"}),h.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:"8px",marginBottom:"0"},children:h.jsx("img",{src:"/assets/reuneo_test_11.png",alt:"Reuneo Logo",style:{maxWidth:"100px",height:"auto",objectFit:"contain"}})}),h.jsx("h3",{className:"post-event-auth-header",style:{marginTop:"12px"},children:"Access Your Matches"}),h.jsx("div",{className:"step-form-container",children:h.jsxs("form",{onSubmit:It,children:[Ae&&h.jsx("div",{className:"error-message",style:{marginBottom:"20px"},children:Ae}),h.jsxs("div",{style:{marginTop:"0"},children:[h.jsx("label",{className:"step-label",children:"Name"}),h.jsx("input",{type:"text",value:p,onChange:Ue=>x(Ue.target.value),placeholder:"Enter your name",className:"step-input"})]}),h.jsxs("div",{style:{marginTop:"20px",position:"relative"},children:[h.jsxs("label",{className:"step-label",children:["Email ",h.jsx("span",{style:{color:"#ef4444"},children:"*"}),ne&&h.jsx("span",{style:{color:"#10b981",fontSize:"0.75rem",marginLeft:"8px",fontWeight:"600",background:"rgba(16, 185, 129, 0.1)",padding:"2px 8px",borderRadius:"6px"},children:" Verified"})]}),G&&h.jsxs("div",{className:"email-warning-toast",children:[h.jsx("span",{className:"email-warning-icon",children:""}),h.jsx("span",{className:"email-warning-text",children:"Make sure the email is correct"})]}),h.jsx("input",{ref:de,type:"email",value:w,onChange:Ue=>E(Ue.target.value),onFocus:xe,placeholder:"Enter your email",className:"step-input",required:!0,disabled:ne,style:ne?{backgroundColor:"#f3f4f6",color:"#9ca3af",cursor:"not-allowed",borderColor:"#e5e7eb"}:{}})]}),h.jsxs("div",{className:"social-links-section",children:[h.jsxs("div",{className:"social-links-header",children:[h.jsx("span",{className:"social-links-title",children:"Share Your Contact Info"}),h.jsx("span",{className:"social-links-subtitle",children:"(At least one required)"})]}),h.jsxs("div",{className:"social-link-field",children:[h.jsx("label",{className:"step-label",children:"Instagram"}),h.jsx("input",{type:"text",value:v,onChange:Ze,placeholder:"@username",className:"step-input"})]}),h.jsxs("div",{className:"social-link-field",children:[h.jsx("label",{className:"step-label",children:"Facebook"}),h.jsx("input",{type:"text",value:A,onChange:$e,placeholder:"@username",className:"step-input"})]}),h.jsxs("div",{className:"social-link-field",children:[h.jsx("label",{className:"step-label",children:"Personal Email"}),h.jsx("input",{type:"email",value:R,onChange:Ue=>O(Ue.target.value),placeholder:"you@example.com",className:"step-input"}),h.jsx("span",{className:"social-link-helper",children:"Separate email for people to reach you"})]}),h.jsxs("div",{className:"social-link-field",children:[h.jsx("label",{className:"step-label",children:"Phone"}),h.jsx("input",{type:"tel",value:L,onChange:Ue=>j(Ue.target.value),placeholder:"+1 (555) 123-4567",className:"step-input"})]}),h.jsxs("div",{className:"social-link-field",children:[h.jsx("label",{className:"step-label",children:"Website"}),h.jsx("input",{type:"text",value:B,onChange:Ue=>W(Ue.target.value),placeholder:"https://yourwebsite.com",className:"step-input"})]}),h.jsxs("div",{className:"social-link-field",children:[h.jsx("label",{className:"step-label",children:"TikTok"}),h.jsx("input",{type:"text",value:z,onChange:Tt,placeholder:"@username",className:"step-input"})]}),h.jsxs("div",{className:"social-link-field",children:[h.jsx("label",{className:"step-label",children:"Snapchat"}),h.jsx("input",{type:"text",value:Y,onChange:it,placeholder:"@username",className:"step-input"})]})]}),h.jsx("button",{type:"submit",className:"primary-button",disabled:we,style:{marginTop:"30px"},children:we?ne?"Updating...":"Submitting...":ne?"Update":"Submit"})]})}),be&&h.jsx("div",{className:"email-confirm-modal-overlay",children:h.jsxs("div",{className:"email-confirm-modal",children:[h.jsx("div",{className:"email-confirm-modal-icon",children:""}),h.jsx("h3",{className:"email-confirm-modal-title",children:"Is this email correct?"}),h.jsx("p",{className:"email-confirm-modal-subtitle",children:"Make sure its right"}),h.jsx("div",{className:"email-confirm-modal-email",children:w}),h.jsxs("div",{className:"email-confirm-modal-buttons",children:[h.jsx("button",{className:"email-confirm-btn email-confirm-btn-yes",onClick:rr,children:"Yes, it's correct"}),h.jsx("button",{className:"email-confirm-btn email-confirm-btn-no",onClick:Ge,children:"Let me edit"})]})]})}),ae&&h.jsx("div",{className:"email-confirm-modal-overlay",children:h.jsxs("div",{className:"email-confirm-modal",children:[h.jsx("div",{className:"email-confirm-modal-icon",children:""}),h.jsx("h3",{className:"email-confirm-modal-title",children:"This email is already registered"}),h.jsx("p",{className:"email-confirm-modal-subtitle",children:"To link your matches to your existing account, we'll send a verification email to:"}),h.jsx("div",{className:"email-confirm-modal-email",children:w}),et&&h.jsx("div",{style:{color:"#b91c1c",fontSize:"0.85rem",marginBottom:"16px",padding:"10px 14px",backgroundColor:"rgba(185, 28, 28, 0.08)",borderRadius:"10px",fontWeight:"500",textAlign:"left",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:et}),h.jsxs("div",{className:"email-confirm-modal-buttons",children:[h.jsx("button",{className:"email-confirm-btn email-confirm-btn-yes",onClick:ze,disabled:Se,children:Se?"Sending...":"Send Verification Email"}),h.jsx("button",{className:"email-confirm-btn email-confirm-btn-no",onClick:gn,disabled:Se,children:"Use Different Email"})]})]})})]})},b4=()=>{const r=Rn(),{checkAuth:s}=N.useContext(Fn),[a,u]=N.useState("verifying"),[p,x]=N.useState("");return N.useEffect(()=>{(async()=>{try{const E=await yt("/auth/session",{method:"GET"});E.ok?(await E.json()).authenticated?(u("success"),await s(),setTimeout(()=>{r("/")},2e3)):(u("error"),x("Session not found. Please try logging in again.")):(u("error"),x("Could not verify your session. Please try again."))}catch(E){console.error("Session verification error:",E),u("error"),x("Network error. Please check your connection and try again.")}})()},[s,r]),h.jsx("div",{className:"auth-success-container",children:h.jsxs("div",{className:"auth-success-card",children:[a==="verifying"&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"auth-success-spinner"}),h.jsx("h2",{children:"Signing you in..."}),h.jsx("p",{children:"Please wait while we verify your session."})]}),a==="success"&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"auth-success-checkmark",children:""}),h.jsx("h2",{children:"Welcome to Reuneo!"}),h.jsx("p",{children:"You're now signed in. Redirecting you..."})]}),a==="error"&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"auth-success-error",children:""}),h.jsx("h2",{children:"Something went wrong"}),h.jsx("p",{children:p}),h.jsx("button",{className:"auth-success-button",onClick:()=>r("/login"),children:"Back to Login"})]})]})})},E4=()=>{const r=Rn(),[s]=vm(),{checkAuth:a}=N.useContext(Fn),[u,p]=N.useState(""),[x,w]=N.useState(""),[E,v]=N.useState(""),[C,A]=N.useState(!0),[I,R]=N.useState(!1),[O,L]=N.useState(""),[j,B]=N.useState(""),W=s.get("token");N.useEffect(()=>{(async()=>{if(!W){B("No token provided. Please request a new magic link."),A(!1);return}try{const K=await(await fetch(`${window.server_url}/auth/verify-setup-token?token=${encodeURIComponent(W)}`,{credentials:"include"})).json();K.valid&&K.email?p(K.email):B(K.error||"Invalid or expired token. Please request a new magic link.")}catch(Y){console.error("Token validation error:",Y),B("Unable to validate token. Please try again.")}finally{A(!1)}})()},[W]);const z=async F=>{if(F.preventDefault(),L(""),!x){L("Password is required");return}if(x.length<2){L("Password must be at least 2 characters");return}if(x!==E){L("Passwords do not match");return}R(!0);try{const K=await(await yt("/auth/set-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:W,password:x})})).json();K.success?(await a(),r("/paired-player-history")):L(K.error||"Failed to set password. Please try again.")}catch(Y){console.error("Set password error:",Y),L("An error occurred. Please try again.")}finally{R(!1)}};return C?h.jsx(rl,{fullScreen:!0,message:"Verifying..."}):j?h.jsxs("div",{className:"set-password-container",children:[h.jsx("button",{onClick:()=>r("/"),className:"homescreen-button",children:"Home"}),h.jsxs("div",{className:"set-password-error-container",children:[h.jsx("div",{className:"error-icon",children:""}),h.jsx("h2",{className:"error-title",children:"Link Expired or Invalid"}),h.jsx("p",{className:"error-description",children:j}),h.jsx("button",{onClick:()=>r("/login"),className:"primary-button",style:{marginTop:"20px"},children:"Go to Login"})]})]}):h.jsxs("div",{className:"set-password-container",children:[h.jsx("button",{onClick:()=>r("/"),className:"homescreen-button",children:"Home"}),h.jsx("h3",{className:"set-password-header",children:"Set Your Password"}),h.jsx("p",{className:"set-password-subtitle",children:"You'll use this to log in later"}),h.jsx("div",{className:"step-form-container",children:h.jsxs("form",{onSubmit:z,children:[O&&h.jsx("div",{className:"error-message",children:O}),h.jsxs("div",{style:{marginTop:"0"},children:[h.jsx("label",{className:"step-label",children:"Email"}),h.jsxs("div",{className:"email-display",children:[h.jsx("input",{type:"email",value:u,className:"step-input email-locked",disabled:!0,readOnly:!0}),h.jsx("span",{className:"lock-icon",children:""})]}),h.jsx("p",{className:"email-hint",children:"This is the email you verified"})]}),h.jsxs("div",{style:{marginTop:"24px"},children:[h.jsx("label",{className:"step-label",children:"Create Password"}),h.jsx("input",{type:"password",value:x,onChange:F=>w(F.target.value),placeholder:"Enter a password",className:"step-input",autoFocus:!0,autoComplete:"new-password"})]}),h.jsxs("div",{style:{marginTop:"16px"},children:[h.jsx("label",{className:"step-label",children:"Confirm Password"}),h.jsx("input",{type:"password",value:E,onChange:F=>v(F.target.value),placeholder:"Confirm your password",className:"step-input",autoComplete:"new-password"})]}),h.jsx("button",{type:"submit",className:"primary-button",disabled:I||!x,style:{marginTop:"30px"},children:I?"Setting Password...":"Set Password"})]})})]})},S4=()=>{const r=Rn(),[s,a]=N.useState(""),[u,p]=N.useState(!1),[x,w]=N.useState(!1),[E,v]=N.useState(!1),[C,A]=N.useState(!1),[I,R]=N.useState(""),O=W=>{const z=W.target.value.toLowerCase();a(z),R(""),!E&&z.length>0&&(v(!0),setTimeout(()=>A(!0),300),setTimeout(()=>A(!1),4300))},L=W=>W&&W.includes("@")&&W.includes("."),j=async W=>{if(W.preventDefault(),R(""),!L(s)){R("Please enter a valid email address");return}p(!0);try{const F=await(await yt("/auth/request-password-reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s.trim()})})).json();F.success?w(!0):R(F.error||"Something went wrong. Please try again.")}catch(z){console.error("Password reset request error:",z),R("Network error. Please check your connection and try again.")}finally{p(!1)}},B=()=>{w(!1),a(""),v(!1)};return h.jsxs("div",{className:"forgot-password-container",children:[h.jsx("button",{onClick:()=>r("/"),className:"homescreen-button",children:"Home"}),h.jsx("h3",{className:"forgot-password-header",children:"Reset Your Password"}),h.jsx("p",{className:"forgot-password-subtitle",children:"Enter your email and we'll send you a reset link"}),h.jsxs("div",{className:"step-form-container",children:[h.jsxs("form",{onSubmit:j,children:[I&&h.jsx("div",{className:"error-message",children:I}),h.jsxs("div",{style:{marginTop:"0"},children:[h.jsx("label",{className:"step-label",children:"Email Address"}),h.jsx("input",{type:"email",value:s,onChange:O,placeholder:"Enter your email",className:"step-input",autoFocus:!0,autoComplete:"email"})]}),h.jsx("button",{type:"submit",className:"primary-button",disabled:u||!s,style:{marginTop:"30px"},children:u?"Sending...":"Send Reset Link"})]}),h.jsx("button",{type:"button",onClick:()=>r("/login"),className:"back-to-login-link",children:"Back to Login"})]}),h.jsx(jr,{children:C&&h.jsx(Nt.div,{className:"email-toast",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.3},children:"Double-check your email address is correct before submitting."})}),h.jsx(jr,{children:x&&h.jsx(Nt.div,{className:"reset-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:B,children:h.jsxs(Nt.div,{className:"reset-modal-content",initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},transition:{type:"spring",stiffness:400,damping:25},onClick:W=>W.stopPropagation(),children:[h.jsx("h2",{className:"reset-modal-header",children:" Check Your Inbox"}),h.jsx("p",{className:"reset-modal-subtext",children:"If an account exists with this email, we've sent a password reset link. Check your inbox and spam folder."}),h.jsx("button",{type:"button",className:"reset-modal-button",onClick:B,children:"Got it"})]})})})]})};v2.createRoot(document.getElementById("root")).render(h.jsx(N.StrictMode,{children:h.jsx(C2,{children:h.jsxs(ow,{basename:"/",children:[h.jsx(fE,{}),h.jsx(hE,{}),h.jsxs(Dy,{children:[h.jsx(Zn,{path:"/",element:h.jsx(dE,{})}),h.jsx(Zn,{path:"/login",element:h.jsx(pE,{})}),h.jsx(Zn,{path:"/signup",element:h.jsx(nE,{})}),h.jsx(Zn,{path:"/logout",element:h.jsx(mE,{})}),h.jsx(Zn,{path:"/lobby",element:h.jsx(HE,{})}),h.jsx(Zn,{path:"/admin_lobby_view",element:h.jsx(BS,{})}),h.jsx(Zn,{path:"/create_lobby",element:h.jsx(VS,{})}),h.jsx(Zn,{path:"/product-selection",element:h.jsx(FS,{})}),h.jsx(Zn,{path:"/organizer-signup",element:h.jsx(US,{})}),h.jsx(Zn,{path:"/organizer-signup-success",element:h.jsx(WS,{})}),h.jsx(Zn,{path:"/organizer-account-details",element:h.jsx(HS,{})}),h.jsx(Zn,{path:"/organizer-dashboard",element:h.jsx(ZS,{})}),h.jsx(Zn,{path:"/master_lobby_view",element:h.jsx(KS,{})}),h.jsx(Zn,{path:"/paired-player-history",element:h.jsx(w4,{})}),h.jsx(Zn,{path:"/post-event-auth",element:h.jsx(C4,{})}),h.jsx(Zn,{path:"/set-password",element:h.jsx(E4,{})}),h.jsx(Zn,{path:"/forgot-password",element:h.jsx(S4,{})}),h.jsx(Zn,{path:"/auth/success",element:h.jsx(b4,{})})]})]})})}));
