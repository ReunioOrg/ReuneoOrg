(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))d(p);new MutationObserver(p=>{for(const x of p)if(x.type==="childList")for(const y of x.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&d(y)}).observe(document,{childList:!0,subtree:!0});function a(p){const x={};return p.integrity&&(x.integrity=p.integrity),p.referrerPolicy&&(x.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?x.credentials="include":p.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function d(p){if(p.ep)return;p.ep=!0;const x=a(p);fetch(p.href,x)}})();var Ql=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bp(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ef={exports:{}},Ea={},tf={exports:{}},It={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U0;function Ux(){if(U0)return It;U0=1;var r=Symbol.for("react.element"),o=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),y=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),I=Symbol.iterator;function _(X){return X===null||typeof X!="object"?null:(X=I&&X[I]||X["@@iterator"],typeof X=="function"?X:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,B={};function F(X,te,Ae){this.props=X,this.context=te,this.refs=B,this.updater=Ae||D}F.prototype.isReactComponent={},F.prototype.setState=function(X,te){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,te,"setState")},F.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function V(){}V.prototype=F.prototype;function W(X,te,Ae){this.props=X,this.context=te,this.refs=B,this.updater=Ae||D}var z=W.prototype=new V;z.constructor=W,L(z,F.prototype),z.isPureReactComponent=!0;var Q=Array.isArray,ie=Object.prototype.hasOwnProperty,ue={current:null},q={key:!0,ref:!0,__self:!0,__source:!0};function ce(X,te,Ae){var ze,Se={},de=null,We=null;if(te!=null)for(ze in te.ref!==void 0&&(We=te.ref),te.key!==void 0&&(de=""+te.key),te)ie.call(te,ze)&&!q.hasOwnProperty(ze)&&(Se[ze]=te[ze]);var Fe=arguments.length-2;if(Fe===1)Se.children=Ae;else if(1<Fe){for(var tt=Array(Fe),ge=0;ge<Fe;ge++)tt[ge]=arguments[ge+2];Se.children=tt}if(X&&X.defaultProps)for(ze in Fe=X.defaultProps,Fe)Se[ze]===void 0&&(Se[ze]=Fe[ze]);return{$$typeof:r,type:X,key:de,ref:We,props:Se,_owner:ue.current}}function $(X,te){return{$$typeof:r,type:X.type,key:te,ref:X.ref,props:X.props,_owner:X._owner}}function Ne(X){return typeof X=="object"&&X!==null&&X.$$typeof===r}function Pe(X){var te={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(Ae){return te[Ae]})}var ke=/\/+/g;function Re(X,te){return typeof X=="object"&&X!==null&&X.key!=null?Pe(""+X.key):te.toString(36)}function Ve(X,te,Ae,ze,Se){var de=typeof X;(de==="undefined"||de==="boolean")&&(X=null);var We=!1;if(X===null)We=!0;else switch(de){case"string":case"number":We=!0;break;case"object":switch(X.$$typeof){case r:case o:We=!0}}if(We)return We=X,Se=Se(We),X=ze===""?"."+Re(We,0):ze,Q(Se)?(Ae="",X!=null&&(Ae=X.replace(ke,"$&/")+"/"),Ve(Se,te,Ae,"",function(ge){return ge})):Se!=null&&(Ne(Se)&&(Se=$(Se,Ae+(!Se.key||We&&We.key===Se.key?"":(""+Se.key).replace(ke,"$&/")+"/")+X)),te.push(Se)),1;if(We=0,ze=ze===""?".":ze+":",Q(X))for(var Fe=0;Fe<X.length;Fe++){de=X[Fe];var tt=ze+Re(de,Fe);We+=Ve(de,te,Ae,tt,Se)}else if(tt=_(X),typeof tt=="function")for(X=tt.call(X),Fe=0;!(de=X.next()).done;)de=de.value,tt=ze+Re(de,Fe++),We+=Ve(de,te,Ae,tt,Se);else if(de==="object")throw te=String(X),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return We}function ee(X,te,Ae){if(X==null)return X;var ze=[],Se=0;return Ve(X,ze,"","",function(de){return te.call(Ae,de,Se++)}),ze}function Ue(X){if(X._status===-1){var te=X._result;te=te(),te.then(function(Ae){(X._status===0||X._status===-1)&&(X._status=1,X._result=Ae)},function(Ae){(X._status===0||X._status===-1)&&(X._status=2,X._result=Ae)}),X._status===-1&&(X._status=0,X._result=te)}if(X._status===1)return X._result.default;throw X._result}var me={current:null},pe={transition:null},Oe={ReactCurrentDispatcher:me,ReactCurrentBatchConfig:pe,ReactCurrentOwner:ue};function fe(){throw Error("act(...) is not supported in production builds of React.")}return It.Children={map:ee,forEach:function(X,te,Ae){ee(X,function(){te.apply(this,arguments)},Ae)},count:function(X){var te=0;return ee(X,function(){te++}),te},toArray:function(X){return ee(X,function(te){return te})||[]},only:function(X){if(!Ne(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},It.Component=F,It.Fragment=a,It.Profiler=p,It.PureComponent=W,It.StrictMode=d,It.Suspense=w,It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Oe,It.act=fe,It.cloneElement=function(X,te,Ae){if(X==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+X+".");var ze=L({},X.props),Se=X.key,de=X.ref,We=X._owner;if(te!=null){if(te.ref!==void 0&&(de=te.ref,We=ue.current),te.key!==void 0&&(Se=""+te.key),X.type&&X.type.defaultProps)var Fe=X.type.defaultProps;for(tt in te)ie.call(te,tt)&&!q.hasOwnProperty(tt)&&(ze[tt]=te[tt]===void 0&&Fe!==void 0?Fe[tt]:te[tt])}var tt=arguments.length-2;if(tt===1)ze.children=Ae;else if(1<tt){Fe=Array(tt);for(var ge=0;ge<tt;ge++)Fe[ge]=arguments[ge+2];ze.children=Fe}return{$$typeof:r,type:X.type,key:Se,ref:de,props:ze,_owner:We}},It.createContext=function(X){return X={$$typeof:y,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},X.Provider={$$typeof:x,_context:X},X.Consumer=X},It.createElement=ce,It.createFactory=function(X){var te=ce.bind(null,X);return te.type=X,te},It.createRef=function(){return{current:null}},It.forwardRef=function(X){return{$$typeof:b,render:X}},It.isValidElement=Ne,It.lazy=function(X){return{$$typeof:S,_payload:{_status:-1,_result:X},_init:Ue}},It.memo=function(X,te){return{$$typeof:E,type:X,compare:te===void 0?null:te}},It.startTransition=function(X){var te=pe.transition;pe.transition={};try{X()}finally{pe.transition=te}},It.unstable_act=fe,It.useCallback=function(X,te){return me.current.useCallback(X,te)},It.useContext=function(X){return me.current.useContext(X)},It.useDebugValue=function(){},It.useDeferredValue=function(X){return me.current.useDeferredValue(X)},It.useEffect=function(X,te){return me.current.useEffect(X,te)},It.useId=function(){return me.current.useId()},It.useImperativeHandle=function(X,te,Ae){return me.current.useImperativeHandle(X,te,Ae)},It.useInsertionEffect=function(X,te){return me.current.useInsertionEffect(X,te)},It.useLayoutEffect=function(X,te){return me.current.useLayoutEffect(X,te)},It.useMemo=function(X,te){return me.current.useMemo(X,te)},It.useReducer=function(X,te,Ae){return me.current.useReducer(X,te,Ae)},It.useRef=function(X){return me.current.useRef(X)},It.useState=function(X){return me.current.useState(X)},It.useSyncExternalStore=function(X,te,Ae){return me.current.useSyncExternalStore(X,te,Ae)},It.useTransition=function(){return me.current.useTransition()},It.version="18.3.1",It}var W0;function nd(){return W0||(W0=1,tf.exports=Ux()),tf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H0;function Wx(){if(H0)return Ea;H0=1;var r=nd(),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),d=Object.prototype.hasOwnProperty,p=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x={key:!0,ref:!0,__self:!0,__source:!0};function y(b,w,E){var S,I={},_=null,D=null;E!==void 0&&(_=""+E),w.key!==void 0&&(_=""+w.key),w.ref!==void 0&&(D=w.ref);for(S in w)d.call(w,S)&&!x.hasOwnProperty(S)&&(I[S]=w[S]);if(b&&b.defaultProps)for(S in w=b.defaultProps,w)I[S]===void 0&&(I[S]=w[S]);return{$$typeof:o,type:b,key:_,ref:D,props:I,_owner:p.current}}return Ea.Fragment=a,Ea.jsx=y,Ea.jsxs=y,Ea}var G0;function Hx(){return G0||(G0=1,ef.exports=Wx()),ef.exports}var A=Hx(),R=nd();const en=Bp(R);var Jl={},nf={exports:{}},Cr={},rf={exports:{}},sf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X0;function Gx(){return X0||(X0=1,function(r){function o(pe,Oe){var fe=pe.length;pe.push(Oe);e:for(;0<fe;){var X=fe-1>>>1,te=pe[X];if(0<p(te,Oe))pe[X]=Oe,pe[fe]=te,fe=X;else break e}}function a(pe){return pe.length===0?null:pe[0]}function d(pe){if(pe.length===0)return null;var Oe=pe[0],fe=pe.pop();if(fe!==Oe){pe[0]=fe;e:for(var X=0,te=pe.length,Ae=te>>>1;X<Ae;){var ze=2*(X+1)-1,Se=pe[ze],de=ze+1,We=pe[de];if(0>p(Se,fe))de<te&&0>p(We,Se)?(pe[X]=We,pe[de]=fe,X=de):(pe[X]=Se,pe[ze]=fe,X=ze);else if(de<te&&0>p(We,fe))pe[X]=We,pe[de]=fe,X=de;else break e}}return Oe}function p(pe,Oe){var fe=pe.sortIndex-Oe.sortIndex;return fe!==0?fe:pe.id-Oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var x=performance;r.unstable_now=function(){return x.now()}}else{var y=Date,b=y.now();r.unstable_now=function(){return y.now()-b}}var w=[],E=[],S=1,I=null,_=3,D=!1,L=!1,B=!1,F=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(pe){for(var Oe=a(E);Oe!==null;){if(Oe.callback===null)d(E);else if(Oe.startTime<=pe)d(E),Oe.sortIndex=Oe.expirationTime,o(w,Oe);else break;Oe=a(E)}}function Q(pe){if(B=!1,z(pe),!L)if(a(w)!==null)L=!0,Ue(ie);else{var Oe=a(E);Oe!==null&&me(Q,Oe.startTime-pe)}}function ie(pe,Oe){L=!1,B&&(B=!1,V(ce),ce=-1),D=!0;var fe=_;try{for(z(Oe),I=a(w);I!==null&&(!(I.expirationTime>Oe)||pe&&!Pe());){var X=I.callback;if(typeof X=="function"){I.callback=null,_=I.priorityLevel;var te=X(I.expirationTime<=Oe);Oe=r.unstable_now(),typeof te=="function"?I.callback=te:I===a(w)&&d(w),z(Oe)}else d(w);I=a(w)}if(I!==null)var Ae=!0;else{var ze=a(E);ze!==null&&me(Q,ze.startTime-Oe),Ae=!1}return Ae}finally{I=null,_=fe,D=!1}}var ue=!1,q=null,ce=-1,$=5,Ne=-1;function Pe(){return!(r.unstable_now()-Ne<$)}function ke(){if(q!==null){var pe=r.unstable_now();Ne=pe;var Oe=!0;try{Oe=q(!0,pe)}finally{Oe?Re():(ue=!1,q=null)}}else ue=!1}var Re;if(typeof W=="function")Re=function(){W(ke)};else if(typeof MessageChannel<"u"){var Ve=new MessageChannel,ee=Ve.port2;Ve.port1.onmessage=ke,Re=function(){ee.postMessage(null)}}else Re=function(){F(ke,0)};function Ue(pe){q=pe,ue||(ue=!0,Re())}function me(pe,Oe){ce=F(function(){pe(r.unstable_now())},Oe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(pe){pe.callback=null},r.unstable_continueExecution=function(){L||D||(L=!0,Ue(ie))},r.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<pe?Math.floor(1e3/pe):5},r.unstable_getCurrentPriorityLevel=function(){return _},r.unstable_getFirstCallbackNode=function(){return a(w)},r.unstable_next=function(pe){switch(_){case 1:case 2:case 3:var Oe=3;break;default:Oe=_}var fe=_;_=Oe;try{return pe()}finally{_=fe}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(pe,Oe){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var fe=_;_=pe;try{return Oe()}finally{_=fe}},r.unstable_scheduleCallback=function(pe,Oe,fe){var X=r.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?X+fe:X):fe=X,pe){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=fe+te,pe={id:S++,callback:Oe,priorityLevel:pe,startTime:fe,expirationTime:te,sortIndex:-1},fe>X?(pe.sortIndex=fe,o(E,pe),a(w)===null&&pe===a(E)&&(B?(V(ce),ce=-1):B=!0,me(Q,fe-X))):(pe.sortIndex=te,o(w,pe),L||D||(L=!0,Ue(ie))),pe},r.unstable_shouldYield=Pe,r.unstable_wrapCallback=function(pe){var Oe=_;return function(){var fe=_;_=Oe;try{return pe.apply(this,arguments)}finally{_=fe}}}}(sf)),sf}var Y0;function Xx(){return Y0||(Y0=1,rf.exports=Gx()),rf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K0;function Yx(){if(K0)return Cr;K0=1;var r=nd(),o=Xx();function a(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,f=1;f<arguments.length;f++)s+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d=new Set,p={};function x(t,s){y(t,s),y(t+"Capture",s)}function y(t,s){for(p[t]=s,t=0;t<s.length;t++)d.add(s[t])}var b=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),w=Object.prototype.hasOwnProperty,E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S={},I={};function _(t){return w.call(I,t)?!0:w.call(S,t)?!1:E.test(t)?I[t]=!0:(S[t]=!0,!1)}function D(t,s,f,g){if(f!==null&&f.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return g?!1:f!==null?!f.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function L(t,s,f,g){if(s===null||typeof s>"u"||D(t,s,f,g))return!0;if(g)return!1;if(f!==null)switch(f.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function B(t,s,f,g,C,T,P){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=g,this.attributeNamespace=C,this.mustUseProperty=f,this.propertyName=t,this.type=s,this.sanitizeURL=T,this.removeEmptyString=P}var F={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){F[t]=new B(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];F[s]=new B(s,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){F[t]=new B(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){F[t]=new B(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){F[t]=new B(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){F[t]=new B(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){F[t]=new B(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){F[t]=new B(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){F[t]=new B(t,5,!1,t.toLowerCase(),null,!1,!1)});var V=/[\-:]([a-z])/g;function W(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(V,W);F[s]=new B(s,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(V,W);F[s]=new B(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(V,W);F[s]=new B(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){F[t]=new B(t,1,!1,t.toLowerCase(),null,!1,!1)}),F.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){F[t]=new B(t,1,!1,t.toLowerCase(),null,!0,!0)});function z(t,s,f,g){var C=F.hasOwnProperty(s)?F[s]:null;(C!==null?C.type!==0:g||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(L(s,f,C,g)&&(f=null),g||C===null?_(s)&&(f===null?t.removeAttribute(s):t.setAttribute(s,""+f)):C.mustUseProperty?t[C.propertyName]=f===null?C.type===3?!1:"":f:(s=C.attributeName,g=C.attributeNamespace,f===null?t.removeAttribute(s):(C=C.type,f=C===3||C===4&&f===!0?"":""+f,g?t.setAttributeNS(g,s,f):t.setAttribute(s,f))))}var Q=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ie=Symbol.for("react.element"),ue=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),ce=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),Ne=Symbol.for("react.provider"),Pe=Symbol.for("react.context"),ke=Symbol.for("react.forward_ref"),Re=Symbol.for("react.suspense"),Ve=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),Ue=Symbol.for("react.lazy"),me=Symbol.for("react.offscreen"),pe=Symbol.iterator;function Oe(t){return t===null||typeof t!="object"?null:(t=pe&&t[pe]||t["@@iterator"],typeof t=="function"?t:null)}var fe=Object.assign,X;function te(t){if(X===void 0)try{throw Error()}catch(f){var s=f.stack.trim().match(/\n( *(at )?)/);X=s&&s[1]||""}return`
`+X+t}var Ae=!1;function ze(t,s){if(!t||Ae)return"";Ae=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(le){var g=le}Reflect.construct(t,[],s)}else{try{s.call()}catch(le){g=le}t.call(s.prototype)}else{try{throw Error()}catch(le){g=le}t()}}catch(le){if(le&&g&&typeof le.stack=="string"){for(var C=le.stack.split(`
`),T=g.stack.split(`
`),P=C.length-1,H=T.length-1;1<=P&&0<=H&&C[P]!==T[H];)H--;for(;1<=P&&0<=H;P--,H--)if(C[P]!==T[H]){if(P!==1||H!==1)do if(P--,H--,0>H||C[P]!==T[H]){var Y=`
`+C[P].replace(" at new "," at ");return t.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",t.displayName)),Y}while(1<=P&&0<=H);break}}}finally{Ae=!1,Error.prepareStackTrace=f}return(t=t?t.displayName||t.name:"")?te(t):""}function Se(t){switch(t.tag){case 5:return te(t.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return t=ze(t.type,!1),t;case 11:return t=ze(t.type.render,!1),t;case 1:return t=ze(t.type,!0),t;default:return""}}function de(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case q:return"Fragment";case ue:return"Portal";case $:return"Profiler";case ce:return"StrictMode";case Re:return"Suspense";case Ve:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Pe:return(t.displayName||"Context")+".Consumer";case Ne:return(t._context.displayName||"Context")+".Provider";case ke:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ee:return s=t.displayName||null,s!==null?s:de(t.type)||"Memo";case Ue:s=t._payload,t=t._init;try{return de(t(s))}catch{}}return null}function We(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return de(s);case 8:return s===ce?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Fe(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tt(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ge(t){var s=tt(t)?"checked":"value",f=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),g=""+t[s];if(!t.hasOwnProperty(s)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var C=f.get,T=f.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return C.call(this)},set:function(P){g=""+P,T.call(this,P)}}),Object.defineProperty(t,s,{enumerable:f.enumerable}),{getValue:function(){return g},setValue:function(P){g=""+P},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Ze(t){t._valueTracker||(t._valueTracker=ge(t))}function at(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var f=s.getValue(),g="";return t&&(g=tt(t)?t.checked?"true":"false":t.value),t=g,t!==f?(s.setValue(t),!0):!1}function _e(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function nt(t,s){var f=s.checked;return fe({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??t._wrapperState.initialChecked})}function Pt(t,s){var f=s.defaultValue==null?"":s.defaultValue,g=s.checked!=null?s.checked:s.defaultChecked;f=Fe(s.value!=null?s.value:f),t._wrapperState={initialChecked:g,initialValue:f,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Dt(t,s){s=s.checked,s!=null&&z(t,"checked",s,!1)}function St(t,s){Dt(t,s);var f=Fe(s.value),g=s.type;if(f!=null)g==="number"?(f===0&&t.value===""||t.value!=f)&&(t.value=""+f):t.value!==""+f&&(t.value=""+f);else if(g==="submit"||g==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?pt(t,s.type,f):s.hasOwnProperty("defaultValue")&&pt(t,s.type,Fe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function vt(t,s,f){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var g=s.type;if(!(g!=="submit"&&g!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,f||s===t.value||(t.value=s),t.defaultValue=s}f=t.name,f!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,f!==""&&(t.name=f)}function pt(t,s,f){(s!=="number"||_e(t.ownerDocument)!==t)&&(f==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+f&&(t.defaultValue=""+f))}var xn=Array.isArray;function Te(t,s,f,g){if(t=t.options,s){s={};for(var C=0;C<f.length;C++)s["$"+f[C]]=!0;for(f=0;f<t.length;f++)C=s.hasOwnProperty("$"+t[f].value),t[f].selected!==C&&(t[f].selected=C),C&&g&&(t[f].defaultSelected=!0)}else{for(f=""+Fe(f),s=null,C=0;C<t.length;C++){if(t[C].value===f){t[C].selected=!0,g&&(t[C].defaultSelected=!0);return}s!==null||t[C].disabled||(s=t[C])}s!==null&&(s.selected=!0)}}function zn(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(a(91));return fe({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ct(t,s){var f=s.value;if(f==null){if(f=s.children,s=s.defaultValue,f!=null){if(s!=null)throw Error(a(92));if(xn(f)){if(1<f.length)throw Error(a(93));f=f[0]}s=f}s==null&&(s=""),f=s}t._wrapperState={initialValue:Fe(f)}}function Ge(t,s){var f=Fe(s.value),g=Fe(s.defaultValue);f!=null&&(f=""+f,f!==t.value&&(t.value=f),s.defaultValue==null&&t.defaultValue!==f&&(t.defaultValue=f)),g!=null&&(t.defaultValue=""+g)}function Je(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function gt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ut(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?gt(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ot,At=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,f,g,C){MSApp.execUnsafeLocalFunction(function(){return t(s,f,g,C)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(Ot=Ot||document.createElement("div"),Ot.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Ot.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function nn(t,s){if(s){var f=t.firstChild;if(f&&f===t.lastChild&&f.nodeType===3){f.nodeValue=s;return}}t.textContent=s}var Ht={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},un=["Webkit","ms","Moz","O"];Object.keys(Ht).forEach(function(t){un.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Ht[s]=Ht[t]})});function De(t,s,f){return s==null||typeof s=="boolean"||s===""?"":f||typeof s!="number"||s===0||Ht.hasOwnProperty(t)&&Ht[t]?(""+s).trim():s+"px"}function he(t,s){t=t.style;for(var f in s)if(s.hasOwnProperty(f)){var g=f.indexOf("--")===0,C=De(f,s[f],g);f==="float"&&(f="cssFloat"),g?t.setProperty(f,C):t[f]=C}}var ct=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function st(t,s){if(s){if(ct[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(a(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(a(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(a(61))}if(s.style!=null&&typeof s.style!="object")throw Error(a(62))}}function Rt(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mn=null;function Pr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Un=null,lt=null,Dn=null;function As(t){if(t=aa(t)){if(typeof Un!="function")throw Error(a(280));var s=t.stateNode;s&&(s=hl(s),Un(t.stateNode,t.type,s))}}function Ui(t){lt?Dn?Dn.push(t):Dn=[t]:lt=t}function qn(){if(lt){var t=lt,s=Dn;if(Dn=lt=null,As(t),s)for(t=0;t<s.length;t++)As(s[t])}}function Wi(t,s){return t(s)}function rn(){}var Mr=!1;function si(t,s,f){if(Mr)return t(s,f);Mr=!0;try{return Wi(t,s,f)}finally{Mr=!1,(lt!==null||Dn!==null)&&(rn(),qn())}}function An(t,s){var f=t.stateNode;if(f===null)return null;var g=hl(f);if(g===null)return null;f=g[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(t=t.type,g=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!g;break e;default:t=!1}if(t)return null;if(f&&typeof f!="function")throw Error(a(231,s,typeof f));return f}var Hi=!1;if(b)try{var ar={};Object.defineProperty(ar,"passive",{get:function(){Hi=!0}}),window.addEventListener("test",ar,ar),window.removeEventListener("test",ar,ar)}catch{Hi=!1}function oi(t,s,f,g,C,T,P,H,Y){var le=Array.prototype.slice.call(arguments,3);try{s.apply(f,le)}catch(ve){this.onError(ve)}}var fn=!1,lr=null,Tn=!1,Le=null,ai={onError:function(t){fn=!0,lr=t}};function Gi(t,s,f,g,C,T,P,H,Y){fn=!1,lr=null,oi.apply(ai,arguments)}function Ln(t,s,f,g,C,T,P,H,Y){if(Gi.apply(this,arguments),fn){if(fn){var le=lr;fn=!1,lr=null}else throw Error(a(198));Tn||(Tn=!0,Le=le)}}function Qn(t){var s=t,f=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(f=s.return),t=s.return;while(t)}return s.tag===3?f:null}function Kr(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function Ci(t){if(Qn(t)!==t)throw Error(a(188))}function Jn(t){var s=t.alternate;if(!s){if(s=Qn(t),s===null)throw Error(a(188));return s!==t?null:t}for(var f=t,g=s;;){var C=f.return;if(C===null)break;var T=C.alternate;if(T===null){if(g=C.return,g!==null){f=g;continue}break}if(C.child===T.child){for(T=C.child;T;){if(T===f)return Ci(C),t;if(T===g)return Ci(C),s;T=T.sibling}throw Error(a(188))}if(f.return!==g.return)f=C,g=T;else{for(var P=!1,H=C.child;H;){if(H===f){P=!0,f=C,g=T;break}if(H===g){P=!0,g=C,f=T;break}H=H.sibling}if(!P){for(H=T.child;H;){if(H===f){P=!0,f=T,g=C;break}if(H===g){P=!0,g=T,f=C;break}H=H.sibling}if(!P)throw Error(a(189))}}if(f.alternate!==g)throw Error(a(190))}if(f.tag!==3)throw Error(a(188));return f.stateNode.current===f?t:s}function Be(t){return t=Jn(t),t!==null?mt(t):null}function mt(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=mt(t);if(s!==null)return s;t=t.sibling}return null}var Qe=o.unstable_scheduleCallback,Et=o.unstable_cancelCallback,Me=o.unstable_shouldYield,Wn=o.unstable_requestPaint,Ft=o.unstable_now,bs=o.unstable_getCurrentPriorityLevel,xe=o.unstable_ImmediatePriority,gr=o.unstable_UserBlockingPriority,Mt=o.unstable_NormalPriority,Ei=o.unstable_LowPriority,Xi=o.unstable_IdlePriority,Tt=null,yt=null;function Nt(t){if(yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(Tt,t,void 0,(t.current.flags&128)===128)}catch{}}var cr=Math.clz32?Math.clz32:yn,Uo=Math.log,Wo=Math.LN2;function yn(t){return t>>>=0,t===0?32:31-(Uo(t)/Wo|0)|0}var br=64,to=4194304;function Xt(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Sr(t,s){var f=t.pendingLanes;if(f===0)return 0;var g=0,C=t.suspendedLanes,T=t.pingedLanes,P=f&268435455;if(P!==0){var H=P&~C;H!==0?g=Xt(H):(T&=P,T!==0&&(g=Xt(T)))}else P=f&~C,P!==0?g=Xt(P):T!==0&&(g=Xt(T));if(g===0)return 0;if(s!==0&&s!==g&&!(s&C)&&(C=g&-g,T=s&-s,C>=T||C===16&&(T&4194240)!==0))return s;if(g&4&&(g|=f&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=g;0<s;)f=31-cr(s),C=1<<f,g|=t[f],s&=~C;return g}function Mc(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yi(t,s){for(var f=t.suspendedLanes,g=t.pingedLanes,C=t.expirationTimes,T=t.pendingLanes;0<T;){var P=31-cr(T),H=1<<P,Y=C[P];Y===-1?(!(H&f)||H&g)&&(C[P]=Mc(H,s)):Y<=s&&(t.expiredLanes|=H),T&=~H}}function zt(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function In(){var t=br;return br<<=1,!(br&4194240)&&(br=64),t}function ne(t){for(var s=[],f=0;31>f;f++)s.push(t);return s}function j(t,s,f){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-cr(s),t[s]=f}function $e(t,s){var f=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var g=t.eventTimes;for(t=t.expirationTimes;0<f;){var C=31-cr(f),T=1<<C;s[C]=0,g[C]=-1,t[C]=-1,f&=~T}}function dn(t,s){var f=t.entangledLanes|=s;for(t=t.entanglements;f;){var g=31-cr(f),C=1<<g;C&s|t[g]&s&&(t[g]|=s),f&=~C}}var wt=0;function qa(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var no,er,qe,Yt,Ho,Go=!1,Ki=[],Tr=null,Dr=null,li=null,Qt=new Map,Zr=new Map,Hn=[],ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qa(t,s){switch(t){case"focusin":case"focusout":Tr=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":li=null;break;case"pointerover":case"pointerout":Qt.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zr.delete(s.pointerId)}}function dt(t,s,f,g,C,T){return t===null||t.nativeEvent!==T?(t={blockedOn:s,domEventName:f,eventSystemFlags:g,nativeEvent:T,targetContainers:[C]},s!==null&&(s=aa(s),s!==null&&er(s)),t):(t.eventSystemFlags|=g,s=t.targetContainers,C!==null&&s.indexOf(C)===-1&&s.push(C),t)}function Nn(t,s,f,g,C){switch(s){case"focusin":return Tr=dt(Tr,t,s,f,g,C),!0;case"dragenter":return Dr=dt(Dr,t,s,f,g,C),!0;case"mouseover":return li=dt(li,t,s,f,g,C),!0;case"pointerover":var T=C.pointerId;return Qt.set(T,dt(Qt.get(T)||null,t,s,f,g,C)),!0;case"gotpointercapture":return T=C.pointerId,Zr.set(T,dt(Zr.get(T)||null,t,s,f,g,C)),!0}return!1}function Ja(t){var s=Ms(t.target);if(s!==null){var f=Qn(s);if(f!==null){if(s=f.tag,s===13){if(s=Kr(f),s!==null){t.blockedOn=s,Ho(t.priority,function(){qe(f)});return}}else if(s===3&&f.stateNode.current.memoizedState.isDehydrated){t.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zi(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var f=ro(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(f===null){f=t.nativeEvent;var g=new f.constructor(f.type,f);Mn=g,f.target.dispatchEvent(g),Mn=null}else return s=aa(f),s!==null&&er(s),t.blockedOn=f,!1;s.shift()}return!0}function Xo(t,s,f){Zi(t)&&f.delete(s)}function Ai(){Go=!1,Tr!==null&&Zi(Tr)&&(Tr=null),Dr!==null&&Zi(Dr)&&(Dr=null),li!==null&&Zi(li)&&(li=null),Qt.forEach(Xo),Zr.forEach(Xo)}function Ss(t,s){t.blockedOn===s&&(t.blockedOn=null,Go||(Go=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ai)))}function $r(t){function s(C){return Ss(C,t)}if(0<Ki.length){Ss(Ki[0],t);for(var f=1;f<Ki.length;f++){var g=Ki[f];g.blockedOn===t&&(g.blockedOn=null)}}for(Tr!==null&&Ss(Tr,t),Dr!==null&&Ss(Dr,t),li!==null&&Ss(li,t),Qt.forEach(s),Zr.forEach(s),f=0;f<Hn.length;f++)g=Hn[f],g.blockedOn===t&&(g.blockedOn=null);for(;0<Hn.length&&(f=Hn[0],f.blockedOn===null);)Ja(f),f.blockedOn===null&&Hn.shift()}var Lr=Q.ReactCurrentBatchConfig,ci=!0;function el(t,s,f,g){var C=wt,T=Lr.transition;Lr.transition=null;try{wt=1,bi(t,s,f,g)}finally{wt=C,Lr.transition=T}}function Ts(t,s,f,g){var C=wt,T=Lr.transition;Lr.transition=null;try{wt=4,bi(t,s,f,g)}finally{wt=C,Lr.transition=T}}function bi(t,s,f,g){if(ci){var C=ro(t,s,f,g);if(C===null)Hc(t,s,g,_n,f),Qa(t,g);else if(Nn(C,t,s,f,g))g.stopPropagation();else if(Qa(t,g),s&4&&-1<ot.indexOf(t)){for(;C!==null;){var T=aa(C);if(T!==null&&no(T),T=ro(t,s,f,g),T===null&&Hc(t,s,g,_n,f),T===C)break;C=T}C!==null&&g.stopPropagation()}else Hc(t,s,g,null,f)}}var _n=null;function ro(t,s,f,g){if(_n=null,t=Pr(g),t=Ms(t),t!==null)if(s=Qn(t),s===null)t=null;else if(f=s.tag,f===13){if(t=Kr(s),t!==null)return t;t=null}else if(f===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return _n=t,null}function Yo(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bs()){case xe:return 1;case gr:return 4;case Mt:case Ei:return 16;case Xi:return 536870912;default:return 16}default:return 16}}var qr=null,Ko=null,io=null;function tl(){if(io)return io;var t,s=Ko,f=s.length,g,C="value"in qr?qr.value:qr.textContent,T=C.length;for(t=0;t<f&&s[t]===C[t];t++);var P=f-t;for(g=1;g<=P&&s[f-g]===C[T-g];g++);return io=C.slice(t,1<g?1-g:void 0)}function Lt(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Is(){return!0}function Ns(){return!1}function hn(t){function s(f,g,C,T,P){this._reactName=f,this._targetInst=C,this.type=g,this.nativeEvent=T,this.target=P,this.currentTarget=null;for(var H in t)t.hasOwnProperty(H)&&(f=t[H],this[H]=f?f(T):T[H]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Is:Ns,this.isPropagationStopped=Ns,this}return fe(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Is)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Is)},persist:function(){},isPersistent:Is}),s}var $i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ae=hn($i),xt=fe({},$i,{view:0,detail:0}),Rn=hn(xt),qi,so,_s,oo=fe({},xt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_s&&(_s&&t.type==="mousemove"?(qi=t.screenX-_s.screenX,so=t.screenY-_s.screenY):so=qi=0,_s=t),qi)},movementY:function(t){return"movementY"in t?t.movementY:so}}),nl=hn(oo),Zo=fe({},oo,{dataTransfer:0}),wn=hn(Zo),$o=fe({},xt,{relatedTarget:0}),Kt=hn($o),ao=fe({},$i,{animationName:0,elapsedTime:0,pseudoElement:0}),Si=hn(ao),Wt=fe({},$i,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),et=hn(Wt),Dc=fe({},$i,{data:0}),Gt=hn(Dc),Ti={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Br(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Lc[t])?!!s[t]:!1}function Rs(){return Br}var rl=fe({},xt,{key:function(t){if(t.key){var s=Ti[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Lt(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Qi[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rs,charCode:function(t){return t.type==="keypress"?Lt(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lt(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qo=hn(rl),il=fe({},oo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qo=hn(il),Bc=fe({},xt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rs}),Ji=hn(Bc),Jo=fe({},$i,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fc=hn(Jo),ks=fe({},oo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jc=hn(ks),ui=[9,13,27,32],es=b&&"CompositionEvent"in window,Bn=null;b&&"documentMode"in document&&(Bn=document.documentMode);var sl=b&&"TextEvent"in window&&!Bn,Ir=b&&(!es||Bn&&8<Bn&&11>=Bn),ol=" ",lo=!1;function al(t,s){switch(t){case"keyup":return ui.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ea(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gn=!1;function Vc(t,s){switch(t){case"compositionend":return ea(s);case"keypress":return s.which!==32?null:(lo=!0,ol);case"textInput":return t=s.data,t===ol&&lo?null:t;default:return null}}function ta(t,s){if(Gn)return t==="compositionend"||!es&&al(t,s)?(t=tl(),io=Ko=qr=null,Gn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ir&&s.locale!=="ko"?null:s.data;default:return null}}var Os={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kt(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Os[t.type]:s==="textarea"}function Ps(t,s,f,g){Ui(g),s=ul(s,"onChange"),0<s.length&&(f=new ae("onChange","change",null,f,g),t.push({event:f,listeners:s}))}var k=null,e=null;function n(t){ih(t,0)}function i(t){var s=fo(t);if(at(s))return t}function l(t,s){if(t==="change")return s}var c=!1;if(b){var u;if(b){var h="oninput"in document;if(!h){var m=document.createElement("div");m.setAttribute("oninput","return;"),h=typeof m.oninput=="function"}u=h}else u=!1;c=u&&(!document.documentMode||9<document.documentMode)}function v(){k&&(k.detachEvent("onpropertychange",N),e=k=null)}function N(t){if(t.propertyName==="value"&&i(e)){var s=[];Ps(s,e,t,Pr(t)),si(n,s)}}function O(t,s,f){t==="focusin"?(v(),k=s,e=f,k.attachEvent("onpropertychange",N)):t==="focusout"&&v()}function M(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return i(e)}function U(t,s){if(t==="click")return i(s)}function G(t,s){if(t==="input"||t==="change")return i(s)}function K(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var J=typeof Object.is=="function"?Object.is:K;function oe(t,s){if(J(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var f=Object.keys(t),g=Object.keys(s);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var C=f[g];if(!w.call(s,C)||!J(t[C],s[C]))return!1}return!0}function Ee(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function be(t,s){var f=Ee(t);t=0;for(var g;f;){if(f.nodeType===3){if(g=t+f.textContent.length,t<=s&&g>=s)return{node:f,offset:s-t};t=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Ee(f)}}function we(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?we(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function bt(){for(var t=window,s=_e();s instanceof t.HTMLIFrameElement;){try{var f=typeof s.contentWindow.location.href=="string"}catch{f=!1}if(f)t=s.contentWindow;else break;s=_e(t.document)}return s}function ht(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function tr(t){var s=bt(),f=t.focusedElem,g=t.selectionRange;if(s!==f&&f&&f.ownerDocument&&we(f.ownerDocument.documentElement,f)){if(g!==null&&ht(f)){if(s=g.start,t=g.end,t===void 0&&(t=s),"selectionStart"in f)f.selectionStart=s,f.selectionEnd=Math.min(t,f.value.length);else if(t=(s=f.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var C=f.textContent.length,T=Math.min(g.start,C);g=g.end===void 0?T:Math.min(g.end,C),!t.extend&&T>g&&(C=g,g=T,T=C),C=be(f,T);var P=be(f,g);C&&P&&(t.rangeCount!==1||t.anchorNode!==C.node||t.anchorOffset!==C.offset||t.focusNode!==P.node||t.focusOffset!==P.offset)&&(s=s.createRange(),s.setStart(C.node,C.offset),t.removeAllRanges(),T>g?(t.addRange(s),t.extend(P.node,P.offset)):(s.setEnd(P.node,P.offset),t.addRange(s)))}}for(s=[],t=f;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<s.length;f++)t=s[f],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Nr=b&&"documentMode"in document&&11>=document.documentMode,vn=null,Vt=null,sn=null,Xn=!1;function Ii(t,s,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Xn||vn==null||vn!==_e(g)||(g=vn,"selectionStart"in g&&ht(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),sn&&oe(sn,g)||(sn=g,g=ul(Vt,"onSelect"),0<g.length&&(s=new ae("onSelect","select",null,s,f),t.push({event:s,listeners:g}),s.target=vn)))}function Qr(t,s){var f={};return f[t.toLowerCase()]=s.toLowerCase(),f["Webkit"+t]="webkit"+s,f["Moz"+t]="moz"+s,f}var ts={animationend:Qr("Animation","AnimationEnd"),animationiteration:Qr("Animation","AnimationIteration"),animationstart:Qr("Animation","AnimationStart"),transitionend:Qr("Transition","TransitionEnd")},na={},$d={};b&&($d=document.createElement("div").style,"AnimationEvent"in window||(delete ts.animationend.animation,delete ts.animationiteration.animation,delete ts.animationstart.animation),"TransitionEvent"in window||delete ts.transitionend.transition);function ll(t){if(na[t])return na[t];if(!ts[t])return t;var s=ts[t],f;for(f in s)if(s.hasOwnProperty(f)&&f in $d)return na[t]=s[f];return t}var qd=ll("animationend"),Qd=ll("animationiteration"),Jd=ll("animationstart"),eh=ll("transitionend"),th=new Map,nh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ns(t,s){th.set(t,s),x(s,[t])}for(var zc=0;zc<nh.length;zc++){var Uc=nh[zc],qm=Uc.toLowerCase(),Qm=Uc[0].toUpperCase()+Uc.slice(1);ns(qm,"on"+Qm)}ns(qd,"onAnimationEnd"),ns(Qd,"onAnimationIteration"),ns(Jd,"onAnimationStart"),ns("dblclick","onDoubleClick"),ns("focusin","onFocus"),ns("focusout","onBlur"),ns(eh,"onTransitionEnd"),y("onMouseEnter",["mouseout","mouseover"]),y("onMouseLeave",["mouseout","mouseover"]),y("onPointerEnter",["pointerout","pointerover"]),y("onPointerLeave",["pointerout","pointerover"]),x("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),x("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),x("onBeforeInput",["compositionend","keypress","textInput","paste"]),x("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ra="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jm=new Set("cancel close invalid load scroll toggle".split(" ").concat(ra));function rh(t,s,f){var g=t.type||"unknown-event";t.currentTarget=f,Ln(g,s,void 0,t),t.currentTarget=null}function ih(t,s){s=(s&4)!==0;for(var f=0;f<t.length;f++){var g=t[f],C=g.event;g=g.listeners;e:{var T=void 0;if(s)for(var P=g.length-1;0<=P;P--){var H=g[P],Y=H.instance,le=H.currentTarget;if(H=H.listener,Y!==T&&C.isPropagationStopped())break e;rh(C,H,le),T=Y}else for(P=0;P<g.length;P++){if(H=g[P],Y=H.instance,le=H.currentTarget,H=H.listener,Y!==T&&C.isPropagationStopped())break e;rh(C,H,le),T=Y}}}if(Tn)throw t=Le,Tn=!1,Le=null,t}function $t(t,s){var f=s[$c];f===void 0&&(f=s[$c]=new Set);var g=t+"__bubble";f.has(g)||(sh(s,t,2,!1),f.add(g))}function Wc(t,s,f){var g=0;s&&(g|=4),sh(f,t,g,s)}var cl="_reactListening"+Math.random().toString(36).slice(2);function ia(t){if(!t[cl]){t[cl]=!0,d.forEach(function(f){f!=="selectionchange"&&(Jm.has(f)||Wc(f,!1,t),Wc(f,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[cl]||(s[cl]=!0,Wc("selectionchange",!1,s))}}function sh(t,s,f,g){switch(Yo(s)){case 1:var C=el;break;case 4:C=Ts;break;default:C=bi}f=C.bind(null,s,f,t),C=void 0,!Hi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(C=!0),g?C!==void 0?t.addEventListener(s,f,{capture:!0,passive:C}):t.addEventListener(s,f,!0):C!==void 0?t.addEventListener(s,f,{passive:C}):t.addEventListener(s,f,!1)}function Hc(t,s,f,g,C){var T=g;if(!(s&1)&&!(s&2)&&g!==null)e:for(;;){if(g===null)return;var P=g.tag;if(P===3||P===4){var H=g.stateNode.containerInfo;if(H===C||H.nodeType===8&&H.parentNode===C)break;if(P===4)for(P=g.return;P!==null;){var Y=P.tag;if((Y===3||Y===4)&&(Y=P.stateNode.containerInfo,Y===C||Y.nodeType===8&&Y.parentNode===C))return;P=P.return}for(;H!==null;){if(P=Ms(H),P===null)return;if(Y=P.tag,Y===5||Y===6){g=T=P;continue e}H=H.parentNode}}g=g.return}si(function(){var le=T,ve=Pr(f),Ce=[];e:{var ye=th.get(t);if(ye!==void 0){var je=ae,Xe=t;switch(t){case"keypress":if(Lt(f)===0)break e;case"keydown":case"keyup":je=qo;break;case"focusin":Xe="focus",je=Kt;break;case"focusout":Xe="blur",je=Kt;break;case"beforeblur":case"afterblur":je=Kt;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":je=nl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":je=wn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":je=Ji;break;case qd:case Qd:case Jd:je=Si;break;case eh:je=Fc;break;case"scroll":je=Rn;break;case"wheel":je=jc;break;case"copy":case"cut":case"paste":je=et;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":je=Qo}var Ye=(s&4)!==0,Cn=!Ye&&t==="scroll",re=Ye?ye!==null?ye+"Capture":null:ye;Ye=[];for(var Z=le,se;Z!==null;){se=Z;var Ie=se.stateNode;if(se.tag===5&&Ie!==null&&(se=Ie,re!==null&&(Ie=An(Z,re),Ie!=null&&Ye.push(sa(Z,Ie,se)))),Cn)break;Z=Z.return}0<Ye.length&&(ye=new je(ye,Xe,null,f,ve),Ce.push({event:ye,listeners:Ye}))}}if(!(s&7)){e:{if(ye=t==="mouseover"||t==="pointerover",je=t==="mouseout"||t==="pointerout",ye&&f!==Mn&&(Xe=f.relatedTarget||f.fromElement)&&(Ms(Xe)||Xe[Ni]))break e;if((je||ye)&&(ye=ve.window===ve?ve:(ye=ve.ownerDocument)?ye.defaultView||ye.parentWindow:window,je?(Xe=f.relatedTarget||f.toElement,je=le,Xe=Xe?Ms(Xe):null,Xe!==null&&(Cn=Qn(Xe),Xe!==Cn||Xe.tag!==5&&Xe.tag!==6)&&(Xe=null)):(je=null,Xe=le),je!==Xe)){if(Ye=nl,Ie="onMouseLeave",re="onMouseEnter",Z="mouse",(t==="pointerout"||t==="pointerover")&&(Ye=Qo,Ie="onPointerLeave",re="onPointerEnter",Z="pointer"),Cn=je==null?ye:fo(je),se=Xe==null?ye:fo(Xe),ye=new Ye(Ie,Z+"leave",je,f,ve),ye.target=Cn,ye.relatedTarget=se,Ie=null,Ms(ve)===le&&(Ye=new Ye(re,Z+"enter",Xe,f,ve),Ye.target=se,Ye.relatedTarget=Cn,Ie=Ye),Cn=Ie,je&&Xe)t:{for(Ye=je,re=Xe,Z=0,se=Ye;se;se=co(se))Z++;for(se=0,Ie=re;Ie;Ie=co(Ie))se++;for(;0<Z-se;)Ye=co(Ye),Z--;for(;0<se-Z;)re=co(re),se--;for(;Z--;){if(Ye===re||re!==null&&Ye===re.alternate)break t;Ye=co(Ye),re=co(re)}Ye=null}else Ye=null;je!==null&&oh(Ce,ye,je,Ye,!1),Xe!==null&&Cn!==null&&oh(Ce,Cn,Xe,Ye,!0)}}e:{if(ye=le?fo(le):window,je=ye.nodeName&&ye.nodeName.toLowerCase(),je==="select"||je==="input"&&ye.type==="file")var Ke=l;else if(kt(ye))if(c)Ke=G;else{Ke=M;var rt=O}else(je=ye.nodeName)&&je.toLowerCase()==="input"&&(ye.type==="checkbox"||ye.type==="radio")&&(Ke=U);if(Ke&&(Ke=Ke(t,le))){Ps(Ce,Ke,f,ve);break e}rt&&rt(t,ye,le),t==="focusout"&&(rt=ye._wrapperState)&&rt.controlled&&ye.type==="number"&&pt(ye,"number",ye.value)}switch(rt=le?fo(le):window,t){case"focusin":(kt(rt)||rt.contentEditable==="true")&&(vn=rt,Vt=le,sn=null);break;case"focusout":sn=Vt=vn=null;break;case"mousedown":Xn=!0;break;case"contextmenu":case"mouseup":case"dragend":Xn=!1,Ii(Ce,f,ve);break;case"selectionchange":if(Nr)break;case"keydown":case"keyup":Ii(Ce,f,ve)}var it;if(es)e:{switch(t){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else Gn?al(t,f)&&(ft="onCompositionEnd"):t==="keydown"&&f.keyCode===229&&(ft="onCompositionStart");ft&&(Ir&&f.locale!=="ko"&&(Gn||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&Gn&&(it=tl()):(qr=ve,Ko="value"in qr?qr.value:qr.textContent,Gn=!0)),rt=ul(le,ft),0<rt.length&&(ft=new Gt(ft,t,null,f,ve),Ce.push({event:ft,listeners:rt}),it?ft.data=it:(it=ea(f),it!==null&&(ft.data=it)))),(it=sl?Vc(t,f):ta(t,f))&&(le=ul(le,"onBeforeInput"),0<le.length&&(ve=new Gt("onBeforeInput","beforeinput",null,f,ve),Ce.push({event:ve,listeners:le}),ve.data=it))}ih(Ce,s)})}function sa(t,s,f){return{instance:t,listener:s,currentTarget:f}}function ul(t,s){for(var f=s+"Capture",g=[];t!==null;){var C=t,T=C.stateNode;C.tag===5&&T!==null&&(C=T,T=An(t,f),T!=null&&g.unshift(sa(t,T,C)),T=An(t,s),T!=null&&g.push(sa(t,T,C))),t=t.return}return g}function co(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function oh(t,s,f,g,C){for(var T=s._reactName,P=[];f!==null&&f!==g;){var H=f,Y=H.alternate,le=H.stateNode;if(Y!==null&&Y===g)break;H.tag===5&&le!==null&&(H=le,C?(Y=An(f,T),Y!=null&&P.unshift(sa(f,Y,H))):C||(Y=An(f,T),Y!=null&&P.push(sa(f,Y,H)))),f=f.return}P.length!==0&&t.push({event:s,listeners:P})}var ex=/\r\n?/g,tx=/\u0000|\uFFFD/g;function ah(t){return(typeof t=="string"?t:""+t).replace(ex,`
`).replace(tx,"")}function fl(t,s,f){if(s=ah(s),ah(t)!==s&&f)throw Error(a(425))}function dl(){}var Gc=null,Xc=null;function Yc(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Kc=typeof setTimeout=="function"?setTimeout:void 0,nx=typeof clearTimeout=="function"?clearTimeout:void 0,lh=typeof Promise=="function"?Promise:void 0,rx=typeof queueMicrotask=="function"?queueMicrotask:typeof lh<"u"?function(t){return lh.resolve(null).then(t).catch(ix)}:Kc;function ix(t){setTimeout(function(){throw t})}function Zc(t,s){var f=s,g=0;do{var C=f.nextSibling;if(t.removeChild(f),C&&C.nodeType===8)if(f=C.data,f==="/$"){if(g===0){t.removeChild(C),$r(s);return}g--}else f!=="$"&&f!=="$?"&&f!=="$!"||g++;f=C}while(f);$r(s)}function rs(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function ch(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var f=t.data;if(f==="$"||f==="$!"||f==="$?"){if(s===0)return t;s--}else f==="/$"&&s++}t=t.previousSibling}return null}var uo=Math.random().toString(36).slice(2),fi="__reactFiber$"+uo,oa="__reactProps$"+uo,Ni="__reactContainer$"+uo,$c="__reactEvents$"+uo,sx="__reactListeners$"+uo,ox="__reactHandles$"+uo;function Ms(t){var s=t[fi];if(s)return s;for(var f=t.parentNode;f;){if(s=f[Ni]||f[fi]){if(f=s.alternate,s.child!==null||f!==null&&f.child!==null)for(t=ch(t);t!==null;){if(f=t[fi])return f;t=ch(t)}return s}t=f,f=t.parentNode}return null}function aa(t){return t=t[fi]||t[Ni],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(a(33))}function hl(t){return t[oa]||null}var qc=[],ho=-1;function is(t){return{current:t}}function qt(t){0>ho||(t.current=qc[ho],qc[ho]=null,ho--)}function Zt(t,s){ho++,qc[ho]=t.current,t.current=s}var ss={},nr=is(ss),mr=is(!1),Ds=ss;function po(t,s){var f=t.type.contextTypes;if(!f)return ss;var g=t.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===s)return g.__reactInternalMemoizedMaskedChildContext;var C={},T;for(T in f)C[T]=s[T];return g&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=C),C}function xr(t){return t=t.childContextTypes,t!=null}function pl(){qt(mr),qt(nr)}function uh(t,s,f){if(nr.current!==ss)throw Error(a(168));Zt(nr,s),Zt(mr,f)}function fh(t,s,f){var g=t.stateNode;if(s=s.childContextTypes,typeof g.getChildContext!="function")return f;g=g.getChildContext();for(var C in g)if(!(C in s))throw Error(a(108,We(t)||"Unknown",C));return fe({},f,g)}function gl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ss,Ds=nr.current,Zt(nr,t),Zt(mr,mr.current),!0}function dh(t,s,f){var g=t.stateNode;if(!g)throw Error(a(169));f?(t=fh(t,s,Ds),g.__reactInternalMemoizedMergedChildContext=t,qt(mr),qt(nr),Zt(nr,t)):qt(mr),Zt(mr,f)}var _i=null,ml=!1,Qc=!1;function hh(t){_i===null?_i=[t]:_i.push(t)}function ax(t){ml=!0,hh(t)}function os(){if(!Qc&&_i!==null){Qc=!0;var t=0,s=wt;try{var f=_i;for(wt=1;t<f.length;t++){var g=f[t];do g=g(!0);while(g!==null)}_i=null,ml=!1}catch(C){throw _i!==null&&(_i=_i.slice(t+1)),Qe(xe,os),C}finally{wt=s,Qc=!1}}return null}var go=[],mo=0,xl=null,yl=0,Fr=[],jr=0,Ls=null,Ri=1,ki="";function Bs(t,s){go[mo++]=yl,go[mo++]=xl,xl=t,yl=s}function ph(t,s,f){Fr[jr++]=Ri,Fr[jr++]=ki,Fr[jr++]=Ls,Ls=t;var g=Ri;t=ki;var C=32-cr(g)-1;g&=~(1<<C),f+=1;var T=32-cr(s)+C;if(30<T){var P=C-C%5;T=(g&(1<<P)-1).toString(32),g>>=P,C-=P,Ri=1<<32-cr(s)+C|f<<C|g,ki=T+t}else Ri=1<<T|f<<C|g,ki=t}function Jc(t){t.return!==null&&(Bs(t,1),ph(t,1,0))}function eu(t){for(;t===xl;)xl=go[--mo],go[mo]=null,yl=go[--mo],go[mo]=null;for(;t===Ls;)Ls=Fr[--jr],Fr[jr]=null,ki=Fr[--jr],Fr[jr]=null,Ri=Fr[--jr],Fr[jr]=null}var _r=null,Rr=null,Jt=!1,Jr=null;function gh(t,s){var f=Wr(5,null,null,0);f.elementType="DELETED",f.stateNode=s,f.return=t,s=t.deletions,s===null?(t.deletions=[f],t.flags|=16):s.push(f)}function mh(t,s){switch(t.tag){case 5:var f=t.type;return s=s.nodeType!==1||f.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,_r=t,Rr=rs(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,_r=t,Rr=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(f=Ls!==null?{id:Ri,overflow:ki}:null,t.memoizedState={dehydrated:s,treeContext:f,retryLane:1073741824},f=Wr(18,null,null,0),f.stateNode=s,f.return=t,t.child=f,_r=t,Rr=null,!0):!1;default:return!1}}function tu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function nu(t){if(Jt){var s=Rr;if(s){var f=s;if(!mh(t,s)){if(tu(t))throw Error(a(418));s=rs(f.nextSibling);var g=_r;s&&mh(t,s)?gh(g,f):(t.flags=t.flags&-4097|2,Jt=!1,_r=t)}}else{if(tu(t))throw Error(a(418));t.flags=t.flags&-4097|2,Jt=!1,_r=t}}}function xh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;_r=t}function wl(t){if(t!==_r)return!1;if(!Jt)return xh(t),Jt=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!Yc(t.type,t.memoizedProps)),s&&(s=Rr)){if(tu(t))throw yh(),Error(a(418));for(;s;)gh(t,s),s=rs(s.nextSibling)}if(xh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var f=t.data;if(f==="/$"){if(s===0){Rr=rs(t.nextSibling);break e}s--}else f!=="$"&&f!=="$!"&&f!=="$?"||s++}t=t.nextSibling}Rr=null}}else Rr=_r?rs(t.stateNode.nextSibling):null;return!0}function yh(){for(var t=Rr;t;)t=rs(t.nextSibling)}function xo(){Rr=_r=null,Jt=!1}function ru(t){Jr===null?Jr=[t]:Jr.push(t)}var lx=Q.ReactCurrentBatchConfig;function la(t,s,f){if(t=f.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(a(309));var g=f.stateNode}if(!g)throw Error(a(147,t));var C=g,T=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===T?s.ref:(s=function(P){var H=C.refs;P===null?delete H[T]:H[T]=P},s._stringRef=T,s)}if(typeof t!="string")throw Error(a(284));if(!f._owner)throw Error(a(290,t))}return t}function vl(t,s){throw t=Object.prototype.toString.call(s),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function wh(t){var s=t._init;return s(t._payload)}function vh(t){function s(re,Z){if(t){var se=re.deletions;se===null?(re.deletions=[Z],re.flags|=16):se.push(Z)}}function f(re,Z){if(!t)return null;for(;Z!==null;)s(re,Z),Z=Z.sibling;return null}function g(re,Z){for(re=new Map;Z!==null;)Z.key!==null?re.set(Z.key,Z):re.set(Z.index,Z),Z=Z.sibling;return re}function C(re,Z){return re=ps(re,Z),re.index=0,re.sibling=null,re}function T(re,Z,se){return re.index=se,t?(se=re.alternate,se!==null?(se=se.index,se<Z?(re.flags|=2,Z):se):(re.flags|=2,Z)):(re.flags|=1048576,Z)}function P(re){return t&&re.alternate===null&&(re.flags|=2),re}function H(re,Z,se,Ie){return Z===null||Z.tag!==6?(Z=Ku(se,re.mode,Ie),Z.return=re,Z):(Z=C(Z,se),Z.return=re,Z)}function Y(re,Z,se,Ie){var Ke=se.type;return Ke===q?ve(re,Z,se.props.children,Ie,se.key):Z!==null&&(Z.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===Ue&&wh(Ke)===Z.type)?(Ie=C(Z,se.props),Ie.ref=la(re,Z,se),Ie.return=re,Ie):(Ie=Hl(se.type,se.key,se.props,null,re.mode,Ie),Ie.ref=la(re,Z,se),Ie.return=re,Ie)}function le(re,Z,se,Ie){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==se.containerInfo||Z.stateNode.implementation!==se.implementation?(Z=Zu(se,re.mode,Ie),Z.return=re,Z):(Z=C(Z,se.children||[]),Z.return=re,Z)}function ve(re,Z,se,Ie,Ke){return Z===null||Z.tag!==7?(Z=Gs(se,re.mode,Ie,Ke),Z.return=re,Z):(Z=C(Z,se),Z.return=re,Z)}function Ce(re,Z,se){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Z=Ku(""+Z,re.mode,se),Z.return=re,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case ie:return se=Hl(Z.type,Z.key,Z.props,null,re.mode,se),se.ref=la(re,null,Z),se.return=re,se;case ue:return Z=Zu(Z,re.mode,se),Z.return=re,Z;case Ue:var Ie=Z._init;return Ce(re,Ie(Z._payload),se)}if(xn(Z)||Oe(Z))return Z=Gs(Z,re.mode,se,null),Z.return=re,Z;vl(re,Z)}return null}function ye(re,Z,se,Ie){var Ke=Z!==null?Z.key:null;if(typeof se=="string"&&se!==""||typeof se=="number")return Ke!==null?null:H(re,Z,""+se,Ie);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case ie:return se.key===Ke?Y(re,Z,se,Ie):null;case ue:return se.key===Ke?le(re,Z,se,Ie):null;case Ue:return Ke=se._init,ye(re,Z,Ke(se._payload),Ie)}if(xn(se)||Oe(se))return Ke!==null?null:ve(re,Z,se,Ie,null);vl(re,se)}return null}function je(re,Z,se,Ie,Ke){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return re=re.get(se)||null,H(Z,re,""+Ie,Ke);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case ie:return re=re.get(Ie.key===null?se:Ie.key)||null,Y(Z,re,Ie,Ke);case ue:return re=re.get(Ie.key===null?se:Ie.key)||null,le(Z,re,Ie,Ke);case Ue:var rt=Ie._init;return je(re,Z,se,rt(Ie._payload),Ke)}if(xn(Ie)||Oe(Ie))return re=re.get(se)||null,ve(Z,re,Ie,Ke,null);vl(Z,Ie)}return null}function Xe(re,Z,se,Ie){for(var Ke=null,rt=null,it=Z,ft=Z=0,Vn=null;it!==null&&ft<se.length;ft++){it.index>ft?(Vn=it,it=null):Vn=it.sibling;var jt=ye(re,it,se[ft],Ie);if(jt===null){it===null&&(it=Vn);break}t&&it&&jt.alternate===null&&s(re,it),Z=T(jt,Z,ft),rt===null?Ke=jt:rt.sibling=jt,rt=jt,it=Vn}if(ft===se.length)return f(re,it),Jt&&Bs(re,ft),Ke;if(it===null){for(;ft<se.length;ft++)it=Ce(re,se[ft],Ie),it!==null&&(Z=T(it,Z,ft),rt===null?Ke=it:rt.sibling=it,rt=it);return Jt&&Bs(re,ft),Ke}for(it=g(re,it);ft<se.length;ft++)Vn=je(it,re,ft,se[ft],Ie),Vn!==null&&(t&&Vn.alternate!==null&&it.delete(Vn.key===null?ft:Vn.key),Z=T(Vn,Z,ft),rt===null?Ke=Vn:rt.sibling=Vn,rt=Vn);return t&&it.forEach(function(gs){return s(re,gs)}),Jt&&Bs(re,ft),Ke}function Ye(re,Z,se,Ie){var Ke=Oe(se);if(typeof Ke!="function")throw Error(a(150));if(se=Ke.call(se),se==null)throw Error(a(151));for(var rt=Ke=null,it=Z,ft=Z=0,Vn=null,jt=se.next();it!==null&&!jt.done;ft++,jt=se.next()){it.index>ft?(Vn=it,it=null):Vn=it.sibling;var gs=ye(re,it,jt.value,Ie);if(gs===null){it===null&&(it=Vn);break}t&&it&&gs.alternate===null&&s(re,it),Z=T(gs,Z,ft),rt===null?Ke=gs:rt.sibling=gs,rt=gs,it=Vn}if(jt.done)return f(re,it),Jt&&Bs(re,ft),Ke;if(it===null){for(;!jt.done;ft++,jt=se.next())jt=Ce(re,jt.value,Ie),jt!==null&&(Z=T(jt,Z,ft),rt===null?Ke=jt:rt.sibling=jt,rt=jt);return Jt&&Bs(re,ft),Ke}for(it=g(re,it);!jt.done;ft++,jt=se.next())jt=je(it,re,ft,jt.value,Ie),jt!==null&&(t&&jt.alternate!==null&&it.delete(jt.key===null?ft:jt.key),Z=T(jt,Z,ft),rt===null?Ke=jt:rt.sibling=jt,rt=jt);return t&&it.forEach(function(zx){return s(re,zx)}),Jt&&Bs(re,ft),Ke}function Cn(re,Z,se,Ie){if(typeof se=="object"&&se!==null&&se.type===q&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case ie:e:{for(var Ke=se.key,rt=Z;rt!==null;){if(rt.key===Ke){if(Ke=se.type,Ke===q){if(rt.tag===7){f(re,rt.sibling),Z=C(rt,se.props.children),Z.return=re,re=Z;break e}}else if(rt.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===Ue&&wh(Ke)===rt.type){f(re,rt.sibling),Z=C(rt,se.props),Z.ref=la(re,rt,se),Z.return=re,re=Z;break e}f(re,rt);break}else s(re,rt);rt=rt.sibling}se.type===q?(Z=Gs(se.props.children,re.mode,Ie,se.key),Z.return=re,re=Z):(Ie=Hl(se.type,se.key,se.props,null,re.mode,Ie),Ie.ref=la(re,Z,se),Ie.return=re,re=Ie)}return P(re);case ue:e:{for(rt=se.key;Z!==null;){if(Z.key===rt)if(Z.tag===4&&Z.stateNode.containerInfo===se.containerInfo&&Z.stateNode.implementation===se.implementation){f(re,Z.sibling),Z=C(Z,se.children||[]),Z.return=re,re=Z;break e}else{f(re,Z);break}else s(re,Z);Z=Z.sibling}Z=Zu(se,re.mode,Ie),Z.return=re,re=Z}return P(re);case Ue:return rt=se._init,Cn(re,Z,rt(se._payload),Ie)}if(xn(se))return Xe(re,Z,se,Ie);if(Oe(se))return Ye(re,Z,se,Ie);vl(re,se)}return typeof se=="string"&&se!==""||typeof se=="number"?(se=""+se,Z!==null&&Z.tag===6?(f(re,Z.sibling),Z=C(Z,se),Z.return=re,re=Z):(f(re,Z),Z=Ku(se,re.mode,Ie),Z.return=re,re=Z),P(re)):f(re,Z)}return Cn}var yo=vh(!0),Ch=vh(!1),Cl=is(null),El=null,wo=null,iu=null;function su(){iu=wo=El=null}function ou(t){var s=Cl.current;qt(Cl),t._currentValue=s}function au(t,s,f){for(;t!==null;){var g=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,g!==null&&(g.childLanes|=s)):g!==null&&(g.childLanes&s)!==s&&(g.childLanes|=s),t===f)break;t=t.return}}function vo(t,s){El=t,iu=wo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(yr=!0),t.firstContext=null)}function Vr(t){var s=t._currentValue;if(iu!==t)if(t={context:t,memoizedValue:s,next:null},wo===null){if(El===null)throw Error(a(308));wo=t,El.dependencies={lanes:0,firstContext:t}}else wo=wo.next=t;return s}var Fs=null;function lu(t){Fs===null?Fs=[t]:Fs.push(t)}function Eh(t,s,f,g){var C=s.interleaved;return C===null?(f.next=f,lu(s)):(f.next=C.next,C.next=f),s.interleaved=f,Oi(t,g)}function Oi(t,s){t.lanes|=s;var f=t.alternate;for(f!==null&&(f.lanes|=s),f=t,t=t.return;t!==null;)t.childLanes|=s,f=t.alternate,f!==null&&(f.childLanes|=s),f=t,t=t.return;return f.tag===3?f.stateNode:null}var as=!1;function cu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ah(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Pi(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function ls(t,s,f){var g=t.updateQueue;if(g===null)return null;if(g=g.shared,Bt&2){var C=g.pending;return C===null?s.next=s:(s.next=C.next,C.next=s),g.pending=s,Oi(t,f)}return C=g.interleaved,C===null?(s.next=s,lu(g)):(s.next=C.next,C.next=s),g.interleaved=s,Oi(t,f)}function Al(t,s,f){if(s=s.updateQueue,s!==null&&(s=s.shared,(f&4194240)!==0)){var g=s.lanes;g&=t.pendingLanes,f|=g,s.lanes=f,dn(t,f)}}function bh(t,s){var f=t.updateQueue,g=t.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var C=null,T=null;if(f=f.firstBaseUpdate,f!==null){do{var P={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};T===null?C=T=P:T=T.next=P,f=f.next}while(f!==null);T===null?C=T=s:T=T.next=s}else C=T=s;f={baseState:g.baseState,firstBaseUpdate:C,lastBaseUpdate:T,shared:g.shared,effects:g.effects},t.updateQueue=f;return}t=f.lastBaseUpdate,t===null?f.firstBaseUpdate=s:t.next=s,f.lastBaseUpdate=s}function bl(t,s,f,g){var C=t.updateQueue;as=!1;var T=C.firstBaseUpdate,P=C.lastBaseUpdate,H=C.shared.pending;if(H!==null){C.shared.pending=null;var Y=H,le=Y.next;Y.next=null,P===null?T=le:P.next=le,P=Y;var ve=t.alternate;ve!==null&&(ve=ve.updateQueue,H=ve.lastBaseUpdate,H!==P&&(H===null?ve.firstBaseUpdate=le:H.next=le,ve.lastBaseUpdate=Y))}if(T!==null){var Ce=C.baseState;P=0,ve=le=Y=null,H=T;do{var ye=H.lane,je=H.eventTime;if((g&ye)===ye){ve!==null&&(ve=ve.next={eventTime:je,lane:0,tag:H.tag,payload:H.payload,callback:H.callback,next:null});e:{var Xe=t,Ye=H;switch(ye=s,je=f,Ye.tag){case 1:if(Xe=Ye.payload,typeof Xe=="function"){Ce=Xe.call(je,Ce,ye);break e}Ce=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=Ye.payload,ye=typeof Xe=="function"?Xe.call(je,Ce,ye):Xe,ye==null)break e;Ce=fe({},Ce,ye);break e;case 2:as=!0}}H.callback!==null&&H.lane!==0&&(t.flags|=64,ye=C.effects,ye===null?C.effects=[H]:ye.push(H))}else je={eventTime:je,lane:ye,tag:H.tag,payload:H.payload,callback:H.callback,next:null},ve===null?(le=ve=je,Y=Ce):ve=ve.next=je,P|=ye;if(H=H.next,H===null){if(H=C.shared.pending,H===null)break;ye=H,H=ye.next,ye.next=null,C.lastBaseUpdate=ye,C.shared.pending=null}}while(!0);if(ve===null&&(Y=Ce),C.baseState=Y,C.firstBaseUpdate=le,C.lastBaseUpdate=ve,s=C.shared.interleaved,s!==null){C=s;do P|=C.lane,C=C.next;while(C!==s)}else T===null&&(C.shared.lanes=0);zs|=P,t.lanes=P,t.memoizedState=Ce}}function Sh(t,s,f){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var g=t[s],C=g.callback;if(C!==null){if(g.callback=null,g=f,typeof C!="function")throw Error(a(191,C));C.call(g)}}}var ca={},di=is(ca),ua=is(ca),fa=is(ca);function js(t){if(t===ca)throw Error(a(174));return t}function uu(t,s){switch(Zt(fa,s),Zt(ua,t),Zt(di,ca),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Ut(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=Ut(s,t)}qt(di),Zt(di,s)}function Co(){qt(di),qt(ua),qt(fa)}function Th(t){js(fa.current);var s=js(di.current),f=Ut(s,t.type);s!==f&&(Zt(ua,t),Zt(di,f))}function fu(t){ua.current===t&&(qt(di),qt(ua))}var on=is(0);function Sl(t){for(var s=t;s!==null;){if(s.tag===13){var f=s.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var du=[];function hu(){for(var t=0;t<du.length;t++)du[t]._workInProgressVersionPrimary=null;du.length=0}var Tl=Q.ReactCurrentDispatcher,pu=Q.ReactCurrentBatchConfig,Vs=0,an=null,kn=null,Fn=null,Il=!1,da=!1,ha=0,cx=0;function rr(){throw Error(a(321))}function gu(t,s){if(s===null)return!1;for(var f=0;f<s.length&&f<t.length;f++)if(!J(t[f],s[f]))return!1;return!0}function mu(t,s,f,g,C,T){if(Vs=T,an=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Tl.current=t===null||t.memoizedState===null?hx:px,t=f(g,C),da){T=0;do{if(da=!1,ha=0,25<=T)throw Error(a(301));T+=1,Fn=kn=null,s.updateQueue=null,Tl.current=gx,t=f(g,C)}while(da)}if(Tl.current=Rl,s=kn!==null&&kn.next!==null,Vs=0,Fn=kn=an=null,Il=!1,s)throw Error(a(300));return t}function xu(){var t=ha!==0;return ha=0,t}function hi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fn===null?an.memoizedState=Fn=t:Fn=Fn.next=t,Fn}function zr(){if(kn===null){var t=an.alternate;t=t!==null?t.memoizedState:null}else t=kn.next;var s=Fn===null?an.memoizedState:Fn.next;if(s!==null)Fn=s,kn=t;else{if(t===null)throw Error(a(310));kn=t,t={memoizedState:kn.memoizedState,baseState:kn.baseState,baseQueue:kn.baseQueue,queue:kn.queue,next:null},Fn===null?an.memoizedState=Fn=t:Fn=Fn.next=t}return Fn}function pa(t,s){return typeof s=="function"?s(t):s}function yu(t){var s=zr(),f=s.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=t;var g=kn,C=g.baseQueue,T=f.pending;if(T!==null){if(C!==null){var P=C.next;C.next=T.next,T.next=P}g.baseQueue=C=T,f.pending=null}if(C!==null){T=C.next,g=g.baseState;var H=P=null,Y=null,le=T;do{var ve=le.lane;if((Vs&ve)===ve)Y!==null&&(Y=Y.next={lane:0,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),g=le.hasEagerState?le.eagerState:t(g,le.action);else{var Ce={lane:ve,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null};Y===null?(H=Y=Ce,P=g):Y=Y.next=Ce,an.lanes|=ve,zs|=ve}le=le.next}while(le!==null&&le!==T);Y===null?P=g:Y.next=H,J(g,s.memoizedState)||(yr=!0),s.memoizedState=g,s.baseState=P,s.baseQueue=Y,f.lastRenderedState=g}if(t=f.interleaved,t!==null){C=t;do T=C.lane,an.lanes|=T,zs|=T,C=C.next;while(C!==t)}else C===null&&(f.lanes=0);return[s.memoizedState,f.dispatch]}function wu(t){var s=zr(),f=s.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=t;var g=f.dispatch,C=f.pending,T=s.memoizedState;if(C!==null){f.pending=null;var P=C=C.next;do T=t(T,P.action),P=P.next;while(P!==C);J(T,s.memoizedState)||(yr=!0),s.memoizedState=T,s.baseQueue===null&&(s.baseState=T),f.lastRenderedState=T}return[T,g]}function Ih(){}function Nh(t,s){var f=an,g=zr(),C=s(),T=!J(g.memoizedState,C);if(T&&(g.memoizedState=C,yr=!0),g=g.queue,vu(kh.bind(null,f,g,t),[t]),g.getSnapshot!==s||T||Fn!==null&&Fn.memoizedState.tag&1){if(f.flags|=2048,ga(9,Rh.bind(null,f,g,C,s),void 0,null),jn===null)throw Error(a(349));Vs&30||_h(f,s,C)}return C}function _h(t,s,f){t.flags|=16384,t={getSnapshot:s,value:f},s=an.updateQueue,s===null?(s={lastEffect:null,stores:null},an.updateQueue=s,s.stores=[t]):(f=s.stores,f===null?s.stores=[t]:f.push(t))}function Rh(t,s,f,g){s.value=f,s.getSnapshot=g,Oh(s)&&Ph(t)}function kh(t,s,f){return f(function(){Oh(s)&&Ph(t)})}function Oh(t){var s=t.getSnapshot;t=t.value;try{var f=s();return!J(t,f)}catch{return!0}}function Ph(t){var s=Oi(t,1);s!==null&&ri(s,t,1,-1)}function Mh(t){var s=hi();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:t},s.queue=t,t=t.dispatch=dx.bind(null,an,t),[s.memoizedState,t]}function ga(t,s,f,g){return t={tag:t,create:s,destroy:f,deps:g,next:null},s=an.updateQueue,s===null?(s={lastEffect:null,stores:null},an.updateQueue=s,s.lastEffect=t.next=t):(f=s.lastEffect,f===null?s.lastEffect=t.next=t:(g=f.next,f.next=t,t.next=g,s.lastEffect=t)),t}function Dh(){return zr().memoizedState}function Nl(t,s,f,g){var C=hi();an.flags|=t,C.memoizedState=ga(1|s,f,void 0,g===void 0?null:g)}function _l(t,s,f,g){var C=zr();g=g===void 0?null:g;var T=void 0;if(kn!==null){var P=kn.memoizedState;if(T=P.destroy,g!==null&&gu(g,P.deps)){C.memoizedState=ga(s,f,T,g);return}}an.flags|=t,C.memoizedState=ga(1|s,f,T,g)}function Lh(t,s){return Nl(8390656,8,t,s)}function vu(t,s){return _l(2048,8,t,s)}function Bh(t,s){return _l(4,2,t,s)}function Fh(t,s){return _l(4,4,t,s)}function jh(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Vh(t,s,f){return f=f!=null?f.concat([t]):null,_l(4,4,jh.bind(null,s,t),f)}function Cu(){}function zh(t,s){var f=zr();s=s===void 0?null:s;var g=f.memoizedState;return g!==null&&s!==null&&gu(s,g[1])?g[0]:(f.memoizedState=[t,s],t)}function Uh(t,s){var f=zr();s=s===void 0?null:s;var g=f.memoizedState;return g!==null&&s!==null&&gu(s,g[1])?g[0]:(t=t(),f.memoizedState=[t,s],t)}function Wh(t,s,f){return Vs&21?(J(f,s)||(f=In(),an.lanes|=f,zs|=f,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,yr=!0),t.memoizedState=f)}function ux(t,s){var f=wt;wt=f!==0&&4>f?f:4,t(!0);var g=pu.transition;pu.transition={};try{t(!1),s()}finally{wt=f,pu.transition=g}}function Hh(){return zr().memoizedState}function fx(t,s,f){var g=ds(t);if(f={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null},Gh(t))Xh(s,f);else if(f=Eh(t,s,f,g),f!==null){var C=fr();ri(f,t,g,C),Yh(f,s,g)}}function dx(t,s,f){var g=ds(t),C={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null};if(Gh(t))Xh(s,C);else{var T=t.alternate;if(t.lanes===0&&(T===null||T.lanes===0)&&(T=s.lastRenderedReducer,T!==null))try{var P=s.lastRenderedState,H=T(P,f);if(C.hasEagerState=!0,C.eagerState=H,J(H,P)){var Y=s.interleaved;Y===null?(C.next=C,lu(s)):(C.next=Y.next,Y.next=C),s.interleaved=C;return}}catch{}finally{}f=Eh(t,s,C,g),f!==null&&(C=fr(),ri(f,t,g,C),Yh(f,s,g))}}function Gh(t){var s=t.alternate;return t===an||s!==null&&s===an}function Xh(t,s){da=Il=!0;var f=t.pending;f===null?s.next=s:(s.next=f.next,f.next=s),t.pending=s}function Yh(t,s,f){if(f&4194240){var g=s.lanes;g&=t.pendingLanes,f|=g,s.lanes=f,dn(t,f)}}var Rl={readContext:Vr,useCallback:rr,useContext:rr,useEffect:rr,useImperativeHandle:rr,useInsertionEffect:rr,useLayoutEffect:rr,useMemo:rr,useReducer:rr,useRef:rr,useState:rr,useDebugValue:rr,useDeferredValue:rr,useTransition:rr,useMutableSource:rr,useSyncExternalStore:rr,useId:rr,unstable_isNewReconciler:!1},hx={readContext:Vr,useCallback:function(t,s){return hi().memoizedState=[t,s===void 0?null:s],t},useContext:Vr,useEffect:Lh,useImperativeHandle:function(t,s,f){return f=f!=null?f.concat([t]):null,Nl(4194308,4,jh.bind(null,s,t),f)},useLayoutEffect:function(t,s){return Nl(4194308,4,t,s)},useInsertionEffect:function(t,s){return Nl(4,2,t,s)},useMemo:function(t,s){var f=hi();return s=s===void 0?null:s,t=t(),f.memoizedState=[t,s],t},useReducer:function(t,s,f){var g=hi();return s=f!==void 0?f(s):s,g.memoizedState=g.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},g.queue=t,t=t.dispatch=fx.bind(null,an,t),[g.memoizedState,t]},useRef:function(t){var s=hi();return t={current:t},s.memoizedState=t},useState:Mh,useDebugValue:Cu,useDeferredValue:function(t){return hi().memoizedState=t},useTransition:function(){var t=Mh(!1),s=t[0];return t=ux.bind(null,t[1]),hi().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,f){var g=an,C=hi();if(Jt){if(f===void 0)throw Error(a(407));f=f()}else{if(f=s(),jn===null)throw Error(a(349));Vs&30||_h(g,s,f)}C.memoizedState=f;var T={value:f,getSnapshot:s};return C.queue=T,Lh(kh.bind(null,g,T,t),[t]),g.flags|=2048,ga(9,Rh.bind(null,g,T,f,s),void 0,null),f},useId:function(){var t=hi(),s=jn.identifierPrefix;if(Jt){var f=ki,g=Ri;f=(g&~(1<<32-cr(g)-1)).toString(32)+f,s=":"+s+"R"+f,f=ha++,0<f&&(s+="H"+f.toString(32)),s+=":"}else f=cx++,s=":"+s+"r"+f.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},px={readContext:Vr,useCallback:zh,useContext:Vr,useEffect:vu,useImperativeHandle:Vh,useInsertionEffect:Bh,useLayoutEffect:Fh,useMemo:Uh,useReducer:yu,useRef:Dh,useState:function(){return yu(pa)},useDebugValue:Cu,useDeferredValue:function(t){var s=zr();return Wh(s,kn.memoizedState,t)},useTransition:function(){var t=yu(pa)[0],s=zr().memoizedState;return[t,s]},useMutableSource:Ih,useSyncExternalStore:Nh,useId:Hh,unstable_isNewReconciler:!1},gx={readContext:Vr,useCallback:zh,useContext:Vr,useEffect:vu,useImperativeHandle:Vh,useInsertionEffect:Bh,useLayoutEffect:Fh,useMemo:Uh,useReducer:wu,useRef:Dh,useState:function(){return wu(pa)},useDebugValue:Cu,useDeferredValue:function(t){var s=zr();return kn===null?s.memoizedState=t:Wh(s,kn.memoizedState,t)},useTransition:function(){var t=wu(pa)[0],s=zr().memoizedState;return[t,s]},useMutableSource:Ih,useSyncExternalStore:Nh,useId:Hh,unstable_isNewReconciler:!1};function ei(t,s){if(t&&t.defaultProps){s=fe({},s),t=t.defaultProps;for(var f in t)s[f]===void 0&&(s[f]=t[f]);return s}return s}function Eu(t,s,f,g){s=t.memoizedState,f=f(g,s),f=f==null?s:fe({},s,f),t.memoizedState=f,t.lanes===0&&(t.updateQueue.baseState=f)}var kl={isMounted:function(t){return(t=t._reactInternals)?Qn(t)===t:!1},enqueueSetState:function(t,s,f){t=t._reactInternals;var g=fr(),C=ds(t),T=Pi(g,C);T.payload=s,f!=null&&(T.callback=f),s=ls(t,T,C),s!==null&&(ri(s,t,C,g),Al(s,t,C))},enqueueReplaceState:function(t,s,f){t=t._reactInternals;var g=fr(),C=ds(t),T=Pi(g,C);T.tag=1,T.payload=s,f!=null&&(T.callback=f),s=ls(t,T,C),s!==null&&(ri(s,t,C,g),Al(s,t,C))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var f=fr(),g=ds(t),C=Pi(f,g);C.tag=2,s!=null&&(C.callback=s),s=ls(t,C,g),s!==null&&(ri(s,t,g,f),Al(s,t,g))}};function Kh(t,s,f,g,C,T,P){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(g,T,P):s.prototype&&s.prototype.isPureReactComponent?!oe(f,g)||!oe(C,T):!0}function Zh(t,s,f){var g=!1,C=ss,T=s.contextType;return typeof T=="object"&&T!==null?T=Vr(T):(C=xr(s)?Ds:nr.current,g=s.contextTypes,T=(g=g!=null)?po(t,C):ss),s=new s(f,T),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=kl,t.stateNode=s,s._reactInternals=t,g&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=C,t.__reactInternalMemoizedMaskedChildContext=T),s}function $h(t,s,f,g){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(f,g),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(f,g),s.state!==t&&kl.enqueueReplaceState(s,s.state,null)}function Au(t,s,f,g){var C=t.stateNode;C.props=f,C.state=t.memoizedState,C.refs={},cu(t);var T=s.contextType;typeof T=="object"&&T!==null?C.context=Vr(T):(T=xr(s)?Ds:nr.current,C.context=po(t,T)),C.state=t.memoizedState,T=s.getDerivedStateFromProps,typeof T=="function"&&(Eu(t,s,T,f),C.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(s=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),s!==C.state&&kl.enqueueReplaceState(C,C.state,null),bl(t,f,C,g),C.state=t.memoizedState),typeof C.componentDidMount=="function"&&(t.flags|=4194308)}function Eo(t,s){try{var f="",g=s;do f+=Se(g),g=g.return;while(g);var C=f}catch(T){C=`
Error generating stack: `+T.message+`
`+T.stack}return{value:t,source:s,stack:C,digest:null}}function bu(t,s,f){return{value:t,source:null,stack:f??null,digest:s??null}}function Su(t,s){try{console.error(s.value)}catch(f){setTimeout(function(){throw f})}}var mx=typeof WeakMap=="function"?WeakMap:Map;function qh(t,s,f){f=Pi(-1,f),f.tag=3,f.payload={element:null};var g=s.value;return f.callback=function(){Fl||(Fl=!0,Vu=g),Su(t,s)},f}function Qh(t,s,f){f=Pi(-1,f),f.tag=3;var g=t.type.getDerivedStateFromError;if(typeof g=="function"){var C=s.value;f.payload=function(){return g(C)},f.callback=function(){Su(t,s)}}var T=t.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(f.callback=function(){Su(t,s),typeof g!="function"&&(us===null?us=new Set([this]):us.add(this));var P=s.stack;this.componentDidCatch(s.value,{componentStack:P!==null?P:""})}),f}function Jh(t,s,f){var g=t.pingCache;if(g===null){g=t.pingCache=new mx;var C=new Set;g.set(s,C)}else C=g.get(s),C===void 0&&(C=new Set,g.set(s,C));C.has(f)||(C.add(f),t=Rx.bind(null,t,s,f),s.then(t,t))}function e0(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function t0(t,s,f,g,C){return t.mode&1?(t.flags|=65536,t.lanes=C,t):(t===s?t.flags|=65536:(t.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(s=Pi(-1,1),s.tag=2,ls(f,s,1))),f.lanes|=1),t)}var xx=Q.ReactCurrentOwner,yr=!1;function ur(t,s,f,g){s.child=t===null?Ch(s,null,f,g):yo(s,t.child,f,g)}function n0(t,s,f,g,C){f=f.render;var T=s.ref;return vo(s,C),g=mu(t,s,f,g,T,C),f=xu(),t!==null&&!yr?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~C,Mi(t,s,C)):(Jt&&f&&Jc(s),s.flags|=1,ur(t,s,g,C),s.child)}function r0(t,s,f,g,C){if(t===null){var T=f.type;return typeof T=="function"&&!Yu(T)&&T.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(s.tag=15,s.type=T,i0(t,s,T,g,C)):(t=Hl(f.type,null,g,s,s.mode,C),t.ref=s.ref,t.return=s,s.child=t)}if(T=t.child,!(t.lanes&C)){var P=T.memoizedProps;if(f=f.compare,f=f!==null?f:oe,f(P,g)&&t.ref===s.ref)return Mi(t,s,C)}return s.flags|=1,t=ps(T,g),t.ref=s.ref,t.return=s,s.child=t}function i0(t,s,f,g,C){if(t!==null){var T=t.memoizedProps;if(oe(T,g)&&t.ref===s.ref)if(yr=!1,s.pendingProps=g=T,(t.lanes&C)!==0)t.flags&131072&&(yr=!0);else return s.lanes=t.lanes,Mi(t,s,C)}return Tu(t,s,f,g,C)}function s0(t,s,f){var g=s.pendingProps,C=g.children,T=t!==null?t.memoizedState:null;if(g.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Zt(bo,kr),kr|=f;else{if(!(f&1073741824))return t=T!==null?T.baseLanes|f:f,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Zt(bo,kr),kr|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=T!==null?T.baseLanes:f,Zt(bo,kr),kr|=g}else T!==null?(g=T.baseLanes|f,s.memoizedState=null):g=f,Zt(bo,kr),kr|=g;return ur(t,s,C,f),s.child}function o0(t,s){var f=s.ref;(t===null&&f!==null||t!==null&&t.ref!==f)&&(s.flags|=512,s.flags|=2097152)}function Tu(t,s,f,g,C){var T=xr(f)?Ds:nr.current;return T=po(s,T),vo(s,C),f=mu(t,s,f,g,T,C),g=xu(),t!==null&&!yr?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~C,Mi(t,s,C)):(Jt&&g&&Jc(s),s.flags|=1,ur(t,s,f,C),s.child)}function a0(t,s,f,g,C){if(xr(f)){var T=!0;gl(s)}else T=!1;if(vo(s,C),s.stateNode===null)Pl(t,s),Zh(s,f,g),Au(s,f,g,C),g=!0;else if(t===null){var P=s.stateNode,H=s.memoizedProps;P.props=H;var Y=P.context,le=f.contextType;typeof le=="object"&&le!==null?le=Vr(le):(le=xr(f)?Ds:nr.current,le=po(s,le));var ve=f.getDerivedStateFromProps,Ce=typeof ve=="function"||typeof P.getSnapshotBeforeUpdate=="function";Ce||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(H!==g||Y!==le)&&$h(s,P,g,le),as=!1;var ye=s.memoizedState;P.state=ye,bl(s,g,P,C),Y=s.memoizedState,H!==g||ye!==Y||mr.current||as?(typeof ve=="function"&&(Eu(s,f,ve,g),Y=s.memoizedState),(H=as||Kh(s,f,H,g,ye,Y,le))?(Ce||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(s.flags|=4194308)):(typeof P.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=g,s.memoizedState=Y),P.props=g,P.state=Y,P.context=le,g=H):(typeof P.componentDidMount=="function"&&(s.flags|=4194308),g=!1)}else{P=s.stateNode,Ah(t,s),H=s.memoizedProps,le=s.type===s.elementType?H:ei(s.type,H),P.props=le,Ce=s.pendingProps,ye=P.context,Y=f.contextType,typeof Y=="object"&&Y!==null?Y=Vr(Y):(Y=xr(f)?Ds:nr.current,Y=po(s,Y));var je=f.getDerivedStateFromProps;(ve=typeof je=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(H!==Ce||ye!==Y)&&$h(s,P,g,Y),as=!1,ye=s.memoizedState,P.state=ye,bl(s,g,P,C);var Xe=s.memoizedState;H!==Ce||ye!==Xe||mr.current||as?(typeof je=="function"&&(Eu(s,f,je,g),Xe=s.memoizedState),(le=as||Kh(s,f,le,g,ye,Xe,Y)||!1)?(ve||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(g,Xe,Y),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(g,Xe,Y)),typeof P.componentDidUpdate=="function"&&(s.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof P.componentDidUpdate!="function"||H===t.memoizedProps&&ye===t.memoizedState||(s.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||H===t.memoizedProps&&ye===t.memoizedState||(s.flags|=1024),s.memoizedProps=g,s.memoizedState=Xe),P.props=g,P.state=Xe,P.context=Y,g=le):(typeof P.componentDidUpdate!="function"||H===t.memoizedProps&&ye===t.memoizedState||(s.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||H===t.memoizedProps&&ye===t.memoizedState||(s.flags|=1024),g=!1)}return Iu(t,s,f,g,T,C)}function Iu(t,s,f,g,C,T){o0(t,s);var P=(s.flags&128)!==0;if(!g&&!P)return C&&dh(s,f,!1),Mi(t,s,T);g=s.stateNode,xx.current=s;var H=P&&typeof f.getDerivedStateFromError!="function"?null:g.render();return s.flags|=1,t!==null&&P?(s.child=yo(s,t.child,null,T),s.child=yo(s,null,H,T)):ur(t,s,H,T),s.memoizedState=g.state,C&&dh(s,f,!0),s.child}function l0(t){var s=t.stateNode;s.pendingContext?uh(t,s.pendingContext,s.pendingContext!==s.context):s.context&&uh(t,s.context,!1),uu(t,s.containerInfo)}function c0(t,s,f,g,C){return xo(),ru(C),s.flags|=256,ur(t,s,f,g),s.child}var Nu={dehydrated:null,treeContext:null,retryLane:0};function _u(t){return{baseLanes:t,cachePool:null,transitions:null}}function u0(t,s,f){var g=s.pendingProps,C=on.current,T=!1,P=(s.flags&128)!==0,H;if((H=P)||(H=t!==null&&t.memoizedState===null?!1:(C&2)!==0),H?(T=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(C|=1),Zt(on,C&1),t===null)return nu(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(P=g.children,t=g.fallback,T?(g=s.mode,T=s.child,P={mode:"hidden",children:P},!(g&1)&&T!==null?(T.childLanes=0,T.pendingProps=P):T=Gl(P,g,0,null),t=Gs(t,g,f,null),T.return=s,t.return=s,T.sibling=t,s.child=T,s.child.memoizedState=_u(f),s.memoizedState=Nu,t):Ru(s,P));if(C=t.memoizedState,C!==null&&(H=C.dehydrated,H!==null))return yx(t,s,P,g,H,C,f);if(T){T=g.fallback,P=s.mode,C=t.child,H=C.sibling;var Y={mode:"hidden",children:g.children};return!(P&1)&&s.child!==C?(g=s.child,g.childLanes=0,g.pendingProps=Y,s.deletions=null):(g=ps(C,Y),g.subtreeFlags=C.subtreeFlags&14680064),H!==null?T=ps(H,T):(T=Gs(T,P,f,null),T.flags|=2),T.return=s,g.return=s,g.sibling=T,s.child=g,g=T,T=s.child,P=t.child.memoizedState,P=P===null?_u(f):{baseLanes:P.baseLanes|f,cachePool:null,transitions:P.transitions},T.memoizedState=P,T.childLanes=t.childLanes&~f,s.memoizedState=Nu,g}return T=t.child,t=T.sibling,g=ps(T,{mode:"visible",children:g.children}),!(s.mode&1)&&(g.lanes=f),g.return=s,g.sibling=null,t!==null&&(f=s.deletions,f===null?(s.deletions=[t],s.flags|=16):f.push(t)),s.child=g,s.memoizedState=null,g}function Ru(t,s){return s=Gl({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function Ol(t,s,f,g){return g!==null&&ru(g),yo(s,t.child,null,f),t=Ru(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function yx(t,s,f,g,C,T,P){if(f)return s.flags&256?(s.flags&=-257,g=bu(Error(a(422))),Ol(t,s,P,g)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(T=g.fallback,C=s.mode,g=Gl({mode:"visible",children:g.children},C,0,null),T=Gs(T,C,P,null),T.flags|=2,g.return=s,T.return=s,g.sibling=T,s.child=g,s.mode&1&&yo(s,t.child,null,P),s.child.memoizedState=_u(P),s.memoizedState=Nu,T);if(!(s.mode&1))return Ol(t,s,P,null);if(C.data==="$!"){if(g=C.nextSibling&&C.nextSibling.dataset,g)var H=g.dgst;return g=H,T=Error(a(419)),g=bu(T,g,void 0),Ol(t,s,P,g)}if(H=(P&t.childLanes)!==0,yr||H){if(g=jn,g!==null){switch(P&-P){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}C=C&(g.suspendedLanes|P)?0:C,C!==0&&C!==T.retryLane&&(T.retryLane=C,Oi(t,C),ri(g,t,C,-1))}return Xu(),g=bu(Error(a(421))),Ol(t,s,P,g)}return C.data==="$?"?(s.flags|=128,s.child=t.child,s=kx.bind(null,t),C._reactRetry=s,null):(t=T.treeContext,Rr=rs(C.nextSibling),_r=s,Jt=!0,Jr=null,t!==null&&(Fr[jr++]=Ri,Fr[jr++]=ki,Fr[jr++]=Ls,Ri=t.id,ki=t.overflow,Ls=s),s=Ru(s,g.children),s.flags|=4096,s)}function f0(t,s,f){t.lanes|=s;var g=t.alternate;g!==null&&(g.lanes|=s),au(t.return,s,f)}function ku(t,s,f,g,C){var T=t.memoizedState;T===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:C}:(T.isBackwards=s,T.rendering=null,T.renderingStartTime=0,T.last=g,T.tail=f,T.tailMode=C)}function d0(t,s,f){var g=s.pendingProps,C=g.revealOrder,T=g.tail;if(ur(t,s,g.children,f),g=on.current,g&2)g=g&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&f0(t,f,s);else if(t.tag===19)f0(t,f,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}g&=1}if(Zt(on,g),!(s.mode&1))s.memoizedState=null;else switch(C){case"forwards":for(f=s.child,C=null;f!==null;)t=f.alternate,t!==null&&Sl(t)===null&&(C=f),f=f.sibling;f=C,f===null?(C=s.child,s.child=null):(C=f.sibling,f.sibling=null),ku(s,!1,C,f,T);break;case"backwards":for(f=null,C=s.child,s.child=null;C!==null;){if(t=C.alternate,t!==null&&Sl(t)===null){s.child=C;break}t=C.sibling,C.sibling=f,f=C,C=t}ku(s,!0,f,null,T);break;case"together":ku(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Pl(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function Mi(t,s,f){if(t!==null&&(s.dependencies=t.dependencies),zs|=s.lanes,!(f&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(a(153));if(s.child!==null){for(t=s.child,f=ps(t,t.pendingProps),s.child=f,f.return=s;t.sibling!==null;)t=t.sibling,f=f.sibling=ps(t,t.pendingProps),f.return=s;f.sibling=null}return s.child}function wx(t,s,f){switch(s.tag){case 3:l0(s),xo();break;case 5:Th(s);break;case 1:xr(s.type)&&gl(s);break;case 4:uu(s,s.stateNode.containerInfo);break;case 10:var g=s.type._context,C=s.memoizedProps.value;Zt(Cl,g._currentValue),g._currentValue=C;break;case 13:if(g=s.memoizedState,g!==null)return g.dehydrated!==null?(Zt(on,on.current&1),s.flags|=128,null):f&s.child.childLanes?u0(t,s,f):(Zt(on,on.current&1),t=Mi(t,s,f),t!==null?t.sibling:null);Zt(on,on.current&1);break;case 19:if(g=(f&s.childLanes)!==0,t.flags&128){if(g)return d0(t,s,f);s.flags|=128}if(C=s.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),Zt(on,on.current),g)break;return null;case 22:case 23:return s.lanes=0,s0(t,s,f)}return Mi(t,s,f)}var h0,Ou,p0,g0;h0=function(t,s){for(var f=s.child;f!==null;){if(f.tag===5||f.tag===6)t.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break;for(;f.sibling===null;){if(f.return===null||f.return===s)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},Ou=function(){},p0=function(t,s,f,g){var C=t.memoizedProps;if(C!==g){t=s.stateNode,js(di.current);var T=null;switch(f){case"input":C=nt(t,C),g=nt(t,g),T=[];break;case"select":C=fe({},C,{value:void 0}),g=fe({},g,{value:void 0}),T=[];break;case"textarea":C=zn(t,C),g=zn(t,g),T=[];break;default:typeof C.onClick!="function"&&typeof g.onClick=="function"&&(t.onclick=dl)}st(f,g);var P;f=null;for(le in C)if(!g.hasOwnProperty(le)&&C.hasOwnProperty(le)&&C[le]!=null)if(le==="style"){var H=C[le];for(P in H)H.hasOwnProperty(P)&&(f||(f={}),f[P]="")}else le!=="dangerouslySetInnerHTML"&&le!=="children"&&le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&le!=="autoFocus"&&(p.hasOwnProperty(le)?T||(T=[]):(T=T||[]).push(le,null));for(le in g){var Y=g[le];if(H=C!=null?C[le]:void 0,g.hasOwnProperty(le)&&Y!==H&&(Y!=null||H!=null))if(le==="style")if(H){for(P in H)!H.hasOwnProperty(P)||Y&&Y.hasOwnProperty(P)||(f||(f={}),f[P]="");for(P in Y)Y.hasOwnProperty(P)&&H[P]!==Y[P]&&(f||(f={}),f[P]=Y[P])}else f||(T||(T=[]),T.push(le,f)),f=Y;else le==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,H=H?H.__html:void 0,Y!=null&&H!==Y&&(T=T||[]).push(le,Y)):le==="children"?typeof Y!="string"&&typeof Y!="number"||(T=T||[]).push(le,""+Y):le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&(p.hasOwnProperty(le)?(Y!=null&&le==="onScroll"&&$t("scroll",t),T||H===Y||(T=[])):(T=T||[]).push(le,Y))}f&&(T=T||[]).push("style",f);var le=T;(s.updateQueue=le)&&(s.flags|=4)}},g0=function(t,s,f,g){f!==g&&(s.flags|=4)};function ma(t,s){if(!Jt)switch(t.tailMode){case"hidden":s=t.tail;for(var f=null;s!==null;)s.alternate!==null&&(f=s),s=s.sibling;f===null?t.tail=null:f.sibling=null;break;case"collapsed":f=t.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:g.sibling=null}}function ir(t){var s=t.alternate!==null&&t.alternate.child===t.child,f=0,g=0;if(s)for(var C=t.child;C!==null;)f|=C.lanes|C.childLanes,g|=C.subtreeFlags&14680064,g|=C.flags&14680064,C.return=t,C=C.sibling;else for(C=t.child;C!==null;)f|=C.lanes|C.childLanes,g|=C.subtreeFlags,g|=C.flags,C.return=t,C=C.sibling;return t.subtreeFlags|=g,t.childLanes=f,s}function vx(t,s,f){var g=s.pendingProps;switch(eu(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ir(s),null;case 1:return xr(s.type)&&pl(),ir(s),null;case 3:return g=s.stateNode,Co(),qt(mr),qt(nr),hu(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(t===null||t.child===null)&&(wl(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Jr!==null&&(Wu(Jr),Jr=null))),Ou(t,s),ir(s),null;case 5:fu(s);var C=js(fa.current);if(f=s.type,t!==null&&s.stateNode!=null)p0(t,s,f,g,C),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!g){if(s.stateNode===null)throw Error(a(166));return ir(s),null}if(t=js(di.current),wl(s)){g=s.stateNode,f=s.type;var T=s.memoizedProps;switch(g[fi]=s,g[oa]=T,t=(s.mode&1)!==0,f){case"dialog":$t("cancel",g),$t("close",g);break;case"iframe":case"object":case"embed":$t("load",g);break;case"video":case"audio":for(C=0;C<ra.length;C++)$t(ra[C],g);break;case"source":$t("error",g);break;case"img":case"image":case"link":$t("error",g),$t("load",g);break;case"details":$t("toggle",g);break;case"input":Pt(g,T),$t("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!T.multiple},$t("invalid",g);break;case"textarea":Ct(g,T),$t("invalid",g)}st(f,T),C=null;for(var P in T)if(T.hasOwnProperty(P)){var H=T[P];P==="children"?typeof H=="string"?g.textContent!==H&&(T.suppressHydrationWarning!==!0&&fl(g.textContent,H,t),C=["children",H]):typeof H=="number"&&g.textContent!==""+H&&(T.suppressHydrationWarning!==!0&&fl(g.textContent,H,t),C=["children",""+H]):p.hasOwnProperty(P)&&H!=null&&P==="onScroll"&&$t("scroll",g)}switch(f){case"input":Ze(g),vt(g,T,!0);break;case"textarea":Ze(g),Je(g);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(g.onclick=dl)}g=C,s.updateQueue=g,g!==null&&(s.flags|=4)}else{P=C.nodeType===9?C:C.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=gt(f)),t==="http://www.w3.org/1999/xhtml"?f==="script"?(t=P.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof g.is=="string"?t=P.createElement(f,{is:g.is}):(t=P.createElement(f),f==="select"&&(P=t,g.multiple?P.multiple=!0:g.size&&(P.size=g.size))):t=P.createElementNS(t,f),t[fi]=s,t[oa]=g,h0(t,s,!1,!1),s.stateNode=t;e:{switch(P=Rt(f,g),f){case"dialog":$t("cancel",t),$t("close",t),C=g;break;case"iframe":case"object":case"embed":$t("load",t),C=g;break;case"video":case"audio":for(C=0;C<ra.length;C++)$t(ra[C],t);C=g;break;case"source":$t("error",t),C=g;break;case"img":case"image":case"link":$t("error",t),$t("load",t),C=g;break;case"details":$t("toggle",t),C=g;break;case"input":Pt(t,g),C=nt(t,g),$t("invalid",t);break;case"option":C=g;break;case"select":t._wrapperState={wasMultiple:!!g.multiple},C=fe({},g,{value:void 0}),$t("invalid",t);break;case"textarea":Ct(t,g),C=zn(t,g),$t("invalid",t);break;default:C=g}st(f,C),H=C;for(T in H)if(H.hasOwnProperty(T)){var Y=H[T];T==="style"?he(t,Y):T==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,Y!=null&&At(t,Y)):T==="children"?typeof Y=="string"?(f!=="textarea"||Y!=="")&&nn(t,Y):typeof Y=="number"&&nn(t,""+Y):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(p.hasOwnProperty(T)?Y!=null&&T==="onScroll"&&$t("scroll",t):Y!=null&&z(t,T,Y,P))}switch(f){case"input":Ze(t),vt(t,g,!1);break;case"textarea":Ze(t),Je(t);break;case"option":g.value!=null&&t.setAttribute("value",""+Fe(g.value));break;case"select":t.multiple=!!g.multiple,T=g.value,T!=null?Te(t,!!g.multiple,T,!1):g.defaultValue!=null&&Te(t,!!g.multiple,g.defaultValue,!0);break;default:typeof C.onClick=="function"&&(t.onclick=dl)}switch(f){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return ir(s),null;case 6:if(t&&s.stateNode!=null)g0(t,s,t.memoizedProps,g);else{if(typeof g!="string"&&s.stateNode===null)throw Error(a(166));if(f=js(fa.current),js(di.current),wl(s)){if(g=s.stateNode,f=s.memoizedProps,g[fi]=s,(T=g.nodeValue!==f)&&(t=_r,t!==null))switch(t.tag){case 3:fl(g.nodeValue,f,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fl(g.nodeValue,f,(t.mode&1)!==0)}T&&(s.flags|=4)}else g=(f.nodeType===9?f:f.ownerDocument).createTextNode(g),g[fi]=s,s.stateNode=g}return ir(s),null;case 13:if(qt(on),g=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Jt&&Rr!==null&&s.mode&1&&!(s.flags&128))yh(),xo(),s.flags|=98560,T=!1;else if(T=wl(s),g!==null&&g.dehydrated!==null){if(t===null){if(!T)throw Error(a(318));if(T=s.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(a(317));T[fi]=s}else xo(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;ir(s),T=!1}else Jr!==null&&(Wu(Jr),Jr=null),T=!0;if(!T)return s.flags&65536?s:null}return s.flags&128?(s.lanes=f,s):(g=g!==null,g!==(t!==null&&t.memoizedState!==null)&&g&&(s.child.flags|=8192,s.mode&1&&(t===null||on.current&1?On===0&&(On=3):Xu())),s.updateQueue!==null&&(s.flags|=4),ir(s),null);case 4:return Co(),Ou(t,s),t===null&&ia(s.stateNode.containerInfo),ir(s),null;case 10:return ou(s.type._context),ir(s),null;case 17:return xr(s.type)&&pl(),ir(s),null;case 19:if(qt(on),T=s.memoizedState,T===null)return ir(s),null;if(g=(s.flags&128)!==0,P=T.rendering,P===null)if(g)ma(T,!1);else{if(On!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(P=Sl(t),P!==null){for(s.flags|=128,ma(T,!1),g=P.updateQueue,g!==null&&(s.updateQueue=g,s.flags|=4),s.subtreeFlags=0,g=f,f=s.child;f!==null;)T=f,t=g,T.flags&=14680066,P=T.alternate,P===null?(T.childLanes=0,T.lanes=t,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=P.childLanes,T.lanes=P.lanes,T.child=P.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=P.memoizedProps,T.memoizedState=P.memoizedState,T.updateQueue=P.updateQueue,T.type=P.type,t=P.dependencies,T.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),f=f.sibling;return Zt(on,on.current&1|2),s.child}t=t.sibling}T.tail!==null&&Ft()>So&&(s.flags|=128,g=!0,ma(T,!1),s.lanes=4194304)}else{if(!g)if(t=Sl(P),t!==null){if(s.flags|=128,g=!0,f=t.updateQueue,f!==null&&(s.updateQueue=f,s.flags|=4),ma(T,!0),T.tail===null&&T.tailMode==="hidden"&&!P.alternate&&!Jt)return ir(s),null}else 2*Ft()-T.renderingStartTime>So&&f!==1073741824&&(s.flags|=128,g=!0,ma(T,!1),s.lanes=4194304);T.isBackwards?(P.sibling=s.child,s.child=P):(f=T.last,f!==null?f.sibling=P:s.child=P,T.last=P)}return T.tail!==null?(s=T.tail,T.rendering=s,T.tail=s.sibling,T.renderingStartTime=Ft(),s.sibling=null,f=on.current,Zt(on,g?f&1|2:f&1),s):(ir(s),null);case 22:case 23:return Gu(),g=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==g&&(s.flags|=8192),g&&s.mode&1?kr&1073741824&&(ir(s),s.subtreeFlags&6&&(s.flags|=8192)):ir(s),null;case 24:return null;case 25:return null}throw Error(a(156,s.tag))}function Cx(t,s){switch(eu(s),s.tag){case 1:return xr(s.type)&&pl(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Co(),qt(mr),qt(nr),hu(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return fu(s),null;case 13:if(qt(on),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(a(340));xo()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return qt(on),null;case 4:return Co(),null;case 10:return ou(s.type._context),null;case 22:case 23:return Gu(),null;case 24:return null;default:return null}}var Ml=!1,sr=!1,Ex=typeof WeakSet=="function"?WeakSet:Set,He=null;function Ao(t,s){var f=t.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(g){pn(t,s,g)}else f.current=null}function Pu(t,s,f){try{f()}catch(g){pn(t,s,g)}}var m0=!1;function Ax(t,s){if(Gc=ci,t=bt(),ht(t)){if("selectionStart"in t)var f={start:t.selectionStart,end:t.selectionEnd};else e:{f=(f=t.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var C=g.anchorOffset,T=g.focusNode;g=g.focusOffset;try{f.nodeType,T.nodeType}catch{f=null;break e}var P=0,H=-1,Y=-1,le=0,ve=0,Ce=t,ye=null;t:for(;;){for(var je;Ce!==f||C!==0&&Ce.nodeType!==3||(H=P+C),Ce!==T||g!==0&&Ce.nodeType!==3||(Y=P+g),Ce.nodeType===3&&(P+=Ce.nodeValue.length),(je=Ce.firstChild)!==null;)ye=Ce,Ce=je;for(;;){if(Ce===t)break t;if(ye===f&&++le===C&&(H=P),ye===T&&++ve===g&&(Y=P),(je=Ce.nextSibling)!==null)break;Ce=ye,ye=Ce.parentNode}Ce=je}f=H===-1||Y===-1?null:{start:H,end:Y}}else f=null}f=f||{start:0,end:0}}else f=null;for(Xc={focusedElem:t,selectionRange:f},ci=!1,He=s;He!==null;)if(s=He,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,He=t;else for(;He!==null;){s=He;try{var Xe=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Xe!==null){var Ye=Xe.memoizedProps,Cn=Xe.memoizedState,re=s.stateNode,Z=re.getSnapshotBeforeUpdate(s.elementType===s.type?Ye:ei(s.type,Ye),Cn);re.__reactInternalSnapshotBeforeUpdate=Z}break;case 3:var se=s.stateNode.containerInfo;se.nodeType===1?se.textContent="":se.nodeType===9&&se.documentElement&&se.removeChild(se.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(Ie){pn(s,s.return,Ie)}if(t=s.sibling,t!==null){t.return=s.return,He=t;break}He=s.return}return Xe=m0,m0=!1,Xe}function xa(t,s,f){var g=s.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var C=g=g.next;do{if((C.tag&t)===t){var T=C.destroy;C.destroy=void 0,T!==void 0&&Pu(s,f,T)}C=C.next}while(C!==g)}}function Dl(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var f=s=s.next;do{if((f.tag&t)===t){var g=f.create;f.destroy=g()}f=f.next}while(f!==s)}}function Mu(t){var s=t.ref;if(s!==null){var f=t.stateNode;switch(t.tag){case 5:t=f;break;default:t=f}typeof s=="function"?s(t):s.current=t}}function x0(t){var s=t.alternate;s!==null&&(t.alternate=null,x0(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[fi],delete s[oa],delete s[$c],delete s[sx],delete s[ox])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function y0(t){return t.tag===5||t.tag===3||t.tag===4}function w0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||y0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Du(t,s,f){var g=t.tag;if(g===5||g===6)t=t.stateNode,s?f.nodeType===8?f.parentNode.insertBefore(t,s):f.insertBefore(t,s):(f.nodeType===8?(s=f.parentNode,s.insertBefore(t,f)):(s=f,s.appendChild(t)),f=f._reactRootContainer,f!=null||s.onclick!==null||(s.onclick=dl));else if(g!==4&&(t=t.child,t!==null))for(Du(t,s,f),t=t.sibling;t!==null;)Du(t,s,f),t=t.sibling}function Lu(t,s,f){var g=t.tag;if(g===5||g===6)t=t.stateNode,s?f.insertBefore(t,s):f.appendChild(t);else if(g!==4&&(t=t.child,t!==null))for(Lu(t,s,f),t=t.sibling;t!==null;)Lu(t,s,f),t=t.sibling}var Yn=null,ti=!1;function cs(t,s,f){for(f=f.child;f!==null;)v0(t,s,f),f=f.sibling}function v0(t,s,f){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(Tt,f)}catch{}switch(f.tag){case 5:sr||Ao(f,s);case 6:var g=Yn,C=ti;Yn=null,cs(t,s,f),Yn=g,ti=C,Yn!==null&&(ti?(t=Yn,f=f.stateNode,t.nodeType===8?t.parentNode.removeChild(f):t.removeChild(f)):Yn.removeChild(f.stateNode));break;case 18:Yn!==null&&(ti?(t=Yn,f=f.stateNode,t.nodeType===8?Zc(t.parentNode,f):t.nodeType===1&&Zc(t,f),$r(t)):Zc(Yn,f.stateNode));break;case 4:g=Yn,C=ti,Yn=f.stateNode.containerInfo,ti=!0,cs(t,s,f),Yn=g,ti=C;break;case 0:case 11:case 14:case 15:if(!sr&&(g=f.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){C=g=g.next;do{var T=C,P=T.destroy;T=T.tag,P!==void 0&&(T&2||T&4)&&Pu(f,s,P),C=C.next}while(C!==g)}cs(t,s,f);break;case 1:if(!sr&&(Ao(f,s),g=f.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=f.memoizedProps,g.state=f.memoizedState,g.componentWillUnmount()}catch(H){pn(f,s,H)}cs(t,s,f);break;case 21:cs(t,s,f);break;case 22:f.mode&1?(sr=(g=sr)||f.memoizedState!==null,cs(t,s,f),sr=g):cs(t,s,f);break;default:cs(t,s,f)}}function C0(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var f=t.stateNode;f===null&&(f=t.stateNode=new Ex),s.forEach(function(g){var C=Ox.bind(null,t,g);f.has(g)||(f.add(g),g.then(C,C))})}}function ni(t,s){var f=s.deletions;if(f!==null)for(var g=0;g<f.length;g++){var C=f[g];try{var T=t,P=s,H=P;e:for(;H!==null;){switch(H.tag){case 5:Yn=H.stateNode,ti=!1;break e;case 3:Yn=H.stateNode.containerInfo,ti=!0;break e;case 4:Yn=H.stateNode.containerInfo,ti=!0;break e}H=H.return}if(Yn===null)throw Error(a(160));v0(T,P,C),Yn=null,ti=!1;var Y=C.alternate;Y!==null&&(Y.return=null),C.return=null}catch(le){pn(C,s,le)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)E0(s,t),s=s.sibling}function E0(t,s){var f=t.alternate,g=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ni(s,t),pi(t),g&4){try{xa(3,t,t.return),Dl(3,t)}catch(Ye){pn(t,t.return,Ye)}try{xa(5,t,t.return)}catch(Ye){pn(t,t.return,Ye)}}break;case 1:ni(s,t),pi(t),g&512&&f!==null&&Ao(f,f.return);break;case 5:if(ni(s,t),pi(t),g&512&&f!==null&&Ao(f,f.return),t.flags&32){var C=t.stateNode;try{nn(C,"")}catch(Ye){pn(t,t.return,Ye)}}if(g&4&&(C=t.stateNode,C!=null)){var T=t.memoizedProps,P=f!==null?f.memoizedProps:T,H=t.type,Y=t.updateQueue;if(t.updateQueue=null,Y!==null)try{H==="input"&&T.type==="radio"&&T.name!=null&&Dt(C,T),Rt(H,P);var le=Rt(H,T);for(P=0;P<Y.length;P+=2){var ve=Y[P],Ce=Y[P+1];ve==="style"?he(C,Ce):ve==="dangerouslySetInnerHTML"?At(C,Ce):ve==="children"?nn(C,Ce):z(C,ve,Ce,le)}switch(H){case"input":St(C,T);break;case"textarea":Ge(C,T);break;case"select":var ye=C._wrapperState.wasMultiple;C._wrapperState.wasMultiple=!!T.multiple;var je=T.value;je!=null?Te(C,!!T.multiple,je,!1):ye!==!!T.multiple&&(T.defaultValue!=null?Te(C,!!T.multiple,T.defaultValue,!0):Te(C,!!T.multiple,T.multiple?[]:"",!1))}C[oa]=T}catch(Ye){pn(t,t.return,Ye)}}break;case 6:if(ni(s,t),pi(t),g&4){if(t.stateNode===null)throw Error(a(162));C=t.stateNode,T=t.memoizedProps;try{C.nodeValue=T}catch(Ye){pn(t,t.return,Ye)}}break;case 3:if(ni(s,t),pi(t),g&4&&f!==null&&f.memoizedState.isDehydrated)try{$r(s.containerInfo)}catch(Ye){pn(t,t.return,Ye)}break;case 4:ni(s,t),pi(t);break;case 13:ni(s,t),pi(t),C=t.child,C.flags&8192&&(T=C.memoizedState!==null,C.stateNode.isHidden=T,!T||C.alternate!==null&&C.alternate.memoizedState!==null||(ju=Ft())),g&4&&C0(t);break;case 22:if(ve=f!==null&&f.memoizedState!==null,t.mode&1?(sr=(le=sr)||ve,ni(s,t),sr=le):ni(s,t),pi(t),g&8192){if(le=t.memoizedState!==null,(t.stateNode.isHidden=le)&&!ve&&t.mode&1)for(He=t,ve=t.child;ve!==null;){for(Ce=He=ve;He!==null;){switch(ye=He,je=ye.child,ye.tag){case 0:case 11:case 14:case 15:xa(4,ye,ye.return);break;case 1:Ao(ye,ye.return);var Xe=ye.stateNode;if(typeof Xe.componentWillUnmount=="function"){g=ye,f=ye.return;try{s=g,Xe.props=s.memoizedProps,Xe.state=s.memoizedState,Xe.componentWillUnmount()}catch(Ye){pn(g,f,Ye)}}break;case 5:Ao(ye,ye.return);break;case 22:if(ye.memoizedState!==null){S0(Ce);continue}}je!==null?(je.return=ye,He=je):S0(Ce)}ve=ve.sibling}e:for(ve=null,Ce=t;;){if(Ce.tag===5){if(ve===null){ve=Ce;try{C=Ce.stateNode,le?(T=C.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(H=Ce.stateNode,Y=Ce.memoizedProps.style,P=Y!=null&&Y.hasOwnProperty("display")?Y.display:null,H.style.display=De("display",P))}catch(Ye){pn(t,t.return,Ye)}}}else if(Ce.tag===6){if(ve===null)try{Ce.stateNode.nodeValue=le?"":Ce.memoizedProps}catch(Ye){pn(t,t.return,Ye)}}else if((Ce.tag!==22&&Ce.tag!==23||Ce.memoizedState===null||Ce===t)&&Ce.child!==null){Ce.child.return=Ce,Ce=Ce.child;continue}if(Ce===t)break e;for(;Ce.sibling===null;){if(Ce.return===null||Ce.return===t)break e;ve===Ce&&(ve=null),Ce=Ce.return}ve===Ce&&(ve=null),Ce.sibling.return=Ce.return,Ce=Ce.sibling}}break;case 19:ni(s,t),pi(t),g&4&&C0(t);break;case 21:break;default:ni(s,t),pi(t)}}function pi(t){var s=t.flags;if(s&2){try{e:{for(var f=t.return;f!==null;){if(y0(f)){var g=f;break e}f=f.return}throw Error(a(160))}switch(g.tag){case 5:var C=g.stateNode;g.flags&32&&(nn(C,""),g.flags&=-33);var T=w0(t);Lu(t,T,C);break;case 3:case 4:var P=g.stateNode.containerInfo,H=w0(t);Du(t,H,P);break;default:throw Error(a(161))}}catch(Y){pn(t,t.return,Y)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function bx(t,s,f){He=t,A0(t)}function A0(t,s,f){for(var g=(t.mode&1)!==0;He!==null;){var C=He,T=C.child;if(C.tag===22&&g){var P=C.memoizedState!==null||Ml;if(!P){var H=C.alternate,Y=H!==null&&H.memoizedState!==null||sr;H=Ml;var le=sr;if(Ml=P,(sr=Y)&&!le)for(He=C;He!==null;)P=He,Y=P.child,P.tag===22&&P.memoizedState!==null?T0(C):Y!==null?(Y.return=P,He=Y):T0(C);for(;T!==null;)He=T,A0(T),T=T.sibling;He=C,Ml=H,sr=le}b0(t)}else C.subtreeFlags&8772&&T!==null?(T.return=C,He=T):b0(t)}}function b0(t){for(;He!==null;){var s=He;if(s.flags&8772){var f=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:sr||Dl(5,s);break;case 1:var g=s.stateNode;if(s.flags&4&&!sr)if(f===null)g.componentDidMount();else{var C=s.elementType===s.type?f.memoizedProps:ei(s.type,f.memoizedProps);g.componentDidUpdate(C,f.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var T=s.updateQueue;T!==null&&Sh(s,T,g);break;case 3:var P=s.updateQueue;if(P!==null){if(f=null,s.child!==null)switch(s.child.tag){case 5:f=s.child.stateNode;break;case 1:f=s.child.stateNode}Sh(s,P,f)}break;case 5:var H=s.stateNode;if(f===null&&s.flags&4){f=H;var Y=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":Y.autoFocus&&f.focus();break;case"img":Y.src&&(f.src=Y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var le=s.alternate;if(le!==null){var ve=le.memoizedState;if(ve!==null){var Ce=ve.dehydrated;Ce!==null&&$r(Ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}sr||s.flags&512&&Mu(s)}catch(ye){pn(s,s.return,ye)}}if(s===t){He=null;break}if(f=s.sibling,f!==null){f.return=s.return,He=f;break}He=s.return}}function S0(t){for(;He!==null;){var s=He;if(s===t){He=null;break}var f=s.sibling;if(f!==null){f.return=s.return,He=f;break}He=s.return}}function T0(t){for(;He!==null;){var s=He;try{switch(s.tag){case 0:case 11:case 15:var f=s.return;try{Dl(4,s)}catch(Y){pn(s,f,Y)}break;case 1:var g=s.stateNode;if(typeof g.componentDidMount=="function"){var C=s.return;try{g.componentDidMount()}catch(Y){pn(s,C,Y)}}var T=s.return;try{Mu(s)}catch(Y){pn(s,T,Y)}break;case 5:var P=s.return;try{Mu(s)}catch(Y){pn(s,P,Y)}}}catch(Y){pn(s,s.return,Y)}if(s===t){He=null;break}var H=s.sibling;if(H!==null){H.return=s.return,He=H;break}He=s.return}}var Sx=Math.ceil,Ll=Q.ReactCurrentDispatcher,Bu=Q.ReactCurrentOwner,Ur=Q.ReactCurrentBatchConfig,Bt=0,jn=null,bn=null,Kn=0,kr=0,bo=is(0),On=0,ya=null,zs=0,Bl=0,Fu=0,wa=null,wr=null,ju=0,So=1/0,Di=null,Fl=!1,Vu=null,us=null,jl=!1,fs=null,Vl=0,va=0,zu=null,zl=-1,Ul=0;function fr(){return Bt&6?Ft():zl!==-1?zl:zl=Ft()}function ds(t){return t.mode&1?Bt&2&&Kn!==0?Kn&-Kn:lx.transition!==null?(Ul===0&&(Ul=In()),Ul):(t=wt,t!==0||(t=window.event,t=t===void 0?16:Yo(t.type)),t):1}function ri(t,s,f,g){if(50<va)throw va=0,zu=null,Error(a(185));j(t,f,g),(!(Bt&2)||t!==jn)&&(t===jn&&(!(Bt&2)&&(Bl|=f),On===4&&hs(t,Kn)),vr(t,g),f===1&&Bt===0&&!(s.mode&1)&&(So=Ft()+500,ml&&os()))}function vr(t,s){var f=t.callbackNode;Yi(t,s);var g=Sr(t,t===jn?Kn:0);if(g===0)f!==null&&Et(f),t.callbackNode=null,t.callbackPriority=0;else if(s=g&-g,t.callbackPriority!==s){if(f!=null&&Et(f),s===1)t.tag===0?ax(N0.bind(null,t)):hh(N0.bind(null,t)),rx(function(){!(Bt&6)&&os()}),f=null;else{switch(qa(g)){case 1:f=xe;break;case 4:f=gr;break;case 16:f=Mt;break;case 536870912:f=Xi;break;default:f=Mt}f=L0(f,I0.bind(null,t))}t.callbackPriority=s,t.callbackNode=f}}function I0(t,s){if(zl=-1,Ul=0,Bt&6)throw Error(a(327));var f=t.callbackNode;if(To()&&t.callbackNode!==f)return null;var g=Sr(t,t===jn?Kn:0);if(g===0)return null;if(g&30||g&t.expiredLanes||s)s=Wl(t,g);else{s=g;var C=Bt;Bt|=2;var T=R0();(jn!==t||Kn!==s)&&(Di=null,So=Ft()+500,Ws(t,s));do try{Nx();break}catch(H){_0(t,H)}while(!0);su(),Ll.current=T,Bt=C,bn!==null?s=0:(jn=null,Kn=0,s=On)}if(s!==0){if(s===2&&(C=zt(t),C!==0&&(g=C,s=Uu(t,C))),s===1)throw f=ya,Ws(t,0),hs(t,g),vr(t,Ft()),f;if(s===6)hs(t,g);else{if(C=t.current.alternate,!(g&30)&&!Tx(C)&&(s=Wl(t,g),s===2&&(T=zt(t),T!==0&&(g=T,s=Uu(t,T))),s===1))throw f=ya,Ws(t,0),hs(t,g),vr(t,Ft()),f;switch(t.finishedWork=C,t.finishedLanes=g,s){case 0:case 1:throw Error(a(345));case 2:Hs(t,wr,Di);break;case 3:if(hs(t,g),(g&130023424)===g&&(s=ju+500-Ft(),10<s)){if(Sr(t,0)!==0)break;if(C=t.suspendedLanes,(C&g)!==g){fr(),t.pingedLanes|=t.suspendedLanes&C;break}t.timeoutHandle=Kc(Hs.bind(null,t,wr,Di),s);break}Hs(t,wr,Di);break;case 4:if(hs(t,g),(g&4194240)===g)break;for(s=t.eventTimes,C=-1;0<g;){var P=31-cr(g);T=1<<P,P=s[P],P>C&&(C=P),g&=~T}if(g=C,g=Ft()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*Sx(g/1960))-g,10<g){t.timeoutHandle=Kc(Hs.bind(null,t,wr,Di),g);break}Hs(t,wr,Di);break;case 5:Hs(t,wr,Di);break;default:throw Error(a(329))}}}return vr(t,Ft()),t.callbackNode===f?I0.bind(null,t):null}function Uu(t,s){var f=wa;return t.current.memoizedState.isDehydrated&&(Ws(t,s).flags|=256),t=Wl(t,s),t!==2&&(s=wr,wr=f,s!==null&&Wu(s)),t}function Wu(t){wr===null?wr=t:wr.push.apply(wr,t)}function Tx(t){for(var s=t;;){if(s.flags&16384){var f=s.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var g=0;g<f.length;g++){var C=f[g],T=C.getSnapshot;C=C.value;try{if(!J(T(),C))return!1}catch{return!1}}}if(f=s.child,s.subtreeFlags&16384&&f!==null)f.return=s,s=f;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function hs(t,s){for(s&=~Fu,s&=~Bl,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var f=31-cr(s),g=1<<f;t[f]=-1,s&=~g}}function N0(t){if(Bt&6)throw Error(a(327));To();var s=Sr(t,0);if(!(s&1))return vr(t,Ft()),null;var f=Wl(t,s);if(t.tag!==0&&f===2){var g=zt(t);g!==0&&(s=g,f=Uu(t,g))}if(f===1)throw f=ya,Ws(t,0),hs(t,s),vr(t,Ft()),f;if(f===6)throw Error(a(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,Hs(t,wr,Di),vr(t,Ft()),null}function Hu(t,s){var f=Bt;Bt|=1;try{return t(s)}finally{Bt=f,Bt===0&&(So=Ft()+500,ml&&os())}}function Us(t){fs!==null&&fs.tag===0&&!(Bt&6)&&To();var s=Bt;Bt|=1;var f=Ur.transition,g=wt;try{if(Ur.transition=null,wt=1,t)return t()}finally{wt=g,Ur.transition=f,Bt=s,!(Bt&6)&&os()}}function Gu(){kr=bo.current,qt(bo)}function Ws(t,s){t.finishedWork=null,t.finishedLanes=0;var f=t.timeoutHandle;if(f!==-1&&(t.timeoutHandle=-1,nx(f)),bn!==null)for(f=bn.return;f!==null;){var g=f;switch(eu(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&pl();break;case 3:Co(),qt(mr),qt(nr),hu();break;case 5:fu(g);break;case 4:Co();break;case 13:qt(on);break;case 19:qt(on);break;case 10:ou(g.type._context);break;case 22:case 23:Gu()}f=f.return}if(jn=t,bn=t=ps(t.current,null),Kn=kr=s,On=0,ya=null,Fu=Bl=zs=0,wr=wa=null,Fs!==null){for(s=0;s<Fs.length;s++)if(f=Fs[s],g=f.interleaved,g!==null){f.interleaved=null;var C=g.next,T=f.pending;if(T!==null){var P=T.next;T.next=C,g.next=P}f.pending=g}Fs=null}return t}function _0(t,s){do{var f=bn;try{if(su(),Tl.current=Rl,Il){for(var g=an.memoizedState;g!==null;){var C=g.queue;C!==null&&(C.pending=null),g=g.next}Il=!1}if(Vs=0,Fn=kn=an=null,da=!1,ha=0,Bu.current=null,f===null||f.return===null){On=1,ya=s,bn=null;break}e:{var T=t,P=f.return,H=f,Y=s;if(s=Kn,H.flags|=32768,Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var le=Y,ve=H,Ce=ve.tag;if(!(ve.mode&1)&&(Ce===0||Ce===11||Ce===15)){var ye=ve.alternate;ye?(ve.updateQueue=ye.updateQueue,ve.memoizedState=ye.memoizedState,ve.lanes=ye.lanes):(ve.updateQueue=null,ve.memoizedState=null)}var je=e0(P);if(je!==null){je.flags&=-257,t0(je,P,H,T,s),je.mode&1&&Jh(T,le,s),s=je,Y=le;var Xe=s.updateQueue;if(Xe===null){var Ye=new Set;Ye.add(Y),s.updateQueue=Ye}else Xe.add(Y);break e}else{if(!(s&1)){Jh(T,le,s),Xu();break e}Y=Error(a(426))}}else if(Jt&&H.mode&1){var Cn=e0(P);if(Cn!==null){!(Cn.flags&65536)&&(Cn.flags|=256),t0(Cn,P,H,T,s),ru(Eo(Y,H));break e}}T=Y=Eo(Y,H),On!==4&&(On=2),wa===null?wa=[T]:wa.push(T),T=P;do{switch(T.tag){case 3:T.flags|=65536,s&=-s,T.lanes|=s;var re=qh(T,Y,s);bh(T,re);break e;case 1:H=Y;var Z=T.type,se=T.stateNode;if(!(T.flags&128)&&(typeof Z.getDerivedStateFromError=="function"||se!==null&&typeof se.componentDidCatch=="function"&&(us===null||!us.has(se)))){T.flags|=65536,s&=-s,T.lanes|=s;var Ie=Qh(T,H,s);bh(T,Ie);break e}}T=T.return}while(T!==null)}O0(f)}catch(Ke){s=Ke,bn===f&&f!==null&&(bn=f=f.return);continue}break}while(!0)}function R0(){var t=Ll.current;return Ll.current=Rl,t===null?Rl:t}function Xu(){(On===0||On===3||On===2)&&(On=4),jn===null||!(zs&268435455)&&!(Bl&268435455)||hs(jn,Kn)}function Wl(t,s){var f=Bt;Bt|=2;var g=R0();(jn!==t||Kn!==s)&&(Di=null,Ws(t,s));do try{Ix();break}catch(C){_0(t,C)}while(!0);if(su(),Bt=f,Ll.current=g,bn!==null)throw Error(a(261));return jn=null,Kn=0,On}function Ix(){for(;bn!==null;)k0(bn)}function Nx(){for(;bn!==null&&!Me();)k0(bn)}function k0(t){var s=D0(t.alternate,t,kr);t.memoizedProps=t.pendingProps,s===null?O0(t):bn=s,Bu.current=null}function O0(t){var s=t;do{var f=s.alternate;if(t=s.return,s.flags&32768){if(f=Cx(f,s),f!==null){f.flags&=32767,bn=f;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{On=6,bn=null;return}}else if(f=vx(f,s,kr),f!==null){bn=f;return}if(s=s.sibling,s!==null){bn=s;return}bn=s=t}while(s!==null);On===0&&(On=5)}function Hs(t,s,f){var g=wt,C=Ur.transition;try{Ur.transition=null,wt=1,_x(t,s,f,g)}finally{Ur.transition=C,wt=g}return null}function _x(t,s,f,g){do To();while(fs!==null);if(Bt&6)throw Error(a(327));f=t.finishedWork;var C=t.finishedLanes;if(f===null)return null;if(t.finishedWork=null,t.finishedLanes=0,f===t.current)throw Error(a(177));t.callbackNode=null,t.callbackPriority=0;var T=f.lanes|f.childLanes;if($e(t,T),t===jn&&(bn=jn=null,Kn=0),!(f.subtreeFlags&2064)&&!(f.flags&2064)||jl||(jl=!0,L0(Mt,function(){return To(),null})),T=(f.flags&15990)!==0,f.subtreeFlags&15990||T){T=Ur.transition,Ur.transition=null;var P=wt;wt=1;var H=Bt;Bt|=4,Bu.current=null,Ax(t,f),E0(f,t),tr(Xc),ci=!!Gc,Xc=Gc=null,t.current=f,bx(f),Wn(),Bt=H,wt=P,Ur.transition=T}else t.current=f;if(jl&&(jl=!1,fs=t,Vl=C),T=t.pendingLanes,T===0&&(us=null),Nt(f.stateNode),vr(t,Ft()),s!==null)for(g=t.onRecoverableError,f=0;f<s.length;f++)C=s[f],g(C.value,{componentStack:C.stack,digest:C.digest});if(Fl)throw Fl=!1,t=Vu,Vu=null,t;return Vl&1&&t.tag!==0&&To(),T=t.pendingLanes,T&1?t===zu?va++:(va=0,zu=t):va=0,os(),null}function To(){if(fs!==null){var t=qa(Vl),s=Ur.transition,f=wt;try{if(Ur.transition=null,wt=16>t?16:t,fs===null)var g=!1;else{if(t=fs,fs=null,Vl=0,Bt&6)throw Error(a(331));var C=Bt;for(Bt|=4,He=t.current;He!==null;){var T=He,P=T.child;if(He.flags&16){var H=T.deletions;if(H!==null){for(var Y=0;Y<H.length;Y++){var le=H[Y];for(He=le;He!==null;){var ve=He;switch(ve.tag){case 0:case 11:case 15:xa(8,ve,T)}var Ce=ve.child;if(Ce!==null)Ce.return=ve,He=Ce;else for(;He!==null;){ve=He;var ye=ve.sibling,je=ve.return;if(x0(ve),ve===le){He=null;break}if(ye!==null){ye.return=je,He=ye;break}He=je}}}var Xe=T.alternate;if(Xe!==null){var Ye=Xe.child;if(Ye!==null){Xe.child=null;do{var Cn=Ye.sibling;Ye.sibling=null,Ye=Cn}while(Ye!==null)}}He=T}}if(T.subtreeFlags&2064&&P!==null)P.return=T,He=P;else e:for(;He!==null;){if(T=He,T.flags&2048)switch(T.tag){case 0:case 11:case 15:xa(9,T,T.return)}var re=T.sibling;if(re!==null){re.return=T.return,He=re;break e}He=T.return}}var Z=t.current;for(He=Z;He!==null;){P=He;var se=P.child;if(P.subtreeFlags&2064&&se!==null)se.return=P,He=se;else e:for(P=Z;He!==null;){if(H=He,H.flags&2048)try{switch(H.tag){case 0:case 11:case 15:Dl(9,H)}}catch(Ke){pn(H,H.return,Ke)}if(H===P){He=null;break e}var Ie=H.sibling;if(Ie!==null){Ie.return=H.return,He=Ie;break e}He=H.return}}if(Bt=C,os(),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(Tt,t)}catch{}g=!0}return g}finally{wt=f,Ur.transition=s}}return!1}function P0(t,s,f){s=Eo(f,s),s=qh(t,s,1),t=ls(t,s,1),s=fr(),t!==null&&(j(t,1,s),vr(t,s))}function pn(t,s,f){if(t.tag===3)P0(t,t,f);else for(;s!==null;){if(s.tag===3){P0(s,t,f);break}else if(s.tag===1){var g=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(us===null||!us.has(g))){t=Eo(f,t),t=Qh(s,t,1),s=ls(s,t,1),t=fr(),s!==null&&(j(s,1,t),vr(s,t));break}}s=s.return}}function Rx(t,s,f){var g=t.pingCache;g!==null&&g.delete(s),s=fr(),t.pingedLanes|=t.suspendedLanes&f,jn===t&&(Kn&f)===f&&(On===4||On===3&&(Kn&130023424)===Kn&&500>Ft()-ju?Ws(t,0):Fu|=f),vr(t,s)}function M0(t,s){s===0&&(t.mode&1?(s=to,to<<=1,!(to&130023424)&&(to=4194304)):s=1);var f=fr();t=Oi(t,s),t!==null&&(j(t,s,f),vr(t,f))}function kx(t){var s=t.memoizedState,f=0;s!==null&&(f=s.retryLane),M0(t,f)}function Ox(t,s){var f=0;switch(t.tag){case 13:var g=t.stateNode,C=t.memoizedState;C!==null&&(f=C.retryLane);break;case 19:g=t.stateNode;break;default:throw Error(a(314))}g!==null&&g.delete(s),M0(t,f)}var D0;D0=function(t,s,f){if(t!==null)if(t.memoizedProps!==s.pendingProps||mr.current)yr=!0;else{if(!(t.lanes&f)&&!(s.flags&128))return yr=!1,wx(t,s,f);yr=!!(t.flags&131072)}else yr=!1,Jt&&s.flags&1048576&&ph(s,yl,s.index);switch(s.lanes=0,s.tag){case 2:var g=s.type;Pl(t,s),t=s.pendingProps;var C=po(s,nr.current);vo(s,f),C=mu(null,s,g,t,C,f);var T=xu();return s.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,xr(g)?(T=!0,gl(s)):T=!1,s.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,cu(s),C.updater=kl,s.stateNode=C,C._reactInternals=s,Au(s,g,t,f),s=Iu(null,s,g,!0,T,f)):(s.tag=0,Jt&&T&&Jc(s),ur(null,s,C,f),s=s.child),s;case 16:g=s.elementType;e:{switch(Pl(t,s),t=s.pendingProps,C=g._init,g=C(g._payload),s.type=g,C=s.tag=Mx(g),t=ei(g,t),C){case 0:s=Tu(null,s,g,t,f);break e;case 1:s=a0(null,s,g,t,f);break e;case 11:s=n0(null,s,g,t,f);break e;case 14:s=r0(null,s,g,ei(g.type,t),f);break e}throw Error(a(306,g,""))}return s;case 0:return g=s.type,C=s.pendingProps,C=s.elementType===g?C:ei(g,C),Tu(t,s,g,C,f);case 1:return g=s.type,C=s.pendingProps,C=s.elementType===g?C:ei(g,C),a0(t,s,g,C,f);case 3:e:{if(l0(s),t===null)throw Error(a(387));g=s.pendingProps,T=s.memoizedState,C=T.element,Ah(t,s),bl(s,g,null,f);var P=s.memoizedState;if(g=P.element,T.isDehydrated)if(T={element:g,isDehydrated:!1,cache:P.cache,pendingSuspenseBoundaries:P.pendingSuspenseBoundaries,transitions:P.transitions},s.updateQueue.baseState=T,s.memoizedState=T,s.flags&256){C=Eo(Error(a(423)),s),s=c0(t,s,g,f,C);break e}else if(g!==C){C=Eo(Error(a(424)),s),s=c0(t,s,g,f,C);break e}else for(Rr=rs(s.stateNode.containerInfo.firstChild),_r=s,Jt=!0,Jr=null,f=Ch(s,null,g,f),s.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(xo(),g===C){s=Mi(t,s,f);break e}ur(t,s,g,f)}s=s.child}return s;case 5:return Th(s),t===null&&nu(s),g=s.type,C=s.pendingProps,T=t!==null?t.memoizedProps:null,P=C.children,Yc(g,C)?P=null:T!==null&&Yc(g,T)&&(s.flags|=32),o0(t,s),ur(t,s,P,f),s.child;case 6:return t===null&&nu(s),null;case 13:return u0(t,s,f);case 4:return uu(s,s.stateNode.containerInfo),g=s.pendingProps,t===null?s.child=yo(s,null,g,f):ur(t,s,g,f),s.child;case 11:return g=s.type,C=s.pendingProps,C=s.elementType===g?C:ei(g,C),n0(t,s,g,C,f);case 7:return ur(t,s,s.pendingProps,f),s.child;case 8:return ur(t,s,s.pendingProps.children,f),s.child;case 12:return ur(t,s,s.pendingProps.children,f),s.child;case 10:e:{if(g=s.type._context,C=s.pendingProps,T=s.memoizedProps,P=C.value,Zt(Cl,g._currentValue),g._currentValue=P,T!==null)if(J(T.value,P)){if(T.children===C.children&&!mr.current){s=Mi(t,s,f);break e}}else for(T=s.child,T!==null&&(T.return=s);T!==null;){var H=T.dependencies;if(H!==null){P=T.child;for(var Y=H.firstContext;Y!==null;){if(Y.context===g){if(T.tag===1){Y=Pi(-1,f&-f),Y.tag=2;var le=T.updateQueue;if(le!==null){le=le.shared;var ve=le.pending;ve===null?Y.next=Y:(Y.next=ve.next,ve.next=Y),le.pending=Y}}T.lanes|=f,Y=T.alternate,Y!==null&&(Y.lanes|=f),au(T.return,f,s),H.lanes|=f;break}Y=Y.next}}else if(T.tag===10)P=T.type===s.type?null:T.child;else if(T.tag===18){if(P=T.return,P===null)throw Error(a(341));P.lanes|=f,H=P.alternate,H!==null&&(H.lanes|=f),au(P,f,s),P=T.sibling}else P=T.child;if(P!==null)P.return=T;else for(P=T;P!==null;){if(P===s){P=null;break}if(T=P.sibling,T!==null){T.return=P.return,P=T;break}P=P.return}T=P}ur(t,s,C.children,f),s=s.child}return s;case 9:return C=s.type,g=s.pendingProps.children,vo(s,f),C=Vr(C),g=g(C),s.flags|=1,ur(t,s,g,f),s.child;case 14:return g=s.type,C=ei(g,s.pendingProps),C=ei(g.type,C),r0(t,s,g,C,f);case 15:return i0(t,s,s.type,s.pendingProps,f);case 17:return g=s.type,C=s.pendingProps,C=s.elementType===g?C:ei(g,C),Pl(t,s),s.tag=1,xr(g)?(t=!0,gl(s)):t=!1,vo(s,f),Zh(s,g,C),Au(s,g,C,f),Iu(null,s,g,!0,t,f);case 19:return d0(t,s,f);case 22:return s0(t,s,f)}throw Error(a(156,s.tag))};function L0(t,s){return Qe(t,s)}function Px(t,s,f,g){this.tag=t,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wr(t,s,f,g){return new Px(t,s,f,g)}function Yu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Mx(t){if(typeof t=="function")return Yu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ke)return 11;if(t===ee)return 14}return 2}function ps(t,s){var f=t.alternate;return f===null?(f=Wr(t.tag,s,t.key,t.mode),f.elementType=t.elementType,f.type=t.type,f.stateNode=t.stateNode,f.alternate=t,t.alternate=f):(f.pendingProps=s,f.type=t.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=t.flags&14680064,f.childLanes=t.childLanes,f.lanes=t.lanes,f.child=t.child,f.memoizedProps=t.memoizedProps,f.memoizedState=t.memoizedState,f.updateQueue=t.updateQueue,s=t.dependencies,f.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},f.sibling=t.sibling,f.index=t.index,f.ref=t.ref,f}function Hl(t,s,f,g,C,T){var P=2;if(g=t,typeof t=="function")Yu(t)&&(P=1);else if(typeof t=="string")P=5;else e:switch(t){case q:return Gs(f.children,C,T,s);case ce:P=8,C|=8;break;case $:return t=Wr(12,f,s,C|2),t.elementType=$,t.lanes=T,t;case Re:return t=Wr(13,f,s,C),t.elementType=Re,t.lanes=T,t;case Ve:return t=Wr(19,f,s,C),t.elementType=Ve,t.lanes=T,t;case me:return Gl(f,C,T,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ne:P=10;break e;case Pe:P=9;break e;case ke:P=11;break e;case ee:P=14;break e;case Ue:P=16,g=null;break e}throw Error(a(130,t==null?t:typeof t,""))}return s=Wr(P,f,s,C),s.elementType=t,s.type=g,s.lanes=T,s}function Gs(t,s,f,g){return t=Wr(7,t,g,s),t.lanes=f,t}function Gl(t,s,f,g){return t=Wr(22,t,g,s),t.elementType=me,t.lanes=f,t.stateNode={isHidden:!1},t}function Ku(t,s,f){return t=Wr(6,t,null,s),t.lanes=f,t}function Zu(t,s,f){return s=Wr(4,t.children!==null?t.children:[],t.key,s),s.lanes=f,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function Dx(t,s,f,g,C){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ne(0),this.expirationTimes=ne(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ne(0),this.identifierPrefix=g,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null}function $u(t,s,f,g,C,T,P,H,Y){return t=new Dx(t,s,f,H,Y),s===1?(s=1,T===!0&&(s|=8)):s=0,T=Wr(3,null,null,s),t.current=T,T.stateNode=t,T.memoizedState={element:g,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},cu(T),t}function Lx(t,s,f){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ue,key:g==null?null:""+g,children:t,containerInfo:s,implementation:f}}function B0(t){if(!t)return ss;t=t._reactInternals;e:{if(Qn(t)!==t||t.tag!==1)throw Error(a(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(xr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(a(171))}if(t.tag===1){var f=t.type;if(xr(f))return fh(t,f,s)}return s}function F0(t,s,f,g,C,T,P,H,Y){return t=$u(f,g,!0,t,C,T,P,H,Y),t.context=B0(null),f=t.current,g=fr(),C=ds(f),T=Pi(g,C),T.callback=s??null,ls(f,T,C),t.current.lanes=C,j(t,C,g),vr(t,g),t}function Xl(t,s,f,g){var C=s.current,T=fr(),P=ds(C);return f=B0(f),s.context===null?s.context=f:s.pendingContext=f,s=Pi(T,P),s.payload={element:t},g=g===void 0?null:g,g!==null&&(s.callback=g),t=ls(C,s,P),t!==null&&(ri(t,C,P,T),Al(t,C,P)),P}function Yl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function j0(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var f=t.retryLane;t.retryLane=f!==0&&f<s?f:s}}function qu(t,s){j0(t,s),(t=t.alternate)&&j0(t,s)}function Bx(){return null}var V0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Qu(t){this._internalRoot=t}Kl.prototype.render=Qu.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(a(409));Xl(t,s,null,null)},Kl.prototype.unmount=Qu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Us(function(){Xl(null,t,null,null)}),s[Ni]=null}};function Kl(t){this._internalRoot=t}Kl.prototype.unstable_scheduleHydration=function(t){if(t){var s=Yt();t={blockedOn:null,target:t,priority:s};for(var f=0;f<Hn.length&&s!==0&&s<Hn[f].priority;f++);Hn.splice(f,0,t),f===0&&Ja(t)}};function Ju(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function z0(){}function Fx(t,s,f,g,C){if(C){if(typeof g=="function"){var T=g;g=function(){var le=Yl(P);T.call(le)}}var P=F0(s,g,t,0,null,!1,!1,"",z0);return t._reactRootContainer=P,t[Ni]=P.current,ia(t.nodeType===8?t.parentNode:t),Us(),P}for(;C=t.lastChild;)t.removeChild(C);if(typeof g=="function"){var H=g;g=function(){var le=Yl(Y);H.call(le)}}var Y=$u(t,0,!1,null,null,!1,!1,"",z0);return t._reactRootContainer=Y,t[Ni]=Y.current,ia(t.nodeType===8?t.parentNode:t),Us(function(){Xl(s,Y,f,g)}),Y}function $l(t,s,f,g,C){var T=f._reactRootContainer;if(T){var P=T;if(typeof C=="function"){var H=C;C=function(){var Y=Yl(P);H.call(Y)}}Xl(s,P,t,C)}else P=Fx(f,s,t,C,g);return Yl(P)}no=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var f=Xt(s.pendingLanes);f!==0&&(dn(s,f|1),vr(s,Ft()),!(Bt&6)&&(So=Ft()+500,os()))}break;case 13:Us(function(){var g=Oi(t,1);if(g!==null){var C=fr();ri(g,t,1,C)}}),qu(t,1)}},er=function(t){if(t.tag===13){var s=Oi(t,134217728);if(s!==null){var f=fr();ri(s,t,134217728,f)}qu(t,134217728)}},qe=function(t){if(t.tag===13){var s=ds(t),f=Oi(t,s);if(f!==null){var g=fr();ri(f,t,s,g)}qu(t,s)}},Yt=function(){return wt},Ho=function(t,s){var f=wt;try{return wt=t,s()}finally{wt=f}},Un=function(t,s,f){switch(s){case"input":if(St(t,f),s=f.name,f.type==="radio"&&s!=null){for(f=t;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<f.length;s++){var g=f[s];if(g!==t&&g.form===t.form){var C=hl(g);if(!C)throw Error(a(90));at(g),St(g,C)}}}break;case"textarea":Ge(t,f);break;case"select":s=f.value,s!=null&&Te(t,!!f.multiple,s,!1)}},Wi=Hu,rn=Us;var jx={usingClientEntryPoint:!1,Events:[aa,fo,hl,Ui,qn,Hu]},Ca={findFiberByHostInstance:Ms,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vx={bundleType:Ca.bundleType,version:Ca.version,rendererPackageName:Ca.rendererPackageName,rendererConfig:Ca.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Q.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Be(t),t===null?null:t.stateNode},findFiberByHostInstance:Ca.findFiberByHostInstance||Bx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ql.isDisabled&&ql.supportsFiber)try{Tt=ql.inject(Vx),yt=ql}catch{}}return Cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jx,Cr.createPortal=function(t,s){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ju(s))throw Error(a(200));return Lx(t,s,null,f)},Cr.createRoot=function(t,s){if(!Ju(t))throw Error(a(299));var f=!1,g="",C=V0;return s!=null&&(s.unstable_strictMode===!0&&(f=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onRecoverableError!==void 0&&(C=s.onRecoverableError)),s=$u(t,1,!1,null,null,f,!1,g,C),t[Ni]=s.current,ia(t.nodeType===8?t.parentNode:t),new Qu(s)},Cr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=Be(s),t=t===null?null:t.stateNode,t},Cr.flushSync=function(t){return Us(t)},Cr.hydrate=function(t,s,f){if(!Zl(s))throw Error(a(200));return $l(null,t,s,!0,f)},Cr.hydrateRoot=function(t,s,f){if(!Ju(t))throw Error(a(405));var g=f!=null&&f.hydratedSources||null,C=!1,T="",P=V0;if(f!=null&&(f.unstable_strictMode===!0&&(C=!0),f.identifierPrefix!==void 0&&(T=f.identifierPrefix),f.onRecoverableError!==void 0&&(P=f.onRecoverableError)),s=F0(s,null,t,1,f??null,C,!1,T,P),t[Ni]=s.current,ia(t),g)for(t=0;t<g.length;t++)f=g[t],C=f._getVersion,C=C(f._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[f,C]:s.mutableSourceEagerHydrationData.push(f,C);return new Kl(s)},Cr.render=function(t,s,f){if(!Zl(s))throw Error(a(200));return $l(null,t,s,!1,f)},Cr.unmountComponentAtNode=function(t){if(!Zl(t))throw Error(a(40));return t._reactRootContainer?(Us(function(){$l(null,null,t,!1,function(){t._reactRootContainer=null,t[Ni]=null})}),!0):!1},Cr.unstable_batchedUpdates=Hu,Cr.unstable_renderSubtreeIntoContainer=function(t,s,f,g){if(!Zl(f))throw Error(a(200));if(t==null||t._reactInternals===void 0)throw Error(a(38));return $l(t,s,f,!1,g)},Cr.version="18.3.1-next-f1338f8080-20240426",Cr}var Z0;function Kx(){if(Z0)return nf.exports;Z0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(o){console.error(o)}}return r(),nf.exports=Yx(),nf.exports}var $0;function Zx(){if($0)return Jl;$0=1;var r=Kx();return Jl.createRoot=r.createRoot,Jl.hydrateRoot=r.hydrateRoot,Jl}var $x=Zx();const Ar=R.createContext(null),qx=({children:r})=>{const[o,a]=R.useState(null),[d,p]=R.useState(null),[x,y]=R.useState(null),[b,w]=R.useState(null),[E,S]=R.useState(!1),[I,_]=R.useState(null),D=async()=>{const V=localStorage.getItem("access_token");if(V)try{const W=await fetch(window.server_url+"/load_user",{headers:{Authorization:`Bearer ${V}`}});if(W.ok){S(!0);const z=await W.json();console.log("USER DATA:",z),a(z.username),p(z.profile),_(z.permissions),console.log("PERMISSIONS:",z.permissions)}else console.log("TOKEN INVALID"),localStorage.removeItem("access_token"),a(null),p(null),y(null),w(null),S(!1)}catch(W){console.log("ERROR:",W)}};R.useEffect(()=>{D()},[]);const L=V=>{a(V.username),y(V.access_token),w(V.refresh_token),_(V.permissions),console.log("PRE SAVE USERNAME:",V.username),localStorage.setItem("user",V.username),localStorage.setItem("access_token",V.access_token),localStorage.setItem("refresh_token",V.refresh_token)},B=async(V,W)=>{const z=await fetch(window.server_url+"/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:V,password:W})});if(z.ok){const Q=await z.json();console.log("SIGNED UP, userData:",Q)}},F=()=>{a(null),p(null),y(null),w(null),S(!1)};return A.jsx(Ar.Provider,{value:{user:o,login:L,signup:B,logout:F,userProfile:d,checkAuth:D,permissions:I},children:r})};var Nf=function(r,o){return Nf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var p in d)Object.prototype.hasOwnProperty.call(d,p)&&(a[p]=d[p])},Nf(r,o)};function Qx(r,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");Nf(r,o);function a(){this.constructor=r}r.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}var Zn=function(){return Zn=Object.assign||function(o){for(var a,d=1,p=arguments.length;d<p;d++){a=arguments[d];for(var x in a)Object.prototype.hasOwnProperty.call(a,x)&&(o[x]=a[x])}return o},Zn.apply(this,arguments)};var of,q0;function Jx(){if(q0)return of;q0=1;var r=!1,o,a,d,p,x,y,b,w,E,S,I,_,D,L,B;function F(){if(!r){r=!0;var W=navigator.userAgent,z=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(W),Q=/(Mac OS X)|(Windows)|(Linux)/.exec(W);if(_=/\b(iPhone|iP[ao]d)/.exec(W),D=/\b(iP[ao]d)/.exec(W),S=/Android/i.exec(W),L=/FBAN\/\w+;/i.exec(W),B=/Mobile/i.exec(W),I=!!/Win64/.exec(W),z){o=z[1]?parseFloat(z[1]):z[5]?parseFloat(z[5]):NaN,o&&document&&document.documentMode&&(o=document.documentMode);var ie=/(?:Trident\/(\d+.\d+))/.exec(W);y=ie?parseFloat(ie[1])+4:o,a=z[2]?parseFloat(z[2]):NaN,d=z[3]?parseFloat(z[3]):NaN,p=z[4]?parseFloat(z[4]):NaN,p?(z=/(?:Chrome\/(\d+\.\d+))/.exec(W),x=z&&z[1]?parseFloat(z[1]):NaN):x=NaN}else o=a=d=x=p=NaN;if(Q){if(Q[1]){var ue=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(W);b=ue?parseFloat(ue[1].replace("_",".")):!0}else b=!1;w=!!Q[2],E=!!Q[3]}else b=w=E=!1}}var V={ie:function(){return F()||o},ieCompatibilityMode:function(){return F()||y>o},ie64:function(){return V.ie()&&I},firefox:function(){return F()||a},opera:function(){return F()||d},webkit:function(){return F()||p},safari:function(){return V.webkit()},chrome:function(){return F()||x},windows:function(){return F()||w},osx:function(){return F()||b},linux:function(){return F()||E},iphone:function(){return F()||_},mobile:function(){return F()||_||D||S||B},nativeApp:function(){return F()||L},android:function(){return F()||S},ipad:function(){return F()||D}};return of=V,of}var af,Q0;function e2(){if(Q0)return af;Q0=1;var r=!!(typeof window<"u"&&window.document&&window.document.createElement),o={canUseDOM:r,canUseWorkers:typeof Worker<"u",canUseEventListeners:r&&!!(window.addEventListener||window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};return af=o,af}var lf,J0;function t2(){if(J0)return lf;J0=1;var r=e2(),o;r.canUseDOM&&(o=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function a(d,p){if(!r.canUseDOM||p&&!("addEventListener"in document))return!1;var x="on"+d,y=x in document;if(!y){var b=document.createElement("div");b.setAttribute(x,"return;"),y=typeof b[x]=="function"}return!y&&o&&d==="wheel"&&(y=document.implementation.hasFeature("Events.wheel","3.0")),y}return lf=a,lf}var cf,e1;function n2(){if(e1)return cf;e1=1;var r=Jx(),o=t2(),a=10,d=40,p=800;function x(y){var b=0,w=0,E=0,S=0;return"detail"in y&&(w=y.detail),"wheelDelta"in y&&(w=-y.wheelDelta/120),"wheelDeltaY"in y&&(w=-y.wheelDeltaY/120),"wheelDeltaX"in y&&(b=-y.wheelDeltaX/120),"axis"in y&&y.axis===y.HORIZONTAL_AXIS&&(b=w,w=0),E=b*a,S=w*a,"deltaY"in y&&(S=y.deltaY),"deltaX"in y&&(E=y.deltaX),(E||S)&&y.deltaMode&&(y.deltaMode==1?(E*=d,S*=d):(E*=p,S*=p)),E&&!b&&(b=E<1?-1:1),S&&!w&&(w=S<1?-1:1),{spinX:b,spinY:w,pixelX:E,pixelY:S}}return x.getEventType=function(){return r.firefox()?"DOMMouseScroll":o("wheel")?"wheel":"mousewheel"},cf=x,cf}var uf,t1;function r2(){return t1||(t1=1,uf=n2()),uf}var i2=r2();const s2=Bp(i2);function o2(r,o,a,d,p,x){x===void 0&&(x=0);var y=Mo(r,o,x),b=y.width,w=y.height,E=Math.min(b,a),S=Math.min(w,d);return E>S*p?{width:S*p,height:S}:{width:E,height:E/p}}function a2(r){return r.width>r.height?r.width/r.naturalWidth:r.height/r.naturalHeight}function Aa(r,o,a,d,p){p===void 0&&(p=0);var x=Mo(o.width,o.height,p),y=x.width,b=x.height;return{x:n1(r.x,y,a.width,d),y:n1(r.y,b,a.height,d)}}function n1(r,o,a,d){var p=o*d/2-a/2;return Tc(r,-p,p)}function r1(r,o){return Math.sqrt(Math.pow(r.y-o.y,2)+Math.pow(r.x-o.x,2))}function i1(r,o){return Math.atan2(o.y-r.y,o.x-r.x)*180/Math.PI}function l2(r,o,a,d,p,x,y){x===void 0&&(x=0),y===void 0&&(y=!0);var b=y?c2:u2,w=Mo(o.width,o.height,x),E=Mo(o.naturalWidth,o.naturalHeight,x),S={x:b(100,((w.width-a.width/p)/2-r.x/p)/w.width*100),y:b(100,((w.height-a.height/p)/2-r.y/p)/w.height*100),width:b(100,a.width/w.width*100/p),height:b(100,a.height/w.height*100/p)},I=Math.round(b(E.width,S.width*E.width/100)),_=Math.round(b(E.height,S.height*E.height/100)),D=E.width>=E.height*d,L=D?{width:Math.round(_*d),height:_}:{width:I,height:Math.round(I/d)},B=Zn(Zn({},L),{x:Math.round(b(E.width-L.width,S.x*E.width/100)),y:Math.round(b(E.height-L.height,S.y*E.height/100))});return{croppedAreaPercentages:S,croppedAreaPixels:B}}function c2(r,o){return Math.min(r,Math.max(0,o))}function u2(r,o){return o}function f2(r,o,a,d,p,x){var y=Mo(o.width,o.height,a),b=Tc(d.width/y.width*(100/r.width),p,x),w={x:b*y.width/2-d.width/2-y.width*b*(r.x/100),y:b*y.height/2-d.height/2-y.height*b*(r.y/100)};return{crop:w,zoom:b}}function d2(r,o,a){var d=a2(o);return a.height>a.width?a.height/(r.height*d):a.width/(r.width*d)}function h2(r,o,a,d,p,x){a===void 0&&(a=0);var y=Mo(o.naturalWidth,o.naturalHeight,a),b=Tc(d2(r,o,d),p,x),w=d.height>d.width?d.height/r.height:d.width/r.width,E={x:((y.width-r.width)/2-r.x)*w,y:((y.height-r.height)/2-r.y)*w};return{crop:E,zoom:b}}function s1(r,o){return{x:(o.x+r.x)/2,y:(o.y+r.y)/2}}function p2(r){return r*Math.PI/180}function Mo(r,o,a){var d=p2(a);return{width:Math.abs(Math.cos(d)*r)+Math.abs(Math.sin(d)*o),height:Math.abs(Math.sin(d)*r)+Math.abs(Math.cos(d)*o)}}function Tc(r,o,a){return Math.min(Math.max(r,o),a)}function ec(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return r.filter(function(a){return typeof a=="string"&&a.length>0}).join(" ").trim()}var g2=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,m2=1,x2=3,y2=1,rd=function(r){Qx(o,r);function o(){var a=r!==null&&r.apply(this,arguments)||this;return a.imageRef=R.createRef(),a.videoRef=R.createRef(),a.containerPosition={x:0,y:0},a.containerRef=null,a.styleRef=null,a.containerRect=null,a.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},a.dragStartPosition={x:0,y:0},a.dragStartCrop={x:0,y:0},a.gestureZoomStart=0,a.gestureRotationStart=0,a.isTouching=!1,a.lastPinchDistance=0,a.lastPinchRotation=0,a.rafDragTimeout=null,a.rafPinchTimeout=null,a.wheelTimer=null,a.currentDoc=typeof document<"u"?document:null,a.currentWindow=typeof window<"u"?window:null,a.resizeObserver=null,a.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},a.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!a.containerRef)){var d=!0;a.resizeObserver=new window.ResizeObserver(function(p){if(d){d=!1;return}a.computeSizes()}),a.resizeObserver.observe(a.containerRef)}},a.preventZoomSafari=function(d){return d.preventDefault()},a.cleanEvents=function(){a.currentDoc&&(a.currentDoc.removeEventListener("mousemove",a.onMouseMove),a.currentDoc.removeEventListener("mouseup",a.onDragStopped),a.currentDoc.removeEventListener("touchmove",a.onTouchMove),a.currentDoc.removeEventListener("touchend",a.onDragStopped),a.currentDoc.removeEventListener("gesturemove",a.onGestureMove),a.currentDoc.removeEventListener("gestureend",a.onGestureEnd),a.currentDoc.removeEventListener("scroll",a.onScroll))},a.clearScrollEvent=function(){a.containerRef&&a.containerRef.removeEventListener("wheel",a.onWheel),a.wheelTimer&&clearTimeout(a.wheelTimer)},a.onMediaLoad=function(){var d=a.computeSizes();d&&(a.emitCropData(),a.setInitialCrop(d)),a.props.onMediaLoaded&&a.props.onMediaLoaded(a.mediaSize)},a.setInitialCrop=function(d){if(a.props.initialCroppedAreaPercentages){var p=f2(a.props.initialCroppedAreaPercentages,a.mediaSize,a.props.rotation,d,a.props.minZoom,a.props.maxZoom),x=p.crop,y=p.zoom;a.props.onCropChange(x),a.props.onZoomChange&&a.props.onZoomChange(y)}else if(a.props.initialCroppedAreaPixels){var b=h2(a.props.initialCroppedAreaPixels,a.mediaSize,a.props.rotation,d,a.props.minZoom,a.props.maxZoom),x=b.crop,y=b.zoom;a.props.onCropChange(x),a.props.onZoomChange&&a.props.onZoomChange(y)}},a.computeSizes=function(){var d,p,x,y,b,w,E=a.imageRef.current||a.videoRef.current;if(E&&a.containerRef){a.containerRect=a.containerRef.getBoundingClientRect(),a.saveContainerPosition();var S=a.containerRect.width/a.containerRect.height,I=((d=a.imageRef.current)===null||d===void 0?void 0:d.naturalWidth)||((p=a.videoRef.current)===null||p===void 0?void 0:p.videoWidth)||0,_=((x=a.imageRef.current)===null||x===void 0?void 0:x.naturalHeight)||((y=a.videoRef.current)===null||y===void 0?void 0:y.videoHeight)||0,D=E.offsetWidth<I||E.offsetHeight<_,L=I/_,B=void 0;if(D)switch(a.state.mediaObjectFit){default:case"contain":B=S>L?{width:a.containerRect.height*L,height:a.containerRect.height}:{width:a.containerRect.width,height:a.containerRect.width/L};break;case"horizontal-cover":B={width:a.containerRect.width,height:a.containerRect.width/L};break;case"vertical-cover":B={width:a.containerRect.height*L,height:a.containerRect.height};break}else B={width:E.offsetWidth,height:E.offsetHeight};a.mediaSize=Zn(Zn({},B),{naturalWidth:I,naturalHeight:_}),a.props.setMediaSize&&a.props.setMediaSize(a.mediaSize);var F=a.props.cropSize?a.props.cropSize:o2(a.mediaSize.width,a.mediaSize.height,a.containerRect.width,a.containerRect.height,a.props.aspect,a.props.rotation);return(((b=a.state.cropSize)===null||b===void 0?void 0:b.height)!==F.height||((w=a.state.cropSize)===null||w===void 0?void 0:w.width)!==F.width)&&a.props.onCropSizeChange&&a.props.onCropSizeChange(F),a.setState({cropSize:F},a.recomputeCropPosition),a.props.setCropSize&&a.props.setCropSize(F),F}},a.saveContainerPosition=function(){if(a.containerRef){var d=a.containerRef.getBoundingClientRect();a.containerPosition={x:d.left,y:d.top}}},a.onMouseDown=function(d){a.currentDoc&&(d.preventDefault(),a.currentDoc.addEventListener("mousemove",a.onMouseMove),a.currentDoc.addEventListener("mouseup",a.onDragStopped),a.saveContainerPosition(),a.onDragStart(o.getMousePoint(d)))},a.onMouseMove=function(d){return a.onDrag(o.getMousePoint(d))},a.onScroll=function(d){a.currentDoc&&(d.preventDefault(),a.saveContainerPosition())},a.onTouchStart=function(d){a.currentDoc&&(a.isTouching=!0,!(a.props.onTouchRequest&&!a.props.onTouchRequest(d))&&(a.currentDoc.addEventListener("touchmove",a.onTouchMove,{passive:!1}),a.currentDoc.addEventListener("touchend",a.onDragStopped),a.saveContainerPosition(),d.touches.length===2?a.onPinchStart(d):d.touches.length===1&&a.onDragStart(o.getTouchPoint(d.touches[0]))))},a.onTouchMove=function(d){d.preventDefault(),d.touches.length===2?a.onPinchMove(d):d.touches.length===1&&a.onDrag(o.getTouchPoint(d.touches[0]))},a.onGestureStart=function(d){a.currentDoc&&(d.preventDefault(),a.currentDoc.addEventListener("gesturechange",a.onGestureMove),a.currentDoc.addEventListener("gestureend",a.onGestureEnd),a.gestureZoomStart=a.props.zoom,a.gestureRotationStart=a.props.rotation)},a.onGestureMove=function(d){if(d.preventDefault(),!a.isTouching){var p=o.getMousePoint(d),x=a.gestureZoomStart-1+d.scale;if(a.setNewZoom(x,p,{shouldUpdatePosition:!0}),a.props.onRotationChange){var y=a.gestureRotationStart+d.rotation;a.props.onRotationChange(y)}}},a.onGestureEnd=function(d){a.cleanEvents()},a.onDragStart=function(d){var p,x,y=d.x,b=d.y;a.dragStartPosition={x:y,y:b},a.dragStartCrop=Zn({},a.props.crop),(x=(p=a.props).onInteractionStart)===null||x===void 0||x.call(p)},a.onDrag=function(d){var p=d.x,x=d.y;a.currentWindow&&(a.rafDragTimeout&&a.currentWindow.cancelAnimationFrame(a.rafDragTimeout),a.rafDragTimeout=a.currentWindow.requestAnimationFrame(function(){if(a.state.cropSize&&!(p===void 0||x===void 0)){var y=p-a.dragStartPosition.x,b=x-a.dragStartPosition.y,w={x:a.dragStartCrop.x+y,y:a.dragStartCrop.y+b},E=a.props.restrictPosition?Aa(w,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):w;a.props.onCropChange(E)}}))},a.onDragStopped=function(){var d,p;a.isTouching=!1,a.cleanEvents(),a.emitCropData(),(p=(d=a.props).onInteractionEnd)===null||p===void 0||p.call(d)},a.onWheel=function(d){if(a.currentWindow&&!(a.props.onWheelRequest&&!a.props.onWheelRequest(d))){d.preventDefault();var p=o.getMousePoint(d),x=s2(d).pixelY,y=a.props.zoom-x*a.props.zoomSpeed/200;a.setNewZoom(y,p,{shouldUpdatePosition:!0}),a.state.hasWheelJustStarted||a.setState({hasWheelJustStarted:!0},function(){var b,w;return(w=(b=a.props).onInteractionStart)===null||w===void 0?void 0:w.call(b)}),a.wheelTimer&&clearTimeout(a.wheelTimer),a.wheelTimer=a.currentWindow.setTimeout(function(){return a.setState({hasWheelJustStarted:!1},function(){var b,w;return(w=(b=a.props).onInteractionEnd)===null||w===void 0?void 0:w.call(b)})},250)}},a.getPointOnContainer=function(d,p){var x=d.x,y=d.y;if(!a.containerRect)throw new Error("The Cropper is not mounted");return{x:a.containerRect.width/2-(x-p.x),y:a.containerRect.height/2-(y-p.y)}},a.getPointOnMedia=function(d){var p=d.x,x=d.y,y=a.props,b=y.crop,w=y.zoom;return{x:(p+b.x)/w,y:(x+b.y)/w}},a.setNewZoom=function(d,p,x){var y=x===void 0?{}:x,b=y.shouldUpdatePosition,w=b===void 0?!0:b;if(!(!a.state.cropSize||!a.props.onZoomChange)){var E=Tc(d,a.props.minZoom,a.props.maxZoom);if(w){var S=a.getPointOnContainer(p,a.containerPosition),I=a.getPointOnMedia(S),_={x:I.x*E-S.x,y:I.y*E-S.y},D=a.props.restrictPosition?Aa(_,a.mediaSize,a.state.cropSize,E,a.props.rotation):_;a.props.onCropChange(D)}a.props.onZoomChange(E)}},a.getCropData=function(){if(!a.state.cropSize)return null;var d=a.props.restrictPosition?Aa(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;return l2(d,a.mediaSize,a.state.cropSize,a.getAspect(),a.props.zoom,a.props.rotation,a.props.restrictPosition)},a.emitCropData=function(){var d=a.getCropData();if(d){var p=d.croppedAreaPercentages,x=d.croppedAreaPixels;a.props.onCropComplete&&a.props.onCropComplete(p,x),a.props.onCropAreaChange&&a.props.onCropAreaChange(p,x)}},a.emitCropAreaChange=function(){var d=a.getCropData();if(d){var p=d.croppedAreaPercentages,x=d.croppedAreaPixels;a.props.onCropAreaChange&&a.props.onCropAreaChange(p,x)}},a.recomputeCropPosition=function(){if(a.state.cropSize){var d=a.props.restrictPosition?Aa(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;a.props.onCropChange(d),a.emitCropData()}},a.onKeyDown=function(d){var p=a.props,x=p.crop,y=p.onCropChange,b=p.keyboardStep,w=p.zoom,E=p.rotation,S=b;if(a.state.cropSize){d.shiftKey&&(S*=.2);var I=Zn({},x);switch(d.key){case"ArrowUp":I.y-=S,d.preventDefault();break;case"ArrowDown":I.y+=S,d.preventDefault();break;case"ArrowLeft":I.x-=S,d.preventDefault();break;case"ArrowRight":I.x+=S,d.preventDefault();break;default:return}a.props.restrictPosition&&(I=Aa(I,a.mediaSize,a.state.cropSize,w,E)),y(I)}},a}return o.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=g2,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef))},o.prototype.componentWillUnmount=function(){var a,d;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(a=this.resizeObserver)===null||a===void 0||a.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((d=this.styleRef.parentNode)===null||d===void 0||d.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},o.prototype.componentDidUpdate=function(a){var d,p,x,y,b,w,E,S,I;a.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):a.aspect!==this.props.aspect?this.computeSizes():a.objectFit!==this.props.objectFit?this.computeSizes():a.zoom!==this.props.zoom?this.recomputeCropPosition():((d=a.cropSize)===null||d===void 0?void 0:d.height)!==((p=this.props.cropSize)===null||p===void 0?void 0:p.height)||((x=a.cropSize)===null||x===void 0?void 0:x.width)!==((y=this.props.cropSize)===null||y===void 0?void 0:y.width)?this.computeSizes():(((b=a.crop)===null||b===void 0?void 0:b.x)!==((w=this.props.crop)===null||w===void 0?void 0:w.x)||((E=a.crop)===null||E===void 0?void 0:E.y)!==((S=this.props.crop)===null||S===void 0?void 0:S.y))&&this.emitCropAreaChange(),a.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),a.video!==this.props.video&&((I=this.videoRef.current)===null||I===void 0||I.load());var _=this.getObjectFit();_!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:_},this.computeSizes)},o.prototype.getAspect=function(){var a=this.props,d=a.cropSize,p=a.aspect;return d?d.width/d.height:p},o.prototype.getObjectFit=function(){var a,d,p,x;if(this.props.objectFit==="cover"){var y=this.imageRef.current||this.videoRef.current;if(y&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var b=this.containerRect.width/this.containerRect.height,w=((a=this.imageRef.current)===null||a===void 0?void 0:a.naturalWidth)||((d=this.videoRef.current)===null||d===void 0?void 0:d.videoWidth)||0,E=((p=this.imageRef.current)===null||p===void 0?void 0:p.naturalHeight)||((x=this.videoRef.current)===null||x===void 0?void 0:x.videoHeight)||0,S=w/E;return S<b?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},o.prototype.onPinchStart=function(a){var d=o.getTouchPoint(a.touches[0]),p=o.getTouchPoint(a.touches[1]);this.lastPinchDistance=r1(d,p),this.lastPinchRotation=i1(d,p),this.onDragStart(s1(d,p))},o.prototype.onPinchMove=function(a){var d=this;if(!(!this.currentDoc||!this.currentWindow)){var p=o.getTouchPoint(a.touches[0]),x=o.getTouchPoint(a.touches[1]),y=s1(p,x);this.onDrag(y),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var b=r1(p,x),w=d.props.zoom*(b/d.lastPinchDistance);d.setNewZoom(w,y,{shouldUpdatePosition:!1}),d.lastPinchDistance=b;var E=i1(p,x),S=d.props.rotation+(E-d.lastPinchRotation);d.props.onRotationChange&&d.props.onRotationChange(S),d.lastPinchRotation=E})}},o.prototype.render=function(){var a=this,d,p=this.props,x=p.image,y=p.video,b=p.mediaProps,w=p.transform,E=p.crop,S=E.x,I=E.y,_=p.rotation,D=p.zoom,L=p.cropShape,B=p.showGrid,F=p.style,V=F.containerStyle,W=F.cropAreaStyle,z=F.mediaStyle,Q=p.classes,ie=Q.containerClassName,ue=Q.cropAreaClassName,q=Q.mediaClassName,ce=(d=this.state.mediaObjectFit)!==null&&d!==void 0?d:this.getObjectFit();return R.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(Ne){return a.containerRef=Ne},"data-testid":"container",style:V,className:ec("reactEasyCrop_Container",ie)},x?R.createElement("img",Zn({alt:"",className:ec("reactEasyCrop_Image",ce==="contain"&&"reactEasyCrop_Contain",ce==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",ce==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",q)},b,{src:x,ref:this.imageRef,style:Zn(Zn({},z),{transform:w||"translate(".concat(S,"px, ").concat(I,"px) rotate(").concat(_,"deg) scale(").concat(D,")")}),onLoad:this.onMediaLoad})):y&&R.createElement("video",Zn({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:ec("reactEasyCrop_Video",ce==="contain"&&"reactEasyCrop_Contain",ce==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",ce==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",q)},b,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:Zn(Zn({},z),{transform:w||"translate(".concat(S,"px, ").concat(I,"px) rotate(").concat(_,"deg) scale(").concat(D,")")}),controls:!1}),(Array.isArray(y)?y:[{src:y}]).map(function($){return R.createElement("source",Zn({key:$.src},$))})),this.state.cropSize&&R.createElement("div",{style:Zn(Zn({},W),{width:this.state.cropSize.width,height:this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,"data-testid":"cropper",className:ec("reactEasyCrop_CropArea",L==="round"&&"reactEasyCrop_CropAreaRound",B&&"reactEasyCrop_CropAreaGrid",ue)}))},o.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:x2,minZoom:m2,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:y2},o.getMousePoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},o.getTouchPoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},o}(R.Component),ba={},o1;function w2(){return o1||(o1=1,ba.createCanvas=function(r,o){return Object.assign(document.createElement("canvas"),{width:r,height:o})},ba.createImageData=function(r,o,a){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(r);case 2:return new ImageData(r,o);default:return new ImageData(r,o,a)}},ba.loadImage=function(r,o){return new Promise(function(a,d){const p=Object.assign(document.createElement("img"),o);function x(){p.onload=null,p.onerror=null}p.onload=function(){x(),a(p)},p.onerror=function(){x(),d(new Error('Failed to load the image "'+r+'"'))},p.src=r})}),ba}w2();async function id(r,o){return console.log("Image source being cropped:",r),new Promise((a,d)=>{const p=new Image;p.onload=()=>{const x=document.createElement("canvas"),y=x.getContext("2d");x.width=o.width,x.height=o.height,y.drawImage(p,o.x,o.y,o.width,o.height,0,0,o.width,o.height);try{const b=x.toDataURL("image/jpeg");a(b)}catch{d(new Error("Error converting canvas to base64"))}},p.onerror=x=>d(new Error(`Image load error: ${x.message}`)),p.src=r})}const v2=({onSubmit:r,onClose:o,existingProfile:a})=>{const{user:d,userProfile:p,checkAuth:x}=R.useContext(Ar),[y,b]=R.useState({name:(p==null?void 0:p.name)||"",image:null,imagePreview:p!=null&&p.image_data?`data:image/jpeg;base64,${p.image_data}`:"/assets/fakeprofile.png",croppedImage:null}),[w,E]=R.useState({x:0,y:0}),[S,I]=R.useState(1),[_,D]=R.useState(null),[L,B]=R.useState(!1),[F,V]=R.useState(!1),W=ie=>{const ue=ie.target.files[0];if(ue){const q=new FileReader;q.onload=ce=>{b($=>({...$,image:ue,imagePreview:ce.target.result})),B(!0)},q.readAsDataURL(ue)}},z=(ie,ue)=>{console.log("Cropped Area Pixels:",ue),D(ue)};async function Q(ie){ie.preventDefault();let ue;if(y.croppedImage)ue=y.croppedImage.split(",")[1];else if(y.image instanceof File){const $=await y.image.arrayBuffer();ue=btoa(new Uint8Array($).reduce((Ne,Pe)=>Ne+String.fromCharCode(Pe),""))}else if(p!=null&&p.image_data)ue=p.image_data;else{console.error("No valid image provided");return}const q={name:y.name,image_data:ue};console.log("Image data (first 100 chars):",ue.substring(0,100));const ce=localStorage.getItem("access_token");try{const $=await fetch(`${window.server_url}/update_profile`,{method:"POST",headers:{Authorization:`Bearer ${ce}`,"Content-Type":"application/json"},body:JSON.stringify(q)});if(!$.ok)throw new Error("Failed to update profile");const Ne=await $.json();await x(),console.log("Profile updated successfully:",Ne),o()}catch($){console.error("Error updating profile:",$)}}return A.jsx("div",{className:"profile-creation-overlay",style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:A.jsxs("div",{className:"profile-creation-modal",style:{width:"70%",maxWidth:"500px",backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",padding:"2rem",boxShadow:"0 10px 30px rgba(20,77,255,0.15)",position:"relative",border:"1px solid rgba(20,77,255,0.1)"},children:[A.jsx("button",{onClick:o,style:{position:"absolute",top:"1.2rem",right:"1.2rem",background:"none",border:"none",fontSize:"1.8rem",cursor:"pointer",color:"#144dff",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.1)"}},children:""}),A.jsx("h2",{style:{fontSize:"clamp(1.8rem, 6vw, 2.5rem)",color:"#144dff",textAlign:"center",marginBottom:"2rem",fontWeight:"600"},children:"Your Profile"}),A.jsxs("form",{onSubmit:Q,style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[A.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem"},children:[A.jsx("label",{style:{color:"#144dff",fontWeight:"500",fontSize:"1rem"},children:"Your Name"}),A.jsx("input",{type:"text",value:y.name,onChange:ie=>b({...y,name:ie.target.value}),style:{width:"100%",padding:"12px",borderRadius:"12px",border:"2px solid #e0e0e0",fontSize:"0.9rem",transition:"all 0.3s ease",backgroundColor:"rgba(255,255,255,0.9)","&:focus":{borderColor:"#144dff",outline:"none",boxShadow:"0 0 0 3px rgba(20,77,255,0.1)"}}})]}),!L&&A.jsx("div",{style:{width:"250px",height:"250px",margin:"0 auto",borderRadius:"20%",overflow:"hidden",border:"7px solid #144dff",boxShadow:"0 8px 25px rgba(20,77,255,0.2)",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.02)"}},children:A.jsx("img",{src:y.croppedImage?y.croppedImage:y.imagePreview?y.imagePreview:p!=null&&p.image_data?`data:image/jpeg;base64,${p.image_data}`:"/assets/fakeprofile.png",alt:"Profile preview",style:{width:"100%",height:"100%",objectFit:"cover"}})}),A.jsxs("div",{style:{textAlign:"center"},children:[A.jsx("input",{type:"file",id:"image-upload",accept:"image/*",onChange:W,style:{display:"none"}}),A.jsx("label",{htmlFor:"image-upload",style:{padding:"0.8rem 1.2rem",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",borderRadius:"25px",cursor:"pointer",display:"inline-block",fontSize:"0.9rem",fontWeight:"600",boxShadow:"0 4px 15px rgba(20,77,255,0.2)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Upload New Image"})]}),L&&A.jsxs("div",{style:{width:"100%",maxWidth:"300px",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",gap:"1.2rem"},children:[A.jsx("div",{style:{position:"relative",width:"250px",height:"250px",borderRadius:"20%",overflow:"hidden",border:"7px solid #144dff",boxShadow:"0 8px 25px rgba(20,77,255,0.2)"},children:A.jsx(rd,{image:y.imagePreview,crop:w,zoom:S,aspect:1,onCropComplete:z,onCropChange:E,onZoomChange:I})}),A.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[A.jsx("button",{type:"button",onClick:()=>{B(!1),y.croppedImage||b(ie=>({...ie,imagePreview:null}))},style:{padding:"0.8rem 1.2rem",borderRadius:"25px",border:"2px solid #144dff",background:"white",color:"#144dff",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease","&:hover":{background:"rgba(20,77,255,0.1)"}},children:"Cancel"}),A.jsx("button",{type:"button",onClick:async()=>{try{const ie=await id(y.imagePreview,_);b(ue=>({...ue,croppedImage:ie,imagePreview:ie})),B(!1),V(!0),setTimeout(()=>V(!1),1e4)}catch(ie){console.error("Error cropping image:",ie)}},className:`save-profile-button ${F?"glow-bounce":""}`,style:{padding:"0.8rem 1.2rem",borderRadius:"25px",border:"none",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(20,77,255,0.2)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Save Cropped Image"})]})]}),A.jsx("button",{type:"submit",className:`save-profile-button ${F?"glow-bounce":""}`,style:{padding:"1rem",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",border:"none",borderRadius:"25px",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",marginTop:"1rem",boxShadow:"0 4px 15px rgba(20,77,255,0.2)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Save Profile"})]})]})})};var Sa={},a1;function C2(){if(a1)return Sa;a1=1,Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.parse=y,Sa.serialize=E;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,o=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,d=/^[\u0020-\u003A\u003D-\u007E]*$/,p=Object.prototype.toString,x=(()=>{const _=function(){};return _.prototype=Object.create(null),_})();function y(_,D){const L=new x,B=_.length;if(B<2)return L;const F=(D==null?void 0:D.decode)||S;let V=0;do{const W=_.indexOf("=",V);if(W===-1)break;const z=_.indexOf(";",V),Q=z===-1?B:z;if(W>Q){V=_.lastIndexOf(";",W-1)+1;continue}const ie=b(_,V,W),ue=w(_,W,ie),q=_.slice(ie,ue);if(L[q]===void 0){let ce=b(_,W+1,Q),$=w(_,Q,ce);const Ne=F(_.slice(ce,$));L[q]=Ne}V=Q+1}while(V<B);return L}function b(_,D,L){do{const B=_.charCodeAt(D);if(B!==32&&B!==9)return D}while(++D<L);return L}function w(_,D,L){for(;D>L;){const B=_.charCodeAt(--D);if(B!==32&&B!==9)return D+1}return L}function E(_,D,L){const B=(L==null?void 0:L.encode)||encodeURIComponent;if(!r.test(_))throw new TypeError(`argument name is invalid: ${_}`);const F=B(D);if(!o.test(F))throw new TypeError(`argument val is invalid: ${D}`);let V=_+"="+F;if(!L)return V;if(L.maxAge!==void 0){if(!Number.isInteger(L.maxAge))throw new TypeError(`option maxAge is invalid: ${L.maxAge}`);V+="; Max-Age="+L.maxAge}if(L.domain){if(!a.test(L.domain))throw new TypeError(`option domain is invalid: ${L.domain}`);V+="; Domain="+L.domain}if(L.path){if(!d.test(L.path))throw new TypeError(`option path is invalid: ${L.path}`);V+="; Path="+L.path}if(L.expires){if(!I(L.expires)||!Number.isFinite(L.expires.valueOf()))throw new TypeError(`option expires is invalid: ${L.expires}`);V+="; Expires="+L.expires.toUTCString()}if(L.httpOnly&&(V+="; HttpOnly"),L.secure&&(V+="; Secure"),L.partitioned&&(V+="; Partitioned"),L.priority)switch(typeof L.priority=="string"?L.priority.toLowerCase():void 0){case"low":V+="; Priority=Low";break;case"medium":V+="; Priority=Medium";break;case"high":V+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${L.priority}`)}if(L.sameSite)switch(typeof L.sameSite=="string"?L.sameSite.toLowerCase():L.sameSite){case!0:case"strict":V+="; SameSite=Strict";break;case"lax":V+="; SameSite=Lax";break;case"none":V+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${L.sameSite}`)}return V}function S(_){if(_.indexOf("%")===-1)return _;try{return decodeURIComponent(_)}catch{return _}}function I(_){return p.call(_)==="[object Date]"}return Sa}C2();/**
 * react-router v7.0.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var l1="popstate";function E2(r={}){function o(d,p){let{pathname:x,search:y,hash:b}=d.location;return _f("",{pathname:x,search:y,hash:b},p.state&&p.state.usr||null,p.state&&p.state.key||"default")}function a(d,p){return typeof p=="string"?p:La(p)}return b2(o,a,null,r)}function cn(r,o){if(r===!1||r===null||typeof r>"u")throw new Error(o)}function yi(r,o){if(!r){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}function A2(){return Math.random().toString(36).substring(2,10)}function c1(r,o){return{usr:r.state,key:r.key,idx:o}}function _f(r,o,a=null,d){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof o=="string"?Bo(o):o,state:a,key:o&&o.key||d||A2()}}function La({pathname:r="/",search:o="",hash:a=""}){return o&&o!=="?"&&(r+=o.charAt(0)==="?"?o:"?"+o),a&&a!=="#"&&(r+=a.charAt(0)==="#"?a:"#"+a),r}function Bo(r){let o={};if(r){let a=r.indexOf("#");a>=0&&(o.hash=r.substring(a),r=r.substring(0,a));let d=r.indexOf("?");d>=0&&(o.search=r.substring(d),r=r.substring(0,d)),r&&(o.pathname=r)}return o}function b2(r,o,a,d={}){let{window:p=document.defaultView,v5Compat:x=!1}=d,y=p.history,b="POP",w=null,E=S();E==null&&(E=0,y.replaceState({...y.state,idx:E},""));function S(){return(y.state||{idx:null}).idx}function I(){b="POP";let F=S(),V=F==null?null:F-E;E=F,w&&w({action:b,location:B.location,delta:V})}function _(F,V){b="PUSH";let W=_f(B.location,F,V);E=S()+1;let z=c1(W,E),Q=B.createHref(W);try{y.pushState(z,"",Q)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;p.location.assign(Q)}x&&w&&w({action:b,location:B.location,delta:1})}function D(F,V){b="REPLACE";let W=_f(B.location,F,V);E=S();let z=c1(W,E),Q=B.createHref(W);y.replaceState(z,"",Q),x&&w&&w({action:b,location:B.location,delta:0})}function L(F){let V=p.location.origin!=="null"?p.location.origin:p.location.href,W=typeof F=="string"?F:La(F);return W=W.replace(/ $/,"%20"),cn(V,`No window.location.(origin|href) available to create URL for href: ${W}`),new URL(W,V)}let B={get action(){return b},get location(){return r(p,y)},listen(F){if(w)throw new Error("A history only accepts one active listener");return p.addEventListener(l1,I),w=F,()=>{p.removeEventListener(l1,I),w=null}},createHref(F){return o(p,F)},createURL:L,encodeLocation(F){let V=L(F);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:_,replace:D,go(F){return y.go(F)}};return B}function Fp(r,o,a="/"){return S2(r,o,a,!1)}function S2(r,o,a,d){let p=typeof o=="string"?Bo(o):o,x=ys(p.pathname||"/",a);if(x==null)return null;let y=jp(r);T2(y);let b=null;for(let w=0;b==null&&w<y.length;++w){let E=B2(x);b=D2(y[w],E,d)}return b}function jp(r,o=[],a=[],d=""){let p=(x,y,b)=>{let w={relativePath:b===void 0?x.path||"":b,caseSensitive:x.caseSensitive===!0,childrenIndex:y,route:x};w.relativePath.startsWith("/")&&(cn(w.relativePath.startsWith(d),`Absolute route path "${w.relativePath}" nested under path "${d}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(d.length));let E=Fi([d,w.relativePath]),S=a.concat(w);x.children&&x.children.length>0&&(cn(x.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),jp(x.children,o,S,E)),!(x.path==null&&!x.index)&&o.push({path:E,score:P2(E,x.index),routesMeta:S})};return r.forEach((x,y)=>{var b;if(x.path===""||!((b=x.path)!=null&&b.includes("?")))p(x,y);else for(let w of Vp(x.path))p(x,y,w)}),o}function Vp(r){let o=r.split("/");if(o.length===0)return[];let[a,...d]=o,p=a.endsWith("?"),x=a.replace(/\?$/,"");if(d.length===0)return p?[x,""]:[x];let y=Vp(d.join("/")),b=[];return b.push(...y.map(w=>w===""?x:[x,w].join("/"))),p&&b.push(...y),b.map(w=>r.startsWith("/")&&w===""?"/":w)}function T2(r){r.sort((o,a)=>o.score!==a.score?a.score-o.score:M2(o.routesMeta.map(d=>d.childrenIndex),a.routesMeta.map(d=>d.childrenIndex)))}var I2=/^:[\w-]+$/,N2=3,_2=2,R2=1,k2=10,O2=-2,u1=r=>r==="*";function P2(r,o){let a=r.split("/"),d=a.length;return a.some(u1)&&(d+=O2),o&&(d+=_2),a.filter(p=>!u1(p)).reduce((p,x)=>p+(I2.test(x)?N2:x===""?R2:k2),d)}function M2(r,o){return r.length===o.length&&r.slice(0,-1).every((d,p)=>d===o[p])?r[r.length-1]-o[o.length-1]:0}function D2(r,o,a=!1){let{routesMeta:d}=r,p={},x="/",y=[];for(let b=0;b<d.length;++b){let w=d[b],E=b===d.length-1,S=x==="/"?o:o.slice(x.length)||"/",I=mc({path:w.relativePath,caseSensitive:w.caseSensitive,end:E},S),_=w.route;if(!I&&E&&a&&!d[d.length-1].route.index&&(I=mc({path:w.relativePath,caseSensitive:w.caseSensitive,end:!1},S)),!I)return null;Object.assign(p,I.params),y.push({params:p,pathname:Fi([x,I.pathname]),pathnameBase:z2(Fi([x,I.pathnameBase])),route:_}),I.pathnameBase!=="/"&&(x=Fi([x,I.pathnameBase]))}return y}function mc(r,o){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[a,d]=L2(r.path,r.caseSensitive,r.end),p=o.match(a);if(!p)return null;let x=p[0],y=x.replace(/(.)\/+$/,"$1"),b=p.slice(1);return{params:d.reduce((E,{paramName:S,isOptional:I},_)=>{if(S==="*"){let L=b[_]||"";y=x.slice(0,x.length-L.length).replace(/(.)\/+$/,"$1")}const D=b[_];return I&&!D?E[S]=void 0:E[S]=(D||"").replace(/%2F/g,"/"),E},{}),pathname:x,pathnameBase:y,pattern:r}}function L2(r,o=!1,a=!0){yi(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let d=[],p="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,b,w)=>(d.push({paramName:b,isOptional:w!=null}),w?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(d.push({paramName:"*"}),p+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?p+="\\/*$":r!==""&&r!=="/"&&(p+="(?:(?=\\/|$))"),[new RegExp(p,o?void 0:"i"),d]}function B2(r){try{return r.split("/").map(o=>decodeURIComponent(o).replace(/\//g,"%2F")).join("/")}catch(o){return yi(!1,`The URL path "${r}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${o}).`),r}}function ys(r,o){if(o==="/")return r;if(!r.toLowerCase().startsWith(o.toLowerCase()))return null;let a=o.endsWith("/")?o.length-1:o.length,d=r.charAt(a);return d&&d!=="/"?null:r.slice(a)||"/"}function F2(r,o="/"){let{pathname:a,search:d="",hash:p=""}=typeof r=="string"?Bo(r):r;return{pathname:a?a.startsWith("/")?a:j2(a,o):o,search:U2(d),hash:W2(p)}}function j2(r,o){let a=o.replace(/\/+$/,"").split("/");return r.split("/").forEach(p=>{p===".."?a.length>1&&a.pop():p!=="."&&a.push(p)}),a.length>1?a.join("/"):"/"}function ff(r,o,a,d){return`Cannot include a '${r}' character in a manually specified \`to.${o}\` field [${JSON.stringify(d)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function V2(r){return r.filter((o,a)=>a===0||o.route.path&&o.route.path.length>0)}function zp(r){let o=V2(r);return o.map((a,d)=>d===o.length-1?a.pathname:a.pathnameBase)}function Up(r,o,a,d=!1){let p;typeof r=="string"?p=Bo(r):(p={...r},cn(!p.pathname||!p.pathname.includes("?"),ff("?","pathname","search",p)),cn(!p.pathname||!p.pathname.includes("#"),ff("#","pathname","hash",p)),cn(!p.search||!p.search.includes("#"),ff("#","search","hash",p)));let x=r===""||p.pathname==="",y=x?"/":p.pathname,b;if(y==null)b=a;else{let I=o.length-1;if(!d&&y.startsWith("..")){let _=y.split("/");for(;_[0]==="..";)_.shift(),I-=1;p.pathname=_.join("/")}b=I>=0?o[I]:"/"}let w=F2(p,b),E=y&&y!=="/"&&y.endsWith("/"),S=(x||y===".")&&a.endsWith("/");return!w.pathname.endsWith("/")&&(E||S)&&(w.pathname+="/"),w}var Fi=r=>r.join("/").replace(/\/\/+/g,"/"),z2=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),U2=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,W2=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function H2(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var Wp=["POST","PUT","PATCH","DELETE"];new Set(Wp);var G2=["GET",...Wp];new Set(G2);var Fo=R.createContext(null);Fo.displayName="DataRouter";var Ic=R.createContext(null);Ic.displayName="DataRouterState";var Hp=R.createContext({isTransitioning:!1});Hp.displayName="ViewTransition";var X2=R.createContext(new Map);X2.displayName="Fetchers";var Y2=R.createContext(null);Y2.displayName="Await";var wi=R.createContext(null);wi.displayName="Navigation";var Wa=R.createContext(null);Wa.displayName="Location";var vi=R.createContext({outlet:null,matches:[],isDataRoute:!1});vi.displayName="Route";var sd=R.createContext(null);sd.displayName="RouteError";function K2(r,{relative:o}={}){cn(Ha(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:d}=R.useContext(wi),{hash:p,pathname:x,search:y}=Ga(r,{relative:o}),b=x;return a!=="/"&&(b=x==="/"?a:Fi([a,x])),d.createHref({pathname:b,search:y,hash:p})}function Ha(){return R.useContext(Wa)!=null}function Yr(){return cn(Ha(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(Wa).location}var Gp="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Xp(r){R.useContext(wi).static||R.useLayoutEffect(r)}function pr(){let{isDataRoute:r}=R.useContext(vi);return r?ly():Z2()}function Z2(){cn(Ha(),"useNavigate() may be used only in the context of a <Router> component.");let r=R.useContext(Fo),{basename:o,navigator:a}=R.useContext(wi),{matches:d}=R.useContext(vi),{pathname:p}=Yr(),x=JSON.stringify(zp(d)),y=R.useRef(!1);return Xp(()=>{y.current=!0}),R.useCallback((w,E={})=>{if(yi(y.current,Gp),!y.current)return;if(typeof w=="number"){a.go(w);return}let S=Up(w,JSON.parse(x),p,E.relative==="path");r==null&&o!=="/"&&(S.pathname=S.pathname==="/"?o:Fi([o,S.pathname])),(E.replace?a.replace:a.push)(S,E.state,E)},[o,a,x,p,r])}R.createContext(null);function $2(){let{matches:r}=R.useContext(vi),o=r[r.length-1];return o?o.params:{}}function Ga(r,{relative:o}={}){let{matches:a}=R.useContext(vi),{pathname:d}=Yr(),p=JSON.stringify(zp(a));return R.useMemo(()=>Up(r,JSON.parse(p),d,o==="path"),[r,p,d,o])}function q2(r,o){return Yp(r,o)}function Yp(r,o,a,d){var V;cn(Ha(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:p}=R.useContext(wi),{matches:x}=R.useContext(vi),y=x[x.length-1],b=y?y.params:{},w=y?y.pathname:"/",E=y?y.pathnameBase:"/",S=y&&y.route;{let W=S&&S.path||"";Kp(w,!S||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${w}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let I=Yr(),_;if(o){let W=typeof o=="string"?Bo(o):o;cn(E==="/"||((V=W.pathname)==null?void 0:V.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${W.pathname}" was given in the \`location\` prop.`),_=W}else _=I;let D=_.pathname||"/",L=D;if(E!=="/"){let W=E.replace(/^\//,"").split("/");L="/"+D.replace(/^\//,"").split("/").slice(W.length).join("/")}let B=Fp(r,{pathname:L});yi(S||B!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),yi(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let F=ny(B&&B.map(W=>Object.assign({},W,{params:Object.assign({},b,W.params),pathname:Fi([E,p.encodeLocation?p.encodeLocation(W.pathname).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?E:Fi([E,p.encodeLocation?p.encodeLocation(W.pathnameBase).pathname:W.pathnameBase])})),x,a,d);return o&&F?R.createElement(Wa.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},F):F}function Q2(){let r=ay(),o=H2(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),a=r instanceof Error?r.stack:null,d="rgba(200,200,200, 0.5)",p={padding:"0.5rem",backgroundColor:d},x={padding:"2px 4px",backgroundColor:d},y=null;return console.error("Error handled by React Router default ErrorBoundary:",r),y=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:x},"ErrorBoundary")," or"," ",R.createElement("code",{style:x},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},o),a?R.createElement("pre",{style:p},a):null,y)}var J2=R.createElement(Q2,null),ey=class extends R.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,o){return o.location!==r.location||o.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:o.error,location:o.location,revalidation:r.revalidation||o.revalidation}}componentDidCatch(r,o){console.error("React Router caught the following error during render",r,o)}render(){return this.state.error!==void 0?R.createElement(vi.Provider,{value:this.props.routeContext},R.createElement(sd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ty({routeContext:r,match:o,children:a}){let d=R.useContext(Fo);return d&&d.static&&d.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(d.staticContext._deepestRenderedBoundaryId=o.route.id),R.createElement(vi.Provider,{value:r},a)}function ny(r,o=[],a=null,d=null){if(r==null){if(!a)return null;if(a.errors)r=a.matches;else if(o.length===0&&!a.initialized&&a.matches.length>0)r=a.matches;else return null}let p=r,x=a==null?void 0:a.errors;if(x!=null){let w=p.findIndex(E=>E.route.id&&(x==null?void 0:x[E.route.id])!==void 0);cn(w>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(x).join(",")}`),p=p.slice(0,Math.min(p.length,w+1))}let y=!1,b=-1;if(a)for(let w=0;w<p.length;w++){let E=p[w];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(b=w),E.route.id){let{loaderData:S,errors:I}=a,_=E.route.loader&&!S.hasOwnProperty(E.route.id)&&(!I||I[E.route.id]===void 0);if(E.route.lazy||_){y=!0,b>=0?p=p.slice(0,b+1):p=[p[0]];break}}}return p.reduceRight((w,E,S)=>{let I,_=!1,D=null,L=null;a&&(I=x&&E.route.id?x[E.route.id]:void 0,D=E.route.errorElement||J2,y&&(b<0&&S===0?(Kp("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,L=null):b===S&&(_=!0,L=E.route.hydrateFallbackElement||null)));let B=o.concat(p.slice(0,S+1)),F=()=>{let V;return I?V=D:_?V=L:E.route.Component?V=R.createElement(E.route.Component,null):E.route.element?V=E.route.element:V=w,R.createElement(ty,{match:E,routeContext:{outlet:w,matches:B,isDataRoute:a!=null},children:V})};return a&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?R.createElement(ey,{location:a.location,revalidation:a.revalidation,component:D,error:I,children:F(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):F()},null)}function od(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ry(r){let o=R.useContext(Fo);return cn(o,od(r)),o}function iy(r){let o=R.useContext(Ic);return cn(o,od(r)),o}function sy(r){let o=R.useContext(vi);return cn(o,od(r)),o}function ad(r){let o=sy(r),a=o.matches[o.matches.length-1];return cn(a.route.id,`${r} can only be used on routes that contain a unique "id"`),a.route.id}function oy(){return ad("useRouteId")}function ay(){var d;let r=R.useContext(sd),o=iy("useRouteError"),a=ad("useRouteError");return r!==void 0?r:(d=o.errors)==null?void 0:d[a]}function ly(){let{router:r}=ry("useNavigate"),o=ad("useNavigate"),a=R.useRef(!1);return Xp(()=>{a.current=!0}),R.useCallback(async(p,x={})=>{yi(a.current,Gp),a.current&&(typeof p=="number"?r.navigate(p):await r.navigate(p,{fromRouteId:o,...x}))},[r,o])}var f1={};function Kp(r,o,a){!o&&!f1[r]&&(f1[r]=!0,yi(!1,a))}R.memo(cy);function cy({routes:r,future:o,state:a}){return Yp(r,void 0,a,o)}function Or(r){cn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function uy({basename:r="/",children:o=null,location:a,navigationType:d="POP",navigator:p,static:x=!1}){cn(!Ha(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let y=r.replace(/^\/*/,"/"),b=R.useMemo(()=>({basename:y,navigator:p,static:x,future:{}}),[y,p,x]);typeof a=="string"&&(a=Bo(a));let{pathname:w="/",search:E="",hash:S="",state:I=null,key:_="default"}=a,D=R.useMemo(()=>{let L=ys(w,y);return L==null?null:{location:{pathname:L,search:E,hash:S,state:I,key:_},navigationType:d}},[y,w,E,S,I,_,d]);return yi(D!=null,`<Router basename="${y}"> is not able to match the URL "${w}${E}${S}" because it does not start with the basename, so the <Router> won't render anything.`),D==null?null:R.createElement(wi.Provider,{value:b},R.createElement(Wa.Provider,{children:o,value:D}))}function fy({children:r,location:o}){return q2(Rf(r),o)}function Rf(r,o=[]){let a=[];return R.Children.forEach(r,(d,p)=>{if(!R.isValidElement(d))return;let x=[...o,p];if(d.type===R.Fragment){a.push.apply(a,Rf(d.props.children,x));return}cn(d.type===Or,`[${typeof d.type=="string"?d.type:d.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),cn(!d.props.index||!d.props.children,"An index route cannot have child routes.");let y={id:d.props.id||x.join("-"),caseSensitive:d.props.caseSensitive,element:d.props.element,Component:d.props.Component,index:d.props.index,path:d.props.path,loader:d.props.loader,action:d.props.action,hydrateFallbackElement:d.props.hydrateFallbackElement,HydrateFallback:d.props.HydrateFallback,errorElement:d.props.errorElement,ErrorBoundary:d.props.ErrorBoundary,hasErrorBoundary:d.props.hasErrorBoundary===!0||d.props.ErrorBoundary!=null||d.props.errorElement!=null,shouldRevalidate:d.props.shouldRevalidate,handle:d.props.handle,lazy:d.props.lazy};d.props.children&&(y.children=Rf(d.props.children,x)),a.push(y)}),a}var lc="get",cc="application/x-www-form-urlencoded";function Nc(r){return r!=null&&typeof r.tagName=="string"}function dy(r){return Nc(r)&&r.tagName.toLowerCase()==="button"}function hy(r){return Nc(r)&&r.tagName.toLowerCase()==="form"}function py(r){return Nc(r)&&r.tagName.toLowerCase()==="input"}function gy(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function my(r,o){return r.button===0&&(!o||o==="_self")&&!gy(r)}var tc=null;function xy(){if(tc===null)try{new FormData(document.createElement("form"),0),tc=!1}catch{tc=!0}return tc}var yy=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function df(r){return r!=null&&!yy.has(r)?(yi(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${cc}"`),null):r}function wy(r,o){let a,d,p,x,y;if(hy(r)){let b=r.getAttribute("action");d=b?ys(b,o):null,a=r.getAttribute("method")||lc,p=df(r.getAttribute("enctype"))||cc,x=new FormData(r)}else if(dy(r)||py(r)&&(r.type==="submit"||r.type==="image")){let b=r.form;if(b==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let w=r.getAttribute("formaction")||b.getAttribute("action");if(d=w?ys(w,o):null,a=r.getAttribute("formmethod")||b.getAttribute("method")||lc,p=df(r.getAttribute("formenctype"))||df(b.getAttribute("enctype"))||cc,x=new FormData(b,r),!xy()){let{name:E,type:S,value:I}=r;if(S==="image"){let _=E?`${E}.`:"";x.append(`${_}x`,"0"),x.append(`${_}y`,"0")}else E&&x.append(E,I)}}else{if(Nc(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=lc,d=null,p=cc,y=r}return x&&p==="text/plain"&&(y=x,x=void 0),{action:d,method:a.toLowerCase(),encType:p,formData:x,body:y}}function ld(r,o){if(r===!1||r===null||typeof r>"u")throw new Error(o)}async function vy(r,o){if(r.id in o)return o[r.id];try{let a=await import(r.module);return o[r.id]=a,a}catch(a){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Cy(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function Ey(r,o,a){let d=await Promise.all(r.map(async p=>{let x=o.routes[p.route.id];if(x){let y=await vy(x,a);return y.links?y.links():[]}return[]}));return Ty(d.flat(1).filter(Cy).filter(p=>p.rel==="stylesheet"||p.rel==="preload").map(p=>p.rel==="stylesheet"?{...p,rel:"prefetch",as:"style"}:{...p,rel:"prefetch"}))}function d1(r,o,a,d,p,x){let y=(w,E)=>a[E]?w.route.id!==a[E].route.id:!0,b=(w,E)=>{var S;return a[E].pathname!==w.pathname||((S=a[E].route.path)==null?void 0:S.endsWith("*"))&&a[E].params["*"]!==w.params["*"]};return x==="assets"?o.filter((w,E)=>y(w,E)||b(w,E)):x==="data"?o.filter((w,E)=>{var I;let S=d.routes[w.route.id];if(!S||!S.hasLoader)return!1;if(y(w,E)||b(w,E))return!0;if(w.route.shouldRevalidate){let _=w.route.shouldRevalidate({currentUrl:new URL(p.pathname+p.search+p.hash,window.origin),currentParams:((I=a[0])==null?void 0:I.params)||{},nextUrl:new URL(r,window.origin),nextParams:w.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function Ay(r,o){return by(r.map(a=>{let d=o.routes[a.route.id];if(!d)return[];let p=[d.module];return d.imports&&(p=p.concat(d.imports)),p}).flat(1))}function by(r){return[...new Set(r)]}function Sy(r){let o={},a=Object.keys(r).sort();for(let d of a)o[d]=r[d];return o}function Ty(r,o){let a=new Set;return new Set(o),r.reduce((d,p)=>{let x=JSON.stringify(Sy(p));return a.has(x)||(a.add(x),d.push({key:x,link:p})),d},[])}function Iy(r){let o=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return o.pathname==="/"?o.pathname="_root.data":o.pathname=`${o.pathname.replace(/\/$/,"")}.data`,o}function Ny(){let r=R.useContext(Fo);return ld(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function _y(){let r=R.useContext(Ic);return ld(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var cd=R.createContext(void 0);cd.displayName="FrameworkContext";function Zp(){let r=R.useContext(cd);return ld(r,"You must render this element inside a <HydratedRouter> element"),r}function Ry(r,o){let a=R.useContext(cd),[d,p]=R.useState(!1),[x,y]=R.useState(!1),{onFocus:b,onBlur:w,onMouseEnter:E,onMouseLeave:S,onTouchStart:I}=o,_=R.useRef(null);R.useEffect(()=>{if(r==="render"&&y(!0),r==="viewport"){let B=V=>{V.forEach(W=>{y(W.isIntersecting)})},F=new IntersectionObserver(B,{threshold:.5});return _.current&&F.observe(_.current),()=>{F.disconnect()}}},[r]),R.useEffect(()=>{if(d){let B=setTimeout(()=>{y(!0)},100);return()=>{clearTimeout(B)}}},[d]);let D=()=>{p(!0)},L=()=>{p(!1),y(!1)};return a?r!=="intent"?[x,_,{}]:[x,_,{onFocus:Ta(b,D),onBlur:Ta(w,L),onMouseEnter:Ta(E,D),onMouseLeave:Ta(S,L),onTouchStart:Ta(I,D)}]:[!1,_,{}]}function Ta(r,o){return a=>{r&&r(a),a.defaultPrevented||o(a)}}function ky({page:r,...o}){let{router:a}=Ny(),d=R.useMemo(()=>Fp(a.routes,r,a.basename),[a.routes,r,a.basename]);return d?R.createElement(Py,{page:r,matches:d,...o}):(console.warn(`Tried to prefetch ${r} but no routes matched.`),null)}function Oy(r){let{manifest:o,routeModules:a}=Zp(),[d,p]=R.useState([]);return R.useEffect(()=>{let x=!1;return Ey(r,o,a).then(y=>{x||p(y)}),()=>{x=!0}},[r,o,a]),d}function Py({page:r,matches:o,...a}){let d=Yr(),{manifest:p,routeModules:x}=Zp(),{loaderData:y,matches:b}=_y(),w=R.useMemo(()=>d1(r,o,b,p,d,"data"),[r,o,b,p,d]),E=R.useMemo(()=>d1(r,o,b,p,d,"assets"),[r,o,b,p,d]),S=R.useMemo(()=>{if(r===d.pathname+d.search+d.hash)return[];let D=new Set,L=!1;if(o.forEach(F=>{var W;let V=p.routes[F.route.id];!V||!V.hasLoader||(!w.some(z=>z.route.id===F.route.id)&&F.route.id in y&&((W=x[F.route.id])!=null&&W.shouldRevalidate)||V.hasClientLoader?L=!0:D.add(F.route.id))}),D.size===0)return[];let B=Iy(r);return L&&D.size>0&&B.searchParams.set("_routes",o.filter(F=>D.has(F.route.id)).map(F=>F.route.id).join(",")),[B.pathname+B.search]},[y,d,p,w,o,r,x]),I=R.useMemo(()=>Ay(E,p),[E,p]),_=Oy(E);return R.createElement(R.Fragment,null,S.map(D=>R.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...a})),I.map(D=>R.createElement("link",{key:D,rel:"modulepreload",href:D,...a})),_.map(({key:D,link:L})=>R.createElement("link",{key:D,...L})))}function My(...r){return o=>{r.forEach(a=>{typeof a=="function"?a(o):a!=null&&(a.current=o)})}}var $p=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{$p&&(window.__reactRouterVersion="7.0.2")}catch{}function Dy({basename:r,children:o,window:a}){let d=R.useRef();d.current==null&&(d.current=E2({window:a,v5Compat:!0}));let p=d.current,[x,y]=R.useState({action:p.action,location:p.location}),b=R.useCallback(w=>{R.startTransition(()=>y(w))},[y]);return R.useLayoutEffect(()=>p.listen(b),[p,b]),R.createElement(uy,{basename:r,children:o,location:x.location,navigationType:x.action,navigator:p})}var qp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qp=R.forwardRef(function({onClick:o,discover:a="render",prefetch:d="none",relative:p,reloadDocument:x,replace:y,state:b,target:w,to:E,preventScrollReset:S,viewTransition:I,..._},D){let{basename:L}=R.useContext(wi),B=typeof E=="string"&&qp.test(E),F,V=!1;if(typeof E=="string"&&B&&(F=E,$p))try{let $=new URL(window.location.href),Ne=E.startsWith("//")?new URL($.protocol+E):new URL(E),Pe=ys(Ne.pathname,L);Ne.origin===$.origin&&Pe!=null?E=Pe+Ne.search+Ne.hash:V=!0}catch{yi(!1,`<Link to="${E}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let W=K2(E,{relative:p}),[z,Q,ie]=Ry(d,_),ue=jy(E,{replace:y,state:b,target:w,preventScrollReset:S,relative:p,viewTransition:I});function q($){o&&o($),$.defaultPrevented||ue($)}let ce=R.createElement("a",{..._,...ie,href:F||W,onClick:V||x?o:q,ref:My(D,Q),target:w,"data-discover":!B&&a==="render"?"true":void 0});return z&&!B?R.createElement(R.Fragment,null,ce,R.createElement(ky,{page:W})):ce});Qp.displayName="Link";var Ly=R.forwardRef(function({"aria-current":o="page",caseSensitive:a=!1,className:d="",end:p=!1,style:x,to:y,viewTransition:b,children:w,...E},S){let I=Ga(y,{relative:E.relative}),_=Yr(),D=R.useContext(Ic),{navigator:L,basename:B}=R.useContext(wi),F=D!=null&&Hy(I)&&b===!0,V=L.encodeLocation?L.encodeLocation(I).pathname:I.pathname,W=_.pathname,z=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;a||(W=W.toLowerCase(),z=z?z.toLowerCase():null,V=V.toLowerCase()),z&&B&&(z=ys(z,B)||z);const Q=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let ie=W===V||!p&&W.startsWith(V)&&W.charAt(Q)==="/",ue=z!=null&&(z===V||!p&&z.startsWith(V)&&z.charAt(V.length)==="/"),q={isActive:ie,isPending:ue,isTransitioning:F},ce=ie?o:void 0,$;typeof d=="function"?$=d(q):$=[d,ie?"active":null,ue?"pending":null,F?"transitioning":null].filter(Boolean).join(" ");let Ne=typeof x=="function"?x(q):x;return R.createElement(Qp,{...E,"aria-current":ce,className:$,ref:S,style:Ne,to:y,viewTransition:b},typeof w=="function"?w(q):w)});Ly.displayName="NavLink";var By=R.forwardRef(({discover:r="render",fetcherKey:o,navigate:a,reloadDocument:d,replace:p,state:x,method:y=lc,action:b,onSubmit:w,relative:E,preventScrollReset:S,viewTransition:I,..._},D)=>{let L=Uy(),B=Wy(b,{relative:E}),F=y.toLowerCase()==="get"?"get":"post",V=typeof b=="string"&&qp.test(b),W=z=>{if(w&&w(z),z.defaultPrevented)return;z.preventDefault();let Q=z.nativeEvent.submitter,ie=(Q==null?void 0:Q.getAttribute("formmethod"))||y;L(Q||z.currentTarget,{fetcherKey:o,method:ie,navigate:a,replace:p,state:x,relative:E,preventScrollReset:S,viewTransition:I})};return R.createElement("form",{ref:D,method:F,action:B,onSubmit:d?w:W,..._,"data-discover":!V&&r==="render"?"true":void 0})});By.displayName="Form";function Fy(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Jp(r){let o=R.useContext(Fo);return cn(o,Fy(r)),o}function jy(r,{target:o,replace:a,state:d,preventScrollReset:p,relative:x,viewTransition:y}={}){let b=pr(),w=Yr(),E=Ga(r,{relative:x});return R.useCallback(S=>{if(my(S,o)){S.preventDefault();let I=a!==void 0?a:La(w)===La(E);b(r,{replace:I,state:d,preventScrollReset:p,relative:x,viewTransition:y})}},[w,b,E,a,d,o,r,p,x,y])}var Vy=0,zy=()=>`__${String(++Vy)}__`;function Uy(){let{router:r}=Jp("useSubmit"),{basename:o}=R.useContext(wi),a=oy();return R.useCallback(async(d,p={})=>{let{action:x,method:y,encType:b,formData:w,body:E}=wy(d,o);if(p.navigate===!1){let S=p.fetcherKey||zy();await r.fetch(S,a,p.action||x,{preventScrollReset:p.preventScrollReset,formData:w,body:E,formMethod:p.method||y,formEncType:p.encType||b,flushSync:p.flushSync})}else await r.navigate(p.action||x,{preventScrollReset:p.preventScrollReset,formData:w,body:E,formMethod:p.method||y,formEncType:p.encType||b,replace:p.replace,state:p.state,fromRouteId:a,flushSync:p.flushSync,viewTransition:p.viewTransition})},[r,o,a])}function Wy(r,{relative:o}={}){let{basename:a}=R.useContext(wi),d=R.useContext(vi);cn(d,"useFormAction must be used inside a RouteContext");let[p]=d.matches.slice(-1),x={...Ga(r||".",{relative:o})},y=Yr();if(r==null){x.search=y.search;let b=new URLSearchParams(x.search),w=b.getAll("index");if(w.some(S=>S==="")){b.delete("index"),w.filter(I=>I).forEach(I=>b.append("index",I));let S=b.toString();x.search=S?`?${S}`:""}}return(!r||r===".")&&p.route.index&&(x.search=x.search?x.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(x.pathname=x.pathname==="/"?a:Fi([a,x.pathname])),La(x)}function Hy(r,o={}){let a=R.useContext(Hp);cn(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:d}=Jp("useViewTransitionState"),p=Ga(r,{relative:o.relative});if(!a.isTransitioning)return!1;let x=ys(a.currentLocation.pathname,d)||a.currentLocation.pathname,y=ys(a.nextLocation.pathname,d)||a.nextLocation.pathname;return mc(p.pathname,y)!=null||mc(p.pathname,x)!=null}new TextEncoder;function eg(){const r="./assets",o="/sounds/new_elevator_combined.mp3";pr();const a=R.useRef(new Audio(r+o)),[d,p]=R.useState(!1),[x,y]=R.useState(!1),[b,w]=R.useState(null),[E,S]=R.useState(!1),[I,_]=R.useState(!1);R.useEffect(()=>{const W=a.current,z=()=>{W.pause(),W.currentTime=0,y(!1),F()};return W.addEventListener("ended",z),()=>W.removeEventListener("ended",z)},[I]);function D(){w(null),a.current.load(),a.current.play().then(()=>{a.current.pause(),a.current.currentTime=0,p(!0),y(!0),S(!0),B()}).catch(W=>{console.error("Error loading audio:",W),w("Failed to load audio. Please check the file path and format."),S(!1)})}function L(){return!!(a.current&&!a.current.paused)}function B(){a.current.paused?a.current.play().catch(W=>{console.error("Error playing audio:",W),w("Failed to play audio. Please try again.")}):a.current.currentTime=0}function F(){a.current&&(a.current.pause(),a.current.currentTime=0,a.current.src="",a.current=null)}function V(W){a.current.currentTime=W,console.log(a.current.duration)}return{audioRef:a,error:b,playSound:B,loadSound:D,seekTo:V,cancelSound:F,checkSound:L,soundEnabled:E,setSoundEnabled:S,isPlaying:x}}var Pn;(function(r){r[r.QR_CODE=0]="QR_CODE",r[r.AZTEC=1]="AZTEC",r[r.CODABAR=2]="CODABAR",r[r.CODE_39=3]="CODE_39",r[r.CODE_93=4]="CODE_93",r[r.CODE_128=5]="CODE_128",r[r.DATA_MATRIX=6]="DATA_MATRIX",r[r.MAXICODE=7]="MAXICODE",r[r.ITF=8]="ITF",r[r.EAN_13=9]="EAN_13",r[r.EAN_8=10]="EAN_8",r[r.PDF_417=11]="PDF_417",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Pn||(Pn={}));Pn.QR_CODE,Pn.AZTEC,Pn.CODABAR,Pn.CODE_39,Pn.CODE_93,Pn.CODE_128,Pn.DATA_MATRIX,Pn.MAXICODE,Pn.ITF,Pn.EAN_13,Pn.EAN_8,Pn.PDF_417,Pn.RSS_14,Pn.RSS_EXPANDED,Pn.UPC_A,Pn.UPC_E,Pn.UPC_EAN_EXTENSION;var h1;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.URL=1]="URL"})(h1||(h1={}));var xc;(function(r){r[r.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",r[r.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(xc||(xc={}));var Gy=function(){function r(){}return r.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",r.SCAN_DEFAULT_FPS=2,r.DEFAULT_DISABLE_FLIP=!1,r.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,r.DEFAULT_SUPPORTED_SCAN_TYPE=[xc.SCAN_TYPE_CAMERA,xc.SCAN_TYPE_FILE],r}(),p1;(function(r){r[r.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",r[r.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",r[r.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(p1||(p1={}));var Na={exports:{}},Xy=Na.exports,g1;function Yy(){return g1||(g1=1,function(r,o){(function(a,d){d(o)})(Xy,function(a){function d(k){return k==null}var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,e){k.__proto__=e}||function(k,e){for(var n in e)e.hasOwnProperty(n)&&(k[n]=e[n])};function x(k,e){p(k,e);function n(){this.constructor=k}k.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function y(k,e){var n=Object.setPrototypeOf;n?n(k,e):k.__proto__=e}function b(k,e){e===void 0&&(e=k.constructor);var n=Error.captureStackTrace;n&&n(k,e)}var w=function(k){x(e,k);function e(n){var i=this.constructor,l=k.call(this,n)||this;return Object.defineProperty(l,"name",{value:i.name,enumerable:!1}),y(l,i.prototype),b(l),l}return e}(Error);class E extends w{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}E.kind="Exception";class S extends E{}S.kind="ArgumentException";class I extends E{}I.kind="IllegalArgumentException";class _{constructor(e){if(this.binarizer=e,e===null)throw new I("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,n){return this.binarizer.getBlackRow(e,n)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,n,i,l){const c=this.binarizer.getLuminanceSource().crop(e,n,i,l);return new _(this.binarizer.createBinarizer(c))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new _(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new _(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class D extends E{static getChecksumInstance(){return new D}}D.kind="ChecksumException";class L{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class B{static arraycopy(e,n,i,l,c){for(;c--;)i[l++]=e[n++]}static currentTimeMillis(){return Date.now()}}class F extends E{}F.kind="IndexOutOfBoundsException";class V extends F{constructor(e=void 0,n=void 0){super(n),this.index=e,this.message=n}}V.kind="ArrayIndexOutOfBoundsException";class W{static fill(e,n){for(let i=0,l=e.length;i<l;i++)e[i]=n}static fillWithin(e,n,i,l){W.rangeCheck(e.length,n,i);for(let c=n;c<i;c++)e[c]=l}static rangeCheck(e,n,i){if(n>i)throw new I("fromIndex("+n+") > toIndex("+i+")");if(n<0)throw new V(n);if(i>e)throw new V(i)}static asList(...e){return e}static create(e,n,i){return Array.from({length:e}).map(c=>Array.from({length:n}).fill(i))}static createInt32Array(e,n,i){return Array.from({length:e}).map(c=>Int32Array.from({length:n}).fill(i))}static equals(e,n){if(!e||!n||!e.length||!n.length||e.length!==n.length)return!1;for(let i=0,l=e.length;i<l;i++)if(e[i]!==n[i])return!1;return!0}static hashCode(e){if(e===null)return 0;let n=1;for(const i of e)n=31*n+i;return n}static fillUint8Array(e,n){for(let i=0;i!==e.length;i++)e[i]=n}static copyOf(e,n){return e.slice(0,n)}static copyOfUint8Array(e,n){if(e.length<=n){const i=new Uint8Array(n);return i.set(e),i}return e.slice(0,n)}static copyOfRange(e,n,i){const l=i-n,c=new Int32Array(l);return B.arraycopy(e,n,c,0,l),c}static binarySearch(e,n,i){i===void 0&&(i=W.numberComparator);let l=0,c=e.length-1;for(;l<=c;){const u=c+l>>1,h=i(n,e[u]);if(h>0)l=u+1;else if(h<0)c=u-1;else return u}return-l-1}static numberComparator(e,n){return e-n}}class z{static numberOfTrailingZeros(e){let n;if(e===0)return 32;let i=31;return n=e<<16,n!==0&&(i-=16,e=n),n=e<<8,n!==0&&(i-=8,e=n),n=e<<4,n!==0&&(i-=4,e=n),n=e<<2,n!==0&&(i-=2,e=n),i-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let n=1;return e>>>16||(n+=16,e<<=16),e>>>24||(n+=8,e<<=8),e>>>28||(n+=4,e<<=4),e>>>30||(n+=2,e<<=2),n-=e>>>31,n}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,n){return Math.trunc(e/n)}static parseInt(e,n=void 0){return parseInt(e,n)}}z.MIN_VALUE_32_BITS=-2147483648,z.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Q{constructor(e,n){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,n==null?this.bits=Q.makeArray(e):this.bits=n)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const n=Q.makeArray(e);B.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const n=this.size;if(e>=n)return n;const i=this.bits;let l=Math.floor(e/32),c=i[l];c&=~((1<<(e&31))-1);const u=i.length;for(;c===0;){if(++l===u)return n;c=i[l]}const h=l*32+z.numberOfTrailingZeros(c);return h>n?n:h}getNextUnset(e){const n=this.size;if(e>=n)return n;const i=this.bits;let l=Math.floor(e/32),c=~i[l];c&=~((1<<(e&31))-1);const u=i.length;for(;c===0;){if(++l===u)return n;c=~i[l]}const h=l*32+z.numberOfTrailingZeros(c);return h>n?n:h}setBulk(e,n){this.bits[Math.floor(e/32)]=n}setRange(e,n){if(n<e||e<0||n>this.size)throw new I;if(n===e)return;n--;const i=Math.floor(e/32),l=Math.floor(n/32),c=this.bits;for(let u=i;u<=l;u++){const h=u>i?0:e&31,v=(2<<(u<l?31:n&31))-(1<<h);c[u]|=v}}clear(){const e=this.bits.length,n=this.bits;for(let i=0;i<e;i++)n[i]=0}isRange(e,n,i){if(n<e||e<0||n>this.size)throw new I;if(n===e)return!0;n--;const l=Math.floor(e/32),c=Math.floor(n/32),u=this.bits;for(let h=l;h<=c;h++){const m=h>l?0:e&31,N=(2<<(h<c?31:n&31))-(1<<m)&4294967295;if((u[h]&N)!==(i?N:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,n){if(n<0||n>32)throw new I("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(let i=n;i>0;i--)this.appendBit((e>>i-1&1)===1)}appendBitArray(e){const n=e.size;this.ensureCapacity(this.size+n);for(let i=0;i<n;i++)this.appendBit(e.get(i))}xor(e){if(this.size!==e.size)throw new I("Sizes don't match");const n=this.bits;for(let i=0,l=n.length;i<l;i++)n[i]^=e.bits[i]}toBytes(e,n,i,l){for(let c=0;c<l;c++){let u=0;for(let h=0;h<8;h++)this.get(e)&&(u|=1<<7-h),e++;n[i+c]=u}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),i=n+1,l=this.bits;for(let c=0;c<i;c++){let u=l[c];u=u>>1&1431655765|(u&1431655765)<<1,u=u>>2&858993459|(u&858993459)<<2,u=u>>4&252645135|(u&252645135)<<4,u=u>>8&16711935|(u&16711935)<<8,u=u>>16&65535|(u&65535)<<16,e[n-c]=u}if(this.size!==i*32){const c=i*32-this.size;let u=e[0]>>>c;for(let h=1;h<i;h++){const m=e[h];u|=m<<32-c,e[h-1]=u,u=m>>>c}e[i-1]=u}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof Q))return!1;const n=e;return this.size===n.size&&W.equals(this.bits,n.bits)}hashCode(){return 31*this.size+W.hashCode(this.bits)}toString(){let e="";for(let n=0,i=this.size;n<i;n++)n&7||(e+=" "),e+=this.get(n)?"X":".";return e}clone(){return new Q(this.size,this.bits.slice())}}var ie;(function(k){k[k.OTHER=0]="OTHER",k[k.PURE_BARCODE=1]="PURE_BARCODE",k[k.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",k[k.TRY_HARDER=3]="TRY_HARDER",k[k.CHARACTER_SET=4]="CHARACTER_SET",k[k.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",k[k.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",k[k.ASSUME_GS1=7]="ASSUME_GS1",k[k.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",k[k.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",k[k.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(ie||(ie={}));var ue=ie;class q extends E{static getFormatInstance(){return new q}}q.kind="FormatException";var ce;(function(k){k[k.Cp437=0]="Cp437",k[k.ISO8859_1=1]="ISO8859_1",k[k.ISO8859_2=2]="ISO8859_2",k[k.ISO8859_3=3]="ISO8859_3",k[k.ISO8859_4=4]="ISO8859_4",k[k.ISO8859_5=5]="ISO8859_5",k[k.ISO8859_6=6]="ISO8859_6",k[k.ISO8859_7=7]="ISO8859_7",k[k.ISO8859_8=8]="ISO8859_8",k[k.ISO8859_9=9]="ISO8859_9",k[k.ISO8859_10=10]="ISO8859_10",k[k.ISO8859_11=11]="ISO8859_11",k[k.ISO8859_13=12]="ISO8859_13",k[k.ISO8859_14=13]="ISO8859_14",k[k.ISO8859_15=14]="ISO8859_15",k[k.ISO8859_16=15]="ISO8859_16",k[k.SJIS=16]="SJIS",k[k.Cp1250=17]="Cp1250",k[k.Cp1251=18]="Cp1251",k[k.Cp1252=19]="Cp1252",k[k.Cp1256=20]="Cp1256",k[k.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",k[k.UTF8=22]="UTF8",k[k.ASCII=23]="ASCII",k[k.Big5=24]="Big5",k[k.GB18030=25]="GB18030",k[k.EUC_KR=26]="EUC_KR"})(ce||(ce={}));class ${constructor(e,n,i,...l){this.valueIdentifier=e,this.name=i,typeof n=="number"?this.values=Int32Array.from([n]):this.values=n,this.otherEncodingNames=l,$.VALUE_IDENTIFIER_TO_ECI.set(e,this),$.NAME_TO_ECI.set(i,this);const c=this.values;for(let u=0,h=c.length;u!==h;u++){const m=c[u];$.VALUES_TO_ECI.set(m,this)}for(const u of l)$.NAME_TO_ECI.set(u,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new q("incorect value");const n=$.VALUES_TO_ECI.get(e);if(n===void 0)throw new q("incorect value");return n}static getCharacterSetECIByName(e){const n=$.NAME_TO_ECI.get(e);if(n===void 0)throw new q("incorect value");return n}equals(e){if(!(e instanceof $))return!1;const n=e;return this.getName()===n.getName()}}$.VALUE_IDENTIFIER_TO_ECI=new Map,$.VALUES_TO_ECI=new Map,$.NAME_TO_ECI=new Map,$.Cp437=new $(ce.Cp437,Int32Array.from([0,2]),"Cp437"),$.ISO8859_1=new $(ce.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),$.ISO8859_2=new $(ce.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),$.ISO8859_3=new $(ce.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),$.ISO8859_4=new $(ce.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),$.ISO8859_5=new $(ce.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),$.ISO8859_6=new $(ce.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),$.ISO8859_7=new $(ce.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),$.ISO8859_8=new $(ce.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),$.ISO8859_9=new $(ce.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),$.ISO8859_10=new $(ce.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),$.ISO8859_11=new $(ce.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),$.ISO8859_13=new $(ce.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),$.ISO8859_14=new $(ce.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),$.ISO8859_15=new $(ce.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),$.ISO8859_16=new $(ce.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),$.SJIS=new $(ce.SJIS,20,"SJIS","Shift_JIS"),$.Cp1250=new $(ce.Cp1250,21,"Cp1250","windows-1250"),$.Cp1251=new $(ce.Cp1251,22,"Cp1251","windows-1251"),$.Cp1252=new $(ce.Cp1252,23,"Cp1252","windows-1252"),$.Cp1256=new $(ce.Cp1256,24,"Cp1256","windows-1256"),$.UnicodeBigUnmarked=new $(ce.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),$.UTF8=new $(ce.UTF8,26,"UTF8","UTF-8"),$.ASCII=new $(ce.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),$.Big5=new $(ce.Big5,28,"Big5"),$.GB18030=new $(ce.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),$.EUC_KR=new $(ce.EUC_KR,30,"EUC_KR","EUC-KR");class Ne extends E{}Ne.kind="UnsupportedOperationException";class Pe{static decode(e,n){const i=this.encodingName(n);return this.customDecoder?this.customDecoder(e,i):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(i)?this.decodeFallback(e,i):new TextDecoder(i).decode(e)}static shouldDecodeOnFallback(e){return!Pe.isBrowser()&&e==="ISO-8859-1"}static encode(e,n){const i=this.encodingName(n);return this.customEncoder?this.customEncoder(e,i):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof $?e:$.getCharacterSetECIByName(e)}static decodeFallback(e,n){const i=this.encodingCharacterSet(n);if(Pe.isDecodeFallbackSupported(i)){let l="";for(let c=0,u=e.length;c<u;c++){let h=e[c].toString(16);h.length<2&&(h="0"+h),l+="%"+h}return decodeURIComponent(l)}if(i.equals($.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Ne(`Encoding ${this.encodingName(n)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals($.UTF8)||e.equals($.ISO8859_1)||e.equals($.ASCII)}static encodeFallback(e){const i=btoa(unescape(encodeURIComponent(e))).split(""),l=[];for(let c=0;c<i.length;c++)l.push(i[c].charCodeAt(0));return new Uint8Array(l)}}class ke{static castAsNonUtf8Char(e,n=null){const i=n?n.getName():this.ISO88591;return Pe.decode(new Uint8Array([e]),i)}static guessEncoding(e,n){if(n!=null&&n.get(ue.CHARACTER_SET)!==void 0)return n.get(ue.CHARACTER_SET).toString();const i=e.length;let l=!0,c=!0,u=!0,h=0,m=0,v=0,N=0,O=0,M=0,U=0,G=0,K=0,J=0,oe=0;const Ee=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let be=0;be<i&&(l||c||u);be++){const we=e[be]&255;u&&(h>0?we&128?h--:u=!1:we&128&&(we&64?(h++,we&32?(h++,we&16?(h++,we&8?u=!1:N++):v++):m++):u=!1)),l&&(we>127&&we<160?l=!1:we>159&&(we<192||we===215||we===247)&&oe++),c&&(O>0?we<64||we===127||we>252?c=!1:O--:we===128||we===160||we>239?c=!1:we>160&&we<224?(M++,G=0,U++,U>K&&(K=U)):we>127?(O++,U=0,G++,G>J&&(J=G)):(U=0,G=0))}return u&&h>0&&(u=!1),c&&O>0&&(c=!1),u&&(Ee||m+v+N>0)?ke.UTF8:c&&(ke.ASSUME_SHIFT_JIS||K>=3||J>=3)?ke.SHIFT_JIS:l&&c?K===2&&M===2||oe*10>=i?ke.SHIFT_JIS:ke.ISO88591:l?ke.ISO88591:c?ke.SHIFT_JIS:u?ke.UTF8:ke.PLATFORM_DEFAULT_ENCODING}static format(e,...n){let i=-1;function l(u,h,m,v,N,O){if(u==="%%")return"%";if(n[++i]===void 0)return;u=v?parseInt(v.substr(1)):void 0;let M=N?parseInt(N.substr(1)):void 0,U;switch(O){case"s":U=n[i];break;case"c":U=n[i][0];break;case"f":U=parseFloat(n[i]).toFixed(u);break;case"p":U=parseFloat(n[i]).toPrecision(u);break;case"e":U=parseFloat(n[i]).toExponential(u);break;case"x":U=parseInt(n[i]).toString(M||16);break;case"d":U=parseFloat(parseInt(n[i],M||10).toPrecision(u)).toFixed(0);break}U=typeof U=="object"?JSON.stringify(U):(+U).toString(M);let G=parseInt(m),K=m&&m[0]+""=="0"?"0":" ";for(;U.length<G;)U=h!==void 0?U+K:K+U;return U}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(c,l)}static getBytes(e,n){return Pe.encode(e,n)}static getCharCode(e,n=0){return e.charCodeAt(n)}static getCharAt(e){return String.fromCharCode(e)}}ke.SHIFT_JIS=$.SJIS.getName(),ke.GB2312="GB2312",ke.ISO88591=$.ISO8859_1.getName(),ke.EUC_JP="EUC_JP",ke.UTF8=$.UTF8.getName(),ke.PLATFORM_DEFAULT_ENCODING=ke.UTF8,ke.ASSUME_SHIFT_JIS=!1;class Re{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=ke.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,n,i){for(let l=n;n<n+i;l++)this.append(e[l]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+1)}substring(e,n){return this.value.substring(e,n)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+n.length)}}class Ve{constructor(e,n,i,l){if(this.width=e,this.height=n,this.rowSize=i,this.bits=l,n==null&&(n=e),this.height=n,e<1||n<1)throw new I("Both dimensions must be greater than 0");i==null&&(i=Math.floor((e+31)/32)),this.rowSize=i,l==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const n=e.length,i=e[0].length,l=new Ve(i,n);for(let c=0;c<n;c++){const u=e[c];for(let h=0;h<i;h++)u[h]&&l.set(h,c)}return l}static parseFromString(e,n,i){if(e===null)throw new I("stringRepresentation cannot be null");const l=new Array(e.length);let c=0,u=0,h=-1,m=0,v=0;for(;v<e.length;)if(e.charAt(v)===`
`||e.charAt(v)==="\r"){if(c>u){if(h===-1)h=c-u;else if(c-u!==h)throw new I("row lengths do not match");u=c,m++}v++}else if(e.substring(v,v+n.length)===n)v+=n.length,l[c]=!0,c++;else if(e.substring(v,v+i.length)===i)v+=i.length,l[c]=!1,c++;else throw new I("illegal character encountered: "+e.substring(v));if(c>u){if(h===-1)h=c-u;else if(c-u!==h)throw new I("row lengths do not match");m++}const N=new Ve(h,m);for(let O=0;O<c;O++)l[O]&&N.set(Math.floor(O%h),Math.floor(O/h));return N}get(e,n){const i=n*this.rowSize+Math.floor(e/32);return(this.bits[i]>>>(e&31)&1)!==0}set(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]|=1<<(e&31)&4294967295}unset(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]&=~(1<<(e&31)&4294967295)}flip(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new I("input matrix dimensions do not match");const n=new Q(Math.floor(this.width/32)+1),i=this.rowSize,l=this.bits;for(let c=0,u=this.height;c<u;c++){const h=c*i,m=e.getRow(c,n).getBitArray();for(let v=0;v<i;v++)l[h+v]^=m[v]}}clear(){const e=this.bits,n=e.length;for(let i=0;i<n;i++)e[i]=0}setRegion(e,n,i,l){if(n<0||e<0)throw new I("Left and top must be nonnegative");if(l<1||i<1)throw new I("Height and width must be at least 1");const c=e+i,u=n+l;if(u>this.height||c>this.width)throw new I("The region must fit inside the matrix");const h=this.rowSize,m=this.bits;for(let v=n;v<u;v++){const N=v*h;for(let O=e;O<c;O++)m[N+Math.floor(O/32)]|=1<<(O&31)&4294967295}}getRow(e,n){n==null||n.getSize()<this.width?n=new Q(this.width):n.clear();const i=this.rowSize,l=this.bits,c=e*i;for(let u=0;u<i;u++)n.setBulk(u*32,l[c+u]);return n}setRow(e,n){B.arraycopy(n.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),n=this.getHeight();let i=new Q(e),l=new Q(e);for(let c=0,u=Math.floor((n+1)/2);c<u;c++)i=this.getRow(c,i),l=this.getRow(n-1-c,l),i.reverse(),l.reverse(),this.setRow(c,l),this.setRow(n-1-c,i)}getEnclosingRectangle(){const e=this.width,n=this.height,i=this.rowSize,l=this.bits;let c=e,u=n,h=-1,m=-1;for(let v=0;v<n;v++)for(let N=0;N<i;N++){const O=l[v*i+N];if(O!==0){if(v<u&&(u=v),v>m&&(m=v),N*32<c){let M=0;for(;!(O<<31-M&4294967295);)M++;N*32+M<c&&(c=N*32+M)}if(N*32+31>h){let M=31;for(;!(O>>>M);)M--;N*32+M>h&&(h=N*32+M)}}}return h<c||m<u?null:Int32Array.from([c,u,h-c+1,m-u+1])}getTopLeftOnBit(){const e=this.rowSize,n=this.bits;let i=0;for(;i<n.length&&n[i]===0;)i++;if(i===n.length)return null;const l=i/e;let c=i%e*32;const u=n[i];let h=0;for(;!(u<<31-h&4294967295);)h++;return c+=h,Int32Array.from([c,l])}getBottomRightOnBit(){const e=this.rowSize,n=this.bits;let i=n.length-1;for(;i>=0&&n[i]===0;)i--;if(i<0)return null;const l=Math.floor(i/e);let c=Math.floor(i%e)*32;const u=n[i];let h=31;for(;!(u>>>h);)h--;return c+=h,Int32Array.from([c,l])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof Ve))return!1;const n=e;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&W.equals(this.bits,n.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+W.hashCode(this.bits),e}toString(e="X ",n="  ",i=`
`){return this.buildToString(e,n,i)}buildToString(e,n,i){let l=new Re;for(let c=0,u=this.height;c<u;c++){for(let h=0,m=this.width;h<m;h++)l.append(this.get(h,c)?e:n);l.append(i)}return l.toString()}clone(){return new Ve(this.width,this.height,this.rowSize,this.bits.slice())}}class ee extends E{static getNotFoundInstance(){return new ee}}ee.kind="NotFoundException";class Ue extends L{constructor(e){super(e),this.luminances=Ue.EMPTY,this.buckets=new Int32Array(Ue.LUMINANCE_BUCKETS)}getBlackRow(e,n){const i=this.getLuminanceSource(),l=i.getWidth();n==null||n.getSize()<l?n=new Q(l):n.clear(),this.initArrays(l);const c=i.getRow(e,this.luminances),u=this.buckets;for(let m=0;m<l;m++)u[(c[m]&255)>>Ue.LUMINANCE_SHIFT]++;const h=Ue.estimateBlackPoint(u);if(l<3)for(let m=0;m<l;m++)(c[m]&255)<h&&n.set(m);else{let m=c[0]&255,v=c[1]&255;for(let N=1;N<l-1;N++){const O=c[N+1]&255;(v*4-m-O)/2<h&&n.set(N),m=v,v=O}}return n}getBlackMatrix(){const e=this.getLuminanceSource(),n=e.getWidth(),i=e.getHeight(),l=new Ve(n,i);this.initArrays(n);const c=this.buckets;for(let m=1;m<5;m++){const v=Math.floor(i*m/5),N=e.getRow(v,this.luminances),O=Math.floor(n*4/5);for(let M=Math.floor(n/5);M<O;M++){const U=N[M]&255;c[U>>Ue.LUMINANCE_SHIFT]++}}const u=Ue.estimateBlackPoint(c),h=e.getMatrix();for(let m=0;m<i;m++){const v=m*n;for(let N=0;N<n;N++)(h[v+N]&255)<u&&l.set(N,m)}return l}createBinarizer(e){return new Ue(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const n=this.buckets;for(let i=0;i<Ue.LUMINANCE_BUCKETS;i++)n[i]=0}static estimateBlackPoint(e){const n=e.length;let i=0,l=0,c=0;for(let N=0;N<n;N++)e[N]>c&&(l=N,c=e[N]),e[N]>i&&(i=e[N]);let u=0,h=0;for(let N=0;N<n;N++){const O=N-l,M=e[N]*O*O;M>h&&(u=N,h=M)}if(l>u){const N=l;l=u,u=N}if(u-l<=n/16)throw new ee;let m=u-1,v=-1;for(let N=u-1;N>l;N--){const O=N-l,M=O*O*(u-N)*(i-e[N]);M>v&&(m=N,v=M)}return m<<Ue.LUMINANCE_SHIFT}}Ue.LUMINANCE_BITS=5,Ue.LUMINANCE_SHIFT=8-Ue.LUMINANCE_BITS,Ue.LUMINANCE_BUCKETS=1<<Ue.LUMINANCE_BITS,Ue.EMPTY=Uint8ClampedArray.from([0]);class me extends Ue{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),n=e.getWidth(),i=e.getHeight();if(n>=me.MINIMUM_DIMENSION&&i>=me.MINIMUM_DIMENSION){const l=e.getMatrix();let c=n>>me.BLOCK_SIZE_POWER;n&me.BLOCK_SIZE_MASK&&c++;let u=i>>me.BLOCK_SIZE_POWER;i&me.BLOCK_SIZE_MASK&&u++;const h=me.calculateBlackPoints(l,c,u,n,i),m=new Ve(n,i);me.calculateThresholdForBlock(l,c,u,n,i,h,m),this.matrix=m}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new me(e)}static calculateThresholdForBlock(e,n,i,l,c,u,h){const m=c-me.BLOCK_SIZE,v=l-me.BLOCK_SIZE;for(let N=0;N<i;N++){let O=N<<me.BLOCK_SIZE_POWER;O>m&&(O=m);const M=me.cap(N,2,i-3);for(let U=0;U<n;U++){let G=U<<me.BLOCK_SIZE_POWER;G>v&&(G=v);const K=me.cap(U,2,n-3);let J=0;for(let Ee=-2;Ee<=2;Ee++){const be=u[M+Ee];J+=be[K-2]+be[K-1]+be[K]+be[K+1]+be[K+2]}const oe=J/25;me.thresholdBlock(e,G,O,oe,l,h)}}}static cap(e,n,i){return e<n?n:e>i?i:e}static thresholdBlock(e,n,i,l,c,u){for(let h=0,m=i*c+n;h<me.BLOCK_SIZE;h++,m+=c)for(let v=0;v<me.BLOCK_SIZE;v++)(e[m+v]&255)<=l&&u.set(n+v,i+h)}static calculateBlackPoints(e,n,i,l,c){const u=c-me.BLOCK_SIZE,h=l-me.BLOCK_SIZE,m=new Array(i);for(let v=0;v<i;v++){m[v]=new Int32Array(n);let N=v<<me.BLOCK_SIZE_POWER;N>u&&(N=u);for(let O=0;O<n;O++){let M=O<<me.BLOCK_SIZE_POWER;M>h&&(M=h);let U=0,G=255,K=0;for(let oe=0,Ee=N*l+M;oe<me.BLOCK_SIZE;oe++,Ee+=l){for(let be=0;be<me.BLOCK_SIZE;be++){const we=e[Ee+be]&255;U+=we,we<G&&(G=we),we>K&&(K=we)}if(K-G>me.MIN_DYNAMIC_RANGE)for(oe++,Ee+=l;oe<me.BLOCK_SIZE;oe++,Ee+=l)for(let be=0;be<me.BLOCK_SIZE;be++)U+=e[Ee+be]&255}let J=U>>me.BLOCK_SIZE_POWER*2;if(K-G<=me.MIN_DYNAMIC_RANGE&&(J=G/2,v>0&&O>0)){const oe=(m[v-1][O]+2*m[v][O-1]+m[v-1][O-1])/4;G<oe&&(J=oe)}m[v][O]=J}}return m}}me.BLOCK_SIZE_POWER=3,me.BLOCK_SIZE=1<<me.BLOCK_SIZE_POWER,me.BLOCK_SIZE_MASK=me.BLOCK_SIZE-1,me.MINIMUM_DIMENSION=me.BLOCK_SIZE*5,me.MIN_DYNAMIC_RANGE=24;class pe{constructor(e,n){this.width=e,this.height=n}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,n,i,l){throw new Ne("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Ne("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Ne("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let n=new Re;for(let i=0;i<this.height;i++){const l=this.getRow(i,e);for(let c=0;c<this.width;c++){const u=l[c]&255;let h;u<64?h="#":u<128?h="+":u<192?h=".":h=" ",n.append(h)}n.append(`
`)}return n.toString()}}class Oe extends pe{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,n){const i=this.delegate.getRow(e,n),l=this.getWidth();for(let c=0;c<l;c++)i[c]=255-(i[c]&255);return i}getMatrix(){const e=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n);for(let l=0;l<n;l++)i[l]=255-(e[l]&255);return i}isCropSupported(){return this.delegate.isCropSupported()}crop(e,n,i,l){return new Oe(this.delegate.crop(e,n,i,l))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Oe(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Oe(this.delegate.rotateCounterClockwise45())}}class fe extends pe{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=fe.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const n=e.getContext("2d").getImageData(0,0,e.width,e.height);return fe.toGrayscaleBuffer(n.data,e.width,e.height)}static toGrayscaleBuffer(e,n,i){const l=new Uint8ClampedArray(n*i);for(let c=0,u=0,h=e.length;c<h;c+=4,u++){let m;if(e[c+3]===0)m=255;else{const N=e[c],O=e[c+1],M=e[c+2];m=306*N+601*O+117*M+512>>10}l[u]=m}return l}getRow(e,n){if(e<0||e>=this.getHeight())throw new I("Requested row is outside the image: "+e);const i=this.getWidth(),l=e*i;return n===null?n=this.buffer.slice(l,l+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(l,l+i))),n}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,n,i,l){return super.crop(e,n,i,l),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const n=this.getTempCanvasElement(),i=n.getContext("2d"),l=e*fe.DEGREE_TO_RADIANS,c=this.canvas.width,u=this.canvas.height,h=Math.ceil(Math.abs(Math.cos(l))*c+Math.abs(Math.sin(l))*u),m=Math.ceil(Math.abs(Math.sin(l))*c+Math.abs(Math.cos(l))*u);return n.width=h,n.height=m,i.translate(h/2,m/2),i.rotate(l),i.drawImage(this.canvas,c/-2,u/-2),this.buffer=fe.makeBufferFromCanvasImageData(n),this}invert(){return new Oe(this)}}fe.DEGREE_TO_RADIANS=Math.PI/180;class X{constructor(e,n,i){this.deviceId=e,this.label=n,this.kind="videoinput",this.groupId=i||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var te=(globalThis||Ql||self||window||void 0)&&(globalThis||Ql||self||window||void 0).__awaiter||function(k,e,n,i){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(N){try{v(i.next(N))}catch(O){u(O)}}function m(N){try{v(i.throw(N))}catch(O){u(O)}}function v(N){N.done?c(N.value):l(N.value).then(h,m)}v((i=i.apply(k,e||[])).next())})};class Ae{constructor(e,n=500,i){this.reader=e,this.timeBetweenScansMillis=n,this._hints=i,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return te(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),n=[];for(const i of e){const l=i.kind==="video"?"videoinput":i.kind;if(l!=="videoinput")continue;const c=i.deviceId||i.id,u=i.label||`Video device ${n.length+1}`,h=i.groupId,m={deviceId:c,label:u,kind:l,groupId:h};n.push(m)}return n})}getVideoInputDevices(){return te(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(n=>new X(n.deviceId,n.label))})}findDeviceById(e){return te(this,void 0,void 0,function*(){const n=yield this.listVideoInputDevices();return n?n.find(i=>i.deviceId===e):null})}decodeFromInputVideoDevice(e,n){return te(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,n)})}decodeOnceFromVideoDevice(e,n){return te(this,void 0,void 0,function*(){this.reset();let i;e?i={deviceId:{exact:e}}:i={facingMode:"environment"};const l={video:i};return yield this.decodeOnceFromConstraints(l,n)})}decodeOnceFromConstraints(e,n){return te(this,void 0,void 0,function*(){const i=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(i,n)})}decodeOnceFromStream(e,n){return te(this,void 0,void 0,function*(){this.reset();const i=yield this.attachStreamToVideo(e,n);return yield this.decodeOnce(i)})}decodeFromInputVideoDeviceContinuously(e,n,i){return te(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,n,i)})}decodeFromVideoDevice(e,n,i){return te(this,void 0,void 0,function*(){let l;e?l={deviceId:{exact:e}}:l={facingMode:"environment"};const c={video:l};return yield this.decodeFromConstraints(c,n,i)})}decodeFromConstraints(e,n,i){return te(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(l,n,i)})}decodeFromStream(e,n,i){return te(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(e,n);return yield this.decodeContinuously(l,i)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,n){return te(this,void 0,void 0,function*(){const i=this.prepareVideoElement(n);return this.addVideoSource(i,e),this.videoElement=i,this.stream=e,yield this.playVideoOnLoadAsync(i),i})}playVideoOnLoadAsync(e){return new Promise((n,i)=>this.playVideoOnLoad(e,()=>n()))}playVideoOnLoad(e,n){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",n),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return te(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,n){const i=document.getElementById(e);if(!i)throw new S(`element with id '${e}' not found`);if(i.nodeName.toLowerCase()!==n.toLowerCase())throw new S(`element with id '${e}' must be an ${n} element`);return i}decodeFromImage(e,n){if(!e&&!n)throw new S("either imageElement with a src set or an url must be provided");return n&&!e?this.decodeFromImageUrl(n):this.decodeFromImageElement(e)}decodeFromVideo(e,n){if(!e&&!n)throw new S("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,n,i){if(e===void 0&&n===void 0)throw new S("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrlContinuously(n,i):this.decodeFromVideoElementContinuously(e,i)}decodeFromImageElement(e){if(!e)throw new S("An image element must be provided.");this.reset();const n=this.prepareImageElement(e);this.imageElement=n;let i;return this.isImageLoaded(n)?i=this.decodeOnce(n,!1,!0):i=this._decodeOnLoadImage(n),i}decodeFromVideoElement(e){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(n)}decodeFromVideoElementContinuously(e,n){const i=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(i,n)}_decodeFromVideoElementSetup(e){if(!e)throw new S("A video element must be provided.");this.reset();const n=this.prepareVideoElement(e);return this.videoElement=n,n}decodeFromImageUrl(e){if(!e)throw new S("An URL must be provided.");this.reset();const n=this.prepareImageElement();this.imageElement=n;const i=this._decodeOnLoadImage(n);return n.src=e,i}decodeFromVideoUrl(e){if(!e)throw new S("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),i=this.decodeFromVideoElement(n);return n.src=e,i}decodeFromVideoUrlContinuously(e,n){if(!e)throw new S("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),l=this.decodeFromVideoElementContinuously(i,n);return i.src=e,l}_decodeOnLoadImage(e){return new Promise((n,i)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(n,i),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return te(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,n){return te(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,n)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let n;return typeof e>"u"&&(n=document.createElement("img"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(n=e),n}prepareVideoElement(e){let n;return!e&&typeof document<"u"&&(n=document.createElement("video"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(n=e),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n}decodeOnce(e,n=!0,i=!0){this._stopAsyncDecode=!1;const l=(c,u)=>{if(this._stopAsyncDecode){u(new ee("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const h=this.decode(e);c(h)}catch(h){const m=n&&h instanceof ee,N=(h instanceof D||h instanceof q)&&i;if(m||N)return setTimeout(l,this._timeBetweenDecodingAttempts,c,u);u(h)}};return new Promise((c,u)=>l(c,u))}decodeContinuously(e,n){this._stopContinuousDecode=!1;const i=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const l=this.decode(e);n(l,null),setTimeout(i,this.timeBetweenScansMillis)}catch(l){n(null,l);const c=l instanceof D||l instanceof q,u=l instanceof ee;(c||u)&&setTimeout(i,this._timeBetweenDecodingAttempts)}};i()}decode(e){const n=this.createBinaryBitmap(e);return this.decodeBitmap(n)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,n,i){n||(n={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),i||(i=this.captureCanvasContext),i.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}drawImageOnCanvas(e,n,i=this.captureCanvasContext){n||(n={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),i||(i=this.captureCanvasContext),i.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const n=this.getCaptureCanvas(e),i=new fe(n),l=new me(i);return new _(l)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const i=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=i}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const n=this.createCaptureCanvas(e);this.captureCanvas=n}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const n=document.createElement("canvas");let i,l;return typeof e<"u"&&(e instanceof HTMLVideoElement?(i=e.videoWidth,l=e.videoHeight):e instanceof HTMLImageElement&&(i=e.naturalWidth||e.width,l=e.naturalHeight||e.height)),n.style.width=i+"px",n.style.height=l+"px",n.width=i,n.height=l,n}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,n){try{e.srcObject=n}catch{e.src=URL.createObjectURL(n)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class ze{constructor(e,n,i=n==null?0:8*n.length,l,c,u=B.currentTimeMillis()){this.text=e,this.rawBytes=n,this.numBits=i,this.resultPoints=l,this.format=c,this.timestamp=u,this.text=e,this.rawBytes=n,i==null?this.numBits=n==null?0:8*n.length:this.numBits=i,this.resultPoints=l,this.format=c,this.resultMetadata=null,u==null?this.timestamp=B.currentTimeMillis():this.timestamp=u}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,n){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,n)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const n=this.resultPoints;if(n===null)this.resultPoints=e;else if(e!==null&&e.length>0){const i=new Array(n.length+e.length);B.arraycopy(n,0,i,0,n.length),B.arraycopy(e,0,i,n.length,e.length),this.resultPoints=i}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Se;(function(k){k[k.AZTEC=0]="AZTEC",k[k.CODABAR=1]="CODABAR",k[k.CODE_39=2]="CODE_39",k[k.CODE_93=3]="CODE_93",k[k.CODE_128=4]="CODE_128",k[k.DATA_MATRIX=5]="DATA_MATRIX",k[k.EAN_8=6]="EAN_8",k[k.EAN_13=7]="EAN_13",k[k.ITF=8]="ITF",k[k.MAXICODE=9]="MAXICODE",k[k.PDF_417=10]="PDF_417",k[k.QR_CODE=11]="QR_CODE",k[k.RSS_14=12]="RSS_14",k[k.RSS_EXPANDED=13]="RSS_EXPANDED",k[k.UPC_A=14]="UPC_A",k[k.UPC_E=15]="UPC_E",k[k.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Se||(Se={}));var de=Se,We;(function(k){k[k.OTHER=0]="OTHER",k[k.ORIENTATION=1]="ORIENTATION",k[k.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",k[k.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",k[k.ISSUE_NUMBER=4]="ISSUE_NUMBER",k[k.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",k[k.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",k[k.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",k[k.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",k[k.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",k[k.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(We||(We={}));var Fe=We;class tt{constructor(e,n,i,l,c=-1,u=-1){this.rawBytes=e,this.text=n,this.byteSegments=i,this.ecLevel=l,this.structuredAppendSequenceNumber=c,this.structuredAppendParity=u,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class ge{exp(e){return this.expTable[e]}log(e){if(e===0)throw new I;return this.logTable[e]}static addOrSubtract(e,n){return e^n}}class Ze{constructor(e,n){if(n.length===0)throw new I;this.field=e;const i=n.length;if(i>1&&n[0]===0){let l=1;for(;l<i&&n[l]===0;)l++;l===i?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(i-l),B.arraycopy(n,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const n=this.coefficients;let i;if(e===1){i=0;for(let u=0,h=n.length;u!==h;u++){const m=n[u];i=ge.addOrSubtract(i,m)}return i}i=n[0];const l=n.length,c=this.field;for(let u=1;u<l;u++)i=ge.addOrSubtract(c.multiply(e,i),n[u]);return i}addOrSubtract(e){if(!this.field.equals(e.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,i=e.coefficients;if(n.length>i.length){const u=n;n=i,i=u}let l=new Int32Array(i.length);const c=i.length-n.length;B.arraycopy(i,0,l,0,c);for(let u=c;u<i.length;u++)l[u]=ge.addOrSubtract(n[u-c],i[u]);return new Ze(this.field,l)}multiply(e){if(!this.field.equals(e.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const n=this.coefficients,i=n.length,l=e.coefficients,c=l.length,u=new Int32Array(i+c-1),h=this.field;for(let m=0;m<i;m++){const v=n[m];for(let N=0;N<c;N++)u[m+N]=ge.addOrSubtract(u[m+N],h.multiply(v,l[N]))}return new Ze(h,u)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const n=this.coefficients.length,i=this.field,l=new Int32Array(n),c=this.coefficients;for(let u=0;u<n;u++)l[u]=i.multiply(c[u],e);return new Ze(i,l)}multiplyByMonomial(e,n){if(e<0)throw new I;if(n===0)return this.field.getZero();const i=this.coefficients,l=i.length,c=new Int32Array(l+e),u=this.field;for(let h=0;h<l;h++)c[h]=u.multiply(i[h],n);return new Ze(u,c)}divide(e){if(!this.field.equals(e.field))throw new I("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new I("Divide by 0");const n=this.field;let i=n.getZero(),l=this;const c=e.getCoefficient(e.getDegree()),u=n.inverse(c);for(;l.getDegree()>=e.getDegree()&&!l.isZero();){const h=l.getDegree()-e.getDegree(),m=n.multiply(l.getCoefficient(l.getDegree()),u),v=e.multiplyByMonomial(h,m),N=n.buildMonomial(h,m);i=i.addOrSubtract(N),l=l.addOrSubtract(v)}return[i,l]}toString(){let e="";for(let n=this.getDegree();n>=0;n--){let i=this.getCoefficient(n);if(i!==0){if(i<0?(e+=" - ",i=-i):e.length>0&&(e+=" + "),n===0||i!==1){const l=this.field.log(i);l===0?e+="1":l===1?e+="a":(e+="a^",e+=l)}n!==0&&(n===1?e+="x":(e+="x^",e+=n))}}return e}}class at extends E{}at.kind="ArithmeticException";class _e extends ge{constructor(e,n,i){super(),this.primitive=e,this.size=n,this.generatorBase=i;const l=new Int32Array(n);let c=1;for(let h=0;h<n;h++)l[h]=c,c*=2,c>=n&&(c^=e,c&=n-1);this.expTable=l;const u=new Int32Array(n);for(let h=0;h<n-1;h++)u[l[h]]=h;this.logTable=u,this.zero=new Ze(this,Int32Array.from([0])),this.one=new Ze(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new I;if(n===0)return this.zero;const i=new Int32Array(e+1);return i[0]=n,new Ze(this,i)}inverse(e){if(e===0)throw new at;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+z.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}_e.AZTEC_DATA_12=new _e(4201,4096,1),_e.AZTEC_DATA_10=new _e(1033,1024,1),_e.AZTEC_DATA_6=new _e(67,64,1),_e.AZTEC_PARAM=new _e(19,16,1),_e.QR_CODE_FIELD_256=new _e(285,256,0),_e.DATA_MATRIX_FIELD_256=new _e(301,256,1),_e.AZTEC_DATA_8=_e.DATA_MATRIX_FIELD_256,_e.MAXICODE_FIELD_64=_e.AZTEC_DATA_6;class nt extends E{}nt.kind="ReedSolomonException";class Pt extends E{}Pt.kind="IllegalStateException";class Dt{constructor(e){this.field=e}decode(e,n){const i=this.field,l=new Ze(i,e),c=new Int32Array(n);let u=!0;for(let U=0;U<n;U++){const G=l.evaluateAt(i.exp(U+i.getGeneratorBase()));c[c.length-1-U]=G,G!==0&&(u=!1)}if(u)return;const h=new Ze(i,c),m=this.runEuclideanAlgorithm(i.buildMonomial(n,1),h,n),v=m[0],N=m[1],O=this.findErrorLocations(v),M=this.findErrorMagnitudes(N,O);for(let U=0;U<O.length;U++){const G=e.length-1-i.log(O[U]);if(G<0)throw new nt("Bad error location");e[G]=_e.addOrSubtract(e[G],M[U])}}runEuclideanAlgorithm(e,n,i){if(e.getDegree()<n.getDegree()){const U=e;e=n,n=U}const l=this.field;let c=e,u=n,h=l.getZero(),m=l.getOne();for(;u.getDegree()>=(i/2|0);){let U=c,G=h;if(c=u,h=m,c.isZero())throw new nt("r_{i-1} was zero");u=U;let K=l.getZero();const J=c.getCoefficient(c.getDegree()),oe=l.inverse(J);for(;u.getDegree()>=c.getDegree()&&!u.isZero();){const Ee=u.getDegree()-c.getDegree(),be=l.multiply(u.getCoefficient(u.getDegree()),oe);K=K.addOrSubtract(l.buildMonomial(Ee,be)),u=u.addOrSubtract(c.multiplyByMonomial(Ee,be))}if(m=K.multiply(h).addOrSubtract(G),u.getDegree()>=c.getDegree())throw new Pt("Division algorithm failed to reduce polynomial?")}const v=m.getCoefficient(0);if(v===0)throw new nt("sigmaTilde(0) was zero");const N=l.inverse(v),O=m.multiplyScalar(N),M=u.multiplyScalar(N);return[O,M]}findErrorLocations(e){const n=e.getDegree();if(n===1)return Int32Array.from([e.getCoefficient(1)]);const i=new Int32Array(n);let l=0;const c=this.field;for(let u=1;u<c.getSize()&&l<n;u++)e.evaluateAt(u)===0&&(i[l]=c.inverse(u),l++);if(l!==n)throw new nt("Error locator degree does not match number of roots");return i}findErrorMagnitudes(e,n){const i=n.length,l=new Int32Array(i),c=this.field;for(let u=0;u<i;u++){const h=c.inverse(n[u]);let m=1;for(let v=0;v<i;v++)if(u!==v){const N=c.multiply(n[v],h),O=N&1?N&-2:N|1;m=c.multiply(m,O)}l[u]=c.multiply(e.evaluateAt(h),c.inverse(m)),c.getGeneratorBase()!==0&&(l[u]=c.multiply(l[u],h))}return l}}var St;(function(k){k[k.UPPER=0]="UPPER",k[k.LOWER=1]="LOWER",k[k.MIXED=2]="MIXED",k[k.DIGIT=3]="DIGIT",k[k.PUNCT=4]="PUNCT",k[k.BINARY=5]="BINARY"})(St||(St={}));class vt{decode(e){this.ddata=e;let n=e.getBits(),i=this.extractBits(n),l=this.correctBits(i),c=vt.convertBoolArrayToByteArray(l),u=vt.getEncodedData(l),h=new tt(c,u,null,null);return h.setNumBits(l.length),h}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let n=e.length,i=St.UPPER,l=St.UPPER,c="",u=0;for(;u<n;)if(l===St.BINARY){if(n-u<5)break;let h=vt.readCode(e,u,5);if(u+=5,h===0){if(n-u<11)break;h=vt.readCode(e,u,11)+31,u+=11}for(let m=0;m<h;m++){if(n-u<8){u=n;break}const v=vt.readCode(e,u,8);c+=ke.castAsNonUtf8Char(v),u+=8}l=i}else{let h=l===St.DIGIT?4:5;if(n-u<h)break;let m=vt.readCode(e,u,h);u+=h;let v=vt.getCharacter(l,m);v.startsWith("CTRL_")?(i=l,l=vt.getTable(v.charAt(5)),v.charAt(6)==="L"&&(i=l)):(c+=v,l=i)}return c}static getTable(e){switch(e){case"L":return St.LOWER;case"P":return St.PUNCT;case"M":return St.MIXED;case"D":return St.DIGIT;case"B":return St.BINARY;case"U":default:return St.UPPER}}static getCharacter(e,n){switch(e){case St.UPPER:return vt.UPPER_TABLE[n];case St.LOWER:return vt.LOWER_TABLE[n];case St.MIXED:return vt.MIXED_TABLE[n];case St.PUNCT:return vt.PUNCT_TABLE[n];case St.DIGIT:return vt.DIGIT_TABLE[n];default:throw new Pt("Bad table")}}correctBits(e){let n,i;this.ddata.getNbLayers()<=2?(i=6,n=_e.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(i=8,n=_e.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(i=10,n=_e.AZTEC_DATA_10):(i=12,n=_e.AZTEC_DATA_12);let l=this.ddata.getNbDatablocks(),c=e.length/i;if(c<l)throw new q;let u=e.length%i,h=new Int32Array(c);for(let M=0;M<c;M++,u+=i)h[M]=vt.readCode(e,u,i);try{new Dt(n).decode(h,c-l)}catch(M){throw new q(M)}let m=(1<<i)-1,v=0;for(let M=0;M<l;M++){let U=h[M];if(U===0||U===m)throw new q;(U===1||U===m-1)&&v++}let N=new Array(l*i-v),O=0;for(let M=0;M<l;M++){let U=h[M];if(U===1||U===m-1)N.fill(U>1,O,O+i-1),O+=i-1;else for(let G=i-1;G>=0;--G)N[O++]=(U&1<<G)!==0}return N}extractBits(e){let n=this.ddata.isCompact(),i=this.ddata.getNbLayers(),l=(n?11:14)+i*4,c=new Int32Array(l),u=new Array(this.totalBitsInLayer(i,n));if(n)for(let h=0;h<c.length;h++)c[h]=h;else{let h=l+1+2*z.truncDivision(z.truncDivision(l,2)-1,15),m=l/2,v=z.truncDivision(h,2);for(let N=0;N<m;N++){let O=N+z.truncDivision(N,15);c[m-N-1]=v-O-1,c[m+N]=v+O+1}}for(let h=0,m=0;h<i;h++){let v=(i-h)*4+(n?9:12),N=h*2,O=l-1-N;for(let M=0;M<v;M++){let U=M*2;for(let G=0;G<2;G++)u[m+U+G]=e.get(c[N+G],c[N+M]),u[m+2*v+U+G]=e.get(c[N+M],c[O-G]),u[m+4*v+U+G]=e.get(c[O-G],c[O-M]),u[m+6*v+U+G]=e.get(c[O-M],c[N+G])}m+=v*8}return u}static readCode(e,n,i){let l=0;for(let c=n;c<n+i;c++)l<<=1,e[c]&&(l|=1);return l}static readByte(e,n){let i=e.length-n;return i>=8?vt.readCode(e,n,8):vt.readCode(e,n,i)<<8-i}static convertBoolArrayToByteArray(e){let n=new Uint8Array((e.length+7)/8);for(let i=0;i<n.length;i++)n[i]=vt.readByte(e,8*i);return n}totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}vt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],vt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],vt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],vt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],vt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class pt{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,n,i,l){const c=e-i,u=n-l;return Math.sqrt(c*c+u*u)}static sum(e){let n=0;for(let i=0,l=e.length;i!==l;i++){const c=e[i];n+=c}return n}}class xn{static floatToIntBits(e){return e}}xn.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Te{constructor(e,n){this.x=e,this.y=n}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof Te){const n=e;return this.x===n.x&&this.y===n.y}return!1}hashCode(){return 31*xn.floatToIntBits(this.x)+xn.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const n=this.distance(e[0],e[1]),i=this.distance(e[1],e[2]),l=this.distance(e[0],e[2]);let c,u,h;if(i>=n&&i>=l?(u=e[0],c=e[1],h=e[2]):l>=i&&l>=n?(u=e[1],c=e[0],h=e[2]):(u=e[2],c=e[0],h=e[1]),this.crossProductZ(c,u,h)<0){const m=c;c=h,h=m}e[0]=c,e[1]=u,e[2]=h}static distance(e,n){return pt.distance(e.x,e.y,n.x,n.y)}static crossProductZ(e,n,i){const l=n.x,c=n.y;return(i.x-l)*(e.y-c)-(i.y-c)*(e.x-l)}}class zn{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class Ct extends zn{constructor(e,n,i,l,c){super(e,n),this.compact=i,this.nbDatablocks=l,this.nbLayers=c}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Ge{constructor(e,n,i,l){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),n==null&&(n=Ge.INIT_SIZE),i==null&&(i=e.getWidth()/2|0),l==null&&(l=e.getHeight()/2|0);const c=n/2|0;if(this.leftInit=i-c,this.rightInit=i+c,this.upInit=l-c,this.downInit=l+c,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ee}detect(){let e=this.leftInit,n=this.rightInit,i=this.upInit,l=this.downInit,c=!1,u=!0,h=!1,m=!1,v=!1,N=!1,O=!1;const M=this.width,U=this.height;for(;u;){u=!1;let G=!0;for(;(G||!m)&&n<M;)G=this.containsBlackPoint(i,l,n,!1),G?(n++,u=!0,m=!0):m||n++;if(n>=M){c=!0;break}let K=!0;for(;(K||!v)&&l<U;)K=this.containsBlackPoint(e,n,l,!0),K?(l++,u=!0,v=!0):v||l++;if(l>=U){c=!0;break}let J=!0;for(;(J||!N)&&e>=0;)J=this.containsBlackPoint(i,l,e,!1),J?(e--,u=!0,N=!0):N||e--;if(e<0){c=!0;break}let oe=!0;for(;(oe||!O)&&i>=0;)oe=this.containsBlackPoint(e,n,i,!0),oe?(i--,u=!0,O=!0):O||i--;if(i<0){c=!0;break}u&&(h=!0)}if(!c&&h){const G=n-e;let K=null;for(let be=1;K===null&&be<G;be++)K=this.getBlackPointOnSegment(e,l-be,e+be,l);if(K==null)throw new ee;let J=null;for(let be=1;J===null&&be<G;be++)J=this.getBlackPointOnSegment(e,i+be,e+be,i);if(J==null)throw new ee;let oe=null;for(let be=1;oe===null&&be<G;be++)oe=this.getBlackPointOnSegment(n,i+be,n-be,i);if(oe==null)throw new ee;let Ee=null;for(let be=1;Ee===null&&be<G;be++)Ee=this.getBlackPointOnSegment(n,l-be,n-be,l);if(Ee==null)throw new ee;return this.centerEdges(Ee,K,oe,J)}else throw new ee}getBlackPointOnSegment(e,n,i,l){const c=pt.round(pt.distance(e,n,i,l)),u=(i-e)/c,h=(l-n)/c,m=this.image;for(let v=0;v<c;v++){const N=pt.round(e+v*u),O=pt.round(n+v*h);if(m.get(N,O))return new Te(N,O)}return null}centerEdges(e,n,i,l){const c=e.getX(),u=e.getY(),h=n.getX(),m=n.getY(),v=i.getX(),N=i.getY(),O=l.getX(),M=l.getY(),U=Ge.CORR;return c<this.width/2?[new Te(O-U,M+U),new Te(h+U,m+U),new Te(v-U,N-U),new Te(c+U,u-U)]:[new Te(O+U,M+U),new Te(h+U,m-U),new Te(v-U,N+U),new Te(c-U,u-U)]}containsBlackPoint(e,n,i,l){const c=this.image;if(l){for(let u=e;u<=n;u++)if(c.get(u,i))return!0}else for(let u=e;u<=n;u++)if(c.get(i,u))return!0;return!1}}Ge.INIT_SIZE=10,Ge.CORR=1;class Je{static checkAndNudgePoints(e,n){const i=e.getWidth(),l=e.getHeight();let c=!0;for(let u=0;u<n.length&&c;u+=2){const h=Math.floor(n[u]),m=Math.floor(n[u+1]);if(h<-1||h>i||m<-1||m>l)throw new ee;c=!1,h===-1?(n[u]=0,c=!0):h===i&&(n[u]=i-1,c=!0),m===-1?(n[u+1]=0,c=!0):m===l&&(n[u+1]=l-1,c=!0)}c=!0;for(let u=n.length-2;u>=0&&c;u-=2){const h=Math.floor(n[u]),m=Math.floor(n[u+1]);if(h<-1||h>i||m<-1||m>l)throw new ee;c=!1,h===-1?(n[u]=0,c=!0):h===i&&(n[u]=i-1,c=!0),m===-1?(n[u+1]=0,c=!0):m===l&&(n[u+1]=l-1,c=!0)}}}class gt{constructor(e,n,i,l,c,u,h,m,v){this.a11=e,this.a21=n,this.a31=i,this.a12=l,this.a22=c,this.a32=u,this.a13=h,this.a23=m,this.a33=v}static quadrilateralToQuadrilateral(e,n,i,l,c,u,h,m,v,N,O,M,U,G,K,J){const oe=gt.quadrilateralToSquare(e,n,i,l,c,u,h,m);return gt.squareToQuadrilateral(v,N,O,M,U,G,K,J).times(oe)}transformPoints(e){const n=e.length,i=this.a11,l=this.a12,c=this.a13,u=this.a21,h=this.a22,m=this.a23,v=this.a31,N=this.a32,O=this.a33;for(let M=0;M<n;M+=2){const U=e[M],G=e[M+1],K=c*U+m*G+O;e[M]=(i*U+u*G+v)/K,e[M+1]=(l*U+h*G+N)/K}}transformPointsWithValues(e,n){const i=this.a11,l=this.a12,c=this.a13,u=this.a21,h=this.a22,m=this.a23,v=this.a31,N=this.a32,O=this.a33,M=e.length;for(let U=0;U<M;U++){const G=e[U],K=n[U],J=c*G+m*K+O;e[U]=(i*G+u*K+v)/J,n[U]=(l*G+h*K+N)/J}}static squareToQuadrilateral(e,n,i,l,c,u,h,m){const v=e-i+c-h,N=n-l+u-m;if(v===0&&N===0)return new gt(i-e,c-i,e,l-n,u-l,n,0,0,1);{const O=i-c,M=h-c,U=l-u,G=m-u,K=O*G-M*U,J=(v*G-M*N)/K,oe=(O*N-v*U)/K;return new gt(i-e+J*i,h-e+oe*h,e,l-n+J*l,m-n+oe*m,n,J,oe,1)}}static quadrilateralToSquare(e,n,i,l,c,u,h,m){return gt.squareToQuadrilateral(e,n,i,l,c,u,h,m).buildAdjoint()}buildAdjoint(){return new gt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new gt(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class Ut extends Je{sampleGrid(e,n,i,l,c,u,h,m,v,N,O,M,U,G,K,J,oe,Ee,be){const we=gt.quadrilateralToQuadrilateral(l,c,u,h,m,v,N,O,M,U,G,K,J,oe,Ee,be);return this.sampleGridWithTransform(e,n,i,we)}sampleGridWithTransform(e,n,i,l){if(n<=0||i<=0)throw new ee;const c=new Ve(n,i),u=new Float32Array(2*n);for(let h=0;h<i;h++){const m=u.length,v=h+.5;for(let N=0;N<m;N+=2)u[N]=N/2+.5,u[N+1]=v;l.transformPoints(u),Je.checkAndNudgePoints(e,u);try{for(let N=0;N<m;N+=2)e.get(Math.floor(u[N]),Math.floor(u[N+1]))&&c.set(N/2,h)}catch{throw new ee}}return c}}class Ot{static setGridSampler(e){Ot.gridSampler=e}static getInstance(){return Ot.gridSampler}}Ot.gridSampler=new Ut;class At{constructor(e,n){this.x=e,this.y=n}toResultPoint(){return new Te(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class nn{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let n=this.getMatrixCenter(),i=this.getBullsEyeCorners(n);if(e){let u=i[0];i[0]=i[2],i[2]=u}this.extractParameters(i);let l=this.sampleGrid(this.image,i[this.shift%4],i[(this.shift+1)%4],i[(this.shift+2)%4],i[(this.shift+3)%4]),c=this.getMatrixCornerPoints(i);return new Ct(l,c,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new ee;let n=2*this.nbCenterLayers,i=new Int32Array([this.sampleLine(e[0],e[1],n),this.sampleLine(e[1],e[2],n),this.sampleLine(e[2],e[3],n),this.sampleLine(e[3],e[0],n)]);this.shift=this.getRotation(i,n);let l=0;for(let u=0;u<4;u++){let h=i[(this.shift+u)%4];this.compact?(l<<=7,l+=h>>1&127):(l<<=10,l+=(h>>2&992)+(h>>1&31))}let c=this.getCorrectedParameterData(l,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)}getRotation(e,n){let i=0;e.forEach((l,c,u)=>{let h=(l>>n-2<<1)+(l&1);i=(i<<3)+h}),i=((i&1)<<11)+(i>>1);for(let l=0;l<4;l++)if(z.bitCount(i^this.EXPECTED_CORNER_BITS[l])<=2)return l;throw new ee}getCorrectedParameterData(e,n){let i,l;n?(i=7,l=2):(i=10,l=4);let c=i-l,u=new Int32Array(i);for(let m=i-1;m>=0;--m)u[m]=e&15,e>>=4;try{new Dt(_e.AZTEC_PARAM).decode(u,c)}catch{throw new ee}let h=0;for(let m=0;m<l;m++)h=(h<<4)+u[m];return h}getBullsEyeCorners(e){let n=e,i=e,l=e,c=e,u=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let O=this.getFirstDifferent(n,u,1,-1),M=this.getFirstDifferent(i,u,1,1),U=this.getFirstDifferent(l,u,-1,1),G=this.getFirstDifferent(c,u,-1,-1);if(this.nbCenterLayers>2){let K=this.distancePoint(G,O)*this.nbCenterLayers/(this.distancePoint(c,n)*(this.nbCenterLayers+2));if(K<.75||K>1.25||!this.isWhiteOrBlackRectangle(O,M,U,G))break}n=O,i=M,l=U,c=G,u=!u}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ee;this.compact=this.nbCenterLayers===5;let h=new Te(n.getX()+.5,n.getY()-.5),m=new Te(i.getX()+.5,i.getY()+.5),v=new Te(l.getX()-.5,l.getY()+.5),N=new Te(c.getX()-.5,c.getY()-.5);return this.expandSquare([h,m,v,N],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,n,i,l;try{let h=new Ge(this.image).detect();e=h[0],n=h[1],i=h[2],l=h[3]}catch{let m=this.image.getWidth()/2,v=this.image.getHeight()/2;e=this.getFirstDifferent(new At(m+7,v-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new At(m+7,v+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new At(m-7,v+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new At(m-7,v-7),!1,-1,-1).toResultPoint()}let c=pt.round((e.getX()+l.getX()+n.getX()+i.getX())/4),u=pt.round((e.getY()+l.getY()+n.getY()+i.getY())/4);try{let h=new Ge(this.image,15,c,u).detect();e=h[0],n=h[1],i=h[2],l=h[3]}catch{e=this.getFirstDifferent(new At(c+7,u-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new At(c+7,u+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new At(c-7,u+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new At(c-7,u-7),!1,-1,-1).toResultPoint()}return c=pt.round((e.getX()+l.getX()+n.getX()+i.getX())/4),u=pt.round((e.getY()+l.getY()+n.getY()+i.getY())/4),new At(c,u)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,n,i,l,c){let u=Ot.getInstance(),h=this.getDimension(),m=h/2-this.nbCenterLayers,v=h/2+this.nbCenterLayers;return u.sampleGrid(e,h,h,m,m,v,m,v,v,m,v,n.getX(),n.getY(),i.getX(),i.getY(),l.getX(),l.getY(),c.getX(),c.getY())}sampleLine(e,n,i){let l=0,c=this.distanceResultPoint(e,n),u=c/i,h=e.getX(),m=e.getY(),v=u*(n.getX()-e.getX())/c,N=u*(n.getY()-e.getY())/c;for(let O=0;O<i;O++)this.image.get(pt.round(h+O*v),pt.round(m+O*N))&&(l|=1<<i-O-1);return l}isWhiteOrBlackRectangle(e,n,i,l){let c=3;e=new At(e.getX()-c,e.getY()+c),n=new At(n.getX()-c,n.getY()-c),i=new At(i.getX()+c,i.getY()-c),l=new At(l.getX()+c,l.getY()+c);let u=this.getColor(l,e);if(u===0)return!1;let h=this.getColor(e,n);return h!==u||(h=this.getColor(n,i),h!==u)?!1:(h=this.getColor(i,l),h===u)}getColor(e,n){let i=this.distancePoint(e,n),l=(n.getX()-e.getX())/i,c=(n.getY()-e.getY())/i,u=0,h=e.getX(),m=e.getY(),v=this.image.get(e.getX(),e.getY()),N=Math.ceil(i);for(let M=0;M<N;M++)h+=l,m+=c,this.image.get(pt.round(h),pt.round(m))!==v&&u++;let O=u/i;return O>.1&&O<.9?0:O<=.1===v?1:-1}getFirstDifferent(e,n,i,l){let c=e.getX()+i,u=e.getY()+l;for(;this.isValid(c,u)&&this.image.get(c,u)===n;)c+=i,u+=l;for(c-=i,u-=l;this.isValid(c,u)&&this.image.get(c,u)===n;)c+=i;for(c-=i;this.isValid(c,u)&&this.image.get(c,u)===n;)u+=l;return u-=l,new At(c,u)}expandSquare(e,n,i){let l=i/(2*n),c=e[0].getX()-e[2].getX(),u=e[0].getY()-e[2].getY(),h=(e[0].getX()+e[2].getX())/2,m=(e[0].getY()+e[2].getY())/2,v=new Te(h+l*c,m+l*u),N=new Te(h-l*c,m-l*u);c=e[1].getX()-e[3].getX(),u=e[1].getY()-e[3].getY(),h=(e[1].getX()+e[3].getX())/2,m=(e[1].getY()+e[3].getY())/2;let O=new Te(h+l*c,m+l*u),M=new Te(h-l*c,m-l*u);return[v,O,N,M]}isValid(e,n){return e>=0&&e<this.image.getWidth()&&n>0&&n<this.image.getHeight()}isValidPoint(e){let n=pt.round(e.getX()),i=pt.round(e.getY());return this.isValid(n,i)}distancePoint(e,n){return pt.distance(e.getX(),e.getY(),n.getX(),n.getY())}distanceResultPoint(e,n){return pt.distance(e.getX(),e.getY(),n.getX(),n.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(z.truncDivision(this.nbLayers-4,8)+1)+15}}class Ht{decode(e,n=null){let i=null,l=new nn(e.getBlackMatrix()),c=null,u=null;try{let N=l.detectMirror(!1);c=N.getPoints(),this.reportFoundResultPoints(n,c),u=new vt().decode(N)}catch(N){i=N}if(u==null)try{let N=l.detectMirror(!0);c=N.getPoints(),this.reportFoundResultPoints(n,c),u=new vt().decode(N)}catch(N){throw i??N}let h=new ze(u.getText(),u.getRawBytes(),u.getNumBits(),c,de.AZTEC,B.currentTimeMillis()),m=u.getByteSegments();m!=null&&h.putMetadata(Fe.BYTE_SEGMENTS,m);let v=u.getECLevel();return v!=null&&h.putMetadata(Fe.ERROR_CORRECTION_LEVEL,v),h}reportFoundResultPoints(e,n){if(e!=null){let i=e.get(ue.NEED_RESULT_POINT_CALLBACK);i!=null&&n.forEach((l,c,u)=>{i.foundPossibleResultPoint(l)})}}reset(){}}class un extends Ae{constructor(e=500){super(new Ht,e)}}class De{decode(e,n){try{return this.doDecode(e,n)}catch{if(n&&n.get(ue.TRY_HARDER)===!0&&e.isRotateSupported()){const c=e.rotateCounterClockwise(),u=this.doDecode(c,n),h=u.getResultMetadata();let m=270;h!==null&&h.get(Fe.ORIENTATION)===!0&&(m=m+h.get(Fe.ORIENTATION)%360),u.putMetadata(Fe.ORIENTATION,m);const v=u.getResultPoints();if(v!==null){const N=c.getHeight();for(let O=0;O<v.length;O++)v[O]=new Te(N-v[O].getY()-1,v[O].getX())}return u}else throw new ee}}reset(){}doDecode(e,n){const i=e.getWidth(),l=e.getHeight();let c=new Q(i);const u=n&&n.get(ue.TRY_HARDER)===!0,h=Math.max(1,l>>(u?8:5));let m;u?m=l:m=15;const v=Math.trunc(l/2);for(let N=0;N<m;N++){const O=Math.trunc((N+1)/2),M=(N&1)===0,U=v+h*(M?O:-O);if(U<0||U>=l)break;try{c=e.getBlackRow(U,c)}catch{continue}for(let G=0;G<2;G++){if(G===1&&(c.reverse(),n&&n.get(ue.NEED_RESULT_POINT_CALLBACK)===!0)){const K=new Map;n.forEach((J,oe)=>K.set(oe,J)),K.delete(ue.NEED_RESULT_POINT_CALLBACK),n=K}try{const K=this.decodeRow(U,c,n);if(G===1){K.putMetadata(Fe.ORIENTATION,180);const J=K.getResultPoints();J!==null&&(J[0]=new Te(i-J[0].getX()-1,J[0].getY()),J[1]=new Te(i-J[1].getX()-1,J[1].getY()))}return K}catch{}}}throw new ee}static recordPattern(e,n,i){const l=i.length;for(let v=0;v<l;v++)i[v]=0;const c=e.getSize();if(n>=c)throw new ee;let u=!e.get(n),h=0,m=n;for(;m<c;){if(e.get(m)!==u)i[h]++;else{if(++h===l)break;i[h]=1,u=!u}m++}if(!(h===l||h===l-1&&m===c))throw new ee}static recordPatternInReverse(e,n,i){let l=i.length,c=e.get(n);for(;n>0&&l>=0;)e.get(--n)!==c&&(l--,c=!c);if(l>=0)throw new ee;De.recordPattern(e,n+1,i)}static patternMatchVariance(e,n,i){const l=e.length;let c=0,u=0;for(let v=0;v<l;v++)c+=e[v],u+=n[v];if(c<u)return Number.POSITIVE_INFINITY;const h=c/u;i*=h;let m=0;for(let v=0;v<l;v++){const N=e[v],O=n[v]*h,M=N>O?N-O:O-N;if(M>i)return Number.POSITIVE_INFINITY;m+=M}return m/c}}class he extends De{static findStartPattern(e){const n=e.getSize(),i=e.getNextSet(0);let l=0,c=Int32Array.from([0,0,0,0,0,0]),u=i,h=!1;const m=6;for(let v=i;v<n;v++)if(e.get(v)!==h)c[l]++;else{if(l===m-1){let N=he.MAX_AVG_VARIANCE,O=-1;for(let M=he.CODE_START_A;M<=he.CODE_START_C;M++){const U=De.patternMatchVariance(c,he.CODE_PATTERNS[M],he.MAX_INDIVIDUAL_VARIANCE);U<N&&(N=U,O=M)}if(O>=0&&e.isRange(Math.max(0,u-(v-u)/2),u,!1))return Int32Array.from([u,v,O]);u+=c[0]+c[1],c=c.slice(2,c.length-1),c[l-1]=0,c[l]=0,l--}else l++;c[l]=1,h=!h}throw new ee}static decodeCode(e,n,i){De.recordPattern(e,i,n);let l=he.MAX_AVG_VARIANCE,c=-1;for(let u=0;u<he.CODE_PATTERNS.length;u++){const h=he.CODE_PATTERNS[u],m=this.patternMatchVariance(n,h,he.MAX_INDIVIDUAL_VARIANCE);m<l&&(l=m,c=u)}if(c>=0)return c;throw new ee}decodeRow(e,n,i){const l=i&&i.get(ue.ASSUME_GS1)===!0,c=he.findStartPattern(n),u=c[2];let h=0;const m=new Uint8Array(20);m[h++]=u;let v;switch(u){case he.CODE_START_A:v=he.CODE_CODE_A;break;case he.CODE_START_B:v=he.CODE_CODE_B;break;case he.CODE_START_C:v=he.CODE_CODE_C;break;default:throw new q}let N=!1,O=!1,M="",U=c[0],G=c[1];const K=Int32Array.from([0,0,0,0,0,0]);let J=0,oe=0,Ee=u,be=0,we=!0,bt=!1,ht=!1;for(;!N;){const Qr=O;switch(O=!1,J=oe,oe=he.decodeCode(n,K,G),m[h++]=oe,oe!==he.CODE_STOP&&(we=!0),oe!==he.CODE_STOP&&(be++,Ee+=be*oe),U=G,G+=K.reduce((ts,na)=>ts+na,0),oe){case he.CODE_START_A:case he.CODE_START_B:case he.CODE_START_C:throw new q}switch(v){case he.CODE_CODE_A:if(oe<64)ht===bt?M+=String.fromCharCode(32+oe):M+=String.fromCharCode(32+oe+128),ht=!1;else if(oe<96)ht===bt?M+=String.fromCharCode(oe-64):M+=String.fromCharCode(oe+64),ht=!1;else switch(oe!==he.CODE_STOP&&(we=!1),oe){case he.CODE_FNC_1:l&&(M.length===0?M+="]C1":M+="");break;case he.CODE_FNC_2:case he.CODE_FNC_3:break;case he.CODE_FNC_4_A:!bt&&ht?(bt=!0,ht=!1):bt&&ht?(bt=!1,ht=!1):ht=!0;break;case he.CODE_SHIFT:O=!0,v=he.CODE_CODE_B;break;case he.CODE_CODE_B:v=he.CODE_CODE_B;break;case he.CODE_CODE_C:v=he.CODE_CODE_C;break;case he.CODE_STOP:N=!0;break}break;case he.CODE_CODE_B:if(oe<96)ht===bt?M+=String.fromCharCode(32+oe):M+=String.fromCharCode(32+oe+128),ht=!1;else switch(oe!==he.CODE_STOP&&(we=!1),oe){case he.CODE_FNC_1:l&&(M.length===0?M+="]C1":M+="");break;case he.CODE_FNC_2:case he.CODE_FNC_3:break;case he.CODE_FNC_4_B:!bt&&ht?(bt=!0,ht=!1):bt&&ht?(bt=!1,ht=!1):ht=!0;break;case he.CODE_SHIFT:O=!0,v=he.CODE_CODE_A;break;case he.CODE_CODE_A:v=he.CODE_CODE_A;break;case he.CODE_CODE_C:v=he.CODE_CODE_C;break;case he.CODE_STOP:N=!0;break}break;case he.CODE_CODE_C:if(oe<100)oe<10&&(M+="0"),M+=oe;else switch(oe!==he.CODE_STOP&&(we=!1),oe){case he.CODE_FNC_1:l&&(M.length===0?M+="]C1":M+="");break;case he.CODE_CODE_A:v=he.CODE_CODE_A;break;case he.CODE_CODE_B:v=he.CODE_CODE_B;break;case he.CODE_STOP:N=!0;break}break}Qr&&(v=v===he.CODE_CODE_A?he.CODE_CODE_B:he.CODE_CODE_A)}const tr=G-U;if(G=n.getNextUnset(G),!n.isRange(G,Math.min(n.getSize(),G+(G-U)/2),!1))throw new ee;if(Ee-=be*J,Ee%103!==J)throw new D;const Nr=M.length;if(Nr===0)throw new ee;Nr>0&&we&&(v===he.CODE_CODE_C?M=M.substring(0,Nr-2):M=M.substring(0,Nr-1));const vn=(c[1]+c[0])/2,Vt=U+tr/2,sn=m.length,Xn=new Uint8Array(sn);for(let Qr=0;Qr<sn;Qr++)Xn[Qr]=m[Qr];const Ii=[new Te(vn,e),new Te(Vt,e)];return new ze(M,Xn,0,Ii,de.CODE_128,new Date().getTime())}}he.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],he.MAX_AVG_VARIANCE=.25,he.MAX_INDIVIDUAL_VARIANCE=.7,he.CODE_SHIFT=98,he.CODE_CODE_C=99,he.CODE_CODE_B=100,he.CODE_CODE_A=101,he.CODE_FNC_1=102,he.CODE_FNC_2=97,he.CODE_FNC_3=96,he.CODE_FNC_4_A=101,he.CODE_FNC_4_B=100,he.CODE_START_A=103,he.CODE_START_B=104,he.CODE_START_C=105,he.CODE_STOP=106;class ct extends De{constructor(e=!1,n=!1){super(),this.usingCheckDigit=e,this.extendedMode=n,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,n,i){let l=this.counters;l.fill(0),this.decodeRowResult="";let c=ct.findAsteriskPattern(n,l),u=n.getNextSet(c[1]),h=n.getSize(),m,v;do{ct.recordPattern(n,u,l);let K=ct.toNarrowWidePattern(l);if(K<0)throw new ee;m=ct.patternToChar(K),this.decodeRowResult+=m,v=u;for(let J of l)u+=J;u=n.getNextSet(u)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let N=0;for(let K of l)N+=K;let O=u-v-N;if(u!==h&&O*2<N)throw new ee;if(this.usingCheckDigit){let K=this.decodeRowResult.length-1,J=0;for(let oe=0;oe<K;oe++)J+=ct.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(oe));if(this.decodeRowResult.charAt(K)!==ct.ALPHABET_STRING.charAt(J%43))throw new D;this.decodeRowResult=this.decodeRowResult.substring(0,K)}if(this.decodeRowResult.length===0)throw new ee;let M;this.extendedMode?M=ct.decodeExtended(this.decodeRowResult):M=this.decodeRowResult;let U=(c[1]+c[0])/2,G=v+N/2;return new ze(M,null,0,[new Te(U,e),new Te(G,e)],de.CODE_39,new Date().getTime())}static findAsteriskPattern(e,n){let i=e.getSize(),l=e.getNextSet(0),c=0,u=l,h=!1,m=n.length;for(let v=l;v<i;v++)if(e.get(v)!==h)n[c]++;else{if(c===m-1){if(this.toNarrowWidePattern(n)===ct.ASTERISK_ENCODING&&e.isRange(Math.max(0,u-Math.floor((v-u)/2)),u,!1))return[u,v];u+=n[0]+n[1],n.copyWithin(0,2,2+c-1),n[c-1]=0,n[c]=0,c--}else c++;n[c]=1,h=!h}throw new ee}static toNarrowWidePattern(e){let n=e.length,i=0,l;do{let c=2147483647;for(let m of e)m<c&&m>i&&(c=m);i=c,l=0;let u=0,h=0;for(let m=0;m<n;m++){let v=e[m];v>i&&(h|=1<<n-1-m,l++,u+=v)}if(l===3){for(let m=0;m<n&&l>0;m++){let v=e[m];if(v>i&&(l--,v*2>=u))return-1}return h}}while(l>3);return-1}static patternToChar(e){for(let n=0;n<ct.CHARACTER_ENCODINGS.length;n++)if(ct.CHARACTER_ENCODINGS[n]===e)return ct.ALPHABET_STRING.charAt(n);if(e===ct.ASTERISK_ENCODING)return"*";throw new ee}static decodeExtended(e){let n=e.length,i="";for(let l=0;l<n;l++){let c=e.charAt(l);if(c==="+"||c==="$"||c==="%"||c==="/"){let u=e.charAt(l+1),h="\0";switch(c){case"+":if(u>="A"&&u<="Z")h=String.fromCharCode(u.charCodeAt(0)+32);else throw new q;break;case"$":if(u>="A"&&u<="Z")h=String.fromCharCode(u.charCodeAt(0)-64);else throw new q;break;case"%":if(u>="A"&&u<="E")h=String.fromCharCode(u.charCodeAt(0)-38);else if(u>="F"&&u<="J")h=String.fromCharCode(u.charCodeAt(0)-11);else if(u>="K"&&u<="O")h=String.fromCharCode(u.charCodeAt(0)+16);else if(u>="P"&&u<="T")h=String.fromCharCode(u.charCodeAt(0)+43);else if(u==="U")h="\0";else if(u==="V")h="@";else if(u==="W")h="`";else if(u==="X"||u==="Y"||u==="Z")h="";else throw new q;break;case"/":if(u>="A"&&u<="O")h=String.fromCharCode(u.charCodeAt(0)-32);else if(u==="Z")h=":";else throw new q;break}i+=h,l++}else i+=c}return i}}ct.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",ct.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],ct.ASTERISK_ENCODING=148;class st extends De{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,n,i){let l=this.decodeStart(n),c=this.decodeEnd(n),u=new Re;st.decodeMiddle(n,l[1],c[0],u);let h=u.toString(),m=null;i!=null&&(m=i.get(ue.ALLOWED_LENGTHS)),m==null&&(m=st.DEFAULT_ALLOWED_LENGTHS);let v=h.length,N=!1,O=0;for(let G of m){if(v===G){N=!0;break}G>O&&(O=G)}if(!N&&v>O&&(N=!0),!N)throw new q;const M=[new Te(l[1],e),new Te(c[0],e)];return new ze(h,null,0,M,de.ITF,new Date().getTime())}static decodeMiddle(e,n,i,l){let c=new Int32Array(10),u=new Int32Array(5),h=new Int32Array(5);for(c.fill(0),u.fill(0),h.fill(0);n<i;){De.recordPattern(e,n,c);for(let v=0;v<5;v++){let N=2*v;u[v]=c[N],h[v]=c[N+1]}let m=st.decodeDigit(u);l.append(m.toString()),m=this.decodeDigit(h),l.append(m.toString()),c.forEach(function(v){n+=v})}}decodeStart(e){let n=st.skipWhiteSpace(e),i=st.findGuardPattern(e,n,st.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(e,i[0]),i}validateQuietZone(e,n){let i=this.narrowLineWidth*10;i=i<n?i:n;for(let l=n-1;i>0&&l>=0&&!e.get(l);l--)i--;if(i!==0)throw new ee}static skipWhiteSpace(e){const n=e.getSize(),i=e.getNextSet(0);if(i===n)throw new ee;return i}decodeEnd(e){e.reverse();try{let n=st.skipWhiteSpace(e),i;try{i=st.findGuardPattern(e,n,st.END_PATTERN_REVERSED[0])}catch(c){c instanceof ee&&(i=st.findGuardPattern(e,n,st.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,i[0]);let l=i[0];return i[0]=e.getSize()-i[1],i[1]=e.getSize()-l,i}finally{e.reverse()}}static findGuardPattern(e,n,i){let l=i.length,c=new Int32Array(l),u=e.getSize(),h=!1,m=0,v=n;c.fill(0);for(let N=n;N<u;N++)if(e.get(N)!==h)c[m]++;else{if(m===l-1){if(De.patternMatchVariance(c,i,st.MAX_INDIVIDUAL_VARIANCE)<st.MAX_AVG_VARIANCE)return[v,N];v+=c[0]+c[1],B.arraycopy(c,2,c,0,m-1),c[m-1]=0,c[m]=0,m--}else m++;c[m]=1,h=!h}throw new ee}static decodeDigit(e){let n=st.MAX_AVG_VARIANCE,i=-1,l=st.PATTERNS.length;for(let c=0;c<l;c++){let u=st.PATTERNS[c],h=De.patternMatchVariance(e,u,st.MAX_INDIVIDUAL_VARIANCE);h<n?(n=h,i=c):h===n&&(i=-1)}if(i>=0)return i%10;throw new ee}}st.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],st.MAX_AVG_VARIANCE=.38,st.MAX_INDIVIDUAL_VARIANCE=.5,st.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],st.START_PATTERN=Int32Array.from([1,1,1,1]),st.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Rt extends De{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let n=!1,i,l=0,c=Int32Array.from([0,0,0]);for(;!n;){c=Int32Array.from([0,0,0]),i=Rt.findGuardPattern(e,l,!1,this.START_END_PATTERN,c);let u=i[0];l=i[1];let h=u-(l-u);h>=0&&(n=e.isRange(h,u,!1))}return i}static checkChecksum(e){return Rt.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let i=parseInt(e.charAt(n-1),10);return Rt.getStandardUPCEANChecksum(e.substring(0,n-1))===i}static getStandardUPCEANChecksum(e){let n=e.length,i=0;for(let l=n-1;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;i+=c}i*=3;for(let l=n-2;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;i+=c}return(1e3-i)%10}static decodeEnd(e,n){return Rt.findGuardPattern(e,n,!1,Rt.START_END_PATTERN,new Int32Array(Rt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,n,i,l){return this.findGuardPattern(e,n,i,l,new Int32Array(l.length))}static findGuardPattern(e,n,i,l,c){let u=e.getSize();n=i?e.getNextUnset(n):e.getNextSet(n);let h=0,m=n,v=l.length,N=i;for(let O=n;O<u;O++)if(e.get(O)!==N)c[h]++;else{if(h===v-1){if(De.patternMatchVariance(c,l,Rt.MAX_INDIVIDUAL_VARIANCE)<Rt.MAX_AVG_VARIANCE)return Int32Array.from([m,O]);m+=c[0]+c[1];let M=c.slice(2,c.length-1);for(let U=0;U<h-1;U++)c[U]=M[U];c[h-1]=0,c[h]=0,h--}else h++;c[h]=1,N=!N}throw new ee}static decodeDigit(e,n,i,l){this.recordPattern(e,i,n);let c=this.MAX_AVG_VARIANCE,u=-1,h=l.length;for(let m=0;m<h;m++){let v=l[m],N=De.patternMatchVariance(n,v,Rt.MAX_INDIVIDUAL_VARIANCE);N<c&&(c=N,u=m)}if(u>=0)return u;throw new ee}}Rt.MAX_AVG_VARIANCE=.48,Rt.MAX_INDIVIDUAL_VARIANCE=.7,Rt.START_END_PATTERN=Int32Array.from([1,1,1]),Rt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Rt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Rt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Mn{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,i){let l=this.decodeRowStringBuffer,c=this.decodeMiddle(n,i,l),u=l.toString(),h=Mn.parseExtensionString(u),m=[new Te((i[0]+i[1])/2,e),new Te(c,e)],v=new ze(u,null,0,m,de.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&v.putAllMetadata(h),v}decodeMiddle(e,n,i){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u=n[1],h=0;for(let v=0;v<5&&u<c;v++){let N=Rt.decodeDigit(e,l,u,Rt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+N%10);for(let O of l)u+=O;N>=10&&(h|=1<<4-v),v!==4&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(i.length!==5)throw new ee;let m=this.determineCheckDigit(h);if(Mn.extensionChecksum(i.toString())!==m)throw new ee;return u}static extensionChecksum(e){let n=e.length,i=0;for(let l=n-2;l>=0;l-=2)i+=e.charAt(l).charCodeAt(0)-48;i*=3;for(let l=n-1;l>=0;l-=2)i+=e.charAt(l).charCodeAt(0)-48;return i*=3,i%10}determineCheckDigit(e){for(let n=0;n<10;n++)if(e===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new ee}static parseExtensionString(e){if(e.length!==5)return null;let n=Mn.parseExtension5String(e);return n==null?null:new Map([[Fe.SUGGESTED_PRICE,n]])}static parseExtension5String(e){let n;switch(e.charAt(0)){case"0":n="";break;case"5":n="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n="";break}let i=parseInt(e.substring(1)),l=(i/100).toString(),c=i%100,u=c<10?"0"+c:c.toString();return n+l+"."+u}}class Pr{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,i){let l=this.decodeRowStringBuffer,c=this.decodeMiddle(n,i,l),u=l.toString(),h=Pr.parseExtensionString(u),m=[new Te((i[0]+i[1])/2,e),new Te(c,e)],v=new ze(u,null,0,m,de.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&v.putAllMetadata(h),v}decodeMiddle(e,n,i){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u=n[1],h=0;for(let m=0;m<2&&u<c;m++){let v=Rt.decodeDigit(e,l,u,Rt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+v%10);for(let N of l)u+=N;v>=10&&(h|=1<<1-m),m!==1&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(i.length!==2)throw new ee;if(parseInt(i.toString())%4!==h)throw new ee;return u}static parseExtensionString(e){return e.length!==2?null:new Map([[Fe.ISSUE_NUMBER,parseInt(e)]])}}class Un{static decodeRow(e,n,i){let l=Rt.findGuardPattern(n,i,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Mn().decodeRow(e,n,l)}catch{return new Pr().decodeRow(e,n,l)}}}Un.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class lt extends Rt{constructor(){super(),this.decodeRowStringBuffer="",lt.L_AND_G_PATTERNS=lt.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let n=lt.L_PATTERNS[e-10],i=new Int32Array(n.length);for(let l=0;l<n.length;l++)i[l]=n[n.length-l-1];lt.L_AND_G_PATTERNS[e]=i}}decodeRow(e,n,i){let l=lt.findStartGuardPattern(n),c=i==null?null:i.get(ue.NEED_RESULT_POINT_CALLBACK);if(c!=null){const we=new Te((l[0]+l[1])/2,e);c.foundPossibleResultPoint(we)}let u=this.decodeMiddle(n,l,this.decodeRowStringBuffer),h=u.rowOffset,m=u.resultString;if(c!=null){const we=new Te(h,e);c.foundPossibleResultPoint(we)}let v=this.decodeEnd(n,h);if(c!=null){const we=new Te((v[0]+v[1])/2,e);c.foundPossibleResultPoint(we)}let N=v[1],O=N+(N-v[0]);if(O>=n.getSize()||!n.isRange(N,O,!1))throw new ee;let M=m.toString();if(M.length<8)throw new q;if(!lt.checkChecksum(M))throw new D;let U=(l[1]+l[0])/2,G=(v[1]+v[0])/2,K=this.getBarcodeFormat(),J=[new Te(U,e),new Te(G,e)],oe=new ze(M,null,0,J,K,new Date().getTime()),Ee=0;try{let we=Un.decodeRow(e,n,v[1]);oe.putMetadata(Fe.UPC_EAN_EXTENSION,we.getText()),oe.putAllMetadata(we.getResultMetadata()),oe.addResultPoints(we.getResultPoints()),Ee=we.getText().length}catch{}let be=i==null?null:i.get(ue.ALLOWED_EAN_EXTENSIONS);if(be!=null){let we=!1;for(let bt in be)if(Ee.toString()===bt){we=!0;break}if(!we)throw new ee}return oe}decodeEnd(e,n){return lt.findGuardPattern(e,n,!1,lt.START_END_PATTERN,new Int32Array(lt.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return lt.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let i=parseInt(e.charAt(n-1),10);return lt.getStandardUPCEANChecksum(e.substring(0,n-1))===i}static getStandardUPCEANChecksum(e){let n=e.length,i=0;for(let l=n-1;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;i+=c}i*=3;for(let l=n-2;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;i+=c}return(1e3-i)%10}}class Dn extends lt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,i){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u=n[1],h=0;for(let v=0;v<6&&u<c;v++){let N=lt.decodeDigit(e,l,u,lt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+N%10);for(let O of l)u+=O;N>=10&&(h|=1<<5-v)}i=Dn.determineFirstDigit(i,h),u=lt.findGuardPattern(e,u,!0,lt.MIDDLE_PATTERN,new Int32Array(lt.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<6&&u<c;v++){let N=lt.decodeDigit(e,l,u,lt.L_PATTERNS);i+=String.fromCharCode(48+N);for(let O of l)u+=O}return{rowOffset:u,resultString:i}}getBarcodeFormat(){return de.EAN_13}static determineFirstDigit(e,n){for(let i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return e=String.fromCharCode(48+i)+e,e;throw new ee}}Dn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class As extends lt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,i){const l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u=n[1];for(let m=0;m<4&&u<c;m++){let v=lt.decodeDigit(e,l,u,lt.L_PATTERNS);i+=String.fromCharCode(48+v);for(let N of l)u+=N}u=lt.findGuardPattern(e,u,!0,lt.MIDDLE_PATTERN,new Int32Array(lt.MIDDLE_PATTERN.length).fill(0))[1];for(let m=0;m<4&&u<c;m++){let v=lt.decodeDigit(e,l,u,lt.L_PATTERNS);i+=String.fromCharCode(48+v);for(let N of l)u+=N}return{rowOffset:u,resultString:i}}getBarcodeFormat(){return de.EAN_8}}class Ui extends lt{constructor(){super(...arguments),this.ean13Reader=new Dn}getBarcodeFormat(){return de.UPC_A}decode(e,n){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,n,i))}decodeMiddle(e,n,i){return this.ean13Reader.decodeMiddle(e,n,i)}maybeReturnResult(e){let n=e.getText();if(n.charAt(0)==="0"){let i=new ze(n.substring(1),null,null,e.getResultPoints(),de.UPC_A);return e.getResultMetadata()!=null&&i.putAllMetadata(e.getResultMetadata()),i}else throw new ee}reset(){this.ean13Reader.reset()}}class qn extends lt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,n,i){const l=this.decodeMiddleCounters.map(v=>v);l[0]=0,l[1]=0,l[2]=0,l[3]=0;const c=e.getSize();let u=n[1],h=0;for(let v=0;v<6&&u<c;v++){const N=qn.decodeDigit(e,l,u,qn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+N%10);for(let O of l)u+=O;N>=10&&(h|=1<<5-v)}let m=qn.determineNumSysAndCheckDigit(i,h);return{rowOffset:u,resultString:m}}decodeEnd(e,n){return qn.findGuardPatternWithoutCounters(e,n,!0,qn.MIDDLE_END_PATTERN)}checkChecksum(e){return lt.checkChecksum(qn.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,n){for(let i=0;i<=1;i++)for(let l=0;l<10;l++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][l]){let c=String.fromCharCode(48+i),u=String.fromCharCode(48+l);return c+e+u}throw ee.getNotFoundInstance()}getBarcodeFormat(){return de.UPC_E}static convertUPCEtoUPCA(e){const n=e.slice(1,7).split("").map(c=>c.charCodeAt(0)),i=new Re;i.append(e.charAt(0));let l=n[5];switch(l){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(l),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(l);break}return e.length>=8&&i.append(e.charAt(7)),i.toString()}}qn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),qn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Wi extends De{constructor(e){super();let n=e==null?null:e.get(ue.POSSIBLE_FORMATS),i=[];d(n)?(i.push(new Dn),i.push(new Ui),i.push(new As),i.push(new qn)):(n.indexOf(de.EAN_13)>-1&&i.push(new Dn),n.indexOf(de.UPC_A)>-1&&i.push(new Ui),n.indexOf(de.EAN_8)>-1&&i.push(new As),n.indexOf(de.UPC_E)>-1&&i.push(new qn)),this.readers=i}decodeRow(e,n,i){for(let l of this.readers)try{const c=l.decodeRow(e,n,i),u=c.getBarcodeFormat()===de.EAN_13&&c.getText().charAt(0)==="0",h=i==null?null:i.get(ue.POSSIBLE_FORMATS),m=h==null||h.includes(de.UPC_A);if(u&&m){const v=c.getRawBytes(),N=new ze(c.getText().substring(1),v,v?v.length:null,c.getResultPoints(),de.UPC_A);return N.putAllMetadata(c.getResultMetadata()),N}return c}catch{}throw new ee}reset(){for(let e of this.readers)e.reset()}}class rn extends De{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,n){for(let i=0;i<n.length;i++)if(De.patternMatchVariance(e,n[i],rn.MAX_INDIVIDUAL_VARIANCE)<rn.MAX_AVG_VARIANCE)return i;throw new ee}static count(e){return pt.sum(new Int32Array(e))}static increment(e,n){let i=0,l=n[0];for(let c=1;c<e.length;c++)n[c]>l&&(l=n[c],i=c);e[i]++}static decrement(e,n){let i=0,l=n[0];for(let c=1;c<e.length;c++)n[c]<l&&(l=n[c],i=c);e[i]--}static isFinderPattern(e){let n=e[0]+e[1],i=n+e[2]+e[3],l=n/i;if(l>=rn.MIN_FINDER_PATTERN_RATIO&&l<=rn.MAX_FINDER_PATTERN_RATIO){let c=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;for(let h of e)h>u&&(u=h),h<c&&(c=h);return u<10*c}return!1}}rn.MAX_AVG_VARIANCE=.2,rn.MAX_INDIVIDUAL_VARIANCE=.45,rn.MIN_FINDER_PATTERN_RATIO=9.5/12,rn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Mr{constructor(e,n){this.value=e,this.checksumPortion=n}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Mr))return!1;const n=e;return this.value===n.value&&this.checksumPortion===n.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class si{constructor(e,n,i,l,c){this.value=e,this.startEnd=n,this.value=e,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new Te(i,c)),this.resultPoints.push(new Te(l,c))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof si))return!1;const n=e;return this.value===n.value}hashCode(){return this.value}}class An{constructor(){}static getRSSvalue(e,n,i){let l=0;for(let m of e)l+=m;let c=0,u=0,h=e.length;for(let m=0;m<h-1;m++){let v;for(v=1,u|=1<<m;v<e[m];v++,u&=~(1<<m)){let N=An.combins(l-v-1,h-m-2);if(i&&u===0&&l-v-(h-m-1)>=h-m-1&&(N-=An.combins(l-v-(h-m),h-m-2)),h-m-1>1){let O=0;for(let M=l-v-(h-m-2);M>n;M--)O+=An.combins(l-v-M-1,h-m-3);N-=O*(h-1-m)}else l-v>n&&N--;c+=N}l-=v}return c}static combins(e,n){let i,l;e-n>n?(l=n,i=e-n):(l=e-n,i=n);let c=1,u=1;for(let h=e;h>i;h--)c*=h,u<=l&&(c/=u,u++);for(;u<=l;)c/=u,u++;return c}}class Hi{static buildBitArray(e){let n=e.length*2-1;e[e.length-1].getRightChar()==null&&(n-=1);let i=12*n,l=new Q(i),c=0,h=e[0].getRightChar().getValue();for(let m=11;m>=0;--m)h&1<<m&&l.set(c),c++;for(let m=1;m<e.length;++m){let v=e[m],N=v.getLeftChar().getValue();for(let O=11;O>=0;--O)N&1<<O&&l.set(c),c++;if(v.getRightChar()!=null){let O=v.getRightChar().getValue();for(let M=11;M>=0;--M)O&1<<M&&l.set(c),c++}}return l}}class ar{constructor(e,n){n?this.decodedInformation=null:(this.finished=e,this.decodedInformation=n)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class oi{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class fn extends oi{constructor(e,n){super(e),this.value=n}getValue(){return this.value}isFNC1(){return this.value===fn.FNC1}}fn.FNC1="$";class lr extends oi{constructor(e,n,i){super(e),i?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=n}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Tn extends oi{constructor(e,n,i){if(super(e),n<0||n>10||i<0||i>10)throw new q;this.firstDigit=n,this.secondDigit=i}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Tn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Tn.FNC1}isAnyFNC1(){return this.firstDigit===Tn.FNC1||this.secondDigit===Tn.FNC1}}Tn.FNC1=10;class Le{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new ee;let n=e.substring(0,2);for(let c of Le.TWO_DIGIT_DATA_LENGTH)if(c[0]===n)return c[1]===Le.VARIABLE_LENGTH?Le.processVariableAI(2,c[2],e):Le.processFixedAI(2,c[1],e);if(e.length<3)throw new ee;let i=e.substring(0,3);for(let c of Le.THREE_DIGIT_DATA_LENGTH)if(c[0]===i)return c[1]===Le.VARIABLE_LENGTH?Le.processVariableAI(3,c[2],e):Le.processFixedAI(3,c[1],e);for(let c of Le.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(c[0]===i)return c[1]===Le.VARIABLE_LENGTH?Le.processVariableAI(4,c[2],e):Le.processFixedAI(4,c[1],e);if(e.length<4)throw new ee;let l=e.substring(0,4);for(let c of Le.FOUR_DIGIT_DATA_LENGTH)if(c[0]===l)return c[1]===Le.VARIABLE_LENGTH?Le.processVariableAI(4,c[2],e):Le.processFixedAI(4,c[1],e);throw new ee}static processFixedAI(e,n,i){if(i.length<e)throw new ee;let l=i.substring(0,e);if(i.length<e+n)throw new ee;let c=i.substring(e,e+n),u=i.substring(e+n),h="("+l+")"+c,m=Le.parseFieldsInGeneralPurpose(u);return m==null?h:h+m}static processVariableAI(e,n,i){let l=i.substring(0,e),c;i.length<e+n?c=i.length:c=e+n;let u=i.substring(e,c),h=i.substring(c),m="("+l+")"+u,v=Le.parseFieldsInGeneralPurpose(h);return v==null?m:m+v}}Le.VARIABLE_LENGTH=[],Le.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Le.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Le.VARIABLE_LENGTH,20],["22",Le.VARIABLE_LENGTH,29],["30",Le.VARIABLE_LENGTH,8],["37",Le.VARIABLE_LENGTH,8],["90",Le.VARIABLE_LENGTH,30],["91",Le.VARIABLE_LENGTH,30],["92",Le.VARIABLE_LENGTH,30],["93",Le.VARIABLE_LENGTH,30],["94",Le.VARIABLE_LENGTH,30],["95",Le.VARIABLE_LENGTH,30],["96",Le.VARIABLE_LENGTH,30],["97",Le.VARIABLE_LENGTH,3],["98",Le.VARIABLE_LENGTH,30],["99",Le.VARIABLE_LENGTH,30]],Le.THREE_DIGIT_DATA_LENGTH=[["240",Le.VARIABLE_LENGTH,30],["241",Le.VARIABLE_LENGTH,30],["242",Le.VARIABLE_LENGTH,6],["250",Le.VARIABLE_LENGTH,30],["251",Le.VARIABLE_LENGTH,30],["253",Le.VARIABLE_LENGTH,17],["254",Le.VARIABLE_LENGTH,20],["400",Le.VARIABLE_LENGTH,30],["401",Le.VARIABLE_LENGTH,30],["402",17],["403",Le.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Le.VARIABLE_LENGTH,20],["421",Le.VARIABLE_LENGTH,15],["422",3],["423",Le.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Le.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Le.VARIABLE_LENGTH,15],["391",Le.VARIABLE_LENGTH,18],["392",Le.VARIABLE_LENGTH,15],["393",Le.VARIABLE_LENGTH,18],["703",Le.VARIABLE_LENGTH,30]],Le.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Le.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Le.VARIABLE_LENGTH,20],["8003",Le.VARIABLE_LENGTH,30],["8004",Le.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Le.VARIABLE_LENGTH,30],["8008",Le.VARIABLE_LENGTH,12],["8018",18],["8020",Le.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Le.VARIABLE_LENGTH,70],["8200",Le.VARIABLE_LENGTH,70]];class ai{constructor(e){this.buffer=new Re,this.information=e}decodeAllCodes(e,n){let i=n,l=null;do{let c=this.decodeGeneralPurposeField(i,l),u=Le.parseFieldsInGeneralPurpose(c.getNewString());if(u!=null&&e.append(u),c.isRemaining()?l=""+c.getRemainingValue():l=null,i===c.getNewPosition())break;i=c.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let n=e;n<e+3;++n)if(this.information.get(n))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let c=this.extractNumericValueFromBitArray(e,4);return c===0?new Tn(this.information.getSize(),Tn.FNC1,Tn.FNC1):new Tn(this.information.getSize(),c-1,Tn.FNC1)}let n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,l=(n-8)%11;return new Tn(e+7,i,l)}extractNumericValueFromBitArray(e,n){return ai.extractNumericValueFromBitArray(this.information,e,n)}static extractNumericValueFromBitArray(e,n,i){let l=0;for(let c=0;c<i;++c)e.get(n+c)&&(l|=1<<i-c-1);return l}decodeGeneralPurposeField(e,n){this.buffer.setLengthToZero(),n!=null&&this.buffer.append(n),this.current.setPosition(e);let i=this.parseBlocks();return i!=null&&i.isRemaining()?new lr(this.current.getPosition(),this.buffer.toString(),i.getRemainingValue()):new lr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,n;do{let i=this.current.getPosition();if(this.current.isAlpha()?(n=this.parseAlphaBlock(),e=n.isFinished()):this.current.isIsoIec646()?(n=this.parseIsoIec646Block(),e=n.isFinished()):(n=this.parseNumericBlock(),e=n.isFinished()),!(i!==this.current.getPosition())&&!e)break}while(!e);return n.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let n;return e.isSecondDigitFNC1()?n=new lr(this.current.getPosition(),this.buffer.toString()):n=new lr(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new ar(!0,n)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let n=new lr(this.current.getPosition(),this.buffer.toString());return new ar(!0,n)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ar(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new lr(this.current.getPosition(),this.buffer.toString());return new ar(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ar(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new lr(this.current.getPosition(),this.buffer.toString());return new ar(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ar(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+7>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<116)return!0;if(e+8>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(e,8);return l>=232&&l<253}decodeIsoIec646(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new fn(e+5,fn.FNC1);if(n>=5&&n<15)return new fn(e+5,"0"+(n-5));let i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<90)return new fn(e+7,""+(i+1));if(i>=90&&i<116)return new fn(e+7,""+(i+7));let l=this.extractNumericValueFromBitArray(e,8),c;switch(l){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new q}return new fn(e+8,c)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+6>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,6);return i>=16&&i<63}decodeAlphanumeric(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new fn(e+5,fn.FNC1);if(n>=5&&n<15)return new fn(e+5,"0"+(n-5));let i=this.extractNumericValueFromBitArray(e,6);if(i>=32&&i<58)return new fn(e+6,""+(i+33));let l;switch(i){case 58:l="*";break;case 59:l=",";break;case 60:l="-";break;case 61:l=".";break;case 62:l="/";break;default:throw new Pt("Decoding invalid alphanumeric value: "+i)}return new fn(e+6,l)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<5&&n+e<this.information.getSize();++n)if(n===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+n))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let n=e;n<e+3;++n)if(this.information.get(n))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<4&&n+e<this.information.getSize();++n)if(this.information.get(e+n))return!1;return!0}}class Gi{constructor(e){this.information=e,this.generalDecoder=new ai(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ln extends Gi{constructor(e){super(e)}encodeCompressedGtin(e,n){e.append("(01)");let i=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,n,i)}encodeCompressedGtinWithoutAI(e,n,i){for(let l=0;l<4;++l){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*l,10);c/100===0&&e.append("0"),c/10===0&&e.append("0"),e.append(c)}Ln.appendCheckDigit(e,i)}static appendCheckDigit(e,n){let i=0;for(let l=0;l<13;l++){let c=e.charAt(l+n).charCodeAt(0)-48;i+=l&1?c:3*c}i=10-i%10,i===10&&(i=0),e.append(i)}}Ln.GTIN_SIZE=40;class Qn extends Ln{constructor(e){super(e)}parseInformation(){let e=new Re;e.append("(01)");let n=e.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(Qn.HEADER_SIZE,4);return e.append(i),this.encodeCompressedGtinWithoutAI(e,Qn.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(e,Qn.HEADER_SIZE+44)}}Qn.HEADER_SIZE=4;class Kr extends Gi{constructor(e){super(e)}parseInformation(){let e=new Re;return this.getGeneralDecoder().decodeAllCodes(e,Kr.HEADER_SIZE)}}Kr.HEADER_SIZE=5;class Ci extends Ln{constructor(e){super(e)}encodeCompressedWeight(e,n,i){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(e,l);let c=this.checkWeight(l),u=1e5;for(let h=0;h<5;++h)c/u===0&&e.append("0"),u/=10;e.append(c)}}class Jn extends Ci{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=Jn.HEADER_SIZE+Ci.GTIN_SIZE+Jn.WEIGHT_SIZE)throw new ee;let e=new Re;return this.encodeCompressedGtin(e,Jn.HEADER_SIZE),this.encodeCompressedWeight(e,Jn.HEADER_SIZE+Ci.GTIN_SIZE,Jn.WEIGHT_SIZE),e.toString()}}Jn.HEADER_SIZE=5,Jn.WEIGHT_SIZE=15;class Be extends Jn{constructor(e){super(e)}addWeightCode(e,n){e.append("(3103)")}checkWeight(e){return e}}class mt extends Jn{constructor(e){super(e)}addWeightCode(e,n){n<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class Qe extends Ln{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Qe.HEADER_SIZE+Ln.GTIN_SIZE)throw new ee;let e=new Re;this.encodeCompressedGtin(e,Qe.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(Qe.HEADER_SIZE+Ln.GTIN_SIZE,Qe.LAST_DIGIT_SIZE);e.append("(392"),e.append(n),e.append(")");let i=this.getGeneralDecoder().decodeGeneralPurposeField(Qe.HEADER_SIZE+Ln.GTIN_SIZE+Qe.LAST_DIGIT_SIZE,null);return e.append(i.getNewString()),e.toString()}}Qe.HEADER_SIZE=8,Qe.LAST_DIGIT_SIZE=2;class Et extends Ln{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Et.HEADER_SIZE+Ln.GTIN_SIZE)throw new ee;let e=new Re;this.encodeCompressedGtin(e,Et.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(Et.HEADER_SIZE+Ln.GTIN_SIZE,Et.LAST_DIGIT_SIZE);e.append("(393"),e.append(n),e.append(")");let i=this.getGeneralDecoder().extractNumericValueFromBitArray(Et.HEADER_SIZE+Ln.GTIN_SIZE+Et.LAST_DIGIT_SIZE,Et.FIRST_THREE_DIGITS_SIZE);i/100==0&&e.append("0"),i/10==0&&e.append("0"),e.append(i);let l=this.getGeneralDecoder().decodeGeneralPurposeField(Et.HEADER_SIZE+Ln.GTIN_SIZE+Et.LAST_DIGIT_SIZE+Et.FIRST_THREE_DIGITS_SIZE,null);return e.append(l.getNewString()),e.toString()}}Et.HEADER_SIZE=8,Et.LAST_DIGIT_SIZE=2,Et.FIRST_THREE_DIGITS_SIZE=10;class Me extends Ci{constructor(e,n,i){super(e),this.dateCode=i,this.firstAIdigits=n}parseInformation(){if(this.getInformation().getSize()!=Me.HEADER_SIZE+Me.GTIN_SIZE+Me.WEIGHT_SIZE+Me.DATE_SIZE)throw new ee;let e=new Re;return this.encodeCompressedGtin(e,Me.HEADER_SIZE),this.encodeCompressedWeight(e,Me.HEADER_SIZE+Me.GTIN_SIZE,Me.WEIGHT_SIZE),this.encodeCompressedDate(e,Me.HEADER_SIZE+Me.GTIN_SIZE+Me.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,n){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,Me.DATE_SIZE);if(i==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let l=i%32;i/=32;let c=i%12+1;i/=12;let u=i;u/10==0&&e.append("0"),e.append(u),c/10==0&&e.append("0"),e.append(c),l/10==0&&e.append("0"),e.append(l)}addWeightCode(e,n){e.append("("),e.append(this.firstAIdigits),e.append(n/1e5),e.append(")")}checkWeight(e){return e%1e5}}Me.HEADER_SIZE=8,Me.WEIGHT_SIZE=20,Me.DATE_SIZE=16;function Wn(k){try{if(k.get(1))return new Qn(k);if(!k.get(2))return new Kr(k);switch(ai.extractNumericValueFromBitArray(k,1,4)){case 4:return new Be(k);case 5:return new mt(k)}switch(ai.extractNumericValueFromBitArray(k,1,5)){case 12:return new Qe(k);case 13:return new Et(k)}switch(ai.extractNumericValueFromBitArray(k,1,7)){case 56:return new Me(k,"310","11");case 57:return new Me(k,"320","11");case 58:return new Me(k,"310","13");case 59:return new Me(k,"320","13");case 60:return new Me(k,"310","15");case 61:return new Me(k,"320","15");case 62:return new Me(k,"310","17");case 63:return new Me(k,"320","17")}}catch(e){throw console.log(e),new Pt("unknown decoder: "+k)}}class Ft{constructor(e,n,i,l){this.leftchar=e,this.rightchar=n,this.finderpattern=i,this.maybeLast=l}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,n){return e instanceof Ft?Ft.equalsOrNull(e.leftchar,n.leftchar)&&Ft.equalsOrNull(e.rightchar,n.rightchar)&&Ft.equalsOrNull(e.finderpattern,n.finderpattern):!1}static equalsOrNull(e,n){return e===null?n===null:Ft.equals(e,n)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class bs{constructor(e,n,i){this.pairs=e,this.rowNumber=n,this.wasReversed=i}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,n){return e instanceof bs?this.checkEqualitity(e,n)&&e.wasReversed===n.wasReversed:!1}checkEqualitity(e,n){if(!e||!n)return;let i;return e.forEach((l,c)=>{n.forEach(u=>{l.getLeftChar().getValue()===u.getLeftChar().getValue()&&l.getRightChar().getValue()===u.getRightChar().getValue()&&l.getFinderPatter().getValue()===u.getFinderPatter().getValue()&&(i=!0)})}),i}}class xe extends rn{constructor(e){super(...arguments),this.pairs=new Array(xe.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,n,i){this.pairs.length=0,this.startFromEven=!1;try{return xe.constructResult(this.decodeRow2pairs(e,n))}catch(l){this.verbose&&console.log(l)}return this.pairs.length=0,this.startFromEven=!0,xe.constructResult(this.decodeRow2pairs(e,n))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,n){let i=!1;for(;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,e))}catch(c){if(c instanceof ee){if(!this.pairs.length)throw new ee;i=!0}}if(this.checkChecksum())return this.pairs;let l;if(this.rows.length?l=!0:l=!1,this.storeRow(e,!1),l){let c=this.checkRowsBoolean(!1);if(c!=null||(c=this.checkRowsBoolean(!0),c!=null))return c}throw new ee}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let n=null;try{n=this.checkRows(new Array,0)}catch(i){this.verbose&&console.log(i)}return e&&(this.rows=this.rows.reverse()),n}checkRows(e,n){for(let i=n;i<this.rows.length;i++){let l=this.rows[i];this.pairs.length=0;for(let u of e)this.pairs.push(u.getPairs());if(this.pairs.push(l.getPairs()),!xe.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let c=new Array(e);c.push(l);try{return this.checkRows(c,i+1)}catch(u){this.verbose&&console.log(u)}}throw new ee}static isValidSequence(e){for(let n of xe.FINDER_PATTERN_SEQUENCES){if(e.length>n.length)continue;let i=!0;for(let l=0;l<e.length;l++)if(e[l].getFinderPattern().getValue()!=n[l]){i=!1;break}if(i)return!0}return!1}storeRow(e,n){let i=0,l=!1,c=!1;for(;i<this.rows.length;){let u=this.rows[i];if(u.getRowNumber()>e){c=u.isEquivalent(this.pairs);break}l=u.isEquivalent(this.pairs),i++}c||l||xe.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new bs(this.pairs,e,n)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,n){for(let i of n)if(i.getPairs().length!==e.length){for(let l of i.getPairs())for(let c of e)if(Ft.equals(l,c))break}}static isPartialRow(e,n){for(let i of n){let l=!0;for(let c of e){let u=!1;for(let h of i.getPairs())if(c.equals(h)){u=!0;break}if(!u){l=!1;break}}if(l)return!0}return!1}getRows(){return this.rows}static constructResult(e){let n=Hi.buildBitArray(e),l=Wn(n).parseInformation(),c=e[0].getFinderPattern().getResultPoints(),u=e[e.length-1].getFinderPattern().getResultPoints(),h=[c[0],c[1],u[0],u[1]];return new ze(l,null,null,h,de.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),n=e.getLeftChar(),i=e.getRightChar();if(i==null)return!1;let l=i.getChecksumPortion(),c=2;for(let h=1;h<this.pairs.size();++h){let m=this.pairs.get(h);l+=m.getLeftChar().getChecksumPortion(),c++;let v=m.getRightChar();v!=null&&(l+=v.getChecksumPortion(),c++)}return l%=211,211*(c-4)+l==n.getValue()}static getNextSecondBar(e,n){let i;return e.get(n)?(i=e.getNextUnset(n),i=e.getNextSet(i)):(i=e.getNextSet(n),i=e.getNextUnset(i)),i}retrieveNextPair(e,n,i){let l=n.length%2==0;this.startFromEven&&(l=!l);let c,u=!0,h=-1;do this.findNextPair(e,n,h),c=this.parseFoundFinderPattern(e,i,l),c==null?h=xe.getNextSecondBar(e,this.startEnd[0]):u=!1;while(u);let m=this.decodeDataCharacter(e,c,l,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new ee;let v;try{v=this.decodeDataCharacter(e,c,l,!1)}catch(N){v=null,this.verbose&&console.log(N)}return new Ft(m,v,c,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,n,i){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u;i>=0?u=i:this.isEmptyPair(n)?u=0:u=n[n.length-1].getFinderPattern().getStartEnd()[1];let h=n.length%2!=0;this.startFromEven&&(h=!h);let m=!1;for(;u<c&&(m=!e.get(u),!!m);)u++;let v=0,N=u;for(let O=u;O<c;O++)if(e.get(O)!=m)l[v]++;else{if(v==3){if(h&&xe.reverseCounters(l),xe.isFinderPattern(l)){this.startEnd[0]=N,this.startEnd[1]=O;return}h&&xe.reverseCounters(l),N+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,v--}else v++;l[v]=1,m=!m}throw new ee}static reverseCounters(e){let n=e.length;for(let i=0;i<n/2;++i){let l=e[i];e[i]=e[n-i-1],e[n-i-1]=l}}parseFoundFinderPattern(e,n,i){let l,c,u;if(i){let v=this.startEnd[0]-1;for(;v>=0&&!e.get(v);)v--;v++,l=this.startEnd[0]-v,c=v,u=this.startEnd[1]}else c=this.startEnd[0],u=e.getNextUnset(this.startEnd[1]+1),l=u-this.startEnd[1];let h=this.getDecodeFinderCounters();B.arraycopy(h,0,h,1,h.length-1),h[0]=l;let m;try{m=this.parseFinderValue(h,xe.FINDER_PATTERNS)}catch{return null}return new si(m,[c,u],c,u,n)}decodeDataCharacter(e,n,i,l){let c=this.getDataCharacterCounters();for(let Vt=0;Vt<c.length;Vt++)c[Vt]=0;if(l)xe.recordPatternInReverse(e,n.getStartEnd()[0],c);else{xe.recordPattern(e,n.getStartEnd()[1],c);for(let Vt=0,sn=c.length-1;Vt<sn;Vt++,sn--){let Xn=c[Vt];c[Vt]=c[sn],c[sn]=Xn}}let u=17,h=pt.sum(new Int32Array(c))/u,m=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(h-m)/m>.3)throw new ee;let v=this.getOddCounts(),N=this.getEvenCounts(),O=this.getOddRoundingErrors(),M=this.getEvenRoundingErrors();for(let Vt=0;Vt<c.length;Vt++){let sn=1*c[Vt]/h,Xn=sn+.5;if(Xn<1){if(sn<.3)throw new ee;Xn=1}else if(Xn>8){if(sn>8.7)throw new ee;Xn=8}let Ii=Vt/2;Vt&1?(N[Ii]=Xn,M[Ii]=sn-Xn):(v[Ii]=Xn,O[Ii]=sn-Xn)}this.adjustOddEvenCounts(u);let U=4*n.getValue()+(i?0:2)+(l?0:1)-1,G=0,K=0;for(let Vt=v.length-1;Vt>=0;Vt--){if(xe.isNotA1left(n,i,l)){let sn=xe.WEIGHTS[U][2*Vt];K+=v[Vt]*sn}G+=v[Vt]}let J=0;for(let Vt=N.length-1;Vt>=0;Vt--)if(xe.isNotA1left(n,i,l)){let sn=xe.WEIGHTS[U][2*Vt+1];J+=N[Vt]*sn}let oe=K+J;if(G&1||G>13||G<4)throw new ee;let Ee=(13-G)/2,be=xe.SYMBOL_WIDEST[Ee],we=9-be,bt=An.getRSSvalue(v,be,!0),ht=An.getRSSvalue(N,we,!1),tr=xe.EVEN_TOTAL_SUBSET[Ee],Nr=xe.GSUM[Ee],vn=bt*tr+ht+Nr;return new Mr(vn,oe)}static isNotA1left(e,n,i){return!(e.getValue()==0&&n&&i)}adjustOddEvenCounts(e){let n=pt.sum(new Int32Array(this.getOddCounts())),i=pt.sum(new Int32Array(this.getEvenCounts())),l=!1,c=!1;n>13?c=!0:n<4&&(l=!0);let u=!1,h=!1;i>13?h=!0:i<4&&(u=!0);let m=n+i-e,v=(n&1)==1,N=(i&1)==0;if(m==1)if(v){if(N)throw new ee;c=!0}else{if(!N)throw new ee;h=!0}else if(m==-1)if(v){if(N)throw new ee;l=!0}else{if(!N)throw new ee;u=!0}else if(m==0){if(v){if(!N)throw new ee;n<i?(l=!0,h=!0):(c=!0,u=!0)}else if(N)throw new ee}else throw new ee;if(l){if(c)throw new ee;xe.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&xe.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(h)throw new ee;xe.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&xe.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}xe.SYMBOL_WIDEST=[7,5,4,3,1],xe.EVEN_TOTAL_SUBSET=[4,20,52,104,204],xe.GSUM=[0,348,1388,2948,3988],xe.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],xe.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],xe.FINDER_PAT_A=0,xe.FINDER_PAT_B=1,xe.FINDER_PAT_C=2,xe.FINDER_PAT_D=3,xe.FINDER_PAT_E=4,xe.FINDER_PAT_F=5,xe.FINDER_PATTERN_SEQUENCES=[[xe.FINDER_PAT_A,xe.FINDER_PAT_A],[xe.FINDER_PAT_A,xe.FINDER_PAT_B,xe.FINDER_PAT_B],[xe.FINDER_PAT_A,xe.FINDER_PAT_C,xe.FINDER_PAT_B,xe.FINDER_PAT_D],[xe.FINDER_PAT_A,xe.FINDER_PAT_E,xe.FINDER_PAT_B,xe.FINDER_PAT_D,xe.FINDER_PAT_C],[xe.FINDER_PAT_A,xe.FINDER_PAT_E,xe.FINDER_PAT_B,xe.FINDER_PAT_D,xe.FINDER_PAT_D,xe.FINDER_PAT_F],[xe.FINDER_PAT_A,xe.FINDER_PAT_E,xe.FINDER_PAT_B,xe.FINDER_PAT_D,xe.FINDER_PAT_E,xe.FINDER_PAT_F,xe.FINDER_PAT_F],[xe.FINDER_PAT_A,xe.FINDER_PAT_A,xe.FINDER_PAT_B,xe.FINDER_PAT_B,xe.FINDER_PAT_C,xe.FINDER_PAT_C,xe.FINDER_PAT_D,xe.FINDER_PAT_D],[xe.FINDER_PAT_A,xe.FINDER_PAT_A,xe.FINDER_PAT_B,xe.FINDER_PAT_B,xe.FINDER_PAT_C,xe.FINDER_PAT_C,xe.FINDER_PAT_D,xe.FINDER_PAT_E,xe.FINDER_PAT_E],[xe.FINDER_PAT_A,xe.FINDER_PAT_A,xe.FINDER_PAT_B,xe.FINDER_PAT_B,xe.FINDER_PAT_C,xe.FINDER_PAT_C,xe.FINDER_PAT_D,xe.FINDER_PAT_E,xe.FINDER_PAT_F,xe.FINDER_PAT_F],[xe.FINDER_PAT_A,xe.FINDER_PAT_A,xe.FINDER_PAT_B,xe.FINDER_PAT_B,xe.FINDER_PAT_C,xe.FINDER_PAT_D,xe.FINDER_PAT_D,xe.FINDER_PAT_E,xe.FINDER_PAT_E,xe.FINDER_PAT_F,xe.FINDER_PAT_F]],xe.MAX_PAIRS=11;class gr extends Mr{constructor(e,n,i){super(e,n),this.count=0,this.finderPattern=i}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Mt extends rn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,n,i){const l=this.decodePair(n,!1,e,i);Mt.addOrTally(this.possibleLeftPairs,l),n.reverse();let c=this.decodePair(n,!0,e,i);Mt.addOrTally(this.possibleRightPairs,c),n.reverse();for(let u of this.possibleLeftPairs)if(u.getCount()>1){for(let h of this.possibleRightPairs)if(h.getCount()>1&&Mt.checkChecksum(u,h))return Mt.constructResult(u,h)}throw new ee}static addOrTally(e,n){if(n==null)return;let i=!1;for(let l of e)if(l.getValue()===n.getValue()){l.incrementCount(),i=!0;break}i||e.push(n)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,n){let i=4537077*e.getValue()+n.getValue(),l=new String(i).toString(),c=new Re;for(let v=13-l.length;v>0;v--)c.append("0");c.append(l);let u=0;for(let v=0;v<13;v++){let N=c.charAt(v).charCodeAt(0)-48;u+=v&1?N:3*N}u=10-u%10,u===10&&(u=0),c.append(u.toString());let h=e.getFinderPattern().getResultPoints(),m=n.getFinderPattern().getResultPoints();return new ze(c.toString(),null,0,[h[0],h[1],m[0],m[1]],de.RSS_14,new Date().getTime())}static checkChecksum(e,n){let i=(e.getChecksumPortion()+16*n.getChecksumPortion())%79,l=9*e.getFinderPattern().getValue()+n.getFinderPattern().getValue();return l>72&&l--,l>8&&l--,i===l}decodePair(e,n,i,l){try{let c=this.findFinderPattern(e,n),u=this.parseFoundFinderPattern(e,i,n,c),h=l==null?null:l.get(ue.NEED_RESULT_POINT_CALLBACK);if(h!=null){let N=(c[0]+c[1])/2;n&&(N=e.getSize()-1-N),h.foundPossibleResultPoint(new Te(N,i))}let m=this.decodeDataCharacter(e,u,!0),v=this.decodeDataCharacter(e,u,!1);return new gr(1597*m.getValue()+v.getValue(),m.getChecksumPortion()+4*v.getChecksumPortion(),u)}catch{return null}}decodeDataCharacter(e,n,i){let l=this.getDataCharacterCounters();for(let J=0;J<l.length;J++)l[J]=0;if(i)De.recordPatternInReverse(e,n.getStartEnd()[0],l);else{De.recordPattern(e,n.getStartEnd()[1]+1,l);for(let J=0,oe=l.length-1;J<oe;J++,oe--){let Ee=l[J];l[J]=l[oe],l[oe]=Ee}}let c=i?16:15,u=pt.sum(new Int32Array(l))/c,h=this.getOddCounts(),m=this.getEvenCounts(),v=this.getOddRoundingErrors(),N=this.getEvenRoundingErrors();for(let J=0;J<l.length;J++){let oe=l[J]/u,Ee=Math.floor(oe+.5);Ee<1?Ee=1:Ee>8&&(Ee=8);let be=Math.floor(J/2);J&1?(m[be]=Ee,N[be]=oe-Ee):(h[be]=Ee,v[be]=oe-Ee)}this.adjustOddEvenCounts(i,c);let O=0,M=0;for(let J=h.length-1;J>=0;J--)M*=9,M+=h[J],O+=h[J];let U=0,G=0;for(let J=m.length-1;J>=0;J--)U*=9,U+=m[J],G+=m[J];let K=M+3*U;if(i){if(O&1||O>12||O<4)throw new ee;let J=(12-O)/2,oe=Mt.OUTSIDE_ODD_WIDEST[J],Ee=9-oe,be=An.getRSSvalue(h,oe,!1),we=An.getRSSvalue(m,Ee,!0),bt=Mt.OUTSIDE_EVEN_TOTAL_SUBSET[J],ht=Mt.OUTSIDE_GSUM[J];return new Mr(be*bt+we+ht,K)}else{if(G&1||G>10||G<4)throw new ee;let J=(10-G)/2,oe=Mt.INSIDE_ODD_WIDEST[J],Ee=9-oe,be=An.getRSSvalue(h,oe,!0),we=An.getRSSvalue(m,Ee,!1),bt=Mt.INSIDE_ODD_TOTAL_SUBSET[J],ht=Mt.INSIDE_GSUM[J];return new Mr(we*bt+be+ht,K)}}findFinderPattern(e,n){let i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;let l=e.getSize(),c=!1,u=0;for(;u<l&&(c=!e.get(u),n!==c);)u++;let h=0,m=u;for(let v=u;v<l;v++)if(e.get(v)!==c)i[h]++;else{if(h===3){if(rn.isFinderPattern(i))return[m,v];m+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,h--}else h++;i[h]=1,c=!c}throw new ee}parseFoundFinderPattern(e,n,i,l){let c=e.get(l[0]),u=l[0]-1;for(;u>=0&&c!==e.get(u);)u--;u++;const h=l[0]-u,m=this.getDecodeFinderCounters(),v=new Int32Array(m.length);B.arraycopy(m,0,v,1,m.length-1),v[0]=h;const N=this.parseFinderValue(v,Mt.FINDER_PATTERNS);let O=u,M=l[1];return i&&(O=e.getSize()-1-O,M=e.getSize()-1-M),new si(N,[u,l[1]],O,M,n)}adjustOddEvenCounts(e,n){let i=pt.sum(new Int32Array(this.getOddCounts())),l=pt.sum(new Int32Array(this.getEvenCounts())),c=!1,u=!1,h=!1,m=!1;e?(i>12?u=!0:i<4&&(c=!0),l>12?m=!0:l<4&&(h=!0)):(i>11?u=!0:i<5&&(c=!0),l>10?m=!0:l<4&&(h=!0));let v=i+l-n,N=(i&1)===(e?1:0),O=(l&1)===1;if(v===1)if(N){if(O)throw new ee;u=!0}else{if(!O)throw new ee;m=!0}else if(v===-1)if(N){if(O)throw new ee;c=!0}else{if(!O)throw new ee;h=!0}else if(v===0){if(N){if(!O)throw new ee;i<l?(c=!0,m=!0):(u=!0,h=!0)}else if(O)throw new ee}else throw new ee;if(c){if(u)throw new ee;rn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&rn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(m)throw new ee;rn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&rn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Mt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Mt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Mt.OUTSIDE_GSUM=[0,161,961,2015,2715],Mt.INSIDE_GSUM=[0,336,1036,1516],Mt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Mt.INSIDE_ODD_WIDEST=[2,4,6,8],Mt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ei extends De{constructor(e,n){super(),this.readers=[],this.verbose=n===!0;const i=e?e.get(ue.POSSIBLE_FORMATS):null,l=e&&e.get(ue.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;i?((i.includes(de.EAN_13)||i.includes(de.UPC_A)||i.includes(de.EAN_8)||i.includes(de.UPC_E))&&this.readers.push(new Wi(e)),i.includes(de.CODE_39)&&this.readers.push(new ct(l)),i.includes(de.CODE_128)&&this.readers.push(new he),i.includes(de.ITF)&&this.readers.push(new st),i.includes(de.RSS_14)&&this.readers.push(new Mt),i.includes(de.RSS_EXPANDED)&&this.readers.push(new xe(this.verbose))):(this.readers.push(new Wi(e)),this.readers.push(new ct),this.readers.push(new Wi(e)),this.readers.push(new he),this.readers.push(new st),this.readers.push(new Mt),this.readers.push(new xe(this.verbose)))}decodeRow(e,n,i){for(let l=0;l<this.readers.length;l++)try{return this.readers[l].decodeRow(e,n,i)}catch{}throw new ee}reset(){this.readers.forEach(e=>e.reset())}}class Xi extends Ae{constructor(e=500,n){super(new Ei(n),e,n)}}class Tt{constructor(e,n,i){this.ecCodewords=e,this.ecBlocks=[n],i&&this.ecBlocks.push(i)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class yt{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Nt{constructor(e,n,i,l,c,u){this.versionNumber=e,this.symbolSizeRows=n,this.symbolSizeColumns=i,this.dataRegionSizeRows=l,this.dataRegionSizeColumns=c,this.ecBlocks=u;let h=0;const m=u.getECCodewords(),v=u.getECBlocks();for(let N of v)h+=N.getCount()*(N.getDataCodewords()+m);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,n){if(e&1||n&1)throw new q;for(let i of Nt.VERSIONS)if(i.symbolSizeRows===e&&i.symbolSizeColumns===n)return i;throw new q}toString(){return""+this.versionNumber}static buildVersions(){return[new Nt(1,10,10,8,8,new Tt(5,new yt(1,3))),new Nt(2,12,12,10,10,new Tt(7,new yt(1,5))),new Nt(3,14,14,12,12,new Tt(10,new yt(1,8))),new Nt(4,16,16,14,14,new Tt(12,new yt(1,12))),new Nt(5,18,18,16,16,new Tt(14,new yt(1,18))),new Nt(6,20,20,18,18,new Tt(18,new yt(1,22))),new Nt(7,22,22,20,20,new Tt(20,new yt(1,30))),new Nt(8,24,24,22,22,new Tt(24,new yt(1,36))),new Nt(9,26,26,24,24,new Tt(28,new yt(1,44))),new Nt(10,32,32,14,14,new Tt(36,new yt(1,62))),new Nt(11,36,36,16,16,new Tt(42,new yt(1,86))),new Nt(12,40,40,18,18,new Tt(48,new yt(1,114))),new Nt(13,44,44,20,20,new Tt(56,new yt(1,144))),new Nt(14,48,48,22,22,new Tt(68,new yt(1,174))),new Nt(15,52,52,24,24,new Tt(42,new yt(2,102))),new Nt(16,64,64,14,14,new Tt(56,new yt(2,140))),new Nt(17,72,72,16,16,new Tt(36,new yt(4,92))),new Nt(18,80,80,18,18,new Tt(48,new yt(4,114))),new Nt(19,88,88,20,20,new Tt(56,new yt(4,144))),new Nt(20,96,96,22,22,new Tt(68,new yt(4,174))),new Nt(21,104,104,24,24,new Tt(56,new yt(6,136))),new Nt(22,120,120,18,18,new Tt(68,new yt(6,175))),new Nt(23,132,132,20,20,new Tt(62,new yt(8,163))),new Nt(24,144,144,22,22,new Tt(62,new yt(8,156),new yt(2,155))),new Nt(25,8,18,6,16,new Tt(7,new yt(1,5))),new Nt(26,8,32,6,14,new Tt(11,new yt(1,10))),new Nt(27,12,26,10,24,new Tt(14,new yt(1,16))),new Nt(28,12,36,10,16,new Tt(18,new yt(1,22))),new Nt(29,16,36,14,16,new Tt(24,new yt(1,32))),new Nt(30,16,48,14,22,new Tt(28,new yt(1,49)))]}}Nt.VERSIONS=Nt.buildVersions();class cr{constructor(e){const n=e.getHeight();if(n<8||n>144||n&1)throw new q;this.version=cr.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Ve(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const n=e.getHeight(),i=e.getWidth();return Nt.getVersionForDimensions(n,i)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let n=0,i=4,l=0;const c=this.mappingBitMatrix.getHeight(),u=this.mappingBitMatrix.getWidth();let h=!1,m=!1,v=!1,N=!1;do if(i===c&&l===0&&!h)e[n++]=this.readCorner1(c,u)&255,i-=2,l+=2,h=!0;else if(i===c-2&&l===0&&u&3&&!m)e[n++]=this.readCorner2(c,u)&255,i-=2,l+=2,m=!0;else if(i===c+4&&l===2&&!(u&7)&&!v)e[n++]=this.readCorner3(c,u)&255,i-=2,l+=2,v=!0;else if(i===c-2&&l===0&&(u&7)===4&&!N)e[n++]=this.readCorner4(c,u)&255,i-=2,l+=2,N=!0;else{do i<c&&l>=0&&!this.readMappingMatrix.get(l,i)&&(e[n++]=this.readUtah(i,l,c,u)&255),i-=2,l+=2;while(i>=0&&l<u);i+=1,l+=3;do i>=0&&l<u&&!this.readMappingMatrix.get(l,i)&&(e[n++]=this.readUtah(i,l,c,u)&255),i+=2,l-=2;while(i<c&&l>=0);i+=3,l+=1}while(i<c||l<u);if(n!==this.version.getTotalCodewords())throw new q;return e}readModule(e,n,i,l){return e<0&&(e+=i,n+=4-(i+4&7)),n<0&&(n+=l,e+=4-(l+4&7)),this.readMappingMatrix.set(n,e),this.mappingBitMatrix.get(n,e)}readUtah(e,n,i,l){let c=0;return this.readModule(e-2,n-2,i,l)&&(c|=1),c<<=1,this.readModule(e-2,n-1,i,l)&&(c|=1),c<<=1,this.readModule(e-1,n-2,i,l)&&(c|=1),c<<=1,this.readModule(e-1,n-1,i,l)&&(c|=1),c<<=1,this.readModule(e-1,n,i,l)&&(c|=1),c<<=1,this.readModule(e,n-2,i,l)&&(c|=1),c<<=1,this.readModule(e,n-1,i,l)&&(c|=1),c<<=1,this.readModule(e,n,i,l)&&(c|=1),c}readCorner1(e,n){let i=0;return this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,1,e,n)&&(i|=1),i<<=1,this.readModule(e-1,2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(2,n-1,e,n)&&(i|=1),i<<=1,this.readModule(3,n-1,e,n)&&(i|=1),i}readCorner2(e,n){let i=0;return this.readModule(e-3,0,e,n)&&(i|=1),i<<=1,this.readModule(e-2,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(0,n-4,e,n)&&(i|=1),i<<=1,this.readModule(0,n-3,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i}readCorner3(e,n){let i=0;return this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(0,n-3,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-3,e,n)&&(i|=1),i<<=1,this.readModule(1,n-2,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i}readCorner4(e,n){let i=0;return this.readModule(e-3,0,e,n)&&(i|=1),i<<=1,this.readModule(e-2,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(2,n-1,e,n)&&(i|=1),i<<=1,this.readModule(3,n-1,e,n)&&(i|=1),i}extractDataRegion(e){const n=this.version.getSymbolSizeRows(),i=this.version.getSymbolSizeColumns();if(e.getHeight()!==n)throw new I("Dimension of bitMatrix must match the version size");const l=this.version.getDataRegionSizeRows(),c=this.version.getDataRegionSizeColumns(),u=n/l|0,h=i/c|0,m=u*l,v=h*c,N=new Ve(v,m);for(let O=0;O<u;++O){const M=O*l;for(let U=0;U<h;++U){const G=U*c;for(let K=0;K<l;++K){const J=O*(l+2)+1+K,oe=M+K;for(let Ee=0;Ee<c;++Ee){const be=U*(c+2)+1+Ee;if(e.get(be,J)){const we=G+Ee;N.set(we,oe)}}}}}return N}}class Uo{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n){const i=n.getECBlocks();let l=0;const c=i.getECBlocks();for(let K of c)l+=K.getCount();const u=new Array(l);let h=0;for(let K of c)for(let J=0;J<K.getCount();J++){const oe=K.getDataCodewords(),Ee=i.getECCodewords()+oe;u[h++]=new Uo(oe,new Uint8Array(Ee))}const v=u[0].codewords.length-i.getECCodewords(),N=v-1;let O=0;for(let K=0;K<N;K++)for(let J=0;J<h;J++)u[J].codewords[K]=e[O++];const M=n.getVersionNumber()===24,U=M?8:h;for(let K=0;K<U;K++)u[K].codewords[v-1]=e[O++];const G=u[0].codewords.length;for(let K=v;K<G;K++)for(let J=0;J<h;J++){const oe=M?(J+8)%h:J,Ee=M&&oe>7?K-1:K;u[oe].codewords[Ee]=e[O++]}if(O!==e.length)throw new I;return u}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Wo{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new I(""+e);let n=0,i=this.bitOffset,l=this.byteOffset;const c=this.bytes;if(i>0){const u=8-i,h=e<u?e:u,m=u-h,v=255>>8-h<<m;n=(c[l]&v)>>m,e-=h,i+=h,i===8&&(i=0,l++)}if(e>0){for(;e>=8;)n=n<<8|c[l]&255,l++,e-=8;if(e>0){const u=8-e,h=255>>u<<u;n=n<<e|(c[l]&h)>>u,i+=e}}return this.bitOffset=i,this.byteOffset=l,n}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var yn;(function(k){k[k.PAD_ENCODE=0]="PAD_ENCODE",k[k.ASCII_ENCODE=1]="ASCII_ENCODE",k[k.C40_ENCODE=2]="C40_ENCODE",k[k.TEXT_ENCODE=3]="TEXT_ENCODE",k[k.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",k[k.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",k[k.BASE256_ENCODE=6]="BASE256_ENCODE"})(yn||(yn={}));class br{static decode(e){const n=new Wo(e),i=new Re,l=new Re,c=new Array;let u=yn.ASCII_ENCODE;do if(u===yn.ASCII_ENCODE)u=this.decodeAsciiSegment(n,i,l);else{switch(u){case yn.C40_ENCODE:this.decodeC40Segment(n,i);break;case yn.TEXT_ENCODE:this.decodeTextSegment(n,i);break;case yn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,i);break;case yn.EDIFACT_ENCODE:this.decodeEdifactSegment(n,i);break;case yn.BASE256_ENCODE:this.decodeBase256Segment(n,i,c);break;default:throw new q}u=yn.ASCII_ENCODE}while(u!==yn.PAD_ENCODE&&n.available()>0);return l.length()>0&&i.append(l.toString()),new tt(e,i.toString(),c.length===0?null:c,null)}static decodeAsciiSegment(e,n,i){let l=!1;do{let c=e.readBits(8);if(c===0)throw new q;if(c<=128)return l&&(c+=128),n.append(String.fromCharCode(c-1)),yn.ASCII_ENCODE;if(c===129)return yn.PAD_ENCODE;if(c<=229){const u=c-130;u<10&&n.append("0"),n.append(""+u)}else switch(c){case 230:return yn.C40_ENCODE;case 231:return yn.BASE256_ENCODE;case 232:n.append("");break;case 233:case 234:break;case 235:l=!0;break;case 236:n.append("[)>05"),i.insert(0,"");break;case 237:n.append("[)>06"),i.insert(0,"");break;case 238:return yn.ANSIX12_ENCODE;case 239:return yn.TEXT_ENCODE;case 240:return yn.EDIFACT_ENCODE;case 241:break;default:if(c!==254||e.available()!==0)throw new q;break}}while(e.available()>0);return yn.ASCII_ENCODE}static decodeC40Segment(e,n){let i=!1;const l=[];let c=0;do{if(e.available()===8)return;const u=e.readBits(8);if(u===254)return;this.parseTwoBytes(u,e.readBits(8),l);for(let h=0;h<3;h++){const m=l[h];switch(c){case 0:if(m<3)c=m+1;else if(m<this.C40_BASIC_SET_CHARS.length){const v=this.C40_BASIC_SET_CHARS[m];i?(n.append(String.fromCharCode(v.charCodeAt(0)+128)),i=!1):n.append(v)}else throw new q;break;case 1:i?(n.append(String.fromCharCode(m+128)),i=!1):n.append(String.fromCharCode(m)),c=0;break;case 2:if(m<this.C40_SHIFT2_SET_CHARS.length){const v=this.C40_SHIFT2_SET_CHARS[m];i?(n.append(String.fromCharCode(v.charCodeAt(0)+128)),i=!1):n.append(v)}else switch(m){case 27:n.append("");break;case 30:i=!0;break;default:throw new q}c=0;break;case 3:i?(n.append(String.fromCharCode(m+224)),i=!1):n.append(String.fromCharCode(m+96)),c=0;break;default:throw new q}}}while(e.available()>0)}static decodeTextSegment(e,n){let i=!1,l=[],c=0;do{if(e.available()===8)return;const u=e.readBits(8);if(u===254)return;this.parseTwoBytes(u,e.readBits(8),l);for(let h=0;h<3;h++){const m=l[h];switch(c){case 0:if(m<3)c=m+1;else if(m<this.TEXT_BASIC_SET_CHARS.length){const v=this.TEXT_BASIC_SET_CHARS[m];i?(n.append(String.fromCharCode(v.charCodeAt(0)+128)),i=!1):n.append(v)}else throw new q;break;case 1:i?(n.append(String.fromCharCode(m+128)),i=!1):n.append(String.fromCharCode(m)),c=0;break;case 2:if(m<this.TEXT_SHIFT2_SET_CHARS.length){const v=this.TEXT_SHIFT2_SET_CHARS[m];i?(n.append(String.fromCharCode(v.charCodeAt(0)+128)),i=!1):n.append(v)}else switch(m){case 27:n.append("");break;case 30:i=!0;break;default:throw new q}c=0;break;case 3:if(m<this.TEXT_SHIFT3_SET_CHARS.length){const v=this.TEXT_SHIFT3_SET_CHARS[m];i?(n.append(String.fromCharCode(v.charCodeAt(0)+128)),i=!1):n.append(v),c=0}else throw new q;break;default:throw new q}}}while(e.available()>0)}static decodeAnsiX12Segment(e,n){const i=[];do{if(e.available()===8)return;const l=e.readBits(8);if(l===254)return;this.parseTwoBytes(l,e.readBits(8),i);for(let c=0;c<3;c++){const u=i[c];switch(u){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(u<14)n.append(String.fromCharCode(u+44));else if(u<40)n.append(String.fromCharCode(u+51));else throw new q;break}}}while(e.available()>0)}static parseTwoBytes(e,n,i){let l=(e<<8)+n-1,c=Math.floor(l/1600);i[0]=c,l-=c*1600,c=Math.floor(l/40),i[1]=c,i[2]=l-c*40}static decodeEdifactSegment(e,n){do{if(e.available()<=16)return;for(let i=0;i<4;i++){let l=e.readBits(6);if(l===31){const c=8-e.getBitOffset();c!==8&&e.readBits(c);return}l&32||(l|=64),n.append(String.fromCharCode(l))}}while(e.available()>0)}static decodeBase256Segment(e,n,i){let l=1+e.getByteOffset();const c=this.unrandomize255State(e.readBits(8),l++);let u;if(c===0?u=e.available()/8|0:c<250?u=c:u=250*(c-249)+this.unrandomize255State(e.readBits(8),l++),u<0)throw new q;const h=new Uint8Array(u);for(let m=0;m<u;m++){if(e.available()<8)throw new q;h[m]=this.unrandomize255State(e.readBits(8),l++)}i.push(h);try{n.append(Pe.decode(h,ke.ISO88591))}catch(m){throw new Pt("Platform does not support required encoding: "+m.message)}}static unrandomize255State(e,n){const i=149*n%255+1,l=e-i;return l>=0?l:l+256}}br.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],br.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],br.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],br.TEXT_SHIFT2_SET_CHARS=br.C40_SHIFT2_SET_CHARS,br.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class to{constructor(){this.rsDecoder=new Dt(_e.DATA_MATRIX_FIELD_256)}decode(e){const n=new cr(e),i=n.getVersion(),l=n.readCodewords(),c=Uo.getDataBlocks(l,i);let u=0;for(let v of c)u+=v.getNumDataCodewords();const h=new Uint8Array(u),m=c.length;for(let v=0;v<m;v++){const N=c[v],O=N.getCodewords(),M=N.getNumDataCodewords();this.correctErrors(O,M);for(let U=0;U<M;U++)h[U*m+v]=O[U]}return br.decode(h)}correctErrors(e,n){const i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-n)}catch{throw new D}for(let l=0;l<n;l++)e[l]=i[l]}}class Xt{constructor(e){this.image=e,this.rectangleDetector=new Ge(this.image)}detect(){const e=this.rectangleDetector.detect();let n=this.detectSolid1(e);if(n=this.detectSolid2(n),n[3]=this.correctTopRight(n),!n[3])throw new ee;n=this.shiftToModuleCenter(n);const i=n[0],l=n[1],c=n[2],u=n[3];let h=this.transitionsBetween(i,u)+1,m=this.transitionsBetween(c,u)+1;(h&1)===1&&(h+=1),(m&1)===1&&(m+=1),4*h<7*m&&4*m<7*h&&(h=m=Math.max(h,m));let v=Xt.sampleGrid(this.image,i,l,c,u,h,m);return new zn(v,[i,l,c,u])}static shiftPoint(e,n,i){let l=(n.getX()-e.getX())/(i+1),c=(n.getY()-e.getY())/(i+1);return new Te(e.getX()+l,e.getY()+c)}static moveAway(e,n,i){let l=e.getX(),c=e.getY();return l<n?l-=1:l+=1,c<i?c-=1:c+=1,new Te(l,c)}detectSolid1(e){let n=e[0],i=e[1],l=e[3],c=e[2],u=this.transitionsBetween(n,i),h=this.transitionsBetween(i,l),m=this.transitionsBetween(l,c),v=this.transitionsBetween(c,n),N=u,O=[c,n,i,l];return N>h&&(N=h,O[0]=n,O[1]=i,O[2]=l,O[3]=c),N>m&&(N=m,O[0]=i,O[1]=l,O[2]=c,O[3]=n),N>v&&(O[0]=l,O[1]=c,O[2]=n,O[3]=i),O}detectSolid2(e){let n=e[0],i=e[1],l=e[2],c=e[3],u=this.transitionsBetween(n,c),h=Xt.shiftPoint(i,l,(u+1)*4),m=Xt.shiftPoint(l,i,(u+1)*4),v=this.transitionsBetween(h,n),N=this.transitionsBetween(m,c);return v<N?(e[0]=n,e[1]=i,e[2]=l,e[3]=c):(e[0]=i,e[1]=l,e[2]=c,e[3]=n),e}correctTopRight(e){let n=e[0],i=e[1],l=e[2],c=e[3],u=this.transitionsBetween(n,c),h=this.transitionsBetween(i,c),m=Xt.shiftPoint(n,i,(h+1)*4),v=Xt.shiftPoint(l,i,(u+1)*4);u=this.transitionsBetween(m,c),h=this.transitionsBetween(v,c);let N=new Te(c.getX()+(l.getX()-i.getX())/(u+1),c.getY()+(l.getY()-i.getY())/(u+1)),O=new Te(c.getX()+(n.getX()-i.getX())/(h+1),c.getY()+(n.getY()-i.getY())/(h+1));if(!this.isValid(N))return this.isValid(O)?O:null;if(!this.isValid(O))return N;let M=this.transitionsBetween(m,N)+this.transitionsBetween(v,N),U=this.transitionsBetween(m,O)+this.transitionsBetween(v,O);return M>U?N:O}shiftToModuleCenter(e){let n=e[0],i=e[1],l=e[2],c=e[3],u=this.transitionsBetween(n,c)+1,h=this.transitionsBetween(l,c)+1,m=Xt.shiftPoint(n,i,h*4),v=Xt.shiftPoint(l,i,u*4);u=this.transitionsBetween(m,c)+1,h=this.transitionsBetween(v,c)+1,(u&1)===1&&(u+=1),(h&1)===1&&(h+=1);let N=(n.getX()+i.getX()+l.getX()+c.getX())/4,O=(n.getY()+i.getY()+l.getY()+c.getY())/4;n=Xt.moveAway(n,N,O),i=Xt.moveAway(i,N,O),l=Xt.moveAway(l,N,O),c=Xt.moveAway(c,N,O);let M,U;return m=Xt.shiftPoint(n,i,h*4),m=Xt.shiftPoint(m,c,u*4),M=Xt.shiftPoint(i,n,h*4),M=Xt.shiftPoint(M,l,u*4),v=Xt.shiftPoint(l,c,h*4),v=Xt.shiftPoint(v,i,u*4),U=Xt.shiftPoint(c,l,h*4),U=Xt.shiftPoint(U,n,u*4),[m,M,v,U]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,n,i,l,c,u,h){return Ot.getInstance().sampleGrid(e,u,h,.5,.5,u-.5,.5,u-.5,h-.5,.5,h-.5,n.getX(),n.getY(),c.getX(),c.getY(),l.getX(),l.getY(),i.getX(),i.getY())}transitionsBetween(e,n){let i=Math.trunc(e.getX()),l=Math.trunc(e.getY()),c=Math.trunc(n.getX()),u=Math.trunc(n.getY()),h=Math.abs(u-l)>Math.abs(c-i);if(h){let K=i;i=l,l=K,K=c,c=u,u=K}let m=Math.abs(c-i),v=Math.abs(u-l),N=-m/2,O=l<u?1:-1,M=i<c?1:-1,U=0,G=this.image.get(h?l:i,h?i:l);for(let K=i,J=l;K!==c;K+=M){let oe=this.image.get(h?J:K,h?K:J);if(oe!==G&&(U++,G=oe),N+=v,N>0){if(J===u)break;J+=O,N-=m}}return U}}class Sr{constructor(){this.decoder=new to}decode(e,n=null){let i,l;if(n!=null&&n.has(ue.PURE_BARCODE)){const v=Sr.extractPureBits(e.getBlackMatrix());i=this.decoder.decode(v),l=Sr.NO_POINTS}else{const v=new Xt(e.getBlackMatrix()).detect();i=this.decoder.decode(v.getBits()),l=v.getPoints()}const c=i.getRawBytes(),u=new ze(i.getText(),c,8*c.length,l,de.DATA_MATRIX,B.currentTimeMillis()),h=i.getByteSegments();h!=null&&u.putMetadata(Fe.BYTE_SEGMENTS,h);const m=i.getECLevel();return m!=null&&u.putMetadata(Fe.ERROR_CORRECTION_LEVEL,m),u}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(n==null||i==null)throw new ee;const l=this.moduleSize(n,e);let c=n[1];const u=i[1];let h=n[0];const v=(i[0]-h+1)/l,N=(u-c+1)/l;if(v<=0||N<=0)throw new ee;const O=l/2;c+=O,h+=O;const M=new Ve(v,N);for(let U=0;U<N;U++){const G=c+U*l;for(let K=0;K<v;K++)e.get(h+K*l,G)&&M.set(K,U)}return M}static moduleSize(e,n){const i=n.getWidth();let l=e[0];const c=e[1];for(;l<i&&n.get(l,c);)l++;if(l===i)throw new ee;const u=l-e[0];if(u===0)throw new ee;return u}}Sr.NO_POINTS=[];class Mc extends Ae{constructor(e=500){super(new Sr,e)}}var Yi;(function(k){k[k.L=0]="L",k[k.M=1]="M",k[k.Q=2]="Q",k[k.H=3]="H"})(Yi||(Yi={}));class zt{constructor(e,n,i){this.value=e,this.stringValue=n,this.bits=i,zt.FOR_BITS.set(i,this),zt.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return zt.L;case"M":return zt.M;case"Q":return zt.Q;case"H":return zt.H;default:throw new S(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof zt))return!1;const n=e;return this.value===n.value}static forBits(e){if(e<0||e>=zt.FOR_BITS.size)throw new I;return zt.FOR_BITS.get(e)}}zt.FOR_BITS=new Map,zt.FOR_VALUE=new Map,zt.L=new zt(Yi.L,"L",1),zt.M=new zt(Yi.M,"M",0),zt.Q=new zt(Yi.Q,"Q",3),zt.H=new zt(Yi.H,"H",2);class In{constructor(e){this.errorCorrectionLevel=zt.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,n){return z.bitCount(e^n)}static decodeFormatInformation(e,n){const i=In.doDecodeFormatInformation(e,n);return i!==null?i:In.doDecodeFormatInformation(e^In.FORMAT_INFO_MASK_QR,n^In.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,n){let i=Number.MAX_SAFE_INTEGER,l=0;for(const c of In.FORMAT_INFO_DECODE_LOOKUP){const u=c[0];if(u===e||u===n)return new In(c[1]);let h=In.numBitsDiffering(e,u);h<i&&(l=c[1],i=h),e!==n&&(h=In.numBitsDiffering(n,u),h<i&&(l=c[1],i=h))}return i<=3?new In(l):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof In))return!1;const n=e;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask}}In.FORMAT_INFO_MASK_QR=21522,In.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ne{constructor(e,...n){this.ecCodewordsPerBlock=e,this.ecBlocks=n}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const n=this.ecBlocks;for(const i of n)e+=i.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class j{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class $e{constructor(e,n,...i){this.versionNumber=e,this.alignmentPatternCenters=n,this.ecBlocks=i;let l=0;const c=i[0].getECCodewordsPerBlock(),u=i[0].getECBlocks();for(const h of u)l+=h.getCount()*(h.getDataCodewords()+c);this.totalCodewords=l}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new q;try{return this.getVersionForNumber((e-17)/4)}catch{throw new q}}static getVersionForNumber(e){if(e<1||e>40)throw new I;return $e.VERSIONS[e-1]}static decodeVersionInformation(e){let n=Number.MAX_SAFE_INTEGER,i=0;for(let l=0;l<$e.VERSION_DECODE_INFO.length;l++){const c=$e.VERSION_DECODE_INFO[l];if(c===e)return $e.getVersionForNumber(l+7);const u=In.numBitsDiffering(e,c);u<n&&(i=l+7,n=u)}return n<=3?$e.getVersionForNumber(i):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),n=new Ve(e);n.setRegion(0,0,9,9),n.setRegion(e-8,0,8,9),n.setRegion(0,e-8,9,8);const i=this.alignmentPatternCenters.length;for(let l=0;l<i;l++){const c=this.alignmentPatternCenters[l]-2;for(let u=0;u<i;u++)l===0&&(u===0||u===i-1)||l===i-1&&u===0||n.setRegion(this.alignmentPatternCenters[u]-2,c,5,5)}return n.setRegion(6,9,1,e-17),n.setRegion(9,6,e-17,1),this.versionNumber>6&&(n.setRegion(e-11,0,3,6),n.setRegion(0,e-11,6,3)),n}toString(){return""+this.versionNumber}}$e.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),$e.VERSIONS=[new $e(1,new Int32Array(0),new ne(7,new j(1,19)),new ne(10,new j(1,16)),new ne(13,new j(1,13)),new ne(17,new j(1,9))),new $e(2,Int32Array.from([6,18]),new ne(10,new j(1,34)),new ne(16,new j(1,28)),new ne(22,new j(1,22)),new ne(28,new j(1,16))),new $e(3,Int32Array.from([6,22]),new ne(15,new j(1,55)),new ne(26,new j(1,44)),new ne(18,new j(2,17)),new ne(22,new j(2,13))),new $e(4,Int32Array.from([6,26]),new ne(20,new j(1,80)),new ne(18,new j(2,32)),new ne(26,new j(2,24)),new ne(16,new j(4,9))),new $e(5,Int32Array.from([6,30]),new ne(26,new j(1,108)),new ne(24,new j(2,43)),new ne(18,new j(2,15),new j(2,16)),new ne(22,new j(2,11),new j(2,12))),new $e(6,Int32Array.from([6,34]),new ne(18,new j(2,68)),new ne(16,new j(4,27)),new ne(24,new j(4,19)),new ne(28,new j(4,15))),new $e(7,Int32Array.from([6,22,38]),new ne(20,new j(2,78)),new ne(18,new j(4,31)),new ne(18,new j(2,14),new j(4,15)),new ne(26,new j(4,13),new j(1,14))),new $e(8,Int32Array.from([6,24,42]),new ne(24,new j(2,97)),new ne(22,new j(2,38),new j(2,39)),new ne(22,new j(4,18),new j(2,19)),new ne(26,new j(4,14),new j(2,15))),new $e(9,Int32Array.from([6,26,46]),new ne(30,new j(2,116)),new ne(22,new j(3,36),new j(2,37)),new ne(20,new j(4,16),new j(4,17)),new ne(24,new j(4,12),new j(4,13))),new $e(10,Int32Array.from([6,28,50]),new ne(18,new j(2,68),new j(2,69)),new ne(26,new j(4,43),new j(1,44)),new ne(24,new j(6,19),new j(2,20)),new ne(28,new j(6,15),new j(2,16))),new $e(11,Int32Array.from([6,30,54]),new ne(20,new j(4,81)),new ne(30,new j(1,50),new j(4,51)),new ne(28,new j(4,22),new j(4,23)),new ne(24,new j(3,12),new j(8,13))),new $e(12,Int32Array.from([6,32,58]),new ne(24,new j(2,92),new j(2,93)),new ne(22,new j(6,36),new j(2,37)),new ne(26,new j(4,20),new j(6,21)),new ne(28,new j(7,14),new j(4,15))),new $e(13,Int32Array.from([6,34,62]),new ne(26,new j(4,107)),new ne(22,new j(8,37),new j(1,38)),new ne(24,new j(8,20),new j(4,21)),new ne(22,new j(12,11),new j(4,12))),new $e(14,Int32Array.from([6,26,46,66]),new ne(30,new j(3,115),new j(1,116)),new ne(24,new j(4,40),new j(5,41)),new ne(20,new j(11,16),new j(5,17)),new ne(24,new j(11,12),new j(5,13))),new $e(15,Int32Array.from([6,26,48,70]),new ne(22,new j(5,87),new j(1,88)),new ne(24,new j(5,41),new j(5,42)),new ne(30,new j(5,24),new j(7,25)),new ne(24,new j(11,12),new j(7,13))),new $e(16,Int32Array.from([6,26,50,74]),new ne(24,new j(5,98),new j(1,99)),new ne(28,new j(7,45),new j(3,46)),new ne(24,new j(15,19),new j(2,20)),new ne(30,new j(3,15),new j(13,16))),new $e(17,Int32Array.from([6,30,54,78]),new ne(28,new j(1,107),new j(5,108)),new ne(28,new j(10,46),new j(1,47)),new ne(28,new j(1,22),new j(15,23)),new ne(28,new j(2,14),new j(17,15))),new $e(18,Int32Array.from([6,30,56,82]),new ne(30,new j(5,120),new j(1,121)),new ne(26,new j(9,43),new j(4,44)),new ne(28,new j(17,22),new j(1,23)),new ne(28,new j(2,14),new j(19,15))),new $e(19,Int32Array.from([6,30,58,86]),new ne(28,new j(3,113),new j(4,114)),new ne(26,new j(3,44),new j(11,45)),new ne(26,new j(17,21),new j(4,22)),new ne(26,new j(9,13),new j(16,14))),new $e(20,Int32Array.from([6,34,62,90]),new ne(28,new j(3,107),new j(5,108)),new ne(26,new j(3,41),new j(13,42)),new ne(30,new j(15,24),new j(5,25)),new ne(28,new j(15,15),new j(10,16))),new $e(21,Int32Array.from([6,28,50,72,94]),new ne(28,new j(4,116),new j(4,117)),new ne(26,new j(17,42)),new ne(28,new j(17,22),new j(6,23)),new ne(30,new j(19,16),new j(6,17))),new $e(22,Int32Array.from([6,26,50,74,98]),new ne(28,new j(2,111),new j(7,112)),new ne(28,new j(17,46)),new ne(30,new j(7,24),new j(16,25)),new ne(24,new j(34,13))),new $e(23,Int32Array.from([6,30,54,78,102]),new ne(30,new j(4,121),new j(5,122)),new ne(28,new j(4,47),new j(14,48)),new ne(30,new j(11,24),new j(14,25)),new ne(30,new j(16,15),new j(14,16))),new $e(24,Int32Array.from([6,28,54,80,106]),new ne(30,new j(6,117),new j(4,118)),new ne(28,new j(6,45),new j(14,46)),new ne(30,new j(11,24),new j(16,25)),new ne(30,new j(30,16),new j(2,17))),new $e(25,Int32Array.from([6,32,58,84,110]),new ne(26,new j(8,106),new j(4,107)),new ne(28,new j(8,47),new j(13,48)),new ne(30,new j(7,24),new j(22,25)),new ne(30,new j(22,15),new j(13,16))),new $e(26,Int32Array.from([6,30,58,86,114]),new ne(28,new j(10,114),new j(2,115)),new ne(28,new j(19,46),new j(4,47)),new ne(28,new j(28,22),new j(6,23)),new ne(30,new j(33,16),new j(4,17))),new $e(27,Int32Array.from([6,34,62,90,118]),new ne(30,new j(8,122),new j(4,123)),new ne(28,new j(22,45),new j(3,46)),new ne(30,new j(8,23),new j(26,24)),new ne(30,new j(12,15),new j(28,16))),new $e(28,Int32Array.from([6,26,50,74,98,122]),new ne(30,new j(3,117),new j(10,118)),new ne(28,new j(3,45),new j(23,46)),new ne(30,new j(4,24),new j(31,25)),new ne(30,new j(11,15),new j(31,16))),new $e(29,Int32Array.from([6,30,54,78,102,126]),new ne(30,new j(7,116),new j(7,117)),new ne(28,new j(21,45),new j(7,46)),new ne(30,new j(1,23),new j(37,24)),new ne(30,new j(19,15),new j(26,16))),new $e(30,Int32Array.from([6,26,52,78,104,130]),new ne(30,new j(5,115),new j(10,116)),new ne(28,new j(19,47),new j(10,48)),new ne(30,new j(15,24),new j(25,25)),new ne(30,new j(23,15),new j(25,16))),new $e(31,Int32Array.from([6,30,56,82,108,134]),new ne(30,new j(13,115),new j(3,116)),new ne(28,new j(2,46),new j(29,47)),new ne(30,new j(42,24),new j(1,25)),new ne(30,new j(23,15),new j(28,16))),new $e(32,Int32Array.from([6,34,60,86,112,138]),new ne(30,new j(17,115)),new ne(28,new j(10,46),new j(23,47)),new ne(30,new j(10,24),new j(35,25)),new ne(30,new j(19,15),new j(35,16))),new $e(33,Int32Array.from([6,30,58,86,114,142]),new ne(30,new j(17,115),new j(1,116)),new ne(28,new j(14,46),new j(21,47)),new ne(30,new j(29,24),new j(19,25)),new ne(30,new j(11,15),new j(46,16))),new $e(34,Int32Array.from([6,34,62,90,118,146]),new ne(30,new j(13,115),new j(6,116)),new ne(28,new j(14,46),new j(23,47)),new ne(30,new j(44,24),new j(7,25)),new ne(30,new j(59,16),new j(1,17))),new $e(35,Int32Array.from([6,30,54,78,102,126,150]),new ne(30,new j(12,121),new j(7,122)),new ne(28,new j(12,47),new j(26,48)),new ne(30,new j(39,24),new j(14,25)),new ne(30,new j(22,15),new j(41,16))),new $e(36,Int32Array.from([6,24,50,76,102,128,154]),new ne(30,new j(6,121),new j(14,122)),new ne(28,new j(6,47),new j(34,48)),new ne(30,new j(46,24),new j(10,25)),new ne(30,new j(2,15),new j(64,16))),new $e(37,Int32Array.from([6,28,54,80,106,132,158]),new ne(30,new j(17,122),new j(4,123)),new ne(28,new j(29,46),new j(14,47)),new ne(30,new j(49,24),new j(10,25)),new ne(30,new j(24,15),new j(46,16))),new $e(38,Int32Array.from([6,32,58,84,110,136,162]),new ne(30,new j(4,122),new j(18,123)),new ne(28,new j(13,46),new j(32,47)),new ne(30,new j(48,24),new j(14,25)),new ne(30,new j(42,15),new j(32,16))),new $e(39,Int32Array.from([6,26,54,82,110,138,166]),new ne(30,new j(20,117),new j(4,118)),new ne(28,new j(40,47),new j(7,48)),new ne(30,new j(43,24),new j(22,25)),new ne(30,new j(10,15),new j(67,16))),new $e(40,Int32Array.from([6,30,58,86,114,142,170]),new ne(30,new j(19,118),new j(6,119)),new ne(28,new j(18,47),new j(31,48)),new ne(30,new j(34,24),new j(34,25)),new ne(30,new j(20,15),new j(61,16)))];var dn;(function(k){k[k.DATA_MASK_000=0]="DATA_MASK_000",k[k.DATA_MASK_001=1]="DATA_MASK_001",k[k.DATA_MASK_010=2]="DATA_MASK_010",k[k.DATA_MASK_011=3]="DATA_MASK_011",k[k.DATA_MASK_100=4]="DATA_MASK_100",k[k.DATA_MASK_101=5]="DATA_MASK_101",k[k.DATA_MASK_110=6]="DATA_MASK_110",k[k.DATA_MASK_111=7]="DATA_MASK_111"})(dn||(dn={}));class wt{constructor(e,n){this.value=e,this.isMasked=n}unmaskBitMatrix(e,n){for(let i=0;i<n;i++)for(let l=0;l<n;l++)this.isMasked(i,l)&&e.flip(l,i)}}wt.values=new Map([[dn.DATA_MASK_000,new wt(dn.DATA_MASK_000,(k,e)=>(k+e&1)===0)],[dn.DATA_MASK_001,new wt(dn.DATA_MASK_001,(k,e)=>(k&1)===0)],[dn.DATA_MASK_010,new wt(dn.DATA_MASK_010,(k,e)=>e%3===0)],[dn.DATA_MASK_011,new wt(dn.DATA_MASK_011,(k,e)=>(k+e)%3===0)],[dn.DATA_MASK_100,new wt(dn.DATA_MASK_100,(k,e)=>(Math.floor(k/2)+Math.floor(e/3)&1)===0)],[dn.DATA_MASK_101,new wt(dn.DATA_MASK_101,(k,e)=>k*e%6===0)],[dn.DATA_MASK_110,new wt(dn.DATA_MASK_110,(k,e)=>k*e%6<3)],[dn.DATA_MASK_111,new wt(dn.DATA_MASK_111,(k,e)=>(k+e+k*e%3&1)===0)]]);class qa{constructor(e){const n=e.getHeight();if(n<21||(n&3)!==1)throw new q;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let c=0;c<6;c++)e=this.copyBit(c,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let c=5;c>=0;c--)e=this.copyBit(8,c,e);const n=this.bitMatrix.getHeight();let i=0;const l=n-7;for(let c=n-1;c>=l;c--)i=this.copyBit(8,c,i);for(let c=n-8;c<n;c++)i=this.copyBit(c,8,i);if(this.parsedFormatInfo=In.decodeFormatInformation(e,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new q}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),n=Math.floor((e-17)/4);if(n<=6)return $e.getVersionForNumber(n);let i=0;const l=e-11;for(let u=5;u>=0;u--)for(let h=e-9;h>=l;h--)i=this.copyBit(h,u,i);let c=$e.decodeVersionInformation(i);if(c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;i=0;for(let u=5;u>=0;u--)for(let h=e-9;h>=l;h--)i=this.copyBit(u,h,i);if(c=$e.decodeVersionInformation(i),c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;throw new q}copyBit(e,n,i){return(this.isMirror?this.bitMatrix.get(n,e):this.bitMatrix.get(e,n))?i<<1|1:i<<1}readCodewords(){const e=this.readFormatInformation(),n=this.readVersion(),i=wt.values.get(e.getDataMask()),l=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,l);const c=n.buildFunctionPattern();let u=!0;const h=new Uint8Array(n.getTotalCodewords());let m=0,v=0,N=0;for(let O=l-1;O>0;O-=2){O===6&&O--;for(let M=0;M<l;M++){const U=u?l-1-M:M;for(let G=0;G<2;G++)c.get(O-G,U)||(N++,v<<=1,this.bitMatrix.get(O-G,U)&&(v|=1),N===8&&(h[m++]=v,N=0,v=0))}u=!u}if(m!==n.getTotalCodewords())throw new q;return h}remask(){if(this.parsedFormatInfo===null)return;const e=wt.values[this.parsedFormatInfo.getDataMask()],n=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,n)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let n=0,i=e.getWidth();n<i;n++)for(let l=n+1,c=e.getHeight();l<c;l++)e.get(n,l)!==e.get(l,n)&&(e.flip(l,n),e.flip(n,l))}}class no{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n,i){if(e.length!==n.getTotalCodewords())throw new I;const l=n.getECBlocksForLevel(i);let c=0;const u=l.getECBlocks();for(const G of u)c+=G.getCount();const h=new Array(c);let m=0;for(const G of u)for(let K=0;K<G.getCount();K++){const J=G.getDataCodewords(),oe=l.getECCodewordsPerBlock()+J;h[m++]=new no(J,new Uint8Array(oe))}const v=h[0].codewords.length;let N=h.length-1;for(;N>=0&&h[N].codewords.length!==v;)N--;N++;const O=v-l.getECCodewordsPerBlock();let M=0;for(let G=0;G<O;G++)for(let K=0;K<m;K++)h[K].codewords[G]=e[M++];for(let G=N;G<m;G++)h[G].codewords[O]=e[M++];const U=h[0].codewords.length;for(let G=O;G<U;G++)for(let K=0;K<m;K++){const J=K<N?G:G+1;h[K].codewords[J]=e[M++]}return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var er;(function(k){k[k.TERMINATOR=0]="TERMINATOR",k[k.NUMERIC=1]="NUMERIC",k[k.ALPHANUMERIC=2]="ALPHANUMERIC",k[k.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",k[k.BYTE=4]="BYTE",k[k.ECI=5]="ECI",k[k.KANJI=6]="KANJI",k[k.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",k[k.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",k[k.HANZI=9]="HANZI"})(er||(er={}));class qe{constructor(e,n,i,l){this.value=e,this.stringValue=n,this.characterCountBitsForVersions=i,this.bits=l,qe.FOR_BITS.set(l,this),qe.FOR_VALUE.set(e,this)}static forBits(e){const n=qe.FOR_BITS.get(e);if(n===void 0)throw new I;return n}getCharacterCountBits(e){const n=e.getVersionNumber();let i;return n<=9?i=0:n<=26?i=1:i=2,this.characterCountBitsForVersions[i]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof qe))return!1;const n=e;return this.value===n.value}toString(){return this.stringValue}}qe.FOR_BITS=new Map,qe.FOR_VALUE=new Map,qe.TERMINATOR=new qe(er.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),qe.NUMERIC=new qe(er.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),qe.ALPHANUMERIC=new qe(er.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),qe.STRUCTURED_APPEND=new qe(er.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),qe.BYTE=new qe(er.BYTE,"BYTE",Int32Array.from([8,16,16]),4),qe.ECI=new qe(er.ECI,"ECI",Int32Array.from([0,0,0]),7),qe.KANJI=new qe(er.KANJI,"KANJI",Int32Array.from([8,10,12]),8),qe.FNC1_FIRST_POSITION=new qe(er.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),qe.FNC1_SECOND_POSITION=new qe(er.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),qe.HANZI=new qe(er.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Yt{static decode(e,n,i,l){const c=new Wo(e);let u=new Re;const h=new Array;let m=-1,v=-1;try{let N=null,O=!1,M;do{if(c.available()<4)M=qe.TERMINATOR;else{const U=c.readBits(4);M=qe.forBits(U)}switch(M){case qe.TERMINATOR:break;case qe.FNC1_FIRST_POSITION:case qe.FNC1_SECOND_POSITION:O=!0;break;case qe.STRUCTURED_APPEND:if(c.available()<16)throw new q;m=c.readBits(8),v=c.readBits(8);break;case qe.ECI:const U=Yt.parseECIValue(c);if(N=$.getCharacterSetECIByValue(U),N===null)throw new q;break;case qe.HANZI:const G=c.readBits(4),K=c.readBits(M.getCharacterCountBits(n));G===Yt.GB2312_SUBSET&&Yt.decodeHanziSegment(c,u,K);break;default:const J=c.readBits(M.getCharacterCountBits(n));switch(M){case qe.NUMERIC:Yt.decodeNumericSegment(c,u,J);break;case qe.ALPHANUMERIC:Yt.decodeAlphanumericSegment(c,u,J,O);break;case qe.BYTE:Yt.decodeByteSegment(c,u,J,N,h,l);break;case qe.KANJI:Yt.decodeKanjiSegment(c,u,J);break;default:throw new q}break}}while(M!==qe.TERMINATOR)}catch{throw new q}return new tt(e,u.toString(),h.length===0?null:h,i===null?null:i.toString(),m,v)}static decodeHanziSegment(e,n,i){if(i*13>e.available())throw new q;const l=new Uint8Array(2*i);let c=0;for(;i>0;){const u=e.readBits(13);let h=u/96<<8&4294967295|u%96;h<959?h+=41377:h+=42657,l[c]=h>>8&255,l[c+1]=h&255,c+=2,i--}try{n.append(Pe.decode(l,ke.GB2312))}catch(u){throw new q(u)}}static decodeKanjiSegment(e,n,i){if(i*13>e.available())throw new q;const l=new Uint8Array(2*i);let c=0;for(;i>0;){const u=e.readBits(13);let h=u/192<<8&4294967295|u%192;h<7936?h+=33088:h+=49472,l[c]=h>>8,l[c+1]=h,c+=2,i--}try{n.append(Pe.decode(l,ke.SHIFT_JIS))}catch(u){throw new q(u)}}static decodeByteSegment(e,n,i,l,c,u){if(8*i>e.available())throw new q;const h=new Uint8Array(i);for(let v=0;v<i;v++)h[v]=e.readBits(8);let m;l===null?m=ke.guessEncoding(h,u):m=l.getName();try{n.append(Pe.decode(h,m))}catch(v){throw new q(v)}c.push(h)}static toAlphaNumericChar(e){if(e>=Yt.ALPHANUMERIC_CHARS.length)throw new q;return Yt.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,n,i,l){const c=n.length();for(;i>1;){if(e.available()<11)throw new q;const u=e.readBits(11);n.append(Yt.toAlphaNumericChar(Math.floor(u/45))),n.append(Yt.toAlphaNumericChar(u%45)),i-=2}if(i===1){if(e.available()<6)throw new q;n.append(Yt.toAlphaNumericChar(e.readBits(6)))}if(l)for(let u=c;u<n.length();u++)n.charAt(u)==="%"&&(u<n.length()-1&&n.charAt(u+1)==="%"?n.deleteCharAt(u+1):n.setCharAt(u,""))}static decodeNumericSegment(e,n,i){for(;i>=3;){if(e.available()<10)throw new q;const l=e.readBits(10);if(l>=1e3)throw new q;n.append(Yt.toAlphaNumericChar(Math.floor(l/100))),n.append(Yt.toAlphaNumericChar(Math.floor(l/10)%10)),n.append(Yt.toAlphaNumericChar(l%10)),i-=3}if(i===2){if(e.available()<7)throw new q;const l=e.readBits(7);if(l>=100)throw new q;n.append(Yt.toAlphaNumericChar(Math.floor(l/10))),n.append(Yt.toAlphaNumericChar(l%10))}else if(i===1){if(e.available()<4)throw new q;const l=e.readBits(4);if(l>=10)throw new q;n.append(Yt.toAlphaNumericChar(l))}}static parseECIValue(e){const n=e.readBits(8);if(!(n&128))return n&127;if((n&192)===128){const i=e.readBits(8);return(n&63)<<8&4294967295|i}if((n&224)===192){const i=e.readBits(16);return(n&31)<<16&4294967295|i}throw new q}}Yt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Yt.GB2312_SUBSET=1;class Ho{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const n=e[0];e[0]=e[2],e[2]=n}}class Go{constructor(){this.rsDecoder=new Dt(_e.QR_CODE_FIELD_256)}decodeBooleanArray(e,n){return this.decodeBitMatrix(Ve.parseFromBooleanArray(e),n)}decodeBitMatrix(e,n){const i=new qa(e);let l=null;try{return this.decodeBitMatrixParser(i,n)}catch(c){l=c}try{i.remask(),i.setMirror(!0),i.readVersion(),i.readFormatInformation(),i.mirror();const c=this.decodeBitMatrixParser(i,n);return c.setOther(new Ho(!0)),c}catch(c){throw l!==null?l:c}}decodeBitMatrixParser(e,n){const i=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),c=e.readCodewords(),u=no.getDataBlocks(c,i,l);let h=0;for(const N of u)h+=N.getNumDataCodewords();const m=new Uint8Array(h);let v=0;for(const N of u){const O=N.getCodewords(),M=N.getNumDataCodewords();this.correctErrors(O,M);for(let U=0;U<M;U++)m[v++]=O[U]}return Yt.decode(m,i,l,n)}correctErrors(e,n){const i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-n)}catch{throw new D}for(let l=0;l<n;l++)e[l]=i[l]}}class Ki extends Te{constructor(e,n,i){super(e,n),this.estimatedModuleSize=i}aboutEquals(e,n,i){if(Math.abs(n-this.getY())<=e&&Math.abs(i-this.getX())<=e){const l=Math.abs(e-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(e,n,i){const l=(this.getX()+n)/2,c=(this.getY()+e)/2,u=(this.estimatedModuleSize+i)/2;return new Ki(l,c,u)}}class Tr{constructor(e,n,i,l,c,u,h){this.image=e,this.startX=n,this.startY=i,this.width=l,this.height=c,this.moduleSize=u,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,n=this.height,i=this.width,l=e+i,c=this.startY+n/2,u=new Int32Array(3),h=this.image;for(let m=0;m<n;m++){const v=c+(m&1?-Math.floor((m+1)/2):Math.floor((m+1)/2));u[0]=0,u[1]=0,u[2]=0;let N=e;for(;N<l&&!h.get(N,v);)N++;let O=0;for(;N<l;){if(h.get(N,v))if(O===1)u[1]++;else if(O===2){if(this.foundPatternCross(u)){const M=this.handlePossibleCenter(u,v,N);if(M!==null)return M}u[0]=u[2],u[1]=1,u[2]=0,O=1}else u[++O]++;else O===1&&O++,u[O]++;N++}if(this.foundPatternCross(u)){const M=this.handlePossibleCenter(u,v,l);if(M!==null)return M}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ee}static centerFromEnd(e,n){return n-e[2]-e[1]/2}foundPatternCross(e){const n=this.moduleSize,i=n/2;for(let l=0;l<3;l++)if(Math.abs(n-e[l])>=i)return!1;return!0}crossCheckVertical(e,n,i,l){const c=this.image,u=c.getHeight(),h=this.crossCheckStateCount;h[0]=0,h[1]=0,h[2]=0;let m=e;for(;m>=0&&c.get(n,m)&&h[1]<=i;)h[1]++,m--;if(m<0||h[1]>i)return NaN;for(;m>=0&&!c.get(n,m)&&h[0]<=i;)h[0]++,m--;if(h[0]>i)return NaN;for(m=e+1;m<u&&c.get(n,m)&&h[1]<=i;)h[1]++,m++;if(m===u||h[1]>i)return NaN;for(;m<u&&!c.get(n,m)&&h[2]<=i;)h[2]++,m++;if(h[2]>i)return NaN;const v=h[0]+h[1]+h[2];return 5*Math.abs(v-l)>=2*l?NaN:this.foundPatternCross(h)?Tr.centerFromEnd(h,m):NaN}handlePossibleCenter(e,n,i){const l=e[0]+e[1]+e[2],c=Tr.centerFromEnd(e,i),u=this.crossCheckVertical(n,c,2*e[1],l);if(!isNaN(u)){const h=(e[0]+e[1]+e[2])/3;for(const v of this.possibleCenters)if(v.aboutEquals(h,u,c))return v.combineEstimate(u,c,h);const m=new Ki(c,u,h);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null}}class Dr extends Te{constructor(e,n,i,l){super(e,n),this.estimatedModuleSize=i,this.count=l,l===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,n,i){if(Math.abs(n-this.getY())<=e&&Math.abs(i-this.getX())<=e){const l=Math.abs(e-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(e,n,i){const l=this.count+1,c=(this.count*this.getX()+n)/l,u=(this.count*this.getY()+e)/l,h=(this.count*this.estimatedModuleSize+i)/l;return new Dr(c,u,h,l)}}class li{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Qt{constructor(e,n){this.image=e,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const n=e!=null&&e.get(ue.TRY_HARDER)!==void 0,i=e!=null&&e.get(ue.PURE_BARCODE)!==void 0,l=this.image,c=l.getHeight(),u=l.getWidth();let h=Math.floor(3*c/(4*Qt.MAX_MODULES));(h<Qt.MIN_SKIP||n)&&(h=Qt.MIN_SKIP);let m=!1;const v=new Int32Array(5);for(let O=h-1;O<c&&!m;O+=h){v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0;let M=0;for(let U=0;U<u;U++)if(l.get(U,O))(M&1)===1&&M++,v[M]++;else if(M&1)v[M]++;else if(M===4)if(Qt.foundPatternCross(v)){if(this.handlePossibleCenter(v,O,U,i)===!0)if(h=2,this.hasSkipped===!0)m=this.haveMultiplyConfirmedCenters();else{const K=this.findRowSkip();K>v[2]&&(O+=K-v[2]-h,U=u-1)}else{v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,M=3;continue}M=0,v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0}else v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,M=3;else v[++M]++;Qt.foundPatternCross(v)&&this.handlePossibleCenter(v,O,u,i)===!0&&(h=v[0],this.hasSkipped&&(m=this.haveMultiplyConfirmedCenters()))}const N=this.selectBestPatterns();return Te.orderBestPatterns(N),new li(N)}static centerFromEnd(e,n){return n-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let n=0;for(let c=0;c<5;c++){const u=e[c];if(u===0)return!1;n+=u}if(n<7)return!1;const i=n/7,l=i/2;return Math.abs(i-e[0])<l&&Math.abs(i-e[1])<l&&Math.abs(3*i-e[2])<3*l&&Math.abs(i-e[3])<l&&Math.abs(i-e[4])<l}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,n,i,l){const c=this.getCrossCheckStateCount();let u=0;const h=this.image;for(;e>=u&&n>=u&&h.get(n-u,e-u);)c[2]++,u++;if(e<u||n<u)return!1;for(;e>=u&&n>=u&&!h.get(n-u,e-u)&&c[1]<=i;)c[1]++,u++;if(e<u||n<u||c[1]>i)return!1;for(;e>=u&&n>=u&&h.get(n-u,e-u)&&c[0]<=i;)c[0]++,u++;if(c[0]>i)return!1;const m=h.getHeight(),v=h.getWidth();for(u=1;e+u<m&&n+u<v&&h.get(n+u,e+u);)c[2]++,u++;if(e+u>=m||n+u>=v)return!1;for(;e+u<m&&n+u<v&&!h.get(n+u,e+u)&&c[3]<i;)c[3]++,u++;if(e+u>=m||n+u>=v||c[3]>=i)return!1;for(;e+u<m&&n+u<v&&h.get(n+u,e+u)&&c[4]<i;)c[4]++,u++;if(c[4]>=i)return!1;const N=c[0]+c[1]+c[2]+c[3]+c[4];return Math.abs(N-l)<2*l&&Qt.foundPatternCross(c)}crossCheckVertical(e,n,i,l){const c=this.image,u=c.getHeight(),h=this.getCrossCheckStateCount();let m=e;for(;m>=0&&c.get(n,m);)h[2]++,m--;if(m<0)return NaN;for(;m>=0&&!c.get(n,m)&&h[1]<=i;)h[1]++,m--;if(m<0||h[1]>i)return NaN;for(;m>=0&&c.get(n,m)&&h[0]<=i;)h[0]++,m--;if(h[0]>i)return NaN;for(m=e+1;m<u&&c.get(n,m);)h[2]++,m++;if(m===u)return NaN;for(;m<u&&!c.get(n,m)&&h[3]<i;)h[3]++,m++;if(m===u||h[3]>=i)return NaN;for(;m<u&&c.get(n,m)&&h[4]<i;)h[4]++,m++;if(h[4]>=i)return NaN;const v=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(v-l)>=2*l?NaN:Qt.foundPatternCross(h)?Qt.centerFromEnd(h,m):NaN}crossCheckHorizontal(e,n,i,l){const c=this.image,u=c.getWidth(),h=this.getCrossCheckStateCount();let m=e;for(;m>=0&&c.get(m,n);)h[2]++,m--;if(m<0)return NaN;for(;m>=0&&!c.get(m,n)&&h[1]<=i;)h[1]++,m--;if(m<0||h[1]>i)return NaN;for(;m>=0&&c.get(m,n)&&h[0]<=i;)h[0]++,m--;if(h[0]>i)return NaN;for(m=e+1;m<u&&c.get(m,n);)h[2]++,m++;if(m===u)return NaN;for(;m<u&&!c.get(m,n)&&h[3]<i;)h[3]++,m++;if(m===u||h[3]>=i)return NaN;for(;m<u&&c.get(m,n)&&h[4]<i;)h[4]++,m++;if(h[4]>=i)return NaN;const v=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(v-l)>=l?NaN:Qt.foundPatternCross(h)?Qt.centerFromEnd(h,m):NaN}handlePossibleCenter(e,n,i,l){const c=e[0]+e[1]+e[2]+e[3]+e[4];let u=Qt.centerFromEnd(e,i),h=this.crossCheckVertical(n,Math.floor(u),e[2],c);if(!isNaN(h)&&(u=this.crossCheckHorizontal(Math.floor(u),Math.floor(h),e[2],c),!isNaN(u)&&(!l||this.crossCheckDiagonal(Math.floor(h),Math.floor(u),e[2],c)))){const m=c/7;let v=!1;const N=this.possibleCenters;for(let O=0,M=N.length;O<M;O++){const U=N[O];if(U.aboutEquals(m,h,u)){N[O]=U.combineEstimate(h,u,m),v=!0;break}}if(!v){const O=new Dr(u,h,m);N.push(O),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(O)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let n=null;for(const i of this.possibleCenters)if(i.getCount()>=Qt.CENTER_QUORUM)if(n==null)n=i;else return this.hasSkipped=!0,Math.floor((Math.abs(n.getX()-i.getX())-Math.abs(n.getY()-i.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,n=0;const i=this.possibleCenters.length;for(const u of this.possibleCenters)u.getCount()>=Qt.CENTER_QUORUM&&(e++,n+=u.getEstimatedModuleSize());if(e<3)return!1;const l=n/i;let c=0;for(const u of this.possibleCenters)c+=Math.abs(u.getEstimatedModuleSize()-l);return c<=.05*n}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new ee;const n=this.possibleCenters;let i;if(e>3){let l=0,c=0;for(const m of this.possibleCenters){const v=m.getEstimatedModuleSize();l+=v,c+=v*v}i=l/e;let u=Math.sqrt(c/e-i*i);n.sort((m,v)=>{const N=Math.abs(v.getEstimatedModuleSize()-i),O=Math.abs(m.getEstimatedModuleSize()-i);return N<O?-1:N>O?1:0});const h=Math.max(.2*i,u);for(let m=0;m<n.length&&n.length>3;m++){const v=n[m];Math.abs(v.getEstimatedModuleSize()-i)>h&&(n.splice(m,1),m--)}}if(n.length>3){let l=0;for(const c of n)l+=c.getEstimatedModuleSize();i=l/n.length,n.sort((c,u)=>{if(u.getCount()===c.getCount()){const h=Math.abs(u.getEstimatedModuleSize()-i),m=Math.abs(c.getEstimatedModuleSize()-i);return h<m?1:h>m?-1:0}else return u.getCount()-c.getCount()}),n.splice(3)}return[n[0],n[1],n[2]]}}Qt.CENTER_QUORUM=2,Qt.MIN_SKIP=3,Qt.MAX_MODULES=57;class Zr{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(ue.NEED_RESULT_POINT_CALLBACK);const i=new Qt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(i)}processFinderPatternInfo(e){const n=e.getTopLeft(),i=e.getTopRight(),l=e.getBottomLeft(),c=this.calculateModuleSize(n,i,l);if(c<1)throw new ee("No pattern found in proccess finder.");const u=Zr.computeDimension(n,i,l,c),h=$e.getProvisionalVersionForDimension(u),m=h.getDimensionForVersion()-7;let v=null;if(h.getAlignmentPatternCenters().length>0){const U=i.getX()-n.getX()+l.getX(),G=i.getY()-n.getY()+l.getY(),K=1-3/m,J=Math.floor(n.getX()+K*(U-n.getX())),oe=Math.floor(n.getY()+K*(G-n.getY()));for(let Ee=4;Ee<=16;Ee<<=1)try{v=this.findAlignmentInRegion(c,J,oe,Ee);break}catch(be){if(!(be instanceof ee))throw be}}const N=Zr.createTransform(n,i,l,v,u),O=Zr.sampleGrid(this.image,N,u);let M;return v===null?M=[l,n,i]:M=[l,n,i,v],new zn(O,M)}static createTransform(e,n,i,l,c){const u=c-3.5;let h,m,v,N;return l!==null?(h=l.getX(),m=l.getY(),v=u-3,N=v):(h=n.getX()-e.getX()+i.getX(),m=n.getY()-e.getY()+i.getY(),v=u,N=u),gt.quadrilateralToQuadrilateral(3.5,3.5,u,3.5,v,N,3.5,u,e.getX(),e.getY(),n.getX(),n.getY(),h,m,i.getX(),i.getY())}static sampleGrid(e,n,i){return Ot.getInstance().sampleGridWithTransform(e,i,i,n)}static computeDimension(e,n,i,l){const c=pt.round(Te.distance(e,n)/l),u=pt.round(Te.distance(e,i)/l);let h=Math.floor((c+u)/2)+7;switch(h&3){case 0:h++;break;case 2:h--;break;case 3:throw new ee("Dimensions could be not found.")}return h}calculateModuleSize(e,n,i){return(this.calculateModuleSizeOneWay(e,n)+this.calculateModuleSizeOneWay(e,i))/2}calculateModuleSizeOneWay(e,n){const i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(n.getX()),Math.floor(n.getY())),l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(i)?l/7:isNaN(l)?i/7:(i+l)/14}sizeOfBlackWhiteBlackRunBothWays(e,n,i,l){let c=this.sizeOfBlackWhiteBlackRun(e,n,i,l),u=1,h=e-(i-e);h<0?(u=e/(e-h),h=0):h>=this.image.getWidth()&&(u=(this.image.getWidth()-1-e)/(h-e),h=this.image.getWidth()-1);let m=Math.floor(n-(l-n)*u);return u=1,m<0?(u=n/(n-m),m=0):m>=this.image.getHeight()&&(u=(this.image.getHeight()-1-n)/(m-n),m=this.image.getHeight()-1),h=Math.floor(e+(h-e)*u),c+=this.sizeOfBlackWhiteBlackRun(e,n,h,m),c-1}sizeOfBlackWhiteBlackRun(e,n,i,l){const c=Math.abs(l-n)>Math.abs(i-e);if(c){let U=e;e=n,n=U,U=i,i=l,l=U}const u=Math.abs(i-e),h=Math.abs(l-n);let m=-u/2;const v=e<i?1:-1,N=n<l?1:-1;let O=0;const M=i+v;for(let U=e,G=n;U!==M;U+=v){const K=c?G:U,J=c?U:G;if(O===1===this.image.get(K,J)){if(O===2)return pt.distance(U,G,e,n);O++}if(m+=h,m>0){if(G===l)break;G+=N,m-=u}}return O===2?pt.distance(i+v,l,e,n):NaN}findAlignmentInRegion(e,n,i,l){const c=Math.floor(l*e),u=Math.max(0,n-c),h=Math.min(this.image.getWidth()-1,n+c);if(h-u<e*3)throw new ee("Alignment top exceeds estimated module size.");const m=Math.max(0,i-c),v=Math.min(this.image.getHeight()-1,i+c);if(v-m<e*3)throw new ee("Alignment bottom exceeds estimated module size.");return new Tr(this.image,u,m,h-u,v-m,e,this.resultPointCallback).find()}}class Hn{constructor(){this.decoder=new Go}getDecoder(){return this.decoder}decode(e,n){let i,l;if(n!=null&&n.get(ue.PURE_BARCODE)!==void 0){const m=Hn.extractPureBits(e.getBlackMatrix());i=this.decoder.decodeBitMatrix(m,n),l=Hn.NO_POINTS}else{const m=new Zr(e.getBlackMatrix()).detect(n);i=this.decoder.decodeBitMatrix(m.getBits(),n),l=m.getPoints()}i.getOther()instanceof Ho&&i.getOther().applyMirroredCorrection(l);const c=new ze(i.getText(),i.getRawBytes(),void 0,l,de.QR_CODE,void 0),u=i.getByteSegments();u!==null&&c.putMetadata(Fe.BYTE_SEGMENTS,u);const h=i.getECLevel();return h!==null&&c.putMetadata(Fe.ERROR_CORRECTION_LEVEL,h),i.hasStructuredAppend()&&(c.putMetadata(Fe.STRUCTURED_APPEND_SEQUENCE,i.getStructuredAppendSequenceNumber()),c.putMetadata(Fe.STRUCTURED_APPEND_PARITY,i.getStructuredAppendParity())),c}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(n===null||i===null)throw new ee;const l=this.moduleSize(n,e);let c=n[1],u=i[1],h=n[0],m=i[0];if(h>=m||c>=u)throw new ee;if(u-c!==m-h&&(m=h+(u-c),m>=e.getWidth()))throw new ee;const v=Math.round((m-h+1)/l),N=Math.round((u-c+1)/l);if(v<=0||N<=0)throw new ee;if(N!==v)throw new ee;const O=Math.floor(l/2);c+=O,h+=O;const M=h+Math.floor((v-1)*l)-m;if(M>0){if(M>O)throw new ee;h-=M}const U=c+Math.floor((N-1)*l)-u;if(U>0){if(U>O)throw new ee;c-=U}const G=new Ve(v,N);for(let K=0;K<N;K++){const J=c+Math.floor(K*l);for(let oe=0;oe<v;oe++)e.get(h+Math.floor(oe*l),J)&&G.set(oe,K)}return G}static moduleSize(e,n){const i=n.getHeight(),l=n.getWidth();let c=e[0],u=e[1],h=!0,m=0;for(;c<l&&u<i;){if(h!==n.get(c,u)){if(++m===5)break;h=!h}c++,u++}if(c===l||u===i)throw new ee;return(c-e[0])/7}}Hn.NO_POINTS=new Array;class ot{PDF417Common(){}static getBitCountSum(e){return pt.sum(e)}static toIntArray(e){if(e==null||!e.length)return ot.EMPTY_INT_ARRAY;const n=new Int32Array(e.length);let i=0;for(const l of e)n[i++]=l;return n}static getCodeword(e){const n=W.binarySearch(ot.SYMBOL_TABLE,e&262143);return n<0?-1:(ot.CODEWORD_TABLE[n]-1)%ot.NUMBER_OF_CODEWORDS}}ot.NUMBER_OF_CODEWORDS=929,ot.MAX_CODEWORDS_IN_BARCODE=ot.NUMBER_OF_CODEWORDS-1,ot.MIN_ROWS_IN_BARCODE=3,ot.MAX_ROWS_IN_BARCODE=90,ot.MODULES_IN_CODEWORD=17,ot.MODULES_IN_STOP_PATTERN=18,ot.BARS_IN_MODULE=8,ot.EMPTY_INT_ARRAY=new Int32Array([]),ot.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ot.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Qa{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class dt{static detectMultiple(e,n,i){let l=e.getBlackMatrix(),c=dt.detect(i,l);return c.length||(l=l.clone(),l.rotate180(),c=dt.detect(i,l)),new Qa(l,c)}static detect(e,n){const i=new Array;let l=0,c=0,u=!1;for(;l<n.getHeight();){const h=dt.findVertices(n,l,c);if(h[0]==null&&h[3]==null){if(!u)break;u=!1,c=0;for(const m of i)m[1]!=null&&(l=Math.trunc(Math.max(l,m[1].getY()))),m[3]!=null&&(l=Math.max(l,Math.trunc(m[3].getY())));l+=dt.ROW_STEP;continue}if(u=!0,i.push(h),!e)break;h[2]!=null?(c=Math.trunc(h[2].getX()),l=Math.trunc(h[2].getY())):(c=Math.trunc(h[4].getX()),l=Math.trunc(h[4].getY()))}return i}static findVertices(e,n,i){const l=e.getHeight(),c=e.getWidth(),u=new Array(8);return dt.copyToResult(u,dt.findRowsWithPattern(e,l,c,n,i,dt.START_PATTERN),dt.INDEXES_START_PATTERN),u[4]!=null&&(i=Math.trunc(u[4].getX()),n=Math.trunc(u[4].getY())),dt.copyToResult(u,dt.findRowsWithPattern(e,l,c,n,i,dt.STOP_PATTERN),dt.INDEXES_STOP_PATTERN),u}static copyToResult(e,n,i){for(let l=0;l<i.length;l++)e[i[l]]=n[l]}static findRowsWithPattern(e,n,i,l,c,u){const h=new Array(4);let m=!1;const v=new Int32Array(u.length);for(;l<n;l+=dt.ROW_STEP){let O=dt.findGuardPattern(e,c,l,i,!1,u,v);if(O!=null){for(;l>0;){const M=dt.findGuardPattern(e,c,--l,i,!1,u,v);if(M!=null)O=M;else{l++;break}}h[0]=new Te(O[0],l),h[1]=new Te(O[1],l),m=!0;break}}let N=l+1;if(m){let O=0,M=Int32Array.from([Math.trunc(h[0].getX()),Math.trunc(h[1].getX())]);for(;N<n;N++){const U=dt.findGuardPattern(e,M[0],N,i,!1,u,v);if(U!=null&&Math.abs(M[0]-U[0])<dt.MAX_PATTERN_DRIFT&&Math.abs(M[1]-U[1])<dt.MAX_PATTERN_DRIFT)M=U,O=0;else{if(O>dt.SKIPPED_ROW_COUNT_MAX)break;O++}}N-=O+1,h[2]=new Te(M[0],N),h[3]=new Te(M[1],N)}return N-l<dt.BARCODE_MIN_HEIGHT&&W.fill(h,null),h}static findGuardPattern(e,n,i,l,c,u,h){W.fillWithin(h,0,h.length,0);let m=n,v=0;for(;e.get(m,i)&&m>0&&v++<dt.MAX_PIXEL_DRIFT;)m--;let N=m,O=0,M=u.length;for(let U=c;N<l;N++)if(e.get(N,i)!==U)h[O]++;else{if(O===M-1){if(dt.patternMatchVariance(h,u,dt.MAX_INDIVIDUAL_VARIANCE)<dt.MAX_AVG_VARIANCE)return new Int32Array([m,N]);m+=h[0]+h[1],B.arraycopy(h,2,h,0,O-1),h[O-1]=0,h[O]=0,O--}else O++;h[O]=1,U=!U}return O===M-1&&dt.patternMatchVariance(h,u,dt.MAX_INDIVIDUAL_VARIANCE)<dt.MAX_AVG_VARIANCE?new Int32Array([m,N-1]):null}static patternMatchVariance(e,n,i){let l=e.length,c=0,u=0;for(let v=0;v<l;v++)c+=e[v],u+=n[v];if(c<u)return 1/0;let h=c/u;i*=h;let m=0;for(let v=0;v<l;v++){let N=e[v],O=n[v]*h,M=N>O?N-O:O-N;if(M>i)return 1/0;m+=M}return m/c}}dt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),dt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),dt.MAX_AVG_VARIANCE=.42,dt.MAX_INDIVIDUAL_VARIANCE=.8,dt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),dt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),dt.MAX_PIXEL_DRIFT=3,dt.MAX_PATTERN_DRIFT=5,dt.SKIPPED_ROW_COUNT_MAX=25,dt.ROW_STEP=5,dt.BARCODE_MIN_HEIGHT=10;class Nn{constructor(e,n){if(n.length===0)throw new I;this.field=e;let i=n.length;if(i>1&&n[0]===0){let l=1;for(;l<i&&n[l]===0;)l++;l===i?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(i-l),B.arraycopy(n,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let l=0;for(let c of this.coefficients)l=this.field.add(l,c);return l}let n=this.coefficients[0],i=this.coefficients.length;for(let l=1;l<i;l++)n=this.field.add(this.field.multiply(e,n),this.coefficients[l]);return n}add(e){if(!this.field.equals(e.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,i=e.coefficients;if(n.length>i.length){let u=n;n=i,i=u}let l=new Int32Array(i.length),c=i.length-n.length;B.arraycopy(i,0,l,0,c);for(let u=c;u<i.length;u++)l[u]=this.field.add(n[u-c],i[u]);return new Nn(this.field,l)}subtract(e){if(!this.field.equals(e.field))throw new I("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof Nn?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new Nn(this.field,new Int32Array([0]));let n=this.coefficients,i=n.length,l=e.coefficients,c=l.length,u=new Int32Array(i+c-1);for(let h=0;h<i;h++){let m=n[h];for(let v=0;v<c;v++)u[h+v]=this.field.add(u[h+v],this.field.multiply(m,l[v]))}return new Nn(this.field,u)}negative(){let e=this.coefficients.length,n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=this.field.subtract(0,this.coefficients[i]);return new Nn(this.field,n)}multiplyScalar(e){if(e===0)return new Nn(this.field,new Int32Array([0]));if(e===1)return this;let n=this.coefficients.length,i=new Int32Array(n);for(let l=0;l<n;l++)i[l]=this.field.multiply(this.coefficients[l],e);return new Nn(this.field,i)}multiplyByMonomial(e,n){if(e<0)throw new I;if(n===0)return new Nn(this.field,new Int32Array([0]));let i=this.coefficients.length,l=new Int32Array(i+e);for(let c=0;c<i;c++)l[c]=this.field.multiply(this.coefficients[c],n);return new Nn(this.field,l)}toString(){let e=new Re;for(let n=this.getDegree();n>=0;n--){let i=this.getCoefficient(n);i!==0&&(i<0?(e.append(" - "),i=-i):e.length()>0&&e.append(" + "),(n===0||i!==1)&&e.append(i),n!==0&&(n===1?e.append("x"):(e.append("x^"),e.append(n))))}return e.toString()}}class Ja{add(e,n){return(e+n)%this.modulus}subtract(e,n){return(this.modulus+e-n)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new I;return this.logTable[e]}inverse(e){if(e===0)throw new at;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class Zi extends Ja{constructor(e,n){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let i=1;for(let l=0;l<e;l++)this.expTable[l]=i,i=i*n%e;for(let l=0;l<e-1;l++)this.logTable[this.expTable[l]]=l;this.zero=new Nn(this,new Int32Array([0])),this.one=new Nn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new I;if(n===0)return this.zero;let i=new Int32Array(e+1);return i[0]=n,new Nn(this,i)}}Zi.PDF417_GF=new Zi(ot.NUMBER_OF_CODEWORDS,3);class Xo{constructor(){this.field=Zi.PDF417_GF}decode(e,n,i){let l=new Nn(this.field,e),c=new Int32Array(n),u=!1;for(let G=n;G>0;G--){let K=l.evaluateAt(this.field.exp(G));c[n-G]=K,K!==0&&(u=!0)}if(!u)return 0;let h=this.field.getOne();if(i!=null)for(const G of i){let K=this.field.exp(e.length-1-G),J=new Nn(this.field,new Int32Array([this.field.subtract(0,K),1]));h=h.multiply(J)}let m=new Nn(this.field,c),v=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),m,n),N=v[0],O=v[1],M=this.findErrorLocations(N),U=this.findErrorMagnitudes(O,N,M);for(let G=0;G<M.length;G++){let K=e.length-1-this.field.log(M[G]);if(K<0)throw D.getChecksumInstance();e[K]=this.field.subtract(e[K],U[G])}return M.length}runEuclideanAlgorithm(e,n,i){if(e.getDegree()<n.getDegree()){let M=e;e=n,n=M}let l=e,c=n,u=this.field.getZero(),h=this.field.getOne();for(;c.getDegree()>=Math.round(i/2);){let M=l,U=u;if(l=c,u=h,l.isZero())throw D.getChecksumInstance();c=M;let G=this.field.getZero(),K=l.getCoefficient(l.getDegree()),J=this.field.inverse(K);for(;c.getDegree()>=l.getDegree()&&!c.isZero();){let oe=c.getDegree()-l.getDegree(),Ee=this.field.multiply(c.getCoefficient(c.getDegree()),J);G=G.add(this.field.buildMonomial(oe,Ee)),c=c.subtract(l.multiplyByMonomial(oe,Ee))}h=G.multiply(u).subtract(U).negative()}let m=h.getCoefficient(0);if(m===0)throw D.getChecksumInstance();let v=this.field.inverse(m),N=h.multiply(v),O=c.multiply(v);return[N,O]}findErrorLocations(e){let n=e.getDegree(),i=new Int32Array(n),l=0;for(let c=1;c<this.field.getSize()&&l<n;c++)e.evaluateAt(c)===0&&(i[l]=this.field.inverse(c),l++);if(l!==n)throw D.getChecksumInstance();return i}findErrorMagnitudes(e,n,i){let l=n.getDegree(),c=new Int32Array(l);for(let v=1;v<=l;v++)c[l-v]=this.field.multiply(v,n.getCoefficient(v));let u=new Nn(this.field,c),h=i.length,m=new Int32Array(h);for(let v=0;v<h;v++){let N=this.field.inverse(i[v]),O=this.field.subtract(0,e.evaluateAt(N)),M=this.field.inverse(u.evaluateAt(N));m[v]=this.field.multiply(O,M)}return m}}class Ai{constructor(e,n,i,l,c){e instanceof Ai?this.constructor_2(e):this.constructor_1(e,n,i,l,c)}constructor_1(e,n,i,l,c){const u=n==null||i==null,h=l==null||c==null;if(u&&h)throw new ee;u?(n=new Te(0,l.getY()),i=new Te(0,c.getY())):h&&(l=new Te(e.getWidth()-1,n.getY()),c=new Te(e.getWidth()-1,i.getY())),this.image=e,this.topLeft=n,this.bottomLeft=i,this.topRight=l,this.bottomRight=c,this.minX=Math.trunc(Math.min(n.getX(),i.getX())),this.maxX=Math.trunc(Math.max(l.getX(),c.getX())),this.minY=Math.trunc(Math.min(n.getY(),l.getY())),this.maxY=Math.trunc(Math.max(i.getY(),c.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,n){return e==null?n:n==null?e:new Ai(e.image,e.topLeft,e.bottomLeft,n.topRight,n.bottomRight)}addMissingRows(e,n,i){let l=this.topLeft,c=this.bottomLeft,u=this.topRight,h=this.bottomRight;if(e>0){let m=i?this.topLeft:this.topRight,v=Math.trunc(m.getY()-e);v<0&&(v=0);let N=new Te(m.getX(),v);i?l=N:u=N}if(n>0){let m=i?this.bottomLeft:this.bottomRight,v=Math.trunc(m.getY()+n);v>=this.image.getHeight()&&(v=this.image.getHeight()-1);let N=new Te(m.getX(),v);i?c=N:h=N}return new Ai(this.image,l,c,u,h)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ss{constructor(e,n,i,l){this.columnCount=e,this.errorCorrectionLevel=l,this.rowCountUpperPart=n,this.rowCountLowerPart=i,this.rowCount=n+i}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class $r{constructor(){this.buffer=""}static form(e,n){let i=-1;function l(u,h,m,v,N,O){if(u==="%%")return"%";if(n[++i]===void 0)return;u=v?parseInt(v.substr(1)):void 0;let M=N?parseInt(N.substr(1)):void 0,U;switch(O){case"s":U=n[i];break;case"c":U=n[i][0];break;case"f":U=parseFloat(n[i]).toFixed(u);break;case"p":U=parseFloat(n[i]).toPrecision(u);break;case"e":U=parseFloat(n[i]).toExponential(u);break;case"x":U=parseInt(n[i]).toString(M||16);break;case"d":U=parseFloat(parseInt(n[i],M||10).toPrecision(u)).toFixed(0);break}U=typeof U=="object"?JSON.stringify(U):(+U).toString(M);let G=parseInt(m),K=m&&m[0]+""=="0"?"0":" ";for(;U.length<G;)U=h!==void 0?U+K:K+U;return U}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(c,l)}format(e,...n){this.buffer+=$r.form(e,n)}toString(){return this.buffer}}class Lr{constructor(e){this.boundingBox=new Ai(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let n=this.getCodeword(e);if(n!=null)return n;for(let i=1;i<Lr.MAX_NEARBY_DISTANCE;i++){let l=this.imageRowToCodewordIndex(e)-i;if(l>=0&&(n=this.codewords[l],n!=null)||(l=this.imageRowToCodewordIndex(e)+i,l<this.codewords.length&&(n=this.codewords[l],n!=null)))return n}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,n){this.codewords[this.imageRowToCodewordIndex(e)]=n}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new $r;let n=0;for(const i of this.codewords){if(i==null){e.format("%3d:    |   %n",n++);continue}e.format("%3d: %3d|%3d%n",n++,i.getRowNumber(),i.getValue())}return e.toString()}}Lr.MAX_NEARBY_DISTANCE=5;class ci{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let n=this.values.get(e);n==null&&(n=0),n++,this.values.set(e,n)}getValue(){let e=-1,n=new Array;for(const[i,l]of this.values.entries()){const c={getKey:()=>i,getValue:()=>l};c.getValue()>e?(e=c.getValue(),n=[],n.push(c.getKey())):c.getValue()===e&&n.push(c.getKey())}return ot.toIntArray(n)}getConfidence(e){return this.values.get(e)}}class el extends Lr{constructor(e,n){super(e),this._isLeft=n}setRowNumbers(){for(let e of this.getCodewords())e!=null&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,e);let i=this.getBoundingBox(),l=this._isLeft?i.getTopLeft():i.getTopRight(),c=this._isLeft?i.getBottomLeft():i.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(l.getY())),h=this.imageRowToCodewordIndex(Math.trunc(c.getY())),m=-1,v=1,N=0;for(let O=u;O<h;O++){if(n[O]==null)continue;let M=n[O],U=M.getRowNumber()-m;if(U===0)N++;else if(U===1)v=Math.max(v,N),N=1,m=M.getRowNumber();else if(U<0||M.getRowNumber()>=e.getRowCount()||U>O)n[O]=null;else{let G;v>2?G=(v-2)*U:G=U;let K=G>=O;for(let J=1;J<=G&&!K;J++)K=n[O-J]!=null;K?n[O]=null:(m=M.getRowNumber(),N=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let n=new Int32Array(e.getRowCount());for(let i of this.getCodewords())if(i!=null){let l=i.getRowNumber();if(l>=n.length)continue;n[l]++}return n}adjustIncompleteIndicatorColumnRowNumbers(e){let n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),l=this._isLeft?n.getBottomLeft():n.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=this.imageRowToCodewordIndex(Math.trunc(l.getY())),h=this.getCodewords(),m=-1;for(let v=c;v<u;v++){if(h[v]==null)continue;let N=h[v];N.setRowNumberAsRowIndicatorColumn();let O=N.getRowNumber()-m;O===0||(O===1?m=N.getRowNumber():N.getRowNumber()>=e.getRowCount()?h[v]=null:m=N.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),n=new ci,i=new ci,l=new ci,c=new ci;for(let h of e){if(h==null)continue;h.setRowNumberAsRowIndicatorColumn();let m=h.getValue()%30,v=h.getRowNumber();switch(this._isLeft||(v+=2),v%3){case 0:i.setValue(m*3+1);break;case 1:c.setValue(m/3),l.setValue(m%3);break;case 2:n.setValue(m+1);break}}if(n.getValue().length===0||i.getValue().length===0||l.getValue().length===0||c.getValue().length===0||n.getValue()[0]<1||i.getValue()[0]+l.getValue()[0]<ot.MIN_ROWS_IN_BARCODE||i.getValue()[0]+l.getValue()[0]>ot.MAX_ROWS_IN_BARCODE)return null;let u=new Ss(n.getValue()[0],i.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(e,u),u}removeIncorrectCodewords(e,n){for(let i=0;i<e.length;i++){let l=e[i];if(e[i]==null)continue;let c=l.getValue()%30,u=l.getRowNumber();if(u>n.getRowCount()){e[i]=null;continue}switch(this._isLeft||(u+=2),u%3){case 0:c*3+1!==n.getRowCountUpperPart()&&(e[i]=null);break;case 1:(Math.trunc(c/3)!==n.getErrorCorrectionLevel()||c%3!==n.getRowCountLowerPart())&&(e[i]=null);break;case 2:c+1!==n.getColumnCount()&&(e[i]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ts{constructor(e,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=ot.MAX_CODEWORDS_IN_BARCODE,n;do n=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<n);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let n=1;n<this.barcodeColumnCount+1;n++){let i=this.detectionResultColumns[n].getCodewords();for(let l=0;l<i.length;l++)i[l]!=null&&(i[l].hasValidRowNumber()||this.adjustRowNumbers(n,l,i))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<e.length;i++)if(e[i]!=null&&n[i]!=null&&e[i].getRowNumber()===n[i].getRowNumber())for(let l=1;l<=this.barcodeColumnCount;l++){let c=this.detectionResultColumns[l].getCodewords()[i];c!=null&&(c.setRowNumber(e[i].getRowNumber()),c.hasValidRowNumber()||(this.detectionResultColumns[l].getCodewords()[i]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<n.length;i++){if(n[i]==null)continue;let l=n[i].getRowNumber(),c=0;for(let u=this.barcodeColumnCount+1;u>0&&c<this.ADJUST_ROW_NUMBER_SKIP;u--){let h=this.detectionResultColumns[u].getCodewords()[i];h!=null&&(c=Ts.adjustRowNumberIfValid(l,c,h),h.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,n=this.detectionResultColumns[0].getCodewords();for(let i=0;i<n.length;i++){if(n[i]==null)continue;let l=n[i].getRowNumber(),c=0;for(let u=1;u<this.barcodeColumnCount+1&&c<this.ADJUST_ROW_NUMBER_SKIP;u++){let h=this.detectionResultColumns[u].getCodewords()[i];h!=null&&(c=Ts.adjustRowNumberIfValid(l,c,h),h.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,n,i){return i==null||i.hasValidRowNumber()||(i.isValidRowNumber(e)?(i.setRowNumber(e),n=0):++n),n}adjustRowNumbers(e,n,i){if(!this.detectionResultColumns[e-1])return;let l=i[n],c=this.detectionResultColumns[e-1].getCodewords(),u=c;this.detectionResultColumns[e+1]!=null&&(u=this.detectionResultColumns[e+1].getCodewords());let h=new Array(14);h[2]=c[n],h[3]=u[n],n>0&&(h[0]=i[n-1],h[4]=c[n-1],h[5]=u[n-1]),n>1&&(h[8]=i[n-2],h[10]=c[n-2],h[11]=u[n-2]),n<i.length-1&&(h[1]=i[n+1],h[6]=c[n+1],h[7]=u[n+1]),n<i.length-2&&(h[9]=i[n+2],h[12]=c[n+2],h[13]=u[n+2]);for(let m of h)if(Ts.adjustRowNumber(l,m))return}static adjustRowNumber(e,n){return n==null?!1:n.hasValidRowNumber()&&n.getBucket()===e.getBucket()?(e.setRowNumber(n.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,n){this.detectionResultColumns[e]=n}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let n=new $r;for(let i=0;i<e.getCodewords().length;i++){n.format("CW %3d:",i);for(let l=0;l<this.barcodeColumnCount+2;l++){if(this.detectionResultColumns[l]==null){n.format("    |   ");continue}let c=this.detectionResultColumns[l].getCodewords()[i];if(c==null){n.format("    |   ");continue}n.format(" %3d|%3d",c.getRowNumber(),c.getValue())}n.format("%n")}return n.toString()}}class bi{constructor(e,n,i,l){this.rowNumber=bi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(n),this.bucket=Math.trunc(i),this.value=Math.trunc(l)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==bi.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}bi.BARCODE_ROW_UNKNOWN=-1;class _n{static initialize(){for(let e=0;e<ot.SYMBOL_TABLE.length;e++){let n=ot.SYMBOL_TABLE[e],i=n&1;for(let l=0;l<ot.BARS_IN_MODULE;l++){let c=0;for(;(n&1)===i;)c+=1,n>>=1;i=n&1,_n.RATIOS_TABLE[e]||(_n.RATIOS_TABLE[e]=new Array(ot.BARS_IN_MODULE)),_n.RATIOS_TABLE[e][ot.BARS_IN_MODULE-l-1]=Math.fround(c/ot.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let n=_n.getDecodedCodewordValue(_n.sampleBitCounts(e));return n!==-1?n:_n.getClosestDecodedValue(e)}static sampleBitCounts(e){let n=pt.sum(e),i=new Int32Array(ot.BARS_IN_MODULE),l=0,c=0;for(let u=0;u<ot.MODULES_IN_CODEWORD;u++){let h=n/(2*ot.MODULES_IN_CODEWORD)+u*n/ot.MODULES_IN_CODEWORD;c+e[l]<=h&&(c+=e[l],l++),i[l]++}return i}static getDecodedCodewordValue(e){let n=_n.getBitValue(e);return ot.getCodeword(n)===-1?-1:n}static getBitValue(e){let n=0;for(let i=0;i<e.length;i++)for(let l=0;l<e[i];l++)n=n<<1|(i%2===0?1:0);return Math.trunc(n)}static getClosestDecodedValue(e){let n=pt.sum(e),i=new Array(ot.BARS_IN_MODULE);if(n>1)for(let u=0;u<i.length;u++)i[u]=Math.fround(e[u]/n);let l=xn.MAX_VALUE,c=-1;this.bSymbolTableReady||_n.initialize();for(let u=0;u<_n.RATIOS_TABLE.length;u++){let h=0,m=_n.RATIOS_TABLE[u];for(let v=0;v<ot.BARS_IN_MODULE;v++){let N=Math.fround(m[v]-i[v]);if(h+=Math.fround(N*N),h>=l)break}h<l&&(l=h,c=ot.SYMBOL_TABLE[u])}return c}}_n.bSymbolTableReady=!1,_n.RATIOS_TABLE=new Array(ot.SYMBOL_TABLE.length).map(k=>new Array(ot.BARS_IN_MODULE));class ro{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class Yo{static parseLong(e,n=void 0){return parseInt(e,n)}}class qr extends E{}qr.kind="NullPointerException";class Ko{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,n,i){if(e==null)throw new qr;if(n<0||n>e.length||i<0||n+i>e.length||n+i<0)throw new F;if(i===0)return;for(let l=0;l<i;l++)this.write(e[n+l])}flush(){}close(){}}class io extends E{}class tl extends Ko{constructor(e=32){if(super(),this.count=0,e<0)throw new I("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let i=this.buf.length<<1;if(i-e<0&&(i=e),i<0){if(e<0)throw new io;i=z.MAX_VALUE}this.buf=W.copyOfUint8Array(this.buf,i)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,n,i){if(n<0||n>e.length||i<0||n+i-e.length>0)throw new F;this.ensureCapacity(this.count+i),B.arraycopy(e,n,this.buf,this.count,i),this.count+=i}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return W.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var Lt;(function(k){k[k.ALPHA=0]="ALPHA",k[k.LOWER=1]="LOWER",k[k.MIXED=2]="MIXED",k[k.PUNCT=3]="PUNCT",k[k.ALPHA_SHIFT=4]="ALPHA_SHIFT",k[k.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Lt||(Lt={}));function Is(){if(typeof window<"u")return window.BigInt||null;if(typeof Ql<"u")return Ql.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ns;function hn(k){if(typeof Ns>"u"&&(Ns=Is()),Ns===null)throw new Error("BigInt is not supported!");return Ns(k)}function $i(){let k=[];k[0]=hn(1);let e=hn(900);k[1]=e;for(let n=2;n<16;n++)k[n]=k[n-1]*e;return k}class ae{static decode(e,n){let i=new Re(""),l=$.ISO8859_1;i.enableDecoding(l);let c=1,u=e[c++],h=new ro;for(;c<e[0];){switch(u){case ae.TEXT_COMPACTION_MODE_LATCH:c=ae.textCompaction(e,c,i);break;case ae.BYTE_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:c=ae.byteCompaction(u,e,l,c,i);break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[c++]);break;case ae.NUMERIC_COMPACTION_MODE_LATCH:c=ae.numericCompaction(e,c,i);break;case ae.ECI_CHARSET:$.getCharacterSetECIByValue(e[c++]);break;case ae.ECI_GENERAL_PURPOSE:c+=2;break;case ae.ECI_USER_DEFINED:c++;break;case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:c=ae.decodeMacroBlock(e,c,h);break;case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:throw new q;default:c--,c=ae.textCompaction(e,c,i);break}if(c<e.length)u=e[c++];else throw q.getFormatInstance()}if(i.length()===0)throw q.getFormatInstance();let m=new tt(null,i.toString(),null,n);return m.setOther(h),m}static decodeMacroBlock(e,n,i){if(n+ae.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw q.getFormatInstance();let l=new Int32Array(ae.NUMBER_OF_SEQUENCE_CODEWORDS);for(let h=0;h<ae.NUMBER_OF_SEQUENCE_CODEWORDS;h++,n++)l[h]=e[n];i.setSegmentIndex(z.parseInt(ae.decodeBase900toBase10(l,ae.NUMBER_OF_SEQUENCE_CODEWORDS)));let c=new Re;n=ae.textCompaction(e,n,c),i.setFileId(c.toString());let u=-1;for(e[n]===ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(u=n+1);n<e[0];)switch(e[n]){case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(n++,e[n]){case ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let h=new Re;n=ae.textCompaction(e,n+1,h),i.setFileName(h.toString());break;case ae.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let m=new Re;n=ae.textCompaction(e,n+1,m),i.setSender(m.toString());break;case ae.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let v=new Re;n=ae.textCompaction(e,n+1,v),i.setAddressee(v.toString());break;case ae.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let N=new Re;n=ae.numericCompaction(e,n+1,N),i.setSegmentCount(z.parseInt(N.toString()));break;case ae.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let O=new Re;n=ae.numericCompaction(e,n+1,O),i.setTimestamp(Yo.parseLong(O.toString()));break;case ae.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let M=new Re;n=ae.numericCompaction(e,n+1,M),i.setChecksum(z.parseInt(M.toString()));break;case ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let U=new Re;n=ae.numericCompaction(e,n+1,U),i.setFileSize(Yo.parseLong(U.toString()));break;default:throw q.getFormatInstance()}break;case ae.MACRO_PDF417_TERMINATOR:n++,i.setLastSegment(!0);break;default:throw q.getFormatInstance()}if(u!==-1){let h=n-u;i.isLastSegment()&&h--,i.setOptionalData(W.copyOfRange(e,u,u+h))}return n}static textCompaction(e,n,i){let l=new Int32Array((e[0]-n)*2),c=new Int32Array((e[0]-n)*2),u=0,h=!1;for(;n<e[0]&&!h;){let m=e[n++];if(m<ae.TEXT_COMPACTION_MODE_LATCH)l[u]=m/30,l[u+1]=m%30,u+=2;else switch(m){case ae.TEXT_COMPACTION_MODE_LATCH:l[u++]=ae.TEXT_COMPACTION_MODE_LATCH;break;case ae.BYTE_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.NUMERIC_COMPACTION_MODE_LATCH:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:n--,h=!0;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l[u]=ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,m=e[n++],c[u]=m,u++;break}}return ae.decodeTextCompaction(l,c,u,i),n}static decodeTextCompaction(e,n,i,l){let c=Lt.ALPHA,u=Lt.ALPHA,h=0;for(;h<i;){let m=e[h],v="";switch(c){case Lt.ALPHA:if(m<26)v=String.fromCharCode(65+m);else switch(m){case 26:v=" ";break;case ae.LL:c=Lt.LOWER;break;case ae.ML:c=Lt.MIXED;break;case ae.PS:u=c,c=Lt.PUNCT_SHIFT;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case ae.TEXT_COMPACTION_MODE_LATCH:c=Lt.ALPHA;break}break;case Lt.LOWER:if(m<26)v=String.fromCharCode(97+m);else switch(m){case 26:v=" ";break;case ae.AS:u=c,c=Lt.ALPHA_SHIFT;break;case ae.ML:c=Lt.MIXED;break;case ae.PS:u=c,c=Lt.PUNCT_SHIFT;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case ae.TEXT_COMPACTION_MODE_LATCH:c=Lt.ALPHA;break}break;case Lt.MIXED:if(m<ae.PL)v=ae.MIXED_CHARS[m];else switch(m){case ae.PL:c=Lt.PUNCT;break;case 26:v=" ";break;case ae.LL:c=Lt.LOWER;break;case ae.AL:c=Lt.ALPHA;break;case ae.PS:u=c,c=Lt.PUNCT_SHIFT;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case ae.TEXT_COMPACTION_MODE_LATCH:c=Lt.ALPHA;break}break;case Lt.PUNCT:if(m<ae.PAL)v=ae.PUNCT_CHARS[m];else switch(m){case ae.PAL:c=Lt.ALPHA;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case ae.TEXT_COMPACTION_MODE_LATCH:c=Lt.ALPHA;break}break;case Lt.ALPHA_SHIFT:if(c=u,m<26)v=String.fromCharCode(65+m);else switch(m){case 26:v=" ";break;case ae.TEXT_COMPACTION_MODE_LATCH:c=Lt.ALPHA;break}break;case Lt.PUNCT_SHIFT:if(c=u,m<ae.PAL)v=ae.PUNCT_CHARS[m];else switch(m){case ae.PAL:c=Lt.ALPHA;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case ae.TEXT_COMPACTION_MODE_LATCH:c=Lt.ALPHA;break}break}v!==""&&l.append(v),h++}}static byteCompaction(e,n,i,l,c){let u=new tl,h=0,m=0,v=!1;switch(e){case ae.BYTE_COMPACTION_MODE_LATCH:let N=new Int32Array(6),O=n[l++];for(;l<n[0]&&!v;)switch(N[h++]=O,m=900*m+O,O=n[l++],O){case ae.TEXT_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH:case ae.NUMERIC_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:l--,v=!0;break;default:if(h%5===0&&h>0){for(let M=0;M<6;++M)u.write(Number(hn(m)>>hn(8*(5-M))));m=0,h=0}break}l===n[0]&&O<ae.TEXT_COMPACTION_MODE_LATCH&&(N[h++]=O);for(let M=0;M<h;M++)u.write(N[M]);break;case ae.BYTE_COMPACTION_MODE_LATCH_6:for(;l<n[0]&&!v;){let M=n[l++];if(M<ae.TEXT_COMPACTION_MODE_LATCH)h++,m=900*m+M;else switch(M){case ae.TEXT_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH:case ae.NUMERIC_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:l--,v=!0;break}if(h%5===0&&h>0){for(let U=0;U<6;++U)u.write(Number(hn(m)>>hn(8*(5-U))));m=0,h=0}}break}return c.append(Pe.decode(u.toByteArray(),i)),l}static numericCompaction(e,n,i){let l=0,c=!1,u=new Int32Array(ae.MAX_NUMERIC_CODEWORDS);for(;n<e[0]&&!c;){let h=e[n++];if(n===e[0]&&(c=!0),h<ae.TEXT_COMPACTION_MODE_LATCH)u[l]=h,l++;else switch(h){case ae.TEXT_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:n--,c=!0;break}(l%ae.MAX_NUMERIC_CODEWORDS===0||h===ae.NUMERIC_COMPACTION_MODE_LATCH||c)&&l>0&&(i.append(ae.decodeBase900toBase10(u,l)),l=0)}return n}static decodeBase900toBase10(e,n){let i=hn(0);for(let c=0;c<n;c++)i+=ae.EXP900[n-c-1]*hn(e[c]);let l=i.toString();if(l.charAt(0)!=="1")throw new q;return l.substring(1)}}ae.TEXT_COMPACTION_MODE_LATCH=900,ae.BYTE_COMPACTION_MODE_LATCH=901,ae.NUMERIC_COMPACTION_MODE_LATCH=902,ae.BYTE_COMPACTION_MODE_LATCH_6=924,ae.ECI_USER_DEFINED=925,ae.ECI_GENERAL_PURPOSE=926,ae.ECI_CHARSET=927,ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ae.MACRO_PDF417_TERMINATOR=922,ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ae.MAX_NUMERIC_CODEWORDS=15,ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ae.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ae.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ae.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ae.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ae.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ae.PL=25,ae.LL=27,ae.AS=27,ae.ML=28,ae.AL=28,ae.PS=29,ae.PAL=29,ae.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ae.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ae.EXP900=Is()?$i():[],ae.NUMBER_OF_SEQUENCE_CODEWORDS=2;class xt{constructor(){}static decode(e,n,i,l,c,u,h){let m=new Ai(e,n,i,l,c),v=null,N=null,O;for(let G=!0;;G=!1){if(n!=null&&(v=xt.getRowIndicatorColumn(e,m,n,!0,u,h)),l!=null&&(N=xt.getRowIndicatorColumn(e,m,l,!1,u,h)),O=xt.merge(v,N),O==null)throw ee.getNotFoundInstance();let K=O.getBoundingBox();if(G&&K!=null&&(K.getMinY()<m.getMinY()||K.getMaxY()>m.getMaxY()))m=K;else break}O.setBoundingBox(m);let M=O.getBarcodeColumnCount()+1;O.setDetectionResultColumn(0,v),O.setDetectionResultColumn(M,N);let U=v!=null;for(let G=1;G<=M;G++){let K=U?G:M-G;if(O.getDetectionResultColumn(K)!==void 0)continue;let J;K===0||K===M?J=new el(m,K===0):J=new Lr(m),O.setDetectionResultColumn(K,J);let oe=-1,Ee=oe;for(let be=m.getMinY();be<=m.getMaxY();be++){if(oe=xt.getStartColumn(O,K,be,U),oe<0||oe>m.getMaxX()){if(Ee===-1)continue;oe=Ee}let we=xt.detectCodeword(e,m.getMinX(),m.getMaxX(),U,oe,be,u,h);we!=null&&(J.setCodeword(be,we),Ee=oe,u=Math.min(u,we.getWidth()),h=Math.max(h,we.getWidth()))}}return xt.createDecoderResult(O)}static merge(e,n){if(e==null&&n==null)return null;let i=xt.getBarcodeMetadata(e,n);if(i==null)return null;let l=Ai.merge(xt.adjustBoundingBox(e),xt.adjustBoundingBox(n));return new Ts(i,l)}static adjustBoundingBox(e){if(e==null)return null;let n=e.getRowHeights();if(n==null)return null;let i=xt.getMax(n),l=0;for(let h of n)if(l+=i-h,h>0)break;let c=e.getCodewords();for(let h=0;l>0&&c[h]==null;h++)l--;let u=0;for(let h=n.length-1;h>=0&&(u+=i-n[h],!(n[h]>0));h--);for(let h=c.length-1;u>0&&c[h]==null;h--)u--;return e.getBoundingBox().addMissingRows(l,u,e.isLeft())}static getMax(e){let n=-1;for(let i of e)n=Math.max(n,i);return n}static getBarcodeMetadata(e,n){let i;if(e==null||(i=e.getBarcodeMetadata())==null)return n==null?null:n.getBarcodeMetadata();let l;return n==null||(l=n.getBarcodeMetadata())==null?i:i.getColumnCount()!==l.getColumnCount()&&i.getErrorCorrectionLevel()!==l.getErrorCorrectionLevel()&&i.getRowCount()!==l.getRowCount()?null:i}static getRowIndicatorColumn(e,n,i,l,c,u){let h=new el(n,l);for(let m=0;m<2;m++){let v=m===0?1:-1,N=Math.trunc(Math.trunc(i.getX()));for(let O=Math.trunc(Math.trunc(i.getY()));O<=n.getMaxY()&&O>=n.getMinY();O+=v){let M=xt.detectCodeword(e,0,e.getWidth(),l,N,O,c,u);M!=null&&(h.setCodeword(O,M),l?N=M.getStartX():N=M.getEndX())}}return h}static adjustCodewordCount(e,n){let i=n[0][1],l=i.getValue(),c=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-xt.getNumberOfECCodeWords(e.getBarcodeECLevel());if(l.length===0){if(c<1||c>ot.MAX_CODEWORDS_IN_BARCODE)throw ee.getNotFoundInstance();i.setValue(c)}else l[0]!==c&&i.setValue(c)}static createDecoderResult(e){let n=xt.createBarcodeMatrix(e);xt.adjustCodewordCount(e,n);let i=new Array,l=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),c=[],u=new Array;for(let m=0;m<e.getBarcodeRowCount();m++)for(let v=0;v<e.getBarcodeColumnCount();v++){let N=n[m][v+1].getValue(),O=m*e.getBarcodeColumnCount()+v;N.length===0?i.push(O):N.length===1?l[O]=N[0]:(u.push(O),c.push(N))}let h=new Array(c.length);for(let m=0;m<h.length;m++)h[m]=c[m];return xt.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),l,ot.toIntArray(i),ot.toIntArray(u),h)}static createDecoderResultFromAmbiguousValues(e,n,i,l,c){let u=new Int32Array(l.length),h=100;for(;h-- >0;){for(let m=0;m<u.length;m++)n[l[m]]=c[m][u[m]];try{return xt.decodeCodewords(n,e,i)}catch(m){if(!(m instanceof D))throw m}if(u.length===0)throw D.getChecksumInstance();for(let m=0;m<u.length;m++)if(u[m]<c[m].length-1){u[m]++;break}else if(u[m]=0,m===u.length-1)throw D.getChecksumInstance()}throw D.getChecksumInstance()}static createBarcodeMatrix(e){let n=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let l=0;l<n.length;l++)for(let c=0;c<n[l].length;c++)n[l][c]=new ci;let i=0;for(let l of e.getDetectionResultColumns()){if(l!=null){for(let c of l.getCodewords())if(c!=null){let u=c.getRowNumber();if(u>=0){if(u>=n.length)continue;n[u][i].setValue(c.getValue())}}}i++}return n}static isValidBarcodeColumn(e,n){return n>=0&&n<=e.getBarcodeColumnCount()+1}static getStartColumn(e,n,i,l){let c=l?1:-1,u=null;if(xt.isValidBarcodeColumn(e,n-c)&&(u=e.getDetectionResultColumn(n-c).getCodeword(i)),u!=null)return l?u.getEndX():u.getStartX();if(u=e.getDetectionResultColumn(n).getCodewordNearby(i),u!=null)return l?u.getStartX():u.getEndX();if(xt.isValidBarcodeColumn(e,n-c)&&(u=e.getDetectionResultColumn(n-c).getCodewordNearby(i)),u!=null)return l?u.getEndX():u.getStartX();let h=0;for(;xt.isValidBarcodeColumn(e,n-c);){n-=c;for(let m of e.getDetectionResultColumn(n).getCodewords())if(m!=null)return(l?m.getEndX():m.getStartX())+c*h*(m.getEndX()-m.getStartX());h++}return l?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,n,i,l,c,u,h,m){c=xt.adjustCodewordStartColumn(e,n,i,l,c,u);let v=xt.getModuleBitCount(e,n,i,l,c,u);if(v==null)return null;let N,O=pt.sum(v);if(l)N=c+O;else{for(let G=0;G<v.length/2;G++){let K=v[G];v[G]=v[v.length-1-G],v[v.length-1-G]=K}N=c,c=N-O}if(!xt.checkCodewordSkew(O,h,m))return null;let M=_n.getDecodedValue(v),U=ot.getCodeword(M);return U===-1?null:new bi(c,N,xt.getCodewordBucketNumber(M),U)}static getModuleBitCount(e,n,i,l,c,u){let h=c,m=new Int32Array(8),v=0,N=l?1:-1,O=l;for(;(l?h<i:h>=n)&&v<m.length;)e.get(h,u)===O?(m[v]++,h+=N):(v++,O=!O);return v===m.length||h===(l?i:n)&&v===m.length-1?m:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,n,i,l,c,u){let h=c,m=l?-1:1;for(let v=0;v<2;v++){for(;(l?h>=n:h<i)&&l===e.get(h,u);){if(Math.abs(c-h)>xt.CODEWORD_SKEW_SIZE)return c;h+=m}m=-m,l=!l}return h}static checkCodewordSkew(e,n,i){return n-xt.CODEWORD_SKEW_SIZE<=e&&e<=i+xt.CODEWORD_SKEW_SIZE}static decodeCodewords(e,n,i){if(e.length===0)throw q.getFormatInstance();let l=1<<n+1,c=xt.correctErrors(e,i,l);xt.verifyCodewordCount(e,l);let u=ae.decode(e,""+n);return u.setErrorsCorrected(c),u.setErasures(i.length),u}static correctErrors(e,n,i){if(n!=null&&n.length>i/2+xt.MAX_ERRORS||i<0||i>xt.MAX_EC_CODEWORDS)throw D.getChecksumInstance();return xt.errorCorrection.decode(e,i,n)}static verifyCodewordCount(e,n){if(e.length<4)throw q.getFormatInstance();let i=e[0];if(i>e.length)throw q.getFormatInstance();if(i===0)if(n<e.length)e[0]=e.length-n;else throw q.getFormatInstance()}static getBitCountForCodeword(e){let n=new Int32Array(8),i=0,l=n.length-1;for(;!((e&1)!==i&&(i=e&1,l--,l<0));)n[l]++,e>>=1;return n}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return xt.getCodewordBucketNumber(xt.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let n=new $r;for(let i=0;i<e.length;i++){n.format("Row %2d: ",i);for(let l=0;l<e[i].length;l++){let c=e[i][l];c.getValue().length===0?n.format("        ",null):n.format("%4d(%2d)",c.getValue()[0],c.getConfidence(c.getValue()[0]))}n.format("%n")}return n.toString()}}xt.CODEWORD_SKEW_SIZE=2,xt.MAX_ERRORS=3,xt.MAX_EC_CODEWORDS=512,xt.errorCorrection=new Xo;class Rn{decode(e,n=null){let i=Rn.decode(e,n,!1);if(i==null||i.length===0||i[0]==null)throw ee.getNotFoundInstance();return i[0]}decodeMultiple(e,n=null){try{return Rn.decode(e,n,!0)}catch(i){throw i instanceof q||i instanceof D?ee.getNotFoundInstance():i}}static decode(e,n,i){const l=new Array,c=dt.detectMultiple(e,n,i);for(const u of c.getPoints()){const h=xt.decode(c.getBits(),u[4],u[5],u[6],u[7],Rn.getMinCodewordWidth(u),Rn.getMaxCodewordWidth(u)),m=new ze(h.getText(),h.getRawBytes(),void 0,u,de.PDF_417);m.putMetadata(Fe.ERROR_CORRECTION_LEVEL,h.getECLevel());const v=h.getOther();v!=null&&m.putMetadata(Fe.PDF417_EXTRA_METADATA,v),l.push(m)}return l.map(u=>u)}static getMaxWidth(e,n){return e==null||n==null?0:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMinWidth(e,n){return e==null||n==null?z.MAX_VALUE:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(Rn.getMaxWidth(e[0],e[4]),Rn.getMaxWidth(e[6],e[2])*ot.MODULES_IN_CODEWORD/ot.MODULES_IN_STOP_PATTERN),Math.max(Rn.getMaxWidth(e[1],e[5]),Rn.getMaxWidth(e[7],e[3])*ot.MODULES_IN_CODEWORD/ot.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(Rn.getMinWidth(e[0],e[4]),Rn.getMinWidth(e[6],e[2])*ot.MODULES_IN_CODEWORD/ot.MODULES_IN_STOP_PATTERN),Math.min(Rn.getMinWidth(e[1],e[5]),Rn.getMinWidth(e[7],e[3])*ot.MODULES_IN_CODEWORD/ot.MODULES_IN_STOP_PATTERN)))}reset(){}}class qi extends E{}qi.kind="ReaderException";class so{constructor(e,n){this.verbose=e===!0,n&&this.setHints(n)}decode(e,n){return n&&this.setHints(n),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const n=!d(e)&&e.get(ue.TRY_HARDER)===!0,i=d(e)?null:e.get(ue.POSSIBLE_FORMATS),l=new Array;if(!d(i)){const c=i.some(u=>u===de.UPC_A||u===de.UPC_E||u===de.EAN_13||u===de.EAN_8||u===de.CODABAR||u===de.CODE_39||u===de.CODE_93||u===de.CODE_128||u===de.ITF||u===de.RSS_14||u===de.RSS_EXPANDED);c&&!n&&l.push(new Ei(e,this.verbose)),i.includes(de.QR_CODE)&&l.push(new Hn),i.includes(de.DATA_MATRIX)&&l.push(new Sr),i.includes(de.AZTEC)&&l.push(new Ht),i.includes(de.PDF_417)&&l.push(new Rn),c&&n&&l.push(new Ei(e,this.verbose))}l.length===0&&(n||l.push(new Ei(e,this.verbose)),l.push(new Hn),l.push(new Sr),l.push(new Ht),l.push(new Rn),n&&l.push(new Ei(e,this.verbose))),this.readers=l}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new qi("No readers where selected, nothing can be read.");for(const n of this.readers)try{return n.decode(e,this.hints)}catch(i){if(i instanceof qi)continue}throw new ee("No MultiFormat Readers were able to detect the code.")}}class _s extends Ae{constructor(e=null,n=500){const i=new so;i.setHints(e),super(i,n)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class oo extends Ae{constructor(e=500){super(new Rn,e)}}class nl extends Ae{constructor(e=500){super(new Hn,e)}}var Zo;(function(k){k[k.ERROR_CORRECTION=0]="ERROR_CORRECTION",k[k.CHARACTER_SET=1]="CHARACTER_SET",k[k.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",k[k.MIN_SIZE=3]="MIN_SIZE",k[k.MAX_SIZE=4]="MAX_SIZE",k[k.MARGIN=5]="MARGIN",k[k.PDF417_COMPACT=6]="PDF417_COMPACT",k[k.PDF417_COMPACTION=7]="PDF417_COMPACTION",k[k.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",k[k.AZTEC_LAYERS=9]="AZTEC_LAYERS",k[k.QR_VERSION=10]="QR_VERSION"})(Zo||(Zo={}));var wn=Zo;class $o{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Ze(e,Int32Array.from([1])))}buildGenerator(e){const n=this.cachedGenerators;if(e>=n.length){let i=n[n.length-1];const l=this.field;for(let c=n.length;c<=e;c++){const u=i.multiply(new Ze(l,Int32Array.from([1,l.exp(c-1+l.getGeneratorBase())])));n.push(u),i=u}}return n[e]}encode(e,n){if(n===0)throw new I("No error correction bytes");const i=e.length-n;if(i<=0)throw new I("No data bytes provided");const l=this.buildGenerator(n),c=new Int32Array(i);B.arraycopy(e,0,c,0,i);let u=new Ze(this.field,c);u=u.multiplyByMonomial(n,1);const m=u.divide(l)[1].getCoefficients(),v=n-m.length;for(let N=0;N<v;N++)e[i+N]=0;B.arraycopy(m,0,e,i+v,m.length)}}class Kt{constructor(){}static applyMaskPenaltyRule1(e){return Kt.applyMaskPenaltyRule1Internal(e,!0)+Kt.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let n=0;const i=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let u=0;u<c-1;u++){const h=i[u];for(let m=0;m<l-1;m++){const v=h[m];v===h[m+1]&&v===i[u+1][m]&&v===i[u+1][m+1]&&n++}}return Kt.N2*n}static applyMaskPenaltyRule3(e){let n=0;const i=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let u=0;u<c;u++)for(let h=0;h<l;h++){const m=i[u];h+6<l&&m[h]===1&&m[h+1]===0&&m[h+2]===1&&m[h+3]===1&&m[h+4]===1&&m[h+5]===0&&m[h+6]===1&&(Kt.isWhiteHorizontal(m,h-4,h)||Kt.isWhiteHorizontal(m,h+7,h+11))&&n++,u+6<c&&i[u][h]===1&&i[u+1][h]===0&&i[u+2][h]===1&&i[u+3][h]===1&&i[u+4][h]===1&&i[u+5][h]===0&&i[u+6][h]===1&&(Kt.isWhiteVertical(i,h,u-4,u)||Kt.isWhiteVertical(i,h,u+7,u+11))&&n++}return n*Kt.N3}static isWhiteHorizontal(e,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(let l=n;l<i;l++)if(e[l]===1)return!1;return!0}static isWhiteVertical(e,n,i,l){i=Math.max(i,0),l=Math.min(l,e.length);for(let c=i;c<l;c++)if(e[c][n]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let n=0;const i=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let m=0;m<c;m++){const v=i[m];for(let N=0;N<l;N++)v[N]===1&&n++}const u=e.getHeight()*e.getWidth();return Math.floor(Math.abs(n*2-u)*10/u)*Kt.N4}static getDataMaskBit(e,n,i){let l,c;switch(e){case 0:l=i+n&1;break;case 1:l=i&1;break;case 2:l=n%3;break;case 3:l=(i+n)%3;break;case 4:l=Math.floor(i/2)+Math.floor(n/3)&1;break;case 5:c=i*n,l=(c&1)+c%3;break;case 6:c=i*n,l=(c&1)+c%3&1;break;case 7:c=i*n,l=c%3+(i+n&1)&1;break;default:throw new I("Invalid mask pattern: "+e)}return l===0}static applyMaskPenaltyRule1Internal(e,n){let i=0;const l=n?e.getHeight():e.getWidth(),c=n?e.getWidth():e.getHeight(),u=e.getArray();for(let h=0;h<l;h++){let m=0,v=-1;for(let N=0;N<c;N++){const O=n?u[h][N]:u[N][h];O===v?m++:(m>=5&&(i+=Kt.N1+(m-5)),m=1,v=O)}m>=5&&(i+=Kt.N1+(m-5))}return i}}Kt.N1=3,Kt.N2=3,Kt.N3=40,Kt.N4=10;class ao{constructor(e,n){this.width=e,this.height=n;const i=new Array(n);for(let l=0;l!==n;l++)i[l]=new Uint8Array(e);this.bytes=i}getHeight(){return this.height}getWidth(){return this.width}get(e,n){return this.bytes[n][e]}getArray(){return this.bytes}setNumber(e,n,i){this.bytes[n][e]=i}setBoolean(e,n,i){this.bytes[n][e]=i?1:0}clear(e){for(const n of this.bytes)W.fill(n,e)}equals(e){if(!(e instanceof ao))return!1;const n=e;if(this.width!==n.width||this.height!==n.height)return!1;for(let i=0,l=this.height;i<l;++i){const c=this.bytes[i],u=n.bytes[i];for(let h=0,m=this.width;h<m;++h)if(c[h]!==u[h])return!1}return!0}toString(){const e=new Re;for(let n=0,i=this.height;n<i;++n){const l=this.bytes[n];for(let c=0,u=this.width;c<u;++c)switch(l[c]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class Si{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new Re;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Si.NUM_MASK_PATTERNS}}Si.NUM_MASK_PATTERNS=8;class Wt extends E{}Wt.kind="WriterException";class et{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,n,i,l,c){et.clearMatrix(c),et.embedBasicPatterns(i,c),et.embedTypeInfo(n,l,c),et.maybeEmbedVersionInfo(i,c),et.embedDataBits(e,l,c)}static embedBasicPatterns(e,n){et.embedPositionDetectionPatternsAndSeparators(n),et.embedDarkDotAtLeftBottomCorner(n),et.maybeEmbedPositionAdjustmentPatterns(e,n),et.embedTimingPatterns(n)}static embedTypeInfo(e,n,i){const l=new Q;et.makeTypeInfoBits(e,n,l);for(let c=0,u=l.getSize();c<u;++c){const h=l.get(l.getSize()-1-c),m=et.TYPE_INFO_COORDINATES[c],v=m[0],N=m[1];if(i.setBoolean(v,N,h),c<8){const O=i.getWidth()-c-1;i.setBoolean(O,8,h)}else{const M=i.getHeight()-7+(c-8);i.setBoolean(8,M,h)}}}static maybeEmbedVersionInfo(e,n){if(e.getVersionNumber()<7)return;const i=new Q;et.makeVersionInfoBits(e,i);let l=6*3-1;for(let c=0;c<6;++c)for(let u=0;u<3;++u){const h=i.get(l);l--,n.setBoolean(c,n.getHeight()-11+u,h),n.setBoolean(n.getHeight()-11+u,c,h)}}static embedDataBits(e,n,i){let l=0,c=-1,u=i.getWidth()-1,h=i.getHeight()-1;for(;u>0;){for(u===6&&(u-=1);h>=0&&h<i.getHeight();){for(let m=0;m<2;++m){const v=u-m;if(!et.isEmpty(i.get(v,h)))continue;let N;l<e.getSize()?(N=e.get(l),++l):N=!1,n!==255&&Kt.getDataMaskBit(n,v,h)&&(N=!N),i.setBoolean(v,h,N)}h+=c}c=-c,h+=c,u-=2}if(l!==e.getSize())throw new Wt("Not all bits consumed: "+l+"/"+e.getSize())}static findMSBSet(e){return 32-z.numberOfLeadingZeros(e)}static calculateBCHCode(e,n){if(n===0)throw new I("0 polynomial");const i=et.findMSBSet(n);for(e<<=i-1;et.findMSBSet(e)>=i;)e^=n<<et.findMSBSet(e)-i;return e}static makeTypeInfoBits(e,n,i){if(!Si.isValidMaskPattern(n))throw new Wt("Invalid mask pattern");const l=e.getBits()<<3|n;i.appendBits(l,5);const c=et.calculateBCHCode(l,et.TYPE_INFO_POLY);i.appendBits(c,10);const u=new Q;if(u.appendBits(et.TYPE_INFO_MASK_PATTERN,15),i.xor(u),i.getSize()!==15)throw new Wt("should not happen but we got: "+i.getSize())}static makeVersionInfoBits(e,n){n.appendBits(e.getVersionNumber(),6);const i=et.calculateBCHCode(e.getVersionNumber(),et.VERSION_INFO_POLY);if(n.appendBits(i,12),n.getSize()!==18)throw new Wt("should not happen but we got: "+n.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let n=8;n<e.getWidth()-8;++n){const i=(n+1)%2;et.isEmpty(e.get(n,6))&&e.setNumber(n,6,i),et.isEmpty(e.get(6,n))&&e.setNumber(6,n,i)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new Wt;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,n,i){for(let l=0;l<8;++l){if(!et.isEmpty(i.get(e+l,n)))throw new Wt;i.setNumber(e+l,n,0)}}static embedVerticalSeparationPattern(e,n,i){for(let l=0;l<7;++l){if(!et.isEmpty(i.get(e,n+l)))throw new Wt;i.setNumber(e,n+l,0)}}static embedPositionAdjustmentPattern(e,n,i){for(let l=0;l<5;++l){const c=et.POSITION_ADJUSTMENT_PATTERN[l];for(let u=0;u<5;++u)i.setNumber(e+u,n+l,c[u])}}static embedPositionDetectionPattern(e,n,i){for(let l=0;l<7;++l){const c=et.POSITION_DETECTION_PATTERN[l];for(let u=0;u<7;++u)i.setNumber(e+u,n+l,c[u])}}static embedPositionDetectionPatternsAndSeparators(e){const n=et.POSITION_DETECTION_PATTERN[0].length;et.embedPositionDetectionPattern(0,0,e),et.embedPositionDetectionPattern(e.getWidth()-n,0,e),et.embedPositionDetectionPattern(0,e.getWidth()-n,e);const i=8;et.embedHorizontalSeparationPattern(0,i-1,e),et.embedHorizontalSeparationPattern(e.getWidth()-i,i-1,e),et.embedHorizontalSeparationPattern(0,e.getWidth()-i,e);const l=7;et.embedVerticalSeparationPattern(l,0,e),et.embedVerticalSeparationPattern(e.getHeight()-l-1,0,e),et.embedVerticalSeparationPattern(l,e.getHeight()-l,e)}static maybeEmbedPositionAdjustmentPatterns(e,n){if(e.getVersionNumber()<2)return;const i=e.getVersionNumber()-1,l=et.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[i];for(let c=0,u=l.length;c!==u;c++){const h=l[c];if(h>=0)for(let m=0;m!==u;m++){const v=l[m];v>=0&&et.isEmpty(n.get(v,h))&&et.embedPositionAdjustmentPattern(v-2,h-2,n)}}}}et.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),et.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),et.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),et.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),et.VERSION_INFO_POLY=7973,et.TYPE_INFO_POLY=1335,et.TYPE_INFO_MASK_PATTERN=21522;class Dc{constructor(e,n){this.dataBytes=e,this.errorCorrectionBytes=n}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Gt{constructor(){}static calculateMaskPenalty(e){return Kt.applyMaskPenaltyRule1(e)+Kt.applyMaskPenaltyRule2(e)+Kt.applyMaskPenaltyRule3(e)+Kt.applyMaskPenaltyRule4(e)}static encode(e,n,i=null){let l=Gt.DEFAULT_BYTE_MODE_ENCODING;const c=i!==null&&i.get(wn.CHARACTER_SET)!==void 0;c&&(l=i.get(wn.CHARACTER_SET).toString());const u=this.chooseMode(e,l),h=new Q;if(u===qe.BYTE&&(c||Gt.DEFAULT_BYTE_MODE_ENCODING!==l)){const be=$.getCharacterSetECIByName(l);be!==void 0&&this.appendECI(be,h)}this.appendModeInfo(u,h);const m=new Q;this.appendBytes(e,u,m,l);let v;if(i!==null&&i.get(wn.QR_VERSION)!==void 0){const be=Number.parseInt(i.get(wn.QR_VERSION).toString(),10);v=$e.getVersionForNumber(be);const we=this.calculateBitsNeeded(u,h,m,v);if(!this.willFit(we,v,n))throw new Wt("Data too big for requested version")}else v=this.recommendVersion(n,u,h,m);const N=new Q;N.appendBitArray(h);const O=u===qe.BYTE?m.getSizeInBytes():e.length;this.appendLengthInfo(O,v,u,N),N.appendBitArray(m);const M=v.getECBlocksForLevel(n),U=v.getTotalCodewords()-M.getTotalECCodewords();this.terminateBits(U,N);const G=this.interleaveWithECBytes(N,v.getTotalCodewords(),U,M.getNumBlocks()),K=new Si;K.setECLevel(n),K.setMode(u),K.setVersion(v);const J=v.getDimensionForVersion(),oe=new ao(J,J),Ee=this.chooseMaskPattern(G,n,v,oe);return K.setMaskPattern(Ee),et.buildMatrix(G,n,v,Ee,oe),K.setMatrix(oe),K}static recommendVersion(e,n,i,l){const c=this.calculateBitsNeeded(n,i,l,$e.getVersionForNumber(1)),u=this.chooseVersion(c,e),h=this.calculateBitsNeeded(n,i,l,u);return this.chooseVersion(h,e)}static calculateBitsNeeded(e,n,i,l){return n.getSize()+e.getCharacterCountBits(l)+i.getSize()}static getAlphanumericCode(e){return e<Gt.ALPHANUMERIC_TABLE.length?Gt.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,n=null){if($.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(e))return qe.KANJI;let i=!1,l=!1;for(let c=0,u=e.length;c<u;++c){const h=e.charAt(c);if(Gt.isDigit(h))i=!0;else if(this.getAlphanumericCode(h.charCodeAt(0))!==-1)l=!0;else return qe.BYTE}return l?qe.ALPHANUMERIC:i?qe.NUMERIC:qe.BYTE}static isOnlyDoubleByteKanji(e){let n;try{n=Pe.encode(e,$.SJIS)}catch{return!1}const i=n.length;if(i%2!==0)return!1;for(let l=0;l<i;l+=2){const c=n[l]&255;if((c<129||c>159)&&(c<224||c>235))return!1}return!0}static chooseMaskPattern(e,n,i,l){let c=Number.MAX_SAFE_INTEGER,u=-1;for(let h=0;h<Si.NUM_MASK_PATTERNS;h++){et.buildMatrix(e,n,i,h,l);let m=this.calculateMaskPenalty(l);m<c&&(c=m,u=h)}return u}static chooseVersion(e,n){for(let i=1;i<=40;i++){const l=$e.getVersionForNumber(i);if(Gt.willFit(e,l,n))return l}throw new Wt("Data too big")}static willFit(e,n,i){const l=n.getTotalCodewords(),u=n.getECBlocksForLevel(i).getTotalECCodewords(),h=l-u,m=(e+7)/8;return h>=m}static terminateBits(e,n){const i=e*8;if(n.getSize()>i)throw new Wt("data bits cannot fit in the QR Code"+n.getSize()+" > "+i);for(let u=0;u<4&&n.getSize()<i;++u)n.appendBit(!1);const l=n.getSize()&7;if(l>0)for(let u=l;u<8;u++)n.appendBit(!1);const c=e-n.getSizeInBytes();for(let u=0;u<c;++u)n.appendBits(u&1?17:236,8);if(n.getSize()!==i)throw new Wt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,n,i,l,c,u){if(l>=i)throw new Wt("Block ID too large");const h=e%i,m=i-h,v=Math.floor(e/i),N=v+1,O=Math.floor(n/i),M=O+1,U=v-O,G=N-M;if(U!==G)throw new Wt("EC bytes mismatch");if(i!==m+h)throw new Wt("RS blocks mismatch");if(e!==(O+U)*m+(M+G)*h)throw new Wt("Total bytes mismatch");l<m?(c[0]=O,u[0]=U):(c[0]=M,u[0]=G)}static interleaveWithECBytes(e,n,i,l){if(e.getSizeInBytes()!==i)throw new Wt("Number of bits and data bytes does not match");let c=0,u=0,h=0;const m=new Array;for(let N=0;N<l;++N){const O=new Int32Array(1),M=new Int32Array(1);Gt.getNumDataBytesAndNumECBytesForBlockID(n,i,l,N,O,M);const U=O[0],G=new Uint8Array(U);e.toBytes(8*c,G,0,U);const K=Gt.generateECBytes(G,M[0]);m.push(new Dc(G,K)),u=Math.max(u,U),h=Math.max(h,K.length),c+=O[0]}if(i!==c)throw new Wt("Data bytes does not match offset");const v=new Q;for(let N=0;N<u;++N)for(const O of m){const M=O.getDataBytes();N<M.length&&v.appendBits(M[N],8)}for(let N=0;N<h;++N)for(const O of m){const M=O.getErrorCorrectionBytes();N<M.length&&v.appendBits(M[N],8)}if(n!==v.getSizeInBytes())throw new Wt("Interleaving error: "+n+" and "+v.getSizeInBytes()+" differ.");return v}static generateECBytes(e,n){const i=e.length,l=new Int32Array(i+n);for(let u=0;u<i;u++)l[u]=e[u]&255;new $o(_e.QR_CODE_FIELD_256).encode(l,n);const c=new Uint8Array(n);for(let u=0;u<n;u++)c[u]=l[i+u];return c}static appendModeInfo(e,n){n.appendBits(e.getBits(),4)}static appendLengthInfo(e,n,i,l){const c=i.getCharacterCountBits(n);if(e>=1<<c)throw new Wt(e+" is bigger than "+((1<<c)-1));l.appendBits(e,c)}static appendBytes(e,n,i,l){switch(n){case qe.NUMERIC:Gt.appendNumericBytes(e,i);break;case qe.ALPHANUMERIC:Gt.appendAlphanumericBytes(e,i);break;case qe.BYTE:Gt.append8BitBytes(e,i,l);break;case qe.KANJI:Gt.appendKanjiBytes(e,i);break;default:throw new Wt("Invalid mode: "+n)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const n=Gt.getDigit(e);return n>=0&&n<=9}static appendNumericBytes(e,n){const i=e.length;let l=0;for(;l<i;){const c=Gt.getDigit(e.charAt(l));if(l+2<i){const u=Gt.getDigit(e.charAt(l+1)),h=Gt.getDigit(e.charAt(l+2));n.appendBits(c*100+u*10+h,10),l+=3}else if(l+1<i){const u=Gt.getDigit(e.charAt(l+1));n.appendBits(c*10+u,7),l+=2}else n.appendBits(c,4),l++}}static appendAlphanumericBytes(e,n){const i=e.length;let l=0;for(;l<i;){const c=Gt.getAlphanumericCode(e.charCodeAt(l));if(c===-1)throw new Wt;if(l+1<i){const u=Gt.getAlphanumericCode(e.charCodeAt(l+1));if(u===-1)throw new Wt;n.appendBits(c*45+u,11),l+=2}else n.appendBits(c,6),l++}}static append8BitBytes(e,n,i){let l;try{l=Pe.encode(e,i)}catch(c){throw new Wt(c)}for(let c=0,u=l.length;c!==u;c++){const h=l[c];n.appendBits(h,8)}}static appendKanjiBytes(e,n){let i;try{i=Pe.encode(e,$.SJIS)}catch(c){throw new Wt(c)}const l=i.length;for(let c=0;c<l;c+=2){const u=i[c]&255,h=i[c+1]&255,m=u<<8&4294967295|h;let v=-1;if(m>=33088&&m<=40956?v=m-33088:m>=57408&&m<=60351&&(v=m-49472),v===-1)throw new Wt("Invalid byte sequence");const N=(v>>8)*192+(v&255);n.appendBits(N,13)}}static appendECI(e,n){n.appendBits(qe.ECI.getBits(),4),n.appendBits(e.getValue(),8)}}Gt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Gt.DEFAULT_BYTE_MODE_ENCODING=$.UTF8.getName();class Ti{write(e,n,i,l=null){if(e.length===0)throw new I("Found empty contents");if(n<0||i<0)throw new I("Requested dimensions are too small: "+n+"x"+i);let c=zt.L,u=Ti.QUIET_ZONE_SIZE;l!==null&&(l.get(wn.ERROR_CORRECTION)!==void 0&&(c=zt.fromString(l.get(wn.ERROR_CORRECTION).toString())),l.get(wn.MARGIN)!==void 0&&(u=Number.parseInt(l.get(wn.MARGIN).toString(),10)));const h=Gt.encode(e,c,l);return this.renderResult(h,n,i,u)}writeToDom(e,n,i,l,c=null){typeof e=="string"&&(e=document.querySelector(e));const u=this.write(n,i,l,c);e&&e.appendChild(u)}renderResult(e,n,i,l){const c=e.getMatrix();if(c===null)throw new Pt;const u=c.getWidth(),h=c.getHeight(),m=u+l*2,v=h+l*2,N=Math.max(n,m),O=Math.max(i,v),M=Math.min(Math.floor(N/m),Math.floor(O/v)),U=Math.floor((N-u*M)/2),G=Math.floor((O-h*M)/2),K=this.createSVGElement(N,O);for(let J=0,oe=G;J<h;J++,oe+=M)for(let Ee=0,be=U;Ee<u;Ee++,be+=M)if(c.get(Ee,J)===1){const we=this.createSvgRectElement(be,oe,M,M);K.appendChild(we)}return K}createSVGElement(e,n){const i=document.createElementNS(Ti.SVG_NS,"svg");return i.setAttributeNS(null,"height",e.toString()),i.setAttributeNS(null,"width",n.toString()),i}createSvgRectElement(e,n,i,l){const c=document.createElementNS(Ti.SVG_NS,"rect");return c.setAttributeNS(null,"x",e.toString()),c.setAttributeNS(null,"y",n.toString()),c.setAttributeNS(null,"height",i.toString()),c.setAttributeNS(null,"width",l.toString()),c.setAttributeNS(null,"fill","#000000"),c}}Ti.QUIET_ZONE_SIZE=4,Ti.SVG_NS="http://www.w3.org/2000/svg";class Qi{encode(e,n,i,l,c){if(e.length===0)throw new I("Found empty contents");if(n!==de.QR_CODE)throw new I("Can only encode QR_CODE, but got "+n);if(i<0||l<0)throw new I(`Requested dimensions are too small: ${i}x${l}`);let u=zt.L,h=Qi.QUIET_ZONE_SIZE;c!==null&&(c.get(wn.ERROR_CORRECTION)!==void 0&&(u=zt.fromString(c.get(wn.ERROR_CORRECTION).toString())),c.get(wn.MARGIN)!==void 0&&(h=Number.parseInt(c.get(wn.MARGIN).toString(),10)));const m=Gt.encode(e,u,c);return Qi.renderResult(m,i,l,h)}static renderResult(e,n,i,l){const c=e.getMatrix();if(c===null)throw new Pt;const u=c.getWidth(),h=c.getHeight(),m=u+l*2,v=h+l*2,N=Math.max(n,m),O=Math.max(i,v),M=Math.min(Math.floor(N/m),Math.floor(O/v)),U=Math.floor((N-u*M)/2),G=Math.floor((O-h*M)/2),K=new Ve(N,O);for(let J=0,oe=G;J<h;J++,oe+=M)for(let Ee=0,be=U;Ee<u;Ee++,be+=M)c.get(Ee,J)===1&&K.setRegion(be,oe,M,M);return K}}Qi.QUIET_ZONE_SIZE=4;class Lc{encode(e,n,i,l,c){let u;switch(n){case de.QR_CODE:u=new Qi;break;default:throw new I("No encoder available for format "+n)}return u.encode(e,n,i,l,c)}}class Br extends pe{constructor(e,n,i,l,c,u,h,m){if(super(u,h),this.yuvData=e,this.dataWidth=n,this.dataHeight=i,this.left=l,this.top=c,l+u>n||c+h>i)throw new I("Crop rectangle does not fit within image data.");m&&this.reverseHorizontal(u,h)}getRow(e,n){if(e<0||e>=this.getHeight())throw new I("Requested row is outside the image: "+e);const i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));const l=(e+this.top)*this.dataWidth+this.left;return B.arraycopy(this.yuvData,l,n,0,i),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.yuvData;const i=e*n,l=new Uint8ClampedArray(i);let c=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return B.arraycopy(this.yuvData,c,l,0,i),l;for(let u=0;u<n;u++){const h=u*e;B.arraycopy(this.yuvData,c,l,h,e),c+=this.dataWidth}return l}isCropSupported(){return!0}crop(e,n,i,l){return new Br(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+n,i,l,!1)}renderThumbnail(){const e=this.getWidth()/Br.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/Br.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(e*n),l=this.yuvData;let c=this.top*this.dataWidth+this.left;for(let u=0;u<n;u++){const h=u*e;for(let m=0;m<e;m++){const v=l[c+m*Br.THUMBNAIL_SCALE_FACTOR]&255;i[h+m]=4278190080|v*65793}c+=this.dataWidth*Br.THUMBNAIL_SCALE_FACTOR}return i}getThumbnailWidth(){return this.getWidth()/Br.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Br.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,n){const i=this.yuvData;for(let l=0,c=this.top*this.dataWidth+this.left;l<n;l++,c+=this.dataWidth){const u=c+e/2;for(let h=c,m=c+e-1;h<u;h++,m--){const v=i[h];i[h]=i[m],i[m]=v}}}invert(){return new Oe(this)}}Br.THUMBNAIL_SCALE_FACTOR=2;class Rs extends pe{constructor(e,n,i,l,c,u,h){if(super(n,i),this.dataWidth=l,this.dataHeight=c,this.left=u,this.top=h,e.BYTES_PER_ELEMENT===4){const m=n*i,v=new Uint8ClampedArray(m);for(let N=0;N<m;N++){const O=e[N],M=O>>16&255,U=O>>7&510,G=O&255;v[N]=(M+U+G)/4&255}this.luminances=v}else this.luminances=e;if(l===void 0&&(this.dataWidth=n),c===void 0&&(this.dataHeight=i),u===void 0&&(this.left=0),h===void 0&&(this.top=0),this.left+n>this.dataWidth||this.top+i>this.dataHeight)throw new I("Crop rectangle does not fit within image data.")}getRow(e,n){if(e<0||e>=this.getHeight())throw new I("Requested row is outside the image: "+e);const i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));const l=(e+this.top)*this.dataWidth+this.left;return B.arraycopy(this.luminances,l,n,0,i),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.luminances;const i=e*n,l=new Uint8ClampedArray(i);let c=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return B.arraycopy(this.luminances,c,l,0,i),l;for(let u=0;u<n;u++){const h=u*e;B.arraycopy(this.luminances,c,l,h,e),c+=this.dataWidth}return l}isCropSupported(){return!0}crop(e,n,i,l){return new Rs(this.luminances,i,l,this.dataWidth,this.dataHeight,this.left+e,this.top+n)}invert(){return new Oe(this)}}class rl extends ${static forName(e){return this.getCharacterSetECIByName(e)}}class qo{}qo.ISO_8859_1=$.ISO8859_1;class il{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Qo{static singletonList(e){return[e]}static min(e,n){return e.sort(n)[0]}}class Bc{constructor(e){this.previous=e}getPrevious(){return this.previous}}class Ji extends Bc{constructor(e,n,i){super(e),this.value=n,this.bitCount=i}appendTo(e,n){e.appendBits(this.value,this.bitCount)}add(e,n){return new Ji(this,e,n)}addBinaryShift(e,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ji(this,e,n)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+z.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Jo extends Ji{constructor(e,n,i){super(e,0,0),this.binaryShiftStart=n,this.binaryShiftByteCount=i}appendTo(e,n){for(let i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):i===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(n[this.binaryShiftStart+i],8)}addBinaryShift(e,n){return new Jo(this,e,n)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Fc(k,e,n){return new Jo(k,e,n)}function ks(k,e,n){return new Ji(k,e,n)}const jc=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ui=0,es=1,Bn=2,sl=3,Ir=4,ol=new Ji(null,0,0),lo=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function al(k){for(let e of k)W.fill(e,-1);return k[ui][Ir]=0,k[es][Ir]=0,k[es][ui]=28,k[sl][Ir]=0,k[Bn][Ir]=0,k[Bn][ui]=15,k}const ea=al(W.createInt32Array(6,6));class Gn{constructor(e,n,i,l){this.token=e,this.mode=n,this.binaryShiftByteCount=i,this.bitCount=l}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,n){let i=this.bitCount,l=this.token;if(e!==this.mode){let u=lo[this.mode][e];l=ks(l,u&65535,u>>16),i+=u>>16}let c=e===Bn?4:5;return l=ks(l,n,c),new Gn(l,e,0,i+c)}shiftAndAppend(e,n){let i=this.token,l=this.mode===Bn?4:5;return i=ks(i,ea[this.mode][e],l),i=ks(i,n,5),new Gn(i,this.mode,0,this.bitCount+l+5)}addBinaryShiftChar(e){let n=this.token,i=this.mode,l=this.bitCount;if(this.mode===Ir||this.mode===Bn){let h=lo[i][ui];n=ks(n,h&65535,h>>16),l+=h>>16,i=ui}let c=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,u=new Gn(n,i,this.binaryShiftByteCount+1,l+c);return u.binaryShiftByteCount===2078&&(u=u.endBinaryShift(e+1)),u}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let n=this.token;return n=Fc(n,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new Gn(n,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let n=this.bitCount+(lo[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?n+=Gn.calculateBinaryShiftCost(e)-Gn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(n+=10),n<=e.bitCount}toBitArray(e){let n=[];for(let l=this.endBinaryShift(e.length).token;l!==null;l=l.getPrevious())n.unshift(l);let i=new Q;for(const l of n)l.appendTo(i,e);return i}toString(){return ke.format("%s bits=%d bytes=%d",jc[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}Gn.INITIAL_STATE=new Gn(ol,ui,0,0);function Vc(k){const e=ke.getCharCode(" "),n=ke.getCharCode("."),i=ke.getCharCode(",");k[ui][e]=1;const l=ke.getCharCode("Z"),c=ke.getCharCode("A");for(let M=c;M<=l;M++)k[ui][M]=M-c+2;k[es][e]=1;const u=ke.getCharCode("z"),h=ke.getCharCode("a");for(let M=h;M<=u;M++)k[es][M]=M-h+2;k[Bn][e]=1;const m=ke.getCharCode("9"),v=ke.getCharCode("0");for(let M=v;M<=m;M++)k[Bn][M]=M-v+2;k[Bn][i]=12,k[Bn][n]=13;const N=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let M=0;M<N.length;M++)k[sl][ke.getCharCode(N[M])]=M;const O=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let M=0;M<O.length;M++)ke.getCharCode(O[M])>0&&(k[Ir][ke.getCharCode(O[M])]=M);return k}const ta=Vc(W.createInt32Array(5,256));class Os{constructor(e){this.text=e}encode(){const e=ke.getCharCode(" "),n=ke.getCharCode(`
`);let i=Qo.singletonList(Gn.INITIAL_STATE);for(let c=0;c<this.text.length;c++){let u,h=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case ke.getCharCode("\r"):u=h===n?2:0;break;case ke.getCharCode("."):u=h===e?3:0;break;case ke.getCharCode(","):u=h===e?4:0;break;case ke.getCharCode(":"):u=h===e?5:0;break;default:u=0}u>0?(i=Os.updateStateListForPair(i,c,u),c++):i=this.updateStateListForChar(i,c)}return Qo.min(i,(c,u)=>c.getBitCount()-u.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,n){const i=[];for(let l of e)this.updateStateForChar(l,n,i);return Os.simplifyStates(i)}updateStateForChar(e,n,i){let l=this.text[n]&255,c=ta[e.getMode()][l]>0,u=null;for(let h=0;h<=Ir;h++){let m=ta[h][l];if(m>0){if(u==null&&(u=e.endBinaryShift(n)),!c||h===e.getMode()||h===Bn){const v=u.latchAndAppend(h,m);i.push(v)}if(!c&&ea[e.getMode()][h]>=0){const v=u.shiftAndAppend(h,m);i.push(v)}}}if(e.getBinaryShiftByteCount()>0||ta[e.getMode()][l]===0){let h=e.addBinaryShiftChar(n);i.push(h)}}static updateStateListForPair(e,n,i){const l=[];for(let c of e)this.updateStateForPair(c,n,i,l);return this.simplifyStates(l)}static updateStateForPair(e,n,i,l){let c=e.endBinaryShift(n);if(l.push(c.latchAndAppend(Ir,i)),e.getMode()!==Ir&&l.push(c.shiftAndAppend(Ir,i)),i===3||i===4){let u=c.latchAndAppend(Bn,16-i).latchAndAppend(Bn,1);l.push(u)}if(e.getBinaryShiftByteCount()>0){let u=e.addBinaryShiftChar(n).addBinaryShiftChar(n+1);l.push(u)}}static simplifyStates(e){let n=[];for(const i of e){let l=!0;for(const c of n){if(c.isBetterThanOrEqualTo(i)){l=!1;break}i.isBetterThanOrEqualTo(c)&&(n=n.filter(u=>u!==c))}l&&n.push(i)}return n}}class kt{constructor(){}static encodeBytes(e){return kt.encode(e,kt.DEFAULT_EC_PERCENT,kt.DEFAULT_AZTEC_LAYERS)}static encode(e,n,i){let l=new Os(e).encode(),c=z.truncDivision(l.getSize()*n,100)+11,u=l.getSize()+c,h,m,v,N,O;if(i!==kt.DEFAULT_AZTEC_LAYERS){if(h=i<0,m=Math.abs(i),m>(h?kt.MAX_NB_BITS_COMPACT:kt.MAX_NB_BITS))throw new I(ke.format("Illegal value %s for layers",i));v=kt.totalBitsInLayer(m,h),N=kt.WORD_SIZE[m];let we=v-v%N;if(O=kt.stuffBits(l,N),O.getSize()+c>we)throw new I("Data to large for user specified layer");if(h&&O.getSize()>N*64)throw new I("Data to large for user specified layer")}else{N=0,O=null;for(let we=0;;we++){if(we>kt.MAX_NB_BITS)throw new I("Data too large for an Aztec code");if(h=we<=3,m=h?we+1:we,v=kt.totalBitsInLayer(m,h),u>v)continue;(O==null||N!==kt.WORD_SIZE[m])&&(N=kt.WORD_SIZE[m],O=kt.stuffBits(l,N));let bt=v-v%N;if(!(h&&O.getSize()>N*64)&&O.getSize()+c<=bt)break}}let M=kt.generateCheckWords(O,v,N),U=O.getSize()/N,G=kt.generateModeMessage(h,m,U),K=(h?11:14)+m*4,J=new Int32Array(K),oe;if(h){oe=K;for(let we=0;we<J.length;we++)J[we]=we}else{oe=K+1+2*z.truncDivision(z.truncDivision(K,2)-1,15);let we=z.truncDivision(K,2),bt=z.truncDivision(oe,2);for(let ht=0;ht<we;ht++){let tr=ht+z.truncDivision(ht,15);J[we-ht-1]=bt-tr-1,J[we+ht]=bt+tr+1}}let Ee=new Ve(oe);for(let we=0,bt=0;we<m;we++){let ht=(m-we)*4+(h?9:12);for(let tr=0;tr<ht;tr++){let Nr=tr*2;for(let vn=0;vn<2;vn++)M.get(bt+Nr+vn)&&Ee.set(J[we*2+vn],J[we*2+tr]),M.get(bt+ht*2+Nr+vn)&&Ee.set(J[we*2+tr],J[K-1-we*2-vn]),M.get(bt+ht*4+Nr+vn)&&Ee.set(J[K-1-we*2-vn],J[K-1-we*2-tr]),M.get(bt+ht*6+Nr+vn)&&Ee.set(J[K-1-we*2-tr],J[we*2+vn])}bt+=ht*8}if(kt.drawModeMessage(Ee,h,oe,G),h)kt.drawBullsEye(Ee,z.truncDivision(oe,2),5);else{kt.drawBullsEye(Ee,z.truncDivision(oe,2),7);for(let we=0,bt=0;we<z.truncDivision(K,2)-1;we+=15,bt+=16)for(let ht=z.truncDivision(oe,2)&1;ht<oe;ht+=2)Ee.set(z.truncDivision(oe,2)-bt,ht),Ee.set(z.truncDivision(oe,2)+bt,ht),Ee.set(ht,z.truncDivision(oe,2)-bt),Ee.set(ht,z.truncDivision(oe,2)+bt)}let be=new il;return be.setCompact(h),be.setSize(oe),be.setLayers(m),be.setCodeWords(U),be.setMatrix(Ee),be}static drawBullsEye(e,n,i){for(let l=0;l<i;l+=2)for(let c=n-l;c<=n+l;c++)e.set(c,n-l),e.set(c,n+l),e.set(n-l,c),e.set(n+l,c);e.set(n-i,n-i),e.set(n-i+1,n-i),e.set(n-i,n-i+1),e.set(n+i,n-i),e.set(n+i,n-i+1),e.set(n+i,n+i-1)}static generateModeMessage(e,n,i){let l=new Q;return e?(l.appendBits(n-1,2),l.appendBits(i-1,6),l=kt.generateCheckWords(l,28,4)):(l.appendBits(n-1,5),l.appendBits(i-1,11),l=kt.generateCheckWords(l,40,4)),l}static drawModeMessage(e,n,i,l){let c=z.truncDivision(i,2);if(n)for(let u=0;u<7;u++){let h=c-3+u;l.get(u)&&e.set(h,c-5),l.get(u+7)&&e.set(c+5,h),l.get(20-u)&&e.set(h,c+5),l.get(27-u)&&e.set(c-5,h)}else for(let u=0;u<10;u++){let h=c-5+u+z.truncDivision(u,5);l.get(u)&&e.set(h,c-7),l.get(u+10)&&e.set(c+7,h),l.get(29-u)&&e.set(h,c+7),l.get(39-u)&&e.set(c-7,h)}}static generateCheckWords(e,n,i){let l=e.getSize()/i,c=new $o(kt.getGF(i)),u=z.truncDivision(n,i),h=kt.bitsToWords(e,i,u);c.encode(h,u-l);let m=n%i,v=new Q;v.appendBits(0,m);for(const N of Array.from(h))v.appendBits(N,i);return v}static bitsToWords(e,n,i){let l=new Int32Array(i),c,u;for(c=0,u=e.getSize()/n;c<u;c++){let h=0;for(let m=0;m<n;m++)h|=e.get(c*n+m)?1<<n-m-1:0;l[c]=h}return l}static getGF(e){switch(e){case 4:return _e.AZTEC_PARAM;case 6:return _e.AZTEC_DATA_6;case 8:return _e.AZTEC_DATA_8;case 10:return _e.AZTEC_DATA_10;case 12:return _e.AZTEC_DATA_12;default:throw new I("Unsupported word size "+e)}}static stuffBits(e,n){let i=new Q,l=e.getSize(),c=(1<<n)-2;for(let u=0;u<l;u+=n){let h=0;for(let m=0;m<n;m++)(u+m>=l||e.get(u+m))&&(h|=1<<n-1-m);(h&c)===c?(i.appendBits(h&c,n),u--):h&c?i.appendBits(h,n):(i.appendBits(h|1,n),u--)}return i}static totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}kt.DEFAULT_EC_PERCENT=33,kt.DEFAULT_AZTEC_LAYERS=0,kt.MAX_NB_BITS=32,kt.MAX_NB_BITS_COMPACT=4,kt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ps{encode(e,n,i,l){return this.encodeWithHints(e,n,i,l,null)}encodeWithHints(e,n,i,l,c){let u=qo.ISO_8859_1,h=kt.DEFAULT_EC_PERCENT,m=kt.DEFAULT_AZTEC_LAYERS;return c!=null&&(c.has(wn.CHARACTER_SET)&&(u=rl.forName(c.get(wn.CHARACTER_SET).toString())),c.has(wn.ERROR_CORRECTION)&&(h=z.parseInt(c.get(wn.ERROR_CORRECTION).toString())),c.has(wn.AZTEC_LAYERS)&&(m=z.parseInt(c.get(wn.AZTEC_LAYERS).toString()))),Ps.encodeLayers(e,n,i,l,u,h,m)}static encodeLayers(e,n,i,l,c,u,h){if(n!==de.AZTEC)throw new I("Can only encode AZTEC, but got "+n);let m=kt.encode(ke.getBytes(e,c),u,h);return Ps.renderResult(m,i,l)}static renderResult(e,n,i){let l=e.getMatrix();if(l==null)throw new Pt;let c=l.getWidth(),u=l.getHeight(),h=Math.max(n,c),m=Math.max(i,u),v=Math.min(h/c,m/u),N=(h-c*v)/2,O=(m-u*v)/2,M=new Ve(h,m);for(let U=0,G=O;U<u;U++,G+=v)for(let K=0,J=N;K<c;K++,J+=v)l.get(K,U)&&M.setRegion(J,G,v,v);return M}}a.AbstractExpandedDecoder=Gi,a.ArgumentException=S,a.ArithmeticException=at,a.AztecCode=il,a.AztecCodeReader=Ht,a.AztecCodeWriter=Ps,a.AztecDecoder=vt,a.AztecDetector=nn,a.AztecDetectorResult=Ct,a.AztecEncoder=kt,a.AztecHighLevelEncoder=Os,a.AztecPoint=At,a.BarcodeFormat=de,a.Binarizer=L,a.BinaryBitmap=_,a.BitArray=Q,a.BitMatrix=Ve,a.BitSource=Wo,a.BrowserAztecCodeReader=un,a.BrowserBarcodeReader=Xi,a.BrowserCodeReader=Ae,a.BrowserDatamatrixCodeReader=Mc,a.BrowserMultiFormatReader=_s,a.BrowserPDF417Reader=oo,a.BrowserQRCodeReader=nl,a.BrowserQRCodeSvgWriter=Ti,a.CharacterSetECI=$,a.ChecksumException=D,a.Code128Reader=he,a.Code39Reader=ct,a.DataMatrixDecodedBitStreamParser=br,a.DataMatrixReader=Sr,a.DecodeHintType=ue,a.DecoderResult=tt,a.DefaultGridSampler=Ut,a.DetectorResult=zn,a.EAN13Reader=Dn,a.EncodeHintType=wn,a.Exception=E,a.FormatException=q,a.GenericGF=_e,a.GenericGFPoly=Ze,a.GlobalHistogramBinarizer=Ue,a.GridSampler=Je,a.GridSamplerInstance=Ot,a.HTMLCanvasElementLuminanceSource=fe,a.HybridBinarizer=me,a.ITFReader=st,a.IllegalArgumentException=I,a.IllegalStateException=Pt,a.InvertedLuminanceSource=Oe,a.LuminanceSource=pe,a.MathUtils=pt,a.MultiFormatOneDReader=Ei,a.MultiFormatReader=so,a.MultiFormatWriter=Lc,a.NotFoundException=ee,a.OneDReader=De,a.PDF417DecodedBitStreamParser=ae,a.PDF417DecoderErrorCorrection=Xo,a.PDF417Reader=Rn,a.PDF417ResultMetadata=ro,a.PerspectiveTransform=gt,a.PlanarYUVLuminanceSource=Br,a.QRCodeByteMatrix=ao,a.QRCodeDataMask=wt,a.QRCodeDecodedBitStreamParser=Yt,a.QRCodeDecoderErrorCorrectionLevel=zt,a.QRCodeDecoderFormatInformation=In,a.QRCodeEncoder=Gt,a.QRCodeEncoderQRCode=Si,a.QRCodeMaskUtil=Kt,a.QRCodeMatrixUtil=et,a.QRCodeMode=qe,a.QRCodeReader=Hn,a.QRCodeVersion=$e,a.QRCodeWriter=Qi,a.RGBLuminanceSource=Rs,a.RSS14Reader=Mt,a.RSSExpandedReader=xe,a.ReaderException=qi,a.ReedSolomonDecoder=Dt,a.ReedSolomonEncoder=$o,a.ReedSolomonException=nt,a.Result=ze,a.ResultMetadataType=Fe,a.ResultPoint=Te,a.StringUtils=ke,a.UnsupportedOperationException=Ne,a.VideoInputDevice=X,a.WhiteRectangleDetector=Ge,a.WriterException=Wt,a.ZXingArrays=W,a.ZXingCharset=rl,a.ZXingInteger=z,a.ZXingStandardCharsets=qo,a.ZXingStringBuilder=Re,a.ZXingStringEncoding=Pe,a.ZXingSystem=B,a.createAbstractExpandedDecoder=Wn,Object.defineProperty(a,"__esModule",{value:!0})})}(Na,Na.exports)),Na.exports}Yy();var ud=function(){var r=function(o,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var x in p)Object.prototype.hasOwnProperty.call(p,x)&&(d[x]=p[x])},r(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(o,a);function d(){this.constructor=o}o.prototype=a===null?Object.create(a):(d.prototype=a.prototype,new d)}}(),tg=function(){function r(o,a){this.name=o,this.track=a}return r.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},r.prototype.apply=function(o){var a={};a[this.name]=o;var d={advanced:[a]};return this.track.applyConstraints(d)},r.prototype.value=function(){var o=this.track.getSettings();if(this.name in o){var a=o[this.name];return a}return null},r}(),Ky=function(r){ud(o,r);function o(a,d){return r.call(this,a,d)||this}return o.prototype.min=function(){return this.getCapabilities().min},o.prototype.max=function(){return this.getCapabilities().max},o.prototype.step=function(){return this.getCapabilities().step},o.prototype.apply=function(a){var d={};d[this.name]=a;var p={advanced:[d]};return this.track.applyConstraints(p)},o.prototype.getCapabilities=function(){this.failIfNotSupported();var a=this.track.getCapabilities(),d=a[this.name];return{min:d.min,max:d.max,step:d.step}},o.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},o}(tg);(function(r){ud(o,r);function o(a){return r.call(this,"zoom",a)||this}return o})(Ky);(function(r){ud(o,r);function o(a){return r.call(this,"torch",a)||this}return o})(tg);var m1;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.NOT_STARTED=1]="NOT_STARTED",r[r.SCANNING=2]="SCANNING",r[r.PAUSED=3]="PAUSED"})(m1||(m1={}));var Zy=function(){var r=function(o,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var x in p)Object.prototype.hasOwnProperty.call(p,x)&&(d[x]=p[x])},r(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(o,a);function d(){this.constructor=o}o.prototype=a===null?Object.create(a):(d.prototype=a.prototype,new d)}}();(function(r){Zy(o,r);function o(){return r!==null&&r.apply(this,arguments)||this}return o.DEFAULT_WIDTH=300,o.DEFAULT_WIDTH_OFFSET=2,o.FILE_SCAN_MIN_HEIGHT=300,o.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,o.MIN_QR_BOX_SIZE=50,o.SHADED_LEFT=1,o.SHADED_RIGHT=2,o.SHADED_TOP=3,o.SHADED_BOTTOM=4,o.SHADED_REGION_ELEMENT_ID="qr-shaded-region",o.VERBOSE=!1,o.BORDER_SHADER_DEFAULT_COLOR="#ffffff",o.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",o})(Gy);var x1;(function(r){r[r.STATUS_DEFAULT=0]="STATUS_DEFAULT",r[r.STATUS_SUCCESS=1]="STATUS_SUCCESS",r[r.STATUS_WARNING=2]="STATUS_WARNING",r[r.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(x1||(x1={}));const $y=({user:r,onProfileClick:o})=>{const a=pr();return A.jsx("div",{children:A.jsx("div",{style:{position:"absolute",top:"45px",display:"flex",alignItems:"center",width:"94%",height:"10px",left:"3%"},children:r==null?A.jsxs("div",{style:{position:"absolute",width:"100%",display:"flex",justifyContent:"space-between"},children:[A.jsx("button",{className:"login-button",onClick:()=>a("/login"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:A.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Login"})}),A.jsx("button",{className:"login-button",onClick:()=>a("/signup"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:A.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Sign up"})})]}):A.jsxs("div",{style:{position:"absolute",width:"100%",display:"flex",justifyContent:"space-between"},children:[A.jsx("button",{className:"login-button",onClick:()=>a("/logout"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:A.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Logout"})}),A.jsx("button",{className:"login-button",onClick:o,style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:A.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Profile"})})]})})})},fd=R.createContext({});function dd(r){const o=R.useRef(null);return o.current===null&&(o.current=r()),o.current}const hd=typeof window<"u",ng=hd?R.useLayoutEffect:R.useEffect,_c=R.createContext(null);function pd(r,o){r.indexOf(o)===-1&&r.push(o)}function gd(r,o){const a=r.indexOf(o);a>-1&&r.splice(a,1)}const ji=(r,o,a)=>a>o?o:a<r?r:a;let md=()=>{};const Vi={},rg=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r);function ig(r){return typeof r=="object"&&r!==null}const sg=r=>/^0[^.\s]+$/u.test(r);function xd(r){let o;return()=>(o===void 0&&(o=r()),o)}const Xr=r=>r,qy=(r,o)=>a=>o(r(a)),Xa=(...r)=>r.reduce(qy),Ba=(r,o,a)=>{const d=o-r;return d===0?1:(a-r)/d};class yd{constructor(){this.subscriptions=[]}add(o){return pd(this.subscriptions,o),()=>gd(this.subscriptions,o)}notify(o,a,d){const p=this.subscriptions.length;if(p)if(p===1)this.subscriptions[0](o,a,d);else for(let x=0;x<p;x++){const y=this.subscriptions[x];y&&y(o,a,d)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const gi=r=>r*1e3,mi=r=>r/1e3;function og(r,o){return o?r*(1e3/o):0}const ag=(r,o,a)=>(((1-3*a+3*o)*r+(3*a-6*o))*r+3*o)*r,Qy=1e-7,Jy=12;function ew(r,o,a,d,p){let x,y,b=0;do y=o+(a-o)/2,x=ag(y,d,p)-r,x>0?a=y:o=y;while(Math.abs(x)>Qy&&++b<Jy);return y}function Ya(r,o,a,d){if(r===o&&a===d)return Xr;const p=x=>ew(x,0,1,r,a);return x=>x===0||x===1?x:ag(p(x),o,d)}const lg=r=>o=>o<=.5?r(2*o)/2:(2-r(2*(1-o)))/2,cg=r=>o=>1-r(1-o),ug=Ya(.33,1.53,.69,.99),wd=cg(ug),fg=lg(wd),dg=r=>(r*=2)<1?.5*wd(r):.5*(2-Math.pow(2,-10*(r-1))),vd=r=>1-Math.sin(Math.acos(r)),hg=cg(vd),pg=lg(vd),tw=Ya(.42,0,1,1),nw=Ya(0,0,.58,1),gg=Ya(.42,0,.58,1),rw=r=>Array.isArray(r)&&typeof r[0]!="number",mg=r=>Array.isArray(r)&&typeof r[0]=="number",iw={linear:Xr,easeIn:tw,easeInOut:gg,easeOut:nw,circIn:vd,circInOut:pg,circOut:hg,backIn:wd,backInOut:fg,backOut:ug,anticipate:dg},sw=r=>typeof r=="string",y1=r=>{if(mg(r)){md(r.length===4);const[o,a,d,p]=r;return Ya(o,a,d,p)}else if(sw(r))return iw[r];return r},nc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function ow(r,o){let a=new Set,d=new Set,p=!1,x=!1;const y=new WeakSet;let b={delta:0,timestamp:0,isProcessing:!1};function w(S){y.has(S)&&(E.schedule(S),r()),S(b)}const E={schedule:(S,I=!1,_=!1)=>{const L=_&&p?a:d;return I&&y.add(S),L.has(S)||L.add(S),S},cancel:S=>{d.delete(S),y.delete(S)},process:S=>{if(b=S,p){x=!0;return}p=!0,[a,d]=[d,a],a.forEach(w),a.clear(),p=!1,x&&(x=!1,E.process(S))}};return E}const aw=40;function xg(r,o){let a=!1,d=!0;const p={delta:0,timestamp:0,isProcessing:!1},x=()=>a=!0,y=nc.reduce((z,Q)=>(z[Q]=ow(x),z),{}),{setup:b,read:w,resolveKeyframes:E,preUpdate:S,update:I,preRender:_,render:D,postRender:L}=y,B=()=>{const z=Vi.useManualTiming?p.timestamp:performance.now();a=!1,Vi.useManualTiming||(p.delta=d?1e3/60:Math.max(Math.min(z-p.timestamp,aw),1)),p.timestamp=z,p.isProcessing=!0,b.process(p),w.process(p),E.process(p),S.process(p),I.process(p),_.process(p),D.process(p),L.process(p),p.isProcessing=!1,a&&o&&(d=!1,r(B))},F=()=>{a=!0,d=!0,p.isProcessing||r(B)};return{schedule:nc.reduce((z,Q)=>{const ie=y[Q];return z[Q]=(ue,q=!1,ce=!1)=>(a||F(),ie.schedule(ue,q,ce)),z},{}),cancel:z=>{for(let Q=0;Q<nc.length;Q++)y[nc[Q]].cancel(z)},state:p,steps:y}}const{schedule:tn,cancel:ws,state:$n,steps:hf}=xg(typeof requestAnimationFrame<"u"?requestAnimationFrame:Xr,!0);let uc;function lw(){uc=void 0}const Er={now:()=>(uc===void 0&&Er.set($n.isProcessing||Vi.useManualTiming?$n.timestamp:performance.now()),uc),set:r=>{uc=r,queueMicrotask(lw)}},yg=r=>o=>typeof o=="string"&&o.startsWith(r),Cd=yg("--"),cw=yg("var(--"),Ed=r=>cw(r)?uw.test(r.split("/*")[0].trim()):!1,uw=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,jo={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},Fa={...jo,transform:r=>ji(0,1,r)},rc={...jo,default:1},Ra=r=>Math.round(r*1e5)/1e5,Ad=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function fw(r){return r==null}const dw=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,bd=(r,o)=>a=>!!(typeof a=="string"&&dw.test(a)&&a.startsWith(r)||o&&!fw(a)&&Object.prototype.hasOwnProperty.call(a,o)),wg=(r,o,a)=>d=>{if(typeof d!="string")return d;const[p,x,y,b]=d.match(Ad);return{[r]:parseFloat(p),[o]:parseFloat(x),[a]:parseFloat(y),alpha:b!==void 0?parseFloat(b):1}},hw=r=>ji(0,255,r),pf={...jo,transform:r=>Math.round(hw(r))},Ks={test:bd("rgb","red"),parse:wg("red","green","blue"),transform:({red:r,green:o,blue:a,alpha:d=1})=>"rgba("+pf.transform(r)+", "+pf.transform(o)+", "+pf.transform(a)+", "+Ra(Fa.transform(d))+")"};function pw(r){let o="",a="",d="",p="";return r.length>5?(o=r.substring(1,3),a=r.substring(3,5),d=r.substring(5,7),p=r.substring(7,9)):(o=r.substring(1,2),a=r.substring(2,3),d=r.substring(3,4),p=r.substring(4,5),o+=o,a+=a,d+=d,p+=p),{red:parseInt(o,16),green:parseInt(a,16),blue:parseInt(d,16),alpha:p?parseInt(p,16)/255:1}}const kf={test:bd("#"),parse:pw,transform:Ks.transform},Ka=r=>({test:o=>typeof o=="string"&&o.endsWith(r)&&o.split(" ").length===1,parse:parseFloat,transform:o=>`${o}${r}`}),ms=Ka("deg"),xi=Ka("%"),ut=Ka("px"),gw=Ka("vh"),mw=Ka("vw"),w1={...xi,parse:r=>xi.parse(r)/100,transform:r=>xi.transform(r*100)},Io={test:bd("hsl","hue"),parse:wg("hue","saturation","lightness"),transform:({hue:r,saturation:o,lightness:a,alpha:d=1})=>"hsla("+Math.round(r)+", "+xi.transform(Ra(o))+", "+xi.transform(Ra(a))+", "+Ra(Fa.transform(d))+")"},Sn={test:r=>Ks.test(r)||kf.test(r)||Io.test(r),parse:r=>Ks.test(r)?Ks.parse(r):Io.test(r)?Io.parse(r):kf.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?Ks.transform(r):Io.transform(r),getAnimatableNone:r=>{const o=Sn.parse(r);return o.alpha=0,Sn.transform(o)}},xw=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function yw(r){var o,a;return isNaN(r)&&typeof r=="string"&&(((o=r.match(Ad))==null?void 0:o.length)||0)+(((a=r.match(xw))==null?void 0:a.length)||0)>0}const vg="number",Cg="color",ww="var",vw="var(",v1="${}",Cw=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ja(r){const o=r.toString(),a=[],d={color:[],number:[],var:[]},p=[];let x=0;const b=o.replace(Cw,w=>(Sn.test(w)?(d.color.push(x),p.push(Cg),a.push(Sn.parse(w))):w.startsWith(vw)?(d.var.push(x),p.push(ww),a.push(w)):(d.number.push(x),p.push(vg),a.push(parseFloat(w))),++x,v1)).split(v1);return{values:a,split:b,indexes:d,types:p}}function Eg(r){return ja(r).values}function Ag(r){const{split:o,types:a}=ja(r),d=o.length;return p=>{let x="";for(let y=0;y<d;y++)if(x+=o[y],p[y]!==void 0){const b=a[y];b===vg?x+=Ra(p[y]):b===Cg?x+=Sn.transform(p[y]):x+=p[y]}return x}}const Ew=r=>typeof r=="number"?0:Sn.test(r)?Sn.getAnimatableNone(r):r;function Aw(r){const o=Eg(r);return Ag(r)(o.map(Ew))}const vs={test:yw,parse:Eg,createTransformer:Ag,getAnimatableNone:Aw};function gf(r,o,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?r+(o-r)*6*a:a<1/2?o:a<2/3?r+(o-r)*(2/3-a)*6:r}function bw({hue:r,saturation:o,lightness:a,alpha:d}){r/=360,o/=100,a/=100;let p=0,x=0,y=0;if(!o)p=x=y=a;else{const b=a<.5?a*(1+o):a+o-a*o,w=2*a-b;p=gf(w,b,r+1/3),x=gf(w,b,r),y=gf(w,b,r-1/3)}return{red:Math.round(p*255),green:Math.round(x*255),blue:Math.round(y*255),alpha:d}}function yc(r,o){return a=>a>0?o:r}const ln=(r,o,a)=>r+(o-r)*a,mf=(r,o,a)=>{const d=r*r,p=a*(o*o-d)+d;return p<0?0:Math.sqrt(p)},Sw=[kf,Ks,Io],Tw=r=>Sw.find(o=>o.test(r));function C1(r){const o=Tw(r);if(!o)return!1;let a=o.parse(r);return o===Io&&(a=bw(a)),a}const E1=(r,o)=>{const a=C1(r),d=C1(o);if(!a||!d)return yc(r,o);const p={...a};return x=>(p.red=mf(a.red,d.red,x),p.green=mf(a.green,d.green,x),p.blue=mf(a.blue,d.blue,x),p.alpha=ln(a.alpha,d.alpha,x),Ks.transform(p))},Of=new Set(["none","hidden"]);function Iw(r,o){return Of.has(r)?a=>a<=0?r:o:a=>a>=1?o:r}function Nw(r,o){return a=>ln(r,o,a)}function Sd(r){return typeof r=="number"?Nw:typeof r=="string"?Ed(r)?yc:Sn.test(r)?E1:kw:Array.isArray(r)?bg:typeof r=="object"?Sn.test(r)?E1:_w:yc}function bg(r,o){const a=[...r],d=a.length,p=r.map((x,y)=>Sd(x)(x,o[y]));return x=>{for(let y=0;y<d;y++)a[y]=p[y](x);return a}}function _w(r,o){const a={...r,...o},d={};for(const p in a)r[p]!==void 0&&o[p]!==void 0&&(d[p]=Sd(r[p])(r[p],o[p]));return p=>{for(const x in d)a[x]=d[x](p);return a}}function Rw(r,o){const a=[],d={color:0,var:0,number:0};for(let p=0;p<o.values.length;p++){const x=o.types[p],y=r.indexes[x][d[x]],b=r.values[y]??0;a[p]=b,d[x]++}return a}const kw=(r,o)=>{const a=vs.createTransformer(o),d=ja(r),p=ja(o);return d.indexes.var.length===p.indexes.var.length&&d.indexes.color.length===p.indexes.color.length&&d.indexes.number.length>=p.indexes.number.length?Of.has(r)&&!p.values.length||Of.has(o)&&!d.values.length?Iw(r,o):Xa(bg(Rw(d,p),p.values),a):yc(r,o)};function Sg(r,o,a){return typeof r=="number"&&typeof o=="number"&&typeof a=="number"?ln(r,o,a):Sd(r)(r,o)}const Ow=r=>{const o=({timestamp:a})=>r(a);return{start:(a=!0)=>tn.update(o,a),stop:()=>ws(o),now:()=>$n.isProcessing?$n.timestamp:Er.now()}},Tg=(r,o,a=10)=>{let d="";const p=Math.max(Math.round(o/a),2);for(let x=0;x<p;x++)d+=Math.round(r(x/(p-1))*1e4)/1e4+", ";return`linear(${d.substring(0,d.length-2)})`},wc=2e4;function Td(r){let o=0;const a=50;let d=r.next(o);for(;!d.done&&o<wc;)o+=a,d=r.next(o);return o>=wc?1/0:o}function Pw(r,o=100,a){const d=a({...r,keyframes:[0,o]}),p=Math.min(Td(d),wc);return{type:"keyframes",ease:x=>d.next(p*x).value/o,duration:mi(p)}}const Mw=5;function Ig(r,o,a){const d=Math.max(o-Mw,0);return og(a-r(d),o-d)}const mn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},A1=.001;function Dw({duration:r=mn.duration,bounce:o=mn.bounce,velocity:a=mn.velocity,mass:d=mn.mass}){let p,x,y=1-o;y=ji(mn.minDamping,mn.maxDamping,y),r=ji(mn.minDuration,mn.maxDuration,mi(r)),y<1?(p=E=>{const S=E*y,I=S*r,_=S-a,D=Pf(E,y),L=Math.exp(-I);return A1-_/D*L},x=E=>{const I=E*y*r,_=I*a+a,D=Math.pow(y,2)*Math.pow(E,2)*r,L=Math.exp(-I),B=Pf(Math.pow(E,2),y);return(-p(E)+A1>0?-1:1)*((_-D)*L)/B}):(p=E=>{const S=Math.exp(-E*r),I=(E-a)*r+1;return-.001+S*I},x=E=>{const S=Math.exp(-E*r),I=(a-E)*(r*r);return S*I});const b=5/r,w=Bw(p,x,b);if(r=gi(r),isNaN(w))return{stiffness:mn.stiffness,damping:mn.damping,duration:r};{const E=Math.pow(w,2)*d;return{stiffness:E,damping:y*2*Math.sqrt(d*E),duration:r}}}const Lw=12;function Bw(r,o,a){let d=a;for(let p=1;p<Lw;p++)d=d-r(d)/o(d);return d}function Pf(r,o){return r*Math.sqrt(1-o*o)}const Fw=["duration","bounce"],jw=["stiffness","damping","mass"];function b1(r,o){return o.some(a=>r[a]!==void 0)}function Vw(r){let o={velocity:mn.velocity,stiffness:mn.stiffness,damping:mn.damping,mass:mn.mass,isResolvedFromDuration:!1,...r};if(!b1(r,jw)&&b1(r,Fw))if(r.visualDuration){const a=r.visualDuration,d=2*Math.PI/(a*1.2),p=d*d,x=2*ji(.05,1,1-(r.bounce||0))*Math.sqrt(p);o={...o,mass:mn.mass,stiffness:p,damping:x}}else{const a=Dw(r);o={...o,...a,mass:mn.mass},o.isResolvedFromDuration=!0}return o}function vc(r=mn.visualDuration,o=mn.bounce){const a=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:o}:r;let{restSpeed:d,restDelta:p}=a;const x=a.keyframes[0],y=a.keyframes[a.keyframes.length-1],b={done:!1,value:x},{stiffness:w,damping:E,mass:S,duration:I,velocity:_,isResolvedFromDuration:D}=Vw({...a,velocity:-mi(a.velocity||0)}),L=_||0,B=E/(2*Math.sqrt(w*S)),F=y-x,V=mi(Math.sqrt(w/S)),W=Math.abs(F)<5;d||(d=W?mn.restSpeed.granular:mn.restSpeed.default),p||(p=W?mn.restDelta.granular:mn.restDelta.default);let z;if(B<1){const ie=Pf(V,B);z=ue=>{const q=Math.exp(-B*V*ue);return y-q*((L+B*V*F)/ie*Math.sin(ie*ue)+F*Math.cos(ie*ue))}}else if(B===1)z=ie=>y-Math.exp(-V*ie)*(F+(L+V*F)*ie);else{const ie=V*Math.sqrt(B*B-1);z=ue=>{const q=Math.exp(-B*V*ue),ce=Math.min(ie*ue,300);return y-q*((L+B*V*F)*Math.sinh(ce)+ie*F*Math.cosh(ce))/ie}}const Q={calculatedDuration:D&&I||null,next:ie=>{const ue=z(ie);if(D)b.done=ie>=I;else{let q=ie===0?L:0;B<1&&(q=ie===0?gi(L):Ig(z,ie,ue));const ce=Math.abs(q)<=d,$=Math.abs(y-ue)<=p;b.done=ce&&$}return b.value=b.done?y:ue,b},toString:()=>{const ie=Math.min(Td(Q),wc),ue=Tg(q=>Q.next(ie*q).value,ie,30);return ie+"ms "+ue},toTransition:()=>{}};return Q}vc.applyToOptions=r=>{const o=Pw(r,100,vc);return r.ease=o.ease,r.duration=gi(o.duration),r.type="keyframes",r};function Mf({keyframes:r,velocity:o=0,power:a=.8,timeConstant:d=325,bounceDamping:p=10,bounceStiffness:x=500,modifyTarget:y,min:b,max:w,restDelta:E=.5,restSpeed:S}){const I=r[0],_={done:!1,value:I},D=ce=>b!==void 0&&ce<b||w!==void 0&&ce>w,L=ce=>b===void 0?w:w===void 0||Math.abs(b-ce)<Math.abs(w-ce)?b:w;let B=a*o;const F=I+B,V=y===void 0?F:y(F);V!==F&&(B=V-I);const W=ce=>-B*Math.exp(-ce/d),z=ce=>V+W(ce),Q=ce=>{const $=W(ce),Ne=z(ce);_.done=Math.abs($)<=E,_.value=_.done?V:Ne};let ie,ue;const q=ce=>{D(_.value)&&(ie=ce,ue=vc({keyframes:[_.value,L(_.value)],velocity:Ig(z,ce,_.value),damping:p,stiffness:x,restDelta:E,restSpeed:S}))};return q(0),{calculatedDuration:null,next:ce=>{let $=!1;return!ue&&ie===void 0&&($=!0,Q(ce),q(ce)),ie!==void 0&&ce>=ie?ue.next(ce-ie):(!$&&Q(ce),_)}}}function zw(r,o,a){const d=[],p=a||Vi.mix||Sg,x=r.length-1;for(let y=0;y<x;y++){let b=p(r[y],r[y+1]);if(o){const w=Array.isArray(o)?o[y]||Xr:o;b=Xa(w,b)}d.push(b)}return d}function Uw(r,o,{clamp:a=!0,ease:d,mixer:p}={}){const x=r.length;if(md(x===o.length),x===1)return()=>o[0];if(x===2&&o[0]===o[1])return()=>o[1];const y=r[0]===r[1];r[0]>r[x-1]&&(r=[...r].reverse(),o=[...o].reverse());const b=zw(o,d,p),w=b.length,E=S=>{if(y&&S<r[0])return o[0];let I=0;if(w>1)for(;I<r.length-2&&!(S<r[I+1]);I++);const _=Ba(r[I],r[I+1],S);return b[I](_)};return a?S=>E(ji(r[0],r[x-1],S)):E}function Ww(r,o){const a=r[r.length-1];for(let d=1;d<=o;d++){const p=Ba(0,o,d);r.push(ln(a,1,p))}}function Hw(r){const o=[0];return Ww(o,r.length-1),o}function Gw(r,o){return r.map(a=>a*o)}function Xw(r,o){return r.map(()=>o||gg).splice(0,r.length-1)}function ka({duration:r=300,keyframes:o,times:a,ease:d="easeInOut"}){const p=rw(d)?d.map(y1):y1(d),x={done:!1,value:o[0]},y=Gw(a&&a.length===o.length?a:Hw(o),r),b=Uw(y,o,{ease:Array.isArray(p)?p:Xw(o,p)});return{calculatedDuration:r,next:w=>(x.value=b(w),x.done=w>=r,x)}}const Yw=r=>r!==null;function Id(r,{repeat:o,repeatType:a="loop"},d,p=1){const x=r.filter(Yw),b=p<0||o&&a!=="loop"&&o%2===1?0:x.length-1;return!b||d===void 0?x[b]:d}const Kw={decay:Mf,inertia:Mf,tween:ka,keyframes:ka,spring:vc};function Ng(r){typeof r.type=="string"&&(r.type=Kw[r.type])}class Nd{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(o=>{this.resolve=o})}notifyFinished(){this.resolve()}then(o,a){return this.finished.then(o,a)}}const Zw=r=>r/100;class _d extends Nd{constructor(o){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var d,p;const{motionValue:a}=this.options;a&&a.updatedAt!==Er.now()&&this.tick(Er.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(p=(d=this.options).onStop)==null||p.call(d))},this.options=o,this.initAnimation(),this.play(),o.autoplay===!1&&this.pause()}initAnimation(){const{options:o}=this;Ng(o);const{type:a=ka,repeat:d=0,repeatDelay:p=0,repeatType:x,velocity:y=0}=o;let{keyframes:b}=o;const w=a||ka;w!==ka&&typeof b[0]!="number"&&(this.mixKeyframes=Xa(Zw,Sg(b[0],b[1])),b=[0,100]);const E=w({...o,keyframes:b});x==="mirror"&&(this.mirroredGenerator=w({...o,keyframes:[...b].reverse(),velocity:-y})),E.calculatedDuration===null&&(E.calculatedDuration=Td(E));const{calculatedDuration:S}=E;this.calculatedDuration=S,this.resolvedDuration=S+p,this.totalDuration=this.resolvedDuration*(d+1)-p,this.generator=E}updateTime(o){const a=Math.round(o-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=a}tick(o,a=!1){const{generator:d,totalDuration:p,mixKeyframes:x,mirroredGenerator:y,resolvedDuration:b,calculatedDuration:w}=this;if(this.startTime===null)return d.next(0);const{delay:E=0,keyframes:S,repeat:I,repeatType:_,repeatDelay:D,type:L,onUpdate:B,finalKeyframe:F}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,o):this.speed<0&&(this.startTime=Math.min(o-p/this.speed,this.startTime)),a?this.currentTime=o:this.updateTime(o);const V=this.currentTime-E*(this.playbackSpeed>=0?1:-1),W=this.playbackSpeed>=0?V<0:V>p;this.currentTime=Math.max(V,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let z=this.currentTime,Q=d;if(I){const ce=Math.min(this.currentTime,p)/b;let $=Math.floor(ce),Ne=ce%1;!Ne&&ce>=1&&(Ne=1),Ne===1&&$--,$=Math.min($,I+1),!!($%2)&&(_==="reverse"?(Ne=1-Ne,D&&(Ne-=D/b)):_==="mirror"&&(Q=y)),z=ji(0,1,Ne)*b}const ie=W?{done:!1,value:S[0]}:Q.next(z);x&&(ie.value=x(ie.value));let{done:ue}=ie;!W&&w!==null&&(ue=this.playbackSpeed>=0?this.currentTime>=p:this.currentTime<=0);const q=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ue);return q&&L!==Mf&&(ie.value=Id(S,this.options,F,this.speed)),B&&B(ie.value),q&&this.finish(),ie}then(o,a){return this.finished.then(o,a)}get duration(){return mi(this.calculatedDuration)}get time(){return mi(this.currentTime)}set time(o){var a;o=gi(o),this.currentTime=o,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=o:this.driver&&(this.startTime=this.driver.now()-o/this.playbackSpeed),(a=this.driver)==null||a.start(!1)}get speed(){return this.playbackSpeed}set speed(o){this.updateTime(Er.now());const a=this.playbackSpeed!==o;this.playbackSpeed=o,a&&(this.time=mi(this.currentTime))}play(){var p,x;if(this.isStopped)return;const{driver:o=Ow,startTime:a}=this.options;this.driver||(this.driver=o(y=>this.tick(y))),(x=(p=this.options).onPlay)==null||x.call(p);const d=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=d):this.holdTime!==null?this.startTime=d-this.holdTime:this.startTime||(this.startTime=a??d),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Er.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var o,a;this.notifyFinished(),this.teardown(),this.state="finished",(a=(o=this.options).onComplete)==null||a.call(o)}cancel(){var o,a;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(a=(o=this.options).onCancel)==null||a.call(o)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(o){return this.startTime=0,this.tick(o,!0)}attachTimeline(o){var a;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(a=this.driver)==null||a.stop(),o.observe(this)}}function $w(r){for(let o=1;o<r.length;o++)r[o]??(r[o]=r[o-1])}const Zs=r=>r*180/Math.PI,Df=r=>{const o=Zs(Math.atan2(r[1],r[0]));return Lf(o)},qw={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:r=>(Math.abs(r[0])+Math.abs(r[3]))/2,rotate:Df,rotateZ:Df,skewX:r=>Zs(Math.atan(r[1])),skewY:r=>Zs(Math.atan(r[2])),skew:r=>(Math.abs(r[1])+Math.abs(r[2]))/2},Lf=r=>(r=r%360,r<0&&(r+=360),r),S1=Df,T1=r=>Math.sqrt(r[0]*r[0]+r[1]*r[1]),I1=r=>Math.sqrt(r[4]*r[4]+r[5]*r[5]),Qw={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:T1,scaleY:I1,scale:r=>(T1(r)+I1(r))/2,rotateX:r=>Lf(Zs(Math.atan2(r[6],r[5]))),rotateY:r=>Lf(Zs(Math.atan2(-r[2],r[0]))),rotateZ:S1,rotate:S1,skewX:r=>Zs(Math.atan(r[4])),skewY:r=>Zs(Math.atan(r[1])),skew:r=>(Math.abs(r[1])+Math.abs(r[4]))/2};function Bf(r){return r.includes("scale")?1:0}function Ff(r,o){if(!r||r==="none")return Bf(o);const a=r.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let d,p;if(a)d=Qw,p=a;else{const b=r.match(/^matrix\(([-\d.e\s,]+)\)$/u);d=qw,p=b}if(!p)return Bf(o);const x=d[o],y=p[1].split(",").map(ev);return typeof x=="function"?x(y):y[x]}const Jw=(r,o)=>{const{transform:a="none"}=getComputedStyle(r);return Ff(a,o)};function ev(r){return parseFloat(r.trim())}const Vo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],zo=new Set(Vo),N1=r=>r===jo||r===ut,tv=new Set(["x","y","z"]),nv=Vo.filter(r=>!tv.has(r));function rv(r){const o=[];return nv.forEach(a=>{const d=r.getValue(a);d!==void 0&&(o.push([a,d.get()]),d.set(a.startsWith("scale")?1:0))}),o}const qs={width:({x:r},{paddingLeft:o="0",paddingRight:a="0"})=>r.max-r.min-parseFloat(o)-parseFloat(a),height:({y:r},{paddingTop:o="0",paddingBottom:a="0"})=>r.max-r.min-parseFloat(o)-parseFloat(a),top:(r,{top:o})=>parseFloat(o),left:(r,{left:o})=>parseFloat(o),bottom:({y:r},{top:o})=>parseFloat(o)+(r.max-r.min),right:({x:r},{left:o})=>parseFloat(o)+(r.max-r.min),x:(r,{transform:o})=>Ff(o,"x"),y:(r,{transform:o})=>Ff(o,"y")};qs.translateX=qs.x;qs.translateY=qs.y;const Qs=new Set;let jf=!1,Vf=!1,zf=!1;function _g(){if(Vf){const r=Array.from(Qs).filter(d=>d.needsMeasurement),o=new Set(r.map(d=>d.element)),a=new Map;o.forEach(d=>{const p=rv(d);p.length&&(a.set(d,p),d.render())}),r.forEach(d=>d.measureInitialState()),o.forEach(d=>{d.render();const p=a.get(d);p&&p.forEach(([x,y])=>{var b;(b=d.getValue(x))==null||b.set(y)})}),r.forEach(d=>d.measureEndState()),r.forEach(d=>{d.suspendedScrollY!==void 0&&window.scrollTo(0,d.suspendedScrollY)})}Vf=!1,jf=!1,Qs.forEach(r=>r.complete(zf)),Qs.clear()}function Rg(){Qs.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(Vf=!0)})}function iv(){zf=!0,Rg(),_g(),zf=!1}class Rd{constructor(o,a,d,p,x,y=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...o],this.onComplete=a,this.name=d,this.motionValue=p,this.element=x,this.isAsync=y}scheduleResolve(){this.state="scheduled",this.isAsync?(Qs.add(this),jf||(jf=!0,tn.read(Rg),tn.resolveKeyframes(_g))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:o,name:a,element:d,motionValue:p}=this;if(o[0]===null){const x=p==null?void 0:p.get(),y=o[o.length-1];if(x!==void 0)o[0]=x;else if(d&&a){const b=d.readValue(a,y);b!=null&&(o[0]=b)}o[0]===void 0&&(o[0]=y),p&&x===void 0&&p.set(o[0])}$w(o)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(o=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,o),Qs.delete(this)}cancel(){this.state==="scheduled"&&(Qs.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const sv=r=>r.startsWith("--");function ov(r,o,a){sv(o)?r.style.setProperty(o,a):r.style[o]=a}const av=xd(()=>window.ScrollTimeline!==void 0),lv={};function cv(r,o){const a=xd(r);return()=>lv[o]??a()}const kg=cv(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),_a=([r,o,a,d])=>`cubic-bezier(${r}, ${o}, ${a}, ${d})`,_1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:_a([0,.65,.55,1]),circOut:_a([.55,0,1,.45]),backIn:_a([.31,.01,.66,-.59]),backOut:_a([.33,1.53,.69,.99])};function Og(r,o){if(r)return typeof r=="function"?kg()?Tg(r,o):"ease-out":mg(r)?_a(r):Array.isArray(r)?r.map(a=>Og(a,o)||_1.easeOut):_1[r]}function uv(r,o,a,{delay:d=0,duration:p=300,repeat:x=0,repeatType:y="loop",ease:b="easeOut",times:w}={},E=void 0){const S={[o]:a};w&&(S.offset=w);const I=Og(b,p);Array.isArray(I)&&(S.easing=I);const _={delay:d,duration:p,easing:Array.isArray(I)?"linear":I,fill:"both",iterations:x+1,direction:y==="reverse"?"alternate":"normal"};return E&&(_.pseudoElement=E),r.animate(S,_)}function Pg(r){return typeof r=="function"&&"applyToOptions"in r}function fv({type:r,...o}){return Pg(r)&&kg()?r.applyToOptions(o):(o.duration??(o.duration=300),o.ease??(o.ease="easeOut"),o)}class dv extends Nd{constructor(o){if(super(),this.finishedTime=null,this.isStopped=!1,!o)return;const{element:a,name:d,keyframes:p,pseudoElement:x,allowFlatten:y=!1,finalKeyframe:b,onComplete:w}=o;this.isPseudoElement=!!x,this.allowFlatten=y,this.options=o,md(typeof o.type!="string");const E=fv(o);this.animation=uv(a,d,p,E,x),E.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!x){const S=Id(p,this.options,b,this.speed);this.updateMotionValue?this.updateMotionValue(S):ov(a,d,S),this.animation.cancel()}w==null||w(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var o,a;(a=(o=this.animation).finish)==null||a.call(o)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:o}=this;o==="idle"||o==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var o,a;this.isPseudoElement||(a=(o=this.animation).commitStyles)==null||a.call(o)}get duration(){var a,d;const o=((d=(a=this.animation.effect)==null?void 0:a.getComputedTiming)==null?void 0:d.call(a).duration)||0;return mi(Number(o))}get time(){return mi(Number(this.animation.currentTime)||0)}set time(o){this.finishedTime=null,this.animation.currentTime=gi(o)}get speed(){return this.animation.playbackRate}set speed(o){o<0&&(this.finishedTime=null),this.animation.playbackRate=o}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(o){this.animation.startTime=o}attachTimeline({timeline:o,observe:a}){var d;return this.allowFlatten&&((d=this.animation.effect)==null||d.updateTiming({easing:"linear"})),this.animation.onfinish=null,o&&av()?(this.animation.timeline=o,Xr):a(this)}}const Mg={anticipate:dg,backInOut:fg,circInOut:pg};function hv(r){return r in Mg}function pv(r){typeof r.ease=="string"&&hv(r.ease)&&(r.ease=Mg[r.ease])}const R1=10;class gv extends dv{constructor(o){pv(o),Ng(o),super(o),o.startTime&&(this.startTime=o.startTime),this.options=o}updateMotionValue(o){const{motionValue:a,onUpdate:d,onComplete:p,element:x,...y}=this.options;if(!a)return;if(o!==void 0){a.set(o);return}const b=new _d({...y,autoplay:!1}),w=gi(this.finishedTime??this.time);a.setWithVelocity(b.sample(w-R1).value,b.sample(w).value,R1),b.stop()}}const k1=(r,o)=>o==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(vs.test(r)||r==="0")&&!r.startsWith("url("));function mv(r){const o=r[0];if(r.length===1)return!0;for(let a=0;a<r.length;a++)if(r[a]!==o)return!0}function xv(r,o,a,d){const p=r[0];if(p===null)return!1;if(o==="display"||o==="visibility")return!0;const x=r[r.length-1],y=k1(p,o),b=k1(x,o);return!y||!b?!1:mv(r)||(a==="spring"||Pg(a))&&d}function Uf(r){r.duration=0,r.type}const yv=new Set(["opacity","clipPath","filter","transform"]),wv=xd(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function vv(r){var S;const{motionValue:o,name:a,repeatDelay:d,repeatType:p,damping:x,type:y}=r;if(!(((S=o==null?void 0:o.owner)==null?void 0:S.current)instanceof HTMLElement))return!1;const{onUpdate:w,transformTemplate:E}=o.owner.getProps();return wv()&&a&&yv.has(a)&&(a!=="transform"||!E)&&!w&&!d&&p!=="mirror"&&x!==0&&y!=="inertia"}const Cv=40;class Ev extends Nd{constructor({autoplay:o=!0,delay:a=0,type:d="keyframes",repeat:p=0,repeatDelay:x=0,repeatType:y="loop",keyframes:b,name:w,motionValue:E,element:S,...I}){var L;super(),this.stop=()=>{var B,F;this._animation&&(this._animation.stop(),(B=this.stopTimeline)==null||B.call(this)),(F=this.keyframeResolver)==null||F.cancel()},this.createdAt=Er.now();const _={autoplay:o,delay:a,type:d,repeat:p,repeatDelay:x,repeatType:y,name:w,motionValue:E,element:S,...I},D=(S==null?void 0:S.KeyframeResolver)||Rd;this.keyframeResolver=new D(b,(B,F,V)=>this.onKeyframesResolved(B,F,_,!V),w,E,S),(L=this.keyframeResolver)==null||L.scheduleResolve()}onKeyframesResolved(o,a,d,p){this.keyframeResolver=void 0;const{name:x,type:y,velocity:b,delay:w,isHandoff:E,onUpdate:S}=d;this.resolvedAt=Er.now(),xv(o,x,y,b)||((Vi.instantAnimations||!w)&&(S==null||S(Id(o,d,a))),o[0]=o[o.length-1],Uf(d),d.repeat=0);const _={startTime:p?this.resolvedAt?this.resolvedAt-this.createdAt>Cv?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:a,...d,keyframes:o},D=!E&&vv(_)?new gv({..._,element:_.motionValue.owner.current}):new _d(_);D.finished.then(()=>this.notifyFinished()).catch(Xr),this.pendingTimeline&&(this.stopTimeline=D.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=D}get finished(){return this._animation?this.animation.finished:this._finished}then(o,a){return this.finished.finally(o).then(()=>{})}get animation(){var o;return this._animation||((o=this.keyframeResolver)==null||o.resume(),iv()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(o){this.animation.time=o}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(o){this.animation.speed=o}get startTime(){return this.animation.startTime}attachTimeline(o){return this._animation?this.stopTimeline=this.animation.attachTimeline(o):this.pendingTimeline=o,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var o;this._animation&&this.animation.cancel(),(o=this.keyframeResolver)==null||o.cancel()}}const Av=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function bv(r){const o=Av.exec(r);if(!o)return[,];const[,a,d,p]=o;return[`--${a??d}`,p]}function Dg(r,o,a=1){const[d,p]=bv(r);if(!d)return;const x=window.getComputedStyle(o).getPropertyValue(d);if(x){const y=x.trim();return rg(y)?parseFloat(y):y}return Ed(p)?Dg(p,o,a+1):p}function kd(r,o){return(r==null?void 0:r[o])??(r==null?void 0:r.default)??r}const Lg=new Set(["width","height","top","left","right","bottom",...Vo]),Sv={test:r=>r==="auto",parse:r=>r},Bg=r=>o=>o.test(r),Fg=[jo,ut,xi,ms,mw,gw,Sv],O1=r=>Fg.find(Bg(r));function Tv(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||sg(r):!0}const Iv=new Set(["brightness","contrast","saturate","opacity"]);function Nv(r){const[o,a]=r.slice(0,-1).split("(");if(o==="drop-shadow")return r;const[d]=a.match(Ad)||[];if(!d)return r;const p=a.replace(d,"");let x=Iv.has(o)?1:0;return d!==a&&(x*=100),o+"("+x+p+")"}const _v=/\b([a-z-]*)\(.*?\)/gu,Wf={...vs,getAnimatableNone:r=>{const o=r.match(_v);return o?o.map(Nv).join(" "):r}},P1={...jo,transform:Math.round},Rv={rotate:ms,rotateX:ms,rotateY:ms,rotateZ:ms,scale:rc,scaleX:rc,scaleY:rc,scaleZ:rc,skew:ms,skewX:ms,skewY:ms,distance:ut,translateX:ut,translateY:ut,translateZ:ut,x:ut,y:ut,z:ut,perspective:ut,transformPerspective:ut,opacity:Fa,originX:w1,originY:w1,originZ:ut},Od={borderWidth:ut,borderTopWidth:ut,borderRightWidth:ut,borderBottomWidth:ut,borderLeftWidth:ut,borderRadius:ut,radius:ut,borderTopLeftRadius:ut,borderTopRightRadius:ut,borderBottomRightRadius:ut,borderBottomLeftRadius:ut,width:ut,maxWidth:ut,height:ut,maxHeight:ut,top:ut,right:ut,bottom:ut,left:ut,padding:ut,paddingTop:ut,paddingRight:ut,paddingBottom:ut,paddingLeft:ut,margin:ut,marginTop:ut,marginRight:ut,marginBottom:ut,marginLeft:ut,backgroundPositionX:ut,backgroundPositionY:ut,...Rv,zIndex:P1,fillOpacity:Fa,strokeOpacity:Fa,numOctaves:P1},kv={...Od,color:Sn,backgroundColor:Sn,outlineColor:Sn,fill:Sn,stroke:Sn,borderColor:Sn,borderTopColor:Sn,borderRightColor:Sn,borderBottomColor:Sn,borderLeftColor:Sn,filter:Wf,WebkitFilter:Wf},jg=r=>kv[r];function Vg(r,o){let a=jg(r);return a!==Wf&&(a=vs),a.getAnimatableNone?a.getAnimatableNone(o):void 0}const Ov=new Set(["auto","none","0"]);function Pv(r,o,a){let d=0,p;for(;d<r.length&&!p;){const x=r[d];typeof x=="string"&&!Ov.has(x)&&ja(x).values.length&&(p=r[d]),d++}if(p&&a)for(const x of o)r[x]=Vg(a,p)}class Mv extends Rd{constructor(o,a,d,p,x){super(o,a,d,p,x,!0)}readKeyframes(){const{unresolvedKeyframes:o,element:a,name:d}=this;if(!a||!a.current)return;super.readKeyframes();for(let w=0;w<o.length;w++){let E=o[w];if(typeof E=="string"&&(E=E.trim(),Ed(E))){const S=Dg(E,a.current);S!==void 0&&(o[w]=S),w===o.length-1&&(this.finalKeyframe=E)}}if(this.resolveNoneKeyframes(),!Lg.has(d)||o.length!==2)return;const[p,x]=o,y=O1(p),b=O1(x);if(y!==b)if(N1(y)&&N1(b))for(let w=0;w<o.length;w++){const E=o[w];typeof E=="string"&&(o[w]=parseFloat(E))}else qs[d]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:o,name:a}=this,d=[];for(let p=0;p<o.length;p++)(o[p]===null||Tv(o[p]))&&d.push(p);d.length&&Pv(o,d,a)}measureInitialState(){const{element:o,unresolvedKeyframes:a,name:d}=this;if(!o||!o.current)return;d==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=qs[d](o.measureViewportBox(),window.getComputedStyle(o.current)),a[0]=this.measuredOrigin;const p=a[a.length-1];p!==void 0&&o.getValue(d,p).jump(p,!1)}measureEndState(){var b;const{element:o,name:a,unresolvedKeyframes:d}=this;if(!o||!o.current)return;const p=o.getValue(a);p&&p.jump(this.measuredOrigin,!1);const x=d.length-1,y=d[x];d[x]=qs[a](o.measureViewportBox(),window.getComputedStyle(o.current)),y!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=y),(b=this.removedTransforms)!=null&&b.length&&this.removedTransforms.forEach(([w,E])=>{o.getValue(w).set(E)}),this.resolveNoneKeyframes()}}function Dv(r,o,a){if(r instanceof EventTarget)return[r];if(typeof r=="string"){let d=document;const p=(a==null?void 0:a[r])??d.querySelectorAll(r);return p?Array.from(p):[]}return Array.from(r)}const zg=(r,o)=>o&&typeof r=="number"?o.transform(r):r;function Ug(r){return ig(r)&&"offsetHeight"in r}const M1=30,Lv=r=>!isNaN(parseFloat(r));class Bv{constructor(o,a={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=d=>{var x;const p=Er.now();if(this.updatedAt!==p&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(d),this.current!==this.prev&&((x=this.events.change)==null||x.notify(this.current),this.dependents))for(const y of this.dependents)y.dirty()},this.hasAnimated=!1,this.setCurrent(o),this.owner=a.owner}setCurrent(o){this.current=o,this.updatedAt=Er.now(),this.canTrackVelocity===null&&o!==void 0&&(this.canTrackVelocity=Lv(this.current))}setPrevFrameValue(o=this.current){this.prevFrameValue=o,this.prevUpdatedAt=this.updatedAt}onChange(o){return this.on("change",o)}on(o,a){this.events[o]||(this.events[o]=new yd);const d=this.events[o].add(a);return o==="change"?()=>{d(),tn.read(()=>{this.events.change.getSize()||this.stop()})}:d}clearListeners(){for(const o in this.events)this.events[o].clear()}attach(o,a){this.passiveEffect=o,this.stopPassiveEffect=a}set(o){this.passiveEffect?this.passiveEffect(o,this.updateAndNotify):this.updateAndNotify(o)}setWithVelocity(o,a,d){this.set(a),this.prev=void 0,this.prevFrameValue=o,this.prevUpdatedAt=this.updatedAt-d}jump(o,a=!0){this.updateAndNotify(o),this.prev=o,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var o;(o=this.events.change)==null||o.notify(this.current)}addDependent(o){this.dependents||(this.dependents=new Set),this.dependents.add(o)}removeDependent(o){this.dependents&&this.dependents.delete(o)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const o=Er.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||o-this.updatedAt>M1)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,M1);return og(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(o){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=o(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var o,a;(o=this.dependents)==null||o.clear(),(a=this.events.destroy)==null||a.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Do(r,o){return new Bv(r,o)}const{schedule:Pd}=xg(queueMicrotask,!1),ii={x:!1,y:!1};function Wg(){return ii.x||ii.y}function Fv(r){return r==="x"||r==="y"?ii[r]?null:(ii[r]=!0,()=>{ii[r]=!1}):ii.x||ii.y?null:(ii.x=ii.y=!0,()=>{ii.x=ii.y=!1})}function Hg(r,o){const a=Dv(r),d=new AbortController,p={passive:!0,...o,signal:d.signal};return[a,p,()=>d.abort()]}function D1(r){return!(r.pointerType==="touch"||Wg())}function jv(r,o,a={}){const[d,p,x]=Hg(r,a),y=b=>{if(!D1(b))return;const{target:w}=b,E=o(w,b);if(typeof E!="function"||!w)return;const S=I=>{D1(I)&&(E(I),w.removeEventListener("pointerleave",S))};w.addEventListener("pointerleave",S,p)};return d.forEach(b=>{b.addEventListener("pointerenter",y,p)}),x}const Gg=(r,o)=>o?r===o?!0:Gg(r,o.parentElement):!1,Md=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,Vv=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function zv(r){return Vv.has(r.tagName)||r.tabIndex!==-1}const fc=new WeakSet;function L1(r){return o=>{o.key==="Enter"&&r(o)}}function xf(r,o){r.dispatchEvent(new PointerEvent("pointer"+o,{isPrimary:!0,bubbles:!0}))}const Uv=(r,o)=>{const a=r.currentTarget;if(!a)return;const d=L1(()=>{if(fc.has(a))return;xf(a,"down");const p=L1(()=>{xf(a,"up")}),x=()=>xf(a,"cancel");a.addEventListener("keyup",p,o),a.addEventListener("blur",x,o)});a.addEventListener("keydown",d,o),a.addEventListener("blur",()=>a.removeEventListener("keydown",d),o)};function B1(r){return Md(r)&&!Wg()}function Wv(r,o,a={}){const[d,p,x]=Hg(r,a),y=b=>{const w=b.currentTarget;if(!B1(b))return;fc.add(w);const E=o(w,b),S=(D,L)=>{window.removeEventListener("pointerup",I),window.removeEventListener("pointercancel",_),fc.has(w)&&fc.delete(w),B1(D)&&typeof E=="function"&&E(D,{success:L})},I=D=>{S(D,w===window||w===document||a.useGlobalTarget||Gg(w,D.target))},_=D=>{S(D,!1)};window.addEventListener("pointerup",I,p),window.addEventListener("pointercancel",_,p)};return d.forEach(b=>{(a.useGlobalTarget?window:b).addEventListener("pointerdown",y,p),Ug(b)&&(b.addEventListener("focus",E=>Uv(E,p)),!zv(b)&&!b.hasAttribute("tabindex")&&(b.tabIndex=0))}),x}function Xg(r){return ig(r)&&"ownerSVGElement"in r}function Hv(r){return Xg(r)&&r.tagName==="svg"}const or=r=>!!(r&&r.getVelocity),Gv=[...Fg,Sn,vs],Xv=r=>Gv.find(Bg(r)),Dd=R.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});class Yv extends R.Component{getSnapshotBeforeUpdate(o){const a=this.props.childRef.current;if(a&&o.isPresent&&!this.props.isPresent){const d=a.offsetParent,p=Ug(d)&&d.offsetWidth||0,x=this.props.sizeRef.current;x.height=a.offsetHeight||0,x.width=a.offsetWidth||0,x.top=a.offsetTop,x.left=a.offsetLeft,x.right=p-x.width-x.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Kv({children:r,isPresent:o,anchorX:a,root:d}){const p=R.useId(),x=R.useRef(null),y=R.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:b}=R.useContext(Dd);return R.useInsertionEffect(()=>{const{width:w,height:E,top:S,left:I,right:_}=y.current;if(o||!x.current||!w||!E)return;const D=a==="left"?`left: ${I}`:`right: ${_}`;x.current.dataset.motionPopId=p;const L=document.createElement("style");b&&(L.nonce=b);const B=d??document.head;return B.appendChild(L),L.sheet&&L.sheet.insertRule(`
          [data-motion-pop-id="${p}"] {
            position: absolute !important;
            width: ${w}px !important;
            height: ${E}px !important;
            ${D}px !important;
            top: ${S}px !important;
          }
        `),()=>{B.contains(L)&&B.removeChild(L)}},[o]),A.jsx(Yv,{isPresent:o,childRef:x,sizeRef:y,children:R.cloneElement(r,{ref:x})})}const Zv=({children:r,initial:o,isPresent:a,onExitComplete:d,custom:p,presenceAffectsLayout:x,mode:y,anchorX:b,root:w})=>{const E=dd($v),S=R.useId();let I=!0,_=R.useMemo(()=>(I=!1,{id:S,initial:o,isPresent:a,custom:p,onExitComplete:D=>{E.set(D,!0);for(const L of E.values())if(!L)return;d&&d()},register:D=>(E.set(D,!1),()=>E.delete(D))}),[a,E,d]);return x&&I&&(_={..._}),R.useMemo(()=>{E.forEach((D,L)=>E.set(L,!1))},[a]),R.useEffect(()=>{!a&&!E.size&&d&&d()},[a]),y==="popLayout"&&(r=A.jsx(Kv,{isPresent:a,anchorX:b,root:w,children:r})),A.jsx(_c.Provider,{value:_,children:r})};function $v(){return new Map}function Yg(r=!0){const o=R.useContext(_c);if(o===null)return[!0,null];const{isPresent:a,onExitComplete:d,register:p}=o,x=R.useId();R.useEffect(()=>{if(r)return p(x)},[r]);const y=R.useCallback(()=>r&&d&&d(x),[x,d,r]);return!a&&d?[!1,y]:[!0]}const ic=r=>r.key||"";function F1(r){const o=[];return R.Children.forEach(r,a=>{R.isValidElement(a)&&o.push(a)}),o}const j1=({children:r,custom:o,initial:a=!0,onExitComplete:d,presenceAffectsLayout:p=!0,mode:x="sync",propagate:y=!1,anchorX:b="left",root:w})=>{const[E,S]=Yg(y),I=R.useMemo(()=>F1(r),[r]),_=y&&!E?[]:I.map(ic),D=R.useRef(!0),L=R.useRef(I),B=dd(()=>new Map),[F,V]=R.useState(I),[W,z]=R.useState(I);ng(()=>{D.current=!1,L.current=I;for(let ue=0;ue<W.length;ue++){const q=ic(W[ue]);_.includes(q)?B.delete(q):B.get(q)!==!0&&B.set(q,!1)}},[W,_.length,_.join("-")]);const Q=[];if(I!==F){let ue=[...I];for(let q=0;q<W.length;q++){const ce=W[q],$=ic(ce);_.includes($)||(ue.splice(q,0,ce),Q.push(ce))}return x==="wait"&&Q.length&&(ue=Q),z(F1(ue)),V(I),null}const{forceRender:ie}=R.useContext(fd);return A.jsx(A.Fragment,{children:W.map(ue=>{const q=ic(ue),ce=y&&!E?!1:I===W||_.includes(q),$=()=>{if(B.has(q))B.set(q,!0);else return;let Ne=!0;B.forEach(Pe=>{Pe||(Ne=!1)}),Ne&&(ie==null||ie(),z(L.current),y&&(S==null||S()),d&&d())};return A.jsx(Zv,{isPresent:ce,initial:!D.current||a?void 0:!1,custom:o,presenceAffectsLayout:p,mode:x,root:w,onExitComplete:ce?void 0:$,anchorX:b,children:ue},q)})})},Kg=R.createContext({strict:!1}),V1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Lo={};for(const r in V1)Lo[r]={isEnabled:o=>V1[r].some(a=>!!o[a])};function qv(r){for(const o in r)Lo[o]={...Lo[o],...r[o]}}const Qv=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Cc(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||Qv.has(r)}let Zg=r=>!Cc(r);function Jv(r){typeof r=="function"&&(Zg=o=>o.startsWith("on")?!Cc(o):r(o))}try{Jv(require("@emotion/is-prop-valid").default)}catch{}function e3(r,o,a){const d={};for(const p in r)p==="values"&&typeof r.values=="object"||(Zg(p)||a===!0&&Cc(p)||!o&&!Cc(p)||r.draggable&&p.startsWith("onDrag"))&&(d[p]=r[p]);return d}const Rc=R.createContext({});function kc(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}function Va(r){return typeof r=="string"||Array.isArray(r)}const Ld=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Bd=["initial",...Ld];function Oc(r){return kc(r.animate)||Bd.some(o=>Va(r[o]))}function $g(r){return!!(Oc(r)||r.variants)}function t3(r,o){if(Oc(r)){const{initial:a,animate:d}=r;return{initial:a===!1||Va(a)?a:void 0,animate:Va(d)?d:void 0}}return r.inherit!==!1?o:{}}function n3(r){const{initial:o,animate:a}=t3(r,R.useContext(Rc));return R.useMemo(()=>({initial:o,animate:a}),[z1(o),z1(a)])}function z1(r){return Array.isArray(r)?r.join(" "):r}const za={};function r3(r){for(const o in r)za[o]=r[o],Cd(o)&&(za[o].isCSSVariable=!0)}function qg(r,{layout:o,layoutId:a}){return zo.has(r)||r.startsWith("origin")||(o||a!==void 0)&&(!!za[r]||r==="opacity")}const i3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},s3=Vo.length;function o3(r,o,a){let d="",p=!0;for(let x=0;x<s3;x++){const y=Vo[x],b=r[y];if(b===void 0)continue;let w=!0;if(typeof b=="number"?w=b===(y.startsWith("scale")?1:0):w=parseFloat(b)===0,!w||a){const E=zg(b,Od[y]);if(!w){p=!1;const S=i3[y]||y;d+=`${S}(${E}) `}a&&(o[y]=E)}}return d=d.trim(),a?d=a(o,p?"":d):p&&(d="none"),d}function Fd(r,o,a){const{style:d,vars:p,transformOrigin:x}=r;let y=!1,b=!1;for(const w in o){const E=o[w];if(zo.has(w)){y=!0;continue}else if(Cd(w)){p[w]=E;continue}else{const S=zg(E,Od[w]);w.startsWith("origin")?(b=!0,x[w]=S):d[w]=S}}if(o.transform||(y||a?d.transform=o3(o,r.transform,a):d.transform&&(d.transform="none")),b){const{originX:w="50%",originY:E="50%",originZ:S=0}=x;d.transformOrigin=`${w} ${E} ${S}`}}const jd=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Qg(r,o,a){for(const d in o)!or(o[d])&&!qg(d,a)&&(r[d]=o[d])}function a3({transformTemplate:r},o){return R.useMemo(()=>{const a=jd();return Fd(a,o,r),Object.assign({},a.vars,a.style)},[o])}function l3(r,o){const a=r.style||{},d={};return Qg(d,a,r),Object.assign(d,a3(r,o)),d}function c3(r,o){const a={},d=l3(r,o);return r.drag&&r.dragListener!==!1&&(a.draggable=!1,d.userSelect=d.WebkitUserSelect=d.WebkitTouchCallout="none",d.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(a.tabIndex=0),a.style=d,a}const u3={offset:"stroke-dashoffset",array:"stroke-dasharray"},f3={offset:"strokeDashoffset",array:"strokeDasharray"};function d3(r,o,a=1,d=0,p=!0){r.pathLength=1;const x=p?u3:f3;r[x.offset]=ut.transform(-d);const y=ut.transform(o),b=ut.transform(a);r[x.array]=`${y} ${b}`}function Jg(r,{attrX:o,attrY:a,attrScale:d,pathLength:p,pathSpacing:x=1,pathOffset:y=0,...b},w,E,S){if(Fd(r,b,E),w){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:I,style:_}=r;I.transform&&(_.transform=I.transform,delete I.transform),(_.transform||I.transformOrigin)&&(_.transformOrigin=I.transformOrigin??"50% 50%",delete I.transformOrigin),_.transform&&(_.transformBox=(S==null?void 0:S.transformBox)??"fill-box",delete I.transformBox),o!==void 0&&(I.x=o),a!==void 0&&(I.y=a),d!==void 0&&(I.scale=d),p!==void 0&&d3(I,p,x,y,!1)}const em=()=>({...jd(),attrs:{}}),tm=r=>typeof r=="string"&&r.toLowerCase()==="svg";function h3(r,o,a,d){const p=R.useMemo(()=>{const x=em();return Jg(x,o,tm(d),r.transformTemplate,r.style),{...x.attrs,style:{...x.style}}},[o]);if(r.style){const x={};Qg(x,r.style,r),p.style={...x,...p.style}}return p}const p3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Vd(r){return typeof r!="string"||r.includes("-")?!1:!!(p3.indexOf(r)>-1||/[A-Z]/u.test(r))}function g3(r,o,a,{latestValues:d},p,x=!1){const b=(Vd(r)?h3:c3)(o,d,p,r),w=e3(o,typeof r=="string",x),E=r!==R.Fragment?{...w,...b,ref:a}:{},{children:S}=o,I=R.useMemo(()=>or(S)?S.get():S,[S]);return R.createElement(r,{...E,children:I})}function U1(r){const o=[{},{}];return r==null||r.values.forEach((a,d)=>{o[0][d]=a.get(),o[1][d]=a.getVelocity()}),o}function zd(r,o,a,d){if(typeof o=="function"){const[p,x]=U1(d);o=o(a!==void 0?a:r.custom,p,x)}if(typeof o=="string"&&(o=r.variants&&r.variants[o]),typeof o=="function"){const[p,x]=U1(d);o=o(a!==void 0?a:r.custom,p,x)}return o}function dc(r){return or(r)?r.get():r}function m3({scrapeMotionValuesFromProps:r,createRenderState:o},a,d,p){return{latestValues:x3(a,d,p,r),renderState:o()}}function x3(r,o,a,d){const p={},x=d(r,{});for(const _ in x)p[_]=dc(x[_]);let{initial:y,animate:b}=r;const w=Oc(r),E=$g(r);o&&E&&!w&&r.inherit!==!1&&(y===void 0&&(y=o.initial),b===void 0&&(b=o.animate));let S=a?a.initial===!1:!1;S=S||y===!1;const I=S?b:y;if(I&&typeof I!="boolean"&&!kc(I)){const _=Array.isArray(I)?I:[I];for(let D=0;D<_.length;D++){const L=zd(r,_[D]);if(L){const{transitionEnd:B,transition:F,...V}=L;for(const W in V){let z=V[W];if(Array.isArray(z)){const Q=S?z.length-1:0;z=z[Q]}z!==null&&(p[W]=z)}for(const W in B)p[W]=B[W]}}}return p}const nm=r=>(o,a)=>{const d=R.useContext(Rc),p=R.useContext(_c),x=()=>m3(r,o,d,p);return a?x():dd(x)};function Ud(r,o,a){var x;const{style:d}=r,p={};for(const y in d)(or(d[y])||o.style&&or(o.style[y])||qg(y,r)||((x=a==null?void 0:a.getValue(y))==null?void 0:x.liveStyle)!==void 0)&&(p[y]=d[y]);return p}const y3=nm({scrapeMotionValuesFromProps:Ud,createRenderState:jd});function rm(r,o,a){const d=Ud(r,o,a);for(const p in r)if(or(r[p])||or(o[p])){const x=Vo.indexOf(p)!==-1?"attr"+p.charAt(0).toUpperCase()+p.substring(1):p;d[x]=r[p]}return d}const w3=nm({scrapeMotionValuesFromProps:rm,createRenderState:em}),v3=Symbol.for("motionComponentSymbol");function No(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function C3(r,o,a){return R.useCallback(d=>{d&&r.onMount&&r.onMount(d),o&&(d?o.mount(d):o.unmount()),a&&(typeof a=="function"?a(d):No(a)&&(a.current=d))},[o])}const Wd=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),E3="framerAppearId",im="data-"+Wd(E3),sm=R.createContext({});function A3(r,o,a,d,p){var B,F;const{visualElement:x}=R.useContext(Rc),y=R.useContext(Kg),b=R.useContext(_c),w=R.useContext(Dd).reducedMotion,E=R.useRef(null);d=d||y.renderer,!E.current&&d&&(E.current=d(r,{visualState:o,parent:x,props:a,presenceContext:b,blockInitialAnimation:b?b.initial===!1:!1,reducedMotionConfig:w}));const S=E.current,I=R.useContext(sm);S&&!S.projection&&p&&(S.type==="html"||S.type==="svg")&&b3(E.current,a,p,I);const _=R.useRef(!1);R.useInsertionEffect(()=>{S&&_.current&&S.update(a,b)});const D=a[im],L=R.useRef(!!D&&!((B=window.MotionHandoffIsComplete)!=null&&B.call(window,D))&&((F=window.MotionHasOptimisedAnimation)==null?void 0:F.call(window,D)));return ng(()=>{S&&(_.current=!0,window.MotionIsMounted=!0,S.updateFeatures(),S.scheduleRenderMicrotask(),L.current&&S.animationState&&S.animationState.animateChanges())}),R.useEffect(()=>{S&&(!L.current&&S.animationState&&S.animationState.animateChanges(),L.current&&(queueMicrotask(()=>{var V;(V=window.MotionHandoffMarkAsComplete)==null||V.call(window,D)}),L.current=!1),S.enteringChildren=void 0)}),S}function b3(r,o,a,d){const{layoutId:p,layout:x,drag:y,dragConstraints:b,layoutScroll:w,layoutRoot:E,layoutCrossfade:S}=o;r.projection=new a(r.latestValues,o["data-framer-portal-id"]?void 0:om(r.parent)),r.projection.setOptions({layoutId:p,layout:x,alwaysMeasureLayout:!!y||b&&No(b),visualElement:r,animationType:typeof x=="string"?x:"both",initialPromotionConfig:d,crossfade:S,layoutScroll:w,layoutRoot:E})}function om(r){if(r)return r.options.allowProjection!==!1?r.projection:om(r.parent)}function yf(r,{forwardMotionProps:o=!1}={},a,d){a&&qv(a);const p=Vd(r)?w3:y3;function x(b,w){let E;const S={...R.useContext(Dd),...b,layoutId:S3(b)},{isStatic:I}=S,_=n3(b),D=p(b,I);if(!I&&hd){T3();const L=I3(S);E=L.MeasureLayout,_.visualElement=A3(r,D,S,d,L.ProjectionNode)}return A.jsxs(Rc.Provider,{value:_,children:[E&&_.visualElement?A.jsx(E,{visualElement:_.visualElement,...S}):null,g3(r,b,C3(D,_.visualElement,w),D,I,o)]})}x.displayName=`motion.${typeof r=="string"?r:`create(${r.displayName??r.name??""})`}`;const y=R.forwardRef(x);return y[v3]=r,y}function S3({layoutId:r}){const o=R.useContext(fd).id;return o&&r!==void 0?o+"-"+r:r}function T3(r,o){R.useContext(Kg).strict}function I3(r){const{drag:o,layout:a}=Lo;if(!o&&!a)return{};const d={...o,...a};return{MeasureLayout:o!=null&&o.isEnabled(r)||a!=null&&a.isEnabled(r)?d.MeasureLayout:void 0,ProjectionNode:d.ProjectionNode}}function N3(r,o){if(typeof Proxy>"u")return yf;const a=new Map,d=(x,y)=>yf(x,y,r,o),p=(x,y)=>d(x,y);return new Proxy(p,{get:(x,y)=>y==="create"?d:(a.has(y)||a.set(y,yf(y,void 0,r,o)),a.get(y))})}function am({top:r,left:o,right:a,bottom:d}){return{x:{min:o,max:a},y:{min:r,max:d}}}function _3({x:r,y:o}){return{top:o.min,right:r.max,bottom:o.max,left:r.min}}function R3(r,o){if(!o)return r;const a=o({x:r.left,y:r.top}),d=o({x:r.right,y:r.bottom});return{top:a.y,left:a.x,bottom:d.y,right:d.x}}function wf(r){return r===void 0||r===1}function Hf({scale:r,scaleX:o,scaleY:a}){return!wf(r)||!wf(o)||!wf(a)}function Ys(r){return Hf(r)||lm(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function lm(r){return W1(r.x)||W1(r.y)}function W1(r){return r&&r!=="0%"}function Ec(r,o,a){const d=r-a,p=o*d;return a+p}function H1(r,o,a,d,p){return p!==void 0&&(r=Ec(r,p,d)),Ec(r,a,d)+o}function Gf(r,o=0,a=1,d,p){r.min=H1(r.min,o,a,d,p),r.max=H1(r.max,o,a,d,p)}function cm(r,{x:o,y:a}){Gf(r.x,o.translate,o.scale,o.originPoint),Gf(r.y,a.translate,a.scale,a.originPoint)}const G1=.999999999999,X1=1.0000000000001;function k3(r,o,a,d=!1){const p=a.length;if(!p)return;o.x=o.y=1;let x,y;for(let b=0;b<p;b++){x=a[b],y=x.projectionDelta;const{visualElement:w}=x.options;w&&w.props.style&&w.props.style.display==="contents"||(d&&x.options.layoutScroll&&x.scroll&&x!==x.root&&Ro(r,{x:-x.scroll.offset.x,y:-x.scroll.offset.y}),y&&(o.x*=y.x.scale,o.y*=y.y.scale,cm(r,y)),d&&Ys(x.latestValues)&&Ro(r,x.latestValues))}o.x<X1&&o.x>G1&&(o.x=1),o.y<X1&&o.y>G1&&(o.y=1)}function _o(r,o){r.min=r.min+o,r.max=r.max+o}function Y1(r,o,a,d,p=.5){const x=ln(r.min,r.max,p);Gf(r,o,a,x,d)}function Ro(r,o){Y1(r.x,o.x,o.scaleX,o.scale,o.originX),Y1(r.y,o.y,o.scaleY,o.scale,o.originY)}function um(r,o){return am(R3(r.getBoundingClientRect(),o))}function O3(r,o,a){const d=um(r,a),{scroll:p}=o;return p&&(_o(d.x,p.offset.x),_o(d.y,p.offset.y)),d}const K1=()=>({translate:0,scale:1,origin:0,originPoint:0}),ko=()=>({x:K1(),y:K1()}),Z1=()=>({min:0,max:0}),En=()=>({x:Z1(),y:Z1()}),Xf={current:null},fm={current:!1};function P3(){if(fm.current=!0,!!hd)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),o=()=>Xf.current=r.matches;r.addEventListener("change",o),o()}else Xf.current=!1}const M3=new WeakMap;function D3(r,o,a){for(const d in o){const p=o[d],x=a[d];if(or(p))r.addValue(d,p);else if(or(x))r.addValue(d,Do(p,{owner:r}));else if(x!==p)if(r.hasValue(d)){const y=r.getValue(d);y.liveStyle===!0?y.jump(p):y.hasAnimated||y.set(p)}else{const y=r.getStaticValue(d);r.addValue(d,Do(y!==void 0?y:p,{owner:r}))}}for(const d in a)o[d]===void 0&&r.removeValue(d);return o}const $1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class L3{scrapeMotionValuesFromProps(o,a,d){return{}}constructor({parent:o,props:a,presenceContext:d,reducedMotionConfig:p,blockInitialAnimation:x,visualState:y},b={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Rd,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=Er.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,tn.render(this.render,!1,!0))};const{latestValues:w,renderState:E}=y;this.latestValues=w,this.baseTarget={...w},this.initialValues=a.initial?{...w}:{},this.renderState=E,this.parent=o,this.props=a,this.presenceContext=d,this.depth=o?o.depth+1:0,this.reducedMotionConfig=p,this.options=b,this.blockInitialAnimation=!!x,this.isControllingVariants=Oc(a),this.isVariantNode=$g(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(o&&o.current);const{willChange:S,...I}=this.scrapeMotionValuesFromProps(a,{},this);for(const _ in I){const D=I[_];w[_]!==void 0&&or(D)&&D.set(w[_])}}mount(o){var a;this.current=o,M3.set(o,this),this.projection&&!this.projection.instance&&this.projection.mount(o),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((d,p)=>this.bindToMotionValue(p,d)),fm.current||P3(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Xf.current,(a=this.parent)==null||a.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var o;this.projection&&this.projection.unmount(),ws(this.notifyUpdate),ws(this.render),this.valueSubscriptions.forEach(a=>a()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(o=this.parent)==null||o.removeChild(this);for(const a in this.events)this.events[a].clear();for(const a in this.features){const d=this.features[a];d&&(d.unmount(),d.isMounted=!1)}this.current=null}addChild(o){this.children.add(o),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(o)}removeChild(o){this.children.delete(o),this.enteringChildren&&this.enteringChildren.delete(o)}bindToMotionValue(o,a){this.valueSubscriptions.has(o)&&this.valueSubscriptions.get(o)();const d=zo.has(o);d&&this.onBindTransform&&this.onBindTransform();const p=a.on("change",y=>{this.latestValues[o]=y,this.props.onUpdate&&tn.preRender(this.notifyUpdate),d&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let x;window.MotionCheckAppearSync&&(x=window.MotionCheckAppearSync(this,o,a)),this.valueSubscriptions.set(o,()=>{p(),x&&x(),a.owner&&a.stop()})}sortNodePosition(o){return!this.current||!this.sortInstanceNodePosition||this.type!==o.type?0:this.sortInstanceNodePosition(this.current,o.current)}updateFeatures(){let o="animation";for(o in Lo){const a=Lo[o];if(!a)continue;const{isEnabled:d,Feature:p}=a;if(!this.features[o]&&p&&d(this.props)&&(this.features[o]=new p(this)),this.features[o]){const x=this.features[o];x.isMounted?x.update():(x.mount(),x.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):En()}getStaticValue(o){return this.latestValues[o]}setStaticValue(o,a){this.latestValues[o]=a}update(o,a){(o.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=o,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let d=0;d<$1.length;d++){const p=$1[d];this.propEventSubscriptions[p]&&(this.propEventSubscriptions[p](),delete this.propEventSubscriptions[p]);const x="on"+p,y=o[x];y&&(this.propEventSubscriptions[p]=this.on(p,y))}this.prevMotionValues=D3(this,this.scrapeMotionValuesFromProps(o,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(o){return this.props.variants?this.props.variants[o]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(o){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(o),()=>a.variantChildren.delete(o)}addValue(o,a){const d=this.values.get(o);a!==d&&(d&&this.removeValue(o),this.bindToMotionValue(o,a),this.values.set(o,a),this.latestValues[o]=a.get())}removeValue(o){this.values.delete(o);const a=this.valueSubscriptions.get(o);a&&(a(),this.valueSubscriptions.delete(o)),delete this.latestValues[o],this.removeValueFromRenderState(o,this.renderState)}hasValue(o){return this.values.has(o)}getValue(o,a){if(this.props.values&&this.props.values[o])return this.props.values[o];let d=this.values.get(o);return d===void 0&&a!==void 0&&(d=Do(a===null?void 0:a,{owner:this}),this.addValue(o,d)),d}readValue(o,a){let d=this.latestValues[o]!==void 0||!this.current?this.latestValues[o]:this.getBaseTargetFromProps(this.props,o)??this.readValueFromInstance(this.current,o,this.options);return d!=null&&(typeof d=="string"&&(rg(d)||sg(d))?d=parseFloat(d):!Xv(d)&&vs.test(a)&&(d=Vg(o,a)),this.setBaseTarget(o,or(d)?d.get():d)),or(d)?d.get():d}setBaseTarget(o,a){this.baseTarget[o]=a}getBaseTarget(o){var x;const{initial:a}=this.props;let d;if(typeof a=="string"||typeof a=="object"){const y=zd(this.props,a,(x=this.presenceContext)==null?void 0:x.custom);y&&(d=y[o])}if(a&&d!==void 0)return d;const p=this.getBaseTargetFromProps(this.props,o);return p!==void 0&&!or(p)?p:this.initialValues[o]!==void 0&&d===void 0?void 0:this.baseTarget[o]}on(o,a){return this.events[o]||(this.events[o]=new yd),this.events[o].add(a)}notify(o,...a){this.events[o]&&this.events[o].notify(...a)}scheduleRenderMicrotask(){Pd.render(this.render)}}class dm extends L3{constructor(){super(...arguments),this.KeyframeResolver=Mv}sortInstanceNodePosition(o,a){return o.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(o,a){return o.style?o.style[a]:void 0}removeValueFromRenderState(o,{vars:a,style:d}){delete a[o],delete d[o]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:o}=this.props;or(o)&&(this.childSubscription=o.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function hm(r,{style:o,vars:a},d,p){const x=r.style;let y;for(y in o)x[y]=o[y];p==null||p.applyProjectionStyles(x,d);for(y in a)x.setProperty(y,a[y])}function B3(r){return window.getComputedStyle(r)}class F3 extends dm{constructor(){super(...arguments),this.type="html",this.renderInstance=hm}readValueFromInstance(o,a){var d;if(zo.has(a))return(d=this.projection)!=null&&d.isProjecting?Bf(a):Jw(o,a);{const p=B3(o),x=(Cd(a)?p.getPropertyValue(a):p[a])||0;return typeof x=="string"?x.trim():x}}measureInstanceViewportBox(o,{transformPagePoint:a}){return um(o,a)}build(o,a,d){Fd(o,a,d.transformTemplate)}scrapeMotionValuesFromProps(o,a,d){return Ud(o,a,d)}}const pm=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function j3(r,o,a,d){hm(r,o,void 0,d);for(const p in o.attrs)r.setAttribute(pm.has(p)?p:Wd(p),o.attrs[p])}class V3 extends dm{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=En}getBaseTargetFromProps(o,a){return o[a]}readValueFromInstance(o,a){if(zo.has(a)){const d=jg(a);return d&&d.default||0}return a=pm.has(a)?a:Wd(a),o.getAttribute(a)}scrapeMotionValuesFromProps(o,a,d){return rm(o,a,d)}build(o,a,d){Jg(o,a,this.isSVGTag,d.transformTemplate,d.style)}renderInstance(o,a,d,p){j3(o,a,d,p)}mount(o){this.isSVGTag=tm(o.tagName),super.mount(o)}}const z3=(r,o)=>Vd(r)?new V3(o):new F3(o,{allowProjection:r!==R.Fragment});function Po(r,o,a){const d=r.getProps();return zd(d,o,a!==void 0?a:d.custom,r)}const Yf=r=>Array.isArray(r);function U3(r,o,a){r.hasValue(o)?r.getValue(o).set(a):r.addValue(o,Do(a))}function W3(r){return Yf(r)?r[r.length-1]||0:r}function H3(r,o){const a=Po(r,o);let{transitionEnd:d={},transition:p={},...x}=a||{};x={...x,...d};for(const y in x){const b=W3(x[y]);U3(r,y,b)}}function G3(r){return!!(or(r)&&r.add)}function Kf(r,o){const a=r.getValue("willChange");if(G3(a))return a.add(o);if(!a&&Vi.WillChange){const d=new Vi.WillChange("auto");r.addValue("willChange",d),d.add(o)}}function gm(r){return r.props[im]}const X3=r=>r!==null;function Y3(r,{repeat:o,repeatType:a="loop"},d){const p=r.filter(X3),x=o&&a!=="loop"&&o%2===1?0:p.length-1;return p[x]}const K3={type:"spring",stiffness:500,damping:25,restSpeed:10},Z3=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),$3={type:"keyframes",duration:.8},q3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Q3=(r,{keyframes:o})=>o.length>2?$3:zo.has(r)?r.startsWith("scale")?Z3(o[1]):K3:q3;function J3({when:r,delay:o,delayChildren:a,staggerChildren:d,staggerDirection:p,repeat:x,repeatType:y,repeatDelay:b,from:w,elapsed:E,...S}){return!!Object.keys(S).length}const Hd=(r,o,a,d={},p,x)=>y=>{const b=kd(d,r)||{},w=b.delay||d.delay||0;let{elapsed:E=0}=d;E=E-gi(w);const S={keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:o.getVelocity(),...b,delay:-E,onUpdate:_=>{o.set(_),b.onUpdate&&b.onUpdate(_)},onComplete:()=>{y(),b.onComplete&&b.onComplete()},name:r,motionValue:o,element:x?void 0:p};J3(b)||Object.assign(S,Q3(r,S)),S.duration&&(S.duration=gi(S.duration)),S.repeatDelay&&(S.repeatDelay=gi(S.repeatDelay)),S.from!==void 0&&(S.keyframes[0]=S.from);let I=!1;if((S.type===!1||S.duration===0&&!S.repeatDelay)&&(Uf(S),S.delay===0&&(I=!0)),(Vi.instantAnimations||Vi.skipAnimations)&&(I=!0,Uf(S),S.delay=0),S.allowFlatten=!b.type&&!b.ease,I&&!x&&o.get()!==void 0){const _=Y3(S.keyframes,b);if(_!==void 0){tn.update(()=>{S.onUpdate(_),S.onComplete()});return}}return b.isSync?new _d(S):new Ev(S)};function eC({protectedKeys:r,needsAnimating:o},a){const d=r.hasOwnProperty(a)&&o[a]!==!0;return o[a]=!1,d}function mm(r,o,{delay:a=0,transitionOverride:d,type:p}={}){let{transition:x=r.getDefaultTransition(),transitionEnd:y,...b}=o;d&&(x=d);const w=[],E=p&&r.animationState&&r.animationState.getState()[p];for(const S in b){const I=r.getValue(S,r.latestValues[S]??null),_=b[S];if(_===void 0||E&&eC(E,S))continue;const D={delay:a,...kd(x||{},S)},L=I.get();if(L!==void 0&&!I.isAnimating&&!Array.isArray(_)&&_===L&&!D.velocity)continue;let B=!1;if(window.MotionHandoffAnimation){const V=gm(r);if(V){const W=window.MotionHandoffAnimation(V,S,tn);W!==null&&(D.startTime=W,B=!0)}}Kf(r,S),I.start(Hd(S,I,_,r.shouldReduceMotion&&Lg.has(S)?{type:!1}:D,r,B));const F=I.animation;F&&w.push(F)}return y&&Promise.all(w).then(()=>{tn.update(()=>{y&&H3(r,y)})}),w}function xm(r,o,a,d=0,p=1){const x=Array.from(r).sort((E,S)=>E.sortNodePosition(S)).indexOf(o),y=r.size,b=(y-1)*d;return typeof a=="function"?a(x,y):p===1?x*d:b-x*d}function Zf(r,o,a={}){var w;const d=Po(r,o,a.type==="exit"?(w=r.presenceContext)==null?void 0:w.custom:void 0);let{transition:p=r.getDefaultTransition()||{}}=d||{};a.transitionOverride&&(p=a.transitionOverride);const x=d?()=>Promise.all(mm(r,d,a)):()=>Promise.resolve(),y=r.variantChildren&&r.variantChildren.size?(E=0)=>{const{delayChildren:S=0,staggerChildren:I,staggerDirection:_}=p;return tC(r,o,E,S,I,_,a)}:()=>Promise.resolve(),{when:b}=p;if(b){const[E,S]=b==="beforeChildren"?[x,y]:[y,x];return E().then(()=>S())}else return Promise.all([x(),y(a.delay)])}function tC(r,o,a=0,d=0,p=0,x=1,y){const b=[];for(const w of r.variantChildren)w.notify("AnimationStart",o),b.push(Zf(w,o,{...y,delay:a+(typeof d=="function"?0:d)+xm(r.variantChildren,w,d,p,x)}).then(()=>w.notify("AnimationComplete",o)));return Promise.all(b)}function nC(r,o,a={}){r.notify("AnimationStart",o);let d;if(Array.isArray(o)){const p=o.map(x=>Zf(r,x,a));d=Promise.all(p)}else if(typeof o=="string")d=Zf(r,o,a);else{const p=typeof o=="function"?Po(r,o,a.custom):o;d=Promise.all(mm(r,p,a))}return d.then(()=>{r.notify("AnimationComplete",o)})}function ym(r,o){if(!Array.isArray(o))return!1;const a=o.length;if(a!==r.length)return!1;for(let d=0;d<a;d++)if(o[d]!==r[d])return!1;return!0}const rC=Bd.length;function wm(r){if(!r)return;if(!r.isControllingVariants){const a=r.parent?wm(r.parent)||{}:{};return r.props.initial!==void 0&&(a.initial=r.props.initial),a}const o={};for(let a=0;a<rC;a++){const d=Bd[a],p=r.props[d];(Va(p)||p===!1)&&(o[d]=p)}return o}const iC=[...Ld].reverse(),sC=Ld.length;function oC(r){return o=>Promise.all(o.map(({animation:a,options:d})=>nC(r,a,d)))}function aC(r){let o=oC(r),a=q1(),d=!0;const p=w=>(E,S)=>{var _;const I=Po(r,S,w==="exit"?(_=r.presenceContext)==null?void 0:_.custom:void 0);if(I){const{transition:D,transitionEnd:L,...B}=I;E={...E,...B,...L}}return E};function x(w){o=w(r)}function y(w){const{props:E}=r,S=wm(r.parent)||{},I=[],_=new Set;let D={},L=1/0;for(let F=0;F<sC;F++){const V=iC[F],W=a[V],z=E[V]!==void 0?E[V]:S[V],Q=Va(z),ie=V===w?W.isActive:null;ie===!1&&(L=F);let ue=z===S[V]&&z!==E[V]&&Q;if(ue&&d&&r.manuallyAnimateOnMount&&(ue=!1),W.protectedKeys={...D},!W.isActive&&ie===null||!z&&!W.prevProp||kc(z)||typeof z=="boolean")continue;const q=lC(W.prevProp,z);let ce=q||V===w&&W.isActive&&!ue&&Q||F>L&&Q,$=!1;const Ne=Array.isArray(z)?z:[z];let Pe=Ne.reduce(p(V),{});ie===!1&&(Pe={});const{prevResolvedValues:ke={}}=W,Re={...ke,...Pe},Ve=me=>{ce=!0,_.has(me)&&($=!0,_.delete(me)),W.needsAnimating[me]=!0;const pe=r.getValue(me);pe&&(pe.liveStyle=!1)};for(const me in Re){const pe=Pe[me],Oe=ke[me];if(D.hasOwnProperty(me))continue;let fe=!1;Yf(pe)&&Yf(Oe)?fe=!ym(pe,Oe):fe=pe!==Oe,fe?pe!=null?Ve(me):_.add(me):pe!==void 0&&_.has(me)?Ve(me):W.protectedKeys[me]=!0}W.prevProp=z,W.prevResolvedValues=Pe,W.isActive&&(D={...D,...Pe}),d&&r.blockInitialAnimation&&(ce=!1);const ee=ue&&q;ce&&(!ee||$)&&I.push(...Ne.map(me=>{const pe={type:V};if(typeof me=="string"&&d&&!ee&&r.manuallyAnimateOnMount&&r.parent){const{parent:Oe}=r,fe=Po(Oe,me);if(Oe.enteringChildren&&fe){const{delayChildren:X}=fe.transition||{};pe.delay=xm(Oe.enteringChildren,r,X)}}return{animation:me,options:pe}}))}if(_.size){const F={};if(typeof E.initial!="boolean"){const V=Po(r,Array.isArray(E.initial)?E.initial[0]:E.initial);V&&V.transition&&(F.transition=V.transition)}_.forEach(V=>{const W=r.getBaseTarget(V),z=r.getValue(V);z&&(z.liveStyle=!0),F[V]=W??null}),I.push({animation:F})}let B=!!I.length;return d&&(E.initial===!1||E.initial===E.animate)&&!r.manuallyAnimateOnMount&&(B=!1),d=!1,B?o(I):Promise.resolve()}function b(w,E){var I;if(a[w].isActive===E)return Promise.resolve();(I=r.variantChildren)==null||I.forEach(_=>{var D;return(D=_.animationState)==null?void 0:D.setActive(w,E)}),a[w].isActive=E;const S=y(w);for(const _ in a)a[_].protectedKeys={};return S}return{animateChanges:y,setActive:b,setAnimateFunction:x,getState:()=>a,reset:()=>{a=q1(),d=!0}}}function lC(r,o){return typeof o=="string"?o!==r:Array.isArray(o)?!ym(o,r):!1}function Xs(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function q1(){return{animate:Xs(!0),whileInView:Xs(),whileHover:Xs(),whileTap:Xs(),whileDrag:Xs(),whileFocus:Xs(),exit:Xs()}}class Cs{constructor(o){this.isMounted=!1,this.node=o}update(){}}class cC extends Cs{constructor(o){super(o),o.animationState||(o.animationState=aC(o))}updateAnimationControlsSubscription(){const{animate:o}=this.node.getProps();kc(o)&&(this.unmountControls=o.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:o}=this.node.getProps(),{animate:a}=this.node.prevProps||{};o!==a&&this.updateAnimationControlsSubscription()}unmount(){var o;this.node.animationState.reset(),(o=this.unmountControls)==null||o.call(this)}}let uC=0;class fC extends Cs{constructor(){super(...arguments),this.id=uC++}update(){if(!this.node.presenceContext)return;const{isPresent:o,onExitComplete:a}=this.node.presenceContext,{isPresent:d}=this.node.prevPresenceContext||{};if(!this.node.animationState||o===d)return;const p=this.node.animationState.setActive("exit",!o);a&&!o&&p.then(()=>{a(this.id)})}mount(){const{register:o,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),o&&(this.unmount=o(this.id))}unmount(){}}const dC={animation:{Feature:cC},exit:{Feature:fC}};function Ua(r,o,a,d={passive:!0}){return r.addEventListener(o,a,d),()=>r.removeEventListener(o,a)}function Za(r){return{point:{x:r.pageX,y:r.pageY}}}const hC=r=>o=>Md(o)&&r(o,Za(o));function Oa(r,o,a,d){return Ua(r,o,hC(a),d)}const vm=1e-4,pC=1-vm,gC=1+vm,Cm=.01,mC=0-Cm,xC=0+Cm;function hr(r){return r.max-r.min}function yC(r,o,a){return Math.abs(r-o)<=a}function Q1(r,o,a,d=.5){r.origin=d,r.originPoint=ln(o.min,o.max,r.origin),r.scale=hr(a)/hr(o),r.translate=ln(a.min,a.max,r.origin)-r.originPoint,(r.scale>=pC&&r.scale<=gC||isNaN(r.scale))&&(r.scale=1),(r.translate>=mC&&r.translate<=xC||isNaN(r.translate))&&(r.translate=0)}function Pa(r,o,a,d){Q1(r.x,o.x,a.x,d?d.originX:void 0),Q1(r.y,o.y,a.y,d?d.originY:void 0)}function J1(r,o,a){r.min=a.min+o.min,r.max=r.min+hr(o)}function wC(r,o,a){J1(r.x,o.x,a.x),J1(r.y,o.y,a.y)}function ep(r,o,a){r.min=o.min-a.min,r.max=r.min+hr(o)}function Ma(r,o,a){ep(r.x,o.x,a.x),ep(r.y,o.y,a.y)}function Gr(r){return[r("x"),r("y")]}const Em=({current:r})=>r?r.ownerDocument.defaultView:null,tp=(r,o)=>Math.abs(r-o);function vC(r,o){const a=tp(r.x,o.x),d=tp(r.y,o.y);return Math.sqrt(a**2+d**2)}class Am{constructor(o,a,{transformPagePoint:d,contextWindow:p=window,dragSnapToOrigin:x=!1,distanceThreshold:y=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Cf(this.lastMoveEventInfo,this.history),D=this.startEvent!==null,L=vC(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!D&&!L)return;const{point:B}=_,{timestamp:F}=$n;this.history.push({...B,timestamp:F});const{onStart:V,onMove:W}=this.handlers;D||(V&&V(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),W&&W(this.lastMoveEvent,_)},this.handlePointerMove=(_,D)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=vf(D,this.transformPagePoint),tn.update(this.updatePoint,!0)},this.handlePointerUp=(_,D)=>{this.end();const{onEnd:L,onSessionEnd:B,resumeAnimation:F}=this.handlers;if(this.dragSnapToOrigin&&F&&F(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const V=Cf(_.type==="pointercancel"?this.lastMoveEventInfo:vf(D,this.transformPagePoint),this.history);this.startEvent&&L&&L(_,V),B&&B(_,V)},!Md(o))return;this.dragSnapToOrigin=x,this.handlers=a,this.transformPagePoint=d,this.distanceThreshold=y,this.contextWindow=p||window;const b=Za(o),w=vf(b,this.transformPagePoint),{point:E}=w,{timestamp:S}=$n;this.history=[{...E,timestamp:S}];const{onSessionStart:I}=a;I&&I(o,Cf(w,this.history)),this.removeListeners=Xa(Oa(this.contextWindow,"pointermove",this.handlePointerMove),Oa(this.contextWindow,"pointerup",this.handlePointerUp),Oa(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(o){this.handlers=o}end(){this.removeListeners&&this.removeListeners(),ws(this.updatePoint)}}function vf(r,o){return o?{point:o(r.point)}:r}function np(r,o){return{x:r.x-o.x,y:r.y-o.y}}function Cf({point:r},o){return{point:r,delta:np(r,bm(o)),offset:np(r,CC(o)),velocity:EC(o,.1)}}function CC(r){return r[0]}function bm(r){return r[r.length-1]}function EC(r,o){if(r.length<2)return{x:0,y:0};let a=r.length-1,d=null;const p=bm(r);for(;a>=0&&(d=r[a],!(p.timestamp-d.timestamp>gi(o)));)a--;if(!d)return{x:0,y:0};const x=mi(p.timestamp-d.timestamp);if(x===0)return{x:0,y:0};const y={x:(p.x-d.x)/x,y:(p.y-d.y)/x};return y.x===1/0&&(y.x=0),y.y===1/0&&(y.y=0),y}function AC(r,{min:o,max:a},d){return o!==void 0&&r<o?r=d?ln(o,r,d.min):Math.max(r,o):a!==void 0&&r>a&&(r=d?ln(a,r,d.max):Math.min(r,a)),r}function rp(r,o,a){return{min:o!==void 0?r.min+o:void 0,max:a!==void 0?r.max+a-(r.max-r.min):void 0}}function bC(r,{top:o,left:a,bottom:d,right:p}){return{x:rp(r.x,a,p),y:rp(r.y,o,d)}}function ip(r,o){let a=o.min-r.min,d=o.max-r.max;return o.max-o.min<r.max-r.min&&([a,d]=[d,a]),{min:a,max:d}}function SC(r,o){return{x:ip(r.x,o.x),y:ip(r.y,o.y)}}function TC(r,o){let a=.5;const d=hr(r),p=hr(o);return p>d?a=Ba(o.min,o.max-d,r.min):d>p&&(a=Ba(r.min,r.max-p,o.min)),ji(0,1,a)}function IC(r,o){const a={};return o.min!==void 0&&(a.min=o.min-r.min),o.max!==void 0&&(a.max=o.max-r.min),a}const $f=.35;function NC(r=$f){return r===!1?r=0:r===!0&&(r=$f),{x:sp(r,"left","right"),y:sp(r,"top","bottom")}}function sp(r,o,a){return{min:op(r,o),max:op(r,a)}}function op(r,o){return typeof r=="number"?r:r[o]||0}const _C=new WeakMap;class RC{constructor(o){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=En(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=o}start(o,{snapToCursor:a=!1,distanceThreshold:d}={}){const{presenceContext:p}=this.visualElement;if(p&&p.isPresent===!1)return;const x=I=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(Za(I).point)},y=(I,_)=>{const{drag:D,dragPropagation:L,onDragStart:B}=this.getProps();if(D&&!L&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Fv(D),!this.openDragLock))return;this.latestPointerEvent=I,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Gr(V=>{let W=this.getAxisMotionValue(V).get()||0;if(xi.test(W)){const{projection:z}=this.visualElement;if(z&&z.layout){const Q=z.layout.layoutBox[V];Q&&(W=hr(Q)*(parseFloat(W)/100))}}this.originPoint[V]=W}),B&&tn.postRender(()=>B(I,_)),Kf(this.visualElement,"transform");const{animationState:F}=this.visualElement;F&&F.setActive("whileDrag",!0)},b=(I,_)=>{this.latestPointerEvent=I,this.latestPanInfo=_;const{dragPropagation:D,dragDirectionLock:L,onDirectionLock:B,onDrag:F}=this.getProps();if(!D&&!this.openDragLock)return;const{offset:V}=_;if(L&&this.currentDirection===null){this.currentDirection=kC(V),this.currentDirection!==null&&B&&B(this.currentDirection);return}this.updateAxis("x",_.point,V),this.updateAxis("y",_.point,V),this.visualElement.render(),F&&F(I,_)},w=(I,_)=>{this.latestPointerEvent=I,this.latestPanInfo=_,this.stop(I,_),this.latestPointerEvent=null,this.latestPanInfo=null},E=()=>Gr(I=>{var _;return this.getAnimationState(I)==="paused"&&((_=this.getAxisMotionValue(I).animation)==null?void 0:_.play())}),{dragSnapToOrigin:S}=this.getProps();this.panSession=new Am(o,{onSessionStart:x,onStart:y,onMove:b,onSessionEnd:w,resumeAnimation:E},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:S,distanceThreshold:d,contextWindow:Em(this.visualElement)})}stop(o,a){const d=o||this.latestPointerEvent,p=a||this.latestPanInfo,x=this.isDragging;if(this.cancel(),!x||!p||!d)return;const{velocity:y}=p;this.startAnimation(y);const{onDragEnd:b}=this.getProps();b&&tn.postRender(()=>b(d,p))}cancel(){this.isDragging=!1;const{projection:o,animationState:a}=this.visualElement;o&&(o.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:d}=this.getProps();!d&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(o,a,d){const{drag:p}=this.getProps();if(!d||!sc(o,p,this.currentDirection))return;const x=this.getAxisMotionValue(o);let y=this.originPoint[o]+d[o];this.constraints&&this.constraints[o]&&(y=AC(y,this.constraints[o],this.elastic[o])),x.set(y)}resolveConstraints(){var x;const{dragConstraints:o,dragElastic:a}=this.getProps(),d=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(x=this.visualElement.projection)==null?void 0:x.layout,p=this.constraints;o&&No(o)?this.constraints||(this.constraints=this.resolveRefConstraints()):o&&d?this.constraints=bC(d.layoutBox,o):this.constraints=!1,this.elastic=NC(a),p!==this.constraints&&d&&this.constraints&&!this.hasMutatedConstraints&&Gr(y=>{this.constraints!==!1&&this.getAxisMotionValue(y)&&(this.constraints[y]=IC(d.layoutBox[y],this.constraints[y]))})}resolveRefConstraints(){const{dragConstraints:o,onMeasureDragConstraints:a}=this.getProps();if(!o||!No(o))return!1;const d=o.current,{projection:p}=this.visualElement;if(!p||!p.layout)return!1;const x=O3(d,p.root,this.visualElement.getTransformPagePoint());let y=SC(p.layout.layoutBox,x);if(a){const b=a(_3(y));this.hasMutatedConstraints=!!b,b&&(y=am(b))}return y}startAnimation(o){const{drag:a,dragMomentum:d,dragElastic:p,dragTransition:x,dragSnapToOrigin:y,onDragTransitionEnd:b}=this.getProps(),w=this.constraints||{},E=Gr(S=>{if(!sc(S,a,this.currentDirection))return;let I=w&&w[S]||{};y&&(I={min:0,max:0});const _=p?200:1e6,D=p?40:1e7,L={type:"inertia",velocity:d?o[S]:0,bounceStiffness:_,bounceDamping:D,timeConstant:750,restDelta:1,restSpeed:10,...x,...I};return this.startAxisValueAnimation(S,L)});return Promise.all(E).then(b)}startAxisValueAnimation(o,a){const d=this.getAxisMotionValue(o);return Kf(this.visualElement,o),d.start(Hd(o,d,0,a,this.visualElement,!1))}stopAnimation(){Gr(o=>this.getAxisMotionValue(o).stop())}pauseAnimation(){Gr(o=>{var a;return(a=this.getAxisMotionValue(o).animation)==null?void 0:a.pause()})}getAnimationState(o){var a;return(a=this.getAxisMotionValue(o).animation)==null?void 0:a.state}getAxisMotionValue(o){const a=`_drag${o.toUpperCase()}`,d=this.visualElement.getProps(),p=d[a];return p||this.visualElement.getValue(o,(d.initial?d.initial[o]:void 0)||0)}snapToCursor(o){Gr(a=>{const{drag:d}=this.getProps();if(!sc(a,d,this.currentDirection))return;const{projection:p}=this.visualElement,x=this.getAxisMotionValue(a);if(p&&p.layout){const{min:y,max:b}=p.layout.layoutBox[a];x.set(o[a]-ln(y,b,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:o,dragConstraints:a}=this.getProps(),{projection:d}=this.visualElement;if(!No(a)||!d||!this.constraints)return;this.stopAnimation();const p={x:0,y:0};Gr(y=>{const b=this.getAxisMotionValue(y);if(b&&this.constraints!==!1){const w=b.get();p[y]=TC({min:w,max:w},this.constraints[y])}});const{transformTemplate:x}=this.visualElement.getProps();this.visualElement.current.style.transform=x?x({},""):"none",d.root&&d.root.updateScroll(),d.updateLayout(),this.resolveConstraints(),Gr(y=>{if(!sc(y,o,null))return;const b=this.getAxisMotionValue(y),{min:w,max:E}=this.constraints[y];b.set(ln(w,E,p[y]))})}addListeners(){if(!this.visualElement.current)return;_C.set(this.visualElement,this);const o=this.visualElement.current,a=Oa(o,"pointerdown",w=>{const{drag:E,dragListener:S=!0}=this.getProps();E&&S&&this.start(w)}),d=()=>{const{dragConstraints:w}=this.getProps();No(w)&&w.current&&(this.constraints=this.resolveRefConstraints())},{projection:p}=this.visualElement,x=p.addEventListener("measure",d);p&&!p.layout&&(p.root&&p.root.updateScroll(),p.updateLayout()),tn.read(d);const y=Ua(window,"resize",()=>this.scalePositionWithinConstraints()),b=p.addEventListener("didUpdate",({delta:w,hasLayoutChanged:E})=>{this.isDragging&&E&&(Gr(S=>{const I=this.getAxisMotionValue(S);I&&(this.originPoint[S]+=w[S].translate,I.set(I.get()+w[S].translate))}),this.visualElement.render())});return()=>{y(),a(),x(),b&&b()}}getProps(){const o=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:d=!1,dragPropagation:p=!1,dragConstraints:x=!1,dragElastic:y=$f,dragMomentum:b=!0}=o;return{...o,drag:a,dragDirectionLock:d,dragPropagation:p,dragConstraints:x,dragElastic:y,dragMomentum:b}}}function sc(r,o,a){return(o===!0||o===r)&&(a===null||a===r)}function kC(r,o=10){let a=null;return Math.abs(r.y)>o?a="y":Math.abs(r.x)>o&&(a="x"),a}class OC extends Cs{constructor(o){super(o),this.removeGroupControls=Xr,this.removeListeners=Xr,this.controls=new RC(o)}mount(){const{dragControls:o}=this.node.getProps();o&&(this.removeGroupControls=o.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Xr}unmount(){this.removeGroupControls(),this.removeListeners()}}const ap=r=>(o,a)=>{r&&tn.postRender(()=>r(o,a))};class PC extends Cs{constructor(){super(...arguments),this.removePointerDownListener=Xr}onPointerDown(o){this.session=new Am(o,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Em(this.node)})}createPanHandlers(){const{onPanSessionStart:o,onPanStart:a,onPan:d,onPanEnd:p}=this.node.getProps();return{onSessionStart:ap(o),onStart:ap(a),onMove:d,onEnd:(x,y)=>{delete this.session,p&&tn.postRender(()=>p(x,y))}}}mount(){this.removePointerDownListener=Oa(this.node.current,"pointerdown",o=>this.onPointerDown(o))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const hc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function lp(r,o){return o.max===o.min?0:r/(o.max-o.min)*100}const Ia={correct:(r,o)=>{if(!o.target)return r;if(typeof r=="string")if(ut.test(r))r=parseFloat(r);else return r;const a=lp(r,o.target.x),d=lp(r,o.target.y);return`${a}% ${d}%`}},MC={correct:(r,{treeScale:o,projectionDelta:a})=>{const d=r,p=vs.parse(r);if(p.length>5)return d;const x=vs.createTransformer(r),y=typeof p[0]!="number"?1:0,b=a.x.scale*o.x,w=a.y.scale*o.y;p[0+y]/=b,p[1+y]/=w;const E=ln(b,w,.5);return typeof p[2+y]=="number"&&(p[2+y]/=E),typeof p[3+y]=="number"&&(p[3+y]/=E),x(p)}};let Ef=!1;class DC extends R.Component{componentDidMount(){const{visualElement:o,layoutGroup:a,switchLayoutGroup:d,layoutId:p}=this.props,{projection:x}=o;r3(LC),x&&(a.group&&a.group.add(x),d&&d.register&&p&&d.register(x),Ef&&x.root.didUpdate(),x.addEventListener("animationComplete",()=>{this.safeToRemove()}),x.setOptions({...x.options,onExitComplete:()=>this.safeToRemove()})),hc.hasEverUpdated=!0}getSnapshotBeforeUpdate(o){const{layoutDependency:a,visualElement:d,drag:p,isPresent:x}=this.props,{projection:y}=d;return y&&(y.isPresent=x,Ef=!0,p||o.layoutDependency!==a||a===void 0||o.isPresent!==x?y.willUpdate():this.safeToRemove(),o.isPresent!==x&&(x?y.promote():y.relegate()||tn.postRender(()=>{const b=y.getStack();(!b||!b.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:o}=this.props.visualElement;o&&(o.root.didUpdate(),Pd.postRender(()=>{!o.currentAnimation&&o.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:o,layoutGroup:a,switchLayoutGroup:d}=this.props,{projection:p}=o;Ef=!0,p&&(p.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(p),d&&d.deregister&&d.deregister(p))}safeToRemove(){const{safeToRemove:o}=this.props;o&&o()}render(){return null}}function Sm(r){const[o,a]=Yg(),d=R.useContext(fd);return A.jsx(DC,{...r,layoutGroup:d,switchLayoutGroup:R.useContext(sm),isPresent:o,safeToRemove:a})}const LC={borderRadius:{...Ia,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ia,borderTopRightRadius:Ia,borderBottomLeftRadius:Ia,borderBottomRightRadius:Ia,boxShadow:MC};function BC(r,o,a){const d=or(r)?r:Do(r);return d.start(Hd("",d,o,a)),d.animation}const FC=(r,o)=>r.depth-o.depth;class jC{constructor(){this.children=[],this.isDirty=!1}add(o){pd(this.children,o),this.isDirty=!0}remove(o){gd(this.children,o),this.isDirty=!0}forEach(o){this.isDirty&&this.children.sort(FC),this.isDirty=!1,this.children.forEach(o)}}function VC(r,o){const a=Er.now(),d=({timestamp:p})=>{const x=p-a;x>=o&&(ws(d),r(x-o))};return tn.setup(d,!0),()=>ws(d)}const Tm=["TopLeft","TopRight","BottomLeft","BottomRight"],zC=Tm.length,cp=r=>typeof r=="string"?parseFloat(r):r,up=r=>typeof r=="number"||ut.test(r);function UC(r,o,a,d,p,x){p?(r.opacity=ln(0,a.opacity??1,WC(d)),r.opacityExit=ln(o.opacity??1,0,HC(d))):x&&(r.opacity=ln(o.opacity??1,a.opacity??1,d));for(let y=0;y<zC;y++){const b=`border${Tm[y]}Radius`;let w=fp(o,b),E=fp(a,b);if(w===void 0&&E===void 0)continue;w||(w=0),E||(E=0),w===0||E===0||up(w)===up(E)?(r[b]=Math.max(ln(cp(w),cp(E),d),0),(xi.test(E)||xi.test(w))&&(r[b]+="%")):r[b]=E}(o.rotate||a.rotate)&&(r.rotate=ln(o.rotate||0,a.rotate||0,d))}function fp(r,o){return r[o]!==void 0?r[o]:r.borderRadius}const WC=Im(0,.5,hg),HC=Im(.5,.95,Xr);function Im(r,o,a){return d=>d<r?0:d>o?1:a(Ba(r,o,d))}function dp(r,o){r.min=o.min,r.max=o.max}function Hr(r,o){dp(r.x,o.x),dp(r.y,o.y)}function hp(r,o){r.translate=o.translate,r.scale=o.scale,r.originPoint=o.originPoint,r.origin=o.origin}function pp(r,o,a,d,p){return r-=o,r=Ec(r,1/a,d),p!==void 0&&(r=Ec(r,1/p,d)),r}function GC(r,o=0,a=1,d=.5,p,x=r,y=r){if(xi.test(o)&&(o=parseFloat(o),o=ln(y.min,y.max,o/100)-y.min),typeof o!="number")return;let b=ln(x.min,x.max,d);r===x&&(b-=o),r.min=pp(r.min,o,a,b,p),r.max=pp(r.max,o,a,b,p)}function gp(r,o,[a,d,p],x,y){GC(r,o[a],o[d],o[p],o.scale,x,y)}const XC=["x","scaleX","originX"],YC=["y","scaleY","originY"];function mp(r,o,a,d){gp(r.x,o,XC,a?a.x:void 0,d?d.x:void 0),gp(r.y,o,YC,a?a.y:void 0,d?d.y:void 0)}function xp(r){return r.translate===0&&r.scale===1}function Nm(r){return xp(r.x)&&xp(r.y)}function yp(r,o){return r.min===o.min&&r.max===o.max}function KC(r,o){return yp(r.x,o.x)&&yp(r.y,o.y)}function wp(r,o){return Math.round(r.min)===Math.round(o.min)&&Math.round(r.max)===Math.round(o.max)}function _m(r,o){return wp(r.x,o.x)&&wp(r.y,o.y)}function vp(r){return hr(r.x)/hr(r.y)}function Cp(r,o){return r.translate===o.translate&&r.scale===o.scale&&r.originPoint===o.originPoint}class ZC{constructor(){this.members=[]}add(o){pd(this.members,o),o.scheduleRender()}remove(o){if(gd(this.members,o),o===this.prevLead&&(this.prevLead=void 0),o===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(o){const a=this.members.findIndex(p=>o===p);if(a===0)return!1;let d;for(let p=a;p>=0;p--){const x=this.members[p];if(x.isPresent!==!1){d=x;break}}return d?(this.promote(d),!0):!1}promote(o,a){const d=this.lead;if(o!==d&&(this.prevLead=d,this.lead=o,o.show(),d)){d.instance&&d.scheduleRender(),o.scheduleRender(),o.resumeFrom=d,a&&(o.resumeFrom.preserveOpacity=!0),d.snapshot&&(o.snapshot=d.snapshot,o.snapshot.latestValues=d.animationValues||d.latestValues),o.root&&o.root.isUpdating&&(o.isLayoutDirty=!0);const{crossfade:p}=o.options;p===!1&&d.hide()}}exitAnimationComplete(){this.members.forEach(o=>{const{options:a,resumingFrom:d}=o;a.onExitComplete&&a.onExitComplete(),d&&d.options.onExitComplete&&d.options.onExitComplete()})}scheduleRender(){this.members.forEach(o=>{o.instance&&o.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function $C(r,o,a){let d="";const p=r.x.translate/o.x,x=r.y.translate/o.y,y=(a==null?void 0:a.z)||0;if((p||x||y)&&(d=`translate3d(${p}px, ${x}px, ${y}px) `),(o.x!==1||o.y!==1)&&(d+=`scale(${1/o.x}, ${1/o.y}) `),a){const{transformPerspective:E,rotate:S,rotateX:I,rotateY:_,skewX:D,skewY:L}=a;E&&(d=`perspective(${E}px) ${d}`),S&&(d+=`rotate(${S}deg) `),I&&(d+=`rotateX(${I}deg) `),_&&(d+=`rotateY(${_}deg) `),D&&(d+=`skewX(${D}deg) `),L&&(d+=`skewY(${L}deg) `)}const b=r.x.scale*o.x,w=r.y.scale*o.y;return(b!==1||w!==1)&&(d+=`scale(${b}, ${w})`),d||"none"}const Af=["","X","Y","Z"],qC=1e3;let QC=0;function bf(r,o,a,d){const{latestValues:p}=o;p[r]&&(a[r]=p[r],o.setStaticValue(r,0),d&&(d[r]=0))}function Rm(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:o}=r.options;if(!o)return;const a=gm(o);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:p,layoutId:x}=r.options;window.MotionCancelOptimisedAnimation(a,"transform",tn,!(p||x))}const{parent:d}=r;d&&!d.hasCheckedOptimisedAppear&&Rm(d)}function km({attachResizeListener:r,defaultParent:o,measureScroll:a,checkIsScrollRoot:d,resetTransform:p}){return class{constructor(y={},b=o==null?void 0:o()){this.id=QC++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(tE),this.nodes.forEach(sE),this.nodes.forEach(oE),this.nodes.forEach(nE)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=y,this.root=b?b.root||b:this,this.path=b?[...b.path,b]:[],this.parent=b,this.depth=b?b.depth+1:0;for(let w=0;w<this.path.length;w++)this.path[w].shouldResetTransform=!0;this.root===this&&(this.nodes=new jC)}addEventListener(y,b){return this.eventHandlers.has(y)||this.eventHandlers.set(y,new yd),this.eventHandlers.get(y).add(b)}notifyListeners(y,...b){const w=this.eventHandlers.get(y);w&&w.notify(...b)}hasListeners(y){return this.eventHandlers.has(y)}mount(y){if(this.instance)return;this.isSVG=Xg(y)&&!Hv(y),this.instance=y;const{layoutId:b,layout:w,visualElement:E}=this.options;if(E&&!E.current&&E.mount(y),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(w||b)&&(this.isLayoutDirty=!0),r){let S,I=0;const _=()=>this.root.updateBlockedByResize=!1;tn.read(()=>{I=window.innerWidth}),r(y,()=>{const D=window.innerWidth;D!==I&&(I=D,this.root.updateBlockedByResize=!0,S&&S(),S=VC(_,250),hc.hasAnimatedSinceResize&&(hc.hasAnimatedSinceResize=!1,this.nodes.forEach(bp)))})}b&&this.root.registerSharedNode(b,this),this.options.animate!==!1&&E&&(b||w)&&this.addEventListener("didUpdate",({delta:S,hasLayoutChanged:I,hasRelativeLayoutChanged:_,layout:D})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const L=this.options.transition||E.getDefaultTransition()||fE,{onLayoutAnimationStart:B,onLayoutAnimationComplete:F}=E.getProps(),V=!this.targetLayout||!_m(this.targetLayout,D),W=!I&&_;if(this.options.layoutRoot||this.resumeFrom||W||I&&(V||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const z={...kd(L,"layout"),onPlay:B,onComplete:F};(E.shouldReduceMotion||this.options.layoutRoot)&&(z.delay=0,z.type=!1),this.startAnimation(z),this.setAnimationOrigin(S,W)}else I||bp(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=D})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const y=this.getStack();y&&y.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ws(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(aE),this.animationId++)}getTransformTemplate(){const{visualElement:y}=this.options;return y&&y.getProps().transformTemplate}willUpdate(y=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Rm(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let S=0;S<this.path.length;S++){const I=this.path[S];I.shouldResetTransform=!0,I.updateScroll("snapshot"),I.options.layoutRoot&&I.willUpdate(!1)}const{layoutId:b,layout:w}=this.options;if(b===void 0&&!w)return;const E=this.getTransformTemplate();this.prevTransformTemplateValue=E?E(this.latestValues,""):void 0,this.updateSnapshot(),y&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ep);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Ap);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(iE),this.nodes.forEach(JC),this.nodes.forEach(eE)):this.nodes.forEach(Ap),this.clearAllSnapshots();const b=Er.now();$n.delta=ji(0,1e3/60,b-$n.timestamp),$n.timestamp=b,$n.isProcessing=!0,hf.update.process($n),hf.preRender.process($n),hf.render.process($n),$n.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Pd.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(rE),this.sharedNodes.forEach(lE)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,tn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){tn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!hr(this.snapshot.measuredBox.x)&&!hr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let w=0;w<this.path.length;w++)this.path[w].updateScroll();const y=this.layout;this.layout=this.measure(!1),this.layoutCorrected=En(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:b}=this.options;b&&b.notify("LayoutMeasure",this.layout.layoutBox,y?y.layoutBox:void 0)}updateScroll(y="measure"){let b=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===y&&(b=!1),b&&this.instance){const w=d(this.instance);this.scroll={animationId:this.root.animationId,phase:y,isRoot:w,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:w}}}resetTransform(){if(!p)return;const y=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,b=this.projectionDelta&&!Nm(this.projectionDelta),w=this.getTransformTemplate(),E=w?w(this.latestValues,""):void 0,S=E!==this.prevTransformTemplateValue;y&&this.instance&&(b||Ys(this.latestValues)||S)&&(p(this.instance,E),this.shouldResetTransform=!1,this.scheduleRender())}measure(y=!0){const b=this.measurePageBox();let w=this.removeElementScroll(b);return y&&(w=this.removeTransform(w)),dE(w),{animationId:this.root.animationId,measuredBox:b,layoutBox:w,latestValues:{},source:this.id}}measurePageBox(){var E;const{visualElement:y}=this.options;if(!y)return En();const b=y.measureViewportBox();if(!(((E=this.scroll)==null?void 0:E.wasRoot)||this.path.some(hE))){const{scroll:S}=this.root;S&&(_o(b.x,S.offset.x),_o(b.y,S.offset.y))}return b}removeElementScroll(y){var w;const b=En();if(Hr(b,y),(w=this.scroll)!=null&&w.wasRoot)return b;for(let E=0;E<this.path.length;E++){const S=this.path[E],{scroll:I,options:_}=S;S!==this.root&&I&&_.layoutScroll&&(I.wasRoot&&Hr(b,y),_o(b.x,I.offset.x),_o(b.y,I.offset.y))}return b}applyTransform(y,b=!1){const w=En();Hr(w,y);for(let E=0;E<this.path.length;E++){const S=this.path[E];!b&&S.options.layoutScroll&&S.scroll&&S!==S.root&&Ro(w,{x:-S.scroll.offset.x,y:-S.scroll.offset.y}),Ys(S.latestValues)&&Ro(w,S.latestValues)}return Ys(this.latestValues)&&Ro(w,this.latestValues),w}removeTransform(y){const b=En();Hr(b,y);for(let w=0;w<this.path.length;w++){const E=this.path[w];if(!E.instance||!Ys(E.latestValues))continue;Hf(E.latestValues)&&E.updateSnapshot();const S=En(),I=E.measurePageBox();Hr(S,I),mp(b,E.latestValues,E.snapshot?E.snapshot.layoutBox:void 0,S)}return Ys(this.latestValues)&&mp(b,this.latestValues),b}setTargetDelta(y){this.targetDelta=y,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(y){this.options={...this.options,...y,crossfade:y.crossfade!==void 0?y.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==$n.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(y=!1){var _;const b=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=b.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=b.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=b.isSharedProjectionDirty);const w=!!this.resumingFrom||this!==b;if(!(y||w&&this.isSharedProjectionDirty||this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:S,layoutId:I}=this.options;if(!(!this.layout||!(S||I))){if(this.resolvedRelativeTargetAt=$n.timestamp,!this.targetDelta&&!this.relativeTarget){const D=this.getClosestProjectingParent();D&&D.layout&&this.animationProgress!==1?(this.relativeParent=D,this.forceRelativeParentToResolveTarget(),this.relativeTarget=En(),this.relativeTargetOrigin=En(),Ma(this.relativeTargetOrigin,this.layout.layoutBox,D.layout.layoutBox),Hr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=En(),this.targetWithTransforms=En()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),wC(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Hr(this.target,this.layout.layoutBox),cm(this.target,this.targetDelta)):Hr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const D=this.getClosestProjectingParent();D&&!!D.resumingFrom==!!this.resumingFrom&&!D.options.layoutScroll&&D.target&&this.animationProgress!==1?(this.relativeParent=D,this.forceRelativeParentToResolveTarget(),this.relativeTarget=En(),this.relativeTargetOrigin=En(),Ma(this.relativeTargetOrigin,this.target,D.target),Hr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Hf(this.parent.latestValues)||lm(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var L;const y=this.getLead(),b=!!this.resumingFrom||this!==y;let w=!0;if((this.isProjectionDirty||(L=this.parent)!=null&&L.isProjectionDirty)&&(w=!1),b&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(w=!1),this.resolvedRelativeTargetAt===$n.timestamp&&(w=!1),w)return;const{layout:E,layoutId:S}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(E||S))return;Hr(this.layoutCorrected,this.layout.layoutBox);const I=this.treeScale.x,_=this.treeScale.y;k3(this.layoutCorrected,this.treeScale,this.path,b),y.layout&&!y.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(y.target=y.layout.layoutBox,y.targetWithTransforms=En());const{target:D}=y;if(!D){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(hp(this.prevProjectionDelta.x,this.projectionDelta.x),hp(this.prevProjectionDelta.y,this.projectionDelta.y)),Pa(this.projectionDelta,this.layoutCorrected,D,this.latestValues),(this.treeScale.x!==I||this.treeScale.y!==_||!Cp(this.projectionDelta.x,this.prevProjectionDelta.x)||!Cp(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",D))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(y=!0){var b;if((b=this.options.visualElement)==null||b.scheduleRender(),y){const w=this.getStack();w&&w.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ko(),this.projectionDelta=ko(),this.projectionDeltaWithTransform=ko()}setAnimationOrigin(y,b=!1){const w=this.snapshot,E=w?w.latestValues:{},S={...this.latestValues},I=ko();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!b;const _=En(),D=w?w.source:void 0,L=this.layout?this.layout.source:void 0,B=D!==L,F=this.getStack(),V=!F||F.members.length<=1,W=!!(B&&!V&&this.options.crossfade===!0&&!this.path.some(uE));this.animationProgress=0;let z;this.mixTargetDelta=Q=>{const ie=Q/1e3;Sp(I.x,y.x,ie),Sp(I.y,y.y,ie),this.setTargetDelta(I),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ma(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),cE(this.relativeTarget,this.relativeTargetOrigin,_,ie),z&&KC(this.relativeTarget,z)&&(this.isProjectionDirty=!1),z||(z=En()),Hr(z,this.relativeTarget)),B&&(this.animationValues=S,UC(S,E,this.latestValues,ie,W,V)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ie},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(y){var b,w,E;this.notifyListeners("animationStart"),(b=this.currentAnimation)==null||b.stop(),(E=(w=this.resumingFrom)==null?void 0:w.currentAnimation)==null||E.stop(),this.pendingAnimation&&(ws(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=tn.update(()=>{hc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Do(0)),this.currentAnimation=BC(this.motionValue,[0,1e3],{...y,velocity:0,isSync:!0,onUpdate:S=>{this.mixTargetDelta(S),y.onUpdate&&y.onUpdate(S)},onStop:()=>{},onComplete:()=>{y.onComplete&&y.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const y=this.getStack();y&&y.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(qC),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const y=this.getLead();let{targetWithTransforms:b,target:w,layout:E,latestValues:S}=y;if(!(!b||!w||!E)){if(this!==y&&this.layout&&E&&Om(this.options.animationType,this.layout.layoutBox,E.layoutBox)){w=this.target||En();const I=hr(this.layout.layoutBox.x);w.x.min=y.target.x.min,w.x.max=w.x.min+I;const _=hr(this.layout.layoutBox.y);w.y.min=y.target.y.min,w.y.max=w.y.min+_}Hr(b,w),Ro(b,S),Pa(this.projectionDeltaWithTransform,this.layoutCorrected,b,S)}}registerSharedNode(y,b){this.sharedNodes.has(y)||this.sharedNodes.set(y,new ZC),this.sharedNodes.get(y).add(b);const E=b.options.initialPromotionConfig;b.promote({transition:E?E.transition:void 0,preserveFollowOpacity:E&&E.shouldPreserveFollowOpacity?E.shouldPreserveFollowOpacity(b):void 0})}isLead(){const y=this.getStack();return y?y.lead===this:!0}getLead(){var b;const{layoutId:y}=this.options;return y?((b=this.getStack())==null?void 0:b.lead)||this:this}getPrevLead(){var b;const{layoutId:y}=this.options;return y?(b=this.getStack())==null?void 0:b.prevLead:void 0}getStack(){const{layoutId:y}=this.options;if(y)return this.root.sharedNodes.get(y)}promote({needsReset:y,transition:b,preserveFollowOpacity:w}={}){const E=this.getStack();E&&E.promote(this,w),y&&(this.projectionDelta=void 0,this.needsReset=!0),b&&this.setOptions({transition:b})}relegate(){const y=this.getStack();return y?y.relegate(this):!1}resetSkewAndRotation(){const{visualElement:y}=this.options;if(!y)return;let b=!1;const{latestValues:w}=y;if((w.z||w.rotate||w.rotateX||w.rotateY||w.rotateZ||w.skewX||w.skewY)&&(b=!0),!b)return;const E={};w.z&&bf("z",y,E,this.animationValues);for(let S=0;S<Af.length;S++)bf(`rotate${Af[S]}`,y,E,this.animationValues),bf(`skew${Af[S]}`,y,E,this.animationValues);y.render();for(const S in E)y.setStaticValue(S,E[S]),this.animationValues&&(this.animationValues[S]=E[S]);y.scheduleRender()}applyProjectionStyles(y,b){if(!this.instance||this.isSVG)return;if(!this.isVisible){y.visibility="hidden";return}const w=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,y.visibility="",y.opacity="",y.pointerEvents=dc(b==null?void 0:b.pointerEvents)||"",y.transform=w?w(this.latestValues,""):"none";return}const E=this.getLead();if(!this.projectionDelta||!this.layout||!E.target){this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=dc(b==null?void 0:b.pointerEvents)||""),this.hasProjected&&!Ys(this.latestValues)&&(y.transform=w?w({},""):"none",this.hasProjected=!1);return}y.visibility="";const S=E.animationValues||E.latestValues;this.applyTransformsToTarget();let I=$C(this.projectionDeltaWithTransform,this.treeScale,S);w&&(I=w(S,I)),y.transform=I;const{x:_,y:D}=this.projectionDelta;y.transformOrigin=`${_.origin*100}% ${D.origin*100}% 0`,E.animationValues?y.opacity=E===this?S.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:S.opacityExit:y.opacity=E===this?S.opacity!==void 0?S.opacity:"":S.opacityExit!==void 0?S.opacityExit:0;for(const L in za){if(S[L]===void 0)continue;const{correct:B,applyTo:F,isCSSVariable:V}=za[L],W=I==="none"?S[L]:B(S[L],E);if(F){const z=F.length;for(let Q=0;Q<z;Q++)y[F[Q]]=W}else V?this.options.visualElement.renderState.vars[L]=W:y[L]=W}this.options.layoutId&&(y.pointerEvents=E===this?dc(b==null?void 0:b.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(y=>{var b;return(b=y.currentAnimation)==null?void 0:b.stop()}),this.root.nodes.forEach(Ep),this.root.sharedNodes.clear()}}}function JC(r){r.updateLayout()}function eE(r){var a;const o=((a=r.resumeFrom)==null?void 0:a.snapshot)||r.snapshot;if(r.isLead()&&r.layout&&o&&r.hasListeners("didUpdate")){const{layoutBox:d,measuredBox:p}=r.layout,{animationType:x}=r.options,y=o.source!==r.layout.source;x==="size"?Gr(I=>{const _=y?o.measuredBox[I]:o.layoutBox[I],D=hr(_);_.min=d[I].min,_.max=_.min+D}):Om(x,o.layoutBox,d)&&Gr(I=>{const _=y?o.measuredBox[I]:o.layoutBox[I],D=hr(d[I]);_.max=_.min+D,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[I].max=r.relativeTarget[I].min+D)});const b=ko();Pa(b,d,o.layoutBox);const w=ko();y?Pa(w,r.applyTransform(p,!0),o.measuredBox):Pa(w,d,o.layoutBox);const E=!Nm(b);let S=!1;if(!r.resumeFrom){const I=r.getClosestProjectingParent();if(I&&!I.resumeFrom){const{snapshot:_,layout:D}=I;if(_&&D){const L=En();Ma(L,o.layoutBox,_.layoutBox);const B=En();Ma(B,d,D.layoutBox),_m(L,B)||(S=!0),I.options.layoutRoot&&(r.relativeTarget=B,r.relativeTargetOrigin=L,r.relativeParent=I)}}}r.notifyListeners("didUpdate",{layout:d,snapshot:o,delta:w,layoutDelta:b,hasLayoutChanged:E,hasRelativeLayoutChanged:S})}else if(r.isLead()){const{onExitComplete:d}=r.options;d&&d()}r.options.transition=void 0}function tE(r){r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function nE(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function rE(r){r.clearSnapshot()}function Ep(r){r.clearMeasurements()}function Ap(r){r.isLayoutDirty=!1}function iE(r){const{visualElement:o}=r.options;o&&o.getProps().onBeforeLayoutMeasure&&o.notify("BeforeLayoutMeasure"),r.resetTransform()}function bp(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function sE(r){r.resolveTargetDelta()}function oE(r){r.calcProjection()}function aE(r){r.resetSkewAndRotation()}function lE(r){r.removeLeadSnapshot()}function Sp(r,o,a){r.translate=ln(o.translate,0,a),r.scale=ln(o.scale,1,a),r.origin=o.origin,r.originPoint=o.originPoint}function Tp(r,o,a,d){r.min=ln(o.min,a.min,d),r.max=ln(o.max,a.max,d)}function cE(r,o,a,d){Tp(r.x,o.x,a.x,d),Tp(r.y,o.y,a.y,d)}function uE(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const fE={duration:.45,ease:[.4,0,.1,1]},Ip=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),Np=Ip("applewebkit/")&&!Ip("chrome/")?Math.round:Xr;function _p(r){r.min=Np(r.min),r.max=Np(r.max)}function dE(r){_p(r.x),_p(r.y)}function Om(r,o,a){return r==="position"||r==="preserve-aspect"&&!yC(vp(o),vp(a),.2)}function hE(r){var o;return r!==r.root&&((o=r.scroll)==null?void 0:o.wasRoot)}const pE=km({attachResizeListener:(r,o)=>Ua(r,"resize",o),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Sf={current:void 0},Pm=km({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!Sf.current){const r=new pE({});r.mount(window),r.setOptions({layoutScroll:!0}),Sf.current=r}return Sf.current},resetTransform:(r,o)=>{r.style.transform=o!==void 0?o:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),gE={pan:{Feature:PC},drag:{Feature:OC,ProjectionNode:Pm,MeasureLayout:Sm}};function Rp(r,o,a){const{props:d}=r;r.animationState&&d.whileHover&&r.animationState.setActive("whileHover",a==="Start");const p="onHover"+a,x=d[p];x&&tn.postRender(()=>x(o,Za(o)))}class mE extends Cs{mount(){const{current:o}=this.node;o&&(this.unmount=jv(o,(a,d)=>(Rp(this.node,d,"Start"),p=>Rp(this.node,p,"End"))))}unmount(){}}class xE extends Cs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let o=!1;try{o=this.node.current.matches(":focus-visible")}catch{o=!0}!o||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Xa(Ua(this.node.current,"focus",()=>this.onFocus()),Ua(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function kp(r,o,a){const{props:d}=r;if(r.current instanceof HTMLButtonElement&&r.current.disabled)return;r.animationState&&d.whileTap&&r.animationState.setActive("whileTap",a==="Start");const p="onTap"+(a==="End"?"":a),x=d[p];x&&tn.postRender(()=>x(o,Za(o)))}class yE extends Cs{mount(){const{current:o}=this.node;o&&(this.unmount=Wv(o,(a,d)=>(kp(this.node,d,"Start"),(p,{success:x})=>kp(this.node,p,x?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const qf=new WeakMap,Tf=new WeakMap,wE=r=>{const o=qf.get(r.target);o&&o(r)},vE=r=>{r.forEach(wE)};function CE({root:r,...o}){const a=r||document;Tf.has(a)||Tf.set(a,{});const d=Tf.get(a),p=JSON.stringify(o);return d[p]||(d[p]=new IntersectionObserver(vE,{root:r,...o})),d[p]}function EE(r,o,a){const d=CE(o);return qf.set(r,a),d.observe(r),()=>{qf.delete(r),d.unobserve(r)}}const AE={some:0,all:1};class bE extends Cs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:o={}}=this.node.getProps(),{root:a,margin:d,amount:p="some",once:x}=o,y={root:a?a.current:void 0,rootMargin:d,threshold:typeof p=="number"?p:AE[p]},b=w=>{const{isIntersecting:E}=w;if(this.isInView===E||(this.isInView=E,x&&!E&&this.hasEnteredView))return;E&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",E);const{onViewportEnter:S,onViewportLeave:I}=this.node.getProps(),_=E?S:I;_&&_(w)};return EE(this.node.current,y,b)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:o,prevProps:a}=this.node;["amount","margin","root"].some(SE(o,a))&&this.startObserver()}unmount(){}}function SE({viewport:r={}},{viewport:o={}}={}){return a=>r[a]!==o[a]}const TE={inView:{Feature:bE},tap:{Feature:yE},focus:{Feature:xE},hover:{Feature:mE}},IE={layout:{ProjectionNode:Pm,MeasureLayout:Sm}},NE={...dC,...TE,...gE,...IE},Li=N3(NE,z3),_E=()=>{const{login:r,signup:o,user:a,logout:d,checkAuth:p}=R.useContext(Ar),[x,y]=R.useState(""),[b,w]=R.useState(""),[E,S]=R.useState(""),[I,_]=R.useState(null),[D,L]=R.useState(null),[B,F]=R.useState(""),[V,W]=R.useState(0),[z,Q]=R.useState({x:0,y:0}),[ie,ue]=R.useState(1),[q,ce]=R.useState(null),[$,Ne]=R.useState(!1),[Pe,ke]=R.useState(!1),[Re,Ve]=R.useState({}),[ee,Ue]=R.useState({}),[me,pe]=R.useState(!1),[Oe,fe]=R.useState(!1),[X,te]=R.useState(null),Ae=pr(),ze=Yr(),Se=new URLSearchParams(ze.search),de=Se.get("redirect"),We=Se.get("code"),Fe=de==="lobby",tt=()=>{const Ge="abcdefghijklmnopqrstuvwxyz0123456789";let Je="";for(let gt=0;gt<10;gt++)Je+=Ge.charAt(Math.floor(Math.random()*Ge.length));return Je};R.useEffect(()=>{if(Fe&&!x&&!b){const Ge=tt(),Je=tt();y(Ge),w(Je),Ue(gt=>({...gt,username:!0,password:!0})),Ve(gt=>({...gt,username:"",password:""})),W(2)}},[Fe,x,b,E]),R.useEffect(()=>{localStorage.getItem("access_token")&&Ae(de==="lobby"?We?`/lobby?code=${We}`:"/?showLobbyModal=true":de==="product-selection"?"/product-selection":"/")},[de,We,Ae]),R.useEffect(()=>{V===2&&E&&at(E)&&(pe(!0),Ue(Ge=>({...Ge,displayName:!0})),Ve(Ge=>({...Ge,displayName:""})))},[V,E]);const ge=Ge=>{const Je=/^[a-z0-9]+$/;return Ge.length>=2&&Je.test(Ge)},Ze=Ge=>Ge.length>=2,at=Ge=>Ge.length>=2,_e=()=>{V<Ct.length-1&&(V===0&&!E&&(S(x),Ue(Ge=>({...Ge,displayName:!0})),Ve(Ge=>({...Ge,displayName:""}))),V===1&&E&&E.length>=2?pe(!0):pe(!1),W(Ge=>Ge+1))},nt=()=>{if(V>0){const Ge=V-1;W(Ge);const Je=Ct[Ge];if(Je.validate){const gt=Je.value;Je.validate(gt)&&pe(!0)}else pe(!0)}},Pt=(Ge,Je,gt)=>{gt(Ge.target.value);const Ut=Ge.target.value;Je(Ut)?(Ue(Ot=>({...Ot,[Ct[V].id]:!0})),Ve(Ot=>({...Ot,[Ct[V].id]:""})),pe(!0)):(Ue(Ot=>({...Ot,[Ct[V].id]:!1})),Ve(Ot=>({...Ot,[Ct[V].id]:"Must be at least 2 characters"})),pe(!1))},Dt=Ge=>{const Je=Ge.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");y(Je),ge(Je)?(Ue(gt=>({...gt,username:!0})),Ve(gt=>({...gt,username:""})),pe(!0)):(Ue(gt=>({...gt,username:!1})),Ve(gt=>({...gt,username:"Must be at least 2 characters"})),pe(!1))},St=Ge=>{Pt(Ge,Ze,w)},vt=Ge=>{Pt(Ge,at,S)},pt=Ge=>{const Je=Ge.target.files[0];if(Je){const gt=new FileReader;gt.onload=Ut=>{const Ot=new Image;Ot.onload=()=>{let At=Ot.width,nn=Ot.height;const Ht=1500;At>nn&&At>Ht?(nn=nn*Ht/At,At=Ht):nn>At&&nn>Ht&&(At=At*Ht/nn,nn=Ht);const un=document.createElement("canvas");un.width=At,un.height=nn,un.getContext("2d").drawImage(Ot,0,0,At,nn);const he=un.toDataURL("image/jpeg",.75);_(Je),L(he),Ne(!0),Ue(ct=>({...ct,image:!0})),Ve(ct=>({...ct,image:""})),pe(!0)},Ot.src=Ut.target.result},gt.readAsDataURL(Je)}},xn=(Ge,Je)=>{ce(Je)},Te=async()=>{try{const Ge=await id(D,q);L(Ge),Ne(!1)}catch(Ge){console.error("Error cropping the image:",Ge),F("Failed to crop image. Please try again.")}},zn=async Ge=>{if(Ge.preventDefault(),ke(!0),F(""),console.log("Signup attempt - Username:",x,"Password:",b),!x||!b||!E){F("All fields are required"),ke(!1);return}if(!I||!D){F("Your profile picture is required"),ke(!1);return}try{const Je="/signup",gt=await fetch(window.server_url+Je,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:x,password:b})}),Ut=await gt.json();if(Ut.error==="Username already taken")if(Fe){const Ht=tt(),un=tt();y(Ht),w(un);const De=await fetch(window.server_url+Je,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:Ht,password:un})}),he=await De.json();if(!De.ok||he.error==="Username already taken"){F("Unable to create account. Please try again."),ke(!1);return}r(he)}else{F("Username is taken"),ke(!1);return}else{if(!gt.ok){F(Ut.message||"Signup failed"),ke(!1);return}r(Ut)}await p();const Ot=localStorage.getItem("access_token");if(!Ot)throw new Error("Authentication failed");let At=null;if(I)At=D,At=At.split(",")[1];else{const De=await(await(await fetch("/assets/fakeprofile.png")).blob()).arrayBuffer();At=btoa(new Uint8Array(De).reduce((he,ct)=>he+String.fromCharCode(ct),""))}if(!(await fetch(`${window.server_url}/update_profile`,{method:"POST",headers:{Authorization:`Bearer ${Ot}`,"Content-Type":"application/json"},body:JSON.stringify({name:E,image_data:At})})).ok)throw new Error("Failed to update profile");await p(),Ae(de==="lobby"?We?`/lobby?code=${We}`:"/?showLobbyModal=true":de==="product-selection"?"/product-selection":"/")}catch(Je){console.error("Error:",Je),F("An error occurred. Please try again.")}ke(!1)},Ct=[{id:"username",label:"Username",value:x,onChange:Dt,type:"text",placeholder:"Enter a username",validate:ge},{id:"password",label:"Password",value:b,onChange:St,type:"text",placeholder:"Create a password",validate:Ze},{id:"displayName",label:We==="demolobby"?"Display Name (Type Any Name)":"Display Name (what people will see)",value:E,onChange:vt,type:"text",placeholder:"Enter your preferred name",validate:at},{id:"image",label:We==="demolobby"?"Profile Image (Upload Any Image)":"Upload a Selfie (so people can find you)",type:"file",onChange:pt,accept:"image/*"}];return A.jsxs("div",{className:"signup-container",children:[A.jsx("button",{onClick:()=>Ae("/"),className:"homescreen-button",children:"Home"}),A.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),A.jsx("h3",{className:"signup-header",children:We==="demolobby"?"Join the demo":"Sign Up to Join"}),We&&We!=="demolobby"&&A.jsxs("h2",{className:"signup-header",children:[We," lobby"]}),We==="demolobby"&&A.jsx("h2",{className:"signup-header",style:{fontSize:"0.9rem"},children:"Try Reuneo for Free!"}),A.jsxs("p",{className:"login-link-text",children:["Already have an account? ",A.jsx("a",{href:"#",onClick:Ge=>{Ge.preventDefault(),Ae("/login")},className:"login-link",children:"Login here"})]}),A.jsxs("div",{className:"step-form-container",children:[A.jsx("div",{className:"step-progress",children:(Fe?Ct.slice(2):Ct).map((Ge,Je)=>A.jsx("div",{className:`progress-dot ${Fe?(Je===V-2?"active":"")+(Je<V-2?" completed":""):(Je===V?"active":"")+(Je<V?" completed":"")}`},Je))}),A.jsxs("form",{onSubmit:zn,children:[A.jsx(j1,{mode:"wait",initial:!1,children:A.jsxs(Li.div,{initial:{opacity:0,x:8},animate:{opacity:1,x:0},exit:{opacity:0,x:-8},transition:{type:"spring",stiffness:500,damping:25,mass:.3},className:"step active",style:{willChange:"transform, opacity"},children:[A.jsx("div",{className:"step-content",children:A.jsxs(Li.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:[A.jsx("label",{className:"step-label",children:Ct[V].label}),A.jsx(Li.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},transition:{duration:.15,ease:"easeOut"},children:Ct[V].type==="file"?A.jsx("div",{className:"image-upload-container",children:$?A.jsxs("div",{className:"cropper-container",children:[A.jsx("div",{className:"cropper-wrapper",children:A.jsx(rd,{image:D,crop:z,zoom:ie,aspect:1,onCropComplete:xn,onCropChange:Q,onZoomChange:ue})}),A.jsxs("div",{className:"cropper-controls",children:[A.jsx("button",{type:"button",onClick:()=>{Ne(!1),L(null),_(null)},className:"cancel-crop-button",children:"Cancel"}),A.jsx("button",{type:"button",onClick:Te,className:"save-crop-button",children:"Good"})]})]}):A.jsxs(A.Fragment,{children:[A.jsx("input",{type:"file",onChange:Ct[V].onChange,accept:Ct[V].accept,className:"step-input"}),D&&A.jsx("div",{children:A.jsx("img",{src:D,alt:"Profile preview",className:"profile-preview-image"})})]})}):A.jsx("input",{type:Ct[V].type,value:Ct[V].value,onChange:Ct[V].onChange,placeholder:Ct[V].placeholder,className:"step-input",autoFocus:!0})}),A.jsxs(j1,{mode:"wait",children:[Re[Ct[V].id]&&A.jsx(Li.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"step-error",children:Re[Ct[V].id]}),ee[Ct[V].id]&&A.jsx(Li.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},className:"step-success",children:" Valid"})]})]})}),!$&&A.jsxs("div",{className:"button-container",children:[V>0&&A.jsx(Li.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},type:"button",onClick:nt,className:"backz-button",children:" Back"}),me&&V<Ct.length-1&&A.jsx(Li.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},type:"button",onClick:_e,className:"nextz-button",children:"Next "})]})]},V)}),B&&A.jsx(Li.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"error-message",children:B}),V===Ct.length-1&&A.jsx(Li.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},type:"submit",className:"primary-button",disabled:Pe,children:Pe?"Loading...":"Complete Signup"})]})]})]})},RE=5e3,Mm=(r,o=null,a=null)=>{R.useEffect(()=>{const d=async()=>{try{const x=a?`${window.server_url}/display_lobby_metadata?lobby_code=${a}`:`${window.server_url}/display_lobby_metadata`,y=localStorage.getItem("access_token"),b=await fetch(x,{headers:{Authorization:`Bearer ${y}`,lobby_code:a}});if(!b.ok){console.error("Failed to fetch lobby metadata");return}const w=await b.json();r(w.player_count),o&&o(w.lobby_state)}catch(x){console.error("Error fetching lobby metadata:",x)}};d();const p=setInterval(d,RE);return()=>clearInterval(p)},[r,o,a])},Gd="currentLobbyCode",Xd="currentLobbyTimestamp",Yd="currentLobbyLastValidated",kE=30*60*1e3,OE=3*60*1e3,PE=r=>{localStorage.setItem(Gd,r),localStorage.setItem(Xd,Date.now().toString()),console.log(`Stored lobby code: ${r}`)},ME=()=>{const r=localStorage.getItem(Gd),o=localStorage.getItem(Xd);return!r||!o?null:Date.now()-parseInt(o)>kE?(Ac(),console.log("Lobby code expired, cleared from storage"),null):r},DE=()=>{const r=localStorage.getItem(Yd);return r?Date.now()-parseInt(r)>OE:!0},LE=()=>{localStorage.setItem(Yd,Date.now().toString())},Ac=()=>{localStorage.removeItem(Gd),localStorage.removeItem(Xd),localStorage.removeItem(Yd),console.log("Cleared lobby storage")},BE=()=>{const[r,o]=R.useState(!1),[a,d]=R.useState(!1),[p,x]=R.useState(""),[y,b]=R.useState(""),[w,E]=R.useState(""),[S,I]=R.useState(null);eg();const{user:_,userProfile:D,checkAuth:L,permissions:B}=R.useContext(Ar),[F,V]=R.useState(null),[W,z]=R.useState(null),[Q,ie]=R.useState([]),[ue,q]=R.useState(!1),[ce,$]=R.useState(null),Ne=pr();Mm(V,z);const[Pe,ke]=R.useState(!1);R.useRef(null);const Re=R.useRef(null),Ve=async(fe=!1)=>{const X=ME();if(!X||!_){$(null);return}if($(X),fe||DE())try{const te=localStorage.getItem("access_token"),Ae=await fetch(`${window.server_url}/display_lobby_metadata?lobby_code=${X}`,{headers:{Authorization:`Bearer ${te}`,lobby_code:X}});if(Ae.ok){const ze=await Ae.json();ze.status==="error"||ze.lobby_state==="terminated"?(Ac(),$(null)):LE()}else Ac(),$(null)}catch(te){console.error("Error validating current lobby:",te),$(null)}},ee=async()=>{if(_){q(!0);try{const fe=localStorage.getItem("access_token"),X=await fetch(window.server_url+"/view_my_active_lobbies",{headers:{Authorization:`Bearer ${fe}`}});if(X.ok){const te=await X.json();console.log("User's active lobbies:",te),te&&te.lobbies&&Array.isArray(te.lobbies)?ie(te.lobbies):ie([])}else console.error("Failed to fetch user's active lobbies"),ie([])}catch(fe){console.error("Error fetching user's active lobbies:",fe),ie([])}finally{q(!1)}}};R.useEffect(()=>{_?(ee(),Ve(!0)):$(null)},[_]),R.useEffect(()=>{L()},[]),R.useEffect(()=>{if(new URLSearchParams(window.location.search).get("showLobbyModal")==="true"&&_){d(!0);const te=window.location.pathname;window.history.replaceState({},"",te)}},[_]);const Ue=fe=>{(B==="admin"||B==="organizer")&&Ne(`/admin_lobby_view?code=${fe}`)},me=fe=>{fe.preventDefault();const te=new FormData(fe.target).get("name");if(!te||te.trim()===""){b("Please enter a lobby code");return}const Ae=te.toLowerCase().replace(/[^a-z0-9]/g,"");if(Ae===""){b("Lobby code must contain only letters and numbers");return}E(Ae),d(!1),console.log(Ae),x(Ae),Ne(`/lobby?code=${Ae}`),x(""),b("")},pe=()=>{ke(!1),Re.current&&(Re.current.clear(),Re.current=null)},Oe=()=>a?A.jsx("div",{className:"lobby-modal-overlay",children:A.jsxs("div",{className:"lobby-modal-container",children:[A.jsx("button",{onClick:()=>{d(!1),x(""),b(""),pe()},className:"lobby-modal-close",children:""}),A.jsx("h2",{className:"lobby-modal-title",children:"Join Lobby"}),A.jsxs("form",{onSubmit:me,className:"lobby-form",children:[A.jsxs("div",{className:"lobby-input-container",children:[A.jsx("input",{type:"text",name:"name",placeholder:"Enter Lobby Code",className:"lobby-input",pattern:"[a-zA-Z0-9]+",title:"Only letters and numbers are allowed",required:!0}),y&&A.jsx("div",{className:"lobby-error-message",children:y})]}),A.jsx("button",{type:"submit",className:"lobby-submit-button",children:"Join"})]})]})}):null;return A.jsxs("div",{style:{position:"relative",height:"var(--viewport-height)",overflow:"hidden"},children:[A.jsxs("video",{className:"background-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,poster:"/assets/demo_app_home_video_cover.jpg",children:[A.jsx("source",{src:"/assets/demo_app_home_video_X2_small.mp4",type:"video/mp4"}),A.jsx("source",{src:"/assets/app_home_video_2.webm",type:"video/webm"}),A.jsx("img",{src:"/assets/demo_app_home_video_cover.jpg",alt:"Background fallback",style:{width:"100%",height:"100%",objectFit:"cover"}}),"Your browser does not support the video tag."]}),A.jsxs("div",{style:{position:"relative",zIndex:1,color:"white",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[A.jsx("div",{style:{position:"absolute",top:"0",left:"50%",transform:"translateX(-50%)"},children:A.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Logo",style:{width:"110px",height:"110px",objectFit:"contain"}})}),A.jsx("div",{style:{marginTop:"10%",display:"flex",flexDirection:"column"},children:A.jsx($y,{user:_,onProfileClick:()=>o(!0)})}),A.jsx("div",{style:{position:"absolute",top:"85px",display:B==="admin"||B==="organizer"?"flex":"none",justifyContent:"flex-end",width:"94%",left:"3%",alignItems:"center"},children:(B==="admin"||B==="organizer")&&A.jsx("button",{className:"login-button",onClick:()=>Ne("/organizer-account-details"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:fe=>{fe.currentTarget.style.transform="translateY(-2px)",fe.currentTarget.style.boxShadow="0 2px 8px rgba(74, 58, 58, 0.7)"},onMouseLeave:fe=>{fe.currentTarget.style.transform="translateY(0)",fe.currentTarget.style.boxShadow="0 0 4px rgba(74, 58, 58, 0.5)"},children:A.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Settings"})})}),(B==="admin"||B==="organizer")&&_==="topaz"&&A.jsx("div",{style:{position:"absolute",top:"120px",right:"20px",zIndex:10},children:A.jsx("button",{className:"master-lobbies-button",onClick:()=>Ne("/master_lobby_view"),children:"Lobbies"})}),r&&A.jsx(v2,{onSubmit:fe=>{o(!1)},onClose:()=>o(!1),existingProfile:D}),A.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",width:"90%",maxWidth:"1200px",textAlign:"center",marginLeft:"auto",marginRight:"auto",zIndex:1,top:"50%"},children:_?A.jsx("h2",{className:"welcome-header",style:{color:"#ffffff",fontSize:"1rem",textTransform:"uppercase",letterSpacing:"0.1em",textShadow:"4px 4px 8px rgba(0,0,0,0.9)",margin:0},children:_&&D&&(B==="admin"||B==="organizer")?(()=>{const fe="Create a Lobby",X=D?D.name.slice(0,15):"";return A.jsxs(A.Fragment,{children:[fe.split("").map((te,Ae)=>A.jsx("span",{style:{"--i":Ae+1,marginRight:te===" "?"0.5em":"1px"},children:te},`main-${Ae}`)),A.jsx("br",{}),X&&X.split("").map((te,Ae)=>A.jsx("span",{style:{"--i":Ae+1,marginRight:te===" "?"0.5em":"1px"},children:te},`name-${Ae}`))]})})():(()=>{const fe="Join the Experience",X=D?D.name.slice(0,15):"";return A.jsxs(A.Fragment,{children:[fe.split("").map((te,Ae)=>A.jsx("span",{style:{"--i":Ae+1,marginRight:te===" "?"0.5em":"1px"},children:te},`main-${Ae}`)),A.jsx("br",{}),X&&X.split("").map((te,Ae)=>A.jsx("span",{style:{"--i":Ae+1,marginRight:te===" "?"0.5em":"1px"},children:te},`name-${Ae}`))]})})()}):A.jsx("button",{className:"primary-button join-lobby-button",onClick:()=>window.location.href="https://reuneo.com/organizer-signup",style:{padding:"16px 20px",backgroundColor:"transparent",color:"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0 auto",display:"block",position:"relative",zIndex:1,textAlign:"center",outline:"none",":hover":{transform:"scale(1.02)"}},children:A.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Become Organizer"})})}),_&&A.jsx("div",{style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",width:"94%",display:"flex",flexDirection:"row",justifyContent:"center",gap:"1.5rem"},children:A.jsx("div",{className:"event-item",style:{width:"auto",maxWidth:"none",margin:"0",padding:"10px 20px",borderRadius:"16px",marginBottom:"20px",cursor:"pointer",opacity:1,display:"flex",flexDirection:"row",alignItems:"center",gap:"1.5rem",":hover":{transform:"translateY(-5px)"}},children:A.jsxs("div",{style:{display:"flex",gap:"1.5rem",flexDirection:"row",alignItems:"center"},children:[A.jsx("button",{className:`primary-button ${B!=="admin"&&B!=="organizer"?"join-lobby-button":""}`,onClick:()=>_?d(!0):Ne("/signup?redirect=lobby"),disabled:F===null||W==="terminate",style:{opacity:1,cursor:F===null||W==="terminate"?"not-allowed":"pointer",padding:"16px 20px",backgroundColor:B!=="admin"&&B!=="organizer"?"transparent":"#144dff",color:"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0",display:"block",position:"relative",zIndex:1,textAlign:"center",outline:B!=="admin"&&B!=="organizer"?"none":"1px solid rgba(58, 53, 53, 0.7)",":hover":{backgroundColor:B!=="admin"&&B!=="organizer"?"transparent":"#535bf2",transform:"scale(1.02)"}},children:A.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Join Lobby"})}),_&&B!=="admin"&&B!=="organizer"&&A.jsx("button",{className:"primary-button join-lobby-button",onClick:()=>window.location.href="https://reuneo.com/organizer-signup",style:{padding:"16px 20px",backgroundColor:"transparent",color:"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0",display:"block",position:"relative",zIndex:1,textAlign:"center",outline:"none",":hover":{transform:"scale(1.02)"}},children:A.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Become Organizer"})}),(B==="admin"||B==="organizer")&&A.jsx("button",{className:`primary-button ${B==="admin"||B==="organizer"?"create-lobby-button":""}`,onClick:Q.length>0?void 0:()=>Ne("/create_lobby"),disabled:Q.length>0,title:Q.length>0?"You already have an active lobby. Close it before creating a new one.":"Create a new lobby",style:{padding:"16px 20px",backgroundColor:Q.length>0?"rgba(128, 128, 128, 0.3)":"transparent",color:Q.length>0?"rgba(255, 255, 255, 0.5)":"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:Q.length>0?"0 2px 3px rgba(0, 0, 0, 0.2)":"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0",position:"relative",zIndex:1,textAlign:"center",cursor:Q.length>0?"not-allowed":"pointer",opacity:Q.length>0?.6:1,":hover":{transform:Q.length>0?"none":"scale(1.02)"}},children:A.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Create Lobby"})})]})})}),ce&&!((B==="admin"||B==="organizer")&&Q.length>0)&&A.jsx("div",{className:"events-list",style:{position:"absolute",bottom:"calc(20px + 120px + 10px)",left:"50%",transform:"translateX(-50%)",width:"44%",height:"15%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.05), rgba(83, 91, 242, 0.05))",borderRadius:"30px",padding:"1rem",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",justifyContent:"center",alignItems:"center"},children:A.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",perspective:"1000px"},children:A.jsxs("div",{className:"card",style:{width:"calc(100% - 2rem)",maxWidth:"200px",minWidth:"150px",background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",boxShadow:"0 10px 30px rgba(20, 77, 255, 0.15)",border:"1px solid rgba(20, 77, 255, 0.2)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",padding:"1rem 1rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",transformStyle:"preserve-3d","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(20, 77, 255, 0.1), rgba(83, 91, 242, 0.1))",opacity:0,transition:"opacity 0.4s ease"}},onClick:()=>Ne(`/lobby?code=${ce}`),onMouseEnter:fe=>{fe.currentTarget.style.transform="translateY(-10px) rotateX(5deg)",fe.currentTarget.style.boxShadow="0 20px 40px rgba(20, 77, 255, 0.25)",fe.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.4)",fe.currentTarget.style.background="rgba(255, 255, 255, 0.98)"},onMouseLeave:fe=>{fe.currentTarget.style.transform="translateY(0) rotateX(0)",fe.currentTarget.style.boxShadow="0 10px 30px rgba(20, 77, 255, 0.15)",fe.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.2)",fe.currentTarget.style.background="rgba(255, 255, 255, 0.95)"},children:[A.jsx("div",{className:"glow-button",style:{width:"30px",height:"30px",borderRadius:"50%",background:"linear-gradient(135deg, #144dff, #535bf2)",marginBottom:".5rem",marginTop:"-1rem",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:".8rem",boxShadow:"0 8px 20px rgba(20, 77, 255, 0.3)",transition:"all 0.4s ease",position:"relative","&::after":{content:'""',position:"absolute",top:"-5px",left:"-5px",right:"-5px",bottom:"-5px",borderRadius:"50%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.2), rgba(83, 91, 242, 0.2))",zIndex:-1,animation:"pulse 2s infinite"}},children:ce.charAt(0).toUpperCase()}),A.jsxs("h3",{style:{marginTop:"0.5rem",color:"#144dff",fontWeight:"700",fontSize:".9em",fontFamily:"Helvetica",textAlign:"center",textShadow:"0 2px 4px rgba(20, 77, 255, 0.1)",letterSpacing:"0.5px"},children:["Return to ",ce]})]})})}),(B==="admin"||B==="organizer")&&Q.length>0&&A.jsx("div",{className:"events-list",style:{position:"absolute",bottom:ce&&!((B==="admin"||B==="organizer")&&Q.length>0)?"calc(20px + 120px + 10px + 15% + 10px)":"calc(20px + 120px + 10px)",left:"50%",transform:"translateX(-50%)",width:"44%",height:"15%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.05), rgba(83, 91, 242, 0.05))",borderRadius:"30px",padding:"1rem",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",justifyContent:"center",alignItems:"center"},children:ue?A.jsx("div",{style:{textAlign:"center",color:"white"},children:A.jsx("p",{children:"Loading your lobbies..."})}):Q.length>0?A.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",perspective:"1000px"},children:Q.map((fe,X)=>A.jsxs("div",{className:"card",style:{width:"calc(100% - 2rem)",maxWidth:"200px",minWidth:"150px",background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",boxShadow:"0 10px 30px rgba(20, 77, 255, 0.15)",border:"1px solid rgba(20, 77, 255, 0.2)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",padding:"1rem 1rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",transformStyle:"preserve-3d","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(20, 77, 255, 0.1), rgba(83, 91, 242, 0.1))",opacity:0,transition:"opacity 0.4s ease"}},onClick:()=>Ue(fe),onMouseEnter:te=>{te.currentTarget.style.transform="translateY(-10px) rotateX(5deg)",te.currentTarget.style.boxShadow="0 20px 40px rgba(20, 77, 255, 0.25)",te.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.4)",te.currentTarget.style.background="rgba(255, 255, 255, 0.98)"},onMouseLeave:te=>{te.currentTarget.style.transform="translateY(0) rotateX(0)",te.currentTarget.style.boxShadow="0 10px 30px rgba(20, 77, 255, 0.15)",te.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.2)",te.currentTarget.style.background="rgba(255, 255, 255, 0.95)"},children:[A.jsx("div",{className:"glow-button",style:{width:"30px",height:"30px",borderRadius:"50%",background:"linear-gradient(135deg, #144dff, #535bf2)",marginBottom:".5rem",marginTop:"-1rem",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:".8rem",boxShadow:"0 8px 20px rgba(20, 77, 255, 0.3)",transition:"all 0.4s ease",position:"relative","&::after":{content:'""',position:"absolute",top:"-5px",left:"-5px",right:"-5px",bottom:"-5px",borderRadius:"50%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.2), rgba(83, 91, 242, 0.2))",zIndex:-1,animation:"pulse 2s infinite"}},children:fe&&fe.length>0?fe.charAt(0).toUpperCase():"?"}),A.jsxs("h3",{style:{marginTop:"0.5rem",color:"#144dff",fontWeight:"700",fontSize:".9em",fontFamily:"Helvetica",textAlign:"center",textShadow:"0 2px 4px rgba(20, 77, 255, 0.1)",letterSpacing:"0.5px"},children:["Lobby ",fe||"Unknown"]})]},X))}):A.jsx("div",{style:{}})})]}),A.jsx(Oe,{})]})};function FE(){const{pathname:r}=Yr();return R.useEffect(()=>{window.scrollTo(0,0)},[r]),null}const jE=()=>{const{login:r,signup:o,user:a,logout:d,checkAuth:p}=R.useContext(Ar),[x,y]=R.useState(""),[b,w]=R.useState(""),[E,S]=R.useState(""),[I,_]=R.useState(""),[D,L]=R.useState(!0),[B,F]=R.useState({}),[V,W]=R.useState(!1),z=pr(),Q=ce=>{const $=/^[a-z0-9]+$/;return ce.length>=2&&$.test(ce)},ie=ce=>{const $=ce.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");y($),$.length>0?W(!0):W(!1),Q($)?F(Ne=>({...Ne,username:""})):F(Ne=>({...Ne,username:" "}))},ue=ce=>{const $=ce.target.value.toLowerCase();w($)},q=async ce=>{if(ce.preventDefault(),_(""),!Q(x)){_("Please enter a valid username");return}try{const $=D?"/login":"/signup",Ne=await fetch(window.server_url+$,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:x,password:b}),mode:"cors"});if(Ne.ok){const Pe=await Ne.json();r(Pe),p(),z("/")}else{const Pe=await Ne.json();_(Pe.message||`${D?"Login":"Signup"} failed`)}}catch($){_("Network error occurred. Please try again."),console.error("Error:",$)}};return A.jsxs("div",{className:"login-container",children:[A.jsx("button",{onClick:()=>z("/"),className:"homescreen-button",children:"Home"}),A.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),A.jsx("h1",{className:"login-header",children:"Login"}),A.jsxs("div",{className:"login-signup-form",children:[I&&A.jsx("div",{className:"error-message",children:I}),A.jsxs("form",{onSubmit:q,children:[A.jsxs("div",{className:"form-group",children:[A.jsx("input",{type:"text",placeholder:"Username",className:"login-input",value:x,onChange:ie,required:!0}),V&&A.jsx("div",{className:"step-success",children:"lowercase letters and numbers only"})]}),A.jsx("div",{className:"form-group",children:A.jsx("input",{type:"text",placeholder:"Password",className:"login-input",value:b,onChange:ue,required:!0})}),A.jsx("button",{type:"submit",className:"login-primary-button",children:"Login"})]})]})]})},VE=()=>{const r=pr(),{logout:o}=R.useContext(Ar);return localStorage.removeItem("access_token"),R.useEffect(()=>{console.log("LogoutPage useEffect"),setTimeout(()=>{o(),r("/")},100)},[]),A.jsx("div",{children:"Logged out redirecting to homescreen"})};var zE=Object.defineProperty,bc=Object.getOwnPropertySymbols,Dm=Object.prototype.hasOwnProperty,Lm=Object.prototype.propertyIsEnumerable,Op=(r,o,a)=>o in r?zE(r,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[o]=a,Qf=(r,o)=>{for(var a in o||(o={}))Dm.call(o,a)&&Op(r,a,o[a]);if(bc)for(var a of bc(o))Lm.call(o,a)&&Op(r,a,o[a]);return r},Jf=(r,o)=>{var a={};for(var d in r)Dm.call(r,d)&&o.indexOf(d)<0&&(a[d]=r[d]);if(r!=null&&bc)for(var d of bc(r))o.indexOf(d)<0&&Lm.call(r,d)&&(a[d]=r[d]);return a};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Js;(r=>{const o=class _t{constructor(w,E,S,I){if(this.version=w,this.errorCorrectionLevel=E,this.modules=[],this.isFunction=[],w<_t.MIN_VERSION||w>_t.MAX_VERSION)throw new RangeError("Version value out of range");if(I<-1||I>7)throw new RangeError("Mask value out of range");this.size=w*4+17;let _=[];for(let L=0;L<this.size;L++)_.push(!1);for(let L=0;L<this.size;L++)this.modules.push(_.slice()),this.isFunction.push(_.slice());this.drawFunctionPatterns();const D=this.addEccAndInterleave(S);if(this.drawCodewords(D),I==-1){let L=1e9;for(let B=0;B<8;B++){this.applyMask(B),this.drawFormatBits(B);const F=this.getPenaltyScore();F<L&&(I=B,L=F),this.applyMask(B)}}p(0<=I&&I<=7),this.mask=I,this.applyMask(I),this.drawFormatBits(I),this.isFunction=[]}static encodeText(w,E){const S=r.QrSegment.makeSegments(w);return _t.encodeSegments(S,E)}static encodeBinary(w,E){const S=r.QrSegment.makeBytes(w);return _t.encodeSegments([S],E)}static encodeSegments(w,E,S=1,I=40,_=-1,D=!0){if(!(_t.MIN_VERSION<=S&&S<=I&&I<=_t.MAX_VERSION)||_<-1||_>7)throw new RangeError("Invalid value");let L,B;for(L=S;;L++){const z=_t.getNumDataCodewords(L,E)*8,Q=y.getTotalBits(w,L);if(Q<=z){B=Q;break}if(L>=I)throw new RangeError("Data too long")}for(const z of[_t.Ecc.MEDIUM,_t.Ecc.QUARTILE,_t.Ecc.HIGH])D&&B<=_t.getNumDataCodewords(L,z)*8&&(E=z);let F=[];for(const z of w){a(z.mode.modeBits,4,F),a(z.numChars,z.mode.numCharCountBits(L),F);for(const Q of z.getData())F.push(Q)}p(F.length==B);const V=_t.getNumDataCodewords(L,E)*8;p(F.length<=V),a(0,Math.min(4,V-F.length),F),a(0,(8-F.length%8)%8,F),p(F.length%8==0);for(let z=236;F.length<V;z^=253)a(z,8,F);let W=[];for(;W.length*8<F.length;)W.push(0);return F.forEach((z,Q)=>W[Q>>>3]|=z<<7-(Q&7)),new _t(L,E,W,_)}getModule(w,E){return 0<=w&&w<this.size&&0<=E&&E<this.size&&this.modules[E][w]}getModules(){return this.modules}drawFunctionPatterns(){for(let S=0;S<this.size;S++)this.setFunctionModule(6,S,S%2==0),this.setFunctionModule(S,6,S%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const w=this.getAlignmentPatternPositions(),E=w.length;for(let S=0;S<E;S++)for(let I=0;I<E;I++)S==0&&I==0||S==0&&I==E-1||S==E-1&&I==0||this.drawAlignmentPattern(w[S],w[I]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(w){const E=this.errorCorrectionLevel.formatBits<<3|w;let S=E;for(let _=0;_<10;_++)S=S<<1^(S>>>9)*1335;const I=(E<<10|S)^21522;p(I>>>15==0);for(let _=0;_<=5;_++)this.setFunctionModule(8,_,d(I,_));this.setFunctionModule(8,7,d(I,6)),this.setFunctionModule(8,8,d(I,7)),this.setFunctionModule(7,8,d(I,8));for(let _=9;_<15;_++)this.setFunctionModule(14-_,8,d(I,_));for(let _=0;_<8;_++)this.setFunctionModule(this.size-1-_,8,d(I,_));for(let _=8;_<15;_++)this.setFunctionModule(8,this.size-15+_,d(I,_));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let w=this.version;for(let S=0;S<12;S++)w=w<<1^(w>>>11)*7973;const E=this.version<<12|w;p(E>>>18==0);for(let S=0;S<18;S++){const I=d(E,S),_=this.size-11+S%3,D=Math.floor(S/3);this.setFunctionModule(_,D,I),this.setFunctionModule(D,_,I)}}drawFinderPattern(w,E){for(let S=-4;S<=4;S++)for(let I=-4;I<=4;I++){const _=Math.max(Math.abs(I),Math.abs(S)),D=w+I,L=E+S;0<=D&&D<this.size&&0<=L&&L<this.size&&this.setFunctionModule(D,L,_!=2&&_!=4)}}drawAlignmentPattern(w,E){for(let S=-2;S<=2;S++)for(let I=-2;I<=2;I++)this.setFunctionModule(w+I,E+S,Math.max(Math.abs(I),Math.abs(S))!=1)}setFunctionModule(w,E,S){this.modules[E][w]=S,this.isFunction[E][w]=!0}addEccAndInterleave(w){const E=this.version,S=this.errorCorrectionLevel;if(w.length!=_t.getNumDataCodewords(E,S))throw new RangeError("Invalid argument");const I=_t.NUM_ERROR_CORRECTION_BLOCKS[S.ordinal][E],_=_t.ECC_CODEWORDS_PER_BLOCK[S.ordinal][E],D=Math.floor(_t.getNumRawDataModules(E)/8),L=I-D%I,B=Math.floor(D/I);let F=[];const V=_t.reedSolomonComputeDivisor(_);for(let z=0,Q=0;z<I;z++){let ie=w.slice(Q,Q+B-_+(z<L?0:1));Q+=ie.length;const ue=_t.reedSolomonComputeRemainder(ie,V);z<L&&ie.push(0),F.push(ie.concat(ue))}let W=[];for(let z=0;z<F[0].length;z++)F.forEach((Q,ie)=>{(z!=B-_||ie>=L)&&W.push(Q[z])});return p(W.length==D),W}drawCodewords(w){if(w.length!=Math.floor(_t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let E=0;for(let S=this.size-1;S>=1;S-=2){S==6&&(S=5);for(let I=0;I<this.size;I++)for(let _=0;_<2;_++){const D=S-_,B=(S+1&2)==0?this.size-1-I:I;!this.isFunction[B][D]&&E<w.length*8&&(this.modules[B][D]=d(w[E>>>3],7-(E&7)),E++)}}p(E==w.length*8)}applyMask(w){if(w<0||w>7)throw new RangeError("Mask value out of range");for(let E=0;E<this.size;E++)for(let S=0;S<this.size;S++){let I;switch(w){case 0:I=(S+E)%2==0;break;case 1:I=E%2==0;break;case 2:I=S%3==0;break;case 3:I=(S+E)%3==0;break;case 4:I=(Math.floor(S/3)+Math.floor(E/2))%2==0;break;case 5:I=S*E%2+S*E%3==0;break;case 6:I=(S*E%2+S*E%3)%2==0;break;case 7:I=((S+E)%2+S*E%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[E][S]&&I&&(this.modules[E][S]=!this.modules[E][S])}}getPenaltyScore(){let w=0;for(let _=0;_<this.size;_++){let D=!1,L=0,B=[0,0,0,0,0,0,0];for(let F=0;F<this.size;F++)this.modules[_][F]==D?(L++,L==5?w+=_t.PENALTY_N1:L>5&&w++):(this.finderPenaltyAddHistory(L,B),D||(w+=this.finderPenaltyCountPatterns(B)*_t.PENALTY_N3),D=this.modules[_][F],L=1);w+=this.finderPenaltyTerminateAndCount(D,L,B)*_t.PENALTY_N3}for(let _=0;_<this.size;_++){let D=!1,L=0,B=[0,0,0,0,0,0,0];for(let F=0;F<this.size;F++)this.modules[F][_]==D?(L++,L==5?w+=_t.PENALTY_N1:L>5&&w++):(this.finderPenaltyAddHistory(L,B),D||(w+=this.finderPenaltyCountPatterns(B)*_t.PENALTY_N3),D=this.modules[F][_],L=1);w+=this.finderPenaltyTerminateAndCount(D,L,B)*_t.PENALTY_N3}for(let _=0;_<this.size-1;_++)for(let D=0;D<this.size-1;D++){const L=this.modules[_][D];L==this.modules[_][D+1]&&L==this.modules[_+1][D]&&L==this.modules[_+1][D+1]&&(w+=_t.PENALTY_N2)}let E=0;for(const _ of this.modules)E=_.reduce((D,L)=>D+(L?1:0),E);const S=this.size*this.size,I=Math.ceil(Math.abs(E*20-S*10)/S)-1;return p(0<=I&&I<=9),w+=I*_t.PENALTY_N4,p(0<=w&&w<=2568888),w}getAlignmentPatternPositions(){if(this.version==1)return[];{const w=Math.floor(this.version/7)+2,E=this.version==32?26:Math.ceil((this.version*4+4)/(w*2-2))*2;let S=[6];for(let I=this.size-7;S.length<w;I-=E)S.splice(1,0,I);return S}}static getNumRawDataModules(w){if(w<_t.MIN_VERSION||w>_t.MAX_VERSION)throw new RangeError("Version number out of range");let E=(16*w+128)*w+64;if(w>=2){const S=Math.floor(w/7)+2;E-=(25*S-10)*S-55,w>=7&&(E-=36)}return p(208<=E&&E<=29648),E}static getNumDataCodewords(w,E){return Math.floor(_t.getNumRawDataModules(w)/8)-_t.ECC_CODEWORDS_PER_BLOCK[E.ordinal][w]*_t.NUM_ERROR_CORRECTION_BLOCKS[E.ordinal][w]}static reedSolomonComputeDivisor(w){if(w<1||w>255)throw new RangeError("Degree out of range");let E=[];for(let I=0;I<w-1;I++)E.push(0);E.push(1);let S=1;for(let I=0;I<w;I++){for(let _=0;_<E.length;_++)E[_]=_t.reedSolomonMultiply(E[_],S),_+1<E.length&&(E[_]^=E[_+1]);S=_t.reedSolomonMultiply(S,2)}return E}static reedSolomonComputeRemainder(w,E){let S=E.map(I=>0);for(const I of w){const _=I^S.shift();S.push(0),E.forEach((D,L)=>S[L]^=_t.reedSolomonMultiply(D,_))}return S}static reedSolomonMultiply(w,E){if(w>>>8||E>>>8)throw new RangeError("Byte out of range");let S=0;for(let I=7;I>=0;I--)S=S<<1^(S>>>7)*285,S^=(E>>>I&1)*w;return p(S>>>8==0),S}finderPenaltyCountPatterns(w){const E=w[1];p(E<=this.size*3);const S=E>0&&w[2]==E&&w[3]==E*3&&w[4]==E&&w[5]==E;return(S&&w[0]>=E*4&&w[6]>=E?1:0)+(S&&w[6]>=E*4&&w[0]>=E?1:0)}finderPenaltyTerminateAndCount(w,E,S){return w&&(this.finderPenaltyAddHistory(E,S),E=0),E+=this.size,this.finderPenaltyAddHistory(E,S),this.finderPenaltyCountPatterns(S)}finderPenaltyAddHistory(w,E){E[0]==0&&(w+=this.size),E.pop(),E.unshift(w)}};o.MIN_VERSION=1,o.MAX_VERSION=40,o.PENALTY_N1=3,o.PENALTY_N2=3,o.PENALTY_N3=40,o.PENALTY_N4=10,o.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],o.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],r.QrCode=o;function a(b,w,E){if(w<0||w>31||b>>>w)throw new RangeError("Value out of range");for(let S=w-1;S>=0;S--)E.push(b>>>S&1)}function d(b,w){return(b>>>w&1)!=0}function p(b){if(!b)throw new Error("Assertion error")}const x=class gn{constructor(w,E,S){if(this.mode=w,this.numChars=E,this.bitData=S,E<0)throw new RangeError("Invalid argument");this.bitData=S.slice()}static makeBytes(w){let E=[];for(const S of w)a(S,8,E);return new gn(gn.Mode.BYTE,w.length,E)}static makeNumeric(w){if(!gn.isNumeric(w))throw new RangeError("String contains non-numeric characters");let E=[];for(let S=0;S<w.length;){const I=Math.min(w.length-S,3);a(parseInt(w.substring(S,S+I),10),I*3+1,E),S+=I}return new gn(gn.Mode.NUMERIC,w.length,E)}static makeAlphanumeric(w){if(!gn.isAlphanumeric(w))throw new RangeError("String contains unencodable characters in alphanumeric mode");let E=[],S;for(S=0;S+2<=w.length;S+=2){let I=gn.ALPHANUMERIC_CHARSET.indexOf(w.charAt(S))*45;I+=gn.ALPHANUMERIC_CHARSET.indexOf(w.charAt(S+1)),a(I,11,E)}return S<w.length&&a(gn.ALPHANUMERIC_CHARSET.indexOf(w.charAt(S)),6,E),new gn(gn.Mode.ALPHANUMERIC,w.length,E)}static makeSegments(w){return w==""?[]:gn.isNumeric(w)?[gn.makeNumeric(w)]:gn.isAlphanumeric(w)?[gn.makeAlphanumeric(w)]:[gn.makeBytes(gn.toUtf8ByteArray(w))]}static makeEci(w){let E=[];if(w<0)throw new RangeError("ECI assignment value out of range");if(w<128)a(w,8,E);else if(w<16384)a(2,2,E),a(w,14,E);else if(w<1e6)a(6,3,E),a(w,21,E);else throw new RangeError("ECI assignment value out of range");return new gn(gn.Mode.ECI,0,E)}static isNumeric(w){return gn.NUMERIC_REGEX.test(w)}static isAlphanumeric(w){return gn.ALPHANUMERIC_REGEX.test(w)}getData(){return this.bitData.slice()}static getTotalBits(w,E){let S=0;for(const I of w){const _=I.mode.numCharCountBits(E);if(I.numChars>=1<<_)return 1/0;S+=4+_+I.bitData.length}return S}static toUtf8ByteArray(w){w=encodeURI(w);let E=[];for(let S=0;S<w.length;S++)w.charAt(S)!="%"?E.push(w.charCodeAt(S)):(E.push(parseInt(w.substring(S+1,S+3),16)),S+=2);return E}};x.NUMERIC_REGEX=/^[0-9]*$/,x.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,x.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let y=x;r.QrSegment=x})(Js||(Js={}));(r=>{(o=>{const a=class{constructor(p,x){this.ordinal=p,this.formatBits=x}};a.LOW=new a(0,1),a.MEDIUM=new a(1,0),a.QUARTILE=new a(2,3),a.HIGH=new a(3,2),o.Ecc=a})(r.QrCode||(r.QrCode={}))})(Js||(Js={}));(r=>{(o=>{const a=class{constructor(p,x){this.modeBits=p,this.numBitsCharCount=x}numCharCountBits(p){return this.numBitsCharCount[Math.floor((p+7)/17)]}};a.NUMERIC=new a(1,[10,12,14]),a.ALPHANUMERIC=new a(2,[9,11,13]),a.BYTE=new a(4,[8,16,16]),a.KANJI=new a(8,[8,10,12]),a.ECI=new a(7,[0,0,0]),o.Mode=a})(r.QrSegment||(r.QrSegment={}))})(Js||(Js={}));var Oo=Js;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var UE={L:Oo.QrCode.Ecc.LOW,M:Oo.QrCode.Ecc.MEDIUM,Q:Oo.QrCode.Ecc.QUARTILE,H:Oo.QrCode.Ecc.HIGH},Bm=128,Fm="L",jm="#FFFFFF",Vm="#000000",zm=!1,Um=1,WE=4,HE=0,GE=.1;function Wm(r,o=0){const a=[];return r.forEach(function(d,p){let x=null;d.forEach(function(y,b){if(!y&&x!==null){a.push(`M${x+o} ${p+o}h${b-x}v1H${x+o}z`),x=null;return}if(b===d.length-1){if(!y)return;x===null?a.push(`M${b+o},${p+o} h1v1H${b+o}z`):a.push(`M${x+o},${p+o} h${b+1-x}v1H${x+o}z`);return}y&&x===null&&(x=b)})}),a.join("")}function Hm(r,o){return r.slice().map((a,d)=>d<o.y||d>=o.y+o.h?a:a.map((p,x)=>x<o.x||x>=o.x+o.w?p:!1))}function XE(r,o,a,d){if(d==null)return null;const p=r.length+a*2,x=Math.floor(o*GE),y=p/o,b=(d.width||x)*y,w=(d.height||x)*y,E=d.x==null?r.length/2-b/2:d.x*y,S=d.y==null?r.length/2-w/2:d.y*y,I=d.opacity==null?1:d.opacity;let _=null;if(d.excavate){let L=Math.floor(E),B=Math.floor(S),F=Math.ceil(b+E-L),V=Math.ceil(w+S-B);_={x:L,y:B,w:F,h:V}}const D=d.crossOrigin;return{x:E,y:S,h:w,w:b,excavation:_,opacity:I,crossOrigin:D}}function YE(r,o){return o!=null?Math.max(Math.floor(o),0):r?WE:HE}function Gm({value:r,level:o,minVersion:a,includeMargin:d,marginSize:p,imageSettings:x,size:y,boostLevel:b}){let w=en.useMemo(()=>{const L=(Array.isArray(r)?r:[r]).reduce((B,F)=>(B.push(...Oo.QrSegment.makeSegments(F)),B),[]);return Oo.QrCode.encodeSegments(L,UE[o],a,void 0,void 0,b)},[r,o,a,b]);const{cells:E,margin:S,numCells:I,calculatedImageSettings:_}=en.useMemo(()=>{let D=w.getModules();const L=YE(d,p),B=D.length+L*2,F=XE(D,y,L,x);return{cells:D,margin:L,numCells:B,calculatedImageSettings:F}},[w,y,x,d,p]);return{qrcode:w,margin:S,cells:E,numCells:I,calculatedImageSettings:_}}var KE=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),ZE=en.forwardRef(function(o,a){const d=o,{value:p,size:x=Bm,level:y=Fm,bgColor:b=jm,fgColor:w=Vm,includeMargin:E=zm,minVersion:S=Um,boostLevel:I,marginSize:_,imageSettings:D}=d,B=Jf(d,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:F}=B,V=Jf(B,["style"]),W=D==null?void 0:D.src,z=en.useRef(null),Q=en.useRef(null),ie=en.useCallback(Ve=>{z.current=Ve,typeof a=="function"?a(Ve):a&&(a.current=Ve)},[a]),[ue,q]=en.useState(!1),{margin:ce,cells:$,numCells:Ne,calculatedImageSettings:Pe}=Gm({value:p,level:y,minVersion:S,boostLevel:I,includeMargin:E,marginSize:_,imageSettings:D,size:x});en.useEffect(()=>{if(z.current!=null){const Ve=z.current,ee=Ve.getContext("2d");if(!ee)return;let Ue=$;const me=Q.current,pe=Pe!=null&&me!==null&&me.complete&&me.naturalHeight!==0&&me.naturalWidth!==0;pe&&Pe.excavation!=null&&(Ue=Hm($,Pe.excavation));const Oe=window.devicePixelRatio||1;Ve.height=Ve.width=x*Oe;const fe=x/Ne*Oe;ee.scale(fe,fe),ee.fillStyle=b,ee.fillRect(0,0,Ne,Ne),ee.fillStyle=w,KE?ee.fill(new Path2D(Wm(Ue,ce))):$.forEach(function(X,te){X.forEach(function(Ae,ze){Ae&&ee.fillRect(ze+ce,te+ce,1,1)})}),Pe&&(ee.globalAlpha=Pe.opacity),pe&&ee.drawImage(me,Pe.x+ce,Pe.y+ce,Pe.w,Pe.h)}}),en.useEffect(()=>{q(!1)},[W]);const ke=Qf({height:x,width:x},F);let Re=null;return W!=null&&(Re=en.createElement("img",{src:W,key:W,style:{display:"none"},onLoad:()=>{q(!0)},ref:Q,crossOrigin:Pe==null?void 0:Pe.crossOrigin})),en.createElement(en.Fragment,null,en.createElement("canvas",Qf({style:ke,height:x,width:x,ref:ie,role:"img"},V)),Re)});ZE.displayName="QRCodeCanvas";var Kd=en.forwardRef(function(o,a){const d=o,{value:p,size:x=Bm,level:y=Fm,bgColor:b=jm,fgColor:w=Vm,includeMargin:E=zm,minVersion:S=Um,boostLevel:I,title:_,marginSize:D,imageSettings:L}=d,B=Jf(d,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:F,cells:V,numCells:W,calculatedImageSettings:z}=Gm({value:p,level:y,minVersion:S,boostLevel:I,includeMargin:E,marginSize:D,imageSettings:L,size:x});let Q=V,ie=null;L!=null&&z!=null&&(z.excavation!=null&&(Q=Hm(V,z.excavation)),ie=en.createElement("image",{href:L.src,height:z.h,width:z.w,x:z.x+F,y:z.y+F,preserveAspectRatio:"none",opacity:z.opacity,crossOrigin:z.crossOrigin}));const ue=Wm(Q,F);return en.createElement("svg",Qf({height:x,width:x,viewBox:`0 0 ${W} ${W}`,ref:a,role:"img"},B),!!_&&en.createElement("title",null,_),en.createElement("path",{fill:b,d:`M0,0 h${W}v${W}H0z`,shapeRendering:"crispEdges"}),en.createElement("path",{fill:w,d:ue,shapeRendering:"crispEdges"}),ie)});Kd.displayName="QRCodeSVG";const $E=({player:r})=>A.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"350px",height:"500px",margin:"0 auto",position:"relative"},children:r!=null&&r.image_data?A.jsxs("div",{style:{position:"relative",width:"350px",height:"450px"},children:[A.jsx("img",{src:`data:image/jpeg;base64,${r.image_data}`,alt:r.name,style:{width:"350px",height:"450px",objectFit:"cover",borderRadius:"50px",boxShadow:"0 6px 12px rgba(0, 0, 0, 0.3)",margin:"auto",display:"block"},onError:o=>{console.error("Image failed to load:",o),o.target.style.display="none"}}),A.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",backgroundColor:"#144dff",color:"white",padding:"12px 0",borderBottomLeftRadius:"50px",borderBottomRightRadius:"50px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",fontFamily:"Helvetica, Arial, sans-serif",boxShadow:"0 -4px 10px rgba(0, 0, 0, 0.1)",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.2)"},children:r.name})]}):A.jsxs("div",{style:{width:"350px",height:"450px",backgroundColor:"#f0f0f0",borderRadius:"50px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"relative"},children:[A.jsx("p",{style:{marginBottom:"60px"},children:"No image available"}),A.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",backgroundColor:"#144dff",color:"white",padding:"12px 0",borderBottomLeftRadius:"50px",borderBottomRightRadius:"50px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",fontFamily:"Helvetica, Arial, sans-serif",boxShadow:"0 -4px 10px rgba(0, 0, 0, 0.1)",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.2)"},children:r.name})]})});var Pp=typeof window>"u"?R.useEffect:R.useLayoutEffect,qE=({isPlaying:r,duration:o,startAt:a=0,updateInterval:d=0,onComplete:p,onUpdate:x})=>{let[y,b]=R.useState(a),w=R.useRef(0),E=R.useRef(a),S=R.useRef(a*-1e3),I=R.useRef(null),_=R.useRef(null),D=R.useRef(null),L=V=>{let W=V/1e3;if(_.current===null){_.current=W,I.current=requestAnimationFrame(L);return}let z=W-_.current,Q=w.current+z;_.current=W,w.current=Q;let ie=E.current+(d===0?Q:(Q/d|0)*d),ue=E.current+Q,q=typeof o=="number"&&ue>=o;b(q?o:ie),q||(I.current=requestAnimationFrame(L))},B=()=>{I.current&&cancelAnimationFrame(I.current),D.current&&clearTimeout(D.current),_.current=null},F=R.useCallback(V=>{B(),w.current=0;let W=typeof V=="number"?V:a;E.current=W,b(W),r&&(I.current=requestAnimationFrame(L))},[r,a]);return Pp(()=>{if(x==null||x(y),o&&y>=o){S.current+=o*1e3;let{shouldRepeat:V=!1,delay:W=0,newStartAt:z}=(p==null?void 0:p(S.current/1e3))||{};V&&(D.current=setTimeout(()=>F(z),W*1e3))}},[y,o]),Pp(()=>(r&&(I.current=requestAnimationFrame(L)),B),[r,o,d]),{elapsedTime:y,reset:F}},QE=(r,o,a)=>{let d=r/2,p=o/2,x=d-p,y=2*x,b=a==="clockwise"?"1,0":"0,1",w=2*Math.PI*x;return{path:`m ${d},${p} a ${x},${x} 0 ${b} 0,${y} a ${x},${x} 0 ${b} 0,-${y}`,pathLength:w}},Mp=(r,o)=>r===0||r===o?0:typeof o=="number"?r-o:0,JE=r=>({position:"relative",width:r,height:r}),eA={display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,top:0,width:"100%",height:"100%"},Xm=(r,o,a,d,p)=>{if(d===0)return o;let x=(p?d-r:r)/d;return o+a*x},Dp=r=>{var o,a;return(a=(o=r.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(d,p,x,y)=>`#${p}${p}${x}${x}${y}${y}`).substring(1).match(/.{2}/g))==null?void 0:o.map(d=>parseInt(d,16)))!=null?a:[]},tA=(r,o)=>{var a;let{colors:d,colorsTime:p,isSmoothColorTransition:x=!0}=r;if(typeof d=="string")return d;let y=(a=p==null?void 0:p.findIndex((_,D)=>_>=o&&o>=p[D+1]))!=null?a:-1;if(!p||y===-1)return d[0];if(!x)return d[y];let b=p[y]-o,w=p[y]-p[y+1],E=Dp(d[y]),S=Dp(d[y+1]),I=!!r.isGrowing;return`rgb(${E.map((_,D)=>Xm(b,_,S[D]-_,w,I)|0).join(",")})`},nA=r=>{let{duration:o,initialRemainingTime:a,updateInterval:d,size:p=180,strokeWidth:x=12,trailStrokeWidth:y,isPlaying:b=!1,isGrowing:w=!1,rotation:E="clockwise",onComplete:S,onUpdate:I}=r,_=R.useRef(),D=Math.max(x,y??0),{path:L,pathLength:B}=QE(p,D,E),{elapsedTime:F}=qE({isPlaying:b,duration:o,startAt:Mp(o,a),updateInterval:d,onUpdate:typeof I=="function"?W=>{let z=Math.ceil(o-W);z!==_.current&&(_.current=z,I(z))}:void 0,onComplete:typeof S=="function"?W=>{var z;let{shouldRepeat:Q,delay:ie,newInitialRemainingTime:ue}=(z=S(W))!=null?z:{};if(Q)return{shouldRepeat:Q,delay:ie,newStartAt:Mp(o,ue)}}:void 0}),V=o-F;return{elapsedTime:F,path:L,pathLength:B,remainingTime:Math.ceil(V),rotation:E,size:p,stroke:tA(r,V),strokeDashoffset:Xm(F,0,B,o,w),strokeWidth:x}},Zd=r=>{let{children:o,strokeLinecap:a,trailColor:d,trailStrokeWidth:p}=r,{path:x,pathLength:y,stroke:b,strokeDashoffset:w,remainingTime:E,elapsedTime:S,size:I,strokeWidth:_}=nA(r);return en.createElement("div",{style:JE(I)},en.createElement("svg",{viewBox:`0 0 ${I} ${I}`,width:I,height:I,xmlns:"http://www.w3.org/2000/svg"},en.createElement("path",{d:x,fill:"none",stroke:d??"#d9d9d9",strokeWidth:p??_}),en.createElement("path",{d:x,fill:"none",stroke:b,strokeLinecap:a??"round",strokeWidth:_,strokeDasharray:y,strokeDashoffset:w})),typeof o=="function"&&en.createElement("div",{style:eA},o({remainingTime:E,elapsedTime:S,color:b})))};Zd.displayName="CountdownCircleTimer";const rA=({onComplete:r})=>{const[o,a]=R.useState(7),[d,p]=R.useState(!1),x=R.useRef(null),y=R.useRef(null);R.useEffect(()=>(x.current&&clearTimeout(x.current),y.current&&clearInterval(y.current),y.current=setInterval(()=>{p(!0),x.current=setTimeout(()=>{a(w=>w<=1?(y.current&&clearInterval(y.current),x.current&&clearTimeout(x.current),r&&r(),0):w-1),p(!1)},500)},1e3),()=>{y.current&&clearInterval(y.current),x.current&&clearTimeout(x.current)}),[r]);const b=d?"pop-burst":"";return A.jsx("div",{className:"lobby-countdown-overlay",children:A.jsxs("div",{className:`lobby-countdown-container ${b}`,children:[A.jsx("div",{className:"lobby-countdown-number",children:o}),A.jsx("div",{className:"lobby-countdown-text",children:o>0?"Get ready!":"Starting..."})]})})},iA=({onComplete:r,lobbyCode:o="this"})=>{const{userProfile:a}=R.useContext(Ar),[d,p]=R.useState(0),[x,y]=R.useState(!1),[b,w]=R.useState(!1),[E,S]=R.useState([0]),[I,_]=R.useState(!1),D=R.useRef(null),L=R.useRef(null),B=[{image:"/assets/how_to_tutorial_updated_slide1.svg",duration:2e3,animatedText:"Find your match using their profile picture!"},{image:"/assets/how_to_pt2_2.svg",duration:4e3,animatedText:"Raise volume to the max, to know when you have a match!"},{image:"/assets/how_to_tutorial_updated_slide3.svg",duration:4e3,animatedText:"Tap leave to stop being paired/take a break"}];return R.useEffect(()=>{const F=()=>{if(d>=B.length-1){clearInterval(D.current),r&&r();return}y(!0);const V=d+1;S([d,V]),L.current=setTimeout(()=>{_(!1),p(V),y(!1),setTimeout(()=>{S([V]),w(!0),B[V].animatedText&&_(!0)},500)},500)};return D.current=setInterval(F,B[d].duration),w(!0),d===0&&B[0].animatedText&&_(!0),()=>{D.current&&clearInterval(D.current),L.current&&clearTimeout(L.current)}},[d,B.length,r]),A.jsx("div",{className:"tutorial-overlay",children:A.jsxs("div",{className:"tutorial-container",children:[E.map(F=>A.jsxs("div",{className:`tutorial-slide ${F===d?"current":F<d?"previous":"next"}`,children:[F===d&&B[F].animatedText&&I&&A.jsx("div",{className:"animated-text pop-burst",children:B[F].animatedText}),F===1&&A.jsx("div",{className:"volume-arrow-container",children:A.jsx("svg",{className:"volume-arrow",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:A.jsx("path",{d:"M19 12H5M5 12L12 5M5 12L12 19",stroke:"#144dff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),A.jsx("div",{className:`tutorial-image-container ${F===0?"first-slide":""}`,children:A.jsx("img",{src:B[F].image,alt:`Tutorial step ${F+1}`,className:"tutorial-image"})}),A.jsx("div",{className:`tutorial-text ${b&&F===d?"text-animate":""}`,children:B[F].text})]},F)),A.jsx("div",{className:"tutorial-progress-bar-container",children:A.jsx("div",{className:"tutorial-progress-bar",children:A.jsx("div",{className:"tutorial-progress-bar-fill"})})})]})})},sA=({isVisible:r,onAnimationEnd:o})=>{const[a,d]=R.useState(!1),p=R.useRef(null);return R.useEffect(()=>(p.current&&clearTimeout(p.current),r?(d(!0),p.current=setTimeout(()=>{d(!1),o&&o()},3e3)):d(!1),()=>{p.current&&(clearTimeout(p.current),p.current=null)}),[r,o]),a?A.jsxs("div",{className:"match-overlay",children:[A.jsxs("div",{className:"confetti-container",children:[[...Array(50)].map((x,y)=>A.jsx("div",{className:`confetti confetti-${y%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":Math.random()*.2}},`first-${y}`)),[...Array(50)].map((x,y)=>A.jsx("div",{className:`confetti confetti-${y%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":`${.6+Math.random()*.2}s`}},`second-${y}`))]}),A.jsx("div",{className:"match-text",children:"It's a Match!"})]}):null},oA=({isVisible:r,onAnimationEnd:o})=>{const[a,d]=R.useState(!1),p=R.useRef(null);return R.useEffect(()=>(p.current&&clearTimeout(p.current),r?(d(!0),p.current=setTimeout(()=>{d(!1),o&&o()},1800)):d(!1),()=>{p.current&&(clearTimeout(p.current),p.current=null)}),[r,o]),a?A.jsxs("div",{className:"ready-overlay",children:[A.jsxs("div",{className:"confetti-container",children:[[...Array(50)].map((x,y)=>A.jsx("div",{className:`confetti confetti-${y%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":Math.random()*.2}},`first-${y}`)),[...Array(50)].map((x,y)=>A.jsx("div",{className:`confetti confetti-${y%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":`${.6+Math.random()*.2}s`}},`second-${y}`))]}),A.jsx("div",{className:"ready-text",children:"You're ready!"})]}):null},oc=9,aA=5,lA=5e3,cA=!1,uA=()=>{const r=Math.floor(540),[o,a]=R.useState([]),[d,p]=R.useState("self"),[x,y]=R.useState(!1),[b,w]=R.useState(""),E=R.useRef(null),S=R.useRef(null),[I,_]=R.useState(!1),D=R.useRef(!1),[L,B]=R.useState(!1),{loadSound:F,seekTo:V,cancelSound:W,checkSound:z,soundEnabled:Q,setSoundEnabled:ie,isPlaying:ue}=eg(),[q,ce]=R.useState("yonder"),$=pr(),{code:Ne}=$2(),[Pe,ke]=R.useState(null);Mm(ke,null,q);const{user:Re,userProfile:Ve,checkAuth:ee,permissions:Ue}=R.useContext(Ar);R.useEffect(()=>{(async()=>{if(localStorage.getItem("access_token"))try{Re||await ee()}catch(Qe){console.error("Authentication error:",Qe);const Me=new URLSearchParams(window.location.search).get("code")||Ne;$(Me?`/signup?redirect=lobby&code=${Me}`:"/signup?redirect=lobby")}else{await fetch(window.server_url+"/debug?username="+Re+"&message=no token on the lobby page",{method:"GET"});const Et=new URLSearchParams(window.location.search).get("code")||Ne;$(Et?`/signup?redirect=lobby&code=${Et}`:"/signup?redirect=lobby")}})()},[$,Ne,ee,Re]),R.useEffect(()=>{(()=>{const Qe=new URLSearchParams(window.location.search).get("code")||Ne;if(Qe){ce(Qe),PE(Qe),lt(Qe);const Et=`hasSeenTutorial_${Qe}`,Me=localStorage.getItem(Et),Wn=!!localStorage.getItem("access_token");console.log("Tutorial check:",{codeParam:Qe,lobbyTutorialKey:Et,hasSeenLobbyTutorial:Me,isAuthenticated:Wn}),!Me&&Wn&&(Kr(!0),localStorage.setItem(Et,"true"))}})()},[Ne]);const[me,pe]=R.useState(null),[Oe,fe]=R.useState(null),[X,te]=R.useState(null),[Ae,ze]=R.useState(null),[Se,de]=R.useState(null),We=R.useRef(!1),Fe=R.useRef(null),tt=R.useRef(null),[ge,Ze]=R.useState(null),[at,_e]=R.useState(null),[nt,Pt]=R.useState(null),[Dt,St]=R.useState(null),[vt,pt]=R.useState(!0),xn=R.useRef(0),[Te,zn]=R.useState(null),[Ct,Ge]=R.useState(null),[Je,gt]=R.useState([]),[Ut,Ot]=R.useState([]),[At,nn]=R.useState(!document.hidden),Ht=R.useRef("yonder"),un=R.useRef({}),De=R.useRef([]),[he,ct]=R.useState(!1),st=R.useRef(null),[Rt,Mn]=R.useState(!1);R.useEffect(()=>{Ht.current=q},[q]);async function Pr(Be,mt){const Qe=localStorage.getItem("access_token"),Me=await(await fetch(window.server_url+"/set_profile_info",{method:"POST",headers:{Authorization:`Bearer ${Qe}`,"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},mode:"cors",body:JSON.stringify({tags_work:Be,tags_desiring_work:mt})})).json();console.log("SET PROFILE INFO:",Me)}const Un=async Be=>{if(Be.length!==0){ct(!0);try{const mt=localStorage.getItem("access_token"),Qe=await fetch(`${window.server_url}/load_batch_pfp_small_icons`,{method:"POST",headers:{Authorization:`Bearer ${mt}`,"Content-Type":"application/json",lobby_code:Ht.current},body:JSON.stringify({usernames:Be})});if(Qe.ok){const Et=await Qe.json();un.current={...un.current,...Et},console.log("Profile images fetched:",Object.keys(Et))}else console.error("Failed to fetch profile images:",Qe.status)}catch(mt){console.error("Error fetching profile images:",mt)}finally{ct(!1)}}},lt=async Be=>{try{const mt=await fetch(`${window.server_url}/lobby_setup_data`,{headers:{lobby_code:Be}});if(mt.ok){const Qe=await mt.json();Qe.logo_icon?(st.current=Qe.logo_icon,Mn(!0),console.log("Sponsor logo loaded successfully")):console.log("No sponsor logo available for this lobby")}else console.error("Failed to fetch lobby setup data:",mt.status)}catch(mt){console.error("Error fetching lobby setup data:",mt)}};async function Dn(){try{const Be=localStorage.getItem("access_token");W(),un.current={},De.current=[],(await fetch(window.server_url+"/disconnect_lobby",{headers:{Authorization:`Bearer ${Be}`,lobby_code:q}})).ok&&$("/")}catch(Be){console.error("Error disconnecting from lobby:",Be),$("/")}finally{W(),$("/"),console.log("finally")}}const[As,Ui]=R.useState(!1),[qn,Wi]=R.useState(null),rn=R.useRef(!1),[Mr,si]=R.useState(!1),[An,Hi]=R.useState(null),ar=(Be,mt)=>{if(!Be||!mt)return null;for(const Qe of Be.tags_work)if(mt.desiring_tags_work.includes(Qe)){for(const Et of mt.tags_work)if(Be.desiring_tags_work.includes(Et))return{playerTag:Qe,opponentTag:Et}}return null};async function oi(){try{xn.current+=1,xn.current>5&&(xn.current=0,We.current=!1);const Be=localStorage.getItem("access_token"),mt=!document.hidden,Qe=Ht.current;if(console.log("lobby code fr:",Qe),Qe=="yonder"){console.log("lobby code is not set");return}const Et=await fetch(`${window.server_url}/lobby?is_visible=${mt}`,{headers:{Authorization:`Bearer ${Be}`,is_visible_t_f:mt?"t":"f",lobby_code:Qe}});if(Et.ok){const Me=await Et.json();console.log("LOBBY PAIR DATA:",Qe,Me),Me.status=="inactive"&&(W(),$("/")),te(Me.opponent_name),Me.opponent_name==null&&pe(null),a(Me.custom_tags),Ze(Me.lobby_state),St(Me.lobby_duration);const Wn=typeof Me.round_time_left=="number"&&!isNaN(Me.round_time_left)?Me.round_time_left:0;console.log("Timer Debug:",{roundDuration:Me.lobby_duration,timeLeft:Wn,lobbyState:Me.lobby_state,usingDefaultDuration:!Me.lobby_duration}),Fe.current=Wn,tt.current=Me.beat_go_off,_e(Math.floor(Wn));const Ft=Math.floor(Wn/60),bs=Math.floor(Wn%60);Pt(`${Ft}:${bs.toString().padStart(2,"0")}`),de(Me.table_number),Me.player_tags!=null&&Me.player_tags.tags_work!=null&&gt(Me.player_tags.tags_work),Me.player_tags!=null&&Me.player_tags.desiring_tags_work!=null&&Ot(Me.player_tags.desiring_tags_work),Fe.current!=null&&Me.lobby_state=="active"&&Fe.current!=0&&(V(r-Fe.current),console.log("seeking to",r-Fe.current));const xe=await fetch(`${window.server_url}/display_lobby_metadata?lobby_code=${Qe}`,{headers:{Authorization:`Bearer ${Be}`,lobby_code:Qe}});if(xe.ok){const gr=await xe.json();ke(gr.player_count);const Mt=gr.usernames||[];if(JSON.stringify(De.current)!==JSON.stringify(Mt)){De.current=Mt;const Xi=Mt.filter(Tt=>!un.current[Tt]&&Tt!==(Re==null?void 0:Re.username));Xi.length>0&&(cA||(console.log("Fetching images for new users:",Xi),Un(Xi)))}}if((X!=Me.opponent_name||me==null)&&!We.current&&Me.opponent_name!=null){We.current=!0,console.log("fetching profile");const gr=await fetch(window.server_url+"/paired_player_profile",{headers:{Authorization:`Bearer ${Be}`}});if(gr.ok){const Mt=await gr.json();pe(Mt),console.log("profile fetched:",Mt.name)}else console.log("profile fetch failed");We.current=!1}if(qn==="interrim"&&Me.lobby_state==="active"&&Me.opponent_name&&!rn.current){console.log("Checking for matches...");const gr=ar(Me.player_tags,Me.opponent_tags);gr&&(console.log("Match found! Setting animation and banner...",gr),Hi(gr),si(!0),rn.current=!0,Ui(!0))}Wi(Me.lobby_state)}}catch(Be){console.error("Error fetching lobby data:",Be)}}R.useEffect(()=>{z()?ie(!0):ie(!1);const Be=setInterval(async()=>{oi()},lA);return()=>clearInterval(Be)},[]),R.useEffect(()=>{const Be=setTimeout(oi,1e3);return()=>clearTimeout(Be)},[ge,q]),R.useEffect(()=>{const Be=()=>{const mt=!document.hidden;mt&&!At&&(console.log("Page became visible - fetching latest data"),oi()),nn(mt)};return document.addEventListener("visibilitychange",Be),()=>{document.removeEventListener("visibilitychange",Be)}},[At]);const fn=()=>A.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.125)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},children:A.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",position:"relative",minWidth:"300px"},children:[A.jsx("button",{onClick:()=>pt(!1),style:{color:"#144fff",position:"absolute",right:"10px",top:"10px",border:"none",background:"none",fontSize:"2px",cursor:"pointer"},children:"X"}),A.jsx("h2",{style:{marginTop:"5px"},children:"The Sound is Important"}),A.jsx("h3",{style:{marginTop:"5px"},children:"Raise your volume also"}),A.jsx("p",{style:{color:"#144dff"},children:"You'll need this for the best experience."}),A.jsx("button",{onClick:()=>{F(),pt(!1)},style:{padding:"10px 20px",marginTop:"20px",backgroundColor:"#144dff",color:"#ffffff",border:"none",borderRadius:"14px",fontWeight:"bold",cursor:"pointer"},children:"Enable Sound"})]})}),lr=(Be,mt)=>{Te==null&&zn(Je),Ct==null&&Ge(Ut);const Qe=Be==="self"?Te:Ct;if(!(Qe!=null&&Qe.includes(mt))&&(Qe==null?void 0:Qe.length)>=aA){w("Reached tag limit for this section"),setTimeout(()=>{var Me;(Me=S.current)==null||Me.scrollIntoView({behavior:"smooth",block:"center"})},100),setTimeout(()=>{w("")},3e3);return}Be==="self"?zn(Me=>Me.includes(mt)?Me.filter(Wn=>Wn!==mt):[...Me,mt]):Ge(Me=>Me.includes(mt)?Me.filter(Wn=>Wn!==mt):[...Me,mt])},Tn=()=>{Te!=null&&(Pr(Te,Ct||[]),setTimeout(()=>{gt(Te||[])},800)),p("desiring"),setTimeout(()=>{var Be;(Be=E.current)==null||Be.scrollIntoView({behavior:"smooth",block:"start"})},100)},Le=()=>{Ct!=null&&(Pr(Te||[],Ct),setTimeout(()=>{gt(Te||[]),Ot(Ct)},800),setTimeout(()=>{D.current||(D.current=!0,_(!0),B(!0))},500)),window.scrollTo({top:0,behavior:"smooth"})},[ai,Gi]=R.useState(!1);R.useEffect(()=>{if(ge==="interrim")Gi(!0);else if(ge==="active"){const Be=setTimeout(()=>{Gi(!1)},1e3);return()=>clearTimeout(Be)}},[ge]);const Ln=()=>{console.log("Lobby countdown animation completed")},[Qn,Kr]=R.useState(!1),Ci=()=>{Kr(!1)};R.useEffect(()=>{(ge!=="active"||!me)&&(si(!1),Hi(null))},[ge,me]),R.useEffect(()=>{ge==="terminated"&&(un.current={},De.current=[],Ac())},[ge]);const Jn=R.useRef(null);return R.useEffect(()=>{var Be;!x&&!(Je!=null&&Je.length)&&!(Ut!=null&&Ut.length)&&(o==null?void 0:o.length)>0&&((Be=Jn.current)==null||Be.scrollIntoView({behavior:"smooth"}),y(!0))},[Je,Ut,o,x]),A.jsxs("div",{className:"lobby-container",children:[A.jsxs("div",{className:"lobby-content",children:[A.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0",marginTop:"-1.5rem"},children:A.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",style:{maxWidth:"85px",height:"auto",objectFit:"contain"}})}),(ge==="checkin"||ge==="active"&&!me||ge==="interrim")&&A.jsx("div",{className:"user-profile-container",children:A.jsxs("div",{className:"user-profile",children:[A.jsx("img",{src:Ve!=null&&Ve.image_data?`data:image/jpeg;base64,${Ve.image_data}`:"/assets/avatar_3.png",alt:"Your Profile",className:"user-profile-picture"}),A.jsx("div",{className:"user-profile-glow"})]})}),A.jsx("div",{className:"lobby-header",style:{marginTop:"-50px"},children:A.jsx("h2",{children:o.length>0&&(Je.length==0||Ut.length==0)?A.jsxs(A.Fragment,{children:["You're not ready, complete your profile to get matched up.",A.jsx("button",{className:"missing-tags-button",onClick:()=>{var Be;return(Be=Jn.current)==null?void 0:Be.scrollIntoView({behavior:"smooth"})},children:"Complete Profile"})]}):ge==="active"&&me?A.jsxs("span",{className:"lobby-pop-burst",children:["Go find ",me.name,"!"]}):ge==="checkin"?A.jsxs(A.Fragment,{children:["Wait here ",Ve.name.slice(0,15),".",A.jsx("br",{}),"Your host will start the experience."]}):ge==="active"&&!me?"You will be paired with someone in the next round.":ge==="interrim"?"Get ready for the next round!":ge==="terminated"?"This session has ended. Thank you for participating!":""})},ge),ge==="active"&&me&&Se&&A.jsx("div",{className:"table-number",children:A.jsxs("h3",{children:["at table: ",Se]})}),(st.current||ge!=="checkin")&&A.jsxs("div",{className:`timer-sponsor-container ${st.current&&ge!=="checkin"?"has-timer":""}`,children:[st.current&&A.jsx("div",{className:"sponsor-logo",children:A.jsx("img",{src:`data:image/jpeg;base64,${st.current}`,alt:"Sponsor Logo",style:{width:"100px",height:"100px",objectFit:"contain"}})}),ge!=="checkin"&&A.jsx("div",{className:"time-left",style:{display:"flex",flexDirection:"column",alignItems:"center",background:"white"},children:(ge==="active"||ge==="interrim")&&at?A.jsxs(A.Fragment,{children:[A.jsx(Zd,{isPlaying:ge==="active",duration:Dt||300,initialRemainingTime:at||0,colors:["#144dff"],size:90,strokeWidth:12,trailColor:"#f5f7ff",onComplete:()=>(oi(),{shouldRepeat:!1}),children:({remainingTime:Be})=>{const mt=typeof Be=="number"&&!isNaN(Be)?Be:0,Qe=Math.floor(mt/60),Et=Math.floor(mt%60);return A.jsxs("span",{style:{fontSize:".95rem",color:"#144dff",fontWeight:600},children:[Qe,":",String(Et).padStart(2,"0")]})}},`${ge}-${at}`),A.jsx("span",{style:{fontWeight:700,fontSize:"0.7em",marginTop:"4px",opacity:"1",color:"#144dff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.1)"},children:"round time left"})]}):A.jsx("span",{className:"time-left-text"})})]}),Mr&&An&&ge==="active"&&me&&A.jsxs("div",{className:"match-banner",children:[A.jsx("span",{className:"match-tag",children:An.playerTag}),A.jsx("div",{className:"match-arrow"}),A.jsx("span",{className:"match-tag",children:An.opponentTag})]}),A.jsx("div",{style:{display:"flex",justifyContent:"center",width:"100%",margin:"0 auto"},children:ge==="active"||ge==="interrim"?me?A.jsx("div",{style:{marginTop:"-3rem",width:"100%",display:"flex",justifyContent:"center"},children:A.jsx($E,{player:me})}):A.jsx(A.Fragment,{}):ge==="terminated"?A.jsx("div",{className:"status-message",children:A.jsxs("h2",{children:["This session has ended.",A.jsx("br",{}),"Thank you for participating!"]})}):null}),(ge==="checkin"||ge==="active"&&!me)&&Pe!==null&&A.jsx("div",{className:"player-count-container",children:A.jsxs("div",{className:"player-count-widget",children:[A.jsxs("div",{className:"player-count-icon",children:[A.jsx("div",{className:"icon-pulse"}),A.jsx("img",{src:"/assets/players_display_icon2.png",alt:"Players in lobby",className:"player-count-img"})]}),A.jsxs("div",{className:"player-count-info",children:[A.jsx("span",{className:"player-count-number",children:Pe}),A.jsx("span",{className:"player-count-label",children:"joined"})]}),A.jsx("div",{className:"player-count-lobby",children:q})]})}),(ge==="checkin"||ge==="active"&&!me)&&A.jsx("div",{className:"lobby-profiles-container",children:A.jsx("div",{className:"lobby-profiles-grid",children:Pe>0?A.jsxs(A.Fragment,{children:[Array.from({length:Math.min(Pe,oc)}).map((Be,mt)=>{let Qe;{const Me=De.current[mt];Me&&un.current[Me]?Qe=`data:image/jpeg;base64,${un.current[Me]}`:Qe="/assets/avatar_8.png"}return A.jsxs("div",{className:`profile-icon-wrapper ${mt===Math.min(Pe,oc)-1?"pop-in":""}`,children:[A.jsx("img",{src:Qe,alt:`Profile ${mt+1}`,className:"profile-icon",loading:"lazy"}),A.jsx("div",{className:"profile-icon-glow"})]},`profile-${mt}`)}),Pe>oc&&A.jsx("div",{className:"profile-icon-wrapper more-profiles",children:A.jsxs("div",{className:"more-profiles-bubble",children:["+",Pe-oc]})})]}):A.jsx("div",{children:"No profiles to display"})})}),(ge==="checkin"||ge==="active")&&A.jsxs("div",{className:"selected-tags-container",children:[Je&&Je.length>0&&A.jsxs("div",{className:"tag-category",children:[A.jsx("h4",{children:"I am:"}),A.jsx("div",{className:"tag-list",children:Je.map(Be=>A.jsx("span",{className:"tag-item",children:Be},`self-${Be}`))})]}),Ut&&Ut.length>0&&A.jsxs("div",{className:"tag-category",children:[A.jsx("h4",{children:"Looking for:"}),A.jsx("div",{className:"tag-list",children:Ut.map(Be=>A.jsx("span",{className:"tag-item",children:Be},`desiring-${Be}`))})]})]}),A.jsx("button",{className:"leave-lobby-button",onClick:Dn,children:"Leave"}),A.jsx("button",{className:"how-to-tutorial-button",onClick:()=>Kr(!0),children:"Tutorial"}),Ue==="admin"&&A.jsx("button",{className:"admin-view-button",onClick:()=>$(`/admin_lobby_view?code=${q}`),children:"Manage"}),Array.isArray(o)&&o.length>0&&A.jsx("form",{onSubmit:Be=>{Be.preventDefault(),d==="self"?Tn():Le()},children:A.jsxs("div",{className:"tags-section",ref:Jn,children:[A.jsxs("div",{className:"progress-bar-container",children:[A.jsx("div",{className:`self-progress-bar-tab ${d==="self"?"active":""} ${Je.length>0?"complete":""}`,onClick:()=>p("self"),children:" Who are you?"}),A.jsx("div",{className:`desiring-progress-bar-tab ${d==="desiring"?"active":""} ${Ut.length>0?"complete":""}`,onClick:()=>Je.length>0?p("desiring"):null,children:" Who do you want to meet?"})]}),A.jsxs("div",{className:`tag-group ${d==="self"?"active":"hidden"}`,children:[A.jsx("div",{className:"bounce-wrapper",children:A.jsx("h2",{children:"Who are you?"})}),A.jsx("div",{className:"tag-labels-container",children:o.map(Be=>A.jsxs("label",{className:"tag-label",children:[A.jsx("input",{type:"checkbox",checked:Te!=null?Te.includes(Be):Je.includes(Be),onChange:()=>lr("self",Be)}),Be]},`self-${Be}`))})]}),A.jsxs("div",{className:`tag-group ${d==="desiring"?"active":"hidden"}`,ref:E,children:[A.jsx("div",{className:"bounce-wrapper",children:A.jsx("h2",{children:"Who do you want to meet?"})}),A.jsx("div",{className:"tag-labels-container",children:o.map(Be=>A.jsxs("label",{className:"tag-label",children:[A.jsx("input",{type:"checkbox",checked:Ct!=null?Ct.includes(Be):Ut.includes(Be),onChange:()=>lr("desiring",Be)}),Be]},`desiring-${Be}`))})]}),A.jsx("button",{type:"submit",className:"tag-selection-button",ref:S,children:d==="self"?"Continue":"Save"}),b&&A.jsx("div",{style:{color:"#144dff",textAlign:"center",marginTop:"1rem",fontSize:"0.9rem",fontWeight:"600"},children:b})]})})]}),Q||!vt||ge=="checkin"||ge==null||ue?null:A.jsx(fn,{}),ai&&!(o.length>0&&Ut.length===0)&&A.jsx(rA,{onComplete:Ln}),Qn&&A.jsx(iA,{onComplete:Ci,lobbyCode:q}),A.jsx(sA,{isVisible:As,onAnimationEnd:()=>{Ui(!1),rn.current=!1}}),A.jsx(oA,{isVisible:I,onAnimationEnd:()=>{_(!1),D.current=!1}})]})};let fA={data:""},dA=r=>typeof window=="object"?((r?r.querySelector("#_goober"):window._goober)||Object.assign((r||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:r||fA,hA=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,pA=/\/\*[^]*?\*\/|  +/g,Lp=/\n+/g,xs=(r,o)=>{let a="",d="",p="";for(let x in r){let y=r[x];x[0]=="@"?x[1]=="i"?a=x+" "+y+";":d+=x[1]=="f"?xs(y,x):x+"{"+xs(y,x[1]=="k"?"":o)+"}":typeof y=="object"?d+=xs(y,o?o.replace(/([^,])+/g,b=>x.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,w=>/&/.test(w)?w.replace(/&/g,b):b?b+" "+w:w)):x):y!=null&&(x=/^--/.test(x)?x:x.replace(/[A-Z]/g,"-$&").toLowerCase(),p+=xs.p?xs.p(x,y):x+":"+y+";")}return a+(o&&p?o+"{"+p+"}":p)+d},Bi={},Ym=r=>{if(typeof r=="object"){let o="";for(let a in r)o+=a+Ym(r[a]);return o}return r},gA=(r,o,a,d,p)=>{let x=Ym(r),y=Bi[x]||(Bi[x]=(w=>{let E=0,S=11;for(;E<w.length;)S=101*S+w.charCodeAt(E++)>>>0;return"go"+S})(x));if(!Bi[y]){let w=x!==r?r:(E=>{let S,I,_=[{}];for(;S=hA.exec(E.replace(pA,""));)S[4]?_.shift():S[3]?(I=S[3].replace(Lp," ").trim(),_.unshift(_[0][I]=_[0][I]||{})):_[0][S[1]]=S[2].replace(Lp," ").trim();return _[0]})(r);Bi[y]=xs(p?{["@keyframes "+y]:w}:w,a?"":"."+y)}let b=a&&Bi.g?Bi.g:null;return a&&(Bi.g=Bi[y]),((w,E,S,I)=>{I?E.data=E.data.replace(I,w):E.data.indexOf(w)===-1&&(E.data=S?w+E.data:E.data+w)})(Bi[y],o,d,b),y},mA=(r,o,a)=>r.reduce((d,p,x)=>{let y=o[x];if(y&&y.call){let b=y(a),w=b&&b.props&&b.props.className||/^go/.test(b)&&b;y=w?"."+w:b&&typeof b=="object"?b.props?"":xs(b,""):b===!1?"":b}return d+p+(y??"")},"");function Pc(r){let o=this||{},a=r.call?r(o.p):r;return gA(a.unshift?a.raw?mA(a,[].slice.call(arguments,1),o.p):a.reduce((d,p)=>Object.assign(d,p&&p.call?p(o.p):p),{}):a,dA(o.target),o.g,o.o,o.k)}let Km,ed,td;Pc.bind({g:1});let zi=Pc.bind({k:1});function xA(r,o,a,d){xs.p=o,Km=r,ed=a,td=d}function Es(r,o){let a=this||{};return function(){let d=arguments;function p(x,y){let b=Object.assign({},x),w=b.className||p.className;a.p=Object.assign({theme:ed&&ed()},b),a.o=/ *go\d+/.test(w),b.className=Pc.apply(a,d)+(w?" "+w:"");let E=r;return r[0]&&(E=b.as||r,delete b.as),td&&E[0]&&td(b),Km(E,b)}return p}}var yA=r=>typeof r=="function",Sc=(r,o)=>yA(r)?r(o):r,wA=(()=>{let r=0;return()=>(++r).toString()})(),Zm=(()=>{let r;return()=>{if(r===void 0&&typeof window<"u"){let o=matchMedia("(prefers-reduced-motion: reduce)");r=!o||o.matches}return r}})(),vA=20,$m=(r,o)=>{switch(o.type){case 0:return{...r,toasts:[o.toast,...r.toasts].slice(0,vA)};case 1:return{...r,toasts:r.toasts.map(x=>x.id===o.toast.id?{...x,...o.toast}:x)};case 2:let{toast:a}=o;return $m(r,{type:r.toasts.find(x=>x.id===a.id)?1:0,toast:a});case 3:let{toastId:d}=o;return{...r,toasts:r.toasts.map(x=>x.id===d||d===void 0?{...x,dismissed:!0,visible:!1}:x)};case 4:return o.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(x=>x.id!==o.toastId)};case 5:return{...r,pausedAt:o.time};case 6:let p=o.time-(r.pausedAt||0);return{...r,pausedAt:void 0,toasts:r.toasts.map(x=>({...x,pauseDuration:x.pauseDuration+p}))}}},pc=[],$s={toasts:[],pausedAt:void 0},eo=r=>{$s=$m($s,r),pc.forEach(o=>{o($s)})},CA={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},EA=(r={})=>{let[o,a]=R.useState($s),d=R.useRef($s);R.useEffect(()=>(d.current!==$s&&a($s),pc.push(a),()=>{let x=pc.indexOf(a);x>-1&&pc.splice(x,1)}),[]);let p=o.toasts.map(x=>{var y,b,w;return{...r,...r[x.type],...x,removeDelay:x.removeDelay||((y=r[x.type])==null?void 0:y.removeDelay)||(r==null?void 0:r.removeDelay),duration:x.duration||((b=r[x.type])==null?void 0:b.duration)||(r==null?void 0:r.duration)||CA[x.type],style:{...r.style,...(w=r[x.type])==null?void 0:w.style,...x.style}}});return{...o,toasts:p}},AA=(r,o="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:o,ariaProps:{role:"status","aria-live":"polite"},message:r,pauseDuration:0,...a,id:(a==null?void 0:a.id)||wA()}),$a=r=>(o,a)=>{let d=AA(o,r,a);return eo({type:2,toast:d}),d.id},dr=(r,o)=>$a("blank")(r,o);dr.error=$a("error");dr.success=$a("success");dr.loading=$a("loading");dr.custom=$a("custom");dr.dismiss=r=>{eo({type:3,toastId:r})};dr.remove=r=>eo({type:4,toastId:r});dr.promise=(r,o,a)=>{let d=dr.loading(o.loading,{...a,...a==null?void 0:a.loading});return typeof r=="function"&&(r=r()),r.then(p=>{let x=o.success?Sc(o.success,p):void 0;return x?dr.success(x,{id:d,...a,...a==null?void 0:a.success}):dr.dismiss(d),p}).catch(p=>{let x=o.error?Sc(o.error,p):void 0;x?dr.error(x,{id:d,...a,...a==null?void 0:a.error}):dr.dismiss(d)}),r};var bA=(r,o)=>{eo({type:1,toast:{id:r,height:o}})},SA=()=>{eo({type:5,time:Date.now()})},Da=new Map,TA=1e3,IA=(r,o=TA)=>{if(Da.has(r))return;let a=setTimeout(()=>{Da.delete(r),eo({type:4,toastId:r})},o);Da.set(r,a)},NA=r=>{let{toasts:o,pausedAt:a}=EA(r);R.useEffect(()=>{if(a)return;let x=Date.now(),y=o.map(b=>{if(b.duration===1/0)return;let w=(b.duration||0)+b.pauseDuration-(x-b.createdAt);if(w<0){b.visible&&dr.dismiss(b.id);return}return setTimeout(()=>dr.dismiss(b.id),w)});return()=>{y.forEach(b=>b&&clearTimeout(b))}},[o,a]);let d=R.useCallback(()=>{a&&eo({type:6,time:Date.now()})},[a]),p=R.useCallback((x,y)=>{let{reverseOrder:b=!1,gutter:w=8,defaultPosition:E}=y||{},S=o.filter(D=>(D.position||E)===(x.position||E)&&D.height),I=S.findIndex(D=>D.id===x.id),_=S.filter((D,L)=>L<I&&D.visible).length;return S.filter(D=>D.visible).slice(...b?[_+1]:[0,_]).reduce((D,L)=>D+(L.height||0)+w,0)},[o]);return R.useEffect(()=>{o.forEach(x=>{if(x.dismissed)IA(x.id,x.removeDelay);else{let y=Da.get(x.id);y&&(clearTimeout(y),Da.delete(x.id))}})},[o]),{toasts:o,handlers:{updateHeight:bA,startPause:SA,endPause:d,calculateOffset:p}}},_A=zi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,RA=zi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,kA=zi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,OA=Es("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${_A} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${RA} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${r=>r.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${kA} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,PA=zi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,MA=Es("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${r=>r.secondary||"#e0e0e0"};
  border-right-color: ${r=>r.primary||"#616161"};
  animation: ${PA} 1s linear infinite;
`,DA=zi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,LA=zi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,BA=Es("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${DA} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${LA} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${r=>r.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,FA=Es("div")`
  position: absolute;
`,jA=Es("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,VA=zi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,zA=Es("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${VA} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,UA=({toast:r})=>{let{icon:o,type:a,iconTheme:d}=r;return o!==void 0?typeof o=="string"?R.createElement(zA,null,o):o:a==="blank"?null:R.createElement(jA,null,R.createElement(MA,{...d}),a!=="loading"&&R.createElement(FA,null,a==="error"?R.createElement(OA,{...d}):R.createElement(BA,{...d})))},WA=r=>`
0% {transform: translate3d(0,${r*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,HA=r=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${r*-150}%,-1px) scale(.6); opacity:0;}
`,GA="0%{opacity:0;} 100%{opacity:1;}",XA="0%{opacity:1;} 100%{opacity:0;}",YA=Es("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,KA=Es("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,ZA=(r,o)=>{let a=r.includes("top")?1:-1,[d,p]=Zm()?[GA,XA]:[WA(a),HA(a)];return{animation:o?`${zi(d)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${zi(p)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},$A=R.memo(({toast:r,position:o,style:a,children:d})=>{let p=r.height?ZA(r.position||o||"top-center",r.visible):{opacity:0},x=R.createElement(UA,{toast:r}),y=R.createElement(KA,{...r.ariaProps},Sc(r.message,r));return R.createElement(YA,{className:r.className,style:{...p,...a,...r.style}},typeof d=="function"?d({icon:x,message:y}):R.createElement(R.Fragment,null,x,y))});xA(R.createElement);var qA=({id:r,className:o,style:a,onHeightUpdate:d,children:p})=>{let x=R.useCallback(y=>{if(y){let b=()=>{let w=y.getBoundingClientRect().height;d(r,w)};b(),new MutationObserver(b).observe(y,{subtree:!0,childList:!0,characterData:!0})}},[r,d]);return R.createElement("div",{ref:x,className:o,style:a},p)},QA=(r,o)=>{let a=r.includes("top"),d=a?{top:0}:{bottom:0},p=r.includes("center")?{justifyContent:"center"}:r.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Zm()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${o*(a?1:-1)}px)`,...d,...p}},JA=Pc`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ac=16,eb=({reverseOrder:r,position:o="top-center",toastOptions:a,gutter:d,children:p,containerStyle:x,containerClassName:y})=>{let{toasts:b,handlers:w}=NA(a);return R.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:ac,left:ac,right:ac,bottom:ac,pointerEvents:"none",...x},className:y,onMouseEnter:w.startPause,onMouseLeave:w.endPause},b.map(E=>{let S=E.position||o,I=w.calculateOffset(E,{reverseOrder:r,gutter:d,defaultPosition:o}),_=QA(S,I);return R.createElement(qA,{id:E.id,key:E.id,onHeightUpdate:w.updateHeight,className:E.visible?JA:"",style:_},E.type==="custom"?Sc(E.message,E):p?p(E):R.createElement($A,{toast:E,position:S}))}))},gc=dr;const If=({direction:r="down",show:o=!0,className:a="",style:d={}})=>{if(!o)return null;const p=r==="down"?"rotate(180 16 16)":"";return A.jsxs("div",{className:`arrow-hint-container ${r} ${a}`,style:d,children:[A.jsx("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"arrow-hint-svg",children:A.jsxs("g",{transform:p,children:[A.jsx("path",{d:"M16 6v16M16 22l-7-7M16 22l7-7",stroke:"url(#arrow-gradient)",strokeWidth:"3.2",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#arrow-glow)"}),A.jsxs("defs",{children:[A.jsxs("linearGradient",{id:"arrow-gradient",x1:"16",y1:"6",x2:"16",y2:"22",gradientUnits:"userSpaceOnUse",children:[A.jsx("stop",{stopColor:"#7f5fff"}),A.jsx("stop",{offset:"0.5",stopColor:"#2e8bff"}),A.jsx("stop",{offset:"1",stopColor:"#00e0ff"})]}),A.jsx("filter",{id:"arrow-glow",x:"-10",y:"-10",width:"52",height:"52",filterUnits:"userSpaceOnUse",children:A.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"2.5",floodColor:"#7f5fff",floodOpacity:"0.5"})})]})]})}),A.jsx("div",{className:"arrow-hint-text",children:"Tap Here"})]})},tb=({isOpen:r,onClose:o,onConfirm:a,userName:d})=>r?A.jsx("div",{className:"kick-modal",children:A.jsxs("div",{className:"kick-modal-content",children:[A.jsx("h2",{className:"kick-modal-title",children:"Kick User"}),A.jsxs("p",{className:"kick-modal-message",children:["Are you sure you want to kick ",d," from the lobby?"]}),A.jsxs("div",{className:"kick-modal-actions",children:[A.jsx("button",{onClick:a,className:"admin-button admin-button-danger",children:"Yes, Kick User"}),A.jsx("button",{onClick:o,className:"admin-button admin-button-primary",children:"Cancel"})]})]})}):null,nb=({isOpen:r,onClose:o,onConfirm:a})=>r?A.jsx("div",{className:"join-modal",children:A.jsxs("div",{className:"join-modal-content",children:[A.jsx("h2",{className:"join-modal-title",children:"Join Lobby"}),A.jsx("p",{className:"join-modal-message",children:"Are you sure you want to join? You will be paired up with your attendees."}),A.jsxs("div",{className:"join-modal-actions",children:[A.jsx("button",{onClick:a,className:"admin-button admin-button-join",children:"Yes, Join Lobby"}),A.jsx("button",{onClick:o,className:"admin-button admin-button-primary",children:"Cancel"})]})]})}):null,rb=({lobbyState:r,playerCount:o,onStart:a,onEnd:d,lobbyCode:p,currentRound:x})=>{const y=r==="checkin",b=o>=2&&r==="checkin",w=r==="active",E=r==="active",S=r==="terminated",[I,_]=R.useState(null),[D,L]=R.useState({code:!1,qr:!1}),[B,F]=R.useState(!1),V=()=>{_("start")},W=()=>{_("end")},z=()=>{F(!0),_("checkin")},Q=()=>{I==="start"?(a(),gc.success("Rounds started!",{position:"top-center"})):I==="end"&&d(),_(null)},ie=()=>_(null),ue=(Re,Ve)=>Re?"progress-arrow active-shimmer":Ve?"progress-arrow available-shimmer":"progress-arrow inactive",q=y&&!B&&o<6,ce=r==="checkin"&&o>=6,$=r==="active"&&x+1>=12,Ne=()=>{const Re=document.getElementById("modal-qr-svg");if(!Re)return;const ee=new XMLSerializer().serializeToString(Re),Ue=new window.Image,me=512,pe=document.createElement("canvas");pe.width=me,pe.height=me;const Oe=pe.getContext("2d");Ue.onload=()=>{Oe.clearRect(0,0,me,me),Oe.drawImage(Ue,0,0,me,me),pe.toBlob(fe=>{navigator.clipboard&&navigator.clipboard.write?navigator.clipboard.write([new window.ClipboardItem({"image/png":fe})]).then(()=>{L(X=>({...X,qr:!0})),setTimeout(()=>L(X=>({...X,qr:!1})),800)}).catch(()=>{Pe(fe)}):Pe(fe)},"image/png")},Ue.onerror=()=>alert("Failed to render QR code image."),Ue.src="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(ee)))};function Pe(Re){const Ve=URL.createObjectURL(Re),ee=document.createElement("a");ee.href=Ve,ee.download=`reuneo-lobby-${p}.png`,document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),URL.revokeObjectURL(Ve),L(Ue=>({...Ue,qr:!0})),setTimeout(()=>L(Ue=>({...Ue,qr:!1})),800)}const ke=()=>{navigator.clipboard.writeText(p),L(Re=>({...Re,code:!0})),setTimeout(()=>L(Re=>({...Re,code:!1})),800)};return A.jsxs("div",{className:"lobby-progress-bar",style:{marginTop:"-1rem",height:"40px"},children:[A.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[A.jsx("div",{className:ue(y,!1),tabIndex:0,title:"Check-in phase",onClick:z,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"Start Checkin"}),A.jsx(If,{direction:"down",show:q})]}),A.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[A.jsx("div",{className:ue(w,b&&!w),tabIndex:0,title:b?"Start rounds":"At least 2 players required",onClick:V,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"Start Rounds"}),A.jsx(If,{direction:"down",show:ce})]}),A.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[A.jsx("div",{className:ue(S,E&&!S),tabIndex:0,title:E?"End rounds":"Cannot end yet",onClick:W,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"End Rounds"}),A.jsx(If,{direction:"down",show:$})]}),I&&A.jsx("div",{className:"progress-modal-overlay",children:A.jsx("div",{className:"progress-modal",children:I==="checkin"?A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"progress-modal-title",children:"Have your attendees scan the QR code to join your lobby"}),A.jsx("div",{className:"progress-modal-message",children:"You can start when you have 6-10 people, don't worry new people can join in the next rounds."}),A.jsxs("div",{className:"progress-modal-qr",onClick:Ne,style:{cursor:"pointer",position:"relative"},children:[A.jsx(Kd,{value:`${window.location.origin}/lobby?code=${p}`,size:200,level:"H",includeMargin:!1,bgColor:"#ffffff",fgColor:"#144dff",id:"modal-qr-svg"}),A.jsx("span",{className:"copy-icon modal-copy-icon","aria-label":"Copy",style:{position:"absolute",right:8,bottom:8,background:"#fff",borderRadius:"50%",padding:"2px"},children:A.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[A.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),A.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})}),D.qr&&A.jsx("span",{className:"modal-copied-feedback",style:{position:"absolute",left:"50%",bottom:"-1.5rem",transform:"translateX(-50%)",color:"#28a745",fontWeight:600,fontSize:"0.95rem"},children:"Copied!"})]}),A.jsxs("div",{className:`progress-modal-lobbycode${D.code?" copied":""}`,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[A.jsxs("b",{children:["lobby code: ",p]}),A.jsx("span",{className:"copy-icon modal-copy-icon","aria-label":"Copy",onClick:ke,style:{cursor:"pointer"},children:A.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[A.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),A.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})}),D.code&&A.jsx("span",{className:"modal-copied-feedback",style:{color:"#28a745",fontWeight:600,fontSize:"0.95rem"},children:"Copied!"})]}),A.jsx("div",{className:"progress-modal-actions",children:A.jsx("button",{className:"progress-modal-btn confirm",onClick:ie,children:"Got it"})})]}):A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"progress-modal-title",children:I==="start"?"Are you sure you want to start rounds?":"Are you sure you want to end the rounds?"}),A.jsx("div",{className:"progress-modal-actions",children:I==="start"?A.jsxs(A.Fragment,{children:[A.jsx("button",{className:"progress-modal-btn cancel",onClick:ie,children:"Not Yet"}),A.jsx("button",{className:"progress-modal-btn confirm",onClick:Q,children:"Start"})]}):A.jsxs(A.Fragment,{children:[A.jsx("button",{className:"progress-modal-btn cancel",onClick:ie,children:"Keep Going"}),A.jsx("button",{className:"progress-modal-btn confirm danger",onClick:Q,children:"End"})]})})]})})})]})},ib=({players:r})=>{const o=[...r.pairedPlayers?r.pairedPlayers.flat():[],...r.lobbyData?r.lobbyData:[]],a=10,d=o.slice(0,a),p=o.length-a,x=o.length;return A.jsxs("div",{className:"overlapping-profile-list-wrapper",style:{marginTop:"3rem"},children:[A.jsxs("div",{className:"overlapping-profile-list",children:[d.map((y,b)=>A.jsx("img",{src:y.pfp_data||"/assets/player_icon_trans.png",alt:y.name||"Player",className:"overlapping-profile-img",style:{zIndex:b+1}},y.username||y.name||b)),p>0&&A.jsxs("span",{className:"overlapping-profile-overflow",children:["+ ",p]})]}),A.jsxs("div",{className:"overlapping-profile-list-label",style:{marginTop:"0.5rem",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.1)"},children:["People joined: ",x]})]})},sb=()=>{const{user:r,userProfile:o,checkAuth:a,permissions:d}=R.useContext(Ar),p=pr(),x=Yr(),y=!1,w=new URLSearchParams(x.search).get("code"),[E,S]=R.useState(w||"test");R.useEffect(()=>{w||(console.log("No lobby code found in URL, using default 'test' value"),(async()=>{try{const Ze=localStorage.getItem("access_token"),at=await fetch(window.server_url+"/view_my_active_lobbies",{headers:{Authorization:`Bearer ${Ze}`}});if(at.ok){const _e=await at.json();if(console.log("Active lobbies response:",_e),_e&&_e.lobbies&&_e.lobbies.length>0){const nt=_e.lobbies[0];S(nt),window.history.replaceState({},"",`/admin_lobby_view?code=${nt}`)}}}catch(Ze){console.error("Error fetching active lobby:",Ze)}})())},[w]);const[I,_]=R.useState(!1),[D,L]=R.useState(null),[B,F]=R.useState(!1),[V,W]=R.useState(null),[z,Q]=R.useState(null),[ie,ue]=R.useState(null),[q,ce]=R.useState(null),[$,Ne]=R.useState(null),[Pe,ke]=R.useState({}),[Re,Ve]=R.useState([]),[ee,Ue]=R.useState(0),me=((z==null?void 0:z.length)||0)+((V==null?void 0:V.length)*2||0),[pe,Oe]=R.useState(!1);R.useEffect(()=>{if(a(),d!=="admin"&&d!=="organizer"){p("/");return}const ge=async at=>{if(Pe[at])return Pe[at];try{const _e=await fetch(`${window.server_url}/pfp_small_icon?username=${encodeURIComponent(at)}`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(_e.ok){let nt=await _e.text();nt.startsWith('"')&&nt.endsWith('"')&&(nt=nt.slice(1,-1));const Pt=nt.startsWith("data:image")?nt:`data:image/jpeg;base64,${nt}`;return ke(Dt=>({...Dt,[at]:Pt})),Pt}return null}catch(_e){return console.error(`Error fetching profile picture for ${at}:`,_e),null}},Ze=setInterval(async()=>{try{const at=await fetch(window.server_url+"/admin_lobby_data",{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,lobby_code:E}});if(at.ok){const _e=await at.json();if(console.log("Admin lobby data:",E,_e),_e.lobby_state==="active"&&Ue(nt=>_e.current_round>nt?_e.current_round:nt),_e.lobby_state==="terminated"&&Ue(0),_e&&_e.unpaired_players){const nt=await Promise.all(_e.unpaired_players.map(async Dt=>{const St=await ge(Dt.username);return{...Dt,pfp_data:St}})),Pt=await Promise.all((_e.pairs_data||[]).map(async Dt=>{const St=await ge(Dt[0].username),vt=await ge(Dt[1].username);return[{...Dt[0],pfp_data:St},{...Dt[1],pfp_data:vt}]}));Q(nt),W(Pt),ue(_e.round_time_left),ce(_e.lobby_state),Ne(_e.lobby_duration||300),Ve(_e.custom_tags||[])}else console.error("Invalid lobby data structure:",_e),Q([]),W([])}else console.error("Failed to fetch admin lobby data:",at.status)}catch(at){console.error("Error fetching admin lobby data:",at)}},1e3);return()=>clearInterval(Ze)},[Pe]);const fe=ge=>{L(ge),_(!0)},X=()=>{_(!1),L(null)},te=()=>{D&&fetch(window.server_url+"/kick_user",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"},body:JSON.stringify({username:D.username,lobby_code:E})}).then(ge=>{ge.ok?console.log(`User ${D.name} kicked successfully`):console.error(`Failed to kick user ${D.name}`)}).catch(ge=>{console.error("Error kicking user:",ge)}).finally(()=>{X()})},Ae=()=>{F(!0)},ze=()=>{F(!1)},Se=()=>{p(`/lobby?code=${E}`),ze()};async function de(){const ge=document.getElementById("admin-qr-svg");if(!ge)return;const at=new XMLSerializer().serializeToString(ge),_e=new window.Image,nt=512,Pt=document.createElement("canvas");Pt.width=nt,Pt.height=nt;const Dt=Pt.getContext("2d");_e.onload=()=>{Dt.clearRect(0,0,nt,nt),Dt.drawImage(_e,0,0,nt,nt),Pt.toBlob(St=>{navigator.clipboard&&navigator.clipboard.write?navigator.clipboard.write([new window.ClipboardItem({"image/png":St})]).then(()=>{gc.success("QR code copied to clipboard!")}).catch(()=>{We(St)}):We(St)},"image/png")},_e.onerror=()=>gc.error("Failed to generate QR code image."),_e.src="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(at)))}function We(ge){const Ze=URL.createObjectURL(ge),at=document.createElement("a");at.href=Ze,at.download=`reuneo-lobby-${E}.png`,document.body.appendChild(at),at.click(),document.body.removeChild(at),URL.revokeObjectURL(Ze),gc.success("QR code downloaded!")}const Fe=async()=>{await fetch(window.server_url+"/start_rounds",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,lobby_code:E}})},tt=async()=>{(await fetch(window.server_url+"/terminate_lobby",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,lobby_code:E}})).ok&&p("/")};return A.jsxs(A.Fragment,{children:[A.jsx(eb,{position:"top-center"}),A.jsxs("div",{className:"admin-lobby-container",children:[y,A.jsx("div",{className:"admin-view-logo",style:{cursor:"pointer"},children:A.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Reuneo Logo",style:{maxWidth:"85px",height:"auto",objectFit:"contain",transition:"transform 0.3s ease"},onClick:()=>p("/")})}),A.jsx(rb,{lobbyState:q,playerCount:me,onStart:Fe,onEnd:tt,lobbyCode:E,currentRound:ee}),A.jsx(ib,{players:{pairedPlayers:V,lobbyData:z}}),A.jsxs("div",{className:"admin-lobby-dropdown-toggle",onClick:()=>Oe(ge=>!ge),style:{cursor:"pointer",background:"var(--primary-color)",color:"#f5f7ff",fontWeight:700,textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",fontSize:".75rem",borderRadius:pe?"14px 14px 0 0":"14px",padding:"0.5rem 1rem",margin:"0 auto",maxWidth:420,boxShadow:"0 2px 8px rgba(20,77,255,0.08)",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s",letterSpacing:"0.5px"},children:[pe?"Hide Controls":"More Controls",A.jsx("span",{style:{marginLeft:12,fontSize:"1.2em",transition:"transform 0.3s",display:"inline-block",transform:pe?"rotate(180deg)":"rotate(0deg)"},children:""})]}),A.jsxs("div",{className:"admin-lobby-body",style:{maxHeight:pe?1e3:0,overflow:"hidden",transition:"max-height 0.5s cubic-bezier(0.4,0,0.2,1)",opacity:pe?1:0,pointerEvents:pe?"auto":"none",marginBottom:pe?"2rem":0},children:[A.jsxs("div",{className:"admin-lobby-qr",onClick:de,style:{cursor:"pointer"},children:[A.jsxs("span",{className:"qr-label",style:{display:"flex",alignItems:"center",gap:"0.4rem",marginBottom:"0.5rem"},children:["People scan to join",A.jsx("span",{className:"copy-icon","aria-label":"Copy",children:A.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[A.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),A.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})})]}),A.jsx("div",{style:{position:"relative",display:"inline-block"},children:A.jsx(Kd,{value:`${window.location.origin}/lobby?code=${E}`,size:140,level:"H",includeMargin:!1,bgColor:"#ffffff",fgColor:"#144dff",id:"admin-qr-svg"})}),A.jsxs("div",{className:"lobby-code-display",onClick:()=>{navigator.clipboard.writeText(E);const ge=document.querySelector(".lobby-code-display");ge.classList.add("copied"),setTimeout(()=>ge.classList.remove("copied"),250)},children:[A.jsx("span",{className:"lobby-code-label",children:"lobby code:"}),A.jsx("span",{className:"lobby-code-value",children:E}),A.jsx("span",{className:"copy-icon","aria-label":"Copy",children:A.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[A.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),A.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})})]})]}),A.jsxs("div",{className:"admin-lobby-event-settings",children:[A.jsxs("div",{className:"admin-profile",children:[A.jsx("img",{src:o!=null&&o.image_data?`data:image/jpeg;base64,${o.image_data}`:"/assets/player_icon_trans.png",alt:"Your Profile",className:"admin-profile-picture"}),A.jsx("span",{className:"admin-profile-name",children:o!=null&&o.name?o.name.slice(0,20):r==null?void 0:r.slice(0,20)})]}),A.jsx("button",{onClick:Ae,className:"page-control-button page-control-join",style:{marginTop:".5rem"},children:"Join Rounds"}),A.jsxs("div",{className:"setting-item",style:{padding:"1rem"},children:[A.jsxs("span",{className:"setting-label",children:["Round Duration: ",A.jsxs("span",{className:"setting-value",children:[Math.floor($/60)," min"]})]}),A.jsx("span",{className:"setting-label",style:{},children:"Tags:"}),Re&&Re.length>0&&A.jsx("div",{className:"setting-item",children:A.jsxs("div",{className:"tags-container",children:[Re.slice(0,3).map((ge,Ze)=>A.jsx("span",{className:"tag-pill",children:ge},Ze)),Re.length>3&&A.jsxs("span",{className:"tag-pill more-tags",children:["+",Re.length-3," more"]})]})})]})]}),A.jsx("div",{className:"admin-lobby-actions"})]}),(q==="active"||q==="interrim")&&ie&&A.jsx("div",{className:"admin-lobby-timer-container",children:A.jsxs("div",{className:"admin-lobby-timer-glass",children:[A.jsx(Zd,{isPlaying:q==="active",duration:$,initialRemainingTime:ie,colors:["#144dff"],size:90,strokeWidth:12,trailColor:"url(#trailGradient)",onComplete:()=>({shouldRepeat:!1}),strokeLinecap:"round",children:({remainingTime:ge})=>{const Ze=Math.floor(ge/60),at=Math.floor(ge%60);return A.jsxs("span",{className:`timer-text ${ge<=10?"timer-text-fadescale":""}`,children:[Ze,":",String(at).padStart(2,"0")]})}},`${q}-${Math.floor(ie)}`),A.jsx("span",{className:"timer-subtext",children:"round time left"}),A.jsx("svg",{width:"0",height:"0",children:A.jsx("defs",{children:A.jsxs("linearGradient",{id:"trailGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[A.jsx("stop",{offset:"0%",stopColor:"#e0e7ff"}),A.jsx("stop",{offset:"100%",stopColor:"#f5f7ff"})]})})})]})}),q!=="checkin"&&A.jsxs("div",{className:"admin-lobby-stats",children:[A.jsxs("div",{className:"stat-card",children:[A.jsx("div",{className:"stat-title",children:"Total Players"}),A.jsx("div",{className:"stat-value",children:((z==null?void 0:z.length)||0)+((V==null?void 0:V.length)*2||0)})]}),A.jsxs("div",{className:"stat-card",children:[A.jsx("div",{className:"stat-title",children:"Paired Players"}),A.jsx("div",{className:"stat-value",children:(V==null?void 0:V.length)*2||0})]}),A.jsxs("div",{className:"stat-card",children:[A.jsx("div",{className:"stat-title",children:"Unpaired Players"}),A.jsx("div",{className:"stat-value",children:(z==null?void 0:z.length)||0})]})]}),V&&q!=="checkin"&&A.jsx("div",{className:"admin-lobby-players",children:A.jsxs("div",{className:"player-section",children:[A.jsxs("div",{className:"section-header",children:["Paired Players: ",A.jsx("span",{className:"stat-value",style:{fontSize:"1.3rem"},children:(V==null?void 0:V.length)*2||0})]}),A.jsx("div",{className:"player-grid",children:V.map((ge,Ze)=>{const at=ge[0].match_details&&ge[0].match_details.opponent_matched_tags&&ge[0].match_details.opponent_matched_tags.length>0||ge[1].match_details&&ge[1].match_details.opponent_matched_tags&&ge[1].match_details.opponent_matched_tags.length>0;return A.jsxs("div",{className:"paired-player-card",children:[at&&A.jsx("div",{className:"matched-pair-badge",children:"Matched"}),A.jsxs("div",{className:"paired-player",onClick:()=>fe(ge[0]),children:[A.jsx("img",{src:ge[0].pfp_data,alt:ge[0].name,className:"paired-player-avatar"}),A.jsx("h3",{className:"paired-player-name",children:ge[0].name}),ge[0].match_details&&ge[0].match_details.opponent_matched_tags&&ge[0].match_details.opponent_matched_tags.length>0&&A.jsx("div",{className:"matching-tag-container",children:A.jsx("div",{className:"matched-player-tag",children:ge[0].match_details.opponent_matched_tags.map((_e,nt)=>A.jsx("span",{className:"matching-tag-pill",children:_e},nt))})})]}),A.jsxs("div",{className:"paired-player",onClick:()=>fe(ge[1]),children:[A.jsx("img",{src:ge[1].pfp_data,alt:ge[1].name,className:"paired-player-avatar"}),A.jsx("h3",{className:"paired-player-name",children:ge[1].name}),ge[1].match_details&&ge[1].match_details.opponent_matched_tags&&ge[1].match_details.opponent_matched_tags.length>0&&A.jsx("div",{className:"matching-tag-container",children:A.jsx("div",{className:"matched-player-tag",children:ge[1].match_details.opponent_matched_tags.map((_e,nt)=>A.jsx("span",{className:"matching-tag-pill",children:_e},nt))})})]})]},Ze)})})]})}),z&&A.jsx("div",{className:"admin-lobby-players",children:A.jsxs("div",{className:"player-section",children:[A.jsxs("div",{className:"section-header",children:[q==="checkin"?"People Joined":"Unpaired Players",": ",A.jsx("span",{className:"stat-value",style:{fontSize:"1.3rem"},children:(z==null?void 0:z.length)||0})]}),A.jsx("div",{className:"player-grid",children:z.map((ge,Ze)=>A.jsxs("div",{className:"player-card",onClick:()=>fe(ge),children:[A.jsx("img",{src:ge.pfp_data,alt:ge.name,className:"player-avatar"}),A.jsx("h3",{className:"player-name",children:ge.name})]},Ze))})]})}),A.jsx(nb,{isOpen:B,onClose:ze,onConfirm:Se}),A.jsx(tb,{isOpen:I,onClose:X,onConfirm:te,userName:(D==null?void 0:D.name)||"this user"})]})]})},ob=()=>{const r=pr(),{user:o}=R.useContext(Ar),a=()=>{window.location.href="https://reunio.app/become-an-organizer"};return A.jsxs("div",{className:"product-selection-container",children:[A.jsxs("video",{className:"background-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,children:[A.jsx("source",{src:"/assets/purchase_plan_video.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]}),A.jsxs("div",{className:"product-selection-content",children:[A.jsx("div",{className:"product-selection-header",children:A.jsx("h1",{children:"Product Selection"})}),A.jsxs("div",{className:"plans-section",children:[A.jsx("h2",{children:"Available Plans"}),A.jsxs("div",{className:"plan-card",children:[A.jsx("h3",{children:"Organizer Plan"}),A.jsxs("div",{className:"plan-description",children:[A.jsx("p",{children:"Create experiences for your community with our beta plan."}),A.jsxs("ul",{children:[A.jsx("li",{children:"Create unlimited experiences"}),A.jsx("li",{children:"Access to organizer dashboard"}),A.jsx("li",{children:"Priority customer support"})]})]}),A.jsx("button",{className:"purchase-button",onClick:a,children:"Contact Us"})]})]}),A.jsx("button",{className:"back-button",onClick:()=>r("/"),children:"Home"})]})]})},ab=()=>{const{user:r,userProfile:o,checkAuth:a,permissions:d}=R.useContext(Ar),[p,x]=R.useState(""),[y,b]=R.useState(""),[w,E]=R.useState(!1),[S,I]=R.useState(""),[_,D]=R.useState(!1),[L,B]=R.useState([]),[F,V]=R.useState(""),[W,z]=R.useState("5"),[Q,ie]=R.useState("0"),[ue,q]=R.useState(!1),[ce,$]=R.useState(null),[Ne,Pe]=R.useState(!1),[ke,Re]=R.useState(null),[Ve,ee]=R.useState(null),[Ue,me]=R.useState(""),[pe,Oe]=R.useState(""),[fe,X]=R.useState(null),[te,Ae]=R.useState(null),[ze,Se]=R.useState(""),[de,We]=R.useState(!1),[Fe,tt]=R.useState(!1),[ge,Ze]=R.useState({x:0,y:0}),[at,_e]=R.useState(1),[nt,Pt]=R.useState(null),Dt=8,St=pr(),vt=R.useRef(null);R.useEffect(()=>{window.scrollTo(0,0),r&&(x(r),b(r)),vt.current&&vt.current.focus()},[r]);const pt=De=>{const he=/^[a-z0-9]+$/;return De.length>=2&&he.test(De)},xn=De=>{const he=De.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");b(he),D(!0),setTimeout(()=>{D(!1)},500)},Te=()=>{if(F.includes(",")){const De=F.split(",").map(ct=>ct.startsWith(" ")?ct.substring(1):ct),he=[];De.forEach(ct=>{const st=ct.trim();st&&!L.includes(st)&&!he.includes(st)&&he.push(st)}),he.length>0&&B([...L,...he]),V("")}else F.trim()&&!L.includes(F.trim())&&(B([...L,F.trim()]),V(""))},zn=De=>{B(L.filter(he=>he!==De))},Ct=De=>{De.key==="Enter"&&F.trim()&&(De.preventDefault(),Te())},Ge=De=>{De==="icebreaker"?L.length>0||F.trim()?(Re("icebreaker"),Pe(!0)):($("icebreaker"),B([]),V("")):De==="custom"&&$("custom")},Je=()=>{$(ke),B([]),V(""),Pe(!1),Re(null)},gt=()=>{Pe(!1),Re(null)},Ut=(De,he,ct)=>new Promise(st=>{const Rt=new Image;Rt.onload=()=>{const Mn=document.createElement("canvas"),Pr=Mn.getContext("2d");let{width:Un,height:lt}=Rt;Un>lt?Un>he&&(lt=lt*he/Un,Un=he):lt>ct&&(Un=Un*ct/lt,lt=ct),Mn.width=Un,Mn.height=lt,Pr.drawImage(Rt,0,0,Un,lt);const Dn=Mn.toDataURL("image/jpeg",.7);st(Dn)},Rt.src=URL.createObjectURL(De)}),Ot=async De=>{const he=De.target.files[0];if(he){if(Se(""),tt(!0),!["image/jpeg","image/jpg","image/png"].includes(he.type)){Se("Invalid format. Please upload a JPG or PNG image."),tt(!1);return}if(he.size>2*1024*1024){Se("File too large. Please choose an image under 2MB."),tt(!1);return}try{const ct=await Ut(he,400,400);ee(he),X(ct),We(!0),tt(!1)}catch(ct){console.error("Error processing image:",ct),Se("Error processing image. Please try again."),tt(!1)}}},At=(De,he)=>{Pt(he)},nn=async()=>{try{tt(!0);const De=await id(fe,nt);Ae(De),We(!1),tt(!1)}catch(De){console.error("Error cropping logo:",De),Se("Error processing image. Please try again."),We(!1),tt(!1)}},Ht=()=>{ee(null),X(null),Ae(null),We(!1),tt(!1),Ze({x:0,y:0}),_e(1),Pt(null),Se("");const De=document.getElementById("logoUpload");De&&(De.value="")},un=async De=>{if(De.preventDefault(),!pt(y)){I("Lobby code must be at least 2 characters long and contain only lowercase letters and numbers");return}E(!0),I("");const he=parseInt(W)*60+parseInt(Q);let ct=null;te&&(ct=te.split(",")[1]);try{const st={lobby_code:y,custom_tags:ce==="custom"?L:[],lobby_duration:he,show_table_numbers:ue};ct&&(st.logo_icon=ct),Ue.trim()&&(st.logo_name=Ue.trim()),pe.trim()&&(st.logo_hyperlink=pe.trim());const Rt=await fetch(window.server_url+"/create_lobby",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"},body:JSON.stringify(st)});if(Rt.ok)console.log("Lobby created successfully"),console.log(await Rt.json()),St(`/admin_lobby_view?code=${y}`);else{const Mn=await Rt.json();I(Mn.message||"Failed to create lobby"),console.error("Failed to create lobby")}}catch(st){I("An error occurred while creating the lobby"),console.error("Error creating lobby:",st)}finally{E(!1)}};return A.jsxs("div",{className:"create-lobby-background",children:[A.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Reunio Logo",className:"logo-image",onClick:()=>St(-1)}),A.jsxs("div",{className:"create-lobby-container",children:[A.jsx("h1",{className:"create-lobby-title",children:"Create a New Lobby"}),A.jsxs("form",{onSubmit:un,className:"create-lobby-form",children:[A.jsxs("div",{className:"form-group",children:[A.jsx("label",{htmlFor:"lobbyCode",children:"Lobby Code"}),A.jsx("input",{ref:vt,type:"text",id:"lobbyCode",value:y,onChange:xn,placeholder:"Enter lobby code (lowercase letters and numbers only)",required:!0,className:`form-input ${_?"typing":""}`,autoComplete:"off"}),A.jsx("div",{className:"input-hint",children:"lowercase letters and numbers only"})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Round Duration"}),A.jsxs("div",{className:"duration-input-container",children:[A.jsxs("div",{className:"duration-input-group",children:[A.jsx("input",{type:"number",id:"minutes",value:W,onChange:De=>{const he=De.target.value;(he===""||parseInt(he)>0&&parseInt(he)<=Dt)&&(z(he),parseInt(he)===Dt&&ie("0"))},min:"1",max:Dt,placeholder:`1-${Dt}`,className:"form-input duration-input",autoComplete:"off"}),A.jsx("label",{htmlFor:"minutes",className:"duration-label",children:"Minutes"})]}),A.jsxs("div",{className:"duration-input-group",children:[A.jsx("input",{type:"number",id:"seconds",value:Q,onChange:De=>{const he=De.target.value;(he===""||parseInt(he)>=0&&parseInt(he)<=59)&&ie(he)},min:"0",max:"59",placeholder:"0-59",className:"form-input duration-input",autoComplete:"off",disabled:parseInt(W)===Dt}),A.jsx("label",{htmlFor:"seconds",className:"duration-label",children:"Seconds"})]})]}),A.jsxs("div",{className:"input-hint",children:["Maximum total duration is ",Dt," minutes"]})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{htmlFor:"showTableNumbers",children:"Table Numbers"}),A.jsx("input",{type:"checkbox",id:"showTableNumbers",checked:ue,onChange:De=>q(De.target.checked),className:"form-input checkbox-input"}),A.jsx("div",{className:"input-hint",children:"Recommended for events with 50+ people"}),A.jsx("div",{className:"input-hint",children:"Make sure to provide table numbers"})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Matchmaking Categories"}),A.jsxs("div",{className:"matchmaking-tabs",children:[A.jsx("button",{type:"button",className:`tab-button ${ce==="icebreaker"?"tab-selected":""}`,onClick:()=>Ge("icebreaker"),children:"Community Ice Breaker"}),A.jsx("button",{type:"button",className:`tab-button ${ce==="custom"?"tab-selected":""}`,onClick:()=>Ge("custom"),children:"Custom Matching"})]}),ce==="custom"&&A.jsxs("div",{className:"custom-matching-section",children:[A.jsxs("div",{className:"tag-input-container",children:[A.jsx("input",{type:"text",id:"tagInput",value:F,onChange:De=>V(De.target.value),onKeyDown:Ct,placeholder:"Add categories (press + to add)",className:"form-input",autoComplete:"off"}),A.jsx("button",{type:"button",onClick:Te,className:"tag-add-button",children:"+"})]}),L.length>0&&A.jsx("div",{className:"tag-list",children:L.map((De,he)=>A.jsxs("div",{className:"tag-item",children:[De,A.jsx("button",{type:"button",onClick:()=>zn(De),className:"tag-remove-button",children:""})]},he))}),A.jsx("div",{className:"input-hint",children:"If you want to match people based on categories"})]})]}),A.jsxs("div",{className:"form-group logo-upload-section",children:[A.jsx("label",{children:"Sponsor Logo"}),!te&&!de&&A.jsxs(A.Fragment,{children:[Fe?A.jsx("div",{className:"logo-processing",children:"Processing..."}):A.jsxs(A.Fragment,{children:[A.jsx("input",{type:"file",id:"logoUpload",accept:"image/jpeg,image/jpg,image/png",onChange:Ot,style:{display:"none"}}),A.jsx("button",{type:"button",onClick:()=>document.getElementById("logoUpload").click(),className:"logo-upload-button",children:"Upload Logo"})]}),ze&&A.jsx("div",{className:"logo-error-message",children:ze})]}),de&&fe&&A.jsxs("div",{className:"logo-crop-container",children:[A.jsx("div",{className:"logo-crop-area",children:A.jsx(rd,{image:fe,crop:ge,zoom:at,aspect:1,onCropChange:Ze,onZoomChange:_e,onCropComplete:At})}),A.jsxs("div",{className:"logo-crop-controls",children:[A.jsx("button",{type:"button",onClick:nn,className:"logo-save-button",disabled:Fe,children:Fe?"Processing...":"Save Crop"}),A.jsx("button",{type:"button",onClick:Ht,className:"logo-cancel-button",children:"Cancel"})]})]}),te&&!de&&A.jsx("div",{className:"logo-preview-container",children:A.jsxs("div",{className:"logo-preview",children:[A.jsx("img",{src:te,alt:"Logo preview",className:"logo-preview-image"}),A.jsx("button",{type:"button",onClick:Ht,className:"logo-remove-button",children:""})]})}),!1]}),S&&A.jsx("div",{className:"error-message",children:S}),A.jsx("button",{type:"submit",className:"submit-button",disabled:w,children:w?"Creating...":"Create Lobby"})]})]}),Ne&&A.jsx("div",{className:"modal-overlay",children:A.jsxs("div",{className:"modal-content",children:[A.jsx("h3",{children:"Switch to Community Ice Breaker?"}),A.jsx("p",{children:"This will clear your current matching categories."}),A.jsxs("div",{className:"modal-buttons",children:[A.jsx("button",{type:"button",onClick:gt,className:"modal-button modal-cancel",children:"Cancel"}),A.jsx("button",{type:"button",onClick:Je,className:"modal-button modal-confirm",children:"Confirm"})]})]})})]})},lb=r=>{try{const o=new URLSearchParams(r||window.location.search),a=o.get("via")||"",d=o.get("rewardful")||o.get("rewardful_referral")||"",p=typeof window<"u"&&window.Rewardful&&window.Rewardful.referral||"",x=typeof window<"u"&&window.localStorage&&window.localStorage.getItem("rewardful_referral")||"",y=p||d||a||x||"";return y&&typeof window<"u"&&window.localStorage&&window.localStorage.setItem("rewardful_referral",y),y}catch{return""}},cb=()=>{const{login:r,user:o,checkAuth:a,permissions:d}=R.useContext(Ar),[p,x]=R.useState(""),[y,b]=R.useState(""),[w,E]=R.useState(""),[S,I]=R.useState(""),[_,D]=R.useState(""),[L,B]=R.useState(""),[F,V]=R.useState({}),[W,z]=R.useState(""),[Q,ie]=R.useState(!1),ue=pr(),q=Yr();R.useEffect(()=>{localStorage.getItem("access_token")&&!o&&a()},[]),R.useEffect(()=>{d!==null&&(d==="admin"||d==="organizer")&&ue("/")},[d,ue]),R.useEffect(()=>{(async()=>{if(o!==null&&d!==null&&d!=="admin"&&d!=="organizer")try{const de=localStorage.getItem("access_token");if(!de)return;const We=await fetch(`${window.server_url}/check-subscription-status`,{headers:{Authorization:`Bearer ${de}`}});We.ok&&(await We.json()).has_access===!0&&ue("/organizer-account-details")}catch(de){console.error("Error checking subscription status:",de)}})()},[o,d,ue]);const ce=Se=>{const de=/^[a-z0-9]+$/;return Se.length>=2&&de.test(Se)},$=Se=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Se)&&Se.trim()!=="",Ne=Se=>Se.replace(/\D/g,"").length===10,Pe=Se=>Se.trim().length>=2,ke=Se=>{const de=Se.replace(/\D/g,"");return de.length===0?"":de.length<=3?`(${de}`:de.length<=6?`(${de.slice(0,3)}) ${de.slice(3)}`:`(${de.slice(0,3)}) ${de.slice(3,6)}-${de.slice(6,10)}`},Re=Se=>Se.replace(/\D/g,""),Ve=Se=>{const de=Se.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");x(de),W&&z("")},ee=Se=>{b(Se.target.value),W&&z(""),F.email&&V(de=>({...de,email:""}))},Ue=Se=>{const de=Se.target.value;E(de),W&&z(""),F.phone&&V(We=>({...We,phone:""}))},me=()=>{const Se=ke(w);E(Se),Se&&!Ne(Se)?V(de=>({...de,phone:"Invalid phone number"})):V(de=>({...de,phone:""}))},pe=Se=>{const de=Se.target.value;I(de),W&&z(""),F.cityState&&V(We=>({...We,cityState:""}))},Oe=()=>{S&&!Pe(S)?V(Se=>({...Se,cityState:"City/State must be at least 2 characters"})):V(Se=>({...Se,cityState:""}))},fe=Se=>{D(Se.target.value),F.eventType&&V(de=>({...de,eventType:""}))},X=Se=>{B(Se.target.value),F.avgAttendees&&V(de=>({...de,avgAttendees:""}))},te=async Se=>{Se.preventDefault(),z(""),ie(!0);const de=o!==null;if(!de&&(!p||!ce(p))){z("Username must be at least 2 characters and contain only lowercase letters and numbers"),ie(!1);return}if(!y||!$(y)){V(Ze=>({...Ze,email:"Please enter a valid email address"})),z("Please enter a valid email address"),ie(!1);return}const We=Re(w);if(!w||!Ne(w)){V(Ze=>({...Ze,phone:"Please enter a valid phone number"})),z("Please enter a valid phone number"),ie(!1);return}if(!S||!Pe(S)){V(Ze=>({...Ze,cityState:"City/State is required (minimum 2 characters)"})),z("City/State is required (minimum 2 characters)"),ie(!1);return}const Fe=new URLSearchParams(q.search),tt=lb(q.search),ge=Fe.get("ref")||Fe.get("affiliate_code")||"";if(de){const Ze=localStorage.getItem("access_token");if(!Ze){z("Authentication required. Please log in again."),ie(!1);return}try{if(!(await fetch(`${window.server_url}/update_profile`,{method:"POST",headers:{Authorization:`Bearer ${Ze}`,"Content-Type":"application/json"},body:JSON.stringify({phone_number:We,city_state:S,event_type:_||"",avg_attendees:L||""})})).ok)throw new Error("Failed to update profile");const _e=await fetch(`${window.server_url}/create-checkout-session`,{method:"POST",headers:{Authorization:`Bearer ${Ze}`,"Content-Type":"application/json"},body:JSON.stringify({email:y,rewardful_referral:tt,affiliate_code:ge})}),nt=await _e.json();if(!_e.ok||nt.error){if(nt.error&&nt.error.includes("already have an active subscription")){ue("/organizer-account-details");return}z(nt.error||"Failed to create checkout session. Please try again."),ie(!1);return}window.location.href=nt.checkout_url;return}catch(at){console.error("Error creating checkout session:",at),z("An error occurred. Please try again."),ie(!1);return}}try{const at=await fetch(window.server_url+"/signup",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:p,password:p})}),_e=await at.json();if(_e.error==="Username already taken"){z("Username is taken"),ie(!1);return}if(!at.ok){z(_e.message||"Signup failed"),ie(!1);return}r(_e),await a();const nt=localStorage.getItem("access_token");if(!nt)throw new Error("Authentication failed");const Pt=await fetch("/assets/fakeprofile.png");if(!Pt.ok)throw new Error("Failed to fetch profile image");const St=await(await Pt.blob()).arrayBuffer(),vt=btoa(new Uint8Array(St).reduce((zn,Ct)=>zn+String.fromCharCode(Ct),""));if(!(await fetch(`${window.server_url}/update_profile`,{method:"POST",headers:{Authorization:`Bearer ${nt}`,"Content-Type":"application/json"},body:JSON.stringify({name:p,image_data:vt,phone_number:We,city_state:S,event_type:_||"",avg_attendees:L||""})})).ok)throw new Error("Failed to update profile");await a();const xn=await fetch(`${window.server_url}/create-checkout-session`,{method:"POST",headers:{Authorization:`Bearer ${nt}`,"Content-Type":"application/json"},body:JSON.stringify({email:y,rewardful_referral:tt,affiliate_code:ge})}),Te=await xn.json();if(!xn.ok||Te.error){if(Te.error&&Te.error.includes("already have an active subscription")){ue("/organizer-account-details");return}throw new Error(Te.error||"Failed to create checkout session")}window.location.href=Te.checkout_url}catch(Ze){console.error("Error:",Ze),z("An error occurred. Please try again."),ie(!1)}},Ae=o===null,ze=Q||d==="admin"||d==="organizer";return A.jsxs("div",{className:"signup-container",children:[A.jsx("button",{onClick:()=>ue("/"),className:"homescreen-button",children:"Home"}),A.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),A.jsx("h3",{className:"signup-header",children:"Become an Organizer"}),A.jsx("div",{className:"step-form-container",children:A.jsxs("form",{onSubmit:te,children:[A.jsxs("div",{style:{display:Ae?"block":"none"},children:[A.jsx("label",{className:"step-label",children:"Username"}),A.jsx("input",{type:"text",value:p,onChange:Ve,placeholder:"Enter a username",className:"step-input",autoFocus:Ae}),p.length>0&&A.jsxs("div",{className:"username-info-message",children:[A.jsxs("svg",{className:"info-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[A.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),A.jsx("path",{d:"M8 5V7M8 11V9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),A.jsx("circle",{cx:"8",cy:"5",r:"0.5",fill:"currentColor"})]}),A.jsx("span",{children:"This will be your temporary password"})]})]}),A.jsxs("div",{style:{marginTop:Ae?"20px":"0"},children:[A.jsxs("label",{className:"step-label",children:["Email",F.email&&A.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[A.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),A.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),A.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),A.jsx("input",{type:"email",value:y,onChange:ee,placeholder:"Enter your email",className:`step-input ${F.email?"input-error":""}`,autoFocus:!Ae})]}),A.jsxs("div",{style:{marginTop:"20px"},children:[A.jsxs("label",{className:"step-label",children:["Phone Number",F.phone&&A.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[A.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),A.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),A.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),A.jsx("input",{type:"tel",value:w,onChange:Ue,onBlur:me,placeholder:"(123) 456-7890",className:`step-input ${F.phone?"input-error":""}`})]}),A.jsxs("div",{style:{marginTop:"20px"},children:[A.jsxs("label",{className:"step-label",children:["City / State",F.cityState&&A.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[A.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),A.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),A.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),A.jsx("input",{type:"text",value:S,onChange:pe,onBlur:Oe,placeholder:"City / State",className:`step-input ${F.cityState?"input-error":""}`})]}),A.jsxs("div",{style:{marginTop:"20px"},children:[A.jsx("label",{className:"step-label",children:"What events do you host?"}),A.jsxs("select",{value:_,onChange:fe,className:"step-select",children:[A.jsx("option",{value:"",children:"Select an option..."}),A.jsx("option",{value:"Hospitality-Restaurants",children:"Hospitality-Restaurants"}),A.jsx("option",{value:"Social",children:"Social"}),A.jsx("option",{value:"Residential",children:"Residential"}),A.jsx("option",{value:"Business Networking",children:"Business Networking"}),A.jsx("option",{value:"Event Specialist",children:"Event Specialist"}),A.jsx("option",{value:"Education",children:"Education"}),A.jsx("option",{value:"HR-Team Building",children:"HR-Team Building"}),A.jsx("option",{value:"Corporate",children:"Corporate"}),A.jsx("option",{value:"Co-working",children:"Co-working"}),A.jsx("option",{value:"Dating",children:"Dating"}),A.jsx("option",{value:"Other",children:"Other"})]})]}),A.jsxs("div",{style:{marginTop:"20px"},children:[A.jsx("label",{className:"step-label",children:"Avg # of attendees"}),A.jsxs("select",{value:L,onChange:X,className:"step-select",children:[A.jsx("option",{value:"",children:"Select an option..."}),A.jsx("option",{value:"5-15",children:"5-15"}),A.jsx("option",{value:"15-30",children:"15-30"}),A.jsx("option",{value:"30-50",children:"30-50"}),A.jsx("option",{value:"50-75",children:"50-75"}),A.jsx("option",{value:"75-100",children:"75-100"}),A.jsx("option",{value:"100-150",children:"100-150"}),A.jsx("option",{value:"150-200",children:"150-200"}),A.jsx("option",{value:"200+",children:"200+"})]})]}),W&&A.jsx("div",{className:"error-message",style:{marginTop:"15px",marginBottom:"10px"},children:W}),A.jsx("button",{type:"submit",className:"primary-button",disabled:ze,style:{marginTop:"20px"},children:Q?"Loading...":"Submit"})]})})]})},ub=()=>{const[r,o]=R.useState(!1),[a,d]=R.useState(""),p=R.useRef(null),x=pr(),y=Yr();return R.useEffect(()=>{const w=new URLSearchParams(y.search).get("session_id");return(async()=>{if(!w){d("Missing session ID"),o(!0),p.current=setTimeout(()=>{o(!1),x("/")},2e3);return}try{const S=localStorage.getItem("access_token");if(!S){d("Authentication required"),o(!0),p.current=setTimeout(()=>{o(!1),x("/")},2e3);return}const I=await fetch(`${window.server_url}/organizer-signup-success?session_id=${w}`,{headers:{Authorization:`Bearer ${S}`}}),_=await I.json();(!I.ok||_.error)&&(console.error("Payment verification failed:",_.error),d(_.error||"Payment verification failed"))}catch(S){console.error("Error verifying payment:",S),d("Failed to verify payment")}o(!0),p.current=setTimeout(()=>{o(!1),x("/")},2e3)})(),()=>{p.current&&(clearTimeout(p.current),p.current=null)}},[y.search,x]),r?A.jsxs("div",{className:"success-overlay",children:[A.jsx("div",{className:"success-text",children:"Success! You're now an organizer!"}),a&&A.jsx("div",{className:"success-error",style:{marginTop:"20px"},children:a})]}):A.jsx("div",{className:"signup-container",children:A.jsx("div",{className:"loading-message",children:"Processing..."})})},fb=()=>{const{user:r,checkAuth:o,permissions:a}=R.useContext(Ar),d=pr(),[p,x]=R.useState(null),[y,b]=R.useState(!0),[w,E]=R.useState(!1),[S,I]=R.useState(""),[_,D]=R.useState(!1),[L,B]=R.useState(!1);R.useEffect(()=>{a!==null&&a!=="admin"&&a!=="organizer"&&d("/organizer-signup")},[a,d]),R.useEffect(()=>{r&&(async()=>{try{const z=localStorage.getItem("access_token");if(!z){d("/organizer-signup");return}const Q=await fetch(`${window.server_url}/organizer-account-details`,{headers:{Authorization:`Bearer ${z}`}}),ie=await Q.json();if(!Q.ok||ie.error){if((a==="admin"||a==="organizer")&&ie.has_subscription!==!1){I(ie.error||"Some subscription details may be incomplete"),x(ie),b(!1);return}if(ie.has_subscription===!1){d("/organizer-signup");return}I(ie.error||"Failed to load account details"),ie.has_subscription!==!1&&x(ie),b(!1);return}if(ie.has_subscription===!1){d("/organizer-signup");return}x(ie)}catch(z){console.error("Error fetching account details:",z),I("Failed to load account details. Please try again.")}finally{b(!1)}})()},[r,a,d]),R.useEffect(()=>(_?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[_]);const F=W=>W?new Date(W*1e3).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):null,V=async()=>{E(!0),I("");try{const W=localStorage.getItem("access_token");if(!W){I("Authentication required"),E(!1);return}const z=await fetch(`${window.server_url}/cancel-subscription`,{method:"POST",headers:{Authorization:`Bearer ${W}`,"Content-Type":"application/json"}}),Q=await z.json();if(!z.ok||Q.error){I(Q.error||"Failed to cancel subscription"),E(!1),D(!1);return}B(!0),D(!1),setTimeout(()=>{d("/")},1500)}catch(W){console.error("Error canceling subscription:",W),I("An error occurred. Please try again."),E(!1),D(!1)}};return y?A.jsx("div",{className:"signup-container",children:A.jsx("div",{className:"loading-message",children:"Loading account details..."})}):!p&&!y?A.jsxs("div",{className:"signup-container",children:[A.jsx("button",{onClick:()=>d("/"),className:"homescreen-button",children:"Home"}),A.jsx("div",{className:"error-message",children:S||"No account details found"})]}):p?A.jsxs("div",{className:"signup-container",children:[A.jsx("button",{onClick:()=>d("/"),className:"homescreen-button",children:"Home"}),A.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),A.jsx("h3",{className:"signup-header",children:"Organizer Account Details"}),A.jsx("div",{className:"step-form-container",children:A.jsxs("div",{className:"account-details-content",children:[S&&A.jsx("div",{className:"error-message",style:{marginBottom:"20px"},children:S}),p.subscription_status&&A.jsxs("div",{className:"detail-row",children:[A.jsx("span",{className:"detail-label",children:"Subscription Status:"}),A.jsx("span",{className:`detail-value status-${p.subscription_status}`,children:p.subscription_status})]}),p.email&&A.jsxs("div",{className:"detail-row",children:[A.jsx("span",{className:"detail-label",children:"Email:"}),A.jsx("span",{className:"detail-value",children:p.email})]}),p.billing_period&&A.jsxs("div",{className:"detail-row",children:[A.jsx("span",{className:"detail-label",children:"Billing Period:"}),A.jsx("span",{className:"detail-value",children:p.billing_period})]}),p.amount!==null&&p.amount!==void 0&&A.jsxs("div",{className:"detail-row",children:[A.jsx("span",{className:"detail-label",children:"Amount:"}),A.jsxs("span",{className:"detail-value",children:["$",p.amount," ",p.currency||""]})]}),p.current_period_start&&F(p.current_period_start)&&A.jsxs("div",{className:"detail-row",children:[A.jsx("span",{className:"detail-label",children:"Current Period Start:"}),A.jsx("span",{className:"detail-value",children:F(p.current_period_start)})]}),p.current_period_end&&F(p.current_period_end)&&A.jsxs("div",{className:"detail-row",children:[A.jsx("span",{className:"detail-label",children:"Current Period End:"}),A.jsx("span",{className:"detail-value",children:F(p.current_period_end)})]}),p.cancel_at_period_end&&A.jsxs("div",{className:"detail-row",children:[A.jsx("span",{className:"detail-label",children:"Cancellation:"}),A.jsx("span",{className:"detail-value",children:"Will cancel at period end"})]}),A.jsx("button",{onClick:()=>D(!0),className:"primary-button cancel-button",style:{marginTop:"30px"},children:"Cancel Subscription"})]})}),_&&A.jsx("div",{className:"modal-overlay",onClick:W=>W.stopPropagation(),children:A.jsxs("div",{className:"modal-content",onClick:W=>W.stopPropagation(),children:[A.jsx("h3",{children:"Cancel Subscription"}),A.jsx("p",{children:"Are you sure you want to cancel your subscription?"}),A.jsxs("div",{className:"modal-buttons",children:[A.jsx("button",{className:"modal-button modal-cancel",onClick:()=>D(!1),disabled:w,children:"Cancel"}),A.jsx("button",{className:"modal-button modal-confirm",onClick:V,disabled:w,children:w?"Processing...":"Confirm"})]})]})}),L&&A.jsx("div",{className:"toast-container",children:A.jsx("div",{className:"toast-message",children:"Subscription canceled successfully"})})]}):null},db=5e3,hb=()=>{const{checkAuth:r,permissions:o,user:a}=R.useContext(Ar),d=pr(),[p,x]=R.useState([]),[y,b]=R.useState(!0),[w,E]=R.useState(null),[S,I]=R.useState(!1);return R.useEffect(()=>{r()},[r]),R.useEffect(()=>{a==="topaz"&&o==="admin"?I(!0):o!==null&&a!==null&&d("/")},[o,a,d]),R.useEffect(()=>{if(!S)return;let _=!0,D,L=!0;const B=async()=>{L&&b(!0),E(null);try{const F=localStorage.getItem("access_token");if(!F)return;const V=await fetch(window.server_url+"/admin_all_lobbies",{headers:{Authorization:`Bearer ${F}`}});if(!V.ok)throw new Error("Failed to fetch lobbies");const W=await V.json();if(W.status!=="success"||!Array.isArray(W.lobbies))throw new Error("Invalid response format");if(!_)return;x(W.lobbies),console.log("Received lobbies data:",W.lobbies)}catch(F){_&&E(F.message||"Error fetching lobbies")}finally{_&&L&&b(!1),L=!1,D=setTimeout(B,db)}};return B(),()=>{_=!1,D&&clearTimeout(D)}},[S]),y?A.jsx("div",{className:"master-lobby-container",children:A.jsxs("div",{className:"loading-state",children:[A.jsx("div",{className:"loading-spinner"}),A.jsx("p",{children:"Loading lobbies..."})]})}):w&&p.length===0?A.jsx("div",{className:"master-lobby-container",children:A.jsx("div",{className:"error-state",children:A.jsx("p",{children:w})})}):p.length===0?A.jsx("div",{className:"master-lobby-container",children:A.jsx("div",{className:"empty-state",children:A.jsx("p",{children:"No active lobbies found"})})}):A.jsxs("div",{className:"master-lobby-container",children:[A.jsx("button",{className:"back-button",onClick:()=>d(-1),children:"Back"}),w&&A.jsxs("div",{className:"error-banner",style:{backgroundColor:"#f8d7da",color:"#721c24",padding:"0.75rem",marginBottom:"1rem",borderRadius:"0.25rem",border:"1px solid #f5c6cb"},children:[w," (showing last known data)"]}),A.jsx("div",{className:"master-lobby-grid",children:p.map(_=>A.jsx("div",{className:"lobby-tile",children:A.jsxs("div",{className:"lobby-tile-content",children:[A.jsx("h3",{className:"lobby-code",children:_.code}),A.jsxs("div",{className:"lobby-stats",children:[A.jsxs("span",{className:"player-count",children:[_.player_count," players"]}),A.jsx("span",{className:"lobby-state",children:_.lobby_state})]}),A.jsxs("div",{style:{fontSize:"0.7rem",color:"#666",marginTop:"0.5rem"},children:["Debug: player_count=",_.player_count,", lobby_state=",_.lobby_state]})]})},_.code))})]})};$x.createRoot(document.getElementById("root")).render(A.jsx(R.StrictMode,{children:A.jsx(qx,{children:A.jsxs(Dy,{basename:"/",children:[A.jsx(FE,{}),A.jsxs(fy,{children:[A.jsx(Or,{path:"/",element:A.jsx(BE,{})}),A.jsx(Or,{path:"/login",element:A.jsx(jE,{})}),A.jsx(Or,{path:"/signup",element:A.jsx(_E,{})}),A.jsx(Or,{path:"/logout",element:A.jsx(VE,{})}),A.jsx(Or,{path:"/lobby",element:A.jsx(uA,{})}),A.jsx(Or,{path:"/admin_lobby_view",element:A.jsx(sb,{})}),A.jsx(Or,{path:"/create_lobby",element:A.jsx(ab,{})}),A.jsx(Or,{path:"/product-selection",element:A.jsx(ob,{})}),A.jsx(Or,{path:"/organizer-signup",element:A.jsx(cb,{})}),A.jsx(Or,{path:"/organizer-signup-success",element:A.jsx(ub,{})}),A.jsx(Or,{path:"/organizer-account-details",element:A.jsx(fb,{})}),A.jsx(Or,{path:"/master_lobby_view",element:A.jsx(hb,{})})]})]})})}));
