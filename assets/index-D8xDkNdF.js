(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))u(m);new MutationObserver(m=>{for(const x of m)if(x.type==="childList")for(const w of x.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&u(w)}).observe(document,{childList:!0,subtree:!0});function a(m){const x={};return m.integrity&&(x.integrity=m.integrity),m.referrerPolicy&&(x.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?x.credentials="include":m.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function u(m){if(m.ep)return;m.ep=!0;const x=a(m);fetch(m.href,x)}})();var lc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xd={exports:{}},Ta={},yd={exports:{}},kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l1;function b2(){if(l1)return kt;l1=1;var t=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),w=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),C=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),T=Symbol.iterator;function _(X){return X===null||typeof X!="object"?null:(X=T&&X[T]||X["@@iterator"],typeof X=="function"?X:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,B={};function j(X,G,Ce){this.props=X,this.context=G,this.refs=B,this.updater=Ce||O}j.prototype.isReactComponent={},j.prototype.setState=function(X,G){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,G,"setState")},j.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function W(){}W.prototype=j.prototype;function U(X,G,Ce){this.props=X,this.context=G,this.refs=B,this.updater=Ce||O}var F=U.prototype=new W;F.constructor=U,L(F,j.prototype),F.isPureReactComponent=!0;var Y=Array.isArray,K=Object.prototype.hasOwnProperty,ne={current:null},q={key:!0,ref:!0,__self:!0,__source:!0};function ie(X,G,Ce){var ae,se={},te=null,Me=null;if(G!=null)for(ae in G.ref!==void 0&&(Me=G.ref),G.key!==void 0&&(te=""+G.key),G)K.call(G,ae)&&!q.hasOwnProperty(ae)&&(se[ae]=G[ae]);var Se=arguments.length-2;if(Se===1)se.children=Ce;else if(1<Se){for(var Le=Array(Se),et=0;et<Se;et++)Le[et]=arguments[et+2];se.children=Le}if(X&&X.defaultProps)for(ae in Se=X.defaultProps,Se)se[ae]===void 0&&(se[ae]=Se[ae]);return{$$typeof:t,type:X,key:te,ref:Me,props:se,_owner:ne.current}}function J(X,G){return{$$typeof:t,type:X.type,key:G,ref:X.ref,props:X.props,_owner:X._owner}}function we(X){return typeof X=="object"&&X!==null&&X.$$typeof===t}function Re(X){var G={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(Ce){return G[Ce]})}var Ae=/\/+/g;function be(X,G){return typeof X=="object"&&X!==null&&X.key!=null?Re(""+X.key):G.toString(36)}function Ie(X,G,Ce,ae,se){var te=typeof X;(te==="undefined"||te==="boolean")&&(X=null);var Me=!1;if(X===null)Me=!0;else switch(te){case"string":case"number":Me=!0;break;case"object":switch(X.$$typeof){case t:case i:Me=!0}}if(Me)return Me=X,se=se(Me),X=ae===""?"."+be(Me,0):ae,Y(se)?(Ce="",X!=null&&(Ce=X.replace(Ae,"$&/")+"/"),Ie(se,G,Ce,"",function(et){return et})):se!=null&&(we(se)&&(se=J(se,Ce+(!se.key||Me&&Me.key===se.key?"":(""+se.key).replace(Ae,"$&/")+"/")+X)),G.push(se)),1;if(Me=0,ae=ae===""?".":ae+":",Y(X))for(var Se=0;Se<X.length;Se++){te=X[Se];var Le=ae+be(te,Se);Me+=Ie(te,G,Ce,Le,se)}else if(Le=_(X),typeof Le=="function")for(X=Le.call(X),Se=0;!(te=X.next()).done;)te=te.value,Le=ae+be(te,Se++),Me+=Ie(te,G,Ce,Le,se);else if(te==="object")throw G=String(X),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Me}function $(X,G,Ce){if(X==null)return X;var ae=[],se=0;return Ie(X,ae,"","",function(te){return G.call(Ce,te,se++)}),ae}function ke(X){if(X._status===-1){var G=X._result;G=G(),G.then(function(Ce){(X._status===0||X._status===-1)&&(X._status=1,X._result=Ce)},function(Ce){(X._status===0||X._status===-1)&&(X._status=2,X._result=Ce)}),X._status===-1&&(X._status=0,X._result=G)}if(X._status===1)return X._result.default;throw X._result}var ve={current:null},ye={transition:null},De={ReactCurrentDispatcher:ve,ReactCurrentBatchConfig:ye,ReactCurrentOwner:ne};function Ee(){throw Error("act(...) is not supported in production builds of React.")}return kt.Children={map:$,forEach:function(X,G,Ce){$(X,function(){G.apply(this,arguments)},Ce)},count:function(X){var G=0;return $(X,function(){G++}),G},toArray:function(X){return $(X,function(G){return G})||[]},only:function(X){if(!we(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},kt.Component=j,kt.Fragment=a,kt.Profiler=m,kt.PureComponent=U,kt.StrictMode=u,kt.Suspense=v,kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=De,kt.act=Ee,kt.cloneElement=function(X,G,Ce){if(X==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+X+".");var ae=L({},X.props),se=X.key,te=X.ref,Me=X._owner;if(G!=null){if(G.ref!==void 0&&(te=G.ref,Me=ne.current),G.key!==void 0&&(se=""+G.key),X.type&&X.type.defaultProps)var Se=X.type.defaultProps;for(Le in G)K.call(G,Le)&&!q.hasOwnProperty(Le)&&(ae[Le]=G[Le]===void 0&&Se!==void 0?Se[Le]:G[Le])}var Le=arguments.length-2;if(Le===1)ae.children=Ce;else if(1<Le){Se=Array(Le);for(var et=0;et<Le;et++)Se[et]=arguments[et+2];ae.children=Se}return{$$typeof:t,type:X.type,key:se,ref:te,props:ae,_owner:Me}},kt.createContext=function(X){return X={$$typeof:w,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},X.Provider={$$typeof:x,_context:X},X.Consumer=X},kt.createElement=ie,kt.createFactory=function(X){var G=ie.bind(null,X);return G.type=X,G},kt.createRef=function(){return{current:null}},kt.forwardRef=function(X){return{$$typeof:b,render:X}},kt.isValidElement=we,kt.lazy=function(X){return{$$typeof:A,_payload:{_status:-1,_result:X},_init:ke}},kt.memo=function(X,G){return{$$typeof:C,type:X,compare:G===void 0?null:G}},kt.startTransition=function(X){var G=ye.transition;ye.transition={};try{X()}finally{ye.transition=G}},kt.unstable_act=Ee,kt.useCallback=function(X,G){return ve.current.useCallback(X,G)},kt.useContext=function(X){return ve.current.useContext(X)},kt.useDebugValue=function(){},kt.useDeferredValue=function(X){return ve.current.useDeferredValue(X)},kt.useEffect=function(X,G){return ve.current.useEffect(X,G)},kt.useId=function(){return ve.current.useId()},kt.useImperativeHandle=function(X,G,Ce){return ve.current.useImperativeHandle(X,G,Ce)},kt.useInsertionEffect=function(X,G){return ve.current.useInsertionEffect(X,G)},kt.useLayoutEffect=function(X,G){return ve.current.useLayoutEffect(X,G)},kt.useMemo=function(X,G){return ve.current.useMemo(X,G)},kt.useReducer=function(X,G,Ce){return ve.current.useReducer(X,G,Ce)},kt.useRef=function(X){return ve.current.useRef(X)},kt.useState=function(X){return ve.current.useState(X)},kt.useSyncExternalStore=function(X,G,Ce){return ve.current.useSyncExternalStore(X,G,Ce)},kt.useTransition=function(){return ve.current.useTransition()},kt.version="18.3.1",kt}var c1;function Nf(){return c1||(c1=1,yd.exports=b2()),yd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u1;function E2(){if(u1)return Ta;u1=1;var t=Nf(),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),u=Object.prototype.hasOwnProperty,m=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x={key:!0,ref:!0,__self:!0,__source:!0};function w(b,v,C){var A,T={},_=null,O=null;C!==void 0&&(_=""+C),v.key!==void 0&&(_=""+v.key),v.ref!==void 0&&(O=v.ref);for(A in v)u.call(v,A)&&!x.hasOwnProperty(A)&&(T[A]=v[A]);if(b&&b.defaultProps)for(A in v=b.defaultProps,v)T[A]===void 0&&(T[A]=v[A]);return{$$typeof:i,type:b,key:_,ref:O,props:T,_owner:m.current}}return Ta.Fragment=a,Ta.jsx=w,Ta.jsxs=w,Ta}var d1;function S2(){return d1||(d1=1,xd.exports=E2()),xd.exports}var h=S2(),N=Nf();const Gt=fp(N);var cc={},wd={exports:{}},Dr={},vd={exports:{}},Cd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f1;function A2(){return f1||(f1=1,function(t){function i(ye,De){var Ee=ye.length;ye.push(De);e:for(;0<Ee;){var X=Ee-1>>>1,G=ye[X];if(0<m(G,De))ye[X]=De,ye[Ee]=G,Ee=X;else break e}}function a(ye){return ye.length===0?null:ye[0]}function u(ye){if(ye.length===0)return null;var De=ye[0],Ee=ye.pop();if(Ee!==De){ye[0]=Ee;e:for(var X=0,G=ye.length,Ce=G>>>1;X<Ce;){var ae=2*(X+1)-1,se=ye[ae],te=ae+1,Me=ye[te];if(0>m(se,Ee))te<G&&0>m(Me,se)?(ye[X]=Me,ye[te]=Ee,X=te):(ye[X]=se,ye[ae]=Ee,X=ae);else if(te<G&&0>m(Me,Ee))ye[X]=Me,ye[te]=Ee,X=te;else break e}}return De}function m(ye,De){var Ee=ye.sortIndex-De.sortIndex;return Ee!==0?Ee:ye.id-De.id}if(typeof performance=="object"&&typeof performance.now=="function"){var x=performance;t.unstable_now=function(){return x.now()}}else{var w=Date,b=w.now();t.unstable_now=function(){return w.now()-b}}var v=[],C=[],A=1,T=null,_=3,O=!1,L=!1,B=!1,j=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(ye){for(var De=a(C);De!==null;){if(De.callback===null)u(C);else if(De.startTime<=ye)u(C),De.sortIndex=De.expirationTime,i(v,De);else break;De=a(C)}}function Y(ye){if(B=!1,F(ye),!L)if(a(v)!==null)L=!0,ke(K);else{var De=a(C);De!==null&&ve(Y,De.startTime-ye)}}function K(ye,De){L=!1,B&&(B=!1,W(ie),ie=-1),O=!0;var Ee=_;try{for(F(De),T=a(v);T!==null&&(!(T.expirationTime>De)||ye&&!Re());){var X=T.callback;if(typeof X=="function"){T.callback=null,_=T.priorityLevel;var G=X(T.expirationTime<=De);De=t.unstable_now(),typeof G=="function"?T.callback=G:T===a(v)&&u(v),F(De)}else u(v);T=a(v)}if(T!==null)var Ce=!0;else{var ae=a(C);ae!==null&&ve(Y,ae.startTime-De),Ce=!1}return Ce}finally{T=null,_=Ee,O=!1}}var ne=!1,q=null,ie=-1,J=5,we=-1;function Re(){return!(t.unstable_now()-we<J)}function Ae(){if(q!==null){var ye=t.unstable_now();we=ye;var De=!0;try{De=q(!0,ye)}finally{De?be():(ne=!1,q=null)}}else ne=!1}var be;if(typeof U=="function")be=function(){U(Ae)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,$=Ie.port2;Ie.port1.onmessage=Ae,be=function(){$.postMessage(null)}}else be=function(){j(Ae,0)};function ke(ye){q=ye,ne||(ne=!0,be())}function ve(ye,De){ie=j(function(){ye(t.unstable_now())},De)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ye){ye.callback=null},t.unstable_continueExecution=function(){L||O||(L=!0,ke(K))},t.unstable_forceFrameRate=function(ye){0>ye||125<ye?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<ye?Math.floor(1e3/ye):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return a(v)},t.unstable_next=function(ye){switch(_){case 1:case 2:case 3:var De=3;break;default:De=_}var Ee=_;_=De;try{return ye()}finally{_=Ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ye,De){switch(ye){case 1:case 2:case 3:case 4:case 5:break;default:ye=3}var Ee=_;_=ye;try{return De()}finally{_=Ee}},t.unstable_scheduleCallback=function(ye,De,Ee){var X=t.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?X+Ee:X):Ee=X,ye){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=Ee+G,ye={id:A++,callback:De,priorityLevel:ye,startTime:Ee,expirationTime:G,sortIndex:-1},Ee>X?(ye.sortIndex=Ee,i(C,ye),a(v)===null&&ye===a(C)&&(B?(W(ie),ie=-1):B=!0,ve(Y,Ee-X))):(ye.sortIndex=G,i(v,ye),L||O||(L=!0,ke(K))),ye},t.unstable_shouldYield=Re,t.unstable_wrapCallback=function(ye){var De=_;return function(){var Ee=_;_=De;try{return ye.apply(this,arguments)}finally{_=Ee}}}}(Cd)),Cd}var h1;function N2(){return h1||(h1=1,vd.exports=A2()),vd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m1;function I2(){if(m1)return Dr;m1=1;var t=Nf(),i=N2();function a(n){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+n,f=1;f<arguments.length;f++)o+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+n+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=new Set,m={};function x(n,o){w(n,o),w(n+"Capture",o)}function w(n,o){for(m[n]=o,n=0;n<o.length;n++)u.add(o[n])}var b=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v=Object.prototype.hasOwnProperty,C=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A={},T={};function _(n){return v.call(T,n)?!0:v.call(A,n)?!1:C.test(n)?T[n]=!0:(A[n]=!0,!1)}function O(n,o,f,g){if(f!==null&&f.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return g?!1:f!==null?!f.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function L(n,o,f,g){if(o===null||typeof o>"u"||O(n,o,f,g))return!0;if(g)return!1;if(f!==null)switch(f.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function B(n,o,f,g,S,I,M){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=g,this.attributeNamespace=S,this.mustUseProperty=f,this.propertyName=n,this.type=o,this.sanitizeURL=I,this.removeEmptyString=M}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){j[n]=new B(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var o=n[0];j[o]=new B(o,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){j[n]=new B(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){j[n]=new B(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){j[n]=new B(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){j[n]=new B(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){j[n]=new B(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){j[n]=new B(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){j[n]=new B(n,5,!1,n.toLowerCase(),null,!1,!1)});var W=/[\-:]([a-z])/g;function U(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var o=n.replace(W,U);j[o]=new B(o,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var o=n.replace(W,U);j[o]=new B(o,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var o=n.replace(W,U);j[o]=new B(o,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){j[n]=new B(n,1,!1,n.toLowerCase(),null,!1,!1)}),j.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){j[n]=new B(n,1,!1,n.toLowerCase(),null,!0,!0)});function F(n,o,f,g){var S=j.hasOwnProperty(o)?j[o]:null;(S!==null?S.type!==0:g||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(L(o,f,S,g)&&(f=null),g||S===null?_(o)&&(f===null?n.removeAttribute(o):n.setAttribute(o,""+f)):S.mustUseProperty?n[S.propertyName]=f===null?S.type===3?!1:"":f:(o=S.attributeName,g=S.attributeNamespace,f===null?n.removeAttribute(o):(S=S.type,f=S===3||S===4&&f===!0?"":""+f,g?n.setAttributeNS(g,o,f):n.setAttribute(o,f))))}var Y=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,K=Symbol.for("react.element"),ne=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),ie=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),we=Symbol.for("react.provider"),Re=Symbol.for("react.context"),Ae=Symbol.for("react.forward_ref"),be=Symbol.for("react.suspense"),Ie=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),ke=Symbol.for("react.lazy"),ve=Symbol.for("react.offscreen"),ye=Symbol.iterator;function De(n){return n===null||typeof n!="object"?null:(n=ye&&n[ye]||n["@@iterator"],typeof n=="function"?n:null)}var Ee=Object.assign,X;function G(n){if(X===void 0)try{throw Error()}catch(f){var o=f.stack.trim().match(/\n( *(at )?)/);X=o&&o[1]||""}return`
`+X+n}var Ce=!1;function ae(n,o){if(!n||Ce)return"";Ce=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(pe){var g=pe}Reflect.construct(n,[],o)}else{try{o.call()}catch(pe){g=pe}n.call(o.prototype)}else{try{throw Error()}catch(pe){g=pe}n()}}catch(pe){if(pe&&g&&typeof pe.stack=="string"){for(var S=pe.stack.split(`
`),I=g.stack.split(`
`),M=S.length-1,H=I.length-1;1<=M&&0<=H&&S[M]!==I[H];)H--;for(;1<=M&&0<=H;M--,H--)if(S[M]!==I[H]){if(M!==1||H!==1)do if(M--,H--,0>H||S[M]!==I[H]){var Q=`
`+S[M].replace(" at new "," at ");return n.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",n.displayName)),Q}while(1<=M&&0<=H);break}}}finally{Ce=!1,Error.prepareStackTrace=f}return(n=n?n.displayName||n.name:"")?G(n):""}function se(n){switch(n.tag){case 5:return G(n.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return n=ae(n.type,!1),n;case 11:return n=ae(n.type.render,!1),n;case 1:return n=ae(n.type,!0),n;default:return""}}function te(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case q:return"Fragment";case ne:return"Portal";case J:return"Profiler";case ie:return"StrictMode";case be:return"Suspense";case Ie:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Re:return(n.displayName||"Context")+".Consumer";case we:return(n._context.displayName||"Context")+".Provider";case Ae:var o=n.render;return n=n.displayName,n||(n=o.displayName||o.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case $:return o=n.displayName||null,o!==null?o:te(n.type)||"Memo";case ke:o=n._payload,n=n._init;try{return te(n(o))}catch{}}return null}function Me(n){var o=n.type;switch(n.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=o.render,n=n.displayName||n.name||"",o.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return te(o);case 8:return o===ie?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Se(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Le(n){var o=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function et(n){var o=Le(n)?"checked":"value",f=Object.getOwnPropertyDescriptor(n.constructor.prototype,o),g=""+n[o];if(!n.hasOwnProperty(o)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var S=f.get,I=f.set;return Object.defineProperty(n,o,{configurable:!0,get:function(){return S.call(this)},set:function(M){g=""+M,I.call(this,M)}}),Object.defineProperty(n,o,{enumerable:f.enumerable}),{getValue:function(){return g},setValue:function(M){g=""+M},stopTracking:function(){n._valueTracker=null,delete n[o]}}}}function Xe(n){n._valueTracker||(n._valueTracker=et(n))}function de(n){if(!n)return!1;var o=n._valueTracker;if(!o)return!0;var f=o.getValue(),g="";return n&&(g=Le(n)?n.checked?"true":"false":n.value),n=g,n!==f?(o.setValue(n),!0):!1}function xe(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function $e(n,o){var f=o.checked;return Ee({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??n._wrapperState.initialChecked})}function Ze(n,o){var f=o.defaultValue==null?"":o.defaultValue,g=o.checked!=null?o.checked:o.defaultChecked;f=Se(o.value!=null?o.value:f),n._wrapperState={initialChecked:g,initialValue:f,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function It(n,o){o=o.checked,o!=null&&F(n,"checked",o,!1)}function it(n,o){It(n,o);var f=Se(o.value),g=o.type;if(f!=null)g==="number"?(f===0&&n.value===""||n.value!=f)&&(n.value=""+f):n.value!==""+f&&(n.value=""+f);else if(g==="submit"||g==="reset"){n.removeAttribute("value");return}o.hasOwnProperty("value")?tt(n,o.type,f):o.hasOwnProperty("defaultValue")&&tt(n,o.type,Se(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(n.defaultChecked=!!o.defaultChecked)}function qe(n,o,f){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var g=o.type;if(!(g!=="submit"&&g!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+n._wrapperState.initialValue,f||o===n.value||(n.value=o),n.defaultValue=o}f=n.name,f!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,f!==""&&(n.name=f)}function tt(n,o,f){(o!=="number"||xe(n.ownerDocument)!==n)&&(f==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+f&&(n.defaultValue=""+f))}var jt=Array.isArray;function Ue(n,o,f,g){if(n=n.options,o){o={};for(var S=0;S<f.length;S++)o["$"+f[S]]=!0;for(f=0;f<n.length;f++)S=o.hasOwnProperty("$"+n[f].value),n[f].selected!==S&&(n[f].selected=S),S&&g&&(n[f].defaultSelected=!0)}else{for(f=""+Se(f),o=null,S=0;S<n.length;S++){if(n[S].value===f){n[S].selected=!0,g&&(n[S].defaultSelected=!0);return}o!==null||n[S].disabled||(o=n[S])}o!==null&&(o.selected=!0)}}function gn(n,o){if(o.dangerouslySetInnerHTML!=null)throw Error(a(91));return Ee({},o,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function ir(n,o){var f=o.value;if(f==null){if(f=o.children,o=o.defaultValue,f!=null){if(o!=null)throw Error(a(92));if(jt(f)){if(1<f.length)throw Error(a(93));f=f[0]}o=f}o==null&&(o=""),f=o}n._wrapperState={initialValue:Se(f)}}function Ge(n,o){var f=Se(o.value),g=Se(o.defaultValue);f!=null&&(f=""+f,f!==n.value&&(n.value=f),o.defaultValue==null&&n.defaultValue!==f&&(n.defaultValue=f)),g!=null&&(n.defaultValue=""+g)}function Tt(n){var o=n.textContent;o===n._wrapperState.initialValue&&o!==""&&o!==null&&(n.value=o)}function ze(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ct(n,o){return n==null||n==="http://www.w3.org/1999/xhtml"?ze(o):n==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Je,wt=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,f,g,S){MSApp.execUnsafeLocalFunction(function(){return n(o,f,g,S)})}:n}(function(n,o){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=o;else{for(Je=Je||document.createElement("div"),Je.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Je.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;o.firstChild;)n.appendChild(o.firstChild)}});function Bt(n,o){if(o){var f=n.firstChild;if(f&&f===n.lastChild&&f.nodeType===3){f.nodeValue=o;return}}n.textContent=o}var Xt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Be=["Webkit","ms","Moz","O"];Object.keys(Xt).forEach(function(n){Be.forEach(function(o){o=o+n.charAt(0).toUpperCase()+n.substring(1),Xt[o]=Xt[n]})});function Te(n,o,f){return o==null||typeof o=="boolean"||o===""?"":f||typeof o!="number"||o===0||Xt.hasOwnProperty(n)&&Xt[n]?(""+o).trim():o+"px"}function ce(n,o){n=n.style;for(var f in o)if(o.hasOwnProperty(f)){var g=f.indexOf("--")===0,S=Te(f,o[f],g);f==="float"&&(f="cssFloat"),g?n.setProperty(f,S):n[f]=S}}var ft=Ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ut(n,o){if(o){if(ft[n]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(a(137,n));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(a(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(a(61))}if(o.style!=null&&typeof o.style!="object")throw Error(a(62))}}function xt(n,o){if(n.indexOf("-")===-1)return typeof o.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yt=null;function mn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var cn=null,dt=null,rn=null;function un(n){if(n=ha(n)){if(typeof cn!="function")throw Error(a(280));var o=n.stateNode;o&&(o=El(o),cn(n.stateNode,n.type,o))}}function Fr(n){dt?rn?rn.push(n):rn=[n]:dt=n}function en(){if(dt){var n=dt,o=rn;if(rn=dt=null,un(n),o)for(n=0;n<o.length;n++)un(o[n])}}function Ni(n,o){return n(o)}function Wt(){}var Nr=!1;function Dn(n,o,f){if(Nr)return n(o,f);Nr=!0;try{return Ni(n,o,f)}finally{Nr=!1,(dt!==null||rn!==null)&&(Wt(),en())}}function Vn(n,o){var f=n.stateNode;if(f===null)return null;var g=El(f);if(g===null)return null;f=g[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(n=n.type,g=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!g;break e;default:n=!1}if(n)return null;if(f&&typeof f!="function")throw Error(a(231,o,typeof f));return f}var Ji=!1;if(b)try{var wr={};Object.defineProperty(wr,"passive",{get:function(){Ji=!0}}),window.addEventListener("test",wr,wr),window.removeEventListener("test",wr,wr)}catch{Ji=!1}function Ii(n,o,f,g,S,I,M,H,Q){var pe=Array.prototype.slice.call(arguments,3);try{o.apply(f,pe)}catch(Oe){this.onError(Oe)}}var tn=!1,Kn=null,qn=!1,Ke=null,Ir={onError:function(n){tn=!0,Kn=n}};function uo(n,o,f,g,S,I,M,H,Q){tn=!1,Kn=null,Ii.apply(Ir,arguments)}function Qn(n,o,f,g,S,I,M,H,Q){if(uo.apply(this,arguments),tn){if(tn){var pe=Kn;tn=!1,Kn=null}else throw Error(a(198));qn||(qn=!0,Ke=pe)}}function sr(n){var o=n,f=n;if(n.alternate)for(;o.return;)o=o.return;else{n=o;do o=n,o.flags&4098&&(f=o.return),n=o.return;while(n)}return o.tag===3?f:null}function Ti(n){if(n.tag===13){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function _i(n){if(sr(n)!==n)throw Error(a(188))}function Tr(n){var o=n.alternate;if(!o){if(o=sr(n),o===null)throw Error(a(188));return o!==n?null:n}for(var f=n,g=o;;){var S=f.return;if(S===null)break;var I=S.alternate;if(I===null){if(g=S.return,g!==null){f=g;continue}break}if(S.child===I.child){for(I=S.child;I;){if(I===f)return _i(S),n;if(I===g)return _i(S),o;I=I.sibling}throw Error(a(188))}if(f.return!==g.return)f=S,g=I;else{for(var M=!1,H=S.child;H;){if(H===f){M=!0,f=S,g=I;break}if(H===g){M=!0,g=S,f=I;break}H=H.sibling}if(!M){for(H=I.child;H;){if(H===f){M=!0,f=I,g=S;break}if(H===g){M=!0,g=I,f=S;break}H=H.sibling}if(!M)throw Error(a(189))}}if(f.alternate!==g)throw Error(a(190))}if(f.tag!==3)throw Error(a(188));return f.stateNode.current===f?n:o}function fo(n){return n=Tr(n),n!==null?es(n):null}function es(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var o=es(n);if(o!==null)return o;n=n.sibling}return null}var vr=i.unstable_scheduleCallback,Ln=i.unstable_cancelCallback,$t=i.unstable_shouldYield,ho=i.unstable_requestPaint,Lt=i.unstable_now,Ri=i.unstable_getCurrentPriorityLevel,Ne=i.unstable_ImmediatePriority,Rs=i.unstable_UserBlockingPriority,Kt=i.unstable_NormalPriority,hi=i.unstable_LowPriority,ki=i.unstable_IdlePriority,Pt=null,At=null;function _t(n){if(At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(Pt,n,void 0,(n.current.flags&128)===128)}catch{}}var or=Math.clz32?Math.clz32:xn,ks=Math.log,ts=Math.LN2;function xn(n){return n>>>=0,n===0?32:31-(ks(n)/ts|0)|0}var Cr=64,mi=4194304;function qt(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function hr(n,o){var f=n.pendingLanes;if(f===0)return 0;var g=0,S=n.suspendedLanes,I=n.pingedLanes,M=f&268435455;if(M!==0){var H=M&~S;H!==0?g=qt(H):(I&=M,I!==0&&(g=qt(I)))}else M=f&~S,M!==0?g=qt(M):I!==0&&(g=qt(I));if(g===0)return 0;if(o!==0&&o!==g&&!(o&S)&&(S=g&-g,I=o&-o,S>=I||S===16&&(I&4194240)!==0))return o;if(g&4&&(g|=f&16),o=n.entangledLanes,o!==0)for(n=n.entanglements,o&=g;0<o;)f=31-or(o),S=1<<f,g|=n[f],o&=~S;return g}function qo(n,o){switch(n){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gr(n,o){for(var f=n.suspendedLanes,g=n.pingedLanes,S=n.expirationTimes,I=n.pendingLanes;0<I;){var M=31-or(I),H=1<<M,Q=S[M];Q===-1?(!(H&f)||H&g)&&(S[M]=qo(H,o)):Q<=o&&(n.expiredLanes|=H),I&=~H}}function Ft(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function En(){var n=Cr;return Cr<<=1,!(Cr&4194240)&&(Cr=64),n}function le(n){for(var o=[],f=0;31>f;f++)o.push(n);return o}function V(n,o,f){n.pendingLanes|=o,o!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,o=31-or(o),n[o]=f}function ge(n,o){var f=n.pendingLanes&~o;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=o,n.mutableReadLanes&=o,n.entangledLanes&=o,o=n.entanglements;var g=n.eventTimes;for(n=n.expirationTimes;0<f;){var S=31-or(f),I=1<<S;o[S]=0,g[S]=-1,n[S]=-1,f&=~I}}function He(n,o){var f=n.entangledLanes|=o;for(n=n.entanglements;f;){var g=31-or(f),S=1<<g;S&o|n[g]&o&&(n[g]|=o),f&=~S}}var Ye=0;function at(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Dt,dn,lt,Qt,ns,Pi=!1,Mi=[],sn=null,Sn=null,_r=null,Vt=new Map,Un=new Map,zn=[],gt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ll(n,o){switch(n){case"focusin":case"focusout":sn=null;break;case"dragenter":case"dragleave":Sn=null;break;case"mouseover":case"mouseout":_r=null;break;case"pointerover":case"pointerout":Vt.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Un.delete(o.pointerId)}}function bt(n,o,f,g,S,I){return n===null||n.nativeEvent!==I?(n={blockedOn:o,domEventName:f,eventSystemFlags:g,nativeEvent:I,targetContainers:[S]},o!==null&&(o=ha(o),o!==null&&dn(o)),n):(n.eventSystemFlags|=g,o=n.targetContainers,S!==null&&o.indexOf(S)===-1&&o.push(S),n)}function Wn(n,o,f,g,S){switch(o){case"focusin":return sn=bt(sn,n,o,f,g,S),!0;case"dragenter":return Sn=bt(Sn,n,o,f,g,S),!0;case"mouseover":return _r=bt(_r,n,o,f,g,S),!0;case"pointerover":var I=S.pointerId;return Vt.set(I,bt(Vt.get(I)||null,n,o,f,g,S)),!0;case"gotpointercapture":return I=S.pointerId,Un.set(I,bt(Un.get(I)||null,n,o,f,g,S)),!0}return!1}function cl(n){var o=Us(n.target);if(o!==null){var f=sr(o);if(f!==null){if(o=f.tag,o===13){if(o=Ti(f),o!==null){n.blockedOn=o,ns(n.priority,function(){lt(f)});return}}else if(o===3&&f.stateNode.current.memoizedState.isDehydrated){n.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}n.blockedOn=null}function rs(n){if(n.blockedOn!==null)return!1;for(var o=n.targetContainers;0<o.length;){var f=mo(n.domEventName,n.eventSystemFlags,o[0],n.nativeEvent);if(f===null){f=n.nativeEvent;var g=new f.constructor(f.type,f);Yt=g,f.target.dispatchEvent(g),Yt=null}else return o=ha(f),o!==null&&dn(o),n.blockedOn=f,!1;o.shift()}return!0}function Qo(n,o,f){rs(n)&&f.delete(o)}function Oi(){Pi=!1,sn!==null&&rs(sn)&&(sn=null),Sn!==null&&rs(Sn)&&(Sn=null),_r!==null&&rs(_r)&&(_r=null),Vt.forEach(Qo),Un.forEach(Qo)}function Ps(n,o){n.blockedOn===o&&(n.blockedOn=null,Pi||(Pi=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Oi)))}function ri(n){function o(S){return Ps(S,n)}if(0<Mi.length){Ps(Mi[0],n);for(var f=1;f<Mi.length;f++){var g=Mi[f];g.blockedOn===n&&(g.blockedOn=null)}}for(sn!==null&&Ps(sn,n),Sn!==null&&Ps(Sn,n),_r!==null&&Ps(_r,n),Vt.forEach(o),Un.forEach(o),f=0;f<zn.length;f++)g=zn[f],g.blockedOn===n&&(g.blockedOn=null);for(;0<zn.length&&(f=zn[0],f.blockedOn===null);)cl(f),f.blockedOn===null&&zn.shift()}var Xr=Y.ReactCurrentBatchConfig,pi=!0;function ul(n,o,f,g){var S=Ye,I=Xr.transition;Xr.transition=null;try{Ye=1,Di(n,o,f,g)}finally{Ye=S,Xr.transition=I}}function Ms(n,o,f,g){var S=Ye,I=Xr.transition;Xr.transition=null;try{Ye=4,Di(n,o,f,g)}finally{Ye=S,Xr.transition=I}}function Di(n,o,f,g){if(pi){var S=mo(n,o,f,g);if(S===null)au(n,o,g,Hn,f),ll(n,g);else if(Wn(S,n,o,f,g))g.stopPropagation();else if(ll(n,g),o&4&&-1<gt.indexOf(n)){for(;S!==null;){var I=ha(S);if(I!==null&&Dt(I),I=mo(n,o,f,g),I===null&&au(n,o,g,Hn,f),I===S)break;S=I}S!==null&&g.stopPropagation()}else au(n,o,g,null,f)}}var Hn=null;function mo(n,o,f,g){if(Hn=null,n=mn(g),n=Us(n),n!==null)if(o=sr(n),o===null)n=null;else if(f=o.tag,f===13){if(n=Ti(o),n!==null)return n;n=null}else if(f===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null);return Hn=n,null}function Jo(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ri()){case Ne:return 1;case Rs:return 4;case Kt:case hi:return 16;case ki:return 536870912;default:return 16}default:return 16}}var ii=null,ea=null,po=null;function dl(){if(po)return po;var n,o=ea,f=o.length,g,S="value"in ii?ii.value:ii.textContent,I=S.length;for(n=0;n<f&&o[n]===S[n];n++);var M=f-n;for(g=1;g<=M&&o[f-g]===S[I-g];g++);return po=S.slice(n,1<g?1-g:void 0)}function Ut(n){var o=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&o===13&&(n=13)):n=o,n===10&&(n=13),32<=n||n===13?n:0}function Os(){return!0}function Ds(){return!1}function An(n){function o(f,g,S,I,M){this._reactName=f,this._targetInst=S,this.type=g,this.nativeEvent=I,this.target=M,this.currentTarget=null;for(var H in n)n.hasOwnProperty(H)&&(f=n[H],this[H]=f?f(I):I[H]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?Os:Ds,this.isPropagationStopped=Ds,this}return Ee(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Os)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Os)},persist:function(){},isPersistent:Os}),o}var is={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},me=An(is),Nt=Ee({},is,{view:0,detail:0}),Gn=An(Nt),ss,go,Ls,xo=Ee({},Nt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:js,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ls&&(Ls&&n.type==="mousemove"?(ss=n.screenX-Ls.screenX,go=n.screenY-Ls.screenY):go=ss=0,Ls=n),ss)},movementY:function(n){return"movementY"in n?n.movementY:go}}),fl=An(xo),ta=Ee({},xo,{dataTransfer:0}),Rn=An(ta),na=Ee({},Nt,{relatedTarget:0}),on=An(na),yo=Ee({},is,{animationName:0,elapsedTime:0,pseudoElement:0}),Li=An(yo),Jt=Ee({},is,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ht=An(Jt),Qc=Ee({},is,{data:0}),nn=An(Qc),ji={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},os={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yr(n){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(n):(n=Jc[n])?!!o[n]:!1}function js(){return Yr}var hl=Ee({},Nt,{key:function(n){if(n.key){var o=ji[n.key]||n.key;if(o!=="Unidentified")return o}return n.type==="keypress"?(n=Ut(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?os[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:js,charCode:function(n){return n.type==="keypress"?Ut(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ut(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ra=An(hl),ml=Ee({},xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ia=An(ml),eu=Ee({},Nt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:js}),as=An(eu),sa=Ee({},is,{propertyName:0,elapsedTime:0,pseudoElement:0}),tu=An(sa),Bs=Ee({},xo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),nu=An(Bs),gi=[9,13,27,32],ls=b&&"CompositionEvent"in window,Jn=null;b&&"documentMode"in document&&(Jn=document.documentMode);var pl=b&&"TextEvent"in window&&!Jn,Vr=b&&(!ls||Jn&&8<Jn&&11>=Jn),gl=" ",wo=!1;function xl(n,o){switch(n){case"keyup":return gi.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oa(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ar=!1;function ru(n,o){switch(n){case"compositionend":return oa(o);case"keypress":return o.which!==32?null:(wo=!0,gl);case"textInput":return n=o.data,n===gl&&wo?null:n;default:return null}}function aa(n,o){if(ar)return n==="compositionend"||!ls&&xl(n,o)?(n=dl(),po=ea=ii=null,ar=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Vr&&o.locale!=="ko"?null:o.data;default:return null}}var Fs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ot(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o==="input"?!!Fs[n.type]:o==="textarea"}function Vs(n,o,f,g){Fr(g),o=vl(o,"onChange"),0<o.length&&(f=new me("onChange","change",null,f,g),n.push({event:f,listeners:o}))}var k=null,e=null;function r(n){Sh(n,0)}function s(n){var o=bo(n);if(de(o))return n}function l(n,o){if(n==="change")return o}var c=!1;if(b){var d;if(b){var p="oninput"in document;if(!p){var y=document.createElement("div");y.setAttribute("oninput","return;"),p=typeof y.oninput=="function"}d=p}else d=!1;c=d&&(!document.documentMode||9<document.documentMode)}function E(){k&&(k.detachEvent("onpropertychange",R),e=k=null)}function R(n){if(n.propertyName==="value"&&s(e)){var o=[];Vs(o,e,n,mn(n)),Dn(r,o)}}function P(n,o,f){n==="focusin"?(E(),k=o,e=f,k.attachEvent("onpropertychange",R)):n==="focusout"&&E()}function D(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return s(e)}function z(n,o){if(n==="click")return s(o)}function Z(n,o){if(n==="input"||n==="change")return s(o)}function ee(n,o){return n===o&&(n!==0||1/n===1/o)||n!==n&&o!==o}var oe=typeof Object.is=="function"?Object.is:ee;function he(n,o){if(oe(n,o))return!0;if(typeof n!="object"||n===null||typeof o!="object"||o===null)return!1;var f=Object.keys(n),g=Object.keys(o);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var S=f[g];if(!v.call(o,S)||!oe(n[S],o[S]))return!1}return!0}function Fe(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ve(n,o){var f=Fe(n);n=0;for(var g;f;){if(f.nodeType===3){if(g=n+f.textContent.length,n<=o&&g>=o)return{node:f,offset:o-n};n=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Fe(f)}}function Pe(n,o){return n&&o?n===o?!0:n&&n.nodeType===3?!1:o&&o.nodeType===3?Pe(n,o.parentNode):"contains"in n?n.contains(o):n.compareDocumentPosition?!!(n.compareDocumentPosition(o)&16):!1:!1}function Rt(){for(var n=window,o=xe();o instanceof n.HTMLIFrameElement;){try{var f=typeof o.contentWindow.location.href=="string"}catch{f=!1}if(f)n=o.contentWindow;else break;o=xe(n.document)}return o}function Et(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o&&(o==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||o==="textarea"||n.contentEditable==="true")}function mr(n){var o=Rt(),f=n.focusedElem,g=n.selectionRange;if(o!==f&&f&&f.ownerDocument&&Pe(f.ownerDocument.documentElement,f)){if(g!==null&&Et(f)){if(o=g.start,n=g.end,n===void 0&&(n=o),"selectionStart"in f)f.selectionStart=o,f.selectionEnd=Math.min(n,f.value.length);else if(n=(o=f.ownerDocument||document)&&o.defaultView||window,n.getSelection){n=n.getSelection();var S=f.textContent.length,I=Math.min(g.start,S);g=g.end===void 0?I:Math.min(g.end,S),!n.extend&&I>g&&(S=g,g=I,I=S),S=Ve(f,I);var M=Ve(f,g);S&&M&&(n.rangeCount!==1||n.anchorNode!==S.node||n.anchorOffset!==S.offset||n.focusNode!==M.node||n.focusOffset!==M.offset)&&(o=o.createRange(),o.setStart(S.node,S.offset),n.removeAllRanges(),I>g?(n.addRange(o),n.extend(M.node,M.offset)):(o.setEnd(M.node,M.offset),n.addRange(o)))}}for(o=[],n=f;n=n.parentNode;)n.nodeType===1&&o.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<o.length;f++)n=o[f],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Ur=b&&"documentMode"in document&&11>=document.documentMode,kn=null,Zt=null,yn=null,lr=!1;function Bi(n,o,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;lr||kn==null||kn!==xe(g)||(g=kn,"selectionStart"in g&&Et(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),yn&&he(yn,g)||(yn=g,g=vl(Zt,"onSelect"),0<g.length&&(o=new me("onSelect","select",null,o,f),n.push({event:o,listeners:g}),o.target=kn)))}function si(n,o){var f={};return f[n.toLowerCase()]=o.toLowerCase(),f["Webkit"+n]="webkit"+o,f["Moz"+n]="moz"+o,f}var cs={animationend:si("Animation","AnimationEnd"),animationiteration:si("Animation","AnimationIteration"),animationstart:si("Animation","AnimationStart"),transitionend:si("Transition","TransitionEnd")},la={},gh={};b&&(gh=document.createElement("div").style,"AnimationEvent"in window||(delete cs.animationend.animation,delete cs.animationiteration.animation,delete cs.animationstart.animation),"TransitionEvent"in window||delete cs.transitionend.transition);function yl(n){if(la[n])return la[n];if(!cs[n])return n;var o=cs[n],f;for(f in o)if(o.hasOwnProperty(f)&&f in gh)return la[n]=o[f];return n}var xh=yl("animationend"),yh=yl("animationiteration"),wh=yl("animationstart"),vh=yl("transitionend"),Ch=new Map,bh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function us(n,o){Ch.set(n,o),x(o,[n])}for(var iu=0;iu<bh.length;iu++){var su=bh[iu],kx=su.toLowerCase(),Px=su[0].toUpperCase()+su.slice(1);us(kx,"on"+Px)}us(xh,"onAnimationEnd"),us(yh,"onAnimationIteration"),us(wh,"onAnimationStart"),us("dblclick","onDoubleClick"),us("focusin","onFocus"),us("focusout","onBlur"),us(vh,"onTransitionEnd"),w("onMouseEnter",["mouseout","mouseover"]),w("onMouseLeave",["mouseout","mouseover"]),w("onPointerEnter",["pointerout","pointerover"]),w("onPointerLeave",["pointerout","pointerover"]),x("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),x("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),x("onBeforeInput",["compositionend","keypress","textInput","paste"]),x("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mx=new Set("cancel close invalid load scroll toggle".split(" ").concat(ca));function Eh(n,o,f){var g=n.type||"unknown-event";n.currentTarget=f,Qn(g,o,void 0,n),n.currentTarget=null}function Sh(n,o){o=(o&4)!==0;for(var f=0;f<n.length;f++){var g=n[f],S=g.event;g=g.listeners;e:{var I=void 0;if(o)for(var M=g.length-1;0<=M;M--){var H=g[M],Q=H.instance,pe=H.currentTarget;if(H=H.listener,Q!==I&&S.isPropagationStopped())break e;Eh(S,H,pe),I=Q}else for(M=0;M<g.length;M++){if(H=g[M],Q=H.instance,pe=H.currentTarget,H=H.listener,Q!==I&&S.isPropagationStopped())break e;Eh(S,H,pe),I=Q}}}if(qn)throw n=Ke,qn=!1,Ke=null,n}function fn(n,o){var f=o[hu];f===void 0&&(f=o[hu]=new Set);var g=n+"__bubble";f.has(g)||(Ah(o,n,2,!1),f.add(g))}function ou(n,o,f){var g=0;o&&(g|=4),Ah(f,n,g,o)}var wl="_reactListening"+Math.random().toString(36).slice(2);function ua(n){if(!n[wl]){n[wl]=!0,u.forEach(function(f){f!=="selectionchange"&&(Mx.has(f)||ou(f,!1,n),ou(f,!0,n))});var o=n.nodeType===9?n:n.ownerDocument;o===null||o[wl]||(o[wl]=!0,ou("selectionchange",!1,o))}}function Ah(n,o,f,g){switch(Jo(o)){case 1:var S=ul;break;case 4:S=Ms;break;default:S=Di}f=S.bind(null,o,f,n),S=void 0,!Ji||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(S=!0),g?S!==void 0?n.addEventListener(o,f,{capture:!0,passive:S}):n.addEventListener(o,f,!0):S!==void 0?n.addEventListener(o,f,{passive:S}):n.addEventListener(o,f,!1)}function au(n,o,f,g,S){var I=g;if(!(o&1)&&!(o&2)&&g!==null)e:for(;;){if(g===null)return;var M=g.tag;if(M===3||M===4){var H=g.stateNode.containerInfo;if(H===S||H.nodeType===8&&H.parentNode===S)break;if(M===4)for(M=g.return;M!==null;){var Q=M.tag;if((Q===3||Q===4)&&(Q=M.stateNode.containerInfo,Q===S||Q.nodeType===8&&Q.parentNode===S))return;M=M.return}for(;H!==null;){if(M=Us(H),M===null)return;if(Q=M.tag,Q===5||Q===6){g=I=M;continue e}H=H.parentNode}}g=g.return}Dn(function(){var pe=I,Oe=mn(f),je=[];e:{var _e=Ch.get(n);if(_e!==void 0){var Qe=me,rt=n;switch(n){case"keypress":if(Ut(f)===0)break e;case"keydown":case"keyup":Qe=ra;break;case"focusin":rt="focus",Qe=on;break;case"focusout":rt="blur",Qe=on;break;case"beforeblur":case"afterblur":Qe=on;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Qe=fl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Qe=Rn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Qe=as;break;case xh:case yh:case wh:Qe=Li;break;case vh:Qe=tu;break;case"scroll":Qe=Gn;break;case"wheel":Qe=nu;break;case"copy":case"cut":case"paste":Qe=ht;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Qe=ia}var st=(o&4)!==0,Pn=!st&&n==="scroll",ue=st?_e!==null?_e+"Capture":null:_e;st=[];for(var re=pe,fe;re!==null;){fe=re;var We=fe.stateNode;if(fe.tag===5&&We!==null&&(fe=We,ue!==null&&(We=Vn(re,ue),We!=null&&st.push(da(re,We,fe)))),Pn)break;re=re.return}0<st.length&&(_e=new Qe(_e,rt,null,f,Oe),je.push({event:_e,listeners:st}))}}if(!(o&7)){e:{if(_e=n==="mouseover"||n==="pointerover",Qe=n==="mouseout"||n==="pointerout",_e&&f!==Yt&&(rt=f.relatedTarget||f.fromElement)&&(Us(rt)||rt[Fi]))break e;if((Qe||_e)&&(_e=Oe.window===Oe?Oe:(_e=Oe.ownerDocument)?_e.defaultView||_e.parentWindow:window,Qe?(rt=f.relatedTarget||f.toElement,Qe=pe,rt=rt?Us(rt):null,rt!==null&&(Pn=sr(rt),rt!==Pn||rt.tag!==5&&rt.tag!==6)&&(rt=null)):(Qe=null,rt=pe),Qe!==rt)){if(st=fl,We="onMouseLeave",ue="onMouseEnter",re="mouse",(n==="pointerout"||n==="pointerover")&&(st=ia,We="onPointerLeave",ue="onPointerEnter",re="pointer"),Pn=Qe==null?_e:bo(Qe),fe=rt==null?_e:bo(rt),_e=new st(We,re+"leave",Qe,f,Oe),_e.target=Pn,_e.relatedTarget=fe,We=null,Us(Oe)===pe&&(st=new st(ue,re+"enter",rt,f,Oe),st.target=fe,st.relatedTarget=Pn,We=st),Pn=We,Qe&&rt)t:{for(st=Qe,ue=rt,re=0,fe=st;fe;fe=vo(fe))re++;for(fe=0,We=ue;We;We=vo(We))fe++;for(;0<re-fe;)st=vo(st),re--;for(;0<fe-re;)ue=vo(ue),fe--;for(;re--;){if(st===ue||ue!==null&&st===ue.alternate)break t;st=vo(st),ue=vo(ue)}st=null}else st=null;Qe!==null&&Nh(je,_e,Qe,st,!1),rt!==null&&Pn!==null&&Nh(je,Pn,rt,st,!0)}}e:{if(_e=pe?bo(pe):window,Qe=_e.nodeName&&_e.nodeName.toLowerCase(),Qe==="select"||Qe==="input"&&_e.type==="file")var ot=l;else if(Ot(_e))if(c)ot=Z;else{ot=D;var mt=P}else(Qe=_e.nodeName)&&Qe.toLowerCase()==="input"&&(_e.type==="checkbox"||_e.type==="radio")&&(ot=z);if(ot&&(ot=ot(n,pe))){Vs(je,ot,f,Oe);break e}mt&&mt(n,_e,pe),n==="focusout"&&(mt=_e._wrapperState)&&mt.controlled&&_e.type==="number"&&tt(_e,"number",_e.value)}switch(mt=pe?bo(pe):window,n){case"focusin":(Ot(mt)||mt.contentEditable==="true")&&(kn=mt,Zt=pe,yn=null);break;case"focusout":yn=Zt=kn=null;break;case"mousedown":lr=!0;break;case"contextmenu":case"mouseup":case"dragend":lr=!1,Bi(je,f,Oe);break;case"selectionchange":if(Ur)break;case"keydown":case"keyup":Bi(je,f,Oe)}var pt;if(ls)e:{switch(n){case"compositionstart":var Ct="onCompositionStart";break e;case"compositionend":Ct="onCompositionEnd";break e;case"compositionupdate":Ct="onCompositionUpdate";break e}Ct=void 0}else ar?xl(n,f)&&(Ct="onCompositionEnd"):n==="keydown"&&f.keyCode===229&&(Ct="onCompositionStart");Ct&&(Vr&&f.locale!=="ko"&&(ar||Ct!=="onCompositionStart"?Ct==="onCompositionEnd"&&ar&&(pt=dl()):(ii=Oe,ea="value"in ii?ii.value:ii.textContent,ar=!0)),mt=vl(pe,Ct),0<mt.length&&(Ct=new nn(Ct,n,null,f,Oe),je.push({event:Ct,listeners:mt}),pt?Ct.data=pt:(pt=oa(f),pt!==null&&(Ct.data=pt)))),(pt=pl?ru(n,f):aa(n,f))&&(pe=vl(pe,"onBeforeInput"),0<pe.length&&(Oe=new nn("onBeforeInput","beforeinput",null,f,Oe),je.push({event:Oe,listeners:pe}),Oe.data=pt))}Sh(je,o)})}function da(n,o,f){return{instance:n,listener:o,currentTarget:f}}function vl(n,o){for(var f=o+"Capture",g=[];n!==null;){var S=n,I=S.stateNode;S.tag===5&&I!==null&&(S=I,I=Vn(n,f),I!=null&&g.unshift(da(n,I,S)),I=Vn(n,o),I!=null&&g.push(da(n,I,S))),n=n.return}return g}function vo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Nh(n,o,f,g,S){for(var I=o._reactName,M=[];f!==null&&f!==g;){var H=f,Q=H.alternate,pe=H.stateNode;if(Q!==null&&Q===g)break;H.tag===5&&pe!==null&&(H=pe,S?(Q=Vn(f,I),Q!=null&&M.unshift(da(f,Q,H))):S||(Q=Vn(f,I),Q!=null&&M.push(da(f,Q,H)))),f=f.return}M.length!==0&&n.push({event:o,listeners:M})}var Ox=/\r\n?/g,Dx=/\u0000|\uFFFD/g;function Ih(n){return(typeof n=="string"?n:""+n).replace(Ox,`
`).replace(Dx,"")}function Cl(n,o,f){if(o=Ih(o),Ih(n)!==o&&f)throw Error(a(425))}function bl(){}var lu=null,cu=null;function uu(n,o){return n==="textarea"||n==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var du=typeof setTimeout=="function"?setTimeout:void 0,Lx=typeof clearTimeout=="function"?clearTimeout:void 0,Th=typeof Promise=="function"?Promise:void 0,jx=typeof queueMicrotask=="function"?queueMicrotask:typeof Th<"u"?function(n){return Th.resolve(null).then(n).catch(Bx)}:du;function Bx(n){setTimeout(function(){throw n})}function fu(n,o){var f=o,g=0;do{var S=f.nextSibling;if(n.removeChild(f),S&&S.nodeType===8)if(f=S.data,f==="/$"){if(g===0){n.removeChild(S),ri(o);return}g--}else f!=="$"&&f!=="$?"&&f!=="$!"||g++;f=S}while(f);ri(o)}function ds(n){for(;n!=null;n=n.nextSibling){var o=n.nodeType;if(o===1||o===3)break;if(o===8){if(o=n.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return n}function _h(n){n=n.previousSibling;for(var o=0;n;){if(n.nodeType===8){var f=n.data;if(f==="$"||f==="$!"||f==="$?"){if(o===0)return n;o--}else f==="/$"&&o++}n=n.previousSibling}return null}var Co=Math.random().toString(36).slice(2),xi="__reactFiber$"+Co,fa="__reactProps$"+Co,Fi="__reactContainer$"+Co,hu="__reactEvents$"+Co,Fx="__reactListeners$"+Co,Vx="__reactHandles$"+Co;function Us(n){var o=n[xi];if(o)return o;for(var f=n.parentNode;f;){if(o=f[Fi]||f[xi]){if(f=o.alternate,o.child!==null||f!==null&&f.child!==null)for(n=_h(n);n!==null;){if(f=n[xi])return f;n=_h(n)}return o}n=f,f=n.parentNode}return null}function ha(n){return n=n[xi]||n[Fi],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function bo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(a(33))}function El(n){return n[fa]||null}var mu=[],Eo=-1;function fs(n){return{current:n}}function hn(n){0>Eo||(n.current=mu[Eo],mu[Eo]=null,Eo--)}function an(n,o){Eo++,mu[Eo]=n.current,n.current=o}var hs={},pr=fs(hs),Rr=fs(!1),zs=hs;function So(n,o){var f=n.type.contextTypes;if(!f)return hs;var g=n.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===o)return g.__reactInternalMemoizedMaskedChildContext;var S={},I;for(I in f)S[I]=o[I];return g&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=o,n.__reactInternalMemoizedMaskedChildContext=S),S}function kr(n){return n=n.childContextTypes,n!=null}function Sl(){hn(Rr),hn(pr)}function Rh(n,o,f){if(pr.current!==hs)throw Error(a(168));an(pr,o),an(Rr,f)}function kh(n,o,f){var g=n.stateNode;if(o=o.childContextTypes,typeof g.getChildContext!="function")return f;g=g.getChildContext();for(var S in g)if(!(S in o))throw Error(a(108,Me(n)||"Unknown",S));return Ee({},f,g)}function Al(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||hs,zs=pr.current,an(pr,n),an(Rr,Rr.current),!0}function Ph(n,o,f){var g=n.stateNode;if(!g)throw Error(a(169));f?(n=kh(n,o,zs),g.__reactInternalMemoizedMergedChildContext=n,hn(Rr),hn(pr),an(pr,n)):hn(Rr),an(Rr,f)}var Vi=null,Nl=!1,pu=!1;function Mh(n){Vi===null?Vi=[n]:Vi.push(n)}function Ux(n){Nl=!0,Mh(n)}function ms(){if(!pu&&Vi!==null){pu=!0;var n=0,o=Ye;try{var f=Vi;for(Ye=1;n<f.length;n++){var g=f[n];do g=g(!0);while(g!==null)}Vi=null,Nl=!1}catch(S){throw Vi!==null&&(Vi=Vi.slice(n+1)),vr(Ne,ms),S}finally{Ye=o,pu=!1}}return null}var Ao=[],No=0,Il=null,Tl=0,$r=[],Zr=0,Ws=null,Ui=1,zi="";function Hs(n,o){Ao[No++]=Tl,Ao[No++]=Il,Il=n,Tl=o}function Oh(n,o,f){$r[Zr++]=Ui,$r[Zr++]=zi,$r[Zr++]=Ws,Ws=n;var g=Ui;n=zi;var S=32-or(g)-1;g&=~(1<<S),f+=1;var I=32-or(o)+S;if(30<I){var M=S-S%5;I=(g&(1<<M)-1).toString(32),g>>=M,S-=M,Ui=1<<32-or(o)+S|f<<S|g,zi=I+n}else Ui=1<<I|f<<S|g,zi=n}function gu(n){n.return!==null&&(Hs(n,1),Oh(n,1,0))}function xu(n){for(;n===Il;)Il=Ao[--No],Ao[No]=null,Tl=Ao[--No],Ao[No]=null;for(;n===Ws;)Ws=$r[--Zr],$r[Zr]=null,zi=$r[--Zr],$r[Zr]=null,Ui=$r[--Zr],$r[Zr]=null}var zr=null,Wr=null,pn=!1,oi=null;function Dh(n,o){var f=Jr(5,null,null,0);f.elementType="DELETED",f.stateNode=o,f.return=n,o=n.deletions,o===null?(n.deletions=[f],n.flags|=16):o.push(f)}function Lh(n,o){switch(n.tag){case 5:var f=n.type;return o=o.nodeType!==1||f.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(n.stateNode=o,zr=n,Wr=ds(o.firstChild),!0):!1;case 6:return o=n.pendingProps===""||o.nodeType!==3?null:o,o!==null?(n.stateNode=o,zr=n,Wr=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(f=Ws!==null?{id:Ui,overflow:zi}:null,n.memoizedState={dehydrated:o,treeContext:f,retryLane:1073741824},f=Jr(18,null,null,0),f.stateNode=o,f.return=n,n.child=f,zr=n,Wr=null,!0):!1;default:return!1}}function yu(n){return(n.mode&1)!==0&&(n.flags&128)===0}function wu(n){if(pn){var o=Wr;if(o){var f=o;if(!Lh(n,o)){if(yu(n))throw Error(a(418));o=ds(f.nextSibling);var g=zr;o&&Lh(n,o)?Dh(g,f):(n.flags=n.flags&-4097|2,pn=!1,zr=n)}}else{if(yu(n))throw Error(a(418));n.flags=n.flags&-4097|2,pn=!1,zr=n}}}function jh(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;zr=n}function _l(n){if(n!==zr)return!1;if(!pn)return jh(n),pn=!0,!1;var o;if((o=n.tag!==3)&&!(o=n.tag!==5)&&(o=n.type,o=o!=="head"&&o!=="body"&&!uu(n.type,n.memoizedProps)),o&&(o=Wr)){if(yu(n))throw Bh(),Error(a(418));for(;o;)Dh(n,o),o=ds(o.nextSibling)}if(jh(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));e:{for(n=n.nextSibling,o=0;n;){if(n.nodeType===8){var f=n.data;if(f==="/$"){if(o===0){Wr=ds(n.nextSibling);break e}o--}else f!=="$"&&f!=="$!"&&f!=="$?"||o++}n=n.nextSibling}Wr=null}}else Wr=zr?ds(n.stateNode.nextSibling):null;return!0}function Bh(){for(var n=Wr;n;)n=ds(n.nextSibling)}function Io(){Wr=zr=null,pn=!1}function vu(n){oi===null?oi=[n]:oi.push(n)}var zx=Y.ReactCurrentBatchConfig;function ma(n,o,f){if(n=f.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(a(309));var g=f.stateNode}if(!g)throw Error(a(147,n));var S=g,I=""+n;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===I?o.ref:(o=function(M){var H=S.refs;M===null?delete H[I]:H[I]=M},o._stringRef=I,o)}if(typeof n!="string")throw Error(a(284));if(!f._owner)throw Error(a(290,n))}return n}function Rl(n,o){throw n=Object.prototype.toString.call(o),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":n))}function Fh(n){var o=n._init;return o(n._payload)}function Vh(n){function o(ue,re){if(n){var fe=ue.deletions;fe===null?(ue.deletions=[re],ue.flags|=16):fe.push(re)}}function f(ue,re){if(!n)return null;for(;re!==null;)o(ue,re),re=re.sibling;return null}function g(ue,re){for(ue=new Map;re!==null;)re.key!==null?ue.set(re.key,re):ue.set(re.index,re),re=re.sibling;return ue}function S(ue,re){return ue=bs(ue,re),ue.index=0,ue.sibling=null,ue}function I(ue,re,fe){return ue.index=fe,n?(fe=ue.alternate,fe!==null?(fe=fe.index,fe<re?(ue.flags|=2,re):fe):(ue.flags|=2,re)):(ue.flags|=1048576,re)}function M(ue){return n&&ue.alternate===null&&(ue.flags|=2),ue}function H(ue,re,fe,We){return re===null||re.tag!==6?(re=dd(fe,ue.mode,We),re.return=ue,re):(re=S(re,fe),re.return=ue,re)}function Q(ue,re,fe,We){var ot=fe.type;return ot===q?Oe(ue,re,fe.props.children,We,fe.key):re!==null&&(re.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===ke&&Fh(ot)===re.type)?(We=S(re,fe.props),We.ref=ma(ue,re,fe),We.return=ue,We):(We=ec(fe.type,fe.key,fe.props,null,ue.mode,We),We.ref=ma(ue,re,fe),We.return=ue,We)}function pe(ue,re,fe,We){return re===null||re.tag!==4||re.stateNode.containerInfo!==fe.containerInfo||re.stateNode.implementation!==fe.implementation?(re=fd(fe,ue.mode,We),re.return=ue,re):(re=S(re,fe.children||[]),re.return=ue,re)}function Oe(ue,re,fe,We,ot){return re===null||re.tag!==7?(re=Qs(fe,ue.mode,We,ot),re.return=ue,re):(re=S(re,fe),re.return=ue,re)}function je(ue,re,fe){if(typeof re=="string"&&re!==""||typeof re=="number")return re=dd(""+re,ue.mode,fe),re.return=ue,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case K:return fe=ec(re.type,re.key,re.props,null,ue.mode,fe),fe.ref=ma(ue,null,re),fe.return=ue,fe;case ne:return re=fd(re,ue.mode,fe),re.return=ue,re;case ke:var We=re._init;return je(ue,We(re._payload),fe)}if(jt(re)||De(re))return re=Qs(re,ue.mode,fe,null),re.return=ue,re;Rl(ue,re)}return null}function _e(ue,re,fe,We){var ot=re!==null?re.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number")return ot!==null?null:H(ue,re,""+fe,We);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case K:return fe.key===ot?Q(ue,re,fe,We):null;case ne:return fe.key===ot?pe(ue,re,fe,We):null;case ke:return ot=fe._init,_e(ue,re,ot(fe._payload),We)}if(jt(fe)||De(fe))return ot!==null?null:Oe(ue,re,fe,We,null);Rl(ue,fe)}return null}function Qe(ue,re,fe,We,ot){if(typeof We=="string"&&We!==""||typeof We=="number")return ue=ue.get(fe)||null,H(re,ue,""+We,ot);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case K:return ue=ue.get(We.key===null?fe:We.key)||null,Q(re,ue,We,ot);case ne:return ue=ue.get(We.key===null?fe:We.key)||null,pe(re,ue,We,ot);case ke:var mt=We._init;return Qe(ue,re,fe,mt(We._payload),ot)}if(jt(We)||De(We))return ue=ue.get(fe)||null,Oe(re,ue,We,ot,null);Rl(re,We)}return null}function rt(ue,re,fe,We){for(var ot=null,mt=null,pt=re,Ct=re=0,nr=null;pt!==null&&Ct<fe.length;Ct++){pt.index>Ct?(nr=pt,pt=null):nr=pt.sibling;var Ht=_e(ue,pt,fe[Ct],We);if(Ht===null){pt===null&&(pt=nr);break}n&&pt&&Ht.alternate===null&&o(ue,pt),re=I(Ht,re,Ct),mt===null?ot=Ht:mt.sibling=Ht,mt=Ht,pt=nr}if(Ct===fe.length)return f(ue,pt),pn&&Hs(ue,Ct),ot;if(pt===null){for(;Ct<fe.length;Ct++)pt=je(ue,fe[Ct],We),pt!==null&&(re=I(pt,re,Ct),mt===null?ot=pt:mt.sibling=pt,mt=pt);return pn&&Hs(ue,Ct),ot}for(pt=g(ue,pt);Ct<fe.length;Ct++)nr=Qe(pt,ue,Ct,fe[Ct],We),nr!==null&&(n&&nr.alternate!==null&&pt.delete(nr.key===null?Ct:nr.key),re=I(nr,re,Ct),mt===null?ot=nr:mt.sibling=nr,mt=nr);return n&&pt.forEach(function(Es){return o(ue,Es)}),pn&&Hs(ue,Ct),ot}function st(ue,re,fe,We){var ot=De(fe);if(typeof ot!="function")throw Error(a(150));if(fe=ot.call(fe),fe==null)throw Error(a(151));for(var mt=ot=null,pt=re,Ct=re=0,nr=null,Ht=fe.next();pt!==null&&!Ht.done;Ct++,Ht=fe.next()){pt.index>Ct?(nr=pt,pt=null):nr=pt.sibling;var Es=_e(ue,pt,Ht.value,We);if(Es===null){pt===null&&(pt=nr);break}n&&pt&&Es.alternate===null&&o(ue,pt),re=I(Es,re,Ct),mt===null?ot=Es:mt.sibling=Es,mt=Es,pt=nr}if(Ht.done)return f(ue,pt),pn&&Hs(ue,Ct),ot;if(pt===null){for(;!Ht.done;Ct++,Ht=fe.next())Ht=je(ue,Ht.value,We),Ht!==null&&(re=I(Ht,re,Ct),mt===null?ot=Ht:mt.sibling=Ht,mt=Ht);return pn&&Hs(ue,Ct),ot}for(pt=g(ue,pt);!Ht.done;Ct++,Ht=fe.next())Ht=Qe(pt,ue,Ct,Ht.value,We),Ht!==null&&(n&&Ht.alternate!==null&&pt.delete(Ht.key===null?Ct:Ht.key),re=I(Ht,re,Ct),mt===null?ot=Ht:mt.sibling=Ht,mt=Ht);return n&&pt.forEach(function(C2){return o(ue,C2)}),pn&&Hs(ue,Ct),ot}function Pn(ue,re,fe,We){if(typeof fe=="object"&&fe!==null&&fe.type===q&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case K:e:{for(var ot=fe.key,mt=re;mt!==null;){if(mt.key===ot){if(ot=fe.type,ot===q){if(mt.tag===7){f(ue,mt.sibling),re=S(mt,fe.props.children),re.return=ue,ue=re;break e}}else if(mt.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===ke&&Fh(ot)===mt.type){f(ue,mt.sibling),re=S(mt,fe.props),re.ref=ma(ue,mt,fe),re.return=ue,ue=re;break e}f(ue,mt);break}else o(ue,mt);mt=mt.sibling}fe.type===q?(re=Qs(fe.props.children,ue.mode,We,fe.key),re.return=ue,ue=re):(We=ec(fe.type,fe.key,fe.props,null,ue.mode,We),We.ref=ma(ue,re,fe),We.return=ue,ue=We)}return M(ue);case ne:e:{for(mt=fe.key;re!==null;){if(re.key===mt)if(re.tag===4&&re.stateNode.containerInfo===fe.containerInfo&&re.stateNode.implementation===fe.implementation){f(ue,re.sibling),re=S(re,fe.children||[]),re.return=ue,ue=re;break e}else{f(ue,re);break}else o(ue,re);re=re.sibling}re=fd(fe,ue.mode,We),re.return=ue,ue=re}return M(ue);case ke:return mt=fe._init,Pn(ue,re,mt(fe._payload),We)}if(jt(fe))return rt(ue,re,fe,We);if(De(fe))return st(ue,re,fe,We);Rl(ue,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"?(fe=""+fe,re!==null&&re.tag===6?(f(ue,re.sibling),re=S(re,fe),re.return=ue,ue=re):(f(ue,re),re=dd(fe,ue.mode,We),re.return=ue,ue=re),M(ue)):f(ue,re)}return Pn}var To=Vh(!0),Uh=Vh(!1),kl=fs(null),Pl=null,_o=null,Cu=null;function bu(){Cu=_o=Pl=null}function Eu(n){var o=kl.current;hn(kl),n._currentValue=o}function Su(n,o,f){for(;n!==null;){var g=n.alternate;if((n.childLanes&o)!==o?(n.childLanes|=o,g!==null&&(g.childLanes|=o)):g!==null&&(g.childLanes&o)!==o&&(g.childLanes|=o),n===f)break;n=n.return}}function Ro(n,o){Pl=n,Cu=_o=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&o&&(Pr=!0),n.firstContext=null)}function Kr(n){var o=n._currentValue;if(Cu!==n)if(n={context:n,memoizedValue:o,next:null},_o===null){if(Pl===null)throw Error(a(308));_o=n,Pl.dependencies={lanes:0,firstContext:n}}else _o=_o.next=n;return o}var Gs=null;function Au(n){Gs===null?Gs=[n]:Gs.push(n)}function zh(n,o,f,g){var S=o.interleaved;return S===null?(f.next=f,Au(o)):(f.next=S.next,S.next=f),o.interleaved=f,Wi(n,g)}function Wi(n,o){n.lanes|=o;var f=n.alternate;for(f!==null&&(f.lanes|=o),f=n,n=n.return;n!==null;)n.childLanes|=o,f=n.alternate,f!==null&&(f.childLanes|=o),f=n,n=n.return;return f.tag===3?f.stateNode:null}var ps=!1;function Nu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wh(n,o){n=n.updateQueue,o.updateQueue===n&&(o.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Hi(n,o){return{eventTime:n,lane:o,tag:0,payload:null,callback:null,next:null}}function gs(n,o,f){var g=n.updateQueue;if(g===null)return null;if(g=g.shared,zt&2){var S=g.pending;return S===null?o.next=o:(o.next=S.next,S.next=o),g.pending=o,Wi(n,f)}return S=g.interleaved,S===null?(o.next=o,Au(g)):(o.next=S.next,S.next=o),g.interleaved=o,Wi(n,f)}function Ml(n,o,f){if(o=o.updateQueue,o!==null&&(o=o.shared,(f&4194240)!==0)){var g=o.lanes;g&=n.pendingLanes,f|=g,o.lanes=f,He(n,f)}}function Hh(n,o){var f=n.updateQueue,g=n.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var S=null,I=null;if(f=f.firstBaseUpdate,f!==null){do{var M={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};I===null?S=I=M:I=I.next=M,f=f.next}while(f!==null);I===null?S=I=o:I=I.next=o}else S=I=o;f={baseState:g.baseState,firstBaseUpdate:S,lastBaseUpdate:I,shared:g.shared,effects:g.effects},n.updateQueue=f;return}n=f.lastBaseUpdate,n===null?f.firstBaseUpdate=o:n.next=o,f.lastBaseUpdate=o}function Ol(n,o,f,g){var S=n.updateQueue;ps=!1;var I=S.firstBaseUpdate,M=S.lastBaseUpdate,H=S.shared.pending;if(H!==null){S.shared.pending=null;var Q=H,pe=Q.next;Q.next=null,M===null?I=pe:M.next=pe,M=Q;var Oe=n.alternate;Oe!==null&&(Oe=Oe.updateQueue,H=Oe.lastBaseUpdate,H!==M&&(H===null?Oe.firstBaseUpdate=pe:H.next=pe,Oe.lastBaseUpdate=Q))}if(I!==null){var je=S.baseState;M=0,Oe=pe=Q=null,H=I;do{var _e=H.lane,Qe=H.eventTime;if((g&_e)===_e){Oe!==null&&(Oe=Oe.next={eventTime:Qe,lane:0,tag:H.tag,payload:H.payload,callback:H.callback,next:null});e:{var rt=n,st=H;switch(_e=o,Qe=f,st.tag){case 1:if(rt=st.payload,typeof rt=="function"){je=rt.call(Qe,je,_e);break e}je=rt;break e;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=st.payload,_e=typeof rt=="function"?rt.call(Qe,je,_e):rt,_e==null)break e;je=Ee({},je,_e);break e;case 2:ps=!0}}H.callback!==null&&H.lane!==0&&(n.flags|=64,_e=S.effects,_e===null?S.effects=[H]:_e.push(H))}else Qe={eventTime:Qe,lane:_e,tag:H.tag,payload:H.payload,callback:H.callback,next:null},Oe===null?(pe=Oe=Qe,Q=je):Oe=Oe.next=Qe,M|=_e;if(H=H.next,H===null){if(H=S.shared.pending,H===null)break;_e=H,H=_e.next,_e.next=null,S.lastBaseUpdate=_e,S.shared.pending=null}}while(!0);if(Oe===null&&(Q=je),S.baseState=Q,S.firstBaseUpdate=pe,S.lastBaseUpdate=Oe,o=S.shared.interleaved,o!==null){S=o;do M|=S.lane,S=S.next;while(S!==o)}else I===null&&(S.shared.lanes=0);$s|=M,n.lanes=M,n.memoizedState=je}}function Gh(n,o,f){if(n=o.effects,o.effects=null,n!==null)for(o=0;o<n.length;o++){var g=n[o],S=g.callback;if(S!==null){if(g.callback=null,g=f,typeof S!="function")throw Error(a(191,S));S.call(g)}}}var pa={},yi=fs(pa),ga=fs(pa),xa=fs(pa);function Xs(n){if(n===pa)throw Error(a(174));return n}function Iu(n,o){switch(an(xa,o),an(ga,n),an(yi,pa),n=o.nodeType,n){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:ct(null,"");break;default:n=n===8?o.parentNode:o,o=n.namespaceURI||null,n=n.tagName,o=ct(o,n)}hn(yi),an(yi,o)}function ko(){hn(yi),hn(ga),hn(xa)}function Xh(n){Xs(xa.current);var o=Xs(yi.current),f=ct(o,n.type);o!==f&&(an(ga,n),an(yi,f))}function Tu(n){ga.current===n&&(hn(yi),hn(ga))}var wn=fs(0);function Dl(n){for(var o=n;o!==null;){if(o.tag===13){var f=o.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var _u=[];function Ru(){for(var n=0;n<_u.length;n++)_u[n]._workInProgressVersionPrimary=null;_u.length=0}var Ll=Y.ReactCurrentDispatcher,ku=Y.ReactCurrentBatchConfig,Ys=0,vn=null,Xn=null,er=null,jl=!1,ya=!1,wa=0,Wx=0;function gr(){throw Error(a(321))}function Pu(n,o){if(o===null)return!1;for(var f=0;f<o.length&&f<n.length;f++)if(!oe(n[f],o[f]))return!1;return!0}function Mu(n,o,f,g,S,I){if(Ys=I,vn=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Ll.current=n===null||n.memoizedState===null?Yx:$x,n=f(g,S),ya){I=0;do{if(ya=!1,wa=0,25<=I)throw Error(a(301));I+=1,er=Xn=null,o.updateQueue=null,Ll.current=Zx,n=f(g,S)}while(ya)}if(Ll.current=Vl,o=Xn!==null&&Xn.next!==null,Ys=0,er=Xn=vn=null,jl=!1,o)throw Error(a(300));return n}function Ou(){var n=wa!==0;return wa=0,n}function wi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return er===null?vn.memoizedState=er=n:er=er.next=n,er}function qr(){if(Xn===null){var n=vn.alternate;n=n!==null?n.memoizedState:null}else n=Xn.next;var o=er===null?vn.memoizedState:er.next;if(o!==null)er=o,Xn=n;else{if(n===null)throw Error(a(310));Xn=n,n={memoizedState:Xn.memoizedState,baseState:Xn.baseState,baseQueue:Xn.baseQueue,queue:Xn.queue,next:null},er===null?vn.memoizedState=er=n:er=er.next=n}return er}function va(n,o){return typeof o=="function"?o(n):o}function Du(n){var o=qr(),f=o.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=n;var g=Xn,S=g.baseQueue,I=f.pending;if(I!==null){if(S!==null){var M=S.next;S.next=I.next,I.next=M}g.baseQueue=S=I,f.pending=null}if(S!==null){I=S.next,g=g.baseState;var H=M=null,Q=null,pe=I;do{var Oe=pe.lane;if((Ys&Oe)===Oe)Q!==null&&(Q=Q.next={lane:0,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),g=pe.hasEagerState?pe.eagerState:n(g,pe.action);else{var je={lane:Oe,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null};Q===null?(H=Q=je,M=g):Q=Q.next=je,vn.lanes|=Oe,$s|=Oe}pe=pe.next}while(pe!==null&&pe!==I);Q===null?M=g:Q.next=H,oe(g,o.memoizedState)||(Pr=!0),o.memoizedState=g,o.baseState=M,o.baseQueue=Q,f.lastRenderedState=g}if(n=f.interleaved,n!==null){S=n;do I=S.lane,vn.lanes|=I,$s|=I,S=S.next;while(S!==n)}else S===null&&(f.lanes=0);return[o.memoizedState,f.dispatch]}function Lu(n){var o=qr(),f=o.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=n;var g=f.dispatch,S=f.pending,I=o.memoizedState;if(S!==null){f.pending=null;var M=S=S.next;do I=n(I,M.action),M=M.next;while(M!==S);oe(I,o.memoizedState)||(Pr=!0),o.memoizedState=I,o.baseQueue===null&&(o.baseState=I),f.lastRenderedState=I}return[I,g]}function Yh(){}function $h(n,o){var f=vn,g=qr(),S=o(),I=!oe(g.memoizedState,S);if(I&&(g.memoizedState=S,Pr=!0),g=g.queue,ju(qh.bind(null,f,g,n),[n]),g.getSnapshot!==o||I||er!==null&&er.memoizedState.tag&1){if(f.flags|=2048,Ca(9,Kh.bind(null,f,g,S,o),void 0,null),tr===null)throw Error(a(349));Ys&30||Zh(f,o,S)}return S}function Zh(n,o,f){n.flags|=16384,n={getSnapshot:o,value:f},o=vn.updateQueue,o===null?(o={lastEffect:null,stores:null},vn.updateQueue=o,o.stores=[n]):(f=o.stores,f===null?o.stores=[n]:f.push(n))}function Kh(n,o,f,g){o.value=f,o.getSnapshot=g,Qh(o)&&Jh(n)}function qh(n,o,f){return f(function(){Qh(o)&&Jh(n)})}function Qh(n){var o=n.getSnapshot;n=n.value;try{var f=o();return!oe(n,f)}catch{return!0}}function Jh(n){var o=Wi(n,1);o!==null&&ui(o,n,1,-1)}function e0(n){var o=wi();return typeof n=="function"&&(n=n()),o.memoizedState=o.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:n},o.queue=n,n=n.dispatch=Xx.bind(null,vn,n),[o.memoizedState,n]}function Ca(n,o,f,g){return n={tag:n,create:o,destroy:f,deps:g,next:null},o=vn.updateQueue,o===null?(o={lastEffect:null,stores:null},vn.updateQueue=o,o.lastEffect=n.next=n):(f=o.lastEffect,f===null?o.lastEffect=n.next=n:(g=f.next,f.next=n,n.next=g,o.lastEffect=n)),n}function t0(){return qr().memoizedState}function Bl(n,o,f,g){var S=wi();vn.flags|=n,S.memoizedState=Ca(1|o,f,void 0,g===void 0?null:g)}function Fl(n,o,f,g){var S=qr();g=g===void 0?null:g;var I=void 0;if(Xn!==null){var M=Xn.memoizedState;if(I=M.destroy,g!==null&&Pu(g,M.deps)){S.memoizedState=Ca(o,f,I,g);return}}vn.flags|=n,S.memoizedState=Ca(1|o,f,I,g)}function n0(n,o){return Bl(8390656,8,n,o)}function ju(n,o){return Fl(2048,8,n,o)}function r0(n,o){return Fl(4,2,n,o)}function i0(n,o){return Fl(4,4,n,o)}function s0(n,o){if(typeof o=="function")return n=n(),o(n),function(){o(null)};if(o!=null)return n=n(),o.current=n,function(){o.current=null}}function o0(n,o,f){return f=f!=null?f.concat([n]):null,Fl(4,4,s0.bind(null,o,n),f)}function Bu(){}function a0(n,o){var f=qr();o=o===void 0?null:o;var g=f.memoizedState;return g!==null&&o!==null&&Pu(o,g[1])?g[0]:(f.memoizedState=[n,o],n)}function l0(n,o){var f=qr();o=o===void 0?null:o;var g=f.memoizedState;return g!==null&&o!==null&&Pu(o,g[1])?g[0]:(n=n(),f.memoizedState=[n,o],n)}function c0(n,o,f){return Ys&21?(oe(f,o)||(f=En(),vn.lanes|=f,$s|=f,n.baseState=!0),o):(n.baseState&&(n.baseState=!1,Pr=!0),n.memoizedState=f)}function Hx(n,o){var f=Ye;Ye=f!==0&&4>f?f:4,n(!0);var g=ku.transition;ku.transition={};try{n(!1),o()}finally{Ye=f,ku.transition=g}}function u0(){return qr().memoizedState}function Gx(n,o,f){var g=vs(n);if(f={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null},d0(n))f0(o,f);else if(f=zh(n,o,f,g),f!==null){var S=Er();ui(f,n,g,S),h0(f,o,g)}}function Xx(n,o,f){var g=vs(n),S={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null};if(d0(n))f0(o,S);else{var I=n.alternate;if(n.lanes===0&&(I===null||I.lanes===0)&&(I=o.lastRenderedReducer,I!==null))try{var M=o.lastRenderedState,H=I(M,f);if(S.hasEagerState=!0,S.eagerState=H,oe(H,M)){var Q=o.interleaved;Q===null?(S.next=S,Au(o)):(S.next=Q.next,Q.next=S),o.interleaved=S;return}}catch{}finally{}f=zh(n,o,S,g),f!==null&&(S=Er(),ui(f,n,g,S),h0(f,o,g))}}function d0(n){var o=n.alternate;return n===vn||o!==null&&o===vn}function f0(n,o){ya=jl=!0;var f=n.pending;f===null?o.next=o:(o.next=f.next,f.next=o),n.pending=o}function h0(n,o,f){if(f&4194240){var g=o.lanes;g&=n.pendingLanes,f|=g,o.lanes=f,He(n,f)}}var Vl={readContext:Kr,useCallback:gr,useContext:gr,useEffect:gr,useImperativeHandle:gr,useInsertionEffect:gr,useLayoutEffect:gr,useMemo:gr,useReducer:gr,useRef:gr,useState:gr,useDebugValue:gr,useDeferredValue:gr,useTransition:gr,useMutableSource:gr,useSyncExternalStore:gr,useId:gr,unstable_isNewReconciler:!1},Yx={readContext:Kr,useCallback:function(n,o){return wi().memoizedState=[n,o===void 0?null:o],n},useContext:Kr,useEffect:n0,useImperativeHandle:function(n,o,f){return f=f!=null?f.concat([n]):null,Bl(4194308,4,s0.bind(null,o,n),f)},useLayoutEffect:function(n,o){return Bl(4194308,4,n,o)},useInsertionEffect:function(n,o){return Bl(4,2,n,o)},useMemo:function(n,o){var f=wi();return o=o===void 0?null:o,n=n(),f.memoizedState=[n,o],n},useReducer:function(n,o,f){var g=wi();return o=f!==void 0?f(o):o,g.memoizedState=g.baseState=o,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:o},g.queue=n,n=n.dispatch=Gx.bind(null,vn,n),[g.memoizedState,n]},useRef:function(n){var o=wi();return n={current:n},o.memoizedState=n},useState:e0,useDebugValue:Bu,useDeferredValue:function(n){return wi().memoizedState=n},useTransition:function(){var n=e0(!1),o=n[0];return n=Hx.bind(null,n[1]),wi().memoizedState=n,[o,n]},useMutableSource:function(){},useSyncExternalStore:function(n,o,f){var g=vn,S=wi();if(pn){if(f===void 0)throw Error(a(407));f=f()}else{if(f=o(),tr===null)throw Error(a(349));Ys&30||Zh(g,o,f)}S.memoizedState=f;var I={value:f,getSnapshot:o};return S.queue=I,n0(qh.bind(null,g,I,n),[n]),g.flags|=2048,Ca(9,Kh.bind(null,g,I,f,o),void 0,null),f},useId:function(){var n=wi(),o=tr.identifierPrefix;if(pn){var f=zi,g=Ui;f=(g&~(1<<32-or(g)-1)).toString(32)+f,o=":"+o+"R"+f,f=wa++,0<f&&(o+="H"+f.toString(32)),o+=":"}else f=Wx++,o=":"+o+"r"+f.toString(32)+":";return n.memoizedState=o},unstable_isNewReconciler:!1},$x={readContext:Kr,useCallback:a0,useContext:Kr,useEffect:ju,useImperativeHandle:o0,useInsertionEffect:r0,useLayoutEffect:i0,useMemo:l0,useReducer:Du,useRef:t0,useState:function(){return Du(va)},useDebugValue:Bu,useDeferredValue:function(n){var o=qr();return c0(o,Xn.memoizedState,n)},useTransition:function(){var n=Du(va)[0],o=qr().memoizedState;return[n,o]},useMutableSource:Yh,useSyncExternalStore:$h,useId:u0,unstable_isNewReconciler:!1},Zx={readContext:Kr,useCallback:a0,useContext:Kr,useEffect:ju,useImperativeHandle:o0,useInsertionEffect:r0,useLayoutEffect:i0,useMemo:l0,useReducer:Lu,useRef:t0,useState:function(){return Lu(va)},useDebugValue:Bu,useDeferredValue:function(n){var o=qr();return Xn===null?o.memoizedState=n:c0(o,Xn.memoizedState,n)},useTransition:function(){var n=Lu(va)[0],o=qr().memoizedState;return[n,o]},useMutableSource:Yh,useSyncExternalStore:$h,useId:u0,unstable_isNewReconciler:!1};function ai(n,o){if(n&&n.defaultProps){o=Ee({},o),n=n.defaultProps;for(var f in n)o[f]===void 0&&(o[f]=n[f]);return o}return o}function Fu(n,o,f,g){o=n.memoizedState,f=f(g,o),f=f==null?o:Ee({},o,f),n.memoizedState=f,n.lanes===0&&(n.updateQueue.baseState=f)}var Ul={isMounted:function(n){return(n=n._reactInternals)?sr(n)===n:!1},enqueueSetState:function(n,o,f){n=n._reactInternals;var g=Er(),S=vs(n),I=Hi(g,S);I.payload=o,f!=null&&(I.callback=f),o=gs(n,I,S),o!==null&&(ui(o,n,S,g),Ml(o,n,S))},enqueueReplaceState:function(n,o,f){n=n._reactInternals;var g=Er(),S=vs(n),I=Hi(g,S);I.tag=1,I.payload=o,f!=null&&(I.callback=f),o=gs(n,I,S),o!==null&&(ui(o,n,S,g),Ml(o,n,S))},enqueueForceUpdate:function(n,o){n=n._reactInternals;var f=Er(),g=vs(n),S=Hi(f,g);S.tag=2,o!=null&&(S.callback=o),o=gs(n,S,g),o!==null&&(ui(o,n,g,f),Ml(o,n,g))}};function m0(n,o,f,g,S,I,M){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(g,I,M):o.prototype&&o.prototype.isPureReactComponent?!he(f,g)||!he(S,I):!0}function p0(n,o,f){var g=!1,S=hs,I=o.contextType;return typeof I=="object"&&I!==null?I=Kr(I):(S=kr(o)?zs:pr.current,g=o.contextTypes,I=(g=g!=null)?So(n,S):hs),o=new o(f,I),n.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Ul,n.stateNode=o,o._reactInternals=n,g&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=S,n.__reactInternalMemoizedMaskedChildContext=I),o}function g0(n,o,f,g){n=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(f,g),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(f,g),o.state!==n&&Ul.enqueueReplaceState(o,o.state,null)}function Vu(n,o,f,g){var S=n.stateNode;S.props=f,S.state=n.memoizedState,S.refs={},Nu(n);var I=o.contextType;typeof I=="object"&&I!==null?S.context=Kr(I):(I=kr(o)?zs:pr.current,S.context=So(n,I)),S.state=n.memoizedState,I=o.getDerivedStateFromProps,typeof I=="function"&&(Fu(n,o,I,f),S.state=n.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(o=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),o!==S.state&&Ul.enqueueReplaceState(S,S.state,null),Ol(n,f,S,g),S.state=n.memoizedState),typeof S.componentDidMount=="function"&&(n.flags|=4194308)}function Po(n,o){try{var f="",g=o;do f+=se(g),g=g.return;while(g);var S=f}catch(I){S=`
Error generating stack: `+I.message+`
`+I.stack}return{value:n,source:o,stack:S,digest:null}}function Uu(n,o,f){return{value:n,source:null,stack:f??null,digest:o??null}}function zu(n,o){try{console.error(o.value)}catch(f){setTimeout(function(){throw f})}}var Kx=typeof WeakMap=="function"?WeakMap:Map;function x0(n,o,f){f=Hi(-1,f),f.tag=3,f.payload={element:null};var g=o.value;return f.callback=function(){$l||($l=!0,rd=g),zu(n,o)},f}function y0(n,o,f){f=Hi(-1,f),f.tag=3;var g=n.type.getDerivedStateFromError;if(typeof g=="function"){var S=o.value;f.payload=function(){return g(S)},f.callback=function(){zu(n,o)}}var I=n.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(f.callback=function(){zu(n,o),typeof g!="function"&&(ys===null?ys=new Set([this]):ys.add(this));var M=o.stack;this.componentDidCatch(o.value,{componentStack:M!==null?M:""})}),f}function w0(n,o,f){var g=n.pingCache;if(g===null){g=n.pingCache=new Kx;var S=new Set;g.set(o,S)}else S=g.get(o),S===void 0&&(S=new Set,g.set(o,S));S.has(f)||(S.add(f),n=u2.bind(null,n,o,f),o.then(n,n))}function v0(n){do{var o;if((o=n.tag===13)&&(o=n.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return n;n=n.return}while(n!==null);return null}function C0(n,o,f,g,S){return n.mode&1?(n.flags|=65536,n.lanes=S,n):(n===o?n.flags|=65536:(n.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(o=Hi(-1,1),o.tag=2,gs(f,o,1))),f.lanes|=1),n)}var qx=Y.ReactCurrentOwner,Pr=!1;function br(n,o,f,g){o.child=n===null?Uh(o,null,f,g):To(o,n.child,f,g)}function b0(n,o,f,g,S){f=f.render;var I=o.ref;return Ro(o,S),g=Mu(n,o,f,g,I,S),f=Ou(),n!==null&&!Pr?(o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~S,Gi(n,o,S)):(pn&&f&&gu(o),o.flags|=1,br(n,o,g,S),o.child)}function E0(n,o,f,g,S){if(n===null){var I=f.type;return typeof I=="function"&&!ud(I)&&I.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(o.tag=15,o.type=I,S0(n,o,I,g,S)):(n=ec(f.type,null,g,o,o.mode,S),n.ref=o.ref,n.return=o,o.child=n)}if(I=n.child,!(n.lanes&S)){var M=I.memoizedProps;if(f=f.compare,f=f!==null?f:he,f(M,g)&&n.ref===o.ref)return Gi(n,o,S)}return o.flags|=1,n=bs(I,g),n.ref=o.ref,n.return=o,o.child=n}function S0(n,o,f,g,S){if(n!==null){var I=n.memoizedProps;if(he(I,g)&&n.ref===o.ref)if(Pr=!1,o.pendingProps=g=I,(n.lanes&S)!==0)n.flags&131072&&(Pr=!0);else return o.lanes=n.lanes,Gi(n,o,S)}return Wu(n,o,f,g,S)}function A0(n,o,f){var g=o.pendingProps,S=g.children,I=n!==null?n.memoizedState:null;if(g.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},an(Oo,Hr),Hr|=f;else{if(!(f&1073741824))return n=I!==null?I.baseLanes|f:f,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:n,cachePool:null,transitions:null},o.updateQueue=null,an(Oo,Hr),Hr|=n,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=I!==null?I.baseLanes:f,an(Oo,Hr),Hr|=g}else I!==null?(g=I.baseLanes|f,o.memoizedState=null):g=f,an(Oo,Hr),Hr|=g;return br(n,o,S,f),o.child}function N0(n,o){var f=o.ref;(n===null&&f!==null||n!==null&&n.ref!==f)&&(o.flags|=512,o.flags|=2097152)}function Wu(n,o,f,g,S){var I=kr(f)?zs:pr.current;return I=So(o,I),Ro(o,S),f=Mu(n,o,f,g,I,S),g=Ou(),n!==null&&!Pr?(o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~S,Gi(n,o,S)):(pn&&g&&gu(o),o.flags|=1,br(n,o,f,S),o.child)}function I0(n,o,f,g,S){if(kr(f)){var I=!0;Al(o)}else I=!1;if(Ro(o,S),o.stateNode===null)Wl(n,o),p0(o,f,g),Vu(o,f,g,S),g=!0;else if(n===null){var M=o.stateNode,H=o.memoizedProps;M.props=H;var Q=M.context,pe=f.contextType;typeof pe=="object"&&pe!==null?pe=Kr(pe):(pe=kr(f)?zs:pr.current,pe=So(o,pe));var Oe=f.getDerivedStateFromProps,je=typeof Oe=="function"||typeof M.getSnapshotBeforeUpdate=="function";je||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(H!==g||Q!==pe)&&g0(o,M,g,pe),ps=!1;var _e=o.memoizedState;M.state=_e,Ol(o,g,M,S),Q=o.memoizedState,H!==g||_e!==Q||Rr.current||ps?(typeof Oe=="function"&&(Fu(o,f,Oe,g),Q=o.memoizedState),(H=ps||m0(o,f,H,g,_e,Q,pe))?(je||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(o.flags|=4194308)):(typeof M.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=g,o.memoizedState=Q),M.props=g,M.state=Q,M.context=pe,g=H):(typeof M.componentDidMount=="function"&&(o.flags|=4194308),g=!1)}else{M=o.stateNode,Wh(n,o),H=o.memoizedProps,pe=o.type===o.elementType?H:ai(o.type,H),M.props=pe,je=o.pendingProps,_e=M.context,Q=f.contextType,typeof Q=="object"&&Q!==null?Q=Kr(Q):(Q=kr(f)?zs:pr.current,Q=So(o,Q));var Qe=f.getDerivedStateFromProps;(Oe=typeof Qe=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(H!==je||_e!==Q)&&g0(o,M,g,Q),ps=!1,_e=o.memoizedState,M.state=_e,Ol(o,g,M,S);var rt=o.memoizedState;H!==je||_e!==rt||Rr.current||ps?(typeof Qe=="function"&&(Fu(o,f,Qe,g),rt=o.memoizedState),(pe=ps||m0(o,f,pe,g,_e,rt,Q)||!1)?(Oe||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(g,rt,Q),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(g,rt,Q)),typeof M.componentDidUpdate=="function"&&(o.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof M.componentDidUpdate!="function"||H===n.memoizedProps&&_e===n.memoizedState||(o.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||H===n.memoizedProps&&_e===n.memoizedState||(o.flags|=1024),o.memoizedProps=g,o.memoizedState=rt),M.props=g,M.state=rt,M.context=Q,g=pe):(typeof M.componentDidUpdate!="function"||H===n.memoizedProps&&_e===n.memoizedState||(o.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||H===n.memoizedProps&&_e===n.memoizedState||(o.flags|=1024),g=!1)}return Hu(n,o,f,g,I,S)}function Hu(n,o,f,g,S,I){N0(n,o);var M=(o.flags&128)!==0;if(!g&&!M)return S&&Ph(o,f,!1),Gi(n,o,I);g=o.stateNode,qx.current=o;var H=M&&typeof f.getDerivedStateFromError!="function"?null:g.render();return o.flags|=1,n!==null&&M?(o.child=To(o,n.child,null,I),o.child=To(o,null,H,I)):br(n,o,H,I),o.memoizedState=g.state,S&&Ph(o,f,!0),o.child}function T0(n){var o=n.stateNode;o.pendingContext?Rh(n,o.pendingContext,o.pendingContext!==o.context):o.context&&Rh(n,o.context,!1),Iu(n,o.containerInfo)}function _0(n,o,f,g,S){return Io(),vu(S),o.flags|=256,br(n,o,f,g),o.child}var Gu={dehydrated:null,treeContext:null,retryLane:0};function Xu(n){return{baseLanes:n,cachePool:null,transitions:null}}function R0(n,o,f){var g=o.pendingProps,S=wn.current,I=!1,M=(o.flags&128)!==0,H;if((H=M)||(H=n!==null&&n.memoizedState===null?!1:(S&2)!==0),H?(I=!0,o.flags&=-129):(n===null||n.memoizedState!==null)&&(S|=1),an(wn,S&1),n===null)return wu(o),n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(o.mode&1?n.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(M=g.children,n=g.fallback,I?(g=o.mode,I=o.child,M={mode:"hidden",children:M},!(g&1)&&I!==null?(I.childLanes=0,I.pendingProps=M):I=tc(M,g,0,null),n=Qs(n,g,f,null),I.return=o,n.return=o,I.sibling=n,o.child=I,o.child.memoizedState=Xu(f),o.memoizedState=Gu,n):Yu(o,M));if(S=n.memoizedState,S!==null&&(H=S.dehydrated,H!==null))return Qx(n,o,M,g,H,S,f);if(I){I=g.fallback,M=o.mode,S=n.child,H=S.sibling;var Q={mode:"hidden",children:g.children};return!(M&1)&&o.child!==S?(g=o.child,g.childLanes=0,g.pendingProps=Q,o.deletions=null):(g=bs(S,Q),g.subtreeFlags=S.subtreeFlags&14680064),H!==null?I=bs(H,I):(I=Qs(I,M,f,null),I.flags|=2),I.return=o,g.return=o,g.sibling=I,o.child=g,g=I,I=o.child,M=n.child.memoizedState,M=M===null?Xu(f):{baseLanes:M.baseLanes|f,cachePool:null,transitions:M.transitions},I.memoizedState=M,I.childLanes=n.childLanes&~f,o.memoizedState=Gu,g}return I=n.child,n=I.sibling,g=bs(I,{mode:"visible",children:g.children}),!(o.mode&1)&&(g.lanes=f),g.return=o,g.sibling=null,n!==null&&(f=o.deletions,f===null?(o.deletions=[n],o.flags|=16):f.push(n)),o.child=g,o.memoizedState=null,g}function Yu(n,o){return o=tc({mode:"visible",children:o},n.mode,0,null),o.return=n,n.child=o}function zl(n,o,f,g){return g!==null&&vu(g),To(o,n.child,null,f),n=Yu(o,o.pendingProps.children),n.flags|=2,o.memoizedState=null,n}function Qx(n,o,f,g,S,I,M){if(f)return o.flags&256?(o.flags&=-257,g=Uu(Error(a(422))),zl(n,o,M,g)):o.memoizedState!==null?(o.child=n.child,o.flags|=128,null):(I=g.fallback,S=o.mode,g=tc({mode:"visible",children:g.children},S,0,null),I=Qs(I,S,M,null),I.flags|=2,g.return=o,I.return=o,g.sibling=I,o.child=g,o.mode&1&&To(o,n.child,null,M),o.child.memoizedState=Xu(M),o.memoizedState=Gu,I);if(!(o.mode&1))return zl(n,o,M,null);if(S.data==="$!"){if(g=S.nextSibling&&S.nextSibling.dataset,g)var H=g.dgst;return g=H,I=Error(a(419)),g=Uu(I,g,void 0),zl(n,o,M,g)}if(H=(M&n.childLanes)!==0,Pr||H){if(g=tr,g!==null){switch(M&-M){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=S&(g.suspendedLanes|M)?0:S,S!==0&&S!==I.retryLane&&(I.retryLane=S,Wi(n,S),ui(g,n,S,-1))}return cd(),g=Uu(Error(a(421))),zl(n,o,M,g)}return S.data==="$?"?(o.flags|=128,o.child=n.child,o=d2.bind(null,n),S._reactRetry=o,null):(n=I.treeContext,Wr=ds(S.nextSibling),zr=o,pn=!0,oi=null,n!==null&&($r[Zr++]=Ui,$r[Zr++]=zi,$r[Zr++]=Ws,Ui=n.id,zi=n.overflow,Ws=o),o=Yu(o,g.children),o.flags|=4096,o)}function k0(n,o,f){n.lanes|=o;var g=n.alternate;g!==null&&(g.lanes|=o),Su(n.return,o,f)}function $u(n,o,f,g,S){var I=n.memoizedState;I===null?n.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:S}:(I.isBackwards=o,I.rendering=null,I.renderingStartTime=0,I.last=g,I.tail=f,I.tailMode=S)}function P0(n,o,f){var g=o.pendingProps,S=g.revealOrder,I=g.tail;if(br(n,o,g.children,f),g=wn.current,g&2)g=g&1|2,o.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=o.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&k0(n,f,o);else if(n.tag===19)k0(n,f,o);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===o)break e;for(;n.sibling===null;){if(n.return===null||n.return===o)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}g&=1}if(an(wn,g),!(o.mode&1))o.memoizedState=null;else switch(S){case"forwards":for(f=o.child,S=null;f!==null;)n=f.alternate,n!==null&&Dl(n)===null&&(S=f),f=f.sibling;f=S,f===null?(S=o.child,o.child=null):(S=f.sibling,f.sibling=null),$u(o,!1,S,f,I);break;case"backwards":for(f=null,S=o.child,o.child=null;S!==null;){if(n=S.alternate,n!==null&&Dl(n)===null){o.child=S;break}n=S.sibling,S.sibling=f,f=S,S=n}$u(o,!0,f,null,I);break;case"together":$u(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Wl(n,o){!(o.mode&1)&&n!==null&&(n.alternate=null,o.alternate=null,o.flags|=2)}function Gi(n,o,f){if(n!==null&&(o.dependencies=n.dependencies),$s|=o.lanes,!(f&o.childLanes))return null;if(n!==null&&o.child!==n.child)throw Error(a(153));if(o.child!==null){for(n=o.child,f=bs(n,n.pendingProps),o.child=f,f.return=o;n.sibling!==null;)n=n.sibling,f=f.sibling=bs(n,n.pendingProps),f.return=o;f.sibling=null}return o.child}function Jx(n,o,f){switch(o.tag){case 3:T0(o),Io();break;case 5:Xh(o);break;case 1:kr(o.type)&&Al(o);break;case 4:Iu(o,o.stateNode.containerInfo);break;case 10:var g=o.type._context,S=o.memoizedProps.value;an(kl,g._currentValue),g._currentValue=S;break;case 13:if(g=o.memoizedState,g!==null)return g.dehydrated!==null?(an(wn,wn.current&1),o.flags|=128,null):f&o.child.childLanes?R0(n,o,f):(an(wn,wn.current&1),n=Gi(n,o,f),n!==null?n.sibling:null);an(wn,wn.current&1);break;case 19:if(g=(f&o.childLanes)!==0,n.flags&128){if(g)return P0(n,o,f);o.flags|=128}if(S=o.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),an(wn,wn.current),g)break;return null;case 22:case 23:return o.lanes=0,A0(n,o,f)}return Gi(n,o,f)}var M0,Zu,O0,D0;M0=function(n,o){for(var f=o.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===o)break;for(;f.sibling===null;){if(f.return===null||f.return===o)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},Zu=function(){},O0=function(n,o,f,g){var S=n.memoizedProps;if(S!==g){n=o.stateNode,Xs(yi.current);var I=null;switch(f){case"input":S=$e(n,S),g=$e(n,g),I=[];break;case"select":S=Ee({},S,{value:void 0}),g=Ee({},g,{value:void 0}),I=[];break;case"textarea":S=gn(n,S),g=gn(n,g),I=[];break;default:typeof S.onClick!="function"&&typeof g.onClick=="function"&&(n.onclick=bl)}ut(f,g);var M;f=null;for(pe in S)if(!g.hasOwnProperty(pe)&&S.hasOwnProperty(pe)&&S[pe]!=null)if(pe==="style"){var H=S[pe];for(M in H)H.hasOwnProperty(M)&&(f||(f={}),f[M]="")}else pe!=="dangerouslySetInnerHTML"&&pe!=="children"&&pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&pe!=="autoFocus"&&(m.hasOwnProperty(pe)?I||(I=[]):(I=I||[]).push(pe,null));for(pe in g){var Q=g[pe];if(H=S!=null?S[pe]:void 0,g.hasOwnProperty(pe)&&Q!==H&&(Q!=null||H!=null))if(pe==="style")if(H){for(M in H)!H.hasOwnProperty(M)||Q&&Q.hasOwnProperty(M)||(f||(f={}),f[M]="");for(M in Q)Q.hasOwnProperty(M)&&H[M]!==Q[M]&&(f||(f={}),f[M]=Q[M])}else f||(I||(I=[]),I.push(pe,f)),f=Q;else pe==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,H=H?H.__html:void 0,Q!=null&&H!==Q&&(I=I||[]).push(pe,Q)):pe==="children"?typeof Q!="string"&&typeof Q!="number"||(I=I||[]).push(pe,""+Q):pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&(m.hasOwnProperty(pe)?(Q!=null&&pe==="onScroll"&&fn("scroll",n),I||H===Q||(I=[])):(I=I||[]).push(pe,Q))}f&&(I=I||[]).push("style",f);var pe=I;(o.updateQueue=pe)&&(o.flags|=4)}},D0=function(n,o,f,g){f!==g&&(o.flags|=4)};function ba(n,o){if(!pn)switch(n.tailMode){case"hidden":o=n.tail;for(var f=null;o!==null;)o.alternate!==null&&(f=o),o=o.sibling;f===null?n.tail=null:f.sibling=null;break;case"collapsed":f=n.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?o||n.tail===null?n.tail=null:n.tail.sibling=null:g.sibling=null}}function xr(n){var o=n.alternate!==null&&n.alternate.child===n.child,f=0,g=0;if(o)for(var S=n.child;S!==null;)f|=S.lanes|S.childLanes,g|=S.subtreeFlags&14680064,g|=S.flags&14680064,S.return=n,S=S.sibling;else for(S=n.child;S!==null;)f|=S.lanes|S.childLanes,g|=S.subtreeFlags,g|=S.flags,S.return=n,S=S.sibling;return n.subtreeFlags|=g,n.childLanes=f,o}function e2(n,o,f){var g=o.pendingProps;switch(xu(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xr(o),null;case 1:return kr(o.type)&&Sl(),xr(o),null;case 3:return g=o.stateNode,ko(),hn(Rr),hn(pr),Ru(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(n===null||n.child===null)&&(_l(o)?o.flags|=4:n===null||n.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,oi!==null&&(od(oi),oi=null))),Zu(n,o),xr(o),null;case 5:Tu(o);var S=Xs(xa.current);if(f=o.type,n!==null&&o.stateNode!=null)O0(n,o,f,g,S),n.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!g){if(o.stateNode===null)throw Error(a(166));return xr(o),null}if(n=Xs(yi.current),_l(o)){g=o.stateNode,f=o.type;var I=o.memoizedProps;switch(g[xi]=o,g[fa]=I,n=(o.mode&1)!==0,f){case"dialog":fn("cancel",g),fn("close",g);break;case"iframe":case"object":case"embed":fn("load",g);break;case"video":case"audio":for(S=0;S<ca.length;S++)fn(ca[S],g);break;case"source":fn("error",g);break;case"img":case"image":case"link":fn("error",g),fn("load",g);break;case"details":fn("toggle",g);break;case"input":Ze(g,I),fn("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!I.multiple},fn("invalid",g);break;case"textarea":ir(g,I),fn("invalid",g)}ut(f,I),S=null;for(var M in I)if(I.hasOwnProperty(M)){var H=I[M];M==="children"?typeof H=="string"?g.textContent!==H&&(I.suppressHydrationWarning!==!0&&Cl(g.textContent,H,n),S=["children",H]):typeof H=="number"&&g.textContent!==""+H&&(I.suppressHydrationWarning!==!0&&Cl(g.textContent,H,n),S=["children",""+H]):m.hasOwnProperty(M)&&H!=null&&M==="onScroll"&&fn("scroll",g)}switch(f){case"input":Xe(g),qe(g,I,!0);break;case"textarea":Xe(g),Tt(g);break;case"select":case"option":break;default:typeof I.onClick=="function"&&(g.onclick=bl)}g=S,o.updateQueue=g,g!==null&&(o.flags|=4)}else{M=S.nodeType===9?S:S.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ze(f)),n==="http://www.w3.org/1999/xhtml"?f==="script"?(n=M.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof g.is=="string"?n=M.createElement(f,{is:g.is}):(n=M.createElement(f),f==="select"&&(M=n,g.multiple?M.multiple=!0:g.size&&(M.size=g.size))):n=M.createElementNS(n,f),n[xi]=o,n[fa]=g,M0(n,o,!1,!1),o.stateNode=n;e:{switch(M=xt(f,g),f){case"dialog":fn("cancel",n),fn("close",n),S=g;break;case"iframe":case"object":case"embed":fn("load",n),S=g;break;case"video":case"audio":for(S=0;S<ca.length;S++)fn(ca[S],n);S=g;break;case"source":fn("error",n),S=g;break;case"img":case"image":case"link":fn("error",n),fn("load",n),S=g;break;case"details":fn("toggle",n),S=g;break;case"input":Ze(n,g),S=$e(n,g),fn("invalid",n);break;case"option":S=g;break;case"select":n._wrapperState={wasMultiple:!!g.multiple},S=Ee({},g,{value:void 0}),fn("invalid",n);break;case"textarea":ir(n,g),S=gn(n,g),fn("invalid",n);break;default:S=g}ut(f,S),H=S;for(I in H)if(H.hasOwnProperty(I)){var Q=H[I];I==="style"?ce(n,Q):I==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,Q!=null&&wt(n,Q)):I==="children"?typeof Q=="string"?(f!=="textarea"||Q!=="")&&Bt(n,Q):typeof Q=="number"&&Bt(n,""+Q):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(m.hasOwnProperty(I)?Q!=null&&I==="onScroll"&&fn("scroll",n):Q!=null&&F(n,I,Q,M))}switch(f){case"input":Xe(n),qe(n,g,!1);break;case"textarea":Xe(n),Tt(n);break;case"option":g.value!=null&&n.setAttribute("value",""+Se(g.value));break;case"select":n.multiple=!!g.multiple,I=g.value,I!=null?Ue(n,!!g.multiple,I,!1):g.defaultValue!=null&&Ue(n,!!g.multiple,g.defaultValue,!0);break;default:typeof S.onClick=="function"&&(n.onclick=bl)}switch(f){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return xr(o),null;case 6:if(n&&o.stateNode!=null)D0(n,o,n.memoizedProps,g);else{if(typeof g!="string"&&o.stateNode===null)throw Error(a(166));if(f=Xs(xa.current),Xs(yi.current),_l(o)){if(g=o.stateNode,f=o.memoizedProps,g[xi]=o,(I=g.nodeValue!==f)&&(n=zr,n!==null))switch(n.tag){case 3:Cl(g.nodeValue,f,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Cl(g.nodeValue,f,(n.mode&1)!==0)}I&&(o.flags|=4)}else g=(f.nodeType===9?f:f.ownerDocument).createTextNode(g),g[xi]=o,o.stateNode=g}return xr(o),null;case 13:if(hn(wn),g=o.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(pn&&Wr!==null&&o.mode&1&&!(o.flags&128))Bh(),Io(),o.flags|=98560,I=!1;else if(I=_l(o),g!==null&&g.dehydrated!==null){if(n===null){if(!I)throw Error(a(318));if(I=o.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(a(317));I[xi]=o}else Io(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;xr(o),I=!1}else oi!==null&&(od(oi),oi=null),I=!0;if(!I)return o.flags&65536?o:null}return o.flags&128?(o.lanes=f,o):(g=g!==null,g!==(n!==null&&n.memoizedState!==null)&&g&&(o.child.flags|=8192,o.mode&1&&(n===null||wn.current&1?Yn===0&&(Yn=3):cd())),o.updateQueue!==null&&(o.flags|=4),xr(o),null);case 4:return ko(),Zu(n,o),n===null&&ua(o.stateNode.containerInfo),xr(o),null;case 10:return Eu(o.type._context),xr(o),null;case 17:return kr(o.type)&&Sl(),xr(o),null;case 19:if(hn(wn),I=o.memoizedState,I===null)return xr(o),null;if(g=(o.flags&128)!==0,M=I.rendering,M===null)if(g)ba(I,!1);else{if(Yn!==0||n!==null&&n.flags&128)for(n=o.child;n!==null;){if(M=Dl(n),M!==null){for(o.flags|=128,ba(I,!1),g=M.updateQueue,g!==null&&(o.updateQueue=g,o.flags|=4),o.subtreeFlags=0,g=f,f=o.child;f!==null;)I=f,n=g,I.flags&=14680066,M=I.alternate,M===null?(I.childLanes=0,I.lanes=n,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=M.childLanes,I.lanes=M.lanes,I.child=M.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=M.memoizedProps,I.memoizedState=M.memoizedState,I.updateQueue=M.updateQueue,I.type=M.type,n=M.dependencies,I.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),f=f.sibling;return an(wn,wn.current&1|2),o.child}n=n.sibling}I.tail!==null&&Lt()>Do&&(o.flags|=128,g=!0,ba(I,!1),o.lanes=4194304)}else{if(!g)if(n=Dl(M),n!==null){if(o.flags|=128,g=!0,f=n.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),ba(I,!0),I.tail===null&&I.tailMode==="hidden"&&!M.alternate&&!pn)return xr(o),null}else 2*Lt()-I.renderingStartTime>Do&&f!==1073741824&&(o.flags|=128,g=!0,ba(I,!1),o.lanes=4194304);I.isBackwards?(M.sibling=o.child,o.child=M):(f=I.last,f!==null?f.sibling=M:o.child=M,I.last=M)}return I.tail!==null?(o=I.tail,I.rendering=o,I.tail=o.sibling,I.renderingStartTime=Lt(),o.sibling=null,f=wn.current,an(wn,g?f&1|2:f&1),o):(xr(o),null);case 22:case 23:return ld(),g=o.memoizedState!==null,n!==null&&n.memoizedState!==null!==g&&(o.flags|=8192),g&&o.mode&1?Hr&1073741824&&(xr(o),o.subtreeFlags&6&&(o.flags|=8192)):xr(o),null;case 24:return null;case 25:return null}throw Error(a(156,o.tag))}function t2(n,o){switch(xu(o),o.tag){case 1:return kr(o.type)&&Sl(),n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 3:return ko(),hn(Rr),hn(pr),Ru(),n=o.flags,n&65536&&!(n&128)?(o.flags=n&-65537|128,o):null;case 5:return Tu(o),null;case 13:if(hn(wn),n=o.memoizedState,n!==null&&n.dehydrated!==null){if(o.alternate===null)throw Error(a(340));Io()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 19:return hn(wn),null;case 4:return ko(),null;case 10:return Eu(o.type._context),null;case 22:case 23:return ld(),null;case 24:return null;default:return null}}var Hl=!1,yr=!1,n2=typeof WeakSet=="function"?WeakSet:Set,nt=null;function Mo(n,o){var f=n.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(g){Nn(n,o,g)}else f.current=null}function Ku(n,o,f){try{f()}catch(g){Nn(n,o,g)}}var L0=!1;function r2(n,o){if(lu=pi,n=Rt(),Et(n)){if("selectionStart"in n)var f={start:n.selectionStart,end:n.selectionEnd};else e:{f=(f=n.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var S=g.anchorOffset,I=g.focusNode;g=g.focusOffset;try{f.nodeType,I.nodeType}catch{f=null;break e}var M=0,H=-1,Q=-1,pe=0,Oe=0,je=n,_e=null;t:for(;;){for(var Qe;je!==f||S!==0&&je.nodeType!==3||(H=M+S),je!==I||g!==0&&je.nodeType!==3||(Q=M+g),je.nodeType===3&&(M+=je.nodeValue.length),(Qe=je.firstChild)!==null;)_e=je,je=Qe;for(;;){if(je===n)break t;if(_e===f&&++pe===S&&(H=M),_e===I&&++Oe===g&&(Q=M),(Qe=je.nextSibling)!==null)break;je=_e,_e=je.parentNode}je=Qe}f=H===-1||Q===-1?null:{start:H,end:Q}}else f=null}f=f||{start:0,end:0}}else f=null;for(cu={focusedElem:n,selectionRange:f},pi=!1,nt=o;nt!==null;)if(o=nt,n=o.child,(o.subtreeFlags&1028)!==0&&n!==null)n.return=o,nt=n;else for(;nt!==null;){o=nt;try{var rt=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(rt!==null){var st=rt.memoizedProps,Pn=rt.memoizedState,ue=o.stateNode,re=ue.getSnapshotBeforeUpdate(o.elementType===o.type?st:ai(o.type,st),Pn);ue.__reactInternalSnapshotBeforeUpdate=re}break;case 3:var fe=o.stateNode.containerInfo;fe.nodeType===1?fe.textContent="":fe.nodeType===9&&fe.documentElement&&fe.removeChild(fe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(We){Nn(o,o.return,We)}if(n=o.sibling,n!==null){n.return=o.return,nt=n;break}nt=o.return}return rt=L0,L0=!1,rt}function Ea(n,o,f){var g=o.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var S=g=g.next;do{if((S.tag&n)===n){var I=S.destroy;S.destroy=void 0,I!==void 0&&Ku(o,f,I)}S=S.next}while(S!==g)}}function Gl(n,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var f=o=o.next;do{if((f.tag&n)===n){var g=f.create;f.destroy=g()}f=f.next}while(f!==o)}}function qu(n){var o=n.ref;if(o!==null){var f=n.stateNode;switch(n.tag){case 5:n=f;break;default:n=f}typeof o=="function"?o(n):o.current=n}}function j0(n){var o=n.alternate;o!==null&&(n.alternate=null,j0(o)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(o=n.stateNode,o!==null&&(delete o[xi],delete o[fa],delete o[hu],delete o[Fx],delete o[Vx])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function B0(n){return n.tag===5||n.tag===3||n.tag===4}function F0(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||B0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Qu(n,o,f){var g=n.tag;if(g===5||g===6)n=n.stateNode,o?f.nodeType===8?f.parentNode.insertBefore(n,o):f.insertBefore(n,o):(f.nodeType===8?(o=f.parentNode,o.insertBefore(n,f)):(o=f,o.appendChild(n)),f=f._reactRootContainer,f!=null||o.onclick!==null||(o.onclick=bl));else if(g!==4&&(n=n.child,n!==null))for(Qu(n,o,f),n=n.sibling;n!==null;)Qu(n,o,f),n=n.sibling}function Ju(n,o,f){var g=n.tag;if(g===5||g===6)n=n.stateNode,o?f.insertBefore(n,o):f.appendChild(n);else if(g!==4&&(n=n.child,n!==null))for(Ju(n,o,f),n=n.sibling;n!==null;)Ju(n,o,f),n=n.sibling}var cr=null,li=!1;function xs(n,o,f){for(f=f.child;f!==null;)V0(n,o,f),f=f.sibling}function V0(n,o,f){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(Pt,f)}catch{}switch(f.tag){case 5:yr||Mo(f,o);case 6:var g=cr,S=li;cr=null,xs(n,o,f),cr=g,li=S,cr!==null&&(li?(n=cr,f=f.stateNode,n.nodeType===8?n.parentNode.removeChild(f):n.removeChild(f)):cr.removeChild(f.stateNode));break;case 18:cr!==null&&(li?(n=cr,f=f.stateNode,n.nodeType===8?fu(n.parentNode,f):n.nodeType===1&&fu(n,f),ri(n)):fu(cr,f.stateNode));break;case 4:g=cr,S=li,cr=f.stateNode.containerInfo,li=!0,xs(n,o,f),cr=g,li=S;break;case 0:case 11:case 14:case 15:if(!yr&&(g=f.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){S=g=g.next;do{var I=S,M=I.destroy;I=I.tag,M!==void 0&&(I&2||I&4)&&Ku(f,o,M),S=S.next}while(S!==g)}xs(n,o,f);break;case 1:if(!yr&&(Mo(f,o),g=f.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=f.memoizedProps,g.state=f.memoizedState,g.componentWillUnmount()}catch(H){Nn(f,o,H)}xs(n,o,f);break;case 21:xs(n,o,f);break;case 22:f.mode&1?(yr=(g=yr)||f.memoizedState!==null,xs(n,o,f),yr=g):xs(n,o,f);break;default:xs(n,o,f)}}function U0(n){var o=n.updateQueue;if(o!==null){n.updateQueue=null;var f=n.stateNode;f===null&&(f=n.stateNode=new n2),o.forEach(function(g){var S=f2.bind(null,n,g);f.has(g)||(f.add(g),g.then(S,S))})}}function ci(n,o){var f=o.deletions;if(f!==null)for(var g=0;g<f.length;g++){var S=f[g];try{var I=n,M=o,H=M;e:for(;H!==null;){switch(H.tag){case 5:cr=H.stateNode,li=!1;break e;case 3:cr=H.stateNode.containerInfo,li=!0;break e;case 4:cr=H.stateNode.containerInfo,li=!0;break e}H=H.return}if(cr===null)throw Error(a(160));V0(I,M,S),cr=null,li=!1;var Q=S.alternate;Q!==null&&(Q.return=null),S.return=null}catch(pe){Nn(S,o,pe)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)z0(o,n),o=o.sibling}function z0(n,o){var f=n.alternate,g=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ci(o,n),vi(n),g&4){try{Ea(3,n,n.return),Gl(3,n)}catch(st){Nn(n,n.return,st)}try{Ea(5,n,n.return)}catch(st){Nn(n,n.return,st)}}break;case 1:ci(o,n),vi(n),g&512&&f!==null&&Mo(f,f.return);break;case 5:if(ci(o,n),vi(n),g&512&&f!==null&&Mo(f,f.return),n.flags&32){var S=n.stateNode;try{Bt(S,"")}catch(st){Nn(n,n.return,st)}}if(g&4&&(S=n.stateNode,S!=null)){var I=n.memoizedProps,M=f!==null?f.memoizedProps:I,H=n.type,Q=n.updateQueue;if(n.updateQueue=null,Q!==null)try{H==="input"&&I.type==="radio"&&I.name!=null&&It(S,I),xt(H,M);var pe=xt(H,I);for(M=0;M<Q.length;M+=2){var Oe=Q[M],je=Q[M+1];Oe==="style"?ce(S,je):Oe==="dangerouslySetInnerHTML"?wt(S,je):Oe==="children"?Bt(S,je):F(S,Oe,je,pe)}switch(H){case"input":it(S,I);break;case"textarea":Ge(S,I);break;case"select":var _e=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!I.multiple;var Qe=I.value;Qe!=null?Ue(S,!!I.multiple,Qe,!1):_e!==!!I.multiple&&(I.defaultValue!=null?Ue(S,!!I.multiple,I.defaultValue,!0):Ue(S,!!I.multiple,I.multiple?[]:"",!1))}S[fa]=I}catch(st){Nn(n,n.return,st)}}break;case 6:if(ci(o,n),vi(n),g&4){if(n.stateNode===null)throw Error(a(162));S=n.stateNode,I=n.memoizedProps;try{S.nodeValue=I}catch(st){Nn(n,n.return,st)}}break;case 3:if(ci(o,n),vi(n),g&4&&f!==null&&f.memoizedState.isDehydrated)try{ri(o.containerInfo)}catch(st){Nn(n,n.return,st)}break;case 4:ci(o,n),vi(n);break;case 13:ci(o,n),vi(n),S=n.child,S.flags&8192&&(I=S.memoizedState!==null,S.stateNode.isHidden=I,!I||S.alternate!==null&&S.alternate.memoizedState!==null||(nd=Lt())),g&4&&U0(n);break;case 22:if(Oe=f!==null&&f.memoizedState!==null,n.mode&1?(yr=(pe=yr)||Oe,ci(o,n),yr=pe):ci(o,n),vi(n),g&8192){if(pe=n.memoizedState!==null,(n.stateNode.isHidden=pe)&&!Oe&&n.mode&1)for(nt=n,Oe=n.child;Oe!==null;){for(je=nt=Oe;nt!==null;){switch(_e=nt,Qe=_e.child,_e.tag){case 0:case 11:case 14:case 15:Ea(4,_e,_e.return);break;case 1:Mo(_e,_e.return);var rt=_e.stateNode;if(typeof rt.componentWillUnmount=="function"){g=_e,f=_e.return;try{o=g,rt.props=o.memoizedProps,rt.state=o.memoizedState,rt.componentWillUnmount()}catch(st){Nn(g,f,st)}}break;case 5:Mo(_e,_e.return);break;case 22:if(_e.memoizedState!==null){G0(je);continue}}Qe!==null?(Qe.return=_e,nt=Qe):G0(je)}Oe=Oe.sibling}e:for(Oe=null,je=n;;){if(je.tag===5){if(Oe===null){Oe=je;try{S=je.stateNode,pe?(I=S.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none"):(H=je.stateNode,Q=je.memoizedProps.style,M=Q!=null&&Q.hasOwnProperty("display")?Q.display:null,H.style.display=Te("display",M))}catch(st){Nn(n,n.return,st)}}}else if(je.tag===6){if(Oe===null)try{je.stateNode.nodeValue=pe?"":je.memoizedProps}catch(st){Nn(n,n.return,st)}}else if((je.tag!==22&&je.tag!==23||je.memoizedState===null||je===n)&&je.child!==null){je.child.return=je,je=je.child;continue}if(je===n)break e;for(;je.sibling===null;){if(je.return===null||je.return===n)break e;Oe===je&&(Oe=null),je=je.return}Oe===je&&(Oe=null),je.sibling.return=je.return,je=je.sibling}}break;case 19:ci(o,n),vi(n),g&4&&U0(n);break;case 21:break;default:ci(o,n),vi(n)}}function vi(n){var o=n.flags;if(o&2){try{e:{for(var f=n.return;f!==null;){if(B0(f)){var g=f;break e}f=f.return}throw Error(a(160))}switch(g.tag){case 5:var S=g.stateNode;g.flags&32&&(Bt(S,""),g.flags&=-33);var I=F0(n);Ju(n,I,S);break;case 3:case 4:var M=g.stateNode.containerInfo,H=F0(n);Qu(n,H,M);break;default:throw Error(a(161))}}catch(Q){Nn(n,n.return,Q)}n.flags&=-3}o&4096&&(n.flags&=-4097)}function i2(n,o,f){nt=n,W0(n)}function W0(n,o,f){for(var g=(n.mode&1)!==0;nt!==null;){var S=nt,I=S.child;if(S.tag===22&&g){var M=S.memoizedState!==null||Hl;if(!M){var H=S.alternate,Q=H!==null&&H.memoizedState!==null||yr;H=Hl;var pe=yr;if(Hl=M,(yr=Q)&&!pe)for(nt=S;nt!==null;)M=nt,Q=M.child,M.tag===22&&M.memoizedState!==null?X0(S):Q!==null?(Q.return=M,nt=Q):X0(S);for(;I!==null;)nt=I,W0(I),I=I.sibling;nt=S,Hl=H,yr=pe}H0(n)}else S.subtreeFlags&8772&&I!==null?(I.return=S,nt=I):H0(n)}}function H0(n){for(;nt!==null;){var o=nt;if(o.flags&8772){var f=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:yr||Gl(5,o);break;case 1:var g=o.stateNode;if(o.flags&4&&!yr)if(f===null)g.componentDidMount();else{var S=o.elementType===o.type?f.memoizedProps:ai(o.type,f.memoizedProps);g.componentDidUpdate(S,f.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var I=o.updateQueue;I!==null&&Gh(o,I,g);break;case 3:var M=o.updateQueue;if(M!==null){if(f=null,o.child!==null)switch(o.child.tag){case 5:f=o.child.stateNode;break;case 1:f=o.child.stateNode}Gh(o,M,f)}break;case 5:var H=o.stateNode;if(f===null&&o.flags&4){f=H;var Q=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":Q.autoFocus&&f.focus();break;case"img":Q.src&&(f.src=Q.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var pe=o.alternate;if(pe!==null){var Oe=pe.memoizedState;if(Oe!==null){var je=Oe.dehydrated;je!==null&&ri(je)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}yr||o.flags&512&&qu(o)}catch(_e){Nn(o,o.return,_e)}}if(o===n){nt=null;break}if(f=o.sibling,f!==null){f.return=o.return,nt=f;break}nt=o.return}}function G0(n){for(;nt!==null;){var o=nt;if(o===n){nt=null;break}var f=o.sibling;if(f!==null){f.return=o.return,nt=f;break}nt=o.return}}function X0(n){for(;nt!==null;){var o=nt;try{switch(o.tag){case 0:case 11:case 15:var f=o.return;try{Gl(4,o)}catch(Q){Nn(o,f,Q)}break;case 1:var g=o.stateNode;if(typeof g.componentDidMount=="function"){var S=o.return;try{g.componentDidMount()}catch(Q){Nn(o,S,Q)}}var I=o.return;try{qu(o)}catch(Q){Nn(o,I,Q)}break;case 5:var M=o.return;try{qu(o)}catch(Q){Nn(o,M,Q)}}}catch(Q){Nn(o,o.return,Q)}if(o===n){nt=null;break}var H=o.sibling;if(H!==null){H.return=o.return,nt=H;break}nt=o.return}}var s2=Math.ceil,Xl=Y.ReactCurrentDispatcher,ed=Y.ReactCurrentOwner,Qr=Y.ReactCurrentBatchConfig,zt=0,tr=null,jn=null,ur=0,Hr=0,Oo=fs(0),Yn=0,Sa=null,$s=0,Yl=0,td=0,Aa=null,Mr=null,nd=0,Do=1/0,Xi=null,$l=!1,rd=null,ys=null,Zl=!1,ws=null,Kl=0,Na=0,id=null,ql=-1,Ql=0;function Er(){return zt&6?Lt():ql!==-1?ql:ql=Lt()}function vs(n){return n.mode&1?zt&2&&ur!==0?ur&-ur:zx.transition!==null?(Ql===0&&(Ql=En()),Ql):(n=Ye,n!==0||(n=window.event,n=n===void 0?16:Jo(n.type)),n):1}function ui(n,o,f,g){if(50<Na)throw Na=0,id=null,Error(a(185));V(n,f,g),(!(zt&2)||n!==tr)&&(n===tr&&(!(zt&2)&&(Yl|=f),Yn===4&&Cs(n,ur)),Or(n,g),f===1&&zt===0&&!(o.mode&1)&&(Do=Lt()+500,Nl&&ms()))}function Or(n,o){var f=n.callbackNode;Gr(n,o);var g=hr(n,n===tr?ur:0);if(g===0)f!==null&&Ln(f),n.callbackNode=null,n.callbackPriority=0;else if(o=g&-g,n.callbackPriority!==o){if(f!=null&&Ln(f),o===1)n.tag===0?Ux($0.bind(null,n)):Mh($0.bind(null,n)),jx(function(){!(zt&6)&&ms()}),f=null;else{switch(at(g)){case 1:f=Ne;break;case 4:f=Rs;break;case 16:f=Kt;break;case 536870912:f=ki;break;default:f=Kt}f=n1(f,Y0.bind(null,n))}n.callbackPriority=o,n.callbackNode=f}}function Y0(n,o){if(ql=-1,Ql=0,zt&6)throw Error(a(327));var f=n.callbackNode;if(Lo()&&n.callbackNode!==f)return null;var g=hr(n,n===tr?ur:0);if(g===0)return null;if(g&30||g&n.expiredLanes||o)o=Jl(n,g);else{o=g;var S=zt;zt|=2;var I=K0();(tr!==n||ur!==o)&&(Xi=null,Do=Lt()+500,Ks(n,o));do try{l2();break}catch(H){Z0(n,H)}while(!0);bu(),Xl.current=I,zt=S,jn!==null?o=0:(tr=null,ur=0,o=Yn)}if(o!==0){if(o===2&&(S=Ft(n),S!==0&&(g=S,o=sd(n,S))),o===1)throw f=Sa,Ks(n,0),Cs(n,g),Or(n,Lt()),f;if(o===6)Cs(n,g);else{if(S=n.current.alternate,!(g&30)&&!o2(S)&&(o=Jl(n,g),o===2&&(I=Ft(n),I!==0&&(g=I,o=sd(n,I))),o===1))throw f=Sa,Ks(n,0),Cs(n,g),Or(n,Lt()),f;switch(n.finishedWork=S,n.finishedLanes=g,o){case 0:case 1:throw Error(a(345));case 2:qs(n,Mr,Xi);break;case 3:if(Cs(n,g),(g&130023424)===g&&(o=nd+500-Lt(),10<o)){if(hr(n,0)!==0)break;if(S=n.suspendedLanes,(S&g)!==g){Er(),n.pingedLanes|=n.suspendedLanes&S;break}n.timeoutHandle=du(qs.bind(null,n,Mr,Xi),o);break}qs(n,Mr,Xi);break;case 4:if(Cs(n,g),(g&4194240)===g)break;for(o=n.eventTimes,S=-1;0<g;){var M=31-or(g);I=1<<M,M=o[M],M>S&&(S=M),g&=~I}if(g=S,g=Lt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*s2(g/1960))-g,10<g){n.timeoutHandle=du(qs.bind(null,n,Mr,Xi),g);break}qs(n,Mr,Xi);break;case 5:qs(n,Mr,Xi);break;default:throw Error(a(329))}}}return Or(n,Lt()),n.callbackNode===f?Y0.bind(null,n):null}function sd(n,o){var f=Aa;return n.current.memoizedState.isDehydrated&&(Ks(n,o).flags|=256),n=Jl(n,o),n!==2&&(o=Mr,Mr=f,o!==null&&od(o)),n}function od(n){Mr===null?Mr=n:Mr.push.apply(Mr,n)}function o2(n){for(var o=n;;){if(o.flags&16384){var f=o.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var g=0;g<f.length;g++){var S=f[g],I=S.getSnapshot;S=S.value;try{if(!oe(I(),S))return!1}catch{return!1}}}if(f=o.child,o.subtreeFlags&16384&&f!==null)f.return=o,o=f;else{if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Cs(n,o){for(o&=~td,o&=~Yl,n.suspendedLanes|=o,n.pingedLanes&=~o,n=n.expirationTimes;0<o;){var f=31-or(o),g=1<<f;n[f]=-1,o&=~g}}function $0(n){if(zt&6)throw Error(a(327));Lo();var o=hr(n,0);if(!(o&1))return Or(n,Lt()),null;var f=Jl(n,o);if(n.tag!==0&&f===2){var g=Ft(n);g!==0&&(o=g,f=sd(n,g))}if(f===1)throw f=Sa,Ks(n,0),Cs(n,o),Or(n,Lt()),f;if(f===6)throw Error(a(345));return n.finishedWork=n.current.alternate,n.finishedLanes=o,qs(n,Mr,Xi),Or(n,Lt()),null}function ad(n,o){var f=zt;zt|=1;try{return n(o)}finally{zt=f,zt===0&&(Do=Lt()+500,Nl&&ms())}}function Zs(n){ws!==null&&ws.tag===0&&!(zt&6)&&Lo();var o=zt;zt|=1;var f=Qr.transition,g=Ye;try{if(Qr.transition=null,Ye=1,n)return n()}finally{Ye=g,Qr.transition=f,zt=o,!(zt&6)&&ms()}}function ld(){Hr=Oo.current,hn(Oo)}function Ks(n,o){n.finishedWork=null,n.finishedLanes=0;var f=n.timeoutHandle;if(f!==-1&&(n.timeoutHandle=-1,Lx(f)),jn!==null)for(f=jn.return;f!==null;){var g=f;switch(xu(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Sl();break;case 3:ko(),hn(Rr),hn(pr),Ru();break;case 5:Tu(g);break;case 4:ko();break;case 13:hn(wn);break;case 19:hn(wn);break;case 10:Eu(g.type._context);break;case 22:case 23:ld()}f=f.return}if(tr=n,jn=n=bs(n.current,null),ur=Hr=o,Yn=0,Sa=null,td=Yl=$s=0,Mr=Aa=null,Gs!==null){for(o=0;o<Gs.length;o++)if(f=Gs[o],g=f.interleaved,g!==null){f.interleaved=null;var S=g.next,I=f.pending;if(I!==null){var M=I.next;I.next=S,g.next=M}f.pending=g}Gs=null}return n}function Z0(n,o){do{var f=jn;try{if(bu(),Ll.current=Vl,jl){for(var g=vn.memoizedState;g!==null;){var S=g.queue;S!==null&&(S.pending=null),g=g.next}jl=!1}if(Ys=0,er=Xn=vn=null,ya=!1,wa=0,ed.current=null,f===null||f.return===null){Yn=1,Sa=o,jn=null;break}e:{var I=n,M=f.return,H=f,Q=o;if(o=ur,H.flags|=32768,Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var pe=Q,Oe=H,je=Oe.tag;if(!(Oe.mode&1)&&(je===0||je===11||je===15)){var _e=Oe.alternate;_e?(Oe.updateQueue=_e.updateQueue,Oe.memoizedState=_e.memoizedState,Oe.lanes=_e.lanes):(Oe.updateQueue=null,Oe.memoizedState=null)}var Qe=v0(M);if(Qe!==null){Qe.flags&=-257,C0(Qe,M,H,I,o),Qe.mode&1&&w0(I,pe,o),o=Qe,Q=pe;var rt=o.updateQueue;if(rt===null){var st=new Set;st.add(Q),o.updateQueue=st}else rt.add(Q);break e}else{if(!(o&1)){w0(I,pe,o),cd();break e}Q=Error(a(426))}}else if(pn&&H.mode&1){var Pn=v0(M);if(Pn!==null){!(Pn.flags&65536)&&(Pn.flags|=256),C0(Pn,M,H,I,o),vu(Po(Q,H));break e}}I=Q=Po(Q,H),Yn!==4&&(Yn=2),Aa===null?Aa=[I]:Aa.push(I),I=M;do{switch(I.tag){case 3:I.flags|=65536,o&=-o,I.lanes|=o;var ue=x0(I,Q,o);Hh(I,ue);break e;case 1:H=Q;var re=I.type,fe=I.stateNode;if(!(I.flags&128)&&(typeof re.getDerivedStateFromError=="function"||fe!==null&&typeof fe.componentDidCatch=="function"&&(ys===null||!ys.has(fe)))){I.flags|=65536,o&=-o,I.lanes|=o;var We=y0(I,H,o);Hh(I,We);break e}}I=I.return}while(I!==null)}Q0(f)}catch(ot){o=ot,jn===f&&f!==null&&(jn=f=f.return);continue}break}while(!0)}function K0(){var n=Xl.current;return Xl.current=Vl,n===null?Vl:n}function cd(){(Yn===0||Yn===3||Yn===2)&&(Yn=4),tr===null||!($s&268435455)&&!(Yl&268435455)||Cs(tr,ur)}function Jl(n,o){var f=zt;zt|=2;var g=K0();(tr!==n||ur!==o)&&(Xi=null,Ks(n,o));do try{a2();break}catch(S){Z0(n,S)}while(!0);if(bu(),zt=f,Xl.current=g,jn!==null)throw Error(a(261));return tr=null,ur=0,Yn}function a2(){for(;jn!==null;)q0(jn)}function l2(){for(;jn!==null&&!$t();)q0(jn)}function q0(n){var o=t1(n.alternate,n,Hr);n.memoizedProps=n.pendingProps,o===null?Q0(n):jn=o,ed.current=null}function Q0(n){var o=n;do{var f=o.alternate;if(n=o.return,o.flags&32768){if(f=t2(f,o),f!==null){f.flags&=32767,jn=f;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Yn=6,jn=null;return}}else if(f=e2(f,o,Hr),f!==null){jn=f;return}if(o=o.sibling,o!==null){jn=o;return}jn=o=n}while(o!==null);Yn===0&&(Yn=5)}function qs(n,o,f){var g=Ye,S=Qr.transition;try{Qr.transition=null,Ye=1,c2(n,o,f,g)}finally{Qr.transition=S,Ye=g}return null}function c2(n,o,f,g){do Lo();while(ws!==null);if(zt&6)throw Error(a(327));f=n.finishedWork;var S=n.finishedLanes;if(f===null)return null;if(n.finishedWork=null,n.finishedLanes=0,f===n.current)throw Error(a(177));n.callbackNode=null,n.callbackPriority=0;var I=f.lanes|f.childLanes;if(ge(n,I),n===tr&&(jn=tr=null,ur=0),!(f.subtreeFlags&2064)&&!(f.flags&2064)||Zl||(Zl=!0,n1(Kt,function(){return Lo(),null})),I=(f.flags&15990)!==0,f.subtreeFlags&15990||I){I=Qr.transition,Qr.transition=null;var M=Ye;Ye=1;var H=zt;zt|=4,ed.current=null,r2(n,f),z0(f,n),mr(cu),pi=!!lu,cu=lu=null,n.current=f,i2(f),ho(),zt=H,Ye=M,Qr.transition=I}else n.current=f;if(Zl&&(Zl=!1,ws=n,Kl=S),I=n.pendingLanes,I===0&&(ys=null),_t(f.stateNode),Or(n,Lt()),o!==null)for(g=n.onRecoverableError,f=0;f<o.length;f++)S=o[f],g(S.value,{componentStack:S.stack,digest:S.digest});if($l)throw $l=!1,n=rd,rd=null,n;return Kl&1&&n.tag!==0&&Lo(),I=n.pendingLanes,I&1?n===id?Na++:(Na=0,id=n):Na=0,ms(),null}function Lo(){if(ws!==null){var n=at(Kl),o=Qr.transition,f=Ye;try{if(Qr.transition=null,Ye=16>n?16:n,ws===null)var g=!1;else{if(n=ws,ws=null,Kl=0,zt&6)throw Error(a(331));var S=zt;for(zt|=4,nt=n.current;nt!==null;){var I=nt,M=I.child;if(nt.flags&16){var H=I.deletions;if(H!==null){for(var Q=0;Q<H.length;Q++){var pe=H[Q];for(nt=pe;nt!==null;){var Oe=nt;switch(Oe.tag){case 0:case 11:case 15:Ea(8,Oe,I)}var je=Oe.child;if(je!==null)je.return=Oe,nt=je;else for(;nt!==null;){Oe=nt;var _e=Oe.sibling,Qe=Oe.return;if(j0(Oe),Oe===pe){nt=null;break}if(_e!==null){_e.return=Qe,nt=_e;break}nt=Qe}}}var rt=I.alternate;if(rt!==null){var st=rt.child;if(st!==null){rt.child=null;do{var Pn=st.sibling;st.sibling=null,st=Pn}while(st!==null)}}nt=I}}if(I.subtreeFlags&2064&&M!==null)M.return=I,nt=M;else e:for(;nt!==null;){if(I=nt,I.flags&2048)switch(I.tag){case 0:case 11:case 15:Ea(9,I,I.return)}var ue=I.sibling;if(ue!==null){ue.return=I.return,nt=ue;break e}nt=I.return}}var re=n.current;for(nt=re;nt!==null;){M=nt;var fe=M.child;if(M.subtreeFlags&2064&&fe!==null)fe.return=M,nt=fe;else e:for(M=re;nt!==null;){if(H=nt,H.flags&2048)try{switch(H.tag){case 0:case 11:case 15:Gl(9,H)}}catch(ot){Nn(H,H.return,ot)}if(H===M){nt=null;break e}var We=H.sibling;if(We!==null){We.return=H.return,nt=We;break e}nt=H.return}}if(zt=S,ms(),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(Pt,n)}catch{}g=!0}return g}finally{Ye=f,Qr.transition=o}}return!1}function J0(n,o,f){o=Po(f,o),o=x0(n,o,1),n=gs(n,o,1),o=Er(),n!==null&&(V(n,1,o),Or(n,o))}function Nn(n,o,f){if(n.tag===3)J0(n,n,f);else for(;o!==null;){if(o.tag===3){J0(o,n,f);break}else if(o.tag===1){var g=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(ys===null||!ys.has(g))){n=Po(f,n),n=y0(o,n,1),o=gs(o,n,1),n=Er(),o!==null&&(V(o,1,n),Or(o,n));break}}o=o.return}}function u2(n,o,f){var g=n.pingCache;g!==null&&g.delete(o),o=Er(),n.pingedLanes|=n.suspendedLanes&f,tr===n&&(ur&f)===f&&(Yn===4||Yn===3&&(ur&130023424)===ur&&500>Lt()-nd?Ks(n,0):td|=f),Or(n,o)}function e1(n,o){o===0&&(n.mode&1?(o=mi,mi<<=1,!(mi&130023424)&&(mi=4194304)):o=1);var f=Er();n=Wi(n,o),n!==null&&(V(n,o,f),Or(n,f))}function d2(n){var o=n.memoizedState,f=0;o!==null&&(f=o.retryLane),e1(n,f)}function f2(n,o){var f=0;switch(n.tag){case 13:var g=n.stateNode,S=n.memoizedState;S!==null&&(f=S.retryLane);break;case 19:g=n.stateNode;break;default:throw Error(a(314))}g!==null&&g.delete(o),e1(n,f)}var t1;t1=function(n,o,f){if(n!==null)if(n.memoizedProps!==o.pendingProps||Rr.current)Pr=!0;else{if(!(n.lanes&f)&&!(o.flags&128))return Pr=!1,Jx(n,o,f);Pr=!!(n.flags&131072)}else Pr=!1,pn&&o.flags&1048576&&Oh(o,Tl,o.index);switch(o.lanes=0,o.tag){case 2:var g=o.type;Wl(n,o),n=o.pendingProps;var S=So(o,pr.current);Ro(o,f),S=Mu(null,o,g,n,S,f);var I=Ou();return o.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,kr(g)?(I=!0,Al(o)):I=!1,o.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,Nu(o),S.updater=Ul,o.stateNode=S,S._reactInternals=o,Vu(o,g,n,f),o=Hu(null,o,g,!0,I,f)):(o.tag=0,pn&&I&&gu(o),br(null,o,S,f),o=o.child),o;case 16:g=o.elementType;e:{switch(Wl(n,o),n=o.pendingProps,S=g._init,g=S(g._payload),o.type=g,S=o.tag=m2(g),n=ai(g,n),S){case 0:o=Wu(null,o,g,n,f);break e;case 1:o=I0(null,o,g,n,f);break e;case 11:o=b0(null,o,g,n,f);break e;case 14:o=E0(null,o,g,ai(g.type,n),f);break e}throw Error(a(306,g,""))}return o;case 0:return g=o.type,S=o.pendingProps,S=o.elementType===g?S:ai(g,S),Wu(n,o,g,S,f);case 1:return g=o.type,S=o.pendingProps,S=o.elementType===g?S:ai(g,S),I0(n,o,g,S,f);case 3:e:{if(T0(o),n===null)throw Error(a(387));g=o.pendingProps,I=o.memoizedState,S=I.element,Wh(n,o),Ol(o,g,null,f);var M=o.memoizedState;if(g=M.element,I.isDehydrated)if(I={element:g,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},o.updateQueue.baseState=I,o.memoizedState=I,o.flags&256){S=Po(Error(a(423)),o),o=_0(n,o,g,f,S);break e}else if(g!==S){S=Po(Error(a(424)),o),o=_0(n,o,g,f,S);break e}else for(Wr=ds(o.stateNode.containerInfo.firstChild),zr=o,pn=!0,oi=null,f=Uh(o,null,g,f),o.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Io(),g===S){o=Gi(n,o,f);break e}br(n,o,g,f)}o=o.child}return o;case 5:return Xh(o),n===null&&wu(o),g=o.type,S=o.pendingProps,I=n!==null?n.memoizedProps:null,M=S.children,uu(g,S)?M=null:I!==null&&uu(g,I)&&(o.flags|=32),N0(n,o),br(n,o,M,f),o.child;case 6:return n===null&&wu(o),null;case 13:return R0(n,o,f);case 4:return Iu(o,o.stateNode.containerInfo),g=o.pendingProps,n===null?o.child=To(o,null,g,f):br(n,o,g,f),o.child;case 11:return g=o.type,S=o.pendingProps,S=o.elementType===g?S:ai(g,S),b0(n,o,g,S,f);case 7:return br(n,o,o.pendingProps,f),o.child;case 8:return br(n,o,o.pendingProps.children,f),o.child;case 12:return br(n,o,o.pendingProps.children,f),o.child;case 10:e:{if(g=o.type._context,S=o.pendingProps,I=o.memoizedProps,M=S.value,an(kl,g._currentValue),g._currentValue=M,I!==null)if(oe(I.value,M)){if(I.children===S.children&&!Rr.current){o=Gi(n,o,f);break e}}else for(I=o.child,I!==null&&(I.return=o);I!==null;){var H=I.dependencies;if(H!==null){M=I.child;for(var Q=H.firstContext;Q!==null;){if(Q.context===g){if(I.tag===1){Q=Hi(-1,f&-f),Q.tag=2;var pe=I.updateQueue;if(pe!==null){pe=pe.shared;var Oe=pe.pending;Oe===null?Q.next=Q:(Q.next=Oe.next,Oe.next=Q),pe.pending=Q}}I.lanes|=f,Q=I.alternate,Q!==null&&(Q.lanes|=f),Su(I.return,f,o),H.lanes|=f;break}Q=Q.next}}else if(I.tag===10)M=I.type===o.type?null:I.child;else if(I.tag===18){if(M=I.return,M===null)throw Error(a(341));M.lanes|=f,H=M.alternate,H!==null&&(H.lanes|=f),Su(M,f,o),M=I.sibling}else M=I.child;if(M!==null)M.return=I;else for(M=I;M!==null;){if(M===o){M=null;break}if(I=M.sibling,I!==null){I.return=M.return,M=I;break}M=M.return}I=M}br(n,o,S.children,f),o=o.child}return o;case 9:return S=o.type,g=o.pendingProps.children,Ro(o,f),S=Kr(S),g=g(S),o.flags|=1,br(n,o,g,f),o.child;case 14:return g=o.type,S=ai(g,o.pendingProps),S=ai(g.type,S),E0(n,o,g,S,f);case 15:return S0(n,o,o.type,o.pendingProps,f);case 17:return g=o.type,S=o.pendingProps,S=o.elementType===g?S:ai(g,S),Wl(n,o),o.tag=1,kr(g)?(n=!0,Al(o)):n=!1,Ro(o,f),p0(o,g,S),Vu(o,g,S,f),Hu(null,o,g,!0,n,f);case 19:return P0(n,o,f);case 22:return A0(n,o,f)}throw Error(a(156,o.tag))};function n1(n,o){return vr(n,o)}function h2(n,o,f,g){this.tag=n,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jr(n,o,f,g){return new h2(n,o,f,g)}function ud(n){return n=n.prototype,!(!n||!n.isReactComponent)}function m2(n){if(typeof n=="function")return ud(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Ae)return 11;if(n===$)return 14}return 2}function bs(n,o){var f=n.alternate;return f===null?(f=Jr(n.tag,o,n.key,n.mode),f.elementType=n.elementType,f.type=n.type,f.stateNode=n.stateNode,f.alternate=n,n.alternate=f):(f.pendingProps=o,f.type=n.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=n.flags&14680064,f.childLanes=n.childLanes,f.lanes=n.lanes,f.child=n.child,f.memoizedProps=n.memoizedProps,f.memoizedState=n.memoizedState,f.updateQueue=n.updateQueue,o=n.dependencies,f.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},f.sibling=n.sibling,f.index=n.index,f.ref=n.ref,f}function ec(n,o,f,g,S,I){var M=2;if(g=n,typeof n=="function")ud(n)&&(M=1);else if(typeof n=="string")M=5;else e:switch(n){case q:return Qs(f.children,S,I,o);case ie:M=8,S|=8;break;case J:return n=Jr(12,f,o,S|2),n.elementType=J,n.lanes=I,n;case be:return n=Jr(13,f,o,S),n.elementType=be,n.lanes=I,n;case Ie:return n=Jr(19,f,o,S),n.elementType=Ie,n.lanes=I,n;case ve:return tc(f,S,I,o);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case we:M=10;break e;case Re:M=9;break e;case Ae:M=11;break e;case $:M=14;break e;case ke:M=16,g=null;break e}throw Error(a(130,n==null?n:typeof n,""))}return o=Jr(M,f,o,S),o.elementType=n,o.type=g,o.lanes=I,o}function Qs(n,o,f,g){return n=Jr(7,n,g,o),n.lanes=f,n}function tc(n,o,f,g){return n=Jr(22,n,g,o),n.elementType=ve,n.lanes=f,n.stateNode={isHidden:!1},n}function dd(n,o,f){return n=Jr(6,n,null,o),n.lanes=f,n}function fd(n,o,f){return o=Jr(4,n.children!==null?n.children:[],n.key,o),o.lanes=f,o.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},o}function p2(n,o,f,g,S){this.tag=o,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=le(0),this.expirationTimes=le(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=le(0),this.identifierPrefix=g,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function hd(n,o,f,g,S,I,M,H,Q){return n=new p2(n,o,f,H,Q),o===1?(o=1,I===!0&&(o|=8)):o=0,I=Jr(3,null,null,o),n.current=I,I.stateNode=n,I.memoizedState={element:g,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nu(I),n}function g2(n,o,f){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ne,key:g==null?null:""+g,children:n,containerInfo:o,implementation:f}}function r1(n){if(!n)return hs;n=n._reactInternals;e:{if(sr(n)!==n||n.tag!==1)throw Error(a(170));var o=n;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(kr(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(a(171))}if(n.tag===1){var f=n.type;if(kr(f))return kh(n,f,o)}return o}function i1(n,o,f,g,S,I,M,H,Q){return n=hd(f,g,!0,n,S,I,M,H,Q),n.context=r1(null),f=n.current,g=Er(),S=vs(f),I=Hi(g,S),I.callback=o??null,gs(f,I,S),n.current.lanes=S,V(n,S,g),Or(n,g),n}function nc(n,o,f,g){var S=o.current,I=Er(),M=vs(S);return f=r1(f),o.context===null?o.context=f:o.pendingContext=f,o=Hi(I,M),o.payload={element:n},g=g===void 0?null:g,g!==null&&(o.callback=g),n=gs(S,o,M),n!==null&&(ui(n,S,M,I),Ml(n,S,M)),M}function rc(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function s1(n,o){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var f=n.retryLane;n.retryLane=f!==0&&f<o?f:o}}function md(n,o){s1(n,o),(n=n.alternate)&&s1(n,o)}function x2(){return null}var o1=typeof reportError=="function"?reportError:function(n){console.error(n)};function pd(n){this._internalRoot=n}ic.prototype.render=pd.prototype.render=function(n){var o=this._internalRoot;if(o===null)throw Error(a(409));nc(n,o,null,null)},ic.prototype.unmount=pd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var o=n.containerInfo;Zs(function(){nc(null,n,null,null)}),o[Fi]=null}};function ic(n){this._internalRoot=n}ic.prototype.unstable_scheduleHydration=function(n){if(n){var o=Qt();n={blockedOn:null,target:n,priority:o};for(var f=0;f<zn.length&&o!==0&&o<zn[f].priority;f++);zn.splice(f,0,n),f===0&&cl(n)}};function gd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function sc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function a1(){}function y2(n,o,f,g,S){if(S){if(typeof g=="function"){var I=g;g=function(){var pe=rc(M);I.call(pe)}}var M=i1(o,g,n,0,null,!1,!1,"",a1);return n._reactRootContainer=M,n[Fi]=M.current,ua(n.nodeType===8?n.parentNode:n),Zs(),M}for(;S=n.lastChild;)n.removeChild(S);if(typeof g=="function"){var H=g;g=function(){var pe=rc(Q);H.call(pe)}}var Q=hd(n,0,!1,null,null,!1,!1,"",a1);return n._reactRootContainer=Q,n[Fi]=Q.current,ua(n.nodeType===8?n.parentNode:n),Zs(function(){nc(o,Q,f,g)}),Q}function oc(n,o,f,g,S){var I=f._reactRootContainer;if(I){var M=I;if(typeof S=="function"){var H=S;S=function(){var Q=rc(M);H.call(Q)}}nc(o,M,n,S)}else M=y2(f,o,n,S,g);return rc(M)}Dt=function(n){switch(n.tag){case 3:var o=n.stateNode;if(o.current.memoizedState.isDehydrated){var f=qt(o.pendingLanes);f!==0&&(He(o,f|1),Or(o,Lt()),!(zt&6)&&(Do=Lt()+500,ms()))}break;case 13:Zs(function(){var g=Wi(n,1);if(g!==null){var S=Er();ui(g,n,1,S)}}),md(n,1)}},dn=function(n){if(n.tag===13){var o=Wi(n,134217728);if(o!==null){var f=Er();ui(o,n,134217728,f)}md(n,134217728)}},lt=function(n){if(n.tag===13){var o=vs(n),f=Wi(n,o);if(f!==null){var g=Er();ui(f,n,o,g)}md(n,o)}},Qt=function(){return Ye},ns=function(n,o){var f=Ye;try{return Ye=n,o()}finally{Ye=f}},cn=function(n,o,f){switch(o){case"input":if(it(n,f),o=f.name,f.type==="radio"&&o!=null){for(f=n;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<f.length;o++){var g=f[o];if(g!==n&&g.form===n.form){var S=El(g);if(!S)throw Error(a(90));de(g),it(g,S)}}}break;case"textarea":Ge(n,f);break;case"select":o=f.value,o!=null&&Ue(n,!!f.multiple,o,!1)}},Ni=ad,Wt=Zs;var w2={usingClientEntryPoint:!1,Events:[ha,bo,El,Fr,en,ad]},Ia={findFiberByHostInstance:Us,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},v2={bundleType:Ia.bundleType,version:Ia.version,rendererPackageName:Ia.rendererPackageName,rendererConfig:Ia.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Y.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=fo(n),n===null?null:n.stateNode},findFiberByHostInstance:Ia.findFiberByHostInstance||x2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{Pt=ac.inject(v2),At=ac}catch{}}return Dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w2,Dr.createPortal=function(n,o){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gd(o))throw Error(a(200));return g2(n,o,null,f)},Dr.createRoot=function(n,o){if(!gd(n))throw Error(a(299));var f=!1,g="",S=o1;return o!=null&&(o.unstable_strictMode===!0&&(f=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onRecoverableError!==void 0&&(S=o.onRecoverableError)),o=hd(n,1,!1,null,null,f,!1,g,S),n[Fi]=o.current,ua(n.nodeType===8?n.parentNode:n),new pd(o)},Dr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var o=n._reactInternals;if(o===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=fo(o),n=n===null?null:n.stateNode,n},Dr.flushSync=function(n){return Zs(n)},Dr.hydrate=function(n,o,f){if(!sc(o))throw Error(a(200));return oc(null,n,o,!0,f)},Dr.hydrateRoot=function(n,o,f){if(!gd(n))throw Error(a(405));var g=f!=null&&f.hydratedSources||null,S=!1,I="",M=o1;if(f!=null&&(f.unstable_strictMode===!0&&(S=!0),f.identifierPrefix!==void 0&&(I=f.identifierPrefix),f.onRecoverableError!==void 0&&(M=f.onRecoverableError)),o=i1(o,null,n,1,f??null,S,!1,I,M),n[Fi]=o.current,ua(n),g)for(n=0;n<g.length;n++)f=g[n],S=f._getVersion,S=S(f._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[f,S]:o.mutableSourceEagerHydrationData.push(f,S);return new ic(o)},Dr.render=function(n,o,f){if(!sc(o))throw Error(a(200));return oc(null,n,o,!1,f)},Dr.unmountComponentAtNode=function(n){if(!sc(n))throw Error(a(40));return n._reactRootContainer?(Zs(function(){oc(null,null,n,!1,function(){n._reactRootContainer=null,n[Fi]=null})}),!0):!1},Dr.unstable_batchedUpdates=ad,Dr.unstable_renderSubtreeIntoContainer=function(n,o,f,g){if(!sc(f))throw Error(a(200));if(n==null||n._reactInternals===void 0)throw Error(a(38));return oc(n,o,f,!1,g)},Dr.version="18.3.1-next-f1338f8080-20240426",Dr}var p1;function T2(){if(p1)return wd.exports;p1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(i){console.error(i)}}return t(),wd.exports=I2(),wd.exports}var g1;function _2(){if(g1)return cc;g1=1;var t=T2();return cc.createRoot=t.createRoot,cc.hydrateRoot=t.hydrateRoot,cc}var R2=_2();const Fn=N.createContext(null),k2=({children:t})=>{const[i,a]=N.useState(null),[u,m]=N.useState(null),[x,w]=N.useState(null),[b,v]=N.useState(null),[C,A]=N.useState(!1),[T,_]=N.useState(null),[O,L]=N.useState(!1),[B,j]=N.useState(!0),[W,U]=N.useState("Connecting..."),F=N.useRef(null),Y=async()=>{j(!0),U("Connecting..."),F.current&&clearTimeout(F.current),F.current=setTimeout(()=>{U("Taking longer than expected. Check your connection.")},1e4);try{try{const J=await fetch(window.server_url+"/auth/session",{method:"GET",credentials:"include"});if(J.ok){const we=await J.json();if(we.authenticated){console.log("SESSION AUTH SUCCESS:",we);const Re=localStorage.getItem("user");Re&&Re!==we.user.username&&(console.log("Session user differs from cached user, clearing stale credentials"),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user")),we.access_token&&(console.log("Session includes JWT, storing in localStorage"),localStorage.setItem("access_token",we.access_token),localStorage.setItem("user",we.user.username),we.refresh_token&&localStorage.setItem("refresh_token",we.refresh_token)),A(!0),a(we.user.username),m(we.user.profile||null),_(we.user.permissions||null),L(we.user.email_verified===!0);return}}}catch(J){console.log("Session auth check failed (this is ok if using JWT):",J)}const ie=localStorage.getItem("access_token");if(ie)try{const J=await fetch(window.server_url+"/load_user",{headers:{Authorization:`Bearer ${ie}`},credentials:"include"});if(J.ok){A(!0);const we=await J.json();console.log("JWT AUTH SUCCESS:",we),a(we.username),m(we.profile),_(we.permissions),L(we.email_verified===!0),console.log("PERMISSIONS:",we.permissions)}else console.log("TOKEN INVALID"),localStorage.removeItem("access_token"),a(null),m(null),w(null),v(null),A(!1)}catch(J){console.log("JWT auth error (network issue):",J);const we=localStorage.getItem("user");ie&&we&&(console.log("Using optimistic auth with cached user:",we),a(we),A(!0))}}finally{F.current&&(clearTimeout(F.current),F.current=null),j(!1)}};N.useEffect(()=>{Y()},[]);const K=ie=>{a(ie.username),w(ie.access_token),v(ie.refresh_token),_(ie.permissions),console.log("PRE SAVE USERNAME:",ie.username),localStorage.setItem("user",ie.username),localStorage.setItem("access_token",ie.access_token),localStorage.setItem("refresh_token",ie.refresh_token)},ne=async(ie,J)=>{const we=await fetch(window.server_url+"/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:ie,password:J})});if(we.ok){const Re=await we.json();console.log("SIGNED UP, userData:",Re)}},q=async()=>{try{await fetch(window.server_url+"/auth/logout",{method:"POST",credentials:"include"})}catch(ie){console.log("Logout request failed (session may already be cleared):",ie)}localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),a(null),m(null),w(null),v(null),A(!1),_(null),L(!1)};return h.jsx(Fn.Provider,{value:{user:i,login:K,signup:ne,logout:q,userProfile:u,checkAuth:Y,permissions:T,emailVerified:O,isAuthLoading:B,authLoadingMessage:W},children:t})};var Yd=function(t,i){return Yd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var m in u)Object.prototype.hasOwnProperty.call(u,m)&&(a[m]=u[m])},Yd(t,i)};function P2(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");Yd(t,i);function a(){this.constructor=t}t.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}var dr=function(){return dr=Object.assign||function(i){for(var a,u=1,m=arguments.length;u<m;u++){a=arguments[u];for(var x in a)Object.prototype.hasOwnProperty.call(a,x)&&(i[x]=a[x])}return i},dr.apply(this,arguments)};var bd,x1;function M2(){if(x1)return bd;x1=1;var t=!1,i,a,u,m,x,w,b,v,C,A,T,_,O,L,B;function j(){if(!t){t=!0;var U=navigator.userAgent,F=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(U),Y=/(Mac OS X)|(Windows)|(Linux)/.exec(U);if(_=/\b(iPhone|iP[ao]d)/.exec(U),O=/\b(iP[ao]d)/.exec(U),A=/Android/i.exec(U),L=/FBAN\/\w+;/i.exec(U),B=/Mobile/i.exec(U),T=!!/Win64/.exec(U),F){i=F[1]?parseFloat(F[1]):F[5]?parseFloat(F[5]):NaN,i&&document&&document.documentMode&&(i=document.documentMode);var K=/(?:Trident\/(\d+.\d+))/.exec(U);w=K?parseFloat(K[1])+4:i,a=F[2]?parseFloat(F[2]):NaN,u=F[3]?parseFloat(F[3]):NaN,m=F[4]?parseFloat(F[4]):NaN,m?(F=/(?:Chrome\/(\d+\.\d+))/.exec(U),x=F&&F[1]?parseFloat(F[1]):NaN):x=NaN}else i=a=u=x=m=NaN;if(Y){if(Y[1]){var ne=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(U);b=ne?parseFloat(ne[1].replace("_",".")):!0}else b=!1;v=!!Y[2],C=!!Y[3]}else b=v=C=!1}}var W={ie:function(){return j()||i},ieCompatibilityMode:function(){return j()||w>i},ie64:function(){return W.ie()&&T},firefox:function(){return j()||a},opera:function(){return j()||u},webkit:function(){return j()||m},safari:function(){return W.webkit()},chrome:function(){return j()||x},windows:function(){return j()||v},osx:function(){return j()||b},linux:function(){return j()||C},iphone:function(){return j()||_},mobile:function(){return j()||_||O||A||B},nativeApp:function(){return j()||L},android:function(){return j()||A},ipad:function(){return j()||O}};return bd=W,bd}var Ed,y1;function O2(){if(y1)return Ed;y1=1;var t=!!(typeof window<"u"&&window.document&&window.document.createElement),i={canUseDOM:t,canUseWorkers:typeof Worker<"u",canUseEventListeners:t&&!!(window.addEventListener||window.attachEvent),canUseViewport:t&&!!window.screen,isInWorker:!t};return Ed=i,Ed}var Sd,w1;function D2(){if(w1)return Sd;w1=1;var t=O2(),i;t.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function a(u,m){if(!t.canUseDOM||m&&!("addEventListener"in document))return!1;var x="on"+u,w=x in document;if(!w){var b=document.createElement("div");b.setAttribute(x,"return;"),w=typeof b[x]=="function"}return!w&&i&&u==="wheel"&&(w=document.implementation.hasFeature("Events.wheel","3.0")),w}return Sd=a,Sd}var Ad,v1;function L2(){if(v1)return Ad;v1=1;var t=M2(),i=D2(),a=10,u=40,m=800;function x(w){var b=0,v=0,C=0,A=0;return"detail"in w&&(v=w.detail),"wheelDelta"in w&&(v=-w.wheelDelta/120),"wheelDeltaY"in w&&(v=-w.wheelDeltaY/120),"wheelDeltaX"in w&&(b=-w.wheelDeltaX/120),"axis"in w&&w.axis===w.HORIZONTAL_AXIS&&(b=v,v=0),C=b*a,A=v*a,"deltaY"in w&&(A=w.deltaY),"deltaX"in w&&(C=w.deltaX),(C||A)&&w.deltaMode&&(w.deltaMode==1?(C*=u,A*=u):(C*=m,A*=m)),C&&!b&&(b=C<1?-1:1),A&&!v&&(v=A<1?-1:1),{spinX:b,spinY:v,pixelX:C,pixelY:A}}return x.getEventType=function(){return t.firefox()?"DOMMouseScroll":i("wheel")?"wheel":"mousewheel"},Ad=x,Ad}var Nd,C1;function j2(){return C1||(C1=1,Nd=L2()),Nd}var B2=j2();const F2=fp(B2);function V2(t,i,a,u,m,x){x===void 0&&(x=0);var w=Ho(t,i,x),b=w.width,v=w.height,C=Math.min(b,a),A=Math.min(v,u);return C>A*m?{width:A*m,height:A}:{width:C,height:C/m}}function U2(t){return t.width>t.height?t.width/t.naturalWidth:t.height/t.naturalHeight}function _a(t,i,a,u,m){m===void 0&&(m=0);var x=Ho(i.width,i.height,m),w=x.width,b=x.height;return{x:b1(t.x,w,a.width,u),y:b1(t.y,b,a.height,u)}}function b1(t,i,a,u){var m=i*u/2-a/2;return Fc(t,-m,m)}function E1(t,i){return Math.sqrt(Math.pow(t.y-i.y,2)+Math.pow(t.x-i.x,2))}function S1(t,i){return Math.atan2(i.y-t.y,i.x-t.x)*180/Math.PI}function z2(t,i,a,u,m,x,w){x===void 0&&(x=0),w===void 0&&(w=!0);var b=w?W2:H2,v=Ho(i.width,i.height,x),C=Ho(i.naturalWidth,i.naturalHeight,x),A={x:b(100,((v.width-a.width/m)/2-t.x/m)/v.width*100),y:b(100,((v.height-a.height/m)/2-t.y/m)/v.height*100),width:b(100,a.width/v.width*100/m),height:b(100,a.height/v.height*100/m)},T=Math.round(b(C.width,A.width*C.width/100)),_=Math.round(b(C.height,A.height*C.height/100)),O=C.width>=C.height*u,L=O?{width:Math.round(_*u),height:_}:{width:T,height:Math.round(T/u)},B=dr(dr({},L),{x:Math.round(b(C.width-L.width,A.x*C.width/100)),y:Math.round(b(C.height-L.height,A.y*C.height/100))});return{croppedAreaPercentages:A,croppedAreaPixels:B}}function W2(t,i){return Math.min(t,Math.max(0,i))}function H2(t,i){return i}function G2(t,i,a,u,m,x){var w=Ho(i.width,i.height,a),b=Fc(u.width/w.width*(100/t.width),m,x),v={x:b*w.width/2-u.width/2-w.width*b*(t.x/100),y:b*w.height/2-u.height/2-w.height*b*(t.y/100)};return{crop:v,zoom:b}}function X2(t,i,a){var u=U2(i);return a.height>a.width?a.height/(t.height*u):a.width/(t.width*u)}function Y2(t,i,a,u,m,x){a===void 0&&(a=0);var w=Ho(i.naturalWidth,i.naturalHeight,a),b=Fc(X2(t,i,u),m,x),v=u.height>u.width?u.height/t.height:u.width/t.width,C={x:((w.width-t.width)/2-t.x)*v,y:((w.height-t.height)/2-t.y)*v};return{crop:C,zoom:b}}function A1(t,i){return{x:(i.x+t.x)/2,y:(i.y+t.y)/2}}function $2(t){return t*Math.PI/180}function Ho(t,i,a){var u=$2(a);return{width:Math.abs(Math.cos(u)*t)+Math.abs(Math.sin(u)*i),height:Math.abs(Math.sin(u)*t)+Math.abs(Math.cos(u)*i)}}function Fc(t,i,a){return Math.min(Math.max(t,i),a)}function uc(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return t.filter(function(a){return typeof a=="string"&&a.length>0}).join(" ").trim()}var Z2=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,K2=1,q2=3,Q2=1,Vc=function(t){P2(i,t);function i(){var a=t!==null&&t.apply(this,arguments)||this;return a.imageRef=N.createRef(),a.videoRef=N.createRef(),a.containerPosition={x:0,y:0},a.containerRef=null,a.styleRef=null,a.containerRect=null,a.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},a.dragStartPosition={x:0,y:0},a.dragStartCrop={x:0,y:0},a.gestureZoomStart=0,a.gestureRotationStart=0,a.isTouching=!1,a.lastPinchDistance=0,a.lastPinchRotation=0,a.rafDragTimeout=null,a.rafPinchTimeout=null,a.wheelTimer=null,a.currentDoc=typeof document<"u"?document:null,a.currentWindow=typeof window<"u"?window:null,a.resizeObserver=null,a.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},a.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!a.containerRef)){var u=!0;a.resizeObserver=new window.ResizeObserver(function(m){if(u){u=!1;return}a.computeSizes()}),a.resizeObserver.observe(a.containerRef)}},a.preventZoomSafari=function(u){return u.preventDefault()},a.cleanEvents=function(){a.currentDoc&&(a.currentDoc.removeEventListener("mousemove",a.onMouseMove),a.currentDoc.removeEventListener("mouseup",a.onDragStopped),a.currentDoc.removeEventListener("touchmove",a.onTouchMove),a.currentDoc.removeEventListener("touchend",a.onDragStopped),a.currentDoc.removeEventListener("gesturemove",a.onGestureMove),a.currentDoc.removeEventListener("gestureend",a.onGestureEnd),a.currentDoc.removeEventListener("scroll",a.onScroll))},a.clearScrollEvent=function(){a.containerRef&&a.containerRef.removeEventListener("wheel",a.onWheel),a.wheelTimer&&clearTimeout(a.wheelTimer)},a.onMediaLoad=function(){var u=a.computeSizes();u&&(a.emitCropData(),a.setInitialCrop(u)),a.props.onMediaLoaded&&a.props.onMediaLoaded(a.mediaSize)},a.setInitialCrop=function(u){if(a.props.initialCroppedAreaPercentages){var m=G2(a.props.initialCroppedAreaPercentages,a.mediaSize,a.props.rotation,u,a.props.minZoom,a.props.maxZoom),x=m.crop,w=m.zoom;a.props.onCropChange(x),a.props.onZoomChange&&a.props.onZoomChange(w)}else if(a.props.initialCroppedAreaPixels){var b=Y2(a.props.initialCroppedAreaPixels,a.mediaSize,a.props.rotation,u,a.props.minZoom,a.props.maxZoom),x=b.crop,w=b.zoom;a.props.onCropChange(x),a.props.onZoomChange&&a.props.onZoomChange(w)}},a.computeSizes=function(){var u,m,x,w,b,v,C=a.imageRef.current||a.videoRef.current;if(C&&a.containerRef){a.containerRect=a.containerRef.getBoundingClientRect(),a.saveContainerPosition();var A=a.containerRect.width/a.containerRect.height,T=((u=a.imageRef.current)===null||u===void 0?void 0:u.naturalWidth)||((m=a.videoRef.current)===null||m===void 0?void 0:m.videoWidth)||0,_=((x=a.imageRef.current)===null||x===void 0?void 0:x.naturalHeight)||((w=a.videoRef.current)===null||w===void 0?void 0:w.videoHeight)||0,O=C.offsetWidth<T||C.offsetHeight<_,L=T/_,B=void 0;if(O)switch(a.state.mediaObjectFit){default:case"contain":B=A>L?{width:a.containerRect.height*L,height:a.containerRect.height}:{width:a.containerRect.width,height:a.containerRect.width/L};break;case"horizontal-cover":B={width:a.containerRect.width,height:a.containerRect.width/L};break;case"vertical-cover":B={width:a.containerRect.height*L,height:a.containerRect.height};break}else B={width:C.offsetWidth,height:C.offsetHeight};a.mediaSize=dr(dr({},B),{naturalWidth:T,naturalHeight:_}),a.props.setMediaSize&&a.props.setMediaSize(a.mediaSize);var j=a.props.cropSize?a.props.cropSize:V2(a.mediaSize.width,a.mediaSize.height,a.containerRect.width,a.containerRect.height,a.props.aspect,a.props.rotation);return(((b=a.state.cropSize)===null||b===void 0?void 0:b.height)!==j.height||((v=a.state.cropSize)===null||v===void 0?void 0:v.width)!==j.width)&&a.props.onCropSizeChange&&a.props.onCropSizeChange(j),a.setState({cropSize:j},a.recomputeCropPosition),a.props.setCropSize&&a.props.setCropSize(j),j}},a.saveContainerPosition=function(){if(a.containerRef){var u=a.containerRef.getBoundingClientRect();a.containerPosition={x:u.left,y:u.top}}},a.onMouseDown=function(u){a.currentDoc&&(u.preventDefault(),a.currentDoc.addEventListener("mousemove",a.onMouseMove),a.currentDoc.addEventListener("mouseup",a.onDragStopped),a.saveContainerPosition(),a.onDragStart(i.getMousePoint(u)))},a.onMouseMove=function(u){return a.onDrag(i.getMousePoint(u))},a.onScroll=function(u){a.currentDoc&&(u.preventDefault(),a.saveContainerPosition())},a.onTouchStart=function(u){a.currentDoc&&(a.isTouching=!0,!(a.props.onTouchRequest&&!a.props.onTouchRequest(u))&&(a.currentDoc.addEventListener("touchmove",a.onTouchMove,{passive:!1}),a.currentDoc.addEventListener("touchend",a.onDragStopped),a.saveContainerPosition(),u.touches.length===2?a.onPinchStart(u):u.touches.length===1&&a.onDragStart(i.getTouchPoint(u.touches[0]))))},a.onTouchMove=function(u){u.preventDefault(),u.touches.length===2?a.onPinchMove(u):u.touches.length===1&&a.onDrag(i.getTouchPoint(u.touches[0]))},a.onGestureStart=function(u){a.currentDoc&&(u.preventDefault(),a.currentDoc.addEventListener("gesturechange",a.onGestureMove),a.currentDoc.addEventListener("gestureend",a.onGestureEnd),a.gestureZoomStart=a.props.zoom,a.gestureRotationStart=a.props.rotation)},a.onGestureMove=function(u){if(u.preventDefault(),!a.isTouching){var m=i.getMousePoint(u),x=a.gestureZoomStart-1+u.scale;if(a.setNewZoom(x,m,{shouldUpdatePosition:!0}),a.props.onRotationChange){var w=a.gestureRotationStart+u.rotation;a.props.onRotationChange(w)}}},a.onGestureEnd=function(u){a.cleanEvents()},a.onDragStart=function(u){var m,x,w=u.x,b=u.y;a.dragStartPosition={x:w,y:b},a.dragStartCrop=dr({},a.props.crop),(x=(m=a.props).onInteractionStart)===null||x===void 0||x.call(m)},a.onDrag=function(u){var m=u.x,x=u.y;a.currentWindow&&(a.rafDragTimeout&&a.currentWindow.cancelAnimationFrame(a.rafDragTimeout),a.rafDragTimeout=a.currentWindow.requestAnimationFrame(function(){if(a.state.cropSize&&!(m===void 0||x===void 0)){var w=m-a.dragStartPosition.x,b=x-a.dragStartPosition.y,v={x:a.dragStartCrop.x+w,y:a.dragStartCrop.y+b},C=a.props.restrictPosition?_a(v,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):v;a.props.onCropChange(C)}}))},a.onDragStopped=function(){var u,m;a.isTouching=!1,a.cleanEvents(),a.emitCropData(),(m=(u=a.props).onInteractionEnd)===null||m===void 0||m.call(u)},a.onWheel=function(u){if(a.currentWindow&&!(a.props.onWheelRequest&&!a.props.onWheelRequest(u))){u.preventDefault();var m=i.getMousePoint(u),x=F2(u).pixelY,w=a.props.zoom-x*a.props.zoomSpeed/200;a.setNewZoom(w,m,{shouldUpdatePosition:!0}),a.state.hasWheelJustStarted||a.setState({hasWheelJustStarted:!0},function(){var b,v;return(v=(b=a.props).onInteractionStart)===null||v===void 0?void 0:v.call(b)}),a.wheelTimer&&clearTimeout(a.wheelTimer),a.wheelTimer=a.currentWindow.setTimeout(function(){return a.setState({hasWheelJustStarted:!1},function(){var b,v;return(v=(b=a.props).onInteractionEnd)===null||v===void 0?void 0:v.call(b)})},250)}},a.getPointOnContainer=function(u,m){var x=u.x,w=u.y;if(!a.containerRect)throw new Error("The Cropper is not mounted");return{x:a.containerRect.width/2-(x-m.x),y:a.containerRect.height/2-(w-m.y)}},a.getPointOnMedia=function(u){var m=u.x,x=u.y,w=a.props,b=w.crop,v=w.zoom;return{x:(m+b.x)/v,y:(x+b.y)/v}},a.setNewZoom=function(u,m,x){var w=x===void 0?{}:x,b=w.shouldUpdatePosition,v=b===void 0?!0:b;if(!(!a.state.cropSize||!a.props.onZoomChange)){var C=Fc(u,a.props.minZoom,a.props.maxZoom);if(v){var A=a.getPointOnContainer(m,a.containerPosition),T=a.getPointOnMedia(A),_={x:T.x*C-A.x,y:T.y*C-A.y},O=a.props.restrictPosition?_a(_,a.mediaSize,a.state.cropSize,C,a.props.rotation):_;a.props.onCropChange(O)}a.props.onZoomChange(C)}},a.getCropData=function(){if(!a.state.cropSize)return null;var u=a.props.restrictPosition?_a(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;return z2(u,a.mediaSize,a.state.cropSize,a.getAspect(),a.props.zoom,a.props.rotation,a.props.restrictPosition)},a.emitCropData=function(){var u=a.getCropData();if(u){var m=u.croppedAreaPercentages,x=u.croppedAreaPixels;a.props.onCropComplete&&a.props.onCropComplete(m,x),a.props.onCropAreaChange&&a.props.onCropAreaChange(m,x)}},a.emitCropAreaChange=function(){var u=a.getCropData();if(u){var m=u.croppedAreaPercentages,x=u.croppedAreaPixels;a.props.onCropAreaChange&&a.props.onCropAreaChange(m,x)}},a.recomputeCropPosition=function(){if(a.state.cropSize){var u=a.props.restrictPosition?_a(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;a.props.onCropChange(u),a.emitCropData()}},a.onKeyDown=function(u){var m=a.props,x=m.crop,w=m.onCropChange,b=m.keyboardStep,v=m.zoom,C=m.rotation,A=b;if(a.state.cropSize){u.shiftKey&&(A*=.2);var T=dr({},x);switch(u.key){case"ArrowUp":T.y-=A,u.preventDefault();break;case"ArrowDown":T.y+=A,u.preventDefault();break;case"ArrowLeft":T.x-=A,u.preventDefault();break;case"ArrowRight":T.x+=A,u.preventDefault();break;default:return}a.props.restrictPosition&&(T=_a(T,a.mediaSize,a.state.cropSize,v,C)),w(T)}},a}return i.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=Z2,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef))},i.prototype.componentWillUnmount=function(){var a,u;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(a=this.resizeObserver)===null||a===void 0||a.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((u=this.styleRef.parentNode)===null||u===void 0||u.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},i.prototype.componentDidUpdate=function(a){var u,m,x,w,b,v,C,A,T;a.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):a.aspect!==this.props.aspect?this.computeSizes():a.objectFit!==this.props.objectFit?this.computeSizes():a.zoom!==this.props.zoom?this.recomputeCropPosition():((u=a.cropSize)===null||u===void 0?void 0:u.height)!==((m=this.props.cropSize)===null||m===void 0?void 0:m.height)||((x=a.cropSize)===null||x===void 0?void 0:x.width)!==((w=this.props.cropSize)===null||w===void 0?void 0:w.width)?this.computeSizes():(((b=a.crop)===null||b===void 0?void 0:b.x)!==((v=this.props.crop)===null||v===void 0?void 0:v.x)||((C=a.crop)===null||C===void 0?void 0:C.y)!==((A=this.props.crop)===null||A===void 0?void 0:A.y))&&this.emitCropAreaChange(),a.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),a.video!==this.props.video&&((T=this.videoRef.current)===null||T===void 0||T.load());var _=this.getObjectFit();_!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:_},this.computeSizes)},i.prototype.getAspect=function(){var a=this.props,u=a.cropSize,m=a.aspect;return u?u.width/u.height:m},i.prototype.getObjectFit=function(){var a,u,m,x;if(this.props.objectFit==="cover"){var w=this.imageRef.current||this.videoRef.current;if(w&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var b=this.containerRect.width/this.containerRect.height,v=((a=this.imageRef.current)===null||a===void 0?void 0:a.naturalWidth)||((u=this.videoRef.current)===null||u===void 0?void 0:u.videoWidth)||0,C=((m=this.imageRef.current)===null||m===void 0?void 0:m.naturalHeight)||((x=this.videoRef.current)===null||x===void 0?void 0:x.videoHeight)||0,A=v/C;return A<b?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},i.prototype.onPinchStart=function(a){var u=i.getTouchPoint(a.touches[0]),m=i.getTouchPoint(a.touches[1]);this.lastPinchDistance=E1(u,m),this.lastPinchRotation=S1(u,m),this.onDragStart(A1(u,m))},i.prototype.onPinchMove=function(a){var u=this;if(!(!this.currentDoc||!this.currentWindow)){var m=i.getTouchPoint(a.touches[0]),x=i.getTouchPoint(a.touches[1]),w=A1(m,x);this.onDrag(w),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var b=E1(m,x),v=u.props.zoom*(b/u.lastPinchDistance);u.setNewZoom(v,w,{shouldUpdatePosition:!1}),u.lastPinchDistance=b;var C=S1(m,x),A=u.props.rotation+(C-u.lastPinchRotation);u.props.onRotationChange&&u.props.onRotationChange(A),u.lastPinchRotation=C})}},i.prototype.render=function(){var a=this,u,m=this.props,x=m.image,w=m.video,b=m.mediaProps,v=m.transform,C=m.crop,A=C.x,T=C.y,_=m.rotation,O=m.zoom,L=m.cropShape,B=m.showGrid,j=m.style,W=j.containerStyle,U=j.cropAreaStyle,F=j.mediaStyle,Y=m.classes,K=Y.containerClassName,ne=Y.cropAreaClassName,q=Y.mediaClassName,ie=(u=this.state.mediaObjectFit)!==null&&u!==void 0?u:this.getObjectFit();return N.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(we){return a.containerRef=we},"data-testid":"container",style:W,className:uc("reactEasyCrop_Container",K)},x?N.createElement("img",dr({alt:"",className:uc("reactEasyCrop_Image",ie==="contain"&&"reactEasyCrop_Contain",ie==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",ie==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",q)},b,{src:x,ref:this.imageRef,style:dr(dr({},F),{transform:v||"translate(".concat(A,"px, ").concat(T,"px) rotate(").concat(_,"deg) scale(").concat(O,")")}),onLoad:this.onMediaLoad})):w&&N.createElement("video",dr({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:uc("reactEasyCrop_Video",ie==="contain"&&"reactEasyCrop_Contain",ie==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",ie==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",q)},b,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:dr(dr({},F),{transform:v||"translate(".concat(A,"px, ").concat(T,"px) rotate(").concat(_,"deg) scale(").concat(O,")")}),controls:!1}),(Array.isArray(w)?w:[{src:w}]).map(function(J){return N.createElement("source",dr({key:J.src},J))})),this.state.cropSize&&N.createElement("div",{style:dr(dr({},U),{width:this.state.cropSize.width,height:this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,"data-testid":"cropper",className:uc("reactEasyCrop_CropArea",L==="round"&&"reactEasyCrop_CropAreaRound",B&&"reactEasyCrop_CropAreaGrid",ne)}))},i.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:q2,minZoom:K2,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:Q2},i.getMousePoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},i.getTouchPoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},i}(N.Component),Ra={},N1;function J2(){return N1||(N1=1,Ra.createCanvas=function(t,i){return Object.assign(document.createElement("canvas"),{width:t,height:i})},Ra.createImageData=function(t,i,a){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(t);case 2:return new ImageData(t,i);default:return new ImageData(t,i,a)}},Ra.loadImage=function(t,i){return new Promise(function(a,u){const m=Object.assign(document.createElement("img"),i);function x(){m.onload=null,m.onerror=null}m.onload=function(){x(),a(m)},m.onerror=function(){x(),u(new Error('Failed to load the image "'+t+'"'))},m.src=t})}),Ra}J2();async function Uc(t,i){return console.log("Image source being cropped:",t),new Promise((a,u)=>{const m=new Image;m.onload=()=>{const x=document.createElement("canvas"),w=x.getContext("2d");x.width=i.width,x.height=i.height,w.drawImage(m,i.x,i.y,i.width,i.height,0,0,i.width,i.height);try{const b=x.toDataURL("image/jpeg");a(b)}catch{u(new Error("Error converting canvas to base64"))}},m.onerror=x=>u(new Error(`Image load error: ${x.message}`)),m.src=t})}async function yt(t,i={}){const a=localStorage.getItem("access_token"),u={...i,credentials:"include",headers:{...a&&{Authorization:`Bearer ${a}`},...i.headers}};return fetch(`${window.server_url}${t}`,u)}const ey=({onSubmit:t,onClose:i,existingProfile:a})=>{const{user:u,userProfile:m,checkAuth:x}=N.useContext(Fn),[w,b]=N.useState({name:(m==null?void 0:m.name)||"",image:null,imagePreview:m!=null&&m.image_data?`data:image/jpeg;base64,${m.image_data}`:"/assets/fakeprofile.png",croppedImage:null}),[v,C]=N.useState({x:0,y:0}),[A,T]=N.useState(1),[_,O]=N.useState(null),[L,B]=N.useState(!1),[j,W]=N.useState(!1),U=K=>{const ne=K.target.files[0];if(ne){const q=new FileReader;q.onload=ie=>{b(J=>({...J,image:ne,imagePreview:ie.target.result})),B(!0)},q.readAsDataURL(ne)}},F=(K,ne)=>{console.log("Cropped Area Pixels:",ne),O(ne)};async function Y(K){K.preventDefault();let ne;if(w.croppedImage)ne=w.croppedImage.split(",")[1];else if(w.image instanceof File){const ie=await w.image.arrayBuffer();ne=btoa(new Uint8Array(ie).reduce((J,we)=>J+String.fromCharCode(we),""))}else if(m!=null&&m.image_data)ne=m.image_data;else{console.error("No valid image provided");return}const q={name:w.name,image_data:ne};console.log("Image data (first 100 chars):",ne.substring(0,100));try{const ie=await yt("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(q)});if(!ie.ok)throw new Error("Failed to update profile");const J=await ie.json();await x(),console.log("Profile updated successfully:",J),i()}catch(ie){console.error("Error updating profile:",ie)}}return h.jsx("div",{className:"profile-creation-overlay",style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:h.jsxs("div",{className:"profile-creation-modal",style:{width:"70%",maxWidth:"500px",backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",padding:"2rem",boxShadow:"0 10px 30px rgba(20,77,255,0.15)",position:"relative",border:"1px solid rgba(20,77,255,0.1)"},children:[h.jsx("button",{onClick:i,style:{position:"absolute",top:"1.2rem",right:"1.2rem",background:"none",border:"none",fontSize:"1.8rem",cursor:"pointer",color:"#144dff",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.1)"}},children:""}),h.jsx("h2",{style:{fontSize:"clamp(1.8rem, 6vw, 2.5rem)",color:"#144dff",textAlign:"center",marginBottom:"2rem",fontWeight:"600"},children:"Your Profile"}),h.jsxs("form",{onSubmit:Y,style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[h.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem"},children:[h.jsx("label",{style:{color:"#144dff",fontWeight:"500",fontSize:"1rem"},children:"Your Name"}),h.jsx("input",{type:"text",value:w.name,onChange:K=>b({...w,name:K.target.value}),style:{width:"100%",padding:"12px",borderRadius:"12px",border:"2px solid #e0e0e0",fontSize:"0.9rem",transition:"all 0.3s ease",backgroundColor:"rgba(255,255,255,0.9)","&:focus":{borderColor:"#144dff",outline:"none",boxShadow:"0 0 0 3px rgba(20,77,255,0.1)"}}})]}),!L&&h.jsx("div",{style:{width:"250px",height:"250px",margin:"0 auto",borderRadius:"20%",overflow:"hidden",border:"7px solid #144dff",boxShadow:"0 8px 25px rgba(20,77,255,0.2)",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.02)"}},children:h.jsx("img",{src:w.croppedImage?w.croppedImage:w.imagePreview?w.imagePreview:m!=null&&m.image_data?`data:image/jpeg;base64,${m.image_data}`:"/assets/fakeprofile.png",alt:"Profile preview",style:{width:"100%",height:"100%",objectFit:"cover"}})}),h.jsxs("div",{style:{textAlign:"center"},children:[h.jsx("input",{type:"file",id:"image-upload",accept:"image/*",onChange:U,style:{display:"none"}}),h.jsx("label",{htmlFor:"image-upload",style:{padding:"0.8rem 1.2rem",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",borderRadius:"25px",cursor:"pointer",display:"inline-block",fontSize:"0.9rem",fontWeight:"600",boxShadow:"0 4px 15px rgba(20,77,255,0.2)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Upload New Image"})]}),L&&h.jsxs("div",{style:{width:"100%",maxWidth:"300px",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",gap:"1.2rem"},children:[h.jsx("div",{style:{position:"relative",width:"250px",height:"250px",borderRadius:"20%",overflow:"hidden",border:"7px solid #144dff",boxShadow:"0 8px 25px rgba(20,77,255,0.2)"},children:h.jsx(Vc,{image:w.imagePreview,crop:v,zoom:A,aspect:1,onCropComplete:F,onCropChange:C,onZoomChange:T})}),h.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[h.jsx("button",{type:"button",onClick:()=>{B(!1),w.croppedImage||b(K=>({...K,imagePreview:null}))},style:{padding:"0.8rem 1.2rem",borderRadius:"25px",border:"2px solid #144dff",background:"white",color:"#144dff",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease","&:hover":{background:"rgba(20,77,255,0.1)"}},children:"Cancel"}),h.jsx("button",{type:"button",onClick:async()=>{try{const K=await Uc(w.imagePreview,_);b(ne=>({...ne,croppedImage:K,imagePreview:K})),B(!1),W(!0),setTimeout(()=>W(!1),1e4)}catch(K){console.error("Error cropping image:",K)}},className:`save-profile-button ${j?"glow-bounce":""}`,style:{padding:"0.8rem 1.2rem",borderRadius:"25px",border:"none",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(20,77,255,0.2)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Save Cropped Image"})]})]}),h.jsx("button",{type:"submit",className:`save-profile-button ${j?"glow-bounce":""}`,style:{padding:"1rem",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",border:"none",borderRadius:"25px",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",marginTop:"1rem",boxShadow:"0 4px 15px rgba(20,77,255,0.2)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Save Profile"})]})]})})};var ka={},I1;function ty(){if(I1)return ka;I1=1,Object.defineProperty(ka,"__esModule",{value:!0}),ka.parse=w,ka.serialize=C;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,i=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,u=/^[\u0020-\u003A\u003D-\u007E]*$/,m=Object.prototype.toString,x=(()=>{const _=function(){};return _.prototype=Object.create(null),_})();function w(_,O){const L=new x,B=_.length;if(B<2)return L;const j=(O==null?void 0:O.decode)||A;let W=0;do{const U=_.indexOf("=",W);if(U===-1)break;const F=_.indexOf(";",W),Y=F===-1?B:F;if(U>Y){W=_.lastIndexOf(";",U-1)+1;continue}const K=b(_,W,U),ne=v(_,U,K),q=_.slice(K,ne);if(L[q]===void 0){let ie=b(_,U+1,Y),J=v(_,Y,ie);const we=j(_.slice(ie,J));L[q]=we}W=Y+1}while(W<B);return L}function b(_,O,L){do{const B=_.charCodeAt(O);if(B!==32&&B!==9)return O}while(++O<L);return L}function v(_,O,L){for(;O>L;){const B=_.charCodeAt(--O);if(B!==32&&B!==9)return O+1}return L}function C(_,O,L){const B=(L==null?void 0:L.encode)||encodeURIComponent;if(!t.test(_))throw new TypeError(`argument name is invalid: ${_}`);const j=B(O);if(!i.test(j))throw new TypeError(`argument val is invalid: ${O}`);let W=_+"="+j;if(!L)return W;if(L.maxAge!==void 0){if(!Number.isInteger(L.maxAge))throw new TypeError(`option maxAge is invalid: ${L.maxAge}`);W+="; Max-Age="+L.maxAge}if(L.domain){if(!a.test(L.domain))throw new TypeError(`option domain is invalid: ${L.domain}`);W+="; Domain="+L.domain}if(L.path){if(!u.test(L.path))throw new TypeError(`option path is invalid: ${L.path}`);W+="; Path="+L.path}if(L.expires){if(!T(L.expires)||!Number.isFinite(L.expires.valueOf()))throw new TypeError(`option expires is invalid: ${L.expires}`);W+="; Expires="+L.expires.toUTCString()}if(L.httpOnly&&(W+="; HttpOnly"),L.secure&&(W+="; Secure"),L.partitioned&&(W+="; Partitioned"),L.priority)switch(typeof L.priority=="string"?L.priority.toLowerCase():void 0){case"low":W+="; Priority=Low";break;case"medium":W+="; Priority=Medium";break;case"high":W+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${L.priority}`)}if(L.sameSite)switch(typeof L.sameSite=="string"?L.sameSite.toLowerCase():L.sameSite){case!0:case"strict":W+="; SameSite=Strict";break;case"lax":W+="; SameSite=Lax";break;case"none":W+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${L.sameSite}`)}return W}function A(_){if(_.indexOf("%")===-1)return _;try{return decodeURIComponent(_)}catch{return _}}function T(_){return m.call(_)==="[object Date]"}return ka}ty();/**
 * react-router v7.0.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var T1="popstate";function ny(t={}){function i(u,m){let{pathname:x,search:w,hash:b}=u.location;return $d("",{pathname:x,search:w,hash:b},m.state&&m.state.usr||null,m.state&&m.state.key||"default")}function a(u,m){return typeof m=="string"?m:Ha(m)}return iy(i,a,null,t)}function bn(t,i){if(t===!1||t===null||typeof t>"u")throw new Error(i)}function fi(t,i){if(!t){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function ry(){return Math.random().toString(36).substring(2,10)}function _1(t,i){return{usr:t.state,key:t.key,idx:i}}function $d(t,i,a=null,u){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof i=="string"?Xo(i):i,state:a,key:i&&i.key||u||ry()}}function Ha({pathname:t="/",search:i="",hash:a=""}){return i&&i!=="?"&&(t+=i.charAt(0)==="?"?i:"?"+i),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function Xo(t){let i={};if(t){let a=t.indexOf("#");a>=0&&(i.hash=t.substring(a),t=t.substring(0,a));let u=t.indexOf("?");u>=0&&(i.search=t.substring(u),t=t.substring(0,u)),t&&(i.pathname=t)}return i}function iy(t,i,a,u={}){let{window:m=document.defaultView,v5Compat:x=!1}=u,w=m.history,b="POP",v=null,C=A();C==null&&(C=0,w.replaceState({...w.state,idx:C},""));function A(){return(w.state||{idx:null}).idx}function T(){b="POP";let j=A(),W=j==null?null:j-C;C=j,v&&v({action:b,location:B.location,delta:W})}function _(j,W){b="PUSH";let U=$d(B.location,j,W);C=A()+1;let F=_1(U,C),Y=B.createHref(U);try{w.pushState(F,"",Y)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;m.location.assign(Y)}x&&v&&v({action:b,location:B.location,delta:1})}function O(j,W){b="REPLACE";let U=$d(B.location,j,W);C=A();let F=_1(U,C),Y=B.createHref(U);w.replaceState(F,"",Y),x&&v&&v({action:b,location:B.location,delta:0})}function L(j){let W=m.location.origin!=="null"?m.location.origin:m.location.href,U=typeof j=="string"?j:Ha(j);return U=U.replace(/ $/,"%20"),bn(W,`No window.location.(origin|href) available to create URL for href: ${U}`),new URL(U,W)}let B={get action(){return b},get location(){return t(m,w)},listen(j){if(v)throw new Error("A history only accepts one active listener");return m.addEventListener(T1,T),v=j,()=>{m.removeEventListener(T1,T),v=null}},createHref(j){return i(m,j)},createURL:L,encodeLocation(j){let W=L(j);return{pathname:W.pathname,search:W.search,hash:W.hash}},push:_,replace:O,go(j){return w.go(j)}};return B}function hp(t,i,a="/"){return sy(t,i,a,!1)}function sy(t,i,a,u){let m=typeof i=="string"?Xo(i):i,x=Ns(m.pathname||"/",a);if(x==null)return null;let w=mp(t);oy(w);let b=null;for(let v=0;b==null&&v<w.length;++v){let C=xy(x);b=py(w[v],C,u)}return b}function mp(t,i=[],a=[],u=""){let m=(x,w,b)=>{let v={relativePath:b===void 0?x.path||"":b,caseSensitive:x.caseSensitive===!0,childrenIndex:w,route:x};v.relativePath.startsWith("/")&&(bn(v.relativePath.startsWith(u),`Absolute route path "${v.relativePath}" nested under path "${u}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(u.length));let C=$i([u,v.relativePath]),A=a.concat(v);x.children&&x.children.length>0&&(bn(x.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${C}".`),mp(x.children,i,A,C)),!(x.path==null&&!x.index)&&i.push({path:C,score:hy(C,x.index),routesMeta:A})};return t.forEach((x,w)=>{var b;if(x.path===""||!((b=x.path)!=null&&b.includes("?")))m(x,w);else for(let v of pp(x.path))m(x,w,v)}),i}function pp(t){let i=t.split("/");if(i.length===0)return[];let[a,...u]=i,m=a.endsWith("?"),x=a.replace(/\?$/,"");if(u.length===0)return m?[x,""]:[x];let w=pp(u.join("/")),b=[];return b.push(...w.map(v=>v===""?x:[x,v].join("/"))),m&&b.push(...w),b.map(v=>t.startsWith("/")&&v===""?"/":v)}function oy(t){t.sort((i,a)=>i.score!==a.score?a.score-i.score:my(i.routesMeta.map(u=>u.childrenIndex),a.routesMeta.map(u=>u.childrenIndex)))}var ay=/^:[\w-]+$/,ly=3,cy=2,uy=1,dy=10,fy=-2,R1=t=>t==="*";function hy(t,i){let a=t.split("/"),u=a.length;return a.some(R1)&&(u+=fy),i&&(u+=cy),a.filter(m=>!R1(m)).reduce((m,x)=>m+(ay.test(x)?ly:x===""?uy:dy),u)}function my(t,i){return t.length===i.length&&t.slice(0,-1).every((u,m)=>u===i[m])?t[t.length-1]-i[i.length-1]:0}function py(t,i,a=!1){let{routesMeta:u}=t,m={},x="/",w=[];for(let b=0;b<u.length;++b){let v=u[b],C=b===u.length-1,A=x==="/"?i:i.slice(x.length)||"/",T=Ic({path:v.relativePath,caseSensitive:v.caseSensitive,end:C},A),_=v.route;if(!T&&C&&a&&!u[u.length-1].route.index&&(T=Ic({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},A)),!T)return null;Object.assign(m,T.params),w.push({params:m,pathname:$i([x,T.pathname]),pathnameBase:Cy($i([x,T.pathnameBase])),route:_}),T.pathnameBase!=="/"&&(x=$i([x,T.pathnameBase]))}return w}function Ic(t,i){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,u]=gy(t.path,t.caseSensitive,t.end),m=i.match(a);if(!m)return null;let x=m[0],w=x.replace(/(.)\/+$/,"$1"),b=m.slice(1);return{params:u.reduce((C,{paramName:A,isOptional:T},_)=>{if(A==="*"){let L=b[_]||"";w=x.slice(0,x.length-L.length).replace(/(.)\/+$/,"$1")}const O=b[_];return T&&!O?C[A]=void 0:C[A]=(O||"").replace(/%2F/g,"/"),C},{}),pathname:x,pathnameBase:w,pattern:t}}function gy(t,i=!1,a=!0){fi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let u=[],m="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(w,b,v)=>(u.push({paramName:b,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(u.push({paramName:"*"}),m+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?m+="\\/*$":t!==""&&t!=="/"&&(m+="(?:(?=\\/|$))"),[new RegExp(m,i?void 0:"i"),u]}function xy(t){try{return t.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return fi(!1,`The URL path "${t}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${i}).`),t}}function Ns(t,i){if(i==="/")return t;if(!t.toLowerCase().startsWith(i.toLowerCase()))return null;let a=i.endsWith("/")?i.length-1:i.length,u=t.charAt(a);return u&&u!=="/"?null:t.slice(a)||"/"}function yy(t,i="/"){let{pathname:a,search:u="",hash:m=""}=typeof t=="string"?Xo(t):t;return{pathname:a?a.startsWith("/")?a:wy(a,i):i,search:by(u),hash:Ey(m)}}function wy(t,i){let a=i.replace(/\/+$/,"").split("/");return t.split("/").forEach(m=>{m===".."?a.length>1&&a.pop():m!=="."&&a.push(m)}),a.length>1?a.join("/"):"/"}function Id(t,i,a,u){return`Cannot include a '${t}' character in a manually specified \`to.${i}\` field [${JSON.stringify(u)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vy(t){return t.filter((i,a)=>a===0||i.route.path&&i.route.path.length>0)}function gp(t){let i=vy(t);return i.map((a,u)=>u===i.length-1?a.pathname:a.pathnameBase)}function xp(t,i,a,u=!1){let m;typeof t=="string"?m=Xo(t):(m={...t},bn(!m.pathname||!m.pathname.includes("?"),Id("?","pathname","search",m)),bn(!m.pathname||!m.pathname.includes("#"),Id("#","pathname","hash",m)),bn(!m.search||!m.search.includes("#"),Id("#","search","hash",m)));let x=t===""||m.pathname==="",w=x?"/":m.pathname,b;if(w==null)b=a;else{let T=i.length-1;if(!u&&w.startsWith("..")){let _=w.split("/");for(;_[0]==="..";)_.shift(),T-=1;m.pathname=_.join("/")}b=T>=0?i[T]:"/"}let v=yy(m,b),C=w&&w!=="/"&&w.endsWith("/"),A=(x||w===".")&&a.endsWith("/");return!v.pathname.endsWith("/")&&(C||A)&&(v.pathname+="/"),v}var $i=t=>t.join("/").replace(/\/\/+/g,"/"),Cy=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),by=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Ey=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Sy(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var yp=["POST","PUT","PATCH","DELETE"];new Set(yp);var Ay=["GET",...yp];new Set(Ay);var Yo=N.createContext(null);Yo.displayName="DataRouter";var zc=N.createContext(null);zc.displayName="DataRouterState";var wp=N.createContext({isTransitioning:!1});wp.displayName="ViewTransition";var Ny=N.createContext(new Map);Ny.displayName="Fetchers";var Iy=N.createContext(null);Iy.displayName="Await";var Si=N.createContext(null);Si.displayName="Navigation";var qa=N.createContext(null);qa.displayName="Location";var Ai=N.createContext({outlet:null,matches:[],isDataRoute:!1});Ai.displayName="Route";var If=N.createContext(null);If.displayName="RouteError";function Ty(t,{relative:i}={}){bn(Qa(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:u}=N.useContext(Si),{hash:m,pathname:x,search:w}=Ja(t,{relative:i}),b=x;return a!=="/"&&(b=x==="/"?a:$i([a,x])),u.createHref({pathname:b,search:w,hash:m})}function Qa(){return N.useContext(qa)!=null}function Br(){return bn(Qa(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(qa).location}var vp="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Cp(t){N.useContext(Si).static||N.useLayoutEffect(t)}function On(){let{isDataRoute:t}=N.useContext(Ai);return t?zy():_y()}function _y(){bn(Qa(),"useNavigate() may be used only in the context of a <Router> component.");let t=N.useContext(Yo),{basename:i,navigator:a}=N.useContext(Si),{matches:u}=N.useContext(Ai),{pathname:m}=Br(),x=JSON.stringify(gp(u)),w=N.useRef(!1);return Cp(()=>{w.current=!0}),N.useCallback((v,C={})=>{if(fi(w.current,vp),!w.current)return;if(typeof v=="number"){a.go(v);return}let A=xp(v,JSON.parse(x),m,C.relative==="path");t==null&&i!=="/"&&(A.pathname=A.pathname==="/"?i:$i([i,A.pathname])),(C.replace?a.replace:a.push)(A,C.state,C)},[i,a,x,m,t])}N.createContext(null);function Ry(){let{matches:t}=N.useContext(Ai),i=t[t.length-1];return i?i.params:{}}function Ja(t,{relative:i}={}){let{matches:a}=N.useContext(Ai),{pathname:u}=Br(),m=JSON.stringify(gp(a));return N.useMemo(()=>xp(t,JSON.parse(m),u,i==="path"),[t,m,u,i])}function ky(t,i){return bp(t,i)}function bp(t,i,a,u){var W;bn(Qa(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:m}=N.useContext(Si),{matches:x}=N.useContext(Ai),w=x[x.length-1],b=w?w.params:{},v=w?w.pathname:"/",C=w?w.pathnameBase:"/",A=w&&w.route;{let U=A&&A.path||"";Ep(v,!A||U.endsWith("*")||U.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${v}" (under <Route path="${U}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${U}"> to <Route path="${U==="/"?"*":`${U}/*`}">.`)}let T=Br(),_;if(i){let U=typeof i=="string"?Xo(i):i;bn(C==="/"||((W=U.pathname)==null?void 0:W.startsWith(C)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${C}" but pathname "${U.pathname}" was given in the \`location\` prop.`),_=U}else _=T;let O=_.pathname||"/",L=O;if(C!=="/"){let U=C.replace(/^\//,"").split("/");L="/"+O.replace(/^\//,"").split("/").slice(U.length).join("/")}let B=hp(t,{pathname:L});fi(A||B!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),fi(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=Ly(B&&B.map(U=>Object.assign({},U,{params:Object.assign({},b,U.params),pathname:$i([C,m.encodeLocation?m.encodeLocation(U.pathname).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?C:$i([C,m.encodeLocation?m.encodeLocation(U.pathnameBase).pathname:U.pathnameBase])})),x,a,u);return i&&j?N.createElement(qa.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},j):j}function Py(){let t=Uy(),i=Sy(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,u="rgba(200,200,200, 0.5)",m={padding:"0.5rem",backgroundColor:u},x={padding:"2px 4px",backgroundColor:u},w=null;return console.error("Error handled by React Router default ErrorBoundary:",t),w=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:x},"ErrorBoundary")," or"," ",N.createElement("code",{style:x},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},i),a?N.createElement("pre",{style:m},a):null,w)}var My=N.createElement(Py,null),Oy=class extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,i){return i.location!==t.location||i.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:i.error,location:i.location,revalidation:t.revalidation||i.revalidation}}componentDidCatch(t,i){console.error("React Router caught the following error during render",t,i)}render(){return this.state.error!==void 0?N.createElement(Ai.Provider,{value:this.props.routeContext},N.createElement(If.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Dy({routeContext:t,match:i,children:a}){let u=N.useContext(Yo);return u&&u.static&&u.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=i.route.id),N.createElement(Ai.Provider,{value:t},a)}function Ly(t,i=[],a=null,u=null){if(t==null){if(!a)return null;if(a.errors)t=a.matches;else if(i.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let m=t,x=a==null?void 0:a.errors;if(x!=null){let v=m.findIndex(C=>C.route.id&&(x==null?void 0:x[C.route.id])!==void 0);bn(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(x).join(",")}`),m=m.slice(0,Math.min(m.length,v+1))}let w=!1,b=-1;if(a)for(let v=0;v<m.length;v++){let C=m[v];if((C.route.HydrateFallback||C.route.hydrateFallbackElement)&&(b=v),C.route.id){let{loaderData:A,errors:T}=a,_=C.route.loader&&!A.hasOwnProperty(C.route.id)&&(!T||T[C.route.id]===void 0);if(C.route.lazy||_){w=!0,b>=0?m=m.slice(0,b+1):m=[m[0]];break}}}return m.reduceRight((v,C,A)=>{let T,_=!1,O=null,L=null;a&&(T=x&&C.route.id?x[C.route.id]:void 0,O=C.route.errorElement||My,w&&(b<0&&A===0?(Ep("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,L=null):b===A&&(_=!0,L=C.route.hydrateFallbackElement||null)));let B=i.concat(m.slice(0,A+1)),j=()=>{let W;return T?W=O:_?W=L:C.route.Component?W=N.createElement(C.route.Component,null):C.route.element?W=C.route.element:W=v,N.createElement(Dy,{match:C,routeContext:{outlet:v,matches:B,isDataRoute:a!=null},children:W})};return a&&(C.route.ErrorBoundary||C.route.errorElement||A===0)?N.createElement(Oy,{location:a.location,revalidation:a.revalidation,component:O,error:T,children:j(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):j()},null)}function Tf(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jy(t){let i=N.useContext(Yo);return bn(i,Tf(t)),i}function By(t){let i=N.useContext(zc);return bn(i,Tf(t)),i}function Fy(t){let i=N.useContext(Ai);return bn(i,Tf(t)),i}function _f(t){let i=Fy(t),a=i.matches[i.matches.length-1];return bn(a.route.id,`${t} can only be used on routes that contain a unique "id"`),a.route.id}function Vy(){return _f("useRouteId")}function Uy(){var u;let t=N.useContext(If),i=By("useRouteError"),a=_f("useRouteError");return t!==void 0?t:(u=i.errors)==null?void 0:u[a]}function zy(){let{router:t}=jy("useNavigate"),i=_f("useNavigate"),a=N.useRef(!1);return Cp(()=>{a.current=!0}),N.useCallback(async(m,x={})=>{fi(a.current,vp),a.current&&(typeof m=="number"?t.navigate(m):await t.navigate(m,{fromRouteId:i,...x}))},[t,i])}var k1={};function Ep(t,i,a){!i&&!k1[t]&&(k1[t]=!0,fi(!1,a))}N.memo(Wy);function Wy({routes:t,future:i,state:a}){return bp(t,void 0,a,i)}function $n(t){bn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Hy({basename:t="/",children:i=null,location:a,navigationType:u="POP",navigator:m,static:x=!1}){bn(!Qa(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let w=t.replace(/^\/*/,"/"),b=N.useMemo(()=>({basename:w,navigator:m,static:x,future:{}}),[w,m,x]);typeof a=="string"&&(a=Xo(a));let{pathname:v="/",search:C="",hash:A="",state:T=null,key:_="default"}=a,O=N.useMemo(()=>{let L=Ns(v,w);return L==null?null:{location:{pathname:L,search:C,hash:A,state:T,key:_},navigationType:u}},[w,v,C,A,T,_,u]);return fi(O!=null,`<Router basename="${w}"> is not able to match the URL "${v}${C}${A}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:N.createElement(Si.Provider,{value:b},N.createElement(qa.Provider,{children:i,value:O}))}function Gy({children:t,location:i}){return ky(Zd(t),i)}function Zd(t,i=[]){let a=[];return N.Children.forEach(t,(u,m)=>{if(!N.isValidElement(u))return;let x=[...i,m];if(u.type===N.Fragment){a.push.apply(a,Zd(u.props.children,x));return}bn(u.type===$n,`[${typeof u.type=="string"?u.type:u.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),bn(!u.props.index||!u.props.children,"An index route cannot have child routes.");let w={id:u.props.id||x.join("-"),caseSensitive:u.props.caseSensitive,element:u.props.element,Component:u.props.Component,index:u.props.index,path:u.props.path,loader:u.props.loader,action:u.props.action,hydrateFallbackElement:u.props.hydrateFallbackElement,HydrateFallback:u.props.HydrateFallback,errorElement:u.props.errorElement,ErrorBoundary:u.props.ErrorBoundary,hasErrorBoundary:u.props.hasErrorBoundary===!0||u.props.ErrorBoundary!=null||u.props.errorElement!=null,shouldRevalidate:u.props.shouldRevalidate,handle:u.props.handle,lazy:u.props.lazy};u.props.children&&(w.children=Zd(u.props.children,x)),a.push(w)}),a}var wc="get",vc="application/x-www-form-urlencoded";function Wc(t){return t!=null&&typeof t.tagName=="string"}function Xy(t){return Wc(t)&&t.tagName.toLowerCase()==="button"}function Yy(t){return Wc(t)&&t.tagName.toLowerCase()==="form"}function $y(t){return Wc(t)&&t.tagName.toLowerCase()==="input"}function Zy(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Ky(t,i){return t.button===0&&(!i||i==="_self")&&!Zy(t)}function Kd(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((i,a)=>{let u=t[a];return i.concat(Array.isArray(u)?u.map(m=>[a,m]):[[a,u]])},[]))}function qy(t,i){let a=Kd(t);return i&&i.forEach((u,m)=>{a.has(m)||i.getAll(m).forEach(x=>{a.append(m,x)})}),a}var dc=null;function Qy(){if(dc===null)try{new FormData(document.createElement("form"),0),dc=!1}catch{dc=!0}return dc}var Jy=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Td(t){return t!=null&&!Jy.has(t)?(fi(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vc}"`),null):t}function ew(t,i){let a,u,m,x,w;if(Yy(t)){let b=t.getAttribute("action");u=b?Ns(b,i):null,a=t.getAttribute("method")||wc,m=Td(t.getAttribute("enctype"))||vc,x=new FormData(t)}else if(Xy(t)||$y(t)&&(t.type==="submit"||t.type==="image")){let b=t.form;if(b==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=t.getAttribute("formaction")||b.getAttribute("action");if(u=v?Ns(v,i):null,a=t.getAttribute("formmethod")||b.getAttribute("method")||wc,m=Td(t.getAttribute("formenctype"))||Td(b.getAttribute("enctype"))||vc,x=new FormData(b,t),!Qy()){let{name:C,type:A,value:T}=t;if(A==="image"){let _=C?`${C}.`:"";x.append(`${_}x`,"0"),x.append(`${_}y`,"0")}else C&&x.append(C,T)}}else{if(Wc(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=wc,u=null,m=vc,w=t}return x&&m==="text/plain"&&(w=x,x=void 0),{action:u,method:a.toLowerCase(),encType:m,formData:x,body:w}}function Rf(t,i){if(t===!1||t===null||typeof t>"u")throw new Error(i)}async function tw(t,i){if(t.id in i)return i[t.id];try{let a=await import(t.module);return i[t.id]=a,a}catch(a){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function nw(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function rw(t,i,a){let u=await Promise.all(t.map(async m=>{let x=i.routes[m.route.id];if(x){let w=await tw(x,a);return w.links?w.links():[]}return[]}));return aw(u.flat(1).filter(nw).filter(m=>m.rel==="stylesheet"||m.rel==="preload").map(m=>m.rel==="stylesheet"?{...m,rel:"prefetch",as:"style"}:{...m,rel:"prefetch"}))}function P1(t,i,a,u,m,x){let w=(v,C)=>a[C]?v.route.id!==a[C].route.id:!0,b=(v,C)=>{var A;return a[C].pathname!==v.pathname||((A=a[C].route.path)==null?void 0:A.endsWith("*"))&&a[C].params["*"]!==v.params["*"]};return x==="assets"?i.filter((v,C)=>w(v,C)||b(v,C)):x==="data"?i.filter((v,C)=>{var T;let A=u.routes[v.route.id];if(!A||!A.hasLoader)return!1;if(w(v,C)||b(v,C))return!0;if(v.route.shouldRevalidate){let _=v.route.shouldRevalidate({currentUrl:new URL(m.pathname+m.search+m.hash,window.origin),currentParams:((T=a[0])==null?void 0:T.params)||{},nextUrl:new URL(t,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function iw(t,i){return sw(t.map(a=>{let u=i.routes[a.route.id];if(!u)return[];let m=[u.module];return u.imports&&(m=m.concat(u.imports)),m}).flat(1))}function sw(t){return[...new Set(t)]}function ow(t){let i={},a=Object.keys(t).sort();for(let u of a)i[u]=t[u];return i}function aw(t,i){let a=new Set;return new Set(i),t.reduce((u,m)=>{let x=JSON.stringify(ow(m));return a.has(x)||(a.add(x),u.push({key:x,link:m})),u},[])}function lw(t){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname="_root.data":i.pathname=`${i.pathname.replace(/\/$/,"")}.data`,i}function cw(){let t=N.useContext(Yo);return Rf(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function uw(){let t=N.useContext(zc);return Rf(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var kf=N.createContext(void 0);kf.displayName="FrameworkContext";function Sp(){let t=N.useContext(kf);return Rf(t,"You must render this element inside a <HydratedRouter> element"),t}function dw(t,i){let a=N.useContext(kf),[u,m]=N.useState(!1),[x,w]=N.useState(!1),{onFocus:b,onBlur:v,onMouseEnter:C,onMouseLeave:A,onTouchStart:T}=i,_=N.useRef(null);N.useEffect(()=>{if(t==="render"&&w(!0),t==="viewport"){let B=W=>{W.forEach(U=>{w(U.isIntersecting)})},j=new IntersectionObserver(B,{threshold:.5});return _.current&&j.observe(_.current),()=>{j.disconnect()}}},[t]),N.useEffect(()=>{if(u){let B=setTimeout(()=>{w(!0)},100);return()=>{clearTimeout(B)}}},[u]);let O=()=>{m(!0)},L=()=>{m(!1),w(!1)};return a?t!=="intent"?[x,_,{}]:[x,_,{onFocus:Pa(b,O),onBlur:Pa(v,L),onMouseEnter:Pa(C,O),onMouseLeave:Pa(A,L),onTouchStart:Pa(T,O)}]:[!1,_,{}]}function Pa(t,i){return a=>{t&&t(a),a.defaultPrevented||i(a)}}function fw({page:t,...i}){let{router:a}=cw(),u=N.useMemo(()=>hp(a.routes,t,a.basename),[a.routes,t,a.basename]);return u?N.createElement(mw,{page:t,matches:u,...i}):(console.warn(`Tried to prefetch ${t} but no routes matched.`),null)}function hw(t){let{manifest:i,routeModules:a}=Sp(),[u,m]=N.useState([]);return N.useEffect(()=>{let x=!1;return rw(t,i,a).then(w=>{x||m(w)}),()=>{x=!0}},[t,i,a]),u}function mw({page:t,matches:i,...a}){let u=Br(),{manifest:m,routeModules:x}=Sp(),{loaderData:w,matches:b}=uw(),v=N.useMemo(()=>P1(t,i,b,m,u,"data"),[t,i,b,m,u]),C=N.useMemo(()=>P1(t,i,b,m,u,"assets"),[t,i,b,m,u]),A=N.useMemo(()=>{if(t===u.pathname+u.search+u.hash)return[];let O=new Set,L=!1;if(i.forEach(j=>{var U;let W=m.routes[j.route.id];!W||!W.hasLoader||(!v.some(F=>F.route.id===j.route.id)&&j.route.id in w&&((U=x[j.route.id])!=null&&U.shouldRevalidate)||W.hasClientLoader?L=!0:O.add(j.route.id))}),O.size===0)return[];let B=lw(t);return L&&O.size>0&&B.searchParams.set("_routes",i.filter(j=>O.has(j.route.id)).map(j=>j.route.id).join(",")),[B.pathname+B.search]},[w,u,m,v,i,t,x]),T=N.useMemo(()=>iw(C,m),[C,m]),_=hw(C);return N.createElement(N.Fragment,null,A.map(O=>N.createElement("link",{key:O,rel:"prefetch",as:"fetch",href:O,...a})),T.map(O=>N.createElement("link",{key:O,rel:"modulepreload",href:O,...a})),_.map(({key:O,link:L})=>N.createElement("link",{key:O,...L})))}function pw(...t){return i=>{t.forEach(a=>{typeof a=="function"?a(i):a!=null&&(a.current=i)})}}var Ap=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ap&&(window.__reactRouterVersion="7.0.2")}catch{}function gw({basename:t,children:i,window:a}){let u=N.useRef();u.current==null&&(u.current=ny({window:a,v5Compat:!0}));let m=u.current,[x,w]=N.useState({action:m.action,location:m.location}),b=N.useCallback(v=>{N.startTransition(()=>w(v))},[w]);return N.useLayoutEffect(()=>m.listen(b),[m,b]),N.createElement(Hy,{basename:t,children:i,location:x.location,navigationType:x.action,navigator:m})}var Np=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ip=N.forwardRef(function({onClick:i,discover:a="render",prefetch:u="none",relative:m,reloadDocument:x,replace:w,state:b,target:v,to:C,preventScrollReset:A,viewTransition:T,..._},O){let{basename:L}=N.useContext(Si),B=typeof C=="string"&&Np.test(C),j,W=!1;if(typeof C=="string"&&B&&(j=C,Ap))try{let J=new URL(window.location.href),we=C.startsWith("//")?new URL(J.protocol+C):new URL(C),Re=Ns(we.pathname,L);we.origin===J.origin&&Re!=null?C=Re+we.search+we.hash:W=!0}catch{fi(!1,`<Link to="${C}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let U=Ty(C,{relative:m}),[F,Y,K]=dw(u,_),ne=vw(C,{replace:w,state:b,target:v,preventScrollReset:A,relative:m,viewTransition:T});function q(J){i&&i(J),J.defaultPrevented||ne(J)}let ie=N.createElement("a",{..._,...K,href:j||U,onClick:W||x?i:q,ref:pw(O,Y),target:v,"data-discover":!B&&a==="render"?"true":void 0});return F&&!B?N.createElement(N.Fragment,null,ie,N.createElement(fw,{page:U})):ie});Ip.displayName="Link";var xw=N.forwardRef(function({"aria-current":i="page",caseSensitive:a=!1,className:u="",end:m=!1,style:x,to:w,viewTransition:b,children:v,...C},A){let T=Ja(w,{relative:C.relative}),_=Br(),O=N.useContext(zc),{navigator:L,basename:B}=N.useContext(Si),j=O!=null&&Aw(T)&&b===!0,W=L.encodeLocation?L.encodeLocation(T).pathname:T.pathname,U=_.pathname,F=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;a||(U=U.toLowerCase(),F=F?F.toLowerCase():null,W=W.toLowerCase()),F&&B&&(F=Ns(F,B)||F);const Y=W!=="/"&&W.endsWith("/")?W.length-1:W.length;let K=U===W||!m&&U.startsWith(W)&&U.charAt(Y)==="/",ne=F!=null&&(F===W||!m&&F.startsWith(W)&&F.charAt(W.length)==="/"),q={isActive:K,isPending:ne,isTransitioning:j},ie=K?i:void 0,J;typeof u=="function"?J=u(q):J=[u,K?"active":null,ne?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let we=typeof x=="function"?x(q):x;return N.createElement(Ip,{...C,"aria-current":ie,className:J,ref:A,style:we,to:w,viewTransition:b},typeof v=="function"?v(q):v)});xw.displayName="NavLink";var yw=N.forwardRef(({discover:t="render",fetcherKey:i,navigate:a,reloadDocument:u,replace:m,state:x,method:w=wc,action:b,onSubmit:v,relative:C,preventScrollReset:A,viewTransition:T,..._},O)=>{let L=Ew(),B=Sw(b,{relative:C}),j=w.toLowerCase()==="get"?"get":"post",W=typeof b=="string"&&Np.test(b),U=F=>{if(v&&v(F),F.defaultPrevented)return;F.preventDefault();let Y=F.nativeEvent.submitter,K=(Y==null?void 0:Y.getAttribute("formmethod"))||w;L(Y||F.currentTarget,{fetcherKey:i,method:K,navigate:a,replace:m,state:x,relative:C,preventScrollReset:A,viewTransition:T})};return N.createElement("form",{ref:O,method:j,action:B,onSubmit:u?v:U,..._,"data-discover":!W&&t==="render"?"true":void 0})});yw.displayName="Form";function ww(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Tp(t){let i=N.useContext(Yo);return bn(i,ww(t)),i}function vw(t,{target:i,replace:a,state:u,preventScrollReset:m,relative:x,viewTransition:w}={}){let b=On(),v=Br(),C=Ja(t,{relative:x});return N.useCallback(A=>{if(Ky(A,i)){A.preventDefault();let T=a!==void 0?a:Ha(v)===Ha(C);b(t,{replace:T,state:u,preventScrollReset:m,relative:x,viewTransition:w})}},[v,b,C,a,u,i,t,m,x,w])}function _p(t){fi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let i=N.useRef(Kd(t)),a=N.useRef(!1),u=Br(),m=N.useMemo(()=>qy(u.search,a.current?null:i.current),[u.search]),x=On(),w=N.useCallback((b,v)=>{const C=Kd(typeof b=="function"?b(m):b);a.current=!0,x("?"+C,v)},[x,m]);return[m,w]}var Cw=0,bw=()=>`__${String(++Cw)}__`;function Ew(){let{router:t}=Tp("useSubmit"),{basename:i}=N.useContext(Si),a=Vy();return N.useCallback(async(u,m={})=>{let{action:x,method:w,encType:b,formData:v,body:C}=ew(u,i);if(m.navigate===!1){let A=m.fetcherKey||bw();await t.fetch(A,a,m.action||x,{preventScrollReset:m.preventScrollReset,formData:v,body:C,formMethod:m.method||w,formEncType:m.encType||b,flushSync:m.flushSync})}else await t.navigate(m.action||x,{preventScrollReset:m.preventScrollReset,formData:v,body:C,formMethod:m.method||w,formEncType:m.encType||b,replace:m.replace,state:m.state,fromRouteId:a,flushSync:m.flushSync,viewTransition:m.viewTransition})},[t,i,a])}function Sw(t,{relative:i}={}){let{basename:a}=N.useContext(Si),u=N.useContext(Ai);bn(u,"useFormAction must be used inside a RouteContext");let[m]=u.matches.slice(-1),x={...Ja(t||".",{relative:i})},w=Br();if(t==null){x.search=w.search;let b=new URLSearchParams(x.search),v=b.getAll("index");if(v.some(A=>A==="")){b.delete("index"),v.filter(T=>T).forEach(T=>b.append("index",T));let A=b.toString();x.search=A?`?${A}`:""}}return(!t||t===".")&&m.route.index&&(x.search=x.search?x.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(x.pathname=x.pathname==="/"?a:$i([a,x.pathname])),Ha(x)}function Aw(t,i={}){let a=N.useContext(wp);bn(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:u}=Tp("useViewTransitionState"),m=Ja(t,{relative:i.relative});if(!a.isTransitioning)return!1;let x=Ns(a.currentLocation.pathname,u)||a.currentLocation.pathname,w=Ns(a.nextLocation.pathname,u)||a.nextLocation.pathname;return Ic(m.pathname,w)!=null||Ic(m.pathname,x)!=null}new TextEncoder;function Pf(){const t="./assets",i="/sounds/new_elevator_combined.mp3";On();const a=N.useRef(new Audio(t+i)),[u,m]=N.useState(!1),[x,w]=N.useState(!1),[b,v]=N.useState(null),[C,A]=N.useState(!1),[T,_]=N.useState(!1);N.useEffect(()=>{const U=a.current,F=()=>{U.pause(),U.currentTime=0,w(!1),j()};return U.addEventListener("ended",F),()=>U.removeEventListener("ended",F)},[T]);function O(){v(null),a.current.load(),a.current.play().then(()=>{a.current.pause(),a.current.currentTime=0,m(!0),w(!0),A(!0),B()}).catch(U=>{console.error("Error loading audio:",U),v("Failed to load audio. Please check the file path and format."),A(!1)})}function L(){return!!(a.current&&!a.current.paused)}function B(){a.current.paused?a.current.play().catch(U=>{console.error("Error playing audio:",U),v("Failed to play audio. Please try again.")}):a.current.currentTime=0}function j(){a.current&&(a.current.pause(),a.current.currentTime=0,a.current.src="",a.current=null)}function W(U){a.current.currentTime=U,console.log(a.current.duration)}return{audioRef:a,error:b,playSound:B,loadSound:O,seekTo:W,cancelSound:j,checkSound:L,soundEnabled:C,setSoundEnabled:A,isPlaying:x}}var Zn;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Zn||(Zn={}));Zn.QR_CODE,Zn.AZTEC,Zn.CODABAR,Zn.CODE_39,Zn.CODE_93,Zn.CODE_128,Zn.DATA_MATRIX,Zn.MAXICODE,Zn.ITF,Zn.EAN_13,Zn.EAN_8,Zn.PDF_417,Zn.RSS_14,Zn.RSS_EXPANDED,Zn.UPC_A,Zn.UPC_E,Zn.UPC_EAN_EXTENSION;var M1;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(M1||(M1={}));var Tc;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Tc||(Tc={}));var Nw=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Tc.SCAN_TYPE_CAMERA,Tc.SCAN_TYPE_FILE],t}(),O1;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(O1||(O1={}));var Oa={exports:{}},Iw=Oa.exports,D1;function Tw(){return D1||(D1=1,function(t,i){(function(a,u){u(i)})(Iw,function(a){function u(k){return k==null}var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,e){k.__proto__=e}||function(k,e){for(var r in e)e.hasOwnProperty(r)&&(k[r]=e[r])};function x(k,e){m(k,e);function r(){this.constructor=k}k.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function w(k,e){var r=Object.setPrototypeOf;r?r(k,e):k.__proto__=e}function b(k,e){e===void 0&&(e=k.constructor);var r=Error.captureStackTrace;r&&r(k,e)}var v=function(k){x(e,k);function e(r){var s=this.constructor,l=k.call(this,r)||this;return Object.defineProperty(l,"name",{value:s.name,enumerable:!1}),w(l,s.prototype),b(l),l}return e}(Error);class C extends v{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}C.kind="Exception";class A extends C{}A.kind="ArgumentException";class T extends C{}T.kind="IllegalArgumentException";class _{constructor(e){if(this.binarizer=e,e===null)throw new T("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,r){return this.binarizer.getBlackRow(e,r)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,r,s,l){const c=this.binarizer.getLuminanceSource().crop(e,r,s,l);return new _(this.binarizer.createBinarizer(c))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new _(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new _(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class O extends C{static getChecksumInstance(){return new O}}O.kind="ChecksumException";class L{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class B{static arraycopy(e,r,s,l,c){for(;c--;)s[l++]=e[r++]}static currentTimeMillis(){return Date.now()}}class j extends C{}j.kind="IndexOutOfBoundsException";class W extends j{constructor(e=void 0,r=void 0){super(r),this.index=e,this.message=r}}W.kind="ArrayIndexOutOfBoundsException";class U{static fill(e,r){for(let s=0,l=e.length;s<l;s++)e[s]=r}static fillWithin(e,r,s,l){U.rangeCheck(e.length,r,s);for(let c=r;c<s;c++)e[c]=l}static rangeCheck(e,r,s){if(r>s)throw new T("fromIndex("+r+") > toIndex("+s+")");if(r<0)throw new W(r);if(s>e)throw new W(s)}static asList(...e){return e}static create(e,r,s){return Array.from({length:e}).map(c=>Array.from({length:r}).fill(s))}static createInt32Array(e,r,s){return Array.from({length:e}).map(c=>Int32Array.from({length:r}).fill(s))}static equals(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(let s=0,l=e.length;s<l;s++)if(e[s]!==r[s])return!1;return!0}static hashCode(e){if(e===null)return 0;let r=1;for(const s of e)r=31*r+s;return r}static fillUint8Array(e,r){for(let s=0;s!==e.length;s++)e[s]=r}static copyOf(e,r){return e.slice(0,r)}static copyOfUint8Array(e,r){if(e.length<=r){const s=new Uint8Array(r);return s.set(e),s}return e.slice(0,r)}static copyOfRange(e,r,s){const l=s-r,c=new Int32Array(l);return B.arraycopy(e,r,c,0,l),c}static binarySearch(e,r,s){s===void 0&&(s=U.numberComparator);let l=0,c=e.length-1;for(;l<=c;){const d=c+l>>1,p=s(r,e[d]);if(p>0)l=d+1;else if(p<0)c=d-1;else return d}return-l-1}static numberComparator(e,r){return e-r}}class F{static numberOfTrailingZeros(e){let r;if(e===0)return 32;let s=31;return r=e<<16,r!==0&&(s-=16,e=r),r=e<<8,r!==0&&(s-=8,e=r),r=e<<4,r!==0&&(s-=4,e=r),r=e<<2,r!==0&&(s-=2,e=r),s-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,r){return Math.trunc(e/r)}static parseInt(e,r=void 0){return parseInt(e,r)}}F.MIN_VALUE_32_BITS=-2147483648,F.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Y{constructor(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=Y.makeArray(e):this.bits=r)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const r=Y.makeArray(e);B.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const r=this.size;if(e>=r)return r;const s=this.bits;let l=Math.floor(e/32),c=s[l];c&=~((1<<(e&31))-1);const d=s.length;for(;c===0;){if(++l===d)return r;c=s[l]}const p=l*32+F.numberOfTrailingZeros(c);return p>r?r:p}getNextUnset(e){const r=this.size;if(e>=r)return r;const s=this.bits;let l=Math.floor(e/32),c=~s[l];c&=~((1<<(e&31))-1);const d=s.length;for(;c===0;){if(++l===d)return r;c=~s[l]}const p=l*32+F.numberOfTrailingZeros(c);return p>r?r:p}setBulk(e,r){this.bits[Math.floor(e/32)]=r}setRange(e,r){if(r<e||e<0||r>this.size)throw new T;if(r===e)return;r--;const s=Math.floor(e/32),l=Math.floor(r/32),c=this.bits;for(let d=s;d<=l;d++){const p=d>s?0:e&31,E=(2<<(d<l?31:r&31))-(1<<p);c[d]|=E}}clear(){const e=this.bits.length,r=this.bits;for(let s=0;s<e;s++)r[s]=0}isRange(e,r,s){if(r<e||e<0||r>this.size)throw new T;if(r===e)return!0;r--;const l=Math.floor(e/32),c=Math.floor(r/32),d=this.bits;for(let p=l;p<=c;p++){const y=p>l?0:e&31,R=(2<<(p<c?31:r&31))-(1<<y)&4294967295;if((d[p]&R)!==(s?R:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,r){if(r<0||r>32)throw new T("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(let s=r;s>0;s--)this.appendBit((e>>s-1&1)===1)}appendBitArray(e){const r=e.size;this.ensureCapacity(this.size+r);for(let s=0;s<r;s++)this.appendBit(e.get(s))}xor(e){if(this.size!==e.size)throw new T("Sizes don't match");const r=this.bits;for(let s=0,l=r.length;s<l;s++)r[s]^=e.bits[s]}toBytes(e,r,s,l){for(let c=0;c<l;c++){let d=0;for(let p=0;p<8;p++)this.get(e)&&(d|=1<<7-p),e++;r[s+c]=d}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),s=r+1,l=this.bits;for(let c=0;c<s;c++){let d=l[c];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,e[r-c]=d}if(this.size!==s*32){const c=s*32-this.size;let d=e[0]>>>c;for(let p=1;p<s;p++){const y=e[p];d|=y<<32-c,e[p-1]=d,d=y>>>c}e[s-1]=d}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof Y))return!1;const r=e;return this.size===r.size&&U.equals(this.bits,r.bits)}hashCode(){return 31*this.size+U.hashCode(this.bits)}toString(){let e="";for(let r=0,s=this.size;r<s;r++)r&7||(e+=" "),e+=this.get(r)?"X":".";return e}clone(){return new Y(this.size,this.bits.slice())}}var K;(function(k){k[k.OTHER=0]="OTHER",k[k.PURE_BARCODE=1]="PURE_BARCODE",k[k.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",k[k.TRY_HARDER=3]="TRY_HARDER",k[k.CHARACTER_SET=4]="CHARACTER_SET",k[k.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",k[k.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",k[k.ASSUME_GS1=7]="ASSUME_GS1",k[k.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",k[k.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",k[k.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(K||(K={}));var ne=K;class q extends C{static getFormatInstance(){return new q}}q.kind="FormatException";var ie;(function(k){k[k.Cp437=0]="Cp437",k[k.ISO8859_1=1]="ISO8859_1",k[k.ISO8859_2=2]="ISO8859_2",k[k.ISO8859_3=3]="ISO8859_3",k[k.ISO8859_4=4]="ISO8859_4",k[k.ISO8859_5=5]="ISO8859_5",k[k.ISO8859_6=6]="ISO8859_6",k[k.ISO8859_7=7]="ISO8859_7",k[k.ISO8859_8=8]="ISO8859_8",k[k.ISO8859_9=9]="ISO8859_9",k[k.ISO8859_10=10]="ISO8859_10",k[k.ISO8859_11=11]="ISO8859_11",k[k.ISO8859_13=12]="ISO8859_13",k[k.ISO8859_14=13]="ISO8859_14",k[k.ISO8859_15=14]="ISO8859_15",k[k.ISO8859_16=15]="ISO8859_16",k[k.SJIS=16]="SJIS",k[k.Cp1250=17]="Cp1250",k[k.Cp1251=18]="Cp1251",k[k.Cp1252=19]="Cp1252",k[k.Cp1256=20]="Cp1256",k[k.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",k[k.UTF8=22]="UTF8",k[k.ASCII=23]="ASCII",k[k.Big5=24]="Big5",k[k.GB18030=25]="GB18030",k[k.EUC_KR=26]="EUC_KR"})(ie||(ie={}));class J{constructor(e,r,s,...l){this.valueIdentifier=e,this.name=s,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=l,J.VALUE_IDENTIFIER_TO_ECI.set(e,this),J.NAME_TO_ECI.set(s,this);const c=this.values;for(let d=0,p=c.length;d!==p;d++){const y=c[d];J.VALUES_TO_ECI.set(y,this)}for(const d of l)J.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new q("incorect value");const r=J.VALUES_TO_ECI.get(e);if(r===void 0)throw new q("incorect value");return r}static getCharacterSetECIByName(e){const r=J.NAME_TO_ECI.get(e);if(r===void 0)throw new q("incorect value");return r}equals(e){if(!(e instanceof J))return!1;const r=e;return this.getName()===r.getName()}}J.VALUE_IDENTIFIER_TO_ECI=new Map,J.VALUES_TO_ECI=new Map,J.NAME_TO_ECI=new Map,J.Cp437=new J(ie.Cp437,Int32Array.from([0,2]),"Cp437"),J.ISO8859_1=new J(ie.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),J.ISO8859_2=new J(ie.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),J.ISO8859_3=new J(ie.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),J.ISO8859_4=new J(ie.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),J.ISO8859_5=new J(ie.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),J.ISO8859_6=new J(ie.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),J.ISO8859_7=new J(ie.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),J.ISO8859_8=new J(ie.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),J.ISO8859_9=new J(ie.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),J.ISO8859_10=new J(ie.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),J.ISO8859_11=new J(ie.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),J.ISO8859_13=new J(ie.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),J.ISO8859_14=new J(ie.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),J.ISO8859_15=new J(ie.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),J.ISO8859_16=new J(ie.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),J.SJIS=new J(ie.SJIS,20,"SJIS","Shift_JIS"),J.Cp1250=new J(ie.Cp1250,21,"Cp1250","windows-1250"),J.Cp1251=new J(ie.Cp1251,22,"Cp1251","windows-1251"),J.Cp1252=new J(ie.Cp1252,23,"Cp1252","windows-1252"),J.Cp1256=new J(ie.Cp1256,24,"Cp1256","windows-1256"),J.UnicodeBigUnmarked=new J(ie.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),J.UTF8=new J(ie.UTF8,26,"UTF8","UTF-8"),J.ASCII=new J(ie.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),J.Big5=new J(ie.Big5,28,"Big5"),J.GB18030=new J(ie.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),J.EUC_KR=new J(ie.EUC_KR,30,"EUC_KR","EUC-KR");class we extends C{}we.kind="UnsupportedOperationException";class Re{static decode(e,r){const s=this.encodingName(r);return this.customDecoder?this.customDecoder(e,s):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(s)?this.decodeFallback(e,s):new TextDecoder(s).decode(e)}static shouldDecodeOnFallback(e){return!Re.isBrowser()&&e==="ISO-8859-1"}static encode(e,r){const s=this.encodingName(r);return this.customEncoder?this.customEncoder(e,s):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof J?e:J.getCharacterSetECIByName(e)}static decodeFallback(e,r){const s=this.encodingCharacterSet(r);if(Re.isDecodeFallbackSupported(s)){let l="";for(let c=0,d=e.length;c<d;c++){let p=e[c].toString(16);p.length<2&&(p="0"+p),l+="%"+p}return decodeURIComponent(l)}if(s.equals(J.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new we(`Encoding ${this.encodingName(r)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(J.UTF8)||e.equals(J.ISO8859_1)||e.equals(J.ASCII)}static encodeFallback(e){const s=btoa(unescape(encodeURIComponent(e))).split(""),l=[];for(let c=0;c<s.length;c++)l.push(s[c].charCodeAt(0));return new Uint8Array(l)}}class Ae{static castAsNonUtf8Char(e,r=null){const s=r?r.getName():this.ISO88591;return Re.decode(new Uint8Array([e]),s)}static guessEncoding(e,r){if(r!=null&&r.get(ne.CHARACTER_SET)!==void 0)return r.get(ne.CHARACTER_SET).toString();const s=e.length;let l=!0,c=!0,d=!0,p=0,y=0,E=0,R=0,P=0,D=0,z=0,Z=0,ee=0,oe=0,he=0;const Fe=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let Ve=0;Ve<s&&(l||c||d);Ve++){const Pe=e[Ve]&255;d&&(p>0?Pe&128?p--:d=!1:Pe&128&&(Pe&64?(p++,Pe&32?(p++,Pe&16?(p++,Pe&8?d=!1:R++):E++):y++):d=!1)),l&&(Pe>127&&Pe<160?l=!1:Pe>159&&(Pe<192||Pe===215||Pe===247)&&he++),c&&(P>0?Pe<64||Pe===127||Pe>252?c=!1:P--:Pe===128||Pe===160||Pe>239?c=!1:Pe>160&&Pe<224?(D++,Z=0,z++,z>ee&&(ee=z)):Pe>127?(P++,z=0,Z++,Z>oe&&(oe=Z)):(z=0,Z=0))}return d&&p>0&&(d=!1),c&&P>0&&(c=!1),d&&(Fe||y+E+R>0)?Ae.UTF8:c&&(Ae.ASSUME_SHIFT_JIS||ee>=3||oe>=3)?Ae.SHIFT_JIS:l&&c?ee===2&&D===2||he*10>=s?Ae.SHIFT_JIS:Ae.ISO88591:l?Ae.ISO88591:c?Ae.SHIFT_JIS:d?Ae.UTF8:Ae.PLATFORM_DEFAULT_ENCODING}static format(e,...r){let s=-1;function l(d,p,y,E,R,P){if(d==="%%")return"%";if(r[++s]===void 0)return;d=E?parseInt(E.substr(1)):void 0;let D=R?parseInt(R.substr(1)):void 0,z;switch(P){case"s":z=r[s];break;case"c":z=r[s][0];break;case"f":z=parseFloat(r[s]).toFixed(d);break;case"p":z=parseFloat(r[s]).toPrecision(d);break;case"e":z=parseFloat(r[s]).toExponential(d);break;case"x":z=parseInt(r[s]).toString(D||16);break;case"d":z=parseFloat(parseInt(r[s],D||10).toPrecision(d)).toFixed(0);break}z=typeof z=="object"?JSON.stringify(z):(+z).toString(D);let Z=parseInt(y),ee=y&&y[0]+""=="0"?"0":" ";for(;z.length<Z;)z=p!==void 0?z+ee:ee+z;return z}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(c,l)}static getBytes(e,r){return Re.encode(e,r)}static getCharCode(e,r=0){return e.charCodeAt(r)}static getCharAt(e){return String.fromCharCode(e)}}Ae.SHIFT_JIS=J.SJIS.getName(),Ae.GB2312="GB2312",Ae.ISO88591=J.ISO8859_1.getName(),Ae.EUC_JP="EUC_JP",Ae.UTF8=J.UTF8.getName(),Ae.PLATFORM_DEFAULT_ENCODING=Ae.UTF8,Ae.ASSUME_SHIFT_JIS=!1;class be{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Ae.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,r,s){for(let l=r;r<r+s;l++)this.append(e[l]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)}substring(e,r){return this.value.substring(e,r)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+r.length)}}class Ie{constructor(e,r,s,l){if(this.width=e,this.height=r,this.rowSize=s,this.bits=l,r==null&&(r=e),this.height=r,e<1||r<1)throw new T("Both dimensions must be greater than 0");s==null&&(s=Math.floor((e+31)/32)),this.rowSize=s,l==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const r=e.length,s=e[0].length,l=new Ie(s,r);for(let c=0;c<r;c++){const d=e[c];for(let p=0;p<s;p++)d[p]&&l.set(p,c)}return l}static parseFromString(e,r,s){if(e===null)throw new T("stringRepresentation cannot be null");const l=new Array(e.length);let c=0,d=0,p=-1,y=0,E=0;for(;E<e.length;)if(e.charAt(E)===`
`||e.charAt(E)==="\r"){if(c>d){if(p===-1)p=c-d;else if(c-d!==p)throw new T("row lengths do not match");d=c,y++}E++}else if(e.substring(E,E+r.length)===r)E+=r.length,l[c]=!0,c++;else if(e.substring(E,E+s.length)===s)E+=s.length,l[c]=!1,c++;else throw new T("illegal character encountered: "+e.substring(E));if(c>d){if(p===-1)p=c-d;else if(c-d!==p)throw new T("row lengths do not match");y++}const R=new Ie(p,y);for(let P=0;P<c;P++)l[P]&&R.set(Math.floor(P%p),Math.floor(P/p));return R}get(e,r){const s=r*this.rowSize+Math.floor(e/32);return(this.bits[s]>>>(e&31)&1)!==0}set(e,r){const s=r*this.rowSize+Math.floor(e/32);this.bits[s]|=1<<(e&31)&4294967295}unset(e,r){const s=r*this.rowSize+Math.floor(e/32);this.bits[s]&=~(1<<(e&31)&4294967295)}flip(e,r){const s=r*this.rowSize+Math.floor(e/32);this.bits[s]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new T("input matrix dimensions do not match");const r=new Y(Math.floor(this.width/32)+1),s=this.rowSize,l=this.bits;for(let c=0,d=this.height;c<d;c++){const p=c*s,y=e.getRow(c,r).getBitArray();for(let E=0;E<s;E++)l[p+E]^=y[E]}}clear(){const e=this.bits,r=e.length;for(let s=0;s<r;s++)e[s]=0}setRegion(e,r,s,l){if(r<0||e<0)throw new T("Left and top must be nonnegative");if(l<1||s<1)throw new T("Height and width must be at least 1");const c=e+s,d=r+l;if(d>this.height||c>this.width)throw new T("The region must fit inside the matrix");const p=this.rowSize,y=this.bits;for(let E=r;E<d;E++){const R=E*p;for(let P=e;P<c;P++)y[R+Math.floor(P/32)]|=1<<(P&31)&4294967295}}getRow(e,r){r==null||r.getSize()<this.width?r=new Y(this.width):r.clear();const s=this.rowSize,l=this.bits,c=e*s;for(let d=0;d<s;d++)r.setBulk(d*32,l[c+d]);return r}setRow(e,r){B.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),r=this.getHeight();let s=new Y(e),l=new Y(e);for(let c=0,d=Math.floor((r+1)/2);c<d;c++)s=this.getRow(c,s),l=this.getRow(r-1-c,l),s.reverse(),l.reverse(),this.setRow(c,l),this.setRow(r-1-c,s)}getEnclosingRectangle(){const e=this.width,r=this.height,s=this.rowSize,l=this.bits;let c=e,d=r,p=-1,y=-1;for(let E=0;E<r;E++)for(let R=0;R<s;R++){const P=l[E*s+R];if(P!==0){if(E<d&&(d=E),E>y&&(y=E),R*32<c){let D=0;for(;!(P<<31-D&4294967295);)D++;R*32+D<c&&(c=R*32+D)}if(R*32+31>p){let D=31;for(;!(P>>>D);)D--;R*32+D>p&&(p=R*32+D)}}}return p<c||y<d?null:Int32Array.from([c,d,p-c+1,y-d+1])}getTopLeftOnBit(){const e=this.rowSize,r=this.bits;let s=0;for(;s<r.length&&r[s]===0;)s++;if(s===r.length)return null;const l=s/e;let c=s%e*32;const d=r[s];let p=0;for(;!(d<<31-p&4294967295);)p++;return c+=p,Int32Array.from([c,l])}getBottomRightOnBit(){const e=this.rowSize,r=this.bits;let s=r.length-1;for(;s>=0&&r[s]===0;)s--;if(s<0)return null;const l=Math.floor(s/e);let c=Math.floor(s%e)*32;const d=r[s];let p=31;for(;!(d>>>p);)p--;return c+=p,Int32Array.from([c,l])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof Ie))return!1;const r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&U.equals(this.bits,r.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+U.hashCode(this.bits),e}toString(e="X ",r="  ",s=`
`){return this.buildToString(e,r,s)}buildToString(e,r,s){let l=new be;for(let c=0,d=this.height;c<d;c++){for(let p=0,y=this.width;p<y;p++)l.append(this.get(p,c)?e:r);l.append(s)}return l.toString()}clone(){return new Ie(this.width,this.height,this.rowSize,this.bits.slice())}}class $ extends C{static getNotFoundInstance(){return new $}}$.kind="NotFoundException";class ke extends L{constructor(e){super(e),this.luminances=ke.EMPTY,this.buckets=new Int32Array(ke.LUMINANCE_BUCKETS)}getBlackRow(e,r){const s=this.getLuminanceSource(),l=s.getWidth();r==null||r.getSize()<l?r=new Y(l):r.clear(),this.initArrays(l);const c=s.getRow(e,this.luminances),d=this.buckets;for(let y=0;y<l;y++)d[(c[y]&255)>>ke.LUMINANCE_SHIFT]++;const p=ke.estimateBlackPoint(d);if(l<3)for(let y=0;y<l;y++)(c[y]&255)<p&&r.set(y);else{let y=c[0]&255,E=c[1]&255;for(let R=1;R<l-1;R++){const P=c[R+1]&255;(E*4-y-P)/2<p&&r.set(R),y=E,E=P}}return r}getBlackMatrix(){const e=this.getLuminanceSource(),r=e.getWidth(),s=e.getHeight(),l=new Ie(r,s);this.initArrays(r);const c=this.buckets;for(let y=1;y<5;y++){const E=Math.floor(s*y/5),R=e.getRow(E,this.luminances),P=Math.floor(r*4/5);for(let D=Math.floor(r/5);D<P;D++){const z=R[D]&255;c[z>>ke.LUMINANCE_SHIFT]++}}const d=ke.estimateBlackPoint(c),p=e.getMatrix();for(let y=0;y<s;y++){const E=y*r;for(let R=0;R<r;R++)(p[E+R]&255)<d&&l.set(R,y)}return l}createBinarizer(e){return new ke(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const r=this.buckets;for(let s=0;s<ke.LUMINANCE_BUCKETS;s++)r[s]=0}static estimateBlackPoint(e){const r=e.length;let s=0,l=0,c=0;for(let R=0;R<r;R++)e[R]>c&&(l=R,c=e[R]),e[R]>s&&(s=e[R]);let d=0,p=0;for(let R=0;R<r;R++){const P=R-l,D=e[R]*P*P;D>p&&(d=R,p=D)}if(l>d){const R=l;l=d,d=R}if(d-l<=r/16)throw new $;let y=d-1,E=-1;for(let R=d-1;R>l;R--){const P=R-l,D=P*P*(d-R)*(s-e[R]);D>E&&(y=R,E=D)}return y<<ke.LUMINANCE_SHIFT}}ke.LUMINANCE_BITS=5,ke.LUMINANCE_SHIFT=8-ke.LUMINANCE_BITS,ke.LUMINANCE_BUCKETS=1<<ke.LUMINANCE_BITS,ke.EMPTY=Uint8ClampedArray.from([0]);class ve extends ke{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),r=e.getWidth(),s=e.getHeight();if(r>=ve.MINIMUM_DIMENSION&&s>=ve.MINIMUM_DIMENSION){const l=e.getMatrix();let c=r>>ve.BLOCK_SIZE_POWER;r&ve.BLOCK_SIZE_MASK&&c++;let d=s>>ve.BLOCK_SIZE_POWER;s&ve.BLOCK_SIZE_MASK&&d++;const p=ve.calculateBlackPoints(l,c,d,r,s),y=new Ie(r,s);ve.calculateThresholdForBlock(l,c,d,r,s,p,y),this.matrix=y}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new ve(e)}static calculateThresholdForBlock(e,r,s,l,c,d,p){const y=c-ve.BLOCK_SIZE,E=l-ve.BLOCK_SIZE;for(let R=0;R<s;R++){let P=R<<ve.BLOCK_SIZE_POWER;P>y&&(P=y);const D=ve.cap(R,2,s-3);for(let z=0;z<r;z++){let Z=z<<ve.BLOCK_SIZE_POWER;Z>E&&(Z=E);const ee=ve.cap(z,2,r-3);let oe=0;for(let Fe=-2;Fe<=2;Fe++){const Ve=d[D+Fe];oe+=Ve[ee-2]+Ve[ee-1]+Ve[ee]+Ve[ee+1]+Ve[ee+2]}const he=oe/25;ve.thresholdBlock(e,Z,P,he,l,p)}}}static cap(e,r,s){return e<r?r:e>s?s:e}static thresholdBlock(e,r,s,l,c,d){for(let p=0,y=s*c+r;p<ve.BLOCK_SIZE;p++,y+=c)for(let E=0;E<ve.BLOCK_SIZE;E++)(e[y+E]&255)<=l&&d.set(r+E,s+p)}static calculateBlackPoints(e,r,s,l,c){const d=c-ve.BLOCK_SIZE,p=l-ve.BLOCK_SIZE,y=new Array(s);for(let E=0;E<s;E++){y[E]=new Int32Array(r);let R=E<<ve.BLOCK_SIZE_POWER;R>d&&(R=d);for(let P=0;P<r;P++){let D=P<<ve.BLOCK_SIZE_POWER;D>p&&(D=p);let z=0,Z=255,ee=0;for(let he=0,Fe=R*l+D;he<ve.BLOCK_SIZE;he++,Fe+=l){for(let Ve=0;Ve<ve.BLOCK_SIZE;Ve++){const Pe=e[Fe+Ve]&255;z+=Pe,Pe<Z&&(Z=Pe),Pe>ee&&(ee=Pe)}if(ee-Z>ve.MIN_DYNAMIC_RANGE)for(he++,Fe+=l;he<ve.BLOCK_SIZE;he++,Fe+=l)for(let Ve=0;Ve<ve.BLOCK_SIZE;Ve++)z+=e[Fe+Ve]&255}let oe=z>>ve.BLOCK_SIZE_POWER*2;if(ee-Z<=ve.MIN_DYNAMIC_RANGE&&(oe=Z/2,E>0&&P>0)){const he=(y[E-1][P]+2*y[E][P-1]+y[E-1][P-1])/4;Z<he&&(oe=he)}y[E][P]=oe}}return y}}ve.BLOCK_SIZE_POWER=3,ve.BLOCK_SIZE=1<<ve.BLOCK_SIZE_POWER,ve.BLOCK_SIZE_MASK=ve.BLOCK_SIZE-1,ve.MINIMUM_DIMENSION=ve.BLOCK_SIZE*5,ve.MIN_DYNAMIC_RANGE=24;class ye{constructor(e,r){this.width=e,this.height=r}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,r,s,l){throw new we("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new we("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new we("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let r=new be;for(let s=0;s<this.height;s++){const l=this.getRow(s,e);for(let c=0;c<this.width;c++){const d=l[c]&255;let p;d<64?p="#":d<128?p="+":d<192?p=".":p=" ",r.append(p)}r.append(`
`)}return r.toString()}}class De extends ye{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,r){const s=this.delegate.getRow(e,r),l=this.getWidth();for(let c=0;c<l;c++)s[c]=255-(s[c]&255);return s}getMatrix(){const e=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),s=new Uint8ClampedArray(r);for(let l=0;l<r;l++)s[l]=255-(e[l]&255);return s}isCropSupported(){return this.delegate.isCropSupported()}crop(e,r,s,l){return new De(this.delegate.crop(e,r,s,l))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new De(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new De(this.delegate.rotateCounterClockwise45())}}class Ee extends ye{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=Ee.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const r=e.getContext("2d").getImageData(0,0,e.width,e.height);return Ee.toGrayscaleBuffer(r.data,e.width,e.height)}static toGrayscaleBuffer(e,r,s){const l=new Uint8ClampedArray(r*s);for(let c=0,d=0,p=e.length;c<p;c+=4,d++){let y;if(e[c+3]===0)y=255;else{const R=e[c],P=e[c+1],D=e[c+2];y=306*R+601*P+117*D+512>>10}l[d]=y}return l}getRow(e,r){if(e<0||e>=this.getHeight())throw new T("Requested row is outside the image: "+e);const s=this.getWidth(),l=e*s;return r===null?r=this.buffer.slice(l,l+s):(r.length<s&&(r=new Uint8ClampedArray(s)),r.set(this.buffer.slice(l,l+s))),r}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,r,s,l){return super.crop(e,r,s,l),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const r=this.getTempCanvasElement(),s=r.getContext("2d"),l=e*Ee.DEGREE_TO_RADIANS,c=this.canvas.width,d=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(l))*c+Math.abs(Math.sin(l))*d),y=Math.ceil(Math.abs(Math.sin(l))*c+Math.abs(Math.cos(l))*d);return r.width=p,r.height=y,s.translate(p/2,y/2),s.rotate(l),s.drawImage(this.canvas,c/-2,d/-2),this.buffer=Ee.makeBufferFromCanvasImageData(r),this}invert(){return new De(this)}}Ee.DEGREE_TO_RADIANS=Math.PI/180;class X{constructor(e,r,s){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=s||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var G=(globalThis||lc||self||window||void 0)&&(globalThis||lc||self||window||void 0).__awaiter||function(k,e,r,s){function l(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function p(R){try{E(s.next(R))}catch(P){d(P)}}function y(R){try{E(s.throw(R))}catch(P){d(P)}}function E(R){R.done?c(R.value):l(R.value).then(p,y)}E((s=s.apply(k,e||[])).next())})};class Ce{constructor(e,r=500,s){this.reader=e,this.timeBetweenScansMillis=r,this._hints=s,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return G(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),r=[];for(const s of e){const l=s.kind==="video"?"videoinput":s.kind;if(l!=="videoinput")continue;const c=s.deviceId||s.id,d=s.label||`Video device ${r.length+1}`,p=s.groupId,y={deviceId:c,label:d,kind:l,groupId:p};r.push(y)}return r})}getVideoInputDevices(){return G(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(r=>new X(r.deviceId,r.label))})}findDeviceById(e){return G(this,void 0,void 0,function*(){const r=yield this.listVideoInputDevices();return r?r.find(s=>s.deviceId===e):null})}decodeFromInputVideoDevice(e,r){return G(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,r)})}decodeOnceFromVideoDevice(e,r){return G(this,void 0,void 0,function*(){this.reset();let s;e?s={deviceId:{exact:e}}:s={facingMode:"environment"};const l={video:s};return yield this.decodeOnceFromConstraints(l,r)})}decodeOnceFromConstraints(e,r){return G(this,void 0,void 0,function*(){const s=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(s,r)})}decodeOnceFromStream(e,r){return G(this,void 0,void 0,function*(){this.reset();const s=yield this.attachStreamToVideo(e,r);return yield this.decodeOnce(s)})}decodeFromInputVideoDeviceContinuously(e,r,s){return G(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,r,s)})}decodeFromVideoDevice(e,r,s){return G(this,void 0,void 0,function*(){let l;e?l={deviceId:{exact:e}}:l={facingMode:"environment"};const c={video:l};return yield this.decodeFromConstraints(c,r,s)})}decodeFromConstraints(e,r,s){return G(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(l,r,s)})}decodeFromStream(e,r,s){return G(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(e,r);return yield this.decodeContinuously(l,s)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,r){return G(this,void 0,void 0,function*(){const s=this.prepareVideoElement(r);return this.addVideoSource(s,e),this.videoElement=s,this.stream=e,yield this.playVideoOnLoadAsync(s),s})}playVideoOnLoadAsync(e){return new Promise((r,s)=>this.playVideoOnLoad(e,()=>r()))}playVideoOnLoad(e,r){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return G(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,r){const s=document.getElementById(e);if(!s)throw new A(`element with id '${e}' not found`);if(s.nodeName.toLowerCase()!==r.toLowerCase())throw new A(`element with id '${e}' must be an ${r} element`);return s}decodeFromImage(e,r){if(!e&&!r)throw new A("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)}decodeFromVideo(e,r){if(!e&&!r)throw new A("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,r,s){if(e===void 0&&r===void 0)throw new A("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,s):this.decodeFromVideoElementContinuously(e,s)}decodeFromImageElement(e){if(!e)throw new A("An image element must be provided.");this.reset();const r=this.prepareImageElement(e);this.imageElement=r;let s;return this.isImageLoaded(r)?s=this.decodeOnce(r,!1,!0):s=this._decodeOnLoadImage(r),s}decodeFromVideoElement(e){const r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)}decodeFromVideoElementContinuously(e,r){const s=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(s,r)}_decodeFromVideoElementSetup(e){if(!e)throw new A("A video element must be provided.");this.reset();const r=this.prepareVideoElement(e);return this.videoElement=r,r}decodeFromImageUrl(e){if(!e)throw new A("An URL must be provided.");this.reset();const r=this.prepareImageElement();this.imageElement=r;const s=this._decodeOnLoadImage(r);return r.src=e,s}decodeFromVideoUrl(e){if(!e)throw new A("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),s=this.decodeFromVideoElement(r);return r.src=e,s}decodeFromVideoUrlContinuously(e,r){if(!e)throw new A("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),l=this.decodeFromVideoElementContinuously(s,r);return s.src=e,l}_decodeOnLoadImage(e){return new Promise((r,s)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(r,s),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return G(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,r){return G(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,r)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r}prepareVideoElement(e){let r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r}decodeOnce(e,r=!0,s=!0){this._stopAsyncDecode=!1;const l=(c,d)=>{if(this._stopAsyncDecode){d(new $("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const p=this.decode(e);c(p)}catch(p){const y=r&&p instanceof $,R=(p instanceof O||p instanceof q)&&s;if(y||R)return setTimeout(l,this._timeBetweenDecodingAttempts,c,d);d(p)}};return new Promise((c,d)=>l(c,d))}decodeContinuously(e,r){this._stopContinuousDecode=!1;const s=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const l=this.decode(e);r(l,null),setTimeout(s,this.timeBetweenScansMillis)}catch(l){r(null,l);const c=l instanceof O||l instanceof q,d=l instanceof $;(c||d)&&setTimeout(s,this._timeBetweenDecodingAttempts)}};s()}decode(e){const r=this.createBinaryBitmap(e);return this.decodeBitmap(r)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,r,s){r||(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),s||(s=this.captureCanvasContext),s.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}drawImageOnCanvas(e,r,s=this.captureCanvasContext){r||(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),s||(s=this.captureCanvasContext),s.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const r=this.getCaptureCanvas(e),s=new Ee(r),l=new ve(s);return new _(l)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const s=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=s}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const r=document.createElement("canvas");let s,l;return typeof e<"u"&&(e instanceof HTMLVideoElement?(s=e.videoWidth,l=e.videoHeight):e instanceof HTMLImageElement&&(s=e.naturalWidth||e.width,l=e.naturalHeight||e.height)),r.style.width=s+"px",r.style.height=l+"px",r.width=s,r.height=l,r}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class ae{constructor(e,r,s=r==null?0:8*r.length,l,c,d=B.currentTimeMillis()){this.text=e,this.rawBytes=r,this.numBits=s,this.resultPoints=l,this.format=c,this.timestamp=d,this.text=e,this.rawBytes=r,s==null?this.numBits=r==null?0:8*r.length:this.numBits=s,this.resultPoints=l,this.format=c,this.resultMetadata=null,d==null?this.timestamp=B.currentTimeMillis():this.timestamp=d}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){const s=new Array(r.length+e.length);B.arraycopy(r,0,s,0,r.length),B.arraycopy(e,0,s,r.length,e.length),this.resultPoints=s}}getTimestamp(){return this.timestamp}toString(){return this.text}}var se;(function(k){k[k.AZTEC=0]="AZTEC",k[k.CODABAR=1]="CODABAR",k[k.CODE_39=2]="CODE_39",k[k.CODE_93=3]="CODE_93",k[k.CODE_128=4]="CODE_128",k[k.DATA_MATRIX=5]="DATA_MATRIX",k[k.EAN_8=6]="EAN_8",k[k.EAN_13=7]="EAN_13",k[k.ITF=8]="ITF",k[k.MAXICODE=9]="MAXICODE",k[k.PDF_417=10]="PDF_417",k[k.QR_CODE=11]="QR_CODE",k[k.RSS_14=12]="RSS_14",k[k.RSS_EXPANDED=13]="RSS_EXPANDED",k[k.UPC_A=14]="UPC_A",k[k.UPC_E=15]="UPC_E",k[k.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(se||(se={}));var te=se,Me;(function(k){k[k.OTHER=0]="OTHER",k[k.ORIENTATION=1]="ORIENTATION",k[k.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",k[k.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",k[k.ISSUE_NUMBER=4]="ISSUE_NUMBER",k[k.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",k[k.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",k[k.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",k[k.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",k[k.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",k[k.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Me||(Me={}));var Se=Me;class Le{constructor(e,r,s,l,c=-1,d=-1){this.rawBytes=e,this.text=r,this.byteSegments=s,this.ecLevel=l,this.structuredAppendSequenceNumber=c,this.structuredAppendParity=d,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class et{exp(e){return this.expTable[e]}log(e){if(e===0)throw new T;return this.logTable[e]}static addOrSubtract(e,r){return e^r}}class Xe{constructor(e,r){if(r.length===0)throw new T;this.field=e;const s=r.length;if(s>1&&r[0]===0){let l=1;for(;l<s&&r[l]===0;)l++;l===s?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(s-l),B.arraycopy(r,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const r=this.coefficients;let s;if(e===1){s=0;for(let d=0,p=r.length;d!==p;d++){const y=r[d];s=et.addOrSubtract(s,y)}return s}s=r[0];const l=r.length,c=this.field;for(let d=1;d<l;d++)s=et.addOrSubtract(c.multiply(e,s),r[d]);return s}addOrSubtract(e){if(!this.field.equals(e.field))throw new T("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let r=this.coefficients,s=e.coefficients;if(r.length>s.length){const d=r;r=s,s=d}let l=new Int32Array(s.length);const c=s.length-r.length;B.arraycopy(s,0,l,0,c);for(let d=c;d<s.length;d++)l[d]=et.addOrSubtract(r[d-c],s[d]);return new Xe(this.field,l)}multiply(e){if(!this.field.equals(e.field))throw new T("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const r=this.coefficients,s=r.length,l=e.coefficients,c=l.length,d=new Int32Array(s+c-1),p=this.field;for(let y=0;y<s;y++){const E=r[y];for(let R=0;R<c;R++)d[y+R]=et.addOrSubtract(d[y+R],p.multiply(E,l[R]))}return new Xe(p,d)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const r=this.coefficients.length,s=this.field,l=new Int32Array(r),c=this.coefficients;for(let d=0;d<r;d++)l[d]=s.multiply(c[d],e);return new Xe(s,l)}multiplyByMonomial(e,r){if(e<0)throw new T;if(r===0)return this.field.getZero();const s=this.coefficients,l=s.length,c=new Int32Array(l+e),d=this.field;for(let p=0;p<l;p++)c[p]=d.multiply(s[p],r);return new Xe(d,c)}divide(e){if(!this.field.equals(e.field))throw new T("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new T("Divide by 0");const r=this.field;let s=r.getZero(),l=this;const c=e.getCoefficient(e.getDegree()),d=r.inverse(c);for(;l.getDegree()>=e.getDegree()&&!l.isZero();){const p=l.getDegree()-e.getDegree(),y=r.multiply(l.getCoefficient(l.getDegree()),d),E=e.multiplyByMonomial(p,y),R=r.buildMonomial(p,y);s=s.addOrSubtract(R),l=l.addOrSubtract(E)}return[s,l]}toString(){let e="";for(let r=this.getDegree();r>=0;r--){let s=this.getCoefficient(r);if(s!==0){if(s<0?(e+=" - ",s=-s):e.length>0&&(e+=" + "),r===0||s!==1){const l=this.field.log(s);l===0?e+="1":l===1?e+="a":(e+="a^",e+=l)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e}}class de extends C{}de.kind="ArithmeticException";class xe extends et{constructor(e,r,s){super(),this.primitive=e,this.size=r,this.generatorBase=s;const l=new Int32Array(r);let c=1;for(let p=0;p<r;p++)l[p]=c,c*=2,c>=r&&(c^=e,c&=r-1);this.expTable=l;const d=new Int32Array(r);for(let p=0;p<r-1;p++)d[l[p]]=p;this.logTable=d,this.zero=new Xe(this,Int32Array.from([0])),this.one=new Xe(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,r){if(e<0)throw new T;if(r===0)return this.zero;const s=new Int32Array(e+1);return s[0]=r,new Xe(this,s)}inverse(e){if(e===0)throw new de;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+F.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}xe.AZTEC_DATA_12=new xe(4201,4096,1),xe.AZTEC_DATA_10=new xe(1033,1024,1),xe.AZTEC_DATA_6=new xe(67,64,1),xe.AZTEC_PARAM=new xe(19,16,1),xe.QR_CODE_FIELD_256=new xe(285,256,0),xe.DATA_MATRIX_FIELD_256=new xe(301,256,1),xe.AZTEC_DATA_8=xe.DATA_MATRIX_FIELD_256,xe.MAXICODE_FIELD_64=xe.AZTEC_DATA_6;class $e extends C{}$e.kind="ReedSolomonException";class Ze extends C{}Ze.kind="IllegalStateException";class It{constructor(e){this.field=e}decode(e,r){const s=this.field,l=new Xe(s,e),c=new Int32Array(r);let d=!0;for(let z=0;z<r;z++){const Z=l.evaluateAt(s.exp(z+s.getGeneratorBase()));c[c.length-1-z]=Z,Z!==0&&(d=!1)}if(d)return;const p=new Xe(s,c),y=this.runEuclideanAlgorithm(s.buildMonomial(r,1),p,r),E=y[0],R=y[1],P=this.findErrorLocations(E),D=this.findErrorMagnitudes(R,P);for(let z=0;z<P.length;z++){const Z=e.length-1-s.log(P[z]);if(Z<0)throw new $e("Bad error location");e[Z]=xe.addOrSubtract(e[Z],D[z])}}runEuclideanAlgorithm(e,r,s){if(e.getDegree()<r.getDegree()){const z=e;e=r,r=z}const l=this.field;let c=e,d=r,p=l.getZero(),y=l.getOne();for(;d.getDegree()>=(s/2|0);){let z=c,Z=p;if(c=d,p=y,c.isZero())throw new $e("r_{i-1} was zero");d=z;let ee=l.getZero();const oe=c.getCoefficient(c.getDegree()),he=l.inverse(oe);for(;d.getDegree()>=c.getDegree()&&!d.isZero();){const Fe=d.getDegree()-c.getDegree(),Ve=l.multiply(d.getCoefficient(d.getDegree()),he);ee=ee.addOrSubtract(l.buildMonomial(Fe,Ve)),d=d.addOrSubtract(c.multiplyByMonomial(Fe,Ve))}if(y=ee.multiply(p).addOrSubtract(Z),d.getDegree()>=c.getDegree())throw new Ze("Division algorithm failed to reduce polynomial?")}const E=y.getCoefficient(0);if(E===0)throw new $e("sigmaTilde(0) was zero");const R=l.inverse(E),P=y.multiplyScalar(R),D=d.multiplyScalar(R);return[P,D]}findErrorLocations(e){const r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);const s=new Int32Array(r);let l=0;const c=this.field;for(let d=1;d<c.getSize()&&l<r;d++)e.evaluateAt(d)===0&&(s[l]=c.inverse(d),l++);if(l!==r)throw new $e("Error locator degree does not match number of roots");return s}findErrorMagnitudes(e,r){const s=r.length,l=new Int32Array(s),c=this.field;for(let d=0;d<s;d++){const p=c.inverse(r[d]);let y=1;for(let E=0;E<s;E++)if(d!==E){const R=c.multiply(r[E],p),P=R&1?R&-2:R|1;y=c.multiply(y,P)}l[d]=c.multiply(e.evaluateAt(p),c.inverse(y)),c.getGeneratorBase()!==0&&(l[d]=c.multiply(l[d],p))}return l}}var it;(function(k){k[k.UPPER=0]="UPPER",k[k.LOWER=1]="LOWER",k[k.MIXED=2]="MIXED",k[k.DIGIT=3]="DIGIT",k[k.PUNCT=4]="PUNCT",k[k.BINARY=5]="BINARY"})(it||(it={}));class qe{decode(e){this.ddata=e;let r=e.getBits(),s=this.extractBits(r),l=this.correctBits(s),c=qe.convertBoolArrayToByteArray(l),d=qe.getEncodedData(l),p=new Le(c,d,null,null);return p.setNumBits(l.length),p}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let r=e.length,s=it.UPPER,l=it.UPPER,c="",d=0;for(;d<r;)if(l===it.BINARY){if(r-d<5)break;let p=qe.readCode(e,d,5);if(d+=5,p===0){if(r-d<11)break;p=qe.readCode(e,d,11)+31,d+=11}for(let y=0;y<p;y++){if(r-d<8){d=r;break}const E=qe.readCode(e,d,8);c+=Ae.castAsNonUtf8Char(E),d+=8}l=s}else{let p=l===it.DIGIT?4:5;if(r-d<p)break;let y=qe.readCode(e,d,p);d+=p;let E=qe.getCharacter(l,y);E.startsWith("CTRL_")?(s=l,l=qe.getTable(E.charAt(5)),E.charAt(6)==="L"&&(s=l)):(c+=E,l=s)}return c}static getTable(e){switch(e){case"L":return it.LOWER;case"P":return it.PUNCT;case"M":return it.MIXED;case"D":return it.DIGIT;case"B":return it.BINARY;case"U":default:return it.UPPER}}static getCharacter(e,r){switch(e){case it.UPPER:return qe.UPPER_TABLE[r];case it.LOWER:return qe.LOWER_TABLE[r];case it.MIXED:return qe.MIXED_TABLE[r];case it.PUNCT:return qe.PUNCT_TABLE[r];case it.DIGIT:return qe.DIGIT_TABLE[r];default:throw new Ze("Bad table")}}correctBits(e){let r,s;this.ddata.getNbLayers()<=2?(s=6,r=xe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(s=8,r=xe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(s=10,r=xe.AZTEC_DATA_10):(s=12,r=xe.AZTEC_DATA_12);let l=this.ddata.getNbDatablocks(),c=e.length/s;if(c<l)throw new q;let d=e.length%s,p=new Int32Array(c);for(let D=0;D<c;D++,d+=s)p[D]=qe.readCode(e,d,s);try{new It(r).decode(p,c-l)}catch(D){throw new q(D)}let y=(1<<s)-1,E=0;for(let D=0;D<l;D++){let z=p[D];if(z===0||z===y)throw new q;(z===1||z===y-1)&&E++}let R=new Array(l*s-E),P=0;for(let D=0;D<l;D++){let z=p[D];if(z===1||z===y-1)R.fill(z>1,P,P+s-1),P+=s-1;else for(let Z=s-1;Z>=0;--Z)R[P++]=(z&1<<Z)!==0}return R}extractBits(e){let r=this.ddata.isCompact(),s=this.ddata.getNbLayers(),l=(r?11:14)+s*4,c=new Int32Array(l),d=new Array(this.totalBitsInLayer(s,r));if(r)for(let p=0;p<c.length;p++)c[p]=p;else{let p=l+1+2*F.truncDivision(F.truncDivision(l,2)-1,15),y=l/2,E=F.truncDivision(p,2);for(let R=0;R<y;R++){let P=R+F.truncDivision(R,15);c[y-R-1]=E-P-1,c[y+R]=E+P+1}}for(let p=0,y=0;p<s;p++){let E=(s-p)*4+(r?9:12),R=p*2,P=l-1-R;for(let D=0;D<E;D++){let z=D*2;for(let Z=0;Z<2;Z++)d[y+z+Z]=e.get(c[R+Z],c[R+D]),d[y+2*E+z+Z]=e.get(c[R+D],c[P-Z]),d[y+4*E+z+Z]=e.get(c[P-Z],c[P-D]),d[y+6*E+z+Z]=e.get(c[P-D],c[R+Z])}y+=E*8}return d}static readCode(e,r,s){let l=0;for(let c=r;c<r+s;c++)l<<=1,e[c]&&(l|=1);return l}static readByte(e,r){let s=e.length-r;return s>=8?qe.readCode(e,r,8):qe.readCode(e,r,s)<<8-s}static convertBoolArrayToByteArray(e){let r=new Uint8Array((e.length+7)/8);for(let s=0;s<r.length;s++)r[s]=qe.readByte(e,8*s);return r}totalBitsInLayer(e,r){return((r?88:112)+16*e)*e}}qe.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],qe.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],qe.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],qe.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],qe.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class tt{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,r,s,l){const c=e-s,d=r-l;return Math.sqrt(c*c+d*d)}static sum(e){let r=0;for(let s=0,l=e.length;s!==l;s++){const c=e[s];r+=c}return r}}class jt{static floatToIntBits(e){return e}}jt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ue{constructor(e,r){this.x=e,this.y=r}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof Ue){const r=e;return this.x===r.x&&this.y===r.y}return!1}hashCode(){return 31*jt.floatToIntBits(this.x)+jt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const r=this.distance(e[0],e[1]),s=this.distance(e[1],e[2]),l=this.distance(e[0],e[2]);let c,d,p;if(s>=r&&s>=l?(d=e[0],c=e[1],p=e[2]):l>=s&&l>=r?(d=e[1],c=e[0],p=e[2]):(d=e[2],c=e[0],p=e[1]),this.crossProductZ(c,d,p)<0){const y=c;c=p,p=y}e[0]=c,e[1]=d,e[2]=p}static distance(e,r){return tt.distance(e.x,e.y,r.x,r.y)}static crossProductZ(e,r,s){const l=r.x,c=r.y;return(s.x-l)*(e.y-c)-(s.y-c)*(e.x-l)}}class gn{constructor(e,r){this.bits=e,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class ir extends gn{constructor(e,r,s,l,c){super(e,r),this.compact=s,this.nbDatablocks=l,this.nbLayers=c}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Ge{constructor(e,r,s,l){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=Ge.INIT_SIZE),s==null&&(s=e.getWidth()/2|0),l==null&&(l=e.getHeight()/2|0);const c=r/2|0;if(this.leftInit=s-c,this.rightInit=s+c,this.upInit=l-c,this.downInit=l+c,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new $}detect(){let e=this.leftInit,r=this.rightInit,s=this.upInit,l=this.downInit,c=!1,d=!0,p=!1,y=!1,E=!1,R=!1,P=!1;const D=this.width,z=this.height;for(;d;){d=!1;let Z=!0;for(;(Z||!y)&&r<D;)Z=this.containsBlackPoint(s,l,r,!1),Z?(r++,d=!0,y=!0):y||r++;if(r>=D){c=!0;break}let ee=!0;for(;(ee||!E)&&l<z;)ee=this.containsBlackPoint(e,r,l,!0),ee?(l++,d=!0,E=!0):E||l++;if(l>=z){c=!0;break}let oe=!0;for(;(oe||!R)&&e>=0;)oe=this.containsBlackPoint(s,l,e,!1),oe?(e--,d=!0,R=!0):R||e--;if(e<0){c=!0;break}let he=!0;for(;(he||!P)&&s>=0;)he=this.containsBlackPoint(e,r,s,!0),he?(s--,d=!0,P=!0):P||s--;if(s<0){c=!0;break}d&&(p=!0)}if(!c&&p){const Z=r-e;let ee=null;for(let Ve=1;ee===null&&Ve<Z;Ve++)ee=this.getBlackPointOnSegment(e,l-Ve,e+Ve,l);if(ee==null)throw new $;let oe=null;for(let Ve=1;oe===null&&Ve<Z;Ve++)oe=this.getBlackPointOnSegment(e,s+Ve,e+Ve,s);if(oe==null)throw new $;let he=null;for(let Ve=1;he===null&&Ve<Z;Ve++)he=this.getBlackPointOnSegment(r,s+Ve,r-Ve,s);if(he==null)throw new $;let Fe=null;for(let Ve=1;Fe===null&&Ve<Z;Ve++)Fe=this.getBlackPointOnSegment(r,l-Ve,r-Ve,l);if(Fe==null)throw new $;return this.centerEdges(Fe,ee,he,oe)}else throw new $}getBlackPointOnSegment(e,r,s,l){const c=tt.round(tt.distance(e,r,s,l)),d=(s-e)/c,p=(l-r)/c,y=this.image;for(let E=0;E<c;E++){const R=tt.round(e+E*d),P=tt.round(r+E*p);if(y.get(R,P))return new Ue(R,P)}return null}centerEdges(e,r,s,l){const c=e.getX(),d=e.getY(),p=r.getX(),y=r.getY(),E=s.getX(),R=s.getY(),P=l.getX(),D=l.getY(),z=Ge.CORR;return c<this.width/2?[new Ue(P-z,D+z),new Ue(p+z,y+z),new Ue(E-z,R-z),new Ue(c+z,d-z)]:[new Ue(P+z,D+z),new Ue(p+z,y-z),new Ue(E-z,R+z),new Ue(c-z,d-z)]}containsBlackPoint(e,r,s,l){const c=this.image;if(l){for(let d=e;d<=r;d++)if(c.get(d,s))return!0}else for(let d=e;d<=r;d++)if(c.get(s,d))return!0;return!1}}Ge.INIT_SIZE=10,Ge.CORR=1;class Tt{static checkAndNudgePoints(e,r){const s=e.getWidth(),l=e.getHeight();let c=!0;for(let d=0;d<r.length&&c;d+=2){const p=Math.floor(r[d]),y=Math.floor(r[d+1]);if(p<-1||p>s||y<-1||y>l)throw new $;c=!1,p===-1?(r[d]=0,c=!0):p===s&&(r[d]=s-1,c=!0),y===-1?(r[d+1]=0,c=!0):y===l&&(r[d+1]=l-1,c=!0)}c=!0;for(let d=r.length-2;d>=0&&c;d-=2){const p=Math.floor(r[d]),y=Math.floor(r[d+1]);if(p<-1||p>s||y<-1||y>l)throw new $;c=!1,p===-1?(r[d]=0,c=!0):p===s&&(r[d]=s-1,c=!0),y===-1?(r[d+1]=0,c=!0):y===l&&(r[d+1]=l-1,c=!0)}}}class ze{constructor(e,r,s,l,c,d,p,y,E){this.a11=e,this.a21=r,this.a31=s,this.a12=l,this.a22=c,this.a32=d,this.a13=p,this.a23=y,this.a33=E}static quadrilateralToQuadrilateral(e,r,s,l,c,d,p,y,E,R,P,D,z,Z,ee,oe){const he=ze.quadrilateralToSquare(e,r,s,l,c,d,p,y);return ze.squareToQuadrilateral(E,R,P,D,z,Z,ee,oe).times(he)}transformPoints(e){const r=e.length,s=this.a11,l=this.a12,c=this.a13,d=this.a21,p=this.a22,y=this.a23,E=this.a31,R=this.a32,P=this.a33;for(let D=0;D<r;D+=2){const z=e[D],Z=e[D+1],ee=c*z+y*Z+P;e[D]=(s*z+d*Z+E)/ee,e[D+1]=(l*z+p*Z+R)/ee}}transformPointsWithValues(e,r){const s=this.a11,l=this.a12,c=this.a13,d=this.a21,p=this.a22,y=this.a23,E=this.a31,R=this.a32,P=this.a33,D=e.length;for(let z=0;z<D;z++){const Z=e[z],ee=r[z],oe=c*Z+y*ee+P;e[z]=(s*Z+d*ee+E)/oe,r[z]=(l*Z+p*ee+R)/oe}}static squareToQuadrilateral(e,r,s,l,c,d,p,y){const E=e-s+c-p,R=r-l+d-y;if(E===0&&R===0)return new ze(s-e,c-s,e,l-r,d-l,r,0,0,1);{const P=s-c,D=p-c,z=l-d,Z=y-d,ee=P*Z-D*z,oe=(E*Z-D*R)/ee,he=(P*R-E*z)/ee;return new ze(s-e+oe*s,p-e+he*p,e,l-r+oe*l,y-r+he*y,r,oe,he,1)}}static quadrilateralToSquare(e,r,s,l,c,d,p,y){return ze.squareToQuadrilateral(e,r,s,l,c,d,p,y).buildAdjoint()}buildAdjoint(){return new ze(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new ze(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class ct extends Tt{sampleGrid(e,r,s,l,c,d,p,y,E,R,P,D,z,Z,ee,oe,he,Fe,Ve){const Pe=ze.quadrilateralToQuadrilateral(l,c,d,p,y,E,R,P,D,z,Z,ee,oe,he,Fe,Ve);return this.sampleGridWithTransform(e,r,s,Pe)}sampleGridWithTransform(e,r,s,l){if(r<=0||s<=0)throw new $;const c=new Ie(r,s),d=new Float32Array(2*r);for(let p=0;p<s;p++){const y=d.length,E=p+.5;for(let R=0;R<y;R+=2)d[R]=R/2+.5,d[R+1]=E;l.transformPoints(d),Tt.checkAndNudgePoints(e,d);try{for(let R=0;R<y;R+=2)e.get(Math.floor(d[R]),Math.floor(d[R+1]))&&c.set(R/2,p)}catch{throw new $}}return c}}class Je{static setGridSampler(e){Je.gridSampler=e}static getInstance(){return Je.gridSampler}}Je.gridSampler=new ct;class wt{constructor(e,r){this.x=e,this.y=r}toResultPoint(){return new Ue(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Bt{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let r=this.getMatrixCenter(),s=this.getBullsEyeCorners(r);if(e){let d=s[0];s[0]=s[2],s[2]=d}this.extractParameters(s);let l=this.sampleGrid(this.image,s[this.shift%4],s[(this.shift+1)%4],s[(this.shift+2)%4],s[(this.shift+3)%4]),c=this.getMatrixCornerPoints(s);return new ir(l,c,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new $;let r=2*this.nbCenterLayers,s=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(s,r);let l=0;for(let d=0;d<4;d++){let p=s[(this.shift+d)%4];this.compact?(l<<=7,l+=p>>1&127):(l<<=10,l+=(p>>2&992)+(p>>1&31))}let c=this.getCorrectedParameterData(l,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)}getRotation(e,r){let s=0;e.forEach((l,c,d)=>{let p=(l>>r-2<<1)+(l&1);s=(s<<3)+p}),s=((s&1)<<11)+(s>>1);for(let l=0;l<4;l++)if(F.bitCount(s^this.EXPECTED_CORNER_BITS[l])<=2)return l;throw new $}getCorrectedParameterData(e,r){let s,l;r?(s=7,l=2):(s=10,l=4);let c=s-l,d=new Int32Array(s);for(let y=s-1;y>=0;--y)d[y]=e&15,e>>=4;try{new It(xe.AZTEC_PARAM).decode(d,c)}catch{throw new $}let p=0;for(let y=0;y<l;y++)p=(p<<4)+d[y];return p}getBullsEyeCorners(e){let r=e,s=e,l=e,c=e,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let P=this.getFirstDifferent(r,d,1,-1),D=this.getFirstDifferent(s,d,1,1),z=this.getFirstDifferent(l,d,-1,1),Z=this.getFirstDifferent(c,d,-1,-1);if(this.nbCenterLayers>2){let ee=this.distancePoint(Z,P)*this.nbCenterLayers/(this.distancePoint(c,r)*(this.nbCenterLayers+2));if(ee<.75||ee>1.25||!this.isWhiteOrBlackRectangle(P,D,z,Z))break}r=P,s=D,l=z,c=Z,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new $;this.compact=this.nbCenterLayers===5;let p=new Ue(r.getX()+.5,r.getY()-.5),y=new Ue(s.getX()+.5,s.getY()+.5),E=new Ue(l.getX()-.5,l.getY()+.5),R=new Ue(c.getX()-.5,c.getY()-.5);return this.expandSquare([p,y,E,R],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,r,s,l;try{let p=new Ge(this.image).detect();e=p[0],r=p[1],s=p[2],l=p[3]}catch{let y=this.image.getWidth()/2,E=this.image.getHeight()/2;e=this.getFirstDifferent(new wt(y+7,E-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new wt(y+7,E+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new wt(y-7,E+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new wt(y-7,E-7),!1,-1,-1).toResultPoint()}let c=tt.round((e.getX()+l.getX()+r.getX()+s.getX())/4),d=tt.round((e.getY()+l.getY()+r.getY()+s.getY())/4);try{let p=new Ge(this.image,15,c,d).detect();e=p[0],r=p[1],s=p[2],l=p[3]}catch{e=this.getFirstDifferent(new wt(c+7,d-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new wt(c+7,d+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new wt(c-7,d+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new wt(c-7,d-7),!1,-1,-1).toResultPoint()}return c=tt.round((e.getX()+l.getX()+r.getX()+s.getX())/4),d=tt.round((e.getY()+l.getY()+r.getY()+s.getY())/4),new wt(c,d)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,r,s,l,c){let d=Je.getInstance(),p=this.getDimension(),y=p/2-this.nbCenterLayers,E=p/2+this.nbCenterLayers;return d.sampleGrid(e,p,p,y,y,E,y,E,E,y,E,r.getX(),r.getY(),s.getX(),s.getY(),l.getX(),l.getY(),c.getX(),c.getY())}sampleLine(e,r,s){let l=0,c=this.distanceResultPoint(e,r),d=c/s,p=e.getX(),y=e.getY(),E=d*(r.getX()-e.getX())/c,R=d*(r.getY()-e.getY())/c;for(let P=0;P<s;P++)this.image.get(tt.round(p+P*E),tt.round(y+P*R))&&(l|=1<<s-P-1);return l}isWhiteOrBlackRectangle(e,r,s,l){let c=3;e=new wt(e.getX()-c,e.getY()+c),r=new wt(r.getX()-c,r.getY()-c),s=new wt(s.getX()+c,s.getY()-c),l=new wt(l.getX()+c,l.getY()+c);let d=this.getColor(l,e);if(d===0)return!1;let p=this.getColor(e,r);return p!==d||(p=this.getColor(r,s),p!==d)?!1:(p=this.getColor(s,l),p===d)}getColor(e,r){let s=this.distancePoint(e,r),l=(r.getX()-e.getX())/s,c=(r.getY()-e.getY())/s,d=0,p=e.getX(),y=e.getY(),E=this.image.get(e.getX(),e.getY()),R=Math.ceil(s);for(let D=0;D<R;D++)p+=l,y+=c,this.image.get(tt.round(p),tt.round(y))!==E&&d++;let P=d/s;return P>.1&&P<.9?0:P<=.1===E?1:-1}getFirstDifferent(e,r,s,l){let c=e.getX()+s,d=e.getY()+l;for(;this.isValid(c,d)&&this.image.get(c,d)===r;)c+=s,d+=l;for(c-=s,d-=l;this.isValid(c,d)&&this.image.get(c,d)===r;)c+=s;for(c-=s;this.isValid(c,d)&&this.image.get(c,d)===r;)d+=l;return d-=l,new wt(c,d)}expandSquare(e,r,s){let l=s/(2*r),c=e[0].getX()-e[2].getX(),d=e[0].getY()-e[2].getY(),p=(e[0].getX()+e[2].getX())/2,y=(e[0].getY()+e[2].getY())/2,E=new Ue(p+l*c,y+l*d),R=new Ue(p-l*c,y-l*d);c=e[1].getX()-e[3].getX(),d=e[1].getY()-e[3].getY(),p=(e[1].getX()+e[3].getX())/2,y=(e[1].getY()+e[3].getY())/2;let P=new Ue(p+l*c,y+l*d),D=new Ue(p-l*c,y-l*d);return[E,P,R,D]}isValid(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()}isValidPoint(e){let r=tt.round(e.getX()),s=tt.round(e.getY());return this.isValid(r,s)}distancePoint(e,r){return tt.distance(e.getX(),e.getY(),r.getX(),r.getY())}distanceResultPoint(e,r){return tt.distance(e.getX(),e.getY(),r.getX(),r.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(F.truncDivision(this.nbLayers-4,8)+1)+15}}class Xt{decode(e,r=null){let s=null,l=new Bt(e.getBlackMatrix()),c=null,d=null;try{let R=l.detectMirror(!1);c=R.getPoints(),this.reportFoundResultPoints(r,c),d=new qe().decode(R)}catch(R){s=R}if(d==null)try{let R=l.detectMirror(!0);c=R.getPoints(),this.reportFoundResultPoints(r,c),d=new qe().decode(R)}catch(R){throw s??R}let p=new ae(d.getText(),d.getRawBytes(),d.getNumBits(),c,te.AZTEC,B.currentTimeMillis()),y=d.getByteSegments();y!=null&&p.putMetadata(Se.BYTE_SEGMENTS,y);let E=d.getECLevel();return E!=null&&p.putMetadata(Se.ERROR_CORRECTION_LEVEL,E),p}reportFoundResultPoints(e,r){if(e!=null){let s=e.get(ne.NEED_RESULT_POINT_CALLBACK);s!=null&&r.forEach((l,c,d)=>{s.foundPossibleResultPoint(l)})}}reset(){}}class Be extends Ce{constructor(e=500){super(new Xt,e)}}class Te{decode(e,r){try{return this.doDecode(e,r)}catch{if(r&&r.get(ne.TRY_HARDER)===!0&&e.isRotateSupported()){const c=e.rotateCounterClockwise(),d=this.doDecode(c,r),p=d.getResultMetadata();let y=270;p!==null&&p.get(Se.ORIENTATION)===!0&&(y=y+p.get(Se.ORIENTATION)%360),d.putMetadata(Se.ORIENTATION,y);const E=d.getResultPoints();if(E!==null){const R=c.getHeight();for(let P=0;P<E.length;P++)E[P]=new Ue(R-E[P].getY()-1,E[P].getX())}return d}else throw new $}}reset(){}doDecode(e,r){const s=e.getWidth(),l=e.getHeight();let c=new Y(s);const d=r&&r.get(ne.TRY_HARDER)===!0,p=Math.max(1,l>>(d?8:5));let y;d?y=l:y=15;const E=Math.trunc(l/2);for(let R=0;R<y;R++){const P=Math.trunc((R+1)/2),D=(R&1)===0,z=E+p*(D?P:-P);if(z<0||z>=l)break;try{c=e.getBlackRow(z,c)}catch{continue}for(let Z=0;Z<2;Z++){if(Z===1&&(c.reverse(),r&&r.get(ne.NEED_RESULT_POINT_CALLBACK)===!0)){const ee=new Map;r.forEach((oe,he)=>ee.set(he,oe)),ee.delete(ne.NEED_RESULT_POINT_CALLBACK),r=ee}try{const ee=this.decodeRow(z,c,r);if(Z===1){ee.putMetadata(Se.ORIENTATION,180);const oe=ee.getResultPoints();oe!==null&&(oe[0]=new Ue(s-oe[0].getX()-1,oe[0].getY()),oe[1]=new Ue(s-oe[1].getX()-1,oe[1].getY()))}return ee}catch{}}}throw new $}static recordPattern(e,r,s){const l=s.length;for(let E=0;E<l;E++)s[E]=0;const c=e.getSize();if(r>=c)throw new $;let d=!e.get(r),p=0,y=r;for(;y<c;){if(e.get(y)!==d)s[p]++;else{if(++p===l)break;s[p]=1,d=!d}y++}if(!(p===l||p===l-1&&y===c))throw new $}static recordPatternInReverse(e,r,s){let l=s.length,c=e.get(r);for(;r>0&&l>=0;)e.get(--r)!==c&&(l--,c=!c);if(l>=0)throw new $;Te.recordPattern(e,r+1,s)}static patternMatchVariance(e,r,s){const l=e.length;let c=0,d=0;for(let E=0;E<l;E++)c+=e[E],d+=r[E];if(c<d)return Number.POSITIVE_INFINITY;const p=c/d;s*=p;let y=0;for(let E=0;E<l;E++){const R=e[E],P=r[E]*p,D=R>P?R-P:P-R;if(D>s)return Number.POSITIVE_INFINITY;y+=D}return y/c}}class ce extends Te{static findStartPattern(e){const r=e.getSize(),s=e.getNextSet(0);let l=0,c=Int32Array.from([0,0,0,0,0,0]),d=s,p=!1;const y=6;for(let E=s;E<r;E++)if(e.get(E)!==p)c[l]++;else{if(l===y-1){let R=ce.MAX_AVG_VARIANCE,P=-1;for(let D=ce.CODE_START_A;D<=ce.CODE_START_C;D++){const z=Te.patternMatchVariance(c,ce.CODE_PATTERNS[D],ce.MAX_INDIVIDUAL_VARIANCE);z<R&&(R=z,P=D)}if(P>=0&&e.isRange(Math.max(0,d-(E-d)/2),d,!1))return Int32Array.from([d,E,P]);d+=c[0]+c[1],c=c.slice(2,c.length-1),c[l-1]=0,c[l]=0,l--}else l++;c[l]=1,p=!p}throw new $}static decodeCode(e,r,s){Te.recordPattern(e,s,r);let l=ce.MAX_AVG_VARIANCE,c=-1;for(let d=0;d<ce.CODE_PATTERNS.length;d++){const p=ce.CODE_PATTERNS[d],y=this.patternMatchVariance(r,p,ce.MAX_INDIVIDUAL_VARIANCE);y<l&&(l=y,c=d)}if(c>=0)return c;throw new $}decodeRow(e,r,s){const l=s&&s.get(ne.ASSUME_GS1)===!0,c=ce.findStartPattern(r),d=c[2];let p=0;const y=new Uint8Array(20);y[p++]=d;let E;switch(d){case ce.CODE_START_A:E=ce.CODE_CODE_A;break;case ce.CODE_START_B:E=ce.CODE_CODE_B;break;case ce.CODE_START_C:E=ce.CODE_CODE_C;break;default:throw new q}let R=!1,P=!1,D="",z=c[0],Z=c[1];const ee=Int32Array.from([0,0,0,0,0,0]);let oe=0,he=0,Fe=d,Ve=0,Pe=!0,Rt=!1,Et=!1;for(;!R;){const si=P;switch(P=!1,oe=he,he=ce.decodeCode(r,ee,Z),y[p++]=he,he!==ce.CODE_STOP&&(Pe=!0),he!==ce.CODE_STOP&&(Ve++,Fe+=Ve*he),z=Z,Z+=ee.reduce((cs,la)=>cs+la,0),he){case ce.CODE_START_A:case ce.CODE_START_B:case ce.CODE_START_C:throw new q}switch(E){case ce.CODE_CODE_A:if(he<64)Et===Rt?D+=String.fromCharCode(32+he):D+=String.fromCharCode(32+he+128),Et=!1;else if(he<96)Et===Rt?D+=String.fromCharCode(he-64):D+=String.fromCharCode(he+64),Et=!1;else switch(he!==ce.CODE_STOP&&(Pe=!1),he){case ce.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case ce.CODE_FNC_2:case ce.CODE_FNC_3:break;case ce.CODE_FNC_4_A:!Rt&&Et?(Rt=!0,Et=!1):Rt&&Et?(Rt=!1,Et=!1):Et=!0;break;case ce.CODE_SHIFT:P=!0,E=ce.CODE_CODE_B;break;case ce.CODE_CODE_B:E=ce.CODE_CODE_B;break;case ce.CODE_CODE_C:E=ce.CODE_CODE_C;break;case ce.CODE_STOP:R=!0;break}break;case ce.CODE_CODE_B:if(he<96)Et===Rt?D+=String.fromCharCode(32+he):D+=String.fromCharCode(32+he+128),Et=!1;else switch(he!==ce.CODE_STOP&&(Pe=!1),he){case ce.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case ce.CODE_FNC_2:case ce.CODE_FNC_3:break;case ce.CODE_FNC_4_B:!Rt&&Et?(Rt=!0,Et=!1):Rt&&Et?(Rt=!1,Et=!1):Et=!0;break;case ce.CODE_SHIFT:P=!0,E=ce.CODE_CODE_A;break;case ce.CODE_CODE_A:E=ce.CODE_CODE_A;break;case ce.CODE_CODE_C:E=ce.CODE_CODE_C;break;case ce.CODE_STOP:R=!0;break}break;case ce.CODE_CODE_C:if(he<100)he<10&&(D+="0"),D+=he;else switch(he!==ce.CODE_STOP&&(Pe=!1),he){case ce.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case ce.CODE_CODE_A:E=ce.CODE_CODE_A;break;case ce.CODE_CODE_B:E=ce.CODE_CODE_B;break;case ce.CODE_STOP:R=!0;break}break}si&&(E=E===ce.CODE_CODE_A?ce.CODE_CODE_B:ce.CODE_CODE_A)}const mr=Z-z;if(Z=r.getNextUnset(Z),!r.isRange(Z,Math.min(r.getSize(),Z+(Z-z)/2),!1))throw new $;if(Fe-=Ve*oe,Fe%103!==oe)throw new O;const Ur=D.length;if(Ur===0)throw new $;Ur>0&&Pe&&(E===ce.CODE_CODE_C?D=D.substring(0,Ur-2):D=D.substring(0,Ur-1));const kn=(c[1]+c[0])/2,Zt=z+mr/2,yn=y.length,lr=new Uint8Array(yn);for(let si=0;si<yn;si++)lr[si]=y[si];const Bi=[new Ue(kn,e),new Ue(Zt,e)];return new ae(D,lr,0,Bi,te.CODE_128,new Date().getTime())}}ce.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ce.MAX_AVG_VARIANCE=.25,ce.MAX_INDIVIDUAL_VARIANCE=.7,ce.CODE_SHIFT=98,ce.CODE_CODE_C=99,ce.CODE_CODE_B=100,ce.CODE_CODE_A=101,ce.CODE_FNC_1=102,ce.CODE_FNC_2=97,ce.CODE_FNC_3=96,ce.CODE_FNC_4_A=101,ce.CODE_FNC_4_B=100,ce.CODE_START_A=103,ce.CODE_START_B=104,ce.CODE_START_C=105,ce.CODE_STOP=106;class ft extends Te{constructor(e=!1,r=!1){super(),this.usingCheckDigit=e,this.extendedMode=r,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,r,s){let l=this.counters;l.fill(0),this.decodeRowResult="";let c=ft.findAsteriskPattern(r,l),d=r.getNextSet(c[1]),p=r.getSize(),y,E;do{ft.recordPattern(r,d,l);let ee=ft.toNarrowWidePattern(l);if(ee<0)throw new $;y=ft.patternToChar(ee),this.decodeRowResult+=y,E=d;for(let oe of l)d+=oe;d=r.getNextSet(d)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let R=0;for(let ee of l)R+=ee;let P=d-E-R;if(d!==p&&P*2<R)throw new $;if(this.usingCheckDigit){let ee=this.decodeRowResult.length-1,oe=0;for(let he=0;he<ee;he++)oe+=ft.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(he));if(this.decodeRowResult.charAt(ee)!==ft.ALPHABET_STRING.charAt(oe%43))throw new O;this.decodeRowResult=this.decodeRowResult.substring(0,ee)}if(this.decodeRowResult.length===0)throw new $;let D;this.extendedMode?D=ft.decodeExtended(this.decodeRowResult):D=this.decodeRowResult;let z=(c[1]+c[0])/2,Z=E+R/2;return new ae(D,null,0,[new Ue(z,e),new Ue(Z,e)],te.CODE_39,new Date().getTime())}static findAsteriskPattern(e,r){let s=e.getSize(),l=e.getNextSet(0),c=0,d=l,p=!1,y=r.length;for(let E=l;E<s;E++)if(e.get(E)!==p)r[c]++;else{if(c===y-1){if(this.toNarrowWidePattern(r)===ft.ASTERISK_ENCODING&&e.isRange(Math.max(0,d-Math.floor((E-d)/2)),d,!1))return[d,E];d+=r[0]+r[1],r.copyWithin(0,2,2+c-1),r[c-1]=0,r[c]=0,c--}else c++;r[c]=1,p=!p}throw new $}static toNarrowWidePattern(e){let r=e.length,s=0,l;do{let c=2147483647;for(let y of e)y<c&&y>s&&(c=y);s=c,l=0;let d=0,p=0;for(let y=0;y<r;y++){let E=e[y];E>s&&(p|=1<<r-1-y,l++,d+=E)}if(l===3){for(let y=0;y<r&&l>0;y++){let E=e[y];if(E>s&&(l--,E*2>=d))return-1}return p}}while(l>3);return-1}static patternToChar(e){for(let r=0;r<ft.CHARACTER_ENCODINGS.length;r++)if(ft.CHARACTER_ENCODINGS[r]===e)return ft.ALPHABET_STRING.charAt(r);if(e===ft.ASTERISK_ENCODING)return"*";throw new $}static decodeExtended(e){let r=e.length,s="";for(let l=0;l<r;l++){let c=e.charAt(l);if(c==="+"||c==="$"||c==="%"||c==="/"){let d=e.charAt(l+1),p="\0";switch(c){case"+":if(d>="A"&&d<="Z")p=String.fromCharCode(d.charCodeAt(0)+32);else throw new q;break;case"$":if(d>="A"&&d<="Z")p=String.fromCharCode(d.charCodeAt(0)-64);else throw new q;break;case"%":if(d>="A"&&d<="E")p=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")p=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")p=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")p=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")p="\0";else if(d==="V")p="@";else if(d==="W")p="`";else if(d==="X"||d==="Y"||d==="Z")p="";else throw new q;break;case"/":if(d>="A"&&d<="O")p=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")p=":";else throw new q;break}s+=p,l++}else s+=c}return s}}ft.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",ft.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],ft.ASTERISK_ENCODING=148;class ut extends Te{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,r,s){let l=this.decodeStart(r),c=this.decodeEnd(r),d=new be;ut.decodeMiddle(r,l[1],c[0],d);let p=d.toString(),y=null;s!=null&&(y=s.get(ne.ALLOWED_LENGTHS)),y==null&&(y=ut.DEFAULT_ALLOWED_LENGTHS);let E=p.length,R=!1,P=0;for(let Z of y){if(E===Z){R=!0;break}Z>P&&(P=Z)}if(!R&&E>P&&(R=!0),!R)throw new q;const D=[new Ue(l[1],e),new Ue(c[0],e)];return new ae(p,null,0,D,te.ITF,new Date().getTime())}static decodeMiddle(e,r,s,l){let c=new Int32Array(10),d=new Int32Array(5),p=new Int32Array(5);for(c.fill(0),d.fill(0),p.fill(0);r<s;){Te.recordPattern(e,r,c);for(let E=0;E<5;E++){let R=2*E;d[E]=c[R],p[E]=c[R+1]}let y=ut.decodeDigit(d);l.append(y.toString()),y=this.decodeDigit(p),l.append(y.toString()),c.forEach(function(E){r+=E})}}decodeStart(e){let r=ut.skipWhiteSpace(e),s=ut.findGuardPattern(e,r,ut.START_PATTERN);return this.narrowLineWidth=(s[1]-s[0])/4,this.validateQuietZone(e,s[0]),s}validateQuietZone(e,r){let s=this.narrowLineWidth*10;s=s<r?s:r;for(let l=r-1;s>0&&l>=0&&!e.get(l);l--)s--;if(s!==0)throw new $}static skipWhiteSpace(e){const r=e.getSize(),s=e.getNextSet(0);if(s===r)throw new $;return s}decodeEnd(e){e.reverse();try{let r=ut.skipWhiteSpace(e),s;try{s=ut.findGuardPattern(e,r,ut.END_PATTERN_REVERSED[0])}catch(c){c instanceof $&&(s=ut.findGuardPattern(e,r,ut.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,s[0]);let l=s[0];return s[0]=e.getSize()-s[1],s[1]=e.getSize()-l,s}finally{e.reverse()}}static findGuardPattern(e,r,s){let l=s.length,c=new Int32Array(l),d=e.getSize(),p=!1,y=0,E=r;c.fill(0);for(let R=r;R<d;R++)if(e.get(R)!==p)c[y]++;else{if(y===l-1){if(Te.patternMatchVariance(c,s,ut.MAX_INDIVIDUAL_VARIANCE)<ut.MAX_AVG_VARIANCE)return[E,R];E+=c[0]+c[1],B.arraycopy(c,2,c,0,y-1),c[y-1]=0,c[y]=0,y--}else y++;c[y]=1,p=!p}throw new $}static decodeDigit(e){let r=ut.MAX_AVG_VARIANCE,s=-1,l=ut.PATTERNS.length;for(let c=0;c<l;c++){let d=ut.PATTERNS[c],p=Te.patternMatchVariance(e,d,ut.MAX_INDIVIDUAL_VARIANCE);p<r?(r=p,s=c):p===r&&(s=-1)}if(s>=0)return s%10;throw new $}}ut.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ut.MAX_AVG_VARIANCE=.38,ut.MAX_INDIVIDUAL_VARIANCE=.5,ut.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ut.START_PATTERN=Int32Array.from([1,1,1,1]),ut.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class xt extends Te{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let r=!1,s,l=0,c=Int32Array.from([0,0,0]);for(;!r;){c=Int32Array.from([0,0,0]),s=xt.findGuardPattern(e,l,!1,this.START_END_PATTERN,c);let d=s[0];l=s[1];let p=d-(l-d);p>=0&&(r=e.isRange(p,d,!1))}return s}static checkChecksum(e){return xt.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let r=e.length;if(r===0)return!1;let s=parseInt(e.charAt(r-1),10);return xt.getStandardUPCEANChecksum(e.substring(0,r-1))===s}static getStandardUPCEANChecksum(e){let r=e.length,s=0;for(let l=r-1;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;s+=c}s*=3;for(let l=r-2;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;s+=c}return(1e3-s)%10}static decodeEnd(e,r){return xt.findGuardPattern(e,r,!1,xt.START_END_PATTERN,new Int32Array(xt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,r,s,l){return this.findGuardPattern(e,r,s,l,new Int32Array(l.length))}static findGuardPattern(e,r,s,l,c){let d=e.getSize();r=s?e.getNextUnset(r):e.getNextSet(r);let p=0,y=r,E=l.length,R=s;for(let P=r;P<d;P++)if(e.get(P)!==R)c[p]++;else{if(p===E-1){if(Te.patternMatchVariance(c,l,xt.MAX_INDIVIDUAL_VARIANCE)<xt.MAX_AVG_VARIANCE)return Int32Array.from([y,P]);y+=c[0]+c[1];let D=c.slice(2,c.length-1);for(let z=0;z<p-1;z++)c[z]=D[z];c[p-1]=0,c[p]=0,p--}else p++;c[p]=1,R=!R}throw new $}static decodeDigit(e,r,s,l){this.recordPattern(e,s,r);let c=this.MAX_AVG_VARIANCE,d=-1,p=l.length;for(let y=0;y<p;y++){let E=l[y],R=Te.patternMatchVariance(r,E,xt.MAX_INDIVIDUAL_VARIANCE);R<c&&(c=R,d=y)}if(d>=0)return d;throw new $}}xt.MAX_AVG_VARIANCE=.48,xt.MAX_INDIVIDUAL_VARIANCE=.7,xt.START_END_PATTERN=Int32Array.from([1,1,1]),xt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),xt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),xt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Yt{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,r,s){let l=this.decodeRowStringBuffer,c=this.decodeMiddle(r,s,l),d=l.toString(),p=Yt.parseExtensionString(d),y=[new Ue((s[0]+s[1])/2,e),new Ue(c,e)],E=new ae(d,null,0,y,te.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&E.putAllMetadata(p),E}decodeMiddle(e,r,s){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),d=r[1],p=0;for(let E=0;E<5&&d<c;E++){let R=xt.decodeDigit(e,l,d,xt.L_AND_G_PATTERNS);s+=String.fromCharCode(48+R%10);for(let P of l)d+=P;R>=10&&(p|=1<<4-E),E!==4&&(d=e.getNextSet(d),d=e.getNextUnset(d))}if(s.length!==5)throw new $;let y=this.determineCheckDigit(p);if(Yt.extensionChecksum(s.toString())!==y)throw new $;return d}static extensionChecksum(e){let r=e.length,s=0;for(let l=r-2;l>=0;l-=2)s+=e.charAt(l).charCodeAt(0)-48;s*=3;for(let l=r-1;l>=0;l-=2)s+=e.charAt(l).charCodeAt(0)-48;return s*=3,s%10}determineCheckDigit(e){for(let r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new $}static parseExtensionString(e){if(e.length!==5)return null;let r=Yt.parseExtension5String(e);return r==null?null:new Map([[Se.SUGGESTED_PRICE,r]])}static parseExtension5String(e){let r;switch(e.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}let s=parseInt(e.substring(1)),l=(s/100).toString(),c=s%100,d=c<10?"0"+c:c.toString();return r+l+"."+d}}class mn{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,r,s){let l=this.decodeRowStringBuffer,c=this.decodeMiddle(r,s,l),d=l.toString(),p=mn.parseExtensionString(d),y=[new Ue((s[0]+s[1])/2,e),new Ue(c,e)],E=new ae(d,null,0,y,te.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&E.putAllMetadata(p),E}decodeMiddle(e,r,s){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),d=r[1],p=0;for(let y=0;y<2&&d<c;y++){let E=xt.decodeDigit(e,l,d,xt.L_AND_G_PATTERNS);s+=String.fromCharCode(48+E%10);for(let R of l)d+=R;E>=10&&(p|=1<<1-y),y!==1&&(d=e.getNextSet(d),d=e.getNextUnset(d))}if(s.length!==2)throw new $;if(parseInt(s.toString())%4!==p)throw new $;return d}static parseExtensionString(e){return e.length!==2?null:new Map([[Se.ISSUE_NUMBER,parseInt(e)]])}}class cn{static decodeRow(e,r,s){let l=xt.findGuardPattern(r,s,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Yt().decodeRow(e,r,l)}catch{return new mn().decodeRow(e,r,l)}}}cn.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class dt extends xt{constructor(){super(),this.decodeRowStringBuffer="",dt.L_AND_G_PATTERNS=dt.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let r=dt.L_PATTERNS[e-10],s=new Int32Array(r.length);for(let l=0;l<r.length;l++)s[l]=r[r.length-l-1];dt.L_AND_G_PATTERNS[e]=s}}decodeRow(e,r,s){let l=dt.findStartGuardPattern(r),c=s==null?null:s.get(ne.NEED_RESULT_POINT_CALLBACK);if(c!=null){const Pe=new Ue((l[0]+l[1])/2,e);c.foundPossibleResultPoint(Pe)}let d=this.decodeMiddle(r,l,this.decodeRowStringBuffer),p=d.rowOffset,y=d.resultString;if(c!=null){const Pe=new Ue(p,e);c.foundPossibleResultPoint(Pe)}let E=this.decodeEnd(r,p);if(c!=null){const Pe=new Ue((E[0]+E[1])/2,e);c.foundPossibleResultPoint(Pe)}let R=E[1],P=R+(R-E[0]);if(P>=r.getSize()||!r.isRange(R,P,!1))throw new $;let D=y.toString();if(D.length<8)throw new q;if(!dt.checkChecksum(D))throw new O;let z=(l[1]+l[0])/2,Z=(E[1]+E[0])/2,ee=this.getBarcodeFormat(),oe=[new Ue(z,e),new Ue(Z,e)],he=new ae(D,null,0,oe,ee,new Date().getTime()),Fe=0;try{let Pe=cn.decodeRow(e,r,E[1]);he.putMetadata(Se.UPC_EAN_EXTENSION,Pe.getText()),he.putAllMetadata(Pe.getResultMetadata()),he.addResultPoints(Pe.getResultPoints()),Fe=Pe.getText().length}catch{}let Ve=s==null?null:s.get(ne.ALLOWED_EAN_EXTENSIONS);if(Ve!=null){let Pe=!1;for(let Rt in Ve)if(Fe.toString()===Rt){Pe=!0;break}if(!Pe)throw new $}return he}decodeEnd(e,r){return dt.findGuardPattern(e,r,!1,dt.START_END_PATTERN,new Int32Array(dt.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return dt.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let r=e.length;if(r===0)return!1;let s=parseInt(e.charAt(r-1),10);return dt.getStandardUPCEANChecksum(e.substring(0,r-1))===s}static getStandardUPCEANChecksum(e){let r=e.length,s=0;for(let l=r-1;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;s+=c}s*=3;for(let l=r-2;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;s+=c}return(1e3-s)%10}}class rn extends dt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,r,s){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),d=r[1],p=0;for(let E=0;E<6&&d<c;E++){let R=dt.decodeDigit(e,l,d,dt.L_AND_G_PATTERNS);s+=String.fromCharCode(48+R%10);for(let P of l)d+=P;R>=10&&(p|=1<<5-E)}s=rn.determineFirstDigit(s,p),d=dt.findGuardPattern(e,d,!0,dt.MIDDLE_PATTERN,new Int32Array(dt.MIDDLE_PATTERN.length).fill(0))[1];for(let E=0;E<6&&d<c;E++){let R=dt.decodeDigit(e,l,d,dt.L_PATTERNS);s+=String.fromCharCode(48+R);for(let P of l)d+=P}return{rowOffset:d,resultString:s}}getBarcodeFormat(){return te.EAN_13}static determineFirstDigit(e,r){for(let s=0;s<10;s++)if(r===this.FIRST_DIGIT_ENCODINGS[s])return e=String.fromCharCode(48+s)+e,e;throw new $}}rn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class un extends dt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,r,s){const l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),d=r[1];for(let y=0;y<4&&d<c;y++){let E=dt.decodeDigit(e,l,d,dt.L_PATTERNS);s+=String.fromCharCode(48+E);for(let R of l)d+=R}d=dt.findGuardPattern(e,d,!0,dt.MIDDLE_PATTERN,new Int32Array(dt.MIDDLE_PATTERN.length).fill(0))[1];for(let y=0;y<4&&d<c;y++){let E=dt.decodeDigit(e,l,d,dt.L_PATTERNS);s+=String.fromCharCode(48+E);for(let R of l)d+=R}return{rowOffset:d,resultString:s}}getBarcodeFormat(){return te.EAN_8}}class Fr extends dt{constructor(){super(...arguments),this.ean13Reader=new rn}getBarcodeFormat(){return te.UPC_A}decode(e,r){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,r,s){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,r,s))}decodeMiddle(e,r,s){return this.ean13Reader.decodeMiddle(e,r,s)}maybeReturnResult(e){let r=e.getText();if(r.charAt(0)==="0"){let s=new ae(r.substring(1),null,null,e.getResultPoints(),te.UPC_A);return e.getResultMetadata()!=null&&s.putAllMetadata(e.getResultMetadata()),s}else throw new $}reset(){this.ean13Reader.reset()}}class en extends dt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,r,s){const l=this.decodeMiddleCounters.map(E=>E);l[0]=0,l[1]=0,l[2]=0,l[3]=0;const c=e.getSize();let d=r[1],p=0;for(let E=0;E<6&&d<c;E++){const R=en.decodeDigit(e,l,d,en.L_AND_G_PATTERNS);s+=String.fromCharCode(48+R%10);for(let P of l)d+=P;R>=10&&(p|=1<<5-E)}let y=en.determineNumSysAndCheckDigit(s,p);return{rowOffset:d,resultString:y}}decodeEnd(e,r){return en.findGuardPatternWithoutCounters(e,r,!0,en.MIDDLE_END_PATTERN)}checkChecksum(e){return dt.checkChecksum(en.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,r){for(let s=0;s<=1;s++)for(let l=0;l<10;l++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[s][l]){let c=String.fromCharCode(48+s),d=String.fromCharCode(48+l);return c+e+d}throw $.getNotFoundInstance()}getBarcodeFormat(){return te.UPC_E}static convertUPCEtoUPCA(e){const r=e.slice(1,7).split("").map(c=>c.charCodeAt(0)),s=new be;s.append(e.charAt(0));let l=r[5];switch(l){case 0:case 1:case 2:s.appendChars(r,0,2),s.append(l),s.append("0000"),s.appendChars(r,2,3);break;case 3:s.appendChars(r,0,3),s.append("00000"),s.appendChars(r,3,2);break;case 4:s.appendChars(r,0,4),s.append("00000"),s.append(r[4]);break;default:s.appendChars(r,0,5),s.append("0000"),s.append(l);break}return e.length>=8&&s.append(e.charAt(7)),s.toString()}}en.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),en.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ni extends Te{constructor(e){super();let r=e==null?null:e.get(ne.POSSIBLE_FORMATS),s=[];u(r)?(s.push(new rn),s.push(new Fr),s.push(new un),s.push(new en)):(r.indexOf(te.EAN_13)>-1&&s.push(new rn),r.indexOf(te.UPC_A)>-1&&s.push(new Fr),r.indexOf(te.EAN_8)>-1&&s.push(new un),r.indexOf(te.UPC_E)>-1&&s.push(new en)),this.readers=s}decodeRow(e,r,s){for(let l of this.readers)try{const c=l.decodeRow(e,r,s),d=c.getBarcodeFormat()===te.EAN_13&&c.getText().charAt(0)==="0",p=s==null?null:s.get(ne.POSSIBLE_FORMATS),y=p==null||p.includes(te.UPC_A);if(d&&y){const E=c.getRawBytes(),R=new ae(c.getText().substring(1),E,E?E.length:null,c.getResultPoints(),te.UPC_A);return R.putAllMetadata(c.getResultMetadata()),R}return c}catch{}throw new $}reset(){for(let e of this.readers)e.reset()}}class Wt extends Te{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,r){for(let s=0;s<r.length;s++)if(Te.patternMatchVariance(e,r[s],Wt.MAX_INDIVIDUAL_VARIANCE)<Wt.MAX_AVG_VARIANCE)return s;throw new $}static count(e){return tt.sum(new Int32Array(e))}static increment(e,r){let s=0,l=r[0];for(let c=1;c<e.length;c++)r[c]>l&&(l=r[c],s=c);e[s]++}static decrement(e,r){let s=0,l=r[0];for(let c=1;c<e.length;c++)r[c]<l&&(l=r[c],s=c);e[s]--}static isFinderPattern(e){let r=e[0]+e[1],s=r+e[2]+e[3],l=r/s;if(l>=Wt.MIN_FINDER_PATTERN_RATIO&&l<=Wt.MAX_FINDER_PATTERN_RATIO){let c=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;for(let p of e)p>d&&(d=p),p<c&&(c=p);return d<10*c}return!1}}Wt.MAX_AVG_VARIANCE=.2,Wt.MAX_INDIVIDUAL_VARIANCE=.45,Wt.MIN_FINDER_PATTERN_RATIO=9.5/12,Wt.MAX_FINDER_PATTERN_RATIO=12.5/14;class Nr{constructor(e,r){this.value=e,this.checksumPortion=r}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Nr))return!1;const r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Dn{constructor(e,r,s,l,c){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new Ue(s,c)),this.resultPoints.push(new Ue(l,c))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof Dn))return!1;const r=e;return this.value===r.value}hashCode(){return this.value}}class Vn{constructor(){}static getRSSvalue(e,r,s){let l=0;for(let y of e)l+=y;let c=0,d=0,p=e.length;for(let y=0;y<p-1;y++){let E;for(E=1,d|=1<<y;E<e[y];E++,d&=~(1<<y)){let R=Vn.combins(l-E-1,p-y-2);if(s&&d===0&&l-E-(p-y-1)>=p-y-1&&(R-=Vn.combins(l-E-(p-y),p-y-2)),p-y-1>1){let P=0;for(let D=l-E-(p-y-2);D>r;D--)P+=Vn.combins(l-E-D-1,p-y-3);R-=P*(p-1-y)}else l-E>r&&R--;c+=R}l-=E}return c}static combins(e,r){let s,l;e-r>r?(l=r,s=e-r):(l=e-r,s=r);let c=1,d=1;for(let p=e;p>s;p--)c*=p,d<=l&&(c/=d,d++);for(;d<=l;)c/=d,d++;return c}}class Ji{static buildBitArray(e){let r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);let s=12*r,l=new Y(s),c=0,p=e[0].getRightChar().getValue();for(let y=11;y>=0;--y)p&1<<y&&l.set(c),c++;for(let y=1;y<e.length;++y){let E=e[y],R=E.getLeftChar().getValue();for(let P=11;P>=0;--P)R&1<<P&&l.set(c),c++;if(E.getRightChar()!=null){let P=E.getRightChar().getValue();for(let D=11;D>=0;--D)P&1<<D&&l.set(c),c++}}return l}}class wr{constructor(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Ii{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class tn extends Ii{constructor(e,r){super(e),this.value=r}getValue(){return this.value}isFNC1(){return this.value===tn.FNC1}}tn.FNC1="$";class Kn extends Ii{constructor(e,r,s){super(e),s?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=r}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class qn extends Ii{constructor(e,r,s){if(super(e),r<0||r>10||s<0||s>10)throw new q;this.firstDigit=r,this.secondDigit=s}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===qn.FNC1}isSecondDigitFNC1(){return this.secondDigit===qn.FNC1}isAnyFNC1(){return this.firstDigit===qn.FNC1||this.secondDigit===qn.FNC1}}qn.FNC1=10;class Ke{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new $;let r=e.substring(0,2);for(let c of Ke.TWO_DIGIT_DATA_LENGTH)if(c[0]===r)return c[1]===Ke.VARIABLE_LENGTH?Ke.processVariableAI(2,c[2],e):Ke.processFixedAI(2,c[1],e);if(e.length<3)throw new $;let s=e.substring(0,3);for(let c of Ke.THREE_DIGIT_DATA_LENGTH)if(c[0]===s)return c[1]===Ke.VARIABLE_LENGTH?Ke.processVariableAI(3,c[2],e):Ke.processFixedAI(3,c[1],e);for(let c of Ke.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(c[0]===s)return c[1]===Ke.VARIABLE_LENGTH?Ke.processVariableAI(4,c[2],e):Ke.processFixedAI(4,c[1],e);if(e.length<4)throw new $;let l=e.substring(0,4);for(let c of Ke.FOUR_DIGIT_DATA_LENGTH)if(c[0]===l)return c[1]===Ke.VARIABLE_LENGTH?Ke.processVariableAI(4,c[2],e):Ke.processFixedAI(4,c[1],e);throw new $}static processFixedAI(e,r,s){if(s.length<e)throw new $;let l=s.substring(0,e);if(s.length<e+r)throw new $;let c=s.substring(e,e+r),d=s.substring(e+r),p="("+l+")"+c,y=Ke.parseFieldsInGeneralPurpose(d);return y==null?p:p+y}static processVariableAI(e,r,s){let l=s.substring(0,e),c;s.length<e+r?c=s.length:c=e+r;let d=s.substring(e,c),p=s.substring(c),y="("+l+")"+d,E=Ke.parseFieldsInGeneralPurpose(p);return E==null?y:y+E}}Ke.VARIABLE_LENGTH=[],Ke.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ke.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ke.VARIABLE_LENGTH,20],["22",Ke.VARIABLE_LENGTH,29],["30",Ke.VARIABLE_LENGTH,8],["37",Ke.VARIABLE_LENGTH,8],["90",Ke.VARIABLE_LENGTH,30],["91",Ke.VARIABLE_LENGTH,30],["92",Ke.VARIABLE_LENGTH,30],["93",Ke.VARIABLE_LENGTH,30],["94",Ke.VARIABLE_LENGTH,30],["95",Ke.VARIABLE_LENGTH,30],["96",Ke.VARIABLE_LENGTH,30],["97",Ke.VARIABLE_LENGTH,3],["98",Ke.VARIABLE_LENGTH,30],["99",Ke.VARIABLE_LENGTH,30]],Ke.THREE_DIGIT_DATA_LENGTH=[["240",Ke.VARIABLE_LENGTH,30],["241",Ke.VARIABLE_LENGTH,30],["242",Ke.VARIABLE_LENGTH,6],["250",Ke.VARIABLE_LENGTH,30],["251",Ke.VARIABLE_LENGTH,30],["253",Ke.VARIABLE_LENGTH,17],["254",Ke.VARIABLE_LENGTH,20],["400",Ke.VARIABLE_LENGTH,30],["401",Ke.VARIABLE_LENGTH,30],["402",17],["403",Ke.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ke.VARIABLE_LENGTH,20],["421",Ke.VARIABLE_LENGTH,15],["422",3],["423",Ke.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ke.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ke.VARIABLE_LENGTH,15],["391",Ke.VARIABLE_LENGTH,18],["392",Ke.VARIABLE_LENGTH,15],["393",Ke.VARIABLE_LENGTH,18],["703",Ke.VARIABLE_LENGTH,30]],Ke.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ke.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ke.VARIABLE_LENGTH,20],["8003",Ke.VARIABLE_LENGTH,30],["8004",Ke.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ke.VARIABLE_LENGTH,30],["8008",Ke.VARIABLE_LENGTH,12],["8018",18],["8020",Ke.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ke.VARIABLE_LENGTH,70],["8200",Ke.VARIABLE_LENGTH,70]];class Ir{constructor(e){this.buffer=new be,this.information=e}decodeAllCodes(e,r){let s=r,l=null;do{let c=this.decodeGeneralPurposeField(s,l),d=Ke.parseFieldsInGeneralPurpose(c.getNewString());if(d!=null&&e.append(d),c.isRemaining()?l=""+c.getRemainingValue():l=null,s===c.getNewPosition())break;s=c.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let c=this.extractNumericValueFromBitArray(e,4);return c===0?new qn(this.information.getSize(),qn.FNC1,qn.FNC1):new qn(this.information.getSize(),c-1,qn.FNC1)}let r=this.extractNumericValueFromBitArray(e,7),s=(r-8)/11,l=(r-8)%11;return new qn(e+7,s,l)}extractNumericValueFromBitArray(e,r){return Ir.extractNumericValueFromBitArray(this.information,e,r)}static extractNumericValueFromBitArray(e,r,s){let l=0;for(let c=0;c<s;++c)e.get(r+c)&&(l|=1<<s-c-1);return l}decodeGeneralPurposeField(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);let s=this.parseBlocks();return s!=null&&s.isRemaining()?new Kn(this.current.getPosition(),this.buffer.toString(),s.getRemainingValue()):new Kn(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,r;do{let s=this.current.getPosition();if(this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished()),!(s!==this.current.getPosition())&&!e)break}while(!e);return r.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let r;return e.isSecondDigitFNC1()?r=new Kn(this.current.getPosition(),this.buffer.toString()):r=new Kn(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new wr(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let r=new Kn(this.current.getPosition(),this.buffer.toString());return new wr(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new wr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let r=new Kn(this.current.getPosition(),this.buffer.toString());return new wr(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new wr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let r=new Kn(this.current.getPosition(),this.buffer.toString());return new wr(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new wr(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(e,7);if(s>=64&&s<116)return!0;if(e+8>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(e,8);return l>=232&&l<253}decodeIsoIec646(e){let r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new tn(e+5,tn.FNC1);if(r>=5&&r<15)return new tn(e+5,"0"+(r-5));let s=this.extractNumericValueFromBitArray(e,7);if(s>=64&&s<90)return new tn(e+7,""+(s+1));if(s>=90&&s<116)return new tn(e+7,""+(s+7));let l=this.extractNumericValueFromBitArray(e,8),c;switch(l){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new q}return new tn(e+8,c)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(e,6);return s>=16&&s<63}decodeAlphanumeric(e){let r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new tn(e+5,tn.FNC1);if(r>=5&&r<15)return new tn(e+5,"0"+(r-5));let s=this.extractNumericValueFromBitArray(e,6);if(s>=32&&s<58)return new tn(e+6,""+(s+33));let l;switch(s){case 58:l="*";break;case 59:l=",";break;case 60:l="-";break;case 61:l=".";break;case 62:l="/";break;default:throw new Ze("Decoding invalid alphanumeric value: "+s)}return new tn(e+6,l)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0}}class uo{constructor(e){this.information=e,this.generalDecoder=new Ir(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Qn extends uo{constructor(e){super(e)}encodeCompressedGtin(e,r){e.append("(01)");let s=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,r,s)}encodeCompressedGtinWithoutAI(e,r,s){for(let l=0;l<4;++l){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*l,10);c/100===0&&e.append("0"),c/10===0&&e.append("0"),e.append(c)}Qn.appendCheckDigit(e,s)}static appendCheckDigit(e,r){let s=0;for(let l=0;l<13;l++){let c=e.charAt(l+r).charCodeAt(0)-48;s+=l&1?c:3*c}s=10-s%10,s===10&&(s=0),e.append(s)}}Qn.GTIN_SIZE=40;class sr extends Qn{constructor(e){super(e)}parseInformation(){let e=new be;e.append("(01)");let r=e.length(),s=this.getGeneralDecoder().extractNumericValueFromBitArray(sr.HEADER_SIZE,4);return e.append(s),this.encodeCompressedGtinWithoutAI(e,sr.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(e,sr.HEADER_SIZE+44)}}sr.HEADER_SIZE=4;class Ti extends uo{constructor(e){super(e)}parseInformation(){let e=new be;return this.getGeneralDecoder().decodeAllCodes(e,Ti.HEADER_SIZE)}}Ti.HEADER_SIZE=5;class _i extends Qn{constructor(e){super(e)}encodeCompressedWeight(e,r,s){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(r,s);this.addWeightCode(e,l);let c=this.checkWeight(l),d=1e5;for(let p=0;p<5;++p)c/d===0&&e.append("0"),d/=10;e.append(c)}}class Tr extends _i{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=Tr.HEADER_SIZE+_i.GTIN_SIZE+Tr.WEIGHT_SIZE)throw new $;let e=new be;return this.encodeCompressedGtin(e,Tr.HEADER_SIZE),this.encodeCompressedWeight(e,Tr.HEADER_SIZE+_i.GTIN_SIZE,Tr.WEIGHT_SIZE),e.toString()}}Tr.HEADER_SIZE=5,Tr.WEIGHT_SIZE=15;class fo extends Tr{constructor(e){super(e)}addWeightCode(e,r){e.append("(3103)")}checkWeight(e){return e}}class es extends Tr{constructor(e){super(e)}addWeightCode(e,r){r<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class vr extends Qn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<vr.HEADER_SIZE+Qn.GTIN_SIZE)throw new $;let e=new be;this.encodeCompressedGtin(e,vr.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(vr.HEADER_SIZE+Qn.GTIN_SIZE,vr.LAST_DIGIT_SIZE);e.append("(392"),e.append(r),e.append(")");let s=this.getGeneralDecoder().decodeGeneralPurposeField(vr.HEADER_SIZE+Qn.GTIN_SIZE+vr.LAST_DIGIT_SIZE,null);return e.append(s.getNewString()),e.toString()}}vr.HEADER_SIZE=8,vr.LAST_DIGIT_SIZE=2;class Ln extends Qn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Ln.HEADER_SIZE+Qn.GTIN_SIZE)throw new $;let e=new be;this.encodeCompressedGtin(e,Ln.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(Ln.HEADER_SIZE+Qn.GTIN_SIZE,Ln.LAST_DIGIT_SIZE);e.append("(393"),e.append(r),e.append(")");let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Ln.HEADER_SIZE+Qn.GTIN_SIZE+Ln.LAST_DIGIT_SIZE,Ln.FIRST_THREE_DIGITS_SIZE);s/100==0&&e.append("0"),s/10==0&&e.append("0"),e.append(s);let l=this.getGeneralDecoder().decodeGeneralPurposeField(Ln.HEADER_SIZE+Qn.GTIN_SIZE+Ln.LAST_DIGIT_SIZE+Ln.FIRST_THREE_DIGITS_SIZE,null);return e.append(l.getNewString()),e.toString()}}Ln.HEADER_SIZE=8,Ln.LAST_DIGIT_SIZE=2,Ln.FIRST_THREE_DIGITS_SIZE=10;class $t extends _i{constructor(e,r,s){super(e),this.dateCode=s,this.firstAIdigits=r}parseInformation(){if(this.getInformation().getSize()!=$t.HEADER_SIZE+$t.GTIN_SIZE+$t.WEIGHT_SIZE+$t.DATE_SIZE)throw new $;let e=new be;return this.encodeCompressedGtin(e,$t.HEADER_SIZE),this.encodeCompressedWeight(e,$t.HEADER_SIZE+$t.GTIN_SIZE,$t.WEIGHT_SIZE),this.encodeCompressedDate(e,$t.HEADER_SIZE+$t.GTIN_SIZE+$t.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,r){let s=this.getGeneralDecoder().extractNumericValueFromBitArray(r,$t.DATE_SIZE);if(s==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let l=s%32;s/=32;let c=s%12+1;s/=12;let d=s;d/10==0&&e.append("0"),e.append(d),c/10==0&&e.append("0"),e.append(c),l/10==0&&e.append("0"),e.append(l)}addWeightCode(e,r){e.append("("),e.append(this.firstAIdigits),e.append(r/1e5),e.append(")")}checkWeight(e){return e%1e5}}$t.HEADER_SIZE=8,$t.WEIGHT_SIZE=20,$t.DATE_SIZE=16;function ho(k){try{if(k.get(1))return new sr(k);if(!k.get(2))return new Ti(k);switch(Ir.extractNumericValueFromBitArray(k,1,4)){case 4:return new fo(k);case 5:return new es(k)}switch(Ir.extractNumericValueFromBitArray(k,1,5)){case 12:return new vr(k);case 13:return new Ln(k)}switch(Ir.extractNumericValueFromBitArray(k,1,7)){case 56:return new $t(k,"310","11");case 57:return new $t(k,"320","11");case 58:return new $t(k,"310","13");case 59:return new $t(k,"320","13");case 60:return new $t(k,"310","15");case 61:return new $t(k,"320","15");case 62:return new $t(k,"310","17");case 63:return new $t(k,"320","17")}}catch(e){throw console.log(e),new Ze("unknown decoder: "+k)}}class Lt{constructor(e,r,s,l){this.leftchar=e,this.rightchar=r,this.finderpattern=s,this.maybeLast=l}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,r){return e instanceof Lt?Lt.equalsOrNull(e.leftchar,r.leftchar)&&Lt.equalsOrNull(e.rightchar,r.rightchar)&&Lt.equalsOrNull(e.finderpattern,r.finderpattern):!1}static equalsOrNull(e,r){return e===null?r===null:Lt.equals(e,r)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ri{constructor(e,r,s){this.pairs=e,this.rowNumber=r,this.wasReversed=s}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,r){return e instanceof Ri?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1}checkEqualitity(e,r){if(!e||!r)return;let s;return e.forEach((l,c)=>{r.forEach(d=>{l.getLeftChar().getValue()===d.getLeftChar().getValue()&&l.getRightChar().getValue()===d.getRightChar().getValue()&&l.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(s=!0)})}),s}}class Ne extends Wt{constructor(e){super(...arguments),this.pairs=new Array(Ne.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,r,s){this.pairs.length=0,this.startFromEven=!1;try{return Ne.constructResult(this.decodeRow2pairs(e,r))}catch(l){this.verbose&&console.log(l)}return this.pairs.length=0,this.startFromEven=!0,Ne.constructResult(this.decodeRow2pairs(e,r))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,r){let s=!1;for(;!s;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,e))}catch(c){if(c instanceof $){if(!this.pairs.length)throw new $;s=!0}}if(this.checkChecksum())return this.pairs;let l;if(this.rows.length?l=!0:l=!1,this.storeRow(e,!1),l){let c=this.checkRowsBoolean(!1);if(c!=null||(c=this.checkRowsBoolean(!0),c!=null))return c}throw new $}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let r=null;try{r=this.checkRows(new Array,0)}catch(s){this.verbose&&console.log(s)}return e&&(this.rows=this.rows.reverse()),r}checkRows(e,r){for(let s=r;s<this.rows.length;s++){let l=this.rows[s];this.pairs.length=0;for(let d of e)this.pairs.push(d.getPairs());if(this.pairs.push(l.getPairs()),!Ne.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let c=new Array(e);c.push(l);try{return this.checkRows(c,s+1)}catch(d){this.verbose&&console.log(d)}}throw new $}static isValidSequence(e){for(let r of Ne.FINDER_PATTERN_SEQUENCES){if(e.length>r.length)continue;let s=!0;for(let l=0;l<e.length;l++)if(e[l].getFinderPattern().getValue()!=r[l]){s=!1;break}if(s)return!0}return!1}storeRow(e,r){let s=0,l=!1,c=!1;for(;s<this.rows.length;){let d=this.rows[s];if(d.getRowNumber()>e){c=d.isEquivalent(this.pairs);break}l=d.isEquivalent(this.pairs),s++}c||l||Ne.isPartialRow(this.pairs,this.rows)||(this.rows.push(s,new Ri(this.pairs,e,r)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,r){for(let s of r)if(s.getPairs().length!==e.length){for(let l of s.getPairs())for(let c of e)if(Lt.equals(l,c))break}}static isPartialRow(e,r){for(let s of r){let l=!0;for(let c of e){let d=!1;for(let p of s.getPairs())if(c.equals(p)){d=!0;break}if(!d){l=!1;break}}if(l)return!0}return!1}getRows(){return this.rows}static constructResult(e){let r=Ji.buildBitArray(e),l=ho(r).parseInformation(),c=e[0].getFinderPattern().getResultPoints(),d=e[e.length-1].getFinderPattern().getResultPoints(),p=[c[0],c[1],d[0],d[1]];return new ae(l,null,null,p,te.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),r=e.getLeftChar(),s=e.getRightChar();if(s==null)return!1;let l=s.getChecksumPortion(),c=2;for(let p=1;p<this.pairs.size();++p){let y=this.pairs.get(p);l+=y.getLeftChar().getChecksumPortion(),c++;let E=y.getRightChar();E!=null&&(l+=E.getChecksumPortion(),c++)}return l%=211,211*(c-4)+l==r.getValue()}static getNextSecondBar(e,r){let s;return e.get(r)?(s=e.getNextUnset(r),s=e.getNextSet(s)):(s=e.getNextSet(r),s=e.getNextUnset(s)),s}retrieveNextPair(e,r,s){let l=r.length%2==0;this.startFromEven&&(l=!l);let c,d=!0,p=-1;do this.findNextPair(e,r,p),c=this.parseFoundFinderPattern(e,s,l),c==null?p=Ne.getNextSecondBar(e,this.startEnd[0]):d=!1;while(d);let y=this.decodeDataCharacter(e,c,l,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new $;let E;try{E=this.decodeDataCharacter(e,c,l,!1)}catch(R){E=null,this.verbose&&console.log(R)}return new Lt(y,E,c,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,r,s){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),d;s>=0?d=s:this.isEmptyPair(r)?d=0:d=r[r.length-1].getFinderPattern().getStartEnd()[1];let p=r.length%2!=0;this.startFromEven&&(p=!p);let y=!1;for(;d<c&&(y=!e.get(d),!!y);)d++;let E=0,R=d;for(let P=d;P<c;P++)if(e.get(P)!=y)l[E]++;else{if(E==3){if(p&&Ne.reverseCounters(l),Ne.isFinderPattern(l)){this.startEnd[0]=R,this.startEnd[1]=P;return}p&&Ne.reverseCounters(l),R+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,E--}else E++;l[E]=1,y=!y}throw new $}static reverseCounters(e){let r=e.length;for(let s=0;s<r/2;++s){let l=e[s];e[s]=e[r-s-1],e[r-s-1]=l}}parseFoundFinderPattern(e,r,s){let l,c,d;if(s){let E=this.startEnd[0]-1;for(;E>=0&&!e.get(E);)E--;E++,l=this.startEnd[0]-E,c=E,d=this.startEnd[1]}else c=this.startEnd[0],d=e.getNextUnset(this.startEnd[1]+1),l=d-this.startEnd[1];let p=this.getDecodeFinderCounters();B.arraycopy(p,0,p,1,p.length-1),p[0]=l;let y;try{y=this.parseFinderValue(p,Ne.FINDER_PATTERNS)}catch{return null}return new Dn(y,[c,d],c,d,r)}decodeDataCharacter(e,r,s,l){let c=this.getDataCharacterCounters();for(let Zt=0;Zt<c.length;Zt++)c[Zt]=0;if(l)Ne.recordPatternInReverse(e,r.getStartEnd()[0],c);else{Ne.recordPattern(e,r.getStartEnd()[1],c);for(let Zt=0,yn=c.length-1;Zt<yn;Zt++,yn--){let lr=c[Zt];c[Zt]=c[yn],c[yn]=lr}}let d=17,p=tt.sum(new Int32Array(c))/d,y=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(p-y)/y>.3)throw new $;let E=this.getOddCounts(),R=this.getEvenCounts(),P=this.getOddRoundingErrors(),D=this.getEvenRoundingErrors();for(let Zt=0;Zt<c.length;Zt++){let yn=1*c[Zt]/p,lr=yn+.5;if(lr<1){if(yn<.3)throw new $;lr=1}else if(lr>8){if(yn>8.7)throw new $;lr=8}let Bi=Zt/2;Zt&1?(R[Bi]=lr,D[Bi]=yn-lr):(E[Bi]=lr,P[Bi]=yn-lr)}this.adjustOddEvenCounts(d);let z=4*r.getValue()+(s?0:2)+(l?0:1)-1,Z=0,ee=0;for(let Zt=E.length-1;Zt>=0;Zt--){if(Ne.isNotA1left(r,s,l)){let yn=Ne.WEIGHTS[z][2*Zt];ee+=E[Zt]*yn}Z+=E[Zt]}let oe=0;for(let Zt=R.length-1;Zt>=0;Zt--)if(Ne.isNotA1left(r,s,l)){let yn=Ne.WEIGHTS[z][2*Zt+1];oe+=R[Zt]*yn}let he=ee+oe;if(Z&1||Z>13||Z<4)throw new $;let Fe=(13-Z)/2,Ve=Ne.SYMBOL_WIDEST[Fe],Pe=9-Ve,Rt=Vn.getRSSvalue(E,Ve,!0),Et=Vn.getRSSvalue(R,Pe,!1),mr=Ne.EVEN_TOTAL_SUBSET[Fe],Ur=Ne.GSUM[Fe],kn=Rt*mr+Et+Ur;return new Nr(kn,he)}static isNotA1left(e,r,s){return!(e.getValue()==0&&r&&s)}adjustOddEvenCounts(e){let r=tt.sum(new Int32Array(this.getOddCounts())),s=tt.sum(new Int32Array(this.getEvenCounts())),l=!1,c=!1;r>13?c=!0:r<4&&(l=!0);let d=!1,p=!1;s>13?p=!0:s<4&&(d=!0);let y=r+s-e,E=(r&1)==1,R=(s&1)==0;if(y==1)if(E){if(R)throw new $;c=!0}else{if(!R)throw new $;p=!0}else if(y==-1)if(E){if(R)throw new $;l=!0}else{if(!R)throw new $;d=!0}else if(y==0){if(E){if(!R)throw new $;r<s?(l=!0,p=!0):(c=!0,d=!0)}else if(R)throw new $}else throw new $;if(l){if(c)throw new $;Ne.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&Ne.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(p)throw new $;Ne.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&Ne.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ne.SYMBOL_WIDEST=[7,5,4,3,1],Ne.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ne.GSUM=[0,348,1388,2948,3988],Ne.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ne.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ne.FINDER_PAT_A=0,Ne.FINDER_PAT_B=1,Ne.FINDER_PAT_C=2,Ne.FINDER_PAT_D=3,Ne.FINDER_PAT_E=4,Ne.FINDER_PAT_F=5,Ne.FINDER_PATTERN_SEQUENCES=[[Ne.FINDER_PAT_A,Ne.FINDER_PAT_A],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_B,Ne.FINDER_PAT_B],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_C,Ne.FINDER_PAT_B,Ne.FINDER_PAT_D],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_E,Ne.FINDER_PAT_B,Ne.FINDER_PAT_D,Ne.FINDER_PAT_C],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_E,Ne.FINDER_PAT_B,Ne.FINDER_PAT_D,Ne.FINDER_PAT_D,Ne.FINDER_PAT_F],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_E,Ne.FINDER_PAT_B,Ne.FINDER_PAT_D,Ne.FINDER_PAT_E,Ne.FINDER_PAT_F,Ne.FINDER_PAT_F],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_A,Ne.FINDER_PAT_B,Ne.FINDER_PAT_B,Ne.FINDER_PAT_C,Ne.FINDER_PAT_C,Ne.FINDER_PAT_D,Ne.FINDER_PAT_D],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_A,Ne.FINDER_PAT_B,Ne.FINDER_PAT_B,Ne.FINDER_PAT_C,Ne.FINDER_PAT_C,Ne.FINDER_PAT_D,Ne.FINDER_PAT_E,Ne.FINDER_PAT_E],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_A,Ne.FINDER_PAT_B,Ne.FINDER_PAT_B,Ne.FINDER_PAT_C,Ne.FINDER_PAT_C,Ne.FINDER_PAT_D,Ne.FINDER_PAT_E,Ne.FINDER_PAT_F,Ne.FINDER_PAT_F],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_A,Ne.FINDER_PAT_B,Ne.FINDER_PAT_B,Ne.FINDER_PAT_C,Ne.FINDER_PAT_D,Ne.FINDER_PAT_D,Ne.FINDER_PAT_E,Ne.FINDER_PAT_E,Ne.FINDER_PAT_F,Ne.FINDER_PAT_F]],Ne.MAX_PAIRS=11;class Rs extends Nr{constructor(e,r,s){super(e,r),this.count=0,this.finderPattern=s}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Kt extends Wt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,r,s){const l=this.decodePair(r,!1,e,s);Kt.addOrTally(this.possibleLeftPairs,l),r.reverse();let c=this.decodePair(r,!0,e,s);Kt.addOrTally(this.possibleRightPairs,c),r.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&Kt.checkChecksum(d,p))return Kt.constructResult(d,p)}throw new $}static addOrTally(e,r){if(r==null)return;let s=!1;for(let l of e)if(l.getValue()===r.getValue()){l.incrementCount(),s=!0;break}s||e.push(r)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,r){let s=4537077*e.getValue()+r.getValue(),l=new String(s).toString(),c=new be;for(let E=13-l.length;E>0;E--)c.append("0");c.append(l);let d=0;for(let E=0;E<13;E++){let R=c.charAt(E).charCodeAt(0)-48;d+=E&1?R:3*R}d=10-d%10,d===10&&(d=0),c.append(d.toString());let p=e.getFinderPattern().getResultPoints(),y=r.getFinderPattern().getResultPoints();return new ae(c.toString(),null,0,[p[0],p[1],y[0],y[1]],te.RSS_14,new Date().getTime())}static checkChecksum(e,r){let s=(e.getChecksumPortion()+16*r.getChecksumPortion())%79,l=9*e.getFinderPattern().getValue()+r.getFinderPattern().getValue();return l>72&&l--,l>8&&l--,s===l}decodePair(e,r,s,l){try{let c=this.findFinderPattern(e,r),d=this.parseFoundFinderPattern(e,s,r,c),p=l==null?null:l.get(ne.NEED_RESULT_POINT_CALLBACK);if(p!=null){let R=(c[0]+c[1])/2;r&&(R=e.getSize()-1-R),p.foundPossibleResultPoint(new Ue(R,s))}let y=this.decodeDataCharacter(e,d,!0),E=this.decodeDataCharacter(e,d,!1);return new Rs(1597*y.getValue()+E.getValue(),y.getChecksumPortion()+4*E.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(e,r,s){let l=this.getDataCharacterCounters();for(let oe=0;oe<l.length;oe++)l[oe]=0;if(s)Te.recordPatternInReverse(e,r.getStartEnd()[0],l);else{Te.recordPattern(e,r.getStartEnd()[1]+1,l);for(let oe=0,he=l.length-1;oe<he;oe++,he--){let Fe=l[oe];l[oe]=l[he],l[he]=Fe}}let c=s?16:15,d=tt.sum(new Int32Array(l))/c,p=this.getOddCounts(),y=this.getEvenCounts(),E=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let oe=0;oe<l.length;oe++){let he=l[oe]/d,Fe=Math.floor(he+.5);Fe<1?Fe=1:Fe>8&&(Fe=8);let Ve=Math.floor(oe/2);oe&1?(y[Ve]=Fe,R[Ve]=he-Fe):(p[Ve]=Fe,E[Ve]=he-Fe)}this.adjustOddEvenCounts(s,c);let P=0,D=0;for(let oe=p.length-1;oe>=0;oe--)D*=9,D+=p[oe],P+=p[oe];let z=0,Z=0;for(let oe=y.length-1;oe>=0;oe--)z*=9,z+=y[oe],Z+=y[oe];let ee=D+3*z;if(s){if(P&1||P>12||P<4)throw new $;let oe=(12-P)/2,he=Kt.OUTSIDE_ODD_WIDEST[oe],Fe=9-he,Ve=Vn.getRSSvalue(p,he,!1),Pe=Vn.getRSSvalue(y,Fe,!0),Rt=Kt.OUTSIDE_EVEN_TOTAL_SUBSET[oe],Et=Kt.OUTSIDE_GSUM[oe];return new Nr(Ve*Rt+Pe+Et,ee)}else{if(Z&1||Z>10||Z<4)throw new $;let oe=(10-Z)/2,he=Kt.INSIDE_ODD_WIDEST[oe],Fe=9-he,Ve=Vn.getRSSvalue(p,he,!0),Pe=Vn.getRSSvalue(y,Fe,!1),Rt=Kt.INSIDE_ODD_TOTAL_SUBSET[oe],Et=Kt.INSIDE_GSUM[oe];return new Nr(Pe*Rt+Ve+Et,ee)}}findFinderPattern(e,r){let s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;let l=e.getSize(),c=!1,d=0;for(;d<l&&(c=!e.get(d),r!==c);)d++;let p=0,y=d;for(let E=d;E<l;E++)if(e.get(E)!==c)s[p]++;else{if(p===3){if(Wt.isFinderPattern(s))return[y,E];y+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,p--}else p++;s[p]=1,c=!c}throw new $}parseFoundFinderPattern(e,r,s,l){let c=e.get(l[0]),d=l[0]-1;for(;d>=0&&c!==e.get(d);)d--;d++;const p=l[0]-d,y=this.getDecodeFinderCounters(),E=new Int32Array(y.length);B.arraycopy(y,0,E,1,y.length-1),E[0]=p;const R=this.parseFinderValue(E,Kt.FINDER_PATTERNS);let P=d,D=l[1];return s&&(P=e.getSize()-1-P,D=e.getSize()-1-D),new Dn(R,[d,l[1]],P,D,r)}adjustOddEvenCounts(e,r){let s=tt.sum(new Int32Array(this.getOddCounts())),l=tt.sum(new Int32Array(this.getEvenCounts())),c=!1,d=!1,p=!1,y=!1;e?(s>12?d=!0:s<4&&(c=!0),l>12?y=!0:l<4&&(p=!0)):(s>11?d=!0:s<5&&(c=!0),l>10?y=!0:l<4&&(p=!0));let E=s+l-r,R=(s&1)===(e?1:0),P=(l&1)===1;if(E===1)if(R){if(P)throw new $;d=!0}else{if(!P)throw new $;y=!0}else if(E===-1)if(R){if(P)throw new $;c=!0}else{if(!P)throw new $;p=!0}else if(E===0){if(R){if(!P)throw new $;s<l?(c=!0,y=!0):(d=!0,p=!0)}else if(P)throw new $}else throw new $;if(c){if(d)throw new $;Wt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&Wt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(y)throw new $;Wt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&Wt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Kt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Kt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Kt.OUTSIDE_GSUM=[0,161,961,2015,2715],Kt.INSIDE_GSUM=[0,336,1036,1516],Kt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Kt.INSIDE_ODD_WIDEST=[2,4,6,8],Kt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class hi extends Te{constructor(e,r){super(),this.readers=[],this.verbose=r===!0;const s=e?e.get(ne.POSSIBLE_FORMATS):null,l=e&&e.get(ne.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;s?((s.includes(te.EAN_13)||s.includes(te.UPC_A)||s.includes(te.EAN_8)||s.includes(te.UPC_E))&&this.readers.push(new Ni(e)),s.includes(te.CODE_39)&&this.readers.push(new ft(l)),s.includes(te.CODE_128)&&this.readers.push(new ce),s.includes(te.ITF)&&this.readers.push(new ut),s.includes(te.RSS_14)&&this.readers.push(new Kt),s.includes(te.RSS_EXPANDED)&&this.readers.push(new Ne(this.verbose))):(this.readers.push(new Ni(e)),this.readers.push(new ft),this.readers.push(new Ni(e)),this.readers.push(new ce),this.readers.push(new ut),this.readers.push(new Kt),this.readers.push(new Ne(this.verbose)))}decodeRow(e,r,s){for(let l=0;l<this.readers.length;l++)try{return this.readers[l].decodeRow(e,r,s)}catch{}throw new $}reset(){this.readers.forEach(e=>e.reset())}}class ki extends Ce{constructor(e=500,r){super(new hi(r),e,r)}}class Pt{constructor(e,r,s){this.ecCodewords=e,this.ecBlocks=[r],s&&this.ecBlocks.push(s)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class At{constructor(e,r){this.count=e,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class _t{constructor(e,r,s,l,c,d){this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=s,this.dataRegionSizeRows=l,this.dataRegionSizeColumns=c,this.ecBlocks=d;let p=0;const y=d.getECCodewords(),E=d.getECBlocks();for(let R of E)p+=R.getCount()*(R.getDataCodewords()+y);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,r){if(e&1||r&1)throw new q;for(let s of _t.VERSIONS)if(s.symbolSizeRows===e&&s.symbolSizeColumns===r)return s;throw new q}toString(){return""+this.versionNumber}static buildVersions(){return[new _t(1,10,10,8,8,new Pt(5,new At(1,3))),new _t(2,12,12,10,10,new Pt(7,new At(1,5))),new _t(3,14,14,12,12,new Pt(10,new At(1,8))),new _t(4,16,16,14,14,new Pt(12,new At(1,12))),new _t(5,18,18,16,16,new Pt(14,new At(1,18))),new _t(6,20,20,18,18,new Pt(18,new At(1,22))),new _t(7,22,22,20,20,new Pt(20,new At(1,30))),new _t(8,24,24,22,22,new Pt(24,new At(1,36))),new _t(9,26,26,24,24,new Pt(28,new At(1,44))),new _t(10,32,32,14,14,new Pt(36,new At(1,62))),new _t(11,36,36,16,16,new Pt(42,new At(1,86))),new _t(12,40,40,18,18,new Pt(48,new At(1,114))),new _t(13,44,44,20,20,new Pt(56,new At(1,144))),new _t(14,48,48,22,22,new Pt(68,new At(1,174))),new _t(15,52,52,24,24,new Pt(42,new At(2,102))),new _t(16,64,64,14,14,new Pt(56,new At(2,140))),new _t(17,72,72,16,16,new Pt(36,new At(4,92))),new _t(18,80,80,18,18,new Pt(48,new At(4,114))),new _t(19,88,88,20,20,new Pt(56,new At(4,144))),new _t(20,96,96,22,22,new Pt(68,new At(4,174))),new _t(21,104,104,24,24,new Pt(56,new At(6,136))),new _t(22,120,120,18,18,new Pt(68,new At(6,175))),new _t(23,132,132,20,20,new Pt(62,new At(8,163))),new _t(24,144,144,22,22,new Pt(62,new At(8,156),new At(2,155))),new _t(25,8,18,6,16,new Pt(7,new At(1,5))),new _t(26,8,32,6,14,new Pt(11,new At(1,10))),new _t(27,12,26,10,24,new Pt(14,new At(1,16))),new _t(28,12,36,10,16,new Pt(18,new At(1,22))),new _t(29,16,36,14,16,new Pt(24,new At(1,32))),new _t(30,16,48,14,22,new Pt(28,new At(1,49)))]}}_t.VERSIONS=_t.buildVersions();class or{constructor(e){const r=e.getHeight();if(r<8||r>144||r&1)throw new q;this.version=or.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Ie(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const r=e.getHeight(),s=e.getWidth();return _t.getVersionForDimensions(r,s)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let r=0,s=4,l=0;const c=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth();let p=!1,y=!1,E=!1,R=!1;do if(s===c&&l===0&&!p)e[r++]=this.readCorner1(c,d)&255,s-=2,l+=2,p=!0;else if(s===c-2&&l===0&&d&3&&!y)e[r++]=this.readCorner2(c,d)&255,s-=2,l+=2,y=!0;else if(s===c+4&&l===2&&!(d&7)&&!E)e[r++]=this.readCorner3(c,d)&255,s-=2,l+=2,E=!0;else if(s===c-2&&l===0&&(d&7)===4&&!R)e[r++]=this.readCorner4(c,d)&255,s-=2,l+=2,R=!0;else{do s<c&&l>=0&&!this.readMappingMatrix.get(l,s)&&(e[r++]=this.readUtah(s,l,c,d)&255),s-=2,l+=2;while(s>=0&&l<d);s+=1,l+=3;do s>=0&&l<d&&!this.readMappingMatrix.get(l,s)&&(e[r++]=this.readUtah(s,l,c,d)&255),s+=2,l-=2;while(s<c&&l>=0);s+=3,l+=1}while(s<c||l<d);if(r!==this.version.getTotalCodewords())throw new q;return e}readModule(e,r,s,l){return e<0&&(e+=s,r+=4-(s+4&7)),r<0&&(r+=l,e+=4-(l+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)}readUtah(e,r,s,l){let c=0;return this.readModule(e-2,r-2,s,l)&&(c|=1),c<<=1,this.readModule(e-2,r-1,s,l)&&(c|=1),c<<=1,this.readModule(e-1,r-2,s,l)&&(c|=1),c<<=1,this.readModule(e-1,r-1,s,l)&&(c|=1),c<<=1,this.readModule(e-1,r,s,l)&&(c|=1),c<<=1,this.readModule(e,r-2,s,l)&&(c|=1),c<<=1,this.readModule(e,r-1,s,l)&&(c|=1),c<<=1,this.readModule(e,r,s,l)&&(c|=1),c}readCorner1(e,r){let s=0;return this.readModule(e-1,0,e,r)&&(s|=1),s<<=1,this.readModule(e-1,1,e,r)&&(s|=1),s<<=1,this.readModule(e-1,2,e,r)&&(s|=1),s<<=1,this.readModule(0,r-2,e,r)&&(s|=1),s<<=1,this.readModule(0,r-1,e,r)&&(s|=1),s<<=1,this.readModule(1,r-1,e,r)&&(s|=1),s<<=1,this.readModule(2,r-1,e,r)&&(s|=1),s<<=1,this.readModule(3,r-1,e,r)&&(s|=1),s}readCorner2(e,r){let s=0;return this.readModule(e-3,0,e,r)&&(s|=1),s<<=1,this.readModule(e-2,0,e,r)&&(s|=1),s<<=1,this.readModule(e-1,0,e,r)&&(s|=1),s<<=1,this.readModule(0,r-4,e,r)&&(s|=1),s<<=1,this.readModule(0,r-3,e,r)&&(s|=1),s<<=1,this.readModule(0,r-2,e,r)&&(s|=1),s<<=1,this.readModule(0,r-1,e,r)&&(s|=1),s<<=1,this.readModule(1,r-1,e,r)&&(s|=1),s}readCorner3(e,r){let s=0;return this.readModule(e-1,0,e,r)&&(s|=1),s<<=1,this.readModule(e-1,r-1,e,r)&&(s|=1),s<<=1,this.readModule(0,r-3,e,r)&&(s|=1),s<<=1,this.readModule(0,r-2,e,r)&&(s|=1),s<<=1,this.readModule(0,r-1,e,r)&&(s|=1),s<<=1,this.readModule(1,r-3,e,r)&&(s|=1),s<<=1,this.readModule(1,r-2,e,r)&&(s|=1),s<<=1,this.readModule(1,r-1,e,r)&&(s|=1),s}readCorner4(e,r){let s=0;return this.readModule(e-3,0,e,r)&&(s|=1),s<<=1,this.readModule(e-2,0,e,r)&&(s|=1),s<<=1,this.readModule(e-1,0,e,r)&&(s|=1),s<<=1,this.readModule(0,r-2,e,r)&&(s|=1),s<<=1,this.readModule(0,r-1,e,r)&&(s|=1),s<<=1,this.readModule(1,r-1,e,r)&&(s|=1),s<<=1,this.readModule(2,r-1,e,r)&&(s|=1),s<<=1,this.readModule(3,r-1,e,r)&&(s|=1),s}extractDataRegion(e){const r=this.version.getSymbolSizeRows(),s=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new T("Dimension of bitMatrix must match the version size");const l=this.version.getDataRegionSizeRows(),c=this.version.getDataRegionSizeColumns(),d=r/l|0,p=s/c|0,y=d*l,E=p*c,R=new Ie(E,y);for(let P=0;P<d;++P){const D=P*l;for(let z=0;z<p;++z){const Z=z*c;for(let ee=0;ee<l;++ee){const oe=P*(l+2)+1+ee,he=D+ee;for(let Fe=0;Fe<c;++Fe){const Ve=z*(c+2)+1+Fe;if(e.get(Ve,oe)){const Pe=Z+Fe;R.set(Pe,he)}}}}}return R}}class ks{constructor(e,r){this.numDataCodewords=e,this.codewords=r}static getDataBlocks(e,r){const s=r.getECBlocks();let l=0;const c=s.getECBlocks();for(let ee of c)l+=ee.getCount();const d=new Array(l);let p=0;for(let ee of c)for(let oe=0;oe<ee.getCount();oe++){const he=ee.getDataCodewords(),Fe=s.getECCodewords()+he;d[p++]=new ks(he,new Uint8Array(Fe))}const E=d[0].codewords.length-s.getECCodewords(),R=E-1;let P=0;for(let ee=0;ee<R;ee++)for(let oe=0;oe<p;oe++)d[oe].codewords[ee]=e[P++];const D=r.getVersionNumber()===24,z=D?8:p;for(let ee=0;ee<z;ee++)d[ee].codewords[E-1]=e[P++];const Z=d[0].codewords.length;for(let ee=E;ee<Z;ee++)for(let oe=0;oe<p;oe++){const he=D?(oe+8)%p:oe,Fe=D&&he>7?ee-1:ee;d[he].codewords[Fe]=e[P++]}if(P!==e.length)throw new T;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ts{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new T(""+e);let r=0,s=this.bitOffset,l=this.byteOffset;const c=this.bytes;if(s>0){const d=8-s,p=e<d?e:d,y=d-p,E=255>>8-p<<y;r=(c[l]&E)>>y,e-=p,s+=p,s===8&&(s=0,l++)}if(e>0){for(;e>=8;)r=r<<8|c[l]&255,l++,e-=8;if(e>0){const d=8-e,p=255>>d<<d;r=r<<e|(c[l]&p)>>d,s+=e}}return this.bitOffset=s,this.byteOffset=l,r}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var xn;(function(k){k[k.PAD_ENCODE=0]="PAD_ENCODE",k[k.ASCII_ENCODE=1]="ASCII_ENCODE",k[k.C40_ENCODE=2]="C40_ENCODE",k[k.TEXT_ENCODE=3]="TEXT_ENCODE",k[k.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",k[k.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",k[k.BASE256_ENCODE=6]="BASE256_ENCODE"})(xn||(xn={}));class Cr{static decode(e){const r=new ts(e),s=new be,l=new be,c=new Array;let d=xn.ASCII_ENCODE;do if(d===xn.ASCII_ENCODE)d=this.decodeAsciiSegment(r,s,l);else{switch(d){case xn.C40_ENCODE:this.decodeC40Segment(r,s);break;case xn.TEXT_ENCODE:this.decodeTextSegment(r,s);break;case xn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,s);break;case xn.EDIFACT_ENCODE:this.decodeEdifactSegment(r,s);break;case xn.BASE256_ENCODE:this.decodeBase256Segment(r,s,c);break;default:throw new q}d=xn.ASCII_ENCODE}while(d!==xn.PAD_ENCODE&&r.available()>0);return l.length()>0&&s.append(l.toString()),new Le(e,s.toString(),c.length===0?null:c,null)}static decodeAsciiSegment(e,r,s){let l=!1;do{let c=e.readBits(8);if(c===0)throw new q;if(c<=128)return l&&(c+=128),r.append(String.fromCharCode(c-1)),xn.ASCII_ENCODE;if(c===129)return xn.PAD_ENCODE;if(c<=229){const d=c-130;d<10&&r.append("0"),r.append(""+d)}else switch(c){case 230:return xn.C40_ENCODE;case 231:return xn.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:l=!0;break;case 236:r.append("[)>05"),s.insert(0,"");break;case 237:r.append("[)>06"),s.insert(0,"");break;case 238:return xn.ANSIX12_ENCODE;case 239:return xn.TEXT_ENCODE;case 240:return xn.EDIFACT_ENCODE;case 241:break;default:if(c!==254||e.available()!==0)throw new q;break}}while(e.available()>0);return xn.ASCII_ENCODE}static decodeC40Segment(e,r){let s=!1;const l=[];let c=0;do{if(e.available()===8)return;const d=e.readBits(8);if(d===254)return;this.parseTwoBytes(d,e.readBits(8),l);for(let p=0;p<3;p++){const y=l[p];switch(c){case 0:if(y<3)c=y+1;else if(y<this.C40_BASIC_SET_CHARS.length){const E=this.C40_BASIC_SET_CHARS[y];s?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),s=!1):r.append(E)}else throw new q;break;case 1:s?(r.append(String.fromCharCode(y+128)),s=!1):r.append(String.fromCharCode(y)),c=0;break;case 2:if(y<this.C40_SHIFT2_SET_CHARS.length){const E=this.C40_SHIFT2_SET_CHARS[y];s?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),s=!1):r.append(E)}else switch(y){case 27:r.append("");break;case 30:s=!0;break;default:throw new q}c=0;break;case 3:s?(r.append(String.fromCharCode(y+224)),s=!1):r.append(String.fromCharCode(y+96)),c=0;break;default:throw new q}}}while(e.available()>0)}static decodeTextSegment(e,r){let s=!1,l=[],c=0;do{if(e.available()===8)return;const d=e.readBits(8);if(d===254)return;this.parseTwoBytes(d,e.readBits(8),l);for(let p=0;p<3;p++){const y=l[p];switch(c){case 0:if(y<3)c=y+1;else if(y<this.TEXT_BASIC_SET_CHARS.length){const E=this.TEXT_BASIC_SET_CHARS[y];s?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),s=!1):r.append(E)}else throw new q;break;case 1:s?(r.append(String.fromCharCode(y+128)),s=!1):r.append(String.fromCharCode(y)),c=0;break;case 2:if(y<this.TEXT_SHIFT2_SET_CHARS.length){const E=this.TEXT_SHIFT2_SET_CHARS[y];s?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),s=!1):r.append(E)}else switch(y){case 27:r.append("");break;case 30:s=!0;break;default:throw new q}c=0;break;case 3:if(y<this.TEXT_SHIFT3_SET_CHARS.length){const E=this.TEXT_SHIFT3_SET_CHARS[y];s?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),s=!1):r.append(E),c=0}else throw new q;break;default:throw new q}}}while(e.available()>0)}static decodeAnsiX12Segment(e,r){const s=[];do{if(e.available()===8)return;const l=e.readBits(8);if(l===254)return;this.parseTwoBytes(l,e.readBits(8),s);for(let c=0;c<3;c++){const d=s[c];switch(d){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(d<14)r.append(String.fromCharCode(d+44));else if(d<40)r.append(String.fromCharCode(d+51));else throw new q;break}}}while(e.available()>0)}static parseTwoBytes(e,r,s){let l=(e<<8)+r-1,c=Math.floor(l/1600);s[0]=c,l-=c*1600,c=Math.floor(l/40),s[1]=c,s[2]=l-c*40}static decodeEdifactSegment(e,r){do{if(e.available()<=16)return;for(let s=0;s<4;s++){let l=e.readBits(6);if(l===31){const c=8-e.getBitOffset();c!==8&&e.readBits(c);return}l&32||(l|=64),r.append(String.fromCharCode(l))}}while(e.available()>0)}static decodeBase256Segment(e,r,s){let l=1+e.getByteOffset();const c=this.unrandomize255State(e.readBits(8),l++);let d;if(c===0?d=e.available()/8|0:c<250?d=c:d=250*(c-249)+this.unrandomize255State(e.readBits(8),l++),d<0)throw new q;const p=new Uint8Array(d);for(let y=0;y<d;y++){if(e.available()<8)throw new q;p[y]=this.unrandomize255State(e.readBits(8),l++)}s.push(p);try{r.append(Re.decode(p,Ae.ISO88591))}catch(y){throw new Ze("Platform does not support required encoding: "+y.message)}}static unrandomize255State(e,r){const s=149*r%255+1,l=e-s;return l>=0?l:l+256}}Cr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Cr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Cr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Cr.TEXT_SHIFT2_SET_CHARS=Cr.C40_SHIFT2_SET_CHARS,Cr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class mi{constructor(){this.rsDecoder=new It(xe.DATA_MATRIX_FIELD_256)}decode(e){const r=new or(e),s=r.getVersion(),l=r.readCodewords(),c=ks.getDataBlocks(l,s);let d=0;for(let E of c)d+=E.getNumDataCodewords();const p=new Uint8Array(d),y=c.length;for(let E=0;E<y;E++){const R=c[E],P=R.getCodewords(),D=R.getNumDataCodewords();this.correctErrors(P,D);for(let z=0;z<D;z++)p[z*y+E]=P[z]}return Cr.decode(p)}correctErrors(e,r){const s=new Int32Array(e);try{this.rsDecoder.decode(s,e.length-r)}catch{throw new O}for(let l=0;l<r;l++)e[l]=s[l]}}class qt{constructor(e){this.image=e,this.rectangleDetector=new Ge(this.image)}detect(){const e=this.rectangleDetector.detect();let r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new $;r=this.shiftToModuleCenter(r);const s=r[0],l=r[1],c=r[2],d=r[3];let p=this.transitionsBetween(s,d)+1,y=this.transitionsBetween(c,d)+1;(p&1)===1&&(p+=1),(y&1)===1&&(y+=1),4*p<7*y&&4*y<7*p&&(p=y=Math.max(p,y));let E=qt.sampleGrid(this.image,s,l,c,d,p,y);return new gn(E,[s,l,c,d])}static shiftPoint(e,r,s){let l=(r.getX()-e.getX())/(s+1),c=(r.getY()-e.getY())/(s+1);return new Ue(e.getX()+l,e.getY()+c)}static moveAway(e,r,s){let l=e.getX(),c=e.getY();return l<r?l-=1:l+=1,c<s?c-=1:c+=1,new Ue(l,c)}detectSolid1(e){let r=e[0],s=e[1],l=e[3],c=e[2],d=this.transitionsBetween(r,s),p=this.transitionsBetween(s,l),y=this.transitionsBetween(l,c),E=this.transitionsBetween(c,r),R=d,P=[c,r,s,l];return R>p&&(R=p,P[0]=r,P[1]=s,P[2]=l,P[3]=c),R>y&&(R=y,P[0]=s,P[1]=l,P[2]=c,P[3]=r),R>E&&(P[0]=l,P[1]=c,P[2]=r,P[3]=s),P}detectSolid2(e){let r=e[0],s=e[1],l=e[2],c=e[3],d=this.transitionsBetween(r,c),p=qt.shiftPoint(s,l,(d+1)*4),y=qt.shiftPoint(l,s,(d+1)*4),E=this.transitionsBetween(p,r),R=this.transitionsBetween(y,c);return E<R?(e[0]=r,e[1]=s,e[2]=l,e[3]=c):(e[0]=s,e[1]=l,e[2]=c,e[3]=r),e}correctTopRight(e){let r=e[0],s=e[1],l=e[2],c=e[3],d=this.transitionsBetween(r,c),p=this.transitionsBetween(s,c),y=qt.shiftPoint(r,s,(p+1)*4),E=qt.shiftPoint(l,s,(d+1)*4);d=this.transitionsBetween(y,c),p=this.transitionsBetween(E,c);let R=new Ue(c.getX()+(l.getX()-s.getX())/(d+1),c.getY()+(l.getY()-s.getY())/(d+1)),P=new Ue(c.getX()+(r.getX()-s.getX())/(p+1),c.getY()+(r.getY()-s.getY())/(p+1));if(!this.isValid(R))return this.isValid(P)?P:null;if(!this.isValid(P))return R;let D=this.transitionsBetween(y,R)+this.transitionsBetween(E,R),z=this.transitionsBetween(y,P)+this.transitionsBetween(E,P);return D>z?R:P}shiftToModuleCenter(e){let r=e[0],s=e[1],l=e[2],c=e[3],d=this.transitionsBetween(r,c)+1,p=this.transitionsBetween(l,c)+1,y=qt.shiftPoint(r,s,p*4),E=qt.shiftPoint(l,s,d*4);d=this.transitionsBetween(y,c)+1,p=this.transitionsBetween(E,c)+1,(d&1)===1&&(d+=1),(p&1)===1&&(p+=1);let R=(r.getX()+s.getX()+l.getX()+c.getX())/4,P=(r.getY()+s.getY()+l.getY()+c.getY())/4;r=qt.moveAway(r,R,P),s=qt.moveAway(s,R,P),l=qt.moveAway(l,R,P),c=qt.moveAway(c,R,P);let D,z;return y=qt.shiftPoint(r,s,p*4),y=qt.shiftPoint(y,c,d*4),D=qt.shiftPoint(s,r,p*4),D=qt.shiftPoint(D,l,d*4),E=qt.shiftPoint(l,c,p*4),E=qt.shiftPoint(E,s,d*4),z=qt.shiftPoint(c,l,p*4),z=qt.shiftPoint(z,r,d*4),[y,D,E,z]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,r,s,l,c,d,p){return Je.getInstance().sampleGrid(e,d,p,.5,.5,d-.5,.5,d-.5,p-.5,.5,p-.5,r.getX(),r.getY(),c.getX(),c.getY(),l.getX(),l.getY(),s.getX(),s.getY())}transitionsBetween(e,r){let s=Math.trunc(e.getX()),l=Math.trunc(e.getY()),c=Math.trunc(r.getX()),d=Math.trunc(r.getY()),p=Math.abs(d-l)>Math.abs(c-s);if(p){let ee=s;s=l,l=ee,ee=c,c=d,d=ee}let y=Math.abs(c-s),E=Math.abs(d-l),R=-y/2,P=l<d?1:-1,D=s<c?1:-1,z=0,Z=this.image.get(p?l:s,p?s:l);for(let ee=s,oe=l;ee!==c;ee+=D){let he=this.image.get(p?oe:ee,p?ee:oe);if(he!==Z&&(z++,Z=he),R+=E,R>0){if(oe===d)break;oe+=P,R-=y}}return z}}class hr{constructor(){this.decoder=new mi}decode(e,r=null){let s,l;if(r!=null&&r.has(ne.PURE_BARCODE)){const E=hr.extractPureBits(e.getBlackMatrix());s=this.decoder.decode(E),l=hr.NO_POINTS}else{const E=new qt(e.getBlackMatrix()).detect();s=this.decoder.decode(E.getBits()),l=E.getPoints()}const c=s.getRawBytes(),d=new ae(s.getText(),c,8*c.length,l,te.DATA_MATRIX,B.currentTimeMillis()),p=s.getByteSegments();p!=null&&d.putMetadata(Se.BYTE_SEGMENTS,p);const y=s.getECLevel();return y!=null&&d.putMetadata(Se.ERROR_CORRECTION_LEVEL,y),d}reset(){}static extractPureBits(e){const r=e.getTopLeftOnBit(),s=e.getBottomRightOnBit();if(r==null||s==null)throw new $;const l=this.moduleSize(r,e);let c=r[1];const d=s[1];let p=r[0];const E=(s[0]-p+1)/l,R=(d-c+1)/l;if(E<=0||R<=0)throw new $;const P=l/2;c+=P,p+=P;const D=new Ie(E,R);for(let z=0;z<R;z++){const Z=c+z*l;for(let ee=0;ee<E;ee++)e.get(p+ee*l,Z)&&D.set(ee,z)}return D}static moduleSize(e,r){const s=r.getWidth();let l=e[0];const c=e[1];for(;l<s&&r.get(l,c);)l++;if(l===s)throw new $;const d=l-e[0];if(d===0)throw new $;return d}}hr.NO_POINTS=[];class qo extends Ce{constructor(e=500){super(new hr,e)}}var Gr;(function(k){k[k.L=0]="L",k[k.M=1]="M",k[k.Q=2]="Q",k[k.H=3]="H"})(Gr||(Gr={}));class Ft{constructor(e,r,s){this.value=e,this.stringValue=r,this.bits=s,Ft.FOR_BITS.set(s,this),Ft.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return Ft.L;case"M":return Ft.M;case"Q":return Ft.Q;case"H":return Ft.H;default:throw new A(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof Ft))return!1;const r=e;return this.value===r.value}static forBits(e){if(e<0||e>=Ft.FOR_BITS.size)throw new T;return Ft.FOR_BITS.get(e)}}Ft.FOR_BITS=new Map,Ft.FOR_VALUE=new Map,Ft.L=new Ft(Gr.L,"L",1),Ft.M=new Ft(Gr.M,"M",0),Ft.Q=new Ft(Gr.Q,"Q",3),Ft.H=new Ft(Gr.H,"H",2);class En{constructor(e){this.errorCorrectionLevel=Ft.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,r){return F.bitCount(e^r)}static decodeFormatInformation(e,r){const s=En.doDecodeFormatInformation(e,r);return s!==null?s:En.doDecodeFormatInformation(e^En.FORMAT_INFO_MASK_QR,r^En.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,r){let s=Number.MAX_SAFE_INTEGER,l=0;for(const c of En.FORMAT_INFO_DECODE_LOOKUP){const d=c[0];if(d===e||d===r)return new En(c[1]);let p=En.numBitsDiffering(e,d);p<s&&(l=c[1],s=p),e!==r&&(p=En.numBitsDiffering(r,d),p<s&&(l=c[1],s=p))}return s<=3?new En(l):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof En))return!1;const r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask}}En.FORMAT_INFO_MASK_QR=21522,En.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class le{constructor(e,...r){this.ecCodewordsPerBlock=e,this.ecBlocks=r}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const r=this.ecBlocks;for(const s of r)e+=s.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class V{constructor(e,r){this.count=e,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ge{constructor(e,r,...s){this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=s;let l=0;const c=s[0].getECCodewordsPerBlock(),d=s[0].getECBlocks();for(const p of d)l+=p.getCount()*(p.getDataCodewords()+c);this.totalCodewords=l}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new q;try{return this.getVersionForNumber((e-17)/4)}catch{throw new q}}static getVersionForNumber(e){if(e<1||e>40)throw new T;return ge.VERSIONS[e-1]}static decodeVersionInformation(e){let r=Number.MAX_SAFE_INTEGER,s=0;for(let l=0;l<ge.VERSION_DECODE_INFO.length;l++){const c=ge.VERSION_DECODE_INFO[l];if(c===e)return ge.getVersionForNumber(l+7);const d=En.numBitsDiffering(e,c);d<r&&(s=l+7,r=d)}return r<=3?ge.getVersionForNumber(s):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),r=new Ie(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);const s=this.alignmentPatternCenters.length;for(let l=0;l<s;l++){const c=this.alignmentPatternCenters[l]-2;for(let d=0;d<s;d++)l===0&&(d===0||d===s-1)||l===s-1&&d===0||r.setRegion(this.alignmentPatternCenters[d]-2,c,5,5)}return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r}toString(){return""+this.versionNumber}}ge.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ge.VERSIONS=[new ge(1,new Int32Array(0),new le(7,new V(1,19)),new le(10,new V(1,16)),new le(13,new V(1,13)),new le(17,new V(1,9))),new ge(2,Int32Array.from([6,18]),new le(10,new V(1,34)),new le(16,new V(1,28)),new le(22,new V(1,22)),new le(28,new V(1,16))),new ge(3,Int32Array.from([6,22]),new le(15,new V(1,55)),new le(26,new V(1,44)),new le(18,new V(2,17)),new le(22,new V(2,13))),new ge(4,Int32Array.from([6,26]),new le(20,new V(1,80)),new le(18,new V(2,32)),new le(26,new V(2,24)),new le(16,new V(4,9))),new ge(5,Int32Array.from([6,30]),new le(26,new V(1,108)),new le(24,new V(2,43)),new le(18,new V(2,15),new V(2,16)),new le(22,new V(2,11),new V(2,12))),new ge(6,Int32Array.from([6,34]),new le(18,new V(2,68)),new le(16,new V(4,27)),new le(24,new V(4,19)),new le(28,new V(4,15))),new ge(7,Int32Array.from([6,22,38]),new le(20,new V(2,78)),new le(18,new V(4,31)),new le(18,new V(2,14),new V(4,15)),new le(26,new V(4,13),new V(1,14))),new ge(8,Int32Array.from([6,24,42]),new le(24,new V(2,97)),new le(22,new V(2,38),new V(2,39)),new le(22,new V(4,18),new V(2,19)),new le(26,new V(4,14),new V(2,15))),new ge(9,Int32Array.from([6,26,46]),new le(30,new V(2,116)),new le(22,new V(3,36),new V(2,37)),new le(20,new V(4,16),new V(4,17)),new le(24,new V(4,12),new V(4,13))),new ge(10,Int32Array.from([6,28,50]),new le(18,new V(2,68),new V(2,69)),new le(26,new V(4,43),new V(1,44)),new le(24,new V(6,19),new V(2,20)),new le(28,new V(6,15),new V(2,16))),new ge(11,Int32Array.from([6,30,54]),new le(20,new V(4,81)),new le(30,new V(1,50),new V(4,51)),new le(28,new V(4,22),new V(4,23)),new le(24,new V(3,12),new V(8,13))),new ge(12,Int32Array.from([6,32,58]),new le(24,new V(2,92),new V(2,93)),new le(22,new V(6,36),new V(2,37)),new le(26,new V(4,20),new V(6,21)),new le(28,new V(7,14),new V(4,15))),new ge(13,Int32Array.from([6,34,62]),new le(26,new V(4,107)),new le(22,new V(8,37),new V(1,38)),new le(24,new V(8,20),new V(4,21)),new le(22,new V(12,11),new V(4,12))),new ge(14,Int32Array.from([6,26,46,66]),new le(30,new V(3,115),new V(1,116)),new le(24,new V(4,40),new V(5,41)),new le(20,new V(11,16),new V(5,17)),new le(24,new V(11,12),new V(5,13))),new ge(15,Int32Array.from([6,26,48,70]),new le(22,new V(5,87),new V(1,88)),new le(24,new V(5,41),new V(5,42)),new le(30,new V(5,24),new V(7,25)),new le(24,new V(11,12),new V(7,13))),new ge(16,Int32Array.from([6,26,50,74]),new le(24,new V(5,98),new V(1,99)),new le(28,new V(7,45),new V(3,46)),new le(24,new V(15,19),new V(2,20)),new le(30,new V(3,15),new V(13,16))),new ge(17,Int32Array.from([6,30,54,78]),new le(28,new V(1,107),new V(5,108)),new le(28,new V(10,46),new V(1,47)),new le(28,new V(1,22),new V(15,23)),new le(28,new V(2,14),new V(17,15))),new ge(18,Int32Array.from([6,30,56,82]),new le(30,new V(5,120),new V(1,121)),new le(26,new V(9,43),new V(4,44)),new le(28,new V(17,22),new V(1,23)),new le(28,new V(2,14),new V(19,15))),new ge(19,Int32Array.from([6,30,58,86]),new le(28,new V(3,113),new V(4,114)),new le(26,new V(3,44),new V(11,45)),new le(26,new V(17,21),new V(4,22)),new le(26,new V(9,13),new V(16,14))),new ge(20,Int32Array.from([6,34,62,90]),new le(28,new V(3,107),new V(5,108)),new le(26,new V(3,41),new V(13,42)),new le(30,new V(15,24),new V(5,25)),new le(28,new V(15,15),new V(10,16))),new ge(21,Int32Array.from([6,28,50,72,94]),new le(28,new V(4,116),new V(4,117)),new le(26,new V(17,42)),new le(28,new V(17,22),new V(6,23)),new le(30,new V(19,16),new V(6,17))),new ge(22,Int32Array.from([6,26,50,74,98]),new le(28,new V(2,111),new V(7,112)),new le(28,new V(17,46)),new le(30,new V(7,24),new V(16,25)),new le(24,new V(34,13))),new ge(23,Int32Array.from([6,30,54,78,102]),new le(30,new V(4,121),new V(5,122)),new le(28,new V(4,47),new V(14,48)),new le(30,new V(11,24),new V(14,25)),new le(30,new V(16,15),new V(14,16))),new ge(24,Int32Array.from([6,28,54,80,106]),new le(30,new V(6,117),new V(4,118)),new le(28,new V(6,45),new V(14,46)),new le(30,new V(11,24),new V(16,25)),new le(30,new V(30,16),new V(2,17))),new ge(25,Int32Array.from([6,32,58,84,110]),new le(26,new V(8,106),new V(4,107)),new le(28,new V(8,47),new V(13,48)),new le(30,new V(7,24),new V(22,25)),new le(30,new V(22,15),new V(13,16))),new ge(26,Int32Array.from([6,30,58,86,114]),new le(28,new V(10,114),new V(2,115)),new le(28,new V(19,46),new V(4,47)),new le(28,new V(28,22),new V(6,23)),new le(30,new V(33,16),new V(4,17))),new ge(27,Int32Array.from([6,34,62,90,118]),new le(30,new V(8,122),new V(4,123)),new le(28,new V(22,45),new V(3,46)),new le(30,new V(8,23),new V(26,24)),new le(30,new V(12,15),new V(28,16))),new ge(28,Int32Array.from([6,26,50,74,98,122]),new le(30,new V(3,117),new V(10,118)),new le(28,new V(3,45),new V(23,46)),new le(30,new V(4,24),new V(31,25)),new le(30,new V(11,15),new V(31,16))),new ge(29,Int32Array.from([6,30,54,78,102,126]),new le(30,new V(7,116),new V(7,117)),new le(28,new V(21,45),new V(7,46)),new le(30,new V(1,23),new V(37,24)),new le(30,new V(19,15),new V(26,16))),new ge(30,Int32Array.from([6,26,52,78,104,130]),new le(30,new V(5,115),new V(10,116)),new le(28,new V(19,47),new V(10,48)),new le(30,new V(15,24),new V(25,25)),new le(30,new V(23,15),new V(25,16))),new ge(31,Int32Array.from([6,30,56,82,108,134]),new le(30,new V(13,115),new V(3,116)),new le(28,new V(2,46),new V(29,47)),new le(30,new V(42,24),new V(1,25)),new le(30,new V(23,15),new V(28,16))),new ge(32,Int32Array.from([6,34,60,86,112,138]),new le(30,new V(17,115)),new le(28,new V(10,46),new V(23,47)),new le(30,new V(10,24),new V(35,25)),new le(30,new V(19,15),new V(35,16))),new ge(33,Int32Array.from([6,30,58,86,114,142]),new le(30,new V(17,115),new V(1,116)),new le(28,new V(14,46),new V(21,47)),new le(30,new V(29,24),new V(19,25)),new le(30,new V(11,15),new V(46,16))),new ge(34,Int32Array.from([6,34,62,90,118,146]),new le(30,new V(13,115),new V(6,116)),new le(28,new V(14,46),new V(23,47)),new le(30,new V(44,24),new V(7,25)),new le(30,new V(59,16),new V(1,17))),new ge(35,Int32Array.from([6,30,54,78,102,126,150]),new le(30,new V(12,121),new V(7,122)),new le(28,new V(12,47),new V(26,48)),new le(30,new V(39,24),new V(14,25)),new le(30,new V(22,15),new V(41,16))),new ge(36,Int32Array.from([6,24,50,76,102,128,154]),new le(30,new V(6,121),new V(14,122)),new le(28,new V(6,47),new V(34,48)),new le(30,new V(46,24),new V(10,25)),new le(30,new V(2,15),new V(64,16))),new ge(37,Int32Array.from([6,28,54,80,106,132,158]),new le(30,new V(17,122),new V(4,123)),new le(28,new V(29,46),new V(14,47)),new le(30,new V(49,24),new V(10,25)),new le(30,new V(24,15),new V(46,16))),new ge(38,Int32Array.from([6,32,58,84,110,136,162]),new le(30,new V(4,122),new V(18,123)),new le(28,new V(13,46),new V(32,47)),new le(30,new V(48,24),new V(14,25)),new le(30,new V(42,15),new V(32,16))),new ge(39,Int32Array.from([6,26,54,82,110,138,166]),new le(30,new V(20,117),new V(4,118)),new le(28,new V(40,47),new V(7,48)),new le(30,new V(43,24),new V(22,25)),new le(30,new V(10,15),new V(67,16))),new ge(40,Int32Array.from([6,30,58,86,114,142,170]),new le(30,new V(19,118),new V(6,119)),new le(28,new V(18,47),new V(31,48)),new le(30,new V(34,24),new V(34,25)),new le(30,new V(20,15),new V(61,16)))];var He;(function(k){k[k.DATA_MASK_000=0]="DATA_MASK_000",k[k.DATA_MASK_001=1]="DATA_MASK_001",k[k.DATA_MASK_010=2]="DATA_MASK_010",k[k.DATA_MASK_011=3]="DATA_MASK_011",k[k.DATA_MASK_100=4]="DATA_MASK_100",k[k.DATA_MASK_101=5]="DATA_MASK_101",k[k.DATA_MASK_110=6]="DATA_MASK_110",k[k.DATA_MASK_111=7]="DATA_MASK_111"})(He||(He={}));class Ye{constructor(e,r){this.value=e,this.isMasked=r}unmaskBitMatrix(e,r){for(let s=0;s<r;s++)for(let l=0;l<r;l++)this.isMasked(s,l)&&e.flip(l,s)}}Ye.values=new Map([[He.DATA_MASK_000,new Ye(He.DATA_MASK_000,(k,e)=>(k+e&1)===0)],[He.DATA_MASK_001,new Ye(He.DATA_MASK_001,(k,e)=>(k&1)===0)],[He.DATA_MASK_010,new Ye(He.DATA_MASK_010,(k,e)=>e%3===0)],[He.DATA_MASK_011,new Ye(He.DATA_MASK_011,(k,e)=>(k+e)%3===0)],[He.DATA_MASK_100,new Ye(He.DATA_MASK_100,(k,e)=>(Math.floor(k/2)+Math.floor(e/3)&1)===0)],[He.DATA_MASK_101,new Ye(He.DATA_MASK_101,(k,e)=>k*e%6===0)],[He.DATA_MASK_110,new Ye(He.DATA_MASK_110,(k,e)=>k*e%6<3)],[He.DATA_MASK_111,new Ye(He.DATA_MASK_111,(k,e)=>(k+e+k*e%3&1)===0)]]);class at{constructor(e){const r=e.getHeight();if(r<21||(r&3)!==1)throw new q;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let c=0;c<6;c++)e=this.copyBit(c,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let c=5;c>=0;c--)e=this.copyBit(8,c,e);const r=this.bitMatrix.getHeight();let s=0;const l=r-7;for(let c=r-1;c>=l;c--)s=this.copyBit(8,c,s);for(let c=r-8;c<r;c++)s=this.copyBit(c,8,s);if(this.parsedFormatInfo=En.decodeFormatInformation(e,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new q}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return ge.getVersionForNumber(r);let s=0;const l=e-11;for(let d=5;d>=0;d--)for(let p=e-9;p>=l;p--)s=this.copyBit(p,d,s);let c=ge.decodeVersionInformation(s);if(c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;s=0;for(let d=5;d>=0;d--)for(let p=e-9;p>=l;p--)s=this.copyBit(d,p,s);if(c=ge.decodeVersionInformation(s),c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;throw new q}copyBit(e,r,s){return(this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r))?s<<1|1:s<<1}readCodewords(){const e=this.readFormatInformation(),r=this.readVersion(),s=Ye.values.get(e.getDataMask()),l=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,l);const c=r.buildFunctionPattern();let d=!0;const p=new Uint8Array(r.getTotalCodewords());let y=0,E=0,R=0;for(let P=l-1;P>0;P-=2){P===6&&P--;for(let D=0;D<l;D++){const z=d?l-1-D:D;for(let Z=0;Z<2;Z++)c.get(P-Z,z)||(R++,E<<=1,this.bitMatrix.get(P-Z,z)&&(E|=1),R===8&&(p[y++]=E,R=0,E=0))}d=!d}if(y!==r.getTotalCodewords())throw new q;return p}remask(){if(this.parsedFormatInfo===null)return;const e=Ye.values[this.parsedFormatInfo.getDataMask()],r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let r=0,s=e.getWidth();r<s;r++)for(let l=r+1,c=e.getHeight();l<c;l++)e.get(r,l)!==e.get(l,r)&&(e.flip(l,r),e.flip(r,l))}}class Dt{constructor(e,r){this.numDataCodewords=e,this.codewords=r}static getDataBlocks(e,r,s){if(e.length!==r.getTotalCodewords())throw new T;const l=r.getECBlocksForLevel(s);let c=0;const d=l.getECBlocks();for(const Z of d)c+=Z.getCount();const p=new Array(c);let y=0;for(const Z of d)for(let ee=0;ee<Z.getCount();ee++){const oe=Z.getDataCodewords(),he=l.getECCodewordsPerBlock()+oe;p[y++]=new Dt(oe,new Uint8Array(he))}const E=p[0].codewords.length;let R=p.length-1;for(;R>=0&&p[R].codewords.length!==E;)R--;R++;const P=E-l.getECCodewordsPerBlock();let D=0;for(let Z=0;Z<P;Z++)for(let ee=0;ee<y;ee++)p[ee].codewords[Z]=e[D++];for(let Z=R;Z<y;Z++)p[Z].codewords[P]=e[D++];const z=p[0].codewords.length;for(let Z=P;Z<z;Z++)for(let ee=0;ee<y;ee++){const oe=ee<R?Z:Z+1;p[ee].codewords[oe]=e[D++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var dn;(function(k){k[k.TERMINATOR=0]="TERMINATOR",k[k.NUMERIC=1]="NUMERIC",k[k.ALPHANUMERIC=2]="ALPHANUMERIC",k[k.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",k[k.BYTE=4]="BYTE",k[k.ECI=5]="ECI",k[k.KANJI=6]="KANJI",k[k.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",k[k.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",k[k.HANZI=9]="HANZI"})(dn||(dn={}));class lt{constructor(e,r,s,l){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=s,this.bits=l,lt.FOR_BITS.set(l,this),lt.FOR_VALUE.set(e,this)}static forBits(e){const r=lt.FOR_BITS.get(e);if(r===void 0)throw new T;return r}getCharacterCountBits(e){const r=e.getVersionNumber();let s;return r<=9?s=0:r<=26?s=1:s=2,this.characterCountBitsForVersions[s]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof lt))return!1;const r=e;return this.value===r.value}toString(){return this.stringValue}}lt.FOR_BITS=new Map,lt.FOR_VALUE=new Map,lt.TERMINATOR=new lt(dn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),lt.NUMERIC=new lt(dn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),lt.ALPHANUMERIC=new lt(dn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),lt.STRUCTURED_APPEND=new lt(dn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),lt.BYTE=new lt(dn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),lt.ECI=new lt(dn.ECI,"ECI",Int32Array.from([0,0,0]),7),lt.KANJI=new lt(dn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),lt.FNC1_FIRST_POSITION=new lt(dn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),lt.FNC1_SECOND_POSITION=new lt(dn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),lt.HANZI=new lt(dn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Qt{static decode(e,r,s,l){const c=new ts(e);let d=new be;const p=new Array;let y=-1,E=-1;try{let R=null,P=!1,D;do{if(c.available()<4)D=lt.TERMINATOR;else{const z=c.readBits(4);D=lt.forBits(z)}switch(D){case lt.TERMINATOR:break;case lt.FNC1_FIRST_POSITION:case lt.FNC1_SECOND_POSITION:P=!0;break;case lt.STRUCTURED_APPEND:if(c.available()<16)throw new q;y=c.readBits(8),E=c.readBits(8);break;case lt.ECI:const z=Qt.parseECIValue(c);if(R=J.getCharacterSetECIByValue(z),R===null)throw new q;break;case lt.HANZI:const Z=c.readBits(4),ee=c.readBits(D.getCharacterCountBits(r));Z===Qt.GB2312_SUBSET&&Qt.decodeHanziSegment(c,d,ee);break;default:const oe=c.readBits(D.getCharacterCountBits(r));switch(D){case lt.NUMERIC:Qt.decodeNumericSegment(c,d,oe);break;case lt.ALPHANUMERIC:Qt.decodeAlphanumericSegment(c,d,oe,P);break;case lt.BYTE:Qt.decodeByteSegment(c,d,oe,R,p,l);break;case lt.KANJI:Qt.decodeKanjiSegment(c,d,oe);break;default:throw new q}break}}while(D!==lt.TERMINATOR)}catch{throw new q}return new Le(e,d.toString(),p.length===0?null:p,s===null?null:s.toString(),y,E)}static decodeHanziSegment(e,r,s){if(s*13>e.available())throw new q;const l=new Uint8Array(2*s);let c=0;for(;s>0;){const d=e.readBits(13);let p=d/96<<8&4294967295|d%96;p<959?p+=41377:p+=42657,l[c]=p>>8&255,l[c+1]=p&255,c+=2,s--}try{r.append(Re.decode(l,Ae.GB2312))}catch(d){throw new q(d)}}static decodeKanjiSegment(e,r,s){if(s*13>e.available())throw new q;const l=new Uint8Array(2*s);let c=0;for(;s>0;){const d=e.readBits(13);let p=d/192<<8&4294967295|d%192;p<7936?p+=33088:p+=49472,l[c]=p>>8,l[c+1]=p,c+=2,s--}try{r.append(Re.decode(l,Ae.SHIFT_JIS))}catch(d){throw new q(d)}}static decodeByteSegment(e,r,s,l,c,d){if(8*s>e.available())throw new q;const p=new Uint8Array(s);for(let E=0;E<s;E++)p[E]=e.readBits(8);let y;l===null?y=Ae.guessEncoding(p,d):y=l.getName();try{r.append(Re.decode(p,y))}catch(E){throw new q(E)}c.push(p)}static toAlphaNumericChar(e){if(e>=Qt.ALPHANUMERIC_CHARS.length)throw new q;return Qt.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,r,s,l){const c=r.length();for(;s>1;){if(e.available()<11)throw new q;const d=e.readBits(11);r.append(Qt.toAlphaNumericChar(Math.floor(d/45))),r.append(Qt.toAlphaNumericChar(d%45)),s-=2}if(s===1){if(e.available()<6)throw new q;r.append(Qt.toAlphaNumericChar(e.readBits(6)))}if(l)for(let d=c;d<r.length();d++)r.charAt(d)==="%"&&(d<r.length()-1&&r.charAt(d+1)==="%"?r.deleteCharAt(d+1):r.setCharAt(d,""))}static decodeNumericSegment(e,r,s){for(;s>=3;){if(e.available()<10)throw new q;const l=e.readBits(10);if(l>=1e3)throw new q;r.append(Qt.toAlphaNumericChar(Math.floor(l/100))),r.append(Qt.toAlphaNumericChar(Math.floor(l/10)%10)),r.append(Qt.toAlphaNumericChar(l%10)),s-=3}if(s===2){if(e.available()<7)throw new q;const l=e.readBits(7);if(l>=100)throw new q;r.append(Qt.toAlphaNumericChar(Math.floor(l/10))),r.append(Qt.toAlphaNumericChar(l%10))}else if(s===1){if(e.available()<4)throw new q;const l=e.readBits(4);if(l>=10)throw new q;r.append(Qt.toAlphaNumericChar(l))}}static parseECIValue(e){const r=e.readBits(8);if(!(r&128))return r&127;if((r&192)===128){const s=e.readBits(8);return(r&63)<<8&4294967295|s}if((r&224)===192){const s=e.readBits(16);return(r&31)<<16&4294967295|s}throw new q}}Qt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Qt.GB2312_SUBSET=1;class ns{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const r=e[0];e[0]=e[2],e[2]=r}}class Pi{constructor(){this.rsDecoder=new It(xe.QR_CODE_FIELD_256)}decodeBooleanArray(e,r){return this.decodeBitMatrix(Ie.parseFromBooleanArray(e),r)}decodeBitMatrix(e,r){const s=new at(e);let l=null;try{return this.decodeBitMatrixParser(s,r)}catch(c){l=c}try{s.remask(),s.setMirror(!0),s.readVersion(),s.readFormatInformation(),s.mirror();const c=this.decodeBitMatrixParser(s,r);return c.setOther(new ns(!0)),c}catch(c){throw l!==null?l:c}}decodeBitMatrixParser(e,r){const s=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),c=e.readCodewords(),d=Dt.getDataBlocks(c,s,l);let p=0;for(const R of d)p+=R.getNumDataCodewords();const y=new Uint8Array(p);let E=0;for(const R of d){const P=R.getCodewords(),D=R.getNumDataCodewords();this.correctErrors(P,D);for(let z=0;z<D;z++)y[E++]=P[z]}return Qt.decode(y,s,l,r)}correctErrors(e,r){const s=new Int32Array(e);try{this.rsDecoder.decode(s,e.length-r)}catch{throw new O}for(let l=0;l<r;l++)e[l]=s[l]}}class Mi extends Ue{constructor(e,r,s){super(e,r),this.estimatedModuleSize=s}aboutEquals(e,r,s){if(Math.abs(r-this.getY())<=e&&Math.abs(s-this.getX())<=e){const l=Math.abs(e-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(e,r,s){const l=(this.getX()+r)/2,c=(this.getY()+e)/2,d=(this.estimatedModuleSize+s)/2;return new Mi(l,c,d)}}class sn{constructor(e,r,s,l,c,d,p){this.image=e,this.startX=r,this.startY=s,this.width=l,this.height=c,this.moduleSize=d,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,r=this.height,s=this.width,l=e+s,c=this.startY+r/2,d=new Int32Array(3),p=this.image;for(let y=0;y<r;y++){const E=c+(y&1?-Math.floor((y+1)/2):Math.floor((y+1)/2));d[0]=0,d[1]=0,d[2]=0;let R=e;for(;R<l&&!p.get(R,E);)R++;let P=0;for(;R<l;){if(p.get(R,E))if(P===1)d[1]++;else if(P===2){if(this.foundPatternCross(d)){const D=this.handlePossibleCenter(d,E,R);if(D!==null)return D}d[0]=d[2],d[1]=1,d[2]=0,P=1}else d[++P]++;else P===1&&P++,d[P]++;R++}if(this.foundPatternCross(d)){const D=this.handlePossibleCenter(d,E,l);if(D!==null)return D}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new $}static centerFromEnd(e,r){return r-e[2]-e[1]/2}foundPatternCross(e){const r=this.moduleSize,s=r/2;for(let l=0;l<3;l++)if(Math.abs(r-e[l])>=s)return!1;return!0}crossCheckVertical(e,r,s,l){const c=this.image,d=c.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let y=e;for(;y>=0&&c.get(r,y)&&p[1]<=s;)p[1]++,y--;if(y<0||p[1]>s)return NaN;for(;y>=0&&!c.get(r,y)&&p[0]<=s;)p[0]++,y--;if(p[0]>s)return NaN;for(y=e+1;y<d&&c.get(r,y)&&p[1]<=s;)p[1]++,y++;if(y===d||p[1]>s)return NaN;for(;y<d&&!c.get(r,y)&&p[2]<=s;)p[2]++,y++;if(p[2]>s)return NaN;const E=p[0]+p[1]+p[2];return 5*Math.abs(E-l)>=2*l?NaN:this.foundPatternCross(p)?sn.centerFromEnd(p,y):NaN}handlePossibleCenter(e,r,s){const l=e[0]+e[1]+e[2],c=sn.centerFromEnd(e,s),d=this.crossCheckVertical(r,c,2*e[1],l);if(!isNaN(d)){const p=(e[0]+e[1]+e[2])/3;for(const E of this.possibleCenters)if(E.aboutEquals(p,d,c))return E.combineEstimate(d,c,p);const y=new Mi(c,d,p);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null}}class Sn extends Ue{constructor(e,r,s,l){super(e,r),this.estimatedModuleSize=s,this.count=l,l===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,r,s){if(Math.abs(r-this.getY())<=e&&Math.abs(s-this.getX())<=e){const l=Math.abs(e-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(e,r,s){const l=this.count+1,c=(this.count*this.getX()+r)/l,d=(this.count*this.getY()+e)/l,p=(this.count*this.estimatedModuleSize+s)/l;return new Sn(c,d,p,l)}}class _r{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Vt{constructor(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const r=e!=null&&e.get(ne.TRY_HARDER)!==void 0,s=e!=null&&e.get(ne.PURE_BARCODE)!==void 0,l=this.image,c=l.getHeight(),d=l.getWidth();let p=Math.floor(3*c/(4*Vt.MAX_MODULES));(p<Vt.MIN_SKIP||r)&&(p=Vt.MIN_SKIP);let y=!1;const E=new Int32Array(5);for(let P=p-1;P<c&&!y;P+=p){E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0;let D=0;for(let z=0;z<d;z++)if(l.get(z,P))(D&1)===1&&D++,E[D]++;else if(D&1)E[D]++;else if(D===4)if(Vt.foundPatternCross(E)){if(this.handlePossibleCenter(E,P,z,s)===!0)if(p=2,this.hasSkipped===!0)y=this.haveMultiplyConfirmedCenters();else{const ee=this.findRowSkip();ee>E[2]&&(P+=ee-E[2]-p,z=d-1)}else{E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,D=3;continue}D=0,E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0}else E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,D=3;else E[++D]++;Vt.foundPatternCross(E)&&this.handlePossibleCenter(E,P,d,s)===!0&&(p=E[0],this.hasSkipped&&(y=this.haveMultiplyConfirmedCenters()))}const R=this.selectBestPatterns();return Ue.orderBestPatterns(R),new _r(R)}static centerFromEnd(e,r){return r-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let r=0;for(let c=0;c<5;c++){const d=e[c];if(d===0)return!1;r+=d}if(r<7)return!1;const s=r/7,l=s/2;return Math.abs(s-e[0])<l&&Math.abs(s-e[1])<l&&Math.abs(3*s-e[2])<3*l&&Math.abs(s-e[3])<l&&Math.abs(s-e[4])<l}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,r,s,l){const c=this.getCrossCheckStateCount();let d=0;const p=this.image;for(;e>=d&&r>=d&&p.get(r-d,e-d);)c[2]++,d++;if(e<d||r<d)return!1;for(;e>=d&&r>=d&&!p.get(r-d,e-d)&&c[1]<=s;)c[1]++,d++;if(e<d||r<d||c[1]>s)return!1;for(;e>=d&&r>=d&&p.get(r-d,e-d)&&c[0]<=s;)c[0]++,d++;if(c[0]>s)return!1;const y=p.getHeight(),E=p.getWidth();for(d=1;e+d<y&&r+d<E&&p.get(r+d,e+d);)c[2]++,d++;if(e+d>=y||r+d>=E)return!1;for(;e+d<y&&r+d<E&&!p.get(r+d,e+d)&&c[3]<s;)c[3]++,d++;if(e+d>=y||r+d>=E||c[3]>=s)return!1;for(;e+d<y&&r+d<E&&p.get(r+d,e+d)&&c[4]<s;)c[4]++,d++;if(c[4]>=s)return!1;const R=c[0]+c[1]+c[2]+c[3]+c[4];return Math.abs(R-l)<2*l&&Vt.foundPatternCross(c)}crossCheckVertical(e,r,s,l){const c=this.image,d=c.getHeight(),p=this.getCrossCheckStateCount();let y=e;for(;y>=0&&c.get(r,y);)p[2]++,y--;if(y<0)return NaN;for(;y>=0&&!c.get(r,y)&&p[1]<=s;)p[1]++,y--;if(y<0||p[1]>s)return NaN;for(;y>=0&&c.get(r,y)&&p[0]<=s;)p[0]++,y--;if(p[0]>s)return NaN;for(y=e+1;y<d&&c.get(r,y);)p[2]++,y++;if(y===d)return NaN;for(;y<d&&!c.get(r,y)&&p[3]<s;)p[3]++,y++;if(y===d||p[3]>=s)return NaN;for(;y<d&&c.get(r,y)&&p[4]<s;)p[4]++,y++;if(p[4]>=s)return NaN;const E=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(E-l)>=2*l?NaN:Vt.foundPatternCross(p)?Vt.centerFromEnd(p,y):NaN}crossCheckHorizontal(e,r,s,l){const c=this.image,d=c.getWidth(),p=this.getCrossCheckStateCount();let y=e;for(;y>=0&&c.get(y,r);)p[2]++,y--;if(y<0)return NaN;for(;y>=0&&!c.get(y,r)&&p[1]<=s;)p[1]++,y--;if(y<0||p[1]>s)return NaN;for(;y>=0&&c.get(y,r)&&p[0]<=s;)p[0]++,y--;if(p[0]>s)return NaN;for(y=e+1;y<d&&c.get(y,r);)p[2]++,y++;if(y===d)return NaN;for(;y<d&&!c.get(y,r)&&p[3]<s;)p[3]++,y++;if(y===d||p[3]>=s)return NaN;for(;y<d&&c.get(y,r)&&p[4]<s;)p[4]++,y++;if(p[4]>=s)return NaN;const E=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(E-l)>=l?NaN:Vt.foundPatternCross(p)?Vt.centerFromEnd(p,y):NaN}handlePossibleCenter(e,r,s,l){const c=e[0]+e[1]+e[2]+e[3]+e[4];let d=Vt.centerFromEnd(e,s),p=this.crossCheckVertical(r,Math.floor(d),e[2],c);if(!isNaN(p)&&(d=this.crossCheckHorizontal(Math.floor(d),Math.floor(p),e[2],c),!isNaN(d)&&(!l||this.crossCheckDiagonal(Math.floor(p),Math.floor(d),e[2],c)))){const y=c/7;let E=!1;const R=this.possibleCenters;for(let P=0,D=R.length;P<D;P++){const z=R[P];if(z.aboutEquals(y,p,d)){R[P]=z.combineEstimate(p,d,y),E=!0;break}}if(!E){const P=new Sn(d,p,y);R.push(P),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(P)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let r=null;for(const s of this.possibleCenters)if(s.getCount()>=Vt.CENTER_QUORUM)if(r==null)r=s;else return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-s.getX())-Math.abs(r.getY()-s.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,r=0;const s=this.possibleCenters.length;for(const d of this.possibleCenters)d.getCount()>=Vt.CENTER_QUORUM&&(e++,r+=d.getEstimatedModuleSize());if(e<3)return!1;const l=r/s;let c=0;for(const d of this.possibleCenters)c+=Math.abs(d.getEstimatedModuleSize()-l);return c<=.05*r}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new $;const r=this.possibleCenters;let s;if(e>3){let l=0,c=0;for(const y of this.possibleCenters){const E=y.getEstimatedModuleSize();l+=E,c+=E*E}s=l/e;let d=Math.sqrt(c/e-s*s);r.sort((y,E)=>{const R=Math.abs(E.getEstimatedModuleSize()-s),P=Math.abs(y.getEstimatedModuleSize()-s);return R<P?-1:R>P?1:0});const p=Math.max(.2*s,d);for(let y=0;y<r.length&&r.length>3;y++){const E=r[y];Math.abs(E.getEstimatedModuleSize()-s)>p&&(r.splice(y,1),y--)}}if(r.length>3){let l=0;for(const c of r)l+=c.getEstimatedModuleSize();s=l/r.length,r.sort((c,d)=>{if(d.getCount()===c.getCount()){const p=Math.abs(d.getEstimatedModuleSize()-s),y=Math.abs(c.getEstimatedModuleSize()-s);return p<y?1:p>y?-1:0}else return d.getCount()-c.getCount()}),r.splice(3)}return[r[0],r[1],r[2]]}}Vt.CENTER_QUORUM=2,Vt.MIN_SKIP=3,Vt.MAX_MODULES=57;class Un{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(ne.NEED_RESULT_POINT_CALLBACK);const s=new Vt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(s)}processFinderPatternInfo(e){const r=e.getTopLeft(),s=e.getTopRight(),l=e.getBottomLeft(),c=this.calculateModuleSize(r,s,l);if(c<1)throw new $("No pattern found in proccess finder.");const d=Un.computeDimension(r,s,l,c),p=ge.getProvisionalVersionForDimension(d),y=p.getDimensionForVersion()-7;let E=null;if(p.getAlignmentPatternCenters().length>0){const z=s.getX()-r.getX()+l.getX(),Z=s.getY()-r.getY()+l.getY(),ee=1-3/y,oe=Math.floor(r.getX()+ee*(z-r.getX())),he=Math.floor(r.getY()+ee*(Z-r.getY()));for(let Fe=4;Fe<=16;Fe<<=1)try{E=this.findAlignmentInRegion(c,oe,he,Fe);break}catch(Ve){if(!(Ve instanceof $))throw Ve}}const R=Un.createTransform(r,s,l,E,d),P=Un.sampleGrid(this.image,R,d);let D;return E===null?D=[l,r,s]:D=[l,r,s,E],new gn(P,D)}static createTransform(e,r,s,l,c){const d=c-3.5;let p,y,E,R;return l!==null?(p=l.getX(),y=l.getY(),E=d-3,R=E):(p=r.getX()-e.getX()+s.getX(),y=r.getY()-e.getY()+s.getY(),E=d,R=d),ze.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,E,R,3.5,d,e.getX(),e.getY(),r.getX(),r.getY(),p,y,s.getX(),s.getY())}static sampleGrid(e,r,s){return Je.getInstance().sampleGridWithTransform(e,s,s,r)}static computeDimension(e,r,s,l){const c=tt.round(Ue.distance(e,r)/l),d=tt.round(Ue.distance(e,s)/l);let p=Math.floor((c+d)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new $("Dimensions could be not found.")}return p}calculateModuleSize(e,r,s){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,s))/2}calculateModuleSizeOneWay(e,r){const s=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(s)?l/7:isNaN(l)?s/7:(s+l)/14}sizeOfBlackWhiteBlackRunBothWays(e,r,s,l){let c=this.sizeOfBlackWhiteBlackRun(e,r,s,l),d=1,p=e-(s-e);p<0?(d=e/(e-p),p=0):p>=this.image.getWidth()&&(d=(this.image.getWidth()-1-e)/(p-e),p=this.image.getWidth()-1);let y=Math.floor(r-(l-r)*d);return d=1,y<0?(d=r/(r-y),y=0):y>=this.image.getHeight()&&(d=(this.image.getHeight()-1-r)/(y-r),y=this.image.getHeight()-1),p=Math.floor(e+(p-e)*d),c+=this.sizeOfBlackWhiteBlackRun(e,r,p,y),c-1}sizeOfBlackWhiteBlackRun(e,r,s,l){const c=Math.abs(l-r)>Math.abs(s-e);if(c){let z=e;e=r,r=z,z=s,s=l,l=z}const d=Math.abs(s-e),p=Math.abs(l-r);let y=-d/2;const E=e<s?1:-1,R=r<l?1:-1;let P=0;const D=s+E;for(let z=e,Z=r;z!==D;z+=E){const ee=c?Z:z,oe=c?z:Z;if(P===1===this.image.get(ee,oe)){if(P===2)return tt.distance(z,Z,e,r);P++}if(y+=p,y>0){if(Z===l)break;Z+=R,y-=d}}return P===2?tt.distance(s+E,l,e,r):NaN}findAlignmentInRegion(e,r,s,l){const c=Math.floor(l*e),d=Math.max(0,r-c),p=Math.min(this.image.getWidth()-1,r+c);if(p-d<e*3)throw new $("Alignment top exceeds estimated module size.");const y=Math.max(0,s-c),E=Math.min(this.image.getHeight()-1,s+c);if(E-y<e*3)throw new $("Alignment bottom exceeds estimated module size.");return new sn(this.image,d,y,p-d,E-y,e,this.resultPointCallback).find()}}class zn{constructor(){this.decoder=new Pi}getDecoder(){return this.decoder}decode(e,r){let s,l;if(r!=null&&r.get(ne.PURE_BARCODE)!==void 0){const y=zn.extractPureBits(e.getBlackMatrix());s=this.decoder.decodeBitMatrix(y,r),l=zn.NO_POINTS}else{const y=new Un(e.getBlackMatrix()).detect(r);s=this.decoder.decodeBitMatrix(y.getBits(),r),l=y.getPoints()}s.getOther()instanceof ns&&s.getOther().applyMirroredCorrection(l);const c=new ae(s.getText(),s.getRawBytes(),void 0,l,te.QR_CODE,void 0),d=s.getByteSegments();d!==null&&c.putMetadata(Se.BYTE_SEGMENTS,d);const p=s.getECLevel();return p!==null&&c.putMetadata(Se.ERROR_CORRECTION_LEVEL,p),s.hasStructuredAppend()&&(c.putMetadata(Se.STRUCTURED_APPEND_SEQUENCE,s.getStructuredAppendSequenceNumber()),c.putMetadata(Se.STRUCTURED_APPEND_PARITY,s.getStructuredAppendParity())),c}reset(){}static extractPureBits(e){const r=e.getTopLeftOnBit(),s=e.getBottomRightOnBit();if(r===null||s===null)throw new $;const l=this.moduleSize(r,e);let c=r[1],d=s[1],p=r[0],y=s[0];if(p>=y||c>=d)throw new $;if(d-c!==y-p&&(y=p+(d-c),y>=e.getWidth()))throw new $;const E=Math.round((y-p+1)/l),R=Math.round((d-c+1)/l);if(E<=0||R<=0)throw new $;if(R!==E)throw new $;const P=Math.floor(l/2);c+=P,p+=P;const D=p+Math.floor((E-1)*l)-y;if(D>0){if(D>P)throw new $;p-=D}const z=c+Math.floor((R-1)*l)-d;if(z>0){if(z>P)throw new $;c-=z}const Z=new Ie(E,R);for(let ee=0;ee<R;ee++){const oe=c+Math.floor(ee*l);for(let he=0;he<E;he++)e.get(p+Math.floor(he*l),oe)&&Z.set(he,ee)}return Z}static moduleSize(e,r){const s=r.getHeight(),l=r.getWidth();let c=e[0],d=e[1],p=!0,y=0;for(;c<l&&d<s;){if(p!==r.get(c,d)){if(++y===5)break;p=!p}c++,d++}if(c===l||d===s)throw new $;return(c-e[0])/7}}zn.NO_POINTS=new Array;class gt{PDF417Common(){}static getBitCountSum(e){return tt.sum(e)}static toIntArray(e){if(e==null||!e.length)return gt.EMPTY_INT_ARRAY;const r=new Int32Array(e.length);let s=0;for(const l of e)r[s++]=l;return r}static getCodeword(e){const r=U.binarySearch(gt.SYMBOL_TABLE,e&262143);return r<0?-1:(gt.CODEWORD_TABLE[r]-1)%gt.NUMBER_OF_CODEWORDS}}gt.NUMBER_OF_CODEWORDS=929,gt.MAX_CODEWORDS_IN_BARCODE=gt.NUMBER_OF_CODEWORDS-1,gt.MIN_ROWS_IN_BARCODE=3,gt.MAX_ROWS_IN_BARCODE=90,gt.MODULES_IN_CODEWORD=17,gt.MODULES_IN_STOP_PATTERN=18,gt.BARS_IN_MODULE=8,gt.EMPTY_INT_ARRAY=new Int32Array([]),gt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),gt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class ll{constructor(e,r){this.bits=e,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class bt{static detectMultiple(e,r,s){let l=e.getBlackMatrix(),c=bt.detect(s,l);return c.length||(l=l.clone(),l.rotate180(),c=bt.detect(s,l)),new ll(l,c)}static detect(e,r){const s=new Array;let l=0,c=0,d=!1;for(;l<r.getHeight();){const p=bt.findVertices(r,l,c);if(p[0]==null&&p[3]==null){if(!d)break;d=!1,c=0;for(const y of s)y[1]!=null&&(l=Math.trunc(Math.max(l,y[1].getY()))),y[3]!=null&&(l=Math.max(l,Math.trunc(y[3].getY())));l+=bt.ROW_STEP;continue}if(d=!0,s.push(p),!e)break;p[2]!=null?(c=Math.trunc(p[2].getX()),l=Math.trunc(p[2].getY())):(c=Math.trunc(p[4].getX()),l=Math.trunc(p[4].getY()))}return s}static findVertices(e,r,s){const l=e.getHeight(),c=e.getWidth(),d=new Array(8);return bt.copyToResult(d,bt.findRowsWithPattern(e,l,c,r,s,bt.START_PATTERN),bt.INDEXES_START_PATTERN),d[4]!=null&&(s=Math.trunc(d[4].getX()),r=Math.trunc(d[4].getY())),bt.copyToResult(d,bt.findRowsWithPattern(e,l,c,r,s,bt.STOP_PATTERN),bt.INDEXES_STOP_PATTERN),d}static copyToResult(e,r,s){for(let l=0;l<s.length;l++)e[s[l]]=r[l]}static findRowsWithPattern(e,r,s,l,c,d){const p=new Array(4);let y=!1;const E=new Int32Array(d.length);for(;l<r;l+=bt.ROW_STEP){let P=bt.findGuardPattern(e,c,l,s,!1,d,E);if(P!=null){for(;l>0;){const D=bt.findGuardPattern(e,c,--l,s,!1,d,E);if(D!=null)P=D;else{l++;break}}p[0]=new Ue(P[0],l),p[1]=new Ue(P[1],l),y=!0;break}}let R=l+1;if(y){let P=0,D=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;R<r;R++){const z=bt.findGuardPattern(e,D[0],R,s,!1,d,E);if(z!=null&&Math.abs(D[0]-z[0])<bt.MAX_PATTERN_DRIFT&&Math.abs(D[1]-z[1])<bt.MAX_PATTERN_DRIFT)D=z,P=0;else{if(P>bt.SKIPPED_ROW_COUNT_MAX)break;P++}}R-=P+1,p[2]=new Ue(D[0],R),p[3]=new Ue(D[1],R)}return R-l<bt.BARCODE_MIN_HEIGHT&&U.fill(p,null),p}static findGuardPattern(e,r,s,l,c,d,p){U.fillWithin(p,0,p.length,0);let y=r,E=0;for(;e.get(y,s)&&y>0&&E++<bt.MAX_PIXEL_DRIFT;)y--;let R=y,P=0,D=d.length;for(let z=c;R<l;R++)if(e.get(R,s)!==z)p[P]++;else{if(P===D-1){if(bt.patternMatchVariance(p,d,bt.MAX_INDIVIDUAL_VARIANCE)<bt.MAX_AVG_VARIANCE)return new Int32Array([y,R]);y+=p[0]+p[1],B.arraycopy(p,2,p,0,P-1),p[P-1]=0,p[P]=0,P--}else P++;p[P]=1,z=!z}return P===D-1&&bt.patternMatchVariance(p,d,bt.MAX_INDIVIDUAL_VARIANCE)<bt.MAX_AVG_VARIANCE?new Int32Array([y,R-1]):null}static patternMatchVariance(e,r,s){let l=e.length,c=0,d=0;for(let E=0;E<l;E++)c+=e[E],d+=r[E];if(c<d)return 1/0;let p=c/d;s*=p;let y=0;for(let E=0;E<l;E++){let R=e[E],P=r[E]*p,D=R>P?R-P:P-R;if(D>s)return 1/0;y+=D}return y/c}}bt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),bt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),bt.MAX_AVG_VARIANCE=.42,bt.MAX_INDIVIDUAL_VARIANCE=.8,bt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),bt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),bt.MAX_PIXEL_DRIFT=3,bt.MAX_PATTERN_DRIFT=5,bt.SKIPPED_ROW_COUNT_MAX=25,bt.ROW_STEP=5,bt.BARCODE_MIN_HEIGHT=10;class Wn{constructor(e,r){if(r.length===0)throw new T;this.field=e;let s=r.length;if(s>1&&r[0]===0){let l=1;for(;l<s&&r[l]===0;)l++;l===s?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(s-l),B.arraycopy(r,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let l=0;for(let c of this.coefficients)l=this.field.add(l,c);return l}let r=this.coefficients[0],s=this.coefficients.length;for(let l=1;l<s;l++)r=this.field.add(this.field.multiply(e,r),this.coefficients[l]);return r}add(e){if(!this.field.equals(e.field))throw new T("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let r=this.coefficients,s=e.coefficients;if(r.length>s.length){let d=r;r=s,s=d}let l=new Int32Array(s.length),c=s.length-r.length;B.arraycopy(s,0,l,0,c);for(let d=c;d<s.length;d++)l[d]=this.field.add(r[d-c],s[d]);return new Wn(this.field,l)}subtract(e){if(!this.field.equals(e.field))throw new T("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof Wn?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new T("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new Wn(this.field,new Int32Array([0]));let r=this.coefficients,s=r.length,l=e.coefficients,c=l.length,d=new Int32Array(s+c-1);for(let p=0;p<s;p++){let y=r[p];for(let E=0;E<c;E++)d[p+E]=this.field.add(d[p+E],this.field.multiply(y,l[E]))}return new Wn(this.field,d)}negative(){let e=this.coefficients.length,r=new Int32Array(e);for(let s=0;s<e;s++)r[s]=this.field.subtract(0,this.coefficients[s]);return new Wn(this.field,r)}multiplyScalar(e){if(e===0)return new Wn(this.field,new Int32Array([0]));if(e===1)return this;let r=this.coefficients.length,s=new Int32Array(r);for(let l=0;l<r;l++)s[l]=this.field.multiply(this.coefficients[l],e);return new Wn(this.field,s)}multiplyByMonomial(e,r){if(e<0)throw new T;if(r===0)return new Wn(this.field,new Int32Array([0]));let s=this.coefficients.length,l=new Int32Array(s+e);for(let c=0;c<s;c++)l[c]=this.field.multiply(this.coefficients[c],r);return new Wn(this.field,l)}toString(){let e=new be;for(let r=this.getDegree();r>=0;r--){let s=this.getCoefficient(r);s!==0&&(s<0?(e.append(" - "),s=-s):e.length()>0&&e.append(" + "),(r===0||s!==1)&&e.append(s),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()}}class cl{add(e,r){return(e+r)%this.modulus}subtract(e,r){return(this.modulus+e-r)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new T;return this.logTable[e]}inverse(e){if(e===0)throw new de;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class rs extends cl{constructor(e,r){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let s=1;for(let l=0;l<e;l++)this.expTable[l]=s,s=s*r%e;for(let l=0;l<e-1;l++)this.logTable[this.expTable[l]]=l;this.zero=new Wn(this,new Int32Array([0])),this.one=new Wn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,r){if(e<0)throw new T;if(r===0)return this.zero;let s=new Int32Array(e+1);return s[0]=r,new Wn(this,s)}}rs.PDF417_GF=new rs(gt.NUMBER_OF_CODEWORDS,3);class Qo{constructor(){this.field=rs.PDF417_GF}decode(e,r,s){let l=new Wn(this.field,e),c=new Int32Array(r),d=!1;for(let Z=r;Z>0;Z--){let ee=l.evaluateAt(this.field.exp(Z));c[r-Z]=ee,ee!==0&&(d=!0)}if(!d)return 0;let p=this.field.getOne();if(s!=null)for(const Z of s){let ee=this.field.exp(e.length-1-Z),oe=new Wn(this.field,new Int32Array([this.field.subtract(0,ee),1]));p=p.multiply(oe)}let y=new Wn(this.field,c),E=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),y,r),R=E[0],P=E[1],D=this.findErrorLocations(R),z=this.findErrorMagnitudes(P,R,D);for(let Z=0;Z<D.length;Z++){let ee=e.length-1-this.field.log(D[Z]);if(ee<0)throw O.getChecksumInstance();e[ee]=this.field.subtract(e[ee],z[Z])}return D.length}runEuclideanAlgorithm(e,r,s){if(e.getDegree()<r.getDegree()){let D=e;e=r,r=D}let l=e,c=r,d=this.field.getZero(),p=this.field.getOne();for(;c.getDegree()>=Math.round(s/2);){let D=l,z=d;if(l=c,d=p,l.isZero())throw O.getChecksumInstance();c=D;let Z=this.field.getZero(),ee=l.getCoefficient(l.getDegree()),oe=this.field.inverse(ee);for(;c.getDegree()>=l.getDegree()&&!c.isZero();){let he=c.getDegree()-l.getDegree(),Fe=this.field.multiply(c.getCoefficient(c.getDegree()),oe);Z=Z.add(this.field.buildMonomial(he,Fe)),c=c.subtract(l.multiplyByMonomial(he,Fe))}p=Z.multiply(d).subtract(z).negative()}let y=p.getCoefficient(0);if(y===0)throw O.getChecksumInstance();let E=this.field.inverse(y),R=p.multiply(E),P=c.multiply(E);return[R,P]}findErrorLocations(e){let r=e.getDegree(),s=new Int32Array(r),l=0;for(let c=1;c<this.field.getSize()&&l<r;c++)e.evaluateAt(c)===0&&(s[l]=this.field.inverse(c),l++);if(l!==r)throw O.getChecksumInstance();return s}findErrorMagnitudes(e,r,s){let l=r.getDegree(),c=new Int32Array(l);for(let E=1;E<=l;E++)c[l-E]=this.field.multiply(E,r.getCoefficient(E));let d=new Wn(this.field,c),p=s.length,y=new Int32Array(p);for(let E=0;E<p;E++){let R=this.field.inverse(s[E]),P=this.field.subtract(0,e.evaluateAt(R)),D=this.field.inverse(d.evaluateAt(R));y[E]=this.field.multiply(P,D)}return y}}class Oi{constructor(e,r,s,l,c){e instanceof Oi?this.constructor_2(e):this.constructor_1(e,r,s,l,c)}constructor_1(e,r,s,l,c){const d=r==null||s==null,p=l==null||c==null;if(d&&p)throw new $;d?(r=new Ue(0,l.getY()),s=new Ue(0,c.getY())):p&&(l=new Ue(e.getWidth()-1,r.getY()),c=new Ue(e.getWidth()-1,s.getY())),this.image=e,this.topLeft=r,this.bottomLeft=s,this.topRight=l,this.bottomRight=c,this.minX=Math.trunc(Math.min(r.getX(),s.getX())),this.maxX=Math.trunc(Math.max(l.getX(),c.getX())),this.minY=Math.trunc(Math.min(r.getY(),l.getY())),this.maxY=Math.trunc(Math.max(s.getY(),c.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,r){return e==null?r:r==null?e:new Oi(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)}addMissingRows(e,r,s){let l=this.topLeft,c=this.bottomLeft,d=this.topRight,p=this.bottomRight;if(e>0){let y=s?this.topLeft:this.topRight,E=Math.trunc(y.getY()-e);E<0&&(E=0);let R=new Ue(y.getX(),E);s?l=R:d=R}if(r>0){let y=s?this.bottomLeft:this.bottomRight,E=Math.trunc(y.getY()+r);E>=this.image.getHeight()&&(E=this.image.getHeight()-1);let R=new Ue(y.getX(),E);s?c=R:p=R}return new Oi(this.image,l,c,d,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ps{constructor(e,r,s,l){this.columnCount=e,this.errorCorrectionLevel=l,this.rowCountUpperPart=r,this.rowCountLowerPart=s,this.rowCount=r+s}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ri{constructor(){this.buffer=""}static form(e,r){let s=-1;function l(d,p,y,E,R,P){if(d==="%%")return"%";if(r[++s]===void 0)return;d=E?parseInt(E.substr(1)):void 0;let D=R?parseInt(R.substr(1)):void 0,z;switch(P){case"s":z=r[s];break;case"c":z=r[s][0];break;case"f":z=parseFloat(r[s]).toFixed(d);break;case"p":z=parseFloat(r[s]).toPrecision(d);break;case"e":z=parseFloat(r[s]).toExponential(d);break;case"x":z=parseInt(r[s]).toString(D||16);break;case"d":z=parseFloat(parseInt(r[s],D||10).toPrecision(d)).toFixed(0);break}z=typeof z=="object"?JSON.stringify(z):(+z).toString(D);let Z=parseInt(y),ee=y&&y[0]+""=="0"?"0":" ";for(;z.length<Z;)z=p!==void 0?z+ee:ee+z;return z}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(c,l)}format(e,...r){this.buffer+=ri.form(e,r)}toString(){return this.buffer}}class Xr{constructor(e){this.boundingBox=new Oi(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let r=this.getCodeword(e);if(r!=null)return r;for(let s=1;s<Xr.MAX_NEARBY_DISTANCE;s++){let l=this.imageRowToCodewordIndex(e)-s;if(l>=0&&(r=this.codewords[l],r!=null)||(l=this.imageRowToCodewordIndex(e)+s,l<this.codewords.length&&(r=this.codewords[l],r!=null)))return r}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new ri;let r=0;for(const s of this.codewords){if(s==null){e.format("%3d:    |   %n",r++);continue}e.format("%3d: %3d|%3d%n",r++,s.getRowNumber(),s.getValue())}return e.toString()}}Xr.MAX_NEARBY_DISTANCE=5;class pi{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)}getValue(){let e=-1,r=new Array;for(const[s,l]of this.values.entries()){const c={getKey:()=>s,getValue:()=>l};c.getValue()>e?(e=c.getValue(),r=[],r.push(c.getKey())):c.getValue()===e&&r.push(c.getKey())}return gt.toIntArray(r)}getConfidence(e){return this.values.get(e)}}class ul extends Xr{constructor(e,r){super(e),this._isLeft=r}setRowNumbers(){for(let e of this.getCodewords())e!=null&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,e);let s=this.getBoundingBox(),l=this._isLeft?s.getTopLeft():s.getTopRight(),c=this._isLeft?s.getBottomLeft():s.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),p=this.imageRowToCodewordIndex(Math.trunc(c.getY())),y=-1,E=1,R=0;for(let P=d;P<p;P++){if(r[P]==null)continue;let D=r[P],z=D.getRowNumber()-y;if(z===0)R++;else if(z===1)E=Math.max(E,R),R=1,y=D.getRowNumber();else if(z<0||D.getRowNumber()>=e.getRowCount()||z>P)r[P]=null;else{let Z;E>2?Z=(E-2)*z:Z=z;let ee=Z>=P;for(let oe=1;oe<=Z&&!ee;oe++)ee=r[P-oe]!=null;ee?r[P]=null:(y=D.getRowNumber(),R=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let r=new Int32Array(e.getRowCount());for(let s of this.getCodewords())if(s!=null){let l=s.getRowNumber();if(l>=r.length)continue;r[l]++}return r}adjustIncompleteIndicatorColumnRowNumbers(e){let r=this.getBoundingBox(),s=this._isLeft?r.getTopLeft():r.getTopRight(),l=this._isLeft?r.getBottomLeft():r.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),p=this.getCodewords(),y=-1;for(let E=c;E<d;E++){if(p[E]==null)continue;let R=p[E];R.setRowNumberAsRowIndicatorColumn();let P=R.getRowNumber()-y;P===0||(P===1?y=R.getRowNumber():R.getRowNumber()>=e.getRowCount()?p[E]=null:y=R.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),r=new pi,s=new pi,l=new pi,c=new pi;for(let p of e){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let y=p.getValue()%30,E=p.getRowNumber();switch(this._isLeft||(E+=2),E%3){case 0:s.setValue(y*3+1);break;case 1:c.setValue(y/3),l.setValue(y%3);break;case 2:r.setValue(y+1);break}}if(r.getValue().length===0||s.getValue().length===0||l.getValue().length===0||c.getValue().length===0||r.getValue()[0]<1||s.getValue()[0]+l.getValue()[0]<gt.MIN_ROWS_IN_BARCODE||s.getValue()[0]+l.getValue()[0]>gt.MAX_ROWS_IN_BARCODE)return null;let d=new Ps(r.getValue()[0],s.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(e,d),d}removeIncorrectCodewords(e,r){for(let s=0;s<e.length;s++){let l=e[s];if(e[s]==null)continue;let c=l.getValue()%30,d=l.getRowNumber();if(d>r.getRowCount()){e[s]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:c*3+1!==r.getRowCountUpperPart()&&(e[s]=null);break;case 1:(Math.trunc(c/3)!==r.getErrorCorrectionLevel()||c%3!==r.getRowCountLowerPart())&&(e[s]=null);break;case 2:c+1!==r.getColumnCount()&&(e[s]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ms{constructor(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=gt.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let r=1;r<this.barcodeColumnCount+1;r++){let s=this.detectionResultColumns[r].getCodewords();for(let l=0;l<s.length;l++)s[l]!=null&&(s[l].hasValidRowNumber()||this.adjustRowNumbers(r,l,s))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let s=0;s<e.length;s++)if(e[s]!=null&&r[s]!=null&&e[s].getRowNumber()===r[s].getRowNumber())for(let l=1;l<=this.barcodeColumnCount;l++){let c=this.detectionResultColumns[l].getCodewords()[s];c!=null&&(c.setRowNumber(e[s].getRowNumber()),c.hasValidRowNumber()||(this.detectionResultColumns[l].getCodewords()[s]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let s=0;s<r.length;s++){if(r[s]==null)continue;let l=r[s].getRowNumber(),c=0;for(let d=this.barcodeColumnCount+1;d>0&&c<this.ADJUST_ROW_NUMBER_SKIP;d--){let p=this.detectionResultColumns[d].getCodewords()[s];p!=null&&(c=Ms.adjustRowNumberIfValid(l,c,p),p.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,r=this.detectionResultColumns[0].getCodewords();for(let s=0;s<r.length;s++){if(r[s]==null)continue;let l=r[s].getRowNumber(),c=0;for(let d=1;d<this.barcodeColumnCount+1&&c<this.ADJUST_ROW_NUMBER_SKIP;d++){let p=this.detectionResultColumns[d].getCodewords()[s];p!=null&&(c=Ms.adjustRowNumberIfValid(l,c,p),p.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,r,s){return s==null||s.hasValidRowNumber()||(s.isValidRowNumber(e)?(s.setRowNumber(e),r=0):++r),r}adjustRowNumbers(e,r,s){if(!this.detectionResultColumns[e-1])return;let l=s[r],c=this.detectionResultColumns[e-1].getCodewords(),d=c;this.detectionResultColumns[e+1]!=null&&(d=this.detectionResultColumns[e+1].getCodewords());let p=new Array(14);p[2]=c[r],p[3]=d[r],r>0&&(p[0]=s[r-1],p[4]=c[r-1],p[5]=d[r-1]),r>1&&(p[8]=s[r-2],p[10]=c[r-2],p[11]=d[r-2]),r<s.length-1&&(p[1]=s[r+1],p[6]=c[r+1],p[7]=d[r+1]),r<s.length-2&&(p[9]=s[r+2],p[12]=c[r+2],p[13]=d[r+2]);for(let y of p)if(Ms.adjustRowNumber(l,y))return}static adjustRowNumber(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,r){this.detectionResultColumns[e]=r}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let r=new ri;for(let s=0;s<e.getCodewords().length;s++){r.format("CW %3d:",s);for(let l=0;l<this.barcodeColumnCount+2;l++){if(this.detectionResultColumns[l]==null){r.format("    |   ");continue}let c=this.detectionResultColumns[l].getCodewords()[s];if(c==null){r.format("    |   ");continue}r.format(" %3d|%3d",c.getRowNumber(),c.getValue())}r.format("%n")}return r.toString()}}class Di{constructor(e,r,s,l){this.rowNumber=Di.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(s),this.value=Math.trunc(l)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==Di.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}Di.BARCODE_ROW_UNKNOWN=-1;class Hn{static initialize(){for(let e=0;e<gt.SYMBOL_TABLE.length;e++){let r=gt.SYMBOL_TABLE[e],s=r&1;for(let l=0;l<gt.BARS_IN_MODULE;l++){let c=0;for(;(r&1)===s;)c+=1,r>>=1;s=r&1,Hn.RATIOS_TABLE[e]||(Hn.RATIOS_TABLE[e]=new Array(gt.BARS_IN_MODULE)),Hn.RATIOS_TABLE[e][gt.BARS_IN_MODULE-l-1]=Math.fround(c/gt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let r=Hn.getDecodedCodewordValue(Hn.sampleBitCounts(e));return r!==-1?r:Hn.getClosestDecodedValue(e)}static sampleBitCounts(e){let r=tt.sum(e),s=new Int32Array(gt.BARS_IN_MODULE),l=0,c=0;for(let d=0;d<gt.MODULES_IN_CODEWORD;d++){let p=r/(2*gt.MODULES_IN_CODEWORD)+d*r/gt.MODULES_IN_CODEWORD;c+e[l]<=p&&(c+=e[l],l++),s[l]++}return s}static getDecodedCodewordValue(e){let r=Hn.getBitValue(e);return gt.getCodeword(r)===-1?-1:r}static getBitValue(e){let r=0;for(let s=0;s<e.length;s++)for(let l=0;l<e[s];l++)r=r<<1|(s%2===0?1:0);return Math.trunc(r)}static getClosestDecodedValue(e){let r=tt.sum(e),s=new Array(gt.BARS_IN_MODULE);if(r>1)for(let d=0;d<s.length;d++)s[d]=Math.fround(e[d]/r);let l=jt.MAX_VALUE,c=-1;this.bSymbolTableReady||Hn.initialize();for(let d=0;d<Hn.RATIOS_TABLE.length;d++){let p=0,y=Hn.RATIOS_TABLE[d];for(let E=0;E<gt.BARS_IN_MODULE;E++){let R=Math.fround(y[E]-s[E]);if(p+=Math.fround(R*R),p>=l)break}p<l&&(l=p,c=gt.SYMBOL_TABLE[d])}return c}}Hn.bSymbolTableReady=!1,Hn.RATIOS_TABLE=new Array(gt.SYMBOL_TABLE.length).map(k=>new Array(gt.BARS_IN_MODULE));class mo{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class Jo{static parseLong(e,r=void 0){return parseInt(e,r)}}class ii extends C{}ii.kind="NullPointerException";class ea{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,r,s){if(e==null)throw new ii;if(r<0||r>e.length||s<0||r+s>e.length||r+s<0)throw new j;if(s===0)return;for(let l=0;l<s;l++)this.write(e[r+l])}flush(){}close(){}}class po extends C{}class dl extends ea{constructor(e=32){if(super(),this.count=0,e<0)throw new T("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let s=this.buf.length<<1;if(s-e<0&&(s=e),s<0){if(e<0)throw new po;s=F.MAX_VALUE}this.buf=U.copyOfUint8Array(this.buf,s)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,r,s){if(r<0||r>e.length||s<0||r+s-e.length>0)throw new j;this.ensureCapacity(this.count+s),B.arraycopy(e,r,this.buf,this.count,s),this.count+=s}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return U.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var Ut;(function(k){k[k.ALPHA=0]="ALPHA",k[k.LOWER=1]="LOWER",k[k.MIXED=2]="MIXED",k[k.PUNCT=3]="PUNCT",k[k.ALPHA_SHIFT=4]="ALPHA_SHIFT",k[k.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ut||(Ut={}));function Os(){if(typeof window<"u")return window.BigInt||null;if(typeof lc<"u")return lc.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ds;function An(k){if(typeof Ds>"u"&&(Ds=Os()),Ds===null)throw new Error("BigInt is not supported!");return Ds(k)}function is(){let k=[];k[0]=An(1);let e=An(900);k[1]=e;for(let r=2;r<16;r++)k[r]=k[r-1]*e;return k}class me{static decode(e,r){let s=new be(""),l=J.ISO8859_1;s.enableDecoding(l);let c=1,d=e[c++],p=new mo;for(;c<e[0];){switch(d){case me.TEXT_COMPACTION_MODE_LATCH:c=me.textCompaction(e,c,s);break;case me.BYTE_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:c=me.byteCompaction(d,e,l,c,s);break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(e[c++]);break;case me.NUMERIC_COMPACTION_MODE_LATCH:c=me.numericCompaction(e,c,s);break;case me.ECI_CHARSET:J.getCharacterSetECIByValue(e[c++]);break;case me.ECI_GENERAL_PURPOSE:c+=2;break;case me.ECI_USER_DEFINED:c++;break;case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:c=me.decodeMacroBlock(e,c,p);break;case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:throw new q;default:c--,c=me.textCompaction(e,c,s);break}if(c<e.length)d=e[c++];else throw q.getFormatInstance()}if(s.length()===0)throw q.getFormatInstance();let y=new Le(null,s.toString(),null,r);return y.setOther(p),y}static decodeMacroBlock(e,r,s){if(r+me.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw q.getFormatInstance();let l=new Int32Array(me.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<me.NUMBER_OF_SEQUENCE_CODEWORDS;p++,r++)l[p]=e[r];s.setSegmentIndex(F.parseInt(me.decodeBase900toBase10(l,me.NUMBER_OF_SEQUENCE_CODEWORDS)));let c=new be;r=me.textCompaction(e,r,c),s.setFileId(c.toString());let d=-1;for(e[r]===me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=r+1);r<e[0];)switch(e[r]){case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case me.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new be;r=me.textCompaction(e,r+1,p),s.setFileName(p.toString());break;case me.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let y=new be;r=me.textCompaction(e,r+1,y),s.setSender(y.toString());break;case me.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let E=new be;r=me.textCompaction(e,r+1,E),s.setAddressee(E.toString());break;case me.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let R=new be;r=me.numericCompaction(e,r+1,R),s.setSegmentCount(F.parseInt(R.toString()));break;case me.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let P=new be;r=me.numericCompaction(e,r+1,P),s.setTimestamp(Jo.parseLong(P.toString()));break;case me.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let D=new be;r=me.numericCompaction(e,r+1,D),s.setChecksum(F.parseInt(D.toString()));break;case me.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let z=new be;r=me.numericCompaction(e,r+1,z),s.setFileSize(Jo.parseLong(z.toString()));break;default:throw q.getFormatInstance()}break;case me.MACRO_PDF417_TERMINATOR:r++,s.setLastSegment(!0);break;default:throw q.getFormatInstance()}if(d!==-1){let p=r-d;s.isLastSegment()&&p--,s.setOptionalData(U.copyOfRange(e,d,d+p))}return r}static textCompaction(e,r,s){let l=new Int32Array((e[0]-r)*2),c=new Int32Array((e[0]-r)*2),d=0,p=!1;for(;r<e[0]&&!p;){let y=e[r++];if(y<me.TEXT_COMPACTION_MODE_LATCH)l[d]=y/30,l[d+1]=y%30,d+=2;else switch(y){case me.TEXT_COMPACTION_MODE_LATCH:l[d++]=me.TEXT_COMPACTION_MODE_LATCH;break;case me.BYTE_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:case me.NUMERIC_COMPACTION_MODE_LATCH:case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:r--,p=!0;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l[d]=me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,y=e[r++],c[d]=y,d++;break}}return me.decodeTextCompaction(l,c,d,s),r}static decodeTextCompaction(e,r,s,l){let c=Ut.ALPHA,d=Ut.ALPHA,p=0;for(;p<s;){let y=e[p],E="";switch(c){case Ut.ALPHA:if(y<26)E=String.fromCharCode(65+y);else switch(y){case 26:E=" ";break;case me.LL:c=Ut.LOWER;break;case me.ML:c=Ut.MIXED;break;case me.PS:d=c,c=Ut.PUNCT_SHIFT;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[p]);break;case me.TEXT_COMPACTION_MODE_LATCH:c=Ut.ALPHA;break}break;case Ut.LOWER:if(y<26)E=String.fromCharCode(97+y);else switch(y){case 26:E=" ";break;case me.AS:d=c,c=Ut.ALPHA_SHIFT;break;case me.ML:c=Ut.MIXED;break;case me.PS:d=c,c=Ut.PUNCT_SHIFT;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[p]);break;case me.TEXT_COMPACTION_MODE_LATCH:c=Ut.ALPHA;break}break;case Ut.MIXED:if(y<me.PL)E=me.MIXED_CHARS[y];else switch(y){case me.PL:c=Ut.PUNCT;break;case 26:E=" ";break;case me.LL:c=Ut.LOWER;break;case me.AL:c=Ut.ALPHA;break;case me.PS:d=c,c=Ut.PUNCT_SHIFT;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[p]);break;case me.TEXT_COMPACTION_MODE_LATCH:c=Ut.ALPHA;break}break;case Ut.PUNCT:if(y<me.PAL)E=me.PUNCT_CHARS[y];else switch(y){case me.PAL:c=Ut.ALPHA;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[p]);break;case me.TEXT_COMPACTION_MODE_LATCH:c=Ut.ALPHA;break}break;case Ut.ALPHA_SHIFT:if(c=d,y<26)E=String.fromCharCode(65+y);else switch(y){case 26:E=" ";break;case me.TEXT_COMPACTION_MODE_LATCH:c=Ut.ALPHA;break}break;case Ut.PUNCT_SHIFT:if(c=d,y<me.PAL)E=me.PUNCT_CHARS[y];else switch(y){case me.PAL:c=Ut.ALPHA;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[p]);break;case me.TEXT_COMPACTION_MODE_LATCH:c=Ut.ALPHA;break}break}E!==""&&l.append(E),p++}}static byteCompaction(e,r,s,l,c){let d=new dl,p=0,y=0,E=!1;switch(e){case me.BYTE_COMPACTION_MODE_LATCH:let R=new Int32Array(6),P=r[l++];for(;l<r[0]&&!E;)switch(R[p++]=P,y=900*y+P,P=r[l++],P){case me.TEXT_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH:case me.NUMERIC_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:l--,E=!0;break;default:if(p%5===0&&p>0){for(let D=0;D<6;++D)d.write(Number(An(y)>>An(8*(5-D))));y=0,p=0}break}l===r[0]&&P<me.TEXT_COMPACTION_MODE_LATCH&&(R[p++]=P);for(let D=0;D<p;D++)d.write(R[D]);break;case me.BYTE_COMPACTION_MODE_LATCH_6:for(;l<r[0]&&!E;){let D=r[l++];if(D<me.TEXT_COMPACTION_MODE_LATCH)p++,y=900*y+D;else switch(D){case me.TEXT_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH:case me.NUMERIC_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:l--,E=!0;break}if(p%5===0&&p>0){for(let z=0;z<6;++z)d.write(Number(An(y)>>An(8*(5-z))));y=0,p=0}}break}return c.append(Re.decode(d.toByteArray(),s)),l}static numericCompaction(e,r,s){let l=0,c=!1,d=new Int32Array(me.MAX_NUMERIC_CODEWORDS);for(;r<e[0]&&!c;){let p=e[r++];if(r===e[0]&&(c=!0),p<me.TEXT_COMPACTION_MODE_LATCH)d[l]=p,l++;else switch(p){case me.TEXT_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:r--,c=!0;break}(l%me.MAX_NUMERIC_CODEWORDS===0||p===me.NUMERIC_COMPACTION_MODE_LATCH||c)&&l>0&&(s.append(me.decodeBase900toBase10(d,l)),l=0)}return r}static decodeBase900toBase10(e,r){let s=An(0);for(let c=0;c<r;c++)s+=me.EXP900[r-c-1]*An(e[c]);let l=s.toString();if(l.charAt(0)!=="1")throw new q;return l.substring(1)}}me.TEXT_COMPACTION_MODE_LATCH=900,me.BYTE_COMPACTION_MODE_LATCH=901,me.NUMERIC_COMPACTION_MODE_LATCH=902,me.BYTE_COMPACTION_MODE_LATCH_6=924,me.ECI_USER_DEFINED=925,me.ECI_GENERAL_PURPOSE=926,me.ECI_CHARSET=927,me.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,me.MACRO_PDF417_TERMINATOR=922,me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,me.MAX_NUMERIC_CODEWORDS=15,me.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,me.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,me.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,me.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,me.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,me.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,me.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,me.PL=25,me.LL=27,me.AS=27,me.ML=28,me.AL=28,me.PS=29,me.PAL=29,me.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,me.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",me.EXP900=Os()?is():[],me.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Nt{constructor(){}static decode(e,r,s,l,c,d,p){let y=new Oi(e,r,s,l,c),E=null,R=null,P;for(let Z=!0;;Z=!1){if(r!=null&&(E=Nt.getRowIndicatorColumn(e,y,r,!0,d,p)),l!=null&&(R=Nt.getRowIndicatorColumn(e,y,l,!1,d,p)),P=Nt.merge(E,R),P==null)throw $.getNotFoundInstance();let ee=P.getBoundingBox();if(Z&&ee!=null&&(ee.getMinY()<y.getMinY()||ee.getMaxY()>y.getMaxY()))y=ee;else break}P.setBoundingBox(y);let D=P.getBarcodeColumnCount()+1;P.setDetectionResultColumn(0,E),P.setDetectionResultColumn(D,R);let z=E!=null;for(let Z=1;Z<=D;Z++){let ee=z?Z:D-Z;if(P.getDetectionResultColumn(ee)!==void 0)continue;let oe;ee===0||ee===D?oe=new ul(y,ee===0):oe=new Xr(y),P.setDetectionResultColumn(ee,oe);let he=-1,Fe=he;for(let Ve=y.getMinY();Ve<=y.getMaxY();Ve++){if(he=Nt.getStartColumn(P,ee,Ve,z),he<0||he>y.getMaxX()){if(Fe===-1)continue;he=Fe}let Pe=Nt.detectCodeword(e,y.getMinX(),y.getMaxX(),z,he,Ve,d,p);Pe!=null&&(oe.setCodeword(Ve,Pe),Fe=he,d=Math.min(d,Pe.getWidth()),p=Math.max(p,Pe.getWidth()))}}return Nt.createDecoderResult(P)}static merge(e,r){if(e==null&&r==null)return null;let s=Nt.getBarcodeMetadata(e,r);if(s==null)return null;let l=Oi.merge(Nt.adjustBoundingBox(e),Nt.adjustBoundingBox(r));return new Ms(s,l)}static adjustBoundingBox(e){if(e==null)return null;let r=e.getRowHeights();if(r==null)return null;let s=Nt.getMax(r),l=0;for(let p of r)if(l+=s-p,p>0)break;let c=e.getCodewords();for(let p=0;l>0&&c[p]==null;p++)l--;let d=0;for(let p=r.length-1;p>=0&&(d+=s-r[p],!(r[p]>0));p--);for(let p=c.length-1;d>0&&c[p]==null;p--)d--;return e.getBoundingBox().addMissingRows(l,d,e.isLeft())}static getMax(e){let r=-1;for(let s of e)r=Math.max(r,s);return r}static getBarcodeMetadata(e,r){let s;if(e==null||(s=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();let l;return r==null||(l=r.getBarcodeMetadata())==null?s:s.getColumnCount()!==l.getColumnCount()&&s.getErrorCorrectionLevel()!==l.getErrorCorrectionLevel()&&s.getRowCount()!==l.getRowCount()?null:s}static getRowIndicatorColumn(e,r,s,l,c,d){let p=new ul(r,l);for(let y=0;y<2;y++){let E=y===0?1:-1,R=Math.trunc(Math.trunc(s.getX()));for(let P=Math.trunc(Math.trunc(s.getY()));P<=r.getMaxY()&&P>=r.getMinY();P+=E){let D=Nt.detectCodeword(e,0,e.getWidth(),l,R,P,c,d);D!=null&&(p.setCodeword(P,D),l?R=D.getStartX():R=D.getEndX())}}return p}static adjustCodewordCount(e,r){let s=r[0][1],l=s.getValue(),c=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-Nt.getNumberOfECCodeWords(e.getBarcodeECLevel());if(l.length===0){if(c<1||c>gt.MAX_CODEWORDS_IN_BARCODE)throw $.getNotFoundInstance();s.setValue(c)}else l[0]!==c&&s.setValue(c)}static createDecoderResult(e){let r=Nt.createBarcodeMatrix(e);Nt.adjustCodewordCount(e,r);let s=new Array,l=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),c=[],d=new Array;for(let y=0;y<e.getBarcodeRowCount();y++)for(let E=0;E<e.getBarcodeColumnCount();E++){let R=r[y][E+1].getValue(),P=y*e.getBarcodeColumnCount()+E;R.length===0?s.push(P):R.length===1?l[P]=R[0]:(d.push(P),c.push(R))}let p=new Array(c.length);for(let y=0;y<p.length;y++)p[y]=c[y];return Nt.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),l,gt.toIntArray(s),gt.toIntArray(d),p)}static createDecoderResultFromAmbiguousValues(e,r,s,l,c){let d=new Int32Array(l.length),p=100;for(;p-- >0;){for(let y=0;y<d.length;y++)r[l[y]]=c[y][d[y]];try{return Nt.decodeCodewords(r,e,s)}catch(y){if(!(y instanceof O))throw y}if(d.length===0)throw O.getChecksumInstance();for(let y=0;y<d.length;y++)if(d[y]<c[y].length-1){d[y]++;break}else if(d[y]=0,y===d.length-1)throw O.getChecksumInstance()}throw O.getChecksumInstance()}static createBarcodeMatrix(e){let r=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let l=0;l<r.length;l++)for(let c=0;c<r[l].length;c++)r[l][c]=new pi;let s=0;for(let l of e.getDetectionResultColumns()){if(l!=null){for(let c of l.getCodewords())if(c!=null){let d=c.getRowNumber();if(d>=0){if(d>=r.length)continue;r[d][s].setValue(c.getValue())}}}s++}return r}static isValidBarcodeColumn(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1}static getStartColumn(e,r,s,l){let c=l?1:-1,d=null;if(Nt.isValidBarcodeColumn(e,r-c)&&(d=e.getDetectionResultColumn(r-c).getCodeword(s)),d!=null)return l?d.getEndX():d.getStartX();if(d=e.getDetectionResultColumn(r).getCodewordNearby(s),d!=null)return l?d.getStartX():d.getEndX();if(Nt.isValidBarcodeColumn(e,r-c)&&(d=e.getDetectionResultColumn(r-c).getCodewordNearby(s)),d!=null)return l?d.getEndX():d.getStartX();let p=0;for(;Nt.isValidBarcodeColumn(e,r-c);){r-=c;for(let y of e.getDetectionResultColumn(r).getCodewords())if(y!=null)return(l?y.getEndX():y.getStartX())+c*p*(y.getEndX()-y.getStartX());p++}return l?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,r,s,l,c,d,p,y){c=Nt.adjustCodewordStartColumn(e,r,s,l,c,d);let E=Nt.getModuleBitCount(e,r,s,l,c,d);if(E==null)return null;let R,P=tt.sum(E);if(l)R=c+P;else{for(let Z=0;Z<E.length/2;Z++){let ee=E[Z];E[Z]=E[E.length-1-Z],E[E.length-1-Z]=ee}R=c,c=R-P}if(!Nt.checkCodewordSkew(P,p,y))return null;let D=Hn.getDecodedValue(E),z=gt.getCodeword(D);return z===-1?null:new Di(c,R,Nt.getCodewordBucketNumber(D),z)}static getModuleBitCount(e,r,s,l,c,d){let p=c,y=new Int32Array(8),E=0,R=l?1:-1,P=l;for(;(l?p<s:p>=r)&&E<y.length;)e.get(p,d)===P?(y[E]++,p+=R):(E++,P=!P);return E===y.length||p===(l?s:r)&&E===y.length-1?y:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,r,s,l,c,d){let p=c,y=l?-1:1;for(let E=0;E<2;E++){for(;(l?p>=r:p<s)&&l===e.get(p,d);){if(Math.abs(c-p)>Nt.CODEWORD_SKEW_SIZE)return c;p+=y}y=-y,l=!l}return p}static checkCodewordSkew(e,r,s){return r-Nt.CODEWORD_SKEW_SIZE<=e&&e<=s+Nt.CODEWORD_SKEW_SIZE}static decodeCodewords(e,r,s){if(e.length===0)throw q.getFormatInstance();let l=1<<r+1,c=Nt.correctErrors(e,s,l);Nt.verifyCodewordCount(e,l);let d=me.decode(e,""+r);return d.setErrorsCorrected(c),d.setErasures(s.length),d}static correctErrors(e,r,s){if(r!=null&&r.length>s/2+Nt.MAX_ERRORS||s<0||s>Nt.MAX_EC_CODEWORDS)throw O.getChecksumInstance();return Nt.errorCorrection.decode(e,s,r)}static verifyCodewordCount(e,r){if(e.length<4)throw q.getFormatInstance();let s=e[0];if(s>e.length)throw q.getFormatInstance();if(s===0)if(r<e.length)e[0]=e.length-r;else throw q.getFormatInstance()}static getBitCountForCodeword(e){let r=new Int32Array(8),s=0,l=r.length-1;for(;!((e&1)!==s&&(s=e&1,l--,l<0));)r[l]++,e>>=1;return r}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return Nt.getCodewordBucketNumber(Nt.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let r=new ri;for(let s=0;s<e.length;s++){r.format("Row %2d: ",s);for(let l=0;l<e[s].length;l++){let c=e[s][l];c.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",c.getValue()[0],c.getConfidence(c.getValue()[0]))}r.format("%n")}return r.toString()}}Nt.CODEWORD_SKEW_SIZE=2,Nt.MAX_ERRORS=3,Nt.MAX_EC_CODEWORDS=512,Nt.errorCorrection=new Qo;class Gn{decode(e,r=null){let s=Gn.decode(e,r,!1);if(s==null||s.length===0||s[0]==null)throw $.getNotFoundInstance();return s[0]}decodeMultiple(e,r=null){try{return Gn.decode(e,r,!0)}catch(s){throw s instanceof q||s instanceof O?$.getNotFoundInstance():s}}static decode(e,r,s){const l=new Array,c=bt.detectMultiple(e,r,s);for(const d of c.getPoints()){const p=Nt.decode(c.getBits(),d[4],d[5],d[6],d[7],Gn.getMinCodewordWidth(d),Gn.getMaxCodewordWidth(d)),y=new ae(p.getText(),p.getRawBytes(),void 0,d,te.PDF_417);y.putMetadata(Se.ERROR_CORRECTION_LEVEL,p.getECLevel());const E=p.getOther();E!=null&&y.putMetadata(Se.PDF417_EXTRA_METADATA,E),l.push(y)}return l.map(d=>d)}static getMaxWidth(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))}static getMinWidth(e,r){return e==null||r==null?F.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(Gn.getMaxWidth(e[0],e[4]),Gn.getMaxWidth(e[6],e[2])*gt.MODULES_IN_CODEWORD/gt.MODULES_IN_STOP_PATTERN),Math.max(Gn.getMaxWidth(e[1],e[5]),Gn.getMaxWidth(e[7],e[3])*gt.MODULES_IN_CODEWORD/gt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(Gn.getMinWidth(e[0],e[4]),Gn.getMinWidth(e[6],e[2])*gt.MODULES_IN_CODEWORD/gt.MODULES_IN_STOP_PATTERN),Math.min(Gn.getMinWidth(e[1],e[5]),Gn.getMinWidth(e[7],e[3])*gt.MODULES_IN_CODEWORD/gt.MODULES_IN_STOP_PATTERN)))}reset(){}}class ss extends C{}ss.kind="ReaderException";class go{constructor(e,r){this.verbose=e===!0,r&&this.setHints(r)}decode(e,r){return r&&this.setHints(r),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const r=!u(e)&&e.get(ne.TRY_HARDER)===!0,s=u(e)?null:e.get(ne.POSSIBLE_FORMATS),l=new Array;if(!u(s)){const c=s.some(d=>d===te.UPC_A||d===te.UPC_E||d===te.EAN_13||d===te.EAN_8||d===te.CODABAR||d===te.CODE_39||d===te.CODE_93||d===te.CODE_128||d===te.ITF||d===te.RSS_14||d===te.RSS_EXPANDED);c&&!r&&l.push(new hi(e,this.verbose)),s.includes(te.QR_CODE)&&l.push(new zn),s.includes(te.DATA_MATRIX)&&l.push(new hr),s.includes(te.AZTEC)&&l.push(new Xt),s.includes(te.PDF_417)&&l.push(new Gn),c&&r&&l.push(new hi(e,this.verbose))}l.length===0&&(r||l.push(new hi(e,this.verbose)),l.push(new zn),l.push(new hr),l.push(new Xt),l.push(new Gn),r&&l.push(new hi(e,this.verbose))),this.readers=l}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new ss("No readers where selected, nothing can be read.");for(const r of this.readers)try{return r.decode(e,this.hints)}catch(s){if(s instanceof ss)continue}throw new $("No MultiFormat Readers were able to detect the code.")}}class Ls extends Ce{constructor(e=null,r=500){const s=new go;s.setHints(e),super(s,r)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class xo extends Ce{constructor(e=500){super(new Gn,e)}}class fl extends Ce{constructor(e=500){super(new zn,e)}}var ta;(function(k){k[k.ERROR_CORRECTION=0]="ERROR_CORRECTION",k[k.CHARACTER_SET=1]="CHARACTER_SET",k[k.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",k[k.MIN_SIZE=3]="MIN_SIZE",k[k.MAX_SIZE=4]="MAX_SIZE",k[k.MARGIN=5]="MARGIN",k[k.PDF417_COMPACT=6]="PDF417_COMPACT",k[k.PDF417_COMPACTION=7]="PDF417_COMPACTION",k[k.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",k[k.AZTEC_LAYERS=9]="AZTEC_LAYERS",k[k.QR_VERSION=10]="QR_VERSION"})(ta||(ta={}));var Rn=ta;class na{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Xe(e,Int32Array.from([1])))}buildGenerator(e){const r=this.cachedGenerators;if(e>=r.length){let s=r[r.length-1];const l=this.field;for(let c=r.length;c<=e;c++){const d=s.multiply(new Xe(l,Int32Array.from([1,l.exp(c-1+l.getGeneratorBase())])));r.push(d),s=d}}return r[e]}encode(e,r){if(r===0)throw new T("No error correction bytes");const s=e.length-r;if(s<=0)throw new T("No data bytes provided");const l=this.buildGenerator(r),c=new Int32Array(s);B.arraycopy(e,0,c,0,s);let d=new Xe(this.field,c);d=d.multiplyByMonomial(r,1);const y=d.divide(l)[1].getCoefficients(),E=r-y.length;for(let R=0;R<E;R++)e[s+R]=0;B.arraycopy(y,0,e,s+E,y.length)}}class on{constructor(){}static applyMaskPenaltyRule1(e){return on.applyMaskPenaltyRule1Internal(e,!0)+on.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let r=0;const s=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let d=0;d<c-1;d++){const p=s[d];for(let y=0;y<l-1;y++){const E=p[y];E===p[y+1]&&E===s[d+1][y]&&E===s[d+1][y+1]&&r++}}return on.N2*r}static applyMaskPenaltyRule3(e){let r=0;const s=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let d=0;d<c;d++)for(let p=0;p<l;p++){const y=s[d];p+6<l&&y[p]===1&&y[p+1]===0&&y[p+2]===1&&y[p+3]===1&&y[p+4]===1&&y[p+5]===0&&y[p+6]===1&&(on.isWhiteHorizontal(y,p-4,p)||on.isWhiteHorizontal(y,p+7,p+11))&&r++,d+6<c&&s[d][p]===1&&s[d+1][p]===0&&s[d+2][p]===1&&s[d+3][p]===1&&s[d+4][p]===1&&s[d+5][p]===0&&s[d+6][p]===1&&(on.isWhiteVertical(s,p,d-4,d)||on.isWhiteVertical(s,p,d+7,d+11))&&r++}return r*on.N3}static isWhiteHorizontal(e,r,s){r=Math.max(r,0),s=Math.min(s,e.length);for(let l=r;l<s;l++)if(e[l]===1)return!1;return!0}static isWhiteVertical(e,r,s,l){s=Math.max(s,0),l=Math.min(l,e.length);for(let c=s;c<l;c++)if(e[c][r]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let r=0;const s=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let y=0;y<c;y++){const E=s[y];for(let R=0;R<l;R++)E[R]===1&&r++}const d=e.getHeight()*e.getWidth();return Math.floor(Math.abs(r*2-d)*10/d)*on.N4}static getDataMaskBit(e,r,s){let l,c;switch(e){case 0:l=s+r&1;break;case 1:l=s&1;break;case 2:l=r%3;break;case 3:l=(s+r)%3;break;case 4:l=Math.floor(s/2)+Math.floor(r/3)&1;break;case 5:c=s*r,l=(c&1)+c%3;break;case 6:c=s*r,l=(c&1)+c%3&1;break;case 7:c=s*r,l=c%3+(s+r&1)&1;break;default:throw new T("Invalid mask pattern: "+e)}return l===0}static applyMaskPenaltyRule1Internal(e,r){let s=0;const l=r?e.getHeight():e.getWidth(),c=r?e.getWidth():e.getHeight(),d=e.getArray();for(let p=0;p<l;p++){let y=0,E=-1;for(let R=0;R<c;R++){const P=r?d[p][R]:d[R][p];P===E?y++:(y>=5&&(s+=on.N1+(y-5)),y=1,E=P)}y>=5&&(s+=on.N1+(y-5))}return s}}on.N1=3,on.N2=3,on.N3=40,on.N4=10;class yo{constructor(e,r){this.width=e,this.height=r;const s=new Array(r);for(let l=0;l!==r;l++)s[l]=new Uint8Array(e);this.bytes=s}getHeight(){return this.height}getWidth(){return this.width}get(e,r){return this.bytes[r][e]}getArray(){return this.bytes}setNumber(e,r,s){this.bytes[r][e]=s}setBoolean(e,r,s){this.bytes[r][e]=s?1:0}clear(e){for(const r of this.bytes)U.fill(r,e)}equals(e){if(!(e instanceof yo))return!1;const r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(let s=0,l=this.height;s<l;++s){const c=this.bytes[s],d=r.bytes[s];for(let p=0,y=this.width;p<y;++p)if(c[p]!==d[p])return!1}return!0}toString(){const e=new be;for(let r=0,s=this.height;r<s;++r){const l=this.bytes[r];for(let c=0,d=this.width;c<d;++c)switch(l[c]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class Li{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new be;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Li.NUM_MASK_PATTERNS}}Li.NUM_MASK_PATTERNS=8;class Jt extends C{}Jt.kind="WriterException";class ht{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,r,s,l,c){ht.clearMatrix(c),ht.embedBasicPatterns(s,c),ht.embedTypeInfo(r,l,c),ht.maybeEmbedVersionInfo(s,c),ht.embedDataBits(e,l,c)}static embedBasicPatterns(e,r){ht.embedPositionDetectionPatternsAndSeparators(r),ht.embedDarkDotAtLeftBottomCorner(r),ht.maybeEmbedPositionAdjustmentPatterns(e,r),ht.embedTimingPatterns(r)}static embedTypeInfo(e,r,s){const l=new Y;ht.makeTypeInfoBits(e,r,l);for(let c=0,d=l.getSize();c<d;++c){const p=l.get(l.getSize()-1-c),y=ht.TYPE_INFO_COORDINATES[c],E=y[0],R=y[1];if(s.setBoolean(E,R,p),c<8){const P=s.getWidth()-c-1;s.setBoolean(P,8,p)}else{const D=s.getHeight()-7+(c-8);s.setBoolean(8,D,p)}}}static maybeEmbedVersionInfo(e,r){if(e.getVersionNumber()<7)return;const s=new Y;ht.makeVersionInfoBits(e,s);let l=6*3-1;for(let c=0;c<6;++c)for(let d=0;d<3;++d){const p=s.get(l);l--,r.setBoolean(c,r.getHeight()-11+d,p),r.setBoolean(r.getHeight()-11+d,c,p)}}static embedDataBits(e,r,s){let l=0,c=-1,d=s.getWidth()-1,p=s.getHeight()-1;for(;d>0;){for(d===6&&(d-=1);p>=0&&p<s.getHeight();){for(let y=0;y<2;++y){const E=d-y;if(!ht.isEmpty(s.get(E,p)))continue;let R;l<e.getSize()?(R=e.get(l),++l):R=!1,r!==255&&on.getDataMaskBit(r,E,p)&&(R=!R),s.setBoolean(E,p,R)}p+=c}c=-c,p+=c,d-=2}if(l!==e.getSize())throw new Jt("Not all bits consumed: "+l+"/"+e.getSize())}static findMSBSet(e){return 32-F.numberOfLeadingZeros(e)}static calculateBCHCode(e,r){if(r===0)throw new T("0 polynomial");const s=ht.findMSBSet(r);for(e<<=s-1;ht.findMSBSet(e)>=s;)e^=r<<ht.findMSBSet(e)-s;return e}static makeTypeInfoBits(e,r,s){if(!Li.isValidMaskPattern(r))throw new Jt("Invalid mask pattern");const l=e.getBits()<<3|r;s.appendBits(l,5);const c=ht.calculateBCHCode(l,ht.TYPE_INFO_POLY);s.appendBits(c,10);const d=new Y;if(d.appendBits(ht.TYPE_INFO_MASK_PATTERN,15),s.xor(d),s.getSize()!==15)throw new Jt("should not happen but we got: "+s.getSize())}static makeVersionInfoBits(e,r){r.appendBits(e.getVersionNumber(),6);const s=ht.calculateBCHCode(e.getVersionNumber(),ht.VERSION_INFO_POLY);if(r.appendBits(s,12),r.getSize()!==18)throw new Jt("should not happen but we got: "+r.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let r=8;r<e.getWidth()-8;++r){const s=(r+1)%2;ht.isEmpty(e.get(r,6))&&e.setNumber(r,6,s),ht.isEmpty(e.get(6,r))&&e.setNumber(6,r,s)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new Jt;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,r,s){for(let l=0;l<8;++l){if(!ht.isEmpty(s.get(e+l,r)))throw new Jt;s.setNumber(e+l,r,0)}}static embedVerticalSeparationPattern(e,r,s){for(let l=0;l<7;++l){if(!ht.isEmpty(s.get(e,r+l)))throw new Jt;s.setNumber(e,r+l,0)}}static embedPositionAdjustmentPattern(e,r,s){for(let l=0;l<5;++l){const c=ht.POSITION_ADJUSTMENT_PATTERN[l];for(let d=0;d<5;++d)s.setNumber(e+d,r+l,c[d])}}static embedPositionDetectionPattern(e,r,s){for(let l=0;l<7;++l){const c=ht.POSITION_DETECTION_PATTERN[l];for(let d=0;d<7;++d)s.setNumber(e+d,r+l,c[d])}}static embedPositionDetectionPatternsAndSeparators(e){const r=ht.POSITION_DETECTION_PATTERN[0].length;ht.embedPositionDetectionPattern(0,0,e),ht.embedPositionDetectionPattern(e.getWidth()-r,0,e),ht.embedPositionDetectionPattern(0,e.getWidth()-r,e);const s=8;ht.embedHorizontalSeparationPattern(0,s-1,e),ht.embedHorizontalSeparationPattern(e.getWidth()-s,s-1,e),ht.embedHorizontalSeparationPattern(0,e.getWidth()-s,e);const l=7;ht.embedVerticalSeparationPattern(l,0,e),ht.embedVerticalSeparationPattern(e.getHeight()-l-1,0,e),ht.embedVerticalSeparationPattern(l,e.getHeight()-l,e)}static maybeEmbedPositionAdjustmentPatterns(e,r){if(e.getVersionNumber()<2)return;const s=e.getVersionNumber()-1,l=ht.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[s];for(let c=0,d=l.length;c!==d;c++){const p=l[c];if(p>=0)for(let y=0;y!==d;y++){const E=l[y];E>=0&&ht.isEmpty(r.get(E,p))&&ht.embedPositionAdjustmentPattern(E-2,p-2,r)}}}}ht.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ht.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ht.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ht.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ht.VERSION_INFO_POLY=7973,ht.TYPE_INFO_POLY=1335,ht.TYPE_INFO_MASK_PATTERN=21522;class Qc{constructor(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class nn{constructor(){}static calculateMaskPenalty(e){return on.applyMaskPenaltyRule1(e)+on.applyMaskPenaltyRule2(e)+on.applyMaskPenaltyRule3(e)+on.applyMaskPenaltyRule4(e)}static encode(e,r,s=null){let l=nn.DEFAULT_BYTE_MODE_ENCODING;const c=s!==null&&s.get(Rn.CHARACTER_SET)!==void 0;c&&(l=s.get(Rn.CHARACTER_SET).toString());const d=this.chooseMode(e,l),p=new Y;if(d===lt.BYTE&&(c||nn.DEFAULT_BYTE_MODE_ENCODING!==l)){const Ve=J.getCharacterSetECIByName(l);Ve!==void 0&&this.appendECI(Ve,p)}this.appendModeInfo(d,p);const y=new Y;this.appendBytes(e,d,y,l);let E;if(s!==null&&s.get(Rn.QR_VERSION)!==void 0){const Ve=Number.parseInt(s.get(Rn.QR_VERSION).toString(),10);E=ge.getVersionForNumber(Ve);const Pe=this.calculateBitsNeeded(d,p,y,E);if(!this.willFit(Pe,E,r))throw new Jt("Data too big for requested version")}else E=this.recommendVersion(r,d,p,y);const R=new Y;R.appendBitArray(p);const P=d===lt.BYTE?y.getSizeInBytes():e.length;this.appendLengthInfo(P,E,d,R),R.appendBitArray(y);const D=E.getECBlocksForLevel(r),z=E.getTotalCodewords()-D.getTotalECCodewords();this.terminateBits(z,R);const Z=this.interleaveWithECBytes(R,E.getTotalCodewords(),z,D.getNumBlocks()),ee=new Li;ee.setECLevel(r),ee.setMode(d),ee.setVersion(E);const oe=E.getDimensionForVersion(),he=new yo(oe,oe),Fe=this.chooseMaskPattern(Z,r,E,he);return ee.setMaskPattern(Fe),ht.buildMatrix(Z,r,E,Fe,he),ee.setMatrix(he),ee}static recommendVersion(e,r,s,l){const c=this.calculateBitsNeeded(r,s,l,ge.getVersionForNumber(1)),d=this.chooseVersion(c,e),p=this.calculateBitsNeeded(r,s,l,d);return this.chooseVersion(p,e)}static calculateBitsNeeded(e,r,s,l){return r.getSize()+e.getCharacterCountBits(l)+s.getSize()}static getAlphanumericCode(e){return e<nn.ALPHANUMERIC_TABLE.length?nn.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,r=null){if(J.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return lt.KANJI;let s=!1,l=!1;for(let c=0,d=e.length;c<d;++c){const p=e.charAt(c);if(nn.isDigit(p))s=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)l=!0;else return lt.BYTE}return l?lt.ALPHANUMERIC:s?lt.NUMERIC:lt.BYTE}static isOnlyDoubleByteKanji(e){let r;try{r=Re.encode(e,J.SJIS)}catch{return!1}const s=r.length;if(s%2!==0)return!1;for(let l=0;l<s;l+=2){const c=r[l]&255;if((c<129||c>159)&&(c<224||c>235))return!1}return!0}static chooseMaskPattern(e,r,s,l){let c=Number.MAX_SAFE_INTEGER,d=-1;for(let p=0;p<Li.NUM_MASK_PATTERNS;p++){ht.buildMatrix(e,r,s,p,l);let y=this.calculateMaskPenalty(l);y<c&&(c=y,d=p)}return d}static chooseVersion(e,r){for(let s=1;s<=40;s++){const l=ge.getVersionForNumber(s);if(nn.willFit(e,l,r))return l}throw new Jt("Data too big")}static willFit(e,r,s){const l=r.getTotalCodewords(),d=r.getECBlocksForLevel(s).getTotalECCodewords(),p=l-d,y=(e+7)/8;return p>=y}static terminateBits(e,r){const s=e*8;if(r.getSize()>s)throw new Jt("data bits cannot fit in the QR Code"+r.getSize()+" > "+s);for(let d=0;d<4&&r.getSize()<s;++d)r.appendBit(!1);const l=r.getSize()&7;if(l>0)for(let d=l;d<8;d++)r.appendBit(!1);const c=e-r.getSizeInBytes();for(let d=0;d<c;++d)r.appendBits(d&1?17:236,8);if(r.getSize()!==s)throw new Jt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,r,s,l,c,d){if(l>=s)throw new Jt("Block ID too large");const p=e%s,y=s-p,E=Math.floor(e/s),R=E+1,P=Math.floor(r/s),D=P+1,z=E-P,Z=R-D;if(z!==Z)throw new Jt("EC bytes mismatch");if(s!==y+p)throw new Jt("RS blocks mismatch");if(e!==(P+z)*y+(D+Z)*p)throw new Jt("Total bytes mismatch");l<y?(c[0]=P,d[0]=z):(c[0]=D,d[0]=Z)}static interleaveWithECBytes(e,r,s,l){if(e.getSizeInBytes()!==s)throw new Jt("Number of bits and data bytes does not match");let c=0,d=0,p=0;const y=new Array;for(let R=0;R<l;++R){const P=new Int32Array(1),D=new Int32Array(1);nn.getNumDataBytesAndNumECBytesForBlockID(r,s,l,R,P,D);const z=P[0],Z=new Uint8Array(z);e.toBytes(8*c,Z,0,z);const ee=nn.generateECBytes(Z,D[0]);y.push(new Qc(Z,ee)),d=Math.max(d,z),p=Math.max(p,ee.length),c+=P[0]}if(s!==c)throw new Jt("Data bytes does not match offset");const E=new Y;for(let R=0;R<d;++R)for(const P of y){const D=P.getDataBytes();R<D.length&&E.appendBits(D[R],8)}for(let R=0;R<p;++R)for(const P of y){const D=P.getErrorCorrectionBytes();R<D.length&&E.appendBits(D[R],8)}if(r!==E.getSizeInBytes())throw new Jt("Interleaving error: "+r+" and "+E.getSizeInBytes()+" differ.");return E}static generateECBytes(e,r){const s=e.length,l=new Int32Array(s+r);for(let d=0;d<s;d++)l[d]=e[d]&255;new na(xe.QR_CODE_FIELD_256).encode(l,r);const c=new Uint8Array(r);for(let d=0;d<r;d++)c[d]=l[s+d];return c}static appendModeInfo(e,r){r.appendBits(e.getBits(),4)}static appendLengthInfo(e,r,s,l){const c=s.getCharacterCountBits(r);if(e>=1<<c)throw new Jt(e+" is bigger than "+((1<<c)-1));l.appendBits(e,c)}static appendBytes(e,r,s,l){switch(r){case lt.NUMERIC:nn.appendNumericBytes(e,s);break;case lt.ALPHANUMERIC:nn.appendAlphanumericBytes(e,s);break;case lt.BYTE:nn.append8BitBytes(e,s,l);break;case lt.KANJI:nn.appendKanjiBytes(e,s);break;default:throw new Jt("Invalid mode: "+r)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const r=nn.getDigit(e);return r>=0&&r<=9}static appendNumericBytes(e,r){const s=e.length;let l=0;for(;l<s;){const c=nn.getDigit(e.charAt(l));if(l+2<s){const d=nn.getDigit(e.charAt(l+1)),p=nn.getDigit(e.charAt(l+2));r.appendBits(c*100+d*10+p,10),l+=3}else if(l+1<s){const d=nn.getDigit(e.charAt(l+1));r.appendBits(c*10+d,7),l+=2}else r.appendBits(c,4),l++}}static appendAlphanumericBytes(e,r){const s=e.length;let l=0;for(;l<s;){const c=nn.getAlphanumericCode(e.charCodeAt(l));if(c===-1)throw new Jt;if(l+1<s){const d=nn.getAlphanumericCode(e.charCodeAt(l+1));if(d===-1)throw new Jt;r.appendBits(c*45+d,11),l+=2}else r.appendBits(c,6),l++}}static append8BitBytes(e,r,s){let l;try{l=Re.encode(e,s)}catch(c){throw new Jt(c)}for(let c=0,d=l.length;c!==d;c++){const p=l[c];r.appendBits(p,8)}}static appendKanjiBytes(e,r){let s;try{s=Re.encode(e,J.SJIS)}catch(c){throw new Jt(c)}const l=s.length;for(let c=0;c<l;c+=2){const d=s[c]&255,p=s[c+1]&255,y=d<<8&4294967295|p;let E=-1;if(y>=33088&&y<=40956?E=y-33088:y>=57408&&y<=60351&&(E=y-49472),E===-1)throw new Jt("Invalid byte sequence");const R=(E>>8)*192+(E&255);r.appendBits(R,13)}}static appendECI(e,r){r.appendBits(lt.ECI.getBits(),4),r.appendBits(e.getValue(),8)}}nn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),nn.DEFAULT_BYTE_MODE_ENCODING=J.UTF8.getName();class ji{write(e,r,s,l=null){if(e.length===0)throw new T("Found empty contents");if(r<0||s<0)throw new T("Requested dimensions are too small: "+r+"x"+s);let c=Ft.L,d=ji.QUIET_ZONE_SIZE;l!==null&&(l.get(Rn.ERROR_CORRECTION)!==void 0&&(c=Ft.fromString(l.get(Rn.ERROR_CORRECTION).toString())),l.get(Rn.MARGIN)!==void 0&&(d=Number.parseInt(l.get(Rn.MARGIN).toString(),10)));const p=nn.encode(e,c,l);return this.renderResult(p,r,s,d)}writeToDom(e,r,s,l,c=null){typeof e=="string"&&(e=document.querySelector(e));const d=this.write(r,s,l,c);e&&e.appendChild(d)}renderResult(e,r,s,l){const c=e.getMatrix();if(c===null)throw new Ze;const d=c.getWidth(),p=c.getHeight(),y=d+l*2,E=p+l*2,R=Math.max(r,y),P=Math.max(s,E),D=Math.min(Math.floor(R/y),Math.floor(P/E)),z=Math.floor((R-d*D)/2),Z=Math.floor((P-p*D)/2),ee=this.createSVGElement(R,P);for(let oe=0,he=Z;oe<p;oe++,he+=D)for(let Fe=0,Ve=z;Fe<d;Fe++,Ve+=D)if(c.get(Fe,oe)===1){const Pe=this.createSvgRectElement(Ve,he,D,D);ee.appendChild(Pe)}return ee}createSVGElement(e,r){const s=document.createElementNS(ji.SVG_NS,"svg");return s.setAttributeNS(null,"height",e.toString()),s.setAttributeNS(null,"width",r.toString()),s}createSvgRectElement(e,r,s,l){const c=document.createElementNS(ji.SVG_NS,"rect");return c.setAttributeNS(null,"x",e.toString()),c.setAttributeNS(null,"y",r.toString()),c.setAttributeNS(null,"height",s.toString()),c.setAttributeNS(null,"width",l.toString()),c.setAttributeNS(null,"fill","#000000"),c}}ji.QUIET_ZONE_SIZE=4,ji.SVG_NS="http://www.w3.org/2000/svg";class os{encode(e,r,s,l,c){if(e.length===0)throw new T("Found empty contents");if(r!==te.QR_CODE)throw new T("Can only encode QR_CODE, but got "+r);if(s<0||l<0)throw new T(`Requested dimensions are too small: ${s}x${l}`);let d=Ft.L,p=os.QUIET_ZONE_SIZE;c!==null&&(c.get(Rn.ERROR_CORRECTION)!==void 0&&(d=Ft.fromString(c.get(Rn.ERROR_CORRECTION).toString())),c.get(Rn.MARGIN)!==void 0&&(p=Number.parseInt(c.get(Rn.MARGIN).toString(),10)));const y=nn.encode(e,d,c);return os.renderResult(y,s,l,p)}static renderResult(e,r,s,l){const c=e.getMatrix();if(c===null)throw new Ze;const d=c.getWidth(),p=c.getHeight(),y=d+l*2,E=p+l*2,R=Math.max(r,y),P=Math.max(s,E),D=Math.min(Math.floor(R/y),Math.floor(P/E)),z=Math.floor((R-d*D)/2),Z=Math.floor((P-p*D)/2),ee=new Ie(R,P);for(let oe=0,he=Z;oe<p;oe++,he+=D)for(let Fe=0,Ve=z;Fe<d;Fe++,Ve+=D)c.get(Fe,oe)===1&&ee.setRegion(Ve,he,D,D);return ee}}os.QUIET_ZONE_SIZE=4;class Jc{encode(e,r,s,l,c){let d;switch(r){case te.QR_CODE:d=new os;break;default:throw new T("No encoder available for format "+r)}return d.encode(e,r,s,l,c)}}class Yr extends ye{constructor(e,r,s,l,c,d,p,y){if(super(d,p),this.yuvData=e,this.dataWidth=r,this.dataHeight=s,this.left=l,this.top=c,l+d>r||c+p>s)throw new T("Crop rectangle does not fit within image data.");y&&this.reverseHorizontal(d,p)}getRow(e,r){if(e<0||e>=this.getHeight())throw new T("Requested row is outside the image: "+e);const s=this.getWidth();(r==null||r.length<s)&&(r=new Uint8ClampedArray(s));const l=(e+this.top)*this.dataWidth+this.left;return B.arraycopy(this.yuvData,l,r,0,s),r}getMatrix(){const e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.yuvData;const s=e*r,l=new Uint8ClampedArray(s);let c=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return B.arraycopy(this.yuvData,c,l,0,s),l;for(let d=0;d<r;d++){const p=d*e;B.arraycopy(this.yuvData,c,l,p,e),c+=this.dataWidth}return l}isCropSupported(){return!0}crop(e,r,s,l){return new Yr(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+r,s,l,!1)}renderThumbnail(){const e=this.getWidth()/Yr.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/Yr.THUMBNAIL_SCALE_FACTOR,s=new Int32Array(e*r),l=this.yuvData;let c=this.top*this.dataWidth+this.left;for(let d=0;d<r;d++){const p=d*e;for(let y=0;y<e;y++){const E=l[c+y*Yr.THUMBNAIL_SCALE_FACTOR]&255;s[p+y]=4278190080|E*65793}c+=this.dataWidth*Yr.THUMBNAIL_SCALE_FACTOR}return s}getThumbnailWidth(){return this.getWidth()/Yr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Yr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,r){const s=this.yuvData;for(let l=0,c=this.top*this.dataWidth+this.left;l<r;l++,c+=this.dataWidth){const d=c+e/2;for(let p=c,y=c+e-1;p<d;p++,y--){const E=s[p];s[p]=s[y],s[y]=E}}}invert(){return new De(this)}}Yr.THUMBNAIL_SCALE_FACTOR=2;class js extends ye{constructor(e,r,s,l,c,d,p){if(super(r,s),this.dataWidth=l,this.dataHeight=c,this.left=d,this.top=p,e.BYTES_PER_ELEMENT===4){const y=r*s,E=new Uint8ClampedArray(y);for(let R=0;R<y;R++){const P=e[R],D=P>>16&255,z=P>>7&510,Z=P&255;E[R]=(D+z+Z)/4&255}this.luminances=E}else this.luminances=e;if(l===void 0&&(this.dataWidth=r),c===void 0&&(this.dataHeight=s),d===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+r>this.dataWidth||this.top+s>this.dataHeight)throw new T("Crop rectangle does not fit within image data.")}getRow(e,r){if(e<0||e>=this.getHeight())throw new T("Requested row is outside the image: "+e);const s=this.getWidth();(r==null||r.length<s)&&(r=new Uint8ClampedArray(s));const l=(e+this.top)*this.dataWidth+this.left;return B.arraycopy(this.luminances,l,r,0,s),r}getMatrix(){const e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.luminances;const s=e*r,l=new Uint8ClampedArray(s);let c=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return B.arraycopy(this.luminances,c,l,0,s),l;for(let d=0;d<r;d++){const p=d*e;B.arraycopy(this.luminances,c,l,p,e),c+=this.dataWidth}return l}isCropSupported(){return!0}crop(e,r,s,l){return new js(this.luminances,s,l,this.dataWidth,this.dataHeight,this.left+e,this.top+r)}invert(){return new De(this)}}class hl extends J{static forName(e){return this.getCharacterSetECIByName(e)}}class ra{}ra.ISO_8859_1=J.ISO8859_1;class ml{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class ia{static singletonList(e){return[e]}static min(e,r){return e.sort(r)[0]}}class eu{constructor(e){this.previous=e}getPrevious(){return this.previous}}class as extends eu{constructor(e,r,s){super(e),this.value=r,this.bitCount=s}appendTo(e,r){e.appendBits(this.value,this.bitCount)}add(e,r){return new as(this,e,r)}addBinaryShift(e,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new as(this,e,r)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+F.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class sa extends as{constructor(e,r,s){super(e,0,0),this.binaryShiftStart=r,this.binaryShiftByteCount=s}appendTo(e,r){for(let s=0;s<this.binaryShiftByteCount;s++)(s===0||s===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):s===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(r[this.binaryShiftStart+s],8)}addBinaryShift(e,r){return new sa(this,e,r)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function tu(k,e,r){return new sa(k,e,r)}function Bs(k,e,r){return new as(k,e,r)}const nu=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],gi=0,ls=1,Jn=2,pl=3,Vr=4,gl=new as(null,0,0),wo=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function xl(k){for(let e of k)U.fill(e,-1);return k[gi][Vr]=0,k[ls][Vr]=0,k[ls][gi]=28,k[pl][Vr]=0,k[Jn][Vr]=0,k[Jn][gi]=15,k}const oa=xl(U.createInt32Array(6,6));class ar{constructor(e,r,s,l){this.token=e,this.mode=r,this.binaryShiftByteCount=s,this.bitCount=l}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,r){let s=this.bitCount,l=this.token;if(e!==this.mode){let d=wo[this.mode][e];l=Bs(l,d&65535,d>>16),s+=d>>16}let c=e===Jn?4:5;return l=Bs(l,r,c),new ar(l,e,0,s+c)}shiftAndAppend(e,r){let s=this.token,l=this.mode===Jn?4:5;return s=Bs(s,oa[this.mode][e],l),s=Bs(s,r,5),new ar(s,this.mode,0,this.bitCount+l+5)}addBinaryShiftChar(e){let r=this.token,s=this.mode,l=this.bitCount;if(this.mode===Vr||this.mode===Jn){let p=wo[s][gi];r=Bs(r,p&65535,p>>16),l+=p>>16,s=gi}let c=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new ar(r,s,this.binaryShiftByteCount+1,l+c);return d.binaryShiftByteCount===2078&&(d=d.endBinaryShift(e+1)),d}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let r=this.token;return r=tu(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new ar(r,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let r=this.bitCount+(wo[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=ar.calculateBinaryShiftCost(e)-ar.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount}toBitArray(e){let r=[];for(let l=this.endBinaryShift(e.length).token;l!==null;l=l.getPrevious())r.unshift(l);let s=new Y;for(const l of r)l.appendTo(s,e);return s}toString(){return Ae.format("%s bits=%d bytes=%d",nu[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}ar.INITIAL_STATE=new ar(gl,gi,0,0);function ru(k){const e=Ae.getCharCode(" "),r=Ae.getCharCode("."),s=Ae.getCharCode(",");k[gi][e]=1;const l=Ae.getCharCode("Z"),c=Ae.getCharCode("A");for(let D=c;D<=l;D++)k[gi][D]=D-c+2;k[ls][e]=1;const d=Ae.getCharCode("z"),p=Ae.getCharCode("a");for(let D=p;D<=d;D++)k[ls][D]=D-p+2;k[Jn][e]=1;const y=Ae.getCharCode("9"),E=Ae.getCharCode("0");for(let D=E;D<=y;D++)k[Jn][D]=D-E+2;k[Jn][s]=12,k[Jn][r]=13;const R=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let D=0;D<R.length;D++)k[pl][Ae.getCharCode(R[D])]=D;const P=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let D=0;D<P.length;D++)Ae.getCharCode(P[D])>0&&(k[Vr][Ae.getCharCode(P[D])]=D);return k}const aa=ru(U.createInt32Array(5,256));class Fs{constructor(e){this.text=e}encode(){const e=Ae.getCharCode(" "),r=Ae.getCharCode(`
`);let s=ia.singletonList(ar.INITIAL_STATE);for(let c=0;c<this.text.length;c++){let d,p=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case Ae.getCharCode("\r"):d=p===r?2:0;break;case Ae.getCharCode("."):d=p===e?3:0;break;case Ae.getCharCode(","):d=p===e?4:0;break;case Ae.getCharCode(":"):d=p===e?5:0;break;default:d=0}d>0?(s=Fs.updateStateListForPair(s,c,d),c++):s=this.updateStateListForChar(s,c)}return ia.min(s,(c,d)=>c.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,r){const s=[];for(let l of e)this.updateStateForChar(l,r,s);return Fs.simplifyStates(s)}updateStateForChar(e,r,s){let l=this.text[r]&255,c=aa[e.getMode()][l]>0,d=null;for(let p=0;p<=Vr;p++){let y=aa[p][l];if(y>0){if(d==null&&(d=e.endBinaryShift(r)),!c||p===e.getMode()||p===Jn){const E=d.latchAndAppend(p,y);s.push(E)}if(!c&&oa[e.getMode()][p]>=0){const E=d.shiftAndAppend(p,y);s.push(E)}}}if(e.getBinaryShiftByteCount()>0||aa[e.getMode()][l]===0){let p=e.addBinaryShiftChar(r);s.push(p)}}static updateStateListForPair(e,r,s){const l=[];for(let c of e)this.updateStateForPair(c,r,s,l);return this.simplifyStates(l)}static updateStateForPair(e,r,s,l){let c=e.endBinaryShift(r);if(l.push(c.latchAndAppend(Vr,s)),e.getMode()!==Vr&&l.push(c.shiftAndAppend(Vr,s)),s===3||s===4){let d=c.latchAndAppend(Jn,16-s).latchAndAppend(Jn,1);l.push(d)}if(e.getBinaryShiftByteCount()>0){let d=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);l.push(d)}}static simplifyStates(e){let r=[];for(const s of e){let l=!0;for(const c of r){if(c.isBetterThanOrEqualTo(s)){l=!1;break}s.isBetterThanOrEqualTo(c)&&(r=r.filter(d=>d!==c))}l&&r.push(s)}return r}}class Ot{constructor(){}static encodeBytes(e){return Ot.encode(e,Ot.DEFAULT_EC_PERCENT,Ot.DEFAULT_AZTEC_LAYERS)}static encode(e,r,s){let l=new Fs(e).encode(),c=F.truncDivision(l.getSize()*r,100)+11,d=l.getSize()+c,p,y,E,R,P;if(s!==Ot.DEFAULT_AZTEC_LAYERS){if(p=s<0,y=Math.abs(s),y>(p?Ot.MAX_NB_BITS_COMPACT:Ot.MAX_NB_BITS))throw new T(Ae.format("Illegal value %s for layers",s));E=Ot.totalBitsInLayer(y,p),R=Ot.WORD_SIZE[y];let Pe=E-E%R;if(P=Ot.stuffBits(l,R),P.getSize()+c>Pe)throw new T("Data to large for user specified layer");if(p&&P.getSize()>R*64)throw new T("Data to large for user specified layer")}else{R=0,P=null;for(let Pe=0;;Pe++){if(Pe>Ot.MAX_NB_BITS)throw new T("Data too large for an Aztec code");if(p=Pe<=3,y=p?Pe+1:Pe,E=Ot.totalBitsInLayer(y,p),d>E)continue;(P==null||R!==Ot.WORD_SIZE[y])&&(R=Ot.WORD_SIZE[y],P=Ot.stuffBits(l,R));let Rt=E-E%R;if(!(p&&P.getSize()>R*64)&&P.getSize()+c<=Rt)break}}let D=Ot.generateCheckWords(P,E,R),z=P.getSize()/R,Z=Ot.generateModeMessage(p,y,z),ee=(p?11:14)+y*4,oe=new Int32Array(ee),he;if(p){he=ee;for(let Pe=0;Pe<oe.length;Pe++)oe[Pe]=Pe}else{he=ee+1+2*F.truncDivision(F.truncDivision(ee,2)-1,15);let Pe=F.truncDivision(ee,2),Rt=F.truncDivision(he,2);for(let Et=0;Et<Pe;Et++){let mr=Et+F.truncDivision(Et,15);oe[Pe-Et-1]=Rt-mr-1,oe[Pe+Et]=Rt+mr+1}}let Fe=new Ie(he);for(let Pe=0,Rt=0;Pe<y;Pe++){let Et=(y-Pe)*4+(p?9:12);for(let mr=0;mr<Et;mr++){let Ur=mr*2;for(let kn=0;kn<2;kn++)D.get(Rt+Ur+kn)&&Fe.set(oe[Pe*2+kn],oe[Pe*2+mr]),D.get(Rt+Et*2+Ur+kn)&&Fe.set(oe[Pe*2+mr],oe[ee-1-Pe*2-kn]),D.get(Rt+Et*4+Ur+kn)&&Fe.set(oe[ee-1-Pe*2-kn],oe[ee-1-Pe*2-mr]),D.get(Rt+Et*6+Ur+kn)&&Fe.set(oe[ee-1-Pe*2-mr],oe[Pe*2+kn])}Rt+=Et*8}if(Ot.drawModeMessage(Fe,p,he,Z),p)Ot.drawBullsEye(Fe,F.truncDivision(he,2),5);else{Ot.drawBullsEye(Fe,F.truncDivision(he,2),7);for(let Pe=0,Rt=0;Pe<F.truncDivision(ee,2)-1;Pe+=15,Rt+=16)for(let Et=F.truncDivision(he,2)&1;Et<he;Et+=2)Fe.set(F.truncDivision(he,2)-Rt,Et),Fe.set(F.truncDivision(he,2)+Rt,Et),Fe.set(Et,F.truncDivision(he,2)-Rt),Fe.set(Et,F.truncDivision(he,2)+Rt)}let Ve=new ml;return Ve.setCompact(p),Ve.setSize(he),Ve.setLayers(y),Ve.setCodeWords(z),Ve.setMatrix(Fe),Ve}static drawBullsEye(e,r,s){for(let l=0;l<s;l+=2)for(let c=r-l;c<=r+l;c++)e.set(c,r-l),e.set(c,r+l),e.set(r-l,c),e.set(r+l,c);e.set(r-s,r-s),e.set(r-s+1,r-s),e.set(r-s,r-s+1),e.set(r+s,r-s),e.set(r+s,r-s+1),e.set(r+s,r+s-1)}static generateModeMessage(e,r,s){let l=new Y;return e?(l.appendBits(r-1,2),l.appendBits(s-1,6),l=Ot.generateCheckWords(l,28,4)):(l.appendBits(r-1,5),l.appendBits(s-1,11),l=Ot.generateCheckWords(l,40,4)),l}static drawModeMessage(e,r,s,l){let c=F.truncDivision(s,2);if(r)for(let d=0;d<7;d++){let p=c-3+d;l.get(d)&&e.set(p,c-5),l.get(d+7)&&e.set(c+5,p),l.get(20-d)&&e.set(p,c+5),l.get(27-d)&&e.set(c-5,p)}else for(let d=0;d<10;d++){let p=c-5+d+F.truncDivision(d,5);l.get(d)&&e.set(p,c-7),l.get(d+10)&&e.set(c+7,p),l.get(29-d)&&e.set(p,c+7),l.get(39-d)&&e.set(c-7,p)}}static generateCheckWords(e,r,s){let l=e.getSize()/s,c=new na(Ot.getGF(s)),d=F.truncDivision(r,s),p=Ot.bitsToWords(e,s,d);c.encode(p,d-l);let y=r%s,E=new Y;E.appendBits(0,y);for(const R of Array.from(p))E.appendBits(R,s);return E}static bitsToWords(e,r,s){let l=new Int32Array(s),c,d;for(c=0,d=e.getSize()/r;c<d;c++){let p=0;for(let y=0;y<r;y++)p|=e.get(c*r+y)?1<<r-y-1:0;l[c]=p}return l}static getGF(e){switch(e){case 4:return xe.AZTEC_PARAM;case 6:return xe.AZTEC_DATA_6;case 8:return xe.AZTEC_DATA_8;case 10:return xe.AZTEC_DATA_10;case 12:return xe.AZTEC_DATA_12;default:throw new T("Unsupported word size "+e)}}static stuffBits(e,r){let s=new Y,l=e.getSize(),c=(1<<r)-2;for(let d=0;d<l;d+=r){let p=0;for(let y=0;y<r;y++)(d+y>=l||e.get(d+y))&&(p|=1<<r-1-y);(p&c)===c?(s.appendBits(p&c,r),d--):p&c?s.appendBits(p,r):(s.appendBits(p|1,r),d--)}return s}static totalBitsInLayer(e,r){return((r?88:112)+16*e)*e}}Ot.DEFAULT_EC_PERCENT=33,Ot.DEFAULT_AZTEC_LAYERS=0,Ot.MAX_NB_BITS=32,Ot.MAX_NB_BITS_COMPACT=4,Ot.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Vs{encode(e,r,s,l){return this.encodeWithHints(e,r,s,l,null)}encodeWithHints(e,r,s,l,c){let d=ra.ISO_8859_1,p=Ot.DEFAULT_EC_PERCENT,y=Ot.DEFAULT_AZTEC_LAYERS;return c!=null&&(c.has(Rn.CHARACTER_SET)&&(d=hl.forName(c.get(Rn.CHARACTER_SET).toString())),c.has(Rn.ERROR_CORRECTION)&&(p=F.parseInt(c.get(Rn.ERROR_CORRECTION).toString())),c.has(Rn.AZTEC_LAYERS)&&(y=F.parseInt(c.get(Rn.AZTEC_LAYERS).toString()))),Vs.encodeLayers(e,r,s,l,d,p,y)}static encodeLayers(e,r,s,l,c,d,p){if(r!==te.AZTEC)throw new T("Can only encode AZTEC, but got "+r);let y=Ot.encode(Ae.getBytes(e,c),d,p);return Vs.renderResult(y,s,l)}static renderResult(e,r,s){let l=e.getMatrix();if(l==null)throw new Ze;let c=l.getWidth(),d=l.getHeight(),p=Math.max(r,c),y=Math.max(s,d),E=Math.min(p/c,y/d),R=(p-c*E)/2,P=(y-d*E)/2,D=new Ie(p,y);for(let z=0,Z=P;z<d;z++,Z+=E)for(let ee=0,oe=R;ee<c;ee++,oe+=E)l.get(ee,z)&&D.setRegion(oe,Z,E,E);return D}}a.AbstractExpandedDecoder=uo,a.ArgumentException=A,a.ArithmeticException=de,a.AztecCode=ml,a.AztecCodeReader=Xt,a.AztecCodeWriter=Vs,a.AztecDecoder=qe,a.AztecDetector=Bt,a.AztecDetectorResult=ir,a.AztecEncoder=Ot,a.AztecHighLevelEncoder=Fs,a.AztecPoint=wt,a.BarcodeFormat=te,a.Binarizer=L,a.BinaryBitmap=_,a.BitArray=Y,a.BitMatrix=Ie,a.BitSource=ts,a.BrowserAztecCodeReader=Be,a.BrowserBarcodeReader=ki,a.BrowserCodeReader=Ce,a.BrowserDatamatrixCodeReader=qo,a.BrowserMultiFormatReader=Ls,a.BrowserPDF417Reader=xo,a.BrowserQRCodeReader=fl,a.BrowserQRCodeSvgWriter=ji,a.CharacterSetECI=J,a.ChecksumException=O,a.Code128Reader=ce,a.Code39Reader=ft,a.DataMatrixDecodedBitStreamParser=Cr,a.DataMatrixReader=hr,a.DecodeHintType=ne,a.DecoderResult=Le,a.DefaultGridSampler=ct,a.DetectorResult=gn,a.EAN13Reader=rn,a.EncodeHintType=Rn,a.Exception=C,a.FormatException=q,a.GenericGF=xe,a.GenericGFPoly=Xe,a.GlobalHistogramBinarizer=ke,a.GridSampler=Tt,a.GridSamplerInstance=Je,a.HTMLCanvasElementLuminanceSource=Ee,a.HybridBinarizer=ve,a.ITFReader=ut,a.IllegalArgumentException=T,a.IllegalStateException=Ze,a.InvertedLuminanceSource=De,a.LuminanceSource=ye,a.MathUtils=tt,a.MultiFormatOneDReader=hi,a.MultiFormatReader=go,a.MultiFormatWriter=Jc,a.NotFoundException=$,a.OneDReader=Te,a.PDF417DecodedBitStreamParser=me,a.PDF417DecoderErrorCorrection=Qo,a.PDF417Reader=Gn,a.PDF417ResultMetadata=mo,a.PerspectiveTransform=ze,a.PlanarYUVLuminanceSource=Yr,a.QRCodeByteMatrix=yo,a.QRCodeDataMask=Ye,a.QRCodeDecodedBitStreamParser=Qt,a.QRCodeDecoderErrorCorrectionLevel=Ft,a.QRCodeDecoderFormatInformation=En,a.QRCodeEncoder=nn,a.QRCodeEncoderQRCode=Li,a.QRCodeMaskUtil=on,a.QRCodeMatrixUtil=ht,a.QRCodeMode=lt,a.QRCodeReader=zn,a.QRCodeVersion=ge,a.QRCodeWriter=os,a.RGBLuminanceSource=js,a.RSS14Reader=Kt,a.RSSExpandedReader=Ne,a.ReaderException=ss,a.ReedSolomonDecoder=It,a.ReedSolomonEncoder=na,a.ReedSolomonException=$e,a.Result=ae,a.ResultMetadataType=Se,a.ResultPoint=Ue,a.StringUtils=Ae,a.UnsupportedOperationException=we,a.VideoInputDevice=X,a.WhiteRectangleDetector=Ge,a.WriterException=Jt,a.ZXingArrays=U,a.ZXingCharset=hl,a.ZXingInteger=F,a.ZXingStandardCharsets=ra,a.ZXingStringBuilder=be,a.ZXingStringEncoding=Re,a.ZXingSystem=B,a.createAbstractExpandedDecoder=ho,Object.defineProperty(a,"__esModule",{value:!0})})}(Oa,Oa.exports)),Oa.exports}Tw();var Mf=function(){var t=function(i,a){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,m){u.__proto__=m}||function(u,m){for(var x in m)Object.prototype.hasOwnProperty.call(m,x)&&(u[x]=m[x])},t(i,a)};return function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");t(i,a);function u(){this.constructor=i}i.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}}(),Rp=function(){function t(i,a){this.name=i,this.track=a}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(i){var a={};a[this.name]=i;var u={advanced:[a]};return this.track.applyConstraints(u)},t.prototype.value=function(){var i=this.track.getSettings();if(this.name in i){var a=i[this.name];return a}return null},t}(),_w=function(t){Mf(i,t);function i(a,u){return t.call(this,a,u)||this}return i.prototype.min=function(){return this.getCapabilities().min},i.prototype.max=function(){return this.getCapabilities().max},i.prototype.step=function(){return this.getCapabilities().step},i.prototype.apply=function(a){var u={};u[this.name]=a;var m={advanced:[u]};return this.track.applyConstraints(m)},i.prototype.getCapabilities=function(){this.failIfNotSupported();var a=this.track.getCapabilities(),u=a[this.name];return{min:u.min,max:u.max,step:u.step}},i.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},i}(Rp);(function(t){Mf(i,t);function i(a){return t.call(this,"zoom",a)||this}return i})(_w);(function(t){Mf(i,t);function i(a){return t.call(this,"torch",a)||this}return i})(Rp);var L1;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(L1||(L1={}));var Rw=function(){var t=function(i,a){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,m){u.__proto__=m}||function(u,m){for(var x in m)Object.prototype.hasOwnProperty.call(m,x)&&(u[x]=m[x])},t(i,a)};return function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");t(i,a);function u(){this.constructor=i}i.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}}();(function(t){Rw(i,t);function i(){return t!==null&&t.apply(this,arguments)||this}return i.DEFAULT_WIDTH=300,i.DEFAULT_WIDTH_OFFSET=2,i.FILE_SCAN_MIN_HEIGHT=300,i.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,i.MIN_QR_BOX_SIZE=50,i.SHADED_LEFT=1,i.SHADED_RIGHT=2,i.SHADED_TOP=3,i.SHADED_BOTTOM=4,i.SHADED_REGION_ELEMENT_ID="qr-shaded-region",i.VERBOSE=!1,i.BORDER_SHADER_DEFAULT_COLOR="#ffffff",i.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",i})(Nw);var j1;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(j1||(j1={}));const kw=({user:t,onProfileClick:i})=>null,Of=N.createContext({});function el(t){const i=N.useRef(null);return i.current===null&&(i.current=t()),i.current}const Df=typeof window<"u",Lf=Df?N.useLayoutEffect:N.useEffect,Hc=N.createContext(null);function jf(t,i){t.indexOf(i)===-1&&t.push(i)}function Bf(t,i){const a=t.indexOf(i);a>-1&&t.splice(a,1)}const Zi=(t,i,a)=>a>i?i:a<t?t:a;let Ff=()=>{};const Ki={},kp=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Pp(t){return typeof t=="object"&&t!==null}const Mp=t=>/^0[^.\s]+$/u.test(t);function Vf(t){let i;return()=>(i===void 0&&(i=t()),i)}const ni=t=>t,Pw=(t,i)=>a=>i(t(a)),tl=(...t)=>t.reduce(Pw),Ga=(t,i,a)=>{const u=i-t;return u===0?1:(a-t)/u};class Uf{constructor(){this.subscriptions=[]}add(i){return jf(this.subscriptions,i),()=>Bf(this.subscriptions,i)}notify(i,a,u){const m=this.subscriptions.length;if(m)if(m===1)this.subscriptions[0](i,a,u);else for(let x=0;x<m;x++){const w=this.subscriptions[x];w&&w(i,a,u)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ci=t=>t*1e3,bi=t=>t/1e3;function Op(t,i){return i?t*(1e3/i):0}const Dp=(t,i,a)=>(((1-3*a+3*i)*t+(3*a-6*i))*t+3*i)*t,Mw=1e-7,Ow=12;function Dw(t,i,a,u,m){let x,w,b=0;do w=i+(a-i)/2,x=Dp(w,u,m)-t,x>0?a=w:i=w;while(Math.abs(x)>Mw&&++b<Ow);return w}function nl(t,i,a,u){if(t===i&&a===u)return ni;const m=x=>Dw(x,0,1,t,a);return x=>x===0||x===1?x:Dp(m(x),i,u)}const Lp=t=>i=>i<=.5?t(2*i)/2:(2-t(2*(1-i)))/2,jp=t=>i=>1-t(1-i),Bp=nl(.33,1.53,.69,.99),zf=jp(Bp),Fp=Lp(zf),Vp=t=>(t*=2)<1?.5*zf(t):.5*(2-Math.pow(2,-10*(t-1))),Wf=t=>1-Math.sin(Math.acos(t)),Up=jp(Wf),zp=Lp(Wf),Lw=nl(.42,0,1,1),jw=nl(0,0,.58,1),Wp=nl(.42,0,.58,1),Bw=t=>Array.isArray(t)&&typeof t[0]!="number",Hp=t=>Array.isArray(t)&&typeof t[0]=="number",Fw={linear:ni,easeIn:Lw,easeInOut:Wp,easeOut:jw,circIn:Wf,circInOut:zp,circOut:Up,backIn:zf,backInOut:Fp,backOut:Bp,anticipate:Vp},Vw=t=>typeof t=="string",B1=t=>{if(Hp(t)){Ff(t.length===4);const[i,a,u,m]=t;return nl(i,a,u,m)}else if(Vw(t))return Fw[t];return t},fc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Uw(t,i){let a=new Set,u=new Set,m=!1,x=!1;const w=new WeakSet;let b={delta:0,timestamp:0,isProcessing:!1};function v(A){w.has(A)&&(C.schedule(A),t()),A(b)}const C={schedule:(A,T=!1,_=!1)=>{const L=_&&m?a:u;return T&&w.add(A),L.has(A)||L.add(A),A},cancel:A=>{u.delete(A),w.delete(A)},process:A=>{if(b=A,m){x=!0;return}m=!0,[a,u]=[u,a],a.forEach(v),a.clear(),m=!1,x&&(x=!1,C.process(A))}};return C}const zw=40;function Gp(t,i){let a=!1,u=!0;const m={delta:0,timestamp:0,isProcessing:!1},x=()=>a=!0,w=fc.reduce((F,Y)=>(F[Y]=Uw(x),F),{}),{setup:b,read:v,resolveKeyframes:C,preUpdate:A,update:T,preRender:_,render:O,postRender:L}=w,B=()=>{const F=Ki.useManualTiming?m.timestamp:performance.now();a=!1,Ki.useManualTiming||(m.delta=u?1e3/60:Math.max(Math.min(F-m.timestamp,zw),1)),m.timestamp=F,m.isProcessing=!0,b.process(m),v.process(m),C.process(m),A.process(m),T.process(m),_.process(m),O.process(m),L.process(m),m.isProcessing=!1,a&&i&&(u=!1,t(B))},j=()=>{a=!0,u=!0,m.isProcessing||t(B)};return{schedule:fc.reduce((F,Y)=>{const K=w[Y];return F[Y]=(ne,q=!1,ie=!1)=>(a||j(),K.schedule(ne,q,ie)),F},{}),cancel:F=>{for(let Y=0;Y<fc.length;Y++)w[fc[Y]].cancel(F)},state:m,steps:w}}const{schedule:ln,cancel:qi,state:fr,steps:_d}=Gp(typeof requestAnimationFrame<"u"?requestAnimationFrame:ni,!0);let Cc;function Ww(){Cc=void 0}const Lr={now:()=>(Cc===void 0&&Lr.set(fr.isProcessing||Ki.useManualTiming?fr.timestamp:performance.now()),Cc),set:t=>{Cc=t,queueMicrotask(Ww)}},Xp=t=>i=>typeof i=="string"&&i.startsWith(t),Hf=Xp("--"),Hw=Xp("var(--"),Gf=t=>Hw(t)?Gw.test(t.split("/*")[0].trim()):!1,Gw=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,$o={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Xa={...$o,transform:t=>Zi(0,1,t)},hc={...$o,default:1},La=t=>Math.round(t*1e5)/1e5,Xf=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Xw(t){return t==null}const Yw=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Yf=(t,i)=>a=>!!(typeof a=="string"&&Yw.test(a)&&a.startsWith(t)||i&&!Xw(a)&&Object.prototype.hasOwnProperty.call(a,i)),Yp=(t,i,a)=>u=>{if(typeof u!="string")return u;const[m,x,w,b]=u.match(Xf);return{[t]:parseFloat(m),[i]:parseFloat(x),[a]:parseFloat(w),alpha:b!==void 0?parseFloat(b):1}},$w=t=>Zi(0,255,t),Rd={...$o,transform:t=>Math.round($w(t))},to={test:Yf("rgb","red"),parse:Yp("red","green","blue"),transform:({red:t,green:i,blue:a,alpha:u=1})=>"rgba("+Rd.transform(t)+", "+Rd.transform(i)+", "+Rd.transform(a)+", "+La(Xa.transform(u))+")"};function Zw(t){let i="",a="",u="",m="";return t.length>5?(i=t.substring(1,3),a=t.substring(3,5),u=t.substring(5,7),m=t.substring(7,9)):(i=t.substring(1,2),a=t.substring(2,3),u=t.substring(3,4),m=t.substring(4,5),i+=i,a+=a,u+=u,m+=m),{red:parseInt(i,16),green:parseInt(a,16),blue:parseInt(u,16),alpha:m?parseInt(m,16)/255:1}}const qd={test:Yf("#"),parse:Zw,transform:to.transform},rl=t=>({test:i=>typeof i=="string"&&i.endsWith(t)&&i.split(" ").length===1,parse:parseFloat,transform:i=>`${i}${t}`}),Ss=rl("deg"),Ei=rl("%"),vt=rl("px"),Kw=rl("vh"),qw=rl("vw"),F1={...Ei,parse:t=>Ei.parse(t)/100,transform:t=>Ei.transform(t*100)},jo={test:Yf("hsl","hue"),parse:Yp("hue","saturation","lightness"),transform:({hue:t,saturation:i,lightness:a,alpha:u=1})=>"hsla("+Math.round(t)+", "+Ei.transform(La(i))+", "+Ei.transform(La(a))+", "+La(Xa.transform(u))+")"},Bn={test:t=>to.test(t)||qd.test(t)||jo.test(t),parse:t=>to.test(t)?to.parse(t):jo.test(t)?jo.parse(t):qd.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?to.transform(t):jo.transform(t),getAnimatableNone:t=>{const i=Bn.parse(t);return i.alpha=0,Bn.transform(i)}},Qw=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Jw(t){var i,a;return isNaN(t)&&typeof t=="string"&&(((i=t.match(Xf))==null?void 0:i.length)||0)+(((a=t.match(Qw))==null?void 0:a.length)||0)>0}const $p="number",Zp="color",ev="var",tv="var(",V1="${}",nv=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ya(t){const i=t.toString(),a=[],u={color:[],number:[],var:[]},m=[];let x=0;const b=i.replace(nv,v=>(Bn.test(v)?(u.color.push(x),m.push(Zp),a.push(Bn.parse(v))):v.startsWith(tv)?(u.var.push(x),m.push(ev),a.push(v)):(u.number.push(x),m.push($p),a.push(parseFloat(v))),++x,V1)).split(V1);return{values:a,split:b,indexes:u,types:m}}function Kp(t){return Ya(t).values}function qp(t){const{split:i,types:a}=Ya(t),u=i.length;return m=>{let x="";for(let w=0;w<u;w++)if(x+=i[w],m[w]!==void 0){const b=a[w];b===$p?x+=La(m[w]):b===Zp?x+=Bn.transform(m[w]):x+=m[w]}return x}}const rv=t=>typeof t=="number"?0:Bn.test(t)?Bn.getAnimatableNone(t):t;function iv(t){const i=Kp(t);return qp(t)(i.map(rv))}const Is={test:Jw,parse:Kp,createTransformer:qp,getAnimatableNone:iv};function kd(t,i,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?t+(i-t)*6*a:a<1/2?i:a<2/3?t+(i-t)*(2/3-a)*6:t}function sv({hue:t,saturation:i,lightness:a,alpha:u}){t/=360,i/=100,a/=100;let m=0,x=0,w=0;if(!i)m=x=w=a;else{const b=a<.5?a*(1+i):a+i-a*i,v=2*a-b;m=kd(v,b,t+1/3),x=kd(v,b,t),w=kd(v,b,t-1/3)}return{red:Math.round(m*255),green:Math.round(x*255),blue:Math.round(w*255),alpha:u}}function _c(t,i){return a=>a>0?i:t}const Cn=(t,i,a)=>t+(i-t)*a,Pd=(t,i,a)=>{const u=t*t,m=a*(i*i-u)+u;return m<0?0:Math.sqrt(m)},ov=[qd,to,jo],av=t=>ov.find(i=>i.test(t));function U1(t){const i=av(t);if(!i)return!1;let a=i.parse(t);return i===jo&&(a=sv(a)),a}const z1=(t,i)=>{const a=U1(t),u=U1(i);if(!a||!u)return _c(t,i);const m={...a};return x=>(m.red=Pd(a.red,u.red,x),m.green=Pd(a.green,u.green,x),m.blue=Pd(a.blue,u.blue,x),m.alpha=Cn(a.alpha,u.alpha,x),to.transform(m))},Qd=new Set(["none","hidden"]);function lv(t,i){return Qd.has(t)?a=>a<=0?t:i:a=>a>=1?i:t}function cv(t,i){return a=>Cn(t,i,a)}function $f(t){return typeof t=="number"?cv:typeof t=="string"?Gf(t)?_c:Bn.test(t)?z1:fv:Array.isArray(t)?Qp:typeof t=="object"?Bn.test(t)?z1:uv:_c}function Qp(t,i){const a=[...t],u=a.length,m=t.map((x,w)=>$f(x)(x,i[w]));return x=>{for(let w=0;w<u;w++)a[w]=m[w](x);return a}}function uv(t,i){const a={...t,...i},u={};for(const m in a)t[m]!==void 0&&i[m]!==void 0&&(u[m]=$f(t[m])(t[m],i[m]));return m=>{for(const x in u)a[x]=u[x](m);return a}}function dv(t,i){const a=[],u={color:0,var:0,number:0};for(let m=0;m<i.values.length;m++){const x=i.types[m],w=t.indexes[x][u[x]],b=t.values[w]??0;a[m]=b,u[x]++}return a}const fv=(t,i)=>{const a=Is.createTransformer(i),u=Ya(t),m=Ya(i);return u.indexes.var.length===m.indexes.var.length&&u.indexes.color.length===m.indexes.color.length&&u.indexes.number.length>=m.indexes.number.length?Qd.has(t)&&!m.values.length||Qd.has(i)&&!u.values.length?lv(t,i):tl(Qp(dv(u,m),m.values),a):_c(t,i)};function Jp(t,i,a){return typeof t=="number"&&typeof i=="number"&&typeof a=="number"?Cn(t,i,a):$f(t)(t,i)}const hv=t=>{const i=({timestamp:a})=>t(a);return{start:(a=!0)=>ln.update(i,a),stop:()=>qi(i),now:()=>fr.isProcessing?fr.timestamp:Lr.now()}},eg=(t,i,a=10)=>{let u="";const m=Math.max(Math.round(i/a),2);for(let x=0;x<m;x++)u+=Math.round(t(x/(m-1))*1e4)/1e4+", ";return`linear(${u.substring(0,u.length-2)})`},Rc=2e4;function Zf(t){let i=0;const a=50;let u=t.next(i);for(;!u.done&&i<Rc;)i+=a,u=t.next(i);return i>=Rc?1/0:i}function mv(t,i=100,a){const u=a({...t,keyframes:[0,i]}),m=Math.min(Zf(u),Rc);return{type:"keyframes",ease:x=>u.next(m*x).value/i,duration:bi(m)}}const pv=5;function tg(t,i,a){const u=Math.max(i-pv,0);return Op(a-t(u),i-u)}const _n={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},W1=.001;function gv({duration:t=_n.duration,bounce:i=_n.bounce,velocity:a=_n.velocity,mass:u=_n.mass}){let m,x,w=1-i;w=Zi(_n.minDamping,_n.maxDamping,w),t=Zi(_n.minDuration,_n.maxDuration,bi(t)),w<1?(m=C=>{const A=C*w,T=A*t,_=A-a,O=Jd(C,w),L=Math.exp(-T);return W1-_/O*L},x=C=>{const T=C*w*t,_=T*a+a,O=Math.pow(w,2)*Math.pow(C,2)*t,L=Math.exp(-T),B=Jd(Math.pow(C,2),w);return(-m(C)+W1>0?-1:1)*((_-O)*L)/B}):(m=C=>{const A=Math.exp(-C*t),T=(C-a)*t+1;return-.001+A*T},x=C=>{const A=Math.exp(-C*t),T=(a-C)*(t*t);return A*T});const b=5/t,v=yv(m,x,b);if(t=Ci(t),isNaN(v))return{stiffness:_n.stiffness,damping:_n.damping,duration:t};{const C=Math.pow(v,2)*u;return{stiffness:C,damping:w*2*Math.sqrt(u*C),duration:t}}}const xv=12;function yv(t,i,a){let u=a;for(let m=1;m<xv;m++)u=u-t(u)/i(u);return u}function Jd(t,i){return t*Math.sqrt(1-i*i)}const wv=["duration","bounce"],vv=["stiffness","damping","mass"];function H1(t,i){return i.some(a=>t[a]!==void 0)}function Cv(t){let i={velocity:_n.velocity,stiffness:_n.stiffness,damping:_n.damping,mass:_n.mass,isResolvedFromDuration:!1,...t};if(!H1(t,vv)&&H1(t,wv))if(t.visualDuration){const a=t.visualDuration,u=2*Math.PI/(a*1.2),m=u*u,x=2*Zi(.05,1,1-(t.bounce||0))*Math.sqrt(m);i={...i,mass:_n.mass,stiffness:m,damping:x}}else{const a=gv(t);i={...i,...a,mass:_n.mass},i.isResolvedFromDuration=!0}return i}function kc(t=_n.visualDuration,i=_n.bounce){const a=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:i}:t;let{restSpeed:u,restDelta:m}=a;const x=a.keyframes[0],w=a.keyframes[a.keyframes.length-1],b={done:!1,value:x},{stiffness:v,damping:C,mass:A,duration:T,velocity:_,isResolvedFromDuration:O}=Cv({...a,velocity:-bi(a.velocity||0)}),L=_||0,B=C/(2*Math.sqrt(v*A)),j=w-x,W=bi(Math.sqrt(v/A)),U=Math.abs(j)<5;u||(u=U?_n.restSpeed.granular:_n.restSpeed.default),m||(m=U?_n.restDelta.granular:_n.restDelta.default);let F;if(B<1){const K=Jd(W,B);F=ne=>{const q=Math.exp(-B*W*ne);return w-q*((L+B*W*j)/K*Math.sin(K*ne)+j*Math.cos(K*ne))}}else if(B===1)F=K=>w-Math.exp(-W*K)*(j+(L+W*j)*K);else{const K=W*Math.sqrt(B*B-1);F=ne=>{const q=Math.exp(-B*W*ne),ie=Math.min(K*ne,300);return w-q*((L+B*W*j)*Math.sinh(ie)+K*j*Math.cosh(ie))/K}}const Y={calculatedDuration:O&&T||null,next:K=>{const ne=F(K);if(O)b.done=K>=T;else{let q=K===0?L:0;B<1&&(q=K===0?Ci(L):tg(F,K,ne));const ie=Math.abs(q)<=u,J=Math.abs(w-ne)<=m;b.done=ie&&J}return b.value=b.done?w:ne,b},toString:()=>{const K=Math.min(Zf(Y),Rc),ne=eg(q=>Y.next(K*q).value,K,30);return K+"ms "+ne},toTransition:()=>{}};return Y}kc.applyToOptions=t=>{const i=mv(t,100,kc);return t.ease=i.ease,t.duration=Ci(i.duration),t.type="keyframes",t};function ef({keyframes:t,velocity:i=0,power:a=.8,timeConstant:u=325,bounceDamping:m=10,bounceStiffness:x=500,modifyTarget:w,min:b,max:v,restDelta:C=.5,restSpeed:A}){const T=t[0],_={done:!1,value:T},O=ie=>b!==void 0&&ie<b||v!==void 0&&ie>v,L=ie=>b===void 0?v:v===void 0||Math.abs(b-ie)<Math.abs(v-ie)?b:v;let B=a*i;const j=T+B,W=w===void 0?j:w(j);W!==j&&(B=W-T);const U=ie=>-B*Math.exp(-ie/u),F=ie=>W+U(ie),Y=ie=>{const J=U(ie),we=F(ie);_.done=Math.abs(J)<=C,_.value=_.done?W:we};let K,ne;const q=ie=>{O(_.value)&&(K=ie,ne=kc({keyframes:[_.value,L(_.value)],velocity:tg(F,ie,_.value),damping:m,stiffness:x,restDelta:C,restSpeed:A}))};return q(0),{calculatedDuration:null,next:ie=>{let J=!1;return!ne&&K===void 0&&(J=!0,Y(ie),q(ie)),K!==void 0&&ie>=K?ne.next(ie-K):(!J&&Y(ie),_)}}}function bv(t,i,a){const u=[],m=a||Ki.mix||Jp,x=t.length-1;for(let w=0;w<x;w++){let b=m(t[w],t[w+1]);if(i){const v=Array.isArray(i)?i[w]||ni:i;b=tl(v,b)}u.push(b)}return u}function ng(t,i,{clamp:a=!0,ease:u,mixer:m}={}){const x=t.length;if(Ff(x===i.length),x===1)return()=>i[0];if(x===2&&i[0]===i[1])return()=>i[1];const w=t[0]===t[1];t[0]>t[x-1]&&(t=[...t].reverse(),i=[...i].reverse());const b=bv(i,u,m),v=b.length,C=A=>{if(w&&A<t[0])return i[0];let T=0;if(v>1)for(;T<t.length-2&&!(A<t[T+1]);T++);const _=Ga(t[T],t[T+1],A);return b[T](_)};return a?A=>C(Zi(t[0],t[x-1],A)):C}function Ev(t,i){const a=t[t.length-1];for(let u=1;u<=i;u++){const m=Ga(0,i,u);t.push(Cn(a,1,m))}}function Sv(t){const i=[0];return Ev(i,t.length-1),i}function Av(t,i){return t.map(a=>a*i)}function Nv(t,i){return t.map(()=>i||Wp).splice(0,t.length-1)}function ja({duration:t=300,keyframes:i,times:a,ease:u="easeInOut"}){const m=Bw(u)?u.map(B1):B1(u),x={done:!1,value:i[0]},w=Av(a&&a.length===i.length?a:Sv(i),t),b=ng(w,i,{ease:Array.isArray(m)?m:Nv(i,m)});return{calculatedDuration:t,next:v=>(x.value=b(v),x.done=v>=t,x)}}const Iv=t=>t!==null;function Kf(t,{repeat:i,repeatType:a="loop"},u,m=1){const x=t.filter(Iv),b=m<0||i&&a!=="loop"&&i%2===1?0:x.length-1;return!b||u===void 0?x[b]:u}const Tv={decay:ef,inertia:ef,tween:ja,keyframes:ja,spring:kc};function rg(t){typeof t.type=="string"&&(t.type=Tv[t.type])}class qf{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(i=>{this.resolve=i})}notifyFinished(){this.resolve()}then(i,a){return this.finished.then(i,a)}}const _v=t=>t/100;class Gc extends qf{constructor(i){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var u,m;const{motionValue:a}=this.options;a&&a.updatedAt!==Lr.now()&&this.tick(Lr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(m=(u=this.options).onStop)==null||m.call(u))},this.options=i,this.initAnimation(),this.play(),i.autoplay===!1&&this.pause()}initAnimation(){const{options:i}=this;rg(i);const{type:a=ja,repeat:u=0,repeatDelay:m=0,repeatType:x,velocity:w=0}=i;let{keyframes:b}=i;const v=a||ja;v!==ja&&typeof b[0]!="number"&&(this.mixKeyframes=tl(_v,Jp(b[0],b[1])),b=[0,100]);const C=v({...i,keyframes:b});x==="mirror"&&(this.mirroredGenerator=v({...i,keyframes:[...b].reverse(),velocity:-w})),C.calculatedDuration===null&&(C.calculatedDuration=Zf(C));const{calculatedDuration:A}=C;this.calculatedDuration=A,this.resolvedDuration=A+m,this.totalDuration=this.resolvedDuration*(u+1)-m,this.generator=C}updateTime(i){const a=Math.round(i-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=a}tick(i,a=!1){const{generator:u,totalDuration:m,mixKeyframes:x,mirroredGenerator:w,resolvedDuration:b,calculatedDuration:v}=this;if(this.startTime===null)return u.next(0);const{delay:C=0,keyframes:A,repeat:T,repeatType:_,repeatDelay:O,type:L,onUpdate:B,finalKeyframe:j}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,i):this.speed<0&&(this.startTime=Math.min(i-m/this.speed,this.startTime)),a?this.currentTime=i:this.updateTime(i);const W=this.currentTime-C*(this.playbackSpeed>=0?1:-1),U=this.playbackSpeed>=0?W<0:W>m;this.currentTime=Math.max(W,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=m);let F=this.currentTime,Y=u;if(T){const ie=Math.min(this.currentTime,m)/b;let J=Math.floor(ie),we=ie%1;!we&&ie>=1&&(we=1),we===1&&J--,J=Math.min(J,T+1),!!(J%2)&&(_==="reverse"?(we=1-we,O&&(we-=O/b)):_==="mirror"&&(Y=w)),F=Zi(0,1,we)*b}const K=U?{done:!1,value:A[0]}:Y.next(F);x&&(K.value=x(K.value));let{done:ne}=K;!U&&v!==null&&(ne=this.playbackSpeed>=0?this.currentTime>=m:this.currentTime<=0);const q=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ne);return q&&L!==ef&&(K.value=Kf(A,this.options,j,this.speed)),B&&B(K.value),q&&this.finish(),K}then(i,a){return this.finished.then(i,a)}get duration(){return bi(this.calculatedDuration)}get time(){return bi(this.currentTime)}set time(i){var a;i=Ci(i),this.currentTime=i,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=i:this.driver&&(this.startTime=this.driver.now()-i/this.playbackSpeed),(a=this.driver)==null||a.start(!1)}get speed(){return this.playbackSpeed}set speed(i){this.updateTime(Lr.now());const a=this.playbackSpeed!==i;this.playbackSpeed=i,a&&(this.time=bi(this.currentTime))}play(){var m,x;if(this.isStopped)return;const{driver:i=hv,startTime:a}=this.options;this.driver||(this.driver=i(w=>this.tick(w))),(x=(m=this.options).onPlay)==null||x.call(m);const u=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=u):this.holdTime!==null?this.startTime=u-this.holdTime:this.startTime||(this.startTime=a??u),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Lr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var i,a;this.notifyFinished(),this.teardown(),this.state="finished",(a=(i=this.options).onComplete)==null||a.call(i)}cancel(){var i,a;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(a=(i=this.options).onCancel)==null||a.call(i)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(i){return this.startTime=0,this.tick(i,!0)}attachTimeline(i){var a;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(a=this.driver)==null||a.stop(),i.observe(this)}}function Rv(t){for(let i=1;i<t.length;i++)t[i]??(t[i]=t[i-1])}const no=t=>t*180/Math.PI,tf=t=>{const i=no(Math.atan2(t[1],t[0]));return nf(i)},kv={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:tf,rotateZ:tf,skewX:t=>no(Math.atan(t[1])),skewY:t=>no(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},nf=t=>(t=t%360,t<0&&(t+=360),t),G1=tf,X1=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Y1=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Pv={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:X1,scaleY:Y1,scale:t=>(X1(t)+Y1(t))/2,rotateX:t=>nf(no(Math.atan2(t[6],t[5]))),rotateY:t=>nf(no(Math.atan2(-t[2],t[0]))),rotateZ:G1,rotate:G1,skewX:t=>no(Math.atan(t[4])),skewY:t=>no(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function rf(t){return t.includes("scale")?1:0}function sf(t,i){if(!t||t==="none")return rf(i);const a=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let u,m;if(a)u=Pv,m=a;else{const b=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);u=kv,m=b}if(!m)return rf(i);const x=u[i],w=m[1].split(",").map(Ov);return typeof x=="function"?x(w):w[x]}const Mv=(t,i)=>{const{transform:a="none"}=getComputedStyle(t);return sf(a,i)};function Ov(t){return parseFloat(t.trim())}const Zo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ko=new Set(Zo),$1=t=>t===$o||t===vt,Dv=new Set(["x","y","z"]),Lv=Zo.filter(t=>!Dv.has(t));function jv(t){const i=[];return Lv.forEach(a=>{const u=t.getValue(a);u!==void 0&&(i.push([a,u.get()]),u.set(a.startsWith("scale")?1:0))}),i}const io={width:({x:t},{paddingLeft:i="0",paddingRight:a="0"})=>t.max-t.min-parseFloat(i)-parseFloat(a),height:({y:t},{paddingTop:i="0",paddingBottom:a="0"})=>t.max-t.min-parseFloat(i)-parseFloat(a),top:(t,{top:i})=>parseFloat(i),left:(t,{left:i})=>parseFloat(i),bottom:({y:t},{top:i})=>parseFloat(i)+(t.max-t.min),right:({x:t},{left:i})=>parseFloat(i)+(t.max-t.min),x:(t,{transform:i})=>sf(i,"x"),y:(t,{transform:i})=>sf(i,"y")};io.translateX=io.x;io.translateY=io.y;const so=new Set;let of=!1,af=!1,lf=!1;function ig(){if(af){const t=Array.from(so).filter(u=>u.needsMeasurement),i=new Set(t.map(u=>u.element)),a=new Map;i.forEach(u=>{const m=jv(u);m.length&&(a.set(u,m),u.render())}),t.forEach(u=>u.measureInitialState()),i.forEach(u=>{u.render();const m=a.get(u);m&&m.forEach(([x,w])=>{var b;(b=u.getValue(x))==null||b.set(w)})}),t.forEach(u=>u.measureEndState()),t.forEach(u=>{u.suspendedScrollY!==void 0&&window.scrollTo(0,u.suspendedScrollY)})}af=!1,of=!1,so.forEach(t=>t.complete(lf)),so.clear()}function sg(){so.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(af=!0)})}function Bv(){lf=!0,sg(),ig(),lf=!1}class Qf{constructor(i,a,u,m,x,w=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...i],this.onComplete=a,this.name=u,this.motionValue=m,this.element=x,this.isAsync=w}scheduleResolve(){this.state="scheduled",this.isAsync?(so.add(this),of||(of=!0,ln.read(sg),ln.resolveKeyframes(ig))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:i,name:a,element:u,motionValue:m}=this;if(i[0]===null){const x=m==null?void 0:m.get(),w=i[i.length-1];if(x!==void 0)i[0]=x;else if(u&&a){const b=u.readValue(a,w);b!=null&&(i[0]=b)}i[0]===void 0&&(i[0]=w),m&&x===void 0&&m.set(i[0])}Rv(i)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(i=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,i),so.delete(this)}cancel(){this.state==="scheduled"&&(so.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Fv=t=>t.startsWith("--");function Vv(t,i,a){Fv(i)?t.style.setProperty(i,a):t.style[i]=a}const Uv=Vf(()=>window.ScrollTimeline!==void 0),zv={};function Wv(t,i){const a=Vf(t);return()=>zv[i]??a()}const og=Wv(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Da=([t,i,a,u])=>`cubic-bezier(${t}, ${i}, ${a}, ${u})`,Z1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Da([0,.65,.55,1]),circOut:Da([.55,0,1,.45]),backIn:Da([.31,.01,.66,-.59]),backOut:Da([.33,1.53,.69,.99])};function ag(t,i){if(t)return typeof t=="function"?og()?eg(t,i):"ease-out":Hp(t)?Da(t):Array.isArray(t)?t.map(a=>ag(a,i)||Z1.easeOut):Z1[t]}function Hv(t,i,a,{delay:u=0,duration:m=300,repeat:x=0,repeatType:w="loop",ease:b="easeOut",times:v}={},C=void 0){const A={[i]:a};v&&(A.offset=v);const T=ag(b,m);Array.isArray(T)&&(A.easing=T);const _={delay:u,duration:m,easing:Array.isArray(T)?"linear":T,fill:"both",iterations:x+1,direction:w==="reverse"?"alternate":"normal"};return C&&(_.pseudoElement=C),t.animate(A,_)}function lg(t){return typeof t=="function"&&"applyToOptions"in t}function Gv({type:t,...i}){return lg(t)&&og()?t.applyToOptions(i):(i.duration??(i.duration=300),i.ease??(i.ease="easeOut"),i)}class Xv extends qf{constructor(i){if(super(),this.finishedTime=null,this.isStopped=!1,!i)return;const{element:a,name:u,keyframes:m,pseudoElement:x,allowFlatten:w=!1,finalKeyframe:b,onComplete:v}=i;this.isPseudoElement=!!x,this.allowFlatten=w,this.options=i,Ff(typeof i.type!="string");const C=Gv(i);this.animation=Hv(a,u,m,C,x),C.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!x){const A=Kf(m,this.options,b,this.speed);this.updateMotionValue?this.updateMotionValue(A):Vv(a,u,A),this.animation.cancel()}v==null||v(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var i,a;(a=(i=this.animation).finish)==null||a.call(i)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:i}=this;i==="idle"||i==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var i,a;this.isPseudoElement||(a=(i=this.animation).commitStyles)==null||a.call(i)}get duration(){var a,u;const i=((u=(a=this.animation.effect)==null?void 0:a.getComputedTiming)==null?void 0:u.call(a).duration)||0;return bi(Number(i))}get time(){return bi(Number(this.animation.currentTime)||0)}set time(i){this.finishedTime=null,this.animation.currentTime=Ci(i)}get speed(){return this.animation.playbackRate}set speed(i){i<0&&(this.finishedTime=null),this.animation.playbackRate=i}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(i){this.animation.startTime=i}attachTimeline({timeline:i,observe:a}){var u;return this.allowFlatten&&((u=this.animation.effect)==null||u.updateTiming({easing:"linear"})),this.animation.onfinish=null,i&&Uv()?(this.animation.timeline=i,ni):a(this)}}const cg={anticipate:Vp,backInOut:Fp,circInOut:zp};function Yv(t){return t in cg}function $v(t){typeof t.ease=="string"&&Yv(t.ease)&&(t.ease=cg[t.ease])}const K1=10;class Zv extends Xv{constructor(i){$v(i),rg(i),super(i),i.startTime&&(this.startTime=i.startTime),this.options=i}updateMotionValue(i){const{motionValue:a,onUpdate:u,onComplete:m,element:x,...w}=this.options;if(!a)return;if(i!==void 0){a.set(i);return}const b=new Gc({...w,autoplay:!1}),v=Ci(this.finishedTime??this.time);a.setWithVelocity(b.sample(v-K1).value,b.sample(v).value,K1),b.stop()}}const q1=(t,i)=>i==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Is.test(t)||t==="0")&&!t.startsWith("url("));function Kv(t){const i=t[0];if(t.length===1)return!0;for(let a=0;a<t.length;a++)if(t[a]!==i)return!0}function qv(t,i,a,u){const m=t[0];if(m===null)return!1;if(i==="display"||i==="visibility")return!0;const x=t[t.length-1],w=q1(m,i),b=q1(x,i);return!w||!b?!1:Kv(t)||(a==="spring"||lg(a))&&u}function cf(t){t.duration=0,t.type}const Qv=new Set(["opacity","clipPath","filter","transform"]),Jv=Vf(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function e3(t){var A;const{motionValue:i,name:a,repeatDelay:u,repeatType:m,damping:x,type:w}=t;if(!(((A=i==null?void 0:i.owner)==null?void 0:A.current)instanceof HTMLElement))return!1;const{onUpdate:v,transformTemplate:C}=i.owner.getProps();return Jv()&&a&&Qv.has(a)&&(a!=="transform"||!C)&&!v&&!u&&m!=="mirror"&&x!==0&&w!=="inertia"}const t3=40;class n3 extends qf{constructor({autoplay:i=!0,delay:a=0,type:u="keyframes",repeat:m=0,repeatDelay:x=0,repeatType:w="loop",keyframes:b,name:v,motionValue:C,element:A,...T}){var L;super(),this.stop=()=>{var B,j;this._animation&&(this._animation.stop(),(B=this.stopTimeline)==null||B.call(this)),(j=this.keyframeResolver)==null||j.cancel()},this.createdAt=Lr.now();const _={autoplay:i,delay:a,type:u,repeat:m,repeatDelay:x,repeatType:w,name:v,motionValue:C,element:A,...T},O=(A==null?void 0:A.KeyframeResolver)||Qf;this.keyframeResolver=new O(b,(B,j,W)=>this.onKeyframesResolved(B,j,_,!W),v,C,A),(L=this.keyframeResolver)==null||L.scheduleResolve()}onKeyframesResolved(i,a,u,m){this.keyframeResolver=void 0;const{name:x,type:w,velocity:b,delay:v,isHandoff:C,onUpdate:A}=u;this.resolvedAt=Lr.now(),qv(i,x,w,b)||((Ki.instantAnimations||!v)&&(A==null||A(Kf(i,u,a))),i[0]=i[i.length-1],cf(u),u.repeat=0);const _={startTime:m?this.resolvedAt?this.resolvedAt-this.createdAt>t3?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:a,...u,keyframes:i},O=!C&&e3(_)?new Zv({..._,element:_.motionValue.owner.current}):new Gc(_);O.finished.then(()=>this.notifyFinished()).catch(ni),this.pendingTimeline&&(this.stopTimeline=O.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=O}get finished(){return this._animation?this.animation.finished:this._finished}then(i,a){return this.finished.finally(i).then(()=>{})}get animation(){var i;return this._animation||((i=this.keyframeResolver)==null||i.resume(),Bv()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(i){this.animation.time=i}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(i){this.animation.speed=i}get startTime(){return this.animation.startTime}attachTimeline(i){return this._animation?this.stopTimeline=this.animation.attachTimeline(i):this.pendingTimeline=i,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var i;this._animation&&this.animation.cancel(),(i=this.keyframeResolver)==null||i.cancel()}}const r3=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function i3(t){const i=r3.exec(t);if(!i)return[,];const[,a,u,m]=i;return[`--${a??u}`,m]}function ug(t,i,a=1){const[u,m]=i3(t);if(!u)return;const x=window.getComputedStyle(i).getPropertyValue(u);if(x){const w=x.trim();return kp(w)?parseFloat(w):w}return Gf(m)?ug(m,i,a+1):m}function Jf(t,i){return(t==null?void 0:t[i])??(t==null?void 0:t.default)??t}const dg=new Set(["width","height","top","left","right","bottom",...Zo]),s3={test:t=>t==="auto",parse:t=>t},fg=t=>i=>i.test(t),hg=[$o,vt,Ei,Ss,qw,Kw,s3],Q1=t=>hg.find(fg(t));function o3(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Mp(t):!0}const a3=new Set(["brightness","contrast","saturate","opacity"]);function l3(t){const[i,a]=t.slice(0,-1).split("(");if(i==="drop-shadow")return t;const[u]=a.match(Xf)||[];if(!u)return t;const m=a.replace(u,"");let x=a3.has(i)?1:0;return u!==a&&(x*=100),i+"("+x+m+")"}const c3=/\b([a-z-]*)\(.*?\)/gu,uf={...Is,getAnimatableNone:t=>{const i=t.match(c3);return i?i.map(l3).join(" "):t}},J1={...$o,transform:Math.round},u3={rotate:Ss,rotateX:Ss,rotateY:Ss,rotateZ:Ss,scale:hc,scaleX:hc,scaleY:hc,scaleZ:hc,skew:Ss,skewX:Ss,skewY:Ss,distance:vt,translateX:vt,translateY:vt,translateZ:vt,x:vt,y:vt,z:vt,perspective:vt,transformPerspective:vt,opacity:Xa,originX:F1,originY:F1,originZ:vt},eh={borderWidth:vt,borderTopWidth:vt,borderRightWidth:vt,borderBottomWidth:vt,borderLeftWidth:vt,borderRadius:vt,radius:vt,borderTopLeftRadius:vt,borderTopRightRadius:vt,borderBottomRightRadius:vt,borderBottomLeftRadius:vt,width:vt,maxWidth:vt,height:vt,maxHeight:vt,top:vt,right:vt,bottom:vt,left:vt,padding:vt,paddingTop:vt,paddingRight:vt,paddingBottom:vt,paddingLeft:vt,margin:vt,marginTop:vt,marginRight:vt,marginBottom:vt,marginLeft:vt,backgroundPositionX:vt,backgroundPositionY:vt,...u3,zIndex:J1,fillOpacity:Xa,strokeOpacity:Xa,numOctaves:J1},d3={...eh,color:Bn,backgroundColor:Bn,outlineColor:Bn,fill:Bn,stroke:Bn,borderColor:Bn,borderTopColor:Bn,borderRightColor:Bn,borderBottomColor:Bn,borderLeftColor:Bn,filter:uf,WebkitFilter:uf},mg=t=>d3[t];function pg(t,i){let a=mg(t);return a!==uf&&(a=Is),a.getAnimatableNone?a.getAnimatableNone(i):void 0}const f3=new Set(["auto","none","0"]);function h3(t,i,a){let u=0,m;for(;u<t.length&&!m;){const x=t[u];typeof x=="string"&&!f3.has(x)&&Ya(x).values.length&&(m=t[u]),u++}if(m&&a)for(const x of i)t[x]=pg(a,m)}class m3 extends Qf{constructor(i,a,u,m,x){super(i,a,u,m,x,!0)}readKeyframes(){const{unresolvedKeyframes:i,element:a,name:u}=this;if(!a||!a.current)return;super.readKeyframes();for(let v=0;v<i.length;v++){let C=i[v];if(typeof C=="string"&&(C=C.trim(),Gf(C))){const A=ug(C,a.current);A!==void 0&&(i[v]=A),v===i.length-1&&(this.finalKeyframe=C)}}if(this.resolveNoneKeyframes(),!dg.has(u)||i.length!==2)return;const[m,x]=i,w=Q1(m),b=Q1(x);if(w!==b)if($1(w)&&$1(b))for(let v=0;v<i.length;v++){const C=i[v];typeof C=="string"&&(i[v]=parseFloat(C))}else io[u]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:i,name:a}=this,u=[];for(let m=0;m<i.length;m++)(i[m]===null||o3(i[m]))&&u.push(m);u.length&&h3(i,u,a)}measureInitialState(){const{element:i,unresolvedKeyframes:a,name:u}=this;if(!i||!i.current)return;u==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=io[u](i.measureViewportBox(),window.getComputedStyle(i.current)),a[0]=this.measuredOrigin;const m=a[a.length-1];m!==void 0&&i.getValue(u,m).jump(m,!1)}measureEndState(){var b;const{element:i,name:a,unresolvedKeyframes:u}=this;if(!i||!i.current)return;const m=i.getValue(a);m&&m.jump(this.measuredOrigin,!1);const x=u.length-1,w=u[x];u[x]=io[a](i.measureViewportBox(),window.getComputedStyle(i.current)),w!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=w),(b=this.removedTransforms)!=null&&b.length&&this.removedTransforms.forEach(([v,C])=>{i.getValue(v).set(C)}),this.resolveNoneKeyframes()}}function gg(t,i,a){if(t instanceof EventTarget)return[t];if(typeof t=="string"){const m=document.querySelectorAll(t);return m?Array.from(m):[]}return Array.from(t)}const xg=(t,i)=>i&&typeof t=="number"?i.transform(t):t;function yg(t){return Pp(t)&&"offsetHeight"in t}const em=30,p3=t=>!isNaN(parseFloat(t)),Ba={current:void 0};class g3{constructor(i,a={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=u=>{var x;const m=Lr.now();if(this.updatedAt!==m&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(u),this.current!==this.prev&&((x=this.events.change)==null||x.notify(this.current),this.dependents))for(const w of this.dependents)w.dirty()},this.hasAnimated=!1,this.setCurrent(i),this.owner=a.owner}setCurrent(i){this.current=i,this.updatedAt=Lr.now(),this.canTrackVelocity===null&&i!==void 0&&(this.canTrackVelocity=p3(this.current))}setPrevFrameValue(i=this.current){this.prevFrameValue=i,this.prevUpdatedAt=this.updatedAt}onChange(i){return this.on("change",i)}on(i,a){this.events[i]||(this.events[i]=new Uf);const u=this.events[i].add(a);return i==="change"?()=>{u(),ln.read(()=>{this.events.change.getSize()||this.stop()})}:u}clearListeners(){for(const i in this.events)this.events[i].clear()}attach(i,a){this.passiveEffect=i,this.stopPassiveEffect=a}set(i){this.passiveEffect?this.passiveEffect(i,this.updateAndNotify):this.updateAndNotify(i)}setWithVelocity(i,a,u){this.set(a),this.prev=void 0,this.prevFrameValue=i,this.prevUpdatedAt=this.updatedAt-u}jump(i,a=!0){this.updateAndNotify(i),this.prev=i,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var i;(i=this.events.change)==null||i.notify(this.current)}addDependent(i){this.dependents||(this.dependents=new Set),this.dependents.add(i)}removeDependent(i){this.dependents&&this.dependents.delete(i)}get(){return Ba.current&&Ba.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const i=Lr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||i-this.updatedAt>em)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,em);return Op(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(i){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=i(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var i,a;(i=this.dependents)==null||i.clear(),(a=this.events.destroy)==null||a.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function oo(t,i){return new g3(t,i)}const{schedule:th}=Gp(queueMicrotask,!1),di={x:!1,y:!1};function wg(){return di.x||di.y}function x3(t){return t==="x"||t==="y"?di[t]?null:(di[t]=!0,()=>{di[t]=!1}):di.x||di.y?null:(di.x=di.y=!0,()=>{di.x=di.y=!1})}function vg(t,i){const a=gg(t),u=new AbortController,m={passive:!0,...i,signal:u.signal};return[a,m,()=>u.abort()]}function tm(t){return!(t.pointerType==="touch"||wg())}function y3(t,i,a={}){const[u,m,x]=vg(t,a),w=b=>{if(!tm(b))return;const{target:v}=b,C=i(v,b);if(typeof C!="function"||!v)return;const A=T=>{tm(T)&&(C(T),v.removeEventListener("pointerleave",A))};v.addEventListener("pointerleave",A,m)};return u.forEach(b=>{b.addEventListener("pointerenter",w,m)}),x}const Cg=(t,i)=>i?t===i?!0:Cg(t,i.parentElement):!1,nh=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,w3=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function v3(t){return w3.has(t.tagName)||t.tabIndex!==-1}const bc=new WeakSet;function nm(t){return i=>{i.key==="Enter"&&t(i)}}function Md(t,i){t.dispatchEvent(new PointerEvent("pointer"+i,{isPrimary:!0,bubbles:!0}))}const C3=(t,i)=>{const a=t.currentTarget;if(!a)return;const u=nm(()=>{if(bc.has(a))return;Md(a,"down");const m=nm(()=>{Md(a,"up")}),x=()=>Md(a,"cancel");a.addEventListener("keyup",m,i),a.addEventListener("blur",x,i)});a.addEventListener("keydown",u,i),a.addEventListener("blur",()=>a.removeEventListener("keydown",u),i)};function rm(t){return nh(t)&&!wg()}function b3(t,i,a={}){const[u,m,x]=vg(t,a),w=b=>{const v=b.currentTarget;if(!rm(b))return;bc.add(v);const C=i(v,b),A=(O,L)=>{window.removeEventListener("pointerup",T),window.removeEventListener("pointercancel",_),bc.has(v)&&bc.delete(v),rm(O)&&typeof C=="function"&&C(O,{success:L})},T=O=>{A(O,v===window||v===document||a.useGlobalTarget||Cg(v,O.target))},_=O=>{A(O,!1)};window.addEventListener("pointerup",T,m),window.addEventListener("pointercancel",_,m)};return u.forEach(b=>{(a.useGlobalTarget?window:b).addEventListener("pointerdown",w,m),yg(b)&&(b.addEventListener("focus",C=>C3(C,m)),!v3(b)&&!b.hasAttribute("tabindex")&&(b.tabIndex=0))}),x}function bg(t){return Pp(t)&&"ownerSVGElement"in t}function E3(t){return bg(t)&&t.tagName==="svg"}function S3(...t){const i=!Array.isArray(t[0]),a=i?0:-1,u=t[0+a],m=t[1+a],x=t[2+a],w=t[3+a],b=ng(m,x,w);return i?b(u):b}const rr=t=>!!(t&&t.getVelocity);function A3(t,i,a){const u=t.get();let m=null,x=u,w;const b=typeof u=="string"?u.replace(/[\d.-]/g,""):void 0,v=()=>{m&&(m.stop(),m=null)},C=()=>{v(),m=new Gc({keyframes:[sm(t.get()),sm(x)],velocity:t.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...a,onUpdate:w})};if(t.attach((A,T)=>(x=A,w=_=>T(im(_,b)),ln.postRender(C),t.get()),v),rr(i)){const A=i.on("change",_=>t.set(im(_,b))),T=t.on("destroy",A);return()=>{A(),T()}}return v}function im(t,i){return i?t+i:t}function sm(t){return typeof t=="number"?t:parseFloat(t)}const N3=[...hg,Bn,Is],I3=t=>N3.find(fg(t)),il=N.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class T3 extends N.Component{getSnapshotBeforeUpdate(i){const a=this.props.childRef.current;if(a&&i.isPresent&&!this.props.isPresent){const u=a.offsetParent,m=yg(u)&&u.offsetWidth||0,x=this.props.sizeRef.current;x.height=a.offsetHeight||0,x.width=a.offsetWidth||0,x.top=a.offsetTop,x.left=a.offsetLeft,x.right=m-x.width-x.left}return null}componentDidUpdate(){}render(){return this.props.children}}function _3({children:t,isPresent:i,anchorX:a,root:u}){const m=N.useId(),x=N.useRef(null),w=N.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:b}=N.useContext(il);return N.useInsertionEffect(()=>{const{width:v,height:C,top:A,left:T,right:_}=w.current;if(i||!x.current||!v||!C)return;const O=a==="left"?`left: ${T}`:`right: ${_}`;x.current.dataset.motionPopId=m;const L=document.createElement("style");b&&(L.nonce=b);const B=u??document.head;return B.appendChild(L),L.sheet&&L.sheet.insertRule(`
          [data-motion-pop-id="${m}"] {
            position: absolute !important;
            width: ${v}px !important;
            height: ${C}px !important;
            ${O}px !important;
            top: ${A}px !important;
          }
        `),()=>{B.contains(L)&&B.removeChild(L)}},[i]),h.jsx(T3,{isPresent:i,childRef:x,sizeRef:w,children:N.cloneElement(t,{ref:x})})}const R3=({children:t,initial:i,isPresent:a,onExitComplete:u,custom:m,presenceAffectsLayout:x,mode:w,anchorX:b,root:v})=>{const C=el(k3),A=N.useId();let T=!0,_=N.useMemo(()=>(T=!1,{id:A,initial:i,isPresent:a,custom:m,onExitComplete:O=>{C.set(O,!0);for(const L of C.values())if(!L)return;u&&u()},register:O=>(C.set(O,!1),()=>C.delete(O))}),[a,C,u]);return x&&T&&(_={..._}),N.useMemo(()=>{C.forEach((O,L)=>C.set(L,!1))},[a]),N.useEffect(()=>{!a&&!C.size&&u&&u()},[a]),w==="popLayout"&&(t=h.jsx(_3,{isPresent:a,anchorX:b,root:v,children:t})),h.jsx(Hc.Provider,{value:_,children:t})};function k3(){return new Map}function Eg(t=!0){const i=N.useContext(Hc);if(i===null)return[!0,null];const{isPresent:a,onExitComplete:u,register:m}=i,x=N.useId();N.useEffect(()=>{if(t)return m(x)},[t]);const w=N.useCallback(()=>t&&u&&u(x),[x,u,t]);return!a&&u?[!1,w]:[!0]}const mc=t=>t.key||"";function om(t){const i=[];return N.Children.forEach(t,a=>{N.isValidElement(a)&&i.push(a)}),i}const jr=({children:t,custom:i,initial:a=!0,onExitComplete:u,presenceAffectsLayout:m=!0,mode:x="sync",propagate:w=!1,anchorX:b="left",root:v})=>{const[C,A]=Eg(w),T=N.useMemo(()=>om(t),[t]),_=w&&!C?[]:T.map(mc),O=N.useRef(!0),L=N.useRef(T),B=el(()=>new Map),[j,W]=N.useState(T),[U,F]=N.useState(T);Lf(()=>{O.current=!1,L.current=T;for(let ne=0;ne<U.length;ne++){const q=mc(U[ne]);_.includes(q)?B.delete(q):B.get(q)!==!0&&B.set(q,!1)}},[U,_.length,_.join("-")]);const Y=[];if(T!==j){let ne=[...T];for(let q=0;q<U.length;q++){const ie=U[q],J=mc(ie);_.includes(J)||(ne.splice(q,0,ie),Y.push(ie))}return x==="wait"&&Y.length&&(ne=Y),F(om(ne)),W(T),null}const{forceRender:K}=N.useContext(Of);return h.jsx(h.Fragment,{children:U.map(ne=>{const q=mc(ne),ie=w&&!C?!1:T===U||_.includes(q),J=()=>{if(B.has(q))B.set(q,!0);else return;let we=!0;B.forEach(Re=>{Re||(we=!1)}),we&&(K==null||K(),F(L.current),w&&(A==null||A()),u&&u())};return h.jsx(R3,{isPresent:ie,initial:!O.current||a?void 0:!1,custom:i,presenceAffectsLayout:m,mode:x,root:v,onExitComplete:ie?void 0:J,anchorX:b,children:ne},q)})})},Sg=N.createContext({strict:!1}),am={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Go={};for(const t in am)Go[t]={isEnabled:i=>am[t].some(a=>!!i[a])};function P3(t){for(const i in t)Go[i]={...Go[i],...t[i]}}const M3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Pc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||M3.has(t)}let Ag=t=>!Pc(t);function O3(t){typeof t=="function"&&(Ag=i=>i.startsWith("on")?!Pc(i):t(i))}try{O3(require("@emotion/is-prop-valid").default)}catch{}function D3(t,i,a){const u={};for(const m in t)m==="values"&&typeof t.values=="object"||(Ag(m)||a===!0&&Pc(m)||!i&&!Pc(m)||t.draggable&&m.startsWith("onDrag"))&&(u[m]=t[m]);return u}const Xc=N.createContext({});function Yc(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function $a(t){return typeof t=="string"||Array.isArray(t)}const rh=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ih=["initial",...rh];function $c(t){return Yc(t.animate)||ih.some(i=>$a(t[i]))}function Ng(t){return!!($c(t)||t.variants)}function L3(t,i){if($c(t)){const{initial:a,animate:u}=t;return{initial:a===!1||$a(a)?a:void 0,animate:$a(u)?u:void 0}}return t.inherit!==!1?i:{}}function j3(t){const{initial:i,animate:a}=L3(t,N.useContext(Xc));return N.useMemo(()=>({initial:i,animate:a}),[lm(i),lm(a)])}function lm(t){return Array.isArray(t)?t.join(" "):t}const Za={};function B3(t){for(const i in t)Za[i]=t[i],Hf(i)&&(Za[i].isCSSVariable=!0)}function Ig(t,{layout:i,layoutId:a}){return Ko.has(t)||t.startsWith("origin")||(i||a!==void 0)&&(!!Za[t]||t==="opacity")}const F3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},V3=Zo.length;function U3(t,i,a){let u="",m=!0;for(let x=0;x<V3;x++){const w=Zo[x],b=t[w];if(b===void 0)continue;let v=!0;if(typeof b=="number"?v=b===(w.startsWith("scale")?1:0):v=parseFloat(b)===0,!v||a){const C=xg(b,eh[w]);if(!v){m=!1;const A=F3[w]||w;u+=`${A}(${C}) `}a&&(i[w]=C)}}return u=u.trim(),a?u=a(i,m?"":u):m&&(u="none"),u}function sh(t,i,a){const{style:u,vars:m,transformOrigin:x}=t;let w=!1,b=!1;for(const v in i){const C=i[v];if(Ko.has(v)){w=!0;continue}else if(Hf(v)){m[v]=C;continue}else{const A=xg(C,eh[v]);v.startsWith("origin")?(b=!0,x[v]=A):u[v]=A}}if(i.transform||(w||a?u.transform=U3(i,t.transform,a):u.transform&&(u.transform="none")),b){const{originX:v="50%",originY:C="50%",originZ:A=0}=x;u.transformOrigin=`${v} ${C} ${A}`}}const oh=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Tg(t,i,a){for(const u in i)!rr(i[u])&&!Ig(u,a)&&(t[u]=i[u])}function z3({transformTemplate:t},i){return N.useMemo(()=>{const a=oh();return sh(a,i,t),Object.assign({},a.vars,a.style)},[i])}function W3(t,i){const a=t.style||{},u={};return Tg(u,a,t),Object.assign(u,z3(t,i)),u}function H3(t,i){const a={},u=W3(t,i);return t.drag&&t.dragListener!==!1&&(a.draggable=!1,u.userSelect=u.WebkitUserSelect=u.WebkitTouchCallout="none",u.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(a.tabIndex=0),a.style=u,a}const G3={offset:"stroke-dashoffset",array:"stroke-dasharray"},X3={offset:"strokeDashoffset",array:"strokeDasharray"};function Y3(t,i,a=1,u=0,m=!0){t.pathLength=1;const x=m?G3:X3;t[x.offset]=vt.transform(-u);const w=vt.transform(i),b=vt.transform(a);t[x.array]=`${w} ${b}`}function _g(t,{attrX:i,attrY:a,attrScale:u,pathLength:m,pathSpacing:x=1,pathOffset:w=0,...b},v,C,A){if(sh(t,b,C),v){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:T,style:_}=t;T.transform&&(_.transform=T.transform,delete T.transform),(_.transform||T.transformOrigin)&&(_.transformOrigin=T.transformOrigin??"50% 50%",delete T.transformOrigin),_.transform&&(_.transformBox=(A==null?void 0:A.transformBox)??"fill-box",delete T.transformBox),i!==void 0&&(T.x=i),a!==void 0&&(T.y=a),u!==void 0&&(T.scale=u),m!==void 0&&Y3(T,m,x,w,!1)}const Rg=()=>({...oh(),attrs:{}}),kg=t=>typeof t=="string"&&t.toLowerCase()==="svg";function $3(t,i,a,u){const m=N.useMemo(()=>{const x=Rg();return _g(x,i,kg(u),t.transformTemplate,t.style),{...x.attrs,style:{...x.style}}},[i]);if(t.style){const x={};Tg(x,t.style,t),m.style={...x,...m.style}}return m}const Z3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ah(t){return typeof t!="string"||t.includes("-")?!1:!!(Z3.indexOf(t)>-1||/[A-Z]/u.test(t))}function K3(t,i,a,{latestValues:u},m,x=!1){const b=(ah(t)?$3:H3)(i,u,m,t),v=D3(i,typeof t=="string",x),C=t!==N.Fragment?{...v,...b,ref:a}:{},{children:A}=i,T=N.useMemo(()=>rr(A)?A.get():A,[A]);return N.createElement(t,{...C,children:T})}function cm(t){const i=[{},{}];return t==null||t.values.forEach((a,u)=>{i[0][u]=a.get(),i[1][u]=a.getVelocity()}),i}function lh(t,i,a,u){if(typeof i=="function"){const[m,x]=cm(u);i=i(a!==void 0?a:t.custom,m,x)}if(typeof i=="string"&&(i=t.variants&&t.variants[i]),typeof i=="function"){const[m,x]=cm(u);i=i(a!==void 0?a:t.custom,m,x)}return i}function Ec(t){return rr(t)?t.get():t}function q3({scrapeMotionValuesFromProps:t,createRenderState:i},a,u,m){return{latestValues:Q3(a,u,m,t),renderState:i()}}function Q3(t,i,a,u){const m={},x=u(t,{});for(const _ in x)m[_]=Ec(x[_]);let{initial:w,animate:b}=t;const v=$c(t),C=Ng(t);i&&C&&!v&&t.inherit!==!1&&(w===void 0&&(w=i.initial),b===void 0&&(b=i.animate));let A=a?a.initial===!1:!1;A=A||w===!1;const T=A?b:w;if(T&&typeof T!="boolean"&&!Yc(T)){const _=Array.isArray(T)?T:[T];for(let O=0;O<_.length;O++){const L=lh(t,_[O]);if(L){const{transitionEnd:B,transition:j,...W}=L;for(const U in W){let F=W[U];if(Array.isArray(F)){const Y=A?F.length-1:0;F=F[Y]}F!==null&&(m[U]=F)}for(const U in B)m[U]=B[U]}}}return m}const Pg=t=>(i,a)=>{const u=N.useContext(Xc),m=N.useContext(Hc),x=()=>q3(t,i,u,m);return a?x():el(x)};function ch(t,i,a){var x;const{style:u}=t,m={};for(const w in u)(rr(u[w])||i.style&&rr(i.style[w])||Ig(w,t)||((x=a==null?void 0:a.getValue(w))==null?void 0:x.liveStyle)!==void 0)&&(m[w]=u[w]);return m}const J3=Pg({scrapeMotionValuesFromProps:ch,createRenderState:oh});function Mg(t,i,a){const u=ch(t,i,a);for(const m in t)if(rr(t[m])||rr(i[m])){const x=Zo.indexOf(m)!==-1?"attr"+m.charAt(0).toUpperCase()+m.substring(1):m;u[x]=t[m]}return u}const eC=Pg({scrapeMotionValuesFromProps:Mg,createRenderState:Rg}),tC=Symbol.for("motionComponentSymbol");function Bo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function nC(t,i,a){return N.useCallback(u=>{u&&t.onMount&&t.onMount(u),i&&(u?i.mount(u):i.unmount()),a&&(typeof a=="function"?a(u):Bo(a)&&(a.current=u))},[i])}const uh=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),rC="framerAppearId",Og="data-"+uh(rC),Dg=N.createContext({});function iC(t,i,a,u,m){var B,j;const{visualElement:x}=N.useContext(Xc),w=N.useContext(Sg),b=N.useContext(Hc),v=N.useContext(il).reducedMotion,C=N.useRef(null);u=u||w.renderer,!C.current&&u&&(C.current=u(t,{visualState:i,parent:x,props:a,presenceContext:b,blockInitialAnimation:b?b.initial===!1:!1,reducedMotionConfig:v}));const A=C.current,T=N.useContext(Dg);A&&!A.projection&&m&&(A.type==="html"||A.type==="svg")&&sC(C.current,a,m,T);const _=N.useRef(!1);N.useInsertionEffect(()=>{A&&_.current&&A.update(a,b)});const O=a[Og],L=N.useRef(!!O&&!((B=window.MotionHandoffIsComplete)!=null&&B.call(window,O))&&((j=window.MotionHasOptimisedAnimation)==null?void 0:j.call(window,O)));return Lf(()=>{A&&(_.current=!0,window.MotionIsMounted=!0,A.updateFeatures(),A.scheduleRenderMicrotask(),L.current&&A.animationState&&A.animationState.animateChanges())}),N.useEffect(()=>{A&&(!L.current&&A.animationState&&A.animationState.animateChanges(),L.current&&(queueMicrotask(()=>{var W;(W=window.MotionHandoffMarkAsComplete)==null||W.call(window,O)}),L.current=!1),A.enteringChildren=void 0)}),A}function sC(t,i,a,u){const{layoutId:m,layout:x,drag:w,dragConstraints:b,layoutScroll:v,layoutRoot:C,layoutCrossfade:A}=i;t.projection=new a(t.latestValues,i["data-framer-portal-id"]?void 0:Lg(t.parent)),t.projection.setOptions({layoutId:m,layout:x,alwaysMeasureLayout:!!w||b&&Bo(b),visualElement:t,animationType:typeof x=="string"?x:"both",initialPromotionConfig:u,crossfade:A,layoutScroll:v,layoutRoot:C})}function Lg(t){if(t)return t.options.allowProjection!==!1?t.projection:Lg(t.parent)}function Od(t,{forwardMotionProps:i=!1}={},a,u){a&&P3(a);const m=ah(t)?eC:J3;function x(b,v){let C;const A={...N.useContext(il),...b,layoutId:oC(b)},{isStatic:T}=A,_=j3(b),O=m(b,T);if(!T&&Df){aC();const L=lC(A);C=L.MeasureLayout,_.visualElement=iC(t,O,A,u,L.ProjectionNode)}return h.jsxs(Xc.Provider,{value:_,children:[C&&_.visualElement?h.jsx(C,{visualElement:_.visualElement,...A}):null,K3(t,b,nC(O,_.visualElement,v),O,T,i)]})}x.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const w=N.forwardRef(x);return w[tC]=t,w}function oC({layoutId:t}){const i=N.useContext(Of).id;return i&&t!==void 0?i+"-"+t:t}function aC(t,i){N.useContext(Sg).strict}function lC(t){const{drag:i,layout:a}=Go;if(!i&&!a)return{};const u={...i,...a};return{MeasureLayout:i!=null&&i.isEnabled(t)||a!=null&&a.isEnabled(t)?u.MeasureLayout:void 0,ProjectionNode:u.ProjectionNode}}function cC(t,i){if(typeof Proxy>"u")return Od;const a=new Map,u=(x,w)=>Od(x,w,t,i),m=(x,w)=>u(x,w);return new Proxy(m,{get:(x,w)=>w==="create"?u:(a.has(w)||a.set(w,Od(w,void 0,t,i)),a.get(w))})}function jg({top:t,left:i,right:a,bottom:u}){return{x:{min:i,max:a},y:{min:t,max:u}}}function uC({x:t,y:i}){return{top:i.min,right:t.max,bottom:i.max,left:t.min}}function dC(t,i){if(!i)return t;const a=i({x:t.left,y:t.top}),u=i({x:t.right,y:t.bottom});return{top:a.y,left:a.x,bottom:u.y,right:u.x}}function Dd(t){return t===void 0||t===1}function df({scale:t,scaleX:i,scaleY:a}){return!Dd(t)||!Dd(i)||!Dd(a)}function eo(t){return df(t)||Bg(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Bg(t){return um(t.x)||um(t.y)}function um(t){return t&&t!=="0%"}function Mc(t,i,a){const u=t-a,m=i*u;return a+m}function dm(t,i,a,u,m){return m!==void 0&&(t=Mc(t,m,u)),Mc(t,a,u)+i}function ff(t,i=0,a=1,u,m){t.min=dm(t.min,i,a,u,m),t.max=dm(t.max,i,a,u,m)}function Fg(t,{x:i,y:a}){ff(t.x,i.translate,i.scale,i.originPoint),ff(t.y,a.translate,a.scale,a.originPoint)}const fm=.999999999999,hm=1.0000000000001;function fC(t,i,a,u=!1){const m=a.length;if(!m)return;i.x=i.y=1;let x,w;for(let b=0;b<m;b++){x=a[b],w=x.projectionDelta;const{visualElement:v}=x.options;v&&v.props.style&&v.props.style.display==="contents"||(u&&x.options.layoutScroll&&x.scroll&&x!==x.root&&Vo(t,{x:-x.scroll.offset.x,y:-x.scroll.offset.y}),w&&(i.x*=w.x.scale,i.y*=w.y.scale,Fg(t,w)),u&&eo(x.latestValues)&&Vo(t,x.latestValues))}i.x<hm&&i.x>fm&&(i.x=1),i.y<hm&&i.y>fm&&(i.y=1)}function Fo(t,i){t.min=t.min+i,t.max=t.max+i}function mm(t,i,a,u,m=.5){const x=Cn(t.min,t.max,m);ff(t,i,a,x,u)}function Vo(t,i){mm(t.x,i.x,i.scaleX,i.scale,i.originX),mm(t.y,i.y,i.scaleY,i.scale,i.originY)}function Vg(t,i){return jg(dC(t.getBoundingClientRect(),i))}function hC(t,i,a){const u=Vg(t,a),{scroll:m}=i;return m&&(Fo(u.x,m.offset.x),Fo(u.y,m.offset.y)),u}const pm=()=>({translate:0,scale:1,origin:0,originPoint:0}),Uo=()=>({x:pm(),y:pm()}),gm=()=>({min:0,max:0}),Mn=()=>({x:gm(),y:gm()}),hf={current:null},Ug={current:!1};function mC(){if(Ug.current=!0,!!Df)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),i=()=>hf.current=t.matches;t.addEventListener("change",i),i()}else hf.current=!1}const pC=new WeakMap;function gC(t,i,a){for(const u in i){const m=i[u],x=a[u];if(rr(m))t.addValue(u,m);else if(rr(x))t.addValue(u,oo(m,{owner:t}));else if(x!==m)if(t.hasValue(u)){const w=t.getValue(u);w.liveStyle===!0?w.jump(m):w.hasAnimated||w.set(m)}else{const w=t.getStaticValue(u);t.addValue(u,oo(w!==void 0?w:m,{owner:t}))}}for(const u in a)i[u]===void 0&&t.removeValue(u);return i}const xm=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class xC{scrapeMotionValuesFromProps(i,a,u){return{}}constructor({parent:i,props:a,presenceContext:u,reducedMotionConfig:m,blockInitialAnimation:x,visualState:w},b={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Qf,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=Lr.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,ln.render(this.render,!1,!0))};const{latestValues:v,renderState:C}=w;this.latestValues=v,this.baseTarget={...v},this.initialValues=a.initial?{...v}:{},this.renderState=C,this.parent=i,this.props=a,this.presenceContext=u,this.depth=i?i.depth+1:0,this.reducedMotionConfig=m,this.options=b,this.blockInitialAnimation=!!x,this.isControllingVariants=$c(a),this.isVariantNode=Ng(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(i&&i.current);const{willChange:A,...T}=this.scrapeMotionValuesFromProps(a,{},this);for(const _ in T){const O=T[_];v[_]!==void 0&&rr(O)&&O.set(v[_])}}mount(i){var a;this.current=i,pC.set(i,this),this.projection&&!this.projection.instance&&this.projection.mount(i),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((u,m)=>this.bindToMotionValue(m,u)),Ug.current||mC(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:hf.current,(a=this.parent)==null||a.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var i;this.projection&&this.projection.unmount(),qi(this.notifyUpdate),qi(this.render),this.valueSubscriptions.forEach(a=>a()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(i=this.parent)==null||i.removeChild(this);for(const a in this.events)this.events[a].clear();for(const a in this.features){const u=this.features[a];u&&(u.unmount(),u.isMounted=!1)}this.current=null}addChild(i){this.children.add(i),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(i)}removeChild(i){this.children.delete(i),this.enteringChildren&&this.enteringChildren.delete(i)}bindToMotionValue(i,a){this.valueSubscriptions.has(i)&&this.valueSubscriptions.get(i)();const u=Ko.has(i);u&&this.onBindTransform&&this.onBindTransform();const m=a.on("change",w=>{this.latestValues[i]=w,this.props.onUpdate&&ln.preRender(this.notifyUpdate),u&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let x;window.MotionCheckAppearSync&&(x=window.MotionCheckAppearSync(this,i,a)),this.valueSubscriptions.set(i,()=>{m(),x&&x(),a.owner&&a.stop()})}sortNodePosition(i){return!this.current||!this.sortInstanceNodePosition||this.type!==i.type?0:this.sortInstanceNodePosition(this.current,i.current)}updateFeatures(){let i="animation";for(i in Go){const a=Go[i];if(!a)continue;const{isEnabled:u,Feature:m}=a;if(!this.features[i]&&m&&u(this.props)&&(this.features[i]=new m(this)),this.features[i]){const x=this.features[i];x.isMounted?x.update():(x.mount(),x.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Mn()}getStaticValue(i){return this.latestValues[i]}setStaticValue(i,a){this.latestValues[i]=a}update(i,a){(i.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=i,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let u=0;u<xm.length;u++){const m=xm[u];this.propEventSubscriptions[m]&&(this.propEventSubscriptions[m](),delete this.propEventSubscriptions[m]);const x="on"+m,w=i[x];w&&(this.propEventSubscriptions[m]=this.on(m,w))}this.prevMotionValues=gC(this,this.scrapeMotionValuesFromProps(i,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(i){return this.props.variants?this.props.variants[i]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(i){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(i),()=>a.variantChildren.delete(i)}addValue(i,a){const u=this.values.get(i);a!==u&&(u&&this.removeValue(i),this.bindToMotionValue(i,a),this.values.set(i,a),this.latestValues[i]=a.get())}removeValue(i){this.values.delete(i);const a=this.valueSubscriptions.get(i);a&&(a(),this.valueSubscriptions.delete(i)),delete this.latestValues[i],this.removeValueFromRenderState(i,this.renderState)}hasValue(i){return this.values.has(i)}getValue(i,a){if(this.props.values&&this.props.values[i])return this.props.values[i];let u=this.values.get(i);return u===void 0&&a!==void 0&&(u=oo(a===null?void 0:a,{owner:this}),this.addValue(i,u)),u}readValue(i,a){let u=this.latestValues[i]!==void 0||!this.current?this.latestValues[i]:this.getBaseTargetFromProps(this.props,i)??this.readValueFromInstance(this.current,i,this.options);return u!=null&&(typeof u=="string"&&(kp(u)||Mp(u))?u=parseFloat(u):!I3(u)&&Is.test(a)&&(u=pg(i,a)),this.setBaseTarget(i,rr(u)?u.get():u)),rr(u)?u.get():u}setBaseTarget(i,a){this.baseTarget[i]=a}getBaseTarget(i){var x;const{initial:a}=this.props;let u;if(typeof a=="string"||typeof a=="object"){const w=lh(this.props,a,(x=this.presenceContext)==null?void 0:x.custom);w&&(u=w[i])}if(a&&u!==void 0)return u;const m=this.getBaseTargetFromProps(this.props,i);return m!==void 0&&!rr(m)?m:this.initialValues[i]!==void 0&&u===void 0?void 0:this.baseTarget[i]}on(i,a){return this.events[i]||(this.events[i]=new Uf),this.events[i].add(a)}notify(i,...a){this.events[i]&&this.events[i].notify(...a)}scheduleRenderMicrotask(){th.render(this.render)}}class zg extends xC{constructor(){super(...arguments),this.KeyframeResolver=m3}sortInstanceNodePosition(i,a){return i.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(i,a){return i.style?i.style[a]:void 0}removeValueFromRenderState(i,{vars:a,style:u}){delete a[i],delete u[i]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:i}=this.props;rr(i)&&(this.childSubscription=i.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function Wg(t,{style:i,vars:a},u,m){const x=t.style;let w;for(w in i)x[w]=i[w];m==null||m.applyProjectionStyles(x,u);for(w in a)x.setProperty(w,a[w])}function yC(t){return window.getComputedStyle(t)}class wC extends zg{constructor(){super(...arguments),this.type="html",this.renderInstance=Wg}readValueFromInstance(i,a){var u;if(Ko.has(a))return(u=this.projection)!=null&&u.isProjecting?rf(a):Mv(i,a);{const m=yC(i),x=(Hf(a)?m.getPropertyValue(a):m[a])||0;return typeof x=="string"?x.trim():x}}measureInstanceViewportBox(i,{transformPagePoint:a}){return Vg(i,a)}build(i,a,u){sh(i,a,u.transformTemplate)}scrapeMotionValuesFromProps(i,a,u){return ch(i,a,u)}}const Hg=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function vC(t,i,a,u){Wg(t,i,void 0,u);for(const m in i.attrs)t.setAttribute(Hg.has(m)?m:uh(m),i.attrs[m])}class CC extends zg{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Mn}getBaseTargetFromProps(i,a){return i[a]}readValueFromInstance(i,a){if(Ko.has(a)){const u=mg(a);return u&&u.default||0}return a=Hg.has(a)?a:uh(a),i.getAttribute(a)}scrapeMotionValuesFromProps(i,a,u){return Mg(i,a,u)}build(i,a,u){_g(i,a,this.isSVGTag,u.transformTemplate,u.style)}renderInstance(i,a,u,m){vC(i,a,u,m)}mount(i){this.isSVGTag=kg(i.tagName),super.mount(i)}}const bC=(t,i)=>ah(t)?new CC(i):new wC(i,{allowProjection:t!==N.Fragment});function Wo(t,i,a){const u=t.getProps();return lh(u,i,a!==void 0?a:u.custom,t)}const mf=t=>Array.isArray(t);function EC(t,i,a){t.hasValue(i)?t.getValue(i).set(a):t.addValue(i,oo(a))}function SC(t){return mf(t)?t[t.length-1]||0:t}function AC(t,i){const a=Wo(t,i);let{transitionEnd:u={},transition:m={},...x}=a||{};x={...x,...u};for(const w in x){const b=SC(x[w]);EC(t,w,b)}}function NC(t){return!!(rr(t)&&t.add)}function pf(t,i){const a=t.getValue("willChange");if(NC(a))return a.add(i);if(!a&&Ki.WillChange){const u=new Ki.WillChange("auto");t.addValue("willChange",u),u.add(i)}}function Gg(t){return t.props[Og]}const IC=t=>t!==null;function TC(t,{repeat:i,repeatType:a="loop"},u){const m=t.filter(IC),x=i&&a!=="loop"&&i%2===1?0:m.length-1;return m[x]}const _C={type:"spring",stiffness:500,damping:25,restSpeed:10},RC=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),kC={type:"keyframes",duration:.8},PC={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},MC=(t,{keyframes:i})=>i.length>2?kC:Ko.has(t)?t.startsWith("scale")?RC(i[1]):_C:PC;function OC({when:t,delay:i,delayChildren:a,staggerChildren:u,staggerDirection:m,repeat:x,repeatType:w,repeatDelay:b,from:v,elapsed:C,...A}){return!!Object.keys(A).length}const dh=(t,i,a,u={},m,x)=>w=>{const b=Jf(u,t)||{},v=b.delay||u.delay||0;let{elapsed:C=0}=u;C=C-Ci(v);const A={keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:i.getVelocity(),...b,delay:-C,onUpdate:_=>{i.set(_),b.onUpdate&&b.onUpdate(_)},onComplete:()=>{w(),b.onComplete&&b.onComplete()},name:t,motionValue:i,element:x?void 0:m};OC(b)||Object.assign(A,MC(t,A)),A.duration&&(A.duration=Ci(A.duration)),A.repeatDelay&&(A.repeatDelay=Ci(A.repeatDelay)),A.from!==void 0&&(A.keyframes[0]=A.from);let T=!1;if((A.type===!1||A.duration===0&&!A.repeatDelay)&&(cf(A),A.delay===0&&(T=!0)),(Ki.instantAnimations||Ki.skipAnimations)&&(T=!0,cf(A),A.delay=0),A.allowFlatten=!b.type&&!b.ease,T&&!x&&i.get()!==void 0){const _=TC(A.keyframes,b);if(_!==void 0){ln.update(()=>{A.onUpdate(_),A.onComplete()});return}}return b.isSync?new Gc(A):new n3(A)};function DC({protectedKeys:t,needsAnimating:i},a){const u=t.hasOwnProperty(a)&&i[a]!==!0;return i[a]=!1,u}function Xg(t,i,{delay:a=0,transitionOverride:u,type:m}={}){let{transition:x=t.getDefaultTransition(),transitionEnd:w,...b}=i;u&&(x=u);const v=[],C=m&&t.animationState&&t.animationState.getState()[m];for(const A in b){const T=t.getValue(A,t.latestValues[A]??null),_=b[A];if(_===void 0||C&&DC(C,A))continue;const O={delay:a,...Jf(x||{},A)},L=T.get();if(L!==void 0&&!T.isAnimating&&!Array.isArray(_)&&_===L&&!O.velocity)continue;let B=!1;if(window.MotionHandoffAnimation){const W=Gg(t);if(W){const U=window.MotionHandoffAnimation(W,A,ln);U!==null&&(O.startTime=U,B=!0)}}pf(t,A),T.start(dh(A,T,_,t.shouldReduceMotion&&dg.has(A)?{type:!1}:O,t,B));const j=T.animation;j&&v.push(j)}return w&&Promise.all(v).then(()=>{ln.update(()=>{w&&AC(t,w)})}),v}function Yg(t,i,a,u=0,m=1){const x=Array.from(t).sort((C,A)=>C.sortNodePosition(A)).indexOf(i),w=t.size,b=(w-1)*u;return typeof a=="function"?a(x,w):m===1?x*u:b-x*u}function gf(t,i,a={}){var v;const u=Wo(t,i,a.type==="exit"?(v=t.presenceContext)==null?void 0:v.custom:void 0);let{transition:m=t.getDefaultTransition()||{}}=u||{};a.transitionOverride&&(m=a.transitionOverride);const x=u?()=>Promise.all(Xg(t,u,a)):()=>Promise.resolve(),w=t.variantChildren&&t.variantChildren.size?(C=0)=>{const{delayChildren:A=0,staggerChildren:T,staggerDirection:_}=m;return LC(t,i,C,A,T,_,a)}:()=>Promise.resolve(),{when:b}=m;if(b){const[C,A]=b==="beforeChildren"?[x,w]:[w,x];return C().then(()=>A())}else return Promise.all([x(),w(a.delay)])}function LC(t,i,a=0,u=0,m=0,x=1,w){const b=[];for(const v of t.variantChildren)v.notify("AnimationStart",i),b.push(gf(v,i,{...w,delay:a+(typeof u=="function"?0:u)+Yg(t.variantChildren,v,u,m,x)}).then(()=>v.notify("AnimationComplete",i)));return Promise.all(b)}function jC(t,i,a={}){t.notify("AnimationStart",i);let u;if(Array.isArray(i)){const m=i.map(x=>gf(t,x,a));u=Promise.all(m)}else if(typeof i=="string")u=gf(t,i,a);else{const m=typeof i=="function"?Wo(t,i,a.custom):i;u=Promise.all(Xg(t,m,a))}return u.then(()=>{t.notify("AnimationComplete",i)})}function $g(t,i){if(!Array.isArray(i))return!1;const a=i.length;if(a!==t.length)return!1;for(let u=0;u<a;u++)if(i[u]!==t[u])return!1;return!0}const BC=ih.length;function Zg(t){if(!t)return;if(!t.isControllingVariants){const a=t.parent?Zg(t.parent)||{}:{};return t.props.initial!==void 0&&(a.initial=t.props.initial),a}const i={};for(let a=0;a<BC;a++){const u=ih[a],m=t.props[u];($a(m)||m===!1)&&(i[u]=m)}return i}const FC=[...rh].reverse(),VC=rh.length;function UC(t){return i=>Promise.all(i.map(({animation:a,options:u})=>jC(t,a,u)))}function zC(t){let i=UC(t),a=ym(),u=!0;const m=v=>(C,A)=>{var _;const T=Wo(t,A,v==="exit"?(_=t.presenceContext)==null?void 0:_.custom:void 0);if(T){const{transition:O,transitionEnd:L,...B}=T;C={...C,...B,...L}}return C};function x(v){i=v(t)}function w(v){const{props:C}=t,A=Zg(t.parent)||{},T=[],_=new Set;let O={},L=1/0;for(let j=0;j<VC;j++){const W=FC[j],U=a[W],F=C[W]!==void 0?C[W]:A[W],Y=$a(F),K=W===v?U.isActive:null;K===!1&&(L=j);let ne=F===A[W]&&F!==C[W]&&Y;if(ne&&u&&t.manuallyAnimateOnMount&&(ne=!1),U.protectedKeys={...O},!U.isActive&&K===null||!F&&!U.prevProp||Yc(F)||typeof F=="boolean")continue;const q=WC(U.prevProp,F);let ie=q||W===v&&U.isActive&&!ne&&Y||j>L&&Y,J=!1;const we=Array.isArray(F)?F:[F];let Re=we.reduce(m(W),{});K===!1&&(Re={});const{prevResolvedValues:Ae={}}=U,be={...Ae,...Re},Ie=ve=>{ie=!0,_.has(ve)&&(J=!0,_.delete(ve)),U.needsAnimating[ve]=!0;const ye=t.getValue(ve);ye&&(ye.liveStyle=!1)};for(const ve in be){const ye=Re[ve],De=Ae[ve];if(O.hasOwnProperty(ve))continue;let Ee=!1;mf(ye)&&mf(De)?Ee=!$g(ye,De):Ee=ye!==De,Ee?ye!=null?Ie(ve):_.add(ve):ye!==void 0&&_.has(ve)?Ie(ve):U.protectedKeys[ve]=!0}U.prevProp=F,U.prevResolvedValues=Re,U.isActive&&(O={...O,...Re}),u&&t.blockInitialAnimation&&(ie=!1);const $=ne&&q;ie&&(!$||J)&&T.push(...we.map(ve=>{const ye={type:W};if(typeof ve=="string"&&u&&!$&&t.manuallyAnimateOnMount&&t.parent){const{parent:De}=t,Ee=Wo(De,ve);if(De.enteringChildren&&Ee){const{delayChildren:X}=Ee.transition||{};ye.delay=Yg(De.enteringChildren,t,X)}}return{animation:ve,options:ye}}))}if(_.size){const j={};if(typeof C.initial!="boolean"){const W=Wo(t,Array.isArray(C.initial)?C.initial[0]:C.initial);W&&W.transition&&(j.transition=W.transition)}_.forEach(W=>{const U=t.getBaseTarget(W),F=t.getValue(W);F&&(F.liveStyle=!0),j[W]=U??null}),T.push({animation:j})}let B=!!T.length;return u&&(C.initial===!1||C.initial===C.animate)&&!t.manuallyAnimateOnMount&&(B=!1),u=!1,B?i(T):Promise.resolve()}function b(v,C){var T;if(a[v].isActive===C)return Promise.resolve();(T=t.variantChildren)==null||T.forEach(_=>{var O;return(O=_.animationState)==null?void 0:O.setActive(v,C)}),a[v].isActive=C;const A=w(v);for(const _ in a)a[_].protectedKeys={};return A}return{animateChanges:w,setActive:b,setAnimateFunction:x,getState:()=>a,reset:()=>{a=ym(),u=!0}}}function WC(t,i){return typeof i=="string"?i!==t:Array.isArray(i)?!$g(i,t):!1}function Js(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ym(){return{animate:Js(!0),whileInView:Js(),whileHover:Js(),whileTap:Js(),whileDrag:Js(),whileFocus:Js(),exit:Js()}}class Ts{constructor(i){this.isMounted=!1,this.node=i}update(){}}class HC extends Ts{constructor(i){super(i),i.animationState||(i.animationState=zC(i))}updateAnimationControlsSubscription(){const{animate:i}=this.node.getProps();Yc(i)&&(this.unmountControls=i.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:i}=this.node.getProps(),{animate:a}=this.node.prevProps||{};i!==a&&this.updateAnimationControlsSubscription()}unmount(){var i;this.node.animationState.reset(),(i=this.unmountControls)==null||i.call(this)}}let GC=0;class XC extends Ts{constructor(){super(...arguments),this.id=GC++}update(){if(!this.node.presenceContext)return;const{isPresent:i,onExitComplete:a}=this.node.presenceContext,{isPresent:u}=this.node.prevPresenceContext||{};if(!this.node.animationState||i===u)return;const m=this.node.animationState.setActive("exit",!i);a&&!i&&m.then(()=>{a(this.id)})}mount(){const{register:i,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),i&&(this.unmount=i(this.id))}unmount(){}}const YC={animation:{Feature:HC},exit:{Feature:XC}};function Ka(t,i,a,u={passive:!0}){return t.addEventListener(i,a,u),()=>t.removeEventListener(i,a)}function sl(t){return{point:{x:t.pageX,y:t.pageY}}}const $C=t=>i=>nh(i)&&t(i,sl(i));function Fa(t,i,a,u){return Ka(t,i,$C(a),u)}const Kg=1e-4,ZC=1-Kg,KC=1+Kg,qg=.01,qC=0-qg,QC=0+qg;function Ar(t){return t.max-t.min}function JC(t,i,a){return Math.abs(t-i)<=a}function wm(t,i,a,u=.5){t.origin=u,t.originPoint=Cn(i.min,i.max,t.origin),t.scale=Ar(a)/Ar(i),t.translate=Cn(a.min,a.max,t.origin)-t.originPoint,(t.scale>=ZC&&t.scale<=KC||isNaN(t.scale))&&(t.scale=1),(t.translate>=qC&&t.translate<=QC||isNaN(t.translate))&&(t.translate=0)}function Va(t,i,a,u){wm(t.x,i.x,a.x,u?u.originX:void 0),wm(t.y,i.y,a.y,u?u.originY:void 0)}function vm(t,i,a){t.min=a.min+i.min,t.max=t.min+Ar(i)}function eb(t,i,a){vm(t.x,i.x,a.x),vm(t.y,i.y,a.y)}function Cm(t,i,a){t.min=i.min-a.min,t.max=t.min+Ar(i)}function Ua(t,i,a){Cm(t.x,i.x,a.x),Cm(t.y,i.y,a.y)}function ti(t){return[t("x"),t("y")]}const Qg=({current:t})=>t?t.ownerDocument.defaultView:null,bm=(t,i)=>Math.abs(t-i);function tb(t,i){const a=bm(t.x,i.x),u=bm(t.y,i.y);return Math.sqrt(a**2+u**2)}class Jg{constructor(i,a,{transformPagePoint:u,contextWindow:m=window,dragSnapToOrigin:x=!1,distanceThreshold:w=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=jd(this.lastMoveEventInfo,this.history),O=this.startEvent!==null,L=tb(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!O&&!L)return;const{point:B}=_,{timestamp:j}=fr;this.history.push({...B,timestamp:j});const{onStart:W,onMove:U}=this.handlers;O||(W&&W(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),U&&U(this.lastMoveEvent,_)},this.handlePointerMove=(_,O)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=Ld(O,this.transformPagePoint),ln.update(this.updatePoint,!0)},this.handlePointerUp=(_,O)=>{this.end();const{onEnd:L,onSessionEnd:B,resumeAnimation:j}=this.handlers;if(this.dragSnapToOrigin&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const W=jd(_.type==="pointercancel"?this.lastMoveEventInfo:Ld(O,this.transformPagePoint),this.history);this.startEvent&&L&&L(_,W),B&&B(_,W)},!nh(i))return;this.dragSnapToOrigin=x,this.handlers=a,this.transformPagePoint=u,this.distanceThreshold=w,this.contextWindow=m||window;const b=sl(i),v=Ld(b,this.transformPagePoint),{point:C}=v,{timestamp:A}=fr;this.history=[{...C,timestamp:A}];const{onSessionStart:T}=a;T&&T(i,jd(v,this.history)),this.removeListeners=tl(Fa(this.contextWindow,"pointermove",this.handlePointerMove),Fa(this.contextWindow,"pointerup",this.handlePointerUp),Fa(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(i){this.handlers=i}end(){this.removeListeners&&this.removeListeners(),qi(this.updatePoint)}}function Ld(t,i){return i?{point:i(t.point)}:t}function Em(t,i){return{x:t.x-i.x,y:t.y-i.y}}function jd({point:t},i){return{point:t,delta:Em(t,ex(i)),offset:Em(t,nb(i)),velocity:rb(i,.1)}}function nb(t){return t[0]}function ex(t){return t[t.length-1]}function rb(t,i){if(t.length<2)return{x:0,y:0};let a=t.length-1,u=null;const m=ex(t);for(;a>=0&&(u=t[a],!(m.timestamp-u.timestamp>Ci(i)));)a--;if(!u)return{x:0,y:0};const x=bi(m.timestamp-u.timestamp);if(x===0)return{x:0,y:0};const w={x:(m.x-u.x)/x,y:(m.y-u.y)/x};return w.x===1/0&&(w.x=0),w.y===1/0&&(w.y=0),w}function ib(t,{min:i,max:a},u){return i!==void 0&&t<i?t=u?Cn(i,t,u.min):Math.max(t,i):a!==void 0&&t>a&&(t=u?Cn(a,t,u.max):Math.min(t,a)),t}function Sm(t,i,a){return{min:i!==void 0?t.min+i:void 0,max:a!==void 0?t.max+a-(t.max-t.min):void 0}}function sb(t,{top:i,left:a,bottom:u,right:m}){return{x:Sm(t.x,a,m),y:Sm(t.y,i,u)}}function Am(t,i){let a=i.min-t.min,u=i.max-t.max;return i.max-i.min<t.max-t.min&&([a,u]=[u,a]),{min:a,max:u}}function ob(t,i){return{x:Am(t.x,i.x),y:Am(t.y,i.y)}}function ab(t,i){let a=.5;const u=Ar(t),m=Ar(i);return m>u?a=Ga(i.min,i.max-u,t.min):u>m&&(a=Ga(t.min,t.max-m,i.min)),Zi(0,1,a)}function lb(t,i){const a={};return i.min!==void 0&&(a.min=i.min-t.min),i.max!==void 0&&(a.max=i.max-t.min),a}const xf=.35;function cb(t=xf){return t===!1?t=0:t===!0&&(t=xf),{x:Nm(t,"left","right"),y:Nm(t,"top","bottom")}}function Nm(t,i,a){return{min:Im(t,i),max:Im(t,a)}}function Im(t,i){return typeof t=="number"?t:t[i]||0}const ub=new WeakMap;class db{constructor(i){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Mn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=i}start(i,{snapToCursor:a=!1,distanceThreshold:u}={}){const{presenceContext:m}=this.visualElement;if(m&&m.isPresent===!1)return;const x=T=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(sl(T).point)},w=(T,_)=>{const{drag:O,dragPropagation:L,onDragStart:B}=this.getProps();if(O&&!L&&(this.openDragLock&&this.openDragLock(),this.openDragLock=x3(O),!this.openDragLock))return;this.latestPointerEvent=T,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ti(W=>{let U=this.getAxisMotionValue(W).get()||0;if(Ei.test(U)){const{projection:F}=this.visualElement;if(F&&F.layout){const Y=F.layout.layoutBox[W];Y&&(U=Ar(Y)*(parseFloat(U)/100))}}this.originPoint[W]=U}),B&&ln.postRender(()=>B(T,_)),pf(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},b=(T,_)=>{this.latestPointerEvent=T,this.latestPanInfo=_;const{dragPropagation:O,dragDirectionLock:L,onDirectionLock:B,onDrag:j}=this.getProps();if(!O&&!this.openDragLock)return;const{offset:W}=_;if(L&&this.currentDirection===null){this.currentDirection=fb(W),this.currentDirection!==null&&B&&B(this.currentDirection);return}this.updateAxis("x",_.point,W),this.updateAxis("y",_.point,W),this.visualElement.render(),j&&j(T,_)},v=(T,_)=>{this.latestPointerEvent=T,this.latestPanInfo=_,this.stop(T,_),this.latestPointerEvent=null,this.latestPanInfo=null},C=()=>ti(T=>{var _;return this.getAnimationState(T)==="paused"&&((_=this.getAxisMotionValue(T).animation)==null?void 0:_.play())}),{dragSnapToOrigin:A}=this.getProps();this.panSession=new Jg(i,{onSessionStart:x,onStart:w,onMove:b,onSessionEnd:v,resumeAnimation:C},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:A,distanceThreshold:u,contextWindow:Qg(this.visualElement)})}stop(i,a){const u=i||this.latestPointerEvent,m=a||this.latestPanInfo,x=this.isDragging;if(this.cancel(),!x||!m||!u)return;const{velocity:w}=m;this.startAnimation(w);const{onDragEnd:b}=this.getProps();b&&ln.postRender(()=>b(u,m))}cancel(){this.isDragging=!1;const{projection:i,animationState:a}=this.visualElement;i&&(i.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:u}=this.getProps();!u&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(i,a,u){const{drag:m}=this.getProps();if(!u||!pc(i,m,this.currentDirection))return;const x=this.getAxisMotionValue(i);let w=this.originPoint[i]+u[i];this.constraints&&this.constraints[i]&&(w=ib(w,this.constraints[i],this.elastic[i])),x.set(w)}resolveConstraints(){var x;const{dragConstraints:i,dragElastic:a}=this.getProps(),u=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(x=this.visualElement.projection)==null?void 0:x.layout,m=this.constraints;i&&Bo(i)?this.constraints||(this.constraints=this.resolveRefConstraints()):i&&u?this.constraints=sb(u.layoutBox,i):this.constraints=!1,this.elastic=cb(a),m!==this.constraints&&u&&this.constraints&&!this.hasMutatedConstraints&&ti(w=>{this.constraints!==!1&&this.getAxisMotionValue(w)&&(this.constraints[w]=lb(u.layoutBox[w],this.constraints[w]))})}resolveRefConstraints(){const{dragConstraints:i,onMeasureDragConstraints:a}=this.getProps();if(!i||!Bo(i))return!1;const u=i.current,{projection:m}=this.visualElement;if(!m||!m.layout)return!1;const x=hC(u,m.root,this.visualElement.getTransformPagePoint());let w=ob(m.layout.layoutBox,x);if(a){const b=a(uC(w));this.hasMutatedConstraints=!!b,b&&(w=jg(b))}return w}startAnimation(i){const{drag:a,dragMomentum:u,dragElastic:m,dragTransition:x,dragSnapToOrigin:w,onDragTransitionEnd:b}=this.getProps(),v=this.constraints||{},C=ti(A=>{if(!pc(A,a,this.currentDirection))return;let T=v&&v[A]||{};w&&(T={min:0,max:0});const _=m?200:1e6,O=m?40:1e7,L={type:"inertia",velocity:u?i[A]:0,bounceStiffness:_,bounceDamping:O,timeConstant:750,restDelta:1,restSpeed:10,...x,...T};return this.startAxisValueAnimation(A,L)});return Promise.all(C).then(b)}startAxisValueAnimation(i,a){const u=this.getAxisMotionValue(i);return pf(this.visualElement,i),u.start(dh(i,u,0,a,this.visualElement,!1))}stopAnimation(){ti(i=>this.getAxisMotionValue(i).stop())}pauseAnimation(){ti(i=>{var a;return(a=this.getAxisMotionValue(i).animation)==null?void 0:a.pause()})}getAnimationState(i){var a;return(a=this.getAxisMotionValue(i).animation)==null?void 0:a.state}getAxisMotionValue(i){const a=`_drag${i.toUpperCase()}`,u=this.visualElement.getProps(),m=u[a];return m||this.visualElement.getValue(i,(u.initial?u.initial[i]:void 0)||0)}snapToCursor(i){ti(a=>{const{drag:u}=this.getProps();if(!pc(a,u,this.currentDirection))return;const{projection:m}=this.visualElement,x=this.getAxisMotionValue(a);if(m&&m.layout){const{min:w,max:b}=m.layout.layoutBox[a];x.set(i[a]-Cn(w,b,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:i,dragConstraints:a}=this.getProps(),{projection:u}=this.visualElement;if(!Bo(a)||!u||!this.constraints)return;this.stopAnimation();const m={x:0,y:0};ti(w=>{const b=this.getAxisMotionValue(w);if(b&&this.constraints!==!1){const v=b.get();m[w]=ab({min:v,max:v},this.constraints[w])}});const{transformTemplate:x}=this.visualElement.getProps();this.visualElement.current.style.transform=x?x({},""):"none",u.root&&u.root.updateScroll(),u.updateLayout(),this.resolveConstraints(),ti(w=>{if(!pc(w,i,null))return;const b=this.getAxisMotionValue(w),{min:v,max:C}=this.constraints[w];b.set(Cn(v,C,m[w]))})}addListeners(){if(!this.visualElement.current)return;ub.set(this.visualElement,this);const i=this.visualElement.current,a=Fa(i,"pointerdown",v=>{const{drag:C,dragListener:A=!0}=this.getProps();C&&A&&this.start(v)}),u=()=>{const{dragConstraints:v}=this.getProps();Bo(v)&&v.current&&(this.constraints=this.resolveRefConstraints())},{projection:m}=this.visualElement,x=m.addEventListener("measure",u);m&&!m.layout&&(m.root&&m.root.updateScroll(),m.updateLayout()),ln.read(u);const w=Ka(window,"resize",()=>this.scalePositionWithinConstraints()),b=m.addEventListener("didUpdate",({delta:v,hasLayoutChanged:C})=>{this.isDragging&&C&&(ti(A=>{const T=this.getAxisMotionValue(A);T&&(this.originPoint[A]+=v[A].translate,T.set(T.get()+v[A].translate))}),this.visualElement.render())});return()=>{w(),a(),x(),b&&b()}}getProps(){const i=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:u=!1,dragPropagation:m=!1,dragConstraints:x=!1,dragElastic:w=xf,dragMomentum:b=!0}=i;return{...i,drag:a,dragDirectionLock:u,dragPropagation:m,dragConstraints:x,dragElastic:w,dragMomentum:b}}}function pc(t,i,a){return(i===!0||i===t)&&(a===null||a===t)}function fb(t,i=10){let a=null;return Math.abs(t.y)>i?a="y":Math.abs(t.x)>i&&(a="x"),a}class hb extends Ts{constructor(i){super(i),this.removeGroupControls=ni,this.removeListeners=ni,this.controls=new db(i)}mount(){const{dragControls:i}=this.node.getProps();i&&(this.removeGroupControls=i.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ni}unmount(){this.removeGroupControls(),this.removeListeners()}}const Tm=t=>(i,a)=>{t&&ln.postRender(()=>t(i,a))};class mb extends Ts{constructor(){super(...arguments),this.removePointerDownListener=ni}onPointerDown(i){this.session=new Jg(i,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Qg(this.node)})}createPanHandlers(){const{onPanSessionStart:i,onPanStart:a,onPan:u,onPanEnd:m}=this.node.getProps();return{onSessionStart:Tm(i),onStart:Tm(a),onMove:u,onEnd:(x,w)=>{delete this.session,m&&ln.postRender(()=>m(x,w))}}}mount(){this.removePointerDownListener=Fa(this.node.current,"pointerdown",i=>this.onPointerDown(i))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Sc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function _m(t,i){return i.max===i.min?0:t/(i.max-i.min)*100}const Ma={correct:(t,i)=>{if(!i.target)return t;if(typeof t=="string")if(vt.test(t))t=parseFloat(t);else return t;const a=_m(t,i.target.x),u=_m(t,i.target.y);return`${a}% ${u}%`}},pb={correct:(t,{treeScale:i,projectionDelta:a})=>{const u=t,m=Is.parse(t);if(m.length>5)return u;const x=Is.createTransformer(t),w=typeof m[0]!="number"?1:0,b=a.x.scale*i.x,v=a.y.scale*i.y;m[0+w]/=b,m[1+w]/=v;const C=Cn(b,v,.5);return typeof m[2+w]=="number"&&(m[2+w]/=C),typeof m[3+w]=="number"&&(m[3+w]/=C),x(m)}};let Bd=!1;class gb extends N.Component{componentDidMount(){const{visualElement:i,layoutGroup:a,switchLayoutGroup:u,layoutId:m}=this.props,{projection:x}=i;B3(xb),x&&(a.group&&a.group.add(x),u&&u.register&&m&&u.register(x),Bd&&x.root.didUpdate(),x.addEventListener("animationComplete",()=>{this.safeToRemove()}),x.setOptions({...x.options,onExitComplete:()=>this.safeToRemove()})),Sc.hasEverUpdated=!0}getSnapshotBeforeUpdate(i){const{layoutDependency:a,visualElement:u,drag:m,isPresent:x}=this.props,{projection:w}=u;return w&&(w.isPresent=x,Bd=!0,m||i.layoutDependency!==a||a===void 0||i.isPresent!==x?w.willUpdate():this.safeToRemove(),i.isPresent!==x&&(x?w.promote():w.relegate()||ln.postRender(()=>{const b=w.getStack();(!b||!b.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:i}=this.props.visualElement;i&&(i.root.didUpdate(),th.postRender(()=>{!i.currentAnimation&&i.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:i,layoutGroup:a,switchLayoutGroup:u}=this.props,{projection:m}=i;Bd=!0,m&&(m.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(m),u&&u.deregister&&u.deregister(m))}safeToRemove(){const{safeToRemove:i}=this.props;i&&i()}render(){return null}}function tx(t){const[i,a]=Eg(),u=N.useContext(Of);return h.jsx(gb,{...t,layoutGroup:u,switchLayoutGroup:N.useContext(Dg),isPresent:i,safeToRemove:a})}const xb={borderRadius:{...Ma,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ma,borderTopRightRadius:Ma,borderBottomLeftRadius:Ma,borderBottomRightRadius:Ma,boxShadow:pb};function yb(t,i,a){const u=rr(t)?t:oo(t);return u.start(dh("",u,i,a)),u.animation}const wb=(t,i)=>t.depth-i.depth;class vb{constructor(){this.children=[],this.isDirty=!1}add(i){jf(this.children,i),this.isDirty=!0}remove(i){Bf(this.children,i),this.isDirty=!0}forEach(i){this.isDirty&&this.children.sort(wb),this.isDirty=!1,this.children.forEach(i)}}function Cb(t,i){const a=Lr.now(),u=({timestamp:m})=>{const x=m-a;x>=i&&(qi(u),t(x-i))};return ln.setup(u,!0),()=>qi(u)}const nx=["TopLeft","TopRight","BottomLeft","BottomRight"],bb=nx.length,Rm=t=>typeof t=="string"?parseFloat(t):t,km=t=>typeof t=="number"||vt.test(t);function Eb(t,i,a,u,m,x){m?(t.opacity=Cn(0,a.opacity??1,Sb(u)),t.opacityExit=Cn(i.opacity??1,0,Ab(u))):x&&(t.opacity=Cn(i.opacity??1,a.opacity??1,u));for(let w=0;w<bb;w++){const b=`border${nx[w]}Radius`;let v=Pm(i,b),C=Pm(a,b);if(v===void 0&&C===void 0)continue;v||(v=0),C||(C=0),v===0||C===0||km(v)===km(C)?(t[b]=Math.max(Cn(Rm(v),Rm(C),u),0),(Ei.test(C)||Ei.test(v))&&(t[b]+="%")):t[b]=C}(i.rotate||a.rotate)&&(t.rotate=Cn(i.rotate||0,a.rotate||0,u))}function Pm(t,i){return t[i]!==void 0?t[i]:t.borderRadius}const Sb=rx(0,.5,Up),Ab=rx(.5,.95,ni);function rx(t,i,a){return u=>u<t?0:u>i?1:a(Ga(t,i,u))}function Mm(t,i){t.min=i.min,t.max=i.max}function ei(t,i){Mm(t.x,i.x),Mm(t.y,i.y)}function Om(t,i){t.translate=i.translate,t.scale=i.scale,t.originPoint=i.originPoint,t.origin=i.origin}function Dm(t,i,a,u,m){return t-=i,t=Mc(t,1/a,u),m!==void 0&&(t=Mc(t,1/m,u)),t}function Nb(t,i=0,a=1,u=.5,m,x=t,w=t){if(Ei.test(i)&&(i=parseFloat(i),i=Cn(w.min,w.max,i/100)-w.min),typeof i!="number")return;let b=Cn(x.min,x.max,u);t===x&&(b-=i),t.min=Dm(t.min,i,a,b,m),t.max=Dm(t.max,i,a,b,m)}function Lm(t,i,[a,u,m],x,w){Nb(t,i[a],i[u],i[m],i.scale,x,w)}const Ib=["x","scaleX","originX"],Tb=["y","scaleY","originY"];function jm(t,i,a,u){Lm(t.x,i,Ib,a?a.x:void 0,u?u.x:void 0),Lm(t.y,i,Tb,a?a.y:void 0,u?u.y:void 0)}function Bm(t){return t.translate===0&&t.scale===1}function ix(t){return Bm(t.x)&&Bm(t.y)}function Fm(t,i){return t.min===i.min&&t.max===i.max}function _b(t,i){return Fm(t.x,i.x)&&Fm(t.y,i.y)}function Vm(t,i){return Math.round(t.min)===Math.round(i.min)&&Math.round(t.max)===Math.round(i.max)}function sx(t,i){return Vm(t.x,i.x)&&Vm(t.y,i.y)}function Um(t){return Ar(t.x)/Ar(t.y)}function zm(t,i){return t.translate===i.translate&&t.scale===i.scale&&t.originPoint===i.originPoint}class Rb{constructor(){this.members=[]}add(i){jf(this.members,i),i.scheduleRender()}remove(i){if(Bf(this.members,i),i===this.prevLead&&(this.prevLead=void 0),i===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(i){const a=this.members.findIndex(m=>i===m);if(a===0)return!1;let u;for(let m=a;m>=0;m--){const x=this.members[m];if(x.isPresent!==!1){u=x;break}}return u?(this.promote(u),!0):!1}promote(i,a){const u=this.lead;if(i!==u&&(this.prevLead=u,this.lead=i,i.show(),u)){u.instance&&u.scheduleRender(),i.scheduleRender(),i.resumeFrom=u,a&&(i.resumeFrom.preserveOpacity=!0),u.snapshot&&(i.snapshot=u.snapshot,i.snapshot.latestValues=u.animationValues||u.latestValues),i.root&&i.root.isUpdating&&(i.isLayoutDirty=!0);const{crossfade:m}=i.options;m===!1&&u.hide()}}exitAnimationComplete(){this.members.forEach(i=>{const{options:a,resumingFrom:u}=i;a.onExitComplete&&a.onExitComplete(),u&&u.options.onExitComplete&&u.options.onExitComplete()})}scheduleRender(){this.members.forEach(i=>{i.instance&&i.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function kb(t,i,a){let u="";const m=t.x.translate/i.x,x=t.y.translate/i.y,w=(a==null?void 0:a.z)||0;if((m||x||w)&&(u=`translate3d(${m}px, ${x}px, ${w}px) `),(i.x!==1||i.y!==1)&&(u+=`scale(${1/i.x}, ${1/i.y}) `),a){const{transformPerspective:C,rotate:A,rotateX:T,rotateY:_,skewX:O,skewY:L}=a;C&&(u=`perspective(${C}px) ${u}`),A&&(u+=`rotate(${A}deg) `),T&&(u+=`rotateX(${T}deg) `),_&&(u+=`rotateY(${_}deg) `),O&&(u+=`skewX(${O}deg) `),L&&(u+=`skewY(${L}deg) `)}const b=t.x.scale*i.x,v=t.y.scale*i.y;return(b!==1||v!==1)&&(u+=`scale(${b}, ${v})`),u||"none"}const Fd=["","X","Y","Z"],Pb=1e3;let Mb=0;function Vd(t,i,a,u){const{latestValues:m}=i;m[t]&&(a[t]=m[t],i.setStaticValue(t,0),u&&(u[t]=0))}function ox(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:i}=t.options;if(!i)return;const a=Gg(i);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:m,layoutId:x}=t.options;window.MotionCancelOptimisedAnimation(a,"transform",ln,!(m||x))}const{parent:u}=t;u&&!u.hasCheckedOptimisedAppear&&ox(u)}function ax({attachResizeListener:t,defaultParent:i,measureScroll:a,checkIsScrollRoot:u,resetTransform:m}){return class{constructor(w={},b=i==null?void 0:i()){this.id=Mb++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Lb),this.nodes.forEach(Vb),this.nodes.forEach(Ub),this.nodes.forEach(jb)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=w,this.root=b?b.root||b:this,this.path=b?[...b.path,b]:[],this.parent=b,this.depth=b?b.depth+1:0;for(let v=0;v<this.path.length;v++)this.path[v].shouldResetTransform=!0;this.root===this&&(this.nodes=new vb)}addEventListener(w,b){return this.eventHandlers.has(w)||this.eventHandlers.set(w,new Uf),this.eventHandlers.get(w).add(b)}notifyListeners(w,...b){const v=this.eventHandlers.get(w);v&&v.notify(...b)}hasListeners(w){return this.eventHandlers.has(w)}mount(w){if(this.instance)return;this.isSVG=bg(w)&&!E3(w),this.instance=w;const{layoutId:b,layout:v,visualElement:C}=this.options;if(C&&!C.current&&C.mount(w),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(v||b)&&(this.isLayoutDirty=!0),t){let A,T=0;const _=()=>this.root.updateBlockedByResize=!1;ln.read(()=>{T=window.innerWidth}),t(w,()=>{const O=window.innerWidth;O!==T&&(T=O,this.root.updateBlockedByResize=!0,A&&A(),A=Cb(_,250),Sc.hasAnimatedSinceResize&&(Sc.hasAnimatedSinceResize=!1,this.nodes.forEach(Gm)))})}b&&this.root.registerSharedNode(b,this),this.options.animate!==!1&&C&&(b||v)&&this.addEventListener("didUpdate",({delta:A,hasLayoutChanged:T,hasRelativeLayoutChanged:_,layout:O})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const L=this.options.transition||C.getDefaultTransition()||Xb,{onLayoutAnimationStart:B,onLayoutAnimationComplete:j}=C.getProps(),W=!this.targetLayout||!sx(this.targetLayout,O),U=!T&&_;if(this.options.layoutRoot||this.resumeFrom||U||T&&(W||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const F={...Jf(L,"layout"),onPlay:B,onComplete:j};(C.shouldReduceMotion||this.options.layoutRoot)&&(F.delay=0,F.type=!1),this.startAnimation(F),this.setAnimationOrigin(A,U)}else T||Gm(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=O})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const w=this.getStack();w&&w.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),qi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(zb),this.animationId++)}getTransformTemplate(){const{visualElement:w}=this.options;return w&&w.getProps().transformTemplate}willUpdate(w=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ox(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let A=0;A<this.path.length;A++){const T=this.path[A];T.shouldResetTransform=!0,T.updateScroll("snapshot"),T.options.layoutRoot&&T.willUpdate(!1)}const{layoutId:b,layout:v}=this.options;if(b===void 0&&!v)return;const C=this.getTransformTemplate();this.prevTransformTemplateValue=C?C(this.latestValues,""):void 0,this.updateSnapshot(),w&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Wm);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Hm);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Fb),this.nodes.forEach(Ob),this.nodes.forEach(Db)):this.nodes.forEach(Hm),this.clearAllSnapshots();const b=Lr.now();fr.delta=Zi(0,1e3/60,b-fr.timestamp),fr.timestamp=b,fr.isProcessing=!0,_d.update.process(fr),_d.preRender.process(fr),_d.render.process(fr),fr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,th.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Bb),this.sharedNodes.forEach(Wb)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ln.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ln.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ar(this.snapshot.measuredBox.x)&&!Ar(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let v=0;v<this.path.length;v++)this.path[v].updateScroll();const w=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Mn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:b}=this.options;b&&b.notify("LayoutMeasure",this.layout.layoutBox,w?w.layoutBox:void 0)}updateScroll(w="measure"){let b=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===w&&(b=!1),b&&this.instance){const v=u(this.instance);this.scroll={animationId:this.root.animationId,phase:w,isRoot:v,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:v}}}resetTransform(){if(!m)return;const w=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,b=this.projectionDelta&&!ix(this.projectionDelta),v=this.getTransformTemplate(),C=v?v(this.latestValues,""):void 0,A=C!==this.prevTransformTemplateValue;w&&this.instance&&(b||eo(this.latestValues)||A)&&(m(this.instance,C),this.shouldResetTransform=!1,this.scheduleRender())}measure(w=!0){const b=this.measurePageBox();let v=this.removeElementScroll(b);return w&&(v=this.removeTransform(v)),Yb(v),{animationId:this.root.animationId,measuredBox:b,layoutBox:v,latestValues:{},source:this.id}}measurePageBox(){var C;const{visualElement:w}=this.options;if(!w)return Mn();const b=w.measureViewportBox();if(!(((C=this.scroll)==null?void 0:C.wasRoot)||this.path.some($b))){const{scroll:A}=this.root;A&&(Fo(b.x,A.offset.x),Fo(b.y,A.offset.y))}return b}removeElementScroll(w){var v;const b=Mn();if(ei(b,w),(v=this.scroll)!=null&&v.wasRoot)return b;for(let C=0;C<this.path.length;C++){const A=this.path[C],{scroll:T,options:_}=A;A!==this.root&&T&&_.layoutScroll&&(T.wasRoot&&ei(b,w),Fo(b.x,T.offset.x),Fo(b.y,T.offset.y))}return b}applyTransform(w,b=!1){const v=Mn();ei(v,w);for(let C=0;C<this.path.length;C++){const A=this.path[C];!b&&A.options.layoutScroll&&A.scroll&&A!==A.root&&Vo(v,{x:-A.scroll.offset.x,y:-A.scroll.offset.y}),eo(A.latestValues)&&Vo(v,A.latestValues)}return eo(this.latestValues)&&Vo(v,this.latestValues),v}removeTransform(w){const b=Mn();ei(b,w);for(let v=0;v<this.path.length;v++){const C=this.path[v];if(!C.instance||!eo(C.latestValues))continue;df(C.latestValues)&&C.updateSnapshot();const A=Mn(),T=C.measurePageBox();ei(A,T),jm(b,C.latestValues,C.snapshot?C.snapshot.layoutBox:void 0,A)}return eo(this.latestValues)&&jm(b,this.latestValues),b}setTargetDelta(w){this.targetDelta=w,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(w){this.options={...this.options,...w,crossfade:w.crossfade!==void 0?w.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==fr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(w=!1){var _;const b=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=b.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=b.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=b.isSharedProjectionDirty);const v=!!this.resumingFrom||this!==b;if(!(w||v&&this.isSharedProjectionDirty||this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:A,layoutId:T}=this.options;if(!(!this.layout||!(A||T))){if(this.resolvedRelativeTargetAt=fr.timestamp,!this.targetDelta&&!this.relativeTarget){const O=this.getClosestProjectingParent();O&&O.layout&&this.animationProgress!==1?(this.relativeParent=O,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mn(),this.relativeTargetOrigin=Mn(),Ua(this.relativeTargetOrigin,this.layout.layoutBox,O.layout.layoutBox),ei(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Mn(),this.targetWithTransforms=Mn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),eb(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ei(this.target,this.layout.layoutBox),Fg(this.target,this.targetDelta)):ei(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const O=this.getClosestProjectingParent();O&&!!O.resumingFrom==!!this.resumingFrom&&!O.options.layoutScroll&&O.target&&this.animationProgress!==1?(this.relativeParent=O,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mn(),this.relativeTargetOrigin=Mn(),Ua(this.relativeTargetOrigin,this.target,O.target),ei(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||df(this.parent.latestValues)||Bg(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var L;const w=this.getLead(),b=!!this.resumingFrom||this!==w;let v=!0;if((this.isProjectionDirty||(L=this.parent)!=null&&L.isProjectionDirty)&&(v=!1),b&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(v=!1),this.resolvedRelativeTargetAt===fr.timestamp&&(v=!1),v)return;const{layout:C,layoutId:A}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(C||A))return;ei(this.layoutCorrected,this.layout.layoutBox);const T=this.treeScale.x,_=this.treeScale.y;fC(this.layoutCorrected,this.treeScale,this.path,b),w.layout&&!w.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(w.target=w.layout.layoutBox,w.targetWithTransforms=Mn());const{target:O}=w;if(!O){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Om(this.prevProjectionDelta.x,this.projectionDelta.x),Om(this.prevProjectionDelta.y,this.projectionDelta.y)),Va(this.projectionDelta,this.layoutCorrected,O,this.latestValues),(this.treeScale.x!==T||this.treeScale.y!==_||!zm(this.projectionDelta.x,this.prevProjectionDelta.x)||!zm(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",O))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(w=!0){var b;if((b=this.options.visualElement)==null||b.scheduleRender(),w){const v=this.getStack();v&&v.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Uo(),this.projectionDelta=Uo(),this.projectionDeltaWithTransform=Uo()}setAnimationOrigin(w,b=!1){const v=this.snapshot,C=v?v.latestValues:{},A={...this.latestValues},T=Uo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!b;const _=Mn(),O=v?v.source:void 0,L=this.layout?this.layout.source:void 0,B=O!==L,j=this.getStack(),W=!j||j.members.length<=1,U=!!(B&&!W&&this.options.crossfade===!0&&!this.path.some(Gb));this.animationProgress=0;let F;this.mixTargetDelta=Y=>{const K=Y/1e3;Xm(T.x,w.x,K),Xm(T.y,w.y,K),this.setTargetDelta(T),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ua(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Hb(this.relativeTarget,this.relativeTargetOrigin,_,K),F&&_b(this.relativeTarget,F)&&(this.isProjectionDirty=!1),F||(F=Mn()),ei(F,this.relativeTarget)),B&&(this.animationValues=A,Eb(A,C,this.latestValues,K,U,W)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=K},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(w){var b,v,C;this.notifyListeners("animationStart"),(b=this.currentAnimation)==null||b.stop(),(C=(v=this.resumingFrom)==null?void 0:v.currentAnimation)==null||C.stop(),this.pendingAnimation&&(qi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ln.update(()=>{Sc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=oo(0)),this.currentAnimation=yb(this.motionValue,[0,1e3],{...w,velocity:0,isSync:!0,onUpdate:A=>{this.mixTargetDelta(A),w.onUpdate&&w.onUpdate(A)},onStop:()=>{},onComplete:()=>{w.onComplete&&w.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const w=this.getStack();w&&w.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Pb),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const w=this.getLead();let{targetWithTransforms:b,target:v,layout:C,latestValues:A}=w;if(!(!b||!v||!C)){if(this!==w&&this.layout&&C&&lx(this.options.animationType,this.layout.layoutBox,C.layoutBox)){v=this.target||Mn();const T=Ar(this.layout.layoutBox.x);v.x.min=w.target.x.min,v.x.max=v.x.min+T;const _=Ar(this.layout.layoutBox.y);v.y.min=w.target.y.min,v.y.max=v.y.min+_}ei(b,v),Vo(b,A),Va(this.projectionDeltaWithTransform,this.layoutCorrected,b,A)}}registerSharedNode(w,b){this.sharedNodes.has(w)||this.sharedNodes.set(w,new Rb),this.sharedNodes.get(w).add(b);const C=b.options.initialPromotionConfig;b.promote({transition:C?C.transition:void 0,preserveFollowOpacity:C&&C.shouldPreserveFollowOpacity?C.shouldPreserveFollowOpacity(b):void 0})}isLead(){const w=this.getStack();return w?w.lead===this:!0}getLead(){var b;const{layoutId:w}=this.options;return w?((b=this.getStack())==null?void 0:b.lead)||this:this}getPrevLead(){var b;const{layoutId:w}=this.options;return w?(b=this.getStack())==null?void 0:b.prevLead:void 0}getStack(){const{layoutId:w}=this.options;if(w)return this.root.sharedNodes.get(w)}promote({needsReset:w,transition:b,preserveFollowOpacity:v}={}){const C=this.getStack();C&&C.promote(this,v),w&&(this.projectionDelta=void 0,this.needsReset=!0),b&&this.setOptions({transition:b})}relegate(){const w=this.getStack();return w?w.relegate(this):!1}resetSkewAndRotation(){const{visualElement:w}=this.options;if(!w)return;let b=!1;const{latestValues:v}=w;if((v.z||v.rotate||v.rotateX||v.rotateY||v.rotateZ||v.skewX||v.skewY)&&(b=!0),!b)return;const C={};v.z&&Vd("z",w,C,this.animationValues);for(let A=0;A<Fd.length;A++)Vd(`rotate${Fd[A]}`,w,C,this.animationValues),Vd(`skew${Fd[A]}`,w,C,this.animationValues);w.render();for(const A in C)w.setStaticValue(A,C[A]),this.animationValues&&(this.animationValues[A]=C[A]);w.scheduleRender()}applyProjectionStyles(w,b){if(!this.instance||this.isSVG)return;if(!this.isVisible){w.visibility="hidden";return}const v=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,w.visibility="",w.opacity="",w.pointerEvents=Ec(b==null?void 0:b.pointerEvents)||"",w.transform=v?v(this.latestValues,""):"none";return}const C=this.getLead();if(!this.projectionDelta||!this.layout||!C.target){this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=Ec(b==null?void 0:b.pointerEvents)||""),this.hasProjected&&!eo(this.latestValues)&&(w.transform=v?v({},""):"none",this.hasProjected=!1);return}w.visibility="";const A=C.animationValues||C.latestValues;this.applyTransformsToTarget();let T=kb(this.projectionDeltaWithTransform,this.treeScale,A);v&&(T=v(A,T)),w.transform=T;const{x:_,y:O}=this.projectionDelta;w.transformOrigin=`${_.origin*100}% ${O.origin*100}% 0`,C.animationValues?w.opacity=C===this?A.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:A.opacityExit:w.opacity=C===this?A.opacity!==void 0?A.opacity:"":A.opacityExit!==void 0?A.opacityExit:0;for(const L in Za){if(A[L]===void 0)continue;const{correct:B,applyTo:j,isCSSVariable:W}=Za[L],U=T==="none"?A[L]:B(A[L],C);if(j){const F=j.length;for(let Y=0;Y<F;Y++)w[j[Y]]=U}else W?this.options.visualElement.renderState.vars[L]=U:w[L]=U}this.options.layoutId&&(w.pointerEvents=C===this?Ec(b==null?void 0:b.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(w=>{var b;return(b=w.currentAnimation)==null?void 0:b.stop()}),this.root.nodes.forEach(Wm),this.root.sharedNodes.clear()}}}function Ob(t){t.updateLayout()}function Db(t){var a;const i=((a=t.resumeFrom)==null?void 0:a.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&i&&t.hasListeners("didUpdate")){const{layoutBox:u,measuredBox:m}=t.layout,{animationType:x}=t.options,w=i.source!==t.layout.source;x==="size"?ti(T=>{const _=w?i.measuredBox[T]:i.layoutBox[T],O=Ar(_);_.min=u[T].min,_.max=_.min+O}):lx(x,i.layoutBox,u)&&ti(T=>{const _=w?i.measuredBox[T]:i.layoutBox[T],O=Ar(u[T]);_.max=_.min+O,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[T].max=t.relativeTarget[T].min+O)});const b=Uo();Va(b,u,i.layoutBox);const v=Uo();w?Va(v,t.applyTransform(m,!0),i.measuredBox):Va(v,u,i.layoutBox);const C=!ix(b);let A=!1;if(!t.resumeFrom){const T=t.getClosestProjectingParent();if(T&&!T.resumeFrom){const{snapshot:_,layout:O}=T;if(_&&O){const L=Mn();Ua(L,i.layoutBox,_.layoutBox);const B=Mn();Ua(B,u,O.layoutBox),sx(L,B)||(A=!0),T.options.layoutRoot&&(t.relativeTarget=B,t.relativeTargetOrigin=L,t.relativeParent=T)}}}t.notifyListeners("didUpdate",{layout:u,snapshot:i,delta:v,layoutDelta:b,hasLayoutChanged:C,hasRelativeLayoutChanged:A})}else if(t.isLead()){const{onExitComplete:u}=t.options;u&&u()}t.options.transition=void 0}function Lb(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function jb(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Bb(t){t.clearSnapshot()}function Wm(t){t.clearMeasurements()}function Hm(t){t.isLayoutDirty=!1}function Fb(t){const{visualElement:i}=t.options;i&&i.getProps().onBeforeLayoutMeasure&&i.notify("BeforeLayoutMeasure"),t.resetTransform()}function Gm(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Vb(t){t.resolveTargetDelta()}function Ub(t){t.calcProjection()}function zb(t){t.resetSkewAndRotation()}function Wb(t){t.removeLeadSnapshot()}function Xm(t,i,a){t.translate=Cn(i.translate,0,a),t.scale=Cn(i.scale,1,a),t.origin=i.origin,t.originPoint=i.originPoint}function Ym(t,i,a,u){t.min=Cn(i.min,a.min,u),t.max=Cn(i.max,a.max,u)}function Hb(t,i,a,u){Ym(t.x,i.x,a.x,u),Ym(t.y,i.y,a.y,u)}function Gb(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Xb={duration:.45,ease:[.4,0,.1,1]},$m=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Zm=$m("applewebkit/")&&!$m("chrome/")?Math.round:ni;function Km(t){t.min=Zm(t.min),t.max=Zm(t.max)}function Yb(t){Km(t.x),Km(t.y)}function lx(t,i,a){return t==="position"||t==="preserve-aspect"&&!JC(Um(i),Um(a),.2)}function $b(t){var i;return t!==t.root&&((i=t.scroll)==null?void 0:i.wasRoot)}const Zb=ax({attachResizeListener:(t,i)=>Ka(t,"resize",i),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ud={current:void 0},cx=ax({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Ud.current){const t=new Zb({});t.mount(window),t.setOptions({layoutScroll:!0}),Ud.current=t}return Ud.current},resetTransform:(t,i)=>{t.style.transform=i!==void 0?i:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Kb={pan:{Feature:mb},drag:{Feature:hb,ProjectionNode:cx,MeasureLayout:tx}};function qm(t,i,a){const{props:u}=t;t.animationState&&u.whileHover&&t.animationState.setActive("whileHover",a==="Start");const m="onHover"+a,x=u[m];x&&ln.postRender(()=>x(i,sl(i)))}class qb extends Ts{mount(){const{current:i}=this.node;i&&(this.unmount=y3(i,(a,u)=>(qm(this.node,u,"Start"),m=>qm(this.node,m,"End"))))}unmount(){}}class Qb extends Ts{constructor(){super(...arguments),this.isActive=!1}onFocus(){let i=!1;try{i=this.node.current.matches(":focus-visible")}catch{i=!0}!i||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=tl(Ka(this.node.current,"focus",()=>this.onFocus()),Ka(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Qm(t,i,a){const{props:u}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&u.whileTap&&t.animationState.setActive("whileTap",a==="Start");const m="onTap"+(a==="End"?"":a),x=u[m];x&&ln.postRender(()=>x(i,sl(i)))}class Jb extends Ts{mount(){const{current:i}=this.node;i&&(this.unmount=b3(i,(a,u)=>(Qm(this.node,u,"Start"),(m,{success:x})=>Qm(this.node,m,x?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const yf=new WeakMap,zd=new WeakMap,eE=t=>{const i=yf.get(t.target);i&&i(t)},tE=t=>{t.forEach(eE)};function nE({root:t,...i}){const a=t||document;zd.has(a)||zd.set(a,{});const u=zd.get(a),m=JSON.stringify(i);return u[m]||(u[m]=new IntersectionObserver(tE,{root:t,...i})),u[m]}function rE(t,i,a){const u=nE(i);return yf.set(t,a),u.observe(t),()=>{yf.delete(t),u.unobserve(t)}}const iE={some:0,all:1};class sE extends Ts{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:i={}}=this.node.getProps(),{root:a,margin:u,amount:m="some",once:x}=i,w={root:a?a.current:void 0,rootMargin:u,threshold:typeof m=="number"?m:iE[m]},b=v=>{const{isIntersecting:C}=v;if(this.isInView===C||(this.isInView=C,x&&!C&&this.hasEnteredView))return;C&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",C);const{onViewportEnter:A,onViewportLeave:T}=this.node.getProps(),_=C?A:T;_&&_(v)};return rE(this.node.current,w,b)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:i,prevProps:a}=this.node;["amount","margin","root"].some(oE(i,a))&&this.startObserver()}unmount(){}}function oE({viewport:t={}},{viewport:i={}}={}){return a=>t[a]!==i[a]}const aE={inView:{Feature:sE},tap:{Feature:Jb},focus:{Feature:Qb},hover:{Feature:qb}},lE={layout:{ProjectionNode:cx,MeasureLayout:tx}},cE={...YC,...aE,...Kb,...lE},St=cC(cE,bC);function fh(t){const i=el(()=>oo(t)),{isStatic:a}=N.useContext(il);if(a){const[,u]=N.useState(t);N.useEffect(()=>i.on("change",u),[])}return i}function ux(t,i){const a=fh(i()),u=()=>a.set(i());return u(),Lf(()=>{const m=()=>ln.preRender(u,!1,!0),x=t.map(w=>w.on("change",m));return()=>{x.forEach(w=>w()),qi(u)}}),a}function uE(t){Ba.current=[],t();const i=ux(Ba.current,t);return Ba.current=void 0,i}function wf(t,i,a,u){if(typeof t=="function")return uE(t);const m=typeof i=="function"?i:S3(i,a,u);return Array.isArray(t)?Jm(t,m):Jm([t],([x])=>m(x))}function Jm(t,i){const a=el(()=>[]);return ux(t,()=>{a.length=0;const u=t.length;for(let m=0;m<u;m++)a[m]=t[m].get();return i(a)})}function dE(t,i={}){const{isStatic:a}=N.useContext(il),u=()=>rr(t)?t.get():t;if(a)return wf(u);const m=fh(u());return N.useInsertionEffect(()=>A3(m,t,i),[m,JSON.stringify(i)]),m}const fE={some:0,all:1};function hE(t,i,{root:a,margin:u,amount:m="some"}={}){const x=gg(t),w=new WeakMap,b=C=>{C.forEach(A=>{const T=w.get(A.target);if(A.isIntersecting!==!!T)if(A.isIntersecting){const _=i(A.target,A);typeof _=="function"?w.set(A.target,_):v.unobserve(A.target)}else typeof T=="function"&&(T(A),w.delete(A.target))})},v=new IntersectionObserver(b,{root:a,rootMargin:u,threshold:typeof m=="number"?m:fE[m]});return x.forEach(C=>v.observe(C)),()=>v.disconnect()}function mE(t,{root:i,margin:a,amount:u,once:m=!1,initial:x=!1}={}){const[w,b]=N.useState(x);return N.useEffect(()=>{if(!t.current||m&&w)return;const v=()=>(b(!0),m?void 0:()=>b(!1)),C={root:i&&i.current||void 0,margin:a,amount:u};return hE(t.current,v,C)},[i,t,a,m,u]),w}const ol=({size:t=60,fullScreen:i=!1,message:a=null})=>i?h.jsx("div",{className:"loading-spinner-fullscreen",children:h.jsxs("div",{className:"loading-spinner-content",children:[h.jsx("div",{className:"loading-spinner",style:{width:t,height:t},children:h.jsx("div",{className:"loading-spinner-inner"})}),a&&h.jsx("p",{className:"loading-spinner-message",children:a})]})}):h.jsxs("div",{className:"loading-spinner-wrapper",children:[h.jsx("div",{className:"loading-spinner",style:{width:t,height:t},children:h.jsx("div",{className:"loading-spinner-inner"})}),a&&h.jsx("p",{className:"loading-spinner-message",children:a})]}),pE=()=>{const{login:t,signup:i,user:a,logout:u,checkAuth:m,isAuthLoading:x,authLoadingMessage:w}=N.useContext(Fn),[b,v]=N.useState(""),[C,A]=N.useState(""),[T,_]=N.useState(""),[O,L]=N.useState(null),[B,j]=N.useState(null),[W,U]=N.useState(""),[F,Y]=N.useState(0),[K,ne]=N.useState({x:0,y:0}),[q,ie]=N.useState(1),[J,we]=N.useState(null),[Re,Ae]=N.useState(!1),[be,Ie]=N.useState(!1),[$,ke]=N.useState({}),[ve,ye]=N.useState({}),[De,Ee]=N.useState(!1),[X,G]=N.useState(!1),[Ce,ae]=N.useState(!1),se=N.useRef(null),[te,Me]=N.useState(!1),Se=On(),Le=Br(),et=new URLSearchParams(Le.search),Xe=et.get("redirect"),de=et.get("code"),xe=Xe==="lobby",$e=()=>{const Be="abcdefghijklmnopqrstuvwxyz0123456789";let Te="";for(let ce=0;ce<10;ce++)Te+=Be.charAt(Math.floor(Math.random()*Be.length));return Te};N.useEffect(()=>{if(xe&&!b&&!C){const Be=$e();v(Be),A(Be),ye(Te=>({...Te,username:!0,password:!0})),ke(Te=>({...Te,username:"",password:""}))}},[xe]),N.useEffect(()=>{x||a&&Se(Xe==="lobby"?de?`/lobby?code=${de}`:"/?showLobbyModal=true":Xe==="product-selection"?"/product-selection":"/")},[x,a,Xe,de,Se]),N.useEffect(()=>{F===1&&de!=="demolobby"&&(b&&C&&T)&&!Ce&&(G(!0),ae(!0))},[F,de,b,C,T,Ce]);const Ze=()=>{G(!1),setTimeout(()=>{se.current&&se.current.click()},150)},It=()=>{G(!1)},it=Be=>{const Te=/^[a-z0-9]+$/;return Be.length>=2&&Te.test(Be)},qe=Be=>Be.length>=2,tt=Be=>Be.length>=2,jt=(Be,Te,ce)=>{const ft=tt(Be)&&it(Te)&&qe(ce);Ee(ft)},Ue=()=>{F<Xt.length-1&&(Ee(!1),Y(Be=>Be+1))},gn=()=>{F>0&&(Y(Be=>Be-1),F===1&&jt(T,b,C))},ir=Be=>{const Te=Be.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");v(Te),it(Te)?(ye(ce=>({...ce,username:!0})),ke(ce=>({...ce,username:""}))):(ye(ce=>({...ce,username:!1})),ke(ce=>({...ce,username:"Must be at least 2 characters (letters and numbers only)"}))),jt(T,Te,C)},Ge=Be=>{const Te=Be.target.value;A(Te),qe(Te)?(ye(ce=>({...ce,password:!0})),ke(ce=>({...ce,password:""}))):(ye(ce=>({...ce,password:!1})),ke(ce=>({...ce,password:"Must be at least 2 characters"}))),jt(T,b,Te)},Tt=Be=>{const Te=Be.target.value;_(Te),tt(Te)?(ye(ce=>({...ce,displayName:!0})),ke(ce=>({...ce,displayName:""}))):(ye(ce=>({...ce,displayName:!1})),ke(ce=>({...ce,displayName:"Must be at least 2 characters"}))),jt(Te,b,C)},ze=Be=>{const Te=Be.target.files[0];if(Te){const ce=new FileReader;ce.onload=ft=>{const ut=new Image;ut.onload=()=>{let xt=ut.width,Yt=ut.height;const mn=1500;xt>Yt&&xt>mn?(Yt=Yt*mn/xt,xt=mn):Yt>xt&&Yt>mn&&(xt=xt*mn/Yt,Yt=mn);const cn=document.createElement("canvas");cn.width=xt,cn.height=Yt,cn.getContext("2d").drawImage(ut,0,0,xt,Yt);const rn=cn.toDataURL("image/jpeg",.75);L(Te),j(rn),Ae(!0),ye(un=>({...un,image:!0})),ke(un=>({...un,image:""})),Ee(!0)},ut.src=ft.target.result},ce.readAsDataURL(Te)}},ct=(Be,Te)=>{we(Te)},Je=async()=>{try{const Be=await Uc(B,J);j(Be),Ae(!1)}catch(Be){console.error("Error cropping the image:",Be),U("Failed to crop image. Please try again.")}},wt=async(Be,Te,ce)=>{if("credentials"in navigator&&window.PasswordCredential)try{const ft=new PasswordCredential({id:Be,password:Te,name:ce});await navigator.credentials.store(ft),console.log("Credentials saved to password manager")}catch(ft){console.warn("Could not save credentials:",ft)}},Bt=async Be=>{if(Be.preventDefault(),Ie(!0),U(""),console.log("Signup attempt - Username:",b,"Password:",C),!b||!C||!T){U("All fields are required"),Ie(!1);return}if(!O||!B){U("Your profile picture is required"),Ie(!1);return}try{const Te="/signup",ce=await yt(Te,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:b,password:C,is_lobby_signup:xe})}),ft=await ce.json();let ut=b,xt=C;if(ft.error==="Username already taken")if(xe){const dt=$e(),rn=dt,un=dt;v(rn),A(un);const Fr=await yt(Te,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:rn,password:un,is_lobby_signup:!0})}),en=await Fr.json();if(!Fr.ok||en.error==="Username already taken"){U("Unable to create account. Please try again."),Ie(!1);return}t(en),ut=rn,xt=un}else{U("Username is taken"),Ie(!1);return}else{if(!ce.ok){U(ft.message||"Signup failed"),Ie(!1);return}t(ft)}if(await m(),!localStorage.getItem("access_token"))throw new Error("Authentication failed");let mn=null;if(O)mn=B,mn=mn.split(",")[1];else{const un=await(await(await fetch("/assets/fakeprofile.png")).blob()).arrayBuffer();mn=btoa(new Uint8Array(un).reduce((Fr,en)=>Fr+String.fromCharCode(en),""))}if(!(await yt("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:T,image_data:mn})})).ok)throw new Error("Failed to update profile");await m(),await wt(ut,xt,T),Se(Xe==="lobby"?de?`/lobby?code=${de}`:"/?showLobbyModal=true":Xe==="product-selection"?"/product-selection":"/")}catch(Te){console.error("Error:",Te),U("An error occurred. Please try again.")}Ie(!1)},Xt=[{id:"credentials",type:"combined"},{id:"image",label:de==="demolobby"?"Profile Image (Upload Any Image)":"Take a Selfie (so people can find you)",type:"file",onChange:ze,accept:"image/*"}];return x?h.jsx(ol,{fullScreen:!0,message:w}):h.jsxs("div",{className:"signup-container",children:[h.jsx("button",{onClick:()=>Se("/"),className:"homescreen-button",children:"Home"}),h.jsx("img",{src:"/assets/reuneo_test_11.png",alt:"Reunio Logo",className:"logo-image",style:{marginTop:"-1.5rem"}}),h.jsx("h3",{className:"signup-header",children:de==="demolobby"?"Join the demo":"Sign Up to Join"}),de&&de!=="demolobby"&&h.jsxs("h2",{className:"signup-header",children:[de," lobby"]}),de==="demolobby"&&h.jsx("h2",{className:"signup-header",style:{fontSize:"0.9rem"},children:"Try Reuneo for Free!"}),h.jsx("p",{className:"login-link-text",children:"Already have an account?"}),h.jsx("button",{type:"button",onClick:()=>Se("/login"),className:"login-cta-button",children:"Yes, I saved my email before"}),h.jsxs("div",{className:"step-form-container",children:[h.jsx("div",{className:"step-progress",children:Xt.map((Be,Te)=>h.jsx("div",{className:`progress-dot ${Te===F?"active":""} ${Te<F?"completed":""}`},Te))}),h.jsxs("form",{onSubmit:Bt,autoComplete:"on",children:[h.jsx(jr,{mode:"wait",initial:!1,children:h.jsxs(St.div,{initial:{opacity:0,x:8},animate:{opacity:1,x:0},exit:{opacity:0,x:-8},transition:{type:"spring",stiffness:500,damping:25,mass:.3},className:"step active",style:{willChange:"transform, opacity"},children:[h.jsxs("div",{className:"step-content",children:[F===0&&h.jsxs(St.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"credentials-step",children:[h.jsxs("div",{className:"name-field-container",children:[h.jsx("label",{className:"step-label",children:de==="demolobby"?"Your Name (Type Any Name)":"Your Name"}),h.jsx("input",{type:"text",name:"displayName",autoComplete:"name",value:T,onChange:Tt,placeholder:"Enter your name",className:"step-input",autoFocus:!0}),h.jsxs(jr,{mode:"wait",children:[$.displayName&&h.jsx(St.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},className:"step-error",children:$.displayName}),ve.displayName&&!$.displayName&&h.jsx(St.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"step-success",children:" Valid"})]})]}),De&&h.jsx("div",{className:"inline-next-button-container",children:h.jsx(St.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},type:"button",onClick:Ue,className:"inline-next-button",children:"Continue "})}),xe?h.jsxs("div",{className:"credentials-collapsible",children:[h.jsx("p",{className:"credentials-hint",children:"Auto-generated login (edit if you want)"}),h.jsx("button",{type:"button",className:"see-more-toggle",onClick:()=>Me(!te),children:te?"Hide ":"See More "}),te&&h.jsxs(St.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"credentials-fields-expanded",children:[h.jsxs("div",{className:"field-row",children:[h.jsx("label",{className:"step-label small-label",children:"Username"}),h.jsx("input",{type:"text",name:"username",autoComplete:"username",value:b,onChange:ir,placeholder:"Choose a username",className:"step-input"}),$.username&&h.jsx("div",{className:"step-error small-feedback",children:$.username}),ve.username&&!$.username&&h.jsx("div",{className:"step-success small-feedback",children:" Valid"})]}),h.jsxs("div",{className:"field-row",children:[h.jsx("label",{className:"step-label small-label",children:"Password"}),h.jsx("input",{type:"password",name:"password",autoComplete:"new-password",value:C,onChange:Ge,placeholder:"Create a password",className:"step-input"}),$.password&&h.jsx("div",{className:"step-error small-feedback",children:$.password}),ve.password&&!$.password&&h.jsx("div",{className:"step-success small-feedback",children:" Valid"})]})]})]}):h.jsxs("div",{className:"credentials-fields",children:[h.jsxs("div",{className:"field-row",children:[h.jsx("label",{className:"step-label small-label",children:"Username"}),h.jsx("input",{type:"text",name:"username",autoComplete:"username",value:b,onChange:ir,placeholder:"Choose a username",className:"step-input"}),$.username&&h.jsx("div",{className:"step-error small-feedback",children:$.username}),ve.username&&!$.username&&h.jsx("div",{className:"step-success small-feedback",children:" Valid"})]}),h.jsxs("div",{className:"field-row",children:[h.jsx("label",{className:"step-label small-label",children:"Password"}),h.jsx("input",{type:"password",name:"password",autoComplete:"new-password",value:C,onChange:Ge,placeholder:"Create a password",className:"step-input"}),$.password&&h.jsx("div",{className:"step-error small-feedback",children:$.password}),ve.password&&!$.password&&h.jsx("div",{className:"step-success small-feedback",children:" Valid"})]})]})]}),F===1&&h.jsxs(St.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:[h.jsx("div",{className:"inline-back-button-container",children:h.jsx(St.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},type:"button",onClick:gn,className:"inline-back-button",children:" Back"})}),h.jsx("label",{className:"step-label",children:Xt[1].label}),h.jsx("div",{className:"image-upload-container",children:Re?h.jsxs("div",{className:"cropper-container",children:[h.jsx("div",{className:"cropper-wrapper",children:h.jsx(Vc,{image:B,crop:K,zoom:q,aspect:1,onCropComplete:ct,onCropChange:ne,onZoomChange:ie})}),h.jsxs("div",{className:"cropper-controls",children:[h.jsx("button",{type:"button",onClick:()=>{Ae(!1),j(null),L(null)},className:"cancel-crop-button",children:"Cancel"}),h.jsx("button",{type:"button",onClick:Je,className:"save-crop-button",children:"Good"})]})]}):h.jsxs(h.Fragment,{children:[h.jsx("input",{ref:se,type:"file",onChange:ze,accept:"image/*",className:"step-input"}),B&&h.jsx("div",{children:h.jsx("img",{src:B,alt:"Profile preview",className:"profile-preview-image"})})]})})]})]}),!Re&&h.jsx("div",{className:`button-container ${F===0?"combined-step-buttons":""}`,children:De&&F>0&&F<Xt.length-1&&h.jsx(St.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},type:"button",onClick:Ue,className:"nextz-button",children:"Next "})})]},F)}),W&&h.jsx(St.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"error-message",children:W}),F===Xt.length-1&&h.jsx(St.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},type:"submit",className:"primary-button",disabled:be,children:be?"Loading...":"Complete Signup"})]})]}),h.jsx(jr,{children:X&&h.jsx(St.div,{className:"selfie-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:It,children:h.jsxs(St.div,{className:"selfie-modal-content",initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},transition:{type:"spring",stiffness:400,damping:25},onClick:Be=>Be.stopPropagation(),children:[h.jsx("h2",{className:"selfie-modal-header",children:"You Must Take a Selfie"}),h.jsx("p",{className:"selfie-modal-subtext",children:"Don't use old photos, people need to know how you look in order to find you in the room - trust us."}),h.jsx("button",{type:"button",className:"selfie-modal-button",onClick:Ze,children:"Understood"})]})})})]})},gE=5e3,dx=(t,i=null,a=null)=>{N.useEffect(()=>{const u=async()=>{try{const x=a?`/display_lobby_metadata?lobby_code=${a}`:"/display_lobby_metadata",w=await yt(x,{headers:{lobby_code:a}});if(!w.ok){console.error("Failed to fetch lobby metadata");return}const b=await w.json();t(b.player_count),i&&i(b.lobby_state)}catch(x){console.error("Error fetching lobby metadata:",x)}};u();const m=setInterval(u,gE);return()=>clearInterval(m)},[t,i,a])},Zc="currentLobbyCode",Kc="currentLobbyTimestamp",hh="currentLobbyLastValidated",xE=30*60*1e3,yE=3*60*1e3,wE=t=>{localStorage.setItem(Zc,t),localStorage.setItem(Kc,Date.now().toString()),console.log(`Stored lobby code: ${t}`)},vE=()=>{const t=localStorage.getItem(Zc),i=localStorage.getItem(Kc);return!t||!i?null:Date.now()-parseInt(i)>xE?(Oc(),console.log("Lobby code expired, cleared from storage"),null):t},CE=()=>{const t=localStorage.getItem(hh);return t?Date.now()-parseInt(t)>yE:!0},bE=()=>{localStorage.setItem(hh,Date.now().toString())},Oc=()=>{localStorage.removeItem(Zc),localStorage.removeItem(Kc),localStorage.removeItem(hh),console.log("Cleared lobby storage")},EE=()=>{localStorage.getItem(Zc)&&localStorage.setItem(Kc,Date.now().toString())},SE=()=>h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:[h.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),h.jsx("circle",{cx:"9",cy:"7",r:"4"}),h.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),h.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}),h.jsx("path",{d:"M12 11v6"}),h.jsx("path",{d:"M9 14h6"})]}),AE=()=>h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:[h.jsx("path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}),h.jsx("polyline",{points:"10 17 15 12 10 7"}),h.jsx("line",{x1:"15",y1:"12",x2:"3",y2:"12"})]}),Wd=({cx:t,cy:i,r:a,className:u})=>h.jsx("path",{className:u,d:`M${t} ${i-a} C${t+a*.1} ${i-a*.1} ${t+a*.1} ${i-a*.1} ${t+a} ${i} C${t+a*.1} ${i+a*.1} ${t+a*.1} ${i+a*.1} ${t} ${i+a} C${t-a*.1} ${i+a*.1} ${t-a*.1} ${i+a*.1} ${t-a} ${i} C${t-a*.1} ${i-a*.1} ${t-a*.1} ${i-a*.1} ${t} ${i-a}Z`}),NE=()=>h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:[h.jsx("circle",{cx:"12",cy:"12",r:"3"}),h.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),IE=()=>h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,style:{transform:"scaleX(-1)"},children:[h.jsx("path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}),h.jsx("polyline",{points:"10 17 15 12 10 7"}),h.jsx("line",{x1:"15",y1:"12",x2:"3",y2:"12"})]}),ep=()=>h.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":!0,children:[h.jsx(Wd,{cx:12,cy:12,r:12.5}),h.jsx(Wd,{cx:26,cy:25,r:7}),h.jsx(Wd,{cx:27,cy:6,r:4})]});function TE({children:t,onClick:i,disabled:a,mouseX:u,spring:m,distance:x,magnification:w,baseItemSize:b,ariaLabel:v,title:C}){const A=N.useRef(null),T=wf(u,L=>{var j;const B=(j=A.current)==null?void 0:j.getBoundingClientRect();return B?L-B.x-B.width/2:x+1}),_=wf(T,[-x,0,x],[b,w,b]),O=dE(_,m);return h.jsx(St.div,{ref:A,style:{width:O,height:O,minWidth:b,minHeight:b},onClick:a?void 0:i,onKeyDown:L=>{(L.key==="Enter"||L.key===" ")&&!a&&(L.preventDefault(),i==null||i())},className:"app-dock-item",tabIndex:a?-1:0,role:"button","aria-disabled":!!a,"aria-label":v,title:C,children:t})}const _E={mass:.1,stiffness:150,damping:12};function RE({items:t,panelHeight:i=68,baseItemSize:a=50,magnification:u=58,distance:m=200}){const x=fh(1/0);return h.jsx("div",{className:"app-dock-outer",children:h.jsx(St.div,{className:"app-dock-panel",style:{minHeight:i},role:"toolbar","aria-label":"Application dock",onMouseMove:({pageX:w})=>x.set(w),onMouseLeave:()=>x.set(1/0),children:t.map((w,b)=>h.jsxs(TE,{onClick:w.onClick,disabled:w.disabled,mouseX:x,spring:_E,distance:m,magnification:u,baseItemSize:a,ariaLabel:w.label,title:w.title,children:[h.jsx("div",{className:"app-dock-icon",children:w.icon}),h.jsx("span",{className:"app-dock-label",children:w.label})]},b))})})}const kE=()=>{const[t,i]=N.useState(!1),[a,u]=N.useState(!1),[m,x]=N.useState(""),[w,b]=N.useState(""),[v,C]=N.useState(""),[A,T]=N.useState(null);Pf();const{user:_,userProfile:O,checkAuth:L,permissions:B,emailVerified:j}=N.useContext(Fn),[W,U]=N.useState(null),[F,Y]=N.useState(null),[K,ne]=N.useState([]),[q,ie]=N.useState(!1),[J,we]=N.useState(null),[Re,Ae]=N.useState(!1),be=On();dx(U,Y);const[Ie,$]=N.useState(!1);N.useRef(null);const ke=N.useRef(null),ve=async(ae=!1)=>{const se=vE();if(!se||!_){we(null);return}if(we(se),ae||CE())try{const te=await yt(`/display_lobby_metadata?lobby_code=${se}`,{headers:{lobby_code:se}});if(te.ok){const Me=await te.json();Me.status==="error"||Me.lobby_state==="terminated"?(Oc(),we(null)):bE()}else te.status===404&&(Oc(),we(null))}catch(te){console.error("Error validating current lobby:",te)}},ye=async()=>{if(_){ie(!0);try{const ae=await yt("/view_my_active_lobbies");if(ae.ok){const se=await ae.json();console.log("User's active lobbies:",se),se&&se.lobbies&&Array.isArray(se.lobbies)?ne(se.lobbies):ne([])}else console.error("Failed to fetch user's active lobbies"),ne([])}catch(ae){console.error("Error fetching user's active lobbies:",ae),ne([])}finally{ie(!1)}}};N.useEffect(()=>{_?(ye(),ve(!0)):we(null)},[_]),N.useEffect(()=>{L()},[]),N.useEffect(()=>{if(new URLSearchParams(window.location.search).get("showLobbyModal")==="true"&&_){u(!0);const te=window.location.pathname;window.history.replaceState({},"",te)}},[_]);const De=ae=>{(B==="admin"||B==="organizer")&&be(`/admin_lobby_view?code=${ae}`)},Ee=ae=>{ae.preventDefault();const te=new FormData(ae.target).get("name");if(!te||te.trim()===""){b("Please enter a lobby code");return}const Me=te.toLowerCase().replace(/[^a-z0-9]/g,"");if(Me===""){b("Lobby code must contain only letters and numbers");return}C(Me),u(!1),console.log(Me),x(Me),be(`/lobby?code=${Me}`),x(""),b("")},X=()=>{$(!1),ke.current&&(ke.current.clear(),ke.current=null)},G=()=>{if(!a)return null;const ae=()=>{u(!1),x(""),b(""),X()};return h.jsx("div",{className:"qr-instruction-overlay",onClick:ae,children:h.jsxs("div",{className:"qr-instruction-container",onClick:se=>se.stopPropagation(),children:[h.jsx("button",{onClick:ae,className:"qr-modal-close","aria-label":"Close",children:""}),h.jsx("h2",{className:"qr-instruction-title",children:"Enter Lobby Code"}),h.jsx("p",{className:"qr-instruction-text",children:"Ask your host for the lobby code if you don't have it."}),h.jsxs("form",{onSubmit:Ee,className:"qr-code-form",children:[h.jsxs("div",{className:"qr-input-container",children:[h.jsx("input",{type:"text",name:"name",placeholder:"Lobby code",className:"qr-code-input",pattern:"[a-zA-Z0-9]+",title:"Only letters and numbers are allowed",autoComplete:"off",autoCapitalize:"none",required:!0}),w&&h.jsx("div",{className:"qr-error-message",children:w})]}),h.jsx("button",{type:"submit",className:"qr-instruction-primary qr-submit-button",children:"Join"})]})]})})},Ce=()=>{if(!Re)return null;const ae=()=>{Ae(!1),u(!0)};return h.jsx("div",{className:"qr-instruction-overlay",onClick:()=>Ae(!1),children:h.jsxs("div",{className:"qr-instruction-container",onClick:se=>se.stopPropagation(),children:[h.jsx("button",{onClick:()=>Ae(!1),className:"qr-modal-close","aria-label":"Close",children:""}),h.jsx("div",{className:"qr-instruction-icon",children:h.jsxs("svg",{width:"56",height:"56",viewBox:"0 0 24 24",fill:"none",children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"qrIconGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[h.jsx("stop",{offset:"0%",stopColor:"#144dff"}),h.jsx("stop",{offset:"100%",stopColor:"#8b5cf6"})]})}),h.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1",fill:"url(#qrIconGradient)"}),h.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"1",fill:"url(#qrIconGradient)"}),h.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",fill:"url(#qrIconGradient)"}),h.jsx("rect",{x:"14",y:"14",width:"3",height:"3",rx:"0.5",fill:"url(#qrIconGradient)"}),h.jsx("rect",{x:"18",y:"14",width:"3",height:"3",rx:"0.5",fill:"url(#qrIconGradient)"}),h.jsx("rect",{x:"14",y:"18",width:"3",height:"3",rx:"0.5",fill:"url(#qrIconGradient)"}),h.jsx("rect",{x:"18",y:"18",width:"3",height:"3",rx:"0.5",fill:"url(#qrIconGradient)"})]})}),h.jsx("h2",{className:"qr-instruction-title",children:"Open your camera app and scan the QR code provided by your host"}),h.jsx("p",{className:"qr-instruction-text",children:"Don't worry, the app will remember your matches if you are still logged in."}),h.jsxs("div",{className:"qr-instruction-buttons",children:[h.jsx("button",{className:"qr-instruction-secondary",onClick:ae,children:"Can't find QR"}),h.jsx("button",{className:"qr-instruction-primary",onClick:()=>Ae(!1),children:"Got it"})]})]})})};return h.jsxs("div",{style:{position:"relative",height:"var(--viewport-height)",overflow:"hidden"},children:[h.jsxs("video",{className:"background-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,poster:"/assets/demo_app_home_video_cover.jpg",children:[h.jsx("source",{src:"/assets/demo_app_home_video_X2_small.mp4",type:"video/mp4"}),h.jsx("source",{src:"/assets/app_home_video_2.webm",type:"video/webm"}),h.jsx("img",{src:"/assets/demo_app_home_video_cover.jpg",alt:"Background fallback",style:{width:"100%",height:"100%",objectFit:"cover"}}),"Your browser does not support the video tag."]}),h.jsxs("div",{style:{position:"relative",zIndex:1,color:"white",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[h.jsx("div",{style:{position:"absolute",top:"0",left:"50%",transform:"translateX(-50%)"},children:h.jsx("img",{src:"/assets/reuneo_test_11.png",alt:"Logo",style:{width:"100px",height:"100px",objectFit:"contain"}})}),h.jsx("div",{style:{marginTop:"10%",display:"flex",flexDirection:"column"},children:h.jsx(kw,{user:_,onProfileClick:()=>i(!0)})}),h.jsx("div",{style:{position:"absolute",top:"85px",display:"none",justifyContent:"flex-end",width:"94%",left:"3%",alignItems:"center"},children:(B==="admin"||B==="organizer")&&h.jsx("button",{className:"login-button",onClick:()=>be("/organizer-account-details"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:ae=>{ae.currentTarget.style.transform="translateY(-2px)",ae.currentTarget.style.boxShadow="0 2px 8px rgba(74, 58, 58, 0.7)"},onMouseLeave:ae=>{ae.currentTarget.style.transform="translateY(0)",ae.currentTarget.style.boxShadow="0 0 4px rgba(74, 58, 58, 0.5)"},children:h.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Settings"})})}),(B==="admin"||B==="organizer")&&_==="topaz"&&h.jsx("div",{style:{position:"absolute",top:"120px",right:"20px",zIndex:10},children:h.jsx("button",{className:"master-lobbies-button",onClick:()=>be("/master_lobby_view"),children:"Lobbies"})}),t&&h.jsx(ey,{onSubmit:ae=>{i(!1)},onClose:()=>i(!1),existingProfile:O}),B!=="admin"&&B!=="organizer"&&!J?h.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10,display:"flex",justifyContent:"center",alignItems:"center"},children:h.jsxs("div",{className:"app-dock-item-standalone",onClick:()=>window.location.href="https://reuneo.com/organizer-signup",onKeyDown:ae=>{(ae.key==="Enter"||ae.key===" ")&&(ae.preventDefault(),window.location.href="https://reuneo.com/organizer-signup")},tabIndex:0,role:"button","aria-label":"Organizer",children:[h.jsx("div",{className:"app-dock-icon",children:h.jsx(ep,{})}),h.jsx("span",{className:"app-dock-label",children:"Create"})]})}):K.length===0&&(B==="admin"||B==="organizer")?h.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10,display:"flex",justifyContent:"center",alignItems:"center"},children:h.jsxs("div",{className:"app-dock-item-standalone",onClick:()=>be("/create_lobby"),onKeyDown:ae=>{(ae.key==="Enter"||ae.key===" ")&&(ae.preventDefault(),be("/create_lobby"))},tabIndex:0,role:"button","aria-label":"Create Lobby",children:[h.jsx("div",{className:"app-dock-icon",children:h.jsx(ep,{})}),h.jsx("span",{className:"app-dock-label",children:"Create"})]})}):null,h.jsx("div",{style:{position:"absolute",left:"50%",width:"90%",maxWidth:"1200px",textAlign:"center",marginLeft:"auto",marginRight:"auto",zIndex:1,top:"130px",transform:"translateX(-50%)"},children:_?h.jsx("h2",{className:"welcome-header",style:{color:"#ffffff",fontSize:"1rem",textTransform:"uppercase",letterSpacing:"0.1em",textShadow:"4px 4px 8px rgba(0,0,0,0.9)",margin:0},children:_&&O&&(B==="admin"||B==="organizer")?(()=>{const ae="Create a Lobby",se=O?O.name.slice(0,15):"";return h.jsxs(h.Fragment,{children:[ae.split("").map((te,Me)=>h.jsx("span",{style:{"--i":Me+1,marginRight:te===" "?"0.5em":"1px"},children:te},`main-${Me}`)),h.jsx("br",{}),se&&se.split("").map((te,Me)=>h.jsx("span",{style:{"--i":Me+1,marginRight:te===" "?"0.5em":"1px"},children:te},`name-${Me}`))]})})():(()=>{const ae="Join the Experience",se=O?O.name.slice(0,15):"";return h.jsxs(h.Fragment,{children:[ae.split("").map((te,Me)=>h.jsx("span",{style:{"--i":Me+1,marginRight:te===" "?"0.5em":"1px"},children:te},`main-${Me}`)),h.jsx("br",{}),se&&se.split("").map((te,Me)=>h.jsx("span",{style:{"--i":Me+1,marginRight:te===" "?"0.5em":"1px"},children:te},`name-${Me}`))]})})()}):null}),_&&B!=="admin"&&B!=="organizer"&&h.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",width:"90%",maxWidth:"1200px",textAlign:"center",marginLeft:"auto",marginRight:"auto",zIndex:1,top:J?"calc(50% + 75px)":"calc(50% + 120px)",transition:"top 0.3s ease"},children:h.jsx("button",{className:"primary-button join-lobby-button",onClick:()=>be(j?"/paired-player-history":"/post-event-auth"),style:{padding:"16px 20px",backgroundColor:"transparent",color:"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0 auto",display:"block",position:"relative",zIndex:1,textAlign:"center",outline:"none",cursor:"pointer",":hover":{transform:"scale(1.02)"}},children:h.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Matches"})})}),h.jsx("div",{style:{position:"absolute",bottom:"40px",left:"50%",transform:"translateX(-50%)",width:"94%",display:"flex",flexDirection:"row",justifyContent:"center",gap:"1.5rem"},children:h.jsx("div",{className:"event-item",style:{width:"auto",maxWidth:"none",margin:"0",padding:"10px 20px",borderRadius:"16px",marginBottom:"20px",cursor:"pointer",opacity:1,display:"flex",flexDirection:"row",alignItems:"center",gap:"1.5rem",":hover":{transform:"translateY(-5px)"}},children:h.jsx("div",{style:{display:"flex",gap:"1.5rem",flexDirection:"row",alignItems:"center"},children:h.jsx(RE,{panelHeight:88,baseItemSize:65,magnification:75,distance:200,items:[{icon:h.jsx(SE,{}),label:"Join Lobby",onClick:()=>Ae(!0),disabled:W===null||F==="terminate",title:W===null||F==="terminate"?F==="terminate"?"Lobby closed":"Lobby loading":void 0},..._?[{icon:h.jsx(NE,{}),label:"Profile",onClick:()=>i(!0),disabled:!1},{icon:h.jsx(IE,{}),label:"Logout",onClick:()=>be("/logout"),disabled:!1}]:[{icon:h.jsx(AE,{}),label:"Login",onClick:()=>be("/login"),disabled:!1}]]})})})}),J&&!((B==="admin"||B==="organizer")&&K.length>0)&&h.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"85%",maxWidth:"280px",display:"flex",justifyContent:"center",alignItems:"center",zIndex:10,transition:"all 0.3s ease"},children:h.jsxs("div",{onClick:()=>be(`/lobby?code=${J}`),style:{width:"100%",background:"linear-gradient(145deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05))",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRadius:"24px",border:"1px solid rgba(255, 255, 255, 0.25)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2)",padding:"16px 20px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",flexDirection:"row",alignItems:"center",gap:"14px",overflow:"hidden"},onMouseEnter:ae=>{ae.currentTarget.style.transform="scale(1.02)",ae.currentTarget.style.boxShadow="0 12px 40px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.3)",ae.currentTarget.style.border="1px solid rgba(255, 255, 255, 0.4)"},onMouseLeave:ae=>{ae.currentTarget.style.transform="scale(1)",ae.currentTarget.style.boxShadow="0 8px 32px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2)",ae.currentTarget.style.border="1px solid rgba(255, 255, 255, 0.25)"},children:[h.jsxs("div",{style:{position:"relative",flexShrink:0},children:[h.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"50%",background:"linear-gradient(135deg, #144dff 0%, #8b5cf6 50%, #ec4899 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 15px rgba(20, 77, 255, 0.4)",animation:"pulse-glow 2s ease-in-out infinite"},children:h.jsx("span",{style:{color:"white",fontWeight:"800",fontSize:"1.1rem",textTransform:"uppercase"},children:J.charAt(0).toUpperCase()})}),h.jsx("div",{style:{position:"absolute",top:"-2px",right:"-2px",width:"14px",height:"14px",borderRadius:"50%",background:"#22c55e",border:"2px solid rgba(255, 255, 255, 0.9)",boxShadow:"0 0 8px rgba(34, 197, 94, 0.6)",animation:"pulse-dot 1.5s ease-in-out infinite"}})]}),h.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",gap:"2px"},children:[h.jsx("span",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.65rem",fontWeight:"600",letterSpacing:"0.02em"},children:"Return to your active lobby"}),h.jsx("span",{style:{color:"white",fontWeight:"700",fontSize:"1rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",textShadow:"0 2px 4px rgba(0, 0, 0, 0.3)"},children:J.length>15?J.slice(0,15)+"...":J})]}),h.jsx("div",{style:{flexShrink:0,width:"32px",height:"32px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},children:h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})})]})}),(B==="admin"||B==="organizer")&&K.length>0&&h.jsx("div",{style:{position:"absolute",top:"calc(32% + 80px)",left:"50%",transform:"translateX(-50%)",width:"85%",maxWidth:"280px",display:"flex",justifyContent:"center",alignItems:"center",zIndex:10,transition:"all 0.3s ease"},children:q?h.jsx("div",{style:{textAlign:"center",color:"white"},children:h.jsx("p",{children:"Loading your lobbies..."})}):K.length>0?h.jsxs("div",{className:"admin-lobby-tile",onClick:()=>De(K[0]),children:[h.jsxs("div",{className:"admin-lobby-tile-icon",children:[h.jsx("div",{className:"admin-lobby-tile-icon-circle",children:h.jsx("span",{children:K[0]&&K[0].length>0?K[0].charAt(0).toUpperCase():"?"})}),h.jsx("div",{className:"admin-lobby-tile-live-dot"})]}),h.jsxs("div",{className:"admin-lobby-tile-content",children:[h.jsx("span",{className:"admin-lobby-tile-subtitle",children:"Manage your active lobby"}),h.jsx("span",{className:"admin-lobby-tile-title",children:K[0]&&K[0].length>15?K[0].slice(0,15)+"...":K[0]})]}),h.jsx("div",{className:"admin-lobby-tile-arrow",children:h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})})]}):null})]}),h.jsx(G,{}),h.jsx(Ce,{})]})};function PE(){const{pathname:t}=Br();return N.useEffect(()=>{window.scrollTo(0,0)},[t]),null}function ME(){const{pathname:t}=Br(),i=t.startsWith("/organizer-dashboard");return N.useEffect(()=>{const a=document.getElementById("root"),u=document.body;return i?(a==null||a.classList.add("dashboard-view"),u==null||u.classList.add("dashboard-view")):(a==null||a.classList.remove("dashboard-view"),u==null||u.classList.remove("dashboard-view")),()=>{a==null||a.classList.remove("dashboard-view"),u==null||u.classList.remove("dashboard-view")}},[t,i]),null}const OE=()=>{const{login:t,signup:i,user:a,logout:u,checkAuth:m}=N.useContext(Fn),[x,w]=N.useState(""),[b,v]=N.useState(""),[C,A]=N.useState(""),[T,_]=N.useState(""),[O,L]=N.useState(!0),[B,j]=N.useState({}),[W,U]=N.useState(!1),[F,Y]=N.useState(""),K=On(),[ne]=_p();N.useEffect(()=>{ne.get("error")==="invalid_or_expired_link"&&(Y("Your login link has expired or is invalid. Please request a new one."),window.history.replaceState({},"","/login"))},[ne]);const q=Re=>{const Ae=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,be=/^[a-z0-9]+$/;return Re.length>=2&&(Ae.test(Re)||be.test(Re))},ie=Re=>{const Ae=Re.target.value.toLowerCase().replace(/[^a-z0-9@._\-]/g,"");w(Ae);const be=Ae.includes("@");Ae.length>0&&!be?U(!0):U(!1),q(Ae)?j(Ie=>({...Ie,username:""})):j(Ie=>({...Ie,username:" "}))},J=Re=>{v(Re.target.value)},we=async Re=>{if(Re.preventDefault(),_(""),!q(x)){_("Please enter a valid email or username");return}try{const be=await yt(O?"/login":"/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:x,password:b})});if(be.ok){const Ie=await be.json();t(Ie),m(),K("/")}else{const Ie=await be.json();_(Ie.message||`${O?"Login":"Signup"} failed`)}}catch(Ae){_("Network error occurred. Please try again."),console.error("Error:",Ae)}};return h.jsxs("div",{className:"login-container",children:[h.jsx("button",{onClick:()=>K("/"),className:"homescreen-button",children:"Home"}),h.jsx("img",{src:"/assets/reuneo_test_11.png",alt:"Reunio Logo",className:"logo-image"}),h.jsx("h1",{className:"login-header",children:"Login"}),h.jsxs("div",{className:"login-signup-form",children:[F&&h.jsx("div",{className:"error-message",style:{backgroundColor:"rgba(255, 107, 107, 0.1)",border:"1px solid rgba(255, 107, 107, 0.3)",padding:"12px 16px",borderRadius:"8px",marginBottom:"16px"},children:F}),T&&h.jsx("div",{className:"error-message",children:T}),h.jsxs("form",{onSubmit:we,children:[h.jsxs("div",{className:"form-group",children:[h.jsx("input",{type:"text",placeholder:"email or username",className:"login-input",value:x,onChange:ie,required:!0,autoComplete:"email"}),W&&h.jsx("div",{className:"step-success",children:"or username (lowercase letters and numbers)"})]}),h.jsx("div",{className:"form-group",children:h.jsx("input",{type:"password",placeholder:"password",className:"login-input",value:b,onChange:J,required:!0,autoComplete:"current-password"})}),h.jsx("button",{type:"submit",className:"login-primary-button",children:"Login"})]}),h.jsx("button",{type:"button",onClick:()=>K("/forgot-password"),className:"forgot-password-link",children:"Forgot password?"})]})]})},DE=()=>{const t=On(),{logout:i}=N.useContext(Fn);return localStorage.removeItem("access_token"),N.useEffect(()=>{console.log("LogoutPage useEffect"),setTimeout(()=>{i(),t("/")},100)},[]),h.jsx("div",{children:"Logged out redirecting to homescreen"})};var LE=Object.defineProperty,Dc=Object.getOwnPropertySymbols,fx=Object.prototype.hasOwnProperty,hx=Object.prototype.propertyIsEnumerable,tp=(t,i,a)=>i in t?LE(t,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[i]=a,vf=(t,i)=>{for(var a in i||(i={}))fx.call(i,a)&&tp(t,a,i[a]);if(Dc)for(var a of Dc(i))hx.call(i,a)&&tp(t,a,i[a]);return t},Cf=(t,i)=>{var a={};for(var u in t)fx.call(t,u)&&i.indexOf(u)<0&&(a[u]=t[u]);if(t!=null&&Dc)for(var u of Dc(t))i.indexOf(u)<0&&hx.call(t,u)&&(a[u]=t[u]);return a};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var ao;(t=>{const i=class Mt{constructor(v,C,A,T){if(this.version=v,this.errorCorrectionLevel=C,this.modules=[],this.isFunction=[],v<Mt.MIN_VERSION||v>Mt.MAX_VERSION)throw new RangeError("Version value out of range");if(T<-1||T>7)throw new RangeError("Mask value out of range");this.size=v*4+17;let _=[];for(let L=0;L<this.size;L++)_.push(!1);for(let L=0;L<this.size;L++)this.modules.push(_.slice()),this.isFunction.push(_.slice());this.drawFunctionPatterns();const O=this.addEccAndInterleave(A);if(this.drawCodewords(O),T==-1){let L=1e9;for(let B=0;B<8;B++){this.applyMask(B),this.drawFormatBits(B);const j=this.getPenaltyScore();j<L&&(T=B,L=j),this.applyMask(B)}}m(0<=T&&T<=7),this.mask=T,this.applyMask(T),this.drawFormatBits(T),this.isFunction=[]}static encodeText(v,C){const A=t.QrSegment.makeSegments(v);return Mt.encodeSegments(A,C)}static encodeBinary(v,C){const A=t.QrSegment.makeBytes(v);return Mt.encodeSegments([A],C)}static encodeSegments(v,C,A=1,T=40,_=-1,O=!0){if(!(Mt.MIN_VERSION<=A&&A<=T&&T<=Mt.MAX_VERSION)||_<-1||_>7)throw new RangeError("Invalid value");let L,B;for(L=A;;L++){const F=Mt.getNumDataCodewords(L,C)*8,Y=w.getTotalBits(v,L);if(Y<=F){B=Y;break}if(L>=T)throw new RangeError("Data too long")}for(const F of[Mt.Ecc.MEDIUM,Mt.Ecc.QUARTILE,Mt.Ecc.HIGH])O&&B<=Mt.getNumDataCodewords(L,F)*8&&(C=F);let j=[];for(const F of v){a(F.mode.modeBits,4,j),a(F.numChars,F.mode.numCharCountBits(L),j);for(const Y of F.getData())j.push(Y)}m(j.length==B);const W=Mt.getNumDataCodewords(L,C)*8;m(j.length<=W),a(0,Math.min(4,W-j.length),j),a(0,(8-j.length%8)%8,j),m(j.length%8==0);for(let F=236;j.length<W;F^=253)a(F,8,j);let U=[];for(;U.length*8<j.length;)U.push(0);return j.forEach((F,Y)=>U[Y>>>3]|=F<<7-(Y&7)),new Mt(L,C,U,_)}getModule(v,C){return 0<=v&&v<this.size&&0<=C&&C<this.size&&this.modules[C][v]}getModules(){return this.modules}drawFunctionPatterns(){for(let A=0;A<this.size;A++)this.setFunctionModule(6,A,A%2==0),this.setFunctionModule(A,6,A%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const v=this.getAlignmentPatternPositions(),C=v.length;for(let A=0;A<C;A++)for(let T=0;T<C;T++)A==0&&T==0||A==0&&T==C-1||A==C-1&&T==0||this.drawAlignmentPattern(v[A],v[T]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(v){const C=this.errorCorrectionLevel.formatBits<<3|v;let A=C;for(let _=0;_<10;_++)A=A<<1^(A>>>9)*1335;const T=(C<<10|A)^21522;m(T>>>15==0);for(let _=0;_<=5;_++)this.setFunctionModule(8,_,u(T,_));this.setFunctionModule(8,7,u(T,6)),this.setFunctionModule(8,8,u(T,7)),this.setFunctionModule(7,8,u(T,8));for(let _=9;_<15;_++)this.setFunctionModule(14-_,8,u(T,_));for(let _=0;_<8;_++)this.setFunctionModule(this.size-1-_,8,u(T,_));for(let _=8;_<15;_++)this.setFunctionModule(8,this.size-15+_,u(T,_));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let v=this.version;for(let A=0;A<12;A++)v=v<<1^(v>>>11)*7973;const C=this.version<<12|v;m(C>>>18==0);for(let A=0;A<18;A++){const T=u(C,A),_=this.size-11+A%3,O=Math.floor(A/3);this.setFunctionModule(_,O,T),this.setFunctionModule(O,_,T)}}drawFinderPattern(v,C){for(let A=-4;A<=4;A++)for(let T=-4;T<=4;T++){const _=Math.max(Math.abs(T),Math.abs(A)),O=v+T,L=C+A;0<=O&&O<this.size&&0<=L&&L<this.size&&this.setFunctionModule(O,L,_!=2&&_!=4)}}drawAlignmentPattern(v,C){for(let A=-2;A<=2;A++)for(let T=-2;T<=2;T++)this.setFunctionModule(v+T,C+A,Math.max(Math.abs(T),Math.abs(A))!=1)}setFunctionModule(v,C,A){this.modules[C][v]=A,this.isFunction[C][v]=!0}addEccAndInterleave(v){const C=this.version,A=this.errorCorrectionLevel;if(v.length!=Mt.getNumDataCodewords(C,A))throw new RangeError("Invalid argument");const T=Mt.NUM_ERROR_CORRECTION_BLOCKS[A.ordinal][C],_=Mt.ECC_CODEWORDS_PER_BLOCK[A.ordinal][C],O=Math.floor(Mt.getNumRawDataModules(C)/8),L=T-O%T,B=Math.floor(O/T);let j=[];const W=Mt.reedSolomonComputeDivisor(_);for(let F=0,Y=0;F<T;F++){let K=v.slice(Y,Y+B-_+(F<L?0:1));Y+=K.length;const ne=Mt.reedSolomonComputeRemainder(K,W);F<L&&K.push(0),j.push(K.concat(ne))}let U=[];for(let F=0;F<j[0].length;F++)j.forEach((Y,K)=>{(F!=B-_||K>=L)&&U.push(Y[F])});return m(U.length==O),U}drawCodewords(v){if(v.length!=Math.floor(Mt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let C=0;for(let A=this.size-1;A>=1;A-=2){A==6&&(A=5);for(let T=0;T<this.size;T++)for(let _=0;_<2;_++){const O=A-_,B=(A+1&2)==0?this.size-1-T:T;!this.isFunction[B][O]&&C<v.length*8&&(this.modules[B][O]=u(v[C>>>3],7-(C&7)),C++)}}m(C==v.length*8)}applyMask(v){if(v<0||v>7)throw new RangeError("Mask value out of range");for(let C=0;C<this.size;C++)for(let A=0;A<this.size;A++){let T;switch(v){case 0:T=(A+C)%2==0;break;case 1:T=C%2==0;break;case 2:T=A%3==0;break;case 3:T=(A+C)%3==0;break;case 4:T=(Math.floor(A/3)+Math.floor(C/2))%2==0;break;case 5:T=A*C%2+A*C%3==0;break;case 6:T=(A*C%2+A*C%3)%2==0;break;case 7:T=((A+C)%2+A*C%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[C][A]&&T&&(this.modules[C][A]=!this.modules[C][A])}}getPenaltyScore(){let v=0;for(let _=0;_<this.size;_++){let O=!1,L=0,B=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[_][j]==O?(L++,L==5?v+=Mt.PENALTY_N1:L>5&&v++):(this.finderPenaltyAddHistory(L,B),O||(v+=this.finderPenaltyCountPatterns(B)*Mt.PENALTY_N3),O=this.modules[_][j],L=1);v+=this.finderPenaltyTerminateAndCount(O,L,B)*Mt.PENALTY_N3}for(let _=0;_<this.size;_++){let O=!1,L=0,B=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[j][_]==O?(L++,L==5?v+=Mt.PENALTY_N1:L>5&&v++):(this.finderPenaltyAddHistory(L,B),O||(v+=this.finderPenaltyCountPatterns(B)*Mt.PENALTY_N3),O=this.modules[j][_],L=1);v+=this.finderPenaltyTerminateAndCount(O,L,B)*Mt.PENALTY_N3}for(let _=0;_<this.size-1;_++)for(let O=0;O<this.size-1;O++){const L=this.modules[_][O];L==this.modules[_][O+1]&&L==this.modules[_+1][O]&&L==this.modules[_+1][O+1]&&(v+=Mt.PENALTY_N2)}let C=0;for(const _ of this.modules)C=_.reduce((O,L)=>O+(L?1:0),C);const A=this.size*this.size,T=Math.ceil(Math.abs(C*20-A*10)/A)-1;return m(0<=T&&T<=9),v+=T*Mt.PENALTY_N4,m(0<=v&&v<=2568888),v}getAlignmentPatternPositions(){if(this.version==1)return[];{const v=Math.floor(this.version/7)+2,C=this.version==32?26:Math.ceil((this.version*4+4)/(v*2-2))*2;let A=[6];for(let T=this.size-7;A.length<v;T-=C)A.splice(1,0,T);return A}}static getNumRawDataModules(v){if(v<Mt.MIN_VERSION||v>Mt.MAX_VERSION)throw new RangeError("Version number out of range");let C=(16*v+128)*v+64;if(v>=2){const A=Math.floor(v/7)+2;C-=(25*A-10)*A-55,v>=7&&(C-=36)}return m(208<=C&&C<=29648),C}static getNumDataCodewords(v,C){return Math.floor(Mt.getNumRawDataModules(v)/8)-Mt.ECC_CODEWORDS_PER_BLOCK[C.ordinal][v]*Mt.NUM_ERROR_CORRECTION_BLOCKS[C.ordinal][v]}static reedSolomonComputeDivisor(v){if(v<1||v>255)throw new RangeError("Degree out of range");let C=[];for(let T=0;T<v-1;T++)C.push(0);C.push(1);let A=1;for(let T=0;T<v;T++){for(let _=0;_<C.length;_++)C[_]=Mt.reedSolomonMultiply(C[_],A),_+1<C.length&&(C[_]^=C[_+1]);A=Mt.reedSolomonMultiply(A,2)}return C}static reedSolomonComputeRemainder(v,C){let A=C.map(T=>0);for(const T of v){const _=T^A.shift();A.push(0),C.forEach((O,L)=>A[L]^=Mt.reedSolomonMultiply(O,_))}return A}static reedSolomonMultiply(v,C){if(v>>>8||C>>>8)throw new RangeError("Byte out of range");let A=0;for(let T=7;T>=0;T--)A=A<<1^(A>>>7)*285,A^=(C>>>T&1)*v;return m(A>>>8==0),A}finderPenaltyCountPatterns(v){const C=v[1];m(C<=this.size*3);const A=C>0&&v[2]==C&&v[3]==C*3&&v[4]==C&&v[5]==C;return(A&&v[0]>=C*4&&v[6]>=C?1:0)+(A&&v[6]>=C*4&&v[0]>=C?1:0)}finderPenaltyTerminateAndCount(v,C,A){return v&&(this.finderPenaltyAddHistory(C,A),C=0),C+=this.size,this.finderPenaltyAddHistory(C,A),this.finderPenaltyCountPatterns(A)}finderPenaltyAddHistory(v,C){C[0]==0&&(v+=this.size),C.pop(),C.unshift(v)}};i.MIN_VERSION=1,i.MAX_VERSION=40,i.PENALTY_N1=3,i.PENALTY_N2=3,i.PENALTY_N3=40,i.PENALTY_N4=10,i.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],i.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=i;function a(b,v,C){if(v<0||v>31||b>>>v)throw new RangeError("Value out of range");for(let A=v-1;A>=0;A--)C.push(b>>>A&1)}function u(b,v){return(b>>>v&1)!=0}function m(b){if(!b)throw new Error("Assertion error")}const x=class In{constructor(v,C,A){if(this.mode=v,this.numChars=C,this.bitData=A,C<0)throw new RangeError("Invalid argument");this.bitData=A.slice()}static makeBytes(v){let C=[];for(const A of v)a(A,8,C);return new In(In.Mode.BYTE,v.length,C)}static makeNumeric(v){if(!In.isNumeric(v))throw new RangeError("String contains non-numeric characters");let C=[];for(let A=0;A<v.length;){const T=Math.min(v.length-A,3);a(parseInt(v.substring(A,A+T),10),T*3+1,C),A+=T}return new In(In.Mode.NUMERIC,v.length,C)}static makeAlphanumeric(v){if(!In.isAlphanumeric(v))throw new RangeError("String contains unencodable characters in alphanumeric mode");let C=[],A;for(A=0;A+2<=v.length;A+=2){let T=In.ALPHANUMERIC_CHARSET.indexOf(v.charAt(A))*45;T+=In.ALPHANUMERIC_CHARSET.indexOf(v.charAt(A+1)),a(T,11,C)}return A<v.length&&a(In.ALPHANUMERIC_CHARSET.indexOf(v.charAt(A)),6,C),new In(In.Mode.ALPHANUMERIC,v.length,C)}static makeSegments(v){return v==""?[]:In.isNumeric(v)?[In.makeNumeric(v)]:In.isAlphanumeric(v)?[In.makeAlphanumeric(v)]:[In.makeBytes(In.toUtf8ByteArray(v))]}static makeEci(v){let C=[];if(v<0)throw new RangeError("ECI assignment value out of range");if(v<128)a(v,8,C);else if(v<16384)a(2,2,C),a(v,14,C);else if(v<1e6)a(6,3,C),a(v,21,C);else throw new RangeError("ECI assignment value out of range");return new In(In.Mode.ECI,0,C)}static isNumeric(v){return In.NUMERIC_REGEX.test(v)}static isAlphanumeric(v){return In.ALPHANUMERIC_REGEX.test(v)}getData(){return this.bitData.slice()}static getTotalBits(v,C){let A=0;for(const T of v){const _=T.mode.numCharCountBits(C);if(T.numChars>=1<<_)return 1/0;A+=4+_+T.bitData.length}return A}static toUtf8ByteArray(v){v=encodeURI(v);let C=[];for(let A=0;A<v.length;A++)v.charAt(A)!="%"?C.push(v.charCodeAt(A)):(C.push(parseInt(v.substring(A+1,A+3),16)),A+=2);return C}};x.NUMERIC_REGEX=/^[0-9]*$/,x.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,x.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let w=x;t.QrSegment=x})(ao||(ao={}));(t=>{(i=>{const a=class{constructor(m,x){this.ordinal=m,this.formatBits=x}};a.LOW=new a(0,1),a.MEDIUM=new a(1,0),a.QUARTILE=new a(2,3),a.HIGH=new a(3,2),i.Ecc=a})(t.QrCode||(t.QrCode={}))})(ao||(ao={}));(t=>{(i=>{const a=class{constructor(m,x){this.modeBits=m,this.numBitsCharCount=x}numCharCountBits(m){return this.numBitsCharCount[Math.floor((m+7)/17)]}};a.NUMERIC=new a(1,[10,12,14]),a.ALPHANUMERIC=new a(2,[9,11,13]),a.BYTE=new a(4,[8,16,16]),a.KANJI=new a(8,[8,10,12]),a.ECI=new a(7,[0,0,0]),i.Mode=a})(t.QrSegment||(t.QrSegment={}))})(ao||(ao={}));var zo=ao;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var jE={L:zo.QrCode.Ecc.LOW,M:zo.QrCode.Ecc.MEDIUM,Q:zo.QrCode.Ecc.QUARTILE,H:zo.QrCode.Ecc.HIGH},mx=128,px="L",gx="#FFFFFF",xx="#000000",yx=!1,wx=1,BE=4,FE=0,VE=.1;function vx(t,i=0){const a=[];return t.forEach(function(u,m){let x=null;u.forEach(function(w,b){if(!w&&x!==null){a.push(`M${x+i} ${m+i}h${b-x}v1H${x+i}z`),x=null;return}if(b===u.length-1){if(!w)return;x===null?a.push(`M${b+i},${m+i} h1v1H${b+i}z`):a.push(`M${x+i},${m+i} h${b+1-x}v1H${x+i}z`);return}w&&x===null&&(x=b)})}),a.join("")}function Cx(t,i){return t.slice().map((a,u)=>u<i.y||u>=i.y+i.h?a:a.map((m,x)=>x<i.x||x>=i.x+i.w?m:!1))}function UE(t,i,a,u){if(u==null)return null;const m=t.length+a*2,x=Math.floor(i*VE),w=m/i,b=(u.width||x)*w,v=(u.height||x)*w,C=u.x==null?t.length/2-b/2:u.x*w,A=u.y==null?t.length/2-v/2:u.y*w,T=u.opacity==null?1:u.opacity;let _=null;if(u.excavate){let L=Math.floor(C),B=Math.floor(A),j=Math.ceil(b+C-L),W=Math.ceil(v+A-B);_={x:L,y:B,w:j,h:W}}const O=u.crossOrigin;return{x:C,y:A,h:v,w:b,excavation:_,opacity:T,crossOrigin:O}}function zE(t,i){return i!=null?Math.max(Math.floor(i),0):t?BE:FE}function bx({value:t,level:i,minVersion:a,includeMargin:u,marginSize:m,imageSettings:x,size:w,boostLevel:b}){let v=Gt.useMemo(()=>{const L=(Array.isArray(t)?t:[t]).reduce((B,j)=>(B.push(...zo.QrSegment.makeSegments(j)),B),[]);return zo.QrCode.encodeSegments(L,jE[i],a,void 0,void 0,b)},[t,i,a,b]);const{cells:C,margin:A,numCells:T,calculatedImageSettings:_}=Gt.useMemo(()=>{let O=v.getModules();const L=zE(u,m),B=O.length+L*2,j=UE(O,w,L,x);return{cells:O,margin:L,numCells:B,calculatedImageSettings:j}},[v,w,x,u,m]);return{qrcode:v,margin:A,cells:C,numCells:T,calculatedImageSettings:_}}var WE=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),HE=Gt.forwardRef(function(i,a){const u=i,{value:m,size:x=mx,level:w=px,bgColor:b=gx,fgColor:v=xx,includeMargin:C=yx,minVersion:A=wx,boostLevel:T,marginSize:_,imageSettings:O}=u,B=Cf(u,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:j}=B,W=Cf(B,["style"]),U=O==null?void 0:O.src,F=Gt.useRef(null),Y=Gt.useRef(null),K=Gt.useCallback(Ie=>{F.current=Ie,typeof a=="function"?a(Ie):a&&(a.current=Ie)},[a]),[ne,q]=Gt.useState(!1),{margin:ie,cells:J,numCells:we,calculatedImageSettings:Re}=bx({value:m,level:w,minVersion:A,boostLevel:T,includeMargin:C,marginSize:_,imageSettings:O,size:x});Gt.useEffect(()=>{if(F.current!=null){const Ie=F.current,$=Ie.getContext("2d");if(!$)return;let ke=J;const ve=Y.current,ye=Re!=null&&ve!==null&&ve.complete&&ve.naturalHeight!==0&&ve.naturalWidth!==0;ye&&Re.excavation!=null&&(ke=Cx(J,Re.excavation));const De=window.devicePixelRatio||1;Ie.height=Ie.width=x*De;const Ee=x/we*De;$.scale(Ee,Ee),$.fillStyle=b,$.fillRect(0,0,we,we),$.fillStyle=v,WE?$.fill(new Path2D(vx(ke,ie))):J.forEach(function(X,G){X.forEach(function(Ce,ae){Ce&&$.fillRect(ae+ie,G+ie,1,1)})}),Re&&($.globalAlpha=Re.opacity),ye&&$.drawImage(ve,Re.x+ie,Re.y+ie,Re.w,Re.h)}}),Gt.useEffect(()=>{q(!1)},[U]);const Ae=vf({height:x,width:x},j);let be=null;return U!=null&&(be=Gt.createElement("img",{src:U,key:U,style:{display:"none"},onLoad:()=>{q(!0)},ref:Y,crossOrigin:Re==null?void 0:Re.crossOrigin})),Gt.createElement(Gt.Fragment,null,Gt.createElement("canvas",vf({style:Ae,height:x,width:x,ref:K,role:"img"},W)),be)});HE.displayName="QRCodeCanvas";var mh=Gt.forwardRef(function(i,a){const u=i,{value:m,size:x=mx,level:w=px,bgColor:b=gx,fgColor:v=xx,includeMargin:C=yx,minVersion:A=wx,boostLevel:T,title:_,marginSize:O,imageSettings:L}=u,B=Cf(u,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:j,cells:W,numCells:U,calculatedImageSettings:F}=bx({value:m,level:w,minVersion:A,boostLevel:T,includeMargin:C,marginSize:O,imageSettings:L,size:x});let Y=W,K=null;L!=null&&F!=null&&(F.excavation!=null&&(Y=Cx(W,F.excavation)),K=Gt.createElement("image",{href:L.src,height:F.h,width:F.w,x:F.x+j,y:F.y+j,preserveAspectRatio:"none",opacity:F.opacity,crossOrigin:F.crossOrigin}));const ne=vx(Y,j);return Gt.createElement("svg",vf({height:x,width:x,viewBox:`0 0 ${U} ${U}`,ref:a,role:"img"},B),!!_&&Gt.createElement("title",null,_),Gt.createElement("path",{fill:b,d:`M0,0 h${U}v${U}H0z`,shapeRendering:"crispEdges"}),Gt.createElement("path",{fill:v,d:ne,shapeRendering:"crispEdges"}),K)});mh.displayName="QRCodeSVG";const GE=({player:t})=>h.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"350px",height:"500px",margin:"0 auto",position:"relative"},children:t!=null&&t.image_data?h.jsxs("div",{style:{position:"relative",width:"350px",height:"450px"},children:[h.jsx("img",{src:`data:image/jpeg;base64,${t.image_data}`,alt:t.name,style:{width:"350px",height:"450px",objectFit:"cover",borderRadius:"28px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.15)",margin:"auto",display:"block"},onError:i=>{console.error("Image failed to load:",i),i.target.style.display="none"}}),h.jsx("div",{style:{position:"absolute",bottom:"-6px",left:"1px",right:"1px",background:"linear-gradient(135deg, #42A5F5 0%, #2196F3 30%, #1976D2 70%, #1565C0 100%)",color:"white",padding:"14px 28px",borderRadius:"50px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',boxShadow:"0 4px 12px rgba(33, 150, 243, 0.25)",letterSpacing:"0.02em"},children:t.name})]}):h.jsxs("div",{style:{width:"350px",height:"450px",backgroundColor:"#f0f1f4",borderRadius:"28px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"relative",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[h.jsx("p",{style:{marginBottom:"60px",color:"#6b7280"},children:"No image available"}),h.jsx("div",{style:{position:"absolute",bottom:"-6px",left:"1px",right:"1px",background:"linear-gradient(135deg, #42A5F5 0%, #2196F3 30%, #1976D2 70%, #1565C0 100%)",color:"white",padding:"14px 28px",borderRadius:"50px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',boxShadow:"0 4px 12px rgba(33, 150, 243, 0.25)",letterSpacing:"0.02em"},children:t.name})]})});var np=typeof window>"u"?N.useEffect:N.useLayoutEffect,XE=({isPlaying:t,duration:i,startAt:a=0,updateInterval:u=0,onComplete:m,onUpdate:x})=>{let[w,b]=N.useState(a),v=N.useRef(0),C=N.useRef(a),A=N.useRef(a*-1e3),T=N.useRef(null),_=N.useRef(null),O=N.useRef(null),L=W=>{let U=W/1e3;if(_.current===null){_.current=U,T.current=requestAnimationFrame(L);return}let F=U-_.current,Y=v.current+F;_.current=U,v.current=Y;let K=C.current+(u===0?Y:(Y/u|0)*u),ne=C.current+Y,q=typeof i=="number"&&ne>=i;b(q?i:K),q||(T.current=requestAnimationFrame(L))},B=()=>{T.current&&cancelAnimationFrame(T.current),O.current&&clearTimeout(O.current),_.current=null},j=N.useCallback(W=>{B(),v.current=0;let U=typeof W=="number"?W:a;C.current=U,b(U),t&&(T.current=requestAnimationFrame(L))},[t,a]);return np(()=>{if(x==null||x(w),i&&w>=i){A.current+=i*1e3;let{shouldRepeat:W=!1,delay:U=0,newStartAt:F}=(m==null?void 0:m(A.current/1e3))||{};W&&(O.current=setTimeout(()=>j(F),U*1e3))}},[w,i]),np(()=>(t&&(T.current=requestAnimationFrame(L)),B),[t,i,u]),{elapsedTime:w,reset:j}},YE=(t,i,a)=>{let u=t/2,m=i/2,x=u-m,w=2*x,b=a==="clockwise"?"1,0":"0,1",v=2*Math.PI*x;return{path:`m ${u},${m} a ${x},${x} 0 ${b} 0,${w} a ${x},${x} 0 ${b} 0,-${w}`,pathLength:v}},rp=(t,i)=>t===0||t===i?0:typeof i=="number"?t-i:0,$E=t=>({position:"relative",width:t,height:t}),ZE={display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,top:0,width:"100%",height:"100%"},Ex=(t,i,a,u,m)=>{if(u===0)return i;let x=(m?u-t:t)/u;return i+a*x},ip=t=>{var i,a;return(a=(i=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(u,m,x,w)=>`#${m}${m}${x}${x}${w}${w}`).substring(1).match(/.{2}/g))==null?void 0:i.map(u=>parseInt(u,16)))!=null?a:[]},KE=(t,i)=>{var a;let{colors:u,colorsTime:m,isSmoothColorTransition:x=!0}=t;if(typeof u=="string")return u;let w=(a=m==null?void 0:m.findIndex((_,O)=>_>=i&&i>=m[O+1]))!=null?a:-1;if(!m||w===-1)return u[0];if(!x)return u[w];let b=m[w]-i,v=m[w]-m[w+1],C=ip(u[w]),A=ip(u[w+1]),T=!!t.isGrowing;return`rgb(${C.map((_,O)=>Ex(b,_,A[O]-_,v,T)|0).join(",")})`},qE=t=>{let{duration:i,initialRemainingTime:a,updateInterval:u,size:m=180,strokeWidth:x=12,trailStrokeWidth:w,isPlaying:b=!1,isGrowing:v=!1,rotation:C="clockwise",onComplete:A,onUpdate:T}=t,_=N.useRef(),O=Math.max(x,w??0),{path:L,pathLength:B}=YE(m,O,C),{elapsedTime:j}=XE({isPlaying:b,duration:i,startAt:rp(i,a),updateInterval:u,onUpdate:typeof T=="function"?U=>{let F=Math.ceil(i-U);F!==_.current&&(_.current=F,T(F))}:void 0,onComplete:typeof A=="function"?U=>{var F;let{shouldRepeat:Y,delay:K,newInitialRemainingTime:ne}=(F=A(U))!=null?F:{};if(Y)return{shouldRepeat:Y,delay:K,newStartAt:rp(i,ne)}}:void 0}),W=i-j;return{elapsedTime:j,path:L,pathLength:B,remainingTime:Math.ceil(W),rotation:C,size:m,stroke:KE(t,W),strokeDashoffset:Ex(j,0,B,i,v),strokeWidth:x}},ph=t=>{let{children:i,strokeLinecap:a,trailColor:u,trailStrokeWidth:m}=t,{path:x,pathLength:w,stroke:b,strokeDashoffset:v,remainingTime:C,elapsedTime:A,size:T,strokeWidth:_}=qE(t);return Gt.createElement("div",{style:$E(T)},Gt.createElement("svg",{viewBox:`0 0 ${T} ${T}`,width:T,height:T,xmlns:"http://www.w3.org/2000/svg"},Gt.createElement("path",{d:x,fill:"none",stroke:u??"#d9d9d9",strokeWidth:m??_}),Gt.createElement("path",{d:x,fill:"none",stroke:b,strokeLinecap:a??"round",strokeWidth:_,strokeDasharray:w,strokeDashoffset:v})),typeof i=="function"&&Gt.createElement("div",{style:ZE},i({remainingTime:C,elapsedTime:A,color:b})))};ph.displayName="CountdownCircleTimer";const QE=({onComplete:t})=>{const[i,a]=N.useState(7),u=N.useRef(null);N.useEffect(()=>(u.current&&clearInterval(u.current),u.current=setInterval(()=>{a(b=>b<=1?(clearInterval(u.current),t&&setTimeout(t,400),0):b-1)},1e3),()=>{u.current&&clearInterval(u.current)}),[t]);const m=i/7,x=2*Math.PI*120,w=x*(1-m);return h.jsxs("div",{className:"lobby-countdown-overlay",children:[h.jsx("div",{className:"countdown-bg-gradient"}),h.jsxs("div",{className:"countdown-floating-orbs",children:[h.jsx("div",{className:"orb orb-1"}),h.jsx("div",{className:"orb orb-2"}),h.jsx("div",{className:"orb orb-3"}),h.jsx("div",{className:"orb orb-4"})]}),h.jsxs("div",{className:"lobby-countdown-content",children:[h.jsxs("svg",{className:"countdown-ring",viewBox:"0 0 260 260",children:[h.jsx("circle",{className:"countdown-ring-bg",cx:"130",cy:"130",r:"120",fill:"none",strokeWidth:"6"}),h.jsx(St.circle,{className:"countdown-ring-progress",cx:"130",cy:"130",r:"120",fill:"none",strokeWidth:"6",strokeLinecap:"round",strokeDasharray:x,initial:{strokeDashoffset:0},animate:{strokeDashoffset:w},transition:{duration:.8,ease:"easeInOut"}})]}),h.jsx("div",{className:"countdown-number-container",children:h.jsx(jr,{mode:"popLayout",children:h.jsx(St.div,{className:"lobby-countdown-number",initial:{scale:.5,opacity:0,filter:"blur(10px)",y:40},animate:{scale:1,opacity:1,filter:"blur(0px)",y:0},exit:{scale:1.5,opacity:0,filter:"blur(8px)",y:-30},transition:{duration:.5,ease:[.16,1,.3,1]},children:i},i)})}),h.jsx(St.div,{className:"lobby-countdown-text",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.5},children:i>0?"Get ready!":"Starting..."})]}),h.jsx(jr,{children:h.jsx(St.div,{className:"countdown-pulse",initial:{scale:.8,opacity:.5},animate:{scale:2.5,opacity:0},transition:{duration:1,ease:"easeOut"}},i)})]})},JE=({onComplete:t,lobbyCode:i="this"})=>{const{userProfile:a}=N.useContext(Fn),[u,m]=N.useState(0),[x,w]=N.useState(!1),[b,v]=N.useState(!1),[C,A]=N.useState([0]),[T,_]=N.useState(!1),O=N.useRef(null),L=N.useRef(null),B=[{image:"/assets/how_to_tutorial_updated_slide1.svg",duration:2e3,animatedText:"Find your match using their profile picture!"},{image:"/assets/how_to_pt2_2.svg",duration:4e3,animatedText:"Raise volume to the max, to know when you have a match!"},{image:"/assets/how_to_tutorial_updated_slide3.svg",duration:4e3,animatedText:"Tap leave to stop being paired/take a break"}];return N.useEffect(()=>{const j=()=>{if(u>=B.length-1){clearInterval(O.current),t&&t();return}w(!0);const W=u+1;A([u,W]),L.current=setTimeout(()=>{_(!1),m(W),w(!1),setTimeout(()=>{A([W]),v(!0),B[W].animatedText&&_(!0)},500)},500)};return O.current=setInterval(j,B[u].duration),v(!0),u===0&&B[0].animatedText&&_(!0),()=>{O.current&&clearInterval(O.current),L.current&&clearTimeout(L.current)}},[u,B.length,t]),h.jsx("div",{className:"tutorial-overlay",children:h.jsxs("div",{className:"tutorial-container",children:[C.map(j=>h.jsxs("div",{className:`tutorial-slide ${j===u?"current":j<u?"previous":"next"}`,children:[j===u&&B[j].animatedText&&T&&h.jsx("div",{className:"animated-text pop-burst",children:B[j].animatedText}),j===1&&h.jsx("div",{className:"volume-arrow-container",children:h.jsx("svg",{className:"volume-arrow",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M19 12H5M5 12L12 5M5 12L12 19",stroke:"#144dff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),h.jsx("div",{className:`tutorial-image-container ${j===0?"first-slide":""}`,children:h.jsx("img",{src:B[j].image,alt:`Tutorial step ${j+1}`,className:"tutorial-image"})}),h.jsx("div",{className:`tutorial-text ${b&&j===u?"text-animate":""}`,children:B[j].text})]},j)),h.jsx("div",{className:"tutorial-progress-bar-container",children:h.jsx("div",{className:"tutorial-progress-bar",children:h.jsx("div",{className:"tutorial-progress-bar-fill"})})})]})})},eS=t=>Array.from({length:t},(i,a)=>{const u=a/t*Math.PI*2,m=300+Math.random()*200;return{id:a,startX:Math.cos(u)*m,startY:Math.sin(u)*m,delay:Math.random()*.5,duration:.8+Math.random()*.4,size:4+Math.random()*6}}),tS=t=>Array.from({length:t},(i,a)=>({id:a,left:Math.random()*100,delay:Math.random()*2,duration:1+Math.random()*1,size:2+Math.random()*3})),nS=({isVisible:t,onAnimationEnd:i})=>{const[a,u]=N.useState(!1),[m,x]=N.useState(!1),w=N.useRef(null),b=N.useMemo(()=>eS(30),[]),v=N.useMemo(()=>tS(20),[]);return N.useEffect(()=>(w.current&&clearTimeout(w.current),t?(u(!0),x(!1),setTimeout(()=>x(!0),600),w.current=setTimeout(()=>{u(!1),x(!1),i&&i()},3500)):(u(!1),x(!1)),()=>{w.current&&(clearTimeout(w.current),w.current=null)}),[t,i]),h.jsx(jr,{children:a&&h.jsxs(St.div,{className:"match-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[h.jsx("div",{className:"match-spotlight-bg"}),h.jsx("div",{className:"spotlight-rays",children:[...Array(8)].map((C,A)=>h.jsx(St.div,{className:"ray",style:{transform:`rotate(${A*45}deg)`},initial:{opacity:0,scaleY:0},animate:{opacity:.15,scaleY:1},transition:{delay:.3+A*.05,duration:.6,ease:"easeOut"}},A))}),h.jsx("div",{className:"particles-container",children:b.map(C=>h.jsx(St.div,{className:"converge-particle",style:{width:C.size,height:C.size},initial:{x:C.startX,y:C.startY,opacity:0,scale:0},animate:{x:0,y:0,opacity:[0,1,1,0],scale:[0,1.5,1,0]},transition:{duration:C.duration,delay:C.delay,ease:[.25,.1,.25,1]}},C.id))}),h.jsx(St.div,{className:"central-burst",initial:{scale:0,opacity:0},animate:{scale:[0,1.5,1],opacity:[0,1,.8]},transition:{delay:.5,duration:.6,ease:"easeOut"}}),h.jsx("div",{className:"falling-stars",children:v.map(C=>h.jsx(St.div,{className:"falling-star",style:{left:`${C.left}%`,width:C.size,height:C.size},initial:{y:-20,opacity:0},animate:{y:[null,window.innerHeight+20],opacity:[0,1,1,0]},transition:{duration:C.duration,delay:C.delay,repeat:1,ease:"linear"}},C.id))}),h.jsx(jr,{children:m&&h.jsxs(St.div,{className:"match-text-container",initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:1.2,opacity:0},transition:{type:"spring",stiffness:300,damping:20},children:[h.jsx(St.div,{className:"match-text-glow",animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:"It's a Match!"}),h.jsx("div",{className:"match-text",children:"It's a Match!"}),h.jsx(St.div,{className:"match-subtext",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:.3,duration:.4},children:"Get ready to connect"})]})}),m&&h.jsx(St.div,{className:"ring-pulse",initial:{scale:.2,opacity:1},animate:{scale:3,opacity:0},transition:{duration:1,ease:"easeOut"}})]})})},rS=({isVisible:t,onAnimationEnd:i})=>{const[a,u]=N.useState(!1),m=N.useRef(null);return N.useEffect(()=>(m.current&&clearTimeout(m.current),t?(u(!0),m.current=setTimeout(()=>{u(!1),i&&i()},2200)):u(!1),()=>{m.current&&(clearTimeout(m.current),m.current=null)}),[t,i]),h.jsx(jr,{children:a&&h.jsxs(St.div,{className:"ready-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[h.jsx("div",{className:"ready-backdrop"}),h.jsxs(St.div,{className:"ready-card",initial:{scale:.8,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},transition:{type:"spring",stiffness:300,damping:25,delay:.1},children:[h.jsxs("div",{className:"checkmark-container",children:[h.jsxs("svg",{className:"checkmark-svg",viewBox:"0 0 100 100",children:[h.jsx(St.circle,{className:"checkmark-circle",cx:"50",cy:"50",r:"45",fill:"none",strokeWidth:"4",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.5,delay:.2,ease:"easeOut"}}),h.jsx(St.path,{className:"checkmark-check",d:"M30 50 L45 65 L70 35",fill:"none",strokeWidth:"5",strokeLinecap:"round",strokeLinejoin:"round",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.4,delay:.6,ease:"easeOut"}})]}),h.jsx(St.div,{className:"success-pulse",initial:{scale:.8,opacity:.6},animate:{scale:1.8,opacity:0},transition:{duration:.8,delay:.9,ease:"easeOut"}})]}),h.jsx(St.div,{className:"ready-text",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.8,duration:.3},children:"You're ready!"}),h.jsx(St.div,{className:"ready-subtext",initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:.3},children:"Waiting for the next round"})]})]})})},iS=({children:t,delay:i=0,index:a,onMouseEnter:u})=>{const m=N.useRef(null),x=mE(m,{amount:.5,once:!1});return h.jsx(St.div,{ref:m,"data-index":a,onMouseEnter:u,initial:{scale:.7,opacity:0},animate:x?{scale:1,opacity:1}:{scale:.7,opacity:0},transition:{duration:.2,delay:i},className:"animated-tag-item-wrapper",children:t})},sp=({tags:t=[],selectedTags:i=[],onTagChange:a,showGradients:u=!0,enableArrowNavigation:m=!0,displayScrollbar:x=!0,className:w="",maxHeight:b=400})=>{const v=N.useRef(null),[C,A]=N.useState(-1),[T,_]=N.useState(!1),[O,L]=N.useState(0),[B,j]=N.useState(1),W=N.useCallback(Y=>{A(Y)},[]),U=N.useCallback((Y,K)=>{A(K),a&&a(Y)},[a]),F=N.useCallback(Y=>{const{scrollTop:K,scrollHeight:ne,clientHeight:q}=Y.target;L(Math.min(K/50,1));const ie=ne-(K+q);j(ne<=q?0:Math.min(ie/50,1))},[]);return N.useEffect(()=>{if(v.current){const{scrollHeight:Y,clientHeight:K}=v.current;Y<=K?j(0):j(1)}},[t]),N.useEffect(()=>{if(!m)return;const Y=K=>{K.key==="ArrowDown"||K.key==="Tab"&&!K.shiftKey?(K.preventDefault(),_(!0),A(ne=>Math.min(ne+1,t.length-1))):K.key==="ArrowUp"||K.key==="Tab"&&K.shiftKey?(K.preventDefault(),_(!0),A(ne=>Math.max(ne-1,0))):(K.key==="Enter"||K.key===" ")&&C>=0&&C<t.length&&(K.preventDefault(),a&&a(t[C]))};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[t,C,a,m]),N.useEffect(()=>{if(!T||C<0||!v.current)return;const Y=v.current,K=Y.querySelector(`[data-index="${C}"]`);if(K){const q=Y.scrollTop,ie=Y.clientHeight,J=K.offsetTop,we=J+K.offsetHeight;J<q+50?Y.scrollTo({top:J-50,behavior:"smooth"}):we>q+ie-50&&Y.scrollTo({top:we-ie+50,behavior:"smooth"})}_(!1)},[C,T]),h.jsxs("div",{className:`animated-tag-list-container ${w}`,children:[h.jsx("div",{ref:v,className:`animated-tag-list ${x?"":"no-scrollbar"}`,onScroll:F,style:{maxHeight:`${b}px`},children:t.map((Y,K)=>h.jsx(iS,{delay:.05,index:K,onMouseEnter:()=>W(K),children:h.jsxs("label",{className:`animated-tag-label ${C===K?"focused":""} ${i.includes(Y)?"selected":""}`,onClick:ne=>{ne.preventDefault(),U(Y,K)},children:[h.jsx("input",{type:"checkbox",checked:i.includes(Y),onChange:()=>{},tabIndex:-1}),h.jsx("span",{className:"tag-text",children:Y})]})},`tag-${Y}`))}),u&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"animated-tag-top-gradient",style:{opacity:O}}),h.jsx("div",{className:"animated-tag-bottom-gradient",style:{opacity:B}})]})]})},sS=({onProfileClick:t,onTutorialClick:i,userImage:a})=>{const[u,m]=N.useState(!1),x=N.useRef(null);N.useEffect(()=>{const v=C=>{x.current&&!x.current.contains(C.target)&&m(!1)};return document.addEventListener("mousedown",v),document.addEventListener("touchstart",v),()=>{document.removeEventListener("mousedown",v),document.removeEventListener("touchstart",v)}},[]);const w=()=>{m(!1),t()},b=()=>{m(!1),i()};return h.jsxs("div",{className:"profile-dropdown-container",ref:x,children:[h.jsxs("button",{className:`profile-dropdown-button ${u?"active":""}`,onClick:()=>m(!u),children:[h.jsx("div",{className:"profile-dropdown-avatar",children:h.jsx("img",{src:a||"/assets/avatar_3.png",alt:"Profile"})}),h.jsx("span",{className:"profile-dropdown-text",children:"            "}),h.jsx("svg",{className:`profile-dropdown-chevron ${u?"rotated":""}`,width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:h.jsx("path",{d:"M2.5 4.5L6 8L9.5 4.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]}),h.jsx(jr,{children:u&&h.jsxs(St.div,{className:"profile-dropdown-menu",initial:{opacity:0,y:-8,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-8,scale:.95},transition:{duration:.15,ease:[.4,0,.2,1]},children:[h.jsxs("button",{className:"profile-dropdown-item profile-dropdown-item--primary",onClick:w,children:[h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[h.jsx("circle",{cx:"12",cy:"8",r:"4",stroke:"currentColor",strokeWidth:"2"}),h.jsx("path",{d:"M4 20C4 16.6863 7.58172 14 12 14C16.4183 14 20 16.6863 20 20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),h.jsx("span",{children:"Edit Profile"})]}),h.jsx("div",{className:"profile-dropdown-divider"}),h.jsxs("button",{className:"profile-dropdown-item",onClick:b,children:[h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[h.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:"currentColor",strokeWidth:"2"}),h.jsx("path",{d:"M12 8V12L15 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),h.jsx("span",{children:"Tutorial"})]})]})})]})},oS=({isOpen:t,onClose:i})=>{const{userProfile:a}=N.useContext(Fn),[u,m]=N.useState(""),[x,w]=N.useState(""),[b,v]=N.useState(""),[C,A]=N.useState(null),[T,_]=N.useState(null),[O,L]=N.useState(!1),[B,j]=N.useState({x:0,y:0}),[W,U]=N.useState(1),[F,Y]=N.useState(null),[K,ne]=N.useState(!1),[q,ie]=N.useState(!1),[J,we]=N.useState(""),[Re,Ae]=N.useState(!0),be=N.useRef(null);N.useEffect(()=>{t&&(we(""),_(null),ne(!1),j({x:0,y:0}),U(1),Ie())},[t]);const Ie=async()=>{var X,G,Ce;Ae(!0),we("");try{const ae=await yt("/load_user");if(ae.ok){const se=await ae.json();m(((X=se.profile)==null?void 0:X.name)||""),w(se.email||""),v(((G=se.profile)==null?void 0:G.contact_url)||""),L(se.email_verified===!0),(Ce=se.profile)!=null&&Ce.image_data?A(`data:image/jpeg;base64,${se.profile.image_data}`):a!=null&&a.image_data&&A(`data:image/jpeg;base64,${a.image_data}`)}}catch(ae){console.error("Error loading user data:",ae),m((a==null?void 0:a.name)||""),w((user==null?void 0:user.email)||""),a!=null&&a.image_data&&A(`data:image/jpeg;base64,${a.image_data}`)}finally{Ae(!1)}},$=X=>{const G=X.target.files[0];if(G){const Ce=new FileReader;Ce.onload=ae=>{A(ae.target.result),ne(!0)},Ce.readAsDataURL(G)}},ke=(X,G)=>{Y(G)},ve=async()=>{try{const X=await Uc(C,F);_(X),A(X),ne(!1)}catch(X){console.error("Error cropping image:",X),we("Failed to crop image. Please try again.")}},ye=()=>{ne(!1),a!=null&&a.image_data&&A(`data:image/jpeg;base64,${a.image_data}`)},De=async X=>{var G;X.preventDefault(),ie(!0),we("");try{const Ce={name:u.trim()||void 0,contact_url:b.trim()||void 0};if(!O&&x.trim()){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(x.trim())){we("Please enter a valid email address."),ie(!1);return}Ce.email=x.trim()}T&&(Ce.image_data=T.split(",")[1]);const ae=await yt("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ce)});if(!ae.ok){const se=await ae.json();throw new Error(se.detail||"Failed to update profile")}ie(!1),i()}catch(Ce){console.error("Error updating profile:",Ce),(G=Ce.message)!=null&&G.toLowerCase().includes("already associated")?we("This email is already in use by another account."):we(Ce.message||"Failed to update profile. Please try again.")}finally{ie(!1)}},Ee=T||C||"/assets/avatar_3.png";return h.jsx(jr,{children:t&&h.jsx(St.div,{className:"lobby-profile-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:i,children:h.jsxs(St.div,{className:"lobby-profile-modal",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",stiffness:400,damping:30},onClick:X=>X.stopPropagation(),children:[h.jsx("button",{className:"lobby-profile-modal-close",onClick:i,"aria-label":"Close",children:h.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:h.jsx("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}),h.jsx("h2",{className:"lobby-profile-modal-title",children:"Edit Profile"}),Re?h.jsxs("div",{className:"lobby-profile-modal-loading",children:[h.jsx("div",{className:"lobby-profile-spinner"}),h.jsx("span",{children:"Loading..."})]}):h.jsxs("form",{onSubmit:De,className:"lobby-profile-form",children:[J&&h.jsx("div",{className:"lobby-profile-error",children:J}),K?h.jsxs("div",{className:"lobby-profile-crop-section",children:[h.jsx("div",{className:"lobby-profile-crop-container",children:h.jsx(Vc,{image:C,crop:B,zoom:W,aspect:1,onCropComplete:ke,onCropChange:j,onZoomChange:U,cropShape:"round"})}),h.jsxs("div",{className:"lobby-profile-crop-actions",children:[h.jsx("button",{type:"button",className:"lobby-profile-btn-secondary",onClick:ye,children:"Cancel"}),h.jsx("button",{type:"button",className:"lobby-profile-btn-primary",onClick:ve,children:"Save Crop"})]})]}):h.jsxs("div",{className:"lobby-profile-image-section",children:[h.jsxs("div",{className:"lobby-profile-image-container",children:[h.jsx("img",{src:Ee,alt:"Profile",className:"lobby-profile-image"}),h.jsx("button",{type:"button",className:"lobby-profile-image-edit",onClick:()=>{var X;return(X=be.current)==null?void 0:X.click()},children:h.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#144dff"}),h.jsx("path",{d:"M14.5 7.5L16.5 9.5M8 16L8.5 13.5L14.5 7.5L16.5 9.5L10.5 15.5L8 16Z",fill:"white",stroke:"white",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]}),h.jsx("input",{ref:be,type:"file",accept:"image/*",onChange:$,style:{display:"none"}}),h.jsx("span",{className:"lobby-profile-image-hint",children:"Tap to change photo"})]}),h.jsxs("div",{className:"lobby-profile-field",children:[h.jsx("label",{className:"lobby-profile-label",children:"Name"}),h.jsx("input",{type:"text",value:u,onChange:X=>m(X.target.value),placeholder:"Your name",className:"lobby-profile-input"})]}),h.jsxs("div",{className:"lobby-profile-field",children:[h.jsxs("label",{className:"lobby-profile-label",children:["Email",O&&h.jsxs("span",{className:"lobby-profile-verified-badge",children:[h.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",children:h.jsx("path",{d:"M5 13L9 17L19 7",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),"Verified"]})]}),h.jsx("input",{type:"email",value:x,onChange:X=>w(X.target.value),placeholder:"you@example.com",className:`lobby-profile-input ${O?"lobby-profile-input--readonly":""}`,disabled:O}),O&&h.jsx("span",{className:"lobby-profile-field-hint",children:"Verified emails cannot be changed"})]}),h.jsxs("div",{className:"lobby-profile-field",children:[h.jsx("label",{className:"lobby-profile-label",children:"Contact URL"}),h.jsx("input",{type:"text",value:b,onChange:X=>v(X.target.value),placeholder:"linkedin.com/in/yourprofile",className:"lobby-profile-input"}),h.jsx("span",{className:"lobby-profile-field-hint",children:"LinkedIn, Twitter, or any way to connect"})]}),h.jsx("button",{type:"submit",className:"lobby-profile-submit",disabled:q||K,children:q?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"lobby-profile-spinner-small"}),"Saving..."]}):"Save Changes"})]})]})})})},gc=9,aS=5,lS=5e3,cS=!1,uS=()=>{var V;const t=Math.floor(540),[i,a]=N.useState([]),[u,m]=N.useState("self"),[x,w]=N.useState(!1),[b,v]=N.useState(""),C=N.useRef(null),A=N.useRef(null),[T,_]=N.useState(!1),O=N.useRef(!1),[L,B]=N.useState(!1),[j,W]=N.useState(!1),{loadSound:U,seekTo:F,cancelSound:Y,checkSound:K,soundEnabled:ne,setSoundEnabled:q,isPlaying:ie}=Pf(),[J,we]=N.useState("yonder"),Re=On(),{code:Ae}=Ry(),[be,Ie]=N.useState(null);dx(Ie,null,J);const{user:$,userProfile:ke,checkAuth:ve,permissions:ye,isAuthLoading:De,authLoadingMessage:Ee,emailVerified:X}=N.useContext(Fn),[G,Ce]=N.useState(!1),[ae,se]=N.useState([]),[te,Me]=N.useState(""),[Se,Le]=N.useState(""),[et,Xe]=N.useState(!1),de=N.useRef(null),xe=N.useRef(localStorage.getItem("hasShownEmailBackupModal")==="true"),[$e,Ze]=N.useState(!1),It=N.useRef(localStorage.getItem("hasShownPauseInfoModal")==="true");N.useEffect(()=>{if(!De&&!$){const He=new URLSearchParams(window.location.search).get("code")||Ae;Re(He?`/signup?redirect=lobby&code=${He}`:"/signup?redirect=lobby")}},[De,$,Re,Ae]),N.useEffect(()=>{(()=>{const Ye=new URLSearchParams(window.location.search).get("code")||Ae;if(Ye){we(Ye),wE(Ye),_i(Ye);const at=`hasSeenTutorial_${Ye}`,Dt=localStorage.getItem(at),dn=!!localStorage.getItem("access_token");console.log("Tutorial check:",{codeParam:Ye,lobbyTutorialKey:at,hasSeenLobbyTutorial:Dt,isAuthenticated:dn}),!Dt&&dn&&(mi(!0),localStorage.setItem(at,"true"))}})()},[Ae]);const[it,qe]=N.useState(null),[tt,jt]=N.useState(null),[Ue,gn]=N.useState(null),[ir,Ge]=N.useState(null),[Tt,ze]=N.useState(null),ct=N.useRef(!1),Je=N.useRef(null),wt=N.useRef(null),Bt=N.useRef(null),Xt=N.useRef(null),[Be,Te]=N.useState(null),[ce,ft]=N.useState(null),[ut,xt]=N.useState(null),[Yt,mn]=N.useState(null),[cn,dt]=N.useState(!0),rn=N.useRef(0),[un,Fr]=N.useState(null),[en,Ni]=N.useState(null),[Wt,Nr]=N.useState([]),[Dn,Vn]=N.useState([]),[Ji,wr]=N.useState(!document.hidden),Ii=N.useRef("yonder"),tn=N.useRef({}),Kn=N.useRef([]),[qn,Ke]=N.useState(!1),Ir=N.useRef(null),[uo,Qn]=N.useState(!1);N.useEffect(()=>{Ii.current=J},[J]);async function sr(ge,He){const at=await(await yt("/set_profile_info",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tags_work:ge,tags_desiring_work:He})})).json();console.log("SET PROFILE INFO:",at)}const Ti=async ge=>{if(ge.length!==0){Ke(!0);try{const He=await yt("/load_batch_pfp_small_icons",{method:"POST",headers:{"Content-Type":"application/json",lobby_code:Ii.current},body:JSON.stringify({usernames:ge})});if(He.ok){const Ye=await He.json();tn.current={...tn.current,...Ye},console.log("Profile images fetched:",Object.keys(Ye))}else console.error("Failed to fetch profile images:",He.status)}catch(He){console.error("Error fetching profile images:",He)}finally{Ke(!1)}}},_i=async ge=>{try{const He=await yt("/lobby_setup_data",{headers:{lobby_code:ge}});if(He.ok){const Ye=await He.json();Ye.logo_icon?(Ir.current=Ye.logo_icon,Qn(!0),console.log("Sponsor logo loaded successfully")):console.log("No sponsor logo available for this lobby")}else console.error("Failed to fetch lobby setup data:",He.status)}catch(He){console.error("Error fetching lobby setup data:",He)}};async function Tr(){try{Y(),tn.current={},Kn.current=[],(await yt("/disconnect_lobby",{headers:{lobby_code:J}})).ok&&Re("/")}catch(ge){console.error("Error disconnecting from lobby:",ge),Re("/")}finally{Y(),Re("/"),console.log("finally")}}const[fo,es]=N.useState(!1),[vr,Ln]=N.useState(null),$t=N.useRef(!1),[ho,Lt]=N.useState(!1),[Ri,Ne]=N.useState(null),[Rs,Kt]=N.useState(!1),hi=(ge,He)=>{if(!ge||!He)return null;for(const Ye of ge.tags_work)if(He.desiring_tags_work.includes(Ye)){for(const at of He.tags_work)if(ge.desiring_tags_work.includes(at))return{playerTag:Ye,opponentTag:at}}return null};async function ki(){try{rn.current+=1,rn.current>5&&(rn.current=0,ct.current=!1);const ge=!document.hidden,He=Ii.current;if(console.log("lobby code fr:",He),He=="yonder"){console.log("lobby code is not set");return}const Ye=await yt(`/lobby?is_visible=${ge}`,{headers:{is_visible_t_f:ge?"t":"f",lobby_code:He}});if(Ye.ok){const at=await Ye.json();if(console.log("LOBBY PAIR DATA:",He,at),at.status=="inactive"){Y(),Re("/post-event-auth");return}at.lobby_state!=="terminated"&&EE(),gn(at.opponent_name),at.opponent_name==null&&qe(null),a(at.custom_tags),Te(at.lobby_state),mn(at.lobby_duration);const Dt=typeof at.round_time_left=="number"&&!isNaN(at.round_time_left)?at.round_time_left:0;console.log("Timer Debug:",{roundDuration:at.lobby_duration,timeLeft:Dt,lobbyState:at.lobby_state,usingDefaultDuration:!at.lobby_duration}),Bt.current=Dt,Xt.current=at.beat_go_off,ft(Math.floor(Dt));const dn=Math.floor(Dt/60),lt=Math.floor(Dt%60);xt(`${dn}:${lt.toString().padStart(2,"0")}`),ze(at.table_number),at.player_tags!=null&&at.player_tags.tags_work!=null&&Nr(at.player_tags.tags_work),at.player_tags!=null&&at.player_tags.desiring_tags_work!=null&&Vn(at.player_tags.desiring_tags_work),Bt.current!=null&&at.lobby_state=="active"&&Bt.current!=0&&(F(t-Bt.current),console.log("seeking to",t-Bt.current));const Qt=await yt(`/display_lobby_metadata?lobby_code=${He}`,{headers:{lobby_code:He}});if(Qt.ok){const sn=await Qt.json();Ie(sn.player_count);const Sn=sn.usernames||[];if(JSON.stringify(Kn.current)!==JSON.stringify(Sn)){Kn.current=Sn;const Vt=Sn.filter(Un=>!tn.current[Un]&&Un!==($==null?void 0:$.username));Vt.length>0&&(cS||(console.log("Fetching images for new users:",Vt),Ti(Vt)))}}if((Ue!=at.opponent_name||it==null)&&!ct.current&&at.opponent_name!=null){ct.current=!0,console.log("fetching profile");const sn=await yt("/paired_player_profile");if(sn.ok){const Sn=await sn.json();qe(Sn),console.log("profile fetched:",Sn.name)}else console.log("profile fetch failed");ct.current=!1}const ns=vr==="interrim"&&at.lobby_state==="active"&&at.opponent_name,Pi=at.lobby_state==="active"&&at.opponent_name&&at.is_purgatory_pair&&Je.current!==at.opponent_name;if((ns||Pi)&&!$t.current){console.log("New pairing detected:",{isNormalPairingStart:ns,isPurgatoryPairing:Pi}),Je.current=at.opponent_name;const sn=hi(at.player_tags,at.opponent_tags);Pi?(console.log("Purgatory pairing - triggering animation"),$t.current=!0,es(!0),wt.current&&(wt.current.currentTime=0,wt.current.play().catch(Vt=>console.log("Purgatory notification sound blocked:",Vt))),sn&&(console.log("Purgatory pairing also has interest match:",sn),Ne(sn),Lt(!0))):sn&&(console.log("Normal pairing with interest match:",sn),Ne(sn),Lt(!0),$t.current=!0,es(!0));const Sn=!X&&!xe.current,_r=!It.current;if(Sn||_r)try{const Un=await(await yt("/lobby/previous_match_profiles",{headers:{lobby_code:He}})).json(),zn=Un.total_match_count||0;Sn&&Un.profiles&&Un.profiles.length>=2?(se(Un.profiles),Ce(!0),xe.current=!0,localStorage.setItem("hasShownEmailBackupModal","true")):_r&&zn>=4&&!G&&(Ze(!0),It.current=!0,localStorage.setItem("hasShownPauseInfoModal","true"))}catch(Vt){console.error("Error fetching previous match profiles:",Vt)}}Ln(at.lobby_state)}}catch(ge){console.error("Error fetching lobby data:",ge)}}N.useEffect(()=>{K()?q(!0):q(!1);const ge=setInterval(async()=>{ki()},lS);return()=>clearInterval(ge)},[]),N.useEffect(()=>{const ge=()=>{wt.current||(wt.current=new Audio("./assets/sounds/new_banger_chorus.mp3"),wt.current.load(),console.log("Purgatory notification sound unlocked")),document.removeEventListener("click",ge),document.removeEventListener("touchstart",ge)};return document.addEventListener("click",ge),document.addEventListener("touchstart",ge),()=>{document.removeEventListener("click",ge),document.removeEventListener("touchstart",ge)}},[]),N.useEffect(()=>{const ge=setTimeout(ki,1e3);return()=>clearTimeout(ge)},[Be,J]),N.useEffect(()=>{const ge=()=>{const He=!document.hidden;He&&!Ji&&(console.log("Page became visible - fetching latest data"),ki()),wr(He)};return document.addEventListener("visibilitychange",ge),()=>{document.removeEventListener("visibilitychange",ge)}},[Ji]);const Pt=()=>h.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(4px)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},children:h.jsxs("div",{style:{backgroundColor:"#ffffff",padding:"32px 28px",borderRadius:"24px",position:"relative",minWidth:"300px",maxWidth:"340px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.2)",textAlign:"center"},children:[h.jsx("button",{onClick:()=>dt(!1),style:{color:"#ffffff",position:"absolute",right:"12px",top:"12px",border:"none",background:"transparent",fontSize:"10px",cursor:"pointer",width:"10px",height:"10px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:""}),h.jsx("h2",{style:{marginTop:"8px",marginBottom:"8px",color:"#1a1a2e",fontWeight:700,fontSize:"1.25rem",fontFamily:"-apple-system, BlinkMacSystemFont, sans-serif"},children:"Sound is Important"}),h.jsx("p",{style:{color:"#6b7280",fontSize:"0.9rem",marginBottom:"4px"},children:"Raise your volume for the best experience"}),h.jsx("button",{onClick:()=>{U(),dt(!1)},style:{padding:"14px 32px",marginTop:"20px",backgroundColor:"#1a1a2e",color:"#ffffff",border:"none",borderRadius:"16px",fontWeight:600,cursor:"pointer",fontSize:"1rem",fontFamily:"-apple-system, BlinkMacSystemFont, sans-serif",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",transition:"all 0.2s ease"},children:"Enable Sound"})]})}),At=(ge,He)=>{un==null&&Fr(Wt),en==null&&Ni(Dn);const Ye=ge==="self"?un:en;if(!(Ye!=null&&Ye.includes(He))&&(Ye==null?void 0:Ye.length)>=aS){v("Reached tag limit for this section"),setTimeout(()=>{var Dt;(Dt=A.current)==null||Dt.scrollIntoView({behavior:"smooth",block:"center"})},100),setTimeout(()=>{v("")},3e3);return}ge==="self"?Fr(Dt=>Dt.includes(He)?Dt.filter(dn=>dn!==He):[...Dt,He]):Ni(Dt=>Dt.includes(He)?Dt.filter(dn=>dn!==He):[...Dt,He])},_t=()=>{un!=null&&(sr(un,en||[]),setTimeout(()=>{Nr(un||[])},800)),m("desiring"),setTimeout(()=>{var ge;(ge=C.current)==null||ge.scrollIntoView({behavior:"smooth",block:"start"})},100)},or=()=>{en!=null&&(sr(un||[],en),setTimeout(()=>{Nr(un||[]),Vn(en)},800),setTimeout(()=>{O.current||(O.current=!0,_(!0),B(!0))},500)),W(!1),window.scrollTo({top:0,behavior:"smooth"})},[ks,ts]=N.useState(!1);N.useEffect(()=>{if(Be==="interrim")ts(!0);else if(Be==="active"){const ge=setTimeout(()=>{ts(!1)},1e3);return()=>clearTimeout(ge)}},[Be]);const xn=()=>{console.log("Lobby countdown animation completed")},[Cr,mi]=N.useState(!1),[qt,hr]=N.useState(!1),qo=()=>{mi(!1)};N.useEffect(()=>{(Be!=="active"||!it)&&(Lt(!1),Ne(null),Je.current=null)},[Be,it]),N.useEffect(()=>{Be==="terminated"&&(tn.current={},Kn.current=[],Oc(),localStorage.removeItem("hasShownEmailBackupModal"),localStorage.removeItem("hasShownPauseInfoModal"))},[Be]);const Gr=N.useRef(null);N.useEffect(()=>{var He;!x&&!(!ne&&cn&&Be!=="checkin"&&Be!==null&&!ie)&&!(Wt!=null&&Wt.length)&&!(Dn!=null&&Dn.length)&&(i==null?void 0:i.length)>0&&((He=Gr.current)==null||He.scrollIntoView({behavior:"smooth"}),w(!0),W(!0))},[Wt,Dn,i,x,ne,cn,Be,ie]);const Ft=()=>{et||(Ce(!1),Me(""),Le(""),se([]))},En=()=>{Ze(!1)},le=async ge=>{var Ye;if(ge.preventDefault(),Le(""),!te||!te.trim()){Le("Email is required.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(te.trim())){Le("Please enter a valid email.");return}Xe(!0);try{const at=await yt("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:te.trim()})});if(!at.ok){const Dt=await at.json();(Ye=Dt.detail)!=null&&Ye.toLowerCase().includes("already associated")?Le("This email is already in use. Try a different one or skip."):Le(Dt.detail||"Failed to save email."),Xe(!1);return}try{await yt("/auth/send-magic-link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:te.trim()})})}catch(Dt){console.error("Magic link send failed:",Dt)}Ce(!1),Me(""),Le("")}catch(at){console.error("Email backup error:",at),Le("Something went wrong. Try again.")}finally{Xe(!1)}};return N.useEffect(()=>{G&&de.current&&setTimeout(()=>{var ge;return(ge=de.current)==null?void 0:ge.focus()},100)},[G]),De?h.jsx(ol,{fullScreen:!0,message:Ee}):h.jsxs("div",{className:"lobby-container",children:[h.jsxs("div",{className:"lobby-content",children:[h.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0",marginTop:"-1.85rem"},children:h.jsx("img",{src:"/assets/reuneo_test_11.png",alt:"Reuneo Logo",style:{maxWidth:"90px",height:"auto",objectFit:"contain"}})}),(Be==="checkin"||Be==="active"&&!it||Be==="interrim")&&h.jsx("div",{className:"user-profile-container",children:h.jsxs("div",{className:"user-profile",children:[h.jsx("img",{src:ke!=null&&ke.image_data?`data:image/jpeg;base64,${ke.image_data}`:"/assets/avatar_3.png",alt:"Your Profile",className:"user-profile-picture"}),h.jsx("div",{className:"user-profile-glow"})]})}),h.jsx("div",{className:"lobby-header",style:{marginTop:"-30px"},children:h.jsx("h2",{children:i.length>0&&(Wt.length==0||Dn.length==0)?h.jsxs(h.Fragment,{children:["You're not ready, complete your interests.",h.jsx("button",{className:"missing-tags-button",onClick:()=>{var ge;return(ge=Gr.current)==null?void 0:ge.scrollIntoView({behavior:"smooth"})},children:"Complete Interests"})]}):Be==="active"&&it?h.jsxs("span",{className:"lobby-pop-burst",children:["Go find ",it.name,"!"]}):Be==="checkin"?h.jsxs(h.Fragment,{children:["Wait here ",((V=ke==null?void 0:ke.name)==null?void 0:V.slice(0,15))||$||"Guest",".",h.jsx("br",{}),"Your host will start the experience."]}):Be==="active"&&!it?"You'll be paired up when the timer ends.":Be==="interrim"?"Get ready for the next round!":Be==="terminated"?"This session has ended. Thank you for participating!":Be===null?"Connecting to lobby...":""})},Be),Be==="active"&&it&&Tt&&h.jsx("div",{className:"table-number",children:h.jsxs("h3",{style:{color:"#4b73ef"},children:["at table: ",Tt]})}),(Ir.current||Be!=="checkin")&&h.jsxs("div",{className:`timer-sponsor-container ${Ir.current&&Be!=="checkin"?"has-timer":""}`,children:[Ir.current&&h.jsx("div",{className:"sponsor-logo",children:h.jsx("img",{src:`data:image/jpeg;base64,${Ir.current}`,alt:"Sponsor Logo",style:{width:"100px",height:"100px",objectFit:"contain"}})}),Be!=="checkin"&&h.jsx("div",{className:"time-left",style:{display:"flex",flexDirection:"column",alignItems:"center",background:"transparent",padding:"8px"},children:(Be==="active"||Be==="interrim")&&ce?h.jsx(h.Fragment,{children:h.jsx(ph,{isPlaying:Be==="active",duration:Yt||300,initialRemainingTime:ce||0,colors:["#64B5F6","#2196F3","#1976D2"],colorsTime:[Yt||300,(Yt||300)/2,0],size:100,strokeWidth:8,trailColor:"#f0f1f4",strokeLinecap:"round",onComplete:()=>(ki(),{shouldRepeat:!1}),children:({remainingTime:ge})=>{const He=typeof ge=="number"&&!isNaN(ge)?ge:0,Ye=Math.floor(He/60),at=Math.floor(He%60);return h.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[h.jsxs("span",{style:{fontSize:"1.5rem",color:"#1a1a2e",fontWeight:700,fontFamily:"-apple-system, BlinkMacSystemFont, sans-serif"},children:[Ye,":",String(at).padStart(2,"0")]}),h.jsx("span",{style:{fontSize:"0.65rem",color:"#6b7280",fontWeight:500,marginTop:"2px"},children:"time left"})]})}},`${Be}-${ce}`)}):h.jsx("span",{className:"time-left-text"})})]}),ho&&Ri&&Be==="active"&&it&&h.jsxs("div",{className:`match-banner ${Rs?"sparkling":""}`,children:[Rs&&h.jsx("div",{className:"banner-sparkles",children:[...Array(8)].map((ge,He)=>h.jsx("span",{className:"banner-sparkle",style:{left:`${10+He*12}%`,animationDelay:`${He*.15}s`}},He))}),h.jsx("span",{className:"match-tag",children:h.jsx("span",{className:"match-tag-text",children:Ri.playerTag.split(" ").map(ge=>ge.charAt(0).toUpperCase()+ge.slice(1).toLowerCase()).join(" ")})}),h.jsx("div",{className:"match-arrow"}),h.jsx("span",{className:"match-tag",children:h.jsx("span",{className:"match-tag-text",children:Ri.opponentTag.split(" ").map(ge=>ge.charAt(0).toUpperCase()+ge.slice(1).toLowerCase()).join(" ")})})]}),h.jsx("div",{style:{display:"flex",justifyContent:"center",width:"100%",margin:"0 auto",marginTop:"-2rem"},children:Be==="active"||Be==="interrim"?it?h.jsx("div",{style:{marginTop:"-1rem",width:"100%",display:"flex",justifyContent:"center"},children:h.jsx(GE,{player:it})}):h.jsx(h.Fragment,{}):Be==="terminated"?h.jsx("div",{className:"status-message",children:h.jsxs("h2",{children:["This session has ended.",h.jsx("br",{}),"Thank you for participating!"]})}):null}),(Be==="checkin"||Be==="active"&&!it)&&be!==null&&h.jsx("div",{className:"player-count-container",children:h.jsxs("div",{className:"player-count-widget",children:[h.jsxs("div",{className:"player-count-icon",children:[h.jsx("div",{className:"icon-pulse"}),h.jsx("img",{src:"/assets/players_display_icon2.png",alt:"Players in lobby",className:"player-count-img"})]}),h.jsxs("div",{className:"player-count-info",children:[h.jsx("span",{className:"player-count-number",children:be}),h.jsx("span",{className:"player-count-label",children:"joined"})]}),h.jsx("div",{className:"player-count-lobby",children:J})]})}),(Be==="checkin"||Be==="active"&&!it)&&h.jsx("div",{className:"lobby-profiles-container",children:h.jsx("div",{className:"lobby-profiles-grid",children:be>0?h.jsxs(h.Fragment,{children:[Array.from({length:Math.min(be,gc)}).map((ge,He)=>{let Ye;{const Dt=Kn.current[He];Dt&&tn.current[Dt]?Ye=`data:image/jpeg;base64,${tn.current[Dt]}`:Ye="/assets/avatar_8.png"}return h.jsxs("div",{className:`profile-icon-wrapper ${He===Math.min(be,gc)-1?"pop-in":""}`,children:[h.jsx("img",{src:Ye,alt:`Profile ${He+1}`,className:"profile-icon",loading:"lazy"}),h.jsx("div",{className:"profile-icon-glow"})]},`profile-${He}`)}),be>gc&&h.jsx("div",{className:"profile-icon-wrapper more-profiles",children:h.jsxs("div",{className:"more-profiles-bubble",children:["+",be-gc]})})]}):h.jsx("div",{children:"No profiles to display"})})}),(Be==="checkin"||Be==="active")&&h.jsxs("div",{className:"selected-tags-container",children:[Wt&&Wt.length>0&&h.jsxs("div",{className:"tag-category",children:[h.jsx("h4",{children:"I am:"}),h.jsx("div",{className:"tag-list",children:Wt.map(ge=>h.jsx("span",{className:"tag-item",style:{color:"#1a1a2e"},children:ge},`self-${ge}`))})]}),Dn&&Dn.length>0&&h.jsxs("div",{className:"tag-category",children:[h.jsx("h4",{children:"Looking for:"}),h.jsx("div",{className:"tag-list",children:Dn.map(ge=>h.jsx("span",{className:"tag-item",style:{color:"#1a1a2e"},children:ge},`desiring-${ge}`))})]})]}),h.jsx("button",{className:`leave-lobby-button ${$e?"pause-button-elevated":""}`,onClick:Tr,children:"Pause"}),h.jsx(sS,{onProfileClick:()=>hr(!0),onTutorialClick:()=>mi(!0),userImage:ke!=null&&ke.image_data?`data:image/jpeg;base64,${ke.image_data}`:null}),(ye==="admin"||ye==="organizer")&&h.jsx("button",{className:"admin-view-button",onClick:()=>Re(`/admin_lobby_view?code=${J}`),children:"Manage"}),j&&h.jsx("div",{className:"tags-focus-overlay"}),Array.isArray(i)&&i.length>0&&h.jsx("form",{onSubmit:ge=>{ge.preventDefault(),u==="self"?_t():or()},children:h.jsxs("div",{className:`tags-section ${j?"focused":""}`,ref:Gr,children:[h.jsxs("div",{className:"progress-bar-container",children:[h.jsx("div",{className:`self-progress-bar-tab ${u==="self"?"active":""} ${Wt.length>0?"complete":""}`,onClick:()=>m("self"),children:"Who are you?"}),h.jsx("div",{className:`desiring-progress-bar-tab ${u==="desiring"?"active":""} ${Dn.length>0?"complete":""}`,onClick:()=>Wt.length>0?m("desiring"):null,children:"Who do you want to meet?"})]}),h.jsxs("div",{className:`tag-group ${u==="self"?"active":"hidden"}`,children:[h.jsx("h2",{style:{fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif",color:"#1a1a2e"},children:"Who are you?"}),h.jsx(sp,{tags:i,selectedTags:un??Wt,onTagChange:ge=>At("self",ge),showGradients:!0,enableArrowNavigation:u==="self",displayScrollbar:!0,maxHeight:350})]}),h.jsxs("div",{className:`tag-group ${u==="desiring"?"active":"hidden"}`,ref:C,children:[h.jsx("h2",{style:{fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif",color:"#1a1a2e"},children:"Who do you want to meet?"}),h.jsx(sp,{tags:i,selectedTags:en??Dn,onTagChange:ge=>At("desiring",ge),showGradients:!0,enableArrowNavigation:u==="desiring",displayScrollbar:!0,maxHeight:350})]}),h.jsx("button",{type:"submit",className:"tag-selection-button",ref:A,children:u==="self"?"Continue":"Save"}),b&&h.jsx("div",{style:{color:"#144dff",textAlign:"center",marginTop:"1rem",fontSize:"0.9rem",fontWeight:"600"},children:b})]})})]}),ne||!cn||Be=="checkin"||Be==null||ie?null:h.jsx(Pt,{}),ks&&!(i.length>0&&Dn.length===0)&&h.jsx(QE,{onComplete:xn}),Cr&&h.jsx(JE,{onComplete:qo,lobbyCode:J}),h.jsx(oS,{isOpen:qt,onClose:()=>hr(!1)}),h.jsx(nS,{isVisible:fo,onAnimationEnd:()=>{es(!1),$t.current=!1,Kt(!0),setTimeout(()=>Kt(!1),3e3)}}),h.jsx(rS,{isVisible:T,onAnimationEnd:()=>{_(!1),O.current=!1}}),h.jsx(jr,{children:G&&h.jsx(St.div,{className:"email-backup-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:Ft,children:h.jsxs(St.div,{className:"email-backup-modal-content",initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},transition:{type:"spring",stiffness:400,damping:25},onClick:ge=>ge.stopPropagation(),children:[ae.length>0&&h.jsx("div",{className:"previous-matches-row",children:ae.slice(0,2).map((ge,He)=>h.jsx("img",{src:ge.small_image_data?`data:image/jpeg;base64,${ge.small_image_data}`:"/assets/avatar_3.png",alt:ge.name,className:"match-avatar"},He))}),h.jsx("h2",{className:"email-backup-modal-header",children:"Save Your Match History"}),h.jsx("p",{className:"email-backup-modal-subtext",children:"We'll send you a sign-in link in case you get logged out."}),h.jsxs("form",{onSubmit:le,className:"email-backup-form",children:[h.jsx("input",{ref:de,type:"email",value:te,onChange:ge=>Me(ge.target.value),placeholder:"you@example.com",className:"email-backup-input",disabled:et}),Se&&h.jsx("div",{className:"email-backup-error",children:Se}),h.jsx("button",{type:"submit",className:"email-backup-submit-button",disabled:et,children:et?"Sending...":"Save Matches"})]}),h.jsx("button",{type:"button",className:"email-backup-skip-button",onClick:Ft,disabled:et,children:"Don't back up matches"})]})})}),h.jsx(jr,{children:$e&&h.jsx(St.div,{className:"pause-info-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:En,children:h.jsxs(St.div,{className:"pause-info-modal-content",initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},transition:{type:"spring",stiffness:400,damping:25},onClick:ge=>ge.stopPropagation(),children:[h.jsx("h2",{className:"pause-info-modal-header",children:"Need a Break?"}),h.jsxs("p",{className:"pause-info-modal-body",children:["Tap ",h.jsx("strong",{children:'"Pause"'})," anytime to stop being paired. This way no one's left looking for you"]}),h.jsx("p",{className:"pause-info-modal-subtext",children:"Your matches are saved and you can rejoin whenever you're ready"}),h.jsx("button",{type:"button",className:"pause-info-modal-button",onClick:En,children:"Got it"})]})})})]})};let dS={data:""},fS=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||dS,hS=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,mS=/\/\*[^]*?\*\/|  +/g,op=/\n+/g,As=(t,i)=>{let a="",u="",m="";for(let x in t){let w=t[x];x[0]=="@"?x[1]=="i"?a=x+" "+w+";":u+=x[1]=="f"?As(w,x):x+"{"+As(w,x[1]=="k"?"":i)+"}":typeof w=="object"?u+=As(w,i?i.replace(/([^,])+/g,b=>x.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,v=>/&/.test(v)?v.replace(/&/g,b):b?b+" "+v:v)):x):w!=null&&(x=/^--/.test(x)?x:x.replace(/[A-Z]/g,"-$&").toLowerCase(),m+=As.p?As.p(x,w):x+":"+w+";")}return a+(i&&m?i+"{"+m+"}":m)+u},Yi={},Sx=t=>{if(typeof t=="object"){let i="";for(let a in t)i+=a+Sx(t[a]);return i}return t},pS=(t,i,a,u,m)=>{let x=Sx(t),w=Yi[x]||(Yi[x]=(v=>{let C=0,A=11;for(;C<v.length;)A=101*A+v.charCodeAt(C++)>>>0;return"go"+A})(x));if(!Yi[w]){let v=x!==t?t:(C=>{let A,T,_=[{}];for(;A=hS.exec(C.replace(mS,""));)A[4]?_.shift():A[3]?(T=A[3].replace(op," ").trim(),_.unshift(_[0][T]=_[0][T]||{})):_[0][A[1]]=A[2].replace(op," ").trim();return _[0]})(t);Yi[w]=As(m?{["@keyframes "+w]:v}:v,a?"":"."+w)}let b=a&&Yi.g?Yi.g:null;return a&&(Yi.g=Yi[w]),((v,C,A,T)=>{T?C.data=C.data.replace(T,v):C.data.indexOf(v)===-1&&(C.data=A?v+C.data:C.data+v)})(Yi[w],i,u,b),w},gS=(t,i,a)=>t.reduce((u,m,x)=>{let w=i[x];if(w&&w.call){let b=w(a),v=b&&b.props&&b.props.className||/^go/.test(b)&&b;w=v?"."+v:b&&typeof b=="object"?b.props?"":As(b,""):b===!1?"":b}return u+m+(w??"")},"");function qc(t){let i=this||{},a=t.call?t(i.p):t;return pS(a.unshift?a.raw?gS(a,[].slice.call(arguments,1),i.p):a.reduce((u,m)=>Object.assign(u,m&&m.call?m(i.p):m),{}):a,fS(i.target),i.g,i.o,i.k)}let Ax,bf,Ef;qc.bind({g:1});let Qi=qc.bind({k:1});function xS(t,i,a,u){As.p=i,Ax=t,bf=a,Ef=u}function _s(t,i){let a=this||{};return function(){let u=arguments;function m(x,w){let b=Object.assign({},x),v=b.className||m.className;a.p=Object.assign({theme:bf&&bf()},b),a.o=/ *go\d+/.test(v),b.className=qc.apply(a,u)+(v?" "+v:"");let C=t;return t[0]&&(C=b.as||t,delete b.as),Ef&&C[0]&&Ef(b),Ax(C,b)}return m}}var yS=t=>typeof t=="function",Lc=(t,i)=>yS(t)?t(i):t,wS=(()=>{let t=0;return()=>(++t).toString()})(),Nx=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let i=matchMedia("(prefers-reduced-motion: reduce)");t=!i||i.matches}return t}})(),vS=20,Ix=(t,i)=>{switch(i.type){case 0:return{...t,toasts:[i.toast,...t.toasts].slice(0,vS)};case 1:return{...t,toasts:t.toasts.map(x=>x.id===i.toast.id?{...x,...i.toast}:x)};case 2:let{toast:a}=i;return Ix(t,{type:t.toasts.find(x=>x.id===a.id)?1:0,toast:a});case 3:let{toastId:u}=i;return{...t,toasts:t.toasts.map(x=>x.id===u||u===void 0?{...x,dismissed:!0,visible:!1}:x)};case 4:return i.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(x=>x.id!==i.toastId)};case 5:return{...t,pausedAt:i.time};case 6:let m=i.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(x=>({...x,pauseDuration:x.pauseDuration+m}))}}},Ac=[],ro={toasts:[],pausedAt:void 0},lo=t=>{ro=Ix(ro,t),Ac.forEach(i=>{i(ro)})},CS={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},bS=(t={})=>{let[i,a]=N.useState(ro),u=N.useRef(ro);N.useEffect(()=>(u.current!==ro&&a(ro),Ac.push(a),()=>{let x=Ac.indexOf(a);x>-1&&Ac.splice(x,1)}),[]);let m=i.toasts.map(x=>{var w,b,v;return{...t,...t[x.type],...x,removeDelay:x.removeDelay||((w=t[x.type])==null?void 0:w.removeDelay)||(t==null?void 0:t.removeDelay),duration:x.duration||((b=t[x.type])==null?void 0:b.duration)||(t==null?void 0:t.duration)||CS[x.type],style:{...t.style,...(v=t[x.type])==null?void 0:v.style,...x.style}}});return{...i,toasts:m}},ES=(t,i="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:i,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...a,id:(a==null?void 0:a.id)||wS()}),al=t=>(i,a)=>{let u=ES(i,t,a);return lo({type:2,toast:u}),u.id},Sr=(t,i)=>al("blank")(t,i);Sr.error=al("error");Sr.success=al("success");Sr.loading=al("loading");Sr.custom=al("custom");Sr.dismiss=t=>{lo({type:3,toastId:t})};Sr.remove=t=>lo({type:4,toastId:t});Sr.promise=(t,i,a)=>{let u=Sr.loading(i.loading,{...a,...a==null?void 0:a.loading});return typeof t=="function"&&(t=t()),t.then(m=>{let x=i.success?Lc(i.success,m):void 0;return x?Sr.success(x,{id:u,...a,...a==null?void 0:a.success}):Sr.dismiss(u),m}).catch(m=>{let x=i.error?Lc(i.error,m):void 0;x?Sr.error(x,{id:u,...a,...a==null?void 0:a.error}):Sr.dismiss(u)}),t};var SS=(t,i)=>{lo({type:1,toast:{id:t,height:i}})},AS=()=>{lo({type:5,time:Date.now()})},za=new Map,NS=1e3,IS=(t,i=NS)=>{if(za.has(t))return;let a=setTimeout(()=>{za.delete(t),lo({type:4,toastId:t})},i);za.set(t,a)},TS=t=>{let{toasts:i,pausedAt:a}=bS(t);N.useEffect(()=>{if(a)return;let x=Date.now(),w=i.map(b=>{if(b.duration===1/0)return;let v=(b.duration||0)+b.pauseDuration-(x-b.createdAt);if(v<0){b.visible&&Sr.dismiss(b.id);return}return setTimeout(()=>Sr.dismiss(b.id),v)});return()=>{w.forEach(b=>b&&clearTimeout(b))}},[i,a]);let u=N.useCallback(()=>{a&&lo({type:6,time:Date.now()})},[a]),m=N.useCallback((x,w)=>{let{reverseOrder:b=!1,gutter:v=8,defaultPosition:C}=w||{},A=i.filter(O=>(O.position||C)===(x.position||C)&&O.height),T=A.findIndex(O=>O.id===x.id),_=A.filter((O,L)=>L<T&&O.visible).length;return A.filter(O=>O.visible).slice(...b?[_+1]:[0,_]).reduce((O,L)=>O+(L.height||0)+v,0)},[i]);return N.useEffect(()=>{i.forEach(x=>{if(x.dismissed)IS(x.id,x.removeDelay);else{let w=za.get(x.id);w&&(clearTimeout(w),za.delete(x.id))}})},[i]),{toasts:i,handlers:{updateHeight:SS,startPause:AS,endPause:u,calculateOffset:m}}},_S=Qi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,RS=Qi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,kS=Qi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,PS=_s("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${_S} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${RS} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${kS} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,MS=Qi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,OS=_s("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${MS} 1s linear infinite;
`,DS=Qi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,LS=Qi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,jS=_s("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${DS} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${LS} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,BS=_s("div")`
  position: absolute;
`,FS=_s("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,VS=Qi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,US=_s("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${VS} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,zS=({toast:t})=>{let{icon:i,type:a,iconTheme:u}=t;return i!==void 0?typeof i=="string"?N.createElement(US,null,i):i:a==="blank"?null:N.createElement(FS,null,N.createElement(OS,{...u}),a!=="loading"&&N.createElement(BS,null,a==="error"?N.createElement(PS,{...u}):N.createElement(jS,{...u})))},WS=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,HS=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,GS="0%{opacity:0;} 100%{opacity:1;}",XS="0%{opacity:1;} 100%{opacity:0;}",YS=_s("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,$S=_s("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,ZS=(t,i)=>{let a=t.includes("top")?1:-1,[u,m]=Nx()?[GS,XS]:[WS(a),HS(a)];return{animation:i?`${Qi(u)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Qi(m)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},KS=N.memo(({toast:t,position:i,style:a,children:u})=>{let m=t.height?ZS(t.position||i||"top-center",t.visible):{opacity:0},x=N.createElement(zS,{toast:t}),w=N.createElement($S,{...t.ariaProps},Lc(t.message,t));return N.createElement(YS,{className:t.className,style:{...m,...a,...t.style}},typeof u=="function"?u({icon:x,message:w}):N.createElement(N.Fragment,null,x,w))});xS(N.createElement);var qS=({id:t,className:i,style:a,onHeightUpdate:u,children:m})=>{let x=N.useCallback(w=>{if(w){let b=()=>{let v=w.getBoundingClientRect().height;u(t,v)};b(),new MutationObserver(b).observe(w,{subtree:!0,childList:!0,characterData:!0})}},[t,u]);return N.createElement("div",{ref:x,className:i,style:a},m)},QS=(t,i)=>{let a=t.includes("top"),u=a?{top:0}:{bottom:0},m=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Nx()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${i*(a?1:-1)}px)`,...u,...m}},JS=qc`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,xc=16,Wa=({reverseOrder:t,position:i="top-center",toastOptions:a,gutter:u,children:m,containerStyle:x,containerClassName:w})=>{let{toasts:b,handlers:v}=TS(a);return N.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:xc,left:xc,right:xc,bottom:xc,pointerEvents:"none",...x},className:w,onMouseEnter:v.startPause,onMouseLeave:v.endPause},b.map(C=>{let A=C.position||i,T=v.calculateOffset(C,{reverseOrder:t,gutter:u,defaultPosition:i}),_=QS(A,T);return N.createElement(qS,{id:C.id,key:C.id,onHeightUpdate:v.updateHeight,className:C.visible?JS:"",style:_},C.type==="custom"?Lc(C.message,C):m?m(C):N.createElement(KS,{toast:C,position:A}))}))},Tn=Sr;const Hd=({direction:t="down",show:i=!0,className:a="",style:u={}})=>{if(!i)return null;const m=t==="down"?"rotate(180 16 16)":"";return h.jsxs("div",{className:`arrow-hint-container ${t} ${a}`,style:u,children:[h.jsx("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"arrow-hint-svg",children:h.jsxs("g",{transform:m,children:[h.jsx("path",{d:"M16 6v16M16 22l-7-7M16 22l7-7",stroke:"url(#arrow-gradient)",strokeWidth:"3.2",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#arrow-glow)"}),h.jsxs("defs",{children:[h.jsxs("linearGradient",{id:"arrow-gradient",x1:"16",y1:"6",x2:"16",y2:"22",gradientUnits:"userSpaceOnUse",children:[h.jsx("stop",{stopColor:"#7f5fff"}),h.jsx("stop",{offset:"0.5",stopColor:"#2e8bff"}),h.jsx("stop",{offset:"1",stopColor:"#00e0ff"})]}),h.jsx("filter",{id:"arrow-glow",x:"-10",y:"-10",width:"52",height:"52",filterUnits:"userSpaceOnUse",children:h.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"2.5",floodColor:"#7f5fff",floodOpacity:"0.5"})})]})]})}),h.jsx("div",{className:"arrow-hint-text",children:"Tap Here"})]})},e4=({isOpen:t,onClose:i,onConfirm:a,userName:u})=>t?h.jsx("div",{className:"kick-modal",children:h.jsxs("div",{className:"kick-modal-content",children:[h.jsx("h2",{className:"kick-modal-title",children:"Kick User"}),h.jsxs("p",{className:"kick-modal-message",children:["Are you sure you want to kick ",u," from the lobby?"]}),h.jsxs("div",{className:"kick-modal-actions",children:[h.jsx("button",{onClick:a,className:"admin-button admin-button-danger",children:"Yes, Kick User"}),h.jsx("button",{onClick:i,className:"admin-button admin-button-primary",children:"Cancel"})]})]})}):null,t4=({isOpen:t,onClose:i,onConfirm:a})=>t?h.jsx("div",{className:"join-modal",children:h.jsxs("div",{className:"join-modal-content",children:[h.jsx("h2",{className:"join-modal-title",children:"Join Lobby"}),h.jsx("p",{className:"join-modal-message",children:"Are you sure you want to join? You will be paired up with your attendees."}),h.jsxs("div",{className:"join-modal-actions",children:[h.jsx("button",{onClick:a,className:"admin-button admin-button-join",children:"Yes, Join Lobby"}),h.jsx("button",{onClick:i,className:"admin-button admin-button-primary",children:"Cancel"})]})]})}):null,Tx=(t,i)=>new Promise((a,u)=>{const x=new XMLSerializer().serializeToString(t),w=800,b=1e3,v=document.createElement("canvas");v.width=w,v.height=b;const C=v.getContext("2d");C.fillStyle="#ffffff",C.fillRect(0,0,w,b);const A=new window.Image;A.crossOrigin="anonymous",A.onload=()=>{const T=new window.Image;T.onload=()=>{const B=A.width/A.height*180,j=36,W=28,U=550,F=22,Y=182+F,K=j+F*1.2,ne=W+32,q=Y+K,ie=ne,J=b-q-ie,we=q+(J-U)/2-35,Re=(w-U)/2;let Ae=2;const be=(w-B)/2;C.drawImage(A,be,Ae,B,180),Ae+=180+F,C.fillStyle="#000000",C.font=`600 ${j}px Helvetica, Arial, sans-serif`,C.textAlign="center",C.textBaseline="top",C.fillText("Scan to join the ice-breaking session!",w/2,Ae),Ae+=j+F*1.2,C.drawImage(T,Re,we,U,U);const $=b-32-W;C.font=`${W}px Helvetica, Arial, sans-serif`,C.fillStyle="#000000",C.textBaseline="top";const ke=`code (optional): ${i}`;C.fillText(ke,w/2,$),v.toBlob(ve=>{ve?a(ve):u(new Error("Failed to create blob"))},"image/png")},T.onerror=()=>u(new Error("Failed to load QR code image")),T.src="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(x)))},A.onerror=()=>u(new Error("Failed to load logo image")),A.src="/assets/reuneo_test_9.png"}),n4=({lobbyState:t,playerCount:i,onStart:a,onEnd:u,lobbyCode:m,currentRound:x})=>{const w=t==="checkin",b=i>=2&&t==="checkin",v=t==="active",C=t==="active",A=t==="terminated",[T,_]=N.useState(null),[O,L]=N.useState({qr:!1}),[B,j]=N.useState(!1),W=N.useRef(!1),U=()=>{_("start")},F=()=>{_("end")},Y=()=>{j(!0),_("checkin")},K=()=>{T==="start"?(a(),Tn.success("Rounds started!",{position:"top-center"})):T==="end"&&u(),_(null)},ne=()=>_(null);N.useEffect(()=>{W.current||t==="checkin"&&i===0&&(W.current=!0,j(!0),_("checkin"))},[t,i]);const q=(be,Ie)=>be?"progress-arrow active-shimmer":Ie?"progress-arrow available-shimmer":"progress-arrow inactive",ie=w&&!B&&i<6,J=t==="checkin"&&i>=6,we=t==="active"&&x+1>=12;function Re(be,Ie={}){const{silent:$=!1}=Ie,ke=URL.createObjectURL(be),ve=document.createElement("a");ve.href=ke,ve.download=`reuneo-lobby-${m}.png`,document.body.appendChild(ve),ve.click(),document.body.removeChild(ve),URL.revokeObjectURL(ke),$||(L(ye=>({...ye,qr:!0})),setTimeout(()=>L(ye=>({...ye,qr:!1})),800))}const Ae=()=>{const be=document.getElementById("modal-qr-svg");be&&Tx(be,m).then(Ie=>{Re(Ie,{silent:!0}),navigator.clipboard&&navigator.clipboard.write?navigator.clipboard.write([new window.ClipboardItem({"image/png":Ie})]).then(()=>{L($=>({...$,qr:!0})),setTimeout(()=>L($=>({...$,qr:!1})),800)}).catch(()=>{L($=>({...$,qr:!0})),setTimeout(()=>L($=>({...$,qr:!1})),800)}):(L($=>({...$,qr:!0})),setTimeout(()=>L($=>({...$,qr:!1})),800))}).catch(Ie=>{console.error("Error generating QR code image:",Ie),alert("Failed to generate QR code image.")})};return h.jsxs("div",{className:"lobby-progress-bar",style:{marginTop:"-1rem",height:"40px"},children:[h.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[h.jsx("div",{className:q(w,!1),tabIndex:0,title:"Check-in phase",onClick:Y,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"Start Checkin"}),h.jsx(Hd,{direction:"down",show:ie})]}),h.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[h.jsx("div",{className:q(v,b&&!v),tabIndex:0,title:b?"Start rounds":"At least 2 players required",onClick:U,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"Start Rounds"}),h.jsx(Hd,{direction:"down",show:J})]}),h.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[h.jsx("div",{className:q(A,C&&!A),tabIndex:0,title:C?"End rounds":"Cannot end yet",onClick:F,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"End Rounds"}),h.jsx(Hd,{direction:"down",show:we})]}),T&&h.jsx("div",{className:"progress-modal-overlay",children:h.jsx("div",{className:"progress-modal",children:T==="checkin"?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"progress-modal-title",children:"Check-in: Print or Display this QR code to your attendees"}),h.jsx("div",{className:"progress-modal-message",children:"They scan to join. Once you have 6-10 people ready, click 'Start Rounds' - New arrivals will get paired up in the next rounds."}),h.jsxs("div",{className:"progress-modal-qr",onClick:Ae,style:{cursor:"pointer",position:"relative"},children:[h.jsx(mh,{value:`${window.location.origin}/lobby?code=${m}`,size:200,level:"H",includeMargin:!1,bgColor:"#ffffff",fgColor:"#000000",id:"modal-qr-svg"}),h.jsx("span",{className:"copy-icon modal-copy-icon","aria-label":"Copy",style:{position:"absolute",right:8,bottom:8,background:"#fff",borderRadius:"50%",padding:"2px"},children:h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[h.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),h.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})}),O.qr&&h.jsx("span",{className:"modal-copied-feedback",style:{position:"absolute",left:"50%",bottom:"-1.5rem",transform:"translateX(-50%)",color:"#28a745",fontWeight:600,fontSize:"0.95rem"},children:"Copied!"})]}),h.jsxs("div",{style:{textAlign:"center",marginTop:"1rem",marginBottom:"0.5rem",fontSize:"1rem",color:"#3b3b3b",fontFamily:"Helvetica, Arial, sans-serif"},children:["code (optional): ",m]}),h.jsx("div",{className:"progress-modal-actions",children:h.jsx("button",{className:"progress-modal-btn confirm",onClick:ne,children:"Got it"})})]}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"progress-modal-title",children:T==="start"?"Are you sure you want to start rounds? - Dont worry new people can join in the next rounds.":"Are you sure you want to end the rounds?"}),h.jsx("div",{className:"progress-modal-actions",children:T==="start"?h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"progress-modal-btn cancel",onClick:ne,children:"Not Yet"}),h.jsx("button",{className:"progress-modal-btn confirm",onClick:K,children:"Start"})]}):h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"progress-modal-btn cancel",onClick:ne,children:"Keep Going"}),h.jsx("button",{className:"progress-modal-btn confirm danger",onClick:K,children:"End"})]})})]})})})]})},r4=({players:t})=>{const i=[...t.pairedPlayers?t.pairedPlayers.flat():[],...t.lobbyData?t.lobbyData:[]],a=10,u=i.slice(0,a),m=i.length-a,x=i.length;return h.jsxs("div",{className:"overlapping-profile-list-wrapper",style:{marginTop:"3rem"},children:[h.jsxs("div",{className:"overlapping-profile-list",children:[u.map((w,b)=>h.jsx("img",{src:w.pfp_data||"/assets/player_icon_trans.png",alt:w.name||"Player",className:"overlapping-profile-img",style:{zIndex:b+1}},w.username||w.name||b)),m>0&&h.jsxs("span",{className:"overlapping-profile-overflow",children:["+ ",m]})]}),h.jsxs("div",{className:"overlapping-profile-list-label",style:{marginTop:"0.5rem",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.1)"},children:["People joined: ",x]})]})},i4=()=>{const{user:t,userProfile:i,checkAuth:a,permissions:u}=N.useContext(Fn),m=On(),x=Br(),w=!1,b=Math.floor(9*60),{loadSound:v,seekTo:C,cancelSound:A,checkSound:T,soundEnabled:_,setSoundEnabled:O,isPlaying:L}=Pf(),[B,j]=N.useState(!0),[W,U]=N.useState(!document.hidden),F=N.useRef(null),K=new URLSearchParams(x.search).get("code"),[ne,q]=N.useState(K||"test");N.useEffect(()=>{K||(console.log("No lobby code found in URL, using default 'test' value"),(async()=>{try{const Tt=await yt("/view_my_active_lobbies");if(Tt.ok){const ze=await Tt.json();if(console.log("Active lobbies response:",ze),ze&&ze.lobbies&&ze.lobbies.length>0){const ct=ze.lobbies[0];q(ct),window.history.replaceState({},"",`/admin_lobby_view?code=${ct}`)}}}catch(Tt){console.error("Error fetching active lobby:",Tt)}})())},[K]);const[ie,J]=N.useState(!1),[we,Re]=N.useState(null),[Ae,be]=N.useState(!1),[Ie,$]=N.useState(null),[ke,ve]=N.useState(null),[ye,De]=N.useState(null),[Ee,X]=N.useState(null),[G,Ce]=N.useState(null),[ae,se]=N.useState({}),[te,Me]=N.useState([]),[Se,Le]=N.useState(0),et=((ke==null?void 0:ke.length)||0)+((Ie==null?void 0:Ie.length)*2||0),[Xe,de]=N.useState(!1);N.useEffect(()=>{T()?O(!0):O(!1)},[]),N.useEffect(()=>{const Ge=()=>{const Tt=!document.hidden;Tt&&!W&&console.log("Page became visible - next poll will fetch latest data"),U(Tt)};return document.addEventListener("visibilitychange",Ge),()=>{document.removeEventListener("visibilitychange",Ge)}},[W]),N.useEffect(()=>{(Ee==="terminated"||Ee==="inactive")&&A()},[Ee]),N.useEffect(()=>{if(a(),u!=="admin"&&u!=="organizer"){m("/");return}const Ge=async ze=>{if(ae[ze])return ae[ze];try{const ct=await yt(`/pfp_small_icon?username=${encodeURIComponent(ze)}`);if(ct.ok){let Je=await ct.text();Je.startsWith('"')&&Je.endsWith('"')&&(Je=Je.slice(1,-1));const wt=Je.startsWith("data:image")?Je:`data:image/jpeg;base64,${Je}`;return se(Bt=>({...Bt,[ze]:wt})),wt}return null}catch(ct){return console.error(`Error fetching profile picture for ${ze}:`,ct),null}},Tt=setInterval(async()=>{try{const ze=!document.hidden,ct=await yt(`/admin_lobby_data?is_visible=${ze}`,{headers:{is_visible_t_f:ze?"t":"f",lobby_code:ne}});if(ct.ok){const Je=await ct.json();console.log("Admin lobby data:",ne,Je),(Je.lobby_state==="inactive"||Je.status==="inactive")&&A();const wt=typeof Je.round_time_left=="number"&&!isNaN(Je.round_time_left)?Je.round_time_left:0;if(F.current=wt,F.current!=null&&Je.lobby_state==="active"&&F.current!=0&&(C(b-F.current),console.log("seeking to",b-F.current)),Je.lobby_state==="active"&&Le(Bt=>Je.current_round>Bt?Je.current_round:Bt),Je.lobby_state==="terminated"&&(Le(0),A()),Je&&Je.unpaired_players){const Bt=await Promise.all(Je.unpaired_players.map(async Be=>{const Te=await Ge(Be.username);return{...Be,pfp_data:Te}})),Xt=await Promise.all((Je.pairs_data||[]).map(async Be=>{const Te=await Ge(Be[0].username),ce=await Ge(Be[1].username);return[{...Be[0],pfp_data:Te},{...Be[1],pfp_data:ce}]}));ve(Bt),$(Xt),De(Je.round_time_left),X(Je.lobby_state),Ce(Je.lobby_duration||300),Me(Je.custom_tags||[])}else console.error("Invalid lobby data structure:",Je),ve([]),$([])}else console.error("Failed to fetch admin lobby data:",ct.status)}catch(ze){console.error("Error fetching admin lobby data:",ze)}},1e3);return()=>clearInterval(Tt)},[ae]);const xe=Ge=>{Re(Ge),J(!0)},$e=()=>{J(!1),Re(null)},Ze=()=>{we&&fetch(window.server_url+"/kick_user",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"},body:JSON.stringify({username:we.username,lobby_code:ne})}).then(Ge=>{Ge.ok?console.log(`User ${we.name} kicked successfully`):console.error(`Failed to kick user ${we.name}`)}).catch(Ge=>{console.error("Error kicking user:",Ge)}).finally(()=>{$e()})},It=()=>{be(!0)},it=()=>{be(!1)},qe=()=>{m(`/lobby?code=${ne}`),it()};function tt(Ge,Tt={}){const{silent:ze=!1}=Tt,ct=URL.createObjectURL(Ge),Je=document.createElement("a");Je.href=ct,Je.download=`reuneo-lobby-${ne}.png`,document.body.appendChild(Je),Je.click(),document.body.removeChild(Je),URL.revokeObjectURL(ct),ze||Tn.success("QR code downloaded!")}async function jt(){const Ge=document.getElementById("admin-qr-svg");Ge&&Tx(Ge,ne).then(Tt=>{tt(Tt,{silent:!0}),navigator.clipboard&&navigator.clipboard.write?navigator.clipboard.write([new window.ClipboardItem({"image/png":Tt})]).then(()=>{Tn.success("Downloaded and copied to clipboard!")}).catch(()=>{Tn.success("QR code downloaded!")}):Tn.success("QR code downloaded!")}).catch(Tt=>{console.error("Error generating QR code image:",Tt),Tn.error("Failed to generate QR code image.")})}const Ue=()=>h.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.125)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},children:h.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",position:"relative",minWidth:"300px"},children:[h.jsx("button",{onClick:()=>j(!1),style:{color:"#144fff",position:"absolute",right:"10px",top:"10px",border:"none",background:"none",fontSize:"16px",cursor:"pointer",fontWeight:"bold",padding:"4px 8px"},children:"X"}),h.jsx("h2",{style:{marginTop:"5px"},children:"The Sound is Important"}),h.jsx("h3",{style:{marginTop:"5px"},children:"Raise your volume also"}),h.jsx("p",{style:{color:"#144dff"},children:"You'll need this for the best experience."}),h.jsx("button",{onClick:()=>{v(),j(!1)},style:{padding:"10px 20px",marginTop:"20px",backgroundColor:"#144dff",color:"#ffffff",border:"none",borderRadius:"14px",fontWeight:"bold",cursor:"pointer"},children:"Enable Sound"})]})}),gn=async()=>{await yt("/start_rounds",{method:"GET",headers:{lobby_code:ne}})},ir=async()=>{A(),(await yt("/terminate_lobby",{method:"GET",headers:{lobby_code:ne}})).ok&&m("/")};return h.jsxs(h.Fragment,{children:[h.jsx(Wa,{position:"top-center"}),h.jsxs("div",{className:"admin-lobby-container",children:[w,h.jsx("div",{className:"admin-view-logo",style:{cursor:"pointer"},children:h.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Reuneo Logo",style:{maxWidth:"85px",height:"auto",objectFit:"contain",transition:"transform 0.3s ease"},onClick:()=>m("/")})}),h.jsx(n4,{lobbyState:Ee,playerCount:et,onStart:gn,onEnd:ir,lobbyCode:ne,currentRound:Se}),h.jsx(r4,{players:{pairedPlayers:Ie,lobbyData:ke}}),h.jsxs("div",{className:"admin-lobby-dropdown-toggle",onClick:()=>de(Ge=>!Ge),style:{cursor:"pointer",background:"var(--primary-color)",color:"#f5f7ff",fontWeight:700,textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",fontSize:".75rem",borderRadius:Xe?"14px 14px 0 0":"14px",padding:"0.5rem 1rem",margin:"0 auto",maxWidth:420,boxShadow:"0 2px 8px rgba(20,77,255,0.08)",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s",letterSpacing:"0.5px"},children:[Xe?"Hide Controls":"More Controls",h.jsx("span",{style:{marginLeft:12,fontSize:"1.2em",transition:"transform 0.3s",display:"inline-block",transform:Xe?"rotate(180deg)":"rotate(0deg)"},children:""})]}),h.jsxs("div",{className:"admin-lobby-body",style:{maxHeight:Xe?1e3:0,overflow:"hidden",transition:"max-height 0.5s cubic-bezier(0.4,0,0.2,1)",opacity:Xe?1:0,pointerEvents:Xe?"auto":"none",marginBottom:Xe?"2rem":0},children:[h.jsxs("div",{className:"admin-lobby-qr",onClick:jt,style:{cursor:"pointer"},children:[h.jsxs("span",{className:"qr-label",style:{display:"flex",alignItems:"center",gap:"0.4rem",marginBottom:"0.5rem"},children:["People scan to join",h.jsx("span",{className:"copy-icon","aria-label":"Copy",children:h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[h.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),h.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})})]}),h.jsx("div",{style:{position:"relative",display:"inline-block"},children:h.jsx(mh,{value:`${window.location.origin}/lobby?code=${ne}`,size:140,level:"H",includeMargin:!1,bgColor:"#ffffff",fgColor:"#000000",id:"admin-qr-svg"})}),h.jsxs("div",{className:"lobby-code-display",onClick:()=>{navigator.clipboard.writeText(ne);const Ge=document.querySelector(".lobby-code-display");Ge.classList.add("copied"),setTimeout(()=>Ge.classList.remove("copied"),250)},children:[h.jsx("span",{className:"lobby-code-label",children:"lobby code:"}),h.jsx("span",{className:"lobby-code-value",children:ne}),h.jsx("span",{className:"copy-icon","aria-label":"Copy",children:h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[h.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),h.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})})]})]}),h.jsxs("div",{className:"admin-lobby-event-settings",children:[h.jsxs("div",{className:"admin-profile",children:[h.jsx("img",{src:i!=null&&i.image_data?`data:image/jpeg;base64,${i.image_data}`:"/assets/player_icon_trans.png",alt:"Your Profile",className:"admin-profile-picture"}),h.jsx("span",{className:"admin-profile-name",children:i!=null&&i.name?i.name.slice(0,20):t==null?void 0:t.slice(0,20)})]}),h.jsx("button",{onClick:It,className:"page-control-button page-control-join",style:{marginTop:".5rem"},children:"Join Rounds"}),h.jsxs("div",{className:"setting-item",style:{padding:"1rem"},children:[h.jsxs("span",{className:"setting-label",children:["Round Duration: ",h.jsxs("span",{className:"setting-value",children:[Math.floor(G/60)," min"]})]}),h.jsx("span",{className:"setting-label",style:{},children:"Tags:"}),te&&te.length>0&&h.jsx("div",{className:"setting-item",children:h.jsxs("div",{className:"tags-container",children:[te.slice(0,3).map((Ge,Tt)=>h.jsx("span",{className:"tag-pill",children:Ge},Tt)),te.length>3&&h.jsxs("span",{className:"tag-pill more-tags",children:["+",te.length-3," more"]})]})})]})]}),h.jsx("div",{className:"admin-lobby-actions"})]}),(Ee==="active"||Ee==="interrim")&&ye&&h.jsx("div",{className:"admin-lobby-timer-container",children:h.jsxs("div",{className:"admin-lobby-timer-glass",children:[h.jsx(ph,{isPlaying:Ee==="active",duration:G,initialRemainingTime:ye,colors:["#144dff"],size:90,strokeWidth:12,trailColor:"url(#trailGradient)",onComplete:()=>({shouldRepeat:!1}),strokeLinecap:"round",children:({remainingTime:Ge})=>{const Tt=Math.floor(Ge/60),ze=Math.floor(Ge%60);return h.jsxs("span",{className:`timer-text ${Ge<=10?"timer-text-fadescale":""}`,children:[Tt,":",String(ze).padStart(2,"0")]})}},`${Ee}-${Math.floor(ye)}`),h.jsx("span",{className:"timer-subtext",children:"round time left"}),h.jsx("svg",{width:"0",height:"0",children:h.jsx("defs",{children:h.jsxs("linearGradient",{id:"trailGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[h.jsx("stop",{offset:"0%",stopColor:"#e0e7ff"}),h.jsx("stop",{offset:"100%",stopColor:"#f5f7ff"})]})})})]})}),Ee!=="checkin"&&h.jsxs("div",{className:"admin-lobby-stats",children:[h.jsxs("div",{className:"stat-card",children:[h.jsx("div",{className:"stat-title",children:"Total Players"}),h.jsx("div",{className:"stat-value",children:((ke==null?void 0:ke.length)||0)+((Ie==null?void 0:Ie.length)*2||0)})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("div",{className:"stat-title",children:"Paired Players"}),h.jsx("div",{className:"stat-value",children:(Ie==null?void 0:Ie.length)*2||0})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("div",{className:"stat-title",children:"Unpaired Players"}),h.jsx("div",{className:"stat-value",children:(ke==null?void 0:ke.length)||0})]})]}),Ie&&Ee!=="checkin"&&h.jsx("div",{className:"admin-lobby-players",children:h.jsxs("div",{className:"player-section",children:[h.jsxs("div",{className:"section-header",children:["Paired Players: ",h.jsx("span",{className:"stat-value",style:{fontSize:"1.3rem"},children:(Ie==null?void 0:Ie.length)*2||0})]}),h.jsx("div",{className:"player-grid",children:Ie.map((Ge,Tt)=>{const ze=Ge[0].match_details&&Ge[0].match_details.opponent_matched_tags&&Ge[0].match_details.opponent_matched_tags.length>0||Ge[1].match_details&&Ge[1].match_details.opponent_matched_tags&&Ge[1].match_details.opponent_matched_tags.length>0;return h.jsxs("div",{className:"paired-player-card",children:[ze&&h.jsx("div",{className:"matched-pair-badge",children:"Matched"}),h.jsxs("div",{className:"paired-player",onClick:()=>xe(Ge[0]),children:[h.jsx("img",{src:Ge[0].pfp_data,alt:Ge[0].name,className:"paired-player-avatar"}),h.jsx("h3",{className:"paired-player-name",children:Ge[0].name}),Ge[0].match_details&&Ge[0].match_details.opponent_matched_tags&&Ge[0].match_details.opponent_matched_tags.length>0&&h.jsx("div",{className:"matching-tag-container",children:h.jsx("div",{className:"matched-player-tag",children:Ge[0].match_details.opponent_matched_tags.map((ct,Je)=>h.jsx("span",{className:"matching-tag-pill",children:ct},Je))})})]}),h.jsxs("div",{className:"paired-player",onClick:()=>xe(Ge[1]),children:[h.jsx("img",{src:Ge[1].pfp_data,alt:Ge[1].name,className:"paired-player-avatar"}),h.jsx("h3",{className:"paired-player-name",children:Ge[1].name}),Ge[1].match_details&&Ge[1].match_details.opponent_matched_tags&&Ge[1].match_details.opponent_matched_tags.length>0&&h.jsx("div",{className:"matching-tag-container",children:h.jsx("div",{className:"matched-player-tag",children:Ge[1].match_details.opponent_matched_tags.map((ct,Je)=>h.jsx("span",{className:"matching-tag-pill",children:ct},Je))})})]})]},Tt)})})]})}),ke&&h.jsx("div",{className:"admin-lobby-players",children:h.jsxs("div",{className:"player-section",children:[h.jsxs("div",{className:"section-header",children:[Ee==="checkin"?"People Joined":"Unpaired Players",": ",h.jsx("span",{className:"stat-value",style:{fontSize:"1.3rem"},children:(ke==null?void 0:ke.length)||0})]}),h.jsx("div",{className:"player-grid",children:ke.map((Ge,Tt)=>h.jsxs("div",{className:"player-card",onClick:()=>xe(Ge),children:[h.jsx("img",{src:Ge.pfp_data,alt:Ge.name,className:"player-avatar"}),h.jsx("h3",{className:"player-name",children:Ge.name})]},Tt))})]})}),h.jsx(t4,{isOpen:Ae,onClose:it,onConfirm:qe}),h.jsx(e4,{isOpen:ie,onClose:$e,onConfirm:Ze,userName:(we==null?void 0:we.name)||"this user"})]}),_||!B||Ee=="checkin"||Ee==null||L?null:h.jsx(Ue,{})]})},s4=()=>{const t=On(),{user:i}=N.useContext(Fn),a=()=>{window.location.href="https://reunio.app/become-an-organizer"};return h.jsxs("div",{className:"product-selection-container",children:[h.jsxs("video",{className:"background-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,children:[h.jsx("source",{src:"/assets/purchase_plan_video.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]}),h.jsxs("div",{className:"product-selection-content",children:[h.jsx("div",{className:"product-selection-header",children:h.jsx("h1",{children:"Product Selection"})}),h.jsxs("div",{className:"plans-section",children:[h.jsx("h2",{children:"Available Plans"}),h.jsxs("div",{className:"plan-card",children:[h.jsx("h3",{children:"Organizer Plan"}),h.jsxs("div",{className:"plan-description",children:[h.jsx("p",{children:"Create experiences for your community with our beta plan."}),h.jsxs("ul",{children:[h.jsx("li",{children:"Create unlimited experiences"}),h.jsx("li",{children:"Access to organizer dashboard"}),h.jsx("li",{children:"Priority customer support"})]})]}),h.jsx("button",{className:"purchase-button",onClick:a,children:"Contact Us"})]})]}),h.jsx("button",{className:"back-button",onClick:()=>t("/"),children:"Home"})]})]})},o4=()=>{const{user:t,userProfile:i,checkAuth:a,permissions:u}=N.useContext(Fn),[m,x]=N.useState(""),[w,b]=N.useState(""),[v,C]=N.useState(!1),[A,T]=N.useState(""),[_,O]=N.useState(!1),[L,B]=N.useState([]),[j,W]=N.useState(""),[U,F]=N.useState("5"),[Y,K]=N.useState("0"),[ne,q]=N.useState(!1),[ie,J]=N.useState(null),[we,Re]=N.useState(!1),[Ae,be]=N.useState(null),[Ie,$]=N.useState(null),[ke,ve]=N.useState(""),[ye,De]=N.useState(""),[Ee,X]=N.useState(null),[G,Ce]=N.useState(null),[ae,se]=N.useState(""),[te,Me]=N.useState(!1),[Se,Le]=N.useState(!1),[et,Xe]=N.useState({x:0,y:0}),[de,xe]=N.useState(1),[$e,Ze]=N.useState(null),It=8,it=On(),qe=N.useRef(null);N.useEffect(()=>{window.scrollTo(0,0),t&&(x(t),b(t)),qe.current&&qe.current.focus()},[t]);const tt=Te=>{const ce=/^[a-z0-9]+$/;return Te.length>=2&&ce.test(Te)},jt=Te=>{const ce=Te.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");b(ce),O(!0),setTimeout(()=>{O(!1)},500)},Ue=()=>{if(j.includes(",")){const Te=j.split(",").map(ft=>ft.startsWith(" ")?ft.substring(1):ft),ce=[];Te.forEach(ft=>{const ut=ft.trim();ut&&!L.includes(ut)&&!ce.includes(ut)&&ce.push(ut)}),ce.length>0&&B([...L,...ce]),W("")}else j.trim()&&!L.includes(j.trim())&&(B([...L,j.trim()]),W(""))},gn=Te=>{B(L.filter(ce=>ce!==Te))},ir=Te=>{Te.key==="Enter"&&j.trim()&&(Te.preventDefault(),Ue())},Ge=Te=>{Te==="icebreaker"?L.length>0||j.trim()?(be("icebreaker"),Re(!0)):(J("icebreaker"),B([]),W("")):Te==="custom"&&J("custom")},Tt=()=>{J(Ae),B([]),W(""),Re(!1),be(null)},ze=()=>{Re(!1),be(null)},ct=(Te,ce,ft)=>new Promise(ut=>{const xt=new Image;xt.onload=()=>{const Yt=document.createElement("canvas"),mn=Yt.getContext("2d");let{width:cn,height:dt}=xt;cn>dt?cn>ce&&(dt=dt*ce/cn,cn=ce):dt>ft&&(cn=cn*ft/dt,dt=ft),Yt.width=cn,Yt.height=dt,mn.drawImage(xt,0,0,cn,dt);const rn=Yt.toDataURL("image/jpeg",.7);ut(rn)},xt.src=URL.createObjectURL(Te)}),Je=async Te=>{const ce=Te.target.files[0];if(ce){if(se(""),Le(!0),!["image/jpeg","image/jpg","image/png"].includes(ce.type)){se("Invalid format. Please upload a JPG or PNG image."),Le(!1);return}if(ce.size>2*1024*1024){se("File too large. Please choose an image under 2MB."),Le(!1);return}try{const ft=await ct(ce,400,400);$(ce),X(ft),Me(!0),Le(!1)}catch(ft){console.error("Error processing image:",ft),se("Error processing image. Please try again."),Le(!1)}}},wt=(Te,ce)=>{Ze(ce)},Bt=async()=>{try{Le(!0);const Te=await Uc(Ee,$e);Ce(Te),Me(!1),Le(!1)}catch(Te){console.error("Error cropping logo:",Te),se("Error processing image. Please try again."),Me(!1),Le(!1)}},Xt=()=>{$(null),X(null),Ce(null),Me(!1),Le(!1),Xe({x:0,y:0}),xe(1),Ze(null),se("");const Te=document.getElementById("logoUpload");Te&&(Te.value="")},Be=async Te=>{if(Te.preventDefault(),!tt(w)){T("Lobby code must be at least 2 characters long and contain only lowercase letters and numbers");return}C(!0),T("");const ce=parseInt(U)*60+parseInt(Y);let ft=null;G&&(ft=G.split(",")[1]);try{const ut={lobby_code:w,custom_tags:ie==="custom"?L:[],lobby_duration:ce,show_table_numbers:ne};ft&&(ut.logo_icon=ft),ke.trim()&&(ut.logo_name=ke.trim()),ye.trim()&&(ut.logo_hyperlink=ye.trim());const xt=await yt("/create_lobby",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ut)});if(xt.ok)console.log("Lobby created successfully"),console.log(await xt.json()),it(`/admin_lobby_view?code=${w}`);else{const Yt=await xt.json();T(Yt.message||"Failed to create lobby"),console.error("Failed to create lobby")}}catch(ut){T("An error occurred while creating the lobby"),console.error("Error creating lobby:",ut)}finally{C(!1)}};return h.jsxs("div",{className:"create-lobby-background",children:[h.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Reunio Logo",className:"logo-image",onClick:()=>it(-1)}),h.jsxs("div",{className:"create-lobby-container",children:[h.jsx("h1",{className:"create-lobby-title",children:"Create a New Lobby"}),h.jsxs("form",{onSubmit:Be,className:"create-lobby-form",children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"lobbyCode",children:"Lobby Code"}),h.jsx("input",{ref:qe,type:"text",id:"lobbyCode",value:w,onChange:jt,placeholder:"Enter lobby code (lowercase letters and numbers only)",required:!0,className:`form-input ${_?"typing":""}`,autoComplete:"off"}),h.jsx("div",{className:"input-hint",children:"lowercase letters and numbers only"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{children:"Round Duration"}),h.jsxs("div",{className:"duration-input-container",children:[h.jsxs("div",{className:"duration-input-group",children:[h.jsx("input",{type:"number",id:"minutes",value:U,onChange:Te=>{const ce=Te.target.value;(ce===""||parseInt(ce)>0&&parseInt(ce)<=It)&&(F(ce),parseInt(ce)===It&&K("0"))},min:"1",max:It,placeholder:`1-${It}`,className:"form-input duration-input",autoComplete:"off"}),h.jsx("label",{htmlFor:"minutes",className:"duration-label",children:"Minutes"})]}),h.jsxs("div",{className:"duration-input-group",children:[h.jsx("input",{type:"number",id:"seconds",value:Y,onChange:Te=>{const ce=Te.target.value;(ce===""||parseInt(ce)>=0&&parseInt(ce)<=59)&&K(ce)},min:"0",max:"59",placeholder:"0-59",className:"form-input duration-input",autoComplete:"off",disabled:parseInt(U)===It}),h.jsx("label",{htmlFor:"seconds",className:"duration-label",children:"Seconds"})]})]}),h.jsxs("div",{className:"input-hint",children:["Maximum total duration is ",It," minutes"]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"showTableNumbers",children:"Table Numbers"}),h.jsx("input",{type:"checkbox",id:"showTableNumbers",checked:ne,onChange:Te=>q(Te.target.checked),className:"form-input checkbox-input"}),h.jsx("div",{className:"input-hint",children:"Recommended for events with 50+ people"}),h.jsx("div",{className:"input-hint",children:"Make sure to provide table numbers"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{children:"Matchmaking Categories"}),h.jsxs("div",{className:"matchmaking-tabs",children:[h.jsx("button",{type:"button",className:`tab-button ${ie==="icebreaker"?"tab-selected":""}`,onClick:()=>Ge("icebreaker"),children:"Community Ice Breaker"}),h.jsx("button",{type:"button",className:`tab-button ${ie==="custom"?"tab-selected":""}`,onClick:()=>Ge("custom"),children:"Custom Matching"})]}),ie==="custom"&&h.jsxs("div",{className:"custom-matching-section",children:[h.jsxs("div",{className:"tag-input-container",children:[h.jsx("input",{type:"text",id:"tagInput",value:j,onChange:Te=>W(Te.target.value),onKeyDown:ir,placeholder:"Add categories (press + to add)",className:"form-input",autoComplete:"off"}),h.jsx("button",{type:"button",onClick:Ue,className:"tag-add-button",children:"+"})]}),L.length>0&&h.jsx("div",{className:"tag-list",children:L.map((Te,ce)=>h.jsxs("div",{className:"tag-item",children:[Te,h.jsx("button",{type:"button",onClick:()=>gn(Te),className:"tag-remove-button",children:""})]},ce))}),h.jsx("div",{className:"input-hint",children:"If you want to match people based on categories"})]})]}),h.jsxs("div",{className:"form-group logo-upload-section",children:[h.jsx("label",{children:"Sponsor Logo"}),!G&&!te&&h.jsxs(h.Fragment,{children:[Se?h.jsx("div",{className:"logo-processing",children:"Processing..."}):h.jsxs(h.Fragment,{children:[h.jsx("input",{type:"file",id:"logoUpload",accept:"image/jpeg,image/jpg,image/png",onChange:Je,style:{display:"none"}}),h.jsx("button",{type:"button",onClick:()=>document.getElementById("logoUpload").click(),className:"logo-upload-button",children:"Upload Logo"})]}),ae&&h.jsx("div",{className:"logo-error-message",children:ae})]}),te&&Ee&&h.jsxs("div",{className:"logo-crop-container",children:[h.jsx("div",{className:"logo-crop-area",children:h.jsx(Vc,{image:Ee,crop:et,zoom:de,aspect:1,onCropChange:Xe,onZoomChange:xe,onCropComplete:wt})}),h.jsxs("div",{className:"logo-crop-controls",children:[h.jsx("button",{type:"button",onClick:Bt,className:"logo-save-button",disabled:Se,children:Se?"Processing...":"Save Crop"}),h.jsx("button",{type:"button",onClick:Xt,className:"logo-cancel-button",children:"Cancel"})]})]}),G&&!te&&h.jsx("div",{className:"logo-preview-container",children:h.jsxs("div",{className:"logo-preview",children:[h.jsx("img",{src:G,alt:"Logo preview",className:"logo-preview-image"}),h.jsx("button",{type:"button",onClick:Xt,className:"logo-remove-button",children:""})]})}),!1]}),A&&h.jsx("div",{className:"error-message",children:A}),h.jsx("button",{type:"submit",className:"submit-button",disabled:v,children:v?"Creating...":"Create Lobby"})]})]}),we&&h.jsx("div",{className:"modal-overlay",children:h.jsxs("div",{className:"modal-content",children:[h.jsx("h3",{children:"Switch to Community Ice Breaker?"}),h.jsx("p",{children:"This will clear your current matching categories."}),h.jsxs("div",{className:"modal-buttons",children:[h.jsx("button",{type:"button",onClick:ze,className:"modal-button modal-cancel",children:"Cancel"}),h.jsx("button",{type:"button",onClick:Tt,className:"modal-button modal-confirm",children:"Confirm"})]})]})})]})},a4=t=>{try{const i=new URLSearchParams(t||window.location.search),a=i.get("via")||"",u=i.get("rewardful")||i.get("rewardful_referral")||"",m=typeof window<"u"&&window.Rewardful&&window.Rewardful.referral||"",x=typeof window<"u"&&window.localStorage&&window.localStorage.getItem("rewardful_referral")||"",w=m||u||a||x||"";return w&&typeof window<"u"&&window.localStorage&&window.localStorage.setItem("rewardful_referral",w),w}catch{return""}},l4=()=>{const{login:t,user:i,checkAuth:a,permissions:u}=N.useContext(Fn),[m,x]=N.useState(""),[w,b]=N.useState(""),[v,C]=N.useState(""),[A,T]=N.useState(""),[_,O]=N.useState(""),[L,B]=N.useState(""),[j,W]=N.useState({}),[U,F]=N.useState(""),[Y,K]=N.useState(!1),ne=On(),q=Br();N.useEffect(()=>{localStorage.getItem("access_token")&&!i&&a()},[]),N.useEffect(()=>{u!==null&&(u==="admin"||u==="organizer")&&ne("/")},[u,ne]),N.useEffect(()=>{(async()=>{if(i!==null&&u!==null&&u!=="admin"&&u!=="organizer")try{if(!localStorage.getItem("access_token"))return;const Me=await yt("/check-subscription-status");Me.ok&&(await Me.json()).has_access===!0&&ne("/organizer-account-details")}catch(te){console.error("Error checking subscription status:",te)}})()},[i,u,ne]);const ie=se=>{const te=/^[a-z0-9]+$/;return se.length>=2&&te.test(se)},J=se=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(se)&&se.trim()!=="",we=se=>se.replace(/\D/g,"").length===10,Re=se=>se.trim().length>=2,Ae=se=>{const te=se.replace(/\D/g,"");return te.length===0?"":te.length<=3?`(${te}`:te.length<=6?`(${te.slice(0,3)}) ${te.slice(3)}`:`(${te.slice(0,3)}) ${te.slice(3,6)}-${te.slice(6,10)}`},be=se=>se.replace(/\D/g,""),Ie=se=>{const te=se.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");x(te),U&&F("")},$=se=>{b(se.target.value),U&&F(""),j.email&&W(te=>({...te,email:""}))},ke=se=>{const te=se.target.value;C(te),U&&F(""),j.phone&&W(Me=>({...Me,phone:""}))},ve=()=>{const se=Ae(v);C(se),se&&!we(se)?W(te=>({...te,phone:"Invalid phone number"})):W(te=>({...te,phone:""}))},ye=se=>{const te=se.target.value;T(te),U&&F(""),j.cityState&&W(Me=>({...Me,cityState:""}))},De=()=>{A&&!Re(A)?W(se=>({...se,cityState:"City/State must be at least 2 characters"})):W(se=>({...se,cityState:""}))},Ee=se=>{O(se.target.value),j.eventType&&W(te=>({...te,eventType:""}))},X=se=>{B(se.target.value),j.avgAttendees&&W(te=>({...te,avgAttendees:""}))},G=async se=>{se.preventDefault(),F(""),K(!0);const te=i!==null;if(!te&&(!m||!ie(m))){F("Username must be at least 2 characters and contain only lowercase letters and numbers"),K(!1);return}if(!w||!J(w)){W(Xe=>({...Xe,email:"Please enter a valid email address"})),F("Please enter a valid email address"),K(!1);return}const Me=be(v);if(!v||!we(v)){W(Xe=>({...Xe,phone:"Please enter a valid phone number"})),F("Please enter a valid phone number"),K(!1);return}if(!A||!Re(A)){W(Xe=>({...Xe,cityState:"City/State is required (minimum 2 characters)"})),F("City/State is required (minimum 2 characters)"),K(!1);return}const Se=new URLSearchParams(q.search),Le=a4(q.search),et=Se.get("ref")||Se.get("affiliate_code")||"";if(te){if(!localStorage.getItem("access_token")){F("Authentication required. Please log in again."),K(!1);return}try{if(!(await yt("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone_number:Me,city_state:A,event_type:_||"",avg_attendees:L||""})})).ok)throw new Error("Failed to update profile");const xe=await yt("/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w,rewardful_referral:Le,affiliate_code:et})}),$e=await xe.json();if(!xe.ok||$e.error){if($e.error&&$e.error.includes("already have an active subscription")){ne("/organizer-account-details");return}F($e.error||"Failed to create checkout session. Please try again."),K(!1);return}window.location.href=$e.checkout_url;return}catch(de){console.error("Error creating checkout session:",de),F("An error occurred. Please try again."),K(!1);return}}try{const de=await yt("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:m,password:m})}),xe=await de.json();if(xe.error==="Username already taken"){F("Username is taken"),K(!1);return}if(!de.ok){F(xe.message||"Signup failed"),K(!1);return}if(t(xe),await a(),!localStorage.getItem("access_token"))throw new Error("Authentication failed");const Ze=await fetch("/assets/fakeprofile.png");if(!Ze.ok)throw new Error("Failed to fetch profile image");const it=await(await Ze.blob()).arrayBuffer(),qe=btoa(new Uint8Array(it).reduce((gn,ir)=>gn+String.fromCharCode(ir),""));if(!(await yt("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:m,image_data:qe,phone_number:Me,city_state:A,event_type:_||"",avg_attendees:L||""})})).ok)throw new Error("Failed to update profile");await a();const jt=await yt("/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w,rewardful_referral:Le,affiliate_code:et})}),Ue=await jt.json();if(!jt.ok||Ue.error){if(Ue.error&&Ue.error.includes("already have an active subscription")){ne("/organizer-account-details");return}throw new Error(Ue.error||"Failed to create checkout session")}window.location.href=Ue.checkout_url}catch(Xe){console.error("Error:",Xe),F("An error occurred. Please try again."),K(!1)}},Ce=i===null,ae=Y||u==="admin"||u==="organizer";return h.jsxs("div",{className:"signup-container",children:[h.jsx("button",{onClick:()=>ne("/"),className:"homescreen-button",children:"Home"}),h.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),h.jsx("h3",{className:"signup-header",children:"Become an Organizer"}),h.jsx("div",{className:"step-form-container",children:h.jsxs("form",{onSubmit:G,children:[h.jsxs("div",{style:{display:Ce?"block":"none"},children:[h.jsx("label",{className:"step-label",children:"Username"}),h.jsx("input",{type:"text",value:m,onChange:Ie,placeholder:"Enter a username",className:"step-input",autoFocus:Ce}),m.length>0&&h.jsxs("div",{className:"username-info-message",children:[h.jsxs("svg",{className:"info-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[h.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),h.jsx("path",{d:"M8 5V7M8 11V9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),h.jsx("circle",{cx:"8",cy:"5",r:"0.5",fill:"currentColor"})]}),h.jsx("span",{children:"This will be your temporary password"})]})]}),h.jsxs("div",{style:{marginTop:Ce?"20px":"0"},children:[h.jsxs("label",{className:"step-label",children:["Email",j.email&&h.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[h.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),h.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),h.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),h.jsx("input",{type:"email",value:w,onChange:$,placeholder:"Enter your email",className:`step-input ${j.email?"input-error":""}`,autoFocus:!Ce})]}),h.jsxs("div",{style:{marginTop:"20px"},children:[h.jsxs("label",{className:"step-label",children:["Phone Number",j.phone&&h.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[h.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),h.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),h.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),h.jsx("input",{type:"tel",value:v,onChange:ke,onBlur:ve,placeholder:"(123) 456-7890",className:`step-input ${j.phone?"input-error":""}`})]}),h.jsxs("div",{style:{marginTop:"20px"},children:[h.jsxs("label",{className:"step-label",children:["City / State",j.cityState&&h.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[h.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),h.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),h.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),h.jsx("input",{type:"text",value:A,onChange:ye,onBlur:De,placeholder:"City / State",className:`step-input ${j.cityState?"input-error":""}`})]}),h.jsxs("div",{style:{marginTop:"20px"},children:[h.jsx("label",{className:"step-label",children:"What events do you host?"}),h.jsxs("select",{value:_,onChange:Ee,className:"step-select",children:[h.jsx("option",{value:"",children:"Select an option..."}),h.jsx("option",{value:"Hospitality-Restaurants",children:"Hospitality-Restaurants"}),h.jsx("option",{value:"Social",children:"Social"}),h.jsx("option",{value:"Residential",children:"Residential"}),h.jsx("option",{value:"Business Networking",children:"Business Networking"}),h.jsx("option",{value:"Event Specialist",children:"Event Specialist"}),h.jsx("option",{value:"Education",children:"Education"}),h.jsx("option",{value:"HR-Team Building",children:"HR-Team Building"}),h.jsx("option",{value:"Corporate",children:"Corporate"}),h.jsx("option",{value:"Co-working",children:"Co-working"}),h.jsx("option",{value:"Dating",children:"Dating"}),h.jsx("option",{value:"Other",children:"Other"})]})]}),h.jsxs("div",{style:{marginTop:"20px"},children:[h.jsx("label",{className:"step-label",children:"Avg # of attendees"}),h.jsxs("select",{value:L,onChange:X,className:"step-select",children:[h.jsx("option",{value:"",children:"Select an option..."}),h.jsx("option",{value:"5-15",children:"5-15"}),h.jsx("option",{value:"15-30",children:"15-30"}),h.jsx("option",{value:"30-50",children:"30-50"}),h.jsx("option",{value:"50-75",children:"50-75"}),h.jsx("option",{value:"75-100",children:"75-100"}),h.jsx("option",{value:"100-150",children:"100-150"}),h.jsx("option",{value:"150-200",children:"150-200"}),h.jsx("option",{value:"200+",children:"200+"})]})]}),U&&h.jsx("div",{className:"error-message",style:{marginTop:"15px",marginBottom:"10px"},children:U}),h.jsx("button",{type:"submit",className:"primary-button",disabled:ae,style:{marginTop:"20px"},children:Y?"Loading...":"Submit"})]})})]})},c4=()=>{const[t,i]=N.useState(!1),[a,u]=N.useState(""),m=N.useRef(null),x=On(),w=Br();return N.useEffect(()=>{const v=new URLSearchParams(w.search).get("session_id");return(async()=>{let A="/";if(!v){u("Missing session ID"),i(!0),m.current=setTimeout(()=>{i(!1),x(A)},2e3);return}try{if(!localStorage.getItem("access_token")){u("Authentication required"),i(!0),m.current=setTimeout(()=>{i(!1),x(A)},2e3);return}const _=await yt(`/organizer-signup-success?session_id=${v}`),O=await _.json();if(!_.ok||O.error)console.error("Payment verification failed:",O.error),u(O.error||"Payment verification failed");else try{const L=await yt("/view_my_active_lobbies");if(L.ok){const B=await L.json();A=!!(B&&Array.isArray(B.lobbies)&&B.lobbies.length>0)?"/":"/create_lobby"}else A="/"}catch(L){console.error("Error checking active lobbies:",L),A="/"}}catch(T){console.error("Error verifying payment:",T),u("Failed to verify payment")}i(!0),m.current=setTimeout(()=>{i(!1),x(A)},2e3)})(),()=>{m.current&&(clearTimeout(m.current),m.current=null)}},[w.search,x]),t?h.jsxs("div",{className:"success-overlay",children:[h.jsx("div",{className:"success-text",children:"Success! You're now an organizer!"}),a&&h.jsx("div",{className:"success-error",style:{marginTop:"20px"},children:a})]}):h.jsx("div",{className:"signup-container",children:h.jsx("div",{className:"loading-message",children:"Processing..."})})},u4=()=>{const{user:t,checkAuth:i,permissions:a}=N.useContext(Fn),u=On(),[m,x]=N.useState(null),[w,b]=N.useState(!0),[v,C]=N.useState(!1),[A,T]=N.useState(""),[_,O]=N.useState(!1),[L,B]=N.useState(!1);N.useEffect(()=>{a!==null&&a!=="admin"&&a!=="organizer"&&u("/organizer-signup")},[a,u]),N.useEffect(()=>{t&&(async()=>{try{const F=await yt("/organizer-account-details"),Y=await F.json();if(!F.ok||Y.error){if((a==="admin"||a==="organizer")&&Y.has_subscription!==!1){T(Y.error||"Some subscription details may be incomplete"),x(Y),b(!1);return}if(Y.has_subscription===!1){u("/organizer-signup");return}T(Y.error||"Failed to load account details"),Y.has_subscription!==!1&&x(Y),b(!1);return}if(Y.has_subscription===!1){u("/organizer-signup");return}x(Y)}catch(F){console.error("Error fetching account details:",F),T("Failed to load account details. Please try again.")}finally{b(!1)}})()},[t,a,u]),N.useEffect(()=>(_?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[_]);const j=U=>U?new Date(U*1e3).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):null,W=async()=>{C(!0),T("");try{const U=await yt("/cancel-subscription",{method:"POST",headers:{"Content-Type":"application/json"}}),F=await U.json();if(!U.ok||F.error){T(F.error||"Failed to cancel subscription"),C(!1),O(!1);return}B(!0),O(!1),setTimeout(()=>{u("/")},1500)}catch(U){console.error("Error canceling subscription:",U),T("An error occurred. Please try again."),C(!1),O(!1)}};return w?h.jsx("div",{className:"signup-container",children:h.jsx("div",{className:"loading-message",children:"Loading account details..."})}):!m&&!w?h.jsxs("div",{className:"signup-container",children:[h.jsx("button",{onClick:()=>u("/"),className:"homescreen-button",children:"Home"}),h.jsx("div",{className:"error-message",children:A||"No account details found"})]}):m?h.jsxs("div",{className:"signup-container",children:[h.jsx("button",{onClick:()=>u("/"),className:"homescreen-button",children:"Home"}),h.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),h.jsx("h3",{className:"signup-header",children:"Organizer Account Details"}),h.jsx("div",{className:"step-form-container",children:h.jsxs("div",{className:"account-details-content",children:[A&&h.jsx("div",{className:"error-message",style:{marginBottom:"20px"},children:A}),m.subscription_status&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Subscription Status:"}),h.jsx("span",{className:`detail-value status-${m.subscription_status}`,children:m.subscription_status})]}),m.email&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Email:"}),h.jsx("span",{className:"detail-value",children:m.email})]}),m.billing_period&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Billing Period:"}),h.jsx("span",{className:"detail-value",children:m.billing_period})]}),m.amount!==null&&m.amount!==void 0&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Amount:"}),h.jsxs("span",{className:"detail-value",children:["$",m.amount," ",m.currency||""]})]}),m.current_period_start&&j(m.current_period_start)&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Current Period Start:"}),h.jsx("span",{className:"detail-value",children:j(m.current_period_start)})]}),m.current_period_end&&j(m.current_period_end)&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Current Period End:"}),h.jsx("span",{className:"detail-value",children:j(m.current_period_end)})]}),m.cancel_at_period_end&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Cancellation:"}),h.jsx("span",{className:"detail-value",children:"Will cancel at period end"})]}),h.jsx("button",{onClick:()=>O(!0),className:"primary-button cancel-button",style:{marginTop:"30px"},children:"Cancel Subscription"})]})}),_&&h.jsx("div",{className:"modal-overlay",onClick:U=>U.stopPropagation(),children:h.jsxs("div",{className:"modal-content",onClick:U=>U.stopPropagation(),children:[h.jsx("h3",{children:"Cancel Subscription"}),h.jsx("p",{children:"Are you sure you want to cancel your subscription?"}),h.jsxs("div",{className:"modal-buttons",children:[h.jsx("button",{className:"modal-button modal-cancel",onClick:()=>O(!1),disabled:v,children:"Cancel"}),h.jsx("button",{className:"modal-button modal-confirm",onClick:W,disabled:v,children:v?"Processing...":"Confirm"})]})]})}),L&&h.jsx("div",{className:"toast-container",children:h.jsx("div",{className:"toast-message",children:"Subscription canceled successfully"})})]}):null},Sf=({size:t=60,className:i=""})=>h.jsx("div",{className:`attendees-spinner ${i}`,style:{width:t,height:t},children:h.jsx("div",{className:"attendees-spinner-inner"})}),Gd=["#6366f1","#8b5cf6","#ec4899","#f59e0b","#10b981","#3b82f6","#ef4444","#14b8a6","#f97316","#a855f7","#06b6d4","#84cc16"],d4=t=>{if(!t)return Gd[0];let i=0;for(let u=0;u<t.length;u++)i=t.charCodeAt(u)+((i<<5)-i);const a=Math.abs(i)%Gd.length;return Gd[a]},Af=Gt.memo(({tag:t})=>{const i=d4(t);return h.jsx("span",{className:"attendee-modal-tag-pill",style:{background:i},children:t})});Af.displayName="TagPill";const f4=t=>{if(!t)return"Date not available";let i;if(typeof t=="number")i=t<1e10?new Date(t*1e3):new Date(t);else if(typeof t=="string")i=new Date(t);else return"Date not available";return isNaN(i.getTime())?"Date not available":i.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},h4=({attendees:t=[]})=>{const i=N.useRef(null),a=N.useRef(null),u=N.useRef(null),[m,x]=N.useState(null),[w,b]=N.useState(!1),[v,C]=N.useState({}),[A,T]=N.useState(!1),[_,O]=N.useState({}),L=N.useRef(-1),B=N.useRef(null),[j,W]=N.useState(!1),[U,F]=N.useState(null),[Y,K]=N.useState({}),[ne,q]=N.useState(!1),[ie,J]=N.useState(null),[we,Re]=N.useState(null),[Ae,be]=N.useState(!1),Ie=N.useRef(null),$=N.useRef(null),ke=N.useRef({}),ve=N.useRef(null);N.useEffect(()=>{const de=window.matchMedia("(pointer: coarse)"),xe=()=>b(!!de.matches);return xe(),de.addEventListener?de.addEventListener("change",xe):de.addListener(xe),()=>{de.removeEventListener?de.removeEventListener("change",xe):de.removeListener(xe)}},[]),N.useEffect(()=>{const de=xe=>{a.current&&(a.current.contains(xe.target)||x(null))};return document.addEventListener("pointerdown",de,{capture:!0}),()=>{document.removeEventListener("pointerdown",de,{capture:!0})}},[]);const ye=N.useCallback((de=1)=>{const xe=i.current;if(!xe)return;const $e=Math.round(xe.clientWidth*.75)*de;xe.scrollBy({left:$e,behavior:"smooth"})},[]),De=N.useCallback(()=>{const de=i.current;return de?de.scrollLeft>0:!1},[]),Ee=N.useCallback(()=>{const de=i.current;return de?de.scrollLeft<de.scrollWidth-de.clientWidth-1:!1},[]),[X,G]=N.useState({left:!1,right:!0});N.useEffect(()=>{const de=()=>{G({left:De(),right:Ee()})},xe=i.current;return xe&&(de(),xe.addEventListener("scroll",de),window.addEventListener("resize",de)),()=>{xe&&(xe.removeEventListener("scroll",de),window.removeEventListener("resize",de))}},[t.length,De,Ee]);const Ce=N.useCallback(async de=>{if(A||de.length===0)return;const xe=de.filter(Ze=>!v[Ze]&&!_[Ze]);if(xe.length===0)return;T(!0);const $e={..._};xe.forEach(Ze=>{$e[Ze]=!0}),O($e);try{const Ze=await yt("/organizer_attendees/images",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({usernames:xe})});if(!Ze.ok)throw Ze.status===401?new Error("Unauthorized"):new Error("Failed to load images");const It=await Ze.json();if(It.status==="success"&&It.images){const it={...v};xe.forEach(qe=>{It.images[qe]?it[qe]=`data:image/jpeg;base64,${It.images[qe]}`:it[qe]=null}),C(it)}}catch(Ze){console.error("Error loading images:",Ze)}finally{T(!1);const Ze={..._};xe.forEach(It=>{delete Ze[It]}),O(Ze)}},[A,v,_]);N.useEffect(()=>{if(t.length===0||L.current>=0)return;const de=t.slice(0,30).map(xe=>xe.username);de.length>0&&(Ce(de),L.current=Math.min(29,t.length-1))},[t.length,Ce]),N.useEffect(()=>{if(t.length===0||!i.current)return;const de=new IntersectionObserver($e=>{B.current&&clearTimeout(B.current),B.current=setTimeout(()=>{$e.forEach(Ze=>{if(Ze.isIntersecting){const It=parseInt(Ze.target.dataset.index),it=L.current;if(It>=it-5&&It<t.length&&it<t.length-1){const qe=it+1,tt=Math.min(qe+30,t.length);if(qe<t.length){const jt=t.slice(qe,tt).map(Ue=>Ue.username);Ce(jt),L.current=tt-1}}}})},150)},{root:i.current,rootMargin:"200px",threshold:.5});return i.current.querySelectorAll("[data-index]").forEach($e=>de.observe($e)),u.current=de,()=>{B.current&&clearTimeout(B.current),u.current&&u.current.disconnect()}},[t.length,Ce]);const ae=N.useCallback(()=>!U||t.length===0?-1:t.findIndex(de=>de.username===U),[U,t]),se=N.useCallback(de=>{var Ze;const xe=ae();if(xe===-1||t.length===0)return null;let $e;return de==="next"?$e=(xe+1)%t.length:$e=xe===0?t.length-1:xe-1,((Ze=t[$e])==null?void 0:Ze.username)||null},[ae,t]),te=N.useCallback(async de=>{const xe=se(de);xe&&(Re(de==="next"?"left":"right"),ve.current&&clearTimeout(ve.current),ve.current=setTimeout(()=>{Re(null),ve.current=null},400),await Le(xe,!1))},[se]),Me=N.useMemo(()=>!(t.length<=1),[t.length]),Se=N.useMemo(()=>!(t.length<=1),[t.length]),Le=N.useCallback(async(de,xe=!0)=>{var $e,Ze,It,it;if(ke.current[de]){F(de),W(!0),J(null),be(xe);return}Ie.current&&Ie.current,Ie.current=de,q(!0),J(null),W(!0),F(de),be(xe);try{const qe=await yt(`/organizer_attendees/${de}/details`);if(Ie.current!==de)return;if(qe.status===401)throw localStorage.removeItem("access_token"),new Error("Session expired. Please log in again.");if(qe.status===403)throw new Error("Access denied. Organizer permissions required.");if(qe.status===404)throw new Error("Attendee details not found.");if(!qe.ok)throw new Error("Failed to load attendee details");const tt=await qe.json();if(tt.status==="success"&&tt.attendee){const jt={username:tt.attendee.username,name:tt.attendee.name||tt.attendee.username,image_data:tt.attendee.image_data?`data:image/jpeg;base64,${tt.attendee.image_data}`:null,last_joined_date:tt.attendee.last_joined_date,self_tags:(($e=tt.attendee.tags)==null?void 0:$e.tags_work)||[],desiring_tags:((Ze=tt.attendee.tags)==null?void 0:Ze.desiring_tags_work)||[],lobbies_attended:((It=tt.attendee.stats)==null?void 0:It.lobbies_attended)||0,rounds_paired:((it=tt.attendee.stats)==null?void 0:it.rounds_paired)||0};K(Ue=>{const gn={...Ue,[de]:jt};return ke.current=gn,gn}),Ie.current===de&&F(de)}else throw new Error(tt.error||"Failed to load attendee details")}catch(qe){Ie.current===de&&(console.error("Error fetching attendee details:",qe),J(qe.message||"An error occurred while loading details."))}finally{Ie.current===de&&(q(!1),Ie.current=null)}},[]),et=N.useCallback(()=>{$.current&&clearTimeout($.current),ve.current&&clearTimeout(ve.current),W(!1),J(null),Re(null),be(!1),$.current=setTimeout(()=>{F(null),$.current=null},300)},[]);N.useEffect(()=>()=>{$.current&&clearTimeout($.current)},[]),N.useEffect(()=>{const de=xe=>{xe.key==="Escape"&&j&&(xe.stopPropagation(),et())};return document.addEventListener("keydown",de,!0),()=>document.removeEventListener("keydown",de,!0)},[j,et]),N.useEffect(()=>{if(j){const de=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=de}}},[j]),N.useEffect(()=>()=>{ve.current&&clearTimeout(ve.current)},[]);const Xe=N.useMemo(()=>t.map((de,xe)=>({username:de.username||`temp-${xe}`,name:de.name||de.username||`User ${xe+1}`,small_image_data:de.small_image_data||null})),[t]);return h.jsxs("section",{className:`attendees-root ${j&&Ae?"attendees-root-modal-open":""}`,ref:a,"aria-label":"Your Community",children:[h.jsxs("div",{className:"attendees-card",children:[h.jsx("header",{className:"attendees-header",children:h.jsx("h2",{className:"attendees-title",children:"Your Community"})}),h.jsxs("div",{className:"attendees-carouselWrap",children:[h.jsx("button",{type:"button",className:"attendees-arrow attendees-arrowLeft","aria-label":"Scroll left",onClick:()=>ye(-1),disabled:!X.left||w,children:""}),h.jsx("div",{ref:i,className:"attendees-scroller",role:"list","aria-label":"Community attendees list",onMouseLeave:()=>{w||x(null)},children:Xe.map((de,xe)=>{const $e=m===de.username,Ze=m!==null,It=v[de.username],it=_[de.username];return h.jsxs("div",{"data-index":xe,className:["attendees-item",$e?"is-active":"",Ze&&!$e?"is-dimmed":"",w?"is-touch":"is-mouse"].join(" "),role:"listitem",tabIndex:0,onMouseEnter:()=>{w||x(de.username)},onFocus:()=>x(de.username),onClick:()=>{w&&x(de.username),Le(de.username,!0)},onKeyDown:qe=>{(qe.key==="Enter"||qe.key===" ")&&(qe.preventDefault(),x(de.username)),qe.key==="Escape"&&x(null)},children:[h.jsx("div",{className:"attendees-avatarWrap","aria-hidden":"true",children:it?h.jsx(Sf,{size:30,className:"attendees-tile-spinner"}):It?h.jsx("img",{className:"attendees-avatarImg",src:It,alt:"",onError:qe=>{qe.target.src="/assets/fakeprofile.png"}}):h.jsx("img",{className:"attendees-avatarImg",src:"/assets/fakeprofile.png",alt:""})}),h.jsx("div",{className:"attendees-name",title:de.name,children:de.name})]},de.username)})}),h.jsx("button",{type:"button",className:"attendees-arrow attendees-arrowRight","aria-label":"Scroll right",onClick:()=>ye(1),disabled:!X.right||w,children:""})]}),h.jsxs("div",{className:"attendees-dots","aria-hidden":"true",children:[h.jsx("span",{className:"attendees-dot is-on"}),h.jsx("span",{className:"attendees-dot"}),h.jsx("span",{className:"attendees-dot"}),h.jsx("span",{className:"attendees-dot"})]})]}),j&&h.jsxs(h.Fragment,{children:[t.length>1&&h.jsxs(h.Fragment,{children:[h.jsx("button",{type:"button",className:"attendee-modal-nav-arrow attendee-modal-nav-left",onClick:de=>{de.stopPropagation(),te("prev")},disabled:!Me,children:""}),h.jsx("button",{type:"button",className:"attendee-modal-nav-arrow attendee-modal-nav-right",onClick:de=>{de.stopPropagation(),te("next")},disabled:!Se,children:""})]}),h.jsx("div",{className:"attendee-modal-overlay",onClick:et,children:h.jsx("div",{className:`attendee-modal-content ${we?`swipe-${we}`:""}`,onClick:de=>de.stopPropagation(),children:ne?h.jsxs("div",{className:"attendee-modal-loading",children:[h.jsx(Sf,{size:60}),h.jsx("p",{children:"Loading attendee details..."})]}):ie?h.jsx("div",{className:"attendee-modal-error",children:h.jsx("p",{className:"attendee-modal-error-message",children:ie})}):U&&Y[U]?h.jsx("div",{className:"attendee-modal-inner",children:(()=>{const de=Y[U];return h.jsxs(h.Fragment,{children:[h.jsx("h2",{className:"attendee-modal-header",id:"attendee-modal-title",children:de.name}),h.jsxs("div",{className:"attendee-modal-grid",children:[h.jsxs("div",{className:"attendee-modal-left",children:[h.jsx("div",{className:"attendee-modal-date",children:f4(de.last_joined_date)}),h.jsxs("div",{className:"attendee-modal-profile-card",children:[h.jsx("div",{className:"attendee-modal-profile-img-wrapper",children:de.image_data?h.jsx("img",{className:"attendee-modal-profile-img",src:de.image_data,alt:de.name,onError:xe=>{xe.target.src="/assets/fakeprofile.png"}}):h.jsx("img",{className:"attendee-modal-profile-img",src:"/assets/fakeprofile.png",alt:de.name})}),h.jsx("div",{className:"attendee-modal-profile-footer",children:de.name})]})]}),h.jsxs("div",{className:"attendee-modal-right",children:[h.jsxs("div",{className:"attendee-modal-stat",children:[h.jsx("span",{className:"attendee-modal-stat-label",children:"events attended"}),h.jsx("span",{className:"attendee-modal-stat-value",children:de.lobbies_attended})]}),h.jsxs("div",{className:"attendee-modal-stat",children:[h.jsx("span",{className:"attendee-modal-stat-label",children:"real connections"}),h.jsxs("div",{className:"attendee-modal-stat-value-with-icons",children:[h.jsx("span",{className:"attendee-modal-stat-value",children:de.rounds_paired}),h.jsx("div",{className:"attendee-modal-staggered-icons",children:[...Array(4)].map((xe,$e)=>h.jsx("img",{className:"attendee-modal-staggered-icon",src:"/assets/fakeprofile.png",alt:""},$e))})]})]}),h.jsxs("div",{className:"attendee-modal-tags-section",children:[h.jsx("h3",{className:"attendee-modal-tags-label",children:"who I am:"}),h.jsx("div",{className:"attendee-modal-tags-container",children:de.self_tags&&de.self_tags.length>0?de.self_tags.map((xe,$e)=>h.jsx(Af,{tag:xe},`self-${$e}-${xe}`)):h.jsx("span",{className:"attendee-modal-empty-state",children:"No tags"})})]}),h.jsxs("div",{className:"attendee-modal-tags-section",children:[h.jsx("h3",{className:"attendee-modal-tags-label",children:"looking for:"}),h.jsx("div",{className:"attendee-modal-tags-container",children:de.desiring_tags&&de.desiring_tags.length>0?de.desiring_tags.map((xe,$e)=>h.jsx(Af,{tag:xe},`desiring-${$e}-${xe}`)):h.jsx("span",{className:"attendee-modal-empty-state",children:"No tags"})})]})]})]})]})})()}):null})})]})]})},m4=()=>{const{user:t,permissions:i,checkAuth:a}=N.useContext(Fn),u=On(),[m,x]=N.useState([]),[w,b]=N.useState(!0),[v,C]=N.useState(null);N.useEffect(()=>{i!==null&&i!=="admin"&&i!=="organizer"&&u("/organizer-signup")},[i,u]),N.useEffect(()=>{a()},[a]);const A=N.useCallback(async()=>{b(!0),C(null);try{const T=await yt("/organizer_attendees");if(T.status===401){localStorage.removeItem("access_token"),u("/organizer-signup");return}if(T.status===403){C("Access denied. Organizer permissions required."),b(!1);return}if(!T.ok)throw new Error("Failed to load attendees");const _=await T.json();if(_.status==="success")x(_.attendees||[]);else throw new Error(_.error||"Failed to load attendees")}catch(T){console.error("Error fetching attendees:",T),T.message==="Failed to fetch"||T.message.includes("network")?C("Network error. Please check your connection and try again."):C(T.message||"An error occurred. Please try again.")}finally{b(!1)}},[u]);return N.useEffect(()=>{(i==="organizer"||i==="admin")&&A()},[i,A]),h.jsxs("div",{className:"organizer-dashboard",children:[h.jsxs("div",{className:"dashboard-header",children:[h.jsx("h1",{children:"Organizer Dashboard"}),h.jsx("button",{onClick:()=>u("/"),className:"dashboard-home-button",children:"Home"})]}),w?h.jsx("div",{className:"attendees-loading-container",children:h.jsx(Sf,{size:60})}):v?h.jsxs("div",{className:"attendees-error-container",children:[h.jsx("div",{className:"attendees-error-message",children:v}),h.jsx("button",{className:"attendees-retry-button",onClick:A,children:"Retry"})]}):m.length===0?h.jsx("div",{className:"attendees-empty-container",children:h.jsx("div",{className:"attendees-empty-message",children:"No attendees yet"})}):h.jsx(h4,{attendees:m})]})},p4=5e3,g4=()=>{const{checkAuth:t,permissions:i,user:a}=N.useContext(Fn),u=On(),[m,x]=N.useState([]),[w,b]=N.useState(!0),[v,C]=N.useState(null),[A,T]=N.useState(!1);return N.useEffect(()=>{t()},[t]),N.useEffect(()=>{a==="topaz"&&i==="admin"?T(!0):i!==null&&a!==null&&u("/")},[i,a,u]),N.useEffect(()=>{if(!A)return;let _=!0,O,L=!0;const B=async()=>{L&&b(!0),C(null);try{const j=await yt("/admin_all_lobbies");if(!j.ok)throw new Error("Failed to fetch lobbies");const W=await j.json();if(W.status!=="success"||!Array.isArray(W.lobbies))throw new Error("Invalid response format");if(!_)return;x(W.lobbies),console.log("Received lobbies data:",W.lobbies)}catch(j){_&&C(j.message||"Error fetching lobbies")}finally{_&&L&&b(!1),L=!1,O=setTimeout(B,p4)}};return B(),()=>{_=!1,O&&clearTimeout(O)}},[A]),w?h.jsx("div",{className:"master-lobby-container",children:h.jsxs("div",{className:"loading-state",children:[h.jsx("div",{className:"loading-spinner"}),h.jsx("p",{children:"Loading lobbies..."})]})}):v&&m.length===0?h.jsx("div",{className:"master-lobby-container",children:h.jsx("div",{className:"error-state",children:h.jsx("p",{children:v})})}):m.length===0?h.jsx("div",{className:"master-lobby-container",children:h.jsx("div",{className:"empty-state",children:h.jsx("p",{children:"No active lobbies found"})})}):h.jsxs("div",{className:"master-lobby-container",children:[h.jsx("button",{className:"back-button",onClick:()=>u(-1),children:"Back"}),v&&h.jsxs("div",{className:"error-banner",style:{backgroundColor:"#f8d7da",color:"#721c24",padding:"0.75rem",marginBottom:"1rem",borderRadius:"0.25rem",border:"1px solid #f5c6cb"},children:[v," (showing last known data)"]}),h.jsx("div",{className:"master-lobby-grid",children:m.map(_=>h.jsx("div",{className:"lobby-tile",children:h.jsxs("div",{className:"lobby-tile-content",children:[h.jsx("h3",{className:"lobby-code",children:_.code}),h.jsxs("div",{className:"lobby-stats",children:[h.jsxs("span",{className:"player-count",children:[_.player_count," players"]}),h.jsx("span",{className:"lobby-state",children:_.lobby_state})]}),h.jsxs("div",{style:{fontSize:"0.7rem",color:"#666",marginTop:"0.5rem"},children:["Debug: player_count=",_.player_count,", lobby_state=",_.lobby_state]})]})},_.code))})]})};var _x={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ap=Gt.createContext&&Gt.createContext(_x),x4=["attr","size","title"];function y4(t,i){if(t==null)return{};var a=w4(t,i),u,m;if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(t);for(m=0;m<x.length;m++)u=x[m],!(i.indexOf(u)>=0)&&Object.prototype.propertyIsEnumerable.call(t,u)&&(a[u]=t[u])}return a}function w4(t,i){if(t==null)return{};var a={};for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){if(i.indexOf(u)>=0)continue;a[u]=t[u]}return a}function jc(){return jc=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},jc.apply(this,arguments)}function lp(t,i){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),a.push.apply(a,u)}return a}function Bc(t){for(var i=1;i<arguments.length;i++){var a=arguments[i]!=null?arguments[i]:{};i%2?lp(Object(a),!0).forEach(function(u){v4(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):lp(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function v4(t,i,a){return i=C4(i),i in t?Object.defineProperty(t,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[i]=a,t}function C4(t){var i=b4(t,"string");return typeof i=="symbol"?i:i+""}function b4(t,i){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var u=a.call(t,i);if(typeof u!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function Rx(t){return t&&t.map((i,a)=>Gt.createElement(i.tag,Bc({key:a},i.attr),Rx(i.child)))}function co(t){return i=>Gt.createElement(E4,jc({attr:Bc({},t.attr)},i),Rx(t.child))}function E4(t){var i=a=>{var{attr:u,size:m,title:x}=t,w=y4(t,x4),b=m||a.size||"1em",v;return a.className&&(v=a.className),t.className&&(v=(v?v+" ":"")+t.className),Gt.createElement("svg",jc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,u,w,{className:v,style:Bc(Bc({color:t.color||a.color},a.style),t.style),height:b,width:b,xmlns:"http://www.w3.org/2000/svg"}),x&&Gt.createElement("title",null,x),t.children)};return ap!==void 0?Gt.createElement(ap.Consumer,null,a=>i(a)):i(_x)}function S4(t){return co({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"},child:[]}]})(t)}function A4(t){return co({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(t)}function N4(t){return co({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M510.846 392.673c-5.211 12.157-27.239 21.089-67.36 27.318-2.064 2.786-3.775 14.686-6.507 23.956-1.625 5.566-5.623 8.869-12.128 8.869l-.297-.005c-9.395 0-19.203-4.323-38.852-4.323-26.521 0-35.662 6.043-56.254 20.588-21.832 15.438-42.771 28.764-74.027 27.399-31.646 2.334-58.025-16.908-72.871-27.404-20.714-14.643-29.828-20.582-56.241-20.582-18.864 0-30.736 4.72-38.852 4.72-8.073 0-11.213-4.922-12.422-9.04-2.703-9.189-4.404-21.263-6.523-24.13-20.679-3.209-67.31-11.344-68.498-32.15a10.627 10.627 0 0 1 8.877-11.069c69.583-11.455 100.924-82.901 102.227-85.934.074-.176.155-.344.237-.515 3.713-7.537 4.544-13.849 2.463-18.753-5.05-11.896-26.872-16.164-36.053-19.796-23.715-9.366-27.015-20.128-25.612-27.504 2.437-12.836 21.725-20.735 33.002-15.453 8.919 4.181 16.843 6.297 23.547 6.297 5.022 0 8.212-1.204 9.96-2.171-2.043-35.936-7.101-87.29 5.687-115.969C158.122 21.304 229.705 15.42 250.826 15.42c.944 0 9.141-.089 10.11-.089 52.148 0 102.254 26.78 126.723 81.643 12.777 28.65 7.749 79.792 5.695 116.009 1.582.872 4.357 1.942 8.599 2.139 6.397-.286 13.815-2.389 22.069-6.257 6.085-2.846 14.406-2.461 20.48.058l.029.01c9.476 3.385 15.439 10.215 15.589 17.87.184 9.747-8.522 18.165-25.878 25.018-2.118.835-4.694 1.655-7.434 2.525-9.797 3.106-24.6 7.805-28.616 17.271-2.079 4.904-1.256 11.211 2.46 18.748.087.168.166.342.239.515 1.301 3.03 32.615 74.46 102.23 85.934 6.427 1.058 11.163 7.877 7.725 15.859z"},child:[]}]})(t)}function I4(t){return co({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448,209.91a210.06,210.06,0,0,1-122.77-39.25V349.38A162.55,162.55,0,1,1,185,188.31V278.2a74.62,74.62,0,1,0,52.23,71.18V0l88,0a121.18,121.18,0,0,0,1.86,22.17h0A122.18,122.18,0,0,0,381,102.39a121.43,121.43,0,0,0,67,20.14Z"},child:[]}]})(t)}function T4(t){return co({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(t)}function cp(t){return co({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"},child:[]}]})(t)}function _4(t){return co({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(t)}const up=({size:t=60,className:i=""})=>h.jsx("div",{className:`attendees-spinner ${i}`,style:{width:t,height:t},children:h.jsx("div",{className:"attendees-spinner-inner"})}),R4=t=>t?`data:image/jpeg;base64,${t}`:"/assets/fakeprofile.png",k4=["instagram","facebook","email","phone","website","tiktok","snapchat"],P4=t=>({instagram:{label:"Instagram",Icon:A4,color:"#E4405F",displayPrefix:"@"},facebook:{label:"Facebook",Icon:S4,color:"#1877F2",displayPrefix:"@"},email:{label:"Email",Icon:T4,color:"#4b7ef0",displayPrefix:""},phone:{label:"Phone",Icon:_4,color:"#25D366",displayPrefix:""},website:{label:"Website",Icon:cp,color:"#4b7ef0",displayPrefix:""},tiktok:{label:"TikTok",Icon:I4,color:"#000000",displayPrefix:"@"},snapchat:{label:"Snapchat",Icon:N4,color:"#FFFC00",displayPrefix:"@"}})[t]||{label:t,Icon:cp,color:"#4b7ef0",displayPrefix:""},M4=(t,i)=>{if(!i)return null;switch(t){case"instagram":return`https://instagram.com/${i}`;case"facebook":return`https://facebook.com/${i}`;case"tiktok":return`https://tiktok.com/@${i}`;case"snapchat":return`https://snapchat.com/add/${i}`;case"email":return`mailto:${i}`;case"phone":return`tel:${i.replace(/[^\d+]/g,"")}`;case"website":return i;default:return i}},O4=t=>!t||typeof t!="object"?!1:Object.values(t).some(i=>i&&typeof i=="string"&&i.trim()),Xd=t=>[...t].sort((i,a)=>{var b,v,C,A;const u=i.lobby_date?new Date(i.lobby_date).getTime():0,m=a.lobby_date?new Date(a.lobby_date).getTime():0;if(u!==m)return m-u;const x=(((b=i.paired_with)==null?void 0:b.name)||((v=i.paired_with)==null?void 0:v.username)||"").toLowerCase(),w=(((C=a.paired_with)==null?void 0:C.name)||((A=a.paired_with)==null?void 0:A.username)||"").toLowerCase();return x<w?-1:x>w?1:0}),D4=(t,i)=>{var w;if(!t||t.length===0)return{hasNew:i.length>0,hasUpdated:!1};const a=new Set(t.map(b=>{var v;return(v=b.paired_with)==null?void 0:v.username})),u=i.some(b=>{var v;return((v=b.paired_with)==null?void 0:v.username)&&!a.has(b.paired_with.username)});let m=!1;const x=new Map(t.map(b=>{var v;return[(v=b.paired_with)==null?void 0:v.username,b]}));for(const b of i){const v=(w=b.paired_with)==null?void 0:w.username;if(!v)continue;const C=x.get(v);if(C&&JSON.stringify(C)!==JSON.stringify(b)){m=!0;break}}return{hasNew:u,hasUpdated:m}},L4=(t,i,a)=>{var x;if(!t||t.length===0)return i;const u=[...t],m=[];for(const w of i){const b=(x=w.paired_with)==null?void 0:x.username;if(!b)continue;const v=u.findIndex(C=>{var A;return((A=C.paired_with)==null?void 0:A.username)===b});v>=0?u[v]=w:m.push(w)}return[...m,...u]},Nc=(t,i)=>{var m;const a=(m=t.paired_with)==null?void 0:m.username;if(a)return a;const u=`${t.lobby_date||""}-${t.interaction_date||""}`;return u!=="-"?u:`interaction-${i}`},yc=(t,i)=>t.find((a,u)=>Nc(a,u)===i)||null,dp=async(t,i,a,u)=>{try{const m=await yt("/update-paired-interaction",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({lobby_id:t,paired_with_username:i,...a}),signal:u});if(!m.ok){const w=await m.text();throw new Error(w||`HTTP ${m.status}`)}return{success:!0,data:await m.json()}}catch(m){if(m.name==="AbortError")throw m;return{success:!1,error:m.message}}},j4=({rating:t,onRatingChange:i,interactionKey:a})=>{const u=t||0,m=x=>{i(x)};return h.jsxs("div",{className:"star-rating-container",children:[h.jsx("div",{className:"star-rating-question",children:"How was the chat?"}),h.jsx("div",{className:"star-rating-stars",children:[1,2,3,4,5].map(x=>h.jsx("button",{type:"button",className:`star-button ${x<=u?"star-filled":"star-empty"}`,onClick:()=>m(x),"aria-label":`Rate ${x} star${x!==1?"s":""}`,children:""},x))}),h.jsx("div",{className:"star-rating-disclaimer",children:"(Don't worry, your response is hidden)"})]})},B4=({value:t,onChange:i,interactionKey:a})=>{const u=m=>{i(m)};return h.jsxs("div",{className:"share-contact-container",children:[h.jsx("div",{className:"share-contact-question",children:"Share Your Contact?"}),h.jsxs("div",{className:"share-contact-buttons",children:[h.jsx("button",{type:"button",className:`share-contact-button ${t===!1?"selected":""}`,onClick:()=>u(!1),children:"No"}),h.jsx("button",{type:"button",className:`share-contact-button ${t===!0?"selected":""}`,onClick:()=>u(!0),children:"Yes"})]})]})},F4=()=>{const t=On(),{checkAuth:i,user:a,isAuthLoading:u}=N.useContext(Fn),[m,x]=N.useState([]),[w,b]=N.useState(!0),[v,C]=N.useState(!1),[A,T]=N.useState(!0),[_,O]=N.useState(0),[L,B]=N.useState(null),[j,W]=N.useState(!1),[U,F]=N.useState(new Map),[Y,K]=N.useState(new Map),ne=N.useRef(!1),q=N.useRef(!0),ie=N.useRef(null),J=N.useRef(null),we=N.useRef([]),Re=N.useRef(!1),Ae=N.useRef(new Map),be=N.useRef(new Map),Ie=N.useRef(new Map),$=N.useRef(new Map),ke=N.useRef(new Map),ve=N.useRef(new Map),ye=N.useCallback(G=>{const Ce=Ae.current.get(G);Ce&&(clearTimeout(Ce),Ae.current.delete(G));const ae=be.current.get(G);ae&&(ae.abort(),be.current.delete(G))},[]),De=N.useCallback(async(G,Ce,ae)=>{if(!ne.current){ne.current=!0;try{const se=await yt(`/paired-player-history?offset=${G}&limit=30`);if(!se.ok){if(se.status===401){q.current&&t("/");return}const Se=await se.text();throw new Error(`HTTP ${se.status}: ${Se}`)}const te=await se.json();if(!q.current)return;if(te.status!=="success"||!Array.isArray(te.interactions))throw new Error("Invalid response format");const Me=Xd(te.interactions);if(ae){const Se=we.current,Le=D4(Se,Me),et=L4(Se,Me,!0);console.log("[PairedHistory] Poll update:",{count:Me.length,hasNew:Le.hasNew,hasUpdated:Le.hasUpdated});const Xe=Xd(et);x(Xe),we.current=Xe,T(te.has_more),O(te.next_offset||0),(Le.hasNew||Le.hasUpdated)&&W(!0)}else Ce?(console.log("[PairedHistory] Initial load:",{count:Me.length}),x(Me),we.current=Me,T(te.has_more),O(te.next_offset||0),b(!1)):(x(Se=>{const Le=[...Se,...Me],et=Xd(Le);return we.current=et,et}),T(te.has_more),O(te.next_offset||0),C(!1));B(null)}catch(se){if(console.error("[PairedHistory] Error:",{message:se.message,type:ae?"polling":Ce?"initial":"infinite-scroll"}),!q.current)return;B(se.message),Tn.error(`Error: ${se.message}`),Ce?b(!1):ae||C(!1)}finally{q.current&&(ne.current=!1)}}},[t]);N.useEffect(()=>{if(q.current=!0,!u){if(!a){t("/");return}if(!Re.current)return Re.current=!0,De(0,!0,!1),()=>{q.current=!1}}},[u,a,t,De]),N.useEffect(()=>{const G=()=>{document.hidden||ne.current||!q.current||De(0,!1,!0)};if(document.hidden)return;const Ce=setInterval(G,5e3),ae=()=>{};return document.addEventListener("visibilitychange",ae),()=>{clearInterval(Ce),document.removeEventListener("visibilitychange",ae)}},[De]),N.useEffect(()=>(j&&(ie.current&&clearTimeout(ie.current),ie.current=setTimeout(()=>{q.current&&W(!1)},4e3)),()=>{ie.current&&clearTimeout(ie.current)}),[j]),N.useEffect(()=>{if(!A||v||ne.current)return;const G=new IntersectionObserver(Ce=>{Ce[0].isIntersecting&&A&&!v&&!ne.current&&q.current&&(C(!0),De(_,!1,!1))},{root:null,rootMargin:"300px",threshold:.1});return J.current&&G.observe(J.current),()=>{G.disconnect()}},[A,v,_,De]),N.useEffect(()=>{we.current=m},[m]),N.useEffect(()=>{ke.current=U},[U]),N.useEffect(()=>{ve.current=Y},[Y]),N.useEffect(()=>{m.length!==0&&(F(G=>{const Ce=new Map(G);let ae=!1;return m.forEach((se,te)=>{const Me=Nc(se,te);if(!Ce.has(Me)){const Se=se.partner_star_rating;Se!==null&&Se>=1&&Se<=5&&(Ce.set(Me,Se),ae=!0)}}),ae?Ce:G}),K(G=>{const Ce=new Map(G);let ae=!1;return m.forEach((se,te)=>{const Me=Nc(se,te);if(!Ce.has(Me)){const Se=se.user_show_contact;Se!==null&&typeof Se=="boolean"&&(Ce.set(Me,Se),ae=!0)}}),ae?Ce:G}))},[m]);const Ee=N.useCallback((G,Ce)=>{var Me;const ae=yc(we.current,G);if(!(ae!=null&&ae.lobby_id)||!((Me=ae.paired_with)!=null&&Me.username)){Tn.error("Unable to save: interaction not found");return}let se=Ie.current.get(G);if(se===void 0){const Se=ke.current.get(G),Le=ae.partner_star_rating;se=Se??(Le!==null&&Le>=1&&Le<=5?Le:null),Ie.current.set(G,se)}ye(G),F(Se=>{const Le=new Map(Se);return Le.set(G,Ce),ke.current=Le,Le});const te=setTimeout(async()=>{var de;if(!q.current)return;const Se=yc(we.current,G);if(!(Se!=null&&Se.lobby_id)||!((de=Se.paired_with)!=null&&de.username)){if(!q.current)return;F(xe=>{const $e=new Map(xe);return se!=null?$e.set(G,se):$e.delete(G),ke.current=$e,$e}),Ie.current.delete(G),Tn.error("Unable to save: interaction not found");return}const Le=new AbortController;be.current.set(G,Le);const et=Se.paired_with.username,Xe=Se.lobby_id;console.log("[PairedHistory] Updating rating:",{partner_username:et,lobby_id:Xe,rating:Ce,previous_rating:se});try{const xe=await dp(Xe,et,{partner_star_rating:Ce},Le.signal);if(!q.current)return;be.current.delete(G),xe.success?(Ie.current.delete(G),console.log("[PairedHistory] Rating update successful:",{partner_username:et,lobby_id:Xe,rating:Ce,response:xe.data}),Tn.success("Saved",{duration:1e3,style:{background:"#144dff",color:"white",borderRadius:"8px",padding:"12px 20px",fontSize:"0.9rem",fontWeight:"500"}})):(console.error("[PairedHistory] Rating update failed:",{partner_username:et,lobby_id:Xe,rating:Ce,error:xe.error}),F($e=>{const Ze=new Map($e);return se!=null?Ze.set(G,se):Ze.delete(G),ke.current=Ze,Ze}),Ie.current.delete(G),Tn.error(xe.error||"Failed to save. Please try again."))}catch(xe){if(!q.current)return;if(be.current.delete(G),xe.name==="AbortError"){console.log("[PairedHistory] Rating update aborted:",{partner_username:et,lobby_id:Xe});return}console.error("[PairedHistory] Rating update error:",{partner_username:et,lobby_id:Xe,rating:Ce,error:xe.message}),F($e=>{const Ze=new Map($e);return se!=null?Ze.set(G,se):Ze.delete(G),ke.current=Ze,Ze}),Ie.current.delete(G),Tn.error(xe.message||"Failed to save. Please try again.")}},500);Ae.current.set(G,te)},[ye]),X=N.useCallback((G,Ce)=>{var Me;const ae=yc(we.current,G);if(!(ae!=null&&ae.lobby_id)||!((Me=ae.paired_with)!=null&&Me.username)){Tn.error("Unable to save: interaction not found");return}let se=$.current.get(G);if(se===void 0){const Se=ve.current.get(G),Le=ae.user_show_contact;se=Se??(Le!==null&&typeof Le=="boolean"?Le:null),$.current.set(G,se)}ye(G),K(Se=>{const Le=new Map(Se);return Le.set(G,Ce),ve.current=Le,Le});const te=setTimeout(async()=>{var de;if(!q.current)return;const Se=yc(we.current,G);if(!(Se!=null&&Se.lobby_id)||!((de=Se.paired_with)!=null&&de.username)){if(!q.current)return;K(xe=>{const $e=new Map(xe);return se!=null?$e.set(G,se):$e.delete(G),ve.current=$e,$e}),$.current.delete(G),Tn.error("Unable to save: interaction not found");return}const Le=new AbortController;be.current.set(G,Le);const et=Se.paired_with.username,Xe=Se.lobby_id;console.log("[PairedHistory] Updating share contact:",{partner_username:et,lobby_id:Xe,user_show_contact:Ce,previous_value:se});try{const xe=await dp(Xe,et,{user_show_contact:Ce},Le.signal);if(!q.current)return;be.current.delete(G),xe.success?($.current.delete(G),console.log("[PairedHistory] Share contact update successful:",{partner_username:et,lobby_id:Xe,user_show_contact:Ce,response:xe.data}),Tn.success("Saved",{duration:1e3,style:{background:"#144dff",color:"white",borderRadius:"8px",padding:"12px 20px",fontSize:"0.9rem",fontWeight:"500"}})):(console.error("[PairedHistory] Share contact update failed:",{partner_username:et,lobby_id:Xe,user_show_contact:Ce,error:xe.error}),K($e=>{const Ze=new Map($e);return se!=null?Ze.set(G,se):Ze.delete(G),ve.current=Ze,Ze}),$.current.delete(G),Tn.error(xe.error||"Failed to save. Please try again."))}catch(xe){if(!q.current)return;if(be.current.delete(G),xe.name==="AbortError"){console.log("[PairedHistory] Share contact update aborted:",{partner_username:et,lobby_id:Xe});return}console.error("[PairedHistory] Share contact update error:",{partner_username:et,lobby_id:Xe,user_show_contact:Ce,error:xe.message}),K($e=>{const Ze=new Map($e);return se!=null?Ze.set(G,se):Ze.delete(G),ve.current=Ze,Ze}),$.current.delete(G),Tn.error(xe.message||"Failed to save. Please try again.")}},300);Ae.current.set(G,te)},[ye]);return N.useEffect(()=>()=>{q.current=!1,ie.current&&clearTimeout(ie.current),be.current.forEach(G=>{G.abort()}),Ae.current.forEach(G=>{clearTimeout(G)}),Ae.current.clear(),be.current.clear(),Ie.current.clear(),$.current.clear()},[]),u?h.jsx(ol,{fullScreen:!0}):h.jsxs("div",{className:"paired-player-history-container",children:[h.jsx(Wa,{position:"top-center"}),h.jsx("button",{onClick:()=>t("/"),className:"homescreen-button",children:"Home"}),h.jsx("button",{onClick:()=>t("/post-event-auth"),className:"update-profile-button",children:"Update Profile"}),j&&h.jsx("div",{className:"new-info-indicator",children:"New Notifications"}),h.jsxs("div",{className:"paired-player-history-content",children:[h.jsx("h1",{className:"paired-player-history-title",children:"View Your Matches"}),w&&h.jsx("div",{className:"loading-grid",children:Array.from({length:30}).map((G,Ce)=>h.jsx(up,{size:60},Ce))}),!w&&m.length===0&&h.jsx("div",{className:"empty-state",children:h.jsx("p",{children:"No Past History Available"})}),!w&&m.length>0&&h.jsxs("div",{className:"interactions-list",children:[m.map((G,Ce)=>{const ae=G.paired_with||{},se=R4(ae.image_data),te=Nc(G,Ce),Me=U.get(te)??(G.partner_star_rating!==null&&G.partner_star_rating>=1&&G.partner_star_rating<=5?G.partner_star_rating:null),Se=Y.has(te)?Y.get(te):G.user_show_contact!==null&&typeof G.user_show_contact=="boolean"?G.user_show_contact:null,Le=G.partner_show_contact===!0,et=Le&&O4(ae.social_links),Xe=Le&&ae.contact_url&&!et;return h.jsxs("div",{className:"interaction-card",children:[h.jsxs("div",{className:"interaction-card-main",children:[h.jsxs("div",{className:"interaction-card-left",children:[h.jsx("div",{className:"interaction-card-image",children:h.jsx("img",{src:se,alt:ae.name||"Partner",onError:de=>{de.target.src="/assets/fakeprofile.png"}})}),h.jsx("div",{className:"interaction-card-name",children:ae.name||ae.username||"Unknown"})]}),h.jsxs("div",{className:"interaction-card-right",children:[h.jsx(j4,{rating:Me,onRatingChange:de=>Ee(te,de),interactionKey:te}),h.jsx(B4,{value:Se,onChange:de=>X(te,de),interactionKey:te})]})]}),(et||Xe)&&h.jsxs("div",{className:"contact-info-section",children:[h.jsx("div",{className:"social-links-header",children:ae.name?`${ae.name}'s contact info`:"Contact info"}),et&&h.jsx("div",{className:"social-links-display",children:k4.map(de=>{var jt;const xe=(jt=ae.social_links)==null?void 0:jt[de];if(!xe||!xe.trim())return null;const{label:$e,Icon:Ze,color:It,displayPrefix:it}=P4(de),qe=M4(de,xe),tt=it+xe;return h.jsxs("a",{href:qe,target:"_blank",rel:"noopener noreferrer",className:"social-link-item",title:$e,children:[h.jsx("span",{className:"social-link-icon",children:h.jsx(Ze,{size:16,color:It})}),h.jsx("span",{className:"social-link-value",children:tt})]},de)})}),Xe&&h.jsxs("div",{className:"interaction-card-contact-row",children:[h.jsx("img",{src:"/assets/contact_url_asset.png",alt:"Contact",className:"contact-url-icon"}),h.jsx("a",{href:ae.contact_url,target:"_blank",rel:"noopener noreferrer",className:"contact-url-link",title:ae.contact_url,children:ae.contact_url})]})]})]},te)}),A&&h.jsx("div",{ref:J,"data-sentinel":"true",className:"infinite-scroll-sentinel",children:v&&h.jsx(up,{size:40})}),!A&&h.jsx("div",{className:"no-more-interactions",children:"No more interactions"})]})]})]})},V4=!0,U4=()=>{const t=On(),{checkAuth:i,user:a,isAuthLoading:u}=N.useContext(Fn),[m,x]=N.useState(""),[w,b]=N.useState(""),[v,C]=N.useState(""),[A,T]=N.useState(""),[_,O]=N.useState(""),[L,B]=N.useState(""),[j,W]=N.useState(""),[U,F]=N.useState(""),[Y,K]=N.useState(""),[ne,q]=N.useState(!1),[ie,J]=N.useState(!0),[we,Re]=N.useState(!1),[Ae,be]=N.useState(""),[Ie,$]=N.useState(!1),[ke,ve]=N.useState(!1),[ye,De]=N.useState(!1),[Ee,X]=N.useState(!1),[G,Ce]=N.useState(!1),[ae,se]=N.useState(!1),[te,Me]=N.useState(!1),[Se,Le]=N.useState(!1),[et,Xe]=N.useState(""),de=N.useRef(null);N.useEffect(()=>{const ct=new URLSearchParams(window.location.search).get("error");if(ct){const wt={claim_expired:"Your verification link has expired. Please try again.",claim_invalid:"Invalid verification link. Please try again.",claim_failed:"Account linking failed. Please try again.",claim_blocked:"This account is an organizer account and cannot be linked this way. Please contact support."}[ct]||"An error occurred. Please try again.";be(wt),window.history.replaceState({},"","/post-event-auth")}},[]),N.useEffect(()=>{if(u)return;if(!a){t("/login");return}(async()=>{var ct,Je;try{const wt=await yt("/load_user");if(wt.status===401){t("/login");return}if(!wt.ok)throw new Error("Failed to load user data");const Bt=await wt.json();x(((ct=Bt.profile)==null?void 0:ct.name)||""),b(Bt.email||"");const Xt=((Je=Bt.profile)==null?void 0:Je.social_links)||{};C(Xt.instagram||""),T(Xt.facebook||""),O(Xt.email||""),B(Xt.phone||""),W(Xt.website||""),F(Xt.tiktok||""),K(Xt.snapchat||""),q(Bt.email_verified===!0)}catch(wt){console.error("Error fetching user data:",wt),be("Failed to load user data. Please try again.")}finally{J(!1)}})()},[u,a,t]),N.useEffect(()=>{if(G){const ze=setTimeout(()=>{Ce(!1)},4e3);return()=>clearTimeout(ze)}},[G]);const xe=()=>{!ne&&!ke&&(ve(!0),Ce(!0))},$e=ze=>{C(ze.target.value.replace(/@/g,""))},Ze=ze=>{T(ze.target.value.replace(/@/g,""))},It=ze=>{F(ze.target.value.replace(/@/g,""))},it=ze=>{K(ze.target.value.replace(/@/g,""))},qe=()=>{const ze={};if(v.trim()&&(ze.instagram=v.trim()),A.trim()&&(ze.facebook=A.trim()),_.trim()&&(ze.email=_.trim()),L.trim()&&(ze.phone=L.trim()),j.trim()){let ct=j.trim();ct&&!ct.match(/^https?:\/\//i)&&(ct="https://"+ct),ze.website=ct}return U.trim()&&(ze.tiktok=U.trim()),Y.trim()&&(ze.snapchat=Y.trim()),Object.keys(ze).length>0?ze:null},tt=()=>!!(v.trim()||A.trim()||_.trim()||L.trim()||j.trim()||U.trim()||Y.trim()),jt=async()=>{var ze;Re(!0),be("");try{const ct={name:m||"",social_links:qe()};ne||(ct.email=w||"");const Je=await yt("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ct)});if(Je.status===401){t("/login");return}if(!Je.ok){const wt=await Je.json();throw new Error(wt.detail||wt.message||"Failed to update profile")}if(V4&&!ne)try{const Bt=await(await yt("/auth/send-magic-link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w.trim()})})).json();Bt.success?($(!0),Tn.success("Check your email for the magic link!",{duration:4e3})):(console.error("Magic link failed:",Bt.error),Tn.success("Profile saved! (Email verification unavailable)",{duration:3e3}),await i(),setTimeout(()=>t("/paired-player-history"),1500))}catch(wt){console.error("Magic link request error:",wt),Tn.success("Profile saved!",{duration:2e3}),await i(),setTimeout(()=>t("/paired-player-history"),1500)}else Tn.success("Profile saved! Redirecting to your matches...",{duration:2e3}),await i(),setTimeout(()=>t("/paired-player-history"),1500)}catch(ct){console.error("Error updating profile:",ct),(ze=ct.message)!=null&&ze.toLowerCase().includes("already associated with another account")?(se(!0),be("")):be(ct.message||"An error occurred. Please try again.")}finally{Re(!1)}},Ue=async()=>{Le(!0),Xe("");try{const ct=await(await yt("/auth/claim-existing-account",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w.trim()})})).json();ct.success?(se(!1),Me(!0),Tn.success("Verification email sent!",{duration:4e3})):Xe(ct.error||"Failed to send verification email. Please try again.")}catch(ze){console.error("Error sending claim email:",ze),Xe("Network error. Please try again.")}finally{Le(!1)}},gn=()=>{se(!1),Xe(""),setTimeout(()=>{var ze;(ze=de.current)==null||ze.focus()},100)},ir=()=>{X(!1),jt()},Ge=()=>{X(!1),setTimeout(()=>{var ze;(ze=de.current)==null||ze.focus()},100)},Tt=async ze=>{if(ze.preventDefault(),be(""),!w||!w.trim()){be("Email is required to access your matches."),window.scrollTo({top:0,behavior:"smooth"});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w.trim())){be("Please enter a valid email address."),window.scrollTo({top:0,behavior:"smooth"});return}if(!tt()){be("Please provide at least one way to contact you."),window.scrollTo({top:0,behavior:"smooth"});return}if(!ne&&!ye){De(!0),X(!0);return}jt()};return u||ie?h.jsx(ol,{fullScreen:!0}):Ie?h.jsxs("div",{className:"post-event-auth-container",children:[h.jsx(Wa,{position:"top-center"}),h.jsxs("div",{className:"step-form-container",style:{textAlign:"center",padding:"40px 28px"},children:[h.jsx("div",{style:{fontSize:"56px",marginBottom:"24px"},children:""}),h.jsx("h2",{style:{color:"#1a1a2e",marginBottom:"12px",fontSize:"1.4rem",fontWeight:"700",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:"Check Your Email!"}),h.jsx("p",{style:{color:"#1a1a2e",marginBottom:"20px",lineHeight:"1.6",fontSize:"0.95rem",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:"We sent a magic link to"}),h.jsx("div",{style:{background:"#f9fafb",border:"1.5px solid #e5e7eb",borderRadius:"12px",padding:"14px 18px",marginBottom:"20px",fontWeight:"600",color:"#1a1a2e",wordBreak:"break-all",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:w}),h.jsx("p",{style:{color:"#1a1a2e",marginBottom:"24px",lineHeight:"1.6",fontSize:"0.95rem",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:"Click the link in your email to access your matches."}),h.jsxs("p",{style:{color:"#6b7280",fontSize:"0.85rem",marginBottom:"28px",lineHeight:"1.5",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:["The link expires in 15 minutes.",h.jsx("br",{}),"Don't see it? Check your spam folder."]}),h.jsx("button",{onClick:()=>$(!1),className:"primary-button",children:" Back to Form"})]})]}):te?h.jsxs("div",{className:"post-event-auth-container",children:[h.jsx(Wa,{position:"top-center"}),h.jsxs("div",{className:"step-form-container",style:{textAlign:"center",padding:"40px 28px"},children:[h.jsx("div",{style:{fontSize:"56px",marginBottom:"24px"},children:""}),h.jsx("h2",{style:{color:"#1a1a2e",marginBottom:"12px",fontSize:"1.4rem",fontWeight:"700",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:"Check Your Email!"}),h.jsx("p",{style:{color:"#1a1a2e",marginBottom:"20px",lineHeight:"1.6",fontSize:"0.95rem",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:"We sent a verification link to"}),h.jsx("div",{style:{background:"#f9fafb",border:"1.5px solid #e5e7eb",borderRadius:"12px",padding:"14px 18px",marginBottom:"20px",fontWeight:"600",color:"#1a1a2e",wordBreak:"break-all",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:w}),h.jsx("p",{style:{color:"#1a1a2e",marginBottom:"24px",lineHeight:"1.6",fontSize:"0.95rem",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:"Click the link to link your matches to your existing account."}),h.jsxs("p",{style:{color:"#6b7280",fontSize:"0.85rem",marginBottom:"28px",lineHeight:"1.5",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:["The link expires in 24 hours.",h.jsx("br",{}),"Don't see it? Check your spam folder."]}),h.jsx("button",{onClick:()=>Me(!1),className:"primary-button",children:" Back to Form"})]})]}):h.jsxs("div",{className:"post-event-auth-container",children:[h.jsx(Wa,{position:"top-center",toastOptions:{style:{background:"#1a1a2e",color:"white",borderRadius:"12px",padding:"12px 20px",fontSize:"0.9rem",fontWeight:"500",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},success:{iconTheme:{primary:"#10b981",secondary:"white"}},error:{iconTheme:{primary:"#ef4444",secondary:"white"}}}}),h.jsx("button",{onClick:()=>t("/"),className:"homescreen-button",children:"Home"}),h.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:"8px",marginBottom:"0"},children:h.jsx("img",{src:"/assets/reuneo_test_11.png",alt:"Reuneo Logo",style:{maxWidth:"100px",height:"auto",objectFit:"contain"}})}),h.jsx("h3",{className:"post-event-auth-header",style:{marginTop:"12px"},children:"Access Your Matches"}),h.jsx("div",{className:"step-form-container",children:h.jsxs("form",{onSubmit:Tt,children:[Ae&&h.jsx("div",{className:"error-message",style:{marginBottom:"20px"},children:Ae}),h.jsxs("div",{style:{marginTop:"0"},children:[h.jsx("label",{className:"step-label",children:"Name"}),h.jsx("input",{type:"text",value:m,onChange:ze=>x(ze.target.value),placeholder:"Enter your name",className:"step-input"})]}),h.jsxs("div",{style:{marginTop:"20px",position:"relative"},children:[h.jsxs("label",{className:"step-label",children:["Email ",h.jsx("span",{style:{color:"#ef4444"},children:"*"}),ne&&h.jsx("span",{style:{color:"#10b981",fontSize:"0.75rem",marginLeft:"8px",fontWeight:"600",background:"rgba(16, 185, 129, 0.1)",padding:"2px 8px",borderRadius:"6px"},children:" Verified"})]}),G&&h.jsxs("div",{className:"email-warning-toast",children:[h.jsx("span",{className:"email-warning-icon",children:""}),h.jsx("span",{className:"email-warning-text",children:"Make sure the email is correct"})]}),h.jsx("input",{ref:de,type:"email",value:w,onChange:ze=>b(ze.target.value),onFocus:xe,placeholder:"Enter your email",className:"step-input",required:!0,disabled:ne,style:ne?{backgroundColor:"#f3f4f6",color:"#9ca3af",cursor:"not-allowed",borderColor:"#e5e7eb"}:{}})]}),h.jsxs("div",{className:"social-links-section",children:[h.jsxs("div",{className:"social-links-header",children:[h.jsx("span",{className:"social-links-title",children:"Share Your Contact Info"}),h.jsx("span",{className:"social-links-subtitle",children:"(At least one required)"})]}),h.jsxs("div",{className:"social-link-field",children:[h.jsx("label",{className:"step-label",children:"Instagram"}),h.jsx("input",{type:"text",value:v,onChange:$e,placeholder:"@username",className:"step-input"})]}),h.jsxs("div",{className:"social-link-field",children:[h.jsx("label",{className:"step-label",children:"Facebook"}),h.jsx("input",{type:"text",value:A,onChange:Ze,placeholder:"@username",className:"step-input"})]}),h.jsxs("div",{className:"social-link-field",children:[h.jsx("label",{className:"step-label",children:"Personal Email"}),h.jsx("input",{type:"email",value:_,onChange:ze=>O(ze.target.value),placeholder:"you@example.com",className:"step-input"}),h.jsx("span",{className:"social-link-helper",children:"Separate email for people to reach you"})]}),h.jsxs("div",{className:"social-link-field",children:[h.jsx("label",{className:"step-label",children:"Phone"}),h.jsx("input",{type:"tel",value:L,onChange:ze=>B(ze.target.value),placeholder:"+1 (555) 123-4567",className:"step-input"})]}),h.jsxs("div",{className:"social-link-field",children:[h.jsx("label",{className:"step-label",children:"Website"}),h.jsx("input",{type:"text",value:j,onChange:ze=>W(ze.target.value),placeholder:"https://yourwebsite.com",className:"step-input"})]}),h.jsxs("div",{className:"social-link-field",children:[h.jsx("label",{className:"step-label",children:"TikTok"}),h.jsx("input",{type:"text",value:U,onChange:It,placeholder:"@username",className:"step-input"})]}),h.jsxs("div",{className:"social-link-field",children:[h.jsx("label",{className:"step-label",children:"Snapchat"}),h.jsx("input",{type:"text",value:Y,onChange:it,placeholder:"@username",className:"step-input"})]})]}),h.jsx("button",{type:"submit",className:"primary-button",disabled:we,style:{marginTop:"30px"},children:we?ne?"Updating...":"Submitting...":ne?"Update":"Submit"})]})}),Ee&&h.jsx("div",{className:"email-confirm-modal-overlay",children:h.jsxs("div",{className:"email-confirm-modal",children:[h.jsx("div",{className:"email-confirm-modal-icon",children:""}),h.jsx("h3",{className:"email-confirm-modal-title",children:"Is this email correct?"}),h.jsx("p",{className:"email-confirm-modal-subtitle",children:"Make sure its right"}),h.jsx("div",{className:"email-confirm-modal-email",children:w}),h.jsxs("div",{className:"email-confirm-modal-buttons",children:[h.jsx("button",{className:"email-confirm-btn email-confirm-btn-yes",onClick:ir,children:"Yes, it's correct"}),h.jsx("button",{className:"email-confirm-btn email-confirm-btn-no",onClick:Ge,children:"Let me edit"})]})]})}),ae&&h.jsx("div",{className:"email-confirm-modal-overlay",children:h.jsxs("div",{className:"email-confirm-modal",children:[h.jsx("div",{className:"email-confirm-modal-icon",children:""}),h.jsx("h3",{className:"email-confirm-modal-title",children:"This email is already registered"}),h.jsx("p",{className:"email-confirm-modal-subtitle",children:"To link your matches to your existing account, we'll send a verification email to:"}),h.jsx("div",{className:"email-confirm-modal-email",children:w}),et&&h.jsx("div",{style:{color:"#b91c1c",fontSize:"0.85rem",marginBottom:"16px",padding:"10px 14px",backgroundColor:"rgba(185, 28, 28, 0.08)",borderRadius:"10px",fontWeight:"500",textAlign:"left",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},children:et}),h.jsxs("div",{className:"email-confirm-modal-buttons",children:[h.jsx("button",{className:"email-confirm-btn email-confirm-btn-yes",onClick:Ue,disabled:Se,children:Se?"Sending...":"Send Verification Email"}),h.jsx("button",{className:"email-confirm-btn email-confirm-btn-no",onClick:gn,disabled:Se,children:"Use Different Email"})]})]})})]})},z4=()=>{const t=On(),{checkAuth:i}=N.useContext(Fn),[a,u]=N.useState("verifying"),[m,x]=N.useState("");return N.useEffect(()=>{(async()=>{try{const b=await yt("/auth/session",{method:"GET"});b.ok?(await b.json()).authenticated?(u("success"),await i(),setTimeout(()=>{t("/")},2e3)):(u("error"),x("Session not found. Please try logging in again.")):(u("error"),x("Could not verify your session. Please try again."))}catch(b){console.error("Session verification error:",b),u("error"),x("Network error. Please check your connection and try again.")}})()},[i,t]),h.jsx("div",{className:"auth-success-container",children:h.jsxs("div",{className:"auth-success-card",children:[a==="verifying"&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"auth-success-spinner"}),h.jsx("h2",{children:"Signing you in..."}),h.jsx("p",{children:"Please wait while we verify your session."})]}),a==="success"&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"auth-success-checkmark",children:""}),h.jsx("h2",{children:"Welcome to Reuneo!"}),h.jsx("p",{children:"You're now signed in. Redirecting you..."})]}),a==="error"&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"auth-success-error",children:""}),h.jsx("h2",{children:"Something went wrong"}),h.jsx("p",{children:m}),h.jsx("button",{className:"auth-success-button",onClick:()=>t("/login"),children:"Back to Login"})]})]})})},W4=()=>{const t=On(),[i]=_p(),{checkAuth:a}=N.useContext(Fn),[u,m]=N.useState(""),[x,w]=N.useState(""),[b,v]=N.useState(""),[C,A]=N.useState(!0),[T,_]=N.useState(!1),[O,L]=N.useState(""),[B,j]=N.useState(""),W=i.get("token");N.useEffect(()=>{(async()=>{if(!W){j("No token provided. Please request a new magic link."),A(!1);return}try{const K=await(await fetch(`${window.server_url}/auth/verify-setup-token?token=${encodeURIComponent(W)}`,{credentials:"include"})).json();K.valid&&K.email?m(K.email):j(K.error||"Invalid or expired token. Please request a new magic link.")}catch(Y){console.error("Token validation error:",Y),j("Unable to validate token. Please try again.")}finally{A(!1)}})()},[W]);const U=async F=>{if(F.preventDefault(),L(""),!x){L("Password is required");return}if(x.length<2){L("Password must be at least 2 characters");return}if(x!==b){L("Passwords do not match");return}_(!0);try{const K=await(await yt("/auth/set-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:W,password:x})})).json();K.success?(await a(),t("/paired-player-history")):L(K.error||"Failed to set password. Please try again.")}catch(Y){console.error("Set password error:",Y),L("An error occurred. Please try again.")}finally{_(!1)}};return C?h.jsx(ol,{fullScreen:!0,message:"Verifying..."}):B?h.jsxs("div",{className:"set-password-container",children:[h.jsx("button",{onClick:()=>t("/"),className:"homescreen-button",children:"Home"}),h.jsxs("div",{className:"set-password-error-container",children:[h.jsx("div",{className:"error-icon",children:""}),h.jsx("h2",{className:"error-title",children:"Link Expired or Invalid"}),h.jsx("p",{className:"error-description",children:B}),h.jsx("button",{onClick:()=>t("/login"),className:"primary-button",style:{marginTop:"20px"},children:"Go to Login"})]})]}):h.jsxs("div",{className:"set-password-container",children:[h.jsx("button",{onClick:()=>t("/"),className:"homescreen-button",children:"Home"}),h.jsx("h3",{className:"set-password-header",children:"Set Your Password"}),h.jsx("p",{className:"set-password-subtitle",children:"You'll use this to log in later"}),h.jsx("div",{className:"step-form-container",children:h.jsxs("form",{onSubmit:U,children:[O&&h.jsx("div",{className:"error-message",children:O}),h.jsxs("div",{style:{marginTop:"0"},children:[h.jsx("label",{className:"step-label",children:"Email"}),h.jsxs("div",{className:"email-display",children:[h.jsx("input",{type:"email",value:u,className:"step-input email-locked",disabled:!0,readOnly:!0}),h.jsx("span",{className:"lock-icon",children:""})]}),h.jsx("p",{className:"email-hint",children:"This is the email you verified"})]}),h.jsxs("div",{style:{marginTop:"24px"},children:[h.jsx("label",{className:"step-label",children:"Create Password"}),h.jsx("input",{type:"password",value:x,onChange:F=>w(F.target.value),placeholder:"Enter a password",className:"step-input",autoFocus:!0,autoComplete:"new-password"})]}),h.jsxs("div",{style:{marginTop:"16px"},children:[h.jsx("label",{className:"step-label",children:"Confirm Password"}),h.jsx("input",{type:"password",value:b,onChange:F=>v(F.target.value),placeholder:"Confirm your password",className:"step-input",autoComplete:"new-password"})]}),h.jsx("button",{type:"submit",className:"primary-button",disabled:T||!x,style:{marginTop:"30px"},children:T?"Setting Password...":"Set Password"})]})})]})},H4=()=>{const t=On(),[i,a]=N.useState(""),[u,m]=N.useState(!1),[x,w]=N.useState(!1),[b,v]=N.useState(!1),[C,A]=N.useState(!1),[T,_]=N.useState(""),O=W=>{const U=W.target.value.toLowerCase();a(U),_(""),!b&&U.length>0&&(v(!0),setTimeout(()=>A(!0),300),setTimeout(()=>A(!1),4300))},L=W=>W&&W.includes("@")&&W.includes("."),B=async W=>{if(W.preventDefault(),_(""),!L(i)){_("Please enter a valid email address");return}m(!0);try{const F=await(await yt("/auth/request-password-reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i.trim()})})).json();F.success?w(!0):_(F.error||"Something went wrong. Please try again.")}catch(U){console.error("Password reset request error:",U),_("Network error. Please check your connection and try again.")}finally{m(!1)}},j=()=>{w(!1),a(""),v(!1)};return h.jsxs("div",{className:"forgot-password-container",children:[h.jsx("button",{onClick:()=>t("/"),className:"homescreen-button",children:"Home"}),h.jsx("h3",{className:"forgot-password-header",children:"Reset Your Password"}),h.jsx("p",{className:"forgot-password-subtitle",children:"Enter your email and we'll send you a reset link"}),h.jsxs("div",{className:"step-form-container",children:[h.jsxs("form",{onSubmit:B,children:[T&&h.jsx("div",{className:"error-message",children:T}),h.jsxs("div",{style:{marginTop:"0"},children:[h.jsx("label",{className:"step-label",children:"Email Address"}),h.jsx("input",{type:"email",value:i,onChange:O,placeholder:"Enter your email",className:"step-input",autoFocus:!0,autoComplete:"email"})]}),h.jsx("button",{type:"submit",className:"primary-button",disabled:u||!i,style:{marginTop:"30px"},children:u?"Sending...":"Send Reset Link"})]}),h.jsx("button",{type:"button",onClick:()=>t("/login"),className:"back-to-login-link",children:"Back to Login"})]}),h.jsx(jr,{children:C&&h.jsx(St.div,{className:"email-toast",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.3},children:"Double-check your email address is correct before submitting."})}),h.jsx(jr,{children:x&&h.jsx(St.div,{className:"reset-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:j,children:h.jsxs(St.div,{className:"reset-modal-content",initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},transition:{type:"spring",stiffness:400,damping:25},onClick:W=>W.stopPropagation(),children:[h.jsx("h2",{className:"reset-modal-header",children:" Check Your Inbox"}),h.jsx("p",{className:"reset-modal-subtext",children:"If an account exists with this email, we've sent a password reset link. Check your inbox and spam folder."}),h.jsx("button",{type:"button",className:"reset-modal-button",onClick:j,children:"Got it"})]})})})]})};R2.createRoot(document.getElementById("root")).render(h.jsx(N.StrictMode,{children:h.jsx(k2,{children:h.jsxs(gw,{basename:"/",children:[h.jsx(PE,{}),h.jsx(ME,{}),h.jsxs(Gy,{children:[h.jsx($n,{path:"/",element:h.jsx(kE,{})}),h.jsx($n,{path:"/login",element:h.jsx(OE,{})}),h.jsx($n,{path:"/signup",element:h.jsx(pE,{})}),h.jsx($n,{path:"/logout",element:h.jsx(DE,{})}),h.jsx($n,{path:"/lobby",element:h.jsx(uS,{})}),h.jsx($n,{path:"/admin_lobby_view",element:h.jsx(i4,{})}),h.jsx($n,{path:"/create_lobby",element:h.jsx(o4,{})}),h.jsx($n,{path:"/product-selection",element:h.jsx(s4,{})}),h.jsx($n,{path:"/organizer-signup",element:h.jsx(l4,{})}),h.jsx($n,{path:"/organizer-signup-success",element:h.jsx(c4,{})}),h.jsx($n,{path:"/organizer-account-details",element:h.jsx(u4,{})}),h.jsx($n,{path:"/organizer-dashboard",element:h.jsx(m4,{})}),h.jsx($n,{path:"/master_lobby_view",element:h.jsx(g4,{})}),h.jsx($n,{path:"/paired-player-history",element:h.jsx(F4,{})}),h.jsx($n,{path:"/post-event-auth",element:h.jsx(U4,{})}),h.jsx($n,{path:"/set-password",element:h.jsx(W4,{})}),h.jsx($n,{path:"/forgot-password",element:h.jsx(H4,{})}),h.jsx($n,{path:"/auth/success",element:h.jsx(z4,{})})]})]})})}));
